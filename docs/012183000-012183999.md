# StackOverflow 问答 12183000-12183999

# php - Yii CListView Ajax 分页器 + 历史返回

> ID：12183001
> 
> 赞同：0
> 
> 时间：2012-08-29T17:02:06.090
> 
> 标签：php, ajax, yii, browser-history

一个控制器**pages**，**ActionIndex用小部件****CListView**渲染页面
在控制器中：

> 公共函数actionIndex（）
>      {
>          模型=新页面（）；
>          $ this-> render ('index', array (
>              'pages' => $ model,
>          ));
>      }

查看索引：

> $ this-> widget ('zii.widgets.CListView', array (
>      'dataProvider' => $ dataProvider,
>          'viewData' => array ('switch' => true),
>          'enableHistory' => true, 'id' = > 'pages_list',
>      'itemView' => '_view',
>          'template' => '{pager}
> {items}
> {pager}',
>      ));

现在实际问题：
在 ListView paginatore 链接如下所示：

> http://localhost/pages/index/Pages_page/1/
> http://localhost/pages/index/Pages_page/2/
> http://localhost/pages/index/Pages_page/3/

但在地址栏中作为链接插入- 不正确。这些都是：

> http://localhost/pages/?/pages/index/Pages_page/3/=

当然，不要翻页。
如果您重新移动到任何其他页面，则链接已经采用以下形式：

> http://localhost/pages/?/pages/index//pages/index/Pages_page/3///ajax/pages_list/Pages_page/4/ =

据我了解，有必要将侧边设置路由到 URLManager'e。
只是不确定它是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T21:32:49.300

您的控制器代码有一些错误。将以下内容用于 actionIndex()。

```
/**
 * Lists all models.
 */
public function actionIndex()
{
    $dataProvider=new CActiveDataProvider('Pages');
    $this->render('index',array(
        'dataProvider'=>$dataProvider,
    ));
} 
```

我测试了您的视图 index.php 代码，它工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T06:22:19.723

如果您禁用 enableHistory 工作正常。我找不到真正的解决方案

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T10:29:26.470

尝试删除

```
'id' => 'pages_list', 
```

在视图中。

# php - FirePHP 可以配置为在记录时告诉它从哪里调用？

> ID：12183003
> 
> 赞同：1
> 
> 时间：2012-08-29T17:02:13.763
> 
> 标签：php, firephp

我正在帮助一位同事使用遗留的意大利面条代码应用程序。其中有数千个调用`$firephp->log`，但我们正试图追踪一个特定的调用。

FirePHP 是否可以配置为在每个日志语句中包含在代码中调用它的位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T17:35:11.783

FirePHP 本身是用 PHP 编写的，因此您可以编辑`log`成员函数以添加跟踪。在原始*FirePHP.class.php*文件中，函数`log`如下所示：

```
public function log($Object, $Label=null) {
    return $this->fb($Object, $Label, FirePHP::LOG);
} 
```

如果要记录通话，只需将此方法修改为：

```
public function log($Object, $Label=null) {
    $this->trace($Label);
    return $this->fb($Object, $Label, FirePHP::LOG);
} 
```

PS 我的系统上有一个旧版本的 FirePHP，所以你的代码可能会略有不同，但变化大致相同。

# c++ - 如何在 C++ 中使用枚举

> ID：12183008
> 
> 赞同：237
> 
> 时间：2012-08-29T17:02:23.997
> 
> 标签：c++, enums

假设我们有一个`enum`类似的内容：

```
enum Days {Saturday, Sunday, Tuesday, Wednesday, Thursday, Friday}; 
```

我想创建一个实例`enum`并用适当的值初始化它，所以我这样做：

```
Days day = Days.Saturday; 
```

现在我想用现有`enum`值检查我的变量或实例，所以我这样做：

```
if (day == Days.Saturday)
{
    std::cout << "Ok its Saturday";
} 
```

这给了我一个编译错误：

> 错误：“。”之前的预期主表达式 令牌

所以要清楚，说之间有什么区别：

```
if (day == Days.Saturday) // Causes compilation error 
```

和

```
if (day == Saturday) 
```

?

这两个实际上指的是什么，一个是可以的，一个会导致编译错误？

* * *

## 回答 #1

> 赞同：380
> 
> 时间：2012-08-29T17:26:52.940

这段代码是错误的：

```
enum Days {Saturday, Sunday, Tuesday, Wednesday, Thursday, Friday};
Days day = Days.Saturday;
if (day == Days.Saturday) 
```

因为`Days`不是范围，也不是对象。它是一种类型。并且类型本身没有成员。你写的相当于`std::string.clear`. `std::string`是一种类型，所以你不能`.`在它上面使用。您`.`在类的*实例*上使用。

不幸的是，枚举是神奇的，所以类比到此为止。因为有了一个类，你可以做得到`std::string::clear`一个指向成员函数的指针，但是在C++03中，`Days::Sunday`是无效的。（这是可悲的）。这是因为 C++（在某种程度上）与 C 向后兼容，并且 C 没有命名空间，因此枚举必须在全局命名空间中。所以语法很简单：

```
enum Days {Saturday, Sunday, Tuesday, Wednesday, Thursday, Friday};
Days day = Saturday;
if (day == Saturday) 
```

幸运的是，[Mike Seymour](https://stackoverflow.com/users/204847/mike-seymour)发现这已在 C++11 中得到解决。更改`enum`为`enum class`并获得自己的范围；so`Days::Sunday`不仅有效，而且*是*访问`Sunday`. 快乐的时光！

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-08-29T17:04:03.990

这足以声明您的枚举变量并进行比较：

```
enum Days {Saturday, Sunday, Tuesday, Wednesday, Thursday, Friday};
Days day = Saturday;
if (day == Saturday) {
    std::cout << "Ok its Saturday";
} 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2012-08-29T17:07:11.807

其中大部分应该会给你编译错误。

```
// note the lower case enum keyword
enum Days { Saturday, Sunday, Monday, Tuesday, Wednesday, Thursday, Friday }; 
```

现在，`Saturday`,`Sunday`等可以用作顶级裸常量，并且`Days`可以用作类型：

```
Days day = Saturday;   // Days.Saturday is an error 
```

同样稍后，要测试：

```
if (day == Saturday)
    // ... 
```

这些`enum`值就像裸常量——它们*没有*作用域——在编译器的一些额外帮助下：（除非你使用 C++11*枚举类*）它们不像对象或结构成员那样*被*封装，并且您不能将它们*称为*.`Days`

您将拥有您正在寻找的[C++11](http://en.wikipedia.org/wiki/C%2B%2B11#Strongly_typed_enumerations)，它引入了一个`enum class`：

```
enum class Days
{
    SUNDAY,
    MONDAY,
    // ... etc.
}

// ...

if (day == Days::SUNDAY)
    // ... 
```

请注意，此 C++ 在几个方面与 C 略有不同，一个是 C`enum`在声明变量时需要使用关键字：

```
// day declaration in C:
enum Days day = Saturday; 
```

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2014-09-11T11:39:06.043

您可以根据需要使用技巧来使用范围，只需以这种方式声明枚举：

```
struct Days 
{
   enum type
   {
      Saturday,Sunday,Tuesday,Wednesday,Thursday,Friday
   };
};

Days::type day = Days::Saturday;
if (day == Days::Saturday) 
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2012-08-29T17:10:53.790

枚举不是使用一堆 if 语句，而是很适合切换语句

我在为我的游戏构建的关卡构建器中使用了一些枚举/开关组合。

编辑：另一件事，我看到你想要类似于的语法；

```
if(day == Days.Saturday)
etc 
```

您可以在 C++ 中执行此操作：

```
if(day == Days::Saturday)
etc 
```

这是一个非常简单的例子：

EnumAppState.h

```
#ifndef ENUMAPPSTATE_H
#define ENUMAPPSTATE_H
enum eAppState
{
    STARTUP,
    EDIT,
    ZONECREATION,
    SHUTDOWN,
    NOCHANGE
};
#endif 
```

一些文件.cpp

```
#include "EnumAppState.h"
eAppState state = eAppState::STARTUP;
switch(state)
{
case STARTUP:
    //Do stuff
    break;
case EDIT:
    //Do stuff
    break;
case ZONECREATION:
    //Do stuff
    break;
case SHUTDOWN:
    //Do stuff
    break;
case NOCHANGE:
    //Do stuff
    break;
} 
```

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2016-08-13T14:00:20.680

您正在寻找***强类型枚举***[，这是C++11](https://en.wikipedia.org/wiki/C%2B%2B11)标准中提供的一项功能。它将枚举转换为具有范围值的类。

使用您自己的代码示例，它是：

```
 enum class Days {Saturday, Sunday, Tuesday,Wednesday, Thursday, Friday};
  Days day = Days::Saturday;

  if (day == Days::Saturday)  {
    cout << " Today is Saturday !" << endl;
  }
  //int day2 = Days::Sunday; // Error! invalid 
```

如果以`::`C++11 之前的 C++ 标准为目标，则用作枚举的访问器将失败。但是一些旧的编译器不支持它，还有一些 IDE 只是覆盖了这个选项，并设置了一个旧的 C++ 标准。

如果您使用的是 GCC，请使用**-std=c++11**或**-std=gnu11**启用 C+11 。

要开心！

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2017-05-04T18:57:38.340

如果您仍在使用 C++03 并想使用枚举，则应该在命名空间内使用枚举。例如：

```
namespace Daysofweek{
enum Days {Saturday, Sunday, Tuesday,Wednesday, Thursday, Friday};
} 
```

您可以在命名空间之外使用枚举，例如，

```
Daysofweek::Days day = Daysofweek::Saturday;

if (day == Daysofweek::Saturday)
{
    std::cout<<"Ok its Saturday";
} 
```

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2012-08-29T17:18:14.773

这在 C++ 中不应该工作：

```
Days.Saturday 
```

Days 不是包含可以使用点运算符访问的成员的范围或对象。这种语法只是 C# 主义，在 C++ 中是不合法的。

Microsoft 长期以来一直维护一个 C++ 扩展，允许您使用范围运算符访问标识符：

```
enum E { A, B, C };

A;
E::B; // works with Microsoft's extension 
```

但这在 C++11 之前是非标准的。在 C++03 中，枚举中声明的标识符仅存在于与枚举类型本身相同的范围内。

```
A;
E::B; // error in C++03 
```

C++11 使得用枚举名称限定枚举标识符是合法的，并且还引入了枚举类，它为标识符创建一个新的范围，而不是将它们放在周围的范围中。

```
A;
E::B; // legal in C++11

enum class F { A, B, C };

A; // error
F::B; 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2012-08-29T17:10:04.103

可悲的是，枚举的元素是“全球性的”。您可以通过执行来访问它们`day = Saturday`。这意味着你不能拥有`enum A { a, b } ;`，`enum B { b, a } ;`因为它们是冲突的。

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2016-04-11T01:43:56.247

虽然 C++（不包括 C++11）有枚举，但它们中的值被“泄露”到全局命名空间中。
如果您不想让它们泄露（并且不需要使用枚举类型），请考虑以下事项：

```
class EnumName {  
   public:   
      static int EnumVal1;  
      (more definitions)  
};  
EnumName::EnumVal1 = {value};  
if ([your value] == EnumName::EnumVal1)  ... 
```

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2012-08-29T17:09:05.083

当你声明你的枚举值时，C++ 中的枚举就像被你给它们的名字所掩盖的整数（这不是一个定义，只是一个提示它是如何工作的）。

但是您的代码中有两个错误：

1.  拼写`enum`全部小写
2.  你不需要`Days.`星期六之前的。
3.  如果此枚举在类中声明，则使用 `if (day == YourClass::Saturday){}`

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2015-06-06T19:30:37.823

我认为您的根本问题是使用 of`.`而不是`::`，它将使用命名空间。

尝试：

```
enum Days {Saturday, Sunday, Tuesday, Wednesday, Thursday, Friday};
Days day = Days::Saturday;
if(Days::Saturday == day)  // I like literals before variables :)
{
    std::cout<<"Ok its Saturday";
} 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2020-04-18T09:41:37.743

如果我们想要严格的类型安全和范围枚举，那么`enum class`在 C++11 中使用是很好的。

如果我们必须在 C++98 中工作，我们可以使用 , 给出的建议`InitializeSahib`来`San`启用作用域枚举。

如果我们还想要严格的类型安全，下面的代码可以实现类似`enum`.

```
#include <iostream>
class Color
{
public:
    static Color RED()
    {
        return Color(0);
    }
    static Color BLUE()
    {
        return Color(1);
    }
    bool operator==(const Color &rhs) const
    {
        return this->value == rhs.value;
    }
    bool operator!=(const Color &rhs) const
    {
        return !(*this == rhs);
    }

private:
    explicit Color(int value_) : value(value_) {}
    int value;
};

int main()
{
    Color color = Color::RED();
    if (color == Color::RED())
    {
        std::cout << "red" << std::endl;
    }
    return 0;
} 
```

代码修改自《Effective C++ 3rd: Item 18》一书中的 Month 类示例

* * *

## 回答 #14

> 赞同：-15
> 
> 时间：2012-08-29T17:11:22.850

首先，使枚举中的'E'，'e'小写。

其次，在“Days.Saturday”中删除类型名称“Days”。

第三……给自己买一本好的 C++ 书。

# php - 如何修复此类错误：“未捕获的 ReferenceError：check_email 未定义 onblur”

> ID：12183009
> 
> 赞同：1
> 
> 时间：2012-08-29T17:02:31.533
> 
> 标签：php, jquery, ajax

```
<!DOCTYPE HTML>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Amateur</title>
    <link rel="stylesheet" href="css/reset.css" type="text/css">
    <script src="http://code.jquery.com/jquery-1.8.0.js">
        function check_email()
        {
            var email=$("#txtEmail").val();
            $.ajax(
            {
                type:"POST";
                url:"index.php";
                data:"email="+email,
                success:function(msg)
                {
                    $("#chkEmail").html(msg);
                }
            });

            return false;
        }
    </script>
</head>

<body>
<form method="post">
    <label for="txtEmail">E-mail:</label>
        <input id="txtEmail" name="email" type="email" onblur="return check_email()">
    <label id="chkEmail" for="txtEmail"></label>
    <?php

    if(isset($_POST['email']))
    {
        $user='root';

        $pdo=new PDO('mysql:host=localhost;dbname=class;charset=utf8',$user);

        $email=$_POST['email'];

        $stmt=$pdo->prepare('SELECT email from tbl_users WHERE email=:email LIMIT 1');
        $stmt->execute(array(':email'=>$email));

        if($stmt->rowCount()>0)
        {
            echo 'E-mail already use.';
        }
        else
        {
            echo 'E-mail not use.';
        }

    }

    ?>
</form>
</body>
</html> 
```

我仍然是 PHP 和 JQuery 的初学者 我想知道如何解决这种类型的错误？我从萤火虫检查它。流程是，在用户输入完电子邮件后，它将自动从数据库中检查它是否存在。并且预期的输出不会显示在我的页面中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T17:08:11.230

您缺少选择器上的引号，用分号而不是逗号等分隔 ajax 函数中的参数。

```
 function check_email() {
        var email=$("#txtEmail").val();
            $.ajax({
                type:"POST",
                url:"index.php",
                data: {email: email},
                success:function(msg) {
                    $("#chkEmail").html(msg);
                }
            });
            return false;
       } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T17:35:16.400

添加另一个`<script>`标签，添加js源文件和相同标签中的代码不是正确的方法。

```
<script src="http://code.jquery.com/jquery-1.8.0.js"></script>
<script>
        function check_email()
        {
            var email=$("#txtEmail").val();
            $.ajax(
            {
                type:"POST";
                url:"index.php";
                data:"email="+email,
                success:function(msg)
                {
                    $("#chkEmail").html(msg);
                }
            });

            return false;
        }
    </script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T03:39:13.863

将您的 jquery 源代码放在单独的脚本上。确保为脚本放置一个结束标记（不是自结束标记）。

使用逗号作为参数，而不是分号。

尝试这个：

```
<script src="http://code.jquery.com/jquery-1.8.0.js"></script>
<script type="text/javascript">
    function check_email()
    {
        var email=$("#txtEmail").val();
        $.ajax(
        {
            type:"POST",
            url:"index.php",
            data:"email="+email,
            success:function(msg)
            {
                $("#chkEmail").html(msg);
            }
        });

        return false;
    }
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T17:08:25.237

```
<script src="http://code.jquery.com/jquery-1.8.0.js">
    function check_email()
    {
        var email=$("#txtEmail").val();
        $.ajax(
        {
            type:"post",
            url:"index.php",
            data:"email="+email,
            success:function(msg)
            {
                $("#chkEmail").html(msg);
            }
        });

        return false;
    }
</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-29T17:08:31.150

编辑

```
$.ajax(
        {
            type:"post";
            url:"index.php";
            data:"email="+email,
    success:function(msg)
                    {
                        $(#chkEmail).html(msg);
                    }
             **TO**
$.ajax(
        {
            type:"POST",
            url:"index.php",
            data:{email:email},
success:function(msg)
                {
                    $('#chkEmail').html(msg);
                } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-29T17:56:52.273

```
 <script src="http://code.jquery.com/jquery-1.8.0.js"></script>
    <script>
      var checkEmail= function()
        {
            var email=$("#txtEmail").val();
            $.ajax(
            {
                type:"POST",
                url:"index.php",
                data:"email="+email,
                success:function(msg)
                {
                    $("#chkEmail").html(msg);
                }
            });

            return false;
        }
    </script>
</head>

<body>
<form method="post">
    <label for="txtEmail">E-mail:</label>
        <input id="txtEmail" type="email" onblur="javascript:checkEmail();">
    <label id="chkEmail" for="txtEmail"></label>

</form>
</body> 
```

添加到`onblur="javascript:checkEmail();`，我做了一个有点不同的函数，将它声明为 var。

# javascript - Javascript 重新定义和覆盖现有的函数体

> ID：12183011
> 
> 赞同：27
> 
> 时间：2012-08-29T17:02:36.103
> 
> 标签：javascript, prototype

我想知道一旦构造了函数体，我们还能改变它吗？

```
 var O = function(someValue){
           this.hello = function(){
                return "hello, " + someValue;
           }
     }

     O.prototype.hello = function(){
           return "hhhhhhh";
     }

     var i = new O("chris");
     i.hello();   // -> this still returns the old definition "hello, chris" 
```

javascript 语句`O.prototype.hello = function(){....}`不会覆盖和重新定义 hello 函数行为。这是为什么 ？我知道如果您尝试重用参数，它将出现类型错误`someValue`。

```
 // this will fail since it can't find the parameter 'someValue'
      O.prototype.hello = function(){
             return "aloha, " + someValue;
      } 
```

我想知道为什么它允许在运行时添加功能，例如

```
 O.prototype.newFunction = function(){
           return "this is a new function";
      }

      i.newFunction();   //  print 'this is a new function' with no problem. 
```

但不允许您在定义后更改定义。我做错什么了吗 ？我们如何覆盖和重新定义类中的函数？有没有办法重用我们之前传入的参数来创建对象？`someValue`在这种情况下，如果我们想向它扩展更多功能，我们如何重用。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-29T17:11:49.237

当您使用`new`时，构造函数内部的值`this`指向新创建的对象（有关如何`new`工作的更多信息，请查看[此答案](https://stackoverflow.com/questions/6750880/javascript-how-does-new-work-internally)和[此答案](https://stackoverflow.com/questions/1646698/what-is-the-new-keyword-in-javascript)）。所以你的新实例`i`，有一个`hello`功能。当你试图访问一个对象的属性时，它会沿着原型链向上走，直到找到它。由于`hello`存在于对象的实例上，因此无需遍历原型链即可访问`hello`返回的版本`hhhhhhhh`。从某种意义上说，您已经覆盖了实例中的默认实现。

如果你没有在你的构造函数中赋值`hello`，你可以看到这个行为：`this`

```
var O = function(someValue) {

 }

 O.prototype.hello = function(){
       return "hhhhhhh";
 }

 var i = new O("chris");
 console.log(i.hello()); //this prints out hhhhhhh 
```

你所做的有点倒退。原型基本上提供了某些东西的“默认”形式，您可以在每个实例的基础上覆盖它。仅当在对象上找不到您要查找的属性时才使用默认表单。也就是说，JavaScript 将开始遍历原型链，看看它是否可以找到与您要查找的内容相匹配的属性。它找到它，它将使用它。否则，它将返回`undefined`。

在第一种情况下，您基本上拥有的内容如下：

```
Object.prototype.hello (not defined; returns "undefined")
|
+----O.prototype.hello (returns "hhhhhhhh")
     |
     +----i.hello (returns "hello, chris") 
```

因此，当您这样做时`i.hello`，JavaScript 会看到有一个`hello`属性`i`并使用它。现在，如果您没有明确定义`hello`属性，则基本上具有以下内容：

```
Object.prototype.hello (not defined; returns "undefined")
|
+----O.prototype.hello (returns "hhhhhhhh")
     |
     +----i.hello (is "undefined", so JavaScript will walk up the chain until 
                   it sees O.prototype.hello, which does have a defined value 
                   it can use.) 
```

这意味着您可以在原型中提供默认实现，然后覆盖它（在某种意义上它就像子类化）。您还可以通过直接修改实例来修改每个实例的行为。您在原型上拥有的版本`hello`是一种故障安全和后备。

**编辑：**回答您的问题：

在每个实例的基础上覆盖意味着您将属性或函数附加到特定实例。例如，您可以这样做：

```
i.goodbye = function() {
    return "Goodbye, cruel world!";
}; 
```

这意味着此行为特定于该*特定*实例（即，仅适用于`i`您可能创建的任何其他实例，而不适用于您可能创建的任何其他实例）。

如果你拿出`this`，那么你基本上有：

```
hello = function() {
    return "hello, " + someValue;
} 
```

这相当于做：

```
window.hello = function() {
    return "hello, " + someValue;
} 
```

所以在这种情况下，`hello`是对该函数的全局引用。这意味着它`hello`不附加到您的任何对象上。

`hello``this.hello = function() { .... };`如果您的构造函数内部没有，则可以未定义。我还谈到了 JavaScript 用来尝试解析对象属性的一般过程。正如我之前提到的，它涉及到原型链的上游。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T17:13:08.700

当您使用创建`O`对象的实例时，`new O("somename");`您将*实例*方法分配给新创建的对象。然后，当您将另一个同名的方法分配给`O`'s`prototype`时，该方法*已经被*实例方法隐藏了。所以：

```
Object.prototype.hello // undefined
       |
       O.prototype.hello // alternate function
         |
         i.hello // original function provided in constructor 
```

JavaScript 从链的*底部开始，并***在找到 name 的匹配项时停止**。所以它停在`i.hello`并且永远不会看到`O.prototype.hello`。

JavaScript（从 ECMAScript 5 开始）确实没有（据我所知）为您提供一种很好的方法来执行类似的私有变量，这些私有变量可以通过在定义后添加的实例方法（添加*在*实例上或在 上`prototype`）来访问. 闭包可以帮助您完成大部分工作，但是如果您希望能够在闭包之外添加可以访问闭包变量的方法，则需要公开`get`和/或`set`使这些新方法可以访问闭包变量的方法：

```
// Possibility #1 - marked as private member
var O = function(someValue) {
    this._someValue = someValue;
};
O.prototype.hello = function() { return "hhhh"; };

var i = new O("somename");
i.hello = function() { return "aloha," + this._someValue; };
console.log(O.hello());  // hhhh
console.log(i.hello());  // aloha, somename

// Possibility #2 - factory function + closure with get and set methods
var OMaker = function(someValue) {
    var realO = function() {};
    realO.prototype.getSomeValue = function() { return someValue; };
    realO.prototype.setSomeValue = function(newVal) { someValue = newVal; };
    realO.prototype.hello = function() { return "hhhh"; };
    return realO;
};
var O = OMaker("somename"),
            i = new O();
i.hello = function() { return "aloha," + this.getSomeValue(); };
console.log(O.hello());  // hhhh
console.log(i.hello());  // aloha, somename

// Possibility #3 - eschew prototype inheritance and create new objects
var O = function(someValue) {
    return {
        getValue: function() { return someValue; },
        setValue: function(newValue) { someValue = newValue; },
        hello: function() { return "hhhh"; }
    };
};
var i = O(); // Note the lack of the "new" keyword
i.hello = function() { return "aloha," + this.getSomeValue(); };
console.log(O.hello());  // hhhh
console.log(i.hello());  // aloha, somename 
```

您真的很想阅读[bobince 关于 JavaScript 中 OOP 的精彩回答，](https://stackoverflow.com/questions/1595611/how-to-properly-create-a-custom-object-in-javascript/1598077#1598077)以获取有关该主题的更多信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T17:14:39.930

不，你不能，但这里有一个很好的例子，可以通过以不同的方式对继承进行模式化，从而绕过该限制。

[JavaScript 覆盖方法](https://stackoverflow.com/questions/6885404/javascript-override-methods)

```
// Create a class
function Vehicle(color){
  this.color = color;
}

// Add an instance method
Vehicle.prototype.go = function(){
  return "Underway in " + this.color;
}

// Add a second class
function Car(color){
  this.color = color;
}

// And declare it is a subclass of the first
Car.prototype = new Vehicle();

// Override the instance method
Car.prototype.go = function(){
  return Vehicle.prototype.go.call(this) + " car"
}

// Create some instances and see the overridden behavior.
var v = new Vehicle("blue");
v.go() // "Underway in blue"

var c = new Car("red");
c.go() // "Underway in red car" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-29T17:22:22.003

**首先，您需要了解原型继承。**

当您使用构造函数创建对象`O`时，会发生这种情况：

*   第一，创建一个新对象。
*   第二，该对象的 hello 属性设置为一个函数（通过您定义的构造函数）。
*   第三，创建来自对象的指向对象的秘密链接`O.prototype`。

引用`O`对象的属性时，首先在对象本身中查找这些属性。只有当对象本身没有属性时，它才会查找它的原型。

**其次，你需要了解闭包。**

`someValue`是`O`函数中定义的变量（不是属性）。它只能从同样定义在同一函数中的其他事物（或函数内部定义的任何`O`函数）访问。所以，我们说“`someValue`被*关闭了*”。您在`O`.

* * *

为了实现你想要的，你要么需要将 someValue 设置为一个属性（这使它不像一个`private`东西，而更像一个`public`东西）。或者，您需要在`someValue`的`O`原始定义中定义所有需要访问的函数。

要更改创建`i.hello`后指向的内容`i`，您需要直接设置对象的属性。

```
i.hello = function () { /* stuff */ }; 
```

* * *

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-29T17:13:19.017

如果我没记错的话，作为对象直接成员的函数优先于该对象原型的同名成员。因此，`O.prototype.hello`被 篡夺`O.hello`，即使前者在代码后面定义。

`someValue`您无法使用的原因`O.prototype.hello`是因为范围`someValue`受限于构造函数以及在其中定义或执行的任何函数。由于`O.prototype.hello`是在构造函数范围之外定义的`O`，因此它不知道`someValue`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-29T17:17:17.953

这是因为当您访问对象的属性时，JavaScript 首先检查对象的属性，然后再进入其原型。

这类似于 Java 的派生类覆盖基类功能。

为了更好地理解，请查看[继承属性中的代码示例](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Inheritance_and_the_prototype_chain#Inheritance_with_the_prototype_chain)

另请注意，您的情况下的 someValue 是构造函数的本地函数。如果你在其他函数中需要它，你应该在构造函数中将它分配给 this.someValue 。

您将能够在此处覆盖特定对象的 hello 函数，如下所示。但不适用于整个班级。

`i.hello = function(){ console.log('even here someValue is not accessible');};`

```
 var O = function(someValue){
       this.someValue = someValue;
       this.hello = function(){
            return "hello, " + someValue;
       }
 }

 var i = new O("chris");
 console.log(i.hello()); // prints hello, chris
 i.hello = function() { 
   return 'Hi there '+ this.someValue;
 }
 console.log(i.hello()); // prints Hi there chris

 var test = new O('Sujay')
 console.log(test.hello()) // this still prints hello, Sujay 
```

请注意，这里我们没有更改构造函数，因此这不适`test`用于上面示例中的其他实例。

最好的方法是只在原型中而不是在构造函数中定义函数，如下面的代码片段。

```
 var O = function(someValue){
      this.someValue = someValue;
 };
 O.prototype.hello = function(){
            return "hello, " + this.someValue;
 };

 var i = new O("chris");
 console.log(i.hello()); // prints hello, chris
 O.prototype.hello = function() { 
   return 'Hi there '+ this.someValue;
 }
 console.log(i.hello()); // prints Hi there chris

 var test = new O('Sujay')
 console.log(test.hello()) // prints Hi there Sujay 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-29T17:24:21.040

当您访问一个属性时，系统首先在实例中查找它。如果没有找到，它会在原型中寻找它。这就是使用 this.hello 而不是 O.prototype.hello 的原因。

如果您希望覆盖 hello 的实现，则需要使用 JavaScript 继承。这是一个基本示例：

```
var A = function(){
    console.log("A is getting constructed");
};

A.prototype.constructor = A;
A.prototype.someValue = 1;
A.prototype.hello = function() {
    console.log("A.hello(): " + this.someValue);
};

var B = function(){
    //Constructor of A is automatically called before B's

    console.log("B is getting constructed");
};
B.prototype = new A; //Inherit from A
B.prototype.constructor = B;
B.prototype.hello = function() {
    console.log("B.hello() called");
    console.log("Calling base class method");
    A.prototype.hello.call(this);
};

var a = new A();
a.hello();

var b = new B();
b.hello(); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-03-30T07:38:49.507

为创建的实例覆盖方法**refreshEditor ：**

```
var cp = hot1.getPlugin('comments');
cp.refreshEditor = (function (original) {
  return function (force) {
    //do something additional
    if(console) {
      console.log('test!!!!!!!!!');
      console.log(force)
    }
    original.call(cp, force);
  }
})(cp.refreshEditor); 
```

# c++ - 班级成员的额外资格

> ID：12183018
> 
> 赞同：1
> 
> 时间：2012-08-29T17:02:53.160
> 
> 标签：c++

> **可能重复：**
> [为什么编译器支持冗余范围限定，它是否合法？](https://stackoverflow.com/questions/12135498/why-are-redundant-scope-qualifications-supported-by-the-compiler-and-is-it-lega)

我真的可以写代码吗

```
class Foo
{
public:
    Foo();
};

Foo::Foo::Foo::Foo::Foo::Foo() {} 
```

gcc 编译它。添加此功能的原因是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T17:07:49.217

特点是类型的名称被注入到类作用域内，即在类内隐含`typedef Foo Foo;`了 sorts `Foo`。

该功能在语言中，因为在几个构造中需要嵌套类型。例如，当通过显式命名要选择覆盖器的层次结构级别来禁用动态调度时 ( `obj.Base::f()`)。

原始列表有大约 10 个奇怪的结构，必须为其提供名称，并且通过使嵌套名称在*所有*上下文中可用来简化它，这反过来意味着它允许您编写有趣的语法。

# python - 在程序终止之前，python守护程序线程打印不会显示在守护程序工具日志中

> ID：12183019
> 
> 赞同：1
> 
> 时间：2012-08-29T17:02:55.570
> 
> 标签：python, daemon

我有一个运行良好的 python 程序。在我移动它以使用 djb 守护程序工具启动它后，守护程序线程中的打印输出消息直到我停止程序才会显示。我正在使用 python 2.6，并且 python 程序在 Centos 上运行。有人经历过吗？如何解决这个问题？

# html - 无法重叠 DIV

> ID：12183023
> 
> 赞同：0
> 
> 时间：2012-08-29T17:03:29.523
> 
> 标签：html, css

我在让我的轮播中的图像重叠在另一个 div 上时遇到了一个小问题。[点击这里](http://iamnatesmithen.com/bodyworks/index.php)

如果您单击红色选项卡，我正在尝试将瓶子的图像放在白框（#section1）的顶部。我注意到，当我`position:relative`从`.rslides`轮播图像中删除时，我想要它做的事情，但是我放置的背景图像在`#rslides1`前面......

我已经调整了 z-index 属性，但是我仍然无法实现它。有没有人有解决这个问题的办法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T17:27:41.000

当我将我的 css 属性更改为以下内容时，它起作用了：

```
#header{
    max-width: 1018px;
    min-width: 320px;
    width: 100%;
    margin: 0 auto;
    z-index: 10;
    position: relative;
} 

.rslides {
    list-style: none;
    overflow: hidden;
    width: 100%;
    padding: 0;
    margin-top: -275px;
    float: left;
    z-index: -1;
 }

.rslides_tabs { 
    margin: 93px auto 0; 
    position: relative; 
    width: 100%; 
    max-width: 1011px; 
    z-index: 10;
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T17:16:23.610

要解决这个问题：

1.  `position: relative`从中删除`.rslides`。
2.  添加`position: relative; z-index: 10;`到`.rslides_tabs`和`#header`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T17:15:41.823

使用这个 css 来解决这个问题：

```
.rslides {
    position: relative;
    list-style: none;
    overflow: hidden;
    width: 100%;
    padding: 0;
    margin-top: -275px;
    float: left;
    z-index: 999;
} 
```

**使用 z-index 值作为 z-index:999**

# java - Jtable 中的样式单元格

> ID：12183031
> 
> 赞同：1
> 
> 时间：2012-08-29T17:03:53.533
> 
> 标签：java, swing, jtable, render

我在 jTable 中格式化列，但样式值列`STT`的变化不像列中的值`Loại Nhân Viên`，列的`STT`变化​​比默认值。

![在此处输入图像描述](../Images/335692b56f081c0f5054a592897a3d71.png)

格式化列的代码`STT`

```
DefaultTableCellRenderer cellRenderer = new DefaultTableCellHeaderRenderer();
cellRenderer.setHorizontalAlignment(JLabel.CENTER);
table.getColumnModel().getColumn(column).setWidth(50);
table.getColumnModel().getColumn(0).setMaxWidth(50);
table.getColumnModel().getColumn(0).setMinWidth(50);
table.getColumnModel().getColumn(0).setPreferredWidth(50);
table.getColumnModel().getColumn(0).setCellRenderer(cellRenderer); 
```

如何解决？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T17:23:00.713

尝试使用 a`DefaultTableCellRenderer`而不是 a `DefaultTableCellHeaderRenderer`（无论如何它不在公共 API 中，并且可能不应该使用）。

```
DefaultTableCellRenderer cellRenderer = new DefaultTableCellRenderer();
cellRenderer.setHorizontalAlignment(JLabel.CENTER);
table.getColumnModel().getColumn(column).setWidth(50);
table.getColumnModel().getColumn(0).setMaxWidth(50);
table.getColumnModel().getColumn(0).setMinWidth(50);
table.getColumnModel().getColumn(0).setPreferredWidth(50);
table.getColumnModel().getColumn(0).setCellRenderer(cellRenderer); 
```

# c# - c# recursion - “集合已修改；枚举操作可能无法执行”

> ID：12183035
> 
> 赞同：2
> 
> 时间：2012-08-29T17:04:15.313
> 
> 标签：c#, recursion, ienumerable

我正在尝试使用递归来提升层次结构，但出现此错误：

```
Collection was modified; enumeration operation may not execute. 
```

我在这里的假设是，当它每次进入函数时，它使用的是相同的 parentRolesCopy 而不是不同的，所以当它第二次进入时，它会将 parentRolesCopy 更改为原始函数调用中的不同。

我怎样才能解决这个问题？

```
private IEnumerable<string> GetAllParentRoles(string role)
    {
        // GET EACH PARENT ROLE
        var parentroles = //code that gets any parents of the role passed in

        //RECURSIVELY CALL THIS FUNCTION TO KEEP GETTING PARENTS OF PARENT ROLES UNTIL NONE LEFT
        var parentRolesCopy = parentroles;
        foreach (var parentrole in parentRolesCopy)
        {
            parentroles.AddRange(GetAllParentRoles(parentrole));
        }

        return parentroles;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T17:07:40.020

您可以使副本实际上是副本，而不仅仅是指向相同的引用。一种方法是：

```
var parentRolesCopy = parentroles.ToArray(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T17:07:17.100

您可以使用`List`或其他一些集合

```
var parentRolesCopy = new List<string>(parentroles); 
```

# python - 使用 Python、SOAP 和 .pfx 证书连接到安全的 Web 服务？

> ID：12183039
> 
> 赞同：3
> 
> 时间：2012-08-29T17:04:36.200
> 
> 标签：python, web-services, soap, ssl, pfx

我需要使用 .pfx 证书连接到安全的网络服务 (https://www.nfe.fazenda.gov.br/NFeConsultaDest/NFeConsultaDest.asmx)。我已经尝试了我能找到的每一个示例和 python 库（suds、soappy 等），并且也看到了一些 stackoverflow 答案，但没有成功......

我需要转换证书吗？如果是这样，怎么做？我应该使用哪个库？

有人可以发布一些代码吗？

谢谢！

# android - 中文文件编码

> ID：12183043
> 
> 赞同：1
> 
> 时间：2012-08-29T17:04:55.360
> 
> 标签：android, localization, file-encodings

我将我的 android 应用程序本地化为英语、捷克语和其他几种欧洲语言。我想添加中文、日文、韩文和俄文本地化。**在文件编码**等方面有什么特殊的方法吗？

# wpf - 使用 WPF Prism 在 tabItem 内滚动查看器

> ID：12183049
> 
> 赞同：1
> 
> 时间：2012-08-29T17:05:11.757
> 
> 标签：wpf, prism, tabitem

我正在使用 wpf Prism Controller 在 wpf 中将多个选项卡添加到我的视图中。但有时当我的视图很大时，我希望在我的标签项中有一个可以水平滚动的滚动查看器。我怎样才能实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-06-13T09:29:59.547

尝试将此添加到您的 xaml.xml 中。但请确保您的行定义设置为自动

```
 <ScrollViewer HorizontalScrollBarVisibility="Auto">
    <TabControl>

        </TabControl>
    </ScrollViewer> 
```

# twitter-bootstrap - 如何在不使用所有 Twitter Bootstrap 的情况下使用 Twitter Boostrap 模式？

> ID：12183051
> 
> 赞同：1
> 
> 时间：2012-08-29T17:05:29.787
> 
> 标签：twitter-bootstrap, less

我想使用[Twitter Bootstrap](http://twitter.github.com/bootstrap/javascript.html#modals)中的模式，但我现在无法切换到使用所有 Twitter Bootstrap。我假设我需要直接使用 LESS 文件。有人可以提供一个如何单独使用 Twitter Bootstrap 模式的示例吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T19:30:03.087

您是否尝试过使用自定义页面来指定您想要的位？

[http://twitter.github.com/bootstrap/customize.html](http://twitter.github.com/bootstrap/customize.html)

1.  选择组件：切换所有组件，然后仅选中 JS 组件中的 Modals。
2.  选择 jQuery 插件：切换所有 jQuery 插件，然后仅选中 Modals。
3.  自定义变量：如果需要，修改任何默认值（记下您在此处自定义的内容）。
4.  下载。

您应该只得到模态框和 jQuery 插件所需的样式。

然后，您可以按照文档来启动并运行您的模态。

# .net - VB .net 2005 的等效代码

> ID：12183052
> 
> 赞同：0
> 
> 时间：2012-08-29T17:05:41.580
> 
> 标签：.net, vb.net, equivalent

我在 VB .net 2008 中有以下代码示例

```
Public Function CheckPathFunction(ByVal path As String) As Boolean
    Return System.IO.File.Exists(path)
End Function

Public Function PathExists(ByVal path As String, ByVal timeout As Integer) As Boolean
    Dim exists As Boolean = True
    Dim t As New Thread(DirectCast(Function() CheckPathFunction(path), ThreadStart))

    t.Start()

    Dim completed As Boolean = t.Join(timeout)
    If Not completed Then
        exists = False
        t.Abort()
    End If

    Return exists
End Function 
```

不幸的是，我必须使用 Vb .net 2005 和 net framework 2.0；我怎样才能为 VB .net 2005 完成相同的操作？，VB .net 2005 不支持与代码行编号对应的语法。3：

```
Function() CheckPathFunction(path) 
```

请注意，要调用的函数需要一个参数并返回一个值

* * *

我已尝试使用如下所示的委托，但不起作用

```
Private Delegate Function CheckPath(ByVal path As String) As Boolean

Public Function CheckPathFunction(ByVal path As String) As Boolean
    Return IO.File.Exists(path)
End Function

Public Function PathExists(ByVal path As String, ByVal timeout As Integer) As Boolean
    Dim checkPathDelegate As New CheckPath(AddressOf CheckPathFunction)

    Dim exists As Boolean = True
    Dim t As New Thread(checkPathDelegate(path))

    t.Start()

    Dim completed As Boolean = t.Join(timeout)
    If Not completed Then
        exists = False
        t.Abort()
    End If

    Return exists
End Function 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T17:23:44.873

请参阅有关使用 ParameterizedThreadStart Delegate 调用线程构造函数的[MSDN 文章](http://msdn.microsoft.com/en-US/library/1h2f2459%28v=vs.80%29)。既然你在 VB 中，你应该能够做到这一点：

```
Dim t As New Thread(AddressOf CheckPathFunction)

t.Start(path) 
```

好吧，这就是启动线程的答案。但我同意 SteveDog，它实际上并没有返回文件是否存在，只有当线程完成或超时时。

编辑返回值：获取该值的一种方法是传入一个对象，而不仅仅是路径。然后使用对象传回结果。

所以声明一个类，比如：

```
Class DataHolder
    Public Path As String
    Public Found As Boolean
End Class 
```

将 CheckPathFunction 更改为：

```
Public Sub CheckPathFunction(ByVal rawData As Object)
    Dim data As DataHolder = DirectCast(rawData, DataHolder)
    data.Found = System.IO.File.Exists(data.Path)
End Sub 
```

并将 PathExists 更改为：

```
Public Function PathExists(ByVal path As String, ByVal timeout As Integer) As Boolean
    Dim exists As Boolean
    Dim t As New Thread(AddressOf CheckPathFunction) '  (DirectCast(Function() CheckPathFunction(path), ThreadStart))
    Dim data As DataHolder = New DataHolder
    data.Path = path
    t.Start(data)

    Dim completed As Boolean = t.Join(timeout)
    If Not completed Then
        exists = False
        t.Abort()
    Else
        exists = data.Found
    End If

    Return exists
End Function 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T20:46:43.370

以@eol的代码为基础结构，最终的工作代码是：

```
 Class KeyValuePair
      Public Path As String
      Public Found As Boolean
 End Class

 Public Sub CheckPathFunction(ByVal dataObject As Object)
      dataObject.Found = IO.Directory.Exists(dataObject.Path)
 End Sub

 Public Function PathExists(ByVal path As String, ByVal timeout As Integer) As Boolean
      Dim exists As Boolean

      Dim data As New KeyValuePair
      data.Path = path

      Dim t As New Thread(New ParameterizedThreadStart(AddressOf CheckPathFunction))
      t.Start(data)

      Dim completed As Boolean = t.Join(timeout)
      If Not completed Then
           exists = False
           t.Abort()
      Else
           exists = data.Found
      End If

      Return exists
 End Function 
```

# ssas - SSAS - 类别维度 - 未知成员

> ID：12183053
> 
> 赞同：1
> 
> 时间：2012-08-29T17:05:42.327
> 
> 标签：ssas, data-warehouse, sql-server-2012, dimensional-modeling

我在正确设置维度时遇到问题。基本上我有一个事实表，其中包含有关事件的详细信息。每个事件都可以分类，但在不同的级别。我有一个包含所有类别、子类别的类别维度。类别分为三个级别。有些类别有子类别，而有些则没有。

当我浏览维度时，我会得到每个项目的向下钻取，但向下钻取有时最终会显示空白项目（蓝色圆圈，无文本）。

所以我想我有一个类别维度，它包含不同粒度的类别。

我一直在玩弄 NULL 处理和 UnknownMember 的设置，但并没有真正完全理解它是如何影响事物的。

也许有人可以就这个问题给我一些提示或建议。

我正在使用 SQL Server 2012

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T15:28:37.270

是的，这是一个参差不齐的等级制度。最简单的解决方案是，如果一个节点为空，则将它的父键/标题复制到它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T18:06:24.653

您应该调查`Ragged Hierarchies` [http://msdn.microsoft.com/en-us/library/ms365406.aspx](http://msdn.microsoft.com/en-us/library/ms365406.aspx)。HideMemberIf 属性的层次结构中的给定级别有多个选项。

# php - 在 PHP 5.2 中获取电子邮件附件的 Mime 类型（imap_fetchmime equivilent）

> ID：12183057
> 
> 赞同：2
> 
> 时间：2012-08-29T17:05:58.823
> 
> 标签：php, email, imap, mime-types, mime

之前已经提出过这个问题，但用户没有给出他/她的完整解决方案，所以我想知道是否有其他人可以提供帮助？

我需要能够获取附件的 MIME 类型，这些附件是我的脚本从邮箱中读取的电子邮件的一部分。

我有下面的代码工作正常，问题是它需要运行的服务器（还）不能升级到 PHP 5.3.6，所以我需要一个等效的或其他解决方法。

```
 $attachments = Array();
   for ($j=0;$j<sizeof($selectBoxDisplay);$j++) 
   {        
       $attachments["emailedDocument".$j]["name"] = $selectBoxDisplay[$j];
       $attachments["emailedDocument".$j]["content"] = imap_base64(imap_fetchbody($mbox,$msgno,$j+2));

       $mime_headers = imap_fetchmime($mbox,$msgno,$j+2);
       $contenttype = "Content-Type: ";
       $contenttypepos = strpos($mime_headers, $contenttype);
       $semicolon = strpos($mime_headers, ";");
       $attachments["emailedDocument".$j]["type"] = substr($mime_headers, $contenttypepos + strlen($contenttype), $semicolon - strlen($contenttype));

       // attachment filesize is the number of bytes in the content string
       $attachments["emailedDocument".$j]["size"] = strlen($attachments["emailedDocument".$j]["content"]);
   } 
```

我花了一段时间搜索谷歌并没有真正想出任何东西，所以如果这里有人可以提供帮助，我将非常感激:)

# java - 获取 HQL 中 m 到 n 溶解表的计数

> ID：12183059
> 
> 赞同：0
> 
> 时间：2012-08-29T17:06:19.130
> 
> 标签：java, mysql, count, many-to-many, hql

我有两个处于 am:n 关系的表。我想通过 SQL (HQL) 语句计算组中的所有用户（以获取用户最多的组）

```
public class User{
private String name;

@ManyToMany
private Set<Usergroup> groups;
}

public class Usergroup{
private String name;

@ManyToMany
private Set<User> users;
} 
```

我写了一个HQL，但我总是得到一个异常：你的SQL语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在 ') 附近使用的正确语法

这是我的 HQL：

```
@NamedQuery(name = "Group.countUsers", query = "SELECT g, count(g.users) FROM Group g JOIN FETCH g.users u") 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T13:17:18.060

我找到了解决方案......它是

```
@NamedQuery(name = "Group.countUsers", query = "SELECT g, count(u) FROM Group g JOIN FETCH g.users u GROUP BY g") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T08:43:32.900

试试看

```
SELECT g, count(g.users) FROM Group g JOIN FETCH g.users as u 
```

# sql - 如何确保计数表的连续性？

> ID：12183062
> 
> 赞同：4
> 
> 时间：2012-08-29T17:06:27.003
> 
> 标签：sql, sql-server, integrity

在[SQL For Smarties](http://books.google.co.uk/books?id=8y823V4-5ioC&pg=PA81&lpg=PA81&dq=attribute+splitting&source=bl&ots=Yo5A4twGRR&sig=nB5-_WdWWcSuKAHrmB6o4Bf3JO0&hl=en#v=onepage&q=the%20series%20table&f=false)中，Joe Celko 提供了 Series 表（在其他地方称为 Tally 或 Numbers）的 ANSI SQL 定义。他的定义确保列中的值是唯一的、正的并且从 1 到最大值是连续的：

```
CREATE TABLE Series (
  seq INTEGER NOT NULL PRIMARY KEY,
  CONSTRAINT non_negative_nbr CHECK (seq > 0),
  CONSTRAINT numbers_are_complete CHECK ((SELECT COUNT(*) FROM Series) = (SELECT MAX(seq) FROM Series))
); 
```

PRIMARY KEY 声明确保了唯一性。约束确保了积极性`non_negative_nbr`。有了这两个约束，约束就确保了连续性`numbers_are_complete`。

SQL Server 不支持检查约束中的子查询。当我尝试创建 Series 表时，收到如下错误：

```
Msg 1046, Level 15, State 1, Line 4
Subqueries are not allowed in this context. Only scalar expressions are allowed.
Msg 102, Level 15, State 1, Line 4
Incorrect syntax near ')'. 
```

如果我删除 unsupported constraint `numbers_are_complete`，我会得到这个定义：

```
CREATE TABLE Series (
  seq INTEGER NOT NULL PRIMARY KEY,
  CONSTRAINT non_negative_nbr CHECK (seq > 0)
); 
```

当我尝试创建这个版本的系列时，它成功了：

```
Command(s) completed successfully. 
```

这个版本的 Series 较弱，因为它不强制表中数字的连续性。

为了证明这一点，首先我必须填充表格。我采用了 Itzik Ben-Gan 在他的文章 ' [Virtual Auxiliary Table of Numbers](http://www.sqlmag.com/article/sql-server/virtual-auxiliary-table-of-numbers) ' 中描述的一种技术，可以有效地处理 65,536 行：

```
WITH
N0(_) AS (SELECT NULL UNION ALL SELECT NULL),
N1(_) AS (SELECT NULL FROM N0 AS L CROSS JOIN N0 AS R),
N2(_) AS (SELECT NULL FROM N1 AS L CROSS JOIN N1 AS R),
N3(_) AS (SELECT NULL FROM N2 AS L CROSS JOIN N2 AS R),
N4(_) AS (SELECT NULL FROM N3 AS L CROSS JOIN N3 AS R)
INSERT INTO Series (
  seq
)
SELECT
  ROW_NUMBER() OVER (ORDER BY (SELECT NULL)) AS n
FROM N4; 
```

查询产生如下输出：

```
(65536 row(s) affected) 
```

现在我可以从这样的表中选择生成 65,536 行：

```
SELECT seq
FROM Series; 
```

我已经截断了结果集，但它看起来像这样：

```
seq
1
2
...
65535
65536 
```

自己检查一下，你会发现区间 [1, 65536] 中的每个数字都在结果集中。该系列是连续的。

但是我可以通过删除不是范围端点的任何行来打破连续性：

```
DELETE FROM Series
WHERE seq = 25788; 
```

如果强制执行连续性，则此语句将引发错误，但它会成功：

```
(1 row(s) affected) 
```

人类很难通过目视检查找到缺失值。他们必须首先怀疑某个值是否丢失，然后再去惹麻烦。由于这些原因，篡改 Series 数据是一种将细微错误引入依赖 Series 表连续的 SQL Server 应用程序的简单方法。

假设用户编写了一个查询，该查询从 Sequence 读取以枚举来自另一个源的行。在我篡改之后，该查询现在会在某个值附近产生不正确的结果 - 到第 25,788 行，一切都偏离了一个。

可以编写一个查询来检测 Series 表中的缺失值，但是如何约束该表以使缺失值是不可能的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T17:19:14.890

我有三个潜在的建议：

* * *

(1) 将您的数字表设为只读（例如拒绝更新/插入/删除）。你为什么要从这个表中删除，永远？您的应用程序当然不应该这样做，您的用户也不应该手动这样做。用户按下“这个按钮有什么作用？”不需要所有这些检查约束。按钮，当您可以简单地删除按钮时。

```
DENY DELETE ON dbo.Serial TO [your_app_user];
-- repeat for individual users/roles 
```

* * *

(2) 更简单的方法是首先创建一个代替触发器来防止删除：

```
CREATE TRIGGER dbo.LeaveMyNumbersAlone
ON dbo.Serial
INSTEAD OF DELETE
AS
BEGIN
  SET NOCOUNT ON;
  RAISERROR('Please leave my numbers table alone.', 11, 1);
END 
```

是的，这可以被击败，但必须有人真的不遗余力地做到这一点。如果您雇用的人可能会这样做，并信任他们对数据库的通用访问权限，请祈祷这是他们计划造成的最大损害。

是的，如果您删除/重新创建数字表或在其他地方实现它，您可能会忘记重新实现触发器。但是您也可能会忘记您可能手动执行的任何处理间隙的操作。

* * *

(3) 如果您愿意即时推导出数字，则可以完全避免使用数字表。为此，我使用 sys.all_columns 和 sys.all_objects 之类的目录视图，具体取决于我需要多少个数字：

```
;WITH n AS (SELECT TOP (10000) n FROM 
  (SELECT n = ROW_NUMBER() OVER
    (ORDER BY s1.[object_id])
    FROM sys.all_objects AS s1
    CROSS JOIN sys.all_objects AS s2
  ) AS x ORDER BY n
)
SELECT n FROM n ORDER BY n; -- look ma, no gaps! 
```

如果您只需要 100 行，您可以只使用其中一个视图而不使用交叉连接；如果您需要更多，您可以添加更多视图。不是试图让你远离数字表，但这会让你绕过一些限制，例如（a）在每个实例上建立一个数字表和（b）在哲学上反对这种事情的人（我在我的职业）。

* * *

顺便说一句，这确实应该在产品中。请在以下 Connect 项目中投票并说明真实的业务用例：

[http://connect.microsoft.com/SQLServer/feedback/details/258733/add-a-built-in-table-of-numbers](http://connect.microsoft.com/SQLServer/feedback/details/258733/add-a-built-in-table-of-numbers)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T17:06:27.003

解决此问题的一种方法是用视图替换表。

此视图定义基于问题中引用的同一篇文章，并生成多达 65,536 个唯一、肯定和连续的行：

```
CREATE VIEW SeriesView
AS
WITH
N0(_) AS (SELECT NULL UNION ALL SELECT NULL),
N1(_) AS (SELECT NULL FROM N0 AS L CROSS JOIN N0 AS R),
N2(_) AS (SELECT NULL FROM N1 AS L CROSS JOIN N1 AS R),
N3(_) AS (SELECT NULL FROM N2 AS L CROSS JOIN N2 AS R),
N4(_) AS (SELECT NULL FROM N3 AS L CROSS JOIN N3 AS R)
SELECT
    ROW_NUMBER() OVER (ORDER BY (SELECT NULL)) AS seq
FROM N4; 
```

这样，行号总是在查询时由[ROW_NUMBER](http://msdn.microsoft.com/en-us/library/ms186734.aspx)函数生成。ROW_NUMBER 函数输出的一组值是连续的，每个值都是唯一且正的。

如果您尝试从视图中删除：

```
DELETE FROM SeriesView
WHERE seq = 25788; 
```

服务器将引发错误，因为视图不可更新：

```
Msg 4406, Level 16, State 1, Line 1
Update or insert of view or function 'SeriesView' failed because it 
```

包含派生或常量字段。

与将值存储在表中相比，我没有比较这种技术的性能。两者在实践中似乎都足够快，尽管我承认我还没有在生产中使用该视图。

从 Series 中选择的查询的性能调整可能会更加困难，因为通过简单地从视图中选择会产生很大的执行计划。

只需比较这些执行计划的长度即可比较它们的明显复杂性：

这是从问题中的表中选择生成的执行计划：

```
<?xml version="1.0" encoding="utf-16"?>
<ShowPlanXML xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" Version="1.1.1" Build="10.0.5500.0" xmlns="http://schemas.microsoft.com/sqlserver/2004/07/showplan">
    <BatchSequence>
        <Batch>
            <Statements>
                <StmtSimple StatementCompId="1" StatementEstRows="65535" StatementId="1" StatementOptmLevel="TRIVIAL" StatementSubTreeCost="0.153148" StatementText="SELECT seq&#xD;&#xA;FROM Series;" StatementType="SELECT" QueryHash="0x5765DD2692E59AB9" QueryPlanHash="0x598E82F24F85C8B9">
                    <StatementSetOptions ANSI_NULLS="true" ANSI_PADDING="true" ANSI_WARNINGS="true" ARITHABORT="true" CONCAT_NULL_YIELDS_NULL="true" NUMERIC_ROUNDABORT="false" QUOTED_IDENTIFIER="true" />
                    <QueryPlan DegreeOfParallelism="1" CachedPlanSize="8" CompileTime="0" CompileCPU="0" CompileMemory="80">
                        <RelOp AvgRowSize="11" EstimateCPU="0.0722455" EstimateIO="0.0809028" EstimateRebinds="0" EstimateRewinds="0" EstimateRows="65535" LogicalOp="Clustered Index Scan" NodeId="0" Parallel="false" PhysicalOp="Clustered Index Scan" EstimatedTotalSubtreeCost="0.153148" TableCardinality="65535">
                            <OutputList>
                                <ColumnReference Database="[tempdb]" Schema="[dbo]" Table="[Series]" Column="seq" />
                            </OutputList>
                            <RunTimeInformation>
                                <RunTimeCountersPerThread Thread="0" ActualRows="65535" ActualEndOfScans="1" ActualExecutions="1" />
                            </RunTimeInformation>
                            <IndexScan Ordered="false" ForcedIndex="false" NoExpandHint="false">
                                <DefinedValues>
                                    <DefinedValue>
                                        <ColumnReference Database="[tempdb]" Schema="[dbo]" Table="[Series]" Column="seq" />
                                    </DefinedValue>
                                </DefinedValues>
                                <Object Database="[tempdb]" Schema="[dbo]" Table="[Series]" Index="[PK__Series__DDDFBCBE0F975522]" IndexKind="Clustered" />
                            </IndexScan>
                        </RelOp>
                    </QueryPlan>
                </StmtSimple>
            </Statements>
        </Batch>
    </BatchSequence>
</ShowPlanXML> 
```

这是通过从我的答案中选择视图生成的执行计划：

```
<?xml version="1.0" encoding="utf-16"?>
<ShowPlanXML xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" Version="1.1.1" Build="10.0.5500.0" xmlns="http://schemas.microsoft.com/sqlserver/2004/07/showplan">
    <BatchSequence>
        <Batch>
            <Statements>
                <StmtSimple StatementCompId="1" StatementEstRows="65536" StatementId="1" StatementOptmLevel="FULL" StatementOptmEarlyAbortReason="TimeOut" StatementSubTreeCost="0.692044" StatementText="SELECT seq&#xD;&#xA;FROM SeriesView;" StatementType="SELECT" QueryHash="0xD7D3DE2C825E3F56" QueryPlanHash="0x927D671566369AAC">
                    <StatementSetOptions ANSI_NULLS="true" ANSI_PADDING="true" ANSI_WARNINGS="true" ARITHABORT="true" CONCAT_NULL_YIELDS_NULL="true" NUMERIC_ROUNDABORT="false" QUOTED_IDENTIFIER="true" />
                    <QueryPlan DegreeOfParallelism="1" CachedPlanSize="32" CompileTime="6" CompileCPU="6" CompileMemory="680">
                        <RelOp AvgRowSize="15" EstimateCPU="0.00524288" EstimateIO="0" EstimateRebinds="0" EstimateRewinds="0" EstimateRows="65536" LogicalOp="Compute Scalar" NodeId="0" Parallel="false" PhysicalOp="Sequence Project" EstimatedTotalSubtreeCost="0.692044">
                            <OutputList>
                                <ColumnReference Column="Expr1065" />
                            </OutputList>
                            <RunTimeInformation>
                                <RunTimeCountersPerThread Thread="0" ActualRows="65536" ActualEndOfScans="1" ActualExecutions="1" />
                            </RunTimeInformation>
                            <SequenceProject>
                                <DefinedValues>
                                    <DefinedValue>
                                        <ColumnReference Column="Expr1065" />
                                        <ScalarOperator ScalarString="row_number">
                                            <Sequence FunctionName="row_number" />
                                        </ScalarOperator>
                                    </DefinedValue>
                                </DefinedValues>
                                <RelOp AvgRowSize="15" EstimateCPU="0.00131072" EstimateIO="0" EstimateRebinds="0" EstimateRewinds="0" EstimateRows="65536" LogicalOp="Segment" NodeId="1" Parallel="false" PhysicalOp="Segment" EstimatedTotalSubtreeCost="0.686801">
                                    <OutputList>
                                        <ColumnReference Column="Expr1064" />
                                        <ColumnReference Column="Segment1066" />
                                    </OutputList>
                                    <RunTimeInformation>
                                        <RunTimeCountersPerThread Thread="0" ActualRows="65536" ActualEndOfScans="1" ActualExecutions="1" />
                                    </RunTimeInformation>
                                    <Segment>
                                        <GroupBy />
                                        <SegmentColumn>
                                            <ColumnReference Column="Segment1066" />
                                        </SegmentColumn>
                                        <RelOp AvgRowSize="11" EstimateCPU="0.0065536" EstimateIO="0" EstimateRebinds="0" EstimateRewinds="0" EstimateRows="65536" LogicalOp="Compute Scalar" NodeId="2" Parallel="false" PhysicalOp="Compute Scalar" EstimatedTotalSubtreeCost="0.68549">
                                            <OutputList>
                                                <ColumnReference Column="Expr1064" />
                                            </OutputList>
                                            <ComputeScalar>
                                                <DefinedValues>
                                                    <DefinedValue>
                                                        <ColumnReference Column="Expr1064" />
                                                        <ScalarOperator ScalarString="NULL">
                                                            <Const ConstValue="NULL" />
                                                        </ScalarOperator>
                                                    </DefinedValue>
                                                </DefinedValues>
                                                <RelOp AvgRowSize="9" EstimateCPU="0.27394" EstimateIO="0" EstimateRebinds="0" EstimateRewinds="0" EstimateRows="65536" LogicalOp="Inner Join" NodeId="3" Parallel="false" PhysicalOp="Nested Loops" EstimatedTotalSubtreeCost="0.678937">
                                                    <OutputList />
                                                    <Warnings NoJoinPredicate="true" />
                                                    <RunTimeInformation>
                                                        <RunTimeCountersPerThread Thread="0" ActualRows="65536" ActualEndOfScans="1" ActualExecutions="1" />
                                                    </RunTimeInformation>
                                                    <NestedLoops Optimized="false">
                                                        <RelOp AvgRowSize="9" EstimateCPU="0.13697" EstimateIO="0" EstimateRebinds="0" EstimateRewinds="0" EstimateRows="32768" LogicalOp="Inner Join" NodeId="4" Parallel="false" PhysicalOp="Nested Loops" EstimatedTotalSubtreeCost="0.33946">
                                                            <OutputList />
                                                            <Warnings NoJoinPredicate="true" />
                                                            <RunTimeInformation>
                                                                <RunTimeCountersPerThread Thread="0" ActualRows="32768" ActualEndOfScans="1" ActualExecutions="1" />
                                                            </RunTimeInformation>
                                                            <NestedLoops Optimized="false">
                                                                <RelOp AvgRowSize="9" EstimateCPU="0.0684851" EstimateIO="0" EstimateRebinds="0" EstimateRewinds="0" EstimateRows="16384" LogicalOp="Inner Join" NodeId="5" Parallel="false" PhysicalOp="Nested Loops" EstimatedTotalSubtreeCost="0.169722">
                                                                    <OutputList />
                                                                    <Warnings NoJoinPredicate="true" />
                                                                    <RunTimeInformation>
                                                                        <RunTimeCountersPerThread Thread="0" ActualRows="16384" ActualEndOfScans="1" ActualExecutions="1" />
                                                                    </RunTimeInformation>
                                                                    <NestedLoops Optimized="false">
                                                                        <RelOp AvgRowSize="9" EstimateCPU="0.0342426" EstimateIO="0" EstimateRebinds="0" EstimateRewinds="0" EstimateRows="8192" LogicalOp="Inner Join" NodeId="6" Parallel="false" PhysicalOp="Nested Loops" EstimatedTotalSubtreeCost="0.0848524">
                                                                            <OutputList />
                                                                            <Warnings NoJoinPredicate="true" />
                                                                            <RunTimeInformation>
                                                                                <RunTimeCountersPerThread Thread="0" ActualRows="8192" ActualEndOfScans="1" ActualExecutions="1" />
                                                                            </RunTimeInformation>
                                                                            <NestedLoops Optimized="false">
                                                                                <RelOp AvgRowSize="9" EstimateCPU="0.0171213" EstimateIO="0" EstimateRebinds="0" EstimateRewinds="0" EstimateRows="4096" LogicalOp="Inner Join" NodeId="7" Parallel="false" PhysicalOp="Nested Loops" EstimatedTotalSubtreeCost="0.0424177">
                                                                                    <OutputList />
                                                                                    <Warnings NoJoinPredicate="true" />
                                                                                    <RunTimeInformation>
                                                                                        <RunTimeCountersPerThread Thread="0" ActualRows="4096" ActualEndOfScans="1" ActualExecutions="1" />
                                                                                    </RunTimeInformation>
                                                                                    <NestedLoops Optimized="false">
                                                                                        <RelOp AvgRowSize="9" EstimateCPU="0.00856064" EstimateIO="0" EstimateRebinds="0" EstimateRewinds="0" EstimateRows="2048" LogicalOp="Inner Join" NodeId="8" Parallel="false" PhysicalOp="Nested Loops" EstimatedTotalSubtreeCost="0.0212003">
                                                                                            <OutputList />
                                                                                            <Warnings NoJoinPredicate="true" />
                                                                                            <RunTimeInformation>
                                                                                                <RunTimeCountersPerThread Thread="0" ActualRows="2048" ActualEndOfScans="1" ActualExecutions="1" />
                                                                                            </RunTimeInformation>
                                                                                            <NestedLoops Optimized="false">
                                                                                                <RelOp AvgRowSize="9" EstimateCPU="0.00428032" EstimateIO="0" EstimateRebinds="0" EstimateRewinds="0" EstimateRows="1024" LogicalOp="Inner Join" NodeId="9" Parallel="false" PhysicalOp="Nested Loops" EstimatedTotalSubtreeCost="0.0105915">
                                                                                                    <OutputList />
                                                                                                    <Warnings NoJoinPredicate="true" />
                                                                                                    <RunTimeInformation>
                                                                                                        <RunTimeCountersPerThread Thread="0" ActualRows="1024" ActualEndOfScans="1" ActualExecutions="1" />
                                                                                                    </RunTimeInformation>
                                                                                                    <NestedLoops Optimized="false">
                                                                                                        <RelOp AvgRowSize="9" EstimateCPU="0.00214016" EstimateIO="0" EstimateRebinds="0" EstimateRewinds="0" EstimateRows="512" LogicalOp="Inner Join" NodeId="10" Parallel="false" PhysicalOp="Nested Loops" EstimatedTotalSubtreeCost="0.00528701">
                                                                                                            <OutputList />
                                                                                                            <Warnings NoJoinPredicate="true" />
                                                                                                            <RunTimeInformation>
                                                                                                                <RunTimeCountersPerThread Thread="0" ActualRows="512" ActualEndOfScans="1" ActualExecutions="1" />
                                                                                                            </RunTimeInformation>
                                                                                                            <NestedLoops Optimized="false">
                                                                                                                <RelOp AvgRowSize="9" EstimateCPU="0.00107008" EstimateIO="0" EstimateRebinds="0" EstimateRewinds="0" EstimateRows="256" LogicalOp="Inner Join" NodeId="11" Parallel="false" PhysicalOp="Nested Loops" EstimatedTotalSubtreeCost="0.0026347">
                                                                                                                    <OutputList />
                                                                                                                    <Warnings NoJoinPredicate="true" />
                                                                                                                    <RunTimeInformation>
                                                                                                                        <RunTimeCountersPerThread Thread="0" ActualRows="256" ActualEndOfScans="1" ActualExecutions="1" />
                                                                                                                    </RunTimeInformation>
                                                                                                                    <NestedLoops Optimized="false">
                                                                                                                        <RelOp AvgRowSize="9" EstimateCPU="0.00053504" EstimateIO="0" EstimateRebinds="0" EstimateRewinds="0" EstimateRows="128" LogicalOp="Inner Join" NodeId="12" Parallel="false" PhysicalOp="Nested Loops" EstimatedTotalSubtreeCost="0.00130846">
                                                                                                                            <OutputList />
                                                                                                                            <Warnings NoJoinPredicate="true" />
                                                                                                                            <RunTimeInformation>
                                                                                                                                <RunTimeCountersPerThread Thread="0" ActualRows="128" ActualEndOfScans="1" ActualExecutions="1" />
                                                                                                                            </RunTimeInformation>
                                                                                                                            <NestedLoops Optimized="false">
                                                                                                                                <RelOp AvgRowSize="9" EstimateCPU="0.00026752" EstimateIO="0" EstimateRebinds="0" EstimateRewinds="0" EstimateRows="64" LogicalOp="Inner Join" NodeId="13" Parallel="false" PhysicalOp="Nested Loops" EstimatedTotalSubtreeCost="0.000645262">
                                                                                                                                    <OutputList />
                                                                                                                                    <Warnings NoJoinPredicate="true" />
                                                                                                                                    <RunTimeInformation>
                                                                                                                                        <RunTimeCountersPerThread Thread="0" ActualRows="64" ActualEndOfScans="1" ActualExecutions="1" />
                                                                                                                                    </RunTimeInformation>
                                                                                                                                    <NestedLoops Optimized="false">
                                                                                                                                        <RelOp AvgRowSize="9" EstimateCPU="0.00013376" EstimateIO="0" EstimateRebinds="0" EstimateRewinds="0" EstimateRows="32" LogicalOp="Inner Join" NodeId="14" Parallel="false" PhysicalOp="Nested Loops" EstimatedTotalSubtreeCost="0.000313585">
                                                                                                                                            <OutputList />
                                                                                                                                            <Warnings NoJoinPredicate="true" />
                                                                                                                                            <RunTimeInformation>
                                                                                                                                                <RunTimeCountersPerThread Thread="0" ActualRows="32" ActualEndOfScans="1" ActualExecutions="1" />
                                                                                                                                            </RunTimeInformation>
                                                                                                                                            <NestedLoops Optimized="false">
                                                                                                                                                <RelOp AvgRowSize="9" EstimateCPU="6.688E-05" EstimateIO="0" EstimateRebinds="0" EstimateRewinds="0" EstimateRows="16" LogicalOp="Inner Join" NodeId="15" Parallel="false" PhysicalOp="Nested Loops" EstimatedTotalSubtreeCost="0.000147668">
                                                                                                                                                    <OutputList />
                                                                                                                                                    <Warnings NoJoinPredicate="true" />
                                                                                                                                                    <RunTimeInformation>
                                                                                                                                                        <RunTimeCountersPerThread Thread="0" ActualRows="16" ActualEndOfScans="1" ActualExecutions="1" />
                                                                                                                                                    </RunTimeInformation>
                                                                                                                                                    <NestedLoops Optimized="false">
                                                                                                                                                        <RelOp AvgRowSize="9" EstimateCPU="3.344E-05" EstimateIO="0" EstimateRebinds="0" EstimateRewinds="0" EstimateRows="8" LogicalOp="Inner Join" NodeId="16" Parallel="false" PhysicalOp="Nested Loops" EstimatedTotalSubtreeCost="6.4631E-05">
                                                                                                                                                            <OutputList />
                                                                                                                                                            <Warnings NoJoinPredicate="true" />
                                                                                                                                                            <RunTimeInformation>
                                                                                                                                                                <RunTimeCountersPerThread Thread="0" ActualRows="8" ActualEndOfScans="1" ActualExecutions="1" />
                                                                                                                                                            </RunTimeInformation>
                                                                                                                                                            <NestedLoops Optimized="false">
                                                                                                                                                                <RelOp AvgRowSize="9" EstimateCPU="1.672E-05" EstimateIO="0" EstimateRebinds="0" EstimateRewinds="0" EstimateRows="4" LogicalOp="Inner Join" NodeId="17" Parallel="false" PhysicalOp="Nested Loops" EstimatedTotalSubtreeCost="2.3034E-05">
                                                                                                                                                                    <OutputList />
                                                                                                                                                                    <Warnings NoJoinPredicate="true" />
                                                                                                                                                                    <RunTimeInformation>
                                                                                                                                                                        <RunTimeCountersPerThread Thread="0" ActualRows="4" ActualEndOfScans="1" ActualExecutions="1" />
                                                                                                                                                                    </RunTimeInformation>
                                                                                                                                                                    <NestedLoops Optimized="false">
                                                                                                                                                                        <RelOp AvgRowSize="9" EstimateCPU="2.157E-06" EstimateIO="0" EstimateRebinds="0" EstimateRewinds="0" EstimateRows="2" LogicalOp="Constant Scan" NodeId="18" Parallel="false" PhysicalOp="Constant Scan" EstimatedTotalSubtreeCost="2.157E-06">
                                                                                                                                                                            <OutputList />
                                                                                                                                                                            <RunTimeInformation>
                                                                                                                                                                                <RunTimeCountersPerThread Thread="0" ActualRows="2" ActualEndOfScans="1" ActualExecutions="1" />
                                                                                                                                                                            </RunTimeInformation>
                                                                                                                                                                            <ConstantScan />
                                                                                                                                                                        </RelOp>
                                                                                                                                                                        <RelOp AvgRowSize="9" EstimateCPU="2.157E-06" EstimateIO="0" EstimateRebinds="0" EstimateRewinds="1" EstimateRows="2" LogicalOp="Constant Scan" NodeId="19" Parallel="false" PhysicalOp="Constant Scan" EstimatedTotalSubtreeCost="4.157E-06">
                                                                                                                                                                            <OutputList />
                                                                                                                                                                            <RunTimeInformation>
                                                                                                                                                                                <RunTimeCountersPerThread Thread="0" ActualRows="4" ActualEndOfScans="2" ActualExecutions="2" />
                                                                                                                                                                            </RunTimeInformation>
                                                                                                                                                                            <ConstantScan />
                                                                                                                                                                        </RelOp>
                                                                                                                                                                    </NestedLoops>
                                                                                                                                                                </RelOp>
                                                                                                                                                                <RelOp AvgRowSize="9" EstimateCPU="2.157E-06" EstimateIO="0" EstimateRebinds="0" EstimateRewinds="1" EstimateRows="2" LogicalOp="Constant Scan" NodeId="20" Parallel="false" PhysicalOp="Constant Scan" EstimatedTotalSubtreeCost="4.157E-06">
                                                                                                                                                                    <OutputList />
                                                                                                                                                                    <RunTimeInformation>
                                                                                                                                                                        <RunTimeCountersPerThread Thread="0" ActualRows="8" ActualEndOfScans="4" ActualExecutions="4" />
                                                                                                                                                                    </RunTimeInformation>
                                                                                                                                                                    <ConstantScan />
                                                                                                                                                                </RelOp>
                                                                                                                                                            </NestedLoops>
                                                                                                                                                        </RelOp>
                                                                                                                                                        <RelOp AvgRowSize="9" EstimateCPU="2.157E-06" EstimateIO="0" EstimateRebinds="0" EstimateRewinds="1" EstimateRows="2" LogicalOp="Constant Scan" NodeId="21" Parallel="false" PhysicalOp="Constant Scan" EstimatedTotalSubtreeCost="4.157E-06">
                                                                                                                                                            <OutputList />
                                                                                                                                                            <RunTimeInformation>
                                                                                                                                                                <RunTimeCountersPerThread Thread="0" ActualRows="16" ActualEndOfScans="8" ActualExecutions="8" />
                                                                                                                                                            </RunTimeInformation>
                                                                                                                                                            <ConstantScan />
                                                                                                                                                        </RelOp>
                                                                                                                                                    </NestedLoops>
                                                                                                                                                </RelOp>
                                                                                                                                                <RelOp AvgRowSize="9" EstimateCPU="2.157E-06" EstimateIO="0" EstimateRebinds="0" EstimateRewinds="15" EstimateRows="2" LogicalOp="Constant Scan" NodeId="22" Parallel="false" PhysicalOp="Constant Scan" EstimatedTotalSubtreeCost="3.2157E-05">
                                                                                                                                                    <OutputList />
                                                                                                                                                    <RunTimeInformation>
                                                                                                                                                        <RunTimeCountersPerThread Thread="0" ActualRows="32" ActualEndOfScans="16" ActualExecutions="16" />
                                                                                                                                                    </RunTimeInformation>
                                                                                                                                                    <ConstantScan />
                                                                                                                                                </RelOp>
                                                                                                                                            </NestedLoops>
                                                                                                                                        </RelOp>
                                                                                                                                        <RelOp AvgRowSize="9" EstimateCPU="2.157E-06" EstimateIO="0" EstimateRebinds="0" EstimateRewinds="15" EstimateRows="2" LogicalOp="Constant Scan" NodeId="23" Parallel="false" PhysicalOp="Constant Scan" EstimatedTotalSubtreeCost="3.2157E-05">
                                                                                                                                            <OutputList />
                                                                                                                                            <RunTimeInformation>
                                                                                                                                                <RunTimeCountersPerThread Thread="0" ActualRows="64" ActualEndOfScans="32" ActualExecutions="32" />
                                                                                                                                            </RunTimeInformation>
                                                                                                                                            <ConstantScan />
                                                                                                                                        </RelOp>
                                                                                                                                    </NestedLoops>
                                                                                                                                </RelOp>
                                                                                                                                <RelOp AvgRowSize="9" EstimateCPU="2.157E-06" EstimateIO="0" EstimateRebinds="0" EstimateRewinds="15" EstimateRows="2" LogicalOp="Constant Scan" NodeId="24" Parallel="false" PhysicalOp="Constant Scan" EstimatedTotalSubtreeCost="3.2157E-05">
                                                                                                                                    <OutputList />
                                                                                                                                    <RunTimeInformation>
                                                                                                                                        <RunTimeCountersPerThread Thread="0" ActualRows="128" ActualEndOfScans="64" ActualExecutions="64" />
                                                                                                                                    </RunTimeInformation>
                                                                                                                                    <ConstantScan />
                                                                                                                                </RelOp>
                                                                                                                            </NestedLoops>
                                                                                                                        </RelOp>
                                                                                                                        <RelOp AvgRowSize="9" EstimateCPU="2.157E-06" EstimateIO="0" EstimateRebinds="0" EstimateRewinds="15" EstimateRows="2" LogicalOp="Constant Scan" NodeId="25" Parallel="false" PhysicalOp="Constant Scan" EstimatedTotalSubtreeCost="3.2157E-05">
                                                                                                                            <OutputList />
                                                                                                                            <RunTimeInformation>
                                                                                                                                <RunTimeCountersPerThread Thread="0" ActualRows="256" ActualEndOfScans="128" ActualExecutions="128" />
                                                                                                                            </RunTimeInformation>
                                                                                                                            <ConstantScan />
                                                                                                                        </RelOp>
                                                                                                                    </NestedLoops>
                                                                                                                </RelOp>
                                                                                                                <RelOp AvgRowSize="9" EstimateCPU="2.157E-06" EstimateIO="0" EstimateRebinds="0" EstimateRewinds="255" EstimateRows="2" LogicalOp="Constant Scan" NodeId="26" Parallel="false" PhysicalOp="Constant Scan" EstimatedTotalSubtreeCost="0.000512157">
                                                                                                                    <OutputList />
                                                                                                                    <RunTimeInformation>
                                                                                                                        <RunTimeCountersPerThread Thread="0" ActualRows="512" ActualEndOfScans="256" ActualExecutions="256" />
                                                                                                                    </RunTimeInformation>
                                                                                                                    <ConstantScan />
                                                                                                                </RelOp>
                                                                                                            </NestedLoops>
                                                                                                        </RelOp>
                                                                                                        <RelOp AvgRowSize="9" EstimateCPU="2.157E-06" EstimateIO="0" EstimateRebinds="0" EstimateRewinds="255" EstimateRows="2" LogicalOp="Constant Scan" NodeId="27" Parallel="false" PhysicalOp="Constant Scan" EstimatedTotalSubtreeCost="0.000512157">
                                                                                                            <OutputList />
                                                                                                            <RunTimeInformation>
                                                                                                                <RunTimeCountersPerThread Thread="0" ActualRows="1024" ActualEndOfScans="512" ActualExecutions="512" />
                                                                                                            </RunTimeInformation>
                                                                                                            <ConstantScan />
                                                                                                        </RelOp>
                                                                                                    </NestedLoops>
                                                                                                </RelOp>
                                                                                                <RelOp AvgRowSize="9" EstimateCPU="2.157E-06" EstimateIO="0" EstimateRebinds="0" EstimateRewinds="255" EstimateRows="2" LogicalOp="Constant Scan" NodeId="28" Parallel="false" PhysicalOp="Constant Scan" EstimatedTotalSubtreeCost="0.000512157">
                                                                                                    <OutputList />
                                                                                                    <RunTimeInformation>
                                                                                                        <RunTimeCountersPerThread Thread="0" ActualRows="2048" ActualEndOfScans="1024" ActualExecutions="1024" />
                                                                                                    </RunTimeInformation>
                                                                                                    <ConstantScan />
                                                                                                </RelOp>
                                                                                            </NestedLoops>
                                                                                        </RelOp>
                                                                                        <RelOp AvgRowSize="9" EstimateCPU="2.157E-06" EstimateIO="0" EstimateRebinds="0" EstimateRewinds="255" EstimateRows="2" LogicalOp="Constant Scan" NodeId="29" Parallel="false" PhysicalOp="Constant Scan" EstimatedTotalSubtreeCost="0.000512157">
                                                                                            <OutputList />
                                                                                            <RunTimeInformation>
                                                                                                <RunTimeCountersPerThread Thread="0" ActualRows="4096" ActualEndOfScans="2048" ActualExecutions="2048" />
                                                                                            </RunTimeInformation>
                                                                                            <ConstantScan />
                                                                                        </RelOp>
                                                                                    </NestedLoops>
                                                                                </RelOp>
                                                                                <RelOp AvgRowSize="9" EstimateCPU="2.157E-06" EstimateIO="0" EstimateRebinds="0" EstimateRewinds="4095" EstimateRows="2" LogicalOp="Constant Scan" NodeId="30" Parallel="false" PhysicalOp="Constant Scan" EstimatedTotalSubtreeCost="0.00819216">
                                                                                    <OutputList />
                                                                                    <RunTimeInformation>
                                                                                        <RunTimeCountersPerThread Thread="0" ActualRows="8192" ActualEndOfScans="4096" ActualExecutions="4096" />
                                                                                    </RunTimeInformation>
                                                                                    <ConstantScan />
                                                                                </RelOp>
                                                                            </NestedLoops>
                                                                        </RelOp>
                                                                        <RelOp AvgRowSize="9" EstimateCPU="2.157E-06" EstimateIO="0" EstimateRebinds="0" EstimateRewinds="4095" EstimateRows="2" LogicalOp="Constant Scan" NodeId="31" Parallel="false" PhysicalOp="Constant Scan" EstimatedTotalSubtreeCost="0.00819216">
                                                                            <OutputList />
                                                                            <RunTimeInformation>
                                                                                <RunTimeCountersPerThread Thread="0" ActualRows="16384" ActualEndOfScans="8192" ActualExecutions="8192" />
                                                                            </RunTimeInformation>
                                                                            <ConstantScan />
                                                                        </RelOp>
                                                                    </NestedLoops>
                                                                </RelOp>
                                                                <RelOp AvgRowSize="9" EstimateCPU="2.157E-06" EstimateIO="0" EstimateRebinds="0" EstimateRewinds="4095" EstimateRows="2" LogicalOp="Constant Scan" NodeId="32" Parallel="false" PhysicalOp="Constant Scan" EstimatedTotalSubtreeCost="0.00819216">
                                                                    <OutputList />
                                                                    <RunTimeInformation>
                                                                        <RunTimeCountersPerThread Thread="0" ActualRows="32768" ActualEndOfScans="16384" ActualExecutions="16384" />
                                                                    </RunTimeInformation>
                                                                    <ConstantScan />
                                                                </RelOp>
                                                            </NestedLoops>
                                                        </RelOp>
                                                        <RelOp AvgRowSize="9" EstimateCPU="2.157E-06" EstimateIO="0" EstimateRebinds="0" EstimateRewinds="4095" EstimateRows="2" LogicalOp="Constant Scan" NodeId="33" Parallel="false" PhysicalOp="Constant Scan" EstimatedTotalSubtreeCost="0.00819216">
                                                            <OutputList />
                                                            <RunTimeInformation>
                                                                <RunTimeCountersPerThread Thread="0" ActualRows="65536" ActualEndOfScans="32768" ActualExecutions="32768" />
                                                            </RunTimeInformation>
                                                            <ConstantScan />
                                                        </RelOp>
                                                    </NestedLoops>
                                                </RelOp>
                                            </ComputeScalar>
                                        </RelOp>
                                    </Segment>
                                </RelOp>
                            </SequenceProject>
                        </RelOp>
                    </QueryPlan>
                </StmtSimple>
            </Statements>
        </Batch>
    </BatchSequence>
</ShowPlanXML> 
```

第二个要大得多，因为有许多交叉连接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T17:09:29.033

将您的`numbers_are_complete`约束查询移到[`INSERT/UPDATE/DELETE`](http://msdn.microsoft.com/en-us/library/ms189799%28v=sql.105%29.aspx)触发器中，您应该没有问题。

# macos - “找不到资源”在 AppleScript 中显示图标

> ID：12183064
> 
> 赞同：0
> 
> 时间：2012-08-29T17:06:37.740
> 
> 标签：macos, if-statement, applescript

我是苹果脚本的新手，我有一个简单的苹果脚本，它在下面 -

```
display dialog "Enter Your User Name:" default answer ""
set theUser to the text returned of the result 
```

现在，如果用户没有输入任何内容并单击，`OK`我会进行类似的检查

```
if theUser = "" then
    display dialog "User name is mandatory" buttons {"OK"} with title "Missing parameter" with icon "stop"
    set theError to button returned of the result
    if theError is "OK" then quit
end if 
```

但是`Resource wasn't found.`当检查条件时它会给我一个错误弹出窗口`if`。我有尝试`theUser is in {"",value missing}`等，`theUser is missing value`但这些也不起作用。这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T17:10:43.210

停止不应该用引号引起来。我假设您希望脚本在您发送“退出”命令时停止执行。您可以通过添加取消按钮参数来完成此操作。

```
display dialog "Enter Your User Name:" default answer ""
set theUser to the text returned of the result

if theUser = "" then
    display dialog "User name is mandatory" buttons {"OK"} default button {"OK"} cancel button {"OK"} with title "Missing parameter" with icon stop
end if 
```

# angularjs - Angular JS - 如何处理重复的 HTML 代码，如页眉/页脚？

> ID：12183066
> 
> 赞同：20
> 
> 时间：2012-08-29T17:06:46.243
> 
> 标签：angularjs

我刚刚阅读了[Angular JS 的介绍，](http://angularjs.org/)但我没有看到任何关于一次编写 HTML 页眉代码和页脚代码并将其包含在所有页面中的方法。

有没有官方/推荐的方式来做到这一点？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-08-29T18:20:50.017

如果您正在创建单页 Web 应用程序（例如，使用 $routeProvider 带有可收藏视图/页面），您可以将页眉和页脚直接放入 index.html（或使用 ng-include），然后使用[ng-view](http://docs.angularjs.org/api/ng.directive:ngView)进行切换视图/页面之间：

```
<html ng-app>
<head>
   <script src="http://code.angularjs.org/angular-1.0.1.min.js"></script>
</head>
<body>
   ... header here, or use ng-include ...
   <div ng-view></div>
   ... footer here, or use ng-include ...
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-08-29T17:21:39.700

官方的做法是使用[ngInclude](http://docs.angularjs.org/api/ng.directive:ngInclude)指令，它`"fetches, compiles and includes an external HTML fragment".`

```
<html ng-app>

<head>
  <script src="http://code.angularjs.org/angular-1.0.1.min.js"></script>
</head>

<body>
  <div ng-include src="'header.url'"></div>
  ...
  <div ng-include src="'footer.url'"></div>
</body>

</html>
```

有了这个，您可以在所有页面中重复使用相同`header.url`的内容。`footer.url`

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-07-10T09:42:57.247

我刚刚找到了另一种在多个视图中包含同一段代码的方法：
=> 创建和使用您自己的 Angular '指令'

1）定义一个指令：

```
angular.module('myApp')
  .directive('appfooter', function() {
    return {
      templateUrl: 'widgets/footer.html'
    };
  }); 
```

2) 在此处创建名为“widgets/footer.html”的模板。
3）使用你的新指令：

```
<div appfooter></div> 
```

使用的参考资料：

*   [AngularJS“指令”文档](https://docs.angularjs.org/guide/directive)
*   [指令使用示例](http://www.objectpartners.com/2013/08/13/angular-js-create-reusable-html-widgets-with-directives/)

希望这可以帮助

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2013-03-03T16:02:04.820

我建议您将标签移动到页面末尾以缩短应用程序加载时间，因为 html 加载不会被 angular 阻止

```
</head>
<body>
   <div ng-include src="header.url"></div>
   ...
   <div ng-include src="footer.url"></div>

   <script src="http://code.angularjs.org/angular-1.0.1.min.js"></script>

</body> 
```

# delphi - 使用 Delphi ADOStoredProc 从空结果集中获取列标题

> ID：12183067
> 
> 赞同：3
> 
> 时间：2012-08-29T17:06:49.363
> 
> 标签：delphi, stored-procedures

我用 MS SQL 运行了几个存储过程。当我在 MS SQL Server Management Studio 下运行这些过程时，它们总是返回列标题。我也在尝试在 Delphi 程序中获得此功能。目前，如果数据集没有行，则不返回任何标题。使用 Delphi 7、TADOStoredProc、TADODataset 和字符串网格：

```
ADOStoredProc1.ObjectView := True;
ADOStoredProc1.Open;
ADODataSet1.Recordset := ADOStoredProc1.Recordset;

// process the first dataset, which contains rows

if not ADODataSet1.IsEmpty then
begin
  AdvGridWorkbook1.ActiveSheet := 0;
  // build grid header
  SetupHeader;
  // build grid detail
  SetupDetail;
end
else
begin
  Memo1.Lines.Add('Returned empty data set for Mapping');
end;

// load the next dataset.  no data rows but MS Studio shows column headers

ADODataSet1.Recordset := ADOStoredProc1.NextRecordset(RecordsAffected);

if not ADODataSet1.IsEmpty then // tests as empty
begin
  AdvGridWorkbook1.ActiveSheet := 1;
  // build grid header - none are returned as IsEmpty = True
  SetupHeader;
  // build grid detail
  SetupDetail;
end
else
begin
// this message is added to my memo field.
  Memo1.Lines.Add('Returned empty data set for Labor');
end;
ADODataSet1.Close;
ADOStoredProc1.Close; 
```

有谁知道 MS 是如何让列标题回来的？

存储过程是：

```
USE [NG_Test]
GO
/****** Object:  StoredProcedure [dbo].[NG_Checks]  ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

ALTER PROCEDURE [dbo].[NG_Checks] 
    @fiscal_month_year nvarchar(50)
AS
BEGIN
    declare @production_date datetime
    declare @start_date datetime
    declare @end_date datetime

    select @production_date = ng_production_release_date
    from ng_common_global_provisioning

    select @start_date = start_date, @end_date = end_date
from ng_common_accounting_fiscal_month
    where fiscal_month_year = @fiscal_month_year

-- this is the 1st dataset returned

    select b.company, b.wo_type, b.wo_code
from ng_accounting_mapping_ng_wo_2_gp b
    where wo_code not in (select wo_code from ng_wo_codes a)

--  this is the 2nd dataset returned
    select a.wo_display_id, a.wo_code, a.labor_revenue, a.labor_cost, 
        a.create_date, a.completion_date, a.finalizing_date, a.wo_status
    from ng_wo_header a, ng_wo_labor_rates b
    where a.wo_code = b.work_order_code
        and a.company = b.company
        and a.wo_type = b.work_order_type
        and a.wo_type in ('RO', 'BS')
        and a.labor_revenue is not null and a.labor_revenue <> 0
        and a.labor_cost is not null and a.labor_cost <> 0
        and a.create_date > @start_date
        and a.create_date < @end_date
        and a.create_date > @production_date
END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T10:56:45.190

IsEmpty 方法测试包含数据的实际记录，因此它不计算阻止调用 setupHeader 方法的列标题/字段名称。

只需删除对 IsEmpty 的调用（或移动它）：

```
AdvGridWorkbook1.ActiveSheet := 0;
// build grid header
SetupHeader;

// build grid detail
if not ADODataSet1.IsEmpty then
begin
  SetupDetail;
end
else
begin
  Memo1.Lines.Add('Returned empty data set for Mapping');
end; 
```

# wpf - 在 prism 应用程序中播放 wav

> ID：12183071
> 
> 赞同：0
> 
> 时间：2012-08-29T17:06:58.333
> 
> 标签：wpf, prism

我有带有一些模块的 wpf prism 应用程序。一个模块中包含文件夹“sounds”和 mysound.wav，wav 文件具有构建操作的“资源”值（打包在结果 dll 中）。我想播放这个 wav 文件，但我无法为它创建有效的 Uri。

```
Uri(@"pack://application:,,,/MyGame;component/sounds/mysound.wav") 
```

不工作。 ![在此处输入图像描述](../Images/7eb4f10344d99b8b5d467179f6348355.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T18:01:37.253

*   [http://msdn.microsoft.com/en-EN/library/aa970069.aspx](http://msdn.microsoft.com/en-EN/library/aa970069.aspx)

它说“应用程序”权限用于引用编译时已知的内容（即您有对程序集的引用）。

因为您正在使用 Prism 并且模块是动态加载的，所以这可能意味着您不能使用“应用程序”来引用它们......（但另一方面，这可能意味着如果程序集被加载到应用程序中，那么“应用程序”可以解析为该程序集中的项目）。

因此，如果您将 WAV 文件标记为“内容”，那么该文件将是松散的，您可以使用“siteoforigin”来访问它（也可能是“应用程序”，具体取决于您对 Microsoft 链接的解释）。

确保将“复制到输出目录”设置为“始终复制”或“如果较新则复制”，以便将 WAV 文件输出到您的构建目录。

但是，您不想要“松散”的文件，所以搜索继续......

* * *

`MediaPlayer`，`MediaElement`并且`MediaTimeline`只允许通过 .Source 属性设置媒体“文件”......并且只需要一个 Uri。

没有任何方法可以将“源”设置为来自`Stream`...如果有，那么您可以在您的 Prism 模块中有一个方法来按名称查找/加载声音文件并将其作为流返回。

（您可能不喜欢听到 Silverlight 可以从 Stream 加载媒体对象）。

* * *

以下是一些其他想法，用于将嵌入在您的程序集/模块中的 WAV 文件的数据提供给 MediaElement、MediaPlayer 或 MediaTimeline：

*   将您的 WAV 文件嵌入到模块中...但是当您需要播放它们时...您将 WAV 内容写入临时文件，然后设置 Uri 以指向该临时文件。

*   尝试并使用可以接受流的 MediaElement / MediaPlayer 的 Silverlight 版本，并编写您的模块以使其使用 Silverlight ....在 WPF 应用程序中托管 Silverlight 有各种技巧......这将如何工作我不知道。

*   注册您自己的“协议”，然后您可以在 Uri 中使用。

    使用 WebRequest.RegisterPrefix 注册您的协议前缀，并为它提供一个 WebRequest 工厂，即实现 IWebRequestCreate 的东西。

    然后通过从 WebRequest 派生来创建您自己的 WebRequest 类型......并让该工厂返回它的实例......您的实现将管理从资源流中请求数据......您可以通过 GetResourceStream 和返回的 StreamResourceInfo 中的 .Stream 属性。

    然后你可以使用类似 new Uri("loadwavfrom://mysound.wav")

*   也许使用PackageStore ....将所有WAV文件作为部件添加到商店......然后将Uri获取到该包中的“Part”并将其作为.Source传递。

*   [http://msdn.microsoft.com/en-us/library/3tf230ta](http://msdn.microsoft.com/en-us/library/3tf230ta)

*   [http://hackingsilverlight.blogspot.co.uk/2009/12/silverlight-hosting-in-wpf.html](http://hackingsilverlight.blogspot.co.uk/2009/12/silverlight-hosting-in-wpf.html)

* * *

更新：

我尝试了 RegisterPrefix 和 PackageStore，但他们不允许它工作。

看到这个帖子：

*   [http://go4answers.webhost4life.com/Example/uri-netpipewhatever-unusable-62823.aspx](http://go4answers.webhost4life.com/Example/uri-netpipewhatever-unusable-62823.aspx)

因为 MediaPlayer/MediaTimeline 等在下面使用 Windows Media Player，......当你认为 Windows Media 是一个本机应用程序时......它是否可以从 .NET 程序集中访问“资源”是非常值得怀疑的。

因此，从外观上看，它不知道如何访问媒体，除非通过本地或基于 HTTP 的 Uris。

当您使用指向“内容”文件的“应用程序”包 URI 时，当将其提供给下面的媒体播放器时，它必须映射到本地文件 URL。

所以我能想到的可能的解决方法是：

*   将 WAV 文件保留为“资源”...但根据需要将数据写入临时文件...并将该临时文件作为 Uri 提供。

*   将 WAV 文件作为“内容”放入您的项目中...并为该文件提供正确的 Uri

*   编写您自己的基本本地 HTTP 服务器/或使用 IIS 并“托管”WAV 文件……然后您可以使用基于 HTTP 的 URL 来访问该文件。（我知道很多麻烦）。

*   使用不同的媒体播放器控件....一个支持访问 .NET 程序集中的资源....或允许您提供一个代理，您可以在其中向播放器提供数据。你可以看看[http://vlcdotnet.codeplex.com/](http://vlcdotnet.codeplex.com/)

# java - 为什么我的 for 循环跳过第一步

> ID：12183085
> 
> 赞同：0
> 
> 时间：2012-08-29T17:07:52.010
> 
> 标签：java

这是我的代码....

```
import java.util.*;

public class lozanosjfver21 {
  public static void main(String args[]) {
    Scanner sc = new Scanner(System.in);
    System.out.println("enter the processes");

    int nop=sc.nextInt();
    int z=nop;
    int table1[][] = new int[z][6];
    int table2[][] = new int[z][6];

    int total = 0;
    boolean con[] = new boolean[z];
    boolean fin[] = new boolean[z];
    boolean lowest[] = new boolean[z];

    for(int a=0;a<z;a++) {
      System.out.print("Input ARRIVAL TIME and BURST TIME for process"+(a+1)+":");
      StringTokenizer st = new StringTokenizer(sc.nextLine());
      int b=1;
      while(st.hasMoreTokens()) {
        table1[a][b] = Integer.parseInt(""+st.nextToken());
        table2[a][b] = table1[a][b];
        b++;
      }
      table1[a][0] = (a+1);
      table2[a][0] = table1[a][0];
      total += table1[a][2];
      con[a] = false;
      fin[a] = false;
      lowest[a] = false;
    }
    //System.out.println(""+total);
    String str[] = new String[total];

    for(int c=0;c<total;c++) {
      /*
       * determines if a row should be considered
       * (! done and within the current time)
       */
      for(int d=0;d<z;d++) {
        if (table1[d][1]<=c&&!fin[d]) {
          con[d] = true;
        }
      }

      /*
       * determines the first low value
       * (the basis for the determining the
       * lowest value in each loop)
       */
      int low=0;
      for(int j=0;j<z;j++) {
        if(con[j]) {
          low = table1[j][2];
          break;
        }
      }

      /*
       * determines the lowest value among
       * the values considered
       */
      for(int k=0;k<z;k++) {
        if(table1[k][2]<low&&con[k]) {
          low = table1[k][2];
        }
      }

      /*
       * marks the lowest
       */
      for(int l=0;l<z;l++) {
        if(table1[l][2]==low) {
          lowest[l] = true;
          break;
        }
      }

      //this part does all the actions
      for(int f=0;f<z;f++) {
        if(lowest[f]) {
          table1[f][2] -= 1;
          if(table1[f][2]==0) {
            fin[f] = true;
            str[c] = ""+(f+1);
            break;
          }
        }
      }

      if(str[c]==null) str[c] = "0";

      //clearing
      for(int p=0;p<z;p++) {
        lowest[p] = false;
        con[p] = false;
      }
    }

    for(int n=0;n<total;n++) {
      if(str[n]!="0") {
        table2[Integer.parseInt(str[n])-1][5] = n+1;
      }
    }
    for(int t=0;t<nop;t++) {
      table2[t][4] = table2[t][5] - table2[t][1];
      table2[t][3] = table2[t][4] - table2[t][2];
    }

    System.out.println("\nP\tAT\tBT\tWT\tTT");
    for(int x=0;x<z;x++) {
      System.out.println(""+table2[x][0]+"\t"+table2[x][1]+"\t"+table2[x][2]+"\t"+table2[x][3]+"\t"+table2[x][4]+"\t");
    }
} 
```

这是输出：

```
enter the processes
4
Input ARRIVAL TIME and BURST TIME for process1:Input ARRIVAL TIME and BURST TIME for process2:0 2
Input ARRIVAL TIME and BURST TIME for process3:2 6
Input ARRIVAL TIME and BURST TIME for process4:6 5

P   AT  BT  WT  TT
1   0   0   0   0   
2   0   2   -2  0   
3   2   6   -8  -2  
4   6   5   -11 -6  

Process completed. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T17:22:42.753

我只是在这里猜测，您的代码格式几乎不可读。

数组从 0 开始，所以：

```
int b=1; 
```

可能需要改为

```
int b = 0; 
```

# jakarta-ee - 在共享 POJO 中使用依赖注入

> ID：12183090
> 
> 赞同：1
> 
> 时间：2012-08-29T17:08:13.200
> 
> 标签：jakarta-ee, jboss, dependency-injection, cdi

我想使用 Java EE 和 JBoss Application Server 实现绘画服务。

想象一个通过 URL 调用的方法

```
http://mypaint.com/apply?image=1&action=line&from=10,10&to=100,10 
```

它对 id 为 1 的图像应用一个动作。该动作是“从点 (10,10) 到点 (100,10) 画一条线”。

“应用”方法如下所示：

```
@Inject
private ImageProcessorServer processors

@GET
@Path("/apply")
public Response apply(
    @QueryParam(value = "image") int imageId,
    @QueryParam(value = "action") String action,
    //some parameters more...
) {
     … //check if user is allowed to access the image
     ImageProcessor processor = processors.get(imageId); 
       //get image processor by image id
     processor.apply(action/*, from, to*/);
} 
```

“ImageProcessorServer”看起来像这样：

```
@Singleton
@Startup
public class ImageProcessorServer {
   private Map<Integer, ImageProcessor> processors =
       new HashMap<Integer, ImageProcessor>();  
   @Lock(LockType.WRITE)
   public ImageProcessor get(int imageId) {
       ImageProcessor processor = processors.get(imageId);
       if(processor == null) {
           processor = new ImageProcessor(imageId);
           processors.put(imageId, processor);
       }
       return processor;
   }
} 
```

确保每个图像只生成一个 ImageProcessor 是一个单例（在互斥下生成 → Write-Lock）。

现在的问题：**如何在 ImageProcessor 类中注入我的数据访问对象（用于操作我的数据库）？**DAO 是简单的无状态 bean。我的 ImageProcessor 应该是这样的：

```
public class ImageProcessor {
   @Inject
   private ActionDao actionDao;
   private Image image;

   public ImageProcessor(int imageId) { … }

   public void apply(String action, ...) {
      //change image
      //actionDao.persist(actionObject)
   }
} 
```

但这不起作用。ActionDao 为 NULL。

我当前的解决方案是在使用 DAO 的每个方法中将 DAO 作为参数传递，如下所示：

```
public ImageProcessor(int imageId, ImageDao dao) { … }

public void apply(String action, …, ActionDao dao, ImageDao dao2, …) {
   //change image
   //dao.persist(actionObject)
} 
```

*具有相同图像 id 的请求共享相同的图像处理器很重要。一个客户端可以有多个具有不同图像 ID 的请求。*

在此链接下 [使用 POJO 中的依赖注入注入 EJB](https://stackoverflow.com/questions/1648888/using-dependency-injection-in-pojos-to-inject-ejbs) 据说可以使用工厂。但我不知道如何解决这个问题。有人可以为此提供代码吗？

有人知道解决我的问题的优雅方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T03:06:50.927

在您的情况下，您可以手动查找您的 bean。为此，您可以添加一个静态 util 方法来获取 bean 管理器：

```
 public static BeanManager getBeanManager()
 {
    try{
        InitialContext initialContext = new InitialContext();
        return (BeanManager) initialContext.lookup("java:comp/BeanManager");
    catch (NamingException e) {
        log.error("Couldn't get BeanManager through JNDI");
        return null;
    }
  } 
```

然后您可以在单例 EJB 中手动查找您的 bean，然后所有注入都将发生在您的 bean 中：

```
 public ImageProcessor getFacade()
 {
    BeanManager bm = getBeanManager();
    Bean<ImageProcessor> bean = (Bean<ImageProcessor>) bm.getBeans(ImageProcessor.class).iterator().next();
    CreationalContext<ImageProcessor> ctx = bm.createCreationalContext(bean);
    ImageProcessor ip= (ImageProcessor) bm.getReference(bean, ImageProcessor.class, ctx); // this could be inlined, but intentionally left this way
    return ip;
 } 
```

查找 bean 后，使用 setter 方法设置图像 id，然后将其放入地图中。

尝试制作一个用于手动查找 bean 的 util 类，然后您可以在整个项目中重用它。

Seam3、Myface CODI 和 DeltaSpike 也有一些实用程序来执行这些常规过程。

有关更多信息，请查看[此示例](http://dominikdorn.com/2010/04/cdi-weld-manual-bean-lookup/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T18:46:53.027

对于要注入的字段，bean 必须由 CDI 框架创建。

我可以找到几种“CDI”方式来创建，`ImageProcessor`但由于 imageId 的范围和处理器之间存在主席关系，它看起来不太好。（需要初始化的 FYI bean 应该通过`@Producer`带注释的方法创建）

解决该问题的最简单方法是将 DAO 注入单例中（因为它是无状态的，不应该成为问题）并通过构造函数将其提供给处理器（这将设置 DAO 字段）。这是我认为的清理方式，您将`ImageProcessor`创建仅限于单例）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T03:20:29.473

我找不到使用生产者方法的方法，因为 EJB 是单例的，并且所有注入都将在 EJB 创建时发生一次。

首先添加限定符注释：@ImageProcessor

然后定义一个生产者方法：

```
@produces  @ImageProcessor
public ImageProcessor getImageProcessor(){
  long imageId = // Get your image id from request parameter map
  ImageProcessor processor = new ImageProcessor(imageId);
  return processor;
} 
```

然后使用如果您在单例中使用注入，它将为所有图像注入一次，因为您的 EJB 是单例！

```
@Inject @ImageProcessor
private ImageProcessor ip; 
```

因此，对于您的用例，这不是一个好方法，除非您再次在 EJB 中使用手动查找，但另一个问题是生产者方法中的线程问题！

# recursion - 我在函数的最后一次递归调用中得到“方案应用程序不是过程”

> ID：12183096
> 
> 赞同：12
> 
> 时间：2012-08-29T17:08:26.087
> 
> 标签：recursion, if-statement, scheme, racket

所以这里是代码：

```
(define (time-prime-test n)
  (newline)
  (display n)
  (start-prime-test n (runtime)))

(define (start-prime-test n start-time)
  (if (prime? n)
      (report-prime (- (runtime) start-time))))

(define (report-prime elapsed-time)
  (display " *** ")
  (display elapsed-time))

(define (search-for-primes n m)
  (if (< n m) 
      ((time-prime-test n)
       (search-for-primes (+ n 1) m))
      (display " calculating stopped. ")))
(search-for-primes 100000 100020) 
```

在“计算停止”后出现此错误。已显示。如下所示：

> 100017 100018 100019 *** 54 计算停止。. . 申请：不是程序；期望一个可以应用于给
> 定参数的过程：#<void>
> arguments...:
> #<void>

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-29T17:20:20.547

您打算在 的后件部分内执行两个表达式`if`，但`if`只允许后件中的一个表达式和替代中的一个表达式。

将两个表达式括在括号之间（如您所做的那样）将不起作用：结果表达式将作为第一个表达式的函数应用程序进行评估，第二个表达式作为其参数，产生错误`"application: not a procedure; expected a procedure that can be applied to arguments ..."`，因为`(time-prime-test n)`不计算过程，它评估为`#<void>`。

您可以使用以下任一方法解决问题`cond`：

```
(define (search-for-primes n m)
  (cond ((< n m)
         (time-prime-test n)
         (search-for-primes (+ n 1) m))
        (else
         (display " calculating stopped. ")))) 
```

或`begin`：

```
(define (search-for-primes n m)
  (if (< n m)
      (begin
        (time-prime-test n)
        (search-for-primes (+ n 1) m))
      (display " calculating stopped. "))) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T17:12:25.517

```
 ((time-prime-test n)
   (search-for-primes (+ n 1) m)) 
```

这将尝试将结果应用`time-prime-test`为过程。`time-prime-test`不返回过程。使用`begin`：

```
 (begin
   (time-prime-test n)
   (search-for-primes (+ n 1) m)) 
```

# ios - 访问CoreData时分配的内存未释放？

> ID：12183099
> 
> 赞同：1
> 
> 时间：2012-08-29T17:08:39.013
> 
> 标签：ios, core-data, memory-management, one-to-many, nsmanagedobject

我正在构建一个新闻应用程序，您可以在其中拥有一系列代表实际文章的图像。当您点击其中一个时，它会打开主文章页面，该页面底部有一个包含相关文章的滚动视图。

我发现了一个关于底部滚动条的奇怪（可能与 CoreData 相关）问题。当我打开文章页面时，我会获取相关文章，分配一系列`articleViewControllers`并将它们的视图添加到滚动视图中。当我从文章页面切换时，我从滚动条中删除所有视图并释放`articleViewControllers`. 在使用 Instruments 和几个 heapshots（一个在点击文章之前，另一个在切换回主页时）时，我发现仍然分配了大量内存（见图）

![在此处输入图像描述](../Images/0dc3484e255f13daa7e07131f811e3e7.png)

![在此处输入图像描述](../Images/774c0927200d81728d8d8956f16f2e19.png)

查看非对象选项卡时，我发现大部分分配发生在以下代码行，采用上述`viewDidLoad`方法`articleViewController`：

```
 NSSet *tempSet = [[NSSet alloc] initWithSet:tempArticle.thumb];
    //tempArticle.thumb is the actual problem here
    [tempSet release] 
```

`tempArticle`是`Article`类的一个实例，是 NSManagedObject 的子类。如果我注释掉这两行代码，一切正常，所以我猜这是 CoreData 使用错误的结果。

任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T18:55:31.103

Core Data 处理自己的内存管理。它可以将对象保存在内存中或随心所欲地清除它们。

建议您不要在 NSManagedObjects 中存储大型 BLOB（例如图像）。相反，将图像存储到磁盘，其文件路径引用在 NSManagedObject 中。

# ios - 是否有任何开源软件包可用于在 iOS 上检测句子中的名词、动词等？

> ID：12183101
> 
> 赞同：0
> 
> 时间：2012-08-29T17:09:03.980
> 
> 标签：ios, nlp

因此，给定一个句子，例如“名叫 Jerry 的快速棕色狐狸跳过了懒狗”，我希望能够在 iOS 中调用一个函数，让我能够以编程方式识别名词、动词、副词等。

这样的包存在吗？我发现的似乎适用于其他平台（WordNet、openNLP 等）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T17:57:39.027

[`NSLinguisticTagger`](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/NSLinguisticTagger_Class/Reference/Reference.html#//apple_ref/occ/cl/NSLinguisticTagger)在 iOS 5+ 中可用。

# git - Mac OS X 恢复被 git rm 删除的文件

> ID：12183106
> 
> 赞同：0
> 
> 时间：2012-08-29T17:09:14.307
> 
> 标签：git, restore, rm

我只是搞砸了。它发生的方式是如此令人尴尬，我不会写下来:)

所以这是我的问题：

*   Github Repop 已删除
*   本地 repo 文件删除`git rm -r`
*   本地 repo 新初始化

有没有机会如何恢复我的数据？幸运的是，它处于该项目的非常早期阶段。

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T17:16:43.520

```
git reset HEAD 
```

如果您没有任何您关心的未提交更改，请使用

```
git reset --hard HEAD 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T17:16:57.250

我不确定我是否完全了解您本地回购的状态，但如果您所做的只是 a`git rm -r *`并承诺，那么一切都还在那里。您可以重置为之前的提交：

```
git reset --hard HEAD~1 
```

# php - PHP 代理 jQuery 部分到 javascript

> ID：12183110
> 
> 赞同：1
> 
> 时间：2012-08-29T17:09:31.603
> 
> 标签：php, javascript, jquery, ajax, proxy

这是在 jQuery 中完成的代码，目的是将其更改为 javascript。原始代码来自这里：[php proxy](http://benalman.com/code/projects/php-simple-proxy/examples/simple/)

这是要更改为 javascript 的 jQuery：

```
$(function(){

  // Handle form submit.
  $('#params').submit(function(){
    var proxy = 'ba-simple-proxy.php',
      url = proxy + '?' + $('#params').serialize();

      // Make GET request.
      $.get( url, function(data){

        $('#response')
          .html( '<pre class="brush:xml"/>' )
          .find( 'pre' ) // To make the lines proper and to frame the text.
            .text( data );

      });

    // Prevent default form submit action.
    return false;
  });
}); 
```

下面是 javascript 中的相同代码，尚未准备好。问题是目前它不合逻辑。

此处未包含的 html 表单位调用 ajaxcontent()。ajaxcontent() 创建 jQuery 的“.html”和“.text”部分。JQuery ".find" 目前可以忽略。

在 ajaxcontent() 中，首先创建“pre”标签，然后在其中添加类“brush:xml”。然后“createTextNode”从被询问的页面添加源代码。这是 jQuery 中的“（数据）”。这里代码失败了，因为 ajax 想把信息放到 id="response"，但是 ajaxcontent() 仍然需要做这行 "xelement.appendChild(xtext);" 将文本附加到“xelement”。

```
function loadajax() {
    var xmlhttp;
    if (window.XMLHttpRequest) {
        xmlhttp=new XMLHttpRequest();
        }
    else {
        xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.onreadystatechange=function() {
        if (xmlhttp.readyState==4 && xmlhttp.status==200) {
            document.getElementById("response").innerHTML=xmlhttp.responseText;
        }
    }

    var urlvar=(document.getElementById("url").value)

    xmlhttp.open("GET","ba-simple-proxy.php&url="+urlvar,true);
    xmlhttp.send();
}

function ajaxcontent() {
    var xelement=document.createElement("pre");
    xelement.className="brush:xml";
    var xtext=document.createTextNode( loadajax() );
    xelement.appendChild(xtext);
} 
```

任何建议如何使这项工作？jQuery 部分是一个工作示例，但 javascript 部分还没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T23:45:59.237

好的，这里是一个没有 jQuery 的 Ajax POST（以及[一个 JSFiddle](http://jsfiddle.net/a6xn9/13/)来查看它的运行情况，请注意，这使用了 JSFiddle[回显服务](http://doc.jsfiddle.net/use/echo.html)，它要求方法是 POST，这略有不同）：

```
<input id="url" value="http://google.com/"/>
<button id="Button">No jQuery POST</button>
<div id="response" style="border: dashed 1px black;"></div>

document.getElementById('Button').onclick = function() {
    var xmlhttp;
    if (window.XMLHttpRequest) {
        xmlhttp = new XMLHttpRequest();
    }
    else {
        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
    }
    xmlhttp.onreadystatechange = function() {
        if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
            document.getElementById("response").innerHTML = "Responce returned!<br/>Data:" + xmlhttp.responseText;
        }
    }

    var params = "html=" + escape(document.getElementById("url").value) + "&delay=3";
    xmlhttp.open("POST", "/echo/html/", true);
    xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
    xmlhttp.setRequestHeader("Content-length", params.length);
    xmlhttp.setRequestHeader("Connection", "close");

    xmlhttp.send(params);
} 
```

现在这就是为什么像 jQuery 这样的东西这么好，它们对开发人员隐藏了所有这些:)

# apache - 基于子域将非 HTTP 流量重定向到端口

> ID：12183112
> 
> 赞同：5
> 
> 时间：2012-08-29T17:09:36.863
> 
> 标签：apache, subdomain, port, minecraft

我正在努力让我的两台 Minecraft 服务器更易于访问。我尝试了一些解决方案，但到目前为止，没有一个有效。

我在 mysite.com:25560 上有一个普通的 Minecraft 服务器在监听，在 mysite.com:25570 上有一个 Tekkit Minecraft 服务器在监听。也就是说，两个 Minecraft 服务器都在同一台机器上运行。当用户使用指定的端口直接连接到服务器时，它们可以正常工作。

vanilla 服务器最初在 mysite.com:25565 上侦听，这是标准的 Minecraft 端口。我已对其进行了更改，因此我可以允许 Apache 在 mysite.com:25565 上侦听并适当地重定向流量，但到目前为止还没有奏效。

我想做的是将所有发送到 mine.mysite.com 的请求重定向到 mysite.com:25560，并将所有发送到 tekkit.mysite.com 的请求重定向到 mysite.com:25570。我了解 DNS 本身无法管理此重新路由，因为 DNS 仅处理域名和 IP 地址。

在朋友的建议下，我最近的尝试是重新配置 Apache，正如我之前所说，监听端口 25565 并将流量代理到正确的端口。这是我的 apache2.conf 的一部分：

```
Listen 25565

NameVirtualHost *:25565

<VirtualHost *:25565>
    ServerName tekkit.mysite.com
    ServerAlias www.mysite.com
    <Proxy *>
        Order allow,deny
        Allow from all
    </Proxy>
    ProxyPreservehost On
#   ProxyPass / www.mysite.com:25570/
    ProxyPassReverse / mysite.com:25570/
</VirtualHost>

<VirtualHost *:25565>
    ServerName mine.mysite.com
    ServerAlias www.mysite.com
    ProxyPreserveHost On
    <Proxy *>
        Order allow,deny
        Allow from all
    </Proxy>
#   ProxyPass / mysite.com:25560/
    ProxyPassReverse / mysite.com:25560/
</VirtualHost> 
```

ProxyPass 注释掉的行会导致 Apache 以错误 ProxyPass URL must be absolute！

为了看看我是否能让它正常工作，然后我尝试在各个地方替换[http://www.mysite.com:25560/60](http://www.mysite.com:25560/60)，虽然 Apache 确实启动没有任何错误，但用户无法连接到服务器. 我相信这是因为 Minecraft 服务器不会将 HTTP 请求重定向到服务器连接，无论可能是哪种协议。

这让我相信 Apache 在处理非 HTTP 请求方面没有帮助。如果我弄错了，如何让 Apache 正确地将子域流量重定向到端口？否则，任何人都可以建议一种没有 Apache 的方法吗？我可以访问所有标准的 Linux / Ubuntu 实用程序。我一直在寻找很长一段时间没有进展。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-03T14:54:11.963

**解决方案1：**

我不认为这适用于 Apache，因为你只能得到错误。在互联网上搜索了一段时间后，我发现了以下内容：[https](https://github.com/SirCmpwn/MCVHost) ://github.com/SirCmpwn/MCVHost 。我不确定它是否有效，但如果它有效，我认为它完全适合您的需求。

如果您在 Linux 上，您可能可以使用 Mono 运行它，因为我没有找到任何 Java 或 Python 等价物。

*编辑：我刚刚对其进行了测试，但它不适用于 1.4.6，因为协议已更改*

**解决方案 2（可能是最好的）：**

使用 Minecraft 自 1.3 起识别的 SRV 记录。[Multiplay 已在http://wiki.multiplay.co.uk/Minecraft/Hostnames](http://wiki.multiplay.co.uk/Minecraft/Hostnames)上发布了手册。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T17:17:32.087

我相信 iptables 会为你做这件事，假设你在 Linux 上：

```
iptables -A PREROUTING -t nat -i eth0 -p tcp --dport 25565 -j REDIRECT --to-port 25560 
```

您必须是 root 才能运行此命令，而且它不是永久性的。每次服务器重新启动时，您都必须运行它。

# symfony - 动态组织人员的领域对象设计

> ID：12183113
> 
> 赞同：0
> 
> 时间：2012-08-29T17:09:37.780
> 
> 标签：symfony, doctrine-orm, domain-driven-design, symfony-2.1, doctrine-odm

我有一个代表组织（无论是商业实体、棒球队还是播客）的基本实体“组织”。这是相当通用的。

这些组织中的每一个都可以有多个员工，每个员工可以是不同的类型。我们希望这是通用的和可变的，以便我们可以拥有一种或多种不同类型的员工（CEO、女服务员、教练、私人教练、经理、董事会成员）。有没有既定的方法来处理这个问题？

如果没有，对我的解决方案的任何反馈将不胜感激：

因此，我想通过在组织中拥有一名“员工”成员来代表这一点。Staff 将是“StaffMember”对象的集合，它们依次是：

```
StaffMember:
    person(a Person object)
    organization(an Organization object)(this may not be necessary if StaffMember is only used on an org)
    staffType

StaffType:
    title(string)
    significance(int) 
```

这看起来好吗？员工类型是我们可以根据需要创建的代表员工类型（主持人、首席执行官、首席财务官、董事会成员、教练等）的对象。因此，工作人员知道人员和类型。我们正在使用 MongoDB，因此“staff”属性可能是 StaffMembers 的嵌入式集合。

我只是想确保我没有忽略任何东西，所以任何反馈都将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T22:54:44.487

我们的产品也有类似的结构。这就是我们实现它的方式。

```
/** @MongoDB\Document(collection="companies") */
class Company
{
    // Properties

    /** @MongoDB\Id */
    protected $id;

    /** @MongoDB\String */
    protected $name;

    /** @MongoDB\ReferenceMany(targetDocument="Employee", mappedBy="company", cascade={"remove"}) */
    protected $employees;

    /** @MongoDB\ReferenceMany(targetDocument="Role", mappedBy="company", cascade={"remove"}) */
    protected $roles;
}

/**
 * @MongoDB\Document(collection="roles")
 * @MongoDB\UniqueIndex(keys={"title"="asc", "company"="asc"})
 */
class Role
{

    /** @MongoDB\Id */
    protected $id;

    /** @MongoDB\String */
    protected $title;

    /** @MongoDB\String */
    protected $description;

    /** @MongoDB\ReferenceMany(targetDocument="Employee", mappedBy="role") */
    protected $employees;

    /** @MongoDB\ReferenceOne(targetDocument="Company", inversedBy="roles") */
    protected $company;
}

/**
 * @MongoDB\Document
 * @MongoDB\DiscriminatorField(fieldName="type")
 * @MongoDB\DiscriminatorMap({"person"="Person", "employee"="Employee"})
 */
class Employee extends Person
{
    // Properties

    /** @MongoDB\String */
    protected $employeeId;

    /** @MongoDB\ReferenceOne(targetDocument="Role", inversedBy="employees") */
    protected $role;

    /** @MongoDB\ReferenceOne(targetDocument="Company", inversedBy="roles") */
    protected $company;
} 
```

这允许公司内的大量员工具有大量角色。这很方便，因为您可以通过公司参考轻松获取角色/员工列表，而无需将详细信息存储在公司文档中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T18:29:16.897

您应该考虑的一件事是组织中的预期工作人员数量。如果这个数字非常大，或者大于您在任何给定时刻希望在内存中拥有的数字，那么您可以考虑使用存储库而不是直接引用来实现此关联。这意味着组织类不会直接引用人员集合，而是必须使用存储库检索人员集合。[在此处](http://gorodinski.com/blog/2012/07/24/implementing-associations-with-references-or-repositories-in-domain-driven-design-ddd/)查看有关此内容的更多详细信息。

此外，请注意双向关联，例如 StaffMember 和 Organization 之间的关联。它们的建模成本低，但实施成本更高。基本上，尝试以不需要反向关系的方式设计系统。

# ruby-on-rails - Rails 数数文章

> ID：12183118
> 
> 赞同：0
> 
> 时间：2012-08-29T17:09:50.293
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

我试图在 article#index 中显示每篇文章有多少评论。

所以我有以下型号

```
resources Article do
 resources Comments do
 end
end 
```

我知道在每篇文章中我都可以执行以下操作，这将起作用：

```
@count = @article.comments.find(:all).count 
```

并且只显示在视图计数中。但是，当我在索引文件中并且不确定如何显示此事件 atm 存在多少评论时，问题就来了。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T17:14:28.337

文章控制器.rb

```
def index
  @articles = Article.all
end 
```

文章/index.html.erb

```
<% @articles.each do |article| %>
  comments in article <%= article.comments.count %>
<% end %> 
```

嵌套路由（文章中的评论）在创建/销毁评论路由方面更重要。还要确保`accepts_nested_attributes_for :comments`在您的文章模型中添加。这将允许您执行以下操作：

例如，在articles_controller.rb

```
def show
  @article = Article.find(params[:id])

  # creates a new comment object with atricle_id already initialized
  @comment = @article.comments.build
end 
```

**编辑**

如果您确实开始关心性能，我同意 Kitto 的评论。

添加此迁移：

```
class AddCommentsCountToArtices < ActiveRecord::Migration
  def change
    add_column :articles, :comments_count, :integer, null: false, default: 0
  end
end 
```

并将您的 Comment 模型中的关系声明更改为：

```
belongs_to :article, counter_cache: true 
```

然后你可以像这样调用`article.comments_count`来获取 count 而不是`atricle.comments.count`. 如果计数为 0，那就太好了，因为它甚至不进行查询（Rails 3 Way 的第 195 页）。

如果您对 counter_cache 的工作原理感到好奇：它会向所属类（在本例中为 Comment 类）添加一个回调，该回调会在每次创建或销毁评论时更新父文章的 comments_counter 属性。

此外，正如Obie Fernandez所[展示](http://blog.obiefernandez.com/content/2011/08/adding-a-counter-cache-to-existing-records.html)的，counter_cache 功能可以轻松添加到现有数据库中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T17:16:47.297

在articles#index 中，您可以遍历包含所有文章的实例变量。您的视图应如下所示：

```
@articles.each do |article|
  article.name
  .
  .
  article.comments.count
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T17:19:59.620

```
@article.comments 
```

将给出@article 的所有评论。您不需要指定如下

```
@article.comments.find(:all) 
```

要显示每篇文章的评论数，请执行

```
%table
  %thead
  %tbody
    - @articles.each do |article|
      %tr
      = article.comments.count 
```

视图是在haml

# html - ajaxForm 突然不提交

> ID：12183123
> 
> 赞同：0
> 
> 时间：2012-08-29T17:10:16.943
> 
> 标签：html, ajax, form-submit, ajaxform

ajaxForm 突然停止工作。我制作了一个带有图片上传的表单，并使用 ajaxForm 将其提交到 php 页面。它奏效了，我继续做剩下的。现在我已经做了一个编辑功能，我发现 ajaxForm 不再提交了。

我花了几个小时寻找和调试，但我没有发现任何错误。

完整的 AJAX 代码：

```
 <SCRIPT type="TEXT/JAVASCRIPT" src="http://code.jquery.com/jquery-latest.js"></SCRIPT>
                <SCRIPT type="TEXT/JAVASCRIPT" src="http://malsup.github.com/jquery.form.js"></SCRIPT>
                <SCRIPT type="TEXT/JAVASCRIPT">                 
                function edit_product(btn_id, edit_type) {
                var ajaxRequest;

                    try {
                        //opera 8.0+, firefox, safari..
                        ajaxRequest = new XMLHttpRequest();
                        }
                        catch (e){
                        // internet explorer browsers
                        try {
                            ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
                            }
                            catch (e) {
                                try {
                                ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
                                    }
                                    catch (e) {
                                        //something went wrong
                                        alert("Your browser doesn't support ajax, which is needed for our website functionality. Please update your browser or install a new browser");
                                        return false;
                                                }
                                        }
                                }
                ajaxRequest.onreadystatechange = function() {
                if(ajaxRequest.readyState == 4) {
                $('#DIV_MODIFY_PRODUCT').empty();
                $('#DIV_MODIFY_PRODUCT').slideToggle(250);
                var ajaxDisplay = document.getElementById('DIV_MODIFY_PRODUCT');
                ajaxDisplay.innerHTML = ajaxRequest.responseText;
                                                }
                                                            }
                var e_id = btn_id;
                var e_type = edit_type;
                var get_string = "?search="+e_id+"&type="+e_type;

                ajaxRequest.open("GET", "elcoma_edit_product.php" + get_string, true);
                ajaxRequest.send(null);
                }

                function search_emails() {
                var ajaxRequest;

                    try {
                        //opera 8.0+, firefox, safari..
                        ajaxRequest = new XMLHttpRequest();
                        }
                        catch (e){
                        // internet explorer browsers
                        try {
                            ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
                            }
                            catch (e) {
                                try {
                                ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
                                    }
                                    catch (e) {
                                        //something went wrong
                                        alert("Your browser doesn't support ajax, which is needed for our website functionality. Please update your browser or install a new browser");
                                        return false;
                                                }
                                        }
                                }
                ajaxRequest.onreadystatechange = function() {
                if(ajaxRequest.readyState == 4) {
                var ajaxDisplay = document.getElementById('EMAIL_SEARCH_DIV_RESULTS');
                ajaxDisplay.innerHTML = ajaxRequest.responseText;
                                                }
                                                            }
                    var e_name = document.getElementById('E_SEARCHBAR').value;
                    var e_option = document.getElementById('E_SEARCH_SELECT').value;
                    var get_string = "?search="+e_name+"&option="+e_option;

                ajaxRequest.open("GET", "elcoma_check_emails.php" + get_string, true);
                ajaxRequest.send(null);
                }
                </SCRIPT>
                <SCRIPT type="TEXT/JAVASCRIPT">
                function search_product() {
                var ajaxRequest;

                    try {
                        //opera 8.0+, firefox, safari..
                        ajaxRequest = new XMLHttpRequest();
                        }
                        catch (e){
                        // internet explorer browsers
                        try {
                            ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
                            }
                            catch (e) {
                                try {
                                ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
                                    }
                                    catch (e) {
                                        //something went wrong
                                        alert("Your browser doesn't support ajax, which is needed for our website functionality. Please update your browser or install a new browser");
                                        return false;
                                                }
                                        }
                                }
                ajaxRequest.onreadystatechange = function() {
                if(ajaxRequest.readyState == 4) {
                var ajaxDisplay = document.getElementById('P_SEARCH_DIV_RESULTS');
                ajaxDisplay.innerHTML = ajaxRequest.responseText;
                                                }
                                                            }
                    var p_name = document.getElementById('P_SEARCHBAR').value;
                    var p_option = document.getElementById('P_SEARCH_SELECT').value;
                    var get_string = "?search="+p_name+"&option="+p_option;

                ajaxRequest.open("GET", "elcoma_search_product.php" + get_string, true);
                ajaxRequest.send(null);
                }
                </SCRIPT>
                <SCRIPT type="TEXT/JAVASCRIPT">
                    $(document).ready(function () { 

                    $('#nav LI').hover(
                    function () {
                    //show its submenu
                    $('UL', this).stop().slideDown(200);

                    }, 
                    function () {
                        //hide its submenu
                        $('UL', this).stop().slideUp(200);          
                    }
                    );

                    $('A#ID_NEW_PROJECT').click(function() {
                    $('#DIV_NEW_PROJECT').slideToggle(250);

                    return false;
                    });

                    $('A#ID_SRCH_PROJECT').click(function() {
                    $('#DIV_SRCH_PROJECT').slideToggle(250);

                    return false;
                    });

                    $('A#ID_NEW_CONTACT').click(function() {
                    $('#DIV_NEW_CONTACT').slideToggle(250);

                    return false;
                    });

                    $('A#ID_SRCH_CONTACT').click(function() {
                    $('#DIV_SRCH_CONTACT').slideToggle(250);

                    return false;
                    });

                    $('A#ID_NEW_PRODUCT').click(function() {
                    $('#DIV_NEW_PRODUCT').slideToggle(250);

                    return false;
                    });

                    $('A#ID_SRCH_PRODUCT').click(function() {
                    $('#DIV_SRCH_PRODUCT').slideToggle(250);

                    return false;
                    });

                    $('A#ID_CALCULATOR').click(function() {
                    $('#DIV_CALCULATOR').slideToggle(250);

                    return false;
                    });

                    $('A#ID_CONVERTER').click(function() {
                    $('#DIV_CONVERTER').slideToggle(250);

                    return false;
                    });

                    $('A#ID_REMINDER').click(function() {
                    $('#DIV_REMINDER').slideToggle(250);

                    return false;
                    });

                    $('A#ID_EMAIL').click(function() {
                    $('#DIV_CHECK_EMAIL').slideToggle(250);

                    return false;
                    });

                    $('#SAVE_NEW_PRODUCT').click(function() {
                        $('#NEW_PROJECT_FORM').ajaxForm(
                            {
                            target: '#MAIN_IMAGE_PREVIEW'
                            }).submit();
                    });

                    $('#SAVE_NEW_CONTACT').click(function() {
                        $('#NEW_CONTACT_FORM').ajaxForm(
                            {
                            target: '#CONTACT_PREVIEW'
                            }).submit();
                    });

                    $(document).on("click", '#SAVE_EDIT_PRODUCT', function(event) {
                        $('#EDIT_PROJECT_FORM').ajaxForm(
                            {
                            beforeSubmit: function() {
                            $('#MAIN_EDIT_DIV').empty();
                            },
                            target: '#EDIT_MAIN_IMAGE_PREVIEW'
                            }).submit();
                    });
                    });
                </SCRIPT> 
```

仅 AJAXFORM 提交部分：

```
 $('#SAVE_NEW_PRODUCT').click(function() {
                        $('#NEW_PROJECT_FORM').ajaxForm(
                            {
                            target: '#MAIN_IMAGE_PREVIEW'
                            }).submit();
                    }); 
```

表格代码：

```
<DIV ID="DIV_NEW_PRODUCT" CLASS="CONTENT_DIV">
                    <FORM ID="NEW_PROJECT_FORM" METHOD="POST" ACTION="elcoma_new_product.php" ENCTYPE="MULTIPART/FORM-DATA">
                    <FIELDSET>
                    <LABEL CLASS="NORMAL_LABEL" STYLE="COLOR: DARKBLUE">NEW PRODUCT</LABEL>
                    <BR>
                    <DIV ID="MAIN_IMAGE_PREVIEW"></DIV>
                    <DIV ID="GAL1_IMAGE_PREVIEW"></DIV>
                    <DIV ID="GAL2_IMAGE_PREVIEW"></DIV>
                            <HR>
                            <LABEL CLASS="NORMAL_LABEL" FOR="P_NAME">NAME</LABEL>
                            <INPUT TYPE="TEXT" ID="P_NAME" NAME="P_NAME">
                            <LABEL CLASS="ERROR_LABEL" ID="P_NAME_ERROR" STYLE=" COLOR: RED" >
                            (!) PRODUCT NAME MISSING
                            </LABEL>
                            <BR>
                            <LABEL CLASS="NORMAL_LABEL" FOR="P_TYPE">TYPE</LABEL>
                            <INPUT TYPE="TEXT" ID="P_TYPE" NAME="P_TYPE">
                            <LABEL CLASS="ERROR_LABEL" ID="P_TYPE_ERROR" STYLE=" COLOR: RED" >
                            (!) PRODUCT TYPE MISSING
                            </LABEL>
                            <BR>
                            <LABEL CLASS="NORMAL_LABEL" FOR="P_MANUFACTURER">MANUFACTURER</LABEL>
                            <INPUT TYPE="TEXT" ID="P_MANUFACTURER" NAME="P_MANUFACTURER">
                            <LABEL CLASS="ERROR_LABEL" ID="P_MANUFACTURER_ERROR" STYLE=" COLOR: RED" >
                            (!) MANUFACTURER NAME MISSING
                            </LABEL>
                            <BR>
                            <LABEL CLASS="NORMAL_LABEL" FOR="P_QUANTITY">QUANTITY</LABEL>
                            <INPUT TYPE="TEXT" ID="P_QUANTITY" NAME="P_QUANTITY">
                            <LABEL CLASS="ERROR_LABEL" ID="P_QUANTITY_ERROR" STYLE=" COLOR: RED" >
                            (!) QUANTITY MISSING
                            </LABEL>        
                            <BR>
                            <LABEL CLASS="NORMAL_LABEL" FOR="P_BIG_PRICE">PRICE-WHOLESALE</LABEL>
                            <INPUT TYPE="TEXT" ID="P_BIG_PRICE" NAME="P_BIG_PRICE">
                            <LABEL CLASS="ERROR_LABEL" ID="P_BIG_PRICE_ERROR" STYLE=" COLOR: RED" >
                            (!) PRICE-WHOLESALE MISSING
                            </LABEL>        
                            <BR>
                            <LABEL CLASS="NORMAL_LABEL" FOR="P_SINGLE_PRICE">PRICE-SINGLE</LABEL>
                            <INPUT TYPE="TEXT" ID="P_SINGLE_PRICE" NAME="P_SINGLE_PRICE">
                            <LABEL CLASS="ERROR_LABEL" ID="P_SINGLE_PRICE_ERROR" STYLE=" COLOR: RED" >
                            (!) PRICE-SINGLE MISSING
                            </LABEL>        
                            <BR>
                            <HR>
                            <LABEL CLASS="NORMAL_LABEL" FOR="P_DESC_EN">DESCRIPTION-EN</LABEL>
                            <TEXTAREA ID="P_DESC_EN" NAME="P_DESC_EN" COL="15" ROWS="10"></TEXTAREA>
                            <LABEL CLASS="ERROR_LABEL" ID="P_DESC_EN_ERROR" STYLE=" COLOR: RED" >
                            (!) DESCRIPTION-EN MISSING
                            </LABEL>
                            <BR>
                            <LABEL CLASS="NORMAL_LABEL" FOR="P_DESC_MK">DESCRIPTION-MK</LABEL>
                            <TEXTAREA ID="P_DESC_MK" NAME="P_DESC_MK" COL="15" ROWS="10"></TEXTAREA>
                            <LABEL CLASS="ERROR_LABEL" ID="P_DESC_MK_ERROR" STYLE=" COLOR: RED" >
                            (!) DESCRIPTION-MK MISSING
                            </LABEL>
                            <BR>
                            <LABEL CLASS="NORMAL_LABEL" FOR="P_SHORT_DESC_EN">SHORT DESC-EN</LABEL>
                            <TEXTAREA ID="P_SHORT_DESC_EN" NAME="P_SHORT_DESC_EN" COL="5" ROWS="5"></TEXTAREA>
                            <LABEL CLASS="ERROR_LABEL" ID="P_SHORT_DESC_EN_ERROR" STYLE=" COLOR: RED" >
                            (!) SHORT DESC-EN MISSING
                            </LABEL>
                            <BR>
                            <LABEL CLASS="NORMAL_LABEL" FOR="P_SHORT_DESC_MK">SHORT DESC-MK</LABEL>
                            <TEXTAREA ID="P_SHORT_DESC_MK" NAME="P_SHORT_DESC_MK" COL="5" ROWS="5"></TEXTAREA>
                            <LABEL CLASS="ERROR_LABEL" ID="P_SHORT_DESC_MK_ERROR" STYLE=" COLOR: RED" >
                            (!) SHORT DESC-MK MISSING
                            </LABEL>
                            <HR>
                            <BR>
                            <LABEL CLASS="NORMAL_LABEL" FOR="P_MAIN_IMAGE">MAIN IMAGE</LABEL>
                            <INPUT TYPE="FILE" ID="P_MAIN_IMAGE" NAME="P_MAIN_IMAGE">
                            <LABEL CLASS="ERROR_LABEL" ID="P_MAIN_IMAGE_ERROR" STYLE=" COLOR: RED" >
                            (!) MAIN IMAGE MISSING
                            </LABEL>
                            <BR>
                            <LABEL CLASS="NORMAL_LABEL" FOR="P_GAL1_IMAGE">GALLERY IMAGE-1</LABEL>
                            <INPUT TYPE="FILE" ID="P_GAL1_IMAGE" NAME="P_GAL1_IMAGE">
                            <LABEL CLASS="ERROR_LABEL" ID="P_GAL1_IMAGE_ERROR" STYLE=" COLOR: RED" >
                            (!) GALLERY IMAGE 1 MISSING
                            </LABEL>    
                            <BR>
                            <LABEL CLASS="NORMAL_LABEL" FOR="P_GAL2_IMAGE">GALLERY IMAGE-2</LABEL>
                            <INPUT TYPE="FILE" ID="P_GAL2_IMAGE" NAME="P_GAL2_IMAGE">
                            <LABEL CLASS="ERROR_LABEL" ID="P_GAL2_IMAGE_ERROR" STYLE=" COLOR: RED" >
                            (!) GALLERY IMAGE 2 MISSING
                            </LABEL>
                            <BR>
                            <HR>
                            <INPUT TYPE="BUTTON" NAME="NEW_PRODUCT_COPY" ID="COPY_NEW_PRODUCT" VALUE="Copy Last" CLASS="FORM_BUTTONS">
                            <INPUT TYPE="BUTTON" NAME="NEW_PRODUCT_RESET" ID="RESET_NEW_PRODUCT" VALUE="Reset" CLASS="FORM_BUTTONS">
                            <INPUT TYPE="BUTTON" NAME="NEW_PRODUCT_SAVE" ID="SAVE_NEW_PRODUCT" VALUE="Save" CLASS="FORM_BUTTONS">
                    </FIELDSET>
                    </FORM>
                </DIV> 
```

PHP文件：

```
 <?php
            $path = "products/";
        $temp = $_FILES['P_MAIN_IMAGE']['tmp_name'];
        $name = $_FILES['P_MAIN_IMAGE']['name'];
        $temp_gal1 = $_FILES['P_GAL1_IMAGE']['tmp_name'];
        $name_gal1 = $_FILES['P_GAL1_IMAGE']['name'];
        $temp_gal2 = $_FILES['P_GAL2_IMAGE']['tmp_name'];
        $name_gal2 = $_FILES['P_GAL2_IMAGE']['name'];

        $p_name = ($_POST['P_NAME']);
        $p_type = ($_POST['P_TYPE']);
        $p_manu = ($_POST['P_MANUFACTURER']);
        $p_quant = ($_POST['P_QUANTITY']);
        $price_plural = ($_POST['P_BIG_PRICE']);
        $price_single = ($_POST['P_SINGLE_PRICE']);

        $long_desc_en = ($_POST['P_DESC_EN']);
        $long_desc_mk = ($_POST['P_DESC_MK']);
        $short_desc_en = ($_POST['P_SHORT_DESC_EN']);
        $short_desc_mk = ($_POST['P_SHORT_DESC_MK']);

        move_uploaded_file($temp, $path.$name);
        move_uploaded_file($temp_gal1, $path.$name_gal1);
        move_uploaded_file($temp_gal2, $path.$name_gal2);
        echo "<img src='products/".$name."' class='MAIN_IMAGE_PREVIEW' width='150px' height='150px'><BR>";
        echo "<img src='products/".$name_gal1."' class='GAL1_IMAGE_PREVIEW' width='150px' height='150px'><BR>";
        echo "<img src='products/".$name_gal2."' class='GAL2_IMAGE_PREVIEW' width='150px' height='150px'><BR>";
        echo "<LABEL STYLE='COLOR: DARKGREEN'>New product successfully saved! Name: ".$p_name."</LABEL>";

$pattern = "/[^a-zA-Z0-9-.@]/";
$pattern2 = "/[^0-9.]/";
$pattern3 = "/[^a-zA-Z]/";
$replace = " "; 
$replace2 = "";

$clean_name = preg_replace($pattern, $replace2, $p_name);
$clean_manufacturer = preg_replace($pattern, $replace2, $p_manu);
$clean_wholesale = preg_replace($pattern2, $replace2, $price_plural);
$clean_retail = preg_replace($pattern2, $replace2, $price_single);
$clean_quantity = preg_replace($pattern2, $replace2, $p_quant);
$clean_type = preg_replace($pattern3, $replace2, $p_type);

mysql_connect("localhost", "root", "") or die(mysql_error()); 
mysql_select_db("elcomass") or die(mysql_error()); 
$result = mysql_query("INSERT INTO alpha_p_main 
(alpha_p_name_en, alpha_p_long_desc_en, alpha_p_long_desc_mkd, alpha_p_short_desc_en,          alpha_p_short_desc_mkd, alpha_p_firm_owner, alpha_p_imglink_main, alpha_p_imglink_gal1, alpha_p_imglink_gal2, alpha_p_search_d_for, alpha_p_search_d_cont, alpha_p_quantity, alpha_p_price_retail, alpha_p_price_wholesale, alpha_p_type
) VALUES 
('$clean_name', '$clean_long_desc_en', '$clean_long_desc_mk', '$clean_short_desc_en',   '$clean_short_desc_mk', '$clean_manufacturer', '$name', '$name_gal1', '$name_gal2', '0',   '0', '$clean_quantity', '$clean_retail', '$clean_wholesale', '$clean_type' )"); 
if(!$result)
{
echo "Error! ".mysql_error();
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T17:26:22.123

您的问题不是您发布的代码。它工作正常。必须与您的目标 .php 文件有关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T18:47:25.337

我现在就去打自己的膝盖。我忘记了一个`</form>`结束标签。

# perl - 制作散列的散列

> ID：12183124
> 
> 赞同：2
> 
> 时间：2012-08-29T17:10:17.640
> 
> 标签：perl, design-patterns, hash

我有一个包含不同行的文件，每一行都有一个重复的模式。我需要一个合适的数据结构来解析我的文件，例如：

```
cluster1:gene1(genome1) gene2(genome2) gene3(genome3)
cluster2:gene4(genome4) gene5(genome5) 
```

*名字是任意的，可以是任何东西。*

我想过一个散列数据结构的散列

```
 %hoh=("cluster1" => {
        "gene1"=>"genome1"
        "gene2"=>"genome2"
        "gene2"=>"genome2"
                       },   "cluster2" => {
        "gene4"=>"genome4"
        "gene5"=>"genome5"
                       }
       ) 
```

我有 2 个问题：首先：如何在每行中查找重复的模式？

其次，我如何制作哈希哈希？

编辑：根据 Zaid 的要求发布

```
#!/usr/bin/perl -w
use strict; use warnings;
    my %HoH;
while(<DATA>){
    my $line=$_;
    chomp($line);
    my ( $cluster, $genes ) = split (/:/,$line);

     $HoH{ $cluster } = { split/[( )]+/ , $genes };

  }  
foreach $cluster (keys %HoH){
    print "$cluster: ";
    foreach $genes (keys %{$HoH{$cluster}}){
        print "$genes = $HoH{$cluster}{$genes} ";
    }
    print "\n";
}                                               

__DATA__
cluster1:gene1(genome1) gene2(genome2) gene3(genome3)
cluster2:gene4(genome4) gene5(genome5) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T17:23:26.567

当 OP 发布他们的尝试时要遵循的解释：

```
my %HoH;

while (<>) {

    chomp;
    my ( $cluster, $genes ) = split /:/;

    $HoH{ $cluster } = { split /[( )]+/, $genes };
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T17:18:41.300

假设模式始终遵循`AAA:BBB(CCC) DDD(EEE) FFF(GGG)...`，您可以使用以下算法：

1.  阅读每一行
2.  拆分`:`，阅读第一部分作为你的关键
3.  用空格分割剩余部分，然后使用正则表达式进行解析，例如： `([^(]+)\(([^)])\)`
4.  从正则表达式中捕获的组创建内部哈希
5.  Set `$hoh{key from step 2}`= 来自第 4 步的哈希

未经测试，但类似于以下内容（哈希引用有点不确定，但你明白了）：

```
while(<>) {
    ($key, $rest) = split ':';
    @genes = split ' ', $rest;
    my %h;
    foreach $gene (@genes) {
        ($k, $v) = split /[\(\)]/, $gene;
        $h{$k} = $v;
    }
    $hoh{$key}=\%h;        
} 
```

不过，可能有一种更优雅的 PERL-y 方式来做到这一点:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T13:57:08.343

```
#!/usr/bin/perl -w
use strict; use warnings;
    my %HoH;
    while(<DATA>){
        my $line=$_;
        chomp($line);
        my ( $cluster, $genes ) = split (/:/,$line);

        $HoH{ $cluster } = { split/[( )]+/ , $genes };

    }  
    foreach my $cluster (keys %HoH){
        print "$cluster: ";
        foreach my $genes (keys %{$HoH{$cluster}}){
            print "$genes = $HoH{$cluster}{$genes} ";
        }
    print "\n";
    } 
```

__数据__

集群1：基因1（基因组1）基因2（基因组2）基因3（基因组3）

簇2：基因4（基因组4）基因5（基因组5）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T17:55:14.660

假设您不需要担心与预期输入不匹配的行，您可以使用单个[`split`](http://p3rl.org/split).

```
while( <DATA> ){
  chomp;
  next unless $_; # skip blank lines

  my($key,%value) = split /[:()\s]+/;
  $data{$key} = \%value;
} 
```

# ruby-on-rails - Rails 检查字符串中的符号

> ID：12183126
> 
> 赞同：0
> 
> 时间：2012-08-29T17:10:21.973
> 
> 标签：ruby-on-rails, ruby

我是 rails 和 ruby​​ 中的 nubbie 在我的应用程序中，我从 csv 获取数据，并且在某些数量字段中，值是 100> 等等。但是如何检查呢？并只选择整数（浮点）部分？但请注意！它可以是 <20、>30、30< 等等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T18:04:57.073

如果您有浮点数（不仅仅是整数部分），您可以使用 Justin Ko 解决方案的一个小变体：

```
values = ["10.1>", "<20.3", ">30.4", "30.6<"]
values.each do |val|
  puts /(\d+\.\d+)/.match(val)[0].to_f
end

# => Output will be 10.1 20.3 30.4 30.6 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T17:21:41.410

您可以使用正则表达式来获取字段的数字部分。

正则表达式很简单`/(\d+)/`。

这是一个例子：

```
values = ['<20', '>30', '30<']
values.each do |val|
    puts /(\d+)/.match(val)[0].to_i
end
# => 20, 30, 30 
```

# php - 在 PHP 中设置绝对 include_path

> ID：12183129
> 
> 赞同：0
> 
> 时间：2012-08-29T17:10:39.307
> 
> 标签：php, include

我有许多类（经理和数据）有`include_once`'s. 似乎当我将数据类包含到管理器中时，它们可以很好地协同工作......但是当我在视图中包含管理器类以获取数据时，它就坏了。我假设由于视图实际上将管理添加到自身，这使得数据的路径不正确，因为视图是从根目录开始的 3 个目录，`/adoptions/apps/add/`而管理器和数据类是从根目录开始的 4 个目录。那是对的吗？

因为我是 PHP 新手，所以我注意到 / 让我回到了更远的位置，而不仅仅是 web 根目录。我在 Windows 机器上运行 apache，htdoc 的路径实际上是

```
c:/Program Files(x86)/Zend/Apache2/htdocs/mywebsite 
```

（如果这有帮助的话）。我只想让我所有的包含都像

```
 include_once('/com/mywebsite/data/people/People.class.php'; 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T17:19:51.480

您需要在安装文件中设置该`include_path`属性。`php.ini`如果您愿意，清除现有条目，或添加分号，然后`c:/Program Files(x86)/Zend/Apache2/htdocs`

然后所有的路径都将是相对的，所以你可以去`include("/mywebsite/data/people/People.class.php");`

或者，您可以在 .htaccess 文件中执行此操作：

```
php_value include_path ".;c:/Program Files(x86)/Zend/Apache2/htdocs" 
```

或您的 php 本身中的这两种方法之一：

```
ini_set("include_path",".;c:/Program Files(x86)/Zend/Apache2/htdocs"); 
```

或者`set_include_path(".;c:/Program Files(x86)/Zend/Apache2/htdocs");`

# java - Windows : 删除目录

> ID：12183132
> 
> 赞同：0
> 
> 时间：2012-08-29T17:10:43.117
> 
> 标签：java, windows

```
org.eclipse.core.runtime.CoreException: Could not move: C:\gram\zmedia.
    at org.eclipse.core.internal.filesystem.Policy.error(Policy.java:55)
    at org.eclipse.core.filesystem.provider.FileStore.move(FileStore.java:415)
    at org.eclipse.core.internal.filesystem.local.LocalFile.move(LocalFile.java:352)
    at com.zmedia.zide.config.model.Service.updateDeploymentSetup(Service.java:923)
    at com.zmedia.zide.config.model.Service.update(Service.java:886)
    at com.zmedia.zide.util.ServiceAPI.create(ServiceAPI.java:239)
    at com.zmedia.zide.ui.wizards.pages.CreateServicePage$5.run(CreateServicePage.java:525)
    at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121)
Caused by: org.eclipse.core.runtime.CoreException: Problems encountered while deleting files.
    at org.eclipse.core.internal.filesystem.local.LocalFile.delete(LocalFile.java:125)
    at org.eclipse.core.filesystem.provider.FileStore.move(FileStore.java:411)
    ... 6 more 
```

大家好 ，

我们在 eclipse 之上开发了一个插件。我们为用户提供了一个选项，可以在 eclipse 中删除他们的旧项目。

**问题：** 如果在此目录上打开文件或任何进程在删除操作时使用其目录，则会出现问题。此问题仅适用于 windows 用户。

有没有办法强制删除windows上的目录？

我怎样才能像这样通知用户“**这个进程正在使用我们的目录。请关闭这个进程并继续**”。

有没有办法知道哪个进程正在访问它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T11:49:42.877

您可以使用[Unlocker](http://www.emptyloop.com/unlocker)，它具有可移植版本和命令行选项（取决于其许可证），您可以将它与您的插件一起发布并通过命令行使用它来解锁使用的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T17:17:08.687

> 有没有办法强制删除windows上的目录？

您可以杀死持有锁的进程或要求用户关闭该进程。不幸的是，这可能是日食过程本身或资源管理器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T08:57:19.340

在调试情况下，要知道哪个进程正在使用文件，您可以使用[此处描述](http://windowsxp.mvps.org/processlock.htm)的出色的 Process Explorer 。

AFAIK，Java SDK 没有简单的方法可以知道哪个进程正在使用它。

您可以做的是将文件标记为 deleteOnExit() 并且当用户实际退出 Eclipse 时它将被删除。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T19:36:29.870

可能是您自己的锁定文件的插件。在尝试删除之前尝试实施一种方法/策略来“释放”它们。您可以使用 Apache Commons IO 来帮助您构建/识别它。看看[FileDeleteStrategy](http://commons.apache.org/io/api-release/org/apache/commons/io/FileDeleteStrategy.html)。还要检查“FORCE”选项。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T07:16:05.133

我怀疑仅在 Java 中是否有很好的方法可以找出阻止您删除文件夹的进程。这也可能有点激进。如果您无法移动并显示一个对话框，其中列出了无法移动（或删除）的项目，那么为什么不复制，以便用户可以自己处理它。毕竟，文件保持打开状态可能是有原因的。

# c# - 我可以让 .NET app.config 文件驻留在应用程序目录之外吗

> ID：12183135
> 
> 赞同：2
> 
> 时间：2012-08-29T17:10:58.687
> 
> 标签：c#, .net, c#-4.0, configuration

我正在努力满足客户的要求，即我正在编写的 Windows 窗体应用程序将安装到 C:\program files\xxx 并将在一个没有写入权限的帐户下运行 c:\program files\xxx 目录. 因此，这意味着我的配置文件需要位于另一个位置，以便用户可以对其进行手动更改，而我的应用程序可以对其进行更改。

我无论如何都找不到这样做？我希望我可以使用 configSource 但这有一些限制，即外部配置文件应该与应用程序位于相同的相对物理路径，这对我没有好处。appSettings 文件属性会起作用，但这仅适用于该配置部分。我使用其他配置部分，如连接字符串和 system.serviceModel。对我的选择有什么想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T17:18:51.170

[应用程序设置](http://msdn.microsoft.com/en-us/library/k4s6c3a0.aspx)框架自动处理用户范围的设置。

您可以将*默认*设置放在`app.Config`文件中，并提供一种机制（在您的程序中）来编辑设置。任何编辑都将自动写入*用户文档文件夹*（他们拥有写入权限）中的用户特定设置文件中。没有必要让`app.Config`每个用户都可以直接写实际。

只需在元素中包含“可写”设置默认值`<userSettings>`，框架就会按照正确的 Windows 指南为您处理所有内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T17:23:58.383

试试下面的代码

```
    私有静态 XmlDocument loadConfigDocument()
    {
        XmlDocument 文档 = null;
        尝试
        {
            doc = new XmlDocument();
            doc.Load(getConfigFilePath());
            返回文件；
        }
        捕捉（System.IO.FileNotFoundException e）
        {
            throw new Exception("没有找到配置文件。", e);
        }
    }

    私有静态字符串 getConfigFilePath()
    {
        返回 Assembly.GetExecutingAssembly().Location + ".config";
    }

```

# r - 用R计算黄土拟合曲线的最小/最大斜率？

> ID：12183137
> 
> 赞同：5
> 
> 时间：2012-08-29T17:11:02.783
> 
> 标签：r, ggplot2, curve-fitting

**相关：** [R: Marking slope changes in LOESS curve using ggplot2](https://stackoverflow.com/questions/8245792/r-marking-slope-changes-in-loess-curve-using-ggplot2)
[This question is trying to find the min/max y (slope=0); 我想找到最小值/最大值]

作为背景，我正在执行一些不同的建模技术，并认为在迭代神经网络结果时，我可能会使用斜率来衡量随机种子产生的最佳模型。

获取数据：

```
nn <- read.csv("http://pastebin.com/raw.php?i=6SSCb3QR", header=T)
rbf <- read.csv("http://pastebin.com/raw.php?i=hfmY1g46", header=T) 
```

例如，以下是经过训练的神经网络对我的数据的结果：

```
library(ggplot2)
ggplot(nn, aes(x=x, y=y, colour=factor(group))) + 
geom_point() + stat_smooth(method="loess", se=F) 
```

![nn](../Images/7374e2a38d54a62fa74d0df0969eb85d.png)

同样，这是一个 rbf 模型：

```
ggplot(rbf, aes(x=x, y=y, colour=factor(group))) + 
geom_point() + stat_smooth(method="loess", se=F) 
```

![rbf](../Images/89e204f9dbd456cb536d8fba8631c97e.png)

RBF 模型更好地拟合数据，并且与变量的背景知识更好地吻合。我想尝试计算拟合线的最小/最大斜率，以便修剪陡峭悬崖与更平缓曲线的 NN。识别交叉线将是另一种修剪方法，但这是一个不同的问题。

感谢您的任何建议。

* * *

**注意：**我`ggplot2`在这里使用并相应地标记了问题，但这并不意味着它不能用其他一些功能来完成。我只是想直观地说明我为什么要这样做。我想一个循环可以用 y [1] -y [0] /x [1] -x [0]做到这一点，但也许有更好的方法。？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T07:52:37.760

我认为最简单的解决方案是使用一阶差分（使用 function `diff`）作为一阶导数的近似值。

```
slope.loess <-function(X, data){
    # First your loess function:
    my_loess <- loess(y~x, data=data, subset=data$group==X, degree=2)
    # Then the first difference
    first_diff <- diff(my_loess$fitted)
    # Then the corresponding x and y values for the minima and maxima
    res <- cbind(my_loess$x[c(which.min(first_diff), which.max(first_diff))], 
            my_loess$fitted[c(which.min(first_diff), which.max(first_diff))])
    colnames(res) <- c("x", "y")
    rownames(res) <- c("min", "max")
    res
    }

#Then apply the function to each group
slope.rbf <- lapply(levels(rbf$group), FUN=slope.loess, data=rbf)
names(slope.rbf) <- levels(rbf$group)

slope.rbf
$A
           x        y
min 3.310345 20.30981
max 7.724138 18.47787

$B
           x        y
min 3.310345 21.75368
max 7.724138 20.06883

$C
           x        y
min 3.310345 23.53051
max 7.724138 21.47636

$D
           x        y
min 4.413793 25.02747
max 0.000000 26.22230

$E
           x        y
min 4.413793 27.45100
max 0.000000 27.39809 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-05T21:19:13.670

我正在自己编写一个用于超快速交易的神经网络。一开始我使用 Loess 或 Lowess 来拟合时间序列，但我想要的是 Loess 不提供的平滑导数。甚至，如果您自己实现 Loess 并使用每个点的正交多项式来计算导数，您会得到奇怪的结果。有一个原因。

您可以在 Graciela Boente 的论文中找到解决问题的方法：回归函数的高阶导数的稳健估计。公式在第 3 页。该论文可在互联网上免费获得。一旦你获得了值和导数，你可以使用它来唯一定义三次样条，这将给出连续的导数。

我不熟悉R

# jsp - 在jsp中显示hash map的arraylist

> ID：12183138
> 
> 赞同：0
> 
> 时间：2012-08-29T17:11:06.077
> 
> 标签：jsp, struts2

我有地图，其中列表作为值，整数作为键。如果键是 0,1，我想显示列表的值。如何在 jsp 中使用 Struts2？

```
Map<Integer, List<String>> parameter_map = new LinkedHashMap<Integer, List<String>>(); 
```

```
<s:iterator value="parameter_map">
  <h3><s:property value="key" /></h3>
  <table>
    <s:iterator value="value">
      <tr><td><s:property /></td></tr>
    </s:iterator>
  </table>
</s:iterator> 
```

这是我试图在jsp中显示的内容。但是没有显示任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T17:35:32.797

您是否尝试过使用[迭代器](http://struts.apache.org/2.3.1/docs/iterator.html)标签。它可以为您完成工作，并将列表推送到值堆栈的顶部，您可以再次对其进行迭代，因此简而言之，您需要一组嵌套迭代器。

有几个示例可以向您展示如何迭代地图。

看看下面的链接

*   [索引列表和地图的高级示例](http://struts.apache.org/2.x/docs/type-conversion.html#TypeConversion-AnadvancedexampleforindexedListsandMaps)
*   [`HashMap<String, ArrayList<String>>`使用 Struts 2遍历 a](https://stackoverflow.com/questions/6237223/iterate-over-an-hashmapstring-arrayliststring-with-struts-2)

# java - 如何在 Eclipse 中抑制 SQL 剪贴簿“保存资源”对话框

> ID：12183140
> 
> 赞同：4
> 
> 时间：2012-08-29T17:11:19.587
> 
> 标签：java, eclipse

每次我启动/停止/重新部署我的 Tomcat 服务器（或 Glassfish）或类似的东西时，eclipse 都会询问它是否应该保存那个 SQL Scrapbook 文件。

但我不想保存它，因为它只包含一些“临时”查询。所以我按“否”。但是对于下一个服务器启动它一次又一次地询问。

所以我的问题是：是否可以针对 SQL 剪贴簿文件禁止这个问题？ ![保存资源问题](../Images/abd9f04c618f6f6962b7cf65905ce8a3.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T06:21:52.530

您可以通过在常规->工作区“构建前自动保存”中启用“自动保存”来实现您想要的某种程度。通过保存文件，您将不会收到提示。但是，由于这会影响您当前正在处理的所有文件；这可能不是你想要的。

你想要的可能是不可能的。

# python - 当我在没有过滤器的情况下在 Dynamodb 中执行 scan() 并仅检索 10 个对象时，它是否仍然访问整个数据库？

> ID：12183141
> 
> 赞同：5
> 
> 时间：2012-08-29T17:11:20.127
> 
> 标签：python, amazon-web-services, boto, amazon-dynamodb

例如（使用 Boto）：

```
import boto

db = boto.connect_dynamodb()

table = db.get_table('MyTable')
res = table.scan(attributes_to_get=['id'], max_results=10)

for i in res:
    print i 
```

如果我的表中有 1,000 个对象，它会扫描所有对象，还是在 10 个之后停止？如果这确实读取了所有 1,000 个对象，我怎样才能让它只读取前 10 个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T18:11:17.703

根据有关[容量单位计算](http://docs.amazonwebservices.com/amazondynamodb/latest/developerguide/WorkingWithDDTables.html#CapacityUnitCalculations)的文档，每个请求最多只能分析 1MB 的数据。

> 在扫描操作的情况下，它不是扫描返回的项目的大小，而是 Amazon DynamoDB 评估的项目的大小。也就是说，对于扫描请求，Amazon DynamoDB 最多评估 1 MB 的项目并仅返回满足扫描条件的项目。

对于仅包含 1,000 个项目的表，理论上它每次都会解析所有表。希望“限制”参数（最大值为 100）允许更早地停止该过程，以便`limit`返回最多的项目。

如果您的请求不涉及任何条件，则扫描的项目计数将是结果的数量。否则，它可能会大得多，但扫描项目的累积大小不能超过 1MB 的边界。

对于扫描操作，亚马逊会认为您已消耗

```
consumed_capacity = math.ceil(sum(parsed_data_size)/1KB) 
```

但是请不要相信我的话：

```
import boto
db = boto.connect_dynamodb()

# Notice the "layer1" operation
res = db.layer1.scan('MyTable', attributes_to_get=['id'], limit=10)

print res['ScannedCount'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-14T18:34:40.657

要完全回答您的问题，您还需要知道：以 Kb 为单位的项目大小是多少，表的预置读取容量是多少。

如果您只扫描代表主索引键的项目（在您的情况下为“id”）而没有任何过滤器表达式，您将收到前 10 个项目并且扫描将停止。

如果出现以下情况，它将不会检索前 10 个项目：

1.  项目的大小加在一起大于 1MB，在这种情况下，您需要使用更多迭代并使用 ExclusiveStartKey = result['LastEvaluatedKey'] 开始第二次扫描。

或者

2.  如果您没有足够的预置读取容量，那么您将收到“预置吞吐量不足异常”，并且需要使用“限制”来控制扫描时间。

# bash - 检查 bash

> ID：12183146
> 
> 赞同：-2
> 
> 时间：2012-08-29T17:11:34.613
> 
> 标签：bash

再会！现在把这个任务：需要编写一个脚本来检查apache2、mysql和php是否以及每个项目旁边是否写了安装或未安装。

代码请不要写！更好的咀嚼方式。你的！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T17:14:57.337

您可以使用`which`命令并测试返回值：

```
which mysql &> /dev/null || echo "mysql is not installed" 
```

正如 kojiro 建议的那样，您可以使用`type`类似的方式增加便携性：

```
type mysql &> /dev/null || echo "mysql is not installed" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T17:16:50.973

如果您在使用 rpm 作为其包管理器的 Linux 机器上（并且这些包是通过或使用like的安装程序安装的），则带有[grep的](http://unixhelp.ed.ac.uk/CGI/man-cgi?grep)[rpm](http://linux.die.net/man/8/rpm)可以做到这一点：`rpm``rpm``yum`

```
[ 10:15 jon@hozbox ~ ]$ rpm -qa | grep -i "apache\|mysql\|php"
perl-DBD-MySQL-4.017-1.fc13.i686
php-pear-1.9.2-3.fc13.noarch
php-gd-5.3.6-1.fc13.i686
.... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T17:18:34.133

从 PHP 运行 phpinfo() 函数：

```
<?php
   phpinfo();
?> 
```

这将打印有关 PHP、MySQL、Apache 等的信息。如果需要，可以解析这些信息。

# heroku - 将应用私下部署到 Heroku

> ID：12183149
> 
> 赞同：0
> 
> 时间：2012-08-29T17:11:43.727
> 
> 标签：heroku, paas, cloudbees

我们当前的平台提供商允许我们将部署的应用程序设置为私有，这可以保护对登录屏幕后面的应用程序的访问。这对于在墙后部署我们网站的开发版本以在 Internet 上进行测试非常有用。在 Heroku 平台上是否有可以提供相似度的功能或插件？我知道我们可以编写自己的代码……但我们很乐意依靠提供者来解决这个问题。

谢谢，齐格弗里德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T17:32:24.937

很不幸的是，不行。

我总是不得不实施自己的解决方案。对于基于 Ruby/Rack 的应用程序，我通常`Rack::Auth::Basic`基于`RACK_ENV`. 这样我就可以在应用程序投入生产时轻松关闭身份验证。

对于 Node.js，我做同样的环境检查，并使用 Connect 的`basicAuth`中间件。

# java - 根据用户定义的标准对地图进行排序？

> ID：12183152
> 
> 赞同：0
> 
> 时间：2012-08-29T17:11:48.947
> 
> 标签：java, sorting, hashmap, comparator, comparable

我有一张地图，我希望将一些值放在首位。

```
HashMap<String,String> hm = new HashMap<String,String>(); 
hm.put("Phone Number","998291829");
hm.put("Address","12 A Street");
hm.put("Name","Robert Singh");
hm.put("Email","robert@gmail.com");
-
- 
```

我想要姓名和电子邮件作为第一个和第二个条目，我该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T17:14:37.753

HashMap 不是已排序或可排序的集合。

您可以做的是将 TreeMap 与您自己的比较器一起使用。

但是，我怀疑您最好使用真正的类而不是临时地图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T17:13:44.693

`HashMap`您应该使用 a而不是使用，`LinkedHashMap`因为它保留了添加元素的顺序。您必须按照需要的顺序添加元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-08T19:16:25.753

我建议您创建一个 bean，例如 Contact 或 Person，然后为此编写比较器。

因此，一旦您完成为它创建 bean 和比较器。然后

填充 bean 的列表/集合

最后做

Collection.sort(yourlist,sortByNameComparator);

Collection.sort(yourlist,sortByemailComparator);

其中 sortByNameComparator 和 sortByemailComparator 是您创建的比较器。

看看这个。它肯定会解决你的问题。

[根据姓名对联系人的 ArrayList 进行排序？](https://stackoverflow.com/questions/1814095/sorting-an-arraylist-of-contacts-based-on-name?lq=1)

上面有创建比较器的例子。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T17:14:29.553

您可以使用树状图。构造函数接受一个比较器。

您可以传递自己的比较器实现，您可以在其中实现对地图中的数据进行排序的逻辑。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-29T17:17:30.353

根据您的使用情况，您可能想要使用 a `List<Pair>`，其中 Pair 类似于

```
public class Pair<J,K> {
    private J key;
    private K value;

    public Pair(J key, K value) {
        this.key = key;
        this.value = value;
    }

    public J getKey() {return key;}
    public K getValue() {return value;}
} 
```

# php - 代码无法按预期工作，类中出现一些奇怪的错误

> ID：12183154
> 
> 赞同：-2
> 
> 时间：2012-08-29T17:12:11.603
> 
> 标签：php

基本上我的问题如下。我将以下代码放入浏览器中 `?phase=1&step=0&fot=false`，我得到一个黑页。

Apache服务器错误如下

`PHP Notice: Undefined index: true in C:\Program Files (x86)\Zend\Apache2\htdocs\Proj11\1.php on line 9`

预计这一行`} elseif ($_GET['true']) { $fOT = 'true'; }`与开头的行一样。

`PHP Notice: Undefined index: true in C:\Program Files (x86)\Zend\Apache2\htdocs\Proj11\1.php on line 138`

这一条和之前一样，但是在 phase2 类的 __construct 里面

`PHP Notice: Undefined variable: fOT in C:\Program Files (x86)\Zend\Apache2\htdocs\Proj11\1.php on line 17`

是`$phase->stepFunction($fOT);`脚本顶部的行....它被定义了，所以不知道为什么会出现错误....

我不知道为什么什么都不做，感谢您的帮助thx

谢谢你们！

```
 if (empty ($_GET['fot']) ) { 
                    $fOT = 'false'; 
                    } elseif ($_GET['true']) { $fOT = 'true'; }

            $phase = $_GET['phase'];        
            if(empty ($phase)){
                $phase = new phase1();
                $phase->start();
                } elseif ($phase = 1) {
                    $phase = new phase2();
                $phase->stepFunction($fOT, $_GET['step']);
                    }
                 class phase 1 { ... }

                    class phase2 {
        function __construct () {

        $dbFile = 'dbconfig.php';
        $this->dbFile = $dbFile;
        include_once ("$this->dbFile"); 

        $step = $_GET["step"];

        $username = $DB_USER;
        $password = $DB_PASS;
        $server = $DB_SERVER;
        $dbName = $DB_NAME;

        $this->step = $step;
        $this->dbFile = $dbFile;
        $this->username = $username;
        $this->password = $password;
        $this->server = $server;
        $this->dbName = $dbName;

        $db = new PDO ('mysql:host=' .$server.';dbname='.$this->dbName,$this->username,$this->password);

        $this->db = $db;

        if (empty ($_GET['fot']) ) { 
        $fOT = 'false'; 
        } elseif ($_GET['true']) { $fOT = 'true'; }

    $this->IDB = $this->handleDatabase( 1 );
    $this->IDB2 = $this->handleDatabase( 2);
    $this->IDB3 = $this->handleDatabase( 3);
        }

public function handleDatabase ($num = 1){
// Prepare SQL Statements
    $IDB1 = $this->db->prepare( 
         "CREATE TABLE pages (
          id int(11) NOT NULL auto_increment,
         subject_id int(11) NOT NULL,
          menu_name varchar(30) NOT NULL,
          position int(3) NOT NULL,
          visible tinyint(1) NOT NULL,
          content text NOT NULL,
          PRIMARY KEY  (id)
    )ENGINE=MyISAM AUTO_INCREMENT=7 DEFAULT CHARSET=utf8");

    $IDB2 = $this->db->prepare("
        CREATE TABLE subjects (
          id int(11) NOT NULL auto_increment,
          menu_name varchar(30) NOT NULL,
          position int(3) NOT NULL,
          visible tinyint(1) NOT NULL,
          PRIMARY KEY  (id)
    )ENGINE=MyISAM AUTO_INCREMENT=6 DEFAULT CHARSET=utf8");

    $IDB3 = $this->db->prepare("
        CREATE TABLE users (
          id int(11) NOT NULL auto_increment,
          username varchar(50) NOT NULL,
          hashed_password varchar(40) NOT NULL,
          PRIMARY KEY  (id)
    )ENGINE=MyISAM AUTO_INCREMENT=2 DEFAULT CHARSET=utf8");

    $name = "IDB".$num;
return isset( $$name)?$$name:false;
}
//Set Option to True or False

function createTablePages ($fOT){

    $r1 = $this->db->query('SHOW TABLES LIKE \'page\'');
    if (count($r1->fetchAll()) > 0 && $fOT == 'false') {
        echo "The table PAGE exists";

    } elseif ($fOT == 'true') {
        $this->IDB->execute();
        echo "enteres";
                $this->stepFunction (1,false);
    }
}
function createTableSubjects ($fOT){

    $r2 = $this->db->query('SHOW TABLES LIKE \'subjects\'');
    if (count($r2->fetchAll()) > 0  && $fOT == 'false') {
        echo "The table SUBJECTS exists ";

    } elseif ($fOT == 'true') {

        $this->IDB2->execute();
        $this->stepFunction (2,false);

    }
}

function createTableUsers ($fOT){

    $r3 = $this->db->query('SHOW TABLES LIKE \'users\'');   
    if (count($r3->fetchAll()) > 0  && $fOT == 'false') {
        echo "The table USERS exists";
    } elseif ($fOT == 'true') {
        $this->IDB3->execute();
        echo "Would you like to populate all the tables?";
    }   
}

public function stepFunction ($fOT,$step){

switch ($step) {
    case 0: 
            $this->createTablePages ($fOT);
            break;
    case 1: 
            $this->createTableSubjects($fOT);
            break;
    case 2: $this->createTableUsers ($fOT);
            break;
    }

}

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T17:31:46.987

您不能在全局范围内使用方法中定义的变量。

改变这个，它会解决一些错误

```
 $this->IDB = $this->handleDatabase()->$IDB;
    $this->IDB2 = $this->handleDatabase()->$IDB2;
    $this->IDB3 = $this->handleDatabase()->$IDB3; 
```

到

```
 $this->IDB = $this->handleDatabase( 1 );
    $this->IDB2 = $this->handleDatabase( 2);
    $this->IDB3 = $this->handleDatabase( 3); 
```

和函数句柄数据库

```
public function handleDatabase ( $num = 1){
// Prepare SQL Statements
$IDB1 = $this->db->prepare( 
     "CREATE TABLE pages (
      id int(11) NOT NULL auto_increment,
     subject_id int(11) NOT NULL,
      menu_name varchar(30) NOT NULL,
      position int(3) NOT NULL,
      visible tinyint(1) NOT NULL,
      content text NOT NULL,
      PRIMARY KEY  (id)
)ENGINE=MyISAM AUTO_INCREMENT=7 DEFAULT CHARSET=utf8");

$IDB2 = $this->db->prepare("
    CREATE TABLE subjects (
      id int(11) NOT NULL auto_increment,
      menu_name varchar(30) NOT NULL,
      position int(3) NOT NULL,
      visible tinyint(1) NOT NULL,
      PRIMARY KEY  (id)
)ENGINE=MyISAM AUTO_INCREMENT=6 DEFAULT CHARSET=utf8");

$IDB3 = $this->db->prepare("
    CREATE TABLE users (
      id int(11) NOT NULL auto_increment,
      username varchar(50) NOT NULL,
      hashed_password varchar(40) NOT NULL,
      PRIMARY KEY  (id)
)ENGINE=MyISAM AUTO_INCREMENT=2 DEFAULT CHARSET=utf8");

$name = "IDB".$num;
return isset( $$name)?$$name:false;
} 
```

或者直接在方法中设置 $this->IDB ：

```
public function handleDatabase ( ){
// Prepare SQL Statements
$this->IDB  = $this->db->prepare( [...] 
```

还有一些其他问题

```
 $this->IDB3->execute; 
```

不会做任何事情，更改为：

```
 $this->IDB3->execute(); 
```

# android - 在远程服务器的列表视图中显示数据

> ID：12183155
> 
> 赞同：0
> 
> 时间：2012-08-29T17:12:16.847
> 
> 标签：android, mysql, json, listview

这是我已经尝试了很长时间的事情，这是我最接近的。希望有人可以帮助我采取额外的步骤来实际填充 ListView。目前，数据被检索，因为它显示在我的 logcat 中。我现在需要它以 ListView 的形式出现在实际应用程序中，因为有两列。

我的代码很长，所以这是 pastebin 上的链接：http: [//pastebin.com/XzTtTJ3j](http://pastebin.com/XzTtTJ3j)

当前代码没有错误，它不会抛出任何异常，但当然同时它什么也不做。只是在 logcat 中将我的数据显示为字符串，应用程序中的页面是空白的。我查看了教程，当我尝试实现它们时，我得到了错误。我猜这与我使用 AsyncTask 的事实有关..？我的布局文件由两个文本视图和一个相对布局中的列表视图组成。

有任何想法吗？非常感谢您的帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T18:11:24.103

我认为你需要展示你的 onPostExecute() 吗？doInBackground() 的返回值应该在 onPostExecute() 中处理并在那里进行必要的 UI 更新。

doInBackground() 本身并不与 UI 线程通信，所以这就是 onPostExecute() 的用武之地。当然，您仍然需要做一些工作来使用结果更新您的 ListView。

[http://developer.android.com/reference/android/os/AsyncTask.html#onPostExecute](http://developer.android.com/reference/android/os/AsyncTask.html#onPostExecute(Result) (结果)

# android - 如何从父活动/选项卡活动中调用活动组内的子活动功能？

> ID：12183156
> 
> 赞同：1
> 
> 时间：2012-08-29T17:12:19.727
> 
> 标签：android, function, tabactivity, activitygroup, childactivity

假设，我有一个由 TabHost 组成的选项卡活动。TabHost 包含 2 个选项卡，每个选项卡都有一个活动组。每个活动组包含一项活动。现在，比如说， Tab Activity 是一个 A 类。两个活动组是 B 类和 C 类。B 和 C ，每个包含 D 类和 E 类。所以层次结构是，

   一个
| |
BC
| |
德

现在，我想在调用 A 的 onPaused 函数时从 A 类调用 E 类的函数。我尝试使用本地活动管理器获取活动 E，但没有成功。此外，还在这里和谷歌上查看了一些可能的解决方案，但我的运气还没有得到青睐。:( 所以现在，我希望我上面的解释足够清楚，让人们确切地理解我想要什么。请各位，用一些示例、代码或提示帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T08:42:27.700

我从[这里](http://androidactivity.wordpress.com/2012/08/17/two-way-communication-between-tabactivity-and-its-child-tabs/)得到了我的解决方案。如果说更具体，可以通过下面的代码块解决。

```
ActivityTab1 activity = (ActivityTab1) getLocalActivityManager().getActivity("Tab1");
activity.refreshContent(); 
```

# android - 在安卓中下载图片

> ID：12183165
> 
> 赞同：0
> 
> 时间：2012-08-29T17:12:40.490
> 
> 标签：android, android-layout, android-intent

亲爱的，我正在使用下面的代码在 android 中下载图片，其中 _in 是 Input Stream 和 DataInputStream _din 。我使用一个 URL 来下载图片。但有时它会返回我的图片，有时它不会在位图中显示为空。我在这里有一个问题，一个是下载图片的好方法或建议在同一代码中这张图片可能有什么问题有时返回图片，有时它不起作用？

```
if (_in == null) {
        _in = urlConnection.getInputStream();
    }
    if (_din == null) {
        _din = new DataInputStream(_in);
    }

    byte[] data = new byte[0];
    byte[] buffer = new byte[512];
    int bytesRead;
    while ((bytesRead = _din.read(buffer)) > 0) {           
        byte[] newData = new byte[data.length + bytesRead];         
        System.arraycopy(data, 0, newData, 0, data.length);         
        System.arraycopy(buffer, 0, newData, data.length, bytesRead);           
        data = newData;
    }       
    InputStream is = new ByteArrayInputStream(data);
    Bitmap bmp = BitmapFactory.decodeStream(is); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T17:24:32.473

为什么要为图像*InputStream*使用临时缓冲区？只需将 UrlConnection InputStream 直接与 BitmapFactory 一起使用：

```
_in = urlConnection.getInputStream();
Bitmap bmp = BitmapFactory.decodeStream(_in); 
```

如果您的图像没问题，这应该始终有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T17:21:11.327

试试这个，告诉我你的问题是否仍然存在。

```
Bitmap ret;
        HttpURLConnection conn = null;          
        try
        {
            URL u = new URL(mUrl);
            conn = (HttpURLConnection) u.openConnection();
            conn.setConnectTimeout(CONNECTION_TIMEOUT);
            conn.setReadTimeout(CONNECTION_TIMEOUT);
            conn.setDoInput(true);
            conn.setRequestMethod("GET");

            int httpCode = conn.getResponseCode();
            if (httpCode == HttpURLConnection.HTTP_OK || httpCode == HttpURLConnection.HTTP_CREATED)
            {
                InputStream is = new BufferedInputStream(conn.getInputStream());
                ret = BitmapFactory.decodeStream(is);
            }
            else
            {
                ret = null;
            }
        }
        catch (Exception ex)
        {
            ret = null;
        }
        finally
        {
            if (conn != null)
            {
                conn.disconnect();
            }
        } 
```

# html - 当要重新加载的页面需要一点时间时显示加载 gif 图像？

> ID：12183170
> 
> 赞同：1
> 
> 时间：2012-08-29T17:13:06.310
> 
> 标签：html, jsp, jquery

当要重新加载的页面需要一点时间时，谁能告诉我如何显示加载 gif 图像？

我正在使用 jquery-ajax 来加载页面。我的用于加载页面的 jquery-ajax 示例如下所示。

**加载器.js**

```
$(document).ready(function(){  
 $("#emphome").click(function(){  
 $("#response").load("EMP_Home.jsp");  
 });  
 $("#custhome").click(function(){  
 $("#response").load("Customer_Home.jsp");  
 });  
 $("#manahome").click(function(){  
 $("#response").load("Manager_Home.jsp");   
 });  
}); 
```

**测试.jsp**

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%> <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> <head>

    <script type="text/javascript" src="js/jquery.js"></script> </head> <body>

        <!--==============================content================================-->
       <div class="container" id="response">
            </div>
        <a href="#Customer Home"  id="custhome" class="nav">Customer Home</a>
        <a href="#Employee Home"  id="emphome" class="nav">Employee Home</a>
        <a href="#Manager Home"  id="manahome" class="nav">Manager Home</a>     <!--==============================footer=================================-->
         <script type="text/javascript" src="js/loader.js" ></script>

<!--  End top Nav-->

</body> </html> 
```

**Customer_Home.jsp**

```
<%@page contentType="text/html" pageEncoding="UTF-8"%> <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"    "http://www.w3.org/TR/html4/loose.dtd">

<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>JSP Page</title>
    </head>
    <body>
        <h1>Welcome to Customer Home!</h1>
    </body> </html> 
```

**EMP_Home.jsp**

```
<%@page contentType="text/html" pageEncoding="UTF-8"%> <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"    "http://www.w3.org/TR/html4/loose.dtd">

<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>JSP Page</title>
    </head>
    <body>
        <h1>Welcome to Customer Home!</h1>
    </body> </html> 
```

**Manager_Home.jsp**

```
<%@page contentType="text/html" pageEncoding="UTF-8"%> <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"    "http://www.w3.org/TR/html4/loose.dtd">

<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>JSP Page</title>
    </head>
    <body>
        <h1>Welcome to Manager Home!</h1>
    </body> </html> 
```

上面的代码工作正常。因为要加载的页面很简单。但是当涉及到复杂的页面时，加载需要一些时间！谁能告诉我如何在加载时间显示加载图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T17:26:23.107

```
$(document).ready(function () {
    $("your_loafing_gif_image_id").hide();

    $("#emphome").click(function () {
        $("your_loafing_gif_image_id").show();
        $("#response").load("EMP_Home.jsp", function(){
            $("your_loafing_gif_image_id").hide();
        });
    });

    $("#custhome").click(function () {
        $("your_loafing_gif_image_id").show();
        $("#response").load("Customer_Home.jsp", function(){
            $("your_loafing_gif_image_id").hide();
        });
    });

    $("#manahome").click(function () {
        $("your_loafing_gif_image_id").show();
        $("#response").load("Manager_Home.jsp", function(){
            $("your_loafing_gif_image_id").hide();
        });
    });

}); 
```

# bash - 如何比较 bash 中包含尖括号“<”的字符串？

> ID：12183181
> 
> 赞同：0
> 
> 时间：2012-08-29T17:13:50.560
> 
> 标签：bash

以下 bash 脚本给我带来了问题：

```
#!/bin/bash

if [[ $VAR -eq "<EMPTY>" ]]; then echo "Hello World!"; fi 
```

Bash 失败，抱怨：

```
line 3: [[: <EMPTY>: syntax error: operand expected (error token is "<EMPTY>") 
```

如何测试包含的字符串是否与字符串`VAR`等效`"<EMPTY>"`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T17:17:47.863

您使用了错误的运算符。`==`用于字符串，`-eq`用于数字。

```
#!/bin/bash

if [[ $VAR == "<EMPTY>" ]]; then echo "Hello World!"; fi 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T17:17:20.893

里面`[[ ... ]]`，`-eq`有不同的含义：用于比较整数。不过，您可以使用`(( ... ))`普通运算符比较整数。对字符串使用以下内容：

```
[[ $VAR == "<EMPTY>" ]] 
```

# sql - 邮政编码之间的距离

> ID：12183186
> 
> 赞同：2
> 
> 时间：2012-08-29T17:14:14.330
> 
> 标签：sql, sql-server, asp-classic, location, postal-code

我正在尝试找出计算位置之间距离的最佳方法（我们有邮政编码和位置）。

基本上，对于每条记录，我们都有一个位置和邮政编码，前端的用户可以输入邮政编码并选择记录..

```
- Within 10 Miles
- Within 20 Miles
- Within 40 Miles
- Within 50 Miles 
```

我能看到的唯一方法是从数据库中获取每条记录并计算出每条记录之间的距离，将其输入到一个临时表中，然后按位置对该表进行排序并对其进行过滤。这似乎是一种冗长且耗时的方式 - 有没有人对如何做得更好有任何建议？或者这是最好的方法吗？

例如，客户输入 SO40 9AA（南安普顿邮政编码），然后选择“50 英里内”，这应显示并记录该邮政编码或位置 50 英里范围内的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T19:02:08.887

一旦你所有邮政编码的地理坐标，这里有一个 VB 函数来获取任何两点之间的海峡距离。这会产生以英里为单位的结果，但很容易转换它。

```
Function distance(lat1 As Single, lon1 As Single, lat2 As Single, lon2 As Single)
  Dim theta As Single, dist As Single
  theta = deg2rad(lon1 - lon2)
  lat1 = deg2rad(lat1)
  lat2 = deg2rad(lat2)
  dist = Sin(lat1) * Sin(lat2) + Cos(lat1) * Cos(lat2) * Cos(theta)
  dist = acos(dist)
  dist = rad2deg(dist)
  distance = dist * 60 * 1.1515
End Function

'::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
':::  This function get the arccos function from arctan function    :::
'::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
Function acos(Rad)
  If Abs(Rad) <> 1 Then
    acos = pi / 2 - Atn(Rad / Sqr(1 - Rad * Rad))
  ElseIf Rad = -1 Then
    acos = pi
  End If
End Function

'::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
':::  This function converts decimal degrees to radians             :::
'::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
Function deg2rad(Deg As Single) As Single
    deg2rad = CSng(Deg * pi / 180)
End Function

'::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
':::  This function converts radians to decimal degrees             :::
'::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
Function rad2deg(Rad As Single) As Single
    rad2deg = CSng(Rad * 180 / pi)
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T18:01:24.310

您的数据集中有地理代码吗？[如果没有，您可以使用http://geocoder.us/help/city_state_zip.shtml](http://geocoder.us/help/city_state_zip.shtml)之类的服务将其添加到您拥有的邮政编码中， 或者您可以在[http://www.zipinfo.com/上获得一个预编码的数据库products/z5ll/z5ll.htm](http://www.zipinfo.com/products/z5ll/z5ll.htm) 将代码添加到记录后，您可以使用标准的数学距离计算，使用纬度/经度坐标来计算距离。

如果您想要行驶距离，请使用 Google Maps API，否则此距离将“如鱼得水”。

# c# - 会员提供程序在升级 MySql 连接器后引发触发异常

> ID：12183187
> 
> 赞同：2
> 
> 时间：2012-08-29T17:14:23.150
> 
> 标签：c#, asp.net, mysql, mysql-connector

我最近刚刚将 MySQL 连接器/网络从 6.5.3 升级到 6.5.4，并且发现成员资格提供程序不再像使用旧连接器那样工作。现在，当我尝试验证用户时，提供程序会引发以下异常：

```
表 'my_aspnet_membership' 拒绝用户 'root'@'%' 的 TRIGGER 命令
```

我有理由确定以上内容与权限无关，因为这个相同的触发器在我的 prod 和 staging 环境中工作。

我还检查了信任级别和设置，但即使更改各种信任级别也没有改变最终结果。

*编辑*

由提供程序提供的方法引发了异常`Membership.ValidateUser`，因此在验证期间没有任何自定义发生。

```
string username = Membership.GetUserNameByEmail(emailAddress);

if (!string.IsNullOrEmpty(username))
{
    if (Membership.ValidateUser(username, password.Text))
    {
    ... 
    ...
    }
} 
```

# php - 从字符串中取出第一个单词

> ID：12183197
> 
> 赞同：0
> 
> 时间：2012-08-29T17:14:52.167
> 
> 标签：php, smarty, smarty3

如何从字符串中删除 Smarty 中的第一个单词，如下所示：

`$variable = "Word Quick brown fox";`

然后在输出上使它看起来像这样：

`$variable = "Quick brown fox";`

有没有办法在没有修饰符的情况下做到这一点？我知道你可以制作自定义修饰符，然后使用`$variable|customModifier`并得到你想要的，但我想也许已经有内置的解决方案了？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-29T17:18:37.860

正如 Tyler 指出的那样，这应该在您的业务逻辑中完成，如下所示：

1.  [`explode()`](http://php.net/explode)在空间上创建单词数组
2.  删除第一个条目[`array_shift()`](http://php.net/array_shift)（对应句子中的第一个单词）
3.  重新加入它[`implode()`](http://php.net/implode)

这是一个例子：

```
$words = explode( ' ', $variable);
array_shift( $words);
$variable = implode( ' ', $words); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T17:25:23.337

通过单词之间的空格将原始字符串分解成一个数组，然后切出所选的索引键。然后将数组内爆回字符串。

```
<?php
$variable = "Word Quick brown fox";
$str = explode(' ', $variable);
$str = array_slice($str, 1);
$str = implode(' ', $str);
echo $str;
?> 
```

# vb.net - 无法写入 App.Config 文件

> ID：12183211
> 
> 赞同：0
> 
> 时间：2012-08-29T17:15:56.017
> 
> 标签：vb.net, visual-studio-2010

读取/写入 App.config 时出现问题。

下面的代码来自 MSDN 文章（AppSettingsSection 类） [http://msdn.microsoft.com/en-us/library/system.configuration.appsettingssection%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/system.configuration.appsettingssection%28v=vs.100%29.aspx)

我能够成功读取 App.config 文件并获取/使用这些值，如果我更改 App.config 文件以获取新值，它会正确响应。

但是，在此（来自 MS 页面）中，我添加了一个新条目并更改了我的一个初始条目的值。它似乎改变了它，保存它没有错误，但没有将它写入文件，所以下次我运行时，我会回到 App.config 中的初始值。

有人可以告诉我我的错误方式吗？

蒂亚！

```
Imports System
Imports System.Collections.Specialized
Imports System.Configuration
Imports System.Text
Imports System.IO

' IMPORTANT: To compile this example, you must add to the project 
' a reference to the System.Configuration assembly.
'
Module Module1
    Sub Main()
        Dim KeypairHolder As String = Nothing
        ' Get Configuration File as config object
        Dim config As System.Configuration.Configuration = ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None)

        ' Create a unique key/value pair to add to the appSettings section.
        Dim keyName As String = "DateTimeStamp Number " & config.AppSettings.Settings.Count + 1
        Dim value As String = String.Concat(Date.Now.ToLongDateString(), " ", Date.Now.ToLongTimeString())

        ' Create appSettings as object
        Dim appSettings As System.Configuration.AppSettingsSection = config.AppSettings

        ' add the new key and value 
        appSettings.Settings.Add(keyName, value)

        ' save and refresh the values
        config.Save(ConfigurationSaveMode.Modified)

        ' Force a reload in memory of the changed section.
        ConfigurationManager.RefreshSection("appSettings")

        ' Get keys
        Dim kAll() As String = appSettings.Settings.AllKeys()

        ' Build string to display
        For Each key In kAll
            KeypairHolder = KeypairHolder & key & ":  " & appSettings.Settings(key).Value & vbCrLf
        Next

        'Display
        MsgBox(KeypairHolder)

        ' Change a value
        appSettings.Settings("CustomKey").Value = "Changed Value"

        ' Resave and get and display
        config.Save(ConfigurationSaveMode.Modified)
        ConfigurationManager.RefreshSection("appSettings")
        kAll = appSettings.Settings.AllKeys()
        KeypairHolder = Nothing
        For Each key In kAll
            KeypairHolder = KeypairHolder & key & ":  " & appSettings.Settings(key).Value & vbCrLf
        Next
        MsgBox(KeypairHolder)

    End Sub
End Module

' appSettings Section of my App.Config file
'   <appSettings>
'    <add key="UsernamePassword" value="BobsUsername:BobsPassword"/>
'    <add key="CustomKey" value="ConfigApp Value"/>
'  </appSettings> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T17:27:40.490

右键单击解决方案资源管理器窗口中的 app.config 文件，然后选择“**属性**”选项。确保**Copy to Output Directory**属性未设置为**Copy always**。

# java - 在按钮单击时将变量值返回给 main

> ID：12183212
> 
> 赞同：0
> 
> 时间：2012-08-29T17:15:56.493
> 
> 标签：java, swing, jframe, jbutton, propertychangelistener

我希望每次单击按钮时 main 都应该打印 hello （在弹出对话框中）。所以我设计了以下程序，但它似乎不起作用。该程序编译并执行得很好，但是当我单击按钮时，我看不到任何对话框弹出。我已经放置了布尔变量 (button_clicked) 的 getter 和 setter，其值正在 main() 块中进行测试。知道的请帮忙..

```
import javax.swing.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

class abc extends JFrame implements ActionListener{

boolean button_clicked = false;
JButton b1;

abc(){
    this.setSize (400, 400);
    this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    this.createUI();
}

void createUI(){
    this.setLayout(null);
    b1 = new JButton("x");
    b1.setSize(110,30);
    b1.setLocation(10,210);
    this.add(b1);

    b1.addActionListener(this);
}

public boolean isButton_clicked() {
    return button_clicked;
}

public void setButton_clicked(boolean button_clicked) {
    this.button_clicked = button_clicked;
}

public void actionPerformed(ActionEvent arg0) {
    button_clicked = true;

    //I don't want to print the dialogue box from here..
    //I want to keep everything under main()'s control.
}

}

public class tempMain extends JFrame {

public static void main(String[] args) {
    abc temp = new abc();
    temp.setVisible(true);
    while(true){
        if(temp.isButton_clicked())
            JOptionPane.showMessageDialog(null, "Hello");
    }
}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T17:19:07.580

移动方法`JOptionPane.showMessageDialog()`下的调用`actionPerformed()`，删除方法`while()`下的事物`main`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T17:23:40.517

您可能想阅读[“如何编写动作侦听器”](http://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html)来帮助您`ActionListner`在代码中实现 an。

您的代码的基本思想是：

*   声明一个事件处理程序类
*   将事件处理程序类的实例注册为您的侦听器`JButton`
*   在侦听器接口中包含实现方法的代码。在您的情况下，您将覆盖`actionPerformed()`并在那里编写您的逻辑以显示一个对话框。[“如何制作对话框”](http://docs.oracle.com/javase/tutorial/uiswing/components/dialog.html)对您来说将是另一个有用的教程。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-29T17:28:10.470

正如@Quinman 指出的那样，您的代码设计确实存在缺陷。我了解您不希望出于某些我不明白的个人原因将 JOptionPane 置于 actionperformed 方法下。基于这个前提，我认为最好的解决方案是创建一个回调，即让你的 JFrame 知道主类并在单击按钮时调用它。

可以使这种机制独立于主类。请检查[观察者设计模式](http://en.wikipedia.org/wiki/Observer_pattern)以了解如何做到这一点。

您的代码还有另一个缺陷 - 单击按钮时，我会收到无限的 Hello 消息。为了避免这种情况，您应该将 button_clicked 变量设置为 false。我只提到作为一般提示，因为事实上你真的应该摆脱你的时间造成的忙碌等待。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-29T18:03:26.123

您可能正在寻找*无模式*对话框。在此[示例](https://stackoverflow.com/a/11832979/230513)中，名为 的主面板在对话框中`Observer`侦听。`ObservedPanel`通过使用`PropertyChangeListener`，对对话框所做的任何更改都会立即反映在主面板中。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-29T23:42:31.703

正如许多人已经指出的那样，您的方法和设计是有缺陷的。我不会进一步讨论，因为它已经处理过，但作为一个建议，你可以尝试......

```
abc temp = new abc();
temp.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent evt) {
        JOptionPane.showMessageDialog(null, "Look Ma, I'm in Main...");
    }
});
temp.setVisible(true); 
```

在你的`abc`课上...

```
class abc JFrame implements {
    // build your class as normal

    public void addActionListener(ActionListener listener) {
        b1.addActionListener(listener);
    }    
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-30T08:34:26.990

从您提供的评论来看，您希望将您的`abc`类（名称很差且不符合 Java 命名标准）用于多种不同的目的，因此您不想包含按时执行的代码类中的按钮`abc`。

有多种解决方案（第一个是我的首选）

*   `Action`在您的类的构造函数中传递一个`abc`并将其耦合`Action`到`JButton`. 这样，构造`abc`实例的类负责按下按钮时的行为
*   抽象并让`abc`您`ActionListener`调用该抽象方法。然后，您可以在每次需要不同行为时对此类进行具体实现。

关于您的代码的进一步说明：

*   摆脱那个`while( true )`循环
*   摆脱`null`布局并使用 a`LayoutManager`代替
*   Swing 组件应该在*Event Dispatch Thread*上创建和访问。有关更多信息，请参阅[Swing 中的并发](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/index.html)教程

# ruby-on-rails - 如何阻止发送到某些电子邮件地址或域的电子邮件？

> ID：12183213
> 
> 赞同：3
> 
> 时间：2012-08-29T17:15:59.527
> 
> 标签：ruby-on-rails, ruby-on-rails-3, actionmailer

我们有一个内置于 rails 3.2.8 的应用程序。我们正在向客户发送电子邮件。我想阻止某些电子邮件地址。基本上邮件程序只是忽略那些特定的电子邮件地址。

例如：我的公司名称是 abc，我不想向所有员工发送电子邮件，即 john@abc.com 或 rayn@abc.com，即 *@abc.com

我怎样才能做到这一点？

*PS：我正在使用 sendgrid，他们没有提供这样的东西。*

**编辑：**

将此代码放在初始化程序目录中：

```
 class EmailAddressFilter
  def self.delivering_email(message)
    message.perform_deliveries = false

  end
end

ActionMailer::Base.register_interceptor(EmailAddressFilter) 
```

应该阻止所有电子邮件。但我仍然可以在我的开发日志中看到电子邮件。

*PS：我已经重启了我的服务器。*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T17:22:59.100

在文件中，`config/initializers`您可以添加类似这样的内容

```
class EmailAddressFilter
  def self.delivering_email(message)
    # permit or deny the message using its "to", "body" etc properties
    # note message.to is an array (multiple emails)
    message.perform_deliveries = Email.whitelisted?(message.to)
  end
end

ActionMailer::Base.register_interceptor(EmailAddressFilter) 
```

# regex - 正则表达式只允许 1-20 范围内的数字

> ID：12183223
> 
> 赞同：12
> 
> 时间：2012-08-29T17:16:59.523
> 
> 标签：regex

我想让用户输入 0-20 范围内的数字，他们都可以输入 01 和 1

这就是我到目前为止所拥有的

```
 /^[1-9]|0[1-9]|1[0-9]|2[0]$/ 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-29T17:30:21.247

问题在于它`|`的优先级低于`^`and `$`，因此您的模式意味着`^[1-9]` *or* `0[1-9]` *or or* `1[0-9]` *or* `2[0]$`：只有一位数的值受 限制`^`，并且仅`20`受 限制`$`。

您可以在交替的每个分支中重复`^`和`$`，或者将交替包装在其中`(?:...)`以创建非捕获子表达式：

```
/^[1-9]$|^0[1-9]$|^1[0-9]$|^20$/
/^(?:[1-9]|0[1-9]|1[0-9]|20)$/ 
```

（我也冒昧地更改`[0]`为`0`.）

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-29T17:28:30.017

怎么样

```
/^([0-1]?[0-9]|20)$/ 
```

问题是 20 是一个特例。第二部分涵盖了它。第一部分涵盖其余部分。我假设 perl 风格的正则表达式，因为你没有指定上下文。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-29T17:19:24.453

试试这个

```
/^([01]?\d|20)$/ 
```

0 或 1（可选）后跟至少一位数字或 20

# jquery - 非常简单的过滤系统？

> ID：12183236
> 
> 赞同：0
> 
> 时间：2012-08-29T17:17:44.713
> 
> 标签：jquery, filter, categories

我正在尝试构建一个基于多个属性的极其简单的过滤器系统。

在我的示例中，我使用了：

*   性别
*   高度

我希望能够在“男/女”和“矮/高”之间进行选择。所以，有四种可能的组合：

*   男/短
*   男/高
*   女/短
*   女性/高

在每个过滤器组中只有两个选项的情况下，一次只能检查一个。

我遇到的问题是简单的逻辑。现在，单击“男性”将隐藏女性。但是点击“高个子”只会显示“高个子”的人。

我只是想知道是否有一个优雅的解决方案来构建这个基本系统？

谢谢！

[http://jsbin.com/ixokek/1](http://jsbin.com/ixokek/1)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T17:27:40.673

您只关心当前的过滤器设置；你不考虑对方。如果有一个通用的过滤器函数可以读取所有过滤器设置，以及一个仅交换活动状态的单击处理程序，则可以说更优雅：http: [//jsbin.com/ixokek/7/](http://jsbin.com/ixokek/7/)。

```
$('#filter li').click(function(){
    $(this).siblings().removeClass("active");  // remove active from other
    $(this).toggleClass("active");  // toggle active on current
    filter();  // filter elements
});

var filter = function() {
  // array of classes that items need to have
  var classes = $("#filter li.active")
      .map(function() {
        return $(this).data("filter");
      })
      .toArray();

  $(".item").each(function() {
    var $this = $(this);

    // it should show if it has all classes as the settings say
    var show = classes.every(function(aClass) {
      return $this.hasClass(aClass);  // class is a reserved word
    });

    // toggle appropriately
    if(show) {
      $this.fadeIn(200);
    } else {
      $this.fadeOut(200);
    }
  });
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T17:40:10.113

```
$('#filter li').on('click', function(){
    $(this).toggleClass('active').siblings().removeClass('active');
    var gender = $('#filter ul').eq(0).find('.active').data('filter')||'',
        height = $('#filter ul').eq(1).find('.active').data('filter')||'',
        sel = '.item'+(gender!=''?'.'+gender:'')+(height!=''?'.'+height:'');
    $(sel).fadeIn(200)
    $('.item').not(sel).fadeOut(200);
});​ 
```

[**小提琴**](http://jsfiddle.net/f9wfw/)

# security - 将密码安全地存储在中等负载的服务器中

> ID：12183240
> 
> 赞同：1
> 
> 时间：2012-08-29T17:17:54.503
> 
> 标签：security, cryptography, hash, bcrypt

我们有一个用 c/c++ 编写的 Web 服务 在今天之前，用户密码只是简单地用 MD5 散列并存储在 DB 中我很清楚这个算法根本不安全

Web 服务是 1 个线程应用程序。平均而言，它每秒从用户那里收到约 100 个数据包（100p/s）。其中一些是身份验证数据包。

我读过关于 bcrypt 和 salts 的文章，但根本没有在实践中使用过这种技术。由于安全原因，bcrypt 产生的哈希值比 MD5 慢的事实对我来说也很清楚。如果我们采用这种方式并使用 bcrypt 或 scrypt 来加密密码和检查 auth 数据包，它会使我们的服务变得更慢吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T17:34:27.350

如果能减慢攻击向量的速度，安全性会更好。永远记住这一点。

至于加盐和散列，我建议您始终使用加盐，并使用良好的熵生成器并执行几轮散列函数。

**为什么要加盐？**

如果您直接从密码中使用哈希，您将获得哈希和密码的 1 对 1 表示（在最好的情况下）。加盐（特别是具有至少 32 位熵的强盐）可以阻止字典攻击。如果您的盐的熵低或位数较少，那么如果您的盐渍和散列密码被盗，您很容易受到[彩虹表的攻击。](http://en.wikipedia.org/wiki/Rainbow_table)

**为什么要四舍五入？**

舍入（像 bcrypt 一样应用几轮散列函数）增加了一些反馈散列，但更重要的是，增加了构建自定义彩虹表的成本。如果您在散列之前不加盐密码，则四舍五入没有任何作用。

**为什么减速？**

每当您输入无效凭据时，您会看到某些站点具有指数退避时间。这是为了禁止机器人暴力破解密码。如果您的服务器拥有重要数据，请始终进行指数退避。

作为一般信息，`bcrypt`进行 1000 轮散列，这就是为什么它很慢。

# python - Python：在 Windows 上执行复杂的命令

> ID：12183246
> 
> 赞同：2
> 
> 时间：2012-08-29T17:18:08.290
> 
> 标签：python, windows, command-line, python-fu

我在 Windows 上运行命令时遇到问题，而它在 Linux 上运行良好。

我给你上下文，但这不是理解我的问题所必需的：我在批处理模式下使用 gimp。

我有一个 Python 脚本`callPythonFuScript.py`，它调用另一个 Python 脚本`pythonFu.py`，它执行一个 python-fu 调用。

中`callPythonFuScript.py`，我在调用里面的函数时构造命令行`pythonFu.py`来执行。这是命令行：

```
gimp-console-2.8 -idf --batch-interpreter python-fu-eval -b 'import sys;sys.path=['.']+sys.path;import pythonFu;pythonFu.myFunction("arg1","arg2","arg3") ' -b 'pdb.gimp_quit(1)' 
```

此命令在 Linux 上运行良好，但当我尝试在 Windows 上运行它时，它不起作用。

错误消息是：

```
The opening of C:\Users\myRep\sys; failed : no such file or directory
The opening of C:\Users\myRep\sys.path=['.']+sys.path; failed : no such file or directory
The opening of C:\Users\myRep\"arg1","arg2","arg3")' failed no such file or directory 
```

我假设 Windows 对字符的解释与 Linux 不同。这个对吗？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T17:59:49.507

如评论中所述，您在命令提示符视为参数的内容与作为 python 的文字字符串传递给 eval 的内容之间存在转义问题：

```
-b 'import sys;sys.path=["."]+sys.path;import pythonFu;pythonFu.myFunction("arg1","arg2","arg3")' 
```

如果这仍然给您带来错误，您可能需要转义双引号：

```
-b 'import sys;sys.path=[\".\"]+sys.path;import pythonFu;pythonFu.myFunction(\"arg1\",\"arg2\",\"arg3\")' 
```

# javascript - Javascript移动重定向问题

> ID：12183250
> 
> 赞同：1
> 
> 时间：2012-08-29T17:18:18.160
> 
> 标签：javascript, redirect

嗨，这已经花了我一个小时左右的时间，我想将我的移动流量重定向到不同的位置，但根据 GEO 到不同的位置，我已经使用 switch, case 使重定向脚本工作正常，但是当我在 if 中添加它时声明 if (screen.width <= 699) 对于移动设备它不起作用，我不知道为什么。这就是我所拥有的

```
 <script language="JavaScript" src="http://j.maxmind.com/app/geoip.js"></script>
 <script language="JavaScript">
   var country = geoip_country_code();
   if (screen.width <= 699) {   
   switch (country)
   {
   case (country = "ES"):
     window.location = "http://url1.com";
   break;
   case (country = "US"):
     window.location = "http://url1.com";
   break;

   default:
     window.location = "http://url2.com";
   break;
  }
 } 
```

像这样工作就好了...

```
 <script language="JavaScript">
var country = geoip_country_code();
switch (country)
{
case (country = "ES"):
  window.location = "http://url1.com";
break;
case (country = "US"):
  window.location = "http://url1.com";
break;

default:
  window.location = "http://url2.com";
break;
} 
```

提前感谢任何可以帮助我的人，我真的很感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T17:24:54.697

在您的 html 标头中包含以下内容：

```
<meta name="viewport" content="width=device-width, user-scalable=no" /> 
```

因此，您的移动设备不会调整为“桌面”仿真

# resize - 如何修复水平导航页面无法正确调整大小？

> ID：12183254
> 
> 赞同：0
> 
> 时间：2012-08-29T17:18:34.307
> 
> 标签：resize, navigation, scroll, scale

请访问： http: [//morningside.cardboardmonet.com/](http://morningside.cardboardmonet.com/)

请注意，网站拖动从左到右滚动，但是当您调整窗口大小时它不会缩放 - 页面只是变成空白。有谁知道如何解决这一问题？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T16:13:51.807

chacelove，请将这段代码添加到你的 js 中

```
$(document).ready(function() {
    initDrag();
});
//
function resize_adjustments() {
    $("#proof").css('width', '100%');
    $("#proof").css('height', '100%');
    $("#proof > div").each(function(i) {
        if($(this).css('left') == "0px") {
            current = $(this).attr('id');
            $(this).css('left', '0');
        } else {
            $(this).css('left', $("#proof").width()+"px");
        }
    });
}
var resizeTimer = null;
$(window).bind('resize', function() {
    if (resizeTimer) clearTimeout(resizeTimer);
    resizeTimer = setTimeout(resize_adjustments, 500);
}); 
```

它起作用了吗？

# java - Java 桌面应用程序中的日志、数据库和邮件支持

> ID：12183257
> 
> 赞同：2
> 
> 时间：2012-08-29T17:18:40.940
> 
> 标签：java, jakarta-ee, log4j, desktop-application, c3p0

我是一名 Java EE 开发人员，我们通常使用 Weblogic 来部署我们的应用程序。现在我面临一个需要日志记录、数据库连接和邮件的新桌面应用程序。

经过一番调查，我意识到桌面应用程序对我来说是一个全新的世界，我不确定我是否选择了正确的库来支持我的应用程序。

这些是我的问题：

1.  在我们的 Weblogic 项目中，我们使用了 Log4j，我想在我的桌面应用程序中再次使用它。这是个坏主意吗？我应该使用更好的日志框架吗？

2.  在 Weblogic 中，我们使用 JNDI 检索数据库连接，但现在似乎不可能这样做。如何在桌面应用程序中执行相同的操作，以便连接远程数据库？c3p0 + 数据库驱动程序的组合是解决这个问题的好方法吗？

3.  是否有任何框架/JAR 提供所有这些东西（日志 + ddbb + 邮件）作为集成解决方案？同事告诉我[Spring](http://www.springsource.org/)可以提供帮助。我还找到[了 Warework](http://warework.com/download/detail.page?lib=com.warework.distribution.warework-java-dist-connected-pcmac&ver=1.0.0)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T18:06:45.380

> 在我们的 Weblogic 项目中，我们使用了 Log4j，我想在我的桌面应用程序中再次使用它。这是个坏主意吗？我应该使用更好的日志框架吗？

不，这不是一个坏主意，而且效果很好。就个人而言，我会选择它，`java.util.logging`因为它可以很好地完成工作，并且它减少了您的应用程序的占用空间（存储）。虽然，它的配置有点棘手。

> 在 Weblogic 中，我们使用 JNDI 检索数据库连接，但现在似乎不可能这样做。如何在桌面应用程序中执行相同的操作，以便连接远程数据库？c3p0 + 数据库驱动程序的组合是解决这个问题的好方法吗？

您可以使用纯 JDBC API（互联网上提供大量示例）直接连接到数据库`java.sql`，但始终必须将专有数据库驱动程序作为应用程序的一部分（mySQL、Oracle、DB2 等）分发。此外，可以通过使用它们的专有 API（相当容易封装）直接使用这些驱动程序提供的连接池。尽管如此，还是有很多问题：

1.  潜伏; 数据库协议在延迟（客户端和数据库服务器之间的距离）方面相当敏感。在英国拥有数据库并在美国拥有桌面客户端可能不是一个好主意。
2.  安全 1；您必须将数据库用户凭据分发给每个桌面客户端。请注意这一点。
3.  安全 2；您的数据库安全要求可能需要传输安全（数据包加密）。
4.  更换管理层; 对您的数据库应用非向后兼容更新需要您更新所有桌面客户端（相信我——这并不好玩）。
5.  网络; 根据您的环境，某些端口和/或协议可能会被阻止。

> 是否有任何框架/JAR 提供所有这些东西（日志 + ddbb + 邮件）作为集成解决方案？同事告诉我 Spring 可以提供帮助。我还找到了Warework。

Logging and database access are not an issue and work fairly well without any third-party framework. Of course, those frameworks might provide value regarding other aspects (abstraction, DI, JDBC abstraction, etc.), but this is a topic of detailed software design. Sending emails directly from a desktop application might become an issue, regardless of the framework in use. Just some things to keep in mind:

1.  which SMTP relay server do you want to use?
2.  in case of an enterprise environment, your IT operations teams might not allow you to use their SMTP server from each desktop (keep spam in mind).

* * *

**Conclusion:** In desktop scenarios an application server is not a bad idea either. You should have your desktop application to communicate with an application server only by using e.g. JSON, XML, SOAP over HTTP/HTTPS or RMI, etc. The application should be responsible for the complex tasks like database access, transaction management, fine grained security, email, etc.

# tsql - T-SQL 从日期范围中获取月份

> ID：12183260
> 
> 赞同：-1
> 
> 时间：2012-08-29T17:18:57.473
> 
> 标签：tsql

我有一个带有 id 和开始日期和结束日期的表。我想插入到另一个表中，每个月的开始数据和结束日期之间的结束日期和 ID，例如

```
ID  Start Date  End Date
1   2012-01-01  2012-03-31
2   2012-10-01  2012-12-31 
```

结果

```
ID  MONTH END
1   2012-01-31
1   2012-02-29
1   2012-03-31
2   2012-10-31
2   2012-11-30
2   2012-12-31 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T17:43:42.400

这个答案做了一些假设——没有结束日期大于开始日期，但你应该看看它是如何工作的。它创建一个递归联合 CTE 并使用它来计算结束日期

```
CREATE TABLE #Dates
(
    ID INT IDENTITY PRIMARY KEY,
    START_DATE DATETIME2(0) NOT NULL,
    END_DATE DATETIME2(0) NOT NULL
)

INSERT INTO #Dates VALUES ('2012-01-01', '2012-03-31'), ('2012-10-01','2012-12-31')

WITH MONTHS ([ID],[Month],[Date], [End])
AS
(
    SELECT ID, DATEPART(m,START_DATE) AS [Month], START_DATE AS [Date], DATEADD(s,-1,DATEADD(m,DATEDIFF(m,0,START_DATE)+1,0)) as [End]
    FROM #Dates
    UNION ALL
    SELECT D.ID, DATEPART(m,DATEADD(m,1,[Date])),DATEADD(m,1,[Date]), DATEADD(s,-1,DATEADD(m,DATEDIFF(m,0,DATEADD(m,1,[Date]))+1,0)) as [End]
    FROM #Dates D
    INNER JOIN  MONTHS M
    ON D.ID = M.ID
    WHERE DATEADD(m,1,[Date]) < [END_DATE]
)

SELECT * 
FROM MONTHS ORDER BY ID, Date

DROP TABLE #Dates 
```

# javascript - 当前 GMT 区域如何在 Javascript 中定义？

> ID：12183261
> 
> 赞同：2
> 
> 时间：2012-08-29T17:18:55.857
> 
> 标签：javascript, jquery

我刚刚`08/23/2012`在javascript中投射了一个日期：

```
var value = '08/23/2012';
var newdate = new Date(value); 
```

`newdate`恰好是日期`{Thu Aug 23 2012 00:00:00 GMT+0100 (BST)}`

我住在伦敦（格林威治标准时间 0:00），那么 +1 假设来自哪里，我该如何正确设置它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T17:21:09.127

`Europe/London`由于夏令时方案，您在夏季时区是 GMT+0100。

这就是为什么通常最好根据位置配置系统，并通过查找[tz 数据库](http://en.wikipedia.org/wiki/Tz_database)来调整时区。不幸的是，浏览器中的 JavaScript 实现在时区的一般处理方面相当糟糕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T17:22:06.500

由于夏令时，伦敦目前是 GMT+1。

如果您希望日期不受时区或 DST 影响，您需要做两件事：

1.  使用时间戳定义日期。时间戳是自纪元以来的毫秒数，并且与时区和 DST 完全无关
2.  使用这些`Date.getUTC___()`函数以 UTC 格式获取日期和时间，这基本上是 GMT 但没有夏令时。

# gwt - 在 GWT 中嵌入 google-plus

> ID：12183263
> 
> 赞同：2
> 
> 时间：2012-08-29T17:19:11.527
> 
> 标签：gwt, google-plus

我正在尝试将 Google-Plus 嵌入到我的 GWT 应用程序中。我希望将它嵌入到 Horizo​​ntalPanel 中。我确实读过[+1button 开发者 google](https://developers.google.com/+/plugins/+1button/)。我在 stackoverflow 中没有找到任何关于这个特定问题的帖子。我的问题可能是我不明白如何将 js 包含到 GUI 组件中。我将不胜感激如何将 Google+ 代码添加到面板中的示例。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-30T05:16:21.260

这是如何做到的：

文档：

```
 <!-- Place this tag in your head or just before your close body tag -->
 <script type="text/javascript" src="https://apis.google.com/js/plusone.js"></script>
 <!-- Place this tag where you want the +1 button to render -->
 <g:plusone></g:plusone> 
```

在 GWT 中：

```
private void drawPlusOne() {
    String s = "<g:plusone href=\"http://urltoplusone.com\"></g:plusone>";
    HTML h = new HTML(s);
    somePanel.add(h);

    // You can insert a script tag this way or via your .gwt.xml
    Document doc = Document.get();
    ScriptElement script = doc.createScriptElement();
    script.setSrc("https://apis.google.com/js/plusone.js");
    script.setType("text/javascript");
    script.setLang("javascript");
    doc.getBody().appendChild(script);
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T17:28:26.063

我个人从未在 GWT 中嵌入 +1 按钮，但链接的文章似乎很容易解释。

在“一个简单的按钮”部分，它表明实现 GooglePlus 集成的最简单方法是添加以下内容：

```
<script src="https://apis.google.com/js/plusone.js" />
<g:plusone></g:plusone> 
```

首先，`<script>`标签应该包含在您的`.gwt.xml`文件中。

然后我会实现`<g:plusone></g:plusone>`这样的：

```
public class GPlusOne extends SimplePanel {
    public GPlusOne () {
        super((Element)Document.get().createElement("g:plusone").cast());
    }
} 
```

（请注意，此代码未经测试，但它基于一个简单的概念，即 a`SimplePanel`可以扩展为编译为任何 HTML 元素。）

然后，您可以`GPlusOne`在希望按钮显示的任何地方使用新元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-03T17:40:09.637

我找到了一种更好的方法：

按照这个例子让按钮在一个普通的 html 页面上调用（你可以在这里尝试一个[http://jsfiddle.net/JQAdc/](http://jsfiddle.net/JQAdc/)）

```
<!doctype html>
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<script src="https://apis.google.com/js/plusone.js">
    {"parsetags": "explicit"}
</script>
<script type="text/javascript">
    function gPlusBtn(id, params) {
        /* window.alert("searching for "+ id +" with params: "+ params) */
        paramsObj = eval( '('+params+')' );
        gapi.plusone.render(id, paramsObj );
    }
// params is here just for a reference to simulate what will come from gwt
 params = '{href:"http://1vu.fr", size:"tall"}';

</script>
</head>

<body>
taken from http://jsfiddle.net/JQAdc/
    <div id="gplus" />
    <button onclick="gPlusBtn('gplus', params)">show!</button>
</body>
</html> 
```

然后您可以调用本机方法来触发 Activity 启动时的按钮显示（如果您使用的是 MVP）。

```
protected native void plusOneButton(String id, String params) /*-{
    $wnd.gPlusBtn(id, params);
}-*/; 
```

您可以有多个具有不同 url 的按钮，这就是为什么将 id 作为参数保留的原因。

**NOTE:** for me the raw HTML works on localhost, but the GWT version. I have to deploy to the server to be able to see the results

# python - satchmo nginx 重定向到 https 然后到 http 并返回

> ID：12183268
> 
> 赞同：1
> 
> 时间：2012-08-29T17:19:47.497
> 
> 标签：python, django, uwsgi, satchmo

我对一个名为 satchmo 的 django 项目有一个奇怪的问题，我使用 nginx 和 uwsgi 进行部署。

发生的事情是应用程序确实响应并且它重定向到 https 然后重定向到 http 并返回到 https 直到 nginx 停止并且应用程序永远不会响应。

帮我弄清楚这一点。谢谢！

这是我的 nginx 站点可用配置文件：

```
server {
   listen 80;
   server_name miche.maumercado.com;
   rewrite      ^ https://$server_name$request_uri? permanent;
}

server {
        listen 443;
        charset utf-8;
        server_name miche.maumercado.com;
        ssl on;
        ssl_certificate /home/ubuntu/test.pem;
        ssl_certificate_key /home/ubuntu/cert-EO5rjY;
        access_log /home/ubuntu/logs/miche/nginx/access.log;
        error_log /home/ubuntu/logs/miche/nginx/error.log;
        client_max_body_size 100m;
        location ^~ /static/ {
                alias /home/ubuntu/django-projects/miche_store/static-collect/;
                expires max;
        }

        location ^~ /media/ {
                alias /home/ubuntu/django-projects/miche_store/media/;
                expires max;
        }

        location / {
                uwsgi_pass unix:/tmp/uwsgi_miche.sock;
                include /etc/nginx/uwsgi_params;
        }

} 
```

这是 /etc/init 中的 uwsgi.conf 文件：

```
# file: /etc/init/uwsgi_miche.conf
description "uWSGI starter"

start on (local-filesystems and runlevel [2345])
stop on runlevel [016]

respawn

# home - is the path to our virtualenv directory
# pythonpath - the path to our django application
# module - the wsgi handler python script

exec /home/ubuntu/ve/miche_store/bin/uwsgi \
--uid ubuntu \
--pythonpath /home/ubuntu/django-projects/miche_store \
-H /home/ubuntu/ve/miche_store \
--socket /tmp/uwsgi_miche.sock \
--chmod-socket 644 \
--module wsgi \
--logdate \
--optimize 2 \
--processes=6 \
--max-requests=5000 \
--master \
--vacuum \
--logto /home/ubuntu/logs/miche/uwsgi.log 
```

这是我的 wsgi.py 文件：

```
import os
import sys
import site

site.addsitedir('/home/ubuntu/ve/miche_store/lib/python2.6/site-packages')
sys.path.append(os.path.abspath(os.path.dirname(__file__)))
sys.path.append(os.path.join(os.path.realpath(os.path.dirname(__file__)), '../'))

os.environ['DJANGO_SETTINGS_MODULE'] = 'miche_store.settings'

import django.core.handlers.wsgi
application = django.core.handlers.wsgi.WSGIHandler() 
```

感谢大家的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T17:32:37.463

Satchmo 包含一个名为 的中间件`satchmo_store.shop.SSLMiddleware.SSLRedirect`，它会自动重定向到站点的 SSL/非 SSL 部分。如果您希望通过 SSL 提供 URL，则必须设置通过 SSL 提供的 URL，否则中间件将重定向到非 SSL 页面。从文档：

> 该中间件通过在 urls.py 文件中说明应该保护哪些路径来解决重定向到（和来自）SSL 安全路径的问题。要保护路径，请将额外的 view_kwarg 'SSL':True 添加到 view_kwargs。
> 
> 例如
> 
> ```
> urlpatterns = patterns('some_site.some_app.views',
>     (r'^test/secure/$','test_secure',{'SSL':True}),
>      ) 
> ```
> 
> 'SSL':False 或未指定 'SSL' 的 kwarg 的所有路径都被路由到不安全的路径。
> 
> 例如
> 
> ```
> urlpatterns = patterns('some_site.some_app.views',
>     (r'^test/unsecure1/$','test_unsecure',{'SSL':False}),
>     (r'^test/unsecure2/$','test_unsecure'),
>      ) 
> ```

在您的情况下，由于您通过 SSL 为整个站点提供服务，您可能只需在`settings.py`文件中禁用该中间件。

# javascript - 为什么我需要为扩展函数设置构造函数？

> ID：12183271
> 
> 赞同：3
> 
> 时间：2012-08-29T17:19:56.107
> 
> 标签：javascript, constructor, extend

我试图完全理解“扩展”在 javascript 中的工作原理。

这是我在谷歌上找到的一个简单的扩展函数

```
function extend(child, parent) {

    var f = function() {}
    f.prototype = parent.prototype;

    var i;

    for( i in parent.prototype ) {
        child.prototype[i] = parent.prototype[i];
    }

    child.prototype.constructor = child;
    child.parent = parent;

} 
```

它有效，但我不明白“child.prototype.constructor = child”部分。没有它，该功能仍然有效。

线路的目的是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T19:18:28.297

不，你在哪里找到的？它混合了两种方法：

## 经典原型继承

```
function inherit(child, parent) {
    var f = function() {}
    f.prototype = parent.prototype;

    child.prototype = new f();
    child.prototype.constructor = child;
} 
```

此函数创建一个直接继承自函数原型对象的新对象`parent`。它是 . 的旧式同义词[`Object.create()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/create)。这样，一个原型链就建立起来了——所有的实例都`child`继承自`parent.prototype`。因为生成了要覆盖的新对象`child.prototype`，所以[需要更新“constrcutor”属性](https://stackoverflow.com/q/8093057/1048572)。

## 混合继承

这个函数只是遍历父原型对象的所有属性，并将它们复制到子原型对象上。这就是常见的辅助函数`extend`所做的。它不会重置子函数的“原型”属性，但也不会设置继承链。

```
function extend(child, parent) {
    for (var i in parent.prototype ) {
        child.prototype[i] = parent.prototype[i];
    }
} 
```

你是对的，线

```
child.prototype.constructor = child; 
```

在这里非常没用 - “构造函数”属性不可枚举，不会受到`extend`.

此外，您的函数将子函数对象的“父”属性设置为父函数，这不是必需的：

```
child.parent = parent; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T17:39:10.207

在我看来，'child.prototype.constructor' 是对象的基本/普通实现，它允许其他对象从它扩展而无需继承相同的父对象。因此为什么它在'child.parent = parent'之前声明。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T18:34:37.697

这可能不会直接回答您的问题，但我想建议您使用`extend`John Resig 的实现：

*   [简单的 JavaScript 继承](http://ejohn.org/blog/simple-javascript-inheritance/)

它允许您创建一个名为 的构造函数`init`，如下所示：

```
var MyClass = Class.extend({
    init: function() {
         console.log("Running a constructor");
    }
}); 
```

并实例化这样的对象（正常）：

```
var obj = new MyClass(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T17:42:17.380

这个例子展示了如何在 javascript 中继承一个类

```
var a = function(){
    // class a constructor
    this.a_priviligiate_var = 1;
}
a.prototype.a_public_var = 2;
var b = function(){
    // class b constructor
    // super call of class a constructor
    // this line makes b class to inherit all privileged vars
    b.prototype.constructor.call(this)
    this.b_priviligiate_var = 3;
}
b.prototype.b_public_var = 4;
b.prototype = new a();
var c = new b(); 
```

定义一个 claas：

```
var a = function(){
    // class a constructor
    this.a_priviligiate_var = 1;
}
a.prototype.a_public_var = 2; 
```

定义另一个类：

```
var b = function(){
    // class b constructor
    // super call of class a constructor
    // this line makes b class to inherit all privileged vars
    b.prototype.constructor.call(this)
    this.b_priviligiate_var = 3;
}
b.prototype.b_public_var = 4; 
```

设置超级（父）类。此行复制所有 b.prototype

```
b.prototype = new a(); 
```

创建 c 的实例

```
var c = new b(); 
```

# c++ - SSE 类型的容器

> ID：12183275
> 
> 赞同：4
> 
> 时间：2012-08-29T17:20:16.287
> 
> 标签：c++, gcc

我正在尝试将 SSE 类型存储在 stl 容器中。我试过这个：

```
#include <iostream>
#include <vector>

int main()
{
  typedef int v4sf __attribute__ (( vector_size(4*sizeof(float)) ));

  v4sf a; // compiles

  std::vector<v4sf> v1; // compiles, but nothing is actually allocated

//  std::vector<v4sf> v2(10); // compiler error: can’t convert between vector values of different size

  std::vector<v4sf> v(10, a); // Compiles, but segfaults

  return 0;
} 
```

但如前所述，在不提供要复制的对象的情况下进行分配会产生编译器错误，而在提供对象的情况下进行分配会编译但会出现段错误。谁能解释为什么我不能将这些 SSE 对象存储在这样的 STL 容器中（或者更好的是，提供正确的方法）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T21:11:56.723

要使其正常工作，您必须实现自定义分配器。要使用它，它是类型旁边的参数： std::vector< SSEType, CustomAlloc> 容器；其中 CustomAlloc 是分配器。您必须使用 alligned_malloc 或 memalign 在分配器中获取内存，但这是成功的方法。

可以在此处找到此类（不太容易实现）的示例： [实现分配器示例](http://www.codeproject.com/Articles/4795/C-Standard-Allocator-An-Introduction-and-Implement)

我已经对 SSE 做了很多，我观察到，这是使用对齐 malloc 并将其用于我的计算的最简单方法。

# c# - 反序列化包含以“@”开头的变量的 JSON

> ID：12183276
> 
> 赞同：2
> 
> 时间：2012-08-29T17:20:17.590
> 
> 标签：c#, .net, windows-8

我正在开发一个 Windows 8 应用程序，其中我需要反序列化包含以“@”符号开头的变量的 JSON 提要。我已经定义了具有与 JSON 中的变量同名的成员的类，然后调用 DataContractJsonSerializer 将 JSON 反序列化为 C# 类。除了以“@”开头的变量名外，这一切都很好。像这样：

```
public class HotelDetails
{
    public string hotelId;
    public string name;
    public string address1;
...

} 
```

JSON 看起来像这样：

```
{"@order":"0",
   "hotelId":268026,
   "name":"Monte Cristo",
   "address1":"600 Presidio Avenue",
... 
```

由于我无法定义以“@”开头的 C# 变量，如何反序列化“@order”变量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T17:27:01.693

试试这个？

```
[DataContract]
public class HotelDetails
{
    [DataMember(Name="@order")]
    public string order;

    [DataMember(Name="hotelId")]    
    public string hotelId;

    [DataMember(Name="name")]  
    public string name;

    [DataMember(Name="address1")]  
    public string address1;
} 
```

不知道这是否有效……还没有测试过。

# java - 用于持久性的序列化缺点

> ID：12183280
> 
> 赞同：1
> 
> 时间：2012-08-29T17:20:24.620
> 
> 标签：java, multithreading, serialization

[从http://docs.oracle.com/html/E24396_01/ejb3_overview_why.html](http://docs.oracle.com/html/E24396_01/ejb3_overview_why.html)获取以下给定文本

“序列化是 Java 的内置机制，用于将对象图转换为一系列字节，然后可以通过网络发送或存储在文件中。序列化非常易于使用，但也非常有限。它必须存储并一次检索整个对象图，不适合处理大量数据。**如果更新信息时发生错误，它无法撤消对对象所做的更改，因此不适合对数据完整性要求严格的应用程序。多线程或者程序不能在不相互冲突的情况下同时读取和写入相同的序列化数据**。它不提供查询能力。所有这些因素使得序列化对于除了最微不足道的持久性需求之外的所有需求都是无用的。

我不清楚粗体字。有人可以举一个例子来支持这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T17:53:39.643

这是一个愚蠢的观点，但这篇文章试图指出序列化并没有真正内置“事务”的概念。当你写一个序列化的对象图时，你把整个东西写到一个流中，要么完全成功，要么失败，留下一个部分写入的流。同样的想法也适用于并发，两个不同的线程不能同时写入同一个流。

也就是说，您可以通过将图形写入新位置，然后在完成后将新字节交换到旧位置来“模拟”事务存储。但是，这也取决于数据的最终存放位置（存储位置的功能）。序列化本身甚至不是一种持久性策略，因为它仍然需要在某个地方*存储*序列化的字节。“并发”点遵循相同的论点，因为您可以写入 2 个不同的位置，然后使用底层存储的原子性保证来处理并发问题。

还有其他更好的反对使用序列化进行*长期*存储的论点，即随着应用程序的类随着时间的推移而发生变化，保持向后兼容性的困难。

# php - PHP程序无法正常工作

> ID：12183281
> 
> 赞同：0
> 
> 时间：2012-08-29T17:20:31.017
> 
> 标签：php, networking, network-programming, localhost

我有一个奇怪的问题。这是我的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>

<body>
<?php
$fp=fopen("test.txt","w",true);
if($fp)
{
$start=time();
for($i=0;$i<=17800;$i++)
{
    fwrite($fp,"bandwith");
}
fclose($fp);
$stop=time();
$diff=round($stop-$start,2);
$fsize=round(filesize("test.txt")/1024,2);
$bandwidth=$fsize/$diff;
echo "<strong>The speed of your broadband is</strong> ".$bandwidth;
}
else
{
    echo ("problem with permission");
}
?>

</body>
</html> 
```

我实际上是在尝试计算带宽。我得到的错误是 $bandwidth 计算部分上的“除以零”。奇怪的是，当我继续刷新窗口时，我突然得到了答案，然后问题又来了下次刷新。

额外信息：

我发现当 $start 和 $stop 相同时会发生错误。现在我的问题是：本地主机这么快就可以在同一时间内完成文本文件打开和写入部分导致除法我的零错误？我还检查了文本文件，它包含数据，每隔一段时间就会被删除和写入。我只是想清楚地解释它背后的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T17:28:18.817

如果您需要更准确的时间计算，并且您的系统支持它，您可以使用[`microtime`](http://php.net/manual/en/function.microtime.php)：

```
$time_including_microseconds = microtime(); 
```

请参阅手册中有关爆炸的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T17:25:01.133

您可以使用此函数来测量文件访问时间：

[http://php.net/manual/en/function.filemtime.php](http://php.net/manual/en/function.filemtime.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T17:29:00.080

正如评论所说，您的文件操作（写入）很可能在不到一秒的时间内完成，导致除以零。

为了实现您的目标，考虑使用 PHP 的[microtime](http://us2.php.net/manual/en/function.microtime.php)函数。这包括带有时间戳的毫秒数。

另请参阅： [测量 php 脚本执行时间的准确方法](https://stackoverflow.com/questions/6245971/accurate-way-to-measure-execution-times-of-php-scripts)

# css - 确保监视器不接收移动设备的@media 查询

> ID：12183283
> 
> 赞同：0
> 
> 时间：2012-08-29T17:20:33.337
> 
> 标签：css

我使用@media 查询构建了一个很好的模板，它有四种不同的布局：

850+px 宽度
<850px 宽度
iphone 横向
iphone 纵向

它的效果很棒，直到您将监视器窗口缩小到 480 像素以下（iphone 横向），然后它开始接收较小尺寸的 @media 查询。

有没有办法避免这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T18:57:32.757

我个人觉得最好在较小的浏览器窗口大小上显示“iPhone”布局，因为您的内容可能已经针对该布局进行了优化，但是，如果您真的想防止这种情况，您可以在声明中使用该`device-width`属性。`@media`类似的东西`@media only screen and (max-device-width: 720px) { ... }`将针对设备宽度而不是视口宽度。比较[这个](http://jsfiddle.net/chrisjlebron/5PNbC/)（视口宽度）与[这个](http://jsfiddle.net/chrisjlebron/ebsYf/)（设备宽度）的行为。使用这些值（更改`min`为`max`、更改像素大小等）并观察行为。另外，不要忘记您可以组合`@media`规则，例如`@media (min-width: 400px) and (max-width: 600px) { ... }`. 看看什么对你有用。

这种方法的问题是移动设备有各种形状和大小，因此您可能会在您没有计划的不同移动设备（我们只是说 Android 手机......）上提供不受欢迎的样式。但是，根据您的需要，这对您来说可能无关紧要。

如果您决定走这条路，这里有一个示例媒体查询和大小的列表来指导您：（`http://css-tricks.com/snippets/css/media-queries-for-standard-devices/`抱歉没有工作链接；显然我在 StackOverflow 上还不够酷，无法发布多个链接）.. .

# php - 在 PHP 中设置引用的类型

> ID：12183285
> 
> 赞同：-3
> 
> 时间：2012-08-29T17:20:50.037
> 
> 标签：php

我目前正在使用类似的东西

```
class User{

    /* @var Contacts*/
    public $contacts = array();
}

$userObj = new User();
$userObj->contacts[] = new Contact(...);
$userObj->contacts[] = new Contact(...); 
```

很难我们可以使用 phpDocumentor 记录变量的类型，是否也可以限制其他类型的对象分配给联系人数组

```
$userObj->contacts[] = 2.3 //should be considered as invalid 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T17:23:14.837

声明`$contacts`为私有并使用 getter 和 setter 方法。

```
Class User{

  private $contacts = array();

  function addContact($contact) {
    if (is_object($contact) && get_class($contact) == "Contact") {
      $this->contacts[] = $contact;
    } else {
      return false;
      // or throw new Exception('Invalid Parameter');  
    }
  }

  function getContacts() {
    return $this->contacts;
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T17:24:06.227

不是它在 php 中的工作方式

这是您可以做的

```
class User{

    /* @var Contacts*/
    private $contacts = array();

    public function setContacts(Contact $contact){
        $this->contacts[] = $contacts;
    }
} 
```

不，你可以像这样使用它

```
$userObj = new User();
$userObj->setContacts(new Contact(...)); 
```

以下会导致错误

```
$userObj->setContacts(2.3); 
```

# java - Java HashTable size() 后跟 values() 在线程中安全吗？

> ID：12183291
> 
> 赞同：0
> 
> 时间：2012-08-29T17:21:13.010
> 
> 标签：java, multithreading, thread-safety, hashtable

我在一个线程中按顺序执行以下操作：

int size = hashTable.size();

foreach.... in ... hasTable.values()

做点什么

我的问题是 foreach 会执行 size 次吗？（即使另一个线程同时放置/删除一个元素？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T17:24:17.727

不，[`HashTable`](http://docs.oracle.com/javase/7/docs/api/java/util/Hashtable.html)在方法级别上是线程安全的（多个线程可以随时调用任何方法）但没有跨方法同步。在您的两条指令之间，其他线程可能会添加/删除甚至清除哈希表。

如果您需要保持这种不变性，请制作一个防御性副本（不必是线程安全的）并`size()`在该副本上执行 /loop ：

```
Map<K, V> map = null;
synchronized(hashTable) {
  map = new java.util.HashMap<>(hashTable);
}
map.size();
for(V v: map.values()) {
  //...
} 
```

这里 for-each 是安全的，并且可以保证运行 size-times。同样如评论中所述，您可以同步`hashTable`：

```
synchronized(hashTable) {
  int size = hashTable.size();
  for(V v: hashTable.values()) {
    //...
  }
} 
```

然而，这种解决方案意味着一次只有一个线程可以执行循环（如果您的循环需要一些时间才能完成，这可能会成为瓶颈）。使用防御性副本，每个线程都有自己的副本，并且多个线程可以同时循环。另一方面，如果该解决方案非常大（复制成本高）但迭代非常快，则该解决方案*会*更好。`hashTable`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T17:23:00.053

`hashTable`如果在执行 foreach 期间另一个线程将修改 ，那么您的代码将抛出`ConcurrentModificationException`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T17:44:35.370

> Java HashTable size() 后跟 values() 在线程中安全吗？

所以不是`values()`方法调用是不安全的。这是您打开一个`values()`由`HashTable`. 如果在迭代时对表进行修改，则迭代器会引发异常。

> 我的问题是 foreach 会执行 size 次吗？（即使另一个线程同时放置/删除一个元素？

如前所述，`HashTable`如果在您遍历它时对其进行了修改，它将引发异常。

`HashTable`几乎已被弃用。如果您正在寻找一个现代的并发版本，`HashMap`那么您应该使用[`ConcurrentHashMap`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ConcurrentHashMap.html)在 Java 5 中添加的 版本。`ConcurrentHashMap`正确处理当您在没有额外同步或复制的情况下迭代它时在后台发生修改的情况：

```
ConcurrentHashMap<...> map = new ConcurrentHashMap<...>();
int size = map.size();
for (... value : map.values()) {
    // may be called more or less than size if other threads add or delete
    ...
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-29T18:07:14.447

您的示例不是线程安全的，但可以像这样轻松地使其成为线程安全的：

```
synchronized(hashTable) {
  int size = hashTable.size();
  foreach.... in ... hasTable.values() {
    // do something
  }
} 
```

# javascript - 如何仅在向上滚动时将页脚粘贴到窗口底部会导致页脚不显示

> ID：12183292
> 
> 赞同：0
> 
> 时间：2012-08-29T17:21:17.373
> 
> 标签：javascript, jquery, html, scroll

我有一个使页面动态的 jQuery 插件（在这里找到：[http](http://css-tricks.com/dynamic-page-replacing-content/) ://css-tricks.com/dynamic-page-replacing-content/ - 在这里演示：http: [//css-tricks.com/examples/DynamicPage](http://css-tricks.com/examples/DynamicPage)）

我的导航栏在页脚中（我知道这通常不是一个好主意，但它适合我网站的布局和目标）。

当页面上的内容不多时，显然页脚在窗口中可见，因此无需采取任何措施。但是，当加载需要滚动条的较长动态页面时，页脚会被推出窗口，以便为内容腾出空间。如果动态页面创建滚动条，我希望页脚停止并将其自身固定到窗口底部，本质上是导航*始终*在视图中。

我已经查看了该站点上的其他解决方案，但要么将页脚永久地粘贴到窗口底部，要么仅在滚动时固定到顶部。我尝试反转这些解决方案值（即从上到下更改）但无济于事。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T17:22:57.733

使用溢出自动或滚动包装在 DIV 中

# android - Admob 允许期限

> ID：12183297
> 
> 赞同：0
> 
> 时间：2012-08-29T17:21:42.440
> 
> 标签：android, admob

我正在为 android 开发应用程序，我想向我的用户展示几个横幅。现在，我`mAdView.loadAd(new AdRequest());`每 30 秒打一次电话。

我想知道，AdMob 是否允许，这是否有效？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T17:42:01.893

只需加载一次广告，您可以在 admob 网站上的应用设置中更改广告刷新率的设置（转到管理设置，然后点击应用名称右侧的顶部编辑）。它会在您指定的几秒钟后加载您的广告。刷新率在 12-120 秒之间。为了获得最佳收入，请根据客户提供的设置刷新率。

# php - 在jquery函数中检索表单

> ID：12183299
> 
> 赞同：0
> 
> 时间：2012-08-29T17:21:48.643
> 
> 标签：php, javascript, jquery, forms

由于我的代码的某些情况，我正在使用表单的以下按钮来调用 jquery 函数：

```
<form id="formElem" name="formElem" enctype="multipart/form-data" action="" method="post">

....

<button name='enviar_candidatura' id='enviar_candidatura' value='enviar_candidatura' onclick='return false;' type='submit'>Enviar Candidatura</button> 

... 
```

调用的jquery函数：

```
$('#enviar_candidatura').bind('click',function(){
    var form = $('#formElem');

    var conta_Duplicates;
    conta_Duplicates=dadosImportantes();
    //alert("Deu");
    var preenchimentoForm=true;
    //alert("Contasssss"+conta1);
    //var eventos=$countEventos;
    var eventos=conta_Duplicates[2];
    //alert("Wiggins"+eventos);
    //var empregos=$countEmpregos;
    var empregos=conta_Duplicates[1];
    //var cursos=$countCursos;
    var cursos=conta_Duplicates[0];

    //alert($countEmpregos);
    /*if($('#formElem').data('errors')){
        preenchimentoForm=false;

        dadosFormularios(form, preenchimentoForm, cursos, empregos, eventos);
        return false;
    }
    else{*/
        dadosFormularios(form, preenchimentoForm, cursos, empregos, eventos);
    //}
}); 
```

现在我需要在这个函数中接收 formElem 以便我可以在这里定义表单的 action="" 并使用 form.action="index.php...." 调用它。

正如您在上面的代码中看到的，我尝试使用

```
var form = $('#formElem'); 
```

但是，这不起作用，我尝试了：

```
form.action = 'index.php?pagina=candidaturasB&'+ qstringA;  
form.submit(); 
```

但没有成功：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T17:25:01.360

由于`form`是一个 jQuery 对象，它没有属性`action`。尝试这个：

```
form.attr('action', 'url'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T17:26:36.787

尝试这个

```
 form.attr("action", 'index.php?pagina=candidaturasB&'+ qstringA)
 form.submit(); 
```

我认为没有方法`.action`，所以您需要将操作设置为属性

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T17:29:12.830

`form`是 jQuery 对象，它没有`action`属性。你应该使用`attr`方法：

```
form.attr('action', 'index.php?pagina=candidaturasB&'+ qstringA); 
```

# android - 用于 Rails + 设计帐户身份验证的存储 Android 帐户

> ID：12183300
> 
> 赞同：1
> 
> 时间：2012-08-29T17:22:01.477
> 
> 标签：android, ruby-on-rails, oauth, devise, oauth-2.0

摘要：我正在尝试使用 Android 应用程序上存储的 Google 帐户来验证本机应用程序中的用户，并使用 Rails 3 + Devise 应用程序提供的 API，但我被卡住了。

详细信息：我们有一个应用程序 (http://push-poll.com)，它可以让用户从一群朋友那里收集反馈。我们还构建了一个原生 Android 应用程序。我们的网络应用程序允许您使用您的 Google 帐户登录，我们希望将该功能扩展到本机 Android 应用程序。Web 应用程序通过 Devise（用于帐户权限）+ Omniauth（用于 Google 帐户信息和 OAuth 交互）来完成此操作。

版本：Android 2.1+、Rails 3.2.2、Devise 2.1.2、Omniauth 1.1.0

建议的身份验证工作流程：

1.  用户在 Android 应用程序上点击“使用 Google 帐户登录”
2.  用户使用 AccountManager 在 Android 设备上选择一个存储的帐户并授予权限
3.  Android 应用程序将 Google 帐户令牌发送到 Rails API
4.  **Rails 应用程序将帐户令牌发送到 Google OAuth API <--这是我卡住的地方**
5.  **谷歌返回成功和帐户信息（具体来说，姓名+电子邮件）**
6.  Rails 应用程序通过电子邮件地址查找/创建用户
7.  Rails 应用程序从用户帐户创建/读取/更新访问令牌
8.  Rails 访问令牌重新调整到 Android 应用程序（这是我们的应用程序当前使用标准登录处理 api 访问的方式）
9.  Android 应用在所有 API 调用中都包含 Rails 访问令牌

我已经搜索了 Google 的文档，但我完全坚持 (4) 和 (5)。一旦我有了 Google 提供的电子邮件地址，一切都会像现在一样正常运行（对于标准登录或 Google/Omniauth/Devise 帐户）。根据我的最佳猜测，这可以通过以下任一方法解决：

*   为与网络应用程序共享的 Android 应用程序创建一个 API/密钥，以便向 Google Accounts API 发出请求
*   找到一个 Google API 端点，我可以简单地验证一个 Android 帐户令牌并返回帐户详细信息

至少一个星期以来，我一直在用头撞墙。

仅供参考：我是 Web 开发人员，我们的 Android 开发人员非常友好地为我提供了一个已删除的 Android 应用程序，该应用程序会将访问令牌从 Android 发送到我选择的 API 端点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T17:00:28.377

好的，所以我能够通过更好地了解 OAuth 来解决这个问题。显然，令牌能够在不同的服务器之间传递，谁持有它们并不重要，它们继续发挥作用。

因此，使用 Android 的 AccountManager，我能够为范围 userinfo.email 提取具有足够权限的令牌，然后将其发送到服务器。然后服务器可以命中：

[https://www.googleapis.com/oauth2/v1/tokeninfo?access_token=TOKENVALUE](https://www.googleapis.com/oauth2/v1/tokeninfo?access_token=TOKENVALUE)

注意：这是通过 HTTPS 发送到 Rails 应用程序的 - 您永远不应该通过 Internet 以明文形式发送令牌。

这是我们如何执行此操作的部分剪辑：

```
# Use Google's Token Verification scheme to extract the user's email address
token = params[:token]
uri = URI.parse("https://www.googleapis.com")
http = Net::HTTP.new(uri.host, uri.port)
http.use_ssl = true
http.verify_mode = OpenSSL::SSL::VERIFY_NONE
path = "/oauth2/v1/tokeninfo?access_token=#{token}"
resp, data = http.get(path)
data = JSON.parse(data)
if resp.code == "200"
  # Find a user
  @user = User.where(:email => data["email"]).first
  if !@user
    #Create a user with the data we just got back
  end
else
  # Bad or revoked token 
end 
```

# parsing - 解析 Get-Counter 数据以获取值

> ID：12183303
> 
> 赞同：4
> 
> 时间：2012-08-29T17:22:20.177
> 
> 标签：parsing, powershell, powershell-2.0

我想获取我的计算机在某个时间间隔内发送/接收的总字节数。

Powershell 有一个方便的 cmdlet，可以让我访问该信息（Qualcomm Atheros AR9285 无线网络适配器是我的接口名称）：

`Get-Counter -Counter "\Network Interface(Qualcomm Atheros AR9285 Wireless Network Adapter)\Bytes received/sec" -Continuous`

它可以很好地获取数据，但结果如下：

![在此处输入图像描述](../Images/96e7969a4768fc0f908cb2a5dd18d30a.png)

我可以用我想要的方式来关闭它，`Get-Counter -Counter "\Network Interface(Qualcomm Atheros AR9285 Wireless Network Adapter)\Bytes received/sec" -Continuous | Format-Table -Property Readings`但是在我想要的值前面仍然有一个很长的路径名。

此外，如果我尝试将输出设置为某个变量，则不会完成任何赋值（变量保持为空）。

我怎样才能以体面的格式获取这些数据？

**注意：**目标是保持对这些信息的统计，然后在达到阈值时执行一些操作。如果我可以使上述方法起作用，我可以做到这一点，但是如果有更好的方法来做到这一点，我很乐意改用它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-29T17:43:20.060

通过管道传输到`Foreach-Object`CounterSamples 属性并从中获取值。CounterSamples 是一个数组，值在第一项中：

```
Get-Counter -Counter "\Network Interface(Qualcomm Atheros AR9285 Wireless Network Adapter)\Bytes received/sec" -Continuous |
Foreach-Object {$_.CounterSamples[0].CookedValue} 
```

# c# - 我可以为 dapper-dot-net 映射指定数据库列名称吗？

> ID：12183310
> 
> 赞同：23
> 
> 时间：2012-08-29T17:22:44.063
> 
> 标签：c#, database, dapper

dapper-dot-net 有没有办法使用属性来指定应该使用的列名而不是属性名？

```
public class Code
{
    public int Id { get; set; }
    public string Type { get; set; }
    // This is called code in the table.
    public string Value { get; set; }
    public string Description { get; set; }
} 
```

我希望能够为我的属性命名，无论我选择什么。我们的数据库没有一致的命名约定。

如果不使用 dapper，是否还有其他类似的选项？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-29T18:45:09.343

您还可以查看 [Dapper-Extensions](https://github.com/tmsmith/Dapper-Extensions)。

> Dapper Extensions 是一个小型库，通过为您的 POCO 添加基本的 CRUD 操作（获取、插入、更新、删除）来补充 Dapper。

它有一个[自动类映射器](https://github.com/tmsmith/Dapper-Extensions/wiki/AutoClassMapper)，您可以在其中指定自定义字段映射。例如：

```
public class CodeCustomMapper : ClassMapper<Code>
{
    public CodeCustomMapper()
    {
        base.Table("Codes");
        Map(f => f.Id).Key(KeyType.Identity);
        Map(f => f.Type).Column("Type");
        Map(f => f.Value).Column("Code");
        Map(f => f.Description).Column("Foo");
    }
} 
```

然后，您只需执行以下操作：

```
using (SqlConnection cn = new SqlConnection(_connectionString))
{
    cn.Open();
    var code= new Code{ Type = "Foo", Value = "Bar" };
    int id = cn.Insert(code);
    cn.Close();
} 
```

请记住，您必须将自定义地图保存在与 POCO 类相同的程序集中。该库使用反射来查找自定义地图，它只扫描一个程序集。

**更新**：

您现在可以使用 SetMappingAssemblies 注册要扫描的程序集列表：

```
DapperExtensions.SetMappingAssemblies(new[] { typeof(MyCustomClassMapper).Assembly }); 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-08-29T17:41:04.420

如果您直接或在过程中使用 select 语句，您可以只为列设置别名。

```
SELECT code as Value FROM yourTable 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-08-25T14:54:35.433

另一种方法是手动将其与动态结果进行映射。

```
var codes = conn.Query<dynamic>(...sql and params here...)
                 .Select<dynamic,Code>(s=>new Code{Id = s.Id, Type = s.Type, Value = s.code, Description = s.Description}); 
```

显然，这引入了类型安全场景，因为您正在查询动态。此外，您必须手动映射列，这很糟糕。

但是，我倾向于喜欢这种方法，因为它非常透明。如果需要，您可以强制转换（如 Enums 的情况），并且基本上只需执行从 db 记录集到您的属性所需的任何操作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-01T07:45:58.787

对于选择，您可以将构造函数添加到类中以执行映射。构造函数参数名称必须与表列匹配。

下面是一个来自源代码的例子。该表将正确映射到该类。

桌子：

```
CREATE TABLE #Users (Id int, Name varchar(20)) 
```

班级：

```
 class UserWithConstructor
    {
        public UserWithConstructor(int id, string name)
        {
            Ident = id;
            FullName = name;
        }
        public int Ident { get; set; }
        public string FullName { get; set; }
    } 
```

# gcc - mfence 和 asm volatile ("" : : : "memory") 的区别

> ID：12183311
> 
> 赞同：27
> 
> 时间：2012-08-29T17:22:50.553
> 
> 标签：gcc, x86, memory-barriers

据我了解，`mfence`是硬件内存屏障，`asm volatile ("" : : : "memory")`而是编译器屏障。但是，可以`asm volatile ("" : : : "memory")`用来代替 mfence。

我感到困惑的原因是[这个链接](http://gcc.gnu.org/ml/gcc/2003-04/msg01180.html)

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-30T19:45:15.750

好吧，只有在内存排序较弱的架构上才需要内存屏障。x86 和 x64 没有弱内存排序。在 x86/x64 上，所有存储都有一个释放栅栏，所有负载都有一个获取栅栏。所以，你应该只需要`asm volatile ("" : : : "memory")`

有关 Intel 和 AMD 的良好概述以及对相关制造商规格的参考，请参阅[http://bartoszmilewski.com/2008/11/05/who-ordered-memory-fences-on-an-x86/](http://bartoszmilewski.com/2008/11/05/who-ordered-memory-fences-on-an-x86/)

通常，诸如“易失性”之类的东西是在每个字段的基础上使用的，其中对该字段的加载和存储是本机原子的。如果对字段的加载和存储已经是原子的（即所讨论的“操作”是对单个字段的加载或存储，因此整个操作是原子的）`volatile`，x86/x64 上不需要字段修饰符或内存屏障。尽管有可移植代码。

当涉及到非原子的“操作”时——例如加载或存储到比本地单词更大的字段或加载或存储到“操作”中的多个字段——可以查看操作的方式无论 CPU 架构如何，都需要 原子*。**通常*这是通过像互斥锁这样的同步原语来完成的。互斥体（我使用的那些）包括内存屏障以避免处理器重新排序等问题，因此您不必添加额外的内存屏障指令。我通常认为不使用同步原语是过早的优化；但是，过早优化的本质当然是 97% 的时间 :)

如果您不使用同步原语并且您正在处理多字段不变量，那么确保处理器不会重新排序存储和加载到不同内存位置的内存屏障很重要。

现在，就不在 asm volatile 中发出“mfence”指令，而是在 clobber 列表中使用“内存”而言。从我能[读到的](http://gcc.gnu.org/onlinedocs/gcc-4.6.0/gcc/Extended-Asm.html)

> 如果您的汇编指令以不可预知的方式访问内存，请将“内存”添加到被破坏的寄存器列表中。这将导致 GCC 不会在整个汇编器指令中将内存值缓存在寄存器中，并且不会优化对该内存的存储或加载。

当他们说“GCC”并且没有提及 CPU 时，这意味着它仅适用于编译器。缺少“mfence”意味着没有 CPU 内存屏障。您可以通过反汇编生成的二进制文件来验证这一点。如果没有发出“mfence”指令（取决于目标平台），那么很明显没有告诉 CPU 发出内存栅栏。

根据您所使用的平台和您正在尝试做的事情，可能会有一些“更好”或更清晰的东西......可移植性无法承受。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-02-03T19:34:50.673

*   `asm volatile ("" ::: "memory")`只是一个编译器障碍。
*   `asm volatile ("mfence" ::: "memory")`既是编译器障碍，又是`MFENCE`
*   `__sync_synchronize()`也是编译器屏障和完整的内存屏障。

因此`asm volatile ("" ::: "memory")`不会阻止 CPU 重新排序独立的数据指令本身。正如所指出的 x86-64 具有强大的内存模型，但 StoreLoad 重新排序仍然是可能的。如果您的算法需要一个完整的内存屏障才能工作，那么您需要`__sync_synchronize`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-04-10T10:01:05.013

有两种重新排序，一种是编译器重新排序，另一种是 CPU 重新排序。

x86/x64 具有相对强大的内存模型，但在 x86/x64 上，StoreLoad 重新排序（稍后加载通过更早的存储）可能会发生。见[http://en.wikipedia.org/wiki/Memory_ordering](http://en.wikipedia.org/wiki/Memory_ordering)

*   `asm volatile ("" ::: "memory")`只是一个编译器障碍。
*   `asm volatile ("mfence" ::: "memory")`既是编译器屏障又是 CPU 屏障。

这意味着，只使用编译器屏障，只能防止编译器重新排序，但不能阻止 CPU 重新排序。这意味着在编译源代码时没有重新排序，但重新排序可以在运行时发生。

因此，这取决于您的需求，使用哪一个。

# vb.net - 如何使用 VB.net 和 IMAP 从邮件服务器检索电子邮件的数量？

> ID：12183316
> 
> 赞同：1
> 
> 时间：2012-08-29T17:22:59.570
> 
> 标签：vb.net, email, gmail, imap

我设法使用 IMAP 和 vb.net 从邮件服务器 (Gmail.com) 成功回复，并在这篇[文章中使用此代码](https://stackoverflow.com/q/12126124/1610671)

现在，我想从收件箱文件夹中检索电子邮件的数量，怎么办？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T19:07:41.613

连接到服务器后，您将发出一组命令，如下所示：

```
A001 LOGIN <username> <password>
A002 SELECT INBOX 
```

作为对 SELECT INBOX 的响应，服务器将响应一堆响应：

```
* OK [UIDVALIDITY 38]
* 13 EXISTS
* 0 RECENT
A002 OK Inbox selected.
... 
```

`EXISTS`响应是收件箱中的消息数。

# asp.net - 在 ASP.Net ListView 中编辑时按下 ENTER 时的反直觉行为？

> ID：12183317
> 
> 赞同：1
> 
> 时间：2012-08-29T17:23:00.537
> 
> 标签：asp.net, listview, webforms

我在同一个 .ASPX 页面上有一个 ListView 和一个 DetailsView 组件。DetailsView 显示 ListView 中显示的行的汇总总计。为了使其保持最新，我在 ListView ItemUpdated、ItemInserted 和 ItemDeleted 事件处理程序中调用 DetailsView.DataBind()。

在编辑或插入时在字段中按 ENTER 时，将撤消对当前行的更改，并将第一个可见行置于编辑模式。如果我单击更新按钮而不是按 ENTER，它将按预期工作。

我最初认为这种行为只是现状，因为它发生在我添加 DataBind 调用之前，但是我偶然注意到如果更新按钮在行中的第一个，而取消按钮在最后，按 ENTER 的行为就像我想要 - 它将更改保存到当前行并退出编辑模式。但这仅在我的 DataBind 调用未到位时才是正确的。

我想我可以为 DetailsView 添加一个刷新按钮，但我真的无法确定哪个更丑，或者必须记住不要按 ENTER。

关于如何使这个东西表现的任何想法？

蒂亚，毫米

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T00:36:26.010

问题是按 ENTER 键“点击”表单上出现的第一个按钮。所以我在其他控件上方创建了一个带有透明图像的按钮，以及以下点击处理程序：

```
protected void TransparentUpdateButton_Click(object sender, ImageClickEventArgs e)
{
    if (ListView1.EditItem != null)
    {
        ListView1.UpdateItem(ListView1.EditIndex, false);
        return;  // must return, InsertItem is always non-null
    }
    if (ListView1.InsertItem != null) // probably an unnecessary test
        ListView1.InsertNewItem(false);
} 
```

也许不是宇宙中最优雅的解决方案，但似乎有效，并且肯定会在默认情况下击败所有地狱。也许如果我没有使用 ImageButtons 这将不是必需的，但是保存、编辑、删除、撤消和插入功能很容易用 16x16 图像表示，文本等价物浪费了水平空间。

无论如何，我会接受的。:-)

# maven-3 - 如何使用声纳配置 JaCoCo

> ID：12183318
> 
> 赞同：2
> 
> 时间：2012-08-29T17:23:00.927
> 
> 标签：maven-3, sonarqube, jacoco

如何使用 Sonar 2.3 和 Maven 3.0.4 配置 JaCoCo？

我的项目是一个多模块的 Maven 项目。我的顶级 pom 有以下内容：

```
 <sonar.core.codeCoveragePlugin>jacoco</sonar.core.codeCoveragePlugin>
    <sonar.dynamicAnalysis>reuseReports</sonar.dynamicAnalysis> 
```

运行 mvn sonar:sonar 后，Sonar 中报告的代码覆盖率为 0%。我应该看到至少 50%。注意我确实在每个子项目的目标文件夹中看到了 jacoco.exec。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-29T09:14:27.767

他们修改了 GitHub 项目结构。示例的新链接是：

[https://github.com/SonarSource/sonar-examples/tree/master/projects/languages/java/code-coverage/ut](https://github.com/SonarSource/sonar-examples/tree/master/projects/languages/java/code-coverage/ut)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T14:31:21.800

考虑升级 Sonar - 当前版本是 3.2，并且有 JaCoCo 作为它的本机代码覆盖模块。

此外，有关大量示例，请参阅[https://github.com/SonarSource/sonar-examples/tree/master/projects/code-coverage/ut](https://github.com/SonarSource/sonar-examples/tree/master/projects/code-coverage/ut)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-30T06:49:13.673

您好，有一些非常有趣的文章准确描述了您的情况。这是列表 [http://www.sonarsource.org/measure-coverage-by-integration-tests-with-sonar-updated/](http://www.sonarsource.org/measure-coverage-by-integration-tests-with-sonar-updated/) [http://johndobie.blogspot.gr/2011/06/maven-multi-module-with -sonar-and.html](http://johndobie.blogspot.gr/2011/06/maven-multi-module-with-sonar-and.html) [http://johndobie.blogspot.gr/2011/06/seperating-test-code-coverage-with.html](http://johndobie.blogspot.gr/2011/06/seperating-test-code-coverage-with.html) 还有一个相关的问题 [Jacoco 和 Sonar 代码覆盖率？](https://stackoverflow.com/questions/10933407/jacoco-and-sonar-code-coverage) 希望你觉得它们有用

# c# - 当 DEBUG 没有时 EXE 会抛出错误

> ID：12183322
> 
> 赞同：0
> 
> 时间：2012-08-29T17:23:14.727
> 
> 标签：c#, .net, exception-handling, visual-studio-debugging

该程序有一个弹出的表格，您在几个字段中输入文本，然后按关闭。关闭后，输入的信息将保存到一个类`newItem`中。

当我按 F5 调试我的程序时，一切正常。但是当我从我的调试文件夹运行可执行文件时，我得到了这个错误。

```
System.ArgumentException: An item with the same key has already been added.
    At.... line 168 
```

这是代码。

```
if (!LoadedItem.Contains(newItem))
{
    LoadedItem.Add(newItem);
} 
```

我放置了一个断点，单步执行代码，一切似乎都按预期进行。`LoadedItem`如果已经有，它会跳过`newItem`。但由于某种原因，它似乎忽略了 .exe 中的 if 语句。

如果您需要更多信息，请告诉我。

我会很感激任何帮助，对于我的生活，我无法弄清楚为什么会发生这种情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T19:19:49.050

锁`LoadedItem`应该工作

```
lock(LoadedItem) {
    if (!LoadedItem.Contains(newItem))
       LoadedItem.Add(newItem);
} 
```

请注意，您必须在代码中写入和读取 LoadedItem 的每个点上使用锁定。

如果您阅读多于写入，请使用[`ReaderWriterLockSlim`](http://msdn.microsoft.com/en-us/library/system.threading.readerwriterlockslim.aspx)更好的性能。

如果您使用的是 .Net4，则可以使用[`System.Collections.Concurrent`](http://msdn.microsoft.com/en-us/library/system.collections.concurrent.aspx)命名空间中的一些集合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T17:33:19.460

这听起来像是一个线程问题。确保 LoadedItem 和 NewItem 是本地绑定的变量，因此这两个引用保证是同一个对象。

出于调试目的，将“包含”和“添加”替换为您可以调查其行为的包装函数。

# php - 在另一个类 PHP 中使用一个类，不包括

> ID：12183325
> 
> 赞同：0
> 
> 时间：2012-08-29T17:23:34.390
> 
> 标签：php, oop, class

我现在基本上有3个重要文件。我想在 LOGIN 类中使用 DB 类中的函数。这些是我的文件。我尝试包含 DB 类，但随后我会声明它两次，这是你不能做的。

---- index.php ---- -- 显示内容 --

```
<?php
     session_start();

include './libs/database.php';

$mysql = new Database();

include './libs/login.php';

$login = new Login();

$mysql->connect("---", "user", "pass"); 
$mysql->usedatabase("db"); 

    ?>

<!DOCTYPE html>
    <html>
        <body>
            <div id="wrapper">

                             CONTENT GOES HERE

            </div>          
        </body>

    </html>
---

---login.php ---

    class Login{

        public function isLoggedIn(){

            if(isset($_SESSION['user_id'])){

                return true;

            }else{
                return false;
            }
        }

        public function UserLogin($email,$password){
            // login function
                        $DB->selectwhere(...);
        }

        public function securePassword($pass){

            $pass =  md5($pass);

                return $pass;
        }
    }

---

--- database.php ---

 class Database{

       //Database Functions

 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T17:30:50.080

查看 PHP 的“自动加载”功能。只有当堆中不存在类时，您才能真正按需查找类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T01:12:29.513

将 Login 中的 securePassword() 函数设为静态函数，这样您就可以在没有 Login 类实例的情况下调用它。

登录::securePassword()

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T17:35:07.057

将您的数据库类移动到文件 Database.php。在 index.php 的顶部，使用 require_once('Database.php'); 包括数据库类。然后将 UserLogin() 函数更改为：

```
 public function UserLogin($email,$password){
        // login function
                    $DB = new Database;
                    $DB->selectwhere(...);
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T18:38:09.197

阅读有关关键字 extends 的 PHP.net 文档：[http ://www.php.net/manual/en/language.oop5.basic.php#language.oop5.basic.extends](http://www.php.net/manual/en/language.oop5.basic.php#language.oop5.basic.extends)

> 一个类可以通过在类声明中使用关键字 >extends 来继承另一个类的方法和属性。

所以你的登录类将是

```
class Login extends Database{

    public function isLoggedIn(){

        if(isset($_SESSION['user_id'])) {
            return true;
        }
        else {
            return false;
        }
    }

    public function UserLogin($email,$password){
        parent::login();
    }

    public function securePassword($pass){
        $pass =  md5($pass);
        return $pass;
    }
} 
```

您可以使用访问 Database 类的属性或方法

```
parent::var_name
parent::method() 
```

# ruby-on-rails - Rails 3.2 - Rails 如何空白？方法在内部有效吗？

> ID：12183330
> 
> 赞同：0
> 
> 时间：2012-08-29T17:23:43.873
> 
> 标签：ruby-on-rails, ruby

我想知道 Rails 如何处理方法空白？

我试图建立自己的空白？等效的方法，但这并不容易。这是我的尝试：

```
def my_blank(state)
  if state == nil or state.empty? == true
     true
  else
     false
  end

end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T17:27:11.957

这个项目是开源的，所以看看源码：[https ://github.com/rails/rails/blob/master/activesupport/lib/active_support/core_ext/object/blank.rb](https://github.com/rails/rails/blob/master/activesupport/lib/active_support/core_ext/object/blank.rb)

您会看到为各种类（如 、 等）编写了单独的`String`方法`Array`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-15T20:42:27.250

这是我写的另一个变体来帮助我处理系统中的一些结构：

```
Object.class_eval do
  def deep_blank?
    self.kind_of?(Enumerable) ? self.inject(true) { |running, element| running &&= element.kind_of?(Enumerable) ? element.deep_blank? : element.blank? } : self.blank?
  end
end 
```

希望它可以帮助某人。

# java - 如何在地图中翻转对象列表

> ID：12183332
> 
> 赞同：-1
> 
> 时间：2012-08-29T17:23:52.377
> 
> 标签：java

我正在尝试找出如何将对象列表转换为 java 中的地图或处理列表

Example Invoice 有两个字段，note 和 amount：

```
List<Invoice> invoices = Arrays.asList(
new Invoice( "note1", "amount1" ), 
new Invoice( "note2", "amount2" ) ); 
```

现在我可以把这个列表放到一个 Map 中，如下所示：

```
Map<Long, String> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T17:27:19.567

类似于以下内容：

```
Map<Long, String> map = new HashMap<Long, String>();
for(Invoice invoice : invoces) {
    map.put(invoice.getId(), invoce.getName());
} 
```

由于您没有提到您想具体存储什么作为`Long`键和`String`值，我认为您的类`Invoice`具有长 ID 和字符串名称。哟可以 `map.put(...)`根据您的实际需要更改线路。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T17:28:04.713

```
public static Map<Long, String> invoicesToMap(List<Invoice> invoices) {
  Map<Long, String> map = new HashMap<Long, String>();
  for (Invoice invoice : invoices) {
    map.put(Long.valueOf(invoice.getAmount()), invoice.getNote());
  }
  return map;
} 
```

# ruby-on-rails - 是否可以定义像 activeadmin 这样的非管理员用户界面？

> ID：12183335
> 
> 赞同：0
> 
> 时间：2012-08-29T17:24:05.890
> 
> 标签：ruby-on-rails, activeadmin

我正在使用 rails 和 activeadmin 制作应用程序。我想为管理员和非管理员用户使用相同的界面。

是否可以从 activeadmin 外部调用方法 show、index、column、attribute_table 等？

例如，我想为这样的用户创建一个索引页面：

```
<%= index @users do
  column :name
  column :last_name
  column :email do |user|
    link_to user.email , user_path(user)
  end
  column :status
end %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T18:38:39.923

可以使用 ActiveAdmin 定义整个应用程序。

脚步：

1.  根据命名空间定义身份验证和当前用户的方法：

    ```
    #config/initializers/active_admin.rb
    config.namespace :admin do |admin|
        admin.authentication_method = :authenticate_admin_user!
        admin.current_user_method = :current_admin_user
    end
    config.namespace false do |c|
        c.authentication_method = :logged_in?
        c.current_user_method = :current_user
    end 
    ```

2.  配置文件夹：

    ```
    #config/initializers/active_admin.rb
    config.load_paths = [File.expand_path('app/admin', Rails.root), File.expand_path('app/users', Rails.root),] 
    ```

3.  `app/admin`在使用`ActiveAdmin.register Resource do`和下为管理员定义页面和资源`ActiveAdmin.register_page 'Page name' do`

4.  在`app/users`using`ActiveAdmin.register Resource , namespace: false do`和`ActiveAdmin.register_page 'Page name' , namespace: false do`

# ruby-on-rails - 如何管理没有 gem 文件的项目？

> ID：12183338
> 
> 赞同：0
> 
> 时间：2012-08-29T17:24:14.967
> 
> 标签：ruby-on-rails, rubygems, ruby-on-rails-2

在 Rails 2 项目下没有 gemfile。

在这种情况下，管理宝石的最佳方式是什么？我应该出售哪些宝石？我也想知道是否有另一种方法来管理这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T17:30:19.753

您可以在 rails 2.3 应用程序中使用 bundle 管理 gem，您可以参考

[http://gembundler.com/rails23.html](http://gembundler.com/rails23.html)

[http://yehudakatz.com/2009/11/03/using-the-new-gem-bundler-today/](http://yehudakatz.com/2009/11/03/using-the-new-gem-bundler-today/)

# html - 如何从 HTML 中删除“不可见空间”

> ID：12183341
> 
> 赞同：12
> 
> 时间：2012-08-29T17:24:21.753
> 
> 标签：html, css

> **可能重复：**
> [内联块列表项之间的空格](https://stackoverflow.com/questions/5256533/a-space-between-inline-block-list-items)

我有我的 html 代码的[JSFiddle 演示](http://jsfiddle.net/RhvjF/)。这是这里的代码：

```
<span style="display: inline">Hello Wo</span>
<span style="display: none;"></span>
<span style="display: inline">rld</span>​ 
```

我遇到的问题是在 Hello World! 中的 'o' 和 'r' 之间插入了一个额外的空格！样式设置为无`display`，所以有人可以告诉我如何在`Hello World!`没有空格的情况下获得该短语吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-29T17:26:39.530

换行符导致它 - [http://jsfiddle.net/RhvjF/1/](http://jsfiddle.net/RhvjF/1/)

找不到特定的帖子，但聪明人建议了 3 种修复方法：

1.  将所有内容放在一行中（删除所有换行符）
2.  注释掉换行符，比如

    ```
    <span style="display: inline">Hello Wo</span><!--
    --><span style="display: none;"></span><!--
    --><span style="display: inline">rld</span> 
    ```

3.  将容器设置`font-size`为`0`并重新设置为`span`-s

**更新**

至少还有2种方法：

1.  打破标签，比如

    ```
    <span style="display: inline">Hello Wo</span
    ><span style="display: none;"></span
    ><span style="display: inline">rld</span> 
    ```

2.  浮动元素，即`span { float: left }`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-29T17:28:32.793

这是由换行引起的。你有两个选择：

1.  删除换行符
2.  浮动您的内容。

**选项1**

```
<span style="display: inline">Hello Wo</span><span style="display: none;"></span><span style="display:inline">rld</span>​ 
```

**选项 2**

```
<style>
    #spanContainer > span { float:left; }​
</style>

<div id="spanContainer">
    <span style="display: inline">Hello Wo</span>
    <span style="display: none;"></span>
    <span style="display: inline">rld</span>​
</div> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-29T17:30:31.453

见[http://jsfiddle.net/RhvjF/2/](http://jsfiddle.net/RhvjF/2/)

HTML：

```
<div id="wrapper">
    <span style="display: inline">Hello Wo</span>
    <span style="display: none;"></span>
    <span style="display: inline">rld</span>
</div> 
```

CSS：

```
#wrapper{
    font-size:0;
}
#wrapper>*{
    font-size:16px; /* Or whatever you want */
} 
```

# c# - BaseDevModeType：这两个枚举有什么区别？

> ID：12183347
> 
> 赞同：0
> 
> 时间：2012-08-29T17:24:42.440
> 
> 标签：c#, .net, printing, printer-properties, dev-mode

BaseDevModeType 定义了两个枚举：

1.  打印机默认。
2.  用户默认值。

我了解 devmode 基本结构是根据枚举填充的。

但是，这两种开发模式有何不同？

每个开发模式会有哪些不同的示例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T17:34:13.657

当您安装打印机驱动程序时，它带有自己的设备默认值。用户还可以“覆盖”这些默认值来设置他们自己的默认值。例如，打印机可能默认为无排序；但用户可能希望在默认情况下为其所有打印作业启用排序规则。 `UserDefault`应该具有用户已从设备默认值覆盖的默认值。

# ios - iPad越狱影响原有应用开发？

> ID：12183348
> 
> 赞同：2
> 
> 时间：2012-08-29T17:24:49.493
> 
> 标签：ios, ipad, jailbreak

我是 iOS 开发人员。现在，我为我的公司开发 iPad 和 iPhone 应用程序。我有一台 iPad，现在我决定购买自己的 Mac ;)。我想开发应用程序然后上传到 AppStore。我也很想越狱我的设备，但在此之前我想知道这是否会影响原始开发。如果我在越狱的 iPad 上使用原始配置测试原始应用程序时遇到问题。

非常感谢 ;）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T17:27:03.167

不，它不会影响您的测试能力。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T17:28:59.430

我有一台运行 iOS 5.0.1 的越狱 iPad 1，我在配置它和在上面测试我的应用程序时没有遇到任何困难。

# c# - 链接两个属性/变量

> ID：12183356
> 
> 赞同：1
> 
> 时间：2012-08-29T17:25:19.240
> 
> 标签：c#

让我解释一下我的情况。我有一个程序读取外部连接并给我一个整数（或布尔值）数组。这些输入应该提供一个具有某些属性（例如 X、Y、Z）的对象。因此，如果读取数组上的值，我应该将这些值写入属性中。有没有办法通过 ref 传递这些值（例如）？从逻辑上思考，最好的方法是指针（指向数组 [0] 的属性 X），但这些对我来说并不是很清楚。

我可以创建一种方法来查找数组中的更改（但它是一个非常大的数组，+60000），然后更新我的对象。但我认为这将是一个坏主意。

对不起，如果我写了任何废话，我只是从 C# 开始。

一些伪代码来帮助。

```
class obj
{
      int X {get; set;}
      public obj(ref int x)
      {
          X = x;
      }
}

class main 
{
      void main()
      {
         int a;

         obj test = new obj(ref a);
      }
} 
```

所以如果：a = 10，obj.X = 10 也是。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T17:30:22.487

```
public class MyClass
{
    private int[] backingArray;
    public int X
    {
        get
        {
            if (backingArray == null)
                return -1;
            else
                return backingArray[0];
        }
    }
    public MyClass(int[] array)
    {
        if (array.Length > 0)
            backingArray = array;
    }
}

class Main
{
    void Main()
    {
        int[] array = new int[] { 2 };

        MyClass test = new MyClass(array);
        array[0] = 6;
        Console.WriteLine(test.X);//prints 6
    }
} 
```

Of course this only works with reference types (arrays are reference types). If you wanted to do this whole thing with a value type, you'd need to "wrap" it in some reference type. You can use a class such as the following to wrap anything if you don't have anything convenient.

```
public class Wrapper<T>
{
    public T Value { get; set; }
} 
```

It's not possible to use `ref` in the manor that you've shown in the OP. You wouldn't be able to store the value that was passed by reference. If you could, then you could end up passing some value on the stack and then having the created object that holds the reference living longer than the item on the stack. If that happened you would end up with a reference it a location in memory that no longer holds the variable you intended. This was somewhat of a gotcha in C++ that the designers of C# went out of their way to ensure can't happen (at least not without a *lot* of work).

# javascript - 如何相对于浏览器窗口定位 DIV？

> ID：12183357
> 
> 赞同：0
> 
> 时间：2012-08-29T17:25:21.627
> 
> 标签：javascript, css, positioning

我有一个 PHP 页面，它向我显示对话的内容并允许我回复。由于消息以相反的时间顺序显示（较新的消息首先显示），将“答案”表单放置在页面末尾会看起来很糟糕并且使用起来不舒服（必须在所有消息之间滚动），但将其放置在顶部看起来也很糟糕，因为人们无法阅读旧消息并回复。
所以，我需要像 Facebook 那样的对话功能：当文本框保持在固定位置时，可以阅读所有消息。可以在[这里](http://www.akamai.com/html/technology/dataviz2.html "例子")找到一个示例：当进入页面[并等待几秒钟]时，左侧会出现一个图像，并在您滚动页面时跟随浏览器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T17:27:50.537

听起来您想要[`position:fixed`CSS 属性](https://developer.mozilla.org/en-US/docs/CSS/position)。

HTML：

```
<textarea class="inputbox"></textarea> 
```

这个 CSS 将把它放在页面的底部：

```
.inputbox {
    position: fixed;
    bottom: 0px;
} 
```

您可能还想查看`top`、`left`和`right`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T17:28:26.933

use 可以使用 position:fixed on div 并使用 top 、 left 或 bottom 、 right 或您想要选择的任何内容进行调整

# d - 如何编译静态二进制文件？

> ID：12183360
> 
> 赞同：5
> 
> 时间：2012-08-29T17:25:28.807
> 
> 标签：d

Ubuntu 12.04 上的 DMD 2.60 ...我想创建一个静态二进制文件，以便我可以在一个古老的环境中运行它。dmd 没有“-static”标志。我尝试使用“dmd -L-static ...”将“-static”标志传递给链接器 - 得到错误消息

```
/usr/bin/ld: cannot find -lgcc_s 
```

使用“gcc -static ...”编译 C 代码可以正常工作。是我想念的吗？谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T17:21:53.933

[如果您使用 dmd 进行链接，它目前不起作用，](http://d.puremagic.com/issues/show_bug.cgi?id=6952)因为它将链接器标志传递给链接器。您需要构建所有内容`-c`以生成目标文件，然后使用 gcc 或 ld 手动链接这些文件。

我应该指出，一般来说，静态链接 glibc 被认为是一个坏主意。它可能非常有效并且是您的情况的正确解决方案，但它肯定有潜在的问题（虽然我不记得细节）。因此，除非您确实需要，否则您可能不应该这样做。

# android - 向字符串数组添加价格

> ID：12183362
> 
> 赞同：0
> 
> 时间：2012-08-29T17:25:41.827
> 
> 标签：android, string, arrays

所以我有一个充满不同伏特加酒的字符串数组，我想做的是为数组中的每个伏特加酒（字符串）附加一个价格，这样我就可以在屏幕上显示伏特加酒及其价格，我也想用这个根据用户输入过滤出价格较高或价格较低的伏特加。这是一个示例数组：

```
 public static final String[] Vodka = {"Absolut Vodka","Finlandia","Ketel One","Polmos Krakow","Skyy","Smirnoff Vodka",
    "Stolichnaya","Fleischmann's","Gilbey's","Wolfschmitt","Five-O-Clock", "Grey Goose",}; 
```

提前谢谢大家！

==================================

这是我正在尝试的一些代码，感谢迈克！

```
if(Price != 0){ 
    for (com.famousmods.what.should.i.drink.VodkaList.Vodka vodka : vl.vodkaList){ 
        // Set vodka brand final 
        TextView text21 = (TextView) findViewById(R.id.display2); 
        test = random.next(vodka.getPrice() <= Price); 
        text21.setText(test); 
    } 
} 
```

价格是用户输入的最大金额，它是双倍的，我试图用那段代码做的是随机获得低于输入价格的饮料。（真的只是在黑暗中拍摄）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T17:28:08.163

只需创建一个具有 2 个字段的自定义类“Vodka”：名称和价格。然后制作一个封装“Vodka”类的“VodkaList”类，并包含一个`ArrayList<Vodka>` 这样可以使一切井井有条。

因此，例如：

```
import java.util.ArrayList;

public class VodkaList {

    public class Vodka {

        String name;
        double price; 

        public Vodka(String name, double price) {
            this.name = name;
            this.price = price;
        }

        public String getName() {
            return this.name;
        }

        public void setName(String name) {
            this.name = name;
        }

        public double getPrice() {
            return this.price;
        }

        public void setPrice(double price) {
            this.price = price;
        }

    }

    public ArrayList<Vodka> vodkaList;

    public VodkaList() {
        this.vodkaList = new ArrayList<Vodka>();

        // here's where you can hard-code the list of Vodkas
        vodkaList.add(new Vodka("Absolut Vodka", 15.75));
        vodkaList.add(new Vodka("Findlandia", 10.25));
        // and repeat until you've hard-coded them all
    }

} 
```

通过使用自定义类，您可以随时更改伏特加的名称/价格，无需担心跟踪数组索引，并轻松搜索列表中您想要的名称/价格。

以下是您将在主要活动中放入的用于初始化 VodkaList 的内容：

```
VodkaList vl = new VodkaList(); 
```

想要遍历列表并查看您放入了哪些伏特加酒？

```
for (Vodka vodka : vl.vodkaList)
    Log.i("Vodka", "Name = " + vodka.name + ", Price = " + vodka.price); 
```

让我们探索一个示例场景（以解决您的问题陈述中的问题）。假设用户输入他/她将支付的最高价格“10”。

```
for (Vodka vodka : vl.vodkaList) {
    if (vodka.getPrice() < 10)
        ; // the price is good! the user wants it.  show them it
    else
        ; // too expensive for the user.. don't show it
} 
```

本课程将使此类活动变得容易！

告诉我这是否有效。如果没有，我会提供更多建议。

**编辑：**

```
 Random random = new Random();
    boolean available = false;

    for (Vodka v : vodkaList) {
        if (v.price <= Price)
            available = true;
    }

    TextView text21 = (TextView) findViewById(R.id.display2);

    if (available) {
        // There exists at least one Vodka lower than the user's price
        int randomIndex = -1;
        while (true) {
            randomIndex = random.nextInt(vodkaList.size());
            Vodka v = vodkaList.get(randomIndex);
            if (v.price <= Price) {
                // We have a match!  Display it to the user
                text21.setText(v.name);
                break;
            }
            // If we got here, there's no match.. loop again!

        }
    } else {
        // No vodka exists unders the users price! Can't display anything
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T17:31:43.790

```
public class Vodka
{
  private String name;
  private int price;

  public Vodka() {
    super();
    // TODO Auto-generated constructor stub
   }
   public void setName(String name)
   {
     this.name=name;
   }
   public void setPrice(int price)
   {
    this.price=price;
   }

   public String getName()
   {
    return this.name;
   }
   public int getPrice()
   {
    return this.price;
   }

} 
```

在你的活动中，

```
List<Vodka> myList = new ArrayList<Vodka> ();
      Vodka vodk = new Vodka();
      vodk.setName("Smirnoff");
      vodk.setPrice(10);

      myList.add(vodk); 
```

要检索数据：

```
String name = myList.get(0).getName();
 int price = myList.get(0).getPrice(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-29T17:28:33.777

您需要改用二维数组：

```
public static final String[][] drinks= { 
          {"Absolut Vodka", "10.0"}, {"Finlandia", "15.0"}
          {"Ketel One", "10.0"}, {"Stolichnaya", "15.0"}

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T17:29:12.517

使用一些**OOP 概念，Collections**类也会对你有很大帮助。

```
package com.mac.demo;

import java.util.Map.Entry;
import java.util.SortedMap;
import java.util.TreeMap;

public class SortBean {
public String name;
public double price;

SortBean(String name, Double price) {
    this.name = name;
    this.price = price;
}

public static void main(String[] args) {

    SortBean sb1 = new SortBean("Absolut Vodka", 20.0);
    SortBean sb2 = new SortBean("Finlandia", 30.0);
    SortBean sb3 = new SortBean("Ketel One", 80.0);

    SortedMap<Double, SortBean> sMap = new TreeMap<Double, SortBean>();
     // IF YOU WANT TO SORT IN REVERSE ORDER 
    //SortedMap<Double, SortBean> sMap = new TreeMap<Double, SortBean>(Collections.reverseOrder());

    sMap.put(sb1.price, sb1);
    sMap.put(sb2.price, sb2);
    sMap.put(sb3.price, sb3);

    for (Entry<Double, SortBean> obj : sMap.entrySet()) {
        System.out.println(obj.getKey());
    }

    }
} 
```

**输出：**

```
20.0
30.0
80.0 
```

# java - 继承java解释

> ID：12183368
> 
> 赞同：-5
> 
> 时间：2012-08-29T17:26:26.280
> 
> 标签：java, inheritance

有人可以解释一下这个程序的执行吗？我知道`extends`关键字的作用。但我仍然无法弄清楚结果会是什么，为什么？

```
public class Maryland extends State {
    Maryland() { /* null constructor */ }
    public void printMe() { System.out.println("Read it."); }
    public static void main(String[] args) {
        Region mid = new State();
        State md = new Maryland();
        Object obj = new Place();
        Place usa = new Region();
        md.printMe();
        mid.printMe();
        ((Place) obj).printMe();
        obj = md;
        ((Maryland) obj).printMe();
        obj = usa;
        ((Place) obj).printMe();
        usa = md;
        ((Place) usa).printMe();
        }
    }

class State extends Region {
    State() { /* null constructor */ }
    public void printMe() { System.out.println("Ship it."); }
    }

    class Region extends Place {
    Region() { /* null constructor */ }
    public void printMe() { System.out.println("Box it."); }
    }

    class Place extends Object {
    Place() { /* null constructor */ }
    public void printMe() { System.out.println("Buy it."); }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T17:32:05.607

运行它，你会看到结果。你还需要什么？

```
Read it.
Ship it.
Buy it.
Read it.
Box it.
Read it. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T17:49:19.727

记住这条规则…………

当**与**`method`. _ `class`_ `Method OverRidding`_ `inheritance`_

**例如：**

`Maryland`类具有`printMe()`打印**“阅读它”的方法。**

`State`类具有`printMe()`打印**“Ship it”的方法。**

现在它是一个例子`Method Overridding`with`inheritance`和`Class Polymorphism.`

```
State md = new Maryland(); 
```

`State`是类的超**类**`Maryland`，所以它是这样的..

```
Object Reference Variable of Super class  md  =  Object of Subclass ; 
```

并且它是编译器的典型行为，只有当方法存在于对象引用变量类中时，才会调用它，导致直到并且除非该方法存在于超类中，它不会知道任何关于它的信息，即使它在它的子类中......

所以当我们这样做时......

`md.printMe();`

然后根据“将调用该类方法的最具体版本”的规则，将调用`printMe()`Maryland 类的方法，因此它会打印**Read it。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T17:45:02.410

需要有关动态多态性和继承的知识。程序没有复杂性。在调试模式下执行程序，并逐行检查执行情况。您将了解流程。

# c# - asp.net 文本 onkeyup 事件

> ID：12183369
> 
> 赞同：1
> 
> 时间：2012-08-29T17:26:31.443
> 
> 标签：c#, javascript, jquery, asp.net, c#-4.0

我对 asp.net 文本框的 onkeyup 事件有疑问。我要求在 asp.net 文本框中只允许十进制数字。为了实现这一点，我从 onkeyup 事件中调用了一个 java 脚本函数。javascript 函数虽然正确验证了输入，但无法阻止用户输入字母或字母。一切都适用于 onkeychange 和 onkeypress 事件，只是它没有检测到退格键，这会导致错误计算依赖于此文本框值的边距百分比。

```
<asp:TextBox ID="txtListPrice" runat="server" CssClass="textbox" MaxLength="50" 
                                               onkeyup= "return IsNumberKey(event);" >      </asp:TextBox>
function IsNumberKey(evt) {

      //obj.value = obj.value.replace(/[^0-9]/g, "");
    var charCode = (evt.which) ? evt.which : event.keyCode;
    if (charCode <= 31 || charCode == 46 || (charCode >= 48 && charCode <= 57)) {
        return CalculateMargin();
    }
    else {
        return false;
    }
}

 function CalculateMargin() 
{
    var ListPrice =  parseFloat(document.getElementById('<%=txtListPrice.ClientID%>').value);
    var Cost = parseFloat(document.getElementById('<%=txtCost.ClientID%>').value);
    var result = false;

    if (ListPrice != NaN && Cost != NaN)
    {
        if ((ListPrice != "" && Cost != ""))
        {
                var result = Math.round(((ListPrice - Cost) / (Cost)) * 100);
                document.getElementById('<%=txtMargin.ClientID%>').readOnly = false;
                document.getElementById('<%=txtMargin.ClientID%>').value = result;
                document.getElementById('<%=txtMargin.ClientID%>').readOnly = true;
                result = true;
        }
        else
            result = false;
    }
    return result;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T17:39:39.053

OnKeyUp 事件的`keycode`属性返回在 中按下的字符`unicode`。您可以使用 javascript 警报查看退格键的值

```
alert(event.keyCode); 
```

退格键是 unicode 8。您可以在 if 语句中使用它，然后`CalculateMargin`按下退格键时您的函数将运行。

```
if (charCode <= 31 || charCode == 46 || (charCode >= 48 && charCode <= 57) 
    || charCode == 8)
{
    return CalculateMargin();
} 
```

在您的 else 语句中，在返回 false 之前，我会删除无效字符，方法是搜索字符串并删除任何不是数字的字符，或者删除字符串中的最后一个字符，理论上应该是有问题的字符。您可以使用 javascript`slice`函数来执行此操作。

```
else
{
    var txtListPrice =  document.getElementById('<%=txtListPrice.ClientID%>');
    var txtValue = txtListPrice.value;
    txtListPrice.value = txtValue.slice(0, -1);
    return false
} 
```

# android - Android 模拟器测试失败

> ID：12183376
> 
> 赞同：0
> 
> 时间：2012-08-29T17:26:41.253
> 
> 标签：android, android-intent, dialog, sms, emulation

所以我正在制作短信应用程序，并尝试添加一些意图过滤器以显示“使用完成操作”对话框。一切似乎都很好，但在模拟器上却没有出现（在真手机上一切正常）。那么哪里可能有问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T17:40:13.983

如果应用程序显示在手机上但不在模拟器中，我经常发现这是因为 android 应用程序桥自己卡住了。

尝试在任务管理器中杀死 adb.exe，然后在第 12 个错误之后，您应该在 eclipse 中出现“连接失败”错误（如果您正在使用它！），它将重新加载 adb。从那时起，您的应用程序应该加载。

这是一个奇怪的问题，我只是第一次将应用程序安装到模拟器上。果冻豆模拟器也不会发生！

# sql-server-2008 - 使用 Native Client 10 将 TDateTime 字段插入 SQL 2008 DB

> ID：12183391
> 
> 赞同：4
> 
> 时间：2012-08-29T17:27:36.463
> 
> 标签：sql-server-2008, delphi, delphi-2007, bde, sql-server-native-client

我们有一个用 Delphi 2007 编写的遗留应用程序，并且仍在使用 BDE（是的，它需要切换到 ADO，但有超过 500K 行，这是一项艰巨的工作）。它使用 SQL SERVER ODBC 连接连接到 SQL Server 2008 DB。我正在尝试切换到 SQL Server Native Client 10.0，但遇到了一个有趣的问题。当尝试向包含日期时间字段的表中插入记录时，我们收到以下错误：

```
Project DateTimeParamTest.exe raised exception class EDBEngineError with message 'General SQL error.
[Microsoft][SQL Server Native Client 10.0]Datetime field overflow. Fractional second precision exceeds the scale specified in
the parameter binding.'. 
```

在进行一些研究时，我看到了有关使用 TParameter 对象的 NumericScale、Precision 和 Size 参数的评论。一个TADOQuery会自动将参数分别设置为3、23、16，插入没有问题。如果我在 TQuery 对象上将参数设置为相同，则会收到与上述相同的错误。

有没有人有这方面的经验并且知道一个简单的解决方法？我为任何想尝试的人创建了以下示例代码。您只需要更改连接和 SQL 代码。

DateTimeParamTest_Main.dfm：

```
object Form10: TForm10
  Left = 0
  Top = 0
  Caption = 'Form10'
  ClientHeight = 111
  ClientWidth = 181
  Color = clBtnFace
  Font.Charset = DEFAULT_CHARSET
  Font.Color = clWindowText
  Font.Height = -11
  Font.Name = 'Tahoma'
  Font.Style = []
  OldCreateOrder = False
  PixelsPerInch = 96
  TextHeight = 13
  object Button2: TButton
    Left = 20
    Top = 16
    Width = 75
    Height = 25
    Caption = 'BDE'
    TabOrder = 0
    OnClick = Button2Click
  end
  object dbPMbde: TDatabase
    AliasName = 'PMTest'
    DatabaseName = 'DB'
    LoginPrompt = False
    SessionName = 'Default'
    Left = 20
    Top = 52
  end
  object qryBDE: TQuery
    DatabaseName = 'DB'
    SQL.Strings = (
      'INSERT INTO TRAN_DETAIL (ID, STARTDATE, ENDDATE)'
      'VALUES (:ID, :STARTDATE, :ENDDATE);')
    Left = 88
    Top = 52
    ParamData = <
      item
        DataType = ftInteger
        Name = 'ID'
        ParamType = ptInput
      end
      item
        DataType = ftDateTime
        Precision = 23
        NumericScale = 3
        Name = 'STARTDATE'
        ParamType = ptInput
        Size = 16
      end
      item
        DataType = ftDateTime
        Precision = 23
        NumericScale = 3
        Name = 'ENDDATE'
        ParamType = ptInput
        Size = 16
      end>
  end
end 
```

DateTimeParamTest_Main.pas：

```
unit DateTimeParamTest_Main;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, StdCtrls, DB, DBTables;

type
  TForm10 = class(TForm)
    Button2: TButton;
    dbPMbde: TDatabase;
    qryBDE: TQuery;
    procedure Button2Click(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  Form10: TForm10;

implementation

{$R *.dfm}

procedure TForm10.Button2Click(Sender: TObject);
begin
  dbPMbde.Open;
  with qryBDE do
  begin
    parambyname('ID').Value := 99999999;
    parambyname('StartDate').Value := now;
    parambyname('EndDate').Value := now;
    execsql;
  end;
  dbPMbde.Close;
end;

end. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T21:52:55.330

这似乎是导致数据类型溢出的毫秒问题（基于上面的评论）。如果是这样，就会想到一个快速修复方法。

将分配替换为日期列，如下所示：

```
qryBDE.ParamByName('STARTDATE').AsDateTime := FixBDEDateTime(Now); 
```

`FixBDEDateTime`简单的在哪里

```
function FixBDEDateTime(const Value: TDateTime): TDateTime;
var
  Year, Mon, Day, Hr, Min, Sec, MS: Word;
begin
  DecodeDate(Value, Year, Mon, Day);
  DecodeTime(Value, Hr, Min, Sec, MS);
  Result := EncodeDate(Year, Mon, Day) + 
            EncodeTime(Hr, Min, Sec, 0);
end; 
```

编辑：正如@TLama 在评论中指出的那样（我没有提到，因为我错过了`Delphi 2007`开头的句子并且没有在标签中看到版本），您也可以只使用：

```
uses
  DateUtils;
...

qryBDE.ParamByName('STARTDATE').AsDateTime := RecodeMillisecond(Now, 0); 
```

# java - 支持 JDK 1.4 的 Groovy 最新版本是什么

> ID：12183397
> 
> 赞同：4
> 
> 时间：2012-08-29T17:27:49.993
> 
> 标签：java, groovy, jdk1.4

我需要在嵌入式 1.4 兼容的 VM 上运行 Groovy。当前的 Groovy 版本至少需要 JDK 1.5。

过去的某些版本确实支持 JDK 1.4，但当前版本不支持。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-29T17:57:00.930

[http://groovy.codehaus.org/Tutorial+1+-+Getting+started](http://groovy.codehaus.org/Tutorial+1+-+Getting+started)说“groovy 1.6 支持 JDK 1.4 或更高版本，对于 groovy 1.7 及更高版本，需要最低 JDK 1.5”

# jquery - 如何在 JQuery 中处理 JSON 数据，该数据以“text/html”的标题类型返回？

> ID：12183402
> 
> 赞同：1
> 
> 时间：2012-08-29T17:28:07.150
> 
> 标签：jquery, html, json, getjson

我正在尝试使用 jquery`getJSON`方法从公共 API 获取 JSON 数据。`getJSON`当我的请求回调执行时，我不断收到以下错误。

> **警告：**资源解释为脚本，但使用 MIME 类型 text/html 传输
> 
> **错误：**未捕获的语法错误：意外的令牌：

我检查了响应的标头，果然，它设置为`text\html`. 由于这是一个我无法控制的公共 API，我怎样才能轻松地请求和解析这个 JSON 数据？

作为参考，下面的链接是我试图获取的 JSON 数据的链接。

JSON 请求（[http://bitcoincharts.com/t/weighted_prices.json](http://bitcoincharts.com/t/weighted_prices.json)）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T17:32:20.020

如果您无法控制 mime 类型，请使用`jQuery.ajax`代替`jQuery.getJSON`. 然后在成功回调中，您可以执行以下操作：

```
jQuery.ajax({
    dataType: "text", //you may need this.
    success: function(data, textStatus, jqXHR) {
        var jsonData = JSON.parse(data);
        ....
    }
}); 
```

您可以尝试的另一件事是：

```
jQuery.ajax({
    dataType: "json",
    success: function(data, textStatus, jqXHR) {
        //data here will be a JavaScript object
        ....
    }
}); 
```

虽然我不确定如果 mime 类型不匹配，jQuery 是否会抱怨。不过值得一试。

**编辑：**另一方面，您如何从脚本中访问该数据？尽管它是一个公共 API，但它位于另一台服务器上，因此会违反同源策略。当我执行以下操作时：

```
jQuery.getJSON("http://bitcoincharts.com/t/weighted_prices.json", function(data) {
    console.log(data);
}); 
```

在我的 Chrome 控制台中，我看到以下错误：

```
XMLHttpRequest cannot load http://bitcoincharts.com/t/weighted_prices.json?_=1346263039525\. Origin http://stackoverflow.com is not allowed by Access-Control-Allow-Origin. 
```

您必须查看比特币图表是否支持 JSONP 替代方案。否则，您唯一的选择是在服务器端设置一些东西，为您获取此数据并使用正确的 mime 类型以 JSON 格式将其返回给您。

# serialization - 将自定义缓存序列化程序与 Windows Server App Fabric 结合使用

> ID：12183403
> 
> 赞同：1
> 
> 时间：2012-08-29T17:28:07.993
> 
> 标签：serialization, appfabric, appfabric-cache

似乎可以将自定义缓存序列化程序与 Azure AppFabric 一起使用（Jagan Peri 的[自定义序列化）。](http://blogs.msdn.com/b/jagan_peri/archive/2012/08/23/custom-serializer.aspx)

是否有可能将自定义序列化程序与 Windows Server AppFabric 缓存一起使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-28T09:07:13.377

不幸的是，这是不可能的。AppFabric 缓存使用 NetDataContractSerializer（如果配置了 deflate 压缩）。在反编译客户端程序集后，我自己检查了这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-13T10:56:28.947

您可以使用以下解决方法实现此目的：

1）实现您自己的自定义序列化 2）在放入缓存之前序列化您的对象 3）将字符串对象添加到缓存中

沃伊泰克

# perl - Perl WWW::Mechanize foreach 循环跟随链接并查看它们是否给出 401 响应

> ID：12183406
> 
> 赞同：1
> 
> 时间：2012-08-29T17:28:17.793
> 
> 标签：perl, mechanize, http-status-code-401

我一直在尝试**使用 perl www::Mechanize 创建一个程序，该程序将跟踪网页上的所有链接，然后检查每个链接以查看其中是否有任何返回 401 响应**（使用 mech->status 等等)

如果有人可以向我展示一个 perl www::Mechanize 程序来做到这一点，那就太好了。

我尝试了多种方法，但似乎无法使其正常工作。

我对 perl www::Mechanize 相当有经验，并且已经用它做了更复杂的事情，但**无法让它跟随 foreach 循环中的每个链接，看看它们是否给出 401 响应头。**

非常感谢您的帮助，谢谢CM

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T00:21:14.320

```
foreach my $link ( $mech->find_all_links() ) {

    $mech->follow_link($link);
    if ( $mech->status() == 401 ) {

        say "401 status found";
    }
} 
```

在 Perl 中，您需要使用**==**而不是*=*来检查一个数字是否等于另一个数字！

# xcode - 在 Xcode 上归档项目失败

> ID：12183414
> 
> 赞同：0
> 
> 时间：2012-08-29T17:28:40.990
> 
> 标签：xcode

我收到消息

> 身份“iPhone 开发人员：Rxx Pxxx (xxx)”与您的钥匙串中的任何有效、未过期的证书/私钥对不匹配

问题可能是我正在为不同用户的计算机登录吗？如果是问题，有没有办法解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T17:32:09.100

您需要私钥和证书来配合它。您可以通过 Xcode 的管理器窗口将它们从它们所在的计算机中导出。

# backbone.js - Backbone.js: fetch({add: true})，触发更改事件？

> ID：12183422
> 
> 赞同：0
> 
> 时间：2012-08-29T17:29:21.890
> 
> 标签：backbone.js

我想知道在传递`add: true`to时是否有任何方法可以获取更改后的模型`fetch`。它呈现集合中的所有新模型，但我也想知道是否有任何模型发生了变化。

这可能吗？

我还考虑了将不同的函数作为成功处理程序传递给 的可能性`fetch`，该函数将仅重新呈现视图的某些部分而不是整个视图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T17:25:48.617

从 0.9.10 版开始，您应该`{update:true}`使用`{add:true}`. 这将告诉集合`change`为每个已更改的模型触发一个事件。（请注意，该`change`事件是在**集合**而不是模型上触发的）

如果您希望集合添加和更新模型，但不删除它们，您可以这样做：

```
myCollection.fetch({update:true, remove:false}); 
```

[这是 Backbone.js 文档中的相关部分](http://backbonejs.org/#Collection-fetch)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T20:48:13.597

通常的模式是有一个呈现模型的视图。然后是你：

*   在集合的视图中订阅集合的`add`事件，以便附加添加模型的视图。
*   让您的模型的视图订阅模型的`change`重新渲染。

如果您仍然希望只有一个视图，您： - 订阅集合的`add`事件以附加到视图。- 订阅集合的`change`事件并更新部分视图。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T19:20:47.553

您可以绑定到“添加”事件并触发仅更新部分视图的方法。您必须显式绑定集合事件才能重新呈现您的视图。所以换句话说，你控制应该渲染视图的哪些部分。您能否仅根据集合“更改”事件更改呈现视图的功能？

每个模型都有一个方法 isNew() 和 hasChanged()。您可以循环浏览您的收藏以查看哪些模型已更改。如果有一种更简单、更熟练的方法来做到这一点，我会全力以赴。

也许您可以发布一些代码，以便我们可以确切地看到您在做什么？

# c# - 启动 Windows 窗体应用程序隐藏 - 高内存使用？

> ID：12183423
> 
> 赞同：2
> 
> 时间：2012-08-29T17:29:26.603
> 
> 标签：c#, winforms, memory

这是我的情况。我正在构建一个小型 Windows 窗体，它将在启动时启动并在不使用时在系统托盘中最小化运行。用户将通过系统托盘中的通知图标打开表单，提交表单后，应用程序将最小化回系统托盘。

这一切都很好。然而，我注意到了一些奇怪的事情。当程序首次启动时，任务管理器中的 Mem Usage 显示 ~14000 K。如果我从系统托盘打开表单，它会上升到 ~16000 K。如果我然后将表单最小化回系统托盘，使用率降至 < 1000 K，这很好。我尝试启动应用程序并等待查看使用情况是否随时间下降，但没有看到任何变化。

我担心这一点的原因是因为应用程序将在 Citrix 环境中运行，所以我想在应用程序不使用时降低每个实例的内存使用量，但我不想让用户每天早上登录时打开应用程序并最小化它。

如果有人有任何建议或提示，我将不胜感激。我将包括下面的主要代码块。

```
public Form1()
{
    InitializeComponent();
    WindowState = FormWindowState.Minimized;
    notifyIcon1.DoubleClick += new EventHandler(notifyIcon1_DoubleClick);
    Rectangle r = Screen.PrimaryScreen.WorkingArea;
    this.StartPosition = FormStartPosition.Manual;
    this.Location = new Point(Screen.PrimaryScreen.WorkingArea.Width - this.Width, Screen.PrimaryScreen.WorkingArea.Height - this.Height);
    currentWorkstation = Environment.GetEnvironmentVariable("clientname");
    if (currentWorkstation == null)
        currentWorkstation = Environment.MachineName;
    GC.KeepAlive(notifyIcon1);
    GC.KeepAlive(currentWorkstation);
}

private void Form1_Resize(object sender, EventArgs e)
{
    if (WindowState == FormWindowState.Minimized)
       Hide();
} 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T17:41:28.737

内存中的虚假“下降”是因为在最小化事件期间，Windows 将大部分应用程序内存转移到虚拟内存。在您的启动过程中，您可能永远不会真正关闭表单/最小化应用程序，因此永远不会进行清理。

更多信息可以在这里看到：

[https://micksmix.wordpress.com/2010/01/08/why-does-task-manager-show-an-applications-memory-usage-drop-after-minimizing-it-to-the-the-taskbar/](https://micksmix.wordpress.com/2010/01/08/why-does-task-manager-show-an-applications-memory-usage-drop-after-minimizing-it-to-the-the-taskbar/)

我对此的了解仅来自于将其用作欺骗 J++ GC 运行的一种方式。告诉 Windows 应用程序最小化/恢复对用户来说几乎是察觉不到的，但可以最小化托管内存 VM 中的 RAM 累积。我高度怀疑这是“最佳实践”，但它让管理层的数字人士感到高兴。

# ios - 如何在 Xcode 中实现图像数组？

> ID：12183425
> 
> 赞同：2
> 
> 时间：2012-08-29T17:29:34.480
> 
> 标签：ios, xcode, arrays, image

我正在尝试为 imageView 创建一组图像，然后在按下按钮时更改这些图像。我只是在测试按钮是否能够导致一种方法从数组中获取和显示图像。我究竟做错了什么？

这是我到目前为止的代码：

```
- (void)viewDidLoad {

    NSMutableArray *imagesArray = [[NSMutableArray alloc] initWithObjects:@"Image1.JPG", @"Image2.JPG", nil];
}

-(IBAction)img1 {

    [imageView setImage:[UIImage imageNamed:[imagesArray objectAtIndex:0]]];
} 
```

我还收到警告'未使用的变量'imagesArray'

感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T17:34:23.860

您没有保留`NSMutableArray *imagesArray`，一旦 viewDidLoad 完成，它就会超出范围。

尝试这个：

声明实例变量`NSMutableArray *imagesArray;`

并使用

```
imagesArray = [[NSMutableArray alloc] initWithObjects:@"Image1.JPG", @"Image2.JPG", nil]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T17:34:07.010

我猜你两次声明了你的数组。将您的加载方法更改为此并重试。

```
- (void)viewDidLoad {

    imagesArray = [[NSMutableArray alloc] initWithObjects:@"Image1.JPG", @"Image2.JPG", nil];

} 
```

# sockets - 通过 TCP 发送时的数据结构填充

> ID：12183426
> 
> 赞同：2
> 
> 时间：2012-08-29T17:29:59.970
> 
> 标签：sockets, networking

我注意到 FastCGI 协议定义了一个 7 字节的记录（通信中使用的数据结构）标头和 1 字节的填充。必要时还会填充其他结构。想知道这个字节是否改变了任何东西，我对 7 字节和 8 字节缓冲区的 1000000 次顺序发送和接收进行了计时，结果发现……没有什么特别的。几次执行提供的数据如此多变，甚至不值得平均。（[测试代码](https://gist.github.com/3515841)）

如果我必须通过 TCP 发送 7 字节数据是否值得添加一个字节，所以我的发送和读取操作在 8 字节缓冲区上进行？那来自哪里以及如何知道什么填充是合适的？如果套接字是 Unix 文件套接字还是 INET 套接字，有什么不同吗？如果发件人和收件人在同一主机上，会有所不同吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T17:36:59.897

不，填充与网络无关。

通常会看到以这种方式定义的结构，以便它们在 4 字节边界上对齐（或 64 位操作系统上的 8 字节）。请参阅此处了解更多信息：

[http://en.wikipedia.org/wiki/Data_structure_alignment](http://en.wikipedia.org/wiki/Data_structure_alignment)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T17:38:00.847

这又回到了不同架构的[对齐要求](http://en.wikipedia.org/wiki/Data_structure_alignment)，这里的主要目的是尽量减少必须在严格对齐平台上完成的数据复制，并利用商用 PC 硬件上更快的执行速度。这就是为什么大多数低级协议（如 IP 和 TCP）的标头中的整数在 32 位或 64 位边界上对齐。

# python - 在数据帧中的列除法（或任何其他数学运算符）之前进行类型转换

> ID：12183432
> 
> 赞同：4
> 
> 时间：2012-08-29T17:30:24.307
> 
> 标签：python, type-conversion, dataframe, pandas

我有一个带有列的数据框`A`，`B`。我需要添加一个列，该列`C`基本上是条目`A`除以`B`.

我试过这个：

```
df['C'] = df['A'] / df['B'] 
```

但在执行此操作之前，我需要转换为 double 或 float。我应该如何`dtype`对列进行类型转换？

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-29T17:32:26.573

怎么样

```
df['C'] = df['A'] * 1.0 / df['B'] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-06T19:31:31.930

或这个：

```
df['C'] = df['A'].astype('float') / df['B'] 
```

# gcc - 为基于 MIPS 的代码源工具链编译参数？

> ID：12183433
> 
> 赞同：2
> 
> 时间：2012-08-29T17:30:26.980
> 
> 标签：gcc, compilation, mips, embedded-linux, gnu-toolchain

我在我的 WIN 7 机器上安装了用于 mips32 架构的 codesourcery 交叉编译工具链。我想首先为我的路由器编译一个基于 MIPS32 的简单“阶乘”二进制文件。从网上的小搜索，我发现它是基于 MIPS32 big-endian 的。

```
#cat /proc/cpuinfo
system type             : 96338W2
processor               : 0
cpu model               : BCM6338 V1.0
BogoMIPS                : 239.20
wait instruction        : no
microsecond timers      : yes
tlb_entries             : 32
extra interrupt vector  : yes
hardware watchpoint     : no
unaligned access        : 1269919
VCED exceptions         : not available
VCEI exceptions         : not available

# cat /proc/version
Linux version 2.6.8.1 (root@WangHaiTao) (gcc version 3.4.2) #1 Wed Sep 2 10:13:53 CST 2009 
```

路由器的 LIB 目录包含：

> ld-uClibc.so.0 libc.so.0 libcrypt.so.0 libcrypto.so.0.9.7 libdl.so.0 libm.so.0 libnvram.so libpsi.so libpsixml.so libresolv.so.0 libssl。 so.0.9.7 libutil.so.0 libwlbcmcrypto.so libwlbcmshared.so libwlctl.so 模块

工具链信息：（在主机 WIN 7 系统上）

```
C:\code>mips-linux-gnu-gcc -v
Using built-in specs.
COLLECT_GCC=mips-linux-gnu-gcc
COLLECT_LTO_WRAPPER=f:/program files/codesourcery/sourcery_codebench_lite_for_mi
ps_gnu_linux/bin/../libexec/gcc/mips-linux-gnu/4.6.3/lto-wrapper.exe
Target: mips-linux-gnu
Configured with: /scratch/cmoore/2012.03-63-linux-lite/src/gcc-4.6-2012.03/confi
gure --build=i686-pc-linux-gnu --host=i686-mingw32 --target=mips-linux-gnu --ena
ble-threads --disable-libmudflap --disable-libssp --disable-libstdcxx-pch --with
-arch-32=mips32r2 --with-arch-64=mips64r2 --with-float=hard --with-mips-plt --en
able-extra-sgxxlite-multilibs --with-gnu-as --with-gnu-ld --with-specs='%{save-t
emps: -fverbose-asm} -D__CS_SOURCERYGXX_MAJ__=2012 -D__CS_SOURCERYGXX_MIN__=3 -D
__CS_SOURCERYGXX_REV__=63 %{O2:%{!fno-remove-local-statics: -fremove-local-stati
cs}} %{O*:%{O|O0|O1|O2|Os:;:%{!fno-remove-local-statics: -fremove-local-statics}
}}' --enable-languages=c,c++ --enable-shared --enable-lto --enable-symvers=gnu -
-enable-__cxa_atexit --with-pkgversion='Sourcery CodeBench Lite 2012.03-63' --wi
th-bugurl=https://support.codesourcery.com/GNUToolchain/ --disable-nls --prefix=
/opt/codesourcery --with-sysroot=/opt/codesourcery/mips-linux-gnu/libc --with-bu
ild-sysroot=/scratch/cmoore/2012.03-63-linux-lite/install/host-i686-mingw32/mips
-linux-gnu/libc --with-libiconv-prefix=/scratch/cmoore/2012.03-63-linux-lite/obj
/host-libs-2012.03-63-mips-linux-gnu-i686-mingw32/usr --with-gmp=/scratch/cmoore
/2012.03-63-linux-lite/obj/host-libs-2012.03-63-mips-linux-gnu-i686-mingw32/usr
--with-mpfr=/scratch/cmoore/2012.03-63-linux-lite/obj/host-libs-2012.03-63-mips-
linux-gnu-i686-mingw32/usr --with-mpc=/scratch/cmoore/2012.03-63-linux-lite/obj/
host-libs-2012.03-63-mips-linux-gnu-i686-mingw32/usr --with-ppl=/scratch/cmoore/
2012.03-63-linux-lite/obj/host-libs-2012.03-63-mips-linux-gnu-i686-mingw32/usr -
-with-host-libstdcxx='-static-libgcc -Wl,-Bstatic,-lstdc++,-Bdynamic -lm' --with
-cloog=/scratch/cmoore/2012.03-63-linux-lite/obj/host-libs-2012.03-63-mips-linux
-gnu-i686-mingw32/usr --with-libelf=/scratch/cmoore/2012.03-63-linux-lite/obj/ho
st-libs-2012.03-63-mips-linux-gnu-i686-mingw32/usr --disable-libgomp --enable-po
ison-system-directories --with-build-time-tools=/scratch/cmoore/2012.03-63-linux
-lite/obj/tools-i686-pc-linux-gnu-2012.03-63-mips-linux-gnu-i686-mingw32/mips-li
nux-gnu/bin --with-build-time-tools=/scratch/cmoore/2012.03-63-linux-lite/obj/to
ols-i686-pc-linux-gnu-2012.03-63-mips-linux-gnu-i686-mingw32/mips-linux-gnu/bin
Thread model: posix
gcc version 4.6.3 (Sourcery CodeBench Lite 2012.03-63) 
```

我尝试了以下编译参数：

1.  `mips-linux-gnu-gcc -mips32 -muclibc -o factorial factorial.c`

当我在 MIPS 机器上运行输出二进制文件时，它只打印了“无法加载库 'libgcc_s.so.1'”。

1.  `mips-linux-gnu-gcc -muclibc -mips32 -static-libgcc -s -o factorial factorial.c`

当我运行它的输出时，它会打印“sigsegv”。

这里有什么问题？我应该输入什么编译器参数？请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T21:40:47.373

你的文件系统上有 libgcc_s.so.1 吗？如果没有，工具链将有一个文件夹复制到文件系统上。去做。

如果这样做，请确保正确设置了 LD_LIBRARY_PATH。

编辑：一般问题解决

创建可执行文件时，您链接到库。这些库也必须存在于您运行可执行文件的环境中。因此，通常在嵌入式系统中，三件事必须匹配

1.  内核头文件
2.  工具链
3.  文件系统

这是它们的关系

您的内核头文件最终以某种形式在您的程序中用作#include。因此，工具链使用的标头必须与实际运行的标头匹配，并且将出现在文件系统中。

工具链将包含要链接的库，以便可以创建可执行文件 [想想 libc 和其他]。这些在您的文件系统的运行时环境中必须相同

工具链必须创建适合您的内核的格式。可执行格式。

因此，一般来说，如果您在尝试执行时文件系统中没有文件，则它应该来自某个 sdk 或您的工具链。如果您在文件系统中有它，那么您可以指示您的工具链从那里使用它。

如果由于某种原因在文件系统中没有库，解决该问题的一种方法是构建静态可执行文件。但是你必须确定你知道你在做什么。

编辑：您面临的具体问题如果您的文件系统是只读的，那么您已经拥有了所有内容，并且提供了一个 sdk 来开发。如果你没有，你仍然可以通过让你的工具链使用文件系统中的库来进行开发 [想想 -I，-L]。

编辑 2：您的文件系统似乎是一个 ucLibc 文件系统。您的工具链似乎是针对 libc 构建的。有你的不匹配。

现在您似乎有一个没有开发 sdk 的只读文件系统。所以我不确定以下是否可行。您的工具链必须配置为仅使用文件系统中的文件并针对 ucLibc 进行配置。如果路由器人员确保开发所需的所有文件都在 rilesystem 中可用，那么它就足够了。否则你需要他们的sdk。请参阅上面的编辑以获取解释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T18:20:29.137

我已经成功编译了这个

```
#include <iostream>
using namespace std;

int main() {
  cout << "!!!Hello World!!!" << endl; // prints !!!Hello World!!!
  return 0;
}

mips-linux-gnu-g++ -muclibc -mips32  main.cpp -o main 
```

# jquery - 检查 div 是否存在于列表项中并根据它所在的列表隐藏或显示 - jquery

> ID：12183440
> 
> 赞同：0
> 
> 时间：2012-08-29T17:31:08.173
> 
> 标签：jquery

我正在使用 JQUERYUI，并且我有以下 2 个带有列表项的列表。默认情况下，第一个列表包含所有项目，并且这些列表项目中的所有 div 都是隐藏的。当我将此列表中的项目移动到第二个列表时，我想在列表项中显示这些 div（但仅针对该特定列表项）。当我将它从第二个列表移回原始列表时，我想再次隐藏该项目的所有 div。我不确定如何根据每个项目隐藏这些 div。任何帮助将非常感激。我原来的清单是：

```
<ul id="all-colls-list" class="droptrue">
                    <li class="sortedli">
                        Item 0
                                <div class="sel-total-on">&nbsp;</div>
                                <div class="sel-group-off">&nbsp;</div>
                                <div class="sel-sort-on">&nbsp;</div> 
                                <div class="sel-display-on">&nbsp;</div>
            </li>
    <li class="sortedli">
                        Item 1
                                <div class="sel-total-on">&nbsp;</div>
                                <div class="sel-group-off">&nbsp;</div>
                                <div class="sel-sort-on">&nbsp;</div> 
                                <div class="sel-display-on">&nbsp;</div>
            </li>
                    <li class="sortedli">
                        Item 3
                                <div class="sel-total-on">&nbsp;</div>
                                <div class="sel-group-off">&nbsp;</div>
                                <div class="sel-sort-on">&nbsp;</div> 
                                <div class="sel-display-on">&nbsp;</div>
            </li>
    </ul> 
```

第二个清单是：

```
 <ul id="coll-selected-list" class="droptrue sort-drop" style="width:400px;">
</ul> 
```

接收第二个列表 - 显示 div

```
receive: function (event, ui) {
 // Show the divs
$(ui.item).not(':has(.sel-total-on)').show();
} 
```

接收第一个列表 - 隐藏 div

```
receive: function (event, ui) {
 // Hide the divs
$(ui.item).not(':has(.sel-total-on)').hide();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T20:32:05.143

当您从第一个列表移动到第二个列表时，只需将 div 的类从“隐藏”更改为“不隐藏”，反之亦然

如果您还没有，请在 css 中定义类，如下所示。请检查：您可能已经有一些具有此属性的 css 类，在这种情况下您不需要定义

```
.divhide{
   display:none
} 
```

当从第二个列表移动到第一个时，添加 .divhide 类并在从第一个移动到第二个时删除。

```
$("div.myClass").addClass('.divhide');
$("div.myClass").removeClass('.divhide'); 
```

# c++ - 为括号串构建树

> ID：12183443
> 
> 赞同：1
> 
> 时间：2012-08-29T17:31:16.477
> 
> 标签：c++, algorithm, tree

我有一个

```
typedef struct node
{
   node* br;
   node* son;
}; 
```

给定一个`char* str`包含 的序列的字符串`(`，`)` 我需要为该字符串构建一棵树，例如：对于字符串 (()())()，将构建以下树：

```
 br        br 
node ----- node ---- NULL
    |son    |son
    |      NULL
    |   br        br      br
   node --- node --- node --- NULL
           |son   |son
          NULL   NULL 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T17:39:37.973

你的树有点难读。我假设每个括号都是一个节点，所有嵌套的括号都是子节点。

这是一个简单的算法：

```
We start with a root node representing the empty string.
For each char c in the string s:
    if c == '(':
        create a new child node
        move to the new created node
    else:
        move to the parent node 
```

这应该给你一棵好看的树。Ofc 您必须检查字符串是否有效，并在需要时进行补偿/纠正。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T18:12:03.583

此代码使用堆栈来存储与尚未看到关闭括号的打开括号相对应的节点。当它看到一个开放的括号时，它将一个新节点推入堆栈。当它看到一个 close paren 时，它会从堆栈中删除当前的顶部节点，并使其成为其父节点的子节点，父节点是其下方的节点。

```
#include <list>
#include <stack>
#include <functional>
#include <iostream>

struct Node {
    std::list<Node> children;
};

bool parse_parens (const char *str, Node *out)
{
    // stack of nodes for which open paren was seen but
    // close paren has not yet been seen
    std::stack<Node> stack;

    // push the virtual root node which doesn't correspond
    // to any parens
    stack.push(Node());

    for (size_t i = 0; str[i]; i++) {
        if (str[i] == '(') {
            // push new node to stack
            stack.push(Node());
        }
        else if (str[i] == ')') {
            if (stack.size() <= 1) {
                // too many close parens
                // (<=1 because root has no close paren)
                return false;
            }
            // Current top node on stack was created from the
            // open paren which corresponds to the close paren
            // we've just seen. Remove this node it from the stack.
            Node top = std::move(stack.top());
            stack.pop();
            // Make it a child of the node which was just below it.
            stack.top().children.push_back(std::move(top));
        }
        else {
            // bad character
            return false;
        }
    }

    if (stack.size() > 1) {
        // missing close parens
        return false;
    }

    // return the root node
    *out = std::move(stack.top());
    return true;
}

bool print_parens (const Node &node)
{
    for (std::list<Node>::const_iterator it = node.children.begin(); it != node.children.end(); ++it) {
        const Node &child = *it;
        std::cout << "(";
        print_parens(child);
        std::cout << ")";
    }
}

int main ()
{
    Node root;
    bool res = parse_parens("(())()(()())", &root);

    if (!res) {
        std::cout << "Error parsing!\n";
        return 1;
    }

    print_parens(root);
    std::cout << "\n";

    return 0;
} 
```

这用于`std::list`存储兄弟节点，这比您建议的更容易使用。然而，同样的算法也应该在那里工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T17:43:10.207

您可以使用堆栈来实现这一点，一旦找到左括号，然后将此节点添加到堆栈。如果再次左括号将子元素添加到堆栈的最顶部元素。在右括号中从堆栈中删除节点。就是这样。

# mongodb - 跨索引获取数组字段的不同聚合

> ID：12183444
> 
> 赞同：23
> 
> 时间：2012-08-29T17:31:17.397
> 
> 标签：mongodb

我正在尝试学习 MongoDB 以及它对我的分析有何用处。我只是在玩他们网站上提供的 JavaScript 控制台，并创建了以下项目：

```
{"title": "Cool", "_id": {"$oid": "503e4dc0cc93742e0d0ccad3"}, "tags": ["twenty", "sixty"]}
{"title": "Other", "_id": {"$oid": "503e4e5bcc93742e0d0ccad4"}, "tags": ["ten", "thirty"]}
{"title": "Ouch", "_id": {"$oid": "503e4e72cc93742e0d0ccad5"}, "tags": ["twenty", "seventy"]}
{"title": "Final", "_id": {"$oid": "503e4e72cc93742e0d0ccad6"}, "tags": ["sixty", "seventy"]} 
```

我想做的是查询，所以我得到了所有这些对象的唯一标签列表。结果应如下所示：

```
["ten", "twenty", "thirty", "sixty", "seventy"] 
```

我该如何查询这个？我正在尝试`distinct()`，但呼叫总是失败，甚至没有查询。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-08-29T17:55:09.573

他们网站上失败的代码适用于实际的 MongoDB 实例：

```
> db.posts.insert({title: "Hello", tags: ["one", "five"]});
> db.posts.insert({title: "World", tags: ["one", "three"]});
> db.posts.distinct("tags");
[ "one", "three", "five"] 
```

诡异的。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-29T18:30:11.023

您可以使用聚合框架。根据您希望结果结构的方式，您可以使用

```
var pipeline = [ 
        {"$unwind": "$tags" } ,
        { "$group": { _id: "$tags" } }
    ];
R = db.tb.aggregate( pipeline );
printjson(R);

{
        "result" : [
                {
                        "_id" : "seventy"
                },
                {
                        "_id" : "ten"
                },
                {
                        "_id" : "sixty"
                },
                {
                        "_id" : "thirty"
                },
                {
                        "_id" : "twenty"
                }
        ],
        "ok" : 1
} 
```

或者

```
var pipeline = [ 
        {"$unwind": "$tags" } ,
        { "$group": 
            { _id: null, tags: {"$addToSet": "$tags" }  }
        }
    ];
R = db.tb.aggregate( pipeline );
printjson(R);

{
        "result" : [
                {
                        "_id" : null,
                        "tags" : [
                                "seventy",
                                "ten",
                                "sixty",
                                "thirty",
                                "twenty"
                        ]
                }
        ],
        "ok" : 1
} 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-09-29T18:33:11.657

你应该可以使用这个：

```
db.mycollection.distinct("tags").sort() 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-01-28T05:10:03.237

使用聚合管道获取唯一数组元素的另一种方法

```
db.blogs.aggregate(
  [
    {$group:{_id : null, uniqueTags : {$push : "$tags"}}},
    {$project:{
      _id : 0,
      uniqueTags : {
        $reduce : {
          input : "$uniqueTags", 
          initialValue :[], 
          in : {$let : {
            vars : {elem : { $concatArrays : ["$$this", "$$value"] }},
            in : {$setUnion : "$$elem"}
          }}
        }
      }
    }}
  ]
) 
```

收藏

```
> db.blogs.find()
{ "_id" : ObjectId("5a6d53faca11d88f428a2999"), "name" : "sdfdef", "tags" : [ "abc", "def", "efg", "abc" ] }
{ "_id" : ObjectId("5a6d5434ca11d88f428a299a"), "name" : "abcdef", "tags" : [ "abc", "ijk", "lmo", "zyx" ] }
> 
```

管道

```
>   db.blogs.aggregate(
...     [
...       {$group:{_id : null, uniqueTags : {$push : "$tags"}}},
...       {$project:{
...         _id : 0,
...         uniqueTags : {
...           $reduce : {
...             input : "$uniqueTags", 
...             initialValue :[], 
...             in : {$let : {
...               vars : {elem : { $concatArrays : ["$$this", "$$value"] }},
...               in : {$setUnion : "$$elem"}
...             }}
...           }
...         }
...       }}
...     ]
...   ) 
```

结果

```
{ "uniqueTags" : [ "abc", "def", "efg", "ijk", "lmo", "zyx" ] } 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-29T18:16:11.200

有几个可用的 web mongo 控制台：

*   [http://try.mongodb.org/](http://try.mongodb.org/)
*   [http://www.mongodb.org/#](http://www.mongodb.org/#)

但是如果你在其中输入帮助，你会发现它们只支持极少数的操作：

```
HELP
Note: Only a subset of MongoDB's features are provided here.
For everything else, download and install at mongodb.org.

db.foo.help()                 help on collection method
db.foo.find()                 list objects in collection foo
db.foo.save({a: 1})           save a document to collection foo
db.foo.update({a: 1}, {a: 2}) update document where a == 1
db.foo.find({a: 1})           list objects in foo where a == 1

it                            use to further iterate over a cursor 
```

因此 distinct 不起作用，因为它不受支持。

# c++ - C ++“删除”调试构建速度慢

> ID：12183452
> 
> 赞同：0
> 
> 时间：2012-08-29T17:31:54.467
> 
> 标签：c++, debugging, delete-operator

我正在开发的软件是一个插件 DLL，在正常执行期间一切正常，并且符合预期，但是当主机卸载模块时，内存释放很慢（通过“delete []”释放了几个对象数组。如果我采取去掉所有的“delete []”指令，模块卸载变得更快）。这仅在调试版本中发生，发布版本立即卸载。我还注意到，如果我在其中一个析构函数中放置断点，调试也会很慢（每条指令平均需要 2 秒）。关于为什么会发生这种情况的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T17:41:30.240

不确定你的情况。我已经看到与 MS IDE 和 Debug 构建和报告内存泄漏类似的东西。如果由于某种原因很多对象确实泄漏了，那么将它们报告到输出窗口会花费大量时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-22T06:58:08.390

我将启用我的通灵调试帽并假设您使用的是 VC++。这是一条至关重要的信息，由于没有提供，我不得不猜测。

接下来，您说“每条指令平均需要 2 秒”。如果“指令”是指汇编语言指令，那么这是调试器运行缓慢的一个单独问题。有多种原因，例如设置了太多断点（[https://randomascii.wordpress.com/2011/07/02/xperf-and-visual-studio-the-case-of-the-breakpoint-hangs/](https://randomascii.wordpress.com/2011/07/02/xperf-and-visual-studio-the-case-of-the-breakpoint-hangs/)），在源集中显示线程（[https://randomascii.wordpress.com/2013/03/03/visual-studio-single-step-performance-fixes/](https://randomascii.wordpress.com/2013/03/03/visual-studio-single-step-performance-fixes/)）或其他可能的原因。但这是*调试器*问题，而不是调试构建问题。

在调试器下运行时，Windows 堆运行​​速度较慢 - 它会进行额外检查。这可能是问题所在，但请注意，这与您是否正在运行调试版本无关。

CRT 堆在调试构建中运行速度较慢，并在每次分配和空闲时获取锁，从而序列化分配。并且，如果设置了 _CRTDBG_CHECK_ALWAYS_DF，那么将检查整个堆在每个 alloc 和 free 上的一致性，这会使它们变慢几个数量级。

知道哪个是真正的问题的唯一方法是分析。

# php - 那么为什么这不保存在数组中 - WordPress

> ID：12183463
> 
> 赞同：0
> 
> 时间：2012-08-29T17:32:38.530
> 
> 标签：php, wordpress, wordpress-theming, options

所以我有这段代码，基本上我正在创建一个选项，该选项是一个复选框，因此`create_aisis_form_elemet()`.

现在这一切都在页面上很好地呈现，但问题是如何调用`get_option('aisis_core_slider');`并回显它说它是空的。有人可以指出我做错了什么吗？

现在我之前已经创建了 Wordpress 选项，但由于某种原因，这个选项根本没有保存。我敢打赌，我错过了一些小事。

这是我的代码：

```
function aisis_core_slider_options(){
  add_settings_field(
        'aisis_core_slider',
        '',
        'aisis_slider',
        'aisis-core-options',
        'aisis_slider_section'
  );           

  register_setting('aisis-core-options', 'aisis_core_slider', 'aisis_slider_validation');
}

function aisis_slider(){               
  $aisis_form = new AisisForm();
  $options = get_option('aisis_core_slider');

  //All I am doing is creating a label and a checkbox.
  $aisis_form->create_aisis_form_element('label', array('value'=>'remove the Slider from BBPress?'));
  $aisis_form->create_aisis_form_element('input', array(
          'type'=>'checkbox',
          'name'=>'aisis_core_slider[slider_global]',
          'value'=>1,
          'checked' => checked(1, $options['slider_global'], false),
  ));                                                  
}

function aisis_slider_validation($input){
  $options = get_option('aisis_core_slider');            
  foreach($options as $key=>$value){
          if($input[$key] == 1){
                  $options[$key] = 1;
          }else{
                  $options[$key] = 0;
          }
  }

  update_option('admin_success_message', 'true');
  return $options;      
}

add_action('admin_init', 'aisis_core_slider_options');
add_option('admin_success_message', '', '', 'yes'); 
```

# android - 谷歌云端硬盘文件下载

> ID：12183465
> 
> 赞同：0
> 
> 时间：2012-08-29T17:32:53.577
> 
> 标签：android, google-drive-api

我正在尝试使用下面提到的代码从谷歌驱动器下载文件。我已经成功测试了其他方法，例如插入文件、删除文件上传文件，但是在尝试下载文件时，我在下面的代码中的 HttpResponse response = request.execute() 处收到 401 授权错误。

```
private static synchronized InputStream downloadFile(Drive service, File file) throws IOException 
    {
        //File file = service.files().get(fileId).execute();
        String fileURL = file.getDownloadUrl();
        GenericUrl genericUrl = new GenericUrl(fileURL);
        if (fileURL != null && fileURL.length() > 0) 
        {
            try {

                    HttpRequest request = service.getRequestFactory().buildGetRequest(genericUrl);
                    HttpResponse response = request.execute();
                    InputStream inStream = response.getContent();

                    //HttpResponse resp = service.getRequestFactory().buildGetRequest(url).execute();
                    System.out.println("content "+ inStream);
                    return inStream;
            } catch (IOException e) {

                // An error occurred.
                e.printStackTrace();
                System.out.println("downloadFile error :"+ e.getMessage());
                return null;
            }
        } else {
                    // The file doesn't have any content stored on Drive.
                    return null;
        }
    } 
```

我也尝试过使用异步实现，但仍然出现 401 错误

```
08-30 19:31:13.917: W/System.err(1585): com.google.api.client.http.HttpResponseException: 401 Unauthorized
08-30 19:31:13.925: W/System.err(1585):     at com.google.api.client.http.HttpRequest.execute(HttpRequest.java:978)
08-30 19:31:13.935: W/System.err(1585):     at com.rise.risedrive.RiseDriveActivity$DownloadFile.doInBackground(RiseDriveActivity.java:112)
08-30 19:31:13.945: W/System.err(1585):     at com.rise.risedrive.RiseDriveActivity$DownloadFile.doInBackground(RiseDriveActivity.java:1)
08-30 19:31:13.955: W/System.err(1585):     at android.os.AsyncTask$2.call(AsyncTask.java:185)
08-30 19:31:13.955: W/System.err(1585):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
08-30 19:31:13.965: W/System.err(1585):     at java.util.concurrent.FutureTask.run(FutureTask.java:138)
08-30 19:31:13.965: W/System.err(1585):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
08-30 19:31:13.975: W/System.err(1585):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
08-30 19:31:13.975: W/System.err(1585):     at java.lang.Thread.run(Thread.java:1019)
08-30 19:31:32.250: W/jdwp(1585): Debugger is telling the VM to exit with code=1
08-30 19:31:32.250: I/dalvikvm(1585): GC lifetime allocation: 2603 bytes 
```

我试图调试它，但无法帮助我解决这个问题

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T15:25:34.087

您的代码中没有任何地方设置 Authorization 标头。

你需要类似的东西

```
setRequestProperty("Authorization", "OAuth " + "***ACCESS_TOKEN***"); 
```

对于任何 401/403 错误，非常值得让您的请求在 Oauth Playground [https://developers.google.com/oauthplayground/](https://developers.google.com/oauthplayground/)上运行，这样您就有了构建应用程序的基准。

# wpf - ScrollViewer 不会捕捉到窗口

> ID：12183467
> 
> 赞同：0
> 
> 时间：2012-08-29T17:32:59.280
> 
> 标签：wpf, xaml, scrollviewer

所以我正在尝试制作一个可以有水平或垂直滚动​​条的窗口，关键是网格的第一行应该被冻结并放置并且不能垂直滚动（很像 excel 中的冻结窗格）。水平滚动条应滚动两个窗格。我大部分时间都在工作，这是演示的代码子集。

```
<ScrollViewer HorizontalScrollBarVisibility="Auto"  VerticalScrollBarVisibility="Disabled">
    <Grid>
    <Grid.RowDefinitions>
        <RowDefinition />
        <RowDefinition />
    </Grid.RowDefinitions>

        <TextBlock Text="AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" />
        <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled" >
            <TextBlock Text="test2">
                <Run Text="&#10;test2" /><Run Text="&#10;test2" /><Run Text="&#10;test2" /><Run Text="&#10;test2" /><Run Text="&#10;test2" /><Run Text="&#10;test2" />
                <Run Text="&#10;test2" /><Run Text="&#10;test2" /><Run Text="&#10;test2" /><Run Text="&#10;test2" /><Run Text="&#10;test2" /><Run Text="&#10;test2" />
                <Run Text="&#10;test2" /><Run Text="&#10;test2" /><Run Text="&#10;test2" /><Run Text="&#10;test2" /><Run Text="&#10;test2" /><Run Text="&#10;test2" />
                <Run Text="&#10;test2" /><Run Text="&#10;test2" /><Run Text="&#10;test2" /><Run Text="&#10;test2" /><Run Text="&#10;test2" /><Run Text="&#10;test2" />
            </TextBlock>
        </ScrollViewer>
    </Grid>
</ScrollViewer> 
```

所以这几乎可以正常工作，屏幕可以水平滚动并滚动两个窗格，而垂直滚动只会滚动底部窗格（这是我想要的）。但是垂直滚动条不会出现在窗口的一侧，而是您必须一直滚动到右侧才能使用它。有什么方法可以使滚动条捕捉到窗口并垂直滚动而不使其也滚动顶部窗格？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T18:42:57.060

第一个 ScrollViewer 告诉 Grid：“您有任意多的空间，可以根据需要随意增长”。因此，内部 ScrollViewer 永远不会被触发，因为它没有空间限制。

尝试删除第一个 ScrollViewer。

- - 编辑 - - - -

那么，两个“面板”将具有相同的宽度？好吧.. 将每个面板包装在自己的 ScrollViewer 中。顶部面板应该有它的水平 ScroolViewer “隐藏”，没有垂直的。底部应该有可见或“自动”。底部更改时同步顶部 ScrollViewer（在代码中）（检查[http://perezgb.com/2009/07/08/how-to-keep-two-scrollviewers-in-sync-in-wpf](http://perezgb.com/2009/07/08/how-to-keep-two-scrollviewers-in-sync-in-wpf)）

# c# - 这个 RTF 样本有问题吗？

> ID：12183469
> 
> 赞同：0
> 
> 时间：2012-08-29T17:33:06.923
> 
> 标签：c#, rtf

我正在[重写](https://stackoverflow.com/questions/12148731/richtextbox-does-not-display-all-data-when-i-override-createparams)RichTextBox 以告诉它使用可用的最新 RTF 程序集。我有在 MS Word 中显示良好的 RTF。在我的自定义 RichTextBox 中查看时，相同的 RTF 在表格中未对齐。

例子

![在此处输入图像描述](../Images/db5a58a277f39d98459ece5409bcf694.png)

这种 RTF 格式是否有任何问题会导致这种情况发生？

```
{\rtf1\ansi\deff0{\fonttbl{\f0 Arial;}{\f1 Courier New;}}\viewkind4\uc1\pard\lang1033\f0\fs20 
{\pard\f0\ul\b Fingerstick Glucose\b0 : Collected: 8/29/2012 5:44:00 AM\ulnon\f0\par}
\par\pard\lang1033\f0\fs20 
{\trowd
\cellx4000
\cellx9500
 Fingerstick Glucose\intbl\cell
 125 mg/dL\intbl\cell
\row} 
```

}

**更新**

这个大大简化的 RTF 也有同样的问题。“单元格 1”漂浮在表格上方和外部。

```
{\rtf1\ansi\deff0
\trowd
\cellx1000
\cellx2000
\cellx3000
cell 1\intbl\cell
cell 2\intbl\cell
cell 3\intbl\cell
\row
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T18:10:42.430

`\intbl`需要出现在正文之前。

```
{\rtf1\ansi\deff0 
\trowd 
\cellx1000 
\cellx2000 
\cellx3000 
\intbl cell 1\cell 
\intbl cell 2\cell 
\intbl cell 3\cell 
\row 
} 
```

# python - 如何使用 Python 的计时器一次读取键盘输入一个字符

> ID：12183472
> 
> 赞同：0
> 
> 时间：2012-08-29T17:33:35.230
> 
> 标签：python, linux, input

我试图弄清楚如何创建一个可以采用以下参数的小 Python 脚本：

1.  提示 - 字符串
2.  等待时间为整数
3.  停止前的字符数

最后一个是在程序停止接受字符并开始处理输入之前我可以输入的字符数。我见过有些人使用 Python 的 select.select[方法](https://stackoverflow.com/questions/1335507/keyboard-input-with-timeout-in-python)，但这并没有考虑到第三项。我倾向于诅咒，虽然我不知道它是否支持让我想到线程的超时。任何见解都会很棒！这将在带有 Python 2.6 的 Linux 上运行。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-29T19:03:57.813

好的，我已经实现了：D。

```
#!/usr/bin/env python

import sys
from select import select

def main(argv):
    timeout = 3
    prompt = '> '
    max_chars = 3

    # set raw input mode if relevant
    # it is necessary to make stdin not wait for enter
    try:
        import tty, termios

        prev_flags = termios.tcgetattr(sys.stdin.fileno())
        tty.setraw(sys.stdin.fileno())
    except ImportError:
        prev_flags = None

    buf = ''
    sys.stderr.write(prompt)

    while True: # main loop
        rl, wl, xl = select([sys.stdin], [], [], timeout)
        if rl: # some input
            c = sys.stdin.read(1)
            # you will probably want to add some special key support
            # for example stop on enter:
            if c == '\n':
                break

            buf += c
            # auto-output is disabled as well, so you need to print it
            sys.stderr.write(c)

            # stop if N characters
            if len(buf) >= max_chars:
                break
        else:
            # timeout
            break

    # restore non-raw input
    if prev_flags is not None:
        termios.tcsetattr(sys.stdin.fileno(), termios.TCSADRAIN, prev_flags)
    # and print newline
    sys.stderr.write('\n')

    # now buf contains your input
    # ...

if __name__ == "__main__":
    main(sys.argv[1:]) 
```

它相当不完整；我只是放了一些值来测试它。解释几句：

1.  您需要将 tty 切换到“原始”模式 - 否则如果没有通过 enter 键确认，您将无法获得输入，
2.  在原始模式下，默认情况下不再输出输入的字符 - 如果您希望用户看到他正在输入的内容，您需要自己输出它们，
3.  你可能想要处理特殊的键，比如回车和退格——我在这里添加了回车处理。也许你可以重复使用其中的一部分`curses`，
4.  我假设超时是“最后一个键后 3 秒”。如果您希望整个过程超时，我认为最简单的方法是获取当前时间，通过超时（即 get `end_time`）增加它，然后`end_time - current_time`以秒为超时传递到`select()`，
5.  我已将特定于 unix 的导入设为可选。不过，我不知道它是否能在 Windows 上正常工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-05T17:06:41.153

好的。这个线程闲置了几年，但我花了一个小时探索这个（和相关的）线程以获得一个干净的解决方案。最后，我决定使用已经很好用的工具：bash 的`read`. 这是一个要求功率级别的示例。块中的第一行`try`解决了手头的问题（当然，这仅在您从 bash shell 启动 python 脚本时才有效。）在这里，您有 3 秒的时间输入最多 3 个字符。（该`try`块的其余部分转换为 int 并确保它在预期范围内。）

```
import os
try:
  pwr=os.popen('read -t 3 -n 3 -p "enter power level: " power; echo ${power:-0}').read().strip()
  print ''
  pwr=int(pwr)
  if pwr < 0 or pwr > 100: raise ValueError("valid power levels [0..100]")
  print "power=%d"%pwr
except ValueError as e:
  print "Illegal Power:", e.message 
```

# javascript - 使用js文件的网站

> ID：12183488
> 
> 赞同：0
> 
> 时间：2012-08-29T17:35:08.413
> 
> 标签：javascript, iphone

我在使用 JS 文件的网站时遇到问题。只有一页，问题在于使用锚标签的菜单。如果您使用 Iphone，然后单击菜单，它将轻弹，然后转到该部分。有没有办法摆脱这个。

这是我正在使用的 js 文件：

```
jquery-1.6.1.min.js
jquery.easing-1.3.pack.js
jquery.fancybox-1.3.4.pack.js
jquery.nivo.slider.pack.js
jquery.smoothscroll.js
init.js 
```

如果您需要任何编码，任何帮助都会很棒，请告诉我。

有问题的网页是[http://wirestream.tv](http://wirestream.tv)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T18:29:36.970

在菜单项的事件处理程序中，您可以执行以下操作：

```
function(event) {
    event.preventDefault();
    [.. the rest..]
} 
```

这将阻止浏览器跟随`href`链接到页面上的锚点。

*   [阅读更多关于 preventDefault()](https://developer.mozilla.org/en-US/docs/DOM/event.preventDefault)

* * *

我假设菜单项已经有一个点击事件处理程序：

```
$(".menu-item").on("click", function() {}); 
```

# python - Python 中的 HTTP SSL 流水线

> ID：12183490
> 
> 赞同：3
> 
> 时间：2012-08-29T17:35:12.673
> 
> 标签：python, http

我正在开发一个 Python 应用程序，该应用程序需要在短时间内将数百个 HTTP 请求发送到仅限 SSL 的 Web 服务。Python 中是否支持[HTTP 流水线？](http://en.wikipedia.org/wiki/HTTP_pipelining)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T05:19:12.707

我能够使用 Python 的[grequests](https://github.com/kennethreitz/grequests)模块解决这个问题。如[issue 13 所述](https://github.com/kennethreitz/grequests/issues/13)，它很简单：

```
s = requests.session()
rs = [grequests.get(url, session=s) for url in urls]
grequests.map(rs) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-10-24T12:42:52.297

如果你想做实际的流水线，[这个网站](http://code.activestate.com/recipes/576673-python-http-pipelining/)有一个功能可以为你做。使用 Wireshark 进行测试，它允许发送请求而无需等待单个连接的响应。

# excel - ActiveCell.Offset() 和 Range() 之间的速度差异？

> ID：12183493
> 
> 赞同：1
> 
> 时间：2012-08-29T17:35:19.023
> 
> 标签：excel, vba

**摘要：**我遍历多行数据，每次通过循环将来自不同列的数据存储在大约 6 个不同的变量中

**问题：**`Range("A" & some iterator)`与 相比，我会节省大量的 CPU 周期`ActiveCell.Offset(some number)`吗？一个比另一个快多少？

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-29T20:50:05.660

出于纯粹的无聊和一点好奇，我为各种方法组合了一个粗略的计时器来循环 100,000 个 Excel 单元格。

理想情况下，您应该每次运行多次并取平均值，但它会给您一个粗略的速度轮廓。

在我的机器上，这就是我得到的

![在此处输入图像描述](../Images/ac6362a32c321db66041d687ac0aa9cc.png)

```
Option Explicit

#If Win64 Then
    Public Declare PtrSafe Function GetTickCount Lib "kernel32" () As Long
#Else
    Public Declare Function GetTickCount Lib "kernel32" () As Long
#End If

Sub TestSpeedofReadingCells()
Dim tcStart As Long
Dim tcEnd As Long
Dim temp As Variant

Dim i As Long
Dim rngobject As Range
Dim rngItem As Range
Dim rngArray() As Variant
Const rowsToRead As Long = 100000

    '***Read individual cells using .Range
    With Sheet1
        tcStart = GetTickCount
        For i = 1 To rowsToRead
            temp = .Range("A" & i).Value
        Next i
        tcEnd = GetTickCount
        Debug.Print "Time1: " & tcEnd - tcStart
    End With

    '***Read individual cells using .Range & screenupdating off
    With Sheet1
        Application.ScreenUpdating = False
        tcStart = GetTickCount
        For i = 1 To rowsToRead
            temp = .Range("A" & i).Value
        Next i
        tcEnd = GetTickCount
        Application.ScreenUpdating = True
        Debug.Print "Time1a: " & tcEnd - tcStart
    End With

    '***Read individual cells using .Range & screenupdating off & using value2
    With Sheet1
        Application.ScreenUpdating = False
        tcStart = GetTickCount
        For i = 1 To rowsToRead
            temp = .Range("A" & i).Value2
        Next i
        tcEnd = GetTickCount
        Application.ScreenUpdating = True
        Debug.Print "Time1b: " & tcEnd - tcStart
    End With

    '***Read individual cells using range object
    With Sheet1
        Set rngobject = .Range("A1:A" & rowsToRead)
        tcStart = GetTickCount
        For Each rngItem In rngobject
            temp = rngItem
        Next rngItem
        tcEnd = GetTickCount
        Debug.Print "Time2: " & tcEnd - tcStart
    End With

    '***Read individual cells using activecell
    With Sheet1
        tcStart = GetTickCount
        .Range("A1").Select
        For i = 1 To rowsToRead
            temp = ActiveCell.Offset(i - 1, 0).Value
        Next i
        tcEnd = GetTickCount
        Debug.Print "Time3: " & tcEnd - tcStart
    End With

    '***Read individual cells using activecell & screenupdating off
    With Sheet1
        Application.ScreenUpdating = False
        tcStart = GetTickCount
        .Range("A1").Select
        For i = 1 To rowsToRead
            temp = ActiveCell.Offset(i - 1, 0).Value
        Next i
        tcEnd = GetTickCount
        Application.ScreenUpdating = True
        Debug.Print "Time3a: " & tcEnd - tcStart
    End With

    '***Read individual cells using array
    With Sheet1
        tcStart = GetTickCount
        rngArray = .Range("A1:A" & rowsToRead).Value
        For i = 1 To rowsToRead 'should really use Lbound to Ubound but only example
            temp = rngArray(i, 1)
        Next i
        tcEnd = GetTickCount
        Debug.Print "Time4: " & tcEnd - tcStart
    End With

End Sub 
```

# mongodb - mongodb...Mongoose 更新嵌套集...为什么这么难 arg

> ID：12183498
> 
> 赞同：0
> 
> 时间：2012-08-29T17:35:29.863
> 
> 标签：mongodb, mongoose, nested-sets

我正在尝试全局修复一些数据...为什么会出现此错误...TypeError: Object function model(doc, fields, skipId) { if (!(this instanceof model)) r

我正在获取所有数据，它应该更新，但不是。并且错误是钝的。

```
UpdateAllThings: function(req, res) {
    things.find().exec( function(err, items) {
        items.forEach(function(th) {
            th.Features.forEach(function(f) {
                thingsfeatures.findOne({'fName': f.fName},function(err, item) {
                    if (item != null ) {
                        try{
                            things.Update({Features: {"$elemMatch":{_id:f._id}}}, {$addToSet: {'Features.$.tType': item.tType, 'Features.$.fGroup': item.fGroup }}, function (err, inventory) {
                                if (err) return handleError(err);
                            });
                        }catch(err){
                            if (err) return handleError(err);
                        }

                    }
                });
            });
        });

    });
     return res.send('thanks please come again');
} 
```

* ***_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_*** *

确定：这或多或少是它....

```
{
  "Features" : [{
      "_id" : ObjectId("5013c9742df16337609b2706"),
      "tID" : "5013c9742df16337609b26f4",
      "tName" : "Canon EOS T2i (Rebel T2i, Canon 550D) ",
      "fName" : "Retail Price:",
      "fValue" : "899.99",
      "_keywords " : ["899.99"]
    }, {
      "_id" : ObjectId("5013c9742df16337609b2707"),
      "_keywords " : ["1", "x", "Proprietary", "LP-E8", "Lithium-ion", "rechargeble"],
      "fGroup" : ["Power"],
      "fName" : "Batteries Included:",
      "fValue" : "1 x Proprietary LP-E8 Lithium-ion rechargeble",
      "tID" : "5013c9742df16337609b26f4",
      "tName" : "Canon EOS T2i (Rebel T2i, Canon 550D) ",
      "tType" : ["Cammera"]
    }],
  "_id" : ObjectId("5013c9742df16337609b26f4"),
  "tName" : "Canon EOS T2i (Rebel T2i, Canon 550D) ",
  "tType" : "Camera"
} 
```

这有效，但它添加了一个包含数据的数组，而不仅仅是我想要的新字段和数据。

```
db.things.update({"_id":ObjectId("5013c9742df16337609b26f4"), "Features._id" : ObjectId("5013c9742df16337609b2706") }, { $addToSet : { "Features.$.fType" : "Cammera", "Features.$.fGroup"  : "Power" }}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T18:45:16.813

发行一个大写字母。谢谢约翰尼

问题二： Addtoset 创建数组而不是添加到它创建新集合的集合。所以只需使用集合。（个人混淆文档）

第三：要更新嵌套集，只需这样做：这比使用 elementmatch 和其他形式要好得多。

```
db.things.update({"_id":ObjectId("5013c9742df16337609b26f4"), "Features._id" : ObjectId("5013c9742df16337609b2706") }, { $set : { "Features.$.fType" : "Cammera", "Features.$.fGroup"  : "Power" }}) 
```

# phpstorm - PHPStorm：如何抑制代码中的错误消息

> ID：12183501
> 
> 赞同：3
> 
> 时间：2012-08-29T17:35:32.453
> 
> 标签：phpstorm

PHPStorm 的验证器错误地检测到 PHP 代码中的错误。代码有效且有效。如何压制该消息？

![在此处输入图像描述](../Images/d72ba9a315fe07c688125a9c63d2d2a5.png)

UPD：好的，我认为有人认为屏幕截图上有无用的代码，问题可以通过删除一个来解决。下面是一个使用示例：

```
class Singlton_Example extends DSCondition {

    use Instance;

    protected function __construct() {
        // ... some initialization here
    }
}

$test = Singleton_Example::instance(); 
```

# jquery - 使用 JQuery 禁用下拉列表会立即恢复

> ID：12183502
> 
> 赞同：0
> 
> 时间：2012-08-29T17:35:37.257
> 
> 标签：jquery, asp.net-mvc

我正在使用 jQuery 禁用下拉列表。这很奇怪——当我在 firebug 中添加断点时它工作正常！但是，如果我只是运行它，我会看到它在几分之一秒内被禁用，然后又被重新启用！

基本上：

我想禁用列表 if ($("#MessageTypes").val() == 'Text To Speech')

不知道为什么它不粘住..如果我取出 $.get 行它工作正常。为什么会重置呢？特别是因为我在该代码之后禁用了列表？

提前致谢！

```
<script type="text/javascript">
$().ready(function () {

    $("#MessageTypes").change(function () {

        var sMessageType = $("#MessageTypes").val();
        $.get('@Url.Action("GenerateMessageDesc")', { messageType: sMessageType }, function (data) { $('#MessageDesc').replaceWith(data); });

        //Text To Speech Chosen
        if ($("#MessageTypes").val() == 'Text To Speech') {
            $("#MessageDesc").val('5');  //5 is TEXT ID from database -- prob not best practice
            $("#MessageDesc").attr("disabled", true); //disable select
            $("#MessageContent").removeAttr("disabled"); //Enable Message Content
        }

    }); 
```

});

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T17:38:07.480

`$.get`是异步的，因此它会在禁用选项的代码运行后触发其回调。您需要将该代码移动到回调中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T17:44:30.857

采用

```
$.ajax({
    data: ..., type: ..., url: ...,
    success: function(){ //disable here.. }
}); 
```

或者

```
$.get('@Url.Action("GenerateMessageDesc")', { messageType: sMessageType }, 
    function (data) { $('#MessageDesc').replaceWith(data);             
       //other necessary computations
       $("#MessageDesc").attr("disabled", true);}) 
```

这是同步与异步执行的问题。$.get 之后的行继续执行而不等待响应，除非它是回调。

# javascript - 函数未完全循环通过 for 循环

> ID：12183508
> 
> 赞同：0
> 
> 时间：2012-08-29T17:36:10.550
> 
> 标签：javascript, arrays, function, for-loop, indexof

我已经格式化了第二个脚本，因此它可以在记事本++中轻松阅读，这是有问题的，第一个只是让你有数组可以使用......无论如何我创建了这个脚本来用预先存在的数字替换单词表格，它通过第一个键“movespeed / movrate”工作正常，但是当它下降到str和strrate之后，它实际上切断了我评论`//Doesn't get past here?` 的地方它通过onClick初始化（它是一个按钮）

```
<script type="text/javascript">
var key = new Array();
var val = new Array();
key.push("movespeed");
val.push("1");
key.push("str");
val.push("4");
key.push("dex");
val.push("3");
key.push("int");
val.push("1");
key.push("will");
val.push("2");
key.push("Movrate");
val.push("Mov+1");
key.push("strrate");
val.push("1+str");
key.push("dexrate");
val.push("1+dex+(str/4)");
key.push("intrate");
val.push("1+int");
key.push("willrate");
val.push("1+will");
</script> 
```

抱歉，如果上面的脚本搞砸了，它是由页面生成的..

```
<script type="text/javascript">
function Update() {
    for (i = 0; i <= key.length; i++) {
        if (key[i].indexOf("rate") > -1) { //Search through
            for (r = 0; r <= key.length; r++) {
                alert("Checked:" + key[r] + " In:" + key[i]);
                if (key[i].indexOf(key[r]) > -1) { //Finds out which form it should replace
                    alert("Passed:" + key[r] + " In:" + key[i]);
                    var raw = val[i];
                    for (y = 0; y <= key.length; y++) {
                        if (key[i] != "movespeed" && key[i] != "Movrate") { //add a check to see if string is not there
                            //alert("string:"+raw);
                            //raw=raw.replace(key[y],Number(document.getElementById(key[y]).value));
                            raw = raw.replace(key[y], document.getElementById(key[y]).value);
                            //alert("Changed:"+key[y]);
                            alert(raw);
                        } else break;
                        alert("hi");
                    } //Doesn't get past here?
                    alert("key[i]:" + key[i] + "Key[r]:" + key[r]);
                    if (raw.indexOf("Mov") > -1) {
                        for (x = 0; x <= key.length; x++) {
                            if (key[x].indexOf("movespeed") > -1) {
                                raw = raw.replace("Mov", document.getElementById(key[x]).value);
                                break;
                            }
                        }
                    }
                    if (raw.indexOf("Lvl") > -1) {
                        raw = raw.replace("Lvl", document.getElementById('Lvl').value);
                    }
                    if (raw.indexOf("Exp") > -1) {
                        raw = raw.replace("Exp", "0");
                        //Change this to exp...you also need to add an exp to the formula system, derpy.
                    }
                    alert(raw);
                    if (key[i] == "Movrate") {
                        document.getElementById("movespeed").value = eval(raw);
                    } else {
                        document.getElementById(key[i]).value = eval(raw);
                    }
                    break; //So it doesn't keep searching
                }
            }
        }
        alert(key[i]);
    }
}
</script> 
```

Html（它是通过 php 生成的，但它应该可以正常工作而不必生成）

```
 Files<br>======================<br>Basic.xml<br>======================<br><table><tbody><tr><td>Creature Name:</td><td><input type="Text" name="CName" value="Thing" size="10%"></td></tr><tr><td>Level:</td><td><input type="Text" id="Lvl" name="level" onchange="alert('hi')" value="1" size="10%"></td></tr><tr><td>movespeed:</td><td><input type="Text" name="movespeed" id="movespeed" value="1" size="10%"></td></tr><tr><td>str:</td><td><input type="Text" name="str" id="str" value="4" size="10%"></td></tr><tr><td>dex:</td><td><input type="Text" name="dex" id="dex" value="3" size="10%"></td></tr><tr><td>int:</td><td><input type="Text" name="int" id="int" value="1" size="10%"></td></tr><tr><td>will:</td><td><input type="Text" name="will" id="will" value="2" size="10%"></td></tr><script type="text/javascript">var key=new Array();var val=new Array();key.push("movespeed");val.push("1");key.push("str");val.push("4");key.push("dex");val.push("3");key.push("int");val.push("1");key.push("will");val.push("2");key.push("Movrate");val.push("Mov+1");key.push("strrate");val.push("1+str");key.push("dexrate");val.push("1+dex+(str/4)");key.push("intrate");val.push("1+int");key.push("willrate");val.push("1+will");</script><tr><td><input type="button" name="button" value="Update" onclick="Update();"></td><td><input type="submit" value="Save"></td><script type="text/javascript"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T19:41:41.147

逻辑问题，我用 i 代替 r，改成 r 就彻底解决了。人为错误，谢谢大家，尽管你们提供了一些我不知道的有用提示：

```
var check = document.getElementById(key[r]);
                    if (check){
                        document.getElementById(key[r]).value = eval(raw);
                    }
                } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T17:47:55.877

由于您没有给我们任何我们可以实际运行/调试的代码，我们所能做的就是提供您必须调查和调试技术来帮助您自己解决它的可能性：

1.  检查错误控制台或调试控制台是否有脚本错误。如果您的脚本过早停止，那么控制台可能会报告错误。

2.  将所有循环变量声明为局部变量，这样它们就不是隐式全局变量。

3.  `alert()`将您的呼叫更改为，`console.log()`以便您可以更轻松地跟踪事件的顺序。

4.  在调试器中逐步检查您的代码，并通过观察它逐行执行并检查变量来准确查看失败的原因。

5.  如果 HTML 不包含您期望的 id，则此行可能会导致错误。

    `raw=raw.replace(key[y],document.getElementById(key[y]).value);`

您可以像这样使该代码更安全：

```
var item = document.getElementById(key[y]);
if (item) {
    raw=raw.replace(key[y],document.getElementById(key[y]).value);
} 
```

# php - PHP Mysqli Fetch_array 导致 500 内部错误

> ID：12183509
> 
> 赞同：-1
> 
> 时间：2012-08-29T17:36:18.023
> 
> 标签：php, mysql, mysqli

我目前正在尝试使用 mysqli 制作脚本，但是当我运行它时，它返回 500 内部错误，但是当我删除 fatch_array 时，它在没有它的情况下运行。我一直在使用 PHP.Net mysqli_ 手册。PHP 代码

```
<?php
{ /* Global Data */
$GetPath = $_GET['p'];
$SqlUser = "root";
$SqlPass = "***********";
$SqlHost = "localhost";
$SqlData = "Site";
}
{ /* Mysql Connect */
$Sql = new mysqli($SqlHost, $SqlUser, $SqlPass, $SqlData);
if ($Sql->connect_error) { die("Sorry, Could not connect (".$Sql->connect_errno.") ".$Sql->connect_error);}
}
{ /* Test */
$Page = $Sql->real_escape_string($GetPath);
$SqlData = "SELECT * FROM pages WHERE Page = '".$Page."'";
$SqlQuery = $Sql->query($SqlData);
$Data = $SqlQuery->fetch_array(MYSQLI_ASSOC);
echo $Data['Title'];
$Sql->close();
}
?> 
```

那么是什么原因造成的呢？我在 mysql_/ 命令之前使用过，现在我正在切换到 mysqli_*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T18:00:00.460

你的代码很好。您的查询出错了。

一件事是导致它是`$GetPath = $_GET['p'];`

它要么是空的，要么是具有使其错误查询的值。

或者您的表名错误。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-29T18:02:29.777

您不应该假设您的查询成功：

```
$SqlQuery = $Sql->query($SqlData);

if (!$SqlQuery) {
    echo $mysqli->error;
} 
```

在您的情况下`$_GET['p']`是未定义的，这可能是导致您的查询失败的原因，但除非您检查错误，否则您永远不会知道。

# c# - Linq2Sql 未在 C# 类中显示

> ID：12183520
> 
> 赞同：1
> 
> 时间：2012-08-29T17:37:45.033
> 
> 标签：c#, asp.net, linq-to-sql

我有一个 Asp.NET C# 项目，我在其中创建了一个 Linq2SQL 模型。

在一个文件中，我必须使用它，为什么它没有出现在 intelicense 形式的视觉工作室中。

当我尝试使用`InformitoDatabaseDataContext db = new InformitoDatabaseDataContext();`它时无法识别 InformitoDatabaseDataContext。

.dbml 文件的名称是 InformitoDatabase.dbml

[解决方案资源管理器](http://i.stack.imgur.com/x7jGZ.png)

[项目图片（更新）](http://i.stack.imgur.com/o9Uch.png)

我该怎么做才能将 dbml 文件“连接”到我的班级？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T17:39:14.640

我*怀疑*问题是您`...DataContent`在正常情况下使用`...DataContext`的是 ，`x`而不是`n`.

（您的屏幕截图显示了失败 - 与问题中的名称不同 - 但不是声明上下文本身的位置，这让我们有些猜测......但作为`UserChosenPrefixDataContext`默认设置，很可能这是错误的。）

编辑：您现在已将帖子更改为谈论`SchoolDatabaseDataContext`，但在突出显示失败的屏幕截图中，您指的是`InformitoDatabaseDataContent`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T17:39:12.107

我很确定默认值是 DataContext，而不是 DataContent。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T18:19:01.640

我找到了解决方案，问题是你错过了`InformitoDatabaseDataContext.designer.cs`课程检查你是否错过了它。

我只是将一个 dbml 文件添加到 aap 代码文件夹，它由三个文件组成，

1.  信息数据库.dbml
2.  informitodatabase.dbml.layout
3.  informitodatabase.designer.cs

当我在根目录中添加一个新文件时，它错过了设计器文件当我创建这两个文件的对象时，App_Code 文件夹中存在的文件是可访问的，而另一个文件是不可访问的。

请参阅下面的图像文件，我在 App_Code 文件夹中添加了两个文件，在根目录中添加了两个文件。

![在此处输入图像描述](../Images/5194f8feb3a3a557c80a4a104f3d887a.png)

# grails - 通过域访问

> ID：12183522
> 
> 赞同：0
> 
> 时间：2012-08-29T17:37:46.150
> 
> 标签：grails

我正在使用 grails 2.0.1。我创建了一个用户，并在这个用户下创建了一个孩子。然后每个孩子将拥有自己的页面。

如何从个人资料页面访问子域中的详细信息？

用户域如下：

```
String username
String password
String email

static hasMany = [children:Child, followed:User] 
```

子域如下：

```
String firstname
String otherNames
String lastname
Date dateOfBirth 
```

我想我需要添加一个

```
static belongsTo = User 
```

在子域中。但我不确定如何在控制器中访问它。作为一个用户可以有很多孩子，我需要知道选择了哪一个。

您还可以在使用标签时添加要传递的`g:link`变量吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T17:42:37.287

我不确定个人资料页面是什么，我假设它是查看用户属性的页面。如果不是这种情况，请发布代码。

要访问用户的孩子，您可以简单地参考`yourUser.children`. 这只是返回一个 Collection，因此您可以对其进行迭代，获取第一个等。如果您需要从 gsp 中选择的特定子项，则需要传递其 id（或代码，或其他一些唯一标识符）到您的控制器操作，并从您的用户那里找到它。我假设这就是你的第二个问题的意思。

至于 g:link，是的，您[可以传递一个变量](http://grails.org/doc/latest/ref/Tags/link.html)，如下所示：

```
<g:link action="yourAction" params="[childId: childId]"> 
```

# .htaccess - 服务器自动更改文件扩展名的大小写

> ID：12183524
> 
> 赞同：1
> 
> 时间：2012-08-29T17:37:50.643
> 
> 标签：.htaccess

我有以下问题，如果我将任何文件上传到我的网络服务器，它会自动将文件重命名为大写扩展名。例如：如果我上传图片.jpg 我的服务器会自动将其更改为图片.JPG

如果我使用`<img src="picture.jpg">`我的服务器返回 404 错误，但如果我使用`<img src="picture.JPG">`则服务器显示图像。

.htaccess 可以解决这个问题吗？与 RewriteRule 和 RewriteCond 有关吗？

```
RewriteCond %{HTTP_HOST} ^$\.jpg [NC]
RewriteRule ^(.*)$ $1\.JPG [R=301,L] 
```

任何帮助将不胜感激！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T21:36:30.343

尝试将此添加到文档根目录中的 htaccess 文件中：

```
RewriteEngine On
RewriteCond %{REQUEST_URI} ^/(.+)\.jpg$ 
RewriteCond %{DOCUMENT_ROOT}/%1.JPG -f
RewriteRule ^ /%1.JPG [L] 
```

你几乎走在正确的轨道上，除了你不想匹配`%{HTTP_HOST}`变量（因为它只是一个主机名）。我已经添加了更多条件来首先检查如果 JPG 扩展名是大写的，那么在它重写为所有大写 JPG 之前实际上会有一个文件存在。是对第`%1`一个重写条件中匹配项的反向引用`^/(.+)\.jpg$`。

# ruby - 冻结的字符串 - 红宝石

> ID：12183530
> 
> 赞同：4
> 
> 时间：2012-08-29T17:38:28.493
> 
> 标签：ruby, string

我有这个代码：

```
 settings[:base_name].gsub! /[\x00\/\\:\*\?\"<>\|]/, '' 
```

当我运行脚本时，它会引发错误：

```
gsub!': can't modify frozen String (RuntimeError) 
```

我已将代码更改为：

```
 settings[:base_name] = settings[:base_name].gsub /[\x00\/\\:\*\?\"<>\|]/, '' 
```

上面的代码有效，但我一点也不喜欢，有没有办法正确使用gsub！在这种情况下？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-29T17:50:34.227

不。显然，提供字符串的 API 已将其冻结，这意味着任何修改它的方法都会失败。因为`gsub!`修改了调用它的字符串，冻结的对象不能使用`gsub!`. 但是，包含冻结对象的*变量*仍然可以设置为非冻结对象，这就是您的第二个代码片段有效的原因。

API 可能冻结了该对象，因为它是所有实例共享的常量字符串，因此一个实例不应破坏该字符串。但他们确实定义了一个 setter 方法，因此您可以设置该值。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-29T17:55:38.673

@pabloelice，

问题是`String`引用的对象`settings[:base_name]`已被[冻结](http://www.ruby-doc.org/core-1.9.3/Object.html#method-i-freeze)，现在实际上是不可变的。您可以通过以下方式检查：

```
settings[:base_name].frozen?  # => will return 'true' 
```

您可以通过执行以下操作来稍微清理代码和意图：

```
my_setting = settings[:base_name].dup   # Create a duplicate of the setting.
settings[:base_name]  = my_setting.gsub /[\x00\/\\:\*\?\"<>\|]/, '' 
```

但是原始`String`对象不允许`gsub!`在其上调用。

# php - 如何存储有关表的元数据？

> ID：12183540
> 
> 赞同：5
> 
> 时间：2012-08-29T17:39:20.383
> 
> 标签：php, mysql, metadata

我有一张桌子。一个有 25 列的大表，每列都包含有关特定实体的原子数据。实体具体来说是待售的房地产（如房间和房屋），因此该表称为**property**。

每个属性都有一个子类（实际上称为“类型”，但我们将其称为“子类”以避免与数据类型混淆），此时它是“已建成并出售”或“正在建设中，但可以投资”。它还有很多属性，比如地址、价格等，其中大部分是子类之间共享的，但也有一些不是。属性有不同的数据类型，它们是：

*   整数
*   浮点数字
*   短行文本
*   长长的文本块
*   其他表的外键

这些“其他表格”用于从主持人可编辑的选项列表中进行选择（如市区列表、建筑公司列表等）。

版主应该能够创建新属性并对其进行编辑。用户应该能够查看特定属性的详细信息并搜索满足特定条件的属性，然后将它们作为表格查看，可按其中一列排序。

根据属性的子类，只有属性属性的子集可供用户查看和版主进行编辑。此外，根据数据类型，需要不同的 HTML 代码向用户显示这些属性并为版主提供编辑控件，以及在编辑后应执行不同的数据验证检查。

字段列表不是动态的 - 列列表及其显示方式不太可能经常更改，主持人也不需要更改它。

但是，由于 25 是一个相当大的数字，我想将有关**属性**表的所有元数据组织并保存在一个地方：关于哪些子类是列的信息以及应如何显示、编辑和验证数据的信息。如果能够以某种简单的方式（如数组）从我的代码中访问所有这些元数据，那就太好了。我看到三个选项可以做到这一点：

* * *

## 1.常量PHP数组

只需创建一个 PHP 文件或函数，它将使用元数据构造数组，然后在需要时包含/调用它。

**优点：**

*   简单的。
*   快速地。

**缺点：**

*   由于过于冗长和丑陋的 PHP 代码，更难维护。

* * *

## 2\. MySQL数据库

在数据库中创建一个表**property_meta**并将元数据存储在那里。新表将包含**属性**表中的列名、该列中的数据与每个**属性**子类的相关性、预期的数据类型等。然后创建一个函数，该函数将查询必要的字段并将结果数据作为数组返回。

**优点：**

*   更容易更改元数据。
*   需要维护的代码更少。
*   *以后可以*扩展它以允许用户更改列列表。**在属性**表中添加或删除列不会有太大问题。尽管在我看来，用户能够即时更改数据库架构是一种严重的代码异味。如我错了请纠正我。

**缺点：**

*   每当元数据发生变化时，服务器数据库都必须相应地更新。但它只会在数据库模式发生变化时发生，所以没人关心。
*   较慢 - 创建数组的成本将增加与服务器通信的成本以及从数据库中选择数据的成本。尽管后者很可能被 MySQL 查询缓存机制所否定。

* * *

## 3\. 将属性及其属性分开到不同的表中

按照上述解决方案创建元数据表，仅将其命名为**property_attribute**。**还使用property**和**property_attribute**的外键创建**property_data**表，以及属性值的另一列。**属性**表将只包含主键和子类，而实际属性值只能通过具有两个连接的查询来检索。

 ********优点：**

*   最灵活的解决方案。如果属性列表发生更改，数据库模式将保持不变。

**缺点：**

*   每个**property_data**行将包含一条未知类型的数据。要么将它们全部存储为 TEXT 或 BLOB，要么为单独的数据类型创建单独的列。这两种解决方案看起来都很难看。
*   目前还不清楚如何处理**属性**表中的前外键。在每次插入时进行的自动数据完整性检查几乎是不可能的（也许可以使用触发器？我不确定）。
*   选择数据将变得更加困难。数据会被取为`property_id`——三位一体`property_attribute_id`，`value`不直观，需要付出更多努力才能正确输出。
*   不仅如此，按一个或多个属性进行过滤和排序会将我带到受伤的世界。
*   非常非常慢。
*   感觉就像用直升机过马路。

* * *

坦率地说，我不喜欢这两种解决方案。但在我看来，第二个是最不丑的。你怎么看？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T18:16:23.463

我对您的第一个问题是：您是在寻求帮助设计适当的数据库模式，还是在询问如何在代码中处理这些属性/子类？

## 数据库模式

数据库模式并不完全是我的强项，所以我将把它留给可能比我更了解的人。
我可能只是在单个*属性*表中将每个字段作为其自己的列，因为它很容易并且可以让您正确索引每个字段。正如您所说，不会经常添加新字段。

## 在 PHP 中处理它

在我看来，将这些字段视为元数据是错误的。每个子类都有自己的一组字段，这意味着从技术上讲，它们都是不同类型的实体。

为了清楚起见，我保持简单，但这是我要做的事情：

1.  为每种属性类型创建一个 POPO（普通 ole' php 对象）。
    这些只是值对象，类似于您在 ORM 中可能找到的对象。像 Doctrine2 实体一样，它们不执行任何类型的持久性。

2.  *这是我简化示例的地方..这绝对不遵循 SRP 并且是糟糕的设计 imo，但为了简洁起见，我以这种方式编写它。*

    创建一个工厂类，负责从/向数据库获取和保存数据，实例化适当的 POPO 并相应地填充数据。

这就是它的全部。这是一个迷你 ORM。如果您愿意，您实际上可以取消 #2 并使用适当的 ORM...

他们的关键是为每个属性子类提供单独的对象。这是有利的，因为：

*   由于每个属性类型都有自己的类和自己的预定义属性集（和 getter/setter），因此您不必担心填充或使用属于其他属性类型的数据。
*   它提供了一个明确的区别，您可以使用它来呈现特定于每个属性类型的模板。（并不是说你以前不能这样做......我只是觉得这种方式更干净。）
*   每个属性类型类都可以从一个基类继承，以容纳属性类型中通用的所有字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T18:31:19.133

我看到了另一种选择，除了 MySQL 之外，您还可以考虑使用 NoSQL，但您需要认真考虑您的要求，以便在两者之间做出正确的产品选择

*   列店/列族
*   文档存储
*   核心价值
*   ...和更多

最大的好处之一是灵活的数据模型，但是 NoSQL 和关系数据库各有优缺点，因此在决定使用 nosql 解决方案之前，您必须了解该产品******

# wordpress - 常规非图像链接的 WordPress 相对链接

> ID：12183549
> 
> 赞同：0
> 
> 时间：2012-08-29T17:40:22.823
> 
> 标签：wordpress, relative-url

有没有办法以“相对”的方式在 WordPress 中进行正常链接（不是图像源链接）？

我在 WP 和网站的某些部分中做自定义网站，例如单击时会导致特定动态构建的 WordPress 页面的图像链接，我总是绝对链接它们。

因此，例如，如果我想要链接到的**网站 wordpress 页面是****page_id=39**并且该网站是，`XYZ.com`那么我的图片链接将是**ETC...**

 **问题在于，当我将站点从测试服务器转移到实时服务器时，我必须再次手动进入并重做所有手动链接。

与看起来像这样的图像相关链接不同，`<img src="<?php bloginfo('template_directory');?>/image here"/>`它相对于在网站上的某处寻找物理图像，WordPress 页面不存在传统意义上的实际 page.php 等，所以我该如何解决这个问题，是我可以使用一些功能，让我使用相对链接/路径构建器到实际的动态 wordpress 页面，这样我就不必手动/绝对链接某些东西？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T17:56:38.183

当您使用相同的方式获取图像的链接时，您可以通过 另一种方式（更好的方式）`<?php bloginfo('template_directory');?>/iamges/...`获取任何页面的 url，即使用页面的 id 获取页面的永久链接`<a href="<?php bloginfo('url');?>/?page_id=39">`**

# c# - 如何获取在按钮按下事件期间创建的信息以显示在我的 html 页面上？

> ID：12183551
> 
> 赞同：2
> 
> 时间：2012-08-29T17:40:51.223
> 
> 标签：c#, asp.net, .net, html

我正在使用 Visual Studio 2010 制作一个 asp.net 应用程序。我有一个文本字段和一个按钮，可以调用文本字段中字符串上的方法。

```
Enter your address here: <asp:TextBox ID="tb_address" runat="server" ></asp:TextBox>
<asp:Button Text="Submit" runat="server" onclick="GetLatLong" ></asp:Button> 
```

在按钮的 C# 文件中，我有我的 GetLatLong 方法：

```
protected void GetLatLong(object sender, EventArgs e)
{
    String address = tb_address.Text;
    String query = "http://maps.googleapis.com/maps/api/geocode/xml?address=";
    address = address.Replace(" ", "+");
    query += address + "&sensor=false";
    XmlDocument xDoc = new XmlDocument();
    xDoc.Load(query);
    String lat = xDoc.SelectSingleNode("/GeocodeResponse/result/geometry/location/lat").InnerText;
    String lon = xDoc.SelectSingleNode("/GeocodeResponse/result/geometry/location/lng").InnerText;
} 
```

如何让我的 lat 和 lon 字符串显示在我的 html 页面上？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T17:44:11.387

使用`<asp:Label />`s。

```
<asp:Label ID="lblLat" runat="server" />
<asp:Label ID="lblLong" runat="server" />

String lat = xDoc.SelectSingleNode("/GeocodeResponse/result/geometry/location/lat").InnerText;
String lon = xDoc.SelectSingleNode("/GeocodeResponse/result/geometry/location/lng").InnerText;
lblLat.Text = lat;
lblLong.Text = lon; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T17:45:19.623

您必须创建用于显示结果的控件（您可以在设计模式下将它们添加到表单中，也可以在单击事件处理程序上动态添加它们）。让我们说 asp:Labels，然后将结果值分配给这些标签。

```
Label result1 = new Label();
result1.Text = lat;
this.Controls.Add(result1); 
```

或者

在你的代码中有这个

```
<asp:Label ID='result1' runat='server' /> 
```

然后直接从后面的代码中赋值。

```
result1.Text = lat; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-29T17:46:48.023

您可以包含一些`Literal`控件（或`Label`控件，或任意数量的其他页面元素）来保存值。控件如下所示：

```
<asp:Literal runat="server" ID="LatitudeOutput" />
<asp:Literal runat="server" ID="LongitudeOutput" /> 
```

您可以在代码隐藏中设置它们的值：

```
String lat = xDoc.SelectSingleNode("/GeocodeResponse/result/geometry/location/lat").InnerText;
String lon = xDoc.SelectSingleNode("/GeocodeResponse/result/geometry/location/lng").InnerText;
LatitudeOutput.Text = lat;
LatitudeOutput.Text = lon; 
```

在许多情况下，我个人更喜欢`Literal`控件，因为它们不会带来任何额外的标记。 `Label`例如，控件被包装在`span`标签中。但是，与许多事情一样，有很多方法可以做到这一点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-29T17:51:23.397

您必须在您的 aspx 页面上创建一个标签控件。将此添加到您要显示 lng 和 lat 的 aspx 页面

```
<asp:Label ID="lblLat" runat="server" />
<asp:Label ID="lblLng" runat="server" /> 
```

然后在你的代码后面

```
lblLat.Text = xDoc.SelectSingleNode("/GeocodeResponse/result/geometry/location/lat").InnerText;
lblLng.Text = xDoc.SelectSingleNode("/GeocodeResponse/result/geometry/location/lng").InnerText; 
```

您正在将标签的 Text 设置为通过 SelectSingleNode 调用获得的值。

# java - 如何从 JSON 转换为 JSONP？

> ID：12183552
> 
> 赞同：5
> 
> 时间：2012-08-29T17:40:56.787
> 
> 标签：java, jquery, json, jsonp

我编写了以下代码以将 JSON 数据发送到前端。但是由于跨域安全问题，我们需要将其转换为 JSONP，有人可以建议我需要为这种转换修改什么吗？

# 服务器端代码

```
JsonFactory jfactory = new JsonFactory();
         ObjectMapper mapper = new ObjectMapper();
         try {
                StringWriter stringWriter = new StringWriter();
                JsonGenerator jGenerator = jfactory.createJsonGenerator(stringWriter);
                jGenerator.useDefaultPrettyPrinter();
                jGenerator.writeStartObject(); // {
                jGenerator.writeStringField("title", title); // "title" : title
                jGenerator.writeStringField("Description", desc); // "desc" :
                jGenerator.writeFieldName("images");
                jGenerator.writeStartArray(); // [
                if(imageArray.size() != 0){
                for (String img : imageArray) {
                    jGenerator.writeString(img); // "msg 1"
                }
                }
                jGenerator.writeEndArray(); // ]
                jGenerator.writeEndObject(); // }
                jGenerator.close();
                response.getWriter().write(stringWriter.toString());
                System.out.println(stringWriter.toString());
                response.getWriter().close();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            System.out.println("JasonGen servlet called end"); 
```

# 前端Javascript：

```
$.getJSON("http://localhost:8080/JsoupPrj/JasonGen?url="+ url[0],function(data){
                var imageArray=[];
                var imageOne = null;
                    imageArray=data.images;
....................
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T17:50:16.933

由于您使用的是 jQuery 并且您控制服务器端，因此请更改您的服务器代码，以便它查找`callback`参数。此参数的值将是客户端代码所期望的回调函数的名称。然后，不要返回裸 JSON，而是以以下形式返回它：`callbackName(rawJson)`.

例如，假设一个 servlet API：

```
String callbackName = request.getParameter("callback");

// ... your JSON code 

if (callbackName != null)
{
    // JSONP wrapping:
    response.getWriter().write(callbackName +
                               "(" + stringWriter.toString() + ")");
    System.out.println(callbackName + "(" + stringWriter.toString() + ")");
}
else
{
    response.getWriter().write(stringWriter.toString());
    System.out.println(stringWriter.toString());
}

response.getWriter().close(); 
```

然后在客户端，继续使用`jQuery.getJSON`，但将查询参数附加`?callback=?`到您的 URL，或者改为`jQuery.ajax`用于您的呼叫，并使用该`dataType: jsonp`设置。

# flash - Flash 中的多个自定义复选框组件设计？

> ID：12183553
> 
> 赞同：0
> 
> 时间：2012-08-29T17:40:59.833
> 
> 标签：flash, actionscript, checkbox, components

是否可以在 Flash 中创建多个自定义复选框组件设计？

我从组件面板中拖放了一个复选框组件并对其进行了自定义。现在，当我从组件面板中拖动另一个复选框组件时，它会询问我是要使用现有组件还是替换现有组件。我需要一个新的，不同的。

用例：我想使用复选框在 Flash 游戏中打开/关闭声音和全屏。两个复选框都有不同的设计。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T21:07:24.583

有两种方法： - 创建一个编程复选框项目（类和代码具有与复选框组件相同的行为），> 似乎它不是您正在寻找的解决方案，需要一点（如果不是更多）知识Actionscript - 或复制库中现有的复选框组件。

第二种解决方案更快，并且涉及将 Checkbox 组件的多个副本放入您的库中。可以多次使用相同的组件，但如果它们位于同一个库文件夹中，则它们不能共享相同的名称。要继续该方法，您可以： - 在您的 FLA 文件中，创建一个新的库文件夹，将与复选框相关的所有内容放入其中，然后再次将复选框从组件面板拖到您的库中，并自定义第二个。- 在一个新的 FLA 文件中，将复选框组件拖到您的库中，重命名在此过程中创建的每个影片剪辑（例如，在所有名称的末尾添加“_2”）并将所有符号复制到您的主文件库中- 或复制所有与复选框相关的影片剪辑（在库中，右键单击符号 > 复制，

希望它足够清楚让您理解，如果您需要，请随时询问更多详细信息！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T22:04:39.097

只需在运行时使用该`checkbox.setStyle("propertyName",value)`方法更改实例的样式；

您可以在此处找到可用样式属性的列表（基本上是按钮的各种状态）：

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/fl/controls/CheckBox.html#styleSummary](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/fl/controls/CheckBox.html#styleSummary)

怎么做：在 flash 库中，找到复选框皮肤资源。（通常在一个名为 Component Assets/CheckBoxSkins 的文件夹中。右键单击 'CheckBox_upIcon' 并选择重复。给一个相关的名称，然后检查 "export for actionscript" ，给它一个类名，让我们说 "FullScreenCheckbox_upIcon"。

现在在您的代码中，您可以告诉任何复选框使用该皮肤。如果您的全屏复选框的实例名称为 fCheckBox，您可以这样做：

```
fCheckBox.setStyle("icon",FullScreenCheckBox_upIcon); 
```

对您想要不同的任何其他状态（向下、结束）重复该步骤。

# r - 如何将 R 脚本提交给作业调度程序：bash、编译器、Rscript 或其他？

> ID：12183556
> 
> 赞同：2
> 
> 时间：2012-08-29T17:41:08.243
> 
> 标签：r, compiler-construction, rscript

### 我的问题：

我有一个`myscript.R`使用配置文件的 R 脚本，例如`config.xml`，将此类脚本提交给作业调度程序（例如，使用 qsub）的最佳方式是什么？

我希望能够以与我使用相同的方式使用脚本和文件，例如嵌入在 bash 脚本中的 C 或 Fortran 可执行文件。

### 我目前如何使用 FORTRAN：

以下是我使用已编译的 Fortran 可执行文件的方法示例，`fex`如下所示`fscript.sh`：

```
!#/bin/bash/
mpirun [arguments] "fex" -f $1 
```

上面的内容`fscript.sh`可以发送到集群，并带有读取配置文件的指令，如下所示：

```
qsub [arguments] fscript.sh 1 config.xml 
```

### 我目前如何以类似的方式使用 R：

为了以类似的方式运行 R，我使用的是 bash 脚本`rscript.sh`

```
#!/bin/bash
CONFIG=$1
env $CONFIG R --vanilla < myscript.R 
```

这可以在命令行运行，例如

```
qsub [arguments] rscript.sh config.xml 
```

其中`rscript.R`包含类似的东西

```
library(XML)
config <- Sys.getenv("CONFIG")
config <- xmlList(xmlParse(config.xml))
myfunction(config) 
```

### 我的问题

1.  Rscript 或编译器会提供比我目前使用的 bash 更强大的方法吗？
2.  在哪种情况下，一种比另一种更合适（优点和缺点是什么）？
3.  在这两种情况下我将如何传递配置文件？

### 到目前为止我做了什么

除了提出上述 bash 脚本`rscript.sh`之外，我还阅读了有关[`Rscript`](http://blog.revolutionanalytics.com/2009/01/using-r-as-a-scripting-language-with-rscript.html)和[compiler](http://dirk.eddelbuettel.com/blog/2011/04/12/#the_new_r_compiler_package)的教程和一些文档，但我不清楚这些是否是一种优于另一种的上下文。此外，尚不清楚在任一上下文中传递配置文件的最佳方式。

这个问题与其他问题有关，例如，[从 R 程序创建可执行文件的方法是什么](https://stackoverflow.com/questions/4918553/what-are-the-ways-to-create-an-executable-from-r-program?lq=1)，[是否存在 R 编译器？](https://stackoverflow.com/questions/1452235/does-an-r-compiler-exist). 但是，我认为这对于使用已编译的代码不是必需的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T17:58:33.963

和什么`compiler`有什么关系？它将*R 代码编译为 R 解释器的字节码，*因此它可能不会做你怀疑的事情。

对于脚本，使用`Rscript`（随处可用）或[littler](http://dirk.eddelbuettel.com/code/littler.html)（早于 Rscript）。

*实际上，我们为此编写脚本的目的更明确地编写*[了](http://dirk.eddelbuettel.com/code/littler.html) littler ，而我的“使用 R 的 HPC 简介”讲座（请参阅[演示页面](http://dirk.eddelbuettel.com/presentations.html)）实际上有将此类脚本提交给[slurm 调度程序/资源管理器](https://computing.llnl.gov/linux/slurm/)的示例（因为我从未访问过）。*`qsub`*

 *这里还有许多`Rscript`与命令行解析相关的其他问题。那应该让你开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T20:49:43.337

根据[Dirk 的回答](https://stackoverflow.com/a/12183809/199217)和另一个问题[Parsing command line arguments in R scripts](https://stackoverflow.com/q/3433603/199217)，我提出了以下解决方案，使我能够创建一个接受配置文件名称的 R 可执行文件

来自 OP的`myscript.sh`and`rscript.R`可以合并为以下`newrscript.R`

```
#!/usr/bin/Rscript
config.file <- commandArgs(trailingOnly = TRUE)
config <- xmlParse(config.file)
myfunction(config) 
```

然后可以从命令行调用它，以与原始使用非常相似的方式传递配置文件的名称`myscript.sh`：

```
./newrscript.R config.xml 
```*

# jquery - Jquery Form Plug in，如何更改目标中的值

> ID：12183563
> 
> 赞同：0
> 
> 时间：2012-08-29T17:41:36.777
> 
> 标签：jquery, ajax, forms

```
<script language="JavaScript">

var options = { 
    target:     '.postBoxAjax', 
    url:        'sub/function.php', 
    success: SubmitSuccesful
}; 

$('#myForm').ajaxForm(options);

</script> 
```

我可以将html标签添加到目标吗？

我想制作一个输入框，访问者可以在其中提交图像 url，一旦他们提交链接而不刷新，它将显示图像。目前，代码只会在 .postBoxAjax 中显示图片 url，我想补充一下：

```
<img src="taget value" width="580"/> 
```

包装目标值，在此先感谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T17:56:01.693

您不需要执行 AJAX 调用来更新您的页面。您只需要获取特定位置的输入值，并将其值放入图像中。在最基本的层面上，你想按照这些思路做一些事情

```
$(document).append("<img src=\""+ $("input")[0].value +"\" width=\"580\"/>"); 
```

把它放在一个函数中，然后从提交按钮的 onclick 事件中调用它。它将获取页面上的第一个输入并将其值转储到图像中。请注意，在将输入值注入页面之前，您应该清理输入，因为这存在 javascript 注入攻击的风险。

# triggers - 在 SFDC 中创建新的自定义对象时如何填充查找字段

> ID：12183564
> 
> 赞同：0
> 
> 时间：2012-08-29T17:41:35.807
> 
> 标签：triggers, salesforce, apex-code, lookup

我在这种情况下苦苦挣扎。我在 SFDC（机会）中有一个标准对象，它有一个指向用户对象的自定义查找字段我想要做的是用创建的用户的名称填充这个字段机会布局中可用的自定义对象...

即New GOP Checklist --- 然后选择checklist 的类型--- 然后填写所有必填字段并单击save，这指向Opportunity 视图。首先这是可行的吗？我知道查找字段可能很棘手。我的第二个问题是以编程方式（触发）或使用工作流和字段更新功能的最佳方法是什么？

谢谢 ！！

```
trigger TR_OrderChecklist on Order_Checklist__c (before insert) {

//----------------------------------------------------------------------------------
// Function 1: Update COS Operations Attribute in Opportunity
//----------------------------------------------------------------------------------

for(Order_Checklist__c o : trigger.new){
  if(o.Opportunity__r.CARE_Operations__c == null) {
    o.Opportunity__r.CARE_Operations__c = UserInfo.getUserId();
  }
} 
```

}

这就是他们想出的。在标准机会对象中，我们有一个与用户相关联的查找字段.. CARE_Operations__c.. 现在触发器应该执行以下操作..

1.- 创建新的 GOP 清单时，如果用户在名为 COSOperations_c 的 GOP 对象中填充新的自定义查找字段，*则保留该名称， 2.- 如果用户没有填充 COSOperations* _c 字段而是 Opp 中的字段级别 CARE_Operations__c 填充使用该名称。3.- 如果 CARE_Operations_c*或 COSOOperations_c*都没有填充（用户输入），那么 COSOOperations__c 将是刚刚创建 GOP 对象的人。

这是我到目前为止..

```
trigger TR_OrderChecklist on Order_Checklist__c (before insert) {
List<Opportunity> COS_Op = new List<Opportunity>();
COS_Op = [select CARE_Operations__c from Opportunity where id in (select   Opportunity__c from Order_Checklist__c where COSOperations__c != null)];
for(Order_Checklist__c OC : trigger.new) {
    if(OC.COSOperations__c != null) {
       break;}
    if(COS_Op != null){
       OC.COSOperations__c = OC.Opportunity__r.CARE_Operations__c;} 
    if(OC.COSOperations__c == null){
       OC.COSOperations__c = UserInfo.getUserId();}
}       
} 
```

我的问题出在第二个 if 语句中.. 其他两个条件正常工作.. ！有任何想法吗 ？谢谢 ！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T04:08:41.290

我的（第二次）修复您发布的触发代码：

```
trigger TR_OrderChecklist on Order_Checklist__c (after update) {
    List<Opportunity> opptsToUpdate = new List<Opportunity>();
    for(Order_Checklist__c o : trigger.new) {
        if(o.Opportunity__r.CARE_Operations__c == null) {
            o.Opportunity__r.CARE_Operations__c = UserInfo.getUserId();
            // Queue it up for one update statement later
            opptsToUpdate.add(o.Opportunity__r);
        }
    }
    // Commit any changes we've accumulated for the opportunity records
    if (opptsToUpdate.size() > 0)
        update opptsToUpdate;
} 
```

* * *

假设您有 Opportunity.My_User__c 作为查找（用户）和 My_Object__c.Opportunity__c 作为查找（机会）这个触发器是一个好的开始：

```
trigger HandleMyObjectInsert on My_Object__c (before insert) {
    User actingUser = [SELECT id FROM User WHERE Id = :UserInfo.getUserId()];
    List<Opportunity> oppts = new List<Opportunity>();
    for (My_Object__c myobj : trigger.new) {
        Opportunity o = new Opportunity();
        o.Id = myobj.Opportunity__c;
        o.My_User__c = actingUser.Id;
        oppts.add(o);
    }
    update oppts;
} 
```

为了证明 Lookup(User) 真的只是一个 Id 字段，试试这个练习。在名为“My User”的 Opportunity 对象上创建一个新的 Lookup(User) 字段。

*   数据类型：查找关系
*   相关：用户
*   字段标签：我的用户
*   字段名称：My_User（变成 My_User__c 也可以通过 My_User__r 获得）

从 Salesforce 网页中，选择现有机会记录并将我的用户字段设置为某个随机用户并保存记录。现在从开发者控制台，执行这个匿名 APEX：

```
Opportunity[] oppts = [
    SELECT id, My_User__c, My_User__r.Name
    FROM Opportunity
    WHERE My_User__c != null
];
for (Opportunity o : oppts) {
    system.debug('##### Opportunity.My_User__c = ' 
        + o.My_User__c 
        + ', o.My_User__r.Name = ' 
        + o.My_User__r.Name);
} 
```

关闭花哨的日志视图并单击“打开原始日志”，您将看到如下一行：

```
16:42:37.077 (77645000)|USER_DEBUG|[7]|DEBUG|##### Opportunity.My_User__c = 00530000000grcbAAA, o.My_User__r.Name = John Doe 
```

看，Salesforce 将 __c 查找字段视为 Id 字段。在这种情况下，它是与 User 对象的 Id 的外键关系。Salesforce 让您认为 Name 字段是主键，但实际上它是 Id 字段（好吧，我实际上还没有看到 Salesforce 的 ERD，但我很确定这是正确的）。请注意，您可以通过 __r 构造访问查找对象的字段。

更新字段只需更改 My_User__c id：

```
Opportunity[] oppts = [
    SELECT id, My_User__c
    FROM Opportunity
    WHERE My_User__c != null
    LIMIT 1
];
for (Opportunity o : oppts) {
    o.My_User__c = :UserInfo.getUserId();
}
update oppts; 
```

或者，您可以像这样从 soql 查询中获取用户 ID：

```
// Let's query all users and use the 3rd one in the list (zero-index 2)
User[] users = [select id from user];
Opportunity o = new Opportunity(My_User__c = users[2].id, Name='Testing', StageName = 'Prospecting', CloseDate = System.today());
insert o; 
```

或者，通过电子邮件地址查找用户：

```
User[] users = [select id from user where email = 'first.last@company.com' and IsActive = true];
if (users.size() > 0) {
    Opportunity o = new Opportunity(My_User__c = users[0].id, Name='Testing', StageName = 'Prospecting', CloseDate = System.today());
    insert o;
} 
```

这只是获取当前用户 ID 的一种非常好的方法：

```
UserInfo.getUserId() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T19:37:55.100

我对这里的要求有点困惑。我们是说在创建自定义对象的记录时需要创建新的机会记录吗？

如果是这样，那是可能的。您可以在“插入后”类型的客户对象上编写 APEX 触发器，并创建一个新的机会记录并根据需要填充其字段。

# javascript - 如何使用 JavaScript 在另一个页面上填写表单

> ID：12183572
> 
> 赞同：10
> 
> 时间：2012-08-29T17:42:13.667
> 
> 标签：javascript, forms

我正在尝试通过 JavaScript 填写表单上的字段。问题是我只知道如何在当前页面上执行 JavaScript，所以我无法重定向到表单并从那里执行代码。我对使用这个术语犹豫不决，但我想到的唯一短语是跨站点脚本。我试图执行的代码如下。

```
<script language="javascript"> 

window.location = "http://www.pagewithaform.com";

loaded();

//checks to see if page is loaded. if not, checks after timeout.
function loaded()
{
    if(window.onLoad)
    {
      //never executes on new page. the problem
      setTitle();
    }
    else
    {
      setTimeout("loaded()",1000);
      alert("new alert");
    }
}

//sets field's value
function setTitle()
{
    var title = prompt("Field Info","Default Value");
    var form = document.form[0];
    form.elements["fieldName"].value = title;
}
</script> 
```

我不确定这是否可能。我也对其他想法持开放态度，例如 PHP。谢谢。

编辑：第二页是 SharePoint 表单。我无法编辑表单上的任何代码。目标是编写一个脚本来预填充大部分字段，因为其中 90% 是静态的。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-29T17:49:15.797

您正在尝试维护页面之间的状态。通常有两种方式来保持状态：

*   在 cookie 中存储状态
*   在查询字符串中存储状态

无论哪种方式，您的第一个页面都必须保持状态（到 cookie 或查询字符串），而另一个页面必须 - 单独 - 恢复状态。您不能在两个页面上使用相同的脚本。

# 示例：使用 Cookie

使用 cookie，第一页必须将下一页所需的所有表单数据写入 cookie：

```
<!DOCTYPE html>
<html>
 <head>
     <title>Maintaining State With Cookies</title>
 </head>
 <body>
     <div>
         Setting cookies and redirecting...
     </div>
     <script>
         // document.cookie is not a real string
         document.cookie = 'form/title=My Name is Richard; expires=Tue, 29 Aug 2017 12:00:01 UTC'
         document.cookie = 'form/text=I am demoing how to use cookies in JavaScript; expires=Tue, 29 Aug 2017 12:00:01 UT';
         setTimeout(function(){
             window.location = "./form-cookies.html";
         }, 1000);
     </script>
 </body>
</html> 
```

...然后第二页将读取这些 cookie 并用它们填充表单字段：

```
<!DOCTYPE html>
<html>
 <head>
     <title>Maintaining State With Cookies</title>
 </head>
 <body>
     <form id="myForm" action="submit.mumps.cgi" method="POST">
         <input type="text" name="title" />
         <textarea name="text"></textarea>
     </form>
     <script>
         var COOKIES = {};
         var cookieStr = document.cookie;
         cookieStr.split(/; /).forEach(function(keyValuePair) { // not necessarily the best way to parse cookies
             var cookieName = keyValuePair.replace(/=.*$/, ""); // some decoding is probably necessary
             var cookieValue = keyValuePair.replace(/^[^=]*\=/, ""); // some decoding is probably necessary
             COOKIES[cookieName] = cookieValue;
         });
         document.getElementById("myForm").getElementsByTagName("input")[0].value = COOKIES["form/title"];
         document.getElementById("myForm").getElementsByTagName("textarea")[0].value = COOKIES["form/text"];
     </script>
 </body>
</html> 
```

# 示例：使用查询字符串

在使用查询字符串的情况下，第一页将只在重定向 URL 中包含查询字符串，如下所示：

```
<!DOCTYPE html>
<html>
 <head>
     <title>Maintaining State With The Query String</title>
 </head>
 <body>
     <div>
         Redirecting...
     </div>
     <script>
         setTimeout(function(){
             window.location = "./form-querystring.html?form/title=My Name is Richard&form/text=I am demoing how to use the query string in JavaScript";
         }, 1000);
     </script>
 </body>
</html> 
```

...而表单随后将解析查询字符串（在 JavaScript 中可通过`window.location.search`- 以 a 开头`?`）：

```
<!DOCTYPE html>
<html>
 <head>
     <title>Maintaining State With The Query String</title>
 </head>
 <body>
     <form id="myForm" action="submit.mumps.cgi" method="POST">
         <input type="text" name="title" />
         <textarea name="text"></textarea>
     </form>
     <script>
         var GET = {};
         var queryString = window.location.search.replace(/^\?/, '');
         queryString.split(/\&/).forEach(function(keyValuePair) {
             var paramName = keyValuePair.replace(/=.*$/, ""); // some decoding is probably necessary
             var paramValue = keyValuePair.replace(/^[^=]*\=/, ""); // some decoding is probably necessary
             GET[paramName] = paramValue;
         });
         document.getElementById("myForm").getElementsByTagName("input")[0].value = GET["form/title"];
         document.getElementById("myForm").getElementsByTagName("textarea")[0].value = GET["form/text"];
     </script>
 </body>
</html> 
```

# 示例：使用片段标识符

还有一个选择：由于状态是在客户端（而不是在服务器端）严格维护的，您可以将信息放在片段标识符（URL 的“散列”部分）中。

第一个脚本与上面的查询字符串示例非常相似：重定向 URL 仅包含片段标识符。为方便起见，我将重新使用查询字符串格式，但请注意`#`a 曾经所在的位置`?`：

```
<!DOCTYPE html>
<html>
 <head>
     <title>Maintaining State With The Fragment Identifier</title>
 </head>
 <body>
     <div>
         Redirecting...
     </div>
     <script>
         setTimeout(function(){
             window.location = "./form-fragmentidentifier.html#form/title=My Name is Richard&form/text=I am demoing how to use the fragment identifier in JavaScript";
         }, 1000);
     </script>
 </body>
</html> 
```

...然后表单必须解析片段标识符等：

```
<!DOCTYPE html>
<html>
 <head>
     <title>Maintaining State With The Fragment Identifier</title>
 </head>
 <body>
     <form id="myForm" action="submit.mumps.cgi" method="POST">
         <input type="text" name="title" />
         <textarea name="text"></textarea>
     </form>
     <script>
         var HASH = {};
         var hashString = window.location.hash.replace(/^#/, '');
         hashString.split(/\&/).forEach(function(keyValuePair) {
             var paramName = keyValuePair.replace(/=.*$/, ""); // some decoding is probably necessary
             var paramValue = keyValuePair.replace(/^[^=]*\=/, ""); // some decoding is probably necessary
             HASH[paramName] = paramValue;
         });
         document.getElementById("myForm").getElementsByTagName("input")[0].value = HASH["form/title"];
         document.getElementById("myForm").getElementsByTagName("textarea")[0].value = HASH["form/text"];
     </script>
 </body>
</html> 
```

# 如果您无法编辑表单页面的代码

[尝试使用greasemonkey 脚本。](http://userscripts.org/scripts/show/39313)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T17:48:37.310

[这是一个使用cookies](https://developer.mozilla.org/en-US/docs/Code_snippets/Cookies)的好地方

例如：来自[quirksmode.org](http://www.quirksmode.org/js/cookies.html)

```
function createCookie(name,value,days) {
    if (days) {
        var date = new Date();
        date.setTime(date.getTime()+(days*24*60*60*1000));
        var expires = "; expires="+date.toGMTString();
    }
    else var expires = "";
    document.cookie = name+"="+value+expires+"; path=/";
}

function readCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for(var i=0;i < ca.length;i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1,c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
    }
    return null;
} 
```

附带说明，您可以使用 onload 事件来了解页面何时准备就绪

```
<script language="javascript"> 

function setTitle(){
    var title = prompt("Field Info","Default Value");
    var form = document.form[0];
    form.elements["fieldName"].value = title;
}

windows.onload = setTitle;

</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-28T08:55:13.630

如果可以在不访问目标系统/源/mitm 方法的情况下操纵目标网站，那么这将是恶意软件与点击劫持相结合的一条开放高速公路！我不希望你的脚本告诉我的银行表格该做什么。;-)

为此，请使用某种自动化工具，例如 AutoIt (www.autoitscript.com)。易于学习并且具有良好的表单集成。如果标准还不够，请为 AutoIt 寻找诸如 winhttp 之类的 UDF。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-07-18T09:57:24.443

**使用本地存储非常容易**
**第一页表单**

```
<style>
  input{
    font-size: 25px;
  }
  label{
    color: rgb(16, 8, 46);
    font-weight: bolder;
  }
  #data{

  }
</style>
<script>
function getData()
{
    //gettting the values
    var email = document.getElementById("email").value;
    var password= document.getElementById("password").value; 
    var telephone= document.getElementById("telephone").value; 
    var mobile= document.getElementById("mobile").value; 
    //saving the values in local storage
    localStorage.setItem("txtValue", email);
    localStorage.setItem("txtValue1", password);
    localStorage.setItem("txtValue2", mobile);
    localStorage.setItem("txtValue3", telephone);   
}
</script>

   <fieldset style="width: fit-content; margin: 0 auto; font-size: 30px;">
        <form action="action.html">
        <legend>Sign Up Form</legend>
        <label>Email:<br />
        <input type="text" name="email" id="email"/></label><br />
        <label>Password<br />
        <input type="text" name="password" id="password"/></label><br>
        <label>Mobile:<br />
        <input type="text" name="mobile" id="mobile"/></label><br />
        <label>Telephone:<br />
        <input type="text" name="telephone" id="telephone"/></label><br> 
        <input type="submit" value="Submit" onclick="getData()">
    </form>
    </fieldset> 
```

**这是第二页**

```
<script>
//displaying the value from local storage to another page by their respective Ids
document.getElementById("data").innerHTML=localStorage.getItem("txtValue");
document.getElementById("data1").innerHTML=localStorage.getItem("txtValue1");
document.getElementById("data2").innerHTML=localStorage.getItem("txtValue2");
document.getElementById("data3").innerHTML=localStorage.getItem("txtValue3");
</script>
 <div style=" font-size: 30px;  color: rgb(32, 7, 63); text-align: center;">
    <div style="font-size: 40px; color: red; margin: 0 auto;">
        Here's Your data
    </div>
    The Email is equal to: <span id="data"> Email</span><br> 
    The Password is equal to <span id="data1"> Password</span><br>
    The Mobile is equal to <span id="data2"> Mobile</span><br>
    The Telephone is equal to <span id="data3"> Telephone</span><br>
    </div> 
```

# http - 以下标题是什么：X-Chrome-Variations？

> ID：12183575
> 
> 赞同：22
> 
> 时间：2012-08-29T17:42:34.293
> 
> 标签：http, google-chrome, http-headers, privacy

我在 Fiddler 中查看 chrome 发送的 http 请求，我注意到以下 http 标头让我感到困惑：

```
 X-Chrome-Variations: CNa1yQEIjrbJAQiYtskBCKK2yQEIp7bJAQiptskBCLmDygE= 
```

这是一个 base64 编码的 35 字节数组：

```
8,214,181,201,1,
8,142,182,201,1,
8,152,182,201,1,
8,162,182,201,1,
8,167,182,201,1,
8,169,182,201,1,
8,185,131,202,1 
```

我在网上看到过这个数字的几个例子。

谁能向我解释这是什么，以及为什么 chrome 将其发送出去（以及它是否可用于识别/跟踪我）？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-11-05T20:32:22.890

Google Chrome 开发人员通过为一小部分随机选择的 Chrome 安装启用一项功能并观察该功能的工作方式来测试实验性功能。对此的常用术语是*现场试验*。当谷歌浏览器第一次运行时，它会生成一个介于 1 到 8192 之间的随机数，然后使用它来确定是否参加特定的现场试验。

“ [Google Chrome 和隐私](https://static.googleusercontent.com/external_content/untrusted_dlcp/www.google.com/en/us/intl/en/landing/chrome/google-chrome-privacy-whitepaper.pdf)”白皮书（PDF，2012 年 10 月，当前为 Chrome 22.0.1229.79）提供了这些详细信息。

> 为了帮助指导用户实际认为有用的功能的构建，一部分用户可能会在新功能向全世界发布之前先睹为快。当前在您安装的 Chrome 中处于活动状态的现场试验将包含在发送到 Google 服务器的所有请求中，以允许 Google 仅过滤由特定 Chrome 变体生成的日志。此`Chrome-Variations`标头不会包含任何个人身份信息，并将严格描述 Chrome 本身的安装状态。
> 
> 给定安装的活动变化由 1 到 8192（13 位熵）之间的种子数确定，该种子数在第一次运行时随机选择。如果您想重置您的变体种子，请使用命令行标志“--reset-variation-state”运行 Chrome。

`*.google.<TLD>`谷歌浏览器向表单的所有域（`.<TLD>`顶级域，如 .com、.org、.co.uk、.cn、.biz 等）发送有关当前处于活动状态的现场试验的信息。大多数但不是所有这些域都归 Google 所有。现场试验标识符存储在[协议缓冲区](https://en.wikipedia.org/wiki/Protocol_Buffers)中，使用 base64 编码并在`X-Chrome-Variations`标头中发送。如果您已选择向 Google 发送使用情况统计信息和崩溃报告（可在 上访问的复选框`chrome://​chrome/​settings/​search#privacy`），`X-Chrome-UMA-Enabled: 1`还会发送一个标头。在隐身模式下不发送标头。

从[修订版 156914](https://src.chromium.org/viewvc/chrome?view=rev&revision=156914)（根据[发布表](http://www.chromium.org/developers/calendar)包含在 Chrome 23 及更高版本中）开始，现场试验列表显示在`about:version`页面上的 Variations 标题下。

相关源码在[chromium/​src/​chrome/​browser/​renderer_host/​chrome_resource_dispatcher_host_delegate.cc](https://code.google.com/codesearch#OAMlx_jo-ck/src/chrome/browser/renderer_host/chrome_resource_dispatcher_host_delegate.cc&l=275)文件中。标头在`ChromeResourceDispatcherHostDelegate::​AppendChromeMetricsHeaders`方法中发送。的值`X-Chrome-Variations`是在方法中构造的`ChromeResourceDispatcherHostDelegate::​UpdateVariationIDsHeaderValue`。现场试验使用`base::FieldTrial`文件[src/​base/​metrics/​field_trial.h中的类定义](https://src.chromium.org/viewvc/chrome/trunk/src/base/metrics/field_trial.h?view=markup)

至于使用这些标头跟踪您的能力，这取决于您的现场试验的实际组合的唯一性属性，我不知道。但请记住，即使您去除`X-Chrome-Variations`标头、禁用 cookie、本地存储和 Flash 本地存储，您的浏览器仍然可以使用[缓存指纹](http://sourcefrog.net/projects/meantime/)技术或使用它通常发送的请求标头的组合来识别，您的系统配置信息可用于如 EFF 的[Panopticlick](https://panopticlick.eff.org/)所示，JavaScript 或 Flash 以及您可能倾向于使用的 IP 地址块。[因此，除非您使用经过精心配置的Tor](https://www.torproject.org/)和 Privoxy 设置，否则隐私游戏基本上会丢失，即便如此，泄漏也是可能的。

# xpath - Xpath：获取括号内的值？

> ID：12183576
> 
> 赞同：1
> 
> 时间：2012-08-29T17:42:35.723
> 
> 标签：xpath

是否可以使用 xpath 直接刮取括号内的信息？或者我应该稍后用正则表达式过滤它？这是 HTML 的样子：

`<span itemprop="title" class="active">Product name (UN1QU3 C0D3)</span>`

使用以下 Xpath 表达式，我可以得到其中的所有内容`<span>`：

`$xpath->query('//*[@id="crumbtrail"]/div[5]/span');`

`UN1QU3 C0D3`是否可以通过调整我的查询直接得到？或者我应该稍后使用正则表达式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T18:17:42.417

您可以使用`substring-after`and`substring-before`提取之后`(`和之前的所有内容`)`：

```
substring-before(substring-after(//*[@id="crumbtrail"]/div[5]/span/text(), "("), ")") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T18:14:33.033

```
$xpath->query('//*[@id="crumbtrail"]/div[5]/span'); 
```

通过使用此查询，您将获得 span 标签

```
$xpath->query('//*[@id="crumbtrail"]/div[5]/span/text()'); 
```

此查询将用于从**span中获取文本**

无法使用 Xpath 过滤括号数据，因为您需要使用正则表达式或一些字符串操作

# python - 可安装的 distutils 包：如何从命令行脚本导入包模块，它们也是同一包的一部分？

> ID：12183583
> 
> 赞同：0
> 
> 时间：2012-08-29T17:43:05.383
> 
> 标签：python, command-line, import, package, distutils

我创建了一个 Python 包，其中包含纯模块和脚本，都在同一个文件夹中。脚本需要利用模块中的功能，因此只需导入它们：

```
import *module* 
```

我现在希望与其他人分享这个包，所以我使用 distutils 把它变成了一个可分发的包。[按照 distutils文档](http://docs.python.org/distutils/setupscript.html#installing-scripts)的指示，我在我的包中的“setup.py”中声明了脚本文件，如下所示：

```
setup(...,
    scripts=['path/to/script/a', 'path/to/script/b']
    ) 
```

安装此软件包后，我注意到 distutils 已将我的命令行脚本的副本安装到我的 Python 安装中的“脚本”文件夹中。一切都很好。现在，如果我尝试运行这些脚本中的任何一个，它会失败并显示：

```
ImportError: No module named *module* 
```

这可能是因为脚本和模块之间的相对路径在安装后发生了变化，因此它无法再找到模块。所以我的问题是，你应该如何从同一个包中的脚本导入模块，以便它既可以与 distutils 预捆绑，也可以在安装后工作？

现在我可以通过像这样修改我的模块导入来轻松解决这个问题：

```
try:
    import *module*
except ImportError:
    from *package* import *module* 
```

这似乎有点骇人听闻。我在这里错过了一个技巧吗？我本来希望 distutils 会为我解决这个问题。有没有更好更强大的方法来处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T13:07:33.830

也许试试`setuptools`——它有一个[自动创建主脚本](http://packages.python.org/distribute/setuptools.html#automatic-script-creation)的好方法。简短的例子：

```
setup(
    # other arguments here...
    entry_points = {
        'console_scripts': [
            'foo = my_package.some_module:main_func',
            'bar = other_module:some_func',
        ],
        'gui_scripts': [
            'baz = my_package_gui.start_func',
        ]
    }
) 
```

# javascript - 如何为 HTML 属性/选择器创建全局命名空间或变量？

> ID：12183586
> 
> 赞同：1
> 
> 时间：2012-08-29T17:43:09.407
> 
> 标签：javascript, jquery

我正在尝试将选择器设置为全局变量或命名空间。我不确定这是否是正确的术语，或者我是否正确地处理了这个问题。

我希望能够执行以下操作...

```
$.namespaceA = $('#myFirstDiv');
$.namespaceB = $('#mySecondDiv');

function myFirstFunction(){
   $.namespaceA.hide();
   $.namespaceB.css();
}

function mySecondFunction(){
   $.namespaceB.show();
} 
```

这是我想如何使用它们的一个非常基本的示例。基本上最终目标是设置一组可以通过多种功能轻松使用的全局选择器。我不知道这是正确的还是理想的，这就是我问的原因。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T17:51:54.553

类似于 mcpDESIGNS：

[http://jsfiddle.net/nqrvf/](http://jsfiddle.net/nqrvf/)

```
<div id="myFirstDiv">first</div>
<div id="mySecondDiv">second</div>

var namespaceA = $('#myFirstDiv');
var namespaceB = $('#mySecondDiv');

$("#myFirstDiv").click(function() {
  namespaceA.hide();
});

$("#mySecondDiv").click(function() {
  namespaceA.show();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T18:03:29.880

您可以在没有“var”关键字的情况下声明全局变量。

```
div = $('#myFirstDiv'); 
```

我们可以在它作为全局变量的任何函数中声明它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T17:49:35.200

你为什么不简单地制作全局变量？（他们可以毫无问题地保存 jQuery 包装集）

```
// When creating variables holding wrapped sets it is common naming to have 
// a $ following it (I find this rather annoying, since you can't easily double click
// on the var, in order to copy/paste it etc, so I always use _ underscore (personal preference)

var _div1 = $('#myFirstDiv'); // you will see a lot of people do div1$
var _div2 = $('#mySecondDiv'); // or div2$ (signifying the jQuery wrapped set)

_div2.hide();

//These could be used within multiple functions etc... No need for namespaces here!

function Whatever () {
    console.log(_div1);
    _div1.css('background', '#000');
}

$('#linkTrigger').on('click', function () {
    Whatever(); 
    _div2.fadeIn();
}); 
```

[jsFiddle 演示](http://jsfiddle.net/TjtQk/1/)

`$.nameSpaceHere`如果您尝试-扩展- jQuery 并添加您自己的某种实用程序函数，则更适合。

# machine-learning - 音乐特征提取/音乐信息检索工具

> ID：12183590
> 
> 赞同：2
> 
> 时间：2012-08-29T17:43:21.390
> 
> 标签：machine-learning, data-mining

我开始使用数据挖掘和机器学习算法进行音乐特征提取和信息检索的项目。你能给我推荐一些相同的工具吗？首先我们专注于特征提取工具。我发现了一些像 jAudioSymbolic extractor、Yaafe、openSmile ..你能告诉我一些更多的工具，也许还有任何关于推进特定工具的建议工具？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T22:42:06.000

在我的实验室中，我们使用了很多 Vamp 插件——http: [//vamp-plugins.org/——](http://vamp-plugins.org/)用于音乐特征提取。（完全披露：我的实验室也运行该网站。）它们是 C++ 插件，您可以在许多软件中使用，例如 Audacity、[Sonic Visualiser](http://www.sonicvisualiser.org/)和命令行。

我倾向于开始的方式是从音频文件中提取特征，然后使用[Weka](http://www.cs.waikato.ac.nz/ml/weka/)（令人愉快的机器学习程序）尝试对数据进行一些分类/聚类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-22T12:39:16.987

您可以尝试使用 Echonest。它们为许多音乐功能提供了价值。[您可以在本教程http://preciselyconcise.com/apis_and_installations/echo_nest.php](http://preciselyconcise.com/apis_and_installations/echo_nest.php)中了解如何在 java 中使用 echo nest

# timer - 可以在cobol中创建计时器吗？

> ID：12183602
> 
> 赞同：1
> 
> 时间：2012-08-29T17:44:40.300
> 
> 标签：timer, cobol

有谁知道如何在 cobol 中创建一个计时器？有可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-10T21:14:57.627

对于 OpenCOBOL，有 C$SLEEP（以秒为单位）和 CBL_OC_NANOSLEEP（以十亿分之一秒为单位 - 这比大多数机器可以处理的分辨率更高 - 请参阅 librt clock_res() 以访问特定部分的精度）的库存库 CALL 函数硬件和操作系统）。

克隆出 OpenCOBOL 源的副本并在文件**libcob/common.c**中查找**cob_acuw_sleep**和**CBL_OC_NANOSLEEP** C 函数，看看它是如何为 OpenCOBOL 完成的；它具有用于处理 Windows 和 POSIXey 系统的这些计时器的条件代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T23:02:55.167

要在 Cobol 中对过程进行计时，您可以计算两个时间点之间的差异。这是一些示例代码，用于测量时间点以帮助您入门。

```
 01  TEMP-TIME-1.
       05  T1-HOURS                 PIC 99.
       05  T1-MINUTES               PIC 99.
       05  T1-SECONDS               PIC 99.
       05  T1-HUNDREDTHS-OF-SECS    PIC 99.

  Use similar data definitions for TEMP-TIME-2
                                   START-TIME
                                   END-TIME

   ACCEPT TEMP-TIME-1 FROM TIME

  If using hundredth of seconds, use following loop
  to start timing at start of a hundredth of a second

   PERFORM WITH TEST AFTER UNTIL TEMP-TIME-2 <> TEMP-TIME-1
       ACCEPT TEMP-TIME-2 FROM TIME
   END-PERFORM
   MOVE TEMP-TIME-2 TO START-TIME 
```

使用类似代码设置 END-TIME

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-29T17:49:42.113

也许这个谷歌页面的问题可能会对您有所帮助：[Cobol 中是否有 TIMER 功能](http://www.tek-tips.com/viewthread.cfm?qid=359896)

> 在 PC 上搜索 DosSleep，在大型机上搜索 ILBOWAT0。

希望有帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-29T22:07:14.540

ILBOWAT0 已过时 20 年。Language Environment 在 IBM 大型机上提供了一个解决方案，详见[此处](https://stackoverflow.com/a/11787451/624463)。

# java - 在 JBoss 7 中预编译 JSP

> ID：12183603
> 
> 赞同：3
> 
> 时间：2012-08-29T17:44:47.493
> 
> 标签：java, jsp, jboss7.x

我们正在将我们的应用程序从 JBoss 5 迁移到 Jboss 7。我们希望预编译 JSP 以查看所有这些 JSP 都可以正常编译，而不是访问它们中的每一个并进行检查。

从我读过的任何内容来看，我都无法找到解决这个问题的具体方法。

有人对如何实现这一点有任何建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T18:01:50.067

您可以通过在参数中传递 jsp_precompile=true 来预编译 jsp 页面。例如，如果你想预编译在 localhost 上运行的 xyj.jsp，你必须这样做[http://xxxx:8080/xyz.jsp?jsp_precompile=true](http://x.x.x.x:8080/xyz.jsp?jsp_precompile=true)这只会预编译 jsp 而不会执行它。

您可以编写一个小型 ant 脚本，而不是手动执行此操作，该脚本将找出 Web 应用程序中的所有 jsp 页面，并为每个 jsp 触发 GET 方法调用，其中 jsp_precompile=true 。这将使实现它的整个过程自动化。这是在不执行jsp的情况下预编译jsp的唯一方法。

# vb.net - 跨线程消息异常

> ID：12183605
> 
> 赞同：0
> 
> 时间：2012-08-29T17:45:03.263
> 
> 标签：vb.net, exception, multithreading

我一直在尝试降低应用程序使用的主窗口的加载时间（10k+ 行代码），并尝试将线程集成到程序的一种方法中。我正在尝试拆分显示方法，它在表单上设置所有数据，它的长度超过 1000 行，因此拆分它会减少表单的加载时间。

我对线程仍然很陌生，但由于实际上没有任何改变，我只是将显示代码并排运行，我认为线程将是最好的选择。不过，这有一个问题。他们都使用类似的方法来确定表单上的组件是否应该根据帐户可见/启用。

当它尝试在表单上设置组件的文本时，这就是我遇到异常的地方。我已阅读此内容，您无法从另一个线程更新线程中的项目，但我无法在线找到解决方案或帮助。有哪些可能的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T17:52:22.430

您可以使用调用函数`Obj.Invoke(Delegate)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T18:01:28.210

您需要使用控件或窗体的`Invoke`方法或`BeginInvoke`方法。所有`Control`对象都有这些方法，并且由于`Form`继承自`Control`，所有形式也有这些方法。这两种方法都会从 UI 线程调用给定的委托。但是，如果 UI 线程很忙，则在线程空闲之前它不会执行委托。如果您调用`Invoke`，您的工作线程将被阻塞（挂起），直到 UI 线程完成执行委托。但是，如果您调用`BeginInvoke`，则工作线程将继续运行并且不会等待 UI 线程执行委托。

# php - 这段代码看起来正确吗？

> ID：12183606
> 
> 赞同：-2
> 
> 时间：2012-08-29T17:45:05.320
> 
> 标签：php, mysql

此代码应该更新给定书籍的数据库记录。有一种表单可以将此函数传递给所需的数据，并且该表单没有错误，但我担心我的查询格式错误地更新了 MySQL。有人可以为我验证吗？我似乎总是难以记住 MySQL 查询字符串的格式。如果有人有关于如何在不查看文档的情况下快速记住它的提示，将不胜感激。

```
function saveBook ($ID, $Title, $Author, $Type, $Section, $AvailableMaterial)
{
    $query = "UPDATE Publications SET Title = '$Title', Author = '$Author', Section = '$Section', Type = '$Type', AvailableMaterial = '$AvailableMaterial' WHERE ID = '$ID'";
$result = mysql_query($query);
    if (!$result)
    {
    die('Query Failed: ' . mysql_error());
    }
    return HEADER ("LOCATION: /lightBox/close.php");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T17:49:59.920

不，此代码不正确。

```
 $query = "UPDATE Publications SET `Title` = '".$Title."', `Author` = '".$Author."', `Section` = '".$Section."', `Type` = '".$Type."', `AvailableMaterial` = '".$AvailableMaterial."' WHERE `ID` = '".(int)$ID."'"; 
```

更好。type 是 mysql 中的保留键，所以你需要 backtics。

而且我假设您在将所有数据发送到“保存簿”之前将其转义

# mysql - MySQL从txt文件创建表

> ID：12183608
> 
> 赞同：1
> 
> 时间：2012-08-29T17:45:16.200
> 
> 标签：mysql

我正在尝试从我从古腾堡项目中得到的词库文本文件创建一个 mysql 表；但是，我在做这件事时遇到了一些问题。我能够编写以下脚本，该脚本成功地创建了包含信息的表：

```
LOAD DATA LOCAL INFILE 'C:/mthesaur.txt'

    INTO TABLE thesaurus_entries

    COLUMNS
        TERMINATED BY ','

    LINES

        TERMINATED BY '\r\n' 
```

在文本文件中，第一个词是同义词词条，后面是它的所有同义词，用逗号分隔。每个条目由换行符分隔。

我的问题是我最初打算只使用一个包含大量列的表，但我不知道如何轻松地为同义词制作 100 多列。我试过这样做：

```
DELIMITER $$  

CREATE PROCEDURE ABC()

   BEGIN
      DECLARE a INT Default 0 ;
      simple_loop: LOOP
         SET a=a+1;
        ALTER TABLE `thesaurus`.`thesaurus_entries` ADD COLUMN a 
VARCHAR(60) NULL  AFTER `thesaurus_entries_id` ;
         IF a=100 THEN
            LEAVE simple_loop;
         END IF;
   END LOOP simple_loop;
END $$ 
```

但所做的只是添加一个名为“a”的列，而不是添加 100 个名为“1、2、3 等”的列。

如果将表作为键值对很容易（每个单词的同义词都有单独的表），我愿意走这条路，但我无法从 txt 文件中弄清楚如何做到这一点。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T17:51:37.497

您可能不想要一个包含数百列的表。相反，您可能只需要两列，`word`并且`synonym`. 输入文件中的每一行都会在表中生成（可能）多行。

您可以编写一个简单的预处理器（使用您最喜欢的脚本语言）将输入文件转换为单词、同义词对的列表。然后像现在一样加载它。

# android - Android：在TextView上按下回车键后试图摆脱返回

> ID：12183609
> 
> 赞同：1
> 
> 时间：2012-08-29T17:45:13.497
> 
> 标签：android

我有按回车键删除键盘的代码。现在的问题是 EditView 插入了一个新行。我试图从 textview 中获取文本并删除任何墨盒返回。但它不起作用。

这是代码：

```
mUserName.setOnEditorActionListener(
    new android.widget.TextView.OnEditorActionListener()
    {
        public boolean onEditorAction(TextView v, int actionId, KeyEvent event)
        {
            InputMethodManager imm = (InputMethodManager)getSystemService(
            Context.INPUT_METHOD_SERVICE);
            imm.hideSoftInputFromWindow(mUserName.getWindowToken(), 0);

            CharSequence c=v.getText();
            String h= c.toString();
            v.setText(h.replaceAll("\n",""));   

            return false;
        }
    }
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T17:53:40.773

首先，我不会依赖`OnEditorActionListener`. 有更好的方法来做你正在寻找的东西。我建议你可以做三件事：

*   设置字段的 IME 选项。
*   将行数设置为 1。
*   改用 a `TextWatcher`。（可选，不需要）

要设置[IME 选项](http://developer.android.com/reference/android/view/inputmethod/EditorInfo.html)（去掉 Enter 按钮），请使用以下命令：

```
mUserName.setImeOptions(EditorInfo.IME_ACTION_NONE); 
```

接下来，您可以强制行数为 1：

```
mUserName.setLines(1);
mUserName.setMaxLines(1); 
```

如果这些都不起作用（它们应该），您可以使用 a`TextWatcher`来删除换行符：

```
mUserName.addTextChangedListener(new TextWatcher() {
    public void onTextChanged(CharSequence s, int start, int before, int count) {
        // Here, CHECK if it contains \r OR \n, then replaceAll
        // Checking is very important so you do not get an infinite loop
        if (s.toString().contains("\r") || s.toString().contains("\n")) {
            s = s.replaceAll("[\r|\n]", "");
            mUserName.setText(s);
        }
    }

    public void beforeTextChanged(CharSequence s, int start, int count, int after) {
        // Nothing
    }

    public void afterTextChanged(Editable s) {
        // Nothing
    }
}); 
```

您可能需要稍微尝试一下这个设置，我没有测试过`replaceAll`正则表达式或自己运行代码，但这绝对是一个起点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T17:55:23.760

要将输入限制为仅一行，请使用

```
mUserName.setLines(1);
mUserName.setMaxLines(1); 
```

或者，**`mUserName.setSingleLine(true);`**

# .net - 实体框架 - 从列表中获取相关实体

> ID：12183612
> 
> 赞同：0
> 
> 时间：2012-08-29T17:45:26.323
> 
> 标签：.net, linq, entity-framework, entity-framework-4.3

我将 EF4.3 与 DbContext 一起使用。

我有存储在 cookie 中的实体。

当用户返回站点时，我目前将 cookie 值解析为 List，但是，实体“BookmarkedDeals”具有“Deal”的导航属性，我想让列表 IQueryable，因此我可以简单地附加导航属性急切或延迟加载

得到一份清单后，这是我最初尝试的；

```
List<BookmarkedDeals> bd = // populate it from cookie

var query = bd.AsQueryable().Include("Deal"); 
```

但是 Deal 为空。

任何人都知道如何实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T18:34:56.273

您的“从 cookie 填充”代码需要返回`IQueryable<BookmarkedDeals>`而不是将其转换为列表。那，或者您需要将调用`.Include("Deal")`直接添加到该代码。

对List`AsQueryable()`对象或任何其他本身没有实时连接到数据库的事情进行操作将永远不会起作用。

**编辑：**我没有完全阅读你的问题。如果实体本身存储在 cookie 中，它就无法工作。我会将 ID 存储在 cookie 中，并根据这些 ID 执行包含“交易”的查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T18:36:00.787

您是否急于在将列表放入 cookie 之前加载 nav 属性？如果没有，你应该从那个开始。

或者，如果将 nav 属性附加到上下文，则可以加载它。

```
 var db = new YourContext();
        foreach (var deal in bd)
        db.Entry(deal).Reference(b => b.Deal).Load(); 
```

# java - 如何在 Eclipse 中拖动按钮并自动生成 onclick 方法？如何在 Eclipse 中查找变量/方法引用？

> ID：12183614
> 
> 赞同：4
> 
> 时间：2012-08-29T17:45:39.423
> 
> 标签：java, android, eclipse

我是 ac#/visual Studio 开发人员。我正在将我的一些 WP7 应用程序移植到 Android 上，并且我已经非常习惯 Eclipse。我已经阅读了一些“差异”文件，但仍有几个亟待解决的问题。. .

在 VS 中，我将一个按钮拖到表面并为 onclick 分配一个方法名称，它会在我的源文件中为我生成方法大纲。我看不到如何在 Eclipse 中执行此操作 - 可以吗？

在 Vs 中，如果我将光标放在变量或方法名称上，我会得到一个下拉菜单，其中包含“转到”选项和“查找所有引用”选项。这些真的很方便。我可以在 Eclipse 中做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T17:54:53.677

您正在 Eclipse 中开发 Android 项目，所以我将以此为基础进行回答。我也猜你安装了 Android Developer Pack 插件。

在 Java 的 ADT 插件中，您可以打开一个 layout.xml 并查看其“图形布局”。您可以将 UI 组件拖到那里，但它不会为您生成处理事件的代码。

对于第二个问题，在 Eclipse 中，您必须右键单击变量或方法并转到“References”菜单。或者您可以学习键盘快捷键，它会变得更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T17:50:38.070

键入`onclick`然后按 Ctrl+Space 应该会打开一个您可以覆盖的默认函数列表。双击或按 Enter 将在编辑器中显示它（我通常在按 Ctrl+Space 之前键入“on”，每当我不确定在课堂上可以完成的所有事情时。）

右键单击变量将打开一个上下文相关菜单，您可以在其中查看变量的声明 (F3) 或类型层次结构 (F4)；列表下方是“引用”菜单，您可以在其中查看工作区 (Ctrl+Shift+G) 或其他位置对该变量的所有引用。

您还可以通过右键单击并选择来重命名大多数变量`Refactor > Rename...`，这是我很早就开始使用的东西。

# python - QProcess.readAllStandardOutput() 似乎没有读取任何内容 - PyQt

> ID：12183615
> 
> 赞同：0
> 
> 时间：2012-08-29T17:45:50.423
> 
> 标签：python, pyqt, qprocess

这是代码示例：

```
class RunGui (QtGui.QMainWindow)

    def __init__(self, parent=None):

        ...
        QtCore.Qobject.connect(self.ui.actionNew, QtCore.SIGNAL("triggered()"), self.new_select)
        ...

    def normal_output_written(self, qprocess):
        self.ui.text_edit.append("caught outputReady signal") #works
        self.ui.text_edit.append(str(qprocess.readAllStandardOutput())) # doesn't work

    def new_select(self):
        ...
        dialog_np = NewProjectDialog()
        dialog_np.exec_()
        if dialog_np.is_OK:
            section = dialog_np.get_section()
            project = dialog_np.get_project()
            ...
            np = NewProject()
            np.outputReady.connect(lambda: self.normal_output_written(np.qprocess))
            np.errorReady.connect(lambda: self.error_output_written(np.qprocess))
            np.inputNeeded.connect(lambda: self.input_from_line_edit(np.qprocess))
            np.params = partial(np.create_new_project, section, project, otherargs)
            np.start()

class NewProject(QtCore.QThread):

    outputReady = QtCore.pyqtSignal(object)
    errorReady = QtCore.pyqtSignal(object)
    inputNeeded = QtCore.pyqtSignal(object)
    params = None
    message = ""

    def __init__(self):
        super(NewProject, self).__init__()
        self.qprocess = QtCore.QProcess()
        self.qprocess.moveToThread(self)
        self._inputQueue = Queue()

    def run(self):
        self.params()

    def create_new_project(self, section, project, otherargs):
        ...
        # PyDev for some reason skips the breakpoints inside the thread
        self.qprocess.start(command)
        self.qprocess.waitForReadyRead()
        self.outputReady.emit(self.qprocess) # works - I'm getting signal in RunGui.normal_output_written()
        print(str(self.qprocess.readAllStandardOutput())) # prints empty line
        .... # other actions inside the method requiring "command" to finish properly. 
```

这个想法被打死了——让 GUI 运行脚本并与进程通信。这个特定示例中的挑战是，在 QProcess 中启动的脚本作为命令运行应用程序，在此过程中需要用户输入（确认）。因此，我必须能够启动脚本，获取所有输出并解析它，等待问题出现在输出中，然后反馈答案，让它完成，然后才能继续执行 create_new_project( )

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T20:47:33.460

我不知道这是否能解决您的整体问题，但我在这里看到了一些设计问题。

1.  您在线程之间传递 qprocess，而不是仅使用 qprocess 的结果发出自定义信号
2.  您正在使用可能应该是实例属性的类级别属性

从技术上讲，您甚至不需要 QProcess，因为您正在线程中运行它并积极使用阻塞调用。它很容易成为一个 subprocess.Popen ......但无论如何，我可能会建议这样的更改：

```
class RunGui (QtGui.QMainWindow)

    ...

    def normal_output_written(self, msg):
        self.ui.text_edit.append(msg) 

    def new_select(self):
        ...
            np = NewProject()
            np.outputReady.connect(self.normal_output_written)
            np.params = partial(np.create_new_project, section, project, otherargs)
            np.start()

class NewProject(QtCore.QThread):

    outputReady = QtCore.pyqtSignal(object)
    errorReady = QtCore.pyqtSignal(object)
    inputNeeded = QtCore.pyqtSignal(object)

    def __init__(self):
        super(NewProject, self).__init__()

        self._inputQueue = Queue()
        self.params = None

    def run(self):
        self.params()

    def create_new_project(self, section, project, otherargs):
        ...
        qprocess = QtCore.QProcess()
        qprocess.start(command)
        if not qprocess.waitForStarted():
            # handle a failed command here
            return

        if not qprocess.waitForReadyRead():
            # handle a timeout or error here
            return

        msg = str(self.qprocess.readAllStandardOutput())
        self.outputReady.emit(msg) 
```

不要绕过 QProcess。只需发出数据。并从线程方法中创建它，以便它自动归该线程所有。您的外部类实际上不应该对该 QProcess 对象有任何了解。它甚至不需要是成员属性，因为它只在操作期间需要。

还要确保您正确检查您的命令是否已成功启动，并且正在运行和输出数据。

## 更新

为了澄清您可能遇到的一些问题（根据评论），我想建议如果您需要对期望定期用户输入的进程进行交互式控制，QProcess 可能不是最佳选择。它应该适用于运行从头到尾只产生输出的脚本，尽管真正使用子进程会容易得多。对于需要用户输入一段时间的脚本，您最好的选择可能是使用[`pexpect`](http://pypi.python.org/pypi/pexpect-u/2.5.1). 它允许您生成一个进程，然后观察您知道需要输入的各种模式：

**foo.py**

```
import time

i = raw_input("Please enter something: ")
print "Output:", i
time.sleep(.1)
print "Another line"
time.sleep(.1)
print "Done" 
```

**测试.py**

```
import pexpect
import time

child = pexpect.spawn("python foo.py")
child.setecho(False)

ret = -1
while ret < 0:
    time.sleep(.05)
    ret = child.expect("Please enter something: ")

child.sendline('FOO')
while True:
    line = child.readline()
    if not line:
        break
    print line.strip()

# Output: FOO
# Another line
# Done 
```

# c# - StreamWriter 由于某个进程而无法打开文件

> ID：12183624
> 
> 赞同：0
> 
> 时间：2012-08-29T17:46:33.913
> 
> 标签：c#, asp.net, streamwriter

我得到以下代码

```
protected override void Render(HtmlTextWriter writer) 
{

    // Write the HTML into this string builder

    StringBuilder sb = new StringBuilder();
    StringWriter sw = new StringWriter(sb);
    HtmlTextWriter hWriter = new HtmlTextWriter(sw);
    base.Render(hWriter);

    string pageHTML = sb.ToString(); 

    // Write it back to the server
    writer.Write(pageHTML);
    if (Convert.ToBoolean(this.ViewState["SendEmail"])) 
    {
        string HTML = "";
        HTML = "<!DOCTYPE HTML PUBLIC '-//IETF//DTD HTML//EN'>";
        HTML += "<html>";
        HTML += "<head>";
        HTML += "<meta http-equiv='Content-Type'";
        HTML += "content='text/html; charset=iso-8859-1'>";
        HTML += "<title>Order Information</title>";
        HTML += "</head>";
        HTML += "<body>";
        HTML += "See attachment for information.";
        HTML += "</body>";
        HTML += "</html>";

        MailMessage mail = new MailMessage("from@xxx.com", "to@xxx.com", "Subject", HTML);
        mail.IsBodyHtml = true;

        string path = @"d:\websites\plate.html";

        using (StreamWriter sw11 = File.CreateText(path))
        {
            sw11.WriteLine(pageHTML);
        }

        mail.Attachments.Add(new Attachment(path));

        SmtpClient client = new SmtpClient("192.168.1.127");

        client.Send( mail );

        Response.Write("<script>alert('Your information has been sent.')</script>");

        this.ViewState["SendEmail"] = false;
    }

} 
```

在重新清理/构建我的解决方案后，当我按下发送按钮时，会调用此函数，并且 html 页面会通过邮件以附件形式发送，没有问题。但是，如果我再次尝试按下发送按钮，我会收到“System.IO.IOException：该进程无法访问文件 'd:\websites\plate.html'，因为它正被另一个进程使用。” 当我尝试打开文件时发生错误。怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T17:50:14.203

SmtpClient 实现 IDisposable 但您没有释放实例。

[http://msdn.microsoft.com/en-us/library/system.net.mail.smtpclient.aspx](http://msdn.microsoft.com/en-us/library/system.net.mail.smtpclient.aspx)

出于这个原因，它可能会保留该文件。

一般来说，将实现 IDisposable 的任何内容包装在`using`语句中是明智的，除非您有特定的理由不这样做（例如，您正在通过持有 IDisposable 实例的类显式管理对象生命周期）。

我还想提请注意@DanPichelman 的评论，即您使用的是常量文件名，但此代码可能会在单独的线程上并行执行。这将导致为第一个用户之后的任何用户锁定输出文件，直到第一个用户的代码完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T17:53:28.510

正如 Eric 指出的那样，您应该`SmtpClient`在`using`声明中包含 - 同上`MailMessage`。

但是，您仍然会无缘无故地写入文件系统。我强烈建议您使用不需要文件开始的*构造*函数`Attachment`之一。您可以写入 a ，将其倒回，然后将其提供*给*示例。*`MemoryStream`*`Attachment`**

 **除此之外，这意味着如果多个线程（或进程）尝试同时运行此代码，您不会有问题。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-29T17:50:43.967

我认为你应该关闭它：

```
using (StreamWriter sw11 = File.CreateText(path))
{
    sw11.WriteLine(pageHTML);
    sw11.Flush();
    sw11.Close();
} 
```**

# android - 圆形按钮组视图

> ID：12183625
> 
> 赞同：5
> 
> 时间：2012-08-29T17:46:37.060
> 
> 标签：android, android-custom-view

这是来自名为“Noom 减肥教练”的应用程序的快照：

![在此处输入图像描述](../Images/0a7d4beaf1029688dac27f76d6c02b59.png)

*我被这个应用程序中的这个圆形视图*惊呆了。它可以有一些按钮（此快照中有六个，但它们可以或多或少），它们可以旋转并具有不同的颜色。

我有一些问题：

*   是否有提供此循环视图的现有库？
*   如果没有，如果你想建造一个，你会从哪里开始？我只是对按钮的圆形外观感兴趣。旋转并不重要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T06:55:19.510

我建议使用自定义按钮。从 View 派生您的类，重新定义 onDraw() 以绘制按钮状态更改并侦听 onTouch 事件。

# sql-server - osql vs Invoke-Sqlcmd--重定向后者的输出

> ID：12183626
> 
> 赞同：1
> 
> 时间：2012-08-29T17:46:40.027
> 
> 标签：sql-server, powershell, batch-file, cmdlet, osql

我们正在从调用 osql 的批处理文件转移到使用 Invoke-Sqlcmd cmdlet 的 Powershell 脚本。

有谁知道在后一种情况下将输出重定向到在 osql 中使用 -o 标志的等效步骤是什么？我们有一些后处理步骤来查看 osql 输出文件并采取相应措施（如果这些日志大于 X 字节，则报告错误）。如果 Invoke-Sqlcmd 可以在输入相同的 SQL 命令的情况下复制相同的输出信息，我将非常喜欢它。

现在在我的脚本中，我打算调用`Invoke-Sqlcmd <...> | Out-file -filepath myLog.log`. 有谁知道这是否可行或有意义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T17:52:07.263

从 cmdlet 本身的文档中：

```
Invoke-Sqlcmd -InputFile "C:\MyFolder\TestSQLCmd.sql" | Out-File -filePath "C:\MyFolder\TestSQLCmd.rpt" 
```

以上是调用 Invoke-Sqlcmd、指定输入文件并将输出通过管道传输到文件的示例。这类似于使用 -i 和 -o 选项指定 sqlcmd。

[http://technet.microsoft.com/en-us/library/cc281720.aspx](http://technet.microsoft.com/en-us/library/cc281720.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T01:07:21.257

我认为您会发现在 invoke-sqlcmd 中重现与我相同的行为很困难。

osql 和 sqlcmd.exe 会将 T-SQL PRINT 和 RAISERROR 以及错误发送到输出文件。

使用 Powershell，您可以使用标准错误重定向技术 (2>&1) 将标准错误重定向到标准输出：

```
Invoke-Sqlcmd <...>  2>&1 | Out-file -filepath myLog.log 
```

然而，这仍然不会抓住一切。例如，RAISERROR 和 PRINT 语句仅在使用 -verbose 参数时才在 Invoke-sqlcmd 中输出，如帮助 invoke-sqlcmd 中所述。在 Powershell V2 中，您不能重定向详细输出。虽然您可以使用 Powershell V3 使用**4>**

由于这些原因和其他原因（例如尝试在 sqlcmd 中重新创建所有许多不同的选项），我切换回在我的环境中使用 sqlcmd.exe 进行计划作业。由于不推荐使用 osql.exe，我建议切换到支持与 osql 相同选项的 sqlcmd.exe。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T01:44:48.593

您仍然可以`osql`从 PowerShell 调用。我会继续这样做。 `Invoke-SqlCmd`返回代表结果集中每一行的对象。如果您不打算对这些对象执行任何操作，则没有理由升级到`Invoke-SqlCmd`.

# javascript - 使用鼠标滚轮水平滚动页面

> ID：12183627
> 
> 赞同：0
> 
> 时间：2012-08-29T17:46:41.633
> 
> 标签：javascript, jquery, firefox, scroll

我正在使用本教程（鼠标滚轮插件和脚本）做一个水平滚动页面：

[http://css-tricks.com/snippets/jquery/horz-scroll-with-mouse-wheel/](http://css-tricks.com/snippets/jquery/horz-scroll-with-mouse-wheel/)

滚动适用于 chrome 但不适用于 firefox，在本教程中它也不适用于 firefox，有什么解决方法的想法吗？

```
$(function() {
    $("body").mousewheel(function(event, delta) {
    this.scrollLeft -= (delta * 30);
    event.preventDefault();
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T18:00:28.507

[http://cobbweb.me/blog/2012/03/30/jquery-mousewheel-plugin-version-2/](http://cobbweb.me/blog/2012/03/30/jquery-mousewheel-plugin-version-2/)

这个插件可能会帮助你让鼠标滚轮在 Firefox 中工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-10T11:45:13.987

有一些滚动插件可以帮助你。 [https://github.com/lvming6816077/H5FullscreenPage](https://github.com/lvming6816077/H5FullscreenPage)

# javascript - 我应该在哪里将我的窗口尺寸存储在 javascript 中？

> ID：12183631
> 
> 赞同：0
> 
> 时间：2012-08-29T17:47:01.250
> 
> 标签：javascript

我根据所选项目的类型弹出各种不同大小的 Telerik RadWindows。每种类型的项目都有自己的编辑表单，点击时会弹出，所以我需要在 Javascript 中设置不同的窗口高度和宽度。现在我正在使用这个函数，它具有硬编码每种类型的尺寸：

```
 function GetEditWindowDimensions(type) {
        var dimensions = null;           
        switch (type) {
            case 'Type1':
                dimensions = { length: 330, width: 400 };
                break
            case 'Type2':     
                dimensions = { length: 550, width: 450 };
                break;
            case 'Type2':
                dimensions = { length: 260, width: 400 };
                break;    
            case 'Type3':    
                dimensions = { length: 260, width: 400 };
                break;
            case 'Type4':
                dimensions = { length: 260, width: 400 };
                break;
            case 'Type5':
                dimensions = { length: 330, width: 400 };
                break;
            default:
                dimensions = { length: 500, width: 500 };

        }
        return dimensions
    } 
```

这是我加载 RadWindow 的函数：

```
 function OpenEditWindow(type) {

        var oDimensions = GetEditWindowDimensions(type)
        var oWindow = openWindow('myurl.aspx', oDimensions.length, oDimensions.width, true);

        oWindow.MoveTo(200, 25);
    } 
```

必须有更好的方法来做到这一点。您对如何在 Javascript 中以可配置的方式存储/检索这些维度有任何想法吗？类型本身由项目中 .vb 文件中的枚举定义。我将枚举值名称传递给 GetEditWindowDimensions()。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T17:51:15.177

您可以将其存储在如下对象中：

```
 var dimensions = {
        'Type1': { length: 330, width: 400 },
        'Type2': { length: 550, width: 450 },
        'Type3': { length: 260, width: 400 }
    } 
```

然后像访问它们

```
dimensions.type1.length; // <-- 330
dimensions.type1.width; // <-- 400 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T17:51:48.070

为什么不只创建一个哈希？

```
var dWindowDimensions = }
    Type1: { length: 330, width: 400 },
    Type2: { length: 550, width: 450 },
    ...
} 
```

然后，当您需要读取值时：

```
var oDimensions = dWindowDimensions[type] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T17:53:38.933

像这样存储它们：

```
dimensions = {
    Type1: {
        length: 330,
        width: 400
    },
    ...
    ...
    Type5:  {
        length: 330,
        width: 400
    }
}; 
```

然后，您可以通过执行`dimensions.Type1`或`dimensions[type]`动态查找它们来访问它们。对于默认情况，只需检查您尝试访问的维度是否为`undefined`. 如果是，请使用默认长度和宽度。例如：

```
var dimension = dimensions[type];
if(typeof dimension === "undefined") {
    dimension = {
        length: 500,
        width: 500 
    };
} 
```

或更简洁：

```
var dimension = dimensions[type] || {length: 500, width: 500}; 
```

`||`如果第一个值不是“真实的”，这将使用第二个值（在 之后的那个）。

# forms - 如何在 APEX 4.1 中为单项表单创建更新流程

> ID：12183636
> 
> 赞同：1
> 
> 时间：2012-08-29T17:47:16.547
> 
> 标签：forms, oracle-apex, updates, tabular-form

我是 APEX 的新手。我确信此解决方案可能可用，但无法在任何地方找到正确的答案。

以下是案例场景：（为用户提供更新特定报告行的能力）。

第 1 页有报告 A，其中有一个特定的列，比如 B 列，它具有指向其所有行的链接，通过单击一个特定的行，用户导航到新页面 (Page2)。

第 2 页在区域 1 中具有单个条目形式，其中包含项目列表（大约 10 个），在同一页面的区域 2（第 2 页）中，它具有表格形式。

第 2 页区域 1 中的某些项目是根据第 1 页报告详细信息中的信息填充的。有些物品有 LOV，有些物品用户可以添加信息。

page 2的region 2中的表格形式是根据用户可以编辑的line item id生成的。表格形式仅与一个表格相关联。

页面上有两个按钮，取消按钮返回报表页面，而保存按钮将数据保存到数据库表中。单个表单项将更新 2 个表，而表格形式将更新一个表。

需要如何建立通过 apex 更新基础表的过程。

现在表格形式具有内置的 MRU 更新过程（但我不确定我是否可以将此过程与单个条目表格协调使用，或者最好创建一个单独的过程来处理这两个更新）

谁能给我一个想法如何实现这一点，或者解释这个过程的链接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T11:53:32.857

您将需要手动创建 plsql 进程来处理提交的值并将它们应用于您的表。您不能使用内置的行处理来执行此操作：您不能定义每页 2 个。（这是有道理的，因为您无法指示哪个列映射到哪个表。您只能将“数据库列”定义为项目的源。这意味着即使您有 2 个进程，也会尝试处理这些列这两个过程都会导致错误。）

看看这篇文章，了解如何设置流程的一些想法：[https ://stackoverflow.com/a/7877933/814048](https://stackoverflow.com/a/7877933/814048)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-04T20:05:55.123

```
if :P42_ORDER_STATUS in ('IP','OW') then
begin
    FOR I in 1..APEX_APPLICATION.G_F01.COUNT LOOP

        update sales_mst set ORDER_STATUS = 'DR'
        where id = to_number(apex_application.g_f01(i));
    end loop;
end;
end if; 
```

# andengine - Andengine ParticleSystem 作为动态壁纸的问题

> ID：12183638
> 
> 赞同：2
> 
> 时间：2012-08-29T17:47:24.367
> 
> 标签：andengine, live-wallpaper, particles

首先，我将在此处发布链接，其中所有内容都已由另一个人描述 [http://www.andengine.org/forums/gles2/particle-system-in-live-wallpaper-t8035.html](http://www.andengine.org/forums/gles2/particle-system-in-live-wallpaper-t8035.html)

好吧，问题是，我将 ParticleSystem 设置为动态壁纸，在手机进入睡眠状态并唤醒他后，所有粒子都会立即生成。MaxRate 和 MinRate 被忽略，代码中设置的最大粒子被采用，并且可能的最大粒子被生成。

但并不总是发生，只是有时。在 2 天内它做了 3 次。

知道有什么问题吗？

知道和引擎的人的问题。

泰

# c# - EntityFramework，我应该使用继承吗？

> ID：12183641
> 
> 赞同：0
> 
> 时间：2012-08-29T17:47:52.083
> 
> 标签：c#, entity-framework

我有以下模型，不使用继承：

问题类：

```
 public int QuestionId { get; set; }
    public string QuestionTitle { get; set; }
    public bool Required { get; set; }
    public int questionType { get; set; }
    [ScriptIgnore]
    public virtual ICollection<TextAnswer> TextAnswers { get; set; }
    [ScriptIgnore]
    public virtual ICollection<ParagraphAnswer> ParagraphAnswers { get; set; }
    [ScriptIgnore]
    public virtual ICollection<Choice> Choices { get; set; }
    [ScriptIgnore]
    public virtual ICollection<ChoiceAnswer> ChoiceAnswers { get; set; } 
```

我应该使用继承来回答吗？
那是，

```
TextAnswer : Answer
ParagraphAnswer : Answer
ChoiceAnswer : Answer 
```

这样 Question 类只有一个 ICollection 吗？
你会建议我什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T18:36:07.527

是的，对此进行建模的正确方法是使用继承。

请注意，您可以选择如何将继承映射到表（TPH、TPT），并且对于复杂的多级层次结构，您可能需要关注性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T17:56:35.853

是的。这就是JAVA中继承的优势。通过这种方法，您将为您的代码实现良好的设计。

您的代码将对新的增强和扩展开放，代码更改较少，因为单独的基类将针对任何新的 ANSWER 类进行扩展，并且在问题类中不需要进行任何更改。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-29T18:26:31.403

我在继承和实体框架方面的经验相当差。在特定情况下（我不想在这里详细介绍）由 EF 生成的查询大小约为 1Mb。（我不是在谈论结果 - 只是查询文本！）

最近（大约 6 个月）我开始使用 NHibernate。在我的公司，我们有一个作为产品开发的软件——这意味着每个实体至少有 3-4 级继承。NHibernate 可以很好地应对它——您可能想尝试一下。

至于 EF：不，不要使用继承。这个项目还不够成熟。

//因为不赞成而编辑：我从第一个版本开始就一直在使用 Entity Framework，包括核心内容，例如为 Visual Studio 编写自定义“自定义工具”以从 EDMX 文件生成代码。自定义生成器添加了对存储过程和适当延迟加载（在 EF 1.0 中被破坏）等的支持。

然后是 EF 2.0 和巨大的变化。我在几个项目中使用过 EF。在其中之一中，我们要求所有实体都有一个基类。这又是一次硬核黑客攻击，这就是出现大量查询文本的情况。如果您想再次否决我的答案，请随意这样做，但仅仅因为您的案例并不复杂（如果我们无论如何都可以将基类称为复杂案例..）并不意味着 EF 是成熟的和稳定的ORM。

# linux - 检查已安装的 bash 软件包

> ID：12183643
> 
> 赞同：0
> 
> 时间：2012-08-29T17:47:55.670
> 
> 标签：linux, bash, package

我需要一个脚本来检查是否为`apache2`,`mysql`和`php`.

示例输出：

```
apache2 .... ok
mysql .... ok
php ... not installed 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T19:30:24.643

在不同的发行版上，包的名称不一定相同，查询它们的存在取决于使用的包管理器。

Debian（dpkg）：

```
dpkg-query -W -f='${Package}\n' apache2 mysql-server php5 2>/dev/null 
```

费多拉（RPM）：

```
rpm -q --qf '%{NAME}\n' httpd mysql-server php 2>/dev/null 
```

Gentoo（搬运）：

```
equery --quiet list www-servers/apache:2 dev-lang/php dev-db/mysql 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T17:50:03.423

假设 APT：

```
dpkg -l | grep -i apache2 
```

等等

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-30T13:23:23.000

对于 CentOS（只会显示*已*安装的）：

```
yum list installed | egrep -i 'apache|mysql|php' 
```

# multithreading - Scala：Akka - Actorsystem 的多个事件总线或具有优先级事件？

> ID：12183645
> 
> 赞同：1
> 
> 时间：2012-08-29T17:47:58.687
> 
> 标签：multithreading, scala, akka, event-bus

我有一个 ActorSystem，它的 eventStream 有几个订阅者。应用程序每秒可能产生数千条消息，其中一些消息比其他消息更重要。所以他们应该首先被处理。

我发现每个 ActorSystem 都附加了一个 eventStream，因此我似乎需要用两个（或更多）ActorSystems 注册同一个 Actor 类，以便在专用 eventStream 中接收重要消息。

这是首选方法，还是此任务有一些技巧？分类器是否也可以以某种方式调整消息优先级？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T22:01:27.397

EventStream 不是保存事件的数据结构，它只是将事件路由到订阅者，因此您应该使用 PriorityMailbox 作为侦听器参与者，有关如何使用优先级邮箱的文档，请参阅：http: [//doc.akka.io/docs/akka/ 2.0.3/scala/dispatchers.html#Mailboxes](http://doc.akka.io/docs/akka/2.0.3/scala/dispatchers.html#Mailboxes)

# scala - Scala List.filter 有两个条件，只应用一次

> ID：12183651
> 
> 赞同：11
> 
> 时间：2012-08-29T17:48:25.453
> 
> 标签：scala

不知道这是否可能，但我有一些这样的代码：

```
val list = List(1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12)
val evens = list.filter { e => e % 2 == 0 }

if(someCondition) {
  val result = evens.filter { e => e % 3 == 0 }
} else {
  val result = evens.filter { e => e % 5 == 0 }
} 
```

但是我不想对所有元素进行两次迭代，所以有没有一种方法可以创建“在这个集合上创建一个“通用的选择所有的偶数”并应用一些其他函数，这样它就只会迭代一次?

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-29T17:56:19.480

如果您`list`变成一个惰性集合，例如 an `Iterator`，那么您可以一次性应用所有过滤器操作（或其他类似的操作`map`）：

```
val list = (1 to 12).toList
val doubleFiltered: List[Int] =
  list.iterator
    .filter(_ % 2 == 0)
    .filter(_ % 3 == 0)
    .toList
println(doubleFiltered) 
```

当您使用 将集合转换为 Iterator 时`.iterator`，Scala 将跟踪要执行的操作（这里是两个`filter`s），但会等待执行它们直到实际访问结果（这里是通过对 的调用`.toList`）。

所以我可能会像这样重写你的代码：

```
val list = (1 to 12).toList
val evens = list.iterator.filter(_ % 2 == 0)

val result = 
  if(someCondition)
    evens.filter(_ % 3 == 0)
  else
    evens.filter(_ % 5 == 0)

result foreach println 
```

根据您想要做什么，您可能需要一个`Iterator`、一个`Stream`或一个`View`。它们都是惰性计算的（因此将应用一次性方面），但它们在是否可以多次迭代（`Stream`和`View`）或是否保留计算值以供以后访问（`Stream`）等方面有所不同。

要真正看到这些不同的惰性行为，请尝试运行这段代码并设置`<OPERATION>`为`toList`、`iterator`、`view`或`toStream`：

```
val result =
  (1 to 12).<OPERATION>
    .filter { e => println("filter 1: " + e); e % 2 == 0 }
    .filter { e => println("filter 2: " + e); e % 3 == 0 }
result foreach println
result foreach println 
```

这是您将看到的行为：

*   `List`（或任何其他非惰性集合）：每个`filter`都需要对集合进行单独的迭代。生成的过滤集合存储在内存中，以便每个`foreach`都可以显示它。
*   `Iterator`: `filter`s 和 first`foreach`都是在一次迭代中完成的。第二个`foreach`什么都不做，因为`Iterator`已经消耗了。结果不存储在内存中。
*   `View`：这两个`foreach`调用都会导致它们自己对集合进行单遍迭代以执行`filters`. 结果不存储在内存中。
*   `Stream`: `filter`s 和 first`foreach`都是在一次迭代中完成的。生成的过滤集合存储在内存中，以便每个`foreach`都可以显示它。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-29T18:38:38.810

~~您可以使用函数组合。`someCondition`在决定使用哪个函数时，这里只调用一次：~~

 ~~```
def modN(n: Int)(xs: List[Int]) = xs filter (_ % n == 0)

val f = modN(2) _ andThen (if (someCondition) modN(3) else modN(5))

val result = f(list) 
```~~ 

~~（这不会做你想要的 - 它仍然遍历列表两次）~~

 ~~只需这样做：

```
val f: Int => Boolean = if (someCondition) { _ % 3 == 0 } else { _ % 5 == 0 }
val result = list filter (x => x % 2 == 0 && f(x)) 
```

或者更好：

```
val n = if (someCondition) 3 else 5
val result = list filter (x => x % 2 == 0 && x % n == 0) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-29T17:59:38.403

这行不通：

```
list.filter{e => e % 2 == 0 && (if (someCondition) e % 3 == 0 else e % 5 == 0)} 
```

FYI`e % 2 == 0`也会给你所有的偶数，除非你`odds`出于其他原因命名 val。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-29T18:00:30.927

您只需在过滤器中编写两个条件：

```
val list = List(1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12)

var result = List(0)
val someCondition = true

result = if (someCondition) list.filter { e => e % 2 == 0 && e % 3 == 0 }
         else               list.filter { e => e % 2 == 0 && e % 5 == 0 } 
```~~

# class - 是否可以使用 Afterthought 修改类属性

> ID：12183652
> 
> 赞同：1
> 
> 时间：2012-08-29T17:48:25.267
> 
> 标签：class, attributes, aop, afterthought

我想知道是否可以在编译时使用 Afterthought 向类添加属性。我知道 PostSharp 可以做到这一点，但事后思考，我只能看到属性的属性修改。我想做这样的事情。

```
[AddStructLayout]
class Foo
{
    float A;
    float B;
} 
```

应该生成

```
[Struct;StructLayout(Explicit)]
class Foo
{
    [FieldOffset(0)]
    float A;
    [FieldOffset(16)]
    float B;
} 
```

我的用例是将类上的 StructLayout 属性和 FieldOffset 属性添加到我的类中的字段，以以特定方式强制执行内存布局。确切的布局规则由方面决定。

谢谢约翰

# asp.net-mvc - MVC HandleError 过滤器没有捕捉到异常

> ID：12183653
> 
> 赞同：2
> 
> 时间：2012-08-29T17:48:30.290
> 
> 标签：asp.net-mvc, asp.net-mvc-3, exception-handling, handleerror

我有一个 MVC 3 Web 应用程序，我在其中使用“ **[HandleError](http://weblogs.asp.net/scottgu/archive/2008/07/14/asp-net-mvc-preview-4-release-part-1.aspx)** ”动作过滤器进行异常处理。我的这个动作过滤器实现如下：

```
[HandleError]
public class BaseController : Controller {...} 
```

这是派生我所有控制器的基类。在我的 web.config 我有*我的共享文件夹中有一个**Error.cshtml**（.cshtml 因为我使用 Razor）。一切正常，我得到了很好的异常处理（由我的函数格式化）*

 *最近，不知何故，我得到了“**未处理的异常 (YSOD)** ”，并且由于“customErrors”，我得到了默认的 ASP.Net 错误消息，它没有关于实际异常的任何信息。这发生在 AJAX 回帖中。但是，我无法重现它。

任何类型的错误都可能逃脱此操作过滤器吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T11:56:55.613

> 任何类型的错误都可能逃脱此操作过滤器吗？

`HandleError`过滤器不会捕获应用程序中触发的所有异常。它可以捕获在动作、动作过滤器中触发的异常......只是在 MVC 上下文中。此外，它不会捕获`HTTP`状态码不是 500 的异常。仅依赖`HandleError`MVC 应用程序中的过滤器是一个坏主意。

您仍然应该依赖`Application_Error`事件来执行一些日志记录和`customErrors`部分来显示自定义错误页面，以显示`HandleError`.

我写了一篇关于这个主题的博客文章，可能会对你有所帮助[。](http://prideparrot.com/blog/archive/2012/5/exception_handling_in_asp_net_mvc)*

# haskell - 使用 continuation monad 在 `Set` （和其他有约束的容器）上构造高效的 monad 实例

> ID：12183656
> 
> 赞同：31
> 
> 时间：2012-08-29T17:49:06.873
> 
> 标签：haskell, complexity-theory, monads, continuations, curry-howard

`Set`，类似地`[]`具有完美定义的一元操作。问题是它们要求值满足`Ord`约束，因此无法定义`return`并且`>>=`没有任何约束。同样的问题适用于许多其他需要对可能值进行某种约束的数据结构。

标准技巧（在[haskell-cafe post](http://www.haskell.org/pipermail/haskell-cafe/2009-November/068761.html)中向我建议）是包装`Set`到延续单子中。`ContT`不关心底层类型函子是否有任何约束。`Set`仅当将s 包装/展开到/从延续中时才需要约束：

```
import Control.Monad.Cont
import Data.Foldable (foldrM)
import Data.Set

setReturn :: a -> Set a
setReturn = singleton

setBind :: (Ord b) => Set a -> (a -> Set b) -> Set b
setBind set f = foldl' (\s -> union s . f) empty set

type SetM r a = ContT r Set a

fromSet :: (Ord r) => Set a -> SetM r a
fromSet = ContT . setBind

toSet :: SetM r r -> Set r
toSet c = runContT c setReturn 
```

这可以根据需要工作。例如，我们可以模拟一个非确定性函数，将其参数增加 1 或保持原样：

```
step :: (Ord r) => Int -> SetM r Int
step i = fromSet $ fromList [i, i + 1]

-- repeated application of step:
stepN :: Int -> Int -> Set Int
stepN times start = toSet $ foldrM ($) start (replicate times step) 
```

确实，`stepN 5 0`产量`fromList [0,1,2,3,4,5]`。如果我们改用`[]`monad，我们会得到

```
[0,1,1,2,1,2,2,3,1,2,2,3,2,3,3,4,1,2,2,3,2,3,3,4,2,3,3,4,3,4,4,5] 
```

反而。

* * *

问题是**效率**。如果我们调用`stepN 20 0`输出需要几秒钟并且`stepN 30 0`没有在合理的时间内完成。事实证明，所有`Set.union`操作都是在最后执行的，而不是在每次单子计算之后执行。结果是只在最后`Set`构造和编辑了成倍增加的 s ，这对于大多数任务来说是不可接受的。`union`

有什么办法可以使这种建设高效吗？我试过但没有成功。

[（我什至怀疑 Curry-Howard 同构和Glivenko 定理](https://en.wikipedia.org/wiki/Double-negation_translation#Propositional_logic)可能存在某种理论限制。Glivenko 定理说，对于任何命题重言式*φ*，公式*¬¬φ*都可以在直觉逻辑中得到证明。但是，我怀疑证明的长度（以正常形式）可以成倍地增长。所以，也许，将计算包装到延续单子中会使它成倍地增长？）

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-30T14:50:17.820

单子是结构化和排序计算的一种特殊方式。monad 的绑定不能神奇地重组您的计算，以便以更有效的方式发生。构建计算的方式存在两个问题。

1.  在评估`stepN 20 0`时，`step 0`将计算 20 次的结果。这是因为计算的每一步都会产生 0 作为一个备选方案，然后将其馈送到下一步，该步骤也产生 0 作为备选方案，依此类推......

    也许这里的一些记忆会有所帮助。

2.  一个更大的问题是对`ContT`计算结构的影响。通过一些等式推理，扩展 的结果`replicate 20 step`，定义`foldrM`并尽可能多地简化，我们可以看到它`stepN 20 0`等价于：

    ```
    (...(return 0 >>= step) >>= step) >>= step) >>= ...) 
    ```

    此表达式的所有括号都关联到左侧。这很好，因为这意味着每次出现的 RHS`(>>=)`都是基本计算，即`step`，而不是组合计算。但是，放大`(>>=)`for的定义`ContT`，

    ```
    m >>= k = ContT $ \c -> runContT m (\a -> runContT (k a) c) 
    ```

    我们看到，在评估`(>>=)`左侧的关联链时，每个绑定都会将新的计算推送到当前的 continuation 上`c`。为了说明发生了什么，我们可以再次使用一些等式推理，扩展这个定义`(>>=)`和 的定义`runContT`，并简化，产生：

    ```
    setReturn 0 `setBind`
        (\x1 -> step x1 `setBind`
            (\x2 -> step x2 `setBind` (\x3 -> ...)...) 
    ```

    现在，对于每次出现的`setBind`，让我们问问自己 RHS 参数是什么。对于最左边的情况，RHS 参数是 之后的整个其余计算`setReturn 0`。对于第二次出现，它是 之后的所有内容`step x1`，等等。让我们放大 的定义`setBind`：

    ```
    setBind set f = foldl' (\s -> union s . f) empty set 
    ```

    这里表示计算的*所有*`f`其余部分，即出现的右侧的所有内容。这意味着在每一步，我们都将剩余的计算捕获为，并应用与 中的元素一样多的次数。这些计算不像以前那样是基本的，而是组合的，这些计算将被重复很多次。*`setBind``f``f``set`*

 *问题的症结在于，`ContT`monad 转换器正在将计算的初始结构（您的意思是`setBind`'s 的左关联链）转换为具有不同结构的计算，即右关联链。毕竟这完全没问题，因为单子定律之一说，对于每个，`m`我们有`f``g`

```
(m >>= f) >>= g = m >>= (\x -> f x >>= g) 
```

然而，单子定律并没有强制每个定律方程的每一侧的复杂性保持相同。事实上，在这种情况下，构建这种计算的左关联方式要高效得多。's的左关联链`setBind`立即计算，因为只有基本的子计算被复制。

事实证明，其他强行`Set`插入 monad 的解决方案也遇到了同样的问题。特别是[set-monad](http://hackage.haskell.org/package/set-monad)包，产生类似的运行时。原因是它也将左关联表达式重写为右关联表达式。

我认为您已经指出了一个**非常重要但相当微妙的问题**，即坚持`Set`遵守`Monad`接口。而且我认为它无法解决。问题是monad的绑定类型需要是

```
(>>=) :: m a -> (a -> m b) -> m b 
```

`a`即在任何一个或上都不允许有类约束`b`。这意味着我们不能在左边嵌套绑定，除非首先调用 monad 法则来重写为右关联链。原因如下：给定`(m >>= f) >>= g`，计算的类型`(m >>= f)`为`m b`. 计算值`(m >>= f)`的类型为`b`。但是因为我们不能将任何类约束挂在类型变量上`b`，我们无法知道我们得到的值是否满足`Ord`约束，因此不能将此值用作我们希望能够计算的集合的元素`union`的。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-05-13T12:36:01.240

最近在 Haskell Cafe [Oleg 上给出了一个](http://www.haskell.org/pipermail/haskell-cafe/2013-April/107607.html)如何`Set`有效地实现 monad 的例子。报价：

> ...然而，高效的真正 Set monad 是可能的。
> 
> ... 随附的是高效的正版 Set monad。我以直接的方式写了它（无论如何，它似乎更快）。关键是尽可能使用优化的选择功能。
> 
> ```
>  {-# LANGUAGE GADTs, TypeSynonymInstances, FlexibleInstances #-}
> 
>   module SetMonadOpt where
> 
>   import qualified Data.Set as S
>   import Control.Monad
> 
>   data SetMonad a where
>       SMOrd :: Ord a => S.Set a -> SetMonad a
>       SMAny :: [a] -> SetMonad a
> 
>   instance Monad SetMonad where
>       return x = SMAny [x]
> 
>       m >>= f = collect . map f $ toList m
> 
>   toList :: SetMonad a -> [a]
>   toList (SMOrd x) = S.toList x
>   toList (SMAny x) = x
> 
>   collect :: [SetMonad a] -> SetMonad a
>   collect []  = SMAny []
>   collect [x] = x
>   collect ((SMOrd x):t) = case collect t of
>                            SMOrd y -> SMOrd (S.union x y)
>                            SMAny y -> SMOrd (S.union x (S.fromList y))
>   collect ((SMAny x):t) = case collect t of
>                            SMOrd y -> SMOrd (S.union y (S.fromList x))
>                            SMAny y -> SMAny (x ++ y)
> 
>   runSet :: Ord a => SetMonad a -> S.Set a
>   runSet (SMOrd x) = x
>   runSet (SMAny x) = S.fromList x
> 
>   instance MonadPlus SetMonad where
>       mzero = SMAny []
>       mplus (SMAny x) (SMAny y) = SMAny (x ++ y)
>       mplus (SMAny x) (SMOrd y) = SMOrd (S.union y (S.fromList x))
>       mplus (SMOrd x) (SMAny y) = SMOrd (S.union x (S.fromList y))
>       mplus (SMOrd x) (SMOrd y) = SMOrd (S.union x y)
> 
>   choose :: MonadPlus m => [a] -> m a
>   choose = msum . map return
> 
>   test1 = runSet (do
>     n1 <- choose [1..5]
>     n2 <- choose [1..5]
>     let n = n1 + n2
>     guard $ n < 7
>     return n)
>   -- fromList [2,3,4,5,6]
> 
>   -- Values to choose from might be higher-order or actions
>   test1' = runSet (do
>     n1 <- choose . map return $ [1..5]
>     n2 <- choose . map return $ [1..5]
>     n  <- liftM2 (+) n1 n2
>     guard $ n < 7
>     return n)
>   -- fromList [2,3,4,5,6]
> 
>   test2 = runSet (do
>     i <- choose [1..10]
>     j <- choose [1..10]
>     k <- choose [1..10]
>     guard $ i*i + j*j == k * k
>     return (i,j,k))
>   -- fromList [(3,4,5),(4,3,5),(6,8,10),(8,6,10)]
> 
>   test3 = runSet (do
>     i <- choose [1..10]
>     j <- choose [1..10]
>     k <- choose [1..10]
>     guard $ i*i + j*j == k * k
>     return k)
>   -- fromList [5,10]
> 
>   -- Test by Petr Pudlak
> 
>   -- First, general, unoptimal case
>   step :: (MonadPlus m) => Int -> m Int
>   step i = choose [i, i + 1]
> 
>   -- repeated application of step on 0:
>   stepN :: Int -> S.Set Int
>   stepN = runSet . f
>     where
>     f 0 = return 0
>     f n = f (n-1) >>= step
> 
>   -- it works, but clearly exponential
>   {-
>   *SetMonad> stepN 14
>   fromList [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]
>   (0.09 secs, 31465384 bytes)
>   *SetMonad> stepN 15
>   fromList [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]
>   (0.18 secs, 62421208 bytes)
>   *SetMonad> stepN 16
>   fromList [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]
>   (0.35 secs, 124876704 bytes)
>   -}
> 
>   -- And now the optimization
>   chooseOrd :: Ord a => [a] -> SetMonad a
>   chooseOrd x = SMOrd (S.fromList x)
> 
>   stepOpt :: Int -> SetMonad Int
>   stepOpt i = chooseOrd [i, i + 1]
> 
>   -- repeated application of step on 0:
>   stepNOpt :: Int -> S.Set Int
>   stepNOpt = runSet . f
>     where
>     f 0 = return 0
>     f n = f (n-1) >>= stepOpt
> 
>   {-
>   stepNOpt 14
>   fromList [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14]
>   (0.00 secs, 515792 bytes)
>   stepNOpt 15
>   fromList [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]
>   (0.00 secs, 515680 bytes)
>   stepNOpt 16
>   fromList [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]
>   (0.00 secs, 515656 bytes)
> 
>   stepNOpt 30
>   fromList [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30]
>   (0.00 secs, 1068856 bytes)
>   -} 
> ```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-29T23:29:14.343

我不认为你在这种情况下的性能问题是由于使用`Cont`

```
step' :: Int -> Set Int
step' i = fromList [i,i + 1]

foldrM' f z0 xs = Prelude.foldl f' setReturn xs z0
  where f' k x z = f x z `setBind` k

stepN' :: Int -> Int -> Set Int
stepN' times start = foldrM' ($) start (replicate times step') 
```

`Cont`获得与基于实现类似的性能，但完全发生在`Set`“受限单子”中

我不确定我是否相信你关于 Glivenko 定理导致（标准化）证明大小呈指数增长的说法——至少在按需调用的情况下。那是因为我们可以任意重用子证明（而且我们的逻辑是二阶的，我们只需要 的一个证明`forall a. ~~(a \/ ~a)`）。证明不是树，它们是图（共享）。

通常，您可能会看到`Cont`包装带来的性能成本，`Set`但通常可以通过以下方式避免它们

```
smash :: (Ord r, Ord k) => SetM r r -> SetM k r
smash = fromSet . toSet 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-13T21:28:31.360

我发现了另一种可能性，基于 GHC 的[ConstraintKinds](http://www.haskell.org/ghc/docs/7.4.1/html/users_guide/constraint-kind.html)扩展。这个想法是重新定义`Monad`，使其包含对允许值的参数约束：

```
{-# LANGUAGE ConstraintKinds #-}
{-# LANGUAGE TypeFamilies #-}
{-# LANGUAGE RebindableSyntax #-}

import qualified Data.Foldable as F
import qualified Data.Set as S
import Prelude hiding (Monad(..), Functor(..))

class CFunctor m where
    -- Each instance defines a constraint it valust must satisfy:
    type Constraint m a
    -- The default is no constraints.
    type Constraint m a = ()
    fmap   :: (Constraint m a, Constraint m b) => (a -> b) -> (m a -> m b)
class CFunctor m => CMonad (m :: * -> *) where
    return :: (Constraint m a) => a -> m a
    (>>=)  :: (Constraint m a, Constraint m b) => m a -> (a -> m b) -> m b
    fail   :: String -> m a
    fail   = error

-- [] instance
instance CFunctor [] where
    fmap = map
instance CMonad [] where
    return  = (: [])
    (>>=)   = flip concatMap

-- Set instance
instance CFunctor S.Set where
    -- Sets need Ord.
    type Constraint S.Set a = Ord a
    fmap = S.map
instance CMonad S.Set where
    return  = S.singleton
    (>>=)   = flip F.foldMap

-- Example:

-- prints fromList [3,4,5]
main = print $ do
    x <- S.fromList [1,2]
    y <- S.fromList [2,3]
    return $ x + y 
```

（这种方法的问题在于单子值是函数的情况，例如`m (a -> b)`，因为它们不能满足像 一样的约束。所以对于这个受约束的单子，`Ord (a -> b)`不能使用`<*>`（或）这样的组合子。）`ap``Set`*

# java - JSplitPane 分隔线位置在焦点丢失后更改

> ID：12183657
> 
> 赞同：2
> 
> 时间：2012-08-29T17:49:08.850
> 
> 标签：java, swing, jinternalframe, jsplitpane

我有两个内部框架。其中一个内部框架有一个面板，其中包含滚动窗格中的表格和文本区域，它们由具有垂直拆分的拆分窗格分隔。我已经为拆分窗格设置了`setResizeWeight(0.8)`和`setOneTouchExpandable(true)`。我正在将拆分窗格分隔器移动到最上方或最下方位置并打开第二个内部框架。现在，我切换回第一个内部框架；但是分隔线的位置从我移动它的位置改变了。

我不想改变分隔线的位置。有谁知道原因并解决这个问题。

提前致谢。

# java - 为什么卡片没有出现在 JPanel CardLayout 上？

> ID：12183658
> 
> 赞同：3
> 
> 时间：2012-08-29T17:49:12.753
> 
> 标签：java, swing, jpanel, cardlayout

我的应用程序由两个`JPanel`s 组成，它们将是`MainPanel`. 代码如下。由于某种原因，面板没有出现。非常感谢您的帮助:)

**主面板.java：**

```
public class MainPanel extends JPanel{

    private final static String PANEL1 = "PANEL1";
    private final static String PANEL2 = "PANEL2";

    private static Panel1 panel1;
    private static Panel2 panel2;

    //private static CardLayout layout;

    public MainPanel() {

        super(new CardLayout());

        panel1 = new Panel1();
        panel2 = new Panel2();

        getLayout().addLayoutComponent(PANEL1, panel1);
        getLayout().addLayoutComponent(PANEL2, panel2);

        ((CardLayout) getLayout()).show(this, PANEL1); 
    }

} 
```

**主.java：**

```
public class Main {

    private static JFrame window;

    public static void main(String[] args) {

        window = new JFrame();

        window.setContentPane(new MainPanel());
        window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        window.setSize(600,400);
        window.setVisible(true);
    }

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T17:52:13.927

这个

```
getLayout().addLayoutComponent(PANEL1, panel1);
getLayout().addLayoutComponent(PANEL2, panel2); 
```

应该

```
add(panel1, PANEL1);
add(panel2, PANEL2); 
```

有关详细信息，请参阅[如何使用 CardLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)。

# django - 存储 Django contrib 应用程序的管理自定义的推荐位置在哪里？

> ID：12183661
> 
> 赞同：0
> 
> 时间：2012-08-29T17:49:21.227
> 
> 标签：django, django-admin

我想将 Django Sessions 添加到我的 Django Admin 中，并且我正在关注[关于此的 SO 帖子](https://stackoverflow.com/questions/4976015/django-how-to-see-session-data-in-the-admin-interface)，但尚不清楚我存储此代码的位置。我是否将其放在 admin.py 文件中？在什么目录下？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T18:25:51.913

简而言之，没关系。您可以将代码放入任何应用的 admin.py 文件中。但是，在这种情况下，我倾向于在我的项目中使用通用应用程序，通常命名为`utils`，其存在的唯一目的是容纳不属于某个特定应用程序或可以被多个应用程序使用的代码。

如果您想更具体一些，您可以`sessions`在您的项目中创建一个专门用于此代码的应用程序以及与您的项目的会话管理相关的任何其他代码，或者可能是一个有些相关的现有应用程序。例如，我在包含模型的应用程序中将自定义设置给`User`管理员。`accounts``UserProfile`

# sql - 如何在 Rails 3.2.8 中使用 Active Record 查询将特定日期添加到已知日期？

> ID：12183669
> 
> 赞同：0
> 
> 时间：2012-08-29T17:49:45.897
> 
> 标签：sql, ruby-on-rails, ruby-on-rails-3

我们的 rails 3.2.8 应用程序中有发票表。我们要选择过期/未过期的发票。发票表中有 invoice_date（日期）和 credit_term（整数）。这个想法是，如果 invoice_date + credit_term (day) > Date.today，那么发票没有逾期。否则，发票逾期。这是想法（不工作的查询）：

```
Invoice.where("invoice_date + credit_term.days > ?", Date.today) 
```

在 SQL 查询中将 credit_term 天数添加到 invoice_date 的正确方法是什么？我们希望有一个独立于数据库的解决方案。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T17:54:53.310

MySQL *（您没有指定您的 RDBMS）*：

```
Invoice.where("DATE_ADD(invoice_date, INTERVAL ? DAY) > ?", credit_term.days, Date.today) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T18:21:51.873

为什么不在 ruby​​ 中处理日期呢？

```
 Invoice.where("invoice_date > ?", Date.today - credit_term) 
```

这也可以使用 invoice_date 上的索引来运行查询，而如果您使用 MySQL（例如）将无法使用这样的索引`Date_Add`

您可能需要考虑使用`Date.current`（考虑`Time.zone`到）而不是`Date.today`（不考虑）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-01T12:15:16.470

我绝不是 ActiveRecord 查询界面方面的专家，但我无法找到像您需要的东西这样的东西，没有（1）进行一些数据库更改或（2）“手动”过滤发票（通过 Ruby 代码）。

以下是您的选择：

1.  除了拥有`credit_term`字段之外，您还可以：

    *   将其替换为`due_date`列，**或者**
    *   添加该`due_date`列**并**保留该列`credit_term`- 这不会破坏您现有的任何代码，并且，除非您收到超过 1 亿张发票，否则它不会损害您的生产数据库服务器。
2.  您可以添加一个搜索器（例如[Sphinx](http://sphinxsearch.com/)，通过[thinking-sphinx](http://pat.github.com/ts/en/) gem），并为发票创建索引。使用正确定义的索引，您可以使用 Sphinx 的查询界面来查找符合您条件的发票（*如果您想让我给您一个具体的例子，请告诉我，我会用它更新这篇文章*）。这种方法具有以下优点：

    *   一点也不改变你的数据库。
    *   使用*非常快速*的搜索引擎，搜索数据必须每 24 小时重新索引一次。
3.  您可以通过这样的 Ruby 代码“手动”找到所需的发票：

    ```
    invoices = []
    today = Date.today
    Invoice.find_each do |i|
      invoices << i if (i.invoice_date + i.credit_term) > today
    end 
    ```

    使用`find_each`保证您正在批量获取记录——您**没有**获取整个表。

# javascript - 如何优化jquery动画代码

> ID：12183671
> 
> 赞同：0
> 
> 时间：2012-08-29T17:50:00.587
> 
> 标签：javascript, jquery, html, jsplumb

嗨，我正在使用 jquery animate 进行放大和缩小。问题是它太慢并且需要太多时间。动画功能将缩放大约 100 的 div。有人可以告诉我应该做些什么来优化它。这是下面的代码

```
 //Zoom In by clicking the plus button
        $("div#explanation .plus").click(function(){
        jsPlumb.repaintEverything();
/*              var strongFont = parseFloat($("div.window strong").css('font-size'));
            var newStrongFont = strongFont + 2;
            //alert("the new font is"+strongFont);
*/
            $("div#demo1").animate({'height':'+=20', 'width':'+=20'});
            $("div.window ").animate({
                    'height':'+=20px', 'width':'+=20px'
                },0,function(){
                    jsPlumb.repaintEverything();
            });

    /*              $("div.window strong").animate({
                    fontSize:newStrongFont
            },0,function(){
                jsPlumb.repaintEverything();

            });
                    */              
        }); 
```

我有类似的缩小。请指导我。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T18:13:06.927

首先，你必须意识到你几乎肯定不会在数百个元素中获得良好的性能。浏览器处理的太多了。我会尝试为单个容器元素设置动画以实现您想要的任何效果。

也就是说，您可能想看看[animate-enhanced plugin](http://playground.benbarnett.net/jquery-animate-enhanced/)。在支持 CSS 动画的浏览器中，插件会自动将`.animate(...)`调用转换为 CSS 动画，这些动画通常是硬件加速的。`animate`这比在设定的时间间隔内更改元素属性的常用方法提供了更好的性能。

如果插件没有帮助，您也可以尝试[直接使用 CSS 动画。](https://developer.mozilla.org/en-US/docs/CSS/Using_CSS_animations)我不确定您是否真的在尝试为框的大小设置动画，或者您是否在尝试为实际缩放设置动画（框及其所有内容变大），但[这里有一个为后者设置动画的示例](http://jsfiddle.net/josh3736/NzDqX/)：

```
div {
    width:200px;
    height:200px;
    background:red;
    color:white;
    margin:20px 50px;
    padding:5px;

    -webkit-transform-origin: 50% 50%;
    -moz-transform-origin: 50% 50%;
}

div:hover {
    -webkit-transform: scale(1.4);
    -moz-transform: scale(1.4);
    -webkit-animation-name: popin;
    -moz-animation-name: popin;
    -webkit-animation-duration: 350ms;
    -moz-animation-duration: 350ms;    
}
@-webkit-keyframes popin {
    from {
        -webkit-transform: scale(1);
    }
    to {
        -webkit-transform: scale(1.4);
    }
}
@-moz-keyframes popin {
    from {
        -moz-transform: scale(1);
    }
    to {
        -moz-transform: scale(1.4);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T18:16:28.080

如果您不太关心旧版浏览器，则可以为此使用 css 转换属性。它们通常工作得很快，使您可以有效地放大文档的复杂部分。这是[一个人为的示例](http://jsfiddle.net/EjM2e/1/)，它使用 jQuery 在单击时放大某些内容。动画会变得更复杂：我不相信 jQuery 的动画与变换一起工作，但理论上你可以使用超时在小范围内反复调整比例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T17:57:34.197

动画完成的时间是您可以指定为`.animate()`. 您尚未指定它，因此默认值为 400 毫秒。您可以将其设置为任何您想要的。动画将始终在您设置的大约时间内完成，但如果在这段时间内计算机要做的工作太多以向您显示流畅的动画，您将得到一个跳跃的动画。

使动画不那么跳跃的唯一方法是优化您正在制作动画的内容或制作动画的方式。同时为 100 个 div 制作动画可能比任何事情都重要，但一台非常非常快的计算机可以顺利完成。

您可能需要重新考虑您正在制作动画的内容。在这种情况下，一种可能的解决方法是为大纲而不是整个内容设置动画，因为内容非常复杂，无法以良好的性能进行动画处理。

如果您需要进一步的帮助，您将不得不向我们展示更多的问题。我们需要查看您拥有的 HTML，以便我们可以看到您真正想要制作动画的内容，并且我们可能需要查看该`repaintEverything()`函数以了解它在做什么。

# c - 计算在图像上追踪的线的长度

> ID：12183675
> 
> 赞同：2
> 
> 时间：2012-08-29T17:50:15.077
> 
> 标签：c, formula, trigonometry, lines, trace

好的，我长期以来一直在努力解决这个问题。我有一些图像需要跟踪并从它们的像素中提取一些值。问题是我需要图像上这些线的长度，所以我知道何时停止尝试提取值。这些线应与图像中心成各个角度。这是关于痕迹如何在图像上发生的描述

[http://s16.postimage.org/yzxwze6tf/Screenshot_at_2012_08_29_11_26_00.png](http://s16.postimage.org/yzxwze6tf/Screenshot_at_2012_08_29_11_26_00.png)

所以 p 是线到图像中心的距离（我必须计算所有距离的线），t 是从图像中提取的沿线的值以及线的角度，因为我需要整个 360角度。

因此，当我对此进行编程时，我发现了这些公式来计算线条的长度。

```
t1y = -((Mhe - (p * cos(phi)))/sin(phi));
t1x = ((Nhe - (p * sin(phi)))/cos(phi));
t2y = ((Mhe + (p * cos(phi)))/sin(phi));
t2x = -((Nhe + (p * sin(phi)))/cos(phi)); 
```

在该代码上，Mhe 是图像宽度的一半，Nhe 是图像高度的一半。p 是线到图像中心的距离，phi 是角度。t1y t1x 和 t2y 和 t2x 是线与图像边界相交的最极端点，因此我在 t1x 和 t1y 之间选择一个，在 t2x 和 t2y 之间选择另一个。例如，如果我选择 t1x 和 t2y，那么我从 t1x (t2y-t1x) 中减去 t2y，这样我就得到了线的长度。这是描述这些值的另一张图片

[http://s12.postimage.org/cw1rbdlqz/Screenshot_at_2012_08_29_11_47_06.png](http://s12.postimage.org/cw1rbdlqz/Screenshot_at_2012_08_29_11_47_06.png)

问题是当我应用这些公式来计算那些行的长度时，我会得到疯狂的数字，例如，

角度 153，线 82 的长度（这很好，因为在图像边界内）

角度154，线长-2584

第二个肯定不好，因为它超出了图像边界，甚至是负面的！

有三角学知识的人会帮助我理解为什么我从上面的公式中得到如此不同的值吗？如果有更简单的方法可以使用线条的角度、图像的尺寸以及线条与图像中心的距离来计算这些线条的长度。

谢谢你的帮助！

# ruby - 返回 href 数组

> ID：12183677
> 
> 赞同：3
> 
> 时间：2012-08-29T17:50:23.490
> 
> 标签：ruby, watir, watir-webdriver

我需要 Watir 返回一组 href。这些 href 都在同一个 div 中，并且它们都具有相同的类。我获取页面上第一个 href 的代码如下所示：

```
b.div(:class => 'products').link(:class => 'product_detail_url').href 
```

但是，在那之后，我无法找到如何循环遍历该 div 中所有可用的 href。

老实说，我到处寻找，但我发现的解决方案似乎都没有满足我的特定需求。感谢阅读，希望有人有解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T17:56:48.740

尝试：

```
b.div(:class => 'products').links(:class => 'product_detail_url').each do |link|
  puts link.href
end 
```

基本上，这会遍历具有特定类的链接集合。

**更新：**

要将所有 href 收集到一个数组中，请使用 collect 方法：

```
link_arr = b.div(:class => 'products').links(:class => 'product_detail_url').collect{ |link| link.href } 
```

或将其分成两行以便于阅读：

```
link_collection = b.div(:class => 'products').links(:class => 'product_detail_url')
link_arr = link_collection.collect{ |link| link.href } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T15:48:12.583

或者您可以通过使用#map 作为#collect 的别名和短块语法来编写更短的代码：

```
hrefs = b.div(:class => 'products').links(:class => 'product_detail_url').map(&:href) 
```

# android - 如何在android中创建自定义对话框标题？

> ID：12183684
> 
> 赞同：0
> 
> 时间：2012-08-29T17:50:34.080
> 
> 标签：android, dialog, customdialog

如何访问对话框的标题以更改字体字体（创建对话框的自定义标题）？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-29T18:26:26.763

你不能这样做。您必须使用一个活动并将其主题设置为对话框。像这样

```
<activity android:theme="@android:style/Theme.Dialog" /> 
```

当你开始你的活动时，它会在你的 xml 布局文件中作为一个对话框和 setTypeFace 开始，或者以编程方式设置它。如果您不想设置标题，请设置此代码：

```
requestWindowFeature(Window.FEATURE_NO_TITLE); 
```

它需要在调用 super.onCreate 后立即完成。

# android - 从 android 使用 Web 服务时发生 Xml 错误

> ID：12183685
> 
> 赞同：0
> 
> 时间：2012-08-29T17:50:34.953
> 
> 标签：android, web-services

现在我正在通过 SOAP 方法使用来自 android 的 Web 服务。

```
http://54.251.60.177/TMSWebService/MarginService.asmx 
```

上面的链接是我正在尝试使用的确切 Web 服务链接。此 Web 服务的输入值是

*   fd: 01/01/2012

*   时间：2012 年 7 月 7 日

这将以 xml 的形式返回答案。

但我在我的模拟器上收到了这条消息

> 错误：org.ksoap2.SoapFault：服务器无法读取请求。---> XML 文档 (1,321) 中存在错误。---> 字符串 " 不是有效的 ALLXsd 值。

这是什么意思。如何克服这个问题？如果有的话，任何人都可以告诉我解决方案吗？

感谢您宝贵的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T18:01:21.813

您需要构建一个 POST 到站点的 XML 有效负载。此页面：`http:// 54\. 251\. 60.177/TMSWebService/MarginService.asmx?op=GetTMSMargin`显示它应该是什么样子。

如果您查看 XML，您可以看到要传入的`fd`和`td`值的元素。我看到这两个都是`dateTime`. 看起来 Web 服务是用**.Net**编写的，并且正在使用该`DateTime C#`类型。使用更通用的类型（如字符串）可能更容易（如果您还创建 Web 服务），您将能够更轻松地构建 XML。

# java - 如果运行时间很短（2 毫秒），是否值得使用多个线程？

> ID：12183688
> 
> 赞同：1
> 
> 时间：2012-08-29T17:50:40.253
> 
> 标签：java, multithreading, parallel-processing

我写了一个Java程序。对于一个小的输入，在预热之后（前 50 次运行），它的运行时间变成大约 2 毫秒。

在这种情况下，如果我使用多线程版本，我们能得到什么好处吗？如果不是，那么隐藏并行执行好处的开销是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T17:52:21.230

启动线程的开销很可能远远超过任何加速。在 Windows 上，您甚至无法可靠地测量此类快速程序的执行时间。

但是，当然，您必须问自己，您是否真的需要对运行时间为 2 毫秒的程序进行任何加速。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T19:45:52.377

好吧，2ms 至少是在多个线程上拆分的候选。不断地创建/运行/终止/加入线程是一个非启动 - 无望的设计。如果向一组专用线程发送工作信号或向池发出工作，这一切都取决于完成的工作和数据组织。

如果有任何阻塞或 CPU 密集型工作可以在这 2 毫秒内有效地并行执行，那么您可以试一试。CPU 密集型工作的关键问题是有多少数据以及如何组织数据。如果要处理的数据可以很容易地分成很好的 [L1-cache-size 或更小] 块，那么您就是赢家。如果没有，请做好失望的准备。

你当然可以试试看..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T18:28:35.957

Id 取决于 2ms 是否太慢。它还取决于您是否要同时运行这些任务。为什么不使用 Executor 来运行您的任务，然后您可以根据需要添加线程。

# c# - 弱引用和非弱引用字典

> ID：12183690
> 
> 赞同：2
> 
> 时间：2012-08-29T17:50:43.877
> 
> 标签：c#, .net, garbage-collection, weak-references

我有一个自定义类型`MyClass`和一个工厂类，可以根据请求`Factory`创建类型的对象。`MyClass`

`Factory`商店在字典中创建对象，因为创建对象*的成本很高，*并且有时可能会要求多次创建相同的对象。每个具有相同标签的对象只能创建一次。

```
class MyObject
{
    // .. not important
}

class Factory
{
    private Dictionary<int, MyObject> m_objects = new Dictionary<int, MyObject>();

    public MyObject CreateObject(int tag, params object[] parameters)
    {
        MyObject obj;
        if (!m_objects.TryGetValue(tag, out obj))
        {
            obj = new MyObject();
            // .. some initialization
            m_objects.Add(tag, obj);
        }

        return obj;
    }
} 
```

对象*可能会也可能不会在外面* `Factory`的某个地方存储未知的时间。对象在创建后*可能会更改。*有时会`Factory`存储对对象的引用，而该对象并未存储在其他任何地方。

现在我想让垃圾收集器完成它的工作。我希望对象**不存储在外面的任何地方`Factory`并且不被更改**为收集。

我的第一个想法是对内部字典中的值使用弱引用，`Factory`但似乎这种方法不能处理“更改和未引用”的情况。

我应该如何将创建的对象存储在字典中，以便它们：

*   可能被垃圾收集
*   未引用但更改时是否不收集垃圾？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T18:07:12.510

扩展 CodesInChaos 的答案，我认为您在原始文件中使用弱引用是正确的`Dictionary`，我认为使用第二种数据结构是有意义的 - 可能在`HashSet`这里工作得很好 - 只保存对已被引用的对象的引用改变了。

请记住，存储对对象的*引用*很便宜。我认为在它开始引起关注之前，您必须获得数百万或数十亿的参考。

# asp.net - Visual basic 6 中的 RestSharp

> ID：12183691
> 
> 赞同：1
> 
> 时间：2012-08-29T17:50:45.917
> 
> 标签：asp.net, vb6, restsharp

我在 Visual Basic .net 中有这段代码，我想在 Visual Basic 6 中做同样的事情。代码将图像上传到给定的 URL。我必须使用 Rest 协议，因为我上传图像的服务器请求它。

```
 Dim res As New RestSharp.RestRequest("URL_OF_SERVER", RestSharp.Method.POST)

 res.AddFile("file", "File_location_on_PC")
 Dim restClient As New RestSharp.RestClient()

 Dim r As New RestSharp.RestResponse
 r = restClient.Execute(res) 
```

是否可以在 Visual Basic 6 中执行相同的 Rest 协议？

**编辑 1：我已经尝试过了，但发生了错误**

```
Dim xmlhttp As MSXML2.XMLHTTP30
Const STR_BOUNDARY  As String = "3fbd04f5-b1ed-4060-99b9-fca7ff59c113"
Dim nFile           As Integer
Dim baBuffer()      As Byte
Dim sPostData       As String

'--- read file
nFile = FreeFile
Open NombreArchivo For Binary Access Read As nFile
If LOF(nFile) > 0 Then
    ReDim baBuffer(0 To LOF(nFile) - 1) As Byte
    Get nFile, , baBuffer
    sPostData = StrConv(baBuffer, vbUnicode)
End If
Close nFile
'--- prepare body
sPostData = "--" & STR_BOUNDARY & vbCrLf & _
"   Content-Disposition: form-data; name=""image002""; filename=""C:\image002.jpg" & _
"--" & STR_BOUNDARY & "--"
'--- post
Set xmlhttp = New MSXML2.XMLHTTP30
With xmlhttp
    .Open "POST", Url, False
    .setRequestHeader "Content-Type", "multipart/form-data; boundary=" & STR_BOUNDARY
    .send pvToByteArray(sPostData)
End With

Private Function pvToByteArray(sText As String) As Byte()
   pvToByteArray = StrConv(sText, vbFromUnicode)
End Function 
```

**错误 ：**

```
responseText
{"message":"file.not_found","error":"There is no file in request.","status":400,"cause":[]} 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T07:45:40.917

如果您只需要发布文件，这是一个简单的功能

```
Private Sub pvPostFile(sUrl As String, sFileName As String, Optional ByVal bAsync As Boolean)
    Const STR_BOUNDARY  As String = "3fbd04f5-b1ed-4060-99b9-fca7ff59c113"
    Dim nFile           As Integer
    Dim baBuffer()      As Byte
    Dim sPostData       As String

    '--- read file
    nFile = FreeFile
    Open sFileName For Binary Access Read As nFile
    If LOF(nFile) > 0 Then
        ReDim baBuffer(0 To LOF(nFile) - 1) As Byte
        Get nFile, , baBuffer
        sPostData = StrConv(baBuffer, vbUnicode)
    End If
    Close nFile
    '--- prepare body
    sPostData = "--" & STR_BOUNDARY & vbCrLf & _
        "Content-Disposition: form-data; name=""uploadfile""; filename=""" & Mid$(sFileName, InStrRev(sFileName, "\") + 1) & """" & vbCrLf & _
        "Content-Type: application/octet-stream" & vbCrLf & vbCrLf & _
        sPostData & vbCrLf & _
        "--" & STR_BOUNDARY & "--"
    '--- post
    With CreateObject("Microsoft.XMLHTTP")
        .Open "POST", sUrl, bAsync
        .SetRequestHeader "Content-Type", "multipart/form-data; boundary=" & STR_BOUNDARY
        .Send pvToByteArray(sPostData)
    End With
End Sub

Private Function pvToByteArray(sText As String) As Byte()
    pvToByteArray = StrConv(sText, vbFromUnicode)
End Function 
```

如果您的文件足够大并且在 30 秒内超时，您可以切换到`MSXML2.ServerXMLHTTP`能够使用它的方法。[`SetTimeouts`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms760403%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T23:58:29.587

您可以为 RestSharp 程序集创建一个 COM 可调用包装器 (CCW) - 有关如何执行此操作的详细信息，请参阅此 URL：

[http://msdn.microsoft.com/en-us/library/ms973802.aspx](http://msdn.microsoft.com/en-us/library/ms973802.aspx)

注册后，您可以使用 VB6 中的 RestSharp。

# php - 从 PHP 的 mysql 扩展切换到 PDO。扩展类以减少代码行

> ID：12183695
> 
> 赞同：0
> 
> 时间：2012-08-29T17:50:55.080
> 
> 标签：php, constructor, pdo

所以这是我多年来一直想要解决的问题。将一些小型（单文件）应用程序转换为 PDO。我可以使用 PDO，连接到数据库并运行查询，一切正常。

但是每次我初始化一个新的 PDO 时，我还必须运行
`setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);`
是的，它只有一行，但有一天我可能需要在其中添加更多的东西。对我来说，以某种方式扩展 PDO 类似乎更好，这样我就可以用一行来启动我的数据库连接。创建我自己的类，即使在这个阶段只添加一行代码，如果我决定在未来添加任何其他东西，我也会有未来的保障。

我发现了类似的东西......

```
class myPDO extends PDO {
    public function __construct($dsn, $user=null, $pass=null, $options=null) {
        parent::__construct($dsn, $user, $pass, $options);
        $this->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    }
}

// THEN A SIMPLE 1 LINER TO CONNECT - USING TRY/CATCH AS WELL OF COURSE
$pdo_conn = new myPDO($cfg['pdo_dsn'], $cfg['pdo_user'], $cfg['pdo_pass'], $cfg['pdo_options']);
```

在扩展类时，我假设我实际上不需要重新创建构造函数。
有没有一种方法可以在**不**重新创建构造函数的情况下将我的类集成`$this->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);`到我的类中？

 **我刚刚开始使用 PHP 的类语法，所以这对某人来说是一个非常基本的问题，但它会同时为我回答一些其他问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-30T07:38:18.640

您不需要从此处扩展 PDO。您想要的是创建 PDO 对象的应用程序的中心位置。然后，您可以随时间进行您喜欢的更改（例如集成一些配置文件/系统），然后集中扩展。

一件事是您为此创建了一个类，我们称之为`PdoFactory`：

```
class PdoFactory
{
     /**
      * @return PDO
      */
     public function buildPdo() {
        $pdo = new PDO($dsn = 'xyz', $user = 'abc', $pass = '', $options  = '');
        if ($pdoException = true) {
            $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
        }
        return $pdo;
     }
} 
```

用法：

```
$factory = new PdoFactory();
$pdo = $factory->buildPdo(); 
```

如您所见，这非常容易使用。您甚至可以将创建函数的位置与调用函数`PdoFactory`的位置分开。`buildPdo()`

这也更清楚地表明您在这里处理两个不同的事情：首先创建 Pdo 对象（封装到它自己的类中）和 Pdo 对象本身，它仅用于访问数据库。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T17:54:08.980

在我看来，问题在于您将特定的错误级别硬编码到您的应用程序中。如果您正在开发中并且想要一切怎么办？如果您决定要更改特定应用程序的级别怎么办？最好将其保留为事后设置的参数，或者，如果您一心要对它进行子类化，则将错误级别作为构造函数参数传递。**

# asp.net - 在 ASP.NET 3.5 - IIS 7 中重写对文件夹的所有请求的 URL

> ID：12183696
> 
> 赞同：1
> 
> 时间：2012-08-29T17:50:57.117
> 
> 标签：asp.net, url-rewriting

我们有许多现有的客户指向以下网址：

> [http://sub1.site.com/images/image1.jpg](http://sub1.site.com/images/image1.jpg)

/images 是一个虚拟目录，它指向该服务器上实际包含 image1.jpg 的目录。

我们正在将所有文件移出此目录并移至不会运行同一应用程序的单独服务器上。

该文件现在仅在以下位置可用：

> [http://sub2.site.com/image1.jpg](http://sub2.site.com/image1.jpg)

使请求 [http://sub1.site.com/images/image1.jpg](http://sub1.site.com/images/image1.jpg)的客户获得现在位于[http://sub2.site.com/image1.jpg](http://sub2.site.com/image1.jpg)的内容的最佳方法是什么？

几个要求：

*   我们需要通过该 url 返回的实际内容 - 而不是 302 响应。
*   我们无法修改 IIS 服务器配置 - 只有站点的 web.config
*   同样，我们正在运行 asp.net 3.5

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T19:16:10.190

不完全确定这是否可行，但您可以在旧站点上设置 URL 路由，以便所有请求都发送到处理程序，并且在该处理程序中，您可以执行 Web 请求以从其新位置获取文件。

我使用该过程的变体将图像 URL 映射到不同位置，并且我的处理程序执行一些数据库查询以获取映射关系并提供正确的图像。我不明白你为什么可以通过网络请求来获取图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T20:19:30.133

如果您对服务器或服务器上游的任何内容有其他控制权，则可以使用 mod_proxy（或类似的 Windows/IIS 工具）拦截这些 URL 并将它们转发到另一台服务器并以真实请求进行响应。根据您的网络配置和可用服务器，这可能是最简单、性能最佳的解决方案。

[可以将 IIS 配置为将请求转发到另一个 Web 服务器吗？](https://serverfault.com/a/152411/494)on serverfault 有一个 IIS 7.5 解决方案的快速过程和链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T19:41:05.670

由于您使用的是 IIS7，因此您可以使用内置的[URL 重写模块](http://learn.iis.net/page.aspx/465/url-rewrite-module-configuration-reference/#Rewrite_Rules_Overview?amp;clcid=0x409)。

您需要一个入站和出站规则来将 \images\image1.jpg 更改为 \image1.jpg

它可能会非常复杂，但这应该很简单。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T19:51:12.307

假设您可以将处理程序添加到您的站点（如将 DLL 添加到站点中的 /bin 目录）并且限制您不能发送 302 响应以获得更好的性能，那么您也可以编写一个自定义处理程序来获取所有与该 URL 模式匹配的请求，通过 Web 客户端代码从原始站点对 sub2.site 图像进行 Web 请求，然后从原始站点 sub1.site.com 将其返回。

有关创建和设置自定义处理程序的基础知识，请参阅[如何使用 Visual C# .NET 创建 ASP.NET HTTP 处理程序。](http://support.microsoft.com/kb/308001)然后使用 HttpWebRequest 发出 sub2.site.com 的请求，如指南[A Deeper Look at Performing HTTP Requests in an ASP.NET Page](http://www.4guysfromrolla.com/articles/122204-1.aspx)中所述。加上一些其他代码来处理错误、超时、以尽可能少的处理和内存使用来传递图像等。

根据两台服务器之间的响应时间/延迟，这可能会很慢，但它会满足您的所有要求。但是，如果将图像移动到站点 2 的目的是为了性能（CPU 或内存）或带宽限制，那么这种解决方案将抵消任何收益——实际上会使事情变得更糟。但是，如果他们因为其他业务或技术原因而被移动，那么这个解决方案可能仍然有用。

# google-chrome - Chrome 21.0.1180.83m - devtools.js 位于哪里？

> ID：12183698
> 
> 赞同：0
> 
> 时间：2012-08-29T17:51:00.590
> 
> 标签：google-chrome, google-chrome-devtools

我想对 devtools.js 执行 hack 以默认扩展所有 DOM 元素。我在这里的另一篇文章中读到这是可能的。

但是，我找不到 devtools.js，或者就此而言，找不到应该存在于 C:\Users\Administrator\AppData\Local\Google\Chrome 的应用程序文件夹。我已经在我的 Windows 7 笔记本电脑和我的 Windows XP 桌面（显然，桌面的不同路径）上尝试过这个，并且该文件夹甚至不存在......这让我相信它在其他地方并命名了其他东西。我在两台机器上都显示了隐藏文件夹，所以也不是这样。我什至搜索了两台计算机...在任何一台计算机上都没有 devtools.js 文件。

我在哪里可以找到 devtools.js 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T17:05:11.393

聚会可能有点晚了，但我正在寻找一个非常相似的问题并找到了一些答案，所以我想我会分享我的发现。

似乎 devTools.js 以及 DevTools 前端的其他文件都打包在浏览器中。因此，您的硬盘驱动器上没有名为 devTools.js 的文件，但可以选择获取开发工具的源代码并将其用作独立的前端。

在这个页面上，我找到了一些关于如何使用自己的前端的说明。 [http://dev.chromium.org/devtools](http://dev.chromium.org/devtools)

祝你好运！PM5544

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T18:01:06.540

它似乎被打包在一个名为`resources.pak`. 该软件包似乎还包含许多其他（二进制）文件，因此我不确定您是否会很幸运地对其进行编辑。

# ios - 移动设备上的 YouTube iframe z-index 在播放前有效，但在您点击完成后无效

> ID：12183700
> 
> 赞同：1
> 
> 时间：2012-08-29T17:51:05.090
> 
> 标签：ios, iframe, youtube, z-index, fullscreen

我有一个移动网站，其中嵌入了幻灯片中的 youtube 视频，左右箭头覆盖 iframe。在我点击播放之前，箭头工作正常。它们是可见且可点击的。然后我播放视频，它会全屏显示。当我点击完成并关闭它时，箭头仍然在顶部可见，但不再可点击。

我尝试过使用 preserve-3d 并将 wmode=opaque 添加到 src 和 iframe 标记，但没有成功。

我对 vimeo 嵌入没有这个问题，箭头在全屏播放之前和之后都有效。

# iphone - 如何隐藏 UINavigationController 的后退按钮？

> ID：12183708
> 
> 赞同：4
> 
> 时间：2012-08-29T17:51:41.587
> 
> 标签：iphone, ios, uinavigationcontroller, mono, xamarin.ios

我尝试了各种方法来隐藏我的后退按钮`UINavigationController`

```
UINavigationController RVC = new UINavigationController();
other code
RVC.NavigationItem.SetHidesBackButton(true,true); 
```

和其他类似的方式，但它们都没有真正隐藏后退按钮。有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T18:11:10.353

`this.NavigationItem.SetHidesBackButton(true,true);`在导航控制器中推送它的控制器内使用。您可以覆盖`ViewWillAppear`并将代码放在那里，例如：

```
public override void ViewWillAppear (bool animated)
{
    base.ViewWillAppear (animated); 

    this.NavigationItem.SetHidesBackButton(true,true);
} 
```

希望能帮助到你。

*一个简单的笔记*

由于导航栏对于 a 来说是唯一的`UINavigationController`，因此该按钮将为您在导航控制器中按下的所有控制器保持其状态。为了解释这个概念，假设你有两个控制器，比如 A 和 B。你首先按下 A，然后在它的`ViewWillAppear`方法中隐藏按钮。当您按 B 时，该按钮仍然不可见。如果你想取消隐藏B中的按钮，你可以玩它的`ViewWillAppear`方法（像以前一样）等等......

# c++ - C++11 中的 auto 关键字奇怪行为

> ID：12183710
> 
> 赞同：5
> 
> 时间：2012-08-29T17:51:46.843
> 
> 标签：c++, c++11

仅限理论问题 - 为什么我不能编写这样的代码：

```
auto auto foo = 0; 
```

第一个 auto 关键字 - 存储类说明符（是的，我知道它在 C++11 中无用且已弃用），第二个 auto 关键字 - auto 类型说明符。

那么有什么问题呢？

再说一次 - 我真的不想在实际代码中使用它。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-29T17:55:01.767

存储类说明符并非“`auto`在 C++11 中无用且已弃用”，它已被完全删除。关键字不再是存储类说明符，`auto`不能作为一个。

在 C++11 中，`auto`是一个简单的类型说明符。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T18:04:19.377

来自[Stroustrup 的常见问题解答](http://www.stroustrup.com/C++11FAQ.html#auto)：

> ....auto 的旧含义（“这是一个局部变量”）现在是非法的。几位委员会成员翻阅了数百万行代码，只发现了少数用途——其中大部分都在测试套件中或似乎是错误。

这表明没有使用“auto”作为存储说明符的代码。

# java - Eclipse Build Workspace 大量错误和警告

> ID：12183713
> 
> 赞同：1
> 
> 时间：2012-08-29T17:52:01.007
> 
> 标签：java, eclipse, workspace

当前使用 jre1.7 运行 Eclipse Indigo

我在节省项目时间时遇到了性能问题。我正在编写一个相当大的应用程序，其中包含许多可以完美运行的类。但是，每个构建都会报告超过 1000 个错误和 1500 个警告。我个人总共只计算了 50 个警告，并且在任何地方都没有错误。这似乎并没有阻碍执行，但它使编译时间过长（每次我重新保存时超过一分钟）。有没有办法找到在编译期间发生的这些错误？它们也不会显示在“问题”或“错误日志”中。

请告诉我是否需要更多信息，因为我不确定什么是相关的。

# c# - 为什么 ServiceStack.Text 自定义反序列化设置不适用？

> ID：12183716
> 
> 赞同：5
> 
> 时间：2012-08-29T17:52:18.343
> 
> 标签：c#, serialization, servicestack

我将 ServiceStack.Text 与 ServiceStack（Web 服务框架）一起使用。

我正在尝试为`AppHost.Configure()`. 但是，这些设置不适用/被忽略。

```
public AppHost : AppHostBase 
{
    ...

    public override void Configure(Container container)
    {
        //Register custom serialization routine
        ServiceStack.Text.JsConfig<CultureInfo>.SerializeFn = r => r.TwoLetterISOLanguageName;
        ServiceStack.Text.JsConfig<CultureInfo>.DeSerializeFn = r => return new CultureInfo(r);    
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-29T17:52:18.343

ServiceStack.Text 在内部进行了大量缓存以实现快速性能。`AppHost.Configure()`ServiceStack 在被调用之前已经开始了缓存创建过程。

`AppHost.Init()`因此，要解决此问题，您需要在调用之前注册您的设置。

当然，这对于 ServiceStack.Text 中的所有设置都不是必需的 - 只有在调用之前将被缓存的设置才需要`AppHost.Configure()`。

# jquery - .appendTo() 在 IE7 中不起作用

> ID：12183721
> 
> 赞同：1
> 
> 时间：2012-08-29T17:52:27.040
> 
> 标签：jquery, internet-explorer, internet-explorer-7, appendto

# 我已经更新了我的例子

我的案例有两个步骤：

1) 用户将从下拉列表中选择建模阶段数。2) 根据用户输入，我使用 .appendTo 方法即时创建 HTML 表格。

除了 IE7，在 chrome、firefox、IE9 上一切顺利。我的一些用户有 IE7，他们不允许更新。所以我必须解决这个问题。非常感谢任何评论。

# 另一个有趣的事情是我使用 .appendTo() 创建了另一个[网页](http://www.ubertool.org/przm_input.html)，它在 IE7 中工作。

这是它在 Chrome 和 IE9 中的[外观](http://jsfiddle.net/HmHkr/1/)示例

下面是我的代码：

HTML 代码：

```
<div class="articles">
<table align="center">
<tr><th><label for="id_S">Number of modeled stages:</label></th><td><select name="S" id="id_S">
<option value="">Please choose</option>
<option value="2">2</option>
<option value="3">3</option>
<option value="4">4</option>
<option value="5">5</option>
<option value="6">6</option>
<option value="7">7</option>
</select></td></tr>
</table></div> 
```

JavaScript 代码：

```
$(".articles").find('table').addClass('table');

$('#id_S').change(function() {
    $('.leslie').remove();
    $('.no').remove();
    var total = $(this).val()
    $('<table class="leslie" border="0" align="center"><tr><th width="5" colspan=' + total + '>Lesile Matrix:</th></tr>').appendTo('.table');

    i = 0
    while (i < total) {
        $('<tr>').appendTo('.leslie')

        var j = 0
        while (j < total) {
            $('<td><input type="text" size="5" name="a' + i + '' + j + '" value="0" id="id_a' + i + '' + j + '"/></td>').appendTo('.leslie tr:last')
            j = j + 1
        }

        $('</tr>').appendTo('.leslie')
        i = i + 1
    }
    $('</table>').appendTo('.leslie');

    $('<table class="no" border="0" align="center"><tr><th width="5">Initial Number:</th></tr>').appendTo('.leslie');

    q = 0
    while (q < total) {
        $('<tr><td><input type="text" size="5" name="no' + q + '" value="0" id="id_a' + q + '"/></td></tr>').appendTo('.no')
        q = q + 1
    }
    $('</table>').appendTo('.no');

})​ 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-29T18:01:18.703

您不能像`<table>`然后单独附加 HTML 片段`</table>`。您必须附加构成完整对象的整个 HTML 工作片段。

`.append()`并`.appendTo()`制作整个 DOM 对象，然后附加这些对象。它们不只是将一些 HTML 附加到 innerHTML 的末尾。

因此，您传递的任何 HTML 都`.appendTo()`必须是完整的 HTML 对象（例如，整个表格或整行）。

您可以自己构建 HTML 字符串，然后一次性附加所有内容：

```
var html = '<table class="leslie" border="0" align="center"><tr><th width="5">Lesile Matrix:</th></tr>';
html += '<tr><td><input type="text" size="5" name="a" value="0" id="id_a"/></td></tr>';
html += '</table>';
$(html).appendTo(document.body); 
```

* * *

好的，我已经获取了您的 HTML 和代码并重写了代码以构建正确的 HTML 对象。我不确定您希望在哪里插入第二个表，因为您试图将一个表附加到另一个不是合法结构的表。但是，无论如何，这是固定的代码：

```
$('#id_S').change(function() {
    // remove previous tables
    $('.leslie').remove();
    $('.no').remove();

    // construct 2-D table that is total x total in size
    var total = $(this).val()
    var newTable = $('<table class="leslie" border="0" align="center"><tr><th width="5" colspan=' + total + '>Lesile Matrix:</th></tr></table>');

    var i = 0;
    while (i < total) {
        // create new row
        var newRow = $('<tr>').appendTo(newTable);

        var j = 0;
        while (j < total) {
            // create new cell and append it to the current row
            $('<td><input type="text" size="5" name="a' + i + '' + j + '" value="0" id="id_a' + i + '' + j + '"/></td>').appendTo(newRow);
            j = j + 1;
        }
        // add this row to the table
        newRow.appendTo(newTable);
        i = i + 1;
    }
    // add the fully formed table to the document
    newTable.appendTo('.table');

    // create out second table
    newTable = $('<table class="no" border="0" align="center"><tr><th width="5">Initial Number:</th></tr></table>');

    var q = 0;
    while (q < total) {
        // create a new row and add it to the new table
        $('<tr><td><input type="text" size="5" name="no' + q + '" value="0" id="id_a' + q + '"/></td></tr>').appendTo(newTable);
        q = q + 1;
    }
    // add this fully formed table to the document
    newTable.appendTo(".table");

})​ 
```

这是一个在 IE7 中也可以工作的演示：http: [//jsfiddle.net/jfriend00/35ZNF/](http://jsfiddle.net/jfriend00/35ZNF/)

* * *

或者，这是一个更简单的版本，它只是将 HTML 构造成一个字符串，然后一次性附加 HTML：

```
$('#id_S').change(function() {
    // remove previous tables
    $('.leslie').remove();
    $('.no').remove();
    var total = $(this).val()

    // construct 2-D table that is total x total in size
    var html = '<table class="leslie" border="0" align="center"><tr><th width="5" colspan=' + total + '>Lesile Matrix:</th></tr>';
    for (var i = 0; i < total; i++) {
        html += '<tr>';
        for (var j = 0; j < total; j++) {
            html += '<td><input type="text" size="5" name="a' + i + '' + j + '" value="0" id="id_a' + i + '' + j + '"/></td>';
        }
        html += '</tr>';
    }
    html += "</table>";
    $(".table").append(html);

    // create our second table
    html = '<table class="no" border="0" align="center"><tr><th width="5">Initial Number:</th></tr>';
    for (var q = 0; q < total; q++) {
        html += '<tr><td><input type="text" size="5" name="no' + q + '" value="0" id="id_a' + q + '"/></td></tr>';
    }
    html += '</table>';
    $(".table").append(html);
})​ 
```

此版本的工作演示：http: [//jsfiddle.net/jfriend00/qMnZV/](http://jsfiddle.net/jfriend00/qMnZV/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T18:00:34.203

仅附加整个 html 元素。

```
$('<table class="leslie" border="0" align="center"><tr><th width="5">Lesile Matrix:</th></tr></table>').appendTo('.table');         
$('<tr><td><input type="text" size="5" name="a" value="0" id="id_a"/></td></tr>').appendTo('.leslie'); 
```

如果您需要追加未知数量的行，请改为：

```
var strHTML = '<table class="leslie" border="0" align="center"><tr><th width="5">Lesile Matrix:</th></tr>';
// simulate a loop adding rows
for (var i = 0; i < 6; i++) {
    strHTML += '<tr><td><input type="text" size="5" name="a" value="0" id="id_a"/></td></tr>';
}

$($.parseHTML(strHTML)).appendTo(".table"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T18:04:24.927

您没有正确使用 DOM/jQuery。DOM（或 jQuery，它是一个混合了其他东西的 DOM 包装器）不能单独操作打开和关闭标签，它只能一起操作它们。如果您将部分 HTML 传递给 jQuery，它将使用 DOM API 来构造一个 DOM 对象。在您的情况下，IE7 DOM 无法弄清楚您的部分 HTML 是什么意思。

以下应该有效：

```
<script type="text/javascript" src=" ../stylesheets/jquery-1.7.2.js"></script> 
<script>
$('<table class="leslie" border="0" align="center"><tr><th width="5">Lesile Matrix:</th></tr></table>').appendTo('.table');         
$('<tr>').appendTo('.leslie');
$('<td><input type="text" size="5" name="a" value="0" id="id_a"/></td>').appendTo('.leslie tr:last');
</script> 
```

前提是当你`$(...)`用 HTML 调用时，你应该总是传入有效的 HTML。

# prolog - 地图功能的实现

> ID：12183726
> 
> 赞同：3
> 
> 时间：2012-08-29T17:53:10.900
> 
> 标签：prolog

我正在尝试实现类似方案的`map`功能，即

```
map([X1, X2, ..], Fun) ->[Fun(X1), Fun(X2), ...] 
```

我写了这段代码：

```
map([], Fun, []).
map([H|T], Fun, [HO|TO]) :- call(Fun, H, HO), map(T,F,TO). 
```

现在，看看这个运行：

```
?- map([1,2,3], plus(1), X).
X = [2, 3, 4] ;
X = [2, 3, 4] ;
X = [2, 3, 4] ;
X = [2, 3, 4] ;
ERROR: map/3: Arguments are not sufficiently instantiated
   Exception: (9) map([3], _G380, _G351) ? 
```

1.  在提供第一个解决方案后如何让它停止？
2.  我如何追踪它？如果我使用`trace`它在第一个解决方案后停止执行。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T18:08:25.713

1）您发布的代码有问题：`map(T,F,T0)`应该是`map(T,Fun,T0)`. 如果没有此更改，我会立即收到您提到的错误；通过此更正，它可以完美运行。`map([], Fun, [])`（更改为也是一个好主意，`map([],_Fun,[])`因为您不使用该变量`Fun`- 您应该收到关于单例变量的警告）

2) 当您跟踪它并达到第一个解决方案时，按`;`。或者，在 swi-prolog 中，按`spacebar`而不是，`enter`跟踪将继续。

```
6 ?- trace.
true.

[trace] 6 ?- X = 1 ; X = 2.
   Call: (7) _G522=1 ? creep
   Exit: (7) 1=1 ? creep
X = 1 ;
   Call: (7) _G522=2 ? creep
   Exit: (7) 2=2 ? creep
X = 2. 
```

# python - 是否可以由用户构建表单？

> ID：12183730
> 
> 赞同：0
> 
> 时间：2012-08-29T17:53:28.887
> 
> 标签：python, django

例如：

我有一个用户想为他们的个人网站创建一个联系表。他们想要三`input type=text`加一`textarea`，他们在我的网站上为他们指定了一个标签和一个名称/ID。然后他们可以在他们的网站上使用这个表格，但我会在我的网站上处理它吗？

django 是否可以吐出用户指定的自定义表单？

编辑：如果 django 太“锁定”了，你会推荐我做什么？我想和python呆在一起。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T18:30:19.417

像[http://code.google.com/p/django-forms-builder](http://code.google.com/p/django-forms-builder)或数百万个类似插件之一？

（应OP的要求作出回答）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T17:56:57.373

为此，您将拥有某种可以创建 html 字符串的编辑器。该字符串将存储到您的数据库中，然后根据请求您将其显示在用户的站点上。

编辑器应该对它可以添加的内容和用户可以控制的内容非常严格，有一些可用的 JavaScript 编辑器可以提供此功能。

我能想到的唯一问题是，当显示到页面时，您可能会遇到 django 转义表单。

# java - Java 线程的意外行为

> ID：12183731
> 
> 赞同：2
> 
> 时间：2012-08-29T17:53:29.690
> 
> 标签：java, multithreading

[我在回答这个问题](https://stackoverflow.com/questions/12183212/return-a-variable-value-to-main-on-button-click/12183457#12183457)时遇到了这个有趣的情况。

试试这段设计不佳的代码 -

```
import javax.swing.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

class abc extends JFrame implements ActionListener
{

boolean button_clicked = false;
JButton b1;

abc(){
    this.setSize (400, 400);
    this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    this.createUI();
}

void createUI(){
    this.setLayout(null);
    b1 = new JButton("Click here");
    b1.setSize(110,30);
    b1.setLocation(10,210);
    this.add(b1);
    b1.addActionListener(this);
}

public boolean isButton_clicked()
{
    return button_clicked;
}

public void setButton_clicked(boolean button_clicked) {
    this.button_clicked = button_clicked;
}

public void actionPerformed(ActionEvent arg0) {
    button_clicked = true;
}

} 
```

这是主要方法。

```
class tempMain extends JFrame
{

public static void main(String[] args) throws Exception
{
    abc temp = new abc();
    temp.setVisible(true);
    while(true)
    {
    //  Thread.sleep(200);
        if(temp.isButton_clicked())
        {
            JOptionPane.showMessageDialog(null, "Hello");
            temp.setButton_clicked(false);
        }
    }
}
} 
```

当我在我的 Windows 7 机器上运行它时，在单击按钮后至少大约一分钟（我没有等待）之后没有发生任何事情。

现在，只需做一点小改动——

```
 Thread.sleep(200); // uncomment this from the main. 
```

令人惊讶的是，它可以正常工作并显示 JOptionPane 消息。为什么第一次没有显示消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T17:57:34.860

> 令人惊讶的是，它可以正常工作并显示 JOptionPane 消息。为什么第一次没有显示消息？

`button_clicked`未标记为`volatile`并且正在从与主线程不同的线程更新。由于回调是从事件处理程序线程进行的，因此主线程不会看到更新，除非`button_clicked`定义为`volatile boolean`. 进入睡眠状态可能允许跨越内存屏障并`button_clicked`幸运地在主线程中更新。

这里有一些[关于 volatile](http://www.javamex.com/tutorials/synchronization_volatile.shtml)的更多信息，以及为什么在我们处理多个线程时它很重要。

* * *

另一个问题是您有一个无限循环，它正在向`System.out`. 这会在一段时间后完全阻塞，因为控制台无法快速显示行，这会停止检查点击。

# oracle-adf - ADF - 无法从 af:iterator 的“var”读取声明性组件的视图 ID

> ID：12183735
> 
> 赞同：0
> 
> 时间：2012-08-29T17:53:50.533
> 
> 标签：oracle-adf

我面临一个奇怪的问题，当我将 af:iterator 的“var”分配给声明性组件的视图 ID 时，它说“从 viewId 表达式中遇到 null：#{row}”

页面显示空白。

我的 JSPX 代码如下：

```
<af:iterator value="#{pageFlowScope.stageBean.pathList}" var="row">

<af:outputText value="#{row}" id="ot1"/>

<af:declarativeComponent viewId="#{row}"/>

</af:iterator> 
```

Java bean中getter的代码片段如下：

```
public List<String> getPathList()
{
List<String> pathList = new ArrayList<String>();
pathList.add("/Test.jspx");
return pathList;
} 
```

这里奇怪的是输出文本正在打印路径 /Test.jspx 但声明性组件无法识别它。它显示空白页和日志，错误显示“从 viewId 表达式中遇到 null：#{row}”

如果我从 viewId 中删除 #{row} 并手动给出 viewId = "/Test.jspx" ，它会正确显示页面。

谁能帮我解决这个问题？

问候，拉克什。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T05:37:27.233

我记得 Oracle 论坛上的这个问题，我不确定是否可以标记声明性组件（这就是 af:iterator 布局其子级的方式）。你可以试试 af:forEach 吗？

坦率

# css - 在 CSS 中使用小数时是否应该包含前面的 0？

> ID：12183736
> 
> 赞同：0
> 
> 时间：2012-08-29T17:53:56.913
> 
> 标签：css

在 CSS 中使用小数时，以下哪项是首选？

填充：0.9em；

或者

填充：0.9em；

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T17:55:23.543

无论您和您的团队已决定将哪种格式作为降低复杂性和提高可读性的标准。

# php - 在 JavaScript 中使用 HTML 变量

> ID：12183737
> 
> 赞同：0
> 
> 时间：2012-08-29T17:53:58.793
> 
> 标签：php, javascript

> **可能重复：**
> [将 PHP 字符串传递给 Javascript 变量（包括转义换行符）](https://stackoverflow.com/questions/168214/pass-a-php-string-to-a-javascript-variable-including-escaping-newlines)

假设有一些 PHP 文件称为`scheduler.php`. 它包含一个脚本

```
<script>
window.setInterval(function(){
    find_opt_schedule();
}, 60000);
</script> 
```

...和一些 PHP 代码：

```
<form action="scheduler.php" method="post">
    <select name="refresh" id="refresh">
            <option value="30000">30000</option>
            <option value="60000" selected>60000</option>
            <option value="120000">120000</option>
    </select>
</form> 
```

如何使用用户从`refresh`脚本内的选择列表中选择的值？特别是，我想将 60000 替换为用户必须从列表中选择的变量。我试过这个，但是刷新率非常高，而不是 60000 毫秒。

```
window.setInterval(function(){
    find_opt_schedule();
    alert(<?php echo (int)$_POST['refresh']; ?>);
}, <?php echo (int)$_POST['refresh']; ?>); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T17:58:33.307

您的值应该是 (30000, 60000, 120000)，而不是 (0, 1, 2)。POST 字段包含所选选项的*值*，而不是文本。

注意：您应该能够通过检查生成的 HTML 文档的来源来弄清楚这一点。“1”应该像拇指酸痛一样突出。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T17:55:07.390

```
<select name="refresh" id="refresh">
    <option value="30000">30000</option>
    <option value="60000" selected>60000</option>
    <option value="120000">120000</option>
</select>   

window.setInterval(function(){
    find_opt_schedule();
}, <?php echo (int)$_POST['refresh']; ?>); 
```

并确保您使用：

```
<form action="yourscript.php" method="post" name="form" id="form"> 
```

还有一个提交按钮或javascript：

```
<select name="refresh" id="refresh" onchange="form.submit()">

<input type="submit" value="Set refresh"/> 
```

总之，使用会话存储：

```
<?php 
 session_start();
 if( isset( $_POST['refresh']) ){
   $_SESSION['refresh'] = (int) $_POST['refresh'];
 }
 ?>

<script type="text/javascript">
 window.setInterval(function(){
    find_opt_schedule();
}, <?php echo isset($_SESSION['refresh'])?$_SESSION['refresh']:120000; ?>);
</script>

<form action="scheduler.php" method="post" name="form" id="form">
  <select name="refresh" id="refresh" onchange="form.submit()">
    <option value="30000">30000</option>
    <option value="60000" selected="selected">60000</option>
    <option value="120000">120000</option>
 </select>  
 <input type="submit" value="Set refresh"/>
</form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T18:01:48.687

使用 JQuery：

```
<html>
<body>

<select name="refresh" id="refresh">
    <option value="30000">30000</option>
    <option value="60000" selected>60000</option>
    <option value="120000">120000</option>
</select>

<script type="text/javascript" src="jquery.js"></script>          
<script type="text/javascript">                                         
    function setInterval(refresh_rate)
    {
        window.setInterval(function(){
          find_opt_schedule();
        }, refresh_rate);
    }

    $(function(){
         $('#refresh').change(function () {setInterval($(this).val());});
    }
</script>  

</body>
</html> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-29T17:57:11.600

嗯...这只是普通的 HTML。您只需要阅读它并根据需要调整超时：

```
<script>
  (function() {
    var start = new Date().getTime(),
        selector = document.getElementById('refresh');
    setInterval(function() {
      // check if timer has run out
      var now = new Date().getTime();
      if( now-start > selector.value) {
        find_opt_schedule();
        start = now;
      }
    },1000);
  })();
</script> 
```

# box-api - 身份验证令牌在 10 秒内而不是 10 分钟内到期

> ID：12183741
> 
> 赞同：1
> 
> 时间：2012-08-29T17:54:24.970
> 
> 标签：box-api

我们目前有一个使用盒子 API 的实现。我们的身份验证过程遵循此处概述的过程：

[http://developers.box.com/get-started/#authenticating](http://developers.box.com/get-started/#authenticating)

在最近的某个时候，这已经停止工作。当我们访问 oauth URL（例如[https://www.box.net/api/1.0/auth/rev37d850p6pixlemm5ok8doxj2g77kg](https://www.box.net/api/1.0/auth/rev37d850p6pixlemm5ok8doxj2g77kg)）时，它最初会显示登录凭据页面，但比用户可以合理地输入他们的凭据更快页面开始返回“过期票”。如果我在创建令牌后立即进入令牌页面，我可以在页面进入“过期票证”状态之前重新加载页面几次。这显然与文档中规定的预期 10 分钟到期时间不一致。

到目前为止，我们已经让这种身份验证正常工作，所以似乎有些事情发生了变化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T09:55:53.563

我们的安卓应用也有同样的问题。据我调查，使用 get_auth_token API 会导致票证过期。因此，在尝试获取身份验证令牌之前，您必须确保用户已成功登录（Box SDK for Android 并非如此）。但是我看不到检查用户是否已登录的可行方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T00:10:22.890

我们正在调查。一旦我们有一些额外的信息，更多的新闻。

新信息>> 我们已经确定了这个错误，并将在今天下午进行修复。

该修复程序已推出。如果您仍然遇到任何 SSO 问题，请告诉我们。

# jquery - 当图像链接到其内容时，创建一个链接以在 Colorbox 中显示视图的图像

> ID：12183742
> 
> 赞同：0
> 
> 时间：2012-08-29T17:54:28.323
> 
> 标签：jquery, drupal, drupal-views, colorbox

我有一个显示来自某些内容节点的图像字段（以及其他字段）的视图。我希望图像字段链接到内容节点，因此我将其格式化程序设置为 Image 并将其链接到节点。但是，我想在视图页面（可能在视图标题区域）上有一个附加链接，它将在颜色框中显示页面上的所有图像。

我尝试向视图显示的所有图像添加“rel”标签，然后将标题区域中的链接配置为具有“colorbox”类和与图像匹配的 rel 标签和 src 属性集从视图的第一行到图像的 URL，但是我在颜色框中得到的只是那个单一的图像，而不是页面上的其余图像。

我对这一切如何运作的理解有点天真，并且希望获得有关如何使其运作的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T19:58:23.493

我会通过提出两种观点来解决这个问题。如您所描述的主列表视图，然后是带有块显示的第二个视图，该视图仅列出带有颜色框样式插件的图像。

这假设您不需要将两个视图捆绑在一起只是相同的内容。两个视图都可以提取相同的参数，因此应该保持它们完全同步。

# python - Pyside 程序锁定以响应复选框单击

> ID：12183744
> 
> 赞同：2
> 
> 时间：2012-08-29T17:54:50.657
> 
> 标签：python, qt4, pyside

我有一个非常奇怪的问题。每当检查 QCheckBox 时，它都会按预期调用 drawall。但是，当drawall完成时，它会完全挂起。单击时我尝试直接调用drawall（版本2），但没有运气，结果是一样的。

```
scene = QGraphicsScene(0, 0, 500, 500)

class SurrogateBeat(QGraphicsItem):
    def __init__(self,beat,top):
        super(SurrogateBeat, self).__init__()
        print "Init"

class Test(QWidget):
    def __init__(self):
        self.drawAll = QCheckBox("Draw all frames on screen",self)
        self.drawAll.stateChanged.connect(self.onDrawAllClicked)

    def onDrawAllClicked(self):                #Version 1
        QTimer.singleShot(0, self.drawall)

    def onDrawAllClicked(self):                #Version 2 (neither work)
        self.drawall()

    def drawall(self):
        if self.drawAll.checkState() ==  Qt.CheckState.Checked: 
            self.surrogates=[]
            for b in range(0,len(self.item.beats)):
                print "Loop"
                surrogate = SurrogateBeat(b, self.item)
                scene.addItem(surrogate)
                self.surrogates.append(surrogate)
            scene.update()
            print "Update" 
```

Loop 打印了 16 次，SurrogateBeat 的**init**打印出来，所以它被调用了，但是在“Update”打印出来之后，程序被挂起。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T20:16:16.363

[`QGraphicsItem`](http://doc-snapshot.qt-project.org/4.8/qgraphicsitem.html)是一个抽象基类。

至少，您的`SurrogateBeat`子类需要重新实现[`boundingRect`](http://doc-snapshot.qt-project.org/4.8/qgraphicsitem.html#boundingRect)and[`paint`](http://doc-snapshot.qt-project.org/4.8/qgraphicsitem.html#paint)函数。

# apache - 如何配置apache禁止用户访问www文件夹中的一些文件和目录

> ID：12183750
> 
> 赞同：0
> 
> 时间：2012-08-29T17:55:07.967
> 
> 标签：apache

我已经完成了我的网站，但有一件事让我印象深刻。用户可以通过操作 url 访问 www/ 目录中的所有子目录。

例如。我在 www 中有一个名为 secret 的文件夹，还有一个名为 start.txt 的文件。我网络中的用户可以通过键入 url/secret 或 url/start.txt 来访问和查看这些内容。

这怎么能禁止？？

一种解决方案肯定是将所有这些移到 www 目录之外的一些其他目录中。但是现在这需要大量的努力。

而且我觉得也有办法通过修改 httpd.conf 文件。请有人帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T18:00:37.687

我认为您可以拒绝访问某些文件类型。

请检查此链接。 [http://www.ducea.com/2006/07/21/apache-tips-tricks-deny-access-to-certain-file-types/](http://www.ducea.com/2006/07/21/apache-tips-tricks-deny-access-to-certain-file-types/)

希望这会帮助你。

# dependencies - 使用 zypper 生成反向依赖项

> ID：12183757
> 
> 赞同：12
> 
> 时间：2012-08-29T17:55:38.933
> 
> 标签：dependencies, opensuse, package-managers, meego, zypper

使用`zypper`，我可以得到包 A 依赖于包 B。但是，我需要知道哪些包依赖于包 B。

有没有办法生成反向依赖列表？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2015-11-19T11:34:13.650

您可以搜索（缩写为“se”）需要特定包的包：

> zypper se --需要包名

此外，您只能在已安装的软件包中搜索：

> zypper se -i --需要包名

例如，要查找需要 libpng 的软件包：

```
# zypper se -i --requires libpng
Loading repository data... 
Reading installed packages...
S | Name                        | Summary                                                             | Type   
--+-----------------------------+---------------------------------------------------------------------+--------
i | DirectFB                    | Graphics Library for Framebuffer Devices                            | package
i | MPlayer                     | Multimedia Player                                                   | package
i | cairo-devel                 | Development environment for cairo                                   | package
etc. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T16:28:18.793

假设您想知道谁依赖于 libpng14

在 tcsh 中：

```
zypper search -i | cut -d \| -f 2 | tr -s '\n' ' ' > z.txt
foreach i ( `cat z.txt` )
  zypper info --requires $i |grep libpng14 &&echo $i
end 
```

过一会儿，您将开始得到如下结果：

```
libpng14.so.14()(64bit)
libpng14.so.14(PNG14_0)(64bit)
DirectFB
libpng14.so.14()(64bit)
libpng14.so.14(PNG14_0)(64bit)
MPlayer 
```

但是，您需要将包与 grep 消息分开。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T23:52:35.943

如果已经安装，可以使用 rpm --whatrequires：

```
--whatrequires CAPABILITY
        Query all packages that require CAPABILITY for proper functioning.
        Note that this does not return what requires a given package. 
```

如果没有，你[我们]现在不走运。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-28T13:17:25.440

Zypper 1.14.33+`--requires-pkg`可能会产生比`--requires`. 有关详细信息，请参见[此处](https://github.com/openSUSE/zypper/issues/214)。

```
# zypper se --requires-pkg packagename

# zypper help search | grep -A1 requires-pkg
--requires-pkg          Search for all packages that require any of the provides of the
                        package(s) matched by the input parameters. 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-06-24T06:14:26.633

这有效：

```
rpm -e --test PKGNAME 
```

资料来源：*man rpm*

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2020-09-18T09:56:42.837

我希望它有用：

```
betatester@myryzen:~/tmp> rpm -qi --requires \`rpm -qa | grep 'package-name'\` 
```

# python - 在 Apache Pig 上使用 Numpy 和 SciPy

> ID：12183759
> 
> 赞同：1
> 
> 时间：2012-08-29T17:55:46.413
> 
> 标签：python, numpy, scipy, apache-pig

我想在 Apache Pig 中编写 UDF。我将使用 Python UDF。我的问题是我有大量数据需要分析，并且需要 NumPy 和 SciPy 等软件包。购买这个，他们没有 Jython 支持，我不能将它们与 Pig 一起使用。

我们有替代品吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T09:51:10.060

您可以通过导入 scipy 的 (C)Python 脚本进行流式传输。例如，我使用 import scipy.cluster.hierarchy 使用它来聚集包内的数据

# django - 在 AWS 弹性 beantalk 上部署 django 项目

> ID：12183763
> 
> 赞同：8
> 
> 时间：2012-08-29T17:55:59.447
> 
> 标签：django, amazon-web-services, amazon-elastic-beanstalk

我正在关注在 AWS elastic beanstalk 上部署 django 项目的教程：http: [//docs.amazonwebservices.com/elasticbeanstalk/latest/dg/create_deploy_Python_django.html](http://docs.amazonwebservices.com/elasticbeanstalk/latest/dg/create_deploy_Python_django.html)

我的应用程序在本地测试时可以工作，但在部署时出现 404 错误。查看事件日志，我看到以下消息：

`Error running user's commands : An error occurred running '. /opt/python/ondeck/env && PYTHONPATH=/opt/python/ondeck/app: django-admin.py syncdb --noinput' (rc: 127) /bin/sh: django-admin.py: command not found`

这使我相信本教程缺少有关在服务器上安装 django 文件或至少配置我的项目以识别 django-admin.py 的部分。我在本地机器上安装了 django，所以它在那里工作。

我知道 python 支持对于弹性 beantalk 来说是全新的，但是有人部署了 django 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T05:51:44.023

I believe you don't need to put container_commands in .config because there is no database or table at this moment.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-23T00:30:50.400

你做了这一步吗？：冻结 requirements.txt 文件。

```
(djangodev)# pip freeze > requirements.txt 
```

注意确保您的 requirements.txt 文件包含以下内容：

```
Django==1.4.1
MySQL-python==1.2.3 
```

我有同样的问题，因为我跳过它。完成后，添加、提交和推送。有用！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-19T14:20:23.473

如果可以，您应该尝试访问日志文件；它可能会让您更好地了解正在发生的事情。这是一个可能有帮助的链接：

[http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/using-features.loggingS3.title.html](http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/using-features.loggingS3.title.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-04T16:10:49.277

我最近遵循了相同的教程并得到了类似的结果。

在第 6 步，在本地看到默认的 django 'congrats' 页面呈现后，我按照指示部署到 EB 并得到 404 而不是默认的 'congrats' 页面。

我决定使用到目前为止的代码作为遵循“ [django 入门教程](https://docs.djangoproject.com/en/dev/intro/tutorial01/)”的基础，这使我成功地渲染了“home”视图。无论如何，这是一个更有用的地方。我同意 AWS 教程有问题并在[此处](https://forums.aws.amazon.com/thread.jspa?threadID=103117&tstart=0)发布到 AWS 论坛。

# .net - 为什么存在 ReachFramework 程序集？

> ID：12183769
> 
> 赞同：13
> 
> 时间：2012-08-29T17:56:24.370
> 
> 标签：.net, interop, .net-4.5

令人惊讶的是，我没有找到任何关于 ReachFramework 程序集存在原因的权威信息。我注意到它包含有用的类和构造，可以对来自托管世界的非托管代码执行互操作。

但是，为什么会存在 ReachFramework 呢？

# php - 在 laravel 中存储和检索常量

> ID：12183772
> 
> 赞同：4
> 
> 时间：2012-08-29T17:56:33.863
> 
> 标签：php, laravel

我刚刚开始使用来自 codeigniter 的 laravel，我正在尝试找出定义一系列常量的最佳方法。CI 在 app/config 下使用了一个常量文件夹，对于大多数事情，我对这种方法非常满意，但希望得到有关在 Laravel 中执行此操作的最佳方法的建议。

我的常量分为 3 类，如果可能的话，我想就如何最好地存储和检索每个类提供建议（请记住，我对 Laravel 完全陌生。

**类型 1**：每次调用控制器时都需要加载的常量：例如，我想首先定义一个常量来告诉我用户是否通过 ajax 请求内容，这就是我以前在 CI 常量文件中所做的： `define('IS_AJAX', isset($_SERVER['HTTP_X_REQUESTED_WITH']) && strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) == 'xmlhttprequest')`

**类型 2**：可由用户更改的常量：这些常量最好存储在数据库中还是写入配置文件是更好的选择？再次寻找有关如何存储和检索的建议

**类型 3**：仅在特定控制器中需要的常量：理想情况下，我希望能够将常量分组到数组或单独的文件中，并根据需要将它们分组取出。例如，我可以为我的上传控制器检索我的上传设置。

感谢您提前提供任何帮助/建议 - 示例将不胜感激

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-07T06:58:39.760

**类型 1** 您可以在 Bundle（或应用程序）的 start.php 文件中添加任何常量。

**类型 2 和 3** 我建议使用 Config 来满足这两个要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-05T03:16:06.160

我的解决方案是在 app/config 文件夹中创建一个名为“constants.php”的文件 app/config/constants.php

里面的代码是数组的方式。

"某个值", 'c2'=>"某个值" ); ?>

然后在每个控制器内部，您可以使用 Config::get('constants.c1'); 检索

我认为这是一种简单的方法，它更具可扩展性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-06T10:34:21.247

```
<?php
//file : app/config/constants.php

return [
    'IS_AJAX' => isset($_SERVER['HTTP_X_REQUESTED_WITH']
]; 
```

在任何地方：

```
echo Config::get('constants.IS_AJAX'); 
```

# java - 如何读取 EAR 中部署的文件

> ID：12183773
> 
> 赞同：1
> 
> 时间：2012-08-29T17:56:34.543
> 
> 标签：java, jakarta-ee, web-applications, war, ear

如何读取在 EAR 或 WAR 中作为资源部署的文件？

我想创建一个新的 FileInputStream 调用下面的构造函数。

```
java.io.FileInputStream.FileInputStream(String) 
```

但是我要读取的文件位于 WAR 文件内的路径“/glm/src/main/resources/excel_templates”上。

是否可以使用基于 EAR 或 WAR 的文件路径创建 FileInputStream？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T18:02:31.470

尝试这样的事情：

```
URL url = SomeClassInEar.getClass().getClassLoader().getResource("rootDirInEar/SubDir/fileInEar.whatever");
File file = new File(url.getPath());
FileInputStream fis = new FileInputStream(file); 
```

# c++ - 关于结构填充

> ID：12183780
> 
> 赞同：4
> 
> 时间：2012-08-29T17:56:58.413
> 
> 标签：c++, struct, padding, packet

假设我们有一个数据包

```
struct Foo
{
    short size; // 2
    short type; // 2
    BYTE  data; // 1
    //1 byte padding not 3?
}; 
```

编译后它的长度为 6 个字节，并在结构的末尾添加了 1 个字节的填充。编译器不应该添加 3 个字节的填充以使结构大小为 8 个字节长吗？因为 32 位 cpu 喜欢访问 4 字节块中的数据

顺便说一句，#pragma pack(1) 它有 5 个字节长，正如预期的那样。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-29T17:58:58.267

您的`struct`contains`short`意味着这些可能需要在两个字节边界上对齐。如果您要创建没有填充的此结构的数组，则每个其他元素都会以短裤不正确对齐而告终，这可能会崩溃或变慢。

填充物的存在是为了安全和性能。在某些架构上，未对齐的读取会导致崩溃。因此编译器填充结构，使其成员在可除以它们的大小的地址上对齐。除此之外，编译器几乎没有理由添加*额外的*填充来将整个结构对齐在本机单词边界上。所以它只会在你的情况下添加一个字节。

尝试`int`在你的结构中有一个。这应该将填充更改为具有额外的 3 个字节的填充。`int`在两个字节之间也有in 将在字节*之间*进行填充。

编译器可以自由地对填充进行任何选择，除非您明确指定打包。不同的架构和不同的编译器会发生不同的事情。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-29T18:00:24.657

您已经在 1 和 2 字节增量中访问内存，`struct`因此通过将结构对齐 6 字节与 8 字节，您不会进一步损害性能，因此编译器选择节省空间。如果您只是从不对结构对齐做出假设并让编译器做正确的事情，那么您在实践中就不必担心它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-29T18:03:52.517

> 因为 32 位 cpu 喜欢访问 4 字节块中的数据

不完全是。严格来说，当您访问的变量为字节长且变量地址为-bytes 对齐时，内存访问是*对齐*的（因为您在这里谈论对齐） 。 所以这并不意味着它是 4 字节对齐的。在您声明类型且数据范围为 2 个字节的情况下，可能是 2 个字节对齐。 `N``N`
`short`

# ruby-on-rails - 在 formtastic 中排序accept_nested_attributes_for

> ID：12183784
> 
> 赞同：1
> 
> 时间：2012-08-29T17:57:09.947
> 
> 标签：ruby-on-rails, nested-attributes, formtastic

我正在尝试使用 formtastic 来呈现嵌套表单。我的父模型中有 has_many/accepts_nested_attributes_for 设置。一切都很好。唯一的问题是我想对嵌套模型的顺序进行排序。

```
# this works but i want answers sorted a certain way
= semantic_form_for survey do |f|
  = f.inputs :for => :answers do |answer_form|
    = answer_form.input :content 
```

如果我尝试做类似的事情：

```
# form styles become extremely messed up but the order is correct
= semantic_form_for survey, do |f|
  = f.semantic_fields_for :answers, f.object.answers.joins(:question).order('questions.position') do |answer_form|
    = answer_form.input :content 
```

我什至尝试使用 :finder_sql 和 :class 创建一个名为 :sorted_answers 的“假” has_many 关系，但这也不起作用（answer_form 为 nil IIRC）。

我想我要问的是我是否可以使用 :for => (relationship) 但指定关系的顺序。也许使用：for_options？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-20T07:59:59.230

我遇到了你同样的情况，这是我的解决方案：

您应该有一个名为“Answer”的模型，在 default_scope 中设置顺序：

```
class Answer < ActiveRecord::Base

  default_scope :order => "id"

end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-09T08:03:19.553

使用formtastic 3.1.3，这对我有用

```
f.input :answers, as: :check_boxes, :member_label => :some_column, collection: Answer.order(:some_column) 
```

需要注意的是集合必须是 ActiveRecord_Relation 类而不是数组，因为 Formtastic 是 activerecord-ish

# actionscript-3 - Flex String 到 HTML 用于解析 DOM

> ID：12183788
> 
> 赞同：0
> 
> 时间：2012-08-29T17:57:14.877
> 
> 标签：actionscript-3, apache-flex, air, flash-builder

我有一个字符串：

```
private str:String = '
<!DOCTYPE html>
<html>
<body>
<div>TEST</div>
<span id="t1">T1 Content</span>
<span class="t2">T2 Content</span>
</body>
</html>'; 
```

我想解析字符串。接下来，我通过 Object、ID 或 Class 获得 innerHTMl。

例如：

```
Objects: Body, Div, Span
IDs: t1
Classes: t2 
```

[在带有类](http://simplehtmldom.sourceforge.net/)的PHP中，这很容易。但我无法使用 Flex 创建这个版本。

感谢帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T18:26:12.273

将其转换为 as3 中的原生 XML，然后使用 e4x 解析所需的信息：

```
var xml:XML = XML(str);

//trace the content of any span with the id of "t1"
trace(xms..span.(attribute("id") == "t1"));

//trace the content of any span with the class t2
trace(xml..span.(attribute("class") == "t2"));

//trace the contents of the first div
trace(xml..div[0]); 
```

有关 e4x 的更多信息，这是一个很好的入门： [http ://www.senocular.com/flash/tutorials/as3withflashcs3/?page=4](http://www.senocular.com/flash/tutorials/as3withflashcs3/?page=4)

# asp.net - 如何向 sql 成员资格提供程序添加属性以注册用户

> ID：12183790
> 
> 赞同：1
> 
> 时间：2012-08-29T17:57:16.433
> 
> 标签：asp.net, sql, asp.net-mvc, sqlmembershipprovider

我正在使用 sql 会员提供程序，并且我想在用户注册时添加运输信息......用户需要输入运输信息。解决这个问题的最佳方法是什么/如果可能的话我该怎么做？

```
public class RegisterModel
{
    [Required]
    [Display(Name = "User name")]
    public string UserName { get; set; }

    [Required]
    [DataType(DataType.EmailAddress)]
    [Display(Name = "Email address")]
    public string Email { get; set; }

    [Required]
    [StringLength(100, ErrorMessage = "The {0} must be at least {2} characters long.", MinimumLength = 6)]
    [DataType(DataType.Password)]
    [Display(Name = "Password")]
    public string Password { get; set; }

    [DataType(DataType.Password)]
    [Display(Name = "Confirm password")]
    [Compare("Password", ErrorMessage = "The password and confirmation password do not match.")]
    public string ConfirmPassword { get; set; }
} 
```

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T18:11:26.757

会员提供者仅用于基本信息。ASP.NET 也有类似 ProfileProvider 的东西。随 ASP.NET 提供的开箱即用版本将 XML 信息与 Membership Provider 的数据一起存储在数据库中。

经典教程：[http ://www.4guysfromrolla.com/articles/101106-1.aspx](http://www.4guysfromrolla.com/articles/101106-1.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T19:00:32.210

我刚刚回答了同样的问题。请看[这里](https://stackoverflow.com/questions/12099482/asp-membership-tables-add-new-property-to-user/12100758#12100758)

希望对你有帮助

# html - 在 div 内居中未知宽度的 div

> ID：12183792
> 
> 赞同：3
> 
> 时间：2012-08-29T17:57:24.753
> 
> 标签：html, css

我有一个包装器 div 元素，其中包含一个 div，而该 div 又包含内部的 div；这些 div 在运行时添加或删除。HTML 和 CSS 如下所示：

```
​&lt;div id="Wrapper">
   <div class="InnerGreen">
       <div class="InnerContent"></div>
       <div class="InnerContent"></div>
   </div>    
</div>

​#Wrapper{
     width:600px;
     height:50px;  
     margin:10px 20px;    
     background:blue;}

.InnerGreen{
     background:green;
     margin:10px auto; // this doesn't center
     overflow:hidden;
     display:inline-block;}

.InnerContent{
     background:yellow;
     height:30px;
     width:40px;
     float:left;
     margin:3px 5px;} 
```

我`inline-block`用来包裹`.InnerGreen`里面`Wrapper`; 但是，`margin:auto`似乎并没有将 div 水平居中。当然，如果我定义了宽度，这可行，`.InnerGreen`但实际上，`.InnerContent`div 是所有不同大小的 div 的集合，因此我无法`.InnerGreen`在运行时设置宽度。

我怎样才能完成这项`margin:auto`工作？这里是[jsfiddle](http://jsfiddle.net/f6XYk/)。

感谢您的建议。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-29T18:01:21.513

内联元素没有边距。通过告诉`.InnerGreen`充当`inline-block`，您实际上是在告诉它在定位方面充当内联。另一方面，您仍然可以使用 text-align 将其居中：

```
#Wrapper {
    text-align: center;
} 
```

请参阅[更新的 JSFiddle](http://jsfiddle.net/f6XYk/6/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T18:01:35.370

从技术上讲，这可能不是正确的方法，但您可以放在`text-align:center`包装器 div 上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-29T18:12:50.650

据我所知，如果无法确定元素的宽度，则不能使用 margin:auto 方法。它并不完全优雅，但您可以使用居中的表格完成此操作：

```
<center>
   <table>
    <tr><td align="center">
       <div>This will be centered.</div>
    </td></tr>
   </table>
</center> 
```

使用您的代码：http: [//jsfiddle.net/MaxPRafferty/yA7Nm/](http://jsfiddle.net/MaxPRafferty/yA7Nm/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T18:13:03.490

您可以使用 jquery 将 div 居中，类似于...

```
<script type="text/javascript">

    $(function() {
        var containerWidth = $(".InnerGreen").width();
        $(".InnerGreen).css("width", containerWidth);
    });
</script> 
```

然后，您的边距 CSS 设置应该完成其余的工作。

您可能还想为您的样式添加 height:auto ，就像您在运行时添加内部内容一样，它将更好地控制元素的增长。

# xcode - 自定义 MKAnnotations 有时不显示

> ID：12183793
> 
> 赞同：0
> 
> 时间：2012-08-29T17:57:28.433
> 
> 标签：xcode, ipad, mkmapview, mkannotation

我有一个 iPad 应用程序，它显示了一张包含大约 5000 个 POI 的地图，分为大约 6 个类别。我使用的是自己的注释图像，而不是红色别针。我为每个类别使用不同的图像。

一切似乎都运行良好，但是当我的客户在她的设备上对其进行测试时，她看到了一些 POI 由红色引脚而不是自定义图像显示的情况。她给我发了一张屏幕图片，我可以看到有些图标是正确的，有些是红色的。她发送的屏幕截图上的所有 POI 都属于同一类别，因此使用相同的图像，所以我知道这不是一个坏图像的情况。

有没有人遇到过这个？会不会是某种内存问题？我无法在我的设备上重现它。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T19:19:41.143

您需要向我们展示一些代码。我认为 viewforAnnotation 方法是最好的起点。也许在某些情况下，它不了解类别并且没有给它您的自定义图像。类别是如何设置的？您是否有任何调试代码证明它们在所有注释上设置正确？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T10:35:25.637

你必须确保它像这样 MKAnnotationView 而不是 MKPinAnnotationView

`static NSString* AnnotationIndentifer = @"AnnotationIdentifier"; MKAnnotationView* pinView = [[MKAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:AnnotationIndentifer];`

# solr - 用于部分文档更新的 solrj api

> ID：12183798
> 
> 赞同：27
> 
> 时间：2012-08-29T17:57:50.990
> 
> 标签：solr, solrj

Solr 4 beta 已经发布，GA 版本即将推出。部分文档更新已经存在了一段时间，如下所述：http: [//solr.pl/en/2012/07/09/solr-4-0-partial-documents-update/](http://solr.pl/en/2012/07/09/solr-4-0-partial-documents-update/)

但是，我还没有弄清楚如何使用 solrj api 来做到这一点。

有谁知道 solrj 是否可行？或者 solrj 只是没有跟上这个功能？

**更新：**正如我在邮件列表中描述的（请参阅[此处](http://mail-archives.apache.org/mod_mbox/lucene-solr-user/201209.mbox/%3C7E0464726BD046488B66D661770F9C2F01B02EFF0C@TLVMBX01.nice.com%3E)的回复），我发现在 solrj api 中，SolrInputField 的值可以是一个映射 - 它不必是一个简单的标量值。如果是地图，solrj 会`update`在字段的 xml 元素中添加一个附加属性。例如，这段代码：

```
SolrInputDocument doc = new SolrInputDocument();
Map<String, String> partialUpdate = new HashMap<String, String>();
partialUpdate.put("set", "foo");
doc.addField("id", "test_123");
doc.addField("description", partialUpdate); 
```

产生这个文件：

```
<doc boost="1.0">
    <field name="id">test_123</field>
    <field name="description" update="set">foo</field>
</doc> 
```

在这个例子中，我为这个附加属性使用了“set”这个词，但它不起作用。Solr 没有像我预期的那样更新该字段。根据此链接： [http](http://solr.pl/en/2012/07/09/solr-4-0-partial-documents-update/) ://solr.pl/en/2012/07/09/solr-4-0-partial-documents-update/ 有效值为“设置”和“添加”。

任何的想法？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-09T18:50:58.527

事实证明，问题中上面显示的代码片段确实有效。我第一次尝试时不知道出了什么问题，也许我只是忘记提交或者我的架构配置错误。

无论如何，这个问题是非常本地化的。但是，由于带有哈希映射的 api 的文档记录很差，我认为也许值得保留这个问题和答案。

哈希映射的键可以是三个值之一：

*   set - 设置一个字段。
*   add - 添加到多值字段。
*   inc - 增加一个字段。

在 solrj 单元测试中有一个此代码的示例，在一个名为`testUpdateField`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-18T06:13:48.930

您可以使用 SOLR API 的更新端点更新部分文档

```
curl 'https://solr-url/update?commitWithin=1000&overwrite=true&wt=json' \
    -X POST \
    -H 'accept: application/json, text/plain, */*' \
    --data-raw '[{ "the-unique-filed": "value", "field-to-change":{"set": "new-value"} }]' \
    --compressed 
```

### 或者从 UI

[![在此处输入图像描述](../Images/814fa4aaf2cc4389b9c931ba055aa840.png)](https://i.stack.imgur.com/wi1AD.png)

# c# - 如何将 TextBox 中的值作为参数传递给 Action

> ID：12183799
> 
> 赞同：2
> 
> 时间：2012-08-29T17:57:59.180
> 
> 标签：c#, asp.net-mvc, razor

这是我的想法，但它当然不起作用。

```
@{
    var textBoxData = form.find('input[name="textboxList"]').val();
 } 
<input type="button" value="Add"  title="Add"  onclick="location.href='@Url.Action("Create_Add", "Controller", new { textboxList = textBoxData })'" /> 
```

我应该如何通过这个？控制器动作名称和参数正确。只是我不知道如何获取在文本框中输入的值...

我无法在表单中保存表单，所以有人建议了这个解决方案。代理代码将是：

```
<firstForm>
   textboxfor Name
   dropdownfor DType

   If DTypeDDL value is "List" then
       <secondForm>
            textboxfor nameOfItem
            submitSecondForm (using that method i mentioned above)
       </secondForm>
   End If

   submitFirstForm
</firstForm> 
```

我一直在尝试保存 2 个表格，但没有运气。这基本上是我最后的手段。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T18:08:19.047

首先，您应该使用面向视图模型的 html 文件，因为您使用的是 MVC（*模型*、视图、控制器）：

创建一个视图模型：

```
public class ExampleViewModel
{
    public ExampleViewModel()
    {
    }

    public virtual string TextBoxData { get; set; }
} 
```

之后，使用 viewmodel 作为模型对您的 html 进行编码：

```
@model Models.Views.ExampleViewModel
@using (Html.BeginForm())
{
<div class="editor-row">
        <div class="editor-label">
            @Html.LabelFor(model => model.TextBoxData)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.TextBoxData)
        </div>
</div>
<input type="submit" value="submit" />
} 
```

和你的控制器：

```
public ActionResult Example()
{
    ExampleViewModel model = new ExampleViewModel();
    return This.View(model);
}

[HttpPost]
public ActionResult Example(ExampleViewModel model)
{
    string infoEntered = model.TextBoxData;
    // Do something with infoEntered
} 
```

希望对你有帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T18:08:18.570

如果您使用的是视图模型，请查看以下答案：[MVC 从视图发送数据到控制器](https://stackoverflow.com/questions/12181287/mvc-sending-data-from-view-to-controller/12181445#12181445)

如果您只想将数据从输入发送到没有视图模型的操作方法，您也可以这样做：

看法：

```
@using (Html.BeginForm("Edit", "Some", FormMethod.Post))
{
    <input type="text" id="myTextBox" name="myTextBox" />
    <input type="submit" value="Submit" />
} 
```

注意 BeginForm 行。第一个参数是我希望数据转到的 Action，我将其命名为 Edit。下一个参数是我正在使用的控制器，我将其命名为 SomeController。当您在 BeginForm 中引用控制器时，您不会将控制器位添加到名称中。第三个参数告诉表单在向服务器发送数据时使用 POST 方法。

控制器：

```
public class SomeController
{
    [HttpPost]
    public ActionResult Edit(string myTextBox)
    {
        // Do what you want with your data here.
    }
} 
```

如果您添加了更多输入（同样，这里没有视图模型），您可以将它们作为参数添加到 Edit 方法。不过，这并不是真正的首选方法。研究使用视图模型。ScottGu 有一篇关于使用视图模型做你需要做的事情的不错的博客文章：

[http://weblogs.asp.net/scottgu/archive/2007/12/09/asp-net-mvc-framework-part-4-handling-form-edit-and-post-scenarios.aspx](http://weblogs.asp.net/scottgu/archive/2007/12/09/asp-net-mvc-framework-part-4-handling-form-edit-and-post-scenarios.aspx)

# android - 已创建意图但未为我打开页面

> ID：12183800
> 
> 赞同：1
> 
> 时间：2012-08-29T17:58:02.193
> 
> 标签：android, url, browser, android-intent

activity_main.xml

```
<Button
android:id="@+id/ButtonUrl"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:text="@string/RenderBox_button">
</Button> 
```

IntentTest.java

```
package com.example.test;
import android.app.Activity;
import android.content.Intent;
import android.net.Uri;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;

public class IntentTest extends Activity {
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    Button buttonUrl = (Button) findViewById(R.id.ButtonUrl);

    buttonUrl.setOnClickListener(new Button.OnClickListener() {
        public void onClick(View view) {
            Uri uri=Uri.parse("http://www.google.com.tw");
            Intent i=new Intent(Intent.ACTION_VIEW,uri);
            startActivity(i);
        }
    });

    }
} 
```

当我运行它时，没有任何错误消息（在 Eclipse 上），但是当我单击按钮时，什么也没有发生。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T18:00:04.863

您应该像这样设置 Intent：

```
String url = "http://www.google.com.tw";
Intent i = new Intent(Intent.ACTION_VIEW);
i.setData(Uri.parse(url));
startActivity(i); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T18:00:06.647

试试这个，另外供您参考这里[是 Intent.ACTION_VIEW 的文档。](http://developer.android.com/reference/android/content/Intent.html#ACTION_VIEW)

```
String url = "http://www.example.com";
Intent i = new Intent(Intent.ACTION_VIEW);
i.setData(Uri.parse(url));
startActivity(i); 
```

# java - 如何在 JavaFX 中为窗口添加阴影？

> ID：12183801
> 
> 赞同：5
> 
> 时间：2012-08-29T17:58:08.923
> 
> 标签：java, javafx

我已经删除了主要阶段周围的默认边框：

```
stage.initStyle(StageStyle.UNDECORATED) 
```

这将删除我想要的窗口边框，但现在我想在窗口下放置一个阴影。

顶级`BorderPane`对象`dropshadow`应用了效果，但阴影被切断：

![在此处输入图像描述](../Images/73fc0e7e8dd4e5a0d2286d1190d3a67b.png)

您可以在右下角稍微看到阴影，但一旦主应用程序区域结束，阴影就会被切断。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-29T18:38:33.113

我之前为此创建了一个[示例。](https://gist.github.com/1887631/155d5e052b6ec7d0eaa6f825713f98f8e542152e)使用链接的特定版本，因为在以后的版本中我从对话框中删除了阴影效果。

该示例将舞台内容放置在包含两个窗格的 StackPane 中。阴影仅应用于背景窗格，对话框内容放置在顶部窗格中。顶部窗格的背景从底部窗格略微插入，以便背景和阴影可以透过。

进一步讨论在关于[在未装饰/透明舞台周围显示阴影](https://forums.oracle.com/forums/thread.jspa?threadID=2432612)的线程中。

![示例阴影对话框](../Images/b591e22fc727f0df69d7ae604e0dddfd.png)

# php - Twitter Bootstrap：输入附加搜索框

> ID：12183804
> 
> 赞同：2
> 
> 时间：2012-08-29T17:58:18.510
> 
> 标签：php, css, twitter-bootstrap

我正在尝试使用 Twitter Bootstrap 输入附加搜索，但它没有排列文本框和搜索按钮。我从 8 月 20 日（今天获取）开始获取 Twitter 上最新最好的 2.1 引导程序。所以像“空白：nowrap;”之类的东西 已经设置好了。

有任何想法吗？

代码：

```
<li class="dropdown">
<a class="dropdown-toggle" id="Search" role="button" data-toggle="dropdown" href="#">Search<b class="caret"></b>
</a>
<ul class="dropdown-menu" role="menu" ara-labelledby="Search">
 <form class="form-search">
  <div class="input-append">
   <input type="text" class="search-query">
   <button type="submit" class="btn"><i class="icon-search"></i></button>
  </div>
 </form>
</ul>
</li> 
```

示例图片：

![示例图像](../Images/23f4a80e3b719fff5e207f4ff8877258.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-30T00:34:57.923

您缺少正确的 doctype 声明。你需要`<!DOCTYPE html>`over `<html>`，这就是导致异常的原因。

## 小费

我还看了[http://collecthw.com/ci](http://collecthw.com/ci)，我强烈建议你使用[http://validator.w3.org/](http://validator.w3.org/)，标记中有很多错误。`<div><form></div></form>`显然不好的案例。我还可以发现多个`<body>`标签以及多个版本的 jquery。

我还认为标记与引导程序提供的完全不同。下拉菜单中的模态标记似乎不是一件合适的事情。如果您遵循[bootstrap](http://twitter.github.com/bootstrap/getting-started.html)提供的标记，并在您愿意的情况下对其进行扩展，那么一切对您来说都会变得容易得多:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T19:32:41.660

将此添加到按钮 css：`margin-top: 0;`

# c++ - 上证所加法产生垃圾

> ID：12183806
> 
> 赞同：1
> 
> 时间：2012-08-29T17:58:28.173
> 
> 标签：c++, gcc

我正在尝试将 SSE 浮点 [4] 添加与标准浮点 [4] 添加进行比较。我试过这个：

```
#include <iostream>
#include <vector>

struct Point4
{
  Point4()
  {
    data[0] = 0;
    data[1] = 0;
    data[2] = 0;
    data[3] = 0;
  }

  float data[4];
};

static float SumOfDifferences(const Point4& a, const Point4& b)
{
  // This function only returns the sum of the sum of the components
  float sumValues = 0.0f;
  for(unsigned int i = 0; i < 4; ++i)
  {
    sumValues += a.data[i] + b.data[i];
  }
  return sumValues;
}

void Standard()
{
  Point4 a;
  a.data[0] = 1;
  a.data[1] = 2;
  a.data[2] = 3;
  a.data[3] = 4;

  Point4 b;
  b.data[0] = 1;
  b.data[1] = 6;
  b.data[2] = 3;
  b.data[3] = 5;

  float total = 0.0f;
  for(unsigned int i = 0; i < 1e6; ++i)
  {
    total += SumOfDifferences(a, b);
  }

  std::cout << "total: " << total << std::endl;
}

void Vectorized()
{
  typedef int v4sf __attribute__ (( vector_size(4*sizeof(float)) ));

  v4sf a;
  float* aPointer = (float*)&a;
  aPointer[0] = 1; aPointer[1] = 2; aPointer[2] = 3; aPointer[3] = 4;

  v4sf b;
  float* bPointer = (float*)&b;
  bPointer[0] = 1; bPointer[1] = 2; bPointer[2] = 3; bPointer[3] = 4;

  float total = 0.0f;
  v4sf result;
  float* resultPointer = (float*)&result;

  for(unsigned int i = 0; i < 1e6; ++i)
  {
    result = a + b; // Vectorized operation

    // Sum the components of the result (this is done with the "total += " in the Standard() loop
    for(unsigned int component = 0; component < 4; ++component)
    {
      total += resultPointer[component];
    }
  }

  std::cout << "total: " << total << std::endl;
}

int main()
{

//  Standard();

  Vectorized();

  return 0;
} 
```

但是 Vectorized() 函数的输出是“inf”。当我使用调试器逐步完成时，“结果”的值似乎是垃圾（我希望它们是 (0, 4, 0, 1) ）。我在哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T18:28:14.033

尝试`typedef float v4sf __attribute__ (( vector_size(4*sizeof(float)) ));`
我得到 2e+07 作为结果。

# php - PHP ftp 函数不会使用绝对路径

> ID：12183813
> 
> 赞同：0
> 
> 时间：2012-08-29T17:58:53.497
> 
> 标签：php, ftp, relative-path, absolute-path

目标是使用 php 将 FTP 传输到服务器并获取目录列表。唯一的问题是我需要使用绝对路径来访问目录。

例子：

```
$host = "example.com";
$port = 21;
$connection = ftp_connect($host, $port);

ftp_login($connection, "userA", "password");
ftp_pasv($connection, true);

//user's home directory is /home/userA
print_r( ftp_nlist($connection, "logs")); //works as intended
print_r( ftp_nlist($connection, "/home/userA/logs")); //does not work 
```

真正令人困惑的部分是使用带有 ftp url 的文件系统函数给了我完全相反的问题：

```
opendir("ftp://userA:password@example.com:21/home/userA/logs"); //works
opendir("ftp://userA:password@example.com:21/logs"); //does not work 
```

由于用户/目录是由用户输入的，我不一定知道他们是要使用绝对路径还是相对（主目录）路径。我可以使用一个简单的 strstr 来检查路径中的第一个字符是否是“/”并选择要使用的方法，但是我最终会编写两倍的代码。

必须有一种更简单的方法来获得某种方法来处理绝对路径和相对路径。我希望这是一件简单的事情，我只是忽略了。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T06:39:02.063

在 /ect/vsftpd 中打开文件 vsftpd.conf： 插入行：

```
anon_root= /var/www/html 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T18:49:29.047

看起来 FTP 用户没有正确定义。没有机会联系 ftp 管理员？您没有写 FTP 在什么操作系统下运行以及在哪个 FTP 服务下，这里有两个如何设置主目录的示例：

**带有 VSFTP 的 Linux**

创建一个用户并设置他的主目录，而不是编辑`/etc/vsftpd/vsftpd.conf`：

```
# Uncomment this to allow local users to log in.
local_enable=YES

[[ snip ]]

# You may specify an explicit list of local users to chroot() to their home
# directory. If chroot_local_user is YES, then this list becomes a list of
# users to NOT chroot().
#chroot_list_enable=YES
# (default follows)
#chroot_list_file=/etc/vsftpd.chroot_list 
```

**视窗**

创建一个用户帐户，在 FTP 服务器中设置一个文件夹并授予该用户完全访问权限，并为该用户配置主页：

1.  在控制面板中，打开管理工具。
2.  双击计算机管理。
3.  展开本地用户和组，单击用户，右键单击用户名，然后单击属性。
4.  单击配置文件选项卡。
5.  确保在主文件夹下选择了本地路径，然后在本地路径框中键入适当的路径。例如，键入路径为 d:\Ftp\FolderName。

# algorithm - 事件调度贪心

> ID：12183815
> 
> 赞同：1
> 
> 时间：2012-08-29T17:58:58.353
> 
> 标签：algorithm, greedy

当组织中有 N 个员工时，我们会得到 N 个日期偏移范围。像
1-4 （即员工将在第 1、2、3 和 4 天来）
2-6
8-9
..
1-14
我们必须在最少天数内组织一次活动，以便每个员工都可以参加活动至少两次。请建议算法（可能是贪婪的）来做到这一点。
PS：活动为一日活动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T18:05:02.960

如果您的数据很小，您可以暴力破解它。选择所有可能的 2 天组合。对于每种组合，尝试一下，看看是否每个人都可以参加。如果没有，请选择所有可能的 3 天组合，看看每个人是否可以参加 3 天中的 2 天，依此类推。它是指数级的，但对您的目的而言可能并没有那么糟糕。

贪心的方法是统计每天有多少人在工作，然后选择人数最多的一天。重复，计算每天有多少人在工作*，他们还没有安排两个活动*，然后选择人数最多的一天。当然，不要两次选择同一天。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T18:20:36.873

我认为这可以通过以下对按结束日期排序的事件的贪婪方法来完成

```
Maintain a num count for all intervals. (Initialize all to 0)
If num = 0 place the two events on the last two days of this interval. 
If num = 1 place one event on the last day of this interval
If num = 2 already two events have been covered for this interval. 
```

以间隔放置事件可能会导致后续事件的 num 计数增加。

# matlab - 在 Matlab 中向量化递归或迭代

> ID：12183816
> 
> 赞同：1
> 
> 时间：2012-08-29T17:59:23.263
> 
> 标签：matlab

假设我有一个包含元素 1...n 的向量 v，并且我知道 v(1) = v_0，然后

```
v(i+1) = 1/(a*v(i) + b). 
```

这很容易使用单个 for 循环或递归来实现。递归在 Matlab 中是一个糟糕的想法，如果可能的话，单个 foo 循环仍然不是最优的。我可以矢量化这样的操作吗？

为了使这篇文章更有用，是否有一种通用的矢量化方法

```
v(i+1) = f(v(i)), 
```

其中 f(x) 是任意函数？怎么样的东西

```
v(i+1) = a(i)*v(i) + b(i) 
```

其中 a 和 b 现在是向量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T18:09:13.443

`for`由于即时编译，MATLAB 中的循环不像以前那么糟糕了。如有疑问，只需编写循环并继续您的工作。除非您的向量很大，否则循环不会打扰您。如果（且仅当）循环是瓶颈，请返回并尝试愚蠢的 MATLAB 技巧进行优化。

在对您的问题的具体回答中，不，我不相信有一种通用的方式来表达 v(i+1) = f(v(i))。您可以使用函数句柄轻松编写一个，但性能将不仅仅是对表达式进行开放编码。

# google-apps-script - Google 应用脚本 urlfetch 编码 URL

> ID：12183817
> 
> 赞同：19
> 
> 时间：2012-08-29T17:59:23.470
> 
> 标签：google-apps-script, urlfetch

我想使用 urlfetch 用页面数据填充电子表格，但我尝试使用的 URL 以错误作为无效参数返回。我认为问题在于我在 URL 中使用了被误解的字符（例如引号和括号）。

我尝试使用下面的命令对 URL 进行编码，但我假设我对某些字符进行了双重编码，这会导致问题。

```
var encodedURL = encodeURIComponent(pageURL) 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-29T20:17:33.653

尝试使用

```
baseURL + encodeURIComponent(parameterString) 
```

您将传递给要查询的基本 URL 的参数作为传递给 encodeURIComponent 函数的值包含在其中。这篇文章可能对你有用：

[在 JavaScript 中编码 URL？](https://stackoverflow.com/questions/332872/how-to-encode-a-url-in-javascript)

如果您对整个 URL 进行编码，就像您在上面所做的那样，那么您编码的不仅仅是参数，我认为这将是您的问题所在。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-08-01T18:19:07.143

您个人可能不需要答案，但我为需要的人写信。为了对 GitLab 进行成功的 API 调用（API v4），您只需对“变量”进行编码。见下文：

```
var url = baseUrl + projectId + "/repository/files/" + encodeURIComponent(pathAndFileName) + "?branch=" + encodeURIComponent(branch) + "&author_email=" + encodeURIComponent(authorEmail) + "&author_name=" + encodeURIComponent(authorName) + "&content=" + encodeURIComponent(content) + "&commit_message=" + encodeURIComponent(commitMessage); 
```

where`pathAndFileName`是前面定义的变量。

# php - 停止无限循环

> ID：12183818
> 
> 赞同：0
> 
> 时间：2012-08-29T17:59:35.660
> 
> 标签：php, codeigniter-2, infinite-loop

我正在通过代码点火器建立一个社交网络。注册后，潜在成员获取存储在数据库中，并且他们的状态获取标记为待处理。然后我向他们发送一封带有哈希令牌链接的确认电子邮件。当他们点击链接时，它会将他们的帐户标记为活动，并将他们带到一个有登录的欢迎页面。

当我转到链接时，它会设置一个无限循环并在我处理 MAMP 时冻结我的计算机。（或者我怀疑这是一个无限循环）

这是我的相关代码：

发送电子邮件的身份验证控制器：

```
function varification_email()
{
    $query = $this->db->query('SELECT * FROM users order by id desc LIMIT 1');
    $token = sha1($user->email.$user->salt).dechex($user->id);
    $domain = "clci.dev/index.php";
    $link = "http://www.".$domain."/account/confirmation/?token=$token";
    foreach ($query->result() as $user)
    {
        $this->load->library('email');

        $this->email->from('noreply@cysticlife.org', 'CysticLife');
        $this->email->to($user->email); 

        $this->email->subject('Welcome to CysticLife!');
        $this->email->message("Thanks for signing up for CysticLife! To complete the registration process please go to the following web address:\n\n$link\n\n-Your friends at CysticLife\n\nPlease remember to add the cysticlife.org domain to your address book to ensure that you receive your CysticLife e-Notifications as requested.eh");    

        $this->email->send();
} 
```

用户从电子邮件链接回的帐户 CONTROLLER：

```
public function confirmation() {
    $data['main_content'] = 'account/confirmation';
    $this->load->view('includes/templates/main_page_template', $data);
    $this->load->library('encrypt');
    $this->load->helper('url');
    $this->load->library('session');
    $this->load->model('user_model', 'um');
    $login = $this->input->post('submit');

    //IF THE SUBMIT BUTTON IS TRIGGERED THE POST DATA IS SENT TO THE VALIDATE FUNCTION IN THE MODEL VIA VARIABLES CREATED 
    if($login) {
        $user = $this->um->validate(array('email' => $this->input->post('email')));
        if( $user ) {
            // CHECK THE USER'S PASSWORD AGAINST THE ONE FROM THE LOGIN FORM
            if($user->password == $this->encrypt->sha1( $user->salt . $this->encrypt->sha1($this->input->post('password')))) {
                $this->session->set_userdata('logged_in', TRUE);
                $this->session->set_userdata(array(
                    'email' => $this->input->post('email')
                ));
                $this->session->userdata('logged_in');
                redirect('account/dashboard');
                exit;
            }
        }
    }

    $this->index();
} 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T01:46:24.643

## 验证电子邮件（）

*   在 v **rification_email** () 中，`$user`在定义之前使用它。我认为真正的代码没有这个问题。
*   您在数据库中选择用户的方法容易出现并发错误（返回错误的用户）。

## 确认（）

*   我已经遇到过由于 cookie 太大而导致浏览器挂起的情况，超过了 4 kB。看看那个。
*   问题可能出在`user_model->validate()`. 注释掉以下代码并检查它是否有效。

# php - 如何使用依赖注入和接口创建连接类？

> ID：12183819
> 
> 赞同：3
> 
> 时间：2012-08-29T17:59:36.413
> 
> 标签：php, class, dependency-injection, database-connection

我正在阅读这个 SO 问题：

[PHP - 多个不同的数据库依赖注入类](https://stackoverflow.com/questions/7975174/php-multiple-different-databases-dependency-injected-class)

最佳答案。我理解在这里使用接口背后的概念，但我不知道如何使用它。这是最佳答案所说的，对不起，如果我不应该在这里复制它：

您应该首先为所有数据库操作创建一个接口。

```
interface IDatabase
{
    function connect();
    function query();
    ...
} 
```

然后让不同的驱动类实现这个接口

```
class MySQLDB implements IDatabase
{
}
class PGSQLDB implements IDatabase
{
} 
```

这样您就可以轻松地使用依赖注入。

```
class Test
{
   private $db;

   function __construct(IDatabase $db)
   {
        $this->db = $db;
   }
} 
```

您可以将其称为：

```
$mysqldb = new MySQLDB();
$test = new Test($mysqldb);
or
$pgsqldb = new PGSQLDB();
$test = new Test($pgsqldb); 
```

我不明白的是如何在课堂测试中完成它以及我通过什么来测试。我的连接信息在哪里？我希望有人能帮我完成这个mysql连接或者pdo。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T18:04:15.450

您的连接信息将进入 MySQLDB 类，因此您可以拥有如下内容：

```
class MySQLDB implements IDatabase
{
    private $pdo; // Holds the PDO object for our connection

    // Or you can remove the parameters and hard code them if you want
    public function __construct( $username, $password, $database) {
        $this->pdo = new PDO( '...'); // Here is where you connect to the DB
    }

    public function query( $sql) {
        return $this->pdo->query( $sql); // Or use prepared statments
    }
} 
```

然后你在类之外实例化它：

```
$db = new MySQLDB( 'user', 'pass', 'db'); 
```

并将该`$db`对象传递给您期望的类之一`IDatabase`：

```
$obj = new Test( $db); // Dependency Injection, woo hoo! 
```

您还可以考虑让 MySQLDB 类扩展 PDO 类，但这是您的设计选择。

最后，您最好还是坚持使用 PDO 并摆脱所有这些，因为它是一个很棒的抽象层，可以与许多不同的数据库一起使用。

# java - 寻找 Springs 下拉列表的排序顺序

> ID：12183826
> 
> 赞同：0
> 
> 时间：2012-08-29T18:00:00.470
> 
> 标签：java, spring, spring-mvc, spring-webflow

当我转换为 Map 时，我失去了列表的软顺序。我还能怎么做…… Spring 需要我的列表作为我的 Dropbox 的 Map

```
Map<String, String> selectableReporters = new HashMap<String, String>();
List<NameID_lookupModel> lstReports = database.getSelectableReporters();

for (NameID_lookupModel i : lstReports) selectableReporters.put(i.getID(), i.getName() + " - " + i.getID()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T18:02:45.343

`LinkedHashMap``HashMap`如果内容已经按您想要显示的顺序排序，则可能会有所帮助。`LinkedHashMap`保持插入顺序。

```
LinkedHashMap<String, String> insertionOrderMap = new LinkedHashMap<String, String>(); 
```

如果您的列表已经排序，迭代列表并添加到 LinkedHashMap

将列表项添加到上面的地图。

# c# - 调用“new [classname]”会给出 nullReferenceException

> ID：12183827
> 
> 赞同：0
> 
> 时间：2012-08-29T18:00:01.883
> 
> 标签：c#, .net

我创建了一个新类，我得到一个空引用异常，我不知道为什么。

> 你调用的对象是空的。

```
 namespace TIMBaseClasses.ReturnerTracking
{
    [Serializable]
    public class Returner
    {
            private Guid _returnerID;
            private string _clientIP;

            public Guid returnerID {get { return _returnerID; } set { _returnerID = value; }}
            public string clientIP {get { return _clientIP; } set { _clientIP = value; }}

            /// <summary>Constructor that sets the default values as needed</summary>
            public Returner()
            {
                returnerID = Guid.Empty;
                clientIP = string.Empty;
            }

            public static Returner Instance
            {
                get
                {
                    var ret = (Returner)(HttpContext.Current.Session["Returner"] ?? new Returner());
                    HttpContext.Current.Session["Returner"] = ret;
                    return ret;
                }
            }

    }
} 
```

当我调用“new Returner()”时，错误发生在最后的“var ret”行的底部。

调用它导致错误的行如下。

```
 Returner.Instance.returnerID = id; 
```

编辑

为了解决 HTTPContext.Current 为空的问题，我做了一个观察，它不为空。但是，“new Returner()”上的手表给了我这个：

```
Instance = 'TIMBaseClasses.ReturnerTracking.Returner.Instance' threw an exception of type 'System.NullReferenceException' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T18:02:28.167

`HTTPContext.Current`是非空的吗？如果是`null`，您将获得一个`NullReferenceException`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-29T18:02:42.347

它可能更有可能 HTTPContext.Current 或 HTTPContext.Current.Session 为空

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T18:03:39.397

你的财产`HTTPContext.Current` 是空的

# javascript - Url 中的 JavaScript 变量不起作用

> ID：12183835
> 
> 赞同：-4
> 
> 时间：2012-08-29T18:00:31.220
> 
> 标签：javascript, html, variables

这个 javascript 代码运行良好

**src='http://host/150.jpg'**

```
 // Function ActionItems Start
 function ActionItems(){
    var ActionItemsVar = document.getElementById("ActionItems").value;
        switch (ActionItemsVar ){
            case "150":
            ActionItems1Var ="ActionItems1";
            ActionItems2Var="ActionItems2";
            ActionItems3Var="ActionItems3";
            ActionItems4Var="ActionItems4";
            document.getElementById("Image").innerHTML = "<img style='float:left' width='100%' height='100%'
                            src='http://host/150.jpg' alt='' title=''>";
            break;
            ....
        }

    document.getElementById("ActionItems1").innerHTML = ActionItems1Var
    document.getElementById("ActionItems2").innerHTML = ActionItems2Var
    document.getElementById("ActionItems3").innerHTML = ActionItems3Var
    document.getElementById("ActionItems4").innerHTML = ActionItems4Var
 }
 // Function ActionItems End 
```

但是在 url 代码中使用变量将不起作用

**src='http://host/'+ActionItemsVar+'.jpg'**

```
// Function ActionItems Start
    function ActionItems(){
        var ActionItemsVar = document.getElementById("ActionItems").value;
            switch (ActionItemsVar ){
                case "150":
                ActionItems1Var ="ActionItems1";
                ActionItems2Var="ActionItems2";
                ActionItems3Var="ActionItems3";
                ActionItems4Var="ActionItems4";
                document.getElementById("Image").innerHTML = "<img style='float:left' width='100%' height='100%'
                            src='http://host/'+ActionItemsVar+'.jpg'alt='' title=''>";
                break;

                ...
            }

        document.getElementById("ActionItems1").innerHTML = ActionItems1Var
        document.getElementById("ActionItems2").innerHTML = ActionItems2Var
        document.getElementById("ActionItems3").innerHTML = ActionItems3Var
        document.getElementById("ActionItems4").innerHTML = ActionItems4Var
    }
    // Function ActionItems End 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T18:05:20.490

您必须退出双引号而不是单引号：

```
document.getElementById("Image").innerHTML = 
    "<img style='float:left' width='100%' height='100%' src='http://host/"+ActionItemsVar+".jpg'alt='' title=''>"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T18:04:52.280

使用 " 而不是 '

```
document.getElementById("Image").innerHTML = "<img style='float:left' width='100%' height='100%' src='http://host/"+ActionItemsVar+".jpg'alt='' title=''>"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T18:04:01.970

你的报价很混乱。改成

```
document.getElementById("Image").innerHTML = "<img style='float:left' width='100%' height='100%' src='http://host/"+ActionItemsVar+".jpg'alt='' title=''>"; 
```

# mysql - 连接多个 MySQL 表进行搜索。这是一个很好的使用 MySQL 视图吗？

> ID：12183841
> 
> 赞同：0
> 
> 时间：2012-08-29T18:00:45.373
> 
> 标签：mysql, search, view

我试图让在一组相互链接的 MySQL 表上执行关键字搜索变得快速和容易。

有一个具有唯一“itemID”的项目表，相关数据分布在其他表中，所有表都通过 itemID 链接。

我创建了一个视图，它将大部分信息连接成一个可用的形式。这使搜索变得非常容易，但对性能没有帮助。这是我第一次使用视图，也许不是正确的用途。如果有人能给我一些指点，我将不胜感激。

一个简化的例子是：

物品表：

```
itemID |  name 
------   -------
   1      "James"
   2      "Bob"
   3      "Mary" 
```

关键词表：

```
keywordID |  itemID |  keyword
------      -------   -------
   1           2        "rabbit"
   2           2        "dog"
   3           3        "chicken" 
```

加上更多的关系......

我的观点：（使用 CONCAT_WS、GROUP_CONCAT 和一些 JOIN 创建）

```
itemID |  important_search_terms 
------   -------
   1      "James ..."
   2      "Bob, rabbit, dog ..."
   3      "Mary, chicken ..." 
```

然后我可以在视图中搜索“mary”和“chicken”并轻松找到 itemID=3 匹配项。杰出的！

问题是，它似乎在为每次搜索都做 CONCAT 和 JOIN 的所有工作，但效率不高。我目前的测试数据搜索大约需要 2 秒，这是不切实际的。

我希望视图会以某种方式被缓存，但也许我没有以正确的方式使用它。

我可以有一个包含我定期更新的搜索信息的实际表格，但它看起来并不像我希望的那样整洁。

如果有人有任何建议，我将不胜感激。非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T18:05:00.770

好吧，视图只不过是让您更容易阅读您查询的内容，但在下面每次都执行位于下面的 SQL 语句。

因此，难怪它和您运行该语句本身一样慢（甚至更慢......）。

通常这是通过索引作业（在夜间运行，不会打扰任何人）或索引插入（当插入新数据时，检查是否将它们插入索引的有趣单词是一个好主意）来完成。

在运行时拥有它真的很难，并且需要精心设计的数据库结构和大部分时间强大的 sql server 硬件（取决于数据量）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T18:05:19.960

MySQL 视图与其他 SQL 语言中的物化视图不同。它真正做的只是缓存查询本身，而不是查询所需的数据。

MySQL 视图的主要用途是消除您必须一遍又一遍地编写的重复查询。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T18:10:25.100

你让它变得简单，但没有让它变得很快。我认为，如果您查看查询的 EXPLAIN，您将看到 MySQL 在每次运行查询时都在实现该视图（将视图查询中的结果集的副本写为“派生表”），并且然后从该“派生表”运行查询。

如果您可以分别针对每个表运行“搜索”谓词，您将获得更好的性能，如下所示：

```
SELECT 'items' AS source, itemID, name AS found_term 
  FROM items WHERE name LIKE 'foo'
 UNION ALL
SELECT 'keywords', itemID, keyword 
  FROM keywords WHERE keyword LIKE 'foo'
 UNION ALL
SELECT 'others', itemID 
  FROM others WHERE other LIKE 'foo' 
```

-或者-

如果您不关心匹配的术语是什么，或者它是在哪个表中找到的，并且您只想返回匹配的 itemID 的不同列表

```
SELECT itemID
  FROM items WHERE name LIKE 'foo'
 UNION
SELECT itemID
  FROM keywords WHERE keyword LIKE 'foo'
 UNION
SELECT itemID 
  FROM others WHERE other LIKE 'foo' 
```

# loops - 我的代码中显示的表错误中已存在缺少右括号和添加的列

> ID：12183843
> 
> 赞同：0
> 
> 时间：2012-08-29T18:00:55.623
> 
> 标签：loops, alter-table, execute-immediate

我正在尝试运行此代码

```
declare 
temp_atr_val varchar2(400);
temp_val varchar2 (400);
temp_sum_percent decimal (10,3);
temp_variable number (10,3);
column_count number ; 
val_count number;
sales_store number;
begin    
select count(distinct ATTRIBUTE_INPUT) into column_count from look_up_table;
for ind in 1..column_count loop

    /* putting current value of attribute from look_up_table in temp variable*/
    select ATTRIBUTE_INPUT into temp_atr_val from (
        select ATTRIBUTE_INPUT, rownum rwn
        from 
        (
           select distinct ATTRIBUTE_INPUT
           from look_up_table
        )
    ) where rwn = ind;

    select count( value_for_atr ) into val_count from look_up_table;

    for ind in 1..val_count loop

   /* putting current value_for_atr for corresponding attribute from look_up_table in temp variable*/
        select value_for_atr into temp_val from 
         (
          select value_for_atr, rownum rwn
          from look_up_table
         ) where rwn = ind;

       SELECT SUM(CASE WHEN temp_atr_val = temp_val THEN net_sales_home ELSE 0 END) into temp_variable
       FROM schemafinal;

 /*temp_variable := temp_variable/sales_store;*/

 EXECUTE IMMEDIATE 'ALTER TABLE SAR ADD (percent_'||temp_val||' number)';
 EXECUTE IMMEDIATE ' update SAR b 
 set b.percent_'||temp_atr_val||'_'||temp_val||' = 105 ';

END LOOP;
END LOOP;   
END; 
```

但是每次代码显示以下两个错误之一时： ORA-01430: column being added already exists in table

907.  00000 - “缺少右括号”

当我检查 SAR 表时，其中只有 5 个新列。我不知道为什么会这样，几乎所有方法都试过了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T18:27:13.533

在不了解数据结构的情况下很难分析查询。

但我假设您在第二个循环选择查询中需要一个额外的 ATTRIBUTE_INPUT 条件来查找 temp_val。否则对于每个 ATTRIBUTE_INPUT temp_val 将返回相同的结果。

这意味着在第一次循环的第二次迭代中 temp_val 将与第一次迭代的旧值相同。所以 Alter table Add 查询会抛出错误。

所以请尝试添加一个额外的 ATTRIBUTE_INPUT 条件

```
 /* putting current value_for_atr for corresponding attribute from look_up_table in temp variable*/
        select value_for_atr into temp_val from 
         (
          select value_for_atr, rownum rwn
          from look_up_table
          where ATTRIBUTE_INPUT = temp_atr_val
         ) where rwn = ind; 
```

# c# - C# TCP 异步连接主动拒绝 CPU 利用率低

> ID：12183845
> 
> 赞同：2
> 
> 时间：2012-08-29T18:01:16.040
> 
> 标签：c#, multithreading, sockets, amazon-ec2

我有一个 C# TCP 异步套接字服务器。

在本地测试，我可以在 35 秒内接受 5K 连接。我正在运行四核超线程 PC（8 个线程），每个内核的利用率约为 20-40%。当连接被接受时，服务器向客户端询问一堆数据，然后执行一堆数据库条目。

我将服务器应用程序和 SQL 数据库移至 Amazon AWS 上的小型数据库和中型服务器实例。

Amazon 中型服务器 (EC2) 是 1 个虚拟核心和 2 个 ECU。据我所知，它只有 1 个线程。（来自性能监视器）

如果我尝试在 35 秒内将 1000 个客户端连接到中型服务器。大约 650 个连接后，我开始接收*Connect failed(b) No connection could be made because the target machine positively拒绝它*。

查看性能监视器，我注意到 CPU 利用率只有 ~10-15%。

我猜核心没有被加载，因为它试图处理大量的连接队列、小型操作并且没有提供足够的负载来增加 CPU 使用率，因为服务器只有 1 个虚拟核心。

有没有人有这方面的经验，我的理论有意义吗？我陷入了硬件限制？（需要增加服务器大小？）

如果没有，有什么想法可以提高利用率并支持更多/更快的连接吗？

有人对此有经验吗？

编辑：

我将我在 Amazon EC2 上的实例升级到了 High CPU Extra Large 实例。

该实例现在有 8 个内核和 20 个 ECU。

我遇到了同样的问题，我得到 No connection could be made 因为目标机器在 ~600 个连接后主动拒绝了它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T18:52:06.303

检查 Amazon 服务器是否配置为允许打开的 TCP 连接数。在 Windows 中，您必须通过为最大允许 TCP 连接添加注册表项来将服务器设置为允许连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T18:14:48.330

当您在本地运行代码时，您的代码似乎正在使用多个内核。您是否在将代码移至单核时对其进行了更改？当我使用虚拟用户创建进行测试并以编程方式使他们同时访问应用程序时，我在我的应用程序中看到了类似的情况。在一定数量之后，我曾经连接断开/无法访问。

如果您的要求是高利用率，您可以使用更高配置的 EC2 并获取预留实例（如果您希望长时间使用它），这可能会花费您非常经济的成本。此外，尝试使用 cloudfront 、负载均衡器（如果您有 2 个/更多实例）。他们肯定会增加您目前可以处理的用户数量。希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T20:33:21.590

我能够解决这个问题。我升级了我的实例以使用 PIOPS。我还在本地使用了更好的互联网连接，因为我的旧上传速度太慢，无法支持发送所有数据和连接。

通过这 2 个更改，我能够在本地创建 5K+ TCP 连接并毫无问题地连接到服务器。

# java - 它不适用于带有eclipse的tomcat servlet

> ID：12183847
> 
> 赞同：0
> 
> 时间：2012-08-29T18:01:18.477
> 
> 标签：java, eclipse, tomcat, servlets

我已经用 eclipse 安装了 tomcat，并且我有一个带有 servlet 的项目。这里我把两者的结构：

![在此处输入图像描述](../Images/8618b7606ca20789f3059b5a790b0011.png)

直到今天，运行 servlet 所遵循的步骤是：

1.按下下面右上方的按钮并给出“开始”Tomcat

![在此处输入图像描述](../Images/44b0e24ce06639b18afe868c953264bf.png)

2.一旦启动，在“UsuarioServlet.java”上按右键/运行方式/在服务器上运行

![在此处输入图像描述](../Images/e36a7fae2721117a1bcdd79d9d188c28.png)

完成后一切正常，但今天突然这样做时，我得到以下信息：

![在此处输入图像描述](../Images/92784a0f1397ffa835222119928a212c.png)

发生了什么？。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T18:15:08.043

我最近遇到了这个问题。

这对我有帮助。启动 tomcat 并在控制台中搜索您的 tomcat 运行的真实路径。去那里打开`conf/server.xml`。集成了tomcat和eclipse的插件在那里增加了一长串。向下滚动以查看它。这是这条线在我的机器上的样子。

```
 <Context docBase="C:\workspaces\work7\.metadata\.plugins\org.eclipse.wst.server.core\tmp1\wtpwebapps\ROOT" path="" reloadable="false"/><Context debug="0" docBase="C:\workspaces\work7\.metadata\.plugins\org.eclipse.wst.server.core\tmp1\wtpwebapps\webapp" path="/mycompany-webapp-0.9-SNAPSHOT" reloadable="true" source="org.eclipse.jst.jee.server:webapp">
<Valve className="org.apache.catalina.valves.AccessLogValve" pattern="common" prefix="access_log." suffix=".txt"/> 
```

请注意路径属性。以前是`/webapp`，现在变成了`/mycompany-webapp-0.9-SNAPSHOT`。因此，这是部署应用程序的真实 URL。

我曾经使用 url 浏览我的应用程序`http://localhost:8080/webapp`。现在我必须使用`http://localhost:8080/mycompany-webapp-0.9-SNAPSHOT`. 或者，我可以停止服务器，`server.xml`手动修复路径，启动服务器并使用“旧”URL。

关键是这种行为并不一致。有时（在更改项目设置时）此问题会“自动”修复，但有时会返回。它不仅发生在我的机器上，而且发生在我工作的公司的其他 2 名团队成员的计算机上。

我希望这些信息对您有所帮助。祝你好运。

# google-maps - 谷歌地图位置标记

> ID：12183850
> 
> 赞同：1
> 
> 时间：2012-08-29T18:01:23.003
> 
> 标签：google-maps, gps, maps

我想开发一个驾驶模拟器，模拟 GPS 运动的东西。我为此使用谷歌地图，我设法让标记在我的路线周围移​​动，但我现在有其他问题。

我有：

*   起始位置
*   开始时间
*   结束位置

我想根据从开始时间过去的时间计算位置。并在每次某些用户打开页面时在正确的位置显示标记。需要以某种方式计算纬度，经度并在每次加载页面时更改起始位置。

有什么办法可以使这项工作？

# google-chrome-extension - chrome 扩展可以在本地存储中存储 X.509 证书吗？

> ID：12183857
> 
> 赞同：2
> 
> 时间：2012-08-29T18:01:38.210
> 
> 标签：google-chrome-extension, certificate, local-storage, x509certificate

我想编写一个 chrome 扩展程序，它可以从服务器接收 X.509 证书并将其安全地存储在 chrome 的本地存储中。这可以使用 chrome 扩展 API 吗？是我使用 NPAPI 的唯一方法吗？

# c++ - 带有模板和非模板函数的意外输出

> ID：12183859
> 
> 赞同：0
> 
> 时间：2012-08-29T18:01:44.317
> 
> 标签：c++

> **可能重复：**
> [模板函数和非模板函数调用顺序](https://stackoverflow.com/questions/12174493/template-func-and-non-template-func-call-order)

为什么这个代码代码打印

```
::foo(int)
::foo<T>(T) 
```

```
template <typename T>
void foo(T)
{
   std::cout << "::foo<T>(T) \n";
}

template <typename T>
void bar(T baz)
{
   foo(baz);
}

void foo(int)
{
   std::cout << "::foo(int) \n";
}

int main()
{
   foo(0);
   bar(0); 
} 
```

而这

```
void foo(int)
{
   std::cout << "::foo(int) \n";
}

template <typename T>
void foo(T)
{
   std::cout << "::foo<T>(T) \n";
}

template <typename T>
void bar(T baz)
{
   foo(baz);
}

int main()
{
   foo(0);
   bar(0); 
} 
```

印刷

```
::foo(int)
::foo(int) 
```

正如预期的那样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-29T18:07:53.297

原因是模板函数只考虑在定义点可见的函数，而不考虑在实例化点可见的函数。如果它根据实例化可见性选择函数，那么您很可能会违反左右一个定义规则。我对相关问题的回答中有一个标准参考[稍后添加模板函数的专业化](https://stackoverflow.com/questions/11453737/adding-specializations-of-template-functions-later)

# android - 使文本变为粗体和斜体

> ID：12183860
> 
> 赞同：14
> 
> 时间：2012-08-29T18:01:47.700
> 
> 标签：android, xml, text, bold, italics

无论如何要使xml文件中的Android文本既粗体又斜体？

***样本***

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-08-29T18:03:12.243

是的，只需添加`android:textStyle="bold|italic"`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T18:04:20.423

你试过这个吗

```
android:textStyle="italic|bold" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T18:05:21.060

试试这个：

```
<Textview android:textStyle="bolditalic" .... 
```

有关更多信息，请参阅[http://developer.android.com/reference/android/widget/TextView.html#attr_android:textStyle](http://developer.android.com/reference/android/widget/TextView.html#attr_android:textStyle)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-29T18:03:21.193

```
<TextView
    android:id="@+id/mTextView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textStyle="bold|italic"
    android:text="YOUR_TEXT"
/> 
```

# box-api - Box - 如何判断根文件夹是否已被修改？

> ID：12183867
> 
> 赞同：0
> 
> 时间：2012-08-29T18:02:20.503
> 
> 标签：box-api

我注意到对[https://api.box.com/2.0/folders/0.xml](https://api.box.com/2.0/folders/0.xml)的调用没有返回 modified-at 标记。如何判断根文件夹何时被修改？

我想出的一个解决方案是检查根文件夹下的文件夹是否有修改日期。但是，这可能会导致大量 HTTP 调用。

有没有更好的办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T00:09:11.020

现在，V2 API 返回根文件夹日期的空值（created_at、modified_at）。我们正在研究是否可以轻松地为您填充根文件夹上的这些字段，而不是让您自己钻取文件夹。

# javascript - 这在 javascript 中有什么作用？

> ID：12183871
> 
> 赞同：5
> 
> 时间：2012-08-29T18:02:34.797
> 
> 标签：javascript

我在一个 SharePoint 系统 javascript 文件中遇到了以下函数。

```
function RTE_InsertImage(strBaseElementID)
{ULS1Lu:;
   //A bunch of javascript
} 
```

我从来没有在我以前`ULS1Lu:;`使用过的任何 javascript 代码中看到过类似的东西。有谁知道这是在做什么？

对不起，这个问题的标题很弱。我不知道该怎么表达它。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-29T18:05:02.867

它是一个[代码标签](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/label)，从技术上讲，它们不需要分号，但在 javascript 中它不应该受到伤害。标签将允许 break 或 continue 语句将代码跳回它。

大多数人认为尽可能使用函数调用而不是标签更好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T18:05:20.443

好像他们只是在创建一个标签。可能，作为标记或用于某些臭名昭著的用途。当然，这些标签的名气很大一部分归功于[goto](https://stackoverflow.com/questions/46586/goto-still-considered-harmful)语句。

# ms-access - 如何在 Access 中的表中搜索字段

> ID：12183879
> 
> 赞同：2
> 
> 时间：2012-08-29T18:03:11.583
> 
> 标签：ms-access, find, vba

使用 VBA，我如何在名为**"ServiceYES"的表中的****"Service"**字段中搜索文本字符串，例如**"CHIR** " 。

 ****之后，我想保存表**"ServicesYES"**中存在**"CHIR"**的所有行的相邻字段。“ **ServiceYES”**表如下：

 ****![服务YES表](../Images/8000456d84d3e8cb2bfe5a874281760b.png)

我基本上想在“服务”列中找到所有**“CHIR”**，然后将 CHIR 左侧的名称保存为数组，例如**“FRANKL_L”**、**“SANTIA_D” 。**

感谢您提前提供的所有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T18:36:01.893

首先创建一个`SELECT`查询。

```
SELECT Code_Perso
FROM ServicesYES
WHERE Service = 'CHIR'; 
```

`SELECT DISTINCT Code_Perso`如果您只想要唯一值，请使用。

`ORDER BY Code_Perso`如果您想让它们按字母顺序排序，请添加。

获得满意的查询后，打开基于该查询的 DAO 记录集，并循环遍历`Code_Perso`它返回的值。

您不需要将它们直接加载到最终数组中。将它们添加到逗号分隔的字符串中可能更容易。之后，您可以使用该`Split()`函数（假设您的 Access 版本 >= 2000）来创建您的数组。

这是帮助您入门的示例代码。它主要是标准的样板，但它实际上可能工作......一旦你给它“你的查询”。

```
Dim db As DAO.Database
Dim rs As DAO.Recordset
Dim strItems As String
Dim varItems As Variant
Set db = CurrentDb
Set rs = db.OpenRecordset("yourquery", dbOpenSnapshot)
With rs
    Do While Not .EOF
        strItems = strItems & "," & !Code_Perso
        .MoveNext
    Loop
    .Close
End With
If Len(strItems) > 0 Then
    ' discard leading comma '
    strItems = Mid(strItems, 2)
    varItems = Split(strItems, ",")
Else
    MsgBox "Oops.  No matching rows found."
End If
Set rs = Nothing
Set db = Nothing 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T18:45:05.477

我对此进行了测试，它似乎有效。此函数将提取 ServiceYes='CHIR' 的所有记录并将 Code_Person 值转储到它将返回的数组中：

```
Function x() As String()
    Dim rst As Recordset
    Set rst = CurrentDb.OpenRecordset( _
         "Select * from ServiceYES where Service='CHIR'")

    Dim Arr() As String
    Dim i As Integer

    While rst.EOF = False
         ReDim Preserve Arr(i)
         Arr(i) = rst.Fields("Code_Person")
         i = i + 1
    rst.MoveNext
    Wend
    x = Arr
End Function 
```

样品用法：

```
Debug.Print x()(0) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T19:01:02.383

保罗，

这是我在几分钟内拼凑起来的东西。您可以将其添加到模块中的 VBA 编辑器中。它使用一种技巧来使 RecordCount 属性正常运行。至于返回数组，您可以更新函数并创建调用例程。如果您需要那段代码，只需发表评论即可。

谢谢！

```
Option Compare Database

Function QueryServiceYES()
    Dim db As Database
    Dim saveItems() As String

    Set db = CurrentDb

    Dim rs As DAO.Recordset
    Set rs = db.OpenRecordset("SELECT Code_Perso, Service, Favorites " & _
                                "FROM ServiceYES " & _
                                "WHERE Service = 'CHIR'")

    'bug in recordset, MoveFirst, then MoveLast forces correct invalid "RecordCount"
    rs.MoveLast
    rs.MoveFirst

    ReDim Preserve saveItems(rs.RecordCount) As String

    For i = 0 To rs.RecordCount - 1
        saveItems(i) = rs.Fields("Code_Perso")

        rs.MoveNext
    Next i

    'print them out
    For i = 0 To UBound(saveItems) - 1
        Debug.Print saveItems(i)
    Next i

    rs.Close
    Set rs = Nothing

    db.Close
    Set db = Nothing
End Function 
```********

# c - 如何打印具有相同名称的全局变量和局部变量的值？

> ID：12183899
> 
> 赞同：13
> 
> 时间：2012-08-29T18:04:21.800
> 
> 标签：c, gcc

这是我的代码，我想打印 15 和 12 但由于实例成员隐藏了 a 的本地值，因此被打印了两次。

```
#include <stdio.h>                                  
int a = 12;             
int main()          
{           
    int a = 15;             
    printf("Inside a's main local a = : %d\n",a);                  
    printf("In a global a = %d\n",a);            
    return 0;           
} 
```

为什么以及有什么方法可以在 c 中打印它？...顺便说一句，我在 C++ 中知道。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-29T18:05:48.460

`extern`在新的复合语句中使用说明符。

这边走：

```
#include <stdio.h>      

int a = 12;             

int main(void)          
{           
    int a = 15;             
    printf("Inside a's main local a = : %d\n", a);

    {
        extern int a;
        printf("In a global a = %d\n", a);
    }

    return 0; 
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T00:05:30.403

我知道这并不能*直接*回答您的问题，但最好的方法是更改​​局部变量的名称，使其与全局变量的名称不冲突。

如果您可以控制函数内部的代码（即，您可以添加一个`extern`声明以使全局变量可见），那么您可以很容易地更改变量的名称。

不可能说什么名字会更好。在实践中，这些变量无疑具有比 更具描述性的名称`a`。它们的使用方式应该会给你一些关于它们的好名字的指导。

如果它们实际上用于相同的目的，它们可能不需要同时存在。您可以删除本地的变量`main()`，或者，也许更好的是，删除全局变量并将本地（或其地址）传递给需要访问它的其他函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T08:08:30.260

我想我以某种方式找到了答案......它有效

```
#include <stdio.h>

int a = 5;

int main()
{
    int a=10;
    if(1)
    {
        extern int a;
        printf("global: %d\n", a);
    }
    printf("local: %d\n", a);
    return 0;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-07-19T01:00:28.407

为全局范围添加 ::

```
#include <stdio.h>                                  
int a=12;             
int main()          
{           
  int a=15;             
  printf("Inside a's main local a = : %d\n",a);                  
  printf("In a global a = %d\n",::a);            
  return 0;           
} 
```

# java - 会话处理问题 - Websockets 创建了 HttpSession 和 Session

> ID：12183908
> 
> 赞同：1
> 
> 时间：2012-08-29T18:05:01.023
> 
> 标签：java, session, websocket

我希望有人能回答我的问题。在我们的 gwt-webapp 中，我们通常使用 HttpSession 来创建用户会话。所以如果有人想登录我们的游戏，我们通过 HttpSession 设置会话

```
public void setSessionID(String id) {HttpSession httpSession = getThreadLocalRequest().getSession(true); httpSession.setAttribute("id", id); } 
```

视图的顺序是：LoginView-> HomeView -> LobbyView

现在进入大厅时，他将通过 websocket Connection 与聊天连接。现在的问题是，我认为 websocketConnection 也会创建一个 sessionObject。在码头 v-8.1.2.v20120308 上测试应用程序显示：

如果第一个用户登录游戏并使用聊天功能直接加入大厅，另一个用户也这样做，他们可以互相聊天-所以一切看起来都很好......

但是如果两个用户在有人加入大厅之前同时登录游戏，然后再加入大厅，第二个进入大厅的用户会获取第一个进入的用户的所有参数，这样两者都有具有相同身份的用户...不知道那里出了什么问题。似乎来自第一个用户的 websocketSession 覆盖了来自第二个玩家的登录的 httpSession ......感谢任何解决方案或想法，这可能是什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T20:31:34.697

这是 Jetty 中的一个错误，它会在握手后清除/销毁所有内容。解决方案是在那一刻关闭会话并使用该假会话包装请求。您还可以使用 Atmosphere Framework[1]，它可以透明地为您解决这个问题（以及更多。

——让弗朗索瓦

[1] [https://github.com/Atmosphere/atmosphere](https://github.com/Atmosphere/atmosphere)

# web-services - 提供仅适用于一个请求的加密安全令牌对于 Web 服务是否足够安全？

> ID：12183915
> 
> 赞同：1
> 
> 时间：2012-08-29T18:05:19.670
> 
> 标签：web-services, security, rest, authorization

我正在创建一个处理敏感数据的 REST 服务。它将通过 SSL，所有双向的请求内容都将被额外加密。

对于授权，我打算这样做，以便客户端最初登录并获取令牌，然后他们必须在下一次请求时提供此令牌。他们所做的每个请求都会返回一个新令牌。每个令牌只能使用一次。

这是一个足够安全的授权方案吗？我看过其他技术，例如亚马逊如何为 AWS 做这件事，但似乎请求签名增加了很多复杂性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T18:11:08.373

SSL-without-additional-encryption 足够安全。您可以验证服务器是否提供了特定证书，而不是“由受信任的 CA 签名的任何证书”，以抵抗 MITM 攻击。有时请求使用 HMAC 签名；秘密通过 SSL 传输，然后后续请求以未加密但签名的方式传输。HMAC 请求签名并不复杂，但如果您通过 SSL 传输所有内容（不仅仅是初始机密），那么就没有意义了。

# windows - Windows Vista UAC 错误地显示代码签名的应用程序名称

> ID：12183919
> 
> 赞同：0
> 
> 时间：2012-08-29T18:05:23.277
> 
> 标签：windows, windows-vista, code-signing

我使用以下代码对我的 Installer/Uninstaller.exe 进行了代码签名：

```
signtool sign  /f "mycert.pfx"   /p Westell1  /t   http://timestamp.verisign.com/scripts/timstamp.dll "Installer.exe" 
```

在代码签名之后，当我尝试在 Windows Vista 32/64 位系统上运行 Installer.exe 时，UAC 屏幕没有正确显示应用程序名称（“Installer.exe”）。它将应用程序名称显示为“ **Insf3e3.tmp** ”。

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T18:08:09.717

UAC 显示的文本不是文件名，而是`FileDescription`可执行文件中版本资源中的字段。

如果您自己构建 Installer.exe，则需要在 .rc 文件中添加合适的版本资源：

```
VS_VERSION_INFO VERSIONINFO
...
            VALUE "FileDescription", "My Application" 
```

如果 Installer.exe 来自安装构建器，则需要在构建安装程序时查找如何设置该字符串。例如，使用 InnoSetup 你会说：

```
[Setup]
VersionInfoDescription=My Application 
```

# ruby-on-rails - 如何让 Rails 识别活动记录的正确 ID？

> ID：12183920
> 
> 赞同：1
> 
> 时间：2012-08-29T18:05:23.547
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在制作一个由“post”模型和“comment”模型组成的板。

我做的板子不需要登录程序，所以删除帖子或评论需要密码。

当我尝试删除帖子时，下面的代码运行良好。（如果用户点击“删除”按钮，会出现隐藏的带有密码表单的DIV，所以我使用了form_for。）

```
<%= link_to_function "Delete", "$('#post_password_box').toggle()" %> |
<div id="post_password_box">
  <%= form_for(@post, url: { action: "destroy"}, html: { method: :delete, class: nil, id: nil}) do |f| %>
    <%= f.label :password %>
    <%= f.password_field :password %><br>

    <%= f.submit "Commit", class: "btn", data: { confirm: "Are you sure?" } %>
    <%= button_to_function "Cancel", "$('#post_password_box').hide()", class: "btn" %>
  <% end %>
</div> 
```

所以，我在删除评论时使用了类似的代码。

```
 <% @comments.each do |comment| %>
    <li class="author"><%= comment.author %></li>
    <li class="content"><%= comment.content %></li>
    <li class="date"><%= comment.created_at.localtime.strftime("%r") %></li>
    <li class="button">
      <%= link_to_function "X", "$(this).next().toggle()" %>
      <div class="comment_password_box">
        <%= form_for(comment, url: {controller: "comments", action: "destroy"}, html: {method: :delete, class: nil, id: nil}) do |f| %>
          <%= f.label :password %>
          <%= f.password_field :password %>

          <%= f.submit %>
        <% end %>
      </div>
    </li>
  <% end %> 
```

乍一看，上面的代码似乎运行良好，但存在代码没有删除正确注释的问题。

例如，如果一个帖子的 id 是 20，而我要删除的评论的 id 是 10，它会删除 id 为 20 的评论。

我发现问题出在表单标签的动作属性在每条评论中都如下所示。

```
 <form accept-charset="UTF-8" action="/comments/20" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="_method" type="hidden" value="delete" /><input name="authenticity_token" type="hidden" value="Y2oBuoIxa+9yPLC5WflKVVELw3jgKsi9s9/8Cfvr2u8=" /></div> 
```

我应该怎么做才能让 rails 找到正确的表单标签的 action 属性值？（在这种情况下，它应该是“/comments/10”，而不是“/comments/20”。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T18:27:52.570

让 rails 为您生成 URL。目前您正在自己设置 URL，但您没有指定值，`:id`因此 rails 采用当前值`params[:id]`

尝试

```
form_for(comment, :method => :delete) 
```

反而。

# php - 从 PHP 或等效调用 mod_rewrite

> ID：12183922
> 
> 赞同：0
> 
> 时间：2012-08-29T18:05:28.613
> 
> 标签：php, wordpress, apache, .htaccess, mod-rewrite

我正在创建一个新的 wordpress 网站。我从旧网站导入了 1500 多篇帖子。问题是 wordpress 在 URL 中有诸如“an-the-a-if-is”之类的词，而我的旧网站在其中删除了这些词。

这是 SEO 和断开链接的一个主要问题，因为新链接看起来像“the-cat-in-the-hat”，而我的旧链接只是“cat-hat”。

我只想更改我上传的过去 1500 个帖子，以从 URL 中删除指定的单词（我假设通过重写），我有要删除的单词列表。我希望创建的所有新帖子都包含这些单词，所以我不只是想使用 .htaccess。

有没有办法通过 PHP 说“如果帖子早于 XYZ 日期，则删除这些单词，并从新的重写 URL 中提供，否则，正常提供”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T18:48:56.100

您可以在数据库上运行以下命令：

```
UPDATE `wdp_posts`
SET `post_name`= REPLACE(`post_name`,"-and-","-"),
WHERE `post_date` < "20120101 00:00:00"; 
```

（在尝试之前备份数据库！）

这样做是重命名 2011 年 1 月 1 日之前的任何帖子，删除名称中出现的任何“-and”（即成为 URL）。

您需要编辑日期以满足您的需要。

你需要多次运行它。一次用于“-and-”，一次用于“-if-”，一次用于“-in-”等。正如评论中指出的那样，它不会替换 url 开头或结尾的单词。

您*可以*在一个查询中执行此操作，但它很难阅读，因此我建议一次执行一个关键字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T18:10:24.500

Wordpress 本身有选项，以更改 URL 的形成方式，我认为它在一般选项下，或者可能是“写作”。无论哪种情况，您都可以自定义用于 URL 的内容或使用预定义的内容。Wordpress 已经在使用它`htaccess`，并且`mod_rewrite`它需要将所有内容传递给 index.php。改变这种行为并覆盖 Wordpress 的需求可能会导致整个 WP 崩溃。

最重要的是，是否有您想要做的方法..它们可能属于 Wordpress Hacks，或者它们现在可能是 WP 中的集成选项（自从我使用 WP 以来已经有一段时间了，所以我不记得完整了好吧。但是我知道您通常可以直接通过 WP 寻找什么...

更进一步，如果您从旧的 WP 站点导出到新的 WP 站点，则有导出从帖子到设置的所有内容的方法......可能也需要考虑该选项。

# drupal - 增加书籍深度

> ID：12183925
> 
> 赞同：0
> 
> 时间：2012-08-29T18:05:31.057
> 
> 标签：drupal, drupal-7

我正在尝试在 Drupal 站点上创建一本最大书本深度为 18 的大书。有没有办法在 Drupal 7 中增加当前书本深度限制为 9？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T18:16:48.180

我认为您必须更改 menu.inc 文件中的值：

{drupal7}/includes/menu.inc（drupal 7.0 上的第 265 行）：

```
/**
 * The maximum depth of a menu links tree - matches the number of p columns.
 */
define('MENU_MAX_DEPTH', 9); 
```

您将不得不更改此处的值以启用更多嵌套书，AFAIK。

# c++ - 局部变量地址

> ID：12183929
> 
> 赞同：3
> 
> 时间：2012-08-29T18:05:42.547
> 
> 标签：c++

我很难理解这三个之间的区别：

```
const char * f() {
  return "this is a test";
}

const char * g() {
  const char * str = "test again";
  return str;
}

const double * h() {
  const double a = 2.718;
  return &a;
} 
```

我收到了`h()`, as的警告`warning: address of local variable ‘a’ returned`。这是有道理的，但我不明白为什么编译器（`gcc -Wall`）可以使用`f()`and`g()`函数。

*   那里没有局部变量吗？
*   指针何时以及如何被释放`f()`或被`g()`释放？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-29T18:10:59.273

字符串文字不存储在本地堆栈帧中。它们位于可执行文件中的固定位置。对比：

```
const char * g() {
  const char * p = "test again";
  return p;
} 
```

和

```
const char * g() {
  const char a[] = "test again";
  return a;
} 
```

在前者中，返回值指向可执行文件中的固定位置。在后者中，返回值指向（现在无效的位置）堆栈。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-29T18:09:26.923

它是字符串文字。

n3337 2.14.5/8

> 普通字符串文字和 UTF-8 字符串文字也称为窄字符串文字。窄字符串文字的类型为“n const char 数组”，其中 n 是字符串的大小，定义如下，并且具有 **静态存储持续时间**

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-29T18:12:20.463

```
const char * g() {
  const char * str = "test again";
  return str;
} 
```

这不会返回局部变量的地址。变量是`str`，**因此**`&str`它的地址应该与自身**不同**`str`：

```
std::cout << (void*) str  << std::endl; 
std::cout << (void*) &str << std::endl; //address of str (local variable) 
```

他们会打印**不同的**值！

所以一个更恰当的例子是：

```
const char ** g() {
  const char * str = "test again";
  return &str;  //difference!
} 
```

现在它返回局部变量的地址。一个好的编译器*可能会*为此发出警告。

另一个例子是：

```
const char * g() {
  const char str[] = "test again"; //difference!
  return str;  //same as before
} 
```

现在，即使您返回的*似乎*`str`不是局部变量的地址，它也可能会发出警告，在这种情况下，和的值将完全相同！现在尝试打印这些：*`str``&str`*

 *```
std::cout << (void*) str  << std::endl; 
std::cout << (void*) &str << std::endl; //address of str (local variable) 
```

他们将打印**相同**的值！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-29T18:10:55.153

字符串文字不是局部变量。第三个函数的字符串等价物是这个

```
const char * f() {
  const char str[] = "this is a test";
  return str;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-29T18:09:58.993

在函数`h`中，`a`是一个局部变量，函数返回后就不存在了。您正在返回*指向*该变量的指针，因此在函数外部取消引用指针是不正确的，并且是未定义的行为。

在`f`并且`g`您正在返回文字字符串。文字字符串具有静态存储：它们*不在*堆栈上分配，它们将存在于函数的生命周期之外。

在 的定义中`g`：

```
const char *g()
{
   const char *str = "test again";
   return str;
} 
```

`str` *是*一个局部变量，但它是一个指向*非*本地 - 静态分配 - 内存的指针。这是您要返回的地址，而不是对局部变量的引用。

考虑另一个定义`g`：

```
const char *g()
{
    const char str[] = "test again";
    // incorrect: can't use str after the return:
    return str;
} 
```

现在`g`和你的函数有同样的问题`h`，在编译它时，你应该看到关于返回局部变量地址的相同警告。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-29T18:44:21.683

这些字符串物理上且永久地放置在您的数据存储器中，因此它们的地址是永久的。自动变量在堆栈上，所以它会在您从调用返回的那一刻消失。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-29T18:09:55.647

字符串文字的存储分配是静态的，这就是您没有收到警告的原因。

试试这个，你会得到未定义的行为：

```
const char* getFoo()
{

  std::string foo("hi");
  return foo.c_str();
} 
```

因为字符串 foo 复制了文字字符串。*

# objective-c - 将 willChangeValueForKey/didChangeValueForKey 与 OSSpinLockLock 一起使用

> ID：12183930
> 
> 赞同：0
> 
> 时间：2012-08-29T18:05:42.890
> 
> 标签：objective-c, ios5, grand-central-dispatch

我想在所有 4 个不同的线程都完成工作时发出通知。我正在计算总线程数，并有一个监听器在线程完成时做一些工作。

以下是执行此操作的安全方法吗？

```
// ivars:
NSMutableArray *list;
OSSpinLock lock;

#define MAX_ALLOWED 4

- (void)someThreadedWork
{
    // Iterate thru 4 different items using gcd and update
    for (int x = 0; x < MAX_ALLOWED; ++x)
    {
        dispatch_async(some_queue, ^{
           // Do some work.. once done, 
           [self updateCount:ix];
        });
    }
}

- (void)updateCount:(NSInteger)newCount
    OSSpinLockLock(&lock);
    {
        [list addObject:[NSNumber numberWithInt:newCount]];

        if ([list count] == MAX_ALLOWED)
        {
            _allValuesUpdatedAt = [NSDate date];
        }
    }
    OSSpinLockUnlock(&lock);
}

- (void)observeValueForKeyPath:(NSString*)keyPath ofObject:(id)object 
change:(NSDictionary*)change context:(void*)context 
{
    // When I get the 'allItemsUpdatedAt' event, I will perform some other work
}

- (id)init {
    if (self = [super init])
    {
        // there is a corresponding removeObserver in the dealloc
        list = [[NSMutableArray alloc] init];
        [anInstance addObserver:self 
                forKeyPath:@"allItemsUpdatedAt" 
                options:NSKeyValueObservingOptionNew 
                context:NULL];
    }
    return self;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T20:05:21.847

HachiEthan 关于 dispatch_async 的评论是完全正确的。如果您改用 dispatch_group_async，那么您根本不需要任何锁定，也不必跟踪当前正在工作的线程。它会为你做这一切。

请参阅并发编程指南中的[“等待队列任务组”](http://developer.apple.com/library/ios/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/OperationQueues/OperationQueues.html)，以获得更快、更简单、更健壮且能耗更低的方法来解决此问题。另请参阅同一文档中的“从线程迁移”以了解如何将基于线程的系统转换为基于队列的系统。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T19:00:45.660

这里有几件事：

**危险信号：**您更改了`_allValuesUpdatedAt`锁内部的值，但可能会在其他地方“读取”其值......（例如，观察该属性的人`allValuesUpdatedAt`）所以除非您的`allValuesUpdatedAt`财产也受到同一个`&lock`实例的保护，否则您会遇到问题那里。（编辑：另外，你上面的代码没有保留 NSDate，所以它会在某个时候自动发布给你。）

如果您使用`dispatch_async`并将其传递给*串行队列*，那么您不需要该自旋锁来更新 中的值`list`，前提是该`updateCount:`方法只能由从该串行队列运行的代码访问。（**注意**：您仍然需要保护访问`allValuesUpdatedAt`）

如果`updateCount:`确实需要从其他代码（例如主线程）访问，那么是的，您将需要某种锁，就像您拥有的那样。

* * *

编辑：保留您拥有的大部分内容，但要解决危险信号

```
//header:
@property (atomic, retain) NSDate *allValuesUpdatedAt;

//impl:
- (void)updateCount:(NSInteger)newCount
    OSSpinLockLock(&lock);
    {
        [list addObject:[NSNumber numberWithInt:newCount]];

        if ([list count] == MAX_ALLOWED)
        {
            //use atomic property for read/write thread-safety:
            self.allValuesUpdatedAt = [NSDate date]; 
        }
    }
    OSSpinLockUnlock(&lock);
} 
```

# c# - 将 HTML 文件读入内存中的字符串变量

> ID：12183932
> 
> 赞同：44
> 
> 时间：2012-08-29T18:05:48.480
> 
> 标签：c#, html, file-io, html-parsing

如果我在磁盘上有一个 HTML 文件，如何在运行时一次将其全部读入 String 变量？然后我需要对该字符串变量进行一些处理。

一些像这样的html文件：

```
<html>
    <table cellspacing="0" cellpadding="0" rules="all" border="1" style="border-width:1px;border-style:solid;width:274px;border-collapse:collapse;">
        <COLGROUP><col width=35px><col width=60px><col width=60px><col width=60px><col width=59px></COLGROUP>
        <tr style="height:20px;">
            <th style="background-color:#A9C4E9;"></th><th align="center" valign="middle" style="color:buttontext;background-color:#D3DCE9;">A</th><th align="center" valign="middle" style="color:buttontext;background-color:#D3DCE9;">B</th><th align="center" valign="middle" style="color:buttontext;background-color:#D3DCE9;">C</th><th align="center" valign="middle" style="color:buttontext;background-color:#D3DCE9;">D</th>
        </tr><tr style="height:20px;">
            <th align="center" valign="middle" style="color:buttontext;background-color:#E4ECF7;">1</th><td align="left" valign="top" style="color:windowtext;background-color:window;">Hi</td><td align="left" valign="top" style="color:windowtext;background-color:window;">Cell Two</td><td align="left" valign="top" style="color:windowtext;background-color:window;">Actually a longer text</td><td align="left" valign="top" style="color:windowtext;background-color:window;">Final Word</td>
        </tr>
    </table>
</html> 
```

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-08-29T18:07:01.483

使用[File.ReadAllText](http://msdn.microsoft.com/en-us/library/system.io.file.readalltext.aspx)传递文件位置作为参数。

但是，如果您的真正目标是解析 html，那么我建议您使用[Html Agility Pack](http://html-agility-pack.net)。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-08-29T18:07:04.107

利用`System.IO.File.ReadAllText(fileName)`

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-08-29T18:07:29.067

```
string html = File.ReadAllText(path); 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2014-10-21T12:57:44.687

这大部分已经涵盖了，但是当我遇到以前的代码示例的问题时添加了一个。

```
Dim strHTML as String = System.IO.File.ReadAllText(HttpContext.Current.Server.MapPath("~/folder/filename.html")) 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-08-29T18:10:34.413

用于`File.ReadAllText(path_to_file)`阅读

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-08-29T18:09:56.383

您要进行哪种处理？你可以`XmlDocument doc = new XmlDocument();`跟着做`doc.Load(filename)`。然后可以在内存中解析 XML 文档。

阅读此处了解有关 XmlDocument 的更多信息：

*   [MSDN](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.aspx)
*   [C# 角教程](http://www.c-sharpcorner.com/UploadFile/bulentozkir/ReadingXmlUsingXmlDocument11142005010141AM/ReadingXmlUsingXmlDocument.aspx)

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2018-11-20T00:50:41.757

你可以用简单的方法做到这一点：

```
string pathToHTMLFile = @"C:\temp\someFile.html";
string htmlString = File.ReadAllText(pathToHTMLFile); 
```

或者您可以使用 FileStream/StreamReader 将其流式传输：

```
using (FileStream fs = File.Open(pathToHTMLFile, FileMode.Open, FileAccess.ReadWrite))
{
    using (StreamReader sr = new StreamReader(fs))
    {
        htmlString = sr.ReadToEnd();
    }
} 
```

后一种方法允许您打开文件，同时仍允许其他人对该文件执行读/写操作。我无法想象 HTML 文件会很大，但它具有流式传输文件的额外好处，而不是像第一种方法那样将其捕获为一个大块。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-11-16T16:45:50.933

```
var htmlText = System.IO.File.ReadAllText(@"C:/filename.html"); 
```

如果文件在应用程序根目录下，用户如下

```
var htmlText = System.IO.File.ReadAllText(HttpContext.Current.Server.MapPath(@"~/filename.html")); 
```

# jquery - Jquery 插件 $.fn.myplugin 不工作

> ID：12183933
> 
> 赞同：2
> 
> 时间：2012-08-29T18:06:03.703
> 
> 标签：jquery, plugins

我可能犯了一个非常简单的错误，但是在试图弄清楚为什么它不起作用时遇到了一些严重的麻烦。

这是代码：http: [//jsfiddle.net/HthCa/](http://jsfiddle.net/HthCa/)

更新：这是我的实际代码..

```
<script type="text/javascript" src="scripts.js"></script>
<script type="text/javascript">
    $(function() {
        $('#test').customTabs();
    })
</script> 
```

**脚本.js**

```
$.fn.customTabs = function() {
    alert($(this).html());
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-29T18:08:18.750

在您的代码中：

```
$('#test').customTabs();

$.fn.customTabs = function() {
    alert($(this).html());
}; 
```

你`$.fn.customTabs()`在定义它之前打电话。请尝试：

```
$.fn.customTabs = function() {
    alert(this.html());
};

$('#test').customTabs(); 
```

请注意，您不需要在插件方法中应用`$`to ，因为它已经是一个 jQuery 对象（调用该方法的对象）。`this``this`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T18:07:24.320

把新的函数定义放在你调用它的地方。

```
$.fn.customTabs = function() {
    alert($(this).html());
};
$('#test').customTabs(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T18:07:31.333

把你的代码这样

```
$.fn.customTabs = function() {
    alert($(this).html());
};
$('#test').customTabs(); 
```

或者

```
$.fn.customTabs = function() {
    alert($(this).html());
};
$(function() { // <-- inside a dom ready
    $('#test').customTabs();
});​ 
```

原因是您尝试使用尚未定义的功能，如控制台中所述 `Uncaught TypeError: Object [object Object] has no method 'customTabs'`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-18T12:26:18.023

你确定你像这样从jquery选择器对象访问它吗

```
$("some selectors").myPlugin() 
```

如果你试过这个

```
$.myPlugin() // it won't work 
```

它行不通

# python - 如何使用 python、jinja2 使用 template.render() 从特定部分 ID 开始加载页面

> ID：12183941
> 
> 赞同：4
> 
> 时间：2012-08-29T18:06:31.650
> 
> 标签：python, html, google-app-engine, jinja2

**这是python代码：**

```
template = jinja_environment.get_template('index.html')
self.response.out.write(template.render(template_values)) 
```

**但是，我想从下面的锚标记开始加载 index.html：**

（其中这个锚标记在 index.html 文件中）

```
<section> id="home"> 
```

**我将如何更改 python 代码来做到这一点？**

如您所知，我是新手，目前正在学习 Google App Engine 教程。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T18:22:36.273

我认为你有点困惑。使用 jinja2 和 Python 代码，您所能实现的就是在服务器端生成页面。如果您想跳转到该页面中的特定部分，您应该使用 JavaScript（[示例](https://stackoverflow.com/a/7696691/8418)）在客户端执行该操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T18:40:27.610

假设您希望在 /yourpage 和主页上访问您的页面。你可以通过重定向来做到这一点：

```
YourHandler(RequestHandler):
    def get(self):
        self.redirect("/yourpage#home") 
```

因此，您需要将部分 id 放在“#”符号之后。

它至少在 Google Chrome 上对我有用。

# html - 链接 (Href) 到隐藏的 (display:none) html 元素

> ID：12183942
> 
> 赞同：7
> 
> 时间：2012-08-29T18:06:38.410
> 
> 标签：html, href, hidden

我对锚标签有疑问：/

我有以下代码：

```
<div name="divA">
<a name="A"> A</a>
</div>

<div name="divB" style="display: none;>
<a name="B"> B</a>
</div>

<div name="divHrefB">
<a href="#B">B</a>
</div> 
```

我的目标是，当我单击 B (divHrefB) 时，应用程序转到“divB”，但由于该元素隐藏，它不起作用。

请注意，我不想显示 divB （我想要一个指向 div 所在位置的链接......这可能吗？

此时，我正在考虑动态生成 href 值（在这种情况下，我将生成以下 div）

```
<div name="divHrefB">
<a href="#A">B</a>
</div> 
```

非常感谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-29T18:09:23.763

只是不应用显示：无，只需为隐藏的 div 添加这个 css。

```
<div name="divHrefB" style="height: 0px;width: 0px;overflow:hidden;">
<a href="#A">B</a>
</div> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-10-21T09:29:45.817

你错过了最后的结束`"`评论。

试试这个人：

```
style="display: none;" 
```

# entity-framework - .NET 4.0 上的实体框架 5 - DatabaseGeneratedOption.Identity 未定义

> ID：12183944
> 
> 赞同：14
> 
> 时间：2012-08-29T18:06:55.153
> 
> 标签：entity-framework, .net-4.0, entity-framework-5

我需要在 .NET 4 上使用 EF5，并且在使用 4.0 版本的库中不存在的 HasDatabaseGenerationOption.Identity 映射我的类时遇到了参考问题。

以下是失败的：

```
this.Property(t => t.DeploymentLogId)
              .HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity); 
```

有谁知道解决方法？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-26T10:24:32.807

使用 NuGet 将 EntityFramework 添加到面向 .NET 4.5 的项目中，将添加 EntityFramework 5.0。

如果您稍后将项目更改为面向 .NET 4.0，仍会引用 EntityFramework 5.0。

要修复它，请使用 NuGet 卸载 EntityFramework 并将其添加回来，也在 NuGet 中。这将添加 EntityFramework 4.4，这是 .NET 4.0 的最后支持版本。

如果它仍然无法正常工作，则可能会引用`App.config`. 这些可以删除。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-29T18:25:54.270

命名空间在 EF 5.0 中发生了变化。尝试添加这个：

```
using System.ComponentModel.DataAnnotations.Schema; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-29T18:15:07.443

您是否尝试过使用数据注释？

```
public class DeploymentLog
{
   [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
    public int DeploymentLogId { get; set; } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-14T10:35:59.410

`System.ComponentModel.DataAnnotations.Schema`自 4.5 以来仅是 .NET Framework 的一部分

如果您使用的是 4.0，那么 Entity Framework 将为您提供它。如果您查看[DatabaseGeneratedOption](http://entityframework.codeplex.com/SourceControl/changeset/view/a5faddeca2be#src/EntityFramework/DataAnnotations/Schema/DatabaseGeneratedOption.cs)和其他文件的源代码，您会看到它们的代码被包装在一个条件

```
#if NET40
...
#endif 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-06-29T10:03:41.853

我们最近在一个旧项目上遇到了这个问题，我们所做的只是

*   删除项目中的EntityFramework引用
*   右键单击项目，执行管理 NuGet 包，转到更新类别，然后单击列表中的实体框架项目上的更新到版本 6

# jquery - jQuery MultiSelect 按索引取消选中，而不是按 val()

> ID：12183945
> 
> 赞同：0
> 
> 时间：2012-08-29T18:06:58.023
> 
> 标签：jquery, multi-select

我会尽量做到这一点...使用 jQuery 多选复选框插件。选项是通过 AJAX 调用动态添加的。当用户选择一个项目/选项并关闭选择框时，该项目将与“删除”图标一起添加到 UI。该图标有一个动态添加的 ID，以便用户可以从 UI 中删除该项目，我也想从关闭的选择框中取消选中该项目。添加的 ID 是所选选项的“值”，以便我可以将 UI 上的项目与选择框中的选项相关联。当值很短（少于 2 个字）时，这很有效。但是当值大于 2 个字时，我得到一个错误：“无法识别的表达式：复选框 [值 = xxxxx]”。这个错误是从 jQuery 抛出的：

```
Sizzle.error = function( msg ) {
    throw new Error( "Syntax error, unrecognized expression: " + msg );
}; 
```

将实际值与“msg”进行比较，看来 jQuery 在 2 个单词后截断了 ID，因此无法将其与任何已知的 selectBox 值匹配。
好的，所以我决定使用所选项目的“索引”并将其添加到“删除”图标（连同一个标识符），这会将其与选择框中的所选选项相关联。当从 UI 中删除时，我会剥离标识符，只使用索引。我的问题是我无法取消选中这个东西。我试过这个：

```
$('select#'+cOption).multiselect("widget").find(":checkbox[index="+delVal+"]").each(function() {
                this.click();   // Remove check from deleted option 
```

没有错误，只是没有取消选中。

我会发布整个内容，但它非常大而且有些复杂。基本上我只想通过索引而不是值取消选中选定的选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-03T11:44:31.090

利用

```
$('select#'+cOption).multiselect("widget").find(":checkbox[index='"+delVal+"']").each(function() {
                this.click();  }); 
```

代替

```
$('select#'+cOption).multiselect("widget").find(":checkbox[index="+delVal+"]").each(function() {
                this.click(); 
```

# apache - 使用正确的语法重定向 URL

> ID：12183952
> 
> 赞同：0
> 
> 时间：2012-08-29T18:07:27.767
> 
> 标签：apache, .htaccess, url, redirect

我在尝试正确格式化我的重定向时遇到了一些困难。我有以下内容：

```
RedirectMatch 301 http://mooseburger.com/onlinestore/index.cgi?code=3&cat=7 
https://www.mooseburgeronline.com/categories/Clown-Costumes-/Coats%2C-Jackets-%26-Vests/ 
```

我知道这与 % 或 & 符号有关。你如何逃脱他们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T00:28:06.183

我相信 RedirectMatch 的模式应该是绝对 URL（如“/onlinestore/something”）或相对于 htaccess 位置的 URL（如“onlinestore/something”）。此外，不幸的是，RedirectMatch 模式无法匹配查询字符串。正如 Rekire 建议的那样，您需要为此使用 mod_rewrite。语法大致如下：

```
RewriteEngine on

RewriteCond %{QUERY_STRING} \bcode=(3)\b
RewriteCond %{QUERY_STRING} \bcat=(7)\b
RewriteRule ^onlinestore/index.cgi https://www.mooseburgeronline.com/categories/Clown-Costumes-/Coats%2C-Jackets-%26-Vests/? [NC] 
```

这也剥离了原始查询字符串。我尚未对其进行测试，但这应该可以帮助您入门。

一些链接：

*   [这些文档](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)，嗯，有点难以阅读，但它充满了信息。确保检查[控制流程图](http://httpd.apache.org/docs/current/rewrite/tech.html#InternalRuleset)，它有很大帮助。
*   [查询字符串备忘单](http://www.simonecarletti.com/blog/2009/01/apache-rewriterule-and-query-string/)
*   [复杂模式的正则表达式教程](http://www.regular-expressions.info/)。

当然，谷歌会给你数百个不错的教程。

# ruby-on-rails - 不允许用户使用带有 Rails 的设计更改电子邮件地址

> ID：12183960
> 
> 赞同：1
> 
> 时间：2012-08-29T18:07:54.137
> 
> 标签：ruby-on-rails, ruby, devise, ruby-on-rails-3.2

我`devise`用来允许用户登录网站。身份验证密钥设置为用户名，该用户名是唯一的。提供的电子邮件地址也是独一无二的。似乎不知何故`devise`已经弄清楚电子邮件地址应该是唯一的。所以这很好。

现在我想让人们更改他们的密码。我链接到 my `edit_user_registration_path`，但请注意允许用户更改他们的电子邮件地址。一种选择是设置`reconfirmable`为`false`... 但我认为我根本不想允许用户更改他们的电子邮件地址。

我想我可以从`devise`视图中删除该字段，但理论上精心设计的`PUT`方法仍然可以让他们更改电子邮件地址。有没有办法阻止这个字段是可变的？还是让电子邮件地址可以重新确认更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T18:11:16.090

见[http://trak3r.blogspot.com/2007/03/immutable-activerecord-attributes.html](http://trak3r.blogspot.com/2007/03/immutable-activerecord-attributes.html)

所以

```
class User
  def email=(address)
    if new_record?
      write_attribute(:email, address)
    else
      raise 'email is immutable!'
    end
  end 
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T17:57:24.690

就我而言，“答案”只是允许人们编辑他们的电子邮件地址。有足够多的用例可以让某人合法地想要更改他们的电子邮件地址，我认为尝试阻止它并没有什么害处。

# macos - 创建自动化服务以在当前目录中创建新文档

> ID：12183967
> 
> 赞同：8
> 
> 时间：2012-08-29T18:08:20.887
> 
> 标签：macos, applescript, finder, automator

所以我正在尝试创建一个服务，该服务将位于 Finder 的上下文菜单中，并允许在当前目录中创建一个新文档。

我一直在使用 Automator 来做这件事： ![自动化项目](../Images/5e3b3a0c1d60dc6467f588fd6692323a.png) 对不起，一切都是法语 ^^

无论如何，这是我用来检索当前工作目录的 AppleScript：

```
on run {input, parameters}
    tell application "Finder"
        set pwdAlias to insertion location as alias
        if not (exists folder pwdAlias) then
            set pwdAlias to (container of pwdAlias) as alias
        end if
    end tell
    set pwd to POSIX path of pwdAlias
    return pwd
end run 
```

然后我将此值设置为一个变量，然后使用该变量作为文档的路径创建一个新的文本文档，最后我在 Finder 中使用命令 Reveal 来显示创建的文档。

一切都很好，只是脚本似乎总是**迟到**！我的意思是，当我打开一个新的 Finder 窗口并选择我的服务时，它正在系统地在前一个窗口上创建文档，如下所示： ![选择创建新文档](../Images/545addd0c87760223ad219983b9fdab4.png) ![文档在错误的位置创建](../Images/c676177110a14d2ecc3919053b8f077e.png)

但是，如果我再次尝试，文档将在预期位置正确创建： ![再次尝试创建新文档](../Images/d8f279e47808a5f5d5f5fb85a5d3928d.png) ![这次文档创建正确！](../Images/ce827ef1b3be26a0e68627527c54fc4a.png)

这是非常系统的，每次都会发生！

对不起，如果我不是很清楚，这不是那么容易解释！

否则，我正在运行 Mountain Lion，这是附加的 Automator 项目：[create_new_document](https://www.dropbox.com/s/d4j6a6xz5k0drxs/Cr%C3%A9er%20un%20nouveau%20document.zip)

要添加服务，只需解压缩并将文件放在 ~/Library/Services/ 下

希望得到一些答案，但我担心这只是一个 Automator 错误！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-11T04:20:25.317

尝试这个![在此处输入图像描述](../Images/c36fbb69f17abfcb0ab763e7f8282b7f.png)

*   **取决于您要单击的内容**。

将选择的服务设置为：“**文件夹**”或**文件或文件夹**。在' **Finder.app** '

*   **获取第一个 Finder 窗口路径操作**

您可以在此处从[我的博客文章中下载](http://www.markosx.com/thecocoaquest/my_very_first_automator_action/)*获取第一个 Finder 窗口路径操作* 。下载位于文章[底部](http://www.markosx.com/thecocoaquest/my_very_first_automator_action/#download)。Action 获取最前面的finder 窗口的posix 路径。由于您正在单击窗口中的文件夹。该窗口将返回。

*   **变量的设定值**

*   **获取指定文本**

下一个动作“新建文本文件”需要一些输入。如果它没有得到任何文件，则不会创建任何文件。您可以将文本字段**留空**。只需采取适当的行动即可。

*   **新文本文件**

将变量“路径”或您命名它的任何内容拖到“位置：”下拉菜单中。

您可以单击 Automator 窗口底部的双蓝线来切换工作流变量列表

![工作流变量列表](../Images/b51db944ba7b3dbfb17bde9e0f53bd0c.png)

保存您的服务。试试看。（可能需要一段时间才能显示在上下文菜单中。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T20:07:36.617

这是[10.7 和 10.8 中的一个开放错误](http://www.openradar.me/9406282)

使用此**解决方法**

```
on run {input, parameters}
    activate application "System Events"
    activate application "Finder"
    tell application "Finder"
        set pwdAlias to insertion location as alias
        set pwdAlias to (container of pwdAlias) as alias
    end tell
    return POSIX path of pwdAlias
end run 
```

# android - (Time) Intentservice 什么时候开始？

> ID：12183969
> 
> 赞同：0
> 
> 时间：2012-08-29T18:08:44.017
> 
> 标签：android, android-activity, android-service

我试图弄清楚 Android 中的指令流程，我编写了以下代码

```
public class MainActivity extends Activity {

    private static final String TAG = "MainActivity";

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Log.d(TAG, "This is the ------------------- Start Line");
        Intent intent = new Intent(MainActivity.this, TimeCheckService.class);
        startService(intent);
        for ( int i = 0; i < 10; i++ ) {
            Log.d(TAG, "This line is to check the________________________ sequence of execeution in Android.");
        }
        Cursor cursor = getContentResolver().query(
                ContactsContract.Contacts.CONTENT_URI, null, null, null, null);
        cursor.close();
    } 
```

logcat 输出是

```
08-29 23:00:05.742: D/MainActivity(1462): This is the ------------------- Start Line
08-29 23:00:05.742: D/MainActivity(1462): This line is to check the________________________ sequence of execeution in Android.
08-29 23:00:05.742: D/MainActivity(1462): This line is to check the________________________ sequence of execeution in Android.
08-29 23:00:05.742: D/MainActivity(1462): This line is to check the________________________ sequence of execeution in Android.
08-29 23:00:05.742: D/MainActivity(1462): This line is to check the________________________ sequence of execeution in Android.
08-29 23:00:05.742: D/MainActivity(1462): This line is to check the________________________ sequence of execeution in Android.
08-29 23:00:05.742: D/MainActivity(1462): This line is to check the________________________ sequence of execeution in Android.
08-29 23:00:05.742: D/MainActivity(1462): This line is to check the________________________ sequence of execeution in Android.
08-29 23:00:05.742: D/MainActivity(1462): This line is to check the________________________ sequence of execeution in Android.
08-29 23:00:05.742: D/MainActivity(1462): This line is to check the________________________ sequence of execeution in Android.
08-29 23:00:05.742: D/MainActivity(1462): This line is to check the________________________ sequence of execeution in Android.
08-29 23:00:07.502: D/IsContactEmpty(1462): Starting IsContactEmpty
08-29 23:00:09.162: D/IsContactEmpty(1462): End IsContactEmpty
08-29 23:00:09.162: D/TimeCheckService(1462): Contacts not Empty 
```

现在 logcat 中的时间戳显示在*MainActivity*中 的所有代码`IntentService`执行后执行，根据 MainActivity 的顺序应该更早启动并并行执行？有人可以解释一下吗？`23:00:07.502`*`IntentService`*

 *代码为`IsContactEmpty`

```
public class IsContactEmpty {
    public static final String TAG = "IsContactEmpty";

    @SuppressWarnings("unused")
    private void isContactsEmpty() {

    }

    public static boolean valueOf(Context context) {
        Log.d(TAG, "Starting IsContactEmpty");
        boolean isEmpty;
        Cursor cursor = context.getContentResolver().query(
                ContactsContract.Contacts.CONTENT_URI, null, null, null, null);
        if (cursor.getCount() > 0) {
            isEmpty = false;
        } else {
            isEmpty = true;
        }
        cursor.close();
        cursor = null;
        Log.d(TAG, "End IsContactEmpty");
        return isEmpty;
    }
} 
```

我替换`IntentService`为`Thread`如下

```
public class MainActivity extends Activity {

    private static final String TAG = "MainActivity";

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        Log.d(TAG, "This is the ------------------- Start Line");

        new ChkServiceThread().start();

        //Intent intent = new Intent(MainActivity.this, TimeCheckService.class);
        //startService(intent);
        for ( int i = 0; i < 10; i++ ) {
            Log.d(TAG, "This line is to check the________________________ sequence of execeution in Android.");
        }
        Cursor cursor = getContentResolver().query(ContactsContract.Contacts.CONTENT_URI, null, null, null, null);
        cursor.close();
    }

    private class ChkServiceThread extends Thread {

        @Override
        public void run() {

            boolean isEmpty = IsContactEmpty.valueOf(MainActivity.this);

            if ( isEmpty == true ) {
                Log.d(TAG, "Contacts Empty");

            } else {
                Log.d(TAG, "Contacts not Empty");
                // mHandler.post(new DisplayToast("Contacts Ok", this));
            }

        }

    } 
```

并运行应用程序 10 次，但结果与之前的 logcat 输出完全相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T18:18:16.863

你`IntentService`和你`MainActivity`在同一个过程中运行。活动和服务中的所有生命周期调用，例如`onCreate()`，，都在主线程上运行`onResume()`。`onStartCommand()`因此，在`onCreate()`调用`MainActivity`完成之前，主线程上的服务中不可能发生任何事情。*

# perl - 使用 ExtUtils::MakeMaker 在备用目录中安装脚本

> ID：12183971
> 
> 赞同：2
> 
> 时间：2012-08-29T18:09:03.030
> 
> 标签：perl, debian, makemaker

我有一个 ExtUtils::MakeMaker makefile，它安装了两个脚本`script1`和`script2`. 我用这条线做这个

```
EXE_FILES => ['usr/sbin/script1',
              'usr/sbin/script2', ], 
```

在`Makefile.PL`. 但是，当`make install`运行这两个脚本时`/usr/bin`，我希望它们安装在`/usr/sbin`.

请注意，这一切都是在 Debian 软件包内完成的，因此我正在寻找一种在`Makefile.pl`(or `debian/rules`) 内部而不是从命令行指定脚本安装目录的方法。我如何告诉 MakeMaker 安装这些文件`/usr/sbin`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T18:28:11.727

文档说`EXE_FILES`是

> 参考可执行文件数组。文件将被复制到`INST_SCRIPT`目录中。

所以

```
perl Makefile.PL INST_SCRIPT=/usr/sbin 
```

# python - SQLite '错误绑定参数 0：可能不受支持的类型'是什么意思？

> ID：12183973
> 
> 赞同：0
> 
> 时间：2012-08-29T18:09:16.477
> 
> 标签：python, sqlite, python-db-api

我有 Python 代码：

```
cursor.execute('INSERT INTO users (email, password, password_hint, state, last_saved) VALUES (?, ?, ?, ?, DATETIME("now"));',
((get_cgi('email'),), (password,), (get_cgi('password_hint'),), (get_cgi('current'),))) 
```

这会产生以下错误：

```
Traceback (most recent call last):
  File "./create_account.cgi", line 73, in <module>
    ((get_cgi('email'),), (password,), (get_cgi('password_hint'),), (get_cgi('current'),)))
sqlite3.InterfaceError: Error binding parameter 0 - probably unsupported type. 
```

在崩溃之前放置的 get_cgi('email') 调试日志返回预期的电子邮件地址，因此我希望 TEXT 类型的列 'email' 应该能够处理它。

SQLite3 在抱怨什么？我错过了 DB-API2 的一些细节吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T18:18:21.090

我不确定你为什么要创建所有这些嵌套元组，但删除它们应该会让事情变得更好；不支持将元组插入（至少以这种方式）到文本字段中。

```
cursor.execute(
    'INSERT INTO users (email, password, password_hint, state, last_saved) ' +
    'VALUES (?, ?, ?, ?, DATETIME("now"));',
    (get_cgi('email'), password, get_cgi('password_hint'), get_cgi('current'))) 
```

# objective-c - 如何在不重复存储在xcode中的数组中的情况下随机播放图像

> ID：12183974
> 
> 赞同：0
> 
> 时间：2012-08-29T18:09:17.693
> 
> 标签：objective-c, ios, xcode4, uiimageview, nsarray

我在 viewcontroller 中有 10 个图像，我想在运行时随机播放图像而不重复，并希望在这些图像上应用触摸事件并找到被触摸的图像标签

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T18:23:17.893

我猜最好的办法是把图像放在一个可变数组中，然后像这样洗牌。 [在objective-c中改组一个数组](https://stackoverflow.com/questions/5659718/shuffling-an-array-in-objective-c)

并以此处提到的一种方式添加触摸事件 [IOS：触摸 Imageview 时的事件](https://stackoverflow.com/questions/7740375/ios-event-when-an-imageview-is-touched)

并触发应用程序中的视图重新洗牌并重新绘制 applicationDidBecomeActive 或类似的图像。

# powershell - Powershell - 如何从对象中获取值

> ID：12183980
> 
> 赞同：0
> 
> 时间：2012-08-29T18:09:39.540
> 
> 标签：powershell, windows-clustering

新手来了 我确信这个问题的答案存在于其他地方，但我对情境的了解不足以找到它。

我有一个命令：

```
PS C:\> Get-ClusterSharedVolume "Cluster Disk 1" | select -Expand SharedVolumeInfo | select -Expand Partition | select PercentFree 
```

它返回这个：

```
PercentFree

-----------
15.33617 
```

由于另一个将此结果作为输入的系统的一些限制，我想说：

```
PercentFree:15.33617 
```

我怎么做？更好的是，我如何将它弹出到像“$freespace”这样的变量中？

额外的问题：我如何让它只说“15”？我已经看到 {0:N0} 在其他脚本中工作，但我的新手使我无法理解如何将它应用到这种情况 :-)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T18:21:08.030

我目前无法访问集群，这对您有用吗？

```
$pf = Get-ClusterSharedVolume "Cluster Disk 1" | Foreach-Object {$_.SharedVolumeInfo.Partition.PercentFree}    
$freespace = 'PercentFree:{0:N0}' -f $pf 
```

如果上述方法不起作用（根据您的命令），请尝试此操作：

```
$pf = Get-ClusterSharedVolume "Cluster Disk 1" | select -Expand SharedVolumeInfo | select -Expand Partition | select PercentFree
$freespace = 'PercentFree:{0:N0}' -f $pf.PercentFree 
```

# jquery - 从 $.postJSON 获取价值或等待它完成

> ID：12183981
> 
> 赞同：0
> 
> 时间：2012-08-29T18:09:43.583
> 
> 标签：jquery, json, post

我正在向服务器发送一个简单的 JSON 帖子，我只在布尔值上检索。问题是这个 json 调用在另一个函数内部，它也需要返回该布尔值。

我这里有两个解决方案

1.  不知何故，从 JSON 返回函数返回数据，然后从包装函数再次返回（我这里的代码不起作用，我不知道如何从 $.postJSON 中的“function(){} 返回数据：

    ```
     function testZipCode(zipcode, state) {
        var s;
        $.postJSON("/Cart/ZipTest",
            {
                state: state,
                zipCode: zipcode
            }, function (data) {
                if (!data.ok) {
                    s = false;
                }
                s = true;
            });
            return s;
    } 
    ```

    }

2.  等待 POST 完成然后返回这样的结果：（我在这里得到的错误是我在 POST 完成之前调用了 return，因此 responseText 为空。有人可以帮忙吗？

    ```
     var result = $.postJSON("/Cart/ZipTest",
     {
                state: state,
                zipCode: zipcode
            }, function (data) {
                if (!data.ok) {
                    //do something
                }
            });
            return $.parseJSON(result.responseText).ok; 
    ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T18:13:47.707

将 ajax 调用作为延迟对象返回并在回调函数中执行一些操作：

```
function someOtherFunction() {
    testZipCode('90102', 'FL').done(function(data) {
        if (!data.ok) something = false;
    });

}

function testZipCode(zipcode, state) {
    return $.getJSON("/Cart/ZipTest", {state: state, zipCode: zipcode} );
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T18:13:43.217

做这样的事情..

```
 {
            state: state,
            zipCode: zipcode
        }, function (data, count) {
            if (!data.ok) {
               getTheData(data); //do something
            }
        });

           return $.parseJSON(result.responseText).ok;

         function getTheData(data)
{
//do things with data here
} 
```

# c# - 类成员和使用语句

> ID：12183982
> 
> 赞同：3
> 
> 时间：2012-08-29T18:09:47.380
> 
> 标签：c#, .net

假设定义了一个类：

```
class TestClass
{
    MemoryStream s = new MemorySteam();

    void DoStuff()
    {
        using (s = new MemoryStream())
        {
            // Do stuff
        }
    }
} 
```

`s`当 using 语句退出作用域时会发生什么？

`s`编辑：使用不同的方法会有问题吗？

编辑 2：MemoryStream 的第一次实例化中是否会有未处理的未引用对象？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-29T18:10:19.597

它的[Dispose](http://msdn.microsoft.com/en-us/library/system.idisposable.dispose.aspx)方法被调用。（注意，它必须实现 IDisposable 接口，这样才能保证 Dispose 可用）

[MSDN 参考非常好 IMO](http://msdn.microsoft.com/en-us/library/yh598w02%28v=vs.110%29.aspx)

[7 年前，Phil Haack 也就此写了一篇深入的文章。](http://haacked.com/archive/2005/11/18/ACloserLookAtDisposePattern.aspx)

**更新您的编辑**

一旦方法调用了它的 dispose 方法，如果您尝试在方法范围之外使用它，它将引发异常。所以，是的，在使用之外引用它会很糟糕。[准确地说，它会抛出一个 ObjectDisposedException](http://msdn.microsoft.com/en-us/library/system.objectdisposedexception.aspx)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-29T18:10:35.743

它的 Dispose 方法被调用。

[using 语句（C# 参考）](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-29T18:10:50.527

在对象上调用 Dispose 方法以清理此对象

我们调用 using 是为了清理非托管对象，因为它们没有被 GC 清理

GC 没有关于非托管对象的信息，因此开发人员必须清理

# ssrs-2008 - 密码保护 SSRS 报告

> ID：12183986
> 
> 赞同：0
> 
> 时间：2012-08-29T18:09:57.023
> 
> 标签：ssrs-2008, reporting-services

我们有几份通过电子邮件以 PDF 和 Excel 格式发送的报告。我正在寻找密码保护这些项目的方法，无论是通过 SSRS 本地还是使用 SSRS 之外的进程。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T18:20:27.503

如果您无法使用报告服务提供的内置身份验证，您还有另一种选择。首先，您不能使用基于“电子邮件”的订阅并干扰该过程来加密 pdf 文件。执行此操作的唯一方法是使用文件共享传递方法。

将报告传送到网络文件夹，然后使用 adobe 的 Web 服务 api 保护 pdf，如下所述：http: [//livedocs.adobe.com/livecycle/es/sdkHelp/programmer/sdkHelp/wwhelp/wwhimpl/common/html/ wwhelp.htm?context=sdkHelp&file=quickStarts_Encryption.8.3.html](http://livedocs.adobe.com/livecycle/es/sdkHelp/programmer/sdkHelp/wwhelp/wwhimpl/common/html/wwhelp.htm?context=sdkHelp&file=quickStarts_Encryption.8.3.html)

一旦你这样做了，你就必须编写一个应用程序来获取 pdf 并将其附加到电子邮件中。（这部分不太难）。

# python - Python，XML AttributeError：“NodeList”对象没有属性“firstChild”

> ID：12183988
> 
> 赞同：5
> 
> 时间：2012-08-29T18:10:08.243
> 
> 标签：python, xml, xml-parsing

您好，我正在使用的 xml 文件遇到问题。现在发生的事情是，每当我尝试获取 msg 标签时，我都会收到一个错误，阻止我访问数据。这是我目前正在编写的代码。

```
from xml.dom import minidom
import smtplib
from email.mime.text import MIMEText
from datetime import datetime

def xml_data ():

  f = open('C:\opidea_2.xml', 'r')

  data = f.read()

  f.close()

  dom = minidom.parseString(data)

  ic = (dom.getElementsByTagName('logentry'))

  dom = None      
  content = ''  
  for num in ic:

    xmlDate = num.getElementsByTagName('date')[0].firstChild.nodeValue

    content += xmlDate + '\n '

    xmlMsg = num.getElementsByTagName('msg')

    if xmlMsg !='' and len(xmlMsg) > 0:
        xmlMsgc = xmlMsg[0].firstChild.nodeValue
        content += "   Comments: \n        " + str(xmlMsg) + '\n\n'

    else:
        xmlMsgc = "No comment made."

        content += xmlMsgc

  print content

if __name__ == "__main__":
xml_data () 
```

如果有帮助，这是xml的一部分。

```
 <log>
 <logentry
  revision="33185">
 <author>glv</author>
 <date>2012-08-06T21:01:52.494219Z</date>
 <paths>

 <path
  kind="file"
  action="M">/branches/Patch_4_2_0_Branch/text.xml</path>   

 <path
  kind="dir"
  action="M">/branches/Patch_4_2_0_Branch</path>

</paths>
<msg>PATCH_BRANCH:N/A
 BUG_NUMBER:N/A
 FEATURE_AFFECTED:N/A
 OVERVIEW:N/A
  Adding the SVN log size requirement to the branch 
 </msg>
  </logentry>
    </log> 
```

现在，当我使用时，`xmlMsg = num.getElementsByTagName('msg')[0].toxml()`我可以让代码工作，我只需要做很多替换，我宁愿不必这样做。我也有使用`xmlDate = num.getElementsByTagName('date')[0].firstChild.nodeValue`.

我有什么遗漏或做错了吗？这里也是回溯。

```
Traceback (most recent call last):
  File "C:\python\src\SVN_Email_copy.py", line 141, in <module>
    xml_data ()
  File "C:python\src\SVN_Email_copy.py", line 94, in xml_data
    xmlMsg = num.getElementsByTagName('msg').firstChild.nodeValue
AttributeError: 'NodeList' object has no attribute 'firstChild' 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T15:28:22.953

我建议采用不同的方法。下面是一个程序，可以做你想要的（*我认为......*）。它使用[ElementTree API](http://docs.python.org/library/xml.etree.elementtree.html)而不是 minidom。这大大简化了事情。

您已经发布了几个有关使用 minidom 解析 XML 文件的相关问题。我真的认为您应该研究 ElementTree（对于更高级的东西，请查看 ElementTree 的“超集” [lxml](http://lxml.de)）。这两个 API 都比 minidom 更容易使用。

```
import xml.etree.ElementTree as ET

def xml_data():
    root = ET.parse("opidea_2.xml")
    logentries = root.findall("logentry")
    content = ""

    for logentry in logentries:
        date = logentry.find("date").text
        content += date + '\n '
        msg = logentry.find("msg")
        if msg is not None:
            content += "   Comments: \n        " + msg.text + '\n\n'
        else:
            content += "No comment made."

    print content

if __name__ == "__main__":
    xml_data() 
```

使用 XML 示例时的输出（您可能希望在确切的布局上多做一些工作）：

```
2012-08-06T21:01:52.494219Z
    Comments: 
        PATCH_BRANCH:N/A
 BUG_NUMBER:N/A
 FEATURE_AFFECTED:N/A
 OVERVIEW:N/A
  Adding the SVN log size requirement to the branch 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-07T15:29:00.910

我似乎做错了代码。这是我能够解决它的方法。

```
if len(xmlMsg) > 0 and xmlMsg[0].firstChild != None:

        xmlMsgc = xmlMsg[0].firstChild.nodeValue

        xmlMsgpbr = xmlMsgc.replace('\n', '       ')  

        xmlMsgf.append(xmlMsgpbr)        

    else:    

        xmlMsgf = "No comments made" 
```

我从来没有检查过第一个孩子是否有任何价值。这就是我所缺少的。其他答案很有帮助，但这就是我能够让它工作的方式。谢谢你们。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-29T18:19:40.373

```
myNodeList.item( 0) 
```

也许...... [http://docs.python.org/library/xml.dom.html](http://docs.python.org/library/xml.dom.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-07T17:32:48.863

用这个...`print "%s" %(num.getElementsByTagName('date')[0].firstChild.data)`

# format - Fortran FORMAT 语句

> ID：12183997
> 
> 赞同：0
> 
> 时间：2012-08-29T18:10:42.323
> 
> 标签：format, fortran

我正在尝试阅读以下内容：

> 110134458.602 7 20957861.900

我的格式行目前如下：

```
READ(7,110,END=999) L1,C1,D1
write(*,*) L1,C1,D1
110 FORMAT(F14.3,1x,F1.0,2x,F14.3) 
```

但是我收到的输出是：

> 110134458.60200000 7.0000000000000000 20957861.899999999

为什么我有这么多小数位，为什么最终值不匹配？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T18:27:16.100

看起来您正在正确读取这些值。对于输出的列表导向 IO，编译器通常会使用数字类型的最大位数。并非所有十进制值都具有精确的有限精度二进制等价物——这可能是您所看到的第三个数字。如果您对输出使用格式语句，指定较少的数字，则该值将被四舍五入并显示正确。