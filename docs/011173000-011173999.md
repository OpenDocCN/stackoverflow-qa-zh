# StackOverflow 问答 11173000-11173999

# meteor - Meteor 错误消息：“无法接收 keepalive！正在退出。”

> ID：11173000
> 
> 赞同：7
> 
> 时间：2012-06-23T21:07:36.793
> 
> 标签：meteor

我刚刚开始构建一个新的 Meteor 应用程序。到目前为止，我唯一做的就是添加一个集合。它将启动，正常运行大约 5 分钟，然后给我错误消息“无法接收 keepalive！退出。”

什么是无法从什么接收keepalive？我认为这与 Mongo 有关，因为这是我添加的唯一内容。谷歌搜索错误消息除了显示此错误消息而不是他们的应用程序的 Meteor 网站之外什么都没有。

我的 MongoDB 集合中已经包含不是由 Meteor 创建的数据，如果这有什么不同的话，它会超过 4GB。

这是完整的应用程序。

```
pitches_sum = new Meteor.Collection( 'pitches_sum' );

if (Meteor.is_client) {
  Template.hello.greeting = function () {
  return "Welcome to my site.";
  };

  Template.hello.events = {
    'click input' : function () {
      // template data, if any, is available in 'this'
      if (typeof console !== 'undefined')
        console.log("You pressed the button");
    }
  };
}

if (Meteor.is_server) {
  Meteor.startup(function () {
  console.log( '**asdf**' );        
  });
} 
```

如果我注释掉该`pitches_sum = new Meteor.Collection( 'pitches_sum' );`行，那么我认为我不会再收到错误消息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T15:02:59.390

这是由我的大型数据集和自动发布引起的。由于启用了自动发布，Meteor 试图将整个 4GB 集合发送到客户端。尝试处理所有数据会阻止客户端响应服务器的保持活动 ping。或者类似的东西。

删除自动`meteor remove autopublish`发布，然后编写我自己的发布和订阅函数解决了这个问题。

# mercurial - 您可以在不获取默认路径的情况下进行 hg clone 吗？

> ID：11173004
> 
> 赞同：2
> 
> 时间：2012-06-23T21:08:07.553
> 
> 标签：mercurial

简短的：

hg clone 在 /.hg/hgrc 中创建路径“默认”，设置为您克隆的位置。

问：是否可以自动禁用此功能？

细节：

这已经部分回答了。

在[你能阻止默认推送，但允许拉取吗？](https://stackoverflow.com/questions/3302058/can-you-prevent-default-push-but-allow-pull)我们看到如何设置默认推送，在一些 hgrc 文件中，例如 /.hg/hgrc，或者（我的偏好），在 ~/.hgrc

在[Is hg clone 是否等同于 hg (init→pull)](https://stackoverflow.com/questions/6944981/is-hg-clone-equivalent-to-hg-initpull) Tim Henigan 说 hg clone = init; 拉; hg 更新默认值；在 /.hg/hgrc 中设置默认路径。

尽管在其他地方我们看到这并不完全正确。hg clone 可能不同，例如，它进行硬链接共享。缺乏官方的等效声明...

现在，禁用默认推送有很大帮助。

但是......我已经养成了做“hg push default”的习惯。这在某种程度上违背了目的。

顺便说一句：我这样做的原因是，想要禁用默认值：master->workspace->staging_area->master 的工作流。我做了很多大师的克隆。每次我做 cline 时修改 /.hg/hgrc 以编辑 [path] 默认值是一种痛苦。在任何工作区中执行“hg push”或“hg push default”都可能很糟糕。相反，我需要推送到暂存区，我只允许从暂存区推送到主服务器。

（我已经尝试过 master<->staging_area<->workspace，即总是从 sdtaging 区域克隆。但我发现这令人困惑。另外，我还没有说的部分：我的项目让我删除或折叠历史记录，这增加了额外的混乱和容易出错的程度。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T22:56:58.390

这是我想出的克隆后挂钩：

```
 [hooks]
 post-clone = perl ~/bin/delete-default-from-.hgrc "$HG_PATS" 
```

perl 脚本如下。

我还是想找一个单行。

```
#!/usr/local/bin/perl
use strict;

print "editing <repo>/.hg/hgrc to to remove [paths] / default";

# Hand tested
# cd ~/mips/uarch-perf-sim/psim+stuff/f; rm -rf k; hg clone ../m k
# cd ~/mips/uarch-perf-sim/psim+stuff/f; rm -rf k; hg clone ../m

my $debug = 0;

my $hg_pats = $ARGV[0];
die "Usage: delete-default-from-.hgrc HG_PATS (from post-clone hook)\n" if !exists $ARGV[0] || exists $ARGV[2];

# expect HG_PATS from post-clone hook

#['../m']
#['../m', 'target']"
#['../m', '../target']"

my $from;
my $target;

if( $hg_pats =~ m/^\['([^']+)'\]$/ ) {
    $from = $1;
    $target = $from;
    # delete paths if target implicit
    $target =~ s{.*/}{};
    print "from-only: $target\n" if $debug;
} elsif( $hg_pats =~ m/^\['([^']+)',\s+'([^']+)'\]$/ ) {
    $from = $1;
    $target = $2;
    # do NOT delete paths if target explicit
    print "from to: $target\n" if $debug;
} else {
    die "expected HG_PATS, got: $hg_pats\n";
}

die "clone target not found: $target\n" if ! -d $target;

my $hgrc = "$target/.hg/hgrc";
die "clone target/.hg/hgrc not found: $hgrc\n" if ! -r "$hgrc";

open( my $in, "<$hgrc" ) || die "could not open $hgrc to read (edit)\n";
unlink "$hgrc.tmp";
open( my $out, ">$hgrc.tmp" ) || die "could not open $hgrc.tmp to write\n";

my $section = '';
my $paths_found;
my $paths_default_found;
while( my $line = <$in> ) {
    chomp($line);
    print "line = $line\n" if $debug;

    if( $line =~ m/^\[paths\]/ ) {
    $section = "[paths]";
        $paths_found++;
    }
    elsif( $line =~ m/^\[/ ) {
    $section = $line;
    }
    elsif( ($section eq "[paths]") and ($line =~ m/^\s*default\s*=/) ) {
    $line =~ s/default/default-cloned-from/;
        $paths_default_found++;
    }
    print $out $line."\n";
}

die "[paths] section not found in $hgrc" if ! $paths_found;
die "[paths] / default not found in $hgrc" if ! $paths_default_found;

system("echo '<diff edited $hgrc>';diff -U10 $hgrc $hgrc.tmp; echo '</diff>'");

unlink "$hgrc.orig";
die "could not unlink older $hgrc.orig" if -e "$hgrc.orig";

rename "$hgrc","$hgrc.orig" || die "could not rename $hgrc to $hgrc.orig";

rename "$hgrc.tmp","$hgrc" || die "could not rename $hgrc.tmp to $hgrc";

system("echo '$hgrc:';cat $hgrc");

exit(0); 
```

# php - foreach 提供的参数无效和 mysql 获取数组问题

> ID：11173010
> 
> 赞同：0
> 
> 时间：2012-06-23T21:08:42.493
> 
> 标签：php, mysql

我有这段代码，我用它来打印数据库中的一些字段。

我的问题是我收到有关提供的 foreach 无效参数和 mysql 获取数组问题的错误。

代码是这样的：

```
foreach( $checked1 as $key => $value){
    echo "<th> $value </th>";
}
echo "</tr></thead>";

while($row = mysql_fetch_array($result)){ 
```

`$checked1`数组在哪里

```
$checked1 = $_POST['checkbox']; 
```

这里有什么问题？

整个代码：

```
 <?php

echo "<div id='table-3'>"; 
    if(isset($_POST['Submit'])) {
    echo "<pre>";
    $checked1 = $_POST['checkbox'];
    $checked = implode(',', $_POST['checkbox']);

    }
    $con = mysql_connect('localhost','user','passwd');
    mysql_query("SET NAMES UTF8");

    if (!$con)
    {
    die('Could not connect: ' . mysql_error());
    }

    mysql_select_db("db_name", $con);

    $result = mysql_query("SELECT $checked FROM hostess");
    echo "<table >";
    echo "<thead><tr>";
    if(is_array($_POST['checkbox'])){
 foreach( $checked1 as $key => $value){
    echo "<th> $value </th>";
    }
    echo "</tr></thead>";

    } else {
echo "Checkbox is not an array.";
}

   while($row = mysql_fetch_array($result)){
echo "<tr>";
foreach($checked1 as $key => $value){
if($value == 'photo'){
 echo "<td> <img src=foto/photo1/".$row[$value] . "></td>";

}   else if($value == 'photo2'){
echo "<td><img src=foto/photo2/".$row[$value] . "></td></td>";

}
else if( $value == 'photo2' && $value == 'photo'){
    echo "<td> <img src=foto/photo1/".$row[$value] . "></td>";
    echo "<td><img src=foto/photo2/".$row[$value] . "></td></td>";
}
else{

    echo "<td>" . $row[$value] . "</td>";
}
}echo "</tr>";
    }
    echo "</table>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T21:15:39.363

要么`$_POST['checkbox']`未定义（发送表单时未选中复选框）要么不是数组（输入名称最后不包含`[]`）；

在对其执行任何操作之前，您应该始终检查变量是否包含您想要的内容，例如：

```
if(is_array($checked1)){
    foreach( ... ){  
    }
}

$result = mysql_query(' ... ');

if(!$result){
   die(mysql_error());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T21:15:56.313

您在 HTML 表单中调用的 $_POST['checkbox'] 是什么？它应该是这样的：

```
<input type="checkbox" name="checkbox[]" value="1" /> 
```

检查以确保您的复选框值作为数组传入。请执行下列操作：

```
if(is_array($_POST['checkbox'])){
// contiue with foreach...
} else {
echo "Checkbox is not an array.";
} 
```

# c - 将参数（结构中的结构数组中的结构）传递给 C 中的函数

> ID：11173011
> 
> 赞同：0
> 
> 时间：2012-06-23T21:08:45.230
> 
> 标签：c, arrays, pointers, struct, typedef

我有一个结构“课程”和一个函数：

```
typedef struct Course_s
    {
    char* name;
    int grade;
    } Course;

int courseGetGrade(Course const* course)
    {
    assert(course);
    return course -> grade;
    } 
```

和另一个结构“成绩单”和一个函数：

```
typedef struct Transcript_s
    {
    char* name;
    struct Course** courseArray;
    } Transcript;

double tsAverageGrade(Transcript const *t)
    {
    double temp = 0;
    int a = 0;

    while(t -> courseArray[a] != NULL)
        {
        temp = temp + courseGetGrade(t -> courseArray[a]);
        a++;
        }

    return (temp / a);
    } 
```

但我似乎无法将参数 t -> courseArray[a] 传递给函数 courseGetGrade。我对指针以及应该如何实现它有点困惑，我只是不明白为什么它不能像现在这样工作。courseArray 是 Course 结构的数组，数组末尾有一个 NULL 指针。

我收到警告“从不兼容的指针类型传递“courseGetGrade”的参数 1”。如果我尝试在参数之前添加“const”，警告会变为错误：“const”之前的预期表达式。

我正在使用普通的C。

非常感谢所有帮助！

编辑。这是完整的编译器输出。与我最初发布的代码相比，完整输出中的功能更多，因此警告也更多：

```
transcript.c: In function âtsAverageGradeâ:
transcript.c:66: warning: passing argument 1 of âcourseGetGradeâ from incompatible pointer type
course.h:27: note: expected âconst struct Course *â but argument is of type âstruct Course *â
transcript.c: In function âtsSetCourseArrayâ:
transcript.c:89: error: invalid application of âsizeofâ to incomplete type âstruct Courseâ
transcript.c:94: warning: assignment from incompatible pointer type
transcript.c: In function âtsPrintâ:
transcript.c:114: warning: passing argument 1 of âcourseGetNameâ from incompatible pointer type
course.h:24: note: expected âconst struct Course *â but argument is of type âstruct Course *â
transcript.c:114: warning: passing argument 1 of âcourseGetGradeâ from incompatible pointer type
course.h:27: note: expected âconst struct Course *â but argument is of type âstruct Course *â
transcript.c: In function âtsCopyâ:
transcript.c:126: warning: passing argument 2 of âtsSetCourseArrayâ from incompatible pointer type
transcript.c:80: note: expected âstruct Course **â but argument is of type âstruct Course ** constâ 
```

Edit.2 这是导致第 89 行错误的函数：

```
void tsSetCourseArray(Transcrpt *t, Course **courses)
    {
    assert(t && courses);
    free(t -> courseArray);
    int a = 0;
    while(courses[a] != NULL)
        a++;
    t -> courseArray = malloc(sizeof(struct Course) * (a+1));

    a = 0;
    while(courses[a] != NULL)
        {
        t -> courseArray[a] = courseConstruct(courseGetName(courses[a]), courseGetGrade(courses[a]));
        a++;
        }

    t -> courseArray[a] = NULL;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T21:24:26.573

改变：

```
typedef struct Transcript_s
{
    char* name;
    struct Course** courseArray;
} Transcript; 
```

至：

```
typedef struct Transcript_s
{
    char* name;
    Course** courseArray; /* 'Course' is a typedef for 'struct Course_s'. */
} Transcript; 
```

以下也是不正确的，原因有两个：

```
t -> courseArray = malloc(sizeof(struct Course) * (a+1)); 
```

`struct Course`应该是`Course`但更重要的是它应该是`Course*`因为需要为`Course*`: `t->courseArray`is a分配空间`Course**`。改成：

```
t -> courseArray = malloc(sizeof(Course*) * (a+1)); 
```

此外，以下内容不会释放 中的`Course`实例`courseArray`，它只会释放指针数组：

```
free(t -> courseArray); 
```

您需要遍历`courseArray`并释放每个单独的元素，然后释放指针数组：

```
while (t->courseArray[a] != NULL)
{
    free(t->courseArray[a]->name); /* If name was dynamically allocated. */
    free(t->courseArray[a]);
}
free(t -> courseArray); 
```

# ruby-on-rails-3 - 找不到生成器 mini_test:install

> ID：11173012
> 
> 赞同：0
> 
> 时间：2012-06-23T21:08:48.630
> 
> 标签：ruby-on-rails-3, minitest

我希望这些生成器可用：

```
$ rails g
Usage: rails generate GENERATOR [args] [options]

MiniTest:
  mini_test:controller
  mini_test:helper
  mini_test:install
  mini_test:mailer
  mini_test:model
  mini_test:scaffold 
```

所以我跑了：

```
$ rails g mini_test:install 
```

但是得到了这个错误：

```
Could not find generator mini_test:install. 
```

至于我的环境，这是我的相关部分`Gemfile`：

```
group :test, :development do
  gem 'minitest-rails'
end 
```

我的结果部分`Gemfile.lock`：

```
minitest (2.12.1)
minitest-rails (0.0.7)
  minitest (~> 2.12)
  rails (~> 3.1) 
```

我现在正在调试这个。我会很感激任何提示。无论如何，我会回来报告的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T20:56:09.063

这在 minitest-rails 的 0.1 版本中得到了修复。

[https://github.com/blowmage/minitest-rails](https://github.com/blowmage/minitest-rails)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T21:13:27.377

根据[minitest-rails issue #41 - Generators are not found](https://github.com/blowmage/minitest-rails/issues/41)：

> 尝试预发布 gem，0.1.0.alpha。它是一种不同的方法，您需要更新任何现有的测试。

我刚刚确认这对我有用：

```
$ rails g mini_test:install
create  test
create  test/minitest_helper.rb 
```

# javascript - 一个函数改变另一个函数的局部变量？

> ID：11173017
> 
> 赞同：3
> 
> 时间：2012-06-23T21:09:58.240
> 
> 标签：javascript, local-variables

我遇到了一些 JavaScript 函数的问题，这让我摸不着头脑大约一个小时，直到一些放置得当的 alert() 揭示了一些让我感到惊讶的东西。似乎一个函数正在改变另一个函数的局部变量。我写了一个简单的测试脚本：

```
function first() {
    msg = "1111";

    second();

    alert(msg);
    }

function second() {
    msg = "2222";
    } 
```

当我调用 first() 时，我希望得到一个警告框，上面写着“1111”，但我得到的是“2222”。second() 如何影响属于 first() 的局部变量？我错过了什么还是这是一个错误？

我正在使用 Firefox 12.0。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T21:11:14.037

该变量仅在使用 var 语句时是本地的：

```
var msg = "1111"; 
```

否则，该值会逃逸到全局范围内。

# php - PHP+MYSQL 需要与 ASPX+MSSQL 在同一 Windows 服务器上使用

> ID：11173018
> 
> 赞同：1
> 
> 时间：2012-06-23T21:10:03.803
> 
> 标签：php, asp.net, mysql, sql-server, session

我的网站通过 ASPX 表单和 MSSQL 注册用户。我需要为同一组用户并行运行 PHP+MYSQL 应用程序。所以：

1.  我需要将用户注册数据从作为用户入口点的 MSSQL 传输到 MYSQL 表。
2.  在浏览站点时，会话应该从 ASPX 转移到 PHP 页面，这样当用户从一个页面移动到另一个页面时不需要重新登录。

我的方法是使用 ASPX 脚本将用户注册数据写入 MYSQL 以供 PHP+MYSQL 应用程序使用。当我插入记录时，MSSQL 存储的编码密码是否可以与 MYSQL 一起使用？

这是关于第二个问题的一点想法 - 也许使用 ASPX 页面留下的公共 cookie 和 PHP 页面选择来检查用户状态会起作用。ASPX 和 PHP 这两个应用程序都托管在 Windows Server 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T21:23:38.070

您所说的在理论上是正确的，但这完全取决于您使用哪种会员资格，自定义或类似存储密码哈希的会员资格框架（您可以从 web.config 禁用它，但默认情况下启用）和取决于您使用的是哪种 php 应用程序及其身份验证方案....

当然更好的解决方案是让 php 应用程序直接与 asp.net 应用程序对话并使用其身份验证系统....

实际上没什么可说的，除了我建议你对两者都使用mysql，就是这样..为什么要使用两台服务器？如果你能摆脱一个，那就更好了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T21:23:50.807

关于复制数据...为了使应用程序**同步**，您需要随时复制数据（即在将数据添加到 MSSQL 时）。这意味着，最好的办法是向 ASPX 代码添加一个新连接，以将数据也插入 MySQL。

关于使在线状态/会话彼此了解 - 您可以使用在用户执行登录后分配给用户的 COOKIE，在登录时生成一些哈希，这将识别您与应用程序的两个部分的会话（两个 aspx和 php)，而不是常规的会话机制。

但是，如果您可以在应用程序的两个部分中使用相同的数据库作为后端，那么问题就不会那么“痛苦”了。PHP 可以连接到 MSSQL 数据库，asp.net 也可以轻松连接到 MySQL 数据库...

# python - 确定 scipy.sparse 矩阵的字节大小？

> ID：11173019
> 
> 赞同：33
> 
> 时间：2012-06-23T21:10:05.857
> 
> 标签：python, scipy, sparse-matrix

是否可以确定 scipy.sparse 矩阵的字节大小？在 NumPy 中，您可以通过执行以下操作来确定数组的大小：

```
import numpy as np

print(np.zeros((100, 100, 100).nbytes)
8000000 
```

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-06-23T21:18:10.587

稀疏矩阵由常规 numpy 数组构成，因此您可以像获取常规数组一样获取其中任何一个的字节数。

如果您只想要数组元素的字节数：

```
>>> from scipy.sparse import csr_matrix
>>> a = csr_matrix(np.arange(12).reshape((4,3)))
>>> a.data.nbytes
88 
```

如果您想要构建稀疏矩阵所需的所有数组的字节数，那么我认为您想要：

```
>>> print a.data.nbytes + a.indptr.nbytes + a.indices.nbytes
152 
```

# linux - 如何让 nmap 不记录已关闭的主机？

> ID：11173021
> 
> 赞同：1
> 
> 时间：2012-06-23T21:10:20.363
> 
> 标签：linux, shell, nmap, port-scanning

我目前使用以下脚本每天对 16 个不同的 /24 进行扫描：

```
#!/bin/sh
TODAY=`date +"%d-%m-%y"`
OPTIONS="--open --reason -oX /var/log/nmap/XXX/scan-$TODAY.xml -F x.x.x.0/24"
nmap $OPTIONS
rm /var/log/nmap/XXX/yesterday.xml
mv /var/log/nmap/XXX/today.xml /var/log/nmap/XXX/yesterday.xml
ln -s /var/log/nmap/XXX/scan-$TODAY.xml /var/log/nmap/XXX/today.xml 
```

如果我在脚本之外运行 nmap 命令并让它输出到控制台，它不会显示任何已关闭的主机，但是当我使用 -oX 标志输出到 xml 文件以便以后可以 ndiff 时，列出已关闭的主机。

如何让 nmap 忽略这些主机，不记录它们等？谢谢！

编辑：为了确保我们都在同一个页面上，我工作的公司拥有我正在扫描的所有 /24s。=)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T23:12:32.260

看起来主机列表是设计使然，或者至少，我也无法关闭此功能。

过滤 nmap 的输出以删除不需要的条目是否可以接受？

```
OPTIONS="--open --reason -oX - -F x.x.x.0/24"
nmap $OPTIONS \
    | sed -e '/<host><status state="down" reason="no-response"\/>/,/<\/host>/d' \
    > /var/log/nmap/XXX/scan-$TODAY.xml 
```

匹配似乎是不贪婪的，因为它应该，但要小心并检查一下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T07:36:02.277

我认为这与端口扫描有关。如果您对端口扫描不感兴趣，则可以使用以下命令删除主机：

> nmap -sn xxxx/24 -oX /var/log/nmap/XXX/scan-$TODAY.xml

实际上，与您的目的相反，我真的需要知道哪些主机已关闭，我发现 -v 足以完成这项工作：

> nmap -v -sn xxxx/24 -oX /var/log/nmap/XXX/scan-$TODAY.xml

希望能帮助到你 ;）

# iphone - 我应该使用 UIViewController 还是 UIView？制作自定义标签栏/导航控制器

> ID：11173024
> 
> 赞同：0
> 
> 时间：2012-06-23T21:11:00.613
> 
> 标签：iphone, ios, uiview, uiviewcontroller

我正在制作一个同时具有底栏和顶栏（两者都是自定义的）的应用程序，我希望它们在应用程序的整个长度内保持在那里，而中间部分在视图之间切换。但是踢球者在应用程序的某些点上，我想让顶栏和底栏滑出屏幕并能够被拖回。

我在想的是有一个主 UIViewController 和三个 UIView（顶栏、中间部分和底栏），每个 UIView 都运行各自文件中的代码。有点像标签栏如何与导航控制器一起使用。还是我倒退了？我真的不知道...但是任何建设性的建议都会有所帮助=）

我对xcode相当陌生，几天来我一直在寻找一种方法，所以请不要对我太苛刻。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T21:19:12.353

通常，我们为每个“屏幕”内容构建一个视图控制器。因此，对您的基本建议是以每个“部分”都是它自己的视图控制器的方式制作应用程序。这对于 MVC 范例尤其重要，您的业务逻辑应该在 viewControllers 中，而不是视图中（只是显示和交互逻辑）。如果你只有一个视图控制器，它会因为试图管理多个部分而变得复杂。

一条好的路线可能是这样：将整个层次结构嵌入到导航控制器中，它会为您提供顶部栏。然后制作一个自定义视图控制器类，该类知道如何制作底栏，并让每个部分都对其进行子类化。

副作用是将为每个部分 VC 创建唯一的底部栏。如果这不适合您，您可以探索视图控制器的“包含”。它基本上是一种构建组件*（如*导航控制器）的技术，它将某些元素长时间保留在屏幕上，同时将“内容”视图控制器交换为屏幕的较小部分。这不是最容易做的事情，应该仔细考虑。然而，如果你真的需要在屏幕上保留*相同的实例*，而其他视图控制器来来去去，这可能是正确的方法。也就是说，首先考虑另一个想法（每个部分管理它自己的底栏）。您可以通过促进代码重用等方式来完成它。

# java - ValidationException：调用 TraversableResolver.isReachable() 引发异常

> ID：11173027
> 
> 赞同：1
> 
> 时间：2012-06-23T21:11:24.947
> 
> 标签：java, playframework, playframework-2.0

有人以前遇到过这个错误吗？什么问题，我不知道是什么原因。。

我的代码在这里：[如何在 java play 中检索通过 post 传递的数据](https://stackoverflow.com/questions/11172861/how-do-i-retrieve-data-passed-thru-post-in-java-play/11172909#11172909)

提前感谢您的帮助..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T06:29:15.903

It comes from the springbind library that Play is using for the bonding.

You need to add getters and setters in your Java bean.

Please take a look at this: [http://blog.sveri.de/2012/04/11/play-2-0-formbind-validation-exception/](http://blog.sveri.de/2012/04/11/play-2-0-formbind-validation-exception/)

# pyqt4 - 使用新式语法连接重载的 PyQT 信号

> ID：11173028
> 
> 赞同：7
> 
> 时间：2012-06-23T21:12:07.113
> 
> 标签：pyqt4, python, signals-slots

我正在设计一个自定义小部件，它基本上是一个**QGroupBox** ，其中包含可配置数量的**QCheckBox**按钮，其中每个按钮都应控制由[**QBitArray**](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qbitarray.html)表示的位掩码中的特定位。为了做到这一点，我将**QCheckBox**实例添加到[**QButtonGroup**](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qbuttongroup.html)，每个按钮都有一个整数 ID：

```
 def populate(self, num_bits, parent = None):
        """
        Adds check boxes to the GroupBox according to the bitmask size
        """
        self.bitArray.resize(num_bits)
        layout = QHBoxLayout()

        for i in range(num_bits):
            cb = QCheckBox()
            cb.setText(QString.number(i))
            self.buttonGroup.addButton(cb, i)
            layout.addWidget(cb)
        self.setLayout(layout) 
```

然后，每次用户单击*self.buttonGroup*中包含的复选框时，我希望*self.bitArray*得到通知，以便可以相应地设置/取消设置数组中的相应位。为此，我打算将**QButtonGroup 的** *buttonClicked(int)*信号连接到**QBitArray 的** *toggleBit(int)*方法，并且为了尽可能地使用 Python，我想使用新型信号语法，所以我尝试了这个：

```
self.buttonGroup.buttonClicked.connect(self.bitArray.toggleBit) 
```

问题是*buttonClicked*是一个重载信号，所以还有*buttonClicked(QAbstractButton*)*签名。实际上，当程序执行时，当我单击复选框时会出现此错误：

```
The debugged program raised the exception unhandled TypeError
"QBitArray.toggleBit(int): argument 1 has unexpected type 'QCheckBox'" 
```

这清楚地显示了*toggleBit*方法收到的是*buttonClicked(QAbstractButton*)*信号，而不是*buttonClicked(int)*信号。

所以，问题是，如何**使用新式语法**指定信号连接，以便*self.bitArray*接收*buttonClicked(int)*信号而不是默认的重载 - *buttonClicked(QAbstractButton*)*？

**编辑：**[PyQT 的 New-style Signal and Slot Support 文档](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/new_style_signals_slots.html#the-pyqtslot-decorator)指出您可以使用*pyqtSlot*装饰器来指定要连接到给定插槽的信号，但这是针对您正在创建的插槽。当插槽来自“现成”类时该怎么办？唯一的选择是继承它，然后用正确的装饰器重新实现给定的插槽？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-24T15:46:20.007

在浏览相关问题时，我发现[这个答案](https://stackoverflow.com/a/9269089/1007502)正是我所需要的。**仅将 QButtonGroup 的** *buttonClicked(int)*信号连接到**QBitArray 的** *toggleBit(int)*的正确新型信号语法，忽略其他重载签名，涉及在括号中指定所需的类型，如下所示：

```
self.buttonGroup.buttonClicked[int].connect(self.bitArray.toggleBit) 
```

# python - 在python中连接两个守护进程

> ID：11173032
> 
> 赞同：5
> 
> 时间：2012-06-23T21:12:15.990
> 
> 标签：python, communication, daemons

在 Python 中连接两个守护进程的最佳方法是什么？

我有守护进程 A 和 B。我想在 A 的模块中接收 B 生成的数据（可能是双向的）。两个守护进程都支持插件，所以我想关闭插件中的通信。最好的跨平台方法是什么？

我知道一些低级解决方案的机制——共享内存（C/C++）、linux 管道、套接字（TCP/UDP）等，以及一些高级——队列（JMS、Rabbit）、RPC。

两个守护进程都应该在同一台主机上运行，​​但显然更好的方法是从连接类型中抽象出来。

python中典型的解决方案/库是什么？我正在寻找一个优雅而轻量级的解决方案。我不需要外部服务器，只需要两个进程相互通信。

我应该在 python 中使用什么来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T22:17:29.200

您可以使用套接字进行进程通信：[http ://docs.python.org/howto/sockets.html](http://docs.python.org/howto/sockets.html)

远程过程调用也适合：Python XML RPC [http://docs.python.org/library/xmlrpclib.html](http://docs.python.org/library/xmlrpclib.html)或 Google Protobuf [http://code.google.com/p/protobuf/](http://code.google.com/p/protobuf/) [https://developers.google .com/protocol-buffers/docs/pythontutorial](https://developers.google.com/protocol-buffers/docs/pythontutorial)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T08:54:07.270

我不确定您的流量有多大，但我会推荐[asyncore](http://docs.python.org/library/asyncore.html)包。它使用起来相当简单，它基于套接字。

我很久以前就用这个做了一个命令模式。如果您有兴趣，我可以挖掘代码。

# collision-detection - 如何将相机图像集成到物理引擎中？

> ID：11173035
> 
> 赞同：3
> 
> 时间：2012-06-23T21:12:37.160
> 
> 标签：collision-detection, augmented-reality, video-processing, interaction, physics-engine

我最近看到了[这个视频](http://www.youtube.com/watch?v=u8q6efIibA0)，并想实现类似的东西。基本方法很明确：我必须对图像进行阈值处理并检查虚拟对象是否与剩余的前景发生碰撞。

我不想自己实现物理，而是使用像 Box2D 这样的引擎。但是如何将阈值图像集成到物理引擎中，以便与虚拟对象进行交互？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-26T03:08:13.963

你想做边缘检测。有用于此的开源算法。虽然您可以按照您的建议设置阈值，但好的边缘检测算法可以在没有这个的情况下工作，并且可能会更有趣，因为您不需要纯白色背景来获得有趣的结果。对于初学者，请查看 OpenCV [http://www.mathworks.com/products/imaq/demos.html?file=/products/demos/shipping/imaq/demoimaqsl_edgedetection.html 。](http://www.mathworks.com/products/imaq/demos.html?file=/products/demos/shipping/imaq/demoimaqsl_edgedetection.html)

边缘检测器最终产生像素坐标中的向量作为输出。您需要将这些转换为 Box2D`b2_staticBody`对象，这些对象根据与生成边缘的视频帧相同的时间序列在程序控制下移动。现在您可以将动力学对象添加到 Box2D 环境中，它们的行为就像边缘是不可移动的实体一样。

最后，您必须将 Box2D 输出叠加到视频帧上。OpenCV 也应该对此有所帮助。或者您可以使用视频编辑工具。

这将是相当多的工作，但你甚至可以让它实时工作。请注意，如果您可以访问 MATLAB，它在其中一个工具箱中有一个视频帧速率边缘检测器。

# android - 获取 savedInstanceState 值，nullpointerexception

> ID：11173038
> 
> 赞同：0
> 
> 时间：2012-06-23T21:13:04.640
> 
> 标签：android

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main2);
    savedInstanceState.putString("foo", "bar");
}

@Override
public void onRestoreInstanceState(Bundle savedInstanceState) {
  super.onRestoreInstanceState(savedInstanceState);

  String myString = savedInstanceState.getString("foo");

  Log.i("debug", "saved data: " + myString);
} 
```

我试图在活动中保留一些值，但收到以下错误：`06-23 23:09:44.038: E/AndroidRuntime(17584): java.lang.RuntimeException: Unable to start activity ComponentInfo{se.johanberntsson.activitytest/se.johanberntsson.activitytest.TestActivity}: java.lang.NullPointerException`

我在这里错过了什么？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T21:16:47.650

将savedInstanceState `onSaveInstanceState`Bundle 中的值保存为：

```
public String strfoo="";
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main2);
            //comment this line you only fatch values from savedInstanceState
            String myString = savedInstanceState.getString("foo");
            Log.i("debug", "saved data: " + myString);
            // savedInstanceState.putString("foo", "bar");
            strfoo="bar"; set value here
        }

        @Override
        public void onRestoreInstanceState(Bundle savedInstanceState) {
          super.onRestoreInstanceState(savedInstanceState);
          String myString = savedInstanceState.getString("foo");
          Log.i("debug", "saved data: " + myString);
        }

      @Override

      public void onSaveInstanceState(Bundle savedInstanceState) {
         savedInstanceState.putString("foo", strfoo);
         super.onSaveInstanceState(savedInstanceState);

       } 
```

# jquery - MVC3 项目中的 jQuery 更新

> ID：11173041
> 
> 赞同：1
> 
> 时间：2012-06-23T21:13:29.437
> 
> 标签：jquery, asp.net-mvc-3

我正在使用 MS Visual Studio 2010。当我创建一个新的 MVC3 项目时，有一个名为 Script 的文件夹，它使用一些不是最新的 jQuery 的 jQuery 1.5.1 版本自动创建我应该如何更新它们，当我将创建一个新的 MVC3将收集 jQuery 新版本的项目？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T21:21:56.280

您可以更新创建新项目时已安装的 jQuery NuGet 包。这将为您带来最新版本的软件包。或者您可以手动下载最新的 jQuery 版本并在您的项目中引用它。或者您可以使用诸如 Google 之类的 CDN。

如果您希望每次创建新项目时都引用最新版本，则必须编写自定义项目模板。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T21:44:15.603

您可以使用 NuGet 更新 jQuery 并下载/更新许多其他有用的包。**您可以在Tools\Library Package Manager**下找到它的 UI，或使用 PowerShell 控制台（Package Manager Console）。这是[NuGet 文档](http://docs.nuget.org/)。

# node.js - 我可以使用 node.js 获取唯一的服务器机器标识符吗？

> ID：11173042
> 
> 赞同：11
> 
> 时间：2012-06-23T21:13:42.063
> 
> 标签：node.js, mac-address

我想知道是否有办法让 NODE 检索它正在运行的服务器的 MAC 地址。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-23T21:16:21.023

Node 没有内置的被访问这种低级数据的方法。

但是，您可以执行`ifconfig`并解析其输出或为节点编写 C++ 扩展，以提供检索 MAC 地址的函数。一个更简单的方法是阅读`/sys/class/net/eth?/address`：

```
var fs = require('fs'),
    path = require('path');
function getMACAddresses() {
    var macs = {}
    var devs = fs.readdirSync('/sys/class/net/');
    devs.forEach(function(dev) {
        var fn = path.join('/sys/class/net', dev, 'address');
        if(dev.substr(0, 3) == 'eth' && fs.existsSync(fn)) {
            macs[dev] = fs.readFileSync(fn).toString().trim();
        }
    });
    return macs;
}

console.log(getMACAddresses()); 
```

`eth*`该函数返回一个包含所有设备的 MAC 地址的对象。如果您想要所有设备都有一个，即使它们被称为例如`wlan*`，只需删除`dev.substr(0, 3) == 'eth'`检查。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-23T22:44:24.943

如果您只是在寻找唯一的服务器 ID，则可以采用 mongodb/bson 方法并使用服务器主机名的 md5 哈希的前 n 个字节：

```
var machineHash = crypto.createHash('md5').update(os.hostname()).digest('binary'); 
```

此代码来自[node-buffalo](https://github.com/marcello3d/node-buffalo/blob/master/lib/objectid.js)。不完美，但可能足够好，具体取决于您要执行的操作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-30T19:27:35.737

我尝试了[getmac](https://npmjs.org/package/getmac)包，但它对我不起作用（节点 v0.10，Mac OS X） - 所以我开始构建自己的：[https](https://github.com/scravy/node-macaddress) ://github.com/scravy/node-macaddress 。它适用于 Windows、OS X、Linux 和可能的每个 unix `ifconfig`:-)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-08-29T05:46:56.763

完整的答案在下面，但基本上你可以通过以下方式在 vanilla node.js 中获取该信息：

```
require('os').networkInterfaces() 
```

这将为您提供有关系统上网络设备的所有信息，包括每个接口的 MAC 地址。

您可以将其进一步缩小到 MACS：

```
JSON.stringify(  require('os').networkInterfaces(),  null,  2).match(/"mac": ".*?"/g) 
```

此外，对于纯 MAC 地址：

```
JSON.stringify(  require('os').networkInterfaces(),  null,  2).match(/"mac": ".*?"/g).toString().match(/\w\w:\w\w:\w\w:\w\w:\w\w:\w\w/g) 
```

最后一个将为您提供一个类似数组的匹配对象，其形式为：

['00:00:00:00:00:00', 'A8:AE:B6:58:C5:09', 'FC:E3:5A:42:80:18' ]

第一个元素是您的 lo 或本地界面。

[我使用https://www.miniwebtool.com/mac-address-generator/](https://www.miniwebtool.com/mac-address-generator/)随机生成了其他公共示例

如果您想更“正确”（或将其分解为更易于消化的步骤）：

```
var os = require('os');

var macs = ()=>{
  return JSON.stringify(  os.networkInterfaces(),  null,  2)
    .match(/"mac": ".*?"/g)
    .toString()
    .match(/\w\w:\w\w:\w\w:\w\w:\w\w:\w\w/g)
  ;
}

console.log( macs() ); 
```

基本上，您正在获取接口数据对象并将其转换为 JSON 文本字符串。然后你得到一个mac地址的匹配对象并将其转换为文本字符串。然后，您仅将 MAC 地址提取到一个可迭代的匹配对象中，该对象仅包含每个元素中的每个 MAC。

确实有更简洁的方法可以做到这一点，但这种方法可靠且易于阅读。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-09T20:09:41.227

这是使用命令行工具获取 MAC 地址的 node.js 代码：

```
`$ ifconfig | grep eth0 | awk '{print $5}'` 
```

对于 wlan0

```
`$ ifconfig | grep wlan0 | awk '{print $5}'` 
```

在 node.js 中，使用这个 - 将代码保存到 getMAC.js - "$ node getMAC.js" 运行

```
`// Get MAC address - $ ifconfig | grep wlan0 | awk '{print $5}'
 var exec = require('child_process').exec;
 function puts(error, stdout, stderr) { console.log(stdout) }
 exec("ifconfig | grep wlan0 | awk '{print $5}'", puts);
 ` 
```

# architecture - 从 SOA 中的编排层调用服务？

> ID：11173043
> 
> 赞同：2
> 
> 时间：2012-06-23T21:13:42.947
> 
> 标签：architecture, soa, composition, loose-coupling, reusability

面向服务的架构原则[网站](http://soaprinciples.com/)说服务组合是 SOA 中的一个重要内容。但是服务松散耦合也很重要。

这是否意味着“编排层”应该是唯一允许调用系统中服务的层？

据我了解 SOA，“编排层”将所有服务“粘合”到一个软件应用程序中。我试图在 Fig.A 和 Fig.B 上描述这一点。

两者的区别在于，在 Fig.A 中，应用程序是由服务组成的，所有的逻辑都在“编排层”中完成（所有对服务的调用都只在“编排层”中完成）。在图 B 中，应用程序由服务组成，但一个服务调用另一个服务。

图 B 中的架构是否违反了 SOA 的“服务松耦合”原则？SOA 中的服务可以调用另一个服务吗？更一般地说，在服务松散耦合、抽象、可重用性、自治等方面，图 A 上的架构能否被认为优于图 B 上的架构？

我的猜测是 A 架构更加通用，但它可以在“编排层”和所有被调用的服务之间添加一些不必要的数据传输。

![SOA 服务调用](../Images/8f0c3613442d100fc598745e50124f8a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T04:21:40.213

假设服务 1 和 2 下的所有内容都封装在它们的合约后面，那么它们是松散耦合的。然而，B 没有利用编排层释放服务 1 的能力。A 与 B 之间没有明确的对错，但有权衡取舍。图 A 需要更多的开发工作，因为 B 返回给 A 的详细信息需要提取到编排层 - 如果涉及数据列表，则 B 需要允许将一组参数作为标准传入。然而，这使得 svc 1 对 svc 2 一无所知。因此，如果服务由两个不同的团队拥有和管理，那么 A 将允许这些团队自主工作。例如，如果 svc 1 是客户信息服务 (CIS) 而 svc 2 是支付服务，则编排层可以将 CIS 数据与 Svc 2 拼接在一起，以返回客户名称列表及其最近的支付数据。在图 A 中，在编排层中使用内存中的连接来进行拼接。然后客户端调用编排层。使用 B，客户端可以直接调用服务 1，但如果您开始允许服务相互调用，您最终可能会得到一个令人讨厌的依赖关系图，包括重入调用的可能性。如果您的团队很小并且同时拥有 svc 1 和 2，那么他们可以跟踪这些依赖关系。但是，当您有不同的团队时，您可能会发现依赖关系在 B 中不容易了解或管理良好。在图 A 中，在编排层中使用内存中的连接来进行拼接。然后客户端调用编排层。使用 B，客户端可以直接调用服务 1，但如果您开始允许服务相互调用，您最终可能会得到一个令人讨厌的依赖关系图，包括重入调用的可能性。如果您的团队很小并且同时拥有 svc 1 和 2，那么他们可以跟踪这些依赖关系。但是，当您有不同的团队时，您可能会发现依赖关系在 B 中不容易了解或管理良好。在图 A 中，在编排层中使用内存中的连接来进行拼接。然后客户端调用编排层。使用 B，客户端可以直接调用服务 1，但如果您开始允许服务相互调用，您最终可能会得到一个令人讨厌的依赖关系图，包括重入调用的可能性。如果您的团队很小并且同时拥有 svc 1 和 2，那么他们可以跟踪这些依赖关系。但是，当您有不同的团队时，您可能会发现依赖关系在 B 中不容易了解或管理良好。如果您的团队很小并且同时拥有 svc 1 和 2，那么他们可以跟踪这些依赖关系。但是，当您有不同的团队时，您可能会发现依赖关系在 B 中不容易了解或管理良好。如果您的团队很小并且同时拥有 svc 1 和 2，那么他们可以跟踪这些依赖关系。但是，当您有不同的团队时，您可能会发现依赖关系在 B 中不容易了解或管理良好。

# r - 获取关于顶级错误的电话？

> ID：11173053
> 
> 赞同：7
> 
> 时间：2012-06-23T21:15:03.070
> 
> 标签：r, error-handling

当我使用 时`tryCatch`，我可以定义一个错误处理程序并使用它`conditionCall`来确定导致错误的调用。例如，

```
tryCatch(
    eval(parse(text="prnit('Hello')")),
    error=function(e) {
      cl <- conditionCall(e)
      #...
    }) 
```

我可以在 R 提示符下接听坏电话吗？到目前为止，我只找到了这个解决方案：

```
> err_hdl  <- function() {
    file1 <- tempfile("Rrawhist")
    savehistory(file1)
    rawhist <- readLines(file1)
    unlink(file1)

    cat("Error : ", tail(rawhist,1), "\n")
    return(TRUE)    
}
> options(error=err_hdl)
> prnit("Hello") 
```

但我相信一定有更直接的方法..

任何提示表示赞赏！

我发出了赏金。将接受第一个实现上述`err_hdl`功能的行为而没有平台独立的文件 I/O 的答案。

编辑——上面的代码似乎只适用于 Windows。我正在寻找引发错误的输入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-07T19:26:04.460

看起来`dump.frames`可以被告知不要转储到文件，而是转储到`.GlobalEnv`. 但是，我没有在 Mac 上测试过它。以下会有帮助吗？

```
err_hdl2 <- function() {
  dump.frames("theErr", to.file = FALSE)
  cat("What happened?\n", attr(theErr,"error.message"), "\nOh.\n")
}
options(error = err_hdl2)

> prnit(dt)
Error: could not find function "prnit"
What happened?
 Error: could not find function "prnit"

Oh. 
```

`theErr`我想在全局环境中创建对象可能有一个缺点。

```
> theErr
$`function () 
{
    dump.frames("theErr", to.file = FALSE)
    cat("What`
<environment: 0x1030fe140>

attr(,"error.message")
[1] "Error: could not find function \"prnit\"\n"
attr(,"class")
[1] "dump.frames" 
```

# python - Haystack 和 Solr- Schema 解析失败

> ID：11173056
> 
> 赞同：2
> 
> 时间：2012-06-23T21:15:22.337
> 
> 标签：python, django

我正在尝试rebuild_index，但是在构建架构（manage.py build_solr_schema）之后，我将输出复制并粘贴到schema.xml 文件中。重新启动服务器和rebuild_index（manage.py rebuild_index）后，我收到以下错误。我一直在尝试解决问题，但没有成功！我错过了什么？在粘贴新的之前，我应该先删除架构文件中的 XML 代码吗？

```
 HTTP Status 500 - Severe errors in solr configuration. Check your log files for more detailed information on what may be wrong. If you want solr to continue after configuration errors, change: <abortOnConfigurationError>false</abortOnConfigurationError> in solr.xml -------------------------------------------------------------
  org.apache.solr.common.SolrException: No cores were created, please check the logs for  errors at org.apache.solr.core.CoreContainer$Initializer.initialize    (CoreContainer.java:172) at org.apache.solr.servlet.SolrDispatchFilter.init(SolrDispatchFilter.java:96) at
  org.apache.catalina.core.ApplicationFilterConfig.initFilter(ApplicationFilterConfig.java:277) at   org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:258) at org.apache.catalina.core.ApplicationFilterConfig.setFilterDef(ApplicationFilterConfig.java:382) at org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:103) at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4649) at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5305) at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150) at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:899) at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:875) at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:618) at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:650) at org.apache.catalina.startup.HostConfig$DeployDescriptor.run(HostConfig.java:1582) at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source) at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source) at java.util.concurrent.FutureTask.run(Unknown Source) at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source) at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) at java.lang.Thread.run(Unknown Source) 
  ------------------------------------------------------------- org.apache.solr.common.SolrException: Schema Parsing Failed: Attribute name "omitN" associated with an element type "fieldtype" must be followed by the ' = ' character. at org.apache.solr.schema.IndexSchema.readSchema(IndexSchema.java:688) at org.apache.solr.schema.IndexSchema.<init>(IndexSchema.java:123) at org.apache.solr.core.CoreContainer.create(CoreContainer.java:481) at org.apache.solr.core.CoreContainer.load(CoreContainer.java:335) at org.apache.solr.core.CoreContainer.load(CoreContainer.java:219) at org.apache.solr.core.CoreContainer$Initializer.initialize(CoreContainer.java:161) at org.apache.solr.servlet.SolrDispatchFilter.init(SolrDispatchFilter.java:96) at org.apache.catalina.core.ApplicationFilterConfig.initFilter(ApplicationFilterConfig.java:277) at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:258) at org.apache.catalina.core.ApplicationFilterConfig.setFilterDef(ApplicationFilterConfig.java:382) at org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:103) at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4649) at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5305) at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150) at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:899) at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:875) at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:618) at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:650) at org.apache.catalina.startup.HostConfig$DeployDescriptor.run(HostConfig.java:1582) at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source) at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source) at java.util.concurrent.FutureTask.run(Unknown Source) at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source) at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) at java.lang.Thread.run (Unknown Source) Caused by: org.xml.sax.SAXParseException: Attribute name "omitN" associated with an element type "fieldtype" must be followed by the ' = ' character. at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException  (Unknown Source) at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.fatalError  (Unknown Source)   at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(Unknown Source) at com.sun.org.apache.xerces.internal.impl.XMLScanner.reportFatalError(Unknown Source) at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.scanAttribute(Unknown Source) at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.scanStartElement(Unknown Source) at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(Unknown Source) at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(Unknown Source) at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(Unknown Source) at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument  (Unknown Source) at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source) at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source) at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(Unknown Source) at com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(Unknown Source) at com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(Unknown Source) at org.apache.solr.core.Config.<init>(Config.java:159) at org.apache.solr.schema.IndexSchema.readSchema(IndexSchema.java:418) ... 24 more       ------------------------------------------------------------- org.xml.sax.SAXParseException: Attribute name "omitN" associated with an element type "fieldtype" must be followed by the ' = ' character. at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException (Unknown Source) at com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.fatalError (Unknown Source) at com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError  (Unknown Source) at com.sun.org.apache.xerces.internal.impl.XMLScanner.reportFatalError(Unknown Source) at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.scanAttribute(Unknown Source) at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.scanStartElement(Unknown Source) at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(Unknown Source) at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(Unknown Source) at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(Unknown Source) at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source) at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source) at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(Unknown Source) at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(Unknown Source) at com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(Unknown Source) at com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(Unknown Source) at org.apache.solr.core.Config.<init>(Config.java:159) at org.apache.solr.schema.IndexSchema.readSchema(IndexSchema.java:418) at org.apache.solr.schema.IndexSchema.<init>(IndexSchema.java:123) at org.apache.solr.core.CoreContainer.create(CoreContainer.java:481) at org.apache.solr.core.CoreContainer.load(CoreContainer.java:335) at org.apache.solr.core.CoreContainer.load(CoreContainer.java:219) at org.apache.solr.core.CoreContainer$Initializer.initialize(CoreContainer.java:161) at org.apache.solr.servlet.SolrDispatchFilter.init(SolrDispatchFilter.java:96) at org.apache.catalina.core.ApplicationFilterConfig.initFilter(ApplicationFilterConfig.java:277) at org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:258) at org.apache.catalina.core.ApplicationFilterConfig.setFilterDef(ApplicationFilterConfig.java:382) at org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:103) at org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4649) at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5305) at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150) at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:899) at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:875) at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:618) at org.apache.catalina.startup.HostConfig.deployDescriptor(HostConfig.java:650) at org.apache.catalina.startup.HostConfig$DeployDescriptor.run(HostConfig.java:1582) at java.util.concurrent.Executors$RunnableAdapter.call(Unknown Source) at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source) at java.util.concurrent.FutureTask.run(Unknown Source) at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source) at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) at java.lang.Thread.run(Unknown Source) 
```

模式输出

```
 <?xml version="1.0" ?>
        <!--
         Licensed to the Apache Software Foundation (ASF) under one or more
         contributor license agreements.  See the NOTICE file distributed with
         this work for additional information regarding copyright ownership.
         The ASF licenses this file to You under the Apache License, Version 2.0
         (the "License"); you may not use this file except in compliance with
         the License.  You may obtain a copy of the License at

           http://www.apache.org/licenses/LICENSE-2.0

          Unless required by applicable law or agreed to in writing, software
         distributed under the License is distributed on an "AS IS" BASIS,
         WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
         See the License for the specific language governing permissions and
         limitations under the License.
         -->

         <schema name="default" version="1.4">
           <types>
            <fieldtype name="string"  class="solr.StrField" sortMissingLast="true"   omitNorms="true"/>
            <fieldType name="boolean" class="solr.BoolField" sortMissingLast="true" omitNorms="true"/>
            <fieldtype name="binary" class="solr.BinaryField"/>

            <!-- Numeric field types that manipulate the value into
              a string value that isn't human-readable in its internal form,
             but with a lexicographic ordering the same as the numeric ordering,
             so that range queries work correctly. -->
           <fieldType name="int" class="solr.TrieIntField" precisionStep="0"     omitNorms="true" sortMissingLast="true" positionIncrementGap="0"/>
          <fieldType name="float" class="solr.TrieFloatField" precisionStep="0" omitNorms="true" sortMissingLast="true" positionIncrementGap="0"/>
          <fieldType name="long" class="solr.TrieLongField" precisionStep="0" omitNorms="true" sortMissingLast="true" positionIncrementGap="0"/>
          <fieldType name="double" class="solr.TrieDoubleField" precisionStep="0" omitNorms="true" sortMissingLast="true" positionIncrementGap="0"/>

          <fieldType name="tint" class="solr.TrieIntField" precisionStep="8" omitNorms="true" positionIncrementGap="0"/>
          <fieldType name="tfloat" class="solr.TrieFloatField" precisionStep="8" omitNorms="true" positionIncrementGap="0"/>
          <fieldType name="tlong" class="solr.TrieLongField" precisionStep="8" omitNorms="true" positionIncrementGap="0"/>
         <fieldType name="tdouble" class="solr.TrieDoubleField" precisionStep="8" omitNorms="true" positionIncrementGap="0"/>

         <fieldType name="date" class="solr.TrieDateField" omitNorms="true" precisionStep="0" positionIncrementGap="0"/>
        <!-- A Trie based date field for faster date range queries and date facetin. ->
       <fieldType name="tdate" class="solr.TrieDateField" omitNorms="true"  precisionStep="6" positionIncrementGap="0"/>

       <fieldType name="point" class="solr.PointType" dimension="2" subFieldSuffix="_d"/>
       <fieldType name="location" class="solr.LatLonType" subFieldSuffix="_coordinate"/>
       <fieldtype name="geohash" class="solr.GeoHashField"/>

       <fieldType name="text_general" class="solr.TextField" positionIncrementGap="100">
       <analyzer type="index">
       <tokenizer class="solr.StandardTokenizerFactory"/>
       <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt"  enablePositionIncrements="true" />
       <!-- in this example, we will only use synonyms at query time
       <filter class="solr.SynonymFilterFactory" synonyms="index_synonyms.txt" ignoreCase="true" expand="false"/>
        -->
       <filter class="solr.LowerCaseFilterFactory"/>
       </analyzer>
       <analyzer type="query">
       <tokenizer class="solr.StandardTokenizerFactory"/>
       <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="true" />
       <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignore Case="true" expand="true"/>
      <filter class="solr.LowerCaseFilterFactory"/>
      </analyzer>
     </fieldType>

     <fieldType name="text_en" class="solr.TextField" positionIncrementGap="100">

      <analyzer type="index">
       <tokenizer class="solr.StandardTokenizerFactory"/>
       <filter class="solr.StopFilterFactory"
            ignoreCase="true"
            words="stopwords_en.txt"
            enablePositionIncrements="true"
            />
      <filter class="solr.LowerCaseFilterFactory"/>
      <filter class="solr.EnglishPossessiveFilterFactory"/>
      <filter class="solr.KeywordMarkerFilterFactory" protected="protwords.txt"/>
      <!-- Optionally you may want to use this less aggressive stemmer instead of PorterStemFilterFactory:
      <filter class="solr.EnglishMinimalStemFilterFactory"/> -->
      <filter class="solr.PorterStemFilterFactory"/>
      </analyzer>
      <analyzer type="query">
      <tokenizer class="solr.StandardTokenizerFactory"/>
      <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="true"/>
       <filter class="solr.StopFilterFactory"
            ignoreCase="true"
            words="stopwords_en.txt"
            enablePositionIncrements="true"
            />
        <filter class="solr.LowerCaseFilterFactory"/>
        <filter class="solr.EnglishPossessiveFilterFactory"/>
        <filter class="solr.KeywordMarkerFilterFactory" protected="protwords.txt"/>
        <!-- Optionally you may want to use this less aggressive stemmer instead of PorterStemFilterFactory:
      <filter class="solr.EnglishMinimalStemFilterFactory"/> -->
      <filter class="solr.PorterStemFilterFactory"/>
      </analyzer>
      </fieldType>

      <fieldType name="text_ws" class="solr.TextField" positionIncrementGap="100">

      <analyzer>
        <tokenizer class="solr.WhitespaceTokenizerFactory"/>
      </analyzer>
     </fieldType>

     <fieldType name="ngram" class="solr.TextField" >
         <analyzer type="index">
    <tokenizer class="solr.KeywordTokenizerFactory"/>
    <filter class="solr.LowerCaseFilterFactory"/>
    <filter class="solr.NGramFilterFactory" minGramSize="3" maxGramSize="15"/>
    </analyzer>
    <analyzer type="query">
    <tokenizer class="solr.KeywordTokenizerFactory"/>
    <filter class="solr.LowerCaseFilterFactory"/>
     </analyzer>
     </fieldType>

     <fieldType name="edge_ngram" class="solr.TextField" positionIncrementGap="1">
     <analyzer type="index">
    <tokenizer class="solr.WhitespaceTokenizerFactory" />
    <filter class="solr.LowerCaseFilterFactory" />
    <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1"  generateNumberParts="1" catenateWords="0" catenateNumbers="0" catenateAll="0"  splitOnCaseChange="1"/>
    <filter class="solr.EdgeNGramFilterFactory" minGramSize="2" maxGramSize="15" side="front" />
    </analyzer>
    <analyzer type="query">
    <tokenizer class="solr.WhitespaceTokenizerFactory" />
    <filter class="solr.LowerCaseFilterFactory" />
    <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1"   generateNumberParts="1" catenateWords="0" catenateNumbers="0" catenateAll="0"  splitOnCaseChange="1"/>
     </analyzer>
     </fieldType>
     </types>

     <fields>
      <!-- general -->
      <field name="id" type="string" indexed="true" stored="true" multiValued="false" required="true"/>
      <field name="django_ct" type="string" indexed="true" stored="true" multiValued="false"/>
      <field name="django_id" type="string" indexed="true" stored="true"  multiValued="false"/>

      <dynamicField name="*_i"  type="int"    indexed="true"  stored="true"/>
      <dynamicField name="*_s"  type="string"  indexed="true"  stored="true"/>
      <dynamicField name="*_l"  type="long"   indexed="true"  stored="true"/>
      <dynamicField name="*_t"  type="text_en"    indexed="true"  stored="true"/>
      <dynamicField name="*_b"  type="boolean" indexed="true"  stored="true"/>
      <dynamicField name="*_f"  type="float"  indexed="true"  stored="true"/>
      <dynamicField name="*_d"  type="double" indexed="true"  stored="true"/>
      <dynamicField name="*_dt" type="date" indexed="true" stored="true"/>
      <dynamicField name="*_p" type="location" indexed="true" stored="true"/>
      <dynamicField name="*_coordinate"  type="tdouble" indexed="true"  stored="false"/>

      <field name="text" type="text_en" indexed="true" stored="true" multiValued="false" />

      <field name="price" type="text_en" indexed="true" stored="true" multiValued="false" />

      <field name="city_stay" type="text_en" indexed="true" stored="true" multiValued="false" />

      <field name="guideline" type="text_en" indexed="true" stored="true" multiValued="false" />

      <field name="state" type="text_en" indexed="true" stored="true"  multiValued="false" />

      <field name="address" type="text_en" indexed="true" stored="true"  multiValued="false" />

      <field name="pub_date" type="date" indexed="true" stored="true" multiValued="false" />

      </fields>

      <!-- field to use to determine and enforce document uniqueness. -->
      <uniqueKey>id</uniqueKey>

      <!-- field for the QueryParser to use when an explicit fieldname is absent -->

      <defaultSearchField>text</defaultSearchField>

      <!-- SolrQueryParser configuration: defaultOperator="AND|OR" -->
      <solrQueryParser defaultOperator="AND"/>
      </schema> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T22:25:55.513

Django Haystack 仅支持 Solr 3.5+

[http://django-haystack.readthedocs.org/en/latest/backend_support.html#id1](http://django-haystack.readthedocs.org/en/latest/backend_support.html#id1)

如果您使用 Solr 1.4，架构格式在 1.4 和 3.5 之间发生了变化

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-23T23:37:55.107

我没有运行 Solr，因此无法对此进行测试，但是我突然出现了一些问题（更准确地说，当我尝试漂亮打印 XML 时被标记为错误 :-)）

*   第 40 行 ( `<!-- A Trie based date field ...`) 以`->`; 应该`-->`

*   第 59 行 ( `<filter class="solr.SynonymFilterFactory" ...`) 包含`ignore Case="true"`; 应该是`ignoreCase="true"`（attr 名称中没有空格）

如果您修复了这些错误，它很可能会解决您的问题。

# asp.net - 如何使 VisualBasic2010 Web 应用程序为 .htm 文件打开一个新的浏览器窗口

> ID：11173059
> 
> 赞同：0
> 
> 时间：2012-06-23T21:15:55.033
> 
> 标签：asp.net, visual-studio-2010

在我的 Web 应用程序的主页上，当用户单击“关于”超链接控件（我的 default.aspx 中的 System.Web.UI.WebControls.HyperLink）时，我需要打开另一个包含现有 about.htm 文件的浏览器窗口。

“Purpose”和“Description”和“How to”还有其他超链接，我希望每个都打开另一个浏览器，以便用户在执行操作时可以参考这些超链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T21:29:52.520

您应该将以下代码放在 page_l;oad 事件中，

```
Hyperlink1.Attributes.Add("target","_blank") 
```

或者

您可以直接`target`将超链接控件的属性更改为`_blank`

这将在新的浏览器窗口中打开链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T21:29:56.140

System.Web.UI.WebControls.HyperLink 有一个 Target 属性，需要使用 _blank 值设置，如[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols 上的示例所示。超链接.target.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.hyperlink.target.aspx)

希望这可以帮助...

# java - Android 自定义对话框搜索栏

> ID：11173060
> 
> 赞同：1
> 
> 时间：2012-06-23T21:15:55.640
> 
> 标签：java, android, seekbar, android-dialog

我需要我的应用程序来创建一个对话框 Seekbar。但我不能让它工作。我指的是这个stackoverflow问题[Android，SeekBar in dialog](https://stackoverflow.com/questions/6424032/android-seekbar-in-dialog)，这是我的代码。

我正在创建一个菜单，当用户单击 size_config 按钮时，它应该在菜单项上显示搜索栏。

```
 }if(item.getItemId() == R.id.size_config){
        LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View layout = inflater.inflate(R.id.dialog, (ViewGroup)findViewById(R.id.layout));
        AlertDialog.Builder builder = new AlertDialog.Builder(this)
        .setView(layout);
        AlertDialog alertDialog = builder.create();
        alertDialog.show();
        SeekBar sb = (SeekBar)layout.findViewById(R.id.dialog);
        sb.setOnSeekBarChangeListener(new SeekBar.OnSeekBarChangeListener() {
            public void onProgressChanged(SeekBar seekBar, int progress, boolean fromUser){
                Log.d("Dialog to change size", "It's working");
            }

            @Override
            public void onStartTrackingTouch(SeekBar arg0) {
                // TODO Auto-generated method stub

            }

            @Override
            public void onStopTrackingTouch(SeekBar seekBar) {
                // TODO Auto-generated method stub

            }
        });
    } 
```

这是布局文件。

对话框.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:orientation="vertical"
   android:layout_width="wrap_content"
   android:layout_height="wrap_content"
   android:padding="10dp"
   android:id="@+id/layout">

<SeekBar xmlns:android="http://schemas.android.com/apk/res/android"
   android:id="@+id/dialog"
   android:layout_width="225dp"
   android:layout_height="wrap_content"/>

</LinearLayout> 
```

这是错误代码。

```
 06-24 02:31:30.369: E/AndroidRuntime(379): FATAL EXCEPTION: main
 06-24 02:31:30.369: E/AndroidRuntime(379): android.content.res.Resources$NotFoundException: Resource ID #0x7f070001 type #0x12 is not valid
 06-24 02:31:30.369: E/AndroidRuntime(379):     at android.content.res.Resources.loadXmlResourceParser(Resources.java:1874)
 06-24 02:31:30.369: E/AndroidRuntime(379):     at android.content.res.Resources.getLayout(Resources.java:731)
 06-24 02:31:30.369: E/AndroidRuntime(379):     at android.view.LayoutInflater.inflate(LayoutInflater.java:318)
 06-24 02:31:30.369: E/AndroidRuntime(379):     at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
 06-24 02:31:30.369: E/AndroidRuntime(379):     at in.isuru.animation.SnowFall.onOptionsItemSelected(SnowFall.java:189)
 06-24 02:31:30.369: E/AndroidRuntime(379):     at android.app.Activity.onMenuItemSelected(Activity.java:2195)
 06-24 02:31:30.369: E/AndroidRuntime(379):     at com.android.internal.policy.impl.PhoneWindow.onMenuItemSelected(PhoneWindow.java:730)
 06-24 02:31:30.369: E/AndroidRuntime(379):     at com.android.internal.view.menu.MenuItemImpl.invoke(MenuItemImpl.java:143)
 06-24 02:31:30.369: E/AndroidRuntime(379):     at com.android.internal.view.menu.MenuBuilder.performItemAction(MenuBuilder.java:855)
 06-24 02:31:30.369: E/AndroidRuntime(379):     at com.android.internal.view.menu.MenuDialogHelper.onClick(MenuDialogHelper.java:137)
 06-24 02:31:30.369: E/AndroidRuntime(379):     at com.android.internal.app.AlertController$AlertParams$3.onItemClick(AlertController.java:874)
 06-24 02:31:30.369: E/AndroidRuntime(379):     at android.widget.AdapterView.performItemClick(AdapterView.java:284)
 06-24 02:31:30.369: E/AndroidRuntime(379):     at android.widget.ListView.performItemClick(ListView.java:3382)
 06-24 02:31:30.369: E/AndroidRuntime(379):     at android.widget.AbsListView$PerformClick.run(AbsListView.java:1696)
 06-24 02:31:30.369: E/AndroidRuntime(379):     at  android.os.Handler.handleCallback(Handler.java:587)
 06-24 02:31:30.369: E/AndroidRuntime(379):     at android.os.Handler.dispatchMessage(Handler.java:92)
 06-24 02:31:30.369: E/AndroidRuntime(379):     at android.os.Looper.loop(Looper.java:123)
 06-24 02:31:30.369: E/AndroidRuntime(379):     at android.app.ActivityThread.main(ActivityThread.java:4627)
 06-24 02:31:30.369: E/AndroidRuntime(379):     at java.lang.reflect.Method.invokeNative(Native Method)
 06-24 02:31:30.369: E/AndroidRuntime(379):     at java.lang.reflect.Method.invoke(Method.java:521)
 06-24 02:31:30.369: E/AndroidRuntime(379):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
 06-24 02:31:30.369: E/AndroidRuntime(379):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
 06-24 02:31:30.369: E/AndroidRuntime(379):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T21:58:11.703

这是添加 SeekBar 对话框的方法，

```
Dialog dialog = new Dialog(this);
dialog.setContentView(R.layout.dialog);
dialog.setTitle("Set size!");
dialog.setCancelable(true);
//there are a lot of settings, for dialog, check them all out!
dialog.show();

seekbar = (SeekBar) dialog.findViewById(R.id.size_seekbar);
final TextView tv_dialog_size = (TextView) dialog.findViewById(R.id.set_size_help_text);

// and you can call seekbar.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {
      //implement methods.
} 
```

对话框布局xml是，

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
     android:id="@+id/layout"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:orientation="vertical"
     android:padding="2dp"
     android:layout_gravity="center" >

<TextView
    android:id="@+id/set_size_help_text"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"

    android:text="Please select snowflake size"
    android:textSize="25dp" />

<SeekBar
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/size_seekbar"
    android:layout_width="250dp"
    android:layout_height="wrap_content"
    android:layout_marginTop="10dp" />

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T21:30:25.947

这个电话：

```
View layout = inflater.inflate(R.id.dialog, (ViewGroup)findViewById(R.id.layout)); 
```

是错的。你需要`R.layout.dialog`（你想用它来膨胀视图的布局资源）

```
View layout = inflater.inflate(R.layout.dialog, null); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-10T14:52:47.660

找到了答案...对于那些带有自定义对话框的搜索栏，它们需要初始化为-

```
SeekBar seekBar = (SeekBar)dialog.findViewById(R.id.valueBar); 
```

# javascript - 使用文件输入选择多个文件时删除单个文件

> ID：11173064
> 
> 赞同：5
> 
> 时间：2012-06-23T21:16:28.607
> 
> 标签：javascript, html, file

当允许用户选择多个文件时，是否可以从要上传的文件列表中删除单个文件？例如，我有一个看起来有点像这样的输入：

```
<input type = 'file' name = 'file' id = 'file' multiple = 'multiple' /> 
```

用户选择4张照片，1.jpg、2.jpg、3.jpg和4.jpg。是否可以删除 4.jpg，因为用户改变了主意并且不想上传那个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T22:17:26.163

简短的回答是“不”。[不可能](https://developer.mozilla.org/en/HTML/Element/Input#File_inputs)从脚本中更改`file input`元素的值：否则它将是猛犸象的安全漏洞大小。让我向你保证：一些浏览器（IE，就是关于你的！）在处理文件输入时变得非常挑剔。

但是您可以使用以下方法：让用户上传任意数量的文件（尽管设置一些限制是谨慎的），但将它们放入一些临时存储中。只有当用户真正表达他们希望保存这些文件所附加到的实体时，才将这些文件移动到永久状态。

或者是时候考虑使用一些后备机制、Flash 或类似的东西了。事实上，这样做还有另一个原因：IE8 不支持`multiple`文件选择器的属性。

# autocomplete - 允许在 typeahead bootstrap 中移动箭头键

> ID：11173066
> 
> 赞同：2
> 
> 时间：2012-06-23T21:16:38.493
> 
> 标签：autocomplete, twitter-bootstrap, arrow-keys, typeahead

我真的很激动，因为我的代码非常适合我（见下文），但是我不能使用箭头键在结果列表中向上/向下移动。

在[演示](http://twitter.github.com/bootstrap/javascript.html#typeahead)中，此功能也不可用，但是我知道它已在[jQuery autocomplete](http://jqueryui.com/demos/autocomplete/)中启用，所以我想知道你们中是否有人让它也适用于 typeahead？

```
<input type="text" class="span3" style="margin: 0 auto;" data-provide="typeahead" data-items="13" data-source='[<?php
                $ii=0;
                while($row = mysql_fetch_array($resultatOrter)){
                    if($i!=0){
                        echo ',';
                    }
                echo '"'.$row['ortnamn'].'"';
                $i++;
            } ?>]'> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T21:41:27.713

此问题已在[此处](https://github.com/twbs/bootstrap/issues/3313)报告。似乎他们根据另一个问题修复了它，然后在 2.04 中再次破坏了它。这可能不是事实，这只是一个猜测。我在 Firefox 中尝试过它，它对我来说就像你说的那样坏了。

我建议找一份 2.03 的副本，看看是否可行。（您可能可以在引导存储库 @ [https://github.com/twbs/bootstrap上查找旧版本](https://github.com/twbs/bootstrap)

[这](https://github.com/twbs/bootstrap/issues/3741)提到他们知道并计划在 2.1.0 中解决该问题。2.03 应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-20T13:46:25.330

这个问题在 2.2.1 中仍然存在，所以我做了 likestoski 提到的更改来解决这个问题。我试图对他的回答进行投票/评论，但我没有足够的声望点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T10:40:29.850

检查 jQuery 版本。它适用于 jQuery 1.7.1

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-12T06:14:26.543

这已在 bootstrap 2.2.2 中修复

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-27T14:21:53.667

在使用@Theo 的建议后，我在 2.1 wip 周围进行了研究，发现如果您修改 bootstrap.js 中的 keyup 处理程序以使用 2.1 wip（如下）中的代码，您将再次使您的箭头向上和向下工作。

```
keyup: function (e) {
      switch(e.keyCode) {
        case 38: // up arrow
            e.preventDefault()
            this.prev()
            break

        case 40: // down arrow
            e.preventDefault()
            this.next()
            break 
```

# html - 我应该将 HTML 5 用于视频/音频吗？

> ID：11173068
> 
> 赞同：0
> 
> 时间：2012-06-23T21:17:01.680
> 
> 标签：html, uploading

我想使用 HTML 5 来观看视频/音频，但我有一些顾虑。第一：HTML 5 仅在 IE 9+ 中受支持。第二：对于支持/不支持的所有不同扩展，如 mp4、wav 和 webm，我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T21:33:28.070

不同的浏览器支持不同的扩展。解决方案是……如果 IE 支持 MP4，那么您还需要拥有同一视频文件的 WebM 或 Ogg 版本，以确保视频的跨浏览器支持（Firefox、Chrome）。

这是一个很棒的基于 HTML5 的视频/音频播放器。如果用户使用较旧的浏览器，播放器会“退回”到基于 Flash 的播放器。 [http://videojs.com/](http://videojs.com/)

您可能会发现这有助于转换为各种 HTML5 支持的视频格式... [http://easyhtml5video.com/](http://easyhtml5video.com/)

基于云的编码（付费服务）：http: [//zencoder.com/](http://zencoder.com/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-23T21:27:05.820

我看不出 HTML5 与上传音频/视频有什么关系。HTML 是一个规范。您想具体如何上传内容（上传的内容无关紧要）？

用户代理 x 支持 HTML5，但大多数情况下是不正确的。你可能会说用户代理 x 支持 HTML5 的那些特性（顺便说一句，这还没有完成）。

如果有的话：IE9 不支持 HTML5 草案的所有功能。IE10 越来越接近（在谈论 IE 时，接近是一个相对的东西）。

> 对于支持/不支持的所有不同扩展，如 mp4、wav 和 webm，我该怎么办？

听起来您正在寻找播放器而不是上传者。如果是这种情况，并且您希望支持尽可能多的客户端（取决于要求），您将不得不对上传的文件进行重新编码。您可以将其重新编码为不同的格式，并且可以通过实现对 Flash 的回退来处理对不同用户代理（或缺少）HTML5 元素的支持。

对于音频，我在一些项目中使用了[Sound Manager 2](http://www.schillmania.com/projects/soundmanager2/)（即使用原生 html5 音频 + 回退到 flash）。

# cakephp - Cakephp 和 Jquery

> ID：11173070
> 
> 赞同：0
> 
> 时间：2012-06-23T21:17:29.817
> 
> 标签：cakephp, jquery

我正在创建一个 Cakephp 应用程序。我的问题是我的 Jquery 在我第一次加载页面时运行良好。我的意思是当页面打开或第一次调用控制器操作时。但是当我尝试使用 ajax 渲染视图时。虽然视图渲染成功，但类和 ID 不是由 Jquery 操作的。我的意思是我的 jquery 不起作用。如果我通过 Ajax 渲染任何视图。

虽然我发现在渲染视图上使用相同的技巧。但我不认为这是一个好方法。因为我写了很多特殊的布局，我把所有的都结合在了特殊的布局之上。不可能将它分开并为特定视图编写它。

帮助我为什么在我的类 id 都相同的情况下渲染视图失败。？

示例代码..BUt 如果我的任何元素重新加载，它会通过 ID 或 CLASS MY JQUERY 失败。

```
 jQuery(document).ready(function(){
    //Sidebar Accordion Menu:
    jQuery("#main-nav li ul").hide(); // Hide all sub menus
    jQuery("#main-nav li a.current").parent().find("ul").slideToggle("slow"); // Slide down the current menu item's sub menu
    jQuery("#main-nav li a.nav-top-item").click( // When a top menu item is clicked...
    function () {
        jQuery(this).parent().siblings().find("ul").slideUp("normal"); // Slide up all sub menus except the one clicked
        jQuery(this).next().slideToggle("normal"); // Slide down the clicked sub menu
        return false;
    }
);
    jQuery("#main-nav li a.no-submenu").click( // When a menu item with no sub menu is clicked...
    function () {
        window.location.href=(this.href); // Just open the link instead of a sub menu
        return false;
    }
);
    // Sidebar Accordion Menu Hover Effect:
    jQuery("#main-nav li .nav-top-item").hover(
    function () {
        jQuery(this).stop().animate({ paddingRight: "25px" }, 200);
    },
    function () {
        jQuery(this).stop().animate({ paddingRight: "15px" });
    }
);

    //Close button:
    jQuery(".close").click(
    function () {
      jQuery(this).parent().fadeTo(400, 0, function () { // Links with the class "close" will close parent
            jQuery(this).slideUp(400);
        });
        return false;
    }
);

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T23:14:01.663

像素主义是对的。在 ajax 请求的回调中，您需要执行 javascript 以将事件附加到已在 AJAX 请求中加载的新 DOM 元素。

还有一些方法可以将事件附加到现在或将来存在的 DOM 元素，这意味着您可以执行一次 Javascript（在窗口加载时），甚至可以在通过 AJAX 加载的新 DOM 元素上运行。

请参阅 jQuery 的 'live' 方法：[http](http://api.jquery.com/live/) ://api.jquery.com/live/请注意，此方法实际上在 jQuery 1.7 中已弃用，但新的 'on' 方法 (http://api.jquery.com/on/ ) 如果你以正确的方式调用它，应该能够做同样的事情。

另请参阅本文以获得对不同类型事件绑定的良好解释：[http](http://www.alfajango.com/blog/the-difference-between-jquerys-bind-live-and-delegate/) ://www.alfajango.com/blog/the-difference-between-jquerys-bind-live-and-delegate/ 同样，其中描述的方法文章已被弃用，取而代之的是新的“on”方法，但这些解释在决定如何使用“on”方法时应该仍然有用。

希望有帮助！

PS - 如果您仍然无法粘贴一些代码。

编辑：

我看过你的代码。我不会为您重写所有内容，但为了给您一个想法，您将替换此块：

```
jQuery("#main-nav li a.no-submenu").click( // When a menu item with no sub menu is clicked...
    function () {
        window.location.href=(this.href); // Just open the link instead of a sub menu
        return false;
    }
); 
```

像这样：

```
jQuery(document).on('click', "#main-nav li a.no-submenu", function () {
        window.location.href=(this.href); // Just open the link instead of a sub menu
        return false;
}); 
```

顺便说一句，我还没有测试过那个代码，但它应该给你一些可以使用的东西。

这里有新的“on”方法的进一步解释：http: [//blog.jquery.com/2011/09/28/jquery-1-7-beta-1-released/](http://blog.jquery.com/2011/09/28/jquery-1-7-beta-1-released/)

# asp.net - ')' 附近的语法不正确。尝试将值插入数据库时

> ID：11173073
> 
> 赞同：2
> 
> 时间：2012-06-23T21:18:00.157
> 
> 标签：asp.net, sql, vb.net, visual-studio-2010, sql-server-2008

我是新手，这是我的第一个问题。

我正在尝试向数据库中插入一个值并收到错误消息

> ')' 附近的语法不正确。

并`cmd.ExecuteNonQuery()`突出显示。这是我的代码：

```
con.Open()
cmd = New SqlCommand("INSERT INTO orders ('" + IDProduct.Text + "')", con)
cmd.ExecuteNonQuery()
con.Close() 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-23T21:22:57.033

首先，**从不**，**从不** **构建**这样的 sql 查询。请改用参数化查询。

其次，您的 sql 命令中缺少“VALUES”。

```
INSERT INTO orders VALUES ( .... ) 
```

**编辑：**

第三，正如 marc_s 所建议的，最好也指定列名。这样你就可以避免以后出现一些意外。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T21:24:31.860

SQL 语句 INSERT INTO 的语法有两种形式

您没有指定列名

```
INSERT INTO table VALUES (value1, value2, value3,...) 
```

或者您同时指定列名和值

```
INSERT INTO table (col1, col2, col3,...)
             VALUES (value1, value2, value3,...) 
```

当指定所有字段值时，应使用第一种情况。
当您要插入特定列的值时，应使用第二种情况

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T21:19:48.637

应使用的值：

```
INSERT INTO table_name
VALUES (value1, value2, value3,...) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-23T21:25:25.120

插入查询语法为：

```
insert into <tablename> values(col1 <datatype>,col2 <datatype>) 
```

你错过了`values`这就是为什么你得到错误修改这一行：

```
 cmd = New SqlCommand("INSERT INTO orders values ('" + IDProduct.Text + "')", con) 
```

# java - 如何在播放框架 1.2.x 中获取当前的 ssl 客户端 X509 证书

> ID：11173075
> 
> 赞同：0
> 
> 时间：2012-06-23T21:18:18.553
> 
> 标签：java, ssl, playframework, netty, playframework-1.x

正在上映！此处的文档[http://www.playframework.org/documentation/1.2.3/configuration](http://www.playframework.org/documentation/1.2.3/configuration)在信任管理器部分**中**说，`play.netty.clientAuth`您可以为 SSL 握手请求客户端证书，

我想在游戏中获得客户端证书以针对我自己的数据库进行身份验证！1.2.x 控制器，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T13:04:45.853

您提到的文档都是关于使客户端 - 播放服务器连接安全，而不是关于数据库连接。如果您想要安全的数据库连接（不知道您使用的是什么数据库） - 每个数据库都有自己的方式来做同样的事情 - 检查这些链接[PostgreSQL](http://www.postgresql.org/docs/9.1/static/ssl-tcp.html)和[MySQL](http://dev.mysql.com/doc/refman/5.1/en/secure-connections.html)。

# ruby-on-rails-3 - 如何为两个控制器的标签添加额外的属性（Ruby on Rails）

> ID：11173077
> 
> 赞同：0
> 
> 时间：2012-06-23T21:18:40.513
> 
> 标签：ruby-on-rails-3, google-plus-one

我正在为我的应用程序中的某些项目实现 Google +1 按钮。项目由不同控制器中的两个控制器操作显示。

Google +1 要我修改我的

```
<html> 
```

标记为

```
<html itemscope itemtype="http://schema.org/ItemPage"> 
```

对于那些显示项目的页面。处理这个问题的最佳方法是什么？我想过两种不同的解决方案。

1）我是否应该为这些控制器创建新的布局文件，这些文件将具有修改后的 html-tag，但应该与默认布局相同。然后我需要将布局文件的主要部分放入一个部分中，这样我就不需要复制它了。这个解决方案听起来有点太复杂了。

2) 另一种解决方案可能是使用 content_for。然后我需要定义一种默认的 content_for ，它应该在所有其他控制器中使用并在这两个控制器中覆盖它。

稍后我可能还需要为另一个控制器添加类似的属性，因此该解决方案应该允许我轻松更改每个控制器操作的属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T23:00:46.083

你可以只使用嵌套布局吗？

例如：

`app/views/layouts/google_plus.html.erb`

```
<% content_for :html_attrs do %>itemscope itemtype="http://schema.org/ItemPage"<% end %>

<%= render :template => 'layouts/application' %> 
```

`app/views/layouts/application.html.erb`

```
<html <% content_for( :html_attrs ) %>> 
```

并设置`google_plus`为这些控制器的布局。

（Google 按钮依赖于 JavaScript，对吗？如果是这样，您也可以使用这种技术嵌入 JavaScript，从而在这些页面中添加属性。）

如果您希望能够在每个控制器的基础上任意设置 attrs，那么只需：

控制器

```
def show

  @html_attrs = 'itemscope itemtype="http://schema.org/ItemPage"'

end 
```

布局

```
<html <%= @html_attrs %>> 
```

显然，您可能希望以某种方式将其概括为适用于多个操作。

# iphone - cocos2d 中的更新分数会降低帧率

> ID：11173078
> 
> 赞同：0
> 
> 时间：2012-06-23T21:18:49.353
> 
> 标签：iphone, objective-c, cocos2d-iphone

我正在开发一个游戏，我会更新玩家已经离开的高度。这是我的代码：

```
self.intScore++;
[self.lblScore setString:[NSString stringWithFormat:@"%d", self.intScore]]; 
```

但是当我用当前分数设置 lblScore 时，帧率从 60fps 下降到 40fps +-

我正在使用 iPhone 4 进行测试。

如果我评论 [self.lblScore... 则帧率保持在 60fps，但分数不会更新。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T21:50:23.400

来自[cocos2D 文档](http://www.cocos2d-iphone.org/api-ref/0.99.2/interface_c_c_label.html)：

> 更改字符串与创建新的 CCLabel 一样昂贵。要获得更好的性能，请使用 CCLabelAtlas

使用 a`CCLabelAtlas`来提高你的表现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T01:49:18.453

好的，这就是我为解决此问题所做的工作。

我有一个功能可以每毫秒更新一次分数，是的，这太糟糕了。所以我改变了分数更新发生的少一点。

我将此添加到 .h 文件中

```
@property (nonatomic,assign) int slowScore; 
```

并将其添加到我在 .m 文件中的函数中

```
if(slowScore < 5){
  slowScore++;            
}else if(slowScore == 5){
  self.intScore = self.intScore + 5;
  slowScore = 0;
} 
[self.lblScore setString:[NSString stringWithFormat:@"%d", self.intScore]]; 
```

通过这样做，我能够保持相同的分数，但它会更新 leed 时间，通过这样做，我的帧率保持在 60fps :)

+1 @jonmorgan 建议更改 CCLabelAtlas。

我使用 CCLabelTTF 和 CCLabelAtlas 测试了我的新代码，并且都将帧速率保持在 60fps，但是使用代码的其他部分运行一些测试，CCLabelAtlas 的性能要好得多。

# java - Glassfish 服务器 jdk 未找到

> ID：11173081
> 
> 赞同：0
> 
> 时间：2012-06-23T21:19:48.593
> 
> 标签：java, eclipse, jakarta-ee, ide, jdk1.6

我将用 Eclipse 设置 glassfish。Glassfish 服务器已安装 eclipse，但现在当我尝试运行任何 jsp 时，它显示此错误。

**“GlassFish v3 需要 JDK 1.6 而不是 JRE。请在服务器属性的“运行时环境”部分添加/选择正确的 JDK。”**

我搜索了很多，我也看到了这[1、2](https://stackoverflow.com/questions/7638748/glassfish-in-eclipse-doesnt-seem-to-see-my-jdk)[个](https://stackoverflow.com/questions/6082936/glassfish-in-eclipse-complains-glassfish-v3-requires-a-jdk-1-6-and-not-a-jre)问题，但找不到解决方案。请谁能告诉我为什么会出现这个问题及其逐步解决方案？
请记住，我已经安装了 java7，这是由于 java7 要求的 jdk1.6。
我认为它将是 1.6 或更高版本。
谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T21:41:12.937

我找到了解决方案。实际上问题是eclipse无法找到jdk，因为glassfish需要jdk来运行文件（不仅仅是jre）。因此，当我编辑它时，我能够成功运行:)。这个[链接](https://forums.oracle.com/forums/thread.jspa?messageID=7033028)对我帮助很大

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-15T02:36:51.487

确保已安装 jdk。查看 C:\Program Files\Java\jdk1.6.XXXX （我的说 0_16）。如果里面有东西，jdk 可能已经安装，如果没有，你可以从[http://java.sun.com/javase/downloads/index.jsp获取 jdk](http://java.sun.com/javase/downloads/index.jsp)

这是错误消息有点 foobars ya 的地方。

开始 Eclipse，忽略该消息。转到 Window>Preferences 然后在 +Java+Installed JREs 下点击 Add。选择标准虚拟机然后下一步

JRE Home = C:\Program Files\Java\jdk1.6.XXXX 其余部分应自动填写。点击完成。最重要的！单击新 jdk 运行时的首选项窗口中的复选框...我不知道为什么它是必要的，但它肯定是...仍在首选项窗口中。（可能需要点击 Okay，然后重新打开 Preference 窗口）

进入 +Server，运行时环境 选择 Glassfish SRE，点击 Edit... 从 JRE 下拉菜单中抓取 JDK，然后点击 Finish 点击 Okay。转到 Servers Veiw（可能在控制台视图下方）。右键单击捆绑的 Glassfish...Server 并单击重新启动/启动

# wpf - 如何使用 HLSL 制作外发光效果？

> ID：11173089
> 
> 赞同：5
> 
> 时间：2012-06-23T21:21:53.550
> 
> 标签：wpf, hlsl

在 WPF OuterGlowBitmapEffect 中，Net4.0 不再支持也不呈现。DropShadow 有一些共同点，在我的情况下是不可接受的。我最初的目标是在 AeroGlass 窗口上为黑色 ClearType 文本制作白色模糊背景，使其在黑暗场景中更具可读性。我开始玩 fx 和 HLSL。它非常有趣且功能强大，但我仍然无法接近 OuterGlowBitmapEffect。

我当前的虚拟版本反映了这个想法：

```
sampler2D  Sampler : register(S0);
#define PI 3.14f
float4 main(float2 uv : TEXCOORD) : COLOR
{
    float4 px = tex2D(Sampler, uv);

    /*
    if (px.a > 0.9)
    {
        return px;
    }
    */

    const float d = 3;

    int cnt = 0;
    float a = 0;
    for (float x = -0.1*d; x < 0.1*d; x += 0.05*d)
    {
        a += tex2D(Sampler, uv + float2(x, 0)).a;
        a += tex2D(Sampler, uv + float2(0, x)).a;
        a += tex2D(Sampler, uv + x).a;
        cnt += 3;
    }
    a /= cnt;

    float4 s = a;

    float4 r = float4(px.rgb*px.a + s.rgb*(1-px.a), max(px.a, a));

    return r;
} 
```

顺便说一句：我可以获得 DropShadowEffect 的 HLSL 源以将其用作参考吗？有人可以向我指出任何语言的 OuterGlowEffect 算法吗？

注意：Windows 7 Aero Glass 标题栏具有这样的效果，使标题更具可读性！这正是我希望在窗口其他部分的文本所具有的（已应用 DwmExtendFrameIntoClientArea）![航空玻璃窗标题](../Images/22dda23e8c822f80d877998251cd235f.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T22:22:28.493

总体思路是先渲染白色文字，然后再模糊。最后使用模糊的白色文本作为黑色文本的背景图像。

您的着色器是正确的模糊，但它的效率有些低（例如 x=0 的冗余样本）。您可以使用两个通道创建一个很好的大模糊：一个水平模糊和一个垂直模糊。HLSL 代码：

```
float4 PS_BlurHorizontal( float2 Tex : TEXCOORD0 ) : COLOR0
{
    float Color = 0.0f;

    Color += tex2D(sampler, float2(Tex.x - 3.0*blurSizeX, Tex.y)) * 0.09f;
    Color += tex2D(sampler, float2(Tex.x - 2.0*blurSizeX, Tex.y)) * 0.11f;
    Color += tex2D(sampler, float2(Tex.x - blurSizeX, Tex.y)) * 0.18f;
    Color += tex2D(sampler, Tex) * 0.24f;
    Color += tex2D(sampler, float2(Tex.x + blurSizeX, Tex.y)) * 0.18f;
    Color += tex2D(sampler, float2(Tex.x + 2.0*blurSizeX, Tex.y)) * 0.11f;
    Color += tex2D(sampler, float2(Tex.x + 3.0*blurSizeX, Tex.y)) * 0.09f;

    return Color;
}

float4 PS_BlurVertical( float2 Tex : TEXCOORD0 ) : COLOR0
{
    float Color = 0.0f;

    Color += tex2D(sampler, float2(Tex.x, Tex.y - 3.0*blurSizeY)) * 0.09f;
    Color += tex2D(sampler, float2(Tex.x, Tex.y - 2.0*blurSizeY)) * 0.11f;
    Color += tex2D(sampler, float2(Tex.x, Tex.y - blurSizeY)) * 0.18f;
    Color += tex2D(sampler, Tex) * 0.24f;
    Color += tex2D(sampler, float2(Tex.x, Tex.y + blurSizeY)) * 0.18f;
    Color += tex2D(sampler, float2(Tex.x, Tex.y + 2.0*blurSizeY)) * 0.11f;
    Color += tex2D(sampler, float2(Tex.x, Tex.y + 3.0*blurSizeY)) * 0.09f;

    return Color;
}
// weights: 0.09 + 0.11 + 0.18 + 0.24 + 0.18 + 0.11 + 0.9 = 1
// By default, weigths are symmetrical and sum up to 1,
// but they don't necessarily have to.
// You can change the weights to create more fancy results. 
```

这两个 7 样本通道模拟 7x7 高斯模糊（14 个样本而不是 49 个）。您可以使用更多样本来改善结果（使模糊更宽），或者只是调整权重以创建更柔和的外观。

# c# - C# 编辑器类视图

> ID：11173092
> 
> 赞同：0
> 
> 时间：2012-06-23T21:22:18.053
> 
> 标签：c#, visual-studio, editor

有没有一种方法可以使 Visual Studio 2010 中的 C# 编辑器的行为类似于 Visual Basic 编辑器，其中左侧组合框允许您选择一个对象，而右侧组合框仅显示其事件/方法，如 VB？

我正在处理一个带有很多控件和方法（Devexpress Ribbon Form）的表单，所有的控件、它们的方法、表单方法都出现在正确的组合框中，现在导航到表单方法真的很麻烦，

或者 Visual Studio 中是否有内置的东西可以用来在方法之间快速导航？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T21:32:16.393

`Tools`-> `Options`-> `C#`->`General`

选中组下的**导航栏**复选框`Display`

![在此处输入图像描述](../Images/057aa0fc54b98b0db00b9421454e79a9.png)

# jquery - 从 JSON 字符串返回特定对象？

> ID：11173093
> 
> 赞同：3
> 
> 时间：2012-06-23T21:22:29.540
> 
> 标签：jquery, json

我在 ASP.NET 页面上使用 JQuery 创建脚本。有一个如下所示的 JSON 字符串：

```
<input id="hfImages" type="hidden" value="[
{"ProductID": "000001",
 "Small": "http://myimages.com/images/I/75.jpg",
 "Medium": "http://myimages.com/images/I/160.jpg",
 "Large": "http://myimages.com/images/I/320.jpg",
 "Thumb": "http://myimages.com/images/I/30.jpg"},

{"ProductID": "000002",
 "Small": "http://myimages.com/images/I/75ab.jpg",
 "Medium": "http://myimages.com/images/I/160j.jpg",
 "Large": "http://myimages.com/images/I/320y.jpg",
 "Thumb": "http://myimages.com/images/I/30ii.jpg"},

{"ProductID": "000003",
 "Small": "http://myimages.com/images/I/75.jpg",
 "Medium": "http://myimages.com/images/I/160.jpg",
 "Large": "http://myimages.com/images/I/320.jpg",
 "Thumb": "http://myimages.com/images/I/30.jpg"}
]"/> 
```

我从这个字符串创建一个对象：

```
var images = $.parseJSON($("#[id*='hfImages']").val()); 
```

有一个调用的 var`ProductID`包含我需要从这个 JSON 字符串中获取的“ProductID”的值，但我不知道该怎么做。最终（一旦我从这个字符串中检索到正确的数据），我希望能够做这样的事情：

```
$("#productImages img.small").src(image[0].Small)
$("#productImages img.medium").src(image[0].Medium)
$("#productImages img.large").src(image[0].Large)
$("#productImages img.thumb").src(image[0].Thumb) 
```

我已经看到循环遍历 JSON 对象直到找到所需的“键”的示例，但我认为有一种更简单的方法可以使用`.filter`or `.map`？

我对 Javascript/JQuery 和 JSON 非常陌生。***好像***我有一个名为“ProductID”的*键*，但我正在阅读的所有内容都不是指一个键。好像，名称/值中的每个名称都被视为一个键。

我找到一个如何做到这一点的好例子的问题可能与我不知道这里涉及的所有内容的正确术语有关。

鉴于所需的 ProductID 作为字符串存储在 var ProductId 中，有人可以在 JQuery 中向我展示如何从上述 JSON 中获取对象的示例吗？(var ProductID = "000002";)

我也很感激任何关于 JSON 和 JQuery 的良好参考的链接。我去过 json.org 和其他几个网站，但就我的知识水平而言，它们并不是很有帮助。:S

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T21:26:11.097

如果要查找具有给定产品 ID 的相应元素，可以使用该[`.grep()`](http://api.jquery.com/jQuery.grep/)函数。

像这样：

```
var productID = '000002';
var images = $.parseJSON($("#[id*='hfImages']").val());
var filteredImages = $.grep(images, function() {
    return this.ProductID == productID;
});

if (filteredImages.length > 0) {
    // at least one element inside the images array matched the filter criteria
    var product = filteredImages[0];

    // you could use product.Small, product.Medium, ... here
} 
```

# html - html占位符属性

> ID：11173095
> 
> 赞同：0
> 
> 时间：2012-06-23T21:23:04.983
> 
> 标签：html

我对 html 5 相当陌生，我面临这样一种情况，我希望一个文本类型的输入标签包含多个字段和相应的占位符，这些占位符在输入这些字段时消失。有可能吗？

让我举个例子说清楚-

```
<body>
name: <input type="text" placeholder="first name, second name">
</body> 
```

现在我希望“名字”在填充时消失，而“第二个名字”仍然显示。那怎么办？（如果有的话）。请帮帮我。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T05:28:46.723

它不能在 HTML 中完成，因为该`placeholder`属性被定义为以特殊方式工作（当支持时），并且您不能在 HTML 中覆盖它。您可以在 JavaScript 中模拟所需的行为（不是微不足道的），但是在 JavaScript 中完成这一切而不是使用`placeholder`属性会更安全。

如果以特定格式输入数据相关，例如“名，名”，则唯一合理安全的方法是在字段前以静态内容形式提供此信息。（这只是相当安全，因为人们可能很容易错过或误解甚至明确的说明。）确保您清楚地表明名称的各个部分是否真的要用逗号分隔，正如您当前的表述可能暗示的那样。

再说一次，如果需要特定的订单，通常最好有单独的字段。

# jquery - 检测输入文本的变化 (textarea)

> ID：11173101
> 
> 赞同：0
> 
> 时间：2012-06-23T21:24:07.907
> 
> 标签：jquery, textarea

我有一个文本区域，用户可以在其中添加一些文本。提交文本区域后，用户会看到他或她输入的文本，但它显示的是列表中的每个单词。

```
<div id=0> "word0" </div>
<div id=1> "word1" </div> 
```

现在此页面还将每个单词存储在一个数组中：

```
WordArr[0] = word0;
WordArr[1] = word1;
... 
```

现在用户可以点击每个单词，点击单词的 WordArr 变为 `WordArr[0][0] = "clicked";`

现在这一切都很好。用户现在可以使用 php 将文本保存在 mysql 数据库中。数据库还存储没有 div 代码的原始文本。

但是用户也可以选择编辑文本。在这种情况下，我将原始文本加载到 textarea 中，但这次我需要知道用户是否删除了哪些单词以及用户是否在 textarea 的任何位置添加了一些单词。简而言之，我需要跟踪已更改的 div。或者是否已将任何内容添加到原始文本区域。所以用户不需要再次重新选择单词。

假设原文是：

> 你好，我的 jQuery 朋友。我今天很开心。

然后也许用户删除或添加一些东西到这个文本区域：

> 你好，我的朋友。我今天很开心。

那么我将如何获得对输入的原始字符串的更改，仍然保留已单击的 div？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T21:31:11.143

我建议维护一个带有单词的对象，用于跟踪所选单词的键。然后在输入空格或完成编辑后，检查存在哪些单词。单击一个单词调用`handleWordClick(word)`并最终调用`getFinal()`以获取这样的对象数组`{word: "apple", clicked: true}`。

```
var words = [],
    clicks = {};

var checkWords = function() {    
     words = $(this).val().split(" ");
     $("#out").val(words.join(","));
};
//call this from whatever event a word click triggers
var handleWordClick = function(word) {
    clicks[word] = true;    
};
//to get all of your data, run this
var getFinal = function() {
    return words.map(function(word) {
        return {
            word: word,
            clicked: clicks[word]
        };
    });
}

$("#in").keydown(function(event) {
    //once they enter space, check what the words are
    if( event.keyCode == 32 ) {
        checkWords.call(this);
    }        
})
//when they're done editing, check what the words are
$("#in").blur(checkWords)
​ 
```

# css - 仅在 IE 上应用样式

> ID：11173106
> 
> 赞同：202
> 
> 时间：2012-06-23T21:24:36.450
> 
> 标签：css, internet-explorer

这是我的 CSS 块：

```
.actual-form table {
  padding: 5px 0 15px 15px;
  margin: 0 0 30px 0;
  display: block;
  width: 100%;
  background: #f9f9f9;
  border-top: 1px solid #d0d0d0;
  border-bottom: 1px solid #d0d0d0;
} 
```

我只希望 IE 7、8 和 9 能够“看到”`width: 100%`

完成此任务的最简单方法是什么？

* * *

## 回答 #1

> 赞同：323
> 
> 时间：2016-04-06T10:49:09.290

```
@media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) {
   #myElement {
        /* Enter your style code */
   }
} 
```

说明：它是 Microsoft 特定的媒体查询。使用 Microsoft IE 特有的 -ms-high-contrast 属性，它只会在 Internet Explorer 10 或更高版本中被解析。我已经使用了媒体查询的两个有效值，所以它只会被 IE 解析，无论用户是否启用了高对比度。

* * *

## 回答 #2

> 赞同：108
> 
> 时间：2012-06-23T21:27:16.970

**2017 年更新**

根据环境，条件注释已在 IE10+ 中[正式弃用和删除。](https://msdn.microsoft.com/en-us/library/hh801214(v=vs.85).aspx)

* * *

**原来的**

最简单的方法可能是在您的 HTML中使用[Internet Explorer 条件注释：](http://msdn.microsoft.com/en-us/library/ms537512%28v=vs.85%29.aspx)

```
<!--[if IE]>
<style>
    .actual-form table {
         width: 100%;
    }
</style>
<![endif]--> 
```

您可以使用许多技巧（例如[下划线技巧](http://noscope.com/2005/showing-css-to-ie-only-the-underscore-hack)），让您在样式表中仅定位 IE，但如果您想针对所有平台上的所有版本的 IE，它会变得非常混乱。

* * *

## 回答 #3

> 赞同：56
> 
> 时间：2015-06-09T21:18:24.023

除了 IE 条件注释，这是一个关于如何将 IE6 定位到 IE10的[更新列表。](http://www.paulirish.com/2009/browser-specific-css-hacks/)

[请参阅 IE 之外的特定 CSS 和 JS hacks](http://browserhacks.com/)。

```
/***** Attribute Hacks ******/

/* IE6 */
#once { _color: blue }

/* IE6, IE7 */
#doce { *color: blue; /* or #color: blue */ }

/* Everything but IE6 */
#diecisiete { color/**/: blue }

/* IE6, IE7, IE8, but also IE9 in some cases :( */
#diecinueve { color: blue\9; }

/* IE7, IE8 */
#veinte { color/*\**/: blue\9; }

/* IE6, IE7 -- acts as an !important */
#veintesiete { color: blue !ie; } /* string after ! can be anything */

/* IE8, IE9 */
#anotherone  {color: blue\0/;} /* must go at the END of all rules */

/* IE9, IE10, IE11 */
@media screen and (min-width:0\0) {
    #veintidos { color: red}
}

/***** Selector Hacks ******/

/* IE6 and below */
* html #uno  { color: red }

/* IE7 */
*:first-child+html #dos { color: red }

/* IE8 (Everything but IE 6,7) */
html>/**/body #cuatro { color: red }

/* Everything but IE6-8 */
:root *> #quince { color: red  }

/* IE7 */
*+html #dieciocho {  color: red }

/* IE 10+ */
@media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) {
   #veintiun { color: red; }
} 
```

* * *

## 回答 #4

> 赞同：45
> 
> 时间：2017-01-18T08:13:47.580

**有几个可用于IE**的 hack

 ****在样式表中使用条件注释**

```
<!--[if IE]>
<link rel="stylesheet" type="text/css" href="only-ie.css" />
<![endif]--> 
```

**使用带有头部 css 的条件注释**

```
<!--[if IE]>
<style type="text/css">
    /************ css for all IE browsers ****************/
</style>
<![endif]--> 
```

**对 HTML 元素使用条件注释**

```
<!--[if IE]> <div class="ie-only"> /*content*/ </div> <![endif]--> 
```

**使用媒体查询**

```
 IE10+
 @media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) {
 selector { property:value; }
 }

 IE6,7,9,10
 @media screen and (min-width: 640px), screen\9 {
 selector { property:value; }
 }

 IE6,7
 @media screen\9 {
  selector { property:value; }
 }

 IE8
 @media \0screen {
  selector { property:value; }
 }

 IE6,7,8
 @media \0screen\,screen\9 {
  selector { property:value; }
 }

 IE9,10
 @media screen and (min-width:0\0){
  selector { property:value; }
 } 
```

* * *

## 回答 #5

> 赞同：27
> 
> 时间：2012-06-23T21:30:16.837

除了条件注释外，还可以使用 CSS 浏览器选择器[http://rafael.adm.br/css_browser_selector/](http://rafael.adm.br/css_browser_selector/)，因为这将允许您定位特定的浏览器。然后，您可以将 CSS 设置为

```
.ie .actual-form table {
    width: 100%
    } 
```

这也将允许您在主样式表中定位特定浏览器，而无需条件注释。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2013-07-09T07:48:58.857

我认为作为最佳实践，您应该在标签内编写 IE 条件语句，该`<head>`标签内有指向您的特殊 ie 样式表的链接。这必须在您的自定义**css**链接之后，因此它会覆盖后者，我有一个小站点，所以我对所有页面使用相同的即 css。

```
<link rel="stylesheet" type="text/css" href="index.css" />
<!--[if IE]>
    <link rel="stylesheet" type="text/css" href="all-ie-only.css" />
<![endif]--> 
```

这与我认为的詹姆斯回答不同（个人意见，因为我与设计师团队合作，我不希望他们触摸我的 html 文件并在那里搞砸一些东西）你永远不应该在你的 html 文件中包含样式。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2013-08-19T09:15:02.640

这个有点晚了，但是当我试图隐藏 IE6 和 7 的背景时，这对我来说非常有用

```
.myclass{ 
    background-image: url("images/myimg.png");
    background-position: right top;
    background-repeat: no-repeat;
    background-size: 22px auto;
    padding-left: 48px;
    height: 42px;
    _background-image: none;
    *background-image: none;
} 
```

我通过以下方式获得了这个技巧：http: [//briancray.com/posts/target-ie6-and-ie7-with-only-1-extra-character-in-your-css/](http://briancray.com/posts/target-ie6-and-ie7-with-only-1-extra-character-in-your-css/)

```
#myelement
{
    color: #999; /* shows in all browsers */
    *color: #999; /* notice the * before the property - shows in IE7 and below */
    _color: #999; /* notice the _ before the property - shows in IE6 and below */
} 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2018-03-13T08:00:17.407

## 欢迎[浏览器检测](https://stackoverflow.com/a/13480430/4742733)- 一个很棒的功能。

```
<script>
    var BrowserDetect;
    BrowserDetect = {...};//  get BrowserDetect Object from the link referenced in this answer
    BrowserDetect.init();
    // On page load, detect browser (with jQuery or vanilla)
    if (BrowserDetect.browser === 'Explorer') {
      // Add 'ie' class on every element on the page.
      $('*').addClass('ie');
    }
</script>

<!-- ENSURE IE STYLES ARE AVAILABLE -->
<style>
    div.ie {
       // do something special for div on IE browser.
    }
    h1.ie {
     // do something special for h1 on IE browser.
    }
</style> 
```

BrowserDetect`Object` [还](https://stackoverflow.com/a/13480430/4742733)提供`version`信息，因此我们可以添加特定的类 - 例如。`$('*').addClass('ie9');`如果`(BrowserDetect.version == 9)`.

祝你好运....

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2019-09-06T07:07:42.443

> **IE9+**

```
@media screen and (min-width:0\0) and (min-resolution: +72dpi) {
   // IE9+ CSS
   .selector{
      color: red;
   }
} 
```

> **IE 边缘 12+**

```
@supports (-ms-ime-align: auto) {
  .selector {
    color: red;
  }
} 
```

> **这个适用于 Edge 和所有 IE**

```
:-ms-lang(x), .selector { color: red; } 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2014-11-13T15:33:27.893

这真的取决于 IE 版本......我发现[这个优秀的资源是 IE6-10 的最新版本](http://dimox.net/personal-css-hacks-for-ie6-ie7-ie8/)：

> Internet Explorer 6 的 CSS hack
> 
> 它被称为 Star HTML Hack，如下所示：
> 
> *   html .color {color: #F00;} 这个 hack 使用完全有效的 CSS。
> 
> Internet Explorer 7 的 CSS hack
> 
> 它被称为 Star Plus Hack。
> 
> *:first-child+html .color {color: #F00;} 或更短的版本：
> 
> *+html .color {color: #F00;} 就像明星 HTML hack，它使用有效的 CSS。
> 
> Internet Explorer 8 的 CSS hack
> 
> @media \0screen { .color {color: #F00;} } 这个黑客不使用有效的 CSS。
> 
> Internet Explorer 9 的 CSS hack
> 
> :root .color {color: #F00\9;} 这个黑客也没有使用有效的 CSS。
> 
> 添加 2013.02.04：不幸的是 IE10 理解这个 hack。
> 
> 用于 Internet Explorer 10 的 CSS hack
> 
> @media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) { .color {color: #F00;} } 这个黑客也没有使用有效的 CSS。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2021-02-03T17:21:42.240

这是一个完整**的无 Javascript**、基于 CSS 的解决方案，可让您以 Internet Explorer 1-11 为目标！我下面的解决方案通过使用 将 IE1-7 从所有现代工作表中隐藏起来`@import`，为 IE1-7 提供干净的白色页面布局，然后使用三个简单的 CSS 媒体查询“hacks”在导入的工作表中隔离 IE8-11。它甚至会影响 Mac 上的 IE。并且不需要 IE 条件注释。

有了这个解决方案，您*再也*不必为 Internet Explorer 定制您的 Web 应用程序，并且可以在您的所有网站中使用最先进的 CSS 安全地前进。最重要的是，它不需要 JavaScript 就可以工作！！

**这个怎么运作**

首先创建三个 CSS 样式表：

1.  “**老浏览器.css** ”
2.  “**现代浏览器.css** ”
3.  “**导入.css** ”。

第一个样式表“OldBrowsers”是一个基本元素“重置”样式表，它为所有新旧浏览器提供了一个简单的白色块级布局，您可以在其中为每个 Web 浏览器设置所有元素的样式。这允许 20 多年的网络浏览器及其元素都使用相同的 HTML 设计并且看起来很相似。IE1-11 也可以看到此表。在此工作表中添加仅设置元素样式所需的所有基本样式。第二张表“ModernBrowsers.css”是您可以安全地放置所有现代、尖端 CSS 的地方，这些 CSS 使用 HTML5 现代设计为元素设置样式，但控制布局等。IE1-7 不会看到此表。第三张表是*导入表*，“Import.css”，`@import`规则。这会隐藏您的现代样式表，使其不受包括 IE1-7 在内的各种旧浏览器的影响。IE1-11 将看到“Import.css”表，但 IE1-7 将看不到“ModernBrowsers.css”表，因为该`@import`规则。

```
<link media="screen" rel="stylesheet" type="text/css" href="OldBrowsers.css" />
<link media="screen" rel="stylesheet" type="text/css" href="Import.css" /> 
```

在您的“Import.css”表中添加此@import 规则，格式如下。此“ModernBrowsers.css”表将对 IE1-7 和下面列出的各种旧浏览器隐藏：

```
@import 'ModernBrowsers.css' all; 
```

此导入工作表中的所有 CSS 将对 Internet Explorer 1-7 和各种旧版浏览器隐藏。IE1-7，以及大范围或更老的浏览器，不理解媒体类型“all”，也不理解`@import`上面显示的具体格式，所以将无法导入此表。许多旧浏览器（2001 年之前）无法识别此特定版本的导入。这些浏览器现在太老了，你只需要为它们提供一个*干净的白色网页*，里面有堆积的内容块。

添加到“OldBrowsers”的 CSS 允许您设置旧浏览器和 IE1-7 以使用您控制的普通样式。我个人在这张表中只添加了 HTML“重置”元素样式，并确保所有 HTML5 元素都有简单干净的设计。较新的浏览器将在“ModernBrowsers.css”样式表中层叠这些。

在“ModernBrowsers.css”中，您想要添加所有现代样式，但也有特殊的 CSS hack 以使用 CSS 媒体查询（以及所有正常的选择器和类）针对**Internet Explorer 8-11 。**只需将以下仅限 IE 的修复程序添加到您的现代样式表中，以针对这些最后的特定 IE 浏览器。将特定于这些旧 IE 浏览器的任何样式放入这些块中。

注意：请记住 HTML5 和大多数 CSS3 通常从 Internet Explorer 9 到 11 开始受支持。但是 IE8-11 甚至 Trident Edge 浏览器都存在错误、缺少元素支持和其他问题。但是您现在可以通过这种方式安全地定位这些较旧的 IE 8-11 浏览器，同时在此表中使用您最先进的 CSS 来支持所有其他现代浏览器：

```
/* IE8 */
@media \0screen {
    body {
        background: red !important;
    }
}

/* IE9 */
@media all and (min-width:0\0) and (min-resolution:.001dpcm) {
    body {
        background: blue !important;
    }
}

/* IE10-11 */
@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
    body {
        background: green !important;
    }
} 
```

简单的！**您现在已针对 IE1-11**（所有 Internet Explorer 浏览器！）

使用此解决方案，您可以实现以下目标：

1.  完全从您的`@import`现代风格中排除 IE 1-7！这些代理以及下面的列表将永远不会看到您导入的现代样式并获得干净的白色样式表内容页面，旧浏览器仍然可以在查看您的内容时使用（使用“OldBrowsers.css”来设置样式）。使用上述`@import`规则将以下浏览器从“ModernBrowsers.css”中排除：

    *   Windows Internet Explorer 1-7.x
    *   Macintosh Internet Explorer 1-5.x
    *   网景 1-4.8
    *   歌剧 1-3.5
    *   征服者 1-2.1
    *   Windows Amaya 1-5.1
    *   iCab 1-2
    *   全网
2.  在您的“ModernBrowsers”导入表中，您现在可以使用简单的媒体查询“hacks”安全地定位 IE 浏览器版本 8-11。

3.  该系统使用一个简单的`@import`样式表系统，该系统使用传统的、不支持外部样式规则而不是散布在多个表单中的 CSS 修复，快速且易于管理。（顺便说一句......不要听任何人说`@import`慢，因为它不是。我的导入表有一行，大小可能是一千字节或更小！`@import`自万维网诞生以来就一直在使用，与简单的 CSS 链接。与今天的 Javascript 孩子们使用这些新的“现代”ECMAScript SPA API 进入浏览器的兆字节相比，只是为了显示一小段新闻！）`@import`一行现在将多年和多年的 IE 浏览器版本与您的新版本分开CSS 代码和精美的布局设计。无需编写脚本！

4.  所有旧的 IE 浏览器和广泛的其他用户代理现在使用这种导入策略被排除在现代样式之外，这允许这些旧浏览器折叠回完全可访问的纯“块级”白页和堆叠内容布局由较旧的浏览器。您现在可以花费最少的时间为旧浏览器自定义内容，而让他们看到您网站中数千个页面的纯白色堆叠内容页面！

5.  请注意，此解决方案没有 IE 条件注释！你不应该使用那些，因为 IE 10-11 不再支持 IE 条件。

6.  有了这个解决方案，您的现代网页设计现在可以 100% 自由地使用自定义的尖端 CSS3 技术，而不必再担心旧的浏览器和 IE1-11！

7.  链接 CSS 有非常广泛的支持，即使在 1995 年以前的旧 CSS1 浏览器中也是如此。这只是不使用嵌入或“样式”元素样式的另一个原因。改为使用这些链接的 CSS 设计。

8.  如果您在“OldBrowsers”样式表中添加了一组非常好的“重置”或元素样式，那么 20 多年的新旧浏览器及其基本元素设计将使您的核心网页设计看起来与使用该表单相同. “重置”元素 CSS 的想法是强制所有浏览器通过历史记录，以及它们共享的 HTML 元素支持，在应用 CSS 布局、脚本和更高级的 CSS 设计之前看起来相同。在过去的 25 年中，HTML 基本元素几乎没有变化。因此，首先对元素进行样式设置以简化文本内容显示是有意义的。

这是 2021 年新的“渐进式”CSS 的一部分，100% 无 JavaScript，设计概念用于解决跨浏览器样式问题，允许旧代理*优雅地降级*为更简单的布局，而不是努力解决神秘的旧问题，破碎的盒模型代理 (IE5-6) 以零碎的方式匹配复杂的 CSS 布局。大多数较旧的 Web 浏览器不再需要重新创建您的自定义布局。他们只需要显示基本的文本和媒体内容。随着他们在网上缓慢消亡的长尾，IE 1-11 只需要简单的布局设计，以便内容可读和可访问。

**这种策略的优势是它 100% 无 Javascript！**无论如何，你**不**应该在 2021 年使用*脚本*来管理Web 浏览器中的**CSS**。我建议您在 Web 浏览器中管理 Internet Explorer 时转储 Modernizr 和所有“polyfills”并尝试我的干净 CSS 解决方案。我的解决方案在针对 IE1-11 时非常有效，让您可以完全控制如何为这些目标浏览器自定义 CSS，同时让您作为设计师可以专注于更新的 CSS3 以及 Edge 和所有其他现代 HTML5 中的尖端样式和布局浏览器向前发展。自 2004 年以来，我一直在使用此版本，但最近在 2021 年对其进行了更新。

It's my hope we stop creating these gigantic, multi-megabyte, CPU-hog, JavaScripted, polyfill nightmare scripted solutions for addressing what used to be solved years ago with a *few lines* of simple Cascading Style Sheet code. :)

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2017-10-26T13:16:07.750

对于 /* Internet Explorer 9+（单行）*/

```
_::selection, .selector { property:value\0; } 
```

只有这个解决方案才能完美地为我工作。

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2018-05-02T06:07:14.923

```
<!--[if !IE]><body<![endif]-->
<!--[if IE]><body class="ie"> <![endif]-->

body.ie .actual-form table {
    width: 100%
} 
```**

# ruby-on-rails - 如何为属于用户的产品创建 FactoryGirl 工厂？

> ID：11173109
> 
> 赞同：0
> 
> 时间：2012-06-23T21:25:24.933
> 
> 标签：ruby-on-rails, ruby-on-rails-3, factory-bot

我已经阅读了 FactoryGirl 文档，但我似乎无法弄清楚这一点。我知道这一定很简单。

这是我的设置：

```
Rails 3.2.6
User has_many Products

FactoryGirl.define do
  factory :product do
    sequence(:identifier, 1000) {|n| "ABC#{n}" }
  end
end 
```

这会失败，因为必须有一个与产品关联的 user_id。在我的测试中，我在登录期间创建了一个用户。所以我的测试可以访问用户对象。我只是不知道如何使用 FactoryGirl 将用户对象传递给产品工厂。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T21:37:47.260

假设您已经有一个用户工厂（即`factory :user do`），您可以在您的工厂中添加以下行`:product`：

```
association :user 
```

这将自动创建一个用户工厂（如定义）并将其分配给您的产品。

但是，当您在测试中创建对象时，您仍然可以执行以下操作：

```
FactoryGirl.create(:produce, user: some_user) 
```

为了分配不同的用户变量，因为工厂从您刚刚添加的行中看到了关联。

希望这可以帮助。

# path-finding - 寻路问题

> ID：11173116
> 
> 赞同：0
> 
> 时间：2012-06-23T21:26:51.563
> 
> 标签：path-finding

好的，我正在尝试制作一个动态路径系统，以便玩家可以在没有预定义路径的情况下从 A 点移动到 B 点。请注意，此游戏是所有基于文本的，没有图形。玩家可以在 10 个方向上移动：上、下、n、e、s、w、sw、se、nw 和 ne。

整个世界的地图都在一个数据库中，数据库的每一行都包含一个房间或一个节点，每个房间/节点都有它能够去的方向。房间可能不是连续的。一个例子：

```
Map Number, Room Number, Direction_N, Direction_S, Direction_E, Direction_W, etc.
    1            1           1/3          1/100       1/1381       1/101 
```

Direction_N 表示它去 Map 1 Room 3，Direction_S Map 1 Room 100 等等...

好的，我根据建议重新编写了代码（顺便谢谢你们！）这里是修改后的代码。它现在似乎找到了房间，甚至是很远的距离！但现在的问题是找到到目的地的最短路径，我尝试遍历集合，但路径不正确......

在下面的图片链接中，我在中心的红色正方形中有起点，在左上角的红色正方形中有停止点。这将返回visitedStartRooms = 103 和visitedStopRooms = 86，此时只有大约16 个房间。问我缺少的难题是我不知道如何整理这些集合中的房间以获得真正的最短路线。

[地图示例](http://www.lucid-technology.net/images/map_display.png)

这是新代码

```
 public void findRoute(ROOM_INFO startRoom, ROOM_INFO destinationRoom)
    {
        Dictionary<ROOM_INFO, bool> visitedStartRooms = new Dictionary<ROOM_INFO, bool>();
        Dictionary<ROOM_INFO, bool> visitedStopRooms = new Dictionary<ROOM_INFO, bool>();

        List<string> directions = new List<string>();

        startQueue.Enqueue(startRoom); // Queue up the initial room
        destinationQueue.Enqueue(destinationRoom);

        visitedStartRooms.Add(startRoom, true);// say we have been there, done that
        visitedStopRooms.Add(destinationRoom, true);

        string direction = "";
        bool foundRoom = false;

        while (startQueue.Count != 0 || destinationQueue.Count != 0)
        {

            ROOM_INFO currentStartRoom = startQueue.Dequeue(); // remove room from queue to check out.
            ROOM_INFO currentDestinationRoom = destinationQueue.Dequeue();

            ROOM_INFO startNextRoom = new ROOM_INFO();
            ROOM_INFO stopNextRoom = new ROOM_INFO();

            if (currentStartRoom.Equals(destinationRoom))
            {
                break;
            }
            else
            {
                // Start from destination and work to Start Point.
                foreach (string exit in currentDestinationRoom.exitData)
                {

                    stopNextRoom = extractMapRoom(exit); // get adjacent room
                    if (stopNextRoom.Equals(startRoom))
                    {
                        visitedStopRooms.Add(stopNextRoom, true);
                        foundRoom = true;
                        break;
                    }

                    if (stopNextRoom.mapNumber != 0 && stopNextRoom.roomNumber != 0)
                    {
                        if (!visitedStopRooms.ContainsKey(stopNextRoom))
                        {
                            if (visitedStartRooms.ContainsKey(stopNextRoom))
                            {
                                foundRoom = true;
                            }
                            else
                            {
                                destinationQueue.Enqueue(stopNextRoom);
                                visitedStopRooms.Add(stopNextRoom, true);
                            }
                        }
                    }
                }

                if (foundRoom)
                {
                    break;
                }
            }

            // start from the start and work way to destination point
            foreach (string exit in currentStartRoom.exitData)
            {

                startNextRoom = extractMapRoom(exit); // get adjacent room
                if (startNextRoom.Equals(destinationRoom))
                {
                    visitedStartRooms.Add(startNextRoom, true);
                    foundRoom = true;
                    break;
                }
                if (startNextRoom.mapNumber != 0 && startNextRoom.roomNumber != 0)
                {
                    if (!visitedStartRooms.ContainsKey(startNextRoom))
                    {
                        if (visitedStopRooms.ContainsKey(startNextRoom))
                        {
                            foundRoom = true;
                            break;
                        }
                        else
                        {

                            startQueue.Enqueue(startNextRoom);
                            visitedStartRooms.Add(startNextRoom, true);
                        }

                    }
                }
            }

            if (foundRoom)
            {
                break;
            }
        }

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T22:32:58.980

你有一个好的开始。有一些基本的改进会有所帮助。首先，为了能够重建您的路径，您应该创建一个新的数据结构来存储访问过的房间。但是对于每个条目，您要存储房间，以及返回起点的路径中的前一个房间。一个好的数据结构是一个字典，其中键是房间标识符，值是以前的房间标识符。要知道您是否访问过一个房间，您需要查看它是否存在于该数据结构中，而不是您的 openList 队列中。使用这种新结构，您可以正确检查您是否访问过一个房间，并且您可以通过重复查找同一结构中的前一个房间来重建返回路径，直到您到达起点。

The second improvement will increase the performance quite a bit. Instead of just doing a breadth-first search from the start point until you bump into the destination, as you currently do, instead create matching data structures like you have for the start room search, but have them be for the destination room. After you've looked one room away from the start, look one room away from the destination. Repeat this...two rooms away from start, then two rooms away from destination.. etc., working your way out, until you discover a room that has been visited by both your search from start and your search from destination. Build the path from this room back to the start, and back to the destination, and that will be your shortest path.

The problem you are trying to solve is the shortest path problem with unweighted edges or where the weights of all edges are equal. The weight of an edge is the time/cost to move from one room to another. If the cost to move from one room to another varies depending on which pair of rooms you're talking about, then the problem is more complicated, and the algorithm you started with and for which I've suggested modifications, will not work as it is. Here are some links about it:

[Shortest path (fewest nodes) for unweighted graph](https://stackoverflow.com/questions/1579399/shortest-path-fewest-nodes-for-unweighted-graph)

[http://en.wikipedia.org/wiki/Shortest_path_problem](http://en.wikipedia.org/wiki/Shortest_path_problem)

You may also be interested in the A* algorithm which uses a different approach. It uses a hueristic approach to concentrate the search in a subset of the solution space more likely to contain the shortest path. [http://en.wikipedia.org/wiki/A%2a_search_algorithm](http://en.wikipedia.org/wiki/A%2a_search_algorithm) But A* is probably overkill in your case since the weight of all edges is the same between all rooms.

# jquery - Jquery 图片库下一个按钮

> ID：11173119
> 
> 赞同：1
> 
> 时间：2012-06-23T21:27:21.190
> 
> 标签：jquery

似乎无法让这个 jquery 库正常工作。我已经能够让 .galleryImgs 点击功能正常工作，但似乎无法让 #gallery-next 点击功能正常工作。它应该从下一个 .galleryImgs div 中获取 data-src 属性并将其设置在 .galleryImg src 中。我试过使用 addClass 和 removeClass ，所以它知道从哪个开始，但仍然无法工作。所有帮助表示赞赏。

```
<img class="galleryImgs" data-src="images/test-image-1.jpg" src="images/test-image-1-s.jpg" />
<img class="galleryImgs" data-src="images/test-image-2.jpg" src="images/test-image-2-s.jpg" />
<img class="galleryImgs" data-src="images/test-image-3.jpg" src="images/test-image-3-s.jpg" />
<img class="galleryImgs" data-src="images/test-image-4.jpg" src="images/test-image-4-s.jpg" />
<img class="galleryImgs" data-src="images/test-image-5.jpg" src="images/test-image-5-s.jpg" />

<img class="galleryImg" src="" />

<div id="gallery-next"></div>

<script type="text/javascript">
$(function(){
    $('.galleryImgs').click(function(){
        $('.gallery').show();
        $(this).addClass('catherine');
        var $galleryImg = $(this).attr("data-src");
        $('.galleryImg').fadeIn().attr("src", $galleryImg);
    });
    $('#gallery-next').click(function(){            
        $('.galleryImgs').hasClass('catherine').removeClass('catherine').next('.galleryImgs').addClass('catherine');
        var $galleryImg = $('.galleryImgs').hasClass('catherine').attr("data-src");
        $('.galleryImg').attr("src", $galleryImg);
    });
});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T22:57:29.543

出于礼貌，我重写了你的函数：

```
$('#gallery-next').click(function(){       
    var el = $('.galleryImgs.catherine');
    if(el.length <= 0){
        console.log('something is really wrong...');
    }   
    el.removeClass('catherine').next('.galleryImgs').addClass('catherine');
    $('.galleryImg').attr("src", $('.galleryImgs.catherine').data('src'));
}); 
```

我对此进行了一点编辑，如果您这样做，请使用新代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T23:13:14.337

这行得通。

```
$('#gallery-next').click(function(){
        var $galleryImg = $('.galleryImgs.hidden').removeClass('hidden').closest('.galleryImgs').nextAll('.galleryImgs').eq(0).addClass('hidden').attr("data-src");
        $('.galleryImg').fadeIn().attr("src", $galleryImg);
    }); 
```

# c++ - clang++ 3.1 但 Lion Xcode 4.3.3 上没有“cxx_lambdas”

> ID：11173121
> 
> 赞同：3
> 
> 时间：2012-06-23T21:27:37.383
> 
> 标签：c++, lambda, c++11, xcode4.3, clang++

这与[Clang 3.1 和 C++11 支持状态](https://stackoverflow.com/questions/10601545/clang-3-1-and-c11-support-status)有关，但我在那里找不到答案，我在这里更具体：`cxx_lambdas`在我的确切设置上支持 clang 3.1。

我在 OSX Lion 10.7.4 上安装了 Xcode 4.3.3 和最新的命令行工具包（2012 年 6 月 11 日）。我现在有*clang++ 3.1 版*：

```
llins@jupara:~/projects/tests/C++11$ clang++ -v
Apple clang version 3.1 (tags/Apple/clang-318.0.61) (based on LLVM 3.1svn)
Target: x86_64-apple-darwin11.4.0
Thread model: posix 
```

基于[http://clang.llvm.org/cxx_status.html](http://clang.llvm.org/cxx_status.html)，我期待功能`cxx_lambdas`可用，但这不是我得到的：

```
llins@jupara:~/projects/tests/C++11$ make
clang++ -std=c++11 -stdlib=libc++ test_clang_features.cpp -o test_clang_features

llins@jupara:~/projects/tests/C++11$ ./test_clang_features 
FAILED feature tests: 
__has_feature(cxx_constexpr) .................................. FAILED
__has_feature(cxx_generalized_initializers) ................... FAILED
__has_feature(cxx_inheriting_constructors) .................... FAILED
__has_feature(cxx_lambdas) .................................... FAILED
__has_feature(cxx_local_type_template_args) ................... FAILED
__has_feature(cxx_unrestricted_unions) ........................ FAILED
__has_feature(cxx_user_literals) .............................. FAILED 
```

这是我为获取此报告而运行的代码：

```
#include <iostream>
using namespace std;
void main()
{
    cout << "FAILED feature tests: " << endl;

//  testing all features cxx_???? described in (only 3 shown here):
//      http://llvm.org/releases/3.1/tools/clang/docs/LanguageExtensions.html#cxx11

#if !__has_feature(cxx_generalized_initializers)
    cout << "__has_feature(cxx_generalized_initializers) ................... FAILED" << endl;
#endif
#if !__has_feature(cxx_implicit_moves)
    cout << "__has_feature(cxx_implicit_moves) ............................. FAILED" << endl;
#endif
//... analogous tests ...
#if !__has_feature(cxx_lambdas)
    cout << "__has_feature(cxx_lambdas) .................................... FAILED" << endl;
#endif
} 
```

注意`cxx_lambdas`失败。以下是测试功能的完整列表：

```
cxx_access_control_sfinae cxx_alias_templates cxx_alignas
cxx_attributes cxx_auto_type cxx_constexpr cxx_decltype
cxx_default_function_template_args cxx_defaulted_functions
cxx_delegating_constructors cxx_deleted_functions cxx_exceptions
cxx_explicit_conversions cxx_generalized_initializers
cxx_implicit_moves cxx_inheriting_constructors cxx_inline_namespaces
cxx_lambdas cxx_local_type_template_args cxx_noexcept
cxx_nonstatic_member_init cxx_nullptr cxx_override_control
cxx_range_for cxx_raw_string_literals
cxx_reference_qualified_functions cxx_rtti cxx_rvalue_references
cxx_static_assert cxx_strong_enums cxx_trailing_return
cxx_unicode_literals cxx_unrestricted_unions cxx_user_literals
cxx_variadic_templates 
```

**为什么`cxx_lambdas`在此 clang++ 3.1 设置中不可用？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T03:34:34.153

Xcode 4.4+ 将提供 Lambada 支持，
正如 ildjarn 指出的那样，Apple 的 clang/llvm 发行版是定制的......

# c# - MySql 奇怪（对我来说）where 子句的性能

> ID：11173127
> 
> 赞同：2
> 
> 时间：2012-06-23T21:28:57.103
> 
> 标签：c#, mysql, entity-framework

我有一张存储 2k 记录的表。架构是：

```
CREATE TABLE `tcms_articles` (
  `Id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `User_id` int(10) unsigned DEFAULT NULL,
  `Category_id` int(10) unsigned DEFAULT NULL,
  `Title` varchar(255) DEFAULT NULL,
  `Value` longtext,
  `Keywords` varchar(255) NOT NULL DEFAULT '',
  `Description` varchar(255) NOT NULL DEFAULT '',
  `Images` longtext NOT NULL,
  `Votes` int(10) unsigned NOT NULL DEFAULT '1',
  `Votes_sum` int(10) unsigned NOT NULL DEFAULT '5',
  `Views` int(10) unsigned NOT NULL DEFAULT '0',
  `Isvisible` tinyint(1) unsigned NOT NULL DEFAULT '1',
  `Isfrontpage` tinyint(1) unsigned NOT NULL DEFAULT '0',
  `Istoparticle` tinyint(1) unsigned NOT NULL DEFAULT '1',
  `Expires_date` datetime NOT NULL DEFAULT '2099-12-31 00:00:00',
  `Date` datetime NOT NULL,
  PRIMARY KEY (`Id`),
  KEY `article_users` (`User_id`) USING BTREE,
  KEY `article_section` (`Category_id`) USING BTREE,
  KEY `Isvisible_index` (`Isvisible`) USING BTREE,
  KEY `Istoparticle_index` (`Istoparticle`) USING BTREE,
  KEY `Expires_date_index` (`Expires_date`) USING BTREE,
  KEY `isfrontpage` (`Isfrontpage`) USING BTREE,
  KEY `Date_index` (`Date`) USING BTREE,
  CONSTRAINT `tcms_articles_categories` FOREIGN KEY (`Category_id`) REFERENCES `tcms_categories` (`Id`) ON DELETE CASCADE ON UPDATE CASCADE,
  CONSTRAINT `tcms_articles_ibfk_2` FOREIGN KEY (`User_id`) REFERENCES `tcms_users` (`Id`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=80 DEFAULT CHARSET=utf8; 
```

当我用这个查询搜索表时，我遇到了性能问题

`select value from tcms_articles where istoparticle=1 and isvisible=1 order by date limit 1;`

大约需要 1.50+ 秒！

但是当我这样搜索时：

`select value from tcms_articles where istoparticle=1 order by date limit 1;`

我没有任何问题，大约需要 0.02 秒。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T21:53:18.980

`(Istoparticle, Isvisible, Date)`您可以为此查询添加 B 树（不是哈希）复合索引。

# java - 每次添加某些东西时规格崩溃

> ID：11173130
> 
> 赞同：-1
> 
> 时间：2012-06-23T21:29:29.833
> 
> 标签：java, android, android-tabhost, specifications

当我添加一些东西时，DisplayActivity.java 的规范总是崩溃。无法弄清楚我做错了什么。这是我当前的代码。

**控件活动.java**

```
package com.control.driswave;

import android.app.TabActivity;
import android.content.Intent;
import android.content.res.Resources;
import android.os.Bundle;
import android.widget.TabHost;
import android.widget.Toast;

import com.control.driswave.R;
import com.stericson.RootTools.RootTools;

public class ControlActivity extends TabActivity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    if (RootTools.isAccessGiven()) {
        Toast root = Toast.makeText(getApplicationContext(), 
                "Root Granted", Toast.LENGTH_SHORT);
        root.show();
    } else {
        Toast noRoot = Toast.makeText(getApplicationContext(), 
                "Root Access Needed To Continue", Toast.LENGTH_LONG);
        noRoot.show();
        finish();
    }

    Resources res = getResources(); // used to get res drawings (i.e. display files)
    TabHost tabHost = getTabHost(); // used to create TabHost located in main.xml
    TabHost.TabSpec spec; //TabHost specifications which are the same in each view
    Intent intent; //intent for each tab. *RESEARCH INTENT*

    // New Class Added Caused FC. Was working. Spec no longer working again.

     //____Display
    intent = new Intent().setClass(this, DisplayActivity.class);

    spec = tabHost.newTabSpec("display").setIndicator("Display",
            res.getDrawable(R.drawable.ic_tab_display))
            .setContent(intent); // create picture to be used for tab
    tabHost.addTab(spec);

    //____Power
    intent = new Intent().setClass(this, PowerActivity.class);

    spec = tabHost.newTabSpec("power").setIndicator("Power", 
            res.getDrawable(R.drawable.ic_tab_display))
            .setContent(intent);
    tabHost.addTab(spec);

}
} 
```

**显示活动.java**

```
package com.control.driswave;

import java.io.File;

import com.stericson.RootTools.RootTools;

import android.app.Activity;
import android.os.Bundle;
import android.provider.Settings;
import android.view.View.OnClickListener;
import android.widget.CheckBox;
import android.widget.CompoundButton;
import android.widget.CompoundButton.OnCheckedChangeListener;
import android.widget.SeekBar;
import android.widget.SeekBar.OnSeekBarChangeListener;
import android.widget.TextView;
import android.widget.Toast;

public class DisplayActivity extends Activity {
private int prevValue = Integer.parseInt(Settings.System.WINDOW_ANIMATION_SCALE);
private SeekBar brBar;
private TextView brightLevel;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.display);

    //_____Disable Boot Animation_____// NEEDS TESTING http://mgmblog.com/2008/02/18/android-checkbox-oncheckedchangelistener/
    CheckBox dba = (CheckBox) findViewById(R.id.DBA);
    dba.setOnCheckedChangeListener(new OnCheckedChangeListener() {

        public void onCheckedChanged(CompoundButton dba, boolean isChecked) {
            if (dba.isChecked()) {
            RootTools.remount("/system/", "rw");
            File ba = new File("/System/Media/bootanimation.zip");
            ba.renameTo(new File("/System/Media/bootanimation.zip.bak"));
            Toast.makeText(getApplicationContext(), "Boot Animation Disabled", Toast.LENGTH_SHORT);
            } else {
                Toast.makeText(getApplicationContext(), "Boot Animation Enabled", Toast.LENGTH_SHORT);
            }

        }

    });

    //_____Disable Window Animations_____//
    CheckBox dwa = (CheckBox) findViewById(R.id.DWA);
    dwa.setOnCheckedChangeListener(new OnCheckedChangeListener() {
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {

            if (buttonView.isChecked()) {
                Settings.System.putInt(getContentResolver(), Settings.System.WINDOW_ANIMATION_SCALE, 0);
            } else {
                Settings.System.putInt(getContentResolver(), Settings.System.WINDOW_ANIMATION_SCALE, prevValue);
            }
        }
    });

    //_____Brightness Seek Bar____//
    brBar = (SeekBar) findViewById(R.id.brSeekbar);
    brightLevel = (TextView) findViewById(R.id.brSeekbar_num);
    brBar.setOnSeekBarChangeListener(new OnSeekBarChangeListener() {

        public void onProgressChanged(SeekBar brBar, int brLevel, boolean arg2) {
            Settings.System.putInt(getContentResolver(), Settings.System.SCREEN_BRIGHTNESS, brLevel);
            brightLevel.setText(brLevel);

        }

        public void onStartTrackingTouch(SeekBar brBar) {
            brightLevel.setText("Changing...");

        }

        public void onStopTrackingTouch(SeekBar brBar) {
            // Nothing

        }

    });

}

} 
```

**显示.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/bcTitle"
    android:textAppearance="?android:attr/textAppearanceSmall" />

<CheckBox
    android:id="@+id/DBA"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/dabCB" />

<CheckBox
    android:id="@+id/DWA"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:text="@string/DWA" />

<TextView
    android:id="@+id/BrC"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/bright"
    android:textAppearance="?android:attr/textAppearanceSmall" />

<SeekBar
    android:id="@+id/brSeekbar"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" />

<TextView
    android:id="@+id/brSeekbar_num"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:gravity="center_horizontal"
    android:text="@string/brightlevel"
    android:textAppearance="?android:attr/textAppearanceMedium" /> 
```

**控制清单.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.control.driswave"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="10" />
<uses-permission android:name="android.permission.WRITE_SETTINGS"/>
<uses-permission android:name="android.permission.CHANGE_CONFIGURATION"/>
<uses-permission android:name="android.permission.CHANGE_NETWORK_STATE"/>
<uses-permission android:name="android.permission.CHANGE_WIFI_STATE"/>
<uses-permission android:name="android.permission.DEVICE_POWER"/>
<uses-permission android:name="android.permission.FLASHLIGHT"/>
<uses-permission android:name="android.permission.KILL_BACKGROUND_PROCESSES"/>
<uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS"/>
<uses-permission android:name="com.android.browser.permission.READ_HISTORY_BOOKMARKS"/>
<uses-permission android:name="android.permission.SET_ORIENTATION"/>
<uses-permission android:name="android.permission.SET_ANIMATION_SCALE"/>
<uses-permission android:name="android.permission.VIBRATE"/>
<uses-permission android:name="com.android.browser.permission.WRITE_HISTORY_BOOKMARKS"/>
<uses-permission android:name="android.permission.WRITE_SECURE_SETTINGS"/>
<uses-permission android:name="android.permission.READ_SYNC_SETTINGS"/>
<uses-permission android:name="android.permission.WRITE_SYNC_SETTINGS"/>

<application
    android:debuggable="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".ControlActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity
        android:name=".DisplayActivity"
        android:label="@string/displaytab" >
    </activity>
    <activity
        android:name=".PowerActivity"
        android:label="@string/powertab" >
    </activity>

</application> 
```

**日志文件**

```
06-25 17:38:44.035: D/dalvikvm(25731): GC_EXPLICIT freed 58K, 43% free 3067K/5379K, external 2540K/2666K, paused 41ms
06-25 17:38:48.293: D/AndroidRuntime(25731): Shutting down VM
06-25 17:38:48.293: W/dalvikvm(25731): threadid=1: thread exiting with uncaught exception (group=0x4001e560)
06-25 17:38:48.332: E/AndroidRuntime(25731): FATAL EXCEPTION: main
06-25 17:38:48.332: E/AndroidRuntime(25731): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.control.driswave/com.control.driswave.ControlActivity}: java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.control.driswave/com.control.driswave.DisplayActivity}: java.lang.NumberFormatException: unable to parse 'window_animation_scale' as integer
06-25 17:38:48.332: E/AndroidRuntime(25731):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1702)
06-25 17:38:48.332: E/AndroidRuntime(25731):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1722)
06-25 17:38:48.332: E/AndroidRuntime(25731):    at android.app.ActivityThread.access$1500(ActivityThread.java:124)
06-25 17:38:48.332: E/AndroidRuntime(25731):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:974)
06-25 17:38:48.332: E/AndroidRuntime(25731):    at android.os.Handler.dispatchMessage(Handler.java:99)
06-25 17:38:48.332: E/AndroidRuntime(25731):    at android.os.Looper.loop(Looper.java:130)
06-25 17:38:48.332: E/AndroidRuntime(25731):    at android.app.ActivityThread.main(ActivityThread.java:3821)
06-25 17:38:48.332: E/AndroidRuntime(25731):    at java.lang.reflect.Method.invokeNative(Native Method)
06-25 17:38:48.332: E/AndroidRuntime(25731):    at java.lang.reflect.Method.invoke(Method.java:507)
06-25 17:38:48.332: E/AndroidRuntime(25731):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
06-25 17:38:48.332: E/AndroidRuntime(25731):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
06-25 17:38:48.332: E/AndroidRuntime(25731):    at dalvik.system.NativeStart.main(Native Method)
06-25 17:38:48.332: E/AndroidRuntime(25731): Caused by: java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.control.driswave/com.control.driswave.DisplayActivity}: java.lang.NumberFormatException: unable to parse 'window_animation_scale' as integer
06-25 17:38:48.332: E/AndroidRuntime(25731):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1624)
06-25 17:38:48.332: E/AndroidRuntime(25731):    at android.app.ActivityThread.startActivityNow(ActivityThread.java:1530)
06-25 17:38:48.332: E/AndroidRuntime(25731):    at android.app.LocalActivityManager.moveToState(LocalActivityManager.java:127)
06-25 17:38:48.332: E/AndroidRuntime(25731):    at android.app.LocalActivityManager.startActivity(LocalActivityManager.java:339)
06-25 17:38:48.332: E/AndroidRuntime(25731):    at android.widget.TabHost$IntentContentStrategy.getContentView(TabHost.java:696)
06-25 17:38:48.332: E/AndroidRuntime(25731):    at android.widget.TabHost.setCurrentTab(TabHost.java:328)
06-25 17:38:48.332: E/AndroidRuntime(25731):    at android.widget.TabHost.addTab(TabHost.java:218)
06-25 17:38:48.332: E/AndroidRuntime(25731):    at com.control.driswave.ControlActivity.onCreate(ControlActivity.java:46)
06-25 17:38:48.332: E/AndroidRuntime(25731):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
06-25 17:38:48.332: E/AndroidRuntime(25731):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1666)
06-25 17:38:48.332: E/AndroidRuntime(25731):    ... 11 more
06-25 17:38:48.332: E/AndroidRuntime(25731): Caused by: java.lang.NumberFormatException: unable to parse 'window_animation_scale' as integer
06-25 17:38:48.332: E/AndroidRuntime(25731):    at java.lang.Integer.parse(Integer.java:383)
06-25 17:38:48.332: E/AndroidRuntime(25731):    at java.lang.Integer.parseInt(Integer.java:372)
06-25 17:38:48.332: E/AndroidRuntime(25731):    at java.lang.Integer.parseInt(Integer.java:332)
06-25 17:38:48.332: E/AndroidRuntime(25731):    at com.control.driswave.DisplayActivity.<init>(DisplayActivity.java:20)
06-25 17:38:48.332: E/AndroidRuntime(25731):    at java.lang.Class.newInstanceImpl(Native Method)
06-25 17:38:48.332: E/AndroidRuntime(25731):    at java.lang.Class.newInstance(Class.java:1409)
06-25 17:38:48.332: E/AndroidRuntime(25731):    at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
06-25 17:38:48.332: E/AndroidRuntime(25731):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1616)
06-25 17:38:48.332: E/AndroidRuntime(25731):    ... 20 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-26T00:40:12.277

嗯，你的问题是这样的：

`Java.lang.NumberFormatException: unable to parse 'window_animation_scale' as integer`

解决这个问题，其余的应该符合要求。

# android - 从 WebView 上的本地目录加载 html

> ID：11173132
> 
> 赞同：0
> 
> 时间：2012-06-23T21:29:41.173
> 
> 标签：android, html

我无法在项目的 Assets 目录中的 create 中加载 html 文件。在执行项目时，它说找不到网页。我使用的代码是

```
myWebView.loadUrl("file:///assets/wv.html") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T21:36:42.193

```
myWebView.loadUrl("file:///android_asset/custom_page.html"); 
```

当 custom_page.html 位于资产目录中时，此语法有效。

# perl - Perl 调试器 - 如何跳出循环

> ID：11173140
> 
> 赞同：3
> 
> 时间：2012-06-23T21:31:17.383
> 
> 标签：perl, debugging, loops, skip

在使用 perl 调试器时，有没有办法跳出当前循环？

例如：

```
line 1
for($i=1;$i<100000:$i++)
{
    line2
}
line3 
```

我希望调试器跳出这个**for**循环并在第 3 行停止

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-23T21:36:19.343

```
c 5 
```

示范：

```
>perl -d

Loading DB routines from perl5db.pl version 1.33
Editor support available.

Enter h or `h h' for help, or `perldoc perldebug' for more help.

print "line1\n";
for (1..100000) {
   print "line2\n";
}
print "line3\n";
^Z
main::(-:1):    print "line1\n";

  DB<1> s
line1
main::(-:2):    for (1..100000) {

  DB<1> s
main::(-:3):       print "line2\n";

  DB<1> s
line2
main::(-:3):       print "line2\n";

  DB<1> c 5
line2
line2
line2
...
line2
line2
line2
main::(-:5):    print "line3\n";

  DB<2> s
line3
Debugged program terminated.  Use q to quit or R to restart, 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T21:46:49.653

您可以设置循环终止条件：

```
$i=100000 
```

精心制作的？只需将变量设置为退出条件，如下所示：

```
 DB<5> $i=1

  DB<6> print $i
1
  DB<7> $i=100000

  DB<8> print $i
100000
  DB<9> c
Debugged program terminated.  Use q to quit or R to restart, 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T21:40:34.450

`c 3`表示继续执行并在第 3 行停止

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-23T21:42:40.623

没有一步。您可以在“第 3 行”设置断点并继续“c”到下一个断点，或者明确声明`c <line #>`在特定行处停止。

# android - 如何在 jQuery Mobile 中检测用户提交的搜索字段？

> ID：11173142
> 
> 赞同：0
> 
> 时间：2012-06-23T21:31:52.170
> 
> 标签：android, jquery, jquery-mobile, cordova

我在 jQM/phonegap/cordova Android 应用程序中有一个搜索栏。

我到底如何检测用户何时按下“输入”或“完成”或其他什么，以便我可以提交搜索？

我是否必须构建自定义键检测器，或者是否有此事件？

太令人沮丧了-我在任何地方的文档中都找不到这个....

大家干杯！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T07:32:39.553

您可以将该字段包装在表单元素中，即：

```
<form id="foo">
<input type="text" />
</form> 
```

然后在“用户在 PC 键盘上按下相当于 'return' 的键，即'go' 或'done'，或者操作系统调用它的任何东西”时触发一个事件，您可以使用

```
$('#foo').submit(function(){
    //do stuff
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T22:01:41.853

您将使用与“普通”HTML 应用程序中相同的代码。由于您使用的是 jQuery Mobile，因此您可以使用 jQuery。如果该字段的 id 为 foo，则可以使用

```
$("#foo").on("click", function() {
//do stuff here
}); 
```

# java - 在 Java 中压缩时如何维护文件夹结构？

> ID：11173146
> 
> 赞同：4
> 
> 时间：2012-06-23T21:32:21.030
> 
> 标签：java, android, zip

我想压缩一个结构如下的文件夹：

临时/文件夹1/文件1

临时/文件夹2/文件2

临时/文件3

并准确维护目录结构。目前，当我压缩它时，我得到一个不维护目录结构的 zip。看起来像这个 file1 file2 file3

我该怎么做才能像所有普通的压缩应用程序一样将文件添加到各自的文件夹中？

这是我到目前为止的代码：

```
package com.damastah.deflash;

import android.util.Log;
import java.io.BufferedInputStream;
import java.io.BufferedOutputStream;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.util.ArrayList;
import java.util.zip.ZipEntry;
import java.util.zip.ZipOutputStream;

public class Compress {
    private static final int BUFFER = 2048;

    private ArrayList<File> _files;
    private String _zipFile;

    public Compress(ArrayList<File> files, String zipFile) {
        _files = files;
        _zipFile = zipFile;
    }

    public void zip() {
        try {
            BufferedInputStream origin = null;
            FileOutputStream dest = new FileOutputStream(_zipFile);

            ZipOutputStream out = new ZipOutputStream(new BufferedOutputStream(
                    dest));

            byte data[] = new byte[BUFFER];
            Log.e("Compress - zip", "test");
            for (int i = 0; i < _files.size(); i++) {
                Log.v("Compress", "Adding: " + _files.get(i).getAbsolutePath());
                FileInputStream fi = new FileInputStream(_files.get(i)
                        .getAbsolutePath());
                origin = new BufferedInputStream(fi, BUFFER);
                ZipEntry entry;
                if (_files.get(i).getAbsolutePath().contains("."))
                    entry = new ZipEntry(_files
                            .get(i)
                            .getAbsolutePath()
                            .substring(
                                    _files.get(i).getAbsolutePath()
                                            .lastIndexOf("/") + 1));
                else
                    entry = new ZipEntry(_files.get(i).getAbsolutePath());
                out.putNextEntry(entry);

                int count;
                while ((count = origin.read(data, 0, BUFFER)) != -1) {
                    out.write(data, 0, count);
                }

                origin.close();
            }

            out.close();
        } catch (Exception e) {
            e.printStackTrace();
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T22:22:37.373

我不是 android 开发人员，因此仅将此代码视为 TIP

```
class ZipCompress {
    public static void main(String[] args) throws IOException {

        String dir = "d:\\My folder\\";
        // this entries I want to put in archives in the way they are now
        String[] entries = { "temp\\folder1\\file1.txt", "temp\\folder2\\file2.txt",
                "temp\\file3.txt" };

        ZipOutputStream zipos = new ZipOutputStream(new BufferedOutputStream(
                new FileOutputStream(dir + "archive.zip")));

        // time to create entries and fill them with data
        for (String entrie : entries) {
            System.out.println("Writing file: " + dir + entrie);

            // prepering file stream
            BufferedInputStream fileStream = new BufferedInputStream(
                    new FileInputStream(dir + entrie));

//--------------------------------------------------------------------------
//          Here we decide how we entry will look like in archive.
//          We use only part of path from String[] entries
//          like "temp\\folder1\\file1.txt"
//--------------------------------------------------------------------------
            ZipEntry newEntry = new ZipEntry(entrie);

            newEntry.setComment("comment to entry: " + newEntry);

            // now lets put this entry in archive
            zipos.putNextEntry(newEntry);

            // lets put data from file to current archive entry
            int c;
            while ((c = fileStream.read()) != -1)
                zipos.write(c);
            fileStream.close();
        }
        zipos.close();
    }
} 
```

## 编辑

我不确定你想在这里做什么

```
if (_files.get(i).getAbsolutePath().contains("."))
                    entry = new ZipEntry(_files
                            .get(i)
                            .getAbsolutePath()
                            .substring(
                                    _files.get(i).getAbsolutePath()
                                            .lastIndexOf("/") + 1)); 
```

据我所知，它删除了文件的路径，只留下文件名（类似`_files.get(i).getName()`）。如果这是真的，那么这就是您的 zip 文件中没有文件夹结构的原因。您是说 zip 条目应该只是该文件名，没有任何文件夹。

因此，如果您希望 zip 文件包含路径的某些部分， `/my/full/path/to/folder/temp/folder1/file1`例如`temp/folder1/file1`在创建 ZipEntry 时删除该路径的不必要部分

```
String dir = "/my/full/path/to/folder/";
for (int i = 0; i < _files.size(); i++) {
...
    if (_files.get(i).getAbsolutePath().contains(".")) {
        entry = new ZipEntry(_files
            .get(i).getAbsolutePath().replace(dir, ""));
... 
```

# php - 无法访问对象中的数组

> ID：11173161
> 
> 赞同：-1
> 
> 时间：2012-06-23T21:35:02.933
> 
> 标签：php

```
var_dump($img->files);

object(stdClass)#17 (6) {
  ["960"]=  string(46) "/imgs/14c99db10ee9cc28bfa7db16e961fd65-960.jpg"
  ["60"]=   string(45) "/imgs/14c99db10ee9cc28bfa7db16e961fd65-60.jpg"
  ["100"]=  string(46) "/imgs/14c99db10ee9cc28bfa7db16e961fd65-100.jpg"
  ["200"]=  string(46) "/imgs/14c99db10ee9cc28bfa7db16e961fd65-200.jpg"
  ["300"]=  string(46) "/imgs/14c99db10ee9cc28bfa7db16e961fd65-300.jpg"
  ["500"]=  string(46) "/imgs/14c99db10ee9cc28bfa7db16e961fd65-500.jpg"
} 
```

如何使用一个索引

```
var_dump($img->files["60"]); 
```

失败

致命错误：不能将 stdClass 类型的对象用作数组

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T21:36:41.640

它在您的 var_dump 中说这`$img->files`不是数组，它是 class 的对象`stdClass`。

您应该使用对象语法访问它。

```
$img->files->{'60'}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T21:44:38.177

这就是我们如何获得与您获得的数据结构相似的数据结构：

```
$img = new stdClass();
$img->files = array(960 => "/imgs/14c99db10ee9cc28bfa7db16e961fd65-960.jpg");
$img->files = (object)$img->files; 
```

...然后这个：

```
var_dump($img->files->{'960'}); // NULL 
```

...只会打印NULL。但是这个...

```
$img->files = (array)$img->files;
var_dump($img->files[960]); 
```

... 将工作。) 您需要将一个类似数组的对象（显然是由一些外部代码错误地转换为对象）回数组。然后像往常一样访问它的元素。

[小提琴](http://codepad.org/XH7IFtTY)玩。

更新：...这里是帖子的[链接](https://stackoverflow.com/a/1869971/1229023)，它解释了这种行为的原因，比我能做到的要好得多。)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T21:46:56.383

PHP 5.3.10，运行这个测试：

```
$obj = (object)array(10 => 'foo');
$obj->{20} = 'bar';

var_dump($obj);

print($obj->{10}."\n");
print($obj->{20}."\n"); 
```

运行它我得到这个结果：

```
object(stdClass)#1 (2) {
  [10]=>
  string(3) "foo"
  ["20"]=>
  string(3) "bar"
}
PHP Notice:  Undefined property: stdClass::$10 in /home/lanzz/tmp/test.php on line 8

bar 
```

因此，从数组转换的数字属性被分配给对象中不可访问的实际*整数*属性，而分配给对象的数字属性获得可访问的字符串属性。

我认为这只是 PHP 中的另一个错误。

# sql-server - 如何告诉 Entity Framework 允许 SQL Server 为字段提供定义的默认值？

> ID：11173162
> 
> 赞同：0
> 
> 时间：2012-06-23T21:35:03.120
> 
> 标签：sql-server, entity-framework, default-value

当向表中添加新行时，我使用以下 SQL 脚本启用在字段中设置当前时间：

```
ALTER TABLE [Items] ADD CONSTRAINT DF_Items DEFAULT GETDATE() FOR [CreationDate] 
```

现在我正在使用 Entity Framework 来处理这个表，并向它添加新行。我想要做的是允许该特定列从 SQL Server 本身接收其值，而不必自己提供该值。在 Visual Basic 中将该特定列的值设置为`Nothing`用 填充该字段`DateTime.MinValue`，这不是我想要的（顺便说一下，SQL Server 不支持）。

我必须做出哪些改变才能完成这项工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T22:58:15.767

您必须`StoreGeneratedPattern`在 EDMX 设计器中（或`DatabaseGeneratedOption`首先在代码中）设置`Identity`该日期属性。EF 始终为未填充的属性发送 .NET 默认值，该属性不是存储生成的。将模式设置为`Identity`将告诉 EF 在插入期间在 DB 中生成值，并且它将重新查询其值。如果您从默认值更改模式，您将无法在应用程序中设置该属性。

# ruby-on-rails - 无法做到：Ruby on Rails 乘客-nginx 配置

> ID：11173167
> 
> 赞同：0
> 
> 时间：2012-06-23T21:36:20.407
> 
> 标签：ruby-on-rails, nginx, passenger

我的系统是 Arch linux。我尝试使用命令“rvmsudopassenger-install-nginx-module”安装passenger-nginx。

我的应用程序位于“~/rails_projects/myPedia”目录中。当我尝试通过“nginx”运行服务器时；我收到此错误：

```
nginx: [alert] could not open error log file: open() "/var/log/nginx/error.log" failed (13: Permission denied)
2012/06/24 00:25:46 [emerg] 8853#0: open() "/var/log/nginx/access.log" failed (13: Permission denied) 
```

这些文件或我的用户的正确权限必须是什么？

在我的 /opt/nginx/conf/nginx.conf 中是：

```
 http {
        passenger_root /home/ytsejam/.rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.13;
        passenger_ruby /home/ytsejam/.rvm/wrappers/ruby-1.9.3-p194/ruby;
    ................
        server {
            listen       80;
            server_name  localhost;
            location /home/ytsejam/rails_projects/myPedia
            passenger_enabled on
    }
} 
```

是否为我的应用程序目录正确设置了位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T21:47:47.170

授予运行 nginx 的用户对“/var/log/nginx/error.log”的写入权限。并修复位置路径：

```
location /home/ytsejam/rails_projects/myPedia/public 
```

# javascript - 有没有一种识别单词的好方法，即使它在 javascript 中拼写错误？

> ID：11173168
> 
> 赞同：7
> 
> 时间：2012-06-23T21:36:27.790
> 
> 标签：javascript, jquery

我有一堆单词（主要是地点，比如斯德哥尔摩和伦敦）和一堆字符串。比如“我想从斯德哥尔摩去伦敦”。我想找出哪些单词在哪些字符串中。

我目前使用 .indexOf 来执行此任务。

javascript中是否有一个库、方法、函数等可以识别拼写错误的单词版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T21:46:08.343

[https://github.com/epeli/underscore.string#readme](https://github.com/epeli/underscore.string#readme)

查看`levenshtein _.levenshtein(string1, string2)`距离函数。它可以用来计算太字符串之间的距离。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T21:46:21.120

我发现这个 JS 库[http://www.javascriptspellcheck.com/](http://www.javascriptspellcheck.com/)应该检查几种语言的拼写

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-23T21:51:21.827

阅读完上述内容后，我不确定我是否完全清楚您要做什么......但是关于您关于识别拼写错误的单词的最后一个问题 - 我会看看[java script spell check](http://www.javascriptspellcheck.com/) . 作为旁注..当人们想要计算拼写正确和错误的单词时，通常会尝试使用[soundex 。](http://en.wikipedia.org/wiki/Soundex)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-02T12:05:12.273

php 默认具有 levenshtein 函数。您可以通过使用[PHPJS](http://phpjs.org/)库来使用此方法。

通过查找单词和正确单词词典之间的 levenshtein 距离，您可以获得与拼写错误的单词之间的 levenshtein 距离最小的单词。这很可能是特定单词的正确拼写。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-15T04:56:59.200

过去，我使用过[MissPlete](https://github.com/xavi/miss-plete)库，它默认使用[Jaro-Winkler](https://en.wikipedia.org/wiki/Jaro%E2%80%93Winkler_distance)距离算法。

它没有依赖项（甚至没有 jQuery），这是我非常重视的。

# ruby - 根据整数值创建 n 个项目的数组

> ID：11173173
> 
> 赞同：86
> 
> 时间：2012-06-23T21:37:10.310
> 
> 标签：ruby

鉴于我有一个整数值，例如`10`.

如何创建一个包含 10 个元素的数组`[1,2,3,4,5,6,7,8,9,10]`？

* * *

## 回答 #1

> 赞同：167
> 
> 时间：2012-06-23T22:02:30.853

你可以只打一个范围：

```
[*1..10]
#=> [1, 2, 3, 4, 5, 6, 7, 8, 9, 10] 
```

Ruby 1.9 允许多个 splats，这非常方便：

```
[*1..3, *?a..?c]
#=> [1, 2, 3, "a", "b", "c"] 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-06-23T22:22:47.933

还有一个棘手的方法：

```
> Array.new(10) {|i| i+1 }
=> [1, 2, 3, 4, 5, 6, 7, 8, 9, 10] 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2015-12-14T00:25:50.243

关于带有棘手方法的评论：

```
require 'benchmark'

Benchmark.bm { |x|
  x.report('[*..] ') do
    [*1000000 .. 9999999]
  end  

  x.report('(..).to_a') do
    (1000000 .. 9999999).to_a
  end

  x.report('Array(..)') do
    Array(1000000 .. 9999999)
  end

  x.report('Array.new(n, &:next)') do
    Array.new(8999999, &:next)
  end

} 
```

请注意，这种棘手的方法`Array.new(n, &:next)`速度较慢，而其他三种基本方法相同。

```
 user     system      total        real
[*..]                  0.734000   0.110000   0.844000 (  0.843753)
(..).to_a              0.703000   0.062000   0.765000 (  0.843752)
Array(..)              0.750000   0.016000   0.766000 (  0.859374)
Array.new(n, &:next)   1.250000   0.000000   1.250000 (  1.250002) 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-06-23T21:44:19.670

```
def array_up_to(i)
    (1..i).to_a
end 
```

它允许您：

```
 > array_up_to(10)
 => [1, 2, 3, 4, 5, 6, 7, 8, 9, 10] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-11-08T02:39:33.457

你可以这样做：

```
array= Array(0..10) 
```

如果你想输入，你可以使用这个：

```
puts "Input:"
n=gets.to_i
array= Array(0..n)
puts array.inspect 
```

# objective-c - 专用“旋转”按钮的代码

> ID：11173174
> 
> 赞同：0
> 
> 时间：2012-06-23T21:37:29.270
> 
> 标签：objective-c, ipad, xcode4.2

我正在为 ipad 构建一个场地布局应用程序，它将使用不同类别的对象（桌子/椅子/舞台部分等）供用户添加到平面图和调整。

在其他应用程序中，我使用 UIgestures 来平移和旋转对象：

```
- (IBAction)handlePan:(UIPanGestureRecognizer *)recognizer {

CGPoint translation = [recognizer translationInView:self.view]; 
recognizer.view.center = CGPointMake(recognizer.view.center.x + translation.x, recognizer.view.center.y + translation.y); 
[recognizer setTranslation:CGPointMake(0, 0) inView:self.view];
}

- (IBAction)rotateMe:(UIRotationGestureRecognizer *)recognizer{

recognizer.view.transform = CGAffineTransformRotate(recognizer.view.transform, recognizer.rotation);
recognizer.rotation = 0;
} 
```

但是，此应用程序的对象将比普通手指小，从而允许多个触摸手势。

我想在视图中选择一个“旋转”按钮，按下并按住该按钮将允许在任何对象上单击以自定义旋转它。

或者是否有人可以指导我找到更好的选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T22:01:41.600

做起来应该相当简单。触摸旋转按钮将打开旋转，按下另一个对象将执行旋转。用来`CGAffineTransformMakeRotation`旋转。

```
yourObject.view.transform=CGAffineTransformMakeRotation(yourVariable*M_PI/180.0); 
```

将 yourVariable 增加您选择的任何角度，每次都应旋转一点，即每次触摸对象时，增加 90 会使对象旋转 90 度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T22:44:30.083

GitHub 上有一个名为 KTOneFingerRotationGestureRecognizer 的项目，它是一个自定义旋转手势识别器，使用单指进行旋转。你触碰一个物体并旋转它，就好像它的中心有一个轴一样。它可能对您有用，具体取决于您的形状有多小。您可能需要使您的视图比它们包含的图像大一点（换句话说，添加一些填充。）

# php - Symfony 2：在表单构建器中使用 Twig 扩展

> ID：11173178
> 
> 赞同：3
> 
> 时间：2012-06-23T21:37:54.727
> 
> 标签：php, symfony

我需要使用自定义过滤器更改值或标签的格式。但是，我需要从表单构建器而不是在树枝模板本身中执行此操作。换句话说，当我在抽象类型类中构建表单时，我需要能够应用特定的格式。

这是一个需要这样做的应用程序：

分配给表单元素的标签基于数据库表字段名称。我需要能够更改这些标签的呈现方式，例如标题大小写或大写等。

这样做的最佳方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T05:18:23.817

您可以[创建自定义表单字段类型](http://symfony.com/doc/current/cookbook/form/create_custom_field_type.html)，从选择或实体字段类型扩展。然后，您可以为 应用过滤器或任何您想要[的字段自定义模板。](http://symfony.com/doc/current/cookbook/form/create_custom_field_type.html#creating-a-template-for-the-field)

# javascript - jQuery Select #id 以 word 为前缀，counter 为后缀

> ID：11173188
> 
> 赞同：10
> 
> 时间：2012-06-23T21:40:19.990
> 
> 标签：javascript, jquery

有没有办法用 jQuery 选择所有带有前缀“my”和后缀“0-9”的 id。像这些 $("#my$1-4") 之类的东西，还是可以通过循环来实现？

```
 <div id="my1"/>
    <div id="my2"/>
    <div id="my3"/>
    <div id="my4"/>
    <div id="my5"/> 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-23T21:45:30.150

第一个想法，这似乎运作良好：

```
$('div[id^="my"]').filter(
    function(){
        return this.id.match(/\d+$/);
    }); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/9QL8y/)。

上面选择所有以 value 开头的`div`元素，然后将返回的元素过滤为*也*以数字字符结尾的元素。`id``my``id`

 *参考：

*   [属性以选择器开头](http://api.jquery.com/attribute-starts-with-selector/)。
*   [`filter()`](http://api.jquery.com/filter/).
*   [正则表达式，在 Mozilla 开发者网络](https://developer.mozilla.org/en/JavaScript/Guide/Regular_Expressions)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-23T21:45:08.647

前缀部分很容易通过[属性开头](http://api.jquery.com/attribute-starts-with-selector/)选择器实现：

```
$("div[id^=my]"); 
```

但是没有选择器可以让您指定字符范围，因此必须涉及循环。我建议[`filter`](http://api.jquery.com/filter/)：

```
$("div").filter(function () {
    return /^my\d$/.test(this.id);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T21:45:31.687

假设您没有以“my”开头的数百万个元素，您可以这样做：

```
$('[id^=my]').filter(function() { return this.id.matches(/\d/) && this.id.length == 3 }) 
```

这会抓取所有具有以“my”开头的 id、包含数字且只有 3 个字符长的元素（因此“my54”将不匹配，但“my6”将匹配）*

# php - 有什么方法可以在特定时间自动触发 mysql 功能？在 mysql 5.0.91-log 上

> ID：11173192
> 
> 赞同：0
> 
> 时间：2012-06-23T21:40:59.737
> 
> 标签：php, mysql

有什么方法可以在特定时间自动触发 mysql 功能？在 mysql 5.0.91-log 上，有没有办法在 php 上做到这一点？我的意思是一个php页面，它将设置mysql在特定时间做某事？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T21:42:56.817

您可以使用 cron 作业在特定时间执行您的 php。您的 php 将调用 mysql 存储过程。

# asp.net-mvc - ASP.NET MVC SEO 友好 URL

> ID：11173194
> 
> 赞同：1
> 
> 时间：2012-06-23T21:41:07.960
> 
> 标签：asp.net-mvc, seo, asp.net-mvc-routing

我正在尝试关注此页面[http://www.deliveron.com/blog/post/SEO-Friendly-Routes-with-ASPnet-MVC.aspx](http://www.deliveron.com/blog/post/SEO-Friendly-Routes-with-ASPnet-MVC.aspx)这就是我在 global.asax 中所拥有的，

```
public class MvcApplication : System.Web.HttpApplication
{
    public static void RegisterRoutes(RouteCollection routes)
    {
        routes.MapRoute(
            "MemberRoute",                       // routeName
            "member/{userId}/{pseudoName}", // url
            new
            {                           // url defaults
                controller = "Member",
                action = "Index",
                userId = 0,
                pseudoName = UrlParameter.Optional
            },
            new
            {                          // url constraints
                userId = @"\d+" // must match url {userId}
            }
        );
    }

    protected void Application_Start()
    {
        AreaRegistration.RegisterAllAreas();

        FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
        RouteConfig.RegisterRoutes(RouteTable.Routes);
        BundleConfig.RegisterBundles(BundleTable.Bundles);
    }
} 
```

成员控制器，

```
public ActionResult Index(int id, string pseudoName)
    {
        User user;
        var unitOfWork = new UnitOfWork();
        user = unitOfWork.UserRepository.GetById(id);

        var expectedName = user.PseudoName.ToSeoUrl();
        var actualName = (pseudoName ?? "").ToLower();

        // permanently redirect to the correct URL
        if (expectedName != actualName)
            return RedirectToActionPermanent("Index", "Member", new { id = user.UserId, pseudoName = expectedName });
        return View(user);
    } 
```

这是从 AccountController 的登录操作返回的，

```
return RedirectToAction("Index", "Member", new { id = user.UserId, pseudoName = user.PseudoName }); 
```

当重定向发生时，Url 最终看起来像[http://site.com/Member/1?pseudoName=CEO](http://site.com/Member/1?pseudoName=CEO)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T21:52:15.680

请记住，您正在使用`MapRoute`over `MapHttpRoute`，因此您想使用`RedirectToRoute`or (in the markup)来调用它`@Html.RouteLink`。

因此，要使其在您的上述代码中工作，而不是重定向到一个操作，然后指定参数，请使用以下命令：

```
return RedirectToRoute("Member", new {
  userId = user.Id, // note i use userId as it's in the route's url
  pseudoName = user.pseudoName
}); 
```

此外，您的路线中的修复将如下所示：

```
routes.MapRoute(
  "Member",                       // routeName
  "member/{userId}/{pseudoName}", // url
  new {                           // url defaults
    controller = "Member",
    action = "Index",
    userId = 0,
    pseudoName = UrlParameter.Optional
  },
  new {                          // url constraints
    userId = @"\d+"              // must match url {userId}
  }
); 
```

# c# - 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误

> ID：11173198
> 
> 赞同：-1
> 
> 时间：2012-06-23T21:41:20.923
> 
> 标签：c#, sql-server

我只想遍历数据库中的结果。这就是我现在要做的所有事情！这是我尝试调试时遇到的错误：

> 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：26 - 错误定位服务器/指定的实例）

它指向这一行：

```
// fill dataset into named table
myAdapter.Fill(myDataSet, "Sent"); 
```

这是我的整个代码：

```
 // get connection strings from app.config
    string conString = ConfigurationManager.ConnectionStrings["Database1ConnectionString"].ConnectionString;

    // connection object
    SqlConnection myConn = new SqlConnection(conString);

    // create adapter
    SqlDataAdapter myAdapter = new SqlDataAdapter("select * from `Sent`", myConn);

    // create command builder
    SqlCommandBuilder myCommandBuilder = new SqlCommandBuilder(myAdapter);

    // create dataset
    DataSet myDataSet = new DataSet();

    // fill dataset into named table
    myAdapter.Fill(myDataSet, "Sent");

    // query using linq
    IEnumerable<DataRow> results
        = from row in myDataSet.Tables["Sent"].AsEnumerable()
          select row;

    // enumerate through results
    foreach (DataRow row in results)
    {
        MessageBox.Show(row.ToString());
    } 
```

我能做些什么来解决这个问题？另外，如果有人有更简单的方法在 C# 中使用数据库，我愿意接受你的想法，因为这对我来说很荒谬（在 C# 中操作数据库）。感谢您的帮助。

**2012 年 6 月 29 日更新：**

以下代码适用于我：

```
 // get connection strings from app.config
        string conString = ConfigurationManager.ConnectionStrings["Database1ConnectionString"].ConnectionString;

        // connection object
        SqlCeConnection myConn = new SqlCeConnection(conString);

        // create adapter
        SqlCeDataAdapter myAdapter = new SqlCeDataAdapter("select * from [Sent]", myConn);

        // create command builder
        SqlCeCommandBuilder myCommandBuilder = new SqlCeCommandBuilder(myAdapter);

        // create dataset
        DataSet myDataSet = new DataSet();

        // fill dataset into named table
        myAdapter.Fill(myDataSet, "Sent");

        // create new row
        DataRow newRow = myDataSet.Tables["Sent"].NewRow();

        // set field vals
        newRow["sendTo"] = sendTo;
        newRow["subject"] = subject;
        newRow["message"] = message;

        // add new row to table
        myDataSet.Tables["Sent"].Rows.Add(newRow);

        // update database
        myAdapter.UpdateCommand = myCommandBuilder.GetUpdateCommand();
        int updatedRows = myAdapter.Update(myDataSet, "Sent");
        //MessageBox.Show("There were "+updatedRows.ToString()+" updated rows");

        // close connection
        myConn.Close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T21:43:40.033

首先：**检查您的连接字符串**错误是否直接告诉您“嘿，我无法连接到您的数据库”

第二：（`select * from Sent` **不带撇号）**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T02:04:16.563

您是否更改了安装 SQL Server 的机器中使用的密码？我之前遇到过这种情况，我所做的是将我的新密码反映到 SQL Server 配置中，然后重新启动服务。

还请确保在 SQL 配置设置中启用了 TCP/IP 设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T07:31:39.187

当我们没有更改sql server配置管理器中的tcp/ip设置时会出现这种错误。所以[我们需要启用tcp/ip属性来解决这个错误](http://social.msdn.microsoft.com/Forums/en-US/sqldataaccess/thread/ea9f0e79-ef69-4d47-9862-d53a1e460003/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-30T03:08:12.023

可能在这里说明了显而易见的问题，但您是否检查过 SqlExpress 服务正在运行？

[https://stackoverflow.com/a/4650231/1095373](https://stackoverflow.com/a/4650231/1095373)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-30T11:42:42.393

我没有使用正确的代码（它与任何连接的东西没有任何关系）。这是我第一次尝试使用 PHP 以外的语言连接到数据库。现在，我可能会使用 LINQ 或 Lambda 表达式而不是这段代码。但这是我使用的有效的方法：

```
 // get connection strings from app.config
    string conString = ConfigurationManager.ConnectionStrings["Database1ConnectionString"].ConnectionString;

    // connection object
    SqlCeConnection myConn = new SqlCeConnection(conString);

    // create adapter
    SqlCeDataAdapter myAdapter = new SqlCeDataAdapter("select * from [Sent]", myConn);

    // create command builder
    SqlCeCommandBuilder myCommandBuilder = new SqlCeCommandBuilder(myAdapter);

    // create dataset
    DataSet myDataSet = new DataSet();

    // fill dataset into named table
    myAdapter.Fill(myDataSet, "Sent");

    // create new row
    DataRow newRow = myDataSet.Tables["Sent"].NewRow();

    // set field vals
    newRow["sendTo"] = sendTo;
    newRow["subject"] = subject;
    newRow["message"] = message;

    // add new row to table
    myDataSet.Tables["Sent"].Rows.Add(newRow);

    // update database
    myAdapter.UpdateCommand = myCommandBuilder.GetUpdateCommand();
    int updatedRows = myAdapter.Update(myDataSet, "Sent");
    //MessageBox.Show("There were "+updatedRows.ToString()+" updated rows");

    // close connection
    myConn.Close(); 
```

# c# - Azure 缓存组策略

> ID：11173201
> 
> 赞同：2
> 
> 时间：2012-06-23T21:42:00.953
> 
> 标签：c#, azure, azure-caching

我有一个页面，其中包含一个主查询，上面有一堆过滤器，可能有 9 个不同的维度。

我目前检查我的天蓝色缓存中的查询参数。如果它在那里，我接受它。如果没有，我查询 sql 并更新缓存。所有这些都运行良好。

我的问题是，如果我更新数据库中的数据，我想使与我的查询关联的所有缓存项无效。

我希望有一个“组”键或类似的东西。这样一来，我就可以使一整组缓存的键/值对无效。

有没有办法使天蓝色的一组缓存失效？还是我最好的选择是使整个缓存无效？（我也不知道该怎么做）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T21:58:39.653

缓存失效通常通过通知完成。共享缓存服务（您通过门户设置它并从 128MB-4GB 中选择大小）不支持通知。

2012 年 6 月引入的角色内缓存支持通知，是 1.7 SDK 的一部分。您使用的是哪种缓存类型？

这是开始使用角色内缓存的[参考页面。](http://www.windowsazure.com/en-us/develop/net/how-to-guides/cache/)这是通知的[参考](http://msdn.microsoft.com/en-us/library/windowsazure/hh914137)。

# javascript - 可以打开 URL HTML

> ID：11173205
> 
> 赞同：1
> 
> 时间：2012-06-23T21:42:25.640
> 
> 标签：javascript

我可以在链接之前检查是否可以在 JavaScript中打开类似**OBLevel://id=18291234的 URL 吗？**

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T21:47:50.393

不使用 Javascript。您需要知道计算机（浏览器除外）上有哪些类型的应用程序可用，这不是您可以使用 Javascript 知道的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T21:43:58.603

你用 jQuery 尝试过 GET 吗？如果有答案，那么你知道你可以使用它。否则，如果它是 jQuery 不支持的一些晦涩的协议或应用程序，就没有办法做到这一点。

实验！

# eclipse - Eclipse 不编译 maven 项目的 source/main/resources 目录中的类

> ID：11173207
> 
> 赞同：1
> 
> 时间：2012-06-23T21:42:46.727
> 
> 标签：eclipse, maven

我使用 maven2eclipse 插件在 eclipse 中创建了一个 maven 项目。

然后，我通过转到项目属性中的项目方面将项目转换为 Web 模块项目。

问题是当我尝试在 src/main/resources 目录下创建一个类时，我的类都没有编译。我可以在类中放入任何类型的垃圾，编译器不会给我任何警告。此外，我创建的包不会创建“棕色包”，而是创建一个文件夹。

有谁知道我配置错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T21:45:50.507

`src/main/resources`旨在保存...资源：复制到类目录的属性文件、图像等。Java 源文件必须放在`src/main/java`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T12:09:16.537

你可以试试这个：右键单击你的项目> maven > 更新项目配置。它将根据您的 pom.xml 配置为您配置 .classpath 和 .settings。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-23T21:44:52.297

问题是，当您在项目方面切换到此 Web 模块时，默认情况下会在 java build path > source 下输入“exclude *.java”文件。这必须被删除。

# ruby - 有关 Learning Rails 3 中示例的代码

> ID：11173215
> 
> 赞同：0
> 
> 时间：2012-06-23T21:44:29.270
> 
> 标签：ruby, ruby-on-rails-3

我目前正在阅读 Learning Rails 3。我正在研究一个可以创建学生和奖励的示例。一个学生有_许多奖项和奖项属于_学生。

在 app/views/awards/_form.html.erb 部分代码如下所示：

```
<div class="field">
  <%= f.label :student_id %><br />
  <%= f.select :student_id, Student.find(:all).collect {|s| [s.name, s.id]} %>
</div> 
```

这本书解释了这个代码是这样的：

“这就是 collect 方法有用的地方。它需要一个块作为参数 ({})。|s| 是一种非常简短的说法，即 Ruby 应该循环遍历学生集合并将每一行放入一个名为 s 的变量中. 在循环的每次迭代中，块将返回一个数组，包含在 [ 和 ] 中。这些数组中的每一个将成为选择列表中的行，将有两个值。第一个是学生的名字。该值将显示给用户。第二个是学生的 id 值，该值将是从表单返回到服务器的值。

我的问题是关于最后一句话。为什么以及如何从表单返回第二个值到服务器？为什么不是第一个值呢？将数组 [s.name, s.id] 发送到 collect 方法的目的是什么，为什么需要这个 collect 方法？

谢谢，迈克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T22:46:47.253

句子可能会被误解，但很简单：

*   第一个值是**名称**，它仅用于视图中的选择元素
*   第二个值**id**通过表单提交发送到服务器

Student.find(:all).collect {|s| [s.name, s.id]} 简单地创建一个数组数组：

```
[["Mike", 1],["John", 3], ["Mary", 8]] 
```

此数组允许您创建选择 HTML 标记：

```
<option value="1">Mike</option>
<option value="3">John</option>
<option value="8">Mary</option> 
```

# android - 保留阵列

> ID：11173219
> 
> 赞同：0
> 
> 时间：2012-06-23T21:45:03.140
> 
> 标签：android

我正在为 Android 创建各种测验应用程序。问题应以随机顺序提出，但每个问题每次运行只能出现一次。对于随机化，我正在创建一个随机数组，每个问题的索引都在一个单独的类中。该数组正在通过意图传递给显示问题的主类。

一旦用户回答了一个问题，我想给他反馈。我通过发起一个活动告诉他他是对还是错来做到这一点。之后，问题活动将重新启动。现在唯一的问题是随机数组现在已经消失了。

如何保留阵列以供以后使用？我真的可以在这里使用一些帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T21:49:21.693

所以你有两个`Activity`课程：提问（A）和正确/错误（B）。

如果您`startActivity`从“A”启动到“B”，则在完成“B”后不要重新启动“A”。只需调用`finish()`“B”即可。

这将确保您不会丢失问题中的数据`Activity`，并且不会启动数百个`Activity`对象。

# eclipse - eclipse中的Tomcat在导入不同项目的resources=applicationContext.xml时抛出FileNotFoundException

> ID：11173225
> 
> 赞同：2
> 
> 时间：2012-06-23T21:45:39.933
> 
> 标签：eclipse, spring, tomcat, maven, applicationcontext

我正在使用 Spring 和 Maven 项目。我在 mit-parent 下有 Project mit-webservices 和 mit-util 项目。

mit-webservices 正在使用 mit-utils。我正在从 mit-webservices 的 webapplicationContext.xml 导入 mit-utils 的 applicationContext.xml，如下所示。

```
<import resource="classpath:mit/utils/shared/applicationContext.xml" /> 
```

但是当我在 Eclipse 中的 Tomcat 下运行 mit-webservices 时，我得到了异常

```
Jun 23, 2012 2:35:50 PM org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: .:/Library/Java/Extensions:/System/Library/Java/Extensions:/usr/lib/java
Jun 23, 2012 2:35:50 PM org.apache.tomcat.util.digester.SetPropertiesRule begin
WARNING: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'source' to 'org.eclipse.jst.j2ee.server:vsm-webservices' did not find a matching property.
Jun 23, 2012 2:35:50 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["http-bio-8080"]
Jun 23, 2012 2:35:50 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["ajp-bio-8009"]
Jun 23, 2012 2:35:50 PM org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 639 ms
Jun 23, 2012 2:35:50 PM org.apache.catalina.core.StandardService startInternal
INFO: Starting service Catalina
Jun 23, 2012 2:35:50 PM org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.25
Jun 23, 2012 2:35:51 PM org.apache.catalina.core.ApplicationContext log
INFO: Initializing Spring root WebApplicationContext
Jun 23, 2012 2:35:51 PM org.springframework.web.context.ContextLoader initWebApplicationContext
INFO: Root WebApplicationContext: initialization started
Jun 23, 2012 2:35:51 PM org.springframework.context.support.AbstractApplicationContext prepareRefresh
INFO: Refreshing Root WebApplicationContext: startup date [Sat Jun 23 14:35:51 PDT 2012]; root of context hierarchy
Jun 23, 2012 2:35:51 PM org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions
INFO: Loading XML bean definitions from class path resource [mit/webservices/webApplicationContext.xml]
Jun 23, 2012 2:35:51 PM org.springframework.beans.factory.xml.XmlBeanDefinitionReader loadBeanDefinitions
INFO: Loading XML bean definitions from class path resource [mit/utils/shared/applicationContext.xml]
Jun 23, 2012 2:35:51 PM org.springframework.web.context.ContextLoader initWebApplicationContext
    SEVERE: Context initialization failed
    org.springframework.beans.factory.parsing.BeanDefinitionParsingException: Configuration problem: Failed to import bean definitions from URL location [classpath:mit/utils/shared/applicationContext.xml]
    Offending resource: class path resource [mit/webservices/webApplicationContext.xml]; nested exception is org.springframework.beans.factory.BeanDefinitionStoreException: IOException parsing XML document from class path resource [mit/utils/shared/applicationContext.xml]; nested exception is java.io.FileNotFoundException: class path resource [mit/utils/shared/applicationContext.xml] cannot be opened because it does not exist 
```

在我的 mit-webservices 中有一些 junit 测试，我在其中加载 mit-webservices/webapplicationContext 文件，它工作得很好。但是当我尝试在 tomcat 下部署 mit-webservices 时，它会抛出异常。

我还检查了 mit-utils.jar 确实存在的 mit-webservices 的 /lib dire。

我每次部署前都做了 mvn clean install 和 mvn eclipse:eclipse 。我认为tomcat在部署时无法在类路径中找到mit-util，但我不知道它为什么会发生。

我的 WebApplicationContext.xml 是

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:aop="http://www.springframework.org/schema/aop" xmlns:tx="http://www.springframework.org/schema/tx"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:util="http://www.springframework.org/schema/util" xmlns="http://www.springframework.org/schema/beans"
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
           http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
           http://www.springframework.org/schema/context
           http://www.springframework.org/schema/context/spring-context-3.0.xsd">

    <import resource="classpath:mit/utils/shared/applicationContext.xml" />

    <context:component-scan base-package="mit" />

</beans> 
```

我在 mit-webservices 中的 web.xml 是

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="2.5" xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

    <!-- Spring context -->

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>classpath:mit/webservices/webApplicationContext.xml </param-value>
    </context-param>

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>

    <servlet>
        <servlet-name>ServletAdaptor</servlet-name>
        <servlet-class>com.sun.jersey.spi.spring.container.servlet.SpringServlet</servlet-class>
        <init-param>
            <param-name>com.sun.jersey.config.property.packages</param-name>
            <param-value>mit.webservices.jaxrs</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>
    <servlet-mapping>
        <servlet-name>ServletAdaptor</servlet-name>
        <url-pattern>/resources/*</url-pattern>
    </servlet-mapping>

</web-app> 
```

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T08:08:59.477

在尝试了不同的建议解决方案之后。我在部署程序集的 Eclipse 中发现“找不到条目：mit-jpa”。所以我安装了 Eclipse WTP Eclipse 插件。然后重新部署tomcat，一切正常。

# android - 在应用程序中通过电子邮件共享数组列表

> ID：11173227
> 
> 赞同：0
> 
> 时间：2012-06-23T21:45:52.427
> 
> 标签：android

我是android的新手；我正在开发一个应用程序，我需要使用共享选项发送列表（数组列表）项目的邮件。目前，我可以使用以下代码以数组格式发送列表，例如 [htc, motorla, samsung]：

```
private void shareIt(){
    //String[] mailBody = (String[])cl.toString()
    int array_size = cl.getCount();
    String[] mailBody = new String[array_size];
    for (int i =0;i<array_size;i++){
        mailBody[i] = cl.getItem(i).toString();
    }

    Intent sharingIntent = new Intent(android.content.Intent.ACTION_SEND);
    sharingIntent.setType("text/plain");
    sharingIntent.putExtra(android.content.Intent.EXTRA_TEXT, Arrays.toString(mailBody));
    startActivity(Intent.createChooser(sharingIntent, "Share via"));
} 
```

但我想创建一个表格格式的邮件正文，例如：htc motorla samsung

请帮我以表格格式格式化数组；这将适用于`sharingIntent.putExtra(android.content.Intent.EXTRA_TEXT, Arrays.toString(mailBody));` Thanks。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T22:28:02.277

如果接收者理解 HTML，您可以`<br/>`在每个单词的末尾添加一个以表示换行符。如果您控制接收器，则可以使用任何字符（甚至使用您现在拥有的格式）来指示换行符并进行相应的解析。

发送`<br/>`看起来像

```
StringBuffer sb = new StringBuffer();
for (int i = 0;i < array_size; i++){
    sb.append(cl.getItem(i).toString()).append("<br/>")
}

//...
sharingIntent.putExtra(android.content.Intent.EXTRA_TEXT, sb.toString()); 
```

# ruby-on-rails - 如果 .find 返回 nil，如何创建模型实例

> ID：11173230
> 
> 赞同：0
> 
> 时间：2012-06-23T21:46:06.447
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在尝试使用文本字段来搜索用户电子邮件，如果找到，则创建会员资格。如果找不到，我想根据电子邮件地址创建用户。

**会员/Index.html.erb**

```
<%= render :partial => 'shared/logedinNav' %>
<section class="centered">
  <header>Team Settings</header>
  <section class="main">
    <aside class="blue_nav_aside">
        <nav>
            <ul>
                <li><%= link_to_unless_current "General", team_info_path(:id => @team.id)  %></li>
                <li id="bluenav"><%= link_to_unless_current "Team Members", memberships_path(:id => @team.id) %></li>
                <li><%= link_to_unless_current "Tags & Categories",  %></li>
                <li><%= link_to_unless_current "Payments",  %></li>
            </ul>
        </nav>
    </aside>
    <section class="inline_form">
        <%= form_for @membership do |u|%>
            <% if notice %>
                <p id="notice"><%= notice %></p>
            <% end %>
            <% if alert %>
            <p id="alert"><%= alert %></p>
            <% end %>

            <%= render "shared/error_messages", :target => @membership %>

            <%= u.hidden_field :team_id, :value => @team.id %>
            <h1><span class="pictos pictos-form-h1">g</span>Team Members</h1>
            <%= u.text_field :user_email, :placeholder => "    To add a team member, enter their email here..." %>
            <%= u.submit "Invite", :class => "grey button" %>
            <section>
                <ul>
                    <% @memberships.each do |m|%>
                        <li>
                            <%= m.user.email %>
                            <% if m.team.admin_user_id != m.user_id %>          
                                <%= link_to(membership_path(m), :confirm => 'Are you sure you want to delete this video?', :method => :delete, :class => "red_link") do %>
                                  <span class="pictos pictos-remove">-</span> Remove
                                <% end %>
                            <% end %>
                        </li>
                    <% end %>
                </ul>
            </section>
        <% end %>
    </section>
</section> 
```

**Memberships_controller.rb**

```
class MembershipsController < ApplicationController
  def index
    @team = Team.find(params[:id])
    @memberships = Membership.where(:team_id => @team.id)
    @membership = Membership.new
  end
  def create
    @membership = Membership.new(params[:membership])
    @team = Team.find(params[:membership][:team_id])
    @membership.user = User.find_or_create_by_email(:email => params[:membership][:user_email], :password => "pass", :password_confirmation => "pass")

    if @membership.save
      redirect_to memberships_path(:id => @team.id), :notice => "New membership created."
    else
      redirect_to memberships_path(:id => @team.id), :alert => "Fail."
    end
  end
  ....
end 
```

**会员资格.rb**

```
class Membership < ActiveRecord::Base
  belongs_to :team
  belongs_to :user
  accepts_nested_attributes_for :user
  attr_accessible :user_id, :team_id
  attr_accessor :user_email

  validates_presence_of :user_id, on: :create
  after_create :set_team_admin

  def set_team_admin
    self.team.set_admin_user
  end
end 
```

它在找到用户时工作，但现在它根本无法识别`create_user`并跳到失败重定向。

更新：这是更新后的代码，下面提到了建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T23:39:14.453

问题是您的成员资格实例不知道 user_email 参数。

您可以使用 Rails 动态查找器方法[http://api.rubyonrails.org/classes/ActiveRecord/Base.html#label-Dynamic+attribute-based+finders](http://api.rubyonrails.org/classes/ActiveRecord/Base.html#label-Dynamic+attribute-based+finders)来创建用户？例如在memberships_controller.rb

```
def create
    @membership = Membership.new(params[:membership])
    @membership.user = User.find_or_create_by_email(params[:membership][:user_email])

    if @membership.save
      redirect_to memberships_path(:id => @team.id), :notice => "New membership created."
    else
      redirect_to memberships_path(:id => @team.id), :alert => "Fail."
    end
  end 
```

# ravendb - 带边界矩形的 RavenDB 空间搜索

> ID：11173231
> 
> 赞同：3
> 
> 时间：2012-06-23T21:46:06.477
> 
> 标签：ravendb, spatial

我在 RavenDB 中有类似的文档：

```
public class MyClass
{
    ...
    public double Latitude { get; set; }
    public double Longitude { get; set; }
    ...
} 
```

现在我想查找位置在由 N 和 S 纬度以及 W 和 E 经度指定的矩形范围内的所有文档。

一个简单的方法是这样的查询：

```
.Where(o => o.Latitude <= boundaryNorth &&
            o.Latitude >= boundarySouth &&
            o.Longitude >= boundaryWest &&
            o.Longitude <= boundaryEast) 
```

但是，如果边界矩形位于反子午线上，这将不起作用，使查询复杂化（检查是否是这种情况，将边界矩形分成两个，创建两个由 || 组合的先前表达式）。

我知道您可以创建一个[空间索引](http://ravendb.net/docs/client-api/advanced/spatial-search)，然后从给定原点查询位置在指定半径内的所有文档，但我还没有找到任何其他查询该索引的方法。

还有其他查询空间索引的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T08:11:47.630

目前我们只允许搜索点的特定距离内的项目。我们确实有其他能力，但目前还没有公开。我建议将其发送到邮件列表，看看我们是否可以为您提供您想要的 API。

# java - 如何在 Java 中重新打开调试器选项卡

> ID：11173236
> 
> 赞同：0
> 
> 时间：2012-06-23T21:46:49.690
> 
> 标签：java, eclipse

我在 Eclipse 中，想调试一个程序。如果有帮助，我正在用 Java 编码。默认情况下，当您进入调试器视图时，有 3 个选项卡，其中一个是调试。他们不知何故被关闭了。如何重新打开这些选项卡？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T21:49:39.613

右键单击显示“调试”的按钮，按下该按钮以切换到调试透视图，然后选择“重置”将透视图设置为默认值。

如果您没有看到“调试”图标，请转到 Windows 菜单，然后转到“打开透视图”，然后转到“其他”，以防它没有出现在那里

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T21:50:58.557

在菜单栏上，按照 Window->Show View 查看默认视图。要显示特定视图，您可能必须在 Window->Show View->Others 上浏览其他视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T21:48:21.100

*窗口 - 显示视图*是您可以找到所有可能视图的地方。

# ruby - Rails：有选择地替换规范链接的主机名和参数

> ID：11173238
> 
> 赞同：1
> 
> 时间：2012-06-23T21:47:08.817
> 
> 标签：ruby, ruby-on-rails-3

**有没有办法以干净的方式选择性地替换 Rails URL 中的参数和主机名？**

背景：

如果当前页面不规范，我需要`<link rel="canonical" href="http://...">`在我的应用程序中生成链接（例如，URL 中存在额外的参数，或者主机名可能是 i18n 子域，例如`es.mysite.com`）

我喜欢能够用来`url_for(params.except(:foo))`干净地删除参数；这似乎可以智能地使用我的路由来正确调整 URL，我觉得这是在将来 URL 或参数更改时防止损坏的最防弹方法。

但是对于修复主机名，除了在字符串级别操作和使用正则表达式之外，我没有看到一个很好的干净方法来直接替换（例如）`es.mysite.com`用。`mysite.com`

手动解析字符串并不是世界末日，但我很高兴得知有一种方法可以执行以下操作：`url_for(params.except(:foo), with_host: "mysite.com")`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T22:53:40.530

要按摩 URL，请查看 Ruby 的内置[URI](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/uri/rdoc/URI.html)模块或[Addressable::URI](http://addressable.rubyforge.org/api/) gem。两者都让你感到沮丧和肮脏，撕开 URL 并重建它们。

这是 IRB 使用 Addressable::URI 的一个小例子：

```
irb(main):001:0> require 'addressable/uri'
=> true
irb(main):002:0> uri = Addressable::URI.parse(
irb(main):003:1*       "http://example.com/a/b/c/?one=1&two=2#foo"
irb(main):004:1>   )
=> #<Addressable::URI:0x80c1561c URI:http://example.com/a/b/c/?one=1&two=2#foo>
irb(main):005:0> uri.query_values
=> {"one"=>"1", "two"=>"2"}
irb(main):006:0> uri.query_values={'one'=>2,'two'=>1}
=> {"one"=>2, "two"=>1}
irb(main):007:0> uri
=> #<Addressable::URI:0x80c1561c URI:http://example.com/a/b/c/?one=2&two=1#foo> 
```

以下是与主机打交道的方法：

```
irb(main):008:0> uri.host
=> "example.com"
irb(main):009:0> uri.host = 'foo.com'
=> "foo.com"
irb(main):010:0> uri
=> #<Addressable::URI:0x80c1561c URI:http://foo.com/a/b/c/?one=2&two=1#foo> 
```

URI 是内置的并且工作正常，但它显示了一些年龄。Addressable 符合 RFC 并且非常强大且功能齐全。

# c# - MemoryStream 或其他解决方案

> ID：11173239
> 
> 赞同：0
> 
> 时间：2012-06-23T21:47:14.800
> 
> 标签：c#, winforms

我有一个加密和解密文件的winform（在C#中）......没关系，

但问题是它将解密的文件保存到硬盘上，然后我就可以使用它了！有没有办法重用解密文件而不将其保存在硬盘中（用户可以看到解密文件是问题！）例如，我可以将文件保存到内存（RAM）并将其用作流！？我已经搜索了很多，我发现只是memorystream（..）。如果这是答案，那么我应该如何使用它！！？我将不胜感激任何帮助，并为我糟糕的英语感到抱歉。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T22:14:14.023

您可以使用[CryptoStream](http://msdn.microsoft.com/en-us/library/system.security.cryptography.cryptostream.aspx)和 MemoryStream 在内存中进行加密。根据您的描述，这似乎是最好的方法。

# javascript - 在页面加载事件中调用 Javascript 函数？

> ID：11173240
> 
> 赞同：0
> 
> 时间：2012-06-23T21:47:20.493
> 
> 标签：javascript, asp.net, dom-events, pageload

我正在使用 ASP.NET 4\. C#。无论如何在页面加载中调用 Javascript 函数或按钮单击事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T21:51:04.713

您可以使用带有 JavaScript 或 jquery 的启动脚本

```
string script = "$(document).ready(function() {$('button').trigger('click'); });";
ScriptManager.RegisterStartupScript(this, GetType(), "ServerControlScript", script, true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T21:51:17.397

是的，您可以通过 asp.net 按钮调用 javascript 函数，例如，

通过将`OnClientClick`属性设置为 Javascript 函数名称

或者

您可以在 page_load 事件中编写以下内容

```
Button1.Attributes.Add("onclick","return javascript:f1()"); 
```

如果要在 page_load 事件中调用 Button 点击​​事件，

```
protected void Page_Load(object sender, EventArgs e)
        {
            Button1_Click(sender,e);
        }

        protected void Button1_Click(object sender, EventArgs e)
        {
            Label1.Text = "welcome";
        } 
```

希望这会奏效。

# javascript - 循环内的jQuery计算

> ID：11173242
> 
> 赞同：1
> 
> 时间：2012-06-23T21:47:31.700
> 
> 标签：javascript, jquery

我如何制作一个循环并为下一次迭代添加一些值，就像在 jQuery 中一样？

```
var currLength = length;
for (var i = 1; i < dotCount -1; i++) {
  $("#myElement" + i).css("width", currLength);
  currLength += length + margin;
} 
```

**编辑：这些只是一个例子。我只是想知道如何使用 jQuery 的 .each 函数，因为我对使用有一些不同的想法。我与 for 循环没有任何区别**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T02:06:22.960

不应该是：

```
var currLength = length;
for (var i = 1; i < dotCount -1; i++) {
  $("#myElement" + i).css("width", currLength);
  currLength += margin;
} 
```

`currLength`已经设置为长度了，对吧？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T11:11:32.803

这些是我最终的具体情况。只需要一个 .each 函数的想法，因为我在想有一种方法可以将这些循环合并在一起。

```
 var bCurrLeft = left;
        $(this.backgroundElements).each(function()
        {
            $(this).animate(
                {
                    left: bCurrLeft,
                    top: top
                }, moveSpeed);
            bCurrLeft += singleWidth  + singleMargin;
        });
        var fCurrLeft = left;
        $(this.foregroundElements).each(function()
        {
            $(this).animate(
                {
                    left: fCurrLeft,
                    top: top
                }, moveSpeed);
            fCurrLeft += singleWidth  + singleMargin;
        });

        $(this.allElements).promise().done(callback); 
```

# php - 这个 php 函数应该递归运行吗？

> ID：11173243
> 
> 赞同：1
> 
> 时间：2012-06-23T21:47:46.430
> 
> 标签：php, mysql, html, sql, database

我在类文件中的方法有问题：

```
 public static function getPageLeft($pid)
{
    self::_dbConnect();
    echo "now " .$pid;
    $pid--;
    echo " after ". $pid;
    $data = mysql_query("SELECT id FROM evening_pages WHERE id='".$pid."'") or die(mysql_error());
    $rows = mysql_num_rows($data);
    if($rows == 1){
        echo "  in  ";
        return $data;

    }elseif($pid != self::getMinPage()){
        self::getPageLeft($pid);
        echo " Current: " . $pid . " min: " .self::getMinPage();
    }
} 
```

我在那里有回声仅用于调试，我得到：

现在 22 之后 21 现在 21 之后 20 当前： 21 分钟： 1

此代码用于查找数据库驱动的 CMS 中剩下的下一页，以防客户端从数据库中删除一行，它会找到下一个较低的值。

因此，您打开的页面 id 为 22，在数据库中查找 id 21，如果它不存在，它应该为行返回 0，然后继续并在 id 20 上重试，但有一个 id = 20 的条目。

有人发现代码有任何问题吗？

当它试图查找在当前页面之前不存在的页面时也会出现此错误，例如在第 22 页但没有 21 的 ID：

警告：mysql_fetch_array() 期望参数 1 是资源，在第 37 行的 /home/prelas/public_html/index.php 中给出 null

那里的代码（第37行是while）：

```
 $getPageLeft = sql::getPageLeft($pid);
while($row = mysql_fetch_array($getPageLeft)){
        $pageleft = $row['id'];
    } 
```

非常感谢。

只是一个快速的编辑：“in”永远不会得到回应，但是当没有被删除的页面时，导航工作正常。

进一步编辑：使用代码的代码（如 37）：

```
 $navigation = '<div id="direction">
      <span class="inNav"> <a href="index.php?pid='. $min .'">&lt;&lt;</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="index.php?pid='. $pageleft .'">&lt;</a>&nbsp;&nbsp; </span><span class="black">&bull;</span><span class="inNav">&nbsp;&nbsp;&nbsp;<a href="index.php?pid='. $pageright .'">&gt;</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="index.php">&gt;&gt;</a></span>
  </div>' 
```

所以你可以看到它在那里使用 $pageleft 但是当它处理空白页时，这个值是空的（空的）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T22:29:07.767

为什么不编写SQL语句来获取下一个较低的ID？例如：

```
 SELECT `id`
   FROM `evening_pages`
   WHERE `id` < ?
   ORDER BY `id` DESC
   LIMIT 1 
```

或者：

```
 SELECT MAX(`id`)
   FROM `evening_pages`
   WHERE `id` < ? 
```

这样，您只需检查查询是否返回了某些内容。更少的代码，更少的数据库请求开销。

mysql 扩展正在逐步淘汰。了解使用 mysqli 或 PDO，并阅读[SQL 注入](http://unixwiz.net/techtips/sql-injection.html)的危险。

# android - AppWidget 屏幕方向

> ID：11173249
> 
> 赞同：0
> 
> 时间：2012-06-23T21:48:42.407
> 
> 标签：android, android-widget

这是我的问题。我有一个可以在纵向屏幕方向上完美运行的 appwidget。但是，当我将屏幕方向更改为横向时，主屏幕启动器会自动更改 appWidget 的宽度和高度，而问题是在横向模式下，主屏幕启动器未正确设置小部件的高度。所以，我需要检测屏幕方向是否改变并重新调整我的 appwidget 的大小。我已经用谷歌搜索了它，但我仍然不知道我该怎么做。如果这是一项活动，那很简单，但事实并非如此。如果有人对此有任何想法，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T19:31:04.853

当屏幕方向改变时，您的 AppWidgetProvider onUpdate 方法会被调用。您可以使用以下功能来获取您是处于纵向还是横向模式，然后基于此更新您的远程视图。

```
private static boolean isPortrait (Context cx) {
Display d = ((WindowManager) cx.getSystemService(Context.WINDOW_SERVICE)).getDefaultDisplay();

if (d.getWidth() == d.getHeight()) {
    return false;
} else if (d.getWidth() < d.getHeight()) {
    return true;    
} else {
    return false;
}
} 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-04T03:14:47.783

1.  在 values-port 和 values-land 中定义 bools.xml

    在值端口/bools.xml

    ```
    <?xml version="1.0" encoding="utf-8"?>
    <resources>
        <bool name="portrait">true</bool>
    </resources> 
    ```

    在 values-land/bools.xml

    ```
    <?xml version="1.0" encoding="utf-8"?>
    <resources>
        <bool name="portrait">false</bool>
    </resources> 
    ```

2.  通过代码中的 Context.getResources() 获取布尔值

    ```
    private static boolean isPortrait(Context context) {
        return context.getResources().getBoolean(R.bool.portrait);
    } 
    ```

# architecture - SOA：为什么不使用 Erlang/OTP Web 服务器作为服务？

> ID：11173252
> 
> 赞同：9
> 
> 时间：2012-06-23T21:49:07.837
> 
> 标签：architecture, wsdl, erlang, soa, erlang-otp

在阅读了[面向服务的架构原则](http://soaprinciples.com/)站点和相应的 Wikipedia[文章](http://en.wikipedia.org/wiki/Service-oriented_architecture)后，我有一个想法：Erlang/OTP 平台可以被视为一个 SOA 平台，并且可以在其上构建 SOA 应用程序。

唯一的问题是这样一个系统中每个服务的[服务契约](http://en.wikipedia.org/wiki/Service-oriented_architecture#Programmatic_service_contract)是非常具体的：为了调用 Erlang/OTP 中的服务，编排层必须通过 Erlang 消息或调用 gen_server 进行调用（取决于实现） .

这不会让对 Erlang/OTP 平台范围之外的服务进行任何调用。

但是，如果我们尝试通过将所有各自的 Service 功能移动到基于 Erlang 的 Web 服务器（如 Mochiweb）中来构建每个 Service，并从本质上将每个 Service 的接口从 gen_server:call 更改为 XML，那会怎样？

这将允许使用基于[WSDL](http://en.wikipedia.org/wiki/Web_Services_Description_Language)的通用服务合同从标准化的“砖块”组合各种应用程序。

此外，这种方法将让我们继续使用 OTP 管理器和其他 OTP 功能，因为这样的服务仍然是 OTP 应用程序。

所以，问题是：您认为通过使用 OTP 网络服务器 (Mochiweb) 作为服务来使用面向服务的架构方法构建软件应用程序是一个好主意吗？额外的 XML 处理层会破坏这种方法的所有优点吗？

![带有 Erlang/OTP 的 SOA](../Images/063d6fe570c6984f93f3bb3fc6671d17.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-24T12:53:12.890

没有这样做的主要原因是您将自己限制在 SOA 协议中。Erlang 通过一些附加点（监视器）实现了 IP 协议。虽然你可以做到，但我想知道它是否值得。

原则上，Erlang 已经拥有SOA*理念的所有工具，但没有**SOAP*和*WSDL*的所有臃肿:)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-25T08:00:47.847

这是我们 Erlang 的主要应用：Web 服务。我们通常使用[Yaws Appmods](http://yaws.hyber.org/appmods.yaws)，[这里的一篇文章](http://www.infoq.com/articles/vinoski-erlang-rest)可以向您展示它是如何完成的。Erlang 一直是 SOA 的一个很好的平台，原因如下：

1\. 无副作用的代码非常容易编写和测试。
2\. 隔离：Erlang 中的进程有助于以干净的方式隔离每个服务请求。
3\. 大多数 Erlang 库都喜欢`mochiweb`，`misultin`并且`Chicago Boss`已经从头开始构建以支持用 Erlang 编写的 SOA 系统。

在这些框架中的任何一个之后应用您自己的 OTP 应用程序是一个好主意。erlang 适合 SOA 的另一个重要原因是冗余。SOA 系统需要启动。如果服务请求失败，它会沿着不同的路径重试（当然，在物理层，它由分发 OTP 应用程序的不同机器处理）。

试试看，好主意

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-24T14:44:38.037

SOA 可以应用于许多实现技术，而不仅仅是 SOAPy Web 服务，而且我发现它总是有益的。例如，您可以将数据库视图和存储过程建模为服务。您可以将您的 java API 建模为服务。等等

现在，解决您的实际问题：

> 所以，问题是：您认为通过使用 OTP 网络服务器 (Mochiweb) 作为服务来使用面向服务的架构方法构建软件应用程序是一个好主意吗？

不。每个人都在从 SOAP 转向 REST。但是，使用 OTP 网络服务器 (Mochiweb) 作为 RESTful 服务，使用面向服务的架构方法构建软件应用程序可能是个好主意。

> 额外的 XML 处理层会破坏这种方法的所有优点吗？

这取决于你的目标是什么。如果您只是添加一个 XML 层，因为您认为它是“The Right Thing to Do™”，那么您将始终遇到 XML 层的问题，因为它是一个寻找要解决的问题的解决方案。如果您的目标是通过为您的实体创建普遍理解的表示来将服务器实现技术与客户端实现*分离*，那么额外的 XML（或 JSON 或任何最合适的）处理层是值得的。

# javascript - JavaScript 中的 n 叉树

> ID：11173254
> 
> 赞同：1
> 
> 时间：2012-06-23T21:49:17.897
> 
> 标签：javascript, data-structures

在 JavaScript 中存储 n-ary 树（例如：目录层次结构）的最佳方法是什么？

我需要对其进行以下操作：1.添加2.删除3更新

是否有提供此功能的 JavaScript 库？

谢谢，高拉夫

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T22:00:13.193

JavaScript 对象基本上是键/值对的映射，这意味着如果我理解正确的话，你可以直接使用它们。

例如，假设您将单词存储在树中，其中每个级别由单词所在位置的字母作为键：

```
function storeWord(t, word) {
    var index, ch, entry;

    for (index = 0; index < word.length; ++index) {
        ch = word.charAt(index);
        entry = t[ch];
        if (!entry) {
            t[ch] = entry = {};
        }
        t = entry;
    }
    t.terminal = true;
}

var tree = {};
storeWord(tree, "test");
storeWord(tree, "testing");
// Results in tree looking like this:
// tree = {
//     t: {
//         e: {
//             s: {
//                 t: {
//                     terminal: true,
//                     i: {
//                         n: {
//                             g: {
//                                 terminal: true
//                             }
//                         }
//                     }
//                 }
//             }
//         }
//     }
// } 
```

根据您的需要，您的条目可能比仅仅作为树的下一级更复杂。

上面展示了存储的基础知识，包括“添加”和“更新”。

对于删除操作，同样取决于数据的组织方式，但要从 objcct中*删除*`delete`属性，则使用关键字。最简单的：

```
var foo = {};   // A blank object
foo.bar = 42;   // Now it has a property called bar
delete foo.bar; // Now it doesn't, we've _removed_ the property entirely 
```

因此，当删除一个单词时，您会发现它是否由树中的终端表示，如果是，则删除终端和通向它的任何节点，这些节点已变为空。

要判断一个节点是否为空，可以使用如下函数：

```
function emptyNode(node) {
    var name;
    for (name in node) {
        if (node.hasOwnProperty(name)) { // This is optional if you're using raw objects
            return false; // Not empty
        }
    }
    return true; // Empty
} 
```

使用上述内容，您可以构建一个`deleteWord`函数。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-06-23T21:54:09.627

最好的方法是使用 Json（JavaScript Object Notation）将数据存储在目录层次结构中。使用 JsonEditor 类进行 CRUD 操作。

结帐：[http ://www.thomasfrank.se/json_editor.html](http://www.thomasfrank.se/json_editor.html)

# android - Android：OnTouch 事件功能，检测正常触摸、长按或快速双击

> ID：11173255
> 
> 赞同：0
> 
> 时间：2012-06-23T21:49:19.820
> 
> 标签：android, events, touch, detect

我需要知道如何在不使用按钮的情况下让我的活动知道用户何时触摸屏幕、双击屏幕或将手指放在屏幕上以在单个视图上长按

有人可以简要描述一下我应该在这里工作什么，以及使用什么逻辑吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T21:56:58.913

您需要有一些`View`或布局项目包含屏幕，以便将所有触摸事件发送给它。从那里，您需要附加某种类型的侦听器（可能是触摸或手势）。

我会推荐一个[`GestureDetector`](http://developer.android.com/reference/android/view/GestureDetector.html)（这支持双击和其他手势），或者一个基本的触摸监听器（使用[`MotionEvent`](http://developer.android.com/reference/android/view/MotionEvent.html)，它没有双击，但你可以自己实现）。

如果你使用`MotionEvent`的话，你可以检测手指已经向下用了多长时间`getDownTime()`。对于双击，您可以记录最后一次按下的时间（使用`Calendar`或类似），然后检查最后一次按下是否在一定时间内（可能是 500 毫秒？）。

如果你使用`GestureDetector`，你可以以不同的方式实现这些。查看[此答案](https://stackoverflow.com/a/8076548/1438733)以获取更多详细信息（该线程中的其他答案也提供了替代方案）。它还支持`MotionEvent`对象，所以这应该不是问题。

# java - 使用正则表达式确保字符串仅包含某些单词

> ID：11173259
> 
> 赞同：1
> 
> 时间：2012-06-23T21:49:55.807
> 
> 标签：java, regex

我想使用 Java 中的正则表达式来验证字符串的格式是否正确。如果字符串包含的唯一单词来自指定列表，则该字符串的格式正确。一个单词可以包含大写和小写字母。字符串可以包含数字和符号。

例如，如果我的接受词列表是`[foo, bar]`，那么字符串

```
foo bar! bar foo. 
```

已验证。请注意，字符串不必包含 lsit 中的每个单词。因此字符串`foo`是有效的并且字符串`bar`是有效的。

像一个字符串

```
foo bar baz! 
```

是无效的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T21:54:47.563

尝试这个：

```
/^(foo|bar|[[:space:][:punct:]])+$/ 
```

# windows - Azure 虚拟机 (Windows) 的最佳工作流程是什么？

> ID：11173260
> 
> 赞同：1
> 
> 时间：2012-06-23T21:50:00.283
> 
> 标签：windows, node.js, mongodb, azure, azure-virtual-machine

我正在使用 MongoDB 数据库开发 Socket.IO 应用程序。由于各种原因，我正在开发应用程序以在 Azure 中的 Windows 虚拟机上运行。设置一切都相当轻松，我现在在云中有一个基本的应用程序。但是，我无法找到一个舒适的工作流程。我希望能够将更改推送到虚拟机（就像我在使用 git 的 *nix 系统上一样），但我不确定如何最好地做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T04:58:30.273

因此，您可以使用 Visual Studio 与 Github for Windows 一起进行开发。

对于 Linux 熟悉的东西，您可能想尝试 Cloud9 IDE，它是浏览器中的 IDE，还可以轻松连接到您的 github 或 bitbucket 帐户。它实际上支持基本的 git 命令以及一些基本的调试。

Cloud9 IDE 不如 Visual Studio 先进。但它非常专注于 node.js，我在我的个人项目中一直很喜欢它。

# xcode - 每当我尝试 git pull 或 push 时，Xcode 都会显示“未提交的更改”

> ID：11173261
> 
> 赞同：10
> 
> 时间：2012-06-23T21:50:13.410
> 
> 标签：xcode, git, gitignore, pull

我在我的项目中使用 git，每当我尝试从 Xcode 中提取时，我都会得到“未提交的更改”，它会阻止我拉/推。我尝试提交并找到一个扩展名为 *.xcuserstate 的文件，每当我在 Xcode 中打开/滚动到任何项目文件时，都会修改此文件。这让我别无选择，只能做一个包含该文件的提交，它用无意义的提交填充 git 提交日志。

这是有办法阻止这种行为吗？

我试图将 *.xcuserstate 和 xcuserdata 放入 git ignore 但这会导致 Xcode 在我每次尝试拉取时崩溃。

这发生在 Xcode 4.2 和 4.3

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-23T21:56:03.080

通常，您不想将`*.xcuserstate`and`*.xcuserdata`文件放入您的 Git 存储库中。这些文件实际上并不是您项目的一部分，而只是 Xcode 存储其本地信息的地方，这在重新加载您的项目时很有帮助。

您可以使用以下方法解决此问题：

```
git rm --cached *.xcuserstate *.xcuserdata 
```

然后提交结果。这将从存储库中删除这些文件，而不会将它们从您的工作目录中删除。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T21:55:45.607

如果这是每个开发人员都不同的设置文件，您可能不需要对其进行版本控制，只需将其从 Git 中删除即可。

如果这不是一个选项，您可以`Git Stash Save`在提取之前进行更改并`Git Stash pop`再次应用它们。

# android - 16s延时直到蓝牙断开请求被识别

> ID：11173264
> 
> 赞同：6
> 
> 时间：2012-06-23T21:50:41.530
> 
> 标签：android, bluetooth

我正在使用蓝牙设备（IOIO 开发板）。

当我的设备断开连接时，我想听。上面的代码可以正常工作，但不能立即识别。当我关闭我的蓝牙开发板时，我必须等待大约 16 秒，直到我的 Android 识别到连接丢失。

有人知道为什么吗？我听说这应该是一个内部的Android限制，连接不经常检查？有人知道如何编写一个线程来“ping”蓝牙设备（如果它仍然存在）吗？我认为它与 Android BluetoothChat 示例非常相似，但我无法自己修复它。

谢谢。

菲利克斯

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    IntentFilter filter1 = new IntentFilter(BluetoothDevice.ACTION_ACL_DISCONNECT_REQUESTED);
    IntentFilter filter2 = new IntentFilter(BluetoothDevice.ACTION_ACL_DISCONNECTED);
    this.registerReceiver(mReceiver, filter1);
    this.registerReceiver(mReceiver, filter2); 
```

}

```
private final BroadcastReceiver mReceiver = new BroadcastReceiver() {
      @Override
      public void onReceive(Context context, Intent intent) {            
          String action = intent.getAction();
          BluetoothDevice device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);

         if (BluetoothDevice.ACTION_ACL_DISCONNECT_REQUESTED.equals(action)) {
              //Device is about to disconnect
              Toast.makeText(context,"The device is about to disconnect" , Toast.LENGTH_LONG).show();
          }
          else if (BluetoothDevice.ACTION_ACL_DISCONNECTED.equals(action)) {
              //Device has disconnected
              Toast.makeText(context,"Device has disconnected" , Toast.LENGTH_LONG).show();
          }           
       } 
   }; 
```

# android - 如何正确使用 Git 和 Eclipse 进行 Android 开发？

> ID：11173265
> 
> 赞同：1
> 
> 时间：2012-06-23T21:50:46.430
> 
> 标签：android, eclipse, git

我目前在命令行上使用 Git 来帮助我在不破坏现有代码的情况下逐步添加功能。让我担心的部分是提交后 Git 的这一行输出：

```
[optimized_managed_event 6c9a98c] Added managed event insert into my ContentProvider
12 files changed, 202 insertions(+), 16 deletions(-)
rewrite bin/classes.dex (87%)
rewrite bin/classes/com/zeroe/SmartCalProvider.class (85%) 
```

如果它们是 .class 文件和其他非文本类型，我应该担心重写吗？我对 Git 相当陌生，但对命令行非常熟悉，并且我了解大多数 Git 项目的基本工作流程：

```
> git add .
> git commit -m 'comment on commit'
> git checkout [master]
> git merge [branch] 
```

我稍微担心的是提交时可能会出现的问题，然后合并，因为 Android 项目有很多文件，它会以不同的格式自行创建。

我的问题本质上是在Android开发中这样做时我需要担心的任何事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T07:18:28.033

在项目的根目录中创建`.gitignore`并至少添加以下内容：

```
*~
*.apk
bin
gen
local.properties
.apt_generated 
```

这样您就可以避免放入存储库自动生成的文件，这通常会无缘无故地增加存储库的大小。您可能要保存的唯一自动生成的文件是`proguard/`文件，在用户生成的崩溃报告之后展开调用堆栈可能需要这些文件。

此外，我发现`giggle`安装实用程序以查看文件中的更改非常有帮助。

# ruby-on-rails - 如何指定不希望在 Ruby on Rails 表单标记之后创建默认值？

> ID：11173272
> 
> 赞同：0
> 
> 时间：2012-06-23T21:51:26.583
> 
> 标签：ruby-on-rails

现在，当我使用`form_for`Ruby on Rails 创建表单时，会在表单后创建一个额外的`<br>`标签。是否可以选择不让 RoR 为我创建这个？下面是创建表单的代码：

```
<%= form_for(:user, :url => create_user_path) do |f| %>
  <div class="field">
    <%= f.label :email %>
    <%= f.text_field :email %>
  </div>
  <div class="field">
    <%= f.label :password %>
    <%= f.password_field :password %>
  </div>
  <div class="actions">
    <%= f.submit "Submit" %>
  </div>
<% end %> 
```

输出：

```
<form method="post" action="http://localhost:3000/users" accept-charset="UTF-8"><div style="margin:0;padding:0;display:inline"><input type="hidden" value="✓" name="utf8"><input type="hidden" value="fsdfsdf+rgJKoc5sdQvsqvT2s=" name="authenticity_token"></div>
  <div class="field">
    <input type="text" size="30" name="user[password_clear]" id="user_password_clear" class="text_box">
  </div>
  <div class="field">
    <input type="text" size="30" name="user[password]" id="user_password" class="text_box">
  </div>
  <div class="actions">
    <input type="submit" value="Sign Up" name="commit" class="button button_medium button_green">
  </div>
</form>
<br> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T23:11:44.477

只要您不打算创建新表单，您就可以避免关闭表单，直到您想要 a
出现，只是不要添加 <% end %> 标记，直到您想要一个 br 并保留以下代码当前的表格。它不是很优雅，但它可能会按照你想要的方式工作。

# haskell - TChan 字符串的序列化

> ID：11173273
> 
> 赞同：1
> 
> 时间：2012-06-23T21:51:59.283
> 
> 标签：haskell

我已经声明了以下内容

```
type KEY = (IPv4, Integer)
type TPSQ = TVar (PSQ.PSQ KEY POSIXTime)
type TMap = TVar (Map.Map KEY [String])

data Qcfg = Qcfg { qthresh :: Int, tdelay :: Rational, cwpsq :: TPSQ, cwmap :: TMap, cw
chan :: TChan String } deriving (Show) 
```

并且希望这在某种意义上是可序列化的，即 Qcfg 可以写入磁盘或通过网络发送。当我编译这个我得到错误

```
No instances for (Show TMap, Show TPSQ, Show (TChan String))
      arising from the 'deriving' clause of a data type declaration
    Possible fix:
      add instance declarations for
      (Show TMap, Show TPSQ, Show (TChan String))
      or use a standalone 'deriving instance' declaration,
           so you can specify the instance context yourself
    When deriving the instance for (Show Qcfg) 
```

我现在不太确定是否有机会序列化我的 TChan，尽管其中的所有单个节点都是 show 类的成员。

对于`TMap`并且`TPSQ`我想知道是否有方法可以`TVar`直接显示值（因为它不会被更改，所以不需要锁定它）而不必声明一个执行`readTVar`?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T16:28:24.387

我理解您的评论意味着您想要序列化的**内容**而`TVar`不是`TVar`本身。

只有一种方法可以从 a 中提取值`TVar`，那就是`readTVar`：

```
readTVar :: TVar a -> STM a 
```

...您可以在`IO`monad 中使用`atomically`：

```
atomically . readTVar :: TVar a -> IO a 
```

`TChan`但是，更棘手的是，因为您无法在不清除整个`TChan`. 这是可行的，即使是浪费，通过检查整个内容作为一个单一的`STM`动作，然后重新插入它们。如果这是您选择做的，它最终也需要在`IO`monad 中运行。

这意味着您将无法为其派生`Show`实例，因为`Show`需要一个将其转换为 a 的纯计算`String`，而不是驻留在`IO`monad 中的一个。

但是，您没有理由必须使用`Show`该类。您可以只定义一个自定义函数来序列化`IO`monad 中的数据类型。此外，通常不建议将其`Show`用于序列化目的，因为：

*   您的某些数据类型（如`PSQ`）没有`Read`实例
*   `Read`通常定义实例是一件很痛苦的事
*   字符串表示非常节省空间

因此，我建议您使用适当的序列化库，例如`binary`或`cereal`进行序列化和反序列化。这些将数据类型转换为二进制表示，它们使定义编码器和解码器变得非常容易。

但是，即使这些库也只接受纯转换的实例，而不接受`IO`monad 中的操作，所以您必须做的是将您的序列化分解为两步过程：

1.  在monad中提取`TVar`s的内容。`IO`
2.  `cereal`使用/序列化内容（以及其他数据类型）`binary`。

还有最后一个警告，即并非所有数据类型都有`Binary`实例（假设我们使用`binary`包），但幸运的是列表确实有一个`Binary`实例，因此一个方便的解决方法是将您的数据类型转换为列表（使用`toList`并序列化列表。然后，当您反序列化列表时，您可以使用它`fromList`来恢复原始类型。

所以下面的函数将完成所有这些（使用`binary`）：

```
serializeQcfg file (Qcfg qthresh tdelay cwpsq cwmap cwchan) = do
    -- Step 1: Extract contents of concurrency variables
    psq    <- atomically $ readTVar cwpsq
    myMap  <- atomically $ readTVar cwmap
    myChan <- atomically $ entireTChan cwchan
    -- Step 2: Encode the extracted data
    encodeFile file (qthresh, tdelay, toList psq, myMap, myChan) 
```

编辑：实际上，正如丹尼尔指出的那样，将所有原子事务组合成一个事务可能会更好，所以你实际上会这样做：

```
serializeQcfg file (Qcfg qthresh tdelay cwpsq cwmap cwchan) = do
    -- Step 1: Extract contents of concurrency variables
    (psq, myMap, myChain) <- atomically $ (,,) <$> readTVar cwpsq
                                               <*> readTVar cwmap
                                               <*> entireTChan cwchan
    -- Step 2: Encode the extracted data
    encodeFile file (qthresh, tdelay, toList psq, myMap, myChan) 
```

我省略了 的实现`entireTChan`，它基本上会刷新`TChan`以检查整个内容，然后再次重新加载它，但它的类型签名将类似于：

```
entireTChan :: TChan a -> STM [a] 
```

我也省略了反序列化实现，但我认为如果你理解上面的例子并花时间学习如何使用`binary`or`cereal`包，你应该能够很容易地弄清楚它。

# html - 边框不能正常工作？

> ID：11173279
> 
> 赞同：0
> 
> 时间：2012-06-23T21:52:57.170
> 
> 标签：html, css

有人可以解释一下这个奇怪的现象：

[http://jsfiddle.net/sPA2V/](http://jsfiddle.net/sPA2V/)

由于某种原因，框页脚的高度被认为是 0px（它没有将页脚的内容作为高度考虑），因此边框无法正确显示。如果我浮动页脚或将其设置为固定高度，则可以修复此问题。如果我不能浮动它并且我不能使用固定高度怎么办 - 那我有什么选择？

**HTML**

```
<div id="footer">
    <div class="left"> <a href="#">Home</a> <a href="#">Products</a> <a href="#">About</a> <a href="#">Contact</a> </div>        
</div> 
```

**CSS**

```
#footer {
    width:970px;
    margin:0 auto;
    border:1px solid red;
}
#footer .left {
    float:left;
    width:250px;
    margin-top:20px;
}
#footer .left a {
    float: left;
    display: block;
    padding: 0px 0px 0px 7px;
    color: #969696;
    text-decoration: none;
}​

​ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T21:57:38.893

`overflow: hidden;`在#footer 上使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T22:09:17.027

#footer 和类名（'left'）之间不应有任何空格，即应该是#footer.left 和#footer.left a：

您更新的代码在这里：http: [//jsfiddle.net/sPA2V/1/](http://jsfiddle.net/sPA2V/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T21:54:18.853

您必须清除浮动，否则父框（在本例中为 #footer）会崩溃。

```
<div id="footer">
  <div class="left"> 
    <a href="#">Home</a> 
    <a href="#">Products</a> 
    <a href="#">About</a> 
    <a href="#">Contact</a> 
    <div style="clear:both;"></div><!-- clear floated elements (anchor tags) on this level -->
  </div>
  <div style="clear:both;"></div><!-- clear floated element (div.left) on this level -->        
</div> 
```

# jquery - 单击不同的按钮将不同的 HTML 加载到相同的#Content DIV

> ID：11173288
> 
> 赞同：0
> 
> 时间：2012-06-23T21:54:37.790
> 
> 标签：jquery, html

我有一个包含多个选项的菜单，我想知道如何根据您按下的菜单按钮将不同的 HTML 加载到同一个`div`（称为）中。`#content`

我有这个菜单代码：

```
<div id="mainmenu">
<ul id="menu">
<li><a href="#">Accueil</a></li>
<li><a href="#">Qui suis-je?</a>
<ul>
<li><a href="#">Biographie</a></li>
<li><a href="#">Discographie</a></li>
</ul>
</li>
<li><a href="#">Porfolio</a></li>
<li><a href="#">Contact</a></li>
</ul>
</div> 
```

`div#content`当我在菜单中按下选项“Accueil”时，我需要做什么才能将“index.html”发送到？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T22:06:40.680

使用`jQuery ajax`你可以做到

**HTML**

```
<div id="mainmenu">
    <ul id="menu">
        <li><a href="index.php">Accueil</a></li>
       <li><a href="the url you want to load for this menu">Qui suis-je?</a>
    <ul>
</div>​ 
```

**JAVASCRIPT(jQuery)**

```
​​$(function(){
    $('#menu li a').on('click', function(e){
        e.preventDefault();
        var page_url=$(this).prop('href');
        $('#content').load(page_url);
    });
}); 
```

[**jQuery 加载**](http://api.jquery.com/load/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T21:58:54.503

您可以使用[jQuery](http://jquery.com)，它使这样的事情变得简单：

然后你可以这样做：

```
$('#content>div').load('index.html'); 
```

您可以将其放在`onclick`某个按钮上，也可以放在`javascript`代码中的其他位置...

# tcpdump - 使用原始 ip encap 生成 tcpdump

> ID：11173292
> 
> 赞同：0
> 
> 时间：2012-06-23T21:55:44.713
> 
> 标签：tcpdump

我正在研究由 Eddie Kohler 创建的 Click 快速原型路由器 api，用于我的研究。我很难使用 RAW IP ENCAP 生成 tcpdump 文件。我知道我的链接类型不允许在 RAW IP 链接类型中捕获，因为键入 tcpdump -i (interface) -L 时唯一的链接类型列表是 EN10MB，仅此而已。

这并没有引起我的注意。有没有办法在 tcpdump 或 tshark 中捕获原始 IP 数据包（转储数据包应从 IP 标头开始并跳过链接级别标头）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T01:28:35.910

tcpdump 和 tshark 都不能为设备任意选择链路层标头类型，因为设备以及 libpcap/WinPcap 不允许选择任意链路层标头类型（如`tcpdump -i {interface} -L`您所告知的那样）。

大多数网络接口不支持“原始 IP”作为链路层标头类型；我不确定哪个，如果有的话。如果您想要一个包含具有该封装的数据包的捕获文件，最简单的方法可能是编写一个从接口捕获的程序，丢弃所有非 IP 数据包，并从 IP 数据包中剥离链路层标头并将它们写出来。例如，如果您在`DLT_`值为`DLT_EN10MB`(Ethernet) 的设备上进行捕获，只需丢弃所有没有 0x0800 或 0x86DD 作为以太网类型值的数据包，并去掉前 14 个字节的*数据*包这些以太网类型值并将生成的数据包写入 pcap 文件，`DLT_`值为`DLT_RAW`.

# c++ - 在 Eclipse 中添加外部库时出错

> ID：11173295
> 
> 赞同：0
> 
> 时间：2012-06-23T21:56:04.710
> 
> 标签：c++, eclipse, opengl

我想在 Eclipse 中添加一个外部库，这是我如何进行的：

```
Projet/Properties/C++ Build/Gcc Linkers/libraries/,
-l /home/Jackie/CodingPackages/SB5/Src/GLTools/include/ and 
-L /home/Jackie/CodingPackages/SB5/Src/GLTools/src/ 
```

这是我得到的错误：

```
make all 
Building target: Chap1
Invoking: GCC C++ Linker
g++ -L/home/prince/CodingPackages/SB5/Src/GLTools/src/ -o"Chap1"  ./main.o   -lglut -l/home/Jackie/CodingPackages/SB5/Src/GLTools/include/ -lGLU -lGL
/usr/bin/ld: fatal error: /home/Jackie/CodingPackages/SB5/Src/GLTools/include/: mmap offset 0 size 4096 failed: No such device
collect2: ld returned 1 exit status 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T10:48:40.063

包含目录用`-I`（大写 i）指定

# c# - 如何使这段代码更干燥？

> ID：11173297
> 
> 赞同：8
> 
> 时间：2012-06-23T21:56:14.660
> 
> 标签：c#, dry

假设我们有这些复选框：

*   FooCheckBox
*   条形复选框
*   BazCheckBox

还有这些方法：

*   富
*   酒吧
*   巴兹

我只想在选中相应的复选框时调用每个方法。代码可能如下所示：

```
void DoWork()
{
    if (FooCheckBox.Checked)
    {
        Foo();
        Console.WriteLine("Foo was called");
    }

    if (BarCheckBox.Checked)
    {
        Bar();
        Console.WriteLine("Bar was called");
    }

    if (BazCheckBox.Checked)
    {
        Baz();
        Console.WriteLine("Baz was called");
    }
} 
```

现在考虑一下，除了 3 个复选框和 3 个方法，您还有更多。您将如何重写上面的代码以使其更加[DRY](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-23T22:04:21.857

对于您提出的案例，我会说，保持原样；您不想在没有充分理由的情况下过度抽象，因为它会使代码库的可维护性降低。当然，背景很重要，而且最终是一个判断电话。

也就是说，这就是我将如何处理这个问题。创建一个集合，其中每个项目都包含控件和操作委托。然后循环并在每个项目上执行逻辑。

```
var items = new KeyValuePair<CheckBox, Action>[] {
    new KeyValuePair<CheckBox,Action>(FooCheckBox, Foo),
    new KeyValuePair<CheckBox,Action>(BarCheckBox, Bar),
    new KeyValuePair<CheckBox,Action>(BazCheckBox, Baz)
};

foreach (var item in items)
{
    if (item.Key.Checked) 
    {
        item.Value.Invoke();
        Console.WriteLine("Invoked " + item.Value.Method.Name);
    }
} 
```

或者（可能？）更好地使用 Linq：

```
items.Where(item => item.Key.Checked).ToList().ForEach(item => new {
    item.Value.Invoke();
    Console.WriteLine("Invoked " + item.Value.Method.Name);
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-23T22:02:23.273

您可以使用字典来了解哪些操作引用了哪些复选框。然后您可以执行以下操作：

```
foreach(KeyValuePair<CheckBox, Action> kvp in Dict)
{
    if(kvp.Key.Checked)
        kvp.Value.Invoke();
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-23T22:13:01.543

为简单起见，我会选择

```
void DoWork()
{
    DoIfChecked(FooCheckBox, Foo, "Foo as Called");
    DoIfChecked(BarCheckBox, Bar, "Bar as Called");
    DoIfChecked(BazCheckBox, Baz, "Baz as Called");
}
void DoIfChecked(CheckBox checkBox, Action action, string message)
{
    if (checkBox.IsChecked)
    {
        action();
        Console.WriteLine(message);
    }
} 
```

但是如果消息部分那么简单，您可以对它做一些事情，并且我可能会根据本地上下文进行一些错误检查。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-23T22:07:07.893

可以通过以下方式完成：

```
void DoWork()
{
    Func<Action, string, Tuple<Action, string>> toT = 
        (a, s) => new Tuple<Action, string>(a, s);

    var map = new Dictionary<CheckBox, Tuple<Action, string>>
    {
        {FooCheckBox, toT(Foo, "Foo")},
        {BarCheckBox, toT(Bar, "Bar")},
        {BazCheckBox, toT(Baz, "Baz")},
    };

    foreach (var x in map.Keys)
        if (x.Checked)
        {
            map[x].Item1();
            Console.WriteLine(map[x].Item2 + " was called");
        }
} 
```

但我认为有时不是很干燥是可以的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-23T22:07:55.773

我将创建一个`Dictionary`with`<CheckBox, Func>`并遍历每个值：

```
Dictionary<CheckBox, Func> checkboxes = new Dictionary<CheckBox, Func>();
void Init()
{
    checkboxes.Add(FooCheckBox, Foo);
    checkboxes.Add(BarCheckBox, Bar);
    checkboxes.Add(BazCheckBox, Baz);
}

void DoWork()
{
    foreach (KeyValuePair<CheckBox, Func> checkbox in checkboxes)
    {
        if (checkbox.Key.Checked)
        {
            checkbox.Value();
            Console.WriteLine("{0} was called", checkbox.Text);
        }
    }
} 
```

# android - android baseAdapter 奇怪的错误

> ID：11173298
> 
> 赞同：0
> 
> 时间：2012-06-23T21:56:50.610
> 
> 标签：android, android-listview, baseadapter

正如在其他一些线程中提到的，我在从我的 BaseAdapter 的 Textview 中设置文本时遇到了麻烦。

每当我尝试在其中设置希伯来语字符串时，我都会收到 stackoverflow 错误.. 设置英文字符串时 - 完美运行我试图找出错误的确切位置，所以我已经分解了我的每一段代码这就是我发现的：当我的文本视图嵌套在新视图中时 - 出现 stackoverflow..

在这个 XML 中有 stackoverflow（仅在希伯来语字符串中）：

```
<?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TableRow>

        <include
            android:layout_width="45dp"
            android:layout_height="45dp"
            android:layout_gravity="center_vertical"
            android:layout_margin="4dp"
            layout="@layout/list_profile_picture_green"
            android:padding="4dp" />

        <TableLayout android:layout_width="match_parent"
            android:layout_height="match_parent">

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="TextView" />

        </TableLayout>

    </TableRow>

</TableLayout> 
```

这个 XML 完美地显示了希伯来语：

```
<?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TableRow>

        <include
            android:layout_width="45dp"
            android:layout_height="45dp"
            android:layout_gravity="center_vertical"
            android:layout_margin="4dp"
            layout="@layout/list_profile_picture_green"
            android:padding="4dp" />

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="TextView" />

    </TableRow>

</TableLayout> 
```

这是我的堆栈跟踪：

```
06-24 00:48:02.565: E/AndroidRuntime(20483): FATAL EXCEPTION: main
06-24 00:48:02.565: E/AndroidRuntime(20483): java.lang.StackOverflowError
06-24 00:48:02.565: E/AndroidRuntime(20483):    at java.lang.StringBuilder.append(StringBuilder.java:312)
06-24 00:48:02.565: E/AndroidRuntime(20483):    at java.lang.StringBuilder.append(StringBuilder.java:44)
06-24 00:48:02.565: E/AndroidRuntime(20483):    at java.util.Formatter.outputCharSequence(Formatter.java:1114)
06-24 00:48:02.565: E/AndroidRuntime(20483):    at java.util.Formatter.doFormat(Formatter.java:1086)
06-24 00:48:02.565: E/AndroidRuntime(20483):    at java.util.Formatter.format(Formatter.java:1062)
06-24 00:48:02.565: E/AndroidRuntime(20483):    at java.util.Formatter.format(Formatter.java:1031)
06-24 00:48:02.565: E/AndroidRuntime(20483):    at java.lang.String.format(String.java:2183)
06-24 00:48:02.565: E/AndroidRuntime(20483):    at java.lang.String.format(String.java:2157)
06-24 00:48:02.565: E/AndroidRuntime(20483):    at android.text.Styled.drawDirectionalRun(Styled.java:266)
06-24 00:48:02.565: E/AndroidRuntime(20483):    at android.text.Styled.drawText(Styled.java:362)
06-24 00:48:02.565: E/AndroidRuntime(20483):    at android.text.Layout.drawText(Layout.java:1546)
06-24 00:48:02.565: E/AndroidRuntime(20483):    at android.text.Layout.draw(Layout.java:380)
06-24 00:48:02.565: E/AndroidRuntime(20483):    at android.widget.TextView.onDraw(TextView.java:4417)
06-24 00:48:02.565: E/AndroidRuntime(20483):    at android.view.View.draw(View.java:6933)
06-24 00:48:02.565: E/AndroidRuntime(20483):    at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
06-24 00:48:02.565: E/AndroidRuntime(20483):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
06-24 00:48:02.565: E/AndroidRuntime(20483):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
06-24 00:48:02.565: E/AndroidRuntime(20483):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
06-24 00:48:02.565: E/AndroidRuntime(20483):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
06-24 00:48:02.565: E/AndroidRuntime(20483):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
06-24 00:48:02.565: E/AndroidRuntime(20483):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
06-24 00:48:02.565: E/AndroidRuntime(20483):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
06-24 00:48:02.565: E/AndroidRuntime(20483):    at android.widget.AbsListView.dispatchDraw(AbsListView.java:1648)
06-24 00:48:02.565: E/AndroidRuntime(20483):    at android.widget.ListView.dispatchDraw(ListView.java:3217)
06-24 00:48:02.565: E/AndroidRuntime(20483):    at android.view.View.draw(View.java:6936)
06-24 00:48:02.565: E/AndroidRuntime(20483):    at android.widget.AbsListView.draw(AbsListView.java:3030)
06-24 00:48:02.565: E/AndroidRuntime(20483):    at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
06-24 00:48:02.565: E/AndroidRuntime(20483):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
06-24 00:48:02.565: E/AndroidRuntime(20483):    at android.view.View.draw(View.java:6936)
06-24 00:48:02.565: E/AndroidRuntime(20483):    at android.widget.FrameLayout.draw(FrameLayout.java:357)
06-24 00:48:02.565: E/AndroidRuntime(20483):    at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
06-24 00:48:02.565: E/AndroidRuntime(20483):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
06-24 00:48:02.565: E/AndroidRuntime(20483):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
06-24 00:48:02.565: E/AndroidRuntime(20483):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
06-24 00:48:02.565: E/AndroidRuntime(20483):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
06-24 00:48:02.565: E/AndroidRuntime(20483):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
06-24 00:48:02.565: E/AndroidRuntime(20483):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
06-24 00:48:02.565: E/AndroidRuntime(20483):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
06-24 00:48:02.565: E/AndroidRuntime(20483):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
06-24 00:48:02.565: E/AndroidRuntime(20483):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
06-24 00:48:02.565: E/AndroidRuntime(20483):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
06-24 00:48:02.565: E/AndroidRuntime(20483):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
06-24 00:48:02.565: E/AndroidRuntime(20483):    at android.view.View.draw(View.java:6936)
06-24 00:48:02.565: E/AndroidRuntime(20483):    at android.widget.FrameLayout.draw(FrameLayout.java:357)
06-24 00:48:02.565: E/AndroidRuntime(20483):    at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
06-24 00:48:02.565: E/AndroidRuntime(20483):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
06-24 00:48:02.565: E/AndroidRuntime(20483):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
06-24 00:48:02.565: E/AndroidRuntime(20483):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
06-24 00:48:02.565: E/AndroidRuntime(20483):    at android.view.View.draw(View.java:6936)
06-24 00:48:02.565: E/AndroidRuntime(20483):    at android.widget.FrameLayout.draw(FrameLayout.java:357)
06-24 00:48:02.565: E/AndroidRuntime(20483):    at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
06-24 00:48:02.565: E/AndroidRuntime(20483):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
06-24 00:48:02.565: E/AndroidRuntime(20483):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
06-24 00:48:02.565: E/AndroidRuntime(20483):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
06-24 00:48:02.565: E/AndroidRuntime(20483):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
06-24 00:48:02.565: E/AndroidRuntime(20483):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
06-24 00:48:02.565: E/AndroidRuntime(20483):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
06-24 00:48:02.565: E/AndroidRuntime(20483):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
06-24 00:48:02.565: E/AndroidRuntime(20483):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
06-24 00:48:02.565: E/AndroidRuntime(20483):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
06-24 00:48:02.565: E/AndroidRuntime(20483):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
06-24 00:48:02.565: E/AndroidRuntime(20483):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
06-24 00:48:02.565: E/AndroidRuntime(20483):    at android.view.ViewGroup.drawChild(ViewGroup.java:1644)
06-24 00:48:02.565: E/AndroidRuntime(20483):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
06-24 00:48:02.565: E/AndroidRuntime(20483):    at android.view.View.draw(View.java:6936)
06-24 00:48:02.565: E/AndroidRuntime(20483):    at android.widget.FrameLayout.draw(FrameLayout.java:357)
06-24 00:48:02.565: E/AndroidRuntime(20483):    at android.view.ViewGroup.drawChild(ViewGroup.java:1646)
06-24 00:48:02.565: E/AndroidRuntime(20483):    at android.view.ViewGroup.dispatchDraw(ViewGroup.java:1373)
06-24 00:48:02.565: E/AndroidRuntime(20483):    at android.view.View.draw(View.java:6936)
06-24 00:48:02.565: E/AndroidRuntime(20483):    at android.widget.FrameLayout.draw(FrameLayout.java:357)
06-24 00:48:02.565: E/AndroidRuntime(20483):    at com.android.internal.policy.impl.P 
```

知道为什么吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T22:28:29.663

文本本身没有错误。当使用这个确切的代码（没有`include`）时，我在英语和希伯来语上都没有错误，无论是 XML 布局。

这里的问题是你有太多的嵌套布局。我怀疑这`TableLayout`包含在其他东西中，来自其他东西，等等......

您必须减少嵌套布局的数量；我怀疑这显示为`StackOverflow`错误的原因是因为希伯来语从右到左读取并且还占用了更多空间来表示，所以这就是将内存推到极限的原因。

我相信您在[此处](https://stackoverflow.com/questions/3954103/android-textview-stackoverflow-when-using-hebrew)和[此处](https://stackoverflow.com/questions/9946368/stackoverflow-caused-by-nested-views)列出了相同的问题。

减少您拥有的嵌套布局项目的数量，这应该会消失。（例如，作为一般做法，a `TableLayout`within another`TableLayout`是不好的做法。）[这](http://developer.android.com/training/improving-layouts/optimizing-layout.html)可能会有所帮助。

# qt - Qt 图形按钮

> ID：11173302
> 
> 赞同：0
> 
> 时间：2012-06-23T21:57:15.587
> 
> 标签：qt

我想在 Qt 中创建一个按钮，它是我给它的 PNG 的大小和形状。我尝试使用将 setAutoRaise 设置为 true 的 QToolButton，以便 3D 框架仅出现在鼠标悬停并按下时，但我不希望该 3D 框架超出 PNG。设置图标大小和/或按钮的最小和最大尺寸没有帮助。

换句话说，我想要（比如说）iOS 上的按钮功能，而不是人们期望在 Windows 对话框上的功能。QToolButton 提供的 chrome（3D 框架）很棒，我仍然想要这种行为，但似乎我必须手动完成所有操作 - 即绘制鼠标悬停、按下和禁用版本的按钮.

有没有办法将 QToolButton 的图标视为按钮的整个范围？或者我可以使用其他控件吗？

# mysql - 用 Flash AS3 链接外部 mysql 数据库

> ID：11173305
> 
> 赞同：0
> 
> 时间：2012-06-23T21:57:46.757
> 
> 标签：mysql, database, actionscript-3

如何将外部 mysql 数据库与 flash AS3 链接？

这就像我想要的：

我在服务器上的数据库：

```
Database
username : x, pass: y 
```

我的用户计算机上的闪存

```
login
your username :
your password : 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T22:00:40.143

要将 MySQL 数据库内容集成到您的 Flash 电影中，您必须创建服务器端中间件（例如 PHP），它将使用 HTTP 协议与您的 Flash 通信：ajax、xml 等。

# mysql - storing facebook friends - timeout - mysql database

> ID：11173308
> 
> 赞同：1
> 
> 时间：2012-06-23T21:58:24.730
> 
> 标签：mysql, facebook, facebook-fql

I'm working on a simple facebook application where I'm storing:

Facebook friends ID

Table structure:

Table name: facebook_mapping Values:

```
app_id                fb_id
1               100003996070108
2               100003960002436
3               100003955972927
4               100003955972924 
```

using fql query:

```
SELECT uid2 FROM friend WHERE uid1=FACEBOOK_USER_ID 
```

This works well for friends less than 200\. But if a user has more than 200 friends, when I run the application page for the first time, it times out always. I think it takes more than 30 seconds and my server has a constraint that it would timeout after 30 seconds.

I'm using PHP & MySQL. One solution I think is:

1) First only take 20 friends of that user and add it in database 2) Run a background process to gather other friends

Please help me to setup a background process to gather friends or some other method to do this.

Thanks.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T12:08:01.870

If it’s your *PHP script* timing out on inserting the data (and not the API request itself) – then *how exactly* are you adding the data into your table?

Are you firing 200+ individual INSERT statements at your database in a PHP loop or something?

If that’s the case, try putting all the data (or larger chunks of it) into a *multiple row INSERT statement*, in the form of

```
INSERT INTO table (column1, column2)
  VALUES (1, '100003996070108'), (2, '100003960002436'), (…) 
```

That should help prevent PHP script timeouts, because you don’t have to make so many individual queries to your database.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T22:33:34.977

This doesn't appear to be an issue with the Facebook API, just the timeout that you configured on our server. The background thread idea is a good one.

# wordpress - 如何按 ID 范围查询 Wordpress 中的帖子？

> ID：11173314
> 
> 赞同：0
> 
> 时间：2012-06-23T21:59:14.760
> 
> 标签：wordpress, where-clause, where

我想按 ID 范围查询 Wordpress 中的帖子。例如查询 ID 介于 9 - 40 之间的帖子。或者获取 ID 大于 9 (ID>9) 的帖子。如何在 Wordpress 中指定这种类型的查询？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T00:16:49.227

试试这个过滤器，只需将这个函数粘贴到你的functions.php中

```
function filter_by_id($where = '')
{
    $where .= " AND ID > 50 AND ID < 100";
    return $where;
} 
```

在你的模板文件中

```
add_filter( 'posts_where', 'filter_by_id');
$args=array(...);
$my_post = new WP_Query($args);
while ( $my_post->have_posts() ) : $my_post->the_post();
    // your code
endwhile;
remove_filter('posts_where' , 'filter_by_id'); 
```

# algorithm - 如何获得从一种到另一种的中间颜色？

> ID：11173315
> 
> 赞同：2
> 
> 时间：2012-06-23T21:59:15.877
> 
> 标签：algorithm

> **可能重复：**
> [两种颜色之间的android颜色，基于百分比？](https://stackoverflow.com/questions/4414673/android-color-between-two-colors-based-on-percentage)
> [如何找到两种颜色之间的所有颜色？](https://stackoverflow.com/questions/6025043/how-to-find-all-the-colors-between-two-colors)

一开始，我们在 RGB 中有两种颜色，还有一个数字，用于它们之间的中间颜色。方法必须返回具有所需颜色的数组。非常需要算法方面的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-23T22:09:16.507

假设我们有 2 种颜色 (R1,G1,B1) (R2,G2,B2) 和 N 种中间颜色：

```
for i from 1 to N:
    Ri = R1 + (R2-R1) * i / N
    Bi = B1 + (B2-B1) * i / N
    Gi = G1 + (G2-G1) * i / N
    AddToArray(Ri,Gi,Bi) 
```

那是你要找的吗？

PS：如果你想要更自然的颜色渐变，我建议使用 HSL 颜色空间而不是 RGB。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T22:24:50.577

让您当前的 cR、cG 和 cB 值为 0%，并让 R、G 和 B 值为 100%，然后您只需迭代 i = 1 到 100，每次迭代添加 cRGB + i * (RGB - cRGB ）。您不必使用 100 种中间色，您可以使用其中的 N 种。

```
function(currentColor, desiredColor, N) {

    var colors = [],
    cR = currentColor.R,
    cG = currentColor.G,
    cB = currentColor.B,
    dR = desiredColor.R - cR,
    dG = desiredColor.G - cG,
    dB = desiredColor.B - cB;

    for(var i = 1; i <= N; i++) {
        colors.push(new Color(cR + i * dR / N, cG + i * dG / N, cB + i * dB / N));
    }

    return colors;
} 
```

然而，这不会给你很好的中间颜色。您应该做的第一件事是将颜色转换为 HSV 或类似的色彩空间，其中强度与色调和饱和度是分开的。这将为您提供更好的中间颜色。[http://en.wikipedia.org/wiki/HSL_and_HSV](http://en.wikipedia.org/wiki/HSL_and_HSV)

为此，首先将颜色转换为 HSV，然后运行与上述相同的算法，但使用 HS 和 V 而不是 RGB，但请记住 S 和 V 的最小值为 0，最大值为 1，而 H 表示在 0 到 360 之间的度数。如果您希望 H 尽快从当前颜色变为目标颜色，则可能必须对 H 执行某些操作，例如如果 cH = 10 和 dH = 50，则从 10 -> 50 是最短，但如果 cH = 10 且 dH = 350，则从 10 -> -10（与 350 度相同）变短。

# python - Python 在短路布尔值之前会引发 TypeErrors 吗？

> ID：11173317
> 
> 赞同：4
> 
> 时间：2012-06-23T21:59:29.080
> 
> 标签：python, short-circuiting, typechecking

我有一个函数可以在一个或多个指定日期（例如，第一天和第 15 天）执行每月任务。为了增强可用性，我想让用户只传递一个 int，而他们只希望每个日期发生一天月，或每月多个事件的整数列表。

```
monthly_event(days_of_month=1, event="paycheck") 
monthly_event(days_of_month=[1,15], event="bills", starting=date(2013,1,1)) 
```

在内部，该函数将遍历列表并执行与单个 int 相同的操作。

由于“int”不是可迭代的，所以当用户只传递一个 int 时，我需要做一些事情来避免 TypeError。我惊讶地发现使用“或”表达式并依靠短路不起作用 - TypeError 仍然发生。这是一个例子：

```
from datetime import date as date
dt = date.today()
days = 1
#days = [1,2]
if dt.day == days or dt.day in days:
    print "GOOD"
else:
    print "BAD" 
```

我的第一个问题是：我是否误解了 Python，或者在布尔表达式短路之前，内部类型检查是否真的发生在整行代码上？这似乎很奇怪。

我的第二个问题是：Pythonic 的方法是什么？我想避免对“days”变量进行显式类型检查。使用 try/catch 只会使代码膨胀：

```
try:
    if dt.day == days:
        print "GOOD"
    else:
        print "BAD"
except TypeError:
    if dt.day in days:
        print "GOOD"
    else:
        print "BAD" 
```

有什么明显的我忽略了吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-23T22:05:00.970

我相信问题发生在`dt.day != days`（并且没有短路）时，Python 将尝试该`dt.day in days`表达式，并得到一个`TypeError`.

# performance - EaselJS中大量动画位图的速度

> ID：11173322
> 
> 赞同：5
> 
> 时间：2012-06-23T22:00:16.307
> 
> 标签：performance, bitmap, easeljs, animated

在使用 EaselJS 时，我似乎在使用大量动画位图（全部基于相同的 spritesheet）时遇到了一些麻烦。当我在我的舞台上同时运行几个时，完全没有问题，但是当同时运行更多数量的它们（从大约 30 到 40 开始）同时移动它们时，我开始拥有它们“闪烁”相当多，即使 fps 约为 10。

我没有使用任何阴影或其他任何东西。只需使用动画位图并移动它们。

有人对提高这种性能有什么好的建议吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-12T23:14:22.010

如果没有看到您的代码，很难确切地知道瓶颈在哪里。但是这里有几个地方可以开始寻找（从更琐碎的修复开始）：

1.  确保您使用的是现代浏览器。**至少，检查其他几个浏览器/平台，看看性能是否有任何显着变化**。据我了解，EaselJS 在非硬件加速画布实现上的性能要差得多。

2.  **如果可以的话，使用 createJS 的 TweenJS 版本而不是其他补间库**。TweenJS 会将自己绑定到 EaselJS 的`Ticker`类，这样效率更高。

3.  **`stage.update()`除非绝对必要，否则不要打电话。**既然`stage.update()`是这样一个昂贵的电话，你应该尽可能小气。事实上，如果您使用 Ticker 定期更新舞台，则根本不应该调用它。

4.  **明智而积极地缓存。**如果舞台上有复杂的静态元素，缓存它们将节省一些周期。但是，缓存存在开销，因此请将其保存在具有大量静态元素或复杂绘制形状的容器中。

5.  **降低 EaselJS 检查鼠标悬停的频率。**如果您在舞台上启用了鼠标悬停，请传入较低的频率（[文档](http://www.createjs.com/Docs/EaselJS/Stage.html#method_enableMouseOver)）。如果您不需要它（如果您只听点击），请不要启用它。监视鼠标悬停非常昂贵，尤其是如果您在舞台上有很多元素。

6.  **设置`stage.snapToPixelsEnabled`为真。**这可能有帮助，也可能没有帮助。从理论上讲，在整个像素上渲染位图效率更高，但这可能会导致一些动画变得参差不齐，而且我还没有充分了解它的其他优点和缺点。

我能够在 30FPS 下使用大约 600-800 个精灵表获得不错的性能，并在 4 岁的 iMac 上使用 Chrome 进行基本补间（只是一个快速测试）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T02:38:56.030

尝试`Stage`同时使用多个对象。

# git - Puppet exec 命令在 shell 中运行，但不是通过 puppet

> ID：11173323
> 
> 赞同：8
> 
> 时间：2012-06-23T22:00:25.917
> 
> 标签：git, bash, automation, puppet, vagrant

我正在尝试使用 vagrant 来设置一个开发环境，如果它们还没有被克隆，它会自动克隆两个存储库。

我写了一个简单的脚本来克隆 repos，在很多很多方法都失败后让 puppet 直接运行 git 命令。出于某种原因，我认为这种方法是万无一失的，但事实证明我比我想象的更傻。

```
exec {"load-repos":
    command =>"/bin/bash /vagrant/manifests/modules/scripts/clone_repos.sh",
    require => Package["git-core"],
  } 
```

这是脚本：

```
#!/bin/bash
if [ ! -d /vagrant/repo-one-dest ]; then
  git clone git@example.com:/repo-one.git /vagrant/repo-one-dest
fi

if [ ! -d /vagrant/repo-two-dest ]; then
  git clone git@example.com:/repo-two.git /vagrant/repo-two-dest
fi

exit 
```

私钥设置正确。当我登录 vm 并手动运行`bash clone_repos.sh`时，一切正常。无论我重新加载 vagrant 并让 puppet 执行多少次，repos 都不会通过 exec 加载。我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-26T17:52:51.780

这可能是因为当您`vagrant ssh`通常以`vagrant`用户身份登录时（默认情况下，当然可以通过配置进行修改）。`vagrant`我猜的用户已经正确设置了密钥。

但是，当 Vagrant 运行您的配置器（在本例中为 Puppet）时，它会执行 a `sudo`，因此它以 root 用户身份运行。

我通常建议设置密钥以进行部署的方式是将密钥放在某个地方，然后使用`GIT_SSH`包装器正确克隆它，或者使用 SSH 代理。

# mfc - 自定义 CTreeCtrl - 如何修改文本/选择颜色

> ID：11173333
> 
> 赞同：0
> 
> 时间：2012-06-23T22:02:15.027
> 
> 标签：mfc, colors, selection, background-color, win32gui

首先，我会自定义 - 除其他外 - 文本颜色和选择颜色（文本背景）。例如，文本颜色应为蓝色；文本背景的颜色应该是透明的。所以，我重写了 OnPaint() 方法；我调用 SetTextColor() 和 SetBkColor() 函数，但不幸的是我总是得到无效的颜色，或者我得到一个烦人的“无限循环闪光”效果。在这里你可以看到他的完整实现。

```
void CustomTree::OnPaint() 
{
    CPaintDC dc(this);

    CDC memDC;
    memDC.CreateCompatibleDC(&dc);

    CRect rcClip, rcClient;
    dc.GetClipBox( &rcClip );
    GetClientRect(&rcClient);

    CBitmap bitmap;
    bitmap.CreateCompatibleBitmap( &dc, rcClient.Width(), rcClient.Height() );
    memDC.SelectObject( &bitmap );

    CRgn rgn;
    rgn.CreateRectRgnIndirect( &rcClip );
    memDC.SelectClipRgn(&rgn);
    rgn.DeleteObject();

    /* WHAT IS the correct usage of SetText/Bk Color? */

    // ::SetTextColor(memDC, RGB(0, 0, 255));
    // ::SetBkColor(memDC, RGB(0, 0, 255));
    // COLORREF col = SetTextColor(RGB(0,0,255));
    // COLORREF co2 = memDC.SetTextColor(RGB(0,0,255));

    // First let the control do its default drawing.

    CWnd::DefWindowProc(WM_PAINT, (WPARAM)memDC.m_hDC, 0);

    // do some others stuffs...

    dc.BitBlt(rcClip.left, rcClip.top, rcClip.Width(), rcClip.Height(), &memDC, 
                rcClip.left, rcClip.top, SRCCOPY);

    memDC.DeleteDC();
} 
```

错误在哪里？

谢谢

它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T23:40:07.697

如果要更改树视图的颜色和字体，则必须捕获并响应[NM_CUSTOMDRAW](http://msdn.microsoft.com/en-us/library/windows/desktop/bb775528%28v=vs.85%29.aspx)。在调用默认值之前简单地设置属性是不够的。

# java - 为什么类型参数必须重复两次？

> ID：11173336
> 
> 赞同：2
> 
> 时间：2012-06-23T22:02:33.887
> 
> 标签：java

在Java的这个静态函数中，为什么必须`<K, V>`在第1行重复？

```
public static <K, V> HashMap<K, V> newInstance() {
  return new HashMap<K, V>();
} 
```

我理解为什么`HashMap<K, V>`是必要的，因为该函数返回一个 HashMap，其中泛型类型 K 和 V 分别作为键和值。但是，为什么`<K, V>`函数签名中第一个是必需的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-23T22:04:53.473

指示该方法是泛型方法，使用/返回泛型类型。如果它们不存在，编译器将查找一个名为 K 的具体类型，以及另一个名为 V 的具体类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T22:04:33.467

因为该函数`newInstance`也是泛型的，泛型类型*K*和*V*被转发到`HashMap`. 它的意思是这样使用：

```
HashMap<Integer, String> map = newInstance<Integer,String>(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T22:10:49.377

要添加到其他答案，擦除所有类型在编译时都会丢失。但是，编译器首先检查验证，这就是为什么需要这些类型。

[这是从另一个 SO答案](https://stackoverflow.com/questions/339699/java-generics-type-erasure-when-and-what-happens)中删除后发生的情况的示例：

但是当使用泛型时，它们会被转换为编译时检查和执行时强制转换。所以这段代码：

列表列表 = 新的 ArrayList(); list.add("嗨"); 字符串 x = list.get(0);

被编译成

列表列表 = 新的 ArrayList(); list.add("嗨"); 字符串 x = (String) list.get(0);

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-23T22:28:43.260

编译器可以合理地推断类型参数吗？

是的，在示例情况下 -`static HashMap<K,V>newInstance(){return new HashMap<>();}`显然是`static < K extends Object , V extends Object > HashMap<K,V>newInstance()return new HashMap<K,V>();}`.

但是，如果您的编译器推断出类型参数，那么即使您输入错误的类名，您的代码仍然可以编译。 `static void setName ( Sting name )`可能是错误的，但您的编译器会假设您的意思是`<Sting extends Object> static void setName ( Sting name );`通过运行时擦除的魔力相当于`static void setName ( Object name ) ;`.

如果方法不是静态的，那么推理就会出现问题。 `class X { HashMap<K,V>newInstance(){return new HashMap<>();}}`可以被类型推断为以下之一：

1.  `class X <K extends Object , V extends Object> { HashMap<K,V>newInstance(){return new HashMap<>();}}`
2.  `class X <K extends Object > { < V extends Object > HashMap<K,V>newInstance(){return new HashMap<>();}}`
3.  `class X <V extends Object> { < K extends Object > HashMap<K,V>newInstance(){return new HashMap<>();}}`
4.  `class X { <K extends Object , V extends Object> HashMap<K,V>newInstance(){return new HashMap<>();}}`

另外，如果类型参数是推断出来的，那么顺序是什么。当它们被明确说明时，顺序是显而易见的。解决推断类型参数的顺序问题的唯一（对我来说很明显）方法是它们在代码中声明的顺序。但是，如果您只是颠倒 2 行代码的顺序（这应该是无关紧要的），您可能会更改破坏构建的公共接口。这么脆！

# html - 大纲：无不适用于输入标签

> ID：11173338
> 
> 赞同：5
> 
> 时间：2012-06-23T22:02:57.217
> 
> 标签：html, css, twitter-bootstrap

> **可能重复：**
> [为什么我无法删除 Twitter Bootstrap 中的蓝色文本区域边框？](https://stackoverflow.com/questions/8622686/how-come-i-cant-remove-the-blue-textarea-border-in-twitter-bootstrap)

我为摆脱输入字段上的突出显示而进行的每次搜索都说要使用 css：

```
input:focus {
    outline:none;
} 
```

这根本行不通。我正在使用最新版本的 chrome、firefox 和 safari 进行测试。

我也在使用 Bootstrap css 库，我不确定这是否会导致这种问题。

我想要达到的效果是模拟控制台屏幕中的空白行。我让它工作得很好，看起来很完美，除了当输入输出字段处于焦点时的突出显示。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-24T04:55:01.040

对我有用的解决方案

```
input, input:focus{
        position:absolute;
        width:auto;
        bottom:0px;
        padding:0px;
        margin:2px;
        background-color:#000000;
        color:#33FF00;
        border-width: 0px;
        outline:0; /* I have also tried outline:none */
        -webkit-appearance:none;
        box-shadow: none;
        -moz-box-shadow: none;
        -webkit-box-shadow: none;
} 
```

特别是解决问题的基本CSS：

```
input, input:focus{
        border-width: 0px;
        outline:0; /* I have also tried outline:none */
        -webkit-appearance:none;
        box-shadow: none;
        -moz-box-shadow: none;
        -webkit-box-shadow: none;
} 
```

我最初忘记将 box-shadow 设置为 none。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-23T22:29:30.123

如果`input{outline:none;}`不起作用，请尝试：

```
input, input:focus{
  outline:0px !important;
  -webkit-appearance:none;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-23T22:09:20.193

不要将它附加到`:focus`伪事件。

```
input
{
    outline:none;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-23T22:08:43.033

试试这样：

```
input {
    outline:none;
} 
```

在我的网站上为我工作。如果它对您不起作用，请尝试提供小提琴。

# clojure - Clojure、环、SSL

> ID：11173345
> 
> 赞同：7
> 
> 时间：2012-06-23T22:04:23.777
> 
> 标签：clojure

## 语境

我查看了 Google 上“Clojure、Ring、SSL”的前三名结果，对于使用 Clojure + Ring 设置 SSL 的“正确方法”似乎没有达成共识。

## 问题：

理想的答案是以下形式：

1）在您的 project.clj 中包含“blahblahblah -version xyz” 2）将您的 ssl 证书放在 3）使用以下命令修改您的 ring-handler：wrap-ring-handler ...

但是，如果这是不可能的，那么最佳解决方案也可以。:-)

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-23T22:09:54.807

我建议您在应用程序前面使用 Apache2 或 nginx 之类的东西。使用该服务器终止 SSL 和代理到您的应用程序。在 Apache2 中终止 SSL 就像指定证书一样简单。使用 Apache2 代理也很容易。这比将代码写入您的应用程序以终止 SSL 要灵活得多。

# java - 如果视图和模型（对象）都应该监听模型（对象），如何处理监听器？

> ID：11173346
> 
> 赞同：0
> 
> 时间：2012-06-23T22:04:27.257
> 
> 标签：java, model-view-controller, architecture

`Passenger`s 和`Taxi`s 在不同的线程中独立运行。在 Edwin Buck 的大力帮助下，[我](https://stackoverflow.com/questions/10967754/what-is-wrong-in-my-mvc-implementation/10969242#10969242)使用 MVC 进行出租车管理。在我的情况下 view( `JTaxiPanel`) 和 models( `Passenger`) 都听`Taxi`。当`Taxi`触发事件时（例如当添加乘客或出租车开始驾驶......）时，所有侦听器都会收到通知。问题是`Passenger`即使将其他乘客添加到出租车，也会收到通知。我希望乘客听，但我认为在添加**其他**乘客或其他一些情况下不`Passenger`应该通知。

 **如何处理此类问题？

出租车应该有 2 个听众名单还是有其他方法可以做到？

```
class Station extends Thread
{
    LinkedList<Taxi> taxisInQueue;
    LinkedList<Passenger> passengersInQueue;
    void matchPassengerToTaxi()
    {
         Taxi taxi = taxisInQueue.removeFirst();
         Passenger passenger = passengersInQueue.removeFirst();
         // passenger listen to taxi
         taxi.addListener(passenger);
         taxi.addPassenger(passenger);       
    }
}
class Passenger extends Thread implements TaxiListener
{
    @Override
    public void taxiChanged(TaxiEvent event)
    {

    }
}
class Taxi extends Thread
{
    Vector<Passenger> passengers;
    public void addPassenger(Passenger passenger) 
    {
        passengers.add(passenger);              
        // notify listeneres
        fireEvent(new PassengerAddedEvent(this, passenger));
    }    
}
class JTaxiPanel extends JPanel implements TaxiListener
{
    public JTaxi(Taxi model)
    {
        this.model = model
        // view listens to Taxi
        model.addTaxiListener(this); 
    }
    @Override
    public void taxiChanged(TaxiEvent event)
    {        
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T22:19:10.297

如果已添加的乘客与 相同，您可以检查您的乘客侦听器`this`。比较 id 或其他一些平等标准。如果他们不一样，他们什么都不做......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T22:31:34.873

概括您所说的：事件/侦听器是一种广播通信模式。如果您构建一个系统，其中许多侦听器忽略了大多数广播，那么您就是在要求性能问题并增加侦听器的复杂性。

要解决此问题，请为不同类型的通信选择实现为不同事件和侦听器类型的不同通信通道。在这种情况下，不是表示“出租车发生了某事”的单一事件类型，而是查找发生在出租车上并且具有较小侦听器集的不同类别的事件。

一个经验法则是，最频繁发生的事件应该有最少数量的侦听器忽略它们。

另一个经验法则是使这些不同类型的事件相互排斥。您不希望同一实体被两次通知同一事件的情况。

GUI 系统中经常使用的另一种方法是事件掩码。安装侦听器时，将包含所需事件类型的掩码。这让发送者（在本例中为出租车）避免发送给不感兴趣的听众。**

# parsing - 将数字分成数字到序言

> ID：11173352
> 
> 赞同：2
> 
> 时间：2012-06-23T22:05:20.383
> 
> 标签：parsing, prolog, visual-prolog

我想使用序言将数字分成列表数字

```
like :
     if number is "345"
separate to [3, 4, 5] 
```

我怎样才能做到这一点 ？

```
stringTokenizer("", []) :- !.
stringTokenizer(Sen, [H|T]) :-
   frontToken(Sen, Token, Remd), H = Token, stringTokenizer(Remd, T). 
```

我正在使用此谓词将字符串转换为字符串列表

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-08T13:13:38.047

由于没有明确的答案，您可以使用字符串是 ascii 整数列表这一事实来简化这一点，正如@RayToal 所建议的那样。只需确保字符串中的所有字符实际上都是整数。

```
stringTokenizer([], []).
stringTokenizer([N|Ns], [Digit|Rest]):-
    48 =< N, N =< 57,
    Digit is N - 48,
    stringTokenizer(Ns, Rest). 
```

你的例子：

```
?- stringTokenizer("345", List).
List = [3, 4, 5]. 
```

# iphone - 登录注销 Twitter 帐户框架 iOS 与多个帐户

> ID：11173356
> 
> 赞同：0
> 
> 时间：2012-06-23T22:06:05.780
> 
> 标签：iphone, ios, twitter, account

我想知道如何在我的应用程序中管理 iOS 上的多个 Twitter 帐户，我知道这样：

```
ACAccountStore *accountStore = [[ACAccountStore alloc] init];
ACAccountType *accountType = [accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierTwitter];

[accountStore requestAccessToAccountsWithType:accountType withCompletionHandler:^(BOOL granted, NSError *error) {
    if(granted) {
        NSArray *accountsArray = [accountStore accountsWithAccountType:accountType];

        ACAccount *twitterAccount = [accountsArray objectAtIndex:0];

    }
}]; 
```

我可以检索 twitter 帐户，但我如何让用户选择在我的应用程序中使用的 twitter 帐户，并登录注销以选择另一个帐户？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-23T22:36:14.100

Accounts 框架仅提供一个 Twitter 帐户。您可能可以直接使用[Twitter 的 API](https://dev.twitter.com/)来处理您的应用程序中的多个帐户，但您将无法使用 iOS 的内置 Twitter 框架。

# bash - GNU屏幕：在会话中启动命令而不更改窗口

> ID：11173357
> 
> 赞同：1
> 
> 时间：2012-06-23T22:06:06.787
> 
> 标签：bash, sh, sysadmin, gnu-screen

我们有一个有人值守的升级脚本，它会`apt-get update && apt-get upgrade`在我们所有的管理系统上同时启动。理想情况下，我们希望在屏幕会话中启动它们。当我这样做时：

文件：升级.sh

* * *

```
for host in $ALLHOSTS
do
    some_commands_which_take_considerable_time
    screen -X screen sh -c "ssh $host \"apt-get update && apt-get upgrade\""
done 
```

* * *

`$ screen ./upgrade.sh`

，它可以工作，但是由于会话中有新窗口到达，它们会自动切换到。相反，我宁愿有一个固定活动窗口的版本，除非包含的进程退出或者我使用`^A n`.

如果有可能保留退出进程的窗口，但将它们与具有活动进程的窗口分开，则可以加分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T22:35:46.830

你可以用[tmux](http://tmux.sourceforge.net/)做到这一点。例如：

```
# Start a session named "apt-get" and leave it running in the background.
tmux session-new -d -s apt-get

# Preserve windows with inactive processes.
tmux set-option -t apt-get set-remain-on-exit on

# Start a new window without switching to it. You can also do this from
# within a running tmux session, not just outside of it.
tmux new-window -d -t apt-get -n upgrade-$host \
     "ssh $host 'apt-get update && apt-get upgrade'" 
```

请注意，您可以拥有多个具有相同名称的窗口，或者将参数修改为 -n 标志以获得唯一名称。tmux 应用程序不在乎。

例如，您可以将每个窗口命名为“升级”，但这会使您难以一眼识别您的 SSH 会话。相反，此示例将*主机*变量的值（由您的 for 循环填充）附加到每个窗口名称。这使得导航或以编程方式关闭您不再感兴趣的窗口变得更容易。当您有许多显示已终止进程的未关闭窗口时，这尤其有价值。

总体而言，对于此类任务，语法比 GNU 屏幕更简洁和直观，但您的里程可能会有所不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T22:29:21.077

W/r/t 在子进程退出后保留窗口，一种可能性是`zombie`在屏幕配置文件中调用命令，这要求您分别指定两个键盘字符来杀死或恢复窗口。例如：

```
zombie KR 
```

然后，`K`将杀死一个子进程已终止的窗口，同时`R`尝试在同一窗口中重新启动子进程。请注意，在僵尸窗口中，这些键是在顶层捕获的（即，不要在它们前面加上正常的屏幕控制字符前缀序列）。

为了防止自动切换到新创建的窗口，请尝试将您的屏幕调用更改为以下内容：

```
screen -X eval 'screen sh -c "ssh $host \"apt-get update && apt-get upgrade\""' 'other' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T11:59:11.450

感谢 CodeGnome，我可能会选择 tmux，因为我相信 screen 无法做到这一点（这真的很不幸！）。

为了更好地了解如何使用它：

```
#!/bin/sh

tmux new-session -d -s active
tmux new-session -d -s inactive
tmux set-option -t active set-remain-on-exit on

for host in $ALLHOSTS
do
    tmux new-window -d -t active: -n upgrade-$host "
        ./do_upgrade_stuff.sh $host
        tmux move-window -s active:upgrade-$host -t inactive:
    "
done 
```

# php - 隐藏打开的目录

> ID：11173361
> 
> 赞同：1
> 
> 时间：2012-06-23T22:07:48.300
> 
> 标签：php, apache, file-io, directory

我有一个网站，现在用户可以打开一个目录并查看其中的所有文件。我该如何禁用它？

我在考虑 php.ini 文件，或者通常是任何可以解决问题的 php 配置（它是使用 PHP 运行的 Apache 服务器）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T22:10:50.037

禁用`Indexes`apache 配置中的选项。

将其放在您的站点`httpd.conf`或`.htaccess`站点的根目录中。

```
Options -Indexes 
```

这样，如果文件夹没有索引页，用户将收到 403 Forbidden 错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T22:12:36.397

将名为 .htaccess 的文本文件放入您网站的根目录或您要隐藏的目录，其中包含以下内容：

```
Options -Indexes 
```

# jquery - 我如何压缩这个 jQuery 使其更高效？

> ID：11173363
> 
> 赞同：-5
> 
> 时间：2012-06-23T22:07:58.253
> 
> 标签：jquery, function

下面是我为制作简单动画而编写的一些 jQuery 代码。但是我对它很陌生，我不知道如何将它浓缩并被教程迷惑！

```
<!-- Login Form Div Animation -->
<script type="text/javascript">
$(document).ready(function() {
    $('#button-active').hide();
    if ($("#LoginButton").hasClass("inactive")) {
            $("#TopLoginForm").hide();
    } else {
            $("#TopLoginForm").show();
    }
    $("#LoginButton").click( function() {
        if ($("#LoginButton").hasClass("inactive")) {
            $("#LoginButton").animate({ 
                marginTop: "-40px"
                }, 500 );
            $("#button-inactive").animate({ 
                opacity: "0"
                }, 500 );
            $('#button-inactive').remove();
            $('#button-active').hide();
            $('#button-active').delay(30).fadeIn(1000);
            $('#LoginWelcome').delay(0).fadeOut(1000);
            $('#TopLoginForm').delay(800).fadeIn(1000);
            $("#LoginButton").addClass("button");
            $("#LoginButton.button").click( function() {
                document.forms["LoginForm"].submit();
            });
         }
    }); 
});
</script>
<!-- End Login Form Div Animation --> 
```

可以在页面顶部的 www.trainingthemlive.co.uk/temp 上查看实时代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T22:23:47.520

关于 jQuery 优化的一件大事是知道 jQuery 函数`jQuery()`通常别名为`$()`确实是一个函数。

这意味着 using`$('#some_id')`实际上是调用一个函数来**查找**ID 为 #some_id 的 HTML 元素。这在性能方面代价高昂，因为在 DOM 中**查找**某些内容意味着遍历树并检查/比较节点的属性。

您应该从 DOM（使用 jQuery）获取 HTML 元素并将引用保存到变量中。稍后在脚本中，您将使用相同的变量引用该 HTML 元素，以免再次遍历 DOM**寻找**相同的元素。

通过使用 jQuery 的`method chaining`方法（如 @meloncholy 所建议的那样），您将获得与定义变量相同的好处以及更紧凑的语法。这对于操作以后不需要引用的对象很有用，因此您只需将需要对其进行的所有操作叠加起来。

一个例子是：

```
var some_object = $('#some_id');
some_object.hide();
if (some_object.hasClass('some_class')) {
    ... 
```

我不能说这样大小的脚本会有**明显**的性能改进。如果你有几百行滥用`jQuery()`函数的 jQuery 代码和树中的几百个 HTML 元素，然后你按照我的指示重构 jQuery 代码，那么你会有一个加速。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T22:20:02.747

我能做到的最好。你有很多重复的功能

```
$(document).ready(function() {
    //Start hidden
    $('#button-active').hide();
    $("#TopLoginForm").hide();

    // clicking "login"
    $("#LoginButton").click( function() {
    if ($("#LoginButton").hasClass("inactive")) {
        $("#LoginButton").animate({ 
            marginTop: "-40px"
            }, 500 );
        $('#LoginWelcome').fadeOut(1000);
        $('#button-active').fadeIn(1000);
        $('#TopLoginForm').fadeIn(1000);
        $("#LoginButton").addClass("button");
        $("#LoginButton.button").click( function() {
            document.forms["LoginForm"].submit();
        });
    }
    }); 
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T22:43:52.417

如果您知道结果没有改变，您可以做的最重要的事情是避免两次运行相同的查询。链接或缓存 jQuery 调用的结果！代替：

```
$('#button-active').hide();
$('#button-active').delay(30).fadeIn(1000); 
```

您可以使用 jQuery 对象的可链接性。事实上，您已经在第二行中进行了操作——为什么不采取额外的步骤呢？

```
$('#button-active').hide().delay(30).fadeIn(1000); 
```

为了可读性：

```
$('#button-active')
    .hide()
    .delay(30)
    .fadeIn(1000); 
```

但这不是全部答案。如果您需要按顺序对一个对象或集合执行一堆操作，则链接非常简洁。但是，如果您需要`button-active`在执行期间的多个不同点访问一个对象，例如 ，您应该将查询存储为一个变量。

```
var $activeButton = $('#button-active'); // a common convention is to use the $ prefix on variables storing jQuery objects, but this is arguable & optional 
```

总之，还有一些其他的效率技巧：

```
;$(document).ready(function() {
    var   inactiveClass     = "inactive"
        , buttonClass       = "button"
        , fadeDuration      = 1000
        , animateDuration   = 500
        , shortDelay        = 30
        , longDelay         = 800

        , loginInactiveButtonAnimateTarget = {
            marginTop: -40
        }
        , inactiveButtonAnimateTarget = {
            opacity: 0
        }

        , loginButtonClickHandler = function() {
            document.forms["LoginForm"].submit() // not modifying this, but if this is the "TopLoginForm" then you could do this simpler
        }

        , $activeButton     = $('#button-active').hide() /* the .hide() method chains, so it returns the button-active object */
        , $loginButton      = $('#LoginButton')
        , $topLoginForm     = $('#TopLoginForm')
        , $loginWelcome     = $('#LoginWelcome')
        , $inactiveButton   = $('#button-inactive')

    if ($loginButton.hasClass(inactiveClass)) {
        $topLoginForm.hide()
    } else {
        $topLoginForm.show()
    }
    $loginButton.click(function() {
        if ($loginButton.hasClass(inactiveClass)) {
            $loginButton.animate(loginnactiveButtonAnimateTarget, animateDuration)
            $inactiveButton.animate(inactiveButtonAnimateTarget, animateDuration).remove()
            $activeButton.hide().delay(shortDelay).fadeIn(fadeDuration)
            $loginWelcome.delay(0).fadeOut(fadeDuration)
            $loginForm.delay(longDelay).fadeIn(fadeDuration)
            $loginButton.addClass(buttonClass).click(loginButtonClickHandler)
        }
    })
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-24T00:13:26.527

这是我对简化它的看法：

```
<script type="text/javascript">
$(document).ready(function() {
    var loginButton = $("#LoginButton");
    var topLoginForm = $("#TopLoginForm").toggle(!loginButton.hasClass("inactive"));
    loginButton.click( function() {
        var this$ = $(this);
        if (this$.hasClass("inactive")) {
            this$.animate({marginTop: "-40px"}, 500 );
            $("#button-inactive").animate({opacity: "0"}, 500, function() {$(this).remove();} );
            $('#button-active').hide().delay(30).fadeIn(1000);
            $('#LoginWelcome').fadeOut(1000);
            topLoginForm.delay(800).fadeIn(1000);
            loginButton.addClass("button").click( function() {
                document.forms["LoginForm"].submit();
            });
         }
    }); 
});
</script>
<!-- End Login Form Div Animation --> 
```

用于简化它的技术：

*   在同一个 jQuery 对象上链接多个命令
*   使用切换（布尔）而不是 if/else
*   将任何 jQuery 对象保存到多次使用的局部变量中
*   在动画上使用完成功能，因此在动画完成之前不会将其删除
*   删除`.delay(0)`，因为它不执行任何操作
*   在事件处理程序中使用`this`而不是重新运行当前选择器

# ruby - 如何设置数据结构以在 Ruby 中进行高效搜索？

> ID：11173364
> 
> 赞同：2
> 
> 时间：2012-06-23T22:08:02.247
> 
> 标签：ruby, arrays, hash, ruby-1.9.3

我有一个哈希数组。每个哈希看起来像：

```
'date'=>6/23/2011, value1=>6, value2=>8, value3=>3, value4=>6 
```

该数组有大约 10,000 个哈希元素。

Ruby 中是否有一种内置方法可以按日期通过元素的索引***有效地查找？***我知道有，`Array.index`但它是否按顺序遍历数组？

有没有更好的方法来设置我的数据以便可以有效地访问它？

红宝石 1.9.3

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-23T22:10:55.430

听起来你是在倒退。你应该有一个数组哈希：

```
{'6/23/2011' => [6, 8, 3, 6]} 
```

这样，给定日期，您就可以恒定时间访问相应的数据。它还使您可以更清晰地访问这些值，而不是笨拙的“valueX”东西。

# php - 用于 HTML 标签生成的 PHP 库

> ID：11173367
> 
> 赞同：4
> 
> 时间：2012-06-23T22:08:57.333
> 
> 标签：php, html

我是 PHP 新手。对不起，如果这是一个常见问题...

假设我有这个 HTML 表：

```
<table width="100%" cellpadding="12" cellspacing="0" border="0">
  <tr bgcolor="black">
    <td align="left">
      <img src="logo.gif" />
    </td>
    <td>
      <h1>Hello</h1>
    </td>
    <td align="right">
      <img src="logo.gif" />
    </td>
  </tr>
</table> 
```

`?> ... <?php`我不想转义为 HTML ( ) 或使用手动字符串构造的 echo，而是使用 PHP 函数来生成代码。我制作[了一个库](https://gist.github.com/2980249)，以便可以使用以下代码生成上面的示例：

```
echo table(
  array('width' => '100%', 'cellpadding' => '12', 'cellspacing' => '0', 'border' => '0'),
    tr(
      array('bgcolor' => 'black'),
      td(
        array('align' => 'left'),
        img(array('src' => 'logo.gif'))),
      td(array(), h1(array(), 'Hello')),
      td(array('align' => 'right'), img(array('src' => 'logo.gif'))))); 
```

我的问题是，是否已经有一个流行或常用的库可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T22:16:10.840

您可以使用 Codeigniter [html 表格](http://codeigniter.com/user_guide/libraries/table.html)和[表单助手](http://codeigniter.com/user_guide/helpers/form_helper.html)，仅此而已。剩下的就看你了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-26T09:13:26.230

[请参阅PHP HTML Creation Library](https://stackoverflow.com/questions/13082818/php-html-creation-library)的非 OO-Answer ：

例子.php：

```
<?php
require ("html.php");
  // crete a header
  $head=head(title("This is an example"));
  // and a body
  $body=body(h(1,"This is a header 1").pre("With some preformatted text").hr());
  // wrap it in html
  echo html($head.$body);
?> 
```

html.php：

```
<?php
/**
 * HTML Abstraction
 */

   // anchor   
   function a($href,$la,$indent=-1) {
     return attrtag("a",attr("href",$href),$la,$indent,$indent);
   }

   // break
   function br($indent=-1) {
     return tag("br","",$indent,$indent);
   }

   // header
   function h($h,$lh,$indent=-1) {
     if ($indent<0) 
       $indent=$h+1;
     return tag("h".$h,$lh,$indent,-1);
   }

   // horizontal ruler
   function hr($indent=-1) {
     return tag("hr","",$indent,$indent);
   }

   // image
   function img($src,$alt,$width,$height,$indent=-1) {
     return attrtag("img",attr("src",$src).attr("alt",$alt).attr("width",$width).attr("height",$height),"",$indent,$indent);
   }

   // pre formatted content
   function pre($content,$indent=-1) {
     return tag("pre",$content,$indent);
   }

   // table 
   function td($ltd,$indent=5) {
     return tag("td",$ltd,$indent,$indent);
   }

   // table header
   function th($lth,$indent=5) {
     return tag("th",$lth,$indent,$indent);
   }

   // table row
   function tr($ltr,$indent=4) {
     return tag("tr",$ltr,$indent,$indent);
   }

   // table
   function table($lt,$indent=3) {
     return tag("table",$lt,$indent,$indent);
   }

   // title
   function title($title,$indent=2) {
     return tag("title",$title,$indent,-1);
   }

   // head
   function head($head,$indent=1) {
     return tag("head",$head,$indent,$indent);
   }

   // body
   function body($body,$indent=1) {
     return tag("body",$body,$indent,$indent);
   }

   // html
   function html($html) {
     return tag("html",$html,-1,0);
   } 
   // indentation by the given count
   function indentation($count) {
     return str_repeat("  ",$count);
   }

   // adds a newline    
   function line($line) {
     return $line."\n";
   }

   // an attribute with a given value
   // or empty if value is not set
   function attr($attr,$value) {
     if (empty($value))
       return "";
     else
       return " ".$attr."='".$value."'";
   }

   // attributed tag, possibly indented
   function attrtag($tag,$attr,$ltagcontent,$openindent=-1,$closeindent=-1) {
    $html="<".$tag.$attr;
    if ($openindent>=0)
      $html="\n".indentation($openindent).$html;
    if (empty($ltagcontent)) {
      $html.="/>";
        if ($closeindent>=0)
          $html.="\n".indentation($closeindent);
    } else {
        $html.=">".$ltagcontent;
        if ($closeindent>=0) {
          $html.="\n".indentation($closeindent);
        }
        $html.="</".$tag.">";
    }
    return $html;
   }

   // tag with possible indentation
   function tag($tag,$ltagcontent,$openindent=-1,$closeindent=-1) {
      return attrtag($tag,"",$ltagcontent,$openindent,$closeindent);
   }

    // indent the given lines
   function indent($html,$indent) {
     $result="";
     $lines=explode("\n",$html);
     foreach($lines as $line) {
       $result.=indentation($indent).$line."\n"; 
     }
     return $result;
   }

?> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-23T22:11:34.027

codeigniter 做这种事情。我建议你调查一下。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-23T22:21:02.603

虽然不是完全匹配，但 Yii 框架使用[CHtml 类](http://www.yiiframework.com/doc/api/1.1/CHtml/)来帮助生成 html。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-28T22:16:55.043

我没有找到库，所以我继续更新我自己的[HTML 标签库](https://gist.github.com/2980249)。

# cocos2d-iphone - CCLayerPanZoom 不会放大或缩小

> ID：11173368
> 
> 赞同：0
> 
> 时间：2012-06-23T22:09:07.770
> 
> 标签：cocos2d-iphone

几个星期以来，我一直在使用 CCLayerPanZoom 遇到问题，终于接近了，但仍然有问题。我有一个非常大的 8000 像素 x 8000 像素的平铺地图，我想要的是能够放大到大约 2.0f 并缩小到大约 0.4f。下面的代码很好用，它让我可以平移整个瓦片地图，而不是平移到边缘——CCLayerPanZoom 的一个常见问题，但是代码不允许放大或缩小。我现在已经注释掉了 minScale 和 maxScale，因为它们都不起作用。我尝试更改 minScale 和 maxScale 的位置，但它在任何地方都不起作用。有谁知道如何让 minScale 和 maxScale 工作以便缩放起作用？

```
 //PanZoomLayer

    _panZoomLayer = [[CCLayerPanZoom node] retain];
    [self addChild: _panZoomLayer];
    _panZoomLayer.delegate = self; 

    [_panZoomLayer addChild: _tileMap z :1 tag: kBackgroundTag];

    _panZoomLayer.mode = kCCLayerPanZoomModeSheet;

    _panZoomLayer.rubberEffectRatio = 0.0f;
    CCNode *backgroundZ = [_panZoomLayer getChildByTag: kBackgroundTag];
    CGRect boundingRect = CGRectMake(0, 0, 0, 0);
    boundingRect.size = [backgroundZ boundingBox].size;
    [_panZoomLayer setContentSize: boundingRect.size];

    _panZoomLayer.anchorPoint = ccp(0.5f, 0.5f);
    _panZoomLayer.position = ccp(0.5f * winSize.width, 0.5f * winSize.height);

    _panZoomLayer.panBoundsRect = CGRectMake(0, 0, winSize.width, winSize.height);
    _panZoomLayer.minScale = 0.4f;
    _panZoomLayer.maxScale = 2.0f;

    //end PanZoomLayer 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T03:26:41.827

终于想通了，通过在 CCPanZoomLayer 上面的代码中添加下面的代码，最终效果很好。希望这段代码希望其他一直在努力使用这个 cocos2d 扩展的人

```
 [[[CCDirector sharedDirector] view] setMultipleTouchEnabled:YES]; 
```

# android - 如何检查我的 ListView 是否有可滚动的项目数？

> ID：11173369
> 
> 赞同：18
> 
> 时间：2012-06-23T22:09:11.957
> 
> 标签：android, android-listview

您如何知道您的 ListView 是否有足够数量的项目以便它可以滚动？

例如，如果我的 ListView 上有 5 个项目，所有项目都将显示在一个屏幕上。但如果我有 7 个或更多，我的 ListView 开始滚动。我如何知道我的列表是否可以以编程方式滚动？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-03-12T21:04:29.077

当最后一个项目在屏幕上部分可见时，Diegosan 的答案无法区分。这是该问题的解决方案。

首先，必须先在屏幕上呈现 ListView，然后我们才能检查其内容是否可滚动。这可以通过 ViewTreeObserver 完成：

```
ViewTreeObserver observer = listView.getViewTreeObserver();
    observer.addOnGlobalLayoutListener(new OnGlobalLayoutListener() {

        @Override
        public void onGlobalLayout() {
            if (willMyListScroll()) {
                 // Do something
            } 
        }
    }); 
```

这是`willMyListScroll()`：

```
boolean willMyListScroll() {   
    int pos = listView.getLastVisiblePosition();
    if (listView.getChildAt(pos).getBottom() > listView.getHeight()) {
        return true;
    } else {
        return false;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-03T04:47:03.790

根据我对 Mike Ortiz 回答的评论，我认为他的回答是错误的：

getChildAt() 只计算屏幕上可见的孩子。同时，getLastVisiblePosition 根据 Adapter 返回索引。因此，如果 lastVisiblePosition 是 8，因为它是列表中的第 9 个项目，并且屏幕上只有 4 个可见项目，那么您将会崩溃。通过调用 getChildCount() 来验证它并查看。getChildAt 的索引与数据集的索引不同。看看这个：[ListView getChildAt为可见的孩子返回null](https://stackoverflow.com/questions/6766625/listview-getchildat-returning-null-for-visible-children)

这是我的解决方案：

```
public boolean isScrollable() {
        int last = listView.getChildCount()-1; //last visible listitem view
        if (listView.getChildAt(last).getBottom()>listView.getHeight() || listView.getChildAt(0).getTop()<0) { //either the first visible list item is cutoff or the last is cutoff
                return true;
        }
        else{
            if (listView.getChildCount()==listView.getCount()) { //all visible listitem views are all the items there are (nowhere to scroll)
                return false;
            }
            else{ //no listitem views are cut off but there are other listitem views to scroll to
                return true;
            }
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-24T08:23:51.437

在 android 使用`listView`. 但是，您绝对可以检测到这种后期渲染。

```
boolean willMyListScroll() {        
   if(listView.getLastVisiblePosition() + 1 == listView.getCount()) {
      return false;
   }

   return true;             
} 
```

这样做是检查`listView`可见窗口是否包含您的所有列表视图项目。如果可以，则`listView`永远不会滚动，并且`getLastVisiblePosition()`始终等于列表的 dataAdapter 中的项目总数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-08-25T18:08:23.693

AbsListView 包括：

```
/**
 * Check if the items in the list can be scrolled in a certain direction.
 *
 * @param direction Negative to check scrolling up, positive to check scrolling down.
 * @return true if the list can be scrolled in the specified direction, false otherwise.
 * @see #scrollListBy(int)
 */
public boolean canScrollList(int direction); 
```

您需要覆盖 layoutChildren() 并在其中使用它：

```
@Override
protected void layoutChildren() {
    super.layoutChildren();
    isAtBottom = !canScrollList(1);
    isAtTop = !canScrollList(-1);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-07-06T16:18:35.510

这是我为在列表视图的最后一行之后显示图片而编写的代码：

```
public class ShowTheEndListview
{
    private ImageView the_end_view;
    private TabbedFragRootLayout main_layout;
    private ListView listView;
    private float pas;
    private float the_end_img_height;
    private int has_scroll = -1;

    public ShowTheEndListview(float height)
    {
        the_end_img_height = height;
        pas = 100 / the_end_img_height;
    }

    public void setData(ImageView the_end_view, TabbedFragRootLayout main_layout, ListView listView)
    {
        this.the_end_view = the_end_view;
        this.main_layout = main_layout;
        this.listView = listView;
    }

    public void onScroll(int totalItemCount)
    {
        if(totalItemCount - 1 == listView.getLastVisiblePosition())
        {
            int pos = totalItemCount - listView.getFirstVisiblePosition() - 1;
            View last_item = listView.getChildAt(pos);

            if (last_item != null)
            {
                if(listHasScroll(last_item))
                {
//                        Log.e(TAG, "listHasScroll TRUE");
                }
                else
                {
//                        Log.e(TAG, "listHasScroll FALSE");
                }
            }
        }
    }

    private boolean listHasScroll(View last_item)
    {
        if(-1 == has_scroll)
        {
            has_scroll = last_item.getBottom() > (main_layout.getBottom() - the_end_img_height - 5) ? 1 : 0;
        }

        return has_scroll == 1;
    }

    public void resetHasScroll()
    {
        has_scroll = -1;
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-16T08:24:00.413

这就是我过去检查的方式

```
if (listView.getAdapter() != null
                    && listView.getLastVisiblePosition() == listView.getAdapter().getCount() - 1
                    && listView.getChildAt(listView.getChildCount() - 1).getBottom() == listView.getBottom()) 
```

如果它给真，那么列表在底部

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-06-23T22:58:31.060

使用[setOnScrollListener ，通过对](http://developer.android.com/reference/android/widget/AbsListView.html#setOnScrollListener%28android.widget.AbsListView.OnScrollListener%29)[OnScrollListener](http://developer.android.com/reference/android/widget/AbsListView.OnScrollListener.html)应用回调，您可以使用预定义的常量确定滚动是否发生并相应地处理这种情况。

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2015-03-24T15:49:19.350

```
 boolean listBiggerThanWindow = appHeight - 50 <= mListView.getHeight();

            Toast.makeText(HomeActivity.this, "list view bigger that window? " + listBiggerThanWindow, Toast.LENGTH_LONG)
                    .show();

            if (listBiggerThanWindow) {
                // do your thing here...
               } 
```

您可以通过在 View 上调用 post(Runnable) 来获取 onCreate() 中的尺寸。

# java - Java 传递变量和返回值

> ID：11173370
> 
> 赞同：0
> 
> 时间：2012-06-23T22:09:13.573
> 
> 标签：java, methods

我无法通过方法传递一些变量，然后让该方法返回一个值。该`checkValue`方法应该查看数组中的每个数组项，`orderSplit`如果它们有错误，则返回错误消息，否则将返回空`errorMessage`。但截至目前，该程序似乎根本没有执行该方法。有什么建议么？

这是我的代码示例：

```
public class Foo {
    public static void main(String args[]) {
        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
        String order = null;
        try {
            order = br.readLine();
        } catch (IOException exc) {
            System.out.println("ERROR: A Problem has occured");
        }

        String[] orderSplit = null;
        orderSplit = order.split(" ");

        String errorMessage = "";
            checkValue(orderSplit, errorMessage);
        if (errorMessage == "") {
            System.out.println("SUCCESS");
        }

    }
    public static String checkValue(String[] orderSplit, String errorMessage) {
             // check the ordersplit values
             return errorMessage;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T22:11:16.637

您不会将方法的结果分配给任何东西。将您的代码更改为：

```
String errorMessage = checkValue(orderSplit); 
```

并不是说 checkValue 方法不需要任何错误消息作为参数。它将自己创建一个并将其返回给调用者。

此外，将 null 分配给您之后立即重新分配的变量，如下所示：

```
String[] orderSplit = null;
orderSplit = order.split(" "); 
```

是不必要的。您只需要

```
String[] orderSplit = order.split(" "); 
```

而且您永远不应该将字符串与`==`. `==`测试两个变量是否引用同一个 String 对象。您应该使用该`equals()`方法，该方法测试两个字符串是否包含完全相同的字符序列：

```
if (errorMessage.equals("")) { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T22:14:51.323

您没有在任何地方分配 checkValue 的返回值，只返回其参数。尝试改变

```
String errorMessage = "";
checkValue(orderSplit, errorMessage); 
```

至

```
String errorMessage = "";
errorMessage = checkValue(orderSplit, errorMessage); 
```

祝你好运

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T22:19:31.773

上面的代码只是分配`""`给`errorMessage`变量并返回对 string 的引用`""`。这本身并没有任何作用。

我假设您有一些代码为`errorMessage`in`checkVlaue`方法分配了不同的值。对此有一些警告。字符串在java中是不可变的。在您的消息签名中，传递的值是一个值，其中包含`errorMessage`在调用`checkValue`. 如果您尝试在内部为该变量分配另一个值`checkValue`并返回它，您实际上是在返回一个值，该值是对不同字符串对象的引用。一旦你返回调用方法打印`errorMessage`将打印`""`，因为这是`errorMessage`调用方法中仍然指向的字符串对象。如果您将呼叫更改为以下内容：

```
String errorMessage = checkValue(orderSplit); 
```

`checkedValue to`您现在正在分配从errorMessage `in the calling method. This will now print whatever the result of`checkValue`返回的参考值。

最终结果是要记住，尽管 java 中的大多数东西都是对象引用（指针），但所有方法签名实际上都是按值传递的。当您重新分配时，您不会更改指针指向的内容，而是将新指针一起分配给变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-23T22:21:07.847

`java.lang.String`是不可变的。因此，无论您`errorMessage`在方法内部做什么，都不会在方法外部可见，因为本质上您是在创建新`String`对象。

正如其他答案所建议的那样，您应该真正检查该方法的返回值。

# php - PHP $row['value'] 在一个 div 值中

> ID：11173374
> 
> 赞同：1
> 
> 时间：2012-06-23T22:09:26.570
> 
> 标签：php, mysql, html

好吧，所以我试图基本上采用 $row['cardid'] 中的内容并将其设置为我的 div 标签的值。然后在回显到的 html 文件上，它将运行我的函数，该函数使用 div 标记中的值。现在，当我使用 onclick 时，它会拉起但说我的值未定义。所以我的问题是为什么当我使用 html 拉出变量时我的变量未定义？

```
<?php
$q=$_GET["q"];
$con = mysql_connect("*", "*", "*");
if (!$con)
    {
    die('Could not connect: ' . mysql_error());
}
mysql_select_db("*", $con);
$sql="SELECT cardset, cardname, cardnumber, cardid FROM cards WHERE cardname LIKE '%".$q."%' OR cardset LIKE '%".$q."%'"; 
$result = mysql_query($sql) or die ('Error: '.mysql_error ());

echo "<table border='1'>
<tr>
<th>#</th>
<th>Cardname</th>
<th>Card Set</th>
</tr>";
while ($row = mysql_fetch_array($result)) 
{
echo "<tr>";
echo "<td>" . $row['cardnumber'] . "</td>";
// This is the troubled line.
echo '<td><div value="'.$row['cardid'].'" onclick="changeimage(this.value)">' . $row['cardname'] . '</div></td>';
echo "<td>" . $row['cardid'] . "</td>";
echo "<td>" . $row['cardset'] . "</td>";
echo "</tr>";
}
echo "</table>";
mysql_close($con);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T22:13:03.353

我不完全理解你的问题，但你的意思是这样的？

```
echo '<td><div onclick="changeimage(this.id)" id="'.$row['cardid'].'">' . $row['cardname'] . '</div></td>'; 
```

基本上使用 ID 而不是值..

示例：[jsFiddle](http://jsfiddle.net/edwardmp/BD9Uj/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T22:15:37.893

`div`元素没有`value`属性，但您可以获得`attribute`命名的值`value`- 您应该使用`.getAttribute("value")`：

```
 echo '<td><div value="'.$row['cardid'].'" onclick="changeimage(this.getAttribute(\"value\")">' . $row['cardname'] . '</div></td>'; 
```

一个例子：http: [//jsfiddle.net/vaSYh/](http://jsfiddle.net/vaSYh/)

此外，如果您需要在 DOM 元素中存储数据，请[使用`data-`属性。](http://ejohn.org/blog/html-5-data-attributes/)（或者即使您现在不必支持 HTML5，也可以这样命名它们；这将使过渡更容易）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T22:17:57.050

不要使用 this.value。它不是一种形式。

使用 this.innerText 或 this.innerHtml 获取 div 的内容

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-23T22:21:21.203

如果我理解正确你的答案，你想提醒 $row['cardid'] 的值？使用您的代码，您无法获得正确的值，因为您将 javascript 代码与 php 代码混合在一起。'onclick' 事件处理程序中的 'this' 关键字是 javascript 函数本身，因此它没有 'value' 属性。试试这个代码，以提醒正确的值：

```
echo '<td><div value="'.$row['cardid'].'" onclick="changeimage('.$row['cardid'].'">'. $row['cardname'] . '</div></td>'; 
```

# ruby-on-rails - 如何让模型验证与 Rails 中的视图层对话以提供简单的功能？

> ID：11173375
> 
> 赞同：1
> 
> 时间：2012-06-23T22:09:37.833
> 
> 标签：ruby-on-rails, validation, view, model

我有一个`Room`模型可以验证它的房间号是唯一的。但是，当用户创建一个新`Room`实例时，如果他们尝试创建一个已经存在的房间，而不是显示标准*这个房间已经存在*错误消息，我想提供一个指向该房间的链接，以便他们可以编辑它. 例如：我希望错误消息说：*房间 x 已经存在。**单击此处**编辑该房间。*其中 Click Here 文本是指向该房间对象的编辑路径的链接。

在 Rails 中有没有办法做到这一点或类似的东西？任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T03:25:12.513

您可以使用 client_side_validations gem [https://github.com/bcardarella/client_side_validations](https://github.com/bcardarella/client_side_validations)在 javascript 中使用您的 ruby​​ 验证（如果您使用的是 jquery），如 railscast #263 [http://railscasts.com/episodes/263-中所示客户端验证](http://railscasts.com/episodes/263-client-side-validations)。

您可以创建一个自定义验证器，它会找到现有的 room_id 并将指向它的链接传递给返回到您的视图的错误消息，例如：

```
# lib/room_existence_validator.rb
class RoomExistenceValidator < ActiveModel::EachValidator
  def validate_each(object, attribute, value)
    if existing_room = Room.find_by_id(value)
      # unfortunately url_for helper is not defined here so it's hard-wired
      room_link = "/rooms/#{existing_room.id}/edit"
      object.errors[attribute] << "#{link_to "Click here", room_link} to edit that room"
    end
  end
end 
```

您需要将 :validates => true 部分添加到您的 form_for 助手调用中。现在它可以在没有 ajaxified 调用的情况下工作。

要使其与 ajax 一起使用，还有 2 件事要做：

a) 添加一个 rails.validations.custom.js 文件，看起来像这样：

```
# rails.validations.custom.js
# please beware the .remote in function-name
ClientSideValidations.validators.remote['existing_room'] = function(element, options) {
  if ($.ajax({
    url: '/validators/existing_room',
    data: { id: element.val() },
    // async *must* be false
    async: false
  }).status == 404) { return options.message; }
} 
```

b) 路由您的验证请求，例如通过添加一个响应您的验证器路由的机架中间件，如 client_side_validations wiki [https://github.com/bcardarella/client_side_validations/wiki/Custom-Validators中所述](https://github.com/bcardarella/client_side_validations/wiki/Custom-Validators)

希望有帮助：D

# android - 如何在 OnItemClickListener 中应用通知？

> ID：11173377
> 
> 赞同：0
> 
> 时间：2012-06-23T22:09:58.957
> 
> 标签：android

我在使用 OnItemClickListener 的通知代码中有 3 个错误我需要应用，当单击一个项目时它显示通知这里是代码：

```
 list.setOnItemClickListener(new OnItemClickListener(){

        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
            // TODO Auto-generated method stub

            Bundle programNum = getIntent().getExtras();
            final String progNum = programNum.getString("ProgNum");
            final String dayNum = programNum.getString("DayNum");

            final List<TouringPrograms> startTime = datasource.getTouringProgramsStartTime(progNum, dayNum);
            final List<TouringPrograms> endTime = datasource.getTouringProgramsEndTime(progNum, dayNum);

            Intent intent = new Intent(this, ProgramsList2.class);
            PendingIntent pi = PendingIntent.getActivity(this, 0, intent, 0);
            String body = (String) ((TextView)parent.getChildAt(position)).getText();
            String title = "Egypt On The Go";
            String time = body + "\n start at:" + startTime.get(position)+ "\n end at:" + endTime.get(position);
            Notification n = new Notification(R.drawable.egypt, time, System.currentTimeMillis());
            n.setLatestEventInfo(this, title, time, pi);
            n.defaults = Notification.DEFAULT_ALL;
            nm.notify(uniqueID, n);
            //String time1 = "" + System.currentTimeMillis();
            //Toast.makeText(this, time1, Toast.LENGTH_SHORT).show();
            //finish();

        }}); 
```

3错误：

1.Intent 意图 = new Intent(this, ProgramsList2.class);

2.PendingIntent pi = PendingIntent.getActivity(this, 0, intent, 0);

3.n.setLatestEventInfo(this, title, time, pi);

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T23:03:29.553

### 错误 1

```
Intent intent = new Intent(this, ProgramsList2.class); 
```

`this`是一个类型的项目`OnItemClickListener`。您应该在调用`final Context intentContext = (Context) this;` **之前**`setOnItemClickListener`通过声明来传递它。然后，使用：

```
Intent intent = new Intent(intentContext, ProgramsList2.class); 
```

永远记得跟踪您的`Context`物品；它们对于这样的事情很重要（`Intent`s、资源、资产等）。

### 错误 2

```
PendingIntent pi = PendingIntent.getActivity(this, 0, intent, 0); 
```

和上面的问题完全一样。`this`不是类型`Context`。使用与上述相同的修复程序。

### 错误 3

```
n.setLatestEventInfo(this, title, time, pi); 
```

在这里，与上述两个问题相同。当您`this`应该使用`Context`. 与上述两个相同的修复。

### 概括

`this`使用[匿名类](http://docstore.mik.ua/orelly/java-ent/jnut/ch03_12.htm)时跟踪您的 s 。对于将来，发布编译错误（代码行**以及**错误本身的文本）对那些提供答案的人来说非常有帮助。

# c++ - 映射多变量/层系统的概括

> ID：11173378
> 
> 赞同：4
> 
> 时间：2012-06-23T22:10:10.187
> 
> 标签：c++, qt, user-interface, serialization

我用**C++** / **QT**编写了一个应用程序，它与设备通信以读取/写入其变量，将它们放入/获取它们并在 gui 中呈现它们以用于查看/编辑目的。

**1)**该设备附带一个示例 c 代码，该代码还定义了通信协议（以一种非常糟糕的方式），例如：

```
#define VALUE_1 0x12345678
#define VALUE_2 0xDEADBEEF
#define MY_DEVICE_VAR (VALUE_1 << 4) & (VALUE_2 >> 6)
#define MY_DEVICE_VAR_1 (MY_DEVICE_VAR & (VALUE_1 << 2)
#define MY_DEVICE_VAR_2 (MY_DEVICE_VAR & (VALUE_2 << 4)
#define MY_DEVICE_VAR_2 (MY_DEVICE_VAR & (VALUE_2 << 4)
// .. and 300 more lines like above 
```

因此变量`VAR_1`表示为：`MY_DEVICE_VAR_1`。

**2）**我有一个包含设备所有变量的结构：

```
struct MyDeviceData
{
    int var1;
    double var2;
    char var3;
    bool var4;
        .
        .
}; 
```

它基本上是从设备读取的数据的存储/投影。有 4 种不同类型的 POD 变量。

**3)**最后我的 gui 有 gui 元素来显示和编辑 MyDeviceData 的实例

```
class MyGuI
{
    QLineEdit var1;
    QLineEdit var2;
    QComboBox var3;
    QCheckBox var4;
       .
       .
}; 
```

现在我的问题是：

**1）**我正在做`MY_DEVICE_VAR1`-> `MyDeviceData::var1`-> `MyGUI::var1`with`if`和`switch/case`我不自豪的陈述的映射。进行映射的更好的“程序化”方式是什么？

**2）**当 gui 元素的值发生变化时，我只想将更新的值发送**到**卡。除了覆盖像 " `textChanged`、`selectedIndexChanged`" 等事件的处理函数之外，还有什么“更智能”的方法吗？（QSignalMapper？）

**3）**在这种项目中，是否可以概括整个苦力工作？（代码生成器工具？模板？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T02:23:33.053

我最近遇到了完全相同的问题，尽管我是设计设备、固件和通信协议的人。

我认为必须使用模型/视图来保持理智。

我将所有变量作为派生自`QAbstractTableModel`. 那是因为有固定数量的简单参数（行），并且每个设备（列）都相同。不过，很快，我将不得不转向树模型，因为某些参数内部结构为列表、向量或矩阵，将它们直接暴露给视图会很有帮助，而不仅仅是格式化字符串.

模型类也有一些方便的 getter/setter，这样你就不必通过它们的行/列来引用参数。通过 a 进行的行/列访问`QModelIndex`仅供视图使用。

我选择将 UserRole 用于直接表示的值（通常是 SI 单位的两倍），并使用 Display 和 Edit 角色将格式化/缩放的数据呈现给小部件。

对于非视图控件，需要一个活页夹对象。`QDataWidgetMapper`由 Qt 提供，您最好使用它。

前段时间我没有注意到有小部件映射器，所以我编写了一个自定义绑定对象（从 QObject 派生），它为每个 GUI 控件实例化，以将模型的某个索引绑定到非视图 Qt控制小部件。另一种方法是使用`QListView`s，每个视图都有一个代理模型，只公开一个元素，并正确分配委托。不过，这会带来很多开销。binder 对象方法非常轻量级。

模型视图方法还使人们能够轻松地分解出每个控件的最新指示。

*   当应用程序第一次启动时，模型可以指示（通过专用角色）这些值是无效的。这可以在控件上放置一个 x-cross 或理发杆，以清楚地指示那里没有有效值。

*   当设备处于活动状态并且用户修改控件时，不同的角色可以指示模型中的值已更改，但尚未传播到设备。

*   当设备通信代码从模型中获取更改并将其提交给设备时，它可以告诉模型，视图（实际上是 biner）将自动获取并更新控件。

*   向模型添加`Model * clone() const`方法，或添加序列化/反序列化操作符，可以让您轻松拍摄模型的快照，并实现 Undo/Redo、Commit/Revert 等。

活页夹的相关片段在这里：

```
// constructor
Binder::Binder(QAbstractItemModel * model_, const QModelIndex & index_, QObject * object) :
   QObject(object),
   model(model_),
   index(index_),
   sourceRole(Qt::DisplayRole),
   property(""),
   target(object),
   lockout(false)
{
   Q_ASSERT(index.isValid());
   // replicate for each type of control
   if (qobject_cast<QDoubleSpinBox*>(object)) {
      connect(object, SIGNAL(valueChanged(double)), SLOT(doubleSpinBoxGet(double)));
      connect(index.model(), SIGNAL(dataChanged(QModelIndex, QModelIndex)), SLOT(doubleSpinBoxSet(QModelIndex, QModelIndex)));
   }
   else if (....) 
}

// getter/setter for QDoubleSpinBox

void Binder::doubleSpinBoxGet(double val)
{
   if (lockout) return;
   QScopedValueRollback<bool> r(lockout);
   lockout = true;
   model->setData(index, val, sourceRole);
}

void Binder::doubleSpinBoxSet(const QModelIndex & tl, const QModelIndex & br)
{
   if (lockout) return;
   if (! isTarget(tl, br)) return;
   QScopedValueRollback<bool> r(lockout);
   lockout = true;
   if (! index.data().canConvert<double>()) return;
   qobject_cast<QDoubleSpinBox*>(target)->setValue(index.data(sourceRole).toDouble());
}

// helper

bool Binder::isTarget(const QModelIndex & topLeft, const QModelIndex & bottomRight)
{
   return topLeft.parent() == bottomRight.parent()
          && topLeft.parent() == index.parent()
          && topLeft.row() <= index.row()
          && topLeft.column() <= index.column()
          && bottomRight.row() >= index.row()
          && bottomRight.column() >= index.column();
} 
```

# mysql - MySQL 数据获取

> ID：11173381
> 
> 赞同：0
> 
> 时间：2012-06-23T22:10:44.883
> 
> 标签：mysql

我很难理解如何从 MySQL 中获取数据。答案可能很简单，但我被卡住了，无法通过互联网找到任何帮助......

我有三张桌子，假设第一张桌子是命名系列，第二张是团队，第三张是 id 游戏。表结构是这样的：

```
series:
id
name

teams:
id
name

games:
series_id (relates to series.id)
hometeam_id (relates to teams.id)
visitorteam_id (relates to teams.id) 
```

所以我的问题是从游戏中获取行，这些 id 需要有名字，而不是 id ......

```
Result should be something like this:
"championship
wolverines
marines"

not like
"1
45
142" 
```

目前我正在将这些系列和团队表获取到 hashref（在 perl 中）并从那里获取 id。但是必须有更有效的方法在一个 sql 查询而不是三个中执行此操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T22:16:01.017

您需要加入球队桌两次（一次是主队，第二次是客队）

```
SELECT g.*,h.name as hometeam_name,v.name as visitorteam_name FROM games g
  INNER JOIN series s ON g.series_id=s.id
  INNER JOIN teams h ON g.hometeam_id=h.id
  INNER JOIN teams v ON g.visitorteam_id=v.id 
```

# ios - CGContextSetAlpha 的作用类似于乘法

> ID：11173386
> 
> 赞同：1
> 
> 时间：2012-06-23T22:11:06.027
> 
> 标签：ios, draw, paint, alpha

我有一个绘画应用程序，如果我画一个红点，然后尝试用一个黄点在它上面画，但是在低 alpha 值时它就像一个多重混合模式，即使我继续用黄色越过红点. 它是否应该开始掩盖红点，即使黄色 alpha 为 0.5 或其他更低的值？如何在应用时继续建立低 alpha 值并覆盖具有更高 alpha 的颜色？我说得有道理吗？

我用红色按此顺序在下面调用这些方法，然后将颜色更改为黄色并在红色上绘制，结果在附件中。

```
 CGContextSetFillColorWithColor();
    CGContextSetAlpha();
    CGContextMoveToPoint();
    CGContextAddEllipseInRect();
    CGContextFillPath(); 
```

谢谢

![黄色永远不会覆盖低 alpha 的红点，即使我一直在上面画](../Images/7d4836aabf80a1d1e201c45495235663.png)

# crystal-reports - 水晶报表。如何显示 2 个可选日期之间的记录数量

> ID：11173390
> 
> 赞同：0
> 
> 时间：2012-06-23T22:12:38.407
> 
> 标签：crystal-reports

我是 Crystal 新手，我必须创建一个需要 2 个输入可选参数的基本报表：`DateStart`和`DateEnd`. 报告应包括 2 个日期之间的表格中的记录数量（如果`DateEnd`缺少日期值，则报告应考虑需要所有记录，无论其年龄多大。如果`DateStart`缺少报告，则应考虑需要所有记录，无论其年龄多大）

我想我将不得不使用`SQL Expression Field`但无法弄清楚如何实现 where 子句。

您将如何实施这样的报告？

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T04:57:48.360

当您想显示所有记录时添加特殊值，即 01/01/1900

```
crParameterDiscreteValue.Value ="19000101"; 
```

在第一个公式中

```
{?DateStart} = '19000101' or {table.DateStart} = {?DateStart} 
```

在第二个公式中

```
{?DateEnd} = '19000101' or {table.DateEnd} = {?DateEnd} 
```

无需使用 if else 语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T22:43:43.087

尝试这个：

`Date Parameter`用`optional prompt`和创建一个`range`。

然后我记录选择公式放：

```
if ( (not HasValue({?PARAM_YOUR_DATE}) or (not(HasLowerBound({?PARAM_YOUR_DATE}))) or (not(HasUpperBound({?PARAM_YOUR_DATE}))) ) then
  True
else
  {YOURDB.YOUR_DATE_FIELD} in {?PARAM_YOUR_DATE}; 
```

# android - 提高安卓的性能

> ID：11173397
> 
> 赞同：0
> 
> 时间：2012-06-23T22:13:47.227
> 
> 标签：android

我已经完成了一个 android 应用程序，它从互联网中检索数据，对其进行格式化并将其显示在自定义行中。但是性能很慢。那么，是否有任何通用指南或清单来提高 android 应用程序的性能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T22:29:30.803

为什么不通读 android 开发者文档。有很多方便的提示和技巧可用于优化您的应用程序。

[这里](http://developer.android.com/guide/practices/performance.html)有关于提高性能的一般指南

当您从 Internet 检索数据时，运行后台线程来检索数据非常重要。这将阻止您的界面在接收数据时“挂起”并变得无响应。[这里](http://developer.android.com/guide/practices/responsiveness.html)和[这里](http://developer.android.com/guide/practices/responsiveness.html)有两篇有用的文章

采取措施优化您的用户界面也可能是一个好主意。文章[在这里](http://developer.android.com/tools/debugging/debugging-ui.html)

# c# - ASP.NET MVC 模型与表单元素名称中的破折号绑定

> ID：11173398
> 
> 赞同：13
> 
> 时间：2012-06-23T22:13:53.150
> 
> 标签：c#, asp.net-mvc, model-view-controller, model-binding

我一直在互联网上搜索，试图找到一种方法来将我的表单元素中的破折号容纳到 MVC 2、3 甚至 4 中 ASP.NET 控制器的默认模型绑定行为中。

作为一名前端开发人员，我更喜欢 CSS 中的破折号，而不是驼峰式或下划线。在我的标记中，我想要做的是这样的：

```
<input type="text" name="first-name" class="required" />
<input type="text" name="last-name" class="required" /> 
```

在控制器中，我将传入一个如下所示的 C# 对象：

```
public class Person
{
      public string FirstName { get; set; }
      public string LastName { get; set; }
      //etc...
} 
```

有没有办法通过一些正则表达式或其他行为来扩展`Controller`类以适应这种情况？我讨厌我必须做这样的事情：

```
<input type="text" name="person.firstname" class="required" /> 
```

甚至这个：

```
<input type="text" name="isPersonAttending" class="required" /> 
```

想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-23T22:36:32.287

您始终可以创建自己的模型活页夹。

这是一个实现支持将别名添加到模型属性的活页夹的示例：

[http://ole.michelsen.dk/blog/bind-a-model-property-to-a-different-named-query-string-field/](http://ole.michelsen.dk/blog/bind-a-model-property-to-a-different-named-query-string-field/)

并使用它执行以下操作：

```
[ModelBinder(typeof(AliasModelBinder))]
public class Person
{
      [BindAlias("first-name")]
      public string FirstName { get; set; }
      [BindAlias("last-name")]
      public string LastName { get; set; }
      //etc...
} 
```

**编辑：** 正如博主所说，此实现基于 Andras 对以下 SO 问题的回答： [Asp.Net MVC 2 - Bind a model's property to a different named value](https://stackoverflow.com/questions/4316301/asp-net-mvc-2-bind-a-models-property-to-a-different-named-value#answer-4316327)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-24T06:30:19.523

By creating a custom form value provider you could solve this problem easily. The other advantage is you can avoid polluting all the model properties by decorating custom attributes.

**Custom Form Value Provider**

```
public class DashFormValueProvider : NameValueCollectionValueProvider
{
    public DashFormValueProvider(ControllerContext controllerContext)
    : base(controllerContext.HttpContext.Request.Form, 
    controllerContext.HttpContext.Request.Unvalidated().Form, 
    CultureInfo.CurrentCulture)
    {
    }

    public override bool ContainsPrefix(string prefix)
    {
        return base.ContainsPrefix(GetModifiedPrefix(prefix));
    }

    public override ValueProviderResult GetValue(string key)
    {
        return base.GetValue(GetModifiedPrefix(key));
    }

    public override ValueProviderResult GetValue(string key, bool skipValidation)
    {
        return base.GetValue(GetModifiedPrefix(key), skipValidation);
    }

    // this will convert the key "FirstName" to "first-name".
    private string GetModifiedPrefix(string prefix)
    {
        return Regex.Replace(prefix, "([a-z](?=[A-Z])|[A-Z](?=[A-Z][a-z]))", "$1-").ToLower();
    }
} 
```

**Value Provider Factory**

```
public class DashFormValueProviderFactory : ValueProviderFactory
{
    public override IValueProvider GetValueProvider(ControllerContext controllerContext)
    {
        if (controllerContext == null)
        {
            throw new ArgumentNullException("controllerContext");
        }

        return new DashFormValueProvider(controllerContext);
    }
} 
```

**Global.asax.cs**

```
ValueProviderFactories.Factories.Add(new DashFormValueProviderFactory()); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-04-16T16:24:47.890

对于寻找 ASP.NET Core 解决方案的读者，请尝试其中一个`[From...]`属性。例如：

```
public class Person
{
    [FromForm(Name = "first-name")]
    public string FirstName { get; set; }
    [FromForm(Name = "last-name")]
    public string LastName { get; set; }
    //etc...
} 
```

这些`[From...]`属性在[https://docs.microsoft.com/en-us/aspnet/core/mvc/models/model-binding?view=aspnetcore-3.1#sources](https://docs.microsoft.com/en-us/aspnet/core/mvc/models/model-binding?view=aspnetcore-3.1#sources)进行了简要描述。

# iphone - 检测iOS中安装了哪个版本的应用程序？

> ID：11173404
> 
> 赞同：18
> 
> 时间：2012-06-23T22:14:48.907
> 
> 标签：iphone, ios

我了解可以以编程方式[检测应用程序是否安装在 iPhone 上](https://stackoverflow.com/questions/3808691/detecting-programatically-whether-an-app-is-installed-on-iphone)。我想知道是否可以检测到安装了其他应用程序的版本？

我的应用程序依赖于 Facebook 本地客户端，但如果手机安装了旧版本的 Facebook 应用程序，它的行为就会非常糟糕。所以我希望能够检测到这一点并警告用户。

- 更新 -

评论中暗示，如果不存在相关应用程序的适当版本，我可以首先阻止用户安装我的应用程序。那也将是一个很好的解决方案。如果您知道我如何指定对另一个应用程序版本号的依赖关系，请解释一下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T00:26:06.977

不幸的是，您无法以编程方式读取您的 iOS 设备设置以获取本机应用程序 Facebook 版本（即通过设置、Facebook、版本）。

不过，您可以尝试使用 Facebook 的自定义 URL 方案，如您在自己的问题中所述。

似乎本地 Facebook 应用程序的不同版本要么支持/不支持其自己的自定义 URL 方案。

如3.4 版所述，您可以[：](https://stackoverflow.com/questions/5707722/what-are-all-the-custom-url-schemes-supported-by-the-facebook-iphone-app/5707825#5707825)

```
fb://places 
```

从 4.0 版开始，如此[处](http://wiki.akosma.com/IPhone_URL_Schemes#Registering_your_own_URL_schemes)所述，您可以：

```
fb://place/(fbid) 
```

等等

# ruby-on-rails - Rails - 我应该使用多态关联吗？

> ID：11173412
> 
> 赞同：2
> 
> 时间：2012-06-23T22:16:02.267
> 
> 标签：ruby-on-rails, polymorphic-associations

我的应用程序中有一个学生和教师模型。我希望老师能够创建学生可以多次完成的任务，但我也希望学生能够创建他/她自己的任务。这是我当前的模型结构：

```
class Task < ActiveRecord::Base
 belongs_to :teacher
 belongs_to :student
 has_many :completed_tasks

class Student < ActiveRecord::Base
 belongs_to :teacher
 has_many :tasks
 has_many :completed_tasks

class Teacher < ActiveRecord::Base
 has_many :students
 has_many :tasks

class CompletedTask < ActiveRecord::Base
 belongs_to :student
 belongs_to :task 
```

在我看来，我希望老师能够为他/她的学生添加任务。当学生查看他们的任务时，他们会看到教师的可用任务并且可以添加自己的任务。然后学生在单独的视图中将任务标记为已完成。我应该考虑为此使用多态关联吗？[我的情况似乎与Ryan Bates 的 Railscast #154](http://railscasts.com/episodes/154-polymorphic-association-revised)中使用的情况有点不同，因为教师和学生与任务的交互方式略有不同。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T22:25:18.713

我会使用多态关联`Task`来表示任务的创建者。`Teacher`和之间的关联`Task`可能是不必要的，除非教师可以拥有*并非*由他们创建的可用任务。如果是这种情况，请将当前关联保留给教师，但如果不是，则只需要创建者的关联。

代替`CompletedTask`，我会使用一个名为 的类`Assignment`，它既属于任务又属于学生，并且还有一个`completed`默认为 false 的标志。这允许跟踪哪些学生被分配了哪些任务，这些任务是正在进行还是已完成。

```
class Task < ActiveRecord::Base
  belongs_to :creator, :polymorphic => true

  has_many :assignments
  has_many :assigned_students, :through => :assignments, :source => :student
end

class Student < ActiveRecord::Base
  belongs_to :teacher
  has_many :created_tasks, :as => :creator, :class_name => 'Task'

  has_many :assignments
  has_many :assigned_tasks, :through => :assignments, :source => :task
end

class Teacher < ActiveRecord::Base
  has_many :students
  has_many :created_tasks, :as => :creator, :class_name => 'Task'
end

class Assignment < ActiveRecord::Base
  belongs_to :student
  belongs_to :task

  scope :complete, where(:completed => true)
  scope :incomplete, where(:completed => false)
end 
```

# java - java.lang.unsatisfiedLinkError .so lib Android

> ID：11173418
> 
> 赞同：1
> 
> 时间：2012-06-23T22:17:17.157
> 
> 标签：java, android

我正在尝试加载某人给我的 .so 库，但出现此错误：

> 警告 - 未找到本机 Lmy/pack/Native.init() 的实现错误 - java.lang.unsatisfiedLinkError: init

我把库放在 libs/armeabi

# c++ - cout 没有输出，但 printf 有

> ID：11173422
> 
> 赞同：1
> 
> 时间：2012-06-23T22:17:53.290
> 
> 标签：c++, assembly, printf, cout

我对 C++ 编程非常陌生，但我正在尝试编写一些代码来过滤字符串中的特定单词，然后执行特定操作。由于某种原因，代码看不到字符串中的文本。

```
printf("%s \n", data.c_str());
cout << data; 
```

这绝对没有显示任何内容 - 这意味着我无法使用`.find`或将其写入文件。

```
printf("%s \n", data); 
```

这正是我需要的。

我正在使用汇编将代码写入数据：

```
mov data, EDX 
```

为什么我只能使用最后一种方法？

编辑：数据启动为： `std::string data;`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-02-03T17:03:13.197

如果指向字符串的指针为空，则所有后续对 cout 的调用都将停止工作

```
 const char* s=0;
 cout << "shown on cout\n";
 cout << "not shown" << s << "not shown either\n";
 cout << "by bye cout, not shown\n"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T22:22:01.057

这两个函数调用是不等价的，因为`\n`在`printf`刷新流。尝试：

```
cout << data << endl; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-28T10:52:19.857

## 简而言之

如果你不在**结尾处加上换行符，你会遇到****cout**的问题！

 **## 详细地

尝试将 an 添加`endl`到您的`cout`（例如`std::cout << data << std::endl`）中，或使用以下说明激活 cout 的“立即输出”（不需要先换行）。

```
std::cout << std::unitbuf; 
```

完整示例：

```
std::cout << std::unitbuf;
std::cout << data; 

// ... a lot of code later ...
std::cout << "it still works"; 
```

旁注：顾名思义，这与输出缓冲有关`unitbuf`（如果您想查看此处实际发生的情况）。

这样也可以重写当前行，这是一个很好的例子，你需要这个;-)

## 实际例子

```
using namespace std;

cout << "I'm about to calculate some great stuff!" << endl;
cout << unitbuf;

for (int x=0; x<=100; x++)
{
    cout << "\r" << x << " percent finished!";

    // Calculate great stuff here
    // ...

    sleep(100);  // or just pretend, and rest a little ;-)
}
cout << endl << "Finished calculating awesome stuff!" << endl; 
```

评论：

*   \r （回车）将光标放在行的第一个位置（不换行）
*   如果您在之前写的行中写了较短的文本，请确保在末尾用空格字符覆盖它

在过程中的某处输出：

```
I'm about to calculate some great stuff!
45 percent finished! 
```

..一段时间后：

```
I'm about to calculate some great stuff!
100 percent finished!
Finished calculating awesome stuff! 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-23T23:36:37.060

确定你用过

```
#include <string> 
```

在你的文件头中。有了这个，你应该可以使用

```
std::cout << data << endl; 
```

没有问题。如果您为 std 使用全局命名空间，您可能不需要 std::，但无论如何我还是会使用它来帮助您更快地调试它并消除它作为可能的问题。**

# ios - 将 photoscroller 创建的滚动视图添加到子视图

> ID：11173428
> 
> 赞同：0
> 
> 时间：2012-06-23T22:18:26.017
> 
> 标签：ios, objective-c, iphone, ipad

我正在尝试修改 Apple 的[PhotoScroller 示例](http://developer.apple.com/library/ios/#samplecode/PhotoScroller/Introduction/Intro.html)，以使创建的滚动视图成为子视图，而不是占据整个屏幕的视图。关于如何实现这一点的任何想法？

```
- (void)loadView 
{    
    // Step 1: make the outer paging scroll view
    CGRect pagingScrollViewFrame = [self frameForPagingScrollView];
    pagingScrollView = [[UIScrollView alloc] initWithFrame:pagingScrollViewFrame];
    pagingScrollView.pagingEnabled = YES;
    pagingScrollView.backgroundColor = [UIColor blackColor];
    pagingScrollView.showsVerticalScrollIndicator = NO;
    pagingScrollView.showsHorizontalScrollIndicator = NO;
    pagingScrollView.contentSize = [self contentSizeForPagingScrollView];
    pagingScrollView.delegate = self;

    // When I do this it fails
    [self.view addSubview:pagingScrollView];

    // Step 2: prepare to tile content
    recycledPages = [[NSMutableSet alloc] init];
    visiblePages  = [[NSMutableSet alloc] init];
    [self tilePages];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T22:25:11.460

您只需要将滚动视图的框架修改为您想要的位置和大小：

这是在示例中设置它的视图控制器中的行

```
pagingScrollView = [[UIScrollView alloc] initWithFrame:pagingScrollViewFrame]; 
```

例如，这里是一个带有一些硬编码值的示例帧：

```
CGRect scrollFrame = CGRectMake(100,100,100,100);
pagingScrollView = [[UIScrollView alloc] initWithFrame:scrollFrame]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T03:11:45.373

所以，我发现我可以通过将方法从 loadView 更改为 viewDidLoad 来将 scrollView 添加为子视图。

我不知道为什么会这样，但确实如此。但是我很想知道为什么会这样……

# python - ImportError：无法在 Eclipse/PyDev 中导入名称 urandom

> ID：11173433
> 
> 赞同：1
> 
> 时间：2012-06-23T22:19:16.630
> 
> 标签：python, pydev

当我尝试在 Eclipse(PyDev) 中运行以下脚本时：

```
import subprocess
subprocess.call("/usr/local/bin/mitmdump") 
```

返回一个错误：

```
Traceback (most recent call last):
  File "/usr/local/bin/mitmdump", line 19, in <module>
    from libmproxy import proxy, dump, cmdline
  File "/Library/Python/2.7/site-packages/libmproxy/proxy.py", line 22, in <module>
    import shutil, tempfile, threading
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/tempfile.py", line 34, in <module>
    from random import Random as _Random
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/random.py", line 47, in <module>
    from os import urandom as _urandom
ImportError: cannot import name urandom 
```

如果我从 bash 运行相同的脚本，它工作正常。是什么赋予了？

```
$ python
Python 2.7.3 (v2.7.3:70274d53c1dd, Apr  9 2012, 20:52:43) 
[GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import subprocess
>>> subprocess.call("/usr/local/bin/mitmdump")
127.0.0.1 GET http://google.com/ 
```

[Ubuntu Python ImportError cannot import urandom](https://stackoverflow.com/questions/10366821/python-importerror-cannot-import-urandom-since-ubuntu-12-04-upgrade)似乎有一个相关的问题，因为Ubuntu 12.04升级但我的环境是OSX。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T10:57:59.423

要正确诊断，请执行以下操作：

编辑 /usr/local/bin/mitmdump，然后：

```
try:
    from libmproxy import proxy, dump, cmdline
except ImportError:
    import sys
    print 'Executable:', sys.executable
    print '\n'.join(sorted(sys.path))
    raise 
```

然后检查你所看到的是否真的是你所期望的......（你可以在命令行中执行相同的打印，直到没有引发异常并检查有什么区别，然后可能在 Eclipse 中更新你的 PYTHONPATH /PyDev）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-29T06:25:07.217

我有相同的症状，但在 Mac OS X 的命令行上的 python 中。在这里找到了答案：[Python: cannot import urandom module (OS X)](https://stackoverflow.com/questions/12658141/python-cannot-import-urandom-module-os-x)

不确定这是否与您遇到的问题相同或如何`hash -r`从 Eclipse 调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T04:08:29.467

我想你的 python 路径是正确设置的。如果是这样，python 找不到模型，因此无法导入。

# android - 当 TableRow 中有一个按钮时，它会增加

> ID：11173438
> 
> 赞同：0
> 
> 时间：2012-06-23T22:20:45.937
> 
> 标签：android, android-layout

我有以下基本 XML：

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<TableRow
    android:background="#FF0000"
    android:layout_weight="0.8">
    <TextView
        android:text="Bottom menu" />
</TableRow>

<TableRow
    android:background="#0000FF"
    android:layout_weight="0.2">
    <Button
       android:text="Prev"
       android:layout_width="wrap_content"
       android:layout_height="wrap_content" />
</TableRow> 
```

模拟器上TableRow的高度大约是3cm，如果我把Button改成TextView，就是2.5cm。有人可以解释为什么 TableRow 会自动增加大小吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T22:40:40.123

这是因为您已将 layout_height 设置为“wrap_content”，这是我的猜测（在寻求故障排除帮助时，您真的不应该去掉任何东西）。

它调整自己的大小以适应它所包含的内容，并且按钮具有 textview 没有的填充。

# javascript - 在 jQuery Masonry 中附加项目的问题

> ID：11173442
> 
> 赞同：1
> 
> 时间：2012-06-23T22:21:17.593
> 
> 标签：javascript, jquery, jquery-masonry

我正在尝试使用一堆带有一些包含图像的瓷砖进行砌体布局。这里大致是我的代码：

```
var $mainContent = $('#main-content');

$mainContent.imagesLoaded(function() {
  $mainContent.masonry()
});

loadMore = function() {
  $.ajax({
    url: '/things',
    success: function (data) {
      var $data = $(data);
      $data.imagesLoaded(function() {
        $mainContent.append($data).masonry('appended', $data, true)
      })
    }
  })
}

$('#load-more').on('click', loadMore) 
```

但是，当我运行它时，我在 Chrome 的控制台中收到以下错误：

```
Uncaught TypeError: Cannot read property 'width' of undefined 
```

痕迹：

```
bB jquery.min.js:2
f.each.f.cssHooks.(anonymous function).get jquery.min.js:4
f.extend.css jquery.min.js:4
f.each.f.fn.(anonymous function) jquery.min.js:4
e.extend.access jquery.min.js:2
f.each.f.fn.(anonymous function) jquery.min.js:4
f.each.f.fn.(anonymous function) jquery.min.js:4
$.Mason._placeBrick jquery.masonry.js:246
$.Mason.layout jquery.masonry.js:172
$.Mason._appended jquery.masonry.js:352
$.Mason.appended jquery.masonry.js:341 
```

我正在使用 Masonry v.2.1.05 和 jQuery v1.7.2

但是，当我改为`reload`代替 时`appended`，它的工作方式与演示中的一样，但我希望从底部填充帖子，并且我不希望重新计算所有帖子。

你知道发生了什么事吗？

我也把这个问题放在了[github](https://github.com/desandro/masonry/issues/213)上，但我还没有得到回复。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-26T20:39:59.407

这正是我需要动画并正确渲染各种大小的图像：

```
var el = jQuery(html);
el.imagesLoaded(function() {
    $('#container').append(el).masonry( 'appended', el );
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-23T11:18:32.533

试试这个解决方案......这肯定会奏效。

```
//Initiate your maosnry
$container = $('#container');
$container.imagesLoaded(function(){ 
    $container.masonry({
        itemSelector: '.item'
    }); 
});

//and on ajax call use this to append or prepend
$container.append($data).imagesLoaded(function(){
    $container.masonry( 'appended', $data, true );
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T01:07:28.330

我不确定这是否是问题的答案，但是......请耐心等待我在这里大声思考......

鉴于它`.append($data)`出现*在*处理程序内部，`$data.imagesLoaded`尚不清楚该事件将如何触发。我说，根据我的理解，在基于`data`（可能是 HTML 字符串）的片段被加载到 DOM（使用`.append()`）之前，浏览器不会尝试加载图像。

以下会更有意义：

```
loadMore = function() {
    $.ajax({
        url: '/things',
        success: function (data) {
            var $data = $(data);
            $data.imagesLoaded(function() {
                $mainContent.masonry('appended', $data, true);
            }).appendTo($mainContent);
        }
    });
}; 
```

也就是说，在您的代码中，`imagesLoaded`事件必须触发，否则为什么会出现错误？也许图像*确实会*加载到未附加的片段中！

不管怎样，试试我的版本。我想它会起作用或给出与以前相同的错误。

# c++ - Windows 上的临时文件和文件夹

> ID：11173444
> 
> 赞同：0
> 
> 时间：2012-06-23T22:21:29.627
> 
> 标签：c++, windows, winapi, temp

通过多次加载 DLL 来模拟多线程（它就是为此而设计的）。由于`LoadLibrary()`实际上不允许这样做，因此 DLL 通过`GetTempPath()`和将自身复制到一个临时文件中`GetTempFileName()`。

这是一个小文件，在线程破坏时它会释放库并删除临时文件。现在的问题是线程数是可配置的（疯子可以选择 50、100 或更多），这基本上暴露了运行不稳定、崩溃和不通过通常的“删除临时文件”例程的风险。

如果我把那些临时文件留在那儿可以吗？操作系统通常会自行清理吗？或者我应该写一个自动清理程序？如果是，我怎样才能保存另一个临时文件来保存这些文件的列表，而不是受到 UAC 限制或其他限制？

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T22:34:48.613

您的 LoadLibrary/多线程讨论让我感到困惑，但没关系。

Windows 上的临时文件通常不会被创建它们的进程以外的任何东西删除。如果用户运行“磁盘清理”实用程序或类似工具，他可能会自动为他删除这些文件。我不认为这种情况经常发生。

最佳方法。让您的应用程序在临时文件夹（以及每个流程实例的可能子文件夹）中创建一个子目录。当您的应用程序退出时，它会通过 DeleteFile 清理它自己的一组临时文件。在应用程序重新启动时，它可以有一些逻辑来清理由于前一个进程崩溃而仍然徘徊的文件夹和文件。

您还可以查看在 CreateFile 上使用 FILE_ATTRIBUTE_TEMPORARY 标志。

您还可以考虑为您的流程设置一个全局异常处理程序。处理程序将在崩溃退出之前删除它自己的临时目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T09:10:57.283

您可以使用 FILE_FLAG_DELETE_ON_CLOSE 参数来创建文件吗？

# php - 使用 codeIgniter 查询结果

> ID：11173445
> 
> 赞同：1
> 
> 时间：2012-06-23T22:21:37.660
> 
> 标签：php, mysql, codeigniter

这是我第一次使用codeIgniter，我尝试构建一个简单的数据库驱动应用程序。首先是模型：

```
class News_model extends CI_Model {

public function __construct()
{
    $this->load->database();
}

public function get_news()
   {

    $query = $this->db->get('news');
    return $query->result_array();

   }
   } 
```

第二个控制器

```
class News extends CI_Controller {

public function __construct()
{
parent::__construct();
$this->load->model('news_model');
}

public function index()
{
$data['news'] = $this->news_model->get_news();
$data['title'] = 'News archive';

$this->load->view('templates/header', $data);
$this->load->view('news/index', $data);
$this->load->view('templates/footer');
} 
```

视图“索引”：

```
<?php foreach ($news as $news_item): ?>

 <h2><?php echo $news_item['title'] ?></h2>
 <div id="main">
    <?php echo $news_item['text'] ?>
 </div>
 <p><a href="news/<?php echo $news_item['slug'] ?>">View article</a></p>

<?php endforeach ?> 
```

当我运行代码时，它显示页眉和页脚，但没有显示数据库记录。如果我将打印语句放在 foreach 外部的视图中，它可以工作，但不能在 foreach 内部。我使用 if($news) 来确定查询是否检索到任何结果，但没有检索到结果。

我怎么知道为什么没有从数据库中检索到结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-30T04:52:24.627

检查 new 是否为空，只需

```
print_r($news); 
```

或者您可以修改您的视图：

```
<?php if(!empty($new)): ?>
  <?php foreach ($news as $news_item): ?>

   <h2><?php echo $news_item['title'] ?></h2>
   <div id="main">
      <?php echo $news_item['text'] ?>
   </div>
   <p><a href="news/<?php echo $news_item['slug'] ?>">View article</a></p>

  <?php endforeach ?>
<?php else: ?>
  Empty news 
<?php endif; ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-30T17:02:19.897

您需要在 foreach 中调用另一个 foreach。例子：

```
foreach ($result as $row) {
        foreach ($row as $key => $val) {
            if ($key === "reservation_info") {
                $data['decoded'] = json_decode($val);
            } else {
                $data[$key] = $val;
            }
        }
    } 
```

我会在视图中使用“$ val”值。只需将它们称为变量，就像这样

```
//in the view
echo $decoded
echo $firtname 
```

... 等等

# linux - 如何为 Git 命令设置自动完成功能？

> ID：11173447
> 
> 赞同：50
> 
> 时间：2012-06-23T22:21:47.997
> 
> 标签：linux, git, bash, debian

我有 Git（版本 1.7.2.5）bash 完成在我的 Debian 挤压（6.0）上工作。Git 是用 aptitude 安装的，我使用的是标准的 debian `bash`，它支持命令行自动完成。

现在，我刚刚在另一台机器（Lenny/Debian 5.0）上安装了 Git（1.5.6.5）并且没有自动完成功能。

1.  为什么 Git 自动完成功能在第二台机器上不起作用？我该如何诊断？

2.  是什么在我的机器上完成工作？我已经查找了该文件`git-completion.bash`，但它似乎不在我的机器上。Git 是如何完成的？

3.  如何将 git complete 带到另一台机器上？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-06-23T22:41:03.527

您需要`source /etc/bash_completion.d/git`启用 git 自动完成功能。

在我`.bashrc`的情况下，它完成了：

```
for file in /etc/bash_completion.d/* ; do
    source "$file"
done 
```

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2012-07-01T15:38:38.283

将以下行放入您的`~/.bashrc`

```
if [ -f /etc/bash_completion ]; then
    . /etc/bash_completion
fi 
```

脚本/程序`/etc/bash_completion`已经包含了脚本，`/etc/bash_completion.d`并且还定义了包含的脚本所需的一些功能。

* * *

## 回答 #3

> 赞同：35
> 
> 时间：2016-11-10T19:55:58.887

如果丢失，您需要安装此软件包。然后注销并登录。

```
apt-get install bash-completion 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2013-01-31T20:56:47.920

在 Debian 上激活 Git 的 bash 自动完成的最短方法是添加

```
source /etc/bash_completion.d/git 
```

到`~/.bashrc`（并重新启动终端）。

另请参阅：“Pro Git”-> 2.7 Git 基础知识 - 提示和技巧 ->[自动完成](http://git-scm.com/book/en/Git-Basics-Tips-and-Tricks#Auto-Completion)。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-11-27T12:59:02.747

对于**Manjaro**和其他基于 Arch 的发行版。我知道这是关于 debian，但大多数事情是相同的，但有时不是。无论您使用什么操作系统，最终都会出现在这里。

在您的`~/.bashrc`添加中：

```
source /usr/share/git/completion/git-completion.bash 
```

然后在终端

```
$ source ~/.bashrc 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-12-25T17:31:21.383

对于 Ubuntu/Debian

通过以下命令安装 Git 和 bash-completion：

```
sudo apt-get install git bash-completion 
```

我认为你不需要做任何其他事情。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-05-21T08:49:39.050

使用 Notepad++ 编辑您的 ~/.bashrc 文件。将该行放在脚本的底部，并在行首添加 #。保存文件。例如：# source C:\cygwin64/etc/bash_completion.d/git

不要忘记将整个文件路径放在'source'之后和'/etc/'前面例如，我的包含'etc'文件夹的cygwin64文件夹在我的c盘中，所以我的文件路径是c:\cygwin64 /etc 因此我在 bashrc 文件中包含的行是：

```
# source c:\cygwin64/etc/bash_completion.d/git 
```

保存 .bashrc 文件。打开 Cygwin 终端……砰！是时候走了 然后我输入了以下命令并且它起作用了。 `git clone git:\/\/github.com/magnumripper/JohnTheRipper -b bleeding-jumbo JtR-Bleeding`

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-11-20T19:49:01.083

最新版本的 Ubuntu（在 20.04 上观察）似乎将完成分成多个路径。对于 Ubuntu 20.04，我必须将以下内容添加到我的`.bashrc`（取自 中的默认 bashrc `/etc/bash.bashrc`）：

```
if ! shopt -oq posix; then
  if [ -f /usr/share/bash-completion/bash_completion ]; then
    . /usr/share/bash-completion/bash_completion
  elif [ -f /etc/bash_completion ]; then
    . /etc/bash_completion
  fi
fi 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-10-19T07:53:33.530

获取 git 自动完成脚本：

```
curl https://raw.githubusercontent.com/git/git/master/contrib/completion/git-completion.bash -o ~/.git-completion.bash 
```

添加到主目录中的 .bash_profile ：

```
if [ -f ~/.git-completion.bash ]; then
  . ~/.git-completion.bash
fi 
```

在此之后获取您的 .bash_profile ，例如：

```
. ~/.bash_profile 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-05-09T07:18:44.427

有时 git auto-complete 会消失，因为您不小心删除了 ~/.bashrc 文件。检查 bashrc 文件是否在您的主目录中。如果没有，您可以随时从以下位置复制它：

```
/etc/skel/.bashrc 
```

# ruby - 在 Ruby 中交换哈希键和局部变量名

> ID：11173449
> 
> 赞同：4
> 
> 时间：2012-06-23T22:22:21.833
> 
> 标签：ruby, variables, hash

> **可能重复：**
> [是否有与 PHP 提取物等效的 Ruby？](https://stackoverflow.com/questions/6428433/is-there-a-ruby-equivalent-to-phps-extract)

有没有办法获取 Ruby 哈希，例如：

```
myhash = {a: 12, b:24, c:36} 
```

并将其转换为一组局部变量（显然没有手动进行分配）？结果应该就像我执行了这些语句一样：

```
a = 12
b = 24
c = 36 
```

同样，我可以获取一组已定义的局部变量并制作一个哈希，其中键是变量名，值是变量值（同样，没有字面上写出哈希）？我以前从未见过这样的事情，所以我猜答案是否定的，但这会很好......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T00:35:20.783

您可能已经知道这一点，但为了记录：如果您愿意创建实例变量而不是本地变量，那么此函数将起作用：

```
def f x
  x.each do |k, v|
    instance_variable_set "@#{k}", v
  end
end

f :abc => 123, 'def' => 456

> @abc
=> 123 
> @def
=> 456 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T23:21:20.293

你可以做很多这样的事情[`Kernel.eval`](http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-eval)：

```
a = 1; b = 2; c = 3

local_variables.grep(/^[a-z]\w*/)
=> ["a", "b", "c"]

# Map local variables to hash
@h = Hash[local_variables.grep(/^[a-z]\w*/).map { |var| [var, eval(var)] }]     
=> {"a"=>1, "b"=>2, "c"=>3}

# Map hash to local variables
@b = binding
@h.each { |k,v| eval("#{k}_new = #{v + 100}", @b) }

local_variables.grep(/^[a-z]\w*/)
=> ["a", "b", "c", "a_new", "b_new", "c_new"]

[a_new, b_new, c_new]
=> [101, 102, 103] 
```

# google-app-engine - com.google.appengine.api.utils.FutureWrapper.get(FutureWrapper.java:90) 处的 java.lang.NullPointerException

> ID：11173452
> 
> 赞同：0
> 
> 时间：2012-06-23T22:22:51.387
> 
> 标签：google-app-engine

我时不时地遇到这个错误。我通常最终会清理所有数据库。可能是什么原因？

这是在 Win XP SP3、GAE 1.6.5、Objectify 3.0、GWT 2.4 上。

```
QueryResultIterator<Key<x>> it = query.fetchKeys().iterator(); 
ArrayList<Key<x>> keys = new ArrayList<Key<x>> (num);          
while (it != null && it.hasNext()) {                      <== error      
    keys.add(it.next());
} 
```

这是错误 -

```
Caused by: java.lang.NullPointerException
    at com.google.appengine.api.utils.FutureWrapper.get(FutureWrapper.java:90)
    at com.google.appengine.api.utils.FutureWrapper.get(FutureWrapper.java:90)
    at com.google.appengine.api.datastore.FutureHelper.getInternal(FutureHelper.java:72)
    at com.google.appengine.api.datastore.FutureHelper.quietGet(FutureHelper.java:33)
    at com.google.appengine.api.datastore.QueryResultsSourceImpl.peekQueryResultAndIfFirstRecordIndexList(QueryResultsSourceImpl.java:175)
    at com.google.appengine.api.datastore.QueryResultsSourceImpl.loadMoreEntities(QueryResultsSourceImpl.java:111)
    at com.google.appengine.api.datastore.QueryResultsSourceImpl.loadMoreEntities(QueryResultsSourceImpl.java:98)
    at com.google.appengine.api.datastore.QueryResultIteratorImpl.ensureLoaded(QueryResultIteratorImpl.java:164)
    at com.google.appengine.api.datastore.QueryResultIteratorImpl.hasNext(QueryResultIteratorImpl.java:66)
    at com.googlecode.objectify.util.TranslatingIterator.hasNext(TranslatingIterator.java:29) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T02:49:19.537

这是 GAEJ 中的一个错误。我一直有这个，只需等待一天，它就会起作用。不要向服务器发送任何命中。我知道这有点糟糕。更糟糕的是，我是付费客户。

每次发生时，我都会点击“报告生产问题”，并祈祷有人会调查它。

# android - 动态添加元素的 setOnClickListener 范围

> ID：11173453
> 
> 赞同：0
> 
> 时间：2012-06-23T22:23:07.723
> 
> 标签：android, event-listener

我正在使用 android 以编程方式和动态添加一些元素（按钮和文本视图）。我还需要为这些按钮中的每一个设置 setOnClickListener 事件，并从该事件中对单击按钮执行一些操作：

```
do
{
    EditText txt1 = new EditText(this);
    EditText txt2 = new EditText(this);
    Button showtxt = new Button(this);
    linearLayout.addView(showtxt );
    linearLayout.addView(txt1);
    linearLayout.addView(txt2);
    showtxt.setOnClickListener(new View.OnClickListener() 
    {
       public void onClick(View v) 
       {
           String aaa= txt1 .getText().toString();//HOW TO ACCESS txt1 and txt2 from here
           String bbb= txt2 .getText().toString(); 
       }
    }
}
while(somecondition) 
```

我对android几乎是新手。点击回调函数中如何访问txt1和txt2？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T22:33:48.313

您需要定义它们将具有类范围的变量：

```
public class Example extends Activity {
    EditText txt1;
    EditText txt2; 

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        txt1 = new EditText(this);
        txt2 = new EditText(this);
        ... 
```

现在您的 onClick 函数将能够看到`txt1`和`txt2`。

**或者**

由于您似乎在一个 LinearLayout 中创建了很多`txt1`，因此`txt2`您可以将 Button 的引用传递给它的 EditText：

```
do {
    ...
    // EditText[] array = { txt1, txt2 };
    //  is the short version of
    EditText[] array = new EditText[2]; 
    array[0] = txt1;
    array[1] = txt2;

    showtxt.setTag(array);
    showtxt.setOnClickListener(new View.OnClickListener() {
       public void onClick(View v) {
           EditText[] array = (EditText[]) v.getTag();
           String aaa = array[0].getText().toString();
           String bbb = array[1].getText().toString();
           Log.v("Example", aaa + " " + bbb);
       }
    });
} while(some condition) 
```

这可能并不理想，但是没有任何进一步的背景，我无法猜测您的最终目标。希望有帮助！

**最后的建议**

如果我们连续调用 Button 和两个 EditText，您可以将每一行存储在一个 ViewGroup 或它自己的 View 中。假设您想为每一行设置背景颜色：

```
View row = new View(this); // or this could be another LinearLayout
row.setBackgroundColor(0x0000ff);

// Create and add the Button and EditTexts to row, as in row.addView(showtxt), etc
...
linearLayout.addView(row);

showtxt.setOnClickListener(new View.OnClickListener() {
    public void onClick(View v) {
        View row = v.getParent()
        String aaa = ((EditText) row.getChildAt(1)).getText().toString();
        String bbb = ((EditText) row.getChildAt(2)).getText().toString();
        Log.v("Example", aaa + " " + bbb);
    }
}); 
```

# typing - BASIC 使用什么打字系统？

> ID：11173455
> 
> 赞同：10
> 
> 时间：2012-06-23T22:24:04.337
> 
> 标签：typing, basic

我注意到，我找不到任何地方可以给我上述问题的明确答案。当我注意到在声明变量时不必在 QBasic 中声明变量的类型时，我首先想知道这一点，尽管您可以在变量的名称中添加后缀以确保它是特定类型的。

此外，由于 BASIC 的某些方言被解释而其他方言被编译，这会影响打字系统吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-23T22:43:57.723

BASIC 的风格有很多，有些只是历史性的，有些仍在使用中，不可能给出一个真正的答案。

一些旧的 BASIC（行号 BASIC）有两种数据类型：字符串或整数。Apple-II 计算机附带的原始 BASIC 是“整数 BASIC”。后来的 BASIC 引入了浮点数，通常是单精度浮点数。TI-99/4a 附带的 BASIC 是 80 年代早期浮点 BASIC 的一个例子。`$`“Way back when”，您将创建一个带引号的字符串文字，以及一个在标识符名称后面带有印记的字符串变量。没有`$`符号的变量通常默认为给定基本类型支持的数字变量类型（整数或浮点数）。例如，GWBasic 将默认为浮点，除非您指定`%`sigil，意思是“整数”。TI Extended Basic 没有整数类型，但浮点数字类型有 15 个有效数字，如果我记得的话（无法承受浮点数学错误）。

这些早期的基础基本上是静态类型的，尽管这种区别远不如在更强大的语言中有用。数据类型的选择很少：字符串、数字（有时是 Int，有时是 FP），有时还可以指定数字是 Int 还是 FP。在幕后，一些甚至根据需要在整数和浮点之间自由转换。通常这种幕后转换没有得到很好的记录。

但那是 80 年代的情况，当时每个人都拥有一台家用电脑，而且标准很宽松。每个硬件制造商似乎都对 BASIC 的工作方式有自己的看法。

更现代的 BASIC 更强大，并且允许对变量类型进行更严格的控制（在需要时）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T22:38:04.793

BASIC 的早期方言始终是静态类型的。数值变量、字符串变量和数组都需要不同的语法。此外，名称的长度通常仅限于一个符号。最常用的语法仅`V`用于数字，`V$`因为字符串和数组分别用`DIM`.

由于我已经有 15 年没有使用 BASIC 编程了，所以我无法确定现代方言中发生了什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T08:09:16.800

多值数据库系统中使用的增强版 BASIC 使用动态类型。这意味着编译器会根据语句的逻辑和上下文来决定如何处理您的变量。

双引号中的任何内容都是字符串，而不是双引号中的任何数值都是数字。为了以双精度或浮点数的形式写入数字数据，您可以使用各种格式表达式来实现这一点，并将其应用于变量。

最终，所有内容都在数据库级别保存为 ASCII 字符串。因此，开发人员在业务逻辑级别强制执行类型，而不是在数据库强制执行它。

# jquery - jQuery Mobile + Flexslider - 回调后带有渐进式图像加载 AJAX 的幻灯片

> ID：11173456
> 
> 赞同：7
> 
> 时间：2012-06-23T22:24:04.710
> 
> 标签：jquery, jquery-mobile, flexslider

我在回调后重新初始化 flexslider 上的新幻灯片时遇到了问题，并且 4 张幻灯片被滑动/使用，它不起作用。

有一个 jsfiddle 你可能想检查它。

[http://jsfiddle.net/mtgv7/3/](http://jsfiddle.net/mtgv7/3/)

[另请注意，他们通过https://github.com/woothemes/FlexSlider](https://github.com/woothemes/FlexSlider)实现了新功能是 slide.add() 和 slide.remove()没有关于这些新功能的更多信息。我不知道如何使用它们，然后我尝试了它，但它没有用。

我需要一个类似循环的功能，当您向后滑动时，它会恢复旧幻灯片并删除新幻灯片，然后向前滑动，由于移动设备上的 DOM 内存性能，它会删除旧幻灯片并添加新幻灯片。

任何帮助或建议，如 iframe、ajax 加载 HTML 将不胜感激。

谢谢你！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-01T03:21:02.483

我能够通过一些属性探索来修复它：

[http://jsfiddle.net/mtgv7/10/](http://jsfiddle.net/mtgv7/10/)

```
end: function(slider){    
    // remove all but the last slide
    slider.slides.not(":last").map(function(idx, slide) { slider.removeSlide(slide); });
    slider.currentSlide = 0;
    slider.count = 1; // 1 because we left 1 slide
    // add slides here
    slider.addSlide('<li>...');
} 
```

如果要删除所有幻灯片，只需`.not(":last")`从第一部分中删除并设置`slider.count = 0`.

`removeSlide`和函数似乎有一个错误`addSlide`，所以我已经重置了这些值并且它起作用了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-01T01:41:45.767

我挖了代码，发现**end**参数传递了一个**滑块**对象，可以调用 addSlide 函数。

```
$(window).load(function() {
  $('.flexslider').flexslider({
    animation: "slide",
    controlNav: false,
    directionNav: true,
    slideshow: false,
    animationLoop: false,
    end: function(slider){
      //When 4 slides are done, it creates a callback function, but the slider is broken.             
      alert("Callback after of 4 slides");
      slider.addSlide('<li><img  title="Random 2." src="http://i.imgur.com/i32ru.jpg"> <p class="flex-caption">Captions and cupcakes. Winning combination.</p> </li>');
      slider.addSlide('<li><img  title="Random 2." src="http://i.imgur.com/6sMlb.jpg"> <p class="flex-caption">Captions and cupcakes. Winning combination.</p> </li>');
   }  
  });
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-13T20:21:55.593

使用偏移功能`slider.addSlide`来指定新幻灯片的索引。例如：

```
slider.addSlide('<li><img  title="Random 2." src="http://i.imgur.com/i32ru.jpg"> <p class="flex-caption">X</p> </li>', **slider.currentSlide+1**); 
```

# c# - 使用获取嵌入式字体的方法导致受保护的内存错误

> ID：11173457
> 
> 赞同：0
> 
> 时间：2012-06-23T22:24:10.547
> 
> 标签：c#, memory, fonts, protected

我正在使用此代码来获取嵌入式字体：

```
/// <summary>
    /// Returns an Embedded Font
    /// </summary>
    /// <param name="ImagePath">String begins with namespace e.g MyProgram.Image.png</param>
    /// <returns></returns>
    public static Font GetEmbeddedFont(string FontPath, float Size)
    {
        Font _font = null;
        Thread getFontThread = new Thread(() => GetFont(FontPath, Size, out _font));
        getFontThread.Start();
        getFontThread.Join();
        return _font;            
    }
    #region GetFont
    private static void GetFont(string FontPath, float Size, out Font FontOut)
    {
        Font fnt = null;
        Assembly asm = Assembly.GetExecutingAssembly();
        Stream resStream = asm.GetManifestResourceStream(FontPath);
        if (null != resStream)
        {
            // 
            // GDI+ wants a pointer to memory, GDI wants the memory.
            // We will make them both happy.
            //
            // First read the font into a buffer
            byte[] rgbyt = new Byte[resStream.Length];
            resStream.Read(rgbyt, 0, rgbyt.Length);
            resStream.Close();
            // Then do the unmanaged font (Windows 2000 and later)
            // The reason this works is that GDI+ will create a font object for
            // controls like the RichTextBox and this call will make sure that GDI
            // recognizes the font name, later.
            uint cFonts;
            AddFontMemResourceEx(rgbyt, rgbyt.Length, IntPtr.Zero, out cFonts);
            // Now do the managed font
            IntPtr pbyt = Marshal.AllocCoTaskMem(rgbyt.Length);
            if (null != pbyt)
            {
                Marshal.Copy(rgbyt, 0, pbyt, rgbyt.Length);
                m_pfc = new PrivateFontCollection();
                m_pfc.AddMemoryFont(pbyt, rgbyt.Length);
                Marshal.FreeCoTaskMem(pbyt);
            }
        }

        if (m_pfc.Families.Length > 0)
        {
            // Handy how one of the Font constructors takes a
            // FontFamily object, huh? :-)
            fnt = new Font(m_pfc.Families[0], Size);
        }
        m_pfc.Dispose();    
        FontOut = fnt;            
    } 
```

我使用 Thread 尝试等待它完成，因为如果在很短的时间内多次调用此方法，似乎会发生错误。

如何阻止此错误的发生，我认为这与彼此快速连续调用的方法有关。

我在这里得到例外：

```
_font = value;
            using (Graphics g = _parent.CreateGraphics())
            {
                SizeF soize = g.MeasureString(_text, _font);
                _size = new Size((int)soize.Width, (int)soize.Height);
                _width = _size.Width;
                _height = _size.Height;
            } 
```

上线 g.MeasureString(_text, _font);

但是我知道错误出现在 GetEmbeddedFont 方法中，因为如果使用 GetEmbeddedFont 方法设置字体，它只会引发错误。

它一次可以正常工作，但是如果在第一次之后不久第二次使用它，它将引发错误。

如果我调试代码，_font 会返回：

```
{Name = '((System.Drawing.Font)(_font)).fontFamily.Name' threw an exception of type 'System.ArgumentException' Size=15.0} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T19:00:46.180

AddMemoryFont() 存在文档问题，它没有指定指针需要保持有效多长时间。我一直选择保守的路线，并确保在程序停止使用私有字体之前不释放*内存*。效果很好，没有访问冲突。

因此，我强烈建议您删除 Marshal.FreeCoTaskMem() 调用。要么完全，当程序终止时，Windows 会自动清理，或者将其移至 FormClosed 事件。您的 m_pfc.Dispose() 调用也是如此。在你完成之前不要释放资源。

# macos - OSX Homebrew 错误：未初始化的常量 MACOS

> ID：11173458
> 
> 赞同：9
> 
> 时间：2012-06-23T22:24:12.057
> 
> 标签：macos, homebrew

我搜索了一下，似乎找不到任何其他人有这个问题的记录。

每当我尝试跑步时

```
$ brew update 
```

我得到了奖励

```
/usr/local/bin/brew:34: uninitialized constant MACOS (NameError) 
```

这不是我的机器，我通常在 Linux 系统上开发，所以这对我来说有点奇怪。

任何帮助将不胜感激！请告诉我是否应该提供任何其他信息。同样，我不习惯自制软件或 OSX。

**应JameA** 的要求进行编辑

```
xiao:~ patrick$ brew doctor
/usr/local/bin/brew:34: uninitialized constant MACOS (NameError)
xiao:~ patrick$ brew --config
/usr/local/bin/brew:34: uninitialized constant MACOS (NameError) 
```

...不确定我是否喜欢整个“在这里，将这台 macbook 用于项目，效果更好”的东西...

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-01-27T17:02:16.853

我很确定这是因为从更早的版本升级到 Homebrew 0.9.5 失败的根本原因。基本上，如果你运行`brew update`相对于`sudo brew update`文件的一部分进行更新，而其他的则没有。这对我有用：

1.  编辑`/usr/local/bin/brew`（它只是一个 Ruby 文件，不是编译的二进制文件，所以任何文本编辑器都可以）。你会发现一个像这样的块：

    ```
    if MACOS and MACOS_VERSION < 10.5
      abort <<-EOABORT.undent
        Homebrew requires Leopard or higher. For Tiger support, see:
        https://github.com/mistydemeo/tigerbrew
      EOABORT
    end 
    ```

    注释掉这个。即使您不了解 Ruby，您也可以直观地知道它在做什么——它正在检查您是否拥有当前版本的 OSX。假设您*确实*拥有此版本，则无需进行此健全性检查。Brew 仍然坏掉了，但至少现在它会加载到足以给出错误消息的程度。

2.  运行`sudo brew update`，*剧透警报*：它失败了，但这次有一个有意义的错误消息：

    ```
     $ brew update
     error: Your local changes to the following files would be overwritten by merge:
     [giant list of files here] 
    ```

    好吧，今天我了解到这`brew update`只是一个包装器，`git pull`因为任何使用过 git 的人都知道该错误消息。我们也可以解决这个问题。

3.  切换到 homebrew git 存储库`cd /usr/local`并给出命令`git reset --hard FETCH_HEAD`。 [这件作品在这里找到](https://github.com/Homebrew/homebrew/wiki/Common-Issues#wiki-brew-update-complains-about-untracked-working-tree-files)。

4.  发出命令`sudo brew update`。Homebrew 现在应该成功更新并正常工作！

一旦系统再次运行，您实际上可以看到为什么会发生这样的错误。一方面，`usr/local/bin/brew`它已被[完全重写](https://gist.github.com/MKorostoff/8652464)，甚至不再是 Ruby，并且它的大部分配置已被移入`/usr/local/Library/brew.rb`不再使用常量`MACOS`或`MACOS_VERSION`常量，因为它们已被更面向对象`OS.mac`的`MacOS.version`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-23T23:46:19.197

`MACOS`常数设置在中`globals.rb`。看来您可能安装了 Homebrew 安装失败。

检查输出以`brew doctor`获取任何建议。

如果这没有帮助，请更新`brew --config`.

如果一切都失败了，您可能想尝试重新安装 Homebrew。

* * *

**更新：**

由于这是以前用户的机器，请确保您的用户是*/usr/local*和其中所有内容的所有者。修复它`sudo chown -R $USER /usr/local`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-04-25T17:55:46.070

当我使用 Ctrl-D 中途终止安装时，我遇到了类似的问题。发布时，每当我尝试安装任何东西时，都会出现以下错误

```
uninitialized constant Homebrew::CLI::Parser::ARGV_WITHOUT_MONKEY_PATCHING 
```

作为修复，我去了安装自制软件的目录，然后重置 HEAD。

```
cd /usr/local/Homebrew
git status 
git checkout . 
```

然后它开始神奇地工作。 [![将 Homebrew 重置为 master](../Images/fcd5ac467622f9d37b8fea6bf2678020.png)](https://i.stack.imgur.com/oLoFb.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-23T01:34:17.197

我在安装 brew 时遇到了类似的错误。我从 MACOS 行开始删除了 /usr/local/bin/brew 脚本中的 5 行小代码块。这确实让我卸载并最终重新安装它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-09-25T04:42:45.653

除了马特科罗斯托夫的回答。在第 3 点（重置 repo），对于最新版本的 Homebrew，repo 不再是`/usr/local`，`cd "$(brew --repo)"`而是改为。

# svn - SVN 中的分支和主干

> ID：11173465
> 
> 赞同：0
> 
> 时间：2012-06-23T22:25:31.693
> 
> 标签：svn, sap

我是一名 SAP 开发人员，在 SAP 领域，我们有一个开发服务器（DEV）、一个质量（QAS）服务器（用于测试）和生产（PROD）服务器。开发人员在 DEV 中开发他们的程序，然后将其传输到 QAS。在 QAS 中，测试人员测试程序，然后将其传输到 PROD。稍后它会从 PROD 部署到客户端。

我是使用 SVN 的新手，想知道 SAP 环境是否以及如何类似于树干/分支/标签（？）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T22:30:13.767

它们在很大程度上是不相关的，除非您发现您的代码的多个版本可以同时从 DEV 到 TEST 再到 PROD。在这种情况下，您将同时运行多个分支。

“主干”实际上只是一个特殊的分支。您可以选择强制该主干始终包含从所有分支合并的最新代码。它充当所有后续分支的模板。如果没有，您只需从另一个分支创建一个分支并合并以保持同步。

标签用于创建用于生产的只读、带标签的代码版本。我将从使其成为 PROD 的代码创建一个标记的分支。你总是可以用这种方式取回它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T22:30:22.983

它没有任何共同点。分支是一种在不干扰开​​发主线的情况下开发新功能的方法，或者在开发新版本的同时维护项目的旧版本。我建议您阅读免费提供的[SVN 书籍](http://svnbook.red-bean.com/en/1.7/svn-book.html)。

# c - 结构中的字符串。损坏的

> ID：11173468
> 
> 赞同：2
> 
> 时间：2012-06-23T22:26:23.347
> 
> 标签：c, struct

有这样的结构。

```
struct Address {
    int id;
    int set;
    char name[MAX_DATA];
    char email[MAX_DATA];
}; 
```

以及设置地址的函数。

```
void Database_set(struct Connection *conn, int id, const char *name, const char *email) {
    struct Address *addr = &conn->db->rows[id];
    if(addr->set) die("Address already set");

    addr->set = 1;
    char *res = strncpy(addr->name, name, MAX_DATA);
    if(!res) die("Name copy failed");

    *res = strncpy(addr->email, email, MAX_DATA);
    if(!res) die("Email copy failed");
} 
```

但是 addr->name 的第一个字符在此行之后被损坏。

```
*res = strncpy(addr->email, email, MAX_DATA); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-23T22:34:15.100

`strncpy`返回它的第一个参数，所以之后

```
char *res = strncpy(addr->name, name, MAX_DATA); 
```

变量`res`成立`addr->name`（等效地，`&(addr->name[0])`）所以当

```
*res = strncpy(addr->email, email, MAX_DATA); 
```

运行它相当于

```
addr->name[0] = strncpy(addr->email, email, MAX_DATA); 
```

这个赋值是破坏`addr->name`. 正如 Greg Hewgill 所说，您不需要检查甚至保存`strncpy`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-23T22:33:45.417

我认为该`strncpy()`功能不是您想要的。考虑调用：

```
strncpy(addr->name, name, MAX_DATA); 
```

如果`name`具有`MAX_DATA`或更多字符，这会将字节复制`name`到目标中`addr->name`，并且*不会*以 NUL 终止目标。您有两种一般选择：

1.  使用代码手动 NUL 终止结果，例如

    ```
    addr->name[MAX_DATA-1] = '\0'; 
    ```

    但是，这很容易出错，因为您必须记住每次都这样做。

2.  使用一个库函数，例如`strlcpy()`（通常在 BSD 派生系统上可用，但不是标准的），它总是以 NUL 终止目标，即使源不完全适合。

# netbeans-platform - 如何将附加（数据）文件与 Netbeans 模块捆绑在一起？

> ID：11173469
> 
> 赞同：6
> 
> 时间：2012-06-23T22:26:34.687
> 
> 标签：netbeans-platform

我想将一些数据文件与我正在处理的 Netbeans 模块捆绑在一起。我知道我可以通过将资源添加到子文件夹中来捆绑资源，`/src`以便将它们打包在 jar 中。但我不希望文件出现在档案中。这些文件应该在 RCP 应用程序目录的子文件夹中显示为“松散”。

有没有办法做到这一点？

提前致谢，

大卫

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T12:53:53.827

NetBeans 模块被打包成 .nbm 文件，这些文件本质上是 JAR 文件，其中包含一些额外的信息

如果你想在你的 .nbm 中打包一些东西，它必须在`/src`, 文件夹中，除非你使用的是 maven，否则它将是`/resources`，但无论哪种方式，你的资源最终都会与你的类文件一起打包到 NBM 中

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-24T18:28:28.613

如果您使用的是 maven，您可以配置插件以将附加文件添加到`nbm`.

```
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>nbm-maven-plugin</artifactId>
    <extensions>true</extensions>
    <configuration>
        <nbmResources>
            <nbmResource>
                <directory>release/test</directory>    <!-- This is the sourcedir -->
                <targetPath>modules/test</targetPath>  <!-- This is the path relative to the installed module -->
                <includes>
                    <include>**/*.*</include>          <!-- Pattern of files to include -->
                </includes>
            </nbmResource>
        </nbmResources>
    </configuration>
</plugin> 
```

这也应该为您提供蚂蚁解决方案的提示（我不知道）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-24T23:22:12.133

我从 NB Platform 电子邮件列表中得到了一个解决方案：我只需要创建一个名为的目录`release`并将附加文件复制到此文件夹或子目录中。安装模块后，这些内容会出现在应用程序根文件夹中。

# php - 是否可以从 PHP 中的字符串开头获取图像 URL？

> ID：11173472
> 
> 赞同：1
> 
> 时间：2012-06-23T22:27:08.453
> 
> 标签：php, regex, image, parsing

我有一个示例字符串如下

```
$string = '
http://image.gsfc.nasa.gov/image/image_launch_a5.jpg
http://pierre.chachatelier.fr/programmation/images/mozodojo-original-image.jpg
http://image.gsfc.nasa.gov/image/image_launch_a5.jpg

Alot of text

http://www.google.com/intl/en_ALL/images/logos/images_logo_lg.gif

more text'; 
```

我希望能够提取前三个图像的 url（基本上是字符串开头的任何图像#），但在我的非图像文本开始后不提取任何图像 URL。我可以成功地使用正则表达式来获取所有图像 URL，但它也可以获取文本内的最后一个 google.com 图像。

感谢您的任何想法！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T22:31:29.193

让 R 成为正则表达式来获取图像 url

您需要抓住 (R)+ ，即出现 0 次或多次 R

或主要是 ((R)(w)?)+

其中 w 表示匹配空格的正则表达式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T22:31:50.810

如何避免使用正则表达式并`explode`改为使用？

```
$string = '....';

$urls = array();
$lines = explode(PHP_EOL,$string);
foreach ($lines as $line){
  $line = trim($line);

  // ignore empty lines
  if (strlen($line) === 0) continue;

  $pUrl = parse_url($line);

  // non-valid URLs don't count
  if ($pUrl === false) break;

  // also skip URLs that aren't images
  if (stripos($pUrl['path'],'.jpg') !== (strlen($pUrl['path']) - 4)) break;

  // anything left is a valid URL and an image
  // also, because a non-url fails and we skip empty lines, the first line
  // that isn't an image will break the loop, thus stopping the capture
  $urls[] = $line;
}
var_dump($urls); 
```

^([IDEOne](http://ideone.com/Zs2kL)的示例)

# orchardcms - 自定义表单样式

> ID：11173473
> 
> 赞同：0
> 
> 时间：2012-06-23T22:27:37.877
> 
> 标签：orchardcms

果园新手。我正在尝试设置自定义表单的样式但没有成功。我也一直在使用形状建模器。我创建了一个新的 ContentType 并添加了字段 f1、f2、f3... 我创建了一个 CustomForm。现在我想在某些字段周围包装不同的 div 说

```
<div class="g1">
f1
f2
</div>
<div class="g2">
f4
f6
</div> 
```

顺便说一句，我尝试过这个构造但没有成功：

```
 dynamic content = @Model.Content;
    <div class="g1">
        if(@content.ContentTypeName.f1 || @content.ContentTypeName.f2)
        { @Dispaly(...)
        }
    </div> 
```

这可以在 content.edit.cshtml 视图中完成吗？如果是这样，请提供一个例子。谢谢

另外，有没有办法在运行时反映 Model.Content 的属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-27T13:20:55.297

我所做的是在 Content_Edit 备用中创建本地区域，然后使用 placement.info 重新排列字段

安置信息：

```
<Match ContentType="MyForm">
    <Place Fields_Input_Edit-FirstField="MyFirstZone:1"/>
    <Place Fields_Input_Edit-SecondField="MySecondZone:1"/>
</Match> 
```

Content.Edit-MyForm.cshtml：

```
<div class="edit-item">
    <div class="edit-item-primary">
        @if (Model.Content != null) 
        {
            <div class="edit-item-content">
                <div class="first-zone">
                    @Display(Model.MyFirstZone)
                </div>
                <div class="second-zone">
                    @Display(Model.MySecondZone)
                </div>
            </div>
        }
    </div>
    ....
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T00:42:31.157

通常在 Orchard 中，您覆盖部分和字段的模板，而不是整个内容项。形状跟踪可以帮助您确定每个字段可以使用哪些模板替代，甚至可以生成带有默认代码的文件供您修改。

此外，Model.Content（如果有的话）将是一个区域，而不是内容项。根据您所在的模板，您可以改用 Model.ContentItem。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-25T01:36:07.173

终于想出了一个解决方案，虽然很丑陋，但它确实有效：在我与 Content_Edit 关联的备用方案中：

```
@{
    dynamic content = Model.Content;
 }

<div class="g1">
@{
     foreach (var item in content)
     {
         if (item.Model.GetType().Name == "BooleanField")
         {
             if (f.Name == "f1" || f.Name == "f2")
             {
                 @Display(item);
             }
          }
      }
 }
</div>
<div class="g2">        
@{
     foreach (var item in content)
     {
         if (item.Model.GetType().Name == "BooleanField")
         {
             if (f.Name == "f4" || f.Name == "f6")
             {
                 @Display(item);
             }
         }
     }
 }
</div> 
```

# c# - DataGridView 鼠标滚轮滚动停止工作

> ID：11173476
> 
> 赞同：0
> 
> 时间：2012-06-23T22:28:08.500
> 
> 标签：c#, datagridview, scroll, mousewheel

我的应用程序中有一个 DataGridView，我无法使用鼠标滚轮滚动它。它以前工作得很好。我不确定我做了什么导致这种情况，因为我最近才在对代码进行多次更改后才注意到它。

我没有发布任何代码，因为有超过 2k 行，我不确定错误可能在哪里。

有什么想法可能导致这种情况吗？如果您需要任何代码，我可以在之后编辑问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T05:54:38.177

做这个：

```
<div style="vertical-align: top; height: 152px; overflow:auto;width:800px;"> 
```

您的网格视图控件

```
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-30T13:40:21.293

[这是同一个问题的答案](https://stackoverflow.com/questions/11209059/datagridview-mouse-wheel-scrolling-stoped-working/11244708#11244708)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-09T11:32:12.113

DataGridView 的鼠标滚轮支持有问题。

这些错误意味着渲染经常损坏并且可能导致偶尔崩溃。

我想您团队中的其他人禁用了对 DataGridView 的鼠标滚轮支持作为错误修复。

这通常通过使用以下开头的行手动实现鼠标滚轮来完成：

```
 MyDataGridView.MouseWheel += new MouseEventHandler(... 
```

注释掉该行将重新启用鼠标滚轮支持，但我不建议这样做。

# java - Comparator/Comparable/ComparatorChain 问题

> ID：11173477
> 
> 赞同：3
> 
> 时间：2012-06-23T22:28:22.377
> 
> 标签：java, interface, comparable, subclass, apache-commons-collection

我正在实现一个处理`Comparator`和`Comparable`接口的层次结构。我不清楚的几件事：

1.  如果我将比较器添加到比较器链中，那么这段代码到底是什么意思

    `chain.addComparator(new sortByTitle());`

    我知道`sortByTitle()`参数必须是比较器，但我不明白你是如何实现这样的函数的？比较器需要你实现一个`compare(obj1, obj2)`函数，它需要两个参数来比较一个和另一个，你如何从这个函数中得到一个没有参数的（看起来像构造函数）调用？

2.  假设我实现了一个名为的类`Database`，它将一些项目存储在一个`ArrayList`被调用的`item`. 该变量`item`本身就是一个私有变量。现在在主程序中，进行了这样的调用：

    `Collections.sort(library.item, chain);`

    怎么可能直接访问对象**库**的实例`item`？`item`需要私有的数据库状态规范，这可以吗？

我将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T22:44:23.977

*   您可能知道，`Comparator`它本身就是一个接口。当您说 时`chain.addComparator(new sortByTitle());`，您传递的是 Comparator 的实现实例，该实例按标题对对象进行排序。在这种情况下，`sortByTitle`该类将实现 `Comparator`并将提供该 `compare(obj1, obj2)`方法的实现。您的链可以在您传入的那个实例上调用它。通常，不是每次都传递一个新实例，而是将 Object 的所有`Comparator`实现声明为 Object 本身的 public static final 成员。

例如：

```
public static final Comparator TITLE_COMPARATOR = new Comparator() {
    @Override
    public int compare(Object lhs, Object rhs) {
        // comparison logic
    }
}; 
```

然后，您可以通过这种方式将它们简单地传递到您的链中：

```
chain.addComparator(YourObject.TITLE_COMPARATOR); 
```

这有一个额外的好处，即允许在其他地方使用比较器（它是无状态的），而无需每次都创建一个新实例。

*   您需要在 Library 类中编写 getter 和 setter（如果您愿意，可以使用访问器和修改器），这将允许其他类读取/更新 item 变量，即使它被声明为私有。

就像是：

```
public List getItem() {
    return item;
} 
```

和

```
public void setItem(List item) {
    this.item = item;
} 
```

在图书馆类。

# c - C 通用链表

> ID：11173480
> 
> 赞同：3
> 
> 时间：2012-06-23T22:28:48.533
> 
> 标签：c, generics, pointers, linked-list, malloc

我有一个包含 void* 类型数据的通用链表我正在尝试使用 struct employee 类型填充我的列表，最终我也想销毁对象 struct employee。

考虑这个通用的链表头文件（我已经用 char* 类型对其进行了测试）：

```
struct accListNode                 //the nodes of a linked-list for any data type
{
  void *data;                     //generic pointer to any data type
  struct accListNode *next;       //the next node in the list
};

struct accList                    //a linked-list consisting of accListNodes
{
  struct accListNode *head;
  struct accListNode *tail;
  int size;
};

void accList_allocate(struct accList *theList);           //allocate the accList and set to NULL
void appendToEnd(void *data, struct accList *theList);    //append data to the end of the accList
void removeData(void *data, struct accList *theList);         //removes data from accList
  -------------------------------------------------------------------------------------- 
```

考虑员工结构

```
struct employee 
{ 
   char name[20]; 
   float wageRate; 
} 
```

现在考虑这个将从 main() 调用的示例测试用例：

```
 void test2()
    {
      struct accList secondList;
      struct employee *emp = Malloc(sizeof(struct employee));
      emp->name = "Dan";
      emp->wageRate =.5;

      struct employee *emp2 = Malloc(sizeof(struct employee));
      emp2->name = "Stan";
      emp2->wageRate = .3;

      accList_allocate(&secondList);
      appendToEnd(emp, &secondList);
      appendToEnd(emp2, &secondList);

      printf("Employee: %s\n", ((struct employee*)secondList.head->data)->name);   //cast to type struct employee
      printf("Employee2: %s\n", ((struct employee*)secondList.tail->data)->name);  
    } 
```

为什么我在下面发布的答案可以解决我的问题？我相信它与指针和内存分配有关。我使用的函数 Malloc() 是一个自定义 malloc，用于检查是否返回了 NULL。

这是我的整个通用链表实现的链接：[https ://codereview.stackexchange.com/questions/13007/c-linked-list-implementation](https://codereview.stackexchange.com/questions/13007/c-linked-list-implementation)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-26T17:22:47.853

问题是这个 accList_allocate() 和你对它的使用。

```
struct accList secondList;
accList_allocate(&secondList); 
```

在原始 test2() 中，secondList 是堆栈上的内存。&secondList 是指向该内存的指针。当您调用 accList_allocate() 时，指针的副本被传递，指向堆栈内存。Malloc() 然后返回一块内存并将其分配给指针的副本，而不是原始的 secondList。

回来后， secondList 仍然指向堆栈上未初始化的内存，因此对 appendToEnd() 的调用失败。

答案也是如此，除了 secondList 恰好没有垃圾。可能是偶然的，也可能是编译器的设计。无论哪种方式，它都不是您应该依赖的东西。

任何一个：

```
struct accList *secondList = NULL;

accList_allocate(&secondList); 
```

并更改 accList_allocate()

```
accList_allocate(struct accList **theList) {
    *theList = Malloc(sizeof(struct accList));
    (*theList)->head = NULL;
    (*theList)->tail = NULL;
    (*theList)->size = 0;
} 
```

或者

```
struct accList secondList;

accList_initialise(secondList); 
```

随着 accList_allocate() 更改为 accList_initialise() 因为它不分配

```
accList_initialise(struct accList *theList) {
    theList->head = NULL;
    theList->tail = NULL;
    theList->size = 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T17:07:16.653

我认为你的问题是这样的：

1.  您已`secondList`在原始`test2`函数的堆栈上分配。
2.  堆栈内存可能是脏的，所以`secondList`需要初始化
3.  您的`accList_allocate`函数需要一个指向列表的指针，然后用`Malloc`调用覆盖它。这意味着您传入的指针**永远不会**被初始化。
4.  当`test2`试图运行时，它会碰到一个错误的指针（因为内存没有初始化）。

分配它时它起作用的原因`main`是您的 C 编译器可能在程序启动时将堆栈归零。当`main`在堆栈上分配一个变量时，该分配是持久的（直到程序结束），所以`secondList`当你在`main`.

您的 current`accList_allocate`实际上并没有初始化传入的指针，并且您的其余代码将永远不会看到它分配的指针`Malloc`。为了解决您的问题，我将创建一个新功能：`accList_initialize`其唯一的工作是初始化列表：

```
void accList_initialize(struct accList* theList)
{
    // NO malloc
   theList->head = NULL;
   theList->tail = NULL;
   theList->size = 0;
} 
```

使用它，而不是`accList_allocate`在您的原始`test2`功能中。如果您真的想在堆上分配列表，那么您应该这样做（并且不要将它与分配在堆栈上的结构混合）。已`accList_allocate` **返回**一个指向分配结构的指针：

```
struct accList* accList_allocate(void)
{
   struct accList* theList = Malloc( sizeof(struct accList) );
   accList_initialize(theList);
   return theList;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-26T16:26:31.353

在上面的问题中，根据原始代码，我在这里看到了两件事，

您所看到的是未定义的行为，并且由此产生的是总线错误消息，因为您将字符串文字分配给变量，而实际上您应该一直在使用该`strcpy`函数，因此您已经相应地编辑了原始代码。将来要记住的事情:)

这个词的使用`Malloc`会引起混乱，尤其是在peer-review中，审稿人会脑袋放屁，说“哇，这是什么，那不是malloc吗？” 并且很可能会提高它。（基本上，不要调用与 C 标准库函数具有相似名称的自定义函数）

你不是在检查`NULL`，如果你的升级版本`Malloc`失败了，那`emp`将会是什么`NULL`！无论多么琐碎或您的想法是“啊，平台上有大量内存，4GB RAM 没问题，不会费心检查 NULL”，请务必检查它

看看[这个发布在别处的问题](https://stackoverflow.com/questions/212466/what-is-a-bus-error)来解释什么是总线错误。

***编辑：***使用链表结构，如何调用函数中的参数对于理解它至关重要。**注意&**的用法，意思是*获取指向链表结构的变量的地址*，并**通过引用传递它**，而不是**通过**作为变量副本的值传递。同样的规则通常也适用于指针的使用:)

您的问题的第一个代码中的参数稍微不合适，如果您在参数列表中使用双指针，那么是的，使用`&secondList`会起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-26T16:18:31.900

这可能取决于您的员工结构的设计方式，但您应该注意

```
strcpy(emp->name, "Dan"); 
```

和

```
emp->name = "Dan"; 
```

功能不同。特别是，后者可能是总线错误的来源，因为您通常不能以这种方式写入字符串文字。特别是如果您的代码有类似的东西

名称=“无”

之类的。

编辑：好的，所以对于员工结构的设计，问题是这样的：

您不能分配给数组。C 标准包括可修改的左值列表，而数组不是其中之一。

```
char name[20];
name = "JAMES" //illegal 
```

strcpy 很好 - 它只是转到由 name[0] 取消引用的内存地址，并将“JAMES\0”复制到那里的内存中，一次一个字节。

# php - 如何修改具有自动增量字段的行？

> ID：11173483
> 
> 赞同：0
> 
> 时间：2012-06-23T22:29:12.877
> 
> 标签：php, mysql, database

为什么这会在底部使用此数据创建一个新行，而不是修改该指定行？

```
$sql = "
UPDATE products SET
    productName = '$pname', 
    productDescription = '$pdes'
WHERE pID = '$pidmod'
"; 
```

`WHERE pID='$pidmod'`是自动增量字段。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T22:34:28.193

`UPDATE`语句不会**添加**行 -除非涉及触发器。

# html - 将 img 与另一个 div 完全重叠

> ID：11173490
> 
> 赞同：1
> 
> 时间：2012-06-23T22:30:45.963
> 
> 标签：html, css, css-position

我正在尝试实现这种效果，当用户将鼠标放在照片上时，照片会在整个照片上覆盖一个重复的图案。

**问题：**我似乎无法让覆盖 div 完全覆盖照片。这应该怎么做？

JSfiddle：http: [//jsfiddle.net/KDyKH/2/](http://jsfiddle.net/KDyKH/2/)

**编辑：**更新了小提琴

**CSS**

```
#container {
    position: relative;
    padding: 10px;
    width: 1000px;
    height: 500px;
    background: blue;
}

.photo_box {
    padding: 8px 10px 11px 10px;
    background: #fff;
    -webkit-box-shadow: 1px 1px 6px rgba(50, 50, 50, 0.25);
    -moz-box-shadow:    1px 1px 6px rgba(50, 50, 50, 0.25);
    box-shadow:         1px 1px 6px rgba(50, 50, 50, 0.25);
    border-radius: 5px; 
    -moz-border-radius: 5px;
    -webkit-border-radius: 5px;
    display: inline-block;
    position: relative;
}

.photo {
    position: absolute;
    z-index: 0;
    margin-bottom: 13px;
    border-radius: 5px; 
    -moz-border-radius: 5px;
    -webkit-border-radius: 5px;
}

.photo_tint {
    width: 100%;
    height: 100%;
    position: absolute;
    z-index: 100;
    background: red;
    -moz-opacity: 0.70;
    opacity: 0.70;
    -ms-filter:"progid:DXImageTransform.Microsoft.Alpha"(Opacity=70);
}​ 
```

**HTML**

```
<div id="container">
    <div class="photo_box">
        <img src='http://www.kurzweilai.net/images/Google-logo.jpg' class="photo">
            <div class="photo_tint"></div>
        </img>
    </div>
</div>​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T22:34:29.360

```
.photo_tint {
    position: absolute;
    z-index: 100;
    background: red;
    top:0; left:0;
    width:100%; height:100%;
}​ 
```

？？？

[http://jsfiddle.net/tFbbM/1/](http://jsfiddle.net/tFbbM/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T23:05:11.523

除了添加`left`和`top`属性之外`.photo_tint`，您还需要进行`.photo_box`相对定位（在您编辑问题之前不是这样）。

```
.photo_box {
    position: relative;
}

.photo_tint {
    left:0;
    right:0;
}​ 
```

[http://jsfiddle.net/KDyKH/5/](http://jsfiddle.net/KDyKH/5/)

绝对位置的左/上/右/下属性处理层次结构中较高的最后一个元素，位置设置为相对或绝对。如果没有父元素的位置设置为相对/绝对，则使用主体。在您的情况下，最接近的相对定位元素是`#container`，因此当`left`和`top`被设置在它上时，`.photo_tint`它使用`#container`' 原点而不是`.photo_box`' 原点来实现所需的效果。

此外，如果一个元素设置为 position:absolute，并且没有设置 left/top/right/right 属性，则该元素将不会表现为绝对[（请参阅此问题）](https://stackoverflow.com/questions/10243991/position-absolute-without-setting-top-left-bottom-right)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T22:37:07.373

图像上的 z-index:-1 或 div 上的 z-index:2

```
#container {
    position: relative;
    width: 500px;
    height: 500px;
    background: blue;
}

.photo {
    position: relative;
    width: 300px;
    height: 100px;
    background: green;
}

.photo_tint {
    position: absolute;
    z-index: 1;
    background: red;
    width: 300px;
    height: 100px;
    top:0px;
}​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-23T22:42:38.173

只需使用和定位`photo_tint`div 。[http://jsfiddle.net/OhMrBigshot/gEdJu/](http://jsfiddle.net/OhMrBigshot/gEdJu/)`top``left`

# qt4 - Qml Row将最后一个元素延伸到最后

> ID：11173505
> 
> 赞同：2
> 
> 时间：2012-06-23T22:33:49.363
> 
> 标签：qt4, qml

我有一个 QML Row 元素，里面有一个 Repeater，声明如下：

```
Row {
    anchors.fill: parent

    Repeater {
        ...
    }

    Rectangle {
        height: 30
        color: "black"
    }
} 
```

我想让 Rectangle 元素将他的宽度从中继器的右侧扩展到父行的末尾。我怎样才能做到这一点？

**更新** ![在此处输入图像描述](../Images/55d1d7a4967894f0cd0d0b067aa17dbf.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T08:39:00.670

这应该有效：

```
Row {
    anchors.fill: parent

    Repeater {
        id: repeater
        ...
    }

    Rectangle {
        height: 30
        color: "black"
        width: parent.width - repeater.width
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T10:46:47.240

我使用下面的代码解决了因为中继器宽度不会自动设置为等于所有项目的总宽度总和

```
Repeater {
    id: repeater
    ...
    onItemAdded: {
        repeater.width += item.width
    }
} 
```

# android - 在 ScrollView 中，我可以让可滚动的边缘不断发光吗？

> ID：11173507
> 
> 赞同：0
> 
> 时间：2012-06-23T22:33:54.887
> 
> 标签：android, scrollview

在我的 android 游戏开始之前，我会出现一个帮助屏幕。这是一个滚动视图。在进行游戏测试时，我发现玩家几乎毫无疑问会在不同的点点击屏幕，直到他们不小心移动了屏幕一点。然后他们意识到它是可滚动的。

这不是一个好的体验。我希望屏幕的可滚动边缘不断发光，这样很明显您需要滚动。简单地显示滚动条并没有帮助，因为它非常简约。即使它更宽，我也不确定它是否会吸引足够的眼球以使人们了解滚动的需要。

这是可能的还是我需要派生我自己的 ScrollView 版本？如果是后者，我需要做什么才能使边缘发光？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T22:43:44.647

理论上，一种方法是使用：

```
yourScrollView.setOverScrollMode(ScrollView.OVER_SCROLL_ALWAYS); // android:overScrollMode="always" in XML 
```

但是，我对这个功能没有运气（至少在垂直`ScrollView`s 上）。相反，我建议在页面的一侧添加一个箭头，或者添加一些“向下滚动”的文字。这样，它将与您的应用程序很好地融合在一起。

或者，除了[始终显示 scrollbars](https://stackoverflow.com/questions/5702502/how-to-always-show-scrollbar)之外，您还可以通过采用[这种策略](https://stackoverflow.com/questions/3071068/change-scrollbar-color-in-android)（文章在`ListView`s 上，但它也应该适用于 a ）使滚动条更加明显（也许是亮粉色！） 。`ScrollView`

# jquery - 如果单击/聚焦 div，jQuery 模糊不应触发

> ID：11173509
> 
> 赞同：5
> 
> 时间：2012-06-23T22:34:23.810
> 
> 标签：jquery, input, blur

我有一个具有模糊事件的标准文本输入。当单击文档中的任何内容（输入 AND 除外）时，应触发 blur 事件`<div id='show-anyways'></div>`。

我的问题是我不知道如何添加`<div id='show-anyways'></div>`来否定模糊事件功能。

希望我已经很好地解释了自己，我知道这有点奇怪。如果您需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-23T22:43:29.117

使用事件目标来确定点击了什么。如果元素是 DIV 或输入，以下将跟踪对文档的所有点击，并且不会触发 blur()。

```
var $input=$( '#MY-Input-ID');

$(document).click(function(evt){
   var $tgt=$(evt.target);
   if( !$tgt.is( '#show-anyways') && !$tgt.is($input) ){
         $input.blur()
    }
}) 
```

它不会在设置了任何 preventPropogation 的元素上触发。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T22:40:17.893

更新：必须完全重写我的解决方案。事件处理程序附加到失去焦点的`blur`事件：如果它类似于`mouseout`事件，我们可以知道哪个元素将获得焦点，但没有这样的运气。所以我们不得不求助于捕获`.click`事件——并基于它触发一些函数，而不是监听`blur`事件。

```
var inputIsBlurred = function() { 
   console.log('Run away!!!');
};
$(document).click(function(e){
  var $target = $(e.target);
  console.log($target);
  if ($target.is('#some_input') // fired by an input - no special effects
      || $target.is('#show-anyways') // fired by 'show-anyways' div
      || $target.parents('#show-anyways').length > 0 // ... or its children
  ) {
      return true; // move along, nothing to do here
  }
  inputIsBlurred();
});​ 
```

这是一个可以玩[的小提琴。](http://jsfiddle.net/bxfCB/1/)很抱歉我的原始答案造成的混乱。(

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-15T22:11:53.467

其他解决方案缺少一些东西。最重要的是，您需要在调用模糊事件之前检查输入是否聚焦。另一件事是，不仅在您单击其他位置时会调用模糊事件：您还可以在您转到浏览器中的另一个选项卡或点击`tab`或`shift + tab`转到下一个/上一个输入时调用它。最后，当您检查目标元素是否是您的模糊事件的异常（它可以是您的异常的子元素）时，您需要考虑使用 jQuery 函数[*最接近（ ）。*](https://api.jquery.com/closest/)

所以，我想出了这个 jQuery 原型函数：

```
$.fn.extend({

    blurIfNot : function(options, handler)
    {
        var defaults =
        {
            except : [],
            maxParent : null // A DOM element within which
                             // a matching element may be found
        };
        var opt = $.extend({}, defaults, options);
        var time = new Date().getTime();

        this.each(function()
        {
            var thisInp = $(this);
            thisInp[0].blurIfNot = {};
            time += 1000000000000;

            var except = opt.except;

            if ($.isFunction(opt.except))
            { except = opt.except.call(thisInp[0]); }

            function fire_blur_event(_tar, evt, mousedown)
            {
                var proceed = true;

                for (var i in except)
                {
                    if (_tar.is(thisInp) ||
                    _tar.closest(except[i], opt.maxParent).length)
                    {
                        proceed = false;
                        break;
                    }
                }
                if (proceed)
                {
                    thisInp[0].blurIfNot.focus = false;
                    handler.call(thisInp[0], evt);
                }
                else if (mousedown)
                {
                    $('html').one('mouseup', function(e)
                    {
                        thisInp[0].focus();
                    });
                }
            }

            if (!thisInp[0].blurIfNot.isset)
            {
                $('html').mousedown(function(e)
                {
                    if (thisInp[0].blurIfNot.focus)
                    {
                        var tar = $(e.target);

                        if (!tar.is('input'))
                        { fire_blur_event(tar, e, true); }
                    }
                });

                $(window).blur(function(e)
                {
                    if (thisInp[0].blurIfNot.focus)
                    {
                        thisInp[0].blurIfNot.focus = false;
                        handler.call(thisInp[0], e);
                    }
                });
            }
            else
            {   // to be able to update the input event if you have
                // created new inputs dynamically
                $('input').off('focus.blufIfNot' + time);
            }

            $('input').on('focus.blurIfNot' + time, function(e)
            {
                var tar = $(e.target);

                if (tar[0] == thisInp[0])
                { thisInp[0].blurIfNot.focus = true; }

                else if (thisInp[0].blurIfNot.focus)
                { fire_blur_event(tar, e); }
            });

            thisInp[0].blurIfNot.isset = true;
        });
        return this;
    }
});

$('#input_blur_if_not').blurIfNot(
{
    except : [
        $('.autocomplete'), $('.question')
    ],
    // You can also define the elements with a function:
    // except : function()
    // {
    //     return [ $(this).parent().find('.autocomplete') ];
    // },
    maxParent : $('#parent')[0] // optional
},
function(e)
{
    var rand = Math.random();

    $('#test').css('padding', rand * 100 + "px").
    html(rand + " blur !");
});
```

```
.autocomplete {
    background: #eee;
}
.autocomplete, input {
    width: 200px;
    padding: 3px;
    border: 1px solid #555;
}
.question {
    display:inline-block;
    border-radius:50%;
    background:#137dba;
    color:#fff;
    font-weight:bold;
    padding:2px 7px;
    cursor:pointer;
}
#test {
    position:absolute;
    top:0;
    left:260px;
    color:red;
    font-weight:bold;
    padding:10px 0;
    vertical-align:bottom;
}
```

```
<script src="http://code.jquery.com/jquery-latest.js"></script>

<div id="parent">

    <input value="an input" />
    <br><br>
    <input id="input_blur_if_not" value="input with autocomplete menu" />

    <div class="question">?</div>
    <div class="autocomplete">
        <div>option 1</div>
        <div>option 2</div>
    </div>
    <br>
    <input value="another input" />
    <div id="test"></div>

</div>
```

在 Chrome 和 IE11 中测试。如果您需要更多解释，请随时发表评论。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-23T22:40:01.293

可以尝试添加一些逻辑吗？

```
$('input').blur(function(e){
var tester = e.target;
if ($(tester).attr('id') == 'show-anyways'){
return false;
}
else {
// do something?
}

}); 
```

这基本上在发生模糊时触发，它检查点击/定位的内容，如果它恰好是显示，那么它将返回 false 并停止做任何事情。但如果它不显示，那么它可以做你的模糊事件吗？

未经测试，但这是你的意思吗？

# maven - 在打包的 maven jar 中找不到 log4j.properties

> ID：11173511
> 
> 赞同：2
> 
> 时间：2012-06-23T22:34:28.217
> 
> 标签：maven, log4j

我很难让 log4j 与我的小 Maven 项目一起工作。在 Eclipse 中运行该程序不会产生任何错误，并且日志记录工作完美。但是，当我将项目打包到 jar 中时，会收到以下警告：

```
log4j:WARN No appenders could be found for logger (org.openrdf.sail.memory.MemoryStore).
log4j:WARN Please initialize the log4j system properly.
log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info. 
```

log4j.properties 文件被打包到我的 jar 中，它位于项目的 src/main/resources 中。我阅读[了这篇](https://stackoverflow.com/questions/3945694/log4j-cant-initialize-with-my-log4j-properties)文章和 log4j 网站的配置部分，但无法弄清楚。我已经[在这里](http://pastebin.com/BjHbPbqY)上传了我的 POM 。我很感谢任何可以帮助我解决问题的提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T05:32:31.893

`<resource>`在标签下添加`<build></build>`标签。通过这样做，我们说如果没有采用默认构建，则从指定路径获取资源。

```
<resources>
    <resource>
        <directory>src/main/resources</directory>
    </resource>
</resources> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T06:32:20.390

正如警告消息所说，它找不到 logger 的附加程序`org.openrdf.sail.memory.MemoryStore`。因此，请确保您确实有`log4j.properties`文件`src/main/resources`，然后确保`jar`按照您的设想将其打包。可能因为某种原因，我真的看不出来，没有打包。你知道，有时会发生一些事情......如果在 a 中有这样的文件`jar`，请确保最后比您配置的处理`org.openrdf.sail.memory.MemoryStore`记录器的附加程序。

检查此 log4j 配置是否有效的最简单方法可能是为`log4j.rootLogger`. 这样做并写下那里发生的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-10T08:33:11.650

请注意 log4j.properties 是区分大小写的；

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-25T07:11:55.540

你似乎用它的依赖来组装你的 jar。如果这些 jar 还包含 log4j.properties，并且在覆盖您的 jar 时被拾取，这可能会导致问题。因此，它找不到该类的记录器`org.openrdf.sail.memory.MemoryStore`。

它只使用一个记录器文件，其中包含您的 jar 的日志记录信息以及所有依赖项。这只是复制和粘贴的问题。它还提供了控制依赖类的日志记录级别的能力。

# android - GridView 3x3 屏幕大小独立

> ID：11173516
> 
> 赞同：1
> 
> 时间：2012-06-23T22:34:52.827
> 
> 标签：android, layout, gridview

我想制作一个固定列和行 3x3 的 GridView。一切正常，但问题是网格在 3" 屏幕上垂直滚动，而在 5" 屏幕的底部有空白空间。

是否可以使它没有独立于屏幕尺寸的滚动？此外，GridView 是最好的选择吗？

# java - 控制线程的执行顺序

> ID：11173518
> 
> 赞同：-1
> 
> 时间：2012-06-23T22:35:12.337
> 
> 标签：java, multithreading, concurrency

我正在尝试测试线程以特定顺序执行的多线程场景，因此我可以确信我对这种场景有正确的行为。

假设： ThreadA 有方法`1()`和`2()`. ThreadB 有方法`3()`和`4()`.

我希望执行顺序是：

```
ThreadA.1() 
ThreadB.3() 
ThreadA.2()
ThreadB.4() 
```

我可以通过向 ThreadA 和 ThreadB 传递一个命令来告诉他们要执行什么方法以及在重新启动下一个线程之前加入每个线程来做到这一点。

我只是想知道是否有更优雅的方法来做到这一点。

注意，这是测试代码，我想测试某个场景。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T02:13:56.103

让每个线程等待生产者-消费者队列。将包含 Class 实例和状态变量的对象提交到队列 1。在线程 1 中，执行 classA.1() 并将对象提交到队列 2。在线程 2 中，执行 classB.2() 并将对象提交到队列1……

不要将连接、同步等与任何无关紧要的线程内容一起使用——你只会陷入一团糟的死锁、糟糕的性能和噩梦般的调试。

在 PC 队列上传递对象 - 死锁虽然并非不可能，但非常困难 :)

如果您可以在任何地方安排任何与线程无关的东西，那么您应该这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T23:48:43.690

好吧，这个问题被问得很糟糕（你说classA有方法1（）和2（），但是......那么你的例子根本没有遵循。

但是，如果您想在线程之间添加一些相似的顺序而不显式地 join()ing 或 run()ing 它们，您可以让它们相互访问（例如，使用单例类，这将作为一个简单的 -可访问的中介），并且，一旦您希望一个线程等待另一个线程执行某个任务，您可以在 while 循环内的同步块中使用等待语句，如下所示：

```
while (!Singleton.finished()) {
    synchronized (this) {
        wait();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T11:16:32.417

如果您只有执行顺序，为什么要 2 个线程？只需一个接一个地执行它们。

无论如何，您可以使用以下代码：

```
void synchronized executor(){
    Thread threadA = new Thread( new Runnable(){
       @Override
       void run(){
            classA.1();//or the equivalent object
            Thread.notify();
       }
    }
    threadA.run();
    threadA.wait();
    Thread threadB = new Thread( new Runnable(){
       @Override
       void run(){
            classB.3();//or the equivalent object
            Thread.notify();
       }
    }
    threadB.run();
    threadB.wait();
    Thread threadA = new Thread( new Runnable(){
       @Override
       void run(){
            classA.2();//or the equivalent object
            Thread.notify();
       }
    }
    threadA.run();
    threadA.wait();
    Thread threadB = new Thread( new Runnable(){
       @Override
       void run(){
            classB.4();//or the equivalent object
            Thread.notify();
       }
    }
    threadB.run();
} 
```

如您所见，没有优雅的方法可以做到这一点。

# php - jquery-gmap yii

> ID：11173521
> 
> 赞同：4
> 
> 时间：2012-06-23T22:36:23.227
> 
> 标签：php, google-maps, yii, jquery-gmap3

我正在使用这个扩展[Yii 框架：Jquery-gmap](http://www.yiiframework.com/extension/jquery-gmap/) 我的应用程序我使用过`$gmap->updateMarkerAddressFromModel`& `$marker->capturePosition`。

但是使用`$gmap->updateMarkerAddressFromModel`时不工作`$marker->capturePosition`，否则`$gmap->updateMarkerAddressFromModel`单独使用时工作正常。

我的代码

```
<?php
                Yii::import('ext.jquery-gmap.*');
                $gmap = new EGmap3Widget();
                $gmap->setSize(400, 234);

                // base options
                $options = array(
                    'scaleControl' => true,
                    'zoom' => 15,
                    'center' => array(0, 0),
                    'mapTypeId' => EGmap3MapTypeId::ROADMAP,
                    'mapTypeControlOptions' => array(
                        'style' => EGmap3MapTypeControlStyle::DROPDOWN_MENU,
                        'position' => EGmap3ControlPosition::TOP_CENTER,
                    ),
                );
                $gmap->setOptions($options);

                // marker with custom icon
                $marker = new EGmap3Marker(array(
                            'draggable' => true,
                        ));
                $marker->address = 'London';
                $marker->capturePosition(
                    // the model object
                    $businessModel,
                    // model's latitude property name
                    'lat',
                    // model's longitude property name
                    'longi',
                    array('drag')
                );
                // tell the gmap to update the marker from the model fields.
                $gmap->updateMarkerAddressFromModel(
                        // the model object
                        $businessModel,
                        array('street','town','country'),
                        array('zoom'=>16)
                );
                $marker->centerOnMap();
                $gmap->add($marker);
                $gmap->renderMap();
                ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T13:38:21.743

您没有初始化要传递给视图的模型。

因此，在您将模型传递给您需要添加的视图之前， `$businessModel = new BusinessModel()`我假设这是您的类的名称以及对它的引用。我再次假设模型类定义了正确的成员，即您稍后将使用的 lat 和 long。

看看下面的例子：这个例子我们使用一个`Address`有 3 个公共成员的类，纬度，经度和缩放级别

[从 jquery-gmap 插件文档：](http://www.yiiframework.com/extension/jquery-gmap/)

> 将标记位置和地图缩放保存到 Yii 模型
> 
> 允许从地图标记和地图的缩放级别捕获纬度和经度到 Yii 模型对象。如果您想在数据库中保存与地址相关的其他信息，这很有用。
> 
> 地址模型示例：

```
class Address extends CActiveRecord
{
    public $latitude;
    public $longitude;
        public $mapZoomLevel;

    public function rules()
    {
            return array(
                array('latitude,longitude', 'numerical'),
                array('mapZoomLevel', 'numerical', 'integerOnly'=>true),
            );
    }
} 
```

> 在您的视图文件中：

```
// init the model (usually passed to view)
$address = new Address();

// init the map
$gmap = new EGmap3Widget();
$gmap->setOptions(array('zoom' => 14));

// create the marker
$marker = new EGmap3Marker(array(
    'title' => 'Draggable address marker',
    'draggable' => true,
));
$marker->address = '10 Downing St, Westminster, London SW1A 2, UK';
$marker->centerOnMap();

// set the marker to relay its position information a model
$marker->capturePosition(
     // the model object
     $address,
     // model's latitude property name
     'latitude',
     // model's longitude property name
     'longitude',
     // Options set :
     //   show the fields, defaults to hidden fields
     //   update the fields during the marker drag event
     array('visible','drag')
);
$gmap->add($marker);

// Capture the map's zoom level, by default generates a hidden field
// for passing the value through POST
$gmap->map->captureZoom(
    // model object
    $address,
    // model attribute
   'mapZoomLevel',
   // whether to auto generate the field
   true,
   // HTML options to pass to the field
   array('class' => 'myCustomClass'),
);

$gmap->renderMap(); 
```

# c# - C# + Windows Phone => TextBlock，保留空格？

> ID：11173523
> 
> 赞同：2
> 
> 时间：2012-06-23T22:36:31.183
> 
> 标签：c#, windows-phone-7

我正在创建一个应用程序，我需要在其中循环一系列可能包含空格的文本行。

我通过执行并使用最终字符串`my_string += the_line_to_add`更新`Text`属性来构建一个字符串。`TextBlock`

然而，实际上非常简单，一行看起来像这样：

```
"a          b   c" 
```

最终会如下：

```
"a b c" 
```

我不希望所有这些空间都被删除。我希望该行保留额外的空格并保持不变：

```
"a          b   c" 
```

以`TextBlock`编程方式创建并添加到`StackPanel`. 我查看了不同的属性，但无法弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T22:57:55.987

老实说，我会以不同的方式处理这个问题。我不会在字符串中使用空格来布局文本。如果您需要在屏幕中添加 3 个字符串，请添加 3 个文本框并设置 Margin 属性。这取决于输入的文本，但如果空格太多，文本就会出现在屏幕之外。

或者，您可以使用[Run](http://msdn.microsoft.com/en-us/library/system.windows.documents.run%28v=vs.95%29.aspx)来格式化文本。

# c# - 当我执行语句时，Executenonquery 有 -1

> ID：11173531
> 
> 赞同：0
> 
> 时间：2012-06-23T22:37:33.947
> 
> 标签：c#, sql

我正在尝试从表中获取行并将它们插入到另一个表中。为此，我编写了这个简单的代码，但我无法弄清楚问题所在。

如您所见，我`ExecuteNonQuery`在执行语句后使用过，然后使用消息框查看输出，但消息框中的输出为-1

```
for (int i = 1; i <= 10; i++)
{
    SqlCommand cmd = new SqlCommand("Select exp_date from tbl_expences where exp_id='" + i + "'", con);

    int j = cmd.ExecuteNonQuery();

    MessageBox.Show(Convert.ToString(j));

    if (j > 1)
    {
       string date = cmd.ExecuteScalar().ToString();

       MessageBox.Show(date);
       SqlCommand cmd1 = new SqlCommand("update other_expensive set exp_date='" + date + "' where exp_id='" + i + "'", con);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T22:41:09.497

`ExecuteNonQuery()`用于`INSERT`,`UPDATE`或`DELETE`. `ExecuteReader()`如果您想使用，请使用`SELECT`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T08:47:22.560

为什么要为此运行 20 条（可能是 30 条，取决于这段代码中还发生了什么）语句？

从[ExecuteNonQuery](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executenonquery.aspx)的文档中：

> 对于 UPDATE、INSERT 和 DELETE 语句，返回值是受命令影响的行数。当正在插入或更新的表上存在触发器时，返回值包括受插入或更新操作影响的行数以及受一个或多个触发器影响的行数。**对于所有其他类型的语句，返回值为 -1**。如果发生回滚，则返回值也是 -1。

（重点补充）

为什么不只是：

```
update oe set exp_date=e.exp_date
from
    other_expensive oe
       inner join
    tbl_expense e
       on
          oe.exp_id = e.exp_id
where
    e.exp_id between 1 and 10 
```

它将使用一个查询并行执行所有更新，并避免循环以及您似乎正在尝试使用的“逐步”方法。

# c++ - 为什么将 std::mutex 锁定两次“未定义行为”？

> ID：11173532
> 
> 赞同：18
> 
> 时间：2012-06-23T22:37:58.347
> 
> 标签：c++, c++11, mutex, undefined-behavior

根据这篇[文章](http://www.devx.com/SpecialReports/Article/38883/1954)：

> 如果您尝试从同一线程锁定非递归互斥锁两次，而在两者之间没有解锁，您会得到未定义的行为。

我非常天真的头脑告诉我为什么他们不只是返回一个错误？有什么理由必须是UB吗？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-06-23T22:41:06.673

因为它永远不会在正确的程序中发生，并且对从未发生的事情进行检查是浪费的（并且要进行检查，它需要存储拥有的线程 ID，这也是浪费）。

请注意，它未定义允许调试实现抛出异常，例如，同时仍然允许发布实现尽可能高效。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-06-23T22:53:30.403

未定义的行为允许实现做任何最快/最方便的事情。例如，非递归互斥锁的有效实现可能是单个位，其中锁定操作是通过循环中的原子比较和交换指令实现的。如果拥有互斥锁的线程试图再次锁定它，它将死锁，因为它正在等待互斥锁解锁，但由于没有其他人可以解锁它（除非存在一些其他错误，即某些不拥有它的线程将其解锁）线程将永远等待。

# php - 压缩图片上传

> ID：11173538
> 
> 赞同：2
> 
> 时间：2012-06-23T22:39:20.137
> 
> 标签：php

我正在写一个博客系统（是的，我知道我在重新发明轮子），我希望用户上传他们帖子的照片。

到目前为止，在他们填写的发布故事的表格中，有一个图片字段，他们选择并上传了它。

问题是有些故事可能需要多个图像，所以我认为让他们上传包含图像的 zip 文件会更容易，然后脚本解压缩内容，删除任何非白名单（.php 文件等），然后继续处理图像（创建缩略图，将位置保存在数据库等..）。

这是一个好习惯吗？

如果没有，我该如何处理这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T22:46:01.703

所有现代浏览器都支持通过单个文件输入 (http://www.w3schools.com/html5/att_input_multiple.asp) 上传多个文件，这可能是您最好的选择。而且后端更容易处理。

您还应该看看这个优秀的 JQuery 插件。它可能有用 [http://blueimp.github.com/jQuery-File-Upload/](http://blueimp.github.com/jQuery-File-Upload/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T22:45:32.103

PHP 有一个官方的 Zip 库，[学习](http://php.net/manual/en/book.zip.php)并使用它！:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T22:45:48.327

您可以使用一张上传表格上传多个文件。也许使用 AJAX 将更多文件添加到表单中。

其他方式：让用户将他们的文件上传到媒体存储，然后在撰写文章时选择要插入的图像。

# android - Android 小部件相对布局

> ID：11173548
> 
> 赞同：0
> 
> 时间：2012-06-23T22:40:41.197
> 
> 标签：android, android-layout, android-widget, widget

我花了最后几天尝试进行布局。

它们的布局在我的 480x800 屏幕手机上看起来很棒，但在我的 540x960 屏幕手机上却一团糟。

我使用 dp 期望它会按密度缩放。

出了什么问题？

这是我的布局 xml 代码。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="vertical"
  android:layout_width="match_parent"
  android:layout_height="match_parent"

  android:layout_margin="15dip"
  android:background="@drawable/gshock5">

    <TextView
        android:id="@+id/widgetday"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"

        android:layout_marginRight="50dip"
        android:layout_marginTop="95sp"
        android:layout_centerInParent="true"
        android:text="DAY" 
        android:textColor="#003300"
        android:textAppearance="?android:attr/textAppearanceSmall" 
        android:textStyle="bold"/>

    <TextView
        android:id="@+id/widget1label"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/widgetday"
        android:layout_centerHorizontal="true"
        android:clickable="true"

        android:textColor="#003300"
        android:text="Error"
        android:textAppearance="?android:attr/textAppearanceMedium" 
        android:textStyle="bold"/>

     <RelativeLayout 
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"

         android:layout_centerHorizontal="true"
         android:layout_marginTop="210dip">

         <Button android:text="Click Me!" 
        android:id="@+id/button" 
        android:layout_width="wrap_content" 
        android:layout_height="wrap_content"

        />

     </RelativeLayout>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T12:58:17.430

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_margin="15dip"
    android:background="@drawable/gshock5"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/widgetday"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"
        android:layout_marginRight="50dip"
        android:layout_marginTop="95dip"
        android:text="DAY"
        android:textAppearance="?android:attr/textAppearanceSmall"
        android:textColor="#003300"
        android:textStyle="bold" />

    <TextView
        android:id="@+id/widget1label"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/widgetday"
        android:layout_centerHorizontal="true"
        android:clickable="true"
        android:text="Error"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textColor="#003300"
        android:textStyle="bold" />

    <Button
        android:id="@+id/button"
        android:layout_centerHorizontal="true"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/widget1label"
        android:text="Click Me!" />

</RelativeLayout> 
```

这可能会解决您的问题。尝试对 UI 使用最小布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T12:47:43.377

尝试使用线性布局。因为当设备改变时，确保它被缩放。但是，当使用相对布局时，它们是相对排列的，然后按比例缩放，这可能会搞砸。

# php - 如何使用 PHP 发送彩信（MMS）

> ID：11173554
> 
> 赞同：0
> 
> 时间：2012-06-23T22:41:51.417
> 
> 标签：php, email, attachment, mms

我目前正在尝试使用 mail() 函数使用 PHP 脚本向手机（通过 MMS 网关地址）发送 MMS 消息。我想在消息中包含一张图片。

我没有找到任何特定于使用 PHP 发送 MMS 消息的信息，并且我发现处理发送电子邮件附件的信息是分开的，其中一些建议我使用外部包，例如 Mail_Mime。使用 PHP 脚本向手机发送图片消息的最佳方式是什么？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T22:46:38.023

如果您的*运营商*支持接收电子邮件并将其作为彩信转发到手机，那么只需[发送带有 MIME 图像附件的电子邮件](https://stackoverflow.com/questions/536838/php-attaching-an-image-to-an-email)就足够了。

但是，如果您正在与 MMS 中心 (MMSC) 打交道，那么应用程序<->MMSC 的行业标准协议是[`MM7`](http://en.wikipedia.org/wiki/MM7_(MMS)#MM7)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-05T15:05:36.807

来自 Twilio 的 Ricky 在这里。

我知道这是一个老问题，但是对于任何登陆这里并希望完成此任务的人，您可以使用我们的[PHP 帮助程序库](https://www.twilio.com/docs/php/install)发送彩信：

```
<?php

// this line loads the library 
require('/path/to/twilio-php/Services/Twilio.php'); 

$account_sid = '[AccountSid]'; 
$auth_token = '[AuthToken]'; 
$client = new Services_Twilio($account_sid, $auth_token); 

$client->account->messages->create(array( 
    'To' => "+16518675309", 
    'From' => "+14158141829", 
    'Body' => "Hey Jenny! Good luck on the bar exam!", 
    'MediaUrl' => "http://farm2.static.flickr.com/1075/1404618563_3ed9a44a3a.jpg",  
)); 
```

[您可以在我们的API 文档](https://www.twilio.com/docs/api/rest/sending-messages)中找到更多示例。希望有帮助！

# asp.net - 通过服务进行 ASP.NET 成员身份验证

> ID：11173556
> 
> 赞同：3
> 
> 时间：2012-06-23T22:42:07.677
> 
> 标签：asp.net, wcf, membership-provider

客观的：

我想创建一个 Web 服务，允许我连接到它（通过 ASP.NET Web 应用程序），然后像成员资格提供者/角色提供者一样对用户进行身份验证。

我不想通过在 ASP.NET Web 应用程序的 Web.config 中进行配置来使用成员资格/角色提供程序。相反，我想要的是进行某种配置，将我的 Asp.net Web 应用程序指向一个 Web 服务（我想要创建的那个），而不是对用户进行身份验证。

预期解决方案：

我在一些谷歌研究后发现，解决方案可能是：WCF 身份验证服务。但我无法让它工作。我创建了此服务，并按照本文中的说明进行了所有配置：

[http://msdn.microsoft.com/en-us/library/bb398990.aspx](http://msdn.microsoft.com/en-us/library/bb398990.aspx)

但我不确定，我现在如何配置我的 Asp.Net Web 应用程序，以将此服务用作成员资格/角色提供程序。

我可能走错了方向，这项服务可能无法解决我的问题。你能帮帮我吗？

谢谢，你的开发兄弟... :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T12:40:07.003

你正朝着正确的方向前进。

[ClientFormsAuthenticationMembershipProvider](http://msdn.microsoft.com/en-us/library/system.web.clientservices.providers.clientformsauthenticationmembershipprovider.aspx)是您正在寻找的成员资格提供程序。

下面是使用它的示例 web.config 配置：

```
<appSettings>
  <add key="ClientSettingsProvider.ServiceUri" value="" />
</appSettings>

<system.web>
  <compilation debug="true" targetFramework="4.0" />

  <membership defaultProvider="ClientAuthenticationMembershipProvider">
    <providers>
      <clear/>
      <add name="ClientAuthenticationMembershipProvider"
    type="System.Web.ClientServices.Providers.ClientFormsAuthenticationMembershipProvider, System.Web.Extensions, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"
    serviceUri="http://localhost:49712/Authentication_JSON_AppService.axd" />
    </providers>
  </membership>
</system.web> 
```

配置可能很棘手。我花了几个小时才弄清楚应该添加 ClientSettingsProvider.ServiceUri。

您可以将临时 WinForms 或 WPF 项目添加到您的解决方案中以构建配置。这些类型的项目具有特殊的选项卡 - 项目设置中的服务选项卡，提供用于配置的 GUI。下面的示例适用于 .NET 3.5，但想法与 4.0 相同。

[http://www.codeproject.com/Articles/27670/Implementing-Application-Security-with-Client-Appl](http://www.codeproject.com/Articles/27670/Implementing-Application-Security-with-Client-Appl)

# java - 在非泛型类中采用 List 的泛型方法

> ID：11173561
> 
> 赞同：0
> 
> 时间：2012-06-23T22:43:19.887
> 
> 标签：java, list, generics, methods

我想做这样的事情

```
private <T extends List<?>> List<?> getFirstFiveElements(T list) {
    //body
} 
```

但是，当我托盘传递参数时，它不起作用

```
List<A> a = new LinkedList<A>;
List<B> b = new LinkedList<B>; 
getFirstFiveElements(a);
getFirstFiveElements(b); 
```

所以任何建议我如何使这项工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T22:59:49.407

以下应该可以正常工作。

```
private static <A, T extends List<A>> List<A> getFirstFiveElements(T list) {
   //
} 
```

`T`在这里没有用处，因此可以消除。

```
private static <A> List<A> getFirstFiveElements(List<A> list) {
   //
} 
```

如果您希望该方法返回与它所采用的相同类型（即`ArrayList`for `ArrayList`，`LinkedList`for `LinkedList`），那么很遗憾地告诉您，[Java 的类型系统无法做到这一点](https://stackoverflow.com/a/3715347/192247)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T23:03:56.297

伟大的 2 秒后，我找到了神奇的组合。无论如何，对于所有其他偶然发现这一点的人来说，这对我有用

```
 private <T> List<T> getStart(List<T> list) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T22:45:49.233

为什么要使用模板？使用它是不够的：

```
private List<?> getFirstFiveElements(List<?> list) {
    //body
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-23T22:52:38.653

这对我有用：

```
 import java.util.*;

  public class Test {

  private static <T extends List<?>> List<?> getFirstFiveElements(T list) {
    List<Object> result = new LinkedList<Object>();
    for (int i = 0; i < 5 && i < list.size(); i++) {
      result.add(list.get(i));
    }
    return result;
  }

  public static void main(String[] args) {
    List<Integer> a = new LinkedList<Integer>();
    a.add(1);
    a.add(2);
    a.add(3);
    a.add(4);
    a.add(5);
    a.add(6);
    a.add(7);
    System.out.println(getFirstFiveElements(a));
  }

} 
```

# c# - 实体框架错误：无法为表中的标识列插入显式值

> ID：11173562
> 
> 赞同：62
> 
> 时间：2012-06-23T22:43:20.687
> 
> 标签：c#, sql, entity-framework

我在 EF 上收到此错误。

> 当 IDENTITY_INSERT 设置为 OFF 时，无法在表“GroupMembers_New”中插入标识列的显式值。

Db 上的列是标识增量，EF 设计文件上的列`StoreGeneratedPattern`也是`identity`。似乎EF每次尝试保存时都尝试插入0。

一些建议说 ID 保留在表上或删除表并重新运行脚本。

有任何想法吗？

这是一些代码：

```
GroupMember groupMember = new GroupMember();
            groupMember.GroupId = group.Id;
            groupMember.UserId = (new UserId(group.Owner));
            //groupMember.Id = _groupContext.GroupMembers.Count();
            group.GroupMembers.Add(groupMember);

            _groupContext.SaveChanges(); 
```

![数据库](../Images/120c133d281e868a76e287b949e0e41f.png)

![EF 设计器](../Images/232a41090db9eb51d859674601170a63.png)

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2012-06-24T01:44:38.513

我以前遇到过这个。此错误意味着您正在尝试将值显式分配给数据库自动分配的列。

建议：更新您的 edmx 文件以反映您在数据库中所做的任何更改。如果数据库自动分配该值，您应该在该属性下的设计器文件中看到“IsDbGenerated=true”属性。如果不存在，您可以手动添加。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2012-11-11T00:20:12.313

试试这个：

```
using System.ComponentModel.DataAnnotations.Schema;
[DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
public decimal Identity_Col { get; set; } 
```

Entity Framework 类文件将这些代码行添加到 Identity 列。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2014-05-22T11:57:58.127

将这些属性放在身份属性之上：

```
[Key]
[DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
public int ID { get; set; } 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2016-11-01T16:32:23.547

EF 代码优先：由于自动递增 PK 'id' 字段和 guid 列，设计如下：

```
[DatabaseGenerated(DatabaseGeneratedOption.Identity)]
public Guid FileToken { get; set; } 
```

有重复的身份。我将其更改为：

```
[DatabaseGenerated(DatabaseGeneratedOption.Computed)]
[DefaultValue("newid()")]
public Guid FileToken { get; set; } 
```

问题就消失了。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-12-25T05:59:52.090

在 EF 6 中，您的模型中有一个字段/列的属性可以执行此操作：StoreGeneratedPattern。

在属性下拉列表中将此设置为“身份”。

（我不知道 EF 4。上面使用 IsDbGenerated 的答案似乎适用于 EF 4。）

这在底层 XML 中对应于元素的属性：

```
<Property Name="MyTableId" Type="int" Nullable="false" StoreGeneratedPattern="Identity" /> 
```

--但您不需要手动处理 XML，因为您可以使用设计器。

这是如何搞砸的还不清楚。即使从数据库中刷新我的模型后，我也遇到了问题。如果您在已经生成模型之后在表上设置 PK 或更改其名称，可能会感到困惑。（我使用的是表/数据库优先方法，而不是代码优先。）

您不能使用上述将 C# 属性放在实体代码上的方法，因为在这种情况下，实体代码是由 EF 生成的。EF 应该理解（“自己”）该字段是一个身份。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2019-03-08T12:41:40.407

我在我的 AspNetCore 2.x 应用程序中遇到了同样的问题和错误消息。我可以解决它的唯一方法是在 DbContext 类的 ModelBuilder.Entity 方法中删除这一行：

```
// remove: entity.Property(e => e.Id).ValueGeneratedNever(); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-11-01T14:17:40.597

我在我的应用程序中遇到了这个问题；并修复了它，将 id 字段的属性“StoredGeneratedPattern”更改为 Identity。

所以，转到模型；查找桌子；单击主键字段的属性；并更改属性。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-07-04T17:00:33.287

请参阅[拦截实体插入以获取生成的 always 列](https://stackoverflow.com/questions/41514629/how-can-i-use-system-versioned-temporal-table-with-entity-framework/56829230#56829230)，例如历史表上的 StartTime 和 EndTime 列，以及 rowversion 列。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2021-03-27T17:32:03.663

我通过从插入数据中删除模型中的主键来解决这个问题。因为主键自动递增。

```
var book = new Book
   {
   //   Id = 1,  //Don't need to write this
        Genre = "Technology",
        Author = "Charles Petzold",
        Title = "Programming Windows 5th Edition",
        Price = 30,
        Publisher = "Microsoft Press"
    };

  _unitOfWork.Books.Add(book); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-03-11T23:02:36.270

好吧，你需要给 ID 一个值，例如对象 Auto，你应该 VarAuto.Id = 0;

之后你可以这样做=>

```
using( MyContext db = new MyContext()){

db.Autos.Add(VarAuto);
db.SaveChanges();
} 
```

那就是只给id赋值的解决方案，EF可以识别表中的标识值。

你试一试。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-09-12T14:53:20.233

我首先使用 DB，并且该表具有标识列。我没有使用 db-scaffolding 来生成它，我从另一个实体复制了它，并且错误地使用了这个属性。

所以

尝试检查 DBContext 类。我收到了这个错误，问题出在这个属性“.ValueGeneratedNever()”上，我刚刚删除了它，它工作正常，

```
modelBuilder.Entity<TableName>(entity =>
        {
            entity.Property(e => e.Id)
                //.ValueGeneratedNever()
                .HasColumnName("ID");
        }); 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2022-01-30T00:52:47.333

注意：版主删除了这个答案作为重复，并留下了我的另一个答案，一个只有 sql-server 标签的问题（这是我从谷歌得到的第一个问题）。由于这个问题有实体框架标签，所以在这里再次发布答案。

这适用于 EntityFramework Core 3.1.22。使用错误的属性来指定外键会导致 Entity Framework 将主键降级为……其他东西。然后，实体框架将始终尝试插入显式值，这会引发数据库异常，因为它无法插入被告知是主键且不应插入的值。

```
Microsoft.EntityFrameworkCore.DbUpdateException: 'An error occurred while updating the entries. See the inner exception for details.'
Inner Exception:
SqlException: Cannot insert explicit value for identity column in table 'FOO' when IDENTITY_INSERT is set to OFF. 
```

代码示例。我们有一个一对一的类映射：

```
 public class Foo /* child */
    {
        public int FooPrimaryKey { get; set; }
        public int BarPrimaryKey { get; set; }
        public virtual Bar PropertyBar {get; set; }
    }

    public class Bar
    {
        public int BarPrimaryKey { get; set; }
        public virtual Foo PropertyFoo {get; set; }
    }

    modelBuilder.Entity<Foo>(entity =>
    {
        entity.HasKey(e => e.FooPrimaryKey);

        entity.ToTable("FOO", "dbo");

        entity.HasOne(d => d.PropertyBar)
            .WithOne(x => x.PropertyFoo)
            // wrong, this throws the above exception
            .HasForeignKey<Bar>(x => x.BarPrimaryKey);
    }); 
```

外键应该是（相同的键，不同的类型）：

```
 .HasForeignKey<Foo>(x => x.BarPrimaryKey); 
```

# matlab - 使用 ode45 时获得意外结果

> ID：11173575
> 
> 赞同：0
> 
> 时间：2012-06-23T22:44:44.810
> 
> 标签：matlab, ode, differential-equations

我试图通过在 Matlab 中编写代码来解决微分方程组。我在这个论坛上发帖，希望有人能以某种方式帮助我。我有一个由 10 个耦合微分方程组成的系统。它是一种载体-宿主流行病模型，它捕捉了一种疾病在人群和昆虫种群之间的传播。由于它是一个简单的微分方程系统，因此我将求解器 ( `ode45`) 用于非刚性问题类型。

有 10 个微分方程，每个代表 10 个不同的状态变量。有两个函数具有相同的 10 个耦合 ODE 系统。一个被称为`NoEffects_derivative_6_15_2012.m`包含 ODE 的原始系统。调用另一个函数，`OnlyLethal_derivative_6_15_2012.m`它包含相同的 ODE 系统，从时间开始，提款率增加`gamma=32 %days`，提款率随时间呈指数衰减。

我使用`ode45`相同的初始条件来解决这两个系统。两个系统的时间向量也是相同的，从`t0`到`tfinal`。该向量`tspan`包含从`t0`到的时间值`tfinal`，每个增量为 0.25 天，总共有 157 个时间值。

解值存储在矩阵`ye0`和`yeL`中。这两个矩阵都包含 157 行和 10 列（对于 10 个状态变量值）。当我比较第 10 个状态变量的值时，对于`time=tfinal`矩阵中的`ye0`，并`yeL`通过绘制差异，我发现它在某些时间值内变为负数。（使用命令：）`plot(te0,ye0(:,10)-yeL(:,10))`。这不是预期的。`t0`对于从until开始的所有时间值`tfinal`，状态变量 10 的值应该更大，因为它是从 ODE 系统获得的解决方案，它没有应用增加的提款率。

我被告知我的 matlab 代码中有一个错误。我不确定如何找出那个错误。或者我正在使用的 matlab 中的求解器 ( `ode45`) 效率不高，确实会出现这种问题。任何人都可以帮忙。

我也尝试过`ode23`，`ode113`但遇到了同样的问题。图 (2) 显示了一条曲线，该曲线对于时间值 32 和 34 变为负数，这表明了一个未预期的结果。对于所有时间值，该曲线应始终具有正值。还有其他任何人可以建议的论坛吗？

这是主要的脚本文件：

```
clear memory; clear all;
global Nc capitalambda muh lambdah del1 del2 p eta alpha1 alpha2 muv lambdav global dims Q t0 tfinal gamma Ct0 b1 b2 Ct0r b3 H C m_tilda betaHV bitesPERlanding IC global tspan Hs Cs betaVH k landingARRAY muARRAY
Nhh=33898857; Nvv=2*Nhh; Nc=21571585; g=354; % number of public health centers in Bihar state %Fix human parameters capitalambda= 1547.02; muh=0.000046142; lambdah= 0.07; del1=0.001331871263014; del2=0.000288658; p=0.24; eta=0.0083; alpha1=0.044; alpha2=0.0217; %Fix vector parameters muv=0.071428; % UNIT:2.13 SANDFLIES DEAD/SAND FLY/MONTH, SOURCE: MUBAYI ET AL., 2010 lambdav=0.05; % UNIT:1.5 TRANSMISSIONS/MONTH, SOURCE: MUBAYI ET AL., 2010
Ct0=0.054;b1=0.0260;b2=0.0610; Ct0r=0.63;b3=0.0130;
dimsH=6; % AS THERE ARE FIVE HUMAN COMPARTMENTS dimsV=3; % AS THERE ARE TWO VECTOR COMPARTMENTS dims=dimsH+dimsV; % THE TOTAL NUMBER OF COMPARTMENTS OR DIFFERENTIAL EQUATIONS
gamma=32; % spraying is done of 1st feb of the year
Q=0.2554; H=7933615; C=5392890;
m_tilda=100000; % assumed value 6.5, later I will have to get it for sand flies or mosquitoes betaHV=66.67/1000000; % estimated value from the short technical report sent by Anuj bitesPERlanding=lambdah/(m_tilda*betaHV); betaVH=lambdav/bitesPERlanding; IC=zeros(dims+1,1); % CREATES A MATRIX WITH DIMS+1 ROWS AND 1 COLUMN WITH ALL ELEMENTS AS ZEROES
t0=1; tfinal=40; for j=t0:1:(tfinal*4-4) tspan(1)= t0; tspan(j+1)= tspan(j)+0.25; end clear j;
% INITIAL CONDITION OF HUMAN COMPARTMENTS q1=0.8; q2=0.02; q3=0.0005; q4=0.0015; IC(1,1) = q1*Nhh; IC(2,1) = q2*Nhh; IC(3,1) = q3*Nhh; IC(4,1) = q4*Nhh; IC(5,1) = (1-q1-q2-q3-q4)*Nhh; IC(6,1) = Nhh; % INTIAL CONDITIONS OF THE VECTOR COMPARTMENTS IC(7,1) = 0.95*Nvv; %80 PERCENT OF TOTAL ARE ASSUMED AS SUSCEPTIBLE VECTORS IC(8,1) = 0.05*Nvv; %20 PRECENT OF TOTAL ARE ASSUMED AS INFECTED VECTORS IC(9,1) = Nvv; IC(10,1)=0;
Hs=2000000; Cs=3000000; k=1; landingARRAY=zeros(tfinal*50,2); muARRAY=zeros(tfinal*50,2);

[te0 ye0]=ode45(@NoEffects_derivative_6_15_2012,tspan,IC); [teL yeL]=ode45(@OnlyLethal_derivative_6_15_2012,tspan,IC);

figure(1) subplot(4,3,1); plot(te0,ye0(:,1),'b-',teL,yeL(:,1),'r-'); xlabel('time'); ylabel('S'); legend('susceptible humans'); subplot(4,3,2); plot(te0,ye0(:,2),'b-',teL,yeL(:,2),'r-'); xlabel('time'); ylabel('I'); legend('Infectious Cases'); subplot(4,3,3); plot(te0,ye0(:,3),'b-',teL,yeL(:,3),'r-'); xlabel('time'); ylabel('G'); legend('Cases in Govt. Clinics'); subplot(4,3,4); plot(te0,ye0(:,4),'b-',teL,yeL(:,4),'r-'); xlabel('time'); ylabel('T'); legend('Cases in Private Clinics'); subplot(4,3,5); plot(te0,ye0(:,5),'b-',teL,yeL(:,5),'r-'); xlabel('time'); ylabel('R'); legend('Recovered Cases');
subplot(4,3,6);plot(te0,ye0(:,6),'b-',teL,yeL(:,6),'r-'); hold on; plot(teL,capitalambda/muh); xlabel('time'); ylabel('Nh'); legend('Nh versus time');hold off;
subplot(4,3,7); plot(te0,ye0(:,7),'b-',teL,yeL(:,7),'r-'); xlabel('time'); ylabel('X'); legend('Susceptible Vectors');
subplot(4,3,8); plot(te0,ye0(:,8),'b-',teL,yeL(:,8),'r-'); xlabel('time'); ylabel('Z'); legend('Infected Vectors');
subplot(4,3,9); plot(te0,ye0(:,9),'b-',teL,yeL(:,9),'r-'); xlabel('time'); ylabel('Nv'); legend('Nv versus time');
subplot(4,3,10);plot(te0,ye0(:,10),'b-',teL,yeL(:,10),'r-'); xlabel('time'); ylabel('FS'); legend('Total number of human infections');
figure(2) plot(te0,ye0(:,10)-yeL(:,10)); xlabel('time'); ylabel('FS(without intervention)-FS(with lethal effect)'); legend('Diff. bet. VL cases with and w/o intervention:ode45'); 
```

函数文件：`NoEffects_derivative_6_15_2012`

```
function dx = NoEffects_derivative_6_15_2012( t , x )
global Nc capitalambda muh del1 del2 p eta alpha1 alpha2 muv global dims m_tilda betaHV bitesPERlanding betaVH
dx       = zeros(dims+1,1); % t % dx 
dx(1,1)  = capitalambda-(m_tilda)*bitesPERlanding*betaHV*x(1,1)*x(8,1)/(x(7,1)+x(8,1))-muh*x(1,1); 
dx(2,1)  = (m_tilda)*bitesPERlanding*betaHV*x(1,1)*x(8,1)/(x(7,1)+x(8,1))-(del1+eta+muh)*x(2,1); 
dx(3,1)  = p*eta*x(2,1)-(del2+alpha1+muh)*x(3,1); 
dx(4,1)  = (1-p)*eta*x(2,1)-(del2+alpha2+muh)*x(4,1);
dx(5,1)  = alpha1*x(3,1)+alpha2*x(4,1)-muh*x(5,1); 
dx(6,1)  = capitalambda -del1*x(2,1)-del2*x(3,1)-del2*x(4,1)-muh*x(6,1); 
dx(7,1)  = muv*(x(7,1)+x(8,1))-bitesPERlanding*betaVH*x(7,1)*x(2,1)/(x(6,1)+Nc)-muv*x(7,1);
%dx(8,1) = lambdav*x(7,1)*x(2,1)/(x(6,1)+Nc)-muvIOFt(t)*x(8,1); 
dx(8,1)  = bitesPERlanding*betaVH*x(7,1)*x(2,1)/(x(6,1)+Nc)-muv*x(8,1); 
dx(9,1)  = (muv-muv)*x(9,1); 
dx(10,1) = (m_tilda)*bitesPERlanding*betaHV*x(1,1)*x(8,1)/x(9,1); 
```

函数文件：`OnlyLethal_derivative_6_15_2012`

```
function dx=OnlyLethal_derivative_6_15_2012(t,x) 
global Nc capitalambda muh del1 del2 p eta alpha1 alpha2 muv global dims m_tilda betaHV bitesPERlanding betaVH k muARRAY
dx=zeros(dims+1,1);
% the below code saves some values into the second column of the two arrays % t muARRAY(k,1)=t; muARRAY(k,2)=artificialdeathrate1(t); k=k+1; 
dx(1,1)= capitalambda-(m_tilda)*bitesPERlanding*betaHV*x(1,1)*x(8,1)/(x(7,1)+x(8,1))-muh*x(1,1);    
dx(2,1)= (m_tilda)*bitesPERlanding*betaHV*x(1,1)*x(8,1)/(x(7,1)+x(8,1))-(del1+eta+muh)*x(2,1);
dx(3,1)=p*eta*x(2,1)-(del2+alpha1+muh)*x(3,1);
dx(4,1)=(1-p)*eta*x(2,1)-(del2+alpha2+muh)*x(4,1);
dx(5,1)=alpha1*x(3,1)+alpha2*x(4,1)-muh*x(5,1);
dx(6,1)=capitalambda -del1*x(2,1)-del2*( x(3,1)+x(4,1) ) - muh*x(6,1);
dx(7,1)=muv*( x(7,1)+x(8,1) )- bitesPERlanding*betaVH*x(7,1)*x(2,1)/(x(6,1)+Nc) - (artificialdeathrate1(t) + muv)*x(7,1);
dx(8,1)= bitesPERlanding*betaVH*x(7,1)*x(2,1)/(x(6,1)+Nc)-(artificialdeathrate1(t) + muv)*x(8,1);
dx(9,1)= -artificialdeathrate1(t) * x(9,1);
dx(10,1)= (m_tilda)*bitesPERlanding*betaHV*x(1,1)*x(8,1)/x(9,1); 
```

函数文件：`artificialdeathrate1`

```
function art1=artificialdeathrate1(t) 
global Q Hs H Cs C   
art1= Q*Hs*iOFt(t)/H + (1-Q)*Cs*oOFt(t)/C ; 
```

函数文件：`iOFt`

```
function i = iOFt(t) 
global gamma tfinal Ct0 b1
if t>=gamma && t<=tfinal 
    i = Ct0*exp(-b1*(t-gamma)); 
else 
    i =0; 
end 
```

函数文件：`oOFt`

```
function o = oOFt(t)
global gamma Ct0 b2 tfinal    
if (t>=gamma && t<=tfinal) 
    o = Ct0*exp(-b2*(t-gamma)); 
else 
    o = 0; 
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T07:27:07.983

如果您的工作代码甚至与您发布的代码一样混乱，那么恕我直言，您应该首先解决的问题。

我为你清理了一点`iOFt`，`oOFt`因为这些很容易处理。我尽力了`NoEffects_derivative_6_15_2012`。我个人对您的代码所做的更改是使用体面的索引。你有 10 个变量，如果你让你的代码休息几个星期或几个月，你就无法记住例如状态 7 是什么。因此`(7,1)`，您可能不想使用 ，而是使用详细名称重写 ODE，然后将它们检索/存储在`x`和`dx`向量中。或者使用索引来明确正在发生的事情。

例如

```
function ODE(t,x)
insectsInfected = x(1);
humansInfected  = x(2);
%etc

dInsectsInfected = %some function of the rest
dHumansInfected  = %some function of the rest
% etc

dx = [dInsectsInfected; dHumansInfected; ...]; 
```

或者

```
function ODE(t,x)
iInsectsInfected = 1;
iHumansInfected  = 2;
%etc

dx(iInsectsInfected) = %some function of x(i...)
dx(iHumansInfected)  = %some function of x(i...)
%etc 
```

当你不做这些事情时，你最终可能会在某些公式中使用`x(6,1)`而不是例如`x(3,1)`，并且可能需要几个小时才能发现这样的事情。如果您使用冗长的名称，则键入时间会更长，但它会使调试变得容易得多，并且如果您理解您的方程式，那么当发生此类错误时应该会更加明显。

此外，不要犹豫，在公式中添加空格，这会使阅读更容易。如果您有一些有意义的子表达式（例如，如果`(1-p)*eta*x(2,1)`是死于疾病的昆虫的数量，只需将其放入变量中`dyingInsects`并在它出现的任何地方使用）。如果你对齐你的作业（就像我在上面所做的那样），这可能会增加更容易阅读和理解的代码。

关于 ODE 求解器，如果你确定你的实现是正确的，我也会尝试一个求解器来解决僵硬问题（除非你绝对确定你没有僵硬的系统）。

# xamarin.ios - 在 MonoTouch 应用程序中使用“气泡消息”聊天时，本机堆栈跟踪崩溃

> ID：11173577
> 
> 赞同：0
> 
> 时间：2012-06-23T22:44:53.300
> 
> 标签：xamarin.ios, chat

我正在使用此处提供的示例，并在常规 UITableView 中使用了代码：http: [//tirania.org/monomac//archive/2012/Jan.html](http://tirania.org/monomac//archive/2012/Jan.html)

我认为一切都很好，直到我添加了很多消息。然后，当屏幕上的消息太多时，我看到它崩溃（似乎是单元重用问题）。

我的主要问题是堆栈跟踪几乎什么也没说，所以有人在常规 UITableView 中使用此代码并想分享一些代码吗？

下面是我的 GetCell 方法和堆栈跟踪：

```
public override UITableViewCell GetCell (UITableView tableView, NSIndexPath indexPath)
    {
        ChatMessage 消息 = _items[indexPath.Row];
        bool isLeft = msg.User.UserId != _controller._gamebackend.GetLocalUser().UserId;
        var cell = tableView.DequeueReusableCell (isLeft ? BubbleCell.KeyLeft : BubbleCell.KeyRight) as BubbleCell;
        如果（单元格 == 空）
            单元格 = 新的 BubbleCell (isLeft);

        cell.Update (GetBubbleText(msg));
        cell.SelectionStyle = UITableViewCellSelectionStyle.None;   
        返回单元格；
    }

```

```
2 libsystem_c.dylib 0x31f247ed _sigtramp + 48
6 月 24 日 00:27:53 未知 3 基金会 0x3716a137 probeGC + 62
6 月 24 日 00:27:53 未知 4 基础 0x3718983b -[NSConcreteMapTable removeObjectForKey:] + 34
6 月 24 日 00:27:53 未知 5 UIKit 0x353e13a1 -[_UIImageViewPretiledImageWrapper dealloc] + 80
6 月 24 日 00:27:53 未知 6 libobjc.A.dylib 0x34abe175 _objc_rootRelease + 36
6 月 24 日 00:27:53 未知 7 libobjc.A.dylib 0x34abfe57 objc_release + 38
6 月 24 日 00:27:53 未知 8 libobjc.A.dylib 0x34abeead _ZN12_GLOBAL__N_119AutoreleasePoolPage3popEPv + 224
6 月 24 日 00:27:53 未知 9 libobjc.A.dylib 0x34abedc9 _objc_autoreleasePoolPop + 12
6 月 24 日 00:27:53 未知 10 CoreFoundation 0x32a6dcff _CFAutoreleasePoolPop + 18
6 月 24 日 00:27:53 未知 11 QuartzCore 0x31fba91d _ZN2CA7Display11DisplayLink8dispatchEyy + 340
6 月 24 日 00:27:53 未知 12 QuartzCore 0x31fba7c5 _ZN2CA7Display16IOMFBDisplayLink8callbackEP21__IOMobileFramebufferyyyPv + 60
6 月 24 日 00:27:53 未知 13 IOMobileFramebuffer 0x32ba8001 IOMobileFramebufferVsyncNotifyFunc + 156
6 月 24 日 00:27:53 未知 14 IOKit 0x34e3d60d IODispatchCalloutFromCFMessage + 188
6 月 24 日 00:27:53 未知 15 CoreFoundation 0x32ae6f13 __CFMachPortPerform + 362
6 月 24 日 00:27:53 未知 16 CoreFoundation 0x32af1523 __CFRUNLOOP_IS_CALLING_OUT_TO_A_SOURCE1_PERFORM_FUNCTION__ + 38
6 月 24 日 00:27:53 未知 17 CoreFoundation 0x32af14c5 __CFRunLoopDoSource1 + 140
6 月 24 日 00:27:53 未知 18 CoreFoundation 0x32af0313 __CFRunLoopRun + 1370
6 月 24 日 00:27:53 未知 19 CoreFoundation 0x32a734a5 CFRunLoopRunSpecific + 300
6 月 24 日 00:27:53 未知 20 CoreFoundation 0x32a7336d CFRunLoopRunInMode + 104
6 月 24 日 00:27:53 未知 21 GraphicsServices 0x32bc0439 GSEventRunModal + 136
6 月 24 日 00:27:53 未知 22 UIKit 0x35052cd5 UIApplicationMain + 1080

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T08:53:07.863

还有另一种解决方法：将您创建的所有单元格存储在类级列表中。

然而，这不应该发生在从 UITableViewCells 派生的类型上，所以您也可以在[http://bugzilla.xamarin.com](http://bugzilla.xamarin.com)上提交一个错误，以便将来可以防止这种情况发生吗？

# php - 通过javascript插入数据库

> ID：11173578
> 
> 赞同：0
> 
> 时间：2012-06-23T22:45:00.560
> 
> 标签：php, javascript

我有从其他网站获取 RSS 的代码

```
gfeedfetcher.prototype._displayresult=function(feeds){
    var rssoutput=(this.itemcontainer=="<li>")? "<ul>\n" : ""
    gfeedfetcher._sortarray(feeds, this.sortstring)
    for (var i=0; i<feeds.length; i++){
        var itemtitle="<a href=\"" + feeds[i].link + "\" target=\"" + this.linktarget + "\" class=\"titlefield\">" + feeds[i].title + "</a>"
        var itemlabel=/label/i.test(this.showoptions)? '<span class="labelfield">['+this.feeds[i].ddlabel+']</span>' : " "
        var itemdate=gfeedfetcher._formatdate(feeds[i].publishedDate, this.showoptions)
        var itemdescription=/description/i.test(this.showoptions)? "<br />"+feeds[i].content : /snippet/i.test(this.showoptions)? "<br />"+feeds[i].contentSnippet  : ""
        rssoutput+=this.itemcontainer + itemtitle + " " + itemlabel + " " + itemdate + "\n" + itemdescription + this.itemcontainer.replace("<", "</") + "\n\n"
    }
    rssoutput+=(this.itemcontainer=="<li>")? "</ul>" : ""
    this.feedcontainer.innerHTML=rssoutput
} 
```

然后我需要通过javascript在数据库这个代码上插入新表的标题和链接

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T14:09:56.077

ajax 请求示例：

```
$.ajax({
  type: "POST", // or GET
  url: "databasehandler.php",
  data: { feedtitle: "Some Title", feedlink: "Some URL" }
}).done(function( msg ) {
  alert( "Data Saved: " + msg );
}); 
```

--

**数据库处理程序.php**

```
<?php

     print_r($_POST);

     // 
     // Do your database handles here.
     // Connect, Query, then return success/failure status

?> 
```

# java - 如何创建泛型类型的数组？

> ID：11173580
> 
> 赞同：2
> 
> 时间：2012-06-23T22:45:12.783
> 
> 标签：java, arrays, generics

如何创建泛型类型的数组？泛型方法如何`Arrays.copyOf()`工作？它返回通用数组的副本。因此可以创建通用数组。但是怎么做？如何编写类似于 的方法`copyOf()`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-23T22:50:53.060

如果您需要在运行时创建它，您至少需要知道当时的类型，因此您可以使用以下方法：

```
a = (T[]) Array.newInstance(c,s); 
```

其中`T`是泛型类型，`c`是类，`T`是`s`初始大小。

文档[在这里](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/Array.html#newInstance%28java.lang.Class,%20int%29)

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-06-23T22:52:39.840

我对你的问题感到困惑，但我会尽力回答。

如果要创建泛型类型的数组，则必须使用泛型对包含该数组的类进行参数化。例如，这有效：

```
class MyClass<T> {

      T[] myGenericArray;

} 
```

在大多数情况下，我敢打赌你正在做的事情可以通过 Object[] 或类似的东西来实现，尽管如果你让你的问题更具体，我可能会提供更多帮助。

# php - 在页面加载时停止下载文件

> ID：11173586
> 
> 赞同：0
> 
> 时间：2012-06-23T22:45:50.903
> 
> 标签：php, forms

我有以下抓取器正在下载空文件并将它们保存到我的文件夹中。所以我有 20k 个视频文件，每个文件都是 40kb。我怎样才能得到它，所以这个脚本在表单提交之前不会 DL。

```
$rename = substr(md5(rand(0,9999)), 17, 10); 
$ch = curl_init("$vid");
$fp = fopen("$rename.m4v", "w");

curl_setopt($ch, CURLOPT_FILE, $fp);
curl_setopt($ch, CURLOPT_HEADER, 0);

curl_exec($ch);
curl_close($ch);
fclose($fp);
$url_insert = "/dom/"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T22:50:48.750

```
if(isset($_POST['some-form-item'])){

$rename = substr(md5(rand(0,9999)), 17, 10); 
$ch = curl_init("$vid");
$fp = fopen("$rename.m4v", "w");

curl_setopt($ch, CURLOPT_FILE, $fp);
curl_setopt($ch, CURLOPT_HEADER, 0);

curl_exec($ch);
curl_close($ch);
fclose($fp);
$url_insert = "/dom/";

} 
```

仅当表单已发布其中包含某些内容时才会运行，将顶部的 if 更改为要发布的任何项目？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T22:51:59.483

```
<?

if(isset($_POST["submit"])) {

$rename = substr(md5(rand(0,9999)), 17, 10); 
$ch = curl_init("$vid");
$fp = fopen("$rename.m4v", "w");

curl_setopt($ch, CURLOPT_FILE, $fp);
curl_setopt($ch, CURLOPT_HEADER, 0);

curl_exec($ch);
curl_close($ch);
fclose($fp);
$url_insert = "/dom/";

} 
```

为了使其工作，您的提交按钮的名称元素必须设置为提交。

IE：`<input type="submit" name="submit" />`

# javascript - 使用 jQuery 创建嵌套 HTML 元素的最佳方法

> ID：11173589
> 
> 赞同：58
> 
> 时间：2012-06-23T22:46:10.527
> 
> 标签：javascript, jquery, dom, nested

如果我需要创建几个嵌套的 DOM 元素，我知道一种方法，就是将它们写成长字符串，然后使用合适的 jQuery 函数将它们放入文档中。就像是：

```
elem.html(
'<div class="wrapper">
    <div class="inner">
        <span>Some text<span>
    </div>
    <div class="inner">
        <span>Other text<span>
    </div>
</div>'); 
```

这种方式显然不是最干净的。刺痛不会花费太长时间而变得混乱，并且编辑成为一个问题。我更喜欢这种表示法：

```
$('<div></div>', {
    class : 'inner'
})
.appendTo( elem ); 
```

问题是我不知道如何在像上面那样动态创建嵌套元素时有效地实现它。所以如果有办法用第二种表示法来做第一个例子，我会很高兴了解它。

基本上，问题是，动态创建嵌套 HTML 元素的最佳方法是什么，而不必处理凌乱的长字符串？

*注意：我知道模板引擎。然而，这是一个关于动态创建几个 HTML 元素的问题。就像为插件或类似情况构建 DOM 依赖项一样。*

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-06-23T23:36:36.143

> 将它们写成长字符串，然后使用合适的 jQuery 函数将它们放在文档中。就像是：

这种方法的问题是你需要一个多行字符串——Javascript 不支持的东西——所以实际上你最终会得到：

```
elem.html(
'<div class="wrapper">'+
    '<div class="inner">'+
        '<span>Some text<span>'+
    '</div>'+
    '<div class="inner">'+
        '<span>Other text<span>'+
    '</div>'+
'</div>'); 
```

使用您上面建议的方法，这几乎是我可以设法得到的干净：

```
elem.append(
    $('<div/>', {'class': 'wrapper'}).append(
        $('<div/>', {'class': 'inner'}).append(
            $('<span/>', {text: 'Some text'})
        )
    )
    .append(
        $('<div/>', {'class': 'inner'}).append(
            $('<span/>', {text: 'Other text'})
        )
    )
); 
```

这样做的另一个好处是，您可以（如果需要）直接引用每个新创建的元素，而无需重新查询 DOM。

我喜欢写[polyglots](http://dev.w3.org/html5/html-xhtml-author-guide/)，所以为了使我的代码可重用，我通常会做这样的事情，（因为 jQuery`.html()`不支持 XML）：

```
// Define shorthand utility method
$.extend({
    el: function(el, props) {
        var $el = $(document.createElement(el));
        $el.attr(props);
        return $el;
    }
});

elem.append(
    $.el('div', {'class': 'wrapper'}).append(
        $.el('div', {'class': 'inner'}).append(
            $.el('span').text('Some text')
        )
    )
    .append(
        $.el('div', {'class': 'inner'}).append(
            $.el('span').text('Other text')
        )
    )
); 
```

这与方法 #2 没有太大区别，但它为您提供了更多可移植代码，并且内部不依赖`innerHTML`.

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-09-11T23:19:36.077

我在研究其他东西时找到[了这个解决方案。](https://johnresig.com/apps/workshop/intro/#19)它是jQuery创建者的[“jQuery 简介”的一部分，并使用](https://johnresig.com/apps/workshop/intro/)[end()](https://api.jquery.com/end/)函数。

```
$("<li><a></a></li>") // li 
  .find("a") // a 
  .attr("href", "http://ejohn.org/") // a 
  .html("John Resig") // a 
  .end() // li 
  .appendTo("ul"); 
```

适用于您的问题将是...

```
$("<div><span></span></div>") // div 
  .addClass("inner") // div 
  .find("span") // span 
  .html("whatever you want here.") // span 
  .end() // div 
  .appendTo( elem ); 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2012-06-23T23:06:01.320

我自己喜欢以下方法：

```
$('<div>',{
  'class' : 'wrapper',
  'html': $('<div>',{
    'class' : 'inner',
    'html' : $('<span>').text('Some text')
  }).add($('<div>',{
    'class' : 'inner',
    'html' : $('<span>').text('Other text')
  }))
}).appendTo('body'); 
```

或者，首先创建包装器，然后继续添加：

```
var $wrapper = $('<div>',{
    'class':'wrapper'
}).appendTo('body');
$('<div>',{
    'class':'inner',
    'html':$('<span>').text('Some text')
}).appendTo($wrapper);
$('<div>',{
    'class':'inner',
    'html':$('<span>').text('Other text')
}).appendTo($wrapper); 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2014-01-10T03:24:03.590

除了长而丑陋的字符串或链接在一起的巨大方法之外，还有第三种方法。您可以使用**普通的旧变量**来保存*各个*元素：

```
var $wrapper = $("<div/>", { class: "wrapper" }),
    $inner = $("<p/>", { class: "inner" }),
    $text = $("<span/>", { class: "text", text: "Some text" }); 
```

然后，将它们与以下内容联系在一起`append`：

```
$wrapper.append($inner.append($text)).appendTo("#whatever"); 
```

结果：

```
<div class="wrapper">
  <p class="inner">
    <span class="text">Some text</span>
  </p>
</div> 
```

在我看来，这是迄今为止最简洁、最易读的方法，而且它还具有将数据与代码分离的优点。

**编辑：**然而，一个警告是没有简单的方法`textContent`与嵌套元素混合（例如，`<p>Hello, <b>world!</b></p>`。）在这种情况下，您可能需要使用其他技术之一，例如字符串文字。

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2012-06-23T23:13:21.313

我喜欢这种方法

```
 $("<div>", {class: "wrapper"}).append(
        $("<div>", {class: "inner"}).append(
            $("<span>").text(
                "Some text"
            )
        ), 
        $("<div>", {class: "inner"}).append(
            $("<span>").text(
                "Some text"
            )
        )
    ).appendTo("body") 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-08-26T15:26:07.973

长字符串显然是最干净的方式。您会看到正确嵌套的代码，没有括号、美元符号等不必要的额外噪音。当然，能够将其编写为多行字符串是有好处的，但目前还不可能。对我来说，重点是摆脱所有不需要的符号。我不知道字符串是如何变得凌乱的，并且编辑成为一个问题。如果您分配了很多类，则可以将它们放在单独的行中：

```
'<div id="id-1"'
+ ' class="class-1 class-2 class-3 class-4 class-5 class-6">'
+ '</div>' 
```

或者这样：

```
'<div id="id-1" class="'
    + 'class-1 class-2 class-3 class-4 class-5 class-6'
+ '">'
+ '</div>' 
```

如果可能的话，另一种选择可能是`haml`在客户端使用。这样你就可以减少不必要的噪音。

# c# - 代码背后和单独的 C# 类之间的区别

> ID：11173590
> 
> 赞同：2
> 
> 时间：2012-06-23T22:46:20.177
> 
> 标签：c#, asp.net, webforms, websocket

我已经使用 ASP.net 4.0 在 Web 套接字上创建了我的应用程序。我只是想知道是否可以使用背后的代码来实现游戏逻辑以创建 Web Socket 游戏或继续使用 separet 类？背后的代码和单独的 C# 类之间的主要区别是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T23:06:55.237

您希望将游戏逻辑放在代码后面的唯一原因是利用页面生命周期或直接与页面/表单元素交互。将您的游戏逻辑留在一个单独的类中，以使其更具可测试性。

代码隐藏作为部分类“连接”到页面本身（这就是它可以驻留在单独文件中的方式）。您的业​​务逻辑和数据访问应该驻留在一个单独的类中，以尝试为与页面本身更密切相关的事务保留代码隐藏。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T22:49:03.633

我的看法：

代码隐藏 = 表示
类 = 结构（业务逻辑、实现等）

因此，使用代码隐藏是可行的，但缺乏重用代码或稍后重构，因为您的代码都在一个地方。对象应该在那里允许您划分逻辑并将其与用户界面分开。

把它想象成任何 javascript 库。当然，您发布的每个网站都可以在其页面上包含整个库，但它更适合作为包含库，然后您可以在每个页面上引用和使用。

# string - 在不指定格式字符串的情况下做一个scanf是什么漏洞？

> ID：11173604
> 
> 赞同：3
> 
> 时间：2012-06-23T22:47:39.920
> 
> 标签：string, security, format, scanf

在不指定格式字符串的情况下做一个scanf是什么漏洞？

例子： `scanf(variable);`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T22:53:20.337

这里的漏洞通常在本质上是非常技术性的，但问题是该`scanf`函数将读取的值应写入的地址作为参数。如果你没有向函数传递足够的参数来指定它们应该去哪里，或者你提供了错误类型的参数，那么恶意攻击者可以制作一个格式字符串，`scanf`以便将读入的值写入内存中控制的位置敏感的信息。例如，实现函数的最常见方式是将函数返回后下一条要执行的指令的地址存储在堆栈的某个位置。如果攻击者能够以某种方式将数据写入此地址，他们就可以更改函数返回的位置。此外，如果攻击者可以将二进制数据从`scanf`（也许通过输入`stdin`一堆数据），理论上他们可以更改返回地址以跳转到该二进制数据中，劫持程序并使其执行攻击者选择的代码。这可能是恶意的，例如格式化硬盘驱动器的代码，或者更糟糕的是可能窃取个人信息、在计算机中添加后门等。

有关如何通过在不应该去的地方写入数据来执行通用攻击的更多信息，文章[“Smashing the Stack for Fun and Profit”](http://insecure.org/stf/smashstack.html)是一个很好的参考。它没有专门解决此类问题，但可以类似地执行此处描述的各种攻击。

希望这可以帮助！

# iphone - 在 IOS 中检测拍手

> ID：11173605
> 
> 赞同：10
> 
> 时间：2012-06-23T22:47:52.360
> 
> 标签：iphone, ios, algorithm, core-audio

我正在尝试构建一个计数拍手的 IOS 应用程序。我一直在观看 CoreAudio 上的 WWDC 视频，而且这个话题似乎非常广泛，以至于我不太确定该去哪里看。

我在stackoverflow中发现了类似的问题。这是 C# 中用于检测门砰的一个： [给定一个音频流，找到门砰的一声（声压级计算？）](https://stackoverflow.com/questions/499795/given-an-audio-stream-find-when-a-door-slams-sound-pressure-level-calculation)

看来我需要这样做：

1.  将样本分成几部分
2.  计算每个部分的能量
3.  取前一个窗口和当前窗口之间的能量比
4.  如果该比率超过某个阈值，则确定有突然的巨响。

我不确定如何在 Objective-C 中实现这一点。我已经能够弄清楚如何使用**SCListener**对音频进行采样 这是我的尝试：

```
- (void)levelTimerCallback:(NSTimer *)timer {
    [recorder updateMeters];

    const double ALPHA = 0.05;
    double peakPowerForChannel = pow(10, (0.05 * [recorder peakPowerForChannel:0]));
    lowPassResults = ALPHA * peakPowerForChannel + (1.0 - ALPHA) * lowPassResults;

    if ([recorder peakPowerForChannel:0] == 0)
        totalClapsLabel.text = [NSString stringWithFormat:@"%d", total++];

    SCListener *listener = [SCListener sharedListener];
    if (![listener isListening])
        return;

    AudioQueueLevelMeterState *levels = [listener levels];
    Float32 peak = levels[0].mPeakPower;
    Float32 average = levels[0].mAveragePower;

    lowPassResultsLabel.text = [NSString stringWithFormat:@"%f", lowPassResults];
    peakInputLabel.text      = [NSString stringWithFormat:@"%f", peak];
    averageInputLabel.text   = [NSString stringWithFormat:@"%f", average];

} 
```

![在此处输入图像描述](../Images/2c2ce4a68216b4d9e73ce07221dbc5c7.png)

虽然我看到了建议的算法，但我不清楚如何在 Objective-C 中实现它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-19T16:49:11.883

你没有提到你在寻找什么样的检测保真度？老实说，仅检查某种声音“压力”变化可能完全满足您的需求。

但是请记住，手机的碰撞最终可能是一个非常低的频率和相当高的脉冲，即使它不是真正的拍手，它也会触发你的检测器。同样适用于不太可能是拍手的高频声源。

这可以满足您的需求吗？

如果不是，并且您希望获得更高的保真度，我认为您最好对输入信号进行频谱分析（FFT），然后在更窄的频带中寻找尖锐的信号尖峰，类似于您的部分已经有。

我没有仔细研究过这个源代码，但这里有一些可能的开源 FFT 代码，您可以希望将其原样用于您的 iphone 应用程序：

编辑： [https ://github.com/alexbw/iPhoneFFT](https://github.com/alexbw/iPhoneFFT)

绘制频谱结果的好处在于，它应该可以很容易地调整您真正关心的频率范围。在我自己使用一些笔记本电脑软件进行的测试中，我的拍手在 1kHz - 2kHz 左右有一个非常强烈的尖峰。

可能对您的需求过度杀伤，但如果您需要更高保真度的东西，那么我怀疑您不会满足于简单地跟踪信号尖峰而不知道首先导致信号尖峰的频率范围。

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T00:48:37.767

我为我的应用程序使用了 FFT [https://itunes.apple.com/us/app/clapmera/id519363613?mt=8](https://itunes.apple.com/us/app/clapmera/id519363613?mt=8)。频域中的 Clap 看起来像一个（不完美的）常数。

问候

# php - 建立一个简单的mongohq连接

> ID：11173606
> 
> 赞同：0
> 
> 时间：2012-06-23T22:47:54.100
> 
> 标签：php, mongodb, mongohq

有没有办法从本地主机服务器建立到云 mongoDB（例如 mongoHQ）的连接，没有驱动程序或第三方应用程序？

换句话说，我想在本地托管我的 php 文件，并连接到云上的 mongoDB。

几年来，我一直在做简单的网站，使用 php 和 MySQL 作为爱好，而且我在这方面做得相当不错，但我一直无法弄清楚如何用 Mongo 做这件简单的事情。

每当我运行一个文件时：

```
$m = new Mongo('mongodb://username:password@staff.mongohq.com:XXXXX/database'); 
```

从 php 文件中，我收到 HTTP 500 错误。

任何帮助将不胜感激。如果这还不够清楚，我提前道歉，这是我在 SO 上的第一篇文章。如果需要更多信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T23:34:58.857

您是否查看过您的 PHP/apache 错误日志以了解 HTTP 500 错误是什么？尝试添加到脚本的顶部：

```
ini_set('display_errors',1); 
error_reporting(E_ALL); 
```

根据您的代码示例，我会检查您是否[安装了 Mongo 模块](http://php.net/manual/en/mongo.installation.php)，因为它通常不会默认包含在内。使用`phpinfo()`并查找**mongo**部分。

如果您想在不安装 Mongo 驱动程序的情况下使用 MongoHQ，您还可以尝试他们的[REST API](http://support.mongohq.com/api)，该 API 显然仍处于测试阶段。

# python - 一次将 Python dict 的内容分配给多个变量？

> ID：11173607
> 
> 赞同：11
> 
> 时间：2012-06-23T22:48:08.130
> 
> 标签：python, dictionary

我想做这样的事情

```
def f():
    return { 'a' : 1, 'b' : 2, 'c' : 3 }

{ a, b } = f()     # or { 'a', 'b' } = f() ? 
```

也就是说，a 被赋值为 1，b 被赋值为 2，而 c 是未定义的

这与此类似

```
def f()
    return( 1,2 )

a,b = f() 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-23T22:50:23.037

解包依赖于变量名没有任何意义。您可以获得的最接近的是：

```
a, b = [f()[k] for k in ('a', 'b')] 
```

当然，这会评估`f()`两次。

* * *

你可以写一个函数：

```
def unpack(d, *keys)
    return tuple(d[k] for k in keys) 
```

然后做：

```
a, b = unpack(f(), 'a', 'b') 
```

* * *

不过，这确实有点矫枉过正。简单的东西会更好：

```
result = f()
a, b = result['a'], result['b'] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-24T00:21:51.340

考虑制作一个`f`然后`namedtuple`你可以直接使用`f.a``f.b`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-23T22:53:43.943

唔。有点奇怪，因为字典没有排序，所以解包值取决于变量名。但是，如果丑陋，它是可能的：

```
>>> locals().update(f())
>>> a
1 
```

不要在家里尝试这个！这是可维护性的噩梦。但也有点酷:-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-24T01:09:46.280

您可以使用（或滥用）函数属性来执行此操作：

```
>>> def f():
...    f.a=1
...    f.b=2
...    return { 'a' : f.a, 'b' : f.b, 'c' : 3 }
... 
>>> f()
{'a': 1, 'c': 3, 'b': 2}
>>> a,b=f.a,f.b
>>> a,b
(1, 2) 
```

请注意，属性仅在调用或手动分配 f() 后才具有值。

我（很少）使用函数属性作为 C`static`类变量的填充，如下所示：

```
>>> def f(i):
...    f.static+=i
...    return f.static
>>> f.static=0
>>> f(1)
1
>>> f(3)
4 
```

有更好的方法可以做到这一点，但只是为了完整......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-10T18:54:10.430

```
mydict = {'aa':2, 'bb':'john', 'cc':34, 'dd':'bye'}

a, b, c, d = [mydict[k] for k in ['aa', 'bb', 'cc', 'dd']] 
```

# php - 将 php SDK 与 DynamoDB 一起使用会产生“STS_Exception”，但适用于 S3

> ID：11173608
> 
> 赞同：1
> 
> 时间：2012-06-23T22:48:14.787
> 
> 标签：php, sdk, amazon-web-services

服务器设置：

CentOS 6.2 64 位 Ngingx 1.2.1 PHP 5.3 + PHP FPM

我通过 PEAR 将 SDK 安装为一个包。我设置了 config.inc.php。我包括 sdk`require_once 'AWSSDKforPHP/sdk.class.php';`

我还设置了我的 DynamoDB 并有一个包含一些示例项目的表。

如果我执行类似的操作，`$dynamodb = new AmazonDynamoDB();`我会在浏览器中收到以下错误：

```
Fatal error: Uncaught exception 'STS_Exception' with message 'Temporary credentials from the AWS Security Token Service could not be retrieved using the provided long term credentials. It's possible that the provided long term credentials were invalid.' in /usr/share/pear/AWSSDKforPHP/sdk.class.php:763 Stack trace: #0 [internal function]: CFRuntime->cache_sts_credentials(Object(CacheFile), Array) #1 /usr/share/pear/AWSSDKforPHP/lib/cachecore/cachecore.class.php(136): call_user_func_array(Array, Array) #2 /usr/share/pear/AWSSDKforPHP/services/dynamodb.class.php(287): CacheCore->response_manager(Array, Array) #3 /var/www/picobama.com/public/canvas.php(14): AmazonDynamoDB->__construct(Array) #4 {main} thrown in /usr/share/pear/AWSSDKforPHP/sdk.class.php on line 763 
```

但是，如果我启动 S3 或 EC2 类，则没有错误。

我什至创建了一个新的密钥/秘密组合以在我的 config.inc.php 中使用，我认为默认的可能有问题，但没有奏效。

我是 SDK 的新手，我不知道还能尝试什么，非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T22:23:48.697

显然，我的服务器时间和亚马逊服务器时间之间存在差异，导致出现身份验证错误。

通过安装/配置 NTP（网络时间协议）轻松修复。

有关 CentOS 中的说明，请参阅下面的 url：
[http ://www.cyberciti.biz/faq/howto-install-ntp-to-synchronize-server-clock/](http://www.cyberciti.biz/faq/howto-install-ntp-to-synchronize-server-clock/)

# database - 有没有直接可查询的“知识图谱”？

> ID：11173609
> 
> 赞同：1
> 
> 时间：2012-06-23T22:48:17.290
> 
> 标签：database, graph

我说的是谷歌最近纳入谷歌搜索的知识图概念。但我的问题是是否有可以通过 API 或客户端直接查询的知识图。为了说明，请参阅此特定查询：

```
search for "books" which contain the word "apple" and are linked to the "second war" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T14:00:22.190

你可能想看看[http://www.freebase.com](http://www.freebase.com)。这是一个带有 Web API 的可查询整图。我认为这是此类中最大的免费知识库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-24T15:49:59.493

您也可以尝试[http://unigraph.rocks](http://unigraph.rocks) - 一个大型开放式 KG。

沙箱可在[http://u01.unigraph.rocks](http://u01.unigraph.rocks)获得，文档在此处：[https ://github.com/unigraph/docs/wiki](https://github.com/unigraph/docs/wiki)

# ruby-on-rails - 是否有任何资源、gem、插件来帮助在本机评论实现上实现 @mentions？

> ID：11173612
> 
> 赞同：0
> 
> 时间：2012-06-23T22:49:12.960
> 
> 标签：ruby-on-rails, comments

我想让人们通过@username 在常规评论表单上互相称呼，了解 disqus 和 twitter 的工作原理。

我正在使用导轨。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T07:19:31.330

[https://www.ruby-toolbox.com/search?utf8=%E2%9C%93&q=mentions](https://www.ruby-toolbox.com/search?utf8=%E2%9C%93&q=mentions)
看看这个，我认为 jquery 插件就是你要找的。

# jquery - jQuery 粘性对话框模式

> ID：11173613
> 
> 赞同：3
> 
> 时间：2012-06-23T22:49:14.323
> 
> 标签：jquery, jquery-plugins, modal-dialog

使用新的 Cookie 规定，像我们所有人一样，我需要向用户显示一条消息，告知他们我在网站上持有的 cookie。我做了一些研究，我见过的最好的例子是[http://www.packtpub.com](http://www.packtpub.com)。

我的网站上有 jQuery，但并不意味着我知道它有多少工作。我想知道是否有人可以阐明我如何实施类似的解决方案。我已经厌倦了在 packtpub.com 上弄清楚它是如何完成的，但它有点超出我的想象。我已经搜索了模态和粘性模态，但我没有找到一个很好的例子来说明如何产生类似的解决方案，因为大多数对话模态似乎通过灰显背景来工作，直到对模态执行某些操作。

我将不胜感激任何人对我如何重新创建类似解决方案的任何有用提示。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T23:28:04.783

使用您的内容创建一个元素，

```
<div id="cookie-notification">
    <!-- Your content goes here !-->
    <a href="#" id="close-notifiction">Close for now</a>
    <a href="#" id="close-notifiction-forever">Never show again</a>
</div> 
```

使用 css 将其固定在底部，并使用大的 z-index 将其置于其他位置的顶部。

```
#cookie-notification{
    position : fixed;
    bottom : 10px;
    right : 10px;
    z-index : 99999;
    //more of your styles ..
    } 
```

现在您的页面右下角有通知。

现在用 jQuery 隐藏它。

```
$('#close-notification').click(function(){
    $('#cookie-notification').fadeOut(300);
    return false;
    } 
```

要“不再显示此内容”，请将您的 cookie 设置为不再显示此内容，检查页面加载时是否设置了此 cookie，如果是则隐藏通知。

```
$('#close-notification').click(function(){
    $('#cookie-notification').fadeOut(300);
    createCookie('show-notification','never',9999); 
    //refer the link below and use the code from there to make create cookie work
    return false;
    } 
```

//检查页面加载时是否设置了cookie

```
$(document).ready(function(){
    if(readCookie('show-notification') == 'never'){
            $('#cookie-notification').hide();
            }
    } 
```

这是此页面底部的 cookie 代码[http://www.quirksmode.org/js/cookies.html](http://www.quirksmode.org/js/cookies.html)

# objective-c - 超级视图调整其子视图大小的“正确”方式是什么？

> ID：11173615
> 
> 赞同：0
> 
> 时间：2012-06-23T22:49:29.487
> 
> 标签：objective-c, cocoa-touch

我刚开始为一个 iOS 项目做贡献，并注意到这种反复出现的模式：

```
// This takes place in the superview
// This is the first access of subviewController.view,
// so the subview controller will create its view
// Then we'll immediately resize it to our desired frame
subviewController.view.frame = CGMakeRect(x, y, width, height); 
```

对我来说，子视图的控制器创建具有特定帧大小的子视图只是让超级视图立即调整它的大小，这对我来说似乎很奇怪/效率低下。

我是否缺少其他一些设计模式，它允许超级视图从一开始就将所需的大小传递给子视图，所以这种立即调整大小是不必要的？

显然，子视图控制器可能只有一个特殊的方法，它将大小作为参数，但我想知道这是否是犹太/常见模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T23:00:46.137

在哪里创建子视图，而不是使用`init`方法创建，您总是可以使用`initWithFrame`. 顺便说一句，我们是在谈论控制器的主视图吗？然后，您可以在编译项目之前始终从界面生成器中设置视图大小。

但是，如果应用程序需要在每次启动时动态更改子视图，那么当前的执行方式是唯一的选择。

# sql - 在访问查询中搜索日期和时间

> ID：11173616
> 
> 赞同：3
> 
> 时间：2012-06-23T22:49:30.347
> 
> 标签：sql, date, ms-access-2003

我在表格 tbl Admission 上有以下数据
：日期和时间是两个不同的字段，并以`dd/mm/yyyy`格式存储

```
AdmitDate          AdmitTime 
1/6/2012            00:00
3/6/2012            10:00
3/6/2012            19:00
4/6/2012            20:38
5/6/2012            21:00
7/6/2012            03:00 
```

我想写一个查询来显示 3/6/2012 07:00:00 和 5/6/2012 06:59:59 之间的所有记录。

查询还应该有用户输入“日期”的选项（只有日期和时间可以是第一天早上 7 点到第二天早上 6 点 59 点之间的固定间隔） - 例如使用 PARAMETERS。我使用 access 2003。我尝试了几个查询，但无法完善一个 - 我没有得到准确的结果。有人请帮忙。

谢谢，

问候，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T22:59:17.153

如果只有一`DATETIME`列，查询的条件很容易构造：

```
WHERE AdmitDateTime >= '2012-06-03 07:00' 
  AND AdmitDateTime <  '2012-06-05 07:00' 
```

* * *

由于您不能这样做并且因为 Access 具有自己的日期和时间功能，我认为这将起作用：

```
WHERE DateValue(AdmitDate) + AdmitTime 
         >= DateValue([InputDate]) + TimeValue('07:00')
  AND DateValue(AdmitDate) + AdmitTime 
         <  DateValue([InputDate]) + 2 + TimeValue('07:00') 
```

这些`DateValue()`调用是为了确保用户传递的值或`AdmitDate`列中的任何时间部分都被截断，并且只使用 the`'07:00'`和 the `AdmitTime`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T23:07:12.750

所有办公日期都是数字，因此您可以添加：

```
SELECT [admitdate]+[admittime] AS Expr1
FROM dt
WHERE ((([admitdate]+[admittime]) 
  Between #6/3/2012 7:0:0# And #6/5/2012 6:59:59#)); 
```

以上将在查询设计窗口中工作，但在其他任何地方，例如 VBA，您都会遇到语言环境问题。

编辑重新评论

```
Result
03/06/2012 10:00:00
03/06/2012 19:00:00
04/06/2012 20:38:00 
```

# drupal - 使用 Drupal Services 3，文件资源时要包含的正确 JSON

> ID：11173623
> 
> 赞同：1
> 
> 时间：2012-06-23T22:51:03.957
> 
> 标签：drupal, rest

我了解 Drupal 服务模块，并且可以创建节点和进行用户身份验证。我正在尝试从 android 上传一个将填充节点图像字段的文件（图像）。我对服务的理解非常好。我已在我的服务中启用文件资源。我假设要创建文件，我会将数据发布到 my-server/service-endpoint/create。我在任何地方都找不到的大问题是需要什么数据，以及我将发送的 JSON 的结构是什么，因为我将使用 JSON 作为接口？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T19:19:33.580

这个很简单..数据在这里... [http://drupanium.org/api/82](http://drupanium.org/api/82)

然后只需重新创建他们作为 JSON 对象列出的数组.. 唯一需要的参数是文件.. 所以 {"file":FILE_NAME}

正确的 url 是 www.my-site.com/[REST-ENDPOINT]/file 然后发布数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-04T16:16:14.897

上面的链接（即：[http](http://drupanium.org/api/82) ://drupanium.org/api/82 ）是正确的，除了文件名不是可选的而是必需的......

服务一直返回“缺少数据文件无法上传”，直到我将“文件名”属性添加到请求中

# cocoa-touch - 如何重绘标签栏控制器显示的视图

> ID：11173626
> 
> 赞同：0
> 
> 时间：2012-06-23T22:52:30.563
> 
> 标签：cocoa-touch, uitabbarcontroller, modalviewcontroller

我在拆分视图控制器的主视图中有一个标签栏控制器。我向该标签栏控制器添加了一个子视图以显示一些信息。我不使用模态视图，因为我不想要模态行为，我需要该子视图显示在主视图中。

此信息视图的显示可能由其他几个视图控制器中的任何一个触发，具体取决于当时显示的内容。（例如，点击地图上披露按钮列表中的单元格。）

有时，当我关闭此信息子视图时，选项卡栏控制器显示的视图为空白。它通常是纯色的或白色的。我可以切换选项卡，当我回到我所在的选项卡时，视图会正确绘制。

我想尝试在视图上使用 setNeedsDisplay 方法，所以我在标签栏控制器类中尝试了这个：

```
- (void) redrawCurrentTab {
    UIView *currentView = [[self.viewControllers objectAtIndex:self.selectedIndex] view];
    [currentView setNeedsDisplay];
} 
```

我检查了 currentView 的值对于应该显示的视图是否正确。但是视图并没有像我希望的那样被重绘。

所以我有两个可以看到的问题：

1.  我可能不明白 setNeedsDisplay 是如何工作的。
2.  我正在寻找一种更好的方法来完成信息视图的显示，而不是作为标签栏控制器的子视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T03:19:56.943

```
// This is a hack, because the current tab is disappearing when the details view is withdrawn.
// So it needs to cycle to another view and then back.
- (void) redrawCurrentTab {
    if (currentIndex == 0) 
        self.selectedIndex = 1;
    else
        self.selectedIndex = 0;
    self.selectedIndex = currentIndex;
} 
```

`currentIndex`在委托方法中设置`tabBarController:didSelectViewController:`

# django - Django favicon.ico 正在开发中？

> ID：11173631
> 
> 赞同：14
> 
> 时间：2012-06-23T22:52:54.807
> 
> 标签：django, favicon

我如何在开发中为 favicon.ico 服务？我可以在我的 urlconf 中添加一个路由，但我不希望该路由延续到生产环境。有没有办法在 local_settings.py 中做到这一点？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-24T00:07:25.607

最简单的方法是将其与其他静态媒体一起放在您的静态目录中，然后在您的 html 中指定其位置：

```
<link rel="shortcut icon" type="image/png" href="{% static 'images/favicon.ico' %}"/> 
```

我的旧答案是：

您可以在您的条目中设置一个条目，`urls.py`然后检查是否`debug`为真。这将阻止它在生产中使用。我认为你可以做与静态媒体类似的事情。

```
if settings.DEBUG:
    urlpatterns += patterns('',
        (r'^favicon.ico$', 'django.views.static.serve', {'document_root': '/path/to/favicon'}),
    ) 
```

您也可以从您的视图中提供网站图标。：

```
from django.http import HttpResponse

def my_image(request):
    image_data = open("/home/moneyman/public_html/media/img/favicon.ico", "rb").read()
    return HttpResponse(image_data, content_type="image/png") 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2017-08-25T23:49:24.120

这对我有用：

```
from django.conf.urls.static import static

...

if settings.DEBUG:
    urlpatterns += static(r'/favicon.ico', document_root='static/favicon.ico') 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-14T20:26:02.710

从[文档](https://docs.djangoproject.com/en/dev/howto/static-files/#django.views.static.serve)：

```
from django.conf.urls.static import static

urlpatterns = patterns("",
    # Your stuff goes here
) + static('/', document_root='static/') 
```

似乎没有办法为单个静态文件提供服务，但至少这个帮助函数是一个包装器，仅在 DEBUG = True 时才有效。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-23T23:14:10.697

好吧，您可以创建自己的 loader.py 文件，该文件会加载您想要覆盖的设置。加载此文件应如下所示：

```
try:
    execfile(os.path.join(SETTINGS_DIR, 'loader.py'))
except:
    pass 
```

并添加到 settings.py 的末尾。此设置不应提交到生产服务器，只应出现在开发机器上。如果您使用的是 git，请将 loader.py 添加到 .gitignore 中。

# c# - 解析数据有空白数组字段显示

> ID：11173632
> 
> 赞同：1
> 
> 时间：2012-06-23T22:52:55.693
> 
> 标签：c#, parsing

我正在解析我的数据输出，但是，我的数据中有返回字符 (\n)。因此，当我运行我的代码时，会构建数组，其中一个数组 (4) 是空白数据……我尝试使用 null、“”和“”。有谁知道我怎样才能阻止最后一个数组显示？

```
 char[] returnChar= {'\n' };
        string parseText = captcha;
        string[] words = parseText.Split(returnChar);
        int count = words.Length;
        for (int i = 0; i < count; i++)
        {
            if (words[i] == null)
            {
                MessageBox.Show("This row is empty: " + i);
            }
                MessageBox.Show(words[i]);
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T22:56:43.630

在做[String.Split](http://msdn.microsoft.com/en-us/library/ms131448.aspx)时，定义第二个参数 - [StringSplitOptions](http://msdn.microsoft.com/en-us/library/system.stringsplitoptions.aspx)。

```
string[] words = 
    parseText.Split(returnChar, StringSplitOptions.RemoveEmptyEntries); 
```

这样它将跳过空元素。

# haskell - 测试 Double 是否是 Haskell 中的积分值？

> ID：11173642
> 
> 赞同：4
> 
> 时间：2012-06-23T22:54:48.347
> 
> 标签：haskell

我有一个列表区域:: [双]。现在我想过滤这个列表中那些实际上是整数值的列表。我想为我的谓词做这样的事情：

```
isInteger :: Double -> Bool
isInteger x = abs (fromIntegral (floor x) - x) < delta
  where delta = 0.00001 
```

但是，我想有更好的方法可以做到这一点。是否有用于检查实数值是否为整数的 Haskell 习语？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-23T22:59:08.060

尽管您可能想要使用`round`而不是`floor`. 您还可以考虑使用[`approxRational`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Ratio.html#v%3aapproxRational)并检查结果的分母是`1`：

```
isInteger x = denominator (approxRational x 0.00001) == 1 
```

# scala - 展平嵌套的 Scalaz 验证

> ID：11173643
> 
> 赞同：10
> 
> 时间：2012-06-23T22:54:56.490
> 
> 标签：scala, scalaz

我对 scalaz 还很陌生，我已经从验证开始。

我有一些表单的验证功能：

```
def validateXyz(...): ValidationNEL[String, String] = ... 
```

然后我使用 applicative 样式来组合多个验证，然后调用另一个也返回验证的函数：

```
(validateXyz(...) |@| validateAbc(...)) { (first, second) =>
   otherFunction(first, second)
} 
```

在哪里，

```
def otherFunction(first: String, second: String): ValidationNEL[String, String] = ... 
```

但是，当调用上面的结果类型是：

```
val result: ValidationNEL[String, ValidationNEL[String, String]] = ... 
```

我可以通过使用两个函数在结果上调用 fold 来解压它，第一个只是将 NEL 作为失败传播，第二个只是传播其参数：

```
def propagateF(result: NonEmptyList[String]): ValidationNEL[String, String] = result.fail
def propagateV(result: ValidationNEL[String, String]) = result

result.fold(propagateF, propagateV)
// result type: ValidationNEL[String, String] 
```

这有效并返回正确的类型和结果。但是，它感觉不是正确的解决方案，所以我必须遗漏一些东西。我需要做些什么来避免最后出现这种可怕的折叠？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-24T00:02:26.977

你在这里寻找的是 monadic `join`。

问题是它`Validation`本身并不是真正的 monad，因为错误端带有一个`Semigroup`无法由`Monad`. `Either`但是，如果需要，您可以随时进入monad。此功能由`flatMap`.

```
(validateXyz(...) |@| validateAbc(...))(otherFunction).flatMap(x => x) 
```

如果你在外面有错误，结果就是那个错误。如果您在成功中出现错误，则结果将是内部错误。否则结果将是成功的。*请注意不可能在内部和外部都*出现错误。这就是为什么你必须使用`Applicative`而不是`Monad`如果你想组合错误。

# c# - 如何检查要删除的点？

> ID：11173646
> 
> 赞同：1
> 
> 时间：2012-06-23T22:55:58.437
> 
> 标签：c#

我有两个`List`s 类型`int`，用于存储点坐标，称为`Point_X`和`Point_Y`。

这是新类中的删除方法：

```
public void DeletePoint(int x, int y)
{
    for (int i = 0; i < Point_X.Count; i++)
    {
        if ((i == x) && (i == y) || y == -1 || x == -1) 
        {
            Point_X.RemoveAt(i);
            Point_Y.RemoveAt(i); 
        }
        else
        {
        }
    }
} 
```

在`x`and`y`中，我得到了我点击的点的索引。如果我添加两个点并单击其中一个点，那么我将获得该点的两个索引，例如`x`将为 0 和`y`-1。

现在我正在浏览`Point_X`列表，我需要检查所有情况并将获得的索引与列表中的索引进行比较`Point_X`，`Point_Y`然后它应该删除我点击的点。

这`if`似乎不起作用：`if ((i == x) && (i == y) || y == -1 || x == -1)`. 如果我有两个点`pictureBox1`并且我单击第 2 点并尝试删除它，它不会在第一次被删除。我第二次点击时它确实被删除了。

这是`Form1`我单击删除点的按钮单击的代码：

```
private void button3_Click(object sender, EventArgs e)
{           
    wireObject1.DeletePoint(cyclicSelectedIndex[0],cyclicSelectedIndex[1]);
    button3.Enabled = false;
} 
```

这是我单击要在事件中选择的点的`pictureBox1`代码`MouseDown`：

```
private void pictureBox1_MouseDown(object sender, MouseEventArgs e)
{
    if (e.Button == MouseButtons.Left)
    {
        label1.Visible = true;
        label4.Visible = true;

        // find the index that is closest to the current mouse location
        float t = wireObject1.GetIndexByXY(e.X, e.Y, 5);

        if (t == -1)
        {
            button3.Enabled = false;
        }
        else
        {
            button3.Enabled = true;
            {
                selectedIndex = t;
                mouseMove = true;
                OriginalX = wireObject1._point_X[(int)selectedIndex];
                OriginalY = wireObject1._point_Y[(int)selectedIndex];

                if (cyclicSelectedIndex.Count() == 2)
                {
                    cyclicSelectedIndex[currentCyclicIndex] = (int)selectedIndex;
                    currentCyclicIndex++;
                    if (currentCyclicIndex == 2)
                    {
                        currentCyclicIndex = 0;
                    }

                    if ((cyclicSelectedIndex[0] == cyclicSelectedIndex[1]) || (cyclicSelectedIndex[0] == -1) || (cyclicSelectedIndex[1] == -1))
                    {
                        button2.Enabled = false;
                    }
                    else
                    {
                        button2.Enabled = true;
                    }

                    for (int i = 0; i < wireObject1._connectionstart.Count; i++) 
                    {
                        if ((wireObject1._connectionstart[i] == cyclicSelectedIndex[0] && wireObject1._connectionend[i] == cyclicSelectedIndex[1]) ||
                                   (wireObject1._connectionstart[i] == cyclicSelectedIndex[1] && wireObject1._connectionend[i] == cyclicSelectedIndex[0]))
                        {
                             button2.Enabled = false;
                        }
                    }

                    label13.Text = selectedIndex.ToString();
                    label13.Visible = true;
                    label14.Visible = true;

                    listView1.Items.Add(selectedIndex.ToString()).EnsureVisible();
                }
            }
        }
    }
} 
```

问题是`DeletePoint`新类中的方法不会删除我单击的点，除非我单击它两次。

* * *

这是合乎逻辑的`if ((i == x) && (i == y))`，因为在某些情况下`x`是 1 和`y`0 所以变量 ( `i`) 永远不会也是 0 和 1 所以我被困在这里。

我不知道如何检查所有情况 - 例如`x`是 1 和`y`0。可能还有其他情况需要涵盖，但我认为问题出在此`if`声明的某个地方。

* * *

x = 1 , y = 1

Point_X >>> [0] = 331.0 , [1] = 212.0

Point_Y >>> [0] = 213.0 , [1] = 212.0

我 = 0

当我有两个点并单击第二个点时就是这种情况。它没有在新类的函数中做任何事情，它没有删除这一点。

相同的第一点它没有删除它没有进入删除区域。这是当我使用 Alexei Levenkov 想法样本进行 If 检查时。

现在在Form1中，当我点击pictureBox1中的一个点时，在鼠标按下事件中我有一个变量（t），我计算新类中点的索引：

```
public float GetIndexByXY( int x , int y , float tol)
        {
            for (idx = 0; idx < Point_X.Count; ++idx)
            {
                float dx = Point_X[idx] - x;
                float dy = Point_Y[idx] - y;
                float dist = (float)Math.Sqrt(dx * dx + dy * dy);

                if (dist < tol) return idx;

            }
            return -1;
        } 
```

例如，如果我有一个点并单击它，则 variable(t) = 0

然后列表 cyclicSelectedIndex 在 [0] 中有两个单元格/位置，我有 0，在 [1] 我有 -1，currentCyclicIndex 现在是 1，selectedIndex 是 0，在鼠标按下事件中 Form1 中。鼠标按下事件只是为了标记我要删除的点。

在 Form1 按钮中单击我单击删除点的位置：

```
private void button3_Click(object sender, EventArgs e)
        {

            wireObject1.DeletePoint(cyclicSelectedIndex[0],cyclicSelectedIndex[1]);
            button3.Enabled = false;

            pictureBox1.Invalidate();
        } 
```

cyclicSelectedIndex[0] = 0 和 cyclicSelectedIndex[1] = -1

所以在 DeletePoint 函数的新类中：

```
public void DeletePoint(int x, int y)
        {

            for (int i = 0; i < Point_X.Count; i++)
            {

                if ((Point_X[i] == x) && (Point_Y[i] == y) || y == -1 || x == -1) 
                {
                    Point_X.RemoveAt(i);
                    Point_Y.RemoveAt(i); 
                }
                else
                {
                }
            }

        } 
```

x = 0 和 y = -1

现在我需要从列表中删除索引 0 和 -1：Point_x 和 Point_Y，并且此列表中的每个索引都包含我要删除的 hte 点的坐标。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-23T23:06:08.777

您很可能希望将元素的**值与 x/y 进行比较，而不是索引：**

```
if ((Point_X[i] == x) && (Point_Y[i] == y) || y == -1 || x == -1) 
```

请注意，最好使用具有 X/Y 属性的类（如果您知道/有充分理由，则为结构）并将它们存储在一个列表中：

```
class MyPoint { public int X;public int Y;}
List<MyPoint> point = new List<MyPoint>(); 
```

# c++ - C++ 使用“-”操作数和 list.back()

> ID：11173647
> 
> 赞同：2
> 
> 时间：2012-06-23T22:56:19.467
> 
> 标签：c++, list, operator-overloading

我想通过 for 循环中的列表并执行以下操作：

```
list<my_object> my_list;

for(int x = 0; x < my_list.size(); x++){

   my_object tempObject = (my_list.back() - x);

   //more actions...

} 
```

但是，即使[http://www.cplusplus.com/reference/stl/list/back/](http://www.cplusplus.com/reference/stl/list/back/)显示了您将“-”运算符与“back()”函数一起使用的示例，Visual C++ 告诉我“没有运算符” -" 匹配这些操作数"...

几天前我开始使用 c++，但我不知道从这里去哪里.. 甚至有可能以这种方式通过列表吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T23:08:11.610

迭代列表的适当方法是使用迭代器：

```
list<my_object> my_list;

for (list<my_object>::iterator i(my_list.begin()), end(my_list.end()); i!=end; ++i) {
   my_object tempObject = *i;

   //more actions...

} 
```

在 C++11 中使用迭代器：

```
for (auto i = begin(my_list), end = end(my_list); i!=end(); ++i) {
   my_object tempObject = *i;

   //more actions...

} 
```

您可以使用基于 C++11 范围的 for 循环：

```
for (my_object tempObject : my_list) {

   //more actions...

} 
```

或者，如果碰巧有一个 STL 风格的算法模板已经执行了您的“更多操作”：

```
more_actions(begin(my_list),end(my_list)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T04:10:59.623

在示例中，您链接到列表中的元素是一个`int`，这就是它在那里工作的原因。您要做的是从`my_object`. 没有内置函数来执行此操作，但如果有一个函数`operator-(my_object &lhs, int rhs)`，那么它是可能的。

# ruby-on-rails - 如何解决 ROR 教程 CH 9 的 rspec 错误结束

> ID：11173649
> 
> 赞同：1
> 
> 时间：2012-06-23T22:56:48.343
> 
> 标签：ruby-on-rails

我读完了 Michael Hartl 的 Ruby on Rails 教程的第 9 章，但 rspec 测试失败了。我已经多次浏览了这一章，但找不到我做错了什么。请帮忙！另外，我是一个两周大的程序员，所以如果您能详细说明您通过调试所经历的步骤，那将对我有很大帮助！

我的 git repo 位于[https://github.com/kerrieyee/sample_app](https://github.com/kerrieyee/sample_app)和 rspec 结果如下：

```
Macintosh-143:sample_app jeffreyyee$ bundle exec rspec spec/
..................................................................FF........FFFF.........

Failures:

  1) User pages index delete links as an admin user 
 Failure/Error: it { should have_link('delete', href: user_path(User.first)) }
   expected link "delete" to return something
 # ./spec/requests/user_pages_spec.rb:45:in `block (5 levels) in <top (required)>'

  2) User pages index delete links as an admin user should be able to delete another user
 Failure/Error: expect { click_link('delete') }.to change(User, :count).by(-1)
 Capybara::ElementNotFound:
   no link with title, id or text 'delete' found
 # (eval):2:in `click_link'
 # ./spec/requests/user_pages_spec.rb:47:in `block (6 levels) in <top (required)>'
 # ./spec/requests/user_pages_spec.rb:47:in `block (5 levels) in <top (required)>'

  3) User pages signup with valid information should create a user
 Failure/Error: fill_in "Confirmation", with: "foobar"
 Capybara::ElementNotFound:
   cannot fill in, no text field, text area or password field with id, name, or label 'Confirmation' found
 # (eval):2:in `fill_in'
 # ./spec/requests/user_pages_spec.rb:96:in `block (4 levels) in <top (required)>'

  4) User pages signup with valid information after saving the user 
 Failure/Error: fill_in "Confirmation", with: "foobar"
 Capybara::ElementNotFound:
   cannot fill in, no text field, text area or password field with id, name, or label 'Confirmation' found
 # (eval):2:in `fill_in'
 # ./spec/requests/user_pages_spec.rb:96:in `block (4 levels) in <top (required)>'

  5) User pages signup with valid information after saving the user 
 Failure/Error: fill_in "Confirmation", with: "foobar"
 Capybara::ElementNotFound:
   cannot fill in, no text field, text area or password field with id, name, or label 'Confirmation' found
 # (eval):2:in `fill_in'
 # ./spec/requests/user_pages_spec.rb:96:in `block (4 levels) in <top (required)>'

  6) User pages signup with valid information after saving the user 
 Failure/Error: fill_in "Confirmation", with: "foobar"
 Capybara::ElementNotFound:
   cannot fill in, no text field, text area or password field with id, name, or label 'Confirmation' found
 # (eval):2:in `fill_in'
 # ./spec/requests/user_pages_spec.rb:96:in `block (4 levels) in <top (required)>'

Finished in 4.83 seconds
89 examples, 6 failures

Failed examples:

rspec ./spec/requests/user_pages_spec.rb:45 # User pages index delete links as an admin user 
rspec ./spec/requests/user_pages_spec.rb:46 # User pages index delete links as an admin    user should be able to delete another user
rspec ./spec/requests/user_pages_spec.rb:99 # User pages signup with valid information should create a user
rspec ./spec/requests/user_pages_spec.rb:108 # User pages signup with valid information after saving the user 
rspec ./spec/requests/user_pages_spec.rb:109 # User pages signup with valid information after saving the user 
rspec ./spec/requests/user_pages_spec.rb:110 # User pages signup with valid information after saving the user 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-31T14:04:46.557

请注意 password_confirmation 标签文本是**Confirm Password**，您需要像下面这样更新规范：将 fill_in "Confirmation" 更改为："foobar 到 fill_in "Confirm Password"，使用："foobar 我也遇到了这个问题，并通过上述方法解决方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T01:12:23.323

我最终通过首先取出我在 new.html.erb 和 edit.html.erb 中渲染的部分来解决前 4 个失败的测试。因为我不是经验丰富的程序员，所以我不知道如何修复教程中的代码，如果有人能告诉我哪里出了问题，我将不胜感激。这是重构的代码：

```
<% provide(:title, 'Sign up') %>
<h1>Sign up</h1>

<div class="row">
  <div class="span6 offset3">
    <%= form_for(@user) do |f| %>
      <%= render 'fields', f: f %>
      <%= f.submit "Create my account", class: "btn btn-large btn-primary" %>
    <% end %>
  </div>
</div> 
```

这是部分：

```
<%= render 'shared/error_messages' %>

<%= f.label :name %>
<%= f.text_field :name %>

<%= f.label :email %>
<%= f.text_field :email %>

<%= f.label :password %>
<%= f.password_field :password %>

<%= f.label :password_confirmation, "Confirm Password" %>
<%= f.password_field :password_confirmation %> 
```

我通过查看[Michael Hartl](https://github.com/mhartl/sample_app/blob/master/app/views/users/index.html.erb)在 github 上的 index.html.erb 文件解决了最后两个错误。本质上，问题在于 index.html.erb 代码需要调用部分 _users.html.erb。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-12T19:28:17.197

确保 :password_confirmation 标签中的文本在 user_pages_spec.rb 和 new.html.erb 中都匹配。例如，您希望 new.html.erb 中的部分看起来像这样：

```
 <%= render 'shared/error_messages' %>
        <%= f.label :name %>
        <%= f.text_field :name %>
        <%= f.label :email %>
        <%= f.text_field :email %>
        <%= f.label :password %>
        <%= f.password_field :password %>
        <%= f.label :password_confirmation, "Confirm Password" %>
        <%= f.password_field :password_confirmation %>
        <%= f.submit "Create my account", class: "btn btn-large btn-primary" %>
    <% end %> 
```

和 user_pages_spec.rb 像这样：

```
 describe "with valid information" do
        before do
            fill_in "Name",             with: "Example User"
            fill_in "Email",            with: "user@example.com"
            fill_in "Password",         with: "foobar"
            fill_in "Confirm Password", with: "foobar"
        end
        it "should create a user" do
            expect { click_button submit}.to change(User, :count).by(1)
        end
    end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-28T23:15:41.633

Alex De Simone 是对的，我遇到了同样的问题，他解决了。非常感谢。Capybara 做我们所说的浏览器测试。这意味着它有点像去这里点击那个。

作为我遇到的问题以及我如何解决它的一个例子。

错误

```
Capybara::ElementNotFound 
```

表示它正在寻找要单击的按钮，但找不到它。如果你看代码

```
fill_in "Confirmation", with: "foobar" 
```

然后你看看网页，上面写着确认密码。你可以通过输入让你的测试通过

```
fill_in "Confirm Password", with: "foobar" 
```

您基本上只需要将水豚测试中的字符串与网页上显示的内容进行匹配即可。

# android - Android 上的双文本 TextViews

> ID：11173652
> 
> 赞同：1
> 
> 时间：2012-06-23T22:57:13.943
> 
> 标签：android, textview

我目前正在研究 android 项目，我希望有一个包含两行代码的文本视图。我知道我可以在中间放一个换行符来换行，但我想做的远不止这些。

基本上我想要实现的是在第一行我有使用普通文本设计的文本，在下一行文本将采用不同的样式，即字体颜色更小且略有不同。

我试过搜索这个并且在任何地方都找不到任何东西。

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T23:03:23.313

选项#1：只需`TextView`在垂直方向使用两个小部件`LinearLayout`

选项 #2：`Html.fromHtml()`用于将所需内容的 HTML 表示转换为`Spanned`可以传递给的对象`setText()`

# c++ - 如何使用 C++ 创建一个工具来解析 XML 文件

> ID：11173653
> 
> 赞同：0
> 
> 时间：2012-06-23T22:57:25.050
> 
> 标签：c++, xml

我有一些包含不同功能信息的 XML 文件。我正在尝试创建一个工具，该工具可以在创建这些文件后从这些文件中提取该信息（函数名称、参数编号、类型、返回值等）

稍后我将处理这些提取的信息来创建一个新的 XML 文件。我的编程经验有限，而且都是用 C++ 编写的。任何开始的提示将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T23:17:27.093

如果您只想能够读取和写入 XML 文件，最好使用 XML 库而不是重新发明轮子。

由于尚不完全清楚您要做什么，因此可以从以下线程开始：[What is the best open XML parser for C++?](https://stackoverflow.com/questions/170686/best-open-xml-parser-for-c) [堆栈溢出]

它目前已关闭，但它有几个很好的答案可以帮助您找出适合您情况的最佳库。

如果您在使用它时需要更多帮助，请随时编辑您的问题、评论或发布有关该主题的更具体的问题。

快乐的编码和好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T00:50:11.530

我会建议[TinyXML](http://sourceforge.net/projects/tinyxml/)，它体积小、重量轻且适用于许多情况，它还具有非病毒许可。

我经常使用它，它非常有用，而且……以防万一，还有[TinyXPath](http://sourceforge.net/projects/tinyxpath/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T09:18:27.777

除非您将其作为一个项目来提高您的 C++ 能力和对 XML 的理解，否则我建议您不要尝试自己编写解析代码。使用已经编写好的内容，您将获得更快的结果，并且有许多选择可供您选择。我个人喜欢[RapidXML](http://rapidxml.sourceforge.net/)。添加到您的代码中非常简单（您只需要#include 一或两个 .hpp 文件 - 不需要库），它完成了我目前需要的一切，主要是解析来自 SOAP 响应的数据。该站点还提供了一个全面的教程，使您能够快速启动和运行。

# ruby-on-rails - rails，nginx 服务器说 libxslt.so 没有可用的版本信息

> ID：11173655
> 
> 赞同：0
> 
> 时间：2012-06-23T22:57:32.957
> 
> 标签：ruby-on-rails, apache, nginx, capistrano, ubuntu-12.04

当我尝试启动 nginx 时，会发生这种情况。不知道我需要做什么。阿帕奇关闭。

```
sudo nginx 
nginx: /usr/local/lib/libxslt.so.1: no version information available (required by nginx)
nginx: /usr/local/lib/libxslt.so.1: no version information available (required by nginx)
nginx: [emerg] bind() to 0.0.0.0:80 failed (98: Address already in use)
nginx: [emerg] bind() to 0.0.0.0:80 failed (98: Address already in use)
nginx: [emerg] bind() to 0.0.0.0:80 failed (98: Address already in use)
nginx: [emerg] bind() to 0.0.0.0:80 failed (98: Address already in use)
nginx: [emerg] bind() to 0.0.0.0:80 failed (98: Address already in use)
nginx: [emerg] still could not bind() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T05:06:53.620

看来真正的问题是“地址已在使用中”。您可能已经将 Apache 或其他 Nginx 实例绑定到端口 80。您可以使用`lsof -i tcp:80`来检查。

链接器警告就是：警告。很可能当你编译 Nginx 时，它链接到不同版本的 libxslt（可能在 /usr/lib 下），但在运行时，它会在 /usr/local/lib 下找到版本。无论如何，它不应该阻止 Nginx 运行。

# python - 可以部分应用不带关键字参数的函数的第二个参数吗？

> ID：11173660
> 
> 赞同：52
> 
> 时间：2012-06-23T22:58:26.810
> 
> 标签：python, arguments, partial-application

以python内置`pow()`函数为例。

```
xs = [1,2,3,4,5,6,7,8]

from functools import partial

list(map(partial(pow,2),xs))

>>> [2, 4, 8, 16, 32, 128, 256] 
```

但是我如何将 xs 提高到 2 的幂呢？

要得到`[1, 4, 9, 16, 25, 49, 64]`

```
list(map(partial(pow,y=2),xs))

TypeError: pow() takes no keyword arguments 
```

我知道列表理解会更容易。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-06-23T23:29:29.587

# 不

根据[文档](http://docs.python.org/library/functools.html#functools.partial.args)，*不能*这样做（强调我自己的）：[`partial`](http://docs.python.org/library/functools.html#functools.partial)

 *> **部分参数**
> 
> > 将附加到位置参数的*最左边*的位置参数

* * *

你总是可以“修复”`pow`关键字参数：

```
_pow = pow
pow = lambda x, y: _pow(x, y) 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-06-23T23:43:03.747

我想我会使用这个简单的单线：

```
import itertools
print list(itertools.imap(pow, [1, 2, 3], itertools.repeat(2))) 
```

**更新：**

我还想出了一个比有用的解决方案更有趣的解决方案。这是一个漂亮的语法糖，受益于 Python3中的`...`字面意思。`Ellipsis`它是 的修改版本`partial`，允许省略最左边和最右边之间的一些位置参数。唯一的缺点是您不能再将省略号作为参数传递。

```
import itertools
def partial(func, *args, **keywords):
    def newfunc(*fargs, **fkeywords):
        newkeywords = keywords.copy()
        newkeywords.update(fkeywords)
        return func(*(newfunc.leftmost_args + fargs + newfunc.rightmost_args), **newkeywords)
    newfunc.func = func
    args = iter(args)
    newfunc.leftmost_args = tuple(itertools.takewhile(lambda v: v != Ellipsis, args))
    newfunc.rightmost_args = tuple(args)
    newfunc.keywords = keywords
    return newfunc

>>> print partial(pow, ..., 2, 3)(5) # (5^2)%3
1
>>> print partial(pow, 2, ..., 3)(5) # (2^5)%3
2
>>> print partial(pow, 2, 3, ...)(5) # (2^3)%5
3
>>> print partial(pow, 2, 3)(5) # (2^3)%5
3 
```

所以原始问题的解决方案是这个版本的部分`list(map(partial(pow, ..., 2),xs))`

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2016-05-26T18:12:15.030

为什么不创建一个快速的 lambda 函数来重新排序 args 和部分

```
partial(lambda p, x: pow(x, p), 2) 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-06-23T23:10:46.610

您可以为此创建一个辅助函数：

```
from functools import wraps
def foo(a, b, c, d, e):
    print('foo(a={}, b={}, c={}, d={}, e={})'.format(a, b, c, d, e))

def partial_at(func, index, value):
    @wraps(func)
    def result(*rest, **kwargs):
        args = []
        args.extend(rest[:index])
        args.append(value)
        args.extend(rest[index:])
        return func(*args, **kwargs)
    return result

if __name__ == '__main__':
    bar = partial_at(foo, 2, 'C')
    bar('A', 'B', 'D', 'E') 
    # Prints: foo(a=A, b=B, c=C, d=D, e=E) 
```

免责声明：我没有用关键字参数测试过这个，所以它可能会因为它们而爆炸。另外我不确定这是否`@wraps`应该用于，但它似乎是正确的-ish。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-06-23T23:16:55.200

你可以使用闭包

```
xs = [1,2,3,4,5,6,7,8]

def closure(method, param):
  def t(x):
    return method(x, param)
  return t

f = closure(pow, 2)
f(10)
f = closure(pow, 3)
f(10) 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-02-27T18:57:56.143

您可以使用 执行此操作`lambda`，它比 更灵活`functools.partial()`：

```
pow_two = lambda base: pow(base, 2)
print(pow_two(3))  # 9 
```

更普遍：

```
def bind_skip_first(func, *args, **kwargs):
  return lambda first: func(first, *args, **kwargs)

pow_two = bind_skip_first(pow, 2)
print(pow_two(3))  # 9 
```

lambda 的一个缺点是某些库无法序列化它。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-06-23T22:59:28.917

一种方法是：

```
def testfunc1(xs):
    from functools import partial
    def mypow(x,y): return x ** y
    return list(map(partial(mypow,y=2),xs)) 
```

但这涉及重新定义 pow 函数。

如果不需要使用 partial ，那么一个简单的 lambda 就可以了

```
def testfunc2(xs):
    return list(map(lambda x: pow(x,2), xs)) 
```

映射 2 的战俘的具体方法是

```
def testfunc5(xs):
    from operator import mul
    return list(map(mul,xs,xs)) 
```

但是这些都没有直接解决与关键字参数相关的部分应用问题

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-06-24T10:00:31.137

如前所述，[`functools.partial`](https://docs.python.org/3/library/functools.html#functools.partial)如果您想要的函数`partial`不接受关键字参数，这是一个限制。

如果您不介意使用外部库¹，您可以使用[`iteration_utilities.partial`](https://iteration-utilities.readthedocs.io/en/latest/generated/partial.html)它有一个支持占位符的部分：

```
>>> from iteration_utilities import partial
>>> square = partial(pow, partial._, 2)  # the partial._ attribute represents a placeholder
>>> list(map(square, xs))
[1, 4, 9, 16, 25, 36, 49, 64] 
```

* * *

¹免责声明：我是该库的作者（如果您有兴趣，[`iteration_utilities`](https://github.com/MSeifert04/iteration_utilities)可以[在文档中找到安装说明）。](http://iteration-utilities.readthedocs.io/en/latest/installation.html)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-08-13T19:32:59.487

非常通用的[功能](http://funcy.readthedocs.io/en/stable/index.html)包括一个`rpartial`完全解决这个问题的功能。

```
xs = [1,2,3,4,5,6,7,8]
from funcy import rpartial
list(map(rpartial(pow, 2), xs))
# [1, 4, 9, 16, 25, 36, 49, 64] 
```

它只是引擎盖下的 lambda：

```
def rpartial(func, *args):
    """Partially applies last arguments."""
    return lambda *a: func(*(a + args)) 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2020-12-28T18:17:47.487

即使已经回答了这个问题，您也可以使用以下食谱获得您正在寻找的结果[`itertools.repeat`](https://docs.python.org/3/library/itertools.html#itertools.repeat)：

```
from itertools import repeat

xs = list(range(1, 9))  # [1, 2, 3, 4, 5, 6, 7, 8]
xs_pow_2 = list(map(pow, xs, repeat(2)))  # [1, 4, 9, 16, 25, 36, 49, 64] 
```

希望这可以帮助某人。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-09-14T13:03:16.123

如果您不能使用 lambda 函数，您还可以编写一个简单的包装函数来重新排序参数。

```
def _pow(y, x):
    return pow(x, y) 
```

然后打电话

```
list(map(partial(_pow,2),xs))

>>> [1, 4, 9, 16, 25, 36, 49, 64] 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-08-26T20:02:32.943

# **是的**

**如果您创建了部分类**

```
class MyPartial:
    def __init__(self, func, *args):
        self._func = func
        self._args = args

    def __call__(self, *args):
        return self._func(*args, *self._args) # swap ordering

xs = [1,2,3,4,5,6,7,8]
list(map(MyPartial(pow,2),xs))

>>> [1, 4, 9, 16, 25, 36, 49, 64] 
```*

# php - 预览长文本

> ID：11173662
> 
> 赞同：0
> 
> 时间：2012-06-23T22:59:07.340
> 
> 标签：php, html, string, text, newline

我正在使用[PHP](http://www.php.net/)，我想创建一个函数，给定任意长度和高度的文本，返回相同文本的限制版本，最多 500 个字符和 10 行。

这是我到目前为止所拥有的：

```
function preview($str)
{
    $partialPreview = explode("\n", substr($str, 0, 500));
    $partialPreviewHeight = count($partialPreview);
    $finalPreview = "";

    // if it has more than 10 lines
    if ($partialPreviewHeight > 10) {
        for ($i = 0; $i < 10; $i++) {
            $finalPreview .= $partialPreview[$i];
        }
    } else {
        $finalPreview = substr($str, 0, 500);
    }

    return $finalPreview;
} 
```

我有两个问题：

*   是否使用`\n`正确来检测新的换行符？我知道有些系统使用`\n`, other`\r\n`和 others `\r`，但是`\n`是最常见的。
*   有时，如果最后有一个 HTML 实体（如`&quot;`（引号）），它会保留为`&quot`，因此它不是有效的 HTML。我怎样才能防止这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T23:09:17.920

首先分别用and或and替换`<br />`标签。`<br />\n``</p><p>``</div><div>``</p>\n<p>``</div>\n<div>`

然后将 PHP 函数用于[条形标签](http://php.net/manual/fr/function.strip-tags.php)，它应该在每个应该有换行符的地方产生一个带有换行符的漂亮纯文本。

然后你可以替换`\r\n`为`\n`一致性。只有在那之后，您才能提取所需的文本长度。

您可能希望使用自动[换行](http://php.net/manual/fr/function.wordwrap.php)来实现 10 行目标。为了使自动换行起作用，您需要为每行定义多个字符，并且自动换行会注意不影响中间词。

您可能希望在使用 @PeeHaa 建议的[wordwrap](http://www.php.net/manual/en/function.html-entity-decode.php)之前使用 html_entity_decode 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T23:09:09.427

> 是否正确使用 \n 来检测新的换行符？我知道有些系统使用\n，其他的\r\n 和其他的\r，但\n 是最常见的。

这取决于数据的来源。不同的操作系统有不同的换行符。

Windows 使用`\r\n`，*nix（包括 mac OS）使用`\n`，（非常）旧的 mac 使用`\r`。如果数据来自网络（例如文本区域），它将（/应该）始终是`\r\n`. 因为这是[规范](http://dev.w3.org/html5/spec/Overview.html#the-textarea-element)规定[用户代理应该做](https://stackoverflow.com/a/7058202/508666)的事情。

> 有时，如果最后有一个像“（引号）这样的 HTML 实体，它会保留为 "，因此它不是有效的 HTML。我该如何防止这种情况发生？

在剪切文本之前，您可能希望将 html 实体转换回普通文本。通过使用[`htmlspecialchars_decode()`](http://www.php.net/manual/en/function.htmlspecialchars-decode.php)或[`html_entity_decode`](http://www.php.net/manual/en/function.html-entity-decode.php)根据您的需要。现在您将不会遇到破坏实体的问题（如果需要，请不要忘记再次对其进行编码）。

另一种选择是只打破空白字符上的文本，而不是硬字符限制。这样，您的“摘要”中只会包含完整的单词。

我创建了一个应该处理大多数问题的类。正如我已经说过的，当数据来自 textarea 时，它将始终是`\r\n`，但是为了能够解析其他换行符，我想出了以下内容（未经测试）：

```
class Preview
{
    protected $maxCharacters;
    protected $maxLines;
    protected $encoding;
    protected $lineBreaks;

    public function __construct($maxCharacters = 500, $maxLines = 10, $encoding = 'UTF-8', array $lineBreaks = array("\r\n", "\r", "\n"))
    {
        $this->maxCharacters = $maxCharacters;
        $this->maxLines = $maxLines;
        $this->encoding = $encoding;
        $this->lineBreaks = $lineBreaks;
    }

    public function makePreview($text)
    {
        $text = $this->normalizeLinebreaks($text);

        // this prevents the breaking of the &quote; etc
        $text = html_entity_decode($text, ENT_QUOTES, $this->encoding);

        $text = $this->limitLines($text);

        if (mb_strlen($text, $this->encoding) > $this->maxCharacters) {
            $text = $this->limitCharacters($text);
        }

        return html_entity_decode($text, ENT_QUOTES, $this->encoding);
    }

    protected function normalizeLinebreaks($text)
    {
        return str_replace($lineBreaks, "\n", $text);
    }

    protected function limitLines($text)
    {
        $lines = explode("\n", $text);
        $limitedLines = array_slice($lines, 0, $this->maxLines);

        return implode("\n", $limitedLines);
    }

    protected function limitCharacters($text)
    {
        return substr($text, 0, $this->maxCharacters);
    }
}

$preview = new Preview();
echo $preview->makePreview('Some text which will be turned into a preview.'); 
```

# jquery - Json 示例 Web 服务 URL

> ID：11173668
> 
> 赞同：-2
> 
> 时间：2012-06-23T22:59:51.543
> 
> 标签：jquery, json, image, web-services, gallery

我正在尝试使用 jquery 和 html5 制作图片库。我在前端工作。你们中的任何人都可以建议一个返回 json 对象（带有 imageURL）的 json 网络服务吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T23:23:26.437

这是一个示例[推特](http://api.twitter.com/1/statuses/public_timeline.json)响应

# silverlight - Windows Phone 灰色过渡框

> ID：11173671
> 
> 赞同：1
> 
> 时间：2012-06-23T23:00:11.257
> 
> 标签：silverlight, windows-phone-7, silverlight-toolkit

我在 Windows Phone 7 中遇到灰色过渡帧问题。

我正在使用 Silverlight for Windows Phone 工具包，除了颜色之外，转换工作正常。突然，过渡帧的颜色变成了灰色。就我的应用而言，我将覆盖应用资源，如下所示：

```
 (App.Current.Resources["PhoneBackgroundBrush"] as SolidColorBrush).Color = Colors.White;
        (App.Current.Resources["PhoneForegroundBrush"] as SolidColorBrush).Color = Colors.Black; 
```

当我不这样做时，如果手机上的主题是深色的，则过渡框是黑色的，如果手机上的主题是白色的，则过渡框是白色的。应该如此。

一旦我设置了资源（背景和前景画笔），如果手机上的主题是深色的，则过渡框变为**灰色，如果手机上的主题为****白色**，则过渡框变为白色。

任何猜测地球上发生了什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T15:26:09.193

OK, I have found what caused this, and it's the most unusual thing. I wasted 4 hours and then realized what was the thing I changed compared to the last version of my app.

I realized that I added the AdDuplex ad control. I have no idea how and why this influences the color of the transition page, but whenever I debug my app using trial mode and display the ad control, the transition page becomes gray. When I am not in trial but "paid" mode, the ad is not visible and the transition page is white.

Removing the AdDuplex control helps. (not such a great solution)

# php - 如何禁用 php 中的 CURLOPT_HTTPAUTH 选项？

> ID：11173677
> 
> 赞同：1
> 
> 时间：2012-06-23T23:01:02.363
> 
> 标签：php, curl, libcurl

所以这就是我到目前为止所拥有的：

```
self::$connection = curl_init();
curl_setopt(self::$connection, CURLOPT_HTTPAUTH, CURLAUTH_BASIC);
curl_setopt(self::$connection, CURLOPT_USERPWD, $username . ":" . $password);
curl_setopt(self::$connection, CURLOPT_URL, $url);

curl_exec(self::$connection); // Do a request that uses Basic Auth
curl_setopt(self::$connection, CURLOPT_HTTPAUTH, false); // <-- Not working as expected - I want to disable Basic Auth here
curl_setopt(self::$connection, CURLOPT_URL, $anotherURL);
curl_exec(self::$connection); // <-- Not working as expected - I want to do a request that does NOT use Basic Auth. 
```

那么，如果我将 CURLOPT_HTTPAUTH 选项初始化为 CURLAUTH_BASIC，我将如何禁用它？

我需要使用相同的句柄（即 self::$connection）以获得持久的 HTTP 连接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T01:07:29.667

如果它对任何人有帮助，这就是我最终要做的事情：

```
if ($enableBasicAuth){
    self::$httpHeaders['Authorization'] = 'Basic '.base64_encode("$username:$password");    
}
else if (isset(self::$httpHeaders['Authorization'])){
    unset(self::$httpHeaders['Authorization']);    // Disable Basic Auth
}

// Convert the $httpHeaders array into a format that is used by CURLOPT_HTTPHEADER
$httpHeadersRaw = array();
foreach (self::$httpHeaders as $header=>$value){
    $httpHeadersRaw[] = $header.': '.$value;
}
curl_setopt(self::$connection, CURLOPT_HTTPHEADER, $httpHeadersRaw); // Set the HTTP Basic Auth header manually 
```

基本上我只是使用 CURLOPT_HTTPHEADER 选项手动启用/禁用基本身份验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T23:06:18.577

重新设置为无...

```
curl_setopt(self::$connection, CURLOPT_HTTPAUTH, 0); 
```

这是一个位掩码，0 不会设置任何位...

如果这是一个连续的请求，您可能还想重置用户/密码：

```
curl_setopt(self::$connection, CURLOPT_USERPWD, ''); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-16T18:14:45.053

正如 Baseer 解释的那样，诀窍是您永远不应该依赖，`curl_setopt_array()`而是始终将整个选项数组直接设置在`CURLOPT_HTTPHEADER`with上`curl_setopt()`。如果您想放弃基本身份验证，您可以简单地从标题中删除“授权”行。

这是一个易于理解的示例：

```
<?php
$handle = curl_init();
curl_setopt($handle, CURLOPT_URL, 'http://example.com');

// Do a request with basic authentication.
$headers = [
  'Accept: */*',
  'Authorization: Basic ' . base64_encode('username:password'),
];
curl_setopt($handle, CURLOPT_HTTPHEADER, $headers);
curl_exec($handle);

// Do a subsequent request without basic authentication.
$headers = [
  'Accept: */*',
];
curl_setopt($handle, CURLOPT_HTTPHEADER, $headers);
curl_exec($handle);
?> 
```

# r - 如何阅读 R 函数的源代码？

> ID：11173683
> 
> 赞同：14
> 
> 时间：2012-06-23T23:03:07.187
> 
> 标签：r, r-faq

我有一个数据框，我想了解摘要如何生成它的信息。具体来说，summary 如何为因子的每个级别中的元素数生成计数。我可以使用摘要，但我想学习如何更好地使用因子。当我尝试 ?summary 时，我只会得到一般信息。这是不可能的，因为它是字节码吗？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-06-23T23:11:52.817

我们在您输入时看到`summary`的是

```
> summary
function (object, ...) 
UseMethod("summary")
<bytecode: 0x0456f73c>
<environment: namespace:base> 
```

这告诉我们，summary 是一个通用函数，并且附加了许多方法。要查看这些方法实际上是什么，我们可以尝试

```
> methods(summary)
 [1] summary.aov             summary.aovlist         summary.aspell*        
 [4] summary.connection      summary.data.frame      summary.Date           
 [7] summary.default         summary.ecdf*           summary.factor         
[10] summary.glm             summary.infl            summary.lm             
[13] summary.loess*          summary.manova          summary.matrix         
[16] summary.mlm             summary.nls*            summary.packageStatus* 
[19] summary.PDF_Dictionary* summary.PDF_Stream*     summary.POSIXct        
[22] summary.POSIXlt         summary.ppr*            summary.prcomp*        
[25] summary.princomp*       summary.srcfile         summary.srcref         
[28] summary.stepfun         summary.stl*            summary.table          
[31] summary.tukeysmooth*   

   Non-visible functions are asterisked 
```

在这里，我们看到了与该函数关联的所有方法`summary`。这意味着在 lm 对象上调用摘要时的代码与在 data.frame 上调用摘要时的代码不同。这很好，因为我们不希望对这两个对象以相同的方式进行摘要。

要查看在 data.frame 上调用 summary 时运行的代码，您只需键入

```
summary.data.frame 
```

如方法列表所示。您将能够检查并研究它，并使用打印的代码做任何您想做的事情。您提到您对因子感兴趣，因此您可能想要检查`summary.factor`. 现在您可能会注意到打印的某些方法旁边有一个星号 (*)，这意味着它们是不可见的。这实质上意味着您不能只键入函数的名称来尝试查看代码。

```
> summary.prcomp
Error: object 'summary.prcomp' not found 
```

但是，如果您确定要查看代码实际上是什么，则可以使用该`getAnywhere`函数来查看它。

```
> getAnywhere(summary.prcomp)
A single object matching ‘summary.prcomp’ was found
It was found in the following places
  registered S3 method for summary from namespace stats
  namespace:stats
with value

function (object, ...) 
{
    vars <- object$sdev^2
    vars <- vars/sum(vars)
    importance <- rbind(`Standard deviation` = object$sdev, `Proportion of Variance` = round(vars, 
        5), `Cumulative Proportion` = round(cumsum(vars), 5))
    colnames(importance) <- colnames(object$rotation)
    object$importance <- importance
    class(object) <- "summary.prcomp"
    object
}
<bytecode: 0x03e15d54>
<environment: namespace:stats> 
```

希望这可以帮助您在将来更轻松地探索 R 中的代码。

For even more details you can view [Volume 6/4 of The R Journal (**warning, pdf**)](http://www.r-project.org/doc/Rnews/Rnews_2006-4.pdf) and read Uwe Ligge's "R Help Desk" section which deals with viewing the source code of R functions.

# javascript - 如何检测单选按钮取消选择事件？

> ID：11173685
> 
> 赞同：61
> 
> 时间：2012-06-23T23:03:21.383
> 
> 标签：javascript, jquery

有没有一种简单的方法可以在单选按钮上附加“取消选择”事件？似乎更改事件仅在选择按钮时触发。

HTML

```
<input type="radio" id="one" name="a" />
<input type="radio" id="two" name="a" /> 
```

JavaScript

```
$('#one').change(function() {
    if(this.checked) {
        // do something when selected
    } else { // THIS WILL NEVER HAPPEN
        // do something when deselected
    }
});​ 
```

[jsFiddle](http://jsfiddle.net/WZND9/) ​</p>

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-23T23:35:57.433

你为什么不简单地创建一个自定义事件，比如说，`deselect`让它在被点击的单选组的所有成员上触发，除了被点击的元素本身？它更容易使用 jQuery 提供的事件处理 API。

**HTML**

```
<!-- First group of radio buttons -->
<label for="btn_red">Red:</label><input id="btn_red" type="radio" name="radio_btn" />
<label for="btn_blue">Blue:</label><input id="btn_blue"  type="radio" name="radio_btn" />
<label for="btn_yellow">Yellow:</label><input id="btn_yellow" type="radio" name="radio_btn" />
<label for="btn_pink">Pink:</label><input id="btn_pink"  type="radio" name="radio_btn" />
<hr />
<!-- Second group of radio buttons -->
<label for="btn_red_group2">Red 2:</label><input id="btn_red_group2" type="radio" name="radio_btn_group2" />
<label for="btn_blue_group2">Blue 2:</label><input id="btn_blue_group2"  type="radio" name="radio_btn_group2" />
<label for="btn_yellow_group2">Yellow 2:</label><input id="btn_yellow_group2" type="radio" name="radio_btn_group2" />
<label for="btn_pink_group2">Pink 2:</label><input id="btn_pink_group2"  type="radio" name="radio_btn_group2" /> 
```

**jQuery**

```
// Attaching click event handlers to all radio buttons...
$('input[type="radio"]').bind('click', function(){
    // Processing only those that match the name attribute of the currently clicked button...
    $('input[name="' + $(this).attr('name') + '"]').not($(this)).trigger('deselect'); // Every member of the current radio group except the clicked one...
});

$('input[type="radio"]').bind('deselect', function(){
    console.log($(this));
}) 
```

`name`取消选择事件将仅在同一无线电组的成员（具有相同属性的元素）中触发。

**[jsFiddle 解决方案](http://jsfiddle.net/FaRYg/)**

**编辑：**为了考虑附加标签标签的所有可能位置（包装单选元素或通过 id 选择器附加），最好使用`onchange`事件来触发处理程序。感谢[浮士德](https://stackoverflow.com/users/613004/faust)指出这一点。

```
$('input[type="radio"]').on('change', function(){
    // ...
} 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-06-24T02:37:45.467

您可以相对轻松地创建自定义“取消选择”事件，但您已经发现标准更改事件仅在新选中的单选按钮上触发，而不是在之前选中的刚刚取消选中的单选按钮上触发。

如果您希望能够说类似的话：

```
$("#one").on("deselect", function() {
    alert("Radio button one was just deselected");
}); 
```

然后从您的文档就绪处理程序运行类似以下函数（或将代码直接放在您的文档就绪处理程序中）：

```
function setupDeselectEvent() {
    var selected = {};
    $('input[type="radio"]').on('click', function() {
        if (this.name in selected && this != selected[this.name])
            $(selected[this.name]).trigger("deselect");
        selected[this.name] = this;
    }).filter(':checked').each(function() {
        selected[this.name] = this;
    });
} 
```

**工作演示：http:** [//jsfiddle.net/s7f9s/2](http://jsfiddle.net/s7f9s/2)

这样做是在页面上的所有收音机上放置一个点击处理程序（这不会阻止您将自己的点击事件处理程序添加到相同的收音机），它将检查同一组中是否有先前选择的收音机（即，具有相同的名称），如果是，则在*该*收音机上触发“取消选择”事件。然后它将刚刚单击的一个保存为当前的。如果您单击已选中的单选或之前没有选中单选，则不会触发“取消选择”事件。最后的`.filter().each()`一点是记下*已经*选择了哪些收音机。（如果您需要在同一页面上处理多个具有相同名称的独立无线电组的表格，请相应地更新上述功能。）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-08T23:09:29.623

我发现在不放入新框架来创建`deselected`事件的情况下执行此操作的最简单方法是更改*​​任何单选按钮在其组中的***所有**单选按钮上触发`update`事件，然后在更新事件中定义您想要的行为.

 **缺点是取消选择分支中的代码将运行，即使之前未选择单选按钮。如果您所做的只是简单地显示、隐藏或禁用 UI 元素，那应该没什么大不了的。

要使用您的示例：

```
buttons = $('input[name="a"]');
buttons.change(function() {
    buttons.trigger('update:groupA');

}).bind('update:groupA', function(){
    if(this.checked) {
        //Do your checked things
    } else {
        //Do your unchecked things. Gets called whenever any other button is selected, so don't toggle or do heavy computation in here.
    }
});​ 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-24T02:55:18.040

我认为您需要在输入级别上添加更改功能，而不是在每个单选按钮上。

试试这个：

```
$("input[name='a']").change(function() {
  $("input[name='a']").each(function(){
    if(this.checked) {
        // do something when selected
    } else {
        // do something when deselected
    }
  });   
});​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-23T23:38:02.113

我认为这可能会发生，因为`focus`事件在事件之前触发，`change`因此您单击的下一个单选将在前一个选中的单选触发更改事件之前聚焦。不过，不要引用我的话……

你可以这样做：

```
var isChecked = function(id) { alert(id + ': ' + $('#' + id).is(':checked')) }
$('input[name="a"]').change(function(){ isChecked('one') }) 
```

**演示：http:** [//jsfiddle.net/elclanrs/cD5ww/](http://jsfiddle.net/elclanrs/cD5ww/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-03-26T13:58:42.793

您可以自己触发“更改”事件。避免单选按钮无限触发彼此的“更改”事件有点棘手，但可以这样做：

```
$('input[type="radio"]').each(function() {
    var name = $(this).attr('name');
    var that = this;
    $('input[name="'+name+'"][type="radio"]').not(that)
        .on('change', function(e, alreadyTriggered) {
            if(!alreadyTriggered || alreadyTriggered.indexOf(this) == -1) {
                if(!alreadyTriggered) {
                    alreadyTriggered = [that];
                }
                alreadyTriggered.push(this);
                $(that).trigger('change', [alreadyTriggered]);
            }
    });
}); 
```

这是上述代码在工作中的**[演示。](http://jsfiddle.net/yyL7T/)**

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-12-06T22:49:28.257

**我为我的具体情况**找到了一种可能有帮助的解决方法。当“取消选择”事件可以应用于所有未选中的单选按钮时，此方法有效。

我想：

1.  ****选择单选按钮**时向元素**添加一个类**，并且**
***   **当按钮被**“取消选择”时****删除该类**。****

 ****我碰巧找到了这个问题，因为我遇到了同样的问题：

```
$('input:radio').on('change', function() {
    if( $(this).is(':checked') ) {
        $(this).addClass('my-class-for-selected-buttons')
    } else { // THIS WILL NEVER HAPPEN
        $(this).removeClass('my-class-for-selected-buttons')
    }
});​ 
```

但是，在我的情况下，解决方案要容易得多，因为我可以尝试使用 jQuery 非常简单地从所有单选按钮中删除类，然后将类添加到选定的类中：

```
$('input:radio').on('change', function() {
    $('input:radio').removeClass('my-class-for-selected-buttons') // Here!

    if( $(this).is(':checked') ) {
        $(this).addClass('my-class-for-selected-buttons')
    }
});​ 
```

通过这个简单的调整，我不需要找到触发“取消选择”事件的方法。

因此，如果在您的情况下，**您可以将事件应用于所有未选中的单选按钮，**而不仅仅是刚刚“取消选择”的单选按钮，您可以使用此措施！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-12-30T18:43:08.357

**注意：**我使用的是最新版本的 jquery：版本 3.4.1。但这也适用于旧版本。

这里的主要挑战是*更改事件 **仅** 针对已选中的单选按钮触发*。下面的代码证实了这一点。

```
$("input[name^='account']").change(function() {
    console.log($(this).prop('id') + " was checked");
});
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

<form action='#'>
    <input id='john' type='radio' name='account[]' value=''><label for='john'>John</label><br>
    <input id='jane' type='radio' name='account[]' value=''><label for='jane'>Jane</label><br>
    <input id='jeff' type='radio' name='account[]' value=''><label for='jeff'>Jeff</label><br>
    <input id='jude' type='radio' name='account[]' value=''><label for='jude'>Jude</label><br>
    <input type='text' name='amount' value=''><br>
    <input type='submit' value='submit'>
</form>
```

**我的解决方案：**通过 3 个简单的步骤处理更改事件处理程序中的所有内容：

1.  处理当前选中的单选按钮的更改。
2.  将自定义事件和处理程序附加到同一组中的所有其他单选按钮。
3.  立即触发此自定义事件。

无需在这里玩点击事件。简单的！

```
var radioBtns = $("input[name^='account']");
radioBtns.change(function() {
    // 1\. handle changes for the currently checked radio button.
    console.log($(this).prop('id') + " was checked");
    // 2\. attach custom event and handler to all other radio buttons in the same group.
    radioBtns.not(':checked').off('deselect').on('deselect', function() {
        $(this).each(function(i, e) {
            console.log($(e).prop('id') + " was not checked");
        });
    }).trigger('deselect'); // 3\. immediately trigger this custom event.

});
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

<form action='#'>
    <input id='john' type='radio' name='account[]' value=''><label for='john'>John</label><br>
    <input id='jane' type='radio' name='account[]' value=''><label for='jane'>Jane</label><br>
    <input id='jeff' type='radio' name='account[]' value=''><label for='jeff'>Jeff</label><br>
    <input id='jude' type='radio' name='account[]' value=''><label for='jude'>Jude</label><br>
    <input type='text' name='amount' value=''><br>
    <input type='submit' value='submit'>
</form>
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-05-21T16:07:19.793

我玩了一下ids。公平地说，这可能是一个低效的解决方案。

```
<input type="radio" id="radio-1" name="a" value="initial 1"/>
<input type="radio" id="radio-2" name="a" value="initial 2"/> 
```

```
let id;
$('input[id*="radio-"]').on('click', (function() {
      if (this.id != id && this.checked) {
        id = this.id;
        this.checked = true;
        console.log('selected');
      } else if (this.id == id && this.checked) {
        id = undefined;
        this.checked = false;
        console.log('deselected');
      }
})); 
```

[JSFiddle](https://jsfiddle.net/stefgonnastef/wz2b3d10/22/)

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2012-06-23T23:32:12.630

这对你怎么样？

[http://jsfiddle.net/WZND9/6/](http://jsfiddle.net/WZND9/6/)

```
 $('input').change(function() {
    if ($('#one').is(':checked')) {
        alert('checked');
    } else { 
        alert('not checked');
    }
 }); 
```******

# css - 在 CSS 中，我可以排列内联块的高度吗？

> ID：11173688
> 
> 赞同：29
> 
> 时间：2012-06-23T23:03:30.833
> 
> 标签：css

在 CSS 中，我可以排列内联块的高度吗？

我认为通过将边距设置为 0 并将高度设置为自动，块会扩展以适应可用空间，但它仍然紧紧地包裹在块周围。

```
.myclass {
    display: inline-block;
    margin: 0em;
    padding: 1em;
    height: auto;
    border: solid;
} 
```

[http://jsfiddle.net/6NQDw/](http://jsfiddle.net/6NQDw/)

我希望两个框的高度相同，但希望 div 的宽度/高度由它们的内容确定，而不是指定宽度/高度（以像素为单位）。

是否有某种填充/边距/对齐 CSS 或类似的东西我可以使用？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-23T23:13:24.387

如果您需要纯 CSS 解决方案，您可以使用`display:table-cell;`它，但请注意它在 IE7 中不起作用（我猜 IE6 现在完全被遗忘了）。

```
.myclass {
    display: table-cell;
    margin: 0em;
    padding: 1em;
    height: auto;
    border: solid;
} 
```

**[跨浏览器支持 display:table-cell](http://caniuse.com/#search=table-cell)**

实现所需内容的最佳选择是 JavaScript，但是显式设置具有动态内容的容器宽度几乎总是不是解决问题的正确方法。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-03-18T10:36:36.977

只需添加`vertical-align:top;`

例子：

```
.myclass {
    display: table-cell;
    margin: 0em;
    padding: 1em;
    height: auto;
    border: solid;
    vertical-align:top;
}
```

```
<div>
    <div class="myclass">
        line 1<br />
        line 2<br />
        line 3<br />
    </div>

    <div class="myclass">
        line 1<br />
        line 2<br />
        line 3<br />
        line 4<br />
        line 5<br />
        line 6<br />
    </div>
</div>
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-23T23:14:09.277

您可以使用`display: table-cell;`使框相互匹配的高度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-23T23:44:32.623

如果要支持 IE7，则不能使用 inline-block 或 table-cell。

只需使用 float:left 以确保安全...

否则，您将只为 IE7 使用单独的 css。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2014-10-28T17:43:49.970

它很容易为 lte ie8 添加样式表，将您的属性重置为 display:block、float:left，并使总宽度超出 99% 而不是 100%。这将为您提供所需的功能。

# android - Android：有一个活动调用另一个单独的java文件，它代表顶部动画

> ID：11173690
> 
> 赞同：0
> 
> 时间：2012-06-23T23:03:55.327
> 
> 标签：android, view, surfaceview

我正在制作一个小游戏，目前它的工作方式有点被动（它只在用户按下按钮时运行并执行操作）。

但我想在它上面添加动画，所以我有这种层，其中底层是带有按钮和文本的普通视图，在它上面我有一种表面视图，运行带有线程的画布动画。

我还希望制作这两个单独的 java 文件，因为我知道每个活动一次代表一个视图，我可以如何制作我的底视图，调用在他之上添加表面视图并让他将自己更新为他应该，而底部视图仍然是被动的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T00:33:20.417

一个 Activity 代表一个 View 是对的，但这并不意味着您不能堆叠它们。您可以使用 a`weight_sum`为 1 的 LinearLayout，添加权重为 0.8 的 SurfaceView，添加权重为 0.2 的 BottomView。这将允许您单独处理它们

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T00:37:33.267

Activity 不是 View，而是包含 View 的集合。您需要的是一个单一的活动，但将布局分成两个部分。然后，您可以说有一个包含 SurfaceView 的 LinearLayout 和下面的另一个布局容器，其中包含您的按钮和文本。然后，您应该能够独立于其下方的容器为 SurfaceView 设置动画，这似乎是您想要做的。

例如，类似的东西；

```
<LinearLayout android:id="@+id/parent">
    <SurfaceView android:id="@+id/surface">

    </SurfaceView>

    <LinearLayout  android:id="@+id/controls">
    <!-- Buttons and text -->
    </LinearLayout>
</LinearLayout> 
```

然后在 Activity 的 onCreate() 方法中，您将：

```
setContentView(R.layout.main_layout);
surfaceView = findViewById(R.id.surfaceView);
// Now you should be able to animate the surfaceView independent to the rest of the elements in the activity
surfaceView = findViewById(R.id.controls);
// Rest of initialization code. 
```

# linux - 如何为 gcc/g++ 4.5 建立软链接

> ID：11173692
> 
> 赞同：1
> 
> 时间：2012-06-23T23:03:58.803
> 
> 标签：linux, gcc, ubuntu, linker, cuda

这是我从帮助我在混合系统上安装 CUDA 的网站获得的一些说明的一部分。我正在使用 ubuntu 12.04 LTS 双启动以及英特尔集成显卡和 NVIDIA GEForce GT 540M 的混合显卡系统。

--external instructions-- 可能导致问题的最后一件事是 gcc 和 g++ 的版本。长话短说，确保 /usr/bin（以及随后的 /usr/local/cuda/bin）中的指针 gcc 和 g++ 指向 gcc-4.5 和 g++-4.5（可以通过 apt-get 获取），因为它们是nvcc 支持的最新版本。使用软链接命令来实现这一点。

--回到我身边--假设用 apt-get install gcc-4.5 g++-4.5 下载它们就足够了。

但是，我如何确保“指针”（我如何识别它们？）链接到最近下载的版本。我知道软链接命令是

ln -s "target" "symbol" (一个用于 gcc) ln -s "target" "symbol" (一个用于 g++)

我不想做错这件事，而且我对 linux 还是很陌生，所以请帮助我了解“目标”应该是什么样子以及“符号”，我会继续前进的。

亚历克斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T23:27:42.287

最好`update alternatives`用于管理系统的默认 gcc。例如，您有两个版本 4.4 和 4.5。对于 CUDA，您需要 4.4.x 版本的 gcc/ 让我们将其设置为系统默认值：

```
sudo update-alternatives \
--install /usr/bin/gcc gcc /usr/bin/gcc-4.5 40 \
--slave /usr/bin/g++ g++ /usr/bin/g++-4.5 

sudo update-alternatives \
--install /usr/bin/gcc gcc /usr/bin/gcc-4.4 60 \
--slave /usr/bin/g++ g++ /usr/bin/g++-4.4 
```

软链接可能有效，但我认为，`update alternatives`是最简单的方法。

# ios - 更改 MFMailComposeViewController 导航栏标题字体

> ID：11173693
> 
> 赞同：2
> 
> 时间：2012-06-23T23:04:17.733
> 
> 标签：ios, objective-c, iphone, ipad, mfmailcomposeviewcontroller

我有一个`MFMailComposeViewController`，当我设置主题时，它也将其设置为主题。问题是如何自定义标题和颜色的字体？

```
MFMailComposeViewController *picker = [[MFMailComposeViewController alloc] init];
[picker setSubject:@"Feedback for MyApp"]; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-24T01:56:01.840

我已经从所有视图控制器的所有导航栏的应用程序委托中更改了我的应用程序的字体。如果您不介意更改所有导航栏标题字体，请输入以下内容`applicationDidFinishLaunching:withOptions:`

```
 if ([[UINavigationBar class] respondsToSelector:@selector(appearance)])
        // set the navigation bar font to "courier-new bold 14"
        [[UINavigationBar appearance] setTitleTextAttributes:
         [NSDictionary dictionaryWithObjectsAndKeys:[UIColor lightGrayColor], UITextAttributeTextShadowColor,
                                                    [NSValue valueWithUIOffset:UIOffsetMake(1, 0)], UITextAttributeTextShadowOffset,
                                                    [UIFont fontWithName:@"CourierNewPS-BoldMT" size:14.0], UITextAttributeFont, 
                                                    nil]]; 
```

*更新：* 如果您希望它针对这种情况，您可能可以使用外观时包含：使用 Alexander Akers 在下面的评论中建议的参数，因为 UIViewController 继承自 UIAppearanceContainer。我知道appearanceWhenContainedIn：适用于其他情况，例如UINavigationBar中包含的UIBarButtonItems，因此在这种情况下它应该类似地工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T19:18:27.263

我的猜测是由于跨进程限制而无法完成。我可以更改颜色、大小和字体（如果它是内置系统字体），但尝试将其更改为我的应用程序中包含的任何字体都会失败。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-24T02:12:06.857

由于`MFMailComposeViewController`是 a 的实例`UINavigationController`，因此您可以将其 titleView 设置`topViewController`如下：

```
UIViewController *controller = [mailController topViewController];

UIView *titleView = [[UIView alloc] initWithFrame:CGRectMake(0.0f, 0.0f, 170.0f, 44.0f)];
titleView.backgroundColor = [UIColor clearColor];

UILabel *label = [[UILabel alloc] initWithFrame:titleView.bounds];
label.textColor = [UIColor whiteColor];
label.backgroundColor = [UIColor clearColor];
label.text = @"Custom Font";
label.font = [UIFont italicSystemFontOfSize:27.0f];
label.textAlignment = UITextAlignmentCenter;

[titleView addSubview:label];
[label release];

controller.navigationItem.titleView = titleView;
[titleView release]; 
```

# actionscript-3 - 在数组中添加索引

> ID：11173694
> 
> 赞同：0
> 
> 时间：2012-06-23T23:04:21.177
> 
> 标签：actionscript-3

我在 ActionScript 3.0 中添加了两个（或可能很多）矩阵。

现在我的问题是如何在这样的数组中添加索引？

```
array1[1,2,3,4] + array2[2,4,5,6] = answer[3,6,8,10] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T23:07:27.493

那是不可能的。数组只允许通过一个索引进行访问。为此，您必须自己编写一个方法。但请注意，null 将在 0、1、2、4、5 等处的答案中引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T08:23:34.510

此函数将传递给它的所有数组相加：

```
function sumOfArrays(...args):Array
{
    var sum:Array = [];
    var arrays:Array = [];
    var longestArrayLength:uint = 0;

    for (var i:int = 0, n:int = args.length; i < n; i++)
    {
        if (args[i] is Array)
        {
            arrays.push(args[i]);
            longestArrayLength = args[i].length > longestArrayLength ? args[i].length : longestArrayLength;
        }
    }

    for (var j:int = 0; j < longestArrayLength; j++)
    {
        sum[j] = 0;

        for (i = 0; i < n; i++)
        {
            sum[j] += isNaN(arrays[i][j]) ? 0 : arrays[i][j];
        }
    }

    return sum;
} 
```

它可以这样使用： `var sum:Array = sumOfArrays(array1, array2);`

# jquery - rails ajax - 刷新两个div不起作用

> ID：11173695
> 
> 赞同：0
> 
> 时间：2012-06-23T23:04:26.730
> 
> 标签：jquery, ruby-on-rails, ajax

我通过执行以下操作进行 ajax 调用来编辑表单：

```
$(".edit_meeting_button").live("click", function(){
  var mid = $(this).attr("id");
  $.ajax({type:'GET', url: '/meetings/' + mid + '/edit', success: function(data) {
    $(".right-box").html(data);
  }});
  $(".display_zone").html("<%= escape_javascript(render :partial => "display_attendees", :locals => {:all => @atendees}) %>");
  return false;
}) 
```

我得到了所需的操作，其中 div ".right-box" 显示要编辑的表单，但下一次更新 ".display_zone" 的调用无法使用一组新的@attendees 进行更新，我在调用时在控制器中处理了这些@attendees编辑表格。所以我希望“.display_zone”向我展示新的与会者，但事实并非如此。我想这会起作用，但我想问是否有更巧妙（和正确）的方法来实现这一点。

```
$(".edit_meeting_button").live("click", function(){
  var mid = $(this).attr("id");
  $.ajax({type:'GET', url: '/meetings/' + mid + '/edit', success: function(data) {
    $(".right-box").html(data);
  }});

  $.ajax({type:'GET', url: '/meetings/update_display' + mid, success: function(data) {
    $(".display_zone").html(data);
  }});

  return false;
}) 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T09:23:03.770

根据这个问题[Rendering a partial in assets](https://stackoverflow.com/questions/7336072/rendering-a-partial-in-assets-rails-3-1)我认为您不能在资产中使用“渲染”，但作为解决方案的一种解决方法，我认为如果您返回要在同一个 ajax 调用中使用的两个部分会更好而不是使用 2 个电话。

我希望这会有所帮助

# sql - 更新所有行中特定列的查询

> ID：11173697
> 
> 赞同：-4
> 
> 时间：2012-06-23T23:04:33.927
> 
> 标签：sql, sql-server, linq, sql-server-2008, sql-server-2005

我正在搜索检查所有行中的列值，并使用 where 子句作为条件进行更新。我的情况如下：

```
 SubscriptionID    ChannelURI    StudentID
        1               XXXX             4
        2               yyyy             4
        3               XXXX             3
        4               XXXX             4
        5               XXXX             2 
```

我想检查特定学生的列通道 uri 值以及所有匹配的结果以将其设置为空。

所以在这种情况下，第 3 行和第 5 行应该设置为空。

我已经尝试过了，但是它将所有`channeluri`其他行设置`studnetid = 4`为空

```
UPDATE SubscriptionCourse 
   Set ChannelURI = 1
     , DeviceId = null 
  FROM SubscriptionCourse as t1 
 INNER JOIN SubscriptionCourse as t2 
    on t1.ChannelURI = t2.ChannelURI 
 WHERE StudentId! = 4 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T19:22:38.210

通过 FROM 子句中给定的别名而不是名称来引用要更新的表（因为同一个表名被引用了两次。还使用表别名限定 WHERE 子句中对 StudentId 的引用。

```
UPDATE t1
   SET t1.ChannelURI = 1
     , t1.DeviceId   = NULL
  FROM SubscriptionCourse t1 
  JOIN SubscriptionCourse t2
    ON t1.ChannelURI = t2.ChannelURI
 WHERE t1.StudentId != 4 
```

您说您想将 ChannelURI 设置为 NULL，但您的语句设置为文字值 1。我已按照您在语句中指定的方式保留了分配，但使用表别名限定了列。

我认为这不是您的问题，但我从不在“不等于”比较运算符符号 ( `!=`) 中包含空格。我以前从未见过。我更喜欢将`<>`符号用于“不等于”比较运算符。

从您对问题的描述和您的示例来看，您根本不清楚为什么需要将表连接到自身。

`UPDATE`我建议您首先编写一个 SELECT 语句，通过用一个子句替换and`SET`子句来返回您要更新的行，`SELECT <expression_list>`表达式列表包括主键列的值、您要更新的列以及任何您要检查的其他列。一旦该 SELECT 返回您要更新的行，然后将其转换为 UPDATE 语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T07:19:17.507

```
update [table_name] set channelURI = "null" where SubscriptionID = 3 or SubscriptionID =5 
```

在这种情况下，SubscriptionID 必须是主键。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T10:06:55.397

```
Update table set channeluri = null where studentid <> 4 
```

那是你想要的吗？或者您想找到所有与学生 4 具有相同 uri 的人并将其归零？

```
Update table set channeluri = null from table inner join table t2 on table.channeluri =t2.channeluri where table.studentid <> 4 and t2.studentid =4 
```

类似的事情，我在手机上，妻子偷了电脑

# java - 打印非常大的 BigIntegers

> ID：11173698
> 
> 赞同：7
> 
> 时间：2012-06-23T23:04:48.403
> 
> 标签：java, 64-bit, biginteger, java-7

我正在尝试找出与 Java 7 x64 中的 BigIntegers 相关的以下问题。我正在尝试以极高的幂计算一个数字。代码如下，然后是问题的描述。

```
import java.math.BigInteger;

public class main {

    public static void main(String[] args) {
        // Demo calculation; Desired calculation: BigInteger("4096").pow(800*600)
        BigInteger images = new BigInteger("2").pow(15544);

        System.out.println(
            "The number of possible 16 bpc color 800x600 images is: "
            + images.toString());        
    }
} 
```

我在打印此操作的结果时遇到问题。当此代码执行时，它会打印消息但不打印`images.toString()`.

为了隔离问题，我开始计算 2 的幂，而不是该行注释中列出的所需计算。在我测试过的两个系统上，`2^15544`是触发问题的最小计算；`2^15543`工作正常。

我还没有接近主机系统的内存限制，我不相信我什至接近 VM 限制（无论如何运行 VM 参数`-Xmx1024M` `-Xms1024M`都没有效果）。

在互联网上四处寻找答案后，我开始怀疑我在`BigInteger`这些类型用于内部数据存储`String`的数组（`Integer.MAX_VALUE`如果问题出在`String`我认为可以扩展`BigInteger`和编写一个打印方法，该方法一次喷出几个字符，直到整个`BigInteger`打印出来，但我宁愿怀疑问题出在其他地方。

感谢您花时间阅读我的问题。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-24T00:02:33.813

问题是 Eclipse 中控制台视图的错误。

在我的设置中，Eclipse（Helios 和 Juno）在没有 CRLF 的情况下无法显示超过 4095 个字符的单行。最大长度可能因您的字体选择而异 - 见下文。

因此，即使是以下代码也会显示问题 - 不需要`BigInteger`.

```
StringBuilder str = new StringBuilder();
for (int i = 0; i < 4096; i++) {
    str.append('?');
}
System.out.println(str); 
```

也就是说，字符串实际上是打印在控制台中的——例如，您可以将其复制出来。只是没有显示。

作为一种解决方法，您可以`Fixed width console`在控制台首选项中设置设置，该字符串将立即出现：

![首府的看法](../Images/54e8a1eadaa58eaa127515e7f3937e08.png)

Eclipse 的 bugzilla 上对应的 bug 是：

*   [当一行达到 4096 个字符时在控制台中显示问题](https://bugs.eclipse.org/bugs/show_bug.cgi?id=353197)
*   [Texteditor 无法显示超过 4095 个字符的行。限制为 4096 个字符。](https://bugs.eclipse.org/bugs/show_bug.cgi?id=372241)
*   [编辑器不显示长行](https://bugs.eclipse.org/bugs/show_bug.cgi?id=23406)

根据这些，这是一个 Windows/GTK 错误，Eclipse 的开发人员对此无能为力。

> 该错误与文本长度为像素有关，使用较小的字体，您将能够在文本中断之前获得更多字符。

# c++ - wxWidgets、Code::Blocks 和 wxStyledTextCtrl = 对 _imp__wxSTCNameStr 的未定义引用

> ID：11173704
> 
> 赞同：0
> 
> 时间：2012-06-23T23:05:15.823
> 
> 标签：c++, linker, wxwidgets, codeblocks, wxstyledtextctrl

我正在使用 Code::Blocks，并且我已经安装了 wxWidgets 2.8。一切正常，我使用 wxSmith 创建 gui 元素，编辑它，编译/重建没有任何错误。

比我想测试 wxStyledTextCtrl，所以我将它添加到项目中。然而在行：

```
wxStyledTextCtrl* text = new wxStyledTextCtrl(this, wxID_ANY); 
```

我从链接器收到错误：

```
Undefined reference to _imp__wxSTCNameStr 
```

还有几...

我该怎么办？也许使用 wxStyledTextCtrl 需要安装一些东西或放在一些目录中？

我在互联网上发现我可以将 wx 的路径从 gcc_dll 更改为 gcc_lib，但这不起作用。

我正在使用 Windows 7 x64（但我认为这不是问题，因为我使用 x32 库、构建 x32 .exe 等）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T01:02:54.353

wxStyledTextCtrl 不是核心控件的一部分，因此它不存在于其余的编辑/按钮/列表/等控件中，它是为 wxWidgets 贡献的库之一，它存在于一个单独的库中，文件位于我的系统（linux）被称为 wx_gtk2u_stc-2.8，对你来说它应该类似于 *wx_mswu_stc-2.8* 你需要确保它是与 wx 一起构建的。

您可以在 contrib/samples/stc 子文件夹中找到 wxStyledTextControl 的示例，您可以检查此示例链接到哪个库并使用它。

# drupal - 在 drupal 中发送生日通知

> ID：11173705
> 
> 赞同：0
> 
> 时间：2012-06-23T23:05:35.097
> 
> 标签：drupal, drupal-7

当用户注册我正在构建的网站时，生日通知应该在每个用户的生日发送给他/她。我该怎么做。我已经创建了一个事件内容类型，并且在日历模块的帮助下，我在我的网站上显示了用户的生日通知，但无法在他们的生日自动将生日通知发送到他们的电子邮件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T07:35:50.843

只需使用[生日](http://drupal.org/project/birthdays)模块。

> 生日模块允许用户将他们的生日添加到他们的个人资料中。它还在单独的页面和不同的块中列出了生日。用户可以在生日那天自动收到一封电子邮件，管理员可以定期收到谁过生日的提醒。使用核心的 Profile 模块。

# .htaccess - htaccess - 创建同名的目录和文件

> ID：11173706
> 
> 赞同：0
> 
> 时间：2012-06-23T23:05:40.143
> 
> 标签：.htaccess, mod-rewrite, directory, subdirectory

我想创建一堆文件，最后不显示扩展名。最简单的方法是这样做：

```
/usa/index.php
/usa/alaska/index.php
/usa/alabama/index.php
/usa/california/index.php 
```

我想做的是这个

```
/usa/alaska.php
/usa/alabama.php
/usa/california.php 
```

并让它显示为：

```
/usa/alaska
/usa/alabama
/usa/california 
```

但是，我还有一个要添加的级别，城市

```
/usa/alaska/adak.php
/usa/alaska/anchorage.php
/usa/california/los-angles.php 
```

我不希望“.php”出现，但是每个状态都作为文件和目录存在。我想要的是一个 htaccess 规则，它提供文件的文件版本，而不是默认的目录。我还想从文件末尾剥离 .php ，这样最终结果看起来像

```
/usa 
/usa/alaska (alaska.php)
/usa/alaska/adak  (adak.php) 
```

我知道我可以通过创建所有目录并为每个目录使用 index.php 来接近这一点，但是我将拥有数千个目录，每个目录都有一个文件，更新是一件很痛苦的事。我宁愿拥有一个包含 1000 个文件的目录，而不是 1000 个包含 1 个文件的目录。

请有人指出我正确的方向并知道我正在为所有 50 个州做这件事。

吉姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T08:29:11.200

我还建议使用单个 php（例如`index.php`）文件并将所有以它开头的 url 重定向`usa`，而不是将它们分隔在不同的目录和文件中。你需要几个重写规则，如下所示

```
RewriteEngine On
RewriteRule ^usa/([^/.]+)$ index.php?state=$1 [L]
RewriteRule ^usa/([^/]+)/([^/.]+)$ index.php?state=$1&city=$2 [L] 
```

那么在你的`index.php`你只需要检查`$_GET`参数。

**更新：**
如果您对使用数据库感到不舒服并从那里提取所需的数据，您始终可以使用参数来动态包含/需要所需的文件。像这样的东西

```
<?php
    $source = ''; //or the 'ROOT' directory
    if(isset($_GET['state'])) $source .= $_GET['state'].'/';
    if(isset($_GET['city'])) $source .= $_GET['city'].'.php';
    include($source);  // here $source would be something like 'alaska/adak.php'
                       // and is assumed that the dir 'alaska' is on the same 
                       // level as 'index.php'
?> 
```

但是要回答您的**原始问题**，您仍然可以使用以下内容`.htaccess`

```
RewriteEngine On
RewriteRule ^usa/([^/.]+)$ usa/$1.php [L]
RewriteRule ^usa/([^/]+)/([^/.]+)$ usa/$1/$2.php [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T23:25:53.037

只创建一个文件怎么样：

```
/usa/index.php 
```

和

```
$_SERVER["REQUEST_URI"] 
```

您可以读取当前的 URI。好吧，现在如果用户输入“http://domain.foo/usa/alaska”，他当然会得到一个 404 错误。但是要打电话给你`index.php`，你可以把这一行写到`.htaccess`：

```
ErrorDocument 404 /usa/index.php 
```

现在`index.php`接收写入 URI 的所有内容，您可以匹配结果并包含文件或处理错误。

但也许只有 .htaccess 有更好的解决方案，不知道。:)

# objective-c - 如何以编程方式将证书导入 iOS 应用的钥匙串并在需要时将身份传递给服务器？

> ID：11173711
> 
> 赞同：16
> 
> 时间：2012-06-23T23:06:38.163
> 
> 标签：objective-c, ios5, keychain

我正在开发一个 iOS5 应用程序，它将促进两个用户之间的移动支付。作为支付过程的一部分，发送者和接收者需要与服务器进行通信。当连接时发起身份验证质询时，服务器要求双方出示他们的身份。

目前，我通过在我的代码中使用以下两种方法对证书过程进行了硬编码：

**NSURLConnection 委托*didReceiveAuthenticationChallenge***

```
(void)connection:(NSURLConnection *)connection didReceiveAuthenticationChallenge:    (NSURLAuthenticationChallenge *)challenge
{
NSLog(@"Authentication challenge");

// Load Certificate
NSString *path = [[NSBundle mainBundle] pathForResource:@"PKCS12" ofType:@"p12"];
NSData *p12data = [NSData dataWithContentsOfFile:path];
CFDataRef inP12data = (__bridge CFDataRef)p12data;

SecIdentityRef myIdentity;
SecTrustRef myTrust;
extractIdentityAndTrust(inP12data, &myIdentity, &myTrust);

SecCertificateRef myCertificate;
SecIdentityCopyCertificate(myIdentity, &myCertificate);
const void *certs[] = { myCertificate };
CFArrayRef certsArray = CFArrayCreate(NULL, certs, 1, NULL);

NSURLCredential *credential = [NSURLCredential credentialWithIdentity:myIdentity certificates:(__bridge NSArray*)certsArray persistence:NSURLCredentialPersistencePermanent];

[[challenge sender] useCredential:credential forAuthenticationChallenge:challenge];
} 
```

**C 方法*extractIdentityAndTrust***

```
OSStatus extractIdentityAndTrust(CFDataRef inP12data, SecIdentityRef *identity, SecTrustRef *trust)
{
OSStatus securityError = errSecSuccess;

CFStringRef password = CFSTR("password");
const void *keys[] = { kSecImportExportPassphrase };
const void *values[] = { password };

CFDictionaryRef options = CFDictionaryCreate(NULL, keys, values, 1, NULL, NULL);

CFArrayRef items = CFArrayCreate(NULL, 0, 0, NULL);
securityError = SecPKCS12Import(inP12data, options, &items);

if (securityError == 0) {
    CFDictionaryRef myIdentityAndTrust = CFArrayGetValueAtIndex(items, 0);
    const void *tempIdentity = NULL;
    tempIdentity = CFDictionaryGetValue(myIdentityAndTrust, kSecImportItemIdentity);
    *identity = (SecIdentityRef)tempIdentity;
    const void *tempTrust = NULL;
    tempTrust = CFDictionaryGetValue(myIdentityAndTrust, kSecImportItemTrust);
    *trust = (SecTrustRef)tempTrust;
}

if (options) {
    CFRelease(options);
}

return securityError;
} 
```

我已经多次测试了这段代码并且成功了。现在我正在尝试继续并允许存储适当的身份，然后从应用程序的钥匙串中检索。我的目标是允许用户通过 iTunes 文件共享或 Dropbox 导入他们的 P12 文件并将它们保存到钥匙串中。

我查看了 Apple 关于[获取和使用持久钥匙串引用](https://developer.apple.com/library/ios/#documentation/Security/Conceptual/CertKeyTrustProgGuide/iPhone_Tasks/iPhone_Tasks.html#//apple_ref/doc/uid/TP40001358-CH208-DontLinkElementID_10)的文档，但无法弄清楚如何导入身份。他们的代码让我有点困惑，因为他们使用未声明的变量/引用（特别是

```
&persistent_ref 
```

多变的）。如果有人可以帮助破译它，那将不胜感激。

**TL;DR：**如何将 P12 文件的内容保存到我的 iOS5 应用程序的钥匙串中并稍后检索它以移交给 NSURLConnection didReceiveAuthenticationChallenge 方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-10T08:14:47.117

以下代码应该可以解决问题：

```
NSMutableDictionary *secIdentityParams = [[NSMutableDictionary alloc] init];
[secIdentityParams setObject:(id)myIdentity forKey:(id)kSecValueRef];
OSStatus status = SecItemAdd((CFDictionaryRef) secIdentityParams, NULL); 
```

您通过传入要查找或创建的键值对字典与钥匙串进行交互。每个键代表一个搜索选项或钥匙串中项目的一个属性。键是预定义的常量，您必须根据要存储的数据类型使用它们。这些密钥可以在 Apple 的开发者文档中找到。

我认为Apple的源代码确实缺少persistentRef的分配。他们应该在方法的开头添加这样的声明：

```
NSData *persistentRef = nil; 
```

请注意，持久引用的使用不是强制性的。上面的代码应该可以正常工作。正如苹果公司解释得很好：

> 因为持久性引用在程序调用之间保持有效并且可以存储在磁盘上，所以您可以使用它来更轻松地找到您将重复需要的钥匙串项
> 
> *来源*：[https ://developer.apple.com/library/ios/#documentation/Security/Conceptual/CertKeyTrustProgGuide/iPhone_Tasks/iPhone_Tasks.html#//apple_ref/doc/uid/TP40001358-CH208-DontLinkElementID_10](https://developer.apple.com/library/ios/#documentation/Security/Conceptual/CertKeyTrustProgGuide/iPhone_Tasks/iPhone_Tasks.html#//apple_ref/doc/uid/TP40001358-CH208-DontLinkElementID_10)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-06T11:02:55.017

> 斯威夫特 4.0

```
 if let url = Bundle.main.url(forResource: "XXX", withExtension: "pem") {

            let PKCS12Data = NSData(contentsOf: url)
            let inPKCS12Data = CFDataCreate(kCFAllocatorDefault, PKCS12Data!.bytes.assumingMemoryBound(to: UInt8.self), (PKCS12Data?.length)!)

            let keys: [CFString] = [kSecImportExportPassphrase]
            let values: [CFTypeRef] = []

            let keysPointer = UnsafeMutablePointer<UnsafeRawPointer?>.allocate(capacity: keys.count)
            keysPointer.initialize(to: keys)

            let valuesPointer = UnsafeMutablePointer<UnsafeRawPointer?>.allocate(capacity: values.count)
            valuesPointer.initialize(to: values)

            let optionsDictionary = CFDictionaryCreate(kCFAllocatorDefault, keysPointer, valuesPointer, 1, nil, nil)

            var items = CFArrayCreate(kCFAllocatorDefault, UnsafeMutablePointer<UnsafeRawPointer?>.allocate(capacity: 0), 0, nil)
            let securityError = SecPKCS12Import(inPKCS12Data!, optionsDictionary!, &items)
            if (securityError == 0) {
                print("Certificate installed Successfully")
            } else {
                print("Certificate installation failed")
            }

    } 
```

# android - OpenGL 2d 水模拟

> ID：11173713
> 
> 赞同：1
> 
> 时间：2012-06-23T23:06:59.583
> 
> 标签：android, graphics, opengl-es, shader, fragment-shader

我正在使用 opengl2 es 为 android 开发游戏 ii 想要这样的效果： [https ://lh6.ggpht.com/RF0R32tKjDhQcjNTtW51xd-giuXp-FlsDJaqscilDetI7cMpNQwUDjCryT2qyyBzT6PZ](https://lh6.ggpht.com/RF0R32tKjDhQcjNTtW51xd-giuXp-FlsDJaqscilDetI7cMpNQwUDjCryT2qyyBzT6PZ)

我想灯光是用法线贴图完成的（我说的对吗？）

但我认为在 behing 纹理上存在某种类型的失真，以模拟 de 波。

我可以使用哪个数学函数来模拟图像中出现的噪声？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T00:41:20.890

是的，使用法线贴图。为了使效果更有说服力，请使用多个法线贴图（两个或三个）以不同的速度向不同方向平移。使用谷歌查找一些模拟水的法线贴图。

您不需要数学函数来模拟失真。从法线贴图可以非常简单地计算折射和反射畸变。

下面PowerVR对水效果的描述和实现。 [http://www.imgtec.com/powervr/insider/docs/POWERVR.Shader%20Based%20Water%20Effects.1.0.14.OGLES2External.pdf](http://www.imgtec.com/powervr/insider/docs/POWERVR.Shader%20Based%20Water%20Effects.1.0.14.OGLES2External.pdf)

下面是一篇关于实现折射的 NVIDIA 文章。这是面向 DirectX 的，但高级解释非常好。阅读关于水的部分。 [http://http.developer.nvidia.com/GPUGems2/gpugems2_chapter19.html](http://http.developer.nvidia.com/GPUGems2/gpugems2_chapter19.html)

# python - 全局变量错误，尽管在每个函数中都将变量声明为全局变量

> ID：11173718
> 
> 赞同：0
> 
> 时间：2012-06-23T23:08:10.300
> 
> 标签：python, textbox, global-variables

我正在尝试使用全局变量。我已经将它声明为全局，并在每次提及时都声明它，但是在第一个函数完成后我得到一个 NameError 。这是代码，我想我已经发疯了，但我似乎找不到问题所在。

```
def on_servername_insertatcursor(self, widget):
    global output  
    output = StringIO.StringIO()         
    servername = widget.get_text()
    output.write("USHARE_NAME="+servername+'\n')

def on_netif_changed(self, widget):
    netif = widget.get_active_text()
    global output
    output.write("USHARE_IFACE="+netif+'\n')

def on_port_insertatcursor(self, widget):
    global output
    port = widget.get_text()
    output.write("USHARE_PORT="+port+'\n')

def on_telprt_insertatcursor(self, widget):
    global output
    telprt = widget.get_text()
    output.write("USHARE_TELNET_PORT="+telprt+'\n')

def on_dirs_insertatcursor(self, widget):
    global output
    dirs = widget.get_text()
    output.write("USHARE_DIR="+dirs+'\n')

def on_iconv_toggled(self, widget):
    global output
    iconv = widget.get_active()
    if iconv == True:
        output.write("USHARE_OVERRIDE_ICONV_ERR="+"True"+'\n')
    else:
        output.write("USHARE_OVERRIDE_ICONV_ERR="+"False"+'\n')

def on_webif_toggled(self, widget):
    global output
    webif = widget.get_active()
    if webif == True:
        output.write("USHARE_ENABLE_WEB="+"yes"+'\n')
    else:
        output.write("USHARE_ENABLE_WEB="+"no"+'\n')

def on_telif_toggled(self, widget):
    global output
    telif = widget.get_active()
    if telif == True:
        output.write("USHARE_ENABLE_TELNET="+"yes"+'\n')
    else:
        output.write("USHARE_ENABLE_TELNET="+"no"+'\n')

def on_xbox_toggled(self, widget):
    global output
    xbox = widget.get_active()
    if xbox == True:
        output.write("USHARE_ENABLE_XBOX="+"yes"+'\n')
    else:
        output.write("USHARE_ENABLE_XBOX="+"no"+'\n')

def on_dlna_toggled(self, widget):
    global output
    dlna = widget.get_active()
    if dlna == True:
        output.write("USHARE_ENABLE_DLNA="+"yes"+'\n')
    else:
        output.write("USHARE_ENABLE_DLNA="+"no"+'\n')

def on_commit_clicked(self, widget):
    commit = output.getvalue()
    logfile = open('/home/boywithaxe/Desktop/ushare.conf','w')
    logfile.write(commit)

def on_endprogram_clicked(self, widget):
    sys.exit(0) 
```

令人惊奇的是，当 insertatcursor （来自 Gtk.TextBuffer.insert_at_cursor() ）被替换为激活时，代码运行良好，除了我不希望用户在每次输入数据后都必须按 enter。

编辑。Traceback 如下

```
Traceback (most recent call last):
File "/home/boywithaxe/Developer/Quickly/broadcast/broadcast/BroadcastWindow.py", line     58, in on_netif_changed
output.write("USHARE_IFACE="+netif+'\n')
NameError: global name 'output' is not defined 
```

进行了@jdi 建议的更改（谢谢，顺便说一句，我看到了其背后的逻辑），我得到的 Traceback 如下：

```
Traceback (most recent call last):
File "/home/boywithaxe/Developer/Quickly/broadcast/broadcast/BroadcastWindow.py", line 55, in on_netif_changed
OUTPUT.write("USHARE_IFACE="+netif+'\n')
NameError: global name 'OUTPUT' is not defined
Traceback (most recent call last):
File "/home/boywithaxe/Developer/Quickly/broadcast/broadcast/BroadcastWindow.py", line 72, in on_iconv_toggled
OUTPUT.write("USHARE_OVERRIDE_ICONV_ERR="+"True"+'\n')
NameError: global name 'OUTPUT' is not defined
Traceback (most recent call last):
File "/home/boywithaxe/Developer/Quickly/broadcast/broadcast/BroadcastWindow.py", line 79, in on_webif_toggled
OUTPUT.write("USHARE_ENABLE_WEB="+"yes"+'\n')
NameError: global name 'OUTPUT' is not defined
Traceback (most recent call last):
File "/home/boywithaxe/Developer/Quickly/broadcast/broadcast/BroadcastWindow.py", line 86, in on_telif_toggled
OUTPUT.write("USHARE_ENABLE_TELNET="+"yes"+'\n')
NameError: global name 'OUTPUT' is not defined
Traceback (most recent call last):
File "/home/boywithaxe/Developer/Quickly/broadcast/broadcast/BroadcastWindow.py", line 93, in on_xbox_toggled
OUTPUT.write("USHARE_ENABLE_XBOX="+"yes"+'\n')
NameError: global name 'OUTPUT' is not defined
Traceback (most recent call last):
File "/home/boywithaxe/Developer/Quickly/broadcast/broadcast/BroadcastWindow.py", line 100, in on_dlna_toggled
OUTPUT.write("USHARE_ENABLE_DLNA="+"yes"+'\n')
NameError: global name 'OUTPUT' is not defined
Traceback (most recent call last):
File "/home/boywithaxe/Developer/Quickly/broadcast/broadcast/BroadcastWindow.py", line 105, in on_commit_clicked
commit = OUTPUT.getvalue()
NameError: global name 'OUTPUT' is not defined 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T23:15:31.493

您的代码示例不需要全局。只需将其删除。唯一需要在函数中使用 global 关键字的情况是要分配给它。

```
OUTPUT = StringIO.StringIO()         

def on_servername_insertatcursor(self, widget):
    servername = widget.get_text()
    OUTPUT.write("USHARE_NAME="+servername+'\n')

def on_netif_changed(self, widget):
    netif = widget.get_active_text()
    OUTPUT.write("USHARE_IFACE="+netif+'\n')

def on_port_insertatcursor(self, widget):
    port = widget.get_text()
    OUTPUT.write("USHARE_PORT="+port+'\n')

def on_telprt_insertatcursor(self, widget):
    telprt = widget.get_text()
    OUTPUT.write("USHARE_TELNET_PORT="+telprt+'\n')

def on_dirs_insertatcursor(self, widget):
    dirs = widget.get_text()
    OUTPUT.write("USHARE_DIR="+dirs+'\n')

def on_iconv_toggled(self, widget):
    iconv = widget.get_active()
    if iconv == True:
        OUTPUT.write("USHARE_OVERRIDE_ICONV_ERR="+"True"+'\n')
    else:
        OUTPUT.write("USHARE_OVERRIDE_ICONV_ERR="+"False"+'\n') 
```

即使您希望能够在函数中重置您的 StringIO 对象，它仍然不需要赋值或全局关键字：

```
def reset_output(self):
    OUTPUT.seek(0)
    OUTPUT.truncate() 
```

**证明它有效**

```
import StringIO

OUTPUT = StringIO.StringIO()         

def foo():
    OUTPUT.write('foo')

def bar():
    OUTPUT.write('bar')

def print_output():
    print OUTPUT.getvalue()

def reset_output():
    OUTPUT.seek(0)
    OUTPUT.truncate()

if __name__ == "__main__":
    foo()
    bar()
    print_output()
    reset_output()
    print_output() 
```

*输出*

```
$ python test.py 
foobar

$ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T23:12:20.150

尝试移出`output = StringIO.StringIO()`文件中的所有函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T22:28:14.337

好吧，这个问题的问题是不幸的缩进 :) 查看[PyGTK 文档](http://zetcode.com/gui/pygtk/signals/)表明显示的`on_...`函数确实是类的方法，而不是全局函数，因此“全局”变量可能不是真正的全局变量，而是该类的成员（只需查看`self`方法定义中的参数）。

[我在askubuntu](https://askubuntu.com/a/155536/14564)上给出了更详细的答案，这是一个代码片段，显示了需要做什么：

```
class MyApp(gtk.Window):

    output = None

    def __init__(...):
        ...
        self.output = StringIO.StringIO()

    def on_servername_insertatcursor(self, widget):    
        servername = widget.get_text()
        self.output.write("USHARE_NAME="+servername+'\n')

    def on_netif_changed(self, widget):
        netif = widget.get_active_text()
        self.output.write("USHARE_IFACE="+netif+'\n') 
```

绝对不涉及 PyGTK 特定或信号特定的魔法:)

# php - Prestashop 基础模块，小调整

> ID：11173725
> 
> 赞同：0
> 
> 时间：2012-06-23T23:09:24.457
> 
> 标签：php, javascript, jquery, prestashop

我为 Prestashop 1.4 创建了文件 mymodule.php

```
<?php
if (!defined('_CAN_LOAD_FILES_'))
    exit;

class MyModule extends Module
{
    function __construct()
    {
        $this->name = "mymodule";
        $this->version = "1.0";
        $this->author = "Tomtop";
        $this->tab = "front_office_features";

        $this->_postErrors = array();

        parent::__construct();

        $this->displayName = $this->l("My Module Name");
        $this->description = $this->l("This is my module description.");
    }

    protected function setConfig($key,$value)
    {
        return Configuration::updateValue($this->name.$key,$value,true);
    }

    protected function getConfig($value)
    {
        return Configuration::get($this->name.$value);
    }

    protected function deleteConfig($value)
    {
        return Configuration::deleteByName($this->name.$value);
    }

    function install()
    {
        if (!parent::install()
            OR !$this->registerHook('home')
            OR !$this->registerHook('footer')
        )
            return false;
        return true;
    }

    public function uninstall()
    {
        parent::uninstall();

        return true;
    }

    public function hookHome($params)
    {       

    }

    public function hookfooter($params)
    {       

    }

    private function _postProcess()
    {
        $this->_html .= '<div class="conf confirm">'.$this->l("Updated")."</div>";
    }

    public function getContent()
    {
        $this->_html .= "<h2>".$this->displayName."</h2>";

        if (Tools::isSubmit("submit"))
        {   
            $this->_postProcess();
        }

        $this->_displayForm();

        return $this->_html;
    }   

    private function _displayForm()
    {   
        $this->_html .= '<form action="'.$_SERVER['REQUEST_URI'].'" method="post">

            <fieldset>
                <legend><img src="../modules/scroller/logo.gif" alt="" class="middle" />'.$this->l('Settings').'</legend>

                <br />
                <center><input type="submit" name="submit" value="'.$this->l('Upgrade').'" class="button" /></center>
            </fieldset> 
        </form>';
    }
} 
```

在上面的代码中应该添加 mymodule.tpl 模板，其中包含主要的 html 代码，即

`return $this->display(__FILE__, 'mymodule.tpl');`

此外，在 mymodule.php 的哪个位置添加链接在 head 标签中的 js 和 css 文件，如下所示：

```
public function hookHeader()
{
    Tools::addJS($this->_path.'js/myjscript1.js');
    Tools::addJS($this->_path.'js/myjscript2.js');
    Tools::addCSS($this->_path.'css/mymodule.css', 'all');
} 
```

`global $smarty;`如果在上面的代码中需要，应该在哪里添加？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T23:18:34.363

`hookHeader`应该在方法中声明`install`。

您应该`global $smarty`在每个需要使用的类方法的开头引用`$smarty`.

这意味着在您将`$this->display()`用于呈现 .tpl 的方法中，您还应该添加`global $smarty`以能够使用该`$smarty->assign()`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T22:24:44.620

钩点渲染时，函数 hookHome() 和 hookFooter() 返回的任何内容都会显示出来。一开始就忽略聪明，你可以这样做：

```
public function hookHome($params)
{
  return "<h2>Wow, my module displays something</h2>";
} 
```

您当然可能希望在您的模块中使用模板文件——**尽管您不必这样做**。如果你打算使用 smarty 模板，那么你可以在钩子函数中声明一个全局实例。

```
public function hookHome($params)
{
  global $smarty;
  ...
  ... 
```

如Mihai的回答中所述，如果您想使用“header”钩子插入css和js，您还必须修改安装功能：

```
function install()
{
    if (!parent::install()
        OR !$this->registerHook('home')
        OR !$this->registerHook('footer')
        OR !$this->registerHook('header')
    )
        return false;
    return true;
} 
```

# php - 数组顺序维护/注册原始位置（php）

> ID：11173728
> 
> 赞同：0
> 
> 时间：2012-06-23T23:10:47.240
> 
> 标签：php

我有一个像这样的数组

```
$state[1]='FG';
$state[2]='BU';
$state[3]='CA';
...
$state[150]='YT' 
```

我需要的是让 $state 数组从 A 到 Z 排序，并在某种结构中维护数组的原始顺序。就像是：

```
$state_ordered['BU']=2;
$state_ordered['CA']=3; 
```

等等。我在包含文件中有第一种形式的数组：哪种方式最高效，哪种方式是为了获得最佳解决方案而使用的相关结构？包含在每个主页打开时完成...在此先感谢，A。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T23:14:40.587

你想要[`array_flip()`](http://php.net/manual/en/function.array-flip.php)，它切换键和值对。

来自链接的示例＃2：

```
$trans = array("a" => 1, "b" => 1, "c" => 2);
$trans = array_flip($trans);

print_r($trans); 
```

**输出：**

```
Array
(
    [1] => b
    [2] => c
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T23:15:40.363

好吧，您可以`array_flip`数组，从而使“值”成为原始索引，然后按键对其进行排序...

```
$b = array_flip($a);
ksort($b); 
```

然后使用`$b` **键**，但值反映原始顺序

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T23:31:47.293

PHP 有很多用于[排序数组](http://php.net/manual/en/array.sorting.php)的函数。您可以使用[asort()](http://www.php.net/manual/en/function.asort.php)按其包含的值按字母顺序对数组进行排序，然后使用[array_search()检索索引](http://www.php.net/manual/en/function.array-search.php)

像这样：

```
?php

$state[1]='FG';
$state[2]='BU';
$state[3]='CA';

asort($state);
$key = array_search('BU',$state);

print $state[$key] . PHP_EOL;

print_r($state); 
```

这将输出

```
 BU
 Array
(
    [2] => BU
    [3] => CA
    [1] => FG
) 
```

如您所见，它保留了数组的原始索引值。但是，这确实意味着当您在不直接使用索引的情况下循环遍历数组时，例如当您使用[foreach](http://www.php.net/manual/en/control-structures.foreach.php)时，然后您会以重新排序的顺序循环遍历它：

```
foreach($state as $key=>$value){
  print "$key: $value" . PHP_EOL;
}

2: BU
3: CA
1: FG 
```

您需要先在数组上使用[ksort](http://www.php.net/manual/en/function.ksort.php)以再次按索引对其进行排序，然后才能获得您可能想要/期望的常规 foreach 行为。

```
ksort($state);
foreach($state as $key=>$value){
  print "$key: $value" . PHP_EOL;
}

1: FG
2: BU
3: CA 
```

[当然，使用带有数字索引值的for](http://www.php.net/manual/en/control-structures.for.php)结构进行循环总是正确的。请注意，这些函数[通过引用](http://www.php.net/manual/en/language.references.pass.php)传递给您的数组，这意味着它们在“实时数组”上工作，而不是在副本上，如果您想要一个，您需要先制作自己的副本，[参考说明](http://www.php.net/manual/en/language.references.php)中的更多信息。

# windows - 如何使用 EnableWindow() 禁用窗口并将其变灰？

> ID：11173729
> 
> 赞同：4
> 
> 时间：2012-06-23T23:11:15.407
> 
> 标签：windows, winapi, visual-c++, mfc

在 .NET 中，当您将`Control.Enabled`Form 或 Control（例如 ListView）的属性设置为 false 时，它​​及其所有子项都会变灰：

![](../Images/081734b59c9dd035e447a8034b35bb40.png)

我在 Win32 ( `EnableWindow`) 中没有看到这种情况，至少在 ListViews 中没有。

在Win32中如何实现这个效果？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-24T00:02:21.210

```
BOOL EnableWindow(HWND hWnd,
    BOOL bEnable
); 
```

其中 hWnd 是控件的句柄，bEnable 是 TRUE 或 FALSE，TRUE 启用窗口，FALSE 禁用它。

适用于列表视图。

毫无价值的是，为了查看其视觉状态的变化，您需要强制重新绘制窗口，例如通过调用`UpdateWindow`.

# symfony - Symfony2：如何在实体小部件的“createQueryBuilder”内进行获取连接

> ID：11173730
> 
> 赞同：0
> 
> 时间：2012-06-23T23:11:21.680
> 
> 标签：symfony, doctrine, widget, entity

我在实体小部件的 symfony 表单类型中有以下设置：

```
$builder->add('work_unit', 'entity', array(
        'class' => 'TestProjectBundle:WorkUnit',
        'property' => 'fullname',
        'query_builder' => function (EntityRepository $er) use ($user_id) { 
            return $er->createQueryBuilder('wu')
            ->leftJoin('wu.work_category', 'wc')
            ->leftJoin('wu.workers', 'w')
            ->where('w.id = :worker_id')
            ->orderBy('wc.name, wu.name')
            ->setParameter('worker_id', $user_id); },
        'expanded' => false,
        'multiple' => false,
        'empty_value' => '',
    )); 
```

这两个连接没有获取连接，这意味着仍然需要延迟加载才能访问“wu.work_category”中的某些属性。

我怎样才能实现连接正在获取连接？我搜索了很多页面，但找不到示例。任何帮助都会很好:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T23:13:38.810

只需添加一个选择子句：

```
$qb->select('we, wc, w'); 
```

# data-structures - 如何将一棵树状树存储在数组中？

> ID：11173731
> 
> 赞同：3
> 
> 时间：2012-06-23T23:11:25.830
> 
> 标签：data-structures

我想将一棵树存储在一个数组中，同时能够从当前索引轻松计算父索引和子索引，就像在二叉堆中一样。树有一个根节点，它位于第 0 层。树有 N 层，第 i 层的每个节点都有 n(i) 个子节点。

这可以做到吗？如何？

编辑：

澄清：您可以在单个数组中存储（完整）二叉树，即存储堆，而无需显式存储索引。根节点位于 0，位置 i 的节点的子节点位于 2i+1 和 2i+2。因此，您可以根据父节点的索引*计算子节点，而实际上不需要**存储*索引。数据结构*隐含*在数据中，见[http://en.wikipedia.org/wiki/Binary_heap#Heap_implementation](http://en.wikipedia.org/wiki/Binary_heap#Heap_implementation)

我的问题：您能否将其概括为更通用的树，如上所述。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T18:46:19.567

如果我明白你想说的话（第 i 层的每个节点都有 n(i) 个子节点），那么很简单：第一个数字是根节点的 n(0) 个元素所占据的根节点，那么你把所有那些 n(0) 点了他们所有的 n(1) 个节点。如果你有 n(0) = 3，那么第一个你放 n(1) 个点头，如果第二个点头，你把所有的 n(1) 个点头放在它们之后，然后在第三个点头之后，你放 n(1) 个点头点头

```
1 -> 2, 5, 3 ( 1 is the root, and has 2, 5, 3 as children)
2 -> 4, 10
3 -> 45, 35
5-> 12, 31
n(0) = 3, n(1) = 2 , n(2) = 0
Then You should have: {1,  2, 5, 3,  4, 10,   45, 35,  12, 31} 
```

对于一个好的索引，您应该保留另一个带有父亲位置的数组和另一个带有第一个子索引的数组，或者如果您真的只想拥有一个数组，您应该这样做：
对于每个元素保留 3 件事：父索引和第一个子索引. 因为孩子是一个接一个，你总是可以接触到所有的孩子，你总是有父亲。（我会为根的父亲加上-1）然后你应该有：

```
{1,-1, 3,   2, 0,12,   5, 0, x,    3, 0,  x,     4,  3,  x,  ... } 
{0, 1, 2,   3, 4, 5,   6, 7, 8,    9, 10, 11,    12, 13, 14, ... }
-1 is the father of 1 and 3 is the start of his child
0 is the father of 1 and 12 is the start of his child ( 4 in this case) 
```

如果你想要一个“堆”结构，你必须找到最大数量的子元素 Mx = ( max(n(i)), 1<=i<=N 并使用步骤 MX 做一个堆，每个元素都有它们的子元素pos*MX, pos*MX + 1, ..pos*MX + n(k), 和 pos/MX 的父亲，其中 pos 是节点的索引。
你将有很多可用空间，但它是一个堆状结构
，希望对您有所帮助。

# shell - 在 Unix 上将非常大的目录拆分为更小的目录的单行器

> ID：11173732
> 
> 赞同：6
> 
> 时间：2012-06-23T23:11:35.150
> 
> 标签：shell, unix, filesystems, wget

如何在 UNIX 上将一个非常大的目录（可能包含数百万个文件）拆分为一些自定义的最大文件数（例如每个目录 100 个）的较小目录？

如果您知道一种将`wget`文件自动下载到这些子目录中的方法，则可以加分。`.html`因此，如果在顶级路径中有 100 万个页面`www.example.com`，例如

```
/1.html
/2.html
...
/1000000.html 
```

我们只需要每个目录 100 个文件，它会将它们下载到类似的文件夹中

```
./www.example.com/1-100/1.html
...
./www.example.com/999901-1000000/1000000.html 
```

只需要在`wget`下载文件后能够在文件夹上运行 UNIX 命令，但如果可以在下载文件时执行此操作，`wget`我很想知道！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-12-25T14:48:34.283

另外的选择：

```
i=1;while read l;do mkdir $i;mv $l $((i++));done< <(ls|xargs -n100) 
```

或使用`parallel`：

```
ls|parallel -n100 mkdir {#}\;mv {} {#} 
```

`-n100`一次接受 100 个参数，`{#}`是作业的序列号。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-24T14:17:03.443

您可以通过几个循环运行它，这应该可以解决问题（至少对于文件名的数字部分）。我认为作为单线这样做是过于乐观了。

```
#! /bin/bash
for hundreds in {0..99}
do
    min=$(($hundreds*100+1))
    max=$(($hundreds*100+100))
    current_dir="$min-$max"
    mkdir $current_dir
    for ones_tens in {1..100}
    do
        current_file="$(($hundreds*100+$ones_tens)).html"
        #touch $current_file 
        mv $current_file $current_dir
    done
done 
```

我通过首先注释掉和取消注释来进行`mkdir $current_dir`性能`mv $current_file $current_dir`测试`touch $current_file`。这创建了 10000 个文件（目标 1000000 个文件的百分之一）。创建文件后，我恢复为编写的脚本：

```
$ time bash /tmp/test.bash 2>&1 

real        0m27.700s
user        0m26.426s
sys         0m17.653s 
```

只要您不跨文件系统移动文件，每个`mv`命令的时间应该是恒定的，因此您应该会看到相似或更好的性能。将其扩展到一百万个文件将给您大约 27700 秒，即 46 分钟。有多种优化途径，例如在一个命令中移动给定目录的所有文件，或删除内部 for 循环。

执行 'wget' 来抓取一百万个文件将花费比这更长的时间，并且几乎可以肯定需要一些优化；仅在 http 标头中保留带宽就会将运行时间缩短数小时。我不认为 shell 脚本可能是该工作的正确工具。在 cpan 上使用诸如 WWW::Curl 之类的库将更容易优化。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-02-10T23:42:56.743

为了使 ls|parallel 更实用，添加一个变量赋值给目标目录：

```
DST=../brokenup; ls | parallel -n100 mkdir -p $DST/{#}\;cp {} $DST/{#} 
```

注意：`cd <src_large_dir>`执行前。

上面定义的 DST 将包含当前目录文件的副本，但每个子目录最多 100 个。

# matlab - 子集文件夹内容 Matlab

> ID：11173736
> 
> 赞同：0
> 
> 时间：2012-06-23T23:12:21.133
> 
> 标签：matlab, file-io, directory

我在一个名为 3410001ne => 3809962sw 的文件夹中有大约 1500 张图像。我需要对这些文件中的大约 470 个进行子集化，以便使用 Matlab 代码进行处理。下面是我的 for 循环之前的代码部分，它列出了文件夹中的所有文件：

```
workingdir = 'Z:\project\code\';  
datadir = 'Z:\project\input\area1\';     
outputdir = 'Z:\project\output\area1\';   

cd(workingdir) %points matlab to directory containing code

files = dir(fullfile(datadir, '*.tif'))
fileIndex = find(~[files.isdir]);
for i = 1:length(fileIndex)
    fileName = files(fileIndex(i)).name; 
```

文件还附有序数方向（例如 3410001ne、3410001nw），但是，并非所有方向都与每个根相关联。如何子集文件夹内容以包含 1500 个文件中的 470 个，范围从 3609902sw => 3610032sw？是否有一个命令可以将 Matlab 指向文件夹中的一系列文件，而不是整个文件夹？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T18:29:54.070

考虑以下：

```
%# generate all possible file names you want to include
ordinalDirections = {'n','s','e','w','ne','se','sw','nw'};
includeRange = 3609902:3610032;
s = cellfun(@(d) cellstr(num2str(includeRange(:),['%d' d])), ...
    ordinalDirections, 'UniformOutput',false);
s = sort(vertcat(s{:}));

%# get image filenames from directory
files = dir(fullfile(datadir, '*.tif'));
files = {files.name};

%# keep only subset of the files matching the above
files = files(ismember(files,s));

%# process selected files
for i=1:numel(files)
    fname = fullfile(datadir,files{i});
    img = imread(fname);
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T18:26:20.860

像这样的东西也许可以工作。

```
list = dir(datadir,'*.tif'); %get list of files
fileNames = {list.name}; % Make cell array with file names
%Make cell array with the range of wanted files. 
wantedNames = arrayfun(@num2str,3609902:3610032,'uniformoutput',0); 

%Loop through the list with filenames and compare to wantedNames.

for i=1:length(fileNames)
% Each row in idx will be as long as wantedNames. The cells will be empty if 
% fileNames{i} is unmatched and 1 if match.
   idx(i,:) = regexp(fileNames{i},wantedNames);
end
idx = ~(cellfun('isempty',idx)); %look for unempty cells.
idx = logical(sum(,2)); %Sum each row 
```

# c# - Button.Command 不起作用

> ID：11173737
> 
> 赞同：0
> 
> 时间：2012-06-23T23:12:22.123
> 
> 标签：c#, .net, wpf, xaml

我有具有以下结构的 XAML 文件：

```
<UserControl>
    <Grid>
        ...
        <ListBox>
            <ListBox.ItemTemplate>              
                <DataTemplate>
                    <Expander>
                        <ListBox>
                            <ListBox.ItemTemplate>
                                <DataTemplate>
                                    <Expander>
                                        <StackPanel>
                                            <kb:Resizer>
                                                <DataGrid>  
                                                    <DataGrid.Columns>  
                                                        ...
                                                            <DataGridTemplateColumn IsReadOnly="True">
                                                                <DataGridTemplateColumn.CellTemplate>
                                                                    <DataTemplate>
                                                                        <Button Style="{StaticResource ChromelessButton}">
                                                                            <Button.CommandParameter>
                                                                                <MultiBinding Converter="{StaticResource MultiBindingConverter}">
                                                                                     <Binding />
                                                                                     <Binding Path="DataContext.Items" RelativeSource="{RelativeSource AncestorType=DataGrid}"/>
                                                                                </MultiBinding>
                                                                            </Button.CommandParameter>
                                                                            <Button.Content>
                                                                                <Image Source="./../Images/close.png" Width="15"></Image>
                                                                            </Button.Content>
                                                                            <Button.Command>                                                            
                                                                                <MultiBinding Converter="{StaticResource TriggerConverter}">
                                                                                    <Binding Path="DataContext.DeleteCommand" 
                                                                                        RelativeSource="{RelativeSource Mode=FindAncestor, AncestorType={x:Type local:MyClass}}" />
                                                                                    <Binding />
                                                                                </MultiBinding> 
                                                                            </Button.Command>
                                                                        </Button>
                                                                    </DataTemplate>                                             
                                                                </DataGridTemplateColumn.CellTemplate>                                          
                                                            </DataGridTemplateColumn>
                                                        </DataGrid.Columns>  
                                                    </DataGrid> 
                                                </kb:Resizer>                                       
                                            </StackPanel>
                                        </Expander>
                                </DataTemplate>
                            </ListBox.ItemTemplate>
                        </ListBox>
                    </Expander>                 
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
    </Grid>
</UserControl> 
```

该程序可以正确编译和执行，并且我在输出中没有收到任何错误消息，但`DeleteCommand`从未受到打击。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T06:52:56.377

```
<Button.Command>                                                            
  <MultiBinding Converter="{StaticResource TriggerConverter}">
     <Binding Path="DataContext.DeleteCommand" 
        RelativeSource="{RelativeSource Mode=FindAncestor, 
                AncestorType={x:Type local:MyClass}}" />
     <Binding />
  </MultiBinding> 
</Button.Command> 
```

您代码中的这个 xaml 看起来有问题......

*   当你有`DeleteCommand`那么`DataContext`什么是需要的`TriggerConverter`？
*   这`AncestorType={x:Type local:MyClass}}"`看起来不对；它是指向某些控件还是您的班级？我`MyClass`在您的控件层次结构中看不到此控件（类型为 ）。检查一下[RelativeSource](http://msdn.microsoft.com/en-us/library/system.windows.data.relativesource.aspx)是如何工作的。

# c++ - 在变量声明中捕获异常

> ID：11173740
> 
> 赞同：2
> 
> 时间：2012-06-23T23:12:45.413
> 
> 标签：c++, exception, exception-handling

我的代码中有一个样式问题，我想知道其他人是否遇到过。假设我有一个没有默认构造函数的类，或者有一个我不想调用的默认构造函数（出于性能和风格原因）。例如，假设这是一个 File 对象。

现在假设我有一个文件，其中包含要删除的文件名列表......我想做以下事情：

```
File f("foo");
for (const string& filenameToDelete : f.Lines())
    File(filenameToDelete).Delete(); 
```

File 可以在构造函数或 Delete 函数中抛出 FileNotFound。我的代码必须在删除文件的第一次失败时抛出，但如果文件“foo”不存在则不能抛出（文件的缺失只是意味着没有什么可删除的）。

我希望我能写这样的东西：

```
try { File f("foo"); } catch (FileNotFound) { return; }
for (const string& filenameToDelete : f.Lines())
    File(filenameToDelete).Delete(); 
```

但这显然不能编译。我可以这样做：

```
unique_ptr<File> f;
try { f.reset(new File("foo")); } catch (FileNotFound) { return; }
for (const string& filenameToDelete : f->Lines())
    File(filenameToDelete).Delete(); 
```

但我有点不喜欢我需要为一个可能被堆栈分配的变量分配内存......

如果我想编写带有不进行堆分配的任意约束的代码，我只能考虑这样做：

```
struct FileNotFoundToRethrow : public FileNotFound {};
try
{
    File f("foo");
    try
    {
        for (const string& filenameToDelete : f.Lines())
            File(filenameToDelete).Delete();
    }
    catch (FileNotFound)
    {
        throw FileNotFoundToRethrow();
    }
}
catch (FileNotFoundToRethrow) { throw; }
catch (FileNotFound) { return; } 
```

我觉得这很丑陋，很难看出我想要做的就是处理第一行抛出的 FileNotFound 异常......有更好的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T23:18:30.653

我会用旗帜做

```
bool throwOnNotFound = false;

try
{
    File f("foo");

    throwOnNotFound = true;

    for (const string& filenameToDelete : f.Lines())
        File(filenameToDelete).Delete();
}
catch (FileNotFound)
{
    if (throwOnNotFound)
        throw;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T23:41:12.017

对于那些觉得特别聪明的人来说，也许有一种方法可以[参考 const 来延长寿命](http://herbsutter.com/2008/01/01/gotw-88-a-candidate-for-the-most-important-const/)。但也有缺点。一个类必须有一个空（或默认）对象，而且，引用是*const*。

```
File fooFile()
{
    try { return File("foo"); } catch (FileNotFound) { return File::Default; }
} 
```

使用它：

```
const File& foo = fooFile();

if (foo.IsDefault())
    return;

for (const string& filenameToDelete : f.Lines())
        File(filenameToDelete).Delete(); 
```

# jquery-ui - jQuery UI droppable - 容忍/贪婪没有按预期工作

> ID：11173741
> 
> 赞同：6
> 
> 时间：2012-06-23T23:12:49.150
> 
> 标签：jquery-ui

当我拖动可拖动对象时，包含可放置对象的元素不断被触发（因为它也是可放置对象），即使它位于可放置对象后面并且它们彼此堆叠。它的行为就像droppables之间有一个间隙，并且没有一个。

我[在 jsFiddle 上做了一个例子](http://jsfiddle.net/22BsM/)，这里[是违规行为的截图](http://i46.tinypic.com/awyu1e.png)。

如果我向 .parent 添加填充（例如`padding: 0.2em 0.2em 0em 0.2em`，行为会更糟。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T23:49:00.980

首先，我希望你在这几个月里找到了解决方案，我正在回答这个问题，因为我在这段时间使用 jQueryUI，我认为尝试找到答案是一个很好的练习。另外，我讨厌没有答案的问题^_^

不幸的是，看起来浏览器的反应好像在这些`.child`元素之间有一些空间，足以`*over`触发`.parent`. 我想出的唯一想法是尝试检测当`dropover`事件在父元素上触发时，鼠标位置是否实际上在子元素内。如果是这样，您应该将`accepting_drops`类​​赋予子元素而不是父元素。

这是代码（我制作了一个[jsFiddle](http://jsfiddle.net/goffreder/mMZ6Y/)来展示我的解决方案）：

HTML 和 CSS 原封不动，不再复制

Javascript

```
$('.dragme').draggable({
    helper: 'clone' 
});

$('.parent,.child').droppable({
    greedy: true,
    tolerance: 'pointer',
});

$(".parent").on("dropover", function(event, ui) {
    var first = $(".child:first");
    var last = $(".child:last");

    if((event.originalEvent.pageX > first.offset().left) &&
        (event.originalEvent.pageY > first.offset().top) &&
        (event.originalEvent.pageX <= (last.offset().left + last.width())) &&
        (event.originalEvent.pageY <= (last.offset().top + last.height()))) {
        $(this).removeClass("accepting_drops");
    }
    else {
        $(this).addClass("accepting_drops");
        $(".child").removeClass("accepting_drops");
    }
}).on("dropout", function() {
    $(this).removeClass("accepting_drops");
});

$(".child").on("dropover", function() {
    $(".parent").removeClass("accepting_drops");
    $(".child").removeClass("accepting_drops");
    $(this).addClass("accepting_drops");
}).on("dropout", function() {
    $(this).removeClass("accepting_drops");
}); 
```

我删除了该`hoverClass: 'accepting_drops'`行，因为我们覆盖了可拖动组件的默认行为。对于父 div，如果当`dropover`事件触发时我也在子元素中，我会`accepting_drops`从中删除该类，否则我会从任何可以拥有它的子元素中删除它并将其添加到父元素中。当一个`dropout`事件触发它时，我删除了这个`accepting_drops`类。

对于孩子来说，行为几乎是标准的，在`dropover`事件中我`accepting_drops`从其他所有内容中删除类并将其添加到孩子，在`dropout`事件中我将其删除。

这种行为仍然有点神秘，但是这种解决方法应该可以解决问题。

# sencha-touch-2 - 如何开始使用 sencha touch 2.0 图表测试版？

> ID：11173751
> 
> 赞同：0
> 
> 时间：2012-06-23T23:14:16.770
> 
> 标签：sencha-touch-2, sencha-charts

我需要知道如何使用 sencha touch chart 2.0 制作柱形图，文档与 1.0 相同，并且我知道图表 1 和 2 不兼容。

我如何用图表制作视图？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T02:16:03.720

现在可以下载触摸图表 2 测试版，您可以从内置示例和演示开始。

[触摸图表 beta 2](http://cdn.sencha.io/touch-charts-2.0.0-beta.zip)

# android - 如何在弹出窗口中添加清除按钮

> ID：11173753
> 
> 赞同：1
> 
> 时间：2012-06-23T23:14:40.930
> 
> 标签：android

我是android开发的新手。我创建了一个弹出窗口，该窗口在主活动类中单击按钮时被调用。我的弹出窗口上有一些编辑文本字段。我可以通过单击按钮清除弹出窗口上的所有这些编辑文本字段吗？如果是，那怎么办？提前致谢！！下面是我正在尝试的，但它给出了空点异常。

```
 public void initatePopupWindow(View view)
{
    try
    {
        LayoutInflater inflater=(LayoutInflater)  ContactdetailsActivity.this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        View layout=inflater.inflate(R.layout.popupwindow,(ViewGroup)findViewById(R.id.popuplayout));
        pw = new PopupWindow(layout, 500, 500, true);
        pw.showAtLocation(layout, Gravity.CENTER, 0, 0);
        Button b1=(Button)layout.findViewById(R.id.cancel);
       b1.setOnClickListener(cancel_button_click_listener);   
       Button b2=(Button)layout.findViewById(R.id.clear);

       b2.setOnClickListener(clear_fields);

    }
    catch (Exception e)
    {

    }
}
    private OnClickListener clear_fields= new OnClickListener()
    {
        public void onClick(View v)
        {

        ViewGroup group= (ViewGroup)findViewById(R.id.popuplayout);
            for(int i=0,count=getChildCount(); i<count; ++i)
            {
                View v1= group.getChildAt(i);
                if(v1 instanceof EditText)
                {
                    ((EditText)v1).setText("");
                }
                if(v1 instanceof ViewGroup && (((ViewGroup)v1).getChildCount() > 0))
                    onClick((ViewGroup)v1);
            }
        }
    };
    private OnClickListener cancel_button_click_listener=new OnClickListener()
    {
        public void onClick(View v)
        {
        pw.dismiss();
        }
    };

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T23:49:11.863

你在这条线上有错误吗？

```
ViewGroup group= (ViewGroup)findViewById(R.id.popuplayout);

ViewGroup group= (ViewGroup) layout.findViewById(R.id.popuplayout);//layout is your inflated 
```

我认为这可能是因为您需要使用您在布局充气机上调用的值。

无论如何，我想你应该这样做：获取所有编辑文本的参考，然后一一清除它们。也许保留一组编辑文本并遍历它们并将它们的文本设置为“”而不是检查类型。

# mysql - 选择返回总预订价格

> ID：11173754
> 
> 赞同：0
> 
> 时间：2012-06-23T23:14:45.757
> 
> 标签：mysql, period

我有下表 SEA​​SONS ，其时间段定义了每个时间段的预订价格；

```
ID, STARTDATE,  ENDDATE,    PRICE
 6, 2012-06-01, 2012-06-30, 20
 7, 2012-07-01, 2012-07-31, 35
 8, 2012-08-01, 2012-08-31, 30
 9, 2012-09-01, 2012-09-30, 25 
```

此表定义定价期（定价期的开始和结束日期以及该特定定价期中每天的预订价格）。问题是如何创建一个查询，该查询将返回某个给定预订期间所有天的预订总价？例如，如何计算（SELECT？）从 2012-06-10 到 2012-08-20 期间的总（SUM）预订价格？

（当然可以很容易地手动计算 = 21（6 月的天数）x20 + 31（7 月的天数）x35 + 20（8 月的天数）x30 = 2105） 返回总预订价格的 SELECT 语句应该是什么样子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T23:20:05.450

使用[`DATEDIFF`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_datediff)功能：

```
SELECT SUM(DATEDIFF(ENDDATE,STARTDATE) * PRICE) AS TOTAL_PRICE
    FROM SEASONS
    WHERE STARTDATE <= '2012-06-10' AND ENDDATE >= '2012-08-20' 
```

此外，我们可以添加预订开始/结束检查，因为它们位于中间某个位置，您不需要包括所有期间...

所以：

```
SET @START='2012-06-10';
SET @END='2012-08-20';
SELECT SUM(
  DATEDIFF(
    IF(YEAR(ENDDATE)=YEAR(@END) AND MONTH(ENDDATE)=MONTH(@END), @END, ENDDATE),
    IF(YEAR(STARTDATE)=YEAR(@START) AND MONTH(STARTDATE)=MONTH(@START), @START, STARTDATE)
     )
  ) AS TOTAL_SUM
FROM SEASONS
WHERE STARTDATE <= @END AND ENDDATE >= @START 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T18:52:32.170

仅对于其他读者，作为先前答案的结果，最终查询是：

```
SET @START='2012-06-10';
SET @END='2012-08-20';
SELECT SUM(
 (DATEDIFF(
   IF(enddate>=@END,@END,enddate),      
   IF(startdate<=@START,@START,startdate)
 )+1)*price ) AS TOTAL_SUM
FROM seasons WHERE startdate<=@END AND enddate>=@START 
```

1 应添加到日期差异，以便将开始日期和结束日期都包含在定价范围内，当然，它应该乘以价格。

@poncha 非常感谢，我已经创建了一个程序，它遍历预订期间的所有日期，获取多个价格并将它们相加作为解决方案，但我知道应该有一个更简单、更有效的解决方案

# cgcontext - 无法为简单形状填充 CGContext

> ID：11173755
> 
> 赞同：0
> 
> 时间：2012-06-23T23:14:47.263
> 
> 标签：cgcontext, fill

以下方法应该创建一个 FILLED 三角形图像，但它只创建一个轮廓。为什么它不填充？和这个一起疯了。我希望它得到答复，以便下一个为此苦苦挣扎的可怜灵魂可以清除障碍并挽救一个小时的生命。

这是我写的方法：

```
+ (UIImage *)triangleWithSize:(CGSize)imageSize
{
    UIGraphicsBeginImageContextWithOptions(imageSize, NO, 0.0);
    CGContextRef context = UIGraphicsGetCurrentContext();    
    CGContextSetShouldAntialias(context, YES);

    // set parameters
    CGContextSetLineWidth(context, 1);
    CGContextSetStrokeColorWithColor(context, [UIColor yellowColor].CGColor);
    CGContextSetFillColorWithColor(context, [UIColor yellowColor].CGColor);

    // draw triangle
    CGContextBeginPath(context);
    CGContextMoveToPoint(context, imageSize.width, 0);
    CGContextAddLineToPoint(context, imageSize.width, imageSize.height);
    CGContextMoveToPoint(context, imageSize.width, imageSize.height);
    CGContextAddLineToPoint(context, 0, imageSize.height / 2);
    CGContextMoveToPoint(context, 0, imageSize.height / 2); 
    CGContextAddLineToPoint(context, imageSize.width, 0);
//    CGContextFillPath(context);
  //  CGContextClosePath(context);

    // stroke and fill?
    CGContextDrawPath(context, kCGPathFillStroke);

    UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    UIGraphicsPopContext();

    return image;    
} 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T23:32:51.443

我从以下帖子中找到了答案： [CGContext line drawing: CGContextFillPath not working？](https://stackoverflow.com/questions/3808984/cgcontext-line-drawing-cgcontextfillpath-not-working)

最后一个答案提供了一个使用 CGMutablePathRef 的示例。对于三角形，我使用了以下代码：

```
CGMutablePathRef pathRef = CGPathCreateMutable();

CGPathMoveToPoint(pathRef, NULL, imageSize.width, 0);
CGPathAddLineToPoint(pathRef, NULL, imageSize.width, imageSize.height);
CGPathAddLineToPoint(pathRef, NULL, 0, imageSize.height / 2);
CGPathAddLineToPoint(pathRef, NULL, imageSize.width, 0);

CGPathCloseSubpath(pathRef);

CGContextAddPath(context, pathRef);
CGContextFillPath(context);

CGContextAddPath(context, pathRef);
CGContextStrokePath(context);

CGPathRelease(pathRef); 
```

我不知道为什么我上面使用的原始方法不起作用。接下来我会弄清楚的。

# list - 限制python中列表的大小

> ID：11173758
> 
> 赞同：2
> 
> 时间：2012-06-23T23:15:12.213
> 
> 标签：list, python-2.7

我想限制python 2.7中列表的大小我一直在尝试用while循环来做，但它不起作用

```
l=[]
i=raw_input()//this is the size of the list
count=0
while count<i:
    l.append(raw_input())
    count=count+1 
```

问题是它没有完成循环。我认为这个问题有一个简单的答案，但我找不到。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-23T23:28:20.353

我认为问题出在这里：

```
i=raw_input()//this is the size of the list 
```

`raw_input()`返回一个字符串，而不是整数，因此 和 之间的比较`i`没有`count`意义。[在 Python 3 中，您会收到错误消息`TypeError: unorderable types: int() < str()`，这会使事情变得清楚。] 如果您转换`i`为 int，但是：

```
i = int(raw_input()) 
```

它应该做你所期望的。（我们将忽略错误处理等，并可能在需要时转换您添加的内容`l`。）

请注意，编写类似的东西会更像 Pythonic

```
for term_i in range(num_terms):
    s = raw_input()
    l.append(s) 
```

大多数情况下，您不需要通过“+1”手动跟踪索引，因此如果您发现自己这样做，可能会有更好的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T23:28:35.913

那是因为 i 有一个字符串值类型，并且 int < "string" 总是返回 true。

你想要的是：

```
l=[]
i=raw_input() #this is the size of the list
count=0
while count<int(i): #Cast to int
    l.append(raw_input())
    count=count+1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T23:30:18.137

您应该尝试将代码更改为：

```
l = []
i = input() //this is the size of the list
count = 0
while count < i:
    l.append(raw_input())
    count+=1 
```

raw_input() 返回一个字符串，而 input() 返回一个整数。也是`count+=1`比`count = count + 1`. 祝你好运

# maven - Restlet Maven 依赖项

> ID：11173761
> 
> 赞同：18
> 
> 时间：2012-06-23T23:15:37.810
> 
> 标签：maven, restlet

有谁知道 RESTLET maven 依赖项是什么？

网站上的任何条目都不起作用。我最终不得不安装罐子才能让它工作。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-26T14:50:53.060

添加这个回购：

```
<repositories>
    <repository>
        <id>maven-restlet</id>
        <name>Public online Restlet repository</name>
        <url>https://maven.restlet.talend.com/</url>
    </repository>
</repositories> 
```

然后在您的版本中包含依赖项：

```
<dependency>
        <groupId>org.restlet.jee</groupId>
        <artifactId>org.restlet</artifactId>
        <version>${restlet.version}</version>
</dependency> 
```

利用：

```
<properties>
    <restlet.version>2.0.14</restlet.version>
</properties> 
```

定义restlet版本或只是放置您喜欢的任何版本。希望能帮助到你！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-11T22:52:50.830

有时，maven 依赖项不会自动下载。您必须使用 mvn compile 强制它。

这是对使用以下依赖项的示例 restful 服务的引用：

[http://topjavatutorial.com/frameworks/spring/spring-rest/standalone-restful-service-using-restlet-framework/](http://topjavatutorial.com/frameworks/spring/spring-rest/standalone-restful-service-using-restlet-framework/)

```
 <dependency>
        <groupId>org.restlet.jse</groupId>
        <artifactId>org.restlet</artifactId>
        <version>2.1-RC2</version>
    </dependency>
    <dependency>
        <groupId>org.restlet.jse</groupId>
        <artifactId>org.restlet.ext.simple</artifactId>
        <version>2.1-RC2</version>
    </dependency> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-01T11:07:10.770

[在此](http://dev.mygrid.org.uk/wiki/display/developer/Maven+repository)使用给定的镜子

**这些镜像是最新的，因此无需担心版本等。**

在 Maven 安装位置编辑`settings.xml`以添加镜像。

```
<settings>
  <mirrors>
     <mirror>
       <id>mygrid-restlet</id>
       <url>http://www.mygrid.org.uk/maven/restlet/maven.restlet.org</url>
       <mirrorOf>maven-restlet</mirrorOf>
     </mirror>
  </mirrors>
 </settings> 
```

假设使用原始存储库的 POM 使用：

```
<repository>
   <id>maven-restlet</id>
   <name>Public online Restlet repository</name>
   <url>http://maven.restlet.org</url>
</repository> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-10T04:09:34.057

```
<!-- https://mvnrepository.com/artifact/com.softlayer.api/softlayer-api-client -->
<dependency>
    <groupId>com.softlayer.api</groupId>
    <artifactId>softlayer-api-client</artifactId>
    <version>0.1.0</version>
</dependency> 
```

# php - navigateToURL 通过 POST 向 php 页面发送数据

> ID：11173762
> 
> 赞同：3
> 
> 时间：2012-06-23T23:15:40.150
> 
> 标签：php, actionscript-3, flash

想象一下，我在 Flash 应用程序中有一个表单，其中包含两个字段 input1 和 input2。当用户完成填写此表单时，它会转到一个 php 页面。目前，我正在使用该`$_GET`方法发送数据。
像这样：

```
var request:URLRequest;
request = new URLRequest("http://site.com/page.php?data1="+input1.text+"&data2="+input2.text);
navigateToURL(request); 
```

在php代码中：

```
$_GET["data1"];
$_GET["data2"]; 
```

但是这样一来，信息就保留在 URL 中。我怎样才能通过这个发送`$_POST`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T00:08:03.687

在 AS 3 中，用于指定请求的[URLRequest类有一个](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/URLRequest.html)[方法](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/URLRequest.html#method)属性，可用于设置提交方法的 HTTP 选项，您需要使用[URLRequestMethod](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/URLRequestMethod.html)常量[POST](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/URLRequestMethod.html#POST)将其设置为 POST 以获得完美的形式，或者您可以使用“POST”字符串。

您可以在[snipplr上找到一个](http://snipplr.com/)[全面的示例](http://snipplr.com/view/4487/)

简而言之：

```
var url:String = "http://localhost/myPostReceiver.php";
var request:URLRequest = new URLRequest(url);
var requestVars:URLVariables = new URLVariables();
requestVars.foo = "bar";
// ... fill in your data
request.data = requestVars;
request.method = URLRequestMethod.POST;
// after this load your url with an UrlLoader or navigateToUrl 
```

使用 Adob​​e Air 时，您需要使用[URLLoader](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/URLLoader.html)类而不是[navigateToURL()](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/package.html#navigateToURL%28%29)因为以下花絮：

> 参数 request:URLRequest — 一个 URLRequest 对象，它指定要导航到的 URL。
> 
> **对于在 Adob​​e AIR 中运行的内容，在使用 navigateToURL() 函数时，运行时会将使用 POST 方法（其方法属性设置为 URLRequestMethod.POST 的方法）的 URLRequest 视为使用 GET 方法**。

基本上只要您想正确使用 POST 设置方法，[navigateToUrl](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/package.html#navigateToURL%28%29)的文档也表明：

接下来在 php 中，您将收到超全局[$_POST](http://www.php.net/manual/en/reserved.variables.post.php)数组中的变量，您可以在其中访问它：

```
<?php
$foo = $_POST['foo'];
/* $foo now contains 'bar'
   assignment to another value is not necessary to use $_POST['foo'] 
   in any function or statement
*/ 
```

# ios - iOS Facebook SDK 高分故事未显示在用户的时间线上

> ID：11173764
> 
> 赞同：0
> 
> 时间：2012-06-23T23:15:49.353
> 
> 标签：ios, facebook-graph-api

我正在开发一款 iOS 游戏，我想将高分故事发布到用户的 Facebook 时间线。我正在向分数 api 发出 POST 请求，传递应用程序访问令牌以及分数。该方法返回 true，如开发人员文档中所述，这意味着分数已成功发布。

问题是即使这种方法似乎工作正常，高分故事也永远不会显示在用户的时间线上。我知道并不是所有的故事都会被发布，但我什至没有一个我能在那里看到的故事。所以它不起作用。

该应用程序设置为游戏类别下的本机 iOS 应用程序。

我还需要在应用程序设置上设置什么才能使其正常工作吗？

提前致谢。

# java - 为什么我不应该使用构造函数来实例化字符串对象？

> ID：11173765
> 
> 赞同：5
> 
> 时间：2012-06-23T23:16:07.903
> 
> 标签：java

显然，在 Java 中，`String s = "foo"`优先于`String s = new String("foo")`.

为什么？不是在这两种情况下都创建了一个新的字符串对象吗？为什么第一种情况会阻止调用构造函数？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-23T23:17:43.707

> 为什么？

因为第二种方法会产生**两个**字符串对象（原始由于字符串文字，加上显式副本）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-23T23:24:05.890

第一种情况是**字符串文字**，只是语言为您提供创建字符串的简写。String 类的构造函数仍然被调用，只是没有显式调用，这意味着更少的输入和更少的代码混乱。

第二种情况采用已经由文字创建的 String 对象并将其传递给构造函数，该构造函数复制内容以创建一个新的、单独的 String 对象。文字仍然存在，因为文字是被实习的。

很少有使用 String 构造函数的意义（几乎只有当您创建了一个非常大的字符串的子字符串并希望释放字符串其余部分使用的内存时，因为默认情况下子字符串使用相同的底层 char 数组作为原始字符串，只是具有不同的偏移量和长度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T23:20:45.857

我不认为它更可取。我假设您获得的唯一“好处”是，如果您错误地使用“==”运算符而不是 equals 方法，则字符串的两个不同实例将更快地失败，这将提示您修复代码。（ == 运算符可能“成功”并意外失败）

当然，除非您的代码出于任何原因**要求**您构建两个不同的实例

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-23T23:25:10.320

> > 为什么？不是在这两种情况下都创建了一个新的字符串对象吗？

不，作为字符串文字的初始形式将被实习，以便只创建一个实例：

```
String s = "foo";
String s2 = "foo"; 
```

s == s2 => 真

# java - 在不计算垂直向量的情况下获取二维三角形中点的距离？

> ID：11173766
> 
> 赞同：0
> 
> 时间：2012-06-23T23:16:31.710
> 
> 标签：java, math, trigonometry

好的，所以我试图在不计算垂直向量的情况下获得二维三角形中一个点的距离。

```
float qd = Vector2f.dot(new Vector2f(pos.x, pos.z),
                        new Vector2f(normal.pos.x, normal.pos.z)) -
           Vector2f.dot(new Vector2f(q.center.x, q.center.z),
                        new Vector2f(normal.pos.x, normal.pos.z)); 
```

这就是我正在使用的代码。（注意：它将 3f 向量转换为 2d 向量，但您不必担心）。我需要计算的结果介于 0 和 1 IE 0.5 之间。

如果我仍然没有正确解释，也许这会有所帮助？ ![轴示例](../Images/e6c940b49a4167bb29e324147e3bcc81.png)

我的问题是：如何在不计算垂直向量距离的情况下获得二维三角形中点的距离？IE如果三角形朝上（y = -1）没有任何倾斜，我需要三角形中没有任何X的距离。

Edit1：关于你在说什么，Banthar，这就是我从中得到的，它不起作用，但它似乎接近工作。

```
float d = (float) Math.sqrt( 0 /*cause the two x's should be the same */ + Math.pow(pos.z - q.max.z, 2));   
float h = (float) Math.sqrt( 0 /*cause the two x's should be the same */ + Math.pow(q.min.z - q.max.z, 2)); 

float myDist = d/h; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T07:23:54.137

假设您的三角形是 ABC，点是 P。您要查找的数字是从 P 到 AB 的距离除以从 C 到 AB 的距离。这与对应区域的比例相同。所以你可以计算两个区域：

```
Area(ABP) / Area(ABC) 
```

计算三角形面积的最佳方法取决于您掌握的有关三角形的信息。

如果您只有顶点，那么您可以使用：

```
Area(ABP) / Area(ABC) = ( Ax*By - Ax*Py + Ay*Px - Ay*Bx + Bx*Py - By*Px ) /
                        ( Ax*By - Ax*Cy + Ay*Cx - Ay*Bx + Bx*Cy - By*Cx ) 
```

# tabs - 如何使制表符成为 4 个空格而不是 nano 中的 8 个空格？

> ID：11173769
> 
> 赞同：187
> 
> 时间：2012-06-23T23:17:02.700
> 
> 标签：tabs, terminal, indentation, nano

当我在编辑器中按 TAB 时`nano`，光标会跳出 8 个空格，如下所示：

```
def square(x):
        return x * x
def cube(y):
        return y * y * y 
```

如何将制表位宽度设置为 4 个空格以显示如下：

```
def square(x):
    return x * x
def cube(y):
    return y * y * y 
```

* * *

## 回答 #1

> 赞同：297
> 
> 时间：2013-03-12T14:50:46.603

如果您将 nano 与**python**之类的语言一起使用（如您的示例中所示），那么将制表符转换为空格也是一个好主意。

编辑您的**~/.nanorc**文件（或创建它）并添加：

```
set tabsize 4
set tabstospaces 
```

如果您已经有了一个带有制表符的文件并想将它们转换为空格，我推荐使用`expand`命令（shell）：

```
expand -4 input.py > output.py 
```

* * *

## 回答 #2

> 赞同：114
> 
> 时间：2012-06-23T23:28:44.847

# 命令行标志

来自`man nano`：

```
-T cols (--tabsize=cols)
    Set the size (width) of a tab to cols columns.
    The value of cols must be greater than 0\. The default value is 8.
-E (--tabstospaces)
    Convert typed tabs to spaces. 
```

例如，要将选项卡大小设置为 4，将选项卡替换为空格，并编辑文件“foo.txt”，您将运行以下命令：

```
nano -ET4 foo.txt 
```

# 配置文件

来自`man nanorc`：

```
set tabsize n
    Use a tab size of n columns. The value of n must be greater than 0.
    The default value is 8.
set/unset tabstospaces
    Convert typed tabs to spaces. 
```

编辑您的`~/.nanorc`文件（如果它不存在则创建它），并将这些命令添加到其中。例如：

```
set tabsize 4
set tabstospaces 
```

Nano 在启动时默认使用这些设置，但命令行标志将覆盖它们。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-09-05T10:23:52.550

在 nano 2.2.6 中， ~/.nanorc 中的行似乎是

```
set tabsize 4
```

设置选项卡空间给了我错误：'未知标志“选项卡空间”'

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-06-23T06:41:38.780

以 nano 设置标签大小

```
cd /etc
ls -a
sudo nano nanorc 
```

[![在此处输入图像描述](../Images/760707bb15695b84756736a535455dd6.png)](https://i.stack.imgur.com/IYLJC.png)

链接：[https ://app.gitbook.com/@cai-dat-chrome-ubuntu-18-04/s/chuaphanloai/setting-the-tab-size-in-nano](https://app.gitbook.com/@cai-dat-chrome-ubuntu-18-04/s/chuaphanloai/setting-the-tab-size-in-nano)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-12-20T09:17:54.987

对于未来的观众，我的 /etc/nanorc 文件中靠近第 153 行的一行写着“set tabsize 8”。这个词可能需要是 tabsize 而不是 tabspace。在我用 4 替换 8 并取消注释该行后，它解决了我的问题。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-01-06T15:54:49.483

对于任何可能偶然发现这个老问题的人......

我认为需要解决一件事。

`~/.nanorc`用于将您的用户特定设置应用于 nano，因此如果您正在编辑需要使用`sudo nano`for 权限的文件，那么这将不起作用。

当使用`sudo`您的自定义用户配置文件时，在打开程序时不会加载，因为您没有从您的帐户运行程序，因此您的任何配置更改`~/.nanorc`都不会应用。

如果这是您发现自己所处的情况（想要运行`sudo nano` *并*使用您自己的配置设置），那么您有三个选择：

*   运行时使用命令行标志`sudo nano`
*   编辑`/root/.nanorc`文件
*   编辑`/etc/nanorc`全局配置文件

请记住，这`/etc/nanorc`是一个全局配置文件，因此它会影响所有用户，这可能会或可能不会成为问题，具体取决于您是否拥有多用户系统。

此外，用户配置文件将覆盖全局配置文件，因此如果您要编辑`/etc/nanorc`并`~/.nanorc`使用不同的设置，当您运行`nano`时它将加载设置，`~/.nanorc`但如果您运行`sudo nano`，它将从`/etc/nanorc`.

这同样适用于运行时`/root/.nanorc`将覆盖`/etc/nanorc``sudo nano`

除非您有**很多**选择，否则使用标志可能是最好的选择。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-02-05T03:39:19.263

在 nano 设置选项卡大小 4 很容易。有一些简单的步骤可以做到这一点：

1.  从主目录转到“etc”目录（文件夹）。

```
cd /etc 
```

2.  有一个文件名“nanorc”，需要编辑它。您可以通过运行查看文件列表`ls -a`。使用您喜欢的编辑器（如 nano 或 gedit 等）输入文件。

```
sudo nano nanorc 
```

3.  您需要找出一行`set tabsize 8`。默认情况下，制表符大小设置为 8 个空格。大约有300行。您可以运行此命令来搜索行的位置而无需滚动。要从nano**退出**(ctrl+Z) 并运行

```
grep -n "set tabsize" nanorc 
```

就我而言，这是第 159 行。输出是：

```
159:# set tabsize 8 
```

4.  现在再次打开“nanorc”文件（如步骤 2 所示）。转到在步骤 3 中找到的行号。在 nano 中查看编辑器中的行号按**alt+shift+3**。你可能会发现这样一行：`# set tabsize 8`

取消注释该行（删除`#`）并将 4 而不是 8 并保存（ctrl+o 然后按 enter）。 [![在此处输入图像描述](../Images/49611167c1b2a570378890ad0109dbba.png)](https://i.stack.imgur.com/9KkBQ.png)

然后你就完成了。-- 如果您将 nano 用于 python 脚本，则将选项卡大小设置为 4 会很有帮助。

> > 如果它不能完美运行，也请取消注释下一行。在我的情况下，第 162 行，即“ **#set tabstospaces** ”

# css - 固定页眉/页脚，带边距的流动内容

> ID：11173778
> 
> 赞同：0
> 
> 时间：2012-06-23T23:18:50.980
> 
> 标签：css

我做了一个带有固定页眉和页脚的设计，中间有一个液体。

我的中间有边距，但问题是滚动条没有边距。

这是我所做的：http: [//jsfiddle.net/xXxV4/](http://jsfiddle.net/xXxV4/)

如您所见，滚动条紧贴页眉、页脚和右侧。我希望它具有 20px 边距的内容 div

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T23:26:40.790

这是你想要的吗？

```
::-webkit-scrollbar-track {
    -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.3); 
    -webkit-border-radius: 10px;
    border-radius: 10px;
    margin: 20px 0px 20px 0px; /* NEW */
} 
```

因此，滚动条也有 20px 的边距。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T23:30:32.240

你的`#main`元素是`position: absolute`，所以你可以`right: 20px`吗？

```
#content{
    padding: 20px 0 0 20px;
    overflow: auto;
}

#main{
    position: absolute;
    top: 50px;
    overflow: auto;
    bottom: 40px;
    right: 20px;
    width: 100%;
} 
```

[http://jsfiddle.net/userdude/xXxV4/5/](http://jsfiddle.net/userdude/xXxV4/5/)

# android - 使用 JavaCV for Android 对图像进行人脸检测

> ID：11173784
> 
> 赞同：1
> 
> 时间：2012-06-23T23:20:46.030
> 
> 标签：android, face-detection, javacv

我正在制作一个人脸检测应用程序（不是实时的）来检测 android 上图像中的人脸我尝试使用 android.media 中的 FaceDetector 类，这很好，但它不是很准确。所以我下载了 JavaCV 和 java.cpp 包（使用 OpenCV v 2.3） 项目运行但出现异常：

```
 Thread [<1> main] (Suspended (exception UnsatisfiedLinkError))  
Loader.loadLibrary(Class, String[], String) line: 463   
Loader.load(Class) line: 368    
Loader.load() line: 315 
opencv_core.<clinit>() line: 131    
Class.classForName(String, boolean, ClassLoader) line: not available [native method]    
Class.forName(String, boolean, ClassLoader) line: 234   
Loader.load(Class) line: 334    
opencv_imgproc.<clinit>() line: 96  
Class.classForName(String, boolean, ClassLoader) line: not available [native method]    
Class.forName(String, boolean, ClassLoader) line: 234   
Loader.load(Class) line: 334    
opencv_objdetect.<clinit>() line: 96    
Class.classForName(String, boolean, ClassLoader) line: not available [native method]    
Class.forName(String, boolean, ClassLoader) line: 234   
Loader.load(Class) line: 334    
MyView.<init>(Context) line: 50 
FaceSwAPPerActivity.onCreate(Bundle) line: 35   
Instrumentation.callActivityOnCreate(Activity, Bundle) line: 1047   
ActivityThread.performLaunchActivity(ActivityThread$ActivityClientRecord, Intent) line: 1611    
ActivityThread.handleLaunchActivity(ActivityThread$ActivityClientRecord, Intent) line: 1663 
ActivityThread.access$1500(ActivityThread, ActivityThread$ActivityClientRecord, Intent) line: 117   
ActivityThread$H.handleMessage(Message) line: 931   
ActivityThread$H(Handler).dispatchMessage(Message) line: 99 
Looper.loop() line: 123 
ActivityThread.main(String[]) line: 3683    
Method.invokeNative(Object, Object[], Class, Class[], Class, int, boolean) line: not available [native method]  
Method.invoke(Object, Object...) line: 507  
ZygoteInit$MethodAndArgsCaller.run() line: 839  
ZygoteInit.main(String[]) line: 597 
NativeStart.main(String[]) line: not available [native method] 
```

以下是我的代码：

```
import android.app.Activity;
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.os.Bundle;
import android.view.View;

import com.googlecode.javacpp.Loader;
import com.googlecode.javacv.cpp.opencv_objdetect;
import com.googlecode.javacv.cpp.opencv_objdetect.*;
import com.googlecode.javacv.cpp.opencv_core.*;

import static com.googlecode.javacv.cpp.opencv_core.cvGetSeqElem;
import static com.googlecode.javacv.cpp.opencv_core.cvRectangle;
import static com.googlecode.javacv.cpp.opencv_core.cvPoint;
import static com.googlecode.javacv.cpp.opencv_objdetect.cvHaarDetectObjects;
import static com.googlecode.javacv.cpp.opencv_core.cvLoad;
import static com.googlecode.javacv.cpp.opencv_imgproc.cvCvtColor;
import static com.googlecode.javacv.cpp.opencv_imgproc.CV_BGR2GRAY;
import static com.googlecode.javacv.cpp.opencv_core.CV_AA;
import static com.googlecode.javacv.cpp.opencv_core.IPL_DEPTH_8U;

public class FaceSwAPPerActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) 
{
super.onCreate(savedInstanceState);
//setContentView(R.layout.main);
setContentView(new MyView(this));
}

}
// The cascade definition to be used for detection.
//private static final String CASCADE_FILE = "haarcascade_frontalface_alt.xml";

class MyView extends View {

  Bitmap myBitmap;

public MyView(Context context) 
    {
        super(context);

         Loader.load(opencv_objdetect.class);

         String CASCADE_FILE = "../haarcascade_frontalface_alt.xml";
         BitmapFactory.Options bitmapFatoryOptions=new BitmapFactory.Options();
            bitmapFatoryOptions.inPreferredConfig=Bitmap.Config.ARGB_8888;
         myBitmap=BitmapFactory.decodeResource(getResources(), R.drawable.kidsparty, bitmapFatoryOptions);

        // Load the original image.
         IplImage originalImage = IplImage.create(200, 400, IPL_DEPTH_8U, 1);
        //IplImage originalImage = com.googlecode.javacv.cpp.opencv_highgui.cvLoadImage( imgPath , 1);
        myBitmap.copyPixelsToBuffer(originalImage.getByteBuffer());

        // We need a grayscale image in order to do the recognition, so we
        // create a new image of the same size as the original one.
        IplImage grayImage = IplImage.create(originalImage.width(), originalImage.height(), IPL_DEPTH_8U, 1);

        // We convert the original image to grayscale.
        cvCvtColor(originalImage, grayImage, CV_BGR2GRAY);
        CvMemStorage storage = CvMemStorage.create();

        // We instantiate a classifier cascade to be used for detection, using the cascade definition.
        CvHaarClassifierCascade cascade = new CvHaarClassifierCascade(cvLoad(CASCADE_FILE));

        // We detect the faces.
        CvSeq faces = cvHaarDetectObjects(grayImage, cascade, storage, 1.1, 1, 0);

        //We iterate over the discovered faces and draw yellow rectangles around them.
        for (int i = 0; i < faces.total(); i++) {
          CvRect r = new CvRect(cvGetSeqElem(faces, i));
          cvRectangle(originalImage, cvPoint(r.x(), r.y()),
          cvPoint(r.x() + r.width(), r.y() + r.height()), CvScalar.YELLOW, 1, CV_AA, 0);
        }
        myBitmap.copyPixelsToBuffer(originalImage.getByteBuffer());
        // Save the image to a new file.
       // com.googlecode.javacv.cpp.opencv_highgui.cvSaveImage(args[1], originalImage);
    }
@Override
protected void onDraw(Canvas canvas)
{
    canvas.drawBitmap(myBitmap, 0,0, null);
}

} 
```

我只是不知道是什么问题请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T12:33:03.743

问题似乎是链接opencv。您是否在路径变量中包含了 opencv\build\x64\vc10\bin ？也检查下面的链接。 [https://code.google.com/p/javacv/wiki/Windows7AndOpenCV](https://code.google.com/p/javacv/wiki/Windows7AndOpenCV)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T23:30:39.947

快速搜索并想出了这个。即使格式不同，错误看起来也一样。

[javaCV UnsatisfiedLinkError](https://stackoverflow.com/questions/10692053/javacv-unsatisfiedlinkerror)

显然，除了 Java 绑定之外，您还必须安装核心 OpenCV 软件和库。

希望这可以帮助

# java - KSOAP2 android 错误预期 start_tag

> ID：11173785
> 
> 赞同：0
> 
> 时间：2012-06-23T23:20:50.537
> 
> 标签：java, android, soap, ksoap2, android-ksoap2

大家好，我使用的是 KSOAP2 2.6.5，但在 2.6.5 之前我也使用了 2.4，我收到了同样的错误：

```
org.xmlpull.v1.XmlPullParserException: expected: START_TAG {http://schemas.xmlsoap.org/soap/envelope/}Envelope (position:START_TAG <definitions name='wsLogin' targetNamespace='http://painel01.allinmail.com.br/wsAllin/login.php'>@2:403 in java.io.InputStreamReader@4375ba18) 
```

我尝试了解决方案，但到目前为止还没有找到任何解决方案

我的代码：

```
private String URL = "http://painel01.allinmail.com.br/wsAllin/login.php?wsdl";
private String METHOD = "getTicket";

private static final String NAMESPACE = "http://painel01.allinmail.com.br/wsAllin/login.php";
private static final String SOAP_ACTION = "http://painel01.allinmail.com.br/wsAllin/login.php#getTicket";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    SoapObject request = new SoapObject(NAMESPACE, METHOD);
    request.addAttribute("login", "testeallin");
    request.addAttribute("senha", "allin@teste456");
    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(
            SoapEnvelope.VER11);
    envelope.setOutputSoapObject(request);
    HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);
    try {
        log("point A");
        androidHttpTransport.call(SOAP_ACTION, envelope);
        log("point B");
        String resultsRequestSOAP = envelope.getResponse().toString();
        log("point C");
        log(resultsRequestSOAP);
    } catch (Exception e) {
        e.printStackTrace();
        log(e.toString());
    }

}

private void log(String msg) {
    Log.d("KSOAP2", msg);
} 
```

我的回应是：

```
point A
org.xmlpull.v1.XmlPullParserException: expected: START_TAG {http://schemas.xmlsoap.org/soap/envelope/}Envelope (position:START_TAG <definitions name='wsLogin' targetNamespace='http://painel01.allinmail.com.br/wsAllin/login.php'>@2:403 in java.io.InputStreamReader@4375ba18) 
```

我该如何修复它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T11:45:55.793

检查 URL 是否被正确解析。

我猜你正在用 c# 制作你的 web 方法。如果是这样的话，那么，

在 c# 中，转到解决方案资源管理器。
在那里，检查 Appcode 是否有一个名为 app_offline.htm 的文件。

右键单击并将其从项目中排除。

这个小东西对我有用。希望它可以帮助遇到类似问题的人。

# php - 在新窗口上打开链接，顶部栏来自我的网站

> ID：11173787
> 
> 赞同：0
> 
> 时间：2012-06-23T23:21:42.367
> 
> 标签：php, ajax

一旦按下，我的兄弟如何清除任何可能指向我的网站的链接会再次打开页面并成为我网站的顶部栏，例如以下

[http://www.example.com/index.html](http://www.example.com/index.html)

[编辑] 如何在网站顶部呈现一个栏，在其正文中显示来自其他网站的内容。

我有这首颂歌可以从其他网站获取 RSS

```
gfeedfetcher.prototype._displayresult=function(feeds){
    var rssoutput=(this.itemcontainer=="<li>")? "<ul>\n" : ""
    gfeedfetcher._sortarray(feeds, this.sortstring)
    for (var i=0; i<feeds.length; i++){
        var itemtitle="<a href=\"" + feeds[i].link + "\" target=\"" + this.linktarget + "\" class=\"titlefield\">" + feeds[i].title + "</a>"
        var itemlabel=/label/i.test(this.showoptions)? '<span class="labelfield">['+this.feeds[i].ddlabel+']</span>' : " "
        var itemdate=gfeedfetcher._formatdate(feeds[i].publishedDate, this.showoptions)
        var itemdescription=/description/i.test(this.showoptions)? "<br />"+feeds[i].content : /snippet/i.test(this.showoptions)? "<br />"+feeds[i].contentSnippet  : ""
        rssoutput+=this.itemcontainer + itemtitle + " " + itemlabel + " " + itemdate + "\n" + itemdescription + this.itemcontainer.replace("<", "</") + "\n\n"
    }
    rssoutput+=(this.itemcontainer=="<li>")? "</ul>" : ""
    this.feedcontainer.innerHTML=rssoutput
} 
```

我需要点击链接在其他窗口中打开我的框架

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T23:33:03.837

该网站只是顶部的标题

```
<iframe></iframe> 
```

内

[在 w3schools http://www.w3schools.com/tags/tryit.asp?filename=tryhtml_iframe](http://www.w3schools.com/tags/tryit.asp?filename=tryhtml_iframe)查看更多信息

# iphone - NSUserDefaults 不完全适用于应用程序中的设置

> ID：11173790
> 
> 赞同：0
> 
> 时间：2012-06-23T23:22:00.057
> 
> 标签：iphone, xcode, nsuserdefaults

我的应用程序中有一个设置视图，用户可以选择其中一个选项卡显示来自播客的 mp3 提要或来自播客的 mov。我在第一次运行应用程序时设置它以显示 AlertView 询问他们喜欢什么。我在 applicationDidFinishLaunching 中这样做：

```
 NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
if (! [defaults boolForKey:@"notFirstRun"]) {
    UIAlertView *firstrun = [[UIAlertView alloc] initWithTitle:@"Sermon Preference" message:@"Do you prefer audio only, or video sermons?  (This setting can be changed at any time in the Settings Page.)" delegate:self cancelButtonTitle:nil otherButtonTitles:@"Audio", @"Video", nil];
    [firstrun show];
    [firstrun release];
    [defaults setBool:YES forKey:@"notFirstRun"];
} 
```

然后我在 AppDelegate 中设置

```
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex {
    if (buttonIndex == 0)       {   
        NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
        NSString *nope = @"Audio";
        [defaults setObject:nope forKey:@"videosermons"];
        [defaults synchronize];

    }
    if (buttonIndex == 1)        {
        NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
        NSString *yup = @"Video";
        [defaults setObject:yup forKey:@"videosermons"];
        [defaults synchronize];        }

    } 
```

在用于布道的导航控制器的根视图（这是布道的音频列表）上，我在 viewWillAppear 中设置了这个：

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

NSString *currently = [defaults objectForKey:@"videosermons"];
if ([currently isEqualToString:@"Video"]) {
    self.videoView = [[[VideoPodcastTableView alloc] initWithNibName:@"VideoPodcastTableView" bundle:[NSBundle mainBundle]] autorelease];

    [self.navigationController pushViewController:_videoView animated:NO];    }
if ([currently isEqualToString:@"Audio"]) {
} 
```

我还设置了一个带有segmentControl 的设置选项卡以反映已选择的内容。这是问题：

如果我在 firstRun 弹出窗口中单击视频，然后直接进入讲道选项卡，它会停留在音频讲道上。然后我可以导航到“设置”选项卡，它将显示已选择的视频。现在，无需选择任何内容，我可以再次进入讲道选项卡，它现在将进入视频讲道。为什么直到我进入设置后才收到更改消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T02:49:11.473

问题是您在`UIAlertView` `clickedButtonAtIndex:`调用选择器之前已经加载了根视图。`UIAlertView`在您的 AppDelegate 中启动后，您的应用程序会继续在后台加载您的根视图。

`viewWillAppear``UIAlertView`将在选择选项时已经运行。

为了解决这个问题，我建议您使用另一个根视图作为您的初始视图。如果您正在使用情节提要，请让一个 segue 进入启动警报视图的视图控制器，另一个 segue 进入您的标签页。首次启动时，转到警报视图页面，否则转到标签页。这样，您`NSUserDefaults` `@"videosermons"`可以在加载选项卡视图之前设置您的密钥。

# javascript - 事件调用和范围问题

> ID：11173791
> 
> 赞同：0
> 
> 时间：2012-06-23T23:22:50.787
> 
> 标签：javascript, scope, dom-events, raphael

我正在尝试使用 Raphael 创建一个简单的播放/暂停按钮系统，但我一直遇到范围问题。

多亏了 Raphael，按钮本身只是嵌入在 SVG 标签中的图像。目标是拥有这个“事件循环”：

*   如果显示 play.png，`onmouseover` `remove()`play.png 并显示 play-hover.png
*   如果显示 play-hover.png，`onclick` `remove()`play-hover.png 显示 pause.png
*   如果显示 pause.png，则`onmouseover` `remove()`pause.png 显示 pause-hover.png
*   如果显示 pause-hover.png，则`onclick` `remove()`pause-hover.png 显示 play.png

这看起来真的很愚蠢，但我真的有范围和闭包的问题。这是我目前的代码：

```
 function toPlay(pauseHover) {
    pauseHover.remove();
    var play = paper.image("images/play.png", Img.X, Img.Y, Img.height, Img.width);
    play.node.onmouseover = toPlayHover(play);
  }

  function toPause(playHover) {
    playHover.remove();
    var pause = paper.image("images/pause.png", Img.X, Img.Y, Img.height, Img.width);
    pause.node.onmouseover = toPauseHover(pause);
  }

  function toPlayHover(play) {
    play.remove();
    var playHover = paper.image("images/play-hover.png", Img.X, Img.Y, Img.height, Img.width);
    playHover.node.onclick = toPause(playHover);
  }

  function toPauseHover(pause) {
    pause.remove();
    var pauseHover = paper.image("images/pause-hover.png", Img.X, Img.Y, Img.height, Img.width);
    pauseHover.node.onclick = toPlay(pauseHover);
  }

  var play = paper.image("images/play.png", Img.X, Img.Y, Img.height, Img.width);
  toPlayHover(play); 
```

我不知道为什么这不起作用，因为 firebug 在控制台中没有给我任何错误，但我认为这是因为`toPlayHover()`无法在函数中调用该`toPlay()`函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T00:05:39.813

这是因为您立即调用每个函数，而不是将其注册为回调。要解决此问题，请将每个回调包装在匿名函数中，如下所示：

```
play.node.onmouseover = function() { toPlayHover(play); }; 
```

# java - 出一个java程序

> ID：11173792
> 
> 赞同：0
> 
> 时间：2012-06-23T23:23:00.773
> 
> 标签：java

Java新手在这里，我试图找到以下代码块的输出：我知道我缺少Java的一些基础知识，但如果有人可以指导我，我将不胜感激。

```
public class Test4 {
    public static void main(String[] args) {
        C c = new C(1, 2); // creates an obj c with arguments
        D d = (D) c; // creates class obj 'D' and casts 'c' to D?
        System.out.println(d.getP());
        System.out.println(d.getProd());
    }
}

public class C {
    protected int m;
    protected int n;
    protected static int kappa = 0;

    public C(int m1) {
        this.m = m1;
        this.n = m1;
        kappa = kappa + 2;
    }

    public C(int m1, int n1) {
        this.m = m1;
        this.n = n1;
        kappa = kappa + 2;
    }

    public int getSum() {
        return m + n;
    }

    public int getProd() {
        return m * n;
    }

    public static int getKappa() {
        return kappa;
    }
}

public class D extends C {
    private int p;

    public D(int p1) {
        super(p1);
        this.p = p1;
    }

    public D(int k1, int n1, int p1) {
        super(k1, n1);
        p = p1;
    }

    public int getP() {
        return p;
    }

    public int getSum() {
        return m + n + p;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T23:28:17.543

您的 D 类扩展了 C，因此您可以使用 D 作为 C ( `C c = new D();`) 的类型，但不能使用 C 作为 D 的类型（这是错误的`D d = new C();`。

所以在你的代码中

```
C c = new C(1, 2); // creates an obj c with arguments
D d = (D) c; // <--this will generate ClassCastException 
```

# ubuntu - 如何在 xmonad + Ubuntu 上更改键盘布局

> ID：11173793
> 
> 赞同：1
> 
> 时间：2012-06-23T23:23:01.633
> 
> 标签：ubuntu, xmonad

我想在不使用 setxkbmap 的情况下配置系统。哪些配置文件负责设置 xkb？我试图更改文件的内容：/etc/keyboard，但什么也没发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T06:55:57.920

从[Ubuntu setxkbmap 手册页](http://manpages.ubuntu.com/manpages/hardy/man1/setxkbmap.1.html)，它是这样写的：

```
 An XKB keymap is constructed from a  number  of  components  which  are
   compiled  only  as needed.  The source for all of the components can be
   found in /usr/share/X11/xkb. 
```

# powershell - powershell 将 hastables 数组转换为 csv

> ID：11173795
> 
> 赞同：5
> 
> 时间：2012-06-23T23:23:33.537
> 
> 标签：powershell

已经完成谷歌搜索，但没有找到合适的答案

我有

```
 $a = @(
           @{"name"="a"; "value"="1"},
           @{"name"="b"; "value"="2"}
       )

    Foreach($x in $a){
          $obj = New-object psobject
          Foreach($key in $x.keys) {
                 $obj ¦ add-member -membertype NoteProperty -name $key -value $x[$key]
           }
           $obj ¦ export-cvs test.csv
     } 
```

我在驾驶室只得到最后一行。我想要所有的线条

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T13:12:55.627

确实，Export-Csv 不会附加（< v3），但我认为 ConvertTo-Csv 不会解决问题……最后，您将获得包含数组中每个对象重复标题的文件。我会建议两件事之一：

*   将 Export-Csv 移到 foreach {} 之外（但需要将其放在子表达式中，因为默认情况下无法通过管道传输它）
*   改用 Foreach-Object 并获得相同的结果

我还建议使用 New-Object PSObject -Property 参数而不是稍后添加成员：因为您使用哈希表作为基础，所以您已经完成了一半，请参阅附加的代码示例：

```
# Using $( foreach ($x in $a) {} ) | Export-Csv
$(Foreach($x in $a){
    New-object psobject -Property $x
}) | Export-Csv test.csv

# Using $a | Foreach-Object {} | Export-Csv
$a | ForEach-Object { 
    New-Object PSObject -Property $_ 
} | Export-Csv test.csv 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T01:55:39.510

您每次都在覆盖 csv 文件。尝试每次使用 convertTo-CSV（而不是 export-csv）并将其附加到文件中。

# php - 如何获取 cURL 请求返 回的 URL？

> ID：11173797
> 
> 赞同：0
> 
> 时间：2012-06-23T23:23:56.460
> 
> 标签：php, curl, deezer

试图了解 Deezer API。

当我访问时：

[http://connect.deezer.com/oauth/auth.php?app_id=MY_APP_ID&redirect_uri=http://mydomain.me&perms=basic_access](http://connect.deezer.com/oauth/auth.php?app_id=MY_APP_ID&redirect_uri=http://mydomain.me&perms=basic_access)

我最终在 [http://mydomain.me/?code=8b69a9a6137094814375bcd5aa9a6c02](http://mydomain.me/?code=8b69a9a6137094814375bcd5aa9a6c02)

我想`code`从响应中解析变量。我怎样才能用 cURL 做到这一点？

这是我尝试过的：

```
$url = 'http://connect.deezer.com/oauth/auth.php?app_id=MY_APP_ID&redirect_uri=http://mydomain.me&perms=basic_access';

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL,$url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
curl_setopt($ch, CURLOPT_HEADER, true);

$a = curl_exec($ch);
$a = curl_getinfo($ch, CURLINFO_EFFECTIVE_URL);

echo "<pre>"; 
var_dump($a); 
die(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T23:36:20.340

您的代码中有错误

这 2 行应该有 $ch 用于 curl 句柄

```
curl_setopt($c, CURLOPT_FOLLOWLOCATION, true);
curl_setopt($c, CURLOPT_HEADER, true); 
```

您发布的链接重定向到 deezer.com/soon.php。

# algorithm - 在词典中查找最接近一对的字符串

> ID：11173799
> 
> 赞同：1
> 
> 时间：2012-06-23T23:24:38.457
> 
> 标签：algorithm

我目前正在尝试通过以下公式提出一个有效的解决方案：

给定一个输入字符串 s 和一个固定的词典，找到一个字符串 w1||w2（|| 表示连接，w1 和 w2 是词典中的词）与 s 的最小编辑距离。

显而易见的幼稚解决方案是：

```
for word1 in lexicon:
   for word2 in lexicon:
       if lev_dist(word1 + word2) < lev_dist(lowest):
          lowest = word1 + word2 
```

我确信必须有更好的解决方案来解决这个问题。任何人都可以提供任何见解吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T05:36:42.200

通过对单个字符串的成本设置下限，您可能会做得更好。

查看[http://en.wikipedia.org/wiki/Levenshtein_distance](http://en.wikipedia.org/wiki/Levenshtein_distance)中的算法，当您关心计算 d[i, j] 的距离时，您知道您添加的贡献取决于 s[i] 和t[j]，其中 s 和 t 是要比较的字符串，因此您可以使更改/删除/插入的成本取决于操作在两个字符串中的位置。

这意味着您可以使用成本函数计算 abcXXX 和 abcdef 之间的距离，其中对标记为 XXX 的字符的操作是免费的。如果字符串 XXX 实际上是最有利的字符串，这允许您计算将 abcXXX 转换为 abcdef 的成本。

因此，对于词典中的每个单词 w1，计算 w1XXX 与目标字符串以及 XXXw1 与目标字符串之间的距离。生成词典的两个副本，按 w1XXX 距离和 XXXw1 距离排序。现在按照左手成本和右手成本之和的顺序尝试所有对，这是该对成本的下限。跟踪迄今为止的最佳答案。当最佳答案至少与您遇到的下一个下限成本一样好时，您知道您可以尝试的任何事情都无法改进这个最佳答案，因此您可以停下来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T14:28:54.480

如果您在同一个词典上运行大量查询并希望缩短查询时间，但可以花一些时间进行预处理，您可以创建一个包含 w1 || 形式的所有可能单词的 trie。w2。然后你可以使用这里描述的算法：[使用 Trie 的快速和简单的 Levenshtein 距离](http://stevehanov.ca/blog/index.php?id=114%20Fast%20and%20Easy%20Levenshtein%20distance%20using%20a%20Trie)来找到你需要的任何单词的答案。

该算法所做的基本上是遍历树的节点并跟踪当前的最小值。然后，如果您最终到达某个节点并且 Levenshtein 距离（从根到当前节点和输入字符串 s 的单词）已经大于迄今为止达到的最小值，您可以修剪以该节点为根的整个子树，因为它无法给出答案。

在我使用英语单词词典和随机查询词进行的测试中，这比测试词典中每个单词的正常方法快 30 到 300 倍，具体取决于您在其上运行的查询类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T08:04:48.583

我假设您想为同一个词典多次执行此操作。例如，您有一个拼写错误的单词并怀疑这是由于它们之间缺少空格造成的。

您肯定需要的第一件事是估计字符串“接近度”的方法。我喜欢标准化技术。例如，将每个字母替换为等价类的代表。（也许 M 和 N 都去 M 因为它们听起来很相似。也许 PH --> F 出于类似的原因。）

现在，您需要将规范化的词典前后输入到 trie 或类似结构中。

现在，向前和向后搜索您的针，但要跟踪两个方向的中间结果。换句话说，在搜索字符串的每个位置，跟踪已在该位置选择的候选树节点列表。

现在，比较中间结果的前向和后向数组，寻找看起来像是单词之间良好连接点的地方。您也可以逐个检查连接点。（换句话说，您已经找到了第一个单词的结尾和第二个单词的开头。）

如果你这样做了，那么你已经找到了你的单词对。

# wordpress - 默认 DOCTYPE 中断表 - 用于默认 Wordpress 主题

> ID：11173800
> 
> 赞同：0
> 
> 时间：2012-06-23T23:24:49.043
> 
> 标签：wordpress, plugins, doctype

我正在尝试为 WordPress 制作一个插件。

它工作得很好，除非我加载默认的 WordPress 主题。例如“二十一点”。

这个主题有一个 DOCTYPE，如下所示。因此，无论我做什么，当我将图像放入表格时，它总是会插入这个烦人的 GAP。

**请帮忙！我如何摆脱这个差距？**

下面是一些代码。每当将表放置在 DOCTYPE 被定义为此处的情况下，我就会得到这个差距。

WordPress 默认主题似乎使用此 DOCTYPE 声明。所以他们破坏了我漂亮的插件......

```
<!DOCTYPE html>

<body>

<table border="1" style="border-collapse: collapse;">
    <tr>
        <td width="100%">
            <img border="0" src="http://goo.gl/PJdRU">
        </td>
    </tr>
</table>

</body>

</html> 
```

所有浏览器都呈现上述代码，如下所示。我只想消除差距！谢谢！

![在此处输入图像描述](../Images/ec242f24ec8bb5ad3feadc846de81648.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T23:33:36.297

有几种解决方案，但都不是完美的。我想最简单的方法就是改变你的 img 样式 - 在 CSS 中（使用`td img { display: block }`规则）或只是一个内联样式，如下所示：

```
<img style="display:block" border="0" src="http://goo.gl/PJdRU"> 
```

这是[一篇文章](https://developer.mozilla.org/en/Images,_Tables,_and_Mysterious_Gaps)，其中解释了为什么你会看到你所看到的 - 以及修复它的几种可能的方法。) 这里有一个可以使用的[JSFiddle](http://jsfiddle.net/2V2QT/)。

# android - 如何在关系数据库中建模唯一集（sqlite）

> ID：11173802
> 
> 赞同：1
> 
> 时间：2012-06-23T23:25:13.707
> 
> 标签：android, database, sqlite, set

我正在开发一个 android 应用程序（因此必须使用 sqlite），并且我一直在寻找一种`HashSet`在关系数据库中对 Java Set（即）建模的好方法。最初，我认为这将是两个具有多对多关系的表：

```
table name: sets
    _id integer (PK)

table name: fruits
    _id integer (PK)
    name varchar (unique, so alternate key)

table name: fruit_sets
    set_id (FK)    // combination key to prevent
    fruit_id (FK)  // duplicate fruits in each set 
```

所以在这个数据库模型中，我很确定它可以支持如下关系：

```
[ apple, orange, pear ] != [ apple, orange, grape, pear ] 
```

但，

```
[ apple, orange, pear ] == [ pear, apple, orange ] 
```

所以，如果我在数据库中有：

```
set 1 = [ apple, orange ]
set 2 = [ orange, pear, apple ]
set 3 = [ grape, pear ]
set 4 = [ grape, orange, apple, cherry ] 
```

`select`当我在 Java 中获得一个 set 时，我正在努力寻找一个 set_id 的好方法。因此，例如，如果我在 Java 中有 HashSet: `[ apple, orange, pear ]`，我将如何构造`select`查询 a `set_id`？

应该返回`set_id`：2

...或者有没有一种不同的更好的方法来模拟这种关系？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T23:37:20.383

这只是概念，但我认为这个想法很清楚

```
SELECT DISTINCT set_id FROM fruit_sets
WHERE set_id IN (
SELECT DISTINCT set_id FROM fruit_sets WHERE fruit_id = (SELECT _id FROM fruits WHERE name = myHashSet.size().iterator().next)
INTERSECT
SELECT DISTINCT set_id FROM fruit_sets WHERE fruit_id = (SELECT _id FROM fruits WHERE name = myHashSet.size().iterator().next)
INTERSECT
SELECT DISTINCT set_id FROM fruit_sets WHERE fruit_id = (SELECT _id FROM fruits WHERE name = myHashSet.size().iterator().next)
)
GROUP BY set_id HAVING COUNT(*) = myHashSet.size() 
```

# php - MCRYPT_DEV_RANDOM 冻结，但 MCRYPT_DEV_URANDOM 有效

> ID：11173803
> 
> 赞同：8
> 
> 时间：2012-06-23T23:25:22.903
> 
> 标签：php, mcrypt

我正在尝试使用以下功能创建 IV：

```
mcrypt_create_iv(32, MCRYPT_DEV_RANDOM) 
```

这会导致脚本在超过 60 秒后超时。（也许更多？）但是当我使用 时`URANDOM`，它几乎可以立即正常工作。从我读到的内容来看，它应该需要大约 4 秒`MCRYPT_DEV_RANDOM`，但肯定需要太长时间。错误日志中没有任何内容。

我在 ubuntu 12.04 服务器上安装了 apache2 和 php5。

我在我的 centos 服务器上运行了完全相同的代码，没有任何问题。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-23T23:35:55.220

RANDOM 和 Unblocking-RANDOM (URANDOM) 都会为您提供随机数据，但是如果“熵井”由于过度使用而变干，RANDOM 会阻塞，并在补充后重新启动，但 URANDOM 不会。

优点：URANDOM 不会阻塞。缺点：如果没有熵，URANDOM 会为您提供并非真正随机的数据。

出于加密目的，除非你真的很偏执，否则我认为 URANDOM 就足够了。

请参阅此 Ubuntu 页面： http: [//manpages.ubuntu.com/manpages/jaunty/man4/random.4.html](http://manpages.ubuntu.com/manpages/jaunty/man4/random.4.html)

我（错误地）认为 RANDOM 源是用户可控制的，但似乎并非如此。显然，那台计算机上没有发生任何事情，因此内核熵生成器没有什么可研究的。

从好的方面来说，据说 URANDOM 生成器非常好，推荐用于几乎所有东西。

（我正在编辑我以前的一些对你不起作用的建议，因为它们至少需要重新编译 PHP）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-18T22:26:01.177

实际上 /dev/random 和 /dev/urandom 都给你同样的随机性和安全性。/dev/random 的神话是如何阻塞的以及为什么要使用它，这是一个很长的故事。寻找，“随机/随机的神话”

# html - 浮动 div - 填充可用宽度

> ID：11173805
> 
> 赞同：0
> 
> 时间：2012-06-23T23:25:29.020
> 
> 标签：html, css-float, width

我必须让 div 浮动，一个在左边，另一个在右边。我想要做的（没有 js）是正确的 div 填充可用空间（宽度：100%）。问题是，左边的 div 有一个动态宽度，否则我可以简单地使用 margin-left。我也试过 display: table-cell; 但这不允许我使用边距，只能使用边框间距。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T23:49:23.387

您可能可以这样做，在 IE8 和更好的 FF 中，在 Safari 中工作。您可以使用填充而不是边距，如下例所示：

```
<style>
    .c_0 {
        display:        table;
        width:          100%;
        border:         4px solid orange;
    }

    .c_1 {
        display:        table-cell;
        width:          20%;
        border:         1px solid red;
        padding-right:  20px;
    }

    .c_2 {
        display:        table-cell;
        border:         1px solid blue;
    }
</style>

<div class="c_0">
    <div class="c_1">
        has a width and padding instead of margin
    </div>
    <div class="c_2">
        has the rest
    </div>
</div> 
```

**编辑**

这仅适用于第一行的**“%” 。**我看到它太晚了，你想要像素。

# objective-c - ARC 内存泄漏？

> ID：11173808
> 
> 赞同：1
> 
> 时间：2012-06-23T23:26:29.860
> 
> 标签：objective-c, automatic-ref-counting

我是 Objective C 的新手，我已经在 Stack Overflow 和 Apple 的网站上阅读了一些关于自动引用计数的文档，但我仍然无法弄清楚为什么“Leaks”告诉我我的代码正在泄漏内存。需要注意的是，所有这些代码都在后台线程上运行，该线程由`NSOperationQueue`.

例如，我有这样的事情：

```
NSArray *times = <receives an array of NSStrings>;
NSArray *codes = <receives an array of NSStrings>;
// these two arrays are == in length

NSMutableArray *fingerprint = [NSMutableArray array];
for (int x = 0; x < [times count]; x++) {
    long numToAdd = strtol([[codes objectAtIndex:x] cStringUsingEncoding:NSUTF8Encoding], NULL, 16);
    [fingerprint addObject:[NSNumber numberWithLong:numToAdd]];
    numToAdd = strtol([[times objectAtIndex:x] cStringUsingEncoding:NSUTF8Encoding], NULL, 16);
    [fingerprint addObject:[NSNumber numberWithLong:numToAdd]];
} 
```

泄漏声称分配数组的行存在泄漏，以及*第一个*对象添加的泄漏，但不是第二个。我不知道为什么会存在这些泄漏。任何帮助表示赞赏。

如果需要更多代码，请发表评论，我很乐意提供。

# java - 弱哈希映射如何知道垃圾收集对象？

> ID：11173814
> 
> 赞同：15
> 
> 时间：2012-06-23T23:27:55.283
> 
> 标签：java, data-structures, garbage-collection, weakhashmap

我最近发现了[`WeakHashMap`](http://docs.oracle.com/javase/6/docs/api/java/util/WeakHashMap.html)Java 中的数据结构。

但是，我不明白当映射不再正常使用时垃圾收集映射是什么意思。数据结构如何知道我将不再在程序中使用密钥？如果我长时间不参考密钥怎么办？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-24T00:19:22.577

> 但是，我不明白当映射不再正常使用时垃圾收集映射是什么意思。

好的。在正常情况下，当垃圾收集器运行时，它会移除你的程序不能再使用的对象。技术术语是“无法访问的对象”，它意味着程序执行无法再获取对该对象的引用。一个无法访问的对象，*可能会*在下一个 GC 周期中被收集……也可能不会。无论哪种方式，它都不再是应用程序的关注点。

在这种情况下，`WeakHashMap`使用一个特殊的类`WeakReference`来引用键¹。弱引用是一个对象，其行为有点像间接指针（指向持有指针的对象的指针）。它有一个有趣的特性，即允许垃圾收集器*破坏*引用；即用 . 替换它包含的引用`null`。规则是，当 GC 注意到对象不再可以通过正常（强）或软引用链²到达时，对对象的弱引用*将*被破坏。

短语*“不再正常使用”*实际上意味着关键对象不再是强或软可达的；即通过一系列强和/或软引用。

> 数据结构如何知道我将不再在程序中使用密钥？

`WeakHashmap`不这样做。相反，是 GC 注意到密钥不是强可达的。

作为其正常遍历的一部分，GC 将找到并标记所有强可达对象。然后它遍历所有`WeakReference`对象并检查它们所引用的对象是否已被标记，如果没有，则断开它们。`SoftReference`（或者类似的东西......我从来没有看过实际的 GC 实现。而且它还必须处理`PhantomReference`对象，这使得它变得复杂。）

唯一的参与`WeakHashmap`是：

*   它创建并使用`WeakReference`对象作为键，并且
*   `WeakReferences`它会删除GC 已清除其密钥的哈希表条目。

> 如果我长时间不参考密钥怎么办？

决定弱引用应该被打破的标准不是基于时间的。

但是时间可能会影响是否删除密钥。例如，一个键可以 1）不再是强引用，2）从映射中检索，3）分配给一个可达变量，使其再次被强引用。如果 GC 在 key 不可强可达的窗口期间没有运行，则 key 及其关联的 value 将保留在 map 中。（这就是你想要发生的事情......）

* * *

^(1 - 实现细节：在最近的 Java 版本中，弱引用实际上是指映射的内部`Entry`对象而不是键。这允许更有效地从地图中清除损坏的引用。查看代码了解详情。
2 - 软引用是一种在堆内存不足的情况下允许 GC 中断的引用。)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-24T00:02:50.250

JVM 垃圾按以下顺序收集：

1.  未引用的对象
2.  唯一引用是 a 的对象[`WeakReference`](http://docs.oracle.com/javase/6/docs/api/java/lang/ref/WeakReference.html)
3.  唯一引用是 a 的对象[`SoftReference`](http://docs.oracle.com/javase/6/docs/api/java/lang/ref/SoftReference.html)

通常，垃圾收集器只对未引用的对象进行垃圾收集。

就垃圾收集器而言，对对象的弱引用不算作引用。垃圾收集器可能会也可能不会收集它们。通常，除非内存不足，否则它不会收集它们，但不能保证。

如果 JVM 即将耗尽内存，垃圾收集器将收集软引用对象。在任何软引用对象被垃圾收集*之前，*所有弱引用对象都将被垃圾收集。

来自 SoftReference 的 javadoc：

> 所有对软可访问对象的软引用都保证在虚拟机抛出一个`OutOfMemoryError`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-23T23:29:55.610

Java 有一个*[引用](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/ref/package-summary.html)*系统，该语言可以告诉您的代码某个对象是否仍在使用中。您可以使用引用来检测某些对象何时被明确标识为不再使用或不可用，然后可以采取相应的措施。 [本教程](http://www.kdgregory.com/index.php?page=java.refobj)深入介绍了参考资料，以防您对如何使用它们感到好奇。

在内部，`WeakHashMap`可能会使用这些引用来自动检测何时不能再使用给定的密钥。然后，实现可以从哈希表中删除这些对象，以便它们不再占用任何空间。

希望这可以帮助！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-24T00:10:54.420

我读到您的问题是询问“常规使用”的具体措辞，因此假设您已经了解强引用和弱引用。常规使用是指弱哈希映射包含的键也被其他一些数据结构（强）引用的情况。至少存在一个对密钥的强引用是“常规使用”。只要这个其他数据结构引用它，就不能对密钥进行垃圾收集。当另一个数据结构不再可达（指向它的指针不再存在）时，键也变得不可达。它不再经常使用，因为对它的唯一引用是映射中的弱引用。垃圾收集器最终可以回收它，并且映射消失了。

当您想通过子类化但不能扩展类型 C 时，就会出现这种情况：例如，当 C 是具有许多实现的接口时。您可以通过使用键类型为 C 的弱哈希映射以及要添加的新字段包装在新类 E 中来解决此问题。每当您创建一个 C 实例时，您还创建一个 E 实例并将该对添加到映射中，这然后用于在 C 实例的生命周期内访问新字段。当 C 实例变成垃圾时，映射和 E 实例也一样。这是自动的，因为 hashmap 很弱。如果不是，则必须以与在没有垃圾收集器的语言中显式释放存储相同的方式手动清理它。

# c# - 比较 2 个 16x16 像素图像的相似度

> ID：11173816
> 
> 赞同：2
> 
> 时间：2012-06-23T23:28:01.203
> 
> 标签：c#, image-processing, comparison, pixel, similarity

我想将 2 幅图像的相似度与百分比进行比较。我想检测 90% 相同的图像。每个图像大小为 16x16 像素。我需要一些线索，帮助它。现在，与下面的代码进行比较时，我能够检测到 100% 相同的图像

```
for (; x < irMainX; x++)
{

    for (; y < irMainY; y++)
    {
        Color pixelColor = image.GetPixel(x, y);
        if (pixelColor.A.ToString() != srClickedArray[x % 16, y % 16, 0])
        {
            blSame = false;
            y = 16;
            break;
        }
        if (pixelColor.R.ToString() != srClickedArray[x % 16, y % 16, 1])
        {
            blSame = false;
            y = 16;
            break;
        }
        if (pixelColor.G.ToString() != srClickedArray[x % 16, y % 16, 2])
        {
            blSame = false;
            y = 16;
            break;
        }
        if (pixelColor.B.ToString() != srClickedArray[x % 16, y % 16, 3])
        {
            blSame = false;
            y = 16;
            break;
        }
    }

    y = y - 16;

    if (blSame == false)
        break;
} 
```

例如，我想将这 2 个图像识别为相同的。目前该软件将它们识别为不同的图像，因为它们并不完全相同

![在此处输入图像描述](../Images/a4c759f71adda03e10dd62a517f85297.png) ![在此处输入图像描述](../Images/b22cb6448ff4e3b52166a82f6cc0b852.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T02:50:02.127

我不会使用 image.GetPixel(x,y)，因为它比使用不安全代码检查与每个图像关联的特定字节要慢得多。

查看[锁位](https://web.archive.org/web/20141229164101/http://bobpowell.net/lockingbits.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T23:38:16.680

对不匹配的像素数使用计数：

```
public const double PERCENT_MATCH = 0.9;

int noMatchCount = 0;
for (int x = 0; x < irMainX; x++)
{
    for (int y = 0; y < irMainY; y++)
    {
       if ( !pixelsMatch( image.GetPixel(x,y), srClickedArray[x%16, y%16] )
       {
           noMatchCount++;
           if ( noMatchCount > ( 16 * 16 * ( 1.0 - PERCENT_MATCH ))
              goto matchFailed;
       }
    }
}
Console.WriteLine("images are >=90% identical");
return;
matchFailed:
Console.WriteLine("image are <90% identical"); 
```

您可以计算匹配像素，但这会更慢。考虑测量两个像素相差多少。对于大多数目的 - 您可以让所有像素不完全匹配 - 但让图像看起来在视觉上相同

# java - 在Java中初始化编译时已知的静态类变量

> ID：11173822
> 
> 赞同：1
> 
> 时间：2012-06-23T23:28:58.807
> 
> 标签：java, class, reflection

我想在 Java 中初始化一个静态类变量：

```
public class NumberExpression {
    private static Class numberClass = Class.forName("java.lang.Number");
}; 
```

上面的代码段不起作用，因为`Class.forName`抛出了`ClassNotFoundException`. 像这样的东西`new Integer().getClass()`不起作用，因为`Number`它是一个抽象类。

我想我可以`Class.forName`围绕一个处理`ClassNotFoundException`.

编辑：

（“数字”类更改为“java.lang.Number”）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-23T23:33:04.180

它不起作用，因为该类`Number`不存在。你的意思是`java.lang.Number`。

您可以尝试以下方法：

```
public class NumberExpression {
    private static Class numberClass;
    static {
        try {
            numberClass = Class.forName("java.lang.Number");
        } catch (ClassNotFoundException e) {
            e.printStackTrace();
        }
    }
}; 
```

但这仅在您尝试加载的类是动态的时才有意义，否则您可以使用它自己的类（即`Number.class`）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-23T23:40:01.973

你为什么不这样做：

```
private Class numberClass = Number.class; 
```

# html - 使用 CSS 向上“浮动”图像

> ID：11173827
> 
> 赞同：3
> 
> 时间：2012-06-23T23:29:29.813
> 
> 标签：html, css, image, pinterest

我正在尝试为我的作品集制作一个类似 Pinterest 的画廊。没什么太花哨的，只是显示一些简单的 PHP 在文件夹中找到的图像。稍后我会附上一个灯箱（或类似的东西）。

目前，我无法让图像相对于其他图片向上“浮动”。以某种神奇的方式，右上角的两个图像可以做到这一点，而其他的则没有。 ![在此处输入图像描述](../Images/eef116438d3e86399a758146b14fd3f4.png)

[你可以在这里](http://rvervuurt.com/upload/)看到它。这是一个[JSFiddle](http://jsfiddle.net/%5C)，但它不显示图像。

有什么简单的方法吗？还是我真的需要为此开始使用某种 jQuery 插件？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-24T08:54:46.487

`column-count`假设您至少有一个包含元素，您可以使用 CSS3 执行此操作。此方法的优点是只需添加一个类即可轻松更改布局（例如，对于移动设备）。

输出：

![在此处输入图像描述](../Images/74975c616ec75ae36623e63450d44db9.png)

演示：http: [//jsfiddle.net/ThinkingStiff/rS95S/](http://jsfiddle.net/ThinkingStiff/rS95S/)

CSS：

```
#container {
    column-count: 3;
    column-fill: balance;
    column-gap: 10px;
    width: 330px;
}

.image { 
    display: block;
    margin-bottom: 10px;
    width: 100px;
} 
```

HTML：

```
<div id="container">
<img class="image" src="http://farm1.staticflickr.com/205/494701000_744cc3a83a_z.jpg" />
<img class="image" src="http://farm5.staticflickr.com/4028/4287569889_f6a4fca31b_z.jpg" />
<img class="image" src="http://farm3.staticflickr.com/2340/2421926504_d8509d0a98_z.jpg" />
<img class="image" src="http://farm1.staticflickr.com/197/503792921_fedf8ba47e_z.jpg" />
<img class="image" src="http://farm2.staticflickr.com/1153/741035029_f394e11a1f_z.jpg" />
<img class="image" src="http://farm7.staticflickr.com/6213/6243090894_8b8dd862cd_z.jpg" />
<img class="image" src="http://farm2.staticflickr.com/1339/1157653249_dbcc93c158_z.jpg?zz=1" />
<img class="image" src="http://farm3.staticflickr.com/2570/4220856234_029e5b8348_z.jpg?zz=1" />
</div> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-23T23:32:00.210

[http://masonry.desandro.com/](http://masonry.desandro.com/)

Masonry 是一个很好的网格排列 JQuery 插件。可能是那里最好的之一。

我个人没有使用它，但是我的朋友有很好的结果说：

*   它是可定制的
*   它的功能非常轻巧
*   它很快

不幸的是，它并不是已知宇宙中最快的东西，因为它使用 JQuery（它已经是一个相对较慢的库，或作为它开始使用的框架）并将 CPU 密集型计算放在首位。因此，它不如 CSS hack 快，但 Masonry 是否是最佳选择取决于您需要它的确切用途，而这个问题中没有提到。

如果您正在构建一个简单的投资组合类型的东西，那么 CSS hack 是最好的方法，但如果您构建的东西更进一步，那么这可能是您正在寻找的方法。

不幸的是，由于跨浏览器（如 IE）的标准不完整，您会发现在没有大量资源放置客户端（例如调整可能已在服务器端裁剪的非常大图像的图像大小）的情况下生成此布局很困难。

ov 和 ThinkingStiff 确实有答案，如果您要将进入您网站的每张图片标准调整为特定大小并使用可用于布局的缓存方法，您可以轻松地通过 CSS hack 来处理简单的事情，例如照片页面或文件夹。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-24T00:16:11.520

来自 Sammaye 的答案的[jQuery Masonry](http://masonry.desandro.com/)*会*起作用 - 诀窍是在内容以原始顺序附加到 DOM 之前让它工作（这在 ajax 网站上是相当微不足道的）

**然而，Masonry 插件过度**使用的原因之一- 它是可变的内容宽度。无论是在[pinterest](http://pinterest.com/)上还是在投资组合模型中都不需要这样做 - 同时您最终会在客户端处理开销，并且会出现错误定位的内容。

在这种情况下，仅使用容器`<div>`列就足够了：

```
.column {width:33.3%;float:left;/*should be clearfix instead*/}
.column .content {width:95%;margin:2.5%;float:left;}​ 
```

然后可以将内容应用于服务器端的正确列（获取图像高度和宽度是微不足道的，只需平衡它的动态程度）或在附加内容之前在客户端 w/ajax

[摆弄](http://jsfiddle.net/ovfiddle/uj4ku/)

# php - PHP MYSQL SELECT 查询挂在 WHERE 子句中的负值或语法上

> ID：11173829
> 
> 赞同：0
> 
> 时间：2012-06-23T23:29:56.303
> 
> 标签：php, mysql, syntax-error, where-clause, reserved-words

我有一个问题一直让我发疯。我有将坐标传递给查询函数的代码。该查询适用于纬度见下文，但不适用于经度。我对两者都有一个复杂的 WHERE 子句，但为了排除故障，我转移到了单独的 WHERE 子句。下面的代码显示了被注释掉的纬度。如果我取消注释，纬度将按预期工作。参考数据库中的所有值都是双精度值，经度为负值，纬度值为正值。我一直在寻找不正确的语法，但找不到它。我什至有要传递的四舍五入的变量、双重检查的列名、反向运算符等等。这两个 WHERE 分别是相同的；并且经度变量根据给出的错误反馈干净地传递。那么，沃尔多在哪里？谢谢你！

错误：

> 数据库查询失败：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 'long>=-93.497315 AND long<=-91.365967' 附近使用正确的语法

调用函数：

```
$box=$_GET["rect"];
$box=ltrim($box,"((");
$box=rtrim($box,"))");
$boxArray = explode("), (",$box);
$sw = explode(", ",$boxArray[0]);
$ne = explode(", ",$boxArray[1]);
$swLat = round($sw[0], 6);
$swLong = round($sw[1], 6);
$neLat = round($ne[0], 6);
$neLong = round($ne[1], 6);
$job_set = get_job_by_Rectangle($swLat, $swLong, $neLat, $neLong);

while ($job = mysql_fetch_array($job_set)) {
            echo $job["projectFK"] . ", ";} 
```

问题功能：

```
function get_job_by_Rectangle($swLat, $swLong, $neLat, $neLong) {
global $connection;
$query = "SELECT * ";
$query .= "FROM projcoords ";
//$query .= "WHERE lat>= " . $swLat . " AND lat<= " . $neLat . " " ;
$query .= " WHERE long>=" . $swLong . " AND long<=" . $neLong . " " ;
//$query .= " ORDER BY projectFK";
$result_set = mysql_query($query, $connection);
confirm_query($result_set);

    return $result_set;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T23:32:47.533

`LONG`是MySQL 中的[保留字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)。

所以你需要用反引号引用列名：

```
$query .= " WHERE `long`>=" . $swLong . " AND `long`<=" . $neLong . " " ; 
```

# validation - CakePHP 2.1 - 自定义验证规则 - 检查唯一字段值组合

> ID：11173835
> 
> 赞同：3
> 
> 时间：2012-06-23T23:30:44.867
> 
> 标签：validation, cakephp, unique, cakephp-2.0, customvalidator

我有几列（ip、provider_id），我希望值的组合始终是唯一的。因此，我正在尝试构建一个自定义验证功能。但是我在获取辅助字段的值时遇到了问题。到目前为止，这是我在模型中的代码：

```
public $validate = array(
   'ip' => array(
      'rule' => array('uniqueClick', 'provider_id'),
      'message' => 'The click is not unique.'
    )
);  

public function uniqueClick ($ip, $field) {

   $count = $this->find('count', array('conditions' => array('ip' => $ip, 'provider_id' => $field)));
   // echo $field;
   return $count == 0;

} 
```

所以问题是，当我测试将什么值加载到 $field 中时，它只是“provider_id”，一个字符串。我希望它包含“provider_id”字段的值。有谁知道如何获取该值（以及所有其他辅助模型字段值，如有必要）并将其发送到自定义验证功能？

我在 CookBook 中的阅读和讨论过类似问题的人似乎表明这种解决方案可行，但不幸的是对我来说不是。

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T00:00:59.630

蛋糕的行为肯定是它应该在那里的方式。您在该“规则”数组中传递的第二个参数旨在作为静态值传递。

但是，您的 provider_id 应该在 $this->data['MyModel']['provider_id'] 中可用

因此，您应该能够完全忘记第二个参数，并执行以下操作：

```
public function uniqueClick ($ip) {

   $count = $this->find('count', array(
      'conditions' => array(
          'ip' => $ip, 
          'provider_id' => $this->data[$this->alias]['provider_id'])
   ));
   return $count == 0;

} 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T04:58:33.050

为了补充 Joshua 的回答，验证数组应该这样构建：

```
// Validation rules
public $validate = array(
   'ip' => array(
      'rule' => array('uniqueClick', 'ip'),
      'message' => 'The click is not unique.'
    )
);  
/** 
 * Checks if there are records on the datasource with the same ip and same provider_id
 * 
 */ 
public function uniqueClick ($ip) {
   $count = $this->find('count', array(
      'conditions' => array(
          'ip' => $ip, 
          'provider_id' => $this->data[$this->alias]['provider_id'])
   ));
   return $count == 0;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T06:17:16.313

你也可以使用我的规则来处理你需要的多个字段

尝试[http://www.dereuromark.de/2011/10/07/maximum-power-for-your-validation-rules/](http://www.dereuromark.de/2011/10/07/maximum-power-for-your-validation-rules/) 和 [https://github.com/dereuromark/tools/blob/master/Model/MyModel。 php#L930](https://github.com/dereuromark/tools/blob/master/Model/MyModel.php#L930)

所以基本上和你尝试的一样：

```
'ip' => array(
    'validateUnique' => array(
        'rule' => array('validateUnique', array('provider_id')),
        'message' => 'You already have an entry',
    ),
), 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-03T09:19:04.060

您可以直接使用此解决方案，而无需在验证规则中传递任何内容，除了自定义唯一函数。

```
// Validation rules
public $validate = array(
    'ip' => array(
        'rule' => array('uniqueClick'),
       'message' => 'The click is not unique.'
    )
);  
/** 
 * Checks if there are records on the datasource with the same ip and same provider_id
 * 
 */ 
public function uniqueClick ($ip) {
   $count = $this->find('count', array(
      'conditions' => array(
          'ip' => $ip, 
          'provider_id' => $this->data[$this->alias]['provider_id'])
   ));
   return $count == 0;

} 
```

$this->data[$this->alias]['provider_id'] 自动获取provider_id的值。

# scala - 如何使用 JavaCV 创建 HSV 直方图

> ID：11173836
> 
> 赞同：3
> 
> 时间：2012-06-23T23:31:09.167
> 
> 标签：scala, opencv, histogram, javacv

我是 JavaCV 的新手，想从图像创建直方图。

我试图将一些 C++ 代码翻译成 Java，但 JavaCV 没有像`cvCVtPixToPlane`.

有人可以帮我创建直方图吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T16:38:40.067

必须运行来自 OpenCV-Wiki 的翻译 OpenCV-Code。

我给你我的代码片段以从 h 通道创建一维图：

```
private CvHistogram getHueHistogram(IplImage image){
    if(image==null || image.nChannels()<3) new Exception("Error!");
    IplImage hsvImage= cvCreateImage(image.cvSize(), image.depth(), 3);
    cvCvtColor(image, hsvImage, CV_BGR2HSV);
    // Split the 3 channels into 3 images
    IplImageArray hsvChannels = splitChannels(hsvImage);
    //bins and value-range
    numberOfBins=255;
    float minRange= 0f;
    float maxRange= 180f;
    // Allocate histogram object
   int dims = 1;
   int[]sizes = new int[]{numberOfBins};
   int histType = CV_HIST_ARRAY;
   float[] minMax = new  float[]{minRange, maxRange};
   float[][] ranges = new float[][]{minMax};
    int uniform = 1;
    CvHistogram hist = cvCreateHist(dims, sizes, histType, ranges, uniform);
    // Compute histogram
    int accumulate = 1;
    IplImage mask = null;
    cvCalcHist(hsvChannels.position(0),hist, accumulate, null);
    return hist;
} 
```

还有我的 splitChannels-Method，我在这个片段中使用：

```
private IplImageArray splitChannels(IplImage hsvImage) {
    CvSize size = hsvImage.cvSize();
    int depth=hsvImage.depth();
    IplImage channel0 = cvCreateImage(size, depth, 1);
    IplImage channel1 = cvCreateImage(size, depth, 1);
    IplImage channel2 = cvCreateImage(size, depth, 1);
    cvSplit(hsvImage, channel0, channel1, channel2, null);
    return new IplImageArray(channel0, channel1, channel2);
} 
```

如果要从直方图中绘制图片，可以迭代 bin。使用 cvQueryHistValue_1D() 您可以从 bin_i 获取像素总和

# eclipse - Servlet 中的 JDBC 连接

> ID：11173841
> 
> 赞同：0
> 
> 时间：2012-06-23T23:32:39.700
> 
> 标签：eclipse, servlets, jdbc

我正在尝试连接到`MySQL`使用`JDBC`中的连接。我正在`Servlet`使用`Eclipse`并添加了`mysql-connector-java-5.1.20-bin.jar`/WEB_INF/lib 文件夹。

同样的 jar 也被添加到`Java Build Path`. 运行项目后，我收到以下错误

```
java.lang.ClassNotFoundException: com.mysql.jdbc.Driver
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1678) 
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1523)
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Class.java:186)
at com.shubh.Download.doGet(Download.java:42)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:621)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 
```

虽然我已经在类路径中添加了所需的 jar。为什么`ClassNotFoundException`还在生成？ [这](http://pastebin.com/rkCASnLF)是我的代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T05:18:11.247

通常，加入`.jar`应该`WEB-INF/lib`工作。`eclipse`足够聪明，可以识别`WEB-INF/lib`.

只是为了检查您可以查看`.classpath`文件以查看它是否包含类似的条目 `<classpathentry kind="lib" path="WebContent/WEB-INF/lib/mysql-connector-java-5.1.20-bin.jar"/>`

但是，建议不要麻烦`classpath`进入。从 Java 构建路径中删除所有不必要的引用，然后清理并再次构建应该可以工作。

# asp.net - 如何删除文本框的字符串/文本中的字符？

> ID：11173845
> 
> 赞同：0
> 
> 时间：2012-06-23T23:32:56.093
> 
> 标签：asp.net, textbox, substring

我有一个 asp.net 4 文本框控件，它的文本由一些 java 脚本动态填充。确切地说是谷歌地图调用。它给了我从一点到另一点的里程。当文本显示时，它显示“234 mi”我需要删除此文本的“mi”部分，因为文本正在转换为 Int32 更新我的数据库中的表。

基本上我只能有一个INT。文本框中没有其他内容。我如何摆脱文本末尾的“mi”？

感谢 C# EB

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T23:35:08.913

在回发中，在保存之前，您可以：

```
var saveValue = Int32.Parse(tbTarget.Text.Replace("mi", string.Empty).Trim()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T23:36:47.763

一个简单的[`String.Substring`](http://msdn.microsoft.com/en-us/library/aka44szs.aspx)作品也：

```
String leftPart = TxtMileAge.Text.Substring(0, txt.IndexOf(' '));
int mileAge = int.Parse(leftPart); 
```

这将检索*0 - indexOfWhiteSpace*`String`范围内的部分并将其转换为*`int`*

 ***编辑**：由于该值可以有小数位（正如您所评论的那样），您需要将其解析为`double`，将其四舍五入，然后将其转换为`int`：

```
var txtEstDistance = new TextBox() { Text = "40.2 mi" };
String leftPart = txtEstDistance.Text.Substring(0, txtEstDistance.Text.IndexOf(' '));
double distanceMiles = double.Parse(leftPart, System.Globalization.CultureInfo.InvariantCulture);
int oDdstanceMiles = (int)Math.Round(distanceMiles, MidpointRounding.AwayFromZero); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T23:39:09.777

如果您使用可变长度的字符（例如有人输入英里），那么您必须对字符串（字符数组）执行 foreach 并检查每个字符的 isumeric。*

# android - 从主活动更新不同布局 xml 中的文本视图

> ID：11173850
> 
> 赞同：5
> 
> 时间：2012-06-23T23:33:31.817
> 
> 标签：android

我在布局文件夹中创建了一个新的 .xml 文件，名为`log.xml`. 它只包含一个`TextView`.

是否可以在我的主要活动的 log.xml 中的 textview 上设置文本？还是只能在使用 log.xml 作为视图的活动中设置？希望你能明白我在这里的意思，否则会详细说明。

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-23T23:40:52.363

如果您没有在“setContentView()”上设置您正在谈论的 xml，您始终可以使用布局充气器来获取它。不过，您必须使用 addView() 将电视添加到当前布局。

```
LayoutInflater inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

View vi = inflater.inflate(R.layout.log, null); //log.xml is your file.
TextView tv = (TextView)vi.findViewById(R.id.tv); //get a reference to the textview on the log.xml file. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T00:03:03.577

除非 log.xml 包含在当前可见布局中，否则 findViewById() 将返回 null。

由于您想在新 Activity 中加载 TextView 时设置它的文本，因此可以在用于启动 Activity 的 Intent 中传递新字符串。

在您的第一个活动中的相应 onClick() 中：

```
Intent intent = new Intent(this, Second.class);
intent.putExtra("myTextViewString", textString);
startActivity(intent); 
```

在您的第二个活动的 onCreate() 中：

```
setContentView(R.layout.log);

TextView textView = (TextView) findViewById(R.id.textView);
Bundle extras = getIntent().getExtras();
if(extras != null) {
    String newText = extras.getString("myTextViewString");
    if(newText != null) {
        textView.setText(newText);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-23T10:30:31.593

以下解决方案对我有用 -

1.  获取布局 XML 文件的视图对象（例如 toast_loading_data） -

    ```
    View layout = inflater.inflate(R.layout.toast_loading_data,
            (ViewGroup) findViewById(R.id.toast_layout_root)); 
    ```

2.  从此视图中获取 TextView 元素（例如 TextView id - toast_text）-

    ```
    TextView tvToast = (TextView) layout.findViewById(R.id.toast_text); 
    ```

3.  设置 TextView 的文本 -

    ```
    tvToast.setText("Loading data for " + strDate + " ..."); 
    ```

4.  以下是来自 Main Activity 的自定义 Toast 消息的片段 -

    ```
    View layout = inflater.inflate(R.layout.toast_loading_data,
            (ViewGroup) findViewById(R.id.toast_layout_root));
    TextView tvToast = (TextView) layout.findViewById(R.id.toast_text);
    tvToast.setText("Loading data for " + strDate + " ...");
    Toast toast = new Toast(getApplicationContext());
    toast.setGravity(Gravity.CENTER, 0, 0); //Set toast gravity to bottom
    toast.setDuration(Toast.LENGTH_LONG);   //Set toast duration
    toast.setView(layout);  //Set the custom layout to Toast 
    ```

希望这可以帮助

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-23T23:41:28.167

我想我明白你想说什么。如果你这样做：

```
TextView tv = (TextView) findViewById(R.id.textView2);    
tv.setText(output); 
```

其中`textView2`是要设置文本的文本视图的 id，您可以使用该`setText()`函数将其设置为任何字符串值。希望这可以帮助！

# python - Python中列表/元组的算术运算符？

> ID：11173851
> 
> 赞同：0
> 
> 时间：2012-06-23T23:33:35.153
> 
> 标签：python, list, tuples, arithmetic-expressions

我有几个这样的功能：

```
object obj.getChild(childIndex)
int obj.numChildren() 
```

所以我使用这些来创建这个函数：

```
collection obj.getChildren() 
```

我在返回类型上很灵活，但我会使用另一个列表做很多“减法”、“乘法”。所以是这样的：

```
children = obj.getChildren()
children = [5,10,15,20,25]

globalChildren = [1,2,3,4,5,6,7,8,9,10,12,14,16,18,20]

difference = children - globalChildren
difference = [15,25]

shared = children * globalChildren
shared = [5,10,20] 
```

有没有一种快速而优雅的方法来做这些，还是我必须一个一个地浏览每个元素并手动收集元素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-23T23:34:29.553

你在找[`set`](http://docs.python.org/library/stdtypes.html#set)s

```
children = {5,10,15,20,25}

globalChildren = {1,2,3,4,5,6,7,8,9,10,12,14,16,18,20}

difference = children - globalChildren
shared = children & globalChildren 
```

# opengl - 典型的场景图会是什么样子？

> ID：11173853
> 
> 赞同：0
> 
> 时间：2012-06-23T23:34:18.103
> 
> 标签：opengl, graphics, directx, opengl-es-2.0

我想知道典型的场景图是什么样的？

像OBJ、OFF这样的经典格式是否对应场景图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T00:02:42.503

不，他们没有。OBJ 和 OFF 只是网格格式。

场景图通常是一种更高级的结构，用于表示组成场景的对象之间的层次关系。出于多种原因，它很有用，例如执行场景节点的相对变换、划分空间......

我建议你看看[OpenSceneGraph](http://www.openscenegraph.org/)和[Ogre3D](http://www.ogre3d.org/)框架。两者都使用图表来组织他们的场景。

# .net - .NET：您如何表示未实现继承的属性？

> ID：11173860
> 
> 赞同：0
> 
> 时间：2012-06-23T23:35:39.387
> 
> 标签：.net

在继承属性的获取部分，您可以抛出 NotImplementedException。但是如何处理 set 部分？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T00:12:51.320

您可以将属性标记为已过时，如下所示：

```
[Obsolete("This property is not implemented", true)]
public new int SomeProperty
{
    get { throw new NotImplementedException(); }
    set { throw new NotImplementedException(); }
} 
```

这样，如果用户尝试使用该属性，他们将收到错误消息。您还可以添加一个`[EditorBrowsable(EditorBrowsableState.Never)]`属性以从智能感知中隐藏该属性，但[根据 MSDN](http://msdn.microsoft.com/en-us/library/system.componentmodel.editorbrowsableattribute.aspx#Y200) “在 Visual C# 中，EditorBrowsableAttribute 不会禁止来自同一程序集中的类的成员。” 所以我不确定这是否会有很大帮助。

# javascript - event.charCode 总是返回 0

> ID：11173863
> 
> 赞同：8
> 
> 时间：2012-06-23T23:36:06.563
> 
> 标签：javascript, html

我有一个页面，我需要在用户单击页面的一部分（div）后捕获他们的输入。这是我的代码：

```
<html>
<body>
<div style="background-color: lightpink" onkeydown="onkeydown1(event)" tabindex="-1">
click me, then press a key
</div>

<script type="text/javascript">
function onkeydown1(event)
{
    alert(event.charCode);
}
</script>
</body>
</html> 
```

看看它在行动：http: [//jsfiddle.net/WRwBF/](http://jsfiddle.net/WRwBF/)

我花了最长时间才走到这一步，因为默认情况下 FireFox 不允许 div “拥有焦点”。最终我发现为 div 设置 tabindex 可以让它成为焦点并且 onkeydown 事件有效。

我现在的问题是，当我单击 div 并按下一个键时，无论按下什么键，都会返回值“0”。为什么会发生这种情况，我该如何解决？

我非常感谢您提供的任何指导！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-24T00:11:10.237

阅读[http://unixpapa.com/js/key.html](http://unixpapa.com/js/key.html)。

总结：使用`keypress`事件是获取所输入字符的可靠信息的唯一方法。以下内容足以让您在大多数情况下输入字符：

```
var charCode = (typeof event.which == "undefined") ? event.keyCode : event.which;
alert("Character typed: " + String.fromCharCode(charCode)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T23:41:16.400

改用`event.keyCode`or `event.which`（取决于浏览器）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T00:14:36.463

您获得了 tabindex 属性的焦点，并且您可以使用 tab 键访问它，但是 div 没有接口来接收关键事件。

您可以从文本输入和窗口本身获得这些信息。

# visual-studio-2010 - 架构比较导致 Visual Studio 2010 崩溃

> ID：11173864
> 
> 赞同：1
> 
> 时间：2012-06-23T23:36:06.950
> 
> 标签：visual-studio-2010, sql-server-2008-r2

当我单击**写入更新**然后我确认时，VS 停止工作。这里可能是什么问题？

我正在尝试使用模式比较直接从源数据库更新数据库项目模式，因为这似乎是同步它们的绝对最佳方式，但我似乎无法在目标项目上执行它。我还没有尝试针对数据库。

![在此处输入图像描述](../Images/2744c88676ccf41154e8109a194ede60.png) [http://i.stack.imgur.com/lSUpQ.png](https://i.stack.imgur.com/lSUpQ.png)

# linux - 高效排序 | uniq 用于大量重复的情况

> ID：11173868
> 
> 赞同：3
> 
> 时间：2012-06-23T23:36:38.603
> 
> 标签：linux, unix

**摘要**：有没有办法比使用更有效地从文件中获取唯一行和出现次数`sort | uniq -c | sort -n`？

**详细信息**：在进行日志分析时，我经常使用管道来`sort | uniq -c | sort -n`了解哪些日志条目显示最多/最少等的总体趋势。这在大多数情况下都有效 - 除非我正在处理一个非常大的日志文件，最终大量重复（在这种情况下`sort | uniq -c`最终需要很长时间）。

**示例**：我现在面临的具体情况是从“未参数化”的 mysql bin 日志中获取趋势，以找出运行次数最多的查询。对于一个包含一百万个条目的文件，我通过 grep/sed 组合来删除参数 - 产生大约 150 条独特的行 - 我花费了大约 3 秒的 grepping 和 sedding，以及大约 15 秒的排序/uniq'ing。

目前，我已经解决了一个简单的 c++ 程序，该程序维护 < line, count > 的映射 - 它在不到一秒的时间内完成了这项工作 - 但我想知道现有的实用程序是否已经存在。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-24T01:55:31.980

我不确定性能差异是什么，但您可以`sort | uniq -c`用一个简单的`awk`脚本替换。由于您有很多重复项并且它是散列而不是排序，我想它会更快：

```
 awk '{c[$0]++}END{for(l in c){print c[l], l}}' input.txt | sort -n 
```

# android - ViewSwitcher 和 AsyncTask

> ID：11173876
> 
> 赞同：0
> 
> 时间：2012-06-23T23:37:55.547
> 
> 标签：android, monodevelop, xamarin.android

在 LoginClick 上，我想在 ViewSwitcher 切换到 ProgressBar 时在后台运行用户验证。我在实现 AsyncTask 时遇到了困难。

OnClick 事件处理程序：

```
void LoginClick (Object o, EventArgs e)
{
    _v.ShowNext ();
    LoginUser lu = new LoginUser (this, _user.Text, _pw.Text);
    lu.Execute ("run");
} 
```

登录用户类：

```
class LoginUser: AsyncTask
{
    private readonly string _userName;
    private readonly string _password;
    private readonly Context _context;
            private User user;

    public LoginUser (Context context, string userName, string password)
    {
        _context = context;
        _userName = userName;
        _password = password;
    }

    protected override Java.Lang.Object DoInBackground (Java.Lang.Object[] @params)
    {
        WS ws = new WS ();
        user = ws.validateUser (_userName, _password);
        return true;          
    }

    protected override void OnPostExecute (Java.Lang.Object result)
    {
        Toast.MakeText (_context, user.Market, ToastLength.Long).Show ();
    }
} 
```

但是当我构建项目时，我得到一个构建错误“LoginUser.DoInBackground 被标记为覆盖但没有找到合适的覆盖方法。”

更新：所以 MonoDevelop 在扩展 AsyncTask 类方面有点不同。几乎所有有我的用户类的地方，我都需要放置 Java.Lang.Object。我现在可以构建没有任何错误。但是，现在应用程序在 LoginClick 时立即崩溃。

```
E/mono    (18020): Unhandled Exception: Java.Lang.NoClassDefFoundError: Exception of type 'Java.Lang.NoClassDefFoundError' was thrown.
E/mono    (18020):   at Android.Runtime.JNIEnv.FindClass (System.String classname) [0x00000] in <filename unknown>:0 
E/mono    (18020):   at Android.Runtime.JNIEnv.FindClass (System.Type type) [0x00000] in <filename unknown>:0 
E/mono    (18020):   --- End of managed exception stack trace ---
E/mono    (18020): java.lang.NoClassDefFoundError: cpec_fm.LoginUser
E/mono    (18020):  at mono.android.view.View_OnClickListenerImplementor.n_onClick(Native Method)
E/mono    (18020):  at mono.android.view.View_OnClickListenerImplementor.onClick(View_OnClickListenerImplementor.java:29)
E/mono    (18020):  at android.view.View.performClick(View.java:3110)
E/mono    (18020):  at android.view.View$PerformClick.run(View.java:11934)
E/mono    (18020):  at android.os.Handler.handleCallback(Handler.java:587)
E/mono    (18020):  at android.os.Handler.dispatchMessage(Handler.java:92)
E/mono    (18020):  at android.os.Looper.loop(Looper.java:132)
E/mono    (18020):  at android.app.ActivityThread.main(ActivityThread.java:4143)
E/mono    (18020):  at java.lang.reflect.Method.invokeNative(Native Method)
E/mono    (18020):  at java.lang.reflect.Method.invoke(Method.java:491)
E/mono    (18020): 
```

上面更新的原始代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T01:36:41.840

因此，只需在 Visual Studio 中打开并部署它就可以了。到目前为止，MonoDevelop 非常失望。

# postgresql - 哪些 PostgreSQL 查询或视图可以确定谁设置了用户权限？

> ID：11173878
> 
> 赞同：1
> 
> 时间：2012-06-23T23:38:00.910
> 
> 标签：postgresql, permissions, grant, rights

我正在尝试撤销数据库用户的权限，似乎权限只能由授予它们的用户撤销。这里有讨论这个问题的线程。 [http://archives.postgresql.org/pgsql-bugs/2007-05/msg00234.php](http://archives.postgresql.org/pgsql-bugs/2007-05/msg00234.php)

该线程可以追溯到 2007 年，我不太确定它是否被视为错误以及该问题是否仍然存在于我正在使用的 PostgreSQL 8.4 中。

是否有可以显示该信息的查询或视图？这样我就可以使用`set session authorization`和撤销它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T02:06:43.067

PostgreSQL 8.4 已过时。查看[版本控制政策](http://www.postgresql.org/support/versioning/)以了解详细信息。但由于它是 SQL 的标准行为（正如 Tom Lane 在您提供的链接讨论中所述），它不太可能发生变化。

权限与相应的对象一起存储在系统目录中。例如，对于一个表：

```
SELECT n.nspname, c.relname, c.relacl
FROM   pg_catalog.pg_class c
JOIN   pg_catalog.pg_namespace n ON n.oid = c.relnamespace
WHERE  c.oid = 'myschema.mytbl'::regclass  -- your tablename here 
```

会产生类似的东西：

```
 nspname  | relname |                  relacl
----------+---------+---------------------------------------------
 myschema | mytbl   | {postgres=arwdDxt/postgres,fuser=r/fadmin} 
```

斜杠后面的角色名是授予者。作为用户`fadmin`（或任何超级用户）撤销：

```
REVOKE SELECT ON TABLE myschema.mytbl FROM fuser; 
```

其他系统表中也有类似的`*acl`列。`pg_namespace`对于模式等。请参阅[手册中的系统表列表。](http://www.postgresql.org/docs/current/interactive/catalogs.html)

* * *

更简单的方法是使用**pgAdmin**并在左侧的对象浏览器中选择一个对象。ACL 将显示在右上角的属性窗格中。

# java - KryoNet - 如何使用 Boolean xx = new clientprocess() 启动客户端；获得返回值？

> ID：11173884
> 
> 赞同：0
> 
> 时间：2012-06-23T23:38:46.763
> 
> 标签：kryonet, java, client, multiplayer, kryo, kryonet

我正在使用[kryonet](/questions/tagged/kryonet "显示标记为“kryonet”的问题")创建一个小型 JAVA 多人游戏来管理服务器/客户端部分。我有一个小问题：在我的服务器程序中，我用一个新的调用方法启动一个客户端，“on”一个布尔值：

```
Boolean xx = new clientprocess(); 
```

在我的***客户端进程（）中；***，我得到了新的***client()***；、***client.connect***和新客户端的类注册。它还包含 3 个方法*conn/receive/disconn*。现在，我不知道如何使用返回数据来获取布尔值。（事实上​​，我只是使用这个客户端连接到 BDD 服务器以获得通过/用户检查，所以我只需要一个布尔值来处理客户端。）

我试过停止和关闭客户端连接，删除监听器等等，但我无法摆脱*Received()*；或*断开连接（）*；方法。而且因为它们是 Void 方法，所以我不能在方法中创建返回值。（我的实际返回是在*clientprocess()*结束时；在*disconnected()*之后；但从未到达过代码。）

有什么可以完全阻止客户端进程到达我的`return boolean;`声明并继续我的登录过程吗？

这是我的代码的一部分，以`Boolean xx = new loginProcess()`：

```
 boolean loginProcess(final String usernamereceived, final String passwordreceived, final int todologin){
    System.out.println("In LOGIN PROCESS");
    final Client loginclient = new Client();
    Kryo kryologin = loginclient.getKryo(); //encodage des packets
    //kryo.register(byte[].class); Si on utilise le system de BYTE
    kryologin.register(Packet0LoginRequest.class);
    kryologin.register(Packet1LoginAnswer.class);
    kryologin.register(Packet2Message.class);
    kryologin.register(Packet2login.class);
    kryologin.register(Packet2login1.class);
    kryologin.register(Packet2login2.class);
    kryologin.register(InetSocketAddress.class); //useless
    kryologin.register(Inet4Address.class); //useless
    kryologin.register(PacketupdateTest.class);
    kryologin.register(LoginServerConnect.class);
    kryologin.register(LoginServerConnectAnswer.class);
    kryologin.register(java.util.ArrayList.class);
    kryologin.register(java.util.List.class);
    kryologin.register(User.class);
    kryologin.register(String[].class);
    System.out.println("Login registration over");
    loginclient.start();
    loginclient.addListener(new Listener() {
        @Override
                    public void connected (Connection connection1) {
                        System.out.println("Connected login");
                            LoginServerConnect loginserverconnect = new LoginServerConnect();
                            connection1.sendTCP(loginserverconnect);
                             System.out.println("Loginserverconnect sended: "+loginserverconnect);
                    }
        @Override
                    public void received (Connection connection1, Object object) {
                         System.out.println("Reception dun packet du login server HASH: "+object);
                                if (object instanceof LoginServerConnectAnswer) {
                                    if (todologin==1){
                                        System.out.println("LOGIN PROCESS");
                                    Packet2login1 loginask = new Packet2login1();
                                    loginask.Password = passwordreceived;
                                    loginask.Username = usernamereceived;
                                     connection1.sendTCP(loginask);
                                        System.out.println("Fichier packet2login1 sended: User *"+loginask.Username+"*, et pass: *"+loginask.Password);
                                    }
                                    else if (todologin == 2){
                                        System.out.println("ADD USER PROCESS");
                                        Packet2AddUser adduserask = new Packet2AddUser();
                                        adduserask.password = passwordreceived;
                                        adduserask.username = usernamereceived;
                                        connection1.sendTCP(adduserask);
                                        System.out.println("Fichier packet2AddUser sended: user *"+adduserask.username+"*, et pass: *"+adduserask.password);
                                    }
                                }
                                if (object instanceof Packet2login2){
                                    Boolean result = ((Packet2login2) object).Result;
                                    String usernamefromlogin = ((Packet2login2) object).Username;
                                   System.out.println("reception de la reponse de login: **"+result+"** pour l'utilisateur: "+usernamefromlogin);

                                   //creation nouvel user - ajout if useramefromlogin == usernamereceived
                                   user.name = usernamefromlogin;

                                   if(result){
                                        System.out.println("user received from login server: "+ user.name+", and KryoId: "+Kryoid);                                            System.out.println("Kryoid du client actu (depuis le packet0 C-S: "+ Kryoid);
                                        int lastid  = players.lastIndexOf(user);
                                                if (players.lastIndexOf(user) == 0){
                                                    user.Id = lastid;
                                                }
                                                else {user.Id = lastid +1;}
                                        players.add(user);
                                        System.out.println("Players.add over");
                                        System.out.println("BDD result returned0: "+mtx);
                                        mtx = true;
                                        System.out.println("BDD result returned1: "+mtx);
                                       /* connection1.close();
                                        loginclient.close();
                                        loginclient.stop();*/
                                        loginclient.removeListener(this);
                                   }

                                   else{
                                       System.out.println("Username or Password incorrect for user: "+ usernamefromlogin);
                                       mtx = false;
                                   }

                                }

                                if (object instanceof Packet2AddUser1){
                                    Boolean addresult = ((Packet2AddUser1) object).adduserresult;
                                    String usernamefromlogin = ((Packet2AddUser1) object).username;
                                    if(addresult){
                                        System.out.println("Nouvel utilisateur enregistre en BDD: *"+ usernamefromlogin);
                                        mtx = true;
                                    }
                                    else {
                                        System.out.println("Erreur lors de lenregistrement en BDD pour: *"+ usernamefromlogin);
                                        mtx = false;
                                    }
                                 }
                                System.out.println("END of received");
                    }

        @Override
public void disconnected (Connection connection1){
       System.out.println("public void DISCONN passé OK cote LISTENER");

}
            });
    try {
        System.out.println("loginclient.connect");
        loginclient.connect(loginstimeout, loginsip, loginsPORT);
        System.out.println("end of conn");
     } catch (IOException ex) {
        Logger.getLogger(NetworkListener.class.getName()).log(Level.SEVERE, null, ex);
    }
    System.out.println("BDD result returned: "+mtx);
    return mtx;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T12:40:25.403

使用 Kryonet RMI 远程方法调用

或使您的方法返回 void 并向您的主类添加一个布尔成员，当您收到 LoginServerConnectAnswer 时，只需将布尔成员更改为 true 并在您的主类中调用一个方法来处理登录

# c++ - K&R风格的函数定义使用g++编译

> ID：11173889
> 
> 赞同：1
> 
> 时间：2012-06-23T23:39:28.650
> 
> 标签：c++, c, kernighan-and-ritchie

编译使用旧式函数定义的 ac 文件时，例如

```
int foo(a)
   int a;
{
  ...
} 
```

g++ 将给出错误：'a' 未在此范围内声明。gcc 可以解析这个。有没有办法让 g++ 认识到这一点？

这对我来说是一个问题，因为我正在编译 c 和 c++ 文件的混合。一个相关的问题是构建这种混合源的标准做法是什么？在所有文件上运行 g++ 还是仅在 cc 文件上运行？前者很方便，但由于 c 和 c++ 规范之间的不一致（例如，char[4]="four";）而给我带来了一些麻烦

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-23T23:41:00.273

> 有没有办法让我们`g++`认识到这一点？

C++ 不支持此语法。

> 在所有文件上运行`g++`还是仅在 cc 文件上运行？

参见例如从 GCC 文档[*编译 C++ 程序：*](http://gcc.gnu.org/onlinedocs/gcc-4.7.0/gcc/Invoking-G_002b_002b.html#Invoking-G_002b_002b)

> C++ 源文件通常使用后缀 .C'、.cc、.cpp、.CPP、.c++、.cp 或 .cxx 之一；C++ 头文件通常使用 .hh、.hpp、.H 或（对于共享模板代码）.tcc；和预处理的 C++ 文件使用后缀 .ii。GCC 识别具有这些名称的文件并将它们编译为 C++ 程序，即使您调用编译器的方式与编译 C 程序的方式相同（通常使用 name `gcc`）。
> 
> 但是，使用`gcc`并没有添加 C++ 库。`g++`是一个调用 GCC 并将 .c、.h 和 .i 文件视为 C++ 源文件而不是 C 源文件（除非`-x`使用）的程序，并自动指定针对 C++ 库的链接。在预编译扩展名为 .h 的 C 头文件以用于 C++ 编译时，此程序也很有用。

所以有两种可能：

1.  `gcc`在 C 文件和`g++`C++ 文件上运行。
2.  `gcc`在所有文件上运行。

在这两种情况下，您都需要使用`g++`（或`gcc -lstdc++`）链接。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-23T23:45:07.590

Oli 是正确的：C++ 不支持旧式函数定义。

使用 C 编译器（例如 gcc）编译 C。

使用 C++ 编译器（例如 g++）编译 C++。

它们是两种不同（尽管密切相关）的语言。您可以使用 C++ 的`extern "C"`特性从 C++ 调用 C 代码，反之亦然；有关详细信息，请参阅[C++ FAQ Lite](http://www.parashift.com/c++-faq-lite/)的第 32 节。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-24T00:43:28.020

如果你要编译 C 和 C++，你最好总是编译`gcc`（它将根据文件扩展名选择语言）而不是`g++`（总是编译为 C++）。您将需要更改链接器选项以包含 C++ 标准库（`-lm`如果您使用它），因为它们是由`g++`但不是自动添加的`gcc`。

或者，更好的选择是调用`g++`for C++ 和`gcc`for C 文件。通过配置构建系统应该不会太难管理。

# tsql - 消除 TSQL 查询中的 NULL 行

> ID：11173890
> 
> 赞同：0
> 
> 时间：2012-06-23T23:39:44.423
> 
> 标签：tsql, null, ssms

> **可能重复：**
> [如何消除 TSQL 中的 NULL 字段](https://stackoverflow.com/questions/11164232/how-to-eliminate-null-fields-in-tsql)

我正在使用 SSMS 2008 R2 并正在开发 TSQL 查询。我只想要 1 条记录/profile_name。因为其中一些值是 NULL，所以我目前正在对大多数表进行 LEFT JOINS。但是 LEFT JOIN 的问题是，现在我获得了一些 profile_names 的 > 1 条记录！

但是，如果我将其更改为 INNER JOIN，则某些 profile_names 将被完全排除，因为它们对这些列具有 NULL 值。无论 NULL 值如何，如何将查询结果限制为只有一条记录/profile_name？如果有非 NULL 值，那么我希望它选择具有非 NULL 值的记录。这是初始查询：

```
select distinct
        gp.group_profile_id,
        gp.profile_name,
        gp.license_number,
        gp.is_accepting,
        case when gp.is_accepting = 1 then 'Yes'
            when gp.is_accepting = 0 then 'No '
            end as is_accepting_placement,
        mo.profile_name as managing_office,
        regions.[region_description] as region,     
        pv.vendor_name,
        pv.id as vendor_id,
        at.description as applicant_type,
        dbo.GetGroupAddress(gp.group_profile_id, null, 0) as [Office Address],
        gsv.status_description
from  group_profile gp With (NoLock)
    inner join group_profile_type gpt With (NoLock) on gp.group_profile_type_id = gpt.group_profile_type_id and gpt.type_code = 'FOSTERHOME' and gp.agency_id = @agency_id and gp.is_deleted = 0
    inner join group_profile mo With (NoLock) on gp.managing_office_id = mo.group_profile_id
    left outer join payor_vendor pv With (NoLock) on gp.payor_vendor_id = pv.payor_vendor_id
    left outer join applicant_type at With (NoLock) on gp.applicant_type_id = at.applicant_type_id and at.is_foster_home = 1
    inner join group_status_view gsv With (NoLock) on gp.group_profile_id = gsv.group_profile_id and gsv.status_value = 'OPEN' and gsv.effective_date =  
    (Select max(b.effective_date) from  group_status_view b  With (NoLock)
    where gp.group_profile_id = b.group_profile_id)
    left outer join regions With (NoLock) on isnull(mo.regions_id, gp.regions_id) = regions.regions_id
    left join enrollment en on en.group_profile_id = gp.group_profile_id
    join event_log el on el.event_log_id = en.event_log_id
    left join people client on client.people_id = el.people_id 
```

可以看到，上面查询的结果是 1 row / profile_name：

```
group_profile_id    profile_name    license_number  is_accepting    is_accepting_placement  managing_office region  vendor_name vendor_id   applicant_type  Office Address  status_description  Cert Date2 
```

但是现在看看当我添加 2 个 LEFT JOIN 和 1 个附加列时会发生什么：

```
select distinct
        gp.group_profile_id,
        gp.profile_name,
        gp.license_number,
        gp.is_accepting,
        case when gp.is_accepting = 1 then 'Yes'
             when gp.is_accepting = 0 then 'No '
            end as is_accepting_placement,
        mo.profile_name as managing_office,
        regions.[region_description] as region,     
        pv.vendor_name,
        pv.id as vendor_id,
        at.description as applicant_type,
        dbo.GetGroupAddress(gp.group_profile_id, null, 0) as [Office Address],
        gsv.status_description,
            ri.[description] as race
from  group_profile gp With (NoLock)
    inner join group_profile_type gpt With (NoLock) on gp.group_profile_type_id = gpt.group_profile_type_id and gpt.type_code = 'FOSTERHOME' and gp.agency_id = @agency_id and gp.is_deleted = 0
    inner join group_profile mo With (NoLock) on gp.managing_office_id = mo.group_profile_id
    left outer join payor_vendor pv With (NoLock) on gp.payor_vendor_id = pv.payor_vendor_id
    left outer join applicant_type at With (NoLock) on gp.applicant_type_id = at.applicant_type_id and at.is_foster_home = 1
    inner join group_status_view gsv With (NoLock) on gp.group_profile_id = gsv.group_profile_id and gsv.status_value = 'OPEN' and gsv.effective_date =  
    (Select max(b.effective_date) from  group_status_view b  With (NoLock)
    where gp.group_profile_id = b.group_profile_id)
    left outer join regions With (NoLock) on isnull(mo.regions_id, gp.regions_id) = regions.regions_id
    left join enrollment en on en.group_profile_id = gp.group_profile_id
    join event_log el on el.event_log_id = en.event_log_id
    left join people client on client.people_id = el.people_id
    left join race With (NoLock) on el.people_id = race.people_id
    left join race_info ri with (nolock) on ri.race_info_id = race.race_info_id 
```

上面的查询产生了所有相同的 profile_names，但有些带有 NULL 竞争值：

```
group_profile_id    profile_name    license_number  is_accepting    is_accepting_placement  managing_office region  vendor_name vendor_id   applicant_type  Office Address  status_description  Cert Date2  race 
```

不幸的是，我需要为这个额外的字段值（种族）加入 2 个额外的表，这使事情变得复杂。如果我只是将上面的最后两个 LEFT JOIN 更改为 INNER JOIN，那么我会消除上面的 NULL 行。但我也消除了一些 profile_names：

```
group_profile_id    profile_name    license_number  is_accepting    is_accepting_placement  managing_office region  vendor_name vendor_id   applicant_type  Office Address  status_description  Cert Date2  race 
```

希望我已经提供了这个问题所需的所有细节。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T15:18:51.510

不是最优雅的解决方案，但可行的解决方案：

```
select [stuff]
from  group_profile gp With (NoLock) 
  inner join group_profile_type gpt With (NoLock) on gp.group_profile_type_id = gpt.group_profile_type_id and gpt.type_code = 'FOSTERHOME' and gp.agency_id = @agency_id and gp.is_deleted = 0 
  inner join group_profile mo With (NoLock) on gp.managing_office_id = mo.group_profile_id 
  join payor_vendor pv on ISNULL(gp.payor_vendor_id, 'THISVALUEWILLNEVEROCCUR') = ISNULL(pv.payor_vendor_id, 'THISVALUEWILLNEVEROCCUR')
...etc... 
```

我发布的最大问题是您将进行大量表扫描。

# jquery - 用jquery实现抽搐效果

> ID：11173893
> 
> 赞同：0
> 
> 时间：2012-06-23T23:40:33.317
> 
> 标签：jquery, animation

是否有可能创建*类似于*jQuery 中用于战地 3 介绍的静态/电视干扰/抽搐效果？我想要做的是“淡出”一个 div，但让它做一些更有趣的事情，比如抽搐效果。我不知道这是否可以仅使用 jQuery 远程实现。

[你可以在这里](http://www.youtube.com/watch?v=0H4_DelSWF8&feature=related)看到 BF3 的介绍效果。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-24T00:29:19.643

一种“可能”的方法是使用 jquery 快速更改 div 的背景图像。

我制作了一个快速演示来向您展示我的意思：http: [//jsfiddle.net/ssGdz/](http://jsfiddle.net/ssGdz/)

如果您在多个图像之间旋转，理论上您可以复制 BF3 介绍。

**PS**我有一种预感，这可能会导致旧版浏览器爆炸，但我在 IE6 中打开它并且运行流畅。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T23:45:31.427

[jQuery](http://jquery.com/)是一个让您更轻松地开发 JavaScript 的框架，它没有提供太多高级 UI 内容。另一方面，[jQuery UI有一些特性，但我没有你想要的那么花哨。](http://jqueryui.com/)最接近这里的是[jQuery UI 的抖动](http://docs.jquery.com/UI/Effects/Shake)。如果你加快速度，它可能会开始看起来很紧张。

[正如Jarred Farrish](https://stackoverflow.com/users/451969/jared-farrish)在评论中指出的那样，[Processing.js](http://processingjs.org/)可能是您正在寻找的：

> Processing.js 使您的数据可视化、数字艺术、交互式动画、教育图表、视频游戏等使用 Web 标准工作，无需任何插件。

# ruby-on-rails - 将现有 Rails 应用程序导入 RubyMine 项目

> ID：11173894
> 
> 赞同：9
> 
> 时间：2012-06-23T23:40:46.650
> 
> 标签：ruby-on-rails, ruby, rubymine

我目前在尝试测试 RubyMine 时遇到了不必要的麻烦。我最大的问题是我无法找到将系统上现有的 rails 应用程序转换为官方 RubyMine 应用程序的方法，这样我就可以体验 RubyMine 的所有功能。

我唯一可用的选项是创建一个新的 RubyMine rails 项目，从 git 远程提取 rails 项目（不起作用），或者打开以前的 rails 目录（允许您编辑 rails 代码，但它不会将此目录识别为 RubyMine 项目，因此我无法获得 RubyMine 对 rails 的所有好处）。

请帮帮我，RubyMine 看起来很有希望

这是 RubyMine 4 顺便说一句。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-24T00:06:10.787

`File`| `Open Directory`应该从现有源创建一个新的 RubyMine 项目。我刚刚尝试了一个新的 Rails 应用程序，它认为它是一个 Rails 项目，并且所有功能都像从 RubyMine 创建的新项目一样工作。

# jquery - 如何使用 AJAX 从 Wordpress 中的 url 参数中提取特定循环

> ID：11173902
> 
> 赞同：0
> 
> 时间：2012-06-23T23:43:03.300
> 
> 标签：jquery, ajax, wordpress

我有一个显示所有项目的工作页面。我正在使用分类法根据单击的链接对结果进行分组和显示。总体目标是在显示过滤结果的同时保持单击的链接突出显示。如果用户点击Things，那么Things 会加粗，页面只会加载在WP 中归类为“Things”的结果。

html是这样的：

```
<div class="more">
    <a class="static" href="site/work">ALL</a>
    <a class="static" href="site/?type=Things">Things</a>
    <a class="static" href="site/?type=More Things">More Things</a>
    <a class="static" href="site/?type=Objects">Objects</a>
    <a class="static" href="site/?type=Goals">Goals</a>
    <a class="static" href="site/?type=Books">Books</a>
    <a class="static" href="site/?type=Drawings">Drawings</a>
    <a class="static" href="site/?type=Thoughts">Thoughts</a>
</div> 
```

所以链接过滤了项目结果集。这是拉链接的WP循环：

```
<div class="more">
    <a class="static" href="<?php bloginfo('template_url'); ?>/work/">ALL</a>           
    <?php
    foreach ($tax_terms as $tax_term) {
    echo '<a class="static" href="' . esc_attr(get_term_link($tax_term, $taxonomy)) . '" title="' . sprintf( __( "View all posts in %s" ), $tax_term->name ) . '" ' . '>' . $tax_term->name.'</a>';
    } ?>
</div> 
```

我已经设置了一些 Jquery，所以它显示了用户在哪个页面上。

```
$(function(){
    $("div.more a").forEach(function(i){
        var active = window.location.hash;

        if($(this).text() == active){
            $(this).trigger('click');
        }
    }); 
});

$("div.more a").on("click", function (event) {
   event.preventDefault();
  // Revert all to original state
  $("a.static")
    .removeClass("active")
    .addClass("static");
  // Set classes to clicked anchor
  $(this)
    .removeClass("static")
    .addClass("active");

  window.location.hash = $(this).text();
}); 
```

这就是问题出现的地方。为了保持向用户显示单击了哪个项目标题的类更改，我删除了页面重新加载选项。我仍然需要`?type=`通过 url 来获得新的过滤结果。有人建议这可以使用 Ajax 来完成。我不知道如何执行。

或者我可以使用 Jquery 来获取通过 url 传递的值并将其与链接匹配吗？

**更新**

让我简化一下。我想通过将`<a>`标签传递给一个名为 active 的类来向用户显示单击了哪个链接。

所以默认情况下，代码如下所示：

```
<div class="more">
        <a class="static" href="site/work">ALL</a>
        <a class="static" href="site/?type=Things">Things</a>
        <a class="static" href="site/?type=More Things">More Things</a>
        <a class="static" href="site/?type=Objects">Objects</a>
        <a class="static" href="site/?type=Goals">Goals</a>
        <a class="static" href="site/?type=Books">Books</a>
        <a class="static" href="site/?type=Drawings">Drawings</a>
        <a class="static" href="site/?type=Thoughts">Thoughts</a>
    </div> 
```

但是当用户点击一个链接时，例如“Things”，代码如下所示：

```
<div class="more">
        <a class="active" href="site/work">ALL</a>
        <a class="static" href="site/?type=Things">Things</a>
        <a class="static" href="site/?type=More Things">More Things</a>
        <a class="static" href="site/?type=Objects">Objects</a>
        <a class="static" href="site/?type=Goals">Goals</a>
        <a class="static" href="site/?type=Books">Books</a>
        <a class="static" href="site/?type=Drawings">Drawings</a>
        <a class="static" href="site/?type=Thoughts">Thoughts</a>
    </div> 
```

在大多数情况下，这可以通过 JQuery 解决

```
removeClass("static").addClass("active) 
```

但是由于在传递新的 url 变量时页面正在重新加载，所以 addClass("active") 在页面重新加载后不会持续存在。

有针对这个的解决方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T00:28:14.800

您有两种解决方案：

1.  加载下一页时，检查分类并使该导航项处于活动状态。在这种情况下，`<a class="static<?php if (is_post_type_archive('Things')) { echo ' active'; } ?>" href="site/?type=Things">`为导航中的每个项目使用和相似。注意我选择了`is_post_type_archive` [函数](http://codex.wordpress.org/Function_Reference/is_post_type_archive)，但它可能会根据您的分类而有所不同。
2.  使用 AJAX 加载页面内容并使用 jQuery 只需替换内容所在的容器 div。

这样的事情可能会有所帮助：

```
$("div.more a").on("click", function (event) {
    // prevent page reload
    event.preventDefault();
    // get the contents
    $.get(this.href, function (response) {
        // jquerify the response HTML string and find our replaceable area
        var result = $(response).find('#myContentDiv');
        // do the replace
        $('#myContentDiv').html(result);
    });
}); 
```

我希望这个信息对您有所帮助。#myContentDiv 应该是您拥有循环的地方。

# regex - 这个正则表达式有什么问题？（使用 '。'）

> ID：11173904
> 
> 赞同：2
> 
> 时间：2012-06-23T23:43:04.353
> 
> 标签：regex, f#

我在 F# 中编写了以下代码：

```
let regexSymbol = new Regex(@"\b\}|\.\b")
if (Regex.IsMatch(".", regexSymbol.ToString())) then
    printfn "symbol0" 
```

但它不打印任何东西..

我希望正则表达式只表示完全是“}”或“。”的字符串。, 在同一行中没有任何后续或前面的字符。请问有谁知道我应该怎么改？

谢谢.. ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T00:07:06.183

如果您需要以这种方式匹配字符串，您将使用字符串开头和字符串结尾锚点：

```
open System.Text.RegularExpressions
let regexSymbol = new Regex("^[}.]$") // in this case verbatim is not required
if (regexSymbol.IsMatch(".")) then printfn "Matched! :)" else printfn "Not matched... :("
if (regexSymbol.IsMatch("}.")) then printfn "Matched! :)" else printfn "Not matched... :(" 
```

这会在第一行打印“Matched”，在第二行打印“Not Matched”。

但是检查这个字符串是否等于“}”和“。”不是更好吗？抱歉，刚刚开始探索 F#。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-23T23:57:21.760

问题是，什么是“。” 不被视为单词边界。所以 \b" 匹配 'A"'，但不匹配 '."'。

# javascript - 使用js在列表列表中查找值

> ID：11173907
> 
> 赞同：2
> 
> 时间：2012-06-23T23:44:03.207
> 
> 标签：javascript, flot

我有一个 javascript 中的数据列表，如下所示：

```
[[152, 48, 'http://www.google.com'], 
 [198, 47, 'http://www.stackoverflow.com'], 
 [199, 45, 'http://www.apple.com']] 
```

我正在使用 flot 创建一个绘图，并尝试传递这第三个值以从该点访问超链接。因此，我试图通过使用前两个作为查找键来查找每个列表的第三个值（即`[[x,y,hyperlink],[x2,y2,hyperlink2]]`，单击一个点，然后使用适当`(x,y)`的查找相应的超链接）

无论如何要这样做，还是我需要将一些 x 和 y 的字典传递给 javascript，然后从查找的两个列表中找到公共变量？在 python 中，我知道您可以`x`使用 itemgetter 对值进行列表过滤，然后查找与该值对应的链接`y`。但是我对 js 几乎一无所知，所以可以`(x,y)`给出一个 ID-ing 的解决方案，或者如果不可能或不建议，那么一个解决方案是获取两个列表（来自 x 和 y vals）并找到一个共同值（如果多个，只有一个，任何人）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T00:06:39.023

您可以使用[Array`.filter()`方法](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/filter)来确定是否有任何元素与提供的 x 和 y 匹配。（请注意，IE`.filter()`直到版本 9 才支持，但 MDN 有一个您可以包含[的 shim ）。](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/filter#Compatibility)

```
var data = [[152, 48, 'http://www.google.com'],
            [198, 47, 'http://www.stackoverflow.com'],
            [199, 45, 'http://www.apple.com']];

function getURLForPoint1(x, y) {
    var p = data.filter(function(el) {
        return (el[0] === x && el[1] === y);
    });
    if (p.length === 1) return p[0][2];
    // else 0 or more than 1 elements mathced so return undefined
} 
```

或者，您可以预先创建一个字典对象，然后从字典中进行将来的查找：

```
var getURLForPoint2 = function() {
    var dataDictionary = {}, i;
    for (i = 0; i < data.length; i++)
       dataDictionary[data[i][0]+" "+data[i][1]] = data[i][2];

    return function(x, y) {
       return dataDictionary[x + " " + y];
    };
}(); 
```

无论哪种方式，我都对其进行了编码，因此如果您要求不在列表中的点，您将`undefined`返回，但显然您可以将其更改为返回空字符串或抛出异常或任何您喜欢的。

```
alert(getURLForPoint1(198, 47));    // 'http://www.stackoverflow.com'
alert(getURLForPoint2(198, 47));    // 'http://www.stackoverflow.com'
alert(getURLForPoint2(4, 5));       // undefined 
```

两者的演示：http: [//jsfiddle.net/WdSAz/](http://jsfiddle.net/WdSAz/) ​</p>

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-23T23:52:42.627

抱歉，在 js 中没有捷径可以做到这一点，除了遍历列表并找到具有匹配“x”和“y”值的列表。

但是，根据您的列表有多大（以及此列表是否将用于其他用途......），您可以重组数据以使其更有效。例如，做一个类似的结构（假设可能有例如 x1, y1 vs x1, y2）

```
x1 > y1 > url
x1 > y2 > url
x2 > y1 > url
etc... 
```

然后您可以立即通过“x”索引跳转到第二个 lvl“y”列表，唯一的循环是有多少“y”值共享相同的“x”值

编辑：

实际上，如果您想在重组数据方面更进一步，您可以执行以下操作：

```
<script type='text/javascript'>
var list = {
  1 : {
    1 : 'foobar 1,1',
    2 : 'foobar 1,2'
  },
  2 : {
    1 : 'foobar 2,1',
    2 : 'foobar 2,2'
  },
};

</script> 
```

例如，这将允许您执行此操作

```
var x = 1;
var y = 2;
alert(list[x][y]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-23T23:52:30.830

像这样的东西

```
 var findX = 198
  var findY = 47
  var targetUrl
  for (var i=0; i<arr.length; i++)
  {
      for (var j=0; j<arr[i].length; j++)
      {
          if (findX = j[0] && findY == j[1])
          {
              targetUrl = j[2]
          } 
      }
  } 
```

# x86 - 分支预测 - 关于目标预测和使用 PC 的问题

> ID：11173913
> 
> 赞同：2
> 
> 时间：2012-06-23T23:46:03.293
> 
> 标签：x86, hardware, computer-architecture, branch-prediction

所以我了解流水线处理器分支预测中使用的基本技术——比如 2 位饱和计数器、两级自适应预测器等。

以下是我的问题：

1）分支**目标**预测：为什么这很重要，这里使用了哪些机制？当我想到一个分支时，我会想到“bne r2，r3，LABEL”，它表示如果 r2 ！= r3 然后分支到 LABEL，这意味着 PC（程序计数器）= PC + LABEL。在这里预测目标有什么神秘之处？根据 LABEL 的编译值，您知道它将是什么。我可能以某种方式错过了这一点。

2) 为什么程序计数器值本身（例如 0x4001000C）或至少它的最后几位被用作分支预测方案的一部分？我看到了一个方案，其中 PC 的最后 4 位连接到（4 位）分支历史寄存器，并且该 8 位值用于访问模式历史表。我认为PC非常随意！

感谢您对理解这些问题的任何帮助

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-23T23:55:13.797

> 在这里预测目标有什么神秘之处？根据 LABEL 的编译值，您知道它将是什么。

由于 CPU 流水线深度和缓存延迟，在获取指令、完全解码以识别分支目标和能够获取该指令之间需要许多周期。因此，您可以预测目标以便抢先获取下一条指令。

> 为什么程序计数器值本身（例如 0x4001000C）或至少它的最后几位被用作分支预测方案的一部分？

因为 PC 唯一标识了一个特定的分支指令！您还打算如何索引分支预测表？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-25T22:08:07.820

添加更多颜色

1）对于您给出的示例，分支目标预测并没有那么多。对于虚函数和计算分支（对于 switch 语句等）来说，它更为重要。在这两种情况下，分支目标在编译时都是未知的。在虚函数情况下，它必须从内存位置（虚函数表）加载，而在 switch 语句情况下，我们通常通过查找表中的分支偏移量来完成。即使虚函数案例是无条件的，它仍然大量使用 BTB。

2) 基本上有两类通用的预测器，一种是全局的，一种是按地址的。全局预测器的好处是能够处理更长的模式历史（采用/未采用的历史）。每个地址预测器的好处是能够特定于某些分支位置，但通常具有较短的历史记录（因为它们是每个地址的，因此占用大量空间）。许多处理器使用通常称为锦标赛分支预测器的东西，其中有一个全局预测器和一个每个地址预测器，然后有一个预测器（置信度估计器）来选择预期会给出更好答案的预测器。

# objective-c - 如何自定义 NSDrawer 的内容视图？

> ID：11173918
> 
> 赞同：0
> 
> 时间：2012-06-23T23:47:05.607
> 
> 标签：objective-c, macos, cocoa

我的要求是在内容视图的 3 侧没有边框的抽屉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T07:31:27.307

您可以创建一个窗口，然后将其作为子窗口附加到主窗口。

为了让它粘在主窗口上，您必须收听有关主窗口框架更改的通知，并将您的子窗口移动到与主窗口中的更改同步的位置。

# asp.net - SignalR 使用 NuGet 的问题

> ID：11173923
> 
> 赞同：8
> 
> 时间：2012-06-23T23:48:04.073
> 
> 标签：asp.net, signalr

我在为 SignalR 设置一个简单的测试项目时遇到问题。

我在using中安装了**SignalR**，但是当我尝试运行我的网站时，我得到以下 Asp.Net 错误页面。（看起来所有程序集都由 NuGet 正确添加）`VS WD Express 2010``NuGet`

有人见过这个吗？

```
Could not load type 'SignalR.PersistentConnection' from assembly 'SignalR

[TypeLoadException: Could not load type 'SignalR.PersistentConnection' from assembly 'SignalR, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null'.]
   SignalR.Hosting.AspNet.AspNetBootstrapper.Initialize() +0

[InvalidOperationException: The pre-application start initialization method Initialize on type SignalR.Hosting.AspNet.AspNetBootstrapper threw an exception with the following error message: Could not load type 'SignalR.PersistentConnection' from assembly 'SignalR, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null'..]
   System.Web.Compilation.BuildManager.InvokePreStartInitMethods(ICollection`1 methods) +423
   System.Web.Compilation.BuildManager.CallPreStartInitMethods() +306
   System.Web.Hosting.HostingEnvironment.Initialize(ApplicationManager appManager, IApplicationHost appHost, IConfigMapPathFactory configMapPathFactory, HostingEnvironmentParameters hostingParameters, PolicyLevel policyLevel, Exception appDomainCreationException) +677

[HttpException (0x80004005): The pre-application start initialization method Initialize on type SignalR.Hosting.AspNet.AspNetBootstrapper threw an exception with the following error message: Could not load type 'SignalR.PersistentConnection' from assembly 'SignalR, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null'..]
   System.Web.HttpRuntime.FirstRequestInit(HttpContext context) +9090876
   System.Web.HttpRuntime.EnsureFirstRequestInit(HttpContext context) +97
   System.Web.HttpRuntime.ProcessRequestInternal(HttpWorkerRequest wr) +258 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-24T00:26:54.180

您的项目名称是 SignalR，请更改它。

# android - Android 活动变暗、失去焦点和冻结 - 没有错误消息并且在首次运行后可以工作

> ID：11173927
> 
> 赞同：3
> 
> 时间：2012-06-23T23:50:16.057
> 
> 标签：android, android-activity, progressdialog, android-tabactivity

所以这就是问题所在：

活动开始 - 在 onResume() 中，在填充列表视图的后台线程中做了一些工作。这是在显示进度对话框时完成的，如下图所示：

![在后台调用 Web 服务时加载对话框](../Images/b950770d570769738e38989355277995.png)

该工作完成 - 进度对话框被告知 .dismiss();

对话框消失了-可以看到我的列表视图，但是活动失去了焦点-并且有点暗淡到背景中。这迫使我按回家，并在重新打开之前强制关闭 - 根据此示例：

![在进度对话框上调用dismiss后应用程序锁定](../Images/4fd3059a380dca1f11856dcf076428c8.png)

每次应用程序第一次运行时都会出现此问题。在应用程序锁定始终成功之后运行并且问题再也不会出现！正如您在图片中看到的 - 一切都变暗了 - 但是在强制关闭后，重新打开视图会像我预期的那样响应一切正常。logcat 中没有任何内容可以帮助我诊断问题 - 所有代码似乎都可以正常运行。

请帮忙！

重播列表活动部分的代码转储在这里：[http](http://pastebin.com/YG59VFPu) ://pastebin.com/YG59VFPu - 可能很难遵循 - 但在第一次运行时，它会进行一个保管箱登录，这很有效 - 然后它会做 findAllReplays( ) - 这也有效 - 最终以 returnres runnable 结束，导致对话框被关闭 - 这也有效 - 这似乎是问题发生的地方......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-01T12:13:14.383

好的所以最终我做了以下事情。

我创建了一个 AsyncTask - 它在预执行时以相同的方式创建了对话框，在 doinbackground 结束时它关闭了对话框，因为我的 onPostExecute 从不执行 - 但是在 doinbackground 结束时关闭对话框。这就是我正在使用的，它基本上解决了我的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-06T13:36:23.777

要保持屏幕亮起，您可以在活动中设置标志

```
 this.getWindow().
        addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON); 
```

它将保持屏幕开启，直到当前活动处于前台。或者，如果您在后台执行某些操作并希望在后台工作之前、期间或之后保持屏幕开启，则可以使用唤醒锁定。

[电源管理器保持屏幕打开。永远不要忘记提及适当的权限](http://developer.android.com/reference/android/os/PowerManager.html)。

尽管您在我回答之前解决了您的问题，但希望它可以帮助您清除概念以保持屏幕开启。

# html - 带有图像的自定义表单输入无法正确显示

> ID：11173928
> 
> 赞同：0
> 
> 时间：2012-06-23T23:50:42.363
> 
> 标签：html, css

我正在尝试创建一个使用一些图像的自定义表单输入，它应该如下所示： ![在此处输入图像描述](../Images/052ddc8b21e7ae87aa8b48ec7f948c20.png)

我尝试了以下方法：

```
<style>
input {
    background-image: url(../img/search-background-middle.png);
    background-repeat: repeat-x;
    padding: 17px 0;
    font-size: 12px;
    border: none;
    margin: 0;
}

form {
    padding: 0;
    margin: 0;
}
</style>

<body>
<form>
    <img src="../img/search-background-left.png"/>
    <input type="text" value="   start typing to search..." size="40" maxlength="255"         />
    <img src="../img/search-background-right.png"/>
</form>
</body> 
```

结果是：

![在此处输入图像描述](../Images/69c123abf75e61bdb576a87dfdef3b40.png)

为什么？？我不仅对解决方案感兴趣，而且对这不起作用的原因感兴趣。我认为我对彼此相邻的内联元素的理解是有缺陷的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T23:59:36.357

尝试将垂直对齐设置为顶部

```
form * {vertical-align:top;} 
```

`img`还删除s 和 the之间的空格`input`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T00:00:14.867

1.  删除`img`和`input`元素之间的空格（包括换行符）
2.  在元素上设置高度和行高`input`以匹配图像高度
3.  将 padding 和 margin 设置为 0 `input`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T02:01:40.273

您可能还需要添加一个浮点数：left !important; 到输入。有时，当事情没有安排好时，这可以解决我的问题

# codeigniter - 未定义的属性：Users::$Usersa 致命错误：在非对象上调用成员函数 insert()

> ID：11173929
> 
> 赞同：1
> 
> 时间：2012-06-23T23:51:19.653
> 
> 标签：codeigniter, properties, call, models, member

我正在使用 codeigniter 框架，当我提交表单时出现此错误：

> 消息：未定义属性：Users::$Usersa
> 文件名：controllers/users.php
> 行：44
> 致命错误：调用非对象上的成员函数 insert()

用户控制器（已损坏的部分）：

```
$this->load->model('usersa');

$register = array(
        'username' => $this->input->post('username'),
        'password' => $this->input->post('password'),
        'email' => $this->input->post('email')
    );

    // validation stuff

    if ($this->input->post())
        if ($this->form_validation->run() == FALSE) {

        } else {
            $this->Usersa->insert($register); // This is line 44
        } 
```

Usersa 模型（此文件位于 application/models 中）

```
class Usersa extends MY_Model {

var $table = 'users';

function __construct() {  
    parent::__construct();
}
} 
```

MY_Model（位于应用程序/核心）

```
class MY_Model extends CI_Model{

protected $table = '';

function __construct() {  
    parent::__construct();
}

function insert() {
    $this->db->insert($this->table, $register);

}
} 
```

表数据通过正常，我很确定寄存器数据也是如此，我似乎无法弄清楚为什么我会收到错误消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T00:01:59.477

您将模型加载为`"usera"`- 但将其引用为`$this->Usera`- 您应该将其引用为小写：

`$this->usersa->insert($register);`

或者，您可以使用第二个参数传递您想要引用模型的名称，如 @ [http://codeigniter.com/user_guide/general/models.html](http://codeigniter.com/user_guide/general/models.html)所示：

`$this->load->model('usersa','some_model_name');`

`$this->some_model_name->insert(...);`

# sql - 如何批量编辑触发器？

> ID：11173930
> 
> 赞同：0
> 
> 时间：2012-06-23T23:51:43.760
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有许多触发器，我想使用通配符构建一个表列表，然后通过向触发器添加一些列名来更新它们的现有触发器。每个触发器中的列名都相同，但我不清楚如何构建表列表或如何在单个 alter trigger 语句中循环列表。我想我将不得不使用光标....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T01:22:40.623

没有魔杖可以说“添加`this code`到所有触发器”（或任何其他对象类型，就此而言）。

对于许多对象类型，对于批量编辑，您可以使用对象资源管理器详细信息以及该视图中的排序和/或过滤快速生成多个对象的脚本。例如，如果您在对象资源管理器中突出显示“存储过程”，它们都会在对象资源管理器详细信息中列出，您可以选择多个对象，右键单击，并将存储过程编写为 > CREATE To >

由于触发器嵌套在表下，因此没有方便的方法来执行此操作（触发器也不是您可以在右键单击数据库并选择任务 > 生成脚本时选择的实体类型）。但是您可以很容易地从元数据中提取脚本（`Results to Text`运行时需要在 Management Studio 中）：

```
SET NOCOUNT ON;

SELECT OBJECT_DEFINITION([object_id]) 
  + CHAR(13) + CHAR(10) + 'GO' + CHAR(13) + CHAR(10)
  FROM sys.triggers
  WHERE type = 'TR'; 
```

您可以获取输出，将其复制并粘贴到顶部窗格中，然后将新代码添加到每个触发器后，您将需要做更多的工作，例如搜索/`'CREATE TRIGGER'`替换`'ALTER TRIGGER'`. 您也可以将其作为查询的一部分进行，但它依赖于具有一致编码约定的创建者。由于某些触发器可能看起来像这样......

```
create          trigger 
```

...您可能需要用手按摩一些。

如果您只对某组表感兴趣，也可以过滤上面的查询。例如，要仅更改与以`Sales`您开头的表关联的触发器，可以说：

```
AND OBJECT_NAME(parent_id) LIKE N'Sales%'; 
```

或仅适用于`Person`架构中的表：

```
AND OBJECT_SCHEMA_NAME(parent_id) = N'Person'; 
```

无论如何，一旦您对脚本进行了所有必要的调整，您就可以运行它。比扩展每个表并为这些触发器生成脚本要容易得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T14:03:35.393

除了 Aarons 的建议，它在一堆具有不一致对象命名约定的复杂触发器上效果很好，然后我尝试做一些事情，这样我就可以记住我在 3 个月内做了什么。享受。创建或更改 SP，然后在没有参数的情况下执行。

```
CREATE PROCEDURE SP_ALTER_CONTOUR_TRIGS
--sp to bulk edit many triggers at once
--NO ERROR HANDLING!
AS 
    DECLARE
        @sql VARCHAR(500),
        @tableName VARCHAR(128),
        @triggerName VARCHAR(128),
        @tableSchema VARCHAR(128)

    DECLARE triggerCursor CURSOR
        FOR
    SELECT
        so_tr.name AS TriggerName,
        so_tbl.name AS TableName,
        t.TABLE_SCHEMA AS TableSchema
    FROM
        sysobjects so_tr
    INNER JOIN sysobjects so_tbl ON so_tr.parent_obj = so_tbl.id
    INNER JOIN INFORMATION_SCHEMA.TABLES t 
    ON 
        t.TABLE_NAME = so_tbl.name
   WHERE
   --here's where you want to build filters to make sure you're 
   --targeting the trigs you want edited
   --BE CAREFUL!
   --test the select statement first against sysobjects
   --to see that it returns what you expect
        so_tr.type = 'TR'
        and so_tbl.name like '%contours'
        and so_tr.name like'%location_id'

    ORDER BY
        so_tbl.name ASC,
        so_tr.name ASC

    OPEN triggerCursor

    FETCH NEXT FROM triggerCursor 
    INTO @triggerName, @tableName, @tableSchema

    WHILE ( @@FETCH_STATUS = 0 )
        BEGIN
--insert alter statement below
--watch out for cr returns and open and close qoutes!
--seems to act finicky if you don't use schema-bound naming convention
SET @sql = '
ALTER TRIGGER ['+ @tableSchema +'].['
+ @triggerName + '] ON ['+ @tableSchema +'].['
+ @tableName + ']
INSTEAD OF INSERT
AS
BEGIN
SET NOCOUNT ON; 
INSERT ['+ @tableSchema +'].['+ @tableName + '] 
(OBJECTID, Contour, Type, Shape, RuleID, Override)
SELECT 
a.OBJECTID, a.Contour, a.Type, a.Shape, a.RuleID, a.Override
FROM 
(SELECT 
OBJECTID, Contour, Type, Shape, RuleID, Override
FROM inserted)
AS a
END
'

            PRINT 'Executing Statement - '+ @sql
            EXECUTE ( @sql )
            FETCH NEXT FROM triggerCursor 
            INTO @triggerName, @tableName,  @tableSchema
        END

    CLOSE triggerCursor
    DEALLOCATE triggerCursor 
```

# python - Web.py：如何通过 web.py 发送方法信息

> ID：11173931
> 
> 赞同：0
> 
> 时间：2012-06-23T23:52:02.177
> 
> 标签：python, web.py

我需要通过 web.py 发送值方法信息。例如我有这个方法：

```
def printvalue(val1,val2):
    if val1>val2:
        print val1
    else:
        print val2

printvalue(4,5) 
```

如何`printvalue(4,5)`通过 web.py 发送？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T04:06:39.597

这是你要求的吗？

```
import web

urls = (
    '/(.*)', 'printvalue'
)
app = web.application(urls, globals())

class printvalue:        
    def GET(self, val1, val2):
        if val1>val2:
            return val1
        return return val2

if __name__ == "__main__":
    app.run() 
```

然后只需打开您的网络浏览器并转到 localhost:(您使用的端口)/?val1=100&val2=50

# c++ - glibc 检测到双重释放或损坏

> ID：11173935
> 
> 赞同：0
> 
> 时间：2012-06-23T23:52:43.990
> 
> 标签：c++, glibc

我有一个 glibc 检测到的问题。我已经研究了一种解决此问题的方法，但是似乎正确的解决方案是释放我分配的所有内容。但是，即使我这样做了，我仍然会在输出屏幕上收到内存映射打印。

```
class TestDepth{
    gameStatus temp;
public:
    TestDepth(gameStatus &currentGameState)
    {
        temp = currentGameState;

        free(&temp);
    }
}; 
```

我只在放置`temp=currentGameState`线路时收到此错误。但是，一旦我将其注释掉，它就可以正常工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T00:18:57.340

> 如您所见，我遇到了 glibc 检测到的问题。我研究了一种解决此问题的方法，但似乎正确的解决方案是释放我分配的任何内容。

你没有分配任何东西。你不应该释放任何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T08:01:59.883

`temp = currentGameState;`

这将调用`gameStatus`' 赋值运算符（默认或您的版本）。如果调用了默认赋值运算符，那么就可以完成一些明智的赋值。如果`currentGameState`对象中有一些堆资源，这是很危险的。如果有一个赋值运算符`gameStatus`，希望您已经完成了所需的深层复制。

无论哪种方式，您都不应该用于`free`解除分配对象`temp`。一个原因是这不是释放对象的正确方法。另一个原因是这可能会尝试释放未分配的东西`malloc`。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-23T23:59:38.620

你没有释放你认为你正在释放的东西。当您分配给 temp 时，您将分配给 gameStatus 的副本 - 它不是来自堆。您不是在删除作为参数传入的 GameStatus 版本，而是在删除一个副本。

跳过对 temp 的分配，然后做

```
free( &currentGameState ); 
```

# asp.net-mvc - 在路线集合中找不到路线名称

> ID：11173936
> 
> 赞同：7
> 
> 时间：2012-06-23T23:53:16.853
> 
> 标签：asp.net-mvc, asp.net-mvc-routing

我收到此错误“在路由集合中找不到名为'MemberRoute'的路由。参数名称：名称”。这是我的 Global.asax，

```
public class MvcApplication : System.Web.HttpApplication
{
    public static void RegisterRoutes(RouteCollection routes)
    {
        routes.MapRoute(
            "MemberRoute",                       // routeName
            "member/{userId}/{pseudoName}", // url
            new
            {                           // url defaults
                controller = "Member",
                action = "Index",
                userId = 0,
                pseudoName = UrlParameter.Optional
            },
            new
            {                          // url constraints
                userId = @"\d+" // must match url {userId}
            }
        );
    }

    protected void Application_Start()
    {
        AreaRegistration.RegisterAllAreas();

        FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
        RouteConfig.RegisterRoutes(RouteTable.Routes);
        BundleConfig.RegisterBundles(BundleTable.Bundles);
    }
} 
```

成员控制器，

```
public ActionResult Index(int userId, string pseudoName)
    {
        User user;
        var unitOfWork = new UnitOfWork();
        user = unitOfWork.UserRepository.GetById(userId);

        var expectedName = user.PseudoName.ToSeoUrl();
        var actualName = (pseudoName ?? "").ToLower();

        // permanently redirect to the correct URL
        if (expectedName != actualName)
            return RedirectToActionPermanent("Index", "Member", new { id = user.UserId, pseudoName = expectedName });
        return View(user);
    } 
```

呼叫者，

```
return RedirectToRoute("MemberRoute", new { userId = user.UserId, pseudoName = user.PseudoName }); 
```

为什么找不到路由名称？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-24T16:02:50.523

来发现这是由于 MVC 4 造成的，并且所有自定义路由都位于 RouteConfig.cs 文件中的 App_Start 文件夹中。当我打开 Global.asax.cs 时没有 RegisterRoutes 方法，所以我自己添加了它并添加了我的自定义路由，但它不起作用。找到 RouteConfig 文件，它已经存在，RegisterRoutes 方法已经设置了默认值。在那里添加了我的自定义路线，它按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-26T04:03:30.777

当我第一次学习 MVC 时，我会尝试测试我的 [HttpGet] 操作，有时会得到这个。当我用谷歌搜索错误消息时，我没有得到任何帮助。

然后才意识到错误消息中缺少的是 POST 路由，而且我还没有在我的控制器中创建 [HttpPost] 操作，只有 [HttpGet] 一个。

我希望这可以帮助别人。

# c# - 如何在 C# 中从多个 exe 创建设置？

> ID：11173944
> 
> 赞同：2
> 
> 时间：2012-06-23T23:55:43.887
> 
> 标签：c#, installation

我可以从 c# 创建设置文件，但我想进行多个设置步骤。例如，用户分别安装第一个安装程序，然后安装第二个安装程序。

任何人都可以给我任何建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T01:15:58.523

您需要创建一个引导程序。

一种解决方案是使用[Burn](http://wix.sourceforge.net/)

另一个使用[MsBuild：](http://codeprairie.net/blogs/chrisortman/archive/2008/04/16/using-msbuild-to-create-a-bootstrapper-for-you-installer.aspx)

# python - Python：分离模块中的异常工作错误

> ID：11173945
> 
> 赞同：0
> 
> 时间：2012-06-23T23:56:25.843
> 
> 标签：python, exception, exception-handling, error-handling, python-3.x

我创建了新的异常类，我喜欢给它表示错误，就像在 OSError 类中一样。这是我想要的：

```
>>> raise(MyError(1, 'info'))
MyError: [Errno 1] predefined text: info 
```

我应该怎么办？如果我从基 Exception 类继承，我可以这样做吗？这是我尝试过的（使用 gnulib 的模块示例）：

```
class GNULibError(Exception):
  '''Exception handler for GNULib classes.'''

  def __init__(self, errno, errinfo=None):
    '''Each error has following parameters:
    errno: code of error; used to catch error type
      1: destination directory does not exist: <destdir>
      2: configure file does not exist: <configure.ac>
      3: selected module does not exist: <module>
      4: <cache> is expected to contain gl_M4_BASE([m4base])
      5: missing sourcebase argument
      6: missing docbase argument
      7: missing testsbase argument
      8: missing libname argument
    errinfo: additional info'''
    self.errno = errno; self.errinfo = errinfo
    self.args = (self.errno, self.errinfo)

  def __str__(self):
    errors = \
    [ # Begin list of errors
      "destination directory does not exist: %s" % self.errinfo,
      "configure file does not exist: %s" % self.errinfo,
      "selected module does not exist: %s" % self.errinfo,
      "%s is expected to contain gl_M4_BASE([%s])" % \
        (os.path.join(self.errinfo, 'gnulib-comp.m4'), self.errinfo),
      "missing sourcebase argument; cache file doesn't contain it,"
        +" so you might have to set this argument",
      "missing docbase argument; you might have to create GNULibImport" \
        +" instance with mode 0 and docbase argument",
      "missing testsbase argument; cache file doesn't contain it,"
        +" so you might have to set this argument"
      "missing libname argument; cache file doesn't contain it,"
        +" so you might have to set this argument",
      "dependencies and testflag 'default' cannot be used together",
    ] # Complete list of errors
    if not PYTHON3:
      self.message = (b'[Errno %d] %s' % \
        (self.errno, errors[self.errno -1].encode(ENCS['default'])))
    else: # if PYTHON3
      self.message = ('[Errno %d] %s' % \
        (self.errno, errors[self.errno -1]))
    return(self.message) 
```

它工作错误，只返回 Python 2 的错误名称和 Python 3 的空字符串。我怎样才能得到我想要的这种行为？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T00:50:16.383

您应该实现 __repr__ 方法而不是 __str__

[http://docs.python.org/reference/datamodel.html#object.__repr__](http://docs.python.org/reference/datamodel.html#object.__repr__)

那可行：

```
 class GNULibError(Exception):
  '''Exception handler for GNULib classes.'''

  def __init__(self, errno, errinfo=None):
    '''Each error has following parameters:
    errno: code of error; used to catch error type
      1: destination directory does not exist: <destdir>
      2: configure file does not exist: <configure.ac>
      3: selected module does not exist: <module>
      4: <cache> is expected to contain gl_M4_BASE([m4base])
      5: missing sourcebase argument
      6: missing docbase argument
      7: missing testsbase argument
      8: missing libname argument
    errinfo: additional info'''
    self.errno = errno; self.errinfo = errinfo
    self.args = (self.errno, self.errinfo)

  def __repr__(self):
    errors = \
    [ # Begin list of errors
      "destination directory does not exist: %s" % self.errinfo,
      "configure file does not exist: %s" % self.errinfo,
      "selected module does not exist: %s" % self.errinfo,
      "%s is expected to contain gl_M4_BASE([%s])" % \
        (os.path.join(self.errinfo, 'gnulib-comp.m4'), self.errinfo),
      "missing sourcebase argument; cache file doesn't contain it,"
        +" so you might have to set this argument",
      "missing docbase argument; you might have to create GNULibImport" \
        +" instance with mode 0 and docbase argument",
      "missing testsbase argument; cache file doesn't contain it,"
        +" so you might have to set this argument"
      "missing libname argument; cache file doesn't contain it,"
        +" so you might have to set this argument",
      "dependencies and testflag 'default' cannot be used together",
    ] # Complete list of errors
    if not PYTHON3:
      self.message = (b'[Errno %d] %s' % \
        (self.errno, errors[self.errno -1].encode(ENCS['default'])))
    else: # if PYTHON3
      self.message = ('[Errno %d] %s' % \
        (self.errno, errors[self.errno -1]))
    return(self.message) 
```

# ruby-on-rails - has_many ：通过与 belongs_to 混合

> ID：11173947
> 
> 赞同：1
> 
> 时间：2012-06-23T23:57:01.083
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我在以下情况下遇到问题：*用户*可以在一家或多家*公司*工作，而一家*公司*可以有零个或多个*用户*在那里工作。对我来说，“捕获”是我需要跟踪哪些*用户*负责*创建*公司记录。

**表**

```
class CreateUsers < ActiveRecord::Migration
  def change
    create_table :users do |t|
      t.string :name

      t.timestamps
    end
  end
end

class CreateCompanies < ActiveRecord::Migration
  def change
    create_table :companies do |t|
      t.integer :user_id
      t.string :name

      t.timestamps
    end
  end
end

class CreateWorks < ActiveRecord::Migration
  def change
    create_table :works do |t|
      t.integer :user_id
      t.integer :company_id

      t.timestamps
    end
  end
end 
```

**楷模**

```
class User < ActiveRecord::Base
  attr_accessible :name

  has_many :companies

  has_many :works
  has_many :companies, :through => :works

end

class Company < ActiveRecord::Base
  attr_accessible :name, :user_id

  belongs_to :user

  has_many :works
  has_many :users, :through => :works

end

class Work < ActiveRecord::Base
  attr_accessible :company_id, :user_id

  belongs_to :user
  belongs_to :company

end 
```

我必须如何处理才能创建公司记录（如果它不存在），在**公司表中注册创建者的 *user_id* 并在****工作**表中创建关联？

这个想法是稍后创建一个表单，当前用户可以在其中选择他/她的工作地点（如果公司已经存在）或创建公司记录并注册协会。

# java - jboss 服务器已启动。但显示 java.net.bind 异常；地址已被使用

> ID：11173952
> 
> 赞同：0
> 
> 时间：2012-06-23T23:57:48.713
> 
> 标签：java, jboss

我正在尝试启动我的本地 jboss(4.0.1) 服务器，然后修改适合我的环境的 run.bat 文件，并将 jndi 数据源配置到本地服务器（这里我的数据源是远程 MSSQL Server 数据库）。我看到 jboss 服务器已启动，上面还显示“java.net.bind 异常；端口已在使用中”。更改端口号后也得到相同的响应。然后我发现 java.exe 在同一个端口上运行。我关闭了那个（java.exe）应用程序再次启动了服务器，但响应没有变化

在这里，当我们尝试启动服务器时，无论我们给 jboss 的端口号是什么，java.exe 在启动服务器时都会使用它。你能帮忙让它运行吗

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T00:08:46.777

1）请发布确切的错误信息

2) 获取[TcpView](http://technet.microsoft.com/en-us/sysinternals/bb897437.aspx)的副本，除了运行“netstat -a”

3) 检查防火墙问题（尤其是 Windows 防火墙）

4）阅读此线程：

*   [https://community.jboss.org/thread/59995](https://community.jboss.org/thread/59995)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T13:34:09.847

JBOSS 使用了很多端口，哪个端口是它抱怨的端口号？你在同一台机器上有多个IP地址吗？

# c++ - 随机二叉树中的插入函数

> ID：11173956
> 
> 赞同：0
> 
> 时间：2012-06-23T23:58:28.933
> 
> 标签：c++, binary-tree

我在 C++ 中的这个二叉树中的插入函数有问题。节点已正确插入，直到我需要再次向右侧或左侧添加节点。该函数认为我在左侧或右侧都没有任何节点，因为我已经在这些地方插入了节点。

这是我的代码：

```
void insert(string data)
{    
    srand(time(NULL));
    int r;
    node *aux=head;
    node *n=new node(data);
    if (head==NULL)
    {
        head =n;
        return;
    }

    while (aux!=NULL)
    { 
        r=rand()%100;
        if (r>50)
        {
            cout<<"\nRandom is "<<r<<", Therefore we have to go to the right."<<endl;
            aux=aux->right;  
        }
        else
        {   
            cout<<"\nRandom is "<<r<<", Therefore we have to go to the left."<<endl;
            aux=aux->left;
            if (aux!=NULL)
            {
                cout<<aux->getdata()<<endl;
            }
        }
    }

    aux=n;
    cout<<"\nWe insert "<<aux->getdata()<<endl;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T00:22:28.100

这是对您的代码的轻微修改：

```
void insert(string data)
      {    srand(time(NULL));
           int r;
           node *aux=head;
           node *n=new node(data);
           if(head==NULL){
                          head =n;
                          return;
                          }

       while(aux!=NULL) // We could put while(true) here.
       { 
                       r=rand(); // Modulo is a somehow slow operation
                       if((r  & 1 )== 0) // This is much faster. It checks if r is even
                       {  cout<<"\nRandom is "<<r<<", which is even therefore we have to go to the right."<<endl;
                          if ( aux->right == NULL) // We found an empty spot, use it and break
                          {
                              aux->right = n; break;
                          }
                          else // else move to the right child and continue
                          {
                              aux=aux->right;  
                              cout<<aux->getdata()<<endl;
                          }
                       }
                       else
                       {   
                           cout<<"\nRandom is "<<r<<", which is odd Therefore we have to go to the left."<<endl;
                          if ( aux->left == NULL) // We found an empty spot, use it and break
                          {
                              aux->left = n; break;
                          }
                          else // else move to the left child and continue
                          {
                              aux=aux->left;  
                              cout<<aux->getdata()<<endl;
                          }

                       }
       }
       cout<<"\nWe insert "<<n->getdata()<<endl;

  } 
```

主要原因是您滥用了辅助功能。这是一个示例，希望能帮助您识别错误：

```
node * aux = head; // suppose head doesn't have any child node
node * n = new node(data);

aux = aux->left; // Set aux to point on the left child of head
aux = n; // Set aux to point on n

cout << aux == NULL?"Aux is null":"Aux is not null" << endl;
cout << head->left == NULL?"Left is null":"Left is not null" << endl; 
```

此代码应返回：

```
Aux is not null
Left is null 
```

原因是当我们将**n**分配给**aux**时，我们只是告诉**aux**指向**n**而不是指向左侧节点。我们没有将**n**指定为 head 的左孩子。

您还可以通过将 aux 声明为节点指针的指针来解决此问题。

```
node * * aux = &head; 
```

# programming-languages - 是否有您在编程中不应该使用的名称列表？

> ID：11173960
> 
> 赞同：0
> 
> 时间：2012-06-23T23:59:04.110
> 
> 标签：programming-languages

在创建模型或变量时，网络上是否有不应该使用的项目列表？

例如，如果我想创建公寓列表，将模型命名为类似`Property`的名称将来会出现问题并且也会令人困惑，因为`property`它是一个内置的 Python 函数。

我确实尝试过用谷歌搜索这个，但什么都想不出来。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T00:09:43.313

一般来说，编程语言有“保留词”或“关键字”，你要么不能使用，要么在某些情况下应该远离它们。[对于 Python，您可以在此处](http://docs.python.org/reference/lexical_analysis.html#keywords)找到该列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T07:29:42.403

关于命名的规则和约束取决于编程语言。标识符/名称的绑定方式取决于语言语义及其[范围规则](http://en.wikipedia.org/wiki/Scope_%28computer_science%29)：标识符/名称将根据范围绑定到不同的元素。作用域通常是词法的（即静态的），但有些语言具有动态作用域（lisp 的一些变体）。

如果名称不同，则范围界定不会混淆。如果标识符/名称在跨范围内重复使用，则标识符/名称可能会掩盖另一个。这称为[阴影](http://en.wikipedia.org/wiki/Variable_shadowing)。这是混乱的根源。

某些保留名称（即关键字）具有特殊含义。可以简单地禁止此类关键字作为其他元素的名称，也可以不禁止。

For instance, in Smallatalk `self` is a keyword. It is still possible to declare a temporary variable `self`, though. In the scope where the temporary variable is visible, `self` resolves to the temporary variable, not the usual self that is receiver of the message.

Of course, shadowing can happen between regular names.

Scoping rules take types into consideration as well, and [inheritance might introduce shadows](http://docstore.mik.ua/orelly/java/exp/ch05_05.htm).

Another source of confusion related to binding is [Method Overloading](http://en.wikipedia.org/wiki/Function_overloading). In statically typed languages, which method is executed depends on the static types at the call site. In certain cases, [overloading makes it confusing to know which method is selected](http://www.informit.com/articles/article.aspx?p=31551&seqNum=4). Both Shadowing and Overloading should avoided to avoid confusions.

If your goal is to translate Python to Javascript, and vice versa, I guess you need to check the scoping rules and keywords of both languages to make sure your translation is not only syntactically correct, but also semantically correct.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T00:11:34.590

根据*上下文*，大多数自然语言中的大多数单词都可以具有不同的含义。这就是为什么我们使用*说明符*来明确单词的含义。如果在任何情况下您认为某些特定标识符可能会造成混淆，您可以添加一个说明符以使其清晰。例如`ObjectProperty`，可能与房地产无关，即使在*处理*房地产的应用程序中也是如此。

您提出的案例与使用没有附加上下文的通用标识符没有什么不同。例如，一个名为`limit`or的变量`length`在不同的程序中可能具有完全不同的含义。只需使用有意义的标识符并广泛*记录*其含义即可。在您自己的代码库中保持一致也是可取的。不要用永远不会完整的禁止术语列表使您的生活复杂化，只会使编程变得更加困难。

明显的例外是您选择的编程语言保留的字词 - 但是再一次没有像样的编译器允许您使用它们......

# php - PHP：如何消除 CSV 文件输出的引号？

> ID：11173969
> 
> 赞同：1
> 
> 时间：2012-06-24T00:00:49.240
> 
> 标签：php, csv

这段代码：

```
<?php $curl=curl_init();
curl_setopt ($curl,CURLOPT_URL,"http://download.finance.yahoo.com/d/quotes.csv?s=XIN&f=l1c1p2rj1y&e=.csv");
curl_setopt ($curl,CURLOPT_HEADER,0);
ob_start();
curl_exec ($curl);
curl_close ($curl);
$data=ob_get_clean();
$data = explode(",",$data);
foreach ($data as $results)
echo "<td>$results</td>";
?> 
```

在我的浏览器中产生这些结果： 2.80 +0.02 "+0.72%" 1.85 204.2M 1.44

我怎样才能让上面的 PHP 代码消除 "+0.72%" 周围的引号，所以最终结果只是： 0.72% ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T00:02:32.527

使用[`fopen`](http://php.net/fopen)and[`fgetcsv`](http://php.net/fgetcsv)读取 csv 数据，而不是自己分解行

编辑：

如果您正在处理您已经获得的字符串`curl`，您可以使用以下方法解析**一行**csv 数据[`str_getcsv`](http://php.net/str_getcsv)：

```
$values = str_getcsv($line); 
```

请注意，它仅适用于单行输入，因此如果您的输入有多行，则需要先用换行符将其分解...

# git - 提交未显示在 github 上

> ID：11173971
> 
> 赞同：25
> 
> 时间：2012-06-24T00:01:30.737
> 
> 标签：git, github

*   我在 github 上创建了一个新的存储库。
*   我选择了添加 README.md 的选项之一。
*   然后我 cd 进入我硬盘上的项目。
*   我运行了 git init: Initialized empty Git repository in /Users/myusername/github/myproject/.git/
*   我跑了“git add”。然后是“git commit -m 'project files'”，它的回应是：

    ```
    [master (root-commit) ca52fe0] project files
     981 files changed, 257939 insertions(+), 0 deletions(-)
     create mode 100644 index.php
     create mode 100644 license.txt
     create mode 100644 readme.html
     create mode 100644 wp-activate.php
     ... 
    ```

*   然后我运行“git remote add origin [https://github.com/myusername/myproject.git](https://github.com/myusername/myproject.git) ”
*   然后我跑了“git push origin master”
*   然后我运行“git status”，它没有说什么要提交

但是我查看 repo 并且我的“我的项目文件”提交不存在。于是我跑了 git pull 得到了这个：

```
You asked me to pull without telling me which branch you
want to merge with, and 'branch.master.merge' in
your configuration file does not tell me, either. Please
specify which branch you want to use on the command line and
try again (e.g. 'git pull <repository> <refspec>').
See git-pull(1) for details. 
```

然后 git push 并再次检查，我的提交仍然不在 github repo 上。我唯一能看到提交的是当我运行“git log”时：

```
MacBook-myproject myusername$ git log
commit ca52fe090e6dbf1b6aa6ee51c3283efbe7549904
Author: User <myemailaddress>
Date:   Sat Jun 23 19:22:05 2012 -0400
project files 
```

我尽我所能遵循 github 的指示。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-24T01:23:24.020

在您的 Github 存储库创建之后（即您可以在 Github 上查看它），那么您应该已经拥有：

### 1\. 本地仓库设置：

```
git init 
```

### 2\. 创建并添加到存储库的 README 文件：

```
touch README.md
git add README.md 
git commit -m 'first commit' 
```

### 3.远程调用`origin`链接到您的存储库：

```
git remote add origin https://github.com/username/repo.git 
```

### 4\. 初始推送，将您的本地 README 复制到您的 Github 存储库：

```
git push -u origin master 
```

如果您可以在 Github 上查看您的存储库，则说明它已成功创建。在这种情况下，您可能已经使用在线编辑工具在 Github 上编辑了您的 README 文件，这导致您的远程和本地分支出现分歧。

在您可以`push`对 Github 进行本地更改之前，您需要`fetch`或`pull`您的远程更改，在本地合并更改（使用 自动合并`pull`），然后`push`到远程。

请参阅 Pro Git：[从遥控器中获取和拉取](http://git-scm.com/book/ch2-5.html#Fetching-and-Pulling-from-Your-Remotes)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-24T07:26:48.123

当您在 GitHub 上创建存储库时，您选择了包含 README.md 文件的远程初始化。下一步是`git clone https://github.com/username/repo.git`在您的终端中运行。此时，您在 GitHub 存储库上有一个本地副本，因此您将移入您的项目文件。`git add *`然后运行。`git commit -m 'first commit'` _ `git push origin master`您的更改现在应该在 GitHub 上可见。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-11-30T11:23:00.407

**在 git commit 之后，您需要推送更改**

`git push origin master to push`在主分支

`git push origin branch_name to push`在二级分支

一个分支的完整工作流程：

```
git checkout -b aosp_in_docker //checkout a branch and switch into it
git branch // to check all branches current branch will have * sign
git status //to check status of file
git add .  //add untraced files
git commit -a -m 'added a docker container'
git push origin aosp_in_docker // push changes
git staus // check if success 
```

# java - 获取 EntityManager 的不同方法

> ID：11173974
> 
> 赞同：34
> 
> 时间：2012-06-24T00:02:13.330
> 
> 标签：java, jpa, entitymanager

我看到的用于创建 EntityManager 的惯用语是这样的：

```
public class BaseDao {
    private static final String PERSISTENCE_UNIT_NAME = "Employee";

    EntityManagerFactory factory = Persistence.createEntityManagerFactory(PERSISTENCE_UNIT_NAME);

    public EntityManager getEntityManager() {
      return factory.createEntityManager();
    } 
} 
```

**然后它是这样使用的：**

```
Employee emp = new Employee();
emp.setName("Joe M");
getEntityManager().persist(emp); 
```

**问题是为什么不这样做：**

```
public class BaseDao{
    private static final String PERSISTENCE_UNIT_NAME = "Employee";
    EntityManagerFactory factory = Persistence.createEntityManagerFactory(PERSISTENCE_UNIT_NAME);
    private EntityManager entityManager = null;

public void setEntityManger() {
    EntityManagerFactory factory = Persistence.createEntityManagerFactory(PERSISTENCE_UNIT_NAME);
    this.entityManager = factory.createEntityManager();

    }

    public EntityManager getEntityManager() {
        return this.entityManager;
    }
} 
```

换句话说，是否需要始终让实体经理通过`factory.createEntityManager()`？还是可以将其创建为实例（甚至静态）变量并像那样检索？

澄清一下，我说的是不使用 EJB 或 Spring 容器的环境。

谢谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-24T01:12:53.367

有**两种创建`EntityManager`**实例的方法。

一种方法是用于 SDK 应用程序，我在单元测试中经常使用这种方法。这就是您的示例中的内容：

```
EntityManagerFactory factory = 
  Persistence.createEntityManagerFactory(PERSISTENCE_UNIT_NAME); 
```

**在企业应用程序中，您让容器为您创建它们**并在需要时注入它们。

`EntityManager`只是一个 JDBC 连接的包装器。它的重量很轻，可以在没有性能损失的情况下创建和销毁。

请记住，`EntityManager`它不是线程安全的，因此如果您有一个实例，您可能需要同步对它的访问。有关详细信息，请参阅[交易基础知识](http://docs.jboss.org/hibernate/orm/4.0/hem/en-US/html/transactions.html#transactions-basics)。

* * *

这是我的做法（大致）：

```
public class BaseDao{
  private static final String PERSISTENCE_UNIT_NAME = "Employee";
  private static EntityManagerFactory factory = 
    Persistence.createEntityManagerFactory(PERSISTENCE_UNIT_NAME);

  public void create(MyEntiy person){
    EntityManager em = factory.createEntityManager();
    em.getTransaction().begin();
    // do what ever you need 
    em.getTransaction().commit();
    em.close();
  }

  // add more methods to the dao.
} 
```

一旦你得到这个原型并准备好，你就可以使用一个通用的 DAO。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-24T11:49:12.650

今天你可能应该看看 spring-data 和 @PersistanceUnit 来管理你的 EntityManager。

EntityManager 不仅仅是 JDBC 连接的包装器。它定义了持久性上下文的范围，它定义了提交事务时（当您将查询刷新到数据库时）应该执行的工作单元。在持久性上下文中，您还可以保证数据库中的给定实体将产生相同的 Java 对象，无论您是直接加载它，还是通过另一个实体的 OneToMany 关系访问它。

关于在非弹簧设置中获取 EntityManagerFactory 的原始问题。你只需调用

```
Persistence.createEntityManagerFactory(PERSISTENCE_UNIT_NAME); 
```

此方法是一种静态工厂方法，取决于您的 JPA 实现，您可以为相同的 PU 获取相同的实例，或者为包装底层持久性会话（每个 PU 有一个）的浅包装器。

# android - 在新项目 Android 中使用预构建的共享库 (.so)

> ID：11173982
> 
> 赞同：0
> 
> 时间：2012-06-24T00:02:57.090
> 
> 标签：android, android-ndk

我如何在不重新编译本机代码和所有东西的情况下做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T01:04:37.467

看起来你可能正在对这个库做 jni。如果是这种情况，java 包和类名需要在 jni 函数的名称中进行编码，因此您必须执行以下操作：

*   始终为实际与本机库接口的 java 包和类文件保持相同的名称。这*不需要*与 APK 的主包名称匹配。您可能希望将此作为原生库的一种包装器。

*   或者您可以使用新的包名称创建一个新的本机库，它只是一个通过原始函数名称调用原始库的包装器。这将比以前的想法更复杂一些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T00:18:22.487

创建`libs/<arch>`文件夹，并将so文件放在那里。Eclipse 或 ant 构建系统会自动将其拾取并打包到 apk 文件中。

代替`<arch>`使用、或- 之一`armeabi`，具体取决于 .so 文件的构建方式。`armeabi-v7a``x86``mips`

# android - Android - Phonegap - 转换为 Dalvik 格式失败，错误 1

> ID：11173984
> 
> 赞同：4
> 
> 时间：2012-06-24T00:03:12.410
> 
> 标签：android, dalvik

我安装了这个：

[https://github.com/mwbrooks/cordova-plugin-menu](https://github.com/mwbrooks/cordova-plugin-menu)

并已`cordova 1.8.1`安装。

我复制`"libs/phonegap-1.0.0.jar"`到`ANDROID_PROJECT/libs.`

当我尝试在模拟器中运行该应用程序时，我得到：

```
"Conversion to Dalvik format failed with error 1" 
```

我相信这与图书馆的冲突有关，但我不知道该怎么做才能消除错误？

请帮忙。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-24T16:26:47.667

从 2.0.0 升级到 2.1.0 后，我发现自己处于同样的情况

首先，确保您已通过从旧 PhoneGap 版本中删除 JAR 并添加新版本来重新配置构建路径。

此时我开始收到 Dalvik 错误。清理构建环境没有帮助。

所以我从 libs 目录中删除了旧的 jar，瞧，它起作用了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-04-19T16:31:55.127

项目 -> 关闭自动构建。然后手动构建项目并清理。然后导出已签名的项目。问题已经消失了。

# jquery - 我可以在不使用 Ajax 提交的情况下设置请求标头来呈现 javascript 吗？

> ID：11173987
> 
> 赞同：0
> 
> 时间：2012-06-24T00:03:31.210
> 
> 标签：jquery

我在页面上有以下链接：

```
<a href="/items/14" class="srh" data-method="delete" rel="nofollow"><img alt="Delete" src="/images/delete.png?1335803006" /></a> 
```

请注意类 'srh' 在单击时会触发以下 jQuery 脚本。

```
$('.srh').click(function() {
    xhr.setRequestHeader("Accept", "text/javascript");
}); 
```

我的意图是设置请求标头以在下一页上呈现文本/javascript，但我收到 406 错误。我的 jQuery 语法错了吗？在页面被调用之前是否没有足够的时间来设置标题？设置标题后，我应该让 jQuery 脚本执行页面请求吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T00:20:21.887

如果服务器以 406 响应您，则意味着它无法生成具有您请求的媒体类型的响应正文。

您要求服务器生成具有`text/javascript`媒体类型的响应。您的服务器说“我不能那样做”并返回 406。

检查响应标头以查看您的服务器愿意接受哪些类型。一个好的服务器会告诉你。

# html - 试图堆叠一个 就在图像旁边

> ID：11173988
> 
> 赞同：0
> 
> 时间：2012-06-24T00:03:46.793
> 
> 标签：html, css

所以我有一个文章标签，它基本上由一个超链接、一个图像、一个按钮和一个旁白组成。

图像内联渲染图像，并在旁边堆叠旁边。为了能够做到这一点，这就是我正在做的事情：

```
<article class = "friends_for_job"> 
  <header><a href = "\">Title</a></header>
  <img src = "*.jpg"></img>
  <aside>
     <p> info info info </p>
     <p> info info info </p>
   </aside>
   <input type = "button" value = "share">
</article> 
```

上面的css是：

```
.friend_for_job img{
display:block 
}
.friend_for_job aside{
display:inline;
} 
```

现在这对我的 img 产生了预期的效果，将其内联堆叠，但对 side 标记没有这样的效果，并且它在 HTML 标记下方呈现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T00:32:20.337

这是你的目标吗？

```
.friends_for_job img { float:left; }
.friends_for_job aside { display:block; } 
```

...根据口味添加边距和填充。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T00:33:39.213

首先，您有一个错字：您的班级名为“ **friend_for_job** ”，但您使用的是“ **friendS_for_job** ”。而且你可以简单地使用它：

```
<style>
.friends_for_job img {
    float:  left; 
}
.friends_for_job aside {
    float:left;
}
</style>

<article class="friends_for_job"> 
  <header>
    <a href="">Title</a>
  </header>
  <img src="http://lorempixel.com/output/nature-q-c-640-480-7.jpg" alt="">
  <aside>
     <p> info info info </p>
     <p> info info info </p>
   </aside>
   <input type = "button" value = "share">
</article> 
```

# node.js - Express.js 使用会话时没有响应

> ID：11173989
> 
> 赞同：4
> 
> 时间：2012-06-24T00:04:22.060
> 
> 标签：node.js, session, redis, express

这是我的应用程序：

```
var express = require('express'),
    app = express.createServer(),
    RedisStore = require('connect-redis')(express);

app.configure (function(){
    app.use (express.logger({ format: ":method :url" }));
    app.use (express.bodyParser());
    app.use (express.cookieParser());
    app.use (express.session({ store: new RedisStore, secret: "totally random string" }));
});
app.configure ('development', function () {
    console.log ("Development mode.");
});
app.configure ('production', function () {
    console.log ("Production mode.");
});

app.get ('/', function (req, res) {
    res.contentType("text/html");
    res.send("hello", 200);
    res.end();
})

console.log ("Listening to *:"+8006);
app.listen (8006); 
```

当我使用 localhost:8006/ 时，它会挂在浏览器中

知道有什么问题吗？我可能遗漏了 1 个小细节。
当该`app.use (express.session...`行被注释掉时它可以工作

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T00:56:38.867

删除`res.end()`它，它会停止挂起并呈现页面。

```
var express = require('express'),
    app = express.createServer();

app.configure (function(){
    app.use (express.logger({ format: ":method :url" }));
    app.use (express.bodyParser());
    app.use (express.cookieParser());
});

app.configure ('development', function () {
    console.log ("Development mode.");
});
app.configure ('production', function () {
    console.log ("Production mode.");
});

app.get ('/', function (req, res) {
    res.contentType("text/html");
    res.send("hello");
})

console.log ("Listening to *:"+8006);
app.listen (8006); 
```

# google-chrome - img 元素的内容属性

> ID：11173991
> 
> 赞同：13
> 
> 时间：2012-06-24T00:04:28.413
> 
> 标签：google-chrome, css, image, web-standards

在检查 Chrome 开发工具时，我注意到以下 CSS 片段：

```
img {
    content: url(image-src.png);
} 
```

它在 Chrome 中完美运行（请参见下面的屏幕截图）。

![Chrome 开发工具](../Images/c22f8574c200336be5647c070c3a2ae6.png)

这允许我通过 CSS 定义 <img> 标签的 src 属性。在 Firefox 中不起作用。到目前为止，我认为不可能通过 css 直接修改 src 属性，我还没有发现有人在谈论这个。**那么，这只是 Chrome 中的一个专有添加，还是 Chrome 实现了 W3C 草案或类似的东西，我不知道？**

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-24T05:19:28.537

[`content`](http://www.w3.org/TR/CSS2/generate.html#propdef-content)`:before`CSS 2.1中[定义](http://www.w3.org/TR/CSS2/generate.html#propdef-content)[的](http://www.w3.org/TR/CSS2/generate.html#propdef-content)属性仅适用于`:after`伪元素。通过 CSS 规则，您可以为任何元素指定任何属性，但规范对哪些属性“适用于”（即，影响）各种元素有限制。

[CSS3 Generated and Replaced Content Module](http://www.w3.org/TR/css3-content/)是一个工作草案，将属性[`content`描述](http://www.w3.org/TR/css3-content/#content)为适用于所有元素。它有一个用图像替换元素内容的示例`h1`，当然也可以对`img`元素执行相同的操作。

但这只是一个工作草案。关于 CSS 实施状态的常用资源[QuirksMode.org CSS info](http://www.quirksmode.org/css/contents.html)和[Caniuse.com](http://caniuse.com/)不说明情况；他们只描述了对`content`for `:before`and的支持`:after`（除了 IE 7 和更早版本之外，这是相当普遍的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-16T10:02:51.290

**现在你可以这样做了：** [http ://chabada.esy.es/tests/0004.html](http://chabada.esy.es/tests/0004.html)

```
<style>
  .redcross {
    background: transparent url('redcross.png') no-repeat;
    display: block;
    width:  24px;
    height: 24px;
    }
</style>

<img class="redcross"> 
```

# sql-server - SQL Server 2008 存储过程性能问题

> ID：11173994
> 
> 赞同：1
> 
> 时间：2012-06-24T00:05:58.727
> 
> 标签：sql-server, stored-procedures, database-performance, timeoutexception

嗨我有一个存储过程

```
 ALTER PROCEDURE [dbo].[usp_EP_GetTherapeuticalALternates]
    (
      @NDCNumber CHAR(11) ,
      @patientid INT ,
      @pbmid INT
    )
AS 
    BEGIN
        TRUNCATE TABLE TempTherapeuticAlt
        INSERT  INTO TempTherapeuticAlt
                SELECT  --PR.ProductID AS MedicationID ,
                        NULL AS MedicationID ,
                        PR.ePrescribingName AS MedicationName ,
                        U.Strength AS MedicationStrength ,
                        FRM.FormName AS MedicationForm ,
                        PR.DEAClassificationID AS DEASchedule ,
                        NULL AS NDCNumber
        --INTO    #myTemp
                FROM    DatabaseTwo.dbo.Product PR
                        JOIN ( SELECT   MP.MarketedProductID
                               FROM     DatabaseTwo.dbo.Therapeutic_Concept_Tree_Specific_Product TCTSP
                                        JOIN DatabaseTwo.dbo.Marketed_Product MP ON MP.SpecificProductID = TCTSP.SpecificProductID
                                        JOIN ( SELECT   TCTSP.TherapeuticConceptTreeID
                                               FROM     DatabaseTwo.dbo.Marketed_Product MP
                                                        JOIN DatabaseTwo.dbo.Therapeutic_Concept_Tree_Specific_Product TCTSP ON MP.SpecificProductID = TCTSP.SpecificProductID
                                                        JOIN ( SELECT
                                                              PR.MarketedProductID
                                                              FROM
                                                              DatabaseTwo.dbo.Package PA
                                                              JOIN DatabaseTwo.dbo.Product PR ON PA.ProductID = PR.ProductID
                                                              WHERE
                                                              PA.NDC11 = @NDCNumber
                                                             ) PAPA ON MP.MarketedProductID = PAPA.MarketedProductID
                                             ) xxx ON TCTSP.TherapeuticConceptTreeID = xxx.TherapeuticConceptTreeID
                             ) MPI ON PR.MarketedProductID = MPI.MarketedProductID
                        JOIN ( SELECT   P.ProductID ,
                                        O.Strength ,
                                        O.Unit
                               FROM     DatabaseTwo.dbo.Product AS P
                                        INNER JOIN DatabaseTwo.dbo.Marketed_Product
                                        AS M ON P.MarketedProductID = M.MarketedProductID
                                        INNER JOIN DatabaseTwo.dbo.Specific_Product
                                        AS S ON M.SpecificProductID = S.SpecificProductID
                                        LEFT OUTER JOIN DatabaseTwo.dbo.OrderableName_Combined
                                        AS O ON S.SpecificProductID = O.SpecificProductID
                               GROUP BY P.ProductID ,
                                        O.Strength ,
                                        O.Unit
                             ) U ON PR.ProductID = U.ProductID
                        JOIN ( SELECT   PA.ProductID ,
                                        S.ScriptFormID ,
                                        F.Code AS NCPDPScriptFormCode ,
                                        S.FormName
                               FROM     DatabaseTwo.dbo.Package AS PA
                                        INNER JOIN DatabaseTwo.dbo.Script_Form
                                        AS S ON PA.NCPDPScriptFormCode = S.NCPDPScriptFormCode
                                        INNER JOIN DatabaseTwo.dbo.FormCode AS F ON S.FormName = F.FormName
                               GROUP BY PA.ProductID ,
                                        S.ScriptFormID ,
                                        F.Code ,
                                        S.FormName
                             ) FRM ON PR.ProductID = FRM.ProductID
                            WHERE   
                            ( PR.OffMarketDate IS NULL )
        OR ( PR.OffMarketDate = '' )
        OR (PR.OffMarketDate = '1899-12-30 00:00:00.000')
        OR ( PR.OffMarketDate <> '1899-12-30 00:00:00.000'
             AND DATEDIFF(dd, GETDATE(),PR.OffMarketDate) > 0
           )
                GROUP BY PR.ePrescribingName ,
                        U.Strength ,
                        FRM.FormName ,
                        PR.DEAClassificationID
               -- ORDER BY pr.ePrescribingName

        SELECT  LL.ProductID AS MedicationID ,
                temp.MedicationName ,
                temp.MedicationStrength ,
                temp.MedicationForm ,
                temp.DEASchedule ,
                temp.NDCNumber ,
                fs.[ReturnFormulary] AS FormularyStatus ,
                copay.CopaTier ,
                copay.FirstCopayTerm ,
                copay.FlatCopayAmount ,
                copay.PercentageCopay ,
                copay.PharmacyType,
                dbo.udf_EP_GetBrandGeneric(LL.ProductID) AS BrandGeneric
        FROM    TempTherapeuticAlt temp
                OUTER APPLY ( SELECT TOP 1
                                        ProductID
                              FROM      DatabaseTwo.dbo.Product
                              WHERE     ePrescribingName = temp.MedicationName
                            ) AS LL
                OUTER APPLY [dbo].[udf_EP_tbfGetFormularyStatus](@patientid,
                                                              LL.ProductID,
                                                              @pbmid) AS fs
                OUTER APPLY ( SELECT TOP 1
                                        *
                              FROM      udf_EP_CopayDetails(LL.ProductID,
                                                            @PBMID,
                                                            fs.ReturnFormulary)
                            ) copay
        --ORDER BY LL.ProductID
        TRUNCATE TABLE TempTherapeuticAlt
    END 
```

在我的开发服务器上，每个表中都有 63k 的数据

所以这个过程大约需要 30 秒才能返回结果。

在我的生产服务器上，它正在超时，或者需要超过 1 分钟。我想知道我的生产服务器表中有 14 亿条记录，

这可能是一个原因。

如果是这样，可以做什么，我在表上有所有必需的索引。

任何帮助将不胜感激。

谢谢

执行计划 [http://www.sendspace.com/file/hk8fao](http://www.sendspace.com/file/hk8fao)

# 重大泄漏

```
OUTER APPLY [dbo].[udf_EP_tbfGetFormularyStatus](@patientid,
                                                              LL.ProductID,
                                                              @pbmid) AS fs 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T00:24:47.707

一些可能有帮助的策略：

1.  删除第一个 ORDER BY 语句，那些对复杂查询的杀手应该是不必要的。

2.  使用 CTE 将查询分解为可以单独处理的较小部分。

3.  减少第一组 JOIN 中的嵌套

4.  提取第二组和第三组连接（GROUPED 连接）并将它们插入到临时索引表中，然后再连接和分组所有内容。

5.  您没有包含`function1`or的定义`function2`——自定义函数通常是性能问题可以隐藏的地方。

如果没有看到执行计划，就很难看出具体问题可能出在哪里。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-24T00:29:39.823

您有一个从 4 或 5 个表中选择数据的查询，其中一些表选择了多次。如果不深入分析您要实现的目标以及实际的表结构，真的很难说如何改进。

数据大小绝对是一个问题；我认为很明显，需要处理的数据越多，查询时间就越长。一些一般性建议... 直接运行查询并检查执行计划。它可能会揭示瓶颈。然后检查统计信息是否是最新的。此外，请查看您的表，在某些情况下，分区可能会有很大帮助。此外，您可以尝试更改表并在 PK 上创建聚集索引（除非另有说明，否则默认情况下会这样做），而是在其他列上创建聚集索引，这样您的查询将受益于某些物理记录顺序。注意：只有在您完全确定自己在做什么时才这样做。

最后，尝试重构您的查询。我觉得有一种更好的方法可以获得所需的结果（对不起，不了解表结构和预期结果我无法说出确切的解决方案，但是同一个表和一堆派生表的多个连接对我来说并不好看)

# java - 测试所有级别的访问修饰符控制

> ID：11173997
> 
> 赞同：0
> 
> 时间：2012-06-24T00:06:18.313
> 
> 标签：java

我正在实现所有不同类型的访问方法和变量的访问方式。对于每个级别的控件，我都有一个包，其中包含带有方法和变量的类、一个子类和一个带有 main 的类。我也有一个主包，其中包含一个主包，它也用于测试类及其子类在其自己的包之外的访问。我使用包含具有公共方法和变量的类的包实现了这种做法，但是在访问“来自同一包中的子类”和“来自包外的子类”时遇到了麻烦（这将是包含该类的主包main 之前提到的）我的问题是，当子类及其超类可以时，我如何才能从另一个包中访问子类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T00:35:44.713

顶级类只有两个访问级别可用：`public`和包私有（无修饰符）。这些是对顶级类有意义的唯一可能性：

*   `private`没有意义，因为只有它才能看到的类有什么用？
*   `protected`与 package-private 相同，只是扩展类也具有可见性。这是一个只对顶级课程的*成员*有意义的概念。

# javascript - 在谷歌街景api中解析url

> ID：11173999
> 
> 赞同：0
> 
> 时间：2012-06-24T00:06:36.870
> 
> 标签：javascript, google-maps, google-maps-api-3

这是 Street View API V3 的一个工作示例：

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8"/>
<title>Google Maps JavaScript API Example: Street View Events</title>
<link href="/maps/documentation/javascript/examples/default.css" rel="stylesheet" type="text/css" />
<script src="https://maps.googleapis.com/maps/api/js?sensor=false"
        type="text/javascript"></script>
<script type="text/javascript">

  var cafe = new google.maps.LatLng(37.869085,-122.254775);

  function initialize() {

    var panoramaOptions = {
      position: cafe,
      pov: {
        heading: 270,
        pitch: 0,
        zoom: 1
      },
      visible: true
    };
    var panorama = new google.maps.StreetViewPanorama(document.getElementById("pano"), panoramaOptions);

    google.maps.event.addListener(panorama, 'pano_changed', function() {
        var panoCell = document.getElementById('pano_cell');
        panoCell.innerHTML = panorama.getPano();
    });

    google.maps.event.addListener(panorama, 'links_changed', function() {
        var linksTable = document.getElementById('links_table');
        while(linksTable.hasChildNodes()) {
          linksTable.removeChild(linksTable.lastChild);
        };
        var links =  panorama.getLinks();
        for (var i in links) {
          var row = document.createElement("tr");
          linksTable.appendChild(row);
          var labelCell = document.createElement("td");
          labelCell.innerHTML = "<b>Link: " + i + "</b>";
          var valueCell = document.createElement("td");
          valueCell.innerHTML = links[i].description;
          linksTable.appendChild(labelCell);
          linksTable.appendChild(valueCell);
        }
    });

    google.maps.event.addListener(panorama, 'position_changed', function() {
        var positionCell = document.getElementById('position_cell');
        positionCell.firstChild.nodeValue = panorama.getPosition();
    });

    google.maps.event.addListener(panorama, 'pov_changed', function() {
        var headingCell = document.getElementById('heading_cell');
        var pitchCell = document.getElementById('pitch_cell');
        headingCell.firstChild.nodeValue = panorama.getPov().heading;
        pitchCell.firstChild.nodeValue = panorama.getPov().pitch;
    });
}
</script>
</head>
<body onload="initialize()">
  <div id="pano" style="width: 425px; height: 240px;float:left"></div>
  <div id="panoInfo" style="width: 425px; height: 240 px;float:left">
  <table>
  <tr>
    <td><b>Position</b></td><td id="position_cell">&nbsp;</td>
  </tr>
  <tr>
    <td><b>POV Heading</b></td><td id="heading_cell">270</td>
  </tr>
  <tr>
    <td><b>POV Pitch</b></td><td id="pitch_cell">0.0</td>
  </tr>
  <tr>
    <td><b>Pano ID</b></td><td id="pano_cell">&nbsp;</td>
  </tr>
  <table id="links_table">
  </table>
  </table>
  </div>
</body>
</html> 
```

我整天都在搜索如何将谷歌地图街景网址解析为谷歌地图街景嵌入 javascript，但我似乎在任何地方都找不到解决方案，需要解析如下内容：[http ://maps.google .com/?ll=37.588929,-87.337506&spn=1.201384,1.766052&t=m&z=9&layer=c&cbll=37.588929,-87.337506&panoid=C0tiQOjXuQtNmZRPkHbVxw&cbp=12,156.39,,0,-4.](http://maps.google.com/?ll=37.588929,-87.337506&spn=1.201384,1.766052&t=m&z=9&layer=c&cbll=37.588929,-87.337506&panoid=C0tiQOjXuQtNmZRPkHbVxw&cbp=12,154.39,,0,-4.06)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T00:08:15.410

有这个查询字符串库：[https](https://github.com/visionmedia/node-querystring) ://github.com/visionmedia/node-querystring 。在 node.js 和浏览器中工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T06:59:15.430

pano position=37.588929,-87.337506 "ll=" 看起来 "cbp=" 会给你航向、俯仰和缩放

[http://www.geocodezip.com/v3_GoogleEx_streetview-simpleA.htm](http://www.geocodezip.com/v3_GoogleEx_streetview-simpleA.htm)

有关它们的含义，请参见[mapki.com 上的此页面。](http://mapki.com/wiki/Google_Map_Parameters#Street_View)

更新（mapki.com 似乎消失了）：根据这个[网站](http://www.seomoz.org/ugc/everything-you-never-wanted-to-know-about-google-maps-parameters)：

“cbp=”的 5 个部分是窗口大小、航向（方位）、倾斜、缩放和俯仰（按此顺序）。