# StackOverflow 问答 10985000-10985999

# java - Connect 4应该如何设计一个好的评价函数？

> ID：10985000
> 
> 赞同：5
> 
> 时间：2012-06-11T17:46:05.720
> 
> 标签：java, heuristics, evaluation-function

我有一个“连接 4”游戏的 java 实现（**列和行数可变**）。

该实现使用（根据用户的选择）Mini-max 的 Mini-max 算法，带有 Alpha-beta 剪枝，最大搜索深度为**maxDepth**

我现在的问题是为**板的状态设计一个好的评估函数**（这是在 maxDepth 处返回的值）。

该值介于**-100（最差选择，对应于失败的情况）**和**100（最佳选择，对应于获胜的情况）**之间，其中**0**应该是**“平局”情况**。

其实我已经实现了两个功能（我报告伪代码，因为代码很长）

1)

*   不赢/不输

--> 如果表已满 ==> 绘制 (0)

--> 如果表未满 ==> 不确定情况 (50)

*   赢

--> 如果我赢了：100

--> 如果对手获胜：-100

2)

```
Of me:
- InARow[0] = maximum number of pieces in a HORIZONTAL in a row
- InARow[1] = maximum number of pieces in a VERTICAL in a row
- InARow[2] = maximum number of pieces in a DIAGONAL (ascending) in a row
- InARow[3] = maximum number of pieces in a DIAGONAL (descending) in a row
Of the opponent
- InARow2[0] = maximum number of pieces in a HORIZONTAL in a row
- InARow2[1] = maximum number of pieces in a VERTICAL in a row
- InARow2[2] = maximum number of pieces in a DIAGONAL (ascending) in a row
- InARow2[3] = maximum number of pieces in a DIAGONAL (descending) in a row

value = (100* (InARow[0] + InARow[1] + InARow[2] + InARow[3]) )/16 - (100* (InARow2[0] + InARow2[1] + InARow2[2] + InARow2[3]) )/16 
```

我需要设计**第三个（如果可能更好）**功能。有什么建议吗？

先感谢您。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-13T09:07:21.567

只需计算每个玩家仍然可以制作的行中可能的 4 的数量，然后从彼此中减去。

例如，两个玩家都以 0 分开始`7*4 (horizontal) + 4*7 (vertical) + 4*4 (diagonal up) + 4*4 (diagonal down)`。如果红色在左下角放一个，那么黄色就会失去 0 分`1 + 1 + 1 + 0 = 3`。但是如果红色把一个放在中间，黄色就会失去 0 分`4 + 1 + 1 + 1 = 7`。

当然，如果任何玩家获胜，则其他玩家的得分为`-infinity`，无论上述系统如何。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-11T17:57:25.603

你已经解决了基本情况：我的胜利 = 100 分，我的失败 = -100，平局 = 0。你可以杀死的“不确定”情况，它并不反映董事会的“善良”。所以现在你需要填补空白。您要考虑并为其赋值的案例：

*   我连续有 X （如果我连续有 3 个，那比连续只有两个要好 - 你的函数应该有利于添加更长的行而不是更短的行）

*   我的对手连续有X（同样，他/她连续的越多，我们越糟糕）

*   数一数您要填写多少行（放置一块并形成 2 排 3 比放置一块并仅形成一排 3 更好）
*   数一数你挡了多少排（类似地，如果你可以放下一块并挡住两个对手的 3 排，那比挡住 2 排的单排要好）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-29T11:42:49.830

这是连接 4 的两个独立评估函数

1.  一个基本评估函数如另一个答案中所建议的那样，我们可以计算玩家仍然可以连续制作的可能 4 的数量，并将其从对手中减去。与只有 1 个图块的块相比，您可以为已经具有 3 个图块的块赋予不同的权重或重要性。
2.  另一个更强大的评估功能可以使用威胁的概念来构建。威胁是一个正方形，当对手将瓷砖掉在那里时，连接 4。您可以简单地返回每个玩家威胁数量的差异，但我们可以通过实际过滤无用威胁（例如仅高于对手威胁的威胁，或高于双方威胁的所有威胁）甚至分配奖金来做得更好对于某些威胁（例如一列中最低的威胁或同一玩家的 2 个连续威胁）。

对于更大的项目，可以手动调整权重或自学。

# python - 设置 django-nonrel？

> ID：10985002
> 
> 赞同：0
> 
> 时间：2012-06-11T17:46:11.813
> 
> 标签：python, django, nosql, django-nonrel

我正在尝试将[django-nonrel](http://django-mongodb.org/topics/setup.html)设置到新的 virtualenv 中，但出现错误消息：`OSError: [Errno 2] No such file or directory`.

我无法从错误日志中准确判断缺少哪个文件或目录。请问有人能建议可能出了什么问题吗？

bitbucket 文件似乎存在：

```
(nonrel)delirium:nonrel anna$ pip install hg+https://bitbucket.org/wkornewald/django-nonrel
Downloading/unpacking hg+https://bitbucket.org/wkornewald/django-nonrel
  Cloning hg https://bitbucket.org/wkornewald/django-nonrel to /var/folders/q5/_0_8qh59147_0vmr8tm1_mq80000gn/T/pip-3Trv56-build
  Error [Errno 2] No such file or directory while executing command /usr/local/bin/hg clone --noupdate -q https://bitbucket.org/wkornewald/django-nonrel /var/folders/q5/_0_8qh59147_0vmr8tm1_mq80000gn/T/pip-3Trv56-build
Exception:
Traceback (most recent call last):
  File "/Users/anna/Dropbox/nonrel/lib/python2.7/site-packages/pip-1.1-py2.7.egg/pip/basecommand.py", line 104, in main
    status = self.run(options, args)
  File "/Users/anna/Dropbox/nonrel/lib/python2.7/site-packages/pip-1.1-py2.7.egg/pip/commands/install.py", line 245, in run
    requirement_set.prepare_files(finder, force_root_egg_info=self.bundle, bundle=self.bundle)
  File "/Users/anna/Dropbox/nonrel/lib/python2.7/site-packages/pip-1.1-py2.7.egg/pip/req.py", line 985, in prepare_files
    self.unpack_url(url, location, self.is_download)
  File "/Users/anna/Dropbox/nonrel/lib/python2.7/site-packages/pip-1.1-py2.7.egg/pip/req.py", line 1103, in unpack_url
    return unpack_vcs_link(link, loc, only_download)
  File "/Users/anna/Dropbox/nonrel/lib/python2.7/site-packages/pip-1.1-py2.7.egg/pip/download.py", line 294, in unpack_vcs_link
    vcs_backend.unpack(location)
  File "/Users/anna/Dropbox/nonrel/lib/python2.7/site-packages/pip-1.1-py2.7.egg/pip/vcs/__init__.py", line 233, in unpack
    self.obtain(location)
  File "/Users/anna/Dropbox/nonrel/lib/python2.7/site-packages/pip-1.1-py2.7.egg/pip/vcs/mercurial.py", line 81, in obtain
    call_subprocess([self.cmd, 'clone', '--noupdate', '-q', url, dest])
  File "/Users/anna/Dropbox/nonrel/lib/python2.7/site-packages/pip-1.1-py2.7.egg/pip/__init__.py", line 221, in call_subprocess
    cwd=cwd, env=env)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/subprocess.py", line 672, in __init__
    errread, errwrite)
  File "/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/subprocess.py", line 1202, in _execute_child
    raise child_exception
OSError: [Errno 2] No such file or directory
Storing complete log in /Users/anna/.pip/pip.log 
```

出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T19:15:51.440

我建议从 github 获取最新版本

[https://github.com/django-nonrel/django-nonrel](https://github.com/django-nonrel/django-nonrel)

你想使用 git 来下载它而不是 pip。

# java - android If else 语句

> ID：10985006
> 
> 赞同：0
> 
> 时间：2012-06-11T17:46:26.373
> 
> 标签：java, android

所以我的问题是，当我使用 if 语句来确定我是否击中怪物并存活或击中怪物并死亡时，我遇到了一个奇怪的声音问题（它会非常快地重复击中的声音）。使用经典的马里奥逻辑，如果我降落在顶部，我会活着，否则我会死。在我添加了两个不同的 if 语句之前，我没有遇到任何问题。如果您需要更多信息，请告诉我。我认为我的问题是我如何使用 if 语句。

```
private void checkGhostCollisions() {
    int len = ghosts.size();
    for (int i = 0; i < len; i++) {
        Ghost ghost = ghosts.get(i);
        if (hero.position.y < ghost.position.y) {
            if (OverlapTester.overlapRectangles(ghost.bounds, hero.bounds))
                hero.hitGhost();
                listener.hit();
        } else {
        if(hero.position.y > ghost.position.y) 
             if (OverlapTester.overlapRectangles(hero.bounds, ghost.bounds)) {
                 hero.hitGhostJump();
                 listener.jump();
            break;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-11T17:49:58.143

我怀疑这是问题所在：

```
if (hero.position.y < ghost.position.y) {
    if (OverlapTester.overlapRectangles(ghost.bounds, hero.bounds))
        hero.hitGhost();
        listener.hit();
} 
```

*注意内部* 语句缺少大括号`if`，这意味着如果满足第一个`if`条件，`listener.hit()`则*始终*调用。我怀疑你的意思是：

```
if (hero.position.y < ghost.position.y) {
    if (OverlapTester.overlapRectangles(ghost.bounds, hero.bounds)) {
        hero.hitGhost();
        listener.hit();
    }
} 
```

从中吸取两个教训：

*   始终正确缩进您的代码，如果您感到困惑，请让您的 IDE 为您缩进。
*   如果你*总是*使用带有`if`块的大括号，它会减少这种事情发生的机会。

编辑：请注意，`if`每种情况下的内部条件是相同的，这意味着您可以将此代码简化为：

```
if (OverlapTester.overlapRectangles(hero.bounds, ghost.bounds)) {
    if (hero.position.y < ghost.position.y) {
        hero.hitGhost();
        listener.hit();
    } else {
        hero.hitGhostJump();
        listener.jump();
        break;
    }
} 
```

请注意，这确实会稍微改变与`hero.position.y`完全相同的情况`ghost.position.y`- 您应该考虑在这种情况下您想要发生的事情。

# android - 使用 LauncherShortcuts 在主屏幕上显示 Android 应用程序图标

> ID：10985007
> 
> 赞同：0
> 
> 时间：2012-06-11T17:46:26.913
> 
> 标签：android, android-intent, android-activity

当用户打开主屏幕时，我试图将我的应用程序图标/快捷方式放在 Android 主屏幕上。我已将此活动添加到我的应用程序中：

[http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/app/LauncherShortcuts.html](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/app/LauncherShortcuts.html)

接下来我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T18:11:42.963

由于主屏幕是它自己的应用程序，因此只有用户可以向其添加应用程序快捷方式/小部件。虽然您可能能够弄清楚如何使用默认的主屏幕应用程序来做到这一点，但使用各个制造商完成的所有自定义主屏幕，您将很难做到这一点。充其量您可以告知用户如何在启动时执行某些操作（并希望他们遵循您的指示）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T17:52:53.680

如果您想要一个图标在主屏幕上开始您的活动。您可以将其添加到该活动的意图过滤器

```
<category android:name="android.intent.category.LAUNCHER" />

<action android:name="android.intent.action.MAIN" /> 
```

# excel - 使用 Selenium RC、Excel（数据驱动）和 SeleniumException

> ID：10985009
> 
> 赞同：1
> 
> 时间：2012-06-11T17:46:28.933
> 
> 标签：excel, selenium, selenium-rc, data-driven-tests

我现在正在从事一个自动化项目，该项目是在特定站点上创建一个帐户。有不同的规则需要检查。需要有一组数据缺少某些必填字段，用于在帐户上创建的电子邮件地址已在系统上使用，最后一组是可以创建帐户的位置。该过程的一般流程是：

1.  运行 SeleniumRC
2.  从 ExcelFile 获取数据

    Excel 数据由不同的集合组成。A 组：缺少必填项 B 组：电子邮件地址已被使用 B 组：完整/正确的数据

3.  去网站。

4.  输入所有数据。

    如果设置 A ：

    ```
    Then creation will not process.
    It will provide output:
        Row Number - Error 
    ```

    如果设置 B ：

    ```
    Then creation will not process.
    It will provide output:
        Row Number - Error 
    ```

    如果设置 C ：

    ```
    It will create account. 
    ```

    提供屏幕截图盎司登录

5.  返回第 2 步，直到在 Excel 文件中找到的所有行都被完全检查。

6.  输出将被放置在另一个 Excel 文件中

我能够运行该过程，但是如果我为 Excel 文件中的每个条目使用一个标志。这确实违背了检查创建过程是否按预期工作的目的。我的 Selenium 命令是这样的：

```
 public void test_CreateAccount() throws Exception {

    //Some code to data from Excel Sheet
    totalrows = s.getRows();
    int i = 1;

    while(i<totalrows){
    //Some command to set data to string names
    RowNum = s.getCell(0, i).getContents();
    FName = s.getCell(1, i).getContents();

    selenium.open // Go to a specific site
    selenium.click("css=a > img"); // click create account
                    selenium.waitForPageToLoad("60000");
                    selenium.type("name=q1557", FName);
                    selenium.type("name=q1558", LName);
                    selenium.type("name=q1578", JobTitle);
                    selenium.type("name=q1579", email1);
                    selenium.type("name=email_confirm", email2);
                    selenium.type("name=q1583", phone);
                    selenium.type("name=q1584", ext);
                    selenium.type("name=q1585", fax);
                    selenium.type("name=q1587", company);
                    selenium.select("name=q1588", organization);
                    selenium.type("name=q1591", address1);
                    selenium.type("name=q1592", address2);
                    selenium.type("name=q1593", city);
                    selenium.select("name=q1594",state);
                    selenium.type("name=q1595", other);
                    selenium.type("name=q1598", zip);
                    selenium.select("name=q1596", country);
                    selenium.type("name=q1599", password1);
                    selenium.type("name=password_confirm", password2);
                    selenium.type("name=q1600", question);
                    selenium.type("name=q1601", answer);
    selenium.click("name=submit_signup");    // click submit

    i = i + 1;
    }

} 
```

当我运行上面的命令时，这确实有效。如果数据是 SET A 或 B，则发生错误。如果数据是 SET C，那么它将创建然后完成。

为了检查 Excel 文件中的所有数据或继续到总行结束，我放置了一个标志。

在命令中间，我放置了类似的东西

```
if(flag=1){ //input process only until submit button. }else
if(flag=2){ //input process only until submit button. }else{ create
} 
```

我尝试对 SeleniumException 使用 try 和 catch，但它仍然不起作用。您能给我提供有关如何执行此操作的任何想法吗？

# php - Zend _forward() 在 preDispatch() 中不起作用？

> ID：10985011
> 
> 赞同：2
> 
> 时间：2012-06-11T17:46:53.213
> 
> 标签：php, zend-framework, execution-time

我目前正在从我的 Zend MVC 应用程序构建一个控制器，它只能用作 json 服务来填充页面。我想限制用户只使用 GET 方法来访问这个端点（出于某些安全原因）。

我[在 Zend 中关注了这篇文章 _forward() 不起作用？](https://stackoverflow.com/questions/5749619/forward-in-zend-does-not-work)但无法开始工作。

我正在使用 preDispatch 来检测非获取请求，并希望转发到同一控制器中的 errorAction。我的代码看起来像这样，

```
public function preDispatch(){
    $this->_helper->layout()->disableLayout();
    $this->_helper->viewRenderer->setNoRender();
    //Restrict this Controller access to Http GET method
    if(!($this->getRequest()->isGet())){
        return $this->_forward('error');
    }
}

public function errorAction(){
    $this->getResponse()->setHttpResponseCode(501);
    echo "Requested Method is not Implemented";
} 
```

当我使用发布请求测试页面时，它会抛出

> PHP致命错误：超过30秒的最大执行时间

我得到了它的工作

```
$this->_redirect("service/error"); 
```

想知道这是否是处理这种情况的唯一/最佳方法。

任何帮助将非常感激。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T18:35:32.880

The reason that calling `_forward` doesn't work is because the request method doesn't change so you end up in an infinite loop trying to forward to the `error` action since the request is always `POST`.

`_forward` works by modifying the module, controller, and action that will be called when the request is dispatched, `_redirect` actually returns a 302 redirect and results in an additional HTTP request by the browser.

Either method is okay, but I'd prefer to go with `_forward` since it won't require an additional HTTP request (but you still guarantee the `POST` request is denied).

This code should work for you:

```
 if(!($this->getRequest()->isGet())){
        // change the request method - this only changes internally
        $_SERVER['REQUEST_METHOD'] = 'GET';

        // forward the request to the error action - preDispatch is called again
        $this->_forward('error');

        // This is an alternate to using _forward, but is virtually the same
        // You still need to override $_SERVER['REQUEST_METHOD'] to do this
        $this->getRequest()
             ->setActionName('error')
             ->setDispatched(false);
    } 
```

# java - 如何制作一个 Eclipse 插件来运行独立的应用程序

> ID：10985013
> 
> 赞同：0
> 
> 时间：2012-06-11T17:47:03.193
> 
> 标签：java, eclipse, eclipse-plugin

我想创建一个 Eclipse 插件，当它被激活时（通过一些额外的菜单或上下文菜单）会启动一个独立的 Java 应用程序，该应用程序是作为插件包的一部分下载的。我是 eclipse 插件开发的新手，所以我不太确定我需要做什么来实现这一点。

是否可以在插件的源代码中包含独立应用程序的文件并让插件运行 shell 代码来执行应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T18:02:02.540

我相信您所要做的就是通过执行相应的命令

```
Process p = new ProcessBuilder().command("your shell command here").start() 
```

这将创建一个新进程并运行您拥有的任何程序。我认为 Eclipse 将允许您这样做（有很多插件可以启动 Web 服务器等等）。然而，除非你做一些特别的事情（比如为网络服务器实现一个新的运行配置类型或类似的东西），这似乎是个坏主意。

# html - 创建一个完美的可扩展 div (jsFiddle)

> ID：10985015
> 
> 赞同：1
> 
> 时间：2012-06-11T17:47:21.093
> 
> 标签：html, css

我目前正在设计我的网站，我希望能够在不打乱网站元素流程的情况下调整/缩放网页的大小。我知道正确使用 % 符号可以解决大部分的流程问题，而且它似乎适用于除文本之外的所有内容。如果我有一个简单的菜单，比如下面的 jsfiddle。菜单 div 的宽度可以说是 %30。我希望菜单容器中的文本可以缩放到大小，而不需要环绕或输入新行，这似乎是我无法避免的。下面的段落中仍然存在同样的问题。有没有办法做到这一点？

```
<html>
<head>
<title>Scalable</title>
</head>
<body>

<div style="height:800px; border:1px solid green; width:900px; margin-left:auto; margin-right:auto; " >
    <img src="http://files.prof-web-diego.webnode.pt/200000028-04da905d3d/Oxford_Silhouette_Web_Banner.jpg" style="width:50%; height:auto;"/>
    <div style="float:right; width:30%;  border:2px solid blue; font-size:11px;">
        <a href="#">Home<a> |
        <a href="#">Store<a> |
        <a href="#">Contact<a> |
        <a href="#">About<a> |
        <a href="#">Pictures<a> |
        <a href="#">Entertainment<a> |
    </div>

    <div style="border:1px solid #ddd; width:65%;">
    <p>
    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vivamus vehicula velit in lectus dapibus porta. Sed pulvinar ultrices ipsum vitae gravida. Vestibulum at metus dolor. Nunc pulvinar nisl nec libero sodales faucibus. Quisque tincidunt risus vitae risus tempor viverra. Vestibulum interdum eros in tellus blandit vulputate. Suspendisse eget ante purus, sit amet semper purus. Nam lacinia magna a mi euismod sit amet rhoncus dolor congue. Mauris pharetra laoreet accumsan. Ut quis velit ac nisl rutrum varius nec nec orci.

Vestibulum quis tellus neque, a scelerisque est. In varius ante eget purus fringilla in aliquet massa convallis. Vestibulum in scelerisque ligula. Nulla a neque nibh. Maecenas tristique, odio nec scelerisque tincidunt, sem orci tempus nulla, eu tincidunt dolor sapien ut lorem. Donec aliquet, eros nec blandit adipiscing, leo est malesuada nulla, vel adipiscing sem risus quis ante. Proin rutrum ultrices dolor, quis auctor sem feugiat sit amet. Morbi in tellus nisl, et iaculis turpis. Cras ligula velit, pharetra vitae imperdiet nec, commodo quis erat. Aenean iaculis nunc nec nunc dignissim aliquam. In venenatis, orci vitae pretium elementum, lorem lorem sagittis est, a consectetur est lacus accumsan elit. Vestibulum iaculis hendrerit elit, nec vulputate nunc ornare sit amet. Fusce nisi risus, auctor vitae pellentesque ut, pulvinar nec nisi. Aenean nec nunc augue, non imperdiet arcu. Integer interdum orci non diam tristique ut tristique risus adipiscing. Vestibulum tellus orci, lobortis vel sollicitudin vel, gravida sed dui.

Vestibulum eu dui ni
    </p>

    </div>

</div>

</body>
</html>​ 
```

jsFiddle

[http://jsfiddle.net/6UyYa/](http://jsfiddle.net/6UyYa/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T21:22:25.290

您可以采取两种方法：

1.  使用视口元标记将页面缩放到设备的宽度（在浏览器支持的范围内）
2.  响应式设计：使用一系列 CSS 媒体查询来根据设备的大小调整内容。

响应式设计的两个版本：

1.  根据设备的大小更改页面布局（列数和页面上内容的流动方式），并可选择缩放某些内容。[波士顿环球报](http://www.bostonglobe.com/)就是一个很好的例子。
2.  保持布局不变并统一缩放所有内容。@rlemon 提到了一个很好的[链接](http://www.alistapart.com/articles/responsive-web-design/)。我是通过阅读 Ethan Marcotte 的电子书[Responsive Web Design](http://www.abookapart.com/products/responsive-web-design)了解到的（不幸的是，这本电子书不是免费的）。这种方法相对困难，并且限制了您的选择。

在响应式设计的两个版本中，对内容的更改完全由 CSS 媒体查询（而不是 JavaScript）触发。并且 HTML 不会改变。只有 HTML 的样式会发生变化。

第一种类型的响应式设计似乎比第二种类型使用得更广泛。

* * *

对于上面列出的第二种响应式设计，针对不同设备尺寸的一系列媒体查询以 % 为 body 标签设置了基本字体大小，并且内容的所有尺寸单位都以 em 或 % 而不是 px 指定（使用绝对不使用 px 作为内容本身）。所有内容都根据使用的媒体查询进行缩放。

此外，在第二种类型的响应式设计中，很少或根本不使用背景图像（至少，根据我的经验）。img 标签用于几乎所有图像，通过 CSS 按比例缩放 img 标签的特殊技巧。以下代码按比例将图像缩放到其父容器的全宽：

```
<img class="my-image" src="image.png"/>   <!-- No width or height attribute -->

.my-image {max-width:100%; width:100%;} 
```

# solr - How to build a dictionary for spellchecking in Solr?

> ID：10985023
> 
> 赞同：1
> 
> 时间：2012-06-11T17:47:57.630
> 
> 标签：solr, spell-checking

I'm trying to add spell checking to an existing Solr index.

I've added the following to the `solrconfig.xml`

```
<searchComponent name="spellcheck" class="solr.SpellCheckComponent">
  <str name="queryAnalyzerFiedlType">textSpell</str>
  <lst name="spellchecker">
    <str name="name">my_spell</str>
    <str name="field">my_field</str>
    <str name="buildOnOptimize">true</str>
    <str nmae="spellcheckIndexDir">./spellchecker_my_spell</str>
  </lst>
</searchComponent> 
```

When I try to build the index with `http://<myserver>:4103/my_index/select?&spellcheck=true&spellcheck.build=true&spellcheck.dictionary=cn_spell`

I don't find any evidence that any dictionary is being built, either in the response, or in the file system.

What am I missing?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T01:22:23.763

I forgot to add the query type to the query string. Adding `&qt=dismax` worked for me, since the spellcheck was the `last-components` of my dismax handler.

# javascript - 我将如何使这条线工作？

> ID：10985024
> 
> 赞同：1
> 
> 时间：2012-06-11T17:48:10.600
> 
> 标签：javascript, html, cordova, canvas, html5-canvas

我正在制作一个程序，该程序根据用户输入的数据绘制一条线。（它基于斜率形式/方程）。我正在使用 Canvas 绘制我的方程式。我一直有一个问题，以一种让它适应缩放的方式绘制方程（这是基于输入的数字有多大。）

当画布缩放时，如何使图形方程（线）适合图形？

这是我的代码：

```
var c=document.getElementById("graph_");
var ctx=c.getContext("2d");
graph_.style.backgroundColor="white";

// This is used to define the parameters of the canvas. Variables a and b are the x and y intercepts of the linear function.

var z0=Math.max(Math.abs(a),Math.abs(b));
var z=Math.round(z0);           
var z1=Math.round(z);
var z2=z*2
// alert(z1);           
// alert(z2);`

//The code below is used to properly scale the canvas and lines so they can accomodate larger numbers   
var scale = 2*z/360;
var offsetX = 150;
var offsetY = 75

ctx.translate((-c.width /2 * scale) + offsetX,(-c.height / 2 * scale) + offsetY);                   
ctx.scale(scale,scale);    

        var lw = scale/2
        var xnew = 360/2+360/2*a
        var ynew = 360/2-360/2*b
        alert(xnew);    
        alert(ynew);

        //The two lines drawn below are the axises of the graph

                    ctx.lineWidth = 2/lw;
                        ctx.beginPath()
                    ctx.moveTo(150, 40000*-1);
            ctx.lineTo(150, 40000);
        ctx.closePath();

        ctx.lineWidth = 1/lw;
        ctx.moveTo(400000*-1, 75);
        ctx.lineTo(40000, 75);
        ctx.strokeStyle = "#8B8682";
        ctx.stroke();
        ctx.closePath();

        //var xmax = 400000 - b 
        //var xmax1 = xmax/s
        //var ymax =    400000*s
        //var ymax1 = ymax + b

// The code below graphs the equation. 

          ctx.beginPath();
          ctx.lineWidth = 1/lw;
                  ctx.moveTo(xnew, 180);
          ctx.lineTo(180, ynew);
          // ctx.lineTo(xmax, ymax)
          // ctx.lineTo(xmax*-1, ymax*-1)
          ctx.strokeStyle = "red";
          ctx.stroke(); 
```

下面是整个页面的代码： 正如你所看到的，如果画线的话，它并没有变得足够长，就像它应该的那样。（线性线总是无限的，所以线应该穿过整个图，而不是一小部分。）

```
var canwith=360
var canheight=360

// alert(window.innerWidth)

 function doSolve() {
var s=''
var x1 = document.getElementById('x1').value
var y1 = document.getElementById('y1').value
var x2 = document.getElementById('x2').value 
var y2 = document.getElementById('y2').value 
var m 
var b
var a 

    try {
        if ((x2 - x1)==0) {
            m='Undefined'
            b='Undefined'
            a=x1 
        } else {
            m = (y2 - y1)/(x2 - x1)
            b = (y2-x2*m)
            a = (-b/m)
        }

        s += 'Coordinates are: ('
        s += x1
        s += ','
        s += y1
        s += '),('
        s += x2
        s += ','
        s += y2
        s += ')'
        s += '<br>Slope:'
        s += m
        s +='<br>y intercept:'
        s += b
        s += '<br>x intercept:' 
        s += a

        if (m=='undefined') {
            s += '<br>Equation: x = ' + x1      
        } else {
            s += '<br>Equation: y = '
            if (m!=0) {
                if (m!=1) {
                    s += m + 'x' 
                } else {
                    s += 'x' 
                }
            }
            if (b!=0) {
                if (b>0) {
                    s += ' + ' + b
                } else {
                    s += ' - ' + b*-1
                }
            }
        }

        document.getElementById('outputx').innerHTML=s

    } catch (e) {alert(e.message)}  

    try {

        var c=document.getElementById("graph_");
        var ctx=c.getContext("2d");
        graph_.style.backgroundColor="white";
        var z0=Math.max(Math.abs(a),Math.abs(b));
        var z=Math.round(z0);           
        var z1=Math.round(z);
        var z2=z*2
        // alert(z1);   
        // alert(z2);

           var scale = 2*z/360;
           var offsetX = 150;
           var offsetY = 75

    ctx.translate((-c.width /2 * scale) + offsetX,(-c.height / 2 * scale) + offsetY);                   
    ctx.scale(scale,scale);    

        var lw = scale/2
        var xnew = 360/2+360/2*a
        var ynew = 360/2-360/2*b
        alert(xnew);    
        alert(ynew);

        ctx.lineWidth = 2/lw;
        ctx.beginPath()
        ctx.moveTo(150, 40000*-1);
        ctx.lineTo(150, 40000);
        ctx.closePath();

        ctx.lineWidth = 1/lw;
        ctx.moveTo(400000*-1, 75);
        ctx.lineTo(40000, 75);
        ctx.strokeStyle = "#8B8682";
        ctx.stroke();
        ctx.closePath();

        var xmax = 400000 - b 
        var xmax1 = xmax/s
        var ymax =  400000*s
        var ymax1 = ymax + b

          ctx.beginPath();
          ctx.lineWidth = 1/lw;
          ctx.moveTo(xnew, 180);
          ctx.lineTo(180, ynew);
          ctx.lineTo(xmax, ymax)
          ctx.lineTo(xmax*-1, ymax*-1)
          ctx.strokeStyle = "red";
          ctx.stroke();                                         

    } catch (e) {alert(e.message)} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T01:54:20.147

我无法处理您的代码，所以我根据您的视觉要求进行了自己的实现，希望这能解决问题：

```
try {
    var c = document.getElementById("graph_");
    var ctx = c.getContext("2d");
    graph_.style.backgroundColor="white";

    var w = c.width;
    var h = c.height;

    var xAxisSize = 40;
    var yAxisSize = 40;    

    var scaleFactorX = w / xAxisSize;
    var scaleFactorY = -(h / yAxisSize);        

    var offsetX = -10;
    var offsetY = -10;

    ctx.scale(scaleFactorX, scaleFactorY);
    ctx.translate((xAxisSize / 2) + offsetX, -((yAxisSize / 2) + offsetY));

    ctx.lineWidth = 3 / scaleFactorX;
    ctx.beginPath();
    ctx.moveTo(-xAxisSize, 0);
    ctx.lineTo( xAxisSize, 0);
    ctx.strokeStyle = "#8B8682";        
    ctx.stroke();
    ctx.closePath();

    ctx.lineWidth = 3 / scaleFactorY;
    ctx.beginPath();
    ctx.moveTo(0, -yAxisSize);
    ctx.lineTo(0,  yAxisSize);
    ctx.strokeStyle = "#8B8682";
    ctx.stroke();
    ctx.closePath();

    ctx.lineWidth = 3 / scaleFactorY;
    ctx.beginPath();
    var xx1 = -xAxisSize - offsetX;
    var yy1 = m * xx1 + b;
    var xx2 =  xAxisSize + offsetX;
    var yy2 = m * xx2 + b;        
    ctx.moveTo(xx1, yy1);
    ctx.lineTo(xx2,yy2);
    ctx.strokeStyle = "red";
    ctx.stroke();
    ctx.closePath();  
} catch (e) { 
    alert(e.message) 
} 
```

![在此处输入图像描述](../Images/488fc3216726801b7ba4e29d580fd29a.png)

# c++ - 选择时如何删除 QGraphicsItem 周围的边框？

> ID：10985028
> 
> 赞同：5
> 
> 时间：2012-06-11T17:48:21.320
> 
> 标签：c++, qt, qgraphicsitem

非常基本的问题，但我无法通过谷歌找到解决方案。在 QT 中，当一个图形项目被选中时，它周围有一个边框。我想知道如何将这个边框设置为不可见。谢谢。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-11T19:22:54.193

内置QGraphicsItems没有禁用选择边框绘制的界面。我能想到的唯一方法是从内置项目中派生出您自己的项目并覆盖该`paint()`函数：

```
void MyRectItem::paint(QPainter *painter, const QStyleOptionGraphicsItem *option, QWidget *widget)
{
    QStyleOptionGraphicsItem myOption(*option);
    myOption.state &= ~QStyle::State_Selected;
    QGraphicsRectItem::paint(painter, &myOption, widget);
} 
```

它没有经过测试，但基本上你制作了 option 的副本并在将其传递给实际的`paint()`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-28T18:20:14.330

如果您的 QGraphicsItem 是从 QAbstractGraphicsShapeItem 派生的，那么您可以简单地禁用它的笔，例如：

```
myShape->setPen(Qt::NoPen); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-07-21T13:58:17.333

对于那些试图使用 python 解决的人：

```
def paint(self, painter, option, a):
    option.state = QStyle.State_None
    return super(MyClassName, self).paint(painter,option) 
```

# ruby-on-rails - ActiveMerchant 购买功能 rails 3.2.5 mass-assign

> ID：10985029
> 
> 赞同：0
> 
> 时间：2012-06-11T17:48:22.177
> 
> 标签：ruby-on-rails, activemerchant, mass-assignment

我正在使用 Rails 3.2.5。遵循 Ryan Bates 教程。

[http://railscasts.com/episodes/145-integrating-active-merchant](http://railscasts.com/episodes/145-integrating-active-merchant)。我的 order.rb 有这个功能

```
 def purchase
    response = GATEWAY.purchase(price_in_cents, credit_card, purchase_options)
    transactions.create!(:action => "purchase", :amount => price_in_cents, :response => response)
    cart.update_attribute(:purchased_at, Time.now) if response.success?
    response.success?
  end 
```

由于 rails 3.2.5 使用 MassAssignmentSecurity。我收到以下错误。

```
Can't mass-assign protected attributes: action, amount, response 
```

我尝试将它们添加到 attr_accessible 列表中，但没有运气。我如何将它们添加到列表中或至少覆盖它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T18:23:53.597

请查看上一个主题：[“警告：无法批量分配受保护的属性”](https://stackoverflow.com/questions/3944288/warning-cant-mass-assign-protected-attributes)

我相信它会帮助你...

# apple-push-notifications - 发送大量 APNS（推送通知）是否需要特别高的带宽或 RAM？

> ID：10985035
> 
> 赞同：2
> 
> 时间：2012-06-11T17:49:08.043
> 
> 标签：apple-push-notifications, bandwidth, vps, ram

希望是一个相当简单的问题，尽管我还没有在任何地方找到直接的答案。

我们将很快发布我们的应用程序，推送消息都经过测试并且可以正常工作。然而，我们只在较小的范围内进行了测试。所有要发送的消息都存储在我们的 VPS 上，然后每分钟一次将它们全部一次发送出去，然后将表格截断。所以他们不是连续出去，而是分批出去。

我假设 APNS 本身可以同时处理 100,000 条消息，但是如果应用程序成功，我们的服务器是否能够发送 10k 或 100k 条消息？我必须提供的唯一信息是：

流量：300 GB

VPS CPU 上限（以 MHz 为单位）：无限制

VPS CPU：8个

VPS RAM 上限（以 MB 为单位）：512 MB RAM

然而，没有一个开发应用程序的人对服务器有太多直接的经验，所以我们不知道它是否会成为瓶颈。

提前谢谢大家。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T11:17:05.497

这在很大程度上取决于负责发送这些消息的程序。基本上它们会非常小，并且可能它们是从表中逐行加载的，之后不会存储在任何地方。这意味着您没有大量的 RAM 使用量。但是，如果程序一次加载所有这些，并且例如用 PHP 编写，那么您将遇到 RAM 使用问题。

如果您停留在流量限制之内，可以很容易地用预期消息的数量乘以消息的平均大小来计算。

CPU 很可能不会成为问题，因为您真的不处理任何东西。

尚未提及的一个问题是打开的连接数。根据更新频率以及如何/如果您在更新之间保持连接有效，如果您有 100k 用户，您可能无法仅使用 1 台服务器进行管理，因为保持打开这么多连接是不切实际的。

# html - IE9上的奇怪错误： 和rtl

> ID：10985036
> 
> 赞同：4
> 
> 时间：2012-06-11T17:49:09.377
> 
> 标签：html, css, internet-explorer, internet-explorer-9

首先，对不起我的英语不好。

我遇到了一个非常奇怪的错误，它只发生在 Internet Explorer 9 中。

这是代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"> 
    <head>
        <style type="text/css">
            html {
                direction: rtl;
            }

            ul li {
                list-style-image: url(v.gif);
                direction: rtl;
            }
        </style>
    </head>
    <body>
        <ul>
            <li>I</li>
            <li>hate</li>
            <li>IE 9</li>
        </ul>
    </body>
    </html> 
```

结果如下：

![IE 9 错误](../Images/513bc50e150198b26809a62a5e59e96e.png)

用V看图像的方向！

你可以在我的网站上看到这个错误：[www.usf.co.il](http://www.usf.co.il)

顺便说一句：它只发生在“direction：rtl”中。

有人知道这个错误吗？我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T18:16:34.117

这确实是一个奇怪的现象，它可以被归类为一个错误，因为 CSS 规范中没有任何内容建议对图像进行这种镜像。

这种现象似乎只发生在“标准模式”的 IE 9 上，而不是“怪癖模式”或以前的 IE 版本。

CSS 2.1 规范条款`direction`说：“此属性指定 Unicode 双向算法的块的基本写入方向以及嵌入和覆盖的方向（参见 'unicode-bidi'）。另外，在'text-align: justify'的情况下，它还指定了表格列布局的方向、水平溢出的方向、块中不完整的最后一行的位置等。”</p>

尽管公式有些松散，但我认为您无法将镜像读入其中。“嵌入方向”这一表述与双向嵌入（RTL 文本中的 LTR 文本，反之亦然）有关，而不是像图像这样的嵌入内容。

[IE 的 Microsoft 文档](http://msdn.microsoft.com/en-us/library/cc351024%28v=vs.85%29.aspx)似乎不包含对此功能的任何引用。

该功能可能是某人的想法，即支持 RTL 编写方式与镜像某些*字符*的方式大致相同。这不是一个疯狂的想法，但它是有害的，因为它不是基于规范并且它偏离了浏览器实践。

恐怕这是一个难以规避的错误。使用浏览器嗅探并向 IE 9 提供镜像（这样当它镜像时，您会得到正确的图像）听起来很糟糕，您还需要一种区分“标准模式”的方法。</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T09:23:26.110

我遇到了同样的问题。我当前的解决方案是创建一个反转图像并在 HTML 中执行以下操作

```
<!--[if IE 9]>
<style type="text/css">
ul li {list-style-image: url("v_reversed.gif");}
</style>
<![endif]--> 
```

有人知道IE10会发生什么吗？

# r - 在这种情况下，如何在 R 中通过扫描读取大文件（带有行名）？

> ID：10985037
> 
> 赞同：0
> 
> 时间：2012-06-11T17:49:11.107
> 
> 标签：r, statistics

我有一个文本文件，它是一个 1000 Row * 40001 Column 表。

文件的第一列是一个字符串，其他列是一些`float`数字，例如：

```
A 2 3 4.54 .... 11.23
B 6 6 7 ....    23.45 
```

我想将此文件读入一个文件，但`read.table`对于大文件似乎不是很有效，所以我认为这`scan`可能是正确的工具？

但是，`scan`默认情况下只能接受数字作为输入。如果我想要非数字作为输入，我需要更改`what`参数。但由于有 40000 多列，我无法为每个输入分配输入类型。

有谁知道如何使用它？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T18:11:10.763

如果使用 colClasses 参数，read.table 函数会变得更加高效：

```
inp <- read.table(filnam, colClasses= c(NULL, rep("numeric", 40000) ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T18:22:19.013

您可以使用`what`参数并指定类型列表（如`colClasses`）。

```
Lines <-
"A 2 3 4.54 11.23
B 6 6 7 23.45"
Data <- (scan(textConnection(Lines), what=c(list(NULL), rep(0,4))))
(Data <- do.call(cbind, Data))
#      [,1] [,2] [,3]  [,4]
# [1,]    2    3 4.54 11.23
# [2,]    6    6 7.00 23.45 
```

# java - 为 Netty FrameDecoder.decode 编码的最佳方式

> ID：10985040
> 
> 赞同：0
> 
> 时间：2012-06-11T17:49:35.180
> 
> 标签：java, netty

我在为 tcp netty 客户端编码 FrameDecoder.decode() 时遇到问题。

```
protected Object decode(ChannelHandlerContext ctx, Channel channel,
        ChannelBuffer buffer) throws Exception { 
```

在上面的签名中，缓冲区应该包含需要成帧的字节。但是为什么必须返回一个对象呢？我知道如果返回的对象是 null ，这表明这个缓冲区需要更多的数据，但是如果我返回一个包含部分帧的一些未读字节的缓冲区会发生什么？会在添加更多字节的情况下调用它吗？

假设给定的调用`decode()`有一个包含 100 个字节的缓冲区。在这 100 个中，有 2 个 25 和 55 个字节的完整帧和 20 个字节的部分帧。我可以只读取第一个完整帧（25 个字节）并返回缓冲区（其中包含 75 个字节-1 个 55 个字节的完整帧和另一个 20 个字节的部分帧）吗？这会导致下次调用解码时覆盖任何字节吗？或者我可以在下一次调用中读取下一帧（55 个字节）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T17:59:05.150

每次调用解码都会返回一帧。FrameDecoder 将继续读取并转发读取的帧，直到您返回 null。留在 FrameDecoder 中的字节将被保存，一旦收到新的 ChannelBuffer，两者将被合并，并且 FrameDecoders decode(..) 方法将再次被调用。

# c# - C#析构函数在超出范围后不调用

> ID：10985045
> 
> 赞同：3
> 
> 时间：2012-06-11T17:50:02.473
> 
> 标签：c#, scope, destructor

超出范围后我的析构函数有问题（它正在调用但经过一段时间后需要对表单进行操作，例如更改单选按钮），也许我的代码有错误。看一看：

```
namespace WindowsFormsApplication2
{
    public partial class Form1 : Form
    {

        public Form1()
        {
            InitializeComponent();
            EventLogger.Print += delegate(string output)
            { if (!textBox1.IsDisposed) this.Invoke(new MethodInvoker(() => textBox1.AppendText(output + Environment.NewLine)), null); };
        }

        private void button1_Click(object sender, EventArgs e)
        {
            TestClass test = new TestClass();
        }
    }
    public static class EventLogger
    {
        public delegate void EventHandler(string output);
        public static event EventHandler Print;
        public static void AddLog(String TextEvent)
        {
            Print(TextEvent);
        }
    }
    public class TestClass
    {
        public TestClass()
        {
            EventLogger.AddLog("TestClass()");
        }
        ~TestClass()
        {
            EventLogger.AddLog("~TestClass()");
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-11T17:52:06.083

对，因为这不是 C++。终结器（不是 C++ 中的析构函数）不能保证在对象离开其声明范围后立即被调用，当 GC 决定突袭并在你之后清理时调用它。

我可以问你为什么要使用终结器开始吗？您是否维护对需要尽可能确定地释放的非托管资源的引用（如果是，请在 IDisposable 接口上阅读）？C# 终结器的用例很少而且相差甚远，实现它们并不常见。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T17:54:46.940

C# 不是 C++。[析构函数不会同步运行](http://msdn.microsoft.com/en-us/library/66x5fx1b.aspx)。

您的代码中没有错误，但看起来您可能需要为您的类实现“IDisposable 模式”，以便为调用者提供一种方法来保证您的对象的某些破坏是同步执行的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-30T20:51:03.387

对于我们这些更熟悉 C++ 模式的人来说，查看 IDisposable 接口的文档很有用：

[http://msdn.microsoft.com/en-us/library/system.idisposable.aspx](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)

不幸的是，我刚刚尝试过它并没有按我的意愿工作。我使用了一个自动对象来保存 GUI 光标的当前状态，切换到等待光标并在对象超出范围时恢复原始光标。IDisposable 界面确实会导致光标被恢复但不是立即恢复 - 因此等待光标显示时间过长。太糟糕了，因为这是一个非常有用的模式。

更新：一段时间后，C# try/finally 模式就足够舒适了：

```
public void do_something_time_consuming()
{
   ShowBusyCursor cursor = new ShowBusyCursor();

   try
   {
      ...
      return;
   }
   finally
   {
      cursor.done();
   }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T18:03:03.230

终结器并非设计为在超出范围后立即调用。当对象被垃圾收集时调用它，这可能是在超出范围后的几毫秒到几天的任何时间。

终结器不适用于此类代码。它仅用于资源清理。

您不能强制它在超出范围后立即执行某些操作，但您可以在超出范围之前立即告诉它，使用`Close()`或类似的方法表示对象已完成使用。

例如：

```
private void button1_Click(object sender, EventArgs e)
{
    TestClass test = new TestClass();
    // do stuff
    test.Close();
} 
```

注意：您可以`IDisposable`按照建议实现 ，但这种用法并不完全符合 的预期用途`IDisposable`，因此虽然它可以工作，但它有点 hackish。

# powershell - PowerShell New-ADUser 循环失败

> ID：10985049
> 
> 赞同：2
> 
> 时间：2012-06-11T17:50:24.320
> 
> 标签：powershell, active-directory

这是我用于将测试用户帐户添加到 Active Directory 的 powershell 代码...问题：当`$i`介于 1 到 99 之间时，一切正常...在`$i`达到 100 后立即禁用创建的帐户，并且控制台中的错误消息告诉“ `The password does not meet the length, complexity, or history requirement of the domain.`”

知道有什么问题吗？

//编辑：没有为域设置密码策略

谢谢

```
Import-Module ActiveDirectory

for($i=1; $i -le 500; $i++){

$name="Name1_$i" #name
$surname="Surname1_$i" #surname
$logon="logon1$i" #logon
$plainPass='pAs5w0rd'+$i+'&G'
$password=ConvertTo-SecureString -AsPlainText -Force -String $plainPass 

New-ADUser -Enabled 1 -Name $name -AccountPassword $password -DisplayName "$name $surname" -GivenName $name -UserPrincipalName $logon@testdomain.local -SamAccountName $logon -Surname $surname -Path "OU=SomeTest,DC=testdomain,DC=local"

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T20:12:14.777

所以我重现了你的问题，你在默认域策略下。什么时候 ：

```
name = Name1_100
surname = Surname1_100
samAccountName = Logon1100 
```

名称的很大一部分在密码中（请参阅域上称为[密码复杂性](http://technet.microsoft.com/en-us/library/cc786468%28v=ws.10%29.aspx)的默认密码策略）

对 samAccountName 进行完整检查只是为了确定它是否是密码的一部分

所以试试

```
$plainPass='pAs5w0rd'+($i+1)+'&G' 
```

它会起作用的。

# sql - 使用 DB2，我可以检查存储过程何时被修改吗？

> ID：10985053
> 
> 赞同：1
> 
> 时间：2012-06-11T17:50:50.147
> 
> 标签：sql, stored-procedures, db2

我看到某些版本的 MSSQL 允许您运行查询来检索有关存储过程的信息。我还看到了针对 Oracle 的相同类型的查询。DB2 有类似的东西吗？

具体来说，我希望能够看到创建和/或上次修改存储过程的时间。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T18:23:47.543

This should be what you are looking for:

```
select routinename, create_time, alter_time from syscat.routines where routinetype='P' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-30T19:03:01.240

是的，您可以在修改存储过程时签入 DB2。请在下面找到相同的查询。不要混淆 CREATE_TIME 这意味着上次修改时间。

代码如下：

SELECT PROCNAME, CREATE_TIME FROM SYSCAT.procedures WHERE PROCNAME = '<>' order by CREATE_TIME desc

注意：将 <> 替换为您的实际存储过程名称。

# asp.net - 我可以从放置在另一个页面的框架中的页面获得控制权吗？

> ID：10985063
> 
> 赞同：0
> 
> 时间：2012-06-11T17:51:29.680
> 
> 标签：asp.net, iframe, checkbox, repeater, content-pages

我是桌面客户端开发人员。我现在要继续这个项目是带有 AJAX 的 ASP.NET，所以我正在努力学习 Web 开发。

当用户单击 ChoicePage.aspx 上的 CmdSave 按钮时**，**我**需要从****Summary.aspx上的****转发器**控件中获取所有复选框及其状态的列表。

 ******我可以在 Summary.aspx 中订阅事件 CmdSave_Click()**还是**有一些方法可以从**ChoicePage.aspx 接近 Summary.aspx****的**转发器控件？

 **[（MSDN 在这篇](http://msdn.microsoft.com/en-us/library/6c3yckfw.aspx)文章中谈到了在页面之间传递值，但这对我没有帮助）

这是问题所在： Page **ChoicePage.aspx**包含在 Master AppMaster.master 页面中。**ChoicePage**有 Content 标签，其中包括 CmdSave 和它的事件处理程序**CmdSave_Click()**，它还包括用于显示另一个页面的**iframe标签，** **Summary.aspx**

在**Summary.aspx**上，我有绑定到 DataSource 的转发器控件，相关字段的类型为 bool 类型，由可编辑**复选框**列表示。单击这些复选框不能导致 Summary.aspx 刷新，因此我不希望处理（服务器端）CheckedChanged 事件。

我不确定是否有任何代码示例在这里会有所帮助，因为这更像是一个概念问题

```
function SetFrameStatus() {
        var v = hdCommand.value.toString().toLowerCase();
        hdCommand.value = "";

        var frms = (GetFrameAll("FrameSummary"));
        if (frms)
        { }
        else return;
        FrameSummary = frms[0];
        DivSummary = FrameSummary.parentNode;
        var FrameWindow = frms[1];
        var FrameDocument = frms[2];
        if (v == "showsummary") {
            FrameWindow.location.replace(SummaryPageName);
        }
 }

<asp:Content ID="ContentSummary" ContentPlaceHolderID="NoUpdateDiv" runat="server">
    <div id="DivMenu" class="Flat" style="overflow:visible; display:none;position:absolute;">
        <input type="button" id="CmdSave" value="Save" onclick="CmdSave_Click()" />
    </div>    
    <div id="DivSummary" style="position:absolute;margin:0px;padding:0px;display:none">
    <iframe title="Loading" id="FrameSummary" marginheight="0px" marginwidth="0px" scrolling="auto"
        style="padding:0px; margin:0px;width:auto;" src="loading.htm?Redirect=Summary.aspx" frameborder="0" 
        onload="FrameSummary_Load()"
    ></iframe>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T18:46:57.550

最后，这就是解决我的问题的方法：

在`CmdSave_Click()`函数中的 ChoicePage.aspx 上，我调用了 Summary.aspx 上的另一个函数。

这个其他函数在我后面的代码中执行`__dopostback("Repeater", "")`并打开`Render event`了我遍历中继器。

我没有回答这个问题，因为我确信有更好的方法来做到这一点。********

# salesforce - 禁用保存按钮的工作

> ID：10985070
> 
> 赞同：1
> 
> 时间：2012-06-11T17:52:03.480
> 
> 标签：salesforce, apex-code

我在这个页面控制器中做了一个 VF 页面。我写了一个查询来获取一些记录。如果条件为假，则显示错误消息。如果显示错误消息，那么我想禁用保存按钮的工作。

是否可以启用保存按钮的工作，或禁用保存按钮？在 Apex 代码中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T18:27:28.873

an的`disabled`属性[`<apex:commandbutton>`](http://www.salesforce.com/us/developer/docs/pages/index_CSH.htm#pages_compref_commandButton.htm)可以设置为启用/禁用按钮。将此属性设置为绑定的 Apex 变量将允许您控制是否在 Apex [Controller](http://www.salesforce.com/us/developer/docs/pages/Content/pages_controller_custom.htm)或[Extension](http://www.salesforce.com/us/developer/docs/pages/Content/pages_controller_extension.htm)中启用按钮。

**示例 Visualforce 标记：**

```
<apex:commandbutton action="{!save}" value="Save" id="theButton" disabled="{!myApexBooleanVariable}" /> 
```

**示例控制器或扩展 Apex 代码：**

```
public Boolean myApexBooleanVariable {get;set;} 
```

# llvm - 用于计时的 llvm 函数包装器

> ID：10985072
> 
> 赞同：1
> 
> 时间：2012-06-11T17:52:13.980
> 
> 标签：llvm, clang

我想添加一个函数包装器来记录某些函数的进入和退出时间。LLVM 似乎是实现这一目标的好工具。但是，我一直无法找到有关如何编写函数包装器的教程。有什么建议么？

ps 我的目标语言是 C

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T16:32:11.957

我喜欢这样做，并根据情况使用多种方法。

如果您在 Linux 平台上，最简单的方法是使用出色的 ltrace 实用程序。您提供您正在计时的 C 程序作为 ltrace 的参数。“-T”选项将输出经过的调用时间。如果您想要调用时间的摘要，请使用“-c”选项。您可以使用“-e”和“--library”选项控制输出量。其他平台有一些类似的工具（如 dtrace），但它们并不那么容易使用。

另一种略显老套的方法是使用宏来重新定义函数名。这具有宏的所有潜在缺陷，但可以在小型程序的受控环境中很好地工作。C 预处理器不会递归地扩展宏，因此您可以在调用点从包装宏内部调用*实际*函数。这避免了在函数体中每个潜在返回之前放置“停止计时”代码的困难。

```
#define foo(a,b,c) ({long t0 = now(); int retval = foo(a,b,c); long elapsed = now() - t0; retval;}) 
```

注意表达式中非标准代码块的使用。这避免了用于计时和 retval 的临时名称的冲突。此外，通过将 retval 作为语句列表中的最后一个表达式，此代码将为嵌入在赋值或其他表达式上下文中的函数调用计时（您需要将“retval”的类型更改为适合您的函数的任何内容）。

您必须非常小心，不要在原型等之前包含#define。

使用您最喜欢的计时器函数及其适当的数据类型（double、long long 等）。我自己喜欢 C++11 中的 <chrono>。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T17:32:13.543

`func_start`假设在进入每个函数和返回时都需要调用`func_return`，最简单的方法是执行以下操作：

```
for each function F
  insert a call to func_start(F) before the first instruction in the entry block
  for each block B in function F
    get the terminator instruction T
    if T is a return instruction
      insert a call to func_return(F) before T 
```

总而言之，包括您的样板代码，您`FunctionPass`将不得不为此编写大约 40 行代码。

如果你真的想使用包装方法，你必须这样做：

```
for each function F
  clone function F (call it G)
  delete all instructions in F
  insert a call to func_start(F) in F
  insert a call to G in F (forwarding the arguments), put the return value in R
  insert a call to func_return(F) in F
  insert a return instruction returning R in F 
```

这种情况下的代码复杂度会稍高一些，并且您可能会产生更高的编译和运行时开销。

# sql - sql case语句错误

> ID：10985073
> 
> 赞同：1
> 
> 时间：2012-06-11T17:52:16.833
> 
> 标签：sql

但是，我有一个案例陈述；我有两个错误。我似乎无法找到修复错误的答案。

```
SELECT #TMP.webid_Val = CASE #TMP.webid 
when 'NULL' then 'NOT COMPLIANT'
else 'COMPLIANT'
end
FROM #TMP 
```

* *** FROM 附近的语法不正确。期待对话**

**=** 附近的语法不正确**

`#TMP`是临时表。webid 是要针对条件查看的值 webid_val 是将更改值的列。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T17:59:44.823

看起来您确实想像以前那样执行`UPDATE`using`CASE`语句，而不是`UPDATE`表中的数据

```
UPDATE #TMP
SET webid_Val = 
    (CASE when webid Is NULL
        then 'NOT COMPLIANT'
        else 'COMPLIANT'
        end) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T17:58:24.863

如果我正确理解你的笔记，你想要做一个更新语句，而不是一个选择语句。此外， null 不是字符串。

如果这就是你想要的，下面将执行 select 语句。

```
select case #TMP.webid when null then 'NOT COMPLIANT'
        else 'COMPLIANT' end
from #TMP 
```

如果要更新表中的每一行：

```
update #TMP
set webid_Val = (case webid when null then 'NOT COMPLIANT'
            else 'COMPLIANT' end) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T18:01:30.470

(The following answer assumes Sql Server)
You cannot do an update with a select statement.

If you are trying to return data to a client application or user, use

```
SELECT webid_Val = CASE 
    WHEN #TMP.webid IS NULL then 'NOT COMPLIANT'
    ELSE 'COMPLIANT'
END
FROM #TMP 
```

or if you're trying to update data in the original temp table, use the following:

```
UPDATE #tmp SET 
webid_Val = CASE 
    WHEN #TMP.webid IS NULL then 'NOT COMPLIANT'
    ELSE 'COMPLIANT'
END
FROM #TMP 
```

# javascript - d3.js 奇怪的旋转行为

> ID：10985077
> 
> 赞同：9
> 
> 时间：2012-06-11T17:52:34.593
> 
> 标签：javascript, d3.js

我正处于 JS 项目的早期阶段。到目前为止一切都很好，除了一个形状的定位。有问题的形状是蓝绿色钻石（方形旋转 45 度）。我可以让屏幕上的正方形没问题，但是当我添加时：

```
 .attr("transform", "rotate(45)") 
```

正方形可以正确旋转，但会向屏幕的左侧移动，如下所示：

![在此处输入图像描述](../Images/9b572f356351c75c856930ebfc1861a6.png)

我不确定是什么导致了这种情况发生。如果有帮助，这里有一些产生这个结果的代码：

```
var svg = d3.select("body")
            .append("svg")
            .attr("width", w)
            .attr("height", h);
        svg
            .append("rect")
            .attr("transform", "rotate(45)")
            .attr("x", 250)
            .attr("height", w / 10)
            .attr("width", w / 10)
            .attr("fill", "teal") 
```

注意：如果我把“y”属性放进去，正方形就完全消失了。

这是什么原因造成的？我是不是做错了什么我看不到的事情？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-11T18:24:39.140

旋转矩形时，也会旋转其坐标系。因此，当您稍后将其沿 x 轴移动 250 度时，实际上您将其沿 45 度轴移动了 250 个单位——这是旋转的结果。

通常，当您像为 所做的那样引入一个`transform`属性时`rotate`，您应该通过此属性进行所有转换。所以，你需要使用`translate`而不是使用`"x"`属性。然后它看起来像这样：

```
svg
  .append("rect")
  .attr("transform", "translate(250, 0) rotate(45)")
  // remove this: .attr("x", 250)
  .attr("height", w / 10)
  ... 
```

这将为您提供我认为您正在寻找的结果。现在请注意，这里的转换顺序很重要：如果您的转换是`"rotate(45) translate(250, 0)"`（即先旋转然后平移），您将得到与之前相同的错误结果。这是因为当您首先旋转时，您的平移会像以前一样沿旋转的 x 轴进行。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-11T18:35:50.613

在 SVG 中，您必须设置变换原点以使其从中心旋转，例如...

```
.attr("transform", "rotate(45, 250, 100)"); 
```

`250, 100`矩形的 x 和 y 位置减去它的半径在哪里。把它们放在一起看起来像......

```
var svg = d3.select("body")
            .append("svg")
            .attr("width", 400)
            .attr("height", 300);
        svg
            .append("rect")
            .attr("transform", "rotate(30,"+ (diamond.x+diamond.width/2) + ","+ (diamond.y+diamond.width/2) +")")
            .attr("x", diamond.x)
            .attr("y", diamond.y)
            .attr("height", diamond.width)
            .attr("width", diamond.width)
            .attr("fill", "teal")​ 
```

您可以在此处查看演示：

[http://jsfiddle.net/uwM8u/](http://jsfiddle.net/uwM8u/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-21T17:29:44.407

这是一种与 Duopixel 给出的答案略有不同的方法。在这里，您不会重复 X 和 Y 的计算。在 Duopixel 的示例中，这是一个微不足道的改进，因为他只是引用了一个结构。通常情况下 X 和 Y 是函数，我不想在两个地方维护该日志。这种方法允许您设置 X 和 Y 一个节点，然后在该节点的中心旋转。

您可能会发现，旋转后，您仍然想调整最终位置，这可以通过另一个变换来完成，或者在 TEXT 的情况下，您可以使用 dx, dy。

```
 svgNode.attr("transform", function (d) {

                    var w = +d3.select(this).attr("x") +  (this.getBBox().width / 2) ;
                    var h = +d3.select(this).attr("y") + (this.getBBox().height / 2);

                    return  "rotate(90," + w + "," + h + ")";

                }) 
```

# java - Java-如何获取存储在修改后的DOM文档中的完整xml

> ID：10985078
> 
> 赞同：1
> 
> 时间：2012-06-11T17:52:42.777
> 
> 标签：java, dom

我正在使用标准 Java DOM 解析器来处理 xml 文件-

我已经对其进行了处理并对xml文档进行了更改，现在我想查看修改后的xml。如何将修改后的 XML 存储到字符串变量中。

供您参考，我使用的代码如下 -

```
 str = "<?xml version=\"1.0\" encoding=\"UTF-8\"?><config><var-def name=\"initial_no\">3972971</var-def><var-def name=\"webpage\">asdf</var-def><cloudwhile condition=\"${i.toInt() != 500}\" index=\"i\" returnvalue=\"false\" indexstart=\"1\" upperbound=\"500\"><var-def name=\"webpage\" overwrite=\"true\"><cloudwhile condition=\"${i.toInt() != 500}\" index=\"i\" returnvalue=\"false\" indexstart=\"100\" upperbound=\"700\"></cloudwhile><try><body><http url=\"www.google.com/patents/US${initial_no.toInt()+i.toInt()}\"/></body><catch>ERROR- No content found for this patent number.</catch></try></var-def><file action=\"write\" path=\"data/${initial_no.toInt()+i.toInt()}_content.html\"><var name=\"webpage\"/></file></cloudwhile></config>";
        InputStream is = new ByteArrayInputStream(str.getBytes("UTF-8"));
        DocumentBuilderFactory docFactory = DocumentBuilderFactory.newInstance();
        DocumentBuilder docBuilder = docFactory.newDocumentBuilder();
        Document doc = docBuilder.parse(is);
                    //some processing.. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T18:08:18.260

你可以使用 Transformer API 来做你想做的事：

```
import java.io.*;
import org.w3c.dom.*;
import javax.xml.parsers.*;

import javax.xml.transform.Transformer;
import javax.xml.transform.TransformerFactory;
import javax.xml.transform.dom.DOMSource; 
import javax.xml.transform.OutputKeys;
import javax.xml.transform.stream.StreamResult;

class SaveDom 
{
    public static void main(String[] args) throws Exception
    {
        String str = "<?xml version=\"1.0\" encoding=\"UTF-8\"?><config><var-def name=\"initial_no\">3972971</var-def><var-def name=\"webpage\">asdf</var-def><cloudwhile condition=\"${i.toInt() != 500}\" index=\"i\" returnvalue=\"false\" indexstart=\"1\" upperbound=\"500\"><var-def name=\"webpage\" overwrite=\"true\"><cloudwhile condition=\"${i.toInt() != 500}\" index=\"i\" returnvalue=\"false\" indexstart=\"100\" upperbound=\"700\"></cloudwhile><try><body><http url=\"www.google.com/patents/US${initial_no.toInt()+i.toInt()}\"/></body><catch>ERROR- No content found for this patent number.</catch></try></var-def><file action=\"write\" path=\"data/${initial_no.toInt()+i.toInt()}_content.html\"><var name=\"webpage\"/></file></cloudwhile></config>";
        InputStream is = new ByteArrayInputStream(str.getBytes("UTF-8"));
        DocumentBuilderFactory docFactory = DocumentBuilderFactory.newInstance();
        DocumentBuilder docBuilder = docFactory.newDocumentBuilder();
        Document doc = docBuilder.parse(is);

        // Write out the xml file
        // Use a Transformer for output
        TransformerFactory tFactory = TransformerFactory.newInstance();
        Transformer transformer = tFactory.newTransformer();
        transformer.setOutputProperty(OutputKeys.METHOD, "xml");
        transformer.setOutputProperty( OutputKeys.INDENT, "yes" );
        transformer.setOutputProperty("encoding", "UTF-8");

        DOMSource source = new DOMSource(doc);
        java.io.StringWriter sw = new java.io.StringWriter();
        StreamResult _result = new StreamResult(sw);
        transformer.transform(source, _result);
        String out = sw.toString();
        System.out.println(out);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T18:11:05.450

操作后，您可以使用 Transformer 输出文档。这是为第一个孩子添加属性的示例。

```
import java.io.ByteArrayInputStream;
import java.io.IOException;
import java.io.InputStream;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;
import javax.xml.transform.Transformer;
import javax.xml.transform.TransformerException;
import javax.xml.transform.TransformerFactory;
import javax.xml.transform.dom.DOMSource;
import javax.xml.transform.stream.StreamResult;

import org.w3c.dom.Attr;
import org.w3c.dom.Document;
import org.w3c.dom.NamedNodeMap;
import org.xml.sax.SAXException;

public class XmlExample {

    public static void main(String[] args) throws ParserConfigurationException, SAXException, IOException, TransformerException {
        String str = "<?xml version=\"1.0\" encoding=\"UTF-8\"?><config><var-def name=\"initial_no\">3972971</var-def><var-def name=\"webpage\">asdf</var-def><cloudwhile condition=\"${i.toInt() != 500}\" index=\"i\" returnvalue=\"false\" indexstart=\"1\" upperbound=\"500\"><var-def name=\"webpage\" overwrite=\"true\"><cloudwhile condition=\"${i.toInt() != 500}\" index=\"i\" returnvalue=\"false\" indexstart=\"100\" upperbound=\"700\"></cloudwhile><try><body><http url=\"www.google.com/patents/US${initial_no.toInt()+i.toInt()}\"/></body><catch>ERROR- No content found for this patent number.</catch></try></var-def><file action=\"write\" path=\"data/${initial_no.toInt()+i.toInt()}_content.html\"><var name=\"webpage\"/></file></cloudwhile></config>";
        InputStream is = new ByteArrayInputStream(str.getBytes("UTF-8"));
        DocumentBuilderFactory docFactory = DocumentBuilderFactory.newInstance();
        DocumentBuilder docBuilder = docFactory.newDocumentBuilder();
        Document doc = docBuilder.parse(is);

        // Example processing:  Add an attribute to first child
        NamedNodeMap attributes = doc.getFirstChild().getAttributes();
        Attr attribute = doc.createAttribute("joes-attribute");
        attribute.setValue("joes-value");
        attributes.setNamedItem(attribute);

        // Use a Transformer to output to whatever you want.
        TransformerFactory tFactory =
          TransformerFactory.newInstance();
        Transformer transformer = tFactory.newTransformer();

        DOMSource source = new DOMSource(doc);
        StreamResult result = new StreamResult(System.out);
        transformer.transform(source, result);
    }
} 
```

您可以阅读更多相关信息：[http ://www.petefreitag.com/item/445.cfm](http://www.petefreitag.com/item/445.cfm)

# javascript - 复制一个 jQuery 推荐滑块

> ID：10985079
> 
> 赞同：-1
> 
> 时间：2012-06-11T17:52:46.653
> 
> 标签：javascript, jquery, plugins, slider

在此页面上， http: [//themes.truethemes.net/Karma-HTML/index-jquery-1.html](http://themes.truethemes.net/Karma-HTML/index-jquery-1.html)，在页面底部有一个可能使用 jQuery 制作的推荐滑块。我想做一些类似但没有导航的东西。具有自动高度和淡入淡出效果的东西。如果我想添加一张额外的幻灯片或者我只想`<div>`用一个类创建一个新的东西，它也必须是灵活的。有人可以指出我正确的方向，或者告诉我一个插件吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T18:00:55.837

我以前用过这个。它不是最华丽的，但很容易配置，并且适用于文本。许多滑块仅适用于图像。

[http://cssglobe.com/post/3783/jquery-plugin-easy-image-or-content-slider](http://cssglobe.com/post/3783/jquery-plugin-easy-image-or-content-slider)

# java - 如何以编程方式进行谷歌搜索？

> ID：10985084
> 
> 赞同：1
> 
> 时间：2012-06-11T17:53:04.990
> 
> 标签：java

我想在 Java 中以编程方式查询谷歌，以获取用于关系提取目的的文本。

例如，我想用 Java 编写：

```
result_list=googleAgent.search("Berlin Germany"); 
```

在`result_list`中，我可以得到包含“柏林”和“德国”的句子列表。然后我可以进行 NLP 分析并提取关系。

我能做到吗？如果是这样呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T17:55:53.467

谷歌禁止直接通过他们的网站进行程序化搜索（这就是他们有[搜索 API](https://developers.google.com/custom-search/v1/overview)的原因）。如果您坚持尝试这样做，Google 最终会弹出您的客户必须解决的验证码。所以现在你会在做 OCR 的同时尝试做 NLP ;)

但是，他们的搜索 API 并不是那么好。您每天只能进行一定数量的查询 (100) 和每个结果的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T17:57:52.313

您可以使用[Google 的自定义搜索 API](https://developers.google.com/custom-search/v1/overview)

# mysql - 将数据分解为mysql中的列

> ID：10985085
> 
> 赞同：1
> 
> 时间：2012-06-11T17:53:08.110
> 
> 标签：mysql

我有一列，我想创建一个查询以包含多个列。

例如，我有**测试**列。

该列的数据如下所示：

```
record1 => **option1|value1;option2|value2**
record2 => **option3|value3**
record3 => **option3|value3;option1|value1;option2|value2;option4|value4** 
```

选项和值的数量未定义。

我想让这一测试列分成多个选项，如下所示：

```
option1   option2   option3  option4
'value1'  'value2'  'value3'  
                    'value3'
'value1'  'value2'  'value3' 'value4' 
```

我的桌子是这样的：

```
 id  name    options
    1   name    age|12;color|red;active|yes;car|no
    2   name    age|15;member|yes 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T18:31:05.143

您可以编写一个[称为用户定义函数的自定义 MySQL 函数](http://dev.mysql.com/doc/refman/5.0/en/create-function-udf.html)，该函数可以接收要搜索的变量名称和值，然后根据需要返回行或 ID 等。

在该函数中，您将需要遍历只读游标中的所有行并使用[SUBSTRING_INDEX()](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_substring-index)分别获取值并检查匹配。

如果您需要进一步的帮助，请告诉我。

[有关更多信息，请查看此处的字符串函数](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html)的 MySQL 手册。

来自上述链接的用户评论摘录可能有助于您编写函数：这会将 IP 地址（“abcd”）拆分为 4 个相应的八位字节：

```
SELECT
`ip` , 
SUBSTRING_INDEX( `ip` , '.', 1 ) AS a,
SUBSTRING_INDEX(SUBSTRING_INDEX( `ip` , '.', 2 ),'.',-1) AS b, 
SUBSTRING_INDEX(SUBSTRING_INDEX( `ip` , '.', -2 ),'.',1) AS c,
SUBSTRING_INDEX( `ip` , '.', -1 ) AS d
FROM log_table 
```

# java - 如何在 Eclipse 中生成流程图？

> ID：10985089
> 
> 赞同：3
> 
> 时间：2012-06-11T17:53:13.577
> 
> 标签：java, android, eclipse, eclipse-plugin

我正在寻找 eclipse 的流程图插件（我正在为 Android 使用 eclipse）并偶然发现`CodeRocket for Eclipse`.

*   它是最好的流程图生成器eclipse吗？

我试过了`Code Rocket for Eclipse`。

完全按照[这里](http://www.rapidqualitysystems.com/updates/CodeRocketForEclipse/)描述的那样做，但我收到了这个错误

`Could not create the view: Plug-in com.rapidqualitysystems.coderocket.ui was unable to load class com.rapidqualitysystems.coderocket.views.EclipseFlowchartEditor.`

![在此处输入图像描述](../Images/3f1f3908fd924a3ff7fde2ae21272f12.png)

任何帮助将不胜感激。

**添加了 StackTrace** 完整的堆栈跟踪将使屏幕变得混乱，并且在[此处](http://www.mediafire.com/?j8zlriadxgd2yny)开始五行如下

```
java.lang.UnsupportedClassVersionError: com/rapidqualitysystems/coderocket/views/EclipseFlowchartEditor : Unsupported major.minor version 51.0
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
    at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.defineClass(DefaultClassLoader.java:188) 
```

**编辑 2**第一个错误是`Code Rocket for Eclipse`仅适用于 Java 7。我将我的 Java 升级到 7，后来支持`CodeRocket for Eclipse`通知该软件仅适用于 32 位版本的 eclipse。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T19:06:48.990

您的问题最可能的原因是

*   缺少包含类 com.rapidqualitysystems.coderocket.views.EclipseFlowchartEditor 的插件
*   或者类 EclipseFlowchartEditor 本身需要另一个缺少的类

有时追踪此类问题非常棘手。

*   检查当您按下“详细信息”按钮时是否收到更详细的错误消息或堆栈跟踪。
*   还要检查错误日志视图中是否有错误消息。
*   尝试找到应该提供类 EclipseFlowchartEditor 的插件，并显示 Plugins 视图是否列出了这个插件。

# apache2 - Apache Web 服务器：ProxyPass 和 ProxyPassReverse

> ID：10985091
> 
> 赞同：7
> 
> 时间：2012-06-11T17:53:20.377
> 
> 标签：apache2, mod-proxy, mod-jk

我已经通过互联网和 stackoverflow 进行了扫描，但我仍然不确定 proxypass 和 proxypassreverse 的用途。

为什么我们需要proxypass（而不是使用mod_jk）让apache服务器连接到tomcat？

请问有人吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2017-12-04T17:42:12.237

ProxyPassReverse用于在 Apache 将其发送到浏览器之前更改从代理应用服务器发送到 Apache 的**标**头**。**

例如，如果应用程序位于**localhost:8080**上，它将以**[http://localhost:8080/new_path/](http://localhost:8080/new_path/)**的重定向和位置标头进行响应，Apache 会将其发送到浏览器。**浏览器将尝试向localhost:8080**上的 Page 发送请求并收到错误消息。

**ProxyPassReverse**将拦截这些标头，并重写它们以匹配 Apache 代理服务器。

**ProxyPass**将创建一个反向代理。反向代理（或网关）在客户端看来就像普通的 Web 服务器一样。客户端对反向代理的命名空间中的内容进行普通请求。然后反向代理决定将这些请求发送到哪里，并返回内容，就好像它本身就是源一样。

[https://www.quora.com/Whats-the-difference-between-proxypassreverse-and-proxypass](https://www.quora.com/Whats-the-difference-between-proxypassreverse-and-proxypass)

[https://httpd.apache.org/docs/2.4/mod/mod_proxy.html](https://httpd.apache.org/docs/2.4/mod/mod_proxy.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T18:43:41.697

SO :: [apache to tomcat上的不错链接：mod_jk vs mod_proxy](https://stackoverflow.com/questions/1081918/apache-to-tomcat-mod-jk-vs-mod-proxy)

1\. 一个原因可能是使用 mod_proxy 来包含其他服务器，同时维护精美的 URL。

2.另一个好处是当你使用tomcat作为服务器时，mod_proxy_ajp模块有ProxyPassReverseCookiePath指令，它允许你将Tomcat web应用程序（除了根应用程序）的会话cookie映射到虚拟主机的根目录.

3.Mod_proxy 只是将某些 URL 的请求重定向到另一个 Web 服务器，因此它通常不需要在应用程序服务器上进行额外配置。

此外，请参阅[http://www.humboldt.co.uk/2009/02/the-mystery-of-proxypassreverse.html](http://www.humboldt.co.uk/2009/02/the-mystery-of-proxypassreverse.html)

# visual-studio-2010 - 如何在 VS 2010 模板中更改项目的包含文件夹名称

> ID：10985095
> 
> 赞同：2
> 
> 时间：2012-06-11T17:53:45.247
> 
> 标签：visual-studio-2010

我在 VS 2010 中创建了一个多项目模板，创建的文件夹结构为：

**Service1**
MyService.Service1.CommunicationLayer
-->MyService.Service1.CommunicationLayer.csproj
MyService.Service1.DataAccessLayer
-->MyService.Service1.DataAccessLayer.csproj
MyService.Service1.ServiceLayer
-->MyService.Service1.ServiceLayer.csproj

但我需要如下结构： **Service1**
Communication
-->MyService.Service1.CommunicationLayer.csproj
DataAccess
-->MyService.Service1.DataAccessLayer.csproj
Services
-->MyService.Service1.ServiceLayer.csproj

另外，我需要将我的解决方案文件夹名称设置为**Service1**，这将是项目用户提供的名称。

这是我正在使用的 .vstemplate 文件：

```
`<!--Outer .vstemplate file -->
<VSTemplate Version="2.0.0" Type="ProjectGroup"
    xmlns="http://schemas.microsoft.com/developer/vstemplate/2005">
  <TemplateData>
    <Name>DataAccessService</Name>
    <Description>Data Access Service Template</Description>
    <ProjectType>CSharp</ProjectType>
    <Icon>__TemplateIcon.ico</Icon>
    <CreateNewFolder>true</CreateNewFolder>
    <ProvideDefaultName >true</ProvideDefaultName>
    <DefaultName>DALService</DefaultName>
  </TemplateData>
  <TemplateContent>
    <ProjectCollection>
        <ProjectTemplateLink ProjectName="MyService.$safeprojectname$.CommunicationLayer">Communication\Communication.vstemplate</ProjectTemplateLink>
        <ProjectTemplateLink ProjectName="MyService.$safeprojectname$.DataAccessLayer">DataAccess\DataAccess.vstemplate</ProjectTemplateLink>
        <ProjectTemplateLink ProjectName="MyService.$safeprojectname$.ServiceLayer">Services\Services.vstemplate</ProjectTemplateLink>
    </ProjectCollection>
  </TemplateContent>
</VSTemplate>` 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T19:35:09.067

好的。所以这是我找到的解决方案：

我使用 TemplateWizard 来自定义我的文件夹结构。

1.  使用默认项目名称和包含文件夹创建项目。
2.  使用 TemplateWizard 创建解决方案文件夹。
3.  从解决方案中删除项目。
4.  重命名包含文件夹。
5.  将项目添加到我在步骤 2 中创建的 SolutionFolder。

希望这可以帮助有类似问题的人。

# node.js - npm 不会在本地安装包。怎么了？

> ID：10985097
> 
> 赞同：21
> 
> 时间：2012-06-11T17:53:54.243
> 
> 标签：node.js, installation, global, local, npm

我想在本地安装包，但 npm 总是将包安装到全局位置。我正在运行以下命令：

```
npm install serialport 
```

我没有 .npmrc 命令，也没有使用 -g 标志，所以我不知道为什么它没有在本地安装。这是配置转储中的一个片段，显示 global 为 false： $ npm config ls -l | grep global global = false globalconfig = "/usr/local/etc/npmrc" globalignorefile = "/usr/local/etc/npmignore"

并且软件包仍在像这样安装

```
serialport@0.7.3 ../../../../node_modules/serialport 
```

因此，除非我对“本地”的含义完全错误，否则这似乎是错误的。我的印象是“本地”意味着在当前工作目录中，以便我可以在我的主代码文件中执行“要求”。请参阅： http: [//blog.nodejs.org/2011/03/23/npm-1-0-global-vs-local-installation/](http://blog.nodejs.org/2011/03/23/npm-1-0-global-vs-local-installation/)，如上一个 npm 相关问题中所引用。

有人可以给我一些提示吗？非常感谢你。

PS它不是特定于串口模块的。这一切都发生在他们身上。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-11T18:15:10.060

我的大部分答案都可以找到： http: [//npmjs.org/doc/folders.html#More-Information](http://npmjs.org/doc/folders.html#More-Information)

我的理解是 npm 会尝试将它安装在一个合理的位置。因此，如果您有一个`project/node_modules`目录并且您位于 /project 并执行 npm install ，它将使用`product/node_modules`.

现在，如果您不小心执行了 cd`project/css`并执行了 npm install，那么 npm 将向上遍历直到找到您的`node_modules`目录。这是为了防止您不小心将其安装在您的`project/css`.

因此，在您的情况下，您的项目路径中有一个 node_module 目录。所以我的猜测是，您可以通过删除该目录或`node_modules`在项目文件夹中手动创建一个目录来修复它。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-12-05T21:45:37.213

如果您尝试安装软件包的文件夹中有 package.json 文件，那么它将正确创建 node_modules 文件夹。

基本包.json

```
{
    "name": "application-name",
    "version": "0.0.1"
} 
```

# xml - XSLT 如果选择包含“值”

> ID：10985103
> 
> 赞同：0
> 
> 时间：2012-06-11T17:54:29.350
> 
> 标签：xml, xslt, xml-parsing, biztalk, hl7

我想写出 4 个问题是否存在。到目前为止，我的方法是 select="//NTE_NotesAndCommentsSegment_2/NTE_3_Comment" 检索所有 3 条评论。但我遇到了麻烦

1.  选择`NTE_3_Comment`它包含*“问题 1”*（字符串值）的位置

2.  当问题不存在时，写出*问题 4 。*

3.  我还需要输出正确的数字`SETID`。

注意：问题中实际上没有数字。我正在使用 ID 对输出进行排序。

输入 XML：

```
<NTE_NotesAndCommentsSegment_2>
    <NTE_1_SetIdNotesAndComments>1</NTE_1_SetIdNotesAndComments>
    <NTE_2_SourceOfComment></NTE_2_SourceOfComment>
    <NTE_3_Comment>Question 1 ? Answer 1</NTE_3_Comment>
</NTE_NotesAndCommentsSegment_2>
<NTE_NotesAndCommentsSegment_2>
    <NTE_1_SetIdNotesAndComments>1</NTE_1_SetIdNotesAndComments>
    <NTE_2_SourceOfComment></NTE_2_SourceOfComment>
    <NTE_3_Comment>Question 2 ? Answer 2</NTE_3_Comment>
</NTE_NotesAndCommentsSegment_2>
<NTE_NotesAndCommentsSegment_2>
    <NTE_1_SetIdNotesAndComments>1</NTE_1_SetIdNotesAndComments>
    <NTE_2_SourceOfComment></NTE_2_SourceOfComment>
    <NTE_3_Comment>Question 3? Answer 3</NTE_3_Comment>
</NTE_NotesAndCommentsSegment_2> 
```

预期输出 XML：

```
<NTE_NotesAndCommentsSegment_2>
    <NTE_1_SetIdNotesAndComments>1</NTE_1_SetIdNotesAndComments>
    <NTE_2_SourceOfComment></NTE_2_SourceOfComment>
    <NTE_3_Comment>Question 1 ? Answer 1</NTE_3_Comment>
</NTE_NotesAndCommentsSegment_2>
<NTE_NotesAndCommentsSegment_2>
    <NTE_1_SetIdNotesAndComments>2</NTE_1_SetIdNotesAndComments>
    <NTE_2_SourceOfComment></NTE_2_SourceOfComment>
    <NTE_3_Comment>Question 2 ? Answer 2</NTE_3_Comment>
</NTE_NotesAndCommentsSegment_2>
<NTE_NotesAndCommentsSegment_2>
    <NTE_1_SetIdNotesAndComments>3</NTE_1_SetIdNotesAndComments>
    <NTE_2_SourceOfComment></NTE_2_SourceOfComment>
    <NTE_3_Comment>Question 3 ? Answer 3</NTE_3_Comment>
</NTE_NotesAndCommentsSegment_2>
<NTE_NotesAndCommentsSegment_2>
    <NTE_1_SetIdNotesAndComments>4</NTE_1_SetIdNotesAndComments>
    <NTE_2_SourceOfComment></NTE_2_SourceOfComment>
    <NTE_3_Comment>Question 4 ? *Blank* </NTE_3_Comment>
</NTE_NotesAndCommentsSegment_2> 
```

我正在寻找可以帮助我改变解决方案方法的建议。提前致谢。

解决方案：感谢@ORMapper 的建议。无论问题是否存在，每次都会写出所有四个问题。如果源中不存在问题，答案将显示为空白。

```
 <NTE_NotesAndCommentsSegment_2>
            <NTE_1_SetIdNotesAndComments>1</NTE_1_SetIdNotesAndComments>
            <NTE_3_Comment>Question 1 ?<xsl:value-of select="substring-after(//NTE_NotesAndCommentsSegment_2/NTE_3_Comment[starts-with(text(),'Question 1')],'?')"/>
            </NTE_3_Comment>
            </NTE_NotesAndCommentsSegment_2>

            <NTE_NotesAndCommentsSegment_2>
            <NTE_1_SetIdNotesAndComments>2</NTE_1_SetIdNotesAndComments>
            <NTE_3_Comment>Question 2 ?<xsl:value-of select="substring-after(//NTE_NotesAndCommentsSegment_2/NTE_3_Comment[starts-with(text(),'Question 2')],'?')"/>
            </NTE_3_Comment>
            </NTE_NotesAndCommentsSegment_2>

            <NTE_NotesAndCommentsSegment_2>
            <NTE_1_SetIdNotesAndComments>3</NTE_1_SetIdNotesAndComments>
            <NTE_3_Comment>Question 3 ?<xsl:value-of select="substring-after(//NTE_NotesAndCommentsSegment_2/NTE_3_Comment[starts-with(text(),'Question 3')],'?')"/>
            </NTE_3_Comment>
            </NTE_NotesAndCommentsSegment_2>

            <NTE_NotesAndCommentsSegment_2>
            <NTE_1_SetIdNotesAndComments>4</NTE_1_SetIdNotesAndComments>
            <NTE_3_Comment>Question 4 ? <xsl:value-of select="substring-after(//NTE_NotesAndCommentsSegment_2/NTE_3_Comment[starts-with(text(),'Question 4')],'?')"/>
            </NTE_3_Comment>
            </NTE_NotesAndCommentsSegment_2> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T18:08:48.983

(1) 的解决方案是以下 XPath 表达式：

```
//NTE_NotesAndCommentsSegment_2/NTE_3_Comment[starts-with(text(), 'Question 1')] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T19:16:12.630

一个完整的 xslt 解决方案可能如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" indent="yes" />

    <xsl:template match="/">
        <xsl:apply-templates />
    </xsl:template>

    <xsl:template match="root">
        <root>
            <xsl:call-template name="for.loop">
                <xsl:with-param name="i" select="1" />
                <xsl:with-param name="count" select="4" />
                <xsl:with-param name="answer" select="substring-after(//NTE_NotesAndCommentsSegment_2[position() = 1]/NTE_3_Comment, '?')" />
            </xsl:call-template>
        </root>
    </xsl:template>

    <xsl:template name="for.loop">

        <xsl:param name="i" />
        <xsl:param name="count" />
        <xsl:param name="answer" />

        <xsl:if test="$i &lt;= $count">
            <NTE_NotesAndCommentsSegment_2>
                <NTE_1_SetIdNotesAndComments>
                    <xsl:value-of select="$i" />
                </NTE_1_SetIdNotesAndComments>
                <NTE_2_SourceOfComment></NTE_2_SourceOfComment>
                <NTE_3_Comment>
                <xsl:choose>
                    <xsl:when test="$answer = ''">
                        <xsl:value-of select="concat('Question ', $i, ' ? *Blank*')" />
                    </xsl:when>
                    <xsl:otherwise>
                        <xsl:value-of select="concat('Question ', $i, ' ? ', $comment)"/>
                    </xsl:otherwise>
               </xsl:choose>
               </NTE_3_Comment>
            </NTE_NotesAndCommentsSegment_2>
        </xsl:if>

        <!-- Repeat the loop until finished -->
        <xsl:if test="$i &lt;= $count">
            <xsl:call-template name="for.loop">
                <xsl:with-param name="i" select="$i + 1" />
                <xsl:with-param name="count" select="$count">
                <xsl:with-param name="comment" select="substring-after(//NTE_NotesAndCommentsSegment_2[position() = $i + 1]/NTE_3_Comment, '?')" />
            </xsl:call-template>
        </xsl:if>

    </xsl:template>

    <xsl:template match="/ | @* | node()">
        <xsl:copy>
            <xsl:apply-templates select="@* | node()"/>
        </xsl:copy>
    </xsl:template>

</xsl:stylesheet> 
```

# c# - DataGridViewComboBox 值无效？

> ID：10985108
> 
> 赞同：3
> 
> 时间：2012-06-11T17:54:59.053
> 
> 标签：c#, .net, winforms, datagridview, datagridviewcombobox

我不断收到一个错误，指出`DataGridViewComboBox value is not valid`. 好像也是在无限循环中：我点击确定，它会不断的弹出。我正在运行一个带有用 C# 和 .NET 编写的 Windows 窗体应用程序的程序。有谁知道如何解决这个错误？

这是我的代码的一些部分：

```
// authorityTypeDataGridViewTextBoxColumn
// 
this.authorityTypeDataGridViewTextBoxColumn.AutoSizeMode = System.Windows.Forms.DataGridViewAutoSizeColumnMode.DisplayedCells;
this.authorityTypeDataGridViewTextBoxColumn.DataPropertyName = "AuthorityType";
this.authorityTypeDataGridViewTextBoxColumn.DataSource = this.AuthorityTypeBindingSource;
this.authorityTypeDataGridViewTextBoxColumn.DisplayMember = "Description";
this.authorityTypeDataGridViewTextBoxColumn.DisplayStyle = System.Windows.Forms.DataGridViewComboBoxDisplayStyle.ComboBox;
this.authorityTypeDataGridViewTextBoxColumn.Frozen = true;
this.authorityTypeDataGridViewTextBoxColumn.HeaderText = "AuthorityType";
this.authorityTypeDataGridViewTextBoxColumn.MaxDropDownItems = 100;
this.authorityTypeDataGridViewTextBoxColumn.Name = "authorityTypeDataGridViewTextBoxColumn";
this.authorityTypeDataGridViewTextBoxColumn.Resizable = System.Windows.Forms.DataGridViewTriState.True;
this.authorityTypeDataGridViewTextBoxColumn.SortMode = System.Windows.Forms.DataGridViewColumnSortMode.Automatic;
this.authorityTypeDataGridViewTextBoxColumn.ValueMember = "Value";
this.authorityTypeDataGridViewTextBoxColumn.Width = 121;
// 
// AuthorityTypeBindingSource
// 
this.AuthorityTypeBindingSource.DataMember = "AuthorityType";
this.AuthorityTypeBindingSource.DataSource = this.lookUpDataSet; 
```

有没有人有什么建议？

这是处理程序：

```
private void TaskSummaryGrid_DataError(object sender, DataGridViewDataErrorEventArgs e)
{
    MessageBox.Show(this, e.Exception.Message);
    e.Cancel = true;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-29T11:12:46.710

是的，解决方案是使 datagridviewcombobox 单元格值与您在后面的代码中获得的值相同。

如果我想显示 typeof(int) value ，我必须设置 datagridviewcombobox 单元格的属性，如：

```
this.ComboboxCellcolumnName.ValueType = typeof(int); 
```

您获得的值类型（例如 int）应该与您希望在组合框单元格（int）中显示的值类型相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T18:12:04.187

看起来您的 DataGridViewTextBoxColumn 在某些时候是 DataGridViewComboBoxColumn，因为您具有不属于 TextBox 列的 ComboBox 属性。

DataGridViewTextBoxColumn**没有**：

```
.DataSource = this.AuthorityTypeBindingSource;
.DisplayMember = "Description";
.DisplayStyle = DataGridViewComboBoxDisplayStyle.ComboBox;
.MaxDropDownItems = 100;
.ValueMember = "Value"; 
```

我只能猜测手动编辑设计器文件会导致这种情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T10:33:20.560

但是，如果您想恢复到组合框列，则需要设置一些特殊处理来设置它。

你可以参考这里的 MSDN 文章，或者下面的这个例子：

[MSDN：将枚举绑定到 DataGridViews](http://msdn.microsoft.com/en-us/library/y0wfd4yz.aspx)

```
 InitializeComponent();

        // special setup for enum column
        DataGridViewComboBoxColumn stateColumn = dgLedger.Columns[0] as DataGridViewComboBoxColumn;
        if (stateColumn != null)
        {
            stateColumn.DataSource = Enum.GetValues(typeof(TransactionState));
        }
        _ledger = new BindingList<LedgerItem>();
        dgLedger.DataSource = _ledger; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-21T07:51:34.003

我刚刚对我的一个 datagridviews 有过类似的体验：DataError 被不停地抛出......最终结果证明是因为组合框 DataSource 中的 id 与引用它的列的类型（bigint）不同（诠释）...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-07T16:38:01.943

我使用了上面的所有解决方案，但没有一个起作用，所以我尝试覆盖**`DataError event`**它，它运行得很好，没有任何问题：

```
private void dgv_DataError(object sender, DataGridViewDataErrorEventArgs e)
{
 //do nothing
} 
```

# python - 计算机之间的套接字

> ID：10985112
> 
> 赞同：9
> 
> 时间：2012-06-11T17:55:12.423
> 
> 标签：python, sockets, python-3.x, pygame

到目前为止，我已经能够在 python **3.2**中设计出一个基本的套接字。客户端向服务器发送一些数据，X 和 Y 坐标，服​​务器获取数据并返回确认消息。但我遇到的麻烦是让它在计算机之间收听。当我在同一台计算机上并排运行它们时，我的服务器和客户端运行良好，但我想让它们在不同计算机上运行时连接起来。

我楼上有一台电脑，楼下有一台电脑，都使用相同的无线互联网。有没有办法可以从这些计算机中的每一台连接我的服务器和客户端？

我已经尝试将服务器 IP 更改为我的无线调制解调器的 IP 地址，但这不起作用。

到目前为止，这是我的代码，唯一的区别是我将 IP 地址更改回标准环回地址，因为仅将其更改为我的 IP 不起作用：

客户：

```
import pygame, sys
from socket import socket, AF_INET, SOCK_DGRAM
from time import gmtime, strftime
from pygame.locals import *

SERVER_IP   = '127.0.0.1'
PORT_NUMBER = 5000
SCREEN_X = 400
SCREEN_Y = 400
SIZE = 1024
PIC_PATH = "picture/path/goes/here.bmp"
print ("Test client sending packets to IP {0}, via port {1}\n".format(SERVER_IP, PORT_NUMBER))

mySocket = socket( AF_INET, SOCK_DGRAM )
x = y = 0
screen = pygame.display.set_mode((SCREEN_X, SCREEN_Y)) #Make the screen
ending = False
word = "True"
clock = pygame.time.Clock() #tick-tock
grid = pygame.image.load(PIC_PATH) #Load the sheet
gridRect = grid.get_rect()
screen.blit(grid, gridRect)
pygame.display.flip()
while ending==False:
    for event in pygame.event.get():
        if event.type == KEYDOWN: # key down or up?
            if event.key == K_RIGHT: x+=1
            elif event.key == K_LEFT: x-=1
            elif event.key == K_UP: y-=1
            elif event.key == K_DOWN: y+=1
            if event.key == K_ESCAPE:
                ending=True # Time to leave
                print("Stopped Early by user")
    if ending==True: word="False"
    localTime = strftime( "%H:%M:%S", gmtime() )
    mySocket.sendto( bytes(str(x), 'UTF-8') , (SERVER_IP, PORT_NUMBER) )
    mySocket.sendto( bytes(str(y), 'UTF-8') , (SERVER_IP, PORT_NUMBER) )
    mySocket.sendto( bytes(word, 'UTF-8') , (SERVER_IP, PORT_NUMBER) )
    print ("Sending packet... " + localTime)
    clock.tick(10)
    try:
        (data, addr) = mySocket.recvfrom( SIZE )
        print ("Received packet from: " + str(addr))
        print ("Received: " + data.decode('UTF-8'))
    except: ending=False
    if ending==True:
        pygame.quit()
        sys.exit() 
```

服务器：

```
from socket import socket, gethostbyname, AF_INET, SOCK_DGRAM
import sys
PORT_NUMBER = 5000
SIZE = 1024

hostName = gethostbyname( 'localhost' )

mySocket = socket( AF_INET, SOCK_DGRAM )
mySocket.bind( (hostName, PORT_NUMBER) )

print ("Test server listening on port {0}\n".format(PORT_NUMBER))

flag="True"

while flag=="True":
    #Show that data was received:
    (data, addr) = mySocket.recvfrom( SIZE )
    xer=data.decode('UTF-8')
    print ("Received packet from: " + str(addr) + ", X value:" + str(xer))
    (data, addr) = mySocket.recvfrom( SIZE )
    yer=data.decode('UTF-8')
    print ("Received packet from: " + str(addr) + ", Y value:" + str(yer))
    #Check to see if the other program wants to close:
    (flagger, addr) = mySocket.recvfrom( SIZE )
    flag=flagger.decode('UTF-8')
    #Send a message back to the client:
    if flag=="False": s="Good-bye!"
    else: s="Read you loud and clear"
    mySocket.sendto( bytes(s, 'UTF-8') , (addr) )
sys.exit() 
```

万一你想知道为什么客户端这么大，那是因为我正在尝试用 pygame 制作一个多人游戏。不是互联网，而是我的两台计算机之间的 LAN 或无线网络。我对套接字和网络相关的东西非常陌生（我不知道 LAN 是否与无线基本相同或什么），因此非常感谢您对此的任何帮助。:)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-11T18:06:06.857

不要绑定到本地主机。这意味着您的服务器只会监听自己。如果您绑定到`0.0.0.0`，这将确保您的服务器正在侦听可以访问它的每台计算机。（**警告**：可能不安全。）

过分热心的防火墙规则也可能是罪魁祸首。

确保您连接到路由器子网中的服务器 IP。为此，请`ifconfig`在 Mac/Linux 或`ipconfig`Windows 上运行，这可能会向您显示`192.168.x.x`-style IP（与路由器的 IP 不同）。您还可以通过其管理页面查看连接到路由器的计算机和 IP。

在任何给定时间点，连接到 Internet 的计算机都有许多 IP。环回地址仅对您的计算机“可见”。连接到路由器的任何计算机都可以看到`10.x.x.x`IP 。`192.168.x.x`大多数其他 IP 是公共 IP。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-11T18:06:50.110

您应该使用本地网络上计算机的 IP 地址。本地 IP 地址应类似于：

```
|   Device   |      IP     |
|:----------:|:-----------:|
| router     | 192.168.1.1 |
| computer_1 | 192.168.1.2 |
| computer_2 | 192.168.1.3 | 
```

# c# - 将 AutomationProperties.AutomationId 添加到 silverlight 或 wpf 应用程序会导致性能下降吗？或者我应该去哪里看/检查？

> ID：10985113
> 
> 赞同：1
> 
> 时间：2012-06-11T17:55:20.593
> 
> 标签：c#, wpf, silverlight, automation, accessibility

我的公司有一个使用 Silverlight 的大型 Web 应用程序，我想向它添加一些可访问性标签，例如 XAML 中的“AutomationProperties.AutomationId”

我很好奇的是，将这些属性添加到各种控件是否会导致任何显着的性能下降。测试似乎是一件相当困难的事情，我找不到任何说明是否存在性能问题的文档。

有人对此有经验吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T18:56:18.817

检查此论坛线程： [http ://social.msdn.microsoft.com/Forums/en-AU/wpf/thread/af88a252-adb0-4f14-a123-9b5b78a37a6e](http://social.msdn.microsoft.com/Forums/en-AU/wpf/thread/af88a252-adb0-4f14-a123-9b5b78a37a6e)

似乎普遍的共识是，不，使用 AutomationProperties.AutomationId 不应该有明显的性能下降。

# actionscript-3 - AS3 调用可能未定义的方法

> ID：10985119
> 
> 赞同：1
> 
> 时间：2012-06-11T17:55:33.197
> 
> 标签：actionscript-3

当我取消注释 mcMain 时，我遇到了一个非常相似的问题。方法调用。当我尝试在舞台上调用实例时，它显示“1061：通过静态类型 Class 的引用调用可能未定义的方法 addEventListener。”

我之前在另一台计算机上做过类似的事情，我不确定为什么会这样。我正在使用 Adob​​e Flash CS5.5 和 AS3.0。

```
//These variables will note which keys are down
//We don't need the up or down key just yet
//but we will later
var leftKeyDown:Boolean = false;
var upKeyDown:Boolean = false;
var rightKeyDown:Boolean = false;
var downKeyDown:Boolean = false;
//the main character's speed
var mainSpeed:Number = 7;

//adding a listener to mcMain which will make it move
//based on the key strokes that are down
mcMain.addEventListener(Event.ENTER_FRAME, moveChar);
function moveChar(event:Event):void
{
    //if certain keys are down then move the character
    if (leftKeyDown)
    {
        trace("left");
        //mcMain.x -= mainSpeed;
    }
    if (rightKeyDown)
    {
        trace("right");
        //mcMain.x += mainSpeed;
    }
    //if(upKeyDown || mainJumping){
    ////mainJump();
    //}
} 
```

[http://i.stack.imgur.com/PtR7F.png](http://i.stack.imgur.com/PtR7F.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T18:37:05.193

我相信从您的屏幕截图中，您将对象 mcMain 命名为类名，而不是对象名称的实例。单击属性面板并为实例命名，这是您在 AS3 中用来引用它的名称，如果您想在 AS3 中创建对象的新实例，您将使用另一个名称（它实际上是类名）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T18:01:02.507

检查如何`mcMain`定义。应该是类似的东西`var mcMain:MovieClip;`。

# c# - 如何在 C# 中将 Fedex 运输请求类型转换（或转换）为费率请求类型？

> ID：10985120
> 
> 赞同：2
> 
> 时间：2012-06-11T17:55:34.137
> 
> 标签：c#, fedex

所以问题来了：我已经编写了一个应用程序来调用 Fedex**运输**API，但现在我还需要在运输请求之后立即发出单独的**费率**请求。（原因是我需要数据和指标的非帐户费率，但我没有获得第三方发货请求的任何费率）。当我创建费率请求时，我*可以*为简单的值做这样的事情：

```
raterequest.RequestedShipment.ServiceType = (rateReference.ServiceType)shiprequest.RequestedShipment.ServiceType; 
```

但我*不能*对任何复杂类型执行此操作，例如：

```
raterequest.RequestedShipment.Shipper = (rateReference.Shipper)shiprequest.RequestedShipment.Shipper; 
```

甚至像这样：

```
raterequest.RequestedShipment.Shipper.Address = (rateReference.Address)shiprequest.RequestedShipment.Shipper.Address; 
```

...因为.Net 会抱怨它无法在船舶地址类型和费率地址类型之间进行转换（尽管它们是相同的）。我可以一次设置一个“raterequest”参数（即“Address.City”），但这很麻烦而且我最终想做一些更复杂的事情（即使用相同的请求参数调用多个API，而附加代码最少）。是否有任何通用解决方案，以便可以来回转换相同的复杂类型（但在不同的命名空间中）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T18:05:58.207

[Automapper](https://github.com/AutoMapper/AutoMapper)擅长这种事情。当从一种类型复制到另一种类型时，它通常会做“明智的”事情，而当它没有做明智的事情（或需要一些荒谬的事情）时，您可以挂钩并定义应该发生的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T18:09:46.683

您可以定义自定义[隐式](http://msdn.microsoft.com/en-us/library/z5z9kes2%28v=vs.71%29.aspx)转换运算符以在类似的 raterequest 和 shiprequest 类之间进行转换。

# python - 如何使用正则表达式通过整数和科学记数法的数据文件？

> ID：10985122
> 
> 赞同：0
> 
> 时间：2012-06-11T17:55:49.627
> 
> 标签：python, regex, scientific-notation

我拥有的数据文件如下所示：

```
Title
10000XX   1.09876543e+02 
```

此表格中有许多行，第 1 列的值范围为 1000000-2000099，第 2 列的值范围为 -9000 到 9000，包括一些具有负指数的值。我对正则表达式很陌生，所以任何帮助都会很有用。我的程序的其余部分是用 python 编写的，所以我正在使用：

```
re.search() 
```

这种语法的一些帮助会很棒。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T18:31:21.260

正如罗伯特所说，您可以使用该`split()`功能。

假设分隔符是问题中的空格，您可以运行下面的代码以提供值列表，然后按照您的意愿进行操作：

```
>>> line = "10000XX   1.09876543e+02"
>>> line.split()
['10000XX', '1.09876543e+02'] 
```

您可以使用 将第二项转换为浮点数`float()`。例如`float('1.09876543e+02')`

只需遍历您的行并忽略任何不以数字开头的行。

正则表达式有点复杂。

# javascript - jQuery点击动态元素

> ID：10985125
> 
> 赞同：3
> 
> 时间：2012-06-11T17:56:07.290
> 
> 标签：javascript, jquery, html

查看代码的注释：

```
$.each($('input[type="radio"]'), function(){
    var input = $(this);
    var container = $('<div class="radio"></div>');
    var mark = $('<span />');

    input.wrap(container).after(mark);

    container.click(function(){
        alert('test'); // Not triggered.
    });
}); 
```

html是：

```
<input type="radio" value="female" name="gender" /> 
```

任何人都知道为什么单击时未触发警报，是的，它在 CSS 中可见。当我使用：

```
console.log(container); 
```

它确实给了我它所包含的 HTML。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T17:57:12.510

```
$('body').on('click', 'div.radio', function() {

}); 
```

**完整代码**

```
$('body').on('click', 'div.radio', function() {
  alert('test'); 
});

$.each($('input[type="radio"]'), function(){
    var input = $(this);
    var container = $('<div class="radio"></div>');
    var mark = $('<span />');

    input.wrap(container).after(mark);
}); 
```

* * *

### 笔记

而不是`body`，您应该使用`static-element`是 的容器`container`。

* * *

### 为什么你需要这个

您需要委托事件处理程序，因为您的元素动态添加到 DOM 意味着。页面加载后。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T18:43:25.193

经过一些测试，在我看来，“包装”克隆了您将其作为参数传递的对象，或者对该对象的引用丢失了，但我不太确定。

第一个解决方案是在“包装”中移动对象之前分配事件“onclick”。

```
$.each($('input[type="radio"]'), function(){
    var input = $(this);
    var container = $('<div class="radio"></div>');
    var mark = $('<span />');

    $(container).click(function(){
        alert('test'); // triggered now.
    });

    input.wrap(container).after(mark);
}); 
```

简化版：

```
$.each($('input[type="radio"]'), function(){

    var wrapper = $('<div class="radio"></div>').click(function(){
        alert('test'); // triggered now.
    });

     $(this).wrap(wrapper).after($('<span />'));
}); 
```

不要忘记在 onload 函数中 decalare 这个函数

```
$(function(){

   // your code here ....
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T15:37:05.307

我也受此影响，发现**on**仅适用于 jquery 1.7 及更高版本。我在 jquery 1.4.1**上**，并且版本不可用。升级 jquery 是我想要避免的。

谢天谢地，[代表](http://api.jquery.com/delegate/)在那里，它解决了问题。

# c# - 在 Web 服务器上时，asp.net 应用程序不画线

> ID：10985135
> 
> 赞同：1
> 
> 时间：2012-06-11T17:57:01.807
> 
> 标签：c#, asp.net, drawing, webserver

我一直在开发一个 asp.net webapp，它根据你白天的活动在时间表的图像上画一条蓝线。当我在本地机器上调试程序时一切正常，但是当我今天早些时候将它移动到网络服务器并真正尝试时，蓝线没有出现。

例如，你从上午 9 点到 10 点慢跑，然后从上午 10 点到 11 点吃东西，蓝线将从 9 点到 10 点水平划过慢跑部分，然后垂直画到吃饭部分，然后水平画到 11:00。我在时间表网格的 jpg 图像上执行此操作，然后保存新绘制的图像并将其加载到屏幕上的图像控件。

任何想法为什么这在网络服务器上不起作用？

```
Bitmap image = new Bitmap(Server.MapPath("~") + "/Assets/img/grid.jpg");
Graphics graphics = Graphics.FromImage(image);
Pen p = new Pen(Color.Blue, 5);
//graphics.drawline(pen, X1, Y1, X2, Y2)
image.Save(Server.MapPath("~") + "/Assets/img/grids/" + id + "newgrid.jpg");
imgGrid.ImageUrl = "~/Assets/img/grids/" + id + "newgrid.jpg"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T18:06:07.530

绘图 API 不受支持/保证在服务器环境中工作（这是更理论上的问题，通常可以正常工作） - 检查[Windows 或 ASP.NET 服务中的 System.Drawing](https://stackoverflow.com/questions/390532/system-drawing-in-windows-or-asp-net-services)。

您可能在读取或写入文件时遇到问题。将跟踪添加到您的代码中，看看您是否有任何异常。

# r - 如何将向量合并到R中的列表中？

> ID：10985138
> 
> 赞同：1
> 
> 时间：2012-06-11T17:57:10.643
> 
> 标签：r

我得到的是：

```
 > list("",rep(0,2))
 [[1]]
 [1] ""

 [[2]]
 [1] 0 0 
```

但我期望得到的是这样的：

```
 [[1]]
 [1] ""

 [[2]]
 [1] 0

 [[3]]
 [1] 0 
```

有谁知道如何获得合并结果？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T18:15:59.420

你要：

```
c(list(""),rep(0,2)) 
```

# android - 标签是视图还是活动？

> ID：10985141
> 
> 赞同：0
> 
> 时间：2012-06-11T17:57:16.660
> 
> 标签：android

我正在开发一个需要嵌套选项卡（选项卡中的选项卡）的应用程序。例如，我的一个标签是一个消息标签，其中有四个标签——收件箱、撰写、发送、垃圾箱。我的应用程序中有大约 3-4 个这样的嵌套选项卡。我正在寻找一些建议，无论是使这些选项卡分隔活动还是仅查看视图。我已阅读过有关此问题的信息，并且我知道此问题非常特定于应用程序的需求。但作为一个初学者，我对我的方法持怀疑态度。最初我不确定我的代码中是否应该有这么多的活动，因为它会妨碍性能。到目前为止，我已将主选项卡创建为单独的活动，并将嵌套选项卡创建为视图。对于大多数内部选项卡，我只希望用户从选项列表中进行选择，尽管有几个选项卡涉及更多的用户交互。活动方法可以实现的一切都可以通过视图方法实现吗？如果是这样，那么如何？任何的意见都将会有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T19:03:47.777

听起来您可以将这些嵌套选项卡制作成每个父选项卡的不同选项菜单。在第一个选项卡菜单中的每个活动中，您可以添加此...

```
@Override
public boolean onCreateOptionsMenu(Menu menu){
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.optionsmenu,menu);
    return true;
} 
```

然后实现一个监听器..

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case R.id.one: 
        case R.id.two:
        default:
    }
    return true;
} 
```

我认为这是为您的用户提供更多选项卡菜单中每个活动的最佳方式。然后，您可以访问每个`TabActivity`用户当前所在的菜单。他们只需按下默认选项按钮。

# c# - 通过 wp7 上的 api 登录 mediawiki

> ID：10985143
> 
> 赞同：0
> 
> 时间：2012-06-11T17:57:39.370
> 
> 标签：c#, windows-phone-7, class, mediawiki, webrequest

我正在尝试为 wp7 创建一个应用程序以登录维基百科并帮助翻译页面。我一开始就被卡住了，因为我无法通过 mediawiki API 登录。代码的相关部分如下所示：

```
 data.Append("action=login&lgname" + HttpUtility.UrlEncode(textBox1.Text));
        data.Append("&lgpassword=" + HttpUtility.UrlEncode(passwordBox1.Password));

        request.BeginGetRequestStream(new AsyncCallback(GetRequestStreamCallback),request);
        request.BeginGetResponse(new AsyncCallback(GetResponseCallback), request);

        public void GetRequestStreamCallback(IAsyncResult asynchronousResult)
        {
           HttpWebRequest request = (HttpWebRequest)asynchronousResult.AsyncState;
           Stream postStream = request.EndGetRequestStream(asynchronousResult);
           byte[] byteData = UTF8Encoding.UTF8.GetBytes(data.ToString());
           postStream.Write(byteData, 0, data.Length);
           postStream.Close();
        }
        private static void GetResponseCallback(IAsyncResult asynchronousResult)
        {
           HttpWebRequest request = (HttpWebRequest)asynchronousResult.AsyncState;

           HttpWebResponse response = (HttpWebResponse)request.EndGetResponse(asynchronousResult);
           Stream streamResponse = response.GetResponseStream();
           StreamReader streamRead = new StreamReader(streamResponse);
           string responseString = streamRead.ReadToEnd();

           streamResponse.Close();
           streamRead.Close();

           response.Close();
    } 
```

问题是：

在 GetRequestStreamCallback 上，我无法从主函数传递数据字符串。我该怎么做呢？

在 GetResponseCallback 函数上，如何返回响应字符串以便稍后输出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T18:07:28.580

您实际上尝试做的是两个异步操作，一个接一个 - 值得记住的是`BeginXxx`方法在完成之前返回 - 所以在您的情况下，您请求写入请求流，并立即请求回应，所以不好的事情就会接踵而至。

可能值得查看其他示例，例如[开源代码](http://localangle.codeplex.com/SourceControl/changeset/view/16988#210860)中的示例- 您会看到`BeginGetResponse`在完成写入由返回的流之前通常不会调用`EndGetRequestStream`

# python - Python图像调整大小，安装PIL

> ID：10985146
> 
> 赞同：1
> 
> 时间：2012-06-11T17:57:41.873
> 
> 标签：python, image-processing, image-resizing

我想用 Python 做一些图像大小调整。我试图用 Python Image Library 来做这件事。我在吠叫正确的树吗？

我试图从这个来源[http://www.pythonware.com/products/pil/](http://www.pythonware.com/products/pil/)在我的 Mac 上安装 PIL ，但它自 09 年以来一直没有更新。我应该研究一下更新的东西吗？

安装它给我一个错误：

```
unable to execute gcc-4.0: No such file or directory
error: command 'gcc-4.0' failed with exit status 1 
```

我尝试安装 GCC，但我认为我有 4.2.1

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T18:24:45.570

是的 PIL 是正确的模块。但也可以试试 ImageMagick

[http://www.imagemagick.org/script/index.php](http://www.imagemagick.org/script/index.php)

没有 PIL 1.1.7 是最新的，2009 年 11 月 15 日

你可以检查这个[http://passingcuriosity.com/2009/installing-pil-on-mac-os-x-leopard/](http://passingcuriosity.com/2009/installing-pil-on-mac-os-x-leopard/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T18:35:42.163

PIL 是正确的模块，PIL 1.1.7 可能不是您想要的版本。:-)

如果 dilip kumbham 的链接不起作用，可以在[http://pypi.python.org/pypi/Pillow获得 PIL 的一个分支](http://pypi.python.org/pypi/Pillow)

据我所知，该项目主要是关于解决包装问题，因此通常安装起来可能更容易。

# spring - 双击似乎会破坏 Wicket-Spring 注入

> ID：10985147
> 
> 赞同：1
> 
> 时间：2012-06-11T17:57:44.143
> 
> 标签：spring, dependency-injection, wicket, user-input, double-click

我们的应用程序使用 Wicket 前端，使用 Spring 注入来加载我们的 DOA 和管理事务。

我们发现我们的几个用户正在双击链接/按钮，这以某种方式破坏了 Spring 注入，因此对whateverDao.doStuff(obj) 的后续调用会抛出 NPE 此应用程序在我们客户端的内部网络上运行，现在，我们礼貌地要求客户在他们的团队中宣传单击即可使用所有功能。但很明显，这对他们来说正成为一个问题。

一个常见的用例涉及一个“搜索”屏幕，显示当前系统中所有 Foo 对象的列表，如果需要，可以通过搜索参数进行过滤，当单击一个项目时，用户将被带到该特定 Foo 的详细信息页面，最初处于只读模式。接下来，用户可以点击角落的“编辑”按钮切换到编辑模式。然后，用户可能会进行一些更改并单击“保存”（或者可能单击“删除”以删除该项目。）

此场景涉及最多三个步骤的 DAO 调用： 1\. 在搜索页面上，当单击项目时，加载该项目的基本详细信息。2\. 在只读模式的详情页面，点击编辑时，加载该项目的完整详情。3a。在编辑模式下的详细信息页面上，单击“保存”以保留更改。3b。在编辑模式下的详细信息页面上，当单击删除时，进行删除。

在任何这些情况下，如果用户双击*上*一步，*下一步*就会产生错误。再现性约为 33%，浏览器和操作系统之间存在一些差异。

关于防止这种情况的任何见解？

* * *

在下面的示例中，BasePage 是我们对 Wicket WebPage 的自定义扩展，其中包含我们的菜单和其他常见页面元素，而 PageType 是 CREATE、EDIT 和 READ_ONLY 详细信息的枚举。

搜索页面的示例代码（显示的是 Java，HTML 是您所期望的）：

```
import org.apache.wicket.spring.injection.annot.SpringBean;
// and other imports

public class FooManagerPage extends BasePage {

    @SpringBean
    private transient FooDao fooDao;

    public FooManagerPage() {
        SortableDataProvider<Foo> provider = new SortableDataProvider<Foo>(fooDao);

        add(new FeedbackPanel("feedback");

        final Form<Foo> searchFooForm = new Form<Foo>("searchFooForm",
            new CompoundPropertyModel<Foo>(new Foo()));

        // the form's search parameter's go here
        // with a 'search' button that filters table below

        add(searchFooForm)

        List<IColumn<Foo>> columns = new ArrayList<IColumn<Foo>>();
        columns.add(new PropertyColumn<Foo>(Model.of("Name"), "name", "name"));
        // a couple other columns here

        DataTable fooTable = new AjaxFallbackDefaultDataTable<Foo>("fooTable", columns, provider, 10){
            @Override
            protected Item<Foo> newRowItem(String id, int index, final IModel<Foo> model){
                Item<Foo> item = super.newRowItem(id, index, model);
                item.add(new AjaxEventBehavior ("onclick") {
                    @Override
                    protected void onEvent(AjaxRequestTarget target) {
                        Foo foo = fooDao.load(model.getObject().getId());
                        setResponsePage(new FooViewPage(foo, PageType.READ_ONLY));
                    }
                }); 
                return item;
            }
        };

        add(fooTable);
    }
} 
```

查看页面的示例代码（显示 Java，HTML 是您所期望的）::

```
// several imports, including Spring Bean
public class FooFormPage extends BasePage {

    @SpringBean
    private transient fooDao fooDao;

    public FooFormPage(final Foo foo, PageType type) {
        Form<Foo> fooForm = new Form<Foo>("fooForm",
            new CompoundPropertyModel<Foo>(foo));

        // all of Foo's input elements go here
        // are enabled or disabled and sometimes invisible based on PageType

        add(fooForm);

        SubmitLink submitButton = new SubmitLink("save", fooForm){
            @Override
            public void onSubmit() {
                super.onSubmit();
                //***** A double click on the Edit button can cause fooDao to be N.P.E. here *****
                fooDao.save(createInitiativeForm.getModelObject().getId());
                changePageType(PageType.VIEW, createFooForm.getModelObject());
            }
        };
        add(submitButton);

        AjaxLink<Void> editButton = new AjaxLink<Void>("edit"){
            @Override
            public void onClick(AjaxRequestTarget target) {
                // reload the item from DB
                //***** A double click on Search Page item will cause fooDao to be N.P.E. here *****
                Foo foo = fooDao.load(fooForm.getModelObject().getId());
                setResponsePage(new FooPage(foo, PageType.EDIT));
            }
        };
        add(editButton);

        // some stuff here that makes save button invisible in READ_ONLY, and Edit visible only in READ_ONLY
        // delete button is similar (visible only in CREATE)
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-11T19:06:02.577

依赖字段不应标记为`transient`，它们应沿页面序列化。该`wicket-spring`模块在组件/页面创建时将可序列化代理注入到`@SpringBean`带注释的字段中，以便可以安全地序列化它们，而不必担心序列化依赖项本身。

# r - 合并几个因子变量

> ID：10985149
> 
> 赞同：0
> 
> 时间：2012-06-11T17:58:02.420
> 
> 标签：r, merge, r-factor

这是我之前的一个问题的后续：[Combining Survey Items in R/Recoding NAs](https://stackoverflow.com/questions/4658538/combining-survey-items-in-r-recoding-nas)

我有一个包含多个因子变量的数据框，我想将它们组合成一个变量。

```
ID      REGIONA REGIONB REGIONC
A        North     NA      NA
A        South     NA      NA
B        NA      East      NA
B        NA      West      NA
C        NA        NA     North
C        NA        NA     East 
```

我希望组合数据框看起来像这样。

```
ID      REGION
A        North    
A        South     
B        East      
B        West      
C        North       
C        East 
```

使用上一篇文章中的技术 `within(df, x3 <- ifelse(is.na(x1), x2, x1))`适用于数字，但似乎不能很好地处理这些因素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T19:19:07.530

```
 # Reproducing your data frame:

 DF <- data.frame(ID=rep(c('A', 'B', 'C'), each=2), 
                  REGIONA=c('North', 'South', rep('NA', 4) ),
                  REGIONB=c('NA', 'NA', 'East', 'West', 'NA', 'NA'),
                  REGIONC=c(rep('NA', 4), 'North', 'East'))

 # Your data frame contains levels, it is necessary that 'NA' becomes NA, so:

 DF[DF=='NA'] <- NA

 # Removing NA's
 ind <- apply(DF, 2, is.na)
 new <- data.frame(matrix(DF[!ind], nrow(DF)))
 colnames(new) <- c('ID', 'REGION')
 new
  ID REGION
1  A  North
2  A  South
3  B   East
4  B   West
5  C  North
6  C   East 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T18:05:10.883

你需要使用`levels`. 有关更多信息，请查看`?factor`.

```
within(df, x3 <- ifelse(is.na(x1), levels(x2)[x2], levels(x1)[x1])) 
```

或者用你的例子：

```
within(df, x3 <- ifelse(!is.na(REGIONA), 
                        levels(REGIONA)[REGIONA], 
                        ifelse(!is.na(REGIONB), 
                               levels(REGIONB)[REGIONB],
                               levels(REGIONC)[REGIONC]))) 
```

# javascript - 哈希安全漏洞 - 如何修复？

> ID：10985153
> 
> 赞同：1
> 
> 时间：2012-06-11T17:58:14.950
> 
> 标签：javascript, security, greasemonkey, sha

我开发了我的应用程序来使用加盐的 SHA-512 密码哈希。

如果黑客要获取哈希，我可以做些什么来防止黑客使用 Greasemonkey 更改登录页面，从而使密码不被哈希？我预见的攻击向量将使他们能够将他们获得的哈希输入密码输入，然后 Greasemonkey-altered 页面按原样发送该信息（不对输入的密码进行哈希处理，即实际哈希）。

这只是如何使用获取的哈希的一个示例。还有其他方法可以使用 Greasemonkey 更改站点的代码以达到相同的结果。

我想不出任何方法来防止/保护这种类型的攻击。

这里有人想出点什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-11T18:00:46.463

在服务器上散列您的密码。使用 SSL 保护线路。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T21:08:05.350

这个问题是关于 Greasemonkey 拦截密码的漏洞，对吧？

在这种情况下，SSL**无法**防止用户凭据被盗，密码（或哈希，或其他）将直接从用户的浏览器获取并通过[GM_xmlhttpRequest()](http://wiki.greasespot.net/GM_xmlhttpRequest)传输给坏人。

如果您尝试对密码进行编码或散列，在客户端，Greasemonkey 可以拦截甚至替换负责的 JS。

请参阅[“网站可以知道我是否正在运行用户脚本吗？”](https://stackoverflow.com/q/8548141/331508) ，你可以让脚本编写者更难，但最终，如果坏人可以让用户安装 Greasemonkey 脚本（或更糟糕的是，一个完整的附加组件/扩展），那么你只能让它变得更难 - - 并非不可能 - 用户的帐户被盗用。

除非/除非您有证据表明正在使用恶意脚本或附加组件，否则我什至不会担心它。最终，**用户有责任确保其浏览器**和客户端交互的**安全**。

您可以做的事情使脚本编写者更难（并非不可能）：

1.  监视您的日志，检查异常活动（无论如何都应该这样做）。
2.  采取一般保护措施以防止机器人攻击，请参阅[“当机器人攻击时！”](https://stackoverflow.com/q/111576/331508) ， 例如。
3.  *如果检测到实际*脚本或策略，则 警告用户。
4.  监控用户的帐户/操作是否有异常活动。
5.  您可以使用 JS 和一次性编码方式截取输入的密码。这将过滤掉因果脚本而不是确定的脚本。请注意，我不建议这样做，只是为了完整性而将其包括在内。
6.  将密码条目放在 Flash 对话框中。Pure Greasemonkey 很难与 Flash 交互。同样，我不认为这是具有成本效益的，但为了完整性而将其包括在内。
7.  合法用户不需要任何更繁琐的步骤（一次性密码、第三通道身份验证等）。这只会惹恼那些永远爱你的受害者，直到他们找到更好的替代方案或解决方法（他们会这样做）。

# python - 在 blobstore 中更新和保存现有的 blob/文件？

> ID：10985155
> 
> 赞同：3
> 
> 时间：2012-06-11T17:58:17.673
> 
> 标签：python, google-app-engine, blobstore

文档非常清楚如何创建/获取 blob，但我找不到有关如何修改和保存现有 blob 的任何参考。

考虑到 BlobInfo 对象，这实际上可能吗？

[https://developers.google.com/appengine/docs/python/blobstore/overview#Writing_Files_to_the_Blobstore](https://developers.google.com/appengine/docs/python/blobstore/overview#Writing_Files_to_the_Blobstore)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T22:42:24.380

您不能修改现有的 blob。

您可以使用[Files API](https://developers.google.com/appengine/docs/python/blobstore/overview#Writing_Files_to_the_Blobstore)从现有 blob 读取并写入新 blob。

如果您不想使用 Files API 来读取现有的 blob，那么您可以使用[BlobReader](https://developers.google.com/appengine/docs/python/blobstore/blobreaderclass)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-12T02:29:07.713

我使用[http://tsssaver.1conan.com](http://tsssaver.1conan.com)来保存 blob。您输入您的信息，它会发送对所有已签名固件的请求。

您不需要在版本上保存 blob，blob 只是来自 Apple 服务器的一个小文件，它使用您设备的一些信息及其加密密钥来验证还原。

假设您想为当前的 iOS 保存您的 blob，不再由苹果签名，希望您将来可以恢复它，那么您很不走运，因为您可能只能在最后保存您的 blob，但您无法获得 Apple 的加密密钥验证并执行还原以供将来使用。

# java - 获取 Ant 构建错误：无法运行程序“python”

> ID：10985157
> 
> 赞同：3
> 
> 时间：2012-06-11T17:58:20.240
> 
> 标签：java, python, apache, ant

这是构建文件：

```
<exec executable="python" failonerror="true">
  <arg line="${installer.izpack.dir}/utils/wrappers/izpack2exe/izpack2exe.py"/>
  <arg line="--file=${basedir}/installer/EasyIT-installer.jar"/>
  <arg line="--output=${basedir}/installer/EasyIT-installer.exe"/>
  <arg line="--no-upx"/>
</exec> 
```

和输出：

```
BUILD FAILED
E:\Java Projects\Spark Projects\EastIT - Copy\build\build.xml:873: Execute failed: java.io.IOException: Cannot run program "python" (in directory "E:\Java Projects\Spark Projects\EastIT - Copy"): CreateProcess error=2, The system cannot find the file specified
        at java.lang.ProcessBuilder.start(ProcessBuilder.java:1029)
        at java.lang.Runtime.exec(Runtime.java:615)
        at org.apache.tools.ant.taskdefs.Execute$Java13CommandLauncher.exec(Execute.java:8 62)
        at org.apache.tools.ant.taskdefs.Execute.launch(Execute.java:481)
        at org.apache.tools.ant.taskdefs.Execute.execute(Execute.java:495)
        at org.apache.tools.ant.taskdefs.ExecTask.runExecute(ExecTask.java:631)
        at org.apache.tools.ant.taskdefs.ExecTask.runExec(ExecTask.java:672)
        at org.apache.tools.ant.taskdefs.ExecTask.execute(ExecTask.java:498)
        at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
        at sun.reflect.GeneratedMethodAccessor15.invoke(Unknown Source)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.ja va:43)
        at java.lang.reflect.Method.invoke(Method.java:601)
        at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
        at org.apache.tools.ant.Task.perform(Task.java:348)
        at org.apache.tools.ant.Target.execute(Target.java:392)
        at org.apache.tools.ant.Target.performTasks(Target.java:413)
        at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1399)
        at org.apache.tools.ant.Project.executeTarget(Project.java:1368)
        at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java :41)
        at org.apache.tools.ant.Project.executeTargets(Project.java:1251)
        at org.apache.tools.ant.Main.runBuild(Main.java:811)
        at org.apache.tools.ant.Main.startAnt(Main.java:217)
        at org.apache.tools.ant.launch.Launcher.run(Launcher.java:280)
        at org.apache.tools.ant.launch.Launcher.main(Launcher.java:109)
Caused by: java.io.IOException: CreateProcess error=2, The system cannot find the file specified
        at java.lang.ProcessImpl.create(Native Method)
        at java.lang.ProcessImpl.<init>(ProcessImpl.java:189)
        at java.lang.ProcessImpl.start(ProcessImpl.java:133)
        at java.lang.ProcessBuilder.start(ProcessBuilder.java:1021)
        ... 23 more

Total time: 50 seconds 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-11T18:00:05.817

确保它`python`位于运行构建的 PATH 中，或者在`exec`任务中指定 python 可执行文件的绝对路径。

查看[exec 任务](http://ant.apache.org/manual/Tasks/exec.html)的文档，了解有关使用 windows 与非 windows 的任何具体说明。请注意，那里提到了您的具体错误：

> 一个常见的问题是 PATH 上没有可执行文件。如果您收到错误消息无法运行程序“...”：CreateProcess 错误=2。该系统找不到指定的路径。看看你的 PATH 变量。只需直接在命令行上键入命令，如果 Windows 找到它，Ant 也应该这样做。（否则请在用户邮件列表中寻求帮助。）如果 Windows 无法执行程序，请将程序的目录添加到 PATH（设置 PATH=%PATH%;dirOfProgram）或在构建文件的可执行属性中指定绝对路径。

# java - 使用 Com4j API 向 QC 测试用例添加附件时出现问题

> ID：10985161
> 
> 赞同：2
> 
> 时间：2012-06-11T17:58:38.290
> 
> 标签：java, hp-quality-center, com4j

我正在尝试将附件添加到使用 Com4J API 从我的 Java 代码运行的 QC 测试实验室测试用例中。我能够成功运行，但是在下面的代码中添加附件时，会为“IAttachment attach = attachfac.addItem(null).queryInterface(IAttachment.class);”抛出无效参数。在这种情况下，additem 需要 Java 项目对象。我也尝试通过 addItem("")，但随后 attach.Type(1) 失败，原因是：- 无法更改附件类型。谁能帮我解决这个问题：

```
 IBaseFactory obj2 = testset.tsTestFactory().queryInterface(IBaseFactory.class);
 IList tstestlist = obj2.newList("");
  for(Com4jObject obj3:tstestlist){
   ITSTest tstest = obj3.queryInterface(ITSTest.class);
    if(tstest.name().contentEquals("[1]TC1")){
    System.out.println("TC found");
    IRunFactory runfactory = tstest.runFactory().queryInterface(IRunFactory.class);
    IRun run=runfactory.addItem("RunNew").queryInterface(IRun.class);
    run.status("Passed");
    IAttachmentFactory attachfac = run.attachments().queryInterface(IAttachmentFactory.class);
    IAttachment attach = attachfac.addItem("").queryInterface(IAttachment.class);
    attach.type(1);
    attach.fileName("Path to File TC1");
    attach.post();
    run.post();. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-11T13:45:42.637

```
String fileName = new File(Attachment).getName();
String folderName = new File(Attachment).getParent();

try{
        IAttachmentFactory attachfac = tsteststeps.attachments().queryInterface(IAttachmentFactory.class);
    IAttachment attach = attachfac.addItem(fileName).queryInterface(IAttachment.class);
        IExtendedStorage extAttach = attach.attachmentStorage().queryInterface(IExtendedStorage.class);
    extAttach.clientPath(folderName);  
    extAttach.save(fileName, true);
    attach.description(Actual);
    attach.post();
    attach.refresh();                               
}catch(Exception e) {
    System.out.println("QC Exceptione : "+e.getMessage());
} 
```

# c# - Winforms DataGridView Horizo ntal ScrollBar 像 Excel 一样移动

> ID：10985163
> 
> 赞同：0
> 
> 时间：2012-06-11T17:59:08.083
> 
> 标签：c#, winforms, datagridview

我有一个带有许多列的数据网格视图，其中一些列使用自定义代码合并在一起，就像 Excel 一样。我希望我的水平滚动条像 Excel 中的滚动条一样移动，其中每列的移动受到限制。

这里有两种运动。1\. 单击滚动条的箭头进行移动。2.使用滑块移动

我已经实现了第一个要求，当用户单击箭头时，我通过设置属性 Grid.FirstDisplayedScrollingColumnIndex 将位置移动到所需的列索引

第二个动作需要帮助，用户单击并按住滑块并移动它。自定义此运动，使其滑块不滑动，而是直接交错滑动到下一列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T19:30:29.927

如果您的列宽是单个固定大小，则可能有一个简单的解决方案：

设置`DataGridView.HorizontalScrollingOffset`为列的宽度。

# html - IndexedDB - 搜索索引 event.target.result 始终为空

> ID：10985167
> 
> 赞同：2
> 
> 时间：2012-06-11T17:59:31.830
> 
> 标签：html, indexeddb

我无法弄清楚这段代码有什么问题。我有一个 indexedDB 实例。keyPath 是自动生成的。我可以成功地将对象添加到数据库并获取数据库中的所有对象，但是我无法在我创建的索引中成功搜索对象。

见我的 jsfiddle：http: [//jsfiddle.net/R5ngM/13/](http://jsfiddle.net/R5ngM/13/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T23:39:45.140

还没有完美地解决它，但问题似乎是您在对象存储上打开光标，而不是在索引上。使用默认的 keyPath 可以正常工作，但当您尝试使用二级索引时它将无法正常工作。

我认为你想要做的应该是这样的：

```
 var request = null;
    if ( null === index || 'undefined' === typeof index ) {
        request = transaction.openCursor( keyRange );
    } else {
        request = index.openCursor( keyRange );
    }
    request.onsuccess = on_success; 
```

更新：在发现上述索引游标问题后，我花了很多时间寻找错误的地方。这是问题所在：*您要存储的对象是数组而不是对象文字。*

我正在查看您存储的对象并注意到这一点：

```
 var entry = '<li>'+row[0].fname+' '+row[0].lname+'</li>'; 
```

看看你是如何访问`row`数组的第一个元素的？您正在存储一个数组。您的密钥路径（和我）假设存储了一个对象。我相信可以在数组上有一个索引，但无论如何你`keyPath`都关闭了。

[这是一个大体相似的工作代码块](http://jsfiddle.net/taylorbuley/vdeDv/)。我在调试时把它搞砸了，但你会明白要点的。（这是一个很好的片段，所以如果你不介意，我稍后会用它作为其他 StackOverflow 示例的基础。）

如我上面的回答中所述，将光标保持在索引上。然后改成这一行：

```
var entry = '<li>'+row[0].fname+' '+row[0].lname+'</li>'; 
```

而改变这个：

```
var newUser = [{fname:$('#fname').val(),lname:$('#lname').val()}]; 
```

对此：

```
var newUser = {fname:$('#fname').val(),lname:$('#lname').val()}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-10T11:27:50.450

还必须注意，当您在索引上打开游标时，甚至会出现上述问题。如果您在索引上打开游标，但仍然始终为 null，则应仔细检查创建索引的数据类型以及创建索引游标的数据类型。就我而言，我在字符串数据类型上创建了索引，并用 int 在索引上打开了一个游标，这让我发疯了。

# visual-studio-2010 - Visual Studio 调试符号文件 (.pdb) 默认搜索位置

> ID：10985175
> 
> 赞同：1
> 
> 时间：2012-06-11T18:00:23.793
> 
> 标签：visual-studio-2010, debugging, visual-studio-debugging, debug-symbols, pdb

我正在存储一些工件，并且在单独的子目录中有 .lib 文件和 .dll 文件。.pdb 文件是根据启动目录（如 .dll 文件）搜索还是根据链接目录（即相应 .lib 的位置）搜索？

我知道我可以指定搜索路径，但我对 Visual Studio 2010 的默认行为感兴趣。

编辑：Doh，这已经被间接询问和回答过，我在最初的搜索中没有找到这个问题。

[远程调试时 pdb 如何定位（VS 2008）](https://stackoverflow.com/questions/2735033/while-remote-deubgging-how-are-the-pdb-located-vs-2008)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T08:25:45.587

如您所知，当调试器启动会话时，它会开始搜索 PDB 所在的位置。下面的[文章](http://www.codeproject.com/Articles/37883/Symbols-File-Locator)描述了该过程的机制和搜索顺序。

# ios - 如何检测与 CFStream/NSStream 的连接断开？

> ID：10985178
> 
> 赞同：1
> 
> 时间：2012-06-11T18:00:32.813
> 
> 标签：ios, cfnetwork

这是设置：

我有一个使用创建的输入流`CFReadStreamCreateForStreamedHTTPRequest`。它具有`kCFStreamPropertyHTTPAttemptPersistentConnection`属性集（我正在汇集连接）。我连接的服务器正在返回分块编码的数据。

在我们的正常情况下一切正常。我的问题是，如果有任何问题，我正在与之交谈的服务器会断开我的连接。对于我的生活，我无法弄清楚如何检测断开的连接。

在我的流的事件回调中，我只看到`kCFStreamEventEndEncountered`但没有报告任何错误，即使在 Wireshark 中我可以清楚地看到连接在发送流结束分块编码标记之前很久就获得了 FIN。

当服务器断开连接时，我似乎应该收到一个`kCFURLErrorNetworkConnectionLost`错误事件，但我只是遇到了。

任何建议都非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-13T22:11:00.247

经过一番挖掘，但事实证明这实际上是 CFNetwork 的一个问题。我回到 10.4.10 的 Darwin 资源并在 CFHTTPFilter.c 中找到了这条评论

```
// Premature end of stream.  However, some servers send simply CRLF for their last chunk instead of 0CRLF; be tolerant of this. 
```

因此，iOS 和 OS X 中的内置 HTTP 块解码器如果在分块数据块之后成功读取 CRLF 并且在缓冲区。

# android - AchartEngine 背景透明

> ID：10985181
> 
> 赞同：1
> 
> 时间：2012-06-11T18:00:35.957
> 
> 标签：android

我对 achartengine 1.0 有疑问。我将背景设置为透明，`setMarginsColor(Color.argb(0x00, 0x01, 0x01, 0x01));`但情节线偏离图表并且看起来很难看。我如何解决它？x 轴 oisujące 数据如何显示为 1 (1,2,3,4,5 ...) 而不是现在 (1, 1.5, 2, 2,5 ....)？

[http://i.stack.imgur.com/s3MbZ.png](http://i.stack.imgur.com/s3MbZ.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-22T13:59:53.590

要将 X 轴标签设为整数，请尝试以下操作：

```
for(int m=0;m<maximum_possible_value;m++){
    mRenderer.addXTextLabel(m, Integer.toString(m));
}
mRenderer.setXLabels(0);
mRenderer.setShowCustomTextGrid(true); 
```

这会将所有 X 轴标签设置为整数值。maximum_possible_value 是 x 轴上的最大可能值。

# android - 在 onclick 对话框中添加时不显示标记

> ID：10985184
> 
> 赞同：0
> 
> 时间：2012-06-11T18:00:49.937
> 
> 标签：android, google-maps-markers, itemizedoverlay, customdialog

当用户单击地图时，我试图在地图上添加一个标记，
当我在 onTouchEvent 中添加选项卡式位置标记时，地图会在选项卡式位置显示相应的标记，（标题和片段的值是硬编码的） .
但是，问题是，当我应该从用户那里获取标题和片段的值时，我创建了一个自定义提示对话框来输入详细信息。
当我将 addOverlay() 放在按钮的 onclick 事件处理程序中时，未显示相应的标记。
*使用 AVD

**以下代码工作正常**

```
 public class MarkerOverlay extends ItemizedOverlay {

        private ArrayList<OverlayItem> locationOverlayItems = new ArrayList<OverlayItem>();
        private Context locationContext;
        private OverlayItem tabbedLocation;
        private AlertDialog promptDialog;
        private LayoutInflater inflater;
        private TextView info;
        private EditText title;
        private EditText description;

        public MarkerOverlay(Drawable defaultMarker, Context context) {
            super(boundCenterBottom(defaultMarker));
            locationContext = context;
        }   

        public void addOverlay(OverlayItem overlay) {
            locationOverlayItems.add(overlay);
            populate();
        }

        public void removeOverLay(OverlayItem overlay){
            locationOverlayItems.remove(overlay);
            populate();
        }

        @Override
        protected OverlayItem createItem(int arg0) {
            return locationOverlayItems.get(arg0);
        }

        @Override
        public int size() {
            return locationOverlayItems.size();
        }
        public boolean onTouchEvent(MotionEvent event, MapView mapView) {
            if (event.getAction() == 1) {
            int x = (int) event.getX();
            int y = (int) event.getY();
            final GeoPoint geoPoint = mapView.getProjection().fromPixels(x, y);

            tabbedLocation = new OverlayItem(geoPoint, "title","description");                      
            addOverlay(tabbedLocation);

            return false;
            }
       }
} 
```

**这没有给出预期的结果**

```
 public boolean onTouchEvent(MotionEvent event, MapView mapView) {
        if (event.getAction() == 1) {
            int x = (int) event.getX();
            int y = (int) event.getY();
            final GeoPoint geoPoint = mapView.getProjection().fromPixels(x, y);

            inflater = LayoutInflater.from(locationContext);
            View prompt = inflater.inflate(R.layout.marker_prompt, null);

            info = (TextView) prompt.findViewById(R.id.info);
            info.setText(geoPoint.getLatitudeE6() / 1E6 + "," + geoPoint.getLongitudeE6() / 1E6);

            title = (EditText) prompt.findViewById(R.id.title_text);
            description = (EditText) prompt.findViewById(R.id.description_text);

            promptDialog = new AlertDialog.Builder(locationContext)
            .setView(prompt)
            .setTitle("Add marker")
            .setMessage("Specify the details")
            .setPositiveButton("Add", new OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {
                    if(!title.getText().toString().equals("") && !description.getText().toString().equals("")){
                        tabbedLocation = new OverlayItem(geoPoint, title.getText().toString(),
                                description.getText().toString());                      
                        addOverlay(tabbedLocation);
                    }
                }
            })
            .setNegativeButton("Cancel", new OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {
                    promptDialog.cancel();
                }
            }).create();
            promptDialog.show();                
        }
        return false;
    } 
```

请帮忙解决
提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T03:10:34.710

Finally i got it done by the following code with a slightly different approach, with some more functionality such as disabling the dialog while moving the map.

```
 @Override
    public boolean onTouchEvent(MotionEvent event, MapView mapView) {
        int action = event.getAction();
        if (action == MotionEvent.ACTION_UP) {
            if(!moveMap){
                int x = (int) event.getX();
                int y = (int) event.getY();
                geoPoint = mapView.getProjection().fromPixels(x, y);

                final Dialog dialog = new Dialog(locationContext);
                dialog.setContentView(R.layout.marker_prompt);
                dialog.setTitle("Add Marker");

                info = (TextView) dialog.findViewById(R.id.info);
                info.setText(geoPoint.getLatitudeE6() / 1E6 + ","
                        + geoPoint.getLongitudeE6() / 1E6);

                title = (EditText) dialog.findViewById(R.id.title_text);
                description = (EditText) dialog
                        .findViewById(R.id.description_text);

                Button addButton = (Button) dialog.findViewById(R.id.add);
                Button cancelButton = (Button) dialog.findViewById(R.id.cancel);

                addButton.setOnClickListener(new View.OnClickListener() {

                    @Override
                    public void onClick(View v) {
                        if (!title.getText().toString().equals("")
                                && !description.getText().toString()
                                        .equals("")) {
                            titleString = title.getText().toString();
                            snippetString = description.getText().toString();
                            tabbedLocation = new OverlayItem(geoPoint, titleString, snippetString); 
                            addOverlay(tabbedLocation);
//                          Log.d(titleString, snippetString);
                            dialog.dismiss();
                            LocationApplication.getInstance(
                                    locationContext).saveMarker(
                                    geoPoint, tabbedLocation);
                        }
                    }
                });

                cancelButton.setOnClickListener(new View.OnClickListener() {

                    @Override
                    public void onClick(View v) {
                        dialog.dismiss();
                    }
                });

                dialog.show();
            }
        } else if (action == MotionEvent.ACTION_DOWN) {
            moveMap = false;

        } else if (action == MotionEvent.ACTION_MOVE) {
            moveMap = true;
        }
        return false;
    } 
```

Here i'm using Dialog instead alert dialog, `setContentView()` instead inflate the layout. Still i'm not clear why the previous approach did not work.

Anyway, thanks for everyone who just viewed this question :P

# c - 我应该如何在 C 库中返回二进制运算函数的结果？

> ID：10985185
> 
> 赞同：1
> 
> 时间：2012-06-11T18:00:52.077
> 
> 标签：c, performance, memory-management

我正在开发一个 C 库，其中一部分处理一些数学类型并对其进行操作。每种类型都有一个工厂构造函数/析构函数，可以动态分配和释放它们。例如：

```
/* Example type, but illustrates situation very well. */
typdef struct {
    float x;
    float y;
    float z;
} Vector3D;

/* Constructor */
Vector* Vector3D_new(float x, float y, float z) {
     Vector3D* vector = (Vector3D*) malloc(sizeof(Vector3D));
     /* Initialization code here...*/

     return vector;
}

/* Destructor */
void Vector3D_destroy(Vector3D* vector) {
    free(vector);
} 
```

很好很简单，也减轻了用户正确初始化的负担。

现在我主要关心的是如何处理对这些类型进行操作的函数（特别是如何返回结果值。）几乎每个二进制操作都会导致相同类型的新实例，因此，我需要考虑如何给出这个回给用户。我可以按*值*返回东西，但最好传递指针，因为它更快，与构造/析构方法兼容，并且不会给用户留下太多负担。

目前我通过让函数动态分配结果来实现它，然后返回一个指向它的指针：

```
/* Perform an operation, and dynamically return resultant vector */
Vector3D* addVectors(Vector3D* a, Vector3D* b) {
    Vector3D* c = Vector3D_new(
        a->x + b->x,
        a->y + b->y,
        a->z + b->z);

    return c; 
} 
```

通过将值直接返回给用户，它的优点是可以被*链接起来*（例如直接作为参数传递给另一个函数），例如：

```
/* Given three Vector3D*s : a, b, & c */
float dot = dotProduct(crossProduct(a, addVectors(b, c)); 
```

但是考虑到当前的方法，这将导致内存泄漏，因为 ' 的结果`addVectors()`将直接传递给`crossProduct()`，而用户将没有机会获得`free()`它（与`crossProduct()`' 的结果传递给的结果相同`dotProduct()`）。为了使这项工作，一个人必须制作一个指针来保存值，使用它，然后`free()`通过所述指针。

```
Vector3D* d = addVectors(b, c);
Vector3D* e = crossProduct(a, d);
float dot = dotProduct(e);

Vector3D_destroy(d);
Vector3d_destroy(e); 
```

这可行，但不太直观，并且失去了我如此渴望的链接效果。

另一种可能性是让操作函数接受 3 个参数；两个用于操作数，一个用于存储结果，但也不是很直观。

那么我的问题是： 在二进制操作中使用动态内存有哪些*优雅*且*高效的方法？*作为奖励，在现实世界的图书馆中使用的解决方案会非常酷。有任何想法吗？:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T05:01:33.863

除了您提到的内存泄漏之外，您当前的系统还有一些其他问题：

> *   分配到堆*比*普通堆栈操作慢得多。
> *   每个分配也需要为`free()`d，这意味着每个实例都需要至少**2 次**函数调用，而仅使用基于堆栈的设计则不需要。
> *   由于必须手动管理内存，因此为内存泄漏留下了更多空间。
> *   内存分配可能会失败！基于堆栈的系统将缓解这种情况。
> *   使用指针需要取消引用。这比直接访问要慢，并且需要更多（也许是草率的）语法。

除此之外，许多编译器缓存用于程序堆栈的内存，并且可以提供对堆的显着改进（几乎从不缓存（如果可能的话！））

简而言之，一切都依赖堆栈是最好的，不仅是为了性能，还有维护和干净的代码。唯一要记住的是堆栈*是*有限的，而且它也很容易发疯。将堆栈用于短期数据（在这种情况下为二元运算结果），将堆用于较重的长期数据。

我希望这有帮助！:)

[注意：此答案中的大部分信息都归功于@ [Justin](https://stackoverflow.com/users/424581/justin)。]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T19:25:27.810

我会做的很简单

```
Vector3D addVectors(Vector3D a, Vector3D b) {
    Vector3D c;
    c.x = a.x + b.x;
    c.y = a.y + b.y;
    c.z = a.z + b.z;
    return c;
} 
```

如果调用者在堆上确实需要它，他可以自己复制它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T18:51:08.527

在运算符内部进行分配并不像看起来那么方便。
这主要是因为您没有垃圾收集，还因为您必须担心分配失败。

考虑这段代码：

```
Vector3D *v1,*v2,*v3;
Vector3d v4 = addVectors(v1,multiplyVectors(v2,v3)); 
```

看起来很好。
但是从返回的向量会发生什么`multiplyVectors`？内存泄漏。
如果分配失败会发生什么？其他一些功能崩溃。

我会就地添加：
`void addVectors(Vector3D *target, const Vector3D *src);`
这相当于`target += src;`.

# c# - 如何使用 C# 发送自定义获取 HTTP 请求？

> ID：10985188
> 
> 赞同：0
> 
> 时间：2012-06-11T18:01:02.913
> 
> 标签：c#, http

我想发送这样的请求

```
GET /v1/contacts?sid=msgrsessionid
Authorization: OAuth
realm="yahooapis.com",
oauth_consumer_key="dj0yJmk9nM9Y29uc3VtZXJzZWNyZXQmeD1lMg--",
oauth_nonce="24829.2331",
oauth_signature_method="PLAINTEXT",
oauth_timestamp="1219450170",
oauth_token="A%3DuqkiebGpiTJl7ThQxU.jDXXaETYyfEy3xAKPyoavokwOOcZcz8Xs_l1Nvnl._KmCEVCeLkxxT1Y6BgRqf5f98sQWHklBM_anetveR7okK_M_5XEmQ1_1reo3UgKQULT_dQT8Gao3rgz5rJxgmnYrhdWWdfgTdMQVzpbJT2aGkz59NTK1O8yXVE1EvZUCqju7WiFYu.WHNEw.9TWq3g--",
oauth_version="1.0",
oauth_signature="O2AQipLITO0aYHKZc9266RzC94%260af0ef7f79bfb89dd6af87589e4c97b022f594a3" 
```

我正在使用下面的代码，但我得到未经授权的访问（401）异常，这里有什么问题以及如何将上述原始请求作为字符串发送（就像我们使用 telnet 所做的那样）而不是构造为 WebRequest。

```
Uri address = new Uri("https://api.login.yahoo.com/oauth/v2/get_token");
WebRequest request = WebRequest.Create(address);
request.Method = "GET";
request.ContentType = "application/x-www-form-urlencoded";
StringBuilder authHeader = new StringBuilder();
authHeader.Append("Authorization: OAuth ");
authHeader.Append("realm=\"yahooapis.com\", ");
authHeader.Append("oauth_consumer_key=\""+consumerKey+"\", ");
authHeader.Append("oauth_nonce=\""+random+"\", ");
authHeader.Append("oauth_signature_method=\"PLAINTEXT\", ");
authHeader.Append("oauth_timestamp=\""+UnixTimeNow().ToString()+"\", ");
authHeader.Append("oauth_token=\""+requestToken.Trim()+"\", ");
authHeader.Append("oauth_version=\"1.0\", ");            
authHeader.Append("oauth_signature=\""+HttpUtility.UrlEncode(consumerKey+"&"+consumersecret)+"\"");

request.Headers.Add(authHeader.ToString()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T18:28:07.673

如果您想要一个 API 可以让您更好地控制您通过网络发送的数据，[您可以进一步卷起袖子并使用 TcpClient 来代替](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcpclient.aspx)。

也就是说，这不是我推荐的——正如我在上面的评论中提到的那样，[那里有 .Net OAuth 库](https://stackoverflow.com/questions/3997172/oauth-2-0-service-provider-net-libraries)。我在 OAuth 方面的经验充其量只是通过（但足以自信地说“如果你解决了这个问题，你会遇到另一个又一个”），但除非你的产品本身就是一个 OAuth 库，否则我没有想想你为什么不使用别人的。

# php - 如何从 MySQL 列表中删除特定数字

> ID：10985189
> 
> 赞同：0
> 
> 时间：2012-06-11T18:01:07.240
> 
> 标签：php, mysql

我在 MySQL 条目“id_user”中有一个逗号分隔的数字列表，如下所示：

```
127,130,150,12,4,7,8,9 
```

在这个逗号分隔的列表中找到一个数字的最佳方法是什么，并且（1）如果它与其他数字一起使用逗号将其删除，或者（2）如果该数字本身是这样的，则将其自身删除：

```
127 
```

然后更新 MySQL 条目。

因此，如果我想从列表中删除 150，它将在 MySQL 中更新为：

```
127,130,12,4,7,8,9 
```

我想避免尝试删除 id '12' 但最终删除了 127 或 512 等数字中的 '12'

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T18:14:56.390

从字里行间看，在我看来，您将外键列表存储在逗号分隔的字符串字段中以表示多对多关系。这不是一个好主意。

您应该做的是创建一个表来存储关系。

例如，假设您有一个名为的表`users`，并且您想存储它们之间的朋友关系。你正在做的事情是这样的（*注意我意识到这实际上不是一个很好的例子，因为我写了结尾，但我现在坚持使用它*）：

```
 id  |  name  |  friends
------+--------+-----------
  1   | Dave   |  2,4
  2   | Bob    |  1
  3   | Tom    |  4
  4   | Bill   |  1,3 
```

而这样做更好的是这样的：

`users`

```
 id  |  name  
------+--------
  1   | Dave   
  2   | Bob   
  3   | Tom    
  4   | Bill 
```

`friends`

```
 id  |  user  |  friend
------+--------+----------
  1   |   1    |    2
  2   |   1    |    4
  3   |   2    |    1
  4   |   3    |    4
  5   |   4    |    1
  6   |   4    |    3 
```

要选择 Dave 的朋友，您可以这样做

```
SELECT u.*
FROM friends f
JOIN users u ON u.id = f.friend
WHERE f.user = 1 
```

...并删除 Dave 和 Bob 之间的关系（你想在这里做什么），你可以简单地做

```
DELETE FROM friends
WHERE (
  user = 1 AND friend = 2
) OR (
  user = 2 AND friend = 1
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T18:04:28.517

使用 PHP：

```
$array = explode(',', $string);
$pos = array_search('127', $array);
unset($array[$pos]);
$string = implode(',', $array); 
```

或使用 MySQL：

```
REPLACE(column, '127,', '')
REGEX_REPLACE(column, '127$', '') 
```

使用 ^127$获取 UDF REGEX_REPLACE - [https://launchpad.net/mysql-udf-regexp](https://launchpad.net/mysql-udf-regexp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T18:17:19.883

在 PHP 中：

```
$string="," . $string . ",";
str_replace("127,", "", $string); 
```

或者您可以拆分字符串：

```
$list=explode(",",$string);
$new="";
foreach($list as $item){
    if($item!="127"){
         $new.=$item.",";
    }
$new=substr_replace($new ,"",-1); 
```

那应该行得通。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T18:28:44.223

正如[pyrate](https://stackoverflow.com/users/1337343/pyrate)建议在 MySQL 中尝试这个

```
TRIM(BOTH ',' FROM REGEX_REPLACE(column, '127\,?', '')) 
```

使用[UDF](https://launchpad.net/mysql-udf-regexp)

希望这可以帮助

# mysql - 计算mysql数据库中的行数

> ID：10985196
> 
> 赞同：1
> 
> 时间：2012-06-11T18:01:27.727
> 
> 标签：mysql, count, row, mysql-num-rows

我想从具有最小值的行数到具有特定值的行。例如，

```
Name / Point
--------------------
Pikachu  / 7
Voltorb / 1
Abra / 4
Sunflora / 3
Squirtle / 8
Snorlax / 12 
```

我想数到7，所以我得到'4'的返回结果（计算值为1、3、4、7的行）

我知道我应该使用 count() 或 mysql_num_rows() 但我想不出细节。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T18:02:51.430

我想你想要这个：

```
 select count(*) from mytable where Point<=7; 
```

`Count(*)`计算集合中的所有行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T18:03:22.920

如果您正在使用 MySQL，那么您可以按点排序：

```
SELECT count(*) FROM table WHERE Point < 7 ORDER BY Point ASC 
```

如果您想了解有关 ORDER BY 的所有信息，请查看 w3schools 页面：[http ://www.w3schools.com/sql/sql_orderby.asp](http://www.w3schools.com/sql/sql_orderby.asp)

以防万一您只想根据 Point 值计算行数：

```
SELECT count(*) FROM table WHERE Point < 7 GROUP BY Point 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T18:09:27.347

这可以帮助您获得介于值范围之间的行：

```
select count(*) from table where Point >= least_value and Point<= max_value 
```

# html - 一个 应该是矩形或正方形，我们可以使用html5或任何其他网络技术方法使其看起来像菱形吗？

> ID：10985200
> 
> 赞同：1
> 
> 时间：2012-06-11T18:01:18.990
> 
> 标签：html

A`<div></div>`应该是长方形或者正方形，我们可以使用html5或者任何其他的网络技术方法让它看起来像一个菱形吗？

我知道 html5 可以创建一条倾斜的线来书写文本甚至旋转它们。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T18:06:03.243

你正在寻找这样的东西——用你的CSS

```
#rhombusDiv { 
 width: 150px; 
 height: 100px;
 -webkit-transform: skew(20deg);
 -moz-transform: skew(20deg); 
 -o-transform: skew(20deg);
  background: blue;
 } 
```

例如看这个小提琴 - [http://jsfiddle.net/xtXRQ/](http://jsfiddle.net/xtXRQ/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T18:05:43.387

Div 既不是正方形，也不是矩形。它只是定义 HTML 文档中的一个部门或一个部分。您可以通过在其上放置 css 使其像矩形或正方形。

您可以使用 HTML5 Canvas 绘制菱形

[http://www.w3schools.com/html5/html5_canvas.asp](http://www.w3schools.com/html5/html5_canvas.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T18:28:50.437

**是的。** 您可以为此目的使用 RaphaelJS。

请参阅此 jsfiddle 进行演示：http: [//jsfiddle.net/NQtU5/](http://jsfiddle.net/NQtU5/)

[RaphaelJS](http://www.raphaeljs.com)使用 VML / SVG，取决于哪一个可用——这或多或少保证了跨浏览器的兼容性。此方法适用于 IE 和 FF/Safari/Chrome，并为您提供一些界面灵活性。

首先，创建一个名为 r_paper 的绝对定位 DIV：

```
<div id="r_paper"></div> 
```

链接到 RaphaelJS 库，然后在 JavaScript 中执行以下操作：

```
var paper = Raphael( "r_paper" );
paper.path(
    "m10,140 l125,-100 l125,100 l-125,100 l-125,-100"
).attr({
    'stroke-width': 5, fill: 'crimson'
}); 
```

![在此处输入图像描述](../Images/66d301719571edbbfd3632fc6401c60f.png)

请注意，'paper' DIV 元素（将其视为画布）的样式如下：

```
#r_paper { 
    position: absolute;
    width:270px; height:270px;
    left: 100px; top:100px
} 
```

# wpf - WPF 将 ViewModel 属性传递给验证

> ID：10985206
> 
> 赞同：2
> 
> 时间：2012-06-11T18:02:23.807
> 
> 标签：wpf, validation, viewmodel, arguments

我必须在 xaml 中调用validationRules，并且我想将viewmodel（即在datacontext 中）属性作为参数传递。我怎么能做到这一点？

```
 <Binding.ValidationRules>
                        <vm:RiskCodeValidation/>
                    </Binding.ValidationRules> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T08:00:29.493

如果将 ValidationRule.ValidationStep 设置为 ValidationStep.CommitedValue 或 ValidationStep.UpdatedValue，则 Validate 方法中的 value 参数将是 BindingExpression 类型，您可以通过 BindingExpression.DataItem 属性获取 DataContext。

不幸的是，它只有在绑定源更新后才能工作。

* * *

这是一个例子：

```
public class RiskCodeValidation : ValidationRule
{
    public RiskCodeValidation()
        : base(ValidationStep.CommittedValue, true)
    {
    }

    public override ValidationResult Validate(object value, CultureInfo cultureInfo)
    {
        var expression = value as BindingExpression;
        if (expression != null)
        {
            var sourceItem = expression.DataItem;
            if (sourceItem != null)
            {
                var propertyName = expression.ParentBinding != null && expression.ParentBinding.Path != null ? expression.ParentBinding.Path.Path : null;
                var sourceValue = sourceItem.GetType().GetProperty(propertyName).GetValue(sourceItem, null);

                // TODO: do validation logic based on sourceItem, propertyName and sourceValue.
            }
        }

        return ValidationResult.ValidResult;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T07:24:56.293

我要去 WPF ValidationRules 的一个已知限制。我无法绑定依赖属性做 ValidationRules' 属性。这个问题在这里得到解释和解决（由于 WPF 的限制，仍然是丑陋的解决方案）：

[http://michlg.wordpress.com/2010/01/29/wpf-custom-validationrule-with-an-additional-parameter/](http://michlg.wordpress.com/2010/01/29/wpf-custom-validationrule-with-an-additional-parameter/)

[http://www.codeproject.com/Articles/18678/Attaching-a-Virtual-Branch-to-the-Logical-Tree-in](http://www.codeproject.com/Articles/18678/Attaching-a-Virtual-Branch-to-the-Logical-Tree-in)

[http://www.11011.net/wpf-binding-properties](http://www.11011.net/wpf-binding-properties)

或者干脆使用 System.ComponentModel.IDataErrorInfo - 现在要关注这个。

# c++ - 继承类的 C++ 模板构造函数

> ID：10985209
> 
> 赞同：4
> 
> 时间：2012-06-11T18:02:42.850
> 
> 标签：c++, templates, inheritance, constructor

根据我对 C++ 继承的理解，每当调用子类的构造函数时，都会自动调用父类的构造函数。对于模板化的构造函数，模板参数的数据类型是自动推断的，即我们不需要单独指定模板参数。该程序生成一个我似乎不明白的编译错误。

```
#include <iostream>
#include <list>
#include <algorithm>

using namespace std;

class A{
  public:
    int x;
    int y;
    int first(){
      return x;
    }
    int second(){
      return y;
    }
};

class C{
  public:
    float a,b;
    C(){
      a = 0.0f;
      b = 0.0f;
    }
    template<class T>
      C(T t){
        a = t.first();
        b = t.second();
      }
};

class D: public C{
  public:
    float area(){
      return a*b; 
    }
}

int main(){
  A a;
  a.x = 6;
  a.y = 8;
  C c(a);
  D d(a);
  cout<<c.a<<" "<<c.b<<" "<<d.area()<<endl;
} 
```

产生编译错误

```
test.cpp: In function ‘int main()’:
test.cpp:56:8: error: no matching function for call to ‘D::D(A&)’
test.cpp:56:8: note: candidates are:
test.cpp:44:7: note: D::D()
test.cpp:44:7: note:   candidate expects 0 arguments, 1 provided
test.cpp:44:7: note: D::D(const D&)
test.cpp:44:7: note:   no known conversion for argument 1 from ‘A’ to ‘const D&’ 
```

我不知道这里发生了什么。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T18:05:16.677

`D`必须将构造函数参数传递给`C`，因为您没有使用默认构造函数。

```
class D : public C {
public:
    template <typename T> D (T t) : C(t) {}
    float area () { /* ... */ }
}; 
```

错误的原因是您尝试`D`使用参数进行构造，但尚未声明任何允许您这样做的构造函数。此外，您必须将参数传递给`C`，否则编译器将使用`C`的默认构造函数。

编译器错误信息可以这样分析。

```
test.cpp:56:8: error: no matching function for call to ‘D::D(A&)’ 
```

编译器抱怨：

```
D d(a); 
```

并且它无法弄清楚如何`D`在传递类型的东西时构造一个`A`。

然后它显示了它知道的两种构造函数选择：

```
test.cpp:44:7: note: D::D()
test.cpp:44:7: note: D::D(const D&) 
```

它指出，对于每一个，它都有一个不能使用它的原因。对于第一个，它不需要任何参数。对于第二个，它无法将 type`A`转换为 type `D`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T18:32:05.400

> 根据我对 C++ 继承的理解，每当调用子类的构造函数时，都会自动调用父类的构造函数。

注意：父类的构造函数会自动调用，参数与子类的构造函数相同。

至于手头的具体问题：没有为类 D 声明构造函数。您将免费获得一个默认构造函数和复制构造函数，但不是 C 类中基于模板的构造函数。构造函数不是继承的。

# ruby-on-rails - 监控基于 Web 的生产应用程序

> ID：10985214
> 
> 赞同：5
> 
> 时间：2012-06-11T18:03:05.400
> 
> 标签：ruby-on-rails, heroku, amazon-ec2, monitoring

我有几个每周 7 天、每天 25 小时运行的应用程序。它们都是在 Ruby on Rails 上运行的基于 Web 的 saas 应用程序。我们目前在 Heroku 上托管我们的生产应用程序。

我需要一个通知系统来让我知道应用程序何时离线。我知道有很多选择。

我过去使用过 Nagios，但对于我的需要来说，它的配置过于密集。另外，我想要一个我不托管的应用程序。

另外，我有一些正在运行批处理作业的工作实例。能够监控这些可能会很好。

重要的是，即使 Amazon EC2 出现故障，该解决方案仍能提供通知——因此基于 Heroku 或 Engineyard 的解决方案可能无法工作。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-11T18:46:59.217

好的，根据您最初的需要 --- 我会选择其中任何一个进行 heroku 监控。两者都不需要 SSH 来安装

*   [http://www.uptimerobot.com/](http://www.uptimerobot.com/)（当页面没有响应时检查并通过电子邮件发送给您）......我使用它并且效果很好
*   New Relic 可用性[http://newrelic.com/features/availability-monitoring](http://newrelic.com/features/availability-monitoring) --- 如果您已经在使用 new-relic，只需打开它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T23:30:08.707

对于作为批处理作业运行的工作程序实例，请查看[http://www.pushmon.com](http://www.pushmon.com)。每当您的批处理作业成功运行时，您只需要调用一个 URL。注意我与 PushMon 相关联。

我们使用 UptimeRobot 进行网站监控。

# android - 工作 xml 在模拟器或手机中消失了

> ID：10985215
> 
> 赞同：0
> 
> 时间：2012-06-11T18:03:06.667
> 
> 标签：android, xml, layout

我一直在研究我的应用程序，在 android 中，现在已经有一段时间了，突然我的布局开始弄乱我。我有一个基于客户端服务器的游戏，它工作得很好，直到我不知道 xml 在模拟器上消失的情况，甚至在手机上测试时。然而，它在多次尝试后重新出现，但有时需要几天时间. 另外，请注意，缺少按钮的屏幕功能仍然有效，但布局的该区域仍然不可见。游戏从服务器获取数据，该服务器当前托管在我正在测试它的 PC 上。

请帮助了解可能是什么原因。我一无所知...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T19:18:46.690

如果应用程序未正确构建，则可能会发生此类行为。每次你想测试它时尝试**清理 + 构建你的应用程序。**

# jquery - 直接使用jquery打印html内容

> ID：10985216
> 
> 赞同：1
> 
> 时间：2012-06-11T18:03:12.063
> 
> 标签：jquery, ajax, printing

**来自 jquery 的代码片段**

```
$.post("GetData",{

     itemCode:getItemCode

    }, function(html) {

         //want to Print to a printer directly html contents using jquery 

    }); 
```

我想直接将 servlet 响应打印到打印机，它是 html 类型。

我们应该怎么做？是否有任何 jquery 插件可用于执行此操作？或者有一些技巧可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T18:22:24.957

有一个不错的 jQuery 插件可以做到这一点：[jqPrint](https://github.com/tanathos/jquery.jqprint)

# google-app-engine - 在 Google App Engine 上的 dev_appserver.py 中导入 pycrypto 会产生 IOError

> ID：10985222
> 
> 赞同：4
> 
> 时间：2012-06-11T18:03:44.270
> 
> 标签：google-app-engine, pycrypto

我正在尝试使用 测试 Google App Engine 应用程序`dev_appserver.py`，但是当我运行时，我`import Crypto`从`IOError`（即无访问权限）回溯中摘录了以下内容：

```
...
import Crypto
...
File "/System/Library/Frameworks/Python.framework/Versions
      /2.7/lib/python2.7/zipfile.py", line 867, in read
    return self.open(name, "r", pwd).read()
  File "/System/Library/Frameworks/Python.framework/Versions
        /2.7/lib/python2.7/zipfile.py", line 882, in open
    zef_file = open(self.filename, 'rb')
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/
       GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google
       /appengine/tools/dev_appserver_import_hook.py", line 592, in __init__
    raise IOError(errno.EACCES, 'file not accessible', filename)
IOError: [Errno 13] file not accessible: '/Library/Python/2.7/site-packages
                                    /pycrypto-2.3-py2.7-macosx-10.7-intel.egg' 
```

我在 Mac OS X 10.7 上，使用 Python 2.7 和 Google App Engine 1.6.6。

[由于Google App Engine 支持](https://developers.google.com/appengine/docs/python/tools/libraries#PyCrypto)PyCrypto ，我希望它可以在开发服务器上运行。

我知道这会`dev_appserver.py`阻止加载外部文件。但是，我注意到`appengine/tools/dev_appserver_import_hook.py`白名单中似乎包含所有必需的文件（例如`_fastmath`）。

注意，在`app.yaml`我有

```
libraries: 
- name: pycrypto
  version: latest 
```

似乎我遗漏了一些明显但至关重要的东西。任何想法将不胜感激。

* * *

**编辑**有关更多详细信息，请参阅：[https ://code.google.com/p/googleappengine/issues/detail?id=12129](https://code.google.com/p/googleappengine/issues/detail?id=12129)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-01T09:46:42.917

是的，您必须自己安装**第三方库**。谷歌准确地解释了他们平台上提供的版本，所以这应该不是问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-05T15:24:46.417

解决这个问题的最好方法是创建一个虚拟环境并在其中安装 pycrypto。未检测到您的库的原因`app.yaml`很可能是因为您的机器中安装了多个版本的 python，并且您用于运行程序的版本可能与您安装库的版本不同

# java - Java 多态性

> ID：10985223
> 
> 赞同：9
> 
> 时间：2012-06-11T18:03:56.977
> 
> 标签：java, polymorphism, overriding

这个问题只是出于好奇。

我知道当我们通过引用它的超类来调用子类对象的覆盖方法时，JVM 重视对象的类型而不是引用的类型。

这是我的简单代码：

```
class Animal
{
    void eat()
    {
        System.out.println("Animal is eating...");
    }
}
class Horse extends Animal
{
    @Override
    void eat()
    {
        System.out.println("Horse is eating...");
    }
}
public class PolymorphismTest
{
    public static void main(String...args)
    {
        Animal a=new Animal();
        a.eat();

        Animal h= new Horse();
        h.eat();
    }
} 
```

正如预期的那样，我得到了输出：

```
run:
Animal is eating...
Horse is eating...
BUILD SUCCESSFUL (total time: 0 seconds) 
```

现在我的问题是，有什么方法可以使用引用 h 来调用超类的 eat() 方法而不是子类的方法？我知道这是一个有点违反多态性定律的问题，但你永远不知道何时需要这样做。

我试图将引用 h 类型转换为 Animal 但没有运气。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T18:07:59.440

```
class Horse extends Animal
{
    @Override
    void eat()
    {
        super.eat();
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-11T18:08:08.300

不，您必须在被覆盖的方法（即`super.eat()`）中明确地这样做。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-11T18:09:13.943

你不能通过任何形式的类型转换来做到这一点。调用超类方法的唯一方法是像 Brett Holt 展示的那样包装它，或者您必须拥有一个最具体的运行时类型是 Animal 的对象。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-05-09T11:01:22.973

在 Java 中 - 所有方法都是虚拟方法，在调用函数时使用最新实现。

要回答您的问题，请`static`在 Animal 类中创建该方法，然后您将调用 Animal 类的 eat 方法。

```
static void eat(){ 
      System.out.println("Animal is eating..."); 
} 
```

# r - 具有不同调色板的 R 热图

> ID：10985224
> 
> 赞同：4
> 
> 时间：2012-06-11T18:03:59.567
> 
> 标签：r, graphics, colors, ggplot2, heatmap

我正在尝试使用不同的调色板在 R 中创建一个简单的热图。我想使用渐变，以便将低于阈值 N 的所有数字指定为一种颜色（例如紫色），并将所有高于阈值的数字指定为另一种颜色（例如橙色）。数字离阈值越远，颜色应该越深。

这是一个示例数据集：

```
Division,COL1,COL2,COL3,COL4,COL5,COL6,COL7
Division 1,31.9221884012222,75.8181694429368,97.0480443444103,96.295954938978,70.5677134916186,63.0451830103993,93.0396212730557
Division 2,85.7012346852571,29.0621076244861,16.9130333233625,94.6443660184741,19.9103083927184,61.9562198873609,72.3791105207056
Division 3,47.1665125340223,99.4153356179595,8.51091076619923,79.1276383213699,41.915355855599,7.45079894550145,24.6946100145578
Division 4,66.0743870772421,24.6163331903517,78.694460215047,42.04714265652,50.2694897353649,73.0409651994705,87.3745442833751
Division 5,29.6664374880493,35.4036891367286,19.2967326845974,5.48460693098605,32.4517334811389,15.5926876701415,76.0523204226047
Division 6,95.4969164915383,8.63230894319713,61.7535551078618,24.5590241160244,25.5453423131257,56.397921172902,44.4693325087428
Division 7,87.5015622004867,28.7770316936076,56.5095080062747,34.6680747810751,28.1923673115671,65.0204187724739,13.795713102445
Division 8,70.1077231671661,72.4712177179754,38.4903231170028,36.1821102909744,97.0875509083271,17.184783378616,78.2292529474944
Division 9,47.3570406902581,90.2257485780865,65.6037972308695,77.0234781783074,25.6294377148151,84.900529962033,82.5080851092935
Division 10,58.0811711959541,0.493217632174492,58.5604055318981,53.5780876874924,9.12552657537162,20.313960686326,78.1371118500829
Division 11,34.6708688884974,76.711881859228,22.6064443588257,22.1724311355501,5.48891355283558,79.1159523651004,56.8405059166253
Division 12,33.6812808644027,44.1363711375743,70.6362190190703,3.78900407813489,16.6075889021158,9.12654218263924,39.9711143691093 
```

这是一个从上述数据生成热图的简单片段

```
data <- read.csv("dataset.csv", sep=",")
row.names(data) <- data$Division
data <- data[,2:7]
data_matrix <- data.matrix(data) 
heatmap(data_matrix, Rowv=NA, Colv=NA, col = heat.colors(256), scale="column", margins=c(5,10)) 
```

我怎样才能修改上面的代码来产生：

*   50 以上所有数字的颜色渐变（橙色）（数字距离 50 越远，颜色越深）
*   低于 50 的所有数字的颜色渐变（紫色）（数字距离 50 越远，颜色越深）
*   很高兴（但可选）在网格单元格中写入数值
*   很高兴拥有（但可选），为网格单元使用不同的颜色，这正是阈值数（在这种情况下为 50）

**[[编辑]]**

我刚刚[在 SO 上看到了这个问题](https://stackoverflow.com/questions/8161014/custom-heat-map-in-r/8161231#8161231)，这似乎非常相似。答案使用 ggplot （我没有经验），到目前为止，我无法使 ggplot 解决方案适应我稍微复杂的数据。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-11T19:18:42.617

这应该让你大部分时间。（请注意，`scale="none"`如果您希望绘制的颜色与单元格的实际（而不是重新缩放的）值相对应，则需要设置）。

```
ncol <- 100

## Make a vector with n colors
cols <- RColorBrewer:::brewer.pal(11,"PuOr")  # OR c("purple","white","orange")  
rampcols <- colorRampPalette(colors = cols, space="Lab")(ncol)
rampcols[(n/2) + 1] <- rgb(t(col2rgb("green")), maxColorValue=256) 

## Make a vector with n+1 breaks
rampbreaks <- seq(0, 100, length.out = ncol+1)

## Try it out
heatmap(data_matrix, Rowv = NA, Colv = NA, scale="none",
        col = rampcols, breaks = rampbreaks) 
```

![在此处输入图像描述](../Images/5fd31514497238a804d9c5c279d59925.png)

**编辑**

为了更好地控制阈值的位置，我建议创建两个单独的调色板——一个用于小于阈值的值，一个用于高于阈值的值——然后将它们“缝合”在一起。`Min`尝试这样的事情，玩弄, `Max`,等的不同值`Thresh`：

```
nHalf <- 50

Min <- 0
Max <- 100
Thresh <- 50

## Make vector of colors for values below threshold
rc1 <- colorRampPalette(colors = c("purple", "white"), space="Lab")(nHalf)    
## Make vector of colors for values above threshold
rc2 <- colorRampPalette(colors = c("white", "orange"), space="Lab")(nHalf)
rampcols <- c(rc1, rc2)
## In your example, this line sets the color for values between 49 and 51\. 
rampcols[c(nHalf, nHalf+1)] <- rgb(t(col2rgb("green")), maxColorValue=256) 

rb1 <- seq(Min, Thresh, length.out=nHalf+1)
rb2 <- seq(Thresh, Max, length.out=nHalf+1)[-1]
rampbreaks <- c(rb1, rb2)

heatmap(data_matrix, Rowv = NA, Colv = NA, scale="none",
        col = rampcols, breaks = rampbreaks) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-14T16:11:18.343

我发现这个线程非常有用，也从[这里](http://stat.ethz.ch/pipermail/r-help/2013-November/363655.html)提取了一些想法，但出于我的目的，我需要概括一些东西并想使用 RColorBrewer 包。当我正在研究它时，Brewer 博士（以 Color Brewer 闻名）在我的办公室停下来告诉我，我需要在较小的颜色中断中进行插值，而不仅仅是选择端点。我认为其他人可能会觉得这很有用，所以我在这里发布我的功能以供后代使用。

该函数接受您的数据向量、发散的 colorBrewer 调色板的名称以及您的配色方案的中心点（默认为 0）。它输出一个包含 2 个对象的列表：一个 classIntervals 对象和一个颜色向量：该函数设置为插入总共 100 种颜色，但可以小心修改。

```
diverge.color <- function(data,pal_choice="RdGy",centeredOn=0){
  nHalf=50
  Min <- min(data,na.rm=TRUE)
  Max <- max(data,na.rm=TRUE)
  Thresh <- centeredOn
  pal<-brewer.pal(n=11,pal_choice)
  rc1<-colorRampPalette(colors=c(pal[1],pal[2]),space="Lab")(10)
  for(i in 2:10){
    tmp<-colorRampPalette(colors=c(pal[i],pal[i+1]),space="Lab")(10)
    rc1<-c(rc1,tmp)
  }
  rb1 <- seq(Min, Thresh, length.out=nHalf+1)
  rb2 <- seq(Thresh, Max, length.out=nHalf+1)[-1]
  rampbreaks <- c(rb1, rb2)
  cuts <- classIntervals(data, style="fixed",fixedBreaks=rampbreaks)
  return(list(cuts,rc1))
} 
```

在我的工作中，我使用此方案使用 spplot 绘制栅格图层（rs），如下所示：

```
brks<-diverge.color(values(rs))
spplot(rs,col.regions=brks[[2]],at=brks[[1]]$brks,colorkey=TRUE)) 
```

# html - 页脚不会使用 100% 的宽度

> ID：10985225
> 
> 赞同：1
> 
> 时间：2012-06-11T18:04:00.353
> 
> 标签：html, css, footer

我的页脚以及包装器和正文设置为 100% 页面宽度，但由于某种原因，页脚在右侧有一个小的（25 像素左右）间隙。我试过把它移出包装，但没有奏效。正文已经将边距和填充设置为 0。标题没有这个问题。

这是代码：http: [//jsfiddle.net/w63Jk/](http://jsfiddle.net/w63Jk/)

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T18:28:10.147

`width`从你的`#header`作品中删除：

```
#header {
    padding:5px;
    /* width: 100%; */
    background-color:#272727;
    height:100px;
    margin-bottom:30px;
    -webkit-box-shadow: 0 8px 6px -6px black;
       -moz-box-shadow: 0 8px 6px -6px black;
            box-shadow: 0 8px 6px -6px black;

} 
```

那是因为填充正在为元素增加额外的宽度，如果你在你的 CSS 中定义了一个：http: [//jsfiddle.net/w63Jk/2/](http://jsfiddle.net/w63Jk/2/)

适用于 IE、FF 和 Chrome。

信息：如果没有通过 CSS 定义其他宽度，则 DIV 等块元素在默认情况下始终具有其父级的完整可用宽度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T18:24:38.700

其他一些元素的填充可能会影响页脚的宽度。您应该验证 body 和 html 的边距和填充设置为 0：

```
*, html, body { margin: 0px; padding: 0px; } 
```

如果这不能解决它，我会假设某些其他元素的继承/固有边距或填充正在破坏您的页脚。( `p`, `div`, 等等。) 尝试在 Firefox 中打开您的网页并使用 Firebug 或 Chrome 并使用开发人员工具，看看哪些 CSS 可能会影响您。

（要考虑的另一件事：这可能是分层或继承问题吗？您有多个 CSS 文件吗？）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T18:25:29.870

好吧，这就是我所做的

**HTML：**

```
<html>
<body>
    <div id="wrapper">
        <div id="footer">
            Hii
        </div>
    </div>
</body>
</html> 
```

**CSS：**

```
body{
background:red;
width:100%;
height:100%;
padding:0;
margin:0;}

#wrapper{background:green;
width:100%;
padding:0;
height:100%;
margin:0;
position:absolute;}

#footer {
background:#272727;
width:100%;
height:40px;
position:absolute;
bottom:0;
left:0;
margin-top:20px;
-webkit-box-shadow: 0 0px 20px  black;
-moz-box-shadow: 0 0px 20px black;
 box-shadow: 0 0px 20px  black;
}​ 
```

它工作正常。检查您的代码并进行相应的更改。 [按照](http://jsfiddle.net/sumitsharma/sJ9es/)jsFiddle 上的代码链接。

# java - 确定 JOIN 是否导致任何列

> ID：10985228
> 
> 赞同：0
> 
> 时间：2012-06-11T18:04:16.733
> 
> 标签：java, sql, jdbc

我有一个包含多个连接的 sql 语句；有时有由连接产生的记录，有时没有。当连接为空时，这不是错误。

有没有一种方法可以测试特定连接是否为空，而不必捕获在结果集中找不到结果列时发生的异常？

换句话说，如果使用 JDBC，我执行以下 sql 语句：

```
select * from AA left outer join BB on AA.keyField = BB.keyField
  where keyField = "123" 
```

我想知道该联接是否找到了任何字段而不必捕获异常。如果我然后执行 java 语句：

```
String valueString = rs.getString("BB.keyField"); 
```

我得到一个例外。我无法将 rs.getString("BB.keyField") 与 null 进行比较，因为如果 getString 在连接中找不到任何值，它会引发异常。

我希望这能让问题更清楚，我很抱歉一开始没有更多地扩展它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T19:07:08.310

查询不会返回具有此类名称的列。它只会使用列的简单名称（`name`、`keyField`等）。在您的数据库查询工具中执行查询，您将看到为检索到的列分配了哪些名称。

你永远不应该做 a `select *`，并且总是选择特定的列。如果两列具有相同的名称，您应该为列分配别名：

```
select AA.id as aId, AA.name as aName, BB.id as bId, BB.name as bName from ... 
```

然后，您可以安全地使用

```
rs.getString("aId");
rs.getString("bName");
... 
```

此外，抛出的异常包含一条消息，它应该可以帮助您识别问题。阅读。如果您不明白，请发布它。

# matlab - 基于梯度对图像进行阈值处理

> ID：10985231
> 
> 赞同：2
> 
> 时间：2012-06-11T18:04:32.907
> 
> 标签：matlab, image-processing

我在图像的网格中有多个简单的圆形对象，我想从中为对象创建蒙版图像。一个问题是每个物体的光强度是不同的。如此简单的阈值处理不会创建掩码。

作为解决方案，我想基于梯度设置阈值。基本上，我想先找到带有边缘检测的圆圈，然后将圆圈内部设为白色，将圆圈外部设为黑色。但这真的很慢。在matlab上有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T18:12:50.057

我将创建图像的低通滤波版本，并将其用作阈值。应该仔细调整滤镜的“强度”，以使结果遵循光强的分布，但这并不难。

（几年前，当我不得不从脑表面图像中提取血管轮廓时，这种方法对我有用。）

# c - C编程语言，最短路径

> ID：10985232
> 
> 赞同：0
> 
> 时间：2012-06-11T18:04:35.497
> 
> 标签：c, algorithm, shortest-path

我正在编写代码来查找两点之间的最短距离。到目前为止，我的代码运行良好。我的意思是它找到了他们应该通过的距离和路径。我需要打印这些信息，但我应该做一个打印功能。它的工作方式是这样的：例如初始点是 4，最终点是 13。

我应该想出一个算法来检查它们的中间点。假设在 4 和 13 之间有一点：7

4--7--13 现在我需要检查它们之间的每一点，例如：

4--6--7--9--13 更具体地说，它将检查 4-6 和 6-7 以及 7-9 和 9-13 之间是否有一个点。因此，在下一次迭代中，它可能会形成另一个列表，例如：

4--2--6--7--5--9--17--13 现在假设它们之间不会有任何中间值。这就是我应该打印的。我真的很感激任何帮助，建议你可以给我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T18:32:23.880

Warshall-Floyd 算法（由 OP 使用）有一个版本能够确定除了图节点之间的距离之外的路径：

[具有路径重构的 Floyd-Warshall 算法](http://en.wikipedia.org/wiki/Floyd%E2%80%93Warshall_algorithm#Path_reconstruction)

但是，必须注意，这并不是解决[最短路径问题](http://en.wikipedia.org/wiki/SSSP)的最佳算法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T18:09:10.543

这听起来像递归将是做到这一点的最佳方式。如果它已经可以找到最短路径，我假设您编写了一个函数来查找 2 点之间的最短路径。也许您可以递归地分解列表，找到最短路径并将该点附加到列表中。

编辑，对不起，我误读了您的问题，您需要找到中点。将递归函数传递给整个点列表并找到一个中点。如果存在，请将其添加到列表中。如果没有中点，则不要附加任何内容。继续调用这个函数，直到你到达基本情况，这应该是列表中的 1 或 2 个点

# php - 为什么我会随机收到来自 CURL 的“未知 SSL 协议错误”？

> ID：10985233
> 
> 赞同：1
> 
> 时间：2012-06-11T18:04:36.713
> 
> 标签：php, ssl, curl

我已经看过这里： [Curl 请求在 SSL 上失败？](https://stackoverflow.com/questions/3876563/curl-request-is-failing-on-the-ssl)

我的扩展程序已打开，我什至有`curl_setopt( $curl, CURLOPT_SSL_VERIFYHOST, 0);`

我会收到这个错误，可能是对两个不相关的不同服务的请求的千分之一。由于它非常罕见而且我无法复制它，我想知道是否有人遇到过类似的情况。我注意到这里的很多帖子都是关于特定服务的，但这个不是。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T18:10:44.473

这可能与托管远程资源的内容有关，而不是与访问它的方式有关。在任何情况下，您都可以简单地处理此异常并重试。请务必在执行此操作时进行记录，以便您可以跟踪此问题。

另外，不要无限期地重试。如果您可以解决真正的问题，您不希望进程永远运行。重试一次就足够了。

# iphone - Objective C 移动标签

> ID：10985235
> 
> 赞同：0
> 
> 时间：2012-06-11T18:04:43.913
> 
> 标签：iphone, objective-c, drawing

我正在做一个游戏项目，我想做的是在一个窗口中移动一组标签，从屏幕顶部到底部，让用户阅读这些标签，然后消失（就像标签从上到下滑动没有任何触发器）。

我认为循环中的计时器变量可以帮助我根据计时器值滑动和更改它们的位置。

我做了一些研究，但如果你与我分享一篇文章，我可以知道我应该查找什么。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T18:48:39.560

@Chuck 是对的。详细说明：

```
-(void)doTheLabelThing {

    // assume all the labels are in a container view that is 320 wide and 100 tall
    self.labelContainer.frame = CGRectMake(0, -100, 320, 100);

    [UIView animateWithDuration:0.5 animations:^{
        // slide down
        self.labelContainer.frame = CGRectMake(0, 360, 320, 100);
    } completion:^(BOOL finished) {
        // give user 3 seconds to read it
        [UIView animateWithDuration:0.5 delay:3.0 options:0 animations:^{
            // fade out
            self.labelContainer.alpha = 0.0;
        } completion:^(BOOL finished) {
            // restore everything to original state
            self.labelContainer.alpha = 1.0;
            self.labelContainer.frame = CGRectMake(0, -100, 320, 100);
        }];
    }];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T18:12:16.823

不要使用循环或计时器；使用核心动画。只需执行`animateWithDuration:animations:`或类似操作，并将他们的位置设置为您希望他们成为的新位置。

# regex - scala正则表达式奇怪的行为

> ID：10985236
> 
> 赞同：0
> 
> 时间：2012-06-11T18:04:44.767
> 
> 标签：regex, scala

```
scala> val p = "ab|ba|(ab)*a|(ba)*b".r
p: scala.util.matching.Regex = ab|ba|(ab)*a|(ba)*b

scala> val m = p.pattern.matcher _
m: java.lang.CharSequence => java.util.regex.Matcher = <function1>

scala> m("aa").matches
res9: Boolean = false

scala> p.findAllIn("aa").toList
res10: List[String] = List(a, a) 
```

根据 res9，“aa”不应匹配。但是 res10 说有 2 场比赛。你怎么解释这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T20:44:57.860

你在问两个不同的事情：

使用时`m("aa").matches`，您是在询问整个字符串是否`aa`与模式相对应`m`。

当您使用时`p.findAllIn("aa").toList`，您是在询问是否有对应于模式的*子字符串*。`aa``m`

所以，是的，有匹配的子字符串`m`，但完整的字符串`aa`本身没有。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-11T18:06:14.057

`aa`将被匹配，因为您使用`find`.

`(ab)*a`将匹配`a`。

也许你想要一个像这样的表达式：

```
^(?:ab|ba|(?:ab)*a|(?:ba)*b)$ 
```

# android - 如何使用 UI 标记纯文本

> ID：10985237
> 
> 赞同：0
> 
> 时间：2012-06-11T18:04:45.887
> 
> 标签：android, text, view, tags

给定一个纯文本，我想“标记”它的单词。是否存在执行此类 UI 的组件？例如，我想使用“Lorem ipsum dolor sit amet consectetur adipiscing elit”之类的文本并创建如下视图：

![在此处输入图像描述](../Images/8fc6b38c7136cc26c948537e3702354f.png)

我进行了一些搜索，但未能找到一个简短/简单的实现。有人有建议吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T18:29:12.103

回答我自己的问题：我通过创建一个 ViewGroup 并使用自定义按钮填充它来做到这一点。目前，这听起来是最好和最简单的方法。初步的伪代码是：

 **```
View view = findViewById(someId);
foreach (word in theText) {
   Button bt = new button(word); // a new button, with "word" as label
   view.addView(bt);
} 
```**

# php - 通过查询拆分列以将提取插入另一列。不工作

> ID：10985239
> 
> 赞同：0
> 
> 时间：2012-06-11T18:04:58.117
> 
> 标签：php, mysql, select, split

永远工作试图解决我的脚本以从列“part_no”中提取中间五个字符并将数据插入“核心”列（varchar）。格式始终为“000-00000-00”。

我将此脚本作为整个脚本的一部分运行以创建新记录。

该脚本没有错误，但没有插入`cartons_current`.

非常沮丧。

任何帮助，将不胜感激。

记录已创建，但核心列为空白。

![在此处输入图像描述](../Images/fc06d89fa6f680bba1b52b44dd1b1ea6.png)

```
 <?
 $host     = "XXXXXXX";
 $username = "XXXXXXX";
 $password = "XXXXXXX";
 $db_name  = "XXXXXXX";
 $tbl_name = "cartons_current";

 mysql_connect("$host", "$username", "$password") or die("cannot connect");
 mysql_select_db("$db_name") or die("cannot select DB");

 date_default_timezone_set('America/Los_Angeles');
 $date = date("m/d/y g:i A");
 $order = "INSERT INTO cartons_current (orig_time, type, part_no, description, artwork, min, max, qty)
        VALUES
        ('$date','$_POST[type]', '$_POST[part_no]', '$_POST[description]',       '$_POST[artwork]', '$_POST[min]', '$_POST[max]', '$_POST[qty]')";

 $result = mysql_query($order);

 $query2 = "select part_no from cartons_current";
 $sel = mysql_query($query2);
 while($row = mysql_fetch_row($sel)) {
 $core_digits = explode('-',$row[0]);
 $core =$core_digits[1];
 $query3 = "insert  into cartons_current(core) values('$core')";
 $sel2 = mysql_query($query3);
 }

 if ($result) {

 $part_no = $_REQUEST['part_no'] ;

 header("location: inv_fc_new_success.php?part_no=" . urlencode($part_no));
 }
 else {
  header("location: inv_fc_new_fail.php");
 }
 ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T18:20:38.010

如果您尝试将值插入该列中已经存在的行，则需要使用 UPDATE。您可以在一个查询中完成：

```
UPDATE cartons_current
SET core = SUBSTR(part_no, 5, 5) 
```

**编辑：**好的，您正在尝试插入一条新记录，并且您需要提取的核心值：

```
$core = substr($_POST['part_no'], 5, 5);
$type = mysql_real_escape_string($_POST['type']);
$part_no = mysql_real_escape_string($_POST['part_no']);
$description = mysql_real_escape_string($_POST['description']);
$artwork = mysql_real_escape_string($_POST['artwork']);
$min = mysql_real_escape_string($_POST['min']);
$max = mysql_real_escape_string($_POST['max']);
$qty = mysql_real_escape_string($_POST['qty']);
$order = "
    INSERT INTO cartons_current
    (
        orig_time,
        type,
        part_no,
        description,
        artwork,
        min,
        max,
        qty,
        core
    )
    VALUES
    (
        '$date',
        '$type',
        '$part_no',
        '$description',
        '$artwork',
        $min,
        $max,
        $qty,
        '$core'
    )";

$result = mysql_query($order); 
```

如果您使用不推荐使用的函数，请始终[转义](http://php.net/manual/en/function.mysql-real-escape-string.php)`mysql_*`您的输入......但更好的是，使用[PDO](http://php.net/manual/en/book.pdo.php)和[准备好的语句](http://www.php.net/manual/en/pdo.prepared-statements.php)与您的数据库进行交互。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T18:09:14.943

试试[explode()](http://php.net/manual/en/function.explode.php)。split() 已[弃用](http://in3.php.net/manual/en/function.split.php)。

```
$query2 = "select part_no from cartons_current";
$sel = mysql_query($query2);
while($row = mysql_fetch_row($sel)) {
 $core_digits = explode('-',$row[0]);
 $core =$core_digits[1];
 $query3 = "insert  into cartons_current(core) values('$core')";
 $sel2 = mysql_query($query3);
} 
```

# eclipse - 将 Eclipse 的查找/替换对话框移动到视图中？

> ID：10985246
> 
> 赞同：3
> 
> 时间：2012-06-11T18:05:37.570
> 
> 标签：eclipse, macos

我发现 Eclipse（Eclipse 3.7，Indigo，在 Mac OS X 10.6.8 下运行）查找/替换浮动对话框非常烦人。部分时间它最终会掩盖搜索结果。有没有办法让 Eclipse 将 Find/Replace 移动到其他地方？我希望它是一个弹出视图，就像我经常使用控制台、服务器、大纲和其他视图一样。但是，如果它可以合并到它正在搜索的视图中，那也很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T19:35:53.797

Eclipse 的查找/替换对话框是一个对话框，而不是一个视图，因此您不能将它拖放到某个视图区域。

这是一个可能适合您的[Eclipse 搜索插件。](http://wiki.eclipse.org/Eclipse_search_plugin%3a_providing_a_better,_faster,_more_relevant_Eclipse_search.)一直滚动到页面底部以获取软件更新链接。

最坏的情况是，您可以编写自己的 Eclipse 插件来创建执行查找/替换的视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-27T18:55:21.943

## TL;博士

查找/替换不能用作视图。以下是在不妨碍搜索的情况下查找文本的两种方法：

1.  使用增量搜索 ( `CTRL`+ `J`)
2.  使用快速[搜索插件](https://marketplace.eclipse.org/content/quick-search-eclipse#group-details)( `CTRL`++ `SHIFT`)`L`

## 优点和缺点

这两种方法的行为与传统的查找/替换不同，可能需要一些时间来适应。

### 方法 1。

它开箱即用，无需安装插件，但它（当前）不支持粘贴或搜索当前选择（但后者有`CTRL`+ `K`）。您可以使用`UP`and`DOWN`或重复`CTRL`+`J`或`CTRL`++在`SHIFT`匹配`J`之间跳转。

### 方法 2。

这仍然会打开一个对话框，但它会集成搜索结果而不是隐藏它们。我建议调整它的大小以获得良好的预览大小。

默认快捷方式会遮盖“显示键辅助”原始文件，但这可以更改。这是一个额外的安装，AFAIK 仅支持区分大小写的搜索，但它支持搜索选择和粘贴。

它显示文件之间的匹配，从*顶部*打开的编辑器开始（如果您有多个可见的，例如并排，它有时不会从您上次打开的那个开始）。您可以使用`UP`and在匹配之间移动，`DOWN`然后按 Enter 以返回所选匹配的编辑器。

* * *

笔记

我想在 OSX 上你可以用上面的键盘快捷键替换`CTRL`来`CMD`实现相同的效果，但我无法测试它。快捷键可以在 Preferences->General->Keys 中自定义

# java - 通过java类包含一个jsp文件

> ID：10985251
> 
> 赞同：1
> 
> 时间：2012-06-11T18:06:00.687
> 
> 标签：java, jsp, jsp-tags, jspinclude

我是使用 jsp 标签的新手。我定义了一个标签，在用于生成标签的 java 类中，我想包含一个 jsp 文件（内容太长，无法作为 java 字符串很好地维护）。问题是标签没有被解析，而是在返回给浏览器的文件中按原样输出。

我正在尝试做的一个例子：

```
public class myTag extends TagSupport {

    @Override
    public int doStartTag() throws JspException {
        StringBuffer outString = new StringBuffer( "" );
        outString.append( "<table><tr><td>");

        outString.append("<jsp:include file=\"/widgets/myFile.jsp\" />");
        outString.append( "</td></tr></table>");
        try {
        pageContext.getOut().print( outString );
    } catch( IOException exception ) {
        throw new JspException( "ContactViewerTag: " + exception );
    }

        return EVAL_BODY_INCLUDE;
    }
} 
```

请记住，这是我实际使用的非常精简的版本。如果就这么简单，我会简单地从我的主 jsp 文件中调用包含。

有什么办法可以通过java类调用和解析外部jsp文件？如果没有，有人会对我应该如何做这件事有任何建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T18:22:08.957

你能用：

[`PageContext.include`](http://docs.oracle.com/javaee/1.4/api/javax/servlet/jsp/PageContext.html#include%28java.lang.String,%20boolean%29)

使用您的：

[`TagSupport.pageContext`](http://docs.oracle.com/javaee/1.4/api/javax/servlet/jsp/tagext/TagSupport.html#pageContext)

# android - 适配器，进度对话框在片段中不起作用

> ID：10985253
> 
> 赞同：0
> 
> 时间：2012-06-11T18:06:04.510
> 
> 标签：android, android-listview, android-fragments, android-adapter, android-progressbar

我有扩展片段的类

```
public class  oUnit  extends Fragment { 
```

我想填充列表并将其添加到线性布局，所以我使用以下代码

```
public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
                 ProgressDialog connectionProgressDialog = new 

ProgressDialog( getActivity());
          connectionProgressDialog.setCancelable(false);
          connectionProgressDialog.setCanceledOnTouchOutside(false);
          connectionProgressDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
          connectionProgressDialog.setMessage("Uploading Leads...");
          connectionProgressDialog.show();

         View view = inflater.inflate(
                    R.layout.chemounit,
                    container,
                    false);

        //Intialize the record Grid
         LinearLayout formLayout = (LinearLayout)view.findViewById(R.id.UnitGrid);
        formLayout.removeAllViews();

        MainGrid = new ListView(getActivity().getApplicationContext());              
        MainGrid.setVisibility(ListView.VISIBLE);
         LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(
                 LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT);
         params.gravity = Gravity.RIGHT;
         MainGrid.setLayoutParams(params);

         //2\. Call the web Service 

         GlobalVariables appState = (GlobalVariables) getActivity().getApplication();

         Log.d(" in Chemo unit"," the array is has "+  appState.encounters.size());

         MainGrid.setAdapter(new Encounteradapter(view.getContext(),R.id.ChemoUnitGrid ,  appState.encounters));
        // Finally add it 

         formLayout.addView(MainGrid);

       connectionProgressDialog.dismiss();

     return view;
    } 
```

我确定全局变量列表不为空并且包含数据（我用来`log.d` 显示它的长度），适配器类就像

```
public class Encounteradapter   extends ArrayAdapter<Encounter> {

    private final Context context;

    TextView textViewTime ;
    TextView textViewPatientName;
    Button ButottonArrive ;
    Button ButottonEncounter;
    Button ButottonExit; 
    ArrayList<Encounter> Encounters ; 

    public Encounteradapter(Context context, int  ResourceId,
            ArrayList<Encounter> items)
    {

        super(context, ResourceId, items);
        this.context = context;
         this.Encounters = items ; 
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        LayoutInflater inflater = (LayoutInflater) context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        View rowView = inflater.inflate(R.layout.chemounitgrid, parent, false);

        Encounter EncounterObject = Encounters.get(position);

         textViewTime = (TextView) rowView.findViewById(R.id.Time);
        textViewTime.setText(EncounterObject.bookingDate);

        textViewPatientName = (TextView) rowView.findViewById(R.id.Time);
        textViewPatientName.setText(EncounterObject.Name);

        ButottonArrive = (Button) rowView.findViewById(R.id.test1);
        ButottonEncounter = (Button) rowView.findViewById(R.id.test2);
        ButottonExit = (Button) rowView.findViewById(R.id.test3);

        rowView.setTag(position);

        return rowView;
    }
} 
```

但没有出现列表没有出现，我也尝试删除我设置的属性部分，但也没有

这是我尝试在片段 OnCreate() 上显示进度的第二个问题，但它没有出现我使用以下代码

```
 connectionProgressDialog = new ProgressDialog(getActivity());
  connectionProgressDialog.setCancelable(false);
  connectionProgressDialog.setCanceledOnTouchOutside(false);
  connectionProgressDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
  connectionProgressDialog.setMessage("Uploading Leads...");
  connectionProgressDialog.show(); 
```

知道如何解决这个问题，我是否错过了片段中的任何内容

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-11-24T13:55:16.030

## 在 onCreateView 试试这个

```
View view=inflater.inflate(R.layout.chemounit, container, false);
  ProgressDialog connectionProgressDialog = new ProgressDialog(getActivity());
  connectionProgressDialog.setCancelable(false);
  connectionProgressDialog.setCanceledOnTouchOutside(false);
  connectionProgressDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
  connectionProgressDialog.setMessage("Uploading Leads...");
 connectionProgressDialog.show();
 return view; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-12T07:31:20.060

屏幕上没有任何内容是正常的，因为在该`onCreateView`方法中，您会膨胀布局并设置，`ListView`但是当需要返回视图（该片段的布局以及`ListView`放置数据的位置）时，您会执行以下操作：

```
return inflater.inflate(R.layout.chemounit, container, false); 
```

这将再次用空的布局文件膨胀`ListView`（因此您之前所做的所有设置都是无用的，因为您丢弃了第一个 inflated `View`）。相反，您应该返回：

```
return view; 
```

# apache-flex - 无法附加加密的 SQLite 数据库：“无法打开数据库文件”

> ID：10985257
> 
> 赞同：0
> 
> 时间：2012-06-11T18:06:16.890
> 
> 标签：apache-flex, sqlite, air

可以使用相同的加密密钥打开（）数据库并且它工作正常。尝试使用多个加密数据库 - 都可以打开，但不能附加。

这在加密和未加密时有效（bytearray 为空）：

```
connection.open(file, "create", false, 1024, bytearray); 
```

这仅在未加密时有效：

```
connection.attach("db" + newnum.toString(), file, new Responder(attachEncryptedSuccess, openEncryptedError), bytearray); 
```

任何帮助表示赞赏。

更新：

刚刚在这里发现了一个奇怪的模式：

似乎如果我创建一个加密数据库，然后创建新数据库并附加它们，一切正常。

卸载后创建的文件只能使用最初创建它们的命令正确打开。因此，我在使用 open() 之前创建的加密数据库只能使用 open() 方法打开。最初使用 attach() 创建的所有加密数据库只能使用 attach() 打开。首先打开（）哪个数据库也没有关系，也就是哪个是主数据库。它甚至可以不加密。

这是一件很奇怪的事情。这是一个错误吗？还是我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T17:43:18.477

我不久前遇到的一个问题，听起来它可能会影响你。如果您从 AIR 创建两个数据库，那么这应该可以正常工作，但是如果您使用任何外部工具创建了一个 - 通常大多数工具将默认`PRAGMA ENCODING = UTF8`. AIR，作为 Adob​​e，做的事情与直接告诉你他们创建了他们的 UTF16-LE 有点不同。

根据 sqlite 规则，不能以一种或另一种方式附加不同的编码类型。一种验证方法是使用[sqliteman](http://sqliteman.com/)或其他一些 sqlite 编辑器来验证 pragma 设置。

对我来说，我最终不得不从要从模板数据库初始化的种子数据库（空数据库 - 只是标题 - 被 AIR 覆盖）开始。如果我允许 AIR 创建我的起始数据库，它被设置为 UTF16，我无法将 UTF8 模板附加到该数据库。

# javascript - 为什么在 openlayers 中以编程方式切换层会引入这种奇怪的行为？

> ID：10985260
> 
> 赞同：1
> 
> 时间：2012-06-11T18:06:26.187
> 
> 标签：javascript, geolocation, openlayers

我想在单击控制按钮时以编程方式切换图层。

当我这样做时，地图停止正常工作，它变得非常有问题。更准确地说，绘图处理程序在那之后根本无法正常工作。

谁能告诉我如何在图层之间切换并以编程方式控制它们，为什么这不起作用？

这是代码：

```
find_control(editing_toolbar_polygon.getControlsByClass(new RegExp(".*DrawFeature")),"Point").events.register("activate",null,function(e){
    map.removeControl(editing_toolbar_polygon);
    polygon_layer.setVisibility(false);
    vectors.setVisibility(true);
    map.addControl(editing_toolbar_vector);
}); 
```

这个：

```
find_control(editing_toolbar_polygon.getControlsByClass(new RegExp(".*DrawFeature")),"Point") 
```

只是返回一个我在其上设置回调函数的控件`activate`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-31T16:20:28.337

要更改图层，您可以使用以下代码段：

```
map.setBaseLayer(map.layers[0]); 
```

或者您可以使用以下名称找到图层：

```
map.getLayersByName(layerName); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-28T16:16:32.670

要切换地图图层，您应该使用 Map 的方法`setBaseLayer`。请参阅[文档](http://dev.openlayers.org/docs/files/OpenLayers/Map-js.html#OpenLayers.Map.setBaseLayer)。

# android - 以可读形式的android代码获取IP地址

> ID：10985264
> 
> 赞同：0
> 
> 时间：2012-06-11T18:06:46.910
> 
> 标签：android, ip

我是 android 开发的新手，我正在做一个应用程序，它通过短信将 android 设备的 IP 地址发送到另一个设备。我需要像 192.168.0.4 这样的十进制 IP，而不是从下面的代码中获得的十六进制 IP。任何想法如何做到这一点，并感谢您的帮助。

```
 public String getLocalIpAddress()
    {
        try {
            for (Enumeration<NetworkInterface> en = NetworkInterface.getNetworkInterfaces(); en.hasMoreElements();) {
                NetworkInterface intf = en.nextElement();
                for (Enumeration<InetAddress> enumIpAddr = intf.getInetAddresses(); enumIpAddr.hasMoreElements();) {
                    InetAddress inetAddress = enumIpAddr.nextElement();
                    if (!inetAddress.isLoopbackAddress()) {
                        return inetAddress.getHostAddress().toString();

                    }
                 }
             }
         } catch (SocketException ex) {
             Log.e(TAG, ex.toString());
         }

         return null;
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-13T01:03:46.957

```
public static String getLocalIpv4Address(){
    try {
        String ipv4;
        List<NetworkInterface>  nilist = Collections.list(NetworkInterface.getNetworkInterfaces());
        if(nilist.size() > 0){
            for (NetworkInterface ni: nilist){
                List<InetAddress>  ialist = Collections.list(ni.getInetAddresses());
                if(ialist.size()>0){
                    for (InetAddress address: ialist){
                        if (!address.isLoopbackAddress() && InetAddressUtils.isIPv4Address(ipv4=address.getHostAddress())){ 
                            return ipv4;
                        }
                    }
                }

            }
        }

    } catch (SocketException ex) {

    }
    return "";
} 
```

这应该可以吗？仅当可用时，此函数才会返回 ipv4（以 xxx.xxx.xxx.xxx 模式）。

请注意，您提到的那些十六进制值应该是 ipv6 地址。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T18:09:01.223

[这篇文章](http://www.droidnova.com/get-the-ip-address-of-your-device,304.html)解释了如何获取设备的 IP。

这段代码（取自上述帖子）应该以正确的方式为您提供 IP 地址：

```
public String getLocalIpAddress() {
    try {
        for (Enumeration<NetworkInterface> en = NetworkInterface.getNetworkInterfaces(); en.hasMoreElements();) {
            NetworkInterface intf = en.nextElement();
            for (Enumeration<InetAddress> enumIpAddr = intf.getInetAddresses(); enumIpAddr.hasMoreElements();) {
                InetAddress inetAddress = enumIpAddr.nextElement();
                if (!inetAddress.isLoopbackAddress()) {
                    return inetAddress.getHostAddress().toString();
                }
            }
        }
    } catch (SocketException ex) {
        Log.e(LOG_TAG, ex.toString());
    }
    return null;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-23T22:36:20.760

虽然 hungr 的回答是正确的，但我发现如果我循环遍历特定设备“wlan0”的 ip_addresses，例如，第一个地址是 ipv6，第二个是 ipv4。我只返回第一个值，这就是为什么我只得到一个十六进制字符串。

```
for (InetAddress inetAddress : Collections.list(inetAddresses)) {
                String ip_address = inetAddress.getHostAddress();
                Log.d(APP_NAME, "IP: " + ip_address);
                //return if_name + ": " + ip_address;
} 
```

注意我注释掉了“return”

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-12T04:27:36.657

此信息可从 shell 使用`getprop`命令获得。

# excel - 将宏从 1 行扩展到 56 行。应用程序定义错误

> ID：10985267
> 
> 赞同：0
> 
> 时间：2012-06-11T18:06:53.780
> 
> 标签：excel, vba

我从来没有做过 Excel VBA 宏。

我试图组织成单列的数据在 excel 行 22-78 中。

```
 0   0.04    0.08    0.12    0.16    0.2 0.24    0.28    0.32    0.36    0.4 0.44    0.48    0.52    0.56    0.6 0.64    0.68    0.72    0.76    0.8 0.84    0.88    0.92    0.96    1   1.04    1.08    1.12    1.16    1.2 1.24    1.28    1.32    1.36    1.4 1.44    1.48    1.52    1.56    1.6 1.64    1.68    1.72    1.76    1.8 1.84    1.88    1.92    1.96    2   2.04    2.08    2.12    2.16    2.2 2.24    2.28    2.32    2.36    2.4 2.44    2.48    2.52    2.56    2.6 2.64    2.68    2.72    2.76    2.8 2.84    2.88    2.92    2.96    3   3.04    3.08    3.12    3.16    3.2 3.24    3.28    3.32    3.36    3.4 3.44    3.48    3.52    3.56    3.6 3.64    3.68    3.72    3.76    3.8 3.84    3.88    3.92    3.96    4   4.04    4.08    4.12    4.16    4.2 4.24    4.28    4.32    4.36    4.4 4.44    4.48    4.52    4.56    4.6 4.64    4.68    4.72    4.76    4.8 4.84    4.88    4.92    4.96    5   5.04    5.08    5.12    5.16    5.2 5.24    5.28    5.32    5.36    5.4 5.44    5.48    5.52    5.56    5.6 5.64    5.68    5.72    5.76    5.8 5.84    5.88    5.92    5.96    6   6.04    6.08    6.12    6.16    6.2 6.24    6.28    6.32    6.36    6.4 6.44    6.48    6.52    6.56    6.6 6.64    6.68    6.72    6.76    6.8 6.84    6.88    6.92    6.96    7   7.04    7.08    7.12    7.16    7.2 7.24    7.28    7.32    7.36    7.4 7.44    7.48    7.52    7.56    7.6 7.64    7.68    7.72    7.76    7.8 7.84    7.88    7.92    7.96    8   8.04    8.08    8.12    8.16    8.2 8.24    8.28    8.32    8.36    8.4 8.44    8.48    8.52    8.56    8.6 8.64    8.68    8.72    8.76    8.8 8.84    8.88    8.92    8.96    9   9.04    9.08    9.12    9.16    9.2 9.24    9.28    9.32    9.36    9.4 9.44    9.48    9.52    9.56    9.6 9.64    9.68    9.72    9.76    9.8 9.84    9.88    9.92    9.96    10  10.04   10.08   10.12   10.16   10.2    10.24   10.28   10.32   10.36   10.4    10.44   10.48   10.52   10.56   10.6    10.64   10.68   10.72   10.76   10.8    10.84   10.88   10.92   10.96   11  11.04   11.08   11.12   11.16   11.2    11.24   11.28   11.32   11.36   11.4    11.44   11.48   11.52   11.56   11.6    11.64   11.68   11.72   11.76   11.8    11.84   11.88   11.92   11.96   12  12.04   12.08   12.12   12.16   12.2    12.24   12.28   12.32   12.36   12.4    12.44   12.48   12.52   12.56   12.6    12.64   12.68   12.72   12.76   12.8    12.84   12.88   12.92   12.96   13  13.04   13.08   13.12   13.16   13.2    13.24   13.28   13.32   13.36   13.4    13.44   13.48   13.52   13.56   13.6    13.64   13.68   13.72   13.76   13.8    13.84   13.88   13.92   13.96   14  14.04   14.08   14.12   14.16   14.2    14.24   14.28   14.32   14.36   14.4    14.44   14.48   14.52   14.56   14.6    14.64   14.68   14.72   14.76   14.8    14.84   14.88   14.92   14.96   15  15.04   15.08   15.12   15.16   15.2    15.24   15.28   15.32 
```

这是一行中的数据。我从第 22-78 行就有这样的。最终文件的列数相似，但行数更多。我不确定在excel中将其组织成单个列的好方法是什么

我让这个工作了 1 行。这是代码

```
Sub RowsToColumn()
   Dim RN As Range
   Dim RI As Range
   Dim r As Long
   Dim LR As Long
   Application.ScreenUpdating = False
   Columns(1).Insert
   r = 0

   LR = Range("A" & Rows.Count).End(xlUp).row
   For Each RN In Range("A1:A" & LR)
       r = r + 1
       For Each RI In Range(RN, Range("XFD" & RN.row).End(xlToLeft))
           r = r + 1
           Cells(r, 1) = RI
           RI.Clear
       Next RI
   Next RN
   Columns("A:A").SpecialCells(xlCellTypeBlanks).Delete Shift:=xlUp
End Sub 
```

但要将其扩展到 A22-78 行

```
Sub RowsToColumn_Second()
   Dim RN As Range
   Dim RI As Range
   Dim r As Long
   Dim LR As Long
   Dim row As Range
   Dim rng As Range
   Dim cell As Range

   Application.ScreenUpdating = False
   Set rng = Range("A22:A78")
   For Each row In rng.Rows
      Columns(1, rng).Insert
   r = 0
   LR = Range("A" & Rows.Count).End(xlUp).row
   LR = Range("A" & Rows.Count).End(xlUp).row
   For Each RN In Range("A1:A" & LR)
       r = r + 1
       For Each RI In Range(RN, Range("XFD" & RN.row).End(xlToLeft))
           r = r + 1
           Cells(r, 1) = RI
           RI.Clear
       Next RI
   Next RN
   Next row
   Columns("A:A").SpecialCells(xlCellTypeBlanks).Delete Shift:=xlUp
End Sub 
```

这是它说应用程序定义错误1004的地方。它不喜欢 Columns(1, rng).Insert

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T18:26:18.670

复制数据和`Paste Special`-> `Transpose`，这将从行变为列，反之亦然

# sass - Sass：如果我们添加或删除任何导航项，如何将填充平均分配给所有水平导航项？

> ID：10985280
> 
> 赞同：0
> 
> 时间：2012-06-11T18:07:59.203
> 
> 标签：sass

我正在使用 Sass 并希望使这种类型的导航灵活，因此如果客户想从菜单中添加或删除任何项目。那么所有菜单项都应该在可用空间中调整/填充。

![在此处输入图像描述](../Images/ff0fdfb32cd387159bbd116364ed3eaa.png)

有谁知道如何使用 Sass 数学和变量来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T21:41:59.673

你不能用 Sass 来做，因为你需要知道 .nav 列表中的 li 项目的数量。正如您显然知道的那样，您可以使用 javascript 来做到这一点。我是这样做的-> [http://jsfiddle.net/joplomacedo/nTcRv/15/](http://jsfiddle.net/joplomacedo/nTcRv/15/)

# c# - 在 C# 中生成运行哈希（或校验和）？

> ID：10985282
> 
> 赞同：5
> 
> 时间：2012-06-11T18:08:06.100
> 
> 标签：c#, hash, checksum

前言：

我正在执行具有验证提交阶段的数据导入。这个想法是：第一阶段允许从各种来源获取数据，然后在数据库上运行各种插入/更新/验证操作。提交会回滚，但会生成“验证哈希/校验和”。提交阶段是相同的，但是，如果“验证哈希/校验和”相同，则将提交操作。（数据库将在适当的隔离级别下运行。）

限制：

*   输入读取和操作仅向前读取一次
*   不想预先创建一个流（例如不希望写入 MemoryStream），因为可能*有很多*数据。（它可以在我们的服务器/负载上运行，但假装内存有限。）
*   不想“创建我自己的”。（我知道可用的代码，如[Damien 的 CRC-32](http://damieng.com/blog/2006/08/08/calculating_crc32_in_c_and_net)，我可以使用/修改它，但更喜欢“标准”的东西。）

而我（认为我）在寻找什么：

一种基于输入 + 操作生成哈希（例如 SHA1 或 MD5？）或校验和（例如 CRC32，但希望更多）的方法。（输入/操作本身可以散列为更适合校验和生成的值，但能够“写入蒸汽”会很好。）

所以，问题是：

**如何在 C# 中生成运行哈希（或校验和）？**

此外，虽然可以针对 Running 操作修改 CRC32 实现，但运行 SHAx 或 MD5 哈希呢？

我是否缺少某种可以用作适配器的方便的 Stream 方法？

（欢迎批评，但也请在适用的情况下回答上述问题。另外，我不想处理线程。;-)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-11T18:13:44.000

您可以多次调用[HashAlgorithm.TransformBlock](http://msdn.microsoft.com/en-us/library/system.security.cryptography.hashalgorithm.transformblock%28v=vs.90%29.aspx)`TransformFinalBlock` ，然后调用将为您提供所有块的结果。

将您的输入分块（通过从流中读取 x 字节数）并调用`TransformBlock`每个块。

编辑（来自 msdn 示例）：

```
public static void PrintHashMultiBlock(byte[] input, int size)
{
    SHA256Managed sha = new SHA256Managed();
    int offset = 0;

    while (input.Length - offset >= size)
        offset += sha.TransformBlock(input, offset, size, input, offset);

    sha.TransformFinalBlock(input, offset, input.Length - offset);
    Console.WriteLine("MultiBlock {0:00}: {1}", size, BytesToStr(sha.Hash));
} 
```

抱歉，我没有任何现成的示例，尽管对您而言，您基本上是用`input`自己的块替换，然后`size`就是该块中的字节数。您必须自己跟踪偏移量。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-11T18:15:17.607

哈希有一个构建和一个完成阶段。您可以在构建阶段推送任意数量的数据。数据可以随意拆分。最后，您完成哈希操作并获取您的哈希。

您可以使用可写[CryptoStream](http://msdn.microsoft.com/en-us/library/system.security.cryptography.cryptostream.aspx)来写入数据。**这是最简单的方法。**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-11T18:14:39.170

[您可以使用MD5CryptoServiceProvider](http://msdn.microsoft.com/en-us/library/system.security.cryptography.md5cryptoserviceprovider.aspx)的[ComputeHash](http://msdn.microsoft.com/en-us/library/xa627k19.aspx)方法生成 MD5 哈希。它需要一个流作为输入。

创建一个内存或文件流，将您的哈希输入写入其中，然后在完成后调用 ComputeHash 方法。

```
var myStream = new MemoryStream();

// Blah blah, write to the stream...

myStream.Position = 0;

using (var csp = new MD5CryptoServiceProvider()) {
    var myHash = csp.ComputeHash(myStream);
} 
```

编辑：避免建立大量流的一种可能性是在循环中一遍又一遍地调用它并对结果进行异或：

```
// Assuming we had this somewhere:
Byte[] myRunningHash = new Byte[16];

// Later on, from above:
for (var i = 0; i < 16; i++) // I believe MD5 are 16-byte arrays.  Edit accordingly.
    myRunningHash[i] = myRunningHash[i] ^ [myHash[i]; 
```

编辑#2：最后，基于@usr 的回答，您可能可以使用 HashCore 和 HashFinal：

```
using (var csp = new MD5CryptoServiceProvider()) {

    // My example here uses a foreach loop, but an 
    // event-driven stream-like approach is 
    // probably more what you are doing here.
    foreach (byte[] someData in myDataThings)
        csp.HashCore(someData, 0, someData.Length);

    var myHash = csp.HashFinal();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T18:21:23.007

这是规范的方式：

```
using System;
using System.Security.Cryptography;
using System.Text;

public void CreateHash(string sSourceData)
{
    byte[] sourceBytes;
    byte[] hashBytes;

    //create Bytearray from source data
    sourceBytes = ASCIIEncoding.ASCII.GetBytes(sSourceData);

    // calculate 16 Byte Hashcode
    hashBytes = new MD5CryptoServiceProvider().ComputeHash(sourceBytes);
    string sOutput = ByteArrayToHexString(hashBytes);
 }

static string ByteArrayToHexString(byte[] arrInput)
{
    int i;
    StringBuilder sOutput = new StringBuilder(arrInput.Length);
    for (i = 0; i < arrInput.Length - 1; i++)
    {
        sOutput.Append(arrInput[i].ToString("X2"));
    }
    return sOutput.ToString();
} 
```

# android - Android将图像添加到动态列表视图

> ID：10985287
> 
> 赞同：1
> 
> 时间：2012-06-11T18:08:25.763
> 
> 标签：android, listview, dynamic, imageview, drawable

我已经创建了一个将文本传递给 SimpleAdapter 的动态列表视图，但是我想传递信息以使图像从可绘制文件夹中显示出来。这是每一行的 XML 布局：

```
<ImageView 
    android:id="@+id/sport_icon"
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content"
    />    
<TextView  
    android:id="@+id/item_title"
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content" 
    android:textAppearance="?android:attr/textAppearanceMedium"
    android:padding="2dp"
    android:textSize="20dp" />
<LinearLayout
    android:orientation="horizontal"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="right" >
<TextView  
    android:id="@+id/item_subtitle"
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content" 
    android:padding="2dp"
    android:textSize="13dp" />
</LinearLayout>
</LinearLayout> 
```

以及创建列表的代码位：

```
//fill in the list items from the XML document
    for (int i = 0; i < nodes.getLength(); i++) {                           
        HashMap<String, String> map = new HashMap<String, String>();    

        Element e = (Element)nodes.item(i);
        map.put("id", XMLfunctions.getValue(e, "fixture_id"));
        map.put("sport", XMLfunctions.getValue(e, "sport"));
        map.put("teams", XMLfunctions.getValue(e, "team_2") + " v " + XMLfunctions.getValue(e, "team_2"));
        mylist.add(map);            
    }       

    //Make a new listadapter
    ListAdapter adapter = new SimpleAdapter(this, mylist, R.layout.fixture, new String[] { "sport", "teams" }, new int[] { R.id.item_title, R.id.item_subtitle });

    setListAdapter(adapter); 
```

现在，当我传递字符串 sport 时，它只会在 item_title 文本视图中显示诸如“足球”之类的文本。但是我知道这项运动是什么，我希望能够在 sport_icon 图像视图中显示一个图标。运动图标位置的一个示例是@drawable/icon_football。

非常感谢。

* * *

这里的答案是使用下面 Frank 建议的 ListView 创建一个 BaseAdapter。如果其他人想做同样的事情但不知道从哪里开始，我强烈建议您观看[http://www.youtube.com/watch?v=pVs4qKmenQM](http://www.youtube.com/watch?v=pVs4qKmenQM)。这个视频很好地组合在一起，解释了你需要知道的一切。

:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T18:13:00.260

您将不得不扩展 BaseAdapter 之类的东西并检查您在 getView() 中的位置，然后相应地设置您想要使用的图像。只有当所有项目都具有完全相同的格式并且非常简单时，SimpleAdapter 才能很好地工作。

这是一个很好的例子。 [http://thinkandroid.wordpress.com/2010/01/13/custom-baseadapters/](http://thinkandroid.wordpress.com/2010/01/13/custom-baseadapters/)

但我真的建议观看 Romain 和 Adam 的 Google IO 视频 [http://www.youtube.com/watch?v=wDBM6wVEO70](http://www.youtube.com/watch?v=wDBM6wVEO70)

# php - 用于从 gps 数据映射路径的 javascript 库

> ID：10985292
> 
> 赞同：1
> 
> 时间：2012-06-11T18:08:53.273
> 
> 标签：php, javascript, postgresql, map, gps

我正在开发一个应用程序，它从手机获取 gps 数据，将其发送到服务器，然后将 gps 数据映射到网络上的地图上。我计划使用 JSON 将数据从服务器传递到客户端，然后构建地图。

有谁知道这方面的好图书馆？我四处搜索，似乎找不到适合我想要这样做的方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T18:34:43.303

[谷歌地图 API](https://developers.google.com/maps/)浮现在脑海中。

# haskell - 我无法让基于 GADT 的玩具动态类型与参数类型一起使用

> ID：10985298
> 
> 赞同：6
> 
> 时间：2012-06-11T18:09:09.373
> 
> 标签：haskell, gadt, curry-howard

因此，为了帮助我理解一些更高级的 Haskell/GHC 功能和概念，我决定采用基于 GADT 的动态类型数据实现并将其扩展为涵盖参数类型。（我为这个例子的长度道歉。）

```
{-# LANGUAGE GADTs #-}

module Dyn ( Dynamic(..), 
             toDynamic,
             fromDynamic
           ) where

import Control.Applicative

----------------------------------------------------------------
----------------------------------------------------------------
--
-- Equality proofs
--

-- | The type of equality proofs.
data Equal a b where
    Reflexivity :: Equal a a
    -- | Inductive case for parametric types
    Induction   :: Equal a b -> Equal (f a) (f b)

instance Show (Equal a b) where
    show Reflexivity = "Reflexivity"
    show (Induction proof) = "Induction (" ++ show proof ++ ")"

----------------------------------------------------------------
----------------------------------------------------------------
--
-- Type representations
--

-- | Type representations.  If @x :: TypeRep a@, then @x@ is a singleton
-- value that stands in for type @a@.
data TypeRep a where 
    Integer :: TypeRep Integer
    Char :: TypeRep Char
    Maybe :: TypeRep a -> TypeRep (Maybe a)
    List :: TypeRep a -> TypeRep [a]

-- | Typeclass for types that have a TypeRep
class Representable a where
    typeRep :: TypeRep a

instance Representable Integer where typeRep = Integer
instance Representable Char where typeRep = Char

instance Representable a => Representable (Maybe a) where 
    typeRep = Maybe typeRep

instance Representable a => Representable [a] where 
    typeRep = List typeRep

-- | Match two types and return @Just@ an equality proof if they are
-- equal, @Nothing@ if they are not.
matchTypes :: TypeRep a -> TypeRep b -> Maybe (Equal a b)
matchTypes Integer Integer = Just Reflexivity
matchTypes Char Char = Just Reflexivity
matchTypes (List a) (List b) = Induction <$> (matchTypes a b)
matchTypes (Maybe a) (Maybe b) = Induction <$> (matchTypes a b)
matchTypes _ _ = Nothing

instance Show (TypeRep a) where
    show Integer = "Integer"
    show Char = "Char"
    show (List a) = "[" ++ show a ++ "]"
    show (Maybe a) = "Maybe (" ++ show a ++ ")"

----------------------------------------------------------------
----------------------------------------------------------------
--
-- Dynamic data
--

data Dynamic where
    Dyn :: TypeRep a -> a -> Dynamic

instance Show Dynamic where
    show (Dyn typ val) = "Dyn " ++ show typ

-- | Inject a value of a @Representable@ type into @Dynamic@.
toDynamic :: Representable a => a -> Dynamic
toDynamic = Dyn typeRep

-- | Cast a @Dynamic@ into a @Representable@ type.
fromDynamic :: Representable a => Dynamic -> Maybe a
fromDynamic = fromDynamic' typeRep

fromDynamic' :: TypeRep a -> Dynamic -> Maybe a
fromDynamic' target (Dyn source value) = 
    case matchTypes source target of
      Just Reflexivity -> Just value
      Nothing -> Nothing
      -- The following pattern causes compilation to fail.
      Just (Induction _) -> Just value 
```

但是，对此的编译在最后一行失败（我的行号与示例不匹配）：

```
../src/Dyn.hs:105:34:
    Could not deduce (a2 ~ b)
    from the context (a1 ~ f a2, a ~ f b)
      bound by a pattern with constructor
                 Induction :: forall a b (f :: * -> *).
                              Equal a b -> Equal (f a) (f b),
               in a case alternative
      at ../src/Dyn.hs:105:13-23
      `a2' is a rigid type variable bound by
           a pattern with constructor
             Induction :: forall a b (f :: * -> *).
                          Equal a b -> Equal (f a) (f b),
           in a case alternative
           at ../src/Dyn.hs:105:13
      `b' is a rigid type variable bound by
          a pattern with constructor
            Induction :: forall a b (f :: * -> *).
                         Equal a b -> Equal (f a) (f b),
          in a case alternative
          at ../src/Dyn.hs:105:13
    Expected type: a1
      Actual type: a
    In the first argument of `Just', namely `value'
    In the expression: Just value
    In a case alternative: Just (Induction _) -> Just value 
```

按照我的阅读方式，编译器无法确定 in `Inductive :: Equal a b -> Equal (f a) (f b)`，`a`并且`b`对于非底部值必须相等。所以我试过`Inductive :: Equal a a -> Equal (f a) (f a)`了，但是在定义中也失败了`matchTypes :: TypeRep a -> TypeRep b -> Maybe (Equal a b)`：

```
../src/Dyn.hs:66:60:
    Could not deduce (a2 ~ a1)
    from the context (a ~ [a1])
      bound by a pattern with constructor
                 List :: forall a. TypeRep a -> TypeRep [a],
               in an equation for `matchTypes'
      at ../src/Dyn.hs:66:13-18
    or from (b ~ [a2])
      bound by a pattern with constructor
                 List :: forall a. TypeRep a -> TypeRep [a],
               in an equation for `matchTypes'
      at ../src/Dyn.hs:66:22-27
      `a2' is a rigid type variable bound by
           a pattern with constructor
             List :: forall a. TypeRep a -> TypeRep [a],
           in an equation for `matchTypes'
           at ../src/Dyn.hs:66:22
      `a1' is a rigid type variable bound by
           a pattern with constructor
             List :: forall a. TypeRep a -> TypeRep [a],
           in an equation for `matchTypes'
           at ../src/Dyn.hs:66:13
    Expected type: TypeRep a1
      Actual type: TypeRep a
    In the second argument of `matchTypes', namely `b'
    In the second argument of `(<$>)', namely `(matchTypes a b)' 
```

Changing the type of `matchTypes :: TypeRep a -> TypeRep b -> Maybe (Equal a b)` to produce `matchTypes :: TypeRep a -> TypeRep b -> Maybe (Equal a a)` doesn't work (just read it as a proposition). Neither does `matchTypes :: TypeRep a -> TypeRep a -> Maybe (Equal a a)` (another trivial proposition, and this as I understand it would require users of `fromDynamic' to know the`a`in the`TypeRep a`contained in the`Dynamic`).

So, I'm stumped. Any pointers on how to move forward here?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-11T18:23:36.290

The problem is that your pattern's wildcard pattern loses equality information. If you encode induction in this way, you can't write a (finite) collection of patterns that covers all the cases. The solution is to move induction out from your data type into a defined value. The relevant changes look like this:

```
data Equal a b where
    Reflexivity :: Equal a a

induction :: Equal a b -> Equal (f a) (f b)
induction Reflexivity = Reflexivity

matchTypes (List a) (List b) = induction <$> matchTypes a b
matchTypes (Maybe a) (Maybe b) = induction <$> matchTypes a b

fromDynamic' :: TypeRep a -> Dynamic -> Maybe a
fromDynamic' target (Dyn source value) = 
    case matchTypes source target of
      Just Reflexivity -> Just value
      Nothing -> Nothing 
```

This way the patterns in `fromDynamic'` are exhaustive, but don't have any information-losing wildcards.

# asp.net - WP7 - 向推送通知添加身份验证

> ID：10985304
> 
> 赞同：2
> 
> 时间：2012-06-11T18:09:24.943
> 
> 标签：asp.net, windows-phone-7, push-notification, mpns

我希望将身份验证添加到我的 WP7 应用程序。由于[这个 MSDN 示例](http://msdn.microsoft.com/en-us/library/hh202967%28v=vs.92%29.aspx)，我目前有简单的、未经授权的推送通知。

我很难弄清楚我需要在代码中更改什么才能获得身份验证。我已阅读[此 MSDN 文章](http://msdn.microsoft.com/en-us/library/ff941099%28VS.92%29.aspx)并知道我需要将 TLS 证书上传到 App Dev 网站（正在进行中）并在验证后从中获取一些信息。

感谢阅读/帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T18:21:36.263

如果您的意思是要在 WP 应用程序中更改代码，则无需更改任何内容。身份验证只是更改您的 Web 服务与 Microsoft 推送通知服务通信的方式，而不是 Microsoft 推送通知服务与您手机上的应用程序通信的方式。

# ruby-on-rails - 我怎样才能调整这条路线，以便我可以传递额外的参数？

> ID：10985307
> 
> 赞同：0
> 
> 时间：2012-06-11T18:09:38.860
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routes

我不明白嵌套路由的必要性。我确实了解有关 Rails 路线的许多事情。

这是我在这个 Rails 3.2 应用程序中的简单设置：

```
Categories habtm Products 
```

在 routes.rb 中：

```
resources :categories do
  member do
    get 'list_products_in'
    post 'add_to'
    post 'remove_from'
  end
end

resources :products 
```

我基本上已经创建了一个页面，可以从中将产品添加到一个类别中。顶部有一个包含产品的选择框，底部是列表。要将产品添加到列表中，请从选择框中选择一个并单击“添加”按钮。“add_to”是通过 Ajax 调用的。效果很好。

我的问题是，为了让这个应用程序优雅地降级，我希望它也能在没有 Ajax 的情况下工作。但是我的路线都没有正常工作。

从上面我知道，我的自定义路由不希望除了类别 ID 之外还传递 product_id。我的问题是，如何向自定义路由添加更多参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T18:15:14.390

您可以`:variable`在路线中使用分段来提供额外的可变分段。

例如，您可以向您的和路线添加一个`product_id`段：`add_to``remove_from`

```
...
post 'add_to/:product_id'
post 'remove_from/:product_id' 
```

# iphone - 添加了 XCode 未检测到的框架

> ID：10985310
> 
> 赞同：2
> 
> 时间：2012-06-11T18:09:51.247
> 
> 标签：iphone, objective-c, xcode, frameworks, build

我正在尝试将框架添加到我的项目中。我通过 Build Phases -> Link Binary With Libraries -> "+ button" 添加它们。添加它们后，它们会显示为红色，如果我尝试编译我的代码，我会得到：

```
Undefined symbols for architecture i386:
"_OBJC_CLASS_$_ASIHTTPRequest", referenced from:
objc-class-ref in LoginViewController.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

一段时间后，框架在 Build Phases 选项卡中恢复为黑色文本，但代码仍无法编译。这些文件在文件夹中都是完整的，并且位置是“相对于 SDK”，就像所有其他工作框架一样。我之前也遇到过这个问题，当时有问题的框架也保存在我的项目文件夹中，但这次不是这样。我已经阅读了关于这个主题的许多其他主题，但它们似乎是关于早期版本的 XCode。非常感谢您的帮助。

编辑：我正在尝试添加 MobileCoreServices 和 CFNetwork 框架。LoginViewController 是我项目的一部分。

编辑：无论是否包含框架，我都有同样的错误。我认为这是因为 XCode 在我包含它们之后由于某种原因找不到框架。这是我使用引用框架的类的地方。这是来自 LoginViewController

```
__block ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL: url];
[request setCompletionBlock:^{
    NSLog(@"File downloaded.");
    //NSData *data = [request responseData];
    //do stuff with data     
}];
[request setFailedBlock:^{
    NSError *error = [request error];
    NSLog(@"Error downloading file: %@", error.localizedDescription);
}];
[request startAsynchronous]; 
```

我正在尝试进行异步服务器调用以获取数据。

编辑：好的，事实证明我的项目中某些 .m 文件的目标成员资格没有被检查。修复此问题后，我仍然有类似的问题。这是我的新错误

```
Undefined symbols for architecture i386:
"_kReachabilityChangedNotification", referenced from:
  +[ASIHTTPRequest registerForNetworkReachabilityNotifications] in ASIHTTPRequest.o
  +[ASIHTTPRequest unsubscribeFromNetworkReachabilityNotifications] in ASIHTTPRequest.o
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我对此进行了研究，唯一的原因似乎是缺少 MobileCoreServices 和 CFNetwork 框架。这就是我认为最初的问题引起的。我包含了框架，但 XCode 的行为就像它们不存在一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T21:27:56.067

他们更改了默认值，因此它不会添加目标成员资格。选择每个 .m 文件，然后在右侧导航器中选择“目标成员资格”。请务必选中您正在使用的每个文件的复选框。

![截屏](../Images/c0dd18d684c951bf02cacb330a747c02.png)

# php - Android 如何让我的 web 视图显示一个带有连接到 Android Market 的链接的 php 页面？

> ID：10985311
> 
> 赞同：1
> 
> 时间：2012-06-11T18:09:52.510
> 
> 标签：php, android, webview, google-play

我有一个应用程序，我在其中显示一个连接到我的网站 php 文件的 web 视图，以便我可以提供最新的注释，所以我试图在其中放置一个链接，以便用户可以下载我的其他应用程序，问题我面临的是，当点击链接时，它会在 web 视图中打开 google play，而不是打开 android 市场，因此用户必须先登录到他们的 google 帐户才能下载我的应用程序，如果 android 市场打开，每个人都登录这样他们就可以按下载按钮。所以这是我在我的 php 文件中使用的代码

```
 <a href="http://play.google.com/store/apps/details?id=com.my.other.app">Get my other FREE App</a> 
```

阅读开发人员指南，它说当从 Android 设备内部单击网页中的此类链接时，您可以选择使用浏览器或市场应用程序打开它，那么为什么我无法选择。感谢您的任何建议。编辑：这里有几个屏幕截图 ![在此处输入图像描述](../Images/46b27959f6a01dcb6e83fa0d941e1bcd.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T18:19:26.560

听起来这是一个特定于设备的问题。您可能之前点击了一个市场链接，并将市场链接设置为默认在浏览器中打开。要修复此打开的应用程序设置，然后单击您的浏览器。在该文本下方会有一个部分显示“您已将此应用程序设置为某事的默认应用程序”之类的内容，其中将有一个按钮显示“清除默认值”之类的内容。清除您的默认设置，然后再次尝试您的链接。（另外，我应该注意，要让 play.google.com 链接正常工作，您的市场应用程序需要更新）

编辑：[这个](https://stackoverflow.com/questions/3583264/support-for-other-protocols-in-android-webview)问题可能实际上是您正在寻找的。

# python - 在python中解析日期字符串（将字符串转换为日期）

> ID：10985312
> 
> 赞同：8
> 
> 时间：2012-06-11T18:09:53.377
> 
> 标签：python, datetime-parsing

我有一个字符串形式的日期时间字符串：

```
2011-10-23T08:00:00-07:00 
```

我如何将此字符串解析为日期时间对象。

我做了以下阅读文档：

```
date = datetime.strptime(data[4],"%Y-%m-%d%Z") 
```

但是我得到了错误

```
 ValueError: time data '2011-10-23T08:00:00-07:00' does not match format '%Y-%m-%d%Z' 
```

这很清楚。

但我不确定如何阅读这种格式。

有什么建议么。谢谢

编辑：另外，我必须补充一点，我只关心日期部分

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-11T18:11:37.933

标准 datetime.datetime.strptime 存在时区定义问题。使用[dateutil.parser](http://labix.org/python-dateutil)

```
>>> from dateutil import parser
>>> parser.parse("2011-10-23T08:00:00-07:00")
datetime.datetime(2011, 10, 23, 8, 0, tzinfo=tzoffset(None, -25200)) 
```

如果你只关心日期部分，你可以不使用 dateutil.parser 试试：

```
>>> from datetime import datetime
>>> datetime.strptime(data[4].partition('T')[0], '%Y-%m-%d').date()
datetime.date(2011, 10, 23) 
```

# javascript - jasmine + coffeescript - jasmine 跳过测试

> ID：10985318
> 
> 赞同：2
> 
> 时间：2012-06-11T18:10:08.337
> 
> 标签：javascript, coffeescript, jasmine

Jasmine 跳过了我所有的“it”测试，除了描述块中的最后一个测试——我在测试中使用了咖啡脚本，我相信这可能是原因。当我查看由我的 .coffee 测试创建的已编译 JS 时，我发现只有最后一个“it”测试前面有“return”这个词，这可能是跳过其余测试的原因。

我的问题是，我怎样才能让它“返回”所有测试？

编译时最后一个测试的样子：

```
return it("should filter a range of prices", function() { 
```

它之前的样子（这些被规范运行者跳过）：

```
it("should filter a specific price", function() { 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T07:43:10.897

我尝试以不同的方式填充集合，现在它可以工作了。

跳过第一个测试时我的测试是什么样的（specrunner 说通过了 1 个规范，使用此代码跳过了 0 个）：

```
describe "Products Collection", ->
    it "should filter a specific price", ->
        products = new Wishlist.Collections.Products
        products.add({name: 'product1', price: 15.99})
        products.add({name: 'product2', price: 21.99})
        products.add({name: 'product3', price: 21.99})
        products.add({name: 'product4', price: 1.99} )
        match = products.where({price: 21.99})
        expect(match.length).toBe(2)

    it "should filter a range of prices", ->
        products = new Wishlist.Collections.Products
        products.add({name: 'product1', price: 15.99})
        products.add({name: 'product2', price: 21.99})
        products.add({name: 'product3', price: 21.99})
        products.add({name: 'product4', price: 1.99})
        expect(products.priceFilter(16,25).size()).toBe(2) 
```

他们现在的样子（正常工作）：

```
describe "Products Collection", ->
    it "should filter a specific price", ->
        products = new Wishlist.Collections.Products [{name: 'product1', price: 15.99}, {name: 'product2', price: 21.99}, {name: 'product3', price: 21.99}, {name: 'product4', price: 1.99}]
        match = products.where({price: 21.99})
        expect(match.length).toBe(2)

    it "should filter a range of prices", ->
        products = new Wishlist.Collections.Products
        products.add({name: 'product1', price: 15.99})
        products.add({name: 'product2', price: 21.99})
        products.add({name: 'product3', price: 21.99})
        products.add({name: 'product4', price: 1.99})
        expect(products.priceFilter(16,25).size()).toBe(2) 
```

As you can see, using products.add() couldn't be causing the issue, since it works in the 2nd test. I've no clue why it mattered..

# android - 在 Android 版 Chrome 中通过 Google ID 自动登录

> ID：10985320
> 
> 赞同：1
> 
> 时间：2012-06-11T18:10:29.257
> 
> 标签：android, google-chrome, single-sign-on, chrome-for-android

我不知道这一切的全部细节，但我相信谷歌自己的网络资产可以在 Chrome 中执行单点登录，使用 Android 用户的 ID 并获得用户的许可。

在 Chrome 中运行的第三方网络应用是否可以使用此功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T03:16:04.280

您可以使用 AccountManager 获取身份验证令牌。如果您获得了服务的正确令牌，并添加了正确的标头，您应该能够实现类似的目标。

# runtime - 将数学运算添加到标准 TCL 运算

> ID：10985325
> 
> 赞同：2
> 
> 时间：2012-06-11T18:10:46.427
> 
> 标签：runtime, tcl

如您所知，TCL 有一些数学函数，例如**sin**、**cos**和**hypot**，它们在**expr**命令中使用**()**大括号调用，如下所示：

```
puts [expr sin(1.57)] 
```

现在我如何使用 TCL[库函数](http://www.tcl.tk/man/tcl8.5/TclLib/contents.htm)添加一个函数，以便以完全相同的方式调用它，并且正在执行某个**proc**定义的操作。

我想澄清我的问题。假设有一个proc（字符串）如下：

```
proc add { a b } { return [expr $a+$b] } ;# string of a proc 
```

我的 C++ 代码中还有一个 TCL 解释器。现在我想获取*proc*和运行时的字符串，将一个名为**add**的函数注册到[tcl::mathfunc 命名空间](http://www.tcl.tk/man/tcl8.5/TclLib/CrtMathFnc.htm)（我想我应该使用[Tcl_CreateObjCommand](http://www.tcl.tk/man/tcl8.5/TclLib/CrtObjCmd.htm)），以便我可以调用以下内容：

```
puts [expr add(1.57, 1.43)] 
```

如何做到这一点。请你写一个简单的例子。我在 TCL 文档和书籍中找不到任何描述[此命令](http://www.tcl.tk/man/tcl8.5/TclLib/CrtObjCmd.htm)用法的示例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T23:37:58.663

从 C 创建一个函数并不难。为此，您必须编写将执行该操作的命令的实现，并将该实现注册为正确命名空间中的命令。（在 8.4 和之前的版本中，功能是通过一个单独的接口完成的，使用起来有点麻烦；该机制在 8.5 中进行了全面检修。）

## 命令实现

注意签名是定义的，`ignored`这里不使用参数。（当您想要执行诸如将命令绑定到对象之类的操作时，它真的*很棒*`void *`—但它根本不需要进行加法。）

 *```
static int AddCmd(ClientData ignored, Tcl_Interp *interp, int objc,
        Tcl_Obj *const objv[]) {
    double x, y, sum;

    /* First, check number of arguments: command name is objv[0] always */
    if (objc != 3) {
        Tcl_WrongNumArgs(interp, 1, objv, "x y");
        return TCL_ERROR;
    }

    /* Get our arguments as doubles */
    if (    Tcl_GetDoubleFromObj(interp, objv[1], &x) != TCL_OK ||
            Tcl_GetDoubleFromObj(interp, objv[2], &y) != TCL_OK) {
        return TCL_ERROR;
    }

    /* Do the real operation */
    sum = x + y;

    /* Pass the result out */
    Tcl_SetObjResult(interp, Tcl_NewDoubleObj(sum));
    return TCL_OK;
} 
```

不用担心它在这里分配了一个值；Tcl 有一个非常高性能的自定义内存管理器，这使得它成为一种廉价的操作。

## 命令注册

这通常在作为 Tcl 包定义的一部分注册*或*作为整个应用程序初始化的一部分调用的初始化函数内完成。如果您`Tcl_CreateInterp`手动调用，您也可以直接执行此操作。你做什么取决于你是如何与 Tcl 集成的，这本身就是一个很大的话题。所以我将展示如何创建一个初始化函数；在所有情况下，这通常都是一个好的开始。

```
int Add_Init(Tcl_Interp *interp) {
    /* Use the fully-qualified name */
    Tcl_CreateObjCommand(interp, "::tcl::mathfunc::add", AddCmd, NULL, NULL);
    return TCL_OK;
} 
```

第一个`NULL`是作为第一个 ( `ClientData`) 参数传递给实现的值。第二个是处理的回调`ClientData`（如果不需要操作，则为 NULL，如此处）。

Doing all this from C++ is also quite practical, but remember that Tcl is a *C* library, so they have to be functions (not methods, not without an adapter) and they need C linkage.

* * *

To get the body of a procedure from C (or C++), by far the easiest mechanism is to use `Tcl_Eval` to run a simple script to run `info body theCmdName`. Procedure implementations are *very complex indeed*, so the interface to them is purely at the script level (unless you actually entangle yourself far more with Tcl than is really wise).*

# android - 无法创建 SQLite 数据库 Android

> ID：10985326
> 
> 赞同：0
> 
> 时间：2012-06-11T18:10:52.993
> 
> 标签：android, sqlite

我第一次在 SQLite 中工作，我的数据库有下一个代码：

```
public class SqlLiteDataBase extends SQLiteOpenHelper{
String sqlCreate = "CREATE TABLE lol (code INTEGER, name TEXT)";

public SqlLiteDataBase(Context context, String name, CursorFactory factory, int version) {
    super(context, name, factory, version);
}

@Override
public void onCreate(SQLiteDatabase db) {
    db.execSQL(sqlCreate);
}

@Override
public void onUpgrade(SQLiteDatabase db, int versionAnterior, int versionNueva) {
    db.execSQL("DROP TABLE IF EXISTS lol");
    db.execSQL(sqlCreate);
}} 
```

然后我实例化该类并尝试向数据库添加一些内容：

```
SqlLiteDataBase sql = new SqlLiteDataBase(this, "DBlol", null, 1);
    SQLiteDatabase db = sql.getWritableDatabase();
    if(db != null)
    {
        int code = 1;
        String name = "test";
        db.execSQL("INSERT INTO lol (code, name) " + "VALUES (" + code + ", '" + name +"')");
        db.close();
    } 
```

但是什么都没有添加！假设是手机中 data/... 的一个文件，但文件夹是空的，我尝试使用 DDMS 了解发生了什么，但没有显示任何内容，这是怎么回事？这是权限问题吗？这是我的权限：

```
<uses-permission android:name="android.permission.WAKE_LOCK" />
<uses-permission android:name="android.permission.WRITE_INTERNAL_STORAGE" />
<uses-permission android:name="android.permission.BLUETOOTH" />
<uses-permission android:name="android.permission.BLUETOOTH_ADMIN" />
<uses-permission android:name="android.permission.CHANGE_WIFI_MULTICAST_STATE" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.CAMERA" />
<uses-feature android:name="android.hardware.camera" />
<uses-feature android:name="android.hardware.camera.autofocus" /> 
```

谢谢你的时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T18:14:54.850

我认为您在 sqlCreate 字符串中忘记了分号。

```
String sqlCreate = "CREATE TABLE lol (code INTEGER, name TEXT);"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T18:43:03.897

尝试使用 this`"+ name +"`而不是 this `'" + name +"'`。我认为不需要`'`变量。
或者，尝试使用以下标准方法。

```
 public long createEntry(String code, String name) {
    ContentValues initialValues = new ContentValues();
    initialValues.put("code", code);
    initialValues.put("name", name);

    return db.insert("lol", null, initialValues);
} 
```

有关数据库相关事情的更多帮助，我建议[这个](http://developer.android.com/resources/tutorials/notepad/index.html)

# database - 从带有参数的asp访问中访问数据库

> ID：10985327
> 
> 赞同：0
> 
> 时间：2012-06-11T18:10:57.597
> 
> 标签：database, asp-classic

我在访问中有一个查询。我想分别从查询中获取每月每个日期的信息。所以我创建了 31 个查询，每个查询针对访问中的每个日期。

我发现了一个简单的 .asp 代码来执行从访问到 asp 的查询。我创建了 31 个 .asp 页面来访问每个日期的每个查询。

我想知道是否有一个代码可以在 1 或 2 个 .asp 页面中完成，而不是单独创建 31 个 .asp 页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-09T18:52:02.747

这真的取决于，如果你想为那一天运行一个查询，你可以这样做；

SELECT field1,field2,field3 FROM tableName WHERE datecolumn>='#" & dateAdd("d", 1, Now()) & '#"

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-11T18:17:37.653

请创建一个日期变量。使用来自用户的输入填充它，或者只使用系统日期。然后在查询中使用日期变量作为参数。因此，您可以在一页中执行此操作，如下所示：

```
SELECT  * 
FROM    tableName 
WHERE   datecolumn = '"+ date_variable +"'" 
```

# c# - 如何通过 dll 调用向可视化界面提供反馈？

> ID：10985328
> 
> 赞同：0
> 
> 时间：2012-06-11T18:10:58.500
> 
> 标签：c#, dll, user-interface

**架构概述：**

语言：使用类库执行爬虫任务的 C# Windows 窗体项目

我目前正在编写一个界面（UI），它将用于“调试”我编写的爬虫（或一组爬虫）。每个爬虫都是一个 .dll

从界面中，我将调用 .dll，我不想等待它们结束任务（在内部抓取、解析和构建元素列表）以在界面上显示结果。

**问题：**

有什么办法可以以某种方式将 .dll 的反馈发送到接口？

也许是一个进度条，或者在阅读元素之后，在抓取下一个元素之前将它们显示在界面上？

我想要的是实时显示在界面（gridview或其他东西）上的东西。

```
Finished Crawling College X
Finished Crawling College Y
Problem Crawling College Z - ABORTING
Finished Crawling College K 
```

等等。

有什么好方法吗？

我考虑将可视组件的引用发送到 .dll（或辅助 .dll），以便它可以在执行过程中更新可视组件本身。这样做有什么缺点吗？我这样做会破坏任何好的做法吗？

提前致谢，

马塞洛。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T18:35:26.570

基本上，你可以这样做：

```
 public interface ICrawler
 {
     void StartCrawling(Action<SomeCrawlingMessageType> callback);
 } 
```

并在您的 DLL 中有一些实现此功能的类。然后，您传入一个回调，您的爬虫类可以调用该回调将消息发送回调用者。

在您的回调中，您可以获取传递给您的数据并通过异步调用 UI 更新来更新 UI，即使是来自多个爬虫。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T18:18:26.157

如何在每个爬虫 dll 中创建事件，然后在主 UI 中订阅每个事件并报告/显示结果。

# php - 根据输入选择正确的文本方向

> ID：10985332
> 
> 赞同：1
> 
> 时间：2012-06-11T18:11:06.847
> 
> 标签：php, html

我正在尝试构建一个网页，让两种类型的用户访问我的网站。一种是普通英语用户，第二种是波斯语用户（与阿拉伯语相同的文本属性，如文本方向和文本对齐方式）。所以我希望能够根据用户输入设置回显文本的文本方向。

让我给你举个例子 ;

我有这样的文本输入：

```
<form name="myform" action="thispage.php" method="post" target="_self">
<input type="text" id="decsription" name="description" value="" />
<input type="submit" name="submit" value="SUBMIT" >
</form>

<?php 

if (isset($_POST['description']))
{
echo '<div align="right" dir="rtl"> Your Chiose is : '.$_POST['description'].'</div>';
} 
```

所以，例如，如果文本输入是用英文输入的，则回显部分将变为如下所示：

```
echo '<div align="left" dir="ltr"> Your Chiose is : '.$_POST['description'].'</div>'; 
```

但如果文本不是英语，那么回声部分将是这样的：

```
echo '<div align="right" dir="rtl"> انتخاب شما : '.$_POST['description'].'</div>'; 
```

这可能吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T18:17:42.390

```
function check_eng($str)
{
if (strlen($str) != strlen(utf8_decode($str))) {
return false;
} else {
return true;
}
} 
```

`check_eng('hello');`将返回 true，而`check_eng('で書くタッチイベント (フ');`将返回 false。

工作 99% 的时间。

演示：[http ://codepad.viper-7.com/k0PlKU](http://codepad.viper-7.com/k0PlKU)

对于您的情况，您只需使用此函数检查字符串，如果返回 false，请使用从右到左的方向。

# c - 减轻轮询环形缓冲区的影响

> ID：10985336
> 
> 赞同：0
> 
> 时间：2012-06-11T18:11:12.410
> 
> 标签：c, multithreading, producer-consumer

我有一个生产者多消费者程序，每个角色都有线程。我正在考虑在每个消费者上为 tcp 实现一个循环缓冲区，并允许生产者保留指向循环缓冲区内存的指针，然后将指针空间分发给 tcp 以将数据卸载到其中。

我的问题，如何让消费者线程知道数据何时进入？

我正在考虑忙于检查指针位置是否为 0；我不介意成为cpu猪。

我应该提一下每个线程都是 SCHED_FIFO 的 cpuset 和 soft RT，当然还有 c 实现的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T19:37:42.313

根据我的经验，多个消费者数据结构的问题是要正确处理并发，同时避免错误共享或过度浪费 CPU 周期的问题。

因此，如果您的问题允许，我会使用`pipe`为每个消费者创建一个管道，并以循环方式将项目放入这些管道中。然后，消费者可以使用`epoll`来查看文件句柄。这避免了必须实现和优化并发数据结构，并且您不会不必要地消耗 CPU 周期。代价是你必须通过系统调用。

如果您想通过轮询自己完成所有操作以避免系统调用，您可以构建一个循环缓冲区，但您必须确保只有一个进程同时读取一个项目，并且只有在项目被写入之后。通常这是用 4 个指针和适当的互斥锁来完成的。

这篇关于[Xen 的 I/O 环形缓冲区的文章](http://www.informit.com/articles/article.aspx?p=1160234&seqNum=3)可能很有趣。

# node.js - everyauth 的 facebook 连接用户创建回调函数中的“accessTokExtra”参数是什么？

> ID：10985337
> 
> 赞同：1
> 
> 时间：2012-06-11T18:11:14.210
> 
> 标签：node.js, connect, everyauth

everyauth 的 facebook findOrCreateUser() 函数的代码如下：

```
everyauth.facebook.findOrCreateUser(function(session, accessToken, accessTokExtra, fbUserData){ }); 
```

任何人都可以分享`accessTokExtra`参数的确切含义吗？

最好的，
萨米

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T22:44:51.303

它包含访问令牌的到期日期。

# android - 当我的 txt 在原始文件夹中时，如何逐行读取？

> ID：10985340
> 
> 赞同：0
> 
> 时间：2012-06-11T18:11:18.103
> 
> 标签：android

我的原始文件夹中有一个带有此文本的 txt：

```
38.706937,-0.494406,Alcoy,Alcoy,Comunidad Valenciana
37.605651,-0.991294,Vuelo1,Cartagena,Región de Murcia
37.652022,-0.719147,Vuelo2,La Manga del Mar Menor,Región de Murcia
42.817988,-1.644183,Vuelo3,Pamplona,Navarra
36.750779,-5.812395,Vuelo4,Arcos de la frontera,Andalucia 
```

我这样做的方法是：

```
private void leerPuntosApp(){
    InputStream stream =getResources().openRawResource(R.raw.sitios);
    BufferedReader brin = new BufferedReader(new InputStreamReader(stream));
    String todoPartes = null;

    try {
        while(brin.read() != -1){
            todoPartes = brin.readLine();
            dibujarPuntos(todoPartes);
        }
    } catch (IOException e) {
        e.printStackTrace();
    }
}

private void dibujarPuntos(String punto){
    Toast.makeText(this, punto, Toast.LENGTH_SHORT).show();
    String []separados = punto.split(",");

        Dialog dialog = hacerDialogo(separados[0],separados[1],
                  separados[2],separados[3],separados[4]);

        itemOverlay = new CargarItem(puntosMapa,this,dialog);

        lat = Double.parseDouble(separados[0])*1E6;
        lon = Double.parseDouble(separados[1])*1E6;

        GeoPoint point = new GeoPoint(lat.intValue(),lon.intValue());
        //GeoPoint point = calcularCoordenadas(listaDeSitios.get(i).getCiudad());

        item = new OverlayItem(point,separados[2], null);
        itemOverlay.addOverlay(item);
        mapOverlays.add(itemOverlay);
        mapView.postInvalidate();

} 
```

奇怪的是，方法 dibujarPuntos 只画了第一点，但 toast 向我展示了所有的线条。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T18:26:00.810

By doing the read() you are eating the first character of the line... are you sure the Toast was showing the correct data?

See if this helps

```
try {
    while((todoPartes = brin.readLine()) != null){
        dibujarPuntos(todoPartes);
    }
} catch (IOException e) {
    e.printStackTrace();
} 
```

And instead of using Toast for logging, just use `Log.d("MYTAG", punto)` and then check the LogCat output to see if it's parsing the information correctly.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T18:40:50.263

确实 read() 吃掉了除第一行之外的所有行的第一个字符。但是如果我这样做，你说我在这一行有一个 NumberFormatException

```
lat = Double.parseDouble(separados[0])*1E6; 
```

# django - 为 Django 静态文件提供服务时的 Apache 403

> ID：10985342
> 
> 赞同：14
> 
> 时间：2012-06-11T18:11:22.113
> 
> 标签：django, apache, static, django-admin, mod-wsgi

我浏览了很多相关的帖子，但似乎没有任何帮助。
相关信息：

> Django 版本 - 1.4
> 
> 阿帕奇版本 - 2.2
> 
> Python 版本 - 2.7
> 
> 操作系统-Xubuntu 12.04
> 
> 数据库-Mysql

我正在尝试让 Apache 为 django 应用程序和静态文件提供服务。该问题在无法显示任何 CSS 样式或图像的管理站点中变得明显。我的管理网站目前看起来像：

（好吧，我会包含一个图像，但堆栈溢出并没有让我这样做。可以说它看起来像发布在此主题上的其他所有人的管理页面，请参阅[Apache not serving django admin static files](https://stackoverflow.com/questions/9500598/apache-not-serving-django-admin-static-files) ）

像我的登录页面和一些动态内容这样的应用程序工作得很好，但是当我尝试提供静态内容时，我得到一个 403 错误。此外，当我尝试通过查看管理页面呈现的 html 并单击指向样式表的链接来手动导航到样式表时

```
http://localhost/static/admin/css/base.css 
```

我收到 403 错误。我可以在终端中导航到那里，并更改文件夹的权限，以便 Apache 的 www-data 用户明确有权访问所有文件。

以下是我的 httpd.conf 的相关部分：

```
#AliasMatch ^/([^/]*\.css) /usr/local/wsgi/static/styles/$1

Alias /media/ "/usr/local/wsgi/media/"
Alias /static/ "/usr/local/wsgi/static/"

<Directory "/usr/local/wsgi/static">
Order deny,allow
Allow from all
</Directory>

<Directory "/usr/local/wsgi/media">
Order deny,allow
Allow from all
</Directory>
WSGIScriptAlias / "/home/noah/Documents/Web/Basic/apache/django.wsgi"

<Directory "/usr/local/wsgi/scripts">
Order allow,deny
Allow from all
</Directory> 
```

在朋友的建议下，我还将上述内容复制到了我的站点可用默认值：

```
<VirtualHost *:80>
    ServerAdmin webmaster@localhost

    DocumentRoot /var/www
    TypesConfig /etc/mime.types
    <Directory />
        Options FollowSymLinks
        AllowOverride None
    </Directory>
    <Directory /home/noah/Documents/Web/Basic/apache/ >
        Options -Indexes FollowSymLinks
            AllowOverride AuthConfig FileInfo
            Order allow,deny
            Allow from all
        </Directory>
    <Directory /var/www/>
        Options Indexes FollowSymLinks MultiViews
        AllowOverride None
        Order allow,deny
        allow from all
    </Directory>
    SetEnv DJANGO_SETTINGS_MODULE Basic.settings
    ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/
    <Directory "/usr/lib/cgi-bin">
        AllowOverride None
        Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
        Order allow,deny
        Allow from all
    </Directory>

#AliasMatch ^/([^/]*\.css) /usr/local/wsgi/static/styles/$1

Alias /media "/usr/local/wsgi/media/"
Alias /static "/usr/local/wsgi/static/"

<Directory "/usr/local/wsgi/static">
Order deny,allow
Allow from all
</Directory>

<Directory "/usr/local/wsgi/media">
Order deny,allow
Allow from all
</Directory>
WSGIScriptAlias / "/home/noah/Documents/Web/Basic/apache/django.wsgi"

<Directory "/usr/local/wsgi/scripts">
Order allow,deny
Allow from all
</Directory>

    ErrorLog ${APACHE_LOG_DIR}/error.log

    # Possible values include: debug, info, notice, warn, error, crit,
    # alert, emerg.
    LogLevel warn

    CustomLog ${APACHE_LOG_DIR}/access.log combined

    Alias /doc/ "/usr/share/doc/"
    <Directory "/usr/share/doc/">
        Options Indexes MultiViews FollowSymLinks
        AllowOverride None
        Order deny,allow
        Deny from all
        Allow from 127.0.0.0/255.0.0.0 ::1/128
    </Directory>

</VirtualHost> 
```

这是我的 django.wsgi

```
import os
import sys

path = '/home/noah/Documents/Web/Basic'
if path not in sys.path:
    sys.path.append(path)

os.environ['DJANGO_SETTINGS_MODULE'] = 'Basic.settings'

import django.core.handlers.wsgi
application = django.core.handlers.wsgi.WSGIHandler() 
```

最后，这是我的 settings.py：

```
# Absolute filesystem path to the directory that will hold user-uploaded files.
# Example: "/home/media/media.lawrence.com/media/"
MEDIA_ROOT = '/usr/local/wsgi/media/'

# URL that handles the media served from MEDIA_ROOT. Make sure to use a
# trailing slash.
# Examples: "http://media.lawrence.com/media/", "http://example.com/media/"
MEDIA_URL = 'http://localhost/media/'

# Absolute path to the directory static files should be collected to.
# Don't put anything in this directory yourself; store your static files
# in apps' "static/" subdirectories and in STATICFILES_DIRS.
# Example: "/home/media/media.lawrence.com/static/"
STATIC_ROOT = '/usr/local/wsgi/static/'

# URL prefix for static files.
# Example: "http://media.lawrence.com/static/"
STATIC_URL = 'http://localhost/static/'

# Additional locations of static files
STATICFILES_DIRS = (
    # Put strings here, like "/home/html/static" or "C:/www/django/static".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
)

# List of finder classes that know how to find static files in
# various locations.
STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
#    'django.contrib.staticfiles.finders.DefaultStorageFinder',
)

# Make this unique, and don't share it with anybody.
SECRET_KEY = 'bmc&amp;epl=#u)r3elkvj#@90*cji*z^cg8dnh$7j9kh@g9wzw(ih'

# List of callables that know how to import templates from various sources.
TEMPLATE_LOADERS = (
    'django.template.loaders.filesystem.Loader',
    'django.template.loaders.app_directories.Loader',
#     'django.template.loaders.eggs.Loader',
)

MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    # Uncomment the next line for simple clickjacking protection:
    # 'django.middleware.clickjacking.XFrameOptionsMiddleware',
)

ROOT_URLCONF = 'Basic.urls'

# Python dotted path to the WSGI application used by Django's runserver.
WSGI_APPLICATION = 'Basic.wsgi.application' 
```

我的 Django 项目“Basic”位于 ~/Documents/Web/ 中，符号链接到 /var/www/

非常感谢任何帮助，如果您需要更多文件/信息，请告诉我。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-06-05T13:22:35.693

我也遇到过这个问题。

我无法`/var/www`按照*诺亚*的建议放置静态文件。

通过添加解决`apache2.conf`：

```
<Directory /usr/local/django_apps/myapp/static>
    Options Indexes FollowSymLinks
    AllowOverride None
    Require all granted
</Directory> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-12-23T02:42:32.347

另一种可能性是静态根目录中缺少尾部斜杠。以下配置导致 403 错误：

```
WSGIPythonPath /home/foo/app/
WSGIPythonHome /home/foo/.envs/foo

<VirtualHost *:80>
    Alias /static/ /home/foo/assets
    ServerAdmin foo@bar.com
    WSGIScriptAlias / /home/foo/app/wsgi.py
    ErrorLog ${APACHE_LOG_DIR}/app_wsgi_error.log
    CustomLog ${APACHE_LOG_DIR}/app_wsgi_access.log combined
    <Directory /home/foo/app/>
        <Files wsgi.py>
            Require all granted
        </Files>
    </Directory>
    <Directory /home/foo/assets>
        Require all granted
    </Directory>
</VirtualHost> 
```

在添加斜杠后`/home/foo/assets`，一切正常。我希望这对未来的 Google 员工有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T16:53:15.360

我想到了。我将静态和媒体文件的所有文件移动到 /var/www 和 apache 似乎更快乐

# python - 根据感兴趣的单词词典从电子邮件列表中识别最常见的单词

> ID：10985344
> 
> 赞同：1
> 
> 时间：2012-06-11T18:11:23.477
> 
> 标签：python, regex, bash, parallel-processing, grep

目录 D 包含几千封 .eml 格式的电子邮件。有些电子邮件是纯文本，有些来自 Outlook，有些则有 ASCII 标题和 HTML/MIME 内容等等。存在一个字典文件 F，其中包含要在 D 目录下的文件中查找的有趣单词列表（即 red\nblue\ngreen\n...）。D目录有大量子文件夹，但除上述.eml文件外没有其他文件。应使用以下规范列出最常出现的单词：

*   对于每个有趣的单词，都应该提供有关它出现的次数和出现位置的信息。如果它在一个文件中出现多次，则应为该文件多次报告。报告发生意味着报告一个整数元组 (L,P)，其中 L 是从电子邮件源顶部开始的行号，P 是该行中发生的开始位置。

这将建立一个索引来引用不同的出现和最频繁出现的有趣单词的摘要。

输出应该在单个输出文件上，并且格式没有严格定义，只要包括上述信息：有趣的词，每个有趣的词出现的次数以及它出现的位置 -> 文件/行/开始位置。

这不是一个家庭作业，而是我想对一个相当大的数据集进行实际的文本分析。我面临的挑战是选择合适的工具进行有效过滤。一种迭代方法，即单词/电子邮件/等的笛卡尔积，速度太慢，因此需要为每个文件的每一行组合多个单词过滤。

我已经尝试从有趣的单词列表 w1|w2|w3|... 中构建替代正则表达式，编译它并在每封电子邮件的每一行运行它，但它仍然很慢，尤其是当我需要检查多个在一行中出现。

例子：

电子邮件 E 有一行包含以下文本：

^ ... blah ... 红苹果 ... 蓝色蓝莓 ... 红白蓝旗。$\n

正则表达式正确报告红色（2）和蓝色（2），但在使用真正的、非常大的有趣单词词典时速度很慢。

我尝试过的另一种方法是：

使用 Sqlite 数据库在解析令牌时将令牌转储到其中，包括每个条目的（列、位置）信息，并在最后查询输出。使用适当的内存缓冲区，批量插入有很大帮助，但会增加复杂性。

我还没有尝试过数据并行化，因为我不确定令牌/解析首先是正确的做法。也许一棵字母树会更合适？

我对以下解决方案感兴趣，按优先顺序排列：

*   Bash/GNU CLI 工具（尤其是通过 GNU 'parallel'可并行化的东西，仅用于 CLI 执行）
*   Python（自然语言处理？）
*   C/C++

不幸的是，没有 Perl，因为我不明白。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T19:41:42.533

一些备注：

*   我们不希望按照“对所有电子邮件执行正则表达式搜索和 do_something();”之类的方式做一些事情。我可以想象大多数电子邮件的长度比有趣的单词列表要短，所以我会尝试单独处理每封电子邮件并提取必要的信息。
*   构建一个专门的字符串数据结构（例如[字符串 trie](https://en.wikipedia.org/wiki/Trie)或[三元搜索树](https://en.wikipedia.org/wiki/Ternary_search_tree)）来快速查找一个词是否有趣。我在构建单词的三元搜索树方面有很好的经验，因为它可以快速查找单词。
*   该算法将如下所示：

（当然是伪代码）

```
result <- empty list
for each email e:
    for each word w:
        if is_interesting_word(w, string_data_structure):
            add (filename, line_number, start_position, word) to results 
```

*   该问题现在非常适合使用[MapReduce](https://en.wikipedia.org/wiki/MapReduce)（例如[Hadoop](https://en.wikipedia.org/wiki/Apache_Hadoop)）等技术进行并行化。每封电子邮件都可以独立于其他电子邮件进行处理，并且不需要共享任何信息：可以在处理电子邮件之前计算字符串数据结构。在 map 步骤中，您从电子邮件中提取必要的信息，在 reduce 步骤中，您将每封电子邮件中的计算值合并到单个输出文件中。

我会减少您需要的处理量：没有正则表达式，没有高级解析；只需遍历电子邮件中的每个字符/行并跟踪您的位置（行号、位置等）。作为最后一步，分析您的代码并优化它的伤害:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T23:15:04.650

我假设您可以创建/找到一个 eml 到文本的转换器。那么这与您想要的非常接近：

```
find -type f | parallel --tag 'eml-to-text {} | grep -o -n -b -f /tmp/list_of_interesting_words' 
```

输出未按您希望的方式 100% 格式化：

文件名 \t 行号：字节号（从文件开头）：字

如果您有很多有趣的单词，则“-f”中`grep`的启动速度很慢，因此如果您可以创建 maildir 的解压缩版本，则可以减少并行启动`grep`的次数：

```
find . -type f | parallel 'eml-to-text {} >/tmp/unpacked/{#}'
find /tmp/unpacked -type f | parallel -X grep -H -o -n -b -f /tmp/list_of_interesting_words 
```

由于时间复杂度`grep -f`比线性更差，您可能希望将 /tmp/list_of_interesting_words 分割成更小的块：

```
cat /tmp/list_of_interesting_words | parallel --pipe --block 10k --files > /tmp/blocks_of_words 
```

然后并行处理块和文件：

```
find /tmp/unpacked -type f | parallel -j1 -I ,, parallel --arg-file-sep // -X grep -H -o -n -b -f ,, {} // - :::: /tmp/blocks_of_words 
```

此输出的格式如下：

文件名：行号：字节号（从文件开头）：字

要`word`通过排序而不是文件名管道将结果分组：

```
... | sort -k4 -t: > index.by.word 
```

计算频率：

```
... | sort -k4 -t: | tee index.by.word | awk 'FS=":" {print $4}' | uniq -c 
```

好消息是这应该相当快，我怀疑你是否能够使用 Python 达到同样的速度。

编辑：

grep -F 在启动时要快得多，并且您将需要 -w 用于 grep（因此“gram”这个词与“diagrams”不匹配）；这也将避免临时文件，并且可能相当快：

```
find . -type f | parallel --tag 'eml-to-text {} | grep -F -w -o -n -b -f /tmp/list_of_interesting_words' | sort -k3 -t: | tee index.by.word | awk 'FS=":" {print $3}' | uniq -c 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T19:57:23.227

Python：

```
list = ['a', 'bunch', 'of', 'interesting', 'words']
linepos = 0

with open("file") as f:
    for line in f:
        linepos += 1
        wordpos = 0
        for word in line.split():
            wordpos += 1
            if word in list:
                print "%s found at line %s, word %s" % (word, linepos, wordpos) 
```

# javascript - 如何使用 node.js http-proxy 在计算机中记录 HTTP 流量？

> ID：10985350
> 
> 赞同：5
> 
> 时间：2012-06-11T18:11:41.277
> 
> 标签：javascript, http, node.js, http-proxy, node-http-proxy

我正在尝试实现最简单的示例：

```
var http = require('http'),
var httpProxy = require('http-proxy');

httpProxy.createServer(function (req, res, proxy) {
    //
    // I would add logging here
    //
    proxy.proxyRequest(req, res, { host: 'www.google.com', port: 80 });
}).listen(18000); 
```

当我将浏览器配置为使用此代理并导航到 www.google.com 时，我没有收到任何响应。我做错了什么？

我正在使用 Windows 7 Chrome

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-31T00:19:36.677

这是一个如何记录请求的简单示例。我使用类似的方法将我的所有域记录到一个数据库中。

[我从http://blog.nodejitsu.com/http-proxy-middlewares](https://web.archive.org/web/20120509175116/http://blog.nodejitsu.com/http-proxy-middlewares)复制了很多（存档）

```
var fs = require('fs'),
    http = require('http'),
    httpProxy = require('http-proxy'),

logger = function() {    
  // This will only run once
  var logFile = fs.createWriteStream('./requests.log');

  return function (request, response, next) { 
    // This will run on each request.
    logFile.write(JSON.stringify(request.headers, true, 2));
    next();
  }
}

httpProxy.createServer(
  logger(), // <-- Here is all the magic
  {
    hostnameOnly: true,
    router: {
      'example1.com': '127.0.0.1:8001', // server on localhost:8001
      'example2.com': '127.0.0.1:8002'  // server 2 on localhost:8002
  }
}).listen(8000); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T18:16:47.183

我不确定这是否有帮助，因为发布的信息真的很短。但我发现他们更新了 api 的帖子......

你可能想看看这篇文章：

更新到 node-http-proxy v0.5.0 [http://blog.nodejitsu.com/updating-node-http-proxy](http://blog.nodejitsu.com/updating-node-http-proxy)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-19T14:45:40.070

我喜欢在事件中记录请求标头对象`proxyReq`

```
const http = require('http'),
    httpProxy = require('http-proxy'),
    fs = require('fs');

const proxy = httpProxy.createProxyServer({});

const logFile = fs.createWriteStream('./requests.log');

proxy.on('proxyReq', function (proxyReq, req, res, options) {
    //Log incoming request headers
    logFile.write(JSON.stringify(req.headers, true, 2));
});

const server = http.createServer(function (req, res) {
    proxy.web(req, res, {
        changeOrigin: true,
        target: 'example1.com'
    });
});

console.log("listening on port 5050")
server.listen(5050); 
```

# multithreading - 具有 CPU 绑定例程的多线程？

> ID：10985352
> 
> 赞同：6
> 
> 时间：2012-06-11T18:11:50.600
> 
> 标签：multithreading

让多个线程执行相同的 CPU 绑定例程是否有意义（当然，每个线程都在处理不同的数据），我得到了混合的信号。

如果您受 CPU 限制，那么您已经对处理器征税了，对吧？那么为什么添加额外的 CPU 工作有意义呢？您是否应该尝试将受 CPU 限制的线程数与内核数相匹配？

单核机的情况呢。多线程 CPU 绑定操作是否有意义？

提前致谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-11T18:14:57.453

> 如果您受 CPU 限制，那么您已经对处理器征税了，对吧？那么为什么添加额外的 CPU 工作有意义呢？您是否应该尝试将受 CPU 限制的线程数与内核数相匹配？

是的，这基本上是这个想法。如果您的算法受 CPU 限制，它将占用一个处理核心。如果您的系统中有 4 个，则使用全部 4 个可以显着提高整体吞吐量。如果没有多个线程，您将只能使用一个内核来处理您的数据。

> 单核机的情况呢。多线程 CPU 绑定操作是否有意义？

它可以，但通常只有在它不是*纯粹*受 CPU 限制的情况下。如果您的例程完全受 CPU 限制，您通常希望每个内核不超过 1 个线程。但是，如果您的算法的某些部分具有其他特征，并且受其他事物的约束，则该部分*有时*可以从整个例程线程化中受益。

# apache - MAMP Pro：设置具有网络磁盘位置的主机

> ID：10985353
> 
> 赞同：0
> 
> 时间：2012-06-11T18:11:53.193
> 
> 标签：apache, mamp, hosts

所以我喜欢 MAMP Pro 让设置主机和访问日志和东西变得超级容易。但是我现在在一个所有本地网站副本都在共享服务器上的位置工作，例如 /Volumes/Server/Websites/MyAwesomeWebsite。

不幸的是，当我尝试在服务器上选择一个文件夹时，所有文件夹都是灰色的。当我手动输入路径并重新启动 Apache 时，我收到以下消息：

“某些主机的磁盘位置无效。如果您现在启动 Apache，这些主机将无法访问。”

如果我不能在共享服务器上设置主机，那么使用 MAMP Pro 真的没有意义......有什么想法吗？还是从现在开始我将不得不停止偷懒并手动编辑虚拟主机？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T05:53:01.377

我无法让它工作，所以我从 MAMP Pro 回滚到 MAMP 并开始手动编辑虚拟主机文件。实际上一点也不差，我在我的 Dock 中放了一个快捷方式，可以在 BBEdit 中启动这两个文件，因此添加新的虚拟主机仍然快速而简单。

# c++ - “对象容器”和指针

> ID：10985359
> 
> 赞同：-3
> 
> 时间：2012-06-11T18:12:28.383
> 
> 标签：c++, object, pointers

首先我想展示一些代码，也许它会有所帮助。

```
CBank *Bank;

COkno Okno(Bank);
CBohater Bohater(Bank);
CKlawiatura Klawiatura(Bank);
CWszystkiePlatformy WszystkiePlatformy(Bank);
Bank = new CBank(&Okno, &Bohater, &Klawiatura, &WszystkiePlatformy); 
```

主要思想是将上述所有类（CBank除外）将它们分组，然后让分组的类相互访问。我不知道我这样做是否正确。当在类 COkno ... 中尝试指针上方的代码时，这些代码已经过时并且不存储正确的数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T18:16:07.667

您正在存储指向具有自动存储持续时间的对象的指针（至少，您可能很难从示例的发布方式中分辨出来）。当它们离开当前作用域时，指向它们的指针变得无效。

接下来，您将`Bank`一个指向`CBank`对象的指针传递给它们中的每一个，但您在初始化之前这样做了。制作了一个副本，当`Bank`稍后初始化时，它被设置为一个新值，但是您的其他对象仍然有一个无效指针的副本。馊主意。

你在这里有一个奇怪的依赖。您需要一个`CBank`指针来传递给这三个构造函数，但同时您需要将这三个对象传递给`CBank`构造函数。依赖是循环的，这是一个糟糕的设计。

您可以做的是更改`CBank`以在内部构造这些对象。如果不需要动态内存分配......好吧，不要使用它。如果需要，则在构造函数中或构造函数中添加`new`对象并在析构函数中释放它们（如果这样做，请不要忘记遵守[三规则](http://en.wikipedia.org/wiki/Rule_of_three_%28C++_programming%29)！）。 `CBank``CBank`

问你自己; 这些依赖*真的*有必要吗？你能简化这种关系吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T18:20:17.767

一个简化的版本是有 2 个试图相互引用的对象：

```
class A {
    A(A* other);
};

A* one = new A(two); // ?
A* two = new A(one); 
```

（这里有一个类，你有不同的类——这并不重要）。

这显然是行不通的，因为在创建之前`one`不能引用。`two``two`

除了两阶段初始化之外，恐怕没有合理的方法可以做到这一点。需要以*某种*方式创建对象，其中一个对象需要确认第二个对象尚不存在。

因此类似于：

```
class A {
    A(A* other);
    A();
    // ...
};

A* one = new A();
B* two = new A(one);
one->setOtherReference(two); 
```

是的，这意味着两阶段初始化，即有一段时间`one`已创建但尚未完全初始化（等待`setOtherReference()`它需要运行）。

*顺便说一句：您可以简化您的设计来避免这种情况！*

# android - Android：以编程方式将按钮添加到 ScrollView

> ID：10985363
> 
> 赞同：0
> 
> 时间：2012-06-11T18:12:56.590
> 
> 标签：android, scrollview

我有一个`ScrollView`包含多个`buttons`and `textviews`。

我希望`insert a new button`在滚动视图中途（索引 3）但得到错误，“ *ScrollView can host only one direct child* ”

这不可能吗？

```
Button b = new Button(this);
scrView.AddView(b,3); 
```

？？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T18:15:10.803

将子视图放在类似的布局中，`LinearLayout`或者`RelativeLayout`然后将布局放在`ScrollView`. 将您的视图添加到布局而不是`ScrollView`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T18:15:49.443

不，您不能在 scollview 中添加一个以上的视图，正如您现在所知道的“ScrollView 只能托管一个直接子级”

你会在 scollview 中有一个线性布局，你之前会在其中添加其他按钮，所以在其中添加新的按钮......

# ruby - 尝试安装 termios gem 会导致错误

> ID：10985369
> 
> 赞同：2
> 
> 时间：2012-06-11T18:13:27.743
> 
> 标签：ruby, rubygems, gem, installation, termios

我正在尝试使用 ruby​​ 1.9.3-p194 在 OS X 10.7 上安装 termios gem。它以前安装得很好，但现在，即使我尝试在 1.9.3-p125 中安装它，我也会遇到同样的错误：

[https://gist.github.com/83a4ff80fa882dcd6937](https://gist.github.com/83a4ff80fa882dcd6937)

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T19:11:41.723

使用`gem install ruby-termios` [http://rubygems.org/gems/ruby-termios](http://rubygems.org/gems/ruby-termios)

# iis-7 - SSL 通配符证书 - 多个子域和多层

> ID：10985376
> 
> 赞同：1
> 
> 时间：2012-06-11T18:14:02.693
> 
> 标签：iis-7, url-rewriting, ssl-certificate, wildcard-subdomain

我有以下要求将许多域映射到我的 Web 应用程序的单个站点实例，我想知道这是否可以使用 IIS 7 中的单个 SSL 通配符证书来解决，或者我是否需要两个通配符证书。这是我目前的计划：

```
Certificate #1 - *.mydomain.com
https://customer1.mydomain.com
https://customer2.mydomain.com
https://customer2.mydomain.com
etc...

Certificate #2 - admin.*.mydomain.com
https://admin.customer1.mydomain.com
https://admin.customer2.mydomain.com
https://admin.customer3.mydomain.com
etc... 
```

我的意图如下：

1.  上述所有域都映射到的单个 IP 地址。

2.  这可以在没有第二个证书的情况下完成吗？Thawte 和 Godaddy 都告诉我我必须有两个。

3.  该网站实际上是所有客户端的同一个站点实例，但会根据 URL 显示不同的配色方案和徽标。（因此有多个域名）

4.  我不想每次添加新客户时都更换证书，因此使用通配符证书。

5.  我想自动将任何以 http:// 或空白传入的请求重定向到上述任何 URL 到其 https:// 对应项。例如，[http://customer1.mydomain.com](http://customer1.mydomain.com)会自动将用户重定向到[https://customer1.mydomain.com](https://customer1.mydomain.com)。我目前正在使用常规证书执行此操作，但由于我们正在成长，我想切换到通配符。使用 URL 重写 IIS 管理单元仍然可以做到这一点吗？

我很好奇我在这里做的任何事情都是不好的做法，或者是否有更好的方法。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-21T04:09:02.670

在您的示例中，证书 #2 是不可能的。但是，证书 #1 是。要使用单个通配符，您最好使用证书 #1，然后将 customer1.mydomain.com/admin 用于管理部分。或 admin.mydomain.com/customer1。然后，您可以配置您的 DNS、http 重定向和上下文切换，以使客户端从 admin.customer1.mydomain.com 访问您的应用程序的正确部分。

另一种选择是使用 customer1.mydomain.com 和 customer1admin.mydomain.com 之类的名称。这都属于您的证书#1 通配符，并且可能会获得与您的计划类似的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T13:50:56.173

截至本文发布时，通配符证书无法做到这一点。

# search - vim 文件中某个单词出现的次数

> ID：10985377
> 
> 赞同：1
> 
> 时间：2012-06-11T18:14:17.140
> 
> 标签：search, vim

假设我想在文件的一部分中找到单词“asd”的出现次数，例如，从第 21 行到第 234 行。我将如何在 VIM 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T18:16:49.133

试试这个计数 `:21,234s/asd//gn`

**编辑**

既然你的 vim 太老了，试试 greping 和 count like

`sed -n 21,234p filename | grep -o asd | wc -l`

# c# - 对于 BeginInvoke 瓶颈，批量 UI 更新是否值得？

> ID：10985382
> 
> 赞同：0
> 
> 时间：2012-06-11T18:14:48.070
> 
> 标签：c#, wpf

我的情况是我有代表游戏对象的文本文件。我要做的是解析文件并获取游戏对象将被绘制到的点。例如

```
fruits.txt
pear 10, 20
orange 10,38 
```

每当我 grep 一个点时，我都会使用调度程序 begininvoke 将新水果更新到屏幕上。这比调用单个线程更好。每当我有多个屏幕并行更新它们的点时，它会变得非常慢，并且在绘制到屏幕时开始挂起或帧跳动。这是因为 BeginInvoke 将消息排队吗？尽管冻结的 BeginInvoke 仍然比 Invoke 运行得更快，尽管 Invoke 的更新更流畅。我怎样才能让 BeginInvoke “刷新消息”到屏幕。在其他帖子中有一个想法，我可以将点保存在队列中并绘制到屏幕上，而队列中还有一些东西，但没有任何区别。请问有什么想法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T18:21:33.053

根据 MSDN [Control.BeginInvoke()](http://msdn.microsoft.com/en-us/library/0b1bf3y3.aspx)：

> 在创建控件的基础句柄的线程上异步执行委托。

在您的情况下，重复调用 BeginInvoke 会向 MAIN UI 线程添加大量调用，使其陷入其他工作。

你最好将你的点放在一个队列中，然后一次将它们绘制到屏幕上，而不是尝试在同一个线程上异步运行多个绘制。

# excel - 如何从 seleniumRC 结果中创建新的 Excel 文件？

> ID：10985383
> 
> 赞同：0
> 
> 时间：2012-06-11T18:14:48.937
> 
> 标签：excel, selenium, selenium-rc, data-driven

我正在使用 selenium RC 创建一个测试用例。该过程的一般流程是从 Excel 文件中获取数据。然后运行 ​​SeleniumRC。

为了得到结果，我放置了一个打印输出命令。所有输出都在控制台中可见。（使用日食）

接下来我需要做的是将所有这些数据存储到一个新的 Excel 文件中。任何人都可以帮助我如何将我的输出生成到 Excel 文件中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T11:15:43.707

我建议的一种简单方法是将所有打印输出语句附加到字符串缓冲区（Java）之类的存储变量`|`中，并在每行末尾使用符号等分隔符，然后将此信息写入文本文件。（逐行拆分| 符号的帮助）

如果您想将此信息存储在 excel 中，则必须使用 Apache POI 项目将数据写入 excel 表。（http://poi.apache.org/）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T08:41:05.383

使用 Jexcel API。此链接可能对您有用。 [http://r4r.co.in/java/apis/jexcel/](http://r4r.co.in/java/apis/jexcel/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-12T06:19:04.373

将结果存储在变量中，然后使用 Java Excel API 将它们写入 excel。

# javascript - 防止事件处理程序排队

> ID：10985384
> 
> 赞同：2
> 
> 时间：2012-06-11T18:14:53.453
> 
> 标签：javascript, jquery, asp.net

我正在使用“One”来连接点击处理程序。

Jquery 的 "one" 方法将连接一个事件处理程序并在第一次调用后将其分离，但似乎如果您单击得足够快，则可能会有多个事件处理程序排队并导致回调运行不止一次。

前任：

```
$("#button").one("click", function () {

            //run logic

}); 
```

我怎样才能防止这种行为。我假设“One”将在第一次运行后分离处理程序，但如果您在运行回调时单击该按钮，假设它将第二次运行是否合理？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T19:02:38.157

> 我假设“One”将在第一次运行后分离处理程序

不正确，`.one`将在运行处理程序函数之前分离事件处理程序。如果您查看[.one](http://james.padolsey.com/jquery/#v=git&fn=on)源代码，`.off`则会在调用处理程序函数之前触发 。

```
if (one === 1) {
    origFn = fn;
    fn = function (event) {
        jQuery().off(event);  //Your event is unregistered here
        return origFn.apply(this, arguments); //Your handler is called
    };
    fn.guid = origFn.guid || (origFn.guid = jQuery.guid++);
} 
```

正如 Frédéric Hamidi 在评论中指出的那样，

> 即使处理程序在执行过程中重新触发了事件，新事件的实际处理也不会发生，直到当前处理程序返回并且原始事件完全解决（如果允许事件冒泡，可能涉及其他处理程序） DOM 树）。到那时，处理程序在这两种情况下都将被删除。

**证明：http:** [//jsfiddle.net/skram/abcvW/2/](http://jsfiddle.net/skram/abcvW/2/)

# ios5 - iOS5 Storyboard 跨场景持久 UI

> ID：10985385
> 
> 赞同：1
> 
> 时间：2012-06-11T18:14:54.020
> 
> 标签：ios5, uistoryboard

我刚刚开始使用 iOS 开发。目前专注于iPad。

我想在故事板的几个场景中（并在其之上）保留一些 UI 元素。

做这个的最好方式是什么？将持久元素放在单独的视图/xib 中，然后将其加载到每个场景的每个 ViewController 中？或者有没有一种方法可以让我只拥有一个持久元素的实例？

如果需要，很高兴详细说明...

干杯

# ios - cocos2d 中的类似网格的视图

> ID：10985387
> 
> 赞同：0
> 
> 时间：2012-06-11T18:14:54.943
> 
> 标签：ios, cocos2d-iphone

我正在编写一个具有图像网格（3x3）的视图的应用程序，它需要每行和每列无限滚动，非常类似于“设计博物馆收藏”应用程序。我将如何实施这个观点？有没有一个已经支持这个的库？这可以在 Cocos2d 中完成吗？这是“设计博物馆收藏”应用程序的视频 (http://vimeo.com/39260302)。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T18:17:24.737

扩展是一个很好的`CCMenuAdvanced`起点。你可以在这里找到它：

[https://github.com/cocos2d/cocos2d-iphone-extensions/tree/master/Extensions/CCMenuAdvanced](https://github.com/cocos2d/cocos2d-iphone-extensions/tree/master/Extensions/CCMenuAdvanced)

# grails - 来自外部链接的用户无效

> ID：10985389
> 
> 赞同：0
> 
> 时间：2012-06-11T18:14:56.940
> 
> 标签：grails, spring-security

我有一个网站，可以输出带有超链接的 Excel 报告，返回到安全内容。其中一个链接看起来像这样......

```
http://www.[site].com/externalLinkDigester?externalSession=[SHA Encrypted Text] 
```

查询字符串参数 (externalSession) 是唯一的字母数字字符串，仅在 24 小时内有效，并且只能由创建报告的用户访问。我的控制器看起来像这样......

```
class ExternalLinkDigester{

   def springSecurityService;

    def index = {
        def currentUser = springSecurityService?.currentUser

        if (!currentUser){
            redirect(controller:'login')
        }

        def request = ExternalSession.findByName(params.externalSession);

        if (request.isExpired(){
            //show expired content page
        }

        if (sameUser(currentUser, request.user){
            //show content
        }else{
            redirect(controller:'login')
        }

    }
} 
```

**问题**是，无论从`springSecurityService.currentUser`外部程序（如 Excel）出现时始终为空，即使我在单击链接之前已登录，但是，如果我将链接复制并粘贴到浏览器中，它似乎工作正常。帮助！

我怎样才能以这种方式安全地访问内容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T21:31:09.440

Excel 是否有可能打开与您登录时使用的浏览器不同的浏览器（例如，您使用 Firefox 登录，当单击 excel 中的链接时，默认为在 Internet Explorer 中打开链接）。新浏览器将没有经过身份验证的会话的会话 cookie，因此“currentUser”将显示为空。

# ruby - 在 Heroku 上通过 Ruby 代码发送电子邮件

> ID：10985402
> 
> 赞同：1
> 
> 时间：2012-06-11T18:15:57.697
> 
> 标签：ruby, email, heroku, sinatra

我在通过我的 Ruby 代码发送电子邮件时遇到问题。[你可以在 GitHub 上](https://github.com/Integralist/Passage)看到我的完整代码。

更新：以下代码已修改以反映@Gaurish 的建议

UPDATE2：看起来 gmail 拒绝了登录尝试 - 我收到了一封来自他们的电子邮件，警告我一些未知的应用程序试图访问我的帐户，但他们禁用了它

具体的类在这里：

```
require 'net/smtp'

=begin
    http://apidock.com/ruby/v1_9_3_125/Net/SMTP/start/class
    https://devcenter.heroku.com/articles/config-vars

    I added the following config vars to Heroku
    heroku config:add GM_USR=xxxx
    heroku config:add GM_PSW=xxxx
=end

class Email
    def initialize (to, from, subject, body)
            @to = to
            @from = from
            @subject = subject
            @body = body
            @message = <<MESSAGE_CONTENT
                From: User <#{@from}>
                To: Integralist <#{@to}>
                MIME-Version: 1.0
                Content-type: text/html
                Subject: #{@subject}
                #{@body}
MESSAGE_CONTENT

            @smtp = Net::SMTP.new('smtp.gmail.com', 587)
        end

        def send_email
            @smtp.enable_starttls
            @smtp.start('furious-wind-9309.herokuapp.com', ENV['GM_USR'], ENV['GM_PSW'], :login) do |smtp|
            @smtp.send_message(@message, @from, @to)
        end
    end
end 
```

我这样称呼它：

```
email = Email.new('myemail@gmail.com', params[:email], 'test subject', params[:message]);
email.send_mail 
```

但是当我执行代码时，屏幕上会显示错误：`535-5.7.1 Please log in with your web browser and then try again. Learn more at`

我检查了日志，我得到...

```
2012-06-13T08:01:08+00:00 heroku[router]: POST furious-wind-9309.herokuapp.com/contact dyno=web.1 queue=0 wait=0ms service=628ms status=500 bytes=2060
2012-06-13T08:01:08+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/rack-protection-1.2.0/lib/rack/protection/xss_header.rb:22:in `call'
2012-06-13T08:01:08+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:200:in `call'
2012-06-13T08:01:08+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/session/abstract/id.rb:205:in `context'
2012-06-13T08:01:08+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/logger.rb:15:in `call'
2012-06-13T08:01:08+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/commonlogger.rb:20:in `call'
2012-06-13T08:01:08+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/head.rb:9:in `call'
2012-06-13T08:01:08+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/methodoverride.rb:21:in `call'
2012-06-13T08:01:08+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.3.2/lib/sinatra/base.rb:1334:in `block in call'
2012-06-13T08:01:08+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.3.2/lib/sinatra/base.rb:1416:in `synchronize'
2012-06-13T08:01:08+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/sinatra-1.3.2/lib/sinatra/base.rb:1334:in `call'
2012-06-13T08:01:08+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/thin-1.3.1/lib/thin/connection.rb:80:in `block in pre_process'
2012-06-13T08:01:08+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/thin-1.3.1/lib/thin/connection.rb:78:in `catch'
2012-06-13T08:01:08+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/thin-1.3.1/lib/thin/connection.rb:78:in `pre_process'
2012-06-13T08:01:08+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/eventmachine-0.12.10/lib/eventmachine.rb:1060:in `call'
2012-06-13T08:01:08+00:00 app[web.1]:   /app/vendor/bundle/ruby/1.9.1/gems/eventmachine-0.12.10/lib/eventmachine.rb:1060:in `block in spawn_threadpool'
2012-06-13T08:01:08+00:00 app[web.1]: 82.69.39.185 - - [13/Jun/2012 08:01:08] "POST /contact HTTP/1.1" 500 2060 0.6254 
```

我知道人们可能会建议使用 ActionMailer 或 Pony，但我宁愿不使用它们，或者请让那些建议给我。相反，我想要一个有助于修复上述代码的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T18:41:01.367

**[更新 1]**

如果 gmail 不适合您，您可以使用[SendGrid 插件](https://addons.heroku.com/sendgrid)，它每天免费为您提供多达 200 封电子邮件。

这是一个关于如何将他们的 STMP API 与[邮件 gem](https://rubygems.org/gems/mail)一起使用的示例（取自[docs ）](http://docs.sendgrid.com/documentation/get-started/integrate/examples/ruby-email-example-using-smtp/)

```
require 'mail'
Mail.defaults do
  delivery_method :smtp, { :address   => "smtp.sendgrid.net",
                           :port      => 587,
                           :domain    => "yourdomain.com",
                           :user_name => "yourusername@domain.com",
                           :password  => "yourPassword",
                           :authentication => 'plain',
                           :enable_starttls_auto => true }
end

mail = Mail.deliver do
  to 'yourRecipient@domain.com'
  from 'Your Name <name@domain.com>'
  subject 'This is the subject of your email'
  text_part do
    body 'Hello world in text'
  end
  html_part do
    content_type 'text/html; charset=UTF-8'
    body '<b>Hello world in HTML</b>'
  end
end 
```

使用 Sendgrid 是更好的解决方案，因为您还可以访问 gmail 不提供的高级报告和分析。此外，sendgrid 中的“发件人”地址也没有限制。

* * *

使用 Heroku，您不能直接从 Heroku 发送电子邮件，`localhost`因为[Heroku 不提供外发邮件服务](https://devcenter.heroku.com/articles/smtp)。

因此您必须考虑使用*外部*smtp 服务器来发送您的电子邮件。流行的是[Gmail](http://blog.heroku.com/archives/2009/11/9/tech_sending_email_with_gmail/)和[Sendgrid](https://devcenter.heroku.com/articles/sendgrid)

这只是使用像 heroku 这样的云计算平台的一种权衡。

使用 Gmail，尝试执行以下操作：

```
require 'net/smtp'

    msg = "your message goes here"
    smtp = Net::SMTP.new 'smtp.gmail.com', 587
    smtp.enable_starttls
    smtp.start(YourDomain, YourAccountName, YourPassword, :login) do
      smtp.send_message(msg, FromAddress, ToAddress)
    end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T18:27:39.973

如果你试试：

```
@email = Email.new('mark.mcdx@gmail.com', params[:email], 'test subject', params[:message])
@email.send_email 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T19:54:03.473

只需将 SendGrid 加载为附加组件，它就可以开箱即用。此外，您还可以获得一整套分析工具，用于解决退回、交付等问题......

# java - 我如何估计一个类的总 permgen 内存消耗？

> ID：10985408
> 
> 赞同：12
> 
> 时间：2012-06-11T18:16:27.233
> 
> 标签：java, jvm, permgen

最近，我正在编写一个类，在其中我发现我可以将实例的内存消耗减少约 10 字节/元素，但代价是使代码更加复杂。这将编译文件的大小增加了`.class`约 10KB。

我假设 JVM 必须将`.class`文件加载到内存中，因此除非至少有 1000 个左右的元素，否则这些更改不会为自己付出代价。但是除非类文件中额外的 10KB 是增加代码复杂性的*唯一*代价，否则这种算法是行不通的。

[这个 Oracle 博客](https://blogs.oracle.com/jonthecollector/entry/presenting_the_permanent_generation)表明，permgen 中的类消耗了大量的额外内存，而不仅仅是基于`.class`文件 - 例如，我怀疑更复杂的代码可能需要更多内存来优化元数据。

所以，这个问题有两个部分：

*   如何测量特定类的实际 permgen 内存消耗？是在运行时使用一些仪器，还是使用分析工具？
*   有没有办法在我写它的时候估计这个类的 permgen 内存消耗？（有了[一些背景知识](http://www.javamex.com/tutorials/memory/object_memory_usage.shtml)，您可以在编写类实例时估计它们的内存消耗；我想知道我们是否可以估计类本身的 permgen 内存消耗。）

Dalvik VM 的类似细节将不胜感激，但我主要关注 OpenJDK 和其他“主流”JVM。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T11:35:40.380

> 如何测量特定类的实际 permgen 内存消耗？是在运行时使用一些仪器，还是使用分析工具？

一种方法是在不同的类加载器中加载要测量的类，并`jmap -permstat`按照此[博客条目](https://blogs.oracle.com/vikram/entry/getting_permgen_informartion_using_jmap)中的说明使用。

> 对于每个类加载器对象，打印以下详细信息：
> 
> 1.  类加载器对象的地址——在实用程序运行时的快照中。
> 2.  加载的类的数量（由这个加载器使用方法（java.lang.ClassLoader.defineClass）定义。
> 3.  **此类加载器加载的所有类的元数据消耗的近似字节数。**
> 4.  父类加载器的地址（如果有）。
> 5.  “活”或“死”指示——指示加载器对象将来是否会被垃圾收集。
> 6.  此类加载器的类名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T18:28:44.717

这是对第二点的回答；我不确定这会有多大用处，但我发现演示文稿[构建内存高效的 Java 应用程序：实践和挑战](http://www.cs.virginia.edu/kim/publicity/pldi09tutorials/memory-efficient-java-tutorial.pdf)中的幻灯片对于估计各种 Java 对象的大小和健康状况非常有帮助。在估计 32 位和 64 位 JVM 中对象的大小时，他详细介绍了很多细节，并且还提供了指针以使您的对象更节省内存。

# android - Android模拟器不显示任何东西

> ID：10985411
> 
> 赞同：1
> 
> 时间：2012-06-11T18:16:35.797
> 
> 标签：android, emulation

我是 android 新手，刚刚安装了带有 eclipse 和 ADT 插件的 Android sdk，这些东西工作正常，但我的模拟器在 30 分钟后没有显示任何内容。我的目标虚拟设备（AVD）Android 4.0.3，API 级别 15 CPU/ABI：armeabi-v7a 我尝试从堆栈溢出“硬件部分：设备 RAM 大小 = 15”进行调整，它有帮助，因为在尝试之前，模拟器是崩溃。现在模拟器出现了，但什么都没有显示请帮助它以这种方式开始令人沮丧

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T18:39:39.080

我们在测试中遇到的模拟器存在间歇性问题。这似乎发生在第一次运行 AVD 时。

如果您在几分钟内没有看到主屏幕，您应该强制终止模拟器，从命令行使用“adb kill-server”停止 adb。使用“adb start-server”重新启动 adb，然后使用您的 AVD 重新启动模拟器。还建议关闭快照，直到它第一次正确加载。如果您正在使用 GPU 功能，请将其关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T10:36:30.370

我找到了解决方案，问题是我没有设置环境变量，在我的情况下是“C:\Program Files\Android\android-sdk\platform-tools\”，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-05T14:00:50.410

我面临同样的问题。我按照以下步骤解决了它。

转到 AVD 管理器，选择相应的 AVD，然后单击编辑，然后从下拉菜单中选择设备。我忘记选择设备，所以我的 AVD 上什么都没有。那里只有黑屏。

# iphone - UI 导航控制器显示 Null 以切换到详细视图

> ID：10985412
> 
> 赞同：0
> 
> 时间：2012-06-11T18:16:38.137
> 
> 标签：iphone, ios

我有一个基于标签的应用程序。在第一个选项卡上，我有几个视图，其中一个是导航控制器。我的目标是加载此列表视图（工作），然后在单元格单击时转到详细视图（不工作）。

在单元格上单击我正在记录

> NSLog(@"%@",self.navigationController);

这是返回一个空值。我只能假设我没有正确设置导航控制器，但我不知道是什么。

在按钮上单击表视图被称为：

```
#import "Reviews.h"
#import "XMLParser.h"
#import "Detailed_Review.h"

@implementation Reviews

@synthesize reviewsTableView;

XMLParser *xmlParser;
CGRect dateFrame;
UILabel *dateLabel;
CGRect contentFrame;
UILabel *contentLabel;

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Release any cached data, images, etc that aren't in use.
}

#pragma mark -
#pragma mark Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView 
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section 
{
    return [[xmlParser reviews] count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
{

    static NSString *CellIdentifier = @"Cell";
Review_Object *currentReview = [[xmlParser reviews] objectAtIndex:indexPath.row];

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) 
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];

        CGRect contentFrame = CGRectMake(10, 2, 265, 30);
        UILabel *contentLabel = [[UILabel alloc] initWithFrame:contentFrame];
        contentLabel.tag = 0011;
        contentLabel.numberOfLines = 2;
        contentLabel.font = [UIFont boldSystemFontOfSize:12];
        [cell.contentView addSubview:contentLabel];

        CGRect reviewFrame = CGRectMake(10, 40, 265, 10);
        UILabel *reviewLabel = [[UILabel alloc] initWithFrame:reviewFrame];
        reviewLabel.tag = 0012;
        reviewLabel.font = [UIFont systemFontOfSize:10];
        [cell.contentView addSubview:reviewLabel];
    }

UILabel *contentLabel = (UILabel *)[cell.contentView viewWithTag:0011];
    contentLabel.text = [currentReview rating];

UILabel *dateLabel = (UILabel *)[cell.contentView viewWithTag:0012];
    dateLabel.text = [currentReview review];

    return cell;
}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    return 55;
}

#pragma mark -
#pragma mark Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
{
     Detailed_Review *dvController = [[Detailed_Review alloc] initWithNibName:@"Detailed_Review" bundle:[NSBundle mainBundle]];

    [self.navigationController pushViewController:dvController animated:YES];
    NSLog(@"%@",self.navigationController);
}

#pragma mark - View lifecycle

- (void)viewDidLoad
{
    [super viewDidLoad];

    xmlParser = [[XMLParser alloc] loadXMLByURL:@"http://www.mywebsite.com/api/reviews/xml.php?page=1"];

    self.title = @"Reviews";
}

- (void)viewDidUnload
{
    [self setReviewsTableView:nil];
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
}

- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];
}

- (void)viewWillDisappear:(BOOL)animated
{
[super viewWillDisappear:animated];
}

- (void)viewDidDisappear:(BOOL)animated
{
[super viewDidDisappear:animated];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

@end 
```

西布照片：

![第一个 tab.xim](../Images/e95ee4960f3a512bab3d1be72962c8ad.png)

![devtailview.xib](../Images/477f62f526cf318e247d86de3620db32.png)

.h 文件：

```
#import <UIKit/UIKit.h>
#import "XMLParser.h"
#import "Review_Object.h"

@interface Reviews : UIViewController

@property (retain, nonatomic) IBOutlet UITableView *reviewsTableView;

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T08:43:19.020

您省略了分配和初始化 navigationController 的部分。你能补充一下吗，包括 .h 文件中的相关部分？

使用 IB 或以编程方式创建它，请参阅[https://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/ViewControllerPGforiOSLegacy/NavigationControllers/NavigationControllers.html#//apple_ref/doc/uid/TP40011381-CH103- SW27](https://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/ViewControllerPGforiOSLegacy/NavigationControllers/NavigationControllers.html#//apple_ref/doc/uid/TP40011381-CH103-SW27)

# java - 回到 Eclipse rcp 中的闪屏

> ID：10985426
> 
> 赞同：1
> 
> 时间：2012-06-11T18:17:43.943
> 
> 标签：java, eclipse, screen, rcp, splash-screen

我有一个带有登录画面的 RCP 程序。

我想做一个注销按钮。通过单击此按钮，用户应返回到初始屏幕，因此他必须再次登录。

这可能吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T13:23:56.707

如果您使用`org.eclipse.ui.IWorkbench.restart()`它，它将返回并再次运行启动画面。

# ajax - GRAILS 中 AJAX 获取请求的控制器中的内容

> ID：10985427
> 
> 赞同：1
> 
> 时间：2012-06-11T18:17:45.093
> 
> 标签：ajax, grails, controller

在我看来，我有一个 AJAX 调用，

```
var ajaxData= $.ajax({
type: "GET",
url: "${createLink(controller:'profile',action:'ajaxList')}",
success: function(data) {
    }  
}); 
```

我在 ProfileController.groovy 类中创建了一个方法，以便从此调用中返回“数据”，但我不知道如何正确格式化控制器。这是我想要返回的。模型、配置文件具有名称和描述。我想返回一个哈希对象，其中键是名称，值是描述。有没有办法在控制器中执行此操作，以便此 ajax 调用返回该哈希。任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T18:55:56.163

在您的控制器的`ajaxList`操作中，像往常一样按照您的需要构建模型，然后`return model`在您想要的最后而不是`render model as JSON`.

例如，

```
class ProfileController {
    def ajaxList() {
        def profiles = Profile.list()
        def model = profiles.collect { [(it.name): it.description] }
        render model as JSON
    }
} 
```

如果您想使用相同的`list`操作来返回不同的格式，请查看 using [`withFormat`](http://grails.org/doc/latest/ref/Controllers/withFormat.html)。

# jquery - jqGrid - 如何将布尔检查状态值和实际唯一值传递给 jqGrid 中的复选框？

> ID：10985428
> 
> 赞同：1
> 
> 时间：2012-06-11T18:17:46.060
> 
> 标签：jquery, jqgrid

我有一个带有多个 jqGrid 实例的 JSP 页面。该网格的一列具有表示该行是否被选中的复选框。我需要在 jqGrid 中有一个类似 HTML 的普通复选框 - 一个同时具有选中/未选中布尔状态和实际唯一值的复选框，例如：
`<input type="checkbox" name="vehicle" value="Car" checked="checked" />`

在 jqGrid 中，我面临一个限制，我只能将一个值传递给复选框。在 jqGrid 的 colModel 我有这个：

```
colModel:[
    {name:'assign', index:'assign', width:200, editable:true, edittype:'checkbox', formatter:"checkbox", formatoptions:{disabled : false}}
    ] 
```

在将数据传递给我的 jqGrid 时，我有这种数据：

```
var mydata = [
              {assign:"${assignBool}"}
           ]; 
```

然而，在 colModel [] "assign" 中设置的值可能是确定复选框是否被选中的布尔值，也可能是我们想要为复选框设置的实际值，以确定选中哪个复选框。

在传递布尔值时，我可以在显示中正确检查复选框，但无法获取值（唯一标识值）。

在将实际唯一值传递给“分配”时，所有复选框都显示所有复选框的默认选中状态不正确。

我无法确定如何将选中状态布尔值和复选框的实际唯一值传递给 jqGrid 中的“分配”行。

我希望能够使用下面的代码遍历整个页面并获取所有复选框的实际唯一值：

```
$("#editBtn").click(function() {
    var val = [];
    var checkedNames = '';
    $('input:checkbox:checked').each(function(index) {
        val[index] = $(this).val() + ',';
        checkedNames += val[index];
        }
    );  
    alert("Checked check box values: " + checkedNames);
}); 
```

如果我将布尔检查状态传递给上面的“分配”，那么我在 checkedNames 变量中得到的只是 True/False 或 Yes/No 值的列表，而不是实际值。

有没有其他人遇到过类似的问题，或者有人有解决这个问题的方法吗？对我来说，这似乎是 jqGrid 的一个限制，或者我可能不知道 jqGrid 中有这样的功能。在这方面的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T18:26:33.743

我经常使用 jqGrid 来管理自定义行为的一件事是将我想要显示的 HTML 作为文本传递给 colModel。因此，不要使用`edit`上面列出的属性，只需将 HTML 作为文本从服务器的 JSON 响应中发送。

jqGrid 会将其呈现为 HTML，然后您可以使用 jQuery 管理行为（看起来您很熟悉）。

**更新** 例如，我想将[jQuery Sparklines](http://omnipotent.net/jquery.sparkline/)集成到我的网格中，所以在我服务器上的控制器中（我使用的是 ASP.NET MVC），我返回：

```
return Json(new
{
    total = (int)Math.Ceiling((double)data.Count / rows),
    page = 1,
    records = data.Count,
    rows = (from item in data
            select new
             {
                 id = "GR" + data.IndexOf(item),
                 cell = new object[] 
                 { 
                     item.Name,
                     "<span class=\"inlinesparkline\" values=\"" + item.SparklineData + "\"></span>"
                 }
             }).ToArray()
        }); 
```

在我的 jqGrid 中，此列在 colModel 中作为文本：

```
...
colModel: [
    { name: 'Name', index: 'Name' },
    { name: 'Sparkline', index: 'Sparkline', classes: 'sparkcell' }
],
... 
```

现在在我的 gridComplete 中，我可以使用 jQuery 使用选择器来做任何我需要的事情`.sparkcell`：

```
...
gridComplete: function () {
    $('.sparkcell').sparkline();
},
... 
```

# php - 从 URL 中删除特定参数，同时保留其他参数

> ID：10985433
> 
> 赞同：6
> 
> 时间：2012-06-11T18:18:17.720
> 
> 标签：php, regex

我想从 URL 中删除一个参数：

```
$linkExample1='https://stackoverflow.com/?name=alaa&counter=1';
$linkExample2='https://stackoverflow.com/?counter=4&star=5'; 
```

我试图得到这个结果：

*   [https://stackoverflow.com/?name=alaa&](https://stackoverflow.com/?name=alaa&)
*   [https://stackoverflow.com/?&star=5](https://stackoverflow.com/?&star=5)

我正在尝试使用它来完成它`preg_replace`，但我不知道它是如何完成的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-11T18:20:24.413

```
$link = preg_replace('~(\?|&)counter=[^&]*~','$1',$link); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T18:24:25.117

Relying on regular expressions can screw things up sometimes..

You should use, the `parse_url()` function which breaks up the entire URL and presents it to you as an associative array.

Once you have that array, you can edit it as you wish and remove parameters.

Once, completed, use the `http_build_url()` function to rebuild the URL with the changes made.

Check the docs here..

[Parse_Url](http://php.net/manual/en/function.parse-url.php) [Http_build_query()](http://www.php.net/manual/en/function.http-build-url.php)

**EDIT**

Whoops, forgot to mention. After you get the parameter string, youll obviously need to separate the parameters as individual ones. For this you can supply the string as input to the [parse_str()](http://php.net/manual/en/function.parse-str.php) function.

You can even use [explode()](http://php.net/manual/en/function.explode.php) with & as the delimeter to get this done.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T18:24:16.450

I would recommend using a combination of [parse_url()](http://www.php.net/manual/en/function.parse-url.php) and [http_build_query()](http://www.php.net/manual/en/function.http-build-query.php).

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-10T13:06:59.747

一个代码示例，我将如何获取请求的 URL 并删除一个名为“name”的参数，然后重新加载页面：

```
$url = $_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI']; //complete url
$parts = parse_url($url);
parse_str($parts['query'], $query); //grab the query part
unset($query['name']); //remove a parameter from query
$dest_query = http_build_query($query); //rebuild new query
$dest_url=(isset($_SERVER['HTTPS']) && $_SERVER['HTTPS'] === 'on' ? "https" : "http").'://'.$parts['path'].'?'.$dest_query; //add query to host
header("Location: ".$dest_url); //reload page 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-11-29T11:12:24.150

# 正确处理！！

```
remove_query('http://example.com/?a=valueWith**&amp;**inside&b=value'); 
```

代码：

```
function remove_query($url, $which_argument=false){ 
    return preg_replace( '/'. ($which_argument ? '(\&|)'.$which_argument.'(\=(.*?)((?=&(?!amp\;))|$)|(.*?)\b)' : '(\?.*)').'/i' , '', $url);  
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-11T18:52:20.040

`parse_url()`并且`parse_str()`是越野车。正则表达式可以工作，但有破坏的趋势。如果您想正确解构、进行更改然后重构 URL，您应该查看：

[http://barebonescms.com/documentation/ultimate_web_scraper_toolkit/](http://barebonescms.com/documentation/ultimate_web_scraper_toolkit/)

`ExtractURL()`生成`parse_url()`类似的输出，但做得更多（并且做得对）。 `CondenseURL()`从信息中获取一个数组`ExtractURL()`并构造一个新的 URL。这两个函数都在“support/http.php”文件中。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-11-16T02:02:07.853

这对我有用：

```
function removeParameterFromUrl($url, $key)
{
    $parsed = parse_url($url);
    $path = $parsed['path'];
    unset($_GET[$key]);
    if(!empty(http_build_query($_GET))){
      return $path .'?'. http_build_query($_GET);
    } else return $path;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-08-02T19:10:13.500

多年后... [$_GET](http://php.net/manual/en/reserved.variables.get.php)可以像 PHP 中的任何其他数组一样被操作。只需[取消设置密钥并使用](http://php.net/manual/en/function.unset.php)[http_build_query](http://php.net/manual/en/function.http-build-query.php)函数创建 http 查询。

```
// Populate _GET with sample data...
$_GET = array(
    'value_a' => "A",
    'key_to_remove' => "Don't delete me bro!",
    'value_b' => "B"
);
// Should output everything...
// "value_a=A&key_to_remove=Don%27t+delete+me+bro%21&value_b=B"
echo "\n".http_build_query( $_GET );

// Remove the key from _GET...
unset( $_GET[ 'key_to_remove' ] );
// Should output everything else...
// "value_a=A&value_b=B"
echo "\n".http_build_query( $_GET ); 
```

# wcf - 指定 ServiceBehavior 和 EndpointBehavior 的语法？

> ID：10985437
> 
> 赞同：0
> 
> 时间：2012-06-11T18:18:46.687
> 
> 标签：wcf, web-services, web-config, servicebehavior, endpointbehavior

查看[http://msdn.microsoft.com/en-us/library/ms731303.aspx](http://msdn.microsoft.com/en-us/library/ms731303.aspx)和[http://msdn.microsoft.com/en-us/library/ms789007.aspx](http://msdn.microsoft.com/en-us/library/ms789007.aspx)，给出了指定 ServiceBehavior 的示例，但是有没有办法在 behaviorConfiguration 中指定一个端点行为？就像是

```
 <service name="ServiceName1" behaviorConfiguration="ServiceBehavior1;EndpointBehavior1"> 
...
    <behaviors>
      <serviceBehaviors>
        <behavior name="ServiceBehavior1">
...
        </behavior>
      </serviceBehaviors>
      <endpointBehaviors>
        <behavior name="EndpointBehavior1">
...
        </behavior>
      </endpointBehaviors>
    </behaviors>
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T19:10:14.870

愚蠢的问题，web.config 的端点元素也有自己的 behaviorConfiguration 属性。

```
 <endpoint
      behaviorConfiguration="EndpointBehavior1" ... 
```

# php - PHP DOMDocument 命名空间

> ID：10985443
> 
> 赞同：7
> 
> 时间：2012-06-11T18:19:16.280
> 
> 标签：php, dom

我正在编写一个脚本，该脚本需要一个网页并检测使用了多少次像 facebook like 按钮这样的东西。因为这最好用 DOM 来完成，所以我决定使用 PHP 的 DOMDocument。

不过，我遇到的一个问题是对于像 facebook 的点赞按钮这样的元素：

```
<fb:like send="true" width="450" show_faces="true"></fb:like> 
```

由于此元素在技术上具有“fb”命名空间，因此 DOMDocument 会引发警告，指出未定义此命名空间前缀。然后它继续剥离前缀，所以当我到达所述元素时，它的标签不再是*fb:like*，而是*like*。

有没有办法“预注册”一个命名空间？有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T19:27:18.363

在使用 xml 解析器之前，您可以使用[tidy](http://php.net/manual/en/book.tidy.php)来修饰它。

```
$tidy = new tidy();
$config = array(
    'output-xml'   => true, 
    'input-xml'    => true, 
    'add-xml-decl' => true,
);
$tidy->ParseString($htmlSoup, $config);
$tidy->cleanRepair();
echo $tidy; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-12T19:02:10.877

由于这从未“解决”，我决定继续为不喜欢弄清楚正则表达式的其他人实施[syndance的解决方案。](https://stackoverflow.com/users/4873869/syndace)

```
// do this before you use loadHTML()    
// store any name spaced elements so we can re-add them later
$postContent = preg_replace('/<(\w+):(\w+)/', '<\1 data-namespace="\2"' , $postContent);

// once you are done using domdocument fix things up
// re-construct any name-spaced tags
$postContent = preg_replace('/<(\w+) data-namespace="(\w+)"/', '<\1:\2 ' , $postContent); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T18:25:30.733

Is this what you are looking for?

You could try [SimpleHTMLDOM](http://simplehtmldom.sourceforge.net/). You can then run something like...

```
$html = new simple_html_dom();
$html->load_file('fileToParse.html');
$count=0;
foreach($html->find('fb:like') as $element){
    $count+=1
}
echo $count; 
```

That should work.

I looked a bit further and found this. I took this from the [DOMDocument](http://php.net/manual/en/domdocument.getelementsbytagname.php#domdocument.getelementsbytagname.example.basic) on PHP.net.

```
$dom = new DOMDocument;
$dom->loadHTML('fileToParse.html'); // or $dom->loadXML('fileToParse.html'); 
$likes = $dom->getElementsByTagName('fb:like');
$count=0;
foreach ($likes as $like) {
    $count+=1;
} 
```

After this one I am stuck

```
$file=file_get_contents("other.html");
$search = '/<fb:like[^>]*>/';
$count  = preg_match_all($search , $file, $matches);
echo $count;
//Below is not needed
print_r($matches); 
```

That however is RegEx and is quite slow. I Tried:

```
$dom = new DOMDocument;
$xpath = new DOMXPath($dom);
$dom->load("other.html");
$xpath = new DOMXPath($dom);
$rootNamespace = $dom->lookupNamespaceUri($dom->namespaceURI); 
$xpath->registerNamespace('fb', $rootNamespace); 
$elementList = $xpath->query('//fb:like'); 
```

But got the same error as you.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-12T16:35:32.850

一直无法找到一种方法来做到这一点`DOM`。我很惊讶正则表达式比`DOMDocument`我通常不是这样。 `strpos`不过应该是最快的：

```
strpos($dom, '<fb:like'); 
```

这只会找到第一次出现，但您可以编写一个简单的递归函数来适当地更改偏移量。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-10T07:54:24.470

我遇到了同样的问题，我想出了以下解决方案/解决方法：

没有使用 DOMDocument 解析带有命名空间的 HTML 而不丢失命名空间的干净方法，但是有一些解决方法：

*   使用另一个在 HMTL 代码中接受名称空间的解析器。在此处查找 HTML 解析器的详细列表。这可能是最有效的方法。
*   如果你想坚持使用 DOMDocument，你基本上必须对代码进行预处理和后处理。

    *   在将代码发送到 DOMDocument->loadHTML 之前，请使用正则表达式、循环或任何您想要查找所有命名空间标记的方式，并将自定义属性添加到包含命名空间的开始标记。

        ```
        <fb:like send="true" width="450" show_faces="true"></fb:like> 
        ```

        然后会导致

        ```
        <fb:like xmlNamespace="fb" send="true" width="450" show_faces="true"></fb:like> 
        ```

    *   现在将编辑后的代码提供给 DOMDocument->loadHTML。它会去除命名空间，但会保留导致的属性

        ```
        <like xmlNamespace="fb" send="true" width="450" show_faces="true"></like> 
        ```

    *   现在（再次使用正则表达式、循环或任何你想要的）找到所有带有属性 xmlNamespace 的标签，并用实际的命名空间替换该属性。不要忘记将命名空间也添加到结束标签中！

我不认为 OP 仍在寻找答案，我只是为在他们的研究中找到这篇文章的任何人发布这个。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-02-16T16:14:55.890

尝试了正则表达式解决方案...结束标签有问题，因为它们不接受属性！

```
<ns namespace="node">text</ns> 
```

（最重要的是，正则表达式没有寻找结束标签......）所以最后我做了一些丑陋的东西，比如

```
$output = preg_replace('/<(\/?)(\w+):(\w+)/', '<\1\2thistaghasanamespace\3' , $output); 
```

和

```
$output = preg_replace('/<(\/?)(\w+)thistaghasanamespace(\w+)/', '<\1\2:\3' , $output); 
```

# java - 将所选项目滚动到 JList 的顶部

> ID：10985446
> 
> 赞同：0
> 
> 时间：2012-06-11T18:19:36.407
> 
> 标签：java, swing, visibility, jscrollpane, jlist

ensureIndexIsVisible() 使所选项目出现在 JList 的末尾，那么如何使所选项目出现在 JList 的顶部而不是末尾？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T18:28:56.043

尝试这个：

```
yourList.getFirstVisibleIndex(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T18:27:08.487

尝试这个：

1.  获取每个项目的高度`list.getFixedCellHeight()`
2.  获取视口边界`scrollpane.getViewport().getViewPosition().y`
3.  将 (2) 除以 (1) 得到隐藏单元格的数量，将其四舍五入，这就是您的索引。

可能有一种更简单的内置方式。查看[JList](http://docs.oracle.com/javase/7/docs/api/javax/swing/JList.html)和[JScrollpane](http://docs.oracle.com/javase/7/docs/api/javax/swing/JScrollPane.html)的 API 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T20:05:53.610

好的，我终于得到了我想要的

```
jlist.ensureIndexIsVisible(index);
int num;
if(index+1000>datalist.size())
num = datalist.size()-index-1; 
else
num = 1000;
jlist.scrollRectToVisible(jl.getCellBounds(index,index+num));
jlist.setSelectedIndex(index); 
```

这使我在索引处选择的项目出现在 JList 的顶部

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-06T11:11:53.653

这个问题很老，但也许我的回答会很有用。

```
myList.setVisibleRowCount(x);
int selected=myList.getSelectedIndex();
myList.scrollRectToVisible(myList.getCellBounds(selected,selected+x)); 
```

# java - NetBeans 平台：操作已禁用，但快捷方式处于活动状态

> ID：10985448
> 
> 赞同：0
> 
> 时间：2012-06-11T18:19:49.137
> 
> 标签：java, keyboard-shortcuts, action, toolbar, netbeans-platform

在对我的申请进行了一个月的工作后，我发现了一些奇怪的东西。我有一个 Viewer 模块，所有 TopComponents 都在其中，还有一个 MenuToolbar 模块，我在其中保存所有工具栏操作。这是我的补充：

```
package com.demo.toolbar;

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import org.openide.awt.ActionRegistration;
import org.openide.awt.ActionReference;
import org.openide.awt.ActionReferences;
import org.openide.awt.ActionID;
import org.openide.util.NbBundle.Messages;

@ActionID(category = "Edit",
id = "com.demo.toolbar.AddAction")
@ActionRegistration(iconBase = "com/demo/toolbar/icons/add.png",
displayName = "#CTL_AddAction")
@ActionReferences({
    @ActionReference(path = "Toolbars/AddEditDelete", position = 1),
    @ActionReference(path = "Shortcuts", name = "D-A")
})
@Messages("CTL_AddAction=Add")
public final class AddAction implements ActionListener {

    public void actionPerformed(ActionEvent e) {
        //code here
    }
} 
```

该快捷方式通过 CTRL+A 激活，并将 TopComponent 置于添加模式。我还有一个使用 CTRL+D 命令激活的 DeleteAction。当此人按 CTRL+A 时，会发生以下情况：

```
List<Component> c = new ArrayList<Component>();
        c.addAll(Arrays.asList(ToolbarPool.getDefault().findToolbar("AddEditDelete").getComponents()));
if (mode.equals("add")) {
    for (Component component : c) {
        component.setEnabled(false);
        }
        c.get(13).setEnabled(true);
        c.get(14).setEnabled(true);
} 
```

因此，基本上每当用户点击工具栏上的添加按钮时，它都会禁用所有其他按钮（包括删除），因此用户在添加模式下无法执行这些操作。

但是，他们仍然可以按 CTRL+D 删除。这是一个很大的禁忌...

我该如何解决这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T18:31:09.973

您不应直接启用/禁用操作。看看[Actions API](http://bits.netbeans.org/dev/javadoc/org-openide-actions/org/openide/actions/doc-files/api.html)。`CookieAction`可能是你想要的。这个想法是将 Cookie（某些上下文）发布到全局查找。您的 Cookie 感知操作会根据 Cookie 的存在而自动启用/禁用。

事实上，这就是 IDE 中的保存按钮的工作方式。每当编辑器将 a 放入`SaveCookie`全局上下文时，都会启用工具栏按钮和 Ctrl+S；[如此处](https://blogs.oracle.com/geertjan/entry/savecookie)所述

您可以考虑使用[状态机](http://en.wikipedia.org/wiki/State_pattern)以干净的方式控制 cookie 的存在。

# asp.net - PlaceHolder 使用 Listview 错误

> ID：10985449
> 
> 赞同：0
> 
> 时间：2012-06-11T18:19:50.393
> 
> 标签：asp.net

下面是我的标记代码，它在编译时给了我错误消息。我在谷歌搜索了几个小时，但无法帮助自己。我的标记中不正确的代码是什么。我有一个用于此页面的 cs 文件，它将数据绑定到此列表视图控件

解决此问题的任何帮助都将非常有帮助

**错误消息：必须在 ListView 'listview1' 上指定项目占位符。通过将控件的 ID 属性设置为“itemContainer”来指定项目占位符。项目占位符控件还必须指定 runat="server"。**

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Attestation2.aspx.cs" Inherits="Attestation2" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body style="z-index: 1; left: 21px; top: 0px; position: absolute; height: 313px;
    width: 983px">
    <form id="form1" runat="server">
    <div>
        <asp:DropDownList ID="Entitlementdlist" runat="server" AutoPostBack="true" Visible="true"
            ToolTip="All the Requests in this dropdown are Entitlement Requests only">
        </asp:DropDownList>
        <%--asp:PlaceHolder ID="PlaceHolder1" runat="server"></asp:PlaceHolder>--%>
        <asp:ListView ID="listview1" runat="server" ItemPlaceholderID="itemplaceholder" >

            <ItemTemplate>
                <table style="border:1px solid black;">
                    <tr>
                        <td>Report Name</td>
                        <td><asp:TextBox ID="ReportNameLbl" runat="server" Text='<%#Eval("REPORT_DESCRIPTION.rptdesctext") %>' Width="500"></asp:TextBox> </td>
                        <td>
                        <asp:CheckBoxList ID="CheckBoxList1" runat="server" RepeatDirection="Horizontal">
                             <asp:ListItem Text="Yes" Value="Yes"></asp:ListItem>
                                <asp:ListItem Text="No" Value="No"></asp:ListItem>
                            </asp:CheckBoxList>
                        </td>
                    </tr>
                    <tr>
                        <td>Content Description</td>
                        <td>
                        <asp:Label ID="ContentDescLbl" Text='<%#Eval("REPORT_REQUEST.StopLossMax") %>' runat="server" ></asp:Label>
                        </td>
                        <td>
                        <asp:CheckBoxList ID="CheckBoxList2" runat="server" RepeatDirection="Horizontal">
                             <asp:ListItem Text="Yes" Value="Yes"></asp:ListItem>
                                <asp:ListItem Text="No" Value="No"></asp:ListItem>
                            </asp:CheckBoxList>
                        </td>

                    </tr>
                    <tr>

                    <td>
                    Frequency
                    </td>
                    <td>
                     <asp:Label ID="frequencyLbl" Text='<%#Eval("REPORT_REQUEST.reportfrequency") %>' runat="server" ></asp:Label>
                    </td>
                    <td>
                    <asp:CheckBoxList ID="CheckBoxList3" runat="server" RepeatDirection="Horizontal">
                             <asp:ListItem Text="Yes" Value="Yes"></asp:ListItem>
                                <asp:ListItem Text="No" Value="No"></asp:ListItem>
                            </asp:CheckBoxList>
                    </td>
                    </tr>
                    <tr>
                    <td>
                    Recepients
                    </td>
                    <td colspan="2">
                    <td>
                    <asp:ListView ID = "lstview2" runat = "server" >
                     </asp:ListView>
                    </td>
                    </td>
                    </tr>
                </table>

                </asp:Table>--%>
            </ItemTemplate>
        </asp:ListView>
    </div>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T18:24:36.097

Inside your ListView you've to add a LayoutTemplate containing the PlaceHolder:

```
<asp:ListView ID="listview1" runat="server" ItemPlaceholderID="itemplaceholder" >
    <LayoutTemplate>
        <asp:PlaceHolder ID="itemplaceholder" runat="server" />
    </LayoutTemplate>
    <ItemTemplate>
        ...
    </ItemTemplate>
</asp:ListView> 
```

# function - 在haskell中迭代函数

> ID：10985451
> 
> 赞同：0
> 
> 时间：2012-06-11T18:19:52.903
> 
> 标签：function, haskell, loops

如何`iterate`修改功能以使结果为

```
f x, (f^2)x, (f^4)x, (f^8)x, ... 
```

如果有人可以向我提供任何建议，我将非常高兴。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T18:25:36.673

Given, that `f^x` means `f` x-times applied to `x` I would say

```
iterate :: (a -> a) -> a -> [a]
iterate f x = f x : iterate (f . f) x 
```

would suffice.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T20:10:02.400

选择：

```
Prelude> map snd $ iterate (\(f,x) -> (f.f, f x)) ((+1),1)
[1,2,4,8,16,32,64,128,256,512,1024,2048,4096,8192,... 
```

# javascript - Underscore.js，从一个对象中获取两个项目并添加到顶部

> ID：10985455
> 
> 赞同：1
> 
> 时间：2012-06-11T18:20:15.487
> 
> 标签：javascript, underscore.js

我有一个看起来像这样的对象

```
{
 "AF" : {
   "name" : "Afghanistan"
 },
 "AL" : {
   "name" : "Albania"
 }
} 
```

它有所有国家的对象。

我想做的是从某些 ISO 复制对象并将它们添加到对象的顶部（不删除原始对象）。

我开始做的是这样的：

```
var filtered = _.collect(data, function(item, key){

    if($.inArray(item.iso, ['US','CA']) !== -1) {
            return item;
    }
}); 
```

这给了我一个带有对象的数组。但是，我如何将这些添加到原始对象中？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T15:53:10.320

正如@mu-is-too-short 所说，JS 对象对其属性没有强制排序。

此外，您的对象的属性没有`iso`您所依赖的属性。看到后请编辑您的问题:)

如果您的代码依赖于此，那么您走错路了。正如他所建议的那样，您应该改用数组，但您可以将对象保留在其中。我假设您从问题中首先显示的对象文字的结构开始。使用此代码段，您将创建一个具有默认顺序的数组，然后将过滤后的对象添加到该数组的头部：

```
var data = {
  "AF" : {
    "name" : "Afghanistan"
  },
  "AL" : {
    "name" : "Albania"
  }
};

var countries = _.collect(data, _.identity);

var repeated = [];
_.forEach(countries, function(country) {
  if (repeatsAtTheTop(country)) {
    // Added in reverse order so it preserves the  
    // original once unshifted into the original array
    repeated.unshift(country);
  }
});

_.forEach(repeated, function(item, index) { countries.unshift(item) }); 
```

# erlang - 如何在 Riak 上运行 Erlang MapReduce 函数？

> ID：10985458
> 
> 赞同：1
> 
> 时间：2012-06-11T18:20:29.543
> 
> 标签：erlang, mapreduce, riak

我是 Riak 和 Erlang 的新手。我已经成功创建并运行了 JS MapReduce 作业，现在我正在尝试执行以下 Reduce 函数：

[http://web.archive.org/web/20130329021000/http://contrib.basho.com/delete_keys.html](http://web.archive.org/web/20130329021000/http://contrib.basho.com/delete_keys.html)

执行这个reduce函数的步骤是什么？具体来说，

*   我应该把代码放在哪里？
*   我应该输入`addReducePhase( )`什么？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T08:59:02.593

你应该写这样的东西：

```
MapReduceResult result = client.mapReduce("myBucket")
    .addLinkPhase("bucketX", "test", false)
    .addMapPhase(new NamedJSFunction("Riak.mapValuesJson"), false)
    .addReducePhase(new NamedErlangFunction("riak_kv_mapreduce", "reduce_sort"), true)
.execute(); 
```

在这种情况下，reduce 阶段调用 erlang 模块 riak_kv_mapreduce 的函数 reduce_sort。在你的情况下，你应该打电话

```
.addReducePhase(new NamedErlangFunction("reduce_functions", "delete"), true) 
```

（最后的 true 是一个标志，设置是否必须将结果返回给客户端 - 最后一步 - 或不 - 中间步骤 -）

Erlang 文件应在使用前编译为 .beam 并添加到 riak.config 中的“add_paths”参数中，例如

```
{add_paths, ["/home/vinz/riak/custom_modules/"]} 
```

其中 /home/vinz/riak/custom_modules 是包含已编译 Erlang 模块的目录。

有关详细信息，请参阅[Basho Java 客户端自述文件](https://github.com/basho/riak-java-client/blob/master/README.org)。我希望这有帮助！

# objective-c - 更改导航栏控制器文本

> ID：10985460
> 
> 赞同：0
> 
> 时间：2012-06-11T18:20:36.233
> 
> 标签：objective-c, ios, uinavigationcontroller, storyboard, uinavigationitem

我正在尝试更改导航栏控制器文本（默认情况下这是前一个控制器的标题）

换句话说，需要更改[此图像](http://www.iosdevnotes.com/wp-content/uploads/2011/03/UINavigationController-Tutorial.png)中的“后退”文本。

我尝试了几种可能性，但没有一个能捕捉到新文本：

```
self.navigationItem.backBarButtonItem = [[UIBarButtonItem alloc] initWithTitle:@"New Title" style:UIBarButtonItemStyleBordered target:nil action:nil]; 
```

或者

```
UIBarButtonItem *backButton = [[UIBarButtonItem alloc] initWithTitle:@"New Title" style:UIBarButtonItemStylePlain target:nil action:nil];
self.navigationItem.backBarButtonItem = backButton; 
```

或者

```
[[bar backItem] setTitle:@" New Title "]; 
```

或者

```
self.navigationItem.backBarButtonItem.title=@"New Title"; 
```

或者

```
self.navigationController.navigationBar.backItem.title=@"New Title"; 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T21:13:41.283

尝试这个：

```
UIBarButtonItem *backButton = [[UIBarButtonItem alloc] initWithTitle:@"New Title" style:UIBarButtonItemStylePlain target:nil action:nil];
self.navigationItem.leftBarButtonItem = backButton; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T19:08:58.817

我没有要检查的上下文，但尝试将其称为 leftBarButtonItem。像这样：

```
[self.navigationItem.leftBarButtonItem setText:@"SomethingSomethingDarkside"] 
```

# java - 为什么控制台不提示输入？

> ID：10985462
> 
> 赞同：2
> 
> 时间：2012-06-11T18:20:44.393
> 
> 标签：java, io, console

```
import java.io.*;

public class ConsoleDemo {

public static void main(String[] args) {
    String str;
    Console con;

    con = System.console();

    if (con == null)
        return;

    str = con.readLine("Enter a string :    ");
    con.printf("Here is your string %s", str);
  }
} 
```

我从书中复制了这段代码，上面说我会在屏幕上得到输入字符串的提示，但我的 IDE 只是给出执行已终止的消息，而没有给我提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T19:07:57.323

Eclipse 和 Netbeans 都支持使用 Console。Console.istty() 方法将返回 false，您将无法使用控制台。

您可以将代码更改为以下内容并获得相同的结果，并且能够从 IDE 中运行它。

```
import java.io.*; 

public class ConsoleDemo { 

    public static void main(String[] args) { 
        Scanner scan = new Scanner(System.in);
        System.out.println("Enter a String and press enter");
        System.out.println("You entered the String: " + scan.nextLine()
    } 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T18:25:49.163

你用的是什么IDE？当您从命令行运行此代码时，它工作得很好，所以问题显然出在您的 IDE 的配置上。

使用以下命令从命令行编译和运行您的代码：

```
javac ConsoleDemo.java
java ConsoleDemo 
```

**编辑**：正如[这个链接](http://illegalargumentexception.blogspot.com/2010/09/java-systemconsole-ides-and-testing.html)所暗示的，`System.Console`在 IDE 中使用并不总是有效。或者，您可以只使用`System.in`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T18:58:24.453

您的代码可以在 Eclipse 和命令提示符下运行。

如果您使用的是 Java 5 或 +，也请尝试这种方式

```
Scanner in = new Scanner(System.in);
System.out.print("Enter a String : ");
String string = in.nextLine();
System.out.println("Here is your String : " + string); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T18:29:38.423

这是因为您的 IDE 通过`javaw.exe`(windowless -> no console) 而不是`java.exe`(with console window) 命令运行此代码，因此`System.console()`返回 null。

标准解决方案是从表示的输入流中读取数据，`System.in`以便您可以使用例如 Scanner 之类的

```
Scanner keybord = new Scanner(System.in);
String line = keybord.readLine(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-11T19:38:26.117

默认情况下，eclipse 不将控制台与 JVM 关联。您可能需要对其进行配置。但是如果你在命令行中运行它，它肯定会有控制台，因此它会毫无问题地运行。

# php - Symfony2 - 捆绑以外的东西

> ID：10985464
> 
> 赞同：1
> 
> 时间：2012-06-11T18:20:53.357
> 
> 标签：php, frameworks, symfony

我目前正在从事我需要捆绑以外的东西的项目。我称之为“模块”的东西。它应该与捆绑包不同，因为当项目启动时系统不知道将使用哪些“模块”以及如何配置它们。

我也将使用类似于捆绑包的这些模块

```
$response = $this->forward('AcmeHelloModule:Hello:fancy'); 
```

或者

```
$response = $this->forward('Acme/Hello:Hello:fancy'); 
```

这里 HelloController->fancyAction(); 将被执行。这个控制器在文件 /src/modules/Acme/Hello/Controller/HelloController.php 中描述

那么问题是如何实现呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T07:38:31.570

在 AppKernel 中添加以下方法：

```
public function getBundle($name, $first = true)
{
    if (substr($name, -6) == 'Module')) {
        return $this->getBundle('ModuleBundle')->getModule($name, $first);
    }

    return parent::getBundle($name, $first);
} 
```

并且所有逻辑都在 ModuleBundle 中运行。但要确保响应的类型与 Kernel->getBundle(); 相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T13:00:10.313

一个解决方案是实现一个可以动态安装、加载和运行您所谓的模块的 PluginBundle。

PluginBundle 根本不包含特定的插件代码，而是您的模块/插件的运行时环境。然后，您可以将启用的插件/模块保存在数据库中，并在运行时动态加载它们。

有了这个解决方案，应该可以创建一个动态插件机制，就像在 wordpress 中一样。在运行时修改 AppKernel 不是一个好的解决方案，因为您还必须在禁用捆绑包时清除缓存。

# eclipselink - 使用 EclipseLink API 将两个字段映射到同一列

> ID：10985473
> 
> 赞同：0
> 
> 时间：2012-06-11T18:21:41.360
> 
> 标签：eclipselink

**你好，**

我正在使用**EclipseLink API**创建动态实体来表示存储在数据库表中的图形。链接存储在自己的表中，其中包含链接 ID 列、开始节点 ID 和结束节点 ID 列，以及其他用户定义的列。节点有自己的表，其中存储了节点 ID 以及其他用户定义的列。

在进行从链接表到节点表的映射时，我使用 API 执行此操作：

```
OneToOneMapping startNodeMapping = dynamicLinkTypeBuilder.addOneToOneMapping("startNode", dynamicNodeTypeBuilder.getType(), "NODE_ID");     
OneToOneMapping endNodeMapping = dynamicLinkTypeBuilder.addOneToOneMapping("endNode", dynamicNodeTypeBuilder.getType(), "NODE_ID"); 
```

运行前面的代码时，我在堆栈跟踪中收到以下消息：

```
Local Exception Stack: Exception [EclipseLink-48] (Eclipse Persistence Services - 2.3.0.v20110604-r9504): org.eclipse.persistence.exceptions.DescriptorException
Exception Description: Multiple writable mappings exist for the field [TEST_NETWORK_LINK.NODE_ID].  Only one may be defined as writable, all others must be specified read-only.
Mapping: org.eclipse.persistence.mappings.OneToOneMapping[startNodeId] 
```

抛出此异常是因为我将两个字段（startNode 和 endNode）从同一实体映射到不同表/实体中的同一列/字段。

你知道我能做些什么来解决这个映射问题吗？你会建议不同的策略吗？我无法更改表结构，也不想将其中一个映射设为“只读”，但我可以随意更改动态映射。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T20:00:45.820

问题出在错误消息中 - 您在 startNode 和 endNode 映射中都使用“NODE_ID”字段作为外键。本质上，当从数据库读回时，您的对象的 startNode 将始终 == endNode。如果两个映射旨在引用不同的节点，我相信您会希望为它们指定不同的字段，以便它们使用自己的外键。例如：

OneToOneMapping startNodeMapping = dynamicLinkTypeBuilder.addOneToOneMapping("startNode", dynamicNodeTypeBuilder.getType(), "START_NODE_ID");
OneToOneMapping endNodeMapping = dynamicLinkTypeBuilder.addOneToOneMapping("endNode", dynamicNodeTypeBuilder.getType(), "END_NODE_ID");

两者都会自动引用被引用表中的主键，我假设它是“NODE_ID”。

# node.js - 尝试打开现有节点站点时，WebMatrix 2 冻结

> ID：10985474
> 
> 赞同：2
> 
> 时间：2012-06-11T18:21:44.970
> 
> 标签：node.js, webmatrix

我的 Dropbox 中有一个现有的 Node 项目，当我在 WebMatrix 2 中打开它时，它会将其检测为 Node 项目，但随后冻结在“配置站点”上。

关于如何诊断导致这种情况的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T16:06:10.810

对于遇到此问题的其他任何人 - 这是我们在线提要的问题。我们进行了修复，现在一切都应该开始工作了。如果您仍然遇到问题，请删除 %localappdata%\Microsoft\Web Platform Installer\ 中的所有文件，然后重试。

# node.js - 如何在 Node.js 中使用 Nano 创建 couchdb 设计文档？

> ID：10985480
> 
> 赞同：16
> 
> 时间：2012-06-11T18:22:17.333
> 
> 标签：node.js, couchdb, couchdb-nano

翻阅自述文件，似乎没有一种方法可以使用 Nano 创建设计文档？其他人为此在做什么？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-11T18:31:05.313

只需使用该`db.insert`功能。

```
db.insert(design_doc, '_design/design_doc_name', callback); 
```

这是一个更完整的示例（来自[tests/view/query](https://github.com/dscape/nano/blob/4276f69f676669ccd9c77deecb77388cd93c092f/tests/design/query.js#L16-21)）：

```
 db.insert(
  { "views": 
    { "by_name_and_city": 
      { "map": function(doc) { emit([doc.name, doc.city], doc._id); } } 
    }
  }, '_design/people', function (error, response) {
    console.log("yay");
  }); 
```

如果您有兴趣了解更多信息，请查看此[示例](https://github.com/dscape/nano/blob/master/samples/lazy_creation_of_views.js)或继续阅读[CouchDB 指南](http://guide.couchdb.org/)

# c# - Xml 类序列化错误

> ID：10985482
> 
> 赞同：2
> 
> 时间：2012-06-11T18:22:23.397
> 
> 标签：c#, xml, xml-serialization

我正在尝试像这样创建 xml：

```
<CreditApplication>
    <ApplicantData>
        <FirstName> John </FirstName>
        <LastName> Smith </LastName>
    </ApplicantData>
    <CoApplicantData>
        <FirstName> Mary </FirstName>
        <LastName> Jane </LastName>
    </CoApplicantData>
</CreditApplication> 
```

我已经这样定义了我的类：

```
[XmlRoot("CreditApplication")]
public class CreditApplication
{
    [XmlElement("ApplicantData")]
    public CreditApplicant Applicant;
    [XmlElement("CoApplicantData")]
    public CreditApplicant CoApplicant;
}

public class CreditApplicant : INotifyPropertyChanged
{
    ...
    [XmlElement("FirstName")]
    public string FirstName { set; get; }
    [XmlElement("LastName")]
    public string LastName { set; get; }
    ...
} 
```

在 CreditApplication 类的更下方，我引用了在程序中其他地方定义的枚举，这些枚举也需要可序列化。

当我实际运行程序并尝试使用以下命令对课程进行 serlize 化时：

```
XmlSerializer applicantXMLSerializer = new XmlSerializer(typeof(CreditApplication));
StringWriter applicantStringWriter = new StringWriter();
XmlWriter applicantXmlWriter = XmlWriter.Create(applicantStringWriter);
applicantXMLSerializer.Serialize(applicantXmlWriter, application);
var applicantXML = applicantStringWriter.ToString(); 
```

但我得到了错误：`There was an error reflecting type 'Models.Credit.CreditApplication'`

有谁知道我做错了什么？

~~**编辑：**~~

我已经更新了上面的代码以反映建议的更改。但是，还有其他问题已经出现。

我有一个这样定义的枚举：

```
[DataContract]
public enum Relationship
{
    Spouse = 4,
    ResidesWith = 1,
    Parent = 2,
    Other = 3,
    PersonalGuarantor = 5,
    CoApplicant = 6
} 
```

~~如上所示，零不是一个已定义的选项。因此，没有默认值。我围绕未设置的关系默认为零的想法设计了程序。这样我就可以很容易地查看是否设置了一个值。如果我定义了零，然后将其初始化为“无关系”或类似的东西，那么就无法判断用户是否将值设置为“无关系”，或者他们只是没有选择一个选项。~~

搬家：

[没有默认值的枚举的 XML 序列化](https://stackoverflow.com/questions/10986188/xml-serialization-of-enums-without-default-values/10986224#10986224)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T18:26:41.027

如果您的字段应该是 XML 中的单独元素，则您希望使用[XMLElement 属性](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlelementattribute.aspx)而不是[XMLAttribute 属性。](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlattributeattribute.aspx)

例如：

```
<SimpleXML name="test">
  <child>SomeValue</child>
</SimpleXML> 
```

`name`是一个属性，而`child`是一个元素。

# android - Android OpenGL ES 2.0 屏幕坐标转世界坐标

> ID：10985487
> 
> 赞同：20
> 
> 时间：2012-06-11T18:23:06.907
> 
> 标签：android, opengl-es-2.0, coordinate-transformation

我正在构建一个使用 OpenGL ES 2.0 的 Android 应用程序，但我遇到了麻烦。我正在尝试将屏幕坐标（用户触摸的位置）转换为世界坐标。我试过阅读和玩 GLU.gluUnProject，但我要么做错了，要么就是不明白。

这是我的尝试......

```
public void getWorldFromScreen(float x, float y) {
    int viewport[] = { 0, 0, width , height};

    float startY = ((float) (height) - y);
    float[] near = { 0.0f, 0.0f, 0.0f, 0.0f };
    float[] far = { 0.0f, 0.0f, 0.0f, 0.0f };

    float[] mv = new float[16];
    Matrix.multiplyMM(mv, 0, mViewMatrix, 0, mModelMatrix, 0);

    GLU.gluUnProject(x, startY, 0, mv, 0, mProjectionMatrix, 0, viewport, 0, near, 0);
    GLU.gluUnProject(x, startY, 1, mv, 0, mProjectionMatrix, 0, viewport, 0, far, 0);

    float nearX = near[0] / near[3];
    float nearY = near[1] / near[3];
    float nearZ = near[2] / near[3];

    float farX = far[0] / far[3];
    float farY = far[1] / far[3];
    float farZ = far[2] / far[3];
} 
```

我得到的数字似乎不正确，这是使用这种方法的正确方法吗？它适用于 OpenGL ES 2.0 吗？我应该在这些计算之前使模型矩阵成为单位矩阵（Matrix.setIdentityM（mModelMatix，0））吗？

作为后续，如果这是正确的，我该如何选择输出 Z？基本上，我总是知道我希望世界坐标在什么距离，但 GLU.gluUnProject 中的 Z 参数似乎是近平面和远平面之间的某种插值。它只是线性插值吗？

提前致谢

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-07-30T07:23:09.533

```
/**
    * Calculates the transform from screen coordinate
    * system to world coordinate system coordinates
    * for a specific point, given a camera position.
    *
    * @param touch Vec2 point of screen touch, the
      actual position on physical screen (ej: 160, 240)
    * @param cam camera object with x,y,z of the
      camera and screenWidth and screenHeight of
      the device.
    * @return position in WCS.
    */
   public Vec2 GetWorldCoords( Vec2 touch, Camera cam)
   {  
       // Initialize auxiliary variables.
       Vec2 worldPos = new Vec2();

       // SCREEN height & width (ej: 320 x 480)
       float screenW = cam.GetScreenWidth();
       float screenH = cam.GetScreenHeight();

       // Auxiliary matrix and vectors
       // to deal with ogl.
       float[] invertedMatrix, transformMatrix,
           normalizedInPoint, outPoint;
       invertedMatrix = new float[16];
       transformMatrix = new float[16];
       normalizedInPoint = new float[4];
       outPoint = new float[4];

       // Invert y coordinate, as android uses
       // top-left, and ogl bottom-left.
       int oglTouchY = (int) (screenH - touch.Y());

       /* Transform the screen point to clip
       space in ogl (-1,1) */       
       normalizedInPoint[0] =
        (float) ((touch.X()) * 2.0f / screenW - 1.0);
       normalizedInPoint[1] =
        (float) ((oglTouchY) * 2.0f / screenH - 1.0);
       normalizedInPoint[2] = - 1.0f;
       normalizedInPoint[3] = 1.0f;

       /* Obtain the transform matrix and
       then the inverse. */
       Print("Proj", getCurrentProjection(gl));
       Print("Model", getCurrentModelView(gl));
       Matrix.multiplyMM(
           transformMatrix, 0,
           getCurrentProjection(gl), 0,
           getCurrentModelView(gl), 0);
       Matrix.invertM(invertedMatrix, 0,
           transformMatrix, 0);       

       /* Apply the inverse to the point
       in clip space */
       Matrix.multiplyMV(
           outPoint, 0,
           invertedMatrix, 0,
           normalizedInPoint, 0);

       if (outPoint[3] == 0.0)
       {
           // Avoid /0 error.
           Log.e("World coords", "ERROR!");
           return worldPos;
       }

       // Divide by the 3rd component to find
       // out the real position.
       worldPos.Set(
           outPoint[0] / outPoint[3],
           outPoint[1] / outPoint[3]);

       return worldPos;       
   } 
```

算法[在这里进一步解释。](http://magicscrollsofcode.blogspot.com/2010/10/3d-picking-in-android.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-02T07:41:50.080

希望我的问题（和答案）可以帮助您：

[如何在放大时找到点击的绝对位置](https://stackoverflow.com/q/8180442/726954)

它不仅有代码，还有图表和图表以及解释它的图表:) 我也花了很长时间才弄清楚。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-04T15:07:52.667

恕我直言，不需要重新实现此功能...我尝试了 Erol 的解决方案，它奏效了，非常感谢 Erol。此外，我玩过

```
 Matrix.orthoM(mtrxProjection, 0, left, right, bottom, top, near, far); 
```

它在我的小菜鸟示例 2D OpenGL ES 2.0 项目中也能正常工作：

*   [公共无效 onSurfaceChanged（GL10 未使用，int 宽度，int 高度）{...](https://github.com/Karm/galgs/blob/master/src/cz/urbangaming/galgs/PointsRenderer.java#L45)

# directx - 单个 Present 之前的多个常量缓冲区更新

> ID：10985488
> 
> 赞同：1
> 
> 时间：2012-06-11T18:23:07.870
> 
> 标签：directx, shader, slimdx, directx-11, particle-system

我正在使用 SlimDX/D3D11 编写粒子系统管理器，并且发现常量缓冲区存在一些问题。

我的粒子系统管理器可以同时绘制多个具有不同物理特性的粒子系统，并且基于XNA的[Particle 3D样本](http://blogs.msdn.com/b/shawnhar/archive/2010/03/22/point-sprites-in-xna-game-studio-4-0.aspx)。绘制操作的总体思路是：

*   context.ClearRenderTargetView(...)
*   渲染粒子
*   交换链.Present()

“渲染粒子”操作是这样实现的：

*   shaderTimeGlobalVariable.Set(currentTime)
*   对于着色器技术的每个通道：
    *   申请通行证
    *   对于每个粒子系统：
        *   使用物理常量设置常量缓冲区 (EffectConstantBuffer.SetRawValue)
        *   发出一个或多个 context.Draw 调用

我的问题是，似乎只考虑了最后一个常量缓冲区调用，从而迫使所有粒子系统具有相同的物理特性。

所以，首先：我怀疑这是正确/预期的，我错过了一些关键点。谁能澄清我错过了什么？

我希望一个解决方案是将粒子的物理特性插入到顶点缓冲区中，每个顶点的成本大约增加 12 个字节，因此对于我正在使用的每个物理系统来说，成本会增加 12k 到 120k。如果可能的话，我想避免的事情：还有其他选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T21:28:31.550

如果您更改着色器变量，则必须（重新）应用该通道。所以你的步骤将是：

*   设置时间
*   对于每个粒子系统
    *   设置常量缓冲区
    *   每次通过
        *   申请通行证
        *   画

Depending on the actual buffer data, you can reorder the calls for performance optimization.

The reason, why you have to apply the pass after setting the constant buffers, is that the effect framework sends data to the GPU on apply-calls only.

# python - 将 re 与变量列表参数一起使用

> ID：10985490
> 
> 赞同：3
> 
> 时间：2012-06-11T18:23:16.783
> 
> 标签：python, regex

我想制作一个正则表达式来解析定期出现在我正在查看的文档中的日期表达式，特别是，日期有时会写成：

```
FEBRUARY 8
FEBRUARY. 8
FEBRUARY 8.
FEBRUARY    8 
```

所以我的正则表达式应该看起来像

```
re.compile(MonthList+'.?.?.?.?[0-9][0-9]?') 
```

除了这不起作用。我怎样才能在我的正则表达式中写入一个列表，以便它充当`(JANUARY|FEBRUARY|MARCH|...etc)`而不是实际写出它，或者制作一个循环？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T18:25:48.327

You can use ordinary string manipulation to build up the regular expression. Just keep in mind that the strings in your list will be interpreted as regexes as well, unless you use `re.escape` to sanitize them:

```
r = re.compile('({}).{0,3}\d{1,2}'.format(
         '|'.join(map(re.escape, month_list)))) 
```

# javascript - 如何在 IE 中更改 cssText？

> ID：10985495
> 
> 赞同：0
> 
> 时间：2012-06-11T18:23:36.563
> 
> 标签：javascript, css, internet-explorer

过去，我可以通过内联样式标签修改页面上的 CSS。我知道这听起来很可怕，但它适用于自定义 CSS 编写，同时使用一种所见即所得（虽然不是文本）。

我曾经做过类似的事情： `tag.styleSheet.cssText = myrules;`

我不知道确切的时间，但是当我尝试这个时，IE 在某些时候开始说“无效参数”。真正的症结在于，在任何其他浏览`tag.innerHTML = 'body {}'`器`Unable to set value of the property 'innerHTML': object is null or undefined`中都不会发生这种情况。

**编辑**

需要明确的是，我使用的是内联样式标签。我不想使用内联样式属性。

`<style type="text/css" id="mytag"></style>`

如何更改该标签的内部？

**编辑 2** 请看这个小提琴：

[http://jsfiddle.net/tTr5d/](http://jsfiddle.net/tTr5d/)

看来我的 tag.styleSheet.cssText 解决方案与使用 styleSheets 属性相同。您可以注释掉 cssText 的最后一个定义，以查看它是否按照@Teemu 的建议工作。所以现在我真的迷失了为什么它在我的应用程序中不起作用。如果有人有想法可以破坏该功能，那就太好了。与此同时，我将修补我的应用程序。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T23:06:04.940

IE 仅限于 32 个样式表。我显然喜欢忘记这个事实，它似乎包括内联样式标签，位于`<link>`.

我更改了沙箱以打开缩小功能，以便将文件放在一起。

然后我的代码工作了。

所以看起来当你超过限制并通过 JS 插入时，在你尝试我所做的之前你不会得到真正的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T20:07:54.403

您`styleSheet`只能通过`styleSheets`集合（或`imports`集合）获取对对象的引用。如果你直接引用`style`元素，你只会得到一个 HTML 元素。（检查简单`for..in`循环中两个对象的属性，并查看差异）

这适用于所有 IE，并立即呈现结果：

```
document.styleSheets['mytag'].addRule('BODY', 'background-color:red'); 
```

MSDN中的更多信息[：styleSheet 对象](http://msdn.microsoft.com/en-us/library/ie/ms535871%28v=vs.85%29.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T18:28:23.483

您可以使用 jQuery。如果是内联样式，可以使用[`.attr()`](http://api.jquery.com/attr/)函数。

```
$("#myElement").attr('style') 
```

否则，您可以看到[`.css()`](http://api.jquery.com/css/)必须提供的内容。您可以使用它来获取和设置各种 CSS 样式。

[其他与 CSS 相关的 jQuery 方法](http://api.jquery.com/category/css/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T19:13:53.907

在样式元素和 IE 的 innerHTML 方面，我从来没有太多的运气。dom 方法更可靠，即使你需要为 IE 分支；

没有 jquery-

```
function addNewStyle(str, title){
    var el= document.createElement('style');
    if(title) el.title= title;
    if(el.styleSheet) el.styleSheet.cssText= str;
    else el.appendChild(document.createTextNode(str));
    document.getElementsByTagName('head')[0].appendChild(el);
    return el;
} 
```

# sql-server - SSRS 2008 R2 - 仅在更改组时评估运行总计

> ID：10985496
> 
> 赞同：1
> 
> 时间：2012-06-11T18:23:43.917
> 
> 标签：sql-server, reporting-services, ssrs-2008

我有一个报告，我在其中捕获患者信息，其中一些存储在患者表中，其中一些存储在观察表中。以出生日期为例，如果我计算所有提供 DOB 的记录，我得到的结果明显多于患者总数，因为加入了观察表。如何对每组仅评估一次运行总数？

[编辑： http](http://sqlfiddle.com/#!3/27b91/1/0) ://sqlfiddle.com/#! 3/27b91/1/0 上的一些示例数据。如果我从该查询中计算生日，我想要 2 作为答案；种族和民族也是如此。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T21:21:46.103

对于您的具体情况，以下方法可能是正确的方法，也可能不是正确的方法，但它可能是一种有用的技术，可供您使用。

您可以在您的 select 语句中添加一些代码，以帮助您自己回答诸如“下游”之类的问题（通过添加的标准或通过 SSRS）。请参阅[您的 SQL Fiddle 的此修改](http://sqlfiddle.com/#!3/27b91/5/0)：

```
select pid, firstName, lastName, dateOfBirth, obsName, obsValue, obsDate, 
      rowRank, CASE rowRank WHEN 1 THEN 1 ELSE 0 END AS countableRow
from 
(
select Person.pid, Person.firstName, Person.lastName, Person.dateOfBirth
      , Obs.obsName, Obs.obsValue, Obs.obsDate,
      ROW_NUMBER() OVER (PARTITION BY Person.pid, Person.firstName, Person.lastName, Person.dateOfBirth ORDER BY Obs.obsDate) AS rowRank
  from Person
    join Obs on Person.pId = Obs.pId
) rankedData 
```

该`rowRank`字段将创建一个相对于组的排名编号，这可能对您下游有用，也可能没用。该`countableRow`字段将是 1 或 0，这样每个组将有一个且只有一行包含 1。这样做`SUM(countableRow)`将为您提供数据中适当数量的组。

现在，您可以通过在每组的第一行中转储实际字段值而不是像 1 这样的常量标量来扩展此功能（如果您愿意）。因此，如果您有`CASE rowRank WHEN 1 THEN dateOfBirth ELSE NULL END AS countableDOB`，例如，您可以仅使用此数据集获取每个不同生日的总人数。

当然，无论如何，您都可以使用 @Russell 之类的 SQL 方法来完成所有这些事情，因此这与可能与您的情况不匹配的特定下游需求最为相关。

**编辑**

显然 countableRow 字段对于您想要的查询类型没有一刀切的解决方案。[我在另一个 SQL Fiddle](http://sqlfiddle.com/#!3/27b91/10)中添加了更多`PARTITION BY`策略示例：

```
select pid, firstName, lastName, dateOfBirth, obsName, obsValue, obsDate, 
      rowRank, CASE rowRank WHEN 1 THEN 1 ELSE 0 END AS countableRow,
      valueRank, CASE valueRank WHEN 1 THEN 1 ELSE 0 END AS valueCount,
      dobRank, CASE WHEN dobRank = 1 AND dateOfBirth IS NOT NULL THEN 1 ELSE 0 END AS dobCount
from 
(
select Person.pid, Person.firstName, Person.lastName, Person.dateOfBirth
      , Obs.obsName, Obs.obsValue, Obs.obsDate,
      ROW_NUMBER() OVER (PARTITION BY Person.pid, Person.firstName, Person.lastName, Person.dateOfBirth ORDER BY Obs.obsDate) AS rowRank,
      ROW_NUMBER() OVER (PARTITION BY Obs.obsName, Obs.obsValue ORDER BY Obs.obsDate) AS valueRank,
      ROW_Number() OVER (PARTITION BY Person.dateOfBirth ORDER BY Person.pid) AS dobRank
  from Person
    join Obs on Person.pId = Obs.pId
) rankedData 
```

以免有人误解我认为这总是合适的，显然不是。这不是使用附加 SQL 查询获得特定答案的更好解决方案。它允许您做的是对足够的信息进行编码，以便在单个结果集中简单地回答消费代码中的此类问题。这就是它可以派上用场的地方。

**第二次编辑**

由于您想知道如果比赛数据存储在多个地方是否可以做到这一点，答案是肯定的。我已经修改了我以前的 SQL Fiddle 中的代码，现在[可以在新](http://sqlfiddle.com/#!3/898b4/6)的代码中使用：

```
select pid, firstName, lastName, dateOfBirth, obsName, obsValue, obsDate, 
      rowRank, CASE rowRank WHEN 1 THEN 1 ELSE 0 END AS countableRow,
      valueRank, CASE valueRank WHEN 1 THEN 1 ELSE 0 END AS valueCount,
      dobRank, CASE WHEN dobRank = 1 AND dateOfBirth IS NOT NULL THEN 1 ELSE 0 END AS dobCount,
      raceRank, CASE WHEN raceRank = 1 AND (race IS NOT NULL OR obsName = 'RACE') THEN 1 ELSE 0 END AS raceCount
from 
(
select Person.pid, Person.firstName, Person.lastName, Person.dateOfBirth, Person.[race]
      , Obs.obsName, Obs.obsValue, Obs.obsDate,
      ROW_NUMBER() OVER (PARTITION BY Person.pid, Person.firstName, Person.lastName, Person.dateOfBirth ORDER BY Obs.obsDate) AS rowRank,
      ROW_NUMBER() OVER (PARTITION BY Obs.obsName, Obs.obsValue ORDER BY Obs.obsDate) AS valueRank,
      ROW_NUMBER() OVER (PARTITION BY Person.dateOfBirth ORDER BY Person.pid) AS dobRank,
      ROW_NUMBER() OVER (PARTITION BY ISNULL(Person.race, CASE Obs.obsName WHEN 'RACE' THEN Obs.obsValue ELSE NULL END) ORDER BY Person.pid) AS raceRank
  from Person
    left join Obs on Person.pId = Obs.pId
) rankedData 
```

如您所见，在新的 Fiddle 中，这正确地将 Races 的数量计为 3，其中 2 在 Obs 表中，第三个在 Person 表中。诀窍是`PARTITION BY`可以包含表达式，而不仅仅是原始列输出。请注意，我在这里将连接更改为左连接，并且我们需要使用 CASE 来仅包含 obsValue WHERE obsName is 'RACE'。它有点复杂，但不是非常复杂，它甚至可以优雅地处理相当复杂的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T20:53:04.057

事实证明，Jeroen 指向 RunningValue 的指针比我想象的更准确。我能够使用以下代码获得我想要的结果：

```
=RunningValue(Iif(Not IsNothing(Fields!DATEOFBIRTH.Value)
        , Fields!PATIENTID.Value
        , Nothing)
    , CountDistinct
    , Nothing
    ) 
```

特别感谢 Dominic P，下次我会记住他的技术。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T18:37:00.103

除非他们报告了不同的 DOB，否则这只会为每位患者提取一条记录：

```
SELECT P.FOO, 
    P.BAR, 
    (etc.), 
    O.DOB
FROM Patients P
INNER JOIN Observations O
    ON P.PatientID = O.PatientID
GROUP BY P.FOO, P.BAR, (P.etc), O.DOB 
```

# android - Find packagenames online?

> ID：10985497
> 
> 赞同：0
> 
> 时间：2012-06-11T18:23:44.213
> 
> 标签：android, package

In my new app I am going to start other apps from my own app. But finding packagenames to all the apps is quite hard. I manage to make an app that finds the package name on all my current installed apps, but it would be much easier with some sort of online database or knowing where to look at the market.

Are there any online packagename databases, or do I have to find them out all by myself using my "packagename app"?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T19:22:48.667

如果您要从其他应用程序获取信息，您可以使用下面的代码。代码可能包含一些小错误，但它会给你一个很好的起点。

```
class PInfo {
private String appname = "";
private String pname = "";
private String versionName = "";
private int versionCode = 0;
private Drawable icon;
private void prettyPrint() {
    Log.v(appname + "\t" + pname + "\t" + versionName + "\t" + versionCode);
}
}

private ArrayList<PInfo> getPackages() {
ArrayList<PInfo> apps = getInstalledApps(false); /* false = no system packages */
final int max = apps.size();
for (int i=0; i<max; i++) {
    apps.get(i).prettyPrint();
}
return apps;
}

private ArrayList<PInfo> getInstalledApps(boolean getSysPackages) {
ArrayList<PInfo> res = new ArrayList<PInfo>();        
List<PackageInfo> packs = getPackageManager().getInstalledPackages(0);
for(int i=0;i<packs.size();i++) {
    PackageInfo p = packs.get(i);
    if ((!getSysPackages) && (p.versionName == null)) {
        continue ;
    }
    PInfo newInfo = new PInfo();
    newInfo.appname = p.applicationInfo.loadLabel(getPackageManager()).toString();
    newInfo.pname = p.packageName;
    newInfo.versionName = p.versionName;
    newInfo.versionCode = p.versionCode;
    newInfo.icon = p.applicationInfo.loadIcon(getPackageManager());
    res.add(newInfo);
}
return res; 
} 
```

如果您需要访问系统应用程序，可以尝试使用以下代码：

```
((packs.get(i).applicationInfo.flags & ApplicationInfo.FLAG_SYSTEM) == 1) { continue; } 
```

为什么要使用在线数据库来检索包名称。请告诉我您为什么要使用在线数据库，以便我可以向您发布更多信息。如果我们查看 android market url(google play)，我们可以看到它在应用程序的 url 中包含包名称。例子：`https://play.google.com/store/apps/details?id=com.speaker.app` id= 是包名。这可以帮助您了解在哪里可以根据需要查看市场。

如果您真的需要一个在线数据库：我建议您使用某种 sql 并从您的应用程序中请求“信息”。这需要一些服务器后端编程知识。

# iphone - Error while playing a large file from a url using moviePlayerController

> ID：10985499
> 
> 赞同：1
> 
> 时间：2012-06-11T18:23:50.657
> 
> 标签：iphone, ios, mpmovieplayercontroller

I am trying to play a large file (around 500 mb) from my server. The video will play as streaming video. But I am getting following error:

```
**2012-06-11 23:40:28.073 defenceCourses[18184:11f03] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'An AVPlayerItem cannot be associated with more than one instance of AVPlayer'
*** First throw call stack:
(0x113022 0x1607cd6 0x29fadb3 0x29f024e 0x29f1194 0x188d330 0x188f509 0x4a803 0x49d84 0x49c9b 0x1b6d7d8 0x1b6d88a 0x4ee626 0x27c2 0x2735 0x1)
terminate called throwing an exception** 
```

Following is my code:

```
NSURL *fileURL = [NSURL URLWithString:@"http://www.defencecourse.com/digital-reproductions/yellow-belt.mp4"];
moviePlayerController = [[MPMoviePlayerController alloc] initWithContentURL:fileURL]; 
[moviePlayerController prepareToPlay];
[moviePlayerController.view setFrame:CGRectMake(0, 70, 320, 270)]; 
[self.view addSubview:moviePlayerController.view];  
moviePlayerController.fullscreen = YES;  
[moviePlayerController play]; 
```

How can I resolve this?

# javascript - Youtube IFrame Internet Explorer 上的 Fancybox 错误

> ID：10985503
> 
> 赞同：-1
> 
> 时间：2012-06-11T18:24:06.470
> 
> 标签：javascript, internet-explorer-9, fancybox

我在我的页面上添加了一个 FrancyBox Youtube Iframe，但是当我关闭 Iframe 时，我会从 Internet Explorer 9.0（大约 15 或更高版本）收到带有 Javascript 错误的对话框。

[http://descuentalomallorca.com/uploads/fancy/demo/index.html](http://descuentalomallorca.com/uploads/fancy/demo/index.html)

这只是发生在 Youtube 链接上，我也在以下示例中尝试过：http: [//fancyapps.com/fancybox/](http://fancyapps.com/fancybox/)

我得到了同样的结果，有什么想法吗？

错误[图片 http://descuentalomallorca.com/uploads/fancy/fancy.jpg](http://descuentalomallorca.com/uploads/fancy/fancy.jpg)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-24T09:35:51.047

这对我有用（我知道非常糟糕的代码技巧）

在 fancybox 上添加一个`beforeClose`事件。该函数会先将iframe的src设置为`about:blank`，500ms后才会真正关闭fancybox（直接关闭还是会报错）

```
beforeClose : function() { 
  if(!window.mayclosebox) {
    $('.fancybox-iframe').attr('src','about:blank');window.mayclosebox = true;setTimeout('$.fancybox.close();',500);return false;
  } else { 
    window.mayclosebox = false;return true; 
  } 
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T19:36:41.810

其他灯箱也报告了该错误，包括 colorbox（放弃以前提出的 fancybox 不是解决方案）......它更像是一个 IE9 错误。你可以[在这里阅读更多](http://groups.google.com/group/youtube-api-gdata/browse_thread/thread/d897086b0e3775ca?pli=1)

[报告与colorbox](https://groups.google.com/forum/#!topic/colorbox/Ni93eC5JZ8E)相同问题的人似乎找到了一种解决方法

```
<meta http-equiv="X-UA-Compatible" content="IE=8" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T18:59:51.317

这不是你的代码。如果您尝试使用 fancybox 网站上的 Youtube 链接，您会发现它也在那里发生。即使在 Fancybox 2 上。

您可以在未压缩的版本中找到问题的根源，或者切换到使用另一个库。一个这样的库是[Colorbox](http://www.jacklmoore.com/colorbox)。他们在那里的 youtube 示例没有那些回调错误。qTip2 也可以工作，但并不是真正为fancybox 之类的实现而设计的。可能有更多的库和谷歌搜索fancybox 替代品会找到它们。

# sql - optimizing update statements

> ID：10985507
> 
> 赞同：1
> 
> 时间：2012-06-11T18:24:36.733
> 
> 标签：sql

I am currently trying to optimize sql code. I would like to know if there is an alternate way of writing these statements, because it seems take a good deal of time to complete.

```
Update #TMP---updates  webid when its null in tmp table
Set #TMP.webid_Val='NOT COMPLIANT'
Where  #TMP.webid is null

Update #TMP---updates  PID when its null in tmp table
Set #TMP.PID_Val='NOT COMPLIANT'
Where  #TMP.Pid is null

Update #TMP---Shifts multiple fob situations into storewide
Set #TMP.GMM ='Storewide'
Where  #TMP.gmm like '%, %';

Update #TMP-----Shifts marketing into multiple fob situation
Set #TMP.GMM ='Storewide'
Where  #TMP.gmm like 'Marketing%'

Update #TMP
Set #TMP.OVERALL_Val='NOT COMPLIANT'
Where  #TMP.webid is null 
```

This does have over 22,000 entries.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T18:49:02.507

不能肯定这会更快，因为它取决于数据，但单个更新语句可能表现最好。

```
Update #TMP
Set #TMP.webid_Val=
        CASE
            WHEN #TMP.webid is null THEN 'NOT COMPLIANT'
            ELSE #TMP.webid_Val
        END
     ,#TMP.PID_Val=
        CASE
            WHEN #TMP.Pid is null THEN 'NOT COMPLIANT'
            ELSE #TMP.PID_Val
        END
     ,#TMP.GMM=
        CASE
            WHEN (#TMP.GMM like '%, %' OR #TMP.gmm like 'Marketing%') THEN 'Storewide'
            ELSE #TMP.GMM
        END
    ,#TMP.OVERALL_Val=
        CASE
            WHEN (#TMP.webid is null) THEN 'NOT COMPLIANT'
            ELSE #TMP.OVERALL_Val
        END
WHERE #TMP.webid is null
OR #TMP.Pid is null
OR #TMP.gmm like '%, %'
OR #TMP.gmm like 'Marketing%' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T18:32:42.673

我看到的第一部分是您可以结合这两个更新语句：

```
Update #TMP---updates  webid when its null in tmp table
Set #TMP.webid_Val='NOT COMPLIANT'
Where  #TMP.webid is null

Update #TMP
Set #TMP.OVERALL_Val='NOT COMPLIANT'
Where  #TMP.webid is null 
```

进入：

```
Update #TMP---updates  webid when its null in tmp table
Set #TMP.webid_Val='NOT COMPLIANT',
    #TMP.OVERALL_Val='NOT COMPLIANT'
Where  #TMP.webid is null 
```

您可以将两个 GMM 更新组合成以下内容：

```
Update #TMP---Shifts multiple fob situations into storewide
Set #TMP.GMM ='Storewide'
Where  LEFT(#TMP.gmm, 9) = 'Marketing'
OR #TMP.gmm like '%, %'; 
```

`LEFT`与匹配相比，执行的`LIKE`性能应该更高一些（注意：不确定，您必须对其进行测试才能验证）。

# c# - Host name resolution without modifying the hosts file

> ID：10985510
> 
> 赞同：7
> 
> 时间：2012-06-11T18:24:41.930
> 
> 标签：c#, ip, hostname

I'm trying to figure out how if there's a way to make a hostname resolve to a certain IP without DNS or host file modification.

Using C#, I'm making a request from client to server, but I have to use the hostname in the request so that the certificates will properly authenticate the request. However, my program is meant to run without admin rights, so I can't modify the host file. I have the correct IP and the host name, is there any other way to make the computer resolve the host name to the IP?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T20:48:40.030

看起来解决这个问题的最简单方法是创建一个有权修改主机文件的服务，然后从主程序调用该服务。该服务运行单个命令并退出。由于服务可以具有提升的状态，因此您基本上可以将管理员权限封装在标准用户程序中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T18:29:38.367

*如果您正在发出 HTTP 请求，则无需解析主机名；在 URL 中使用 IP 地址并在 HTTP 请求中传递主机标头。*

*[HttpWebRequest.Host 属性](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.host.aspx)*

更新：抱歉没有看到证书要求。我认为您应该能够在安装期间修改主机文件（因为安装通常在管理员权限下进行）。添加您感兴趣的主机名以指向 127.0.0.1（本地计算机）。然后，您的应用程序可以打开一个侦听套接字并充当代理，将数据引导到实际的 Web 服务器。这可能会或可能不会工作，具体取决于启用了防火墙的客户端。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-10-21T05:39:50.800

```
 public bool ModifyHostsFile(string sEntryIPAddr, string sEntryURL)
    {
        try
        {
            using (StreamWriter w = File.AppendText(Path.Combine(Environment.GetFolderPath(Environment.SpecialFolder.System), @"drivers\etc\hosts")))
            {
                w.WriteLine(sEntryIPAddr+" "+ sEntryURL);
                return true;
            }
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex.Message);
            return false;
        }
    } 
```

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2012-09-13T01:52:13.073

这对我有用：

步骤 1\. 打开您的 Windows 开始菜单，搜索记事本应用程序，然后右键单击记事本图标。

步骤 2\. 选择“以管理员身份运行”，然后在记事本中浏览到包含 hosts 文件的文件夹 (/windows/system32/drivers/etc)。

# c# - Operator '==' cannot be applied to operands of type 'method group' and 'string'

> ID：10985514
> 
> 赞同：4
> 
> 时间：2012-06-11T18:24:50.510
> 
> 标签：c#, linq, linq-to-sql

I am receiving an "Operator '==' cannot be applied to operands of type 'method group' and 'string'" error on the third line of this code and I do not know why.

```
where (PRIORITiesItem.Prioid == null || PRIORITiesItem.Prioid.Contains("1%")) 
    && (SITEItem.Id == "TH" || SITEItem.Id == "NM")  
--> && (sv.Glseg.TrimStart == "703" || sv.Glseg.TrimStart == "704" || sv.Glseg.TrimStart == "705")        
    && (CREWItem.Crewid == null || !CREWItem.Crewid.Contains("2-%") && CREWItem.Crewid.Contains("MAINT") 
        || (CREWItem.Crewid.Contains("ELECT") || CREWItem.Crewid.Contains("INST")
    && !WORKORDERTYPEItem.Id.Contains("Standing"))) 
```

At first I thought that maybe it didn't like "==" so I chnaged it with "=" but that wasn't the problem. besides, the line right above it uses "==" and it works just fine. Glseg is a field within a table, not a method so it must not like the string. Does anyone have any ideas where I am going wrong?

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-11T18:26:59.447

在 C# 中，必须使用以下方法调用这些方法`()`：

```
str.TrimStart() == "bla" 
```

# java - Calendar class: set to ten days from now

> ID：10985515
> 
> 赞同：2
> 
> 时间：2012-06-11T18:24:50.810
> 
> 标签：java, calendar

I have the following two methods:

```
private long getTimeInMilliseconds()
    {
        Calendar c = Calendar.getInstance();

        if(c.get(Calendar.DAY_OF_MONTH) == 21)  
        {
            c.set(Calendar.MONTH, Calendar.MONTH + 1 );
            c.set(Calendar.DAY_OF_MONTH, 1);
        }
        else
            c.set(Calendar.DAY_OF_MONTH, Calendar.DAY_OF_MONTH + 10);

        if(c.get(Calendar.MONTH) > 11)
            c.set(Calendar.MONTH, 0);

        return c.getTimeInMillis();
    }

public static void remainingTime(L2PcInstance player)
    {
        long now = System.currentTimeMillis();
        long then = player.getExpBoostTime();

        long time = then - now;

        int hours = (int) (time / 3600000);

        player.sendMessage(hours+ " hours remaining until your EXP BOOST PERIOD ends");
    } 
```

I want `getTimeInMillisSeconds()` to return the time 10 days later. I want `remainingTime()` to show how many days (in hours) remain.

With the code above, it shows 4 days remaining and not 10\.

Can anybody help?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T18:29:06.970

你在方法上犯了一个错误`set()`。

它应该是

```
c.set(Calendar.DAY_OF_MONTH, c.get(Calendar.DAY_OF_MONTH) + 10); 
```

但是，您的方法远非最佳。在另一个答案中建议的那个（将 10 * 24 * 60 * 60 * 1000 毫秒添加到当前时间）要好得多恕我直言。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T18:28:58.110

获得“从现在起十天”的最佳方法是使用时间戳/毫秒。

您可以从这样的日历中获取当前时间（以毫秒为单位）：

```
Calendar someCalendar = new Calendar();
long someTimestamp = someCalendar.getTimeInMillis(); 
```

一旦你得到它，你可以增加十天（同样以毫秒为单位）：

```
long tenDays = 1000 * 60 * 60 * 24 * 10;
long tenDaysFromNow = someTimestamp + tenDays; 
```

# function - 在函数调用中使用变量

> ID：10985516
> 
> 赞同：0
> 
> 时间：2012-06-11T18:24:53.740
> 
> 标签：function, variables, asp-classic

我已经尝试了我能想到的一切，对我来说，没有理由不这样做。但是，ASP 不是我的母语，我需要一些见解。我有一个将由来自 URL 的请求定义的变量。然后我想在函数调用中使用该变量。

```
if pub_id <> "" then
    response.write(pub_id)
    response.write(pulldownQuery("newsletter_publication",pub_id,"live",newsletter_query))
  else
    response.write(pulldownQuery("newsletter_publication","","live",newsletter_query))
  end if 
```

但是，这是行不通的。但是，如果我将一个 id 硬编码到函数调用的值部分，那么它的工作原理是什么。

```
response.write(pulldownQuery("newsletter_publication",58,"live",newsletter_query)) 
```

当我打印 pub_id 它返回 58 （或任何 id 恰好是）。我在这里缺少什么导致我的变量无法与此函数调用一起使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T19:01:24.967

我发现的一个解决方案是将我的 pub_id 变量显式定义为整数，而不是字符串。

```
pub_id = CInt(pub_id) 
```

一旦我这样定义它，一切都像一个魅力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T18:53:52.280

您是否尝试过查看您的变量是否`pub_id`已经有值？你可以看看这个 ASP Querystring 练习。[http://www.w3schools.com/asp/coll_querystring.asp](http://www.w3schools.com/asp/coll_querystring.asp)

# javascript - 检测浏览器是否启用了 TLS

> ID：10985519
> 
> 赞同：3
> 
> 时间：2012-06-11T18:25:11.643
> 
> 标签：javascript, html, ssl

有没有办法检查浏览器是否启用了 TLS？

我仅限于使用 HTML 和 Javascript。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T18:12:12.720

在 Javascript 中，利用 ActiveX，并用于 IE7，

```
(function(){
var key = "HKCU\\Software\\Microsoft\\Windows\\CurrentVersion\\Internet Settings\\SecureProtocols";
var t = document.getElementById("detectREG_output");
var Shell = new ActiveXObject("WScript.Shell");
var value = Shell.RegRead(key);
t.innerHTML = value;
})(); 
```

这将输出一个位域，小数等于：

168 = SSL 3.0、SSL 2.0、TLS 1.0 已启用

160 = SSL 3.0，启用 TLS 1.0

40 = SSL 3.0，启用 SSL 2.0

8 = 启用 SSL 2.0

0 = 无启用

[IE7 和 HTTPS 上的 MSDN](https://web.archive.org/web/20070505012444/http://msdn.microsoft.com/library/en-us/IETechCol/cols/dnexpie/ie7_https_imps.asp "IE7 和 HTTPS 上的 MSDN")

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T21:55:10.803

我能找到的唯一解决方案是配置 apache 以遵守一定的密码顺序：

```
SSLCipherSuite !aNULL:!eNULL:!EXPORT:!DSS:!DES:!SSLv2:RC4-SHA:RC4-MD5:ALL
SSLHonorCipherOrder on 
```

例如。然后在 PHP 页面（在 https 后面）显示 $_ENV['SSL_PROTOCOL']。最后在 JS 中使用结果。

# sql - 全文搜索找不到任何东西

> ID：10985522
> 
> 赞同：0
> 
> 时间：2012-06-11T18:25:29.827
> 
> 标签：sql, full-text-search, phpmyadmin, myisam

******编辑* *******

 **好的，所以我找到了问题，搜索的最小字长为 4，我将其更改为 3，但现在它只找到第 1 行数据而不是第 2 行数据...

**-----原始问题：----**

我的 phpmyadmin 上有一个 MyISAM 表，如下所示：

```
table name: `users`
coulmn name: `name`
row 1 data: 'dan'
row 2 data: 'dan252' 
```

（这只是它的重要部分）

现在名称是全文索引字段，我使用这个查询：

```
SELECT * FROM `users` WHERE MATCH(`name`) AGAINST('dan') 
```

但 phpmyadmin 返回：

```
MySQL returned an empty result set (i.e. zero rows). ( Query took 0.0004 sec ) 
```

为什么它什么也没找到？

****编辑****

好的，所以我找到了问题，搜索的最小字长为 4，我将其更改为 3，但现在它只找到第 1 行数据而不是第 2 行数据...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T19:18:23.500

`MATCH`仅适用于具有指示的列`FULLTEXT`。并且`FULLTEXT`指示仅适用于 MyISAM 表。

其次，“dan”可能[太短而](http://dev.mysql.com/doc/refman//5.5/en/fulltext-fine-tuning.html)无法在`MATCH`.

第三，如果您的搜索词匹配超过 50% 的行，则该词被认为太常见并且搜索失败。

[在这里](http://dev.mysql.com/doc/refman//5.5/en/fulltext-search.html)阅读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T18:34:34.997

试试这个。

SELECT * FROM users WHERE MATCH (name) AGAINST ('dan');

我猜你在表名和 MATCH 中使用撇号。这是错误的。试试看，让我知道这是否有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T18:35:58.307

我猜您正试图返回所有带有“dan”的内容您可以尝试使用 LIKE 命令。

```
SELECT * FROM users WHERE name LIKE '%dan%' 
```

这将返回“dan”和“dan252”以及（如果他在表中）“123dan456”。

你也可以试试

```
SELECT * FROM users Match(name) AGAINST('+dan*') 
```

那应该返回相同的东西，并且可能更有效。如果您只是想使用“丹”，那么就像@Kirishna 所说的那样使用。

```
SELECT * FROM users WHERE MATCH (name) AGAINST ('dan') 
```**

# c# - CurrentCellDirtyStateChanged 提交太快

> ID：10985525
> 
> 赞同：3
> 
> 时间：2012-06-11T18:25:39.553
> 
> 标签：c#, .net, winforms, .net-2.0

我有一个带有文本列和复选框列的 DataGridView。当用户单击复选框时，我想提示用户。我已经使用下面的代码进行了这项工作：

```
private void grid_CurrentCellDirtyStateChanged( object sender, EventArgs e )
{
  var grid = sender as DataGridView;
  if ( grid.IsCurrentCellDirty)
    grid.CommitEdit( DataGridViewDataErrorContexts.Commit );
} 
```

但是，当我尝试在文本列中输入时，它会在我输入时而不是在我完成输入时继续提交。这会导致文本单元格不断突出显示自身，并且只允许我输入单个字符。如何修改此事件以仅在复选框值更改时处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T18:34:59.480

您需要做的只是注意复选框，而不是文本。我为类似问题找到的解决方案是在 CellEnter 上放置一个事件，记录正在编辑的字段。脏处理事件然后检查它以决定做什么。

为什么我无法想象的脏检查中没有坐标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-05T19:59:15.000

我只是有同样的问题。如果您想关注特定列（CheckBox Column），这将适合您。

```
private void grid_CurrentCellDirtyStateChanged( object sender, EventArgs e )
{
  var grid = sender as DataGridView;

  if ( grid.IsCurrentCellDirty && grid.CurrentCell.ColumnIndex == 1 )
     grid.CommitEdit( DataGridViewDataErrorContexts.Commit );
} 
```

# java - Java nested self referential generic

> ID：10985526
> 
> 赞同：3
> 
> 时间：2012-06-11T18:25:43.803
> 
> 标签：java, generics

I have a class which has a self referential generic parameter and a parameter which is of the same super class. The static function has identical bounds as the class.

```
public class Bar<T extends Bar<T, C>, C extends Bar<C, ?>> {

    Bar() {
        foo((T) null);
        foo((C) null);//compile error
    }

    static <S_T extends Bar<S_T, S_C>, S_C extends Bar<S_C, ?>> void foo(S_T t) {
    }
} 
```

This gives the following error.

> Bound mismatch: The generic method foo(S_T) of type Bar<T,C> is not applicable for the arguments (C). The inferred type C is not a valid substitute for the bounded parameter <S_T extends Bar<S_T,S_C>>

I can't figure out why `C` can't be passed in to `foo()` since `C` is `Bar<C,?>` and the wildcard is a `Bar` because of the second parameter in the declaration says it extends Bar.

I know this is probably a bad idea and produces code which is hard to understand but I really wanna know why this doesn't compile.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T00:06:34.597

简短的回答是 Java 类型推断实际上很蹩脚。

Java 没有对`?`声明中的通配符执行任何智能推理，`Bar`以推断它在逻辑上是由`Bar< ?, ? >`（也不是该边界中的`?`s 本身是有界的，等等）。一旦你把`?`它自己放进去，这就是 Java 所知道的一切。尽管没有什么能阻止您在 的声明中将通配符放在通配符上`Bar`，但即使这样也无助于 Java；Java 永远不会假设两个单独`?`的 s 引用相同的类型，即使更深入的分析表明它们必须如此。换句话说，即使使用以下代码，编译错误仍然存​​在：

```
public class Bar<T extends Bar<T, C>, C extends Bar<C, ? extends Bar<?, ? extends Bar<?, ?>>>> {

    Bar() {
        foo((T) null);
        foo((C) null);//compile error
    }

    static <S_T extends Bar<S_T, S_C>, S_C extends Bar<S_C, ? extends Bar<?, ? extends Bar<?, ?>>>> void foo(S_T t) {
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T18:39:22.337

我不是泛型的专家，但我认为问题在于您将 foo() 的类型声明为

```
<S_T extends Bar<S_T,S_C> > void foo(S_T) 
```

然后在需要不同静态类型的两个不同上下文中调用它`foo()`。

在第一个上下文中`S_T`有 type `T`，在第二个上下文中它有 type `C`。但是`T`and`C`被声明为`Bar<T,?>`and `Bar<C,?>`，它们是静态不兼容的类型。我猜编译器会`foo()`在第一次调用中计算出类型，然后正确假设类型必须始终保持不变，但事实并非如此。

# bash - 如何以编程方式取消设置全局 bash 变量/管理 Bash 全局范围？

> ID：10985527
> 
> 赞同：1
> 
> 时间：2012-06-11T18:25:44.187
> 
> 标签：bash, scope

**语境：**

我们有几个基础设施由大量 Bash 脚本管理，这些脚本通过命令相互交互`source`，包括（并且经常链接包含）符合我们使用的标准 Bash 模板创建的文件。我知道这是一种可能永远不应该被允许的情况，但这就是我们所拥有的。

模板基本上是这样的：

```
set_params() {
    #for parameters in a file that need to be accessed by other methods 
    #in that file and have the same value from initialization of that 
    #file to its conclusion:
    global_param1=value 

    #left blank for variables that are going to be used by other methods 
    #in the file, but don't have a static value assigned immediately:
    global_param2= 
}

main_internals() {
    #user-created code goes here.
}

main() {
    set_params
    #generic setup stuff/traps go here
    main_internals arg arg arg
    #generic teardown stuff goes here
} 
```

使用这种结构，我们通过`source`命令让文件包含其他文件，然后调用被包含的文件`main`方法，它很好地包装和模块化了大多数操作。

**问题：**

`source`当一个新模块被添加到代码库中时，这个基础设施的一些最棘手的问题就会出现，该模块使用一个全局变量名，该全局变量名在同一个d 链/文件集中的其他地方使用，不相关。即，如果 file1.sh 有一个名为的变量`myfile`，它用于某些事情，然后`source`是 file2.sh，然后用 做更多的事情`myfile`，而编写 file2.sh 的人不知道（在许多情况下他们不能可以预期 - 有*很多*文件链接在一起），他们可能会在 file2.sh 中放置一个名为的非局部变量`myfile`，更改 file1.sh 中具有相同名称的变量中的值

**问题：**

假设会出现全局变量名称冲突，并且`local`一切都不能完全解决问题，有没有办法以编程方式取消在执行特定函数或调用期间在全局范围内设置的所有变量？有没有一种方法可以取消设置它们，而无需取消设置相关脚本文件所包含的具有相同名称的其他变量`source`？

答案很可能是“不”，但是在环顾四周并没有发现除了“跟踪变量名并在使用完毕后取消设置任何东西”（这将不可避免地导致代价高昂的错误）之外，我想我会问。

**换一种说法：**有没有办法制作/破解类似于 Bash 中的第三个作用域的东西？介于“函数的本地”和“此文件中运行的所有内容以及该文件的任何文件可见”之间的东西`source`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T19:18:33.807

以下内容未经测试。

您可以像这样保存很多变量：

```
unset __var __vars
saveIFS=$IFS
IFS=$'\n'
__vars=($(declare -p))
IFS=$saveIFS 
```

或通过将上面的倒数第二行更改为：

```
__vars=($(declare -p "${!foo@}")) 
```

然后你可以取消设置你需要的那些：

```
unset foo bar baz 
```

或基于公共前缀取消设置它们：

```
unset "${!foo@}" 
```

要恢复变量：

```
for __var in "${__vars[@]}"
do
    $i
done 
```

请注意

*   带有嵌入换行符的变量会做错事
*   带有空格的值会做错事
*   如果匹配的前缀参数扩展返回一个空结果，该`declare -p`命令将返回*所有*变量。

另一种更具选择性的技术可能是您明确知道当前函数中使用了哪些变量，以便您可以有选择地保存和恢复它们：

```
# save
for var in foo bar baz
do
    names+=($var)
    values+=("${!var}")
done

# restore
for index in "${!names[@]}"
do
    declare "${names[index]}"="${values[index]}"
done 
```

使用不太可能与其他变量发生冲突的变量名而不是“var”、“index”、“names”和“values”。使用`export`而不是`declare`内部函数，因为`declare`强制变量是本地的，但是变量将被导出，这可能会或可能不会产生不良后果。

建议：替换混乱，使用更少的全局变量或使用不同的语言。

否则，请尝试我上面概述的内容，看看您是否可以使用您拥有的代码使其中的任何一个工作。

# security - 如何从过滤器中读取 JSF 会话 bean？

> ID：10985528
> 
> 赞同：2
> 
> 时间：2012-06-11T18:25:45.507
> 
> 标签：security, jsf, resources, servlet-filters, cdi

我正在搜索但找不到答案，我需要基于权限的安全资源，我不能使用过滤器，因为 FacesContext 之前没有初始化，我需要在我的会话 bean 中加载权限。一些避免使用过滤器的解决方案？PhaseListener、ViewHandler 和 ResourceHandler 无法捕获 URL 资源请求，例如我需要拒绝此直接访问：`http://127.0.0.1:8080/test/resources/images/image.jpg`

提前谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T18:49:56.807

JSF 将会话范围的托管 bean 存储为 的属性`HttpSession`，而后者又仅在`Filter`by中可用`HttpServletRequest#getSession()`。

```
HttpSession session = ((HttpServletRequest) request).getSession();
SessionBean sessionBean = session.getAttribute("sessionBean");
// ... 
```

* * *

**更新**：根据您似乎实际上在使用 CDI 的评论：

> *我的过滤器在 JSF 之前触发，当我使用 getAttribute 时总是得到一个空值。我在我的 Bean 上使用带有“Named”和“SessionScoped”注释的 CDI，因为我需要使用拦截器来实现安全性*

我知道您使用的是 JSF 自己`@ManagedBean`的，最初的答案仅适用于此。如果您的 bean 已经由 CDI 管理`@Named`，那么只需`@Inject`在`Filter`.

```
@Inject
private SessionBean sessionBean; 
```

如果是 JSF `@ManagedBean`，您应该只添加一个`if (sessionBean != null)`检查。过滤器是否在 JSF servlet 之前调用无关紧要。一旦 JSF 创建了会话 bean，它就不会出现`null`在过滤器中。

# macos - Launchctl 不卸载 Apache

> ID：10985529
> 
> 赞同：1
> 
> 时间：2012-06-11T18:25:47.580
> 
> 标签：macos, apache, osx-lion, launchd

我跑了`sudo launchctl unload /System/Library/LaunchDaemons/org.apache.httpd.plist`，它卸载了 apache。但是当我重新启动时，apache 会重新启动并运行。如何从启动时永久删除 Apache？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T18:41:11.983

显然我需要研究手册。它需要该`-w`标志来覆盖手册页中的 Disabled 键`launchctl`

# php - Cakephp 无法发送电子邮件

> ID：10985532
> 
> 赞同：0
> 
> 时间：2012-06-11T18:25:54.720
> 
> 标签：php, email, cakephp

我想使用 cakePHP 邮件系统，但我无法发送电子邮件，我收到以下错误：

```
 Fatal error: Class 'CakeEmail' not found in D:... on line 100 
```

我在控制器中定义了以下内容：

```
 App::uses('AppController', 'Controller','CakeEmail', 'Network/Email');

 // In the controller:
 public function search() {
      $email = new CakeEmail();
                    $email->from(array('noreply@assetchase.co.za' => 'Assetchase.co.za'));
                    $email->subject('result notification.');
                    foreach($emails as $value) {
                        $user = $this->User->find("first",array("fields" => array("username"),"conditions" => array("id" => $value)));
                        $email->to($user['User']['username']);
                        $email->send('A new notification, booyah!');
                        // Send an email with the username.
                    }
 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T18:37:10.707

可能您必须修改**App::uses**因为 App::uses() 只允许两个参数类名及其位置，而您传递的是 4 个参数

试试这个

```
App::uses('AppController', 'Controller');
App::uses('CakeEmail', 'Network/Email'); 
```

这是参考[用途](http://api20.cakephp.org/class/app#method-Appuses)

[核心实用程序库](http://book.cakephp.org/2.0/en/core-utility-libraries/app.html#App%3a%3auses)

[电子邮件基本用法](http://book.cakephp.org/2.0/en/core-utility-libraries/email.html?highlight=cakeemail#CakeEmail)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-04T14:27:21.203

这是开发人员一开始会犯的一个非常常见的错误，更改你的`App::uses`并将它们分开：

```
App::uses('AppController', 'Controller');
App::uses('CakeEmail', 'Network/Email'); 
```

由于 cake 引用类的新方式。

# iphone - Cocos2d access scene properties and methods

> ID：10985533
> 
> 赞同：0
> 
> 时间：2012-06-11T18:25:58.267
> 
> 标签：iphone, ios, cocos2d-iphone, box2d-iphone

I'm trying to include a pause feature for my game. So far running `pause` on the `[CCDirector sharedDirector]` has been good enough when run through my `pauseGame` method (which incorporates a BOOL to tell if game is paused, etc.)

However, I noticed that if I go back to the homescreen on my device, my application delegate will automatically run `pause` and `resume` on the `sharedDirector`.

Ideally, I would like access my active scene/layer's so I can run my own pause method.

How can I: 1) check if the current scene is my game scene 2) access the game scene's pause property, and run the pauseGame method on it?

Any help appreciated. Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T08:44:31.583

我使用不同的方法来暂停游戏。

我通常有一个带有游戏层的游戏场景。为了暂停游戏，我添加了一个新层（覆盖整个屏幕），当我暂停游戏时，我会显示这个层。这样，您可以停止触摸游戏层的事件并在恢复游戏时恢复它们（并从场景中删除暂停层）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T18:33:26.033

跑步场景是`[CCDirector sharedDirector].runningScene`

如果你调用 [场景 pauseSchedulerAndActions]; 在当前场景中，在主屏幕来回切换时不会恢复。

如果您需要暂停层次结构中的所有节点，这里是扩展 CCNode 的方法

```
-(void)recursivePauseSchedulerAndActions {
    [self pauseSchedulerAndActions];
    CCNode *child;
    CCARRAY_FOREACH(children_, child) {
        [child recursivePauseSchedulerAndActions];
    }
}
-(void)recursiveResumeSchedulerAndActions {
    [self resumeSchedulerAndActions];
    CCNode *child;
    CCARRAY_FOREACH(children_, child) {
        [child recursiveResumeSchedulerAndActions];
    }
} 
```

# javascript - 使用正则表达式进行表单验证

> ID：10985535
> 
> 赞同：1
> 
> 时间：2012-06-11T18:26:07.910
> 
> 标签：javascript, regex, validation

我是 Javascript 新手，我正在学习正则表达式，想知道是否有人可以对我遇到的几个问题有所了解。

我正在编写需要在发送前进行验证的反馈表，但我不太确定如何在地址中包含空格。

到目前为止，我有这段代码，只要我不包含空格，它就可以工作：

```
function isAlphanumeric(elem, helperMsg){
    var alphaExp = /^[0-9a-zA-Z]+$/;
    if(elem.value.match(alphaExp)){
        return true;
    }else{
        alert(helperMsg);
        elem.focus();
        return false;
    }
} 
```

我可以简单地插入 \w 以便表达式包含空格吗？

另外，我想做一个提醒，让用户知道表单提交已经成功。使用此代码：

```
if(isAlphabet(firstname, "Please only enter letters for your name")){
if(isAlphabet(surname, "Please only enter letters for your name")){
if(emailValidator(email, "Please enter a valid email address")){
if(isNumeric(phone, "Please enter a valid telephone number")){
if(isAlphanumeric(address1, "Numbers and letters only for address")){
if(isAlphanumeric(pcode, "Please enter a valid postcode")){
{
return true;

}}}}}}}

return false; 
```

插入代码的最佳位置在哪里？我试过之后`return true`，但它没有用。

任何提示都会很棒！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T18:29:31.883

`\w`不包括空格，所以这不起作用。如果您只想允许文字空格字符，请插入它：

```
/^[0-9a-zA-Z ]+$/ 
```

如果要允许各种空格字符，请使用`\s`：

```
/^[0-9a-zA-Z\s]+$/ 
```

至于在 之后发出警报`return true;`，那肯定是行不通的；`return`，顾名思义，从函数返回。函数的执行到此结束。只需`alert`将`return true`.

您也可以考虑使用`&&`(logical AND) 使那里的东西更整洁。

```
if(isAlphabet(firstname, "Please only enter letters for your name")
&& isAlphabet(surname, "Please only enter letters for your name")
&& emailValidator(email, "Please enter a valid email address")
&& isNumeric(phone, "Please enter a valid telephone number")
&& isAlphanumeric(address1, "Numbers and letters only for address")
&& isAlphanumeric(pcode, "Please enter a valid postcode")) {
{
    alert('Form submission successful.');
    return true;
}

return false; 
```

您可能还想重新考虑您是否真的想要一个提示提交成功的警报。我通常会避免这种情况——如果某件事是成功的，那应该是显而易见的。

# c - 使用 C 将 exec 进程发送到后台？

> ID：10985544
> 
> 赞同：2
> 
> 时间：2012-06-11T18:26:59.540
> 
> 标签：c, unix, process, exec, fork

我的问题听起来与此相同，但事实并非如此：

[在Linux中使用C在后台启动一个进程](https://stackoverflow.com/questions/3407197/start-a-process-in-the-background-in-linux-with-c)

我知道如何做 fork() 但不知道如何将进程发送到后台。我的程序应该像一个支持管道和后台进程的简单命令 unix shell 一样工作。我可以做管道和叉子，但我不知道如何使用程序`&`的最后一行将进程发送到后台：

```
~>./a.out uname
SunOS
^C
my:~>./a.out uname & 
```

如何实现后台进程？

```
#include <sys/types.h>
#include <signal.h>
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <errno.h>

#define TIMEOUT (20)

int main(int argc, char *argv[])
{
  pid_t pid;

  if(argc > 1 && strncmp(argv[1], "-help", strlen(argv[1])) == 0)
    {
      fprintf(stderr, "Usage: Prog [CommandLineArgs]\n\nRunSafe takes as arguments:\nthe program to be run (Prog) and its command line arguments (CommandLineArgs) (if any)\n\nRunSafe will execute Prog with its command line arguments and\nterminate it and any remaining childprocesses after %d seconds\n", TIMEOUT);
      exit(0);
    }

  if((pid = fork()) == 0)        /* Fork off child */
    {
      execvp(argv[1], argv+1);
      fprintf(stderr,"Failed to execute: %s\n",argv[1]);
      perror("Reason");
      kill(getppid(),SIGKILL);   /* kill waiting parent */
      exit(errno);               /* execvp failed, no child - exit immediately */
    }
  else if(pid != -1)
    {
      sleep(TIMEOUT);
      if(kill(0,0) == 0)         /* are there processes left? */
    {
      fprintf(stderr,"\Attempting to kill remaining (child) processes\n");
      kill(0, SIGKILL);      /* send SIGKILL to all child processes */
    }
    }
  else
    {
      fprintf(stderr,"Failed to fork off child process\n");
      perror("Reason");
    }
} 
```

简单英语的解决方案似乎在这里： [我如何在 C 的后台执行（）一个进程？](https://stackoverflow.com/questions/1618756/how-do-i-exec-a-process-in-the-background-in-c)

> 捕获 SIGCHLD 并在处理程序中调用 wait()。

我在正确的轨道上吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T18:33:04.117

> 问：如何将进程发送到后台？

答：一般来说，正是你已经在做的事情：fork()/exec()。

问：什么没有按您的预期工作？

我怀疑也许你也想要一个“nohup”（完全解除孩子与父母的联系）。

这样做的关键是在子进程中运行“setsid()”：

*   [如何使用 fork() 来守护独立于其父进程的子进程？](https://stackoverflow.com/questions/9037831/how-to-use-fork-to-daemonize-a-child-process-independant-of-its-parent)

*   [http://www.enderunix.org/docs/eng/daemon.php](http://www.enderunix.org/docs/eng/daemon.php)

# asp.net - 如何在asp.net中控制用户角色选择

> ID：10985549
> 
> 赞同：0
> 
> 时间：2012-06-11T18:27:18.857
> 
> 标签：asp.net, security, role

我正在为我的网站开发 asp.net。实际上我的网站有两种类型的角色管理员和用户。我在 asp.net 开发站点中看到创建新向导用户可以选择管理员和用户等角色，但是如果疯狂的用户可以选择管理员角色，尽管他是普通用户，那么我该如何控制用户角色选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T18:33:20.757

对于我的选择，您不应依赖 asp.net 附带的向导。您应该对创建用户拥有自己的控制权。

我将开始查看 Membership api 以了解如何从源代码访问它、如何添加角色以及如何进行身份验证......这基本上是向导魔法的工作原理......

[http://www.asp.net/web-forms/videos/authentication](http://www.asp.net/web-forms/videos/authentication) http://www.4guysfromrolla.com/articles/120705-1.aspx [http://msdn.microsoft.com/en-us/library/ ff648345.aspx](http://msdn.microsoft.com/en-us/library/ff648345.aspx)

高温高压

# python - 以编程方式检测图像是否有边框（返回布尔值）

> ID：10985550
> 
> 赞同：3
> 
> 时间：2012-06-11T18:27:20.557
> 
> 标签：python, imagemagick, css

首先，我已经阅读了这篇文章。[如何以编程方式检测图像边框？](https://stackoverflow.com/questions/1954742/how-to-detect-an-image-border-programmatically) 不过，他似乎在问一个稍微不同的问题，即找到 X/Y 坐标。

我只是想找出给定照片周围是否存在**实心**边框。我已经使用 ImageMagick 进行了探索，但这是最好的选择吗？我从来没有做过任何与图像相关的编程，所以我希望只有一个简单的 api 可以解决这个问题。我对如何使用这些库也很陌生，所以任何建议都值得赞赏。我更喜欢 Python 或 Java 的解决方案，不过一切都很好。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T19:06:12.430

[我在这里](https://stackoverflow.com/questions/10615901/trim-whitespace-using-pil/10616717#10616717)回答了一个相关问题，它删除了图像周围的任何边框，它使用[PIL](http://www.pythonware.com/products/pil/)。您可以轻松地调整代码，使其返回`True`或`False`是否有边框，如下所示：

```
from PIL import Image, ImageChops

def is_there_a_border(im):
    bg = Image.new(im.mode, im.size, im.getpixel((0,0)))
    diff = ImageChops.difference(im, bg)
    diff = ImageChops.add(diff, diff, 2.0, -100)
    bbox = diff.getbbox()
    return bbox != (0,0,im.size[0],im.size[1]) 
```

但是，`True`即使图像只有一侧有边框，这也会返回。但听起来你想知道图像周围是否有边框。为此，将最后一行更改为：

```
 return all((bbox[0], bbox[1], (bbox[0] + bbox[2]) <= im.size[0], 
                                  (bbox[1] + bbox[3]) <= im.size[1])) 
```

仅当每边都有边框时才返回 true。

例如：

`False:`

![在此处输入图像描述](../Images/34b01b2dfc91a99e9797d8f431a05345.png)

`False:`

![在此处输入图像描述](../Images/47ae9bc8dc4af84b2bd0a2cce10814c8.png)

`True:`

![在此处输入图像描述](../Images/477a995c4e7b5e62b02b28281733704a.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T21:01:32.757

看到 fraxel 的回答后，我突然想到，如果您不在乎边框有多宽，您可以裁剪出每边的最外层像素并检查颜色是否均匀。应该很快；通过将背景颜色设置为 0,0 像素的颜色，并将 1,1 裁剪为 w-2,h-2，剩余的图像应该正好有 1 种颜色。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-14T03:16:14.510

所以，最后一行的正确代码应该是：

```
 return all((bbox[0], bbox[1], bbox[2]) < im.size[0], bbox[3] < im.size[1])) 
```

对？对于 getbbox() 函数的最后两个参数，是“边界框的右下像素坐标”，而不是宽度和高度

# windows - 调试 (Win)：DIA 与 DBGHELP

> ID：10985551
> 
> 赞同：2
> 
> 时间：2012-06-11T18:27:26.427
> 
> 标签：windows, debugging, dbghelp, dia

简明扼要：

DIA（调试接口访问）和 DBGHELP 库之间的实际区别是什么？我知道 DIA 是基于 COM 的，并且似乎非常强大（并且能够与托管和非托管进程一起使用），而 DBGHELP 似乎使用起来非常方便，但提供的可能性较小。

任何人都可以解释这两者在哪里有它们的区别，以及可以用一个做什么而不用另一个做什么？我真的很难在互联网上找到一些完整的结论性信息:(

抱歉，如果这似乎是一个无聊的问题，感谢您为我提供的任何答案！:)

问候 PuerNoctis

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T18:45:26.160

DIA 具有一致的基于 COM 的接口。DbgHelp 由一组标准 C 函数组成。

这是我写的关于 DIA 的两篇文章（带有 C++ 示例），展示了 DIA 的力量：

1.  [符号文件定位器](http://www.codeproject.com/Articles/37883/Symbols-File-Locator)
2.  [如何检查程序数据库 (PDB) 文件的内容](http://www.codeproject.com/Articles/37456/How-To-Inspect-the-Content-of-a-Program-Database-P)

如果可能，请使用 DIA 而不是 DbgHelp，因为任何支持 COM 的程序都可以使用 DIA。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T18:36:26.017

这是同样的事情。DbgHelp 是核心 api，它可以从 C 中使用。DIA 是基于它的 COM 对象模型，它使它更易于使用，并且可以从大多数任何语言访问。它是Debug Interface Access的首字母缩写，强调“Access”。它的 MSDN 文档[从这里开始](http://msdn.microsoft.com/en-us/library/x93ctkx8%28v=vs.100%29.aspx)。

# java - Apache CXF WSDL2Java 不使用输入参数生成方法

> ID：10985553
> 
> 赞同：1
> 
> 时间：2012-06-11T18:27:33.857
> 
> 标签：java, wsdl, code-generation, cxf, wsdl2java

我正在尝试使用 Apache CXF-2.5.2 WSDL2Java 从 wsdl 生成 java 代码。这是我的 WSDL 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<wsdl:definitions xmlns:tns="http://soa.mytest.com/services/wsdl/test1" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:ns0="http://soa.mytest.com/test/messages/test1" name="TestManifestPT" targetNamespace="http://soa.mytest.com/services/wsdl/test1" xmlns:jms="http://www.tibco.com/namespaces/ws/2004/soap/binding/JMS" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:jndi="http://www.tibco.com/namespaces/ws/2004/soap/apis/jndi">
    <wsdl:types>
        <xs:schema xmlns:tns="http://soa.mytest.com/test/messages/test1" xmlns:xs="http://www.w3.org/2001/XMLSchema" targetNamespace="http://soa.mytest.com/test/messages/test1" version="1.2.0" elementFormDefault="qualified" attributeFormDefault="unqualified">
            <xs:complexType name="TestManifest">
                <xs:complexContent>
                    <xs:extension base="tns:Notification"/>
                </xs:complexContent>
            </xs:complexType>
            <xs:complexType name="Message" abstract="true">
                <xs:attribute name="version" type="tns:Version"/>
            </xs:complexType>
            <xs:complexType name="Notification">
                <xs:complexContent>
                    <xs:extension base="tns:Message"/>
                </xs:complexContent>
            </xs:complexType>
            <xs:simpleType name="Version">
                <xs:restriction base="xs:string"/>
            </xs:simpleType>
            <xs:element name="TestManifest" type="tns:TestManifest"/>
        </xs:schema>
    </wsdl:types>
    <wsdl:message name="TestManifest">
        <wsdl:part name="body" element="ns0:TestManifest"/>
    </wsdl:message>
    <wsdl:portType name="TestManifestPT">
        <wsdl:operation name="TestManifest">
            <wsdl:input message="tns:TestManifest"/>
        </wsdl:operation>       
    </wsdl:portType>
    <wsdl:binding name="SOAPService_Binding1" type="tns:TestManifestPT">
        <soap:binding style="document" transport="http://www.tibco.com/namespaces/ws/2004/soap/binding/JMS"/>
        <jms:binding messageFormat="text"/>
        <wsdl:operation name="TestManifest">
            <wsdl:documentation/>
            <soap:operation style="document" soapAction="TestManifest"/>
            <wsdl:input>
                <soap:body use="literal" parts="body"/>
            </wsdl:input>
        </wsdl:operation>
    </wsdl:binding>
    <wsdl:service name="TestManifestPT">
        <wsdl:port name="SOAPService_Binding1" binding="tns:SOAPService_Binding1">
            <soap:address location=""/>
            <jndi:context/>
            <jms:connectionFactory>GenericConnectionFactory</jms:connectionFactory>
            <jms:targetAddress destination="queue">INSTRUMENT.BULK.REQUEST</jms:targetAddress>
        </wsdl:port>
    </wsdl:service>
   </wsdl:definitions> 
```

对于“Testmanifest”操作，生成的 java 代码没有输入参数。

```
 package com.mytest.soa.services.testmaster.testbulkresponse.wsdl.test1;

import javax.jws.Oneway;
import javax.jws.WebMethod;
import javax.jws.WebService;
import javax.xml.ws.RequestWrapper;
import org.apache.cxf.annotations.DataBinding;

/**
 * This class was generated by Apache CXF 2.5.2
 * 2012-06-07T12:00:34.142+05:30
 * Generated source version: 2.5.2
 * 
 */
@WebService(targetNamespace = "http://soa.mytest.com/services/testmaster/TestBulkResponse/wsdl/test1", name = "TestManifestPT")
@DataBinding(org.apache.cxf.xmlbeans.XmlBeansDataBinding.class)
public interface TestManifestPT {

    @Oneway
    @RequestWrapper(localName = "TestManifest", targetNamespace = "http://soa.mytest.com/test/messages/test1", className = "com.mytest.soa.test.messages.test1.TestManifestDocument")
    @WebMethod(operationName = "TestManifest", action = "TestManifest")
    public void testManifest();
} 
```

与 Axis2-1.6.1 一起使用时，相同的 wsdl 使用输入参数生成函数“testManifest”。任何帮助表示赞赏。提前致谢。

# google-maps - 将谷歌地图添加到网页

> ID：10985555
> 
> 赞同：1
> 
> 时间：2012-06-11T18:27:44.160
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers, google-maps-api-2

我想用一个文本框、一个按钮和一个包含谷歌地图的 div 创建一个网页。我的用例是每当我在文本框中输入一些地址并单击按钮时，该地点的谷歌地图应该在该 div 中呈现。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T18:31:41.963

您想使用 Google Maps API： [https ://developers.google.com/maps/documentation/javascript/](https://developers.google.com/maps/documentation/javascript/)

以及地理编码服务： [https ://developers.google.com/maps/documentation/javascript/geocoding](https://developers.google.com/maps/documentation/javascript/geocoding)

或自动完成： [https ://developers.google.com/maps/documentation/javascript/places#places_autocomplete](https://developers.google.com/maps/documentation/javascript/places#places_autocomplete)

那里链接的示例应该为您提供大量可供使用的代码。

# c# - 泛型类和静态字段

> ID：10985560
> 
> 赞同：5
> 
> 时间：2012-06-11T18:28:05.527
> 
> 标签：c#, generics, static

有没有办法在几个不同的泛型类之间共享一个静态变量？

我有一堂课

```
class ClassA <T> : ObservableCollection<T> {

    static int counter;

    //...
} 
```

以及一些具有不同参数实例的实例，例如

```
ClassA<int> a = new ClassA<int>();
ClassA<double> b = new ClassA<double>();
ClassA<float> c = new ClassA<float>(); 
```

有没有办法让实例 a、b 和 c 共享静态字段计数器？

非常感谢任何答案和评论:)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T18:29:45.027

您可以将计数器包装在它自己的单例类中，然后从 A、B 和 C 中引用计数器类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T18:36:48.307

静态字段依赖于它们的类（这是 C# 如何处理告诉哪些静态成员是哪些），并且当您传入不同的泛型类型时，您实际上是在定义一个单独的类。

所以不行。像共享计数器这样的东西可能会更好地由调用 Thing That Counts 的任何类来处理，因为无论如何它都是对该计数器的状态最感兴趣的类。如果您出于某种原因无法执行此操作（该类被一堆不相关的线程引用），那么您可以创建一个静态类来保存库的状态，但这会导致可测试性问题，所以我会尝试如果可以的话，避免它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T18:37:50.547

最简单的解决方案：

```
class Program
{
    static void Main(string[] args)
    {
        ClassA<int> a = new ClassA<int>();
        ClassA<double> b = new ClassA<double>();
        Console.WriteLine(a.GetCounterAndAddOne());
        Console.WriteLine(b.GetCounterAndAddOne());
        Console.Read();
    }
}

class BaseA
{
    protected static int counter = 0;
}

class ClassA<T> : BaseA
{
    public int GetCounterAndAddOne()
    {
        return BaseA.counter++;
    }
} 
```

第一次调用 GetCounterAndAddOne 将计数器设置为 0，第二次调用将计数器设置为 1，它将根据需要继续。

# c# - 在 EF4 中使用相同的连接添加和编辑

> ID：10985563
> 
> 赞同：1
> 
> 时间：2012-06-11T18:28:16.110
> 
> 标签：c#, entity-framework, entity-framework-4

我正在使用 EF4 在数据库中查找一个项目，以确定它是否需要像这样插入或编辑：

```
 List<Campground> CampgroundEntities = new List<Campground>();

 using (MiscEntities pd = new MiscEntities())
            {
                Campground kc = pd.Campground.FirstOrDefault(i => i.Name == name);

                if (kc != null)
                {
                    kc.StreetAddress = streetAddress;
                    kc.City = city;
                    kc.State = state;
                    kc.Zip = zip;
                    kc.URL = campgroundUrl;
                    kc.UpdatedDT = DateTime.Now;

                    CampgroundEntities.Add(kc);
                }
                else
                {
                    kc = new Campground();
                    kc.Name = name;
                    kc.StreetAddress = streetAddress;
                    kc.City = city;
                    kc.State = state;
                    kc.Zip = zip;
                    kc.URL = campgroundUrl;
                    kc.AddedDateTime = DateTime.Now;

                    CampgroundEntities.Add(kc);
                }
            } 
```

我将我的实体添加到列表中，然后，我想将这些更改提交到数据库：

```
 using (MiscEntities pd = new MiscEntities())
        {
            foreach (var item in CampgroundEntities)
            {
                pd.Campground.AddObject(item);
            }
            pd.SaveChanges();
        } 
```

现在显然这不起作用，但如果可能的话，我想使用该连接来处理插入和更新。可以做到吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T18:53:10.813

```
using (MiscEntities pd = new MiscEntities())
{
    Campground kc = pd.Campground.FirstOrDefault(i => i.Name == name);

    if (kc == null)
    {
        kc = new Campground();
        pd.Campground.Add(kc);          
    }

    kc.StreetAddress = streetAddress;
    kc.City = city;
    kc.State = state;
    kc.Zip = zip;
    kc.URL = campgroundUrl;
    kc.UpdatedDT = DateTime.Now;

    CampgroundEntities.Add(kc);
} 
```

# python - 如何使用带有输入的函数？

> ID：10985565
> 
> 赞同：1
> 
> 时间：2012-06-11T18:28:27.470
> 
> 标签：python, function, input, int

好的，所以我有一个名为 DrawGraph 的函数。这个功能几乎是我的整个程序。

```
DrawGraph(x, y, xv, yv, s) 
```

在程序开始时，我想输入这个函数。并输入具体的数字，x、y、xv 等......

所以我每次启动程序时都可以输入不同的数字。

最简单甚至最好的方法是什么？我不能指望它会太难。

到目前为止我已经尝试过：

```
DrawGraph(x, y, xv, yv, s) = input()

DrawGraph(x, y, xv, yv, s) = input(x, y, xv, yv, s)

input(x, y, xv, yv, s) 
```

......这些都不起作用......

只是想扔在那里。在程序结束时，如果我没有输入但只是

DrawGraph(5, 5, 10, 10, 60)

它工作得很好。当我开始使用输入时，它真的变得一团糟

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T18:32:00.120

你可以这样做：

```
input() 
```

并输入：

```
DrawGraph(0, 1, 2, 3, 4) 
```

`input`接受任何 python 表达式并对其进行评估。这可能成为一个安全漏洞。

* * *

更好的方法是使用`raw_input()`：

```
args = map(float, raw_input().split())
DrawGraph(*args) 
```

该代码接受输入，将其转换为列表，然后将每个项目转换为浮点数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T18:31:46.290

```
x, y, xv, yv, s = input() 
```

输入必须采用以下形式：

```
1,2,3,4,5
```

或者

```
x = input()
y = input()
xv = input()
yv = input()
s = input() 
```

对此的输入将采用以下形式：

```
1
2
3
4
5
```

无论哪种方式，您都需要将变量传递给您的函数。

请注意，输入可以采用字符串参数作为用户提示，例如：

```
x = input("Give me x:") 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-11T18:35:51.137

除非您想解析来自一个输入的值，否则请求每个值并将其一次保存到一个变量中，然后调用您的函数会更容易。

```
x = input("Enter x:")
y = input("Enter y:")
xv = input("Enter xv:")
yv = input("Enter yv:")
s = input("Enter s:")

DrawGraph(x, y, xv, yv, s) 
```

这将从用户那里获取值，然后使用这些值调用函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-11T18:32:14.270

[这里](https://stackoverflow.com/questions/70797/python-and-user-input)有一个关于 python 中用户输入的很好的堆栈溢出问题

您可以接受这些值作为 cmd 行参数，或使用 raw_input 获取它们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-12T00:12:25.350

```
def do_draw_graph():
    x  = int(raw_input("Value for x? "))
    y  = int(raw_input("Value for y? "))
    xv = int(raw_input("Value for xv? "))
    yv = int(raw_input("Value for yv? "))
    s  = int(raw_input("Value for s? "))
    DrawGraph(x, y, xv, yv, s) 
```

Works when using the `turtle` module in IDLE

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-11T18:38:34.480

```
args = [int(i) for i in raw_input().split()]

DrawGraph(*args) 
```

对于 Python 3，您只需替换`raw_input()`为`input()`. 我敢肯定有一个稍微简单的方法（除了旧版本的潜在危险用法`input()`，如埃里克的回答中所述），但我现在有点匆忙，没有时间考虑太多了。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-03-02T20:44:55.317

```
 raw_input() is renamed to input() in Python3 

  x=int(input("enter x" )) 
  y=int(input("enter y" ))
  xv=int(input("enter xv" ))
  yv=int(input("enter yv" ))
  s=int(input("enter s" ))
  DrawGraph(x,y,xv,yv,s)

 it depends on what type of number are the inputs. if they'r decimals like 1.2 instead of int use float 
```

# javascript - 我的 jQuery 不工作 - 我正在尝试将 CSS 插入到附加了类的元素中

> ID：10985566
> 
> 赞同：1
> 
> 时间：2012-06-11T18:28:28.147
> 
> 标签：javascript, jquery, css

我正在尝试将 CSS 插入到附加了一个类的元素中，这样我基本上会将元素的颜色替换为列表中的颜色。

它不工作。

这是代码：

```
<script type="text/javascript">
jQuery(document).ready( function() {    
    var i = 0,
    colors = ['green', 'red', 'orange', 'brown', 'purple'];
    function setColor() {
     jQuery('.fc-event-skin').each.eq(i).css('background-color', colors[i  % colors.length]);
          i++;
        if (i == 4) {
            i = 0;
        }
    }})
</script> 
```

我重写了这个，仍然没有工作：

```
jQuery(document).ready( function() {    
var i = 0,
    colors = ['green', 'red', 'orange', 'brown', 'purple'];

     jQuery('.fc-event-skin').each(function(i) {
         (this).css('background-color', colors[i  % colors.length]);
          i++;
    if (i == 4) {
        i = 0;
    }
     }) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T18:31:36.923

你[`each()`](http://api.jquery.com/each/)做错了。

```
$('.fc-event-skin').each(function(i, elem) {
    $(this).css('background-color', colors[i % colors.length]);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T18:43:14.337

`jQuery.each()`已经增加了`i`你不需要这样做。这应该有效：

```
jQuery(document).ready(function() {    
   var colors = ['green', 'red', 'orange', 'brown', 'purple'];

   jQuery('.fc-event-skin').each(function(i) {
       jQuery(this).css('background-color', colors[i]);
   });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T18:45:03.337

如果有任何学习目的，这里有一个更简单的方法来实现这一点：

```
jQuery(document).ready( function() {    
    var colors = ['green', 'red', 'orange', 'brown', 'purple'];
    jQuery('.fc-event-skin').css("background-color",function(i) {
         return colors[i % colors.length];
    });
}); 
```

# ios - 块与私有方法？

> ID：10985567
> 
> 赞同：6
> 
> 时间：2012-06-11T18:28:35.717
> 
> 标签：ios, objective-c-blocks, private-methods

使用块在方法中定义私有方法而不是使用真正的私有方法有什么缺点？除了不能从其他地方调用该方法之外，还有什么？

例子：

```
-(NSDictionary*)serialize
{   
    NSMutableDictionary* serialization = [NSMutableDictionary dictionary];

    TwoArgumentsBlockType serializeItemBlock = ^void(MyItemClass* item, NSString* identifier)
    {       
        if (item)
        {
            // serialization code
        }
    };

    serializeItemBlock(self.someItem1, kSomeIdentifier1);
    serializeItemBlock(self.someItem2, kSomeIdentifier2);
    serializeItemBlock(self.someItem3, kSomeIdentifier3);
    serializeItemBlock(self.someItem4, kSomeIdentifier4);
    serializeItemBlock(self.someItem5, kSomeIdentifier5);
    serializeItemBlock(self.someItem6, kSomeIdentifier6);
    serializeItemBlock(self.someItem7, kSomeIdentifier7);
    serializeItemBlock(self.someItem8, kSomeIdentifier8);
    serializeItemBlock(self.someItem9, kSomeIdentifier9);
    serializeItemBlock(self.someItem10, kSomeIdentifier10);
    serializeItemBlock(self.someItem11, kSomeIdentifier11);

    return serialization;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-12T16:34:24.960

我认为最大的3个缺点是：

1.  正如您所提到的，该块不可重复使用。
2.  该块是不可测试的——您不能编写一个单元测试来验证该块是否按照您的想法执行。
3.  代码可读性较差。在阅读这个方法的时候，重要的是序列化了一系列的东西，而不是序列化是如何实现的细节。

将此块移动到方法中将解决所有这些问题。如果某个将块回调作为参数的 API 使用了该块，则您始终可以[从方法返回该块](http://twobitlabs.com/2012/05/block-initialization-for-testability-and-reuse)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T18:35:42.830

可以说，导航代码更难 - 您往往会将入口点隐藏在某些函数的中间，而且在调试器中看不到或搜索函数名称，这会使调试和跟踪变得更加困难。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T18:36:43.320

代码的清晰性很重要。

方法允许您将整个代码段彼此分开封装，并使其更易于阅读。

选择私有方法而不是块的另一个原因是内存管理。这是一个在这里讨论的话题，但足以说明块在内存管理中很奇怪，并且在这方面不像任何其他代码结构。

# php - 是否可以在 Windows 中使用 PHP 访问和设置“文件已准备好归档”标志？

> ID：10985568
> 
> 赞同：1
> 
> 时间：2012-06-11T18:28:36.433
> 
> 标签：php, windows, file, attributes

如果我制作这样的文件：
![在此处输入图像描述](../Images/3f04443e97bd0698a87eed660e843986.png)

然后转到它的属性并单击高级（我删除了位置）： ![在此处输入图像描述](../Images/ef6a80c62d0a90b932678386b554d36c.png)

我是否可以切换此标志：
![在此处输入图像描述](../Images/4aea04815b8838ed5f18d5d242d5c771.png)

用PHP？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T18:34:37.180

你可以这样做：

```
exec("attrib +A file.txt"); 
```

# android - android XMLParser的xml文件格式

> ID：10985575
> 
> 赞同：0
> 
> 时间：2012-06-11T18:29:07.250
> 
> 标签：android, xml

我正在使用 XMLParser 从服务器解析 xml 文件。我想知道在 xml 文件中是否需要放置

```
<?xml version="1.0" encoding="UTF-8"?> 
```

要不就

```
<?xml version="1.0"?> 
```

将工作。

我的服务器 xml 文件格式如下，无法正常工作。

输出的日志文件是

```
http://pastebin.com/MjcgW1pG 
```

这是我的xml

```
<?xml version="1.0"?>
-<application> -<catalog> -<currency id="1"> <rate>1.5</rate> <type>Euros</type> </currency> -    <currency id="10"> <rate>1.5169</rate> <type>USA$</type> </currency> -<currency id="16">     <rate>1.4901</rate> <type>AU$</type> </currency>  </catalog> </application> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T18:37:08.837

这些都不是严格要求的，因为它们是 XML 中的默认编码版本。正如[XML 1.1 规范](http://www.w3.org/TR/2006/REC-xml11-20060816/#sec-prolog-dtd)中所说

> .... 是 XML 1.0 文档，因为它没有 XML 声明：

但是，我认为最好放置明确的值，以便每个人都清楚这些值是什么。所以从

```
<?xml version="1.0" encoding="UTF-8"?> 
```

# java - 如何将 jar 文件表示为网络图？

> ID：10985576
> 
> 赞同：3
> 
> 时间：2012-06-11T18:29:11.877
> 
> 标签：java, python, graph, jar, networkx

由于试图回答[jar files 的 Graph isomorphism](https://stackoverflow.com/q/10916159/1290420)问题，自然引起了关于如何使用 Python 将 jar 文件表示为图形的争论。

问题：给定一个 jar 文件，读取其中包含的文件并将内容表示为 (a) 数据结构和 (b) 图形，它们都适合进一步研究和操作，例如，例如，使用另一个 jar 文件评估同构。在图中，目录树应该是根节点和分支节点，以文件作为叶子节点。

为了标准化答案，我使用从[这个 OpenProcessing 草图](http://www.openprocessing.org/sketch/46757)`verletphysics.jar`下载的文件。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-11T18:29:12.437

## 解决方案

鉴于 jar 文件基本上是压缩档案，使用Python 标准库中[的`zipfile`模块](http://docs.python.org/library/zipfile.html)来读取内容并准备 jar 内容关系的文本和图形表示。

## 文本表示

对于`verletphysics.jar`问题中提到的文件，下面的代码会生成以下内容列表：

```
META-INF/
META-INF/MANIFEST.MF
toxi/
toxi/physics/
toxi/physics/behaviors/
toxi/physics/constraints/
toxi/physics2d/
toxi/physics2d/behaviors/
toxi/physics2d/constraints/
toxi/physics/ParticlePath.class
toxi/physics/ParticleString.class
toxi/physics/PullBackString.class
toxi/physics/VerletConstrainedSpring.class
toxi/physics/VerletMinDistanceSpring.class
toxi/physics/VerletParticle.class
toxi/physics/VerletPhysics.class
toxi/physics/VerletSpring.class
toxi/physics/behaviors/AttractionBehavior.class
toxi/physics/behaviors/ConstantForceBehavior.class
toxi/physics/behaviors/GravityBehavior.class
toxi/physics/behaviors/ParticleBehavior.class
toxi/physics/constraints/AxisConstraint.class
toxi/physics/constraints/BoxConstraint.class
toxi/physics/constraints/CylinderConstraint.class
toxi/physics/constraints/MaxConstraint.class
toxi/physics/constraints/MinConstraint.class
toxi/physics/constraints/ParticleConstraint.class
toxi/physics/constraints/PlaneConstraint.class
toxi/physics/constraints/SoftBoxConstraint.class
toxi/physics/constraints/SphereConstraint.class
toxi/physics2d/ParticlePath2D.class
toxi/physics2d/ParticleString2D.class
toxi/physics2d/PullBackString2D.class
toxi/physics2d/VerletConstrainedSpring2D.class
toxi/physics2d/VerletMinDistanceSpring2D.class
toxi/physics2d/VerletParticle2D.class
toxi/physics2d/VerletPhysics2D.class
toxi/physics2d/VerletSpring2D.class
toxi/physics2d/behaviors/AttractionBehavior.class
toxi/physics2d/behaviors/ConstantForceBehavior.class
toxi/physics2d/behaviors/GravityBehavior.class
toxi/physics2d/behaviors/ParticleBehavior2D.class
toxi/physics2d/constraints/AngularConstraint.class
toxi/physics2d/constraints/AxisConstraint.class
toxi/physics2d/constraints/CircularConstraint.class
toxi/physics2d/constraints/MaxConstraint.class
toxi/physics2d/constraints/MinConstraint.class
toxi/physics2d/constraints/ParticleConstraint2D.class
toxi/physics2d/constraints/RectConstraint.class
verletphysics.mf 
```

## 钥匙

上述路径名中的每个节点都被提取出来，并由代码赋予一个唯一的 id，如下所示：

```
 Index  File
     0  behaviors
     1  BoxConstraint.class
     2  MaxConstraint.class
     3  VerletParticle.class
     4  ParticleConstraint2D.class
     5  ConstantForceBehavior.class
     6  META-INF
     7  VerletMinDistanceSpring2D.class
     8  AxisConstraint.class
     9  AttractionBehavior.class
    10  physics2d
    11  VerletPhysics.class
    12  PullBackString.class
    13  VerletSpring.class
    14  VerletConstrainedSpring.class
    15  ParticleString2D.class
    16  verletphysics.mf
    17  ParticleBehavior2D.class
    18  ParticleString.class
    19  RectConstraint.class
    20  CylinderConstraint.class
    21  toxi
    22  VerletMinDistanceSpring.class
    23  VerletSpring2D.class
    24  VerletParticle2D.class
    25  ParticlePath2D.class
    26  CircularConstraint.class
    27  ParticlePath.class
    28  MinConstraint.class
    29  MANIFEST.MF
    30  ParticleConstraint.class
    31  GravityBehavior.class
    32  VerletPhysics2D.class
    33  SoftBoxConstraint.class
    34  ParticleBehavior.class
    35  VerletConstrainedSpring2D.class
    36  PlaneConstraint.class
    37  PullBackString2D.class
    38  SphereConstraint.class
    39  physics
    40  AngularConstraint.class
    41  constraints 
```

## 图表

[路径名被翻译成使用NetworkX](http://networkx.lanl.gov/)构建到该网络中并使用[matplotlib](http://matplotlib.sourceforge.net/)绘制的边。

![jar文件内容的网络图](../Images/826aeb58290aadd333bf1de407e68d3d.png)

## 编码

```
import zipfile
import networkx as nx
import matplotlib.pyplot as plt

# Download the code from
# http://www.openprocessing.org/sketch/46757
# Unzip and find the jar file: verletphysics.jar
# This example uses that file for demo

def get_edges(fName):
    edges = []
    nodes = []

    jar = zipfile.ZipFile(fName, "r")
    for name in jar.namelist():
        print name # prints the list of files in the jar
        if name.endswith('/'): name = name[:-1]
        parts = name.split('/')
        nodes.extend( parts )
        if len(parts) > 1:
            edges += zip(nodes[:-1], nodes[1:]) 

    nodes = set(nodes)
    nodes = dict( zip(nodes, range(len(nodes)) ) )
    edges = [ (nodes[ edge[0] ], nodes[ edge[1] ])
              for edge in edges ]
    nodes = [ (index, label) for label, index in nodes.iteritems() ]
    nodes = sorted( nodes, key = lambda node: node[0] )
    return set( edges ), nodes

if __name__ == '__main__':
    fName = 'verletphysics.jar'
    edges, nodes = get_edges(fName)

    # print list of nodes
    # serving as a key to the graph
    print '%10s  %s' % ('Index', 'File')
    for node in nodes:
        print '%10s  %s' % (node[0], node[1])

    # Plot the network graph 
    G = nx.Graph()
    G.add_edges_from( edges )
    nx.draw_networkx(G, pos=nx.spring_layout(G))
    plt.axis('off')
    plt.show() 
```

# php - 在 PHP MYSQL 中跟踪对话

> ID：10985579
> 
> 赞同：0
> 
> 时间：2012-06-11T18:29:24.847
> 
> 标签：php, mysql, twitter

背景：我一直在使用 twitter API。进行设置，以便当有人提到/给我发消息时，它会被发送到聊天机器人。机器人做出回复，我使用 API 将其发送出去。`status_id`除了一个名为的字段外，每条推文都有一个独特的字段`rep_to_stat_id`，因此对话如下所示：

```
person 'hi how are you?'          stat_id = 1 rep_to_stat_id = blank
    me 'ok, and you?'             stat_id = 2 rep_to_stat_id = 1
person 'are you stalking me'      stat_id = 3 rep_to_stat_id = 2
    me 'no you are stalking me'   stat_id = 4 rep_to_stat_id = 3 
```

等等

当我第一次发送给机器人时，请创建一个随机`conv_id`的对话 ID ( )，以便机器人可以跟踪对话。

问题是跟踪这个，它就像一个梯子，通向原始`stat_id`的 no `rep_to_stat_id`，并且必须包含 common `conv_id`。

到目前为止，我一直都有一对多类型设置的表格，我无法理解这是什么类型的结构。

mysql中是否有一个选项可以添加到查询中，以按照每个对话的阶梯到达其第一个/最后一个点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T18:44:01.997

有许多方法可以在关系数据库中存储分层数据。

最常见的方法之一是简单地创建一个包含您提到的所有列的表（`stat_id`、`rep_to_stat_id`[nullable] 和`conv_id`）。问题是，要检索到根节点的完整树，您需要一个递归函数（在 MySQL 或您选择的脚本语言中），进行多个查询。

[这个 Stack Overflow 问题](https://stackoverflow.com/questions/4048151/what-are-the-options-for-storing-hierarchical-data-in-a-relational-database)应该为您提供对树结构建模的所有可用选项的一个很好的概述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T18:41:59.237

*有一列标记对话 ID，另一列标记该对话中*的迭代。

```
person    text                       conversation_id    reply_num
------------------------------------------------------------------
0         "Hi"                       0                  0
1         "Hello, who are you"       0                  1
0         "I am a bot"               0                  2
1         "Goodbye"                  0                  3
0         "Hi"                       1                  0           //new conversation thread
1         "who is this?"             1                  1
0         "This is a bot"            1                  2
1         "leave me alone"           1                  3 
```

# c# - 按名称查找文本框、复选框、任何对象 C#

> ID：10985584
> 
> 赞同：0
> 
> 时间：2012-06-11T18:29:50.323
> 
> 标签：c#, object, arm, windows-ce

这真的很奇怪，但我似乎无法在 .NET CF 中找到特定的 textBox(i) 或 checkBox(i)。在 .NET 3.5 中，我可以创建这个函数：

```
void checking(int input)
{
    CheckBox checkbox = (CheckBox)this.Controls["checkBox" + input.toString()];
    if(checkbox.isChecked)
      //do something here
} 
```

在本例中，它获取复选框的名称（即 checkBox1、checkBox2 等）。

但是在 WINCE6 的 .NET CF 3.5 中，它不断告诉我我需要在 Controls[] 中创建一个索引，因为它无法将字符串转换为 int。有谁知道如何在不使用该 foreach 语句的情况下找到特定对象？那个 foreach 很有用，但不是因为它循环遍历所有的复选框。由于我是基于 ARM 开发的，所以速度就是一切。我正在使用 VS2008 C# 开发桌面和移动应用程序。

谢谢阅读！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-05T03:44:59.437

The following will cycle through 10 PictureBoxs used as rating stars changing them from gray to blue in my case. The PictureBoxs are named in the following convention, pbStarX. Where X is a number 1-10\. Ex: pbStar1, pbStar2, pbStar3, etc...

*Note: Using c#.Net VS 2010*

```
for (int x = 1; x <= 10; x++)
{
    PictureBox pb = (PictureBox)this.Controls.Find("pbStar" + x, true)[0];
    pb.Image = MyProject.Properties.Resources.star_blue;
} 
```

Alternative maybe when using c#.Net Compact Framework

```
private Control FindControl(Control parent, string ctlName)
{
    foreach(Control ctl in parent.Controls)
    {
        if(ctl.Name.Equals(ctlName))
        {
            return ctl;
        }

        FindControl(ctl, ctlName);                     
    }
    return null;
} 
```

Use the above function like this...

```
Control ctl = FindControl(this, "btn3");
if (ctl != null)
{
    ctl.Focus();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T18:36:07.640

您正在使用 un integer indexer 并且应该将 un integer 传递给它以检索对象。尝试这样的事情：

```
void checking(int input) 
{ 
    CheckBox checkbox = (CheckBox)this.FindControl("checkBox" + input.toString()); 
    if(checkbox.isChecked) 
      //do something here 
} 
```

这样，您将通过 id 找到控制权

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T18:38:25.877

它应该可以工作，但是您也可以使用

```
CheckBox checkbox = (CheckBox)this.Controls.Find("checkBox" + input.toString())[0]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-30T11:53:18.720

它的工作我的朋友:) 请尝试这种方式

```
bool chkValue;
string chkName="checkbox1";
CheckBox myCheckBox = this.Controls.Find(chkName, true).First() as CheckBox;
chkValue = myCheckBox.Checked; 
```

# c - 计算夏令时开始和结束的日期和时间？

> ID：10985585
> 
> 赞同：2
> 
> 时间：2012-06-11T18:29:55.783
> 
> 标签：c, linux

我对 TZ 环境变量有疑问。我的时区配置字符串为

```
CST+6CDT,M3.2.0/02:00:00,M11.1.0/02:00:00. 
```

从 TZ 字符串中，我需要获取当年 M3.2.0 和 M11.1.0 的天数。我还需要以 UTC 秒计算夏令时的开始和结束（从 1970 年 1 月 1 日的 00:00:00 开始）。

我可以使用时间函数获取当前年份。

C语言代码。请问有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T19:12:49.460

这并不容易，而且很少有宝贵的标准 C 代码（更不用说标准 C 代码）可以提供帮助。部分解决方案的一个可能来源是 IANA 的[奥尔森时区数据库](https://iana.org/time-zones/)。有时区数据本身，但也有处理时区信息的代码包。这包括代理标准 C 库函数，以及一些扩展库代码。该代码确实处理了 TZ 变量；因此，它有可以帮助你的代码。该代码是否易于访问是另一回事。确定时区转换（标准到夏令时，或冬季到夏季时间）也很棘手。有代码可以做到这一点，但找到它可能会很棘手。

# hadoop - 启动 Pig 给出错误名称节点处于安全模式

> ID：10985587
> 
> 赞同：0
> 
> 时间：2012-06-11T18:30:15.813
> 
> 标签：hadoop, apache-pig, hdfs

我是 Hadoop/PIG 的新手。重新启动我的机器然后启动我的虚拟机来运行 PIG 后，当我尝试运行时它给了我以下错误：

```
grunt> A = load '1.txt';    
grunt> dump A; 
```

> 错误 org.apache.pig.impl.io.FileLocalizer - org.apache.hadoop.ipc.RemoteException：org.apache.hadoop.hdfs.server.namenode.SafeModeException：无法删除 /tmp/temp-1824625143。名称节点处于安全模式。报告区块的比率 0.6964 尚未达到阈值 0.9990。安全模式将自动关闭。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-19T23:19:11.930

看起来您可能已经用完了内存块才能运行您的程序。退出安全模式后，这些块将在空间用完时自动删除。要在 hadoop 中退出安全模式，请使用以下命令：

* * *

`hadoop dfsadmin -safemode leave`

# php - 如何通过 Internet 许可我的 Excel VBA？

> ID：10985588
> 
> 赞同：-1
> 
> 时间：2012-06-11T18:30:15.823
> 
> 标签：php, mysql, excel, vba

我正在 Excel 中开发 VBA 宏。我希望为使用它的每台机器或用户锁定或许可它。

我正在考虑通过互联网查找来做到这一点。如果用户有权访问，也许可以从 MySQL 下载 VBA 脚本。

有没有人有任何想法或以前做过类似的事情？

我一直在通过谷歌寻找解决方案，但我没有找到任何强有力的想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T19:14:17.457

它相当容易控制下载或安装，但一旦下载和安装后，VBA 的保护很弱并且很容易被绕过：因此很难防止人们复制和重新安装 VBA 代码。编译的 VB6 本质上更安全，但遗憾的是已经过时了。

# .net - SQL Azure 上的全文搜索

> ID：10985596
> 
> 赞同：19
> 
> 时间：2012-06-11T18:31:18.017
> 
> 标签：.net, tsql, azure, full-text-search, azure-sql-database

我有一个要迁移到 SQL Azure 的数据库。这个数据库中有几个依赖于 ContainsTable 的存储过程。据我了解，SQL Azure 不支持这一点。因此，我希望有一种方法可以在 C# 代码中模仿此功能。

有谁知道如何：a）在 SQL Azure 中使用 ContainsTable 或 b）在 C# 代码中模仿它？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-11T20:05:20.503

是的，你说得对，SQL Azure 不支持包含表，如此处[所述](http://msdn.microsoft.com/en-us/library/windowsazure/ee336253.aspx)。

根据您的问题 a) 是不可能的，但是 b) 可以使用 Lucene.NET。

如果您希望使用代码在 SQL Azure 中进行全文搜索，则需要以 Web 或辅助角色使用 Lucene.net 将您的 SQL Azure 数据索引到 Windows Azure Blob 存储，然后访问索引数据进行搜索。该过程描述如下：

1.  配置您的 Windows Azure Blob 存储
2.  使用 Web 或辅助角色访问您的 SQL Azure，然后在 Windows Azure Blob 存储上创建索引
3.  使用存储在 Windows Azure Blob 存储中的索引数据

这是一篇开始您工作的文章：[如何将 Lucene.NET 与 SQL Azure 一起使用（zh-CN）](http://social.technet.microsoft.com/wiki/contents/articles/2367.how-to-use-lucene-net-with-sql-azure-en-us.aspx)

# python - 带参数的多行字符串。如何申报？

> ID：10985603
> 
> 赞同：88
> 
> 时间：2012-06-11T18:31:37.500
> 
> 标签：python

假设我有一个非常长的字符串，其中包含要创建的参数。我知道你可以创建一个多行字符串

```
cmd = """line 1
      line 2
      line 3""" 
```

但现在假设我想传递 1、2 和 3 作为参数。

这有效

```
cmd = """line %d
      line %d
      line %d""" % (1, 2, 3) 
```

但是，如果我有一个包含 30 多个参数的超长字符串，我怎么可能在多行中传递这些参数？在单行中传递它们甚至破坏了尝试创建多行字符串的目的。

提前感谢任何人的帮助和洞察力。

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2012-06-11T19:22:13.770

您可以使用`str.format()`允许命名参数的函数，因此：

```
'''line {0}
line {1}
line {2}'''.format(1,2,3) 
```

您当然可以使用 Python 的`*args`语法扩展它以允许您传入 a`tuple`或`list`：

```
args = (1,2,3)
'''line {0}
line {1}
line {2}'''.format(*args) 
```

如果您可以智能地命名您的参数，那么最强大的解决方案（尽管是最密集的一种）将是使用 Python 的`**kwargs`语法来传递字典：

```
args = {'arg1':1, 'arg2':2, 'arg3':3}
'''line {arg1}
line {arg2}
line {arg3}'''.format(**args) 
```

有关`str.format()`迷你语言的更多信息，请访问[此处](http://docs.python.org/library/string.html#format-string-syntax)。

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2012-06-11T18:34:28.093

您可能会滥用括号`(`和逗号的行延续属性`,`。

```
cmd = """line %d
      line %d
      line %d""" % (
      1,
      2,
      3) 
```

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2017-08-23T10:48:47.997

最简单的方法可能是使用[文字字符串插值](https://www.python.org/dev/peps/pep-0498/)（从 Python 3.6 开始可用，并假设所有参数都在范围内）。

```
cmd = f"""line {1}
      line {2}
      line {3}""" 
```

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2017-08-23T08:31:22.900

string.format()-Function 的另一种变体。

```
s = "{0} " \
    "{1} " \
    "{2}" \
    .format("Hello", "world", "from a multiline string")    
print(s) 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2020-10-20T01:34:54.753

# TLDR；

直接跳下来看看下面的示例 1 和示例 4。

# 完整答案：

上周（2020 年 10 月）我刚刚才了解[Python`textwrap`模块](https://docs.python.org/3/library/textwrap.html)`textwrap.dedent()`，它具有非常方便的功能，考虑到[它自 Python 2.7 以来就已经存在](https://docs.python.org/2.7/library/textwrap.html)，我不敢相信它没有更受欢迎！

**使用`textwrap.dedent()`多行字符串解决了[我之前回答](https://stackoverflow.com/a/54564926/4561887)的所有问题！**

## [这是它的官方文档](https://docs.python.org/3/library/textwrap.html)（强调添加）：

> `textwrap.dedent(text)`
> 
> **从文本的每一行中删除任何常见的前导空格。**
> 
> **这可用于使三引号字符串与显示的左边缘对齐，同时仍以缩进形式在源代码中显示它们。**
> 
> 请注意，制表符和空格都被视为空格，但它们不相等：行`" hello"`和`"\thello"`被认为没有共同的前导空格。
> 
> 仅包含空格的行在输入中被忽略，并在输出中标准化为单个换行符。
> 
> 例如：
> 
> ```
> def test():
>     # end first line with \ to avoid the empty line!
>     s = '''\
>     hello
>       world
>     '''
>     print(repr(s))          # prints '    hello\n      world\n    '
>     print(repr(dedent(s)))  # prints 'hello\n  world\n' 
> ```

## 对于所有示例

```
import textwrap 
```

## 示例 1

因此，**而不是 this**，正如[最受支持的答案所述](https://stackoverflow.com/a/10986239/4561887)（这失去了漂亮、干净、缩进）：

```
cmd = '''line {0}
line {1}
line {2}'''.format(1,2,3)

print(cmd) 
```

**这样做**（并保持漂亮、干净、压痕）！

```
import textwrap

cmd = textwrap.dedent('''\
    line {0}
    line {1}
    line {2}''').format(1,2,3)

print(cmd) 
```

或者，使用 Python3 的新改进的[“f”格式字符串](https://realpython.com/python-f-strings/)而不是`.format()`方法！：

```
import textwrap

var0 = 1
var1 = 2
var2 = 3
cmd = textwrap.dedent(f'''\
    line {var0}
    line {var1}
    line {var2}''')

print(cmd) 
```

## 示例 2

如果`format()`函数有很多参数，可以根据需要将它们放在多行上。请注意，`format()`参数在这里占据了两行：

```
cmd = textwrap.dedent('''\
    line {0}
    line {1}
    line {2}
    line {3}
    line {4}
    line {5}
    line {6}
    line {7}
    line {8}
    line {9}
    line {10}
    line {11}
    line {12}
    line {13}
    line {14}
    line {15}
    line {16}
    line {17}
    line {18}
    line {19}''').format(
        1, 2, 3, 4, 5, 6, 7, 8, 9, 10,
        11, 12, 13, 14, 15, 16, 17, 18, 19, 20,
    )

print(cmd) 
```

当然，如果`format()`参数真的很长，您也可以将每个参数单独放在一行：

```
cmd = textwrap.dedent('''\
    line {0}
    line {1}
    line {2}
    line {3}
    line {4}
    line {5}
    line {6}
    line {7}
    line {8}
    line {9}
    line {10}
    line {11}
    line {12}
    line {13}
    line {14}
    line {15}
    line {16}
    line {17}
    line {18}
    line {19}''').format(
        100000000000000000000000000000000000000000000000000000000000000000001,
        100000000000000000000000000000000000000000000000000000000000000000002,
        100000000000000000000000000000000000000000000000000000000000000000003,
        100000000000000000000000000000000000000000000000000000000000000000004,
        100000000000000000000000000000000000000000000000000000000000000000005,
        100000000000000000000000000000000000000000000000000000000000000000006,
        100000000000000000000000000000000000000000000000000000000000000000007,
        100000000000000000000000000000000000000000000000000000000000000000008,
        100000000000000000000000000000000000000000000000000000000000000000009,
        100000000000000000000000000000000000000000000000000000000000000000010,
        100000000000000000000000000000000000000000000000000000000000000000011,
        100000000000000000000000000000000000000000000000000000000000000000012,
        100000000000000000000000000000000000000000000000000000000000000000013,
        100000000000000000000000000000000000000000000000000000000000000000014,
        100000000000000000000000000000000000000000000000000000000000000000015,
        100000000000000000000000000000000000000000000000000000000000000000016,
        100000000000000000000000000000000000000000000000000000000000000000017,
        100000000000000000000000000000000000000000000000000000000000000000018,
        100000000000000000000000000000000000000000000000000000000000000000019,
        100000000000000000000000000000000000000000000000000000000000000000020,
    )

print(cmd) 
```

## 示例 3

而**不是 this**，[正如我在原始答案中所说的那样](https://stackoverflow.com/a/54564926/4561887)（缩进看起来很漂亮，但使用起来有点乏味）：

```
print("\n\n" + 
      "########################\n" + 
      "PRINT DOCSTRING DEMO:\n" + 
      "########################") 
```

...你现在可以**做到这一点！**--这允许我的多行字符串在打印时“与显示器的左边缘对齐，同时仍以缩进形式在源代码中显示它们”（参见[官方文档](https://docs.python.org/3/library/textwrap.html#textwrap.dedent)）：

```
# Note: use the `\` below to prevent the implicit newline right after it from being printed.
print(textwrap.dedent("""

      ########################
      PRINT DOCSTRING DEMO:
      ########################\
      """)) 
```

## 示例 4

而**不是 this**，它的中间有一些难看的缺乏缩进：

```
def printDocstrings1():
    """
    Print all document strings for this module, then exit.
    Params:  NA
    Returns: NA
    """

    # A LITTLE BIT UGLY, BUT IT WORKS.
    print("""
---------------------
Module Documentation:
---------------------
printDocstrings:{}
myFunc1:{}
class Math:{}
    __init__:{}
    add:{}
    subtract:{}""".format(
        printDocstrings1.__doc__,
        myFunc1.__doc__,
        Math.__doc__,
        Math.__init__.__doc__,
        Math.add.__doc__,
        Math.subtract.__doc__)) 
```

...**这样做**，用于`textwrap.dedent()`始终保持美观的缩进！：

```
def printDocstrings2():
    """
    Print all document strings for this module, then exit.
    Params:  NA
    Returns: NA
    """

    # MUCH CLEANER! Now I can have the proper indentation on the left withOUT
    # it printing that indentation!
    print(textwrap.dedent("""\
    ---------------------
    Module Documentation:
    ---------------------
    printDocstrings:{}
    myFunc1:{}
    class Math:{}
        __init__:{}
        add:{}
        subtract:{}""").format(
            printDocstrings2.__doc__,
            myFunc1.__doc__,
            Math.__doc__,
            Math.__init__.__doc__,
            Math.add.__doc__,
            Math.subtract.__doc__)) 
```

* * *

## 运行上面的代码

[您可以在我的eRCaGuy_hello_world](https://github.com/ElectricRCAircraftGuy/eRCaGuy_hello_world) GitHub存储库中运行我上面的测试代码： [textwrap_practice_1.py](https://github.com/ElectricRCAircraftGuy/eRCaGuy_hello_world/blob/master/python/textwrap_practice_1.py)。

运行命令：

```
./textwrap_practice_1.py 
```

或者：

```
python3 textwrap_practice_1.py 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2019-02-07T01:08:11.777

**2020 年 10 月 19 日更新：尽管我在这里的回答仍然很有见地、内容丰富且值得一读，但我现在在这里有了[一个*更好的答案，*](https://stackoverflow.com/a/64437283/4561887)它依赖于真正有用的`textwrap.dedent()`功能。**

* * *

正如[@Chinmay Kanchi 所说](https://stackoverflow.com/a/10986239/4561887)，您可以这样做：

```
'''line {0}
line {1}
line {2}'''.format(1,2,3) 
```

但是，我认为它看起来很傻，必须在新行上完全左对齐，特别是当你这样做时已经缩进了几个级别，所以我希望它更像这样写：

```
'''line {0}
   line {1}
   line {2}'''.format(1,2,3) 
```

那行得通，但是错了！它将左侧的所有空格都解释`line {1}`为`line {2}`真实空格，因此打印它会看起来很傻：

```
1
   2
   3 
```

代替

```
1
2
3 
```

**因此，一种解决方法是使用`+`运算符进行连接，并在连接的字符串周围加上括号，以及显式的换行符 ( `\n`) 字符，如下所示：**

```
('line {0}\n' + 
 'line {1}\n' +
 'line {2}').format(1,2,3) 
```

*完美（在我看来）！现在，如果您打印它，它在源代码和实际字符串中看起来都很好并且对齐。*

# 完整示例：

## 丑陋的源代码！

```
num1 = 7
num2 = 100
num3 = 75.49

# Get some levels of indentation to really show the effect well.
# THIS IS *UGLY*! Notice the weird forced-left-align thing for the string I want to print!
if (True):
    if (True):
        if (True):
            # AAAAAH! This is hard to look at!
            print('''num1 = {}
num2 = {}
num3 = {}'''.format(num1, num2, num3))

            # More lines of code go here
            # etc
            # etc 
```

输出：

> num1 = 7
> num2 = 100
> num3 = 75.49

## 漂亮的例子！啊，很高兴在源代码中看到。:)

这是我更喜欢的。

```
# Get some levels of indentation to really show the effect well.
if (True):
    if (True):
        if (True):
            # IMPORTANT: the extra set of parenthesis to tie all of the concatenated strings together here is *required*!
            print(('num1 = {}\n' + 
                   'num2 = {}\n' + 
                   'num3 = {}')
                   .format(num1, num2, num3))

            # More lines of code go here
            # etc
            # etc 
```

输出：

> num1 = 7
> num2 = 100
> num3 = 75.49

# 2019 年 5 月 21 日更新：有时“丑陋”的多行字符串确实是最好的方法！

所以，我一直在使用 Python**从基于文本的配置文件中自动生成 C 头文件和源文件（.h/.c）**，在做了相当多的工作之后，我得出结论，简单地复制的好处——将配置文件中的大量文本粘贴到我的 Python 脚本中比任何“丑陋”因素更重要。

因此，我确定以下是我在需要大的多行复制粘贴字符串时首选的方法，例如：

**选项1：**

*   在整个长字符串周围使用括号以允许开头`"""`在新行上

    # 获得一定程度的缩进仍然显示“丑陋”效果。

    if (True): if (True): if (True): header = ( """ /* 我的自定义文件头信息在这里 */

    #pragma 一次

    ＃包括 ”{}”

    常量 {} {}; """).format(include, struct_t, struct)

    ```
     print("header =" + header) 
    ```

**选项 2：**

*   没有括号，但仍然把结尾`"""`放在自己的行上

    # 获得一定程度的缩进仍然显示“丑陋”效果。

    if (True): if (True): if (True): header = """ /* 我的自定义文件头信息在这里 */

    #pragma 一次

    ＃包括 ”{}”

    常量 {} {}; """.format（包括，struct_t，结构）

    ```
     print("header =" + header) 
    ```

**选项 3：**

*   整个字符串周围没有括号，并将结尾`"""`与字符串内容放在同一行，以防止`\n`在末尾添加（可能不受欢迎）。

*   但是，如果它很长，请将其余部分`format(`放在一个新行（或许多新行）上。

    # 获得一定程度的缩进仍然显示“丑陋”效果。

    if (True): if (True): if (True): header = """ /* 我的自定义文件头信息在这里 */

    #pragma 一次

    ＃包括 ”{}”

    const {} {};""".format(include, struct_t, struct) # 这里的缩进实际上可以是*任何东西*，但我喜欢缩进 1 级；但是因为它在括号内，所以没关系

    ```
     print("header =" + header) 
    ```

**输出：**

*   选项 1 和 2 产生完全相同的输出，`\n`在字符串的最后有一个额外的输出，这在大多数情况下是可以的
*   选项 3 产生与选项 1 和 2 相同的确切输出，*只是*它在字符串的最后*没有*额外`\n`的，以防您的情况不希望这样做
*   无论您使用选项 1、2 还是 3 都无关紧要——此时这只是用户偏好，除了`\n`上面提到的额外选项

这是上面选项 1、2 和 3 打印的内容：

> ```
> /*
> my custom file header info here
> */
> 
> #pragma once
> 
> #include "<stdint.h>"
> 
> const my_struct_t my_struct; 
> ```

* * *

# 把它放在一起：将“漂亮”和“丑陋”的方法混合在一起，以在这个*为您的模块**打印[文档字符串文档的演示中获得最佳结果！](https://www.geeksforgeeks.org/python-docstrings/)*

这是一个使用上面介绍的“漂亮”和“丑陋”多行字符串方法的基本示例，以便获得每个方法的最大好处。这也展示了如何使用和打印模块“文档字符串”来记录你的模块。请注意`"""`基于 - 的多行技术如何为我们提供了很大的间距，因为我在下面所做的方式是在开始之后和结束之前自动换行 ( `\n`)，因为这就是字符串的编写方式。`"""``"""`

```
# PRETTY, AND GOOD.
print("\n\n" + 
      "########################\n" + 
      "PRINT DOCSTRING DEMO:\n" + 
      "########################")

import sys

def printDocstrings():
    """
    Print all document strings for this module, then exit.
    Params:  NA
    Returns: NA
    """

    # A LITTLE BIT UGLY, BUT GOOD! THIS WORKS GREAT HERE!
    print("""
---------------------
Module Documentation:
---------------------
printDocstrings:{}
myFunc1:{}
class Math:{}
    __init__:{}
    add:{}
    subtract:{}""".format(
        printDocstrings.__doc__,
        myFunc1.__doc__,
        Math.__doc__,
        Math.__init__.__doc__,
        Math.add.__doc__,
        Math.subtract.__doc__))

    sys.exit()

def myFunc1():
    """
    Do something.
    Params:  NA
    Returns: NA
    """
    pass

class Math:
    """
    A basic "math" class to add and subtract
    """

    def __init__(self):
        """
        New object initialization function.
        Params:  NA
        Returns: NA
        """
        pass

    def add(a, b):
        """
        Add a and b together.
        Params:  a   1st number to add
                 b   2nd number to add
        Returns: the sum of a + b
        """
        return a + b

    def subtract(a, b):
        """
        Subtract b from a.
        Params:  a   number to subtract from
                 b   number to subtract
        Returns: the result of a - b
        """
        return a - b

printDocstrings() 
```

**输出：**
*- 注意它的自动格式是多么漂亮和良好，因为当您以这种方式打印它们时，文档字符串的制表符、换行符和间距都会自动保留！*

> ```
>  ########################  
> PRINT DOCSTRING DEMO:  
> ########################  
>   
> ---------------------  
> Module Documentation:  
> ---------------------  
> printDocstrings:  
>     Print all document strings for this module, then exit.  
>     Params:  NA  
>     Returns: NA  
>       
> myFunc1:  
>     Do something.  
>     Params:  NA  
>     Returns: NA  
>       
> class Math:  
>     A basic "math" class to add and subtract  
>       
>     __init__:  
>         New object initialization function.  
>         Params:  NA  
>         Returns: NA  
>           
>     add:  
>         Add a and b together.  
>         Params:  a   1st number to add  
>                  b   2nd number to add  
>         Returns: the sum of a + b  
>           
>     subtract:  
>         Subtract b from a.  
>         Params:  a   number to subtract from  
>                  b   number to subtract  
>         Returns: the result of a - b 
> ```

# 参考：

1.  Python 文档字符串：[https ://www.geeksforgeeks.org/python-docstrings/](https://www.geeksforgeeks.org/python-docstrings/)

*   注意：您也可以使用该[`help()`](https://docs.python.org/3/library/functions.html#help)方法访问模块或类的文档（但*以交互方式*），如上面的链接所示，如下所示：

    ```
     help(Math)  # to interactively display Class docstring
         help(Math.add)  # to interactively display method's docstring 
    ```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-06-11T18:38:39.247

要将参数插入到同一行中，您可以这样做：

```
cmd = "line %d\n"%1 +\
      "line %d\n"%2 +\
      "line %d\n"%3 
```

[编辑：] 在回复第一条评论时，我想出了这个：

```
cmd = "\n".join([
      "line %d"%1,
      "line %d"%2,
      "line %d"%3]) 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2019-03-15T15:55:22.740

您可以使用`textwrap.dedent`从行中删除前导空格：

```
import textwrap

cmd = str.strip(textwrap.dedent(
    '''
        line {}
            line with indent
        line {}
        line {}
    '''
    .format(1, 2, 3))) 
```

这导致：

```
line 1
    line with indent
line 2
line 3 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-06-11T18:34:41.697

这对我有用：

```
cmd = """line %d
      line %d
      line %d""" % (
          1,
          2,
          3
      ) 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-03-15T15:50:25.970

`format`这是最简单的版本，它在检查参数方面也是 IDE 友好的：

```
cmd = (
    'line {}\n'
    'line {}\n'
    'line {}\n'
    .format(1, 2, 3)) 
```

多行参数版本：

```
cmd = (
    'line {}\n'
    'line {}\n'
    'line {}\n'
    .format(
        'very very very very very very very very very long 1',
        'very very very very very very very very very long 2',
        'very very very very very very very very very long 3',
    )
) 
```

# php - Fckeditor 的正则表达式

> ID：10985604
> 
> 赞同：0
> 
> 时间：2012-06-11T18:31:38.297
> 
> 标签：php, regex, fckeditor

我在使用 Fckeditor 和用于修补问题的正则表达式时遇到问题。

当前问题：内容（例如图像）中的相对 URL 会导致 404 错误和红色 X 而不是图像。一旦页面呈现在网站的前端，HTML 链接就在该相对目录中有效。但在管理员内部，情况并非如此。

我想在图像调用之前自动使用完整的站点 URL 来帮助避免这种情况。这就是我所拥有的，但它不起作用：

```
$html = preg_replace('/src="images\//', 'src="'.$_SERVER['HTTP_HOST'].'/images/', $pageDescription); 
```

它似乎没有找到任何基于模式的东西。它只是返回我给它的东西。

# php - 缓慢的搜索查询 - 错误的编码，（左连接）

> ID：10985608
> 
> 赞同：-2
> 
> 时间：2012-06-11T18:31:46.033
> 
> 标签：php, mysql, drupal, search

错误的搜索查询正在使我们的网站崩溃。写这个的人计算了每个子类别，然后将它们加在一起以获得主要类别的总数。对于分页 Next、Last、Pages，然后使用 JOIN/INNER JOIN（该页面的所有产品）编写查询。它创建了太多的步骤，从而减慢了一切，直到超时。帮助！

查询摘要：

```
SELECT COUNT(DISTINCT node.nid) AS cnt FROM 
content_type_product cp 
LEFT JOIN node node ON node.nid = cp.nid 
LEFT JOIN uc_products uc_products ON node.nid = uc_products.nid 
LEFT JOIN users users ON users.uid = node.uid 
LEFT JOIN files ON files.fid = cp.field_product_image_1_value 
LEFT JOIN content_type_product_tags ct ON ct.field_product_product_id_value = cp.nid 
WHERE 
    (
    node.status <> N
    ) 
AND 
    (
    ct.field_product_tag_id_value = N
    ) 
AND 
    (
    cp.field_deleted_value <> N
    ) 
AND 
    (
    cp.field_stock_level_value > N
    ) 
AND EXISTS 
    (
    SELECT scp.nid FROM content_type_store scp 
    LEFT JOIN node snode ON snode.nid = scp.nid 
    LEFT JOIN users susers ON susers.uid = snode.uid 
    WHERE susers.name = users.name 
        AND scp.field_shop_activated_value = 'S' 
        AND scp.field_shop_suspended_value = 'S') 
ORDER BY cp.field_product_last_changed_value DESC; 
```

查询样本：

```
SELECT count(Distinct node.nid) as cnt 
FROM content_type_product cp 
LEFT JOIN node node ON node.nid = cp.nid 
LEFT JOIN uc_products uc_products ON node.nid = uc_products.nid 
LEFT JOIN users users ON users.uid = node.uid 
LEFT JOIN files ON files.fid = cp.field_product_image_1_value 
LEFT JOIN content_type_product_tags ct ON ct.field_product_product_id_value = cp.nid
WHERE 
    (
    node.status <> 0
    ) 
    AND 
        (
        ct.field_product_tag_id_value = 478
        ) 
    AND 
        (
        cp.field_deleted_value <> 1
        ) 
    AND 
        (
        cp.field_stock_level_value > 0
        ) 
    AND EXISTS 
        (
        SELECT scp.nid FROM content_type_store scp 
        LEFT JOIN node snode on snode.nid = scp.nid 
        LEFT JOIN users susers on susers.uid = snode.uid 
        WHERE susers.name = users.name 
            AND scp.field_shop_activated_value = '1' 
            AND scp.field_shop_suspended_value = '0'
        ) 
    ORDER BY cp.field_product_last_changed_value DESC 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T07:47:25.310

这是需要遵循的以下步骤以避免慢查询

1.  首先从节点开始，而不是从内容表开始。
2.  对于内容表加入`vid`而不是`nid`
3.  无需在查询中使用`distinct`和。`group by`如果您使用的是您的查询有一些连接问题。

```
SELECT count(Distinct node.nid) as cnt 
FROM node node 
LEFT JOIN content_type_product cp ON cp.vid = node.vid 
LEFT JOIN uc_products uc_products ON node.vid = uc_products.vid 
LEFT JOIN users users ON users.uid = node.uid 
LEFT JOIN files ON files.fid = cp.field_product_image_1_value 
LEFT JOIN content_type_product_tags ct ON ct.field_product_product_id_value = cp.vid
WHERE 
    (
    node.status <> 0
    ) 
    AND 
        (
        ct.field_product_tag_id_value = 478
        ) 
    AND 
        (
        cp.field_deleted_value <> 1
        ) 
    AND 
        (
        cp.field_stock_level_value > 0
        ) 
    AND EXISTS 
        (
        SELECT scp.nid FROM content_type_store scp 
        LEFT JOIN node snode on snode.nid = scp.nid 
        LEFT JOIN users susers on susers.uid = snode.uid 
        WHERE susers.name = users.name 
            AND scp.field_shop_activated_value = '1' 
            AND scp.field_shop_suspended_value = '0'
        ) 
    ORDER BY cp.field_product_last_changed_value DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T18:42:40.463

在主表和连接表中添加索引将加快您的查询。

# c# - 不区分大小写的查询表达式

> ID：10985610
> 
> 赞同：3
> 
> 时间：2012-06-11T18:31:50.247
> 
> 标签：c#, dynamics-crm, dynamics-crm-2011, case-insensitive, query-expressions

是否可以使用不区分大小写的 ConditionExpression 构建查询？

```
ConditionExpression condition = new ConditionExpression() 
{ 
  AttributeName = "lastname", 
  Operator = ConditionOperator.BeginsWith, 
  Values = new ObservableCollection<object>() { searchName } 
}; 
```

在此示例中，我希望使用 searchName 进行搜索不区分大小写。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T22:34:20.620

我相信这是安装 CRM 期间选择的数据库排序规则的一个因素，而不是 QueryExpression 的一个功能。

全新安装期间的默认设置是`Latin1_General_CI_AS`. 您可以通过执行以下 sql 语句来检查您的：

```
SELECT DATABASEPROPERTYEX('OrganisationName_MSCRM', 'Collation') 
```

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2013-06-13T14:08:15.843

[您可以在http://crmonaroll.blogspot.in/2013/06/case-in-sensitive-search-in-mscrm-2011.html](http://crmonaroll.blogspot.in/2013/06/case-in-sensitive-search-in-mscrm-2011.html)找到正确答案

要在 MSCRM 2011 中进行不区分大小写的搜索，我们需要稍微调整一下查询，例如

```
 if (!String.IsNullOrEmpty(fieldname)) 
     query.Criteria.AddCondition("fieldname".ToLower(), ConditionOperator.Equal, fieldname.ToLower()); 
 EntityCollection col = service.RetrieveMultiple(query); 
```

在这里，我正在设置`ToLower()`实际起作用的模式名称，希望对您有所帮助。留下您的评论。

# c# - 未加载 SharePoint Web 部件图像

> ID：10985611
> 
> 赞同：0
> 
> 时间：2012-06-11T18:31:53.887
> 
> 标签：c#, sharepoint-2010, web-parts

我对 SharePoint 自定义 Web 部件有疑问。它已成功部署和激活，并且可以在许多经过测试的环境中运行，除了一个特定的环境，因此问题应该在 SharePoint 环境中的某个地方，而不是在 Web 部件本身。

当使用默认 SharePoint UI 将 Web 部件添加到该环境中的任何 SharePoint 页面时，可以添加它，但所有图像和其他资源都不可见。但是，它们已成功安装并存在于 SharePoint 文件存储库的 FEATURES 文件夹中。

我猜它与 SharePoint 配置、权限或其他东西有关，但不知道究竟是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T11:36:03.683

问题出在资源的错误 URL 中。在根站点中使用时：

**http://mysite/**

从 url 加载资源

**http://mysite/myresources/images/image1.jpg** ,

但是当在具有这样 URL 的站点上使用时

**http://mysite/sites/site2**

资源仍在从 URL 加载

**http://mysite/myresources/images/image1.jpg**

但预计将从以下位置加载：

**http://mysite/sites/site2/myresources/images/image1.jpg** ,

**解决方案**

解决方案是将 GlobalPath 添加到资源路径，而不是使用：

```
<img src="/myresources/images/image1.jpg" /> 
```

我们应该使用这个：

```
<img src=GlobalPath+"/myresources/images/image1.jpg" /> 
```

其中 GlobalPath 是这样计算的：

```
var GlobalPath = _spPageContextInfo.siteServerRelativeUrl;
if (GlobalPath == "/") {
    GlobalPath = "";
} 
```

希望这可以帮助某人。

# java - 什么可能导致 Netty 中的 java.lang.NegativeArraySizeException？

> ID：10985619
> 
> 赞同：2
> 
> 时间：2012-06-11T18:32:25.520
> 
> 标签：java, netty

我有一个配置了多个 ChannelHandler 的基于 Netty 的客户端。首先有一个 FrameDecoder （用于解码到达线路上的帧），然后有一个 ChannelHandler 应该做某些其他事情（但不是消息处理）。

我 `java.lang.NegativeArraySizeException`在第二个处理程序上看到了很多 - 这是因为 FrameDecoder 和第二个处理程序之间的某些东西无法正常工作吗？我经常从第一个解码器返回 ChannelBuffers.EMPTY_BUFFER。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T20:19:02.073

您是否可以检查您是否正在为每个通道（即每个创建的管道）创建一个 FrameDecoder 实例，而不是共享它的单个实例？

完成后，您可以发布管道工厂的代码吗？

# java - 如何创建特定大小的二进制文件？

> ID：10985621
> 
> 赞同：-2
> 
> 时间：2012-06-11T18:32:34.520
> 
> 标签：java, file

如何使用 Java 创建一个大小为 250KB 的二进制文件和另一个 1MB 的二进制文件？可能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T18:35:39.097

```
 new RandomAccessFile("file.file", "rw").setLength(1048576); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T18:35:52.580

```
FileOutputStream s = new FileOutputStream("a.bin");
byte[] buf = new byte[250*1024];
s.write(buf);
s.flush();
s.close(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-25T06:19:44.927

```
 public voidwriteFile(String path, int bytes) throws Exception {
    OutputStream outputStream = null;
    File f=null;
    try {
        f = new File(path + "/tmp.txt");
        f.createNewFile();
        byte[] buf = new byte[bytes];
        outputStream = new BufferedOutputStream(new FileOutputStream(f));
        outputStream.write(buf);
        outputStream.flush();
    } catch (Exception e) {
        throw new Exception();
    } finally {
        try {
            if(f!=null){
                f.delete();
            }
            outputStream.close();
        } catch (IOException e) {
        }
    }
} 
```

# php - 输入未发送到日志

> ID：10985622
> 
> 赞同：0
> 
> 时间：2012-06-11T18:32:38.733
> 
> 标签：php, forms, file, logging, request

所以这是一个简短的故事：我有一个包含用户输入的评论框（我想就像任何常规评论框一样）。我想将此用户输入发送到日志文件。问题是，这没有发生。

这就是我所拥有的：

```
 if (isset ($_REQUEST['saving'])) {
    $saving = $_REQUEST['saving'];
    if ($saving ==1) {
    $comments = $_POST['comment'];
        $file = "logfile.txt";

    $fp = fopen($file, "w") or die ("Couldn't open $file for writing!");
    fwrite($fp, $comment) or die ("Couldn't write values to file!");

    fclose($fp);
    echo "Saved to $file successfully!";
    }
} 
```

它发送的信息来自：

```
<textarea name="comment" cols="80" rows="10">
<?php echo $comment; ?>
</textarea><br> 
```

其中 $comment 是用户输入。我没有收到任何错误消息，但是当我打开 logfile.txt 时，它是空的。

任何帮助都会很棒。我真的被困住了。提前感谢所有建议:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T18:37:28.287

```
$comments = $_POST['comment']; 
```

应该

```
$comment = $_POST['comment']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T18:35:16.033

`fwrite($fp, $comment)`应该是`fwrite($fp, $comments)`。假设您在元素中`<textarea>`正确放置，这将起作用。`<form>`

:)

# ms-access - MS-Access VBA 神奇地转换 unicode 字符串？

> ID：10985624
> 
> 赞同：1
> 
> 时间：2012-06-11T18:32:45.193
> 
> 标签：ms-access, vba, unicode

首先，我承认不是 VB 专家，但我被要求检查我们的数据库系统，以处理我们应用程序的语言。问题是一些带重音的字符似乎在没有它们的情况下神奇地被转换了。

例如，在调用 Recordset.MoveNext 时，波兰语单词“przesunąć”将在记录字段中存储为“przesunac”。“Unicode 压缩”在该列上设置为 true，但我怀疑它是否相关。我试图找出是什么使这种神奇的转换，因为我不想要它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T14:04:34.047

Someone stated at [http://www.pcreview.co.uk/forums/no-unicode-dao-recordset-t1102041.html](http://www.pcreview.co.uk/forums/no-unicode-dao-recordset-t1102041.html) that " the Recordset contains correct data but that the Debugger window and Tooltips can't display Unicode strings". Interesting. Dumb, but interesting.

Fine, but why are the strings in ANSI in the file? Well, the next post in the same thread reads "If you want to write in Unicode with VBA, my feeling would be that you must write in binary mode; not in Text mode." This lead me to [http://accessblog.net/2007/06/how-to-write-out-unicode-text-files-in.html](http://accessblog.net/2007/06/how-to-write-out-unicode-text-files-in.html) where I got my final answer.

Case solved.

# objective-c - 在 GLKView 中添加 Michael Daley 的 openGL 粒子发射器

> ID：10985629
> 
> 赞同：0
> 
> 时间：2012-06-11T18:33:02.630
> 
> 标签：objective-c, ios, opengl-es, eaglview, particle-system

我尝试使用 Michael Daley 为他的[粒子设计师](http://particledesigner.71squared.com/)构建的伟大粒子发射器在 GLKView 中工作。我看到有两种方法可以到达那里：

1.  破解他伟大（但太旧）[教程](http://www.71squared.com/2009/05/iphone-game-programming-tutorial-8-particle-emitter/)中的代码，以便在 GLKView 中使用 iOS5.1
2.  付费并使用他的粒子设计器将粒子效果添加到 glkview

我尝试了 1\. 一整天，但独自结束并迷失在 openGL 的广阔土地上。我不知道从 GL-stuff 初始化如何或什么是重要的。

我移植了 Image、Texture2D、Common 和 ParticleEmitter 类，并在 GLKViewController 中实例化了它们，在 ParticleEmitter.m 的第 341 行以 EXC_BAD_ACCESS 结尾：

```
 // Now that all of the VBOs have been used to configure the vertices, pointer size and color
    // use glDrawArrays to draw the points
    glDrawArrays(GL_POINTS, 0, particleIndex); 
```

我不知道为什么或什么......

现在我考虑购买粒子设计器并尝试在 GLKViewController 及其 GLKView 中实现它。

有没有人可以帮助我解决 1./2\. 解决我的问题，将openGL 粒子发射器添加到基于视图的应用程序中？

谢谢！

编辑：删除了一些愚蠢的代码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T16:04:42.403

看起来[这个](https://github.com/71squared/GLKit_TD3D)可以帮助很多...... ;-)

我还在[这里](https://stackoverflow.com/questions/11030128/ios-opengl-particle-emitter-for-glkit)创建了一个新问题。

# c++ - 如何从 QString 中读取分号分隔的某些值？

> ID：10985631
> 
> 赞同：1
> 
> 时间：2012-06-11T18:33:08.007
> 
> 标签：c++, string, qt, parsing, kde

我正在使用 Qt/KDE 开发应用程序。在为此编写代码时，我需要读取一个 QString ，其中包含像 ( `;`delimited)这样的值

```
<http://example.com/example.ext.torrent>; rel=describedby; type="application/x-bittorrent"; name="differentname.ext" 
```

我需要将每个属性（如 rel、type 和 name）读入不同的`QString`. 到目前为止我采取的方法是这样的

```
if (line.contains("describedby")) {
        m_reltype = "describedby" ;
    }
    if (line.contains("duplicate")) {
        m_reltype = "duplicate";
    } 
```

也就是说，如果我只需要对属性的存在（而不是它的值）感到困扰，我将手动查找文本并设置属性是否存在。然而，这种方法对于“类型”和名称等属性的实际值需要存储在`QString`. 虽然我知道这可以通过在分隔符处拆分整个字符串`;`然后搜索属性或其值来完成，但我想知道是否有一种更清洁、更有效的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T18:46:23.770

> 我需要将每个属性（如 rel、类型和名称）读入不同的 QString。

是否保证该字符串始终是 URL？

> 我想知道是否有一种更清洁、更有效的方法。

不要重新发明轮子！您可以使用[`QURL::queryItems`](http://qt-project.org/doc/qt-4.8/qurl.html#queryItems)which 来解析这些查询变量并返回名称-值对的映射。

但是，请确保您的字符串是格式正确的 URL（这样`QURL`就不会拒绝它）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T18:50:18.810

据我了解，数据并不总是一个 URL。所以，

1：拆分字符串

2：对于每个子字符串，将标识符与值分开：

```
id = str.mid(0,str.indexOf("="));
value = str.mid(str.indexOf("=")+1); 
```

您还可以使用正则表达式：

```
regexp = "^([a-z]+)\s*=\s*(.*)$";
id = \1 of the regexp;
value = \2 of the regexp; 
```

# c# - 多次将 EF4 实体附加到上下文

> ID：10985639
> 
> 赞同：1
> 
> 时间：2012-06-11T18:33:44.250
> 
> 标签：c#, asp.net, entity-framework

因此，我正在开发一个将实体存储在 Session 变量中的现有应用程序，并且每次回发都尝试将其重新附加到新的上下文中。我并不特别关心这个实现，但现在重写它是不可能的。代码看起来像这样：

```
public partial class ReviewDetail
{
    DBContext context = new DBContext();

    public void Page_Load(object sender, EventArgs e)
    {
        if (!Page.IsPostBack)
        {
            int id = Convert.ToInt32(Request.QueryString["id"]);
            Session["Review"] = context.Reviews.FirstOrDefault(x => x.ReviewID = id);
        }
        else
        {
            Review review = Session["Review"] as Review;
            context.Attach(review);
        }
    }
} 
```

**这适用于初始页面加载和第一次回发。**但是，在随后的回发中，它失败并出现以下错误：

***具有临时 EntityKey 值的对象不能附加到对象上下文。***

奇怪的是（对我来说，无论如何）是当我在 VS 调试器中单步执行代码并检查 review.EntityKey 的属性时，IsTemporary 字段为假。

关于我应该如何解决这个问题的任何建议？我试过调用 .AttachTo("Reviews", review) 但我最终遇到了同样的错误。

到目前为止，我认为我知道的是，当我进行第一个 .Attach 调用时，它附加了“review”对象，但由于它是一个引用对象，它也修改了 Session 中的对象并向它添加了一个 EntityKey（我可能在这里我的术语或我的理解不正确——这对我来说是 EF 中的一个薄弱环节）。所以现在，在第一次回发之后，我的 Session 对象已经被“附加”了。第二次（当它失败时），它已经被附加了，所以它失败了？

我认为我在正确的轨道上，只是不确定如何从这里进行修复。理想情况下，我们不会这样做，但除非没有其他选择，否则可能不会在这里使用更正确的方法重写它。

任何建议表示赞赏。

**编辑：**我应该在有人回答之前提到这一点，但我无法在每次回发时返回数据库以获取评论。会话中的对象稍后会被修改，它的数据可能与数据库中的数据不同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T18:40:33.837

我会从您的会话变量中获取实体，并使用它的 ID 属性重新查询上下文，例如：

```
public partial class ReviewDetail
{
    DBContext context = new DBContext();

    public void Page_Load(object sender, EventArgs e)
    {
        if (!Page.IsPostBack)
        {
            int id = Convert.ToInt32(Request.QueryString["id"]);
            Session["Review"] = context.Reviews.FirstOrDefault(x => x.ReviewID = id);
        }
        else
        {
            Review review = Session["Review"] as Review;

            Review updateReviewFromContext = context.ApplyCurrentValues<Review>("Reviews", review);         
        }
    }
} 
```

这是一个简单的更改，并且您将整个对象存储在会话中有点无关紧要，但是如果您无法更改，这应该可以为您解决问题。

**更新**

请参阅：http: [//msdn.microsoft.com/en-us/library/dd487246](http://msdn.microsoft.com/en-us/library/dd487246)

这`ApplyCurrentValues`将从会话中获取您的更新`Review`并将其更新的属性应用于从上下文返回的实体。唯一的诀窍是你必须知道它`EntitySetName`是什么，在我的例子中是“评论”，但只要这不会改变它就可以被硬编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T19:09:22.257

这些问题通常是实体框架在附加对象时如何工作的结果。附加实体时，您将递归附加它引用的每个实体。例外情况具有误导性，因为我们自然会假设错误出在我们显式附加的实体上，而在许多情况下，问题出在隐式附加的实体上。

因此，我不确定您的代码片段的缩写程度，但您似乎正在尝试附加一个引用新创建实体的实体。

# ios - Safari/iOS 上的 HTML5 音频回调失败

> ID：10985640
> 
> 赞同：6
> 
> 时间：2012-06-11T18:34:01.807
> 
> 标签：ios, html, mobile, jquery-mobile, html5-audio

我已经构建了一个应用程序，旨在播放每个声音，因为第一个声音是通过使用“结束”事件完成的。

在我的初始版本中，每个声音都有自己的音频元素，结果如下：

```
 function play_next_audio(){
        speaker = $('audio#' + sounds[i++]).get(0);
        speaker.addEventListener('ended',play_next_audio);
        speaker.play();
   } 
```

这适用于所有桌面浏览器，包括 Safari，但不会超出 iOS 上的第一个字母。

我还尝试了一种不同的方法——一个单独的音频元素依次加载每个声音。在那里，我尝试绑定“结束”事件以及首先加载并绑定“canplaythrough”事件。在这两种情况下，即使在桌面 Safari 上它也无法正常工作——这次成功地播放了前*两个*字母。

这是孤立的测试：

[http://dev.connectfu.com:42001/app/test-sounds.html](http://dev.connectfu.com:42001/app/test-sounds.html)

请注意，audio.load() 被注释掉了几个地方 - 将其输入或输出似乎没有任何区别。

我究竟做错了什么？如何在 iOS 上播放一系列声音？非常感谢你的帮助！

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-12T14:47:57.167

**更新**截至 2017 年，在多种情况下，在 iOS 上的 Safari（或 Chrome）上不会触发 end 事件。更多信息可以在这里找到：[快到 2017 年了，iOS 上的 HTML5 音频仍然有问题](http://debuggerdotbreak.judahgabriel.com/2016/12/13/its-almost-2017-and-html5-audio-is-still-broken-on-ios/)。

* * *

我已经构建了一个 HTML5 音频播放器（[Chavah Messianic Radio](https://messianicradio.com)），它可以在 iOS 上的 Safari 上“工作”。

我所说的“有效”是指，它在 Apple 残缺的 iOS <audio> 实现中发挥了最大的作用。在撰写本文时，这包括 iOS 5。我已经在 iPhone 3 及更高版本以及 iPad 原版、iPad 2 和 iPad 3 上进行了测试。

以下是我的发现：

*   **在用户交互之前，Apple 不允许您在任何音频上调用 .play。**对我来说，这意味着检测 iOS，然后将音乐显示为暂停，直到用户单击播放。他们的理由是这会消耗数据和电池；但在实践中，它只会削弱网络应用程序并扼杀网络的发展。
*   **如果要播放连续的声音（一个接一个），请使用单个元素。**当需要播放下一个声音时，设置 existingAudio.src，然后调用 existingAudio.load()，然后调用 existingAudio.play()。这将允许您播放连续的声音。
*   **如果 Safari 在后台，则不会触发音频事件。**. 如果用户切换到不同的应用程序，音频将继续播放，但不会触发 .ended 事件。这意味着几乎不可能构建音乐播放器应用程序。

希望这可以帮助。

<[咆哮](http://debuggerdotbreak.wordpress.com/2012/06/12/apple-please-fix-html5-on-ios/)>

同时：**Apple，拜托，拜托，请在 iOS Safari 中给我们更好的 HTML5 支持**。这是你的行动项目，Apple：

1.  让 HTML5 音频在后台工作。
2.  支持OGG。
3.  支持预加载音频。
4.  支持并发音频。
5.  让我们在没有用户交互的情况下播放音频。

做这些事情，Apple，你将成为移动 HTML5 音频的行业领导者，每个人都会效仿你，你将再次引领潮流，Web 应用程序将在你的平台上完美运行，而在其他移动平台上则瘫痪. 是的，这些功能将使用数据和电池，但本机应用程序已经这样做了。停止破坏网络应用程序并成为领导者。**让 HTML5 <audio> 成为 iOS 上的一等公民。**

</rant>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T03:45:12.373

我不相信 iOS 中的音频或视频支持 .play() 方法。Apple 不喜欢在访问页面时自动播放视频或音频的想法。

这是有关跨平台 HTML5 音频支持状态的有用阅读：[http ://www.phoboslab.org/log/2011/03/the-state-of-html5-audio](http://www.phoboslab.org/log/2011/03/the-state-of-html5-audio)

# r - 使用 memisc、xtable 等将自定义行添加到 LaTeX 输出的 R 回归结果表中。

> ID：10985645
> 
> 赞同：3
> 
> 时间：2012-06-11T18:34:26.473
> 
> 标签：r, latex

学术论文中的回归结果表通常有一行描述估计模型的某些特征。例如，您可能有一个行名称：“模型包括单独的固定效应”，然后每个关联的单元格将有一个相应的是/否。

我的问题是，在使用 R 制作 LaTeX 表格的众多工具中是否有可能（参见[Tools for making latex tables in R](https://stackoverflow.com/questions/5465314/tools-for-making-latex-tables-in-r)）将表格生成函数传递到这样一行为了使这一点更具体，我在想象具有如下参数：

```
model.info.row <- list(name = "Fixed effects", values = c("Y", "N", "Y")) 
```

我已经阅读了 memisc mtable 和 toLaTeX 文档，并没有看到任何似乎能够做到这一点的东西——不确定其他包/方法，但这似乎是一个常见的用例，我怀疑有一些方法可以做到这个。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T23:40:37.573

You might try to add that new line(s) directly to the table you want to pass to e.g. `xtable`. Really lame example:

1.  Let us have some model:

    ```
    m <- lm(mtcars$hp ~ mtcars$wt) 
    ```

2.  Grab the table which is returned in `xtable` and other helpers:

    ```
    df <- as.data.frame(summary(m)$coefficient) 
    ```

3.  Add a new line with some values:

    ```
    df[3, ] <- c(sample(c('foo', 'bar'), 4, replace = TRUE)) 
    ```

4.  Update the rowname of your custom line:

    ```
    rownames(df)[3] <- 'FOOBAR' 
    ```

5.  Check out results:

    ```
    > df
                         Estimate       Std. Error             t value            Pr(>|t|)
    (Intercept) -1.82092177119464 32.3246158121787 -0.0563323561763288     0.95545056134944
    mtcars$wt    46.1600502824445 9.62530003926982    4.79569988406785 4.14582744107531e-05
    FOOBAR                    bar              foo                 bar                  bar 
    ```

6.  Or just call `xtable`:

    ```
    > xtable(df)
    % latex table generated in R 2.15.0 by xtable 1.7-0 package
    % Tue Jun 12 01:39:46 2012
    \begin{table}[ht]
    \begin{center}
    \begin{tabular}{rllll}
      \hline
     & Estimate & Std. Error & t value & Pr($>$$|$t$|$) \\ 
      \hline
    (Intercept) & -1.82092177119464 & 32.3246158121787 & -0.0563323561763288 & 0.95545056134944 \\ 
      mtcars\$wt & 46.1600502824445 & 9.62530003926982 & 4.79569988406785 & 4.14582744107531e-05 \\ 
      FOOBAR & bar & foo & bar & bar \\ 
       \hline
    \end{tabular}
    \end{center}
    \end{table} 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T22:01:02.277

我最终编写了一些 hacky R 代码（请注意，它仅适用于具有 sed、wc 和 awk 可用的系统），它更灵活，并且在 memisc 'mtable' 函数中运行良好，这是我生成 LaTeX 表的首选方式。基本上，您将表写入文本文件，然后使用 (1) 文件中要插入的行号 (2) 要插入的行和 (3) 文件名调用此函数您想要插入（请注意，此功能将覆盖您现有的文件）。代码是：

```
insert.note <-function(linenumber, line, file){
  num.lines <- as.numeric(system(paste("wc", file, "| awk '{print $1}'"), intern=TRUE))
  tmp <- tempfile()
  system(paste("head -n ", linenumber, file, "> ", tmp))
  sink(tmp, append=TRUE)
   cat(line)
   sink()
  system(paste("tail -n", num.lines - linenumber, file, ">>", tmp))
  system(paste("mv", tmp, file))
} 
```

作为辅助函数，此代码使用 mtable 的双列间距创建了一个有效的 LaTeX 行：

```
 create.note <- function(l, include.row.end = TRUE){
  n <- length(l)
  s <- ""
  i <- 1
  for(note in l){
    if(i < n){
      cap <- "&&"
    } else {
      if(include.row.end){
        cap <- "\\\\ \n "
      } else {
          cap <- " \n"
      }
    }
    s <- paste(s, note, cap)
    i <- i + 1
  }
  s
} 
```

include.row.end 参数是为了以防您想传递类似 "\midrule" 的东西并且不想得到额外的行。

# php - 请求头字段的大小超过服务器限制

> ID：10985647
> 
> 赞同：1
> 
> 时间：2012-06-11T18:34:28.153
> 
> 标签：php, json, header

我一次又一次地收到以下错误..我无法弄清楚出了什么问题！我所做的只是从developers.facebook.com 复制并粘贴代码，并更改了我为这些问题划掉的应用程序ID 和fb secrey 密钥！

错误是：

错误请求 **您的浏览器发送了此服务器无法理解的请求。请求头字段的大小超过服务器限制。推荐人/n**

代码如下：

```
 <?php
            define('FACEBOOK_APP_ID', 'xxxxx');
            define('FACEBOOK_SECRET', '2ab5cxxxxxxxxxx89a');

            function parse_signed_request($signed_request, $secret) {
              list($encoded_sig, $payload) = explode('.', $signed_request, 2); 

              // decode the data
              $sig = base64_url_decode($encoded_sig);
              $data = json_decode(base64_url_decode($payload), true);

              if (strtoupper($data['algorithm']) !== 'HMAC-SHA256') {
                error_log('Unknown algorithm. Expected HMAC-SHA256');
                return null;
              }

              // check sig
              $expected_sig = hash_hmac('sha256', $payload, $secret, $raw = true);
              if ($sig !== $expected_sig) {
                error_log('Bad Signed JSON signature!');
                return null;
              }

              return $data;
            }

            function base64_url_decode($input) {
                return base64_decode(strtr($input, '-_', '+/'));
            }

            if ($_REQUEST) {
              echo '<p>signed_request contents:</p>';
              $response = parse_signed_request($_REQUEST['signed_request'], 
                                               Facenook_Secret);
              echo '<pre>';
              print_r($response);
              echo '</pre>';
            } else {
              echo '$_REQUEST is empty';
            }
            ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T15:34:00.857

在以前工作的网站上进行一些代码更改后，我在 javascript 中执行一些 SHA2 哈希时遇到了同样的错误。Galaxy S3 上的默认 Android“Internet”浏览器显示此错误。Firefox 移动浏览器表现出不同的错误行为。我没有在代码中找出具体问题，而是去“互联网”应用程序的设置，清除缓存，清除所有*应用程序*数据，最终使这个错误消失了。Firefox 移动浏览器在刷新后自行更正。

# ruby-on-rails-3 - Rails 3 太阳黑子限制选定记录

> ID：10985649
> 
> 赞同：2
> 
> 时间：2012-06-11T18:34:28.973
> 
> 标签：ruby-on-rails-3, limit, sunspot

目前我正在使用 Sunspot 从多个表中进行选择。我限制选择的记录，条件是创建日期必须在过去 5 天内。但是，我想更进一步，将选择的记录数限制为 20？有没有办法用太阳黑子做到这一点？我没有做任何花哨的分组或任何事情。只需选择属于各种模型的记录并将它们显示在屏幕上。

我当前的代码：

```
@updates = Sunspot.search(Upload,Help, User...) do
      with(:created_at).greater_than(5.days.ago)      
      order_by(:created_at, :desc)
end 
```

[我尝试添加 Github 上自述](https://github.com/sunspot/sunspot "见限制")文件中指定的“限制”子句，但这产生了一个未定义的方法错误，可能是因为我正在执行全局太阳黑子搜索，而不是搜索特定模型。

错误代码：

```
@updates = Sunspot.search(Upload,Help, User...) do
          with(:created_at).greater_than(5.days.ago)      
          order_by(:created_at, :desc)
          limit(20)
end 
```

错误信息：

```
undefined method `limit' for #<Sunspot::DSL::Search:0x0000000790b8c8> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T20:30:35.883

“限制”方法适用于“组”。请参阅[关于组的自述文件部分](https://github.com/sunspot/sunspot#grouping)。Sunspot 提供了分页功能（顺便说一句，[与 kaminari gem](https://github.com/amatsuda/kaminari)一起工作就像一个魅力）。请参阅自述文件中[有关 solr 分页的部分。](https://github.com/sunspot/sunspot#pagination)具体来说，试试这个：

```
@updates = Sunspot.search(Upload,Help, User...) do
  with(:created_at).greater_than(5.days.ago)      
  order_by(:created_at, :desc)
  paginate page: 1, per_page: 20
end 
```

# java - 通过 odbc 驱动程序插入时出错

> ID：10985658
> 
> 赞同：0
> 
> 时间：2012-06-11T18:35:20.787
> 
> 标签：java, odbc

尝试插入 ms accses 的以下语句可能有什么问题

```
 insert into mytable("Submission","Applicants Email", 
              "Applicants - 1") 
   values("abc school district","stger@ers.net",
              "Incomplete") 
```

尝试通过 java odbc driver 执行时。我正进入（状态：

```
 java.sql.SQLException: [Microsoft][ODBC Microsoft Access Driver] Invalid bracketing of name '[stger@ers.net]'. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-12T14:59:03.830

访问值需要用单引号括起来，看来，这对我有用

感谢大家的时间。

# python - 命令行过滤一行文本中的单词

> ID：10985660
> 
> 赞同：0
> 
> 时间：2012-06-11T18:35:26.007
> 
> 标签：python, command-line, grep, filtering

如何使用命令行工具从一行文本中过滤掉一些单词？

例子：

```
line 1: All's Well That Ends Well
filter: That Well
output: Well That Well 
```

注意：过滤后仍然出现两次重复出现。

除了一行 GNU 实用程序之外，我还可以使用 Python 脚本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T18:39:01.950

您可以像这样发送（管道）文本`grep`：

```
echo "All's Well That Ends Well" | grep -o '\(That\|Well\)' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T18:44:20.203

添加`\b`以匹配单词边界。较长的单词（例如`Wellness`）将被拒绝。

```
echo "All's Well That Ends Well" | grep -o '\(\bThat\b\|\bWell\b\)' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T18:43:02.463

```
>>> l="All's Well That Ends Well"
>>> k=['Well','That']
>>> [w for w in l.split() if w in k] 
```

我如何使用 shell 脚本来做到这一点？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T18:46:28.240

这是一个想法：

```
line = "All's Well That Ends Well"
filter = "That Well"

print [word.lower() for word in line.split() if word.lower() in filter.split()] 
```

最后一行称为[list comprehension](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)，非常“pythonic”。split() 将任何字符串变成单词列表，其中列表中的每个项目由单词之间的空格确定。我添加了 lower() 以便它以小写形式返回单词，而忽略原始大小写。

# ios - 当开发者更改应用名称时，旧的是否可用？

> ID：10985677
> 
> 赞同：5
> 
> 时间：2012-06-11T18:36:35.377
> 
> 标签：ios, xcode, app-store

我编写了一个 iOS 应用程序，很想将其命名为“X”，但该名称已被使用。现有的应用程序不是很受欢迎，作者愿意付费重命名它。假设我们同意这样做，旧名称会立即可供所有人使用，还是 Apple 会在一段时间内将其视为不可用，也许永远？

如果旧名称永远被锁定，Apple 是否允许我购买他的整个应用程序（他愿意），然后使用相同的名称和应用程序 ID 发布完全不同的内容？我们可能还需要更改类别。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T19:33:24.263

是的。我已经做过几次了。我曾经拥有一个名为 Note To Self 的应用程序。有人向我提议重命名它以换取一笔不错的付款。（如果你好奇，他给我的钱比我在 1 年内为这个应用程序赚到的钱还多。所以我当然对这个提议很感兴趣！）我取下了我的应用程序，这个名字立即可用。当我们打电话时，其他开发人员能够立即注册它。（他已经登录到 iTunes Connect 并输入了姓名。他所要做的就是在我重命名或停用我的应用程序后按“继续”按钮）。

在尝试为我的其他应用程序集思广益时，我已经这样做了几次 - 只需重命名一个应用程序即可使旧名称立即可供其他任何人使用。

注意：我们所说的名称是 iTunes Connect 中显示的名称，也就是用户在 App Store 中看到的名称。你在 iOS 开发者中心的 Provisioning 工具中命名你的应用程序没有任何意义。

对于阅读本文的任何人，请不要通过蹲在您不打算使用的名称上来滥用这种灵活性。

希望这可以帮助。

# c# - 如何使用c#将多个整数参数传递到水晶报表中

> ID：10985678
> 
> 赞同：0
> 
> 时间：2012-06-11T18:36:35.737
> 
> 标签：c#, crystal-reports

我在 VS2008 中编写 c# 应用程序，它将使用一些报告。我的问题：如何将多个整数值作为一个参数传递以及如何使用它。我试试[这个](https://stackoverflow.com/a/841724/1447555)，但它只适用于数组中的第一个值（如单值参数）。我的 csharp 代码：

```
rprt.SetParameterValue("idpoddet", new int[] { 5, 6, 7 }); 
```

我的记录选择公式：

```
{PODDET.id} in {?idpoddet} 
```

感谢您的任何回复或建议。翁德罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T18:10:42.833

哦，我的错，我只是禁用了页面导航按钮，所以我没有看到我的报告中有更多页面 :)

# c# - WP7：样式列表框项目

> ID：10985679
> 
> 赞同：2
> 
> 时间：2012-06-11T18:36:40.780
> 
> 标签：c#, windows-phone-7, xaml

我是 Windows Phone 7 开发的新手。我需要创建一个与设置应用程序页面非常相似的页面。像这样的东西（但没有顶部的菜单和每个项目的潜台词）：（[来源：][[dotnetapp.com](http://dotnetapp.com/wp-content/uploads/2012/05/BadSettingsPage.png)][）]
[![](../Images/cc3622b0fc0ba580c95cdccb07f8c348.png)](https://i.stack.imgur.com/lWOWE.png)

到目前为止，我有一个包含项目的列表框，但是单击其中一个项目，项目颜色会发生变化，并且它不像设置应用程序那样具有“按下按钮”效果。

第一个问题是如何创建这种漂亮的按钮效果（注意按钮在按下时会根据点击的位置倾斜）。

我的第二个问题是关于不同样式的项目。listBox的`ItemsSource`定义如下：

```
List<string> firstList;
List<string> secondList;

public MainPage()
{
    ...
    List<string> lst = new List<string>();
    lst.AddRange(firstList);
    lst.AddRange(secondList);
    listBox1.ItemsSource = lst;
    ... 
```

我需要对项目进行不同的样式设置，无论它们来自`firstList`还是`secondList`，例如，如果项目来自`firstList`其颜色应该是蓝色。

我认为应该使用 来完成`StaticResource`，但我不确定。也许我需要以某种方式包装字符串，以便它有一个 getter 来定义它来自哪个列表。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T07:18:44.817

问题 1 已回答（见 William Mekanis 评论）

对于问题 2，你有一个大问题......你正在绑定一个字符串列表......没有改变来查看哪个项目来自哪个列表。我会为我的数据源列表创建类似于视图模型的东西。

类似（NotifyPropertyChanged 在这里被忽略，如果需要实现它并使用 ObservableCollection ;)）：

```
public class ListDataSourceViewModel
{
    public string Text {get; set;}
    public bool IsFromFirstList {get; set;}
} 
```

如果您有更多列表，您还可以使用枚举或其他任何列表标识符...

您为 DataSource 创建一个新列表，例如：

```
lst.AddRange(firstList.Select(item => new ListDataSourceViewModel 
     {
         Text = item, IsFromFirstList = true
     }
).ToArray());
lst.AddRange(secondList.Select(item => new ListDataSourceViewModel 
{
     Text = item, IsFromFirstList = false
}
).ToArray()); 
```

然后使用转换器为您的列表项创建一个数据模板，将文本绑定到文本块，并将文本块的字体颜色绑定到 IsFromFirstList 属性。

这段代码是从脑海中编写的，没有 VS...如果您可以毫无问题地复制粘贴，则不舒尔，但它应该给您这个想法；）如果您在创建数据模板和转换器方面需要帮助，请告诉我！

编辑：

我重新考虑了我的建议......使用转换器，特别是（潜在的）大型列表，不是一个好主意（从性能的角度来看）。在您的情况下，直接在视图模型中使用所需的颜色无论如何都不是问题。

我会改变

```
public bool IsFromFirstList {get; set;} 
```

至

```
public Color WhatEverColor {get; set;} 
```

在创建 VM 时根据需要进行设置，并将其绑定到您需要的任何位置。

希望能帮助到你！

# c++ - 记忆图像减少

> ID：10985690
> 
> 赞同：7
> 
> 时间：2012-06-11T18:37:10.843
> 
> 标签：c++, memory-management

我正在运行此代码：

```
#include <iostream>
#include <cstddef>

int main(int argc, char *argv[]){
    int a1=0, a2=0;
    int a3,a4;

    int b1=++a1;
    int b2=a2++;

    int*p1=&a1;
    int*p2=&++a1;

    size_t st;
    ptrdiff_t pt;

    int i=0;
    while(true){
        printf("i: %d",i++);
    }
    printf("\n\ni now is: %d\n",i);
    return 0;
} 
```

为什么我观察到图像内存（fiolet）如此减少： ![在此处输入图像描述](../Images/d15f6991a6242764177d9b1e9eca8e7f.png) 图例：

![在此处输入图像描述](../Images/0bcd08bb980aadf2f6d44e6beb1d30d9.png) 我做了这个通用的 Win32 项目，而不是 CLR。我更改了代码，所以我会看到 int 何时最终变为负数。现在 while() 是：

```
 int i=0;
    while(0<++i){
        printf("i: %d",i++);
    }
    printf("\n\ni now is: %d\n",i); 
```

很奇怪：请看看仅仅 30000 次迭代后发生了什么。为什么我们会在图像内存中看到这些波动？我现在可以看到这可能与 VMMap 本身有关，因为它仅在我选择“启动并跟踪新进程”时才会发生，而不是在“查看正在运行的进程”并指向运行从 VS2010 触发的 exe 时发生。这是“启动和跟踪”进程的屏幕： ![在此处输入图像描述](../Images/ccd5c1227ea12910409553391ba2dc44.png)

我还观察到大量的内存分页，这大致开始于图像的这种下降（这个分页几乎加速并迅速触发了 RAM 限制，我已将其设置为 2GB）： ![在此处输入图像描述](../Images/282cb5e27e59fc5a04829930e44abaa7.png) 这是一个仅“查看”的正在运行的进程（从 VS2010 运行） ： ![在此处输入图像描述](../Images/f6e671fbab87370d1b3033cd3caf1181.png)

所以也许这里发生了一些受.NET应用程序内存管理的问题？我仍在等待我的 int 跨越两个补码的边界。

好吧...我必须再次编辑：事实证明，正如之前所想的那样 - 当仅查看（未启动）进程时也会出现内存图像减少的效果。下面附上 10 分钟后相同过程的图片（仍在等待将 int 变为负数）： ![在此处输入图像描述](../Images/1e244eabfde52a291137e0b7e732de0e.png)

这是：

![在此处输入图像描述](../Images/b131e21b11aeccfc9378908852c866cb.png)

所以我机器上最大的正2补码是2 147 483 647，最小的负是-2 147 483 648，这样很容易验证：

```
#include <limits>
const int min_int = std::numeric_limits<int>::min();
const int max_int = std::numeric_limits<int>::max(); 
```

它给了我相同的结果：-2 147 483 648 和 2 147 483 647

回到开头，当我评论除了 while() 循环之外的所有内容时——同样的事情发生了：在进程运行大约 10 分钟后图像正在减少，所以不是无用的代码导致了这种情况。但是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T00:02:10.993

工作集很大程度上受操作系统的控制。您的代码所做的只是它在决定是否扩大或修剪您的工作集时考虑的一个因素。其他因素包括您的应用程序是否在前台，它的活跃程度，堆算法的贪婪程度，由于其他进程的需求而存在多少内存压力等。这是设计使然。

这些下降可能与 Windows 选择修剪您的工作集有关。由于最初加载的大部分代码可能只是用于初始化并且不参与循环，因此操作系统很容易根据 LRU 算法回收图像页面。

请注意，分配给图像大小的工作集并不是唯一被修剪的部分。

# web-services - 进行 REST 调用

> ID：10985700
> 
> 赞同：1
> 
> 时间：2012-06-11T18:38:27.363
> 
> 标签：web-services, rest, web-applications, struts2

我正在使用 Struts-2 框架来设计 Web 界面。API 已经在 scala 和 play 框架中实现。有没有办法可以使用 HttpURLConnection 或 HttpClient 在 jsp 中进行 REST 调用？如果是的话，有人可以给我一个例子吗？任何书籍或网站的任何参考也会有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T19:51:53.653

这是一个关于 main 方法的示例，但 jsp 应该类似：[RESTful Webservice does not handle Request Method proper](https://stackoverflow.com/questions/10903073/restful-webservice-does-not-handle-request-method-properly/10907075#10907075)。但是，我不确定我是否理解您为什么不能只使用表格发布/获取？

# java - 无法解析struts 2.3.4 哪个包和jar 中的ActionSupport 类？

> ID：10985708
> 
> 赞同：4
> 
> 时间：2012-06-11T18:39:13.373
> 
> 标签：java, struts2

我正在尝试运行该[示例](http://www.vaannila.com/struts-2/struts-2-example/object-backed-java-beans-example-1.html)，但 Eclipse 似乎无法解析 ActionSupport 类。谁能告诉我应该导入哪个包和jar？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T18:48:13.893

对于 struts 2.3.1.2 所需的 jar 是 ::xwork-core-2.3.1.2.jar。将其添加到您的类路径中。使用 struts2 附带的包检查您需要哪个版本的 xwork

**编辑::** 如果你的 classpath 中有 jar 。简单的 Ctrl+O（组织导入）。如果它给你选项。选择 *com.opensymphony.xwork2.ActionSupport；*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T18:42:18.427

完整路径是

```
com.opensymphony.xwork2.ActionSupport 
```

确保您安装了正确的软件包。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-30T12:30:24.457

如果您想检查其他一切是否正常，您可以尝试运行项目而不`com.opensymphony.xwork2.ActionSupport`

这样，示例代码将如下所示：

```
package org.apache.struts.helloworld.action;

import org.apache.struts.helloworld.model.MessageStore;

//import com.opensymphony.xwork2.ActionSupport;

public class HelloWorldAction  {
private MessageStore messageStore;

public String execute() {
    messageStore = new MessageStore() ;

    return "Success";
}

public MessageStore getMessageStore() {
    return messageStore;
}
} 
```

# c# - 在字符串中使用数组

> ID：10985716
> 
> 赞同：1
> 
> 时间：2012-06-11T18:39:44.150
> 
> 标签：c#, arrays, string

我想出了这个代码，它适用于老师想要的。计算空格，计算单词，进行子字符串搜索并单独计算字母并向您显示使用了哪些字母。

但我需要将其转换为数组方法而不是 600 行的 do while 循环。我真的不知道该怎么做。谁能给我意见？

```
using System;
using System.IO;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {

            int a = 0;
            int b = 0;
            int c = 0;
            int d = 0;
            int e = 0;
            int f = 0;
            int g = 0;
            int h = 0;
            int i = 0;
            int j = 0;
            int k = 0;
            int l = 0;
            int m = 0;
            int n = 0;
            int o = 0;
            int p = 0;
            int q = 0;
            int r = 0;
            int s = 0;
            int t = 0;
            int u = 0;
            int v = 0;
            int w = 0;
            int x = 0;
            int y = 0;
            int z = 0;

            int A = 0;
            int B = 0;
            int C = 0;
            int D = 0;
            int E = 0;
            int F = 0;
            int G = 0;
            int H = 0;
            int I = 0;
            int J = 0;
            int K = 0;
            int L = 0;
            int M = 0;
            int N = 0;
            int O = 0;
            int P = 0;
            int Q = 0;
            int R = 0;
            int S = 0;
            int T = 0;
            int U = 0;
            int V = 0;
            int W = 0;
            int X = 0;
            int Y = 0;
            int Z = 0;
            int readChar = 0;
            int word = 0;
            int lower = 0;
            int upper = 0;
            string inputString ="";
            char ch = ' ';
            string findString = "";
            int space = 0;
            int startingPoint = 0;
            int findStringCount = 0;

            Console.Write("Please enter a string: ");

            do{
                readChar = Console.Read();

                ch = Convert.ToChar(readChar);
                if (ch.Equals(' '))
                {
                    space++;
                }
                else if (Char.IsLower(ch))
                {
                    lower++;
                    if (ch.Equals('a')) 
                    {
                        a++;
                    }
                    else if (ch.Equals('b')) 
                    {
                        b++;
                    }
                    else if (ch.Equals('c')) 
                    {
                        c++;
                    }
                    else if (ch.Equals('d')) 
                    {
                        d++;
                    }
                    else if (ch.Equals('e')) 
                    {
                        e++;
                    }
                    else if (ch.Equals('f')) 
                    {
                        f++;
                    }
                    else if (ch.Equals('g')) 
                    {
                        g++;
                    }
                    else if (ch.Equals('h')) 
                    {
                        h++;
                    }
                    else if (ch.Equals('i')) 
                    {
                        i++;
                    }
                    else if (ch.Equals('j')) 
                    {
                        j++;
                    }
                    else if (ch.Equals('k')) 
                    {
                        k++;
                    }
                   else if (ch.Equals('l')) 
                    {
                        l++;
                    }
                    else if (ch.Equals('m')) 
                    {
                        m++;
                    }
                    else if (ch.Equals('n')) 
                    {
                        n++;
                    }
                    else if (ch.Equals('o')) 
                    {
                        o++;
                    }
                    else if (ch.Equals('p')) 
                    {
                        p++;
                    }
                    else if (ch.Equals('q')) 
                    {
                        q++;
                    }
                    else if (ch.Equals('r')) 
                    {
                        r++;
                    }
                    else if (ch.Equals('s')) 
                    {
                        s++;
                    }
                    else if (ch.Equals('t')) 
                    {
                        t++;
                    }
                    else if (ch.Equals('u')) 
                    {
                        u++;
                    }
                    else if (ch.Equals('v')) 
                    {
                        v++;
                    }
                    else if (ch.Equals('w')) 
                    {
                        w++;
                    }
                    else if (ch.Equals('x')) 
                    {
                        x++;
                    }
                    else if (ch.Equals('y')) 
                    {
                        y++;
                    }
                    else if (ch.Equals('z')) 
                    {
                        z++;
                    }
                }
                else if (Char.IsUpper(ch))

                {
                    upper++;
                    if (ch.Equals('A')) 
                    {
                        A++;
                    }
                    else if (ch.Equals('B')) 
                    {
                        B++;
                    }
                    else if (ch.Equals('C')) 
                    {
                        C++;
                    }
                    else if (ch.Equals('D')) 
                    {
                        D++;
                    }
                    else if (ch.Equals('E')) 
                    {
                       E++;
                    }
                    else if (ch.Equals('F')) 
                    {
                        F++;
                    }
                    else if (ch.Equals('G')) 
                    {
                       G++;
                    }
                    else if (ch.Equals('H')) 
                    {
                        H++;
                    }
                    else if (ch.Equals('I')) 
                    {
                       I++;
                    }
                    else if (ch.Equals('J')) 
                    {
                        J++;
                    }
                    else if (ch.Equals('K')) 
                    {
                        K++;
                    }
                    else if (ch.Equals('L')) 
                    {
                        L++;
                    }
                    else if (ch.Equals('M')) 
                    {
                       M++;
                    }
                    else if (ch.Equals('N')) 
                    {
                        N++;
                    }
                    else if (ch.Equals('O')) 
                    {
                        O++;
                    }
                    else if (ch.Equals('P')) 
                    {
                       P++;
                    }
                    else if (ch.Equals('Q')) 
                    {
                        Q++;
                    }
                    else if (ch.Equals('R')) 
                    {
                        R++;
                    }
                    else if (ch.Equals('S')) 
                    {
                       S++;
                    }
                    else if (ch.Equals('T')) 
                    {
                        T++;
                    }
                    else if (ch.Equals('U')) 
                    {
                        U++;
                    }
                    else if (ch.Equals('V')) 
                    {
                        V++;
                    }
                    else if (ch.Equals('W')) 
                    {
                        W++;
                    }
                    else if (ch.Equals('X')) 
                    {
                        X++;
                    }
                    else if (ch.Equals('Y')) 
                    {
                        Y++;
                    }
                    else if (ch.Equals('Z')) 
                    {
                        Z++;
                    }
                }

                if (((ch.Equals(' ') && (!inputString.EndsWith(" ")))||(ch.Equals('\r') && (!inputString.EndsWith(" "))))&&(inputString!=""))
                {
                    word++;
                }

                inputString = inputString + ch;

            } while (ch != '\r');

            Console.ReadLine();

            Console.WriteLine("Report on {0}",inputString);

            Console.WriteLine("# of spaces {0}",space);
            Console.WriteLine("# of lower {0}", lower);
            Console.WriteLine("# of upper {0}", upper);
            Console.WriteLine("# of word {0}", word);
            Console.WriteLine("UPPERCASE");
            if (A >= 1)
            {
                Console.WriteLine("A = {0}",A);
            }
            if (B >= 1)
            {
                Console.WriteLine("B = {0}",B);
            }
            if (C >= 1)
            {
                Console.WriteLine("C = {0}", C);
            }
            if (D >= 1)
            {
                Console.WriteLine("D = {0}", D);
            }
            if (E >= 1)
            {
                Console.WriteLine("E = {0}", E);
            }
            if (F >= 1)
            {
                Console.WriteLine("F = {0}", F);
            } if (G >= 1)
            {
                Console.WriteLine("G = {0}", G);
            }
            if (H >= 1)
            {
                Console.WriteLine("H = {0}", H);
            }
            if (I >= 1)
            {
                Console.WriteLine("I = {0}", I);
            }
            if (J >= 1)
            {
                Console.WriteLine("J = {0}", J);
            }
            if (K >= 1)
            {
                Console.WriteLine("K = {0}", K);
            }
            if (L >= 1)
            {
                Console.WriteLine("L = {0}", L);
            }
            if (M >= 1)
            {
                Console.WriteLine("M = {0}", M);
            }
           if (N >= 1)
            {
                Console.WriteLine("N = {0}",N);
            }
            if (O >= 1)
            {
                Console.WriteLine("O = {0}",O);
            }
            if (P >= 1)
            {
                Console.WriteLine("P = {0}",P);
            }
            if (Q >= 1)
            {
                Console.WriteLine("Q = {0}",Q);
            }
            if (R >= 1)
            {
                Console.WriteLine("R = {0}",R);
            }
            if (S >= 1)
            {
                Console.WriteLine("S = {0}",S);
            }
            if (T >= 1)
            {
                Console.WriteLine("T = {0}",T);
            }
            if (U >= 1)
            {
                Console.WriteLine("U = {0}",U);
            }
            if (V >= 1)
            {
                Console.WriteLine("V = {0}",V);
            }
            if (W >= 1)
            {
                Console.WriteLine("W = {0}",W);
            }
            if (X >= 1)
            {
                Console.WriteLine("X = {0}",X);
            }
            if (Y >= 1)
            {
                Console.WriteLine("Y = {0}",Y);
            }
            if (Z >= 1)
            {
                Console.WriteLine("Z = {0}",Z);
            }

            Console.WriteLine("LOWERCASE");
            if (a >= 1)
            {
                Console.WriteLine("a = {0}", a);
            }
            if (b >= 1)
            {
                Console.WriteLine("b = {0}", b);
            }
            if (c >= 1)
            {
                Console.WriteLine("c = {0}", c);
            }
            if (d >= 1)
            {
                Console.WriteLine("d = {0}", d);
            }
            if (e >= 1)
            {
                Console.WriteLine("e = {0}", e);
            }
            if (f >= 1)
            {
                Console.WriteLine("f = {0}", f);
            } if (g >= 1)
            {
                Console.WriteLine("g = {0}", g);
            }
            if (h >= 1)
            {
                Console.WriteLine("h = {0}", h);
            }
            if (i >= 1)
            {
                Console.WriteLine("i = {0}", i);
            }
            if (j >= 1)
            {
                Console.WriteLine("j = {0}", j);
            }
            if (k >= 1)
            {
                Console.WriteLine("k = {0}", k);
            }
            if (l >= 1)
            {
                Console.WriteLine("l = {0}", l);
            }
            if (m >= 1)
            {
                Console.WriteLine("m = {0}", m);
            }
            if (n >= 1)
            {
                Console.WriteLine("n = {0}", n);
            }
            if (o >= 1)
            {
                Console.WriteLine("o = {0}", o);
            }
            if (p >= 1)
            {
                Console.WriteLine("p = {0}", p);
            }
            if (q >= 1)
            {
                Console.WriteLine("q = {0}", q);
            }
            if (r >= 1)
            {
                Console.WriteLine("r = {0}", r);
            }
            if (s >= 1)
            {
                Console.WriteLine("s = {0}", s);
            }
            if (t >= 1)
            {
                Console.WriteLine("t = {0}", t);
            }
            if (u >= 1)
            {
                Console.WriteLine("u = {0}", u);
            }
            if (v >= 1)
            {
                Console.WriteLine("v = {0}", v);
            }
            if (w >= 1)
            {
                Console.WriteLine("w = {0}", w);
            }
            if (x >= 1)
            {
                Console.WriteLine("x = {0}", x);
            }
            if (y >= 1)
            {
                Console.WriteLine("y = {0}", y);
            }
            if (z >= 1)
            {
                Console.WriteLine("z = {0}", z);
            }
            Console.WriteLine();

            Console.Write("Please enter a substring ");
            findString = Console.ReadLine();

            if (findString.Length <= inputString.Length)
            {
                do
                {
                    if (inputString.IndexOf(findString, startingPoint) != -1)
                    {
                        findStringCount++;
                        startingPoint = inputString.IndexOf(findString, startingPoint) + findString.Length;
                    }

                } while (inputString.IndexOf(findString, startingPoint) != -1);
            }
            else
            {
                Console.WriteLine("Substring is too long!");
            }
            Console.WriteLine("The number of times that {0} is found in the text is {1}", findString, findStringCount);

            Console.ReadLine();

        }
    }
} 
```

* * *

```
using System;
using System.Collections.Generic;
using System.Text;
using System.IO;

namespace ConsoleApplication1
{
class Program
{
    static void Main(string[] args)
    {

        int[] counterArray = new int[123];
        string myString;
        int wordCounted = 0;
        int result = 0;
        //Prompt user and get value
        Console.Write("Please enter a string: ");
        myString =
        Console.ReadLine();
        //Word count
        for (int i = 1; i < myString.Length; i++)
        {

            if (char.IsWhiteSpace(myString[i - 1]))
            {

                if (char.IsLetterOrDigit(myString[i]) ||
                char.IsPunctuation(myString[i]))
                {

                    wordCounted++;

                }

            }

        }

        if (myString.Length > 2)
        {

            wordCounted++;

        }

        //White space count
        foreach (char countSpace in myString)
        {

            if (char.IsWhiteSpace(countSpace))
            {

                result++;

            }

        }

        //Display words and space count,
        Console.WriteLine("\nWORDS:\t\t{0}", wordCounted);
        Console.WriteLine("SPACES: \t{0}", result);
        for (int x = 0; x < myString.Length; x++)
        {

            int myValue = Convert.ToInt32(myString[x]);
            counterArray[myValue]++;

        }

        //Display uppercase letter count
        Console.WriteLine("\nUPPERCASE LETTERS: ");
        //Counting uppercase letter
        for (int y = 65; y < 91; y++)
        {

            if (counterArray[y] > 0)
            {

                Console.WriteLine("\t\t{0}:  \t{1}", Convert.ToChar(y), counterArray[y]);
            }

        }

        //Display lowercase letter count

        Console.WriteLine("LOWERCASE LETTERS: ");
        //Counting lowercase letter
        for (int z = 97; z < 123; z++)
        {

            if (counterArray[z] > 0)
            {

                Console.WriteLine("\t\t{0}:  \t{1}", Convert.ToChar(z), counterArray[z]);
            }

        }

        int startingPoint = 0;
        int findStringCount = 0;

        Console.Write("Please enter a substring ");
        findString = Console.ReadLine();

        Console.WriteLine("Press ENTER to exit...");

        Console.ReadLine();
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T18:55:46.963

这是一种使用字典和Linq的方法。（*编辑添加了大写的 linq 操作来填充 AZ 以补充 az*）：

```
Dictionary<char, int> myLetters = new Dictionary<char, int>();

Enumerable.Range(0,26)
          .Select( indx => (char)+('a' + indx))
          .Union( Enumerable.Range(0,26)
                            .Select( indx => (char)+('A' + indx)))
          .ToList()
          .ForEach( chr => myLetters.Add( chr, 0));

myLetters['a'] = 2;
myLetters['Z'] = 3;

myLetters.ToList()
         .ForEach( ml => Console.WriteLine("{0} : {1}", ml.Key, ml.Value));

/* Prints out
a : 2
b : 0
c : 0
...
Z : 3
*/ 
```

请注意，以上内容是出于学习目的，我实际上会一口气完成 myLetters 作业，其中包含可枚举的内容，例如：

```
Dictionary<char, int> myLetters =
      Enumerable.Range(0,26)
               .Select( indx => (char)+('a' + indx))
               .Union( Enumerable.Range(0,26)
                                 .Select( indx => (char)+('A' + indx)))
               .ToDictionary (letter => letter, letter => 0); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-11T18:53:27.873

理想的解决方案是使用 a `Dictionary<char,int>`，但如果作业特别需要一个数组，您可以使用字母字符的 ASCII 表示是串行的这一事实。即 A=65, B=66,...,Z=90 和 a=97, b=98,...,z=122。例如：

```
var uppercase = new int[26];
var lowercase = new int[26];

if( ch >= 'A' && ch <= 'Z' )
    uppercase[ch-'A']++;

if( ch >= 'a' && ch <= 'z' )
    lowercase[ch-'a']++; 
```

然后，当您打印出来时，您可以将 indeces 转换为 type `char`：

```
for( var i='A'; i<='Z'; i++ ) {
    Console.WriteLine( (char)i + " = " + uppercase[i-'A'] );
} 
```

我将把其余的实现留给你。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-11T18:46:18.550

恕我直言，获取字符数组的最简单方法是：

```
char[] alphaLower = "abcdefghijklmnopqrstuvwxyz".ToCharArray();
char[] alphaUpper = //same thing as above with uppercase letters; 
```

此时，您可以在循环内进行计算。像这样的东西：

```
foreach(char c in alphaLower)
{
    //possibly a nested foreach here to process each character of input against each char in the alphabet?
    //write your calculation to console
} 
```

看到上面用短短 20 行代码重写的内容，我不会感到惊讶。在下一次迭代中发布您的想法，我们将继续为您指明正确的方向。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-11T18:57:03.987

ASCII 空格对于大写字母是连续的，对于小型大写字母，大写字母 A 从十进制 65 开始。详情见[http://www.asciitable.com/](http://www.asciitable.com/)

您应该为 ascii 表 (127) 下部的所有字符分配一个数组 varcountingchars = new int[128];

然后你遍历字符串中的字符并在这个循环中做某事：countingchars[(byte)currentchar]++;

每当你遇到 (byte)currentchar == 32，你应该增加字数

当您遍历整个字符串时，从countingchars [32]中获取空格从65-90中获取大写字母从97-122中获取小写字母

希望这已经足够了。

我把它留给你把它很好地放入 c#

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-11T18:43:44.713

尝试使用哈希表...它们的键是字母，值是它出现的次数

if (ht.Contains({yourletter})) //将值加 1

```
 if (ht.ContainsKey(letter))
            ht[letter] = Convert.ToInt32(ht[letter]) + 1;
        else
            ht.Add(letter, 1); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-12T01:36:40.460

希望这对学习有帮助

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Text.RegularExpressions;

namespace HomeWork
{
    class Alphabets
    {
        static void Main(string[] args)
        {
            string sentence = null;
            string findString = null;
            int numericCount;
            int upperCount;
            int lowerCount;
            int specialCount;
            int countBlankSpace;
            int countWord;
            Console.Write("Please enter a string: ");
            sentence = Console.ReadLine();
            numericCount = Regex.Matches(sentence, @"\d").Count;
            upperCount = Regex.Matches(sentence, @"[A-Z]").Count;
            lowerCount = Regex.Matches(sentence, @"[a-z]").Count;
            specialCount = Regex.Matches(sentence, @"[!""£$%^&*())]").Count;
            countBlankSpace = new Regex(" ").Matches(sentence).Count;
            countWord = Regex.Matches(sentence, @"[\S]+").Count;
            Console.WriteLine("Report on {0}",sentence);
            Console.WriteLine("# of spaces {0}", countBlankSpace);
            Console.WriteLine("# of lower {0}", lowerCount);
            Console.WriteLine("# of upper {0}", upperCount);
            Console.WriteLine("# of word {0}", countWord);
            Console.WriteLine("# of Special Characters {0}", specialCount);
            Console.Write("Please enter a substring:");
            findString = Console.ReadLine();
            Alphabets.findSubString(findString, sentence);
            Console.WriteLine("\nLowercase Letters \n");
            Alphabets.lowerLetters(sentence);
            Console.WriteLine("\nUppercase Letters \n");
            Alphabets.upperLetters(sentence);
            Console.ReadLine();
        }
        public static void lowerLetters(string sentence)
        {
            int[] upper = new int[(int)char.MaxValue];
            // 1.
            // Iterate over each character.
            foreach (char t in sentence)
            {
                // Increment table.
                upper[(int)t]++;
            }

            // 2.
            // Write all letters found.
            for (int i = 0; i < (int)char.MaxValue; i++)
            {
                if (upper[i] > 0 &&
                char.IsLower((char)i))
                {
                    Console.WriteLine("Letter: {0}  = {1}",
                        (char)i,
                        upper[i]);
                }
            }
        }

        public static void upperLetters(string sentence)
        {
            int[] upper = new int[(int)char.MaxValue];
            // 1.
            // Iterate over each character.
            foreach (char t in sentence)
            {
                // Increment table.
                upper[(int)t]++;
            }

            // 2.
            // Write all letters found.
            for (int i = 0; i < (int)char.MaxValue; i++)
            {
                if (upper[i] > 0 &&
                char.IsUpper((char)i))
                {
                    Console.WriteLine("Letter: {0} = {1}",
                        (char)i,
                        upper[i]);
                }
            }
        }

        public static void findSubString(string findString, string sentence)
        {
            int findStringCount = 0;
            int startingPoint = 0;

            if (findString.Length <= sentence.Length)
            {
                do
                {
                    if (sentence.IndexOf(findString, startingPoint) != -1)
                    {
                        findStringCount++;
                        startingPoint = sentence.IndexOf(findString, startingPoint) + findString.Length;
                    }

                } while (sentence.IndexOf(findString, startingPoint) != -1);
            }
            else
            {
                Console.WriteLine("Substring is too long!");
            }
            Console.WriteLine("The number of times that {0} is found in the text is {1}", findString, findStringCount);
        }

    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-14T08:11:23.473

```
using System;
using System.Collections.Generic;
using System.Text;
using System.IO;

namespace ConsoleApplication1
{
class Program
{
    static void Main(string[] args)
    {

        int[] counterArray = new int[123];
        string myString;
        int wordCounted = 0;
        int result = 0;

        //Prompt user and get value
        myString = getStringMethod();

        //Word count
        wordCounted = countWordsMethod(myString, wordCounted);

        //White space count
        result = spaceCounterMethod(myString, result);

        //Display words and space count,
        displayCountMethod(counterArray, myString, wordCounted, result);

        //Display uppercase letter count
        displayUpperMethod();

        //Counting uppercase letter
        uppserCaseMethod(counterArray);

        //Display lowercase letter count

        displayLowerMethod();

        //Counting lowercase letter

        lowerCaseMethod(counterArray);

        Console.WriteLine("Press ENTER to exit...");

        Console.ReadLine();
    }

    private static void displayLowerMethod()
    {
        Console.WriteLine("LOWERCASE LETTERS: ");
    }

    private static void displayUpperMethod()
    {
        Console.WriteLine("\nUPPERCASE LETTERS: ");
    }

    private static void lowerCaseMethod(int[] counterArray)
    {
        for (int z = 97; z < 123; z++)
        {

            if (counterArray[z] > 0)
            {

                Console.WriteLine("\t\t{0}:  \t{1}", Convert.ToChar(z),         counterArray[z]);
            }

        }
    }

    private static void upp 
```

# jqgrid - 没有缓存的jqgrid分页

> ID：10985717
> 
> 赞同：0
> 
> 时间：2012-06-11T18:39:52.287
> 
> 标签：jqgrid, paging

我需要使用 jqgrid 进行滚动分页，每次用户滚动垂直条时我都会在其中查询数据库。

这可能与 jqgrid 吗？如果是这样，我想看一个简单的例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T17:51:48.643

[官方演示](http://trirand.com/blog/jqgrid/jqgrid.html)包含“3.6 版新增”/“真滚动行”和“3.7 版新增”/“虚拟滚动”下的示例。

# haskell - Haskell 代码错误 - 我不明白它的要求

> ID：10985718
> 
> 赞同：3
> 
> 时间：2012-06-11T18:39:55.457
> 
> 标签：haskell

第一次发帖，但这个网站对我帮助很大。

我正在努力学习 Haskell。

这是我被要求回答的问题。

编写一个函数，该函数接受长度对的列表（长度 >=2）并返回列表中第二个元素的第一个组件。因此，当提供 [(5,'b'), (1,'c'), (6,'a')] 时，它将返回 1。

我自己已经这样做了。

```
listtwo :: [([a],b)] -> [a]
listtwo [] = []
listtwo [(a,b)] = fst (head (tail [(a,b)])) 
```

我正在尝试获取*我相信的列表元组*列表，并从列表中的第二项返回第一个元素。我知道如果您取出 [(a,b)] 并将第二个 [(a,b)] 替换为问题中的列表，它可以正常工作。但是当我试图让这个函数适用于任何元组列表时。我得到错误。

我收到的错误

```
<interactive>:1:27:
No instance for (Num [a0])
arising from the literal `6'
Possible fix: add an instance declaration for (Num [a0])
In the expression: 6
In the expression: (6, 'a')
In the first argument of `listtwo', namely
  `[(5, 'b'), (1, 'c'), (6, 'a')]' 
```

所以我问是否有人可以帮助我解决错误并解释我做错了什么（不要给我答案，不能这样学习）。

感谢帮助，如果得到回答，可能会有更多问题。非常感谢您！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-11T18:45:55.473

您说您想要一个返回*列表第二个元素的**第一个组件*的函数。编写此函数的最佳方法是模式匹配。但首先，让我们考虑一下它的类型。

 *假设您想要一个 的元组列表`(Int,Char)`。这写为`[(Int,Char)]`。如果你想要一个任意类型的 2 元组的列表，你可以用类型变量替换类型`Int`和`Char`，所以你最终得到了 type `[(a,b)]`。

您的函数需要采用这种类型，并返回列表第二个元素的第一个组件。元组的所有第一个组件都有 type `a`，所以你的返回类型也必须是`a`。所以你的函数的类型签名是

```
f :: [(a,b)] -> a 
```

现在，我们如何编写这个函数？最好的方法是使用模式匹配。这是一种无需使用访问器（也称为 getter，如果您来自面向对象的背景）即可提取数据结构组件的简洁方法。假设我们有一个`g :: [a] -> a`返回列表第三部分的函数。你可以写

```
g :: [a] -> a
g xs = head (tail (tail xs)) 
```

但这看起来很讨厌。另一种方法是模式匹配。`[x,y,z]`可以通过`x : y : z : []`where构造一个包含三个元素的列表`x`，`y`并且`z`它们都是类型`a`（请记住，运算符`:`将项目添加到列表的前面）。所以我们可以写：

```
g :: [a] -> a
g (x : y : z : []) = z 
```

但是这样做有一个问题——它只适用于长度为 3 的列表，因为我们的模式说“匹配一个包含三个元素的列表和最后添加的空列表”。相反，我们可以使用 pattern `x : y : z : rest`，现在`rest`匹配列表的其余部分：

```
g :: [a] -> a
g (x : y : z : rest) = z 
```

我们的模式现在说“匹配三个元素的列表，然后是其他任何元素。” 事实上，我们可以让它变得更简单。我们不会使用 values `x`，`y`或者我们可以用 Haskell 模式（下划线）`rest`替换它们。`_`这匹配任何东西，并让我们保证我们不会使用该值：

```
g :: [a] -> a
g (_ : _ : z : _) = z 
```

我们如何使用它来解决您的问题？好吧，如果您有一个与`(w,x) : (y,z) : rest`您想要返回的模式匹配的列表`y`。所以你可以写：

```
f :: [(a,b)] -> a
f ( (w,x) : (y,z) : rest ) = y 
```

这将正常工作。但是，您根本不关心第一对，因此您可以替换`(w,x)`为`_`. 您也不关心第二个元组的第二个元素或列表的其余部分，因此您也可以将它们替换`_`为：

```
f :: [(a,b)] -> a
f ( _ : (y,_) : _) = y 
```

在 ghci 中检查：

```
ghci> f [(5,'b'),(1,'c'),(6,'a')]
1 
```

所以它的行为与您预期的一样。*

# vb.net - webbrowser 控制锚标记 vb.net winforms

> ID：10985719
> 
> 赞同：1
> 
> 时间：2012-06-11T18:40:03.260
> 
> 标签：vb.net, winforms, browser, anchor

我对有关锚标签的网络浏览器控制有疑问。是否可以在 vb.net 中以编程方式转到 webbrowser 控件中的锚标记？理想情况下，我想在 winform 表单上提供一个下拉组合框，并控制当用户从组合框中进行选择时用户转到 html 页面的哪个部分。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T18:41:43.607

未经测试，但您应该能够：

```
WebBrowser.Navigate("#someAnchor") 
```

# c# - 如何将打开的连接字符串与配置文件中的连接字符串进行比较

> ID：10985720
> 
> 赞同：1
> 
> 时间：2012-06-11T18:40:07.143
> 
> 标签：c#, connection-string

大家好，我想检查我打开的连接是否与配置文件中的连接字符串相同。

我正在尝试这样的事情：

```
if(con.ConnectionString == ConfigurationManager.ConnectionStrings["Con1"].ConnectionString); 
```

第一部分给我正确的价值，第二部分应该给我相同的字符串。

编辑：这是我的整个连接字符串，因为我不想用细节来打扰你：

```
if (DateTime.Now.Subtract(lastDBcheck).TotalSeconds > 10 && con.ConnectionString==ConfigurationManager.ConnectionStrings["Con1"].ConnectionString) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T18:42:30.420

在C `==`# 中用于比较字符串的值是正确的。

如果您的代码不起作用，则很可能是由于以下任一原因：

*   这些值实际上并不相同（可能有额外的空格或小的变化）。
*   你得到一个例外。

为了避免后一种情况，我建议您在取消引用之前检查您的对象是否不为空。

```
var con1 = ConfigurationManager.ConnectionStrings["Con1"];

if (con != null && con1 != null && con.ConnectionString == con1.ConnectionString) {
    // Connection strings are the same.
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T19:34:41.037

我认为这将解释您的问题：

```
The .NET Framework Data Provider for SQL Server does not persist or return 
the password in a connection string unless you set Persist Security Info to true. 
```

False 是默认值。

[http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.connectionstring(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.connectionstring(v=vs.100).aspx)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-11T18:42:26.313

比较字符串时，最好使用 String1.Equals(String2)。这将比较字符串的值。

# c# - MVC 持久化现有记录和新记录的混合集合

> ID：10985729
> 
> 赞同：1
> 
> 时间：2012-06-11T18:40:55.680
> 
> 标签：c#, jquery, asp.net-mvc-3, model-view-controller, collections

使用[Steve Sanderson 博客](http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/)中的方法，我有一个可以使用 jquery 动态添加的项目列表。

所以，我有一个从数据库加载的车辆列表（属于一个人）。当我点击保存时，这些项目通过标准 MVC 模型绑定机制进行绑定，我可以在 Person 对象上调用 Update。

当我动态添加一个新的车辆行时，问题就存在了。由于该车辆不属于初始列表，因此调用 Update 不会保留该新项目。但是，调用 Create 不起作用，因为我有需要更新的现有车辆。

有没有一种优雅的方式来处理这个问题，或者我是否需要遍历每辆车，检查它是否存在于数据库中，然后根据结果调用更新/编辑？

我在 MVC3 中使用 NHibernate 和 C#。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T12:03:33.067

您使用什么方法来生成实体的 ID？

如果它们是由 nhibernate 生成的，您不仅可以检查每辆车的 ID -

如果它为 null 或默认值（guid.empty、0 等，具体取决于您的 Id 的类型），那么它从未靠近您的数据库，需要插入。

如果它有一个 Id，那么它已经存在于您的数据库中并且需要更新。

# java - Java Swing：启用/禁用 JPanel 中的所有组件

> ID：10985734
> 
> 赞同：7
> 
> 时间：2012-06-11T18:41:13.990
> 
> 标签：java, swing, jpanel

我有一个 JPanel，其中包含一个 JToolbar（包括几个没有文本的按钮）和一个 JTable，我需要启用/禁用（使内部小部件不可点击）。我试过这个：

```
 JPanel panel = ....;
 for (Component c : panel.getComponents()) c.setEnabled(enabled); 
```

但它不起作用。是否有更好、更通用的解决方案来启用/禁用 JPanel 中的所有内部组件？

[从这里的示例http://docs.oracle.com/javase/tutorial/uiswing/misc/jlayer.html](http://docs.oracle.com/javase/tutorial/uiswing/misc/jlayer.html)开始，我已经使用 JLayer 部分解决了我的问题：

```
layer = new JLayer<JComponent>(myPanel, new BlurLayerUI(false));
.....
((BlurLayerUI)layer.getUI()).blur(...); // switch blur on/off

class BlurLayerUI extends LayerUI<JComponent> {
  private BufferedImage mOffscreenImage;
  private BufferedImageOp mOperation;

  private boolean blur;

  public BlurLayerUI(boolean blur) {
      this.blur = blur;
      float ninth = 1.0f / 9.0f;
        float[] blurKernel = {
          ninth, ninth, ninth,
          ninth, ninth, ninth,
          ninth, ninth, ninth
        };
        mOperation = new ConvolveOp(
                new Kernel(3, 3, blurKernel),
                ConvolveOp.EDGE_NO_OP, null);
        }

  public void blur(boolean blur) {
      this.blur=blur;
    firePropertyChange("blur", 0, 1);
   }

  @Override
  public void paint (Graphics g, JComponent c) {
      if (!blur) {
            super.paint (g, c);
            return;
        }

      int w = c.getWidth();
    int h = c.getHeight();

    if (w == 0 || h == 0) {
      return;
    }

    // Only create the offscreen image if the one we have
    // is the wrong size.
    if (mOffscreenImage == null ||
            mOffscreenImage.getWidth() != w ||
            mOffscreenImage.getHeight() != h) {
      mOffscreenImage = new BufferedImage(w, h, BufferedImage.TYPE_INT_RGB);
    }

    Graphics2D ig2 = mOffscreenImage.createGraphics();
    ig2.setClip(g.getClip());
    super.paint(ig2, c);
    ig2.dispose();

    Graphics2D g2 = (Graphics2D)g;
    g2.drawImage(mOffscreenImage, mOperation, 0, 0);
  }

  @Override
  public void applyPropertyChange(PropertyChangeEvent pce, JLayer l) {
    if ("blur".equals(pce.getPropertyName())) {
      l.repaint();
    }
  }

} 
```

我还有两个问题：

1.  在上面的链接中，事件仅与鼠标相关。如何管理键盘事件？

2.  如何创建“灰色”效果来代替模糊？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-06-11T19:42:38.100

它需要递归调用。

![禁用所有容器](../Images/d5765c795b1118087ce8a87589ad7c6f.png)

```
import java.awt.*;
import javax.swing.*;

public class DisableAllInContainer {

    public void enableComponents(Container container, boolean enable) {
        Component[] components = container.getComponents();
        for (Component component : components) {
            component.setEnabled(enable);
            if (component instanceof Container) {
                enableComponents((Container)component, enable);
            }
        }
    }

    DisableAllInContainer() {
        JPanel gui = new JPanel(new BorderLayout());

        final JPanel container = new JPanel(new BorderLayout());
        gui.add(container, BorderLayout.CENTER);

        JToolBar tb = new JToolBar();
        container.add(tb, BorderLayout.NORTH);
        for (int ii=0; ii<3; ii++) {
            tb.add(new JButton("Button"));
        }

        JTree tree = new JTree();
        tree.setVisibleRowCount(6);
        container.add(new JScrollPane(tree), BorderLayout.WEST);

        container.add(new JTextArea(5,20), BorderLayout.CENTER);

        final JCheckBox enable = new JCheckBox("Enable", true);
        enable.addActionListener(new ActionListener(){
            @Override
            public void actionPerformed(ActionEvent ae) {
                enableComponents(container, enable.isSelected());
            }
        });
        gui.add(enable, BorderLayout.SOUTH);

        JOptionPane.showMessageDialog(null, gui);
    }

    public static void main(String[] args)  {
        SwingUtilities.invokeLater(new Runnable(){
            @Override
            public void run() {
                new DisableAllInContainer();
            }
        });
    }} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-09-09T14:02:05.817

我使用了以下功能：

```
void setPanelEnabled(JPanel panel, Boolean isEnabled) {
    panel.setEnabled(isEnabled);

    Component[] components = panel.getComponents();

    for(int i = 0; i < components.length; i++) {
        if(components[i].getClass().getName() == "javax.swing.JPanel") {
            setPanelEnabled((JPanel) components[i], isEnabled);
        }

        components[i].setEnabled(isEnabled);
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-11T18:56:50.080

你可以覆盖整个`Container / JComponent`

1.  `GlassPane`默认情况下阻止 MouseEvents，但不是 Keyboard，需要使用 ToolKit 中的所有键事件

2.  `JLayer`(Java7) 基于`JXLayer`(Java6)

3.  看不到为什么不适合你的原因

![在此处输入图像描述](../Images/1d96b2ce9a77f0827374799df99b068b.png)

![在此处输入图像描述](../Images/71ab1f261140d2332a3d7bc1c2f62581.png)

![在此处输入图像描述](../Images/d4461890c272169d1e53859f05aa3f88.png)

```
import java.awt.Color;
import java.awt.Component;
import java.awt.Dimension;
import java.awt.GridLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JButton;
import javax.swing.JCheckBox;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.border.LineBorder;

public class AddComponentsAtRuntime {

    private JFrame f;
    private JPanel panel;
    private JCheckBox checkValidate, checkReValidate, checkRepaint, checkPack;

    public AddComponentsAtRuntime() {
        JButton b = new JButton();
        //b.setBackground(Color.red);
        b.setBorder(new LineBorder(Color.black, 2));
        b.setPreferredSize(new Dimension(600, 20));
        panel = new JPanel(new GridLayout(0, 1));
        panel.add(b);
        f = new JFrame();
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.add(panel, "Center");
        f.add(getCheckBoxPanel(), "South");
        f.setLocation(200, 200);
        f.pack();
        f.setVisible(true);
    }

    private JPanel getCheckBoxPanel() {
        checkValidate = new JCheckBox("validate");
        checkValidate.setSelected(false);
        checkReValidate = new JCheckBox("revalidate");
        checkReValidate.setSelected(true);
        checkRepaint = new JCheckBox("repaint");
        checkRepaint.setSelected(true);
        checkPack = new JCheckBox("pack");
        checkPack.setSelected(true);
        JButton addComp = new JButton("Add New One");
        addComp.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                JButton b = new JButton();
                //b.setBackground(Color.red);
                b.setBorder(new LineBorder(Color.black, 2));
                b.setPreferredSize(new Dimension(400, 10));
                panel.add(b);
                makeChange();
                System.out.println(" Components Count after Adds :" + panel.getComponentCount());
            }
        });
        JButton removeComp = new JButton("Remove One");
        removeComp.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                int count = panel.getComponentCount();
                if (count > 0) {
                    panel.remove(0);
                }
                makeChange();
                System.out.println(" Components Count after Removes :" + panel.getComponentCount());
            }
        });
        JButton disabledComp = new JButton("Disabled All");
        disabledComp.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                for (Component c : panel.getComponents()) {
                    c.setEnabled(false);
                }
            }
        });
        JButton enabledComp = new JButton("Enabled All");
        enabledComp.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                for (Component c : panel.getComponents()) {
                    c.setEnabled(true);
                }
            }
        });
        JPanel panel2 = new JPanel();
        panel2.add(checkValidate);
        panel2.add(checkReValidate);
        panel2.add(checkRepaint);
        panel2.add(checkPack);
        panel2.add(addComp);
        panel2.add(removeComp);
        panel2.add(disabledComp);
        panel2.add(enabledComp);
        return panel2;
    }

    private void makeChange() {
        if (checkValidate.isSelected()) {
            panel.validate();
        }
        if (checkReValidate.isSelected()) {
            panel.revalidate();
        }
        if (checkRepaint.isSelected()) {
            panel.repaint();
        }
        if (checkPack.isSelected()) {
            f.pack();
        }
    }

    public static void main(String[] args) {
        AddComponentsAtRuntime makingChanges = new AddComponentsAtRuntime();
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-15T09:00:21.640

@Kesavamoorthi 如果你想让它更通用：

```
void setPanelEnabled(java.awt.Container cont, Boolean isEnabled) {
    cont.setEnabled(isEnabled);

    java.awt.Component[] components = cont.getComponents();

    for (int i = 0; i < components.length; i++) {
        if (components[i] instanceof java.awt.Container) {
            setPanelEnabled((java.awt.Container) components[i], isEnabled);
        }
        components[i].setEnabled(isEnabled);
    }
} 
```

# php - 将 Magento API 购物车转移到 Magento Store 会话

> ID：10985735
> 
> 赞同：0
> 
> 时间：2012-06-11T18:41:33.883
> 
> 标签：php, magento

第一次使用 Magento，如果这是一个愚蠢的问题，很抱歉。

我有一个在 python 中使用 Magento API（获取产品列表、信息和购物车）的网站。我看到购物车有正确的 ID 和会话（似乎）。有没有办法在 Magento 商店转移这个购物车/会话？

我开始了一个新的模块/控制器/动作，从 API 接收购物车 id，但我无法弄清楚如何在不再次从磁电机调用 API 的情况下将产品从一个转移到另一个。

有人有线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T15:07:57.253

我没有找到正确的方法。但使用了一种解决方法。我在 Magento 控制器/动作中使用 Magento API 来手动传输产品。我不喜欢它，但这是我找到的唯一方法。

# macos - 在 MacOS 上控制拖放到 Emacs 中的行为

> ID：10985737
> 
> 赞同：2
> 
> 时间：2012-06-11T18:41:44.867
> 
> 标签：macos, emacs

我的 MacOS 版本的 Emacs 将文件的内容插入当前缓冲区，而不是将其作为新缓冲区打开。我希望它在文件拖放时打开一个新缓冲区，知道如何解决这个问题吗？

GNU Emacs 23.3.1 (x86_64-apple-darwin, NS apple-appkit-1038.35)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-12T03:30:03.603

升级到刚刚发布的 emacs 24.1，其拖放行为已根据您的需要进行了更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T14:22:42.377

您可以通过绑定设置拖放以执行任何您想做的事情`ns-drag-file`。当然，这将是不同平台上的不同活动。也许令人惊讶的是，您可以通过`C-h k`将文件拖动到 emacs 来找到它。

# c# - asp.net 图表颜色

> ID：10985739
> 
> 赞同：1
> 
> 时间：2012-06-11T18:41:49.557
> 
> 标签：c#, asp.net, colors, charts

如何设置 asp:chart 的网格/文本颜色？

我指的是网格线的颜色和 x 和 y 轴上文本的颜色？

基本上我希望下面的黑色网格和黑色文本显示为白色。 ![在此处输入图像描述](../Images/fcfe3d749ce9987b94960a66256d7d83.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T19:51:08.927

在您`ChartArea`需要设置 X 和 Y 轴颜色：

```
<ChartAreas>
   <asp:ChartArea Name="ChartArea1" >
       <AxisY>
          <MajorGrid LineColor="White" />
          <MajorTickMark LineColor="White" />
          <LabelStyle ForeColor="White" />
       </AxisY>
       <AxisX>
          <MajorGrid LineColor="White" />
          <MajorTickMark LineColor="White" />
          <LabelStyle ForeColor="White" />
       </AxisX>
   </asp:ChartArea>
</ChartAreas> 
```

有 和的`MajorGrid`选项。设置您的文本。`MinorGrid``StripLines``LabelStyle`

# database - 哪个数据库引擎最适合在 10M 行表上进行全文搜索？

> ID：10985740
> 
> 赞同：1
> 
> 时间：2012-06-11T18:41:51.577
> 
> 标签：database, full-text-search

我正在创建一个搜索引擎，需要在文本字段中搜索关键字（大约 300 个字，非结构化）。

我正在考虑 noSQL\MySQL+Sphinx，这里的性能影响至关重要。

我应该使用哪个数据库引擎？

# c# - 这个代码片段有什么问题？它给了我类型声明错误

> ID：10985741
> 
> 赞同：0
> 
> 时间：2012-06-11T18:41:53.713
> 
> 标签：c#, vb.net, code-conversion

我正在尝试将此代码转换为 VB，但它给了我这个错误。

转换错误：无法转换代码。细节：

-- 第 1 行第 8 列：无效的 TypeDecl

请检查原始代码中的任何错误，然后重试。

```
 public Exam GetExamByExamID(int ExamID)
                {
             Exam myExam = new Exam(0,"",0,"","");  
              for(Exam exam1 : ExamArray)
            if(Exam.ExamID==ExamID)
              {
                 myExam.ExamID = exam1.ExamID;
                 myExam.ExamTitle = exam1.ExamTitle;
                     myExam.CreditHours = exam1.CreditHours;
                     myExam.Description = exam1.Description;
                         myExam.PrerequisiteExam = exam1.PrerequisiteExam;

              }
                  return myExam; 
```

我将代码更改为此，但它仍然是相同的错误..

```
public Exam GetExamByExamID(int ExamID)
                    {
                 Exam myExam = new Exam(0,"",0,"","");  
                  for(Exam exam1 : ExamArray)
                if(Exam.ExamID==ExamID)
                  {
                     myExam.ExamID = exam1.ExamID;
                     myExam.ExamTitle = exam1.ExamTitle;
                         myExam.CreditHours = exam1.CreditHours;
                         myExam.Description = exam1.Description;
                             myExam.PrerequisiteExam = exam1.PrerequisiteExam;

                  }
                      return myExam;
                       } 
```

我究竟需要改变什么？请帮忙。

好的，我再次更改但同样的错误..它在第 1 行显示错误..

```
public Exam GetExamByExamID(int ExamID)
                    {
                 Exam myExam = new Exam(0,"",0,"","");  
                  for(Exam exam1 : ExamArray)
                if(exam1.ExamID==ExamID)
                  {
                     myExam.ExamID = exam1.ExamID;
                     myExam.ExamTitle = exam1.ExamTitle;
                         myExam.CreditHours = exam1.CreditHours;
                         myExam.Description = exam1.Description;
                             myExam.PrerequisiteExam = exam1.PrerequisiteExam;

                  }
                      return myExam;
                       } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T18:46:08.920

我认为您应该发布整个课程，而不仅仅是片段。无论如何，我将首先挖掘它。

```
Exam.ExamID and other Exam.* 
```

你确定他们指的是一个变量吗？如果你指的是这个类的字段，你应该使用`this.ExamID`等等

如果不是，这很可能是您的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T19:19:10.453

您从代码转换器获得的错误是因为您没有包含要转换的类**Exam**，所以转换器错误是在第一次遇到未知类**Exam**时说“无效的类型声明” 。

这可能对你有用：

```
 Public Function GetExamByExamID(ExamID As Integer) As Exam
    Dim myExam As New Exam(0, "", 0, "", "")
    For Each exam1 As exam In ExamArray
        If exam1.ExamID = ExamID Then
            With myExam
                .ExamID = exam1.ExamID
                .ExamTitle = exam1.ExamTitle
                .CreditHours = exam1.CreditHours
                .Description = exam1.Description
                .PrerequisiteExam = exam1.PrerequisiteExam
            End With
            Return myExam
        End If
    Next
    Return Nothing
End Function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T18:44:18.500

这只是一个猜测，但请尝试更改

```
public Exam GetExamByExamID(int ExamID) 
```

至

```
public Exam GetExamByExamID(int id) 
```

随着变化

```
if(exam1.ExamID==ExamID) 
```

至

```
if(exam1.ExamID==id) 
```

# javascript - javascript在对象内存储键值

> ID：10985743
> 
> 赞同：1
> 
> 时间：2012-06-11T18:42:12.060
> 
> 标签：javascript

我有一些看起来像这样的 json 字符串：

```
var TheJson = "{Key:[array of objects]}" 
```

键实际上是一个日期，json 包含对象数组。我想将此对象添加到另一个对象`HistoryOfData`，有点像`.push`数组上的方法。基本上，我希望`HistoryOfData`对象具有键值嵌套对象，其中键是日期，值是数据数组。

如何将一个对象推入另一个对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T18:49:39.933

只需将它们设置在新对象中即可。例子：

```
var json1 = '{"06/08/2012": [{}, {"x": 1}, {"y": 2}, {"x": 3, "y": 4}]}';
var json2 = '{"06/10/2012": [{}, {"x": 5}, {"y": 6}, {"x": 7, "y": 8}]}';
var new_obj = {}, temp;

temp = JSON.parse(json1);
for(key in temp)
    new_obj[key] = temp[key];

var temp = JSON.parse(json2);
for(key in temp)
    new_obj[key] = temp[key];

console.log(new_obj); // Has two keys, each key is a date 
                      // and the values are Arrays of objects 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T18:47:17.357

```
for(var key in JSON.parse(TheJson)) {
  HistoryOfData[key] = TheJson[key]
} 
```

`JSON.parse`如果 TheJson 确实仍然是一个字符串，并且还没有变成一个 JS 对象，则需要它。

# ios - UITableViewCell 展开和折叠

> ID：10985746
> 
> 赞同：0
> 
> 时间：2012-06-11T18:42:21.013
> 
> 标签：ios, uitableview

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
 //case 1
 //The user is selecting the cell which is currently expanded
 //we want to minimize it back
 if(selectedIndex == indexPath.row)
 {
    selectedIndex = -1;
    [tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];

    return;
}

//case 2 
//First we check if a cell is already expanded.
//If it is we want to minimize make sure it is reloaded to minimize it back
if(selectedIndex >= 0)
{
    NSIndexPath *previousPath = [NSIndexPath indexPathForRow:selectedIndex inSection:0];
    selectedIndex = indexPath.row;
    [tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:previousPath] withRowAnimation:UITableViewRowAnimationFade];        
}

//case 3
//Finally set the selected index to the new selection and reload it to expand
selectedIndex = indexPath.row;
[tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];

} 
```

请注意案例 1 和案例 2 如何关联已经展开的行，而案例 3 是关于展开未展开的行。

展开和折叠都使用与 reloadRowsAtIndexPaths 函数相同的函数。

**我的问题是，一个切换按钮，当它展开时，再次运行该功能会折叠，当它折叠时，它会展开？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T19:05:00.383

将会发生的是，当您调用`reloadRowsAtIndexPaths:`表视图时，将通过调用您`tableView:cellForRowAtIndexPath:`在`UITableViewDataSource`. 您可以在那里返回一个单元格，该单元格使用该`selectedIndex`变量来决定它是否应该显示为展开或折叠（无论这对您的特定应用程序意味着什么）。它还会调用`tableView:heightForRowAtIndexPath:`你的`UITableViewDelegate`（是的，这在委托中很愚蠢）所以如果你的单元格高度发生变化，这个方法也应该返回一个取决于`selectedIndex`.

另外，我建议您只调用`reloadRowsAtIndexPaths:`一次，如下所示：

```
NSMutableArray* rows = [NSMutableArray arrayWithCapacity:2];
// Case 2
if(selectedIndex >= 0)
{
    NSIndexPath* previousPath = [NSIndexPath indexPathForRow:selectedIndex inSection:0];
    [rows addObject:previousPath];
}
// Case 3
selectedIndex = indexPath.row;
[rows addObject:indexPath];
[tableView reloadRowsAtIndexPaths:rows withRowAnimation:UITableViewRowAnimationFade]; 
```

# php - 在 foreach 中获取我的 PHP 数组中未定义的偏移量

> ID：10985755
> 
> 赞同：1
> 
> 时间：2012-06-11T18:43:03.837
> 
> 标签：php, arrays, foreach, break

我需要一些帮助，即使我认为我正在检查数组的长度并且我应该跳出循环，我仍然在我的 [else if ($value....] 行上收到警告。所以要么我遗漏了一些重要的东西，或者我一直盯着这个代码段太久，而且很明显。任何见解都将不胜感激。

```
 $count = count($filter); //Filter is an array
    if ($count > 1 ){
        //Compare values and generate a range to choose from
        $i = 1;
        foreach($filter as $value){
            //Break the loop if at the end of the array
            if ($i >= $count){
                //throw new exception($i .' '.$count);
                break;
            }
            //if the value is smaller then the next procceding value, because they are already in order of presidence,
            //add it to our range of potentials.
            else if($value < $filter[$i]->value){
                array_push($range, key($filter));
            }
        $i++;
        }           
    }else {
        return false;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T18:52:41.147

我怀疑您的阵列中存在间隙。试试这个：

```
$filter = array_values($filter); // this will remove any gaps in the array
$count = count($filter);
if ($count <= 1)
    return false;

for ($i = 0; $i < $count; $i++)
{
    if ($i != $count-1 && $filter[$i]->value < $filter[$i+1]->value)
        array_push($range, key($filter));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T19:20:15.350

您的数组可能有非数字键。然后试试这个：

```
foreach($filter as $key=>$value)
{
   // test for $filter[$key];
} 
```

或者你的 $filter 数组不包含对象，那么你不能使用`->`in

```
$filter[$key]->value 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T18:53:28.387

试试这个代码..不需要检查计数..

```
$range = array();
$i = 1;
foreach($filter as $value)
{
    if(isset($filter[$i]) && $value < $filter[$i]->value)
    {
        array_push($range, key($filter));
        $i++;
    }
    else
    {
        break;
    }
} 
```

# sql - 我的智力有太多的顺序，最大，子查询

> ID：10985767
> 
> 赞同：2
> 
> 时间：2012-06-11T18:43:37.673
> 
> 标签：sql, ruby-on-rails-3, postgresql, activerecord

我似乎无法解决这个查询。我确定它需要子查询，但我没有选择。我的大脑无法处理这个什么的。我需要帮助 ：）

## 小介绍

我有一个投注赔率网站。每隔 15 分钟，我会导入来自不同博彩公司的特定赛事的最新赔率（赢/平/输 - 或 1/X/2）。

赔率表的每一行都有`odds_type`('1', 'X' 或 '2')，`odds_index`即实际赔率，`bookmaker_id`和`event_id`。

但同样重要的是：`created_at`因为我需要处理**最新导入**的赔率。由于显而易见的原因，这非常重要。

## 设想

在下表中，我们正在使用`event_id`#1 的进口赔率。

## 需要查询

1.  从所有博彩公司中分离出最新的输入赔率`event_id`= 1（在本例中为 9 条记录）
2.  在该集合中，返回“1”、“X”、“2”的最高`odds_index`记录。`odds_type`

现在我更喜欢使用 Rails 范围来做到这一点，所以我可以使用`@event.best_odds1`and `@event.best_odds2`，但如果它有效，我会采取任何方法。5天以来一直在为此绞尽脑汁。需要解决它。

## 结果

查询后我得到 3 条记录，因此我可以显示“事件 #1 的最佳赔率”。

## 桌子

**博彩公司**

```
 ID  |  NAME
 ----------------------
 1   |  Unibet
 2   |  888
 3   |  Ladbrokes 
```

**活动**

```
 ID  |  NAME
 --------------------------
 1   |  Holland vs Denmark
 2   |  England vs Germany
 3   |  France vs Spain 
```

**赔率**

```
 ID  |  OT  |  OI  |  BI  |  EI  |  CREATED_AT
 ---------------------------------------------------
 (first import from the bookies)
 1   |  '1'  |  2.4  |  1  |  1  |  2010-06-10 15:00
 2   |  'X'  |  1.5  |  1  |  1  |  2010-06-10 15:00
 3   |  '2'  |  6.2  |  1  |  1  |  2010-06-10 15:00
 4   |  '1'  |  2.2  |  2  |  1  |  2010-06-10 15:58
 5   |  'X'  |  1.8  |  2  |  1  |  2010-06-10 15:58
 6   |  '2'  |  5.2  |  2  |  1  |  2010-06-10 15:58
 7   |  '1'  |  2.8  |  3  |  1  |  2010-06-10 16:56
 8   |  'X'  |  1.3  |  3  |  1  |  2010-06-10 16:56
 9   |  '2'  |  7.1  |  3  |  1  |  2010-06-10 16:56
 (last import from the bookies)
 10  |  '1'  |  2.5  |  1  |  1  |  2010-06-11 17:10
 11  |  'X'  |  1.3  |  1  |  1  |  2010-06-11 17:10
 12  |  '2'  |  6.4  |  1  |  1  |  2010-06-11 17:10
 13  |  '1'  |  2.1  |  2  |  1  |  2010-06-11 18.12
 14  |  'X'  |  1.2  |  2  |  1  |  2010-06-11 18:58
 15  |  '2'  |  6.2  |  2  |  1  |  2010-06-11 18:58
 16  |  '1'  |  1.8  |  3  |  1  |  2010-06-12 14:56
 17  |  'X'  |  2.3  |  3  |  1  |  2010-06-12 14:56
 18  |  '2'  |  5.1  |  3  |  1  |  2010-06-12 14:56 
```

*缩写列名以适应屏幕*

```
OT = odds_type
OI = odds_index 
BI = bookmaker_id 
EI = event_id 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T18:47:32.150

你可以使用`row_number()`两次：

```
select  *
from    (
        select  *
        ,       row_number() over (partition by OT order by OI desc) as rn2
        from    (
                select  *
                ,       row_number() over (partition by EI, BI, OT 
                                           order by created_at desc) as rn1
                from    Odds
                where   EI = 1 -- for event 1
                ) sub1
        where   rn1 = 1 -- Latest row per EI, BI, OT
        ) sub2
where   rn2 = 1 -- Highest OI per OT 
```

但是如果表继续增长，这将表现得很糟糕。您可以添加像 OddsHistory 这样的历史表，并将过时的 Odds 移到那里。当 Odds 表中只有最新的 Odds 时，您的查询会变得更加简单。

[SQL Fiddle 上的实时示例。](http://sqlfiddle.com/#!1/8d9c9/1/0)

# html - 这种布局似乎不适合通常的 CSS 技术

> ID：10985774
> 
> 赞同：0
> 
> 时间：2012-06-11T18:44:16.503
> 
> 标签：html, css, layout, stretch

只需检查这个小提琴：

[http://jsfiddle.net/9EJpu/25/](http://jsfiddle.net/9EJpu/25/)

**如何水平拉伸蓝色 div 100%**使其停靠在紫色右侧 div 上？

如果我设置 width:100% 它只是做一个 div 用来“换行”紫色 div 的东西。

我也试过 display:inline(-block) 没有什么能帮助紫色 div 保持不变

线作为蓝色 div。

该解决方案必须适用于 IE9。请不要使用 CSS3 hack。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T18:54:03.487

如果我正确解释您的问题，您需要更改几件事...

```
#wrap {
   width:100%;
    height:100%;
   background-color:green;
   position: relative;
}
#left_col {  
    overflow:auto;
   float:left;
   height:100%;
   margin-right: 100px;
    background-color:blue;
}
#right_col {   
   position: absolute;
   top: 0;
   right: 0;
   bottom: 0;
   width:100px;
   background-color:purple;
} 
```

您可以添加`position: fixed`到`#right_col`，但它会覆盖您的页脚。

这是一个演示：

[http://jsfiddle.net/xuBfe/](http://jsfiddle.net/xuBfe/) ​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T19:00:53.177

另一种可能的解决方案是利用更安全的`box-sizing`属性。

[http://tinkerbin.com/Vi1Rtt1T](http://tinkerbin.com/Vi1Rtt1T)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T18:49:11.133

使用 CSS3 相对安全的 calc 属性。-> [http://jsfiddle.net/joplomacedo/9EJpu/27/](http://jsfiddle.net/joplomacedo/9EJpu/27/)

不过，您可以使用更安全的属性，这似乎是使用现有标记最快的方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T18:56:55.557

**例子：**

[http://jsfiddle.net/hunter/9EJpu/37/](http://jsfiddle.net/hunter/9EJpu/37/)

* * *

要使主面板的内容具有适当的宽度，您可以在其中添加一个包装元素`left-col`

```
#left_col
{      
    overflow:auto;
    float:left;
    height:100%;
    width:100%;
    background-color:blue;
}

#left_col > *
{
    margin-right: 100px;
}

#right_col 
{
    right: 0;
    top: 0;
    position:fixed;
    z-index: 1000;
    height:100%;
    float:right;
    width:100px;
    background-color:purple;
}

#footer
{
    width: 100%;
    bottom: 0;
    left: 0;
    position: fixed;
    background-color:yellow;
    z-index: 2000;
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-11T18:52:24.300

使蓝色宽度为 100% 并用紫色的宽度填充右侧，紫色应该固定在右侧

编辑：

是的，我忘记了，好的，然后将一个 div 浮动到右侧，宽度为紫色（在蓝色内部）。只需要一个空间支架，这样东西就不会在下面跑

# html - 通过 XSL 在 HTML 表格中添加换行符

> ID：10985779
> 
> 赞同：3
> 
> 时间：2012-06-11T18:44:51.850
> 
> 标签：html, xml, xslt, html-table, line-breaks

我通过 XSL 将 XML 文件转换为 HTML。在我的 html 表中，我有一个列，我需要将单元格的内容拆分为我的一个 xml 元素标签中的每个条目的新行。

我不确定如何为此设置 xml 文件。这是我为我的 html 文件考虑的输出：

```
<info>
line1<br/>
line2<br/>
line3<br/>
line4
</info> 
```

以及在 xsl 部分对我不起作用的内容：

```
 <td>
    <xsl:for-each select="info">
    <xsl:value-of select="." /> <br/>
    </xsl:for-each>
    </td> 
```

我试过用 xml 包装这些行，`<ul>`但这`<li>`没有用。我认为这是我有错误的 xsl 部分。如果我`<br/>`在 value-of 语句之后放一个，它将输出所有内容，然后添加，`<br/>`但我当然想要`<br/>`每个条目。

我希望你能告诉我一种如何正确设置它的方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-12T02:58:44.450

**这种转变**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="info/*[position() > 1]">
  <br /><xsl:text>&#xA;</xsl:text>
  <xsl:value-of select="."/>
 </xsl:template>
</xsl:stylesheet> 
```

**当应用于以下 XML 文档时**（因为问题中没有提供源 XML 文档）：

```
<info>
  <t>line1</t>
  <t>line2</t>
  <t>line3</t>
  <t>line4</t>
  <t>line5</t>
</info> 
```

**产生想要的结果**（`<info>`故意不生成，因为这不是 HTML 元素）：

```
line1<br/>
line2<br/>
line3<br/>
line4<br/>
line5 
```

**注意 1**：此转换经过验证，可以使用我的所有 XSLT 1.0 和 2.0 处理器产生上述结果：MSXML3、MSXML4、MSXML6、.NET XslCompiledTransform、.NET XslTransform、Saxon 6.5.4、XML-SPY、Saxon 9.1.05 、XQSharp、AltovaXML2011（XSLT 2.0 的 XML-SPY）。

**注意 2**：如果您*真的*想将结果包装在一个`<info>`元素中，只需添加此模板：

```
 <xsl:template match="info">
  <info>
   <xsl:text>&#xA;</xsl:text><xsl:apply-templates/><xsl:text>&#xA;</xsl:text>
  </info>
 </xsl:template> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T20:56:56.330

我建议你这样做。xml 输入文件包含类似的结构

```
<info>
    <line>line1</line>
    <line>line2</line>
    <line>line3</line>
    <line>line4</line>
</info> 
```

xslt 包含以下内容：

```
<td>
    <xsl:for-each select="info/line">
        <xsl:value-of select="."/><br/>
    </xsl:for-each>
</td> 
```

这将导致（使用的输出方法`html`通常会使`br`结果文件中的元素不被关闭）：

```
<td>
    line1<br>
    line2<br>
    line3<br>
    line4<br>
</td> 
```

如果您需要删除决赛，`br`那么您将不得不添加更多的 xsl 代码。

# javascript - 当 navigateToURL 在 flex 中完成时的事件

> ID：10985781
> 
> 赞同：2
> 
> 时间：2012-06-11T18:45:03.597
> 
> 标签：javascript, flash, apache-flex, actionscript, navigatetourl

我正在使用`navigateToURL`从服务器下载文件。是否有可能知道何时`navigateToURL`完成，更像是浏览器下载对话框何时打开？

有时需要 5 秒才能完成，用户可能会感到困惑并开始像精神病患者一样单击下载按钮，这可能会导致打开多个下载对话框。

我想在它完成之前添加一些“请稍候”文本或其他内容（我已经有一个，我只需要知道何时停止）。
也许可以使用 javascript 来完成并从中获取信息`ExternalInterface`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T19:30:42.550

这有点疯狂，但我想不出任何其他方式：您可以将请求对象放入设置为弱引用键的字典中，然后检查是否删除了键。

但是，我不确定首先会发生什么，要么处理 SWF 本身，要么清理字典。考虑到函数的一次性性，对请求对象的引用也可能不会被删除，因为它被假定与整个 SWF 一起被删除。

我知道的另一件事是未捕获的错误事件将捕获来自的事件`navigateToURL`- 并不是很有帮助，但如果它不起作用，至少可以给你一个指示。

我能想到的更简单的一件事 - 只需在短时间内禁用按钮，例如 1-2 秒。如果它有效，没有人会看到延迟，如果没有，他们将无法经常按下它。

```
private var _requestStore:Dictionary = new Dictionary(true);
private var _timer:Timer = new Timer(10);
. . .
_timer.addEventListener(TimerEvent.TIMER, timerHandler);
. . .
public function openURL(url:String):void
{
    var request:URLRequest = new URLRequest(url);
    _requestStore[request] = true;
    _timer.start();
    navigateToURL(request);
}

private function timerHandler(event:TimerEvent):void
{
    var found:Boolean;
    for (var o:Object in _requestStore)
    {
         found = true;
         break;
    }
    if (!found) // the request got disposed
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T19:31:16.020

> 是否有可能知道 navigateToURL 何时完成，更像是浏览器下载对话框何时打开？

不，那里没有。一旦您将请求传递到浏览器；Flash Player 不再对其具有任何控制或访问权限。

您提到使用 ExternalInterface 作为可能的解决方案的一部分，但是您的 HTML/JavaScript 页面如何知道下载已经完成？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T19:34:42.373

navigateToURL 不会触发完整事件。尝试使用 Adob​​e 帮助文档中的此事件：

```
public function URLRequestExample() {
        loader = new URLLoader();
        configureListeners(loader);

        var request:URLRequest = new URLRequest("XMLFile.xml");
        try {
            loader.load(request);
        } catch (error:Error) {
            trace("Unable to load requested document.");
        }
    }

    private function configureListeners(dispatcher:IEventDispatcher):void {
        dispatcher.addEventListener(Event.COMPLETE, completeHandler);
        dispatcher.addEventListener(Event.OPEN, openHandler);
        dispatcher.addEventListener(ProgressEvent.PROGRESS, progressHandler);
        dispatcher.addEventListener(SecurityErrorEvent.SECURITY_ERROR, securityErrorHandler);
        dispatcher.addEventListener(HTTPStatusEvent.HTTP_STATUS, httpStatusHandler);
        dispatcher.addEventListener(IOErrorEvent.IO_ERROR, ioErrorHandler);
    } 
```

[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/URLRequest.html#includeExamplesSummary](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/URLRequest.html#includeExamplesSummary)

# scripting - Applescript：预期的行尾但找到号码

> ID：10985785
> 
> 赞同：0
> 
> 时间：2012-06-11T18:45:52.760
> 
> 标签：scripting, syntax, numbers, applescript, itunes

我正在尝试使用 applescript 在 iTunes 中自动选择一个菜单项。但是，每次我运行这个脚本时，我都会收到一条错误消息，上面写着“预期的行尾，但找到了数字，并指向“scrollarea 1”。我正在使用 Apple 的 UIElement 检查器来获取 GUI 元素的名称iTunes. 任何帮助将不胜感激。

这是我到目前为止所拥有的：

```
tell application "iTunes"
      activate
      delay 10
      tell application "System Events"
            key code 53
            tell outline 1 of scrollarea 1 of window 1
                 click menu 1
            end tell
      end tell
end tell 
```

好吧，我让它点击我需要它点击的东西。现在唯一的问题是它实际上并没有点击它，它只是返回 AXValue。我需要它来实际单击 iTunes 本身中的项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T20:25:45.790

```
activate application "iTunes"
tell application "System Events"
    tell process "iTunes"
        select row 15 of outline 1 of scroll area 2 of window "iTunes"
    end tell
end tell 
```

# .net - .NET DataTable 到 Matlab 矩阵

> ID：10985787
> 
> 赞同：1
> 
> 时间：2012-06-11T18:46:00.660
> 
> 标签：.net, oracle, matlab

在 Matlab 中，我使用 oracles 数据提供程序来查询 oracle 数据库。我想用结果填充一个 matlab 矩阵或二维数组。我是一个 .NET 人，但在 Matlab 中并不强。我们有使用 Matlab 但对 .NET 一无所知的分析师，因此我们陷入了困境。我们不想为他们拥有的 Matlab 数据库工具包提供 2k，这就是我们使用 .NET 从 Matlab 查询数据库的原因。

有什么想法可以轻松地将数据表从 .NET 转换为 matlab 中的矩阵或二维数组吗？请注意，我们使用的是 ODP.NET，因此不存在正常的 ADO.NET GetRows()。如果我们将 MS 的 OLE 用于 oracle，但 PC 是 Win 7 64 位并且 MS 在该平台上不再支持 oracle，这就是我将使用的。您必须使用 oracles ODP，这就是我们正在使用的。使用其他任何东西都不是 atm 的选项，因此解决方案需要牢记这一点。

目前我能够查询数据库，并遍历每一行/列，但在添加到矩阵时遇到问题。即因为我需要将数字或字符串都存储在矩阵中，并且在遍历每一列时我得到了转换类型，但由于某种原因 strcmp() 没有返回匹配项，即使它看起来应该：

```
for r = 1:rowCount
    for c = 1:colCount
        type = tbl.Rows.Item(r).Item(c).GetType().ToString();
        val = tbl.Rows.Item(r).Item(c);
        if strcmp(type,'System.Decimal') == 1
            m(r, c) = tbl.Rows.Item(r).Item(c).ToDouble();
        elseif strcmp(type, 'System.String' == 1) || strcmp(type, 'System.DateTime' == 1)
            m(r, c) = tbl.Rows.Item(r).Item(c).ToString();
        end
        m(r, c) = tbl.Rows.Item(r).Item(c).ToString();
    end
end 
```

考虑到这一点，我怎样才能让矩阵或二维数组接受任何类型的数据？如果你愿意的话，一个变种。我在做 m = zeros(rowCount, colCount); 但这似乎使它期望数字，这是有道理的，但我仍然希望同时保存数字和字符串，并让用户找出他们希望进行数学运算的列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T18:53:50.273

这条线是有问题的：

```
 strcmp(type, 'System.String' == 1) 
```

它不是测试`type`等于`System.String`，而是检查是否`'System.String' == 1`与 相同的字符串`type`。

我建议将其更改为

```
 isequal(type,'System.String'); 
```

或者更好的是，更喜欢`switch`，`if-elseif`因为它可以节省您的代码行：

```
 switch type
    case 'System.Decimal'
        m(r, c) = tbl.Rows.Item(r).Item(c).ToDouble();
    case {'System.String', 'System.DateTime')
        m(r, c) = tbl.Rows.Item(r).Item(c).ToString();
    otherwise
        assert(false);
    end 
```

发生这种情况是因为 switch 可以处理字符串参数，并正确比较它们。

# javascript - Twitter bootstrap .popover 不起作用

> ID：10985788
> 
> 赞同：5
> 
> 时间：2012-06-11T18:46:04.483
> 
> 标签：javascript, html, twitter-bootstrap

我正在尝试让 Twitter Bootstrap 的 .popover 工作，并且我已经在我的网站上复制了很多代码，但它告诉我 Object [object object] 在检查元素上没有方法“popover”。我在 bootstrap-tooltip.js 和 bootstrap-popover.js 之前导入了 jquery，这些文件确实显示在检查元素中。这是我试图为其弹出窗口的实际按钮：

```
<a href="#" id="example" class="btn btn-success" rel="popover" data-content="It's so simple to create a tooltop for my website!" data-original-title="Twitter Bootstrap Popover">hover for popover</a> 
```

这是javascript：

```
 $(function(){
            $('#example').popover();
    }); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-11T18:53:46.350

问题是 tooltip.js 需要在 popover.js 之前包含。

# php - file_get_contents, curl, get_headers, .. 什么都不返回

> ID：10985789
> 
> 赞同：1
> 
> 时间：2012-06-11T18:46:05.337
> 
> 标签：php, curl, file-get-contents, get-headers

`file_get_contents()`我正在尝试获取我第一次尝试使用和 curl的外部文件（youtube json feed）的内容。他们都没有给我任何回应。

在 php.ini`allow_url_fopen`中设置为 On。我还尝试关闭安全模式。

```
error_reporting('E_ALL');
ini_set('display_errors',1);
echo file_get_contents('http://gdata.youtube.com/feeds/api/playlists/760E7F6C9B5CD71E?v=2&alt=json'); 
```

可能出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T19:29:55.473

使用 curl 而不是 file_get_contents。像这样的东西：

```
$url  = 'http://gdata.youtube.com/feeds/api/playlists/760E7F6C9B5CD71E?v=2&alt=json';
$ch = curl_init();
$timeout = 5;
curl_setopt($ch,CURLOPT_URL,$url);
curl_setopt($ch,CURLOPT_RETURNTRANSFER,1);
curl_setopt($ch,CURLOPT_CONNECTTIMEOUT,$timeout);
$data = curl_exec($ch);
curl_close($ch);
echo $data; 
```

# java - SWT.Table 使用相同的代码（Eclipse RCP）表现不同

> ID：10985793
> 
> 赞同：1
> 
> 时间：2012-06-11T18:46:18.763
> 
> 标签：java, eclipse, swt, rcp

每隔一行在视图中的表格上着色。

我在编辑器上有两次同一张表，但它没有显示这种分离：

![](../Images/11bbd888eed101cd6b109778d93be39c.png)

我在编辑器中下表的代码：

```
table1 = new Table(c, SWT.BORDER | SWT.MULTI | SWT.FULL_SELECTION
            | SWT.V_SCROLL);
    TableLayout layout1 = new TableLayout();
    table1.setLayoutData(new GridData(SWT.FILL, SWT.FILL, true, true));
    layout1.addColumnData(new ColumnWeightData(20, 50, true));
    layout1.addColumnData(new ColumnWeightData(20, 50, true));
    layout1.addColumnData(new ColumnWeightData(20, 50, true));
    layout1.addColumnData(new ColumnWeightData(20, 50, true));

    table1.setLayout(layout1);
    table1.setLinesVisible(true);
    table1.setHeaderVisible(true);

    TableColumn colReihe = new TableColumn(table1, SWT.LEFT);
    colReihe.setText("Reihe");
    TableColumn colPlatz = new TableColumn(table1, SWT.LEFT);
    colPlatz.setText("Platz");
    TableColumn colPreis = new TableColumn(table1, SWT.LEFT);
    colPreis.setText("Preis");
    TableColumn colStatus = new TableColumn(table1, SWT.LEFT);
    colStatus.setText("verkauft");

    this.tableViewer2 = new TableViewer(table1);
    this.tableViewer2.setContentProvider(new ArrayContentProvider());
    this.tableViewer2.setLabelProvider(new ITableLabelProvider() {
            ....some more code here....
            this.toolkit.adapt(table1, true, true); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T20:41:15.433

我真的不明白你的问题。您是否希望屏幕截图右下方的表格看起来像左侧的表格？如果这是问题所在，请检查您是否也`toolkit.adapt(table, true, true);`使用左表调用，或者尝试使用右表删除该调用。在`FormToolkit`小部件上设置了很多颜色和样式。

# javascript - 为什么一个按钮会导致我的整个网页重新加载？

> ID：10985802
> 
> 赞同：6
> 
> 时间：2012-06-11T18:46:39.913
> 
> 标签：javascript, jquery, events

我有一个正在使用 jQuery 处理的网页。我的页面上的某些元素出现了不稳定的行为：每次单击页面上的按钮、任何按钮时，页面都会刷新。

该页面必须以某种方式运行一些代码，该代码在任何时候单击按钮时都会重新加载该页面。

我完全难以弄清楚代码在哪里绑定到点击处理程序，所以我想知道是否可以在运行时枚举附加到按钮的处理程序列表。

**更新：**阅读下面给出的答案后，我在页面中更改了一行：

```
<button id="btnSaveAndContinue" class="button" tabindex="290">Save and Continue</button> 
```

对此：

```
<input type='button' id="btnSaveAndContinue" class="button" tabindex="290" value='Save and Continue' /> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-11T18:50:52.873

这是按钮的默认行为。如果要更改它，请执行以下操作：

```
$("button selector").click( function(event) {
  event.preventDefault();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T18:52:18.777

`event.preventDefault()`您必须在处理程序中停止事件的默认行为`click`。

看到[这个](http://api.jquery.com/event.preventDefault/)

# php - 初始视图后显示/隐藏

> ID：10985806
> 
> 赞同：0
> 
> 时间：2012-06-11T18:46:46.113
> 
> 标签：php, codeigniter, cookies

完成某些过程后，用户会被定向到特定页面。在此页面上，每次查看后都应隐藏敏感信息。

我应该如何着手解决这个问题？任何资源和方向将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T18:54:53.907

Mayby 在他们被重定向之前，您设置了一个类似的会话变量。

重定向前：

```
session_start();
$_SESSION['showDetails']="someSecureString";
header("location: secure.php"); 
```

然后在安全页面上。

```
session_start();
if(isset($_SESSION['showDetails']) && $_SESSION['showDetails']=="someSecureString"){
     //Show details
     unset ($_SESSION['showDetails']);
}
session_destroy(); 
```

那也应该清除会话变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T19:03:28.557

使用会话并在显示会话后取消设置会话（在页面末尾）

# silverlight - WCF Ria 服务返回带有子列表的复杂对象

> ID：10985809
> 
> 赞同：0
> 
> 时间：2012-06-11T18:47:07.750
> 
> 标签：silverlight, wcf-ria-services

当我构建要由 WCF RIA 服务返回给 silverlight 的模型时，silverlight 客户端中不会显示列表属性。

班级：

```
public class Batch
{
    [DataMember]
    public DateTime Time { get; set; }

    [DataMember]
    public List<BasicInfoModel> Accepted { get; set; }

    [DataMember]
    public List<BasicInfoModel> UnAccepted { get; set; }
}

public class Batch
{
    [Key]
    [DataMember]
    public int Id { get; set; }

    [DataMember]
    public string Name { get; set; }
} 
```

在客户端时，似乎没有生成列表，例如，这是我加载的回调事件：

```
private void Callback(LoadOperation<Batch> loadOperation)
{
     //there is no such property as `Accepted`
     var acceptedList = loadOperation.Entities.FirstOrDefault().Accepted;
} 
```

难道我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T19:09:31.723

我想，你错过了 DataContract 属性，例如

```
[DataContract]
public class Batch
{
    [DataMember]
    public DateTime Time { get; set; }

    [DataMember]
    public List<BasicInfoModel> Accepted { get; set; }

    [DataMember]
    public List<BasicInfoModel> UnAccepted { get; set; }
} 
```

[http://msdn.microsoft.com/en-us/library/ms733127.aspx](http://msdn.microsoft.com/en-us/library/ms733127.aspx)

# html - Firefox中的谷歌网络字体模糊

> ID：10985811
> 
> 赞同：1
> 
> 时间：2012-06-11T18:47:15.420
> 
> 标签：html, text, fonts

我正在为一个项目使用谷歌网络字体，到目前为止没有任何问题。我在某些区域应用了文本阴影，并且对 Chrome 中的结果非常满意。我切换到FF，文字模糊得令人眼花缭乱。这适用于所有文本，无论是否有阴影。

这是谷歌网络字体问题还是其他问题？

![铬字体](../Images/45693c8623a0ed151c4027f210cbf347.png) 这是chrome的截图

![ff 字体](../Images/98c83a14a9cd48632c8cba43971c184f.png) ...和FF

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T08:13:05.717

我现在也有很多问题...

您可以尝试将`font-weight:normal;`或添加`font-weight:100;`到您的 CSS 中，但我发现这只是有时。

我的字体在 PC 上的 FF（甚至 IE）上都能正常工作，但在 MacOSX（雪豹）上使用 FF，它们会产生粗体/模糊效果:(

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T09:57:29.513

尝试在选项/首选项 > 高级中切换硬件加速。

在某处读到字体渲染随着硬件加速使用的增加而改变。

您也可以尝试在操作系统级别进行调整。转到系统首选项 > 外观 > 字体平滑和调整选项。由于 mac 的字体平滑技术，许多人发现字体模糊问题。

# c++ - C++ 中的“内置”函数

> ID：10985812
> 
> 赞同：2
> 
> 时间：2012-06-11T18:47:16.573
> 
> 标签：c++, function, built-in

我是 C++ 的初学者，所以如果答案很明显，它可能就是我正在寻找的那个。我正在阅读[此线程](https://stackoverflow.com/questions/286481/why-doesnt-a-swap-exchange-operator-exist-in-imperative-or-oo-languages-like?rq=1)中的第二个回复并感到困惑。

```
#include <algorithm>
#include <cassert>

int
main()
{
    using std::swap;
    int a(3), b(5);
    swap(a, b);
    assert(a == 5 && b == 3);
} 
```

我没有得到的是“这只是一个定义的函数。我的意思是，为什么它不是直接内置的”但是不需要`include`新的库，所以它不是内置的吗？是否会自动导入 std 库（如果是，为什么名称空间不会自动设置为 std）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T19:10:58.847

> 这只是一个定义的函数。我的意思是，为什么它不是直接内置的”但是没有必要包含一个新的库，所以它不是内置的吗？

根据定义，C++ 库是 C++ 的一部分。但是，它不是核心语言的一部分。C++ 是一门巨大的语言。让编译器立即了解语言的每一个角落和缝隙会使编译器变得庞大且加载缓慢。相反，其理念是使核心保持较小，并让程序员能够通过`#including`头文件扩展功能。指定他们需要什么。

> 为什么命名空间不会自动设置为 std？

这基本上会将各种非常常见的单词变成关键字。您不应该使用的单词列表（关键字、C 中的全局函数、POSIX 或 Microsoft 保留的单词……）已经很庞大了。将 C++ 标准库放在命名空间 std 中是一项功能。将所有这些名称放在全局命名空间中将是一个巨大的错误。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-11T18:56:22.707

> “这只是一个定义的函数。我的意思是，为什么它不是直接内置的”但是不需要导入新库所以它不是内置的吗？是否会自动导入 std 库（如果是，为什么名称空间不会自动设置为 std）？

好吧，`defined function`这意味着，很可能该函数已经预先编写并在*library*中定义，它不是直接内置的，可能是因为它是这样设计的；该语言中仅包含核心要素，其他所有内容都在库中，因此*程序员可以导入他们想要*的内容。

通过内置，通常它是一个关键字，例如`for`或`while`。

不，std 不会自动导入，因为它的设计目的是让程序员可以选择他们想要的命名空间，比如自定义命名空间或 std。自动拥有 std 不好的一个例子是：

假设你自动定义了 std，那么你想做`using namespace foo;`，现在如果 foo 也有 function `cout`，你会遇到一个大问题，比如说你想做这个；

```
// code above
cout << "Hello, World" << endl;
// code below 
```

编译器将如何使用哪个命名空间函数？默认值还是您的`foo`命名空间`cout`？为了防止这种情况，没有设置默认命名空间，由程序员决定。

希望有帮助！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-11T18:54:07.200

在您的代码中，您有以下行：

```
using std::swap; 
```

所以调用`swap`不需要`std::`。因为`assert`，它被定义为一个宏，所以它也不需要`std::`. 如果您没有使用`using`，那么除了宏之外，您将不得不使用`std::`来引用标准 C++ 库提供的函数和对象。

当您编译程序以创建可执行文件时，标准 C++ 库通常会链接到您的程序中。从这个角度来看，您可能会认为它是“内置的”。但是，术语“内置”通常意味着编译器将单词视为`swap`关键字，此处并非如此。`swap`是定义在`algorithm`头文件中的模板函数，`assert`是定义在`cassert`.

命名空间可以方便地按名称轻松划分软件的各个部分。所以如果你想定义你自己的`swap`函数，你可以把它放到你自己的命名空间中。

```
namespace mine {
    template <typename T> void swap (T &a, T &b) { /*...*/ }
} 
```

它不会与标准冲突，也不会与一些定义了没有命名空间的交换的库发生冲突。

# java - 从 CallBack 运行 Timer 时未调用 Looper.prepare()

> ID：10985814
> 
> 赞同：0
> 
> 时间：2012-06-11T18:47:24.013
> 
> 标签：java, android

我在这段代码中循环遍历对象的attaylist并为每个对象分配一个回调，但是当我开始使用CountDownTimer时，它崩溃了，因为**无法在未调用Looper.prepare（）的线程内创建处理程序**

```
 for ( final ABoxActor a : actList )
    {

        ActorDamageListener adl = new ActorDamageListener(){
            public void ActorDestroyCallback() {
                Log.e("KILLED", a.getBitmapName() );
            }

            public void ActorDamageCallback(float damage) {
                Log.e("DAMAGED "+String.valueOf(damage), a.getBitmapName() );
                a.setSpriteCurrentFrame(10);

                //// THROWS Can't create handler inside thread that has not called Looper.prepare()
                CountDownTimer t = new CountDownTimer(500,500){
                    @Override
                    public void onFinish() {
                        a.setSpriteCurrentFrame(15);
                    }
                    @Override
                    public void onTick(long millisUntilFinished) {
                    }}.start();
                /////////////////////////////////       

            }
        };

        a.setListener(adl); 
    } 
```

任何想法什么是解决这个问题的最简单方法？我可以以某种方式将此“循环器”添加到我的回调定义中吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T18:50:35.773

您可能在自己的线程中调用此代码。每个 thead 都需要附加一个 Looper，以便能够让处理程序回调到 ui 线程中。因此，您必须调用 Looper.prepare() 来设置您的 Looper，以便处理程序可以回调您的 ui 线程。

# php - 使用codeigniter的动态sql语句

> ID：10985817
> 
> 赞同：0
> 
> 时间：2012-06-11T18:47:32.260
> 
> 标签：php, sql, database, codeigniter, dynamic

我有一个包含 2 个表的数据库：玩家和玩家的统计数据，主键是 id。对于统计信息，PRIMARY KEY 是 id，但也有一个 p_id 的外键。

我正在尝试编写允许我动态返回某个玩家的统计数据的 sql 语句。

这就是我所拥有的。如果我改变`$p_id = 1`或类似性质的东西，那么我会得到结果，但是我希望动态地做到这一点。任何帮助，将不胜感激。

```
public function get_stats_for_player($p_id) {
    $this->db->select('*'); 
    $this->db->from('stats'); 
    $this->db->join('players', 'players.id = stats.p_id'); 
    $this->db->where('stats.p_id', $p_id); 
    $query = $this->db->get();
    return $query->result_array();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T18:59:27.310

你的模型函数和查询是正确的..你是如何调用这个函数的？确保将 $p_id 参数传递给函数

例如：-

```
$p_id = 1;
$players = $this->my_model->get_stats_for_player($p_id); 
```

# c# - 无需更改代码即可处理 XML Schema 更改

> ID：10985821
> 
> 赞同：0
> 
> 时间：2012-06-11T18:47:47.140
> 
> 标签：c#, xsd, linq-to-xml, linq-to-xsd

目前我们有一个 XML 模式，代码读取 xml 文件，验证模式并保存到数据库。将来会有架构更改，代码如何处理它们而不需要为新架构重写代码。

谢谢，

让我举个例子吧

```
<Products>
   <product id="1">
      <name> ABC </name>
      <desc> good one </desc>
   </product>
</products> 
```

XPath 映射配置

```
Table      Column     XPath
Product    id         //Products/product/id
Product    name       //Products/product/name
Product    desc       //Products/product/desc 
```

现在 C# 代码读取 id、name 和 desc 并根据 Mapping 配置生成插入语句

如果架构发生变化并且添加了新元素说价格，我们会将该价格添加到映射中，因此生成的新插入语句包括价格。

这行得通吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T18:52:48.290

立即想到的处理此类事情的方法是拥有一个已知的良好骨架 XML 模式，其中没有数据，让代码解析并学习该模式，然后让它在您提供的任何任意输入上运行。当 XML 模式更改时，只需让受信任的用户/管理员进入并更改已知良好的框架。

您应该确保您的数据库可以在没有任何额外刺激的情况下处理这些更改，并且您绝对应该至少有一些定期运行的测试，并在检测到问题时发出警报。像这样的“低维护”过程中最危险的因素之一是它们经常悄悄地失败，而且没有办法告诉它们已经坏了！

我有点担心我没有得到您的全部问题，因为您添加了一堆显然不在您的问题中的标签，但希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T18:53:13.380

如果 XML 数据的位置发生变化，除非您想从 XML 文件中抽象出废话（在文档中包含描述查找内容的元数据），否则您就不走运了。如果您的数据元素总是在同一个地方，您所要做的就是将您的 XSD 文件保存为一个单独的文件，并在必要时更改它以验证文档。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T19:39:29.550

我讨厌解析 XML 并将其加载到对象中。因此，您可以尝试以下方法。

创建一个表示您正在讨论的 XML 数据的 C# 对象。序列化那个 C# 类，并且中提琴你有一个强类型的 XML 模式。此外，如果将来您需要额外的架构更改，只需修改 C# 类并重新序列化即可。

这也消除了解析 XML 文档的需要（假设您在 CLR 中使用它），因为您可以简单地引用 C# 类，并且无需任何解析即可将其反序列化回内存中。

# batch-file - 在 sftp://user:pass@something@ipaddress:port 中是什么东西？

> ID：10985824
> 
> 赞同：0
> 
> 时间：2012-06-11T18:47:55.567
> 
> 标签：batch-file, ftp, automation, sftp, winscp

我正在阅读一些批处理脚本文件，试图找出某个文件被上传到（和从）的位置，并且初始打开命令看起来像（当然改变了）：

```
open sftp://user:pass@something@99.999.999.999:22 
```

但我无法确定`something`密码和 IP 地址之间的关系。

我查看了 WinSCP 的文档，但找不到任何指向答案的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-24T19:30:18.790

```
open sftp://user:pass@something@99.999.999.999:22 
```

用户名：`user`
密码：`pass@something`
sftp 地址：`99.999.999.999:22`

# c# - asp.net updatepanel 阻止点击

> ID：10985826
> 
> 赞同：0
> 
> 时间：2012-06-11T18:48:09.813
> 
> 标签：c#, asp.net, ajax, updatepanel

我有一个正在开发的 asp.net 4.0 Web 表单应用程序，我正在尝试修改更新面板的行为。

当前的行为是，当更新面板加载时，我可以单击链接，但在面板完成加载之前它们不起作用。因为面板需要很长时间才能加载，所以用户无法浏览页面，我需要想办法解决这个问题。

有没有人知道如何做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T19:11:26.827

更好的建议是使用此处所述的触发器：[如何将加载 UpdatePanel 内容推迟到页面呈现之后？](https://stackoverflow.com/questions/3877951/how-can-i-defer-loading-updatepanel-content-until-after-the-page-renders?lq=1)

可能有另一种方法可以在更新过程中隐藏面板，如下所述：[在 UpdateProgress 期间隐藏 UpdatePanel](https://stackoverflow.com/questions/2509266/hide-updatepanel-during-updateprogress?rq=1)

我还建议您学习[了解 ASP.NET AJAX UpdatePanel 触发器](http://www.asp.net/web-forms/tutorials/aspnet-ajax/understanding-asp-net-ajax-updatepanel-triggers)，因为这将帮助您创建更适合您的项目的解决方案。

# directx - 将 .fbx 模型加载到 directX 10

> ID：10985828
> 
> 赞同：0
> 
> 时间：2012-06-11T18:48:16.110
> 
> 标签：directx, mesh, fbx

我正在尝试将网格加载到 DirectX 10 中。我创建了一堆处理它的类，并允许我在主游戏类中只用一行代码调用网格。

然而，当我运行程序时，这就是呈现的内容：![在此处输入图像描述](../Images/d52511c8f6c917addd8797b9885d1a75.png)

在调试输出窗口中，不断出现以下错误：

> D3D10：错误：ID3D10Device::DrawIndexed：输入汇编器 - 顶点着色器链接错误：阶段之间的签名不兼容。原因是语义“TEXCOORD”是为输出级和输入级之间不匹配的硬件寄存器定义的。[执行错误#343：DEVICE_SHADER_LINKAGE_REGISTERINDEX] D3D10：错误：ID3D10Device::DrawIndexed：输入汇编器-顶点着色器链接错误：阶段之间的签名不兼容。原因是输入级需要语义/索引（POSITION,0）作为输入，但输出级不提供。[执行错误#342：DEVICE_SHADER_LINKAGE_SEMANTICNAME_NOT_FOUND]

问题是，我不知道如何解决这个问题。我正在使用的代码确实有效，我只是将所有这些代码带入了我的一个新项目。没有**构建错误**，并且仅**在游戏运行时出现**

.fx 文件如下：

```
float4x4 matWorld;
float4x4 matView;
float4x4 matProjection;

struct VS_INPUT
{
    float4 Pos:POSITION;
    float2 TexCoord:TEXCOORD;
};

struct PS_INPUT
{
    float4 Pos:SV_POSITION;
    float2 TexCoord:TEXCOORD;
};

Texture2D diffuseTexture;

SamplerState diffuseSampler
{
    Filter = MIN_MAG_MIP_POINT;
    AddressU = WRAP;
    AddressV = WRAP;
};

//
// Vertex Shader
//
PS_INPUT VS( VS_INPUT input )
{
    PS_INPUT output=(PS_INPUT)0;

    float4x4 viewProjection=mul(matView,matProjection);
    float4x4 worldViewProjection=mul(matWorld,viewProjection);

    output.Pos=mul(input.Pos,worldViewProjection);
    output.TexCoord=input.TexCoord;
    return output;
}

//
// Pixel Shader
//
float4 PS(PS_INPUT input ) : SV_Target
{
    return diffuseTexture.Sample(diffuseSampler,input.TexCoord);
    //return float4(1.0f,1.0f,1.0f,1.0f);
}

RasterizerState  NoCulling
{
    FILLMODE=SOLID;
    CULLMODE=NONE;
};

technique10 Render
{
    pass P0
    {
        SetVertexShader( CompileShader( vs_4_0, VS() ) );
        SetGeometryShader( NULL );
        SetPixelShader( CompileShader( ps_4_0, PS() ) );
        SetRasterizerState(NoCulling);
    }
} 
```

在我的游戏中，.fx 文件和模型被调用并设置如下：

加载着色器文件

```
 //Set the shader flags - BMD
    DWORD dwShaderFlags = D3D10_SHADER_ENABLE_STRICTNESS;

#if defined( DEBUG ) || defined( _DEBUG )
    dwShaderFlags |= D3D10_SHADER_DEBUG;
#endif
    ID3D10Blob * pErrorBuffer=NULL;

    if( FAILED( D3DX10CreateEffectFromFile( TEXT("TransformedTexture.fx" ), NULL, NULL, "fx_4_0", dwShaderFlags, 0, md3dDevice, NULL, NULL, &m_pEffect, &pErrorBuffer, NULL ) ) )
    {
        char * pErrorStr = ( char* )pErrorBuffer->GetBufferPointer();
        //If the creation of the Effect fails then a message box will be shown
        MessageBoxA( NULL, pErrorStr, "Error", MB_OK );
        return false;
    }

    //Get the technique called Render from the effect, we need this for rendering later on 
    m_pTechnique=m_pEffect->GetTechniqueByName("Render");

    //Number of elements in the layout 
    UINT numElements = TexturedLitVertex::layoutSize;

    //Get the Pass description, we need this to bind the vertex to the pipeline 
    D3D10_PASS_DESC PassDesc;
    m_pTechnique->GetPassByIndex( 0 )->GetDesc( &PassDesc );

    //Create Input layout to describe the incoming buffer to the input assembler
    if (FAILED(md3dDevice->CreateInputLayout( TexturedLitVertex::layout, numElements,PassDesc.pIAInputSignature, PassDesc.IAInputSignatureSize, &m_pVertexLayout ) ) ) 
    {
        return false;
    } 
```

模型加载：

```
m_pTestRenderable=new CRenderable();
//m_pTestRenderable->create<TexturedVertex>(md3dDevice,8,6,vertices,indices);

    m_pModelLoader = new CModelLoader();
    m_pTestRenderable = m_pModelLoader->loadModelFromFile( md3dDevice,"armoredrecon.fbx" );
    m_pGameObjectTest = new CGameObject();
    m_pGameObjectTest->setRenderable( m_pTestRenderable );

    // Set primitive topology, how are we going to interpet the vertices in the vertex buffer 
    md3dDevice->IASetPrimitiveTopology( D3D10_PRIMITIVE_TOPOLOGY_TRIANGLELIST );    

    if ( FAILED( D3DX10CreateShaderResourceViewFromFile( md3dDevice, TEXT( "armoredrecon_diff.png" ), NULL, NULL, &m_pTextureShaderResource, NULL ) ) )
    {
        MessageBox( NULL, TEXT( "Can't load Texture" ), TEXT( "Error" ), MB_OK );
        return false;
    }

    m_pDiffuseTextureVariable = m_pEffect->GetVariableByName( "diffuseTexture" )->AsShaderResource();
    m_pDiffuseTextureVariable->SetResource( m_pTextureShaderResource ); 
```

最后是draw函数代码：

```
//All drawing will occur between the clear and present 
    m_pViewMatrixVariable->SetMatrix( ( float* )m_matView );
    m_pWorldMatrixVariable->SetMatrix( ( float* )m_pGameObjectTest->getWorld() );

    //Get the stride(size) of the a vertex, we need this to tell the pipeline the size of one vertex 
    UINT stride = m_pTestRenderable->getStride();

    //The offset from start of the buffer to where our vertices are located 
    UINT offset = m_pTestRenderable->getOffset();
    ID3D10Buffer * pVB=m_pTestRenderable->getVB();

    //Bind the vertex buffer to input assembler stage -
    md3dDevice->IASetVertexBuffers( 0, 1, &pVB, &stride, &offset );
    md3dDevice->IASetIndexBuffer( m_pTestRenderable->getIB(), DXGI_FORMAT_R32_UINT, 0 );

    //Get the Description of the technique, we need this in order to loop through each pass in the technique
    D3D10_TECHNIQUE_DESC techDesc;
    m_pTechnique->GetDesc( &techDesc );

    //Loop through the passes in the technique 
    for( UINT p = 0; p < techDesc.Passes; ++p )
    {
        //Get a pass at current index and apply it 
        m_pTechnique->GetPassByIndex( p )->Apply( 0 );

        //Draw call
        md3dDevice->DrawIndexed(m_pTestRenderable->getNumOfIndices(),0,0);
        //m_pD3D10Device->Draw(m_pTestRenderable->getNumOfVerts(),0);
    } 
```

有什么我明显做错或遗漏的事情吗？花了 2 周时间试图锻炼我到底做错了什么，但无济于事。

一双新的眼睛可以对此提供任何见解，这将是很棒的。

# sql-server - 为标识列 sql server 设置新的“下一个”索引

> ID：10985829
> 
> 赞同：0
> 
> 时间：2012-06-11T18:48:18.717
> 
> 标签：sql-server

我有一个有两列的表，id 和 guid。Id 是标识列和主键。该表已经运行了一段时间，现在已达到 889 行。我想不时将 id 更改为更大的值，可以说

这应该将表的新起始索引设置为 1000

```
ALTER TABLE [mydatbase].[dbo].[tblTest]
ALTER COLUMN Id bigint Identity(1000, 1) 
```

然而这失败了。

有什么建议吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T18:51:19.793

只是认为这将是一个解决方案

```
DBCC CHECKIDENT('[mydatbase].[dbo].[tblTest]', RESEED, 1000) 
```

# javascript - 有没有一种优雅的方法来使用谷歌分析跟踪不同帐户下的多个域？

> ID：10985831
> 
> 赞同：0
> 
> 时间：2012-06-11T18:48:32.320
> 
> 标签：javascript, google-analytics, multiple-domains

我有一种情况，内容管理系统对具有不同域名的多个网站使用相同的模板，而我无法为每个网站制作单独的模板。但是，每个网站都需要使用谷歌分析单独跟踪。通过放入一些条件代码来跟踪每个域是否合适？这是否足够强大而不会破坏？有没有更优雅的方法来做到这一点？

```
<script type="text/javascript">
  var _gaq = _gaq || [];
  switch (location.hostname){
    case 'www.aaa.com':
        _gaq.push(['_setAccount', 'UA-xxxxxxx-1']);
        break;
    case 'www.bbb.com':
        _gaq.push(['_setAccount', 'UA-xxxxxxx-2']);
        break;
    case 'www.ccc.com':
        _gaq.push(['_setAccount', 'UA-xxxxxxx-3']);
        break;
  }

  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ga);
  })();

</script> 
```

需要明确的是，每个网站都是一个单独的域名，必须单独跟踪，而不是在一个分析配置文件上具有相同页面的不同域。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T18:52:35.253

传入一个 id 映射可以让你移除丑陋的`switch`

```
var ids = {
    'www.aaa.com': 'UA-xxxxxxx-1',
    'www.bbb.com': 'UA-xxxxxxx-2'
}
_gaq.push(['_setAccount', ids[location.hostname]]) 
```

# google-app-engine - 在 GWT+AppEngine 应用程序中预加载内容

> ID：10985832
> 
> 赞同：2
> 
> 时间：2012-06-11T18:48:34.363
> 
> 标签：google-app-engine, gwt

我有一个使用 GWT+AppEngine 构建的应用程序，用于自动创建测验：

1.  主网页有一个按钮“创建新测验”。

2.  单击该按钮会激活后端的服务，该服务会创建测验并将其返回。

3.  然后主页会显示测验。

测验创建需要很多时间，所以我想在用户回答测验时预加载测验：显示测验后，我在后端激活另一个服务，创建下一个测验并将其保存在局部变量。当用户再次点击“创建新测验”时，后端注意到有一个预先创建的测验，并立即返回。

这在我的计算机上的开发模式下运行良好，但在我部署到 AppEngine 时不起作用。

似乎后端有几个副本及其所有局部变量，因此“预加载”服务在一个副本上运行，“返回新测验”在另一个副本上运行，并且不使用预加载的测验。

是这样吗？我的后端有多少个副本？如果数字不变，我可以运行“预加载测验”几次，每个副本一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T19:05:05.863

这个数字不是恒定的，你不应该假设你的后端服务器可以以这种方式工作。

您必须使用提供的服务（如 memcache 和数据存储）在请求之间进行通信。您基本上应该假设每个请求都由一个完全不同的、全新的应用程序实例响应。普通内存中的变量在请求之间不能很好地工作。

# f# - 如何获取 F# 版本号？

> ID：10985834
> 
> 赞同：15
> 
> 时间：2012-06-11T18:48:45.130
> 
> 标签：f#

我知道 VS 2010 有 F# 2.0 和 VS 2012 - F# 3.0。但是我如何才能获得 F# 版本号，例如在 F# 交互中？是否有一些命令，例如： `#ver;;`？谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-11T19:01:25.433

当您在 VS 中启动 F# Interactive 窗口时，您会得到如下信息：

```
Microsoft (R) F# 2.0 Interactive build 2.0.5.0
Copyright (c) 2002-2010 Microsoft Corporation. All Rights Reserved.

For help type #help;;

> [Loading init.fsx]
> 
```

其中包括您需要的一切。

要打开 F# 交互式窗口，可以按：`Ctrl`+ `Alt`+ `F`。

**更新（2018 年 5 月 16 日）：**

VS 2017 中的信息格式似乎发生了一些变化。语言版本在最后：

```
Microsoft (R) F# Interactive version 10.1.0 for F# 4.1
Copyright (c) Microsoft Corporation. All Rights Reserved. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-23T17:14:22.823

它是用 Windows 的控制面板的程序和功能编写的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-05-08T04:16:04.280

虽然[https://stackoverflow.com/a/10985973](https://stackoverflow.com/a/10985973)的解决方案很好，但我更喜欢可以放入构建脚本的东西。

因此，我使用了一个虚拟 F# 项目并使用 msbuild 构建它。- 这将显示 fsc.exe 命令行路径。

走这条路，然后我不带任何参数地运行它，它会显示版本。

似乎没有更好的方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-06-27T08:35:19.123

在 MacOs/Linux 中，您使用`fsharpi`的是 Windows 中使用的包装器`fsi`，因此您可以从终端以与@pad 已经指出的相同方式获取版本：

```
>fsharpi

Microsoft (R) F# Interactive version 10.2.3 for F# 4.5
Copyright (c) Microsoft Corporation. All Rights Reserved.

For help type #help;;

> 
```

# matlab - matlab错误矩阵缩小错误

> ID：10985835
> 
> 赞同：0
> 
> 时间：2012-06-11T18:48:45.620
> 
> 标签：matlab, plot

以下是我的代码。我正在尝试用 3-D 绘制一些东西：

```
vp = 6000;
vs = 1.0e+03 .*[0.5000,    0.6094 ,   0.7188  ,  0.8281 ,   0.9375 ,   1.0469  ,  1.1562 ,   1.2656  ,  1.3750  ,  1.4844,    1.5938  ,  1.7031  ,  1.8125  ,  1.9219    ,2.0312  ,  2.1406,2.2500 ,   2.3594  ,  2.4688   , 2.5781    ,2.6875    ,2.7969   , 2.9062  ,  3.0156  ,  3.1250  ,  3.2344   , 3.3438   , 3.4531  ,  3.5625   , 3.6719    ,3.7812    ,3.8906];

% y= vp ./ vs;

y1= [12.0000,9.8462,    8.3478,    7.2453,    6.4000,    5.7313,    5.1892,       4.7407,    4.3636,    4.0421,    3.7647,    3.5229,    3.3103,    3.1220,    2.9538,    2.8029,2.6667    ,2.5430    ,2.4304    ,2.3273    ,2.2326    ,2.1453   , 2.0645    ,1.9896    ,1.9200    ,1.8551    ,1.7944    ,1.7376    ,1.6842    ,1.6340    ,1.5868    ,1.5422];

x = (0:0.2:2*pi); %# set a range for vale of x
[X, Y] = meshgrid(x, y);
p = sin(x);
theta= [0.0833,    0.1016,    0.1198,    0.1380 ,   0.1562 ,   0.1745   , 0.1927 ,   0.2109 ,   0.2292 ,   0.2474 ,   0.2656,    0.2839 ,   0.3021   , 0.3203,    0.3385  ,  0.3568,    0.3750,    0.3932,    0.4115,    0.4297 ,   0.4479 ,   0.4661  ,  0.4844  ,  0.5026 ,   0.5208 ,   0.5391  ,  0.5573  ,  0.5755    ,0.5938  ,  0.6120    ,0.6302   , 0.6484];
curl = ((theta .^ 2) - ((vs .* p) .^ 2) ) .^ 0.5

R_o = (1-2*(vs.^2)) ;
k_o = (1 -2*(vs.^2)./(R_o));
R_pv = (2*curl.^(-1)).*(k_o).*((sin(x)).^2);

mesh(x,R_pv,y1) 
```

问题在这里：

```
curl = ((theta .^ 2) - ((vs .* p) .^ 2) ) .^ 0.5; 
```

我收到以下错误：

```
??? Error using ==> times
Matrix dimensions must agree.

Error in ==> project1_Rpv at 11
curl= ((theta .^ 2) - ((vs .* p) .^ 2) ) .^ 0.5; 
```

尝试解决问题：

我有一种直觉，我弄乱了一些矩阵，但不确定在哪里。我确保我的矩阵是 1x1 并且长度相同。

**编辑**：感谢 Oli Charlesworth，我已经修复了`vs`. 现在我收到以下错误：

```
??? Error using ==> mesh at 80
Z must be a matrix, not a scalar or vector.

Error in ==> project1_Rpv at 18
mesh(x, R_pv, y1)   ## (x, y, z) 
```

我所有的矩阵都是 1x1 但我仍然遇到错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T21:52:13.660

你的第一个问题是`x`长度不一样`vs`，一个问题

```
x = linspace(0,2*pi, length(vs)); 
```

本来可以解决的。

你的第二个问题是如果`length(x) = n`和`length(R_pv) = m`那么`size(y1) = [m, n]` 它目前不是。如果你输入*`help mesh`*matlab 你应该明白为什么。

# jquery - Spring 3，Ajax 和 JQuery：为什么我的请求没有到达我的控制器？

> ID：10985842
> 
> 赞同：0
> 
> 时间：2012-06-11T18:49:37.960
> 
> 标签：jquery, ajax, spring-mvc

* * *

**回答：**

* * *

我的 Spring 3 Java webapp 是“极致”。我有这个用于我的 JQuery 调用以联系 Spring 3 Java 服务器端组件：

```
$.post("/test_ajax",  {state:"Alaska"}); 
```

我需要将“上下文根”（又名 webapp 名称）放在 URL 中：

```
$.post("/acme/test_ajax",  {state:"Alaska"}); 
```

* * *

我正在学习 Spring 3、Ajax 和 JQuery。我为自己制作了一个小型 Web 应用程序“ **acme** ”，以学习如何连接这 3 种技术。从我的日志语句来看，控制器**HelloController中的处理程序方法****getAddressList()**在JQuery POST 请求之后没有被调用。

 **我开始让我的 JQuery 调用为：

```
$.post("/test_ajax",  {state:"Alaska"}); 
```

下面引用了我的代码

任何线索将不胜感激。在此先感谢史蒂夫

**你好.jsp**

```
<html>
<head>
    <title>ACME JSP</title>
    <script language = "JavaScript" src = "../acme/js/jquery-1.7.js"></script>
    <script language = "JavaScript">
    function test(){
        $("#div1").replaceWith("Text Replaced With Javascript");
        $.post("/test_ajax",  {state:"Alaska"});
    }  
    </script>
</head>
<body>
    <h1>Hello.jsp: ${message}</h1>  

    <div id = "div1">
        Original Text
    </div>

    <input type="submit" value="Test" onclick="test()" /> 

</body>
</html> 
```

**HelloController.java：**

```
package com.acme.controller;

import javax.annotation.Resource;
import javax.servlet.http.*;

import org.springframework.stereotype.Controller;
import org.springframework.validation.*;
import org.springframework.ui.ModelMap;
import org.springframework.web.servlet.ModelAndView;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.bind.annotation.ResponseBody;
import org.springframework.web.bind.annotation.ModelAttribute;
import org.springframework.web.bind.annotation.SessionAttributes;

import org.apache.log4j.Logger;

@Controller
public class HelloController {
    private static final Logger logger  = Logger.getLogger(HelloController.class);

   @RequestMapping({"/","/hello"})
    public String home(ModelMap model) {

        logger.debug("Started...");
        model.put("message","Hello From The Spring 3.1 Controller!");
        return "hello";
    }

    @RequestMapping(value = "/test_ajax", method = RequestMethod.POST)
    public @ResponseBody String getAddressList( @RequestParam(required=true) String state,
                                                ModelMap model  ) {

        logger.debug("started...");
        logger.debug("State: " + state);
        String a_string  = "Test String From Spring And Ajax!";
        return a_string;
    }

}// end class HelloController 
```

**极致-servlet.xml：**

```
<beans xmlns="http://www.springframework.org/schema/beans"
  xmlns:context="http://www.springframework.org/schema/context"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:mvc="http://www.springframework.org/schema/mvc"
  xsi:schemaLocation="http://www.springframework.org/schema/mvc
        http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
        http://www.springframework.org/schema/beans     
        http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context 
        http://www.springframework.org/schema/context/spring-context-3.0.xsd">

  <context:component-scan base-package="com.acme.controller" />

  <mvc:resources mapping = "/**" location = "/"/>
  <mvc:annotation-driven/>

  <bean
    class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name = "prefix" value = "/jsp/"/>
    <property name = "suffix" value = ".jsp"/>
  </bean>

</beans> 
```

**网页.xml：**

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app  id="WebApp_ID" version="3.0"
   xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">

  <display-name>ACME Web Application</display-name>

  <servlet>
    <servlet-name>acme</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>

  <servlet-mapping>
    <servlet-name>acme</servlet-name>
    <url-pattern>/</url-pattern>
  </servlet-mapping>

  <!-- Help Find The Spring Config Files -->
  <listener>
    <listener-class>
                  org.springframework.web.context.ContextLoaderListener
    </listener-class>
  </listener>
  <context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/acme-servlet.xml</param-value>
  </context-param>

</web-app> 
```

**pom.xml：**

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.acme</groupId>
    <artifactId>acme</artifactId>
    <packaging>war</packaging>
    <version>1.0-SNAPSHOT</version>
    <name>ACME webapp</name>
    <url>http://maven.apache.org</url>

    <dependencies>

        <dependency>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
            <version>1.2.16</version>
        </dependency>

        <dependency>
            <groupId>javax.servlet.jsp.jstl</groupId>
            <artifactId>jstl-api</artifactId>
            <version>1.2-rev-1</version>
            <exclusions>
                <exclusion>
                    <groupId>javax.servlet.jsp</groupId>
                    <artifactId>jsp-api</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>javax.servlet</groupId>
                    <artifactId>servlet-api</artifactId>
                </exclusion>
            </exclusions>
        </dependency>

        <dependency>
            <groupId>org.glassfish.web</groupId>
            <artifactId>jstl-impl</artifactId>
            <version>1.2</version>
            <exclusions>
                <exclusion>
                    <groupId>javax.servlet.jsp</groupId>
                    <artifactId>jsp-api</artifactId>
                </exclusion>
                <exclusion>
                    <groupId>javax.servlet</groupId>
                    <artifactId>servlet-api</artifactId>
                </exclusion>
            </exclusions>
        </dependency>

        <!-- Spring 3.1.1 -->
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-core</artifactId>
            <version>3.1.1.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-web</artifactId>
            <version>3.1.1.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-webmvc</artifactId>
            <version>3.1.1.RELEASE</version>
        </dependency>

        <!-- Spring Security -->
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-core</artifactId>
            <version>3.1.0.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-config</artifactId>
            <version>3.1.0.RELEASE</version>
        </dependency>
        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-taglibs</artifactId>
            <version>3.1.0.RELEASE</version>
        </dependency>

        <dependency>
            <groupId>org.springframework.security</groupId>
            <artifactId>spring-security-ldap</artifactId>
            <version>3.1.0.RELEASE</version>
        </dependency>

        <!-- Jackson JSON Mapper -->
        <dependency>
            <groupId>org.codehaus.jackson</groupId>
            <artifactId>jackson-mapper-asl</artifactId>
            <version>1.6.4</version>
        </dependency>

    </dependencies>

    <build>
        <finalName>acme</finalName>

        <plugins>

            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.3.2</version>
                <configuration>
                    <source>1.6</source>
                    <target>1.6</target>
                </configuration>
            </plugin>

        </plugins>

    </build>
</project> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T19:05:22.937

在我看来，您正在尝试向服务传递 JS 对象而不是 JSON 字符串。有一个 jQuery 插件可以将 JS 对象解析为 JSON 字符串，正如之前在另一个 stackoverflow 问题中所回答的那样。

您可以在以下问题中获取插件和更多信息：

[jquery json 到字符串？](https://stackoverflow.com/questions/3593046/jquery-json-to-string)

继续编码:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T13:33:38.920

我的 Spring 3 Java webapp 是“极致”。我有这个用于我的 JQuery 调用以联系 Spring 3 Java 服务器端组件：

```
$.post("/test_ajax",  {state:"Alaska"}); 
```

我需要将“上下文根”（又名 webapp 名称）放在 URL 中：

```
$.post("/acme/test_ajax",  {state:"Alaska"}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-11T12:31:53.537

我刚刚遇到了同样的问题。

我所有的 AJAX 请求都发送到根上下文。

一个简单的解决方法是省略第一个斜杠，因此 url 被附加到应用程序上下文中。

在你的情况下：`$.post("test_ajax", {state:"Alaska"});`**

# php - 将 NGINX 重写规则转换为 PHP

> ID：10985844
> 
> 赞同：2
> 
> 时间：2012-06-11T18:49:46.320
> 
> 标签：php, regex, nginx, preg-match, parse-url

我有这个 NGINX 重写 URL：

```
if ($http_host !~ "([a-zA-Z0-9.-]+)\.example\.com(.+)") {
    rewrite  ^ http://example.com/browse.php?u=http://$1$2? permanent;
} 
```

我想将规则转换为 PHP，因为我的主机不允许我将 NGINX 中的 server_name 更改为：*.example.com

我试过这样的事情：（这个脚本位于我的域的 index.php 中，我已经打开了*DNS-wildcard*）

```
<?php
function unparse_url($parsed_url) { 
    $scheme   = isset($parsed_url['scheme']) ? $parsed_url['scheme'] . '://' : ''; 
    $host     = isset($parsed_url['host']) ? $parsed_url['host'] : ''; 
    $port     = isset($parsed_url['port']) ? ':' . $parsed_url['port'] : ''; 
    $path     = isset($parsed_url['path']) ? $parsed_url['path'] : ''; 
    $query    = isset($parsed_url['query']) ? '?' . $parsed_url['query'] : ''; 
    $fragment = isset($parsed_url['fragment']) ? '#' . $parsed_url['fragment'] : ''; 
}
if(preg_match('/^([a-zA-Z0-9.-]+)\.example\.com\/(.+)$/', $_SERVER["SERVER_NAME"])){
    unparse_url(parse_url($_SERVER["SERVER_NAME"]));
    header('Location: $schemeexample.com/browse.php?u=$scheme$host$port$path$query$fragment');
}
else {
?>
<html>
**HTML CONTENT HERE** 
```

如您所见，它使用 parse_url 解析 url 并将其从解析的 url 转换回字符串。

不幸的是，这个脚本不起作用我会得到 HTML 页面的内容。有人有答案吗？

提前致谢。

（[函数 unparse_url 来自这里](http://www.php.net/manual/en/function.parse-url.php#106731)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T19:00:44.653

像这样的东西？

```
if(preg_match('#([\w\.-]+)\.example\.com(.+)#', $_SERVER['SERVER_NAME'].$_SERVER['REQUEST_URI'], $match)) {
    header('Location: http://example.com/browse.php?u=http://'.$match[1].$match[2]);
    die;
} 
```

# java - 绘制面向对象系统的流程图

> ID：10985847
> 
> 赞同：0
> 
> 时间：2012-06-11T18:50:06.967
> 
> 标签：java, uml

我已经使用 Java 语言开发了一个项目。

按照惯例，在我的系统中包含上下文流和数据流、实体关系图等图表是否正确？这些图表是否仅在结构化编程开发的系统中使用？

如果我的系统是面向对象的系统，我应该只坚持基于 UML 的图表吗？

尽管这似乎是一个愚蠢的问题，但在按照严格的软件工程约定记录项目时，这一点很重要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T19:16:22.057

UML 2.2 图由结构图和行为图组成。请参阅此[维基百科页面](http://en.wikipedia.org/wiki/Unified_Modeling_Language)。

UML 2.2 中有 14 种图表类型。我会转向UML。是否可以使您的上下文流或数据流成为交互概览图？实体关系图变成类图？

Java 和 UML 可以很好地结合在一起。[例如，在https://stackoverflow.com/q/390438/509840](https://stackoverflow.com/q/390438/509840)上有 Eclipse 插件。

# android - 在android中将字符串“ex：PT20H”转换为时间

> ID：10985848
> 
> 赞同：-3
> 
> 时间：2012-06-11T18:50:11.600
> 
> 标签：android, string, time, time-format

我正在开发一个安卓应用程序。这个时间格式作为数据库中的字符串返回给我 -->“PT20H”，我想将其转换为以下格式 -->“20:00”。有任何想法吗？？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T19:02:49.020

您要做的就是解析时间字符串。看看[SimpleDateFormat](http://developer.android.com/reference/java/text/SimpleDateFormat.html)

看起来你有一些没有信息的纯文本，即 PT 和 H。也就是说，如果你所有的时间都是整小时（例如 20:23 的“PT20H23M”不会出现。我相信使用的模式应该是 "'PT'H'H'" 即 PT（在引号之间表示要忽略的文本，然后是小时（符号 H），然后是引号之间的 H，因为它要被忽略。

```
SimpleDateFormat sdf = new SimpleDateFormat("'PT'H'H'");
Date theDate = sdf.parse("PT20H");
SimpleDateFormat newFormat = new SimpleDateFormat("H:m");
String newFormattedString = newFormat.format(theDate); 
```

# razor - 通过 Tridion 中的 Razor 模板访问类别和关键字

> ID：10985851
> 
> 赞同：2
> 
> 时间：2012-06-11T18:50:23.997
> 
> 标签：razor, tridion

我正在尝试通过 Tridion 2011 中的 Razor TBB 访问 Tridion 出版物的类别和关键字信息中的值。Razor 文档列出了以下示例代码：

```
<ul>
@foreach (var keyword in Publication.MetaData.SomeKeywordFields) {
<li>@keyword.Title (@keyword.Id)</li>
}
</ul> 
```

虽然我在类别中有一个关键字......事实上，这是我自己意识到你甚至可以在 Tridion 中拥有一个关键字的唯一方法，但如果我错了，请纠正我。从示例的语法推断，我尝试了以下内容，其中“myCategory”是出版物中的类别，“myKeyword”是 myCategory 类别中的关键字：

```
@foreach (var keyword in Publication.MetaData.myCategory) {
if(@keyword.Title == "myKeyword") {
@keyword.Title
} 
```

运行此模板时，我收到一条错误消息，指出 DynamicItemsFields: Key 'testcategory' Not Found In ItemFields (Object reference not set to an instance of an object)

任何人都可以帮助确定是否可以做我在这里尝试的事情（因为它似乎是基于文档但仍然不确定）如果是这样，请提供正确语法的示例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T20:40:51.233

除了使用实际的 CategoryName 之外，您的代码几乎就在那里了。正如 Puf 评论的那样，您必须使用发布元数据的“字段名”而不是实际的 CategoryName。您应该将“myCategory”更改为实际的字段名

```
@foreach (var keyword in Publication.MetaData.*<<FIELDNAME>>*) {
   if(@keyword.Title == "myKeyword") {
        @keyword.Title
   }
} 
```

[FIELDNAME] --> 是发布元数据模式的 XMLName。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T10:17:53.193

关键字确实总是在一个类别或另一个关键字中。但它们用于组件等项目和（如示例中）出版物、文件夹等的元数据。

文档中的示例是在出版物上输出多值元数据关键字字段的每个值（即“允许多个值”、“从列表中选择的值”和“类别”都在元数据模式中选中）。

如果您尝试做类似的事情，您确实可以修改字段的名称，它会起作用。但是，从您的问题来看，您似乎正在尝试遍历某个类别中的所有关键字 - 这需要不同的方法。

为此，您需要在 TBB 中调用相当于 GetList 的调用。我对 Razor 调解器不够熟悉，无法为此提供示例代码，抱歉。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-12T16:00:25.120

感谢聊天中的 Ram G：

出版物本身，通常是您的 010、020...050 等级别，也可以附加一个元数据模式。上面 Razor 逻辑块所针对的字段的 XMLName 实际上是此元数据架构项的字段名称，而不是 Category 本身的名称。在发布的元数据架构中，如果选择“设计”选项卡，将项目的 XML 字段设为“文本”类型，选择“将从列表中选择选项”，默认情况下，将出现另一个名为“类别”的复选框如果选中，则会自动提取该出版物中存在的类别项目的完整列表。因此，当该字段现在被 Razor 逻辑定位时，它也分多个步骤定位到 Category 值。

再次感谢拉姆 G

# delphi - 从 TFileDialogEvent 获取 IFileDialog 的句柄以获取文件名

> ID：10985853
> 
> 赞同：-1
> 
> 时间：2012-06-11T18:50:41.453
> 
> 标签：delphi

我正在构建一个 TFileSaveDialog 后代组件。后代有一个 PushButton，其事件由以下人员处理：

```
function TFileDialogEvent.OnButtonClicked(const pfdc: IFileDialogCustomize;
  dwIDCtl: DWORD): HResult; stdcall;
var
  iImageEnIO: TImageEnIO;
  iFilename: string;
  iName: PChar;
  pfd: IFileDialog;
begin
  if dwIDCtl = dwVisualGroup8ID then
  begin
    iImageEnIO := TImageEnIO.Create(nil);
    try
      FileDialog.QueryInterface(
    StringToGUID('{8016B7B3-3D49-4504-A0AA-2A37494E606F}'),
    pfd);
    // How to get correct valid handle to IFileDialog?
      pfd.GetFileName(iName);
      iFilename := string(iName);
      if FileExists(iFilename) then
      begin 
```

该组件还可以正确显示各种控件标签中的图像信息。组件成功返回所选文件名并允许更改文件夹，但在 OnButtonClicked 事件中从 pfd.GetFileName(iName) 获取文件名返回无效文件名。我认为问题是由于没有获得正确的 pfd 句柄：IFileDialog。

**更新：** 我通过将 FileDialog: IFileDialog 定义为组件级别的 var 解决了这个问题，然后我调用了

```
function TFileDialogEvent.OnButtonClicked(const pfdc: IFileDialogCustomize;
  dwIDCtl: DWORD): HResult; stdcall;
var
  iImageEnIO: TImageEnIO;
  iFilename: string;
  pFolder: PWideChar;
  iFolder: string;
  iName: PChar;
  pfd: IFileDialog;
  hr: HRESULT;
  aShellItem: IShellItem;
begin
  if dwIDCtl = dwVisualGroup8ID then
  begin
    iImageEnIO := TImageEnIO.Create(nil);
    try
      FileDialog.QueryInterface(IFileDialog, pfd);
      pfd.GetFileName(iName);
      // Get the ShellItem
      hr := SHCreateItemFromParsingName(iName, nil,
      StringToGUID(SID_IShellItem), aShellItem);
      // Get the folder
      pfd.GetFolder(aShellItem);
      // Get the folder displayname
      aShellItem.GetDisplayName(SIGDN_FILESYSPATH, pFolder);
      iFolder := string(pFolder);
      if DirectoryExists( iFolder) then
        iFilename := IncludeTrailingPathDelimiter( iFolder) + string(iName);
      if FileExists(iFilename) then
      begin 
```

谢谢大家...谢谢罗伯...您的帖子很有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T19:16:44.863

您正在查询对象以查找与 GUID {8016B7B3-3D49-4504-A0AA-2A37494E606F} 匹配的接口，并将结果存储在`IFileDialog`引用中。问题是 {8016B7B3-3D49-4504-A0AA-2A37494E606F} 是`IFileDialogCustomize`接口的 GUID，而不是`IFileDialog`. 您尝试调用接口`GetFileName`的第六个方法`IFileDialog`，但由于变量实际上包含一个`IFileDialogCustomize`接口，因此控制最终被转移到该接口的第六个*函数*。编译器无法为您捕获类型不匹配，部分原因是您在运行时动态构建 GUID（因此它不知道编译时的值），部分原因是第二个参数`QueryInterface`是无类型的（所以它不知道变量的类型应该与第一个参数匹配）。

有一种比在运行时计算 GUID 更简单的方法。接口类型可*自动*用作其关联的 GUID（当它们具有 GUID 时）。要请求`IFileDialog`接口，只需将该标识符直接传递给`QueryInterface`：

```
FileDialog.QueryInterface(IFileDialog, pfd); 
```

`QueryInterface`如果您使用运营商，您甚至不必打电话`as`：

```
pfd := FileDialog as IFileDialog; 
```

当您`QueryInterface`直接调用时，您需要确保检查结果是否有错误代码。如果使用`as`运算符，不受支持的接口将引发异常。如果您只想通过失败而不进行过多的错误检查，请改用该`Supports`函数：

```
if Supports(FileDialog, IFileDialog, pfd) then ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T01:14:08.540

`TSaveFileDialog`具有`Dialog`type 的公共属性`IFileDialog`，因此您无需手动寻找它，您已经可以直接访问它，例如：

```
function TFileDialogEvent.OnButtonClicked(const pfdc: IFileDialogCustomize;  dwIDCtl: DWORD): HResult; stdcall; 
var 
  iImageEnIO: TImageEnIO; 
  iFilename: string; 
  iName: PWideChar; 
begin 
  if dwIDCtl <> dwVisualGroup8ID then
    Result := E_NOTIMPL
  else
  begin
    Result := S_OK;
    if FAILED(Self.Dialog.GetFileName(iName)) then Exit;
    try 
      iFilename := string(iName); 
    finally
      CoTaskMemFree(iName);
    end;
    iImageEnIO := TImageEnIO.Create(nil); 
    try 
      if FileExists(iFilename) then 
      begin 
        ...
      end;
    finally
      iImageEnIO.Free;
    end; 
  end;
end; 
```

# c# - 将 IRandomAccessStream 转换为 RandomAccessStreamReference C#

> ID：10985854
> 
> 赞同：-2
> 
> 时间：2012-06-11T18:50:46.610
> 
> 标签：c#, windows-8, microsoft-metro

我在下面的代码中将 IRandomAccessStream 转换为 RandomAccessStreamReference，但是当我看到结果时，没有图像可供共享。我该如何处理？

```
if (imageFile != null)
{
    using (IRandomAccessStream fileStream = await util.imageFile.OpenAsync(Windows.Storage.FileAccessMode.Read))
    {
        this.imageStreamRef = RandomAccessStreamReference.CreateFromFile(imageFile);
        this.dataPackageThumbnail = this.imageStreamRef;
        //  this.imageStream = await util.imageFile.OpenAsync(FileAccessMode.Read);
        await fileStream.FlushAsync();
    }
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-12T10:07:55.380

[http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.streams.irandomaccessstream](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.streams.irandomaccessstream)

尝试重置流（Seek）。

# javascript - 在不禁用滚动的情况下禁用 iOS5.1 Webapp 反弹？

> ID：10985855
> 
> 赞同：1
> 
> 时间：2012-06-11T18:50:49.027
> 
> 标签：javascript, iphone, web-applications, safari, scroll

谁能告诉我他们是如何在不完全禁用滚动的情况下在 iPhone 上禁用 Safari 中的“反弹”效果的？我已经用谷歌搜索了这个垃圾，我找不到一个可行的解决方案。

我尝试了以下方法：

```
<script>
 function BlockMove(event) { event.preventDefault();}
</script> 
```

-> 这只是完全禁用滚动

我也尝试过scrollFix.js，我不想求助于使用iScroll4 或任何臃肿的JS 库。我很固执，但必须有一个可靠的简单方法来解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T15:05:41.803

我唯一能想到的是你需要检测何时停止反弹，所以当你想停止反弹时，请禁用滚动。例如 - 我正在向下移动手指，这实际上是向上移动页面内容，您需要检测页面是否到达顶部，如果是，则禁用滚动。当您检测到触摸向上移动时，这意味着内容正在向下移动，然后再次启用滚动，除非您点击页面底部。我假设这是您正在谈论的反弹效果。这是默认行为我认为您不需要摆脱它，除非您的客户想要它并且不会改变他/她的想法

# linux - 增加到 node.js/socket.io 的最大连接

> ID：10985856
> 
> 赞同：7
> 
> 时间：2012-06-11T18:50:49.323
> 
> 标签：linux, node.js, centos, socket.io

我注意到`node.js`与 with的最大并发连接`socket.io`数约为 1000 个连接。

`ulimit`是否可以在 linux 上使用命令增加该数字？设置`ulimit`为 65536 可以解决我的问题吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-11T19:06:54.423

将`ulimit`用户帐户 node.js is running on 设置为更高的数字。

# android - 无法使布局与嵌套线性布局中的动态文本视图一起正常工作

> ID：10985858
> 
> 赞同：0
> 
> 时间：2012-06-11T18:50:58.170
> 
> 标签：android, android-layout, dynamic, android-linearlayout

在作为 RelativeLayout 的 XML 布局中，我有一个嵌套的 LinearLayout。在此 LinearLayout 中，我动态添加了一些 TextView 和按钮。我的问题是，我无法让项目像在 LinearLayout 中自然发生的那样出现在彼此下方。这是基本设置：

```
LinearLayout mobLayout = (LinearLayout) findViewById(R.id.mobButtons);
mobLayout.removeAllViewsInLayout(); 
```

我删除了布局中所有以前的垃圾，因为我重用了它。

```
mobLayout.addView(mobName);
mobLayout.addView(mobTextHP);
mobLayout.addView(fightButton);
mobLayout.addView(goBackButton); 
```

这些应该出现在另一个之上，而是并排出现。当我尝试将 LinearLayout.LayoutParams 添加到第一个时，它会擦除​​之后的所有内容，或者将其推离屏幕，我无法判断。

最后，这里是添加这些项目的 LinearLayout XML 区域：

```
<LinearLayout 
        android:id="@+id/mobButtons"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_below="@+id/fightText">

</LinearLayout> 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T18:54:22.000

将此选项用于您的 LinearLayout

```
android:orientation="vertical" 
```

# android - WebView 2.2 与 3.1

> ID：10985863
> 
> 赞同：1
> 
> 时间：2012-06-11T18:52:03.643
> 
> 标签：android, webview

Android 2.2 和 3.1 上的 WebView 类有什么不同的行为吗？

这里有一些信息，我在两个不同的设备上测试了同一个应用程序，第一个是 Android 2.2，另一个是 3.1

*   该应用程序的目标是 2.1
*   我要访问的页面是 ASP.net 页面

在 2.2 上运行

*   shouldOverrideUrlLoading 正常调用
*   onPageStarted 和 onPageFinished 被多次调用
*   当页面结束加载时，来自 webview 的 onNewPicture 被调用一次

在 3.1 上运行

*   shouldOverrideUrlLoading 没有被调用，只有 webView.load(url) 足以做同样的工作
*   onPageStarted 和 onPageFinished 被调用一次
*   来自 webview 的 onNewPicture 未被调用

我的问题是。我需要在页面加载时显示一个对话框，但我不知道如何处理这些差异。

如果我在 onPageStarted 上创建对话框并在 onPageFinished 上关闭它，它将在 2.2 上显示和关闭不止一次，但在 3.1 上它会正常工作

否则，如果我在 shouldOverrideUrlLoading 上创建对话框并在 onNewPicture 上关闭它，它将在 2.2 上正常工作，但在 3.1 上它甚至不会出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T18:57:51.140

我使用了以下内容：

[Android WebView 进度条](https://stackoverflow.com/questions/2537454/android-webview-progress-bar)

要在加载时在 webview 上放置进度条，您可以实现相同的方法，当加载的百分比小于 100% 时显示视图，并在加载百分比为 100% 时将其关闭。我为 Android >= 3.0 类型的设备实现了这个。

# javascript - Nodejs生成简短的唯一字母数字

> ID：10985872
> 
> 赞同：18
> 
> 时间：2012-06-11T18:52:49.073
> 
> 标签：javascript, node.js

我想生成一个简短的唯一字母数字值，用作在线购买的确认码。我正在研究[https://github.com/broofa/node-uuid](https://github.com/broofa/node-uuid)但他们的 uuid 太长了，我想让它们大约 8 个字符长。我可以实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-06-11T19:55:20.703

**2015 年 10 月 23 日：请参阅下面的 hashids 答案！**

您可以从 URL 缩短器模型中借用并执行以下操作：

```
(100000000000).toString(36);
// produces 19xtf1ts

(200000000000).toString(36);
// produces 2jvmu3nk 
```

只需增加数字以保持其唯一性：

```
function(uniqueIndex) {
    return uniqueIndex.toString(36);
} 
```

**请注意**，这仅对“单实例”服务真正有用，这些服务不介意以这种方式排序（通过基本增量）具有一定的可预测性。如果您需要跨多个应用程序/数据库实例的真正独特的价值，您真的应该根据一些评论考虑一个功能更全的选项。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2013-04-19T17:17:58.813

这个有点晚了，但似乎 hashids 在这种情况下工作得很好。

[https://github.com/ivanakimov/hashids.node.js](https://github.com/ivanakimov/hashids.node.js)

> hashids（哈希 ID）从无符号整数创建短的、唯一的、可解密的哈希

```
var Hashids = require('hashids'),
hashids = new Hashids('this is my salt');

var hash = hashids.encrypt(12345);
// hash is now 'ryBo'

var numbers = hashids.decrypt('ryBo');
// numbers is now [ 12345 ] 
```

如果你想定位 ~ 8 个字符，你可以这样做，以下要求至少 8 个字符。

```
hashids = new Hashids("this is my salt", 8); 
```

那么这个：

```
hash = hashids.encrypt(1);
// hash is now 'b9iLXiAa' 
```

接受的答案将是可预测/可猜测的，该解决方案应该是唯一且不可预测的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-07T09:09:28.313

安装 shortId 模块（[https://www.npmjs.com/package/shortid](https://www.npmjs.com/package/shortid)）。默认情况下，shortid 会生成 7-14 个 url 友好字符：AZ、az、0-9、_- 但您可以根据需要将 - 和 _ 替换为其他一些字符。现在，当您将对象保存在数据库中时，您需要以某种方式将此 shortId 粘贴到您的对象上。最好的方法是将它们粘贴在 Schema 中，如下所示：

```
var shortId = require('shortid');
var PurchaseConfirmationSchema = mongoose.Schema({
  /* _id will be added automatically by mongoose */
  shortId: {type: String, unique: true, default: shortId.generate}, /* WE SHOULD ADD THIS */
  name: {type: String},
  address: {type: String}
}); 
```

我已经在这里回答了自己类似的问题：

> [在 node.js 和 mongoose 中缩短 ObjectId](https://stackoverflow.com/questions/28722102/shorten-objectid-in-node-js-and-mongoose)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-04T19:38:37.770

为此，我编写了一个可以做到这一点甚至更多的模块。看它的页面：[id-shorter](https://www.npmjs.com/package/id-shorter)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-07-18T20:16:57.360

如果每次在线购买都关联唯一 URL ，您可以使用[**简单短**](https://github.com/abdennour/nodeshorten)包的后端，不需要数据库连接，也不需要网络服务：

```
var shorten=require('simple-short');

shorten.conf({length:8}); // Default is 4\. 

code1=shorten('http://store.com/purchase1');
code2=shorten('http://store.com/purchase2');
 //.. so on 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2018-08-23T10:44:22.237

基于此[https://www.npmjs.com/package/randomstring](https://www.npmjs.com/package/randomstring)

```
var randomstring = require("randomstring");

randomstring.generate();
// >> "XwPp9xazJ0ku5CZnlmgAx2Dld8SHkAeT"

randomstring.generate(7);
// >> "xqm5wXX"

randomstring.generate({
  length: 12,
  charset: 'alphabetic'
});
// >> "AqoTIzKurxJi"

randomstring.generate({
  charset: 'abc'
});
// >> "accbaabbbbcccbccccaacacbbcbbcbbc" 
```

你可以这样做

```
randomstring.generate({
  length: 8,
  charset: 'alphabetic'
}); 
```

# php - 未显示正确的表单标签

> ID：10985873
> 
> 赞同：0
> 
> 时间：2012-06-11T18:52:49.243
> 
> 标签：php, forms, codeigniter

我很难调试在这里找到问题。我试过回声`$login_by_username`，`$login_by_email`但他们没有回声。

问题是当它加载登录表单时，它总是将电子邮件作为标签。

控制器：

```
$login_by_username = $this->config->item('login_by_username', 'config1');
$login_by_email = $this->config->item('login_by_email', 'config1');
$this->data['login_by_username'] = $login_by_username;
$this->data['login_by_email'] = $login_by_email; 
```

看法：

```
<?php
if ($login_by_username AND $login_by_email) 
{
    $login_label = 'Email or Username';
} 
else if ($login_by_username) 
{
    $login_label = 'Username';
} 
else 
{
    $login_label = 'Email';
}
?>
<?php echo form_label($login_label, 'login'); ?> 
```

配置：

```
$config['login_by_username'] = TRUE;
$config['login_by_email'] = TRUE; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T19:48:49.570

根据我们的评论。

您已经使用`autoload.php`来调用您的配置文件。

您进行了一些测试以确保问题出在您的`config1.php`文件上，而不是`CI`.

我做了一个测试，这就是我所做的。

我在`config1.php`里面创建了一个文件：`application/config`.

这里是：

```
<?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');

$config['teste'] = 'config1 test'; 
```

在我的`autoload.php`里面`application/config`：

`$autoload['config'] = array('config1');`

我的家庭控制器：

```
public function index()
{
    $data = array('config'=>$this->config->item('teste'));
    $this->load->view('welcome_message', $data);
} 
```

我的观点：

```
<?php echo $config;?> 
```

并`config1 test`如预期般回响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T19:13:14.937

1.  确保配置项在文件`login_by_username`中`login_by_email``config1.php`

2.  确保您`$this->data`在加载视图时通过，例如：

    $this->load->view('view.php', $this->data)

# java - 一个线程多久执行一次？我的观察者模式出错了？

> ID：10985874
> 
> 赞同：1
> 
> 时间：2012-06-11T18:53:07.323
> 
> 标签：java, multithreading

以下是我当前代码的简化版本。我很确定我在语法方面没有做任何错误的事情，而且我找不到我的概念错误。

这是我试图实现的一种观察者模式。我负担不起从 Java.utils.observable 继承，因为我的类已经很复杂并且从另一个类继承。这里有两个部分：

有一个 Notifier 类实现 Runnable ：

```
public class Notifier implements Runnable{

    public void run()
    {
        while(true)
        {
            MyDataType data = getData();
            if(data.isChanged()==true)
            {
                refresh();
            }
        }
    }
} 
```

然后是我的主类，它需要响应对 MyDataType 数据的更改。

```
public class abc {

    private MyDataType data;

    public void abc(){
               Notifier notifier = new Notifier();
               Thread thread = new Thread(notifier);
               thread.start();
          }     

    public MyDataType getData(){
              return this.data;
    }

    public void refresh(){
         MyDatatype data = getData();
     //Do something with data
    }
} 
```

**问题**：发生的事情是通知程序在“数据”更改时调用 refresh()。但是在 refresh() 中，当我执行 getData() 时，我得到的是旧版本的“数据”！我应该提一下，代码的其他部分也调用了 refresh() 函数。

*   我在看什么？
*   这个问题还有其他更好的解决方案吗？
*   如果我不能应用开箱即用的默认 Java 实现，我应该如何设计 Subject-Observer 系统？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T18:55:00.540

> 当我执行 getData() 时，我得到的是旧版本的“数据”！

您的`data`字段在多个线程之间共享，因此必须用`volatile`关键字标记。

```
private volatile MyDataType data; 
```

这会导致读取和写入周围的“内存屏障”使值对所有线程可见。即使通知线程正在调用`getData()`，如果它的内存缓存，它的值`data`也会被检索出来。如果没有内存屏障，`data`值将随机更新或从不更新。

正如评论中提到的@JB，`volatile`可以保护您免受重新分配该`data`字段的影响。如果您更新*当前* `data`值中的某个字段，则不会越过内存屏障，即不会更新通知程序的内存。

回顾你的代码，看起来是这样的：

```
if(data.isChanged()==true)
{
    refresh();
} 
```

如果`data`没有被分配给一个新对象，那么制作`data`将`volatile`无济于事。你不得不：

*   `volatile boolean dirty;`每当`data`更新时设置某种字段。
*   每次都`data`在一个块内更新或读取。`synchronize`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T19:14:49.683

首先，您的`data`变量可能会被缓存，因此您总是需要通过 make 来获取最新值`volatile`。

其次，您在这里所做的是[生产者/消费者](http://en.wikipedia.org/wiki/Producer-consumer_problem)模式。这种模式通常最好用消息来实现。当您收到新数据时，您可以创建一个不可变对象并将其发布到消费者线程（通过像[BlockingQueue](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/BlockingQueue.html)这样的线程安全队列），而不是使用共享变量。

这些方面的东西：

```
public class Notifier extends Thread{
   private BlockingQueue<E> consumerQueue = null;
   public setConsumerQueue(BlockingQueue<E> val){
      consumerQueue = val;
   }
   // main method where data is received from socket...
   public void run(){
      while(!interrupted()){
           data = ... // got new data here
           if(!data.isChanged()) continue;
           // Post new data only when it has changed
           if(consumerQueue!=null) consumerQueue.offer(data);
      }
   }
}

public class Consumer extends Thread{
   private BlockingQueue<E> consumerQueue = new BlockingQueue<E>();
   public Consumer (Producer val){
      val.setConsumerQueue(consumerQueue);
   }
   public void run(){
      while(!interrupted()){
           data = consumerQueue.take();// block until there is data from producer
           if(data !=null) processData(data);
      }
   }
} 
```

# jquery - JQuery Validation：添加自定义方法以在提交时进行验证

> ID：10985878
> 
> 赞同：4
> 
> 时间：2012-06-11T18:53:20.617
> 
> 标签：jquery, asp.net-mvc-3, jquery-validate, unobtrusive-validation

我有一个简单的 js/jquery 函数，我想在提交表单时运行以进行额外验证。我的表单允许输入多个文件，并且我想确保所有文件的总和低于我设置的文件限制。

```
var totalFileSize = 0;
$("input:file").each(function () {
    var file = $(this)[0].files[0];
    if (file) totalFileSize += file.size;
});

return totalFileSize < maxFileSize; // I've set maxFileSize elsewhere. 
```

问题是我想将其作为 jquery 验证的一部分运行。在其他地方，我的表单使用标准的 MVC3 验证和我编写的单独的自定义非侵入式验证。如果这个文件大小验证器失败，我希望它像其他 jquery 验证器一样运行：显然，我想停止提交，并在与其他验证器相同的摘要框中显示错误消息。

有什么方法可以调用这样的简单方法作为提交验证的一部分吗？我考虑过 $.validator.addMethod，但如果我将它添加到每个 input:file 元素中，它将在提交时多次运行相同的验证器，从而多次显示错误消息。如果有办法添加此验证器但不将其绑定到任何元素，那就太好了。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-11T21:25:06.583

您可以编写自定义验证属性并注册自定义客户端适配器。让我详细说明。

假设您有一个视图模型来表示要上传的文件列表，并且您希望将所有上传文件的总大小限制为 2 MB。您的视图模型肯定看起来类似于：

```
public class MyViewModel
{
    [MaxFileSize(2 * 1024 * 1024, ErrorMessage = "The total file size should not exceed {0} bytes")]
    public IEnumerable<HttpPostedFileBase> Files { get; set; }
} 
```

现在让我们定义这个自定义`[MaxFileSize]`验证属性，它显然将执行服务器端验证，但除此之外，它还将实现[IClientValidatable](http://msdn.microsoft.com/en-us/library/system.web.mvc.iclientvalidatable.aspx)接口，允许注册一个自定义的不显眼的客户端验证规则，该规则将允许在客户端上转置此验证逻辑（显然只有对于支持 HTML5 [File API](http://dev.w3.org/2006/webapi/FileAPI/)的浏览器，您可以在客户端上确定所选文件的大小 => IE 对于这样的事情和使用此*浏览器的用户来说是完全不可能的*将不得不通过仅服务器端验证来满足他们或做一些更好的事情 - 使用 Internet Explorer 来完成这个世界上唯一有用的任务，这种软件和平可以做：一旦你得到一个干净的 Windows 安装，就通过互联网下载一个真正的网页浏览器）：

```
public class MaxFileSizeAttribute : ValidationAttribute, IClientValidatable
{
    public MaxFileSizeAttribute(int maxTotalSize)
    {
        MaxTotalSize = maxTotalSize;
    }

    public int MaxTotalSize { get; private set; }

    public override bool IsValid(object value)
    {
        var files = value as IEnumerable<HttpPostedFileBase>;
        if (files != null)
        {
            var totalSize = files.Where(x => x != null).Sum(x => x.ContentLength);
            return totalSize < MaxTotalSize;
        }

        return true;
    }

    public override string FormatErrorMessage(string name)
    {
        return base.FormatErrorMessage(MaxTotalSize.ToString());
    }

    public IEnumerable<ModelClientValidationRule> GetClientValidationRules(ModelMetadata metadata, ControllerContext context)
    {
        var rule = new ModelClientValidationRule
        {
            ErrorMessage = FormatErrorMessage(MaxTotalSize.ToString()),
            ValidationType = "maxsize"
        };
        rule.ValidationParameters["maxsize"] = MaxTotalSize;
        yield return rule;
    }
} 
```

下一步是有一个控制器：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        return View(new MyViewModel());
    }

    [HttpPost]
    public ActionResult Index(MyViewModel model)
    {
        if (!ModelState.IsValid)
        {
            // Server side validation failed => redisplay the view so
            // that the user can fix his errors
            return View(model);
        }

        // Server side validation passed => here we can process the
        // model.Files collection and do something useful with the 
        // uploaded files knowing that their total size will be smaller
        // than what we have defined in the custom MaxFileSize attribute
        // used on the view model
        // ...

        return Content("Thanks for uploading all those files");
    }
} 
```

和相应的观点：

```
@model MyViewModel

<script src="@Url.Content("~/Scripts/jquery.validate.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.js")" type="text/javascript"></script>
<script type="text/javascript">
    (function ($) {
        $.validator.unobtrusive.adapters.add('maxsize', ['maxsize'], function (options) {
            options.rules['maxsize'] = options.params;
            if (options.message) {
                options.messages['maxsize'] = options.message;
            }
        });

        $.validator.addMethod('maxsize', function (value, element, params) {
            var maxSize = params.maxsize;
            var $element = $(element);
            var files = $element.closest('form').find(':file[name=' + $element.attr('name') + ']');
            var totalFileSize = 0;
            files.each(function () {
                var file = $(this)[0].files[0];
                if (file && file.size) {
                    totalFileSize += file.size;
                }
            });
            return totalFileSize < maxSize;
        }, '');
    })(jQuery);
</script>

@Html.ValidationMessageFor(x => x.Files)
@using (Html.BeginForm(null, null, FormMethod.Post, new { enctype = "multipart/form-data" }))
{
    <div>
        @foreach (var item in Enumerable.Range(1, 3))
        {
            @Html.TextBoxFor(x => x.Files, new { type = "file" })
        }
    </div>
    <button type="submit">OK</button>
} 
```

显然，这里显示的 javascript 在视图中没有任何作用。它必须进入视图可以引用的单独的可重用 javascript 文件。我在此处将其包含在内，以提高可读性和重现场景的便利性，但在现实世界中，永远不要编写内联 javascript。

# javascript - 检查用户是否阻止了 3rd 方域

> ID：10985889
> 
> 赞同：4
> 
> 时间：2012-06-11T18:53:47.123
> 
> 标签：javascript, jquery, coffeescript, client-side, blocking

我遇到了一个问题，我们的很多支持电话都是关于我们的图像没有加载的，因为用户阻止了 amazon s3 或类似的第 3 方服务。我使用 3rd 方服务来托管图像、视频和一些 javascript。有没有办法通过 javascript 检测客户端是否阻止了域，以便我们显示消息而不是让用户联系支持？

```
$.ajax 'http://aws.amazon.com/s3/',
  type: 'GET',
  dataType: 'html'
  complete: (e, xhr, settings) ->
    if e.status == 200
      console.log "Not Blocking S3"
    else
      console.log "Blocking S3" 
```

根据评论，我尝试了它，但它仍然无法正常工作。当我没有阻塞时，它会返回阻塞。

上面的示例咖啡脚本代码不起作用，因为我认为发生安全错误是因为它在不同的域上执行 ajax。Firebug 将请求显示为红色，但显示为 200。e.status 返回 0。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-12T22:05:03.233

从您要检查的域加载图像。

```
<img id="checkImg" src="https://www.google.com/images/srpr/logo3w.pngAAA" /> 
```

​ 只是一个普通的图像标签（注意`AAA`最后使它**不起作用**）。然后您可以检查图像的宽度以查看它是否已加载。

```
if(document.getElementById('checkImg').clientWidth != 275)
    alert("Error") 
```

Google 徽标的宽度为 275 像素，但错误图像（至少在 Chrome 中）只有 18 像素。所以如果图像不是 275px 宽，我知道它没有加载。

[演示](http://jsfiddle.net/FFRyE/)

# android - Android教程按钮“保存”铃声、通知音量的变化

> ID：10985891
> 
> 赞同：0
> 
> 时间：2012-06-11T18:53:50.817
> 
> 标签：android, button, savechanges, savestate

有谁知道如何制作像[这样](http://picz.ro/index.php?id=63acd2fead2cd8a8dd6e5d29a6350d53)的音量控制器的教程（底部有一个保存按钮）。这是我的问题，如何制作“保存”按钮。我可以创建所有音量 SeekBar，但不幸的是，当我在 SseekBar 上进行更改时，它会自动更改手机设置（铃声、通知、媒体、通话中）的音量。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T19:52:16.917

首先，使用`SeekBar`并检索它设置的值。不要在`SeekBar`调整音量时设置音量。然后，当按下**Save**按钮时，将这些值发送到[AudioManager](http://developer.android.com/reference/android/media/AudioManager.html#setStreamVolume%28int,%20int,%20int%29)。

使用此链接以获得更详细的说明：[Android 开发：更改媒体音量？](https://stackoverflow.com/a/4179507/935627)以及这个：[SeekBar1.java](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/view/SeekBar1.html)

这是一个简单的示例，它可能看起来像这样：

```
AudioManager audioManager = (AudioManager)getSystemService(Context.AUDIO_SERVICE);

ImageButton save = (ImageButton) findViewById(R.id.save);

save.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {
        audioManager.setStreamVolume(AudioManager.STREAM_MUSIC, valueFromSeekBar, flagIfNeeded);
    }
}); //End setOnClickListener() 
```

# https - https中的EhCache terracottaConfig url

> ID：10985895
> 
> 赞同：1
> 
> 时间：2012-06-11T18:54:09.710
> 
> 标签：https, ehcache, terracotta

我可以使用 Terracota 服务器阵列处理安全环境（例如 HTTPS）吗？

我试图像这样配置 ehcache.xml 文件：

```
<terracottaConfig rejoin="true" url="https://localhost:9510,https://localhost:9511"/> 
```

但它仍然是错误的。

```
Caused by: java.lang.IllegalArgumentException: URI can't be null.
at sun.net.spi.DefaultProxySelector.select(DefaultProxySelector.java:116) ~[na:1.6.0_23]
at sun.net.www.protocol.http.HttpURLConnection.plainConnect(HttpURLConnection.java:911) ~[na:1.6.0_23]
at sun.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:841) ~[na:1.6.0_23]
at sun.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1177) ~[na:1.6.0_23]
at com.tc.config.schema.setup.sources.ServerConfigurationSource.getInputStream(ServerConfigurationSource.java:42) ~[na:na]
at com.tc.config.schema.setup.StandardXMLFileConfigurationCreator.trySource(StandardXMLFileConfigurationCreator.java:343) ~[na:na]
at com.tc.config.schema.setup.StandardXMLFileConfigurationCreator.getConfigDataSourceStrean(StandardXMLFileConfigurationCreator.java:289) ~[na:na]
at com.tc.config.schema.setup.StandardXMLFileConfigurationCreator.loadConfigDataFromSources(StandardXMLFileConfigurationCreator.java:222) ~[na:na]
at com.tc.config.schema.setup.StandardXMLFileConfigurationCreator.loadConfigAndSetIntoRepositories(StandardXMLFileConfigurationCreator.java:120) ~[na:na]
at com.tc.config.schema.setup.StandardXMLFileConfigurationCreator.createConfigurationIntoRepositories(StandardXMLFileConfigurationCreator.java:102) ~[na:na]
at com.terracotta.express.StandaloneL1Boot.resolveEmbedded(StandaloneL1Boot.java:177) ~[terracotta-toolkit-1.5-runtime-4.2.0.jar:na]
at com.terracotta.express.StandaloneL1Boot.resolveConfig(StandaloneL1Boot.java:122) ~[terracotta-toolkit-1.5-runtime-4.2.0.jar:na]
... 106 common frames omitted 
```

如果可能的话，这样做的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T05:16:03.193

简而言之，Terracotta 目前不支持通过 SSL 进行集群通信。如果您使用的是商业版，您将获得额外的安全层，因为如果客户端没有正确的许可证密钥，它将无法连接到集群。除此之外，您可以使用防火墙规则来限制访问。

# arrays - 如何比较散列数组中的元素并仅保留最近的项目

> ID：10985910
> 
> 赞同：1
> 
> 时间：2012-06-11T18:55:34.903
> 
> 标签：arrays, perl, hash

我正在使用下面的哈希数组，并且如果四个特定参数相同，我只想显示基于“日期时间”的最新哈希。让我使用下面的代码提供一个示例...

如果 'toy, kind, Stage, Step' 相同，那么我只想将该哈希存储到一个新的哈希数组中。

原始哈希数组

```
$VAR1 = [
      {
        'Color' => 'green',
        '2nd Color' => 'blue',
        '3rd Color' => 'yellow',
        'toy' => 'truck',
        'toy_type' => 'ford',
        'kind' => '4door',
        'Stage' => 'Production',
        'Step' => 'Platform',
        'Datetime' => '2012/06/08 01:49:19'
      },
      {
        'Color' => 'red',
        '2nd Color' => 'green',
        '3rd Color' => 'yellow',
        'toy' => 'truck',
        'toy_type' => 'ford',
        'kind' => '4door',
        'Stage' => 'Production',
        'Step' => 'Platform',
        'Datetime' => '2012/06/08 01:46:17'
      },
      {
        'Color' => 'red',
        '2nd Color' => 'blue',
        '3rd Color' => 'green',
        'toy' => 'truck',
        'toy_type' => 'chevy',
        'kind' => '4door',
        'Stage' => 'Production',
        'Step' => 'Platform',
        'Datetime' => '2012/06/08 01:52:14'
      },
      {
        'Color' => 'red',
        '2nd Color' => 'blue',
        '3rd Color' => 'yellow',
        'toy' => 'truck',
        'toy_type' => 'chevy',
        'kind' => '4door',
        'Stage' => 'Production',
        'Step' => 'Platform',
        'Datetime' => '2012/06/08 01:24:14'
      },
      {
        'Color' => 'white',
        '2nd Color' => 'blue',
        '3rd Color' => 'yellow',
        'toy' => 'truck',
        'toy_type' => 'gmc',
        'kind' => '4door',
        'Stage' => 'Production',
        'Step' => 'Platform',
        'Datetime' => '2012/06/08 06:24:14'
      }, 
```

我想保存到变量的新哈希数组：

```
$VAR2 = [
      {
        'Color' => 'green',
        '2nd Color' => 'blue',
        '3rd Color' => 'yellow',
        'toy' => 'truck',
        'toy_type' => 'ford',
        'kind' => '4door',
        'Stage' => 'Production',
        'Step' => 'Platform',
        'Datetime' => '2012/06/08 01:49:19'
      },
      {
        'Color' => 'red',
        '2nd Color' => 'blue',
        '3rd Color' => 'green',
        'toy' => 'truck',
        'toy_type' => 'chevy',
        'kind' => '4door',
        'Stage' => 'Production',
        'Step' => 'Platform',
        'Datetime' => '2012/06/08 01:52:14'
      },
      {
        'Color' => 'white',
        '2nd Color' => 'blue',
        '3rd Color' => 'yellow',
        'toy' => 'truck',
        'toy_type' => 'gmc',
        'kind' => '4door',
        'Stage' => 'Production',
        'Step' => 'Platform',
        'Datetime' => '2012/06/08 06:24:14'
      }, 
```

请注意，我只希望存储最新的福特和最近的雪佛兰，但因为只有一个 gmc，所以我也希望存储它。

我指的是 perldsc (http://perldoc.perl.org/perldsc.html) 文档，但它没有详细介绍。这甚至可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T19:39:27.670

```
sub key { join ':', @{ $_[0] }{qw( toy kind Stage Step )} }

# Determine which records to keep.
my %latest;
for my $rec (@$recs) {
    my $key = key($rec);
    $latest{$key} = $rec->{Datetime}
       if !$latest{$key} || $latest{$key} lt $rec->{Datetime};
}        

# Filter out the others.
@$recs = grep { $latest{key($_)}{Datetime} eq $_->{Datetime} } @$recs; 
```

上述方法保留了原始顺序。它还可以优雅地处理领带（保留两者）。

如果您不需要保留原始顺序，则可以使用更简单的东西。不幸的是，如果出现平局，它只保留一个记录，而且它的性能也不能很好地扩展 [O(N log N) 而不是 O(N)]。

```
sub key { join ':', @{ $_[0] }{qw( toy kind Stage Step )} }

my %seen;
@$recs =
   grep !$seen{key($_)}++,
    sort { $b->{Datetime} cmp $a->{Datetime} }
     @$recs; 
```

（如果您希望最终结果按升序排序，请`reverse`在前面添加。）`grep``Datetime`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T19:18:32.793

您是否考虑过使用散列的散列代替？然后，您可以使用车辆的品牌作为外部哈希中的键，并且任何先前的条目都将被自动覆盖，因此您最终只会得到每个品牌的最新条目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T21:49:33.467

您的数据似乎不是很有代表性，首先是因为所有记录中的关键字段`toy`、和都是相同的`kind`，还因为数据没有按您说的那样排序（至少它没有按日期/时间排序为我希望你的意思）。`Stage``Step`

此代码将返回数据中最早的唯一记录的列表。鉴于您的数据，它只返回第四条记录，因为它的日期`2012/06/08 01:24:14`早于所有其他记录。

```
my %seen;

my @filtered = grep {
  not $seen{join '|', @$_{qw/ toy kind Stage Step /} }++
}
sort {
  $a->{Datetime} cmp $b->{Datetime}
} @data; 
```

# css - 即使指定了行高，垂直对齐 css 也不起作用

> ID：10985911
> 
> 赞同：0
> 
> 时间：2012-06-11T18:55:39.863
> 
> 标签：css, sass, vertical-alignment

我正在尝试使用 vertical-align: middle; 使图像垂直居中。但我似乎根本无法让垂直对齐产生任何效果。我已经设置了行高和高度，但没有任何效果。

萨斯：

```
.lot-images {
  position: relative;
  float: left;
  min-height: 300px;
  *height: expression(this.scrollHeight < 300 ? "300px" : "auto");
  padding-right: 65px;
 .viewer-wrapper {
    height: 415px;
    width: 450px;
    line-height: 415px;
    position: relative;

    .main {
    position: relative;
    display: block;
    text-align: center;
    height: 415px;
    line-height: 415px;
    width: 100%;
    max-width: 450px;
    max-height: 415px;
    font-size: 0;
    cursor: pointer;
    &.small {
      img {
        display: inline-block;
        max-height: 100%;
        max-width: 100%;
        height: auto;
        width: auto;
        vertical-align: middle;
      }
    }
  }
} 
```

哈姆勒：

```
.lot-images
  %div.viewer-wrapper
    .facebook
    %a.pinterest{ :href => '#', :target => '_pinterest' }
    .main.small
      %img
    %div.gallery-pager.prev.hide
      %i
    %div.gallery-pager.next.hide
      %i
.thumbnails 
```

整个容器位于模态框内。

如果您需要更多信息，请告诉我。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T19:07:13.933

不是sass，是scss。你的代码有效。看我的例子：[jsfiddle](http://jsfiddle.net/XTUdn/)

你能解释更多是什么问题吗？并显示你的 html

# java - @Autowired-ing 一个 DAO 时出现 ValidationException

> ID：10985912
> 
> 赞同：0
> 
> 时间：2012-06-11T18:55:41.227
> 
> 标签：java, spring, google-app-engine

我正在尝试为我的应用程序添加 JPA 支持，但是出现此错误：

```
Caused by: javax.validation.ValidationException: Unable to find a default provider
    at javax.validation.Validation$GenericBootstrapImpl.configure(Validation.java:264)
    at org.springframework.validation.beanvalidation.LocalValidatorFactoryBean.afterPropertiesSet(LocalValidatorFactoryBean.java:183)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1477)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1417)
    ... 37 more 
```

虽然我在 WEB-INF/lib 文件夹中有这些罐子：

```
validation-api-1.0.0.GA.jar
validation-api-1.0.0.GA-sources.jar 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T20:22:16.247

我不确定，但我最好的猜测是这`validation-api`实际上不是验证的*实现*，所以你仍然需要包含一个比如[Hibernate Validator](http://www.hibernate.org/subprojects/validator.html)。

# javascript - 浏览器实现同源策略的方式是否存在实质性差异？

> ID：10985918
> 
> 赞同：10
> 
> 时间：2012-06-11T18:56:05.280
> 
> 标签：javascript, ajax, security, cors

我的主页上有一个表单，设置为通过 XHR POST 提交到 URL [https://mydomain.com/send_sms](https://mydomain.com/send_sms)。

当我在 Internet Explorer (http://mydomain.com) 中访问非 SSL 版本的主页并提交表单时，没有任何反应。在 Webkit 控制台中，我收到一个有用的错误说明`Origin http://mydomain.com is not allowed by Access-Control-Allow-Origin.`

然而，在 Firefox 13 中，请求清楚地提交 & a 返回 a `200 OK`，尽管响应正文是空白的。此外，服务器端操作（发送短信）实际上是由 Firefox 请求触发的，而不是由其他浏览器触发的。

我一直认为同源策略甚至拒绝发送请求，但也许是浏览器从不允许的响应中接收数据？

任何人都知道这是否是Mozilla在实施（甚至可能是疏忽）方面的一个有目的的差异？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T20:35:04.937

首先，`http://example.com`和`https://example.com`是不同的起源。对于[XHR 级别 1](http://www.w3.org/TR/2012/NOTE-XMLHttpRequest1-20120117/)，这意味着不允许跨域请求。

但是对于当前的[XHR (Level 2) ，它在支持](http://www.w3.org/TR/XMLHttpRequest/)[CORS](http://www.w3.org/TR/cors/)时支持跨域请求（服务器和客户端都支持！），跨域请求可以是

*   一个[简单的跨域请求](http://www.w3.org/TR/cors/#simple-cross-origin-request)，如果

    *   请求方法是`GET`, `HEAD`, or `POST`, and
    *   没有一个请求头字段不是`Accept`, `Accept-Language`, `Content-Language`, 或`Content-Type`, 和
    *   未设置预检标志

    或者

*   需要 preflight的[跨域请求](http://www.w3.org/TR/cors/#cross-origin-request-with-preflight)，否则。

对于简单的跨域请求，允许浏览器发送请求。但是当收到响应时，需要[检查服务器是否允许共享资源](http://www.w3.org/TR/cors/#resource-sharing-check)。这是检查`Access-Control-Allow-Origin`标头字段和其他`Access-Control-*`响应标头字段的地方。并且只有通过此检查，浏览器才允许脚本读取响应。

对于其他跨域请求，需要进行预检，与服务器协商在实际请求中允许发送哪些信息。这个预检请求基本上是一个`OPTIONS`请求，告诉服务器实际请求将包含什么（请求方法和标头字段）。然后服务器可以决定它是否允许这样的请求。

在您的情况下，观察到的行为可能有多种原因。我猜您的*send_sms*脚本只是不[支持 CORS 的服务器端部分](http://www.w3.org/TR/cors/#resource-processing-model)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T19:05:10.097

数据的发送应该和接收一样被禁止，例如如果这个页面上有一些恶意的 JS 并且它正在将每个击键提交到某个随机服务器怎么办？在这种情况下，发送比接收更邪恶（顺便说一句，这实际上可以通过使用查询字符串请求图像或脚本等资源来实现，因为它们不受相同来源策略的约束）。

我过去曾遇到过细微的差异，但这通常是在旧版 IE 中。

对我来说，firefox 的差异是一个错误（假设 vanilla 安装具有此特征）。不同的协议（HTTP vs HTTPS）相当于不同的来源，即使是同一协议的子域也被认为是不同的来源，所以FF13绝对不应该发出AJAX请求。

您碰巧没有设置 CORS（跨域资源共享），而 FF13 是您测试过的唯一支持它的浏览器？

# jquery - 如果 p 标签包含某个类，则删除它

> ID：10985925
> 
> 赞同：0
> 
> 时间：2012-06-11T18:56:30.797
> 
> 标签：jquery

```
 <div id="info-leftside">
                <div class="label-container" id="name-label"><p class="info-field-label">name</p><p class="error">error</p></div>
                <input type="text" name="name" id="name" class="field"/>
                <div class="label-container" id="email-label"><p class="info-field-label">email</p></div>
                <input type="text" name="email" id="email" class="field"/>
                <div class="label-container" id="phone-label"><p class="info-field-label">phone</p><p class="error">error</p></div>
                <input type="text" name="phone" id="phone" class="field"/>
                <div class="label-container" id="address1-label"><p class="info-field-label">address (line 1)</p></div>
                <input type="text" name="address1" id="address1" class="field"/>
                <div class="label-container" id="address2-label"><p class="info-field-label">address (line 2)</p></div>
                <input type="text" name="address2" id="address2" class="field"/>
                  <div class="label-container" id="city-label"><p class="info-field-label">city</p></div>
                <input type="text" name="city" id="city" class="field"/>

</div> 
```

删除包含“错误”类的 p 标签的最有效方法是什么？我应该在类标签容器上使用 hasClass 吗？但是，如果为真，我该如何删除？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T18:57:58.813

怎么样`$('.error').remove()`？

`$('p.error').remove()`或者如果您对其他一些元素使用相同的类，则提供更具体的信息。

# php - php在运行时创建类方法

> ID：10985926
> 
> 赞同：26
> 
> 时间：2012-06-11T18:56:31.037
> 
> 标签：php, reflection

我想知道是否有一种方法可以在运行时将新方法附加到类中，在 php.ini 中。我的意思是，不是在实例级别，而是直接在类中，以便所有新创建的实例都有这个新方法。这样的事情可以用反射来完成吗？

谢谢

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-01T04:19:50.350

是的你可以。

下面是 php 5.4.x 在运行时创建方法的方法。

匿名函数由从 5.3.x 开始的 Closure 类表示。从 5.4.x 开始，它添加了一个[Closure::bind](http://www.php.net/manual/en/closure.bind.php)静态方法来将匿名函数绑定到特定的对象或类。

例子：

```
class Foo {
     private $methods = array();

     public function addBar() {
       $barFunc = function () {
         var_dump($this->methods);
       };
       $this->methods['bar'] = \Closure::bind($barFunc, $this, get_class());
     }

     function __call($method, $args) {
          if(is_callable($this->methods[$method]))
          {
            return call_user_func_array($this->methods[$method], $args);
          }
     }
 }

 $foo = new Foo;
 $foo->addBar();
 $foo->bar(); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-14T19:11:21.383

做了一些玩弄整个事情。似乎您唯一可以做的`ReflectionClass`就是替换现有方法。但即使这样也是间接的。

我实际上不知道任何存在动态类的基于类的语言（再说一次，我的知识非常有限）。我看到它只在基于原型的语言（javascript、ruby、smalltalk）中完成。**相反，在PHP 5.4**中，您可以做的是使用`Closure`新方法并将新方法添加到**现有对象**。

这是一个可以让您对任何对象执行这种变态的类：

```
class Container
{
    protected $target;
    protected $className;
    protected $methods = [];

    public function __construct( $target )
    {
        $this->target = $target;
    }

    public function attach( $name, $method )
    {
        if ( !$this->className )
        {
            $this->className = get_class( $this->target );
        }
        $binded = Closure::bind( $method, $this->target, $this->className );
        $this->methods[$name] = $binded;
    }

    public function __call( $name, $arguments )
    {
        if ( array_key_exists( $name, $this->methods ) )
        {
            return call_user_func_array( $this->methods[$name] , $arguments );
        }

        if ( method_exists( $this->target, $name ) )
        {
            return call_user_func_array( 
                array( $this->target, $name ),
                $arguments
                );
        }
    }   
} 
```

要使用它，您必须为构造函数提供现有对象。这是一个小例子：

```
class Foo
{
    private $bar = 'payload';
};
$foobar = new Foo;
// you initial object

$instance = new Container( $foobar );
$func = function ( $param )
{
    return 'Get ' . $this->bar . ' and ' . $param;
};
$instance->attach('test', $func);
// setting up the whole thing

echo $instance->test('lorem ipsum');
// 'Get payload and lorem ipsum' 
```

不完全是你想要的，但 AFAIK 这是你能得到的最接近的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-11T18:58:26.230

您是否查看过文档中的[create_function()](http://php.net/manual/en/function.create-function.php)？您也可以通过[重载](http://php.net/manual/en/language.oop5.overloading.php).

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-02-14T16:29:21.743

这可以通过 runkit 扩展的[runkit_method_add()](http://www.php.net/manual/en/function.runkit-method-add.php)来实现。不过在生产中使用它要小心。

例子：

```
<?php
class Example {}

$e = new Example();

runkit_method_add(
    'Example',
    'add',
    '$num1, $num2',
    'return $num1 + $num2;',
    RUNKIT_ACC_PUBLIC
);

echo $e->add(12, 4); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-09-02T11:25:33.753

您也可以使用以下两种方法之一。

```
function method1()
{
    echo "In method one.";
}

function method2()
{
    echo "In method two.";
}

class DynamicClass
{
    function __construct(){
        $function_names = ['method1'];
        foreach ($function_names as $function_name) {
            if (function_exists($function_name)) {
                $this->addMethod($function_name);
            }
        }
    }

    function addMethod($name)
    {
        $this->{$name} = Closure::fromCallable($name);
    }

    public function __call($name, $arguments)
    {
        return call_user_func($this->{$name}, $arguments);
    }
}

$obj = new DynamicClass();
//Call method1 added in constructor
$obj->method1();
//Add method
$obj->addMethod('method2');
$obj->method2(); 
```

# php - 如果在 eval 操作中使用了奇怪的字符，如何警告用户

> ID：10985927
> 
> 赞同：1
> 
> 时间：2012-06-11T18:56:34.577
> 
> 标签：php

```
$op=$_POST['param'];
$statement=eval("return ($op);"); 
```

在 'param' 中，如果有一个奇怪的字符，例如字母 'jfsdf' 或其他东西，则 eval 函数不起作用。我怎么解决这个问题？

eval 函数仅适用于明确定义的条目，例如 '54+4*3' 另一方面，如果它使用诸如 '6p+87+4' 之类的条目，则会给出解析错误。有什么方法可以警告用户以输入定义明确的语句

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T20:23:32.153

首先，根据“奇怪”字符的含义，您应该实现验证来自外部的字符串的功能。

```
$allowed_chars = array('function', 'this' ); //..add desirable ones

function is_alloved_char($char){
 return in_array($char, $allowed_chars);
} 
```

RegEx 非常适合当你这样做时，除了一些性能下降。

在您的情况下`str_pos()`，足以匹配不受欢迎的字符。

所以，你的另一个功能应该类似于：

```
/**
 * 
 * @param string
 * @return TRUE on success, FALSE otherwise
 */
function is_really_safe($char){
  global $allowed_chars; //just make this array visible here
 foreach ($allowed_chars as $allowed_char){
   if ( str_pos($allowed_char, $char) ){
     return false;
   }
 }
 return true;
} 
```

另外，对 eval() 要非常小心 如果你在产品中使用这个函数，那么你做错了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T19:11:15.430

如果它是关于评估一个受约束的数学表达式，那么惰性选项将是在评估之前使用模式断言。这也更容易，因为它隐式返回表达式结果：

```
$result = preg_replace('#^\s*\d+([-+*/%]\s*\d+\s*)*$#e', '$0', $input); 
```

如果您想断言`(..)`括号的结构也正确，则需要更复杂的东西。

如果不匹配，它将返回原始输入字符串。检查是否生成警告。

# .net - 使用 skipwhile 跳过元素

> ID：10985933
> 
> 赞同：0
> 
> 时间：2012-06-11T18:56:52.513
> 
> 标签：.net, arrays, linq

我正在努力使代码适合我的以下要求：

**要求**：从数组中的数据表中获取数据列的名称，除了在 lstSnapshotExcludingCols 中存在 Ordinal 的列，即整数列表。

有人可以帮助我获得预期的结果。我正在使用以下代码，但它返回所有数据列并且不跳过任何内容。

```
Dim columnNames = ldtCurrentData.Columns.Cast(Of DataColumn)()
                  .SkipWhile(Function(column) 
                             lstSnapshotExcludingCols.Contains(column.Ordinal))
                  .Select(Function(column) column.ColumnName).ToArray() 
```

从数据行中选择数据时，我遇到了类似的问题：

```
Dim fields = row.ItemArray.SkipWhile(Function(value, index) lstSnapshotExcludingCols.Contains(index)) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T19:01:56.027

不要用户`SkipWhile(...)`。一个简单`Where(...)`的方法就可以了：

```
Dim columnNames = ldtCurrentData.Columns.Cast(Of DataColumn)()
                 .Where(Function(column) 
                    Not lstSnapshotExcludingCols.Contains(column.Ordinal))
                 .Select(Function(column) column.ColumnName).ToArray() 
```

# python - 列表理解：包含这个而不是那个（Python）

> ID：10985935
> 
> 赞同：2
> 
> 时间：2012-06-11T18:57:00.300
> 
> 标签：python, list-comprehension

我正在逐行读取文件，并以我想要的方式用 line.split(',') 将其分开。现在我想标记、复制到列表或执行以下功能：

包含字符串“THIS”但不包含“THAT”的行。

我正在拍摄看起来像这样的东西：

```
if any(('THIS' in s for s in csvLine) if any('THAT' **!in** s for s in csvLine):
        print csvLine 
```

但这根本不是好的语法。我想我在使用列表理解时不知所措，但是由于[这个答案](https://stackoverflow.com/questions/4843158/check-in-python-if-a-list-item-contains-a-string)，我之前已经成功地做到了。

我确实有一个使用下面代码的工作解决方案，但我觉得有更好的东西：

```
 if any('THAT' in s for s in csvLine):
        print "do nothing"
    elif any('THIS' in s for s in csvLine):
        print "do something"
    else:
        print "do nothing" 
```

如何将这些 if-else 语句的逻辑压缩成更漂亮的 Pythonic 代码？

这是我实际的、非通用的、简单的英语问题：如果一行包含 CHAT 和 TRANSFER，那么它并不重要。如果它仅包含 CHAT，则不重要。如果它只包含 TRANSFER 而不是 CHAT 这个词，那么值得注意，我想对这条线做点什么。如何找到带有 TRANSFER 字样的行，但没有 CHAT 字样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-11T19:00:39.943

不确定我是否完全理解 - 为什么需要遍历该行？这似乎会更好：

```
if 'this' in csvLine and not 'that' in csvLine:
    do_something() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T18:59:29.193

```
if any('THIS' in s for s in csvLine) and all('THAT' not in s for s in csvLine): 
```

是相同的

```
if any('THIS' in s for s in csvLine) and not any('THAT' in s for s in csvLine): 
```

一旦找到“THIS”，“THIS”部分将停止迭代，而“THAT”将在找到“THAT”后立即停止迭代。一个或两个迭代可能必须完成。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T19:02:23.233

根据您链接到的问题，稍作修改：

```
csv_line = ["Has CHAT", "Has TRANSFER", "Has CHAT and TRANSFER"]
transfers = [s for s in csv_line if "TRANSFER" in s and "CHAT" not in s]
print transfers

>>> ['Has TRANSFER'] 
```

# html - 淘汰赛风格的表格行顶部

> ID：10985937
> 
> 赞同：0
> 
> 时间：2012-06-11T18:57:03.673
> 
> 标签：html, knockout.js

我正在使用模板来填写表格：

模板：

```
<tr data-bind="click: pressedItem, style: { top: getHeightFromIndex($index), position: 'absolute' }">
    <td class="resultCell">
        <div class="resultItem" data-bind="attr: { id: $root.key }, html: formattedName" style="float: left"></div>
    </td>
</tr> 
```

在视图模型中：

```
getHeightFromIndex = function(index) {
    console.log("Height: " + (index() * 40) + " px");
    return (index() * 40) + ' px';
} 
```

我的身高在控制台中正确打印，但所有表格行相互重叠（好像没有设置顶部尺寸）。我绑定不正确吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T19:10:55.663

弄清楚了。

```
return (index() * 40) + ' px'; 
```

应该...

```
return (index() * 40) + 'px'; 
```

'px' 之前的间距搞砸了。

# extjs - ExtJS DirectStore 设置参数值

> ID：10985945
> 
> 赞同：0
> 
> 时间：2012-06-11T18:58:14.497
> 
> 标签：extjs

在 EXTJS DirectStore 中，我想设置参数值，然后重新加载它。怎么做 ？

```
var myStore = new Ext.data.DirectStore({
            directFn: Report.ReadReport,
            autoLoad: false,
            paramsAsHash: false,
            paramOrder: 'identifier',
            root: 'Report',
            totalProperty: 'total',
            fields: [
                { name: 'name', type: 'string' }
                ],
            remoteSort: true,
            listeners: {
                load: function (store, recs, opt) {
                    myGrid.setHeight(400);
                    myGrid.doLayout();
                }
            }
        }); 
```

我想要的是这样的

```
myStore.param.'identifier'.value = '12345'
myStore.load(); 
```

怎么做 ？可能吗 ？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T19:03:24.693

```
myStore.load({
    params: {
        identifier: 12345
    }
}); 
```

# matlab - 如何在matlab中将图形导出为彩色eps

> ID：10985946
> 
> 赞同：13
> 
> 时间：2012-06-11T18:58:15.303
> 
> 标签：matlab, eps

我在 Matlab 中有一个绘图需要保存 eps 格式。如果我用图中的交互式菜单来做的话，一切都很好，导出的 eps 很好。但是如果我使用以下命令

```
saveas(gca, 'myplot.eps','psc2'); 
```

但是如果我这样做的话，导出的 eps 没有被裁剪，并且边距太大。如何在程序中保存没有边距的eps？谢谢。

顺便说一句，如果我改用以下代码

```
saveas(gca, 'myplot.eps','eps'); 
```

然后输出 eps 被剪裁，但它是黑白而不是彩色。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-09-02T18:52:19.720

只需将@mola 的答案与您已有的答案结合起来：

```
saveas(gca, 'myplot.eps','epsc'); 
```

注意 中的**c**。`'epsc'`

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-06-11T19:24:30.020

以下对我有用：

```
print -depsc myplot.eps 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-11T19:01:37.813

这是您要查找的内容：

[http://www.mathworks.se/matlabcentral/fileexchange/23629-exportfig](http://www.mathworks.se/matlabcentral/fileexchange/23629-exportfig)

# android - Android：使用 LayoutInflator 添加视图

> ID：10985949
> 
> 赞同：2
> 
> 时间：2012-06-11T18:58:26.600
> 
> 标签：android, mono, xamarin.android, layout-inflater

Java 或 C# 答案很好（我们使用 MonoDroid）

我成功地向 LinearLayout 添加了一个控件：

```
 LayoutInflater _inflatorservice = (LayoutInflater)this.GetSystemService(Context.LayoutInflaterService);
    var viewContainer = _inflatorservice.Inflate(Resource.Layout.ReportItImageButton, myLinearLayout); 
```

然后如何获得对刚刚添加的视图的引用？我以这种方式添加了许多相同的控件，因此需要将第 n 个项目添加到布局中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T19:50:25.670

这有效，假设项目是 type ，它会获取添加的最新项目`Button`。

```
LayoutInflater _inflatorservice = (LayoutInflater)this.GetSystemService(
    Context.LayoutInflaterService);
var layout = _inflatorservice.Inflate(
    Resource.Layout.ReportItImageButton, layoutImages) as LinearLayout;

if (layout != null)
{
    var b = layout.GetChildAt(layout.ChildCount - 1) as Button;
    if (b != null)
    {
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T19:14:29.167

还有一个附加参数。它**不会**将您的膨胀视图添加到`myLinearLayout`，但仍会返回`View`它的对象。

```
var viewObj = _inflatorservice.Inflate(
    Resource.Layout.ReportItImageButton, myLinearLayout, false); 
```

请注意，例如，如果您添加了一个，`LinearLayout`那么您将得到一个`LinearLayout`返回。此方法返回 XML 布局的**根**视图，因此它可以是任何类型的`View`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T19:39:08.227

```
View v = myLinearLayout.findViewById(R.id.myViewId) 
```

myViewId 应该与 ReportItImageButton.xml 文件中指定的 id 相同

# html - 如何将一个模板插入另一个模板？

> ID：10985950
> 
> 赞同：84
> 
> 时间：2012-06-11T18:58:44.153
> 
> 标签：html, django, django-templates

我有一个非常基本的模板（basic_template.html），并想用另一个部分模板格式化的数据来填写。basic_template.html 可能包含一些使用部分模板格式化的内容。

我应该如何构造views.py中的代码？

我这样做的原因是稍后将使用 Ajax 填充。我这样做对吗？

* * *

## 回答 #1

> 赞同：159
> 
> 时间：2012-06-11T19:02:27.230

你可以做：

```
<div class="basic">
{% include "main/includes/subtemplate.html" %}    
</div> 
```

`subtemplate.html`另一个 Django 模板在哪里。`subtemplate.html`您可以在其中放置使用 Ajax 获得的 HTML 。

您还可以多次包含该模板：

```
<div class="basic">
{% for item in items %}
    {% include "main/includes/subtemplate.html" %}    
{% endfor %}
</div> 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-06-11T19:23:45.613

您可以使用**块来执行此操作。**块是一个 Django 模板标签，它将覆盖您**扩展的模板部分。**我在下面提供了一个示例。

**basic_template.html**

```
<body>
{% block 'body' %}
{% endblock %}
</body> 
```

**您要包含的模板：（**即 example.html）

```
{% extends 'basic_template.html' %} 
{% block 'body' %}
/* HTML goes here */
{% endblock %} 
```

**视图.py**：

```
return render_to_response(template='example.html', context, context_instance) 
```

这样做将加载**basic_template.html**，但将 basic_template.html 中的所有内容替换为`{% block 'body' %} {% endblock %}`.html 中包含的所有内容`{% block 'body' %} {% endblock %}`。

[您可以在Django Docs](https://docs.djangoproject.com/en/dev/topics/templates/#template-inheritance)中阅读有关块和模板继承的更多信息

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-04-29T12:54:43.357

主要有2种方法（2种简单的）

1：

在基本 html 中放置 {% include "myapp/sub.html" %}

只需在 sub.html 文件中编写 html 代码

2：

[https://docs.djangoproject.com/en/dev/ref/templates/language/#template-inheritance](https://docs.djangoproject.com/en/dev/ref/templates/language/#template-inheritance)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-08T09:53:00.177

我只是想添加扩展和包含的差异。模板和包含都可以使用当前应用程序中插入的模型。模板供您的任何应用程序在全球范围内使用。包括用于某些应用程序。例如：您想将图像滑块插入您的主页和关于页面，但没有其他地方。为方便起见，您可以使用自己的模型创建 Slider 应用程序，并导入其模型并包含在该页面中。如果您在此示例中使用模板，您将创建 2 个模板，其中一个带有滑块，其他模板具有其他所有模板。

# php - 在 PHP 中合并子数组

> ID：10985952
> 
> 赞同：1
> 
> 时间：2012-06-11T18:58:48.880
> 
> 标签：php, arrays, multidimensional-array

我正在尝试按键组合数组。所以所有以相同子键开头的子数组都会合并为一个子数组。另外，我想保留匹配值的最小值。

目前这就是我所拥有的：

```
$statement = Array
(
    [662_0] => Array
        (
            [0] => 06-01-2012
            [1] => 436
            [2] => MEDIA
            [3] => 2006
            [4] => Template Testing
            [5] => KS
            [6] => 662
            [7] => 0
            [8] => 0
            [9] => 0
            [10] => 0
            [11] => 0
            [12] => 1290
            [13] => 1290.00
            [14] => 0.00
            [15] => 0
            [16] => 1290.00
        )

    [662_1] => Array
        (
            [0] => 06-01-2012
            [1] => 436
            [2] => MEDIA
            [3] => 2006
            [4] => Template Testing
            [5] => KS
            [6] => 662
            [7] => 295.00
            [8] => 0
            [9] => 0
            [10] => 0
            [11] => 0
            [12] => 995
            [13] => 1290.00
            [14] => 0.00
            [15] => 0
            [16] => 1290.00
        )

    [662_2] => Array
        (
            [0] => 06-01-2012
            [1] => 436
            [2] => MEDIA
            [3] => 2006
            [4] => Template Testing
            [5] => KS
            [6] => 662
            [7] => 0
            [8] => 0
            [9] => 0
            [10] => 0
            [11] => 0
            [12] => 1290
            [13] => 1290.00
            [14] => 0.00
            [15] => 0
            [16] => 1290.00
        )

    [663_0] => Array
        (
            blah blah blah...
        )
); 
```

这就是我想要的：

```
$statement = Array
(
    [662] => Array
        (
            [0] => 06-01-2012
            [1] => 436
            [2] => MEDIA
            [3] => 2006
            [4] => Template Testing
            [5] => KS
            [6] => 662
            [7] => 295.00
            [8] => 0
            [9] => 0
            [10] => 0
            [11] => 0
            [12] => 995
            [13] => 1290.00
            [14] => 0.00
            [15] => 0
            [16] => 1290.00
        )

    [663] => Array
        (
            blah blah blah...
        )
); 
```

如果需要，很高兴提供更多信息！谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T15:00:39.097

此代码遍历您的原始数组，切入`_`以获得项目的组合标识符并将它们合并在一起，如果新值小于已设置的值，则替换结果数组中的值。

```
<?php
$original = array(
        '122_0' => array('k1'=>4, 'k2'=>2),
        '122_1' => array('k2'=>3, 'k3'=>3),
        '122_2' => array('k3'=>2, 'k4'=>4),
        '111_0' => array('k1'=>3, 'k2'=>3),
        '111_1' => array('k2'=>2, 'k3'=>2),
        '111_2' => array('k3'=>1, 'k4'=>1)
);

foreach ($original as $key=>$sub) {
    list($realkey, $num) = explode('_', $key);
    foreach ($sub as $subkey => $value) {
        if ( isset($result[$realkey][$subkey]) 
             && $value < $result[$realkey][$subkey] ) {
            $result[$realkey][$subkey] = $value;
        }
    }
}
print_r($result); 
```

# ffmpeg - 转码流的 MIME 类型

> ID：10985953
> 
> 赞同：1
> 
> 时间：2012-06-11T18:58:56.107
> 
> 标签：ffmpeg, video-streaming, go, mime-types, transcoding

我希望确定管道内容的 MIME 类型。管道输出的是转码后的视频流，所以没有对应的文件扩展名。

`ffprobe -i pipe:0`在这些情况下，我可以使用 say或其他等价物来确定 MIME 类型吗？是否有编解码器或容器格式到 MIME 类型的规范映射？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T17:52:09.753

我的建议是：

1) 在发送数据之前通过管道传输 MIME 类型。

或者

2）查看流的前几个字节（标头），通常视频和音频文件在前 2 到 3 个字节中识别它们的格式。

或者

3) 阅读您期望的不同格式的格式规范，并尝试根据常见模式（例如可用的同步点）找出格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T13:23:21.443

您可以使用 DetectContentType 根据幻数猜测内容类型：http: [//golang.org/pkg/net/http/#DetectContentType](http://golang.org/pkg/net/http/#DetectContentType)

# html - iPad 上 iOS (Safari) 中 Web SQL DB 的最大大小是多少？本地存储怎么样？

> ID：10985959
> 
> 赞同：5
> 
> 时间：2012-06-11T18:59:18.837
> 
> 标签：html, local-storage, web-sql

使用 HTML5 的 Web SQL 在 iPad 上本地存储数据时，最大数据大小是多少？

当您达到这一点时，它是否只是提示用户增加它？这是一个简单的是/否权限请求吗？如果是这样，什么是硬限制（超出这个限制，用户甚至没有允许它扩展的选项）？

LocalStorage 的工作方式是否相同？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-24T08:34:07.500

您的站点在 Mobile Safari 上创建的所有 WEB SQL 数据库的总限制为 50Mb。要求用户确认接受超过 5Mb 并且您以后不能增加现有数据库的大小，您只能创建一个新的辅助数据库，因此您必须在第一次创建数据库时做好计划并设置大小。

```
var theBiggestDB = openDatabase('databaseName', '1.0', 'My Database', 50*1024*1024); 
```

看到这个答案：[https ://stackoverflow.com/a/6281947/1233018](https://stackoverflow.com/a/6281947/1233018)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T19:05:03.077

5MB 之后，我相信它会提示用户是否要分配更多空间。这是针对 WebSQL 的。

据我所知，大小没有最大限制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-29T13:38:11.607

HTML5 应用程序缓存限制为 50 MB。我尝试了以下清单（总共超过 50MB）

```
CACHE MANIFEST

CACHE:
icon.gif
font.ttf
index.htm
5mb.mp4
7_4mb.mp4
19mb.mp4
19_1mb.mp4 
```

它说“应用程序缓存更新失败，因为超出了大小配额”

如果我将清单更改为以下（总共小于 50MB）

```
CACHE MANIFEST

    CACHE:
    icon.gif
    font.ttf
    index.htm
    # 5mb.mp4
    7_4mb.mp4
    19mb.mp4
    19_1mb.mp4 
```

它要求我将应用程序缓存大小增加到 50MB 并正确保存所有数据。

在 iPad、iPad 2、新 iPad 上进行了测试

对于 WEB SQL 存储应该是同样的限制。

# asp.net - 列表视图未显示在文件背后的代码上

> ID：10985962
> 
> 赞同：0
> 
> 时间：2012-06-11T18:59:49.940
> 
> 标签：asp.net

我创建了一个列表视图，并且需要在第一个列表视图中创建另一个列表视图。当我转到文件后面的代码时，我看不到 listview2 控件，它是第二个列表视图的名称

我究竟做错了什么？

**下面是我的标记代码**

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="Attestation2.aspx.cs" Inherits="Attestation2" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body style="z-index: 1; left: 21px; top: 0px; position: absolute; height: 313px;
    width: 983px">
    <form id="form1" runat="server">
    <div>
        <asp:DropDownList ID="Entitlementdlist" runat="server" AutoPostBack="true" Visible="true"
            ToolTip="All the Requests in this dropdown are Entitlement Requests only">
        </asp:DropDownList>

        <asp:ListView ID="listview1" runat="server" ItemPlaceholderID="itemplaceholder" >
            <LayoutTemplate>         
            <asp:PlaceHolder ID="itemplaceholder" runat="server" />  
            </LayoutTemplate> 

            <ItemTemplate>
                <table style="border:1px solid black;">
                    <tr>
                        <td>Report Name</td>
                        <td><asp:TextBox ID="ReportNameLbl" runat="server" Text='<%#Eval("REPORT_DESCRIPTION.rptdesctext") %>' Width="500"></asp:TextBox> </td>
                        <td>
                        <asp:CheckBoxList ID="CheckBoxList1" runat="server" RepeatDirection="Horizontal">
                             <asp:ListItem Text="Yes" Value="Yes"></asp:ListItem>
                                <asp:ListItem Text="No" Value="No"></asp:ListItem>
                            </asp:CheckBoxList>
                        </td>
                    </tr>
                    <tr>
                        <td>Content Description</td>
                        <td>
                        <asp:Label ID="ContentDescLbl" Text='<%#Eval("REPORT_REQUEST.StopLossMax") %>' runat="server" ></asp:Label>
                        </td>
                        <td>
                        <asp:CheckBoxList ID="CheckBoxList2" runat="server" RepeatDirection="Horizontal">
                             <asp:ListItem Text="Yes" Value="Yes"></asp:ListItem>
                                <asp:ListItem Text="No" Value="No"></asp:ListItem>
                            </asp:CheckBoxList>
                        </td>

                    </tr>
                    <tr>

                    <td>
                    Frequency
                    </td>
                    <td>
                     <asp:Label ID="frequencyLbl" Text='<%#Eval("REPORT_REQUEST.reportfrequency") %>' runat="server" ></asp:Label>
                    </td>
                    <td>
                    <asp:CheckBoxList ID="CheckBoxList3" runat="server" RepeatDirection="Horizontal">
                             <asp:ListItem Text="Yes" Value="Yes"></asp:ListItem>
                                <asp:ListItem Text="No" Value="No"></asp:ListItem>
                            </asp:CheckBoxList>
                    </td>
                    </tr>
                    <tr>

                    <td>
             <asp:ListView ID="listview2" runat="server" ItemPlaceholderID="itemplaceholder1" >
            <LayoutTemplate>         
            <asp:PlaceHolder ID="itemplaceholder1" runat="server" />  
            </LayoutTemplate> 

            <ItemTemplate>

             <table style="border:1px solid black;">
                    <tr>

                        <td>Recepients</td>
                        <td>
                         <asp:Label ID="frequencyLbl" Text='<%#Eval("REPORTAlaska.reportfrequency") %>' runat="server" ></asp:Label>
                        </td>
                    </tr>
                    </table>
            </ItemTemplate>
            </asp:ListView>
                    </td>

                    </tr>
                </table>

            </ItemTemplate>
        </asp:ListView>
    </div>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T19:02:42.250

由于它是嵌套在模板中的控件，因此您需要使用“FindControl”方法。

**编辑：**

如果您使用一个函数，请查看 MSDN 上的描述，它将节省您在这里等待答案的时间 :) 简而言之，FindControl 不是递归函数，并且如果控件不直接位于控件集合中选择的元素，它不会工作。您正在尝试访问另一个 ListView 中的 ListView，因此您不能使用 Page.FindControl，但您可以执行以下操作：

```
myListView.FindControl(...) 
```

希望你现在明白这个想法并且它对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T19:03:50.833

这是正常行为。您的嵌套 ListView 是在外部 ListView 的模板中定义的。您必须使用特定行的 FindControl() 方法访问嵌套列表视图。

例如代码检查：[查找控件](https://stackoverflow.com/questions/7341838/find-control-in-listview)

# jquery-ui - 如何在 AJAX 调用之前显示 JQuery UI 对话框？

> ID：10985969
> 
> 赞同：0
> 
> 时间：2012-06-11T19:00:54.453
> 
> 标签：jquery-ui, jquery

我试图在使用 JQuery 执行 AJAX 调用时向用户显示一个对话框。我需要将调用设为“async：false”，因为页面的其他部分依赖于数据，并且我无法在“成功”字段中包含所有需要的代码。

使用 Firefox 和 Opera，对话框可以正常显示，但是在 IE 和 Chrome 中，它会等到页面完全呈现并且根本不显示对话框。这是一个非常接近实际实现的示例，这是一个更大的项目，我试图将其剥离到所涉及的最低限度。

[http://jsfiddle.net/mcraig_brs/eNMna/](http://jsfiddle.net/mcraig_brs/eNMna/)

我想找到一种在启动 ajax 调用之前显示对话框并在完成后关闭对话框的方法。AJAX 调用必须保持“async: false”。这可能吗？我该怎么做？

任何帮助，将不胜感激。最终答案需要在 IE8/9、Firefox 和 Chrome 中运行。Opera 和 Safari 将是额外的 :)

作为对其中一个回复的回应，我修改了小提琴以显示我的意思：

[http://jsfiddle.net/mcraig_brs/BBhdS/](http://jsfiddle.net/mcraig_brs/BBhdS/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T19:13:04.937

在文档准备好后尝试运行所有代码：

```
$(function(){
  var page = new pageManager();
  page.LoadData();
}); 
```

如果代码在文档完全准备好之前执行，一些 jQuery 的选择器（例如，`$("#dialog")`）可能没有效果，因为元素还没有准备好。这取决于浏览器如何构建页面与元素的排序方式等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T01:16:27.260

这里的问题是 jQuery UI 的对话框打开函数本身是异步运行的（以处理打开对话框时可能需要发生的动画）。因此，要使其正确运行，您需要您的代码在`dialogopen`事件处理程序中运行。

**现场示例**- [http://jsfiddle.net/tj_vantoll/YR7RC/](http://jsfiddle.net/tj_vantoll/YR7RC/)

话虽如此，我强烈反对使用同步 XHR 请求。从长远来看，它们会使您的代码的可维护性大大降低。使用 jQuery 的延迟，您可以在 AJAX 调用完成后将多个函数排队运行。这里有一篇关于这项技术的优秀文章 - [http://rmurphey.com/blog/2010/12/25/deferreds-coming-to-jquery/](http://rmurphey.com/blog/2010/12/25/deferreds-coming-to-jquery/)。

# php - 如何增加 phpmyadmin 的上传大小？

> ID：10985970
> 
> 赞同：-1
> 
> 时间：2012-06-11T19:00:59.490
> 
> 标签：php, mysql, phpmyadmin

我不是管理员，所以我只有 php.ini 文件的读取权限，我无法将文件移动到 phpmyadmin 目录。由于系统 mysql 已停止，我也无法使用命令行 mysql。我该如何解决这个问题？我需要上传 4 GB 的文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T19:03:29.663

除非您修改文件，否则无法完成`PHP.ini`，即使那样我也不会上传 4GB 文件（即使它是本地上传）。这种类型的 SQL 文件上传/挂载应该通过服务器恕我直言的命令行/GUI 完成。

另一种方法是使用客户端来管理 SQL DB，而不是 phpmyadmin。

以[HeidiSQL](http://www.heidisql.com/)为例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T19:06:17.480

如果您无权更改设置，那么您无法进行分配。

有一个用 php 编写的很棒的小工具，可以帮助您导入名为[bigdump](http://www.ozerov.de/bigdump/)的大型 .sql 文件，它会错开导入过程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-11T19:41:17.660

您必须看到一些内容：

1.  **PHP CONFIG**您必须编辑 php 最大上传文件大小才能与您一起完成 PHP 我认为默认情况下它就像 2 MB（不确定）如果您需要它，可以将其更改为一个大值。但是等等，还有更多……
2.  **NOT REPONSE**：如果文件真的很大，并且服务器很慢，很可能客户端在没有收到任何信号的情况下关闭了上传文件的连接，对于这个问题，真正推荐使用 ajax（如上传进度条）。
3.  **MySQL 设置**最后，您必须查看您的数据库字段类型和大小。确保自己的 Mysql 中的数据类型能够存储文件大小。

# asp.net - 服务器上的 504 错误

> ID：10985971
> 
> 赞同：8
> 
> 时间：2012-06-11T19:01:11.530
> 
> 标签：asp.net, iis, http-status-code-504

我正在将数据加载到文本文件中，当过程需要很长时间（大量数据）时，我得到一个 504 响应（在 Fiddler 中查看），显然文件无法生成。我想我会尝试在我的 web.config 中增加会话超时，但这并没有帮助。

是否有一些属性决定了这个超时？

感谢任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-01-06T15:17:45.707

这很可能与 httpRuntime web.config 元素有关：

```
<httpRuntime
   maxRequestLength= "4096"     /> 
```

**maxRequestLength**是整数值，以 KB 为单位指定输入流的限制。默认值为 4096 (4 MB) 设置为此级别，目的是避免用户将大文件发布到服务器。

此外，您可能需要将**executionTimeout="999999"**属性添加到此元素。

请注意，Microsoft 文档说明了有关 executionTimeout 的调试模式：

**executionTimeout**默认为“00:01:50”（110 秒）。

此超时仅在编译元素中的调试属性为 False 时适用。为帮助防止在调试时关闭应用程序，请不要将此超时设置为较大的值。

# c#-4.0 - 如何用“。”创建一个 Uri

> ID：10985974
> 
> 赞同：0
> 
> 时间：2012-06-11T19:01:28.507
> 
> 标签：c#-4.0, escaping, uri, invalid-characters

我有一个带有“。”的字符串 像[https://mysite.com/Relation=My.Test.AL.?Path=MySymbolPath](https://mysite.com/Relation=My.Test.AL.?Path=MySymbolPath) 当我从它创建uri时“。” 被截断。[https://mysite.com/Relation=My.Test.AL?Path=MySymbolPath](https://mysite.com/Relation=My.Test.AL?Path=MySymbolPath)

```
 var uristring = "https://mysite.com/Relation=My.Test.AL.?Path=MySymbolPath";
    var uri = new Uri(Uri.EscapeUriString(uristring )); 
```

看到uristring有“AL.”，但是uri.AbsoluteUri没有，它有“AL”你知道怎么预防吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T21:32:58.687

.NET 框架中存在一个已知错误。存在解决方法。感谢 [HttpWebRequest 到 URL 的末尾带有点](https://stackoverflow.com/questions/856885/httpwebrequest-to-url-with-dot-at-the-end)

[如何创建使用 GenericUriParserOptions.DontCompressPath 解析的 Uri 实例](https://stackoverflow.com/questions/2515959/how-to-create-a-uri-instance-parsed-with-genericuriparseroptions-dontcompresspat)

[http://social.msdn.microsoft.com/Forums/en-US/netfxbcl/thread/5206beca-071f-485d-a2bd-657d635239c9](http://social.msdn.microsoft.com/Forums/en-US/netfxbcl/thread/5206beca-071f-485d-a2bd-657d635239c9)

[https://connect.microsoft.com/VisualStudio/feedback/details/386695/system-uri-incorrectly-strips-trailing-dots](https://connect.microsoft.com/VisualStudio/feedback/details/386695/system-uri-incorrectly-strips-trailing-dots)

# c# - Project Name.MacOs.csproj 不会在 Mono 或 Visual Studio 中加载

> ID：10985977
> 
> 赞同：1
> 
> 时间：2012-06-11T19:01:48.977
> 
> 标签：c#, .net, mono, monodevelop

我有一个解决方案，其中包含 6 个项目，它们都是 .csproj 类型，除了这个之外加载都很好，MONO 对错误非常不清楚，但 VS 说“此安装不支持项目类型”项目文件在解决方案栏中显示为灰色，当您单击箭头下拉项目中的文件时，它表示无法加载此文件。有没有人知道可能导致这种情况的原因？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T15:24:12.013

它也不会在mac上加载。我想我发现了问题。我正在尝试在我的 .net 代码中使用一些 Cocoa 互操作。为了做到这一点，我必须使用一个名为 monobjc 的库，我没有安装它，所以存在这个问题。但是，对于其他遇到此问题的人，monobjc 的库仅与 2.8 和 2.6 的单声道兼容。事实证明 2.6 和 2.8 很难找到。

感谢您的回复！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T23:34:04.743

从名字上，我猜这是一个 MonoMac 项目。它将在 MonoDevelop 中加载，但仅在 MacOS 上。

# php - PHP中的文件url问题

> ID：10985978
> 
> 赞同：0
> 
> 时间：2012-06-11T19:01:51.283
> 
> 标签：php, html

下面的脚本，当我引用 URL 时，如果我以任何方式缩短它，它无法找到文件，但是当留下完整长度时，它将完整的服务器 url 输出到链接和 href - 有没有正确的方法更改包含的目录以防止这种情况？

```
<?php

function getFiles($dir)
{
    $arr=scandir($dir);
    $res=array();
    foreach ($arr as $item)
    {
        if ($item=='..' || $item=='.'){continue;}
        $path=$dir.'/'.$item;
        if (is_dir($path))
        {
            $res=array_merge($res,getFiles($path));
        }
        else
        {
            $res[$path]=filemtime($path);
        }
    }
    return $res;
}

$files=getFiles('/var/www/vhosts/mysite.com/httpdocs/Manuals/');
arsort($files);
$files=array_slice(array_keys($files),0,11);
foreach ($files as $file)
{
    echo '<a href="'.$file.'">'.$file.'</a><br />';
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T19:08:10.843

相对于脚本引用这些文件`__FILE__`并用于`dirname(...)`获取完整的实际路径。然后你可以在 html 中输出相对 URL：

```
 $files=getFiles(dirname('Manuals'));
 arsort($files);
 $files=array_slice(array_keys($files),0,11);
 foreach ($files as $file)
 {
     $file = pathinfo($file)['filename'];
     echo '<a href="Manuals/'.$file.'">'.$file.'</a><br />';
 } 
```

# sql-server - 如何从 Excel 将记录插入 SQL Server

> ID：10985981
> 
> 赞同：2
> 
> 时间：2012-06-11T19:01:58.703
> 
> 标签：sql-server, excel, vba

我不擅长编程，但我过得很好，我只想将 excel 中的表格更新为 SQL Server 2012 中的表格。

我可以创建连接，插入 HARD 值，但由于某种原因，我无法弄清楚如何插入范围。

也就是说，以下代码可以正常工作：

```
objConnection.Execute "USE database1 INSERT INTO tblExposure(AssetID, Name) VALUES  (1234, 'Metoo')" 
```

但是，当我尝试替换一个范围时，比如`Range.("A3").Value`，我无法让它工作。

```
objConnection.Execute "USE database1 INSERT INTO tblExposure(AssetID, Name) VALUES  (Range("A3").Value, 'Metoo')" 
```

谢谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T19:04:08.163

您需要将范围放在引号之外：

```
"USE database1 INSERT INTO tblExposure(AssetID, Name) VALUES  (" _
   & Range("A3").Value & ", 'Metoo')" 
```

# android - 如何使广播接收器始终处于活动状态？（用于电池小部件）

> ID：10985986
> 
> 赞同：1
> 
> 时间：2012-06-11T19:02:26.387
> 
> 标签：android, android-intent, android-widget, battery

我是安卓新手。我想创建一个显示当前电池电量的小部件。在阅读了几个教程后，我做了以下工作。创建了扩展 AppWidgetProvider 的类。在其 onUpdate 和 onEnabled 方法中，使用意图过滤器 ACTION_BATTERY_CHANGED 注册广播接收器。在 onRecieve 方法中，TextView 使用当前电池电量进行更新。

他们来了：

```
public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[]      appWidgetIds) 
{

    ComponentName cn = new ComponentName(context, BatteryAppWidgetProvider.class);
    context.getApplicationContext().registerReceiver(this, new IntentFilter(Intent.ACTION_BATTERY_CHANGED));
    appWidgetManager.updateAppWidget(cn, this.views);

}

@Override
public void onReceive(Context context, Intent intent) {

        Integer level = intent.getIntExtra("level", -1);
        this.views.setTextViewText(R.id.battery_level, level.toString() + "%");
        ComponentName cn =
            new ComponentName(context, BatteryAppWidgetProvider.class);
        AppWidgetManager.getInstance(context).updateAppWidget(cn, this.views);

    super.onReceive(context, intent);
}

@Override
public void onEnabled(Context context) {
    super.onEnabled(context);
    context.getApplicationContext().registerReceiver(this, new IntentFilter(Intent.ACTION_BATTERY_CHANGED));
} 
```

它可以工作一段时间——我可以在 DDMS 中看到它。但是经过一段时间或在我启动了许多其他应用程序之后。我的进程从 DDMS 中消失了。我认为Android只是删除它以释放更多内存。所以问题是我怎样才能避免这种情况？我怎样才能让我的过程永远活着？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T19:19:10.027

如果在用户不与小部件/应用程序交互时您希望 android 执行某些操作，您应该使用服务。

[安卓服务](http://developer.android.com/reference/android/app/Service.html)

它旨在用于不需要用户交互的任务，并且特别适合一遍又一遍地检查某些内容。不能保证操作系统最终仍不会杀死它，但它会尽可能长时间地保持活动状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T19:18:50.010

唯一可以避免这种情况的方法是，如果您启动一项服务并使用`startForeground()`这将降低操作系统杀死它的可能性，但不能保证它不会。您还需要在通知栏中持久显示通知，表明它正在运行。

[在此处](http://developer.android.com/guide/topics/fundamentals/services.html)阅读服务

简而言之，您无法阻止它被杀死

# javascript - Google Maps Tile Overlays - 在调用瓷砖时避免 404 错误？

> ID：10985988
> 
> 赞同：4
> 
> 时间：2012-06-11T19:02:28.197
> 
> 标签：javascript, google-maps, google-maps-api-3, http-status-code-404, tiles

使用瓦片覆盖时，到目前为止我看到的唯一方法是在抓取瓦片时听 Google，从调用中获取 X、Y、Z 坐标，并将其与瓦片集进行比较。

```
var tileOptions = {
    getTileUrl: function(coord, zoom) {
        return "/tiles/" + zoom + "_" + coord.x + "_" + coord.y + ".png";
    }
} 
```

如果 X,Y,Z 处的图块存在，则正常找到并调用它。如果没有，则出现 404 错误。就我而言，我有六组可能同时处于活动状态的图块，创建图块的脚本会忽略并且不会创建空白图块，这意味着每次地图更改缩放或位置时，都会出现当所有图块都尝试加载时，可能会出现一百个以上的 404 错误。

为了尝试在某些方面帮助解决这个问题，我将图块搜索限制在图块覆盖的区域：

```
var tileOptions = {
    if (zoom>=16 && zoom<=20) {
        if (zoom=16) { if (coord.x>=16000 && coord.x<=16004) { if (coord.y>=24200 && coord.y<=24203) { 
            getTileUrl: function(coord, zoom) {
                //return the tiles
            }}}
        }
        if (zoom=17) //...
        }
        if (zoom=18) //...
        }
        //...
    }
} 
```

但是，该区域跨越 8x10 块的区域，并没有完全被叠加层覆盖。这种方法除了仅在用户试图远离地图时防止错误外，还过于复杂，可能会减慢图块调用过程。

因此，我正在寻找一种“放置”瓷砖而不是“调用”它们的方法：而不是地图询问“你有这个瓷砖”并冒着 404 错误的风险，脚本或函数会说“我有这些瓷砖，放置它们”忽略丢失的瓷砖（空白），理想情况下只加载页面上可见的瓷砖。

或者，我也在寻找一种让函数知道存在哪些图块的方法，因此它只尝试调用这些标题，从而避免 404 错误。

简而言之，如何避免调用磁贴时出现 404 错误？

* * *

**写完问题后的想法**：我假设第一个理想的解决方案是获取 if 语句的堆栈并将它们转换为对图块的更动态检查，如果存在图块，则使用“返回”来实际调用它；但是，这似乎仍然导致相同的 404 错误，但来自不同的功能。

* * *

**使用索引**：正如下面由 meetamit 提出的*（如果我理解正确的话）*，首先创建一个索引来检查图块的存在/不存在，而不是调用图块并使用 404 作为检查。但是，使用一组“Z_X_Y.png”格式的图块，我如何轻松创建这些索引？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-11T19:38:48.180

听起来您正在扩展 ImageMapType，这需要您实现该`getTileUrl()`方法。正如您所说，要“放置”而不是“调用”图块，您需要创建一个[Overlay Map Type](https://developers.google.com/maps/documentation/javascript/maptypes#OverlayMapTypes)，它本质上涉及更多，并且当您尝试做自己的事情时会更加参与描述使用 404。

但实际上，无论您如何实现这一点，如果您依赖 404 作为图像存在的“测试”，您可能会通过捆绑与服务器的不必要连接来严重降低地图的性能。理想情况下（正如您所暗示的），客户端会有一些索引来表示哪些图块可用。如果索引指示某个图块不可用，您`getTileUrl()`将返回`null`. 也就是说，假设 Google Maps API 知道不尝试加载`null`url；如果不是这种情况，则该方法可以返回透明图像的 URL，该 URL 会被缓存一次并重新用于每个丢失的图块。

如何表示这个指标是一个选择问题。它可能是一个简单的 JSON，它可能会变得非常大（但即使是这样，每个客户端都会缓存它，以便它加载一次）。或者，您可以发挥创意并提出一种更简洁的格式来表示索引。你甚至可以预先生成一个图像，例如，代表存在或缺乏瓦片的黑白像素。然后，您将该图像绘制到 a`<canvas>`中并从画布中读取适当的像素以确定该图块是否存在。

**在细化问题后添加到答案**

JSON 索引可能如下所示：

```
var index = {
  "4": {
    xMin: 10,
    xMax: 31,
    yMin: 4,
    yMax: 11,
    tiles: [1,1,1,0,1,0,1,1,1,0,1,0,1,0,1,1,1 ...]
  },
  "5": {
    xMin: 5,
    xMax: 16,
    yMin: 2,
    yMax: 6,
    tiles: [1,1,1,1,0,0,1,1,1,0,0,1,1 ...]
  }
} 
```

每个顶级对象对应于缩放级别。这样，`index["5"].tiles`为您提供缩放级别 5 的所有图块。`1`意味着您有图块，`0`意味着没有图块。最小值/最大值`xMin, xMax, yMin, yMax`用于定义您关注的区域——因为您已经指出您的图块不覆盖整个世界。

要确定是否存在图块：

```
function tileExists(z, x, y) {
  var obj = index[String(z)],
      tilesPerRow = obj.xMax - obj.xMin,
      // Calculate the index of tile within the sequential array
      iTile = (x - obj.xMin) + ((y - obj.yMin) * tilesPerRow);

  return Boolean(obj.tiles[iTile]);
} 
```

同样，使用 JSON，这个索引可能会变得非常大。这取决于您所覆盖的世界范围以及缩放级别。在缩放级别 10 下，如果您覆盖整个世界，您将拥有大约 100 万个图块，这意味着一个非常大的阵列。然后您可能需要采用更压缩的格式。如何定义它取决于您。您可以将其定义为将数组`[14,2,120,1,201,3]`解释为“14 个 1，后跟 2 个 0，然后是 120 个 1，然后是 1 个零，等等……”这实际上取决于您的数据是什么样的，以及您的工作量'愿意/能够做。希望这有足够的帮助。

# java - Java 中的条件编译：编译器会从类中省略“始终为假”的块吗？

> ID：10985991
> 
> 赞同：3
> 
> 时间：2012-06-11T19:02:31.123
> 
> 标签：java

下面是我的代码片段：

```
class A { 

   private boolean debug = false;

   // Called when server boots up.
   public void init (property) { 
      debug = property.getBoolean ("debug_var"); // read debug from a config file.
   }

   // some other function  
   public void foo () { 
       if (debug) { 
                 System.out.println ("From inside the debug block");
       }
   }
 } 
```

当我运行代码时， if (debug) 实际上在配置文件中打印出“从内部调试块”如果 debug == true。

两个问题：

1.  那么，在这种情况下，编译器是否将 if 块包含在 .class 文件中只是因为变量 debug 的值可能会在运行时发生变化？

2.  如果这是真的，那么如何在某些环境中消除将某些代码添加到 .class 文件中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T19:06:12.827

如果你必须做这样的事情，大多数日志框架都有自己设置日志详细级别的方法，它们只是不会在运行时输出任何级别太低的日志语句。使用日志框架来正确执行此操作。

例如，使用内置的 java.util.logging 框架，您可以执行类似的操作

```
Logger.getLogger("ThisClass").log(Level.FINE, "Log message"); 
```

只有当日志级别设置为 FINE 或更低时才会打印，但当日志级别为 CONFIG 或更低时会被忽略。

一般来说，“条件编译”在 Java 中没有意义，但需要注意的是，JIT 会优化掉它可以确定永远不会执行的分支。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T19:11:07.143

正如其他人所指出的那样，Java 编译器通常非常幼稚，只是将您拥有的 Java 源代码转换为 Java 字节码。例如，一条`if`语句最常被转换为条件分支，无论您是否发现分支条件总是为假是显而易见的。

然而，从**理论**的角度来看，没有什么可以阻止编译器找出某些分支永远不会被采用，并在字节码中简单地省略它们。**Java 语言规范中没有任何内容规定在以字节码为目标时应*如何编译某些内容。***

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-11T19:11:25.360

最接近的方法是使用静态变量，这在运行时（基本上）是无用的。

但是，在您的示例中，JVM 可能会在运行足够多的时间后将其优化掉，因此如果您关心的是运行时效率，则可能不值得担心。

最终我会问你为什么要根据环境从*类*文件中删除代码——如果它不是可以在运行时改变的东西，那么你最好的选择是创建某种形式的可以确定/注入的可插入实现在运行时。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-11T19:06:02.373

没有像条件编译这样的东西（除非 java 找到一个保证不会执行的条件）。您的类文件包含的字节码与您在 Java 文件中的任何内容相同。

编辑：正如 aiobee 所指出的，如果编译器发现分支语句不被执行，它可能会省略它们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-11T19:07:50.320

1.  是的，编译器会将其包含在 .class 文件中。
2.  没有条件编译的机制。您可以通过使用编译器插件（在 JDK 1.7 和更高版本中）来模拟其中的一些，或者您可以尝试通过使用像 AspectJ 这样的字节码操作技术来实现类似的效果。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-11T19:09:43.393

过去，如果您将布尔值声明为`static`and`final`并将其值设置为`false`，编译器将忽略代码。不过，那是最初的 Java 编译器。我不知道当前的是否这样做（当前的已经存在很长时间了）。这背后的基本原理是让您可以使您的小程序下载更小。它充其量只是一个笨拙的机制，因此没有被广泛使用。

要对此进行测试，请更改您的调试变量以对其进行`private static final boolean debug=false;`编译，保存类文件，然后将其翻转为 true。然后再编译一遍，看看class文件有没有不同。顺便说一句，当 debug 声明为 final 时，您的 init 函数将不起作用。

# wpf - 如何创建/处理 IsMouseOverChanged

> ID：10985993
> 
> 赞同：1
> 
> 时间：2012-06-11T19:02:42.033
> 
> 标签：wpf, events, properties, mouse

我喜欢 IsMouseDirectlyOverChanged 的​​功能，但它只适用于最顶层的元素。我真正想做的是监视控件的 IsMouseOver 属性，而不考虑它的 z-index，并在 IsMouseOver 被修改时接收通知。如果我拥有这个属性，我可以执行 INotifyPropertyChanged，但不幸的是它归 UIElement 所有。仍在学习 WPF 的原理，所以这可能很容易，但我不熟悉如何监视属于父类的属性。与 IsMouseDirectlyOver 不同，IsMouseOver 没有附加更改事件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-16T17:27:21.810

我看到有一个公认的解决方案，我只是想分享我的意见。在我的情况下，我在用户控件中有一个标签，我需要对鼠标结束做出反应。对我来说，MouseEnter 和 MouseLeave 事件会触发，所以我可以处理它们。我在后面的代码中定义了标签（因为我以编程方式将它放在运行时）并且刚刚添加了标签对象的标准事件。IsMouseDirectlyOverChanged 对我不起作用，因为我将鼠标悬停在用户控件上。如果有另一个 Control 重叠，这也有效。因此，也许这不适合您的情况，也许确实如此 :-)
我也想粘贴 xaml，但似乎我没有得到降价的东西 :-)

```
...
    Private Sub Rectangle1_MouseEnter(sender As Object, e As System.Windows.Input.MouseEventArgs) 处理 Rectangle1.MouseEnter, Rectangle2.MouseEnter
        Dim s As Rectangle = 发件人
        s.Fill = Brushes.Red
    结束子

    Private Sub Rectangle1_MouseLeave(sender As Object, e As System.Windows.Input.MouseEventArgs) 处理 Rectangle1.MouseLeave, Rectangle2.MouseLeave
        Dim s As Rectangle = 发件人
        s.Fill = Brushes.Green
    结束子
...

```

BR, D

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-11T19:15:41.753

您可以使用样式对 IsMouseOver 更改时做出反应。

```
<Window.Resources>
     <Style x:Key="RectStyle" TargetType="Rectangle">
          <Style.Triggers>
               <Trigger Property="IsMouseOver" Value="True">
                    <!-- react to property change here -->
               </Trigger>
          </Style.Triggers>
     </Style>
 </Window.Resources> 
```

然后将样式附加到元素上：

```
<Rectangle Style="{StaticResource RecStyle}" Width="100" Height="100" Fill="Black" /> 
```

**编辑：**

如果您想从样式中调用代码，则解决方案相当复杂。

首先，您必须创建一个自定义 UserControl 类并为其提供附加属性。每当附加属性发生更改时，您都可以使用属性更改回调。这是`*.xaml.cs`文件，只保留默认`.xaml`文件：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;

namespace ExampleApp
{
    /// <summary>
    /// Interaction logic for MouseOverWrapper.xaml
    /// </summary>
    public partial class MouseOverWrapper : UserControl
    {

        public static readonly DependencyProperty MouseIsOverProperty;

        static MouseOverWrapper()
        {
            MouseIsOverProperty = DependencyProperty.RegisterAttached(
                "MouseIsOver", typeof(bool), typeof(MouseOverWrapper),
                new FrameworkPropertyMetadata(false, OnMouseIsOverChanged));
        }

        public static bool GetMouseIsOver(UIElement element)
        {
            return (bool)element.GetValue(MouseIsOverProperty);
        }

        public static void SetMouseIsOver(UIElement target, bool value)
        {
            target.SetValue(MouseIsOverProperty, value);
        }

        private static void OnMouseIsOverChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
        {
            // handle code here. example:
            if ((bool)e.NewValue == true)
                ((Rectangle)d).Fill = Brushes.Yellow;
            else
                ((Rectangle)d).Fill = Brushes.Black;
        }

        public MouseOverWrapper()
        {
            InitializeComponent();
        }
    }
} 
```

然后，您必须将要响应的元素包装在自定义控件中，并使样式更改该自定义控件的附加属性。例子：

```
<Window x:Class="ExampleApp.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:ExampleApp"
        Title="MainWindow" Height="350" Width="525">
    <Window.Resources>
        <Style x:Key="RecStyle" TargetType="Rectangle">
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="local:MouseOverWrapper.MouseIsOver" Value="True" />
                </Trigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>
    <local:MouseOverWrapper>
        <Rectangle Style="{StaticResource RecStyle}" Width="100" Height="100" Fill="Black" />
    </local:MouseOverWrapper>
</Window> 
```

将所有代码添加到`OnMouseOverIsChanged`函数中，这应该可以工作。

# asp.net-mvc-3 - 部分视图页面中的 NullReferenceException

> ID：10985995
> 
> 赞同：1
> 
> 时间：2012-06-11T19:02:47.510
> 
> 标签：asp.net-mvc-3, asp.net-mvc-3-areas

感谢您阅读本文。

我不知道为什么会在 _GetDate.cshtml 中抛出 NullReferenceException：

```
<legend>For This @Model.lob.ToUpper() Please Enter Date Range</legend> 
```

SomeController 传递模型 --> Index.cshtml --> @Html.Partial("_GetDate", Model)

此外，当我在中间窗口中打破上面的一行时，我可以看到@Model.lob 的值。

这是堆栈跟踪：

```
System.NullReferenceException was unhandled by user code
Message=Object reference not set to an instance of an object.
Source=App_Web_l250s0ch
StackTrace:
    at ASP._Page_Views_Shared__GetDate_cshtml.Execute() in c:\Visual Studio 2010\Projects\Web\SomeProject\SomeProject\Views\Shared\_GetDate.cshtml:line 7
    at System.Web.WebPages.WebPageBase.ExecutePageHierarchy()
    at System.Web.Mvc.WebViewPage.ExecutePageHierarchy()
    at System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage)
    at System.Web.Mvc.RazorView.RenderView(ViewContext viewContext, TextWriter writer, Object instance)
    at System.Web.Mvc.BuildManagerCompiledView.Render(ViewContext viewContext, TextWriter writer)
    at System.Web.Mvc.HtmlHelper.RenderPartialInternal(String partialViewName, ViewDataDictionary viewData, Object model, TextWriter writer, ViewEngineCollection viewEngineCollection)
    at System.Web.Mvc.Html.PartialExtensions.Partial(HtmlHelper htmlHelper, String partialViewName, Object model, ViewDataDictionary viewData)
    at System.Web.Mvc.Html.PartialExtensions.Partial(HtmlHelper htmlHelper, String partialViewName, Object model)
    at ASP._Page_Views_Balance_GetDate_cshtml.Execute() in c:\Visual Studio 2010\Projects\Web\SomeProject\SomeProject\Views\Balance\GetDate.cshtml:line 22
    at System.Web.WebPages.WebPageBase.ExecutePageHierarchy()
    at System.Web.Mvc.WebViewPage.ExecutePageHierarchy()
    at System.Web.WebPages.StartPage.RunPage()
    at System.Web.WebPages.StartPage.ExecutePageHierarchy()
    at System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage)
    at System.Web.Mvc.RazorView.RenderView(ViewContext viewContext, TextWriter writer, Object instance)
    at System.Web.Mvc.BuildManagerCompiledView.Render(ViewContext viewContext, TextWriter writer)
    at System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context)
    at System.Web.Mvc.ControllerActionInvoker.InvokeActionResult(ControllerContext controllerContext, ActionResult actionResult)
    at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1c.<InvokeActionResultWithFilters>b__19()
    at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation)
InnerException: 
```

这是 GetDate.cshtml（第 22 行 = @Html.Partial("_GetDate", Model)）：

```
@model SomeProject.Models.DateParameter

@{
    ViewBag.Title = "GetDate";
}

@section script{
 @Content.Script("/UI/jquery.ui.core.js", Url)
 @Content.Script("/UI/jquery.ui.widget.js", Url)
 @Content.Script("/UI/jquery.ui.datepicker.js", Url)
 @Content.Script("MyCustomScript.js", Url)
}

@*<script src="@Url.Content("~/Scripts/UI/jquery-ui-1.8.18.custom.js")" type="text/javascript"></script>*@
@*<script src="@Url.Content("~/Scripts/UI/jquery.ui.core.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/UI/jquery.ui.widget.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/UI/jquery.ui.datepicker.js")" type="text/javascript"></script>*@
@*@Content.ScriptinUI("jquery.ui.datepicker.js", Url)*@

<div id="table_div">

    @Html.Partial("_GetDate", Model)

</div> 
```

这是“_GetDate”：

```
@model SomeProject.Models.DateParameter
<h2>@Model.lob.ToUpper() </h2>
    <table id="MainTable">
    <tr class="DatePicker"> <td>
    @Model.lob.ToUpper() 
    </td></tr>
</table> 
```

这是来自控制器的代码：

```
 public ActionResult GetDate(string lob)
    {
        var model = new DateParameter();
        model.lob = lob;
        ViewBag.lob = lob;
        return View(model);
    }

    [HttpPost]
    public ActionResult GetDate(FormCollection values, DateParameter newDateParameter)
    {
        if (ModelState.IsValid)
        {
            TempData["MyDate"] = newDateParameter;                
            return RedirectToAction("Listing");
        }
        else
        {
            return View(newDateParameter);
        }
    } 
```

还可以包括 DateParameter 类：

```
public class DateParameter : IValidatableObject
{
    [Required]
    [StringLength(3)]
    public virtual string lob { get; set; }

    [Required]
    [DataType(DataType.DateTime)]
    [DisplayName("Start Date")]
    public virtual DateTime DateStart { get; set; }

    [Required]
    [DataType(DataType.DateTime)]
    [DisplayName("End Date")]
    public virtual DateTime DateEnd { get; set; }

    //VALIDATE DATES

    public IEnumerable<ValidationResult> Validate(ValidationContext validationContext)
    {
        //SET ERROR NEXT TO THE FIELD
        var field = new[] { "DateEnd" };

        if (DateEnd > DateTime.Now.AddDays(1))
        {
            yield return new ValidationResult("The End Date Cannot Be Greater Than Today", field);
        }
    }
} 
```

知道如何在部分视图页面中返回 @Model.lob 中的字符串吗？

蒂亚！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T18:28:00.140

对于什么值得重新启动纠正了这个问题。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-12T14:02:55.817

@Model.lob 设置了吗？

如果没有，调用它的方法将抛出报告的异常。

# php - 可变输出json数据的问题

> ID：10985999
> 
> 赞同：0
> 
> 时间：2012-06-11T19:03:03.120
> 
> 标签：php, html, json, variables

我正在使用 php。我无法让我的输出正常工作。我正在用 yql 抓取 html，所以我的 json 文件并不完全完美。例如，

```
{
 "td": [
  {
   "a": {
    "class": "audioPlayer",
    "href": "http://files.emfcdn.com/downloads/audio/hooks/3567.mp3",
    "img": {
     "border": "0",
     "class": "audioPlayer",
     "height": "22",
     "onmouseout": "this.src='/images/music/songplay-norm.jpg'",
     "onmouseover": "this.src='/images/music/songplay-over.jpg'",
     "src": "/images/music/songplay-norm.jpg",
     "width": "30"
    }
   }
  },
  {
   "p": "2."
  },
  {
   "img": {
    "alt": "Mandisa",
    "id": "ctl00_ctl00_cphMain_cphMiddleColumn_grdSongs_ctl03_imgAlbum",
    "src": "http://objects.klove.com/Common/Thumbnail.aspx?f=/art/albumart/1704.jpg&s=58&",
    "style": "border-width:0px;"
   }
  },
  {
   "a": {
    "href": "/music/artists/mandisa/songs/good-morning-(feat.-tobymac)-lyrics.aspx",
    "id": "ctl00_ctl00_cphMain_cphMiddleColumn_grdSongs_ctl03_hypTitle",
    "style": "font-weight:bold;",
    "content": "Good Morning (feat. tobyMac)"
   },
   "br": null,
   "p": {
    "a": {
     "href": "/music/artists/mandisa/",
     "id": "ctl00_ctl00_cphMain_cphMiddleColumn_grdSongs_ctl03_Hyperlink1",
     "content": "Mandisa"
    },
    "content": "by "
   }
  },
  {
   "p": "What If We Were Real"
  },
  {
   "style": "width:110px;",
   "a": {
    "href": "http://click.linksynergy.com/fs-bin/stat?id=SUbYnR25dhw&offerid=146261&type=3&subid=0&tmpid=1826&RD_PARM1=http%253A%252F%252Fitunes.apple.com%252Fus%252Falbum%252Fid425892874%253Fi%253D425892890%2526uo%253D4%2526partnerId%253D30",
    "id": "ctl00_ctl00_cphMain_cphMiddleColumn_grdSongs_ctl03_hypItunes",
    "target": "_blank",
    "content": "iTunes"
   },
   "p": {
    "a": {
     "href": "http://www.amazon.com/exec/obidos/ASIN/B004SBW1LS/klr-20/ref=nosim/",
     "id": "ctl00_ctl00_cphMain_cphMiddleColumn_grdSongs_ctl03_hypAmazon",
     "target": "_blank",
     "content": "Amazon"
    },
    "content": "| "
   }
  }
 ]
} 
```

，这是我从带有 yql 的网站上抓取的 html 中的项目之一。我想变回声，“如果我们是真实的”。但是 json 对象的标题是“p”，我不知道如何从中提取“如果我们是真实的会怎样”。

我试过了，

```
$albumname = $item->p 
```

，但如您所见，列表中有多个“p”。任何帮助都会很棒。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T19:15:51.023

当我遇到这样的怪物时，我做的第一件事就是这样做：

```
$estr = json_decode($str,TRUE);
echo "<pre>";
print_r($estr);
echo "</pre>"; 
```

那么很容易发现：

```
echo $estr["td"][4]["p"]; 
```