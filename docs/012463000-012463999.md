# StackOverflow 问答 12463000-12463999

# mysql - MYSQL - 使用逗号分隔的字符串作为变量输入的存储过程

> ID：12463001
> 
> 赞同：9
> 
> 时间：2012-09-17T16:00:30.160
> 
> 标签：mysql, stored-procedures

我希望有人能够提供帮助。我已经创建了我的第一个存储过程（没什么花哨的）但是我遇到了一个问题。

我想给它一个字符串输入，例如 1,2,3,4,5 然后它做一个简单的`SELECT * FROM [TABLE] WHERE EAN IN (VAR);`

所以存储过程如下所示：

```
-- --------------------------------------------------------------------------------
-- Routine DDL
-- Note: comments before and after the routine body will not be stored by the server
-- --------------------------------------------------------------------------------
DELIMITER $$

CREATE PROCEDURE `moments`.`new_procedure`(IN var1 VARCHAR(255))
BEGIN

SELECT * FROM moments.PRODUCT WHERE EAN IN (var1);

END 
```

我正在尝试像这样执行它：

**作品**

```
call moments.new_procedure('5045318357397') 
```

**不工作**

```
call moments.new_procedure('5045318357397,5045318357427'); 
```

这会执行但不会带回任何结果。是否将第二个语句归类为字符串，所以它这样做：

```
select * from moments.PRODUCT WHERE EAN IN ('5045318357397,5045318357427') 
```

而不是这个：

```
select * from moments.PRODUCT WHERE EAN IN ('5045318357397','5045318357427') 
```

我如何必须格式化执行查询中的输入以使其以逗号分隔的字符串作为输入？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-17T16:12:17.877

你可以使用：

```
SELECT * FROM moments.PRODUCT 
WHERE FIND_IN_SET(EAN, var1) 
```

假设它实际上是逗号分隔的，这应该可以工作。在这种情况下，任何其他定界都不起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T16:06:29.803

假设您传递的字符串以某种方式经过验证并且不包含恶意 sql，您可以使用准备好的语句：

```
PREPARE stmt1 FROM CONCAT('select * from moments.PRODUCT WHERE EAN IN (',var1,')');
EXECUTE stmt1; 
```

# javascript - 从单个响应元素获取多个高度值

> ID：12463005
> 
> 赞同：0
> 
> 时间：2012-09-17T16:00:51.050
> 
> 标签：javascript, html, css, responsive-design, media-queries

我有一个 HTML 元素，其高度取决于调用的媒体查询。

如果css是，有什么方法可以存储文档加载时两个查询的元素高度`height: auto;`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T16:21:08.687

尝试使用[`$(selector).height( value )`](http://api.jquery.com/height/)来获取或设置高度

# java - 如何使具有大字体的 LabelField 居中

> ID：12463007
> 
> 赞同：1
> 
> 时间：2012-09-17T16:00:54.767
> 
> 标签：java, blackberry, java-me

我需要使用垂直字段管理器将 LabelField 水平居中。我还需要增加这个 LabelField 的字体大小。我发现，一旦我使用 FIELD_HCENTER 将其居中，如果我更改字体的大小，它就会更改字段的位置。

这是代码

```
VerticalFieldManager vfm = new VerticalFieldManager(Field.FIELD_VCENTER | Manager.USE_ALL_WIDTH);
LabelField title = new LabelField("My Title",Field.FIELD_HCENTER) ;
title.setFont(Font.getDefault().derive(Font.BOLD, 18, Ui.UNITS_pt);
vfm.add(title); 
```

（如果我删除第三行，title.setFont，那么标题居中，否则，它不是）。我需要一些帮助来解决这个问题。任何帮助表示赞赏？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T18:16:19.303

`sublayout`您可以通过覆盖的方法来创建自定义 FieldManger `VerticalFieldManager`，这会将其子项置于中心。下面的一个就是这样的实现。

```
class CustomVerticalFieldManger extends VerticalFieldManager {
        private final int VERTICAL_GAP = 30;

        protected void sublayout(int maxWidth, int maxHeight) {
            int nFields = getFieldCount(), height = 0, xPosition, yPosition = 0;
            Field f;
            for (int i = 0; i < nFields; i++) {
                f = getField(i);
                layoutChild(f, maxWidth, maxHeight);
                height += f.getHeight();
                if (i != 0) {
                    height += VERTICAL_GAP;
                }
            }
            for (int i = 0; i < nFields; i++) {
                f = getField(i);
                xPosition = (maxWidth - f.getWidth()) / 2;
                setPositionChild(f, xPosition, yPosition);
                yPosition += f.getHeight();
                if (i != nFields - 1) {
                    yPosition += VERTICAL_GAP;
                }
            }
            setExtent(maxWidth, height);
        }
    } 
```

***用法***

```
class MyScreen extends MainScreen {
    private LabelField lblOne, lblTwo, lblThree;

    public MyScreen() {
        CustomVerticalFieldManger cvfm = new CustomVerticalFieldManger();
        cvfm.setBackground(BackgroundFactory.createSolidBackground(Color.AQUA));

        lblOne = new LabelField("The quick brown fox jumps over the lazy dog");
        lblTwo = new LabelField("The quick brown fox jumps over the lazy dog");
        lblThree = new LabelField("The quick brown fox jumps over the lazy dog");

        cvfm.add(lblOne);
        cvfm.add(lblTwo);
        cvfm.add(lblThree);

        add(cvfm);

        changeFont();
    }

    private int fontSize = 5;

    private void changeFont() {
        Timer timer = new Timer();
        TimerTask task = new TimerTask() {
            public void run() {
                UiApplication.getUiApplication().invokeLater(new Runnable() {
                    public void run() {
                        if (fontSize == 50) {
                            fontSize = 5;
                        }
                        lblOne.setFont(Font.getDefault().derive(Font.PLAIN,
                                fontSize));
                        lblTwo.setFont(Font.getDefault().derive(Font.PLAIN,
                                fontSize + 2));
                        lblThree.setFont(Font.getDefault().derive(Font.PLAIN,
                                fontSize + 4));
                        fontSize += 6;
                        updateLayout();
                        invalidate();
                    }
                });
            }
        };

        timer.schedule(task, 500, 1000);
    }
} 
```

# asp.net-mvc - 捕获文件名作为参数的 MVC 路由

> ID：12463021
> 
> 赞同：9
> 
> 时间：2012-09-17T16:01:41.833
> 
> 标签：asp.net-mvc

我正在尝试使用 MVC 生成一个简单的 WebDAV 服务器，我终于到了需要向用户提供请求文件的阶段。

我设置了一个路由来处理遍历`"webdav/{*path}"`工作正常的目录结构，直到该路径以文件名结尾。此时，IIS 似乎认为它是一个静态文件，并尝试从磁盘提供该文件。由于它不在 URL 中指定的位置，因此它返回 404 错误。

我没有任何更改 url 的自由，我基本上需要它在表单中，否则 Windows 资源管理器无法将其用作映射驱动器：

```
GET /webdav/Test/Test2.txt 
```

我已经将路由设置为贪婪匹配，因为目录结构可以有多个级别。我也设置了`routes.RouteExistingFiles = true;`

这是在我的开发机器上使用 IIS Express 8.0。

我已经建立了一个空白的 MVC 项目来测试它，这就是 RegisterRoutes 方法：

```
routes.RouteExistingFiles = true;

routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

routes.MapRoute(
    name: "WebDAVGet",
    url: "webdav/{*path}",
    defaults: new { controller = "WebDAV", action = "Get", path = "" });

routes.MapRoute(
    name: "Default",
    url: "{controller}/{action}/{id}",
    defaults: new { controller = "Home", action = "Index", 
    id = UrlParameter.Optional }
); 
```

所以，要`/webdav/Test/Test2`在我的控制器中命中断点，但要给`/webdav/Test/Test2.txt`我一个 404。

有什么建议么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-17T16:26:14.097

我需要添加

```
<modules runAllManagedModulesForAllRequests="true"> 
```

到网络配置。

啊，我这几天一直在苦苦挣扎，我知道在这里发帖会转移阻塞！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-24T21:00:02.737

另一种选择是将其添加到 web.config 中的 <system.webserver> 节点：

```
<modules>
  <remove name="UrlRoutingModule-4.0" />
  <add name="UrlRoutingModule-4.0" type="System.Web.Routing.UrlRoutingModule" preCondition="" />
</modules> 
```

我可以保证这适用于 IIS 7.5。

作为记录，我在[这里](http://www.britishdeveloper.co.uk/2010/06/dont-use-modules-runallmanagedmodulesfo.html)找到了这个解决方案。

# c++ - 构造函数的快捷方式

> ID：12463023
> 
> 赞同：0
> 
> 时间：2012-09-17T16:01:47.963
> 
> 标签：c++

其实我不知道如何定义这个成语。

在一些代码中，我有红色的东西：

```
ClassWithAMessage c = "This is the message"; 
```

我希望读到的地方：

```
ClassWithAMessage c("This is the message"); 
```

我不知道如何重现这种行为，有人可以提供一些信息或玩具示例吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T16:03:10.003

```
ClassWithAMessage c = "This is the message"; 
```

是**拷贝初始化**。必须有一个复制构造函数才能使其工作。`ClassWithAMessage`首先，使用来自的转换构造函数构造一个临时的`"This is the message"`。然后将临时值与复制构造函数一起使用来构造`c`. 这会受到复制省略的影响（温度可能不存在）。

```
ClassWithAMessage c("This is the message"); 
```

是**直接初始化**。直接使用转换构造函数。

不是真正的习语，只是构造对象的不同方式。

# oauth - oauth 访问令牌验证 google

> ID：12463028
> 
> 赞同：3
> 
> 时间：2012-09-17T16:02:02.827
> 
> 标签：oauth, access-token, validating

我们如何验证用于访问资源的 Oauth 访问令牌？这是我面临的情况。我正在存储用于访问资源的长期访问令牌。现在它突然开始为该访问令牌失败，我不能找到有关此令牌失败原因的任何错误。当我重新生成令牌时，它再次开始工作。所以简而言之，我可以在使用 OAuth 访问令牌之前验证它吗？如果是这样怎么办？我已经尝试过在 [https://developers.google.com/accounts/docs/OAuth2Login#validatingtoken](https://developers.google.com/accounts/docs/OAuth2Login#validatingtoken)给出的步骤。但即使在无效代币的情况。

# mysql - SQL INSERT 插入 MySQL 表，其中列名包含撇号

> ID：12463031
> 
> 赞同：0
> 
> 时间：2012-09-17T16:02:11.847
> 
> 标签：mysql, insert

有谁知道我如何在列名包含撇号的 MySQL 表中执行 SQL INSERT 操作，例如：

```
INSERT INTO MYTABLE (`id`, `Column'1`, `Column'2`) VALUES... 
```

我尝试过这样的事情但无济于事：

```
INSERT INTO MYTABLE (`id`, `Column''1`, `Column''2`) VALUES...

INSERT INTO MYTABLE (`id`, `Column\'1`, `Column\'2`) VALUES... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T16:08:21.063

您应该能够在列名周围放置反引号：

```
INSERT INTO MYTABLE (`id`, `Column'1`, `Column'2`) VALUES... 
```

# 见[SQL Fiddle with Demo](http://sqlfiddle.com/#!2/0c2f0/1)

```
create table yourtable
(
  id int,
  col1 varchar(10),
  `col'2` varchar(10)
);

insert into yourtable (id, col1, `col'2`) values
(1, 'test', 'sdfsd'),
(1, 'test', 'gtet') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-17T15:03:35.380

只需将名称放入变量中并使用字符 39 作为撇号。

例子 ：

`L'oiseau`变成：

```
Loiseau = 'L' + chr(39) + 'oiseau'
print(Loiseau) 
```

=>`L'oiseau`

# android - 两次创建光标的问题

> ID：12463032
> 
> 赞同：0
> 
> 时间：2012-09-17T16:02:12.397
> 
> 标签：android, cursor, textview, indexoutofboundsexception

关于光标的使用真的很困惑。

我有一项工作正常的活动，代码如下：

```
public class AreaActivity extends ListActivity {

private TextView secondaryTitle;
private Button newArea;
private static final int ACTIVITY_CREATE=0;

private RMDbAdapter rmDbHelper;
private AlertDialog clickOptionsDialog;
private long inspectionId;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_area);
    rmDbHelper = new RMDbAdapter(this);
    rmDbHelper.open();
    Intent i = getIntent();
    inspectionId = i.getLongExtra("Intent_InspectionID", -1);
    setUpViews();
    setLongClick();

    // Get a Cursor for the list items
    Cursor listCursor = rmDbHelper.fetchAllAreasForInspection(inspectionId);
    startManagingCursor(listCursor);           

    // set the custom list adapter     
    setListAdapter(new MyListAdapter(this, listCursor));

}

private void setUpViews() {
    secondaryTitle = (TextView)findViewById(R.id.secondary_title);
    final Cursor cursor = (Cursor) rmDbHelper.fetchInspection(inspectionId);
    String inspectionRef = RMUtilities.notEmpty(cursor.getString(cursor.getColumnIndex( 
            RMDbAdapter.INSPECTION_REF)), "Reference unknown"); 
    String companyName = RMUtilities.notEmpty(cursor.getString(cursor.getColumnIndex( 
            RMDbAdapter.INSPECTION_COMPANY)), "company unknown"); 
    cursor.close();
    final String secondaryTitleText = inspectionRef + ", " + companyName;
    secondaryTitle.setText(secondaryTitleText);
    newArea = (Button)findViewById(R.id.new_area);
    newArea.setOnClickListener(new View.OnClickListener() {                     
        public void onClick(View v) {
            createArea();
        }
    }); 

} 
```

光标从数据库中获取信息，然后检查它是否为空（使用本网站上向我推荐的单独类中的代码）并将文本设置在`TextView`.

但是，当我在下一个活动中使用这个确切的代码来做同样的事情时，我得到了错误：

> CursorIndexOutOfBoundsException: 请求索引 0，大小为 0..

代码是一样的，所以我猜这是复制游标或不使用的问题，`moveToFirst`但我所做的似乎没有解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T16:09:28.457

由于 njzk2 发现了问题 - 当我将inspectionId 传递给 Intent 时出现愚蠢的错误..

# crontab - crontab 问题：每分钟执行一个小时，而不是每天执行一次

> ID：12463035
> 
> 赞同：0
> 
> 时间：2012-09-17T16:02:25.607
> 
> 标签：crontab

我有一个 crontab 问题：

```
0 6 * * * cd /path/to/file 
```

应该在每天早上 6:00 执行

问题是，由于某种原因，它每分钟执行 60 分钟......奇怪。

我究竟做错了什么？不存在指向此文件的其他 crontab

我已经在网上对此进行了研究，并且认为这个 crontab 表示法是正确的。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T16:12:18.953

您是否使用了一些奇怪的编辑器，这些编辑器会产生奇怪的文件结尾或错误的字符编码？你绝对确定它应该到处都有空格吗？这可能是微不足道的，不用说，但我遇到了同样的问题，解决方案是那种。再检查一遍 ：-）

# javascript - 仅在不写入时获取 javascript keydown 事件

> ID：12463038
> 
> 赞同：2
> 
> 时间：2012-09-17T16:02:35.640
> 
> 标签：javascript, keydown

> **可能重复：**
> [主体上的 Javascript 事件处理程序而不是输入](https://stackoverflow.com/questions/7230976/javascript-event-handler-on-body-but-not-on-input)

我写了一个简短的脚本来监听 keydown 事件，但如果我在文本字段中写入，我想忽略它。

我不知道如何在没有奇怪技巧的情况下做到这一点，例如检查是否专注于其中一个输入。

这是我现在的代码。

```
document.addEventListener('keydown', function(event) {
    if(event.keyCode == 71) {
        showSelected();
    }
    else if(event.keyCode == 13) {
        closeModal();
    }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T16:20:54.473

`contenteditable`如果你正在做一些事情（比如让用户在他们想要在页面上的任何 divs/spans/boxes 中写入文本），这有点棘手。

如果是这样，这将需要一些思考和修改（这并不*难*- 只是更多的参与）。

但是，您可以根据要排除的类型列表检查`event.target`（事件发生的元素）的属性。`tagName`

```
function keyEvent (evt) {
    var key = evt.keyCode,
        el = evt.target,
        type = el.tagName.toLowerCase();
        // tag names are upper-case... almost always...
        // so convert one way or the other, to be sure  
    if (type === "input" || type === "textarea") { return; }
    /* do whatever you were going to do */
} 
```

还应该注意的是，这个解决方案（以及到目前为止的代码）与 ghetto-IE 不兼容。为此，您需要使用`attachEvent`and`window.event`和`window.event.srcElement`属性，因为它们不支持`addEventListener`和`e`/`event`函数参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T16:35:20.827

只需检查`event.target`

```
{ 
   if (event.target.tagName.toUpperCase() == 'INPUT') return false;

    // Do your Coding
} 
```

# javascript - 在 JAVASCRIPT 模块模式中定义私有字段成员和继承

> ID：12463040
> 
> 赞同：3
> 
> 时间：2012-09-17T16:02:38.150
> 
> 标签：javascript, oop, inheritance, private-members, module-pattern

我可以使用下面的代码在模块模式中定义私有成员字段

```
 var myClass = function(){
       var private_field1,private_field_2;
       var private_func1 = function(){
            //.......
       } 
       //.........
       var myObj = {
         global_field1:2,
         global_field2:"something",
         global_func: function(){//......} 
       }
       return myObj;
    };
   var obj = myClass(); 
```

这个方法工作得很好，但是这个问题的问题是，每当我创建一个新对象时，所有函数的副本都会被创建并加载到内存中（不像 java，其中同一类的所有对象共享相同的函数内存）

我尝试使用以下其他方法：

```
 var myClass = (function(){
           var private_field1,private_field_2;//private static fields
           var private_func1 = function(){
                //.......
           } 
           //.........
           var Constr = function(){
             //do something
           }
           Constr.prototype = {
             //................
             global_func: function(){//......} 
           }
           return Constr;
    }());
var obj1 = new myClass();
var obj2 = new myClass(); 
```

但是这种方法的问题是显然 obj1,obj2 共享相同的私有字段副本（因此它们实际上是静态的）。那么有没有办法在模块模式中定义私有字段，同时为对象使用相同的函数副本？

对于上述第一种方法的继承，我首先需要在子类中创建一个对象，然后返回该对象。

```
 var ChildClass = function(){
      var childobj = myClass();
      //override or add functions to childobj
      return childobj ;
 } 
```

但这实际上只是将 baseClass 的对象包装在 childClass 中，是否有其他方法可以实现相同的方法（对于第一种或第二种方法），以便它可以像真正的 java 继承一样使用受保护的、私有的等方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T16:17:41.283

不可以。JavaScript 中的隐私只能通过作用域（并从中导出：闭包）来实现。

那些需要访问私有变量（和函数）的函数，称为*特权方法*，需要在构造函数中定义。那些不这样做的方法（只与公共属性或其他方法交互）应该在原型对象上定义，所以你最终会得到一个混合的方法。可能与您刚刚发现的静态值相结合。

顺便说一句，不是函数 [code] 本身被复制和记忆多次。只需要存储不同的范围对象（词法环境）。

继承通常不是通过创建父对象并扩展它们来完成，而是通过创建子实例并像父对象一样扩展它们。这可以通过在新创建的孩子上[应用](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)父母的构造函数来完成：

```
function ChildClass() {
    ParentClass.call(this, /* … arguments */);

    // usual body, using "this"
} 
```

此外，Child 的原型直接继承自 Parent 的原型对象。这可以通过[Object.create](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/create)完成（需要为旧版浏览器填充）：

```
ChildClass.prototype = Object.create(ParentClass.prototype, {
    constructor: {value:ChildClass}
}); 
```

# jquery - 更快地替换 JQuery.load()？

> ID：12463044
> 
> 赞同：0
> 
> 时间：2012-09-17T16:02:50.583
> 
> 标签：jquery, html, ajax, jsp, web-applications

我有一个 JSP 索引页面，其中包含导航标题和通知面板，并且在 index.jsp 的特定 div 中我使用 JQuery.load() 加载其他 JSP 页面

我遵循这种方式来避免所有页面中导航和通知的冗余。

1.  这种方法是最佳实践吗？
2.  似乎 JQuery.load() 很慢，有没有更快的方法将页面加载到 index,jsp 页面（Iframe 除外）中的内容 div 中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T16:16:38.587

我从来没有被卖到异步检索大块标记 - 我最好获取整个页面，或者获取数据的 XML/JSON 表示，以进一步使用[客户端模板](http://engineering.linkedin.com/frontend/client-side-templating-throwdown-mustache-handlebars-dustjs-and-more)进行样式设置。

从服务器获取部分内容要求实现哈希导航 [这不是微不足道的，并且需要适当的路由框架来维护可重用的链接]，因此请考虑您是在处理*网站*还是*webapp*。

实际上我不太喜欢一种方法，但它可能适合您的需要：看看[pjax](http://pjax.heroku.com/) - 现场示例非常清楚。

# javascript - 从 MVC 3 中的控制器执行 javascript 函数

> ID：12463045
> 
> 赞同：1
> 
> 时间：2012-09-17T16:02:51.970
> 
> 标签：javascript, asp.net-mvc

我在控制器内得到了一个动作结果，我需要从 bootstrap-modal 显示模态，问题是......

`ScriptManager.RegisterStartupScript`不像在旧的 asp.net 中那样工作

有解决办法吗？我是 mvc 的新手。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T15:21:09.077

好的，从控制器注册 javascript 的最简单解决方案非常明显，但对于不熟悉该模式的人来说令人沮丧：

使用命名部分，我们找到了放置 javascript 的地方

您可以使用**[命名部分][1]。**

**_Layout.cshtml**

```
<head>
    <script type="text/javascript" src="@Url.Content("/Scripts/jquery-1.6.2.min.js)">
    @RenderSection("JavaScript", required: false)
</head> 
```

和这个视图代码

**_SomeView.cshtml**

```
@section JavaScript
{
    @Html.Raw(ViewBag.message)
} 
```

**在控制器中我们返回**

```
ViewBag.message = @"<script type='text/javascript' language='javascript'>alert(""Hello World!"")</script>"; ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T16:06:40.877

在 ASP.NET MVC 中，脚本未在控制器操作中注册。控制器和视图之间存在分离。所以你可以直接把脚本放到对应的视图中：

# c++ - 将字符串拆分为 2 个向量。无法将字符串转换为浮点类型

> ID：12463046
> 
> 赞同：2
> 
> 时间：2012-09-17T16:02:55.823
> 
> 标签：c++, std

下面我有一个来自文件的名为 line 的字符串。字符串用逗号分隔，第一部分是字符串向量，第二部分是浮点向量。之后的任何内容都不会使用。

第一部分以“文本”的形式出现，这是正确的。但是第二个显示“248”，而应该说“1.234”

我需要帮助正确转换它。任何帮助将不胜感激，谢谢。

我对编程很陌生。对不起任何可怕的风格。

```
#include <iostream>
#include <string>
#include <vector>
using namespace std;

int main ()
{
  string line ("test,1.234,4.3245,5.231");
  string comma (",");
  size_t found;
  size_t found2;
  string round1;
  float round2;
  vector<string> vector1;
  vector<float> vector2;

  // Finds locations of first 2 commas
  found = line.find(comma);
  if (found!=string::npos)

  found2 = line.find(comma,found+1);
  if (found2!=string::npos)

    //Puts data before first comma to round1 (string type)
    for (int a = 0; a < found; a++){
    round1 = round1 += line[a];
    }

    //Puts data after first comma and before second comma to round2 (float type)
    for (int b = found+1; b < found2; b++){
    round2 = round2 += line[b];
    }

    //Puts data to vectors
    vector1.push_back(round1);
    vector2.push_back(round2);

cout << vector1[0] << endl << vector2[0] << endl;

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T16:10:22.780

您的问题是您将字符添加到浮点值，您不能以这种方式转换它。您实际上所做的是将构成您的数字的字符的十六进制值相加，如果您查看 ASCII 表，您会注意到 1=49, .=46, 2=50, 3=51, 4=52 . 如果将这 5 个相加，则得到 248。此外，即使在这种情况下它是错误的：

```
round2 = round2 += line[b]; 
```

应该：

```
round2 += line[b]; 
```

原因是 += 运算符将等效于：

```
round2 = round2 + line[b]; 
```

`round2 =`所以在它前面添加一个额外的东西是没有意义的。

为了正确地做到这一点，像这样使用字符串流：

```
#include <string>
#include <sstream>

int main()
{
    float f;
    std::stringstream floatStream;
    floatStream << "123.4";
    floatStream >> f;

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T16:08:07.693

考虑使用`stringstream`and `getline(..., ',')`：

```
string line;
string strPart;
string floatPart;
istringstream isline(line);
getline(isline, strPart, ',');
getline(isline, floatPart, ',');
istringstream isfloat(floatPart);
float f;
isfloat >> f; 
```

当然，这需要对可能的错误进行大量检查，但应该可以。

# multithreading - EF 5 中的多线程

> ID：12463048
> 
> 赞同：3
> 
> 时间：2012-09-17T16:02:59.727
> 
> 标签：multithreading, entity-framework

我的应用程序中有两个线程。一个线程（实际上它是一个可以被另一个系统调用的 web api。）新建一个 Context 来保存实体（调用 savechanges() 方法）。另一个线程（它是一个真正的工作线程。）新建一个上下文来计数实体（调用 count() 方法）。这两个线程正在同一个实体上工作。当我的应用程序运行时，有时会抛出异常。这是它。请检查它。

```
System.InvalidOperationException
Stack:
at System.Data.Entity.Internal.LazyInternalContext.InitializeContext()
at System.Data.Entity.Internal.InternalContext.GetEntitySetAndBaseTypeForType(System.Type)
at System.Data.Entity.Internal.Linq.InternalSet`1[[System.__Canon, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089]].Initialize()
at System.Data.Entity.Internal.Linq.InternalSet`1[[System.__Canon, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089]].get_InternalContext()
at System.Data.Entity.Infrastructure.DbQuery`1[[System.__Canon, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089]].System.Linq.IQueryable.get_Provider()
at System.Linq.Queryable.Count[[System.__Canon, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089]](System.Linq.IQueryable`1<System.__Canon>, System.Linq.Expressions.Expression`1<System.Func`2<System.__Canon,Boolean>>)
at Accela.HotDeploy.Website.Facade.DeployLogService.GetUpgradeProcess(System.Guid) 
```

我认为这一定是由一些线程问题引起的。对此问题有什么想法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T16:45:07.833

EF 不是线程安全的。您不能在`ObjectContext`多个线程中使用相同的。您甚至不能同时执行读取查询。

所以你要么需要同步（使用锁），要么`ObjectContexts`对不同的线程使用不同的。

# java - 日期格式映射到 JSON Jackson

> ID：12463049
> 
> 赞同：179
> 
> 时间：2012-09-17T16:03:01.117
> 
> 标签：java, json, date, jackson, pojo

我有一个来自 API 的日期格式，如下所示：

```
"start_time": "2015-10-1 3:00 PM GMT+1:00" 
```

这是 YYYY-DD-MM HH:MM am/pm GMT 时间戳。我将此值映射到 POJO 中的日期变量。显然，它显示转换错误。

我想知道两件事：

1.  我需要使用什么格式与 Jackson 进行转换？Date 是一个很好的字段类型吗？
2.  一般来说，有没有办法在杰克逊将变量映射到对象成员之前对其进行处理？比如改变格式、计算等。

* * *

## 回答 #1

> 赞同：382
> 
> 时间：2014-11-24T10:02:04.440

从 Jackson v2.0 开始，您可以直接在 Object 成员上使用 @JsonFormat 注解；

```
@JsonFormat(shape = JsonFormat.Shape.STRING, pattern = "yyyy-MM-dd HH:mm a z")
private Date date; 
```

* * *

## 回答 #2

> 赞同：148
> 
> 时间：2012-09-17T16:45:10.550

> 我需要使用什么格式与 Jackson 进行转换？Date 是一个很好的字段类型吗？

`Date`是一个很好的字段类型。您可以使用以下方法非常轻松地使 JSON 可解析`ObjectMapper.setDateFormat`：

```
DateFormat df = new SimpleDateFormat("yyyy-MM-dd HH:mm a z");
myObjectMapper.setDateFormat(df); 
```

> 一般来说，有没有办法在杰克逊将变量映射到对象成员之前对其进行处理？比如改变格式、计算等。

是的。您有几个选择，包括实现自定义`JsonDeserializer`，例如扩展`JsonDeserializer<Date>`。[这](https://github.com/FasterXML/jackson-docs/wiki/JacksonHowToCustomSerializers)是一个好的开始。

* * *

## 回答 #3

> 赞同：59
> 
> 时间：2015-12-12T07:48:55.510

当然**，有一种**称为序列化和反序列化的自动化方式，您也可以使用 pb2q 提到的特定注释（**@JsonSerialize**、**@JsonDeserialize**）来定义它。

您可以同时使用 java.util.Date 和 java.util.Calendar ...，也可以使用 JodaTime。

****@JsonFormat 注释在反序列化期间****对我不起作用**（它已将**时区调整**为不同的值）（序列化工作完美）：**

 ****```
@JsonFormat(locale = "hu", shape = JsonFormat.Shape.STRING, pattern = "yyyy-MM-dd HH:mm", timezone = "CET")

@JsonFormat(locale = "hu", shape = JsonFormat.Shape.STRING, pattern = "yyyy-MM-dd HH:mm", timezone = "Europe/Budapest") 
```

**如果您想要预测结果，则需要使用自定义序列化器和自定义反序列化器而不是 @JsonFormat 注释。**我在这里找到了真正好的教程和解决方案[http://www.baeldung.com/jackson-serialize-dates](http://www.baeldung.com/jackson-serialize-dates)

有**日期**字段的示例，但我需要**日历**字段，所以**这是我的实现**：

**序列化程序**类：

```
public class CustomCalendarSerializer extends JsonSerializer<Calendar> {

    public static final SimpleDateFormat FORMATTER = new SimpleDateFormat("yyyy-MM-dd HH:mm");
    public static final Locale LOCALE_HUNGARIAN = new Locale("hu", "HU");
    public static final TimeZone LOCAL_TIME_ZONE = TimeZone.getTimeZone("Europe/Budapest");

    @Override
    public void serialize(Calendar value, JsonGenerator gen, SerializerProvider arg2)
            throws IOException, JsonProcessingException {
        if (value == null) {
            gen.writeNull();
        } else {
            gen.writeString(FORMATTER.format(value.getTime()));
        }
    }
} 
```

解**串器**类：

```
public class CustomCalendarDeserializer extends JsonDeserializer<Calendar> {

    @Override
    public Calendar deserialize(JsonParser jsonparser, DeserializationContext context)
            throws IOException, JsonProcessingException {
        String dateAsString = jsonparser.getText();
        try {
            Date date = CustomCalendarSerializer.FORMATTER.parse(dateAsString);
            Calendar calendar = Calendar.getInstance(
                CustomCalendarSerializer.LOCAL_TIME_ZONE, 
                CustomCalendarSerializer.LOCALE_HUNGARIAN
            );
            calendar.setTime(date);
            return calendar;
        } catch (ParseException e) {
            throw new RuntimeException(e);
        }
    }
} 
```

**以及上述类**的用法：****

 **```
public class CalendarEntry {

    @JsonSerialize(using = CustomCalendarSerializer.class)
    @JsonDeserialize(using = CustomCalendarDeserializer.class)
    private Calendar calendar;

    // ... additional things ...
} 
```

**使用此实现，序列化和反序列化过程的执行连续产生原始值。**

**仅使用 @JsonFormat 注释，反序列化会给出不同的结果**，我认为由于库内部时区默认设置，您无法使用注释参数更改（这也是我对 Jackson 库 2.5.3 和 2.6.3 版本的经验）。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2019-12-11T12:02:01.603

在日期中添加 T 和 Z 等字符

```
@JsonFormat(shape = JsonFormat.Shape.STRING, pattern = "yyyy-MM-dd'T'HH:mm:ss'Z'")
private Date currentTime; 
```

输出

```
{
    "currentTime": "2019-12-11T11:40:49Z"
} 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2018-05-04T11:35:50.610

只是具有日期时间格式的**Spring Boot**应用程序的完整示例`RFC3339`

```
package bj.demo;

import com.fasterxml.jackson.databind.ObjectMapper;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.boot.context.event.ApplicationReadyEvent;
import org.springframework.context.ApplicationListener;

import java.text.SimpleDateFormat;

/**
 * Created by BaiJiFeiLong@gmail.com at 2018/5/4 10:22
 */
@SpringBootApplication
public class BarApp implements ApplicationListener<ApplicationReadyEvent> {

    public static void main(String[] args) {
        SpringApplication.run(BarApp.class, args);
    }

    @Autowired
    private ObjectMapper objectMapper;

    @Override
    public void onApplicationEvent(ApplicationReadyEvent applicationReadyEvent) {
        objectMapper.setDateFormat(new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ssXXX"));
    }
} 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-04-16T10:43:19.547

基于@miklov-kriven 非常有用的答案，我希望这两个额外的考虑点对某人有所帮助：

(1) 我发现将序列化程序和反序列化程序作为静态内部类包含在同一个类中是一个好主意。注意，使用 ThreadLocal 来保证 SimpleDateFormat 的线程安全。

```
public class DateConverter {

    private static final ThreadLocal<SimpleDateFormat> sdf = 
        ThreadLocal.<SimpleDateFormat>withInitial(
                () -> {return new SimpleDateFormat("yyyy-MM-dd HH:mm a z");});

    public static class Serialize extends JsonSerializer<Date> {
        @Override
        public void serialize(Date value, JsonGenerator jgen SerializerProvider provider) throws Exception {
            if (value == null) {
                jgen.writeNull();
            }
            else {
                jgen.writeString(sdf.get().format(value));
            }
        }
    }

    public static class Deserialize extends JsonDeserializer<Date> {
        @Overrride
        public Date deserialize(JsonParser jp, DeserializationContext ctxt) throws Exception {
            String dateAsString = jp.getText();
            try {
                if (Strings.isNullOrEmpty(dateAsString)) {
                    return null;
                }
                else {
                    return new Date(sdf.get().parse(dateAsString).getTime());
                }
            }
            catch (ParseException pe) {
                throw new RuntimeException(pe);
            }
        }
    }
} 
```

(2) 作为对每个单独的类成员使用 @JsonSerialize 和 @JsonDeserialize 注释的替代方法，您还可以考虑通过在应用程序级别应用自定义序列化来覆盖 Jackson 的默认序列化，即所有 Date 类型的类成员都将由 Jackson 序列化使用此自定义序列化，而无需在每个字段上显式注释。例如，如果您使用 Spring Boot，则一种方法如下：

```
@SpringBootApplication
public class Application {
    public static void main(String[] args) {
        SpringApplication.run(Application.class, args);
    }

    @Bean
    public Module customModule() {
        SimpleModule module = new SimpleModule();
        module.addSerializer(Date.class, new DateConverter.Serialize());
        module.addDeserializer(Date.class, new Dateconverter.Deserialize());
        return module;
    }
} 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2019-06-15T09:05:43.270

为我工作。春季启动。

```
 import com.alibaba.fastjson.annotation.JSONField;

 @JSONField(format = "yyyy-MM-dd HH:mm:ss")  
 private Date createTime; 
```

输出：

```
{ 
   "createTime": "2019-06-14 13:07:21"
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-06-15T07:27:17.493

如果有人在为 java.sql.Date 使用自定义日期格式时遇到问题，这是最简单的解决方案：

```
ObjectMapper mapper = new ObjectMapper();
SimpleModule module = new SimpleModule();
module.addSerializer(java.sql.Date.class, new DateSerializer());
mapper.registerModule(module); 
```

（这个 SO-answer 为我省去了很多麻烦：[https](https://stackoverflow.com/a/35212795/3149048) ://stackoverflow.com/a/35212795/3149048 ）

Jackson 默认为 java.sql.Date 使用 SqlDateSerializer，但目前，此序列化程序不考虑日期格式，请参阅此问题：[https](https://github.com/FasterXML/jackson-databind/issues/1407) ://github.com/FasterXML/jackson-databind/issues/1407 。解决方法是为 java.sql.Date 注册不同的序列化程序，如代码示例所示。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-11-16T16:00:09.143

我想指出，设置`SimpleDateFormat`另一个答案中描述的类似仅适用于`java.util.Date`我认为问题中的意思。但是对于`java.sql.Date`格式化程序不起作用。在我的情况下，为什么格式化程序不起作用并不是很明显，因为在应该序列化的模型中，该字段实际上是 a`java.utl.Date`但实际对象最终是 a `java.sql.Date`。这是可能的，因为

```
public class java.sql extends java.util.Date 
```

所以这实际上是有效的

```
java.util.Date date = new java.sql.Date(1542381115815L); 
```

因此，如果您想知道为什么您的 Date 字段格式不正确，请确保该对象确实是`java.util.Date`.

[这里](https://github.com/FasterXML/jackson-databind/pull/1412)也提到了为什么`java.sql.Date`不会添加处理。

> 这将是重大变化，我认为这是没有道理的。如果我们从头开始，我会同意这种改变，但事实并非如此。******

# opengl - 如何在 OpenGL 中高效地实现“point-on-heightmap”拾取？

> ID：12463056
> 
> 赞同：2
> 
> 时间：2012-09-17T16:03:32.173
> 
> 标签：opengl, gpu, projective-geometry, ray-picking

我想在世界地表上跟踪我的 OpenGL 场景中的鼠标坐标，它被建模为高度图。目前没有像硬件镶嵌这样的花哨的东西。请注意，此问题与*对象*拾取**无关。**

 *目前我正在做以下事情，这显然是由于回读操作而降低了性能：

*   渲染世界（地表）
*   *读回鼠标坐标处的深度值*
*   渲染场景的其余部分
*   交换缓冲区并渲染下一帧

回读是在两个渲染步骤之间，因为我想要地表的深度值，前面没有任何物体。使用以下命令完成：

```
GLfloat depth;
glReadPixels(x, y, 1, 1, GL_DEPTH_COMPONENT, GL_FLOAT, &depth); 
```

我的应用程序将帧速率限制为每秒 60 帧。在没有回读操作的情况下渲染场景时，我的 CPU 使用率不到 5%，但是在进行回读时，它增加到大约 75%，尽管我没有做太多渲染场景或更新任何游戏模型或诸如此类的事情。

一个临时的解决方案是缓存鼠标下像素的深度值，并且仅每 5 帧或 10 帧更新一次，这会导致 CPU 使用率回落到 10% 以下。但显然不能成为问题的最佳解决方案。

如何有效地实现拾取（**不是对象拾取**，因为我想要表面上的（浮点）坐标）？

我已经考虑过读回前缓冲区的深度值而不是后缓冲区，但是当谷歌搜索如何这样做时，我只发现人们抱怨最好避免使用 glRead* 方法。但是我怎么能在不*读东西*（使用 glRead*）的情况下读*东西*（做挑选）？

 *我很困惑。其他人如何实现拣货？

* * *

一种完全不同的方法是在软件中实现世界表面拾取。从相机“进入深度”重建 3D 射线应该没什么大不了的，它表示在目标像素处渲染的空间点。然后我可以实现一个相交算法来找到表面上最前面的点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T16:28:21.567

您通常在 CPU 上实现它！在高度图坐标中找到您的拾取射线，并在高度图上进行简单的线跟踪。这与画线非常相似。在您相交的每个单元格中，针对您用来对其进行三角剖分的三角形进行测试。

在完成之前避免从 GPU 读取数据非常重要。由于您通常会提前几帧安排绘图命令（GL 会自动执行此操作），这意味着您也只能在那时获得结果 - 或者停止 CPU 直到 GPU 赶上。但不要为这样的简单事情这样做！**

# css - 伪元素上的 z-Index 行为

> ID：12463061
> 
> 赞同：13
> 
> 时间：2012-09-17T16:03:44.277
> 
> 标签：css, z-index, pseudo-element

看：

[http://jsfiddle.net/Kq2PY/](http://jsfiddle.net/Kq2PY/)

div 与 z-index 5 是相对的， :after 与 z-index 2 是绝对的。

那么 :after 不应该在 div 后面吗？

```
div{
    position:relative;
    z-index: 5;
    background: #000;
    padding: 10px;
}    

div:after{
    content: '';
    position: absolute;
    z-index: 2;            /*  <= not working:( */
    background: #3d3;
    left: 20px;
    top: 20px; 
    width: 30px;
    height: 30px;
} 
```

```
<div>erferf</div>
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-09-17T16:06:30.707

您必须给伪元素一个负 z-index 以使其落后于其父级，并删除父级上的 z-index。 [http://jsfiddle.net/jklm313/Kq2PY/4/](http://jsfiddle.net/jklm313/Kq2PY/4/)

```
div{
    position:relative;
    background: #000;
    padding: 10px;
}    

div:after{
    content: '';
    position: absolute;
    z-index: -1;            /*  <= not working:( */
    background: #3d3;
    left: 20px;
    top: 20px; 
    width: 30px;
    height: 30px;
} 
```

```
<div>erferf</div>
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2020-02-10T08:32:19.907

```
div { z-index: 1; }

div::after { z-index: -1;} 
```

# r - 从r中的树状图中删除x轴标签

> ID：12463062
> 
> 赞同：12
> 
> 时间：2012-09-17T16:03:45.653
> 
> 标签：r, plot, hclust

我使用 xlab="" 来抑制 x-label，但仍然在我的树状图中得到一个 'sub-x-label'。如何删除它并删除树状图下的任何额外空间？

```
require(graphics)

hc <- hclust(dist(USArrests), "ave")
plot(hc,xlab="") 
```

![在此处输入图像描述](../Images/bd0c9ddc9586da3becd756e8eb95a001.png)

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-17T16:08:30.377

要删除字幕，请使用以下命令：

```
plot(hc, xlab="", sub="") 
```

要删除底部边距（请参阅`?par`详细信息）：

```
par(mar=c(0, 4, 4, 2)) # c(bottom, left, top, right)
plot(hc, xlab="", sub="") 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-17T16:06:08.567

可能会 `plot(hc,xlab='', sub="")`删除它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-17T16:10:00.173

你需要

```
op <- par(mar = c(2,4,4,2) + 0.1))
plot(hc, xlab = "", sub = "")
par(op) 
```

第一`par()`行存储当前设置，然后将边距设置为底部 2 行，左侧和顶部 4 行，右侧 2 行（加上一点）。然后我们通过参数为 *sub*title 设置一个空字符串`sub`。最后，我们将参数设置回第一行之前的值。

我在底部边缘留了一点空间，因为我不确定标签可以向下传递多远。如果您希望底部的空间更小，请将第一个更改为`2`更小的内容。`mar = c(2,4,4,2)`

# vb.net - 设置动态创建的转发器的 ItemDataBound 处理程序

> ID：12463071
> 
> 赞同：1
> 
> 时间：2012-09-17T16:04:22.190
> 
> 标签：vb.net, events, data-binding, repeater

我正在后面的代码中动态创建一个转发器。然后我想在调用 DataBind() 方法时执行 OnItemDataBound 事件，如下所示：

```
Dim Repeater1 As New Repeater()
Repeater1.DataSource = dataSource
Repeater1.OnItemDataBound = "Repeater1_OnItemDataBound"
Repeater1.DataBind() 
```

编译器告诉我函数 OnItemDataBound 在此上下文中不可访问，因为它是“受保护的”

我正在创建一个动态转发器，因为它需要的列数取决于数据源中的数据。

调用 DataBind 方法时，如何为数据源中的每个项目执行我的 ItemDataBound 代码？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T16:11:22.297

您可能想要添加一个事件处理程序，那么您需要使用以下[`AddHandler`](http://msdn.microsoft.com/en-us/library/7taxzxka%28v=vs.100%29.aspx)语句：

```
AddHandler r.ItemDataBound, AddressOf Repeater1_OnItemDataBound 
```

当然该方法必须是可访问的，通常它在同一个类中：

```
Protected Sub Repeater1_OnItemDataBound(sender As Object, e As RepeaterItemEventArgs)
    ' ... '
End Sub 
```

# android - 按键保持声音？

> ID：12463072
> 
> 赞同：0
> 
> 时间：2012-09-17T16:04:22.983
> 
> 标签：android, android-layout

嗨，当我按下按钮时，我正在使用 Soundpool Android 播放声音。我想知道按下按钮时是否可以保持这种声音播放。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T18:41:04.320

在这里，您需要识别触摸事件，我的意思是按下按钮时的 ACTION_DOWN 和用户抬起手指时的 ACTION_UP。您可以在 ACTION_DOWN 事件发生时开始播放声音，并在 ACTION_UP 事件发生时停止播放。
现在要在按钮上捕获这些事件，您必须在按钮上设置 onTouch 侦听器并实现它的 onTouch() 方法。onTouch() 方法是您必须捕获这些事件并播放/暂停声音的地方。

以下是如何实现按钮的 onTouch() 方法的示例：

```
btn.setOnTouchListener(new OnTouchListener() {

        @Override
        public boolean onTouch (View v, MotionEvent event)
        {
            switch(event.getAction() & MotionEvent.ACTION_MASK)
            {
                case MotionEvent.ACTION_DOWN:
                    //here you can start playing song
                    break;
                case MotionEvent.ACTION_UP:
                    //here you can stop playing song
                    break;
            }    
            return false;
        }
    }); 
```

在这里您可以注意到我返回了 false 以指示我已完成事件的操作系统，现在您可以处理该事件。如果您不希望操作系统处理触摸事件，则返回 true 表示您已使用触摸事件。

我希望这将有所帮助。

# android - 我正在尝试从我的服务中关闭进度条，但它显示错误

> ID：12463073
> 
> 赞同：0
> 
> 时间：2012-09-17T16:04:28.087
> 
> 标签：android, android-layout, android-intent

我正在尝试从服务中关闭进度条，但显示强制关闭错误。我已经在 startservice onclick 按钮的主要活动中创建了进度条，并且我想在为 mediaplyer 准备监听器时将其关闭。由于我们无法在服务中编写 ui 函数，因此我将其写入活动中。我也试过 Main_acitivty object 。pregressbar.dismiss(); 但它显示强制关闭错误。这个问题的任何好的解决方案。

已编辑：-我有进度条，但是当准备完成并且媒体播放器即将启动时，由于这条线我认为“vm.progressDialog.dismiss();”而出现强制关闭错误 玩（）;

答案：- 我将活动导入服务，在活动中我将进度条设置为静态进度条，它工作正常。

这是我的服务，媒体播放器已初始化

```
@Override
public IBinder onBind(Intent intent) {
    // TODO Auto-generated method stub
    return null;
}
@Override
public void onCreate() {

 mp = new MediaPlayer();
    try {
        showNoti();
        final Main vm = new Main();

        mp.setDataSource(link);
        mp.setAudioStreamType(AudioManager.STREAM_MUSIC);
        mp.prepareAsync();

        mp.setOnPreparedListener(new OnPreparedListener() {

            public void onPrepared(MediaPlayer mp) {
                // TODO Auto-generated method stub
                vm.progressDialog.dismiss();
                mp.start();
                b=true;
            }
        });

    } catch (IllegalArgumentException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (SecurityException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IllegalStateException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

错误

```
09-17 18:12:01.330: E/AndroidRuntime(6708): FATAL EXCEPTION: main
09-17 18:12:01.330: E/AndroidRuntime(6708): java.lang.NullPointerException
09-17 18:12:01.330: E/AndroidRuntime(6708): at com.android.twitter.myPlayService$1.onPrepared(myPlayService.java:53)
09-17 18:12:01.330: E/AndroidRuntime(6708): at android.media.MediaPlayer$EventHandler.handleMessage(MediaPlayer.java:1973)
09-17 18:12:01.330: E/AndroidRuntime(6708): at android.os.Handler.dispatchMessage(Handler.java:99)
09-17 18:12:01.330: E/AndroidRuntime(6708): at android.os.Looper.loop(Looper.java:137) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-15T11:27:14.180

更好的解决方案是让你的进度条只在活动中，并注册一个`BroadcastReceiver`关闭进度条的。

内部服务：

```
 mp.setOnPreparedListener(new OnPreparedListener() {

        public void onPrepared(MediaPlayer mp) {
            // TODO Auto-generated method stub
            Intent intent = new Intent();
         intent.setAction("dismiss_progress_dialog");
       sendBroadcast(intent);

            mp.start();
            b=true;
        }
    }); 
```

内部活动

```
 class MyBroadcast extends BroadcastReceiver {
            @Override
            public void onReceive(Context ctxt, Intent i) {

                progressDialog.dismiss();

            }
        };

  MyBroadcast receiver; 
```

在 onResume 活动中：

```
 receiver=new MyBroadcast();
    IntentFilter filter = new IntentFilter();
    filter.addAction("dismiss_progress_dialog");

    registerReceiver(receiver, filter); 
```

在 onPause 里面：

```
 unregisterReceiver(receiver); 
```

# eclipse-plugin - 在多页编辑器的不同选项卡中添加不同的插件

> ID：12463075
> 
> 赞同：0
> 
> 时间：2012-09-17T16:04:31.517
> 
> 标签：eclipse-plugin, eclipse-rcp, eclipse-gef

我正在开发两个**GEF**插件和一个**RCP eclipse 插件**，我有下一个问题：

我有一个带有多选项卡编辑器的插件，我想在第一个选项卡上打开插件的编辑器，并在第二个选项卡上打开第二个插件的编辑器。

我的意思是如果我在第一个选项卡中打开文件，它使用编辑器 A，但如果我在第二个选项卡中打开相同的文件，它使用第二个选项卡的编辑器 B。

rcp 插件仅作为 GEF 插件的基础。

可能吗？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T16:36:19.357

我还没有尝试过，但您可以使用扩展`org.eclipse.ui.editors.documentProviders`来实现您的逻辑。[这](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/extension-points/org_eclipse_ui_editors_documentProviders.html)是eclipse在线帮助的链接。

编辑：您将遇到的问题是在打开它们时同步这两个实例。或者您可以将一个与更改侦听器一起使用

# ios - 应用程序运行时保存和重新加载数据 ios

> ID：12463077
> 
> 赞同：0
> 
> 时间：2012-09-17T16:04:32.157
> 
> 标签：ios, save

我已经制作了一个使用 arcgis 的应用程序，并且想要制作它以便我可以保存它使用的服务列表以及其他数组和对象，并在应用程序运行时重新加载它们。我看过 plist，但不知道如何解决这个问题。

我打算保存的是一组配置文件和一组服务。

每个配置文件都有一个名称、图例数组、缩放位置数组和要使用的地图服务。

每个服务都将具有名称、url 和服务类型的字符串类型。

我需要这样做，以便我可以在应用程序运行时更改配置文件和数组，并且更改在保存数据后生效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T16:53:22.587

plist 非常简单，您可以将项目组织成数组、字典、NSNumbers、字符串等。这只是确定将什么放在哪里的问题。这是我要做的一个模型：

```
<array>
    <dict>
        <key>userName</key>
        <string>myUserName</string>
        <key>legendArray</key>
        <array/>
        <key>zoomLocations</key>
        <array/>
        <key>services</key>
        <array>
            <dict>
                <key>url</key>
                <string>http://www.google.com</string>
                <key>type</key>
                <string>someServiceType</string>
            </dict>
        </array>
    </dict>
</array> 
```

如果您不知道，上面的 XML 是 Xcode 在您编辑 plist 时生成的，仅此而已它是一个 XML 文件 :) 如果您更喜欢标准视图，这里是一个屏幕截图：

![在此处输入图像描述](../Images/51e1a3182fa31f38d41ab75bd241801c.png)

这将创建一个包含字典的数组，每个字典包含一个用于用户名的字符串、一个图例数组、一个用于缩放位置的数组，另一个包含用于 url 和服务类型的字符串的字典数组。

然后就重新加载数据而言，很难说，因为您没有指定如何显示数据。但是，例如，如果您使用的是表格视图，您所要做的就是`[self.tableView reloadData];`在完成保存新数据后调用。（假设 plist 是您的表数据源）

如果您需要更多帮助来学习如何将 .plist 保存到文档目录，这里有一个教程：http: [//iosameer.blogspot.com/2012/08/handling-nsdocumentdirectory-of-your.html](http://iosameer.blogspot.com/2012/08/handling-nsdocumentdirectory-of-your.html)

# sql-server - 将浮点数转换为双精度时出现实体框架错误

> ID：12463083
> 
> 赞同：2
> 
> 时间：2012-09-17T16:05:14.030
> 
> 标签：sql-server, entity-framework-4

我有一个存储过程，它以下表的形式返回数据

```
ID int null,
RestaurentName varchar(250),
Address nvarchar(150),
Area nvarchar(150),
City nvarchar(50),
Postcode nvarchar(50),
DeliveryPrice decimal(4,2),
DeliveryTime nvarchar(50),
Latitude nvarchar(50),
Longitude nvarchar(50),
LogoLocation nvarchar(50),
Rating float,// returns AVG of rating
Discount money 
```

我在我的 EF 中做了一个函数导入。现在，当我运行该站点时，出现以下错误

> 'SearchRestaurantByKey_Result' 上的 'Rating' 属性无法设置为 'Double' 值。您必须将此属性设置为“十进制”类型的非空值。

有谁知道如何解决这个问题？

**编辑：** 这是我遇到错误的地方：

```
var query = (from p in dc.GetRestaurantByAreaAndCategory(area,type)
                         select new RestaurantViewModel()
                         {
                             Name = p.RestaurentName,
                             Address = p.Address,
                             City = p.City,
                             Postcode = p.Postcode,
                             ID = Convert.ToInt32(p.ID),
                             LogoPath = p.LogoLocation,
                             DeliveryPrice = Convert.ToDecimal(p.DeliveryPrice),
                             DeliveryTime = p.DeliveryTime,
                             discount = p.Discount,
                             Rating=Convert.ToDouble(p.Rating) //here is the error.

                         }).ToList(); 
```

在 RestaurantViewModel() 中，rating 属性为 Double。

# .net - 沙堡可以从外部文件而不是标题注释中读取 XmlDoc 吗？

> ID：12463087
> 
> 赞同：0
> 
> 时间：2012-09-17T16:05:33.313
> 
> 标签：.net, documentation, sandcastle

[Sandcastle 帮助文件生成器 (SHFB)](http://shfb.codeplex.com/)将三斜杠注释转换为文档，如下所示：

```
///<summary>A class called Bob</summmary>
public sealed class Bob {} 
```

文档的架构非常健壮。但是，您的文档越健壮和冗长，某些人在实际浏览和编辑源代码时发现它就越烦人。一个好的妥协将能够做类似的事情

```
///<summary>A class called Bob</summmary>
///<include href="projectDocs.xml" xpath="/Company/Product/Bob" />
public sealed class Bob {} 
```

这样的事情可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T12:12:14.733

是的，有可能。有一个[包含](http://msdn.microsoft.com/en-us/library/9h8dy30z.aspx)评论标签。我们的[VSdocman](http://www.helixoft.com/vsdocman/overview.html)支持它，我相信 Sandcastle 也支持它。

# php - 如何删除 WP 中的虚拟帖子

> ID：12463088
> 
> 赞同：0
> 
> 时间：2012-09-17T16:05:34.293
> 
> 标签：php, wordpress

我有一个无法通过仪表板找到的幻像帖子 ID (393)。它在代码中，似乎正在造成严重破坏。我正在尝试删除帖子。我认为我有正确的 PHP 代码来执行此操作？：

```
<?php wp_delete_post(393); ?> 
```

但我不知道在哪里粘贴这段代码。请帮忙？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T16:09:30.110

问题是这可能与后端用于删除帖子的方法相同。

也许尝试使用 phpadmin 直接从数据库中删除帖子。这是一个很好的参考：[http ://www.xarj.net/2008/how-to-mass-delete-posts-in-wordpress-phpmyadmin-sql/](http://www.xarj.net/2008/how-to-mass-delete-posts-in-wordpress-phpmyadmin-sql/)

# iphone - iOS后台位置不发送http请求

> ID：12463091
> 
> 赞同：12
> 
> 时间：2012-09-17T16:05:43.670
> 
> 标签：iphone, ios, ios5, nsurlconnection, restkit

我的应用程序需要在后台跟踪用户位置，但它未能发送“获取”请求。当应用程序进入前台时，http 请求会立即发送。我正在使用 RestKit 处理我的所有网络请求，并按照[本教程](http://www.mindsizzlers.com/2011/07/ios-background-location/)设置我的后台位置服务。在我的 applicationDidEnterBackground

```
-(void)applicationDidEnterBackground:(UIApplication *)application
{
    self.bgLocationManager = [[CLLocationManager alloc] init];
    self.bgLocationManager.delegate = self;
    [self.bgLocationManager startMonitoringSignificantLocationChanges];
    NSLog(@"Entered Background");
} 
```

我在我的 applicationDidBecomeActive 委托中停止MonitoringSignificantLocationChange

这是我的 locationManager 委托，我接受新的更新位置并将其发送到我的服务器

```
-(void) locationManager:(CLLocationManager *)manager 
    didUpdateToLocation:(CLLocation *)newLocation 
           fromLocation:(CLLocation *)oldLocation
{
    NSLog(@"I am in the background");
    bgTask = [[UIApplication sharedApplication]
                beginBackgroundTaskWithExpirationHandler:
                ^{
                      [[UIApplication sharedApplication] endBackgroundTask:bgTask];
                 }];
                 // ANY CODE WE PUT HERE IS OUR BACKGROUND TASK

    NSString *currentLatitude = [[NSString alloc]
                                  initWithFormat:@"%g",
                                  newLocation.coordinate.latitude];
    NSString *currentLongitude = [[NSString alloc]
                                   initWithFormat:@"%g",
                                   newLocation.coordinate.longitude];
    NSString *webToken = [[NSUserDefaults standardUserDefaults] stringForKey:@"userWebToken"];
    NSLog(@"I am in the bgTask, my lat %@", currentLatitude);

    NSDictionary *queryParams;
    queryParams = [NSDictionary dictionaryWithObjectsAndKeys:webToken, @"auth_token",  currentLongitude, @"lng", currentLatitude, @"lat", nil];
    RKRequest* request = [[RKClient sharedClient] post:@"/api/locations/background_update" params:queryParams delegate:self];
    //default is RKRequestBackgroundPolicyNone
    request.backgroundPolicy = RKRequestBackgroundPolicyContinue;

    // AFTER ALL THE UPDATES, close the task

    if (bgTask != UIBackgroundTaskInvalid)
    {
        [[UIApplication sharedApplication] endBackgroundTask:bgTask];
        bgTask = UIBackgroundTaskInvalid;
    }
} 
```

网络请求按计划工作，但不会在后台调用。我还需要什么额外的步骤吗？在我的 info.plist 中，我将所需的背景模式键和位置服务作为值。

编辑

我还提到了[这个过去的 SO answer](https://stackoverflow.com/questions/5394880/can-iphone-app-woken-in-background-for-significant-location-change-do-network-ac)。我在整个 didUpdateToLocation 调用中运行了一些测试，它们都被调用了，但没有发送“获取”请求。相反，当我最终将应用程序启动到前台时，它发送了所有构建的网络请求（超过 10 个）。

编辑 (2) 我将 RKRequestBackgroundPolicyContinue 添加到我的请求中，但它并没有改变我的结果。（正如您在[restkit](https://bitbucket.org/deger/restkit/src/91482ebbbe9a/Docs/MobileTuts%20Advanced%20RestKit/Advanced_RestKit_Tutorial.md)的后台上传/下载中看到的那样）。我看到 Restkit 初始化主机，但在应用程序激活之前无法发送请求。

回答

RestKit 必须在后台做一些被禁止的事情。使用 NSURLRequest 效果很好。

```
NSMutableURLRequest * urlRequest = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:@"http://www.example.com/api/locations/background_update"]];
[urlRequest setValue:@"application/json" forHTTPHeaderField:@"Accept"];
[urlRequest setValue:@"application/json" forHTTPHeaderField:@"Content-Type"];
[urlRequest setHTTPMethod:@"POST"];
[urlRequest setHTTPBody:jsonData];

NSHTTPURLResponse  *response = nil;
[NSURLConnection sendSynchronousRequest:urlRequest
                      returningResponse:&response
                                  error:&error]; 
```

使用同步请求很好，因为没有 UI 可以中断后台任务

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T02:21:51.483

重新创建原始建议作为答案

> 您是否尝试用股票同步 NSURLConnection 替换您的 restKit 调用？– dklt 9 月 20 日

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-25T16:59:05.213

我使用与您完全相同的代码，它在 RestKit 中对我有用。我可以使它工作的唯一方法是创建一个同步请求（无论如何，在这种情况下异步执行它没有多大意义！）。请检查此代码并让我们知道它是否有效：

```
// REMEMBER. We are running in the background if this is being executed.
// We can't assume normal network access.
// bgTask is defined as an instance variable of type UIBackgroundTaskIdentifier

// Note that the expiration handler block simply ends the task. It is important that we always
// end tasks that we have started.

_bgTask = [[UIApplication sharedApplication] beginBackgroundTaskWithExpirationHandler:
           ^{
               [[UIApplication sharedApplication] endBackgroundTask:_bgTask];
           }];

// ANY CODE WE PUT HERE IS OUR BACKGROUND TASK

// For example, I can do a series of SYNCHRONOUS network methods (we're in the background, there is
// no UI to block so synchronous is the correct approach here).

NSNumber *latNumber = [NSNumber numberWithDouble:location.coordinate.latitude];
NSNumber *lngNumber = [NSNumber numberWithDouble:location.coordinate.longitude];
NSNumber *accuracyNumber = [NSNumber numberWithDouble:location.horizontalAccuracy];
NSDictionary *params = [NSDictionary dictionaryWithKeysAndObjects:@"lat",latNumber,@"lng",lngNumber,@"accuracy",accuracyNumber, nil];
RKURL *URL = [RKURL URLWithBaseURL:[NSURL URLWithString:SERVER_URL] resourcePath:@"/user/location/update" queryParameters:params];
RKRequest *request = [RKRequest requestWithURL:URL];
request.method = RKRequestMethodGET;
NSLog(@"Sending location to the server");
RKResponse *response = [request sendSynchronously];
if (response.isFailure)
    NSLog(@"Unable to send background location, failure: %@", response.failureErrorDescription);
else {
    NSError *error = nil;
    NSDictionary *parsedBody = [response parsedBody:&error];
    if (YES == [[parsedBody objectForKey:@"result"] boolValue]){
        NSLog(@"Background location sent to server");
    }
    else {
        //Something went bad
        NSLog(@"Failed to send background location");
    }
}
// AFTER ALL THE UPDATES, close the task

if (_bgTask != UIBackgroundTaskInvalid)
{
    [[UIApplication sharedApplication] endBackgroundTask:_bgTask];
    _bgTask = UIBackgroundTaskInvalid;
} 
```

我几乎可以肯定为您的 RKClient 请求生成的新线程在调用它后会自动终止。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-17T16:40:49.677

当您的应用程序在后台运行时，您可以完成在进入后台之前启动的 HTTP 请求，但不能发起*新*请求。您只能在后台启动[某些网络操作（voip、报亭）。](http://developer.apple.com/library/ios/#DOCUMENTATION/iPhone/Conceptual/iPhoneOSProgrammingGuide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)

# c# - 带有 jQ uery Mobile 页面的 MVC 4 似乎正在缓存并且没有调用控制器方法

> ID：12463093
> 
> 赞同：-1
> 
> 时间：2012-09-17T16:05:48.303
> 
> 标签：c#, jquery-mobile, asp.net-mvc-4

**编辑** 想通了.. $.ajaxSetup({ cache: false }); 没有工作，因为我在表单上将 data-ajax 设置为关闭，因此我无法在其上设置无缓存 ajax。如果有人知道如何完成此操作，则只是为了完整性而设置了 dada-ajax为假，请在此处发布

**我刚刚** 尝试过并且有效的其他方法是简单地将 data-ajax="false" 添加到您想要刷新页面的任何链接。这意味着如果我在链接上有 data-ajax="false" ，它将始终在显示之前刷新页面！

例如，我遇到问题的链接是

```
<a href="@Url.Action("CreateStatusReport", "ProjectHome")">Add a new weekly update</a> 
```

问题是由于某种原因该页面正在缓存并且总是显示缓存的页面。所以一个简单的修复方法是向它添加 data-ajax="false" 并且每次都强制重新加载页面

```
<a href="@Url.Action("CreateStatusReport", "ProjectHome")" data-ajax="false">Add a new weekly update</a> 
```

`````````````````````````````````````````````` `````````````````````````````````````````````` `````````````````````````````````````````````` `````````````````````````````````````````````` `````````````````````````````````````````````` ``````````````

**问题：** 我有一个选项菜单，它会打开一个表单，该表单也有一个取消和提交按钮。

提交表单后，将运行某些验证，如果缺少某些内容，它将返回到带有一些验证文本的表单。

现在，如果我随时单击取消按钮，我应该返回到选项菜单，如果我单击显示表单的同一个按钮，我应该会看到一个全新的干净表单，如果我在验证之前这样做，这很好.

问题是，如果我提交一个无效的表单，该表单返回错误验证消息，**然后**按取消，页面似乎会被缓存或类似的东西，因为从那时起，我随时单击表单选项菜单按钮，相同的表单会显示验证错误和数据。我在返回表单 View() 的方法中放置了一个断点，它们永远不会被命中，因此由于某种原因它跳过了创建新表单的整个方法，并且以某种方式只显示旧页面。

取消按钮如下

```
<a href="@Url.Action("ProjectOptions", "ProjectHome", new { id = @Session["projectID"], remove = "true" })" style="text-align:center" data-role="button" data-theme="e"  data-icon="arrow-l">Cancel</a> 
```

有人知道发生了什么吗？当它返回到带有验证错误的同一页面时，它是否以某种方式被缓存？

** 编辑 **

我尝试`[OutputCache(NoStore = true, Duration = 0, VaryByParam = "*")]`在控制器前面添加无济于事..

我现在也添加了

```
 $.ajaxSetup({ cache: false }); 
```

到我的 $(document).ready(function () 的顶部，但这似乎也没有做任何事情，我只是把它放在那里还是我必须以某种方式调用它？

我检查了 System.Web.HttpContext.Current.Cache 并且页面没有显示在那里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T16:17:51.200

您是否尝试过在控制器操作上设置输出缓存选项，例如

```
[OutputCache(Duration=600,VaryByParam="id")] 
```

您可能还想尝试确保 jquery 也没有缓存请求。您可以使用此处的信息全局关闭 jquery ajax 缓存：[How to set cache: false in jQuery.get call](https://stackoverflow.com/questions/8841425/how-to-set-cache-false-in-jquery-get-call)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T16:56:52.083

您可以尝试使用`$.mobile.changePage()`切换到页面，它允许您设置一些选项，其中之一是`reloadPage`.

> *reloadPage* ( **boolean** , default: false) 强制重新加载页面，即使它已经在页面容器的 DOM 中。仅当 changePage() 的 'to' 参数是 URL 时使用。
> 
> *来源：http: [//jquerymobile.com/demos/1.1.1/docs/api/methods.html](http://jquerymobile.com/demos/1.1.1/docs/api/methods.html)*

您可以通过以下方式将其添加到您的链接中：

```
<script>
function changeMyPage(url) {
    $.mobile.changePage(url, { reloadPage : true });
}
</script>

<a href="#" onclick="changeMyPage('@Url.Action("ProjectOptions", "ProjectHome", new { id = @Session["projectID"], remove = "true" }))'" style="text-align:center" data-role="button" data-theme="e"  data-icon="arrow-l">Cancel</a> 
```

jquery Mobile 一次将多个伪页面拉入 DOM，并且通常会`.removes()`在您离开伪页面后删除 ( ) 一个伪页面。然而，这听起来好像没有发生，所以您可能需要使用我上面的代码（或类似的代码）来强制刷新页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-23T14:39:35.637

您需要事先清除您的 ModelState。

这应该有效：

```
if (ModelState.IsValid) 
{ 
   //saving
   if (result > 0) 
   {
      **ModelState.Clear();**
      return View(new CategoryViewModel()); 
   }          
} 
```

[如何在MVC3中提交数据库中的数据后清除模型](https://stackoverflow.com/questions/27589005/how-to-clear-model-after-submit-the-data-in-database-in-mvc3)

# scala - Scala - 特征中的抽象函数

> ID：12463096
> 
> 赞同：0
> 
> 时间：2012-09-17T16:06:05.760
> 
> 标签：scala, traits

```
trait Rectangular{
def topLeft:Point
def bottomRight:Point
def left=topLeft.x
def right=bottomRight.x
def width=right-left
//andmanymoregeometricmethods...
}

class Rectangle(val topLeft:Point,val bottomRight:Point)
extends Rectangular{
//othermethods...
} 
```

在 Rectangular 中，他定义了一个抽象函数，并在 Rectangle 类中实现它，并在主构造函数中使用 val。

这是特质的特例吗？这是预期的行为吗？

之前他描述了只有 def's 可以覆盖 def's。但是在这种情况下，一个 val 实现了一个抽象函数，这真的很奇怪。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T17:26:49.420

a`val`实际上是定义同名私有变量和公共 getter 方法的语法糖，所以 a`val`基本上包括 a `def`。当你`def`用 a覆盖 a 时`val`，编译器使用 getter 方法作为覆盖 的函数`def`。你也可以`def`用 a覆盖 a `var`，它同时定义了一个 getter 和一个 setter 方法（尽管我通常不会认为这种行为是“好的”代码）。

使用`def`do define 抽象属性允许实现者选择是否要使用`val`、`var`或`def`.

所以，如果作者声称只能`def`override `def`，那是不正确的（也许在早期版本的 Scala 中就是这种情况？）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T17:17:02.033

不幸的是，我从未读过那本书（我感到羞耻）。但这是错误的。`def`您可以用 a`val`或 a覆盖a `lazy val`。这种模式很常见。

为避免奇怪的行为，强烈建议避免使用 abstract `val`。

# c# - 从数据库创建组合框时无法将 int 隐式转换为字符串

> ID：12463098
> 
> 赞同：2
> 
> 时间：2012-09-17T16:06:05.683
> 
> 标签：c#, asp.net-mvc-3

我正在尝试在 MVC 3 内的创建视图中填充组合框。这是我到目前为止所做的：

```
 public ActionResult Create()
    {
        var db = new ErrorReportingSystemContext();
        IEnumerable<SelectListItem> items = db.Locations
          .Select(c => new SelectListItem
          {
              Value =c.id,
              Text = c.location_name
          });
        ViewBag.locations = items;
        return View();
    } 
```

但是，当我尝试运行它时，会出现编译错误：

`Cannot implicitly convert int to string`

在[这篇](https://stackoverflow.com/questions/1066760/problem-with-converting-int-to-string-in-linq-to-entities)文章中，我读到这样做

```
Value = SqlFunctions.StringConvert((double)c.ContactId) 
```

可以解决问题，但是当我尝试这样做时，出现以下错误：

`the name 'SqlFunctions' does not exist in the current context`

我在做什么错？

**更新：**

做`Value = c.id.ToString()`给出了错误：

`LINQ to Entities does not recognize the method 'System.String ToString()' method, and this method cannot be translated into a store expression.`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T19:40:33.753

您的问题是 EF 无法将转换转换为字符串或`.ToString()`方法。

因此，您需要`.AsEnumerable()`在选择`SelectListItem`s之前评估数据库查询（使用调用）

```
IEnumerable<SelectListItem> items = db.Locations
      .AsEnumerable()
      .Select(c => new SelectListItem
      {
          Value = c.id.ToString(),
          Text = c.location_name
      }); 
```

然而，这种方法存在一些性能问题，因为生成的 SQL 查询将如下所示：

```
SELECT * FROM Locations ... 
```

因此，如果 Locations 表有 50 列，EF 将加载所有列中的数据，尽管稍后您只需要两列中的数据。

您可以告诉 EF 它应该加载哪些列，首先选择匿名类型，然后选择 `SelectListItem`s：

```
IEnumerable<SelectListItem> items = db.Locations
      .Select(c => new
      {
          c.id,
          c.location_name
      });
      .AsEnumerable()
      .Select(c => new SelectListItem
      {
          Value = c.id.ToString(),
          Text = c.location_name
      }); 
```

生成的查询看起来像这样：

```
 SELECT id, location_name FROM Locations 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T16:15:56.357

```
foreach (var item in db.table.tolist())
{
                Combobox.Items.Add(item.field.tostring());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T16:07:44.497

它可能会抱怨`Value`需要一个字符串，而您正试图在`int`其中存储一个字符串。

尝试：

```
Value = c.id.ToString(), 
```

# macos - CABasicAnimation 并不总是有效

> ID：12463111
> 
> 赞同：1
> 
> 时间：2012-09-17T16:06:37.023
> 
> 标签：macos, cabasicanimation

我刚刚开始使用 CABasicAnimations。到目前为止，在我看来，相同的代码不一定会在任何事情上工作两次。在一个特定的例子中（解决方案可以治愈我所有的弊病！）我制作了自己的（不确定的）进度指示器。只是一个来自 PhotoShop 的 png 旋转直到任务完成，它在视图中启动`initWithRect:`

```
CALayer *mainLayer = [CALayer layer];
[myView setWantsLayer:YES];
[myView setLayer:mainLayer];    
progressLayer = [CALayer layer];
progressLayer.opacity = 0;
progressLayer.cornerRadius = 0.0;
progressLayer.bounds = CGRectMake(0.0,0.0,50.0,50.0);
NSDictionary* options = [NSDictionary dictionaryWithObjectsAndKeys:
                                         (id)kCFBooleanTrue, (id)kCGImageSourceShouldCache,
                                         (id)kCFBooleanTrue, (id)kCGImageSourceShouldAllowFloat,
                                         (id)kCFBooleanTrue, (id)kCGImageSourceCreateThumbnailWithTransform,
                                         NULL];

CGImageSourceRef isr = CGImageSourceCreateWithURL((__bridge CFURLRef)[[NSBundle mainBundle] URLForImageResource:@"progress_indicator.png"], NULL);
        progressLayer.contents = (__bridge id)CGImageSourceCreateImageAtIndex(isr, 0, (__bridge CFDictionaryRef)options);
[mainLayer addSublayer:progressLayer]; 
```

然后以单独的方法将“屏幕上”带入：

```
[CATransaction begin]; //I did this block to snap the indicator to the centre
[CATransaction setValue:(id)kCFBooleanTrue forKey:kCATransactionDisableActions];
progressLayer.anchorPoint = anchorMiddle; //make sure the png is in the view centre
progressLayer.position = viewCentre;
progressLayer.opacity = 1.0;
[CATransaction setValue:(id)kCFBooleanFalse forKey:kCATransactionDisableActions];
[CATransaction commit];
[CATransaction flush];

CABasicAnimation* rotationAnim = [CABasicAnimation animationWithKeyPath: @"transform.rotation.z"];
rotationAnim.fromValue = [NSNumber numberWithFloat:0.0];
rotationAnim.toValue = [NSNumber numberWithFloat:-2 * M_PI];
rotationAnim.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionLinear];
rotationAnim.duration = 5;
rotationAnim.repeatCount = 10000;
rotationAnim.removedOnCompletion = NO;
rotationAnim.autoreverses = NO;
[progressLayer addAnimation:rotationAnim forKey:@"transform.rotation.z"]; 
```

它通常有效 - 但并非总是如此。一般来说，CABasicAnimations 让我有点发疯：我从互联网上剪切和粘贴代码，有时它们工作有时不工作。我唯一的想法是它被其他线程阻塞了。我至少有 4 个使用 GCD 发送的进程。只是我的 MacBookPro 被屏蔽了吗？

谢谢，

托德。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T16:11:58.440

哦亲爱的。我想我刚刚发现了问题：我正在从 GCD 块中调用进度指示器。我将调用放入代码的主体（实际上），现在一切似乎都很好......

# javascript - 在 C++ 代码中处理 HTML 按钮单击事件

> ID：12463113
> 
> 赞同：0
> 
> 时间：2012-09-17T16:06:37.073
> 
> 标签：javascript, c++, html, windows, mfc

我有一个 Windows 本机 C++/Win32/MFC 对话框应用程序。我在对话框中使用 IE ActiveX 控件来呈现一些 HTML 内容。正在呈现的 HTML 包含一个按钮。该按钮有一个 onClick javascript 处理程序，如下所示。

```
<input type="button" id="uniqueButtonID" name="uniqueButtonName" value="blue" onClick="OnButtonClick('blue');"> 
```

当前，按钮单击由显示的 javascript 处理程序在页面中处理。这一切都有效。

相反，我想处理对话框 C++ 代码中的按钮单击。

我有一些处理对话框中其他事件的经验。例如，以下工作并允许处理文档完成事件和导航。

```
BEGIN_EVENTSINK_MAP(DMyDlg, CDialog)
ON_EVENT(DMyDlg, IDC_EXPLORER2, 259, DMyDlg::DocumentCompleteExplorer2, VTS_DISPATCH VTS_PVARIANT)
ON_EVENT(DMyDlg, IDC_EXPLORER2, 250, DMyDlg::BeforeNavigate2, VTS_DISPATCH VTS_PVARIANT VTS_PVARIANT VTS_PVARIANT VTS_PVARIANT VTS_PVARIANT VTS_PBOOL)
END_EVENTSINK_MAP() 
```

这些是预定义的众所周知的事件。不知道如何将其转化为处理我在 onClick="" 部分的按钮中定义的内容。

有人知道怎么做吗？这里的动机是我在另一个 C++ 应用程序中使用了一些代码，它定义了一些业务逻辑。我想要这里使用相同的业务逻辑。目前，我每次都必须将其翻译成 Javascript。如果我可以在 C++ 代码中处理事件，我可以复制/粘贴（或通过 DLL 重新使用）并避免 Javascript 翻译阶段。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T16:40:56.617

您需要创建一个 COM 对象作为 JavaScript 和 C++ 之间的桥梁。JavaScript 初始化代码将类似于：

```
var myhelper = new ActiveXObject("MyCompany.MyHelper"); 
```

请注意，尽管名称为“ActiveXObject”，但该对象不必是完整的 ActiveX 控件，只要是 COM 对象即可。然后在您的 onClick 处理程序中，您可以执行以下操作：

```
myhelper.DoThis();
myhelper.DoThat(); 
```

“有趣”的部分是在 C++ 中创建 COM 对象——IDL 文件、ATL 类、IDispatch、IUnknown 以及所有我想忘记的东西。

不过有一件事 - 如果 C++ 代码存在于您的应用程序 exe 中（而不是在单独的 COM DLL 中），请不要忘记，当您的程序启动时，您必须为“MyCompany.MyHelper”创建一个类工厂实例并将其注册到COM 以便 JavaScript 中的“新 ActiveXObject”成功。

[更新1]

我应该在最初的回复中添加 - 如果可以避免，我实际上不建议这样做。早在 C# 和 .NET 出现之前，我们公司实际上虽然 COM 是个好东西，而且值得花时间和精力去学习它。今天……没那么多。

In your case, having your business logic in C++ and again in JavaScript might seem like a lot of extra work - but at least it is extra work that you can plan, allocate resources to and have a hope of being able to finish. Once you go down the path of C++/COM/ActiveScripting, when stuff stops working - there is no limit to the amount of time you might spend trying to chase down obscure COM related issues. Anyhow good luck!

# data-structures - 二叉树的有序后继

> ID：12463118
> 
> 赞同：1
> 
> 时间：2012-09-17T16:07:05.027
> 
> 标签：data-structures, language-agnostic, tree, binary-tree

我正在编写用于查找二叉树（ NOT A BINARY SEARCH TREE ）的有序后继的代码。这只是一个练习题。更喜欢复习树的概念。

我正在按顺序遍历并跟踪前一个节点。每当前一个节点与我们正在搜索的后继节点相等时，我打印当前节点。

```
void inOrder(node* root , node* successorFor) {
  static node* prev = null;
  if(!root)
     return;
  inOrder(root->left,successorFor);
  if(prev == successorFor )
     print(root);
  prev = root;
  inOrder(root->right,successorFor);
} 
```

我正在寻找一些我的解决方案可能会失败的测试用例？我的方法是否正确？如果不是，那我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T10:50:39.267

该算法的基本逻辑是`tree walk`. 你打个电话`print(TREE-SUCCESSOR(root, k).key)`

```
TREE-SUCCESSOR(root, k)
    if root == NIL
        return NIL
    left = TREE-SUCCESSOR(root.left, k)
    right = TREE-SUCCESSOR(root.right, k)
    successor = NIL
    if root.key > k
        successor = root
    if left
        if k < left.key
            if successor
                if left.key < successor.key
                    successor = left
            else
                successor = left
    if right
        if k < right.key
            if successor
                if right.key < successor.key
                    successor = right
            else
                successor = right
    return successor 
```

# c# - asp.net 检查是否使用本地主机

> ID：12463120
> 
> 赞同：4
> 
> 时间：2012-09-17T16:07:14.557
> 
> 标签：c#, asp.net

我想知道如何检查我是在使用本地主机还是在实时服务器上。

基本上我想拥有...

```
if (using localhost)
{
  Do Stuff...
}
else
{
   Do this instead...
} 
```

我该怎么做呢？我四处寻找，但找不到任何东西。我想这样做，因为我对实时服务器和开发服务器有不同的设置。我想要一种方法来自动检查我正在使用什么，然后使用某些设置。

提前致谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-17T16:08:33.513

你可以尝试做这样的事情

```
HttpApplication http = new HttpApplication();
if (http.Request.IsLocal) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-08T20:01:31.593

```
if(HttpContext.Current.Request.IsLocal)
{
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-17T16:11:49.817

根据您是否真的需要检查位置或构建类型，您可能有兴趣使用 DEBUG 检查来装饰代码。

请参阅以下链接。

[http://msdn.microsoft.com/en-us/library/4y6tbswk(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/4y6tbswk(v=vs.100).aspx)

```
#if DEBUG
 // Do stuff
#else
 // Do other stuff
#endif 
```

# javascript - 如何使用 javascript 检查变量是否既不是 null 也不是空字符串？

> ID：12463123
> 
> 赞同：0
> 
> 时间：2012-09-17T16:07:20.083
> 
> 标签：javascript

我一直在做以下事情：

```
if (json.RowKeyNew != "") {
    updateGridMeta(entity, json.PartitionKey, json.RowKeyNew, row, tab);
} 
```

但是，如果 json.RowKeyNew 为空，则满足 if 条件，这不是我想要的。如何检查不为 null 且不为 "" 的内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T16:08:48.443

```
if (json.RowKeyNew != undefined && json.RowKeyNew != "") {}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T16:08:32.360

尝试...

```
if (json.RowKeyNew) {
    updateGridMeta(entity, json.PartitionKey, json.RowKeyNew, row, tab);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T16:13:05.153

```
if (json.RowKeyNew) 
```

只需将变量放入 if 条件中，如果有一些值则返回 true，否则返回 false

# tomcat - 如何从 Tomcat 管理器下载战争

> ID：12463124
> 
> 赞同：3
> 
> 时间：2012-09-17T16:07:23.140
> 
> 标签：tomcat

我已经在 Tomcat 6 上成功部署了战争文件，但是，我想从管理器应用程序中下载这些战争文件。有没有办法做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T16:10:04.653

不，您需要通过 SSH 或其他方式登录到您的服务器，然后从 CATALINA_BASE/webapps 目录中复制 WAR 文件。

# c++ - 是否可以从 QThread 内部使用 opencv 函数？

> ID：12463135
> 
> 赞同：2
> 
> 时间：2012-09-17T16:07:49.193
> 
> 标签：c++, c, multithreading, qt, opencv

我打算编写一个 Qt GUI 应用程序来进行大量图像处理。为了不冻结显示，我打算将计算放在 a`QThread`中，因为某些计算可能在几秒钟的范围内。

我设法集成了 Qt 和 opencv 2.31，并成功地从主（GUI）线程运行了一些测试：创建图像，在它们上绘图，执行基本算法，并以`cvNamedWindow`. 一切正常。

但是，如果我开始 a`QThread`并将以前的测试移到那里，就会发生奇怪的事情：

*   分配图像或从文件中打开它们，在它们上绘图（例如`cvLine`）工作正常（我可以将它们发送到 GUI 线程并显示它们）
*   **执行大多数转换会使应用程序崩溃**（例如`cvSmooth`）
*   使用显示功能（例如`cvNamedWindow`, `cvShowImage`）不起作用，但至少它们不会导致程序崩溃，只会将“QPixmap：在 GUI 线程之外使用像素图不安全”发送到 Qt 调试输出。（我理解这一点，因为 cvNamedWindow 是在 Qt 中实现的，而 Qt 只允许从主 GUI 线程显示）

有没有办法从主线程以外的线程使用图像处理功能？在主线程中进行边缘检测等是违反直觉的，更不用说分割或其他资源密集型算法......

[这是一个在主（GUI）线程中工作但在 QThread 中不起作用的示例。这仅使用 C API，因为 C++ API 在 Qt 下给我带来了更多问题。这意味着 C 解决方案也足够了，但我对使用 C++ API 的其他解决方案持开放态度。]

```
IplImage *test;
test = cvCreateImage( cvSize(640,480), 8, 1 );
cvLine(test,cvPoint(20,20),cvPoint(100,100),cvScalar(255,0,0),3);  // works fine even in thread
cvSmooth( test, test, CV_GAUSSIAN, 11, 11 );                       // crashes if in thread
cvNamedWindow("test");                                             // warning if in thread
cvShowImage("test",test);                                          // warning if in thread 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T16:40:20.710

[这是可能的](http://code.google.com/p/qt-opencv-multithreaded/)，但 OpenCV 不是为支持来自不同线程的调用而构建的。因此，您需要在代码中使用[互斥锁](http://doc.qt.nokia.com/4.7-snapshot/qmutex.html)。

像你一样，我在尝试实现这一点时[遇到了问题。](https://stackoverflow.com/a/10343890/176769)您可能希望将绘制 GUI 的代码移至第二个线程，并将主线程保留用于 OpenCV 调用、帧抓取和所有这些东西。

# nhibernate - 具有 2 列映射的流利的 nhibernate 外键

> ID：12463136
> 
> 赞同：0
> 
> 时间：2012-09-17T16:07:54.090
> 
> 标签：nhibernate, fluent-nhibernate, foreign-keys

我必须有一个现有的模式，我想用 nhibernate 映射它。

实体/表架构：

```
post {
  pk_id
  prod_id
  prod_internid
  title
}

tag {
  pk_t_id
  prod_id
  prod_internid
  name
} 
```

一篇文章可以有多个标签，并且从标签到 post 表有一个外键约束，其中包含 prod_id 和 prod_internid 两列。

我试过这个：

```
PostMap {
  // tags is a list
  HasMany(x => x.tags).KeyColumns.Add("prod_id", "prod_internid");
}

TagMap {
  References(x => x.post).Columns("prod_id", "prod_internid");//.ForeignKey();
} 
```

我收到此错误：

```
NHibernate.FKUnmatchingColumnsException: Foreign key (FK98806C8630C05A78:tag [prod_id, prod_internid])) must have same number of columns as the referenced primary key (post [pk_id]) 
```

我怎样才能以正确的方式映射它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T19:16:20.257

我认为 NHibernate 目前不支持此功能，但它在 Hibernate 中。似乎您或某人需要将其移植过来。看看这个 NH 问题：

[https://nhibernate.jira.com/browse/NH-1722](https://nhibernate.jira.com/browse/NH-1722)

我还发现了这篇关于此的先前 StackOverflow 文章：

[多列多对一](https://stackoverflow.com/questions/2956925/many-to-one-with-multiple-columns)

# php - 如何让我的 mod_rewrite 规则忽略特定目录的重写

> ID：12463144
> 
> 赞同：0
> 
> 时间：2012-09-17T16:08:18.643
> 
> 标签：php, .htaccess, mod-rewrite

我尝试过搜索，但没有发现任何可以帮助我解决以下问题的东西。我在 SO 上找到了这个链接：[https](https://stackoverflow.com/questions/1426056/good-htaccess-mod-rewrite-url-rewriting-tutorial) ://stackoverflow.com/questions/1426056/good-htaccess-mod-rewrite-url-rewriting-tutorial但其中的所有链接都是 404 死的。

我正在尝试美化我网站的网址，因此`www.mysite.com/aboutus.php`被重写为看起来像`www.mysite.com/aboutus`哪个有效。

但我不想在`admin/cms`目录上执行此操作，因为它会阻止 CMS 工作。所以忽略`www.mysite.com/admin.php`

我正在使用的代码是：

```
RewriteEngine On

# Unless directory, remove trailing slash
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/]+)/$ http://mysite.com/$1 [R=301,L]

# Redirect external .php requests to extensionless url
RewriteCond %{THE_REQUEST} ^(.+)\.php([#?][^\ ]*)?\ HTTP/
RewriteRule ^(.+)\.php$ http://mysite.com/$1 [R=301,L]

# Resolve .php file for extensionless php urls
RewriteRule ^([^/.]+)$ $1.php [L] 
```

我不认为我这样做是正确的，因为它也取消`www`了 URL 的开头。

我也发现了这个：[https](https://stackoverflow.com/a/9565288/1343827) ://stackoverflow.com/a/9565288/1343827这似乎可以做我想做的事，但我不能 100% 确定它会做我想做的事。

如果有人能帮我重写这个mod，让它`.php`从链接的末尾删除，但在管理目录中忽略它，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T17:15:27.450

> 我不认为我这样做是正确的，因为它也使 WWW 脱离了 URL 的开头。

发生这种情况是因为您重定向到的 URL 已被`www`删除：

```
# no "www." here -------------v
RewriteRule ^([^/]+)/$ http://mysite.com/$1 [R=301,L] 
```

尝试将它们全部更改为：

```
RewriteRule ^([^/]+)/$ http://www.mysite.com/$1 [R=301,L] 
```

> 我也发现了这个 SO：[https](https://stackoverflow.com/a/9565288/1343827) ://stackoverflow.com/a/9565288/1343827这似乎可以做我想做的事，但我不能 100% 确定它会做我想做的事，所以教程可能是最好的（我讨厌在我学习的时候一直嘲笑你们）。

该链接可以满足您的需求，您只是不需要`profile.php`底部的东西，您可以省略它。但是这一点：

```
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f 
```

在您的最后一条规则很重要之前（您似乎已经忽略了它）。它检查文件是否存在带有 php 扩展名的文件，而不是盲目地重写它（这将导致 500 服务器错误（参见：[https](https://stackoverflow.com/a/12463742/851273) ://stackoverflow.com/a/12463742/851273 ）。

至于好的教程。我见过的大多数教程都非常笼统，它们涵盖了一般的指令和规则以及一些更常见的应用程序。这可能是我见过的最好的：[http ://www.modrewrite.com/](http://www.modrewrite.com/)

关于 mod_rewrite 的许多细节和怪癖将不会在教程中涉及，其中一些看起来非常违反直觉。你只需要继续使用它并遇到这些情况，并从中学习。

# android - 获取 ImageView 中图像的显示大小

> ID：12463155
> 
> 赞同：19
> 
> 时间：2012-09-17T16:09:05.443
> 
> 标签：android, image, drawable, image-size

代码很简单：

```
<ImageView android:layout_width="fill_parent"
           android:layout_height="fill_parent"
           android:src="@drawable/cat"/> 
```

`fill_parent`注意用于宽度和高度的 ImageView 。

该图像`cat`是一个小图像，它会被放大以适应 ImageView，同时保持宽高比。

我的问题是如何获得图像的显示尺寸？我试过：

```
imageView.getDrawable().getIntrinsicHeight() 
```

但它是图像的原始高度`cat`。

我试过：

```
imageView.getDrawable().getBounds() 
```

但是哪个返回`Rect(0,0,0,0)`。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-11-10T01:51:58.520

以下将起作用：

```
ih=imageView.getMeasuredHeight();//height of imageView
iw=imageView.getMeasuredWidth();//width of imageView
iH=imageView.getDrawable().getIntrinsicHeight();//original height of underlying image
iW=imageView.getDrawable().getIntrinsicWidth();//original width of underlying image

if (ih/iH<=iw/iW) iw=iW*ih/iH;//rescaled width of image within ImageView
else ih= iH*iw/iW;//rescaled height of image within ImageView 
```

(iw x ih) 现在表示视图中图像的实际重新缩放（宽度 x 高度）（换句话说，图像的显示大小）

* * *

编辑：我认为编写上述答案的更好方法（以及与整数一起使用的方法）：

```
final int actualHeight, actualWidth;
final int imageViewHeight = imageView.getHeight(), imageViewWidth = imageView.getWidth();
final int bitmapHeight = ..., bitmapWidth = ...;
if (imageViewHeight * bitmapWidth <= imageViewWidth * bitmapHeight) {
    actualWidth = bitmapWidth * imageViewHeight / bitmapHeight;
    actualHeight = imageViewHeight;
} else {
    actualHeight = bitmapHeight * imageViewWidth / bitmapWidth;
    actualWidth = imageViewWidth;
}

return new Point(actualWidth,actualHeight); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2017-07-04T06:00:42.660

这是一个辅助函数，用于获取 imageView 中的图像边界。

```
/**
 * Helper method to get the bounds of image inside the imageView.
 *
 * @param imageView the imageView.
 * @return bounding rectangle of the image.
 */
public static RectF getImageBounds(ImageView imageView) {
    RectF bounds = new RectF();
    Drawable drawable = imageView.getDrawable();
    if (drawable != null) {
        imageView.getImageMatrix().mapRect(bounds, new RectF(drawable.getBounds()));
    }
    return bounds;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-14T15:28:44.037

我想很多人都来自这个示例[https://developer.android.com/training/animation/zoom.html](https://developer.android.com/training/animation/zoom.html)并且不想使用`android:scaleType="centerCrop"`（可能是因为 ImageView 处于约束布局中并且您想查看未裁剪的小图片）别担心，我支持你！

只需将整个块替换为

```
// Adjust the start bounds to be the same aspect ratio as the final
// bounds using the "center crop" technique. 
```

与以下

```
//adjust for scaled image to constraint
int realheight = ResourcesCompat.getDrawable(getResources(),imageResId,null).getIntrinsicHeight();
int realwidth = ResourcesCompat.getDrawable(getResources(),imageResId,null).getIntrinsicWidth();

// Adjust the start bounds to be the same aspect ratio as the final
// bounds using ueen's adjusteddimensions technique. This prevents undesirable
// stretching during the animation. Also calculate the start scaling
// factor (the end scaling factor is always 1.0).
float startScale;
if ((float) finalBounds.width() / finalBounds.height()
        > (float) startBounds.width() / startBounds.height()) {
    // Extend start bounds horizontally
    // after check whether height or width needs adjusting
    if ((float) startBounds.width() / startBounds.height() < (float) realwidth / realheight) {
        int adjustedheight = realheight*startBounds.width()/realwidth;
        int adjustedoffset = (startBounds.height()-adjustedheight) / 2;
        startScale = (float) adjustedheight / finalBounds.height();
        float startWidth = startScale * finalBounds.width();
        float deltaWidth = (startWidth - startBounds.width()) / 2;
        startBounds.left -= deltaWidth;
        startBounds.right += deltaWidth;
        startBounds.offset(+0, +adjustedoffset);
    } else {
        int adjustedwidth = realwidth*startBounds.height()/realheight;
        int adjustedoffset = (startBounds.width()-adjustedwidth) / 2;
        startScale = (float) startBounds.height() / finalBounds.height();
        float startWidth = startScale * finalBounds.width();
        float deltaWidth = (startWidth - adjustedwidth) / 2;
        startBounds.left -= deltaWidth;
        startBounds.right += deltaWidth;
        startBounds.offset(+adjustedoffset, +0);
    }
} else {
    // Extend start bounds vertically
    // after check whether height or width needs adjusting
    if ((float) startBounds.width() / startBounds.height() > (float) realwidth / realheight) {
        int adjustedwidth = realwidth*startBounds.height()/realheight;
        int adjustedoffset = (startBounds.width()-adjustedwidth) / 2;
        startScale = (float) adjustedwidth / finalBounds.width();
        float startHeight = startScale * finalBounds.height();
        float deltaHeight = (startHeight - startBounds.height()) / 2;
        startBounds.top -= deltaHeight;
        startBounds.bottom += deltaHeight;
        startBounds.offset(+adjustedoffset, +0);
    } else {
        int adjustedheight = realheight*startBounds.width()/realwidth;
        int adjustedoffset = (startBounds.height()-adjustedheight) / 2;
        startScale = (float) startBounds.width() / finalBounds.width();
        float startHeight = startScale * finalBounds.height();
        float deltaHeight = (startHeight - adjustedheight) / 2;
        startBounds.top -= deltaHeight;
        startBounds.bottom += deltaHeight;
        startBounds.offset(+0, +adjustedoffset);
    }
} 
```

像魅力一样工作，不客气:)

**进一步解释**：像往常一样，我们检查图片是否高于宽度（展开后图片的高度应与expandedImageView的高度匹配），反之亦然。然后我们检查原始（较小）ImageView（thumbView）中的图片是否匹配宽度或高度，以便我们可以调整空间。通过这种方式，我们实现了平滑的缩放动画，而不会在 thumbView 中裁剪图片，无论它的尺寸（因为它们可能会在使用约束时从设备到设备发生变化）或图片的尺寸。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-17T16:59:52.323

采用

```
// For getting imageview height
imgObj.getMeasuredHeight()

// For getting imageview width
imgObj.getMeasuredWidth();

//For getting image height inside ImageView
 imgObj.getDrawable().getIntrinsicHeight();

//For getting image width inside ImageView
 imgObj.getDrawable().getIntrinsicWidth(); 
```

# xna - 在 Silverlight 5 XNA 中使用自定义着色器

> ID：12463156
> 
> 赞同：0
> 
> 时间：2012-09-17T16:09:12.063
> 
> 标签：xna, silverlight-5.0

我最近一直在尝试使用 XNA 在 Silverlight 5 中创建一些 3D 渲染代码。不幸的是，我一直无法让任何东西（使用我的自定义着色器）工作。

基本效果用于立方体并且仅使用 VertexPositionColor 信息，但是当我切换到使用自定义着色器时，似乎没有任何渲染（或渲染离屏）。

为了尝试帮助自己解决这个问题，我什至掌握了 BasicEffect hlsl 代码，但它并没有做任何我没有做的事情。

该代码采用世界、视图和投影矩阵，并按以下顺序将每个矩阵乘以一个位置：

```
float4 pos_ws = mul(position, World);
float4 pos_vs = mul(pos_ws, View);
float4 pos_ps = mul(pos_vs, Projection); 
```

我更改了代码以执行相同的操作（而不是传入单个 WorldViewProjection 矩阵），并且我的着色器使用它来计算位置，然后将颜色应用于像素。然而，什么都没有渲染。

我非常坚持这一点，我在基本的 3D 上通过了，但通过了似乎并没有削减它！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T16:09:12.063

所以事实证明这个问题相当简单！

实际上我最初删除了这个问题，因为我知道这个问题很可能是我的矩阵，所以我不太可能得到太多帮助！

在谷歌上磕磕绊绊，喝了比我想承认的更多的咖啡后，我找到了答案。
XNA 偷偷地转置它的矩阵并且不告诉你！我曾尝试转置视图和投影矩阵，但徒劳无功，希望我知道自己在做什么，但这没有帮助。

相反，我现在传入一个使用以下公式计算的 WorldViewProjection_Transposed 矩阵。

```
Matrix worldViewProjection_Transpose = Matrix.Transpose(world * view * projection); 
```

目前这似乎可行，我希望它很简单。

我确信我会遇到一百万个问题，因为我需要渲染的模型变得更加复杂，但我决定保留它，以防遇到与我类似情况（和经验水平）的任何人都在苦苦挣扎:)

# mysql - mysql索引中的多列

> ID：12463159
> 
> 赞同：0
> 
> 时间：2012-09-17T16:09:17.460
> 
> 标签：mysql, sql, database, indexing

假设我有以下索引（来自 SHOW INDEXES 的输出）：

```
Table, Non_unique, Key_name, Seq_in_index, Column_name, Collation, Cardinaity, etc etc
'tn', 1, 'Index1', 1, 'fid', 'A', 366, , '', '', 'BTREE', '', ''
'tn', 1, 'Index1', 2, 'obj_type', 'A', 366, , '', '', 'BTREE', '', ''
'tn', 1, 'Index1', 3, 'obj_id', 'A', 366, , '', '', 'BTREE', '', ''
'tn', 1, 'Index1', 4, 'rule', 'A', 366, , '', '', 'BTREE', '', '' 
```

请注意，Index1 包含 4 列...

这样做是否能让我获得一列只有一个索引的所有性能优势（比如 fid）？

换句话说，在一个索引中拥有这样多列而不是每个索引只有一列有什么区别以及好处/挫折是什么......IE上面的设置与下面的设置有什么区别

```
Table, Non_unique, Key_name, Seq_in_index, Column_name, Collation, Cardinaity, etc etc
'tn', 1, 'Index1', 1, 'fid', 'A', 366, , '', '', 'BTREE', '', ''
'tn', 1, 'Index2', 1, 'obj_type', 'A', 366, , '', '', 'BTREE', '', ''
'tn', 1, 'Index3', 1, 'obj_id', 'A', 366, , '', '', 'BTREE', '', ''
'tn', 1, 'Index4', 1, 'rule', 'A', 366, , '', '', 'BTREE', '', '' 
```

请注意，在上述场景中，每一列都有自己的索引

哪一个会更快/更高效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T16:23:36.290

在某些情况下，多列索引可以取代单独索引的需要。这实际上取决于知道如何查询表，这将决定什么是最合适的。

如果您在 A、B 和 C 列（按该顺序）上有索引。例如，如果您在 WHERE 子句中使用以下任何字段组合，您将获得优化的索引性能。

```
A
A, B
A, B, C 
```

请注意，为了在查看列 B 或 C 时使用索引，您还必须利用索引中它左侧的其他列。这些也必须以正确的索引顺序引用。

更多详细信息请看这里：

[http://dev.mysql.com/doc/refman/5.0/en/multiple-column-indexes.html](http://dev.mysql.com/doc/refman/5.0/en/multiple-column-indexes.html)

# php - 属性将图像分配给每个多选项

> ID：12463169
> 
> 赞同：1
> 
> 时间：2012-09-17T16:10:12.230
> 
> 标签：php, magento, attributes

我创建了一个多选项属性，以便为每个选项显示一个图像，但我无法让它工作。

我已使用此处另一篇文章中的代码来获取要显示的选项列表。

我使用的代码是：

```
<?php if($_product->getResource()->getAttribute('suitable_for')->getFrontend()->getValue($_product)): ?>
        <h4>Suitable for:</h4>
        <ul><li><?php
            $_comma = ",";
            $_list = "</li><li>";
            echo str_replace($_comma,$_list,$_product->getResource()->getAttribute('suitable_for')->getFrontend()->getValue($_product))    ?>    
        </li></ul>
        <?php endif; ?> 
```

所以这现在显示了一个选项列表，一个在彼此之上。

正如我所说，我希望为每个选项显示一张图片。

我认为最好的方法是拥有 div 并为每个 div 分配一个图像。

我希望我可以得到输出：

```
<div class="option1"></div>
<div class="option2"></div>
<div class="option3"></div>
<div class="option3"></div> 
```

而不是上面代码的输出：

```
<ul>
    <li>option1</li>
    <li>option2</li>
    <li>option3</li>
    <li>option4</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T16:25:05.470

将您的代码更改为

```
<?php if($_product->getResource()->getAttribute('suitable_for')->getFrontend()->getValue($_product)): ?>
    <h4>Suitable for:</h4>
    <div class="<?php
        $_comma = ",";
        $_list = "\"></div><div class=\"";
        echo str_replace($_comma,$_list,$_product->getResource()->getAttribute('suitable_for')->getFrontend()->getValue($_product))    ?>    
    </div>
    <?php endif; ?> 
```

# java - Spring MVC 和 Apache Tiles：一个 404 问题

> ID：12463173
> 
> 赞同：0
> 
> 时间：2012-09-17T16:10:21.720
> 
> 标签：java, spring-mvc, tomcat7, tiles2

美好时光。

我正在尝试集成 Spring MVC 和 Apache Tiles。问题是^当我点击我需要的网址时，“404 Not Found”会出现。这是我的设置：

**web.xml**

```
<web-app id="WebApp_ID" version="2.4"
     xmlns="http://java.sun.com/xml/ns/j2ee"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee
http://java.sun.com/xml/ns/j2ee/web-app_2_4.xsd">

<display-name>Administration Panel</display-name>

<servlet>
    <servlet-name>mvc-dispatcher</servlet-name>
    <servlet-class>
        org.springframework.web.servlet.DispatcherServlet
    </servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>

<servlet-mapping>
    <servlet-name>mvc-dispatcher</servlet-name>
    <url-pattern>/*</url-pattern>
</servlet-mapping>

<listener>
    <listener-class>
        org.springframework.web.context.ContextLoaderListener
    </listener-class>
</listener>

</web-app> 
```

**瓷砖.xml**

```
<tiles-definitions>
<definition name="layout" template="/WEB-INF/jsp/templates/layout.jsp">
    <put-attribute name="title" value=""/>
    <put-attribute name="header" value="layout.header"/>
    <put-attribute name="navigator" value="layout.navigator"/>
    <put-attribute name="body" value=""/>
    <put-attribute name="footer" value="layout.footer"/>
</definition>

<!-- The header template -->
<definition name="layout.header" template="/WEB-INF/jsp/templates/header.jsp">
    <put-attribute name="header.left" value="/WEB-INF/jsp/themes/basic/header/layout_header_left.jsp"/>
    <put-attribute name="header.center" value="/WEB-INF/jsp/themes/basic/header/layout_header_center.jsp"/>
    <put-attribute name="header.right" value="/WEB-INF/jsp/themes/basic/header/layout_header_right.jsp"/>
</definition>

<!-- The navigator template -->
<definition name="layout.navigator" template="/WEB-INF/jsp/templates/navigator.jsp">
    <put-attribute name="navigator.top" value="/WEB-INF/jsp/themes/basic/navigator/layout_navigator_top.jsp"/>
    <put-attribute name="navigator.bottom" value="/WEB-INF/jsp/themes/basic/navigator/layout_navigator_bottom.jsp"/>
</definition>

<!-- The footer template -->
<definition name="layout.footer" template="/WEB-INF/jsp/templates/footer.jsp">
    <put-attribute name="footer.left" value="/WEB-INF/jsp/themes/basic/footer/layout_footer_left.jsp"/>
    <put-attribute name="footer.center" value="/WEB-INF/jsp/themes/basic/footer/layout_footer_center.jsp"/>
    <put-attribute name="footer.right" value="/WEB-INF/jsp/themes/basic/footer/layout_footer_right.jsp"/>
</definition>
<definition name="blank" extends="layout">
    <put-attribute name="body" value="/WEB-INF/jsp/themes/basic/body/layout_body.jsp"/>
</definition>

</tiles-definitions> 
```

**mvc-调度程序-servlet.xml**

```
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:aop="http://www.springframework.org/schema/aop"
   xmlns:context="http://www.springframework.org/schema/context"
   xmlns:mvc="http://www.springframework.org/schema/mvc"
   xmlns:jee="http://www.springframework.org/schema/jee"
   xmlns:lang="http://www.springframework.org/schema/lang"
   xmlns:p="http://www.springframework.org/schema/p"
   xmlns:tx="http://www.springframework.org/schema/tx"
   xmlns:util="http://www.springframework.org/schema/util"
   xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
    http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.0.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
    http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
    http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-3.0.xsd
    http://www.springframework.org/schema/lang http://www.springframework.org/schema/lang/spring-lang-3.0.xsd
    http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
    http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-3.0.xsd">

<context:component-scan base-package="xxx.xxx" />
<context:annotation-config/>

<mvc:annotation-driven />

<bean id="tilesConfigurer" class="org.springframework.web.servlet.view.tiles2.TilesConfigurer">
    <property name="definitions">
        <list>
            <value>/WEB-INF/tiles.xml</value>
        </list>
    </property>
</bean>

<bean id="viewResolver" class="org.springframework.web.servlet.view.UrlBasedViewResolver">
    <property name="viewClass" value="org.springframework.web.servlet.view.tiles2.TilesView" />
</bean>

</beans> 
```

**控制器**

```
@Controller
@RequestMapping("/base_page")

public class BasePageController {

@RequestMapping("/blank")
public ModelAndView getBasePage(HttpServletRequest request, HttpServletResponse response) {
    ModelAndView modelAndView = new ModelAndView();
    modelAndView.setViewName("blank");
    return  modelAndView;
}

  } 
```

请求的网址是：`http://localhost:8080/base_page/blank`（tomcat 7）

有人可以提出解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T09:20:31.343

Thanks Xaerxess and axtavt!

The problem is solved, as axtavt pointed, by changing `/*` to `/admin/*`.

Now the question is why Spring is looking for the applicationContext.xml when the xxx-servlet.xml is already here? And what type of beans are required to be placed in the applicationContext.xml (not in other spring configuration files)?

# asp.net - NavigationMenu.ImageUrl 边框样式？

> ID：12463177
> 
> 赞同：0
> 
> 时间：2012-09-17T16:10:32.013
> 
> 标签：asp.net, css

我在 .aspx 网页中有一个导航菜单。我将每个 MenuItem.ImageUrl 设置为 .png 图像。问题是图像周围有边框。问题是我怎样才能消除这个边界？

非常感谢你

皮尔卡洛

除了以前的：

![在此处输入图像描述](../Images/08486709560e469b0d94e09ae6289e18.png)

我想消除箭头指示的边框，图像是通过menuItem .ImageUrl的属性放在菜单项上的。图像为 16 像素 .png，背景透明且无边框

我尝试了以下但没有成功：

*   CSS：边框：无，

*   菜单属性：

    ```
     <asp:Menu runat="server">
    <StaticMenuItemStyle  BorderStyle="None" />
    <DynamicMenuItemStyle  BorderStyle="None" /> 
    ```

我不知道该怎么做。

谢谢你的帮忙;

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T16:33:12.830

将控件的`CssClass`属性设置为`Menu`控件的 CSS 类，然后您可以在其中删除图像周围的边框`border:none;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T17:11:43.160

在以下代码的 javascript 的帮助下，我找到了解决问题的方法：

```
window.onload = GetMenuImage;
function GetMenuImage() {
    var NavMenu = document.getElementById('<%=NavigationMenu.ClientID%>');
    if (NavMenu != null) {
        var Images = NavMenu.getElementsByTagName('img')
        var cont = 0;
        while (cont < Images.length) {
            Images[cont].style.border = 'none';
            Images[cont].style.heigth = '10%';
            Images[cont].style.width = '10%';
            cont++;
        }
    } 
```

我希望这可以帮助其他人

再见皮尔卡洛

# php - php yii 在数据库中找不到活动记录类“”的表“”

> ID：12463186
> 
> 赞同：2
> 
> 时间：2012-09-17T16:11:23.790
> 
> 标签：php, mysql, sql-server, pdo, yii

我已经在 yii 中为我的 mysql 数据库创建了所有模型，效果很好。现在我想添加一个额外的数据库，即 mssql 2000。几个小时后，我已经设置了 php 和 pdo 适配器。现在我正在尝试为 mssql 中的单个表创建一个模型。它不让我。我收到以下错误。

```
The table "[xxx Geo Limited\$Fixed Asset]" for active record class "FixedAsset" cannot be found in the database.

    private $_model;
2301 
2302     /**
2303      * Constructor.
2304      * @param CActiveRecord $model the model instance
2305      */
2306     public function __construct($model)
2307     {
2308         $this->_model=$model;
2309 
2310         $tableName=$model->tableName();
2311         if(($table=$model->getDbConnection()->getSchema()->getTable($tableName))===null)
2312             throw new CDbException(Yii::t('yii','The table "{table}" for active record class "{class}" cannot be found in the database.',
2313                 array('{class}'=>get_class($model),'{table}'=>$tableName)));
2314         if($table->primaryKey===null)
2315         {
2316             $table->primaryKey=$model->primaryKey();
2317             if(is_string($table->primaryKey) && isset($table->columns[$table->primaryKey]))
2318                 $table->columns[$table->primaryKey]->isPrimaryKey=true;
2319             else if(is_array($table->primaryKey))
2320             {
2321                 foreach($table->primaryKey as $name)
2322                 {
2323                     if(isset($table->columns[$name]))
2324                         $table->columns[$name]->isPrimaryKey=true; 
```

我的模型被调用`FixedAsset`，我在 mssql 中的表被调用`[xxx Geo Limited\$Fixed Asset]`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T16:16:54.710

解决了问题，指定表格时使用双引号

```
public function tableName()
    {
        //exit("help");
        return "[xxxGeo Limited\$Fixed Asset]";
    } 
```

# java - Android：多维数组 - java

> ID：12463187
> 
> 赞同：0
> 
> 时间：2012-09-17T16:11:23.837
> 
> 标签：java, android, arrays

我有一个来自 sqlite 数据库的函数中的游标的数组。我想将多个项目添加到数组中，以便更轻松地从其他页面引入数据。即我想做 mArray("ID"), mArray("Name") （我将从函数数组中填充一个列表视图，并希望能够轻松访问来自 ID 的名称）

这是我目前仅将 ID 保存在数组中的代码：

```
public static Array GetRooms(String StationID) {

    File dbfile = new File(Global.currentDBfull); 
    SQLiteDatabase db = SQLiteDatabase.openOrCreateDatabase(dbfile, null);
    Cursor c = db.rawQuery("select * from StationObjects where ObjectID = 0 and StationID = " + StationID , null);  

       c.moveToFirst();
       Log.e("TomDebug", c.getString(c.getColumnIndex("SubGroupName")));

     ArrayList<String> mArrayList = new ArrayList<String>();
       c.moveToFirst();
       while(!c.isAfterLast()) {
            mArrayList.add(c.getString(c.getColumnIndex("SubGroupName")));
            c.moveToNext();
       }

    return null;

} 
```

编辑：为了澄清一点；

在psudocode中，我希望能够做到：

```
 while(!c.isAfterLast()) {
            mArrayList.name.add(c.getString(c.getColumnIndex("Name")));
            mArrayList.type.add(c.getString(c.getColumnIndex("Type")));
            mArrayList.ID.add(c.getString(c.getColumnIndex("ID")));
            c.moveToNext();
       } 
```

这样我可以在代码中的任何地方做

```
Array curRooms = GetRooms("1234")

String name = curRooms.Name
String type = curRooms.Type 
```

（我知道数组和字符串之间的混合不会在那里工作，但只是一个例子）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T16:23:39.733

听起来您想要一个实际的数据结构而不是字符串。有几种方法可以做到这一点，使用 ORM 之类的，但一个基本的例子是这样的，你可以从数据库中填写字段。

```
public class StationObject
{
  public String name;
  public String type;
  public String id;
}

//pseudocode
for each result in resultset
  fill temp StationObject with fields
  add temp to list 
```

# c# - 从一组经纬度 c#.net 创建动态地图

> ID：12463192
> 
> 赞同：0
> 
> 时间：2012-09-17T16:11:45.510
> 
> 标签：c#, google-maps, polyline

我正在做 ac#.net 应用程序，我想在其中显示一张地图（折线），其中包含从数据库中动态获取的经纬度，我尝试了谷歌的反向地理编码，但我被困在这里解决它，任何人都可以帮我为我的场景找到合适的解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T16:25:17.607

您不需要为此进行反向地理编码。由于您有一组将从数据库中获取的 latlng，因此这是应该遵循的场景——

假设您有一个 Asp 服务器按钮，在 onClick 事件中，从数据库中加载 latlng 值并将它们存储在代码后面的数组中。

然后将此数组传递给一个 javascript 函数，该函数将执行在地图上放置此标记。您可以查看我已经提供代码的[“this”代码。](https://stackoverflow.com/questions/12351156/unable-to-get-update-panel-working-right)希望它可以帮助您前进。

# asp.net-mvc - 在@Html.ActionLink 中设置动态文本（记录数）

> ID：12463193
> 
> 赞同：1
> 
> 时间：2012-09-17T16:11:48.253
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我有一个 HTML 动作链接

```
 <div>@Html.ActionLink("New Requests>", "GetNewRequests", "Resource", null, new { @class = "spbutton" })</div> 
```

当单击它时，它在页面上显示为“新请求>”链接，它显示了请求的网格。

我现在需要此链接为“New Requests (x)>” ex(New Requests(4))，其中 x 是新请求数的计数，也等于网格中的行数。

我不确定如何动态添加 Html.ActionLink 调用的文本。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T16:23:49.430

将包含此信息的属性添加到您的视图模型。让控制器操作填充它。然后它是微不足道的：

```
<div>
    @Html.ActionLink(
        "New Requests (" + Model.TotalRequestsCount + ")>", 
        "GetNewRequests", 
        "Resource", 
        null, 
        new { @class = "spbutton" }
    )
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T16:25:20.230

你可以放一个属性

```
public int RequestCount {get; set;} 
```

在视图的视图模型中。在调用获取请求并填充网格的同时填充属性。然后你的链接将是

```
<div>@Html.ActionLink("New Requests("+@Model.RequestCount+") >", "GetNewRequests", "Resource", null, new { @class = "spbutton" })</div> 
```

# ios - Xcode 4.5 和 iOS 4.2.1 不兼容

> ID：12463195
> 
> 赞同：36
> 
> 时间：2012-09-17T16:11:55.023
> 
> 标签：ios, xcode, cocoa-touch

最新的发布说明显示不支持4.2.1及更低版本，现在支持旧设备时必须使用2版本的Xcode开发？？如果我们想开发 iOS6 并支持 4.2 及更低版本，这将很难支持旧设备。

我认为 Xcode 4.4 不会支持 iOS6。所以这就是问题所在。开发人员如何轻松支持这些平台而没有那么多麻烦？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-10-25T04:29:39.807

你可以做到这一点，但它需要一些小的 Xcode 黑客攻击和一些牺牲。根据您所说的*“支持 iOS 6”*的含义，这对您来说可能不够，也可能不够。如果您只是希望您的应用程序在 iOS 6 上运行，那么这应该可以。如果您还需要您的应用程序包含新的 iOS 6 功能，那么它不会。

    *（注意使用多个版本的 Xcode 没有问题的其他人：[这个类似的问题](https://stackoverflow.com/q/12619124/119114)的答案确实允许您也使用新的 iOS 6 API 并直接针对 armv7s）*

[在此处查看 chpwn 博客上的基本说明](http://blog.chpwn.com/post/31824877081) （但也请阅读下面的其余部分！）

基本上，您可以使用 Xcode 4.5 为 iOS 4 及更高版本构建，但是您不能利用新的仅 iOS 6 功能。因此，您实际上是在为 iOS 4 和 5 构建，并假设应用程序可以在 iOS 6 上正常运行（这应该是真的，但您需要自己测试）。

您需要复制 iOS 5 SDK 文件夹

```
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.*.sdk 
```

从旧的 Xcode 安装（您需要暂时保留，或重新安装到非标准位置）。然后，您将 Build Settings 中的**Deploy Target**设置为 iOS 4.0（或您想要的任何最低操作系统）。您可能需要`project.pbxproj`在文本编辑器中打开文件以手动设置：

```
IPHONEOS_DEPLOYMENT_TARGET = 4.0; 
```

您还需要将架构设置为`armv6`和`armv7`。**您也**不能直接定位`armv7s`. 但是，这并不意味着您的应用程序不会在 iPhone 5 上运行。 `armv7`可执行文件应该在 iPhone 5 上运行，只是没有在`armv7s`. 只是兼容性在另一个方向上不起作用（例如，`armv7`可执行文件不能在`armv6`iPhone 3G 上运行）。

![在此处输入图像描述](../Images/c198f69aead99f12714d45c4ccac5667.png)

还有一个步骤可能是必要的，在 chpwn 的博客中**没有**提到。您可能会收到这些警告（实际上是错误，因为 Xcode 不会正确生成您的可执行文件）：

> 警告：没有规则为架构 armv6 处理 sourcecode.c.objc 类型的文件“$(PROJECT_DIR)/main.m”

为了解决这个问题，你需要为你的目标设置一个自定义的**构建规则**，告诉 Xcode 使用**LLVM GCC 4.2**来生成 armv6 代码。为匹配模式的文件定义规则`*.[mc]`：

![在此处输入图像描述](../Images/c59eaadf6f1a716daae6f56d89fa2c17.png)

这将是一个不同于 Xcode 默认编译器的编译器，您可能需要调整 Objective-C 代码中的一些语法。尽管许多想要这样做的人可能在 ARC 之前编写了他们的应用程序，但重要的是要注意[LLVM gcc 4.2 不支持 ARC](https://stackoverflow.com/a/10769741/119114)。

最后，您可能仍会看到来自 Xcode 的有关 iOS 部署目标低于 4.3 且`armv6`不受支持的警告。我发现这些都不是问题，可以忽略：

![在此处输入图像描述](../Images/849b31fae1fe3d42b715a5e3ad9b1619.png)

在此之后在我的应用程序可执行文件上运行`lipo -info`会显示所需的结果：

```
lipo -info MyAppName
Architectures in the fat file: MyAppName are: armv6 armv7 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-09-17T16:34:01.447

Xcode 4.5 使 iOS 4.3 成为最早支持的操作系统，它有效地孤立了原始 iPhone 和 3G。

如果您想支持 4.3 之前的 iOS 版本，您将需要保留大约 4.4 版本的 Xcode。

更清楚一点：你不能*轻易*（意味着 Xcode 不是开箱即用的）支持 4.3 之前的设备并在同一个应用程序中使用 iOS 6 功能。这是因为 iOS 6 功能需要 XCode 4.5，这也将 iOS 4.3 设置为支持的最低操作系统。

因此，您有 3 个选择：

1.  继续使用 XCode 4.4。您将能够以 4.3 之前的 iOS 为目标。您将无法利用 iOS 6 的功能，但假设您在实际的 iOS 6 设备上执行了充分的测试，您的应用程序应该可以正常运行。
2.  迁移到 XCode 4.5。您将无法以 4.3 之前的 iOS 为目标，但您将能够利用 iOS 6 的功能。
3.  为您的应用制作两个版本。使用 XCode 4.4 构建一个版本（如选项 1），另一个使用 4.5（如选项 2）。从分发的角度来看，这将是 2 个独立的应用程序，它们每个都有自己的捆绑 ID，等等。您将在应用程序商店中有两个条目。

如果您愿意超越 Xcode 直接支持的内容，请参阅 Nate 的回答。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-17T16:20:00.013

最初的 iPhone 和 iPhone 3G 是唯一不支持 iOS 5 的设备。iPhone 3G 现在已经使用了 4 年。您可能需要考虑放弃对 iOS 4 的支持。如果您不想这样做，我认为您将不得不在两个不同版本的 Xcode 中进行开发。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-13T13:23:22.043

我认为放弃对 iOS 4.2.1 的支持不是核心问题。事实上，我试图解决这个问题并执行以下操作：

*   使用 iOS 6 SDK 构建应用程序，将部署目标设置为 iOS 4.2.1（有效）。
*   打包应用程序以进行临时安装并将应用程序安装在 iOS 4.2.1 设备 (iPod touch 2G) 上。
*   测试应用程序。

但是，安装失败。这里的原因是 - afaik - 不是 iOS 版本。原因是架构。XCode 4.5 不再允许您为 armv6 构建。它仅适用于 armv7。另一方面：所有具有 armv7 或更高版本的设备都可以运行 iOS 5。唯一不支持 armv7 的设备是 iPhone、iPhone 3G、iPod touch 1G 和 iPod touch 2G。

所以对我来说，问题是：你能用 XCode 4.5 和 iOS 6 作为基础 SDK 为 armv6 构建吗？

编辑：你不能这样做，因为 iOS 6 基础 SDK 不适用于 armv6。对？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-28T07:07:32.260

[根据ios版本统计](http://www.14oranges.com/2012/07/ios-version-statistics-%E2%80%93-july-14th-2012/)，我认为定位到4.3是最好的选择

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-08T10:09:19.063

尝试使用手动设置项目设置`IPHONEOS_DEPLOYMENT_TARGET=4.0`。不过不知道有没有副作用。

# lua - 编译你的 lua 文件

> ID：12463198
> 
> 赞同：2
> 
> 时间：2012-09-17T16:12:06.120
> 
> 标签：lua

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T17:51:00.500

To package your Lua files into an executable on Windows you have several options. There is [srlua](http://www.tecgraf.puc-rio.br/~lhf/ftp/lua/#srlua), there is wxLuaFreeze from wxLua (available as a [binary for Windows](http://sourceforge.net/projects/wxlua/files/wxlua/2.8.12.2/wxLua-2.8.12.2-MSW-Unicode.zip/download)), and there are more options in this [SO answer](https://stackoverflow.com/questions/194520/creating-standalone-lua-executables).

Essentially, the main two options are: (1) append your Lua code to a precompiled exe file, such that it will be loaded and executed when that exe file is run, and (2) convert your Lua code into real executable by compiling it to bytecode, then to C, and then to your target platform.

As to your MacOS issue, `mkdir -p` means that mkdir is asked to create intermediate directories (for example, you asked to create `/a/b/c`, it will also create `/a/b` if those don't exist). As you don't say which version of MacOS you run, it's difficult to provide more detailed answer.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T16:19:46.823

For the OSX terminal issue:

This command should work

```
export LUA_DIR=/usr/local/lib/lua/5.1 
```

This command will probably give you permission problems:

```
mkdir -p /usr/local/lib/lua/5.1 
```

You may try this to solve that. You will be prompted for your password:

```
sudo mkdir -p /usr/local/lib/lua/5.1 
```

This command has nothing to do with OSX and will not work. This is a windows command:

```
SET LUA_DIR=”c:\program files\lua\5.1” 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-06T18:32:54.873

For now the standard distribution of Lua does not compile a script to native executable code; it execute your scripts by first compiling it to bytecode, then by interpreting the bytecode with a reasonnably fast static interpret (this also means that it is easily portable across native or virtual systems, and very resistant to attacks (that could be targetting bugs in the native compiler itself).

Also Lua still does not feature a runtime JIT compiler like Java and .Net: Lua still does not features a VM to produce a safe sandbox.

There exists Lua packages that convert your bytecode (or directly a source script) to a C source that can be used to convert a Lua library into native mode via the same C compiler used to compile the Lua engine itself (this is how the builtin libraries are produced, though they are slightly optimized manually in some time-critical parts).

However it is possible to compile Lua to a javascript source, and run it with fast performance using Javascript, because today's Javascript interprets do have good performance with their implemented VM featuring a JIT compiler for their own bytecodes.

It is also possible by converting it the Lua bytecode to a .Net or Java source that can then be executed directly from Lua (for that you need a version of Lua that has been ported to .Net or Java or Javascript, something that is not so complicate than developing in C/C++ directly a VM with a JIT compiler (a moderately complex part is the bytecode verifier, but the really complex part is the memory manager its garbage collector and its sandbox so that your Lua script will be fully isolated from the Lua engine itself for itw own memory, but the most complex part if the runtime optimizer and collection of profiling statistics: this has been done in the modern VMs for Java, .Net, Javascript, PHP/Zend, Python, Perl...).

I dont know which other language VM would offer the best performance to port Lua and implement on it a compiler to their own bytecode running at near native speed in their VM. But my own small experience with programs (in a much simpler language) self-generating a bytecode that they can run themselves, has always shown me Java winning in performance over .Net and Javascript. This is most probably because Java features an profiling-based dynamic code optimizer

(on tbe opposite the .Net optimizer runs only once during program installation, using some profiling data collected during the installation of the .Net VM itself, or at first instanciation of the script, without really knowing any profiling data collected during execution of the compiled program itself, and based on some cheked assumptions about the platform capabilities).

(I don't if would be faster in PHP, Python or Perl; the comparison with newer Javascript engines was never attempted though). Porting a Lua program to Javascript is relatively easy because it implements closures relatively easy resolution of linkages.

Probably later we'll see a true VM implementation of Lua ith a JIT and self-generating code and the possibility to instanciate new sandboxed VMs to run their self-generated code. It will take more time to generate an EXE file for distribution; notably because it generally requires adding also an installer and a distribution manager.

So for now we could imagine distributing Lua applications compiled to the bytecode of another JIT-capable VM: this generated bytecode would be faster than the Lua bytecode, and would then be extremely complex to reverse-engineer to the semantics of Lua because it would require two separate reverse engineering first from the bytecode of the other VM to the bytecode of Lua, both bytecodes loosing some easiy inferable rules and options tested and foll, and then again to sme Lua source

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T16:15:29.190

You have a permissions problem with Windows- try creating your `cmd` or PowerShell in Administrator mode. `C:\Program Files` is a protected directory that a regular user account doesn't have permission to write to.

As for the OS X issue, check out the [mkdir OS X manual page](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man1/mkdir.1.html) to make sure you have the command correct.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-17T17:57:03.597

So, if I understood your question correctly, you are trying to build Lua on Windows.

This is of course possible, but not easy for beginners. I would highly recommend you to use a binary distribution, which is much easier to install, unless you have special requirements.

Here are several Windows distributions :

*   [Lua Binaries (Lua 5.1 and 5.2)](http://luabinaries.sourceforge.net/download.html)
*   [LuaForWindows (Lua 5.1)](http://code.google.com/p/luaforwindows/downloads/list)
*   [LuaDist (Lua 5.2)](https://github.com/LuaDist/Repository/downloads)

# java - java.sql.SqlException：java.lang.OutofHeapMemory 错误

> ID：12463201
> 
> 赞同：-5
> 
> 时间：2012-09-17T16:12:09.127
> 
> 标签：java

我收到 java.sql.SqlException : java.lang.OutofHeapMemory 错误。请告诉我这可能是什么错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T16:19:56.747

您超出了为 JVM 分配的内存。

可能的原因太多了，简单回答一下，但是当你在 JDBC 栈中遇到时，可能是请求拉取了太多数据造成的。

可能的直接补救措施是：

1.  限制请求结果集
2.  增加JVM内存

对于长期解决方案，请进行堆转储并使用 MAT 等工具对其进行分析。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T16:16:52.317

您是否尝试过增加内存来编程？

```
java -Xmx256M 
```

但是这个问题非常模棱两可。

# cocoa - 可可：拆分视图的奇怪紫色约束

> ID：12463204
> 
> 赞同：2
> 
> 时间：2012-09-17T16:12:23.743
> 
> 标签：cocoa, autolayout

如果我添加三个拆分视图如下图所示，第三个拆分视图（称为 splitView-3）将自动为该拆分视图中的自定义视图生成一个约束，例如 customview1 的 Height(42)。结果，我无法在 Interface Builder 中更改 customview1 的高度。

为什么 Interface Builder 会自动为 customview1 生成紫色约束，例如 Height(43)？

任何帮助，将不胜感激。

![在此处输入图像描述](../Images/c2fb1a0dc15ddfe2e9757f4706b00d73.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T17:22:24.460

它生成它是因为您在其父视图中手动将视图调整为特定高度。将约束（在大小实用程序面板中）提升为用户约束并将其删除。如果不是一直到那里，那应该会让您获得最大的收益（但是如果没有看到其余的约束配置，我就无法判断）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T20:56:38.500

约书亚是对的……但我认为有一点需要解释。

**Xcode 需要约束来确定所有项目的位置和大小**。它之所以坚持紫色，是因为没有足够的限制来满足这些需求，而无需额外增加一些。

因此，Xcode 坚持高度约束，这意味着它无法根据现有约束确定高度。您可以通过添加约束来定义它：

*   高度等于其他一些项目的高度
*   通过设置底部距离 X 点远离另一个项目
*   通过设置相对于它的超级视图的底部位置
*   或者....好吧，还有很多，但希望你能明白

一旦你添加了一个让 Xcode 知道视图高度的约束，那个紫色的要么消失要么变成蓝色，所以你可以删除它并且让它不再回来。

# java - gps working in emulator but not working in mobile

> ID：12463213
> 
> 赞同：1
> 
> 时间：2012-09-17T16:13:20.443
> 
> 标签：java, android

> hi working with simple android application that shows address of the user but this app is working in emulator well but when i install it in mobile its showing force close.please help me thanks in advance

```
 package com.gps.com;
    import java.io.IOException;
    import java.util.List;
import java.util.Locale;
import android.app.Activity;
import android.content.Context;
import android.location.Address;
import android.location.Geocoder;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;
import android.widget.Toast;

public class main extends Activity {

    private static final long MINIMUM_DISTANCE_CHANGE_FOR_UPDATES = 1; // in Meters
    private static final long MINIMUM_TIME_BETWEEN_UPDATES = 1000; // in Milliseconds

    protected LocationManager locationManager;

    protected Button retrieveLocationButton;
    public Location location;
    public TextView tv;

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        retrieveLocationButton = (Button) findViewById(R.id.retrieve_location_button);
         tv= (TextView)findViewById(R.id.tv);
        locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

        locationManager.requestLocationUpdates(
                LocationManager.GPS_PROVIDER, 
                MINIMUM_TIME_BETWEEN_UPDATES, 
                MINIMUM_DISTANCE_CHANGE_FOR_UPDATES,
                new MyLocationListener()
        );
        retrieveLocationButton.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                showCurrentLocation();

            }
        });

    }    

    public void showCurrentLocation() {

        Location location = locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);

        if (location != null) {
            String message = String.format(
                    "Current Location \n Longitude: %1$s \n Latitude: %2$s",
                    location.getLongitude(), location.getLatitude()
            );
            Toast.makeText(main.this, message,
                    Toast.LENGTH_LONG).show();
        }
        try {
            List<Address> addresses;

            Geocoder gc = new Geocoder(this, Locale.ENGLISH); 
            addresses = gc.getFromLocation(location.getLatitude(),location.getLongitude(), 1); 
            if(addresses != null) {
            Address currentAddr = addresses.get(0);
            StringBuilder sb = new StringBuilder("Address:\n"); 
            for(int i=0; i<currentAddr.getMaxAddressLineIndex(); i++) {
            sb.append(currentAddr.getAddressLine(i)).append("\n"); 
            }
            tv.setText(sb.toString()); 
            }
            } catch(IOException e) { 
            tv.setText("Something is mistake the error is"+e);
            }

    }   

    private class MyLocationListener implements LocationListener {

        public void onLocationChanged(Location location) {
            String message = String.format(
                    "New Location \n Longitude: %1$s \n Latitude: %2$s",
                    location.getLongitude(), location.getLatitude()
            );
            Toast.makeText(main.this, message, Toast.LENGTH_LONG).show();
        }

        public void onStatusChanged(String s, int i, Bundle b) {
            Toast.makeText(main.this, "Provider status changed",
                    Toast.LENGTH_LONG).show();
        }

        public void onProviderDisabled(String s) {
            Toast.makeText(main.this,
                    "Provider disabled by the user. GPS turned off",
                    Toast.LENGTH_LONG).show();
        }

        public void onProviderEnabled(String s) {
            Toast.makeText(main.this,
                    "Provider enabled by the user. GPS turned on",
                    Toast.LENGTH_LONG).show();
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T16:24:27.483

This line

```
addresses = gc.getFromLocation(location.getLatitude(),location.getLongitude(), 1); 
```

could give you a Nullpointer Exception, because its outside of the if-block, which is unhandled, as you are only catching IOException in that specific try-block. This might not be the solution to the problem you are having, but I thought I'd point it out anyway.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T17:46:54.537

It's also an obvious suggestion, but you can't turn GPS on programmatically, you have to do that manually. Have you verified that GPS is turned on in your phone??

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T10:15:47.597

Im also had same problem. Try this code inside manifest.xml. It working for me.

MainActivity:

```
public class WhereIActivity extends MapActivity {

      // MapController mc;
       MapView myMapView;
       MapController mapController;
       GeoPoint point;
       MyPositionOverlay positionOverlay;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_where_i);

        MapView myMapView=(MapView)findViewById(R.id.myMapView);

        mapController=myMapView.getController();

       myMapView.displayZoomControls(false);

       mapController.setZoom(17);

       positionOverlay=new MyPositionOverlay();
       List<Overlay> overlays=myMapView.getOverlays();
       overlays.add(positionOverlay);

      // myMapView.setSatellite(true);

       myMapView.setStreetView(true);
       myMapView.setTraffic(true);

        LocationManager locationManager; 
        String context = Context.LOCATION_SERVICE; 
        locationManager = (LocationManager)getSystemService(context); 

        Criteria crta = new Criteria(); 
        crta.setAccuracy(Criteria.ACCURACY_FINE); 
        crta.setAltitudeRequired(false); 
        crta.setBearingRequired(false); 
        crta.setCostAllowed(true); 
        crta.setPowerRequirement(Criteria.POWER_LOW); 
        String provider = locationManager.getBestProvider(crta, true); 

     // String provider = LocationManager.GPS_PROVIDER; 
        Location location = locationManager.getLastKnownLocation(provider); 
        updateWithNewLocation(location); 

        locationManager.requestLocationUpdates(provider, 2000, 10, locationListener); 
        } 
    private final LocationListener locationListener = new LocationListener() 
    { 

    @Override 
    public void onLocationChanged(Location location) { 
    updateWithNewLocation(location); 
    } 

    @Override 
    public void onProviderDisabled(String provider) { 
    updateWithNewLocation(null); 
    } 

    @Override 
    public void onProviderEnabled(String provider) { 
    } 

    @Override 
    public void onStatusChanged(String provider, int status, Bundle extras) { 
    } 

    }; 

    private void updateWithNewLocation(Location location) { 
        String latLong;
        TextView myLocation; 
        myLocation = (TextView) findViewById(R.id.myLocation); 

        String addressString = "no address found"; 

        if(location!=null) { 

            positionOverlay.setLocation(location);

            Double geoLat=location.getLatitude()*1E6;
            Double geoLng=location.getLongitude()*1E6;
            GeoPoint point=new GeoPoint(geoLat.intValue(),geoLng.intValue());

            mapController.animateTo(point);

        double lat = location.getLatitude(); 
        double lon = location.getLongitude(); 
        latLong = "Lat:" + lat + "\nLong:" + lon; 

        double lattitude = location.getLatitude(); 
        double longitude = location.getLongitude(); 

        Geocoder gc = new Geocoder(this,Locale.getDefault()); 
        try { 
        List<Address> addresses= gc.getFromLocation(lattitude, longitude, 1); 
        StringBuilder sb = new StringBuilder(); 
        if(addresses.size()>0) { 
        Address address=addresses.get(0);
        for(int i=0;i<address.getMaxAddressLineIndex();i++)
            sb.append(address.getAddressLine(i)).append("\n");
        sb.append(address.getLocality()).append("\n"); 
        sb.append(address.getPostalCode()).append("\n"); 
    sb.append(address.getCountryName()); 
    } 
        addressString = sb.toString(); 
        } 
        catch (Exception e) { 
        } 
        } else { 
        latLong = " NO Location Found "; 
        } 

        myLocation.setText("Current Position is :\n"+ latLong + "\n"+  addressString ); 
           } 
```

MyPositionOverlay:

```
public class MyPositionOverlay extends Overlay {

    Location location;
    private final int mRadius=5;

    @Override
    public void draw(Canvas canvas,MapView mapView,boolean shadow){

        Projection projection=mapView.getProjection();

        if(shadow==false){
            Double latitude=location.getLatitude()*1E6;
            Double longitude=location.getLongitude()*1E6;

            GeoPoint geoPoint;
             geoPoint=new GeoPoint(latitude.intValue(),longitude.intValue());

             Point point=new Point();
             projection.toPixels(geoPoint, point);

             RectF oval=new RectF(point.x - mRadius,point.y - mRadius,point.x + mRadius,point.y + mRadius);

             Paint paint=new Paint();
             paint.setARGB(250, 255, 255, 255);

             paint.setAntiAlias(true);
             paint.setFakeBoldText(true);

             Paint backPaint=new Paint();
             backPaint.setARGB(175, 50, 50, 50);
             backPaint.setAntiAlias(true);

             RectF backRect=new RectF(point.x + 2 + mRadius, point.y - 3*mRadius,point.x + 65, point.y + mRadius);

             canvas.drawOval(oval, paint);
             canvas.drawRoundRect(backRect, 5, 5, backPaint);
             canvas.drawText("Here I Am", point.x + 2*mRadius, point.y, paint);
        }
        super.draw(canvas, mapView, shadow);

        }

    @Override
    public boolean onTap(GeoPoint point,MapView mapView){

            return false;
            }

public Location getLocation(){

    return location;

}
public void setLocation(Location location){
    this.location=location;
}
} 
```

Main.xml:

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    tools:context=".WhereIActivity" >

    <com.google.android.maps.MapView
        android:id="@+id/myMapView"
                 android:layout_width="fill_parent"
                 android:layout_height="fill_parent"
                 android:enabled="true"
                 android:clickable="true"                
                  android:apiKey="0_MW1zfGUXAZ2cAEBaB62GeWv0FoZODowBf1WYg"
          />

    <TextView
        android:id="@+id/myLocation"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"

        tools:context=".WhereIActivity"

        android:gravity="center_horizontal"

         android:textStyle="bold"
        android:textSize="14sp"
        android:typeface="sans"
        android:textColor="#0099CC"

                 android:layout_alignParentTop="true"     

         />    

</RelativeLayout> 
```

manifest.xml:

```
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.android.wherei"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="4"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >

        <uses-library android:name="com.google.android.maps"></uses-library>      
          <activity
            android:name=".WhereIActivity"
            android:label="@string/title_activity_where_i" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS" />       
<uses-permission android:name="android.permission.INTERNET" />     
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE"/>
</manifest> 
```

# php - PHP 操作字符串（如果值存在则查找/替换）

> ID：12463215
> 
> 赞同：0
> 
> 时间：2012-09-17T16:13:32.353
> 
> 标签：php

我有一个文本字符串，它在变量中设置为如下值：

```
$str = 'type=showall' 
```

或者

```
$str = 'type=showall&skip=20'
$str = 'type=showall&skip=40'
$str = 'type=showall&skip=60' 
```

等等。

我需要检查字符串中是否存在“跳过”值，如果存在，则将其替换为存储在 $newSkip 变量中的新数字，并保持字符串相同，但跳过值的更改除外.

例如，如果字符串是：

```
$str = 'type=showall&skip=20' 
```

和

```
$newSkip = 40 
```

那么我希望这个被退回：

```
$str = 'type=showall&skip=40' 
```

如果没有跳过值：

```
$str = 'type=showall' 
```

和

```
$newSkip = 20 
```

那么我希望这个被退回：

```
$str = 'type=showall&skip=20' 
```

我对 PHP 还很陌生，所以仍然可以使用各种函数找到自己的方式，并且不确定在这种情况下哪个/s 是最好的，当您要查找的文本/值可能/可能不在字符串中时.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T16:23:28.920

PHP 有一个方便的函数调用`parse_str()`，它接受一个类似于你所拥有的字符串，并返回一个带有键/值对的数组。然后，您将能够检查特定值并进行所需的更改。

```
$str = 'type=showall&skip=20';

// this will parse the string and place the key/value pairs into $arr
parse_str($str,$arr);

// check if specific key exists
if (isset($arr['skip'])){
    //if you need to know if it was there you can do stuff here
}

//set the newSkip value regardless
$arr['skip'] = $newSkip;

echo http_build_query($arr); 
```

该`http_build_query`函数会将数组返回为您开始使用的相同 URI 格式。此函数还对最终字符串进行编码，因此如果您想查看解码后的版本，您必须通过[`urldecode()`](http://php.net/manual/en/function.urldecode.php).

参考 -

*   [`parse_str()`](http://php.net/manual/en/function.parse-str.php)
*   [`http_build_query()`](http://php.net/manual/en/function.http-build-query.php)

# c# - 构建文件和目录类的最合适方法，以便在将结果放在树上时轻松过滤结果

> ID：12463220
> 
> 赞同：0
> 
> 时间：2012-09-17T16:14:07.127
> 
> 标签：c#, wpf, filter, tree, treeview

我正在创建一个程序，可以草书查找指定路径中的所有文件和目录。因此，如果该节点恰好是一个目录，则该节点可能具有其他节点。

这是我的节点类：

```
class Node
{
    public List<Node> Children = new List<Node>(); // if node is directory then children will be the files and directories in this direcotry
    public FileSystemInfo Value { get; set; }  // can eather be a FileInfo or DirectoryInfo

    public bool IsDirectory 
    { 
        get{ return Value is DirectoryInfo;} 
    }

    public long Size   // HERE IS WHERE I AM HAVING PROBLEMS! I NEED TO RETRIEVE THE 
    {                  // SIZE OF DIRECTORIES AS WELL AS FOR FILES.
        get
        {
            long sum = 0;

            if (Value is FileInfo)
                sum += ((FileInfo)Value).Length;
            else
                sum += Children.Sum(x => x.Size);

            return sum;
        }
    }

    // this is the method I use to filter results in the tree
    public Node Search(Func<Node, bool> predicate)
    {
         // if node is a leaf
         if(this.Children.Count==0)
         {
             if (predicate(this))
                return this;
             else
                return null;
         }
         else // Otherwise if node is not a leaf
         {
             var results = Children.Select(i => i.Search(predicate)).Where(i => i != null).ToList();

             if (results.Any()) // THIS IS HOW REMOVE AND RECUNSTRUCT THE TREE WITH A FILTER
             {
                var result = (Node)MemberwiseClone();
                result.Children = results;
                return result;
             }
             return null;
         }             
    }

} 
```

**并且由于该节点类，我能够将树显示为：**

![在此处输入图像描述](../Images/544d707f7873a8c75d08caaebe71969d.png)

在一列中，我显示目录或文件的名称，并在右侧显示大小。大小被格式化为货币只是因为逗号有助于更清晰地可视化它。

**所以现在我的问题是**我有这个程序的原因是执行一些高级搜索。因此，我可能只想搜索具有“.txt”扩展名的文件。如果我在我的树上执行该过滤器，我将得到：

![在此处输入图像描述](../Images/601d441cb8067a7f26dfd10a6c7f10f0.png)

（请注意，我将文本编译为一个接受 Node 并返回 bool 的函数，并将该方法传递给 Node 类的 Search 方法以过滤结果。有关如何动态编译代码的更多信息，请参见：[http://www.codeproject.com/Articles/10324/Compiling-code-during-runtime](http://www.codeproject.com/Articles/10324/Compiling-code-during-runtime)）无论如何，这与这个问题无关。**重要的部分是我删除了所有不符合该条件的节点`and because I removed those nodes now the sizes of the directories changed!!!`**

**所以我的问题是**如何过滤结果以保持目录的实际大小。我想我将不得不删除属性 Size 并用一个字段替换它。问题在于，每次我添加到树中时，我都必须更新所有父目录的大小，这会变得很复杂。在开始以这种方式编码之前，我会很感激你对我应该如何开始实现这个类的意见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T16:19:25.797

由于您使用的是递归并且您的权重是节点级别的属性，因此即使您删除节点，您也不能期望它会继续求和。您要么将其提升到更高级别（集合），要么在递归中使用外部计数器（计数但不依赖于过滤器，您需要通过递归进行）。

无论如何，您为什么要再次实现核心 .NET 功能？除了过滤或递归搜索之外的任何原因？两者都在 BCL 中得到了很好的[实现。](http://msdn.microsoft.com/en-us/library/dd383571.aspx)

# php - 如何在 Doctrine2 / ZF2 中使用 Memcached？

> ID：12463225
> 
> 赞同：3
> 
> 时间：2012-09-17T16:14:24.693
> 
> 标签：php, doctrine-orm, zend-framework2

我已经按照本文所述设置了我的代码/目录/配置：[http ://www.jasongrimes.org/2012/01/using-doctrine-2-in-zend-framework-2/](http://www.jasongrimes.org/2012/01/using-doctrine-2-in-zend-framework-2/)

所以我的配置文件看起来像：

```
<?php
namespace Game;

return array(

    // <snip>

    // Doctrine config
    'doctrine' => array(
        'driver' => array(
            __NAMESPACE__ . '_driver' => array(
                'class' => 'Doctrine\ORM\Mapping\Driver\AnnotationDriver',
                'cache' => 'array',
                'paths' => array(__DIR__ . '/../src/' . __NAMESPACE__ . '/Entity')
            ),
            'orm_default' => array(
                'drivers' => array(
                    __NAMESPACE__ . '\Entity' => __NAMESPACE__ . '_driver'
                )
            )
        )
    ),
); 
```

现在，我需要设置/更改什么以使 Doctrine 使用 Memcached 作为其缓存后端？我在谷歌上搜索了很多，但除了[这个问题](https://stackoverflow.com/questions/12373142/add-caching-to-zend-form-annotation-annotationbuilder)，它说他们让它工作（但不是如何），我什么也没找到。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-08T07:00:39.343

他们在[这里发布了支持它的官方方式](https://github.com/doctrine/DoctrineORMModule/blob/b2c9507603d4f4442fa1f3ead87e14abb80b8073/docs/configuration.md)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-03T09:55:20.783

忘记之前的答案。在花了几个小时跟踪错误后，我发现教义寻找“doctrine.cache.instance”的值应该有一个字符串引用您在服务管理器中设置的服务。

但是，由于原则代码库中的错误，配置永远不会被检索到。稍后我会将其提交给 github。

但好消息是，当没有给出“doctrine.cache.instance”时，会使用别名“my_memcached_alias”。

所以上面的代码可以很容易地修复，并从教义源中删除尴尬的黑客攻击。

（**注意**：为了将来的兼容性和显示设置实例别名的正确方法，我保留了教义缓存配置）

模块.config.php

```
 'doctrine' => array(
            'driver' => array(
                __NAMESPACE__ . '_driver' => array(
                    'class' => 'Doctrine\ORM\Mapping\Driver\AnnotationDriver',
                    'cache' => 'memcached',
                    'paths' => array(__DIR__ . '/../src/' . __NAMESPACE__ . '/Entity'),
                ),
                'orm_default' => array(
                    'drivers' => array(
                        __NAMESPACE__ . '\Entity' => __NAMESPACE__ . '_driver',
                    ),
                ),
            ),
            'cache' => array(
                'instance' => 'my_memcached_alias',
            ),
        ),

    'service_manager' => array(
            'factories' => array(
                'my_memcached_alias' => function() {
                    $memcached = new \Memcached();
                    $memcached->addServer('localhost', 11211);
                    return $memcached;
                },
            ),
         ), 
```

我希望您现在已经找到了一个不涉及框架修改的解决方案，但是对于仍在寻找答案的人来说，这肯定会有所帮助

编辑：经过多次头疼后，我发现配置应该是教义.cache.memcache.instance

第二次编辑：

这是正确的代码

```
'cache' => array(
        'memcache' => array(
            'instance' => 'memcacheService',
        ),
    ), 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-18T07:27:24.447

我在让它工作时遇到了一些麻烦，我只有一个临时的解决方法，因为我需要修改 Doctrine ORM 模块本身。

首先，在上面的配置中将缓存设置为 memcache `'cache' => 'array',`: `'cache' => 'memcache',`。

然后，定义一个服务工厂来创建 memcache 实例。您可以在模块类中执行此操作：

**注意：**此示例基于*memcache*，而不是*memcacheD*。*但是对于memcached*应该是一样的。

```
function getServiceConfig()
{
    return array(
        'factories' => array(
            'memcache' => function(ServiceManager $sm) {
                $memcache = new \Memcache(); // .. do some configuration and connect
                return $memcache;
            } 
        )
    );
} 
```

最后一步是修改 Doctrine ORM 模块。否则，它不会创建实例并引发错误。

在`DoctrineModule/Service/CacheFactory.php l61`：

```
$cache->setMemcache($options->getInstance()); 
```

变成：

```
$cache->setMemcache($sl->get($options->getInstance())); 
```

（在您的情况下，对第 64 行执行此操作。）或者找到另一种方法将 memcached 实例注入`$options`. 请注意，这应该只是一种解决方法并尽快修复。否则，您将无法更新模块。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-21T19:42:26.313

我们不需要更改核心 Doctrine ORM 模块源。

将工厂更改为：

```
return array(
        'factories' => array(
            'my_memcache_alias' => function(ServiceManager $sm) {
                $memcache = new \Memcache(); // .. do some configuration and connect
                return $memcache;
            } 
        )
    ); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-28T09:12:16.147

首先安装 memcached php 扩展。

```
~ # > aptitude install php5-memcached 
```

之后，您将需要配置 memcached 服务器参数

```
//app/config/parameters.yml
parameters:
    ...
    memcache_hosts:
        -
            dsn: 127.0.0.1
            port: 11211 
```

接下来我们需要创建一些服务

```
services:
    memcached:
        class: Memcached
        calls:
            - [ addServers, [%memcache_hosts%] ]

    doctrine.cache.memcached:
        class: Doctrine\Common\Cache\MemcachedCache
        calls:
            - [ setMemcached, [ @memcached ] ] 
```

之后，我们需要向 config.yml 添加一些配置

```
//app/config/config.yml

...
doctrine:
    ...
    orm:
        entity_managers:
            default:
               ...    
               metadata_cache_driver:
                    type: service
                    id: doctrine.cache.memcached
                query_cache_driver:
                    type: service
                    id: doctrine.cache.memcached
                result_cache_driver:
                    type: service
                    id: doctrine.cache.memcached 
```

现在我们可以使用 Memcached 来缓存我们的查询，就像 Doctrine Doc 解释的那样。

我们还有三个 symfony 命令来清除学说缓存

```
$> php app/console doctrine:cache:clear-metadata 
                 //Clears all metadata cache for an entity manager

$> php app/console doctrine:cache:clear-query 
                 //Clears all query cache for an entity manager

$> doctrine:cache:clear-result 
                 //Clears result cache for an entity manager 
```

我从以下步骤中提取了这些步骤：

[https://blog.42mate.com/implementing-doctrine-caching-with-memcached-in-symfony-2/](https://blog.42mate.com/implementing-doctrine-caching-with-memcached-in-symfony-2/)

# sas - 按组分配 ID 号

> ID：12463226
> 
> 赞同：1
> 
> 时间：2012-09-17T16:14:33.137
> 
> 标签：sas

如何`ID`根据两个变量分配数字，`A`并且`B`. 如果代码可以处理多个变量，那将很有帮助。这是我的数据的样子：

```
A       B  ID
5000136 5 1
5000136 5 1
5000225 4 2
5000225 4 2
5000225 4 2
5000225 6 3
5000225 6 3
5000225 6 3
5000327 2 4
5000327 2 4
.... 
```

`ID`是我想要产生的结果。在此先感谢，如果这个问题重复，我很抱歉。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T16:27:48.427

```
data want;
set have;
by A B;
if first.B then id+1;
run; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T21:42:43.947

如果您不想先使用.[var] 处理，也可以使用此方法。

```
data test;
infile cards;
input a b;
retain id 0;
id = ifn(lag(b) ne b, id+1, id);
datalines;
5000136 5 
5000136 5 
5000225 4 
5000225 4 
5000225 4 
5000225 6 
5000225 6 
5000225 6 
5000327 2 
5000327 2 
;
run;

proc print; 
run; 
```

# c# - Unable to connect to localDB in VS2012 – “建立与 SQL Server 的连接时发生网络相关或特定于实例的错误...”

> ID：12463228
> 
> 赞同：19
> 
> 时间：2012-09-17T16:14:43.423
> 
> 标签：c#, sql-server, ado.net, .net-4.5, localdb

这很奇怪，因为我可以使用相同的连接字符串（“ `Data Source=(LocalDB)\v11.0;Integrated Security=true`”）通过 SSMS 2008R2 连接到 localDB

只有`C#`代码无法连接，我尝试增加登录时间`Connect Timeout=60`但没有运气。

我还尝试指定`Initial Catalog=&lt;databasename&gt;`<databasename> 是我通过 ssms 在 localdb 上创建的数据库。

关于为什么不连接的任何指示？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-09-17T16:42:33.637

有没有可能是因为您忘记双重转义反斜杠？你试过这个：

`"Data Source=(LocalDB)\\v11.0;Integrated Security=true"`

或者更好的是，您可以只使用该`@`标记来禁用整个连接字符串的字符转义：

`@"Data Source=(LocalDB)\v11.0;Integrated Security=true"`

# ios - 传送 Default.png 图像时临时部署失败

> ID：12463232
> 
> 赞同：5
> 
> 时间：2012-09-17T16:15:03.077
> 
> 标签：ios, code-signing, testflight, ad-hoc-distribution, default.png

我遇到了一个问题，我无法通过 TestFlight 安装我的应用程序的 Ad Hoc 版本。应用程序已下载，但在安装步骤中显示“无法安装您的应用程序”之类的内容，控制台上显示以下消息：

```
Sep 17 16:08:24 unknown installd[4767] <Error>: 00381000 verify_signer_identity: Could not copy validate signature: -402620393
Sep 17 16:08:24 unknown installd[4767] <Error>: 00381000 preflight_application_install: Could not verify executable at /var/tmp/install_staging.2wYy1J/foo_extracted/Payload/PocketCASbeta.app
Sep 17 16:08:24 unknown com.apple.itunesstored[4764] <Notice>: MobileInstallationInstall: failed with -1
Sep 17 16:08:24 unknown installd[4767] <Error>: 00381000 install_application: Could not preflight application install
Sep 17 16:08:24 unknown installd[4767] <Error>: 00381000 handle_install: API failed
Sep 17 16:08:24 unknown installd[4767] <Error>: 00381000 send_message: failed to send mach message of 71 bytes: 10000003
Sep 17 16:08:24 unknown installd[4767] <Error>: 00381000 send_error: Could not send error response to client 
```

`codesign --verify`不会返回任何错误，并且我已经仔细检查了我使用的是正确的 Ad Hoc 配置文件（`codesign --display -vvvv`确认这一点）。

但是，一旦我从应用程序中删除了所有 Default.png 图像，安装就可以运行，之后就可以运行应用程序了。IPA 的大小约为 10 MB（不含 Default.png 图像）和 15 MB（包含所有 Default.png 图像）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T09:46:19.750

您是否尝试过通过 Xcode 将 IPA 直接安装到您的设备上？

连接设备。

打开 Xcode Organizer / 设备选项卡 / 选择您的设备 / 应用程序。

单击左下角的 +（添加）按钮，选择您的应用程序。

如果此安装也失败，我怀疑您的 Default.png 图像有问题。如果您正在编写图像转换脚本，那么值得一提的是，我过去使用*sips*命令行实用程序创建 Apple 不喜欢的 png 图像时遇到了很多问题，所以我已经停止使用它。我现在改用 ImageMagick，从那以后就没有遇到任何麻烦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T06:48:50.187

看来升级到 Xcode 4.5.1 已经解决了这个问题......

# sql - Teradata 中的子字符串和修剪

> ID：12463233
> 
> 赞同：2
> 
> 时间：2012-09-17T16:15:07.863
> 
> 标签：sql, string, trim, teradata

我正在使用 Teradata 处理一些描述性数据，这些数据需要根据数据元素的类型和属性值从通用 varchar(60) 转换为不同的字段长度。因此，我需要采用 Varchar(60) 中的任何内容，并根据字段“ABCD”对字段“XYZ”进行操作。在这种情况下，XYZ 是一个 varchar(3)。为此，我在我的选择中使用 CASE 逻辑。我想做的是

消除所有出现的非字母/数字数据。我想要的只是大写字母和数字。在这种情况下，“where abcd = 'GROUP' then xyz 应该以 '000', '002', 'A', 'C' 消除额外的填充 Shift all Right

```
 abcd    xyz
1   GROUP   NULL
2   GROUP   $
3   GROUP   000000000000000000000000000000000000000000000000000000000000
4   GROUP   000000000000000000000000000000000000000000000000000000000002
5   GROUP   A
6   GROUP   C
7   GROUP   r 
```

为此，我尝试了 TRIM 和 SUBSTR 以及其他一些不起作用的方法。我已经粘贴了我现在正在工作的内容，但我不能可靠地处理选择中的数据。我真的在寻找一些关于如何更好地在 Teradata 中使用字符串的选项。我一直在研究“SQL 函数、运算符、表达式和谓词”在线 PDF。有没有更好的参考。我们在 TD 13

```
SELECT abcd
        , CASE 
            -- xxxxxxxxxxxxxxxxxxxxxxxxxxxxx
            WHEN abcd= 'GROUP'
                THEN(
                    CASE
                        WHEN SUBSTR(tx.abcd,60, 4) = 0
                            THEN (
                                    SUBSTR(tx.abcd,60, 3)
                                        )
                            ELSE
                                TRIM (TRAILING FROM tx.abcd)
                        END
                        )
            END AS abcd

FROM db.descr tx
WHERE tx.abcd IS IN ( 'GROUP') 
```

最终结果应该是这样的

```
 abcd    xyz
1   GROUP   000
2   GROUP   002
3   GROUP     A
4   GROUP     C 
```

我将不得不处理大约 60 种不同的“abcd”类型，但它们都应该符合我目前看到的数据类型.. 即.. 混合大小写、非数字、非字母、填充等。

我知道有更好的方法，但我已经在几个圈子里试图在周末解决这个问题，需要朝着正确的方向努力。

在此先感谢，帕特

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T16:32:48.950

下面的 SQL 使用 CHARACTER_LENGTH 函数首先确定是否需要使用 Teradata 13.x 中的本机函数执行相当于 RIGHT(tx.xyz, 3) 的操作。我认为这可能会完成您想要做的事情。我希望我没有误解你的解释：

```
SELECT CASE WHEN tx.abcd = 'GROUP'
             AND CHARACTER_LENGTH(TRIM(BOTH FROM tx.xyz) > 3
            THEN SUBSTRING(tx.xyz FROM (CHARACTER_LENGTH(TRIM(BOTH FROM tx.xyz)) - 3))
            ELSE tx.abcd
       END
FROM db.descr tx; 
```

**编辑：**修复了 SUBSTRING 中的括号

# ruby-on-rails - 如何在 Ruby on Rails 的选择框中对字符串进行排序

> ID：12463234
> 
> 赞同：0
> 
> 时间：2012-09-17T16:15:06.917
> 
> 标签：ruby-on-rails, ruby, drop-down-menu

我正在尝试构建一个选择框，它将按字母顺序返回我的项目列表：

```
<%= f.select(:project_id, current_user.projects.all(:order => 'name').collect {|p| [ p.name, p.id ]}) %> 
```

只要名称字段仅包含一个单词，例如**Project** ，这将起作用。

但是，所有包含空格的条目，例如**My project**，都不会被排序。它们只是出现在列表的顶部。

我怎样才能订购*所有*的字符串？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T16:52:52.060

好的，这就是我最终的结果：

```
<%= f.select(:project_id, current_user.projects.all(:order => 'name').sort_by{|n| n.name.downcase}.collect {|p| [ p.name, p.id ]}) %> 
```

似乎大写条目导致了问题。*sort_by* 方法来救援。不过，不确定是否有更好的方法来做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T16:27:03.597

试试排序功能

```
<%= f.select(:project_id, current_user.projects.all(:order => 'name').collect {|p| [ p.name, p.id ]}.sort) %> 
```

这将对您的列表进行排序。

以这种方式使用它

```
<%= f.select :brand_id, options_for_select(current_user.projects.all(:order => 'name').collect {|p| [ p.name, p.id ]}.sort), {}, :id => 'dealerships_filter_brand_id' %> 
```

请试试这个，我用过它，它对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T16:28:09.877

您可以为此在数组上使用排序方法，因为您的代码包含对数组 [name, id]，您可以像这样对它进行排序，

排序！{ |a, b| a.first <=> b.first }

考虑到您想使用第一个 arg 名称进行排序

如果必须对第一个参数进行排序，则更好用

排序！

# php - PHP 插入 mysql

> ID：12463236
> 
> 赞同：1
> 
> 时间：2012-09-17T16:15:19.763
> 
> 标签：php, mysql, database, phpmyadmin

所以我有 php 代码在表格中插入表单数据。这是代码：

```
$link = @mysql_connect("***", "***", "****");
if (!$link) {
 echo "save_failed";
 return; 
}
mysql_select_db("***", $link);

$sql="INSERT INTO Conference (`First Name`, `Last Name`)
VALUES ('$_POST[fname]', '$_POST[lname]')";

mysql_close($link); 
```

很明显，*** 被实际代码中的实际值替换。但是上面的代码有什么问题吗？我试图运行它，它没有任何连接错误，但它也没有插入任何东西。这是我的mysql表的样子： ![mysql表](../Images/abd9b363c43629149aeb5252c1f0ff72.png)

另外，我需要表有一个自动递增的数字，以便每个条目都是唯一的，具有自己的索引值。关于这两个问题的任何想法？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T16:17:20.700

您尚未执行查询，应按如下方式执行：

```
mysql_query($sql, $link); 
```

另外，请考虑使用[`mysqli`](http://www.php.net/manual/en/book.mysqli.php)甚至更好[`PDO`](http://ua.php.net/manual/en/book.pdo.php)，因为该`mysql`软件包已被弃用（见红色框），即[`mysql_query()`](http://ua.php.net/manual/en/function.mysql-query.php).

# c# - 代码效率/优化

> ID：12463239
> 
> 赞同：1
> 
> 时间：2012-09-17T16:15:26.087
> 
> 标签：c#, linq

不确定这是否是一个正确的问题，但我想我会试一试，看看会出现什么样的答案。

我们正处于开发阶段，我们正在进行用户验收测试，用户发现有点缺乏的一件事是在选择搜索结果后加载选项卡的速度。我已经实现了日志记录方法，并提出了一些导致感知缓慢的方法和数据检索/操作的罪魁祸首。下面是最大的问题。该方法的目的是选择为保单或任何子保单收到的所有付款，按到期日和付款日期将它们组合在一起，然后返回一个 GroupedClass，它将为整个保单支付的金额相加。我想知道是否有任何方法可以提高效率。我注意到使用这些旧的 UniVerse 数据，如果不强制转换，事情往往会中断。

```
var mc = new ModelContext();
var policy = mc.Polmasts.Find("N345348");
        var payments =
            mc.Paymnts.Where(p => p.POLICY.Contains(policy.ID)).GroupBy(p => new { p.PAYDUE_, p.PAYPD_ }).Select(
                    grp =>
                    new GroupedPayments
                        {
                            PAYPD_ = grp.Key.PAYPD_,
                            PAYDUE_ = grp.Key.PAYDUE_,
                            AMOUNT = grp.Sum(a => a.AMOUNT),
                            SUSP = grp.Sum(a => a.SUSP)
                        }).AsEnumerable().OrderByDescending(g => g.PAYDUE_).Take(3); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T08:16:34.010

> 我注意到在使用这些旧的 UniVerse 数据时，如果`.AsEnumerable()`在使用之前不进行转换，事情往往会崩溃

这就是你问题的根源。通过说`AsEnumerable`，您是在排序并获取前三个*之前*强制删除该序列中的*所有记录。*显然，对于更多数据，这将变得越来越慢。

 *鉴于您所说的，解决此问题可能很困难。一般来说，LINQ 提供程序提供了不同数量的功能，这些功能可以在服务器上评估，哪些不能。从您上面的评论来看，听起来 LINQ-to-UniVerse 在服务器上做事并不是特别好。

例如，我希望任何好的数据库 LINQ 提供程序都能够做到（使用虚构的定义）

```
context.Products.Where(p => p.Type == 4).OrderBy(p => p.Name) 
```

在服务器上；但是，您上面的代码更加繁重。尝试将其拆分为更小的部分，并确定是否可以让服务器进行排序和`Take(3)`. 最好的办法可能是一个查询（*可以*在服务器上完成）来获取底部的三个`PAYDUE_`值，然后另一个来实际获取这些日期的金额，将所有*相关*记录拉到客户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T16:49:22.777

假设您正在针对 SQL Server 运行，我将启用分析，Linq 习惯于不生成您想要的 SQL。与内存操作相比，速度变慢更有可能是由于 SQL 错误造成的。*

# c - 不以空值终止 C 样式的字符串

> ID：12463241
> 
> 赞同：1
> 
> 时间：2012-09-17T16:15:29.430
> 
> 标签：c, string, c-strings

给定一个字符串，比如说，

```
char *str = "Hello,StackOverflow!"
char newStr[30];
int l = strlen(str);
for(int i =0 ; i<l ; i ++ )
   newStr[i] = str[i];
printf("%s" , newStr); 
```

现在，我们知道 c 字符串的最后一个字符必须`'\0'`是找到字符串的结尾。

但我注意到它有时工作正常，有时却不行。可能是什么问题呢 ？实际上，它几乎每次都在工作。它不应该崩溃或给出一些运行时错误吗？

在 C++ 中也会出现同样的情况吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-17T16:17:48.710

不。它调用未定义的行为——这意味着它不必**崩溃**——它可以做任何事情，比如[鼻恶魔。](http://www.catb.org/jargon/html/N/nasal-demons.html)

此外，“给出一个运行时错误” - 好吧，这取决于你所说的运行时错误是什么意思。C 没有动态运行时 - 如果您希望从异常中得到格式良好的错误消息，那将不会发生。会发生什么很可能是[分段错误。](http://en.wikipedia.org/wiki/Segmentation_fault)

总而言之，如果一个人导致/使用未定义的行为，他绝不能依赖它崩溃或不崩溃。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T16:17:43.473

**不能**保证“崩溃” 。不正确地处理字符串中的空终止符（更普遍地访问缓冲区边界之外的数据）或违反 `printf`格式字符串的程序可能看起来工作得很好，可以正常运行并且不会导致段错误。但这只是偶然：您的代码的行为是未定义的。

在 C++ 中也是一样的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-17T16:27:35.860

我怀疑大多数时候它会继续打印过去的“！” 并继续在内存中运行，直到它达到 NULL。这**可能会**导致崩溃，但不是必须的。

这就是为什么最好：

```
memset(newStr, 0, 30); 
```

或者

```
// This works because string literals guarantee a '\0' is present
// but the strlen returns everything up until the '\0'
int l = strlen(str) + 1; 
```

这也有效，但我觉得它不像在 strlen 中添加一个那样清楚：

```
for(i =0 ; i<=l ; i ++ ) 
```

正如[strlen](http://www.elook.org/programming/c/strlen.html)的定义所暗示的那样，您需要这样做。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-17T16:17:45.340

碰巧的是，*大多数情况下*未初始化的字节`newStr`恰好`0`在您的特定情况下。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-17T16:19:05.780

您的程序具有未定义的行为，因为您承诺`printf`使用指向以*空字符结尾的*字符串的指针进行调用，但没有这样做。任何事情都可能发生，但是您的程序根本不正确。

具体来说，程序在逐个读取数组元素寻找空终止符的同时，最终会访问到一个未初始化的变量，即UB。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-17T16:21:21.493

The behaviour of reading bytes that have not been initialized as characters is *undefined* in most implementations of C. Sometimes printf may write garbage, sometimes the program may find a null byte \0 after the last character and terminate normally. In some rare cases it may cause a crash. This is why you are seeing variation in what happens when you run the program. It depends on the compiler you are using, and what was in the memory location following that which you are allocating for the array.

(That is, if your program would compile - you've left off a semicolon)

# plsql - 使用 sed 将 BEGIN EXCEPTION 行附加到 plsql 文件中

> ID：12463249
> 
> 赞同：0
> 
> 时间：2012-09-17T16:16:09.233
> 
> 标签：plsql, sed, oracle10g

我有一些包含数千条 INSERT 语句的 sql 文件。执行这些脚本时的问题是其中一些违反了唯一性约束。

我最初做了这样的事情：

```
BEGIN
    INSERT INTO .....;
    INSERT INTO .....;
    ...
EXCEPTION 
    WHEN DUP_VAL_ON_INDEX THEN
       null;
END;
/
EXIT; 
```

但是，似乎发生异常的第一个实例将导致整个块结束，因此其余语句不会执行。

由于我使用的 Oracle 版本不是 11，所以我不能使用 nice CONTINUE 命令。所以我正在考虑为**每个**INSERT INTO 语句做这样的事情：

```
BEGIN
    INSERT INTO ....;
EXCEPTION 
    WHEN DUP_VAL_ON_INDEX THEN
       null;
END;
/

... 
```

如何使用 sed 读取 sql 文件中的每一行，扫描“INSERT INTO”字样，如果存在，然后在 INSERT INTO 行之间附加 BEGIN 和 EXCEPTION 行？原因是，有时一行只是一个注释，我不想附加到它上面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T17:22:37.190

目前尚不清楚您是想在一行`BEGIN`块之前添加`INSERT INTO`，还是只是想在每行周围添加`BEGIN`/行。如果是后者：`EXCEPTION``INSERT INTO`

```
sed '/^ *INSERT INTO/{ i\
BEGIN
a\
EXCEPTION
}' input-file 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T20:52:07.690

您可以通过多种方式解决此问题。一种解决方案是在插入之前检测记录不重复。这可以像这样完成

```
select cout(*) INTO v_count

Fron table1 tb

where tb.column_name1 = val1;

IF v_count == 0 THEN
    insert into table1 values (val1, vale2....);
END IF; 
```

只有在没有重复时才插入。

另一种方法是创建一个过程并调用该过程而不是插入。这是伪代码

```
create procedure insert_row (val1 varchar2, val2 varchar2)
IS
BEGIN 

INSERT INTO ....; 

EXCEPTION  
    WHEN DUP_VAL_ON_INDEX THEN 
        null; 
END; 
```

由于调用过程中的重复记录，此过程将处理异常。

你也可以写一个循环。这取决于您的数据和程序的逻辑。Pdedo 代码是

```
Loop
    /* get the date from the cursor*/
    fetch cursor_c into record_r 

    EXIT WHEN  cursor%NOTFOUND;

    BEGIN 
        INSERT INTO .....; 
        EXCEPTION  
            WHEN DUP_VAL_ON_INDEX THEN 
                null; 
    END; 
END LOOP; 
```

要获取所有插入，请使用简单的 grep -i 语句。这将收集文件中的所有插入。您可以编写 PL/SQL 或 C/C++/Java 语言程序来生成新的 SQL 脚本。

# extbase - 复制 extbase 存储库对象

> ID：12463251
> 
> 赞同：5
> 
> 时间：2012-09-17T16:16:13.713
> 
> 标签：extbase

在我的 extbase/fluid 项目中，除了创建、删除、列表等标准操作之外，我还想创建存储在存储库中的模型类对象的副本。使用 findall()，所有对象都显示在列表中，并且相应的操作（例如删除、编辑）显示在每个对象旁边。为了复制一个对象，我在相应的控制器中创建了一个复制动作，代码如下：

```
public function dupcliateAction(Tx_CcCompanylogin_Domain_Model_MyObject $testObject)
{
 $this->myObjectRepository->add($testObject);
 $this->redirect('list');//Lists the objects again from the repository
} 
```

似乎足够严格，但没有新对象添加到存储库中，我没有收到错误。我检查了文档，没有可用于复制的明确方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T10:41:37.157

注意：当一个对象被克隆时，PHP 5 将对该对象的所有属性执行一个浅拷贝。任何引用其他变量的属性都将保持引用。

或者，您可以使用反射来创建对象的（深层）副本。

```
 $productClone = $this->objectManager->create('Tx_Theext_Domain_Model_Product');

// $product = source object
    $productProperties = Tx_Extbase_Reflection_ObjectAccess::getAccessibleProperties($product);
    foreach ($productProperties as $propertyName => $propertyValue) {
        Tx_Extbase_Reflection_ObjectAccess::setProperty($productClone, $propertyName, $propertyValue);
    }

// $productAdditions = ObjectStorage property
    $productAdditions = $product->getProductAddition();
    $newStorage = $this->objectManager->get('Tx_Extbase_Persistence_ObjectStorage');
    foreach ($productAdditions as $productAddition) {
        $productAdditionClone = $this->objectManager->create('Tx_Theext_Domain_Model_ProductAddition');
        $productAdditionProperties = Tx_Extbase_Reflection_ObjectAccess::getAccessibleProperties($productAddition);
        foreach ($productAdditionProperties as $propertyName => $propertyValue) {
            Tx_Extbase_Reflection_ObjectAccess::setProperty($productAdditionClone, $propertyName, $propertyValue);
        }
        $newStorage->attach($productAdditionClone);
    }
    $productClone->setProductAddition($newStorage);
// This have to be repeat for every ObjectStorage property, or write a service. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-12T14:45:14.520

对于那些可能担心的人：

此时您不需要调用反射 API。您只需要在您的模型中实现一个名为例如 resetUid() 的方法，如下所示：

```
public function resetUid() {
  $this->uid = NULL;
  $this->_setClone(FALSE);
} 
```

然后您可以使用魔术`clone`方法克隆控制器中的对象。之后，您必须调用新`resetUid()`方法，然后才能使用旧属性保留新对象。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-11-30T18:28:57.513

对我来说，解决方案“在 Modell 中克隆 $Object 和 resetUid()”不起作用.. 也许这个解决方案在较旧的 TYPO3 版本中有效，但在 7.6 中有效。LTS 它抛出异常

```
#1222871239: The uid "61" has been modified, that is simply too much. 
```

所以也许有人会发现我的解决方案很有帮助，因为它的代码比其他反射解决方案少得多：（而且您不必考虑设置所有单个属性..）

**给定**：一个名为 $registrant 的对象，其中包含所有数据。 **想要的结果**：该对象的副本具有相同的数据，但新的 Uid ..

```
/** @var \JVE\JvEvents\Domain\Model\Registrant $newregistrant */

$newregistrant = $this->objectManager->get( "JVE\\JvEvents\\Domain\\Model\\Registrant")  ;

$properties = $registrant->_getProperties() ;
unset($properties['uid']) ;

foreach ($properties as $key => $value ) {
    $newregistrant->_setProperty( $key , $value ) ;

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-22T09:30:23.370

我认为 add 命令会忽略已经存在的对象。

您可以尝试克隆对象，然后将克隆添加到存储库`$copy_of_object = clone $object;`。或者也许创建一个具有所有相同属性的新对象。

# mysql - 电话资费网站的 ERD - 这是最优的吗？

> ID：12463253
> 
> 赞同：0
> 
> 时间：2012-09-17T16:16:19.423
> 
> 标签：mysql, database, database-design, web-applications, relational-database

我设计了移动电话和关税的数据库表。

它应该支持多个移动网络、销售类型和相关联属网络。

积分（针对运营商）因所选电话、资费、网络和销售类型而异。

**示例价格计划：**

**T-Mobile**：*消费者升级*

*   三星Galaxy S3
*   关税：Super One（每月费用：12.00 美元）
*   此销售会员与“零售商一号”
*   总分：3.3

**T-Mobile** :*消费者新连接*

*   三星Galaxy S3
*   关税：Super One（每月费用：35.00 美元）
*   此销售附属于“零售商二”
*   总分：7.3

**AT&T**：“Sim Only Deal”（无电话）

*   关税：X-Deal 2（每月费用：18.00 美元）
*   此销售会员与“零售商一号”
*   总分：10.0

请参阅下面的表格设计，这是应该怎么做的？或者如何改进？

**数据库设计：**

```
CREATE TABLE IF NOT EXISTS `affiliate` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(50) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=3 ;

INSERT INTO `affiliate` (`id`, `name`) VALUES
(1, 'Retailer One'),
(2, 'Retailer Two');

CREATE TABLE IF NOT EXISTS `network` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(20) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=3 ;

INSERT INTO `network` (`id`, `name`) VALUES
(1, 'T-Mobile'),
(2, 'AT&T');

CREATE TABLE IF NOT EXISTS `network_saletype` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `network_id` int(11) NOT NULL,
  `saletype_id` int(11) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=3 ;

INSERT INTO `network_saletype` (`id`, `network_id`, `saletype_id`) VALUES
(1, 1, 1),
(2, 2, 3);

CREATE TABLE IF NOT EXISTS `phone` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(50) NOT NULL,
  `description` varchar(150) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=3 ;

INSERT INTO `phone` (`id`, `name`, `description`) VALUES
(1, 'Samsung Galaxy S3', ' Quad-core, NFC, AMOLED'),
(2, 'Apple iPhone 4S', 'A5 chip, 8MP camera, Siri voice');

CREATE TABLE IF NOT EXISTS `phone_points` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `phone_id` int(11) NOT NULL,
  `tarrif_id` int(11) NOT NULL,
  `affilicate_id` int(11) NOT NULL,
  `point` float NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=3 ;

INSERT INTO `phone_points` (`id`, `phone_id`, `tarrif_id`, `affilicate_id`, `point`) VALUES
(1, 1, 1, 1, 3.3),
(2, 1, 2, 2, 7.3);

CREATE TABLE IF NOT EXISTS `saletype` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(50) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=4 ;

INSERT INTO `saletype` (`id`, `name`) VALUES
(1, 'Consumer Upgrade'),
(2, 'Consumer New Connection'),
(3, 'Sim-Only Deal');

CREATE TABLE IF NOT EXISTS `tariff_point` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `tarrif_id` int(11) NOT NULL,
  `affilicate_id` int(11) NOT NULL,
  `point` float NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=4 ;

INSERT INTO `tariff_point` (`id`, `tarrif_id`, `affilicate_id`, `point`) VALUES
(3, 3, 1, 10);

CREATE TABLE IF NOT EXISTS `tarrif` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `network_saletype_id` int(11) NOT NULL,
  `name` varchar(50) NOT NULL,
  `tariff_duration` int(11) NOT NULL,
  `monthly_cost` decimal(6,2) NOT NULL,
  `description` varchar(150) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=4 ;

INSERT INTO `tarrif` (`id`, `network_saletype_id`, `name`, `tariff_duration`, `monthly_cost`, `description`) VALUES
(1, 1, 'Super One', 12, '12.00', '200 Mins, 400 Texts, 500MB Internet'),
(2, 1, 'Super One', 12, '35.00', '200 Mins, 400 Texts, 500MB Internet'),
(3, 2, 'X-Deal Two', 12, '18.00', ''); 
```

**结果**

```
mysql> select * from network;
+----+----------+
| id | name     |
+----+----------+
|  1 | T-Mobile |
|  2 | AT&T     |
+----+----------+

mysql> select * from affiliate;
+----+--------------+
| id | name         |
+----+--------------+
|  1 | Retailer One |
|  2 | Retailer Two |
+----+--------------+

mysql> select * from saletype;
+----+-------------------------+
| id | name                    |
+----+-------------------------+
|  1 | Consumer Upgrade        |
|  2 | Consumer New Connection |
|  3 | Sim-Only Deal           |
+----+-------------------------+

mysql> select * from network_saletype;
+----+------------+-------------+
| id | network_id | saletype_id |
+----+------------+-------------+
|  1 |          1 |           1 |
|  2 |          2 |           3 |
+----+------------+-------------+

  mysql> select * from tarrif;
+----+---------------------+------------+-----------------+--------------+-------------------------------------+
| id | network_saletype_id | name       | tariff_duration | monthly_cost | description                         |
+----+---------------------+------------+-----------------+--------------+-------------------------------------+
|  1 |                   1 | Super One  |              12 |        12.00 | 200 Mins, 400 Texts, 500MB Internet |
|  2 |                   1 | Super One  |              12 |        35.00 | 200 Mins, 400 Texts, 500MB Internet |
|  3 |                   2 | X-Deal Two |              12 |        18.00 |                                     |
+----+---------------------+------------+-----------------+--------------+-------------------------------------+

mysql> select * from  tariff_point;
+----+-----------+---------------+-------+
| id | tarrif_id | affilicate_id | point |
+----+-----------+---------------+-------+
|  3 |         3 |             1 |    10 |
+----+-----------+---------------+-------+

mysql> select * from  phone;
+----+-------------------+---------------------------------+
| id | name              | description                     |
+----+-------------------+---------------------------------+
|  1 | Samsung Galaxy S3 |  Quad-core, NFC, AMOLED         |
|  2 | Apple iPhone 4S   | A5 chip, 8MP camera, Siri voice |
+----+-------------------+---------------------------------+

mysql> select * from phone_points;
+----+----------+-----------+---------------+-------+
| id | phone_id | tarrif_id | affilicate_id | point |
+----+----------+-----------+---------------+-------+
|  1 |        1 |         1 |             1 |   3.3 |
|  2 |        1 |         2 |             2 |   7.3 |
+----+----------+-----------+---------------+-------+ 
```

**编辑**：我的问题是电话、收费、网络和销售类型之间的关系设计可以吗？基本上运营商可以选择一个零售商，然后选择移动网络..然后选择什么类型的销售（例如：消费者升级），然后选择具有相关关税的手机。根据他们选择的关税和/或电话 - 运营商获得积分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T18:42:41.223

此表暗示 2 个或 5 个或 1,847 个关联公司可以使用相同的名称。

```
CREATE TABLE IF NOT EXISTS `affiliate` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(50) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=3 ; 
```

这些插入将起作用。他们可能不应该。

```
INSERT INTO `affiliate` (`id`, `name`) VALUES
(1, 'Retailer One'),
(2, 'Retailer One'),
(3, 'Retailer One'),
(4, 'Retailer One'),
(5, 'Retailer One'); 
```

问题是，虽然您已经定义了一个无意义的（代理）整数作为主键，但您还没有定义那个东西*是*. 除了代理 ID 号之外，所有这些表都应该对*某些列组合具有唯一约束。*

您还根本没有定义外键。这几乎可以肯定是一个错误。

当像这样的插入语句成功时，你就有工作要做了。

```
insert into phone_points values (1078, 3000, 2743, 10234, -33344.03); 
```

# ruby-on-rails - 遍历 activerecord::relation 数组

> ID：12463254
> 
> 赞同：2
> 
> 时间：2012-09-17T16:16:19.537
> 
> 标签：ruby-on-rails, activerecord

如何遍历 Activerecord::Relation 对象数组？例如，假设我有一个`Comment`班级和一个`User`班级，我想从 3 个特定用户那里获取所有评论内容（假设评论属于用户，user_id 是外键）：

```
>> @males = Comment.where('user_id IN (?)', ["123","456","789"])
=> [...] #Array of comment Activerecord::Relation objects 
```

现在我想遍历`comments_from_males`并收集`content`数组中每个评论的所有属性内容。

为了澄清，以下工作但仅适用于第一个男性返回，但我需要所有男性的所有评论：

```
>> @males.first.comments.map(&:content)
=> ["first comment", "second comment"] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-17T16:22:20.043

```
comments = @males.map {|user| user.comments.map(&:content)}.flatten 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T16:21:53.253

You can use

```
comments_from_males = @males.collect{|e| e.content if e.gender == "male"}.flatten 
```

It will give you list of all comments from males. Check my db assumptions match.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T16:31:57.027

```
Comment.where('user_id IN (?)', ["123","456","789"]).pluck(:content) 
```

方法[采摘](http://apidock.com/rails/ActiveRecord/Calculations/pluck)

# dll - 无法使用 WiX 注册 DLL

> ID：12463256
> 
> 赞同：10
> 
> 时间：2012-09-17T16:16:28.547
> 
> 标签：dll, com, wix, wix3.5

我正在尝试使用 WiX 注册一个 DLL。现在我知道并理解我应该使用`heat`并获取它来为我提取注册表信息，但是 heat 似乎失败并显示以下错误消息：`heat.exe : warning HEAT5150 : Could not harvest data from a file that was expected to be a SelfReg DLL: C:\Users\seb\Desktop\Development\addin.dll. If this file does not support SelfReg you can ignore this warning. Otherwise, this error detail may be helpful to diagnose the failure: Unable to load file: C:\Users\seb\Desktop\Development\addin.dll, error: 193`

我环顾四周，发现这篇文章更详细地解释了有关[注册 DLL](https://stackoverflow.com/questions/364187/how-do-you-register-a-win32-com-dll-in-wix3/364544#364544)的信息，但如果可能的话，我想避免使用自我注册路线。我还看到在下面进一步提到手动注册 DLL，但我不太熟悉注册表或 COM 对象，我什至不知道我什至可以从哪里获得 CLSID、ProgId 以及已提到的任何其他信息。

如果有人能指出我正确的方向或向我解释我需要做什么来通过`heat`它运行 DLL，将不胜感激。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-12-18T19:34:18.970

我知道这很旧，但我想在这里添加一个答案 - 发生这种情况的原因是因为您尝试注册的 dll 是 64 位 dll - 而 Heat.exe 是 32 位，因此它无法在其地址空间中加载 dll。无论如何，只需指向 dll 的 32 位版本来创建 wxs 文件，您应该不会收到该错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T19:34:27.767

这是一个非托管/本机 DLL 吗？Dependency Walker 是否显示任何缺失的依赖项？通常这意味着 DllRegisterFunction 失败并且 Heat 无法提取任何数据。解决这个问题，您应该会获得良好的 XML 元数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T21:14:54.170

我在使用 Wix heat.exe 时遇到了同样的问题：警告 HEAT5150：无法从预期为 SelfReg DLL 的文件中收集数据。原因是 dll 无法找到要加载的依赖项。我想你一定有类似的问题。我运行 Process Monitor 工具并应用过滤器来捕获 heat.exe 事件。我能够找到问题的根本原因。基本上我必须将所有依赖 dll 放在我的主 dll 所在的同一位置。对于您的情况，addin.dll 需要指向您的依赖 dll 所在的相同位置。

以下关于此警告的博客帮助我找出了根本原因。

[http://marc.durdin.net/2009/12/case-of-hidden-exception.html](http://marc.durdin.net/2009/12/case-of-hidden-exception.html)？

# eclipse - Eclipse RCP App：添加向导页面（单页）

> ID：12463258
> 
> 赞同：0
> 
> 时间：2012-09-17T16:16:44.113
> 
> 标签：eclipse, rcp

我是 Eclipse RCP 开发的新手，有一个问题：

我编写了一个带有视图的简单 RCP 应用程序。但我希望在这个独立的 Eclipse RCP 应用程序启动时查看 WizardPage。（带有确定、取消和一些标签+文本的页面）

任何指针？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T19:01:47.010

只是谷歌的*“Eclipse 向导”*表达。这是一个[相当广泛的教程，但在官方在线](http://www.ibm.com/developerworks/opensource/library/os-eclipse-custwiz/)[Eclipse 帮助](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.platform.doc.isv/guide/dialogs.htm&cp=2_0_5)文档中有相当多的重要细节。

# design-patterns - 有没有好的设计模式食谱/食谱资源？

> ID：12463260
> 
> 赞同：2
> 
> 时间：2012-09-17T16:16:53.547
> 
> 标签：design-patterns, resources, cookbook

我知道有很多关于几乎所有编程语言的设计模式的书籍。

他们中的大多数将通过一些示例向您展示可以做什么。

但我在考虑食谱/食谱类型，有什么好的资源可以通过这种方式学习吗？

即类似问题 - 解决方案的方法。

它可以是一本书、源代码、网站或任何东西。

有吗？

[例如这样的事情。](http://patterncookbook.blogspot.sg/)

如果它在 C# 中会更甜:)

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-20T09:34:44.847

我利用这两个网站：

[工厂](http://www.dofactory.com/Patterns/Patterns.aspx)和 [源头制作](http://sourcemaking.com/design_patterns)

希望这可以帮助！

# c - 为什么 sqlite 告诉我“内存不足”？

> ID：12463262
> 
> 赞同：0
> 
> 时间：2012-09-17T16:17:02.020
> 
> 标签：c, multithreading, sqlite

我正在尝试使用 sqlite3。我打算在多线程应用程序中使用它来解决线程之间共享数据的所有锁定和原子性。为了保持速度并且因为我不需要在程序运行之间保存的数据，我正在尝试使用一个内存数据库，该数据库大部分时间包含 < 100 行，最坏的情况是 < 500 行。

我在带有 libsqlite3 版本 3.7.9-2ubuntu1.1 的 Ubuntu 12.04 x64 上运行。

这是我的代码：

```
#include <stdio.h>
#include <sqlite3.h>

int main(int argc, char *argv[]) {
    sqlite3 *db;
    char *zErrMsg = 0;
    int rc;

    rc = sqlite3_open_v2("file::memory:?cache=shared", &db, SQLITE_OPEN_FULLMUTEX, NULL);

    /* This should never ever happen! */
    if (rc != SQLITE_OK) {
        fprintf(stderr, "Can't open database: %s\n", sqlite3_errmsg(db));
        sqlite3_close(db);
        return(1);
    }

    rc = sqlite3_exec(db, "CREATE TABLE Players (id int, ip varchar(15), x int, y int);", NULL, NULL, &zErrMsg);
    if (rc != SQLITE_OK) {
        fprintf(stderr, "SQL error: %s\n", zErrMsg);
        sqlite3_free(zErrMsg);
    }

    sqlite3_close(db);
    return 0;
} 
```

对于 sqlite3_open 行，我尝试了很多变化，但有两个问题。当我尝试这些变体时，在我讽刺地评论为“不应该发生”的部分中出现“内存不足”错误：

```
rc = sqlite3_open_v2("file::memory:?cache=shared", &db, SQLITE_OPEN_FULLMUTEX, NULL);
rc = sqlite3_open_v2(":memory:", &db, SQLITE_OPEN_FULLMUTEX, NULL); 
```

当我尝试这个更简单的行时，它通过在磁盘上创建一个名为“file::memory:?cache=shared”的文件来违反文档：

```
rc = sqlite3_open("file::memory:?cache=shared", &db); 
```

我到底在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T17:56:50.263

您可能需要`SQLITE_OPEN_READWRITE`and`SQLITE_OPEN_CREATE`标志。

您需要该`SQLITE_OPEN_URI`标志来启用 URI 文件名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T16:32:04.277

使用 SQLite3 作为 IPC 机制听起来不切实际。创建一个套接字并使用您的环回接口在线程之间进行通信似乎更实用。此外，如果您不需要在 Windows 平台上分发，请查看 D-bus。

我也不会使用数据库在线程之间共享信息。数据库用于存储大量数据，也许您应该考虑序列化。

[protobuf](http://code.google.com/p/protobuf/)是一个很好的 C 或 C++ 序列化库。

# sql - 选择各种表中的记录数

> ID：12463263
> 
> 赞同：0
> 
> 时间：2012-09-17T16:17:04.707
> 
> 标签：sql, tsql, stored-procedures

我想在一个存储过程中得到这个查询的结果。使用此查询，我想将行数返回`table1`到`table4`

```
select count(*) from table1
select count(*) from table2
select count(*) from table3
select count(*) from table4 
```

我想在临时表中得到这个结果并选择临时表的所有列。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T16:19:58.670

这是一个不太优雅的解决方案：

```
SELECT  'table1' as table_name, COUNT(*) as record_count from table1
UNION ALL 
SELECT  'table2' as table_name, COUNT(*) as record_count from table2
UNION ALL 
SELECT  'table3' as table_name, COUNT(*) as record_count from table3
UNION ALL 
SELECT  'table4' as table_name, COUNT(*) as record_count from table4 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T13:48:47.667

要在单个记录中执行此操作，您可以执行以下操作：

```
SELECT  (SELECT COUNT(*) from table1) table1_rec_count,
        (SELECT COUNT(*) from table2) table2_rec_count,
        (SELECT COUNT(*) from table3) table3_rec_count,
        (SELECT COUNT(*) from table4) table4_rec_count 
```

同样，这不是一个优雅的解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T03:41:00.677

```
INSERT INTO #temp
SELECT * FROM 
(

    select Cnt = count(*) from table1 Union All
    select count(*) from table2 Union All
    select count(*) from table3 Union All
    select count(*) from table4
)X

DROP TABLE #temp 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T16:21:38.727

```
 myCommand.CommandType = CommandType.StoredProcedure;
    myCommand.Connection = myConnection;
    myCommand.CommandText = "MyProc";

    try
    {
        myConnection.Open();

        myReader = myCommand.ExecuteReader();    
        while (myReader.Read())
        {
                //Write logic to process data for the first result.
        }

        myReader.NextResult();
        while (myReader.Read())
        {
                //Write logic to process data for the second result.
        }
    }
    catch(Exception ex) 
    {
        // catch exceptions
    }
    finally
    {
        myConnection.Close();
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-17T17:27:31.837

假设使用 SQL Server，我发现`dm_db_partition_stats`这是一种快速获取行数的可靠方法：

```
SELECT [TableName] = '[' + s.name +'].[' + t.name + ']'
, [RowCount] = SUM(p.row_count)OVER(PARTITION BY t.object_id)
FROM sys.tables t
JOIN sys.schemas s ON s.schema_id = t.schema_id
JOIN sys.dm_db_partition_stats p ON p.object_id = t.object_id
WHERE t.[type] = 'U'
AND p.index_id IN (0,1)
AND t.name IN ('table1','table2','table3','table4') --Just table names here, but it's best practice to also include schemas
ORDER BY s.name, t.name 
```

# php - 签署文件上传的 API 请求？

> ID：12463264
> 
> 赞同：0
> 
> 时间：2012-09-17T16:17:05.653
> 
> 标签：php, security, api, file-upload, signature

在开发[Wave Framework](http://www.waveframework.com)时，我非常关注 API 请求的安全模型。我必须确保 API 请求可以在任何可能的地方通过 HTTP 发出，同时防止潜在的中间人攻击、数据篡改等。

我最终从输入数据中构建了一个 GET 字符串，并从中生成 SHA-1 哈希，同时使用 API 配置文件密钥对其进行加盐处理。这非常有效，并尽可能多地保护 API。

但我的 API 也允许通过 HTTP 上传文件等。目前我完全忽略了文件上传相关的数据（我将它用于缓存签名，但不用于数据验证）。这意味着恶意中间人可以在传输文件时从技术上更改文件内容。

有没有其他选择？当然我可以在文件发送到服务器端时实现这一点（例如计算文件内容作为验证哈希的一部分），但如果上传是通过 Web 浏览器并通过 JavaScript 启动的，那不是一个选项？

其他框架是如何处理这个问题的？我试图搜索但找不到足够的信息。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T20:50:45.463

如果我理解正确，您的框架会创建一个网页，用户可以在其中上传文件。在这种情况下，防止中间人的唯一方法是使用 ssl。

请记住，在这种情况下，中间人也能够更改用户在上传数据时与之交互的网页。假设您创建了一个 javascript，它以某种方式使用用户输入的密码加密了文档。中间人可以轻松更改 javascript 以加密他的假文档并丢弃真实文档。

如果安全是 Web 上的一个问题，并且您需要防止中间人，那么 SSL 是必需的。没有其他办法了。

# c++ - C ++ 11 Lambda闭包涉及通过引用离开范围的堆栈变量，但获得未定义的行为？

> ID：12463269
> 
> 赞同：5
> 
> 时间：2012-09-17T16:17:39.000
> 
> 标签：c++, lambda, c++11

我对 C++ 相当了解。我在其他语言中使用过 lambda 和闭包。为了我的学习，我想看看在 C++ 中我能用这些做什么。

完全了解“危险”并期望编译器拒绝这一点，我通过引用使用函数堆栈变量在函数中创建了一个 lambda 并返回了 lambda。编译器允许它并且发生了奇怪的事情。

为什么编译器允许这样做？这只是编译器无法检测到我做了非常非常糟糕的事情并且结果只是“未定义的行为”的问题吗？这是编译器问题吗？规范对此有什么要说的吗？

在最近的 mac 上测试，安装了 MacPorts 的 gcc 4.7.1 和 -std=c++11 编译选项。

使用的代码：

```
#include <functional>
#include <iostream>
using namespace std;

// This is the same as actsWicked() except for the commented out line
function<int (int)> actsStatic() {
  int y = 0;
  // cout << "y = " << y << " at creation" << endl;

  auto f = [&y](int toAdd) {
    y += toAdd;
    return y;
   };
  return f;
}

function<int (int)> actsWicked() {
  int y = 0;
  cout << "actsWicked: y = " << y << " at creation" << endl;

  auto f = [&y](int toAdd) {
    y += toAdd;
    return y;
   };
  return f;
}

void test(const function<int (int)>& f, const int arg, const int expected) {
  const int result = f(arg);
  cout << "arg: " << arg
       << " expected: " << expected << " "
       << (expected == result ? "=" : "!") << "= "
       << "result: " << result << endl;
}

int main(int argc, char **argv) {

  auto s = actsStatic();
  test(s, 1, 1);
  test(s, 1, 2);
  test(actsStatic(), 1, 1);
  test(s, 1, 3);

  auto w = actsWicked();
  test(w, 1, 1);
  test(w, 1, 2);
  test(actsWicked(), 1, 1);
  test(w, 1, 3);

  return 0;
} 
```

结果：

```
arg: 1 expected: 1 == result: 1
arg: 1 expected: 2 == result: 2
arg: 1 expected: 1 != result: 3
arg: 1 expected: 3 != result: 4
actsWicked: y = 0 at creation
arg: 1 expected: 1 == result: 1
arg: 1 expected: 2 == result: 2
actsWicked: y = 0 at creation
arg: 1 expected: 1 == result: 1
arg: 1 expected: 3 != result: 153207395 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-17T16:21:33.563

Returning a lambda that captures a local variable by reference is the same as returning a reference to a local variable directly; it results in undefined behaviour:

> ### 5.1.2 Lambda expressions [expr.prim.lambda]
> 
> 22 - [ Note: If an entity is implicitly or explicitly captured by reference, invoking the function call operator of the corresponding lambda-expression after the lifetime of the entity has ended is likely to result in undefined behavior. —end note ]

Specifically, the undefined behaviour in this case is in lvalue-to-rvalue conversion:

> ### 4.1 Lvalue-to-rvalue conversion [conv.lval]
> 
> 1 - A glvalue (3.10) of a non-function, non-array type T can be converted to a prvalue. If T is an incomplete type, a program that necessitates this conversion is ill-formed. If the object to which the glvalue refers is not an object of type T and is not an object of a type derived from T, or if the object is uninitialized, a program that necessitates this conversion has undefined behavior.

The compiler is not required to diagnose this form of undefined behaviour, although as compiler support for lambdas improves it is likely that compilers will be able to diagnose this case and offer an appropriate warning.

Since lambda closure types are well defined, just opaque, your example is equivalent to:

```
struct lambda {
    int &y;
    lambda(int &y): y(y) {};
    int operator()(int toAdd) {
        y += toAdd;
        return y;
    };
} f{y};
return f; 
```

In general terms, C++ solves the [funarg problem](http://en.wikipedia.org/wiki/Funarg_problem) by making it the responsibility of the programmer and providing facilities (mutable lambda capture, move semantics, `unique_ptr` etc.) to allow the programmer to solve it efficiently.

# sql - 从两个表中选择sql

> ID：12463271
> 
> 赞同：2
> 
> 时间：2012-09-17T16:17:42.400
> 
> 标签：sql, select

我有两张表 DETAILS 和 BANLIST。我搜索 DETAILS 表以获取 IP 列表：

```
select ip, time, othecol from details WHERE somefield=X 
```

结果我得到零或N条记录。同时我需要知道返回的IP是否被禁止。我可以这样检查：

```
select isbanned from banlist WHERE ip=someIP 
```

是否可以将两个语句合并为一个？

获取格式列表：| ip, time, othercol, isbanned |

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T16:20:41.640

您可以使用[JOIN](http://en.wikipedia.org/wiki/Sql_join)：

```
SELECT d.ip, d.time, d.othercol, b.isbanned FROM details d
LEFT JOIN banlist b on b.ip = d.ip
WHERE d.somefield=X 
```

请注意，`b.isbanned`将`null`用于在`details`中没有匹配 IP 的行`banlist`。您可以将该值[合并](http://en.wikipedia.org/wiki/Null_%28SQL%29#COALESCE)为 false（此语法因您使用的 RDMS 而异。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T16:22:26.687

I think you're trying to do a simple join

```
SELECT d.ip, b.isbanned
FROM details d
LEFT JOIN banlist b  ON d.ip = b.ip
WHERE foo=bar 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T16:18:26.317

查看 SQL 的[INNER JOIN 关键字](http://www.w3schools.com/sql/sql_join_inner.asp)。

```
SELECT column_name(s)
FROM table_name1
INNER JOIN table_name2
ON table_name1.column_name=table_name2.column_name 
```

# javascript - 将多个 jQuery 元素选择器传递给一个函数

> ID：12463282
> 
> 赞同：1
> 
> 时间：2012-09-17T16:18:29.483
> 
> 标签：javascript, jquery, function, jquery-selectors

myFunc() 绑定到文档滚动，因此会被大量调用。我想将 HTML 选择存储在 var 中并将它们传递给函数。当我在下面运行我的示例时，我得到了控制台错误`Unable to get value of the property 'css': object is null or undefined`。

```
var a1 = $('#a1');
var a2 = $('#a2');

$(document).bind("scroll", function() {
  setTimeout(myFunc, 1000, a1, a2);
}

function myFunc(a1, a2) {
  a1.css('color', 'blue');
  a2.css('font-weight', 'bold');
} 
```

如何将存储在变量中的多个 jQuery 选择器传递给函数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T16:19:23.850

```
$(document).bind("scroll", function() {
  setTimeout(function() {
      myFunc(a1, a2);
    },1000);
}); // close );

function myFunc(a1, a2) {
  a1.css('color', 'blue');
  a2.css('font-weight', 'bold');
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T16:19:29.973

尝试以下操作：

```
$(document).bind("scroll", function() {
    setTimeout(function() {
        myFunc(a1, a2);
    }, 1000);
}); // and close properly your function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T16:24:21.907

您的`a1`和`a2`变量可以设置在页面上存在`#a1`和`#a2`存在的元素之前（特别是如果它没有包含在 onload/ready 处理程序中并且脚本位于标题中）。我会像这样设置它，以确保它在滚动事件发生`#a1`时`#a2`存在。

```
var a1 = undefined;
var a2 = undefined;

$(document).bind("scroll", function() {
  if(typeof(a1) === "undefined") { a1 = $("#a1");} //will only reset a1 if undefined
  if(typeof(a2) === "undefined") {a2 = $("#a2");}

  setTimeout(function(){myFunc(a1,a2)}, 1000);
}); //don't forget your ')'

function myFunc(a1, a2) { 
  a1.css('color', 'blue');
  a2.css('font-weight', 'bold');
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T16:35:52.003

您还可以将元素存储在数组中：

**[jsBin 演示](http://jsbin.com/ititud/1/edit)**

```
var a1 = ['#a1','#a2'];

$(document).bind("scroll", function() {
    setTimeout(function() {
        myFunc(a1);
    }, 1000);
});

function myFunc(el) {
  $(el[0]).css('color', 'blue');
  $(el[1]).css('font-weight', 'bold');
} 
```

# android - 即使在屏幕外，动画视图上的按钮也会响应点击？

> ID：12463283
> 
> 赞同：0
> 
> 时间：2012-09-17T16:18:34.523
> 
> 标签：android

我有一个 LinearLayout，我正在对其应用翻译动画。我在之前和之后填充动画。视觉上它工作正常。动画通过将视图平移到屏幕外而结束。但是，如果我在屏幕上单击一个 x,y 坐标，而该坐标恰好是视图在其动画期间的某个位置，则视图上的一个按钮会触发其单击侦听器。

我找到的唯一解决方案是添加一个动画侦听器，当动画结束时，将（现在不在视图中）布局上的按钮标记为可见性 = 消失，启用 = 假。这看起来很奇怪——视图不再出现在屏幕上，但它仍在响应点击事件。这是一个已知的事情，我可能没有正确设置动画？

谢谢

- - - 更新 - - - -

我稍微重构了我的动画。我没有使用 animation.setFillAfter(true)，而是在动画完成时将布局的可见性设置为 GONE。现在它在屏幕外时不会注册点击。仍然有兴趣知道这是否是已知的事情，因为不必添加动画侦听器等会更容易。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T05:55:26.123

Translate Animations on lower level API（蜜梳下面）改变了按钮的绘制位置，而不是按钮物理存在于容器中的位置。所以，你自己来处理这种情况。有关这方面的更多信息，您可以参考此[链接](http://android-developers.blogspot.in/2011/02/animation-in-honeycomb.html)。一种方法是实际更改布局中按钮的位置（而不是通过动画）。以下是如何实现这一目标：

```
 params = (LayoutParams) mBtn.getLayoutParams();

    TranslateAnimation animation = new TranslateAnimation(0, 0, 0, 400);
    animation.setDuration(2000);
    animation.setAnimationListener(mAnimationListener);
    mBtn.startAnimation(animation);

   ....
   ....

   private AnimationListener mAnimationListener = new AnimationListener() {

    @Override
    public void onAnimationStart(Animation animation) {

    }

    @Override
    public void onAnimationRepeat(Animation animation) {
    }

    @Override
    public void onAnimationEnd(Animation animation) {
        params.topMargin = params.topMargin + 400;
        mButton.setLayoutParams(params);
    }
}; 
```

在这里，通过更改布局参数，我们正在更改按钮的物理位置。

在您的情况下，视图正在离开屏幕，因此您只需要在动画结束时更改按钮（View.GONE）的可见性。

# google-app-engine - Google App Engine：下 载源：无法找到或加载主类 com.google.appengine.tools.admin.AppCfg

> ID：12463284
> 
> 赞同：2
> 
> 时间：2012-09-17T16:18:43.977
> 
> 标签：google-app-engine, proxy, download, war

我是一个项目的所有者，我想取消对 GAE 的战争。通过 Cygwin，当我尝试这样做时：

./appengine-java-sdk/bin/appcfg.sh download_app -A sampleapp -V

我收到以下错误：错误：无法找到或加载主类 com.google.appengine.tools.admin.AppCfg

我怀疑这可能是因为我在公司防火墙后面，但我已经将我的 cygwin 配置为通过代理重新路由。

有没有人对可能的原因有其他建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-16T12:40:24.540

这对我有用。

```
sh appcfg.sh vacuum_indexes /ProjectPath/war 
```

我可以在很多文档中看到应该使用 appcfg.cmd 但这不起作用，但上面的看起来不错。

# regex - 如何使用 mod_rewrite 将文件夹中的所有文件重定向到另一个目录，但少数文件除外？

> ID：12463285
> 
> 赞同：2
> 
> 时间：2012-09-17T16:18:47.283
> 
> 标签：regex, .htaccess, mod-rewrite

我有一种情况，整个文件夹的内容不再需要，并将被重定向到主页，**除了 6 个左右的文件**。该文件夹包含 300 多个文件，因此单独重定向：

```
redirect 301 /folder/file.html http://www.domain.tld/
redirect 301 /folder/file2.html http://www.domain.tld/
redirect 301 /folder/file3.html http://www.domain.tld/ 
```

这需要相当长的时间。在需要完成此操作之前我有一些时间，并且想知道是否有人知道通过使用带有 mod_rewrite 的小正则表达式来实现此目的的好方法。

为了让所有可能使用潜在正确答案的人获得最佳理解，假设我们不想重定向的文件是：

```
/folder/stay1.html
/folder/stay2.html
/folder/stay3.html 
```

提前感谢这个由知识渊博的人组成的精彩社区，帮助我们这些仍有一些东西要学习的人！

*编辑*

是否有可能实现这一目标并保留文件夹的基本 url？

```
/folder/
/folder/index.html 
```

我尝试了以下但没有成功：

```
RewriteEngine On
RewriteCond %{REQUEST_URI} !^/folder(/|/index.html|/stay1.html|/stay2.html|/stay3.html|/etc.html)
RewriteRule ^/?folder/ http://www.domain.tld/ [L,R=301] 
```

*编辑*正确答案

非常感谢[Jon Lin](https://stackoverflow.com/users/851273/jon-lin)的回答。

`/folder/`重定向除少数文件外的所有文件的正确方法`/folder/`是：

```
RewriteEngine On

# Allow /folder/ to remain accessible
RewriteCond %{REQUEST_URI} !^/folder/$

# Allow specified files to remain accessible
RewriteCond %{REQUEST_URI} !^/folder/(index.html|stay1.html|stay2.html|stay3.html|etc.html)

# Redirect all non-specified files to home page
RewriteRule ^/?folder/(.+)$ http://www.domain.tld/ [L,R=301] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T17:21:06.623

使用 mod_rewrite，您可以为重定向创建异常条件，尝试将这些规则放在文档根目录的 htaccess 文件中：

```
RewriteEngine On
RewriteCond %{REQUEST_URI} !^/folder/$
RewriteCond %{REQUEST_URI} !^/folder/(index.html|stay1.html|stay2.html|stay3.html|etc.html)
RewriteRule ^/?folder/(.+)$ http://www.domain.tld/ [L,R=301] 
```

因此，列表中的任何内容：`(stay1.html|stay2.html|stay3.html|etc.html)`都会使条件失败，并且不会发生重定向。否则，任何以 开头的东西`/folder/`都会被重定向到`http://www.domain.tld/`.

请注意，如果您混合了 mod_alias 重定向，它们可能会相互干扰。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T17:24:42.023

您可以将[RedirectMatch](http://httpd.apache.org/docs/2.2/mod/mod_alias.html#redirectmatch)与[负前瞻](http://www.regular-expressions.info/lookaround.html)一起使用，例如：

```
RedirectMatch permanent ^/?folder/(?!(stay1\.html|stay2\.html|stay3\.html)) http://domain.tld 
```

另一种 mod-rewrite 解决方案是这样的：

```
RewriteRule ^/?folder/(stay1\.html|stay2\.html|stay3\.html)$ - [L]
RewriteRule ^/?folder/.* http://domain.tld 
```

第一条规则捕获所有异常，L 标志确保在此传递中不进行进一步处理，并`-`指示引擎不要重写，确保不再进行传递。任何没有被第一条规则捕获的东西都会被第二条规则重定向。

# html - Firefox 显示列表错误

> ID：12463287
> 
> 赞同：0
> 
> 时间：2012-09-17T16:18:50.113
> 
> 标签：html, css, list, html-lists

FireFox 似乎将任何单词放在列表项中，在单独的行中包含多个单词，如下所示： [http](http://a.flatsi.es/projects/7temwk/images/j7tjrt)
://a.flatsi.es/projects/7temwk/images/j7tjrt 但在其他所有内容中，它都是我想要的，比如这个。
[http://a.flatsi.es/projects/7temwk/images/9766kh](http://a.flatsi.es/projects/7temwk/images/9766kh)

一个正确方向的点将是超级的。

HTML

```
<div class="singlenav">
<ul>
<li><a href="/v2">Home</a></li>
<li><a href="/v2/?p=17">About</a></li>
<li><a href="/v2/?p=14">Information</a></li>
<li><a href="/v2/?p=11">Study Skills</a></li>
<li><a href="/v2/?p=8">Discuss</a></li>
<li><a href="/v2/?p=5">Contact</a></li>
</ul>
</div> 
```

CSS

```
.quicklinks{
width: 100%;
font: bold 20px 'Helvetica',sans-serif;
color: #333;
text-align: left;
margin: 70px 0 0 0;
display:inline-block;
}

.quicklinks li{
white-space: nowrap; 
}

.quicklinks li a{
color: #333;
text-decoration: none;
padding: 10px;
margin: -10px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T16:22:54.327

Since we don't have a HTML test to go off I'm going to try drawing upon 'psychic powers'. Try this:

```
li { white-space: nowrap; } 
```

**Edit**: Works against test case on Fx 15

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T16:23:55.393

也许您可以尝试添加一个高度设置，手动强制它不超过某个高度。

例如：

高度：100px；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T16:32:05.783

我认为负边距`li a`意味着 inside of`a`想要大于它的盒子，因此如果可以包装的话就包装这个词。我从未见过平行边上的负边距相等，但如果这实际上缩小了一个元素，我可能是错的。

# authentication - 通过 Web Handler 访问 XML 会导致 302 重定向

> ID：12463296
> 
> 赞同：0
> 
> 时间：2012-09-17T16:19:16.393
> 
> 标签：authentication, redirect, ashx

我正在尝试通过 Web 处理程序访问 XML 文件。我遇到了无限重定向（302）问题。这是因为 cookie 未启用。我不完全确定是什么原因造成的，但需要一些帮助来弄清楚该怎么做。

```
var url = context.Request.QueryString["xmlurl"];
HttpWebRequest hwr = (HttpWebRequest)WebRequest.Create(url);
hwr.Method = "GET";
hwr.MaximumAutomaticRedirections = 5;

//infinite redirect happens here
HttpWebResponse response = (HttpWebResponse)hwr.GetResponse(); 
```

我怀疑需要以下 cookie（通过 Fiddler 找到）：

```
ASP.NET_SessionId= ...
.ASPXAUTH= ... 
```

这些是在通过浏览器访问页面时创建的，但不是通过我的 Web 处理程序创建的。有谁知道我该如何解决这个问题？

我通过网络处理程序得到的确切响应是：

```
<html>
<head>
   <title>Object moved</title>
</head>
<body>
   <h2>Object moved to <a href="removedForSO">here</a>.</h2>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T16:22:32.900

答案最终变得相对简单。通过增加

```
hwr.CookieContainer = new CookieContainer(); 
```

它允许服务器将 cookie 附加到响应中，然后允许重定向并传递最终的 xml 文档。

# powershell - 使用 PowerShell 创建自签名证书

> ID：12463297
> 
> 赞同：6
> 
> 时间：2012-09-17T16:19:20.763
> 
> 标签：powershell, ssl-certificate

我正在使用类似于此处找到的代码来创建用于 IIS 的自签名证书：http: [//blogs.technet.com/b/vishalagarwal/archive/2009/08/22/generating-a-certificate-自签名使用 powershell 和 certenroll-interfaces.aspx](http://blogs.technet.com/b/vishalagarwal/archive/2009/08/22/generating-a-certificate-self-signed-using-powershell-and-certenroll-interfaces.aspx)

工作正常，除了我想给它一个友好的名称以便在我想将证书分配给动态创建的站点时更容易找到它。

任何人都知道如何更改上述内容以设置友好名称（我已经尝试过似乎明显无济于事的方法）。

是否有更好的方法通过 PowerShell 创建不提示用户输入信息的证书？

跟进我正在使用的脚本 - 基于上面的 url，但变成了一个 cmdlet：

```
function Add-SelfSignedCertificate
{
    [CmdletBinding()]
    param
    (
            [Parameter(Mandatory=$True, ValueFromPipelineByPropertyName=$True)]
            [Alias('cn')]
            [string]$CommonName
    )

    $name = new-object -com "X509Enrollment.CX500DistinguishedName.1"
    $name.Encode("CN=$CommonName", 0)

    $key = new-object -com "X509Enrollment.CX509PrivateKey.1"
    $key.ProviderName = "Microsoft RSA SChannel Cryptographic Provider"
    $key.KeySpec = 1
    $key.Length = 1024
    $key.SecurityDescriptor = "D:PAI(A;;0xd01f01ff;;;SY)(A;;0xd01f01ff;;;BA)(A;;0x80120089;;;NS)"
    $key.MachineContext = 1
    $key.Create()

    $serverauthoid = new-object -com "X509Enrollment.CObjectId.1"
    $serverauthoid.InitializeFromValue("1.3.6.1.5.5.7.3.1")
    $ekuoids = new-object -com "X509Enrollment.CObjectIds.1"
    $ekuoids.add($serverauthoid)
    $ekuext = new-object -com "X509Enrollment.CX509ExtensionEnhancedKeyUsage.1"
    $ekuext.InitializeEncode($ekuoids)

    $cert = new-object -com "X509Enrollment.CX509CertificateRequestCertificate.1"
    $cert.InitializeFromPrivateKey(2, $key, "")
    $cert.Subject = $name
    $cert.Issuer = $cert.Subject
    $cert.NotBefore = get-date
    $cert.NotAfter = $cert.NotBefore.AddDays(90)
    $cert.X509Extensions.Add($ekuext)
    $cert.Encode()

    $enrollment = new-object -com "X509Enrollment.CX509Enrollment.1"
    $enrollment.InitializeFromRequest($cert)
    $certdata = $enrollment.CreateRequest(0)
    $enrollment.InstallResponse(2, $certdata, 0, "")
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-05-30T21:40:43.480

它可能对您的特定用途没有帮助，但在 Windows 8.1 和 Server 2012 中安装了一个新的 Powershell CmdLet，它非常快速且易于使用：

```
New-SelfSignedCertificate [-CertStoreLocation <String> ] [-CloneCert <Certificate> ] [-DnsName <String> ] [-Confirm] [-WhatIf] [ <CommonParameters>] 
```

更多细节可以在这里找到：[https ://docs.microsoft.com/en-us/powershell/module/pkiclient/new-selfsignedcertificate?view=win10-ps](https://docs.microsoft.com/en-us/powershell/module/pkiclient/new-selfsignedcertificate?view=win10-ps)

在我的使用中，证书的友好名称一直设置为 CmdLet 中指定的第一个 DnsName。

将证书放置在本地计算机的个人存储中的示例：

```
New-SelfSignedCertificate -CertStoreLocation cert:\LocalMachine\My -DnsName www.example.com 
```

**注意：Powershell 必须以管理员权限启动才能正常工作。**

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T20:42:52.597

你可以`CertificateFriendlyName`直接在你的代码中设置，你只需要知道在哪里做：

```
$enrollment.InitializeFromRequest($cert)
$enrollment.CertificateFriendlyName = 'whatever'
$certdata = $enrollment.CreateRequest(0) 
```

`$key`有一个 FriendlyName，但我没有看到它出现在任何地方，所以我认为它对你没有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T16:57:40.540

Scott Hanselman 写了[一篇关于如何](http://www.hanselman.com/blog/SigningPowerShellScripts.aspx)使用 SDK 工具 makecert.exe 创建自签名证书的精彩博客文章。该工具看起来比您引用的帖子中的代码更容易使用。使用 makecert.exe，您可以使用 -n 选项指定主题名称。我已使用该主题名称来引用其他工具（如 signtool.exe）中的证书。虽然，我发现主题名称不必是唯一的，所以我倾向于使用看起来是唯一的指纹值。Signtool 还将接受指纹（通过 /sha1 参数）来识别证书。

# objective-c - 从代码更改 LHSprite 位置 (levelhelper-XCODE)

> ID：12463300
> 
> 赞同：2
> 
> 时间：2012-09-17T16:19:27.960
> 
> 标签：objective-c, xcode, position

我正在尝试将具有相同标签的所有精灵向右移动几英寸。为此，我尝试了 4 种不同类型的表达式，但没有任何效果。这是我到目前为止所做的......

```
-(void) moveSprites {

NSArray* spritesWithTag = [lh spritesWithTag: BOXES1]
for (LHSprite* spr in spritesWithTag)
(NSLog (@"name is %@", [spr uniqueName]);

CGPoint newposition = ccpSub (ccp(-50,0), [spr position]);
     //generating the new position for the elements

[spr transformPosition: newposition];
//first attemp, should work but for some reason it doesn't work

spr.position = newposition;
//2nd attemp
b2Vec2 newpositionVector (newposition.x, newposition.y);
[spr body]->SetTransform(newpositionVector, 0);
//third try
[spr setPosition:newposition];
//last form
} 
```

当我运行应用程序时，方法调用工作正常，所有带有标签 BOXES1 的精灵都出现在输出选项卡中，但它的位置根本没有改变。关于为什么会发生的任何想法。我做错了什么？有没有其他方法可以移动精灵，或者它们是否无法以我不知道的其他形式移动？这些是静态精灵，不知道这是否会影响...谢谢！

# css - 需要帮助垂直拉伸背景图像

> ID：12463301
> 
> 赞同：0
> 
> 时间：2012-09-17T16:19:28.540
> 
> 标签：css

我有一个看起来像这样的背景：

![在此处输入图像描述](../Images/3fbc0c7cb48a382447429c684a8466b5.png)

如您所见，它没有完全拉伸。所以我希望它涵盖所有内容。

```
body {
    background-image: url("/site_media/resume/images/bg_main.jpg");
    background-color: #c7c7c7;
    background-repeat: repeat-x;
    font: 12px/20px;
    font-family: "lucida Sans Unicode" "Lucida Grande" sans-serif;
} 
```

如果我做

```
background-size: 100%; 
```

我到处都是深绿色。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T16:22:54.397

try to use

```
background-size: cover; 
```

See [MDN documentation](https://developer.mozilla.org/en-US/docs/CSS/background-size)

> [...] cover, which specifies that the background image should be scaled to be as small as possible *while ensuring both its dimensions are greater than or equal to the corresponding dimensions of the background positioning area*.

# networking - 如何通过UNC路径使用CMD通过网络登录？

> ID：12463302
> 
> 赞同：2
> 
> 时间：2012-09-17T16:19:28.810
> 
> 标签：networking, cmd, file-transfer

我希望能够通过 Windows CMD 或 powershell 中的 UNC 路径连接到远程计算机；我试过`C:\pushd \\MyServer\"User Folders"\localUser\TestFolder`了，但是当它执行时，我得到“登录失败：未知用户名或密码错误”

“pushd”甚至是在这里使用的正确命令吗？我有文件要在同一网络上的两台机器之间交换，这里可以忽略权限位吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-17T23:20:26.270

不，`pushd`这不是正确的命令。要连接到远程共享，您需要以下命令`net use`：

```
net use X: \\SERVER\SHARE /user:DOMAIN\USER 
```

如果您在两台主机上使用相同的帐户（域帐户和相同的本地帐户都可以使用），您可以省略该`/user:DOMAIN\USER`部分。

通常您只连接到共享，但您也可以直接连接到共享下方的某个文件夹：

```
net use X: \\SERVER\SHARE\some\subfolder 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T07:09:09.207

`pushd`应该适合您，因为您具有以当前用户身份访问共享所需的权限。

[来源](http://technet.microsoft.com/en-us/library/bb490978.aspx)：

> 如果指定网络路径，pushd 命令会临时将第一个未使用的驱动器号（以 Z: 开头）分配给指定的网络资源。然后该命令将当前驱动器和目录更改为新分配的驱动器上的指定目录。如果您使用启用了命令扩展的 popd 命令，则 popd 命令会删除 pushd 创建的驱动器号分配。

请注意，Powershell`pushd`别名 (really `Push-Location`) 不映射驱动器号，但在其他方面的工作方式相同，即允许您将各自的共享用作当前目录。

所以，是的，看起来你有权限问题。尝试使用资源管理器（或`net use`@Ansgar Wiechers 在他的回答中建议的，甚至是简单的`dir \\share\...`）访问共享以进行交叉检查。

# wordpress - wordpress 在functions.php中加载插件css/js，带条件标签

> ID：12463304
> 
> 赞同：0
> 
> 时间：2012-09-17T16:19:35.620
> 
> 标签：wordpress, conditional

所以我一直在尝试让插件脚本/css 仅在需要时加载。我有一个名为“review”的帖子类别，在我的functions.php下面我试图仅在类别为“review”的帖子上加载插件，而不是，无论页面/帖子/主屏幕..nothign正在加载。有什么帮助吗？

```
add_action( 'init', 'stopmyrpjs', 100 );
function stopmyrpjs() {
if (!in_category('review')){
    remove_action('wp_head', 'myrp_load_necessary_js'); 
    remove_action('wp_head', 'myrp_track_traffic'); 
        wp_deregister_script( 'myrp-stuff' );
    wp_dequeue_script( 'jtip' );
    wp_dequeue_script( 'jquery-MetaData' );
    wp_dequeue_script( 'jquery-ui' );
    wp_dequeue_script( 'myrp-stuff' );
    wp_dequeue_script( 'jquery-ui-accordion' );
    wp_dequeue_script( 'jscolor' );
    wp_dequeue_script( 'sorttable' );
    wp_dequeue_script( 'jquery-MetaData' );
    wp_dequeue_script( 'jquery-rating' );
    }} 
```

编辑:: 我让它工作，除了它不适用于 is_category 或 in_category .. 我得到的工作如下：

```
add_action( 'wp_print_scripts', 'stopmyrpjs', 100 );
function stopmyrpjs() {
if (!is_single()){
    remove_action('wp_head', 'myrp_load_necessary_js'); 
    remove_action('wp_head', 'myrp_track_traffic'); 
wp_deregister_script( 'myrp-stuff' );
    wp_dequeue_script( 'jtip' );
    wp_dequeue_script( 'jquery-MetaData' );
    wp_dequeue_script( 'jquery-ui' );
    wp_dequeue_script( 'myrp-stuff' );
    wp_dequeue_script( 'jquery-ui-accordion' );
    wp_dequeue_script( 'jscolor' );
    wp_dequeue_script( 'sorttable' );
    wp_dequeue_script( 'jquery-MetaData' );
    wp_dequeue_script( 'jquery-rating' );
    }} 
```

仍然希望我可以为某些类别做这项工作..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T17:35:29.853

我想你想要[is_category](http://codex.wordpress.org/Function_Reference/is_category)

这可以在循环外使用，并根据当前视图返回一个布尔值。

**更新：**

更仔细地查看您的操作挂钩，“它不起作用”的原因是因为操作的优先级。您正在尝试在“init”操作中取消注册和出列脚本，这可能在脚本本身实际注册和/或入队之前触发。

我还猜测外部脚本正在由各种插件注册，每个插件都有自己的动作挂钩和优先级。

不要使用 init 钩子，而是尝试将其更改为“wp_footer”，以确保在删除任何多余的脚本之前，所有脚本都由其相应的插件加载：

```
if (!is_category('review'))
{
    remove_action('wp_head', 'myrp_load_necessary_js'); 
    remove_action('wp_head', 'myrp_track_traffic'); 
    add_action('wp_footer', 'stopmyrpjs');
}
function stopmyrpjs(){
    wp_deregister_script( 'myrp-stuff' );
    wp_dequeue_script( 'jtip' );
    wp_dequeue_script( 'jquery-MetaData' );
    wp_dequeue_script( 'jquery-ui' );
    wp_dequeue_script( 'myrp-stuff' );
    wp_dequeue_script( 'jquery-ui-accordion' );
    wp_dequeue_script( 'jscolor' );
    wp_dequeue_script( 'sorttable' );
    wp_dequeue_script( 'jquery-MetaData' );
    wp_dequeue_script( 'jquery-rating' );
} 
```

另外，请记住 wp_dequeue_script 是一个相对较新的函数（从 3.1 版开始）。如果由于某种原因您仍然遇到问题，请尝试将 wp_dequeue_script 更改为 wp_deregister_script。

一些进一步的检查是确保函数本身正在触发，并且适当的视图会导致您的条件评估为真。

希望这会有所帮助，祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-17T08:02:44.547

**[Script Logic](http://wordpress.org/plugins/script-logic/)**是一个 WordPress 插件，可让您完全控制所有 JavaScript 和 CSS 文件。[您可以使用 WP 的条件标签有条件](http://codex.wordpress.org/Conditional_Tags)地仅在需要的页面上加载 CSS 和 JS 文件。

# winapi - 使用 Windows API 渲染时出现屏幕撕裂

> ID：12463307
> 
> 赞同：2
> 
> 时间：2012-09-17T16:19:48.623
> 
> 标签：winapi, framebuffer

我正在尝试使用 Windows API 渲染动画。我的问题是屏幕的一半显示前一帧，下半部分显示当前帧。我认为使用双缓冲区时会解决这个问题，但我插入了

```
BitBlt(hdc, 0, 0, iWidth, iHeight, hdcMem, 0, 0, SRCCOPY); 
```

我理解的是双缓冲区，但水平划分仍然存在。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T19:38:46.040

`BitBlt`不同步到垂直空白，所以如果你`BitBlt`在屏幕上同时硬件正在渲染到显示器，它可能会撕裂。双缓冲`BitBlt`降低了撕裂的可能性，但并没有消除它。要消除它，您需要`BitBlt`在垂直空白期间执行您的操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T19:39:32.203

GDI BitBlt 不是为快速、连续的动画而设计的。您是否会撕裂可能取决于您的硬件和驱动程序。

还有其他图形 API，例如 Direct2D 和 Direct3D（以及已弃用的 DirectDraw），它们可以让您同步到垂直同步。

# algorithm - 拆分数量算法（证券交易所订单）

> ID：12463314
> 
> 赞同：-6
> 
> 时间：2012-09-17T16:20:02.670
> 
> 标签：algorithm, language-agnostic

我有一个问题，我有多个（几千）数量，我需要在一组数量的收件人之间拆分，以便每个数量必须拆分为整数并使用相同的比例。我需要找到一个可靠且有效地实现这一点的算法（我们都不是吗？:-)）

这是为了解决金融市场（证券交易所订单）中的一个问题，其中订单可能会获得数千个“成交”，并且在一天结束时必须将其分发给几个客户，同时保持订单的平均价格。这是一个例子：

总订货量 37300

联交所填写的数量

执行 1\. 16700 股以 75.84 的价格成交

执行 2\. 5400 股以 75.85 的价格成交

执行 3\. 4900 股以 75.86 的价格成交

执行 4\. 10300 股以 75.87 的价格成交

以平均价格成交的总数为 37300 股 = (16700*75.84 + 5400*75.85 + 4900*75.86 + 10300*75.87) / 37300 = 75.85235925

假设我需要在 3 个客户之间分配这些数量，这样：

客户1：15000股

客户2：10000股

客户3：12300股

每次执行都必须单独拆分（我不能只将每个客户要求的数量按平均价格定价）

我的第一个想法是按比例拆分：

客户 1 得到 15000/37300=0.402144772

客户端 2 得到 10000/37300=0.268096515

客户 3 得到 12300/37300=0.329758713

这会导致

Client1 - 15000 Client2 - 10000 Client3 - 12300 比率：0.402144772 比率：0.268096515 比率：0.329758713

拆分（对不起格式 - 这是我在帖子编辑器中能做的最好的）

```
+-------------+-------------+-------------+
| Client 1    | Client 2    | Client 3    | 
+-------------+-------------+-------------+ 
| 6715.817694 | 4477.211796 | 5506.970509 | 
| 2171.581769 | 1447.72118  | 1780.697051 |
| 1970.509383 | 1313.672922 | 1615.817694 |
| 4142.091153 | 2761.394102 | 3396.514745 |
+-------------+-------------+-------------+
| Totals:     |             |             |
|       15000 |       10000 |       12300 | 
+-------------+-------------+-------------+ 
```

这样做的问题是我无法为客户分配小数，所以我需要一个智能算法来调整数量，使这些拆分的小数部分为 0。我知道这在许多情况下可能是不可能的，所以这个要求可以放松一点，以便某个客户获得更多（或更少）。

有谁知道我可以用作这个问题的起点的算法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T16:25:36.047

您可以舍入除最后一个（可能是最小的）之外的所有数字 (ratio[n] * totalQuantity) 最后一个必须是 totalQuantity - 其他数字的总和。这将为您提供整数数量，同时获得与您选择的比率接近的正确总数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T16:39:07.887

试着从不同的角度来看待这个问题。您已经知道每个客户获得了多少份额。您想计算每个人必须支付的公平总金额，并在没有舍入误差的情况下执行此操作。

因此，您希望这个总*美元金额*没有四舍五入的问题，即精确到 0.01。

然后可以使用美元金额计算价格并以所需的精度显示。

相反（计算价格，然后得出金额）总是会产生美元金额的四舍五入问题。

假设价格是每 100 个单位，这是实现此目的的一种方法：

1.  计算订单的总美元 (16,700*75.84/100 + 5,400*75.85/100 + 4,900*75.86/100 + 10,300*75.87/100) = $28,292.93

2.  根据订购数量/填充数量的比率分配除 1 之外的所有客户：

客户 2 = $28,292.93 / 37,300 * 10,000 = $7,585,24 价格 = 7,585,24 / 10,000 * 100 = 75.8524。

客户 3 = 28,292.93 美元 / 37,300 * 12,300 = 9,329.84 美元 价格 = 9,329.84 美元 / 12,300 * 100 = 75.85235772

1.  将最后一个客户计算为剩余的 $$$：

28,292.93 美元 - (7,585,24 美元 + 9,329.84 美元) = 11,377.85 美元。价格 = 11,377.85 美元 / 15,000 * 100 = 75.85233333

这里我随意选择了数量最大的Client 1作为余数计算的对象。

# python - 用python获取数据

> ID：12463316
> 
> 赞同：0
> 
> 时间：2012-09-17T16:20:24.293
> 
> 标签：python

我将如何从源 ex 获取推送数据。推特 API。通过经常运行代码，我目前收集它没有问题。我可能也可以将它自动化以经常检查，但我将如何处理出现在 API 和其他来源上的数据。

完全不熟悉该主题，欢迎任何建议和提示。

我使用python 2.7

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T16:24:03.763

尝试查看 Twitter 的[Streaming API 文档](https://dev.twitter.com/docs/streaming-apis)，以了解有时如何完成此操作的示例。

# session - GWT 中的会话管理：刷新后如何保持连接

> ID：12463317
> 
> 赞同：1
> 
> 时间：2012-09-17T16:20:32.987
> 
> 标签：session, gwt, smartgwt

我有一个带有登录框（用户名和密码）的 GWT 应用程序。一切都很好，但我想通过在他刷新页面时让他保持登录来改善用户体验。

那可能吗 ？

你能给我一些信息来解决这个问题吗？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T16:25:01.617

要保持登录状态，您需要在服务器端创建一个会话。之后，在您的客户端`onModuleLoad`，您必须调用一个规则来验证您的用户是否仍然连接。有了这些，您就可以渲染 UI。

# mysql - LOAD DATA LOCAL INFILE 的触发器

> ID：12463318
> 
> 赞同：1
> 
> 时间：2012-09-17T16:20:35.560
> 
> 标签：mysql, sql, database, triggers

我正在使用“LOAD DATA LOCAL INFILE”将 csv 文件导入数据库表。好奇心的完整查询是：

```
LOAD DATA LOCAL INFILE '".addslashes($current_file)."' REPLACE INTO TABLE $current_table FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '" . '"' . "' ESCAPED BY " . "'\\\\'" . " LINES TERMINATED BY '\n' IGNORE 1 LINES ($toVars) SET $setCols 
```

现在，简而言之，就是将 csv 行加载到`table_A`. 我想要做的是创建一个内存表，它将记录曾经输入的每一行`table_A`。我将使用**MYSQL Triggers**来实现这一点。现在我熟悉使用`inserts`执行的触发器。我的问题是；如何`AFTER`触发`LOAD DATA LOCAL INFILE`命令？

`LOAD DATA LOCAL INFILE`仅当查询完成所有内容时才应触发触发器。它不应该在每个增量插入或任何情况下触发。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T17:20:31.787

你有一个表格来跟踪这些批量上传，比如谁运行它们，它们花了多长时间等？

如果是这样，您可以将其用作哨兵并将触发器放在那里以对另一个表中新加载的数据执行批量操作。

有道理？

# javascript - jQuery 在 chrome 中工作正常在 IE9/IE8 等中失败

> ID：12463320
> 
> 赞同：0
> 
> 时间：2012-09-17T16:20:43.830
> 
> 标签：javascript, jquery, html

我正在使用以下 jquery（其中有很多，抱歉）加载动态下拉列表并在其中一个更改时进行更新。在 IE 中，它在开始时加载下拉列表，但似乎不会触发 onchange 事件（即使在 IE9 中）

任何帮助将不胜感激

```
<script type="text/javascript">
    $(document).ready(function() {

        <%= loadValues%>
        $('.dropone').change(function() {
            var tmpRoomID = $('.drpChg1').val();
            $(".drpChg2").empty();
            $(".drpChg2").load("ajaxdropdown.aspx?drpType=room&roomid=" + tmpRoomID, function() {
                updateTB()
            });
        });

        $('.droptwo').change(function() {
            updateTB()
        });

        $('.dropfive').change(function() {
            updateTB()
        });

        $('.dropfour').change(function() {
            updateTB()
        });

        $('.dropthree').change(function() {
            var tmpRoomID = $('.drpChg3').val();
            $(".drpChg4").empty();
            $(".drpChg4").load("ajaxdropdown.aspx?drpType=cat&catID=" + tmpRoomID, function() {
                updateTB()
            });
            $(".drpChg5").load("ajaxdropdown.aspx?drpType=subcat&subcatID=" + tmpRoomID, function() {
                updateTB()
            });

        });

        function updateTB() {
            $('#drop1').val($(".drpChg1").val());
            $('#drop2').val($(".drpChg2").val());
            $('#drop3').val($(".drpChg3").val());
            $('#drop4').val($(".drpChg4").val());
            $('#drop5').val($(".drpChg5").val());
        }

        function loadValues() {
            var roomID = "0"
            $('.dropone').load('ajaxdropdown.aspx', function() {
                $('#drop1').val($(".drpChg1").val());
            });
            $('.droptwo').load('ajaxdropdown.aspx?drpType=room&roomid=' + roomID + '', function() {
                $('#drop2').val($(".drpChg2").val());
            });

            $('.dropthree').load('ajaxdropdown.aspx?drpType=type' + '', function() {
                $('#drop3').val($(".drpChg3").val());
            });

            $('.dropfour').load('ajaxdropdown.aspx?drpType=cat&catID=' + roomID + '', function() {
                $('#drop4').val($(".drpChg4").val());
            });

            $('.dropfive').load('ajaxdropdown.aspx?drpType=subcat&subcatID=' + roomID + '', function() {
                $('#drop5').val($(".drpChg5").val());
            });

        }

            function loadNewValues() {
            var roomID = "0"
            $('.dropone').load('ajaxdropdown.aspx', function() {
                $('.drpChg1').val($("#drop1").val());   
            });

            $('.droptwo').load('ajaxdropdown.aspx?drpType=room&roomid=' + roomID + '', function() {
                $('.drpChg2').val($("#drop2").val());  
            });

            $('.dropthree').load('ajaxdropdown.aspx?drpType=type' + '', function() {
                $('.drpChg3').val($("#drop3").val());  
            });

            $('.dropfour').load('ajaxdropdown.aspx?drpType=cat&catID=' + roomID + '', function() {
                $('.drpChg4').val($("#drop4").val());  
            });

            $('.dropfive').load('ajaxdropdown.aspx?drpType=subcat&subcatID=' + roomID + '', function() {
               $('.drpChg5').val($("#drop5").val());  
            }); 
       }

    });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T16:27:56.883

尝试那些您称为普通链接的链接。有时浏览器需要链接到：

*   Somefile.asp?blah=yaddah
*   /Somefile.asp?blah=yaddah
*   ./Somefile.asp?blah=yaddah

我有时会在 CSS 中看到这一点。

# javascript - 有什么方法可以使用客户端收到的 javascript json 数据进行类型和字段名称检查

> ID：12463321
> 
> 赞同：0
> 
> 时间：2012-09-17T16:20:44.843
> 
> 标签：javascript, jquery

我的服务器上有以下课程：

```
public class JsonDialog
{
    public IEnumerable<string> Errors { set; get; }
    public string Modified { set; get; }
    public string ModifiedBy { get; set; }
    public string PartitionKey { set; get; }
    public string PartitionKeyNew { set; get; }
    public string RowKey { get; set; }
    public string RowKeyNew { get; set; }
    public bool Success { set; get; }
} 
```

在我的 MVC 操作方法中，我返回一个 JsonResult：

```
 return Json(new JsonDialog
                {
                    Success = false,
                    Errors = errors
                }); 
```

在我的客户端代码中，我有以下内容：

```
 $.ajax({
        url: href,
        dataType: 'json',
        type: 'POST',
        data: $form.serializeArray()
        })
        .done(onDone)
        .fail(onFail);

var onDone = function (json, textStatus, XMLHttpRequest) {
    json = json || {};
    if (json.Success) { 
```

因为我在服务器上使用了一个类，所以编译器会检查以确保我不会犯任何拼写错误，例如它不允许我输入“success = false”。但是在客户端上没有检查，我可以编写 json.sUccEss 代码，它仍然可以，但它不会给我想要的结果。

Javascript中是否有任何方法可以像在服务器上一样进行一些错误检查？诸如将数据放入类并让 IDE 检查类字段是否正确之类的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T16:25:14.957

也许有很好的文本编辑器可以帮助你，但是 Javascript 没有这样的东西。

像 TextSublime 这样的编辑器可以伪造代码内省并提供文件搜索以帮助输入相同的名称。

像 Eclipse 或 Netbeans 这样的 IDE 做得更好，但离你想要的还很远。Javascript 不是像 Java 或 C# 那样的强类型语言（如果我们可以说它们是……），所以你不会找到 VS 和 C# 所拥有的所有那些糖果特性。

这就是[NetBeans 所做](http://netbeans.org/kb/docs/ide/javascript-editor.html#basic)的，但并不像您希望的那样先进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T16:45:40.187

可能有工具，但如果你可以通过以下方式实现：

在控制器中，您呈现部分视图而不是 json 结果并在其上传递类对象，然后在该视图上您必须编写 objcetName.PropertyName 并且您会检查它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T16:49:32.323

我（部分）通过在 JS 中创建一个匹配对象来解决这个问题，我称之为“工厂”方法（但如果你使用[这里](http://msdn.microsoft.com/en-us/library/ee817667.aspx "工厂设计模式")提到的“工厂”一词，那就用词不当了。它真的更相似'casting'，但由于 JS 没有强类型，这也不完全正确。

显然，如果你所做的只是试图让智能感知工作，那么这个代码模式也非常冗长，但是如果你在 JS 端对象上有方法......我们会虚构地说：`JsonResult.prototype.markErrorsReviewed`......那么这个模式你获取给定“类”的实例很有帮助。

为简洁起见，我将仅使用您的 C# 类作为我的 JS 的基础：

```
var JsonResult = function () {
    this.Errors = [];
    this.Modified = null;
    this.ModifiedBy = null;
    //...rest of your properties, defaulted as necessary
}

JsonResult.factory = function (o) {
    var j = new JsonResult();
    $.extend(j, o);
    //do other processing here if needed (for example, ASP.NET serializes DateTime retardedly)
    return j;
} 
```

**阿贾克斯**：

```
$.ajax({
    success: function(json, status, xhr) {
        var myobj = JsonResult.factory(json);
        //VS2010 will now give you intellisense w/ proper property names on myobj
        //Note: it's still buggy and sometimes won't detect things properly, but it usually works
    }
}); 
```

# objective-c - 有没有办法在已经评论的部分上使用块评论？

> ID：12463323
> 
> 赞同：1
> 
> 时间：2012-09-17T16:20:53.023
> 
> 标签：objective-c, xcode, comments

我知道你可以像这样注释掉整段代码：

```
/*
line of code
line of code
line of code
*/ 
```

但是，如果您尝试注释的代码中已经有 /* ... */ 部分，那么注释块的 */ 结尾将关闭我正在尝试创建的“更大”注释块。

例子：

```
/* wanting to comment this big section out
line of code
line of code
line of code
line of code
line of code
line of code
/* this section was already commented out before
line of code
line of code
line of code
*/ this section was already commented out before
line of code
line of code
line of code
line of code
line of code
*/ this last part doesn't get commented out, because the comment stops at previous */ 
```

显然这没什么大不了的，它并没有阻止我让应用程序正常工作，但我只是想知道是否有某种方式可以注释掉更大的代码部分，即使已经有注释该代码中的块。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-17T16:22:40.437

突出显示要注释掉的代码，然后按“Command”+“/”

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-17T16:24:47.367

为避免这种情况，请始终使用`//`for 注释并使用 Xcode 快捷方式来注释代码块。

捷径是`cmd + /`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T16:27:21.040

如果我在代码中看到它，我会皱眉，但你可以

```
#if 0

...code...

#endif 
```

# scala - 如何在Scala中调试错误“X所需的类文件丢失。包Z的参考值Y引用不存在的符号”？

> ID：12463325
> 
> 赞同：1
> 
> 时间：2012-09-17T16:20:52.960
> 
> 标签：scala, classpath, .class-file

自上周以来，我才刚刚开始使用 Scala，我遇到了这个让我发疯的问题。

我有一些代码想从 Java 完全迁移到 Scala（库除外），但由于这个神秘的错误，我遇到了一个块，现在我无法继续。

假设我有一个在**org.domain.subdomain.MyClass中定义的类**

我有一个似乎没有编译问题的类（正如 Intellij 所建议的那样），但是当我构建项目的模块时，我会得到以下信息

**MyClass**所需的类文件丢失

包**org.domain**的引用值**子域**引用不存在的符号。

 **我确信（或几乎？）在我开始用 Scala 重写代码之前，我已经在项目编译时获得了正确的类路径。

我无法使用详细选项对其进行编译。我使用 FSC 编译器作为项目编译器。Intellij 不显示**任何**带有详细选项的内容！

这里发生了什么？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-01T19:01:51.917

我刚刚遇到了这个问题，并且在 IntelliJ 中重新导入项目有效。我删除了 .idea 目录和 .iml 文件，然后将项目重新导入为 maven。

这是一个 IntelliJ 问题 - 外部 Maven 构建工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T22:18:19.117

您的类路径不完整。的引用`org.domain.subdomain`出现在我们的一个来源引用的类文件中（如错误消息所示）。

如果你正在重写 Java 代码，你可能需要在每个模块的类路径中添加更多的传递依赖。Scala 编译器在类型检查方面更加急切，在某些情况下它需要更大的类路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-06T19:06:15.517

I know, the question is more than one year old, but maybe it helps someone.

I just had the same issue. One of my libraries used an newer version of org.scala-lang:scala-library than the main project. After the library update everything works fine.**

# session - Magento 丢失会话数据

> ID：12463326
> 
> 赞同：0
> 
> 时间：2012-09-17T16:20:59.590
> 
> 标签：session, magento

我使用以下设置一些数据：

`Mage::getSingleton('core/session')->setData('amprevnext_collection_ids', array_values($ids));`

它包含一个 id 数组，

尝试检索数据时

`Mage::getSingleton('core/session')->getData('amprevnext_collection_ids')`

它不返回任何值，我通过尝试将核心更改为客户进行测试，我还使用了 a `$_SESSION`，作为回报，它也是空的..

# c# - 更正处理期望失败（417）并在 WCF 客户端应用程序中更改 Expect100Continue

> ID：12463327
> 
> 赞同：0
> 
> 时间：2012-09-17T16:21:01.873
> 
> 标签：c#, wcf, windows-services, http-headers

我的应用程序是使用 WCF 服务的 C# Windows 服务。当出现第一个“期望失败 (417)”错误时，我将`ServicePointManager.Expect100Continue`和都更改`ServicePoint.Expect100Continue`为`false`：

```
try
{
    //ServicePointManager.Expect100Continue = false; // If uncomment all work
    var svc = new ServiceClient();
    svc.GetData(); // first error
}
catch (ProtocolException pex)
{
    if (pex.Message.Contains("(417)"))
    {
        ServicePointManager.Expect100Continue = false;
        var sp = ServicePointManager.FindServicePoint(new Uri(@"http://addr.to.service/service.svc"));
        sp.Expect100Continue = false;

        var svc = new ServiceClient();
        svc.GetData(); // second same error
    }
} 
```

但是，对该服务的第二次调用也失败了。但是，如果我在任何连接之前设置`Expect100Continue`为`false`，与服务的通信就可以正常工作。

**这种方式正确处理`Expect100Continue`错误吗？我需要应用程序自动适应而无需用户操作。我忘记做这项工作是什么？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T18:23:58.620

大多数设置`ServicePointManager`都被视为应用在应用程序生命中该点之后创建的所有新服务点的默认值。在看到错误后更改设置的情况下，您实际上并没有更改现有 ServicePoint 实例上的任何内容，包括在这种情况下与 WCF 使用的连接关联的实例。

在您调用的示例代码中，您`ServicePointManager.FindServicePoint`试图找到正确的 ServicePoint。但是，`FindServicePoint`它有几个重载，并且很容易错误地使用该 API。例如，`FindServicePoint`将尝试考虑 http/https、您要连接的主机、您的代理配置等。如果您没有提供正确的参数`FindServicePoint`，您很容易最终得到错误的服务点返回给您，并且您的设置将不会应用于`ServicePoint`您打算更改的内容。

我建议您使用`FindServicePoint`需要 a 的重载`IWebProxy object`来确保您获得正确的`ServicePoint`. 在大多数情况下，您应该能够`WebRequest.DefaultWebProxy`作为`IWebProxy`对象传入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T17:21:07.583

从ServicePointManager.Expect100Continue的MSDN文档中，

更改此属性的值不会影响现有的 ServicePoint 对象。只有更改后创建的新 ServicePoint 对象才会受到影响。因此，更改现有 WCF 客户端上的值将无效。您需要创建一个新的 WCF 客户端，然后调用 GetData()

# testing - Grails test and @Transactional

> ID：12463334
> 
> 赞同：1
> 
> 时间：2012-09-17T16:21:31.697
> 
> 标签：testing, grails, transactions

I have Grails test:

```
class GormTests extends GroovyTestCase {
   static transactional = false
   ...
} 
```

I'm trying to mark method as transactional by `org.springframework.transaction.annotation.Transactional` annotation but following exception arises:

```
org.springframework.aop.framework.AopConfigException: Could not generate CGLIB subclass of class [class GormTests]: Common causes of this problem include using a final class or a non-visible class; nested exception is net.sf.cglib.core.CodeGenerationException: java.lang.reflect.InvocationTargetException-->null 
```

How can I fix it?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T16:42:28.333

`@Transactional`仅适用于 Spring bean - 测试类不是 bean。最好的办法是将测试类分成两部分，一类带有非事务性测试，另一类带有。

# wordpress - woo_breadcrumbs function and custom-post-type

> ID：12463339
> 
> 赞同：0
> 
> 时间：2012-09-17T16:21:46.127
> 
> 标签：wordpress, custom-post-type, breadcrumbs, woothemes

I am using the woo_breadcrumbs function and need to insert the name of the curent custom post type. Currently it is showing the home page + category, `Home -> Category` . Is there a simple way to call the name of the current Custom-Post-Type and insert it between home and category? The function inside the `admin-fuction.php` file in functions folder.

Thanks!!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T17:42:52.487

到目前为止，我发现了以下内容，希望对您有所帮助。这是针对单个分类法编写的：

```
add_filter( 'woo_breadcrumbs_args', 'woo_video_filter_breadcrumbs_args', 10 );

if ( ! function_exists( 'woo_video_filter_breadcrumbs_args' ) ) {
    function woo_video_filter_breadcrumbs_args( $args ) {
        $args['singular_video_taxonomy'] = 'videos';
        return $args;
    }
} 
```

# xslt - 将元素排序并移动到新元素中

> ID：12463342
> 
> 赞同：1
> 
> 时间：2012-09-17T16:22:06.923
> 
> 标签：xslt, sorting, element

即使有了这个网站上的所有好技巧，我的 xslt 仍然存在一些问题。我对它很陌生。我有这个源文件：

```
<?xml version="1.0" encoding="utf-8"?>
<file>
  <id>1</id>
  <row type="A">
    <name>ABC</name>
  </row>
  <row type="B">
    <name>BCA</name>
  </row>
  <row type="A">
    <name>CBA</name>
  </row>
</file> 
```

我想添加一个元素并对类型的行进行排序，以获得这个结果

```
<file>
  <id>1</id>
  <details>
  <row type="A">
    <name>ABC</name>
  </row>
    <row type="A">
      <name>CBA</name>
    </row>
  <row type="B">
    <name>BCA</name>
  </row>
  </details>
</file> 
```

我可以使用这个对行进行排序：

```
 <xsl:template match="file">
    <xsl:copy>
      <xsl:apply-templates select="@*/row"/>
      <xsl:apply-templates>
        <xsl:sort select="@type" data-type="text"/>
      </xsl:apply-templates>
    </xsl:copy>
  </xsl:template> 
```

我可以使用它移动行

```
 <xsl:template match="file">
    <xsl:copy>
      <xsl:copy-of select="@*" />
      <xsl:apply-templates select="*[not(name(.)='row')]" />
      <details>
        <xsl:apply-templates select="row"  />
      </details>
    </xsl:copy>
  </xsl:template> 
```

但是当我尝试将它们结合起来时，我无法得出正确的答案。希望当我看到事物如何组合时，我能更多地了解 XSLT。由于我正在创建一个新元素`<details>`，因此我认为必须在创建新元素之前进行排序`<details>`。我必须使用 xslt 1.0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T17:47:26.067

像这样的东西似乎有效：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="xml" indent="yes"/>

  <xsl:template match="file">
    <xsl:copy>
      <xsl:copy-of select="@*"/>
      <xsl:copy-of select="row[1]/preceding-sibling::*" />
      <details>
        <xsl:for-each select="row">
          <xsl:sort select="@type" data-type="text"/>
          <xsl:copy-of select="."/>
        </xsl:for-each>
      </details>
      <xsl:copy-of select="row[last()]/following-sibling::*" />
    </xsl:copy>
  </xsl:template>

</xsl:stylesheet> 
```

这是我得到的结果：

```
<?xml version="1.0" encoding="utf-8"?>
<file>
  <id>1</id>
  <details>
    <row type="A">
      <name>ABC</name>
    </row>
    <row type="A">
      <name>CBA</name>
    </row>
    <row type="B">
      <name>BCA</name>
    </row>
  </details>
</file> 
```

# jquery - jQuery how to get keyup event capital and small letter value

> ID：12463344
> 
> 赞同：1
> 
> 时间：2012-09-17T16:22:08.190
> 
> 标签：jquery, keyboard-events

```
$("#inputField").keyup(function(event) {
  alert(event.keyCode);
  alert(event.charCode);
  alert(event.which);
  alert(String.fromCharCode(event.keyCode));
}); 
```

*   If I press `A` (lowercase "a"), output will be: `65, 0, 65, A`
*   If I press `Shift`+`A`, the output still same: `65, 0, 65, A`

Can someone teach me how to get small letter `a` when I key in `a` and get capital letter `A` when I key in `A`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T16:24:18.437

您可以改用`keypress`事件：

```
$("#inputField").keypress(function(e) {
    alert(String.fromCharCode(e.which));
});​ 
```

**PS：**以下[`keyup`](http://api.jquery.com/keyup/)文档：

> 为了捕捉实际的文本输入， .keypress() 可能是更好的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T16:38:47.710

```
$("#inputField").keyup(function(event) {
    var code = event.which;
    if(code >= 65 && code <= 90) {
        alert( String.fromCharCode( event.which + 32 ) );
    }
}); 
```

***[工作样本](http://jsfiddle.net/mvYkU/7/)***

# java - ActionListener best practices

> ID：12463345
> 
> 赞同：8
> 
> 时间：2012-09-17T16:22:10.453
> 
> 标签：java, swing, package, actionlistener

Sorry for the title, probably too generic.

I already read [How to Write an Action Listener](http://docs.oracle.com/javase/tutorial/uiswing/events/actionlistener.html) tutorial by Java and I already read [this question](https://stackoverflow.com/questions/11438048/best-practice-for-implementing-actionlistener), but I still have some doubts: I was wondering which solution is the best when I have to perform the same action multiple time.

I'd want to reuse the same `ActionListener`, but I am not sure on how to achieve this in the best way (speaking in term of: code readability, code mantainability, performance and code style).

First the "standard" code (which I would use if I'm not going to reuse the action listener):

```
btnMenu.addActionListener(
    new ActionListener() {
        public void actionPerformed(ActionEvent e) {
            Navigator.showMenu();
        }
    }
); 
```

This way I can't reuse anything obv, since it's an anonymous inner class...

Now, I can think of the following solutions:

1.  Store a reference of an Anonymous Inner Class in a field (that will most likely be `static final`);
2.  Write a new class that implements `ActionListener` interface.

Example code for solution 1:

```
public static final MENU_ACTION_LISTENER = new ActionListener() {
    public void actionPerformed(ActionEvent e) {
        Navigator.showMenu();
    }
};

btnMenu.addActionListener(MENU_ACTION_LISTENER); 
```

Example code for solution 2:

```
// package-private, only GUI-package classes should be able to use it.
// most likely I won't ever need to subclass it, so why not making it final?
final class MenuActionListener implements ActionListener  {
    public void actionPerformed(ActionEvent e) {
        Navigator.showMenu();
    }
}

// now, wherever I need to use it:
btnMenu.addActionListener(new MenuActionListener()); 
```

I have some doubts about both solutions:

1.  Where to store references to Anonymous Action Listeners? I could have a sort of utility class (e.g. `ActionListenersUtil`) where store all action listeners I want to reuse in `static final` fields, but I don't like it... it seems to me poor design.

2.  It makes more sense, probably best follows the [Command Pattern](http://en.wikipedia.org/wiki/Command_pattern)... I initially had some doubt about the packages... I'd like to have all listeners in a separate package (e.g. `com.myapp.gui` for gui elements and `com.myapp.gui.listeners` for listeners. But when I wrote down this I realized that I have no choice: the only place where it make sense is in the same package (because they *must* be package-private), even if for the sake of order I would have like to put them all in a separate package. I still have some doubt though, because most action listeners may be reusable even in case GUI changes; it still would be a good idea to have it in the same package?

Another question: what's the difference between calling `btnMenu.addActionListener(MENU_ACTION_LISTENER);` and `btnMenu.addActionListener(new MenuActionListener());` (speaking in term of JVM, class loading, class compiling, memory occupied by each class, garbage collection and so on)?

Please help, I'm so confused right now! :(

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-17T16:34:55.413

如果您必须将其附加到按钮、菜单等，最好的方法是创建一个`Action`而不是一个。`ActionListener`An`Action`是 a 的模型`JButton`，并且该模型旨在共享

这还使您能够同时更改`Action`附加到的所有按钮的文本、图标、启用状态和其他属性，而无需多次调用。另外，它也可以附加到菜单项等。

要创建一个，`Action`您不必从头开始。[`AbstractAction`](http://docs.oracle.com/javase/7/docs/api/javax/swing/AbstractAction.html)是一个很好的起点。[Swing`Action`教程](http://docs.oracle.com/javase/tutorial/uiswing/misc/action.html)也是一本不错的读物。

# java - 获取 N 英里 java 客户端内的邮政编码

> ID：12463346
> 
> 赞同：0
> 
> 时间：2012-09-17T16:22:13.553
> 
> 标签：java, zipcode

目标...给定一个邮政编码和若干英里...获取 N 英里内的所有邮政编码。

在 .NET 中找到了一个实用程序：http: [//www.codeproject.com/Articles/9198/ZIP-Code-Utility](http://www.codeproject.com/Articles/9198/ZIP-Code-Utility) 在 PHP 中找到了另一个实用程序。

还发现了这个：[http ://api.geonames.org/findNearbyPostalCodes?postalcode=53714&country=USA&radius=50&username=demo](http://api.geonames.org/findNearbyPostalCodes?postalcode=53714&country=USA&radius=50&username=demo)

java中有这样的客户端吗？

更新：我找不到一个，也没有人回应，所以我继续创建了一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T17:00:17.823

我继续写了一篇。

```
package ndd;

public class RadiusBox {
    static final Double kEarthRadiusMiles = 3956.0;
    public static RadiusBox create(Double latitude, Double longitude, Double radiusInMiles)
    {
        /*
            A point {lat,lon} is a distance d out on the tc radial from point 1 if:

            lat = asin (sin (lat1) * cos (d) + cos (lat1) * sin (d) * cos (tc))
            dlon = atan2 (sin (tc) * sin (d) * cos (lat1), cos (d) - sin (lat1) * sin (lat))
            lon = mod (lon1 + dlon + pi, 2 * pi) - pi

            Where:
                * d is the distance in radians (an arc), so the desired radius divided by
                    the radius of the Earth.
                * tc = 0 is N, tc = pi is S, tc = pi/2 is E, tc = 3*pi/2 is W.
        */
        double lat;
        double dlon;
        double dLatInRads = latitude * (Math.PI / 180.0);
        double dLongInRads = longitude * (Math.PI / 180.0);
        double dDistInRad = radiusInMiles / kEarthRadiusMiles;
        RadiusBox box = new RadiusBox ();
        box.setRadius(radiusInMiles);

        //  N (tc == 0):
        //      lat = asin (sin(lat1)*cos(d) + cos(lat1)*sin(d))
        //          = asin (sin(lat1 + d))
        //          = lat1 + d
        //  Unused:
        //      lon = lon1, because north-south lines follow lines of longitude.
        box.setTopLine((dLatInRads + dDistInRad) * (180.0 / Math.PI));

        //  S (tc == pi):
        //      lat = asin (sin(lat1)*cos(d) - cos(lat1)*sin(d))
        //          = asin (sin(lat1 - d))
        //          = lat1 - d
        //  Unused:
        //      lon = lon1, because north-south lines follow lines of longitude.
        box.setBottomLine((dLatInRads - dDistInRad) * (180.0 / Math.PI));

        //  E (tc == pi/2):
        //      lat  = asin (sin(lat1)*cos(d))
        //      dlon = atan2 (sin(tc)*sin(d)*cos(lat1), cos(d) - sin(lat1)*sin(lat))
        //      lon  = mod (lon1 + dlon + pi, 2*pi) - pi
        lat = Math.asin (Math.sin(dLatInRads) * Math.cos (dDistInRad));
        dlon = Math.atan2 (Math.sin(Math.PI / 2.0) * Math.sin (dDistInRad) * Math.cos (dLatInRads), Math.cos (dDistInRad) - Math.sin (dLatInRads)* Math.sin (lat));
        box.setRightLine( (((dLongInRads + dlon + Math.PI) % (2.0 * Math.PI)) - Math.PI) * (180.0 / Math.PI));

        //  W (tc == 3*pi/2):
        //      lat  = asin (sin(lat1)*cos(d))
        //      dlon = atan2 (sin(tc)*sin(d)*cos(lat1), cos(d) - sin(lat1)*sin(lat))
        //      lon  = mod (lon1 + dlon + pi, 2*pi) - pi
        dlon = Math.atan2 (Math.sin (3.0 * Math.PI / 2.0) * Math.sin (dDistInRad) * Math.cos (dLatInRads), Math.cos (dDistInRad) - Math.sin (dLatInRads)* Math.sin (lat));
        box.setLeftLine((((dLongInRads + dlon + Math.PI) % (2.0 * Math.PI)) - Math.PI) * (180.0 / Math.PI));

        return box;
    }

    private double bottomLine;
    private double topLine;
    private double leftLine;
    private double rightLine;
    private double radius;
    public double getBottomLine() {
        return bottomLine;
    }
    public void setBottomLine(double bottomLine) {
        this.bottomLine = bottomLine;
    }
    public double getTopLine() {
        return topLine;
    }
    public void setTopLine(double topLine) {
        this.topLine = topLine;
    }
    public double getLeftLine() {
        return leftLine;
    }
    public void setLeftLine(double leftLine) {
        this.leftLine = leftLine;
    }
    public double getRightLine() {
        return rightLine;
    }
    public void setRightLine(double rightLine) {
        this.rightLine = rightLine;
    }
    public double getRadius() {
        return radius;
    }
    public void setRadius(double radius) {
        this.radius = radius;
    }
    @Override
    public String toString() {
        return "RadiusBox [bottomLine=" + bottomLine + ", leftLine=" + leftLine
                + ", radius=" + radius + ", rightLine=" + rightLine
                + ", topLine=" + topLine + "]";
    }

    public String getSqlQuery() {
        StringBuilder sb = new StringBuilder();
        sb.append ("SELECT * FROM ZIP_CODES WHERE ");
        sb.append ("LATITUDE >= ");
        sb.append(bottomLine);
        sb.append (" AND LATITUDE <= ");
        sb.append(topLine);
        sb.append (" AND LONGITUDE >= ");
        sb.append(leftLine);
        sb.append (" AND LONGITUDE <= ");
        sb.append(rightLine);
        sb.append (" ORDER BY CITY, STATE, ZIP");
        return sb.toString();
    }
} 
```

# javascript - Pass data from controller to javascript (bypassing the view)

> ID：12463348
> 
> 赞同：4
> 
> 时间：2012-09-17T16:22:20.053
> 
> 标签：javascript, asp.net-mvc, razor

**Is it a bad practice to pass data from the controller to the script?**, ie:

```
<script>
   @foreach (... in ViewBag.X) {
         $.mynamespace.x[i] = ...
   }
</script> 
```

By "bypassing the view" I mean doing it this way:

```
<ul id="..." style="display:none;">
@foreach (... in ViewBag.X) {
    <li id="...">...</li>
   ...
}
</ul> 
```

And then in my script using selectors I could fill my `$.mynamespace.x` array.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T16:27:56.047

你这样做的方式是一种不好的做法。正确的方法是对其进行 JSON 编码，以确保所有值都从服务器正确编码到客户端 javascript：

```
<script type="text/javascript">
   $.mynamespace.x = @Html.Raw(Json.Encode(ViewBag.X));
</script> 
```

现在，与直接生成标记相比，这是否合适将取决于具体情况。但是，如果您打算遍历这个 javascript 数组并将 HTML 吐到 DOM 中，老实说，我不太明白这一点。继续并直接在服务器上生成此标记（您的第二种方法）。

最后评论`ViewBag`：不要使用它。改用强类型视图模型。

# sql - How can I change where Query results go in Excel VBA?

> ID：12463358
> 
> 赞同：-1
> 
> 时间：2012-09-17T16:23:06.277
> 
> 标签：sql, database, excel, vba

I have created a Query in Excel using the wizard and can successfully manipulate the query itself from VBA, but now I want to change where the results are displayed among multiple sheets. Is there a "method" built in to manipulate this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T16:39:49.580

您可以记录刚刚创建查询的宏，然后在 VBA 中更改所需的参数。这应该只是首先选择您希望结果到达的单元格（在执行查询之前）“Range（“A1”）.Select”。

获得此代码后，如果您在更改“目标单元格”时仍然遇到问题，请编辑此问题并添加代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T18:22:17.177

如果您使用向导在 Excel 中创建了一个查询，那么它很可能在工作簿中创建了一个新连接。如果是这样，请转到您希望数据再次出现的工作表，然后转到数据选项卡 -> 获取外部数据组 -> 现有连接 -> 双击连接 -> 选择数据传输选项（表，数据透视表、数据透视表和数据透视图）。

# java - Doing a SQL batch update in Java that won't update a field if passed-in parm is null

> ID：12463359
> 
> 赞同：1
> 
> 时间：2012-09-17T16:23:06.870
> 
> 标签：java, sql, oracle, batch-file, prepared-statement

How do I create a batch update that won't update a column if the passed-in parameter value is null? For example:

```
String UPDATE_STMT = "UPDATE MY_TABLE SET col1 = ?, col2 = ?, col3 = ?";
Connection conn = getConnection();
PreparedStatement pstmt = conn.preparedStatement(UPDATE_STMT);

List items = getItems();
for (ItemType item : items) {

    stmt.setString(1, item.x);
    stmt.setString(2, item.y);
    stmt.setString(3, item.z);
}

pstmt.executeBatch(); 
```

How do I code it so that col1 will only be updated with the value of item.x if item.x is not null or empty? if item.x is null/empty, I don't want the current value in the col1 field to be overridden. This is for an Oracle 10g database.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T16:36:27.390

我想它应该适合你：

```
String UPDATE_STMT = "UPDATE MY_TABLE SET col1 =   
CASE WHEN ? IS NULL THEN col1 ELSE ? END, col2 = ?, col3 = ?"; 
```

注意，现在你需要设置 item.x 两次，`stmt.setString(1, item.x); stmt.setString(2, item.x);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T17:02:46.607

如果您不想要[alex07 的 Oracle 特定解决方案](https://stackoverflow.com/questions/12463359/doing-a-sql-batch-update-in-java-that-wont-update-a-field-if-passed-in-parm-is/12463572#12463572)，只需为每组项目重新生成准备好的语句。

```
Connection conn = getConnection();

List items = getItems();
for (ItemType item : items) {

    String UPDATE_STMT = "UPDATE MY_TABLE SET ";
    if (item.x != null) {UPDATE_STMT += "col1 = ?, ";}
    UPDATE_STMT += "col2 = ?, col3 = ?";

    PreparedStatement pstmt = conn.preparedStatement(UPDATE_STMT);

    int count = 0;
    if (item.x != null) {pstmt.setString(++count, item.x);}
    pstmt.setString(++count, item.y);
    pstmt.setString(++count, item.z);

    pstmt.executeBatch();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T16:37:10.237

如果 item.x 为空，则使用 COALESCE 返回 col1：

```
String UPDATE_STMT = "UPDATE MY_TABLE SET col1 = COALESCE(?,col1), col2 = ?, col3 = ?" 
```

然后您需要做的就是确保 item.x 始终为空，而不是空字符串。

# css - Font issue on Chrome mobile where font size is rendered bigger

> ID：12463360
> 
> 赞同：4
> 
> 时间：2012-09-17T16:23:19.363
> 
> 标签：css, google-chrome, mobile

I have an issue with Chrome mobile where some text is rendered in bigger font size than it is in CSS. I checked in developer tool and find that those text have inherit the correct font size, but still rendered 5px bigger in the computed style.

I find this post [Fix font size issue on Mobile Safari (iPhone) where text is rendered inconsistently and some fonts are larger than others?](https://stackoverflow.com/questions/5303263/fix-font-size-issue-on-mobile-safari-iphone-where-text-is-rendered-inconsisten) but -webkit-text-size-adjust doesn't work for me here.

I have checked in different mobile browsers including Dolphin, Opera Mobile and Safari, all rendered the text correctly except Chrome mobile.

* * *

Update: Solved, it caused by the setting of Chrome Mobile to render the text bigger. I don't think this is something we can block in the setting.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-11T14:05:09.873

问题在于 Chrome Mobile 18 和 Chrome Mobile 25 之间的字体渲染发生了变化。看起来 100% 的 Chrome 缩放功能实际上是在放大字体。我们必须将 Chrome 缩放功能设置为 85% 才能使字体不高档。

此外，如果我们触摸网页上的任何内容，页面上的字体会重新调整为适当的大小。这种尺度之间的转换非常令人担忧，因为它影响应用程序是一种极其消极的方式。特别是如果您正在尝试任何需要确保任何心理测量有效性的事情。

# sql-server - 播种数据库的策略

> ID：12463362
> 
> 赞同：1
> 
> 时间：2012-09-17T16:23:30.807
> 
> 标签：sql-server

我刚开始研究一个使用 SQL Server DB 的 .NET 项目。我得到了一个脚本，它使用所有表、SP 等设置数据库，但没有数据。

我最初的冲动是进入数据库并手动输入一些虚拟数据来设置几个用户等，这样我就可以开始使用该应用程序了。但是，每次我尝试添加记录时，外键约束都会妨碍我。不幸的是，我无法向您展示架构，但是对于这种情况，我可以遵循一般策略吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T16:31:55.370

如果您有 FK 的阻碍，您需要开始在所有“主”表中输入数据。然后，您可以将数据输入到您的子表或明细表中。

例如，假设您有一个 Orders 表和一个 Customers 表，并且在 Orders 和 Customers 之间有一个 FK。“主表”将是客户，在此示例中，详细表将是您的订单表。您可能需要先输入几个客户，这样当您输入订单时，您可以为其分配一个客户，而不会因为没有客户而出现 FK 错误。

我怀疑这个例子非常接近你遇到的问题类型。

# ios - 核心数据保存不正确

> ID：12463363
> 
> 赞同：1
> 
> 时间：2012-09-17T16:23:31.930
> 
> 标签：ios, core-data

我有一个辅助托管对象上下文，用于在数据合并回主 moc 之前处理传入的同步数据。不幸的是，我遇到了似乎是合并策略问题的问题。问题不是在将通知合并回主 moc 时发生，而是在此之前......当辅助上下文正在自我保存时。

辅助上下文的合并策略是 NSMergeByPropertyObjectTrumpMergePolicy。如果我删除此策略并让它默认返回典型错误，则此问题不再发生。但是，我试图理解为什么这是一个问题，特别是因为我不想为此上下文使用默认合并策略。

我有一个具有活动属性的用户对象。当同步对象从重新激活用户的服务器进入时，流程如下所示：

在将更改应用于对象之前，这是其初始状态：

```
(SyncObject *) $29 = 0x0051b6f0 <User: 0x51b6f0> (entity: User; id: 0x526030 <x-coredata://70907366-8102-4131-9230-6F60D0508047/User/p617> ; data: {
active = 0;
... 
```

将更改应用于对象后，正如人们所期望的那样：

```
(SyncObject *) $30 = 0x0051b6f0 <User: 0x51b6f0> (entity: User; id: 0x526030 <x-coredata://70907366-8102-4131-9230-6F60D0508047/User/p617> ; data: {
active = 1;
... 
```

稍后，在保存之前，我验证了该对象仍然处于活动状态（它是一个 int，因为在这种情况下我直接 po 了内存地址）：

```
(int) $45 = 5355248 <User: 0x51b6f0> (entity: User; id: 0x526030 <x-coredata://70907366-8102-4131-9230-6F60D0508047/User/p617> ; data: {
active = 1;
... 
```

接下来我们进行保存：

```
[syncContext save:&error]; 
```

然后在合并通知块中，我在打印通知时看到了这一点：

```
updated = "{(\n    <User: 0x51b6f0> (entity: User;
id: 0x526030 <x-coredata://70907366-8102-4131-9230-6F60D0508047/User/p617> ;
data: {\n    active = 0;\n
... 
```

更糟糕的是，此时的对象如下所示：

```
(int) $47 = 5355248 <User: 0x51b6f0> (entity: User; id: 0x526030 <x-coredata://70907366-8102-4131-9230-6F60D0508047/User/p617> ; data: {
active = 0;
... 
```

为什么内存中的对象似乎被 SQL 存储中的数据覆盖？据我了解， NSMergeByPropertyObjectTrumpMergePolicy 意味着内存中的不同值将保存在存储中的这些值之上，但显然这不是正在发生的事情。我真的很茫然，这个问题让我很担心，因为它似乎表明来自服务器的更改可能会被丢弃。如果有人知道更多关于这里发生的事情，我很想了解实际发生的事情。

我应该提到，当我删除合并策略时，此保存会引发合并错误，正如我所料，但是我不明白为什么它将我的新更改视为“旧”

```
 (NSError *) $8 = 0x00566720 Error Domain=NSCocoaErrorDomain Code=133020 "The operation couldn’t be completed. (Cocoa error 133020.)" UserInfo=0x591c90 {
conflictList=(
"NSMergeConflict (0x5df220) for NSManagedObject (0xd63a370) with objectID '0xd635310 <x-coredata://70907366-8102-4131-9230-6F60D0508047/User/p617>'
with oldVersion = 9 and newVersion = 10
and old object snapshot = {\n    active = 1;\n ...\n} 
and new cached row = {\n    active = 0;\n ... \n}"
)} 
```

**解决方法：**

所以在我的情况下，这是因为在主托管对象上下文中对这个特定对象进行了更改。因为我们有一个 Core Data Watcher 类正在运行（监听上下文保存通知），所以我需要在合并新的 MOC 之前保存对该 MOC 的所有更改，以便正确记录用户更改。我*是*在 mergeChangesFromContextDidSaveNotification 调用之前的 NSManagedObjectContextDidSaveNotification 块中执行此保存，这为时已晚，无法停止冲突。通过将其移动到 NSManagedObjectContextWillSaveNotification 中，mainMOC 将其更改保存到持久存储，观察者注册这些更改，然后辅助存储可以自由尝试将其更改合并到 mainMOC 中，而不必担心与后者可能已经排队的更改发生冲突向上。

作为对此的警告，我必须确保在获取对象以更新传入同步上下文之前，我已保存对主上下文中这些对象的任何未决更改。最终结果证明我在保存对象之前对其进行了快照，因此我在一个上下文中所做的更改与在另一个上下文中准备的更改不同步。虽然我仍然不清楚合并为什么会以这种方式发生，但通过确保在尝试更改对象并将其重新合并之前我拥有对象的最新版本，合并错误消失了，合并过程按需要继续。

# sql - 将 XML 存储在 SQL 数据库记录或 XML 文件中更有效吗？

> ID：12463364
> 
> 赞同：0
> 
> 时间：2012-09-17T16:23:33.227
> 
> 标签：sql, xml

存储 XML 文件路径并通过数据库引用它们或直接将 XML 放入它自己的数据库记录中是否更有效？

提前感谢您的建议。

这是我的场景。我正在使用 ac# Windows 应用程序中的代码创建一个 CE Sql 服务器数据库。这是一个梦幻足球应用程序。当用户选择一名球员时，它会将一个包含 player_id 和信息的节点添加到球队的 XML。

UserTeam 表看起来像这样..

(UserTeam_ID、User_ID、xml_team_data)

当我说高效时，我想我的意思是更好的做法。更少的代码，更好的加载时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T16:27:47.403

SQL（至少是 SQL Server）会将 XML 文件存储为 blob，因此是二进制格式。显然，您可以对存储在那里的 XML 进行操作，请查看评论中的链接。

如果您不打算从数据库内部访问 XML 部分，最好将文件单独保存在文件系统上，然后从数据库中指向它们。如果您稍后决定使用像 Azure 这样的基于云的系统，您将按数据库大小付费，并且您不希望它太大。

# css - 使用 twitter-bootstrap 沿列对齐缩略图

> ID：12463367
> 
> 赞同：1
> 
> 时间：2012-09-17T16:23:35.647
> 
> 标签：css, twitter-bootstrap

我一直在玩 twitter-bootstrap 来创建我的摄影页面。我使用 li 标签中的默认缩略图类来创建边框并对齐它们。我有一大堆带有水平和垂直图像的缩略图。

默认设置确实不会创建漂亮的缩略图布局。通过在缩略图的 CSS 中添加固定高度，现在至少形成了一个整洁的网格。但是，在缩略图块中，图像始终与顶部对齐。当堆栈中有垂直图像时，这会导致形状奇特的网格。

我尝试添加“垂直对齐：中间；” 在缩略图类中，但似乎没有工作。我对 CSS 很陌生，如果我遗漏了一些非常明显的东西，请原谅我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T16:32:05.217

不幸的是，Bootstrap 缩略图并没有真正针对固定高度进行标准化。如果要确保网格干净，则需要将图像裁剪为相同大小。或者，您可以使用自己的一些 CSS 手动设置高度并将最大`li`高度设置`img`为 100%，然后`display: table-cell`在.`li``vertical-align: middle``img`

# python - 计算大于 X 的第一个生成器结果的优雅方法

> ID：12463375
> 
> 赞同：2
> 
> 时间：2012-09-17T16:24:05.423
> 
> 标签：python, generator

我有一个生成器，想找出它生成的第一个值大于 X。一种方法如下，但它似乎相当冗长（它读起来就像它在重复自己）。

```
def long_winded(gen,X)
    n = next(gen)
    while n < X: n=next(gen)
    return n 
```

我想写的是更简单的东西：

```
short_broken(gen,X):
    while next(gen)<X: pass
    return next(gen)            # returns the SECOND value larger than X, as gen is called again
short_broken2(gen,X):
    while n = next(gen)<X: pass # Not python syntax!
    return n 
```

有没有一种简洁的方式来返回相同的结果？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-17T16:26:38.193

```
from itertools import dropwhile

def first_result_larger_than_x(gen, X):
    return next(dropwhile(lambda n: n <= X, gen)) 
```

请注意，您来自 OP 的代码示例实际上返回了大于*或等于*X 的第一个结果。我已在此代码示例中更正了这一点，但如果这是您真正想要的，`<=`请将`<`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-17T16:27:02.490

```
def short2(gen,X):
    for x in gen:
        if x > X: 
            return x 
```

或作为 1-liner（我更喜欢 itertools 变体）：

```
def short3(gen,X):
    return next(x for x in gen if x > X) 
```

* * *

*我原来的答案——只为后代留下*

我不一定断言这种方法更好，但您可以使用递归函数：

```
def short(gen,X):
    n = next(gen)
    return n if n>X else short(gen,X) 
```

# php - 使用 HTML5 本地存储镜像 MySQL 数据库模式以进行查询

> ID：12463383
> 
> 赞同：3
> 
> 时间：2012-09-17T16:24:23.123
> 
> 标签：php, mysql, html, local-storage, abstraction

我已经对 HTML5 本地存储进行了一些研究，并且似乎可以镜像 MySQL 数据库的结构以用于仅需要一个人的大量数据的应用程序中。

我为什么要这样做？在业余时间，我是一名网页游戏开发人员：PHP、MySQL 以及所有修饰它的技术。到目前为止，我已经建立了支持许多玩家的数据库，但我的游戏旨在成为“具有多种功能的单人游戏”。而对于那些只打算单人玩的游戏，除非它们保存到网络服务器，否则即使有数据库连接也是没有意义的！

我想实现一个永远不会触及我的数据库的单人游戏模式，并且可以离线使用。然而，所有这一切背后的代码仍然是进行 SQL 查询。理想情况下，我想我可以设置一种本地存储的抽象层来响应查询。

简而言之，我想知道那里有什么。搜索本地存储和 HTML5 将为您提供关于这些技术的无穷无尽的帖子，但我不确定我的想法是否会奏效，甚至是否应该尝试。同样，可能已经有框架可以轻松处理这个问题。我还什么都没发现。

**更新：** Web SQL 数据库的弃用让我担心。它看起来对我的情况很有吸引力；因为它使用 SQL，所以修改我的查询应该不会那么困难。现在随着对 IndexedDB 的推动，我不确定它是否会那么容易。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T18:09:41.317

我已经读过你的问题几次，并继续想知道“你为什么要这样做”;-) 这个问题给我带来了更多的问题，所以......

“大量数据”是什么意思？归根结底，在这种情况下使用 sql 比喻合适吗？可以响应“类 sql”查询的抽象层本身很有趣，但听起来非常复杂。一个更简单的解决方案可以完成这项工作，比如 JSON 对象吗？在用户清理缓存、历史记录、重新安装浏览器等情况下如何持久化数据？即使是复杂的 javascript 文字或 JSON 对象也可以提供非常直接的方法来偶尔进行持久性/备份和恢复。（有趣的是，刚刚发布的 PostgreSql 9.2 包含 JSON 作为数据类型。难道 SQL 和 NoSql 会倾向于某些共同点吗？）抱歉，如果这更像是评论而不是答案，那么您的问题就会出现在更高的平面。

**编辑**

谷歌搜索'javascript sql解释器'会发现一些有趣的东西：

[http://www.terminally-incoherent.com/blog/2009/05/19/sql-emulation-tool-in-javascript-part-2/#comments](http://www.terminally-incoherent.com/blog/2009/05/19/sql-emulation-tool-in-javascript-part-2/#comments)

[https://github.com/forward/sql-parser#readme](https://github.com/forward/sql-parser#readme)

[为 SQLite3 生成 JavaScript SQL 解析器（使用 Lemon？ANTLR3？）](https://stackoverflow.com/questions/11828627/generating-a-javascript-sql-parser-for-sqlite3-with-lemon-antlr3)

[http://jsdb.sourceforge.net/demo.html](http://jsdb.sourceforge.net/demo.html)

# c++ - c++ 中 MFC 函数的替代方案？

> ID：12463386
> 
> 赞同：-1
> 
> 时间：2012-09-17T16:24:31.507
> 
> 标签：c++, winapi, mfc, atl

C++ 中 MFC AfxIsValidAddress 的替代方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T16:40:38.630

该功能实际上并没有按照它所说的那样做......

它说它检查内存范围以查看它是否映射到进程的空间地址。但实际上，在大多数版本的库中，它只是检查 NULL 值。

理由似乎是在旧版本的 Windows 中，它依赖于[IsBadReadPtr()](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366713%28v=vs.85%29.aspx)和朋友。但是这些功能完全过时了，不应该在较新的代码中使用（根据 MSDN），因此行为发生了变化。

也就是说，如果您想真正检查内存范围，最好的选择是[VirtualQuery()](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366902%28v=vs.85%29.aspx)。

# ruby-on-rails-3 - Rails 3 after_save 旧值

> ID：12463387
> 
> 赞同：2
> 
> 时间：2012-09-17T16:24:31.633
> 
> 标签：ruby-on-rails-3, activerecord

您如何处理正在更新的记录的旧值？

例如，在以下代码块中，在我确定它确实已更改后，我将如何使用先前的 Winner_id 字段运行查询？

```
if self.winner_id_changed?
   old_value = self.changed_attributes
   User.find(old_value)
   #do stuff with the old winner....
end 
```

的示例输出`self.changed_attributes`将是：

> {"winner_id"=>6}

我真的必须将其转换为字符串并解析出值才能对其执行查询吗？`old_value[:winner_id]`似乎什么也没做。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-17T16:27:05.733

使用 where 而不是 find，并在更改时使用以下注入方法来生成所需的哈希：

```
if self.winner_id_changed?
   old_value = self.changes.inject({}) { |h, (k,v)| h[k] = v.first }
   old_user = User.where(old_value)
   #do stuff with the old user....
end 
```

您还可以使用 ActiveRecord 脏方法，例如：

```
self.winner_id_was 
```

获取特定属性的旧值。完整的文档可以在[这里](http://api.rubyonrails.org/classes/ActiveModel/Dirty.html)找到。

# php - SVG - 围绕图像的矩形

> ID：12463389
> 
> 赞同：1
> 
> 时间：2012-09-17T16:24:46.997
> 
> 标签：php, svg

我是 SVG 的新手，我需要解决一些问题。

我有一个 php`for`循环，它生成一个带有图像的圆圈，其名称就在它们的正下方。每个图像周围都有一个矩形。矩形围绕圆圈生成。

我需要将图像居中在矩形内并让名称出现，因为现在它们已插入但不可见。

```
for($i=0;$i<$count;$i++) {
    $x = ($x_inicial+($raio*cos(deg2rad($teta)))) ;
    $y = ($y_inicial+($raio*sin(deg2rad($teta)))) ;
    $string .= '<line x1="'.($x_inicial+($tam/2)).'" y1="'.($y_inicial+($tam/2)).'" x2="'.($x+($tam/2)).'" y2="'.($y+($tam/2)).'"  style="stroke:#045f89;stroke-width:3"/>
           <a xlink:href="'.URL.'empresa/perfil/'.$empresas[$i]['slug'].'" >
           <rect width="'.($tam*1.4).'px"  height="'.($tam*1.4).'px" x="'.$x.'" y="'.$y.'" style="stroke:gray;stroke-width:1;fill-opacity:0;stroke-opacity:1"/>
           <image nome="'.$empresas[$i]['nome'].'" x="'.$x.'" y="'.$y.'" width="'.$tam.'px" height="'.$tam.'px" xlink:href="'.URL.$empresas[$i]['foto'].'_thumb'.$empresas[$i]['extensao'].'" class="redondo" />
            '.$empresas[$i]['nome'].'</a>';
    $teta = $teta + $razao;
} 
```

# wordpress - 为 RSS 添加前缀 Wordpress 自定义帖子标题

> ID：12463392
> 
> 赞同：1
> 
> 时间：2012-09-17T16:24:57.210
> 
> 标签：wordpress, rss, title, custom-post-type

是否可以为自定义帖子 wordpress 标题添加前缀，以便它出现在 RSS 提要和其他共享媒体上？

例如：

自定义帖子类型 = 产品标题 = 新茶杯

输出 = 产品 - 一个新茶杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T16:34:27.307

如果不是，请尝试过滤`the_title_rss`并添加自定义帖子类型`post`：

```
function rss_cpt_title($title) {
    global $post;
    $post_type = get_post_type($post->ID);
    if ($post_type != 'post'){
        $title = $post_type . ' - ' . $title;
    }
    return $title;
}
add_filter('the_title_rss', 'rss_cpt_title'); 
```

您可能需要摆弄条件，因为 get_post_type 可能会返回一个 slug，并且它可能区分大小写。

# c++ - 64 位 G++ 4.6.3 不会将 long 视为专用函数模板中的 long long，即使它们的大小相同。这是一个错误吗？

> ID：12463402
> 
> 赞同：1
> 
> 时间：2012-09-17T16:25:26.843
> 
> 标签：c++, g++, template-specialization, function-templates, long-long

考虑以下代码：

```
#include <iostream>
#include <cinttypes>  

template<class T>
void f();

template<>
inline void f<long long>() {
  std::cout<<"f<long long>()"<<std::endl;
}

int main(int , char** ) {
  std::cout<<"sizeof(long)="<<sizeof(long)<<std::endl;
  std::cout<<"sizeof(long long)="<<sizeof(long long)<<std::endl;
  f<int64_t>();
  return 0;
} 
```

32 位 G++ 4.6.3 编译成功并产生输出：

```
sizeof(long)=4
sizeof(long long)=8
f<long long>() 
```

但是，在 64 位 G++ 4.6.3 下编译会产生链接器错误：

```
undefined reference to `void f<long>()'
ld returned 1 exit status 
```

即使使用`f<int64_t>()`注释掉的行编译和运行会产生：

```
sizeof(long)=8
sizeof(long long)=8 
```

是否有充分的理由为什么 64 位 G++ 将`f<long>`和`f<long long>`视为不同的函数，即使`long`和`long long`大小相同，或者这是我应该报告的错误？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-17T16:31:06.753

的基础类型`int64_t`可以是任何满足要求的东西。`long`在一个平台和另一个平台上制作它是可以的`long long`。

由于您提供了一个专业化`long long`并且通用版本没有主体，如果`int64_t`不是 a`long long`您将获得未定义的引用。

是的，有一个很好的理由为什么`f<long>`和`f<long long>`是不同的功能：这是因为标准这么说`long`并且`long long`是不同的类型。它们在某些平台上恰好具有相同宽度的事实并不重要，特别是因为它们在另一个平台上可能具有不同的宽度。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-17T16:30:58.320

它们是不同的类型，因此必须区别对待。类型的大小不影响重载或模板选择。

您的问题可能`int64_t`是`long`在一个系统`long long`上和另一个系统上。在将 typedef 与重载或模板结合使用时，这是一个问题。

# c - c中的奇怪行为

> ID：12463405
> 
> 赞同：1
> 
> 时间：2012-09-17T16:25:34.173
> 
> 标签：c, arrays, pointers

> **可能重复：**
> [可以在其范围之外访问局部变量的内存吗？](https://stackoverflow.com/questions/6441218/can-a-local-variables-memory-be-accessed-outside-its-scope)

我最近遇到了以下代码：

```
#include <stdio.h>

int* abc () {
   int a[3] = {1,10,100};
   return a;
}
int* xyz () {
   int b[1] = {222};
   return b;
}
int main() {
   int *a, *b;
   a = abc();
   b = xyz();
   printf("%d\n", *a);
   return 0;
} 
```

输出是`222`。`'a'`指向在`xyz()`.

我的问题是：

1.  为什么 a 指向里面声明的数组`xyz()`。

2.  函数内部声明的数组`xyz()`应该在函数执行后超出范围。为什么那没有发生？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-17T16:28:35.593

2：它*正在*发生，整个程序有**未定义的行为**。这不是一个正确的程序，考虑 if 和 but 没有什么意义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T16:27:15.213

您可能会看到*222*，因为用于本地数组 in 的内存`abc`已用于其他用途 - 函数的堆栈`xyz`。你正在传递一个地址到那个内存。再做几个函数调用，`*a`可能包含一些其他值。

> 函数执行后应该超出范围。为什么那没有发生？

变量*已*超出范围。在函数外部使用该地址是不正确的代码：使用指向从函数返回的本地数据的指针是未定义的行为。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-17T16:27:46.733

变量`a`和`b`是自动变量；在其他函数中使用它们的地址是一种未定义的行为。任何事情都可能发生：你不能期望输出（*例如*，优化编译器可以删除一些非法代码）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-17T16:34:22.570

要返回指针，它必须是指向动态分配变量或静态或全局变量的指针。

返回指向堆栈变量的指针将导致您拥有指向堆栈的指针，当您调用新方法时该指针将被重用。

在您的情况下，将堆栈变量重用于另一个数组并覆盖调用第一个方法时存储的旧值。

尝试`printf`再次调用您将看到不同的输出，因为第一次调用 printf 更改了堆栈内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-17T16:29:00.803

> 为什么那没有发生？

它确实发生了，只是形式上的。未定义的行为**没有义务崩溃或行为不端**——它们“任何事情都可能发生”意味着它也可以看似没有任何错误地运行。[我刚刚回答了一个类似的问题。](https://stackoverflow.com/questions/12463241/not-null-terminating-a-c-style-string/12463277#12463277)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-17T16:29:51.443

函数`abc`和`xyz`每个都将地址传回给*本地*创建的数组。随后的调用正在混合先前使用的内存（并传回给您）。

这些被称为自动局部变量。

您需要将这些数组声明为静态或以不同的方式分配内存。

# java - 如何在控制器之间传递 ModelAttribute？

> ID：12463409
> 
> 赞同：1
> 
> 时间：2012-09-17T16:25:51.350
> 
> 标签：java, spring, modelattribute

我正在尝试创建一个具有 2 个功能的主页：

1.  登录
2.  报名

我将每个请求映射到不同的控制器并尝试将结果返回到我的`home.jsp`. 但是我`ModelAttribute`在控制器之间只能传递某些特定的东西时遇到了麻烦。更具体地说，我无法将我对一个控制器所做的更改`ModelMap`反映`BindingResult`在其他控制器中。

我确定我所做的事情*基本上*有问题。请帮忙。

我的`home.jsp`. 一个用于登录：

```
<form:form name="loginForm" modelAttribute="loginUser" action="login" method="post">

    Email: <form:input name="loginEmail" id="loginEmail" value="" path="email"/>
    <form:errors path="email" cssClass="error" />
    <br/>

    password: <form:password name="loginPassword" Id="loginPassword" value="" path="password" />
    <form:errors path="password" />
    <br/>

    <input type="submit" id="id_login" value="Login">

</form:form> 
```

另一个用于注册：

```
<form:form name="SignUpForm" modelAttribute="signUpUser" action="signup" method="post">

    Full Name: <form:input name="name" id="name" value=""   path="name"/>
    <form:errors path="name" cssClass="error" />
    <br/>

    Email: <form:input name="signupEmail" id="signupEmail" value="" path="email"/>
    <form:errors path="email" cssClass="error" />
    <br/>

    password: <form:password name="signUpPassword" Id="signUpPassword" value="" path="password" />
    <form:errors path="password" />

    <input type="submit" id="id_signUp" value="Sign Up">

</form:form> 
```

我有 3 个控制器`HomeController.java`：

```
@RequestMapping("/home")
public String showHome(ModelMap model,
        @ModelAttribute("loginUser") User loginUser,
        BindingResult loginResult,
        @ModelAttribute("signUpUser") User signUpUser,
        BindingResult signUpResult) {
    return "home";
} 
```

`AuthenticationController.java`：

```
@RequestMapping("/login")
public String login(@ModelAttribute("loginUser") User user,
        BindingResult result, ModelMap model, HttpServletRequest request,
        HttpServletResponse response) {

    loginFormValidator.validate(user, result);

    if(Errors in `result`)
        return "forward:/home";

    // Authentication Logic
    request.getSession().setAttribute("s_user_obj", some_variable);
    return "forward:/home";

} 
```

和`ProfileController.java`：

```
@RequestMapping("/signup")
public String signUpUser(@ModelAttribute("signUpUser") User user,
        BindingResult result, ModelMap model) {
// Do stuff related to Sign Up
// Forward to home.jsp
    } 
```

当请求转发到 时`/home`，我在`loginUser`和中得到相同的值`signUpUser`。更糟糕的是，没有错误，即`result`变量没有反映以前控制器中的错误。

我确信有更好的方法可以做到这一点，这是新手的尝试。请指教。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T18:13:12.237

我在这里看到的问题是Spring 为方法解释的方式`@ModelAttribute("loginUser")`-`@ModelAttribute("signUpUser")`这是一些参考 - [http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc。 html#mvc-ann-modelattrib-method-args](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html#mvc-ann-modelattrib-method-args)

参数是从模型中检索的（并在必要时实例化），但问题在于它们是根据请求参数重新填充的，这最终会以相同的方式填充您的两个属性。我能想到的唯一解决方法是在您的方法中自己显式检索模型属性：

```
@RequestMapping("/home")
public String showHome(ModelMap model) {
    model.get("loginUser");...
    model.get("signUpUser");...
    return "home";
} 
```

**更新**

根据您的评论，让我推荐一个替代流程和更明确的流程：

有一个方法可以这样设置你的 loginUser 和 signUpUser 模型属性：

```
private void populateAttributes(Model model, User loginUser, User signupUser){
    if (loginUser==null) loginUser = new User();
    if (singupUser==null) singupUser = new User();
    model.addAttribute("loginUser", loginUser);
    model.addAttribute("signupUser", signupUser);
} 
```

现在在您的登录流程中：

```
@RequestMapping("/login")
public String login(User user,
    BindingResult result, Model model, HttpServletRequest request,
    HttpServletResponse response) {

loginFormValidator.validate(user, result);

if(Errors in `result`)
    populateAttributes(user, null);
    return "home";

// Authentication Logic
request.getSession().setAttribute("s_user_obj", some_variable);
populateAttributes(model, user, null);
return "home"; 
```

}

您注册中的类似流程：

```
@RequestMapping("/signup")
public String signUpUser(User user,
    BindingResult result, Model model) {
    populateAttributes(model, null, user);
    return "home"
} 
```

和showHome：

```
@RequestMapping("/home")
public String showHome(Model model,) {
    populateAttributes(model, null, null);
    return "home";
} 
```

# php - codeigniter 2.0一次在两个表中插入记录

> ID：12463417
> 
> 赞同：3
> 
> 时间：2012-09-17T16:26:25.453
> 
> 标签：php, mysql, codeigniter

我不确定如何使用活动记录或使用手动 sql 来处理这个问题。我想要做的是将记录添加到具有自动递增 id 的“联系人”表中，然后将具有相应“联系人”记录 id 的 id 的记录添加到“订单”表中。

我知道我可以使用 $this->db->insert_id() 获取插入的联系人记录的 ID，但这仅在使用活动记录时有效吗？

另外，我可以在一个查询中实现这种类型的插入，还是必须将其分成两部分？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T17:18:56.710

`$this->db`不指 Active Record。你必须选择使用Active Record，`$this->db`简单地指数据库抽象层。

也就是说，您可以`$this->db->insert_id()`在查询后立即使用（无论是否为 Active Record）来获取其插入 ID。

但是为了处理一次插入多个依赖于彼此 ID 的记录，我会切换到 InnoDB 作为您的表类型（如果您还没有的话）并使用 CodeIgniter 的[transactions](http://codeigniter.com/user_guide/database/transactions.html)。

这是一个示例，改编自 CodeIgniter 的文档：

```
$this->db->trans_start();

$this->db->query('INSERT INTO table1 VALUES(id,field1,field2)');
$table1_id = $this->db->insert_id();

$this->db->query('INSERT INTO table2 VALUES(id,' . $table1_id . ',field2,field3)');

$this->db->trans_complete(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T16:33:55.493

根据 Codeigniter 的说法，它`$this->db`被命名为“Active Record”[原文如此！] 所以你已经用这些术语回答了你自己的问题。*否则，您需要通过编写"Active Record"*来实际指定您的意思。

在 PHP 中，Mysqli 扩展提供了一次运行多个查询：[`mysqli::multi_query`^(*Docs*)](http://php.net/manual/de/mysqli.multi-query.php)。

最后一个插入 ID 函数也存在于 Mysql 本身中，可以在任何 SQL 查询中使用，它被称为[`LAST_INSERT_ID()`^(*Mysql Docs*)](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_last-insert-id)。

```
INSERT INTO contact;
INSERT INTO order SET contact_ID = LAST_INSERT_ID(); 
```

也许这就是您正在寻找的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-22T00:08:57.567

附加信息

**不要忘记检查交易是否成功：**

```
$this->db->trans_complete();

    if($this->db->trans_status() === FALSE){// Check Transaction Result successful                          
         echo "<br>------- INFO WAS >>>>>>> NOT INSERTED <<<<<<< -------<br>";
    }else{
         echo "<br>------- >>>>>>> TRANSACTION SUCCESSFUL <<<<<<< -------<br>";
    } 
```

# c# - 如何复制 .NET 面板的内容

> ID：12463419
> 
> 赞同：-1
> 
> 时间：2012-09-17T16:26:33.707
> 
> 标签：c#, forms, panel, draw

我有`System.Windows.Forms.Panel`一个`System.Windows.Forms.Form`。在面板中，我用`myGraphic.DrawLine(myPen, myMouseDownPoint, myMouseUpPoint)`. 到目前为止它工作正常。

现在我想在另一个中显示面板的内容`System.Windows.Forms.Panel`。但这不起作用。

我尝试的是：

```
this.panel1 = MyForm1.panel1;
this.panel1.Refresh(); 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T16:44:22.917

1.  您将无法将完全相同的`Panel`实例添加到多个表单中。它们被设计成一个，而且只有一个，`Form`。
2.  您没有从其他表单正确访问面板；它不是（无论如何我希望）静态的，并且您没有其他形式的实例。

最好是制作一个实用函数来生成 a `Panel`，并且两个`Form`实例都可以调用该实用方法。

```
public static class UtilityMethods
{
    public static Panel CreatePanel()
    {
        Panel panel = new Panel();
        //do stuff to panel, draw your lines, etc.
        return panel
    }
} 
```

这里有两个重要的点。第一个是每次调用该方法时都会创建一个新面板。如果每个`Form`人调用该方法，将有两个单独的面板，而不是一个共享面板。此外，两者都不`Form`需要访问另一个（从设计的角度来看，它们听起来不应该是这样）。对他们来说，调用一些第 3 方来完成这项工作更具架构意义。

# symfony - 在学说和 symfony 2 中创建枚举和浮点数据类型

> ID：12463423
> 
> 赞同：1
> 
> 时间：2012-09-17T16:26:45.727
> 
> 标签：symfony, doctrine

我正在使用带有教义的 symfony 2。Doctrine 似乎没有枚举数据类型。

我的第一个问题是如何设置枚举数据类型，以便在从实体创建实际表时，具有此枚举数据类型的列也反映在表结构中。

Doctrine 支持浮点数据类型，但如何将数据类型设置为 float(10,2)。我尝试在我的 yaml 元数据中进行以下操作：

```
weight:
  type: float
  scale: 2 
```

这对我不起作用。我阅读了文档并说它需要 setLocale 才能进行缩放。如何在 symfony 2 中解决这个问题？

# javascript - 如何在页面开始加载之前将参数附加到 URL？

> ID：12463424
> 
> 赞同：0
> 
> 时间：2012-09-17T16:26:53.840
> 
> 标签：javascript, jquery, google-chrome, google-chrome-extension

在 Chrome 中，我希望在页面中检测 URL 将在`example.com`'s 域上，如果是，则在加载之前附加`foo=bar`为参数并加载它。

我发现当 Omnibar 在这里提交时我可以访问*，*[但](http://developer.chrome.com/extensions/omnibox.html#event-onInputEntered)它似乎无论如何都会加载原始 URL，虽然没关系，但它是我认为必要的带宽的两倍。只有一个页面时这不是问题，但这是需要在站点的每个页面上发生的更改，因此双倍带宽肯定会成为问题。

 *目前，它可以检测 URL 是否将`example.com`被提交，然后调用`window.stop()`然后设置`location.href`为，`example.com/&?foo=bar`但这似乎并不理想。

简而言之，用户在加载原始链接之前转到`http://www.example.com`然后脚本将其更改为。`http://www.example.com/&?foo=bar`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T03:59:52.867

查看[chrome.webRequest](http://developer.chrome.com/extensions/webRequest.html) API，特别是以下方法：

> onBeforeRequest（可选同步）
> 
> 当请求即将发生时触发。此事件在建立任何 TCP 连接之前发送，可用于取消或重定向请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T16:33:52.977

您可以使用

```
window.location.search = "foo=bar" 
```

可能这有帮助。*

# vb.net - VB.NET 检查表单是否聚焦

> ID：12463425
> 
> 赞同：0
> 
> 时间：2012-09-17T16:26:56.093
> 
> 标签：vb.net, focus

我似乎在任何地方都找不到这个看似简单的问题的答案 D：

我想检测一个窗体/窗口是否有焦点，以便我只能闪烁窗口如果没有焦点，这是代码的一部分：

```
If Me.Focused = False Then ' Doesn't work D: please fix
    Dim flash As New FLASHWINFO
    flash.cbSize = System.Runtime.InteropServices.Marshal.SizeOf(flash) '/// size of structure in bytes
    flash.hwnd = MyBase.Handle '/// Handle to the window to be flashed
    flash.dwFlags = FLASHW_ALL '/// to flash both the caption bar + the tray
    flash.uCount = 5 '/// the number of flashes
    flash.dwTimeout = 1000 '/// speed of flashes in MilliSeconds ( can be left out )
    '/// flash the window you have specified the handle for...
    FlashWindowEx(flash)
End If 
```

有没有一种简单的方法来完成这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T06:44:44.490

```
 Private Sub Form1_LostFocus(sender As Object, e As System.EventArgs) Handles Me.LostFocus
    Dim flash As New FLASHWINFO
    flash.cbSize = System.Runtime.InteropServices.Marshal.SizeOf(flash) '/// size of structure in bytes
    flash.hwnd = MyBase.Handle '/// Handle to the window to be flashed
    flash.dwFlags = FLASHW_ALL '/// to flash both the caption bar + the tray
    flash.uCount = 5 '/// the number of flashes
    flash.dwTimeout = 1000 '/// speed of flashes in MilliSeconds ( can be left out )
    '/// flash the window you have specified the handle for...
    FlashWindowEx(flash)

  End Sub 
```

# java - 了解可重入锁和线程基础

> ID：12463427
> 
> 赞同：0
> 
> 时间：2012-09-17T16:26:59.487
> 
> 标签：java

我正在尝试使用线程编写一个基本程序。假设我有两个线程，t1 和 t2 并锁定 x。假设锁 x 分配给 t1。什么时候会因为锁 x 被分配给 t1 而导致 t2 无法处理？我正在尝试创建一个简单的示例来演示锁/线程是如何工作的。

我很感激在这件事上的任何帮助。

这是我到目前为止得到的：

天行者级：

```
import java.util.*;
import java.util.concurrent.locks.Lock;
import java.util.concurrent.locks.ReentrantLock;

public class Skywalker{
    public static void main(String args[]){
        Thread t1 = new Thread("station 1");
        Thread t2 = new Thread("station 2");

        t1.start();
        t2.start();
    }
} 
```

达斯班：

```
import java.util.Random;
import java.util.concurrent.locks.Lock;
import java.util.concurrent.locks.ReentrantLock;

public class Darth implements Runnable{
    String stationName;
    Lock x = new ReentrantLock();
    Random r = new Random();

    public Darth(String name){
        stationName = name;
    }

    public void run(){
        try{
            x.lock();
            System.out.println(stationName + "is working");
            sleep(randomTime);
            x.unlock();

        } catch(Exception e) {
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T21:41:03.990

您应该将锁放在一个类中以保护“资源访问”，例如：

```
class SharedResource {
    private static Lock lock = new ReentrantLock();

    public static void consumeResource(){
        try{
            lock.lock();
            //just one thread a time here
            int i = 10;
            //mock consuming shared resource:
            while(i>0){
                i--;
                System.out.println(Thread.currentThread().getName() + " is in");
                Thread.sleep(1000);
            }  
        }finally{
            lock.unlock();
        }
    }
 } 
```

现在，一次只有一个线程能够访问锁定/解锁语句中的 consumeResource 方法中的代码行。很容易证明从 Darth run 方法调用 consumeResource。

# ajax - ExtJs 4.1：如何使用 Ext.Ajax.request() 在请求正文中发送 json 数据？

> ID：12463442
> 
> 赞同：10
> 
> 时间：2012-09-17T16:27:56.780
> 
> 标签：ajax, extjs, request, extjs4.1

我想发送 json 数据，`Ext.Ajax.request()`然后在 ASP.NET 中使用`Request.InputStream`请求正文的内容访问它。我需要一种方法来告诉 ExtJs 将数据写入请求正文中，因为它是在使用`Ext.data.proxy.Ajax`.

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-17T17:04:01.527

指定`POST`方法并仅使用请求的`jsonData`配置：

```
Ext.Ajax.request({
    url: 'myUrl',
    method: 'POST',
    params: {
        requestParam: 'notInRequestBody'
    },
    jsonData: 'thisIsInRequestBody',
    success: function() {
        console.log('success');
    },
    failure: function() {
        console.log('woops');
    }
}); 
```

如果您想要以 JSON 形式编写的*记录*，您也可以使用这样的 JSON 编写器。

```
var writer = Ext.create('Ext.data.writer.Json'),
    record = Ext.getStore('SomeStoreID').first();

Ext.Ajax.request({
    url: 'myUrl',
    method: 'POST',
    params: {
        requestParam: 'notInRequestBody'
    },
    jsonData: writer.getRecordData(record),
    success: function() {
        console.log('success');
    },
    failure: function() {
        console.log('woops');
    }
}); 
```

# objective-c - UIImage imageNamed 不使用 xcode 4.4 显示图像

> ID：12463445
> 
> 赞同：3
> 
> 时间：2012-09-17T16:28:00.773
> 
> 标签：objective-c, nsstring, uiimageview, uiimage, xcode4.4

我一直坚持将 UIImage 添加到我的 iPhone 应用程序中，要添加图像，我通常使用图像的名称并将其放置如下： `UIImage* myImage1 = [UIImage imageNamed:@"myImage.png"];`

但是在我的应用程序中，当我编写代码时，我不知道图像的名称，我有一个带有 web 服务的图像名称，我把它放在一个 NSString 中。

所以我有一个字符串`m_image1`，我想像这样在 UIImage 中显示图像：

```
UIImage* myImage1 = [UIImage imageNamed:m_image1]; 
```

但是屏幕上什么也没有出现，当我`NSLog`用来显示它是否`m_image1`有正确的字符串时，当我将打印的内容粘贴到 imageNamed 的日志中时，它可以工作。

我已经尝试过使用我的应用程序的路径，但什么也没做！所以我不知道该尝试什么了！

这是我的所有代码块：

```
NSLog(@"m_image1 : %@",m_image1); 
UIImage* myImage1 = [UIImage imageNamed:m_image1]; 
m_result1ImageView = [[UIImageView alloc] initWithImage:myImage1]; 
m_result1ImageView.frame = CGRectMake(0.f, 0.f, 163.f, 260.f); 
[m_ScrollImages addSubview:m_result1ImageView]; 
```

一切正常，当我输入：

`UIImage* myImage1 = [UIImage imageNamed:@"myImage.png"];`

代替 ：

```
UIImage* myImage1 = [UIImage imageNamed:m_image1]; 
```

它显示图像！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T04:57:10.540

我认为您的图像不在资源中！

检查您的图像：转到`Project Navigator`并单击您的项目的蓝色图标。现在`Targets`单击您的目标并转到`Build phases`选项卡并检查`Copy bundle resources`。

您的图像文件必须在列表中，如果没有添加它并再次检查程序！

我希望它对你有用！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T04:32:19.263

试试这个代码，

```
m_result1ImageView.image=[UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString: m_image1]]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T05:30:22.950

我认为您没有完全复制未显示的应用程序包中的图像。

尝试并检查删除一堆图像并在您的项目中再次添加它们。

# httppostedfilebase - 在 SQL 中将 httppostedfilebase 保存为图像

> ID：12463450
> 
> 赞同：2
> 
> 时间：2012-09-17T16:28:17.083
> 
> 标签：httppostedfilebase

我有一种情况，我在我的 MVC 代码中获取了一个 httppostedfilebase 类型的图像。我的 SQL 数据库中有一个相应的图像类型列。

我需要知道如何在我的数据库中将此 httppostedfilebase 类型转换/保存为图像。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-01-07T11:53:24.100

创建一个函数将 HttpPostedFileBase 对象转换为文件

```
public byte[] ConvertToByte(HttpPostedFileBase file)
    {
        byte[] imageByte = null;
        BinaryReader rdr = new BinaryReader(file.InputStream);
        imageByte = rdr.ReadBytes((int)file.ContentLength);
        return imageByte;
    } 
```

在你的控制器中这样的代码

```
public ActionResult Create(AdminDetailsViewModel viewmodel)
    {
        if (ModelState.IsValid)
        {
        HttpPostedFileBase file = Request.Files["ImageData"];
        viewmodel.Image = ConvertToByte(file);
        db.YourDbContextSet.Add(viewmodel);
        db.SaveChanges();
        }
    } 
```

希望这会有所帮助

# iphone - Xcode我想将变量传递给方法

> ID：12463452
> 
> 赞同：-7
> 
> 时间：2012-09-17T16:28:27.827
> 
> 标签：iphone, objective-c, xcode, methods

```
-(void)end{
NSLog(@"End Called");

}    

UIImage *bPin = [UIImage imageNamed:@"BluePin.png"];
        UIImage *gPin = [UIImage imageNamed:@"GreenPin.png"];
        UIImage *rPin = [UIImage imageNamed:@"RedPin.png"];
        UIImage *yPin = [UIImage imageNamed:@"YellowPin.png"];
        UIImageView *image = [[UIImageView alloc]initWithFrame:CGRectMake(0,0,bPin.size.width,bPin.size.height)];
        image.animationImages = [NSArray arrayWithObjects:
                                 bPin,
                                 rPin,
                                 gPin,
                                 yPin,
                                 nil];

        image.animationRepeatCount = 0;
        image.animationDuration = 1.0;
        [image startAnimating];

        [image setFrame: CGRectMake(point.x-(image.bounds.size.width/2), point.y-(image.bounds.size.width/2), image.bounds.size.width, image.bounds.size.height)];
        [self.view addSubview: image];

        [UIView animateWithDuration:2.0 delay:1.0 options:UIViewAnimationOptionCurveLinear  animations:^{
            [image setAlpha:0.0];
        } completion:^(BOOL finished) {
            [image removeFromSuperview];

        }]; 
```

我想将图像发送到 void end 方法，但我该怎么做？我需要在那里结束它以便为某个图像设置动画......我该如何发送它？？？？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T16:31:02.750

我没有看到问题是什么（也没有看到这个问题与 Xcode 有什么关系），为什么不简单地

```
- (void)end:(UIImage *)img
{
    // do stuff
} 
```

并称它为

```
[self end:imageView.image]; 
```

?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T16:33:11.410

将您的结束方法更新为这样

```
- (void) end:(UIImageView *)imageToAnimate {
     NSLog(@"end called");
} 
```

然后调用它：

```
[self end:image]; 
```

# c# - Winform 应用程序中的 UI 控件在从 VB Access 调用时丢失了 Tab 键顺序

> ID：12463454
> 
> 赞同：1
> 
> 时间：2012-09-17T16:28:28.147
> 
> 标签：c#, winforms

我已将 C# .NET Winform GUI 应用程序作为组件库 (dll) 添加到具有多个 C# 项目的现有解决方案中，这些都是 Winfroms dll 库。使用测试项目测试应用程序效果很好，所有选项卡顺序都按预期运行。解决方案中有一个接口，允许从 VB Access 调用解决方案中的组件。奇怪的问题是当从 VB Access 调用 Winform 时，选项卡顺序丢失了。使用解决方案中的测试项目启动时，完全相同的应用程序可以完美运行。使用进程启动时，相同的 Winform 应用程序也可以工作。

由于退出部署，我需要使用退出互操作调用从 VB Access 调用 Winform 应用程序/组件，并且不明白为什么选项卡顺序丢失。除了标签顺序之外，其他一切都很好。选项卡订单定义没有问题，因为我已经使用测试应用程序对其进行了验证，并使用过程调用启动了它。该问题似乎仅与从 VB Access 调用有关，我无法找到有关此问题的任何内容。

# javascript - IE 与其他浏览器 offsetHeight 和 scrollHeight

> ID：12463455
> 
> 赞同：3
> 
> 时间：2012-09-17T16:28:31.453
> 
> 标签：javascript, css, scroll, overflow, frame

所以我有一个调整大小的处理程序，它根据右侧是否有滚动（溢出与不溢出）来调整一些列标题的大小，以调整间距以考虑滚动。当我改变框架的大小以使框架溢出而不是溢出时，调整大小起作用。但是，当我以某种不影响帧大小的方式修改列时，我仍然需要调整大小，但调整大小会出错。这是我拥有的调整大小片段的伪代码。

```
if (display != "none") {
    if (frame.offsetHeight >= frame.scrollHeight) {
        display = "none"
    }
} else {
    if (frame.offsetHeight < frame.scrollHeight) {
        display = ""
    }
} 
```

所以问题是，当帧大小没有改变时调用resize处理程序时，在FF、Chrome和Safari中，scrollHeight比1大`frame.offsetHeight`（即如果`offsetHeight`是100px，`scrollHeight`实际上是101px）但在IE中，offsetHeight和 scrollHeight 是相同的，`display == ""`从而使条件何时`frame.offsetHeight < frame.scrollHeight`失败。IE 和其他浏览器的这些属性处理方式是否不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-13T23:11:11.570

你有没有试过做得到`frame.contentWindow.document.body.offsetHeight`高度？内容的高度，而不是 iFrame 标签会更好地解决这个问题。

# ruby-on-rails - 如何为派生的 ActiveRecord 模型设置 i18n 翻译？

> ID：12463457
> 
> 赞同：1
> 
> 时间：2012-09-17T16:28:54.577
> 
> 标签：ruby-on-rails, activerecord, internationalization

我有以下三个模型：

```
class Facebook < ActiveRecord::::Base
end

class Facebook::Like < Facebook
end

class Facebook::Share < Facebook
end

class Like < ActiveRecord::Base
end 
```

我想为其设置属性翻译，但我不知道如何具体说明派生类。

*配置/语言环境/en.yml*

```
activerecord:
  attributes:
    like:
      data: "Someting"
    facebook_like:
      data: "Someting else"
    facebook_share:
      data: "Again - Someting else" 
```

好的 - 所以 facebook_like 和 facebook_share 显然不起作用 - 但我会用什么替换它们才能满足我的特定翻译需求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T16:59:46.787

使用斜线`/`：

```
facebook/like:
  data: "Someting else" 
```

# solaris - pkgrm SUNWusb - 哎呀

> ID：12463460
> 
> 赞同：0
> 
> 时间：2012-09-17T16:29:17.170
> 
> 标签：solaris, solaris-10

我愚蠢地听从了一些流浪汉的建议，在我的 sparc Solaris 系统上运行了“pkgrm SUNWusb”。重新启动后，由于某种奇怪的原因，我的 USB 键盘和鼠标无法使用。设想！

SSH 访问仍然有效。我热切希望有一种简单的方法可以恢复 USB 驱动程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T18:17:02.327

我最终想通了。我安装了 Solaris 安装盘，进入 /Solaris_10/Product 并找到 SUNWusb 目录，然后找到 'pkgadd -d 。SUNwusb'。重新启动，一切正常。

# css - 响应式网页设计工具

> ID：12463463
> 
> 赞同：2
> 
> 时间：2012-09-17T16:29:33.100
> 
> 标签：css, responsive-design, media-queries

我正在开发一个网站，现在我必须为他优化表格、智能手机等......我已经找到了一些工具来测试 CSS 媒体查询，比如 responsinator，对于某些事情来说它很好，但它看起来并不适合所有东西就像在真实智能手机上的一些测试告诉我的那样。但是，由于我没有太多机会在​​真实设备上测试该网站，所以这里的任何人都可以告诉我一些可以进行此测试的网站吗？您已经使用过并且对它们满意的网站？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T16:35:47.790

如果您在 Firefox 上安装[Web 开发人员工具栏](https://addons.mozilla.org/en-US/firefox/addon/web-developer/)插件，您可以查看“调整大小”菜单

![在此处输入图像描述](../Images/d69de2c009db4d738537f165f18667f6.png)

并选择最后一项“查看响应式布局”。将出现一个具有以下移动/小型设备分辨率的新页面

*   320x480
*   600x800
*   1024x768

无论是纵向还是横向。当然，这不能成为“真实测试”的有效替代方案，但它可以用于第一次检查以解决主要问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-17T16:43:14.523

[Opera 移动模拟器](http://www.opera.com/developer/tools/mobile/)。

[歌剧迷你模拟器](http://www.opera.com/developer/tools/mini/)。

[安卓模拟器](http://developer.android.com/tools/help/emulator.html)。

[黑莓模拟器](https://swdownloads.blackberry.com/Downloads/entry.do?code=060AD92489947D410D897474079C1477)

还有 Chrome 开发者工具中的 Override User Agent 选项。

![在此处输入图像描述](../Images/21985993891e132537e1250eacaab0d4.png)

还有更多的[移动模拟器和模拟器](http://www.mobilexweb.com/emulators)。

# java - 难以在组内布置 SWT 文本控件

> ID：12463465
> 
> 赞同：1
> 
> 时间：2012-09-17T16:29:39.963
> 
> 标签：java, swt

我在让 SWT 文本控件按照我希望它们在组中的布局方式时遇到问题。具体来说，我很难将`verticalSpan`传递给`GridData`反映在 GUI 资产中。在下面的示例中，我无法正确显示的 3 个控件是`descriptionText`、`defaultActionText`和`defaultReportActionText`，但`translationText`显示正确。我不确定我在这里做错了什么，所以我很感激任何反馈！

团体：

```
 paramsFieldComposite = new Group( upperRightComposite, SWT.BORDER );
    // TODO: Change group to composite and remove .setText()
    paramsFieldComposite.setText( "paramsFieldComposite" );
    paramsFieldComposite.setLayoutData( new GridData( SWT.FILL, SWT.FILL, true, true, 1, 1 ) );
    paramsFieldComposite.setLayout( new GridLayout( 2, true ) ); 
```

翻译控件（按我的预期工作，宽度为 1，高度为 3）：

```
 Label hostnameLabel = new Label( paramsFieldComposite, SWT.NONE );
    hostnameLabel.setLayoutData( new GridData( SWT.FILL, SWT.FILL, false, false, 1, 1 ) );
    hostnameLabel.setText( configResourceBundle.geti18nDisplay( "HostnameLabel" ) );

    Label translationLabel = new Label( paramsFieldComposite, SWT.NONE );
    translationLabel.setLayoutData( new GridData( SWT.FILL, SWT.FILL, true, false, 1, 1 ) );
    translationLabel.setText( configResourceBundle.geti18nDisplay( "TranslationLabel" ) );

    hostnameText = new TextControl( paramsFieldComposite, SWT.BORDER );
    hostnameText.setLayoutData( new GridData( SWT.FILL, SWT.FILL, true, false, 1, 1 ) );
    hostnameText.setEditable( true );

    translationText = new TextControl( paramsFieldComposite, SWT.BORDER | SWT.V_SCROLL | SWT.WRAP );
    translationText.setLayoutData( new GridData( SWT.FILL, SWT.FILL, true, false, 1, 3 ) );
    translationText.setEditable( true ); 
```

描述/操作控件（没有像我期望的那样工作，我希望它们的高度都为 3 而不是 1）：

```
 Label descriptionLabel = new Label( paramsFieldComposite, SWT.NONE );
    descriptionLabel.setLayoutData( new GridData( SWT.FILL, SWT.FILL, true, false, 2, 1 ) );
    descriptionLabel.setText( configResourceBundle.geti18nDisplay( "DescriptionLabel" ) );

    descriptionText = new TextControl( paramsFieldComposite, SWT.BORDER | SWT.V_SCROLL | SWT.MULTI );
    descriptionText.setLayoutData( new GridData( SWT.FILL, SWT.FILL, true, true, 2, 3 ) );
    descriptionText.setEditable( true );

    Label defaultActionLabel = new Label( paramsFieldComposite, SWT.NONE );
    defaultActionLabel.setLayoutData( new GridData( SWT.FILL, SWT.FILL, true, false, 1, 1 ) );
    defaultActionLabel.setText( configResourceBundle.geti18nDisplay( "DefaultActionLabel" ) );

    Label defaultReportActionLabel = new Label( paramsFieldComposite, SWT.NONE );
    defaultReportActionLabel.setLayoutData( new GridData( SWT.FILL, SWT.FILL, true, false, 1, 1 ) );
    defaultReportActionLabel.setText( configResourceBundle.geti18nDisplay( "DefaultReportActionLabel" ) );

    defaultActionText = new TextControl( paramsFieldComposite, SWT.BORDER | SWT.V_SCROLL );
    defaultActionText.setLayoutData( new GridData( SWT.FILL, SWT.FILL, true, false, 1, 3 ) );
    defaultActionText.setEditable( true );

    defaultReportActionText = new TextControl( paramsFieldComposite, SWT.BORDER | SWT.V_SCROLL );
    defaultReportActionText.setLayoutData( new GridData( SWT.FILL, SWT.FILL, true, false, 1, 3 ) );
    defaultReportActionText.setEditable( true ); 
```

这是 GUI 的样子。

![在此处输入图像描述](../Images/992192065f82cb8417aa7b66522d10f4.png)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-17T16:53:24.317

`translationText`和的行为之间的区别`defaultActionText`很容易解释。

你告诉两者跨越 3 行。然而，虽然这三行的高度`translationText`是由其他`Widgets`( `hostnameText`, `instanceLabel`, `instanceText`) 定义的，但情况并非如此`defaultActionText`。这三行中没有其他小部件（除了`defaultReportActionText`）。所以高度将被设置为必要的高度。

您可以通过设置 来手动增加此`heightHint`高度`GridData`：

```
GridData data = new GridData( SWT.FILL, SWT.FILL, true, false, 1, 3 );
data.heightHint = 80;

defaultActionText.setLayoutData(data);
defaultReportActionText.setLayoutData(data); 
```

结果可以在这里看到：

![在此处输入图像描述](../Images/c71ddb030a6812e9987879a522e5b452.png)

要获得更准确的高度结果，您可以使用：

```
data.heightHint = hostnameText.computeSize(SWT.DEFAULT, SWT.DEFAULT).y
                + instanceLabel.computeSize(SWT.DEFAULT, SWT.DEFAULT).y
                + instanceText.computeSize(SWT.DEFAULT, SWT.DEFAULT).y; 
```

# visual-studio - 我应该用什么类型的微软工作室来创建商业用途的应用程序

> ID：12463467
> 
> 赞同：0
> 
> 时间：2012-09-17T16:29:46.600
> 
> 标签：visual-studio, licensing

也许我的问题很愚蠢，但我找不到对谷歌满意的答案，

我正在尝试成为一名自由程序员，并使用最新的 Visual Studio 创建商业用途的应用程序并将其出售。

我试图合法但最终感到困惑，我应该使用或购买哪种类型的 Microsoft Visual Studio？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T16:30:54.250

我首先要说：参考您希望使用的产品的许可证，并可能根据相关许可证获得适当的法律建议。

话虽如此...您可以使用任何版本的 Visual Studio，包括免费的“Express Editions”，来创建商业软件产品。

“高端”版本增加了很多功能，例如代码分析等——但即使是免费版本也不能阻止软件的制作和销售。

# r - geom_segment() x 轴上不同的起始值

> ID：12463471
> 
> 赞同：2
> 
> 时间：2012-09-17T16:29:51.473
> 
> 标签：r, ggplot2

```
ggplot(int_times,aes(x=-stim ,y=num,colour=gene)) +
       scale_y_continuous(breaks=int_times$num,labels=int_times$gene) +
       geom_segment(aes(xend=stim,ystart=num,yend=num),size=5) +
       xlab('IW (min)') +
       ylab('Genes') +
       opts(title='multi') 
```

int_times:

```
 gene    lag   stim  num
 Pcsk1  46.53 173.53    1
serpin2 83.00 208.02    2
  Bdnf  33.00 277.02    3
 Fosl2  49.00 266.03    4
  Pax1  33.59 243.56    5
  Acan 188.49  70.30    6
 Pthlh  50.00 271.45    7
   Crh  35.00 359.06    8 
```

这就是我现在所拥有的 ![在此处输入图像描述](../Images/ea363c60962cfa52a8ff045cf4af53a8.png)

我想要的是让 y 值“stim”从它们相应的“滞后”开始，而不是全部从 0 开始。

我以为你可以在 geom_segment 的 aes() 中做一个 xstart=lag，但这对我不起作用。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T16:50:18.673

试试这个（我在导入数据时将数据命名为不同的名称）：

```
ggplot(dat,aes(x=-stim ,y=num,colour=gene)) +
       scale_y_continuous(breaks=dat$num,labels=dat$gene) +
       geom_segment(aes(xend=lag,ystart=num,yend=num),size=5) +
       xlab('IW (min)') +
       ylab('Genes') +
       opts(title='multi') 
```

![在此处输入图像描述](../Images/a7ed10917b63501cbad61956a26a06d6.png)

但是从你的问题中你的意图仍然很不清楚。您指的是开始值和结束`y`值，但您肯定是指`x`吗？条形的起始值是从`-stim`传入的`x`in继承的`ggplot`。我只是通过`lag`作为终点。

如果您真的希望条形图从 开始`lag`，那么您应该从 中删除`x = -stim`并`ggplot`简单地将开始和结束值传递给`geom_segment`. （事实上​​，这可能是一个好主意。）

# c - 如果在 BSD 套接字上多次调用 close() 会发生什么

> ID：12463473
> 
> 赞同：2
> 
> 时间：2012-09-17T16:30:12.463
> 
> 标签：c, sockets

`socketfd`在 BSD 套接字上多次调用 close() 是否安全？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T16:52:39.767

从[手册](http://linux.die.net/man/2/close)：

> `close()`成功返回零。出错时`-1`返回，并`errno`进行适当设置。
> 
> 错误
> 
> ```
>  EBADF  fd isn’t a valid open file descriptor. 
> ```

因此，`close`调用将因上述错误而失败是有道理的。（这确实是我的机器上发生的事情。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T16:08:36.117

`EBADF`正如其他人所提到的，如果文件描述符在初始关闭后没有被（重新）用于任何内容，您将得到一个。

通常的做法是在 fd 关闭后为其分配一个无效编号。一个常用的成语

```
 close(fd);
 fd = -1; 
```

应该是使用的成语。这样，再次关闭套接字将导致静默`EBADF`并且不会破坏新分配的有效文件描述符的状态。

（请注意，“无效文件句柄”的值在其他平台上可能不同.. 即 windows (?)；但应该适用于任何 POSIX 系统）。

# haskell - 在 GHC 7.6 中匹配类型级别 Nat

> ID：12463474
> 
> 赞同：23
> 
> 时间：2012-09-17T16:30:13.607
> 
> 标签：haskell, ghc, type-families, type-level-computation

我的问题可能最容易以示例的形式解释：

```
type family   Take (n :: Nat) (xs :: [k]) :: [k]
type instance Take 0     xs        = '[]
type instance Take (n+1) (x ': xs) = x ': Take n xs 
```

但是，这里的第二个实例被拒绝，因为`(+)`本身是一个类型族，不能在参数中使用。但似乎没有任何`Succ`或任何东西通常用于匹配 Nats。

那么，这可以表达吗？如果是这样，如何？

**更新**。我注意到`isZero`和中的`isEven`函数在[`GHC.TypeLits`](http://www.haskell.org/ghc/docs/latest/html/libraries/base-4.6.0.0/GHC-TypeLits.html)“破坏类型nats”的标题下。它们是否打算以某种方式在类型级别使用？我怀疑不会……但主要是因为我不知道该怎么做。`:)`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-23T09:38:47.373

我认为这是当前 TypeNats 实现中的一个已知问题。但它正在处理中，请查看： https: [//plus.google.com/117760254622432568621/posts/iMYU2SMViay](https://plus.google.com/117760254622432568621/posts/iMYU2SMViay)

# javascript - asp.net javascript重定向失败

> ID：12463475
> 
> 赞同：0
> 
> 时间：2012-09-17T16:30:14.437
> 
> 标签：javascript, asp.net

从我的主应用程序页面 Default.aspx 我弹出另一个页面`window.open`。在那个页面上，我有一个`HyperLink`调用`Javascript`函数的主页链接。

```
<asp:HyperLink id="lnkHome" runat="server" meta:resourcekey="lnkHome" NavigateUrl = " " onclick = "javascript:performRedirect()"> 
```

我正在检查父窗口是否仍在运行以及是否只是关闭此窗口，如果没有则重定向回主窗口。

```
function performRedirect() {
    if (parentExists()) {

        $("a[id$= lnkHome]").attr('href', 'window.close();');
    }
    else {

        $("a[id$= lnkHome]").attr('href', 'Default.aspx');
    }
}
function parentExists() {

    return (window.parent.location === window.location) ? false : true;
} 
```

它可以工作，但由于某种原因检查失败，`Default.aspx`即使调用页面仍然打开，它也总是将我重定向到。我需要在这里改变什么？不幸的是，我必须使用`HyperLink`控制。我正在使用 ASP.NET 4.0

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T16:43:58.647

我会检查`window.opener`而不是`window.parent`因为你正在使用打开窗口`window.open`

你的`parentExistis`功能变成这样：

```
function parentExists() { 
    return window.opener!==null;
} 
```

或者...

```
function parentExists() { 
    return window.opener!==null && window.opener.location.href===window.location.href;
} 
```

# visual-studio-2010 - 为什么我在 IIS 服务器上出现“找不到类型”WCF 错误，但在 Visual Studio 2010 中却没有？

> ID：12463476
> 
> 赞同：0
> 
> 时间：2012-09-17T16:30:31.483
> 
> 标签：visual-studio-2010, wcf, web-services, .net-4.0, .net-4.5

错误是：

> 找不到类型“WF.XXX.WebServices.XXXXService”，作为 ServiceHost 指令中的服务属性值提供，或在配置元素 system.serviceModel/serviceHostingEnvironment/serviceActivations 中提供。

堆栈跟踪：

> [InvalidOperationException：找不到类型“WF.XXX.WebServices.XXXXService”，作为 ServiceHost 指令中的 Service 属性值提供，或在配置元素 system.serviceModel/serviceHostingEnvironment/serviceActivations 中提供。]
> System.ServiceModel.Activation .ServiceHostFactory.CreateServiceHost(String constructorString, Uri[] baseAddresses) +52742
> System.ServiceModel.HostingManager.CreateService(String normalizedVirtualPath) +1459
> System.ServiceModel.HostingManager.ActivateService(String normalizedVirtualPath) +44
> System.ServiceModel.HostingManager.EnsureServiceAvailable(String标准化虚拟路径）+623
> 
> [ServiceActivationException：服务'/XXXXX/XXXXXService/XXXXService.svc'由于编译过程中的异常而无法激活。异常消息是：类型“WF.XXX.WebServices.XXXXService”，作为 ServiceHost 指令中的服务属性值提供，或在配置元素 system.serviceModel/serviceHostingEnvironment/serviceActivations 中提供，找不到..] 系统。 Runtime.AsyncResult.End(IAsyncResult 结果) +687598 System.ServiceModel.Activation.HostedHttpRequestAsyncResult.End(IAsyncResult 结果) +190 System.ServiceModel.Activation.ServiceHttpModule.EndProcessRequest
> (IAsyncResult ar) +304662
> System.Web.AsyncEventExecutionStep.OnAsyncEventCompletion(IAsyncResult a) +94

如何在服务器上修复此错误？

***2012 年 9 月 18 日更新：*** 我的机器上安装了 Visual Studio 2012 和 .NET Framework 4.5，但服务器只有 .NET Framework 4.0。我不确定这是否重要，因为我使用 .NET Framework 4.0 构建了该服务。

但奇怪的是，当我运行我的项目时，我注意到了 4.5 的功能。它显示了一个指向单个 WSDL 文件的 URL，这在 .NET 4.0 版本中不可用。为什么在使用 .NET Framework 4.0 构建项目时会出现这种情况？这是屏幕截图： ![在此处输入图像描述](../Images/74d9fd2889a7a902f24cc361639ba977.png)

***2012 年 9 月 19 日更新：***

这是相关的 web.config 文件：

```
<system.serviceModel>
    <services>
      <service name="XXXXService">
        <!-- Use a bindingNamespace to eliminate tempuri.org -->
        <endpoint address=""  name="XXXXService"
                  binding ="basicHttpBinding" 
                  bindingNamespace="@services.url@/XXXXService" 
                  contract="WF.XXX.WebServices.XXXXService" />
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="true"/>
          <serviceCredentials>
            <clientCertificate>
              <authentication certificateValidationMode="None" mapClientCertificateToWindowsAccount="true" />
            </clientCertificate>
          </serviceCredentials>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T18:42:36.960

回答您的问题

(1) 确保您已经构建了您的项目，并且包含服务类型 XXXXService 的 dll 放在 bin 目录中。

(2) Single Wsdl 是 4.5 的新特性。由于 4.5 是 4.0 的就地升级，即使您将项目定位到 4.0，您也将获得 ?SingleWsdl 的好处。但是，当您在只有 4.0 的机器上部署相同的服务时，您将无法获得此功能。要在您的服务机器上安装它，请确保您也有 4.5。

希望这可以帮助。

谢谢！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-21T14:49:10.743

我遇到了同样的问题，原因是我更改了代码文件中的命名空间`IService1.cs`，`Service1.svc.cs`但忘记更改`Service1.svc`文件中的命名空间。

EG在`service1.svc`

```
< % @ ServiceHost Service="WcfService2.Service1" % > 
```

必须改为：

```
< % @ Service="NewNamespaceName.Service1" % > 
```

您可以在 Visual Studio 不捕获拼写错误的情况下构建解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-02T22:45:53.933

我遇到过同样的问题。就我而言，只需删除 bin 和 obj 文件夹并重建即可解决问题。

# magento - 使用magento如何在list.phtml页面的工具栏上显示属性下拉过滤器？

> ID：12463478
> 
> 赞同：0
> 
> 时间：2012-09-17T16:30:34.413
> 
> 标签：magento, filter

我必须在列表页面工具栏上显示产品属性过滤器（下拉菜单）。任何人告诉我如何在列表页面上放置过滤器？

我尝试使用的代码是：

```
$_productCollection=$this->getLoadedProductCollection();
 $_helper = $this->helper('catalog/output'); 
```

我使用下面的代码在工具栏部分放置了一个过滤器。我没有得到任何结果。`metal_type`是具有选项 "Gold" 和 "Silver" 的属性。

```
<select id='filter' onchange="ajaxfunction()">
<?php foreach($_productCollection as $product): ?>
 <option value="<?php $product->getmetal_type() ?>"><?php $product->getmetal_type() ?></option>
<?php endforeach; ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T17:17:25.127

您可以通过在页面开始时加载一个集合来手动完成。

```
$collection = Mage::getModel('catalog/product')->getCollection(); 
```

你把你的组合框是这样的：

```
<select id='filter' onchange="ajaxfunction()">
    <?php foreach($collection as $product): ?>
     <option value="<?= $product->getAttributeYouWantUseToFilter()" ?>"><?= $product->getAttributeYouWantUseToFilter()" ?></option>
    <?php endforeach; ?>
</select> 
```

在 ajax 上，您调用您的操作进行过滤。

# android - 活动生命周期 - 离开 onPause 被杀死

> ID：12463481
> 
> 赞同：0
> 
> 时间：2012-09-17T16:30:49.307
> 
> 标签：android, android-activity, android-lifecycle

我有一个 android 应用程序，我在其中定义了一些活动方法（参见下面的示例）。

有没有办法确定我的 APP 何时离开 onPause 方法被杀死，因为 APP 需要更高优先级的内存？高级 Tnx

```
public class Activity extends ApplicationContext {

 private static final String TAG = "TEST";
 private static final boolean D = true;

 public void onCreate(Bundle savedInstanceState);    

 }

 public void onPause();

 super.onPause();
 if(D) Log.e(TAG, "- ON PAUSE -");

 }

 public void onStop() {

 super.onStop();
 if(D) Log.e(TAG, "- ON STOP -");

 }

 public void onDestroy();

 super.onDestroy();
 if(D) Log.e(TAG, "- ON Destroy -");

 }

 } 
```

![在此处输入图像描述](../Images/4ad0315391f124f54dbd4af5b1ec8ec5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T16:57:51.997

您可以覆盖 Activity.onLowMemory() 方法。

[http://developer.android.com/reference/android/app/Activity.html#onLowMemory](http://developer.android.com/reference/android/app/Activity.html#onLowMemory) ()

# transactions - 骆驼交易如何处理硬件故障

> ID：12463484
> 
> 赞同：1
> 
> 时间：2012-09-17T16:30:55.550
> 
> 标签：transactions, apache-camel, activemq, apache-servicemix

我正在调查在 ServiceMix (v4.4.2) 中运行的骆驼交易。下面是我的路线：

```
from(WEBSERVICE_CAMEL_ENDPOINT).to("jms:queue:a");

from("jms:queue:a")
.transacted("PROPAGATION_REQUIRED")
    .process(new Processor() {
        @Override
        public void process(Exchange arg0) throws Exception {                
            System.exit(1); // A
        }
    })
; 
```

以下是相关的bean：

```
<bean id="jmsConnectionFactory" class="org.apache.activemq.ActiveMQConnectionFactory">
    <property name="brokerURL" value="tcp://localhost:61616" />
</bean> 
```

```
<bean id="jms" class="org.apache.camel.component.jms.JmsComponent">
    <property name="transacted" value="true" />
    <property name="transactionManager" ref="txManager" />
    <property name="useMessageIDAsCorrelationID" value="true" />
<property name="connectionFactory" ref="jmsConnectionFactory" />
</bean>

<bean id="PROPAGATION_REQUIRED" class="org.apache.camel.spring.spi.SpringTransactionPolicy">
    <property name="transactionManager" ref="txManager" />
    <property name="propagationBehaviorName" value="PROPAGATION_REQUIRED" />
</bean> 
```

当我运行它并调用 Web 服务时，ServiceMix 已关闭。当我重新启动 ServiceMix 时，消息已移至死信队列 (ActiveMQ.DLQ)。如果我在 A 点放置断点并手动关闭 ServiceMix 并使用任务管理器，我会看到相同的行为。

**何时完成以及如何完成？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T20:29:03.500

首先，您将事务性协议与非事务性协议混合在一起。只要您知道您在哪里拥有事务性，那很好。

当您运行您的第一条路线时，`from(WEBSERVICE_CAMEL_ENDPOINT).to("jms:queue:a");`Camel 将尝试将您的消息从 WS 放入 ActiveMQ 中的队列 A。如果成功（在此过程中 SMX 不活动），ActiveMQ 已将消息放入队列 A 上的永久磁盘。到目前为止，没有事务。

然后你的第二条路线将触发。Camel 将在事务中从队列中读取消息。该消息将在 ActiveMQ 中被标记为删除。如果路由处理完全正常，没有任何异常，事务将提交。只有当 Camel 提交消息时，它才会从 ActiveMQ 中删除。在您的情况下，您正在异常结束路由，因此未提交事务，因此不会从队列中删除消息。

在事务回滚（或根本未提交）的情况下，如果消息被放回队列“a”或放入死信队列，ActiveMQ 重新传递策略将处理。

在这里阅读更多。 [http://activemq.apache.org/message-redelivery-and-dlq-handling.html](http://activemq.apache.org/message-redelivery-and-dlq-handling.html)

# opengl - 从OpenCV中的旋转矩阵和平移向量获取旋转轴

> ID：12463487
> 
> 赞同：8
> 
> 时间：2012-09-17T16:30:59.710
> 
> 标签：opengl, opencv, rotation, image-rotation

我在两个图像中有一个棋盘，有一些旋转角度。让我们参考第一张图像找到第二张图像的旋转角度。

为此，我找到了这些对象的旋转矩阵 (3x3) 和平移矩阵 (3x1)。

如何使用这些矩阵找到对象的**旋转角度**和**旋转轴？**

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-18T07:50:41.117

**对于旋转表示**之间的每种类型的转换，您都有这个网站[欧几里得空间](http://www.euclideanspace.com/index.html)。

您将找到以下理论和代码示例：

*   旋转矩阵到四元数：[链接](http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm)

*   四元数到轴角：[链接](http://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToAngle/index.htm)

*   一般轮换和所有表示：[链接](http://www.euclideanspace.com/maths/geometry/rotations/index.htm)

关于你**的问题**，你有[轴角。](http://www.euclideanspace.com/maths/geometry/rotations/axisAngle/index.htm)如果您有旋转矩阵 R (3x3)，您可以通过这种方式获得角度和轴（请参阅[Matrix to Axis Angle](http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToAngle/index.htm)）：

*   `angle = acos(( R00 + R11 + R22 - 1)/2);`

*   轴 x,y,x:

    x = (R21 - R12)/sqrt((R21 - R12)^2+(R02 - R20)^2+(R10 - R01)^2);

    y = (R02 - R20)/sqrt((R21 - R12)^2+(R02 - R20)^2+(R10 - R01)^2);

    z = (R10 - R01)/sqrt((R21 - R12)^2+(R02 - R20)^2+(R10 - R01)^2);

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-01-23T10:04:17.647

已经使用 openCV 我会推荐使用 Rodrigues 方法： [cv::Rodrigues(src, dst, jacobian)](https://docs.opencv.org/4.0.1/d9/d0c/group__calib3d.html#ga61585db663d9da06b68e70cfbf6a1eac)，如果你有一个参数的旋转矩阵，它会计算旋转向量，反之亦然。

# sql - 在 WHERE 子句下的 SQL 中，“冒号”是什么意思？

> ID：12463490
> 
> 赞同：2
> 
> 时间：2012-09-17T16:31:11.367
> 
> 标签：sql, oracle, oracle10g

我有SQL函数，不是我写的。

我很难理解，以下条件是什么意思？
特别是`:key`和`||cLF||'`。

```
WHERE  ' WHERE 1=1 '
       ||cLF||' AND   f.key = :key '
       ||cLF||' AND   i.flag = 0'
       ||cLF||' AND   r.flag = 0' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T16:34:23.197

首先，`||`运算符是[字符串连接运算符](https://stackoverflow.com/questions/278189/what-is-the-string-concatenation-operator-in-oracle)。所以看起来代码正在`WHERE`使用`cLF`. 虽然我不完全确定他们为什么要在`cLF`那里进行三次。

`:key`语法引用参数化查询中的参数。它的值将在您正在构建的 SQL 语句实际运行时传入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T16:35:24.843

您粘贴的查询是动态构造的 SQL 语句的一部分。这里的分号指向一个绑定位置持有者，这意味着 ":key" 的实际值是通过一个参数传递的，而不是硬编码的。

阅读有关立即执行的示例。

# android - Android C 代码，将标准输出重定向到 logcat 或字符串缓冲区

> ID：12463491
> 
> 赞同：1
> 
> 时间：2012-09-17T16:31:11.470
> 
> 标签：android, redirect, java-native-interface, stdout

在 Android 中使用 OpenSSL libcrypto。一些 OpenSSL 函数将内容输出到 FILE*，实际上很多 C 函数都是这样做的，例如：

```
int X509_REQ_print_fp(FILE *bp,X509_REQ *req); 
```

在这种情况下，“bp”可以是标准输出。我的问题是如何将输出重定向到 Android logcat？或者以更常见的方式，到 char 数组或字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T16:35:24.087

包含`android/log.h` 并定义宏如下：

```
 #include <android/log.h>
   #define LOGV(...) __android_log_print(ANDROID_LOG_VERBOSE, "yourtag",__VA_ARGS__) 
```

# db2 - DB2 SQL 错误：SQLCODE=-911，SQLSTATE=40001，SQLERRMC=68

> ID：12463493
> 
> 赞同：0
> 
> 时间：2012-09-17T16:31:13.810
> 
> 标签：db2

运行时出现此错误：

```
alter table tablename add column columnname varchar(1) default 'N'; 
```

> DB2 SQL 错误：SQLCODE=-911，SQLSTATE=40001，SQLERRMC=68

如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-23T13:55:53.557

alter 语句想要在 SYSIBM.SYSTABLES 中的这一行上获得 X 锁。有一个打开的事务具有此行/索引值处于不兼容的锁定状态。这个导致超时的锁甚至可能来自一个打开的游标，该游标使用 RS 或 RR 隔离级别读取该行。终止当前尝试查询 SYSTABLES 的任何其他 SQL 以及任何可能尝试更新 SYSTABLES 的实用程序，例如 reorg 和 runstats，然后再次尝试更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T16:42:10.797

请参阅[DB2 信息中心](http://pic.dhe.ibm.com/infocenter/db2luw/v10r1/index.jsp?topic=%2Fcom.ibm.db2.luw.messages.sql.doc%2Fdoc%2Fmsql00911n.html) （我为 DB2 10 选择了一个，很可能此错误代码在其他版本中是相同的，但请仔细检查！）。

似乎您的表上有一个事务打开，这会阻止您的`alter`命令执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-23T12:34:45.530

after you have Altered a table you need to Reorg: reade up on it here:

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-26T05:09:52.873

定期运行 runstats 脚本，它是一个 DB2 脚本，并将脚本设置为收集 RUNSTATS WITH DISTRIBUTION AND DETAILED INDEXES ALL。

除了定期运行 runstats 脚本之外，您还可以执行以下任务来避免该问题： 将 REOPT ONCE 或 REOPT ALWAYS 与命令行界面 (CLI) 包一起使用以更改查询优化行为。在 DB2 数据库中，更改表以使其易变。易失性表向 DB2 优化器表明，表基数在运行时会发生显着变化（从空到大，反之亦然）。因此，DB2 使用索引而不是表扫描来访问表。

# html - 我的网站只有下半部分可见，发生在五分之三的浏览器中……为什么？

> ID：12463495
> 
> 赞同：1
> 
> 时间：2012-09-17T16:31:24.437
> 
> 标签：html, css, centering

我正在 www.magalidb.0fees.net 上制作一个投资组合网站，但在多个浏览器中正确显示我的网站时遇到了一些问题。问题在于，在某些浏览器中，只有内容的下半部分（位于容器内）是可见的，而上半部分位于浏览器窗口顶部的某个位置。要查看示例，请尝试在 Firefox、Opera 或 Internet Explorer 中打开我的网站。

有一些验证错误，但并不那么紧急。这些错误都与网站的行为无关。顺便说一下，该网站是用 HTML5 编写的，并使用常规 CSS 和 CSS3。

问题似乎与垂直居中有关。我将容器的内容水平和垂直居中。

为了使容器水平居中，我使用了以下 CSS：

```
#container {
min-height: 100%; /* To make sure it reaches the bottom of the browser page */
width: 940px;
margin-left: auto; /* Center horizonticallly */
margin-right: auto; /* Center horizontically */
overflow: hidden;
overflow-y: hidden; /* Vertical scrollbar fix for IE */ } 
```

垂直居中具有以下 CSS：

```
#valigner {
width: 720px;
position: absolute;
top: 50%;
bottom: 50%;
height: 500px;
margin-top: -45%;   
margin-bottom: -45%;
margin: -40% 0 0 220px; } 
```

220px 只是为了让内容和标题不会粘在侧边栏后面。

这是我的索引页正文中代码的一般布局：

```
<body>
<div id="container">
<div id="sidebar" class="left">
    <?php include('sidebars/sidebar.php'); ?>
    </div>
<div id="valigner">
    <div id="sidebar-bottom" class="left"></div>
    <div id="head" class="right"><h1>Magali&#39;s portfolio</h1></div>
    <div id="main" class="right">
        <div id="content-textbox">
            <div class="intro-left">
                Text comes here.
                            </div>
            <div class="intro-right">
                <img alt="Me!" class="resizeProfile" src="images/magali.jpg">
            </div>
        </div> <!-- Closing of div content-textbox -->
    </div> <!-- Closing of div main -->
    <div id="footer" class="right">
        <?php include('language.php'); ?>
    </div>
</div> <!-- Closing of div valigner -->
</div> <!-- Closing of div container -->
</body> 
```

请查看我的网站 (http://www.magalidb.0fees.net)。它在 Chrome 和 Safari 中正确显示，但在 Firefox、Opera 和 Internet Explorer 中显示不正确。我对此感到非常困惑，因此非常欢迎任何帮助。

* * *

## ！！！编辑！！！

我找到了！它现在完美运行。

我将容器和 valigner 中的代码替换为以下内容：

```
#container {    
position: absolute; 
top: 50%; 
width: 100%; 
height: 1px; 
overflow: visible;
}

#valigner { 
position: absolute; 
left: 50%; 
width: 940px; 
margin-left: -470px;
height: 540px; 
top: -270px 
} 
```

代码解释了自己，它是如此合乎逻辑。我搜索了一种将内容水平和垂直居中的替代方法，并找到了这个。我现在觉得很傻，因为我以前用过这个方法，但我忽略了它，因为我认为它已经过时了......

无论如何，谢谢你们的帮助！非常感谢。;)

PS：我无法回答我自己的帖子。我试过了，但我收到一条通知：“声望低于 10 的用户在提问后 8 小时内无法回答自己的问题。您可以在 5 小时内自行回答。在此之前请使用评论，或编辑您的问题。 ”。所以我编辑了我的问题，就像通知建议我一样。我计划在这 5 个小时后再次编辑问题并以正确的方式发布答案，但在那之前我不能做得比这更好。对不起！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T20:44:41.227

我知道你已经回答了你的问题，但我对你如何编写你的网站有点困惑。这可能是有正当理由的，如果是这样，版主可以删除我的评论，但我认为您不需要所有定位的东西，尤其是在`#container`和`#valigner`元素上。事实上，我认为你可以在`#container`元素上使用 2 个属性来做到这一点，而不是使用任何杂乱的`position: absolute;`技术或任何东西。这是我的建议：

```
#container {
    width: 940px; // or whatever you want the width to be. I think this is what you specified originally.
    margin: 25px auto; // Centre the design in the middle of the page and put it 25px from the top and bottom of the browser window.
} 
```

我想就是这样。您可以删除`#valigner`并使用它。如果您继续在`position: absolute;`任何地方使用，尤其是在最顶层的包含元素上，那么以后一切都会变得非常混乱。

# css - IE 兼容模式下字体显示过大

> ID：12463497
> 
> 赞同：-1
> 
> 时间：2012-09-17T16:31:32.480
> 
> 标签：css, internet-explorer

我有一个页面可以在包括 IE 8/9 在内的所有浏览器中运行，除非这些浏览器切换到兼容模式 - 然后任何标记为的文本`<p>`都变得非常大 - 大于`<h1>`. 没有响应与大小有关的`<p>`任何样式表或 css 指令。

jquery 和 jQueryUI 出现在页面上，但不参与（显式）设置我的`<p>`元素的样式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T16:44:53.777

此元标记强制 IE 以[Internet Explorer 版本可用的最高模式显示](http://msdn.microsoft.com/en-us/library/ms533876%28v=vs.85%29.aspx)：

```
<meta http-equiv="X-UA-Compatible" content="IE=Edge"> 
```

把它放在`<head>`页面的部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T11:12:52.000

Jukka 的前提被证明是正确的——原因是未封闭的 H1 标签。

# eclipse - 查看 Eclipse 插件运行的 maven 命令日志

> ID：12463502
> 
> 赞同：10
> 
> 时间：2012-09-17T16:31:56.263
> 
> 标签：eclipse, maven, m2eclipse, eclipse-wtp

我经常发现自己处于这样一种情况，即我想确切地了解 Eclipse 在幕后运行了哪些 Maven 命令。在这种情况下，我正在运行一个带有 WTP 的 webapp，但这个问题更笼统（尽管我很乐意接受这种情况的答案）。

有没有办法使用 pom 配置或 Eclipse 配置来查看任何 Eclipse 插件（或至少 m2eclipse-wtp）已运行的所有命令（可能还有任何输出）的日志？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-17T18:42:40.957

Maven 控制台将向您显示 m2e 和 m2eclipse 的 Maven 输出 - 从正常控制台视图的最右侧下拉列表中访问它。

# internet-explorer - ADODB SQL Server 连接仅在 IE9 中不起作用

> ID：12463504
> 
> 赞同：0
> 
> 时间：2012-09-17T16:31:56.107
> 
> 标签：internet-explorer, asp-classic, adodb

遇到了一个奇怪的问题。

这段代码在所有其他浏览器中都可以正常工作，只是在 IE9 中不行。正在使用的标准 ADODB 连接字符串：

```
Provider=sqloledb;Server=localhost\sqlexpress;Database=DB;uid=DBuser;password=DBPassword;MultipleActiveRecordSets=true; 
```

如此执行：

```
Dim dbGlobal
Set dbGlobal = Server.CreateObject("ADODB.Connection")
dbGlobal.Open sConnectionString 
```

在每个浏览器中，这都有效，然后应用程序继续加载，在 IE9 中，我收到以下错误消息：

-2147467259：[DBNETLIB][ConnectionOpen (Connect()).]SQL Server 不存在或访问被拒绝。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T09:37:15.100

好吧，借助关于 SO（http://stackoverflow.com/a/260861/418151）的以下答案，我设法解决了问题。根据那个答案，我尝试以管理员身份运行 IE，现在它可以很好地连接到 SQL Server！

我只能假设在过去一两周内我安装了一些稍微改变了 SQL Server 和/或 IE9 权限的 Windows 更新。

仍然不知道为什么我现在必须以管理员身份运行 IE 才能连接到 SQL Server！？

# highcharts - Highcharts 不显示包含大量数据点的系列

> ID：12463506
> 
> 赞同：13
> 
> 时间：2012-09-17T16:31:57.870
> 
> 标签：highcharts, highstock

我有一个图表，我想根据用户的日期范围显示。此特定图表每 15 分钟有一个数据点。因此，如果用户选择较大的日期范围，每个系列可能会有很多数据点。这里有几个例子：

*   [**623 个数据点系列**](http://jsfiddle.net/uTXfQ/)
*   [**1470 个数据点系列**](http://jsfiddle.net/uTXfQ/2/)

在第一个示例中，图表确实显示。在第二个示例中，图表不显示。有一个 Highstock 演示（[包含数据分组的 52,000 个点](http://www.highcharts.com/stock/demo/data-grouping)）可以处理大量数据点。我试图将上述图表更改为 highstock 图表，但结果仍然相同。

**我能做些什么来解决这个问题？**

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-18T00:09:18.230

这是由于[涡轮阈值](http://api.highcharts.com/highcharts#plotOptions.line.turboThreshold)选项：

> “当一个系列包含比这更长的数据数组时，只允许使用一维数字数组或具有 x 和 y 值的二维数组。此外，仅测试第一个点，其余的被假定为相同的格式。这样可以节省昂贵的长系列数据检查和索引。”

默认设置为 1000 点。您的图表未呈现，因为您的系列中的每个点都是一个对象，并且它们的数量大于阈值。

这是一个[jfFiddle](http://jsfiddle.net/TSfEs/)演示您的情节与设置为 2000 的阈值一起工作。

这是修改后的代码部分：

```
plotOptions: {
     spline: {
     turboThreshold: 2000,
    ... 
```

另一种解决方案是将您的系列数据编码为二维数组，而不是让每个点由具有 xy 属性的对象表示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-25T19:12:00.750

如果您使用 PHP 生成响应，则 turboThreshhold 的解决方法是这样的：

```
 if(count($responseObj) > 1000){
                    $modolo = round(count($responseObj) / 1000);
                    for($i = count($responseObj)-1; $i >= 0 ; $i--){
                        if(($i % $modolo) != 0){
                            unset ($responseObj[$i]);
                        }
                    }
                    $responseObj = array_merge($responseObj);
                } 
```

# javascript - 如何处理这些异步函数（设计模式？）

> ID：12463513
> 
> 赞同：1
> 
> 时间：2012-09-17T16:32:23.680
> 
> 标签：javascript, design-patterns, asynchronous

我有一个需要执行一些引导/启动的应用程序，例如：

*   阿贾克斯
*   动态需求
*   路由，设置其他东西

在能够运行之前。

我现在很难将这些任务组织在一起。尤其是异步行为让我头疼。目前我正在使用事件来共享获取的结果并观察应用程序的状态。不幸的是，这导致了酿酒学上的不便。然后我尝试使用一些承诺库，如 q、jquery.defered，但它们并不真正符合我的问题。

这是代码的简化版本：

```
// this could be an ajax call fetching some user data
var fetchUser = function() {
    var user = {};
    // lets emulate the ajax call with setTimeout
    setTimeout(function() {
        // set some values
        user.username = 'bodo';
        user.password = 'helloKitty';
        // return the user object we "fetched"
        return user;
    }, 300);
};

// this could fetch some config or some requirejs modules
var fetchConfig = function() {
    var config = {};
    // we emulate this too...
    setTimeout(function() {
        return config;
    }, 200);
};

// this could be anything else like setting up some objects
var justSetUpSomething = function() {
    var someObj = {};
    someObj.router = 'this could be a router object for example';
    someObj.logger = 'or a logger';
    return someObj;
};

// in the final step everything should be merged together
// and be passed as event argument
var finalStep = function(user, config, someObj) {
    var mainObj = {};
    mainObj.user = user;
    mainObj.config = config;
    mainObj.someObj = someObj;
    // trigger some event system
    trigger('everything:ready', mainObj);
};​ 
```

也可以在以下位置查看：http: [//jsfiddle.net/uzJrs/3/](http://jsfiddle.net/uzJrs/3/)

我希望这能描述我的问题：

**有三个完全不同的异步任务。当他们都准备好时，他们的结果必须合并并以某种方式传递给另一个对象。**

事件使这可行，但远不能理解，承诺也不能真正让我开心。**难道没有另一种有用的设计模式吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T16:55:45.537

首先，因为你已经有了 requirejs，你可以用它来加载你的三个模块。Requirejs 异步并行解析依赖关系，并在加载时调用最终的工厂函数。

但是，每个 Deferred 库也提供了合并 Promise 的函数：当所有单个的 Promise 都被解决时，合并的 Promise 被解决，或者如果其中一个被拒绝，则被拒绝。各自的功能是[`Q.all`](https://github.com/kriskowal/q/wiki/API-Reference)和[`jQuery.when`](http://api.jquery.com/jQuery.when)：

```
function fetchX() {
    var d = new $.Deferred();
    asynchronousThing(function callback(x) {
        d.resolve(x);
    });
    return d.promise();
}
$.when(fetchX(), fetchY(), …).then(function finalStep(x, y, …) {
    // merge everything together
    return new Event();
}).done(function readyCallback(e) {
    // this is effectively your 'everything:ready' "event"
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T16:47:34.180

*听起来*您的大部分功能实际上是同步的，只要解决了依赖项（即不做任何异步操作，它们可能只是异步加载。如果您使用的是 require.js，您是否尝试过简单地使用它的功能来`config`制作从代码的角度来看`someObj`，`require`调用是同步的，使用`define`? 那么你只需要担心必须是异步的调用（`fetchUser`）。

```
// In app/main.js perhaps?
define(["data/user",
            "app/config",
            "app/someObject",
            "app/events"], 
    function(user, config, someObj, eventBus) {
        // By the sound of it config and someObj are ready once loaded
        var mainObj = {"config": config, "someObj": someObj};
        eventBus.register_once("data:user:loaded", function(user) {
            mainObj.user = user; 
            eventBus.trigger("everything:ready", mainObj);
        });
        user.fetchUser()
});

// in data/user.js
define(["app/config", "app/events", "vendor/jquery"],
    function(config, eventBus, $) {
        function user_loaded(user) {
            eventBus.trigger("data:user:loaded", user);
        }
        function fetchUser() {
            $.get(config.dataendpoint + "/user/1", user_loaded);
        }
    return {"fetchUser": fetchUser};
}); 
```

# jquery - 为什么 JQuery .ready 函数有时不等待 DOM？

> ID：12463515
> 
> 赞同：0
> 
> 时间：2012-09-17T16:32:37.050
> 
> 标签：jquery, document-ready, domready

我正在使用 JQuery 来设置一些组合框，并且我已经将 .combobox 调用包装在 .ready 函数中以确保我的控件可用，但是在每 10 次左右加载页面时，用于组合框的元素不是在 DOM 中。发生了什么事，这怎么可能？

***我的外部 JavaScript***

```
$(document).ready(function()
{
    if (document.getElementById('selMinPrice'))
    {
        console.log('selMinPrice exists in the DOM.');
        console.log('selMinPrice value=' + document.getElementById('selMinPrice').value);
    }
    else
    {
        console.log('selMinPrice DOES NOT EXIST in the DOM!!!!!!!!!!!!!!!!!!!!!!!!!!');
    }
    // setup min & max price comboboxes
    $(".selMinPrice").combobox();
    $(".selMaxPrice").combobox();
    $("#toggle").click(function ()
    {
        $(".selMinPrice").toggle();
        $(".selMaxPrice").toggle();
    });
}); 
```

由于某种原因，我只注意到 IE 中的问题，但这并不是说它在其他浏览器中不存在。

想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T17:20:09.623

这是 jQuery 1.8.0 中引入的错误，并在 1.8.1 中修复

门票：[http ://bugs.jquery.com/ticket/12282](http://bugs.jquery.com/ticket/12282)

在[http://blog.jquery.com/2012/08/30/jquery-1-8-1-released/的 jQuery 1.8.1 的发行说明中提到了它](http://blog.jquery.com/2012/08/30/jquery-1-8-1-released/)

从 1.8.0 升级到 1.8.1 应该确保 .ready 在 IE 中不会被过早调用。

# javascript - 推迟 ember.js 应用程序准备就绪，直到初始 ajax 调用返回

> ID：12463516
> 
> 赞同：4
> 
> 时间：2012-09-17T16:32:48.213
> 
> 标签：javascript, ember.js

（使用灰烬`1.0.pre`）

当我的 Ember.js 应用程序首次为给定用户加载时，我想进行一次 ajax 调用，并且在该单个调用返回之前不加载任何与 ember 数据相关的数据。这是我认为我需要做的，但我不确定如何实现它：

*   `ready()`在应用程序上实施
*   调用`deferReadiness()`应用程序
*   发起ajax调用
*   `advanceReadiness()`在 ajax 回调处理程序中调用

我不知道我需要如何或在哪里打电话`deferReadiness()`。这是我尝试过的方法及其结果：

```
SocialRoi = Ember.Application.create({
  ready: function() {
    this.deferReadiness();
    console.log('SocialRoi almost ready...');
    this.advanceReadiness();
    return this._super();
  }
});

// RESULT:
// Uncaught TypeError: Object SocialRoi has no method 'deferReadiness' 
```

任何想法我做错了什么？有没有更好的方法来实现我的目标？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T08:28:35.003

You could do something like this, ex for using Ember together with SignalR.

```
APP = Ember.Application.create({
  appname: "MyEmberApp",
  ready: function () {
    console.log("hello from ember");

    if (Ember.empty($.connection.hub) || !$.connection.hub.stateChanged) {
      alert('SignalR error');
      return;
    }
  }
});

APP.deferReadiness();
$.connection.hub.url = 'http://localhost:8085/signalr';
$.connection.hub.logging = true;
$.connection.hub.start()
  .done(function () {
    console.log("SignalR started!");
    APP.advanceReadiness();
  })
  .fail(function () {
    alert('SignalR error)';
  });

APP.Router = Ember.Router.extend({
  ...
});

APP.initialize(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-24T00:56:17.773

调用时出现错误`initialize`。我需要延迟在 Cordova 中运行的 Ember 应用程序的启动，直到 Couchbase Lite 启动。看起来像：

```
App = Ember.Application.create()

App.deferReadiness()
⋮
;( function() {
  function checkURL() {
    if( ! window.cblite ) {
      console.error( 'couchbase lite not present' )
    } else {
      cblite.getURL( function( err, url ) {
        var adapter = App.__container__.lookup('store:main').adapterFor( 'application' )
        url = url.substring( 0, url.length - 1 )
        Ember.set( adapter, 'host', url )

        App.advanceReadiness()
        ⋮ 
```

# xamarin.ios - 尝试使用 CGAffineTransform 和 MakeRotation 绘制旋转文本出现在错误的位置

> ID：12463518
> 
> 赞同：1
> 
> 时间：2012-09-17T16:32:53.310
> 
> 标签：xamarin.ios, cgaffinetransform, drawstring

我正在尝试通过在特定位置使用 CGAffineTransform.MakeRotation 方法来绘制一些旋转的文本。我也使用 TranslateCTM，但一定有问题，因为旋转的文本没有对齐，并且在它们应该出现的正确 x、y 位置，这是我正在使用的简单代码，有人知道问题出在哪里吗？：

```
 public override void Draw (RectangleF rect)
    {
        DrawTextRotated("Hello1",10,100,30);
        DrawTextRotated("Hello2",50,100,60);
        SetNeedsDisplay();          
    }       

    static public float DegreesToRadians(float x) 
    {       
        return (float) (Math.PI * x / 180.0);
    }

    public void DrawTextRotated(string text,int x, int y, int rotDegree)
    {
        CGContext c = UIGraphics.GetCurrentContext();
        c.SaveState();

        c.TextMatrix = CGAffineTransform.MakeRotation((float)DegreesToRadians((float)(-rotDegree)));                        
        c.ConcatCTM(c.TextMatrix); 

        float xxx = ((float)Math.Sin(DegreesToRadians((float)rotDegree))*y);
        float yyy = ((float)Math.Sin(DegreesToRadians((float)rotDegree))*x);

        // Move the context back into the view 
        c.TranslateCTM(-xxx,yyy);

        c.SetTextDrawingMode(CGTextDrawingMode.Fill);
        c.SetShouldSmoothFonts(true);

        MonoTouch.Foundation.NSString str = new MonoTouch.Foundation.NSString(text);            
        SizeF strSize = new SizeF();
        strSize = str.StringSize(UIFont.SystemFontOfSize(12));          

        RectangleF tmpR = new RectangleF(x,y,strSize.Width,strSize.Height);

        str.DrawString(tmpR,UIFont.SystemFontOfSize(12),UILineBreakMode.WordWrap,UITextAlignment.Right);
        c.RestoreState();
    } 
```

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-20T17:57:21.903

这里有一些代码将绘制围绕文本**左上角**正确旋转的文本。目前，我忽略了您对文本对齐的使用。

首先，一个实用方法在我们期望文本出现的地方绘制一个标记：

```
public void DrawMarker(float x, float y)
{
    float SZ = 20;

    CGContext c = UIGraphics.GetCurrentContext();

    c.BeginPath();
    c.AddLines( new [] { new PointF(x-SZ,y), new PointF(x+SZ,y) });
    c.AddLines( new [] { new PointF(x,y-SZ), new PointF(x,y+SZ) });
    c.StrokePath();
} 
```

以及绘制文本的代码（注意我已经用浮点数替换了所有 int 旋转，你可能想要否定你的旋转）：

```
public void DrawTextRotated(string text, float x, float y, float rotDegree)
{
    CGContext c = UIGraphics.GetCurrentContext();
    c.SaveState();

    DrawMarker(x,y);

    // Proper rotation about a point
    var m = CGAffineTransform.MakeTranslation(-x,-y);
    m.Multiply( CGAffineTransform.MakeRotation(DegreesToRadians(rotDegree)));
    m.Multiply( CGAffineTransform.MakeTranslation(x,y));
    c.ConcatCTM( m );

    // Draws text UNDER the point
    // "This point represents the top-left corner of the string’s bounding box."
    //http://developer.apple.com/library/ios/#documentation/UIKit/Reference/NSString_UIKit_Additions/Reference/Reference.html
    NSString ns = new NSString(text);
    UIFont font = UIFont.SystemFontOfSize(12);
    SizeF sz = ns.StringSize(font);
    RectangleF rect = new RectangleF(x,y,sz.Width,sz.Height);
    ns.DrawString( rect, font);

    c.RestoreState();
} 
```

绕点旋转需要将点平移到原点，然后旋转，然后再旋转回原点。`CGContext.TextMatrix`没有影响，`NSString.DrawString`所以你可以使用`ConcatCTM`.

对齐和换行模式没有任何影响。由于您使用`NSString.StringSize`的是 ，边界矩形适合整个文本，紧贴左右边缘。如果您使边界矩形的宽度变宽并使用 UITextAlignment.Right，您将获得正确的右对齐，但文本仍将围绕整个边界矩形的左上角旋转。我猜这不是你所期望的。

如果您希望文本围绕右上角旋转，请告诉我，我会相应地调整代码。

这是我在测试中使用的代码：

```
DrawTextRotated("Hello 0",100, 50, 0);
DrawTextRotated("Hello 30",100,100,30);
DrawTextRotated("Hello 60",100,150,60);
DrawTextRotated("Hello 90",100,200,90); 
```

干杯。

# c# - 如何理解 PHP WSDL

> ID：12463521
> 
> 赞同：1
> 
> 时间：2012-09-17T16:33:02.113
> 
> 标签：c#, php, wsdl

客户端（公司，而非应用程序）提供了一个指向基于 php 的 Web 服务的 URL。当我尝试使用 SOAPUI、WCFTestClient 或 SvcUtil 从其 url 工作时，都给出了不同级别的不成功。

看起来很像存在区分大小写的问题。SvcUtil 表示，例如：

> 错误：验证导出期间生成的某些 XML 模式时出错：未声明类型“http://www.w3.org/2001/XMLSchema: **datetime ”。**

请注意我认为应该是 DateTime 的情况。

有没有一种方法（工具？）可以帮助从不区分大小写的 WSDL 生成 C# 客户端/翻译？

请注意，我的网络服务经验并不丰富，客户对这个基本问题更不那么抱歉。谢谢！

# oracle - PLSQL CLOBS 成变量

> ID：12463526
> 
> 赞同：3
> 
> 时间：2012-09-17T16:33:14.853
> 
> 标签：oracle, plsql, oracle10g, oracle11g, plsqldeveloper

我正在尝试将 a 保存`CLOB`到变量中以执行提取等操作。我有这个代码：

```
DECLARE
  clob_rec CLOB;
  n_rec NUMBER:=100;
BEGIN
  SELECT LOB INTO clob_rec FROM table1 WHERE ID = 1234;
  n_rec := clob_rec.EXTRACT('//XPTO/text()', 'xmlns:XPTO').getNumVal();
END; 
```

我想将多个值从 保存`XML`到各种变量，例如`n_rec`. 如何获得“对象实例（CLOB）”来执行类似的功能或方法`extract()`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-18T04:33:57.377

您需要先将其转换为 XMLtype：

```
DECLARE
  clob_rec CLOB;
  n_rec NUMBER:=100;
  x XMLType;
BEGIN
  SELECT LOB INTO clob_rec FROM table1 WHERE ID = 1234;
  x := XMLType(clob_rec);
  n_rec := x.EXTRACT('//XPTO/text()', 'xmlns:XPTO').getNumVal();
END; 
```

# python - 对于unittest.TestCase子类，通过run方法执行测试用例时无法获取类属性

> ID：12463528
> 
> 赞同：3
> 
> 时间：2012-09-17T16:33:30.033
> 
> 标签：python, unit-testing, python-3.x, python-unittest

我想在测试方法中为类属性设置一个值，并在另一个测试方法中使用具有相同类属性的值。当我通过使用方法执行测试用例以正常方式尝试时`run`，得到错误为`AttributeError: 'Unit' object has no attribute 'b'`. 无论如何，我通过使用`global`变量找到了其他解决方案，并通过将类分配给变量找到了另一种解决方案。我可以知道为什么我无法检索我使用另一种方法设置的类属性的原因吗？另外，你能帮我解释一下`run`方法的实际过程吗？在此先感谢。

这是我尝试过的示例代码：

```
import unittest
class Unit(unittest.TestCase):
    def test_i(self):
        self.b=20
    def test_j(self):
        print self.b

suite=unittest.TestLoader().loadTestsFromTestCase(Unit)
unittest.TextTestRunner(verbosity=2).run(suite)
test_i (__main__.Unit) ... ok
test_j (__main__.Unit) ... ERROR

======================================================================
ERROR: test_j (__main__.Unit)
----------------------------------------------------------------------
Traceback (most recent call last):
File "<pyshell#52>", line 5, in test_j
AttributeError: 'Unit' object has no attribute 'b'

----------------------------------------------------------------------
Ran 2 tests in 0.078s

FAILED (errors=1)
<unittest.runner.TextTestResult run=2 errors=1 failures=0>

    #The two ways which I solved...
    #1.By Assinging class to a variable
 import unittest
 class Unit(unittest.TestCase):
         def test_i(self):
        Class=Unit
        Class.b=20
         def test_j(self):
    print self.b

suite=unittest.TestLoader().loadTestsFromTestCase(Unit)
unittest.TextTestRunner(verbosity=2).run(suite)
test_i (__main__.Unit) ... ok
test_j (__main__.Unit) ... 20
ok

----------------------------------------------------------------------
Ran 2 tests in 0.094s

OK
<unittest.runner.TextTestResult run=2 errors=0 failures=0>

#2.By using global attribute,but I need the class attribute value to be set and        retrieved

 import unittest
 class Unit(unittest.TestCase):
     def test_i(self):
     global b,
     b=20
     def test_j(self):
     print b

suite=unittest.TestLoader().loadTestsFromTestCase(Unit)
unittest.TextTestRunner(verbosity=2).run(suite)
test_i (__main__.Unit) ... ok
test_j (__main__.Unit) ... 20
ok

----------------------------------------------------------------------
Ran 2 tests in 0.063s

OK
<unittest.runner.TextTestResult run=2 errors=0 failures=0> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T18:38:10.547

该属性不会出现在实例中，因为每个测试都在其自己的实例中执行，如您在此代码中所见：

```
import unittest
class Unit(unittest.TestCase):
    def __init__(self, *args, **kwargs):
        print('init!')
        super(Unit, self).__init__(*args, **kwargs)

    def test_i(self):
        self.b = 20
    def test_j(self):
        print(self.b)

suite = unittest.TestLoader().loadTestsFromTestCase(Unit)
unittest.TextTestRunner(verbosity=2).run(suite) 
```

哪个打印：

```
init!
init!
test_i (__main__.Unit) ... ok                                                                 
test_j (__main__.Unit) ... ERROR                                                              

======================================================================                        
ERROR: test_j (__main__.Unit)                                                                 
----------------------------------------------------------------------                        
Traceback (most recent call last):                                                            
  File "prova.py", line 10, in test_j                                                         
    print(self.b)
AttributeError: 'Unit' object has no attribute 'b'

----------------------------------------------------------------------
Ran 2 tests in 0.000s

FAILED (errors=1) 
```

注意两个“init！” 一开始。

这样做是因为每个测试不应该依赖于其他测试。有一个特定的设置方法，您应该使用它来为您的测试设置正确的环境。

如果您想要不同的设置，那么也许您应该考虑将这些测试拆分为单独的测试用例。

使用类变量或全局变量显然是有效的，因为类没有被删除，并且全局变量不会为每个测试清除。

附带说明：类被实例化更多次的事实在[文档](http://docs.python.org/library/unittest.html#organizing-test-code)中非常清楚。正如您所看到的，当他们创建时，`TestSuite`他们会添加每个新的测试来实例化类并将测试名称作为参数传递。这只`loadTestsFromTestCase`是以这种方式创建的捷径`TestSuite`。

# twitter - twitter 流 API 跟踪关键字中精确二元组匹配的编码空间

> ID：12463529
> 
> 赞同：1
> 
> 时间：2012-09-17T16:33:36.833
> 
> 标签：twitter, url-encoding, twitter-streaming-api

我正在使用 Twitter 流 API。它对单个单词非常有效，但似乎无法通过精确的二元组（两个单词串）过滤。

我正在通过搜索常用词来测试这一点，这些词通常组合在一起：

```
e.g. "feel good" 
```

这是 URL：（需要 OAuth 登录）：

> [https://stream.twitter.com/1.1/statuses/filter.json?track=keywords_go_here](https://stream.twitter.com/1.1/statuses/filter.json?track=keywords_go_here)

不起作用的事情：

```
track=feel%20good ==> still produces: "text":"Feels so good outside!..."
track=%27feel%20good%27 ==> produces nothing
track=feel%20good, ==> still produces "good that my friend has an ED too because I can feel..." 
```

关于让它发挥作用的任何想法？

编辑：有人在 2010 年初回答了这个问题：[Twitter Streaming API - tracking exact multiple keywords in exact order](https://stackoverflow.com/questions/2769154/twitter-streaming-api-tracking-exact-multiple-keywords-in-exact-order?rq=1)，但是这个问题有什么更新吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T08:38:21.003

似乎您可以根据 api 进行搜索：[https ://dev.twitter.com/docs/using-search](https://dev.twitter.com/docs/using-search)

> “欢乐时光”包含确切的短语“欢乐时光”

只需将您的短语放在引号中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-28T19:39:22.663

我很抱歉，但[答案](https://dev.twitter.com/streaming/overview/request-parameters#track)是

> 不支持短语的精确匹配（相当于大多数搜索引擎中的引用短语）。

此外，

> 标点符号和特殊字符将被视为与其相邻的术语的一部分。

因此，如果您进行跟踪`"feel good"`，您将收到诸如

> 他说，“感受一下”，我回答说，“我很好”。

如果您想要完全匹配，那么您有两个选择：

A) 跟踪这两个术语，然后丢弃所有不完全匹配的推文，或者

[B) 使用Gnip](http://gnip.com/)或[DataSift](http://datasift.com/)付费订阅 Twitter firehose 。Twitter 靠这样的东西谋生，所以我认为它永远不会在 Streaming API 上可用。

# javascript - 在使用 window.location 重定向后的弹出窗口中，window.close 变为未定义

> ID：12463530
> 
> 赞同：1
> 
> 时间：2012-09-17T16:33:37.770
> 
> 标签：javascript, google-chrome, redirect, popup

这是正在发生的事情......

`window.location`我的网站重定向到用于重定向回我的网站的第三方网站。所有这一切都发生在一个弹出窗口内。

我面临的问题是在 Chrome 中，在重定向`window.close`与`undefined`其他一些属性（如`window.opener` 任何想法如何关闭此窗口？

作为第三方网站，对重定向的发生方式没有太多控制。

我`window.location`在我的一个页面中进行了更改以重定向到另一个页面，并且在该页面中这个问题是可重现的。

编辑：

问题不是`window.location`重定向，而是其他问题......试图进一步调试它，但已经找到了解决方案并在这个问题中得到了回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T16:37:13.980

一旦打开的窗口导航到与父级不同的域，您就无法再从父级访问该窗口。

要解决此问题，您可以在您的网站上创建一个页面，该页面仅包含一个`iframe`属性`src`设置为适当的 3rd 方网站 url。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T09:24:31.020

这个问题的第一个答案有效： [window.close 和 chrome的问题](https://stackoverflow.com/questions/2032640/problem-with-window-close-and-chrome)

```
window.open('','_self', '');
window.close(); 
```

这行得通......我能想到的唯一原因是，在调用`window.open`窗口对象时，在弹出窗口中重新初始化，因此`window.close()`不会返回`undefined`。

# vb.net - 无需 XML 编辑即可动态创建 RDLC 报告

> ID：12463531
> 
> 赞同：0
> 
> 时间：2012-09-17T16:33:43.710
> 
> 标签：vb.net, report, rdlc, dynamically-generated

大多数人会建议使用众多 XML 编辑器中的一种来根据用户选择创建自定义的 RDLC XML，并将该报告传递给 Microsoft 的 Report Viewer 对象。我目前在我的代码的早期版本中实现了这个方法。然而，它是凌乱的，冗长的，至少可以说缺乏口才。

以前的研究，我不记得我在哪里看到的，这让我相信有一种方法可以创建数据集，通过代码动态地创建一个适配器来填充数据集，然后拥有该数据集。 writeXML() 以生成可传递给 Microsoft Report Viewer 对象的功能齐全的 XML 副本。

再次澄清一下，我不想使用 XML 类来编写我的报告。我想根据用户选择通过代码构建我的数据集，让数据集写出 XML，然后将其传递给 Reporting 对象。

出于某种原因，我发现的很多东西都偏爱 ASP.NET，我还没有完全了解它的工作原理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T18:22:31.003

看来我要做的是写出 RDL（报告定义语言）。此 RDL 是 Microsoft Report Viewer 解释的一组标记，以便为最终用户生成可查看的对象。数据集是该 RDL 定义的一个元素，因此它实际上无法生成 RDL 本身。有点像生了妈妈的宝宝。以下是我发现的一些优秀资源，可以深入了解 RDL 文件的元素。 [这里](http://msdn.microsoft.com/en-us/library/aa337423%28v=sql.105%29.aspx)

# oracle - Oracle：对日期间隔的高效查询

> ID：12463532
> 
> 赞同：0
> 
> 时间：2012-09-17T16:33:49.440
> 
> 标签：oracle, datetime, intervals

我有表示事件的开始和结束时间的表（存储为 DATE、TIMESTAMP 或 TIMESTAMP WITH TIME ZONE 格式），例如

```
MY_TABLE:
DATA       START           END  
A      1/11/2012 10:00    1/11/2012 12:00
B      2/12/2012 08:00    2/12/2012 16:00 
```

而且它经常碰巧在一段时间内对这些表进行查询，例如

```
SELECT data
  FROM my_table
 WHERE start BETWEEN t1 AND t2; -- usually we either use start or end time for every row. 
```

其中 t1 和 t2 是 DATE/TIMESTAMP 值 st t1<= t2。

由于这些查询将在大型表上运行，是否有更好的，即更有效的方式来执行上述查询？

目前我不知道是否有任何具有上述结构的表在任一时间数据列上都有索引，但添加它们仍然不是问题。它们在其他非时间相关的列上有索引。

我记得读过一些文章，使用分析函数（如分区）可以使这类查询比简单地使用 BETWEEN..AND 更有效。不幸的是，我再也找不到链接，也不知道分析功能，我在网上到处阅读了一些简短的介绍。

由于我没有多少时间进行调查，我想问您是否可以证实我的理论，以及您是否可以引导我找到与我的问题相关的示例。

不用说，我不是要您快速回答我的问题，要复制和粘贴的内容，只是提示您了解我是否在寻找正确的方向。

TIA

**编辑：** @jonearles：对于第一个陈述，我同意，但我想知道分析功能的使用是否**实际上**不能提供更有效的查询。

对于后者，是的，我的意思是 PARTITION BY 子句。在我看来，这是一个愚蠢的规范，因为预计分析函数将与 PARTITION BY 子句一起使用。我为混乱道歉，正如我之前所说，我没有深入研究这个主题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T18:24:15.543

您的查询可能没问题。编写谓词的最简单方法通常是最好的。这正是 Oracle 所期望的，并且很可能是 Oracle 优化的目标。

您可能想研究创建对象以改进访问方法。特别是[索引](http://docs.oracle.com/cd/E11882_01/server.112/e26088/statements_5012.htm#i2062403)（如果您选择少量数据）和[分区](http://docs.oracle.com/cd/E11882_01/server.112/e25523/toc.htm)（如果您选择大量数据）。

“分区”在 Oracle 中至少可以表示三种不同的含义。也许您将分析函数中的“partition by”子句与分区混淆了？

# php - Opencart - round() 函数

> ID：12463535
> 
> 赞同：0
> 
> 时间：2012-09-17T16:33:56.263
> 
> 标签：php, opencart, rounding

我有`<?php echo $product['price']+$product['price']*14/100; ?>`在 opencart 管理员（目录/产品）中显示 TAX 价格的代码。

但我必须得到完整的价格。

例如，我的价格为“298.9992”，但我必须有“299”等。

你能帮助我吗？

太感谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T16:42:03.040

只需使用不带第二个参数的 round 或使用 0 作为值。

示例：

```
round(298.9992);
round(298.9992,0); 
```

欲了解更多信息： http: [//php.net/manual/en/function.round.php](http://php.net/manual/en/function.round.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T16:46:04.353

利用

```
round($product, 0, PHP_ROUND_HALF_UP); 
```

把你的价格四舍五入。

有关详细信息，请参阅[round() 函数](http://php.net/manual/en/function.round.php)。

# sencha-touch - Sencha Touch 2 点击按钮获取当前位置

> ID：12463538
> 
> 赞同：1
> 
> 时间：2012-09-17T16:34:04.983
> 
> 标签：sencha-touch, sencha-touch-2

我有一个工具栏按钮，单击该按钮应将我的地图更新到当前位置。我找不到此功能的工作示例，希望有人能给我建议。请参阅下面的示例代码 - 感谢您的帮助

地图：

```
Ext.define('MyApp.view.Myap', {
    extend: 'Ext.Map',
    alias: 'widget.mymap',
    config: {
        useCurrentLocation: false,
        mapOptions:{
            zoom: 9,
            center: new google.maps.LatLng(42.2, -72.5),
            mapTypeId: google.maps.MapTypeId.ROADMAP
        },
        listeners: {
            maprender : function(comp, map){
                google.maps.event.addListenerOnce(map, "idle", function () {
                    var host = window.location.origin ? window.location.origin : window.location.protocol + "/" + window.location.host;
                    var kmlOptions = {preserveViewport: false}
                    var now = +new Date();
                    var layer = new google.maps.KmlLayer(host + '/path/to.kml?timestamp=' + now, kmlOptions);
                    layer.setMap(map);
                    return layer;
                });  
            },
        }
    },
}) 
```

工具栏按钮：

```
Ext.define('MyApp.view.btnLocateMe', {
    extend: 'Ext.Button',
    alias: 'widget.btnlocateme',

    config: {
        ui: 'normal',
        iconCls: 'locate',
        iconMask: true,
        text: 'Locate Me',
        listeners: [
            {
                fn: 'onButtonTap',
                event: 'tap'
            }
        ]
    },

    onButtonTap: function(button, e, options) {
        //Produces error: cannot call method of undefined
        currentLocation: new google.maps.LatLng(this._geo.getLatitude(), this._geo.getLongitude());
        MyApp.view.MyMap.map.setCenter(currentLocation);
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T04:02:42.520

我有一个建议。

尝试将当前位置更改为

```
new google.maps.LatLng( this.geo.getLatitude(),this.geo.getLongitude() ) ; 
```

[我想你可以在这里](https://stackoverflow.com/questions/10053132/sencha-button-stop)从这个问题中收集更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T02:44:03.273

我的两分钱贡献，试试这个

1) 在 MyApp.view.Myap 中替换

> ```
>  useCurrentLocation: false, 
> ```

经过

> ```
>  useCurrentLocation : {
>            autoUpdate : false
>        }, 
> ```

您还应该将 currentLocation 声明为变量（我想）

> ```
>  var currentLocation = ... 
> ```

这应该有效。我在 onButtonTap 中使用了与您类似的逻辑，但在控制器内部没有问题

此致

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-18T09:14:42.653

The simplest way - switch to the another map view with option **useCurrentLocation**: **true** set in the config

# graphviz - graphviz中的子图布局

> ID：12463541
> 
> 赞同：6
> 
> 时间：2012-09-17T16:34:07.567
> 
> 标签：graphviz, rank, subgraph

我有显示两个子图的代码：

```
graph {
    rankdir=LR;
    subgraph cluster01 {
        label="t=0"
        a0 [label="A"];
        a1 [label="B"];
        a2 [label="C"];
        a5 [label="E"];
        a0 -- a1;
        a1 -- a2 ;
        a2 -- a0;
    };

    subgraph cluster02
    {
        label="t=10"
        b0 [label="A"];
        b5 [label="E"];
        b1 [label="B"];
        b2 [label="C"];

        b0 -- b1;
        b2 -- b5;
    };

    a0--b0 [style=dotted];
    a1--b1 [style=dotted];
    a2--b2 [style=dotted];
    a5--b5 [style=dotted];
} 
```

此代码显示两个子图，如下所示：

![http://i.stack.imgur.com/F23SY.png](../Images/6be01d57032af6baa303ad7ad2c1cdb5.png)

但我想要这样：

![http://i.stack.imgur.com/jUpIp.png](../Images/19857d1d2fb06ceee0bee083b84ae1ab.png)

我希望有人能帮助我修复“rankdir”以完成它。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-17T18:49:14.133

以下是通过使用**不可见边缘**和**`constraint=false`**在某些边缘上实现的：

![图形输出](../Images/52ac6ad37941cc7af5e178fd9ada7638.png)

```
graph {
    rankdir=LR;
    subgraph cluster01 {
        label="t=0";
        a0 [label="A"];
        a1 [label="B"];
        a2 [label="C"];
        a5 [label="E"];
        a0 -- a1;
        a1 -- a2;
        a2 -- a5 [style=invis];
        a2 -- a0 [constraint=false];
    };

    subgraph cluster02
    {
        label="t=10"
        b0 [label="A"];
        b5 [label="E"];
        b1 [label="B"];
        b2 [label="C"];

        b0 -- b1;
        b1 -- b2 [style=invis];
        b2 -- b5;
    };

    edge[constraint=false];
    a0--b0 [style=dotted];
    a1--b1 [style=dotted];
    a2--b2 [style=dotted];
    a5--b5 [style=dotted];
} 
```

# java - 使用 String.replaceAll() 将字符串中的 ' 替换为 \'

> ID：12463543
> 
> 赞同：-5
> 
> 时间：2012-09-17T16:34:19.627
> 
> 标签：java, string

替换**`'`**为**`\'`**使用`String.replaceAll()`不起作用。

```
String t="It can't be done";
String title=t.replaceAll("'", "\\\'");
syso(title); 
```

预期输出：无法完成

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T16:36:36.080

您可能需要双重转义斜线。

```
t.replaceAll("'", "\\'") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T16:38:18.763

不寻常的输出，但你需要一个额外的斜线`\`：

```
t.replaceAll("'", "\\\\'") 
```

# facebook-ios-sdk - 'FBSession: 未提供 AppID

> ID：12463544
> 
> 赞同：6
> 
> 时间：2012-09-17T16:34:20.943
> 
> 标签：facebook-ios-sdk

我刚刚使用适用于 iOS 的新 Facebook 3.0 SDK 更新了我的应用程序。在此之前，我使用的是使用 FBSessionDelegate 和 FBRequestDelegate 的 SDK。在那个 SDK 中，我们必须将此代码放在 applicationDidFinishLaunching 中：

```
 facebook = [[Facebook alloc] initWithAppId:FB_APP_ID andDelegate:self];

NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
if ([defaults objectForKey:@"FBAccessTokenKey"] 
    && [defaults objectForKey:@"FBExpirationDateKey"]) {
    facebook.accessToken = [defaults objectForKey:@"FBAccessTokenKey"];
    facebook.expirationDate = [defaults objectForKey:@"FBExpirationDateKey"];
} 
```

但是现在有了新的 3.0 SDK，我被告知我们所要做的就是导入框架和资源包，然后“将名为 FacebookAppID 的 ID 添加到包 *.plist” 所以我已经这样做了，但是当我调用其中包含 FBSession 的任何代码，我收到此错误：

```
 'FBSession: No AppID provided; either pass an AppID to init, or add a string valued key with the appropriate id named FacebookAppID to the bundle *.plist' 
```

我可能做错了什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-04T14:36:50.910

在 plist 文件中有“FacebookAppID”条目就足够了。

但是，在将“FacebookAppID”字符串从文档网站复制到 Xcode 中的 plist 文件后，我遇到了同样的问题。从 plist 文件中删除“FacebookAppID”条目并**通过实际输入重新输入后**，它起作用了！

因此，当将字符串“FacebookAppID”从 HTML 文件复制/粘贴到 plist 文件时，一些不可见的标记也被复制或字符编码搞砸了。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-05-18T20:27:42.237

只是为了抬头。我今天遇到了这个问题，最终我只是注意到我只是将条目放在了**错误的 .plist 文件中。** 如果你过滤你的项目文件（向下）**`.plist`**，你可能会看到两个文件。一个是测试，另一个是您实际需要设置的。祝你好运！

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-17T19:35:51.057

我仍然不确定为什么会发生这种情况，但我的解决方法是检查 FBSession 对象是否具有 APP_ID，如果没有，则手动设置它：

```
if (![FBSession defaultAppID]) {
    [FBSession setDefaultAppID:FB_APP_ID];
} 
```

希望这对某人有帮助！

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-11-14T16:05:54.230

就我而言，我愚蠢地输入了带有小写“d”的 FacebookAppId。只是把它放出来以防万一有人遇到同样的问题。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-09-20T15:15:02.730

@Kwame 我遇到了同样的问题，您的会话对象缺少 App id。为此，您可以在名为 FacebookAppID 的 info.plist 中添加一个键，并使用 facebook 提供给您的 ios 应用程序的应用程序 ID 设置适当的值。或者，如果您已经这样做了，您可以通过在方法中设置适当的值以编程方式设置应用程序 ID `- (id)initWithAppID:(NSString*)appID permissions:(NSArray*)permissions urlSchemeSuffix:(NSString*)urlSchemeSuffix tokenCacheStrategy:(FBSessionTokenCachingStrategy*)tokenCachingStrategy;`。还请交叉检查 info.plist 中的应用程序 ID 的值。希望这可以帮助。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-10-31T17:06:56.637

您在此处可能犯的另一个错误是使用快速搜索来搜索“plist”，而没有注意到您将 App ID 添加到错误的 plist 文件中。如果你已经包含了像谷歌地图 SDK 这样的框架，它有自己的 plist 文件。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-09-10T07:18:34.447

AppDelegate.swift

```
import FBSDKCoreKit
func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplicationLaunchOptionsKey: Any]?) -> Bool {

    FBSDKApplicationDelegate.sharedInstance().application(application, didFinishLaunchingWithOptions: launchOptions)
    FBSDKSettings.setAppID("FacebookAppID")

    return true
}

func application(_ app: UIApplication, open url: URL, options: [UIApplicationOpenURLOptionsKey : Any] = [:]) -> Bool {
if FBSDKApplicationDelegate.sharedInstance().application(app, open: url, options: options) {
    return true
}

return true
} 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2014-07-08T16:54:43.337

只是除了以前的答案：即使您注意到您将 FacebookAppID 添加到**错误**的*.plist 文件中并且仍然有相同的错误，请**再次**检查。可能，您将其替换为*另一个*错误的 *.plist

# scala - 为什么向量这么浅？

> ID：12463547
> 
> 赞同：7
> 
> 时间：2012-09-17T16:34:25.003
> 
> 标签：scala, collections, vector, clojure, tree

Scala 的向量的分支因子为 32 而不是其他数字的基本原理是什么？较小的分支因子不会实现更多的结构共享吗？Clojure 似乎使用相同的分支因子。我缺少的分支因子 32 有什么神奇之处吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-17T16:45:42.560

如果您解释什么是分支因子会有所帮助：

*树或图的分支因子是每个节点的子节点数。*

因此，答案似乎主要在这里：

[http://www.scala-lang.org/docu/files/collections-api/collections_15.html](http://www.scala-lang.org/docu/files/collections-api/collections_15.html)

> 向量表示为具有高分支因子的树。每个树节点最多包含 32 个向量元素或最多包含 32 个其他树节点。最多可包含 32 个元素的向量可以在单个节点中表示。最多 32 * 32 = 1024 个元素的向量可以用单个间接表示。从树的根到最终元素节点的两跳足以用于具有最多 2 ^(15 个)元素的向量，三跳用于具有 2 ^(20)的向量，四跳用于具有 2 ^(25 个)元素的向量，五跳用于具有最多 2 ^(30的向量)元素。因此，对于所有合理大小的向量，一个元素选择涉及最多 5 个原始数组选择。这就是我们在写元素访问是“有效的恒定时间”时的意思。

因此，基本上，他们必须就每个节点有多少个孩子做出设计决定。正如他们解释的那样，32 似乎是合理的，但是，如果您发现它对您来说过于严格，那么您总是可以编写自己的类。

有关为什么它可能是 32 的更多信息，您可以查看这篇论文，因为在介绍中他们做了与上面相同的声明，关于它几乎是恒定的时间，但这篇论文似乎更多地处理 Clojure，而不是 Scala。

[http://infoscience.epfl.ch/record/169879/files/RMTrees.pdf](http://infoscience.epfl.ch/record/169879/files/RMTrees.pdf)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-17T16:58:09.300

詹姆斯布莱克的回答是正确的。选择 32 项的另一个论据可能是，许多现代处理器中的高速缓存行大小为 64 字节，因此在 32 位机器或 64 位 JVM 上，两行可以容纳 32 个整数，每个 4 字节，或 32 个指针，堆大小高达32GB 由于指针压缩。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-17T16:47:59.267

这是更新的“有效恒定时间”。有了这么大的分支因子，您永远不必超过 5 个级别，即使是 TB 级的向量也是如此。这是 Rich 在第 9 频道上谈论 Clojure 的其他方面的视频。http [://channel9.msdn.com/Shows/Going+Deep/Expert-to-Expert-Rich-Hickey-and-Brian-Beckman-Inside -Clojure](http://channel9.msdn.com/Shows/Going+Deep/Expert-to-Expert-Rich-Hickey-and-Brian-Beckman-Inside-Clojure)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-17T17:06:12.917

只是在詹姆斯的回答中添加一点。

从算法分析的角度来看，![http://www.texify.com/img/%5CLARGE%5C%21O%28log%20_b%20%28N%29%29%20%3D%20O%28log%20_k%20%28N%29%29.gif](../Images/7fe8152f05cd6ac14799ca57d4e78ccd.png)因为这两个函数的增长是对数的，所以它们的缩放方式相同。

但是，在实际应用中，与 ![在此处输入图像描述](../Images/1e9c299bc8b1170526edeea0fef2512e.png)例如以 2 为基数相比，具有跳数的跳数要少得多，足以使其更接近于恒定时间，即使对于相当大的 N 值也是如此。

我敢肯定，由于某些内存块大小，他们准确地选择了 32 个（而不是更高的数字），但主要原因是与较小的大小相比，跳数较少。

我还建议您在 InfoQ 上观看此演示文稿，Daniel Spiewak 从大约 30 分钟开始讨论 Vectors：http: [//www.infoq.com/presentations/Functional-Data-Structures-in-Scala](http://www.infoq.com/presentations/Functional-Data-Structures-in-Scala)

# android - Android：如何使用相对路径从网络服务器（mysql）获取图像？

> ID：12463549
> 
> 赞同：1
> 
> 时间：2012-09-17T16:34:26.607
> 
> 标签：android, mysql, image, webserver, relative-path

我已经知道如何使用 PHP+MySQL 获取图像的 URL 路径并将其转换为 android 中的位图。但现在我想从另一种方式获取图像。如果图像是通过 MySQL 中的相对路径存储的，如何将其转换为位图？有教程或演示吗？

# php - 使用 PHP 重命名 XML 节点

> ID：12463550
> 
> 赞同：1
> 
> 时间：2012-09-17T16:34:31.057
> 
> 标签：php, xml

我试图弄清楚如何使用 PHP 重命名 XML 中的节点？

我已经走到这一步了：

```
$dom = new DOMDocument( '1.0' );
$dom->preserveWhiteSpace = false;
$dom->formatOutput = true;

// load the xml file
$dom->loadXML( '<?xml version="1.0" encoding="ISO-8859-1"?>
<library>
  <data>
    <invite>
      <username>jmansa</username>
      <userid>1</userid>
    </invite>
    <update>1</update>
  </data>
</library>', LIBXML_NOBLANKS );
$xpath = new DOMXPath($dom);

//find all 'data' nodes.
$node = $xpath->query("//data");

// if found
if( $node->length ) {
    foreach ($node as $n) {
       // RENAME HERE? //
    }
}

echo "<xmp>". $dom->saveXML() ."</xmp>"; 
```

现在，我想重命名`<data>`为`<invites>`. 这可以做到吗？如果可以，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T16:39:24.813

节点的名称（分别为“数据”或“邀请”）不能通过 DOM 重命名，因为[Node::nodeName 属性是只读的](http://php.net/manual/en/class.domnode.php)。

您可以创建一个名为“邀请”的新节点，将其附加到“数据”节点之前，将“数据”的子节点移动到新的“邀请”节点，删除“数据”节点，然后输出树以获得您的结果。

**例子：**

```
<?php
// Create a test document.
    $dom = new DOMDocument( '1.0' );
    $dom->preserveWhiteSpace = false;
    $dom->formatOutput = true;

// Load the xml file.
    $dom->loadXML('<?xml version="1.0" encoding="ISO-8859-1"?'.'>
    <library>
      <data attr1="1" attr2="2">
        <invite>
          <username>jmansa</username>
          <userid>1</userid>
        </invite>
        <update>1</update>
      </data>
    </library>', LIBXML_NOBLANKS );
    $xpath = new DOMXPath($dom);

    // Convert <data> to <invites>.
    if ($dataNode = $xpath->query("/library/data")->item(0))
    {
    // Create the <invites> node.
        $invitesNode = $dom->createElement('invites');
        $dataAttrs   = $dataNode->attributes;
        foreach ($dataAttrs as $dataAttr)
        {   $invitesNode->setAttributeNodeNS($dataAttr->cloneNode());   }
        $dom->documentElement->appendChild($invitesNode);

    // Move the <data> children over.
        if ($childNodes = $xpath->query("/library/data/*"))
        {
            foreach ($childNodes as $childNode)
            {   $invitesNode->appendChild($childNode);  }
        }

    // Remove <data>.
        $dataNode->parentNode->removeChild($dataNode);
    }

// Test the result.
    echo $dom->saveXML();
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T15:06:01.207

我的解决方案，带有扩展的测试用例：

```
// Changes the name of element $element to $newName.
function renameElement($element, $newName) {
  $newElement = $element->ownerDocument->createElement($newName);
  $parentElement = $element->parentNode;
  $parentElement->insertBefore($newElement, $element);

  $childNodes = $element->childNodes;
  while ($childNodes->length > 0) {
    $newElement->appendChild($childNodes->item(0));
  }

  $attributes = $element->attributes;
  while ($attributes->length > 0) {
    $attribute = $attributes->item(0);
    if (!is_null($attribute->namespaceURI)) {
      $newElement->setAttributeNS('http://www.w3.org/2000/xmlns/',
                                  'xmlns:'.$attribute->prefix,
                                  $attribute->namespaceURI);
    }
    $newElement->setAttributeNode($attribute);
  }

  $parentElement->removeChild($element);
}

function prettyPrint($d) {
  $d->formatOutput = true;
  echo '<pre>'.htmlspecialchars($d->saveXML()).'</pre>';
}

$d = new DOMDocument( '1.0' );
$d->loadXML('<?xml version="1.0"?>
<library>
  <data a:foo="1" x="bar" xmlns:a="http://example.com/a">
    <invite>
      <username>jmansa</username>
      <userid>1</userid>
    </invite>
    <update>1</update>
  </data>
</library>');

$xpath = new DOMXPath($d);
$elements = $xpath->query('/library/data');
if ($elements->length == 1) {
  $element = $elements->item(0);
  renameElement($element, 'invites');
}

prettyPrint($d); 
```

顺便说一句，我将此解决方案作为[注释](http://www.php.net/manual/en/class.domelement.php#111494)添加到`DOMElement`.

# c - C中的定时器库

> ID：12463554
> 
> 赞同：9
> 
> 时间：2012-09-17T16:35:00.730
> 
> 标签：c, linux, multithreading

我正在寻找一个用 C 编写的开源计时器库。该库应该具有 Timer 回调函数等。

在搜索时，我看到**POSIX 计时器**或**setitimer()**，它们使用基于信号的方法，这可能会导致多线程代码出现问题。

假设我在线程代码中使用 POSIX 计时器，信号将不会到达正确的位置。如果我在一个进程中使用多个计时器，那么每个计时器都应该使用不同的信号。还有其他选择吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-17T16:44:38.203

由于您运行的是 Linux，我建议您使用内置的 POSIX 计时器 API。

```
int timer_create(clockid_t clockid, struct sigevent *sevp, timer_t *timerid); 
```

这是一些[文档](http://www.kernel.org/doc/man-pages/online/pages/man2/timer_create.2.html)的链接，展示了如何使用为回调函数提供支持的 POSIX 计时器。

关于一个进程中的多个计时器，文档是这样说的：

```
 A program may create multiple interval timers using timer_create().

   Timers are not inherited by the child of a fork(2), and are disarmed and
   deleted during an execve(2).

   The kernel preallocates a "queued real-time signal" for each timer created
   using timer_create().  Consequently, the number of timers is limited by the
   RLIMIT_SIGPENDING resource limit (see setrlimit(2)). 
```

**请注意，通过使用 SIGEV_THREAD_ID 设置通知，可以在线程应用程序中使用 POSIX 计时器，如下所示：**

```
The sevp.sigev_notify field can have the following values:

       SIGEV_NONE
              Don't asynchronously notify when the timer expires.  Progress of the
              timer can be monitored using timer_gettime(2).

       SIGEV_SIGNAL
              Upon timer expiration, generate the signal sigev_signo for the process.
              See sigevent(7) for general details.  The si_code field of the
              siginfo_t structure will be set to SI_TIMER.  At any point in time, at
              most one signal is queued to the process for a given timer; see
              timer_getoverrun(2) for more details.

       SIGEV_THREAD
              Upon timer expiration, invoke sigev_notify_function as if it were the
              start function of a new thread.  See sigevent(7) for details.

       SIGEV_THREAD_ID (Linux-specific)
              As for SIGEV_SIGNAL, but the signal is targeted at the thread whose ID
              is given in sigev_notify_thread_id, which must be a thread in the same
              process as the caller.  The sigev_notify_thread_id field specifies a
              kernel thread ID, that is, the value returned by clone(2) or gettid(2).
              This flag is only intended for use by threading libraries. 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-17T20:12:02.867

Linux 的做法是通过[timerfd_create](http://linux.die.net/man/2/timerfd_create)与基于 epoll 的事件循环很好地集成（从而避免信号处理程序的限制）

* * *

## 回答 #3

> 赞同：-6
> 
> 时间：2012-09-17T16:53:38.837

为其创建库非常简单。

例子：

 `````
#include <time.h>
int main()
{
    time_t start,end;
    double dif;
    double duration=40f; //duration of timer
    bool loop=true;
    while(loop==true)
    {
        time(&start);
        if(dif==duration)
        {
            /*callback*/
            dif=0;
        }
        //do stuff
        time(&end);
        dif+=difftime(end,start);
    }
{ 
`````

# php - 双三次插值中的大量伪影；怎么修？

> ID：12463555
> 
> 赞同：3
> 
> 时间：2012-09-17T16:35:01.477
> 
> 标签：php, algorithm, interpolation, polynomial-math, bicubic

我正在尝试实现双三次插值算法来从高度图中重建更高分辨率的数据。经过一些错误和包含几乎无法理解的数学的指令集（我已经有几年没有微积分了，除了基础知识我不再记得太多了），我发现 Paul Bourke 的文章“图像缩放的双三次插值”包含什么似乎是一个相当简单且易于实现的算法。[http://paulbourke.net/texture_colour/imageprocess/](http://paulbourke.net/texture_colour/imageprocess/)

但是，我并没有产生与维基百科上的插值结果很相似的插值结果，而是得到了这个（来自相同的输入数据）：

![在此处输入图像描述](../Images/d5fa9b346b553b06378cd0f2e59b5c31.png)

是什么导致了错误，更重要的是 - 如何修复它？

下面的 PHP 代码（是的，这可能应该 - 并且将会 - 在 C 中重新实现；当它工作时）

```
class BicubicInterpolator
{
    private $data;
    public function Set_data($d)
    {
        $this->data=$this->denull($d);
    }
    public function Interpolate($dx,$dy)
    {   
        $r=0;
        for ($m=-1; $m<2; $m++)
            for ($n=-1; $n<2; $n++)
                $r+=$this->data[$m+1][$n+1] * $this->R($m-$dx) * $this->R($dy-$n);
        return $r;
    }
    private function denull($d)
    {
        //Substituting null values with nearest known values as per "A Review of Some Image Pixel Interpolation Algorithms" by Don Lancaster (supposed to produce same output as example image)
        if ($d[0][1]===null) for ($i=0; $i<4; $i++) $d[0][$i]=$d[1][$i];
        if ($d[1][0]===null) for ($i=0; $i<4; $i++) $d[$i][0]=$d[$i][1];
        if ($d[3][1]===null) for ($i=0; $i<4; $i++) $d[3][$i]=$d[2][$i];
        if ($d[1][3]===null) for ($i=0; $i<4; $i++) $d[$i][3]=$d[$i][2];
        return $d;
    }
    function R($x)
    {
        return (      $this->P($x+2)
            - 4 * $this->P($x+1)
            + 6 * $this->P($x)
            - 4 * $this->P($x-1) )/6;
    }
    function P($x)
    {
        if ($x>0) return $x*$x*$x;
        return 0;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T20:52:38.113

最后，我切换到了另一种算法，该算法基于 Don Lancaster 概述的算法与“C 中的数值食谱”（第 2 版）第 3.6 章中的导数和交叉导数公式的组合，p136。

这与两个小的调整相结合：

1.  函数计算缓存了最后一个 y 坐标的中间值集（具有相同 y 参数的连续 Interpolate(x,y) 调用将需要四次乘法和三次加法，从而减少处理时间）
2.  一组导数可作为公共访问，允许后两个作为坐标 (x, y+1) 中的网格单元的前两个传递，并将获得每个单元的每个导数集所需的计算量减半.

这是实现，没有明显的故障：

```
class BicubicInterpolator
{
    private $last_y;
    private $last_y_a;
    private $a;
    public $x;
    public function __construct()
    {
        for ($i=0;$i<4;$i++)
            $this->x[$i]=false;
    }
    public function Set_data($d)
    {
        $d=$this->denull($d);
        $x=$this->x;
        for ($j=1; $j<3; $j++)
            for ($k=1; $k<3; $k++)
            {
                $r=($j-1)*2+($k-1);
                $w[$r]=$d[$j][$k];
                //Derivatives and cross derivatives calculated as per Numerical Recipes in C, 2nd edition.
                if (!$x[$r]) $x[$r]=( $d[$j][$k+1] - $d[$j][$k-1] ) / 2;
                $y[$r]=( $d[$j+1][$k] - $d[$j-1][$k] ) / 2;
                $z[$r]=( $d[$j+1][$k+1]-$d[$j+1][$k-1]-$d[$j-1][$k+1]+$d[$j-1][$k-1] )/4;
            }
        $this->x=$x;
        /* Coefficient calculation as per "A Review of Some Image Pixel Interpolation Algorithms" by Don Lancaster, 
        + addressing changed to (x,y) instead of (y,x)
        + reformulated to minimize the number of multiplications required */
        $this->a[0][0] = $w[0];
        $this->a[1][0] = $y[0];
        $this->a[2][0] = 3*($w[2]-$w[0])-2*$y[0]-$y[2];
        $this->a[3][0] = 2*($w[0]-$w[2])+$y[0]+$y[2];
        $this->a[0][1] = $x[0];
        $this->a[1][1] = $z[0];
        $this->a[2][1] = 3*($x[2]-$x[0])-2*$z[0]-$z[2];
        $this->a[3][1] = 2*($x[0]-$x[2])+$z[0]+$z[2];
        $this->a[0][2] = 3*($w[1]-$w[0])-2*$x[0]-$x[1];
        $this->a[1][2] = 3*($y[1]-$y[0])-2*$z[0]-$z[1];
        $this->a[2][2] = 9*($w[0]-$w[1]-$w[2]+$w[3])+6*($x[0]-$x[2]+$y[0]-$y[1])+3*($x[1]-$x[3]+$y[2]-$y[3])+4*$z[0]+2*($z[1]+$z[2])+$z[3];
        $this->a[3][2] = 6*($w[1]+$w[2]-$w[3]-$w[0])+4*($x[2]-$x[0])+3*($y[1]-$y[0]-$y[2]+$y[3])+2*($x[3]-$z[0]-$z[2]-$x[1])-$z[1]-$z[3];
        $this->a[0][3] = 2*($w[0]-$w[1])+$x[0]+$x[1];
        $this->a[1][3] = 2*($y[0]-$y[1])+$z[0]+$z[1];
        $this->a[2][3] = 6*($w[1]+$w[2]-$w[0]-$w[3])+3*(-$x[0]-$x[1]+$x[2]+$x[3])+4*($y[1]-$y[0])+2*($y[3]-$y[2]-$z[0]-$z[1])-$z[2]-$z[3];
        $this->a[3][3] = 4*($w[0]-$w[1]-$w[2]+$w[3])+2*($x[0]+$x[1]-$x[2]-$x[3]+$y[0]-$y[1]+$y[2]-$y[3])+$z[0]+$z[1]+$z[2]+$z[3];

        $this->last_y=false;
    }
    public function Interpolate($x,$y)
    {
        if ($y!==$this->last_y)
        {
            for ($i=0; $i<4; $i++)
            {
                $this->last_y_a[$i]=0;
                for ($j=0; $j<4; $j++)
                    $this->last_y_a[$i]+=$this->a[$j][$i]*pow($y,$j);
            }
            $this->last_y=$y;
        }
        $r=0;
        for ($i=0; $i<4; $i++)
            $r+=$this->last_y_a[$i]*pow($x,$i);
        return $r;
    }
    private function denull($d)
    {
        //Substituting null values with nearest known values 
        //as per "A Review of Some Image Pixel Interpolation Algorithms" by Don Lancaster
        if ($d[0][1]===null)    for ($i=0; $i<4; $i++)  $d[0][$i]=$d[1][$i];
        if ($d[1][0]===null)    for ($i=0; $i<4; $i++)  $d[$i][0]=$d[$i][1];
        if ($d[3][1]===null)    for ($i=0; $i<4; $i++)  $d[3][$i]=$d[2][$i];
        if ($d[1][3]===null)    for ($i=0; $i<4; $i++)  $d[$i][3]=$d[$i][2];
        return $d;
    }
} 
```

# python - 我可以使用 VirtualEnv 来安装一些额外的包吗？

> ID：12463556
> 
> 赞同：2
> 
> 时间：2012-09-17T16:35:09.943
> 
> 标签：python, django, virtualenv

如果我正在使用 Python 和其他一些包（如已安装的 virtualenv）在共享 Web 服务器上工作。我可以使用 virtualenv 在特定目录中安装一些我需要的额外软件包，同时仍然使用系统范围的 python 和软件包，或者更好的是我可以在我自己的目录中安装额外的 python 软件包并将它们用于我的网站而不需要 sudo 权限吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T16:36:00.543

`--system-site-packages`您可以使用开关在您的 virtualenv 中显式包含所有全局安装的软件包 ：

> 授予对虚拟环境的全局站点包目录的访问权限

`--no-site-packages`或使用开关禁用全局站点包：

> 不要向虚拟环境授予对全局站点包目录的访问权限

后者目前是默认设置。

我个人已经`lxml`在我的全局站点包中安装了，所以我们可以用它作为一个小演示：

```
$ virtualenv nositepackages
New python executable in nositepackages/bin/python
Installing setuptools............done.
Installing pip...c............done.
$ ./nositepackages/bin/python -c 'import lxml; print lxml.__package__'
Traceback (most recent call last):
  File "<string>", line 1, in <module>
ImportError: No module named lxml
$ virtualenv --system-site-packages sitepackages
New python executable in sitepackages/bin/python
Installing setuptools............done.
Installing pip...............done.
$ ./sitepackages/bin/python -c 'import lxml; print lxml.__package__'
lxml 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T16:48:48.733

将目录添加到 $HOME 命名`lib`将目录添加到命名`python`

将新目录添加到路径/pythonpath .bashrc 和 .bash_profile

`nano ~/.bashrc`然后添加`export PYTHONPATH=$PYTHONPATH:~/lib/python`，这会在不通过 shell 访问时设置您的环境（例如通过网站）

添加相同的行`.bash_profile`，当您通过 shell 登录时，这将控制您的环境

**注销终端并重新登录**

`echo $PYTHONPATH`确保它有你的 ~/lib/python 文件夹

`wget https://download`使用或下载所需的 python 包`git clone package/repo`

如果你下载了一个 zip 解压缩它`tar -xvf somefile.tar.bz`

切换到你解压的目录

`cd some_package\`

使用 --HOME 标签运行 setup.py

`python setup.py install --HOME=~`

测试一下

`python -c "import <package>;print <package>.VERSION;"`

恭喜您刚刚安装了自定义包 :)

*附带说明一下，我发现 virtualenv 是一个更强大的解决方案，但有时很难正确设置。如果您只需要一些自定义包，这只是一些东西......*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T04:18:17.003

您也可以将您需要的软件包复制到您有权访问的目录中。然后在 __init__.py 你应该这样修改 python 路径：

```
import sys
sys.path.append("/path/to/the_dir/with_packages") 
```

# html - HTML5 shiv 在 ie8 中打破页面

> ID：12463562
> 
> 赞同：1
> 
> 时间：2012-09-17T16:35:31.037
> 
> 标签：html, internet-explorer-8

我是 html5 的初学者。当我尝试调用 html5 shiv 时，页面不会在 ie8 中呈现。仅加载背景。

我正在添加以下内容

```
<header>
<!--[if lt IE 9]><script src="http://html5shiv.googlecode.com/svn/trunk/html5.js">     </script><![endif]-->   
<script>
  document.createElement('header');
  document.createElement('nav');
  document.createElement('hgroup');
  document.createElement('section');
  document.createElement('article');
  document.createElement('aside');
  document.createElement('footer');
   </script> 
```

CSS：

```
article, aside, details, figcaption, figure, footer, header, hgroup, nav, section {     display: block; }
audio, canvas, video { display: inline-block; *display: inline; *zoom: 1; }
audio:not([controls]) { display: none; }
[hidden] { display: none; } 
```

请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T16:47:26.117

1.  您不必创建所有元素`document.createElement`- shiv 为您完成。
2.  在您的 CSS 中，您`inline`为 IE8 制作了所有新元素，但是它们在好的浏览器中自然会被阻止。尝试使它们保持一致并使用[*Normalize CSS*](https://github.com/necolas/normalize.css/blob/master/normalize.css)中的规则，例如：

```
 /*
    * Corrects `block` display not defined in IE 8/9.
    */

    article,
    aside,
    details,
    figcaption,
    figure,
    footer,
    header,
    hgroup,
    nav,
    section,
    summary {
        display: block;
    }

    /*
    * Corrects `inline-block` display not defined in IE 8/9.
    */

    audio,
    canvas,
    video {
        display: inline-block;
    }

    /*
    * Prevents modern browsers from displaying `audio` without controls.
    * Remove excess height in iOS 5 devices.
    */

    audio:not([controls]) {
        display: none;
        height: 0;
    } 
```

# linq - 使用 IsNullOrEmpty 的 Linq

> ID：12463565
> 
> 赞同：0
> 
> 时间：2012-09-17T16:35:56.643
> 
> 标签：linq

我正在尝试检查一个字段是 Null 还是 Empty。

我有以下脚本：

```
 return db.Clients.Where(a => string.IsNullOrEmpty(a.ClientName) == false)
                   .OrderBy(a => a.ClientName); 
```

它似乎按预期工作。我想知道以上是否是最有效的，或者在使用我上面的内容时是否可能存在一些我可能不知道的问题，这可能会导致问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T16:41:05.840

AFAIK，String.IsNullOrEmpty 无法翻译，因此可以更快地手动单独检查 null 和空。

# php - 使用 js .innerHTML 更新 PHP 变量

> ID：12463566
> 
> 赞同：1
> 
> 时间：2012-09-17T16:35:58.333
> 
> 标签：php, javascript, selection

> **可能重复：**
> [如何使用 javascript 以编程方式设置选择框元素的值？](https://stackoverflow.com/questions/78932/how-do-i-programatically-set-the-value-of-a-select-box-element-using-javascript)

I'm trying to update a table with the results of a query when a select option has changed. 以下测试代码工作正常。但是当我尝试更新查询时，它不起作用。我猜它与“回声”有关，但我无法弄清楚。谢谢。

```
<script type="text/javascript">
  function ChangeText(value)
  {
    document.getElementById("p1").innerHTML=value;
  }
</script>

<select onchange="ChangeText(value)">
  <option value="ONE">one</option>
  <option value="TWO">two</option>
  <option value="THREE">three</option>
  <option value="FOUR">four</option>
</select>

<?php
  $variable1 = '<p id="p1">place holder</p>';
  echo $variable1; 
?> 
```

什么不起作用：

```
document.getElementById("country").innerHTML=value;

$country = '<p id="country">United States</p>'

$result = mysql_query("SELECT * FROM statistics WHERE (Country='$country')"); 
```

结果是页面加载时出现空白表，我原以为“美国”是默认值。当我从下拉菜单中选择某些东西时，它什么也不做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T16:38:53.690

PHP 在用户看到页面之前在服务器端执行。因此，一旦用户查看页面，PHP 就完成了执行。

所以你不能“用 Javascript 更新 PHP 变量，因为 Javascript 在客户端运行，这发生在 PHP 完全执行完之后。

你应该看看[AJAX](http://www.w3schools.com/ajax/default.asp)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T16:39:20.217

我认为您对服务器端脚本与 javascripting 的工作方式有些混淆。PHP 代码不在客户端运行。PHP 代码由您的服务器执行，结果（所有回显的内容 + HTML 标记）被发送到客户端的浏览器。如果要动态更新页面，则必须使用表单并重新加载页面，或者使用 AJAX。

# c# - 无法从 TextChanged 事件处理程序中引用文本框的文本属性

> ID：12463568
> 
> 赞同：-1
> 
> 时间：2012-09-17T16:36:01.903
> 
> 标签：c#, winforms

我在 TextChanged 事件处理程序中获取文本框的文本值时遇到问题。

我有以下代码。（简化）

```
public float varfloat;

private void CreateForm()
{
    TextBox textbox1 = new TextBox();
        textbox1.Location = new Point(67, 17);
        textbox1.Text = "12.75";
        textbox1.TextChanged +=new EventHandler(textbox1_TextChanged);
}

private void textbox1_TextChanged(object sender, EventArgs e)
    {
         varfloat = float.Parse(textbox1.Text);
    } 
```

我收到以下错误：'名称 textbox1 在当前上下文中不存在'。

我可能在某个地方犯了一个愚蠢的错误，但我是 C# 新手，希望能得到一些帮助。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T16:38:00.347

您*已*在. `textBox1`_ 该变量仅存在于该方法中。*`CreateForm`*

 *三个简单的选项：

*   使用 lambda 表达式在 内创建事件处理*程序`CreateForm`*：

    ```
    private void CreateForm()
    {
        TextBox textbox1 = new TextBox();
        textbox1.Location = new Point(67, 17);
        textbox1.Text = "12.75";
        textbox1.TextChanged += 
            (sender, args) => varfloat = float.Parse(textbox1.Text);
    } 
    ```

*   转换`sender`为`Control`并使用它：

    ```
    private void textbox1_TextChanged(object sender, EventArgs e)
    {
        Control senderControl = (Control) sender;
        varfloat = float.Parse(senderControl.Text);
    } 
    ```

*   改为`textbox1`实例变量。如果您想在代码的其他任何地方使用它，这将很有意义。

哦，请不要使用公共领域:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T16:37:52.967

试试这个：

```
private void textbox1_TextChanged(object sender, EventArgs e)
{
     varfloat = float.Parse((sender as TextBox).Text);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T16:40:53.750

您尚未将文本框控件添加到表单中。

它可以做为

```
TextBox txt = new TextBox();
txt.ID = "textBox1";
txt.Text = "helloo";
form1.Controls.Add(txt); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T16:37:51.600

在类级别范围而不是函数范围定义`textbox1`外部 CreateForm()，以便它可用于`textbox1_TextChanged`事件。

```
TextBox textbox1 = new TextBox();

private void CreateForm()
{    
        textbox1.Location = new Point(67, 17);
        textbox1.Text = "12.75";
        textbox1.TextChanged +=new EventHandler(textbox1_TextChanged);
}

private void textbox1_TextChanged(object sender, EventArgs e)
{
     varfloat = float.Parse(textbox1.Text);
} 
```*

# xamarin.android - GetResponse 总是在 Monodroid 中给出异常。我正在使用 Dropnet Dll

> ID：12463569
> 
> 赞同：0
> 
> 时间：2012-09-17T16:36:11.530
> 
> 标签：xamarin.android

我正在研究 Monodroid。我添加了一个 Dropnet DLL（我在 Monodevelop 中编译了它）。

我正在尝试检索帐户信息，以下是我的代码

```
DropNetClient _client;
string dropbox_appkey = "XXX";
string dropbox_appsecret = "XXXX";
_client = new DropNetClient(dropbox_appkey, dropbox_appsecret);
_client.UserLogin = new DropNet.Models.UserLogin { Token = "XXX", Secret = "XXXX" };
var accountInfo = _client.AccountInfo(); 
```

执行以下代码时出现错误

```
return (HttpWebResponse)request.GetResponse(); 
```

收到的错误是：

> System.Net.WebException：获取响应流时出错（写入：身份验证或解密失败。）：SendFailure ---> System.IO.IOException：身份验证或解密失败。---> Mono.Security.Protocol.Tls.TlsException：从服务器收到的证书无效。错误代码：Mono.Security.Protocol.Tls.Handshake.Client.TlsServerCertificate.validateCertificates 处的 0xffffffff800b010a（Mono.Security.X509.X509CertificateCollection 证书）[0x00000] 在 Mono.Security.Protocol.Tls.Handshake.Client.TlsServerCertificate 处：0 .ProcessAsTls1 () [0x00000] 在：0 在 Mono.Security.Protocol.Tls.Handshake.HandshakeMessage.Process () [0x00000] 在：0 在 Mono.Security.Protocol.Tls.ClientRecordProtocol.ProcessHandshakeMessage (Mono.Security.Protocol .Tls.TlsStream handMsg) [0x00000] in :0 在 Mono。

当我在浏览器中运行 URL 时，如下所示：

> [https://api.dropbox.com/1/account/info?oauth_consumer_key=XXXX&oauth_nonce=3064850&oauth_signature_method=PLAINTEXT&oauth_timestamp=1347899148&oauth_token=XXXX&oauth_version=1.0&oauth_signature=XXX%26XXX](https://api.dropbox.com/1/account/info?oauth_consumer_key=XXXX&oauth_nonce=3064850&oauth_signature_method=PLAINTEXT&oauth_timestamp=1347899148&oauth_token=XXXX&oauth_version=1.0&oauth_signature=XXX%26XXX)

我得到这样的正确回应：

> {“referral_link”：“https://www.dropbox.com/referrals/XXXX”，“display_name”：“XXX XXX”，“uid”：XXXX，“国家”：“IN”，“quota_info”：{“共享”：XXX，“配额”：XXXX，“正常”：XXXX}，“电子邮件”：“XXXX@gmail.com”}

我的问题是为什么我在使用 Monodroid Emulator 时会出现奇怪的错误（我使用的是 Monodevelop**版本 3.0.4.6**并且我正在**API_10 EMulator**上进行测试。

我应该怎么办？

**笔记：**

只需添加，使用通过在桌面应用程序中对其进行身份验证获得的保管箱的身份验证令牌。我认为我们可以将使用我们的桌面应用程序的用户的令牌重用于移动应用程序。正确的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T17:11:40.423

我在使用带有 Mono for Android 的 RestSharp 时遇到了类似的问题。原因是开发环境的证书无效。我为该域使用了一个静态 IP 地址 (192.168.1.122)，以便我的手机可以连接到我的开发机器上的 Web 服务。您可以通过在发出 Web 请求之前在某处添加以下行来覆盖它：

```
ServicePointManager.ServerCertificateValidationCallback = delegate { return true; }; 
```

# web-services - 如何强制 Web 服务客户端使用特定端口？

> ID：12463575
> 
> 赞同：0
> 
> 时间：2012-09-17T16:36:29.747
> 
> 标签：web-services, networking, network-programming, client

是否可以强制 Web 服务客户端从特定范围的端口（例如 4900-4999）与端口 80 中的 Web 服务器通信？

我现在知道有客户端和服务器端口号，需要创建一个客户端应用程序来将 http 状态发送到 Web 服务器，但防火墙团队只在客户端打开端口 4900 到 4999。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T17:08:20.723

如果您使用 Web 浏览器连接到服务器，那么您可能不走运，但正如您在问题中所说，您正在创建客户端应用程序，您可以使用`bind`Windows 和 Linux 中的系统调用来执行此操作（此代码是在 C) 中：

```
struct sockaddr_in client;

sock = socket(PF_INET, SOCK_STREAM, IPPROTO_TCP);

memset(&client, 0, sizeof(client));
client.sin_family = AF_INET;
client.sin_addr.s_addr = htonl(INADDR_ANY);
client.sin_port = htons(4901); 
```

然后调用`bind`：

```
res = bind(sock, (struct sockaddr *)&client, sizeof(client)); 
```

如果此调用成功（res 为 0），您可以将您的套接字连接到服务器，您将从端口 4901 连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T19:33:41.743

如果其他人需要它，这里是执行此操作的 Python 代码：

```
#!/usr/bin/env python

from socket import *
import time

HOST = '**.**.**.**' # IP of the server
PORT = 8080
GET = '/hello/There'
BUFSIZ = 1024
ADDR = (HOST, PORT)

sock = socket(AF_INET, SOCK_STREAM)
sock.bind(('',4925))
sock.connect(ADDR)

print 'connected'
request = """GET %s HTTP/1.0\n
Host: %s\n
User-Agent: Python\n
\n""" % (GET, HOST)

sock.send(request)

data = sock.recv(1024)
string = ""

while len(data):
  string = string + data
  data = sock.recv(1024)

print string

sock.close() 
```

这与在另一端运行的 wsgi 服务器一起工作。很直接。谢谢您的帮助。

# perl - 在 Perl 中使用变量创建文件名

> ID：12463578
> 
> 赞同：1
> 
> 时间：2012-09-17T16:36:41.813
> 
> 标签：perl

我正在尝试写出一个文件，其中文件名是从一个变量（名称+用户ID+日期和时间+文件扩展名）创建的。

我已经阅读了 Stackoverflow 上的各种内容，这些内容都是基于我的代码。

```
my $windowsfile = "winUserfile-$User_ID-$datetime.csv";
open winUserfile, ">>", $windowsfile) or die "$!";
print winUserfile "User_ID, Expression\n";
close winUserfile; 
```

我认为这会起作用，但我遇到了语法错误。有人能帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T22:00:01.240

您的第二行有一个关闭括号，没有前面的打开：

```
open winUserfile, ">>", $windowsfile) or die "$!"; 
```

你可能想先打开它

```
open(winUserfile, ">>", $windowsfile) or die "$!"; 
```

或者只是不在这里完全打扰它们，因为在这种情况下它们是可选的

```
open winUserfile, ">>", $windowsfile or die "$!"; 
```

* * *

此外，使用裸字文件句柄是不好的风格，因为这会创建全局。最好使用词法：

```
open my $winUserfile, ">>", $windowsfile or die "$!";
print $winUserfile "User_ID, Expression\n"; 
```

然后你不需要关闭它；当`$winUserfile`变量超出范围时，关闭将是自动的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T16:52:08.923

我喜欢将`IO::All`模块用于文件 io。

```
use IO::All

my $windowsfile = "winUserfile-$User_ID-$datetime.csv";
io($windowsfile) > "User_ID, Expression\n"; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-17T16:37:54.210

```
my $windowsfile = "winUserfile-$User_ID-$datetime.csv";
open (winUserfile, ">>$windowsfile") or die "$!";
print winUserfile "User_ID, Expression\n";
close winUserfile; 
```

# qt - 当关联模型有数据时，QTableView 不显示数据

> ID：12463579
> 
> 赞同：1
> 
> 时间：2012-09-17T16:36:56.753
> 
> 标签：qt, sqlite

我正在玩 Qt（我是初学者），并试图在 QTableView 中显示表格的数据。到目前为止，我有这个：

```
ui->setupUi(this);

QSqlDatabase db;
db=QSqlDatabase::addDatabase("QSQLITE");
db.setDatabaseName("test.db");

if (db.open())
    qDebug() << "success";
else
    qDebug() << "failed";
QSqlTableModel model;
model.setTable("names");
model.select();
qDebug() << model.rowCount();

ui->tableView->setModel(&model); 
```

问题是，模型确实获得了数据（2 行），但 QTableView 现在确实显示了它。

任何线索这里有什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T16:45:06.130

查看您的代码可能是您的`model`对象超出范围。进行这些更改，希望它们能纠正您的问题。

```
ui->setupUi( this );

// Setup db
QSqlDatabase db = QSqlDatabase::addDatabase("QSQLITE");
db.setDatabaseName("test.db");

if( db.open() )
    qDebug() << "success";
else
    qDebug() << "failed";

// Initialize your model with the database.
QSqlTableModel* model = new QSqlTableModel( this, db );

// Let the QTableView take ownership of the model.
ui->tableView->setModel( model );

// Add the rest of your code here.
model->setTable( "names" );
model->select();
qDebug() << model->rowCount(); 
```

# flash - 在某个帧actionscript3上选择一个按钮或movicclip

> ID：12463580
> 
> 赞同：0
> 
> 时间：2012-09-17T16:37:02.890
> 
> 标签：flash, actionscript, frame, timeline

我有一个要编辑的 Flash 文件，需要向外部文件中的按钮添加一个额外的功能。直到某个时间轴（即第 120 帧），此按钮才会显示。问题是我可以在外部 acitonscript 文件中的时间轴1（或 frame1）上选择舞台上的任何元素。但是当我尝试选择**将**在 frame120 上显示的按钮时，它告诉我“null”。我知道这个季节是因为它还没有在 frame1 上创建。但是我如何在某个框架上选择一个元素，或者我如何使用 actionscript 解决这个问题。不嵌入动作脚本。需要在外部文件中完成。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T17:50:53.503

您可以将代码包装在一个函数中并将其传递给一个`addFrameScript`方法。

因此，在您的 .as 文件中，如果它的范围是在第 120 帧上持有按钮的影片剪辑，请使用`this`，否则我会假设在您的外部文件中将所述影片剪辑引用为`mc`：

```
//first parameter is the frame number to run this script on (since frame one is actually 0, you need to subtract one from the actual frame number)
mc.addFrameScript(120 - 1, function(){  
    var btn = mc["buttonInstanceName"];
    //do whatever with your button;
}); 
```

# java - 使用 Java 比较按名称对对象进行排序

> ID：12463581
> 
> 赞同：1
> 
> 时间：2012-09-17T16:37:04.123
> 
> 标签：java, arrays, sorting, object, comparable

我是 Java 的初学者，我在使用 Comparable 按名称对 Employee 对象进行排序时遇到问题。我一直在阅读 Java 文档，但运气不佳。我正在寻找一些指导来让我走上正确的轨道。

```
public class Employee implements Comparable<Employee> {

    private String name ="No name yet";
    Task task;

    public Employee(String setName) {    
        name = setName;
    }
...
    public int compareTo(Employee object) {
        Employee emp = (Employee) object;
        return this.name.compareTo(emp.name);
    } 
```

我试图像这样调用比较方法，但我不确定这是正确的。

```
 public static void main(String[] args){
    Employee[] emp = new Employee[4];
        emp[0] = new HourlyEmp("Green", 22.50, 40);
        emp[1] = new ExemptEmp("White", 1000.00);
        emp[2] = new ExemptEmp("Black", 1100.00);
        emp[3] = new ExemptEmp("Brown", 1346.15);

    Array.sort(emp); <<--ERROR: The method sort(Employee[]) is undefined 
                                for the type  Array

    printReport("Employee list sorted on names", emp); 
```

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T16:38:52.110

试试`Arrays.sort(emp);`吧。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T16:38:59.687

它是`Arrays.sort(emp);`，带有`s`at `Arrays`。[这将`Arrays#sort`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#sort%28java.lang.Object%5b%5d%29)调用[方法](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#sort%28java.lang.Object%5b%5d%29)。

# r - 加载工作区时出现“bad magic number”错误的原因以及如何避免？

> ID：12463583
> 
> 赞同：110
> 
> 时间：2012-09-17T16:37:08.043
> 
> 标签：r, workspace, magic-numbers

我尝试加载我的 R 工作区并收到此错误：

```
Error: bad restore file magic number (file may be corrupted) -- no data loaded
In addition: Warning message:
file ‘WORKSPACE_Wedding_Weekend_September’ has magic number '#gets'
   Use of save versions prior to 2 is deprecated 
```

我对技术细节不是特别感兴趣，但主要是我如何引起它以及我将来如何防止它。以下是有关情况的一些说明：

1.  我在训练营分区上运行 Windows XP 的 MacBook Pro 上运行 R 2.15.1。
2.  这个工作区文件显然有问题，因为它的重量只有~80kb，而我所有的其他文件通常都> 10,000
3.  周末我在 R 中运行一个外部建模程序并将其输出存储到不同的对象。我在几天的时间里运行了模型的几次迭代，例如 output_Saturday <- call_model()
4.  模型输出没有什么特别之处，它只是一个包含 beta、VC 矩阵、模型规范等插槽的列表。

* * *

## 回答 #1

> 赞同：134
> 
> 时间：2014-02-02T00:57:33.320

当我不小心使用`load()`而不是`source()`or时，我得到了那个错误`readRDS()`。

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2019-08-07T17:36:53.163

另外值得注意的是 R Core Team 的文档中的以下内容，该文档总结了 v3.5.0 之后 R 版本的变化（[此处](https://journal.r-project.org/archive/2018-1/ch.pdf)）：

*R 有新的序列化格式（版本 3），它支持 ALTREP 框架对象的自定义序列化...**格式 3 的序列化数据不能被版本 3.5.0 之前的 R 版本读取。***

我在 v3.6.0 中保存工作区时遇到了这个问题，然后与使用 v3.4.2 的同事共享文件。我可以通过在我的保存功能中添加“version=2”来解决这个问题。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2013-08-01T17:43:55.550

假设您的文件名为“myfile.ext”

如果您尝试加载的文件不是 R 脚本，您将使用

```
source("myfile.ext") 
```

您可以尝试该`readRDS`函数并将其分配给变量名：

```
my.data <- readRDS("myfile.ext") 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-08-01T17:48:49.993

幻数来自 UNIX 类型的系统，其中文件的前几个字节包含一个指示文件类型的标记。

此错误表明您正在尝试将无效文件类型加载到 R 中。由于某种原因，R 不再将此文件识别为 R 工作区文件。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2017-05-15T04:52:13.293

安装`readr`包，然后使用`library(readr)`.

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2018-04-04T12:47:55.467

当您尝试`load()`使用 rds 对象而不是使用

```
object <- readRDS("object.rds") 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2019-07-16T05:37:00.893

`saveRDS()`使用而不是保存时出现错误`save()`。例如`save(iris, file="data/iris.RData")`

这为我解决了这个问题。我在[这里找到了这个信息](https://kbroman.org/pkg_primer/pages/data.html)

另请注意，使用`save()`/`load()`对象以最初保存时使用的相同名称加载（即，您无法重命名它，直到它已经以最初保存时的名称加载到 R 环境中）。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-06-11T14:59:15.707

当我将 Rdata 文件保存在旧版本的 R 中然后我尝试在新版本中打开时，我遇到了这个问题。我通过将我的 R 版本更新到最新来解决。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-01-21T19:23:09.937

如果您正在使用`devtools`尝试保存文件：

```
devtools::use_data(x, internal = TRUE) 
```

然后，删除之前保存的所有文件。

来自文档：

> *internal 如果为 FALSE，则将每个对象保存在数据目录中的单独 .rda 文件中。每当加载包时，这些都是可用的。如果为 TRUE，则将所有对象存储在单个 R/sysdata.rda 文件中。这些对象仅在包中可用。*

# php - 阅读然后使用 PHP 查找和替换 HTML 文件的内容？

> ID：12463588
> 
> 赞同：2
> 
> 时间：2012-09-17T16:37:20.463
> 
> 标签：php, html

我正在尝试创建一个电子邮件模板并使用 preg_replace 替换文档中的单词。我对php很陌生，所以我不太清楚它的后勤工作。这就是我目前拥有的——我希望它读取 HTML/CSS 文件，然后替换我有占位符的单词。

```
<?php
$email =  file("email.html");
$patterns = array();
$patterns[0] = '/header/';
$patterns[1] = '/name/';
$patterns[2] = '/body/';
$replacements = array();
$replacements[0] = 'imageurl';
$replacements[1] = 'John Johnson';
$replacements[2] = 'Content';
$output = preg_replace($patterns, $replacements, $email);
echo $output;
?> 
```

另外，我是否可以使用此代码替换为图像？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T16:48:05.507

你可以简单地使用

```
$output = str_replace($patterns, $replacements, $email); 
```

# java - JAXB 2 - Java EE 5 和 Java EE 6 之间的变化

> ID：12463589
> 
> 赞同：4
> 
> 时间：2012-09-17T16:37:27.903
> 
> 标签：java, jaxb, version, jaxb2

[我注意到Java EE 6 教程](http://docs.oracle.com/javaee/6/tutorial/doc/index.html)和[Java EE 5 教程](http://docs.oracle.com/cd/E19316-01/819-3669/index.html)之间在 JAXB 方面发生了（有点激进的）变化，因为在 6 教程中细节很少，并且不再有专门讨论 JAXB 的章节。版本 5 中的情况。

JAXB 从 Java 5 到 6 有哪些变化？EE 5 的 JAXB 教程对于 EE 6 是否足够？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T16:56:17.827

Java EE 5 包括 JAXB 2.0，Java EE 6 包括 JAXB 2.2。您可以在 JAXB 2.0 中执行的所有操作在 JAXB 2.2 中仍然可以执行。

[JAXB (JSR-222)](http://jcp.org/en/jsr/detail?id=222)维护版本的主要关注领域是解决 JAXB 和 JAX-WS 之间的一些集成问题。以下是对公共 API 的一些补充：

*   注释的介绍`@XmlSeeAlso`——当一个类被处理时，这个注释表明其他类也应该被处理。这通常用于指向域类的子类。
*   在类型级别的支持`@XmlTransient`在类型级别指定`@XmlTransient`允许从继承层次结构的映射中删除一个类（参见： [http](http://blog.bdoughan.com/2011/06/ignoring-inheritance-with-xmltransient.html) ://blog.bdoughan.com/2011/06/ignoring-inheritance-with-xmltransient.html ）。

**Java EE 5 组件**

*   [http://www.oracle.com/technetwork/java/javaee/tech/javaee5-jsp-135162.html](http://www.oracle.com/technetwork/java/javaee/tech/javaee5-jsp-135162.html)

**Java EE 6 组件**

*   [http://www.oracle.com/technetwork/java/javaee/tech/index.html](http://www.oracle.com/technetwork/java/javaee/tech/index.html)

# scala - Scala 中的复杂注释

> ID：12463590
> 
> 赞同：0
> 
> 时间：2012-09-17T16:37:32.033
> 
> 标签：scala, jakarta-ee, annotations

为了在 Scala 中创建消息驱动 bean，使用 JBoss，我需要对类进行如下注释：

```
@MessageDriven(
        activationConfig=Array(@ActivationConfigProperty(propertyName="destination", propertyValue="java:/queue/mail") ),
        messageListenerInterface=classOf[MessageListener])
class MailService extends MessageListener {    
    def onMessage(m: Message) {
        ...
    }   
} 
```

问题在于注解包含一个属性，该属性本身就是一个注解，而 Scala 编译器似乎无法处理它。

错误消息是：“非法开始简单表达式”，在第二行的 @ 符号周围突出显示，就在“activationConfig”之后。

在 Java 中，我会编写如下注释：

```
@MessageDriven(
        activationConfig={@ActivationConfigProperty(propertyName="destination", propertyValue="java:/queue/mail")}, 
        messageListenerInterface=MessageListener.class) 
```

Scala中有没有办法编写注释，这样才能工作？
有没有办法欺骗编译器以我想要的方式生成字节码？

谢谢，约翰

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T19:07:33.380

尝试这个

```
@MessageDriven(
  activationConfig = Array[ActivationConfigProperty](
    new ActivationConfigProperty(propertyName = "desctination", propertyValue = "java:/queue/mail")),
  messageListenerInterface = classOf[MessageListener]
)
class MailService extends MessageListener {
  def onMessage(m: Message) {
  //...
  }
} 
```

# entity-framework - 实体框架：代码优先 - 列映射

> ID：12463593
> 
> 赞同：2
> 
> 时间：2012-09-17T16:37:49.193
> 
> 标签：entity-framework, ef-code-first

我有一个这样的模型：

```
public class Entity
{
    [Key, Required]
    public virtual long EntityId { get; set; }
    [Required]
    public virtual string Name { get; set; }
    public virtual long? ParentEntityId { get; set; }
} 
```

这是我的桌子：

```
create table Entities(
    EntityId bigint not null identity(1, 1),
    Name nvarchar(64) not null,
    ParentEntityId bigint null
) 
```

ParentEntityId 是 EntityId 的外键。

当我尝试创建一个 Entity 实体时，这是我得到的异常： `Invalid column name 'ParentEntity_EntityId'.`

我不知道为什么 EF 为该特定列选择该*约定*，但如果我这样做：

```
[Column("TryPickThisName")]
public virtual int? ParentEntityId { get; set; } 
```

“TryPickThisName”列名显示相同的错误。最后，如果我正确写入列名**或**删除属性，它将显示*原始*错误消息。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T16:47:50.623

您是否遗漏了部分模型？

我认为正在发生的事情是你想要创建一个自引用表，如果它有一个 ParentEntity，Entity 可以选择引用它自己。

发生的事情是 EF 正在创建 ParentEntity_EntityId，因为您没有将 FK 属性显式映射到导航属性。添加 ForeignKey 数据注释将更正此问题。

```
public class Entity
{
    [Key, Required]
    public virtual long EntityId { get; set; }
    [Required]
    public virtual string Name { get; set; }

    [ForeignKey("ParentEntity")]
    public virtual long? ParentEntityId { get; set; }
    public virtual Entity ParentEntity { get; set; }
} 
```

创建此数据库： ![在此处输入图像描述](../Images/5e82f9c68fbd0044b7a6855df1b2f2a8.png)

# c# - 是否列出 .Sort 在排序列表上遭受最坏情况下的性能？

> ID：12463598
> 
> 赞同：1
> 
> 时间：2012-09-17T16:37:54.980
> 
> 标签：c#, performance, quicksort

根据[文档](http://msdn.microsoft.com/en-us/library/b0zbh7b6.aspx) `List<T>.Sort`使用 QuickSort 算法。我听说如果没有明智地选择枢轴，当在预先排序的列表上调用时，这可能会表现出最差的性能。

QuickSort 的 .NET 实现是否在预排序列表上遇到最坏情况？

就我而言，我正在编写一个将对列表进行一些处理的方法。需要对列表进行排序才能使该方法起作用。在大多数使用情况下，列表将通过已经排序，但对顺序进行一些小的更改并非不可能。我想知道在每个方法调用上重新排序列表是否是个好主意。很明显，我陷入了[过早的优化](http://c2.com/cgi/wiki?PrematureOptimization)陷阱。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T13:28:05.910

*编辑：*我已经编辑了这个问题。

我猜我的问题被问得很糟糕。真的应该是：

> `List<T>.Sort`在排序列表上会遭受最坏情况的性能吗？

答案似乎是“否”。

我做了一些测试，似乎排序列表比随机列表需要更少的比较来排序：[https ://gist.github.com/3749646](https://gist.github.com/3749646)

```
const int listSize = 1000;
const int sampleSize = 10000;

var sortedList = Enumerable.Range(0,listSize).ToList();
var unsortedList = new List<int>(sortedList);

var sortedCount = 0;
sortedList.Sort((l,r) => {sortedCount++; return l - r;});
//sortedCount.Dump("Sorted");
// Returns: 10519   

var totalUnsortedComparisons = 0;
for(var i = 0; i < sampleSize; i++)
{
    var unsortedCount = 0;
    unsortedList.Shuffle();
    unsortedList.Sort((l,r) => {unsortedCount++; return l - r;});
    totalUnsortedComparisons += unsortedCount;
}

//(totalUnsortedComparisons / sampleSize).Dump("Unsorted");
// Returns: 13547 
```

当然，@dlev 提出了一个有效的观点。我永远不应该让自己陷入不确定我的列表是否已排序的情况。

我已经改用[SortedList](http://msdn.microsoft.com/en-us/library/system.collections.sortedlist.aspx)来避免这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T16:40:05.437

除非您有硬性指标可以进行比较，否则您将陷入过早的优化陷阱。在循环中运行您的代码超过 1000 次，并使用两种不同的方法收集执行时间，以查看哪种方法更快以及是否有所作为。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-17T16:43:18.783

选择正确的算法并不是过早的优化。

当您的列表已经排序或接近排序时，使用稳定排序是有意义的。 [.NET 附带一个，LINQ 的`OrderBy`实现。](https://stackoverflow.com/a/148123/103167) 不幸的是，它会多次复制你的整个列表，但复制仍然是 O(N)，所以对于一个非平凡的列表，它仍然会更快。

# android - 即使使用英特尔映像，Android 模拟器仍然慢得要命，为什么？

> ID：12463602
> 
> 赞同：9
> 
> 时间：2012-09-17T16:38:04.837
> 
> 标签：android, android-emulator

我已经为 Jelly Bean v4.1 成功安装了 Intel AVM，并且可以创建和启动 Intel x86 AVM。但是它和 ARM 一样慢。在这方面浪费了很多时间，据我所知，英特尔仿真并不比 ARM 图像快。

我确实安装了 HAXM，并且在启动模拟器时出现一条消息，提示它正在“快速”模式下运行，但它肯定不快！

这是因为我的电脑（Windows 7、英特尔）不兼容，还是我错过了什么？如何检查兼容性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T20:05:22.097

引用[文档](http://developer.android.com/tools/devices/emulator.html)：

> 该软件需要具有虚拟化技术 (VT) 支持的 Intel CPU

但是，在每台具有支持 VT 的 CPU 的机器上，这不一定默认启用。再次引用文档：

> 虚拟化扩展通常通过计算机的 BIOS 启用，并且默认情况下经常关闭。查看系统主板的文档以了解如何启用虚拟化扩展。

因此，例如，在我右侧的戴尔 Latitude E6400 上，您必须检查“启用英特尔虚拟化技术”的 BIOS 选项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-22T10:50:28.663

检查 AVD 属性中的“使用主机 GPU”选项似乎让我更快一点（仍然很慢但可用）。

**在 Eclipse 中：** `Window > android Virtual Device Manager > Choose your device > Edit >`底部的“使用主机 GPU”复选框。

注意：如果您使用带有 nvidia 混合显卡的笔记本电脑（在我的情况下是 GeForce G210M），请确保在运行模拟器之前将其设置为高性能。否则虚拟设备将找不到显卡并崩溃。

除了“虚拟化技术”之外，我还在 BIOS 中启用了一种称为“VTd 支持”的功能。我不知道它是什么或它做了什么（我的 BIOS 中没有描述），但上述任何一个操作都为我解决了这个问题

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-28T11:40:51.090

我有同样的问题。确保一切都正确配置后：（在 BIOS 中启用了 VT），英特尔 HAXM 驱动程序安装成功，AVD 详细信息应为正常。模拟器运行速度甚至比 ARM 慢。

如果您仍然面临同样的问题。[在此处](http://code.google.com/p/android/issues/detail?id=38486#c1)为问题加注星标

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-03T09:50:06.770

进入 AVD 管理器（工具栏中的小 Android 图标之一，悬停以查看哪个），然后在 AVD 上将内存选项：RAM 更改为 768 MB。如果它更大，硬件加速似乎会失败。

（还要确保勾选“使用主机 GPU”！）

（还要注意下面的消息。您可能必须进入 SDK 管理器并安装映像。）

它仍然启动缓慢，但一旦运行一两分钟，它应该会更快。但它仍然不如通过 USB 连接的干净、原生设备快。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-01-20T09:39:17.397

就我而言，我在 Linux 服务器（cent os 7）上创建并启动了几个 x86 模拟器，它们都运行得很慢。

原因是，默认情况下，模拟器设置为有 2 个内核，这远远少于现代手机。所以我更改了`config.ini`每个模拟器目录中的文件，添加一行`hw.cpu.ncore=6`（取决于您的主要硬件，其他属性可能会影响 are `hw.ramSize`，`vm.heapSize`依此类推。您可以从`hardware-qemu.ini`同一目录中查看所有属性。），然后重新启动模拟器。

模拟器的运行速度要快得多，而不是比真正的手机慢太多。

希望我蹩脚的英语能清楚地表达这一点。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2018-02-04T08:12:28.053

在我的情况下，我有一个 SSD 三星 850 pro，软件三星魔术师开启了快速模式，这就是我把它关掉的问题，android 模拟器再次作为 fash 运行。

# arduino - 在 Arduino 上使用软件串行接收两个端口

> ID：12463605
> 
> 赞同：1
> 
> 时间：2012-09-17T16:38:15.713
> 
> 标签：arduino

我无法使用带有 arduino 板的两个软件串行端口从两个传感器获取数据。我注意到以前可能有人问过类似的问题，但答案表明它无法完成，我完全知道它可以基于此处的示例（http://arduino.cc/en/Tutorial/TwoPortReceive）！

我正在使用 arduino 以太网。我试图从中获取数据的设备包括来自 sparkfun 的 GPS 和 IMU。

我可以只使用软件串行端口从任一设备获取数据，但只要我添加第二个软件串行端口，两个端口都不会工作。我不能使用硬件串行端口，因为它正在被另一台设备使用。

我的代码与示例完全相同：

```
#include <SoftwareSerial.h>

SoftwareSerial portOne(7,8);
SoftwareSerial portTwo(5,6);

void setup()
{
  Serial.begin(9600);

  portOne.begin(9600);
  portTwo.begin(9600);
}

void loop()
{

  portOne.listen();
  while (portOne.available() > 0) {
    char inByte = portOne.read();
    Serial.write(inByte);
  }

  delay(500);

  portTwo.listen();
  while (portTwo.available() > 0) {
    char inByte = portTwo.read();
    Serial.write(inByte);
  }

  Serial.println();
} 
```

有任何想法的人吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T18:06:41.523

此代码将不起作用，或者如果它完全可以工作，则效果不佳。SoftwareSerial 只有一个内部缓冲区。是的，您可以拥有多个 SoftwareSerial 对象，但其中只有一个控制内部缓冲区。当任何 RX 引脚被置位时，都会产生一个中断，但只有正在侦听（）的 RX 引脚会被检查是否有起始位。

真正需要的是当中断从起始位出现时检查多个引脚的能力。然后，您必须设置指向适当数据结构的指针。这会很复杂，但有可能。

或者可能只是放弃中断驱动的接收，然后旋转检查两个/所有 RX 引脚，然后根据您看到的引脚开始接收。请注意，此代码有很多头发，您将需要一个示波器才能使其工作。

我遇到了类似的问题，这就是我找到你的传感器的原因。在与我的同事讨论后，我们决定按轮换顺序读取我们的传感器。我们的传感器报告传感器的当前状态，而不是特定事件，所以如果我们丢失一些报告也没关系。所以我们将从端口 1 读取，然后从端口 2 读取，然后从端口 1 读取，等等。我们的传感器输出文本行，因此我们知道何时切换到下一个传感器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T01:26:59.270

引用的示例一次只主动侦听一个端口。推荐的解决方案是升级到具有 4 个硬件串行端口的 Arduino Mega (https://www.sparkfun.com/products/11061)。

为了同时支持两个软件串口将需要大量的CPU资源。这也是一个困难的设计和过多的编程时间，远远超过了 58 美元 + 运费的成本。

再次查看您的代码，我突然想到您在 portOne.listen 命令之后立即检查字符。在 9600 波特下，第一个字符到达大约需要 1 毫秒，您的 while 测试已经完成，并且 portTwo.listen 命令在第一个字符到达之前很久就执行了。

出于测试目的，请尝试在 portOne.listen 命令后添加 1-2 毫秒的延迟，看看是否有字符。

作为示例（未经测试并注意，如果端口一正在发送没有字符间间隙的字符，则第一个 while 永远不会失败，从而阻止读取 portTwo 字符）：

```
void loop()
{

    portOne.listen();
    delay(2);
    while (portOne.available() > 0) {
        char inByte = portOne.read();
        Serial.write(inByte);
        delay(1);
    }

    portTwo.listen();
    delay(2);
    while (portTwo.available() > 0) {
        char inByte = portTwo.read();
        Serial.write(inByte);
        delay(1);
    }
    Serial.println();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-31T15:12:27.763

暂时不要使用......

利用：

```
 {     portOne.listen();

   if (PortOne.available() ) {
       ricevo = myPort1.read(); }

   // delay(2);   // ridiculos waiting time
   // delay(1);   // extra ridiculos waiting time 
```

超过 500 毫秒对于切换来说是一个太大的时间，没有时间......

# ruby-on-rails - HAML：创建 data-xxx-yyy 属性

> ID：12463608
> 
> 赞同：14
> 
> 时间：2012-09-17T16:38:23.923
> 
> 标签：ruby-on-rails, html, haml

我知道如何使用 data-* 属性创建链接：

```
%a{ :href => "#", :data => { :name ="John", :age => 24 } } Hi John 
```

生成：

```
<a href="#" data-name="John" data-age="24">Hi John</a> 
```

但是如何使用 2 个深度数据名称，例如`data-user-name`和`data-user-age`，一种对数据属性进行分组的方法。你可能猜到了，我试过：

```
:data => { :user => { :name => "John", :age => 24 } } 
```

但它不起作用，给了我奇怪的 HTML 输出：

```
<a href="#" data-user="nameJohnage24">Hi John</a> 
```

知道怎么做吗？提前致谢。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-17T16:41:11.783

你必须使用

```
:data => {'user-name' => 'John', 'user-age' => 24} 
```

该`data`属性是 HAML 的特例，它只考虑浅值。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-07-18T22:36:47.663

是的你可以！从简单...

```
%a(data-user-name="John", data-user-last-name="Arbuckle") 
```

到综合体

```
%a(data-user-name="#{User.first.name}", data-stack-overflow="all of these will be custom attributes in your link"){href: "garfield.com"} 
```

# java - Android 自定义事件

> ID：12463610
> 
> 赞同：1
> 
> 时间：2012-09-17T16:38:27.410
> 
> 标签：java, android, events, interface

我是 Android 和 Java 开发的新手，我希望实现一个自定义事件，但是经过大量研究并尝试了各种不同的方法，我似乎无法让它工作。

我实际上是在尝试创建一个战斗系统，我已经在 .NET 中实现了该系统，但似乎无法在 Java 中运行，它需要我为诸如 DealtDamage、DamageReceived、Died 等事物创建事件。

这将继承来自角色对象的信息，这些信息由诸如 hp、攻击、防御等组成。

有人可以提供示例代码如何创建这些事件，然后在各种类中对它们进行操作。

例如造成的伤害

user1 atk - user 2 def = totalatk return totalatk

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T16:53:20.610

如果您尝试从您的类生成回调（引发事件）：

在生成回调的类中：

```
public interface EventHappened{
        void callback(int arg1, String arg2);
}

...

ArrayList<EventHappened> eventHappenedObservers = new ArrayList<~>;

...

public void setEventHappenedObserver(EventHappened observer){
     eventHappenedObservers.add(observer);
}

...

if (eventHasHappened){
    for (EventHappened eventHappenedObserver:eventHappenedObservers){
        eventHappendedObserver.callback(event.number,event.toString());
    }
}

... 
```

在消费类中：

```
instanceOfClassRaisingCallback.setEventHappendedObserver(new EventHappened{
     @Override
     void callBack(int arg1, String arg2){
          doStuffWithArgs(arg1,arg2);
     }
   )}; 
```

（从记忆中，为拼写错误和语法错误道歉，但你明白了......我希望）

祝你好运。

# php - Cron Jobs 在运行时落后于我的网站

> ID：12463614
> 
> 赞同：3
> 
> 时间：2012-09-17T16:38:44.347
> 
> 标签：php, mysql, cron

对于我的网站，我每 30 分钟运行一次 Cron 作业，如果我尝试在这 30 分钟标记访问我的网站，我会收到 500 内部服务器错误，或者我会收到网站上任何页面的 5-10 秒加载时间。

我正在使用 Php，而我的 cron 作业正在使用 Php 和 MySQL。

我怎样才能使它不落后于我的整个网站或使它更快，从而减少滞后？

克朗斯：![在此处输入图像描述](../Images/36decdf028fbc690f1dccfec2ca8dedd.png)

每 15 分钟运行一次的 crons 之一：

```
<?php
require('functions.php');

global $mysqli;

$select = $mysqli->prepare("SELECT `tkn` FROM `users` ORDER BY `dt` ASC LIMIT 0, 200");
$select->execute();
$select->bind_result($cur_token);

$tokens = array();

while($select->fetch())
{
    array_push($tokens, $cur_token);
}

foreach($tokens as $token)
{
    $api = Class::Instance($token);
    $info = $api->Users->Info();

    if(empty($info->error))
    {
        $info->data->token = $token;
        updateUser($info->data);

    } else if($info->error->code == 400) {
        $update = $mysqli->prepare("UPDATE `users` SET `active` = 0 WHERE `tkn` = ?");
        $update->bind_param('s', $token);
        $update->execute();
    }
}

?> 
```

其他 Cron 作业：

```
<?php
require('functions.php');

global $mysqli;

$select = $mysqli->prepare("SELECT `email`, `username`, `id` FROM `users` WHERE `email` IS NOT NULL AND `email` <> '' AND `credits` < `credits_offered` AND `emailed_credits` = 0");
$select->execute();
$select->bind_result($email, $username, $id);

$users = array();

while($select->fetch())
{
    $users[] = array("id" => $id, "email" => $email, "username" => $username);
}

foreach($users as $user)
{
    $to      = $user['email'];
    $subject = '';
    $message = "";
    $headers = 'From: email@domain.com' . "\r\n" .
        'Reply-To: reply@domain.com';

    mail($to, $subject, $message, $headers);

    $update = $mysqli->prepare("UPDATE `users` SET `emailed` = 1 WHERE `id` = ?");
    $update->bind_param('i', &$user['id']);

    $update->execute();
    $update->close();
}

?> 
```

## 我怎样才能减少这些滞后或根本不滞后？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T23:21:08.793

第一个建议是将准备调用移出循环。更新将锁定您的表一段时间，因此只有在完成操作后才更新......将需要更新的内容缓存在数组中并启动事务，执行所有更新而不是提交。更新了邮件脚本的代码示例

```
<?php
require('functions.php');

global $mysqli;

$select = $mysqli->prepare("SELECT `email`, `username`, `id` FROM `users` WHERE `email` IS NOT NULL AND `email` <> '' AND `credits` < `credits_offered` AND `emailed_credits` = 0");
$select->execute();
$select->bind_result($email, $username, $id);

$users = array();

while($select->fetch())
{
    $users[] = array("id" => $id, "email" => $email, "username" => $username);
}

$u = array();

foreach($users as $user)
{
    $to      = $user['email'];
    $subject = '';
    $message = "";
    $headers = 'From: email@domain.com' . "\r\n" .
        'Reply-To: reply@domain.com';

    mail($to, $subject, $message, $headers);
    $u[] = $user['id'];

}
$update = $mysqli->prepare("UPDATE `users` SET `emailed` = 1 WHERE `id` = ?");
$update->bind_param('i', &$i);
$mysqli->autocommit(false);
foreach($u as $i)
    $update->execute();
$update->close();
$mysqli->commit(); 
```

哦，差点忘了，大多数mysql存储引擎都很笨，确保你使用InnoDB，那个有事务支持。或者，如果您使用“愚蠢”的存储引擎，如果您的 users.id 是 int ，您仍然可以欺骗它进行单个事务以更新多行

```
$update = $mysqli->prepare('UPDATE users SET emailed=1 WHERE id IN (' . implode(',', $u) . ')');
$update->execute();
$update->close(); 
```

而是在关闭`foreach($users as $user)`语句之后

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2012-09-17T16:40:11.697

编写更高效的脚本或获得更好的硬件。

编辑：

就群发电子邮件而言，您可以在脚本中添加超时，这样它就不会尽快处理所有电子邮件。这将减少 CPU 的负载，但会使您的脚本花费更长的时间。

例如：

```
for(all emails)
{
   //send email
   sleep(5);
} 
```

# iphone - 如何在 iphone 应用程序中播放 iTunes Store 购买的 DRM 视频？

> ID：12463618
> 
> 赞同：1
> 
> 时间：2012-09-17T16:38:58.197
> 
> 标签：iphone, video-streaming, mpmovieplayercontroller, drm, movies

有谁知道如何在我们的应用程序中播放 iTunes 购买的内容（电影/电视节目）。我尝试使用以下代码，但对于视频（电影/电视节目），我将 mediaUrl 设为 nil。

```
 .......

    NSNumber *videoTypeNum = [NSNumber numberWithInteger:MPMediaTypeAnyVideo];
    MPMediaPropertyPredicate *videoPredicate = [MPMediaPropertyPredicate predicateWithValue:videoTypeNum forProperty:MPMediaItemPropertyMediaType];
    MPMediaQuery *videoQuery = [[MPMediaQuery alloc] init];
    [videoQuery addFilterPredicate: videoPredicate];
    NSArray *items = [videoQuery items];

    for (MPMediaItem *mediaItem in items)  
    {

        NSURL *mediaUrl = (NSUrl *)[mediaItem valueForProperty:MPMediaItemPropertyAssetURL];
    }

    ...... 
```

谁可以帮我这个事？

# ruby-on-rails - 使用 CanCan 将索引页面上的视图限制为 user_id

> ID：12463623
> 
> 赞同：4
> 
> 时间：2012-09-17T16:39:08.620
> 
> 标签：ruby-on-rails, list, devise, indexing, cancan

我正在将 Devise 和 Cancan 用于 rails 3.2.6 应用程序。在应用程序中，我允许用户创建一个文档，其中包含一些收集在表单中的信息。然后我想允许用户在 localhost:3000/users/1/documents 的文档索引页面上仅列出他们的文档，这是有效的。什么不起作用，是我试图通过将 /users/:id/documents 替换为另一个数字来限制用户查看其他所有人的文档。

我正在使用 cancan 并且都尝试过

可以 :index, Document, :user_id => user.id 可以 :read, Document, :user_id => user.id

然后在 Document 控制器索引方法上

```
if can? :read, Document
 @documents = @user.documents
else
 redirect_to root_path
end 
```

也尝试过`:index`......但这不起作用。我也在用`load_and_authorize_resource`..

对我所缺少的有什么想法吗？

我会说，cancan 正在为我的用户管理和用户控制器工作，以便管理员创建、列出和编辑用户，所以我知道 cancan 正常工作。它还用于更新和删除用户文档。只是索引功能不起作用。

```
class Ability 

include CanCan::Ability 

  def initialize(user) 

    user ||= User.new # guest user (not logged in) 
    if user.id 
      if user.has_role? :user 
        can :create, Document 
        can :read, Document, :user_id => user.id 
        can :update, Document, :user_id => user.id 
      end 
    end 
  end 
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T17:55:34.897

您必须确保未登录的用户以及`user.id`与文档`user_id`（文档所有者）不同的用户无权阅读所有文档。

```
class Ability
  include CanCan::Ability

  def initialize(account)

    user ||= User.new  #non-logged-in user

    # logged in users
    if user.id and user.has_role?(:user)

      #content owners
      can :manage, Document, :user_id => user.id

      #other logged-in users
      can [:show, :create], Document

    end

  end
end 
```

请注意，如果您说 cancan 已经在工作，那么您没有任何类似的行，`can :read, :all`或者很可能您在某处给予许可。`can :read, Document`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T18:09:46.343

在你的情况下，你应该在你的能力课上写

```
def initialize(user)
  can :manage, Document do |document|
    document.user == user
  end  
end 
```

这将检查文档是否属于登录用户。如果是 can 将返回 true，否则返回 false。

有关如何使用块处理复杂授权的更多详细信息，

[https://github.com/ryanb/cancan/wiki/Defining-Abilities-with-Blocks](https://github.com/ryanb/cancan/wiki/Defining-Abilities-with-Blocks)

# c# - XtraReport 以多列模式显示多个页面

> ID：12463627
> 
> 赞同：1
> 
> 时间：2012-09-17T16:39:27.230
> 
> 标签：c#, devexpress, report, xtrareport

我有一个显示 100 页报告的 DevExpress XtraReport。我希望页面以页面在 MS-Word 中显示的方式显示。但是，XtraReport 以多列/行模式（卡片布局）显示它们。除了将 MultiColumn 属性设置为 None 之外，还有其他属性可以帮助我克服这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T17:12:15.723

不幸的是，DevExpress XtraReports 只提供了一种实现[多列布局的](http://documentation.devexpress.com/#XtraReports/CustomDocument2601)方法。如果您正在搜索使用多列文本制作报告的解决方案，您可以跟踪以下建议：

*   [XR RichText - 多列](http://www.devexpress.com/Support/Center/p/S134365.aspx)
*   [页面生成器 - 多列 - 能够将大文本换行到页面上的下一列](http://www.devexpress.com/Support/Center/Issues/ViewIssue.aspx?issueid=A1271)

# mysql - MySQL - 为每个重复值获取一个计数器

> ID：12463628
> 
> 赞同：13
> 
> 时间：2012-09-17T16:39:39.970
> 
> 标签：mysql, sql

我有一个有两列的表。

```
+------+------+
| data | num  | 
+------+------+
| a    |      | 
| a    |      |
| a    |      |
| b    |      |
| b    |      |
| c    |      |
| d    |      |
| a    |      |
| b    |      | 
+------+------+ 
```

我希望“num”列为每个重复条目显示一个增量计数器：

```
+------+------+
| data | num  | 
+------+------+
| a    |    1 | 
| a    |    2 |
| a    |    3 |
| b    |    1 |
| b    |    2 |
| c    |    1 |
| d    |    1 |
| a    |    4 |
| b    |    3 | 
+------+------+ 
```

除了 mySQL 查询之外，这是否可以在没有任何其他脚本的情况下完成？

## 更新：

扩展问题[在这里](https://stackoverflow.com/questions/12465221/mysql-convert-a-duplicate-value-in-an-unique-with-an-increment-concatenation)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-17T17:08:56.877

不幸的是，MySQL 没有您需要的窗口函数。所以你将不得不使用这样的东西：

**最终查询**

```
select data, group_row_number, overall_row_num
from
(
  select data,
        @num := if(@data = `data`, @num + 1, 1) as group_row_number,
        @data := `data` as dummy, overall_row_num
  from
  (
    select data, @rn:=@rn+1 overall_row_num
    from yourtable, (SELECT @rn:=0) r
  ) x
  order by data, overall_row_num
) x
order by overall_row_num 
```

见[SQL Fiddle with Demo](http://sqlfiddle.com/#!2/bb591/33)

**解释：**

首先，内部选择，这将模拟应用于`row_number`表中的所有记录（参见[SQL Fiddle with Demo](http://sqlfiddle.com/#!2/bb591/34)）：

```
select data, @rn:=@rn+1 overall_row_num
from yourtable, (SELECT @rn:=0) r 
```

查询的第二部分，将表中的每一行与下一行进行比较，看它是否具有相同的值，如果没有，则重新开始`group_row_number`（参见[SQL Fiddle with Demo](http://sqlfiddle.com/#!2/bb591/35)）：

```
select data,
      @num := if(@data = `data`, @num + 1, 1) as group_row_number,
      @data := `data` as dummy, overall_row_num
from
(
  select data, @rn:=@rn+1 overall_row_num
  from yourtable, (SELECT @rn:=0) r
) x
order by data, overall_row_num 
```

最后一个选择，返回您想要的值并将它们按您请求的顺序放回：

```
select data, group_row_number, overall_row_num
from
(
  select data,
        @num := if(@data = `data`, @num + 1, 1) as group_row_number,
        @data := `data` as dummy, overall_row_num
  from
  (
    select data, @rn:=@rn+1 overall_row_num
    from yourtable, (SELECT @rn:=0) r
  ) x
  order by data, overall_row_num
) x
order by overall_row_num 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-17T17:21:31.903

这是一个简单的查询，可以满足您的要求。

```
select id,data,rownum 
  from (
          select id,
                 data,
                 @row:=if(@prev=data,@row,0) + 1 as rownum,
                 @prev:=data 
            from tbl
        order by data,id
)t 
```

我在每一行都包含了一个 id。但你不需要它。

去小提琴：[http ://sqlfiddle.com/#!2/1d1f3/11/0](http://sqlfiddle.com/#!2/1d1f3/11/0)

信用： [想要 MY SQL 中列组的行号？](https://stackoverflow.com/questions/2026956/want-row-number-on-group-of-column-in-my-sql)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T17:08:20.223

数据是否必须保持显示的顺序，或者我们可以按“数据”值排序？

如果您可以排序，那么您只需要跟踪当前的“数据”值，这可以通过变量来完成：

```
set @last_data = null;
set @count = 0;
select data, @count,
  case when @last_data is null or data != @last_data then @count := 1 else @count := @count + 1 end as new_count,
  @last_data := data, @count
from t20120917
order by data; 
```

如果没有，我认为它会更复杂......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T17:12:14.603

它是这样的，但你需要创建程序

```
create procedure procname()
begin
DECLARE done,i,j int DEFAULT 0;
DECLARE n,m nvarchar(500) DEFAULT '';

DECLARE cur CURSOR FOR SELECT d.data,d.num FROM tablename AS d ORDER BY DATA;
DECLARE CONTINUE HANDLER FOR NOT FOUND SET done = 1;

OPEN cur;

read_loop: LOOP

set m = n;
SET j = i;
fetch cur into n,i;

IF n = m 
THEN
SET i = i+1;
// UPDATE here your TABLE but you will need one more colomn to be able to UPDATE ONLY one RAW that you need
ELSE 
SET i = 0; //RESET indexer 
END IF;

IF done = 1 THEN
LEAVE read_loop;
END IF;

END LOOP read_loop;

CLOSE cur;
end 
```

# linux - 外壳代码和内核黑客操作系统不可知？

> ID：12463629
> 
> 赞同：1
> 
> 时间：2012-09-17T16:39:41.613
> 
> 标签：linux, kernel

我正在阅读一本关于 hacking 内核的书，作者不断回到的一个领域是 shell 代码，许多内核 hacking 尝试试图找到一种执行 shell 代码的方法。有人可以详细说明这个主题，特别是你能澄清“shell代码”吗？

shell 代码如何绕过 *NIX 系统中的 sudo 或不是 Windows 机器中的管理员？是否有非特定于操作系统的 shell 代码攻击示例？我认为必须针对特定的操作系统。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T16:41:17.397

本质上，它是在寻找缓冲区溢出或类似技术，允许您将恶意代码插入以 root 身份运行的进程中。

例如，如果您使用了固定大小的缓冲区并且超出了该缓冲区，则您实际上可以覆盖内存内容并使用它来执行恶意负载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T16:43:07.007

一个简单的 shell 代码片段可以让你回味无穷：

```
/bin/sh 
```

或在 C 程序中：

```
system("/bin/sh"); 
```

如果您可以引导您的漏洞利用执行这样的代码行（例如，通过劫持程序预期控制路径的缓冲区溢出），您会得到一个带有受害者权限的 shell 提示，然后您就进入了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T16:47:19.203

[Shell 代码](http://en.wikipedia.org/wiki/Shellcode)是利用漏洞时使用的有效负载，该漏洞用于创建攻击者可以控制机器的命令 shell。

典型的 shell 代码在运行时可能会打开网络连接并`cmd.exe`在 Windows 机器（或`/bin/sh`Linux/unix 上）管道`stdin`和`stdout`网络连接上生成。攻击者可以从他的机器完成连接并输入命令并获得反馈，就好像他坐在受感染的机器上一样。

缓冲区溢出不是 shell 代码。它是被利用来执行shell代码的漏洞。

利用缓冲区溢出将 shell 代码复制到用户机器并覆盖程序堆栈上的返回地址。当当前执行的函数返回时，处理器跳转到上传的 shell 代码，为攻击者创建 shell。

有关利用缓冲区溢出的更多信息，请查看[Smashing the Stack for Fun and Profit](http://insecure.org/stf/smashstack.html)。

您可以尝试使用该`-fno-stack-protector`标志，`gcc`但我不太熟悉 OSX 或它可能使用的任何堆栈保护。

如果您想解决缓冲区溢出问题，现代编译器和现代操作系统都有保护措施，这使得这变得困难。你最好的选择是给自己一个 Linux 发行版并关闭它们。[有关禁用这些保护的更多信息，请参阅此问题](https://stackoverflow.com/q/2340259/416627)。

请注意，执行 shell 代码不需要缓冲区溢出。我已经演示了使用命令注入漏洞打开远程 shell 来上传和执行批处理文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-17T16:54:17.947

基本上，当程序运行时，与其相关的所有内容（变量、指​​令等）都作为缓冲区存储在内存中。

内存本质上是 RAM 中的一大堆位。

因此，就我们的示例而言，假设有一个变量`Name`存储在位#1-10 中。假设第 11-30 位用于存储指令。很明显，程序员期望`Name`长度为 10 位。如果我给出一个 20 位长的名称，它的缓冲区会溢出到保存指令的区域。所以我要设计我的后 10 位，`Name`这样指令就会被顽皮的指令覆盖。

' `innocentmeNAUGHTYCOD`'

那是攻击。

尽管并非所有实例都如此明显，但几乎每一段大代码中都存在一些漏洞。这完全取决于你如何利用它。

# api - 我使用什么 Amazon REST API 来获取图书信息？

> ID：12463634
> 
> 赞同：18
> 
> 时间：2012-09-17T16:39:52.900
> 
> 标签：api, rest, amazon

我使用什么 Amazon REST API 来获取图书信息？我将使用 PHP。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-18T08:52:32.880

如果您知道这本书的 ID，请使用[ItemLookup](http://docs.amazonwebservices.com/AWSECommerceService/latest/DG/ItemLookup.html)。如果您不知道，请使用[ItemSearch](http://docs.amazonwebservices.com/AWSECommerceService/latest/DG/ItemSearch.html)。

# html - 如何在 XSLT 中生成 html TOC 标识符？

> ID：12463637
> 
> 赞同：0
> 
> 时间：2012-09-17T16:39:57.850
> 
> 标签：html, xml, xslt, tableofcontents

我想在使用 XSL 生成的 HTML 文档中生成目录标识符。

从以下格式：

```
<?xml version="1.0" encoding="utf-8"?>
<section>
  <header>Heading 1</header>
  <section>
    <section>
      <section>
        <header>Heading 4</header>
      </section>
    </section>
  </section>
  <section>
    <header>Heading 2</header>
    <section>
      <section>
        <section>
          <header>Heading 5</header>
        </section>
      </section>
    </section>
    <section>
      <header>Heading 3</header>
    </section>
  </section>
  <section>
    <header>Heading 2</header>
  </section>
</section> 
```

我已经能够生成：

```
<?xml version="1.0" encoding="utf-8"?>
<h1>Heading 1</h1>
<h4>Heading 4</h4>
<h2>Heading 2</h2>
<h5>Heading 5</h5>
<h6>Heading 6</h6>
<h2>Heading 2</h2> 
```

谢谢：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="html" indent="yes" encoding="UTF-8" />

<xsl:template match="/">
<xsl:apply-templates/>
</xsl:template>

<xsl:template match="header">
<xsl:variable name="level" select="count(ancestor-or-self::section)"/>
<xsl:element name="h{$level}">
<xsl:apply-templates/>
</xsl:element>
</xsl:template> 
```

但我需要添加一个额外的 TOC 标识符才能拥有：

```
<?xml version="1.0" encoding="utf-8"?>
<a name="toc1"></a><h1>Heading 1</h1>
<a name="toc1_0_0_1"></a><h4>Heading 4</h4>
<a name="toc1_1"><h2>Heading 2</h2>
<a name="toc1_1_0_0_1"><h5>Heading 5</h5>
<a name="toc1_1_0_0_1_1"><h6>Heading 6</h6>
<a name="toc1_2"><h2>Heading 2</h2> 
```

纯 XSLT 处理可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T22:36:16.883

尽管这与您当前的预期输出不太匹配，但您可以在此处使用**xsl:number**元素：

```
<xsl:number count="section" level="multiple" /> 
```

您需要将其与**翻译**功能结合起来以替换 . 虽然有_。尝试以下 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="html" indent="yes" encoding="UTF-8"/>
   <xsl:template match="/">
      <xsl:apply-templates/>
   </xsl:template>

   <xsl:template match="header">
      <xsl:variable name="level" select="count(ancestor-or-self::section)"/>
      <xsl:variable name="name">
         <xsl:number count="section" level="multiple"/>
      </xsl:variable>

      <a name="{translate($name, '.', '_')}"/>
      <xsl:element name="h{$level}">
         <xsl:apply-templates/>
      </xsl:element>
   </xsl:template>
</xsl:stylesheet> 
```

这将输出以下内容：

```
<a name="1" /><h1>Heading 1</h1>
<a name="1_1_1_1" /><h4>Heading 4</h4>
<a name="1_2" /><h2>Heading 2</h2>
<a name="1_2_1_1_1" /><h5>Heading 5</h5>
<a name="1_2_2" /><h3>Heading 3</h3>
<a name="1_3" /><h2>Heading 2</h2> 
```

# nginx - Nginx sub_filter 重写？

> ID：12463640
> 
> 赞同：6
> 
> 时间：2012-09-17T16:40:09.910
> 
> 标签：nginx

我正在尝试使用以下内容重写代理页面的正文链接：

```
 sub_filter http://proxied.page.come http://local.page.com;
    sub_filter_once off; 
```

这是要走的路吗？[sub_filter 模块](http://nginx.org/en/docs/http/ngx_http_sub_module.html)和[substitutes_filter](https://www.nginx.com/resources/wiki/modules/substitutions/)有什么区别

也可以在 sub_filter 声明中使用变量吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-10-17T11:01:12.910

这是在代理页面上重写链接的一种完全有效的方法。“该模块是一个过滤器，它通过将*一个指定的字符串*`ngx_http_sub_module`替换为另一个来修改响应”（单次替换）

 *第三方`nginx_substitutions_filter`是一个过滤器模块，它可以对响应体*进行正则表达式和固定字符串替换*

所以第三方模块可以用来替换多个字符串，使用正则表达式和变量。例如：

```
subs_filter_types text/css text/xml;
subs_filter http(s)?://(www.)?proxied.page.com/     http$1://$http_host/ r;
subs_filter http(s)?://(www.)?proxied2.page.com/    http$1://$http_host/ r; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-19T10:41:45.347

理想情况下，您应该要求后端编写正确的链接。虽然可以使用子过滤器修复一些简单的情况，但这通常是不可能的（例如，如果返回的数据不是文本，而是例如闪存代码）。

您可以在 sub_filter 的替换字符串中使用变量（但不能在原始响应中匹配的字符串中），它已明确[记录](http://nginx.org/en/docs/http/ngx_http_sub_module.html#sub_filter)：

> 替换字符串可以包含变量。

至于 subs 过滤器 - 它是一个 3rd 方模块，预计会更强大，但可能包含更多错误。只要标准子过滤器对您来说就足够了 - 您可能不想使用 3rd 方子过滤器。*

# ios - 使用 CocosDenshion 播放带有 iPod 音乐的游戏背景音乐

> ID：12463642
> 
> 赞同：1
> 
> 时间：2012-09-17T16:40:11.860
> 
> 标签：ios, cocos2d-iphone, avaudioplayer

正如您所建议的那样，我遇到了麻烦=）

在游戏中，我使用 CocosDenshion 来播放背景音乐和音效。据我所知并且可以在代码中看到，它使用 AVAudioPlayer 播放背景音乐。当我尝试使用 iPod 库中的音乐启动我的应用程序时，出现了问题。

我将音频类别设置为 AmbientSound（尝试使用 AVAudioSession 和 C 接口进行设置）。如果我然后尝试直接使用 AVAudioPlayer 播放游戏背景音轨，它会在后台播放 iPod 音乐而不会出现问题。但如果尝试使用 SimpleAudioEngine 播放背景音乐，则只能播放 iPod 音乐。

有人可以建议如何让 CocosDenshion 在这种情况下工作吗？

# iphone - iPhone 5 上的移动 Safari：可见区域大小？

> ID：12463643
> 
> 赞同：10
> 
> 时间：2012-09-17T16:40:16.457
> 
> 标签：iphone, ios, mobile-safari

iPhone 5 上的 Mobile Safari 在默认配置、横向和纵向时可见区域的大小是多少？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-26T11:05:19.840

# iOS6

根据 Kyle Larson 的文章[iPhone 5 Web Design](http://www.kylejlarson.com/blog/2012/iphone-5-web-design/)，分辨率为：

*   纵向：640 × 888 像素（= 320 × 444 双像素）

*   横向：1136 × 392 像素（= 568 × 196 双像素）

那是导航栏，即*默认配置*，就像我在我的问题中写的那样。

# IOS 7

根据@astletron，决议是：

*   肖像：640 × 920 像素

*   横向：1136 × 424 像素

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T18:06:55.907

**肖像：**

*   高度 - 892（716 + 176（新旧设备的差异））
*   宽度 - 640

**景观**：

*   身高 - 420
*   宽度 - 1136

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-05-16T19:54:36.563

If you're after general viewport size, [iPhone5 portrait width is 320 and landscape width is 568](http://viewportsizes.com/?filter=iphone).

# apache - Apache““/”的身份验证失败：密码不匹配”

> ID：12463645
> 
> 赞同：2
> 
> 时间：2012-09-17T16:40:19.990
> 
> 标签：apache

我是 Apache 的新手，使用 Apache 2.2.22。我正在尝试使用 .htaccess 对我的整个 localhost 网站进行密码保护；.htaccess 位于 /Apache/htdocs，密码文件位于 /Apache/passwd。尝试访问该站点时，系统会提示我输入用户名/密码，但它总是失败并出现错误（来自 error.log）`[error] [client 127.0.0.1] user myuser: authentication failure for "/": Password Mismatch`。

密码文件是使用以下内容创建的：

```
htpasswd -c /Apache/passwd/passwords myuser 
```

我的 .htaccess 文件：

```
AuthType Basic 
AuthName "Restricted Files" 
AuthUserFile c:/Apache/passwd/passwords
AuthGroupFile /dev/null 
require valid-user 
```

我的 httpd.conf 文件被修改为：

```
<Directory "C:/Apache/htdocs">
Options Indexes FollowSymLinks
AllowOverride AuthConfig
Order allow,deny
Allow from all
</Directory> 
```

`mod_authn_core`用于身份验证和授权的 Apache 文档指出，确保模块`mod_authz_core`已经内置到 httpd 二进制文件中或由 httpd.conf 配置文件加载。但我不知道该怎么做；它们未在我的 httpd.conf 文件的模块部分中列出。`mod_auth_basic.so`, `mod_authn_file.so`, 和`mod_authz_groupfile.so`通过 httpd.conf 文件加载。

感谢您的任何帮助或想法。

# codeigniter - 如何让旧的 codeigniter 项目在子目录中工作

> ID：12463649
> 
> 赞同：0
> 
> 时间：2012-09-17T16:40:29.363
> 
> 标签：codeigniter

首先，我不是 codeigniter 开发人员，尽管我对它和 MVC 有一定的了解。我继承了一个项目，公司的老开发人员删除了他们的 codeigniter 网站，并将其替换为静态的单页 html 内容。他们这样做（据我所知）只是重命名 index.php 并将 index.html 放在根目录中。

所以...我将所有 codeigniter 文件移动到一个子目录，并适当地重命名了 index.php 文件

现在主页出现了，但所有内部链接都因内部 (500) 服务器错误而中断。

我做了几件事无济于事：

*   修改了 config.php base_url 以包含子目录：`$config['base_url'] = "http://". $_SERVER['HTTP_HOST']."/subdir/";`
*   尝试了所有选项`$config['uri_protocol']`

有人有想法么？我真的只需要从站点中恢复数据，我可以通过查看数据库和其他一些直接编码到视图中的东西来手动完成 - 但我宁愿让旧站点在子目录中运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T16:56:37.127

是`$config['index_page'] = '';`吗？

服务器是否运行 Apache？如果是这样，`.htaccess`规则呢？如果是这样，您可能需要添加 RewriteBase 规则，如下所示：

```
RewriteBase /subdir/ 
```

我们不再假设旧开发人员使用`anchor()`,`base_url()`和/或`site_url()`正确。如果他们对链接进行了硬编码（您不应该使用 CI），那么您必须编写`.htaccess`规则以将它们重写到新的子目录或编辑可能生成此类链接的控制器/视图。

# jquery - 即使我在确认框中单击了取消，它仍在提交页面

> ID：12463650
> 
> 赞同：0
> 
> 时间：2012-09-17T16:40:31.183
> 
> 标签：jquery

嗨，下面我有一个提交按钮和一个在单击提交按钮时执行的 jquery 函数：

```
<p><input id="submitBtn" name="submitDetails" type="submit" value="Submit Details" onClick="return myClickHandler();" /></p>

<script type="text/javascript"> 
function myClickHandler()
{
     if (validation())
     {
         showConfirm();
         return true;
     }

     return false;
}
</script> 
```

现在您可以看到是否满足 validation() 函数，然后它将执行 showConfirm() 函数，该函数将执行下面的确认框：

```
function showConfirm()
{
    var confirmMsg=confirm("Make sure that your details are correct, once you proceed after this stage you would not be able to go back and change any details towards Questions, Options and Answers for your Assessment." + "\n" + "\n" + "Are you sure you want to Proceed?" + "\n" );

    if (confirmMsg == true)
    {
        submitform(); 
        return true;  
    }
    else
    {
        return false;
    }
}

function submitform()
{
    var fieldvalue = $("#QandA").val();
    $.post("insertQuestion.php", $("#QandA").serialize(), function(data)
    {
        var QandAO = document.getElementById("QandA");
        QandAO.submit();
    });  
    alert("Your Details for this Assessment has been submitted"); 
} 
```

我的问题是这个。如果用户在确认框中单击“确定”，则它会提交该页面，这很好。但是如果用户点击取消，那么它不应该提交页面。问题是即使单击了“取消”按钮，它仍在提交页面。为什么是这样？

更新：

我在下面尝试了这段代码，但仍然没有运气：

```
function myClickHandler()
{
     if(validation())
     {
         return showConfirm();
     }

     return false;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T16:42:15.823

```
if(validation()){
    showConfirm();
    return true;
} 
```

您不会对 from 的返回做任何事情`showConfirm();`。您刚刚`return true`完成该功能。试试`return showConfirm();`。

* * *

如果用户在函数中点击取消，`showConfirm()`则不执行`submitform()`函数，`showConfirm()`函数返回false。但是由于您没有捕获该返回值，因此该`myClickHandler()`函数返回 true，这不会阻止提交表单。

您可能只是希望`myClickHandler()`函数始终返回 false，并让表单提交由您的`showConfirm()`函数处理。

* * *

**更新：** 这是（IMO）更好的方法。我不确定您是否需要使用 AJAX（`$.post`调用）。试试这个：

```
<form id="QandA" action="somepage.php" method="POST" onsubmit="return myClickHandler()">
    <!--
        ...
    -->
    <input type="submit" id="submitBtn" name="submitDetails" value="Submit Details" />
</form>

<script type="text/javascript">
    function myClickHandler()
    {
        if (!validation())
            return false;

        if (!confirm("Make sure that your details are correct, once you proceed after this stage you would not be able to go back and change any details towards Questions, Options and Answers for your Assessment." + "\n" + "\n" + "Are you sure you want to Proceed?" + "\n" ))
            return false;

        // if all you're trying to do is submit the form to insertQuestion.php,
        // then skip this AJAX call. I'm assuming that you need to do something
        // on the server before submitting the form. if not, skip this.
        $.ajax({
            url: "insertQuestion.php",
            data: $("#QandA").serialize(),
            async: false
        });

        return true;
    }
</script> 
```

# scala - Scala Swing：如何从 Borderpanel 中获取子组件

> ID：12463652
> 
> 赞同：0
> 
> 时间：2012-09-17T16:40:36.887
> 
> 标签：scala, scala-swing

如何获取 Scala Swing BorderPanel 上特定位置的子组件？我可以放置组件。在这种特殊情况下，我想检查 BorderPanel.Position.Centre 的组件。我也对，每个位置只能有一个子组件或空值：北，东等？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T19:00:26.260

好吧，这`layout`是一个从组件到位置的地图，所以以下工作（不确定是否有更简单的方法）：

```
import scala.swing.SimpleSwingApplication
import scala.swing.MainFrame
import scala.swing.BorderPanel
import scala.swing.Label

object BorderLayoutTest extends SimpleSwingApplication {

  def top = new MainFrame {    
    contents = new BorderPanel {

      val label = new Label("hi")

      import BorderPanel.Position._
      layout(label) = Center

      println("North: " + layout.find(_._2 == North))   //None
      println("Center: "+ layout.find(_._2 == Center))  //Some( ... )
    } 
  }  
} 
```

# actionscript-3 - 海量文件上传

> ID：12463655
> 
> 赞同：2
> 
> 时间：2012-09-17T16:40:46.713
> 
> 标签：actionscript-3, flash, html, browser, upload

我有一个接受非常大的文件的网络服务。通常在 10 - 15 GB（不是 MB）的范围内。然而，使用浏览器上传只能在 Linux 上使用 Chrome。所有 3 种主要浏览器在尝试上传此类文件时都有不同的缺陷：

*   Internet Explorer 在正好 4GB 后停止。
*   Firefox 根本没有启动。
*   Chrome（在 Windows 上）传输整个文件，但无法发送关闭绑定（改为发送 0xff）。

现在我们正在寻找一种让上传工作的方法。最好只使用 HTML/JS，但我认为没有办法做到这一点。第二次尝试是闪存，但 FileReference 似乎会因文件 > 4GB 而中断。最后一种方式是 Java，但这不是我们在浏览器客户端中寻找的方式。

请注意，这是关于客户端的。我知道服务器端代码有效，因为我可以在 Linux 上使用标准 HTML-Upload 和 Chrome 上传 12GB 文件。这是迄今为止唯一有效的浏览器/操作系统组合，但因此我确信，服务器代码很好。

有谁知道让大文件上传工作的任何方法？

问候， 史蒂芬

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T12:31:05.680

有一个相当年轻的 JS/HTML5 API 可能涵盖您的用户案例：

[https://developer.mozilla.org/en-US/docs/Using_files_from_web_applications](https://developer.mozilla.org/en-US/docs/Using_files_from_web_applications)

我不能说它的适用性。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-17T20:08:12.147

如果您使用的是 IIS，则默认最大文件上传为 4GB。您需要在脚本或服务器设置中更改此设置。

请参阅：[在 IIS7/Win7 Pro 上增加最大上传文件大小](https://stackoverflow.com/questions/2759461/increasing-max-upload-file-size-on-iis7-win7-pro)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-17T20:30:20.757

通常，您会使用流上传来分块上传此类文件。如果您获取文件的有限数据，则将该部分上传到服务器，服务器将数据附加到文件中。重复直到上传完整的文件。`FileStream`您可以使用（*更新*：仅限 Adob​​e AIR）或使用 javascript 使用实验性`Blob`/部分读取文件`FileReader`。我想这可能是解决问题的方法。

我认为这个解决方案可能会有所帮助： [AS3 fileStream 似乎将文件读入内存](https://stackoverflow.com/questions/4787805/as3-filestream-appears-to-read-the-file-into-memory)

让我知道这是否可行，这是一个有趣的问题。

# css - 父子位置固定，父子溢出：隐藏的错误

> ID：12463658
> 
> 赞同：66
> 
> 时间：2012-09-17T16:40:50.653
> 
> 标签：css, overflow, parent, fixed, children

我不知道是否有问题，但我想知道为什么在父/子元素`overflow:hidden`上不起作用。`fixed`

这是一个例子：

**CSS 和 HTML：**

```
.parent{
  position:fixed;
  overflow:hidden;
  width:300px;
  height:300px;
  background:#555;
}
.children{
  position:fixed;
  top:200px;
  left:200px;
  width:150px;
  height:150px;
  background:#333;
}
```

```
<div class="parent">
  <div class="children">
  </div>
</div>
```

**现场演示：[jsFiddle](http://jsfiddle.net/kirkas/DBHUv/)**

* * *

## 回答 #1

> 赞同：98
> 
> 时间：2014-05-25T20:36:08.087

You could consider using CSS `clip: rect(top, right, bottom, left);` to clip a fixed positioned element to a parent. See demo at [http://jsfiddle.net/lmeurs/jf3t0fmf/](http://jsfiddle.net/lmeurs/jf3t0fmf/).

***Beware, use with care!***

Though the clip style is widely supported, main disadvantages are that:

1.  The parent's position cannot be static or relative (one can use an absolutely positioned parent inside a relatively positioned container);
2.  The rect coordinates do not support percentages, though the `auto` value equals `100%`, ie. `clip: rect(auto, auto, auto, auto);`;
3.  Possibillities with child elements are limited in at least IE11 & Chrome34, ie. we cannot set the position of child elements to relative or absolute or use CSS3 transform like scale.

See [http://tympanus.net/codrops/2013/01/16/understanding-the-css-clip-property/](http://tympanus.net/codrops/2013/01/16/understanding-the-css-clip-property/) for more info.

EDIT: Chrome seems to handle positioning of and CSS3 transforms on child elements a lot better when applying [backface-visibility](https://developer.mozilla.org/en-US/docs/Web/CSS/backface-visibility), so just to be sure we added:

```
-webkit-backface-visibility: hidden;
-moz-backface-visibility: hidden;
backface-visibility: hidden; 
```

to the main child element.

Also note that it's not fully supported by older / mobile browsers or it might take some extra effort. See our implementation for the menu at [bellafuchsia.com](http://bellafuchsia.com).

1.  IE8 shows the menu well, but menu links are not clickable;
2.  IE9 does not show the menu under the fold;
3.  iOS Safari <5 does not show the menu well;
4.  iOS Safari 5+ repaints the clipped content on scroll after scrolling;
5.  FF (at least 13+), IE10+, Chrome and Chrome for Android seem to play nice.

EDIT 2014-11-02: Demo URL has been updated.

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2012-09-17T16:45:34.883

因为固定位置元素相对于视口是固定的，而不是另一个元素。因此，由于视口没有将其切断，溢出变得无关紧要。

> 带有 position:absolute 的元素的位置和尺寸是相对于其包含块的，而带有 position:fixed 的元素的位置和尺寸总是相对于初始包含块。这通常是视口：浏览器窗口或纸张的页面框。

参考：[http ://www.w3.org/wiki/CSS_absolute_and_fixed_positioning#Fixed_positioning](http://www.w3.org/wiki/CSS_absolute_and_fixed_positioning#Fixed_positioning)

* * *

## 回答 #3

> 赞同：40
> 
> 时间：2016-07-08T14:13:23.407

**2016 年更新：**

您可以创建一个新的堆叠上下文，如[Coderwall 所示](https://coderwall.com/p/2wzj-a/break-out-of-overflow-hidden-with-relative-positioned-fixed-elements)：

```
<div style="transform: translate3d(0,0,0);overflow:hidden">
   <img style="position:fixed; ..." />
</div> 
```

指的是[http://dev.w3.org/csswg/css-transforms/#transform-rendering](http://dev.w3.org/csswg/css-transforms/#transform-rendering)

> 对于布局由 CSS 盒模型控制的元素，除了 none 之外的任何转换值都会导致创建堆叠上下文和包含块。该对象充当固定定位后代的包含块。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2018-06-09T11:43:37.153

作为使用剪辑的替代方法，您还可以`{border-radius: 0.0001px}`在父元素上使用。它不仅适用于绝对/固定定位元素。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-12-15T16:40:23.713

如果要隐藏固定位置元素上的溢出，我发现的最简单的方法是将元素放在容器元素内，然后将`position:fixed`and`overflow:hidden`应用于该元素而不是包含的元素（为此，您必须`position:fixed`从包含的元素中删除去工作）。然后应按预期剪切固定容器的内容。

在我的情况下，我在使用[`object-fit:cover`](https://developer.mozilla.org/en-US/docs/Web/CSS/object-fit)固定位置元素时遇到了麻烦（它溢出了页面主体的边界，不管`overflow:hidden`）。将其放置在固定容器中并`overflow:hidden`在容器上解决了该问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-18T13:10:42.373

我在流畅的布局中遇到了一个类似的、非常复杂的问题，其中右列具有固定宽度，而左列具有灵活宽度。我的固定容器应该与灵活列具有相同的宽度。这是我的解决方案：

**HTML**

```
<div id="wrapper">
    <div id="col1">
    <div id="fixed-outer">
        <div id="fixed-inner">inner</div>
    </div>
    COL1<br />Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.
    </div>
    <div id="col2">COL2</div>
</div> 
```

**CSS**

```
 #wrapper {
    padding-left: 20px;
}

#col1 {
    background-color: grey;
    float: left;
    margin-right: -200px; /* #col2 width */
    width: 100%;
}

#col2 {
    background-color: #ddd;
    float: left;
    height: 400px;
    width: 200px;
}

#fixed-outer {
    background: yellow;
    border-right: 2px solid red;
    height: 30px;
    margin-left: -420px; /* 2x #col2 width + #wrapper padding-left */
    overflow: hidden;
    padding-right: 200px; /* #col2 width */
    position: fixed;
    width: 100%;
}

#fixed-inner {
    background: orange;
    border-left: 2px solid blue;
    border-top: 2px solid blue;
    height: 30px;
    margin-left: 420px; /* 2x #col2 width + #wrapper padding-left */
    position: absolute;
    width: 100%;
} 
```

**现场演示**：http: [//jsfiddle.net/hWCub/](http://jsfiddle.net/hWCub/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-17T16:47:09.923

固定位置元素是相对于浏览器窗口定位的，所以父元素基本上是无关紧要的。

要获得您想要的效果，在`overflow`父剪辑子的位置，请`position: absolute`改用：http: [//jsfiddle.net/DBHUv/1/](http://jsfiddle.net/DBHUv/1/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-02-08T19:18:45.787

如果您的用例有意义，这不是确切的答案，而是解决该问题的一个方便技巧。接受的答案是正确的。

一个简单的技巧是`z-index`在父相关容器上与下面和/或上面的另一个隐藏元素一起使用。

### 例子

html:

```
<div class="parent">
  <button class="child">
    Click Me
  </button>
</div>

<div class="sibling">
  <h1>Some Header</h1>

  <p>
    Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit, sed quia non numquam eius modi tempora incidunt ut labore et dolore magnam aliquam quaerat voluptatem. Ut enim ad minima veniam, quis nostrum exercitationem ullam corporis suscipit laboriosam, nisi ut aliquid ex ea commodi consequatur? Quis autem vel eum iure reprehenderit qui in ea voluptate velit esse quam nihil molestiae consequatur, vel illum qui dolorem eum fugiat quo voluptas nulla pariatur?
  </p>
</div> 
```

css

```
body {
  margin: 0px;
  padding: 0px;
}

.parent {
  background-color: blue;
  height: 500px;
  padding: 30px;
  position: relative;
  text-align: center;
  z-index: 1;
}

.child {
  padding: 10px;
  position: fixed;
  top: 100px;
}

.sibling {
  background: white;
  min-height: 500px;
  padding: 30px;
  position: relative;
  z-index: 2;
} 
```

# java - 外部类文件夹不可导出？

> ID：12463659
> 
> 赞同：0
> 
> 时间：2012-09-17T16:40:53.057
> 
> 标签：java, android, eclipse, jar

Eclipse，安卓项目。我有一个库项目（mylib）和一个引用它的应用程序（myapp）。我在 mylib 的构建路径中添加了一个包含一堆已编译 Java 类 (com.foo.*) 的文件夹，并检查它是否已导出。在主要活动中添加了对这些类之一的调用。没有构建错误。但是当我运行 myapp 并尝试从 com.foo 调用一个方法时，我得到一个“找不到类”异常。

当我将相同的类文件夹打包到一个 jar 文件中并在 Eclipse 中引用/导出它时，该应用程序就可以工作了。

我究竟做错了什么？类文件夹不以某种方式导出吗？

编辑：这是我的想法。Java Build Path 窗口统一处理 JAR 和类文件夹。任何为什么不应该 - 在大多数情况下，JAR 只是一个压缩的类文件夹。但是在将课程传递给其他项目时，就会出现这种行为差异。意外...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T16:42:53.137

您需要将其设为 android 库并将其导入到 android 面板中

# c++ - 良好做法 - 类似命名的变量

> ID：12463667
> 
> 赞同：1
> 
> 时间：2012-09-17T16:41:14.793
> 
> 标签：c++

微不足道的问题，但对我来说很多，我也想象其他人。有没有人有一个非常好的，非常聪明的解决方案？

```
void some_function (obj &A, obj &B)
{
// do stuff with A...
//e.g.
double number_A = (value - A.member_func() ) * A.other_func();

// do stuff with B.  similar BUT NOT EXACTLY like A...
//e.g.
double number_B = (value + B.member_func()  )   *   A.other_func();  
  // !!!!
  // Big time TYPO  -   should say "B.other_func()", not "A.other_func()" !!!!   
  // !!!!
} 
```

对这些类型的错误有什么好的防范措施吗？

我经常需要处理两个类似的变量，比如说一个名为“A”的版本，另一个是“B”。

因为每个代码都相似，所以我经常使用在“A”上工作的代码作为“模板”（即复制和粘贴）用于在“B”上工作的代码 - 进行小的调整，使代码变成适合 B。

因为我是人类，所以有时在复制代码时会忘记在某些位置将“A”更改为“B”。如果我很幸运，这将导致程序崩溃。无论哪种方式，这都是灾难性的。

有谁知道防止这种错别字的聪明技巧？

我想过...

*   括起来的括号`{ }`试图限制变量的范围 - 但如果对象 A 和 B 在函数参数中，那么这并不能解决它。
*   将每个函数分成子函数——一个用于 A，一个用于 B。从开发人员的角度来看，这有点麻烦（传递/返回许多变量）。
*   仅使用*指向*对象本身的指针 - 而不是实际对象。这样我们就可以`{ scope-control }`指针了。也很麻烦，（并且定义指针的开销可以忽略不计，即使我非常非常频繁地调用该函数，对吗？）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T16:57:44.730

在你给出的例子中，最好的防御是在每个函数中尽可能少地做：

```
void some_function (obj &A, obj &B)
{
    double number_A = do_stuff(A);
    double number_B = do_similar_stuff(B);
}

double do_stuff(obj &A) {
    return (value - A.member_func() ) * A.other_func();
}

// EITHER
double do_similar_stuff(obj &A) {
    // no variable rename when copying == no problem
    return value + A.member_func()  )   *   A.other_func();
}
// OR
double do_similar_stuff(obj &B) {
    // A not in scope == very brief problem until compiler tells us
    return value + B.member_func()  )   *   A.other_func();
    // Beware, also, the nightmare scenario that there's some *other* 
    // `A` in scope, so this *still* compiles. For that reason, prefer
    // the other option unless there's some good reason why this parameter 
    // should be `B`, and don't name member function parameters the same 
    // as data members etc.
} 
```

或者，您可以明确说明这两种“东西”之间的关系。假设您的`B`代码中不匹配的括号应该与`A`. 这完全取决于两个看起来相似的操作之间是否真的存在逻辑关系：

```
void some_function (obj &A, obj &B)
{
    double number_A = do_stuff(A, true);
    double number_B = do_stuff(B, false);
}

double do_stuff(obj &A, bool subtract) {
    // yeah, never call variables "tmp". Unless you have no context
    // to give them meaning.
    // Depending on the type of `tmp`, there might be a better way to
    // write this, using multiplication by -1\. But let's not assume, we'll do
    // one refactor at a time.
    auto tmp = subtract ? value - A.member_func() : value + A.member_func();
    return tmp * A.other_func();
} 
```

其他例子会有所不同。正如你所说，写起来可能很累，但除了发现这个错误之外，它还有很多好处。尤其重要的是，它会引导您以一种尽量*避免*传递/返回许多变量的方式编写代码。因此，您的每一行代码对程序中其他事物的影响较少，这是基本的代码卫生。

这也可能意味着您可以测试您的公式是否正确，而`A`与您的公式是否正确无关`B`，以及短函数的其他各种好处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T16:48:57.253

我有几个想法

1.  如果您的编辑器支持它们，您可以使用片段或移至支持它们的编辑器/ide（我个人使用 kdevelop 和片段非常有用，因为它们替换了片段变量的所有出现）
2.  您还可以使用重构（如果您已经使用了这个名称，则在单独的函数中）
3.  还选择一段代码并在选择中全部替换可能会有所帮助
4.  使用定义也是一种选择

不过，在我看来，使用更智能的 IDE 是最好的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T16:48:49.733

我认为您最好的选择是在其他类中没有类似的函数名称。此外，将单元测试与同行代码审查相结合应该在*大多数*情况下发现这些错误。然而，在 SW 历史上，这些类型的错误在很多天、几个月或几年后才被发现。

# .net - 使用 FileSystemWatchers 共享相同的事件处理程序安全吗？

> ID：12463671
> 
> 赞同：5
> 
> 时间：2012-09-17T16:41:25.803
> 
> 标签：.net, thread-safety, filesystemwatcher

使用 FileSystemWatchers 共享相同的事件处理程序安全吗？

让多个 FileSystemWatchers 使用相同的事件处理程序监视不同的目录是否安全？

```
Class Snippets
    Private _watchPaths As New List(Of String) From {"x:\Dir1", "x:\Dir2"}
    Private _watchers As List(Of FileSystemWatcher)
    Private _newFiles As New BlockingCollection(Of String)

    Sub Watch()
        Dim _watchPaths As New List(Of String) From {"x:\Dir1", "x:\Dir2"}
        Dim watchers As List(Of FileSystemWatcher)

        For Each path In _watchPaths
            Dim watcher As New FileSystemWatcher
            AddHandler watcher.Created, Sub(s, e)
            _trace.DebugFormat("New file {0}", e.FullPath)
            'Do a little more stuff
            _newFiles.Add(e.FullPath)
            End Sub
        Next
    End Sub
End Class 
```

或者我们必须将 FileSystemWatcher 包装在如下的类中以使事件处理程序线程安全？

```
Class FileWatcher
    Private _fileSystemWatcher As New FileSystemWatcher

    Public Sub Start(path As String, filter As String, action As Action(Of Object, FileSystemEventArgs))
        With _fileSystemWatcher
            .Path = path
            .Filter = filter
            .EnableRaisingEvents = True
            AddHandler .Created, Sub(s, e)
            action(s, e)
            End Sub
        End With
    End Sub

    Public Sub [Stop]()
        _fileSystemWatcher.Dispose()
    End Sub
End Class 
```

这里是辅助类的用法：

```
Sub Watch
    For Each path In _watchPaths
        Dim Watcher as new FileWatcher
        watcher.Start(path, "*.txt"), Sub(s, e)
        _trace.DebugFormat("New file {0}", e.FullPath)
        'Do a little more stuff
        _newFiles.Add(e.FullPath)
        End Sub)      
    Next
End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T17:44:51.997

`FileSystemWatcher`默认情况下，由引发的事件是在线程池线程上引发的。这意味着事件处理程序中使用的任何数据都是“共享的”——无论您是否有多个处理程序。您应该保护（例如`lock`访问）这些共享数据以避免损坏。

Alternatively, you can use [FileSystemWatcher.SynchronizingObject](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.synchronizingobject.aspx) to provide a synchronization context so that all events raised on a `FileSystemWatcher` occur on a single, or a known thread. This is typically done if your event handlers touch GUI elements.

# mysql - SQL 按日期和时间排序

> ID：12463673
> 
> 赞同：4
> 
> 时间：2012-09-17T16:41:36.677
> 
> 标签：mysql, sql, date, time, sql-order-by

有字段'日期'（YYYY-MM-dd）和'时间'（hh：mm am / pm）的表格，但时间有时可能是空白的。是否可以使用这种结构按日期和时间订购商品？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T16:43:02.010

是的，您可以用逗号分隔列名来实现这一点：

```
ORDER BY date, time 
```

您需要适当地处理“空白”时间（即它们应该放在结果集中的非空白之前还是之后）：

```
ORDER BY date, time DESC 
```

**UPDATE**适当地处理 am 和 pm

为了实现这一点，您可以使用[SUBSTRING_INDEX 函数](http://dev.mysql.com/doc/refman/5.1/en/string-functions.html#function_substring-index)：

```
ORDER BY date, SUBSTRING_INDEX(time, " ", -1), SUBSTRING_INDEX(time, " ", 1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T16:47:10.903

是的，您可以使用`ORDER BY Date, Time`，这将按字段中的可用数据排序。空白值将在结果末尾一起排序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-29T12:07:12.420

您可以使用

```
SELECT * FROM customer_tbl ORDER BY date DESC, time DESC 
```

这应该可以帮助你

# c# - 我们可以在 C# 的运行时动态交换程序集吗

> ID：12463675
> 
> 赞同：1
> 
> 时间：2012-09-17T16:41:46.993
> 
> 标签：c#

考虑以下代码 -

```
namespace N1
{
    class A
    {
        //some implementation
    }
    class B
    {
        //some implemntation
    }
}

namespace N2
{
    class A
    {
        //slightly different implementation
    }
    class B
    {
        //slightly different implementation
    }    
} 
```

显然我们不能同时使用这两个程序集——

解决方法是使用完全限定的类名。重构使用 N1 命名空间类的 1000 行代码时。在流程启动时做出一次决定，是必须使用 N1 还是使用 N2。

比 C++ 中的条件编译功能更高级的东西

```
#ifdef debug
#include <N1.h>
#elif
#include <N2.h>
#endif 
```

对不起，如果这听起来不可能，但出于我的好奇心，我想知道是否有可能 -

```
if (...)
    {
        using N1; 
    }
else
    {
        using N2;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T16:43:33.530

我认为您想要的是接口和 IoC 容器/工厂。

为所有方法创建接口，`A`并`B`在一个单独的程序集中提供`N1`和`N2`引用。在两个程序集中实现这些接口。然后连接一个在运行时解析正确实现的 IoC 容器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T16:43:38.863

但是，您描述的`using`基于 - 的方法将不起作用。“使用命名空间”实际上只是一个编译时构造，因此它对运行时行为没有影响。在运行时，使用完全限定类型。

处理此问题的一种典型方法是通过[MEF](http://msdn.microsoft.com/en-us/library/dd460648.aspx)之类的库使用 IoC 的形式。

如果您使两个命名空间中的类型派生自相同的基类，或实现相同的接口，则可以`[Export]`将类型来自两个单独的程序集。可以在运行时决定组成哪个程序集。这使您可以`[Import]`根据需要键入，然后您将获得适当的类型。

# c++ - OpenCV 2.x 中的像素访问错误

> ID：12463677
> 
> 赞同：2
> 
> 时间：2012-09-17T16:42:03.283
> 
> 标签：c++, image-processing, opencv, computer-vision

我在尝试找出如何在 OpenCV 的新版本 (2.x) 中访问 rgb 像素时遇到了麻烦。我尝试混合使用旧方法和新方法，但没有成功。

这是我的代码

```
#include <opencv2\imgproc\imgproc.hpp>
#include <opencv2\highgui\highgui.hpp>

using namespace cv;
using namespace std;

int main (int argc, char* argv[])
{
Mat img;

string winMain = "Main";

img = imread(argv[1]);

for (int j = 0; j < img.rows; j++)
{
    for (int i = 0; i < img.cols; i++)
    {
        img.data[j * img.cols + i * 3 + 0] = (uchar)0; //B
        //img.data[j * img.cols + i + 1] = (uchar)0; //G
        //img.data[j * img.cols + i + 2] = (uchar)0; //R
    }
}

namedWindow(winMain);

imshow(winMain, img);

waitKey();  

return 1;
} 
```

正如您在以下示例中所注意到的，仅修改了图像的三分之一。

[链接到示例](http://imageshack.us/a/img832/7083/20120917123426main.jpg)

感谢您的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-18T06:51:49.977

我测试了你的代码，我发现了这个错误。您将**列索引**乘以 3 ( `i * 3`)，但还需要将**行索引**乘以3 ( `j * img.cols * 3`)。

我替换`j * img.cols`为`j * img.cols * 3`：

```
for (int j = 0; j < img.rows; j++)
{
    for (int i = 0; i < img.cols; i++)
    {
        img.data[j * img.cols * 3 + i*3 + 0] = (uchar)0; //B
        //img.data[j * img.cols * 3 + i*3 + 1] = (uchar)0; //G
        //img.data[j * img.cols * 3 + i*3 + 2] = (uchar)0; //R
    }
} 
```

**让我们尝试一个例子。**

示例图像（来自[MIT 行人数据集](http://cbcl.mit.edu/software-datasets/PedestrianData.html)）：

![原图](../Images/78df4c2ae8c7d18726bdb4e60770d57a.png)

使用 OP 代码的结果：

![OP的代码](../Images/188a026c121a3bf9a60843da00ad3a74.png)

结果使用修改后的代码（带`j * img.cols * 3`）：

![新代码](../Images/695bd4bcfbe87c4dffbf8df712b6b032.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T18:01:22.837

在您的循环中，您可以执行以下操作：

```
img.at<Vec3b>(j,i)[0] = 0;    // Blue Channel
img.at<Vec3b>(j,i)[1] = 0;    // Green Channel
img.at<Vec3b>(j,i)[2] = 0;    // Red Channel 
```

这是你想要的还是我理解错误？

# c# - 使用 datacontract 序列化 C# 处理不属于枚举的值

> ID：12463679
> 
> 赞同：1
> 
> 时间：2012-09-17T16:42:11.230
> 
> 标签：c#, .net, datacontractserializer

我有一段代码使用 datacontract 序列化程序对 .xml 文件进行序列化和反序列化。公共属性之一是枚举。.xml 有可能会被手动编辑，然后作为枚举的属性可能具有一些不属于枚举的值。在这种情况下，数据合约在脱轨时失败。

如何处理？什么是好的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T17:07:22.190

试试这个：

```
public enum E
{
    One, 
    Two
}

[DataContract]
public class C
{
    [DataMember]
    private string myField;

    public E MyProperty 
    {
        get 
        { 
            E result;
            return Enum.TryParse<E>(myField, out result) ? result : default(E);
        }
        set { myField = value.ToString(); }
    }
} 
```

由于用户可以将*任何内容*放入相应的 XML 标记中，因此我看不到最好的解决方案，而不是将属性值存储在字符串字段中。

如果性能至关重要，您可以将枚举值存储在常规属性中，并且仅在序列化/反序列化数据时使用字符串字段（请参阅[`OnSerializingAttribute`](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.onserializingattribute.aspx)/ [`OnDeserializedAttribute`](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.ondeserializedattribute.aspx)）。

# wcf - 如何在 wcf 检查器中获取消息正文

> ID：12463681
> 
> 赞同：0
> 
> 时间：2012-09-17T16:42:16.337
> 
> 标签：wcf, text, inspector

我需要监控服务的响应，我用方法获取正文`GetReaderAtBodyContents()`，但是当 WCF 发送错误消息时，正文无法读取，因为消息没有`xmlelement("Text cannot be written outside the root element.")`？我看到那个文本不能有`<binary>`。谁知道有得到错误信息的正文？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T08:33:55.487

消息格式为 RAW，我阅读正文：

```
var bodyReader = message.GetReaderAtBodyContents();
            bodyReader.ReadStartElement("Binary");
            var bodyBytes = bodyReader.ReadContentAsBase64();
            writer = XmlDictionaryWriter.CreateBinaryWriter(ms);
            writer.WriteStartElement("Binary");
            writer.WriteBase64(bodyBytes, 0, bodyBytes.Length);
            writer.WriteEndElement();
            writer.Flush();
            ms.Position = 0;
            reader = XmlDictionaryReader.CreateBinaryReader(ms, XmlDictionaryReaderQuotas.Max);
            body = Encoding.UTF8.GetString(bodyBytes);
            ms.Position = 0;
            newMessage = Message.CreateMessage(reader, int.MaxValue, message.Version);
            CopyMessagePropertiesAndHeaders(message, newMessage);
            message = newMessage; 
```

但是如果返回错误消息，GetReaderAtBodyContents() 会引发错误，因为消息没有 xmlelement `<Binary>`，如何解决？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T16:54:42.987

试试这个：[http ://wcfpro.wordpress.com/2011/01/04/ catching-the-real-exception/](http://wcfpro.wordpress.com/2011/01/04/catching-the-real-exception/)

# android - numberPicker 上的 onChangeListener

> ID：12463684
> 
> 赞同：1
> 
> 时间：2012-09-17T16:42:34.167
> 
> 标签：android, keyboard, focus, android-softkeyboard, picker

仅当软键盘输入数字时，是否可以为 numberPicker 设置 onChangeListener？当数字更改 gy +/- 时，不应执行 Listener。仅当用户从软键盘输入数字时。

目标是在用户在前一项中输入数字后，下一个选择项应该获得焦点。所以用户准备好输入一个像“12345”这样的数字，每个pickeritem都有自己的值：

```
Picker0=1
Picker1=2
Picker3=3
Picker4=4
Picker5=5 
```

这是可能的还是错误的方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T17:00:31.783

就我个人而言，我不喜欢在我可能犯错误时自行移动的焦点——例如，如果我按下 4 而不是 5，它会将我带到下一个选择器，我会很生气。您可能会考虑在用户按下回车键时更改焦点...不过，无论哪种方式，您都希望在您的活动或对话框中设置一个 onKeyUp 事件，寻找代表焦点更改的键码（即回车键或号码）

```
public boolean onKeyUp(int keyCode, KeyEvent event) {
  if (keyCode == KeyEvent.KEYCODE_ENTER)
    //blah
    return true;
  }
  else if (keyCode == KeyEvent.KEYCODE_1) // sadly you'll have to put in a
    //blah                                // comparison for each number here
    return false; // Return false b/c you want the picker to receive number input
  }
  return false;
} 
```

# r - 通过另一个矩阵中的值对矩阵进行子集

> ID：12463687
> 
> 赞同：0
> 
> 时间：2012-09-17T16:42:41.670
> 
> 标签：r

我正在尝试对矩阵进行子集化：

```
windowSize <- 60
windows <- embed(1:nrow(datatsr), windowSize)

head(windows):

[,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12] [,13] [,14] [,15] [,16] [,17]   [,18]
[1,]   60   59   58   57   56   55   54   53   52    51    50    49    48    47    46    45    44    43
[2,]   61   60   59   58   57   56   55   54   53    52    51    50    49    48    47    46    45    44
[3,]   62   61   60   59   58   57   56   55   54    53    52    51    50    49    48    47    46    45
[4,]   63   62   61   60   59   58   57   56   55    54    53    52    51    50    49    48    47    46
[5,]   64   63   62   61   60   59   58   57   56    55    54    53    52    51    50    49    48    47
[6,]   65   64   63   62   61   60   59   58   57    56    55    54    53    52    51    50    49    48

dim(windows)
[1] 3291   60 
```

按值（其中`V1`列实际上是我想包含在`windows`上面的矩阵中的行号）：

头部（子集）：

```
 V1
1  67
2  89
3 111
4 133
5 155
6 176 

dim(subset)
[1] 152   1

range(subset)
[1]   67 3351 
```

我希望输出矩阵仅包含`subset`矩阵 V1 列中存在的行号，而不包含其他行。

例如：

```
[,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8] [,9] [,10] [,11] [,12] [,13] [,14] [,15] [,16] [,17]   [,18]
[1,]  126   125   124   123  122  121   120   119   118    117    116    115    114    113    112    111    110    109 
```

其中第一个值`subset[,1]`是从 126 到 109 的序列 - 存在于`windows`矩阵第 67 行的序列。等等...

我试过：

```
window=windows[subset[,1],]

Error: subscript out of bounds 
```

或者：

```
window=subset(windows,windows%in%subset[,1])

Error in subset.matrix(windows, windows %in% subset[, 1]) : 
(subscript) logical subscript too long 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T18:15:43.737

删除 的值`subset`高于 的行数`windows`：

```
windows[subset$V1[subset$V1 <= nrow(windows)], ] 
```

# r - 将图像插入图表区域外的ggplot

> ID：12463691
> 
> 赞同：11
> 
> 时间：2012-09-17T16:42:55.057
> 
> 标签：r, ggplot2

是否可以将图像添加到图表区域之外的 ggplot 图表？

我知道可以使用 annotate_raster 和 annotate_custom 将图像添加到图表中，但是它们都在图表中添加图像。我需要在图表上方的右上角添加公司徽标 - 在标题级别。

使用 annotate_custom 添加图像的示例：将图像 [插入 ggplot2](https://stackoverflow.com/questions/9917049/inserting-an-image-to-ggplot2)

更新：根据 user1317221_G 的建议，我可以将图像放在外面。

```
library(png)
library(grid)
library(ggplot2)
img <- readPNG(system.file("img", "Rlogo.png", package="png"))

g <- rasterGrob(img, interpolate=TRUE)
plt <- qplot(1:10, 1:10, geom="blank") +
      opts(title = 'Title') + 
      geom_point() 
plt2 <- plt + annotation_custom(g, xmin=9, xmax=10, ymin=10.5, ymax=11.25)

gt <- ggplot_gtable(ggplot_build(plt2))
gt$layout$clip[gt$layout$name == "panel"] <- "off"
grid.draw(gt) 
```

我想自动放置图像 - 自动确定 xmin/xmax 和 ymin/ymax。使用传统图形我可以调用 par('usr') 并获取图表参数，但这不适用于 ggplot 图表。是否有一种简单的方法来确定 ggplot 中的绘图区域？例如获取 plt 的大小并将限制值插入 plt2

UPDATE2：如果您使用刻面，此方法也不起作用。例如，我想将徽标放在标题级别的右上角，如下图所示，如果使用上述方法，则会出现错误。

```
d <- ggplot(diamonds, aes(carat, price, fill = ..density..)) + 
     xlim(0, 2) + 
     stat_binhex(na.rm = TRUE) + 
     labs(title = 'Title') +
     theme(aspect.ratio = 1) + 
     facet_wrap(~ color, scales = "free_x") 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-18T23:02:45.047

刻面时，`annotation_custom`在所有面板中绘制注释。因此，`annotation-custom`可能不是最好的方法。这是使用包中的函数的两次尝试`grid`。两者都不是完全自动的，但您可能能够调整其中一个以满足您的需求。他们设置了一个 2 X 2 网格，使用`grid.show.layout()`命令显示。在第一个中，多面图填充了整个面板，右上角的视口包含徽标。碰巧的是，在您的情节中，徽标有明显的空间。请注意布局中视口占用的行和列的方式`layout.pos.row`和方式。`layout.pos.col`

```
library(ggplot2)
library(png)
library(grid)

# Get the logo
img <- readPNG(system.file("img", "Rlogo.png", package="png"))
g <- rasterGrob(img)

# Set the size of the viewport to contain the logo
size = unit(2, "cm")

# Get the graph
d <- ggplot(diamonds, aes(carat, price)) + 
     xlim(0, 2) + 
     stat_binhex(na.rm = TRUE) + 
     labs(title = 'Title') +
     theme(aspect.ratio = 1) + 
     facet_wrap(~ color, scales = "free_x")

# Set up the layout for grid 
heights = unit.c(size, unit(1, "npc") - size)
widths = unit.c(unit(1, "npc") - size, size)
lo = grid.layout(2, 2, widths = widths, heights = heights)
# Show the layout
grid.show.layout(lo)

# Position the elements within the viewports
grid.newpage()
pushViewport(viewport(layout = lo))

    # The plot
pushViewport(viewport(layout.pos.row=1:2, layout.pos.col = 1:2))
print(d, newpage=FALSE)
popViewport()

    # The logo
pushViewport(viewport(layout.pos.row=1, layout.pos.col = 2))
print(grid.draw(g), newpage=FALSE)
popViewport()
popViewport()

# To save the object
g = grid.grab()

grid.newpage()
grid.draw(g) 
```

标题与徽标并不完全一致。一种解决方法是从 ggplot 中删除标题，绘制一个包含标题的单独 textGrob，然后将 textGrob 放置在包含徽标的视口旁边的左上角视口中。

```
# Get the logo
img <- readPNG(system.file("img", "Rlogo.png", package="png"))
g <- rasterGrob(img)

# Set the size of the viewport to contain the logo
size = unit(2, "cm")

# Get the graph
d <- ggplot(diamonds, aes(carat, price)) + 
     xlim(0, 2) + 
     stat_binhex(na.rm = TRUE) + 
     # labs(title = 'Title') +
     theme(aspect.ratio = 1) + 
     facet_wrap(~ color, scales = "free_x")

# and the title
title = textGrob("Title", gp = gpar(face = "bold", cex = 2))

# Set up the layout for grid 
heights = unit.c(size, unit(1, "npc") - size)
widths = unit.c(unit(1, "npc") - 1.5*size, size)
lo = grid.layout(2, 2, widths = widths, heights = heights)
# Show the layout
grid.show.layout(lo)

# Position the elements within the viewports
grid.newpage()
pushViewport(viewport(layout = lo))

    # The plot
pushViewport(viewport(layout.pos.row=2, layout.pos.col = 1:2))
print(d, newpage=FALSE)
popViewport()

    # The logo
pushViewport(viewport(layout.pos.row=1, layout.pos.col = 2))
print(grid.draw(g), newpage=FALSE)
popViewport()

    # The title
pushViewport(viewport(layout.pos.row=1, layout.pos.col = 1))
print(grid.draw(title), newpage=FALSE)
popViewport()
popViewport()

# To save the object
g = grid.grab()

grid.newpage()
grid.draw(g) 
```

![在此处输入图像描述](../Images/2354c4b8160be40b7a7d86f6051b5c9f.png)

# c++ - 如何从数组中并行删除零值

> ID：12463693
> 
> 赞同：8
> 
> 时间：2012-09-17T16:42:55.933
> 
> 标签：c++, arrays, cuda, thrust

如何使用 CUDA 有效地从数组中并行删除零值。有关零值数量的信息可以提前获得，这应该可以简化此任务。

重要的是，在将数字复制到结果数组时，数字保持与源数组中一样的顺序。

* * *

例子：

该数组将例如包含以下值： [0, 0, 19, 7, 0, 3, 5, 0, 0, 1] 以及 5 个值为零的附加信息。然后，所需的最终结果将是另一个数组，其中包含： [19, 7, 3, 5, 1]

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-17T19:33:06.037

要从数组中删除某些元素，您可以使用[Thrust Library 的重新排序操作](https://docs.nvidia.com/cuda/thrust/index.html#reordering)。给定一个 predicate `is_not_zero`，它返回`false`零值，`true`对于其他值，您可以编写这样的操作

```
thrust::copy_if(in_array, in_array + size, out_array, is_not_zero); 
```

输出数组将仅包含非零值，因为谓词表明如此。

您还可以使用带有反向谓词的“remove_if”函数，该谓词返回`true`零和`false`其他......

```
thrust::remove_if(in_array, in_array + size, is_zero); 
```

我建议你看一下 Thrust 库的压缩示例，或者一般压缩概念。

[https://github.com/thrust/thrust/blob/master/examples/stream_compaction.cu](https://github.com/thrust/thrust/blob/master/examples/stream_compaction.cu)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-09T22:14:32.777

如果您不想使用 Thrust 而更喜欢使用 CUDA，那么最好的办法可能是运行 Sum Scan，这里有详细描述

[https://developer.nvidia.com/gpugems/gpugems2/part-iv-general-purpose-computation-gpus-primer/chapter-36-stream-reduction](https://developer.nvidia.com/gpugems/gpugems2/part-iv-general-purpose-computation-gpus-primer/chapter-36-stream-reduction)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T19:45:43.107

奇偶合并排序的变体，或者实际上任何排序算法，其中排序由 定义`a < b === (a != 0 && b == 0)`？

# javascript - 我的 javascript 在 chrome 中无法识别？

> ID：12463701
> 
> 赞同：0
> 
> 时间：2012-09-17T16:43:23.510
> 
> 标签：javascript, html, google-chrome

这是我尝试 javascript 的第一天，我现在使用 chrome 开发者工具。以下示例应将“我的第一个 JavaScript”打印到网站，但那里什么也没有。我放入`document.write("My First JavaScript")`控制台，它只是将“我的第一个 JavaScript”放在`<script>`标签之外，然后打印正确的结果。我用谷歌搜索知道 JavaScript 被 a`<script>`和`</script>`标签包围，但它似乎在 html 中不起作用。请帮我解决一下这个。谢谢！

```
<html>
 <body>
   <script>
     document.write("My First JavaScript");
   </script>
 </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T19:44:57.050

我会退后一步，听听这里评论中的一些建议。作为一个 Javascript 新手，我发现最有用的教程是[CodeAcademy.com上的互动课程](http://www.codecademy.com/)

至于实际的代码......你所描述的实际上是它应该如何工作。将控制台想象成被这些标签包裹着。本质上，就好像您将命令放入文本文件并将其包含在脚本标记中，就像您对其他 JavaScript 所做的那样。

Document.write 将获取一个 HTML 文档并将其呈现到您的屏幕上。在这种情况下，您只向它发送一个字符串（一段文本），浏览器正在构建您看到的 HTML 的其余部分，以使其成为有效文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T16:48:14.977

[Java脚本教程](http://www.w3schools.com/js/default.asp)

尝试从头开始学习..现在正在做..：P

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T16:45:21.313

```
<script type="text/javascript">
     document.write("My First JavaScript");
</script> 
```

# php - 更新父项时子行消失

> ID：12463706
> 
> 赞同：1
> 
> 时间：2012-09-17T16:43:53.357
> 
> 标签：php, mysql

我有一个多部分表单，按“返回”或“下一步”将导致该部分被提交并存储到数据库（MySQL）中；唯一的区别是它是转到下一个还是上一个表单。

请注意，后续部分（从第二部分开始）是第一部分表的子表。他们将“ePARno”作为外键。

第一部分执行此代码段：

```
if( isset( $_SESSION[ 'eparno' ] ) ) { //if it's an edit, replace
        $eparno = $_SESSION[ 'eparno' ];
        $insert_query_0 = mysql_query ("
            REPLACE INTO form 
                (ePARno, caseno, accomplishedby)
                VALUES 
                ('$eparno', '$caseno', '$accomplishedby')
        ");
}
else { //otherwise, it's a fresh insert
    $insert_query_0 = mysql_query ("
        INSERT INTO form 
            (caseno, accomplishedby)
            VALUES 
        ('$caseno', '$accomplishedby')
    ");
     $eparno = mysql_insert_id();
} 
```

当我按回第二个表格时，我的问题出现了，将我带到第一个表格，然后通过点击下一个返回它。当我这样做时会发生什么是第二个表单的插入行被插入（通过按 Back）但是当我从第一个表单中按 Next 时它会从表中消失。（我通过phpmyadmin查看数据库，同时按back和next，一步一步）

我怀疑这与替换父行的第一个表单有关。如果它执行 REPLACE，我怀疑已经存在的子行（例如第二种形式的子行）被删除。

我还必须说，如果我不回去，事情就会顺利进行。没有行消失。

我的怀疑有任何依据吗？如果是这样，我该如何补救？如果不是，可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T16:53:34.977

`REPLACE`做一个`DELETE`和`INSERT`。我猜想`DELETE`是级联到子表的。

试试`INSERT...ON DUPLICATE KEY`吧。

'caseno' 是你的主键吗？如果是这样，也许是这样的：

```
INSERT into form (caseno, accomplishedby) values (?,?)
ON DUPLICATE KEY UPDATE eparno = values(eparno), accomplishedby = values(accomplishedby) 
```

# .net - 如何在不同的词法范围内声明和设置 DateTime 对象的值？

> ID：12463710
> 
> 赞同：0
> 
> 时间：2012-09-17T16:44:02.370
> 
> 标签：.net, datetime, lexical

我阅读了这个问题和答案，如果您需要修改（或移动）对象的时间，则必须在其中创建一个新的 DateTime 对象，因为 DateTime 是一种不可变的对象类型。

[为什么 DateTime.AddHours 似乎不起作用？](https://stackoverflow.com/questions/10781420/why-datetime-addhours-doesnt-seem-to-work)

如果正在声明变量并且在相同的词法范围内设置值，那很好。除了我在不同的词法范围内声明和设置值。通常我会做“DateTime from_instant = null;” 所以它至少有一个价值，所以我可以在设置后使用它。但是，对于 DateTime，一旦设置了值，它就是不可变的。那么如何通过执行“from_instant.AddHours(-10);”来调整对象的值？例如，在它被声明的词法范围之外？

在我下面的例子中，每当我重置“from_instant”时，它都不会改变。我希望能够改变它。由于它是不可变的，您通常如何重置该值？

```
 DateTime from_instant = DateTime.Now;

    bool set_scan_start_instant_to_last_scan_instant = Convert.ToBoolean(GetConfig("set_scan_start_instant_to_last_scan_instant"));

    if (set_scan_start_instant_to_last_scan_instant)
    {
        from_instant = GetScanTimeFromFile(@".\last_scan_instant.txt");
        from_instant = DateTime.Now;
    }
    else
    {
        if (!string.IsNullOrEmpty(scan_interval_minutes))
        {
            from_instant = DateTime.Now.AddMinutes(Convert.ToInt32(scan_interval_minutes));
        }
        else if (!string.IsNullOrEmpty(scan_interval_hours))
        {
            from_instant = DateTime.Now.AddHours(Convert.ToInt32(scan_interval_hours));
        }
        else if (!string.IsNullOrEmpty(scan_interval_days))
        {
            from_instant = DateTime.Now.AddDays(Convert.ToInt32(scan_interval_days));
        }
    }

    DateTime to_instant = DateTime.Now;
    WriteScanTimeToFile(@".\last_scan_instant.txt", to_instant.ToString());

    Console.WriteLine("from_instant: " + from_instant.ToString());  
    Console.WriteLine("to_instant: " + to_instant.ToString()); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T16:45:48.363

问题是您一直在调用方法`DateTime`并忽略返回值。不要那样做。

改变这个：

```
from_instant.AddHours(Convert.ToInt32(scan_interval_hours)); 
```

到

```
from_instance = from_instant.AddHours(Convert.ToInt32(scan_interval_hours)); 
```

或者：

```
fromInstance += TimeSpan.FromHours(Convert.ToInt32(scan_interval_hours)); 
```

（ETC）。目前尚不清楚为什么你似乎认为你不能这样做。也不清楚你期望这段代码做什么：

```
from_instant = GetScanTimeFromFile(@".\last_scan_instant.txt");
from_instant = DateTime.Now; 
```

为什么要给一个值赋值`from_instant`，然后立即赋值另一个值？

（旁注：下划线在 C# 代码中非常通用。）

> 在我下面的例子中，每当我重置“from_instant”时，它都不会改变。

听起来你可能没有正确诊断事情。改变变量的值真的*会*改变它......

# php - 如何使用 PHP/MySQL 跟踪图像/横幅点击/查看

> ID：12463711
> 
> 赞同：0
> 
> 时间：2012-09-17T16:44:07.443
> 
> 标签：php, jquery, mysql

我想知道如何修改此现有代码以跟踪图像/横幅点击/查看？这甚至可以仅使用 PHP 还是您需要使用 jQuery (ajax)？

我的 MYSQL 表中有`bannerClicks`和`bannerViews`里面`tblbanners`。

这是生成图像/横幅的代码：

```
 $query91 = 'SELECT * FROM tblbanners WHERE tblbanners.bannerStatus!=\'1\'';
    $result91 = full_query ($query91);

    $bannerCounter = 1;
    while ($data91 = mysql_fetch_array ($result91))
    {

        $ID = $data91['ID'];
        $bannerName = $data91['bannerName'];
        $bannerLocation = $data91['bannerLocation'];
        $bannerUrl = $data91['bannerUrl'];      

        $bannerCode[$bannerCounter] = '<a id="' . $ID . '" class="banner-url" href="' . $bannerUrl . '" target="_blank"><img alt="' . $bannerName . '" src="banners/' . $bannerLocation . '" width="100px" height="200px" /></a>';
        $bannerCounter++;
    }

    $bannerAdTotals = $bannerCounter - 1;

    if($bannerAdTotals > 1)
    {
       mt_srand((double)microtime() * 1234567);
       $bannerPicked = mt_rand(1, $bannerAdTotals);
    }
    else
    {
       $bannerPicked = 1;
    }

    $bannerAd = $bannerCode[$bannerPicked];

    print $bannerAd; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T16:48:31.903

您可以使用 JavaScript，也可以拦截点击。要拦截点击，假设您将横幅 URL 存储在数据库中，您可以设置一个 PHP 脚本来拦截点击，跟踪点击，然后重定向。像这样简单的东西：

```
<?php

$sql = "SELECT `url` FROM `banners` WHERE `id` = :banner_id LIMIT 1";
$stmt = $db->prepare($sql);
$stmt->bindParam(':banner_id', $_GET['id'], PDO::PARAM_INT);
$stmt->execute();
$banner = $stmt->fetchObject();

$sql = "INSERT INTO `clicks` (`banner_id`) VALUES (1)";
$res = $db->exec($sql);

header('Location: ' . $banner->url); 
```

显然，您需要实例化您的数据库连接/对象，更改任何数据库表和列名，以及任何验证。

使用这种方法，当您显示横幅时，您可以在从数据库中选择横幅时执行此操作：

```
<a href="track_click.php?id=<?php echo $banner->id; ?>">
  <img src="<?php echo $banner->img; ?>" alt="<?php echo $banner->alt; ?>" />
</a> 
```

# android - 删除线程 Toast 消息

> ID：12463712
> 
> 赞同：1
> 
> 时间：2012-09-17T16:44:17.067
> 
> 标签：android, multithreading, toast

`Toast`当从一个选项卡切换到另一个选项卡时，我试图“删除”一个，因此假设暂停了焦点选项卡活动。基本上我可以将取消方法应用于单个`Toast`对象，或将其分配给 null。这行得通。

关键是当我使用 TextView 并线程化 Toast 时，即使我停止线程，Toast 仍然可见。我[从这一点](https://stackoverflow.com/a/8707203/461212)开始对 Toast 进行线程化，并试图根据[这一点](https://stackoverflow.com/a/95636/461212)停止它。

如何停止线程并从系统队列中删除 toast，或者是否有更好的解决方案来实现该目标（例如，单个活动中的多个 toast，从一个活动交换到另一个活动时停止显示 toast）？

* * *

打电话祝酒（这没关系）：

```
private void showSingleToast(String toastText, int color, long duration_ms) {

    if (mySingleToast instanceof Toast) {
        mySingleToast.setText(toastText);

        if (null != toastView)
            if (toastView instanceof TextView)
                toastView.setTextColor(color);

        ToastExpander.showFor(mySingleToast, duration_ms);
    }
} 
```

* * *

线程化 Toast.show()

```
public class ToastExpander extends Thread {

    public static final String TAG = "ToastExpander";

    static Thread t;// = null;

    // Must be volatile:
    static volatile boolean stopFlag = false;
    static long scan_freq = 300;

    public static void showFor(final Toast aToast, final long durationInMilliseconds) {

        aToast.setDuration(Toast.LENGTH_SHORT);

        t = new Thread() {
            long timeElapsed = 0l;

            public void run() {
                try {
                    while (timeElapsed <= durationInMilliseconds || !stopFlag) {
                        long start = System.currentTimeMillis();
                        aToast.show();
                        sleep(scan_freq);
                        timeElapsed += System.currentTimeMillis() - start;
                    }

                    // doesn't work: aToast.cancel();

                } catch (InterruptedException e) {
                    Log.e(TAG, e.toString());
                }
            } /* end of "run" */

        }; /* end of Thread */

        t.start();

    } /* end showFor */

    public static void cancel() {
    stopFlag = true;
    }
} 
```

* * *

试图“删除”吐司（不起作用）

```
private void hideSingleToast() {
    //hideTextView(toastView);
    toastView = null;
    ToastExpander.cancel();
    mySingleToast.cancel();
    //mySingleToast= null;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T17:32:38.263

Toast 显示和关闭是使用`handler`. 所以创建 toast 的线程应该一直运行到 toast 被解除，以便处理程序可以处理解除消息。所以在 UI 线程中创建 Toast。

确保`mySingleToast`在 Ui 线程中创建

编辑：由于您是在 Ui 线程中创建 toast，看起来，在您的情况下，太多的 atoast.show() 排队了。LENGTH_SHORT 通常显示 2 秒。在此期间，您添加了近 6-7 个节目。这就是为什么它继续显示。

你可以做的就是`aToast.cancel()`在之前添加`aToast.show`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T10:01:01.033

这是我的工作解决方案。

```
public static void show(final Toast aToast, final String usr_msg, final long durationInMilliseconds,
            final TextView myView, final int myColor) {

    // Instanciate Toast
    aToast.setText(usr_msg);
    aToast.setDuration(Toast.LENGTH_SHORT);

    // Instanciate TV
    myView.setTextColor(myColor);

    t = new Thread() {
        long timeElapsed = 0l;

        public void run() {

            try {

                // Make sure view exists

                // Show Toast in the view
                while (!stopFlag) {
                    long start = System.currentTimeMillis();
                    aToast.show();
                    sleep(scan_freq);
                    timeElapsed += System.currentTimeMillis() - start;

                    // DEBUG
                    if (debug)
                        Log.e(TAG, "|__ Thread running since : " + timeElapsed + " ms");

                    if (timeElapsed >= durationInMilliseconds) {
                        stopFlag = true;
                        if (debug)
                            Log.e(TAG, "|__ Time elapsed - Process stopped");
                    }

                }

            } catch (InterruptedException e) {
                Log.e(TAG, "Catch : " + e.toString());
            }
        } /* end of "run" */

    }; /* end of Thread */

    t.start();

    // reset stopFlag for next Toast
    stopFlag = false;

} /* end showFor */ 
```

# jquery - 使用最大宽度和最小宽度水平居中 JQuery 弹出窗口

> ID：12463717
> 
> 赞同：2
> 
> 时间：2012-09-17T16:44:28.143
> 
> 标签：jquery, html, css, popup, center

到目前为止，我所看到的是水平和垂直居中的弹出窗口具有设定的宽度，即：

```
width:200px; 
height:200px;
left:50%;
top: 50%;
position:fixed; 
```

但我正在尝试向弹出窗口添加最大和最小宽度，因为我有一些更宽，一些更短，但我想控制宽度不超过某个宽度。

```
.web_dialog
{
display: none;
position: fixed;
min-width: 360px;
min-height: 180px;
max-width: 880px;
max-height: 480px;
top: 50%;
left: 50%;
background-color: #ffffff;
padding:10px;
z-index: 102;
font-family: Verdana;
font-size: 10pt;
z-index:1001;
border:1px solid rgba(0, 0, 0, .333); 
} 
```

现在，当我这样做时，弹出窗口会增长但向右，因此它看起来像是不居中的。为我解决这个问题的任何帮助我将不胜感激。我刚刚删除了我所有的 ajax 工具包弹出窗口来替换这个简单的 jquery 弹出窗口，我希望它能够正常工作，因为我必须更改很多页面......：S

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T16:55:14.600

知道宽度和高度，只需添加`margin-left: -width/2`和`margin-top: -height/2`。但是由于您不知道该值，因此您首先需要捕获它，然后应用 CSS 规则：

```
$(function(){
  $dialog = $(".web_dialog");
  var w = $dialog.width();
  var h = $dialog.height();

  $dialog.css({'margin-left' : -w/2, 'margin-top' : -h/2});
});​ 
```

演示：http: [//jsfiddle.net/kenPN/](http://jsfiddle.net/kenPN/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T17:03:49.447

如果您不介意将 .web-dialogue 框包装在容器元素中，您可以通过以下方式使其工作：http: [//dabblet.com/gist/3738494](http://dabblet.com/gist/3738494)，使用 'display: inline-block', 'vertical -alignment”和“文本对齐：居中”。

阅读更多关于我如何使元素居中的信息：[http ://www.css-tricks.com/centering-in-the-unknown/](http://www.css-tricks.com/centering-in-the-unknown/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T17:06:27.410

试试这个[演示](http://jsbin.com/ejijoj/2)

**源代码** [http://jsbin.com/ejijoj/2/edit](http://jsbin.com/ejijoj/2/edit)

# c++ - Linux 相当于 DllMain

> ID：12463718
> 
> 赞同：28
> 
> 时间：2012-09-17T16:44:29.017
> 
> 标签：c++, shared-libraries, shared-objects

在 *nix .so 库中，在加载和卸载库时是否有系统调用的入口点？

更实用的一点是：如果 .so 是用 C++ 编写的，并且它包含带有构造函数和析构函数的全局对象，并且它是从没有构造/销毁概念的语言加载的，那么全局对象是否正确构造/销毁？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-17T17:08:23.903

您可以使用 `__attribute__((constructor))`和 `__attribute__((destructor))`在共享库的加载和卸载时执行代码。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-09-17T17:03:41.703

1.  不，没有等效于 DllMain。

2.  对于 JNI 库，例如在 Android 上，可能有一个特殊的条目 JNI_OnLoad 旨在填充 JNI 函数表。

3.  GCC 定义了特殊的属性**构造函数**来允许一些代码在共享库加载时运行。

4.  C++ 保证将执行全局和静态对象的构造函数，无论加载 .so 的代码是否知道这些类，或者是否具有构造概念。

    析构函数也是如此，但是当至少某些析构函数没有机会运行时，可能会出现不愉快的情况 - 例如，当存在 sigfault 并且异常被禁用时。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-17T16:47:53.527

使用的技术略有不同，但全局对象的构造/销毁或多或少内置于动态加载器中。（即使在 Windows 下，也不需要经过 `DllMain`. 无论如何，全局对象将被正确构造/破坏。）

# c# - 输出（C# 中的可空类型）

> ID：12463722
> 
> 赞同：1
> 
> 时间：2012-09-17T16:44:45.353
> 
> 标签：c#

在 c# 中（可空类型）

```
int a = 10;
int? b = 20;
int? c = null;

System.Console.WriteLine( a+c??b ); 
```

输出为：20

如果 (c??b +a) 则输出为 30

我不明白为什么..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T16:49:42.120

这只是一个优先事项。

这：

```
System.Console.WriteLine(a + c ?? b); 
```

相当于：

```
System.Console.WriteLine((a + c) ?? b); 
```

`a + c`为空（因为`c`为空），因此打印 20（的值`b`）

而这：

```
System.Console.WriteLine(c ?? b + a); 
```

相当于：

```
System.Console.WriteLine(c ?? (b + a)); 
```

`c`为空，因此计算 RHS ( `b + a`)，即 30。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T16:47:17.630

c??b + a 被评估为

```
 c?? (b+a) 
```

或稍微扩大

```
 c == null ? b + a : c 
```

或者如果我们用实际值代替

```
 null == null ? 20 + 10 : null) 
```

而 a +c??b 被评估为

```
 (a+c)??b 
```

或者如果我们稍微扩大

```
 (a + c) == null ? b : c+a 
```

或者如果我们用实际值代替

```
 (10 + null) == null ? 20 : 10 + null 
```

这又可以缩短为

```
 null == null ? 20 : null 
```

如果至少有一个操作数为 null，则可空类型的加法运算符始终返回 null

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T16:48:23.883

当你写：

```
 System.Console.WriteLine( a+c??b ); 
```

它将有效地评估为：

```
 int? temp = a + c;
        System.Console.WriteLine(temp ?? b); 
```

上面的“temp”为空，所以你得到`b`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-17T17:02:15.453

在这里检查：[ECMA-334：14.2.1 运算符优先级和关联性](http://en.csharp-online.net/ECMA-334%3a_14.2.1_Operator_precedence_and_associativity)

Null Coalescing 运算符 (??) 的优先顺序远低于 '+'。所以，“+”总是首先被评估。

在你的情况下，

```
int a = 10;
int? b = 20;
int? c = null; 
```

> a+c??b 计算为 (a+c)??b = (10+null)??20 = null??20 = 20
> 
> c??b+a 计算为 c??(b+a) = null??(10+20) = (10+20) = 30

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-17T16:45:27.117

因为 c 为空，所以答案是 b！那是你的双倍？做。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-17T16:49:01.747

`??`运算符用于检查空值。它返回有问题的值，或者如果它为空，则返回后备。

`c ?? b`表示“c，除非 c 为空，在这种情况下为 b”。

`c ?? b + a`检查 c，发现它为空，并改用 b (20)。然后它添加 (10) 得到 30.*

`a + c ?? b`似乎是应用`??`to`a + c`而不仅仅是 c，导致整个东西被 b (20) 替换。

*不确定在这种情况下的操作顺序，由于 c 为空，它*可能正在使用 (b + a)。*

# php - Cakephp 不会重置模型来保存

> ID：12463726
> 
> 赞同：0
> 
> 时间：2012-09-17T16:44:55.477
> 
> 标签：php, mysql, cakephp

我在使用 cakephp 时遇到问题。我有一个包含借方和贷方列的数据库表。下面，我尝试从第一个用户账户中扣款并保存记录。如果保存成功，它会更改相同的数组并将所有者 ID 更改为将要汇款的用户的 ID，并将借方记为贷方。问题是这个

不正确

```
user_id payment_to_id credit debit
1       2             0.00   3.00
1       2             3.00   0.00 
```

下面是它应该如何显示。由于 user_id 2 正在收款，payment_to_id 为空。但它不是这样工作的。它的工作方式与上面显示的一样，这是不正确的。我正在使用 create() 方法创建新记录，但它不起作用。我究竟做错了什么

```
user_id payment_to_id credit debit
1       2             0.00   3.00
2       null          3.00   0.00 
```

下面是代码

```
 function advanced_transfer($data = array()) {
        if(!empty($data)) {
            //I store the original credit in a variable called credit
            $credit = $data['PaymentTransaction']['credit'];
            //since I have credit stored, a zero it out so it wont save
            $data['PaymentTransaction']['credit'] = 0;
            //then I first set up a debit transaction
            $data['PaymentTransaction']['debit'] = $credit;
            //I am storing both the account owner and payment to id's
            $accountOwnerId = $data['PaymentTransaction']['user_id'];
            $paymentToId = $data['PaymentTransaction']['payment_to_id'];
            $this->create();//new record
            if($this->save($data, false)) {//save
                $data['PaymentTransaction']['user_id'] = $paymentToId;//I set the owner to the payment to user
                $data['PaymentTransaction']['payment_to_id'] = null;//I null out payment to cause the user is recieving
                $data['PaymentTransaction']['credit'] = $credit;//I set theirs to credit
                $data['PaymentTransaction']['debit'] = 0;//and null out debit cause we arent taking out
                $this->create();//create new record
                if(!$this->save($data, false)) {//save with no validation again
                    return false;
                }
            } else {
                return false;
            }
        } else {
            return false;
        }

        return true;
    } 
```

# forms - 画布作为 html5 表单的一部分

> ID：12463727
> 
> 赞同：1
> 
> 时间：2012-09-17T16:45:00.643
> 
> 标签：forms, html, canvas, drag-and-drop

我仍处于该项目的初步“弄清楚”阶段，所以如果这是基本的，我深表歉意。我正在为网站创建一个 html5 T 恤设计应用程序，将基本的拖放输入拖放到衬衫图形字段中，在衬衫字段内调整大小和移动，并最终将其与一些文本输入字段一起提交。然后，客户将为他们设计的衬衫付款并提交订单。我对 html5 比较陌生，到目前为止，我发现我会使用画布和拖放功能。我的问题是，由于我确实需要它与文本字段一起让客户输入一些信息和一些复选框字段等，并将其作为整个订单的一部分提交，因此可以将画布作为一部分包含在表单中吗的形式？再次，对不起，如果这是基本的，我会在我去的时候弄清楚。感谢您的输入。任何有用的教程等的线索都会很棒。我一直在寻找一段时间，但还没有找到我真正想要的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T18:50:17.517

不幸的是，它不能`<canvas>`用作输入表单，但您可以做的是绘制到画布中，然后在完成绘制操作后将其内容“导出”到`<image>`. 幸运的是，您可以使用图像作为一种形式。

将画布内容绘制到图像中的标准方法是使用`canvas.toDataURL("image/png");`方法。

翻译成代码，这将类似于以下代码段：

```
var canvasURL = canvas.toDataURL("image/png");
var img = document.getElementById("image").src = canvasURL; 
```

在 HTML 中，您将`<input>`使用 ID 定义表单`image`

```
<form>
     <input type="image" id="image" onsubmit="submit();">
</form> 
```

然而，有一个安全问题需要解决：绘制到画布上的任何图像都必须托管在与执行它的代码具有相同域的同一 Web 服务器上。如果不满足此条件，则会引发 SECURITY_ERR 异常。

如果您需要更强大的图像和画布操作库，我可以推荐这个库，它有助于使用画布和图像：[http ://www.nihilogic.dk/labs/canvas2image/](http://www.nihilogic.dk/labs/canvas2image/)

# objective-c - Objective C - 单元测试 dispatch_async 块？

> ID：12463733
> 
> 赞同：15
> 
> 时间：2012-09-17T16:45:23.057
> 
> 标签：objective-c, unit-testing, dispatch-async

我阅读了其他帖子，这些帖子提出了这个问题的解决方案。但是，他们的解决方案需要将 hacky 代码添加到我的应用程序中才能对其进行测试。对我来说，干净的代码比单元测试更重要。

我经常在我的应用程序中使用 dispatch_async，但我在对其进行单元测试时遇到了麻烦。问题是块在我的测试完成后执行，因为它在主队列上异步运行。有没有办法以某种方式等到块被执行然后继续测试。

**我不想仅仅因为单元测试而将完成传递给块**

```
- (viod)viewDidLoad
{
   [super viewDidLoad];

   // Test passes on this
   [self.serviceClient fetchDataForUserId:self.userId];

   // Test fails on this because it's asynchronous
   dispatch_async(dispatch_get_main_queue(), ^{
      [self.serviceClient fetchDataForUserId:self.userId];
   });
}

- (void)testShouldFetchUserDataUsingCorrectId
{
   static NSString *userId = @"sdfsdfsdfsdf";
   self.viewController.userId = userId;
   self.viewController.serviceClient = [[OCMockObject niceMockForClass:[ServiceClient class]];

   [[(OCMockObject *)self.viewController.serviceClient expect] fetchDataForUserId:userId];
   [self.viewController view]; 
   [(OCMockObject *)self.viewController.serviceClient verify];
} 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-09-17T17:35:24.433

简单地运行主循环，让它调用异步块：

```
- (void)testShouldFetchUserDataUsingCorrectId {
   static NSString *userId = @"sdfsdfsdfsdf";
   self.viewController.userId = userId;
   self.viewController.serviceClient = [[OCMockObject niceMockForClass:[ServiceClient class]];

   [[(OCMockObject *)self.viewController.serviceClient expect] fetchDataForUserId:userId];
   [self.viewController view];
   [[NSRunLoop mainRunLoop] runUntilDate:[NSDate dateWithTimeIntervalSinceNow:0.01]];
   [(OCMockObject *)self.viewController.serviceClient verify];
} 
```

我想这可能会在负载较重的系统上失败，或者如果您在主线程上有一堆其他东西（计时器或其他块）。如果是这种情况，您需要运行运行循环更长的时间（这会减慢您的测试用例），或者重复运行它直到满足模拟对象的期望或达到超时（这需要向模拟对象添加一个方法以查询其期望是否得到满足）。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-17T16:47:49.220

将执行包装到 a 中`dispatch_group`，然后等待组通过 完成执行所有分派的块`dispatch_group_wait()`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-10-27T07:39:33.537

`dispatch_async`使用类似的方法签名制作一个包装器，然后调用 real `dispatch_async`。依赖项将包装器注入到您的生产类中并使用它。

然后制作一个模拟包装器，它记录入队的块并有一个额外的方法来同步运行所有入队的块。如果正在执行的块依次排队更多块，则可能执行递归“块接收”。

在您的单元测试中，将模拟包装器注入到被测系统中。即使 SUT 认为它正在执行异步工作，您也可以让所有事情同步发生。

`dispatch_group`听起来也是一个很好的解决方案，但需要您的生产类“知道”在它排队的块的末尾对调度组执行 ping 操作。

# c++ - 十进制到十六进制之间的转换

> ID：12463734
> 
> 赞同：-1
> 
> 时间：2012-09-17T16:45:23.293
> 
> 标签：c++, hex

```
unsigned int hex_vale, some_decimal_constant, some_other_decimal_constant;

for(10,000 times){
if(hex_value == some_decimal_constant){
        call_some_function();
    }
else if(hex_value == some_other_decimal_constant){
        call_some_other_function();     
    }
} 
```

在上面执行 if 循环的函数中，我必须将十六进制转换为十进制，反之亦然。我不想将十六进制转换为十进制 10000 次。你能帮我将十进制转换为十六进制吗？十六进制数应该存储在无符号整数中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T16:46:48.503

您不必执行任何转换。这些数字以二进制形式存储。在这种情况下，十六进制和十进制只是这些二进制数的不同文字或字符表示。

例子：

```
#include <iostream>

int main()
{
  std::cout << std::boolalpha;
  const int a = 32;
  const int b = 0x20;
  std::cout << (a==b) << "\n"; // prints "true"

} 
```

# xcode - iOS 我收到关于 UITableViewDataSource 实现不完整的警告

> ID：12463739
> 
> 赞同：1
> 
> 时间：2012-09-17T16:45:46.257
> 
> 标签：xcode, uitableview, warnings

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
#warning Potentially incomplete method implementation.
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
#warning Incomplete method implementation.
    // Return the number of rows in the section.
    return [(NSSet *)[team valueForKey:@"players"] count];
} 
```

我如何解决它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T17:15:16.570

您正在返回值​​，只需删除以下行：

```
#warning Potentially incomplete method implementation.

#warning Incomplete method implementation. 
```

# wpf - WPF 可以为空 和类绑定

> ID：12463744
> 
> 赞同：0
> 
> 时间：2012-09-17T16:45:57.740
> 
> 标签：wpf, data-binding, binding, wpf-4.0

我有一个**int？**和我的模型中的**字符串**属性，并且无法更改（例如，我无法将此属性拆分为两个单独的属性对）。

我想将这些属性绑定到 Checkbox 和 TextBox。因此，如果 CheckBox 未选中，则值应为**null**，如果 CheckBox 已选中，则值应为输入到 TextBox 中的任何内容。

用 WPF 实现这一点的正确方法是什么？我使用.Net Framework 4.5。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T17:45:49.283

在这种情况下，您可能希望将 ViewModel 包装在 Model 类周围，而不是将其直接绑定到视图。

在这种情况下，您将拥有类似“MyDataViewModel”的东西，它会公开一个字符串属性和一个布尔属性。当绑定更改这些属性时，它将使用每个字段的适当值更新基础模型类。

直接绑定到您的模型类通常仅在您的模型类支持丰富的绑定功能（例如数据注释）以及您使用数据服务类来处理保存和加载这些对象时完成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T17:50:11.640

对不起，我一开始完全错误地阅读了这个问题。

假设您有这样的模型

```
class FakeModel
{
    public int? IntegerValue { get; set; }
    public string StringValue { get; set; }
} 
```

那么解决这个问题的最好方法是实现一个ViewModel，例如

```
 class FakeViewModel : INotifyPropertyChanged
    {
    private  FakeModel _fakeModel;

    public FakeViewModel(FakeModel  model)
    {
        _fakeModel = model;
    }
    public bool IntChecked
    {
        get { return _fakeModel.IntegerValue.HasValue; }
        set
        {
            if (value)
                IntegerValue = -1; //for example
            else
                IntegerValue = null; //to reset
            OnPropertyChanged("IntChecked");
        }
    }

    public int IntegerValue
    {
        get { return _fakeModel.IntegerValue.Value; }
        set { _fakeModel.IntegerValue.Value = value;
        OnPropertyChanged("IntegerValue");
        }
    }

    public bool StringChecked
    {
        get { return _fakeModel.StringValue.HasValue; }
        set
        {
            if (value)
                StringValue = -1; //for example
            else
                StringValue = null; //to reset
            OnPropertyChanged("StringChecked");
        }
    }

    public int StringValue
    {
        get { return _fakeModel.StringValue.Value; }
        set
        {
            _fakeModel.StringValue.Value = value;
            OnPropertyChanged("StringValue");
        }
    }

    protected void OnPropertyChanged(string callerName)
    {
        var temp = PropertyChanged;
        if (temp != null)
            temp(this, new PropertyChangedEventArgs(callerName));
    }

    public event PropertyChangedEventHandler PropertyChanged;
} 
```

这包括 INotifyPropertyChanged 的​​基本实现，您可以从基类或 mvvm 库（例如 Caliburn.Micro MMVMLite 或 ReactiveUI）继承。

有关视图模型或 MVVM 的更多信息，请查看[MDSN 的 MVVM 上的 Josh Smith](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)

# c - Z3使用目标和战术

> ID：12463745
> 
> 赞同：2
> 
> 时间：2012-09-17T16:46:03.680
> 
> 标签：c, z3

我正在使用带有 C-API 的 Z3。我试图了解如何理解如何在 C-API 中使用策略和目标。我查看了 Z3 的示例，但找不到适合我的示例。

我的 C-API 伪代码如下 -

```
contextId = mk_context();
solverId = Z3_mk_solver(contextId);
Z3_solver_inc_ref(contextId, solverId);
... 
then some assertions like x > 0, y > 0 and so on..
...
// now comes the final goal
mygoal = Z3_mk_less_than(contextId, ...) //  x < 50
Z3_solver_assert (contextId, solverId, mygoal)
...
// finally   check
Z3_solver_check(contextId, solverId)
Z3_reset_memory();
Z3_del_context(contextId);
Z3_solver_dec_ref(contextId, solverId); 
```

现在我想对我的目标应用一些策略。但是，我无法了解 C-API 应该如何遵循。我检查了文档，但找不到这样做的示例。

我尝试的是使用`Z3_goal_assert ();`API。但它以某种方式不起作用。有人可以给我一个 C-API 的简单例子吗？

更新：我尝试了以下 C 代码，但它不起作用。在函数调用`Z3_tactic_apply()`中，求解器会抛出这样的错误 -

```
pure virtual method called
terminate called without an active exception 
```

一段代码：

```
goalId = Z3_mk_goal();      
Z3_goal_inc_ref(context, goalId);

assertionVector = Z3_solver_get_assertions (context, solver);
int vectorSize = Z3_ast_vector_size(assertionVector);

for(int i=0;i<vectorSize;i++)       
    Z3_goal_assert(context, goalId, Z3_ast_vector_get(context, assertionVector, i));

Z3_goal_assert(context, goalId, Z3_mk_eq(context, totalProcDecl, Z3_mk_int(context, numProcessors, int_sort)));
Z3_goal_assert(context, goalId, Z3_mk_eq(contextlatencyDecl, Z3_mk_int(context, latencyConstraint, int_sort)));

// This is what I am trying to apply
// (check-sat-using (then (! simplify :arith-lhs true) solve-eqs lia2pb pb2bv bit-blast sat))

tactic0 = Z3_mk_tactic (context, "simplify");
Z3_tactic_inc_ref (context,tactic0);

tactic1 = Z3_mk_tactic (context, "solve-eqs");
Z3_tactic_inc_ref (context, tactic1);

tactic2 = Z3_mk_tactic (context, "lia2pb");
Z3_tactic_inc_ref (context, tactic2);

tactic3 = Z3_mk_tactic (context, "pb2bv");
Z3_tactic_inc_ref (context, tactic3);

tactic4 = Z3_mk_tactic (context, "bit-blast");
Z3_tactic_inc_ref (context, tactic4);

tactic5 = Z3_mk_tactic (context, "sat");
Z3_tactic_inc_ref (context, tactic5);

temp = Z3_tactic_and_then (context, tactic0, tactic1);
temp = Z3_tactic_and_then (context, temp, tactic2);
temp = Z3_tactic_and_then (context, temp, tactic3);
temp = Z3_tactic_and_then (context, temp, tactic4);
temp = Z3_tactic_and_then (context, temp, tactic5);

result = Z3_tactic_apply (context, temp, goalId);
printf("Result : %s\n", Z3_apply_result_to_string (context, result));

// Finished Solving.
Z3_goal_dec_ref (context, goalId);
Z3_tactic_dec_ref (context, tactic0);
Z3_tactic_dec_ref (context, tactic1);
Z3_tactic_dec_ref (context, tactic2);
Z3_tactic_dec_ref (context, tactic3);
Z3_tactic_dec_ref (context, tactic4);
Z3_tactic_dec_ref (context, tactic5); 
```

我还尝试了另一种选项来添加参数以简化策略。

```
tactic0_without_param = Z3_mk_tactic (context, "simplify");
Z3_tactic_inc_ref (context,tactic0_without_param);

paramsId = Z3_mk_params(context);
Z3_params_inc_ref(context, paramsId);
Z3_params_set_bool (context, p, paramsId, Z3_mk_string_symbol(context, ":arith-lhs"), true);
tactic0 = Z3_tactic_using_params (context, tactic0, paramsId); 
```

但再次不起作用。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T17:30:39.247

Z3 4.x 带有 C++ 头文件，使 Z3 C API 更易于使用（文件`include/z3++.h`）。它还有一个基于 C++（文件`examples/c++/example.cpp`）的示例。该文件包含许多使用策略对象的示例。

话虽如此，策略应该应用于目标。为方便起见，我们还提供了一个 API，可以从 tactic 创建求解器`Z3_mk_solver_from_tactic`。此 API 返回的求解器对象将尝试使用给定的策略解决可满足性查询。

# c# - 如何使用与部分字符串匹配的实体搜索数据库？

> ID：12463747
> 
> 赞同：2
> 
> 时间：2012-09-17T16:46:06.070
> 
> 标签：c#, entity-framework

我知道`Where()`在我的数据库中搜索任何匹配的内容并返回给我一个列表，但是它匹配整个单词。您如何在数据库中搜索并找到不匹配整个单词的所有内容？

例如，用户想要搜索：*funny*

那么我的搜索功能将返回任何包含“有趣”一词的内容，例如

*   有趣的女孩
*   有趣的狗
*   有趣的人们
*   有趣的自行车；ETC...

我实现了`Where()`，但它没有执行上述功能？有任何修复吗？或任何替代品？

编辑：

上下文代码：

> ```
>  public static List<PhotoAlbumDto> searchAlbumsFromDA(string inputName)
>    {
>        EzPrintsEntities db = new EzPrintsEntities();
>        List<PhotoAlbum> albums = new List<PhotoAlbum>();
>        albums = db.PhotoAlbums.Where(b => b.NAME == inputName).ToList();
>    } 
> ```

这只会返回与“funny”完全匹配的东西......所以换句话说，我无法搜索所有只有“funny”这个词的东西，比如funnycats......只会返回“funny” ，仅此而已。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T16:58:55.783

尝试类似的东西

```
albums = db.PhotoAlbums.Where(b => b.NAME.Contains("funny")).ToList(); 
```

# c# - 修改 GridView 后 BulkEditGridView DirtyRows 计数为 0

> ID：12463749
> 
> 赞同：0
> 
> 时间：2012-09-17T16:46:17.783
> 
> 标签：c#, asp.net, gridview

我正在使用此处找到的 BulkEditGridView 控件（继承 GridView）：http: [//blogs.msdn.com/b/mattdotson/archive/2005/11/09/real-world-gridview-bulk-editing.aspx](http://blogs.msdn.com/b/mattdotson/archive/2005/11/09/real-world-gridview-bulk-editing.aspx)

现在我有一个保存按钮，当它被击中时应该只列出所有修改过的项目，但我得到的是“没有更新”。即使我更改了 DataGrid 中的文本。为什么 DirtyRows 没有正确填充？我在更新数据库之前对此进行了测试。

我的 aspx 页面如下所示：

```
<rwg:BulkEditGridView ID="EditableGrid" AutoGenerateColumns="False" OnRowUpdating="EditableGrid_RowUpdating" OnRowEditing="EditRecord" SaveButtonID="SaveButton" runat="server">
            <Columns>
                <asp:BoundField HeaderText="Question" DataField="Question" />
                <asp:BoundField HeaderText="A" DataField="a" />
                <asp:BoundField HeaderText="B" DataField="b" />
                <asp:BoundField HeaderText="C" DataField="c" />
                <asp:BoundField HeaderText="D" DataField="d" />
                <asp:BoundField HeaderText="E" DataField="e" />
                <asp:BoundField HeaderText="F" DataField="f" />
                <asp:BoundField HeaderText="Correct Answer" DataField="CorrectAns" />
                <asp:CheckBoxField HeaderText="Shuffle Answers" DataField="ShuffleAnswers" />
                <asp:BoundField HeaderText="Course Objective" DataField="CourseObjective" />                    
            </Columns>
        </rwg:BulkEditGridView> 
```

我背后的代码如下所示：

```
public partial class editExam : System.Web.UI.Page
{
protected void Page_Load(object sender, EventArgs e)
{
    string courseCode = "";
    courseCode = Request.QueryString["code"];

    if (courseCode.Length > 0)
    {
        //Show all of the course questions.
        Connection conn = new Connection();
        SqlParameter p = new SqlParameter("@CourseCode", SqlDbType.VarChar, 10);
        p.Value = Connection.validateString(courseCode);
        conn.close();
        //Gets the exam to display from the database
        DataTable dt = conn.query("getExam", p);
        if (dt.Rows.Count == 0)
        {
            //Display an error message
            displayError();
        }
        else
        {
            //Show all courses
            buildPage(dt);
        }
    }
    else
    {
        //Display an error message
        displayError();
    }
}

private void buildPage(DataTable dt)
{
    EditableGrid.DataSource = dt;
    EditableGrid.DataBind();
}
protected void SaveButton_Click(object sender, EventArgs e)
{
    if (EditableGrid.DirtyRows.Count == 0)
    {
        pageContent.InnerHtml = "No updates have been made.";
    }
}

protected void EditableGrid_RowUpdating(object sender, GridViewUpdateEventArgs e)
{
    StringBuilder rowIndexes = new StringBuilder();
    foreach (GridViewRow row in EditableGrid.DirtyRows)
    {
        rowIndexes.Append((row.RowIndex + 1) + ", ");
    }

    pageContent.InnerHtml = "updates made to: " + rowIndexes.ToString();
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T17:54:42.817

我忘了创建一个 EditRecord 方法。那应该看起来像这样：

```
protected void EditRecord(object sender, GridViewEditEventArgs e)
{
    EditableGrid.EditIndex = e.NewEditIndex;
    buildPage();
} 
```

我还关注了这篇文章：[http](http://www.dotnetfunda.com/articles/article29.aspx) ://www.dotnetfunda.com/articles/article29.aspx ，它解释了如何正确使用 GridView 控件。

这也很有帮助：对于 RowUpdating 方法：[http ://dotnetdiscussion.wordpress.com/2008/04/06/aspnet-how-to-use-bulkeditgridview-to-save-hours-in-database-editing/](http://dotnetdiscussion.wordpress.com/2008/04/06/aspnet-how-to-use-bulkeditgridview-to-save-hours-in-database-editing/)

# c++ - C++ 在文本文件中搜索特定字符串并返回该字符串所在的行号

> ID：12463750
> 
> 赞同：7
> 
> 时间：2012-09-17T16:46:28.987
> 
> 标签：c++, search, return

c++ 中是否有一个特定的函数可以返回我想要查找的特定字符串的行号？

```
ifstream fileInput;
int offset;
string line;
char* search = "a"; // test variable to search in file
// open file to search
fileInput.open(cfilename.c_str());
if(fileInput.is_open()) {
    while(!fileInput.eof()) {
        getline(fileInput, line);
        if ((offset = line.find(search, 0)) != string::npos) {
            cout << "found: " << search << endl;
        }
    }
    fileInput.close();
}
else cout << "Unable to open file."; 
```

我想在以下位置添加一些代码：

```
 cout << "found: " << search << endl; 
```

这将返回行号，后跟搜索的字符串。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-17T16:49:19.423

只需使用计数器变量来跟踪当前行号。每次你打电话给`getline`你......读一行......所以在那之后增加变量。

```
unsigned int curLine = 0;
while(getline(fileInput, line)) { // I changed this, see below
    curLine++;
    if (line.find(search, 0) != string::npos) {
        cout << "found: " << search << "line: " << curLine << endl;
    }
} 
```

还...

`while(!fileInput.eof())`

应该

`while(getline(fileInput, line))`

如果在读取时发生错误`eof`将不会设置，因此您有一个无限循环。 `std::getline`返回一个流（您传递给它的流），它可以隐式转换为 a `bool`，它告诉您是否可以继续阅读，而不仅仅是在文件末尾时。

如果`eof`设置了，你仍然会退出循环，但是如果设置了，你也将退出，例如，`bad`有人在你阅读文件时删除了文件，等等。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-06-17T23:26:32.340

已接受答案的修改版本。[对答案的评论作为建议会更好，但我还不能发表评论。]以下代码未经测试，但它应该可以工作

```
for(unsigned int curLine = 0; getline(fileInput, line); curLine++) {
    if (line.find(search) != string::npos) {
        cout << "found: " << search << "line: " << curLine << endl;
    }
} 
```

for 循环使它稍微小一些（但可能更难阅读）。并且[find](http://www.cplusplus.com/reference/string/string/find/)中的 0应该是不必要的，因为 find 默认搜索整个字符串

# ruby-on-rails - 是否可以从活动记录父级的错误中访问子对象？

> ID：12463751
> 
> 赞同：5
> 
> 时间：2012-09-17T16:46:34.930
> 
> 标签：ruby-on-rails, ruby, activerecord

鉴于以下表示的关系：

```
class Parent < ActiveRecord::Base
  has_many :children, :dependent => :destroy

  accepts_nested_attributes_for :child
end

class Child < ActiveRecord::Base
  belongs_to :parent

  validates :name, :presence => true
end 
```

假设我们有一个包含多个子对象的父对象，其中一个或多个子对象有导致 parent.valid 的错误？返回假。

```
parent = Parent.new
parent.build_child(:name => "steve")
parent.build_child()
parent.valid? 
```

有没有办法在查看 parent.errors 对象时访问导致错误的子元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T17:18:06.253

是的，你可以做到。添加到您的`Parent`模型

```
validates_associated :children 
```

之后，您可以`errors`在每个父母的孩子上调用方法来查找验证错误。像这样查看子错误消息

```
parent = Parent.new
parent.build_child
parent.valid?
parent.children.first.errors.messages 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T14:21:10.243

正如约翰在评论中所建议的那样，我最终忽略了为孩子添加到父级的错误并遍历孩子并手动添加他们的错误。有几个 has_many :through 关系使问题变得复杂，但约翰的建议是我最终使用的精髓。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-10T14:45:48.313

添加我的解决方案，希望对您有所帮助：

```
class Parent < AR
  has_many :children, inverse_of: :parent
  validates_associated :children, message: proc { |_p, meta| children_message(meta) }

  def self.children_message(meta)
    meta[:value][0].errors.full_messages[0]
  end
  private_class_method :children_message
end

class Child < AR
  belongs_to :parent, inverse_of: :children
  validates :name, presence: true
end 
```

# magento - Magento 颜色属性

> ID：12463758
> 
> 赞同：0
> 
> 时间：2012-09-17T16:47:02.137
> 
> 标签：magento, colors, configurable

颜色属性说明

属性理解/解释

我已经阅读了很多关于属性的内容，但我对它们如何与我的特定设置一起工作有点了解。

我有一个产品数据库，其中包含 10 种可配置产品，每种产品有 3 种尺寸（S、M 和 L），每种产品有 3 种颜色。问题是它们中的一些具有相同的颜色，而另一些则不同。例如：

```
Product 1 (Red, Blue, Green)
Product 2 (Red, Brown, Yellow) 
```

我总共有 90 个 sku。和大约 18 种颜色。在设置属性时，我希望颜色成为前端的可过滤属性，并且它是用于购买可配置产品的变量。

我试图更好地理解属性是如何工作的。我是否应该为颜色创建所有 18 个选项，然后 Magento 将仅显示基于附加的简单产品的可用选项？

这里的任何帮助或见解将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T15:44:29.067

1) 您需要为颜色属性创建所有可能的选项。

2) 然后您将创建一个可配置的产品，并保存它。

3) 编辑可配置产品，点击关联产品。然后，您可以从这里为您拥有的每个产品变体快速创建子产品。

然后，Magento 将仅在前端显示这些变化，并忽略任何没有变化或没有库存的选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T11:23:14.830

产品属性是全局的。例如，这意味着颜色会出现在您的所有产品上。因此，您必须定义所有颜色（18 种颜色）并为每种产品选择正确的颜色。

# javascript - 同时使用 panTo 和 panBy

> ID：12463759
> 
> 赞同：3
> 
> 时间：2012-09-17T16:47:08.860
> 
> 标签：javascript, leaflet

我想创建一个带有一些图钉的地图（使用传单）。当用户单击其中一个时，地图应该移动，直到图钉位于水平中心的地图底部。

我的地图高度为 400 像素，所以我使用以下代码：

```
map.panTo(new L.LatLng(lat, lng));
map.panBy(new L.Point(0, -200)); 
```

它的工作原理就像一个魅力 - 只有 IE 有一些问题：它开始向地图中心移动 ( `panTo`)，但一旦它统计到也向底部移动 ( `panBy`)，它就会停止向地图中心移动中心。

我怎样才能把这两个动作结合起来？我不能等到`panTo`地图居中，因为如果图钉位于地图的下半部分，这会导致地图上下跳跃。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T16:48:59.670

从传单文档中，您可以使用以下方法将纬度/经度点作为像素：

`latLngToPoint( <LatLng> latlng, <Number> zoom )`

修改它，然后将其转换回纬度/经度：

`pointToLatLng( <Point> point, <Number> zoom )`

来源： http: [//leaflet.cloudmade.com/reference.html#icrs](http://leaflet.cloudmade.com/reference.html#icrs)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-20T12:26:57.780

您还可以使用这两个函数，您可以直接在地图对象上调用它们：

```
// get your coordinates from marker or map.getCenter() or something else
let pixelPosition = map.latLngToLayerPoint(coord);
// edit pixel coordinates in pixelPosition object
let latLng = map.layerPointToLatLng(point);
map.setView(latLng); 
```

# ruby-on-rails - 将 Rails 应用程序从 3.0.3 升级到 3.0.XX（可能是 3.0.17）的最安全方法？陷阱？

> ID：12463761
> 
> 赞同：0
> 
> 时间：2012-09-17T16:47:09.627
> 
> 标签：ruby-on-rails

我们正在开发一个稍旧的 Rails 应用程序 (3.0.3)。目前我们没有时间将其升级到 3.1 或 3.2。

但是 Rails 3.0.3 -> Rails 3.0.17 更新安全且自动吗？我假设使用次要版本，我们的应用程序中没有代码更改将被强加？

是否有任何理由逐步进行，例如从 3.0 到 3.2 我已经阅读过首先到 3.1 是一个好主意。如果是这样，哪些步骤？（例如 3.0.3 -> 3.0.5 -> 3.0.10 -> 3.0.17）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T01:30:32.317

或者，更好的是，使用 3.03 创建一个 rails 项目，然后升级到 3.17（或其他）并在您的机器上检查 git diff 或 gitk。它将准确地向您显示核心文件发生了哪些变化。这将使升级更容易。

另外，帮自己一个忙，尝试在 git 分支中升级，以便在需要时轻松恢复。

# ruby-on-rails-3 - 无法重定向到零！- 基本的MVC操作

> ID：12463767
> 
> 赞同：0
> 
> 时间：2012-09-17T16:47:24.133
> 
> 标签：ruby-on-rails-3, model-view-controller

（几天来我很难从数据库中选择一个随机项目并能够进一步传递它。）

这是基本操作，我尝试了几种方法，给我带来了同样的问题，params {"id" = "random"} <- 控制器方法的名称

控制器：

```
def random      # method works  checked it in the console. Returns a valid obj.
  @task = Task.find(rand(Task.first.id..Task.last.id))
  render "random"
end 
```

random.html.erb `<%= @task %>` # 我希望它让它工作，如果我手动通过让#say`../random/1`让我们说作为一个例子它工作它向我显示对象的内存#location。

错误日志：

```
 ActionController::ActionControllerError in TasksController#show
Cannot redirect to nil!

Rails.root: /home/bogdan/ex/bored
Application Trace | Framework Trace | Full Trace

actionpack (3.2.3) lib/action_controller/metal/redirecting.rb:60:in
`redirect_to'
actionpack (3.2.3) lib/action_controller/metal/flash.rb:25:in
`redirect_to'
actionpack (3.2.3) lib/action_controller/metal/instrumentation.rb:60:in
`block in redirect_to'
activesupport (3.2.3) lib/active_support/notifications.rb:123:in `block
in instrument'
activesupport (3.2.3)
lib/active_support/notifications/instrumenter.rb:20:in `instrument'
activesupport (3.2.3) lib/active_support/notifications.rb:123:in
`instrument'
actionpack (3.2.3) lib/action_controller/metal/instrumentation.rb:59:in
`redirect_to'
actionpack (3.2.3) lib/action_controller/metal/implicit_render.rb:4:in
`send_action'
actionpack (3.2.3) lib/abstract_controller/base.rb:167:in
`process_action'
.
.
.
(only the top of the stack)

Request

Parameters:

{"id"=>"random"} 
```

**编辑**：无聊::Application.routes.draw 做

根.rb：

```
 to => 'tasks#main'   
  resources :tasks
  match ':controller(/:action(/:id))(.:format)' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T17:00:34.440

如果您的路线很安静并且您对资源有 GET，则它需要一个 ID。如果您对集合执行 GET 操作，则不需要。我会确保随机看起来像

```
resources :tasks do
  get 'random', :on => :collection
end 
```

# c++ - 使用makefile将时间戳插入可执行文件名

> ID：12463770
> 
> 赞同：4
> 
> 时间：2012-09-17T16:47:33.183
> 
> 标签：c++, makefile

我有一个简单的 make 文件，我想将当前日期和时间插入到它创建的可执行文件中。

类似于：`NOW=$(date +"%c")`附加到 exe 名称。最好的方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-17T17:42:54.773

我想你已经有一个`Makefile`创建应用程序。因此，您可以添加以下内容：

```
# Use ':=' instead of '=' to avoid multiple evaluation of NOW.
# Substitute problematic characters with underscore using tr,
#   make doesn't like spaces and ':' in filenames.
NOW := $(shell date +"%c" | tr ' :' '__')

# Main target - your app + "date"
all: foo_$(NOW)

# Normal taget for your app which already have.
foo: foo.cpp

# Copy "normal" app to app_DATE
# You'll rater want copy then move, otherwise make will have
#   to link your app again during each execution (unless that's
#   exactly what you want).
foo_$(NOW): foo
    cp $^ $@ 
```

注意替换`':'`为`'_'`。如此处所示[，](https://stackoverflow.com/a/2052576/703503)如果日期包含冒号，则 make 可能无法解析 Makefile。

我目前无法访问 Mac OS X，因此仅在 Ubuntu 上进行了测试，但我曾经在 Mac 机器上工作过一次，我没有注意到`make`. 所以它也应该对你有用。

**- - 编辑 - -**

正如 Beta 正确评论的那样，上述方法在每次`make`调用时都会创建具有当前日期的新副本。有时可能需要它，所以我会保留它，并针对不需要的情况提出以下替代方案：

```
# Same as above...
NOW := $(shell date +"%c" | tr ' :' '__')

# Default target
all: foo  # <-- not foo_$(NOW) anymore, foo_$(NOW) target is removed altogether

OBJ := foo.o bar.o  # other ...

# Normal taget for your app which already have, but...
foo: $(OBJ)
    $(CXX) $(LDFLAGS) $^ -o $@
    cp $@ $@_$(NOW)  # <-- additional copy at the end (read on below) 
```

为什么`foo_$(NOW)`目标不见了？因为*如果*您修改了应用程序本身，您*只想*创建应用程序的带日期戳的副本。这意味着您无法创建目标，因为那样*总是*会创建副本（如上述场景）。*`make`*

 **然而，这意味着它`make`不知道副本的存在。该副本不存在于`make`启动时创建的依赖关系图中。因此，该副本不能用作任何其他目标的先决条件。这不是一个缺点，而是我们不知道是否要创建副本这一事实的直接结果。（如果有人有办法在不运行辅助 make run 的情况下克服这个问题，请放纵我 :)）。**

# javascript - 如何在java脚本函数中传递url

> ID：12463772
> 
> 赞同：0
> 
> 时间：2012-09-17T16:47:40.110
> 
> 标签：javascript, jquery, model-view-controller, asp.net-mvc-4

java脚本功能在我的本地系统上运行良好，但在服务器上却不行。我实际的 jquery 代码是

```
$('.jeditableSalePrice').editable('/Product/DTUpdateProduct', {
            id: 'SalePrice_ID',
            name: 'value',
            indicator: 'Updating...',
            tooltip: 'Click to Change'
        }); 
```

现在我尝试两种技术。两者都在我的本地但不在服务器 1 上工作：使用 @Url.Action("DTUpdateProduct", "Product")' 2：使用 @Url.Content("/Product/DTUpdateProduct")

```
 //$('.jeditableSalePrice').editable('@Url.Content("/Product/DTUpdateProduct")', {
  $('.jeditablePartNumber').editable('@Url.Action("DTUpdateProduct", "Product")', {
            id: 'SalePrice_ID',
            name: 'value',
            indicator: 'Updating...',
            tooltip: 'Click to Change'
        }); 
```

在服务器上解决此问题的任何解决方案？

# java - jsoup连接到链接

> ID：12463779
> 
> 赞同：0
> 
> 时间：2012-09-17T16:48:09.533
> 
> 标签：java, jsp, jsoup

我想使用 Jsoup 解析链接。它工作正常，但是当我作为参数链接传递时，看起来像“http://translate.google.com”（包含超过 1 个点）会生成错误。

```
public class HtmlProcessor {

    public String[] getLinks(String url) throws IOException {

        Vector <String> hrefs = new Vector <String> ();

        try {

            Document doc = Jsoup.connect( url ).get();
            Elements links = doc.getElementsByTag("a");

            for (Element link : links) {

                hrefs.add(  link.attr( "href" ) );
            }
        } catch (ConnectException ex) {
            System.out.println(ex.getMessage());
        }

        return hrefs.toArray( new String [hrefs.size()] );      
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T20:35:52.447

我尝试进入[http://translate.google.com](http://translate.google.com)并出现用户代理错误。尝试这个; 它为我解决了这个问题：

```
Document doc = Jsoup
        .connect( url )
        .userAgent("Mozilla/5.0 (Windows NT 6.1; WOW64; rv:17.0) Gecko/17.0 Firefox/17.0")
        .get(); 
```

# iphone - 为什么添加单个实体后我的核心数据需要很长时间才能保存？

> ID：12463783
> 
> 赞同：1
> 
> 时间：2012-09-17T16:48:15.613
> 
> 标签：iphone, objective-c, ios, core-data, nsmanagedobject

我的核心数据代码耗时太长，所以我注释掉了大部分行，将其简化为：

```
 NSString *storePath = [[self applicationDocumentsDirectory] stringByAppendingPathComponent:@"CoreDataStore.sqlite"];
    NSString *backupSourceStorePath = [[self applicationDocumentsDirectory]
                                       stringByAppendingPathComponent:@"CoreDataStoreBackup.sqlite"];

    NSManagedObjectContext *oldContext = [self version1ManagedObjectContext];
    TICDSSynchronizedManagedObjectContext *newContext = [self managedObjectContext];
    NSFetchRequest *oldFetchRequest = [[NSFetchRequest alloc] init];
    NSEntityDescription *oldEntryEntity = [NSEntityDescription entityForName:@"Entry"
                                                      inManagedObjectContext:oldContext];

    [oldFetchRequest setEntity:oldEntryEntity];

    int numberOfEntries = [oldContext countForFetchRequest:oldFetchRequest error:nil];

    int batchSize = 10;
    [oldFetchRequest setFetchLimit:batchSize];
    int offset = 0;

    while (numberOfEntries - offset > 0) {

        [oldFetchRequest setFetchOffset:offset];
        NSError *error;
        NSArray *entries = [oldContext executeFetchRequest:oldFetchRequest error:&error];

        int i = 0;
        for (NSManagedObject *entry in entries) {

            Entry *newEntry = [NSEntityDescription insertNewObjectForEntityForName:@"Entry"
                                                            inManagedObjectContext:newContext];
            i++;
            NSLog(@"i: %i", i);
        }

        [newContext save:&error];

        NSLog(@"Save error: %@", error);

        offset = offset + batchSize;

    } 
```

如果我那里没有`insertNewObjectForEntityForName`线路，那么保存根本不需要很长时间。但是有了这条线，保存大约需要一分钟。在此之前，数据存储中没有其他内容。为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T13:12:59.837

我同意将它放在循环之外不仅仅是为了执行目的（速度），而是因为如果循环中出现问题，你想要一半或你的数据保存，然后另一半不？大多数时候，用户期望全部或全部都没有。否则你作为代码她来确定哪些条目正确保存，哪些没有正确保存。

所以 1.. 用于执行时间和 2\. 用于可管理性目的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T20:22:07.677

放

```
[newContext save:&error]; 
```

在 for 循环之外。不需要每次都运行。

它会解决你的问题。

# c# - (Texture2D) t1 = t2; 它会创建参考还是副本？

> ID：12463786
> 
> 赞同：5
> 
> 时间：2012-09-17T16:48:36.583
> 
> 标签：c#, reference, xna, texture2d

快速提问。（我无法在任何地方找到有关此的文档）

当你这样做时：

```
Texture2D t1;
t1 = content.Load<Texture2D>("some texture");

Texture2D t2;
t2 = t1; 
```

它是创建参考还是实际复制纹理？

我想知道它，以便在实施相关内容时将其考虑在内。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T16:50:32.513

Texture2D 是一个类。因此，赋值将创建引用的副本 - t1 和 t2 将具有引用相等性，即为`Object.ReferenceEquals(t1, t2)`真。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-17T16:49:24.023

这只是一个参考任务。没有实际数据移动。

# api - Google Maps Api：有什么方法可以限制一个国家/地区的路线？

> ID：12463787
> 
> 赞同：1
> 
> 时间：2012-09-17T16:48:45.693
> 
> 标签：api, google-maps

我正在开发一个 Google Maps API 来估计送货路线，如果这会使行程更短，默认路线会来回跨越国界。

有没有办法限制国内旅行？

例如，从温哥华到多伦多而不踏足美国？

我检查了文档，没有发现任何相关的东西。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T22:19:19.150

From my experience is no way to limit directions to a particular country in the current API, but you could attempt to achieve it by setting waypoints. This will likely not result in an optimal route since you won't necessarily know the ideal location for the waypoint, and it would require iteratively getting driving directions until the entire route is within one country. You can see an example here:

[http://econym.org.uk/gmap/example_multi2.htm](http://econym.org.uk/gmap/example_multi2.htm)

# jquery - 如何使用 AJAX 和 Django 从 SQL 数据库更新网站上的字段数据

> ID：12463794
> 
> 赞同：0
> 
> 时间：2012-09-17T16:49:07.347
> 
> 标签：jquery, ajax, django, sqlite, websocket

我正在创建一个小型 Web 应用程序，我想从服务器上的 SQL 数据库更新字段上的最新数据，而不刷新整个页面。这可能吗？如果可以，我该怎么做？

我想我可以不时地使用 jQuery 来刷新整个页面，但我认为这不是很明智，尤其是在较重的网站上，因为这会导致大量流量。相反，我想用数据库中的最新数据更新几个字段。

```
var refresh = function() {
   location.reload(true);
}

$(document).ready(function() {
   setTimeout(refresh, 10000);
}); 
```

到目前为止，这就是我所拥有的。

我发现了另一个类似的问题，有人建议使用 XMLHttpRequest。是否可以使用它从 SQL 数据库中获取一些数据？

此外，当试图找出可能的 XMLHttpRequest 解决方案时，我发现可以通过使用一些 .ASP 文件将该 XMLHtppRequest 转换为 SQL 查询，但据我所知，整个过程需要一些 Microsoft 服务器框架和无论如何，与我正在编程的整个应用程序的大小和目的相比，这似乎是相当艰难和艰难的道路。尤其是当我的整个站点都在 Linux 上运行时。

此外，我读过很多关于 websockets 和观察者模式的文章。从理论上讲，声音很棒，正是我需要的，但是，我对这些东西还很陌生，如果可以避免的话，我还不想那样做。但是，如果有一些简单的方法可以做到这一点并且有人可以向我展示一个很好的教程，我也会很高兴。

但目前我主要是在寻找一种方法来进行“旧式民意调查”，无论它多么无效。我认为这仍然比重新加载整个页面更好。

非常感谢所有类型的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T17:18:30.160

我觉得你想多了这个问题。这是一个已解决的问题，现在几乎所有网站都在使用它：使用 AJAX。JQuery 有一个内置的 ajax 功能，可以很容易地发送 ajax 请求。

在服务器端，创建一个 url 端点。理想情况下，您将拥有存储在数据库中的每个资源的唯一端点。例如：

[http://mywebsite.com/book/?uid=124234](http://mywebsite.com/book/?uid=124234)

这个 url 理论上会为 ID 为 124234 的书提供一个 CRUD 接口。你可以通过发出一个 POST 请求来更新这个对象。或者您可以通过发出 GET 请求来获取其所有数据。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T17:20:35.990

如果您在框架中使用 Django，那么我建议您查看[django-socketio](https://github.com/stephenmcd/django-socketio)

# php - 必应转换代码提交事件

> ID：12463796
> 
> 赞同：3
> 
> 时间：2012-09-17T16:49:12.917
> 
> 标签：php, javascript, bing, onsubmit

您好，我想通过标准事件实现我的 Bing 转换代码。

什么是最好的方法来做到这一点。我已经研究过，必应仅将转换代码放在正在跟踪的“谢谢”/结果页面上。我想跟踪没有感谢页面的提交。

我是否需要使用绑定函数或 ajax 与 javascript 来充当转换页面的虚拟访问者？

```
<script type="text/javascript"> if (!window.mstag) mstag = {loadTag : function(){},time : (new Date()).getTime()};</script> <script id="mstag_tops" type="text/javascript" src="//flex.atdmt.com/mstag/site/adf15577-4e29-4422-a6a6-371877293cb3/mstag.js"></script> <script type="text/javascript"> mstag.loadTag("analytics", {dedup:"1",domainId:"1794519",type:"1",revenue:"15",actionid:"77282"})</script> <noscript> <iframe src="//flex.atdmt.com/mstag/tag/adf15577-4e29-4422-a6a6-371877293cb3/analytics.html?dedup=1&domainId=1794519&type=1&revenue=15&actionid=77282" frameborder="0" scrolling="no" width="1" height="1" style="visibility:hidden;display:none"> </iframe> </noscript> 
```

这是我想通过 onsubmit 事件激活的转换代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T17:31:28.890

```
<script type="text/javascript">

function bang() {

    var s1 = document.createElement("script");
    s1.type = "text/javascript"
    s1.text = "if(!window.mstag) mstag = {loadTag : function(){},time : (new Date()).getTime()};";
    document.body.appendChild(s1);

    var s2 = document.createElement("script");
    s2.type = "text/javascript"
    s2.src = "//flex.atdmt.com/mstag/site/sdfsfsdf-5555-49bb-9a12-a8d0d341d336/mstag.js";
    document.body.appendChild(s2);

    var s3 = document.createElement("script");
    s3.type = "text/javascript"
    s3.text = 'mstag.loadTag("analytics", {dedup:"1",domainId:"1130798",type:"1",actionid:"21354"})';
    document.body.appendChild(s3);

    var ns = document.createElement("noscript");
    var iframe = document.createElement("iframe");
    iiframe.src = "//flex.atdmt.com/mstag/tag/sdfsfsdf-5555-49bb-9a12-a8d0d341d336/analytics.html?dedup=1&domainId=1130798&type=1&actionid=21354";
    iframe.frameborder = "0";
    iframe.scrolling = "no";
    iframe.width = "1";
    iframe.height = "1";
    iframe.style.visibility = "hidden";
    iframe.style.display = "none";
    ns.appendChild(iframe);
    document.body.appendChild(ns);

    return true;
} 
```

然后

```
 onsubmit="return bang();" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-28T20:36:54.560

您需要做的就是将`iframe`from附加`noscript`到您的`body`标签上`click`。我用jquery做到了：

```
$('<iframe src="//flex.msn.com/mstag/tag/9cad6bfb-f783-447e-810c-0f9f1a0ae968/analytics.html?dedup=1&domainId=[12345]&type=1&actionid=[12345]" frameborder="0" scrolling="no" width="1" height="1" style="visibility:hidden;display:none">').appendTo("body"); 
```

# javascript - 使用 Firefox 发送的 POST 请求中的字符编码问题

> ID：12463800
> 
> 赞同：11
> 
> 时间：2012-09-17T16:49:29.110
> 
> 标签：javascript, ajax, firefox, character-encoding

最近，我遇到了一些与使用 POST 方法进行的 AJAX 调用的字符编码相关的非常奇怪的行为。长话短说，我有一个带有可以接受变音符号（例如“ **ä** ”）的文本字段的 HTML 表单。提交表单时，表单数据被包装在一个 XML 块中并发送到服务器，该服务器将该信息存储在 MySQL 数据库中。随后，从数据库中检索该信息并按原样显示给普通用户。

如果请求是从 Chrome 或 IE 发送的，则一切正常。这意味着数据（包括变音符号）会被正确发送、存储、检索和显示。但是，当我为此使用 Firefox 时，XML 似乎可以正确提交表单数据，但是当我重新加载网页时，之前发送的变音符号不会出现。换句话说，他们似乎在途中迷路了。例如，如果 XML 包含单词“ *tästä* ”，当我加载页面时，我会看到“ *tst* ”。

为什么会这样？Firefox 对帖子消息的编码是否与 IE 和 Chrome 不同？

如果有帮助，我附上了来自 Chrome 和 Firefox 的请求和响应标头，用于完全相同的表单内容 - 只有一个示例：

**顺便说一句，我没有在将数据发送到服务器之前对其进行编码，而只是按原样检索表单字段的值。**

***铬合金：***

XML 数据块：

```
<request>
<session>{hidden by me}</session>
<builder>Hem i Stan tÃ¤stÃ¤</builder>
</request> 
```

请求标头：

```
Accept:*/*
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Connection:keep-alive
Content-Length:562
Content-Type:application/x-www-form-urlencoded
Cookie:PHPSESSID=rlne2d787j0np52ec5rtn04dm1
Host:83.150.87.220
Origin:http://hidden.by.me
Referer:http://http://hidden.by.me/?c=2094211
User-Agent:Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.89 Safari/537.1
X-Requested-With:XMLHttpRequest 
```

响应标头：

```
Connection:Keep-Alive
Content-Encoding:gzip
Content-Type:application/xml
Date:Mon, 17 Sep 2012 16:21:58 GMT
Keep-Alive:timeout=5, max=100
Server:Apache/2.2.11 (Win32) PHP/5.2.9-1
Transfer-Encoding:chunked
Vary:Accept-Encoding 
```

***火狐：***

XML 数据块：

```
<request>
<session>{hidden by me}</session>
<builder>Hem i Stan tästä</builder>
</request> 
```

请求标头：

```
Accept  */*
Accept-Encoding gzip, deflate
Accept-Language en-us,en;q=0.5
Connection  keep-alive
Content-Length  562
Content-Type    application/x-www-form-urlencoded; charset=UTF-8
Cookie  PHPSESSID=kvfg4fp2trorllim19dmn241c7
Host    hidden.by.me
Referer http://hidden.by.me/?c=2094211
User-Agent  Mozilla/5.0 (Windows NT 6.1; WOW64; rv:14.0) Gecko/20100101 Firefox/14.0.1
X-Requested-With    XMLHttpRequest 
```

响应标头：

```
Connection  Keep-Alive
Content-Encoding    gzip
Content-Type    application/xml
Date    Mon, 17 Sep 2012 16:21:23 GMT
Keep-Alive  timeout=5, max=100
Server  Apache/2.2.11 (Win32) PHP/5.2.9-1
Transfer-Encoding   chunked
Vary    Accept-Encoding 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T15:55:34.813

正如@Pointy 前段时间提到的，问题与`Content-Type`请求有关`POST`，因为 Firefox 对消息的编码似乎与`POST`其他浏览器不同。在我的脑海中，`Data-Type`并且`Content-Type`是相同的，所以我没有意识到`UTF-8`在这两种情况下都需要指定为字符编码标准。`Content-Type`但是，一旦我将 the和 the都更改`Data-Type`为明确的“text/xml; charset=UTF-8”，问题就解决了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T15:16:07.983

我太高兴了。谢谢你们早点发帖和解决这个问题。我花了几个小时才通过谷歌搜索找到这个问题，但是由于你的评论，我在不到一天的时间内就解决了这个问题；并赶上明天的大型演讲！:)

太奇怪了，看到所有浏览器都在 AJAX 请求中发送完全相同的数据字符串，但得到不同的结果，具体取决于浏览器（Firefox 不同。）

我试过这个，但没有奏效：

> req.setRequestHeader("编码", "utf-8");

然后我就按照你所说的 Firefox 做了，一个编码解决方案适用于所有浏览器。

> req.setRequestHeader("内容类型", "application/x-www-form-urlencoded;charset=utf-8");

我已经在 Chrome、MSIE、Firefox、Safari、Opera 和 Opera Next 上进行了测试。每次都有效！

# cocos2d-iphone - Cocos2D 图层中的自定义滚动

> ID：12463803
> 
> 赞同：3
> 
> 时间：2012-09-17T16:49:48.487
> 
> 标签：cocos2d-iphone, ccscrolllayer

请看图片。如何在 cocos2D 游戏中创建这样的自定义滚动层？我使用 CCScrollLayer 但一次滚动一页。我只想在滚动时滚动一个精灵。

是否可以对 CCScrollLayer 做同样的事情？如果不是那么我该怎么做？![在此处输入图像描述](../Images/eac733e2e765d588bd21f2990163e650.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T21:25:43.173

我通过在我的 cocos2d 场景顶部覆盖 UIScrollView 然后遵循这个答案来实现类似的事情。我喜欢在 CCScrollLayer 上使用 UIScrollView，因为你会得到很好的反弹，而且在 cocos2d 2.0 中添加 UIKit 对象并不难。

[以小于帧大小的增量分页 UIScrollView](https://stackoverflow.com/questions/1677085/paging-uiscrollview-in-increments-smaller-than-content-size)

# jquery - 创建包括 id 属性的谷歌地图标记

> ID：12463804
> 
> 赞同：1
> 
> 时间：2012-09-17T16:49:51.993
> 
> 标签：jquery, google-maps

抱歉，这可能是一个愚蠢的问题，但我之前读过[将 ID 添加到谷歌地图标记](https://stackoverflow.com/questions/2564320/adding-ids-to-google-map-markers)，但没有成功。

我尝试创建带有许多标记的地图。我想使用 jquery 来处理这个标记。简单 $('#marker1').doSomething(); 怎么可能给这个标记一个有价值的 id 属性？我非常简单的演示代码将向您展示我尝试使其工作的方式。

```
function initialize() {
  var myLatlng = new google.maps.LatLng(-25.363882,131.044922);
  var mapOptions = {
    zoom: 6,
    center: myLatlng,
    mapTypeId: google.maps.MapTypeId.ROADMAP
  }
  var map = new google.maps.Map(document.getElementById('map'), mapOptions);
  var marker = new google.maps.Marker({
      position: myLatlng,
      map: map,
      draggable: true,
      title: 'Hello World!',
  });
  marker.set("type", "point");
  marker.set("id", "ABC");
} 
```

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T17:51:19.127

`var marker`保存标记对象。您可以将自己的属性添加到此对象

```
marker.type = "point";

marker.myID = "ABC"; 
```

您可能想要跟踪您创建的所有标记，在您的函数之外创建一个数组以赋予它范围。并将您创建的所有标记推送到此数组。

```
var markers = [];

function initialise()
{
    // Initialise the map etc.

    var marker = new google.maps.Marker({
        // Marker options
    });

    marker.type = "type";

    marker.myID = 4

    markers.push(marker);
} 
```

如果您创建其他标记，只需将它们推送到您创建的数组。要访问它们，只需使用`$.each()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T17:51:50.203

只需使用以下方法将点击事件绑定到标记：

```
function initialize() {
    var myLatlng = new google.maps.LatLng(-25.363882,131.044922);
    var mapOptions = {
    zoom: 6,
    center: myLatlng,
    mapTypeId: google.maps.MapTypeId.ROADMAP
}

var map = new google.maps.Map(document.getElementById('map'), mapOptions);
var marker = new google.maps.Marker({
    position: myLatlng,
    map: map,
    draggable: true,
    title: 'Hello World!',
    type: 'point'
});

google.maps.event.addListener(marker, 'click', function() {
    // do something. You may use jQuery here.
}); 
```

您可以将任意数量的数据添加到标记，例如：

```
var marker = new google.maps.Marker({
    position: myLatlng,
    map: map,
    draggable: true,
    title: 'Hello World!',
    type: 'point',
    somedata: true
}); 
```

然后使用该对象在点击时执行某些操作，例如...

```
google.maps.event.addListener(marker, 'click', function() {
    if (this.somedata) doSomething();
}); 
```

此外，如果您要放置多个标记，则可以使用简单的循环将点击事件添加到所有标记。

一个很好的例子是，我有一组 lat/lng 位置，并希望为它们中的每一个放置标记，并让它们中的每一个在点击时执行不同的操作。我可以设置一些数组，一个带有 lat/lng 坐标，第二个带有匹配的标题，比方说，一个存在于页面其他位置的 html 元素（例如，单击它会删除该元素）。

```
var markers  = [],
    marker_i = 0,
    marker_p = ['-25.363882,131.044922','-25.363882,133.044922'],
    marker_t = ['Foo', 'Bar'],
    marker_d = ['.foo', '.bar'];

for (var i = 0; i < marker_pos.length; i++) {
    markers.push(new google.maps.Marker({
        position: marker_p[i],
        map: map,
        draggable: true,
        type: 'point',
        title: marker_t[i],
        htmlelement: marker_d[i]
    });

    google.maps.event.addListener(markers[marker_i], 'click', function() {
        $(this.htmlelement).remove();
    });

    marker_i++;
} 
```

希望这可以帮助。

# c# - 在 C# 中对列表进行分组和求和

> ID：12463808
> 
> 赞同：2
> 
> 时间：2012-09-17T16:50:04.617
> 
> 标签：c#, linq

我在 C# 中有一个列表，例如

```
A,1
B,2
C,3
A,4
B,5 
```

我想以列表形式返回结果：

```
A,5
B,7
C,3 
```

所以按第一列分组并对第二列求和。

我该怎么做呢？很高兴使用 LINQ。到目前为止的声明和代码如下：

```
class Program
{
    static void Main(string[] args)
    {
        List<MyList> list = new List<MyList>();

        list.Add(new MyList() { Letter = "A", Value = 1 });
        list.Add(new MyList() { Letter = "B", Value = 2 });
        etc... 
    }
}

class MyList
{
    public string Letter { get; set; }
    public long Value { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T16:52:51.807

听起来像你想要的：

```
var results = list.GroupBy(x => x.Letter, x => x.Value)
                  .Select(g => new { Letter = g.Key, Sum = g.Sum() }); 
```

（目前尚不清楚您的类型是什么，但希望您能从中获得所需的列表。）

有一个重载`GroupBy`可以让你一次完成所有这些，但我个人觉得上面的版本更简单。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T16:53:05.440

```
var results = data.GroupBy(item => item.Letter)
.Select(group => new
{
  Letter = group.Key,
  Count = group.Sum(item => item.Value),
}); 
```

只需替换`Letter`为您提供“A”、“B”、“C”等的任何属性，并`Value`替换为您提供 1、2、3 等的任何属性。如果`A,1`是字符串，而不是具有两个属性的类，那么您将需要解析该字符串。

# eclipse - 添加到 svn:ignore 在 subclipse 中变灰

> ID：12463815
> 
> 赞同：29
> 
> 时间：2012-09-17T16:50:46.567
> 
> 标签：eclipse, svn, subclipse, ignore, svnignore

我有一些文件无法使用 subclipse 添加到 svn:ignore，我不知道为什么。

![在此处输入图像描述](../Images/9481967ec2cbab32b8159e78d1473fa3.png)

无法将文件添加到 svn:ignore 的常见原因似乎是该文件已经在存储库中，或者该文件所在的文件夹尚未创建。这些似乎都不适用于这里，所以我不知道原因是什么。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-17T16:58:09.377

该文件已明确添加到版本控制中。如果这是命令行，那么有人会执行 svn add 但尚未提交更改。因此该文件当前处于“计划添加”状态。如果您想忽略该文件，请先执行 Team > Revert 以删除计划的添加状态。然后，您可以将其添加到父级的 svn:ignore 中。

更新：还原文件时不要选择当前“未版本化”的文件。恢复未版本控制的文件意味着 Subclipse 将删除该文件。如果您不小心删除了某些内容，请注意 Eclipse 有一个“从本地历史恢复”选项。您删除的项目通常仍会在本地历史记录中可用。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-06-12T08:35:14.890

上面的答案是非常糟糕的建议，如果您的文件不在 SVN 中，Revert 可能会删除所有内容。真正的答案在这里：[Subclipse svn:ignore](https://stackoverflow.com/questions/1066809/subclipse-svnignore)，这个问题的最可能原因是父文件夹没有添加到 svn。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-11-20T09:38:53.757

要 SVN 忽略您已经签入的文件：

1) 将文件从工作区移动到临时目录
2) 团队 -> 与存储库同步
3) 提交文件删除
4) 将文件复制回工作区
5) 刷新
6) 团队 -> 与存储库同步
7) 添加到.svnignore
8) 团队 -> 更新（无论出于何种原因都需要）
9) 团队 -> 与存储库同步
10) 提交对父文件夹的更改

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-31T18:07:26.690

当我遇到这个问题时，那是因为我已经忽略了它。右键单击项目并选择团队并显示属性。请记住 svn:ignore 存储在服务器上，因此即使您从 repo 中拉下项目后它也会在那里。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-01-31T10:37:43.760

我尝试了很多方法从 SVN 版本控制中删除文件夹。这是对我有用的唯一方法（Eclipse Mars）：

*   关闭日食
*   使用适当的 SQLite 数据库编辑器打开 .svn/wc.db（在本地项目副本中）
*   在表`nodes`中删除文件夹的条目及其子文件夹
*   提交更改（如有必要）
*   启动 Eclipse

而已。

注意：要将文件或文件夹添加到 svn:ignore，它的父文件夹必须受版本控制。上述步骤仅用于从版本控制中删除已在版本控制下的文件。

# javascript - 多文件上传

> ID：12463817
> 
> 赞同：4
> 
> 时间：2012-09-17T16:50:51.780
> 
> 标签：javascript, html, upload

有什么办法可以通过 HTML5 文件上传上传超过 20 个文件？目前我一次只能上传 20 个文件。我需要能够一次上传大约 100 到 200 张图片。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T16:54:14.707

您可以使用[http://blueimp.github.com/jQuery-File-Upload/](http://blueimp.github.com/jQuery-File-Upload/)文件上传器，它是一个很好的文件上传器

它也非常安全，因为它使用[OWASP](https://www.owasp.org/index.php/Main_Page)和[跨站点脚本 (XSS)](http://en.wikipedia.org/wiki/Cross-site_scripting)也禁用了它还可以 [防止任意文件](https://github.com/blueimp/jQuery-File-Upload/wiki/Security)

还检查此[链接](http://stevesouders.com/hpws/max-connections.php)以了解一次浏览器连接的限制

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T09:41:05.577

可能，您使用 PHP。此平台对一个 POST 请求中的文件数有限制。它等于 20 :) 要增加这个值，你应该打开 php.ini，找到 max_file_uploads 并将其设置为一个大数字，例如 2000。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T16:53:07.033

我不确定这是否会帮助你。

但我建议上传一个 zip 然后提取服务器端。但是，验证内容将更加困难。

# python - 使用 Praw 如何获得通过 URL 链接的评论

> ID：12463818
> 
> 赞同：1
> 
> 时间：2012-09-17T16:51:03.753
> 
> 标签：python, api, reddit

我正在尝试通过 reddit URL 获取链接到的内容，它可以是提交或评论，我需要能够获取相应的对象，有谁知道怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T02:33:02.470

如果您使用的是 PRAW（看来您来自[这个答案](https://stackoverflow.com/a/12465878/176978)），您可以简单地使用该`get_submission`函数来处理任何一种情况。

```
import praw
r = praw.Reddit('<USER AGENT>')
submission = r.get_submission('http://www.reddit.com/r/redditdev/comments/10msc8/how_to_calculate_more_comments_count_not_just/')
comment = r.get_submission('http://www.reddit.com/r/redditdev/comments/10msc8/how_to_calculate_more_comments_count_not_just/c6euu6b').comments[0] 
```

为了获得评论，我们使用评论的永久链接返回提交的 json 数据，以及评论及其子项的数据。但是，在这种情况下，评论树将只有一个顶级评论，因此`comments[0]`是所需的评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T19:27:43.653

最后我做了一个有点hacky的方式：

```
def getObjectFromLink(url):
    global r
    obj=praw.objects.Submission.get_info(r, url)
    if len(url.split('/'))==6:
        return obj
    else:
        return obj.comments[0] 
```

# php - 跟踪路由的 PHP 脚本？

> ID：12463819
> 
> 赞同：1
> 
> 时间：2012-09-17T16:51:05.223
> 
> 标签：php, vpn, traceroute

我有一个在 GoDaddy 共享 linux 服务器上运行 PHP 的网站。我需要确定用户是否连接到公司 VPN。如果我只是简单地做 $_SERVER['REMOTE_ADDR'] 它会给我客户端的 IP 地址。但是，如果我可以使用跟踪器进行更深入的挖掘，第二跳将显示为公司 IP 地址。

是否可以使用 PHP 从网页进行跟踪路由以确定用户是否连接到公司的拆分隧道 VPN？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-06T12:57:12.440

**在 PHP 中创建一个跟踪路由程序**

[http://www.adayinthelifeof.nl/2010/07/30/creating-a-traceroute-program-in-php/](http://www.adayinthelifeof.nl/2010/07/30/creating-a-traceroute-program-in-php/)

如果网站出现故障，这是 jist：

```
<?php

define ("SOL_IP", 0);
define ("IP_TTL", 2);    // On OSX, use '4' instead of '2'.

$dest_url = "www.google.com";   // Fill in your own URL here, or use $argv[1] to fetch from commandline.
$maximum_hops = 30;
$port = 33434;  // Standard port that traceroute programs use. Could be anything actually.

// Get IP from URL
$dest_addr = gethostbyname ($dest_url);
print "Tracerouting to destination: $dest_addr\n";

$ttl = 1;
while ($ttl < $maximum_hops) {
    // Create ICMP and UDP sockets
    $recv_socket = socket_create (AF_INET, SOCK_RAW, getprotobyname ('icmp'));
    $send_socket = socket_create (AF_INET, SOCK_DGRAM, getprotobyname ('udp'));

    // Set TTL to current lifetime
    socket_set_option ($send_socket, SOL_IP, IP_TTL, $ttl);

    // Bind receiving ICMP socket to default IP (no port needed since it's ICMP)
    socket_bind ($recv_socket, 0, 0);

    // Save the current time for roundtrip calculation
    $t1 = microtime (true);

    // Send a zero sized UDP packet towards the destination
    socket_sendto ($send_socket, "", 0, 0, $dest_addr, $port);

    // Wait for an event to occur on the socket or timeout after 5 seconds. This will take care of the
    // hanging when no data is received (packet is dropped silently for example)
    $r = array ($recv_socket);
    $w = $e = array ();
    socket_select ($r, $w, $e, 5, 0);

    // Nothing to read, which means a timeout has occurred.
    if (count ($r)) {
        // Receive data from socket (and fetch destination address from where this data was found)
        socket_recvfrom ($recv_socket, $buf, 512, 0, $recv_addr, $recv_port);

        // Calculate the roundtrip time
        $roundtrip_time = (microtime(true) - $t1) * 1000;

        // No decent address found, display a * instead
        if (empty ($recv_addr)) {
            $recv_addr = "*";
            $recv_name = "*";
        } else {
            // Otherwise, fetch the hostname for the address found
            $recv_name = gethostbyaddr ($recv_addr);
        }

        // Print statistics
        printf ("%3d   %-15s  %.3f ms  %s\n", $ttl, $recv_addr,  $roundtrip_time, $recv_name);
    } else {
        // A timeout has occurred, display a timeout
        printf ("%3d   (timeout)\n", $ttl);
    }

    // Close sockets
    socket_close ($recv_socket);
    socket_close ($send_socket);

    // Increase TTL so we can fetch the next hop
    $ttl++;

    // When we have hit our destination, stop the traceroute
    if ($recv_addr == $dest_addr) break;
}

?> 
```

你需要是根。这意味着从 Web 服务器运行它时它可能不起作用，您必须从命令行运行它：

```
jthijssen@tarabas:~/traceroute$ sudo php traceroute.php
Tracerouting to destination: 199.6.1.164
  1   192.168.1.1      0.004 ms  192.168.1.1
  2   *                0.005 ms  static.kpn.net
  3   (timeout)
  4   139.156.113.141  0.005 ms  nl-asd-dc2-ias-csg01-ge-3-2-0-kpn.net
  5   195.190.227.221  0.005 ms  asd2-rou-1022.nl.euroringen.net
  6   134.222.229.105  0.005 ms  asd2-rou-1001.NL.eurorings.net
  7   134.222.97.186   0.007 ms  kpn-1402.xe-0-0-0.jun1.galilei.network.bit.nl
  8   213.154.236.75   0.012 ms  213.154.236.75
  9   199.6.1.164      0.012 ms  pub3.kernel.org 
```

这是到 www.kernel.org 的跟踪路由。我已经删除了第二个跃点（因为那是我所在的 IP）。第三跳返回超时。可能那里的站点没有返回 ICMP 数据包以供使用。

以上代码可以在github上找到：[https ://github.com/jaytaph/traceroute](https://github.com/jaytaph/traceroute)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T17:00:04.197

您可以使用 PHP 在服务器上运行 traceroute 命令。

```
<?php
$output = shell_exec("/usr/sbin/traceroute target");
echo "<pre>$output</pre>";
?> 
```

然后解析 $output 中的输出。

来源： http: [//php.net/manual/en/function.shell-exec.php](http://php.net/manual/en/function.shell-exec.php)

# php - php克隆没有按我的预期工作

> ID：12463820
> 
> 赞同：1
> 
> 时间：2012-09-17T16:51:14.307
> 
> 标签：php, mysql, clone

尝试从 mySQL 数据库构建一个简单的数据网格。

我用来连接的数据库类将结果集作为对象返回。我想克隆这个对象，这样我就可以使用 getNext() 方法来获取表的标题，而无需向前移动指针以删除返回的第一行。我希望这就像克隆结果集一样简单，这样我现在就有了 2 个相同的对象。然后在一个对象中返回标题，同时保持另一个对象不变。

然而，事实证明这比我想象的要难。也许我没有正确使用克隆，所以如果你能帮忙，请告诉我我做错了什么。

下面是代码：

```
 function gethtmlTable($database, $table)
            {
                $db = new DB_Connection();
                $sql = "SELECT * FROM $table;";
                $result = $db->query($sql,$database);
                $tabelheader = clone $result;
                $tablerows = clone $result;
                if (!$result) die($db->getError());
                if ($result->getNumRows() == 0) die('No Results');

                $count = $tabelheader->getNumRows();
                $html = "<table><th>Select</th>";

                // echo "<pre>".var_dump($result)."</pre>";    
                foreach($tabelheader->getNext() as $k => $v){
                       $html .="<th>".$k."</th>";
                }
                while($count > 0){ 
                    $row = $tablerows->getNext();      
                    $html .= "<tr>";
                    $html .= "<td><input type='checkbox' id='checkbox".$count."' name=checkbox".$count." class ='styled' value='checked'></td>";

                    foreach($row as $k => $v){
                            $html .="<td>".$v."</td>";
                    }

                    //foreach($result->getNext() as $k => $v){
                    //   $html .="<td>".$v."</td>";
                    //}
                    $html .="</tr>";
                    $count--;
                 }
                $html .="</table>";
                echo $html;

            } 
```

当我运行这个函数时，我得到一个带有标题和一个选择框的表格，但第一行总是丢失。:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T17:15:22.257

比直接答案更多的解决方案，但您不需要克隆您的对象。`while`相反，您可以稍微更改循环并使用`$result`查询中的：

```
do
{
  // do the stuff you are doing now except for fetching a new row

  // at the end:
  $count--;
  $row = $result->getNext();
}
while ($count > 0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T17:18:42.673

克隆 $result 对象并不意味着您可以从 2 个不同的数据源中读取数据。

它仍然是一个底层**数据源，只有一个游标！**

所以这一行：

```
 foreach($tabelheader->getNext() as $k => $v) {
      $html .="<th>".$k."</th>";
  } 
```

实际上会从数据源中获取第一条记录，并且

```
while($count > 0) { 
    $row = $tablerows->getNext();
    ... 
```

然后将从第 2 行及以后获取！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T18:39:24.233

在阅读了这些建议后，我意识到我过于复杂了：D

这是任何试图做同样事情的人的解决方案

```
 function gethtmlTable($database, $table)
        {
            $db = new DB_Connection();
            $sql = "SELECT * FROM $table;";
            $result = $db->query($sql,$database);
            //$tabelheader = clone $result;
            //$tablerows = clone $result;
            if (!$result) die($db->getError());
            if ($result->getNumRows() == 0) die('No Results');

            $count = $result->getNumRows();
            $html = "<table><th>Select</th>";
            $row = $result->getNext();

            foreach($row as $k => $v){
                   $html .="<th>".$k."</th>";
            }

            do {
                $html .= "<tr>";
                $html .= "<td><input type='checkbox' id='checkbox".$count."' name=checkbox".$count." class ='styled' value='checked'></td>";

                foreach($row as $k => $v){
                    $html .="<td>".$v."</td>";
                }

                $count--;    
                $row = $result->getNext();
            }
            while ($count > 0); 
```

# android - 通过方向更改保存下载的位图

> ID：12463823
> 
> 赞同：1
> 
> 时间：2012-09-17T16:51:26.020
> 
> 标签：android, caching, screen-orientation

我有一个使用自定义 ArrayAdapter 填充的 ListView。每行都包含从互联网下载的图像和一些文本。

问题是改变设备的方向会重置一切。ListView 是空的，它再次开始下载文本和图像！

我怎样才能避免这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T16:57:59.897

问题的根源在于，当方向改变时，Android 会重新创建活动。[您可以通过覆盖onSaveInstanceState()](http://developer.android.com/reference/android/app/Activity.html#onSaveInstanceState%28android.os.Bundle%29)和[onRestoreInstanceState()](http://developer.android.com/reference/android/app/Activity.html#onRestoreInstanceState%28android.os.Bundle%29)来保存/恢复活动的状态。保存您认为对您的活动很重要的内容，以便在方向更改后看起来相同。

另一个选项是通过将以下内容添加到您的活动中的 Android XML 来禁用活动的重新创建：

```
android:configChanges="orientation|keyboardHidden" 
```

如果您正在使用`AsyncTask`下载位图，此选项也将为您提供帮助。如果每次都重新创建活动，则必须停止下载任务并重新启动它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T17:09:01.283

您需要通过覆盖[onSaveInstanceState](http://developer.android.com/reference/android/app/Activity.html#onSaveInstanceState%28android.os.Bundle%29)和 onRestoreInstanceState 自己处理配置更改。您还可以通过添加使 android 不重新启动您的活动

```
 android:configChanges="orientation|keyboardHidden" 
```

在你的清单中。

此外，您可能需要通过[http://developer.android.com/training/displaying-bitmaps/display-bitmap.html](http://developer.android.com/training/displaying-bitmaps/display-bitmap.html)了解有关在 android 中使用位图的重要提示。

# encoding - 转换为 base64 字符串编码，反之亦然

> ID：12463828
> 
> 赞同：0
> 
> 时间：2012-09-17T16:52:06.907
> 
> 标签：encoding, hex, base64, decoding

我正在尝试将字符串编码变量（最初是十六进制 guid）转换为十六进制 guid 并返回到相同的字符串编码版本。

我正在使用 python 标准库的 base64 包执行此操作

```
>>> import base64
>>> guid
'Dw8OAwQFBgcIBQABAgMEBw==\n'
>>> cguid=base64.decodestring(guid).encode('hex')
'0f0f0e03040506070805000102030407' 
```

上面的代码完成了任务。现在我需要将变量 cguid 转换回 guid。

我如何完成任务？

我试过切换解码和编码，但它似乎不起作用。它向我显示了一个错误。

```
>>> base64.encodestring(cguid).decode('hex')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/local/nb/python/lib/python2.7/encodings/hex_codec.py", line 42, in hex_decode
    output = binascii.a2b_hex(input)
TypeError: Odd-length string
>>> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T16:58:50.167

`base64.encodestring(cguid).decode('hex')`=> `base64.encodestring(cguid.decode('hex'))`

# wso2 - WSO2 Carbon ESB UDP 传输示例

> ID：12463831
> 
> 赞同：1
> 
> 时间：2012-09-17T16:52:21.980
> 
> 标签：wso2, esb, wso2esb, wso2carbon

我正在尝试为 UDP 传输设置 carbon esb 4.5.0。

我使用这个文档作为指南： [http ://docs.wso2.org/wiki/display/ESB450/ESB+Samples+Setup#ESBSamplesSetup-ConfigureWSO2ESBforUDPTransport](http://docs.wso2.org/wiki/display/ESB450/ESB+Samples+Setup#ESBSamplesSetup-ConfigureWSO2ESBforUDPTransport)

它说：“如果您希望使用示例 Axis2 客户端发送 UDP 消息，您必须取消注释 samples/axis2Client/client_repo/conf/axis2.xml 文件中的 UDP 传输发送器配置。”

但是，查看axis2.xml 文件，似乎没有注释的UDP 代码。我看到了 TCP 代码，但没有看到 UDP。

谁能指出我可以用来帮助我解决这个问题的任何资源？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T17:20:04.630

您必须在axis2.xml 中添加传输发送方和接收方。在这个场景中，ESB 的示例客户端是发送者。因此，在传输发送器配置下添加以下示例/axis2Client/client_repo/conf/axis2.xml。

```
<transportSender name="udp" class="org.apache.axis2.transport.udp.UDPSender"/> 
```

对于作为 WSO2 ESB 的传输接收器，您需要将其添加到相应的axis2.xml 的传输接收器部分

```
<transportReceiver name="udp" class="org.apache.axis2.transport.udp.UDPListener"/> 
```

如果它是双向传输用例，您需要在每个axis2.xml 中添加传输接收器和发送器。

# scala - Scala 包对象不会将伴随对象带入范围？

> ID：12463836
> 
> 赞同：5
> 
> 时间：2012-09-17T16:53:04.083
> 
> 标签：scala

开发了一个看起来像这样的小包对象：

```
package object logic {

  type Chat = engine.logic.chat.Chat
  type History = engine.logic.history.History
  type Meta = engine.logic.meta.Meta
  type Notification = engine.logic.notification.Notification
  type Service = engine.logic.service.Service
  type State = engine.logic.state.State
  type Sync = engine.logic.sync.Sync

} 
```

看起来我误解了包对象的意义，因为我相信前面的内容会将伴随对象`Sync`纳入范围。

`Sync`是 下的顶级对象`package engine.logic.sync`。

这是我访问它的方式：

`engine.logic.Sync.aMemberDef(var: String)`

但是编译器会抛出错误`object Sync is not a member of package engine.logic`。那么解决方法是什么？我是如何弄乱我的包装的？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T17:16:58.287

如果要创建实例别名，只需使用 val：

```
val Sync = engine.logic.sync.Sync 
```

# c++ - 从另一个 Visual Studio C++ 项目中读取数组？

> ID：12463840
> 
> 赞同：0
> 
> 时间：2012-09-17T16:53:16.583
> 
> 标签：c++, visual-studio-2010, variables

我需要一个解决方案，如何在 Visual Studio 2010 中从另一个项目中读取数组。

我有一个程序来做 GUI 和一个程序做数学。在这个数学程序中，我生成了一个二维数组来保存一些球体的数据。由于一些错误，我无法构建一个程序来访问和加载这两个 API。现在我已经在一个项目文件夹中编写了两个单独的程序（项目）并且需要访问数组。

我的第一个解决方案是生成一个包含数组值的文件，并由其他程序读出。但由于我的程序需要快速，最大。每次迭代 20 毫秒，我认为这对我没有多大帮助。

有没有办法解决这个问题？

先感谢您

**编辑：**

我解决了我的问题......我碰巧让我的程序只在一个应用程序中运行。我的错误是在 NXOpen 的主函数中调用 MatLab-Engine 而不是自己的函数。无论如何，谢谢你激励我找到一个“单一程序解决方案”:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T17:07:47.363

要在多个进程之间共享数据，可以使用文件映射。检查[共享文件和内存](http://msdn.microsoft.com/en-us/library/aa366878%28v=vs.85%29.aspx)，这是一个很好的例子：[创建命名共享内存](http://msdn.microsoft.com/en-us/library/aa366551%28v=vs.85%29.aspx)。

尽管将您的解决方案分成两个应用程序似乎并不正确。在使您的解决方案变得更加复杂之前，请先尝试检查是否有办法使其再次变得简单。

# sqlalchemy - how to import the aliased sqlalchemy function

> ID：12463845
> 
> 赞同：1
> 
> 时间：2012-09-17T16:53:30.823
> 
> 标签：sqlalchemy

In [the SQLAlchemy Tutorial](http://docs.sqlalchemy.org/en/rel_0_7/orm/tutorial.html#using-literal-sql)

an example uses `aliased`:

```
>>> from sqlalchemy import func
>>> ua = aliased(User)
>>> q = q.from_self(User.id, User.name, ua.name).\
...     filter(User.name < ua.name).\
...     filter(func.length(ua.name) != func.length(User.name)) 
```

But it does not work in 0.6.1:

```
>>> from sqlalchemy import func

>>> ua = aliased(User)

Traceback (most recent call last):
  File "<pyshell#3>", line 1, in <module>
    ua = aliased(User)
NameError: name 'aliased' is not defined
>>> ua = aliased(User)

Traceback (most recent call last):
  File "<pyshell#4>", line 1, in <module>
    ua = aliased(User)
NameError: name 'aliased' is not defined
>>> ua = sqlalchemy.aliased(User)

Traceback (most recent call last):
  File "<pyshell#5>", line 1, in <module>
    ua = sqlalchemy.aliased(User)
NameError: name 'sqlalchemy' is not defined
>>> import sqlalchemy
>>> ua = sqlalchemy.aliased(User)

Traceback (most recent call last):
  File "<pyshell#7>", line 1, in <module>
    ua = sqlalchemy.aliased(User)
AttributeError: 'module' object has no attribute 'aliased'
>>> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-17T19:06:19.437

Add:

```
from sqlalchemy.orm import aliased 
```

[class sqlalchemy.orm.aliased](http://docs.sqlalchemy.org/en/rel_0_7/orm/query.html?highlight=aliased#sqlalchemy.orm.aliased)

# sql - 从事务中的 RETURNING * 获取值

> ID：12463846
> 
> 赞同：11
> 
> 时间：2012-09-17T16:53:32.087
> 
> 标签：sql, postgresql, transactions, sql-insert

当我在and事务中有两个`INSERT`SQL 语句（见下文）时，则不会返回任何内容，但如果我取出并返回插入的记录。 我怎样才能在事务中工作？`begin;``commit;``RETURNING *``begin;``commit;``RETURNING *`
`RETURNING *`

```
BEGIN;

INSERT INTO gis_field_configuration
   (level_unique_name, level_name_caption, use_for_charts, use_as_displayby, 
    displayby_label, data_type, level_help_text)
VALUES (
    '[john].[john]',
    'john',
    'false',
    'false',
    '',
    'text',
    'help text'
);

INSERT INTO gis_field_configuration_bycube
   (cube, level_unique_name)
VALUES (
    'Instruments',
    '[john].[john]'
) RETURNING *;

COMMIT; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-17T17:04:12.260

一种方法是使用[数据修改 CTE](http://www.postgresql.org/docs/current/interactive/queries-with.html#QUERIES-WITH-MODIFYING)并将两个`INSERT`s 打包到一个命令中。需要 PostgreSQL **9.1**或更高版本：

```
WITH x AS (
   INSERT INTO gis_field_configuration (level_unique_name, level_name_caption
                ,use_for_charts, use_as_displayby, displayby_label, data_type
                ,level_help_text)
   VALUES (
       '[john].[john]',
       'john',
       'false',
       'false',
       '',
       'text',
       'help text'
   )
   )
INSERT INTO gis_field_configuration_bycube
   (cube, level_unique_name)
VALUES (
    'Instruments',
    '[john].[john]'
    )
RETURNING *; 
```

但是，无论如何，您**确实**可以取回值`RETURNING *`。只需在发送*前*`COMMIT`阅读它们。作为批处理发送，仅返回命令的结果 -如果您将*所有*命令作为一批发送，`last`这将是 的结果。`COMMIT`

 *等到`COMMIT;`你收到第二个结果`INSERT`。

* * *

### 在 plpgsql 函数中

一个函数在事务中自动运行。您不需要明确的 BEGIN / COMMIT。要重用您从`INSERT`使用中返回的值[`RETURNING *expressions* INTO [STRICT] *target*`](http://www.postgresql.org/docs/current/interactive/plpgsql-statements.html#PLPGSQL-STATEMENTS-SQL-ONEROW)。

考虑这个简单的演示：

```
CREATE TABLE foo (foo_id serial, bar text);

CREATE OR REPLACE FUNCTION f_foo()
  RETURNS void LANGUAGE plpgsql AS
$BODY$
DECLARE
   **foo_var foo;** -- type name = table name, fits return type of RETURNING *
   -- or use a generic type record
BEGIN

   INSERT INTO foo (bar)
   VALUES ('baz')
   RETURNING *
   **INTO foo_var;**

   RAISE NOTICE 'New id is: %', **foo_var.foo_id**;

   -- do stuff with foo_var

   END;
   $BODY$;

SELECT f_foo();
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-18T00:49:29.520

我怀疑您将所有这些语句作为您语言的客户端驱动程序中的单个文本字符串运行。如果是这种情况，返回给客户端的结果将是您发送的语句块中的*最后一条语句返回的结果。*在这种情况下`COMMIT`，这就是没有结果的语句，因此您不会得到任何结果。

一个接一个地运行每个语句，它应该可以正常工作。我无法给出更详细的示例，因为您没有提到您使用的是哪种语言。

这是一个 Python/psycopg 示例。当我尝试获取结果时，将所有 SQL 发送到一个 blob 中的第一种方法会导致异常，因为`commit`不会产生结果。第二个示例，我分别运行每个语句并获得`select`before I的结果`commit`，工作正常。

```
import psycopg2

conn = psycopg2.connect("dbname=regress")
curs = conn.cursor();

# All in one blob
try:
    curs.execute("BEGIN; SELECT generate_series(1,10); COMMIT;")
    print(curs.fetchall())
except (psycopg2.ProgrammingError) as ex:
    print("Failed: ", ex)

# vs one-by-one
curs.execute("BEGIN;")
curs.execute("SELECT x.* FROM generate_series(1,10) x;")
print(curs.fetchall())
curs.execute("COMMIT;") 
```

输出：

```
$ python3 test.py 
Failed:  no results to fetch
[(1,), (2,), (3,), (4,), (5,), (6,), (7,), (8,), (9,), (10,)] 
```*

# php - 在 include(path) 中包含 GET 变量

> ID：12463851
> 
> 赞同：0
> 
> 时间：2012-09-17T16:53:45.270
> 
> 标签：php

我正在尝试做一个包含（dirname（FILE），'/../file.php?variable=VAR'），但是当我使用变量时它无法找到位置。

该目录位于文件所在的当前目录的上一层。是否可以通过包含传递变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T16:57:51.483

你不能，尽管你根本不需要这个，因为`$_GET`' 的范围是全局的[即可以从你运行的每个脚本访问]。

只是要清楚：

`include($path)`在文件系统中搜索资源，然后对其进行处理。

`http://somesite.com/index.php?key=value`是一个 URL，其`?`符号后的部分称为*query*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T16:57:44.177

不。

通过使用包含，您可以按原样包含文件中的源代码。我猜你想在包含的文件中定义一个函数并调用它来获得结果。

# c# - 在代码隐藏中添加 ListBoxItems

> ID：12463853
> 
> 赞同：2
> 
> 时间：2012-09-17T16:53:52.637
> 
> 标签：c#, .net, xaml, listbox, microsoft-metro

我们如何在运行时向 Windows Metro 风格应用程序中的 ListBox 控件添加新项目？

我来自 WinForms，所以你可以想象，我现在很困惑。

我有以下内容：

```
public class NoteView
{
   public string Title { get; set; }
   public string b { get; set; }
   public string c { get; set; }
} 
```

接着：

```
List<NoteView> notes = new List<NoteView>();

protected void Button1_Click(object sender, RoutedEventArgs e)
{
   notes.Add(new NoteView {
      a = "text one",
      b = "whatevs",
      c = "yawns"
   });

   NotesList.ItemsSource = notes;
} 
```

这是没用的。它什么也不做。此外，“输出”窗口中没有任何内容。没有错误，没有例外；没有什么。

所以，然后我尝试直接添加到ListBox：

```
NotesList.Items.Add("whatever!"); 
```

再一次，什么也没发生。所以然后我尝试添加`UpdateLayout();`，但这也没有帮助。

有人知道这是怎么回事吗？

我们如何向 XAML 列表框添加新项目？

# 更新：

```
 <ListBox Name="NotesList" Background="WhiteSmoke">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <TextBlock Text="{Binding Title, Mode=TwoWay}" />
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T16:59:49.757

你将不得不做一些不同的事情，你不能只是将所有属性分配给 listBox。所以创建这样的类：

```
 public class NoteView
{
    public string Item { get; set; }
    public int Value { get; set; }
} 
```

这就是按钮点击事件中的代码：

```
 List<NoteView> notes = new List<NoteView>();
        notes.Add(new NoteView { Item = "a", Value = 1 });
        notes.Add(new NoteView { Item = "b", Value = 2 });
        notes.Add(new NoteView { Item = "c", Value = 3 });

        listBox1.DataSource = notes;
        listBox1.DisplayMember = "Item";
        listBox1.ValueMember = "Value"; 
```

-- 否则，如果您打算使用与您创建的相同的类，那么您可以这样做：

```
 List<NoteView> notes = new List<NoteView>();
        notes.Add(new NoteView
        {
            a = "text one",
            b = "whatevs",
            c = "yawns"
        });

        listBox1.Items.Add(notes[0].a);
        listBox1.Items.Add(notes[0].b);
        listBox1.Items.Add(notes[0].c); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T17:11:14.227

```
List<NoteView> notes = new List<NoteView>();

protected void Button1_Click(object sender, RoutedEventArgs e)
{
   notes.Add(new NoteView {
      a = "text one",
      b = "whatevs",
      c = "yawns"
   });
NotesList.DisplayMember = "a";
        NotesList.ValueMember = "b";
   NotesList.ItemsSource = notes;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T17:23:24.910

我设法弄清楚如何做到这一点：

`notes.Insert(0, new NoteView { a = "Untitled note", b = "", c = "" });`

# jquery - 访问 jQuery 添加的新元素

> ID：12463859
> 
> 赞同：0
> 
> 时间：2012-09-17T16:54:24.410
> 
> 标签：jquery

我正在使用 $.get 命令发出 AJAX 请求。完成后，我将 HTML 代码附加到现有的 div 中。添加完所有代码后，我注意到我无法使用 jQuery 选择器访问新添加的代码。我已经阅读了其他 DOM 刷新问题，但这些问题与“点击”事件有关。我只是想用 $("#xxxxxxxx") 访问我添加的 id

例如，我添加了

```
<div id="aaa1"></div><div id="aaa2"></div><div id="aaa3"></div> 
```

进入我现有的

```
<div id="container"></div> 
```

我想添加的是 temp.html 文件，所以我使用`$("#container").load("temp.html");`了 Things got added nice but I can't access it。（使用`alert($("#aaa1").html())`返回`undefined`）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T16:58:09.807

尝试这个 ：

```
$("#container").load("temp.html" ,function(){
    alert($("#aaa1").html());     
}); 
```

# ruby-on-rails - Emacs 和嵌入的 ruby <% %> 标签

> ID：12463860
> 
> 赞同：0
> 
> 时间：2012-09-17T16:54:29.920
> 
> 标签：ruby-on-rails, ruby, emacs, erb, rhtml

我正在寻找一种快速将 <% %> 标记放在标记区域上的方法。我正在使用带有 rhtml 模式的 rinari。我想做这样的事情（我处于 rhtml 模式）：

例如，我有一个红宝石代码

```
a.each do |e|
  puts e
end 
```

我用 select-region 选择它，放一些魔法键，我得到了：

```
<% a.each do |e| %>
  <%= puts e %>
<% end %> 
```

我要求它应该做得很聪明，例如，如果我选择了混有一些 HTML 标记的 ruby​​ 代码，它应该仅将 <% %> 应用于 ruby​​ 代码，而其余部分则不受伤害。另外，如果我什么都不选，它应该把 <% %> 的点放在中间，等待我的输入。我想知道类似的东西是否作为 emacs 函数或包存在？

我试图这样做，作为 YAsnippet mod 的一个片段，但它远非我喜欢的样子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T12:09:23.783

如果您使用具有内置 GNU Awk 的操作系统，您可以使用那个简单的单行脚本：

```
(defun make-it-erb (begin end)
    "Add <%=? %> for each string"
    (interactive "r")
    (shell-command-on-region begin end "gawk '/^[ \t]*(puts)|(print)/{ printf \"<%=\" $0 \"%>\"; next } // { printf \"<%\" $0 \"%>\" } '" nil ""))
  (global-set-key [f7] 'make-it-erb) 
```

您应该将它添加到您的 .emacs 文件中并评估上面的函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T16:16:49.263

有一个不错的小实用程序，称为[wrap region](http://tuxicity.se/emacs/elisp/2012/01/28/wrap-region-0.4.0.html)，您可能会发现它很有用。

PS 在 Emacs 中使用嵌入式 ruby​​ 代码通常是一件令人头疼的事情——我尝试过 rhtml 和 mumamo，但没有发现它们特别精致。最后我决定使用[HAML](http://haml-lang.com)和[Slim](http://slim-lang.com) - 更好的模板语言，具有可靠的 Emacs 支持。

# c - 将 char * 分配给 char[200] 时的类型不兼容

> ID：12463862
> 
> 赞同：0
> 
> 时间：2012-09-17T16:54:35.877
> 
> 标签：c, split

执行main，它会要求输入。

将输入存储在 argbuf 中。

然后，使用 strwrd 将 argbuf 拆分为标记

然而，它显示“错误：将 char * 分配给 char[200] 时类型不兼容”

我无法弄清楚为什么..

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
char argbuf[200];//used to store input

char *strwrd(char *s, char *buf, size_t len, char *delim){
    s += strcspn(s, delim);
    int n = strcspn(s, delim); /* count the span (spn) of bytes in */
    if (len-1 < n)             /* the complement (c) of *delim */
        n = len-1;
    memcpy(buf, s, n);
    buf[n] = 0;
    s += n;
    return (*s == 0) ? NULL : s;
}

int main(){
    fgets(argbuf, sizeof(argbuf), stdin);
    char token[10][20];
    int index;
    for (index = 0; index < 10; index++) {
        argbuf = strwrd(argbuf, token[index], sizeof(token[index]), " \t");
        if (argbuf == NULL)
            break;
    }
    return 1;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T16:56:28.607

`strwrd`返回 a `char*`，因此您不能将此值存储在`char[200]`变量中。改用`char*`类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T17:23:34.273

`char *`并且`char[x]`是不同的类型，请参见[此处](https://stackoverflow.com/questions/10186765/char-array-vs-char-pointer-in-c)

[这是另一个很好的资源](http://www.cs.bu.edu/teaching/cpp/string/array-vs-ptr/)

在您的代码`char argbuf[200];`中是一个静态分配的数组，因此您不能为其分配指针。为什么要来回传递全局？如果您打算将 argbuf 用作全局变量，那么如果您的 each for '\t' 返回有效的内容，则只需在 strwrd 中直接修改它。

# php - 一个while循环PHP中的多个条件

> ID：12463863
> 
> 赞同：1
> 
> 时间：2012-09-17T16:54:41.620
> 
> 标签：php, while-loop, conditional-statements, boolean-operations, multiple-conditions

在while循环中使用布尔运算符具有多个条件的正确方法是什么？我在这里有这个脚本，我觉得应该可以工作，但是当我运行它时它出现空白。

```
$string = '"""JOHN"" <31255555656>","DAHDI/1-1",3948723,,"",';

for ($i=0; $i<strlen($string); $i++) { 
    if ($string[$i] == chr(34)) {   
        // chr 34 is ascii value for double quote chr 44 is for comma 
        while (($string[$i] != chr(34)) && ($string[$i+1] != chr(44))) {
            echo $string[$i];
            $i++;
        }
    }

} 
```

理想情况下，我想要的是脚本回显给定的字符串，直到指针 ($i) 到达双引号，并且它前面的一个是逗号。我觉得这很简单，我显然遗漏了一些明显的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T17:00:12.080

```
if ($string[$i] == chr(34)) {   
    while (($string[$i] != chr(34)) && ($string[$i+1] != chr(44))) 
```

如果此字符是引号，您的 if 语句将运行。只要此字符不是引号（并且不是逗号），while 语句就会运行

两者是排他性的。我认为您可以通过在 if 语句之后增加 $i 来解决它，但几乎可以肯定有一种更简单的方法可以做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T17:13:45.327

内部循环不会在字符串的末尾结束。

操作循环内的循环控制变量 ($i) 会导致代码困难。这使得推理它变得更加困难，并检查它是否正确。你应该避免它。

如果您只有一个循环在字符串中逐个字符地移动，您将获得更好的结构。比使用变量来记住状态，例如 $inside_quotes 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T16:59:22.043

if 和 while 表示相反的条件......这意味着 while 永远不会有一个真实的。我猜你想检查下一个字符？

```
$string = '"""JOHN"" <31255555656>","DAHDI/1-1",3948723,,"",';

for ($i=0; $i<strlen($string); $i++)
{ 

if ($string[$i] == chr(34)) 

    {   
        while (($string[$i+1] != chr(34)) && ($string[$i+1] != chr(44)))  // notice the $i+1
// chr 34 is ascii value for double quote chr 44 is for comma 

        {
             echo $string[$i];
             $i++;

        }
    }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T17:42:53.347

您的循环中有一个逻辑缺陷，这将导致它遍历整个字符串但不进行任何输出。

比方说：

```
$a = 1;
$b = 1;

while ($a == 1)
{
    while ($a != 1 && $b == 1)
    {
         # will never come here.
    }

    $a++;
} 
```

因为`$a`永远不可能`1`和`!1`同时你放在对方里面的条件都在阻碍自己。

解决此问题的一种常见方法是对字符串进行标记（扫描字符串），然后处理标记：

```
$string = '"""JOHN"" <31255555656>","DAHDI/1-1",3948723,,"",';

$token = strtok($string, '"');

while ($token !== false)
{
    $token[0] !== ',' && (print "$token\n");

    $token = strtok('"');
} 
```

这会产生（[Demo](http://codepad.org/Qq02u7DZ)）以下输出：

```
JOHN
 <31255555656>
DAHDI/1-1 
```

这可能是也可能不是您正在寻找的东西。一个更详细的变体是拥有一个具有*state*的分词器/扫描器，它可以做更多的事情（但仍然存在通过将 ( ) 加倍来转义引号的缺点`""`）。由于这是非常虚假的，我只[链接](http://codepad.org/wJriQ4M5)它。这是假的，因为：

您正在寻找的实际功能称为[`str_getcsv`](http://php.net/str_getcsv)：

```
$string = '"""JOHN"" <31255555656>","DAHDI/1-1",3948723,,"",';
echo implode("\n", str_getcsv($string)); 
```

输出（[演示](http://codepad.viper-7.com/VdVSlH)）：

```
"JOHN" <31255555656>
DAHDI/1-1
3948723 
```

如果您有整个文件，请查看[`SplFileObject`](http://php.net/SplFileObject).

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-27T21:36:10.987

由于您已经使用 for 语句找到了第一个引号，因此您不需要使用 for 语句再次找到相同的引号。

删除这个： (($string[$i] != chr(34)) && 以及额外的 ) 代码将产生以下内容： """JOHN"" <31255555656>"DAHDI/1-1"

```
<?php
$string = '"""JOHN"" <31255555656>","DAHDI/1-1",3948723,,"",';
for ($i=0; $i<strlen($string); $i++) { 
    if ($string[$i] == chr(34)) {
        while  ($string[$i+1] != chr(44)) {
            echo $string[$i];
            $i++;
        }
    }
}
?> 
```

# css - gwt datebox没有得到默认的Css

> ID：12463871
> 
> 赞同：0
> 
> 时间：2012-09-17T16:55:10.263
> 
> 标签：css, gwt, uibinder, datebox

我在 Uibinder 创建了一个 Datebox 。

```
 <d:DateBox ui:field="completedDate"></d:DateBox> 
```

并且没有为此定义任何CSS

我在 Firefox 中的 Chrome 中得到一个白色背景的日期框，没有任何格式，它很好..

我已经一一尝试了所有这些，也一起尝试了所有这些，但在 Chrome 中没有运气。

```
 <inherits name='com.google.gwt.user.theme.clean.Clean'/> 
        <inherits name='com.google.gwt.user.theme.standard.Standard'/>  
        <inherits name='com.google.gwt.user.theme.chrome.Chrome'/> 
```

任何的想法

或者如果有人可以给我默认的 CSS，我可以在里面添加

```
 .gwt-DateBox{

       } 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T12:43:01.597

你有理由想要 chrome 中的 firefox 外观吗？

我建议定义一个适合您需要的样式并将其设置为 DateBox，这样您就可以为各种浏览器提供独特的外观。

也许看看文本框的这个问题： [默认文本框边框样式和宽度](https://stackoverflow.com/questions/1232188/default-textbox-border-style-and-width)

# debugging - UART 代码端口后的 TI MSP430 中断问题

> ID：12463875
> 
> 赞同：4
> 
> 时间：2012-09-17T16:55:26.253
> 
> 标签：debugging, embedded, interrupt, msp430, iar

我将 MSP430F2013 处理器用于没有 UART 的应用程序。我需要一个 UART，因此我使用了 TI 的示例代码“msp430x20x3_ta_uart2400.c”来模拟一个使用 Timer 模块的代码。这一切都很好（使用 IAR Embedded Workbench 编译），使用 PuTTY 将字符传输到开发板并使用环回将它们回显到终端对其进行了测试。

这是一个降低风险的练习，现在我已经将该代码移植到我的应用程序的状态机中。完成此操作后，我遇到了有关定时器中断和低功耗睡眠模式的问题。这是我进入低功耗（睡眠）模式的代码片段：

```
// Prepare the UART to receive one byte.
prepare_receiver();

// Enter low power mode 1.
__bis_SR_register(LPM1_bits + GIE);

// Check whether the full message has been received.
if(true == get_message_complete())
{
    process_event(e_euart_message_received, NULL);
} 
```

我在调试器 (C-Spy) 上看到的是，有时它会`bis_SR_register()`在第一次进入时执行该行，然后转到`if`语句，即忽略我已要求它进入睡眠状态的事实。在其他情况下，当它应该进入睡眠状态时，ISR 会正确触发并最终将我带回`if`语句以继续程序执行（正如我所期望的那样）。但是，如果我尝试跳到下一条语句，应用程序会在第一行冻结，即我无法前进。

我想不出与我正在做的 TI 示例在功能上有何不同，所以我认为我的问题一定与我如何移植它有关。例如，我的 Timer ISR 和我在此处发布的代码位于不同的编译单元中 - 这种决定会对事情产生任何影响吗？我知道我的问题可能有点含糊，但不幸的是我不能发布我的所有代码，所以我正在寻找具有 MSP 经验的人，他们可能能够提出一些值得关注的事情或一些潜在的陷阱我可能陷入了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T19:04:02.380

在低功耗模式下使用 C-Spy 调试中断会很棘手。根据[第 A.3 节调试 (C-Spy) - IAR 用户指南](http://www.ti.com.cn/cn/lit/ug/slau138y/slau138y.pdf)：

> 5) **C-SPY 可以调试利用中断和低功耗模式的应用程序**

但是您应该注意一些“陷阱”，这可能会导致您的头痛。

尤其：

> 14)**当 C-SPY 控制了设备时，无论状态寄存器中低功耗模式位的设置如何，CPU 都处于开启状态**（即不处于低功耗模式）。任何低功耗模式条件都会在 Step 或 Go 之前恢复。因此，当 C-SPY 控制设备时，不要测量设备消耗的功率。相反，使用发布了 JTAG 的 Go 运行您的应用程序
> 
> 19) C-SPY 在调试过程中利用系统时钟来控制器件。因此，**当 C-SPY 控制设备时，由主系统时钟 (MCLK) 计时的设备计数器等会受到影响**。采取了特殊的预防措施，以尽量减少对看门狗定时器的影响。CPU 内核寄存器被保留。所有其他时钟源（SMCLK、ACLK）和外设在仿真期间继续正常运行。换句话说，**Flash Emulation Tool 是一种部分侵入式工具**。
> 
> 支持时钟控制（仿真器 → 高级 → 时钟控制）的设备可以通过在调试期间选择停止时钟来进一步减少这些影响
> 
> 24)**正常程序执行期间读取时清除的外设位**（即中断标志）**在调试时读取时清除**（即内存转储、外设寄存器）。
> 
> 使用某些 MSP430 器件（例如 MSP430F15x、MSP430F16x、MSP430F43x 和 MSP430F44x 器件）时，位不会以这种方式运行（即，位不会被 C-SPY 读取操作清除）。
> 
> 26)**当单步激活并启用中断时，可能会出现只有中断服务程序 (ISR) 处于活动状态**（即，非 ISR 代码永远不会执行，单步操作总是在第一行停止的 ISR）。但是，这种行为是正确的，因为设备总是在处理非 ISR（即主线）代码之前处理一个活动且已启用的中断。此行为的解决方法是在 ISR 中禁用堆栈上的 GIE 位，以便在退出 ISR 后禁用中断。这允许调试非 ISR 代码（但没有中断）。稍后可以通过在寄存器窗口的状态寄存器中设置 GIE 来重新启用中断。
> 
> 在具有时钟控制仿真功能的设备上，可以在单步之间暂停时钟并延迟中断请求（仿真器 → 高级 → 时钟控制）。

要尝试的一件事是注释掉所有低功耗代码并查看您的 UART 代码是否可以这样工作。然后返回并尝试重新启用低功耗模式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-18T08:45:49.800

这个问题的答案在于调试设置，更具体地说，在于使用了哪些类型的断点。我有一系列非常复杂的宏，它们在程序上传时运行，它们将各种挂钩设置到内存中以进行测试。这些钩子依赖于*软件*创建断点，然后调用应用程序外部的函数。我发现在正常使用中使用这些断点没有问题，但是它们的存在意味着调试会话不会实时运行（即，设备受主机 PC 的控制）。由于我尚未完全了解的原因，这在尝试调试中断和低功耗模式时引起了问题。（我怀疑如果我再深入一点，我会发现在调试时需要使用时钟控制，但我会留到另一天）。

因此，为了解决这个问题并允许我调试我的中断和低功耗模式繁重的代码，我已经将它们移植到我的更大的应用程序状态机中，我必须执行以下操作：

1.  **Disable software breakpoints within IAR.**
    They're not actually enabled by default, but if you've been doing clever things with macros like I had, you probably would've needed to enable them, since there just aren't enough hardware breakpoints available in most MSP430s (for instance, I only have two in the MSP430F2013, and C-SPY more often than not hogs one of those!). The obvious downside to this is that debugging becomes a bit more laborious, but at least it's reliable.
2.  **Remove links to .mac Macro files.**
    In other words, if you're using macros, don't. In my case, this meant that I had to hack some state machine logic in order to force myself down a certain route (that previously the macro had been doing for me). This clearly isn't ideal, but it will allow you to debug the interrupt/low power mode code. The macros can then be re-enabled afterwards.

So it turned out that there wasn't a problem with my port after all. I'm not particularly happy with this hacky solution, but at least it's a step forward. If I have the time, I'll investigate to see if I can work out a way of using software breakpoints and add to this answer.

# jquery - 同一选项卡中的选项卡链接

> ID：12463878
> 
> 赞同：2
> 
> 时间：2012-09-17T16:55:35.497
> 
> 标签：jquery, html, hyperlink, tabs

我有一个选项卡，它工作得很好，但我不能在这个选项卡的对话框中放置链接或按钮，它会将我发送到同一选项卡中的另一个窗口（我在第一个窗口中并单击我想要的按钮让我打开第二个窗口）。我还在您的论坛中阅读了其他类似的帖子，但我无法使其正常工作。

我的代码：

```
<div id="biztabs">

    <ul>
      <li><a href="#tab-1">Overview</a></li>
      <li><a href="#tab-2">Photo</a></li>
      <li><a href="#tab-3">Video</a></li>
    </ul>

   <div id="tab-1">
   <p>Nell'anno 1969 è bastata la potenza di calcolo di due Commodore 64 per mandare con successo una navicella sulla Luna; nell'anno 2003 è necessario un Pentium 4 a 2000 Mhz per far funzionare Windows XP. Qualcosa deve essere andato storto.</p>
    <a href="#tab-2">A INTERNAL LINK TO TAB 2</a>
   </div>
    <div id="tab-2">
    <p>Un bambino chiede al padre cosa fossero le icone,il padre risponde: "Sono immagini sacre" E il figlio:"E perchè Windows ne ha tante?" Il padre:"Perchè per farlo funzionare ci vuole un miracolo!!!"</p>
    </div>
    <div id="tab-3">
    <p>La mia stampante ogni tanto ha la carta esaurita , forse dovrei portarla da uno psicologo ?</p>
    </div>
</div> 
```

我的脚本：

```
<script>
jQuery(function() {
jQuery( '#biztabs' ).tabs();
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T17:05:09.570

尝试使用 jQuery 选项卡方法`select`

HTML：

```
 <div id="biztabs">
    <ul>
      <li><a href="#tab-1">Overview</a></li>
      <li><a href="#tab-2">Photo</a></li>
      <li><a href="#tab-3">Video</a></li>
    </ul>

    <div id="tab-1">
        <p>Nell'anno 1969 è bastata la potenza di calcolo di due Commodore 64 
           per mandare con successo una navicella sulla Luna; nell'anno 2003 è
           necessario un Pentium 4 a 2000 Mhz per far funzionare Windows XP. 
           Qualcosa deve essere andato storto.</p>
        <a id="to-tab-2" href="javascript:void(0)">A INTERNAL LINK TO TAB 2</a>
    </div>
    <div id="tab-2">
        <p>Un bambino chiede al padre cosa fossero le icone,il padre risponde: 
           "Sono immagini sacre" E il figlio:"E perchè Windows ne 
           ha tante?" Il padre:"Perchè per farlo funzionare ci vuole 
           un miracolo!!!"</p>
    </div>
    <div id="tab-3">
        <p>La mia stampante ogni tanto ha la carta esaurita , forse dovrei
           portarla da uno psicologo ?</p>
    </div>
</div> 
```

jQuery：

```
$(function(){
    $("#biztabs").tabs();
    $("#to-tab-2").click(function(){  
         $("#biztabs").tabs("select", 1); // switch to second tab
         return false;
    });
}) 
```

# facebook - 更改 facebook 页面应用程序高度

> ID：12463882
> 
> 赞同：-1
> 
> 时间：2012-09-17T16:56:09.683
> 
> 标签：facebook, iframe, height

在开始之前，我已经搜索了很长时间并阅读了很多帖子，Facebook页面应用程序与普通应用程序不同，至少在高度方面。

我有一个在 facebook 的 iframe 内运行的 facebook 页面应用程序（在 facebook 页面内运行）。iframe 有一个特定的高度，我想更改它以避免内部滚动条。

[关联](http://www.facebook.com/pages/Test/116248295095196#!/pages/Test/116248295095196?sk=app_123770137768831)

应用程序设置中没有关于高度参数的内容。

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T16:59:26.733

进入[http://facebook.com/developers](http://facebook.com/developers) -> 点击您的应用程序 -> “基本”菜单项 -> 有一个名为**App on Facebook**的部分。有画布的参数（**宽度**和**高度**）。

希望能帮助到你。

# liferay - 使用钩子将站点添加到 Liferay 中的组织

> ID：12463893
> 
> 赞同：0
> 
> 时间：2012-09-17T16:56:39.650
> 
> 标签：liferay

当使用钩子创建组织并将侦听器添加到组织实体时，我正在尝试为组织创建站点。

我使用数据库创建站点`GroupLocalServiceUtil`并进行设置`siteName = String.valueOf(org.getOrganizationId()) + "LFR_ORGANIZATION" + org.getName()`。

当您在liferay中创建站点到组织时，我已经设置`className`并喜欢它，但没有任何反应。`classPK`站点创建成功，但未与组织连接。

UPD。Liferay 6.1 GA1

```
public Group addSite(Organization org) throws PortalException, SystemException
{
    ServiceContext serviceContext = new ServiceContext();
    String siteName = String.valueOf(org.getOrganizationId()) + "LFR_ORGANIZATION" + org.getName();

    Group newSite = GroupLocalServiceUtil.addGroup(
            getDefaultUserId(),
            "com.liferay.portal.model.Organization",    // Class Name
            org.getOrganizationId(),                    // Class PK
            siteName ,                                  // Name
            "",                                         // Description
            GroupConstants.TYPE_SITE_PRIVATE,           // Type
            org.getTreePath(),                          // Friendly URL
            true,                                       // Site
            true,                                       // Active
            serviceContext);

    OrganizationUtil.addGroup(org.getPrimaryKey(), newSite);

    return newSite;
} 
```

如何以编程方式创建这样的组织站点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T23:31:59.603

在 Liferay 6.1 中，当您创建一个组织时，似乎已经有一个支持组。`boolean site`根据您传递的参数，该组可能不可见：

```
OrganiztionLocalServiceUtil.addOrganization(
    long userId, long parentOrganizationId, String name, String type,
    boolean recursable, long regionId, long countryId, int statusId,
    String comments, boolean site, ServiceContext serviceContext) 
```

要使该站点对页面可见，只需调用：

```
OrganiztionLocalServiceUtil.updateOrganization(
    long companyId, long organizationId, long parentOrganizationId,
    String name, String type, boolean recursable, long regionId,
    long countryId, int statusId, String comments, boolean site,
    ServiceContext serviceContext) 
```

`site`参数设置为`true`.

# jquery - 使用 JQuery 和 JSON 数据创建 Div

> ID：12463896
> 
> 赞同：3
> 
> 时间：2012-09-17T16:57:07.153
> 
> 标签：jquery, ajax, json

我在下面有一些 JSON 数据，我想`div`使用 jQuery 创建一个 HTML，其中包含来自 AJAX JSON 响应的一些数据。将`div`在成功代码中创建：

```
<script type="text/javascript">
    $(document).ready(function() {
        $("#add-notes-form").submit(function(e){
            e.preventDefault();
            $.ajax({
                 type: 'POST',
                 url: '<?php the_permalink(); ?>',
                 dataType: 'json',
                 data: $("#add-notes-form").serialize(),
                 success: function(result){
                     $("#tab7 form").after("Code needs to go here");
                 }
             });
         });
    });
</script> 
```

JSON数据：

```
{"comment_ID":"2",
 "comment_post_ID":"396",
 "comment_author":"Me",
 "comment_author_email":"me@gmail.com",
 "comment_author_url":"http:\//gmail.com",
 "comment_author_IP":"",
 "comment_date":"2012-09-17 09:21:19",
 "comment_date_gmt":"2012-09-17 16:21:19",
 "comment_content":"This is a killer Note. 4",
 "comment_karma":"0",
 "comment_approved":"1",
 "comment_agent":"",
 "comment_type":"note",
 "comment_parent":"0",
 "user_id":"1"} 
```

我正在尝试创建的 HTML：

```
<div id="comment-2" class="binder-user-note">
    <a href="?delete=2" id="close-note"></a>
    <h1>I added this on: Monday 17th September 2012</h1>
    <p>This is a killer Note. 2</p>
    <a href="edit?2" id="editnote"></a>
</div> 
```

到目前为止我所拥有的：

```
<div id="comment-'+response.comment_ID+'" class="binder-user-note">
    <a href="?delete='+response.comment_ID+'" id="close-note"></a>
     <h1>I added this on: '+response.comment_date+'</h1>
     <p>'+response.comment_content+'</p>
     <a href="edit?'+response.comment_ID+'" id="editnote"></a>
</div> 
```

`response`是对象。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T17:09:59.047

```
success: function(result){
     var jSon = result.Data;
     var div = $("<div></div>")
           .attr("id", "comment" + jSon.comment_ID)
           .addClass("binder-user-note");
     var a = $("<a></a>")
           .attr("href", "?delete=" + jSon.comment_ID)
           .attr("id", "close-note");
     $("<h1></h1>").text("I added this on: " + jSon.comment_date)
           .appendTo(a);
     $("<p></p>").text(jSon.comment_content)
           .appendTo(a);
     $("<a></a>")
           .attr("href", "edit?" + jSon.comment_ID)
           .attr("id", "editnote")
           .appendTo(a);
     a.appendTo(div)
     $("#tab7 form").after(div);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-18T09:43:53.927

我总是觉得这样的代码真的很乱。我个人更喜欢做这样的事情，ymmv：

```
success:function(result){
    var html = "<div id='comment-"+result.comment_ID+"' class='binder-user-note'>" +
               "<a href='?delete="+result.comment_ID+"' id='close-note'></a>" +
               "<h1>I added this on: "+result.comment_date+"</h1>" +
               "<p>"+result.comment_content+"</p>" +
               "<a href='edit?"+result.comment_ID+"' id='editnote'></a>" +
               "</div>";

    $("#tab7 form").after(html);
    $('#add-notes-form textarea').attr('value','');
} 
```

享受，

硅

# css3pie - CSS3 PIE - 没有服务器端？

> ID：12463899
> 
> 赞同：1
> 
> 时间：2012-09-17T16:57:18.680
> 
> 标签：css3pie

我正在使用不允许服务器端访问的托管 CMS。除非我弄错了 CSS3 Pie 需要服务器端代码才能正常工作。( `.htaccess`)

有没有办法在没有服务器端访问的情况下使用 CSS3 Pie（或其他类似类型的服务）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T17:05:43.837

有以下三种方式：

*   使用 .htaccess 添加 mime 类型
*   使用提供的 PHP 文件添加 mimetype

*   使用 pie-js：[http ://css3pie.com/documentation/pie-js/](http://css3pie.com/documentation/pie-js/)

正如他们的页面上提到的：

> **JS版本的优点**
> 
> 由于它是一个普通的 .js 文件，因此 PIE.js 不会受到 PIE.htc 行为的一些更烦人的限制：
> 
> 您可以从与 HTML 页面不同的域加载 PIE.js。您不必担心您的服务器没有为文件使用正确的 Content-type 标头。通过相对路径引用 PIE.js 文件更简单，因为您只需在每个 HTML 页面中执行一次。它更容易集成到 JavaScript 库中。
> 
> **JS版本的缺点**
> 
> 不幸的是，使用 PIE.js 有一些明显的缺点，这就是为什么 .htc 行为仍然是大多数用户推荐的方法：
> 
> 调用它需要编写一些 JavaScript，这意味着您的样式分散在 CSS 和 JS 代码之间。.js 文件在页面加载时阻止解析，而 .htc 文件异步加载。您必须等到页面的 DOM 完全加载后才能将 PIE.js 应用于元素，而 .htc 行为会在页面仍在加载时自行应用。这意味着 PIE.js 的“无样式内容闪现”问题要严重得多。PIE.js 不能自动附加和分离从页面 DOM 中动态添加/删除的元素，因此您必须自己编写代码来处理它。

# ruby-on-rails - 在循环表中使用 if 语句

> ID：12463900
> 
> 赞同：0
> 
> 时间：2012-09-17T16:57:25.217
> 
> 标签：ruby-on-rails, ruby

我有两种型号，一种带有卡片，另一种带有相关的奖励计划。我将它们全部显示在一个表中，在某些列中带有条件 if 语句，但我无法弄清楚为什么 if else 语句会搞砸我的列。我发布了两个示例，一个有效，一个无效。我需要第二个来添加一些额外的功能

这个例子有效

```
 <table>
    <tr>
        <th>Card</th>
        <th>General Rewards</th>
        <th>Gas Amount</th>
        <th>Movies Amount</th>
        <th>Museums Amount</th>
        <th>Theme Park Amount</th>
        <th>Restaurant Amount</th>
        <th>Department Store Amount</th>
    </tr>

    <% @cards.each do |card| %>
    <tr>
        <td><%= card.name %></td>
        <td><%= card.general_rate %> </td>
        <% card.rewards.each do |category| %>
        <% if category.name.downcase == "gas" %>
        <td><%= category.threshold_check(@gas) %></td>
        <% end %> 
        <% if category.name.downcase == "movies" %>
        <td><%= category.threshold_check(@movies) %></td>
        <% end %> 

        <% if category.name.downcase == "museums" %>
        <td><%=  category.threshold_check(@museums) %></td>
        <% end %> 
        <% if category.name.downcase == "theme parks" %>
        <td><%=  category.threshold_check(@theme_parks) %></td>
        <% end %> 
        <% if category.name.downcase == "restaurants" %>
        <td><%=  category.threshold_check(@restaurants) %></td>
        <% end %> 
        <% if category.name.downcase == "department stores" %>
        <td><%=  category.threshold_check(@department_stores) %></td>
        <% end %> 
        <% end %>
    </tr>
    <% end %>
</table> 
```

这会在末尾添加额外的列

```
 <table>
    <tr>
        <th>Card</th>
        <th>General Rewards</th>
        <th>Gas Amount</th>
        <th>Movies Amount</th>
        <th>Museums Amount</th>
        <th>Theme Park Amount</th>
        <th>Restaurant Amount</th>
        <th>Department Store Amount</th>
    </tr>

    <% @cards.each do |card| %>
    <tr>
        <td><%= card.name %></td>
        <td><%= card.general_rate %> </td>
        <% card.rewards.each do |category| %>
        <td><%= category.name.downcase == "gas" ? category.threshold_check(@gas) : 0 %></td>
        <td><%= category.name.downcase == "movies" ? category.threshold_check(@movies) : 0 %></td>
        <td><%= category.name.downcase == "museums" ? category.threshold_check(@museums) : 0 %></td>
        <td><%= category.name.downcase == "theme parks" ? category.threshold_check(@theme_parks) : 0 %></td>
        <td><%= category.name.downcase == "restaurants" ? category.threshold_check(@restaurants) : 0 %></td>
        <td><%= category.name.downcase == "department stores" ? category.threshold_check(@department_stores) : 0 %></td>
        <% end %>
    </tr>
    <% end %>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T17:24:59.403

如果您注意到您的 2 个版本之间的主要区别是第一个版本，如果您的条件不符合，您将不会发出`<td></td>`

另一方面，您的第二个版本确实`<td></td>`与条件句是否为真无关。也许这可能是您额外专栏的来源。

*PS 在您的第一个示例中，我认为您有错字，但`<%= category.threshold_check(@movies) %>`没有开头`<td>`，并且结尾`</td>`在 if 语句之外。*

# asp.net - CSV 到 Windows 服务器上的 Json

> ID：12463901
> 
> 赞同：0
> 
> 时间：2012-09-17T16:57:32.927
> 
> 标签：asp.net, json, csv

我是一名前端 Web 开发人员，我正在尝试将 CSV 文件转换为服务器上的 Json。该服务器是一个带有 asp.net 的 windows 服务器。我认为这将是一件简单的事情，但在谷歌搜索了几个小时后，我发现这比我最初的想法要难一些。我看到网上有一堆转换器，您可以将代码粘贴到其中并进行一次转换，但这些对我不起作用，因为我的 CSV 文件将由另一个程序更新。有谁知道如何使用 .net 进行这种转换或知道一个好的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T18:43:04.683

看看[FileHelpers](http://filehelpers.sourceforge.net/)。

用它来阅读您的 CSV。

您应该能够使用[Json.Net](http://james.newtonking.com/pages/json-net.aspx)来输出 Json。

# angularjs - AngularJS 中的绑定和消化是如何工作的？

> ID：12463902
> 
> 赞同：76
> 
> 时间：2012-09-17T16:57:34.643
> 
> 标签：angularjs

将 AngularJS 与其他 JavaScript-MVC 框架区分开来的一件事是它能够使用绑定将 JavaScript 中的绑定值回显到 HTML 中。当您为 $scope 变量分配任何值时，Angular 会“自动”执行此操作。

但这有多自动化？有时，Angular 不会接受更改，所以我需要调用 $scope.$apply() 或 $scope.$digest() 来通知 Angular 接受更改。有时，当我运行其中任何一种方法时，它都会引发错误并说摘要已经在进行中。

由于绑定（{{}} 大括号或 ng 属性中的任何内容）都与 eval 相呼应，这是否意味着 Angular 会不断轮询 $scope 对象以查找更改，然后执行 eval 以将这些更改推送到 DOM/ HTML？或者 AngularJS 是否以某种方式找出了使用魔法变量，这些变量会在变量值更改或分配时触发事件？我从未听说过所有浏览器都完全支持它，所以我对此表示怀疑。

AngularJS 如何跟踪它的绑定和作用域变量？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-09-19T08:52:58.257

除了 Mark 发现的[文档部分](http://docs.angularjs.org/guide/concepts#runtime)，我认为我们可以尝试列举所有可能的变化来源。

1.  用户与 HTML 输入（['text'](https://github.com/angular/angular.js/blob/ca30fce28ca13284bfa1c926e810ed75cdcde499/src/ng/directive/input.js#L378)、['number'](https://github.com/angular/angular.js/blob/ca30fce28ca13284bfa1c926e810ed75cdcde499/src/ng/directive/input.js#L498)、['url'](https://github.com/angular/angular.js/blob/ca30fce28ca13284bfa1c926e810ed75cdcde499/src/ng/directive/input.js#L560)、['email'](https://github.com/angular/angular.js/blob/ca30fce28ca13284bfa1c926e810ed75cdcde499/src/ng/directive/input.js#L577)、['radio'](https://github.com/angular/angular.js/blob/ca30fce28ca13284bfa1c926e810ed75cdcde499/src/ng/directive/input.js#L594)、['checkbox'](https://github.com/angular/angular.js/blob/ca30fce28ca13284bfa1c926e810ed75cdcde499/src/ng/directive/input.js#L616)）的交互。AngularJS 有[inputDirective](https://github.com/angular/angular.js/blob/ca30fce28ca13284bfa1c926e810ed75cdcde499/src/ng/directive/input.js#L762)。'text'、'number'、'url' 和 'email' 输入为 'input' 或 'keydown' 事件绑定[侦听器处理程序。](https://github.com/angular/angular.js/blob/ca30fce28ca13284bfa1c926e810ed75cdcde499/src/ng/directive/input.js#L380)侦听器处理程序[调用 scope.$apply](https://github.com/angular/angular.js/blob/ca30fce28ca13284bfa1c926e810ed75cdcde499/src/ng/directive/input.js#L391)。'radio' 和 'checkbox' 为单击事件绑定类似的处理程序。
2.  用户与选择元素的交互。AngularJS 的[selectDirective](https://github.com/angular/angular.js/blob/master/src/ng/directive/select.js#L121)在 'change' 事件上有类似的行为。
3.  使用同样执行[$rootScope.$apply()的](https://github.com/angular/angular.js/blob/f16150d5f1b20b3d633b4402095ea89baa4be042/src/ng/timeout.js#L49)[$timeout 服务](https://github.com/angular/angular.js/blob/f16150d5f1b20b3d633b4402095ea89baa4be042/src/ng/timeout.js#L4)进行定期更改。
4.  [eventDirectives](https://github.com/angular/angular.js/blob/f16150d5f1b20b3d633b4402095ea89baa4be042/src/ng/directive/ngEventDirs.js#L39)（ngClick 等）也使用[scope.$apply](https://github.com/angular/angular.js/blob/f16150d5f1b20b3d633b4402095ea89baa4be042/src/ng/directive/ngEventDirs.js#L47)。
5.  $http 也使用[$rootScope.$apply()](https://github.com/angular/angular.js/blob/209b67df6a49fe1646ce63c5e7d11ed26e8abbc1/src/ng/http.js#L729)。
6.  如您所知，AngularJS 世界之外的更改应该使用 scope.$apply。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-19T00:23:49.000

正如您发现它不是轮询，而是使用它的内部执行循环，这就是为什么您需要使用 $apply() 或 $digest() 来启动事情。

[Miško 的解释](https://stackoverflow.com/questions/9682092/databinding-in-angularjs/9693933#9693933)非常透彻，但缺少一点是 Angular 只是试图让 $scope 在它自己的上下文中发生任何事情时回到一个清晰的内部状态。这可能需要在模型状态之间进行相当多的反弹，所以这也是为什么你不能依赖 $watch() 只触发一次的原因，也是为什么你应该小心手动设置模型之间的关系，否则你会无休止地结束循环刷新。

# mysql - MySQL 锁定提示和查询优化

> ID：12463906
> 
> 赞同：1
> 
> 时间：2012-09-17T16:57:44.463
> 
> 标签：mysql, optimization, locking, query-hints

我需要在共享模式下锁定一个完整的表。如果我执行诸如“select 1 from (select * from mytable lock in share mode) t where 1=2”之类的东西，查询优化器会删除嵌套子查询并基本上使查询变为无操作吗？在我的简单实验中，它没有（这是我需要的）。我想知道这是否是设计上的预期，而不仅仅是意外。锁定完整表的任何其他替代方法？注意：我不能使用“LOCK TABLE READ”，因为它似乎无法在不先释放它的情况下升级为 WRITE 锁。

MySQL 版本：5.1.50 和 5.5.27。

# php - CakePHP - Klarna API - 安装和运行外部应用程序 PHP API

> ID：12463908
> 
> 赞同：0
> 
> 时间：2012-09-17T16:57:46.333
> 
> 标签：php, api, cakephp

我认为这个问题与您在应用程序中下载和运行的大多数 PHP API 有关。我想将[Klarna API](http://integration.klarna.com/en/api/standard-integration)与我的 CakePHP 应用程序集成。现在，我不是一个经验丰富的 CakePHP 程序员，所以我的问题可能非常初级。但是我还没有从概念上弄清楚它是如何与 CakePHP 应用程序中的外部非 CakePHP 软件一起工作的。基本上我该如何设置和使用它。

1.  我将 Klarna 文件放在我的 CakePHP 应用程序中的哪个文件夹中？网络根？
2.  要初始化和配置 Klarna API 以供使用，我是否只需将 Klarna 代码放在控制器中，而不会弄乱任何 CakePHP 组件/插件加载过程？
3.  然后我是否也在控制器中运行 API 代码？
4.  在这种情况下，我不需要使用 cURL 与 Klarna 交谈，对吧？Klarna API 会自己调用 Klarna 的服务器吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T19:50:18.023

如果您已收到来自 Klarna 的测试登录凭据，这是一个工作示例：

1.  从 Klarna 下载 PHP API。[根据在 CakePHP 2.0](https://stackoverflow.com/questions/8158129/loading-vendor-files-in-cakephp-2-0) & [App Class](http://book.cakephp.org/2.0/en/core-utility-libraries/app.html)中加载供应商文件，这些文件应该放在“/Vendors”文件夹中 ，为了组织事情，我将它们放在一个名为“klarna”的文件夹中。Klarna API 包含很多文件，因此可能是个好主意。
2.  您将在相关控制器中初始化和设置 API，或者我至少这样做了。要加载供应商文件，请执行以下操作：App::import('Vendors, 'klarna/klarna');。鉴于 CakePHP 的文件夹结构，我不得不从 .getAddresses 文件示例中修改几行。一个以前是“/transport/xmlrpc-3.0.0.beta/lib/xmlrpc.inc”，现在变成了“/vendors/klarna/transport/xmlrpc-3.0.0.beta/lib/xmlrpc.inc”。下面的两行类似。请记住设置测试帐户“共享密钥”和“商家 ID”以及配置正确的测试服务器。然后，您可以针对 Klarna 的一位测试人员测试 API。
3.  是的，根据示例，Klarna API 的配置和执行都发生在控制器中。不过，这只是普通的 PHP 代码。
4.  我们不需要为此 API 使用 cURL。API 自己处理调用。

# css - 在html5 css3中创建一个多列的页脚

> ID：12463909
> 
> 赞同：0
> 
> 时间：2012-09-17T16:57:50.010
> 
> 标签：css, html, web-applications, footer, multiple-columns

我需要创建一个包含三列的页脚。下面的代码给出了第二张图片而不是第一张；

```
<footer>
    <div id=”footer_links”&gt; </div>
    <div id=”values”&gt;.....</div>
    <div id=”contacts”&gt;.....</div>
    <div id="copyright">.....</div>
</footer> 
```

CSS 代码：

```
footer{
 height: auto;
 padding:1px 15px 1px 20px;
 clear:both;
 }
#footer_links{
float:left;
}
#values{
 float:none;
 padding:0 600px 0 0;
 text-align:justify;
 }
#contacts{
float: right;

}

#copyright{
float:none;
text-align:center;
} 
```

> ![在此处输入图像描述](../Images/857976ff7b1e1b751b71092cb84bc795.png)

![在此处输入图像描述](../Images/be865c32d7f835fdf57bd1b68922647f.png)

如何让我的 div 正确排列而不是像第二个示例中那样偏移？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T17:16:00.330

您可以使用[CSS3 多列](http://www.quirksmode.org/css/multicolumn.html)。

```
div#multicolumns {
    -moz-column-count: 3;
    -moz-column-gap: 20px;
    -webkit-column-count: 3;
    -webkit-column-gap: 20px;
    column-count: 3;
    column-gap: 20px;
} 
```

请参阅链接以获取预览和文档。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-17T17:12:48.210

这是与您想要的结构相似的结构。但仍然不确定您在寻找什么。或者问题到底是什么..

**HTML**

```
<footer>
        <div class="column"></div>
        <div class="column"></div>
        <div class="column"></div>
        <div id="meta-links"></div>
</footer>​ 
```

**CSS**

```
footer {
  width:100%;
  background-color:#CCC;
  min-height:100px;    
}

.column {
  width:30.5%;
  background-color:#333;
  height:100px;
  float:left;
  margin:0 10px;
}

#meta-links {
 width:100%;
 background-color:red;
 float:left;   
 height:20px;
} 
```

**小提琴：**

[http://jsfiddle.net/eYKsm/13/](http://jsfiddle.net/eYKsm/13/)

​</p>

**根据您的编辑进行更新：**

我要做的第一件事是改变你的填充。我要尝试的第二件事是将列向左浮动......例如......

```
footer {
 height: auto;
 padding:1px 15px;
 width:520px;
 }
#footer_links{
 float:left;
 width:150px;  
 border:1px solid #CCC;
 padding:10px;
}
#values {
 width:150px;        
 float:left;
 text-align:justify;
 border:1px solid #CCC;
 padding:10px;
 }
#contacts{
float: left;
width:150px; 
border:1px solid #CCC;
padding:10px;
}
#copyright{
float:left;
text-align:center;
border:1px solid #333;
width:514px;
} 
```

此外，如果所有列都具有固定的相等宽度（它们应该）遵循使用网格的设计/用户体验原则，则您不一定需要同时使用 clear。对于我的新小提琴示例，我使用了固定像素宽度。但是，如果您要创建一个流畅的布局，您可以通过计算内部宽度（不包括填充）并将其除以三来使用百分比。至于页脚，它可以以 100% 的宽度向左浮动；

要记住的另一件事是，如果您的列都具有相同的宽度和填充，则不需要为每个容器使用 ID。你可以像我上面的例子那样使用一个类。

**这是我的新小提琴：http:** [//jsfiddle.net/krishollenbeck/Kkr83/1/](http://jsfiddle.net/krishollenbeck/Kkr83/1/) ​</p>

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T17:19:35.613

您必须使用`clear: both`、`float:left`和`float:right`。

这是代码：

为了`HTML`

```
<div id = "footer">
    <div id="part1">
        <div id="col1">
            <li>a</li>
            <li>c</li>
            <li>b</li>
        </div>
        <div id="col2">
            <li>a</li>
            <li>c</li>
            <li>b</li>
        </div>
   </div>
   <div id="part2">   
        <li>a</li>
        <li>c</li>
        <li>b</li>
   </div>
</div> 
```

现在来了`CSS`

```
#footer {width: 1000px; }
#part1 {
    width: 500px;
    float:left;
    clear: both;
}
#part 2 {
    float:right;
    width: 500px;
}
#col1 {
    width: 200px;
    float: left;
    clear: both;
}

#col2 {
    width: 200px;
    float: right;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T17:11:44.830

您应该使用样式化的无序列表，而不是 DIV 上的一堆。从语义上讲，DIV 没有任何意义。列表具有内在意义。

```
<ul>
    <li><a href="...">some text</a></li>
    <li><a href="...">some more text</a></li>
    <li><a href="...">more text</a></li>
</ul> 
```

您可以为 UL 设置宽度，并将它们浮动到多列。每列一个。

# c# - 在 WP7 中创建图表

> ID：12463912
> 
> 赞同：-2
> 
> 时间：2012-09-17T16:57:59.477
> 
> 标签：c#, windows-phone-7, xaml, charts

由于我不喜欢花 100 美元购买图表引擎的想法，所以我开始阅读这篇文章：

[Codeguru.com - 如何创建图表](http://www.codeguru.com/csharp/.net/wp7/article.php/c20199/How-to-Create-Charts--Graphs-in-Your-Windows-Phone-Application.htm)

结果看起来很粗糙，有没有办法对这种自制图表的轴进行样式设置和更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T07:26:07.163

当我制作我的应用程序时，我踩到了一个很棒的图表制作库，它叫做[Visifire](http://www.visifire.com/blog/2010/07/19/windows-phone-7-charts/)。我希望它也能帮助你。[msdn](http://code.msdn.microsoft.com/wpapps/Using-Charts-Gauges-in-WP7-a25c6958)上也提供了示例项目

# php - Ajax 变量未发布到 php 页面

> ID：12463919
> 
> 赞同：1
> 
> 时间：2012-09-17T16:58:20.197
> 
> 标签：php, ajax, post, xmlhttprequest

我从 ajax 元素发布时遇到问题。

我创建了一个 php 页面，它从数据库中读取一些数据并呈现一个带有表格的 html 页面。用户可以修改表中的值并将更改提交到数据库。

一切正常，但我需要动态更新部分 html 表的内容。因此，我在页面中放置了一个 tbody 元素，并使用 js 函数将元素加载到 tbody 元素中。我的 js 函数使用一个`XMLHttpRequest`对象来调用另一个 php 页面。第二个 php 页面通过输入的发布变量读取数据库过滤数据并创建一个 html 表，该表被发送回第一个 php 页面。它工作得很好，我的 html 表充满了从数据库中动态读取的数据。

我的问题是当我尝试提交表中更改的数据时：我可以使用 _REQUEST 读取第一个 php 页面的所有元素，但不能读取使用 ajax 创建的部分，因此我无法更新我的数据库。如果我检查发布到第二页的内容，我可以看到表格部分根本没有发布。此外，在第一页中，我可以使用 js 脚本读取表格的元素 ID 和 NAME，因此它们位于第一页但不会发布到第二页。

你有什么建议吗？

# java - 为什么我不能声明参数化的静态类变量？

> ID：12463921
> 
> 赞同：2
> 
> 时间：2012-09-17T16:58:23.217
> 
> 标签：java, generics, static

尝试使用泛型类型创建静态字段无法编译：

```
class MyClass {

    public static Function<Z, Z> blargh = new Function<Z, Z>() {
        public Z apply(Z a) {
            return a;
        }
    };
} 
```

日食 说：

```
Multiple markers at this line
    - Z cannot be resolved to a type
    - Z cannot be resolved to a type
    - Z cannot be resolved to a type
    - Z cannot be resolved to a type
    - The type new Function<Z,Z>(){} must implement the inherited 
     abstract method Function<Z,Z>.apply(Z) 
```

但是用具体类型替换所有`Z`s 就可以了：

```
static Function<Integer, Integer> blargh = new Function<Integer, Integer>() {
    public Integer apply(Integer a) {
        return a;
    }
}; 
```

这里发生了什么？

* * *

语境：

1.  我最初是想弄清楚为什么[这段代码](https://github.com/functionaljava/functionaljava/blob/master/core/src/main/java/fj/Bottom.java)使用方法而不是字段：

    ```
    public static <T extends Throwable> F<T, String> eMessage() {
      return new F<T, String>() {
        public String f(final Throwable t) {
          return t.getMessage();
        }
      };
    } 
    ```

    也许是为了克服这个限制？

2.  该`Function`类型来自谷歌的番石榴库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T17:00:14.953

**编辑**：现在我更好地看到了这个问题。

我认为首先你必须将类型声明为类参数：

```
class MyClass<Z> { 
```

获得可见性，但现在你不能这样使用它的原因是因为静态成员应该在类的所有实例之间共享。但是由于您可以创建具有不同类型参数的实例，因此依赖于特定类型的静态成员将没有意义。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T17:28:15.393

您只能在成员字段上使用类级别的泛型。例如：

```
public class MyClass<Z> {
    private Function<Z, Z> function;
    // ...
} 
```

是正确的。相反，声明它`static`会中断。为什么？

想想`ArrayList`。它的类声明类似于：

```
public class ArrayList<E> extends AbstractList<E> implements List<E>, ... {
    // ...
} 
```

`E`在静态意义上没有上下文，因为静态变量属于 的所有实例`ArrayList`，但`E`每个实例可能不同`ArrayList`：

```
// Here's one ArrayList with E as String
List<String> strs = new ArrayList<String>();
// And another with E as Boolean
List<Boolean> bools = new ArrayList<Boolean>(); 
```

因此，因为可以从实例更改为实例，所以在级别上有一个变量`E`是没有意义的。`E``static`

现在您*可以*使用泛型声明`static`方法，但方式完全不同。例如，`Collections.sort`可以有这样的声明：

```
public static <T> void sort(List<? extends T> list, Comparator<T> comparator) 
```

请注意，`T`它在返回类型之前声明为方法的一部分。这是定义`T`方法内的上下文，并且`T`可能因调用而异。

编辑后备注：在您的情况下，您没有在`Z`任何地方声明，因此无论如何您都无法使用它。请参阅我上面的声明`MyClass`。注意我是如何`<Z>`直接在课堂上使用的？这意味着这`Z`将是某种任意类型。

在您试图弄清楚的情况下，您应该将`Function`其视为表示转换的通用方式。让我们剖析您发布的方法：

```
public static <T extends Throwable> F<T, String> eMessage() {
    return new F<T, String>() {
        public String f(final Throwable t) {
            return t.getMessage();
        }
    };
} 
```

首先，请注意这是一种方法，而不是像您的 OP 这样的静态字段，因此在这里使用泛型是合法的。此外，它是`static`，因此任何泛型都需要在返回类型之前声明。在这里，他们声明`<T extends Throwable>`，因此`T`必须是某种扩展的错误或异常`Throwable`。返回类型是`F<T, String>`，它是一个接受`T`(a `Throwable`) 并返回 a的函数`String`。实际对象声明了一个`f`方法，该方法通过调用`Throwable.getMessage`. 由于项目是functionjava，一切都是基于`F`类的，所以泛型无处不在。

只要记住：

1.  在类级别声明的泛型只能由非静态成员和方法使用。
2.  在方法级别声明的泛型是允许的，但不要引用类级别的类型，而是引用在返回类型之前声明的类型。
3.  根本不允许在静态字段级别声明的泛型，因为它们永远不会为其具体类型提供上下文。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T16:17:19.420

我认为最简单的答案可能是：尽管 JDK 编译器在解释泛型方面很灵活，但鉴于代码的语义，不可能修改或指定“Z”类。

在所有泛型的使用中，您必须定义一种语法，该语法指定正在操作的泛型类的标识。例如（如上例所示）。

1) 使用通用的、参数化的效用函数。在这种情况下，它对编译器来说是显而易见的，因为指定的类是作为函数的输入发送的。

2) 将类本身定义为通用且非静态的。这将要求该类的用户使用正确指定的类参数来声明它。

具体来说，对于 Function 类，您明确定义了一个受约束的类：一个将“Z”作为输入，并返回“Z”作为输出的类。如果你想生成它，你可以创建一个 FunctionFactory 类，例如，它接受 Z 的单个实例，并返回一个类型指定的函数 type ：

```
public static <Z> Function<Z,Z> functionFactory(final Z default){
                    return new Function<Z,Z>(){
                        @Override
                        public Z apply(Z input) {
                        // TODO Auto-generated method stub
                        if(input==null)
                                         return default;
                                    else 
                                         return input;
                        }
                    };
            } 
```

# java - 整数或布尔值的 toString() 不返回对象 ID

> ID：12463923
> 
> 赞同：2
> 
> 时间：2012-09-17T16:58:37.073
> 
> 标签：java, object, tostring

我有一组代表数字逻辑门的类，我想创建一个 toString() 命令，它将递归地通过并打印它们。问题是它们可以包含 Gate、Boolean 或 Integer，当我调用 Boolean.toString() 或 Integer.toString() 时，会打印对象 ID 而不是分配的值。有没有办法在这些对象上一般调用 toString() （或类似的）命令并让它们打印分配的值？

使用下面的代码，输出类似于：“AND([I@6ca1c,[Z@1bf216a)”

我希望它看起来像：“AND(11,true)”

```
public static class Gate{
    public Object in1;
}

public static class ANDgate extends Gate{

    public Object in2;

    public ANDgate(Object first,Object second){
        in1 = first; // these can be Integer, Boolean, or another Gate
        in2 = second;
    }
    public String toString(){
        return("AND(" + in1 + "," + in2 + ")");
    }
}

public static class NOTgate extends Gate{

    public NOTgate(Object obj){
        in1 = obj; // this can be Integer, Boolean, or another Gate

    }
    public String toString(){
        return("NOT(" + in1 + ")");
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-17T17:04:28.227

您的输出清楚地表明您传递`int[]`并`boolean[]`进入您的构造函数，而不是`Integer`您`Boolean`所说的（参见[`Class.getName()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getName%28%29)二进制类型名称的含义，例如`[I`）。

如果这是预期的，那么您需要提供自己的函数来将数组转换为`String`并使用它，而不是使用`toStirng()`为数组返回基于哈希值的默认实现。

# algorithm - 从祖先矩阵构造树

> ID：12463926
> 
> 赞同：1
> 
> 时间：2012-09-17T16:58:45.097
> 
> 标签：algorithm, tree

为具有 n 个节点的树给出一个矩阵 M[n, n]。在给定的矩阵 M 中，如果节点 j 是节点 i 的祖先，则 M[i, j] 为真。从给定的矩阵构造树。

例如，您在下面给出了矩阵。

```
 1  2  3  4
1  0  1  1  0

2  0  0  1  0

3  0  0  0  0

4  0  1  1  0 
```

您需要构建下面的树。在构造的树上的祖先关系应该是正确的。节点可以位于其父节点的左侧或右侧，因为您无法从祖先矩阵中确定此信息

```
矩阵中使用的节点编号在括号中
                        5(3)
                         |     
                         |   
                        10(2)
                        / \
                       / \
                   12(1) 13(4)

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T19:27:37.160

[http://en.wikipedia.org/wiki/Topological_sorting](http://en.wikipedia.org/wiki/Topological_sorting)有很好的算法，应该适用于这种情况

# pointers - Cocos2d：有一个指向父类指针的指针可以吗？

> ID：12463930
> 
> 赞同：0
> 
> 时间：2012-09-17T16:59:01.180
> 
> 标签：pointers, opengl-es, cocos2d-iphone, ccsprite

愚蠢的问题。Cocos2d 是围绕父子层次结构构建的。我想知道是否可以有一个父类（例如GameScene）并使用指向父类成员（例如CCSpriteBatchNode *）的指针初始化一个子类（例如SpriteHandler）。

我正在尝试这样做以优化 CCSpriteBatchNodes 的数量。这是我的主类（GameScene 风格）的代码片段。

```
#import <Foundation/Foundation.h>
#import "cocos2d.h"

enum ShooterSceneLayerTags {
    HudLayerTag = 0,
    };

@interface ShooterScene : CCLayer {
    CCSpriteBatchNode* sharedSpriteBatchNode;
}

-(id) initWithSharedBatchNodeReference:( CCSpriteBatchNode*) sharedSpriteBatchNode;
+ (id) sceneWithId:(int)sceneId;
 @end

#import "ShooterScene.h"
#import "MainMenuScene.h"

//Layers
#import "LevelSpritesLayer.h"
#import "HudLayer.h"

@interface ShooterScene (PrivateMethods)
-(void) addLayers:(int)sceneId;
-(void) loadGameArtFile;
-(BOOL) verifyAndHandlePause;
@end

@implementation ShooterScene

+ (id) sceneWithId:(int)sceneId
{
    CCScene *scene = [CCScene node];

    ShooterScene * shooterLayer = [[self alloc] initWithId:sceneId];
    [scene addChild:shooterLayer];

    return scene;    
}

-(id) initWithId:(int)sceneId 
{
    if ((self = [super init]))
    {
        //Load game art before adding layers - This will initialize the batch node
        [self loadGameArtFile:sceneId]; 

        //Will add sprites to shared batch node for performance
        [self addLayers:sceneId];
        [self addChild:sharedSpriteBatchNode];

        //Do other stuff..
        [self scheduleUpdate];

    }
    return self;

}

-(void) addLayers:(int)sceneId
{
    LevelSpritesLayer * levelData = [LevelSpritesLayer node];
    [levelData initWithSharedBatchNodeReference:sharedSpriteBatchNode];

    [self addChild:levelData];

    switch (sceneId) {
        case 1:
            [levelData loadLevelOneSprites];
            break;
        case 2:
            [levelData loadLevelTwoSprites];
            break;            
        default:
            break;
    }

    HudLayer * hud = [HudLayer node];
    [hud setUpPauseMenu];
    [self addChild:hud z:1 tag:HudLayerTag];
}

-(BOOL) verifyAndHandlePause
{
    HudLayer * hud = [self getChildByTag:HudLayerTag];
    if(hud.pauseRequested){
         [[CCDirector sharedDirector] replaceScene:[MainMenuScene scene]];

        return true;
    }
    else {
        return false;
    }

}
-(void) update:(ccTime)delta
{
    if([self verifyAndHandlePause]==false)
    {
        //Continue with animation etc.. 

    }
}

/**
 This is tricky. Could have loaded this in LevelData but as I am expecting to use the same SpriteSheet for HudLayer as well then 
 I prefer to have the control here of this. Also, the same sheet could be used for more level, hence specific function is not bad 
 **/
-(void) loadGameArtFile:(int) sceneId
{
    CCSpriteFrameCache* frameCache = [CCSpriteFrameCache sharedSpriteFrameCache];
    [frameCache addSpriteFramesWithFile:@"game-art-hd.plist"];

    sharedSpriteBatchNode = [CCSpriteBatchNode batchNodeWithFile:@"game-art-hd.png"];
}

//As dealloc is deprecated, I prefer to remove unused sprites and texture on cleanup
-(void) cleanup
{
    [[CCSpriteFrameCache sharedSpriteFrameCache] removeUnusedSpriteFrames];     
} 
```

**这里是 loadLevelData 方法之一，它使用 sharedSpriteBatchNodeReference**

```
-(void) loadLevelOneSprites
{
    //Just a proof of concept example
    testSprite = [CCSprite spriteWithSpriteFrameName:@"File0.png"];
    testSprite.anchorPoint = CGPointMake(0.5f, 0.5f);
    testSprite.position = CGPointMake(160.0f, 240.0f);
    [sharedSpriteBatchNodeReference addChild:testSprite];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T22:52:19.387

你可以这样做，但如果你使用 ARC，你应该让你的 sharedSpriteBatchNode 成为一个弱指针。如果你不这样做，你最终可能会得到一个**循环引用**。

循环引用将发生的情况是，当 Director 在完成运行游戏场景后释放您的游戏场景时，您的孩子仍将保留它，而您的游戏场景仍将保留该孩子。这个圈子会飘起来，永远无法释放，因为它被遗弃了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-18T08:33:47.993

[本]说的。它不应该是保留或强引用，后者是 ARC 中实例变量的默认值。

即使您使用强引用，也有一种方法可以确保在 ARC 下保持循环安全。覆盖 cleanup 方法并在此处清除引用（在 MRC 下，如果您保留了引用，您还应该在此处调用 release）：

```
-(void) cleanup
{
    sharedSpriteBatchNode = nil;
    [super cleanup];
} 
```

在 dealloc 中这样做是行不通的。只要子节点对父节点有强引用，它就不会被释放。因此，您需要在清理中执行此操作，并确保可以设置清理标志的所有方法调用都将该参数设置为 YES。

但是还有其他的，我认为比在初始化程序中传递父节点更好的解决方案。例如，您可以通过父节点的公共标签获取共享批处理节点，并且每次需要时都这样做（将其包装成一个小函数）或将其存储在弱（非保留）实例变量中：

```
// onEnter is typically called right after init (during addChild)
// parent is already set here
-(void) onEnter
{
    [super onEnter];

    CCSpriteBatchNode* sharedBatchNode = [parent getChildByTag:kSharedBatchNodeTag];
} 
```

或者获取父类并转换它，假设 sharedBatchNode 是父类的属性：

```
-(void) whereEver
{
    ShooterScene* scene = (ShooterScene*)parent;
    CCSpriteBatchNode* sharedBatchNode = scene.sharedSpriteBatchNode;
    …

    // you can also reduce the above to a single line:
    CCSpriteBatchNode* batch = ((ShooterScene*)parent).sharedSpriteBatchNode;
} 
```

**特别推荐后一种解决方案。**即使您需要经常这样做，它也很快。铸造是免费的，财产访问不超过一个消息发送。只要确保父级实际上是您将其投射到的类的对象。

# java - 扫描一个mysql表并更新一个列

> ID：12463931
> 
> 赞同：0
> 
> 时间：2012-09-17T16:59:08.607
> 
> 标签：java, mysql, sql

我正在尝试扫描一个表，从它的两个列中查询输入，并使用这些输入来更新同一个表的另一列。

我现在正在做的方式是：扫描表格提取值：

```
SELECT key, col1,col2 from table1; 
```

然后我为每一行做一个昂贵的操作：

```
someComputedValue = someComplicatedFunction(col1,col2) 
```

然后使用另一个更新查询对其进行更新

```
Update mytable where primaryKey = key set col3 = someComputedValue 
```

由于我正在处理的表很大，我想知道是否有某种方法可以在扫描时更新值。基本上每次更新调用只进行一次查询。

**编辑**：我想我没有说清楚。我正在从 java 连接到数据库，complexFunction 不能作为 sql 函数实现（它很复杂）。它将改为在 java 中计算。我认为不可能在 sql 语句中提供 java 函数（是吗？）。这就是为什么我目前必须从数据库中读取值，然后用另一个语句更新它。

所以理想情况下，我想做这样的事情。

> 1.  指向 sql 表中的一行。
>     
>     
> 2.  将值读取到 java 变量中（同时仍指向同一行）
>     
>     
> 3.  更新该行中的另一列

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T17:11:21.390

是的：

```
UPDATE mytable SET col3=someComplicatedFunction(col1,col2); 
```

它很可能会锁定桌子，直到它完成。为了解决这个问题，你可以说一次 10 个，或者通过 WHERE 子句通过数据库外部的某些东西来限制。

另一种解决方案是创建另一个表（列定义省略，因为您没有指定）：

```
START TRANSACTION;
CREATE TABLE temp (key, col3) SELECT key, someComplicatedFunction(col1,col2) FROM mytable;
UPDATE mytable mt, temp tp SET mt.col3=tp.col3 WHERE mt.key=tp.key;
DROP TABLE temp;
COMMIT; 
```

这将分两步完成，理论上允许 temp 花费尽可能长的时间来创建，同时只在 mytable 上放置一个读锁（而不是你会有的写锁）。实际写入 mytable 会非常快。棘手的部分是您仍然不能允许 mytable 在此过程中更改，因为更改可能不会反映在 temp.xml 中。

编辑：（`someComplicatedFunction`必须用Java实现）：

以最简单的形式，是的：您只需连接`SELECT`, 和 foreach 结果，`UPDATE`。

那会很慢。遗憾的是，我不相信 SQL 支持回调或其他任何东西——您需要使用查询来获取数据并使用查询来返回数据。但是，您可以通过只做一个`SELECT`并迭代它来加快速度。根据是否`(col1, col2)`是唯一的，您还*可以*通过选择`(col1, col2)`并基于此进行更新来更快。

但是，您最好的选择可能是使用以下`CASE`语法：

```
UPDATE mytable
    SET myfield = CASE other_field
        WHEN 1 THEN 'value'
        WHEN 2 THEN 'value'
        WHEN 3 THEN 'value'
    END
WHERE id IN (1,2,3) 
```

因此，从包含 的字符串开始`UPDATE mytable SET col3 = CASE key`，然后在循环输入 ( `SELECTED`as `(key, col1, col2)`) 时，计算`col3`并添加行，说`"WHEN "+keyval+" THEN "+col3val`. `key`还要在:的值之后保留一个字符串`keystr+=", "+keyval;`。一旦你完成了所有这些，你只需要添加行`WHERE key IN ("+keystr+");"`。

因此，您可以单次`SELECT`获取所有需要的行，然后由 Java 计算和构建单次`UPDATE`查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T17:04:07.700

```
UPDATE myTable SET col3 = myFunction(col1, col2) WHERE primaryKey = key 
```

应该能带你到那里。

# php - sqlsrv PDO 的性能非常慢

> ID：12463932
> 
> 赞同：0
> 
> 时间：2012-09-17T16:59:09.110
> 
> 标签：php, sql-server, pdo

我一直`mssql_`在我的应用程序上使用函数，但最终屈服于 SO 成员要求更改为 PDO 函数的请求。

然而，微软的 PDO 驱动程序非常慢，从具有 10,000 条记录的表中返回 20 行的请求需要 5 到 10 秒，而`mssql_`函数则需要几毫秒。

有人对此有解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T16:59:09.110

我不确定这是否是理想的解决方案，但我关闭了连接字符串中的连接池，它似乎解决了我的性能问题。

```
server=mymachine.example.com;database=mydb;connectionpooling=0 
```

# security - 减少帐户共享

> ID：12463939
> 
> 赞同：6
> 
> 时间：2012-09-17T16:59:32.167
> 
> 标签：security, web-applications, web

我们有一个网站，客户（一家公司）将为他们的员工购买 X 用户许可证。我们遇到的一个反复出现的大问题是这些公司内部的帐户共享。

我们已经采取了一些措施来缓解其中的一些问题：

*   我们将用户一次限制为 1 个 sessionid（强制注销旧的）
*   我们经常强制用户更改密码（每 4 个月）
*   网站周围有一些提示和我们发送的电子邮件，提醒用户不关心共享
*   当被抓到时，我们会尝试“教育”他们不要再犯了

但这些措施甚至没有解决问题。许多用户，尤其是小公司的用户（购买 1 个许可证并与 5-10 人共享）只是相互协调以不同时使用该站点。可以理解的是，个别员工不在乎，只想做好自己的工作。

管理层要求我们想出办法来解决它。

*   大多数登录来自具有一个 IP 地址的一栋建筑物。所以我们不能简单地通过IP检测。

*   大多数用户都在附近工作，因此他们可以快速共享信息（密码可以通过电子邮件、短信、电话或直接告诉坐在他们旁边的人）

*   有没有办法获取 MAC 地址并使用它？我们可以一次将用户限制为 2 或 3 台设备（以考虑笔记本电脑和平板电脑）

*   或者也许使用一些 JavaScript/Cookie 组合？

管理层实际上正在考虑要求我们每 3 或 4 天向他们的手机发送一条短信进行验证。因为我们知道这会有多麻烦，所以我们希望有更好的东西。

是否还有其他人运行具有类似用户条件的网站？你如何处理问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-17T20:11:09.760

正如其他人所指出的，这实际上更像是一项商业决策，而不是技术决策。

在您所描述的当前情况下，帐户共享实际上是一种间接的[价格歧视](http://en.wikipedia.org/wiki/Price_discrimination)机制：经常使用您的软件并可能从中获得大量价值的公司将为所有员工购买许可证，而那些只是偶尔使用，也不愿意花那么多钱，会少买license，忍受不便。

如果您使共享帐户变得更加困难，则后一个细分市场的客户主要会以两种方式之一做出反应：他们要么掏钱购买额外的许可证，要么他们会认为您的软件不再值得购买，并且切换到竞争产品或不使用。（有些人可能还决定冒险切换到盗版版本，或者决定即使有额外的威慑措施，他们最好的选择仍然是像以前一样继续共享帐户。）

您（或者，更有可能是您公司的管理层）需要确定新许可证增加的收入是否真的足以弥补离开客户带来的收入损失。在某种程度上，这将始终取决于您的市场人口统计数据和竞争程度，但是，就在我的脑海中，我个人的猜测是**“不”**。毕竟，您现有的帐户共享客户已经忍受了相当大的不便，如果他们愿意并且能够为您的软件支付更多费用，他们可能不会这样做。

实际上，使帐户共享更加困难的做法是降低您的软件对小型、临时和/或差的客户的单个许可证的价值。基本上，你会让你的产品变得更糟，并希望客户会购买更多的产品来弥补。虽然这种策略有时*确实*有效，但通常不是下注的方式。

相反，我的建议是接受*确实*发生帐户共享，并调整您的政策和定价策略以适应它。例如，您可以更改您的策略，以便客户可以拥有任意数量的帐户，只要最多只有一定数量的客户同时使用该软件。这样一来，您的定价将更多地基于软件的实际使用情况，而不是基于（相对无意义的）需要偶尔访问它的人数。

您还可以以非线性定价的形式（即您购买的许可证越多，每增加一个许可证越便宜）或作为额外的激励措施（例如更好和/或更便宜的支持服务）为客户提供购买更多许可证的激励措施拥有更多许可证的客户。无论如何，这个想法是为了让试图决定购买多少许可证的客户相信，购买一些备用许可证确实是最简单和最具成本效益的，以防万一。一般来说，在这种情况下，胡萝卜往往比大棒更有效。

当然，作为一名程序员，你个人在这样的决定中可能会或可能不会有太多话要说。尽管如此，至少尝试将这些问题传达给您的管理层可能并没有什么坏处，特别是如果您还可以就如何使您的软件对客户更具吸引力提供具体建议。

您可能建议的一件事是试用活动：您的公司可能不愿意仅仅根据来自 Internet 的猜想和随机建议来彻底改革其许可结构，但他们可能愿意尝试提供一些使用较少的限时许可限制（当然还有更高的价格来弥补），看看他们是否会出售，特别是如果你能告诉他们这在技术上是可行的。

*询问客户*的想法也可能不是一个坏主意。一项简单的匿名调查询问您的客户是否共享帐户，以及如果他们无法共享帐户，他们愿意为每个许可证支付多少费用，这可能会提供令人大开眼界的体验。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-17T17:09:25.160

您是客户，显然希望他们组织中的每个人都能访问。为什么要打呢？您应该根据公司规模更改定价模型。您的客户会很高兴，因为每个人都可以使用该产品，而您会很高兴，因为如果组织规模大，您将获得更多的钱。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T17:26:17.303

我同意 - 您需要更改定价模型以使您的成本与实际使用模式保持一致。就像对“因盗版而损失的收入”的虚假估计一样，不要指望您的实际收入会发生变化。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-17T20:36:41.300

我想您可以一次将软件锁定为一两个安装。一种可能的策略是在用户登录时创建一个带有秘密随机密钥的 cookie。下次用户登录时检查此 cookie 并使用新密钥创建一个 cookie。您必须决定如何让他拥有计算机。

这当然不是万无一失的，因为用户可能会复制 cookie 等，但它需要更专门的 hack 并且更麻烦。

拥有多台计算机、多台浏览器等的用户会抱怨。唯一的解决方案是更改许可方案，使其既适合您的用户需求，又在技术上是可执行的。您的用户可以为他们使用的交易数量、他们查看的页面数量、数据库中的条目数量、搜索数量或类似的东西付费。对于网络上的 Web 应用程序，基于负载的支付更自然、更容易执行。

当管理层给你这个聪明的解决方案的奖金时，用它来支持一个开源项目;-)

# c# - 按键根据自定义搜索跳转到 DropDownList 中的项目

> ID：12463940
> 
> 赞同：0
> 
> 时间：2012-09-17T16:59:35.627
> 
> 标签：c#, asp.net

如何允许用户打开下拉列表，然后键入几个字母以跳转到正确的项目？我需要实现自己的搜索逻辑，因为格式是固定的，不能按原样搜索（都以左括号开头），但我不确定如何挂钩该行为。Jquery 是首选，但任何可以跨浏览器工作的东西都可以。

例子：

(AABE) 能空调

(BAE) 树皮空气设备

键入“ba”应该跳转到第二个条目，等等。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T17:50:25.990

在 jQuery 中，您可以使用 keydown 事件。以下代码可以在这里实时查看：http: [//jsfiddle.net/TXZWC/26/](http://jsfiddle.net/TXZWC/26/)

HTML：

```
<select name="companies">
    <option value="">choose</option>
    <option value="1" data-search-match="AABE">(AABE) Able Air Conditioning</option>
    <option value="2" data-search-match="BAE">(BAE) Bark Air Equipment</option>
</select>

<a id="clear-search" href="#">Clear Search</a> 
```

JS：

```
 $(document).ready(function(){

   var $select = $('select'),
        searchQuery = '';

    $(document).on('keydown', function (e){

        // get the char value and append to search string
        searchQuery += String.fromCharCode(e.which);

        // unselect previously selected option
        deselectSelectedOption();

        // find matching option                
        var $selected = $select.find('option').filter(function(){            
            return $(this).data('search-match') === searchQuery;
        });

        if($selected){
            $selected.attr('selected', 'true');
        }                      
    });    

     $('#clear-search').click(function(e){
       e.preventDefault();
       searchQuery = '';                        
       deselectSelectedOption();
       $select.find('option').first().attr('selected', 'true');
    });

    function deselectSelectedOption(){
        $select.find('option[selected]').removeAttr('selected');     
    }        
});​ 
```

# android - openldap 2.4 使用 Syncrepl 配置复制

> ID：12463943
> 
> 赞同：0
> 
> 时间：2012-09-17T16:59:46.110
> 
> 标签：android, linux, berkeley-db, openldap

我想用 Syncrepl 复制 ldap，我关注[http://www.openldap.org/doc/admin24/replication.html](http://www.openldap.org/doc/admin24/replication.html)。当我启动提供程序时遇到麻烦，该提供程序在日志文件中得到“第 79 行：额外的 .slaptest：错误的配置文件”。请帮助解决我的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T08:31:28.747

syncprov 选项“应该出现在覆盖指令之后”。这并不意味着在同一行：

```
overlay syncprov
syncprov-checkpoint 100 10
syncprov-sessionlog 100 
```

为我工作。

# javascript - CKEDITOR.styleSet.add - 'a' 元素的新样式

> ID：12463945
> 
> 赞同：2
> 
> 时间：2012-09-17T16:59:46.613
> 
> 标签：javascript, ckeditor

出于某种原因，如果我更改`'p'`为`'a'`，它将不再出现在样式列表中。有什么理由吗？

```
CKEDITOR.stylesSet.add('default',[ 
        { name : 'Wys wiersza 1' , 
          element : 'p', 
          styles : { 'line-height' : '18px' } 
         }
]); 
```

- 编辑了代码，我在复制时遗漏了一些括号

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T12:47:53.053

你的问题是括号混乱。此代码将起作用：

```
CKEDITOR.stylesSet.add( 'default',
    [
        {
            name: 'Wys wiersza 1' ,
            element: 'p',
            styles: { 'line-height' : '18px' }
        }
    ]
); 
```

编辑：现在我看到这是一个 CKEditor 错误，因为它仅在`element: 'a'`. 为此创建票证：[https ://dev.ckeditor.com/ticket/9349](https://dev.ckeditor.com/ticket/9349)

# maven - 带有父项目配置的“m2e 插件执行未涵盖...”

> ID：12463955
> 
> 赞同：1
> 
> 时间：2012-09-17T17:00:28.783
> 
> 标签：maven, plugins, m2e

[根据Eclipsepedia 的建议](http://wiki.eclipse.org/M2E_plugin_execution_not_covered#lifecycle_mapping_metadata_provided_by_maven_plugin "Eclipsepedia 建议")，我通过向 pom 添加忽略操作来处理 jslint-maven-plugin 被臭名昭著的“生命周期配置未涵盖的插件执行”错误捕获。

效果很好，如果我在项目的 pom 中有 pluginManagement 部分，或者在我的本地工作区的父项目 pom 中。

但是，如果父级不在我的本地工作区中，它会再次中断，就好像我没有应用修复一样，尽管有效的 pom 仍然显示附加配置。从命令行构建可以正常工作，它似乎只是 IDE UI 无法正常工作。

任何想法为什么会发生这种情况以及我如何解决问题？

Maven 3.0.3 和 m2e 1.0.200。

# php - 如何使用 php 发送欢迎电子邮件和重定向页面

> ID：12463958
> 
> 赞同：0
> 
> 时间：2012-09-17T17:00:37.907
> 
> 标签：php, email

目前我有下面的代码，它将html输入字段（电子邮件）的内容发送到welcome@domain.com地址。我现在正在努力解决两件事。我使用了以下代码无济于事-

```
$to = "welcome@domain.com";
$headers = "From: $email_from \r\n";
$headers .= "Reply-To: $visitor_email \r\n";

mail($to,$email_subject,$email_body,$headers);
//done. redirect to thank-you page.
header('Location: thankyou.html'); 
```

1.  如何自动从welcome@domain.com 发送电子邮件回复？

2.  而不是页面上写着“感谢您与我们联系，我们将很快与我们联系”，有没有办法将它们重定向到 domain.com/thankyou.html？

这是似乎工作正常的其余代码！如果对此有任何建议，尽管他们总是非常受欢迎！

```
if(isset($_POST['email'])) {

$email_to = "welcome@domain.com";
$email_subject = "Your spot has been saved!";
function died($error) {

echo "We are very sorry, but there were error(s) found with the form your submitted";
echo "These errors appear below<br /><br />";
echo $error."<br /><br />";
echo "Please go back and fix these errors<br /><br />";
die();
}

if(
!isset($_POST['email'])
) {
died("We are sorry, but there appears to be a problem with the form your submitted!");
}
$email_from = $_POST['email']; 
$error_message = "";
$email_exp = "^[A-Z0-9._%-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$";
if(!eregi($email_exp,$email_from)) {
$error_message .= "The Email Address you entered does not appear to be valid!<br />";
}
if(strlen($error_message) > 0) {
died($error_message);
}
$email_message = "Form details below.\n\n";
function clean_string($string) {
$bad = array("content-type","bcc:","to:","cc:","href");
return str_replace($bad,"",$string);
}
$email_message .= 'Email: '.clean_string($email_from)."\n";

$headers = 'From: '.$email_from."\r\n".
'Reply-To: '.$email_from."\r\n" .
'X-Mailer: PHP/' . phpversion();
@mail($email_to, $email_subject, $email_message, $headers);
?>
Thank you for contacting us. We will be in touch with you very soon.
<?
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T17:24:15.473

关于未重定向的页面，请参阅此帖子 stackoverflow.com/questions/6396813/php-header-not-redirecting 它基本上说您不能在标头调用之前将任何值输出到流。

对于邮件问题，请详细说明您遇到的错误。

# jquery - 使用复选框选择的 jQuery 过滤

> ID：12463960
> 
> 赞同：3
> 
> 时间：2012-09-17T17:00:41.740
> 
> 标签：jquery, checkbox, filter

我正在尝试创建一个具有两个类别的复选框过滤系统。这些类别将输出每个类别独有的结果。我在这里创建了[小提琴页面](http://jsfiddle.net/B9XAt/5/)来展示我在做什么。我只想显示匹配这两个类别的结果。

HTML 测试如下所示：

```
<div class="filter">
    <form id="partners">
        <h4>Filter by Venue:</h4>
        <input type="checkbox" name="team" value="BBG" />BBG<br />
        <input type="checkbox" name="team" value="BCM" />BCM<br />
        <input type="checkbox" name="team" value="BM" />BM<br />
        <input type="checkbox" name="team" value="BPL" />BPL<br />
        <input type="checkbox" name="team" value="BPP" />PP<br />
        <input type="checkbox" name="team" value="PPZ" />PPZ<br />
    </form>
    <br />
    <h4> Filter by Ages: </h4>
    <form id="ages">
        <input type="checkbox" name="brand" value="aAll" />All Ages<br />
        <input type="checkbox" name="brand" value="aAdults" />Adults<br />
        <input type="checkbox" name="brand" value="aTeens" />Teens<br />
        <input type="checkbox" name="brand" value="a0-18" />0-18 months<br />
        <input type="checkbox" name="brand" value="a1" />1.5-3 years<br />
        <input type="checkbox" name="brand" value="a2" />2.5-5 years<br />
        <input type="checkbox" name="brand" value="a4-7" />4-7 years<br />
        <input type="checkbox" name="brand" value="a7-12" />7-12 years<br />
    </form>
</div>
<hr />
<div class="event">
    Item 1  BPP aAll
    <span class="check BPP aAll"> </span>
</div>
<div class="event">
    Item 2  BCM a2
    <span class="check BCM a2"> </span>
</div>
<div class="event">
    Item 3 BPP aAll
    <span class="check BPP aAll"> </span>
</div>
<div class="event">
    Item 4 BPP a7-12
    <span class="check BPP a7-12"> </span>
</div> 
```

我的 jQuery 看起来像这样：

```
function filterThis() {
    var checked = $('input:checked');
    var venues = $('#partners input:checked').map(function() {
        return this.value;
    }).get();
    var ages = $('#ages input:checked').map(function() {
        return this.value;
    }).get();
    var both = $('input:checked').map(function() {
        return this.value;
    }).get();

    var details = $('.check');
    details.parents('.event').hide();

    if ($('input:checked').length === 0) {
        details.parents('.event').show();
    } else { 
        checked.each(function(index) {
            if (ages.length === 0) {
               console.log(venues[index]);
               $(".check." + venues[index].replace(' ', '.')).parents('.event').show();
            } else if (venues.length === 0) {
               console.log(ages[index]);
               $(".check." + ages[index].replace(' ', '.')).parents('.event').show();
            } else {
               console.log(both[index]);;
               $(".check." + both[index].replace(' ', '.')).parents('.event').show();
            }
        });
    }
}
$('input:checkbox').change(filterThis);​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T17:15:22.203

JQuery`.map()`返回数组，而不是字符串。

代替：

```
$(".check." + both[index].replace(' ', '.')).parents('.event').show(); 
```

和：

```
$(".check." +  both.toString().replace(',', '.')).parents('.event').show(); 
```

# android - 向旧活动发送数据

> ID：12463962
> 
> 赞同：2
> 
> 时间：2012-09-17T17:00:46.317
> 
> 标签：android, android-intent

我正在使用 Flags 开始我的旧 Activity，`Intent.FLAG_ACTIVITY_SINGLE_TOP | Intent.FLAG_ACTIVITY_CLEAR_TOP`但我无法使用以下方法将 String 发送到此 Activity `putExtra`：

```
Intent intent = new Intent(INTENT_ActivityA);
intent.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP | Intent.FLAG_ACTIVITY_CLEAR_TOP);
intent.putExtra("DATA", "OK");
startActivity(intent); 
```

在里面`onResume` `getIntent().getStringExtra("DATA")==null`

如何向正在运行的 Activity 发送数据？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-17T21:10:59.340

如果您覆盖 onNewIntent 我认为您应该将数据放入其中。尝试关注

```
@Override
protected void onNewIntent(Intent intent) {
    super.onNewIntent(intent);
    intent.getStringExtra("DATA");
} 
```

希望能帮助到你！

# php - 如何检查大xml文件的有效性？

> ID：12463963
> 
> 赞同：3
> 
> 时间：2012-09-17T17:00:46.873
> 
> 标签：php, xml, xml-parsing, xml-validation

我有一个大于 100mb 的大 XML 文件，我想检查这个文件的结构是否有效。

我可以尝试用`DOMDocument`;加载这个文件 例如，我可以使用 PHP XML 解析器来阅读它，它“让您解析但不验证 XML 文档”。

有没有办法在不将 XML 文件完全加载到内存中的情况下做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-17T21:39:54.643

首先，您没有说您使用哪种模式进行验证：DTD、XSD、RelaxNG？

其次，您提到了 PHP，但您没有说解决方案是否必须基于 PHP。例如，您可以使用 Java 吗？

一般来说，根据模式验证 XML 文档是一种可流式操作，它不需要在内存中构建 XML 文档的树表示。找到在您的环境中工作的流式验证器应该不难，但我们需要知道环境是什么（以及您使用的模式语言）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T17:16:39.603

我认为您需要查看[XMLReader](http://www.php.net/manual/en/class.xmlreader.php)类。更具体地说， [XMLReader::setSchema](http://www.php.net/manual/en/xmlreader.setschema.php)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T17:13:26.530

想想你在说什么。您想对不在内存中的数据进行操作。这根本没有意义......如果你想从操作中引用它，它最终必须在内存中。

如果您不想一次将数据全部加载到内存中，则可以采用分而治之的方法。如果文件非常大，您可以在多个进程中运行 map reduce 作业，但这不会减少使用的内存量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T17:15:57.497

如果您只想检查 XML 结构是否有效，您可以使用 PHP 的 XML Parser。它不会根据 DTD 验证文档，这就是它不会验证的意思。

如果在解析 XML 结构时发现其无效，则可以返回所有这些[错误代码。](http://us2.php.net/manual/en/xml.error-codes.php)

# data-structures - 如何在构建半边数据结构时找到对边

> ID：12463966
> 
> 赞同：1
> 
> 时间：2012-09-17T17:01:09.770
> 
> 标签：data-structures, cg

我找不到一种有效的方法来生成给定边缘的对边。我的想法只是进行迭代：

```
//construct the opposite half edges
for(int j=0;j<edge_num;j++)
        for(int m=0;m<edge_num;m++)
if(edge[j].vert_end->v_index==edge[m].vert_start->v_index  && 
   edge[j].vert_start->v_index==edge[m].vert_end->v_index )
                {
                    edge[j].pair = &edge[m];
                    edge[m].pair = &edge[j];
                } 
```

关于半边的其他信息是从加载 .M 文件的过程中生成的。我的结构是：

```
class HE_vert{
public:
    GLfloat x, y, z;
    int v_index;
    HE_edge *edge;
};

class HE_face{
public:
    int v1, v2, v3;
    int f_index;
    HE_edge* edge;
};

class HE_edge{
public:
    HE_edge(){ pair = NULL; }
public:
    HE_vert* vert_start;   // vertex at the start of the half-edge
    HE_vert* vert_end;   // vertex at the end of the half-edge
    HE_edge* pair;   // oppositely oriented adjacent half-edge
     HE_face* face;   // face the half-edge borders
    HE_edge* next;   // next half-edge around the face
    int e_index;
}; 
```

我检查了所有的输出信息，它是正确的，但是计算时间很长，尤其是在加载 bunny.M 时。我怎样才能以更有效的方式做到这一点？你能给我一些提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T09:44:10.843

```
// grid[i + vert_num*j] = edge from i to j
int grid[vert_num*vert_num]; // malloc()?

// memset()?
for (int i = vert_num*vert_num - 1; i >= 0; i--)
{
    grid[i] = -1;
}

for (int i = 0; i < edge_num; i++)
{
    int i_from = edge[i]->vert_start->v_index;
    int i_to = edge[i]->vert_end->v_index;
    int pair_index = grid[i_to + vert_num*i_from];

    if (pair_index >= 0)
    {
        edge[i]->pair = edge[pair_index];
        edge[pair_index]->pair = edge[i];
        grid[i_to + vert_num*i_from] = -1;
    }
    else
    {
        grid[i_from + vert_num*i_to] = i;
    }
} 
```

可能的优化：使用链表而不是巨大的数组。每行/列只有大约 1-4 个条目。

# javascript - 移动登陆返回无重定向

> ID：12463967
> 
> 赞同：1
> 
> 时间：2012-09-17T17:01:12.040
> 
> 标签：javascript, javascript-events

我正在尝试制作一个重定向到移动登陆页面的网页。它可以工作，但是在移动登陆页面上，我想在不使用重定向的情况下转到主页，但是，当然，每次我进入主页时，它都会将我重定向到移动登陆页面（当然，当脚本运行时...）。

所以我的问题是：如何将移动登陆页面链接到主页而不在链接到主页时重定向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T02:46:28.603

您可以在移动网站主页的 url 上添加一个参数，例如：

```
<a href="mainpage.html?mredirect=false">Go to full site</a> 
```

然后在主页上检查参数是否存在，然后再进行重定向。

```
var mredirect = getParameterByName("mredirect");
if(!mredirect && isMobile){
  //redirect to mobile site
} 
```

**getParameterByName**：[如何在 JavaScript 中获取查询字符串值？](https://stackoverflow.com/questions/901115/how-can-i-get-query-string-values)

# android - eclipse 无法识别我的布局

> ID：12463968
> 
> 赞同：0
> 
> 时间：2012-09-17T17:01:18.747
> 
> 标签：android, android-layout

我下载了 zxing 库并将其安装在我的设备上。现在我尝试制作一个简单的应用程序扩展 zxing 库。在这个简单的应用程序中，我为它创建了一个新布局，当我尝试将 mycontentview 设置为这个布局时，eclipse 用红色突出显示它，当我在突出显示的布局上移动鼠标指针时，eclipse 建议以下内容：

1-在类型布局中创建字段“activity_firstactivity”或 2-在类型布局中创建常量“activity_firstactivity”

现在，我的问题是：为什么 Eclipse 无法访问此布局的我的 xml 文件，我在布局文件夹中创建了布局但 Eclipse 无法识别它。

更新：即使我按 ctrl+space 布局名称也没有列出

Java 代码：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_firstactivity); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T17:14:04.323

可能 Eclipse 正在尝试在 android 包中查找布局。尝试通过包的全名访问您的布局：

```
your.package.name.R.layout.activity_firstactivity 
```

# c# - 无法为此文件显示设计器，因为无法设计其中的任何类。视觉 C#

> ID：12463969
> 
> 赞同：3
> 
> 时间：2012-09-17T17:01:41.180
> 
> 标签：c#

尝试创建一个新的 Windows 窗体应用程序，但我一直遇到这个问题

在

> System.ComponentModel.Design.Serialization.CodeDomDesignerLoader.EnsureDocument(IDesignerSerializationManager manager) at System.ComponentModel.Design.Serialization.CodeDomDesignerLoader.PerformLoad(IDesignerSerializationManager manager) at Microsoft.VisualStudio.Design.Serialization.CodeDom.VSCodeDomDesignerLoader.PerformLoad(IDesignerSerializationManager serializationManager) at Microsoft.VisualStudio.Design.Serialization.CodeDom.VSCodeDomDesignerLoader.DeferredLoadHandler.Microsoft.VisualStudio.TextManager.Interop.IVsTextBufferDataEvents.OnLoadCompleted(Int32 fReload)

关于问题可能是什么的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-03-06T20:37:49.810

在我的场景中，我需要通过添加几个自定义方法来扩展 UserControl。为此，我创建了一个继承 UserControl 的类，而需要扩展功能的新用户控件将继承扩展控件。

不确定原因是什么，但如果我的编译选项设置为 x64，我遇到了与您报告的相同的问题。将其更改为 AnyCPU 为我解决了这个问题。

# php - 有空格的php yii表列名

> ID：12463972
> 
> 赞同：0
> 
> 时间：2012-09-17T17:02:13.783
> 
> 标签：php, sql-server, model, yii, centos

我正在尝试从 mssql 中的表中建模一个类。列名有空格，我无法删除空格或以任何方式操作列名。我不知道如何将其合并到 yii 中。

在 admin.php 我有

```
 <?php 
print_r($model);
$this->widget('zii.widgets.grid.CGridView', array(
    'id'=>'components-grid',
    'dataProvider'=>$model->search(),
    'filter'=>$model,
    'columns'=>array(
        'No_',
        'Description',
        "Original Asset Number",
        'Flag',
        array(
            'class'=>'CButtonColumn',
        ),
    ),
)); ?> 
```

搜索.php

```
<?php
/* @var $this FixedAssetController */
/* @var $model FixedAsset */
/* @var $form CActiveForm */
?>

<div class="wide form">

<?php $form=$this->beginWidget('CActiveForm', array(
    'action'=>Yii::app()->createUrl($this->route),
    'method'=>'get',
)); ?>

    <div class="row">
        <?php echo $form->label($model,'No_'); ?>
        <?php echo $form->textField($model,'No_'); ?>
    </div>

    <div class="row">
        <?php echo $form->label($model,'description'); ?>
        <?php echo $form->textField($model,'Description',array('size'=>60,'maxlength'=>255)); ?>
    </div>

    <div class="row">
        <?php echo $form->label($model,'Original Asset Number'); ?>
        <?php echo $form->textField($model,"Original Asset Number",array('size'=>60,'maxlength'=>255)); ?>
    </div>

    <div class="row">
        <?php echo $form->label($model,'flag'); ?>
        <?php echo $form->textField($model,'Flag'); ?>
    </div>

    <div class="row buttons">
        <?php echo CHtml::submitButton('Search'); ?>
    </div>

<?php $this->endWidget(); ?>

</div> 
```

我的班级 FixedAsset.php

```
<?php

/**
 * This is the model class for table "FixedAsset".
 *
 * The followings are the available columns in table 'FixedAsset':
 * @property string $No_
 * @property string $description
 * @property string $original_asset_number
 * @property int    $flag
 *
 */
class FixedAsset extends AltActiveRecord
{
    /**
     * Returns the static model of the specified AR class.
     * @param string $className active record class name.
     * @return Manufacturers the static model class
     */
    public static function model($className=__CLASS__)
    {
        exit(parent::model($className));
        return parent::model($className);
    }

    /**
     * @return string the associated database table name
     */
    public function tableName()
    {
        //exit("help");
        return "[Spectrum Geo Limited\$Fixed Asset]";
    }

    /**
     * @return array validation rules for model attributes.
     */
    /*public function rules()
    {
        // NOTE: you should only define rules for those attributes that
        // will receive user inputs.
        return array(
            array('name', 'required'),
            array('name', 'length', 'max'=>50),
            // The following rule is used by search().
            // Please remove those attributes that should not be searched.
            array('manufacturer_id, name', 'safe', 'on'=>'search'),
        );
    }*/

    /**
     * @return array relational rules.
     */
    /*public function relations()
    {
        // NOTE: you may need to adjust the relation name and the related
        // class name for the relations automatically generated below.
        return array(
            'components' => array(self::HAS_MANY, 'Components', 'manufacturer'),
        );
    }*/

    /**
     * @return array customized attribute labels (name=>label)
     */
    public function attributeLabels()
    {
        /*return array(
            'manufacturer_id' => 'Manufacturer',
            'name' => 'Name',
        );*/
    }

    /**
     * Retrieves a list of models based on the current search/filter conditions.
     * @return CActiveDataProvider the data provider that can return the models based on the search/filter conditions.
     */
    public function search()
    {
        //exit("help");
        // Warning: Please modify the following code to remove attributes that
        // should not be searched.

        $criteria=new CDbCriteria;

        $criteria->compare('No_',$this->No_);
        $criteria->compare('Original Asset Number',$this->original_asset_number);
        $criteria->compare('Flag',$this->Flag);

        return new CActiveDataProvider($this, array(
            'criteria'=>$criteria,
        ));
    }
} 
```

我的控制器

```
/**
     * Manages all models.
     */
    public function actionAdmin()
    {

        $model=new FixedAsset('search');
        //exit("help2");
        $model->unsetAttributes();  // clear any default values
        if(isset($_GET['FixedAsset']))
            $model->attributes=$_GET['FixedAsset'];

        $this->render('admin',array(
                'model'=>$model,
        ));
    }

    /**
     * Returns the data model based on the primary key given in the GET variable.
     * If the data model is not found, an HTTP exception will be raised.
     * @param integer the ID of the model to be loaded
     */
    public function loadModel($id)
    {
        $model=FixedAsset::model()->findByPk($id);
        if($model===null)
            throw new CHttpException(404,'The requested page does not exist.');
        return $model;
    } 
```

尝试使用 Gii 时 apache 日志出错

```
[Tue Sep 18 10:51:22 2012] [error] [client 172.16.0.85] PHP Fatal error:  Maximum execution time of 30 seconds exceeded in /opt/dam/yii-1.1.12.b600af/framework/db/CDbCommand.php on line 497, referer: http://portal-test/dam/index.php?r=gii/model 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-14T16:39:32.807

该列必须以“名称：类型：标签”的格式指定，其中“类型”和“标签”是可选的。

您收到错误，因为空间破坏了格式。

只需将“名称：”添加到您的列中

您的代码的修改版本：

```
 $this->widget('zii.widgets.grid.CGridView', array(
    'id'=>'components-grid',
    'dataProvider'=>$model->search(),
    'filter'=>$model,
    'columns'=>array(
        'Name:No_',
        'Name:Description',
        "Name:Original Asset Number",
        'Name:Flag',
        array(
            'class'=>'CButtonColumn',
        ),
    ),
)); ?> 
```

现在应该可以了。

# ruby-on-rails - will_paginate rails bootstrap 许多页面省略号间隙

> ID：12463976
> 
> 赞同：1
> 
> 时间：2012-09-17T17:02:31.537
> 
> 标签：ruby-on-rails, will-paginate

我在 rails 中使用 will_paginate 和 will_paginate-bootstrap。如何在分页显示中使用省略号作为

```
[<][1][2][3] ... [15][16][>] 
```

我尝试使用 inner_window 和 outer_window 但没有帮助。

```
<%= will_paginate @products, :renderer => BootstrapPagination::Rails, :inner_window => 4, :outer_window => 1 %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T17:22:11.823

没关系 - 事实证明，当达到包含元素的宽度时，省略号会自动显示。我似乎一直在回答我的问题。很抱歉垃圾邮件。

# android - 如何创建动态列表视图并设置 Textview 的可见性

> ID：12463981
> 
> 赞同：1
> 
> 时间：2012-09-17T17:02:49.280
> 
> 标签：android

我是 Android 开发的新手。我成功地创建了一个带有动态列表视图的演示项目，但现在我的问题是我的`list_row`xml 文件中有两个文本视图。

Textview2 是默认隐藏（可见性=消失）。

现在我设置该文本视图的可见性仅在列表视图的第五个位置可见。我为此编写了代码，但 textview 随机显示，而不仅仅是在第五个位置。我在列表视图中有 100 条记录。

我究竟做错了什么？

**编辑 ：**

```
public View getView(int position, View convertView, ViewGroup parent) 
{
    // TODO Auto-generated method stub
    ViewHolder holder;

    if (convertView == null) 
    {
        convertView = mLayoutInflater.inflate(R.layout.list_row, null);
        holder = new ViewHolder();
        holder.text1 = (TextView) convertView.findViewById(R.id.mytext);
        holder.text2 = (TextView) convertView.findViewById(R.id.invisibletext);
        convertView.setTag(holder);
        if (position == 5) 
            holder.text2.setVisibility(View.VISIBLE);
        else
            holder.text2.setVisibility(View.GONE);
    } 
    else 
    {
        holder = (ViewHolder) convertView.getTag();
    }

    return convertView;
}

static class ViewHolder 
{
    TextView text1;
    TextView text2;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T17:10:17.227

问题是适配器中的 convertViews 被回收。

我假设您正在测试适配器中 getView() 函数中的位置。修改您的代码，使其执行以下操作：

```
if (position == 4)
    convertView.setVisibility(View.INVISIBLE);
else 
    convertView.setVisibility(View.VISIBLE); 
```

这将强制 convertView 在设置为第 5 位可见后重新出现

编辑： if else 条件在错误的地方

```
 public View getView(int position, View convertView, ViewGroup parent) {
    // TODO Auto-generated method stub
    ViewHolder holder;

    if (convertView == null) {
        convertView = mLayoutInflater.inflate(R.layout.list_row, null);

        holder = new ViewHolder();

        holder.text1 = (TextView) convertView.findViewById(R.id.mytext);

        holder.text2 = (TextView) convertView

        .findViewById(R.id.invisibletext);

        convertView.setTag(holder);

    } else {

        holder = (ViewHolder) convertView.getTag();

    }

    if (position == 5) {
        holder.text2.setVisibility(View.INVISIBLE);
    } else {
        holder.text2.setVisibility(View.VISIBLE);
    }

    return convertView;

}

}

static class ViewHolder {
TextView text1;

TextView text2;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T17:18:54.850

如果您的 convertView 不为空，则 if-else 条件不会触发，因此当 convertView 为空时，它会触发，因此它会随机工作。

按以下方式更新您的代码...

```
 public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub
        ViewHolder holder;

        if (convertView == null) {
            convertView = mLayoutInflater.inflate(R.layout.list_row, null);

            holder = new ViewHolder();

            convertView.setTag(holder);
         } else {
                holder = (ViewHolder) convertView.getTag();
            }

      holder.text1 = (TextView) convertView.findViewById(R.id.mytext);
      holder.text2 = (TextView) convertView.findViewById(R.id.invisibletext);

      if (position == 5) {
                holder.text2.setVisibility(View.VISIBLE);

            } else {
                holder.text2.setVisibility(View.GONE);
            }

        return convertView;

    }

} 
```

# java - 以 byte[knownsize] 为单位存储 2 位状态的长度

> ID：12463983
> 
> 赞同：0
> 
> 时间：2012-09-17T17:02:52.830
> 
> 标签：java, bytearray, byte

我有一个字节数组：

```
byte[] myPool = new byte[100]; 
```

我想存储由 4 个字符组成的字符串。将其视为 DNA：

```
- A = 00
- C = 01
- G = 10
- T = 11 
```

我将如何解析和插入这些字符的字符串作为字节？不是在寻找代码，而是在寻找可以阅读的东西。

```
String example = "CGGGGT" //011010101011 aka 1707 aka 0x6AB
myPool.insert(example); //assume empty pool at start 
```

然后我希望 myPool[0] 为 0x0006 并且记录从 myPool[2] 开始（以便能够保存高达 0xFFFF 的长度指示符，我也不知道如何在大批）

myPool[2] 应为 0x006A，myPool[3] 应为 0x00B0（最后 4 位为 0000）。

所以我真正不明白的是如何在java中“制作”字节。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T17:14:33.560

字节实际上是一种原始数据类型，例如`int`，而不是对象，例如`String`。它们存储一个介于 -128 和 127 之间的数字，包括 128 和 127。您可以像这样创建一个：

```
byte myByte = 0; 
```

并像这样存储它：

```
myPool[0] = myByte; 
```

请记住，当您存储字节数时`1`，它的二进制表示形式如下所示`00000001`。`2`会看起来像`00000010`。

您最大的挑战是将其中四个值 (ACGT) 打包到一个字节中。您最好的选择是使用四个运算符：

*   `&`，这是一个按位与。例如，您可以使用它仅让底部两位通过。
*   `|`，这是一个按位或。您可以使用它将新位组合到您正在构建的现有字节中。
*   `<<`，这是一个左移。它将值“向左”移动一定数量的位置，相当于乘以 2 的幂。
*   `>>`，这是一个右移。它将值“向右”移动一定数量的位置，相当于除以 2 的幂。

希望对您有所帮助，如果这是一项任务，祝您好运！

# java - Mediaplayer 在新 Activity 上 5 秒后停止

> ID：12463984
> 
> 赞同：0
> 
> 时间：2012-09-17T17:02:57.477
> 
> 标签：java, android

我有 2 个活动，一个启动媒体播放器流的主要活动，以及一个通向启动活动 #2 的按钮，然后完成（）当前活动，活动 #1 的任务此时已完成，音乐播放器此时没有问题。然而，在 Activity #2 打开后，媒体播放器工作了大约 5 秒，然后它停止了，在 Activity #2 中，我只有一个退出按钮和一个在 Handler 的帮助下循环运行的 AsyncTask。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-17T17:15:02.150

我相信您是 Activity 1 中的 MediaPlayer，因为您正在调用`finish()`. 该`MediaPlayer`实例是第一个`Activity`. 解决此问题的唯一方法是在您的 Activity 2 中开始一个新`MediaPlayer`的或创建一个`Service`在后台处理所有媒体的。如果您以第二种方式执行此操作，则一个 MediaPlayer 实例将继续播放您的所有活动，您只需向它发送命令。

# iphone - iOS如何获取时钟应用程序等系统铃声列表？

> ID：12463985
> 
> 赞同：2
> 
> 时间：2012-09-17T17:03:00.143
> 
> 标签：iphone, ios, system, uilocalnotification, ringtone

> **可能重复：**
> [iOS 访问其他应用程序中的内置闹钟声音？](https://stackoverflow.com/questions/9524032/ios-access-built-in-alarm-clock-sound-in-other-app)

iOS 有一个系统应用程序，时钟。设置闹钟时，我们可以选择系统铃声或其他铃声。现在我想安排一个本地通知并尝试将 soundName 设置为系统铃声列表中的一个铃声。苹果支持吗？如果可以，如何获取系统铃声列表？

# sql-server - SqlDataReader 不返回所有记录

> ID：12463993
> 
> 赞同：0
> 
> 时间：2012-09-17T17:03:44.297
> 
> 标签：sql-server, ado.net, sqldatareader

我在使用 ADO.NET SqlDataReader 时遇到问题。当我直接在 SSMS 中运行底层存储过程时 - 它返回 170 万条记录。当我运行填充 ADO.NET 数据表的相关 VB.NET 代码时，我还获得了 170 万条记录。

但是当我运行一个循环来填充这样的通用列表时

```
While i_oDataReader.Read
   m_aFullIDList.Add(i_oDataReader.GetInt32(0))
End While 
```

它返回的记录要少得多，而且这个数字可能会有所不同。在循环结束时，如果我检查`m_aFullIDList.Count`它可能是 100000 或 500000 等。知道为什么以及如何解决它吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T17:28:51.820

感谢@Tim Schemlter 指出的参考资料，我找到了用于创建DataReader 的选项“CommandBehavior.SequentialAccess”。这解决了这个问题。例如，而不是

```
drReader = oCommand.ExecuteReader(); 
```

采用

```
drReader = oCommand.ExecuteReader(CommandBehavior.SequentialAccess); 
```

它工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T17:22:37.717

您是否尝试过使用 GetInt64() 方法？我意识到*只有*170 万条记录，GetInt32() 方法应该足够大；我更多的是好奇。

另外，如果您认为 SQL 无法跟上 DataReader，您是否尝试在循环中添加等待以使其赶上？