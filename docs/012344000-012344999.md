# StackOverflow 问答 12344000-12344999

# c# - 在顺序读取时防止集合修改

> ID：12344000
> 
> 赞同：1
> 
> 时间：2012-09-10T00:03:11.490
> 
> 标签：c#, .net, collections, xna

我正在处理大量对象和对它们的顺序读取。我发现大多数问题都与多线程有关，但我更关心线程本身由于滥用可分发库而导致的错误。

库中的系统管理一个可能很大的对象集合，在某一时刻，它会对该集合执行顺序读取，并对每个元素执行操作。根据可以在库之外扩展的元素实现，对象可能会尝试将其自身从集合中移除。

我希望这是一个选项，但是如果在按顺序读取集合时发生这种情况，这可能会导致错误。我希望能够在读取集合的内容时锁定它，并将任何删除请求放在一个计划中，以便在顺序读取完成后执行。删除请求必须通过系统，因为对象没有对集合的公共访问权限，我可以只使用 isReading 标志，但我想知道是否有更优雅的构造。

C# 或 .NET 是否提供了执行此操作的工具？也许锁定列表内容，以便我可以在顺序读取期间拦截删除请求？还是我必须为这种情况从头开始实施该行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T00:13:38.267

您可能想研究[`SynchronizedCollection<T>`](http://msdn.microsoft.com/en-us/library/ms668265.aspx)在 .NET 2.0+ 中使用该类。

或者，看看这个问题的答案：[SynchronizedCollection<T> 和其他并发集合有什么区别？](https://stackoverflow.com/questions/4655150/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T01:38:33.657

你可以使用下一个技巧

```
List<T> collection;

for(int index = collection; index >= 0; --index)
{
  var item = collection[index];

  if(MUST BE DELETED)
  {
    collection.RemoveAt(index); // this is faster
    OR
    collection.Remove(item);
  }
} 
```

此代码不会在修改集合时崩溃，并将处理集合的每个项目

# c# - “字符串”不包含“包含”的定义

> ID：12344002
> 
> 赞同：9
> 
> 时间：2012-09-10T00:03:24.483
> 
> 标签：c#, linq, nhibernate, linq-to-nhibernate

我有这样的声明：

```
var vals =
    from StandAloneUserPayment saup in _Session.Query<StandAloneUserPayment>()
        .Fetch(x => x.RecurringPayments)
    where
        saup.User.UserId == userId
        && searchString.Contains(saup.FriendlyName, StringComparer.InvariantCultureIgnoreCase)
    select
        saup; 
```

这似乎正是我应该做的，但我得到了整行与`Contains`以下消息下划线的方法：

> `string`不包含定义`Contains`并且最好的扩展方法重载`System.Linq.ParallelEnumerable.Contains<TSource>(System.Linq.ParallelQuery<TSource>, TSource, System.Collections.Generic.IEqualityComparer<TSource>)`有一些无效参数

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-10T00:06:08.400

尝试`IndexOf`：

```
searchString.IndexOf(saup.FriendlyName,
                     StringComparison.InvariantCultureIgnoreCase) != -1 
```

它不起作用的原因是因为`Contains`接受 an 的扩展方法`IEqualityComparer<TSource>`正在对 a 进行操作`String`，它实现了`IEnumerable<char>`, not `IEnumerable<string>`，所以 a`string`和 an`IEqualityComparer<string>`不能传递给它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-10T00:19:33.137

即使有[Contains(source, item, comparer)](http://msdn.microsoft.com/en-us/library/bb341422.aspx)方法，您也不能*将它与 NHibernate 一起使用，因为比较器是代码，而不是 NH 可以翻译的表达式树。

*：也就是说，除非您编写一个 LINQ 提供程序扩展来为您的比较器生成特殊情况，但事实并非如此。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-10T00:21:48.437

您正在使用的 .Contains 来自 LINQ - 它将字符串视为`IEnumerable<char>`，因此它需要一个`IEqualityComparer<char>`. 比较`StringComparer`器实现`IEqualityComparer<String>`.

如果 minitech 的`IndexOf`方法有效，我认为这将是最简单的方法。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2016-03-13T01:29:09.043

将以下命名空间添加到您的类中，

```
using System.Linq; 
```

希望能帮助到你。

# ios - RestKit setObjectMapping 问题；forKeyPath 成功，而 forResourcePathPattern 失败

> ID：12344004
> 
> 赞同：1
> 
> 时间：2012-09-10T00:04:34.830
> 
> 标签：ios, json, restkit

这里非常令人困惑，向开发中的项目添加各种请求。到目前为止，对于两个对象都`setObjectMapping:forResourcePathPattern:`可以正常工作。这些具有资源模式，例如`@"customer/login/"`和`@"customer/getDuckStatus/"`。未能创建具有正确映射的对象的查询是`@"customer/getPondsForDuck/"`

```
// this define is used for object mapping and for creating the query, 
// it can't be a mismatch
#define kResourcePathDuckPond @"customer/getPondsForDuck/" 
```

我可以在查询中看到的唯一区别是返回的 JSON 中的键路径对于前两个有效的查询是 nil。当 keypath 为 nil 并`forResourcePathPattern`用于设置对象映射时，`objectLoader:(RKObjectLoader *)objectLoader didLoadObjects:(NSArray *)objects`(`RKObjectLoaderDelegate`方法) 接收到具有正确映射的有效对象。当 keypath 不是 nil 时， using`forResourcePathPattern`总是发送`didLoadObjects:`一个 nil 对象。

使用

```
[[RKObjectManager sharedManager].mappingProvider setObjectMapping:duckMapping
                                           forResourcePathPattern:kResourcePathDuckPond]; 
```

失败。使用

```
[[RKObjectManager sharedManager].mappingProvider setObjectMapping:duckMapping
                                                       forKeyPath:@"ponds"]; 
```

（其中“ponds”是返回的 JSON 中给出的键路径）工作正常。

这是规则吗，`forResourcePathPattern`除非 keypath 为 nil，否则会失败？我想让我所有的对象都以同样的方式被识别。虽然我可以让它工作，但我不喜欢为一个查询使用关键路径，为其他查询使用资源路径。我想使用`forResourcePathPattern`一切，因为我无法控制 API，有些查询返回一个 keypath，而有些则没有。

# java - java多方法和实例

> ID：12344006
> 
> 赞同：-2
> 
> 时间：2012-09-10T00:05:19.977
> 
> 标签：java

我正在关注有关多种方法和实例的一系列教程。作者没有详细说明某些元素的细节。

你为什么认为他会将方法 setName 放在“public void”中，然后使用“public String getName”获得回报。为什么他不直接将返回的 randomName 放在 public void 中，并在 public void 中声明字符串 g？

```
public class voidvoid {

private String randomName;

public void setName(String name){
    randomName = name;

}
public String getName () {
    return randomName;
}

public void saying () {
    System.out.printf("you are %s", getName());
}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T00:08:09.077

它被称为封装。

> 隐藏对象的内部结构可以防止用户将组件的内部数据设置为无效或不一致的状态，从而保护其完整性。封装的一个好处是它可以降低系统复杂性，从而通过允许开发人员限制软件组件之间的相互依赖关系来提高鲁棒性。

更多信息：[http](http://en.wikipedia.org/wiki/Encapsulation_(object-oriented_programming) ://en.wikipedia.org/wiki/Encapsulation_(object-oriented_programming )

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T00:16:11.987

使用 public void 设置变量的值并使用 public 获取变量的值是“正确”的方法。您可以搜索“java 中的 getter 和 setter”以获取有关该主题的更多信息。基本上，这在获取和设置变量的值方面提供了对存储名称的公共访问。say() 方法显示了 getter 方法的使用，在本例中为 getName()。请注意，变量本身被声明为私有的。这意味着除非您扩展此类，否则您无法从此类外部访问变量，除非通过 getter 和 setter。例如说你不喜欢 Fred 这个名字。在您的 setName(String name) 方法中，您可以说：

```
if(name.equals("Fred") {
   randomName = "Jon Doe";
} 
```

任何时候有人尝试设置名称“Fred”，它都会被保存为“Jon Doe”。如果他们可以直接访问该变量，他们可以随时将值设置为“Fred”。这意味着您可以最终控制通过您的方法进入变量的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T00:29:23.903

当一个方法设置一个类的属性时，它被称为`setter`方法：

```
public void setName(String name) 
```

由于您只能`randomename`使用此方法设置类的属性，因此通常不需要返回类型。但是如果你愿意，你当然可以添加一个返回类型。如 ：

```
//this method will return true if the `randomname` was not set previously 
//otherwise false
public boolean setName(String name) {
    if (null == randomname )  { 
        randomname = name;
        return true;  
    }
    else return false;    
} 
```

与 setter 方法类似，如果您可以使用通常称为`getter`方法的方法获取属性：

```
public String getName(String name) 
```

Saying 方法用于打印`randomname`属性。它是必需的，因为您不能打印`randomname`类范围的外部，因为它是私有的：

```
//this will print the value of randomname
public void saying ()

//another scenario
voidvoid foo = new voidvoid () ;
foo.setName("Hello world") ;

//this line will generate an erro
System.out.println (foo.randomname) ; 

//this will compile fine
foo.saying () ;

//you can also achieve the same result using getName
System.out.println (foo.getName() ) ; 
```

如果您想要属性，则拥有`private`属性的 setter/getter 方法，但对于属性，但在我看来，这是一个拥有它的方法。`mandatory``retrieve/set``optional``public``good practice`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T00:17:09.613

它不仅仅是向最终用户展示所封装内容的价值。在许多程序中，最终用户*永远*看不到输出到 stdout（System.out 输出的地方） 。您的对象可能需要它`String`以供以后参考，因此将其拉出而不是将其输出到 stdout 会更有益。

至于`getName`和`setName` - 这些分别是**访问**器和**修改器**。

访问器需要检索有关特定变量的信息，因此预期的返回类型是您需要的变量类型。由于您要返回 a `String`，因此您会期望`getName`返回`String`，因为变量`randomName`是 a `String`。

mutator 只需要更改内部变量的值，通常是在某些条件下。这里不需要返回任何东西，因此返回值为`void`. 通常你会看到返回`boolean`值表示成功或失败的 mutators，但在我看到的例子中，返回值在很大程度上被忽略了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-10T05:02:35.350

> 为什么他不把返回的 randomName 放在 public void 中

我不明白这个问题。他把它放在`public static String getName()`方法里面。他还能把它放在哪里？

> 在公共无效说方法中声明字符串 g？

因为这会使它成为局部变量而不是实例成员，所以你不能用其他方法设置它。

# javascript - 与 LINQ 的 SelectMany 运算符等效的 underscore.js 是什么？

> ID：12344007
> 
> 赞同：50
> 
> 时间：2012-09-10T00:05:39.150
> 
> 标签：javascript, underscore.js, linq

想象一下我有一个嵌套的数组结构。

```
var nested = [ [1], [2], [3] ]; 
```

使用[underscore.js](http://underscorejs.org/)，我将如何生成扁平数组？

在 C# 中，你会这样使用[`Enumerable.SelectMany`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.selectmany.aspx)：

```
var flattened = nested.SelectMany(item => item); 
```

请注意，本例中的 lambda 直接选择嵌套项，但它可以是任意表达式。

在 jQuery 中，可以只使用：

```
var flattened = $.map(nested, function(item) { return item; }); 
```

但是，这种方法不适用于下划线的[map](http://underscorejs.org/#map)功能。

那么如何`[1, 2, 3]`使用 underscore.js 获得扁平数组呢？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2014-08-04T19:28:16.473

如果你有一个稍微复杂的数组，比如来自 JSON 的数组，你也可以利用[pluck](http://underscorejs.org/#pluck)方法，提取你感兴趣的特定属性，类似于`parents.SelectMany(parent => parent.Items);`

```
// underscore version
var allitems = _.flatten(_.pluck(parents, 'items')); 
```

`allitems`现在是来自父母的所有子项的数组，`[a,b,c,d]`.

还有一个显示相同内容的[JSFiddle 。](http://jsfiddle.net/48wZV/)

* * *

或者，如果你使用 lodash，你可以使用[_.flatMap](https://lodash.com/docs#flatMap)函数来做同样的事情，该函数从版本 4 开始可用。感谢 Noel 在评论中指出它。

```
var parents = [
  { name: 'hello', items: ['a', 'b'] },
  { name: 'world', items: ['c', 'd'] }
];

// version 1 of lodash, straight up
var allitems = _.flatMap(parents, 'items');
logIt('straight', allitems);

// or by wrapping the collection first
var allitems = _(parents)
  .flatMap('items')
  .value();
logIt('wrapped', allitems);

// this basically does _(parents).map('items').flatten().value();

function logIt(wat, value) {
  console.log(wat, value)
}
```

```
<script src="https://cdn.jsdelivr.net/lodash/4.16.6/lodash.min.js"></script>
<pre id="result"></pre>
```

* * *

如果您想做更多的事情并且不想链接运算符，您可以使用该[`flow`](https://lodash.com/docs/4.17.10#flow)函数来获得相同的效果。如果您使用 TypeScript 并单独导入每个运算符，这很有用，因为您可以优化最终的有效负载。

```
const parents = [
  { name: 'hello', items: ['a', 'b'] },
  { name: 'world', items: ['c', 'd'] }
];
logIt('original', parents);

const result = _.flow(
  (collection) => _.flatMap(collection, (item) => item.items),
  (flattened) => flattened.filter((item) => item !== 'd')
)(parents);
logIt('result without "d"', result);

function logIt(wat, value) {
  console.log(wat, value);
}
```

```
<script src="https://cdn.jsdelivr.net/npm/lodash@4.17.11/lodash.min.js"></script>
<pre id="result"></pre>
```

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2012-09-10T00:13:01.163

```
var nested = [ [1], [2], [3] ];
var flattened = _.flatten(nested); 
```

这是一个[小提琴](http://jsfiddle.net/7yE9d/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-05-18T20:39:43.273

我们还可以将[Patrick 的解决方案](https://stackoverflow.com/a/25126109/65387)变成一个 mixin，这样它就可以链接：

```
_.mixin({
    selectMany: function(collection, iteratee=_.identity) {
        return _.flatten(_.map(collection, iteratee));
    }
}); 
```

例子：

```
let sample = [{a:[1,2],b:'x'},{a:[3,4],b:'y'}];

console.log(_.selectMany(sample, 'a')); // [ 1, 2, 3, 4 ]
console.log(_.chain(sample).selectMany(o => o.a).filter(a => a % 2 === 0).map(a => a * 3).value()); // [ 6, 12 ] 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-05-05T16:50:10.790

我在 lodash 中找不到任何类似的方法`SelectMany`，所以我使用纯 JS 创建了一个：

```
Array.prototype.selectMany = function(fn) {
    return Array.prototype.concat(...this.map(fn));
}; 
```

繁荣。

```
> console.log([{a:[1,2],b:'x'},{a:[3,4],b:'y'}].selectMany(o => o.a));
[ 1, 2, 3, 4 ] 
```

# c# - 上下文菜单条 -> 更改突出显示项的颜色

> ID：12344010
> 
> 赞同：4
> 
> 时间：2012-09-10T00:06:13.547
> 
> 标签：c#, visual-studio-2010, menu, contextmenu

所以在我的上下文菜单条上，我想更改所选项目的颜色。例如，我希望菜单项“关于我”在突出显示时将颜色从白色更改为黑色。这是我一直在尝试的：

```
 ContextMenuStrip CMS = new ContextMenuStrip();
        CMS.ForeColor = Color.White;
        CMS.ShowImageMargin = false;
        var item = CMS.Items.Add("About Me", null);
        item.MouseHover += new EventHandler(CMS_MouseHover);

   void CMS_MouseHover(object sender, EventArgs e)
    {
        ContextMenuStrip CMS = sender as ContextMenuStrip;
        CMS.ForeColor = Color.Black;
    } 
```

我也尝试过使用 ToolStripMenuitem 事件处理程序，但我认为它不会在这里应用？

关于我如何做到这一点的任何建议？

我也想知道是否有办法改变高亮颜色，我知道这取决于你的系统，但我只是想知道。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-10T11:30:57.543

我不相信这是最好的方法，但一种可能的方法是连接 ContextMenuStrip 上各个 ToolStripMenuItems 上的 MouseEnter 和 MouseLeave 事件。

例如：

```
 private void aboutToolStripMenuItem_MouseEnter(object sender, EventArgs e)
    {
        ToolStripMenuItem TSMI = sender as ToolStripMenuItem;
        TSMI.ForeColor = Color.Black;
    }

    private void aboutToolStripMenuItem_MouseLeave(object sender, EventArgs e)
    {
        ToolStripMenuItem TSMI = sender as ToolStripMenuItem;
        TSMI.ForeColor = Color.White;
    } 
```

显然，您还需要在以编程方式创建的 ToolStripMenuItem 上连接事件处理程序。

您似乎正在尝试使用“CMS.ForeColor = Color.Black”更改整个 ContextMenuStrip 的 ForeColor，这不是您所说的想要的。尝试了上述方法，它确实有效。

# html - 没有 JavaScript 的等距列表项

> ID：12344011
> 
> 赞同：3
> 
> 时间：2012-09-10T00:06:24.367
> 
> 标签：html, css

我有一个必须实现的设计，其中设计师有一个带有均匀间隔项目的顶部导航。

我为此使用了无序列表。我可以让项目均匀分布的唯一方法是使用 javascript（它是一个 CMS 或者 LI 的数量可以变化）。

我遇到的问题是 LI 开始时没有填充，然后填充由 JS 添加，当您在页面之间轻弹时，您会看到明显的跳跃。

有没有办法通过 HTML 实现相同的结果，如果可能的话避免使用表格？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T00:08:07.587

制作您的列表项`display:inline-block`，然后给它们一个宽度。宽度应以`em`单位为单位，以便随文本调整大小。

在 IE6 上看起来不太好，但应该是可读/可导航的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T02:43:07.283

如果我们说的是水平均匀分布，你想要`display: table-cell`

```
ul { display: table; width: 100% }
li { display: table-cell } 
```

`display: table`请注意，如果您希望父容器占据所有可用宽度，则确实需要父容器。

# python - 使用 Apache/mod_wsgi 部署 Django（伪造的 ImportError）

> ID：12344014
> 
> 赞同：0
> 
> 时间：2012-09-10T00:06:41.300
> 
> 标签：python, django, apache, mod-wsgi, importerror

我花了两天时间试图将我的项目从开发服务器切换到生产服务器；但是，我撞到了无法逾越的墙。mod_wsgi 已安装、配置并且我已经测试过它可以工作。我的 django 应用程序与 runserver 一起使用。

但是，当我将 Apache 配置为使用我的 wsgi 应用程序时，我得到了 500，并且可以在 Apache 日志中看到问题是以前从未出现过的 ImportError。我认为这是一个 PYTHONPATH 问题，但我已经使用打印语句验证了 sys.path 的内容在此导入发生时与它们应该是相同的。这是错误：

> `[error]File "/opt/bitnami/python/lib/python2.6/site-packages/Django-1.4.1-py2.6.egg/django/db/backends/postgresql_psycopg2/base.py", line 11`
> 
> `[error]from django.db import utils`
> 
> `[error]ImportError: cannot import name utils`

现在，为什么 psql 后端甚至无法从 django.db 导入实用程序，尽管它位于 PYTHONPATH 上，这让我很烦恼。导入前的 sys.path 打印语句显示：

> `/opt/bitnami/python/lib/python2.6/site-packages/Django-1.4.1-py2.6.egg`

甚至插入

```
/opt/bitnami/python/lib/python2.6/site-packages/Django-1.4.1-py2.6.egg/django
/opt/bitnami/python/lib/python2.6/site-packages/Django-1.4.1-py2.6.egg/django/db 
```

没有任何好处。我认为这是多余的，但我正在尽我所能。

我已经阅读了所有关于 django/apache/mod_wsgi 的教程、文档、博客文章和 stackoverflow 文章，但是虽然大多数人在导入他们的应用程序或设置时遇到了麻烦，但我没有遇到任何问题，但我无法忍受这个。有任何想法吗？谢谢！

# android - 布局在屏幕旋转时复制自身

> ID：12344016
> 
> 赞同：10
> 
> 时间：2012-09-10T00:07:08.910
> 
> 标签：android, android-layout, android-edittext

我有一个包含 EditText 和 Button 的布局。我`<include>`在我的主要布局中。

我对布局和旋转有一个奇怪的问题。当设备（物理）旋转时，它似乎会自我复制，弄乱文本和布局。

在我添加了一些额外的乱码之后，它是第一次打开的：

![1](../Images/b2a498c70ae53bd280efe44f5076c305.png)

DSC_0013 在片段启动时的 EditText 中。

然后，我旋转手机并添加一些不同的乱码：

![2](../Images/fcc699371b00bd98a4e8e143a0c70a1d.png)

你可以很清楚地看到这个问题。起初，我认为这只是 EditText 搞砸了。但是，如果我添加足够的文本来换行：

![3](../Images/b3c309e6ed8afa9dd0f6b919dda87bf8.png)

我可以看到按钮也被弄乱了。

我确实 override `onSaveInstanceState`，但在其中我没有触及 EditText 或其值，它严格用于其他用途。

发生了什么事，我该如何解决？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-10T00:28:06.980

修复！

原来它不是复制自身的视图，也不是 EditText 或 Button。这是整个片段。

在我的 Activity 中`onCreate`，我将片段添加到 xml 布局中：

```
private FileDetails fileDetailsFragment;

public void onCreate(Bundle savedInstanceState) {
        ...
        FragmentManager fragmentManager = getSupportFragmentManager();
        FragmentTransaction fragmentTransaction = fragmentManager
                .beginTransaction();
        fileDetailsFragment = new FileDetails(fileData);
        fragmentTransaction.add(R.id.DetailsHolder, fileDetailsFragment);
        fragmentTransaction.commit(); 
```

`onCreate`每次我旋转手机时都会被调用（正如它的意思）。因此，我检查了该活动是否是第一次运行，并且效果很好。

```
private FileDetails fileDetailsFragment;

public void onCreate(Bundle savedInstanceState) {
    ...
    if (savedInstanceState == null) {
        FragmentManager fragmentManager = getSupportFragmentManager();
        FragmentTransaction fragmentTransaction = fragmentManager
                .beginTransaction();
        fileDetailsFragment = new FileDetails(fileData);
        fragmentTransaction.add(R.id.DetailsHolder, fileDetailsFragment);
        fragmentTransaction.commit();
    } else {
        fileDetailsFragment = (FileDetails) getSupportFragmentManager().findFragmentById(R.id.DetailsHolder);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-25T14:30:58.517

您还可以在您的片段上设置RetainedInstance(true)，然后尝试获取片段形式 de FragmentManager.findFragmentById(int) 或 FragmentManager.findFragmentByTag(String)，如果它返回 null，则意味着您必须创建片段的新实例.

```
private FileDetails fileDetailsFragment; 

public void onCreate(Bundle savedInstanceState) {
...
    FragmentManager fragmentManager = getSupportFragmentManager();
    fileDetailsFragment = (FileDetails) getSupportFragmentManager().findFragmentById(R.id.DetailsHolder);
    if (fileDetailsFragment == null) {
        fileDetailsFragment = new FileDetails(FileData); 
    }

    FragmentTransaction fragmentTransaction = fragmentManager
            .beginTransaction();

    fragmentTransaction.add(R.id.DetailsHolder, fileDetailsFragment);
    fragmentTransaction.commit();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-14T15:21:26.040

在某些情况下，saveInstanceState 的值在轮换后可能为 null，所以最好再加一个条件：

```
FragmentManager fragmentManager = getSupportFragmentManager();
if (savedInstanceState == null && 
    fragmentManager.getFragments().size() == 0) {

        FragmentTransaction fragmentTransaction = fragmentManager
                .beginTransaction();
        fileDetailsFragment = new FileDetails(fileData);
        fragmentTransaction.add(R.id.DetailsHolder, fileDetailsFragment);
        fragmentTransaction.commit();
    } else {
        fileDetailsFragment = (FileDetails) 
        getSupportFragmentManager().findFragmentById(R.id.DetailsHolder);
    } 
```

# java - Jana 中的有符号和无符号右移运算符有什么区别？

> ID：12344017
> 
> 赞同：0
> 
> 时间：2012-09-10T00:07:10.783
> 
> 标签：java

> **可能重复：**
> [按位移位运算符。>>> 和 >> 的有符号和无符号](https://stackoverflow.com/questions/2244387/bitwise-shift-operators-signed-and-unsigned)
> [区别](https://stackoverflow.com/questions/2811319/difference-between-and)

鉴于：

```
int i = -1000; 
```

有什么区别：

```
i = i >> 4; 
```

和

```
i = i >>> 4; 
```

?

这个特定的例子并不重要，我只是想了解有符号和无符号位移之间的区别。

# php - 获取带有存储在 cookie 中的分页的 html 内容

> ID：12344019
> 
> 赞同：0
> 
> 时间：2012-09-10T00:08:04.280
> 
> 标签：php, web-scraping

我有一个页面需要访问 www.site.com/search/all，然后我可以使用 www.site.com/page/2 3 4 ...等。如果我直接访问 www.site.com/page/2 我什么都没有，因为它没有通过第一个 url (www.site.com/search/all) 存储在 cookie 中。

我想运行所有页面并获取内容，但我只能从第一页获取内容，这是由 (www.site.com/search/all) 提供给我的。

我制作了一个 $context 并使用 session_start() 检查它是否有效，但没有成功。

这是我的代码：

```
<?php

require 'simple_html_dom.php';

$opts = array('http' => array('header'=> 'Cookie: ' . $_SERVER['HTTP_COOKIE']."\r\n"));
$context = stream_context_create($opts);
session_write_close(); // unlock the file

$f=10;

for($i=1;$i<=$f;$i++) {
if($i==1) {
    $html = file_get_html('http://www.site.com/search/all',false,$context);
session_start(); 
}
else {

    $html = file_get_html('http://www.site.com/page/$i',false,$context);
}

echo $i;

echo $html;

?> 
```

$html 结果总是来自第一页，它不会转到下一个，我认为是因为 cookie。

# java - 通过识别标签从 HTML 中获取信息

> ID：12344028
> 
> 赞同：0
> 
> 时间：2012-09-10T00:08:38.117
> 
> 标签：java, android, html-parsing

所有-我以前从未做过这种事情，我很困惑。我在 Google 上花了几个小时寻找一些示例代码或任何提示，但是每当我尝试使用可用代码时，我总是会遇到错误，并且最终会比开始时更加困惑。所以自怜和借口已经够多了。让我们来看看这个问题：我有一个应用程序“屏幕碎片”一个网站，现在是谷歌。我已经得到它，所以我可以在文本视图中显示 html： ![在此处输入图像描述](../Images/5416a89944859334401b23b9181c5852.png) 我现在的问题是从中获取信息。我想要的只是标题标签（“Google”）中的信息。我已经阅读了有关 HTML 解析的内容，但是当我阅读有关 TagSoup 或其他类似信息的信息时，我感到非常困惑。我是否需要这些来执行此操作，或者我可以编写一些 Java 代码来提取标题标签并将其转换为字符串然后显示它。如果我确实需要 HTML 解析器，有人可以给我一些示例代码。我在他们的网站上找不到任何东西。这是我到目前为止的代码：

```
public class MainActivity extends Activity {
String page;
String display;
Document doc;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);        
    new AddStringTask().execute();      
}
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}    
class AddStringTask extends AsyncTask<Void, String, Void> {    
    @Override
    protected Void doInBackground(Void... unused) {
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpGet httpGet = new HttpGet("http://www.google.com");
        ResponseHandler<String> resHandler = new BasicResponseHandler();
        try {
            page = httpClient.execute(httpGet, resHandler);             
        } catch (ClientProtocolException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return null;
    }

    @Override
    protected void onProgressUpdate(String... item) {           
    }       
    @Override
    protected void onPostExecute(Void unused) {  
        TextView google = (TextView) findViewById(R.id.google);         
        google.setText(page);       
    }       
}
} 
```

任何示例代码都会很棒，因为我需要查看一些示例。非常感谢您的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T00:24:36.767

[jsoup：Java HTML Parser](http://jsoup.org/)应该可以解决问题：

```
Document doc = Jsoup.connect("http://google.com/").get();
String docTitle = doc.title(); 
```

然后传递`docTitle`给`google.setText()`

[您可以在此处](http://jsoup.org/cookbook/extracting-data/attributes-text-html)找到更多示例。

# .htaccess - 如何使用 htaccess 进行这些重定向？

> ID：12344030
> 
> 赞同：0
> 
> 时间：2012-09-10T00:08:53.553
> 
> 标签：.htaccess

两个要求...

```
domain.com/folder/file/ 
```

至

```
domain.com/folder/file.html 
```

这个稍微复杂一些，但我可以没有它！

```
domain.com/folder/file/pagenumber/ 
```

至

```
domain.com/folder/file-pagenumber.html 
```

欢迎大家提出意见。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T13:14:58.187

如果文件夹总是相同的深度并且总是有一个斜杠：

```
RewriteEngine On
RewriteRule ^(.+?)/(.+?)/$ $1/$2.html [L,R]
RewriteRule ^(.+?)/(.+?)/(.+?)/$ $1/$2-$3.html [L,R] 
```

# java - Java Multipart/后下载

> ID：12344031
> 
> 赞同：0
> 
> 时间：2012-09-10T00:09:31.310
> 
> 标签：java, http, apache-httpclient-4.x, web-technologies

我几乎没有与 Web 技术相关的问题。从我阅读的 ant 查看 Apache 和 Netty 文档中，我无法弄清楚关于使用 HTTP multipart/post 请求下载大文件的一些事情。

1.  是否可以发送 HTTP 请求指示请求以较小的多部分（块）下载文件？

2.  如何多部分下载大文件？

如果我不理解“多部分”术语本身，请纠正我。我知道很多人都遇到过这个问题，应用程序（客户端）下载文件的部分较小，所以当网络中断时，应用程序不需要从头开始下载整个文件。特别是，当文件不是任何媒体文件时。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T00:35:16.230

多部分是指在一个正文中编码多个文档，定义见[this](http://www.w3.org/Protocols/rfc1341/7_2_Multipart.html)。对于 http，分段上传允许客户端通过一个帖子发送多个文档，例如在一个请求中上传图像和表单字段。

多部分不是指以多个块下载文档。

如果发生网络中断，您可以使用[http 范围重新开始下载。](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.35)

# java - 为什么我的 GUI 没有加载到构造函数上？

> ID：12344032
> 
> 赞同：1
> 
> 时间：2012-09-10T00:09:31.237
> 
> 标签：java, swing, user-interface, layout-manager

我有一个主类，它在某些时候调用另一个类，构造函数如下。

构造函数创建了 GUI，我认为应该显示它，但它没有。为什么会这样？

```
public ModPackManager(){
    System.out.println("New modpackmanager");
    setUndecorated(true);
    setBounds(100, 100, 350, 87);
    getContentPane().setLayout(new BorderLayout());
    contentPanel.setBorder(new EmptyBorder(5, 5, 5, 5));
    getContentPane().add(contentPanel, BorderLayout.CENTER);
    contentPanel.setLayout(null);
    {
        JLabel lblDownloadingModPack = new JLabel("Downloading and installing modpack, please wait...");
        lblDownloadingModPack.setHorizontalAlignment(SwingConstants.CENTER);
        lblDownloadingModPack.setBounds(10, 11, 330, 14);
        contentPanel.add(lblDownloadingModPack);
    }

    progressBar = new JProgressBar();
    progressBar.setBounds(10, 48, 330, 24);
    contentPanel.add(progressBar);

    label = new JLabel("0%");
    label.setHorizontalAlignment(SwingConstants.CENTER);
    label.setBounds(10, 29, 330, 14);
    contentPanel.add(label);
    try {
        installMods(getSelectedModPack());
    } catch (NoSuchAlgorithmException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T01:51:46.610

> 为什么会这样？

尝试而`setBounds(..)`不是使用布局（带有填充和边框）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T00:18:46.797

假设 ModPackManager 是一个 JFrame，您应该能够通过以下方式使其可见：

```
setVisible(true); 
```

只需在构造函数中的其他代码之后调用它。让我们知道怎么回事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T00:11:22.727

你从不显示任何东西，你只是设置它。

虽然还不完全清楚你到底在做什么，或者你正在使用什么类，但如果它是`JFrame`：

```
pack();
setVisible(true); 
```

你可能想在开发过程中注释掉`setUndecorated(true)`——这可能会使事情变得无法看到/找到。为了避免窗口管理器调整大小，也许至少：

```
setMinimumSize(new Dimension(350, 200)); 
```

我不确定标签周围的虚假块是做什么用的。

# javascript - Jquery Draggable - 在浏览器刷新时保持位置

> ID：12344034
> 
> 赞同：0
> 
> 时间：2012-09-10T00:09:43.867
> 
> 标签：javascript, jquery, draggable, jquery-ui-draggable

我的 html 和 css 每 5 分钟通过 shell 脚本更改一次，然后浏览器刷新以更新页面以反映更改。

我添加了可拖动的 Jquery 以允许用户重新定位 div，但我仅限于使用客户端编码，因为服务器不支持 PHP、JSP 等。

是否可以在没有服务器端代码的情况下在浏览器重新加载时保持 div 位置？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T00:19:08.987

你可以试试[网络](http://davidwalsh.name/html5-storage) [存储](http://dev.w3.org/html5/webstorage/)。不适用于较旧的浏览器，但假设这只是一种美学上的细节，它将照顾您的大多数用户。它如何工作的要点在于每次移动，您将位置数组写入键值，并在加载时回调这些值以设置初始位置。

# javascript - 检查下拉列表中的值

> ID：12344036
> 
> 赞同：2
> 
> 时间：2012-09-10T00:10:04.853
> 
> 标签：javascript, jquery, asp.net-mvc-3, drop-down-menu

我有一个由 ASP.NET MVC3 razor 语法生成的下拉列表。

```
<div id="list" style="display:none; float:left;">@Html.DropDownListFor(x => x.PromoType, Model.PromoTypes)</div> 
```

我想说，“如果下拉列表中的第二个值被选中，则显示另一个下拉列表”

鉴于以下 javascript，我应该用什么代替问号？我想避免使用硬编码的字符串。

```
<script type="text/javascript">
    $(function () {
        $('#list select').change(function () {
            if ($("#list select").val() == ??????????) {
                $("#over").show();
                $("#product").hide();
            }
            else if ($("#list select").val() == ??????????) {
                $("#product").show();
                $("#over").hide();
            }
            else {
                $("#over").hide();
                $("#product").hide();
            }
        });
    });
</script> 
```

**编辑**我最终在 if 语句中使用的代码如下：

```
$("#list select")[0].selectedIndex == 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T10:52:15.343

在这里，我已经完成了上述查询的完整解决方案。这里的演示链接如下：

**演示** [http://codebins.com/bin/4ldqp7f](http://codebins.com/bin/4ldqp7f)

**HTML**

```
<select id="mylist">
  <option value="default">
    --Select--
  </option>
  <option value="1">
    One
  </option>
  <option value="2">
    Two
  </option>
  <option value="3">
    Three
  </option>
  <option value="4">
    Four
  </option>
  <option value="5">
    Five
  </option>
</select>
<div id="list">
  <select>
    <option>
      Option1
    </option>
  </select>
  <select>
    <option>
      Option1
    </option>
    <option>
      Option2
    </option>
  </select>
  <select>
    <option>
      Option1
    </option>
    <option>
      Option2
    </option>
    <option>
      Option3
    </option>
  </select>
  <select>
    <option>
      Option1
    </option>
    <option>
      Option2
    </option>
    <option>
      Option3
    </option>
    <option>
      Option4
    </option>
  </select>
  <select>
    <option>
      Option1
    </option>
    <option>
      Option2
    </option>
    <option>
      Option3
    </option>
    <option>
      Option4
    </option>
    <option>
      Option5
    </option>
  </select>
</div> 
```

**jQuery**

```
$(function() {
    $("#mylist").change(function() {
        var selIndex = this.selectedIndex;
        if (selIndex > 0) {
            $("#list select").hide();
            for (i = 0; i < selIndex; i++) {
                $("#list select:eq(" + i + ")").show(400);
            }
        } else {
            $("#list select").hide(300);
        }
    });
}); 
```

**CSS**

```
#list select{
  display:none;
} 
```

**演示** [http://codebins.com/bin/4ldqp7f](http://codebins.com/bin/4ldqp7f)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T00:15:07.660

尝试以下操作：

```
if (this.selectedIndex == 1) {
  // Second value of the dropdown was picked (index starts at 0)
  $("#over").show();
  $("#product").hide();
} 
```

请注意，它[`.val()`](http://api.jquery.com/val/)为您提供了所选选项的`value`，而不是所选选项的索引，该索引由[`selectedIndex`](http://www.w3schools.com/jsref/prop_select_selectedindex.asp)属性给出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T00:20:04.820

既然你正在使用`jQuery`你可以试试这个

```
$('#list select').on('change', function(){
    if($(this).prop("selectedIndex")==0) // First item
    {
        // First item is selected
    }
    else if($(this).prop("selectedIndex")==1) // second item
    {
        // second item is selected
    }
}); 
```

# c# - 是什么导致我的分离器移动？

> ID：12344038
> 
> 赞同：1
> 
> 时间：2012-09-10T00:10:10.580
> 
> 标签：c#, events, hosted, splitcontainer

我遇到了一个问题。我有一个 .net 用户控件，上面有一个 splitcontainer 控件。.net 用户控件实际上托管在更旧的非 .net 遗留代码（可视对象）中的控件容器中。

我遇到的问题是，当将用户控件呈现给用户时，我在 splitcontainer 控件上触发了一个 splitter_moved 事件，但是我无法找到导致它实际移动的原因。在 VO 代码和 .net 内容之间的这种交互中，我遇到了许多奇怪的行为，但是我在 VO 容器控件中嵌入了其他几个用户控件，它们工作得很好。只是这个特殊的似乎有问题。

VO 容器控件都是相同的。嵌入其中的 .net 用户控件也是如此（它们都继承自同一个基类）。这就是为什么我很难理解为什么只有这个。

我想我真正想知道的是如何确定是什么导致拆分器在 splitcontainer 控件内移动。sender 和 eventargs 没有多大帮助，因为它们都只是引用 splitcontainer 控件（显然）。

帮助？？

编辑： splitter_moved 事件处理程序中的调用堆栈如下：

```
00000072    0.26412687  Method: Void splitContainerMain_SplitterMoved(System.Object, System.Windows.Forms.SplitterEventArgs)    
    00000073    0.26649699  Method: Void OnSplitterMoved(System.Windows.Forms.SplitterEventArgs)    
    00000074    0.26906940  Method: Void set_SplitterDistance(Int32)    
    00000075    0.27223459  Method: Void ApplySplitterDistance()    
    00000076    0.27425244  Method: Void ResizeSplitContainer()     
    00000077    0.27621472  Method: Void OnLayout(System.Windows.Forms.LayoutEventArgs)     
    00000078    0.27813032  Method: Void PerformLayout(System.Windows.Forms.LayoutEventArgs)    
    00000079    0.28007442  Method: Void System.Windows.Forms.Layout.IArrangedElement.PerformLayout(System.Windows.Forms.Layout.IArrangedElement, System.String)    
    00000080    0.28211826  Method: Void DoLayout(System.Windows.Forms.Layout.IArrangedElement, System.Windows.Forms.Layout.IArrangedElement, System.String)    
    00000081    0.28451827  Method: Void OnResize(System.EventArgs)     
    00000082    0.28713536  Method: Void OnSizeChanged(System.EventArgs)    
    00000083    0.28970191  Method: Void UpdateBounds(Int32, Int32, Int32, Int32, Int32, Int32)     
    00000084    0.29425862  Method: Void UpdateBounds()     
    00000085    0.29450893  Method: Void WmWindowPosChanged(System.Windows.Forms.Message ByRef)     
    00000086    0.29477015  Method: Void WndProc(System.Windows.Forms.Message ByRef)    
    00000087    0.29508862  Method: Void WndProc(System.Windows.Forms.Message ByRef)    
    00000088    0.29539761  Method: Void WndProc(System.Windows.Forms.Message ByRef)    
    00000089    0.29568058  Method: Void WndProc(System.Windows.Forms.Message ByRef)    
    00000090    0.29596806  Method: Void OnMessage(System.Windows.Forms.Message ByRef)  
    00000091    0.29627341  Method: Void WndProc(System.Windows.Forms.Message ByRef)    
    00000092    0.29659048  Method: IntPtr Callback(IntPtr, Int32, IntPtr, IntPtr)  
    00000093    0.29688439  Method: Boolean SetWindowPos(System.Runtime.InteropServices.HandleRef, System.Runtime.InteropServices.HandleRef, Int32, Int32, Int32, Int32, Int32)     
    00000094    0.29714754  Method: Void SetBoundsCore(Int32, Int32, Int32, Int32, System.Windows.Forms.BoundsSpecified)    
    00000095    0.29755905  Method: Void SetBoundsCore(Int32, Int32, Int32, Int32, System.Windows.Forms.BoundsSpecified)    
    00000096    0.29781467  Method: Void System.Windows.Forms.Layout.IArrangedElement.SetBounds(System.Drawing.Rectangle, System.Windows.Forms.BoundsSpecified)     
    00000097    0.29814151  Method: Void xLayoutDockedControl(System.Windows.Forms.Layout.IArrangedElement, System.Drawing.Rectangle, Boolean, System.Drawing.Size ByRef, System.Drawing.Rectangle ByRef)   
    00000098    0.29844967  Method: System.Drawing.Size LayoutDockedControls(System.Windows.Forms.Layout.IArrangedElement, Boolean)     
    00000099    0.29872790  Method: Boolean xLayout(System.Windows.Forms.Layout.IArrangedElement, Boolean, System.Drawing.Size ByRef)   
    00000100    0.29901370  Method: Boolean LayoutCore(System.Windows.Forms.Layout.IArrangedElement, System.Windows.Forms.LayoutEventArgs)  
    00000101    0.29931039  Method: Boolean Layout(System.Object, System.Windows.Forms.LayoutEventArgs)     
    00000102    0.29965651  Method: Void OnLayout(System.Windows.Forms.LayoutEventArgs)     
    00000103    0.29993618  Method: Void OnLayout(System.Windows.Forms.LayoutEventArgs)     
    00000104    0.30027559  Method: Void OnLayout(System.Windows.Forms.LayoutEventArgs)     
    00000105    0.30064937  Method: Void PerformLayout(System.Windows.Forms.LayoutEventArgs)    
    00000106    0.30087790  Method: Void System.Windows.Forms.Layout.IArrangedElement.PerformLayout(System.Windows.Forms.Layout.IArrangedElement, System.String)    
    00000107    0.30116984  Method: Void DoLayout(System.Windows.Forms.Layout.IArrangedElement, System.Windows.Forms.Layout.IArrangedElement, System.String)    
    00000108    0.30157101  Method: Void OnResize(System.EventArgs)     
    00000109    0.30196688  Method: Void OnResize(System.EventArgs)     
    00000110    0.30212274  Method: Void OnSizeChanged(System.EventArgs)    
    00000111    0.30244765  Method: Void UpdateBounds(Int32, Int32, Int32, Int32, Int32, Int32)     
    00000112    0.30264741  Method: Void UpdateBounds()     
    00000113    0.30294549  Method: Void WmWindowPosChanged(System.Windows.Forms.Message ByRef)     
    00000114    0.30337656  Method: Void WndProc(System.Windows.Forms.Message ByRef)    
    00000115    0.30359614  Method: Void WndProc(System.Windows.Forms.Message ByRef)    
    00000116    0.30389002  Method: Void WndProc(System.Windows.Forms.Message ByRef)    
    00000117    0.30451524  Method: Void WndProc(System.Windows.Forms.Message ByRef)    
    00000118    0.30456889  Method: Void OnMessage(System.Windows.Forms.Message ByRef)  
    00000119    0.30483985  Method: Void WndProc(System.Windows.Forms.Message ByRef)    
    00000120    0.30507788  Method: IntPtr Callback(IntPtr, Int32, IntPtr, IntPtr)  
    00000121    0.30540919  Method: Boolean SetWindowPos(System.Runtime.InteropServices.HandleRef, System.Runtime.InteropServices.HandleRef, Int32, Int32, Int32, Int32, Int32)     
    00000122    0.30566931  Method: Void SetBoundsCore(Int32, Int32, Int32, Int32, System.Windows.Forms.BoundsSpecified)    
    00000123    0.30598581  Method: Void SetBounds(Int32, Int32, Int32, Int32, System.Windows.Forms.BoundsSpecified)    
    00000124    0.30637357  Method: Void set_Height(Int32)  
    00000125    0.30679765  Method: Void ContainerCtrl.ResizeForm(ContainerCtrl*, WTL.CRect)    
    00000126    0.30718428  Method: Int32 ContainerCtrl.OnSize(ContainerCtrl*, UInt32, UInt32, Int32, Int32*)   
    00000127    0.30755892  Method: Int32 ContainerCtrl.ProcessWindowMessage(ContainerCtrl*, HWND__*, UInt32, UInt32, Int32, Int32*, UInt32)    
    00000128    0.30793831  Method: Int32 ATL.CDialogImplBaseT<ATL::CWindow>.DialogProc(HWND__*, UInt32, UInt32, Int32)     
    00000129    0.30838418  Method: Int32 ATL.CAxDialogImpl<ContainerCtrl,ATL::CWindow>.DialogProc(HWND__*, UInt32, UInt32, Int32)  
    00000130    0.30881271  Method: Int32 SetWindowPos(HWND__*, HWND__*, Int32, Int32, Int32, Int32, UInt32)    
    00000131    0.30922171  Method: Int32 ATL.CComControlBase.IOleInPlaceObject_SetObjectRects(ATL.CComControlBase*, tagRECT*, tagRECT*)    
    00000132    0.30961114  Method: Int32 ATL.IOleInPlaceObjectWindowlessImpl<ContainerCtrl>.SetObjectRects(ATL.IOleInPlaceObjectWindowlessImpl<ContainerCtrl>*, tagRECT*, tagRECT*) 
```

编辑：好的，看起来 VO 容器控件上的 resize 事件在向用户显示时正在触发此事件，但在其他事件上未触发。

很纠结？！？

# c# - 如何在 C# 中进行符号样条曲线拟合？

> ID：12344041
> 
> 赞同：1
> 
> 时间：2012-09-10T00:10:32.093
> 
> 标签：c#, spline

在 Maple 中，我们可以使用 spline() 来进行符号曲线拟合。例如，给定

```
enter code here
(x1,x2,x3)=（1，2，3）and (y1,y2,y3),we can get the fitted spline function:
y=f1(y1,y2,y3)*x1+g1(y1,y2,y3)*x^2+h1(y1,y2,y3)*x^3 when 1<x<2
y=f2(y1,y2,y3)*x1+g2(y1,y2,y3)*x^2+h2(y1,y2,y3)*x^3 when 2<x<3 
```

如何在 C# 中实现这一点？使用哪个库？谢谢！

# jquery - 多个跨域 AJAX 调用。为什么 IE<9 会忘记会话？

> ID：12344042
> 
> 赞同：2
> 
> 时间：2012-09-10T00:10:51.340
> 
> 标签：jquery, ajax, json, internet-explorer, safari

我有带有 4 个 AJAX 请求的页面，这些请求会触发以将订单请求发送到第 3 方系统。首先，发送产品信息，然后将客户详细信息附加到订单上，然后是适用于订单的任何注释，最后是第四次“完成”订单的请求。

在 IE9、Firefox (mac + pc)、Safari (mac + pc) 和 Chrome (mac + pc) 中一切正常，但是，当从 IE<9 发送请求时，正确触发 AJAX 请求并返回正确响应没有错误，但似乎它为每个呼叫通过不同的会话发送，因此第 3 方系统将 4 个不同的请求识别为来自不同的会话。

如果我通过 IE8 中的地址栏一一发送请求，一切都按预期工作并且顺序捆绑在一起，只有通过 jQuery .ajax 发送时才会忘记会话。

我能做些什么来强制这些浏览器保持会话吗？

这是我的代码：

```
//function to add the product to the cart and cascade down to finalise the order
function addToCart(){
    var jsonurl = "xxxxx/additem?variationID="+$('input[name="variationID"]').val()+"&token="+APIKey+"&callback=?";
    $.ajax({
        url:jsonurl,
        type:'GET',
        dataType:'json',
        success:function(data){
            if (data.response == "success"){
                addLeadCustomer();
            } else {
                displayEnquiryError();
            }

        },
        error:function(data){
            displayEnquiryError();
        }
    })  
}

//function to add the lead customer and cascade down to finalise the order
function addLeadCustomer(){
    //add the lead customer to the order in J6
    jsonurl = "http://xxxxx/leadcustomer?token="+APIKey+"&details[FirstName]="+$('input[name="Name"]').val()+"&details[Email]="+$('input[name="Email"]').val()+"&details[HomePhone]="+$('input[name="Phone"]').val()+"&callback=?";
    $.ajax({
        url:jsonurl,
        type:'GET',
        dataType:'json',
        success:function(data){
            if (data.response.ID > 0){
                updateOrderAdditionalInfo();
            }else{
                displayEnquiryError();
            }
        },
        error:function(data){
            displayEnquiryError();
        }
    })
}

//function to update the order with the additional info and cascade down to finalise the order
function updateOrderAdditionalInfo(){
    //update the order with additional information
    jsonurl = "http://xxxxx/updateorder?token="+APIKey+"&details[Notes]="+$('input[name="EnquiryDate"]').val()+"\n\n"+$('select[name="NumberNights"]').val()+" nights\n\n"+$('select[name="NumberPeople"]').val()+" people\n\n"+$('textarea[name="Comments"]').val()+"&callback=?";
    $.ajax({
        url:jsonurl,
        type:'GET',
        dataType:'json',
        success:function(data){
            if (data.response == "success"){
                completeOrder();

            }else{
                displayEnquiryError();
            }
        },
        error:function(data){
            displayEnquiryError();
        }
    });
}

//function to complete the order
function completeOrder(){
    //complete the "order"
    jsonurl = "http://xxxxx/completeorder?token="+APIKey+"&callback=?";
    $.ajax({
        url:jsonurl,
        type:'GET',
        dataType:'json',
        success:function(data){
            if (data.response == "success"){
                $('.waiting').fadeOut(function(){
                    $('.enquirySuccess').fadeIn();
                    $('.cartItemsHolder').empty();
                    $('.cartItemsHolder').html('We have received your itinerary');
                })
            }
        },
        error:function(data){
            displayEnquiryError();  
        }
    });
}

$('#Form_enquiryForm').submit(function(){
    validateForm();
    if (failedValidation == 0){
        $(this).fadeOut(function(){
            $('.waiting').fadeIn();
            //add the package to the cart
            addToCart();
        });
    }
    return false;
}); 
```

更新：我遇到了一些帖子，这些帖子给人的印象可能是因为 IE8 的缓存。这导致我在我的 AJAX 调用中尝试 cache:false 并向查询字符串 (&cachebuster="+Math.random()) 添加一个随机数参数，但都没有解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T02:53:36.147

我发现这是因为 IE8 对 3rd 方 cookie 的默认处理。它阻止了他们。通过在 IE8 中调低我的安全设置，我能够获得所需的行为。看起来我们将不得不重新编写 API 以传回一个标识符，我们每次都可以触发该标识符以将请求绑定在一起。

更新：Safari 默认也拒绝 3rd 方 cookie。在测试设置 cookie 之前，我已经从 Safari 的地址栏中触发了 API。在我重置 Safari 并重新测试后，它表现出与 IE8 相同的行为。

Update2：我们实际上以不同的方式解决了这个问题。我们设置了一个 API 来设置会话并关闭窗口。然后，使用 jQuery，我们检测浏览器。如果是 IE<=8 或 Safari，我们会弹出一个新 API 的弹出窗口（这会设置会话并立即关闭窗口）。我们现在可以在我们的应用程序中使用我们的会话。我们还使用 jQuery 设置了一个 cookie，其到期时间与购物车中的会话相同，以让我们知道我们已经设置了会话。

它无论如何都不完美。例如，如果 jQuery cookie 丢失了，那么我们必须在购物车上作为一个新会话开始。如果购物车会话丢失，那么我们将在购物车不记得我们的情况下继续在不知不觉中开火，这使我们回到最初的问题......并且不要让我开始使用弹出窗口阻止程序:)快速修复，直到我们实施更强大的东西。

# assembly - 两遍汇编器如何处理由汇编器扩展的指令？

> ID：12344043
> 
> 赞同：1
> 
> 时间：2012-09-10T00:11:19.443
> 
> 标签：assembly, mips, relative-addressing

考虑以下 MIPS 程序集（我正在使用 MIPS，因为这是[我的计算机组织和设计](https://rads.stackoverflow.com/amzn/click/com/0123747503)书使用的）：

```
beq   $s0, $s1, L1
add   $t0, $t1, $t2
...
L1: ... 
```

因为 MIPS 只使用 16 位作为`beq`指令中的 PC 相对地址，如果`L1`离 足够远`beq`，汇编器必须用两条指令（一个跳转有 26 位地址）和一个新标签来替换它：

```
bne   $s0, $s1, L2
j     L1
L2:   add $t0, $t1, $t2
...
L1: ... 
```

如果这还不够，它可能需要多次跳转。

汇编器在知道`L1`. 由于它最初不知道`beq`（1 条指令或 2 条指令）的大小，它如何在第一次通过时使位置计数器保持最新？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T21:29:40.380

有多种方法：

*   只为一条指令保留空间，如果发现不够，请扩展它。
*   为两条指令保留足够的空间，然后用`nop`(s) 填充未使用的空间或压缩代码。

在任何一种情况下，您都不必立即生成（半）最终机器代码，也不需要重新扫描源代码并重新组装它，尽管这是可能的。您可以首先生成“中间”代码或其表示，然后对其进行修复，这与链接器所做的差不多。

说到哪个[链接器]，还有另一种选择：

*   将此部分留给链接器处理。这不是很难。现在的编译器（例如 Microsoft Visual C++）可以进行链接时代码优化。

# linux - Linux 上的 C++ hello world

> ID：12344045
> 
> 赞同：1
> 
> 时间：2012-09-10T00:11:38.613
> 
> 标签：linux, eclipse, g++

在 Windows 下，我安装了 MinGW 和 Eclipse，并使用 MinGW GCC 工具链创建了一个名为 foo 的新 C++ 项目，它可以编译、运行甚至调试。精彩的。

仍然在 Windows 下，我安装了 Cygwin，这是一项对我的互联网连接造成压力的史诗般的任务。最终我指定了 Cygwin GCC 工具链和 bar 的项目名称。这可以编译并运行，但不能逐步调试（声称它找不到源）。

在 Linux 下，特别是 mint13，我安装了 Eclipse 的全唱全舞 C++ 版本，并创建了一个新的 C++ 项目，并选择了更鼓舞人心的名称 baz 和 Linux GCC 工具链。Eclipse 抱怨它找不到 iostream。

我对此感到很困惑。如果我启动一个终端窗口并运行 g++，就会发现它，很明显我至少有一些 GNU C++ 的东西。我不知道缺少什么。Linux 对我来说是一个新世界。任何人都可以提供指导吗？

作为记录，生成的代码位于名为 foo.cpp（或根据项目名称的 bar.cpp）的文件中，如下所示：

```
#include <iostream>
using namespace std;

int main() {
  cout << "Hello World" << endl; // prints Hello World
  return 0;
} 
```

@bmargulies - 我知道你的评论是在开玩笑，但我不会使用粉红色的emacs。我会在 Windows 工作站上设置 SAMBA 并使用 Textpad，因为我有足够的东西来学习，而无需不必要地学习使用新的文本编辑器。我选择 Eclipse 的原因是徒劳地希望它可以提供一个带有集成调试器的工作基线，从中可以探索 Linux 上 C++ 的勇敢新世界。结合 MinGW，它*确实*在 Windows 上提供了这一点。

我知道这里最大的问题不是工具，而是我的无知和来自不同世界的一系列期望。缺乏使用 C++ 的经验使情况更加复杂——我在 C++ 方面的唯一经验是 15 年前使用 TurboC。

一个非常混乱的来源是用于解析库引用的机制。

很多项目似乎都使用 make，据我所知，它是一种用于编译和链接项目或项目集的脚本文件。Make 似乎有多种风格，似乎也有使用 makefile 的替代方案以及不使用的替代方案。

[咒骂] 什么乱七八糟的。

@Basile - 我不喜欢使用 Eclipse，我很清楚脚本相对于点击使用 IDE 配置的好处（尤其是您可以对构建过程进行源代码控制）。我感谢你的阅读清单。也许这是一个愚蠢（或不成熟）的问题，但我不得不问：如果没有像 Eclipse 这样将编辑器与构建工具集成在一起的 IDE，是否可以进行逐步调试？

@bmargulies - 我同意你的观点，工具链定义可能有问题，但我缺乏对此进行有意义调查的背景和经验。如上所述，我在 Windows 下使用不同的工具链取得了不同程度的成功，因此可以合理地得出结论，工具链是问题的一个重要因素。唉，我不能在 Linux 下选择一个 MinGW 工具链。

* * *

按照 Norm 的建议，我能够从命令行编译 foo.cpp。hello world 程序以所需的行为执行，但我仍然不知道 g++ 是如何在花哨的 IDE 工具没有解决 iostream 时知道如何解析 iostream 的。

向 foo 添加了几行代码并对其进行编译，以试用 gdb。有用！谁能想到您可以使用终端窗口进行逐步调试！不过有点笨拙。

虽然 Basile 认为不需要花哨的 IDE 显然是正确的，但这有点像说我不需要摩托车，因为我可以走路。我会看看提到的其他 IDE，但我怀疑它们都会使用相同的工具链，因此都会受到我错误配置的任何影响。

* * *

Basile，请原谅我移动了球门柱。我最初的目标确实是“编译并运行 hello.cpp”，但 gdb 不可避免地是下一步。它有效，如果这是 80 年代初在 uni 使用电传打字机，我现在可能会很高兴。但这不是八十年代初，我在过去的十年里一直在使用语法着色、自动完成、变量嗅探编辑和继续调试，所以（我是忘恩负义的草皮）现在我想要，嗯，一切！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T02:51:56.720

我之前使用过 eclipse c/C++ 版本，遇到过很多同样的问题。对我来说，eclipse 很难使用。我建议使用命令行来编译 c/c++ 程序。在我看来，理解如何创建可执行文件更容易也很重要。

`g++ -Wall -g Hello.cpp -o Hello`

将产生一个可执行的Hello。`-Wall`是一个选项，在您编译程序时会为您提供更多警告。如果你不修复它们，一些警告会使你的程序崩溃，所以很高兴能提前看到它们。`-g`为您提供调试符号，以便 gdb 能够逐步执行程序。

当你通过使用进入 gdb 时，`gdb Hello`你可以查看这个[gdb 备忘单](http://darkdust.net/files/GDB%20Cheat%20Sheet.pdf)。

一旦您开始使用多个源文件编写程序，您将需要了解编译中的两个主要步骤。第一步将每个单独的源文件转换为目标文件。下一步将所有目标文件链接在一起以生成可执行文件。[此链接](http://www.cprogramming.com/compilingandlinking.html)可能解释编译和链接，显然维基百科也是该信息的良好来源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T01:00:57.967

您不需要像 Eclipse 这样的花哨的 IDE。在 Linux 下开发的常用方法是使用多种工具。

使用类似`emacs`或的编辑器`gedit`来编辑您的`helloworld.cpp`文件。在您的终端中键入`emacs`或`gedit`以启动编辑器（可能后跟`helloworld.cpp`即编辑文件的名称[s]）。

然后，使用以下命令编译

```
g++ -Wall -g helloworld.cpp -o helloworld 
```

您在终端中输入的内容。改进您的代码，直到没有给出警告。如果您希望 GCC 进行优化（或进一步优化），您可以`-O`在上面添加。如果您想对二进制可执行程序进行基准测试或发布，您应该要求 GCC 进行优化。请注意，它知道如何链接标准 C++ 库 ( )，并且标头位于 g++ 已知的标准位置（您可以添加一个参数以使其显示正在发生的事情）。如果要使用其他库，则需要更多参数。`-g``-O2``-O3``g++``libstdc++.so``-v``g++`

^(参数的顺序`g++`很重要，特别是对于`-I`选项（包括目录）和`-l`（库）。)

如果你想调试你的程序（避免向 GCC 询问优化），输入

```
gdb helloworld 
```

这将运行调试器。了解更多`gdb`（当然你可以用 gdb 一步一步来做；你首先会使用`next`, `step`, `break`,`backtrace`的命令`gdb`，其他的——例如`watch`有时非常有用。）

如果您想在没有调试器的情况下运行程序，只需键入

```
./helloworld 
```

稍后，您将希望在多个编译单元中开发一个程序。学会使用像这样的抱石`make`。还有其他构建器程序，例如[omake](http://omake.metaprl.org/index.html)和许多其他程序。

阅读有关[GCC](http://gcc.gnu.org/)（提供`g++`）、[Gnu Make](http://www.gnu.org/software/make/)、[GDB](http://www.gnu.org/software/gdb/)（gnu 调试器）、[Emacs](http://www.gnu.org/software/emacs/)、[GIT 版本控制的更多信息](http://git-scm.com/)

我已将我的 emacs 配置为`make`通过按 F12 键在其中运行。如果你愿意，你可以在 emacs 下编译。

对于用 C++ 编码的图形用户界面应用程序，学习使用[Qt](http://qt.nokia.com/)。

PS。Linux 比其他系统更面向命令行。相信我们，这具有令人难以置信的优势。但这是在其他系统（例如 Microsoft 销售的系统）上的不同工作方式。

PS。如果你喜欢 IDE，你可以考虑[geany](http://www.geany.org/)、[anjuta](http://projects.gnome.org/anjuta/)、[kate](http://kate-editor.org/)。然而，在典型的 Linux 发行版（Debian、Ubuntu、Fedora 等）中，很少有免费软件（用 C 或 C++ 编码）是使用这些（或使用 Eclipse，在 Linux 上通常与 Java 开发相关）构建的。恕我直言，这很重要。

# iphone - 选择图像然后移动它们

> ID：12344046
> 
> 赞同：0
> 
> 时间：2012-09-10T00:11:50.500
> 
> 标签：iphone, ios, xcode

我试图弄清楚如何首先选择一个对象，然后我才能移动它。例如，我想先通过触摸它来选择牛，然后我可以移动它。原因是当我触摸屏幕时，它正在移动牛和牛1。当我一次只想移动一头牛时。任何帮助将不胜感激。

```
-(void) touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {

    UITouch *touch = [touches anyObject];

    CGPoint touchLocation = [touch locationInView:touch.view];

    cow.center = CGPointMake(touchLocation.x, touchLocation.y);

    cow1.center = CGPointMake(touchLocation.x, touchLocation.y);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T01:48:32.383

尝试使用 UIPanGestureRecognizer，如下所示：

```
@synthesize myImage; //UIImageView

- (void)viewDidLoad
{
    [super viewDidLoad];
    [self startMoveImage];
}

-(void) startMoveImage{
    UIPanGestureRecognizer *panGestureRecognizer = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(pan:)];
    [self.view addGestureRecognizer:panGestureRecognizer];
}

- (void)pan:(UIPanGestureRecognizer *)gesture
{
    if ((gesture.state == UIGestureRecognizerStateChanged) ||
        (gesture.state == UIGestureRecognizerStateEnded)) {

        CGPoint position = [gesture locationInView:[myImage superview]];
        [myImage setCenter:position];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T01:39:30.580

有很多方法可以实现这种事情。这取决于您的图形是如何实现的，除其他外，请查看此 Apple 示例代码：

[http://developer.apple.com/library/ios/#samplecode/Touches/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/Touches/Introduction/Intro.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T01:44:02.747

标准解决方案是为您的两个奶牛对象添加单独的手势识别器，例如，在`viewDidLoad`：

```
UIPanGestureRecognizer *panCow1 = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(moveCow:)];
[cow1 addGestureRecognizer:panCow1];
// if non ARC, make sure to add a line that says
// [panCow1 release];

UIPanGestureRecognizer *panCow2 = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(moveCow:)];
[cow2 addGestureRecognizer:panCow2];
// if non ARC, make sure to add a line that says
// [panCow2 release]; 
```

然后你的`moveCow`方法看起来像：

```
- (void)moveCow:(UIPanGestureRecognizer *)sender
{
    if (sender.state == UIGestureRecognizerStateChanged)
    {
        CGPoint translate = [sender translationInView:self.view];

        sender.view.center = CGPointMake(sender.view.center.x + translate.x, sender.view.center.y + translate.y);
    }
} 
```

我没有测试过这段代码，但你明白了。这就是我通常如何移动单独的子视图...

# java - 尝试使用扫描仪读取多个输入时，我无法让它读取整数和字符

> ID：12344050
> 
> 赞同：2
> 
> 时间：2012-09-10T00:12:12.967
> 
> 标签：java, java.util.scanner

这是代码

```
 public void promptUser(){
        Scanner scan = new Scanner(System.in);
        System.out.print("Pick a coordinate [row col] or press [q] to quit.");
        int row = 0;
        int row = 0; 
        String line = scan.nextLine().trim();
        String[] contents = line.split(" ");
        if (contents[0] == "q"){
            isRunning = false;
            System.exit(0);
        }// if quit
        if (contents.length < 1 || contents.length > 2){
            System.out.print("Invalid Response. Try again.");
            promptUser();
        }// if wrong amount of input
        else {
            row = Integer.parseInt(contents[0]);
            col = Integer.parseInt(contents[1]);
        }// parse ints else
        if (inBounds(row, col) == true){
            if(!(board[row][col] == 'c'){
                click(row, col);
            }// has been clicked
        }// in bounds?
        else{
            System.out.print("Invalid response. Try again.");
            promptUser();
        }// else error
    }// promptUser method 
```

这是错误：

```
Exception in thread "main" java.lang.NumberFormatException: For input string: "q"    
     at    java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)    
at java.lang.Integer.parseInt(Integer.java:481)     
at java.lang.Integer.parseInt(Integer.java:514)    
at Minesweeper.promptUser(Minesweeper.java:197)    
at Driver.main(Driver.java:12) 
```

此方法旨在从用户那里获取输入，检查它是否有错误。如果它是正确的，那么如果输入“q”则它应该退出程序，如果它是尚未被点击的边界内的两个整数，则“点击”该坐标。如果没有此错误，我无法输入“q”。我也得到一个`outOfBounds exception`输入任何整数的值。（是的，这是家庭作业，我已经搜索了很长时间，但还没有完全找到如何解决这个问题。）非常感谢任何和所有的帮助。

这是我使用的 inBounds 方法，以及初始化（板子初始化的地方）

```
 public void initialize(){
    isRunning = true;
    board = new char[this.rows][this.cols];
    for (int i = 0; i < board.length; i++){
        for(int j = 0; j < board[i].length; j++){
            board[i][j] = 'e';

        }
    }
    mineBoard = new boolean[this.rows][this.cols];

    for (int i = 0; i < mineBoard.length; i++){
        for (int j = 0; j < mineBoard[i].length; j++){
            mineBoard[i][j] = false;
        }
    }
    Random bob = new Random();
    Random sally = new Random();
    for (int i = mines; i > 0; i--){
        int mineX = bob.nextInt(10);
        int mineY = sally.nextInt(10);
        if (mineBoard[mineX][mineY] == false){
            mineBoard[mineX][mineY] = true;
        }
        else{
            i++;
        }
    }

} 
```

这就是初始化......这里是 inBounds

```
 private boolean inBounds(int row, int col){
        if (row < 0 || row > board.length){
            return false;
        }
        if (col < 0 || col > board[0].length){
            return false;
        }else
            return true;
        } 
```

还有什么可以帮助的吗？我用 q 解决了这个问题，但我一直遇到越界问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T00:25:47.763

使用`contents[0].equals("q")`. 否则，平等将失败，因此您`NumberFormatException`稍后。您可以了解更多关于这个[常见错误](http://blog.enrii.com/2006/03/15/java-string-equality-common-mistake/)的信息。

基本上发生的事情是你有两个`String`s - 文字`"q"`和`split`用户输入的结果。*虽然两者在语义上*可能是等价的（即`contents[0].equals("q")`），但它们很可能并不*相同*，因为它们是根据用户输入构建的。由于它们不是*相同*的对象，`==`因此会失败，从而导致您的代码流继续进行。它将尝试调用`Integer.parseInt("q")`-- 失败，`NumberFormatException`因为它是一个无效的数字。

您的“ *outOfBounds 异常*”很可能`ArrayIndexOutOfBoundsException`是由于您的`row`,`col`对您的数组来说太大（事实上，它们超出了它 - 因此超出了范围）。要验证这一点，您需要显示更多代码。

* * *

此外，您不需要编写`if (inBounds(row, col) == true)`. 任何`boolean`表达式`b`都会满足重言式`b <=> b == true`，即它只是同一性。你可以写得更简洁更简单`if (inBounds(row, col))`。

此外，您应该避免现在的递归。在重复无效响应的情况下，`StackOverflowException`可以触发a。使用无界递归时要小心，因为 Java 调用堆栈*是*有界的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T00:28:59.310

当程序员刚开始时，您遇到的问题很常见。基本上， == 运算符比较您正在比较的两个对象的引用。对于字符串（和其他对象），这几乎总是错误的。在你的情况下，你应该使用类似的东西：

```
contents[0].equals("q") 
```

这将调用 String 类的 equals 方法，该方法将正确比较两个 String 的内容。

# php - PHP PDO 与 MySQL 扩展问题

> ID：12344053
> 
> 赞同：-4
> 
> 时间：2012-09-10T00:13:06.617
> 
> 标签：php, mysql, pdo

目前，我正在开发我的第一个网站。现在，我正在实现 PHP 的 MySQL 扩展。然而，从我一直在阅读的内容来看，使用 PHP 的 PDO 将是一种更好的方法，原因有很多，例如使用占位符等等。

在浏览了一些代码之后，我对一些事情感到好奇。例如，假设我创建了一个连接和查询：

```
$pdo = new PDO('mysql:host=localhost;dbname=something','root','abc');

$sql="select id from users where username = :username and password = :password";

$stmt = $pdo->prepare($sql);

$stmt->bindParam(":username",$_POST['username']);
$stmt->bindParam(":password",$_POST['password']);

$stmt->execute(); 
```

首先，是否 $stmt->execute(); 实际执行整个查询？如果是这样，为什么？如果是这种情况，我的假设是，在某种程度上，它本质上与准备好的语句相关联，因此它绑定到准备好的 sql 语句。

此外，很明显准备好的语句可以更好地防止 sql 注入。我的问题是什么时候在 PDO 中清理了用户输入。为了解释，在 MySQL 扩展中，诸如 mysql_real_escape_string() 之类的函数必须在清理时进行硬编码。

如果使用 MySQL 扩展时不存在使用 PDO 的任何其他复杂性，我很想知道。

任何反馈表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T00:20:55.890

> 此外，很明显准备好的语句可以更好地防止 sql 注入。我的问题是什么时候在 PDO 中清理了用户输入。为了解释，在 MySQL 扩展中，诸如 mysql_real_escape_string() 之类的函数必须在清理时进行硬编码。

理想情况下，它作为数据直接传递给数据库驱动程序（头韵！总是很棒）。但是，如果 PDO 必须模拟准备好的语句，那么它会在执行查询时完成。

> 首先，是否 $stmt->execute(); 实际执行整个查询？如果是这样，为什么？如果是这种情况，我的假设是，在某种程度上，它本质上与准备好的语句相关联，因此它被绑定*[原文如此]*到准备好的 sql 语句。

是的。`$stmt->execute()`已连接到，`$stmt`因为您正在调用它`$stmt`。我不确定如何进一步解释这一点。

# sql-server-2008 - 存储过程表的表类型参数输入可以是可选的吗

> ID：12344055
> 
> 赞同：0
> 
> 时间：2012-09-10T00:13:35.097
> 
> 标签：sql-server-2008

如果我在存储过程定义中给出一个表类型变量输入，当用户使用这个存储过程时，表输入是必须的吗？

我发现我无法为表输入分配默认空值...

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T07:19:15.247

未提供参数值时，默认为空表。

检查这个：

```
CREATE TYPE tblType AS TABLE
(
id INT, name VARCHAR(30)
);

alter proc testTabl(
 @t tblType  READONLY 
 ) 
As
select * from @t

exec testTabl 
```

因此，如果您在此处默认不提供表值参数，它将被设置为空表。

# c - C中的数组赋值

> ID：12344056
> 
> 赞同：0
> 
> 时间：2012-09-10T00:13:37.520
> 
> 标签：c, arrays

如果我定义了这个：

```
typedef char word[30];
typedef struct {
    int num;
    word group[30];
} paragraph; 
```

然后在体内：

```
int

main(int argc, char **argv) {

    paragraph p;

    word w = "BLA";

    return 0;

} 
```

如何在数组 p 中分配 w，然后根据 p 分配 printf w

我知道这是错误的，但例如：

```
 p[][1] = w;

    printf("%s", p[][1]); 
```

请帮助一个菜鸟

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T00:15:23.647

数组不可赋值。将您的数组初始化为适当的大小并根据需要设置每个元素或存储一个指针。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T00:27:56.337

假设您真的打算使用 C99 中引入的*灵活数组成员*，您需要编写如下代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

typedef char word[30];
typedef struct {
    int num;
    word group[];
} paragraph;

int main(void)
{
    paragraph *p = malloc(sizeof(*p) + 1 * sizeof(word));
    word w = "BLA";
    strcpy(p->group[0], w);
    printf("Word: %s\n", p->group[0]);
    free(p);
    return 0;
} 
```

这是适度棘手的代码。避免使用灵活的数组成员，直到您了解所有这些都在做什么。在此之前，`group`将段落的成员变为`word`：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

typedef char word[30];
typedef struct {
    int num;
    word group;
} paragraph;

int main(void)
{
    paragraph p;
    word w = "BLA";
    strcpy(p.group, w);
    printf("Word: %s\n", p.group);
    return 0;
} 
```

关键点仍然是您不能直接分配数组，需要使用`strcpy()`or 与字符串的相对值，`memmove()`或者可能`memcpy()`与其他类型一起使用。您通常可以分配包含数组的结构（尽管您不能对包含灵活数组成员的结构执行此操作），但这是因为您可以进行结构分配并且结构包含数组是巧合。

* * *

> 但是对于词组，如果你放 group[30]，这对代码的其余部分有什么影响？

这是按照您的要求执行的代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

typedef char word[30];
typedef struct
{
    int num;
    word group[30];
} paragraph;

int main(void)
{
    paragraph p;
    word w = "BLA";
    strcpy(p.group[0], w);
    printf("Word: %s\n", p.group[0]);
    return 0;
} 
```

在这个结构下，假设`sizeof(int) == 4`，你会发现，`sizeof(paragraph) == 904`因为你声明了一个 30 个单词的数组，而每个单词是一个 30 个字符的数组。这种结构将允许您在段落中添加多个单词（而且我写的大多数段落肯定包含多个单词！）。您仍然必须使用`strcpy()`将单词 from 复制`w`到 的元素`p.group`：

```
int main(void)
{
    paragraph p;
    word w = "BLA";
    strcpy(p.group[0], w);
    strcpy(p.group[1], "Porcupine");
    strcpy(p.group[2], "Elephant");
    p.num = 3;
    printf("Word: %s\n", p.group[0]);
    printf("Paragraph:");
    for (int i = 0; i < p.num; i++)
        printf(" %s", p.group[i]);
    putchar('\n');
    return 0;
} 
```

虽然使用`typedef`like并没有错`word`，但这不是我通常会做的事情。它很容易导致更多的混乱而不是启蒙。如果您的大部分单词长度明显少于 29 个字符，也可能导致内存浪费。（您有责任确保在数组元素中存储的字不超过 29 个字符（加上终止的空字节）`p.group`。） OTOH，64 位软件的内存分配开销很容易导致浪费的空间一个词没有意义。

# string - 如何在clojure中将字符串向量传递给java.shell？

> ID：12344058
> 
> 赞同：3
> 
> 时间：2012-09-10T00:14:00.153
> 
> 标签：string, vector, clojure

我正在尝试利用`(require [clojure.java.shell :refer [sh]])`在 clojure 中执行 rsync 备份。函数 sh 将字符串作为参数，例如：

```
(sh "ls" "-las" "/home/") 
```

但是，我发现自己的数据作为字符串向量到达 sh（例如 ["ls" "-las" "/home/"]），这当然会失败。这似乎是一个非常容易解决的问题，但我刚刚开始使用 clojure（以及 lisp 和函数式编程），我似乎无法让它工作。如何处理要传递给 sh 的向量？

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T01:07:04.960

听起来您需要使用[`apply`](http://clojuredocs.org/clojure_core/clojure.core/apply)：

```
(apply sh arg-vector) 
```

该`apply`函数还会在其他 LISP 中弹出，允许您将参数列表传递给给定函数。在 Clojure 中，您不仅限于列表，还包括任何[`seq`](http://clojuredocs.org/clojure_core/clojure.core/seq)-able 对象，包括向量。

# javascript - jQuery .getJSON 失败，语法错误？

> ID：12344059
> 
> 赞同：0
> 
> 时间：2012-09-10T00:14:04.943
> 
> 标签：javascript, jquery, json, syntax-error, getjson

我正在尝试解析一个包含一些简单关键词的 JSON 文件。我的功能没有运行。查看 jQuery .getJSON 文档，我意识到最可能的解释是语法错误。虽然我的代码看起来很彻底，但我今天只学习了 JSON。谁能帮我吗？抱歉，我知道这是很多数据。

**JavaScript 代码：**

```
$(document).ready(function() {
$.getJSON('edit/key.json', function(data2) {
    console.log(data2);
    //more code
}); 
```

});

**JSON 代码：**

```
{
"RAM": [
    {"term" : "ram"},
    {"term" : "memory"},
    {"term" : "access"},
    {"term" : "random"},
    {"term" : "component"},
    {"term" : "multi-tasking"},
    {"term" : "multi"},
    {"term" : "tasking"},
    {"term" : "gigabyte"},
    {"term" : "temporary"}
],
"Graphics Card": [
    {"term" : "component"},
    {"term" : "graphic"},
    {"term" : "graphics card"},
    {"term" : "processing"},
    {"term" : "processors"},
    {"term" : "unit"},
    {"term" : "card"},
    {"term" : "3D"},
    {"term" : "image"},
    {"term" : "media"},
    {"term" : "gaming"},
    {"term" : "game"},
    {"term" : "nvidia"},
    {"term" : "amd"},
    {"term" : "chip"},
    {"term" : "clock"},
    {"term" : "speed"},
    {"term" : "GPU"},
    {"term" : "video"},
    {"term" : "DVI"},
    {"term" : "DisplayPort"},
    {"term" : "HDMI"}
],
"Ports": [
    {"term" : "port"},
    {"term" : "interface"},
    {"term" : "external"},
    {"term" : "USB"},
    {"term" : "devices"},
    {"term" : "3.0"},
    {"term" : "2.0"},
    {"term" : "VGA"},
    {"term" : "DVI"},
    {"term" : "HDMI"},
    {"term" : "display"},
    {"term" : "port"},
    {"term" : "memory"},
    {"term" : "card"},
    {"term" : "SD"},
    {"term" : "stick"},
    {"term" : "ethernet"},
    {"term" : "input"},
    {"term" : "output"},
],
"CPU": [
    {"term" : "cpu"},
    {"term" : "central"},
    {"term" : "processing"},
    {"term" : "unit"},
    {"term" : "computing"},
    {"term" : "compute"},
    {"term" : "intel"},
    {"term" : "AMD"},
    {"term" : "processors"},
    {"term" : "desktop"},
    {"term" : "laptop"},
    {"term" : "i3"},
    {"term" : "i5"},
    {"term" : "i7"},
    {"term" : "core"},
    {"term" : "turbo"},
    {"term" : "boost"},
    {"term" : "gaming"},
    {"term" : "media"},
    {"term" : "overclocked"},
    {"term" : "clock"},
    {"term" : "speed"}
],
"Hard Drive": [
    {"term" : "store"},
    {"term" : "data"},
    {"term" : "hard"},
    {"term" : "drive"},
    {"term" : "video"},
    {"term" : "music"},
    {"term" : "picture"},
    {"term" : "document"},
    {"term" : "media"},
    {"term" : "processor"},
    {"term" : "gigabyte"},
    {"term" : "terabyte"},
    {"term" : "rpm"},
    {"term" : "cache"}
],
"Operating System": [
    {"term" : "operating"},
    {"term" : "system"},
    {"term" : "os"},
    {"term" : "device"},
    {"term" : "windows"},
    {"term" : "mac"},
    {"term" : "linux"},
    {"term" : "ubuntu"},
    {"term" : "chrome"},
    {"term" : "xp"},
    {"term" : "vista"},
    {"term" : "7"},
    {"term" : "8"},
    {"term" : "home"},
    {"term" : "premium"},
    {"term" : "professional"},
    {"term" : "ultimate"},
]} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T00:22:34.453

你确实有几个语法错误。

端口数组中有一个额外的逗号。{"term" : "output"} 后面有一个逗号，它不应该是最后一个元素。

数组“操作系统”的最后一个元素也会发生同样的事情。最后一个元素 {"term", "ultimate"} 后面不应有逗号。

这是应该正确解析的正确代码：

```
{
"RAM": [
    {"term" : "ram"},
    {"term" : "memory"},
    {"term" : "access"},
    {"term" : "random"},
    {"term" : "component"},
    {"term" : "multi-tasking"},
    {"term" : "multi"},
    {"term" : "tasking"},
    {"term" : "gigabyte"},
    {"term" : "temporary"}
],
"Graphics Card": [
    {"term" : "component"},
    {"term" : "graphic"},
    {"term" : "graphics card"},
    {"term" : "processing"},
    {"term" : "processors"},
    {"term" : "unit"},
    {"term" : "card"},
    {"term" : "3D"},
    {"term" : "image"},
    {"term" : "media"},
    {"term" : "gaming"},
    {"term" : "game"},
    {"term" : "nvidia"},
    {"term" : "amd"},
    {"term" : "chip"},
    {"term" : "clock"},
    {"term" : "speed"},
    {"term" : "GPU"},
    {"term" : "video"},
    {"term" : "DVI"},
    {"term" : "DisplayPort"},
    {"term" : "HDMI"}
],
"Ports": [
    {"term" : "port"},
    {"term" : "interface"},
    {"term" : "external"},
    {"term" : "USB"},
    {"term" : "devices"},
    {"term" : "3.0"},
    {"term" : "2.0"},
    {"term" : "VGA"},
    {"term" : "DVI"},
    {"term" : "HDMI"},
    {"term" : "display"},
    {"term" : "port"},
    {"term" : "memory"},
    {"term" : "card"},
    {"term" : "SD"},
    {"term" : "stick"},
    {"term" : "ethernet"},
    {"term" : "input"},
    {"term" : "output"}
],
"CPU": [
    {"term" : "cpu"},
    {"term" : "central"},
    {"term" : "processing"},
    {"term" : "unit"},
    {"term" : "computing"},
    {"term" : "compute"},
    {"term" : "intel"},
    {"term" : "AMD"},
    {"term" : "processors"},
    {"term" : "desktop"},
    {"term" : "laptop"},
    {"term" : "i3"},
    {"term" : "i5"},
    {"term" : "i7"},
    {"term" : "core"},
    {"term" : "turbo"},
    {"term" : "boost"},
    {"term" : "gaming"},
    {"term" : "media"},
    {"term" : "overclocked"},
    {"term" : "clock"},
    {"term" : "speed"}
],
"Hard Drive": [
    {"term" : "store"},
    {"term" : "data"},
    {"term" : "hard"},
    {"term" : "drive"},
    {"term" : "video"},
    {"term" : "music"},
    {"term" : "picture"},
    {"term" : "document"},
    {"term" : "media"},
    {"term" : "processor"},
    {"term" : "gigabyte"},
    {"term" : "terabyte"},
    {"term" : "rpm"},
    {"term" : "cache"}
],
"Operating System": [
    {"term" : "operating"},
    {"term" : "system"},
    {"term" : "os"},
    {"term" : "device"},
    {"term" : "windows"},
    {"term" : "mac"},
    {"term" : "linux"},
    {"term" : "ubuntu"},
    {"term" : "chrome"},
    {"term" : "xp"},
    {"term" : "vista"},
    {"term" : "7"},
    {"term" : "8"},
    {"term" : "home"},
    {"term" : "premium"},
    {"term" : "professional"},
    {"term" : "ultimate"}
]} 
```

# android - onProviderDisabled 在后台服务中

> ID：12344060
> 
> 赞同：2
> 
> 时间：2012-09-10T00:14:24.073
> 
> 标签：android, gps, locationlistener

我正在使用一项服务来跟踪用户设备的位置，他们可以随时切换服务以开始跟踪，并且可以在完成跟踪后将其关闭。

我的问题是，禁用 GPS 时会触发 onProviderDisabled，再次启用 GPS 时不会调用 onProviderEnabled，这会导致我出现问题，因为我需要它在 GPS 可用时切换回 GPS。

这是一个已知的问题？有什么解决方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T12:40:17.980

如果在 onProviderDisabled() 中为 GPS 侦听器调用 removeUpdates()，则不会为 GPS 适配器调用 onProviderEnabled()。

对于要从​​中接收位置的每个提供商，您必须仅在服务启动时 requestLocationUpdates() 和仅在服务停止时 removeUpdates()。

# c++ - 引用类中的另一个类

> ID：12344065
> 
> 赞同：0
> 
> 时间：2012-09-10T00:15:51.800
> 
> 标签：c++

这是情况。我在两个不同的文件中有两个类。

A.cpp：

```
#include "B.h" 
A::A(){
B foo; //B doesn't name a type
} 
```

B.cpp：

```
Class B{
//code
}; 
```

如何在 A 的构造函数中正确构造 B 的对象？（范围问题）我试过

```
B::B foo //wrong 
```

以及为什么我不能像上面那样直接构造 B 类的对象，Bh 已经包含在内。非常感谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T00:19:27.080

将类定义`B`放入头文件：

**:**

```
#ifndef H_B_CLASS
#define H_B_CLASS

class B
{
    // member declarations
};

#endif 
```

**一个.cpp：**

```
#include "a.h"
#include "b.h"

A::A() { B foo; /* ... */ } 
```

**b.cpp：**

```
#include "b.h"

// B's member definitions 
```

如果 class 中没有任何内容`B`，则可以省略`b.cpp`并将整个类定义放入头文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T00:24:00.897

如您所说，如果`B`完全为空，则没有可用的公共默认构造函数。您必须至少定义`B()`为 的公共成员`class B`，否则没有人可以构造它。

# php - 通过mysql 主机在 PHP 中打开新页面

> ID：12344067
> 
> 赞同：0
> 
> 时间：2012-09-10T00:16:51.700
> 
> 标签：php, mysql, hyperlink

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T00:23:18.173

在您的新页面中，您将检查`$_GET`变量以查看是否设置了键。

您有与 usersProfile.php 的链接吗？**firstname** =somename& **lastname** =somelastname 所以您要查找的键是`firstname`和`lastname`。

您必须检查是否设置了键以避免获得未定义的索引。

前任。`$firstname = isset($_GET['firstname']) ? $_GET['fisrtname'] : null;`

这将检查密钥是否已设置以及是否设置`$firstname`为来自 url 的数据，否则为`null`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T00:53:31.573

如果我正确理解您的问题，您似乎正在尝试为每个用户创建一个链接，当您点击该链接时，该链接会将您发送到不同的或个人页面。

在这种情况下，简单地查询整个表并在您的 html 页面中将其设置为单独的 .

例如：

```
//Database connections

$query="SELECT * FROM userTable WHERE firstName = $firstname and lastName = $lastName";
//Change the query to whatever you want

$result = mysql_query($query)
while($row = mysql_fetch_assoc($result))
{
   echo "<a href='somepage.php'>" . $row['Username'] . "</a>";
} 
```

这只是一个示例，需要向其中添加大量内容，但这对于您尝试做的事情很可能更容易。在这种情况下，循环将输出您从数据库中提取的所有名称。

# delphi - Delphi 是否有一个很好的类似 Pascal 的脚本语言？

> ID：12344068
> 
> 赞同：13
> 
> 时间：2012-09-10T00:17:02.183
> 
> 标签：delphi, scripting, pascal, scripting-language, remobjects

我正在为 Delphi 寻找一个好的免费脚本引擎。我想向应用程序添加脚本，以便编写小型测试脚本。具体我需要：

*   类似 Pascal 的语法
*   当前（我查看了 RemObjects Pascal Scripting，但根据我看到的帖子它是“过时的”）。

我不需要完整的语言支持，只需要基础知识。我看到了这个：[https](https://stackoverflow.com/questions/226135/scripting-library-for-delphi) ://stackoverflow.com/questions/226135/scripting-library-for-delphi但我假设从那时起事情已经发生了一些变化。

我想要做的就是在我的程序中添加一个备忘录组件，并在运行时将一个源代码片段添加到备忘录中，然后单击执行按钮。我希望脚本能够访问我的应用程序的变量和函数。

实现这一目标的最简单途径是什么？示例程序如下。

```
program Project31;

uses
  Forms,
  Unit36 in 'Unit36.pas' {Form36};

{$R *.res}

begin
  Application.Initialize;
  Application.CreateForm(TForm36, Form36);
  Application.Run;
end. 
```

.

```
unit Unit36;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, StdCtrls;

type
  TForm36 = class(TForm)
    Button1: TButton;
    Memo1: TMemo;
    procedure Button1Click(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  Form36: TForm36;

implementation

{$R *.dfm}

procedure RoutineInMyApplication ;

begin
ShowMessage ('Hello from my Application') ;
end ;

procedure TForm36.Button1Click(Sender: TObject);
begin
//ExecuteScript (Memo1.Lines) ;
end ;

end. 
```

.

```
object Form36: TForm36
  Left = 0
  Top = 0
  Caption = 'Form36'
  ClientHeight = 174
  ClientWidth = 391
  Color = clBtnFace
  Font.Charset = DEFAULT_CHARSET
  Font.Color = clWindowText
  Font.Height = -11
  Font.Name = 'Tahoma'
  Font.Style = []
  OldCreateOrder = False
  PixelsPerInch = 96
  TextHeight = 13
  object Button1: TButton
    Left = 300
    Top = 72
    Width = 75
    Height = 25
    Caption = 'Button1'
    TabOrder = 0
    OnClick = Button1Click
  end
  object Memo1: TMemo
    Left = 8
    Top = 21
    Width = 241
    Height = 145
    Lines.Strings = (
      'begin'
      'ShowMessage  ('#39'Hello world'#39') ;'
      'CallSomehow (RoutineInMyApplication) ;'
      'end.'
      ' ')
    TabOrder = 1
  end
end 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-10T00:45:56.553

试试[`dwscript`](http://code.google.com/p/dwscript/)目前由[Eric Grange](http://delphitools.info)维护的库。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-10T03:17:35.713

Jedi JVCL 还包括 TJvInterpreter，它是一个非常轻量级（小型）的解释器，但比 dwscript 具有更多有限的功能。

对于非常小的（用户输入的公式，或简单的字符串和数字处理任务）JvInterpreter 对我来说效果很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T06:41:07.790

几年前，我曾经将[Pax Compiler](http://www.paxcompiler.com/)与[Forms Editor](http://www.econtrol.ru/formdsn.html)结合使用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-02-14T19:43:30.980

[![在此处输入图像描述](../Images/39842826946c34c182510d18580254c1.png)](https://i.stack.imgur.com/ewH3S.jpg)

* * *

发行说明 maXbox 4.7.5.20 2021 年 1 月 mX47

* * *

```
Add 25 Units + 4 Tutorials

1277 unit uPSI_SystemsDiagram.pas  Dendron
1278 unit uPSI_qsFoundation.pas    Dendron
1279 uPSI_JclStringLists2          JCL  
1280 uPSI_cInternetUtils2          FLC
1281 uPSI_cWindows.pas             FLC
1282 uPSI_flcSysUtils.pas  +TBytes utils
1283 unit uPSI_RotImg.pas          DA 
1284 uPSI_SimpleImageLoader.pas    LAZ
1285 uPSI_HSLUtils.pas             LAZ
1286 uPSI_GraphicsMathLibrary.pas  EF
1287 unit uPSI_umodels.pas         DMath
1288 uPSI_flcStatistics.pas        FLC5
1289 uPSI_flcMaths.pas             FLC5
1290 uPSI_flcCharSet.pas
1291 uPSI_flcBits32.pas
1292 uPSI_flcTimers.pas
1293 uPSI_cBlaiseParserLexer.pas
1294 uPSI_flcRational.pas
1295 uPSI_flcComplex.pas
1296 unit uPSI_flcMatrix (uPSI_flcVectors.pas)
1297 unit uPSI_flcStringBuilder.pas
1298 unit PJResFile_Routines;
1299 uPSI_flcASCII.pas
1300 uPSI_flcStringPatternMatcher;
1301 unit uPSI_flcUnicodeChar.pas 
```

函数调用总数：33282 SHA1：4.7.5.20 D82EAD01C58738887661428F94B207DB1D8FAEB5 CRC32：768395C5 29.5 MB（31,012,768 字节

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-10T16:30:37.393

来自 FastReport 的 FastScript（堆栈不允许提供链接）。包括 PascalScript、C++Script、JScript 和 BasicScript。PascalScript 似乎正是您所要求的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-10T17:21:47.877

尝试嵌入[Lua](http://www.lua.org/)。例如，参见[Lua 5.1 for Delphi](http://blog.spreendigital.de/2009/09/28/lua-5-1-for-delphi-2010/)。

# javascript - 在 CSS 弹出菜单中工作的 jquery 滑块

> ID：12344069
> 
> 赞同：1
> 
> 时间：2012-09-10T00:17:04.493
> 
> 标签：javascript, jquery, html, css, zen-cart

我正在使用带有 css 弹出标题菜单的 zencart，我还想使用 jquery 滑块小部件作为此菜单中的选项之一，但是当我把它放在那里时，小滑块显示不正确，就像他们已经崩溃了。

我已经整理了一个小提琴，虽然它的所有代码似乎都不起作用，但希望我没有做一些愚蠢的事情，因为据我所知，所有代码都在那里。

谁能帮助我请 [http://jsfiddle.net/4VU8D/](http://jsfiddle.net/4VU8D/)

编辑：这是一个稍微好一点但仍然无法正常工作的[小提琴](http://jsfiddle.net/4VU8D/1)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T15:40:59.173

您只包含了 jQuery 框架，但没有包含 jQuery UI。

# jquery - jQuery AJAX 文件上传响应文本

> ID：12344072
> 
> 赞同：0
> 
> 时间：2012-09-10T00:17:15.170
> 
> 标签：jquery, ajax, json

我正在制作一个 jQuery/AJAX 文件上传器。我收到的响应文本是浏览器的源代码，而不是 JSON 字符串。

例如：

```
#image.php
print(json_encode(array(true, "Images were uploaded"));

#image.js
function uploadImages(){
  form = new FormData($(this).closest("form")[0]);

  $.ajax({
    url: "ajax.php?action=sFi&json=nei",
    type: "post",
    xhr: function(){return($.ajaxSettings.xhr())},
    data: form,
    cache: false,
    contentType: false,
    processData: false,

    success: function(json){
        //response = $.parseJSON(json);
        //alert(response);
        console.log(json);
    },

    error: function(){
        alert("ERROR");
    }
  });
} 
```

在控制台日志中，会有

```
<html>
<head>
 <title>text</title>
 //Other html stuff
</head>
<body>
//Other html stuff
</body>
</html> 
```

而不是：真，“图像已上传”。有谁知道为什么没有返回从 php 文件打印的 json 字符串？

# objective-c - 设置属性时执行附加代码的正确方法

> ID：12344077
> 
> 赞同：1
> 
> 时间：2012-09-10T00:18:13.107
> 
> 标签：objective-c, cocoa, properties, nsview

这似乎是一个基本问题，但我仍在处理属性，所以请多多包涵。

我有一个自定义的 NSView 子类，它自己绘图。我已经使用`@property`for setter 和`typedef enum`人类可读的整数设置了对不同样式的支持。`setNeedsDisplay:YES`它工作得很好，但是除非我手动调用控件或调整其父窗口的大小，否则在设置其样式后视图不会重绘。

从逻辑上讲，人们会认为解决方案是简单地`[self setNeedsDisplay:YES]`在类的`setStyle:`方法中做一个，但我一生都无法弄清楚如何正确地做到这一点。每当我尝试覆盖`setStyle:`它时，都会抱怨，“可写原子属性‘样式’不能将合成的 getter 与用户定义的 setter 配对”。

在这种情况下应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T00:27:42.407

理想情况下，您只需将实际 ivar/storage 声明为私有属性，然后手动实现 setter `setStyle:`。在 的实现中`setStyle:`，设置您的私有属性/状态，并执行您的更新。因此，您只需从客户端的接口中抽象出数据。还有其他方法可以解决此问题，例如直接设置 ivar。

所以一个实现可以采取以下形式：

**MONThing.h**

```
@interface MONThing : NSObject

- (void)setStyle:(t_style)pStyle; // << the client's interface

@end 
```

**MONThing.m**

```
@interface MONThing ()

@property (nonatomic, assign, readwrite) t_style userStyle; // << the actual storage

@end

@implementation MONThing

- (void)setStyle:(t_style)pStyle
{
    // validate parameter
    // set our data
    self.userStyle = pStyle;
    // perform effects
    [self setNeedsDisplay:true];
} 
```

随着时间的推移，您将学习多种方法来实现这一点，以及何时您更喜欢其中一种。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T00:28:09.423

如果您设置自己的 setter，则不要使用 @synthesize 和 @property。这些用于自动创建 setter 和 getter 方法。在接口文件中声明变量就足够了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T00:28:18.623

看看[这个](https://stackoverflow.com/questions/3227176/error-writable-atomic-property-cannot-pair-a-synthesized-setter-getter-with-a-u)问题。要复制另一个问题的答案：

如果您将 @property 声明为原子，则执行以下操作之一：

使用@dynamic 或；使用 @synthesize 并保留合成的 setter 和 getter 或；提供 setter 和 getter 的手动实现（不使用上述指令之一）。

# javascript - 同一个网页中有多个 javascript 标签

> ID：12344078
> 
> 赞同：-1
> 
> 时间：2012-09-10T00:18:13.570
> 
> 标签：javascript

我正在使用两个单独的 JavaScript 文件，并使用两个单独的脚本标签将它们包含在同一页面上。其中一个文件工作正常，它与日期选择器相关，而另一个具有功能的文件则没有。

但！如果我将第二个具有内部功能的 js 文件的内容放入 wep 页面，它工作正常......请帮助我完成这个..

以下是部分代码：

```
<head>
<?php include('header.php'); ?>?>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>Student Details</title> 
```

这是我包含第一个 js 文件的地方，它工作正常（日期选择器）

```
<script language="javascript" type="text/javascript" src="../js/datetimepicker.js"></script> 
```

这是我包含第二个文件的地方，它具有 js 功能

```
<script language="javascript" type="text/javascript" src="../js/myFuntions.js"></script> 
```

这是一个调用js文件函数的js函数（我正在使用的函数没有错误）

```
<script type="text/javascript">

// here I placed a function that called other js functions for the js file that i included but is not working

</script>

</head> 
```

所以当把这些js函数放在另一个文件中并包含在网页上时，停止工作了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T00:33:30.893

首先，您不需要`language`and`type`属性。您可以摆脱它们，因为它们只会使事情变得更难阅读。

```
<script src="../js/myFuntions.js"></script> 
```

现在您可以在您的问题*和*您发布的评论中看到您拼错了“功能”，因此请尝试修复它。

```
<script src="../js/myFunctions.js"></script> 
```

# javascript - 将 javascript map 与具有两个参数的函数一起使用

> ID：12344087
> 
> 赞同：72
> 
> 时间：2012-09-10T00:20:12.903
> 
> 标签：javascript

我知道我可以通过`map`以下方式使用一个变量的函数：

```
var squarefunc = function(x) {
    return x*x;
};
values = [1,2,3,4]
values.map(squarefunc) // returns [1,4,9,16] 
```

如何使用`map`以下功能：

```
var squarefuncwithadjustment = function(x, adjustment) {
    return (x*x + adjustment);
} 
```

其中，我想`adjustment`在调用 map 时手动输入参数`adjustment=2`的值，比如说，并`x`从数组中获取值`values`。

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2012-09-10T00:22:59.820

使用匿名函数：

```
values.map(
  function(x) { return squarefuncwithadjustment(x, 2); }
); 
```

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2012-09-10T00:25:06.230

您可以使用回调创建函数：

```
var createSquareFuncWithAdjustment = function(adjustment) {
    return function(x) { return (x * x) + adjustment; };
};

values = [1, 2, 3, 4];
values.map(createSquareFuncWithAdjustment(2)); // returns [3, 6, 11, 18] 
```

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2017-03-28T05:58:49.400

从 ES6 开始，您可以使用：

```
.map(element => fn(element, params)) 
```

在您的情况下，如果我想使用 3 作为调整：

```
values = [1,2,3,4]
values.map(n => squarefuncwithadjustment(n, 3)) 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-09-10T00:29:40.073

如果您颠倒参数的顺序，您可以将调整绑定为第一个参数，以便`x`将作为第二个参数传递。

```
var squarefuncwithadjustment = function(adjustment, x) {
    return (x*x + adjustment);
}

values.map(squarefuncwithadjustment.bind(null, 2)); // [3, 6, 11, 18] 
```

设置调用上下文的第一个参数，`.bind`在这里无关紧要，所以我使用了`null`. `.bind`调用时绑定的第二个参数`2`作为第一个参数。

将函数存储为绑定版本可能会更好。

```
var squareFuncWith2 = squarefuncwithadjustment.bind(null, 2); 
```

然后将其与`.map`.

```
values.map(squareFuncWith2); // [3, 6, 11, 18] 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-08-04T11:03:18.343

好！！您可以轻松地将第二个参数传递给 map 函数。以下方法被广泛用于传递此参数，该参数通常在调用期间被隐藏：

```
values.map(function(x , this) {
    return x*x + this.adjustment;
});

var adjustment = 1;
var values = [1,2,3,4]
values.map(function(x , adjustment) {
    return x*x + adjustment;
}); 
```

> 或者

```
var adjustment = 1;
var squarefunc = function(x , adjustment) {
    return x*x + adjustment;
};
values = [1,2,3,4]
values.map(squarefunc); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-02-19T07:50:39.450

要在单个函数中执行此操作，您可以在 Curry 中添加一些 IIFE。

```
function mapSingleFunc(values, adjustment) {
  return values.map((adjustment => x => (x * x) + adjustment)(adjustment));
};
console.log(mapSingleFunc([1,2,3,4], 2))
```

在最抽象的意义上，您可以`values`通过调用数组来隧道。添加 IIFE 允许您`adjustment`在每次关闭时输入。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-12-25T19:32:55.113

ES6+：

```
values.map( x => squarefuncwithadjustment(x,2) ); 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2017-07-14T19:23:41.840

`var squarefuncwithadjustment = (x, adjustment) => { return (x*x + adjustment); }`

然后

`values = values.map( x => squarefuncwithadjustment(x, 2) );`

# ruby - 如何使机架会话cookie httponly？

> ID：12344088
> 
> 赞同：5
> 
> 时间：2012-09-10T00:20:20.497
> 
> 标签：ruby, session, sinatra, rack, httponly

我正在使用 Ruby 和 Sinatra 开发应用程序。
我用

```
enable :sessions 
```

为了使用 rack 提供的 session 变量。如何使所有会话 cookie 都成为 HTTPOnly？默认情况下是这样的吗？我找不到任何关于此的文档。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-21T00:18:27.677

而不是`enable :sessions`：

```
use Rack::Session::Cookie, {:httponly => true } 
```

我建议改用[encrypted_cookie](https://rubygems.org/gems/encrypted_cookie) gem，它更安全。举个例子，这是我可能会为一个项目准备的：

```
# app/main.rb
module Example
  class App < Sinatra::Base # this class in its own file
    # stuff here
  end
end

# app/config.rb
require "main"
module Example
  def self.app #
    Rack::Builder.app do
      cookie_settings = {        
        :key          => 'usr',
        :path         => "/",
        :expire_after => 86400,             # In seconds, 1 day.
        :secret       => ENV["COOKIE_KEY"], # load this into the environment of the server
        :httponly     => true
      }
      cookie_settings.merge!( :secure => true ) if ENV["RACK_ENV"] == "production"

      # AES encryption of cookies
      use Rack::Session::EncryptedCookie, cookie_settings

      # other stuff here

      run App
    end
  end
end

# config.ru
require "app/config"
run Example.app  # this in the rackup file 
```

（为了澄清我为什么以这种方式进行布局 - 这种结构允许我将应用程序拆分并在测试中更轻松地使用它，只需要 app/config.rb.YMMV）

# mongodb - 在 Mongo shell 中运行 Jasmine

> ID：12344092
> 
> 赞同：1
> 
> 时间：2012-09-10T00:21:15.533
> 
> 标签：mongodb, tdd, bdd, jasmine, mongo-shell

我收集的 MongoDB 管理实用程序正在增长，是时候进行一些回归测试了。我可以使用内置 Mongo 测试助手中使用的断言类型功能，但我是 RSpec 和 Jasmine 的忠实粉丝，并且宁愿以这种风格编写测试。我不需要自动化，只需能够使用 Jasmine 编写测试，从 shell 运行它们并查看结果。

有没有人让 Jasmine 在 Mongo shell 中工作？如果没有，为了让 Jasmine 在那种环境中快乐，我需要模拟/填充什么提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T00:28:55.927

这是可行的，但不是直截了当的。您可以使用 Jasmine 的 Node.js 版本，它显示 Jasmine 所依赖的浏览器对象，例如窗口，并伪造它们。

我认为这是太多的工作，并使用了 10gen 内部使用的断言类型函数——它们在 Mongo shell 中可用。

例如，`assert`在 Mongo shell 提示符下键入：

```
> assert
function (b, msg) {
    if (assert._debug && msg) {
        print("in assert for: " + msg);
    }
    if (b) {
        return;
    }
    doassert(msg == undefined ? "assert failed" : "assert failed : " + msg);
} 
```

# javascript - jQuery .focus() 导致页面跳转

> ID：12344093
> 
> 赞同：2
> 
> 时间：2012-09-10T00:21:43.570
> 
> 标签：javascript, jquery, html

我有一个功能应该将用户滚动回页面顶部的搜索输入，**然后**将焦点放在它上面（所以光标会闪烁）。出于某种原因，它似乎首先将焦点应用于搜索输入。这会创建页面到搜索栏的非常快速的跳跃/跳跃运动，跳回底部，然后缓慢向上滚动。

Javascript：

```
function goToSearch(){
    $('html,body').animate({scrollTop: $('#search').offset().top},'medium');
    $('#search').focus()
} 
```

的HTML：

```
<input type="text" id="search" placeholder="search">
...
<a href="#" onclick="goToSearch()">Search</a> 
```

我试过设置 .delay() 函数无济于事；它似乎总是首先应用 .focus() 。为什么会这样？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-10T00:32:30.920

> *“为什么会这样？”*

动画效果是异步的。也就是说，该`.animate()`函数在“调度”动画（可以这么说）后立即返回*，*并立即继续执行下一条语句 - 在您的情况下，该`.focus()`语句。实际动画将在当前 JS 完成后发生。

幸运的是，该[`.animate()`方法](http://api.jquery.com/animate/)为您提供了一个选项来传递将在动画完成时调用的回调函数，因此您可以在该回调函数中进行焦点操作：

```
$('html,body').animate({scrollTop: $('#search').offset().top},'medium', function(){
    $('#search').focus();
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-10T00:26:12.443

您应该在动画完成后调用焦点函数，如下所示：

```
function goToSearch(){
    $('html,body').animate({scrollTop: $('#search').offset().top},'medium',function(){
        $('#search').focus();
    });
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-31T23:33:57.593

如果您像我一样发现了这个问题，您可能正在寻找与 js focus() 相结合的 CSS 相关问题，您可能会认为自己运气不好。好吧，再想一想——好消息是有一种方法可以在 CSS 动画或过渡结束时进行回调，然后触发你的事件。

您可以使用 jQuery 的[`one`](http://api.jquery.com/one/)方法并`webkitTransitionEnd` `otransitionend` `oTransitionEnd` `msTransitionEnd` `transitionend`用于过渡或`webkitAnimationEnd` `oanimationend` `msAnimationEnd` `animationend`动画。

**一个例子：**

*JS：*

```
var myButton = $('#button'),
   myBox = $('#box');
    myButton.click(function () { 
    myBox.addClass('change-size');
    myBox.one('webkitAnimationEnd oanimationend msAnimationEnd animationend',   
    function(e) {
    // code to execute after animation ends
    myBox.removeClass('change-size');
    });

}); 
```

*CSS：*

```
.box {
   width: 100px;
   height: 100px;
   background: hotpink;
}

@keyframes growBox {
    to {
        width: 300px;
        height: 200px;
    }
}

.change-size {
    animation: growBox 3s linear 0s 1 normal;
} 
```

解决方案不是我的，我只是在浪费了几个小时后才找到它，如果你先找到这个问题，我会发布它。

来源：[http ://blog.teamtreehouse.com/using-jquery-to-detect-when-css3-animations-and-transitions-end](http://blog.teamtreehouse.com/using-jquery-to-detect-when-css3-animations-and-transitions-end)

# lua - 如何将 cdata 结构转换为 lua 字符串？

> ID：12344095
> 
> 赞同：4
> 
> 时间：2012-09-10T00:22:20.307
> 
> 标签：lua, ffi, luajit

我正在编写一个需要在 LuaJit 中读取一些复杂二进制消息的小应用程序。

我一直在使用 bit 模块和 string.rep 很多。然而，这一切都非常麻烦。我是使用 LuaJit 的新手，我认为使用 FFI 可能会更简单。

在 CI 中可以声明这样的结构：

```
struct mystruct
{
  uint32_t field1;
  char     field2[6];
  uin64_t  field3;
  short    field4;
} __attribute__(packed); 
```

在阅读 LuaJit 的 FFI 时，您似乎可以声明

```
ffi.cdef[[
    #pragma pack(1)
    struct mystruct
    {
      uint32_t field1;
      char     field2[6];
      uin64_t  field3;
      short    field4;
    };
]] 
```

然后我可以创建一个 mystruct 并访问如下字段：

```
local ms = ffi.new("mystruct")
ms.field1 = 32;
// ... etc 
```

但是，如何将其转换回 lua 字符串？

我试过这个，但它似乎没有达到我想要的效果。

```
local s = tostring(ms) 
```

还有这个：

```
local s = ffi.string(ms) 
```

产生以下错误“bad argument #1 to 'string' (cannot convert 'struct mystruct' to 'const char *')”

所以我尝试了一个演员表：

```
local s = ffi.string(ffi.cast("char*", ms)) 
```

没有错误，但在电线上看起来有问题。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-10T07:32:43.500

[`ffi.string`](http://luajit.org/ext_ffi_api.html)与非字符串类参数一起使用时，您必须明确指定长度：

> str = ffi.string(ptr [,len])
> 
> 从 ptr 指向的数据创建一个实习 Lua 字符串。
> 
> 如果缺少可选参数 len，则 ptr 将转换为“char *”，并假定数据以零结尾。字符串的长度是用 strlen() 计算的。

运行以下代码时，我得到了预期的（小端）结果：

```
ffi = require 'ffi'
ffi.cdef[[
    typedef unsigned long uint32_t;
    typedef unsigned long long uint64_t;
    #pragma pack(1)
    struct mystruct
    {
      uint32_t field1;
      char     field2[6];
      uint64_t  field3;
      short    field4;
    };
]]

function string.tohex(str)
    return (str:gsub('.', function (c)
        return string.format('%02X', string.byte(c))
    end))
end

ms = ffi.new('struct mystruct', 1, {2, 3, 4, 5, 6, 7}, 8, 9)
s = ffi.string(ms, ffi.sizeof(ms)) -- specify how long the byte sequence is
print(s:tohex()) --> 0100000002030405060708000000000000000900 
```

**更新：**我知道这不是原始问题的一部分，但我刚刚学会了这个技巧，为了完整，这里有一种将 Lua 字符串转换回 FFI cdata 的方法：

```
 data = ffi.new('struct mystruct')   -- create a new cdata
    ffi.copy(data, s, ffi.sizeof(data)) -- fill it with data from Lua string 's'
    print(data.field1, data.field4)     --> 1   9 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-07T14:14:17.713

上一个有错误。根据当前的 luaffi 实现，您可以将其转换为`void*`. 用于`ffi.string(ffi.cast("void*",ms),ffi.sizeof(ms))`这样做。

# javafx - [JavaFX][FXML] 由标题窗格填充的滚动窗格。由 TilePane 填充的 TitlePane。（由于改变内部元素而改变容器大小）

> ID：12344098
> 
> 赞同：0
> 
> 时间：2012-09-10T00:22:27.497
> 
> 标签：javafx, fxml

我有以下问题。

1.  如何，在 FXML 中，例如。3个TitlePanes进入ScrollPane，这样当我打开所有3个TitlePanes时，会出现垂直滚动，但是当我有前。1 打开它消失？（使 ScrollPane 高度适应动态变化的内容）

2.  如何在 FXML 中将 TilePane 放入 TitlePane，这样 TitlePane 将适合它的内容？例如。我将 4 个按钮放入 TilePane。一开始是2x2。当我减小宽度时，它变为 4x1，TilePane 高度增长，但 TitlePane 不会随之增长，并且并非所有按钮都是可见的。如何将 TilePane 大小与其容器 TitlePane 大小联系起来？

如有任何帮助，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T10:45:42.480

如果您使用 FXML，请确保您没有设置要调整大小的控件的首选高度，它们应设置为 COMPUTED。使用此设置，折叠的 TitledPane 将仅占用其标题的大小。

# asp.net-mvc - 在 Asp.Net Web Api 中从 JSONP 请求获取数据

> ID：12344110
> 
> 赞同：0
> 
> 时间：2012-09-10T00:25:05.040
> 
> 标签：asp.net-mvc, iis, asp.net-web-api, jsonp

我正在尝试将`POST`数据传输到我的另一个域上的 Asp.Net Web API。我需要支持 IE9/8，所以`CORS`不会删减它。当我这样打电话时：

```
$.ajax({
type: "GET",
url: "http://www.myotherdomain.com/account",
data: "{firstName:'John', lastName:'Smith'}",
contentType: "application/json; charset=utf-8",
dataType: "jsonp",
success: function(msg) {
    console.log(msg);
},
error: function(x, e) {
    console.log(x);
}
});​ 
```

它`GET`要求：

```
http://www.myotherdomain.com/account?
    callback=jQuery18008523724081460387_1347223856707&
    {firstName:'John',%20lastName:'Smith'}&
    _=1347223856725 
```

我已经[为 ASP.NET Web API 实现了这个 JSONP 格式化程序，](http://www.west-wind.com/weblog/posts/2012/Apr/02/Creating-a-JSONP-Formatter-for-ASPNET-Web-API)并且我的服务器使用格式正确的 JSONP 响应进行响应。我不明白如何注册路由以使用帐户对象。

```
config.Routes.MapHttpRoute(
    name: "Account",
    routeTemplate: "account",
    defaults: new { controller = "account", account = RouteParameter.Optional }
); 
```

如何从没有名称的查询字符串参数中反序列化对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T06:32:36.613

您可以将参数作为查询字符串值发送，而不是使用 JSON。假设您有以下模型：

```
public class User
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
} 
```

和以下 API 控制器：

```
public class AccountController : ApiController
{
    public HttpResponseMessage Get([FromUri]User user)
    {
        return Request.CreateResponse(HttpStatusCode.OK, new { foo = "bar" });
    }
} 
```

可以这样消费：

```
$.ajax({
    type: 'GET',
    url: 'http://www.myotherdomain.com/account?callback=?',
    data: { firstName: 'John', lastName: 'Smith' },
    dataType: 'jsonp',
    success: function (msg) {
        console.log(msg);
    },
    error: function (x, e) {
        console.log(x);
    }
}); 
```

# android - 如何在片段中使用自定义适配器

> ID：12344112
> 
> 赞同：0
> 
> 时间：2012-09-10T00:25:09.300
> 
> 标签：android, android-fragments, adapter

我有一个简单的问题，我知道你可以使用：

```
setListAdapter(new ArrayAdapter<String> (getActivity(), 
                R.layout.your_layout,
                R.id.your_text,
                stringArray)); 
```

在onActivityCreated() 方法的**ListFragment内。**到目前为止，这对我来说效果很好，但只涵盖了一项。例如，假设在布局中，我有两个 TextView：sms_text 和 sms_timestamp；分别由 smsTextArray [] 和 smsTimeStampArray [] 填充。那个电话会怎么样？我试过：

```
setListAdapter(new ArrayAdapter<String> (getActivity(), 
                R.layout.tweet_list_item,
                R.id.sms_text,
                smsTextArray,
                R.id.sms_timestamp,
                smsTimeStampArray,
                )); 
```

那没有用:(

我还尝试在同一个 onActivityCreated() 中调用 setListAdapter() 两次，但尽管这样有效，但它只在列表项中显示了 setListAdapter() 的第二次调用。

我也尝试创建自己的适配器，但我有点迷失在那个混乱中。你们能指出我正确的方向吗？我不需要确切的代码，只需要一个我可以阅读的库的链接，或者它可能只是一个代码调用。谁知道，也许我只是使用了错误的参数，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T04:05:22.597

您不能使用简单的`ArrayAdapter`并显示多条数据。适配器将列表中的一个元素映射到 listView 中的一个元素。要让数据来自两个不同的部分，您需要创建自己的适配器（比听起来简单）。或者，您也可以在 a 中使用地图列表`SimpleAdapter`（[参见](http://eureka.ykyuen.info/2010/01/03/android-simple-listview-using-simpleadapter/)示例）。

就个人而言，我建议使用自定义适配器。您最终将不得不编写一个代码，并且没有像现在这样的时间。另外，您的代码将更具可读性和明显性。

# html - Opera 与 Chrome 背景图像继承？

> ID：12344115
> 
> 赞同：1
> 
> 时间：2012-09-10T00:25:29.253
> 
> 标签：html, css, opera

```
<html xmlns="http://www.w3c.org/1999/xhtml">
<head>
<title>Opera test - css inheritance</title>
<style type="text/css">
/* theirs */
.theirs {
    background: #FF0000 url("http://www.wonderbackgrounds.com/glitter/backgrounds/glitter_background_b7.gif") repeat 0% 0%;
}
/* mine */
.mine {
    background-image: none;
    background: #FFC0C0;
}
</style>
</head>
<body>
<table border="1">
  <thead class="theirs">
    <tr class="theirs mine">
      <th>Month</th>
      <th>Savings</th>
    </tr>
  </thead>
  <tfoot class="">
    <tr class="theirs mine">
      <td>Sum</td>
      <td>$180</td>
    </tr>
  </tfoot>
  <tbody class="theirs">
    <tr class="theirs mine">
      <td>January</td>
      <td>$100</td>
    </tr>
    <tr class="theirs mine">
      <td>February</td>
      <td>$80</td>
    </tr>
  </tbody>
</table>
</body>

</html> 
```

我试图覆盖 TR 的背景颜色，代码在 Chrome 上按预期工作，但在我们的目标浏览器 Opera 上却没有。

问题是，我如何在“我的”类中为 css 编写代码以摆脱背景图像。它在 Chrome 中工作并显示粉红色的单元格，但在 Opera 中它显示背景图像。

我无法更改其他 css，我想清除 url，但当 tbody 包含相同的类时，Opera 不想这样做。我将类从 tfoot 中取出，以表明它在这种情况下有效，但当类在 .

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T00:44:26.243

查看代码，我发现您已将两个类都附加到 TRs 上。由于它们是 2 种相互冲突的样式，因此您依靠应用程序的顺序来获得您想要的效果。Chrome 似乎以与将选择器应用于元素的顺序相同的顺序应用样式。即 class='their mine' 导致 Chrome 应用他们的 CSS 然后用你的覆盖它。

就在上周，我读到它实际上并不是规范的一部分——应用样式的顺序完全取决于浏览器供应商。

考虑到这一点，您应该简单地更改您的 CSS，以便“我的”类具有与“他们的”类相同的属性 - 尽管需要进行必要的更改。

然后，您可以只给您的 TR 一个“他们的”*或*“我的”类别。

扩展我在下面留下的评论，您可以使用以下 html（取自链接中的示例页面）

```
<html xmlns="http://www.w3c.org/1999/xhtml">
<head>
<title>Opera test - css inheritance</title>
<style type="text/css">
/* theirs */
.theirs {
    background: #FF0000 url("http://www.wonderbackgrounds.com/glitter/backgrounds/glitter_background_b7.gif") repeat 0% 0%;
}
/* mine */
.mTable .theirs {
    background-image: none;
    background-color: #FFC0C0;
}
</style>
</head>
<body>
<table class='mTable' border="1">
  <thead class="theirs">
    <tr class="theirs">
      <th>Month</th>
      <th>Savings</th>
    </tr>
  </thead>
  <tfoot class="">
    <tr class="theirs">
      <td>Sum</td>
      <td>$180</td>
    </tr>
  </tfoot>
  <tbody class="theirs">
    <tr class="theirs">
      <td>January</td>
      <td>$100</td>
    </tr>
    <tr class="theirs">
      <td>February</td>
      <td>$80</td>
    </tr>
  </tbody>
</table>
</body>

</html> 
```

# hibernate - JPA 2.0 Hibernate 4.1.2 Entity 之前甚至没有被持久化

> ID：12344116
> 
> 赞同：0
> 
> 时间：2012-09-10T00:25:31.390
> 
> 标签：hibernate, jpa, merge, jpa-2.0, persist

我对 JPA persist() 和 merge() 方法有一些问题。

在我的代码中，我愿意。

```
Foo foo = new Foo("abc");
fooService.persist(foo)
..(blabla)
foo.setField("123");
fooService.merge(foo); 
```

此代码在我的数据库 MySQL 中创建两行 foo。

一次使用 foo (abc, null)，另一次使用 foo (abc, 123)。

当我查看 mysql 查询时，merge(foo) 没有在数据库中找到对象 foo，因此它使用更新的数据创建新行。请注意， fooService.persist(foo) 在一个事务中执行，而 fooService.merge(foo) 在另一个事务中执行。我已经在坚持后调用了flush（），但它不起作用。

请在下面找到我的代码（我不详细说明）

```
@Entity
public class Foo {

  @Id
  @GeneratedValue
  private Long id;
  private String name;
  private String field;
  public Foo(String name){
    this.name = name;
  }
}

public class FooServiceImpl {

  @Autowired
  FooDao fooDao;

  @Transactional(Propagation.REQUIRED)
  public void persist(Foo foo){
    fooDao.persist(foo);
  }

  @Transactional(Propagation.REQUIRED)
  public Foo merge(Foo foo){
    return fooDao.merge(foo);
  }
}

public class FooDaoImpl {

  @PersistenceContext
  private EntityManager entityManager;

  public void persist(Foo foo){
    this.entityManager.persist(foo);
    this.entityManager.flush();
  }

  public Foo merge(Foo foo){
    return this.entityManager.merge(foo);
  }
} 
```

你有什么主意吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T12:55:03.980

事务在方法完成时被提交，所以当你调用persist时，它实际上并没有被持久化。尝试更改您的逻辑，以便您最后只调用一次，并且当实体不再更新时（不要使用合并）。

# android - 访问 GoogleCredentials 时出错

> ID：12344118
> 
> 赞同：0
> 
> 时间：2012-09-10T00:25:59.200
> 
> 标签：android, google-api, google-calendar-api

我有以下代码可以使用 OAUTH 2.0 访问日历 API。

```
public static Calendar build(String accessToken) {
    HttpTransport transport = AndroidHttp.newCompatibleTransport();
    JacksonFactory jsonFactory = new JacksonFactory();
    httpRequestInitializer(credential);
    Log.i("Reached calendar builder", "Reached calendar builder");

    GoogleCredential credential = new GoogleCredential();

    Calendar service = new Calendar.Builder(transport, jsonFactory, credential)
            .setApplicationName("Meetrbus/1.0")
            .setHttpRequestInitializer(credential);
            .setJsonHttpRequestInitializer(
                    new JsonHttpRequestInitializer() {

                        public void initialize(JsonHttpRequest request) {
                            CalendarRequest calendarRequest = (CalendarRequest) request;

                            // TODO: Get an API key from Google's APIs
                            // Console:
                            // https://code.google.com/apis/console.
                            calendarRequest
                                    .setKey("API_ACCESS_KEY");
                        }
                    }).build();

    return service;
} 
```

当我运行代码时，应用程序强制关闭，logcat 给我以下错误：

`Could not find class 'com.google.api.client.util.Clock', referenced from method com.google.api.client.auth.oauth2.Credential.<init>`

我试过改变一切，现在我不知道该怎么做！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T18:21:59.227

您需要在类路径中包含 google-http-java-client jar。

最新的 google-http-java-client 可以从这里获得： [http ://code.google.com/p/google-http-java-client/downloads/list](http://code.google.com/p/google-http-java-client/downloads/list)

# php - 哪个用户通过 PayPal 订阅了我的网站？

> ID：12344120
> 
> 赞同：3
> 
> 时间：2012-09-10T00:26:51.023
> 
> 标签：php, paypal, paypal-ipn

我一直在用 PHP 开发一个网站，用户将在其中订阅并每月支付订阅费以恢复他们的会员资格。为此，我从 PayPal 创建了一个订阅按钮，并使用沙箱对其进行了测试，我可以收到付款。但是，我找不到确定哪个用户订阅的方法。

这是 PayPal 按钮的 HTML 代码：

```
<form action="https://www.sandbox.paypal.com/cgi-bin/webscr" method="post">
<input type="hidden" name="cmd" value="_s-xclick">
<input type="hidden" name="hosted_button_id" value="BUTTONID">
<input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_buynowCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
<img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
</form> 
```

您可以猜到所有用户都有唯一 ID，我想将此唯一 ID 传递到完成付款的 PayPal 页面，然后 PayPal 将再次将此 ID 传递给我，因此用户帐户将被激活。

我一直在寻找这个很长一段时间。有很多教程可以使用 IPN，但我看不到将用户 ID 作为 IPN 参数发送到哪里。我没有设法使用 PayPal API，因为他们的文档完全是废话。

也许有人可以为此提供一个完整教程的链接，或者告诉我我理解错了什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T15:16:51.173

据我所知，您几乎可以在向 PayPal 发出的每个请求中向标有 CUSTOM 的字段添加最多 255 个字节的数据。PayPal 在其响应和 IPN 中返回此字段。

对于订阅之类的东西，我建议您查看 PayPal 通过 NVP 和 SOAP 提供的定期付款机制。这并不像仅仅生成一个按钮并将其放置在您的网站上那么容易，但是由于您已经用 PHP 编写了整个网站，因此编码它不会有任何问题。定期付款应提供让用户订阅和支付月费所需的一切，包括跟踪谁是谁的能力。

# iphone - 使用 NSTimer 的序列动画

> ID：12344127
> 
> 赞同：0
> 
> 时间：2012-09-10T00:28:31.923
> 
> 标签：iphone, objective-c, ios, animation, nstimer

美好的一天..我有这段代码..这两个用于 actionAnimating Button 和 stopAnimating Button..我只想知道如何使这两个按钮集成在一个按钮中..例如..我点击按钮然后它动画..当我再次单击该actionAnimating按钮时，我想取消/停止动画，同时我想再次播放/动画..简而言之，当我再次单击actionAnimating按钮时，我想取消动画..

```
-(void)flowerAnimationSequence//START ANIMATION
{
    MotherView.alpha = 0;
    flower.alpha = 0;
    [animationContainer1 removeFromSuperview];
    actselected = YES;

    NSLog(@"start");
    if (((sequenceAnimateCounter == 0) || (sequenceAnimateCounter==1)) && (actselected = YES))
    {
        aImageViewSlideShow = [[UIImageView alloc]initWithFrame:CGRectMake(0, 0, 320, 480)];
        aImageViewSlideShow.tag = 171;
        [self.view addSubview:aImageViewSlideShow];

    }

    if (sequenceAnimateCounter < 183) 
    {
        timer = [NSTimer scheduledTimerWithTimeInterval:0.035 target:self selector:@selector(flowerAnimationSequence) userInfo:nil repeats:NO];
    }

    else if (sequenceAnimateCounter ==183) 
    {
        aImageView = (UIImageView *)[self.view viewWithTag:171];
        NSLog(@"done");
        actselected = NO;
        sequenceAnimateCounter = 0;
        [aImageView removeFromSuperview];
        aImageView = nil;
        [self DefaultPosition];
    }

    aImageView = (UIImageView *)[self.view viewWithTag:171];

    NSString *aStrNumber =  [NSString stringWithFormat:@"%i",sequenceAnimateCounter];
    NSString *aBundlePath = [[NSBundle mainBundle]bundlePath];
    NSString *aImagePath = [NSString stringWithFormat:@"%@/sapatos_%@.png",aBundlePath,aStrNumber];

    [aImageView setImage:[UIImage imageWithContentsOfFile:aImagePath]];
    [self.view bringSubviewToFront: aImageView];
    sequenceAnimateCounter = sequenceAnimateCounter+1;

    if (sequenceAnimateCounter == 1)
    {
        [aImageView removeFromSuperview];
    }
}

-(void)stopanim//STOP BUTTON
{
        [timer invalidate];
        sequenceAnimateCounter =0;
        NSLog(@"stop");
        [aImageView removeFromSuperview];
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T14:31:23.190

嗯……

您想一键启动/停止吗？

```
BOOL isAnimating = NO;

- (void)startStopAnimating 
{
    if (!isAnimating) {
       isAnimating = YES
       // start animation
    } else {
       isAnimating = NO;
       // stop animation
    }
} 
```

# ios - 新 iPad 将 iphone 应用程序的启动图像显示为应用程序图标，而不是应用程序图标图像

> ID：12344133
> 
> 赞同：4
> 
> 时间：2012-09-10T00:29:53.217
> 
> 标签：ios, ipad, retina-display

我的应用程序仅适用于 iPhone，但在具有视网膜显示屏的新 iPad 中无法正确显示图标。安装应用程序时，应用程序图标正确显示。但安装完成后，应用程序的启动图像显示为图标，而不是图标图像。由于它不是通用应用程序，似乎没有地方在 Xcode 中为 iPad 设备配置一些东西。

在包括 3Gs、4 和 4S 在内的 iPhone 和旧 iPad 中，我没有这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T04:43:06.997

我偶然发现我做错了什么。在应用程序信息 plist 文件中，将 Default.png 和 Default@2x.png 添加到“图标文件”条目中。我不知道为什么。我想我以前曾奇怪地操纵过 Xcode。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T13:34:26.563

来自 Apple Docs on [Application Icons](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/IconsImages/IconsImages.html)：

如果您正在创建一个通用应用程序，您需要提供所有四种尺寸的应用程序图标。

对于 iPhone 和 iPod touch，这两种尺寸都是必需的：

*   57 x 57 像素**Icon.png**
*   114 x 114 像素（高分辨率）**Icon@2x.png**

对于 iPad，这两种尺寸都是必需的：

*   72 x 72 像素**Icon-72.png**
*   144 x 144（高分辨率）**Icon@2x.png**

为了简单起见，您应该为每个图标使用推荐的名称。看看[我的应用程序包中的图标文件如何在 iPad 和 iPhone 上使用？](http://developer.apple.com/library/ios/#qa/qa1686/_index.html)

以下屏幕截图取自[捏多媒体 iOS 5 图标大小](http://pinchmultimedia.com/blog/ios-5-icon-sizes-and-names-new-ipad)。 ![在此处输入图像描述](../Images/0802905c2058f2f22f6c23bc930e46a5.png)

# ios - MagicalRecord：删除整个数据并再次设置核心数据堆栈

> ID：12344138
> 
> 赞同：4
> 
> 时间：2012-09-10T00:31:37.130
> 
> 标签：ios, core-data, magicalrecord

对于每个应用程序更新，我想彻底擦除我的整个核心数据数据库，然后重新设置它。我没有成功这样做。我尝试了各种事情，这似乎是我最接近的。我发现了几个 SO 帖子，但没有一个解决方案适合我的目的。

我正在使用`MagicalRecord`，它提供了几种获取各种对象的速记方法。这是我的代码：

```
if ([[[NSUserDefaults standardUserDefaults] objectForKey:@"buildVersion"] intValue] < [[[[NSBundle mainBundle] infoDictionary] objectForKey:@"CFBundleVersion"] intValue]) {
    NSPersistentStore *store = [NSPersistentStore defaultPersistentStore];
    NSError *error;
    NSURL *storeURL = [NSPersistentStore defaultLocalStoreUrl];
    NSPersistentStoreCoordinator *storeCoordinator = [NSPersistentStoreCoordinator defaultStoreCoordinator];
    [storeCoordinator removePersistentStore:store error:&error];
    [[NSFileManager defaultManager] removeItemAtPath:storeURL.path error:&error];
    [[NSUserDefaults standardUserDefaults] setObject:[[[NSBundle mainBundle] infoDictionary] objectForKey:@"CFBundleVersion"] forKey:@"buildVersion"];
}

[MagicalRecord setupCoreDataStack]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T02:37:28.200

有一个`NSPersistentStore+MagicalRecord`类别允许您获取持久存储的 URL：

```
+ (NSURL *) MR_urlForStoreName:(NSString *)storeFileName; 
```

您可以使用此调用中的 URL 使用 NSFileManager 删除持久存储 SQLite db。

# php - 这个“获取 url”php 代码可以在 IIS 服务器上运行吗？

> ID：12344142
> 
> 赞同：-1
> 
> 时间：2012-09-10T00:33:17.083
> 
> 标签：php, iis

我在 apache 服务器上使用这个 PHP 代码，它工作正常：

```
$actual_link = "http" . (($_SERVER['SERVER_PORT']==443) ? "s://" : "://") . $_SERVER['HTTP_HOST'] . $_SERVER['REQUEST_URI']; 
```

现在我的问题是这是否同样适用于 IIS 服务器。我已经读到使用 PHP 时它们之间存在差异，所以我想确定一下。

感谢您的反馈意见 ：）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T00:37:45.830

不要使用`$_SERVER['SERVER_PORT']==443`. 而是检查是否`$_SERVER['HTTPS']`等于'on'。

# iphone - 在委托方法中访问单元格的属性

> ID：12344144
> 
> 赞同：0
> 
> 时间：2012-09-10T00:33:45.227
> 
> 标签：iphone, objective-c, ios, ipad, uitableview

我有一个播放按钮，按下它会播放声音，然后将图像更改为暂停按钮。该按钮是我的单元格的属性，位于我的表格视图中。当用户点击按钮时，我可以访问单元格，因为我可以这样做：

```
UIButton *b = (UIButton *)sender;
myTableViewCell* cell =  (myTableViewCell*)[[b superview] superview]; 
```

然后我可以说

```
[cell.button setImage:myImage]; 
```

但是一旦声音结束，我想将按钮的图像改回播放按钮。我知道委托方法

```
-(void)audioPlayerDidFinishPlaying:
(AVAudioPlayer *)player successfully:(BOOL)flag 
{
    NSLog(@"audioPlayerDone");
} 
```

完成后我确实得到了 NSLog，但是我如何访问单元格并更改图像？我没有像以前那样两次调用 superview 的奢侈，因为在这个委托方法中没有发送者。有什么帮助吗？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T00:53:37.107

表格视图代表一些内容（音频），因此在每个表格视图单元格后面都有一个模型（对象）是有意义的。

对于每个单元格，您可以创建一个具有 2 个或更多属性的对象：
- 音频文件：文件路径
- 正在播放：布尔值

在音频文件开始播放（按下按钮）的那一刻，您将布尔值“正在播放”设置为 true，并更新表格视图，以便在按钮上显示不同的图像。要确定需要更改哪个对象的状态，请使用方法`-indexPathForCell:`. 对于您的按钮按下方法，代码将类似于以下内容：

```
UIButton *b = (UIButton *)sender;
myTableViewCell* cell =  (myTableViewCell*)[[b superview] superview];

NSIndexPath *indexPath = [tableView indexPathForCell:cell];
AudioObject *audio = [dataArray objectAtIndex:indexPath.row];
audio.isPlaying = true;

[tableView reloadData]; 
```

音频文件停止播放的那一刻，您可以使用模型检查数组以查找正在播放的任何文件并将其设置为 false。之后，您再次更新表格视图，以便按钮图像变回默认图像。

如果任何时候只有一个音频文件正在播放，那么像我上面描述的那样的实现将可以正常工作。

# c - 位运算符

> ID：12344148
> 
> 赞同：0
> 
> 时间：2012-09-10T00:34:45.470
> 
> 标签：c, bit-manipulation

我是 C 的初学者，我正在自学。我正在尝试将 int 转换为二进制以进行按位运算，但我不确定该怎么做？我曾尝试使用 mod 和其他数学来做到这一点，但我没有成功。我四处搜寻，并没有找到明确的方法。请协助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T00:36:16.043

您无需对 an`int`进行任何转换即可在其上使用位运算符。它们会自动处理*组成*`int`.

如果要查看数字的二进制表示，可以使用（假设 8 个最低有效位）...

```
int num = 4;

int i;

for (i = 7; i >= 0; i--) {
    printf("%d", (num >> i) & 1);
} 
```

[键盘](http://codepad.org/n4AUWiyL)。

这使用按位运算符`>>`（右移）和`&`（与）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-10T00:36:41.477

它已经在计算机中表示为二进制！（除非您拥有其中一台三元计算机。）所以继续在您`int`的 s 上使用按位运算符。（即使您*确实*拥有其中一台三元计算机也可以使用。）

[看？有用！](http://codepad.org/7s1MYMwG)

# api - 是否可以自定义 ServiceStack /元数据页面？

> ID：12344149
> 
> 赞同：8
> 
> 时间：2012-09-10T00:34:58.650
> 
> 标签：api, metadata, servicestack

我在非标准端口上的负载均衡器后面运行我的网站。加载 /metadata 页面时，它有我的公共域名和托管应用程序的本地端口，这也会导致不同格式的链接中断。

例子：

*   在浏览器中：http: [//mydomain.com/api/metadata](http://mydomain.com/api/metadata)
*   在元数据页面： [http ://mydomain.com:10000/api/metadata](http://mydomain.com:10000/api/metadata)

有没有办法在输出中自定义这些链接？此外，是否可以自定义页面的其他文本/css/等，以便可以对其进行修改以适应我用于网站其余部分的模板？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-10T22:44:29.940

# v4 更新

v4 ServiceStack 提供了许多自定义内置元数据页面的新方法：

## 使用虚拟文件系统

默认情况下，ServiceStack 的虚拟文件系统（即不存在物理文件时）回退到在 dll 中查找嵌入式资源文件。

您可以指定`Config.EmbeddedResourceSources`默认查看的程序集的数量和优先级：

*   包含您的 AppHost 的程序集
*   **服务栈.dll**

`HtmlFormat`VFS 现在让您可以通过简单地复制您想要自定义的元数据或模板文件并将它们放在您的文件夹中，用您自己的完全替换内置的 ServiceStack 元数据页面和模板：

```
/Templates/HtmlFormat.html        // The auto HtmlFormat template
/Templates/IndexOperations.html   // The /metadata template
/Templates/OperationControl.html  // Individual operation template 
```

## 在元数据页面上注册链接

您可以在元数据页面中添加指向您自己的插件的链接：

```
appHost.GetPlugin<MetadataFeature>()
    .AddPluginLink("swagger-ui/", "Swagger UI");
appHost.GetPlugin<MetadataFeature>()
    .AddDebugLink("?debug=requestinfo", "Request Info"); 
```

`AddPluginLink`**在插件链接**部分下添加链接，同时`AddDebugLink`只能在调试或开发期间可用的插件使用。

## 使用元数据属性

[Swagger](https://github.com/ServiceStack/ServiceStack/wiki/Swagger-API#swagger-attributes)中使用的许多相同属性也用于元数据页面，例如：

```
[Api("Service Description")]
[ApiResponse(HttpStatusCode.BadRequest, "Your request was not understood")]
[ApiResponse(HttpStatusCode.InternalServerError, "Oops, something broke")]
[Route("/swagger/{Name}", "GET", Summary = @"GET Summary", Notes = "GET Notes")]
[Route("/swagger/{Name}", "POST", Summary = @"POST Summary", Notes = "Notes")]
public class MyRequestDto
{
    [ApiMember(Name="Name", Description = "Name Description", 
               ParameterType = "path", DataType = "string", IsRequired = true)]
    [ApiAllowableValues("Name", typeof(Color))] //Enum
    public string Name { get; set; }
} 
```

* * *

### 较旧的 v3 注释

[ServiceStack的元数据页面允许通过](http://www.servicestack.net)[EndpointHostConfig](https://github.com/ServiceStack/ServiceStack/blob/v3/src/ServiceStack/WebHost.Endpoints/EndpointHostConfig.cs)配置设置（所有 ServiceStack 配置所在的位置）进行有限的自定义。例如，您可以通过以下方式更改 AppHost 中的主页正文 HTML 和操作页面 HTML：

```
SetConfig(new EndpointHostConfig {
    MetadataPageBodyHtml = "<p>HTML you want on the home page</p>",
    MetadataOperationPageBodyHtml = "<p>HTML you want on each operation page</p>"
}); 
```

您还可以通过使用带有 [Description] 属性的 Request DTO 为每个 Web 服务添加更多元数据文档，如[MoviesRest 示例项目](https://github.com/ServiceStack/ServiceStack.Examples/blob/master/src/ServiceStack.MovieRest/MovieService.cs#L16)中所做的那样：

```
[Description("GET or DELETE a single movie by Id. POST to create new Movies")]
[RestService("/movies", "POST,PUT,PATCH,DELETE")]
[RestService("/movies/{Id}")]
public class Movie
{
    public int Id { get; set; }
    public string ImdbId { get; set; }
    public string Title { get; set; }
} 
```

以及 MoviesRest [/metadata 页面](http://www.servicestack.net/ServiceStack.MovieRest/xml/metadata?op=Movie)上的外观。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-08T14:00:20.500

服务堆栈元数据页面是完全可定制的。您可以使用属性来注释特定属性或服务，同时保留自动生成的内容。

内容使用嵌入的 HTML 模板交付，也可以替换以进行详细定制。

可以使用以下代码段完全关闭元数据页面，*这是我通常所做的。*

```
SetConfig(new HostConfig { 
EnableFeatures = Feature.All.Remove(Feature.Metadata) }); 
```

可以从[Service Stack Wiki](https://github.com/ServiceStack/ServiceStack/wiki/Metadata-page)找到更多详细信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T20:59:58.457

[在这里](https://stackoverflow.com/questions/12089153/is-it-possible-to-auto-generate-nice-documentation-for-rest-api-created-by-servi/12149068)寻找见解。不是如何自定义 /metadata 页面，而是如何通过超媒体 API 使用 XHTML 来做同样的事情。

# codeigniter-2 - CodeIgniter 分页和 GET

> ID：12344152
> 
> 赞同：0
> 
> 时间：2012-09-10T00:36:02.460
> 
> 标签：codeigniter-2, codeigniter-url

请参阅：[http ://codeigniter.com/user_guide/libraries/pagination.html](http://codeigniter.com/user_guide/libraries/pagination.html)

我不想使用 URI 段进行分页（因为我有很多可能的参数以未知的顺序传递）。目前，我有`$config['enable_query_strings'] = FALSE;`，如果我将其设置为 TRUE，我会得到类似这样的东西（来自 CI 的示例）：

[http://example.com/index.php?c=test&m=page&per_page=20](http://example.com/index.php?c=test&m=page&per_page=20)

其中“c”是控制器，“m”是方法等。这不是我想要的。

我想要这样的东西：

[http://domain.com/?min_amount=100&max_amount=200&color=blue&size=large&limit=20&limit_offset=100](http://domain.com/?min_amount=100&max_amount=200&color=blue&size=large&limit=20&limit_offset=100)

有没有办法在 CI 中实现这一点？如果没有，是否有一些我可以使用的库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T09:27:11.663

在 CodeIgniter 中，当涉及到查询字符串时，有两个配置选项。

一个选项（`$config['allow_get_array']`默认启用）允许您将其他查询传递到已经分段的 URI，然后可以通过`$this->input->get()`控制器库函数使用。您将使用此功能设置分页配置，允许您将路线和分页说明分开。

另一个选项 ( `$config['enable_query_strings']`) 强制您使用查询字符串代替分段的 URI。

# ruby-on-rails - 需要帮助以获取用户名的正确正则表达式格式

> ID：12344153
> 
> 赞同：0
> 
> 时间：2012-09-10T00:36:03.053
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我需要帮助我的用户名的正则表达式格式正确。它假设需要 3 个字母并且不允许有空格或`_`. 到目前为止，我认为我在正确的轨道上：

```
validates_format_of :username, :with => /([^a-zA-Z]*([a-zA-Z]+)[^a-zA-Z]*){3,}/ 
```

虽然这允许空格，但我不确定这是否是正确的。我需要对此正则表达式进行哪些更正才能摆脱使用空格或的能力`_`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T00:40:03.487

如果你的意思是它必须全是字母，那就是：

```
/^[a-zA-Z]{3,}$/ 
```

否则，使用前瞻：

```
/^(?=(.*[a-zA-Z]){3})[allowed characters here]+$/ 
```

# ruby-on-rails - 下载 PostgreSQL 后 Rails 服务器损坏

> ID：12344154
> 
> 赞同：0
> 
> 时间：2012-09-10T00:36:06.363
> 
> 标签：ruby-on-rails, ruby, postgresql

我使用的操作系统是 Mac OSX Mountain Lion。

首先，我将介绍一些关于这个集群 F 是如何开始的背景故事。我正在阅读一本 Ruby on Rails Web 开发书。我想使用 PostgreSQL 作为我的服务器。在今天之前，我使用的是 sqlite3。我从那里的网站下载了 PostgreSQL 9.1。我使用了 DMG 安装程序。完成安装过程后，由于某种内存问题，它要求我重新启动，我这样做了，并且安装没有错误。

当我尝试在终端中使用“Rails Server”命令时，问题就开始了。这就是我得到的（我试图去掉那些会弄乱一切的不重要的东西）

```
/Users/Chris/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/pg-0.12.2/lib/pg.rb:4:in `require': dlopen(/Users/Chris/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/pg-0.12.2/lib/pg_ext.bundle, 9): Library not loaded: /usr/lib/libcrypto.dylib (LoadError)

Referenced from: /usr/lib/libpq.5.dylib
  Reason: Incompatible library version: libpq.5.dylib requires version 1.0.0 or later, but libcrypto.0.9.8.dylib provides version 0.9.8 - /Users/Chris/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/pg-0.12.2/lib/pg_ext.bundle

...

from /Users/Chris/.rvm/gems/ruby-1.9.3-p194@rails3tutorial2ndEd/gems/railties-3.2.8/lib/rails/commands.rb:50:in 
```

我已经通读了输出并且我已经做了很多谷歌搜索，我发现这是服务器正在获取哪个版本的 libcrypto 的问题。或者关于 libssl 的一些东西。我已经浏览了谷歌上的解决方案，但似乎没有任何效果。希望有人遇到和我一样的问题，可以帮助我。

提前致谢！-克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T22:16:48.273

我真的推荐你使用[Homebrew](https://brew.sh/)来安装 postrgresql。它可以帮助您安装正确适用于 rails 的版本的所有正确依赖项。

```
$ brew install postgresql 
```

不要忘记在 homebrew 安装说明后遵循

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T01:12:07.033

你确定你成功安装了 PostgreSQL server/rubygem 吗？从堆栈跟踪来看，我认为它存在问题。

如果你的 PostgreSQL 服务器/rubygem 运行良好，那么切换另一个 web 服务器，mongrel/thin 都可以，都比默认的 rails 服务器(webrick) 具有更好的性能并且易于使用。

# objective-c - performSelectorOnMainThread 和 waitUntilDone，用于 NSURLConnection

> ID：12344156
> 
> 赞同：0
> 
> 时间：2012-09-10T00:36:16.790
> 
> 标签：objective-c, asynchronous, nsurlconnection, performselector

我不清楚 waitUntilDone 做了什么，但我发现了这个线程：

[performSelectorOnMainThread中WaitUntilDOne的意义是什么？](https://stackoverflow.com/questions/8943730/what-is-the-significance-of-waituntildone-in-performselectoronmainthread)

这让我有点清楚，但是，如果我执行一些使 NSURLConnection（它是异步的）和 waitUntilDone 设置为 YES 的选择器，那么会发生什么？它会等待方法执行，但是方法实际上做了一些异步操作（即NSURLConnection），那有什么影响呢？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T01:34:44.900

NSURLConnection 是异步的。您的代码在主线程上运行，并在下载过程中向您发出委托调用。您不需要也不应该从后台线程运行 NSURLConnection。

如果您确实有需要在后台线程上运行的代码，您可以使用 preformSelectorOnMainThread 方法将消息从您的工作线程发送到主线程。这样做的一个常见原因是您无法从后台线程更新 UI。您将调用一个方法来更新主线程上的 UI。

标志 waitUntilDone 控制 performSelectorOnMainThread 调用之后发生的事情。如果 waitUntilDone 为 false，您的后台线程将继续执行下一行，而无需等待主线程上的代码完成。

如果 waitUntilDone 为真，您的后台线程将阻塞，直到主线程完成执行您发送的选择器。

# ruby-on-rails - Rails 验证消息奇怪地处理百分比符号和双句点

> ID：12344158
> 
> 赞同：0
> 
> 时间：2012-09-10T00:36:41.223
> 
> 标签：ruby-on-rails, validation, activerecord, ruby-on-rails-2

使用 Rails 2.3.4、Ruby 1.8.7。

我有一个 ActiveRecord 验证，我想在错误消息中包含用户的输入。我正在做这样的简化版本：

```
record.errors.add attr, "'#{calculated_value}' is not valid.' 
```

哪里`calculated_value`是较大值的用户输入的一部分。

我发现如果用户输入包含某些字符的值，就会发生奇怪的事情。如果`calculated_value`contains `%s`，`%s`则替换为用户输入的完整值。如果`calculated_value`包含`..`，我得到：

```
ArgumentError - interning empty string from /var/lib/gems/1.8/gems/activesupport-2.3.4/lib/active_support/vendor/i18n-0.1.3/lib/i18n.rb:196:in `to_sym'. 
```

我想知道如何禁用该功能或​​如何转义这些值。我尝试转义`%s`到`%%s`sprintf 风格，但这不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T01:48:02.127

我不知道这个方法在 rals 2.3.4 中是否可用。但是你能试试 activerecord [Inclusion](http://guides.rubyonrails.org/active_record_validations_callbacks.html#inclusion)吗？这个助手验证属性的值是否包含在给定的集合中。所以你的代码将类似于

```
class YourModel< ActiveRecord::Base
  validates :calculated_value, :inclusion => { :in => %w(Valid Values you want),
    :message => "%{calculated_value} is not a valid value" }
end 
```

# android - 替换android外部文本文件中的一行文本

> ID：12344160
> 
> 赞同：0
> 
> 时间：2012-09-10T00:37:18.233
> 
> 标签：android, io, text-files

我只想从我创建的文本文件中删除 2 行文本。目前，这就是我试图摆脱的 2 行：

```
private void deleteDataFromFile(String title, String Date) {

        try {
            //open the file
            FileInputStream myIn= openFileInput(FILENAME);
            //the reader given the input file stream.
            InputStreamReader inputReader = new InputStreamReader(myIn);
            //Aftert he inputstream is open, need also a bufferedReader
            BufferedReader BR = new BufferedReader(inputReader);

            //holds a line of input
            String line;

            //used for only erasing one date.
            int counter = 0;

            while ((line = BR.readLine()) != null && counter < 1) {
                if (line.equals(title)) {
                    line.replace(title, "" + "\n");
                    line = BR.readLine();
                    line.replace(Date, "" + "\n");
                    counter++;
                }
            }
            BR.close();
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

} 
```

我意识到，由于我在字符串上使用替换函数，它对实际文件本身没有影响，但我在 IO 库中找不到任何其他函数来影响文本文件。我正在考虑做的是在手机上使用该文件的确切内容创建一个新文件，然后从中删除两行。不过，这似乎很麻烦且效率低下，我想避免它。有什么建议么？

# version-control - 如何在共享 Visual Studio 解决方案中使用隔离开发数据库

> ID：12344161
> 
> 赞同：2
> 
> 时间：2012-09-10T00:37:29.637
> 
> 标签：version-control, sql-server-2008-r2, database-project

我正在领导一个小型软件开发团队（4 人），并且刚刚在一个源代码控制的 SQL Server 2008 数据库项目上破土动工，每个开发人员都有独立的开发数据库。我仍在一步一步实现，但我设想每个开发人员都有自己的数据库，命名方案类似于`<ProjectName>_DEVELOPMENT_<TFSUserName>`. 根据我一直在阅读的 MSDN 文章，所有这些都是推荐的，但如果这听起来有点不对劲，有人告诉我。

无论如何，我们已经开发了一段时间的共享应用程序解决方案。过去，我们没有数据库版本控制，只是在需要填充新的参考数据或测试功能时直接从 SQL Server Management Studio 修改我们的数据库——一个更改会立即影响其他所有人。所以有了这个新的变化，我想知道让每个人从应用程序解决方案连接到他们隔离的开发数据库的最佳方法是什么。在隔离数据库之前，我们与数据库的连接在应用程序的 web.config 中指定为连接字符串。如果我们每个人都将拥有自己的数据库，那么我可以看到它工作的唯一方法是让每个开发人员在他们的本地解决方案中设置他们的连接字符串以指向他们的个人数据库。但是更改 web.config 将在解决方案中签出该文件，因此开发人员在签入对基线的应用程序更改时总是必须专门取消选中该文件。每个开发人员在进行应用程序测试时是否有一种不那么笨拙的方式来使用他们的隔离数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T18:50:05.803

I recommend that you *not* make the database names username-specific. Instead make the database the same name for each developer and always reference it via localhost (`localhost\<ProjectName>_DEVELOPMENT`). Then the same connection string will work for every developer.

MSDN's suggestion to use username-specific databases is better for a shared development environment. It's definitely not ideal for a localized environment.

# c++ - OpenCV HOGDescriptor HEAP 崩溃

> ID：12344167
> 
> 赞同：1
> 
> 时间：2012-09-10T00:39:21.627
> 
> 标签：c++, opencv

`cv::HOGDescriptor`我对Visual Studio 2012 中的 opencv 2.4.2有一些问题。

```
vector<cv::Rect> found, found_filtered;
cv::HOGDescriptor hog;
hog.setSVMDetector(cv::HOGDescriptor::getDefaultPeopleDetector()); // CRASH HERE
hog.detectMultiScale(tempFrame, found, 0, cv::Size(8, 8), cv::Size(32, 32), 1.05, 2); 
```

它绝对是在 XCode 中运行但不在 Visual Studio 2012 中运行的示例代码的副本。

错误信息是

```
HEAP[Project.exe]: Invalid address specified to RtlValidateHeap( 00C80000, 02D51150 )
Project.exe has triggered a breakpoint. 
```

有没有人遇到过这种问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T05:53:20.663

1.  右键单击项目 - 属性
2.  配置属性 - 常规 - 设置平台工具集：“Visual Studio 2010 (v100)”
3.  配置属性 - C/C++ - 代码生成 - 设置运行时库：“多线程调试 DLL (/MDd)”用于调试构建或“多线程 DLL (/MD)”用于发布构建

# cordova - Bootstrap 或 JQuery 移动

> ID：12344179
> 
> 赞同：7
> 
> 时间：2012-09-10T00:42:50.790
> 
> 标签：cordova, jquery-mobile, twitter-bootstrap

我正在开始一个 phonegap 应用程序，但我正在犹豫我将使用哪个 CSS 和 JS 框架：**来自 twitter 的 Bootstrap，**它提供了漂亮的渲染，但使用 LESS 或**Jquery mobile**，这很容易实现。你觉得他们怎么样？谢谢你 ：）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-15T15:57:39.823

**引导程序**

*   默认情况下看起来更好，并且具有更好的主题范围，而不仅仅是替代配色方案。
*   **在布局和**性能方面更具响应性。
*   如果您正在寻找一个专注于布局和设计的轻量级构建，您可以[只选择您需要的组件，可能不包括 JS 功能。](http://twitter.github.com/bootstrap/customize.html "下载 Bootstrap 或自定义变量、组件、JavaScript 插件等。")

**jQuery 移动**

*   如果您不太关心性能或类似 iOS 的外观和行为，则适用于快速原型制作
*   jQuery Mobile 的[Listview](http://view.jquerymobile.com/1.3.0/docs/widgets/listviews/ "jQuery Mobile 列表视图")将为您节省大量时间，如果您正在为在线商店或其他具有大量列表或子导航的东西构建移动公司。

有一个移动框架比较可能有助于您了解满足您需求的最佳选择：http: [//www.markus-falk.com/mobile-frameworks-comparison-chart/](http://www.markus-falk.com/mobile-frameworks-comparison-chart/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-10T00:59:06.767

您可以将 Bootstrap 与普通 CSS 一起使用：

[http://www.initializr.com/](http://www.initializr.com/)

此外，它更适合开始使用响应式设计。

# asp.net - 如何从其他网站获取一小段信息到asp.net Web应用程序中

> ID：12344183
> 
> 赞同：0
> 
> 时间：2012-09-10T00:43:15.650
> 
> 标签：asp.net, vb.net, asp-classic

在经典 ASP 中，可以使用以下方法完成此过程：

```
Dim xml,strRetrive
set xml = Server.CreateObject("Microsoft.XMLHTTP")
xml.Open "GET", "http://www.abc.com/viewProduct/?productNumber="&sCode  , false
xml.Send
strRetrive=xml.responseText 
```

我们如何在 ASP.NET 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T00:45:38.287

使用`System.Net.WebClient`：

```
Using c As New Net.WebClient()
    retrieved = c.DownloadString("http://www.abc.com/viewProduct/?productNumber=" & sCode)
End Using 
```

# python - 如何阻止 python 解释器在 Windows 7 上关闭？

> ID：12344187
> 
> 赞同：0
> 
> 时间：2012-09-10T00:44:19.633
> 
> 标签：python, windows-7

我对 python 解释器有这个问题 - 它在脚本执行后立即关闭。我正在尝试学习 pygtk；我在教程之后写了“hello world”，我能看到的只是两个窗口的快速闪现，一个解释器和一个 gtk。我尝试从 command.com 运行脚本，而不是通过双击运行脚本 - 并没有太大帮助。

在较旧的 Windows 中，我只需选中相应选项卡上的复选框，但我该如何在这个令人眼花缭乱的眼睛糖果上做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T01:12:05.497

我对 pygtk 不熟悉，但是如果您在 Windows 下双击 Python 程序，并且程序运行然后窗口关闭，那么您可以通过调用来尝试这种简单的方法

```
 raw_input() # with Python 2.x 
```

或者

```
 input() # with Python 3.x 
```

在脚本的末尾。这将导致程序停止并等待输入（并保持窗口打开），如果您按下键，程序将结束（并且您的窗口将关闭）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T01:16:30.187

通常情况下会发生一些异常，即使您在最后放置了一些睡眠功能（或其他等待用户的语句），它也可能会失败。

为了克服这个问题，只需使用异常捕获及其后的部分`finally`：

```
import time

try:
    ... (your code goes here) ...
except:
    ... (some exception handling, if needed) ...
finally:
    time.sleep(5)  # always sleep 5 seconds before exiting 
```

后面的部分`finally`确保在两种情况下（有异常和无异常）都会执行一些代码。除非您手动关闭计算机；）

正如 Mark Lutz 在他的“ *Learning Python. 4th Edition* ”一书中所建议的那样，`time.sleep`你也可以使用.`input()`

 ** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T08:17:22.437

如果您从命令窗口运行脚本，python`-i`选项将在脚本完成后保持交互式 Python 会话打开，以便您可以输入 Python 语句进行调试等：

```
C:\>python -i script.py
>>> 
```

不确定这是否会使 GTK 窗口保持打开状态，这取决于我期望的编程方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T02:24:41.700

我建议您在某种编辑器中运行您的代码（几乎任何编辑器都可以：Eclipse、Geany、Spyder、IDLE 等）。这样做的原因是，当程序执行时，您的代码中很可能会在某处出现致命错误。即使出现错误，Python IDE 也倾向于保持用于执行代码的窗口打开，因此您可以查看错误回调以供参考。这将告诉您从哪里得到错误，并允许您相应地修复代码。当然，您总是可以继续前进`input()`或`time.sleep()`坚持到底并希望有所帮助，但这取决于您。我建议使用我上面提到的 IDE。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T22:52:25.927

```
import subprocess
print "hello from python"

subprocess.Popen(["pause"], shell=True) 
```

这将等待按下任何键*

# python - 在 GAE 上发送/存储数据的最有效/最便宜的方式

> ID：12344193
> 
> 赞同：1
> 
> 时间：2012-09-10T00:44:48.490
> 
> 标签：python, performance, google-app-engine, google-cloud-datastore, scalability

我想尽量减少 GAE 的流量/存储成本。

用户填写表格，选中复选框以选择文本行选项，例如“我在夜间醒来两次或更多次”。或“我每晚睡不到 7 小时。” 或“我通常难以入睡。”

我想使用数据存储存储用户的选择。我想我可以通过给每个选择一个唯一的标识符来节省存储空间。然后我将只存储（例如）“342、554、106”而不是三行长文本......然后在下次为每个用户加载页面时检索这些数字并将它们翻译回句子。

我的问题是，在客户端或服务器端进行转换会更好吗？

显然，在客户端进行转换意味着将 LESS 数据从客户端发送到服务器进行存储——这很好。但是，这将意味着从服务器向客户端发送更多数据，考虑到促进转换所需的额外的客户端 javascript 行，它们将作为页面源的一部分下载 - 这可能很糟糕。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T13:42:07.140

听起来您已经想出了如何最好地存储数据。

就在服务器端或客户端将其转换为 HTML 而言，这取决于页面的复杂性。分析它可能会花费更多的时间而不是它的价值，并且如果您的页面发生变化，它可能会改变。除非是极端情况，否则很可能是清洗。使用更简单的方法并完成您的项目。如果您使用的是在服务器端处理生成表单的框架，请使用它。如果您有数十万的浏览量并且这会增加大量成本，请重新访问特别是导致您出现问题的页面。

一个极端的情况可能是，如果您的表单需要在页面上出现很多次，在这种情况下，在 javascript 中使用一次实际表单并多次复制它可能更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T04:32:18.850

以下是一些建议：

*   将用户首选项/设置也保存在服务器上，以便您将来可以将他们的首选项同步到多个客户端/设备。
*   还建议将数据本地存储在客户端上，这样就不会每次都调用服务器来获取某些首选项。在离线情况下，让相关数据在客户端本地可用是非常关键的。

就 GAE 上的存储选项而言 - 有各种不同的选项。由于您使用的是 Datastore，我建议您使用它。就每个实体的存储大小和输入/输出带宽而言，您可以进行近似计算，如果您觉得可以通过几个数字或组合数字（在单个 Datastore 实体属性中）而不是多个实体属性，它是可取的并且会有所帮助。

# entity-framework-5 - 使用 EntityFramework 创建数据表引用我的模型

> ID：12344194
> 
> 赞同：0
> 
> 时间：2012-09-10T00:44:53.467
> 
> 标签：entity-framework-5

我使用`EntityFramework`创建数据表引用我的模型，但它一次只能创建一个数据表。在我的项目中，当我的模型发生变化时，如何让数据表也发生变化？

我需要修改我的数据库吗？有没有自动创建或修改的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T08:19:00.423

该方法称为 EF 迁移 - 查看这些教程（[自动迁移](http://msdn.microsoft.com/en-US/data/jj554735)、[代码迁移](http://msdn.microsoft.com/en-US/data/jj591621)）。如果您不使用迁移，您的数据库将不会更新 - EF 提供的没有迁移的唯一选择是删除数据库并让它从头开始创建一个新数据库。

# java - 在java中计算行列式计算

> ID：12344198
> 
> 赞同：0
> 
> 时间：2012-09-10T00:45:31.423
> 
> 标签：java, matrix

我正在使用伴随方法计算矩阵的逆。首先我必须计算矩阵的行列式。为了计算行列式，我首先创建一个上三角矩阵，然后将对角线相乘以获得矩阵的行列式。下面给出了计算行列式的公式。

```
for(int cr = 1 ;cr < dd.length;cr++)
{ double factor = 0.0;      
  final   double[] firstrow = new double[dd.length] ; /* dd is a matrix*/

  for(int r = 0 ;r < dd.length; r++)  
 { firstrow[r] = dd[cr - 1][r]; }

for( int rowcount = cr + 0 ; rowcount< dd.length ; rowcount++)
{           
  factor = dd[rowcount][cr - 1] / firstrow[cr - 1];

for( int m = cr - 1 ; m < firstrow.length ; m++)
{  
dd[cr - 1][m] = firstrow[m] * factor;               /* multioly row by factor */                                                
dd[rowcount][m] = dd[rowcount][m] - dd[cr - 1][m];  /* our current row minus factored row */
dd[cr - 1][m] = firstrow[m];                        /* restore the original values to row */    
}    }} 

for(int d = 0 ; d < dd.length;d++)
{det *= dd[d][d];}    /* det is the determinant */ 
```

得到下三角矩阵后，对角线值的乘积成为矩阵的行列式。我已经尝试过这种方法并且它有效。但是，当我使用它来计算具有浮点值的 13 x 13 矩阵的行列式时，我得到的不是一个数值，它是 NaN 作为行列式。有人可以向我解释发生了什么。我有以下矩阵的示例值。

```
65.15078176822551
 731.664756199619
 1.5309584518179011E9
 1.7388182254012366E11
 3.3604905770182707E17
 1.77135880331128576E17 
```

谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T02:28:31.967

我怀疑问题与您使用`factor`to （我猜）减少数字的比例有关。我敢打赌`firstrow[cr - 1]`，某些指数为零。随后除以零将创建 INF 或 NaN，并将传播到计算的其余部分。

* * *

顺便说一句，这个“公式”看起来不像计算行列式的标准方法，如下所述：

[http://www.math.dartmouth.edu/archive/m8s00/public_html/handouts/matrices3/node7.html](http://www.math.dartmouth.edu/archive/m8s00/public_html/handouts/matrices3/node7.html)

标准版不涉及任何划分。你确定你的“公式”是正确的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-21T06:05:35.587

试试这个，你会得到**任何维度矩阵的准确行列式。**

这个类使用许多不同的方法**使矩阵成为三角形**，然后计算它的行​​列式。它可以用于高维矩阵，如 500 x 500 甚至更大。这门课的好处是你可以得到**BigDecimal 的结果，**所以没有无穷大，**你总能得到准确的答案**。顺便说一句，使用许多不同的方法并避免递归会导致更快的方法和更高的答案性能。希望它会有所帮助。

```
import java.math.BigDecimal;

public class DeterminantCalc {

private double[][] matrix;
private int sign = 1;

DeterminantCalc(double[][] matrix) {
    this.matrix = matrix;
}

public int getSign() {
    return sign;
}

public BigDecimal determinant() {

    BigDecimal deter;
    if (isUpperTriangular() || isLowerTriangular())
        deter = multiplyDiameter().multiply(BigDecimal.valueOf(sign));

    else {
        makeTriangular();
        deter = multiplyDiameter().multiply(BigDecimal.valueOf(sign));

    }
    return deter;
}

/*  receives a matrix and makes it triangular using allowed operations
    on columns and rows
*/
public void makeTriangular() {

    for (int j = 0; j < matrix.length; j++) {
        sortCol(j);
        for (int i = matrix.length - 1; i > j; i--) {
            if (matrix[i][j] == 0)
                continue;

            double x = matrix[i][j];
            double y = matrix[i - 1][j];
            multiplyRow(i, (-y / x));
            addRow(i, i - 1);
            multiplyRow(i, (-x / y));
        }
    }
}

public boolean isUpperTriangular() {

    if (matrix.length < 2)
        return false;

    for (int i = 0; i < matrix.length; i++) {
        for (int j = 0; j < i; j++) {
            if (matrix[i][j] != 0)
                return false;

        }

    }
    return true;
}

public boolean isLowerTriangular() {

    if (matrix.length < 2)
        return false;

    for (int j = 0; j < matrix.length; j++) {
        for (int i = 0; j > i; i++) {
            if (matrix[i][j] != 0)
                return false;

        }

    }
    return true;
}

public BigDecimal multiplyDiameter() {

    BigDecimal result = BigDecimal.ONE;
    for (int i = 0; i < matrix.length; i++) {
        for (int j = 0; j < matrix.length; j++) {
            if (i == j)
                result = result.multiply(BigDecimal.valueOf(matrix[i][j]));

        }

    }
    return result;
}

// when matrix[i][j] = 0 it makes it's value non-zero
public void makeNonZero(int rowPos, int colPos) {

    int len = matrix.length;

    outer:
    for (int i = 0; i < len; i++) {
        for (int j = 0; j < len; j++) {
            if (matrix[i][j] != 0) {
                if (i == rowPos) { // found "!= 0" in it's own row, so cols must be added
                    addCol(colPos, j);
                    break outer;

                }
                if (j == colPos) { // found "!= 0" in it's own col, so rows must be added
                    addRow(rowPos, i);
                    break outer;
                }
            }
        }
    }
}

//add row1 to row2 and store in row1
public void addRow(int row1, int row2) {

    for (int j = 0; j < matrix.length; j++)
        matrix[row1][j] += matrix[row2][j];
}

//add col1 to col2 and store in col1
public void addCol(int col1, int col2) {

    for (int i = 0; i < matrix.length; i++)
        matrix[i][col1] += matrix[i][col2];
}

//multiply the whole row by num
public void multiplyRow(int row, double num) {

    if (num < 0)
        sign *= -1;

    for (int j = 0; j < matrix.length; j++) {
        matrix[row][j] *= num;
    }
}

//multiply the whole column by num
public void multiplyCol(int col, double num) {

    if (num < 0)
        sign *= -1;

    for (int i = 0; i < matrix.length; i++)
        matrix[i][col] *= num;

}

// sort the cols from the biggest to the lowest value
public void sortCol(int col) {

    for (int i = matrix.length - 1; i >= col; i--) {
        for (int k = matrix.length - 1; k >= col; k--) {
            double tmp1 = matrix[i][col];
            double tmp2 = matrix[k][col];

            if (Math.abs(tmp1) < Math.abs(tmp2))
                replaceRow(i, k);
        }
    }
}

//replace row1 with row2
public void replaceRow(int row1, int row2) {

    if (row1 != row2)
        sign *= -1;

    double[] tempRow = new double[matrix.length];

    for (int j = 0; j < matrix.length; j++) {
        tempRow[j] = matrix[row1][j];
        matrix[row1][j] = matrix[row2][j];
        matrix[row2][j] = tempRow[j];
    }
}

//replace col1 with col2
public void replaceCol(int col1, int col2) {

    if (col1 != col2)
        sign *= -1;

    System.out.printf("replace col%d with col%d, sign = %d%n", col1, col2, sign);
    double[][] tempCol = new double[matrix.length][1];

    for (int i = 0; i < matrix.length; i++) {
        tempCol[i][0] = matrix[i][col1];
        matrix[i][col1] = matrix[i][col2];
        matrix[i][col2] = tempCol[i][0];
    }
} 
```

}

然后这个类从用户那里接收一个 nxn 的矩阵，或者可以生成一个 nxn 的随机矩阵，然后计算它的行​​列式。它还显示了解决方案和最终的三角矩阵。

```
import java.math.BigDecimal;
import java.security.SecureRandom;
import java.text.NumberFormat;
import java.util.Scanner;

public class DeterminantTest {

public static void main(String[] args) {

    String determinant;

    //generating random numbers
int len = 500;
SecureRandom random = new SecureRandom();
double[][] matrix = new double[len][len];

for (int i = 0; i < len; i++) {
    for (int j = 0; j < len; j++) {
        matrix[i][j] = random.nextInt(500);
        System.out.printf("%15.2f", matrix[i][j]);
    }
}
System.out.println();

/*double[][] matrix = {
    {1, 5, 2, -2, 3, 2, 5, 1, 0, 5},
    {4, 6, 0, -2, -2, 0, 1, 1, -2, 1},
    {0, 5, 1, 0, 1, -5, -9, 0, 4, 1},
    {2, 3, 5, -1, 2, 2, 0, 4, 5, -1},
    {1, 0, 3, -1, 5, 1, 0, 2, 0, 2},
    {1, 1, 0, -2, 5, 1, 2, 1, 1, 6},
    {1, 0, 1, -1, 1, 1, 0, 1, 1, 1},
    {1, 5, 5, 0, 3, 5, 5, 0, 0, 6},
    {1, -5, 2, -2, 3, 2, 5, 1, 1, 5},
    {1, 5, -2, -2, 3, 1, 5, 0, 0, 1}
};

    double[][] matrix = menu();*/

    DeterminantCalc deter = new DeterminantCalc(matrix);

    BigDecimal det = deter.determinant();

    determinant = NumberFormat.getInstance().format(det);

    for (int i = 0; i < matrix.length; i++) {
        for (int j = 0; j < matrix.length; j++) {
            System.out.printf("%15.2f", matrix[i][j]);
        }
        System.out.println();
    }

    System.out.println();
    System.out.printf("%s%s%n", "Determinant: ", determinant);
    System.out.printf("%s%d", "sign: ", deter.getSign());

}

public static double[][] menu() {

    Scanner scanner = new Scanner(System.in);

    System.out.print("Matrix Dimension: ");
    int dim = scanner.nextInt();

    double[][] inputMatrix = new double[dim][dim];

    System.out.println("Set the Matrix: ");
    for (int i = 0; i < dim; i++) {
        System.out.printf("%5s%d%n", "row", i + 1);
        for (int j = 0; j < dim; j++) {

            System.out.printf("M[%d][%d] = ", i + 1, j + 1);
            inputMatrix[i][j] = scanner.nextDouble();
        }
        System.out.println();
    }
    scanner.close();

    return inputMatrix;
} 
```

}

# sql - 比较数据并将数据插入表中

> ID：12344201
> 
> 赞同：0
> 
> 时间：2012-09-10T00:46:48.427
> 
> 标签：sql, sql-server

我有两个表，一个是临时表，另一个是数据库表。我需要根据 MM 和 ProjectID 比较两个表。如果数据存在于 @mtts 但不存在于 tbl_snapshot 中，那么我必须将其插入 tbl_sanpshot

> @mtts 表([MM],[YYYY],[month_Start],[month_Finish],[ProjectID],[ProjectedBillable],[ProjectedPayable],[ActualBilled],[ActualPaid],[Total_To_Bill],[Total_To_Pay])
> 
> tbl_Snapshot ([MM],[YYYY],[month_Start],[month_Finish],[ProjectID],[ProjectedBillable],[ProjectedPayable],[ActualBilled],[ActualPaid],[Total_To_Bill],[Total_To_Pay])。

我是 sql.so 的新手，所以请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T00:57:56.630

您可以使用`INSERT INTO...SELECT`and`EXISTS`来解决您的问题，试试这个

```
INSERT INTO tbl_Snapshot([MM],[YYYY],[month_Start],[month_Finish],
                         [ProjectID],[ProjectedBillable],[ProjectedPayable],
                         [ActualBilled],[ActualPaid],[Total_To_Bill],
                         [Total_To_Pay])
SELECT *
FROM mtts
WHERE NOT EXISTS (SELECT * FROM tbl_Snapshot) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T03:21:09.943

除了 John Woo 的建议之外，这里还有两个选择。

**使用左连接**

```
INSERT INTO tbl_Snapshot
SELECT *
FROM @mtts mtts 
LEFT JOIN tbl_Snapshot ss ON mtts.MM = ss.MM AND mtts.ProjectID = ss.ProjectID
WHERE ss.MM IS NULL AND ss.tbl_Snapshot IS NULL 
```

**使用 Merge 语句（将从 Sql Server 2008 开始工作）**

```
MERGE tbl_Snapshot AS ss
USING (SELECT * FROM @mtts) AS mtts
ON mtts.MM = ss.MM AND mtts.ProjectID = ss.ProjectID
WHEN NOT MATCHED THEN
INSERT([MM],[YYYY],[month_Start],[month_Finish],[ProjectID],[ProjectedBillable],[ProjectedPayable],
       [ActualBilled],[ActualPaid],[Total_To_Bill],[Total_To_Pay])
VALUES(mm.[MM],mm.[YYYY],mm.[month_Start],mm.[month_Finish],mm.[ProjectID],mm.[ProjectedBillable],mm.[ProjectedPayable],
       mm.[ActualBilled],mm.[ActualPaid],mm.[Total_To_Bill],mm.[Total_To_Pay]); 
```

**这是一种非常肮脏的方式（CAST 到 VARCHAR，然后是 MERGE，最后是 COMPARE）**

```
INSERT INTO tbl_Snapshot
SELECT *
FROM @mtts mtts  
WHERE CAST(mtts.MM AS vARCHAR(10)) + CAST(mtts.ProjectID AS VARCHAR(10))
NOT IN (SELECT CAST(ss.MM AS vARCHAR(10)) + CAST(ss.ProjectID AS VARCHAR(10)) FROM tbl_Snapshot ss) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T06:25:49.100

尝试这个 ，

插入 tbl_Snapshot select * from @mtts where [MM] not in(select [MM] from tbl_Snapshot) and [ProjectID] not in (select [ProjectID] from tbl_Snapshot)

谢谢，

文卡特

# database-design - 我应该在数据库中输入默认值吗？

> ID：12344203
> 
> 赞同：1
> 
> 时间：2012-09-10T00:47:00.627
> 
> 标签：database-design

假设大多数用户不会设置他们的头像，最好在创建新用户时在用户的表头像列中存储 default.jpg 之类的值，或者检查控制器/视图中是否存在值，如果它为空，则显示默认值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T01:11:08.087

我会把它留空，然后通过代码执行检查。

1.  它让我可以选择在以后更改，例如更改为，`default.jpg`而`default.png`不必接触数据库。或者做其他有趣的事情，[比如 SO 如何生成 'default' avatars](https://meta.stackexchange.com/a/20472/179533)。

2.  *感觉*更干净了（用户*没有*选择头像，所以留空。如果用户不输入年龄，你会补吗？不会。）

顺便说一句，您真的应该在实施另一个头像之前查看[gravatar.com 。](http://gravatar.com)我喜欢我只需将我的头像一次上传到一个网站，所有其他网站（如 SO）都会自动使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T00:51:28.403

我会选择让您的“创建新用户”方法将其`default.jpg`放入数据库中。这使您的用户表中的内容保持一致，因此您的代码不必在字段为空时进行检查或处理特殊情况。它还在代码中为您提供了一个必须跟踪它的位置。

当您创建用户时，您想要进行验证和检查并在必要时防止/修复事情。越往下走，你越让这种情况变得越难管理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T01:51:09.390

将 NULL 放入数据库可以节省存储空间，而不是拥有许多相同（因此是冗余的）default.jpg BLOB。

当然，您可能将图像存储在文件系统中，在这种情况下，节省的存储空间会小得多（因为只会重复文件路径，而不是文件本身）。或者，您可以设计一种在用户之间共享 BLOB 的方法。但是所有这些策略都使查询复杂化，并可能影响性能/完整性......

# javascript - window.focus() 不适用于 Chrome 和 Firefox

> ID：12344204
> 
> 赞同：3
> 
> 时间：2012-09-10T00:47:18.120
> 
> 标签：javascript, firefox, google-chrome

我试图让这个`window.focus()`功能在没有运气的情况下工作。

[**看看这个小提琴**](http://jsfiddle.net/94KYp/)

```
var myWindow = window.open('','zzz','width=600,height=700');
    myWindow.document.write('test');
    myWindow.focus();​ 
```

如果您在 jsfiddle 页面加载后单击运行，则新窗口应该重新获得焦点。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T00:58:20.243

它在 FF 15 中对我“有效”。用户可以禁用脚本打开和聚焦窗口的功能，检查您的设置。哦，弹出窗口应该默认获得焦点，所以你不应该调用`myWindow.focus()`.

一些可能与问题无关但您可能想要修复的小问题：

1.  应将有效文档写入新窗口，需要一个标题元素和一个块元素，例如`document.write('<title></title><div></div>`，强烈建议使用 DOCTYPE
2.  完成写入后应关闭输入流，使用`document.close()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T01:00:31.087

至少对于 Chrome（没有 FF）只需替换

```
myWindow.focus(); 
```

和

```
myWindow.blur();
setTimeout(myWindow.focus, 0); 
```

编辑：意识到我在 linux VM 中有 FF。该代码适用于当前的 Chrome 和最新的 Mint x64 下的 FF12

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-04T11:03:13.057

这对我有用：

```
<script> 
var popupWin;
function open_popup(url) {
    if(typeof(popupWin) == "object" ) popupWin.close();

    popupWin =  window.open(url, 'PopupName', 'scrollbars=no,resizable=yes, width=600,height=800,status=no,location=no,toolbar=no'); 
    popupWin.focus();

 }
</script> 
```

# google-bigquery - Bigquery 返回内部错误 503：23 cols X 600,00 行

> ID：12344206
> 
> 赞同：0
> 
> 时间：2012-09-10T00:47:43.143
> 
> 标签：google-bigquery

我正在查询大量数据，并在返回数据时不断收到此错误。这开始于今天下午。查询字符串可以在 bigquery 浏览器工具中找到。只有我在一台机器上同步查询。怀疑我是否达到了 20,000 个查询限制。

这是一个已知的错误？

查询数据时出现内部错误。runSyncQuery 中的错误：'{\n "error": {\n "errors": [\n {\n "domain": "global",\n "reason": "backendError",\n "message": "后端错误"\n }\n ],\n "代码": 503,\n "消息": "后端错误"\n }\n}\n'

设置：中型实例 EC2

1.  查询 19 -23 列，每列约 600000 行。总计 564 mb
2.  查询的最大长度设置为 50,000（也是 100,000 和 500,000）
3.  查询返回非常慢
    分页结果的值
    当前长度：8825
    1 当前行：17650
    2 当前行：26475
    3 当前行：35300
    4 当前行：44125
    5 当前行：52950
    6 runSyncQuery 中的错误：'{\n "错误": {\n "错误": [\n {\n "域": "全局",\n "原因": "backendError",\n "消息": "后端错误"\n }\n ] ,\n "code": 503,\n "message": "后端错误"\n }\n}\n'

添加其他请求的信息：job_183c2c3919dd4d8fac9f2947201978ef 459512762119 当前长度：8825 1 当前行：17650 2 当前行：26475 3 runSyncQuery 中的错误：'{\n "error": {\n "errors": [\n {\n "domain" : "global",\n "reason": "backendError",\n "message": "后端错误"\n }\n ],\n "code": 503,\n "message": "后端错误" \n }\n}\n'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T03:03:54.070

只是为了确保我理解：您正在运行查询，然后对结果进行分页，而第 6 页给您一个后端错误？

后端错误几乎总是表明 bigquery 中存在内部错误——您能告诉我您正在使用的项目 ID 以及查询作业 ID（如果有的话）吗？

# exception - 在 Dynamics CRM 2011 中是否可以在显示访问被拒绝时找到缺少的权限

> ID：12344207
> 
> 赞同：0
> 
> 时间：2012-09-10T00:47:48.927
> 
> 标签：exception, dynamics-crm-2011, security-roles

在 Dynamics CRM 2011 中是否可以在显示访问被拒绝时发现缺少什么权限？

例如，登录用户尝试通过电子邮件活动的相关字段创建新帐户。当她点击新按钮时，她会显示

```
Access Is Denied 
You do not have enough privelleges to access the Microsoft Dynamic CRM object or perform the requested opertaion... 
```

我想在此消息的底部列出 CRM 认为它需要的权限（我只需要在测试期间拥有此功能，并在生产中将其关闭）。或者如果这太难了，我很想知道一个日志的位置，它告诉我需要什么权限以及用户名，这样我就可以适当地调整安全矩阵。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T08:01:09.830

另一种选择是启用开发人员错误。您将获得更完整的消息，而不是标准的 Crm 错误消息，其中包含堆栈跟踪。然后，您将给出缺少的特权名称。

描述[在这里](http://rostacik.net/2011/07/07/how-to-turn-on-developer-errors-in-microsoft-crm-2011-aka-titan-or-5-0/)。

此外，正如 Jason 解释的那样，您通常会获得一个可以理解的特权名称，但如果您不检查[this](http://msdn.microsoft.com/en-us/library/gg334308.aspx)。

安全角色 UI 到权限映射 - 将显示哪个权限名称与 Ui 上的哪个选项相关联。

如果 Crm 曾经向您返回 Guid 而不是特权名称，其他页面将有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T04:28:44.847

如果您在 CRM 服务器上启用跟踪，您应该能够弄清楚。它不会明确告诉您缺少哪个权限，但应该给您一个很好的主意，您会看到诸如“缺少 PrvReadAccount 权限”之类的异常消息，这意味着用户缺少对 Account 实体的读取权限。

[如何在 Microsoft Dynamics CRM 中启用跟踪](http://support.microsoft.com/kb/907490)

# java - 减少冗余的设计模式

> ID：12344208
> 
> 赞同：4
> 
> 时间：2012-09-10T00:47:54.830
> 
> 标签：java

我目前正在设计一个通过操纵声明的字段大量使用反射的类。因此，许多方法在它们的主体方面有一些共同点，（希望）这个 java 代码说明了这一点：

```
import java.lang.reflect.Field;

public class foo {
    public void foo1(/* arguments1 */) {
        for (Field f : getClass().getDeclaredFields()) {
            // do some stuff using arguments1
        }
    }

    public void foo2(/* arguments2 */) {
        for (Field f : getClass().getDeclaredFields()) {
            // do some stuff using arguments2
        }
    }

    public void foo3(/* arguments3 */) {
        for (Field f : getClass().getDeclaredFields()) {
            // do some stuff using arguments3
        }
    }

    //and so on...
} 
```

根据这个类最终包含多少方法，这是否可以被视为设计缺陷？例如，如果我想使用`getFields()`而不是`getDeclaredFields()`，我需要替换每次出现的`getDeclaredFields()`. 对我来说，这听起来不像是好的编程习惯。在我的情况下，这可能不是一个非常现实的场景，但为了感兴趣，我想知道是否有解决这个问题的设计模式或概念。

**[编辑]**

为了避免额外的误解：循环内的操作取决于 foo1、foo2 等给出的参数。并且这些参数对于每个方法并不总是相同的。我很好地说明了这个事实，sry。我改进了给定的代码以更好地展示它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T00:53:42.847

您可能想为循环体定义一个接口：

```
interface FieldOperation {
    void doSomeStuff(Field f);
} 
```

然后，您可以编写一个循环方法来代替`foo1`、`foo2`和`foo3`：

```
public void foo(/* arguments */, FieldOperation op) {
    for (Field f : getClass().getDeclaredFields()) {
        op.doSomeStuff(f);
    }
} 
```

然后您可以实例化几个`FieldOperation`对象：

```
FieldOperation foo1Operation = new FieldOperation() {
    void doSomeStuff(Field f) {
        // do some stuff that used to be in foo1()
    }
}
// etc. 
```

这可以很好地扩展并将访问哪些字段的逻辑与您要对每个字段执行的操作分开。

**编辑**如果每个都`foo*`需要一组不同的参数，我建议将它们打包为类：

```
class Foo1Args { . . . }
class Foo2Args { . . . }
class Foo3Args { . . . } 
```

然后你可以让你的界面通用：

```
interface FieldOperation<T> {
    void doSomeStuff(Field f, T args);
} 
```

并定义`foo`为通用方法：

```
public <T> void foo(T args, FieldOperation<T> op) {
    for (Field f : getClass().getDeclaredFields()) {
        op.doSomeStuff(f, args);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T02:16:02.540

与其创建一个需要从其他方法中过滤的新字段，不如创建一个方法来获取这些字段：

```
public class foo {
    private Field[] getDeclaredFields() { 
        return getClass().getDeclaredFields();
    }

    public void foo1(/* arguments */) {
        for (Field f : getDeclaredFields()) {
            // do some stuff
        }
    }

    public void foo2(/* arguments */) {
        for (Field f : getDeclaredFields()) {
            // do some stuff
        }
    }

    public void foo3(/* arguments */) {
        for (Field f : getDeclaredFields()) {
            // do some stuff
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T01:04:31.713

要重用逻辑来查找字段，您可以将其外部化为单独的方法或字段：

```
public class foo {
    private final Field[] fields = getClass().getDeclaredFields();

    public void foo1(/* arguments */) {
        for (Field f : fields) {
            // do some stuff
        }
    }

    public void foo2(/* arguments */) {
        for (Field f : fields) {
            // do some stuff
        }
    }

    public void foo3(/* arguments */) {
        for (Field f : fields) {
            // do some stuff
        }
    }
} 
```

# c# - Visual Studio 2012 的表单大小问题

> ID：12344209
> 
> 赞同：0
> 
> 时间：2012-09-10T00:47:57.380
> 
> 标签：c#, visual-studio-2012

我在 Windows 7 x64 中使用 Visual Studio 2012，我的一些现有代码不再按预期运行。以下是重现该问题的步骤：

*   创建一个 C# Winforms 项目（使用 framework 2.0）
*   尺寸“Form1”为 300x300
*   将边框样式设置为“FixedSingle”
*   禁用最小/最大按钮
*   在 Form_Load 中显示一个显示“this.Bounds.ToString()”的消息框

如果您在调试器中运行它，它将显示正确的大小 (300x300)。如果您在 VS2012 之外运行 EXE，它将显示错误的大小 (290x290)。此代码在 Visual Studio 2010 中运行良好。如果我仍在使用相同的框架库，IDE 有何不同？其他人是否可以使用上述步骤重现此问题，或者对为什么会发生这种情况或如何解决有任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-05T12:54:10.723

这很可能是由于窗体上设置的窗口样式略有不同造成的， [根据参考源，调用此函数来转换客户端坐标](http://referencesource.microsoft.com/#System.Windows.Forms/winforms/Managed/System/WinForms/Control.cs,11678)：

```
internal Size SizeFromClientSize(int width, int height) {
    NativeMethods.RECT rect = new NativeMethods.RECT(0, 0, width, height);
    CreateParams cp = CreateParams;
    SafeNativeMethods.AdjustWindowRectEx(ref rect, cp.Style, HasMenu, cp.ExStyle);
    return rect.Size;
} 
```

# objective-c - 需要一个使用字典的随机词生成器

> ID：12344211
> 
> 赞同：2
> 
> 时间：2012-09-10T00:48:36.677
> 
> 标签：objective-c, ios, xcode, ios5

我正在制作一个刽子手游戏，所以我需要一个随机单词生成器。我的目标是让用户说出他们想要在单词中包含多少个字母，并输出一个包含那么多字母的随机单词。我想使用应该在 iOS 5 中可用的字典。从此[链接中学习](https://stackoverflow.com/questions/7456945/possible-to-access-a-dictionary-in-xcode)

我怎样才能做到这一点？是否有人对随机单词生成器有一些建议 - 最好使用字典。

我不想要一个随机文本生成器，我希望它们是实际的英文单词。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-10T00:58:54.580

查看[Lexicontext](http://www.lexicontext.com/)，它具有许多单词的字典定义，并具有用于生成随机单词的简单 API：

```
Lexicontext *dictionary = [Lexicontext sharedDictionary];
NSString *word = [dictionary randomWord]; 
```

从那里，您可以使用 API 的其余部分从中获取定义等。

[**免责声明：**除了作为一个快乐的客户之外，我与 Lexicontext 没有任何关系。]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T01:27:13.583

请注意，要拥有一个像样的刽子手游戏，您实际上只需要一本大约 5000 个单词的字典。如果你用谷歌搜索“英语单词列表”，你会找到一堆列表，你可以将它们连接起来（并消除欺骗）来创建你的列表。然后您可以将它们放入单个文件中，然后从文件中随机选择。

从文件中选择单词的简单方法是每“行”放一个单词，然后使用随机数`seek`进入文件，读取并丢弃一行（因为您可能已经在单词中间结束），然后读取并使用下一行。如果您的随机数（应该以文件长度为模）导致您在读取下一行时遇到文件结尾，请使用文件的第一行。

如果要按长度选择它们，请按文件中的长度对单词进行排序，例如，前 300 个是 4 个字母的单词，接下来的 500 个是 5 个字母的单词，接下来的 1000 个是 6 个字母的单词. 由于您知道长度，因此您不需要使用读取和丢弃方案 - 对于给定的字长，您可以计算文件中列表开始的确切位置，并且可以将随机数乘以字长 + 1（换行符）准确定位一个单词。

（提示：让文件中的第一条记录包含有关列表数量、每个列表的单词大小以及每个列表中的条目数的信息，这样您就可以在不更改代码的情况下刷新单词列表。）

# postgresql - PostgreSQL：是否可以将枚举转换为整数？

> ID：12344213
> 
> 赞同：21
> 
> 时间：2012-09-10T00:48:54.340
> 
> 标签：postgresql

是否可以将枚举转换为整数？从1开始第一个元素

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-09-10T08:17:13.857

虽然您不能像 Catcall 解释的那样将枚举转换为整数，但您*可以*使用 PostgreSQL 特定且可能与版本不兼容的[`pg_enum`](http://www.postgresql.org/docs/current/static/catalog-pg-enum.html)系统目录表来获得序数表示。

```
regress=# CREATE TYPE happiness AS ENUM ('happy', 'very happy', 'ecstatic');

regress=# select enumsortorder, enumlabel from pg_catalog.pg_enum 
regress-# WHERE enumtypid = 'happiness'::regtype ORDER BY enumsortorder;
 enumsortorder | enumlabel  
---------------+------------
             1 | happy
             2 | very happy
             3 | ecstatic
(3 rows) 
```

这看起来很容易，但事实并非如此。观察：

```
regress=# ALTER TYPE happiness ADD VALUE 'sad' BEFORE 'happy';
regress=# ALTER TYPE happiness ADD VALUE 'miserable' BEFORE 'very happy';
regress=# SELECT * FROM pg_enum ;
 enumtypid | enumsortorder | enumlabel  
-----------+---------------+------------
    185300 |             1 | happy
    185300 |             2 | very happy
    185300 |             3 | ecstatic
    185300 |             0 | sad
    185300 |           1.5 | miserable
(5 rows) 
```

从这里你可以看到它`enumsortorder`提供了排序，但没有固定的“距离”。如果添加了对从枚举中删除值的支持，它也可能会在序列中创建“漏洞”。

要获取枚举位置，您需要使用`row_number()`窗口函数来获取排序，并`pg_typeof`获取枚举类型的`oid`( `regtype`)。当有多个具有相同标签的枚举时，您需要它来确保返回正确的序数。

这个函数完成了这项工作：

```
CREATE OR REPLACE FUNCTION enum_to_position(anyenum) RETURNS integer AS $$
SELECT enumpos::integer FROM (
        SELECT row_number() OVER (order by enumsortorder) AS enumpos,
               enumsortorder,
               enumlabel
        FROM pg_catalog.pg_enum
        WHERE enumtypid = pg_typeof($1)
    ) enum_ordering
    WHERE enumlabel = ($1::text);
$$ LANGUAGE 'SQL' STABLE STRICT; 
```

笔记：

*   `STABLE`不是`IMMUTABLE`，因为从枚举中添加（或者如果稍后添加 Pg 中的支持，则删除）值会改变排序并破坏依赖于排序的索引；所以
*   您不能在索引表达式中使用它；和
*   这是`STRICT`因为它应该为 null 输入返回 null

您现在可以使用此函数将`CREATE CAST`特定枚举用于`integer`. 您不能为所有枚举创建通用转换`integer`，因为`anyenum`伪类型不能用于转换。例如，如果我想让演示`happiness`转换为整数，我会写：

```
CREATE CAST (happiness AS integer) WITH FUNCTION enum_to_position(anyenum); 
```

之后我可以成功执行：

```
regress=# SELECT ('happy'::happiness)::integer;
 int4 
------
    2
(1 row) 
```

请注意，这可能是一件*疯狂*的事情，不受支持，而且很可能是一个糟糕的主意。您的代码必须知道，当您添加或（如果以后支持）从枚举中删除一个值时，序数值*会发生变化。*

如果您更改枚举的定义（除非在其末尾附加新值），那么基于此强制转换创建的索引（仅当函数定义为不可变时才可能）将开始产生疯狂和错误的结果，因为当您说 PostgreSQL 相信您时函数是不可变的。不要那样做。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-04-16T18:53:16.777

如果您乐于使用函数[enum_range()](http://www.postgresql.org/docs/current/static/functions-enum.html)并计算其结果，则可以这样做。

如果您将枚举值作为 enum_range() 函数的第二个参数传递，并且 NULL 是第一个参数，您将获得一个数组，其中包含枚举可以占用的所有值。然后你只需要用 array_length 对它们进行计数，你就会得到一个表示枚举的整数。

这是一个例子。这是我的枚举：

```
content=# select enum_range(null::content_state);
                        enum_range                          
--------------------------------------------------------------
 {created,deleted,preview,draft,submitted,approved,published} 
```

这是我找出“草稿”值的 int ：

```
content=# select array_length(enum_range(NULL, 'draft'::content_state), 1);
 array_length 
--------------
            4 
```

警告：从枚举中删除值将使您的 int 指向其他值，因此不要在您可能希望在某些时候更改的枚举上使用它。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-10T03:36:56.517

您不能将枚举转换为整数。

您*也许*可以编写一个[自定义运算符](http://www.postgresql.org/docs/current/static/xoper.html)来提取与值关联的数字，但我发现很难相信这是值得的。

如果我需要这种信息，我会建立一个表并为其设置外键引用，而不是使用枚举。

# mysql - 使用 memcache 的二级缓存速度较慢

> ID：12344215
> 
> 赞同：2
> 
> 时间：2012-09-10T00:49:13.853
> 
> 标签：mysql, hibernate

我使用@Cache(usage=CacheConcurrencyStrategy.READ_WRITE) 在实体上启用了二级缓存。我在使用应用程序时看到缓存命中，但基准测试显示应用程序速度较慢！这怎么可能？是不是因为我没有缓存所有的关联？

# php - 如何在mysql中处理mysql查询

> ID：12344218
> 
> 赞同：0
> 
> 时间：2012-09-10T00:50:31.133
> 
> 标签：php, mysql, arrays

我开始学习php+mysql

在进行这样的查询后：

```
$sql = "SELECT * FROM clients";
$query = $mysqli->query($sql); 
```

我需要放入一个数组来访问信息吗？

```
$result = mysqli_fetch_all($query); 
```

我需要使用数组还是可以在 $query 中搜索信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T01:02:29.463

出于所有意图和目的，是的。在大多数情况下，您不会从中获得太多有用的数据。有关它将返回的值，请参见[http://php.net/manual/en/mysqli.query.php 。](http://php.net/manual/en/mysqli.query.php)

也就是说，我通常使用带有参数的 mysql_fetch_array() 将结果放入关联数组中 - 或者只使用 mysql_fetch_assoc() 跳过添加参数。该函数会将其放入一个数组中，您可以通过循环打印出来。

例如：

```
while($row = mysql_fetch_array($result))
{
  echo "<tr>";
  echo "<td>" . $row['FirstName'] . "</td>";
  echo "<td>" . $row['LastName'] . "</td>";
  echo "<td>" . $row['Age'] . "</td>";
  echo "<td>" . $row['Hometown'] . "</td>";
  echo "<td>" . $row['Job'] . "</td>";
  echo "</tr>";
} 
```

[是来自http://www.w3schools.com/php/php_ajax_database.asp](http://www.w3schools.com/php/php_ajax_database.asp)的示例的一部分- 这是一个相当不错的参考。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T01:04:16.790

[mysqli_fetch_all](http://php.net/manual/en/mysqli-result.fetch-all.php)将返回一个关联数组或数字数组，然后您可以使用该数组做任何您想做的事情。

# jquery - 我可以使用 jQuery() 作为构造函数吗？

> ID：12344219
> 
> 赞同：2
> 
> 时间：2012-09-10T00:50:34.207
> 
> 标签：jquery

函数`jQuery()`是工厂函数。我可以将它用作构造函数吗？

```
var ax = jQuery('a');
var bx = new jQuery('a'); 
```

它们有相同的含义吗？新对象继承谁的原型对象？

（我保证：我不会在现实生活中将它用作构造函数）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T00:52:34.350

没有区别，因为它所做的只是返回一些东西：

```
// Define a local copy of jQuery
jQuery = function( selector, context ) {
    // The jQuery object is actually just the init constructor 'enhanced'
    return new jQuery.fn.init( selector, context, rootjQuery );
}, 
```

如果构造函数返回~~别的东西~~另一个对象，这就是返回的内容，并且构造的对象被丢弃。所以......不要使用`new jQuery`！:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T00:54:21.320

没关系，因为`jQuery()`内部会返回一个新的构造`jQuery`对象。

但是，我建议您只使用`jQuery()`（不带`new`运算符）。

# perl - dancer/perl 中的简单表单验证

> ID：12344220
> 
> 赞同：1
> 
> 时间：2012-09-10T00:50:44.977
> 
> 标签：perl, dancer

我正在尝试在 perl dancer 中进行简单的表单验证，但我想知道在没有任何参数的情况下在 dancer/perl 中验证简单参数（例如字段不能为空、电子邮件的有效性、字段的最小长度）的最佳方法是什么额外的插件或 CPAN 模块

这是到目前为止的代码

```
post '/register' => sub {

my $db = connect_db();
my $sql = 'insert into users (username, email, password, motivation) values (?, ?, ? ,?)';
my $sth = $db->prepare($sql) or die $db->errstr;
$sth->execute(params->{'username'}, params->{'email'},params->{'password'}, params->{'motivation'}) or die $sth->errstr;

set_flash('Hey you signed up !');
redirect '/thanks';
}; 
```

我用谷歌搜索了它，发现了几种使用 CPAN 模块（如 Form::Foo）进行验证的方法，但是没有它怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T03:36:35.313

我不确定您为什么要明确避免使用插件或 CPAN 模块 - 您提出的任何解决方案都可能与插件和/或 CPAN 模块做同样的事情，只是因为它是新代码，所以它赢了'不成熟和测试。

我最近开始使用 Dancer 开发一个简单的应用程序，我将描述我如何使用 CPAN 模块解决这个问题。你当然可以选择忽略它。

我用于添加用户的路由处理程序如下所示：

```
post '/user/add' => {
    my $args = valid_input('/user/add')
        or return template('user/add');
    my $user = User->new({
        username => $args->{username},
        # ...
    });
    user->insert;  # you'll probably want some error handling here
    set_flash('User added');
    redirect '/user';
}; 
```

该`valid_input`函数是我为我的应用程序创建的助手，它使用来自 CPAN的[Data::Form::Validator模块。](https://metacpan.org/release/Data-FormValidator)参数是要使用的验证配置文件的`'/usr/add'`名称——为简单起见，我决定与路由名称保持相同。

我不会对调用[Data::Form::Validator](https://metacpan.org/release/Data-FormValidator)的细节感到厌烦，因为文档非常好。我要提到的是，如果验证失败，`valid_input`助手会存储验证错误消息以显示在警告框中，并保存提交的参数：

```
my $q = params();  # need to force scalar context to get a hashref;
fill_in_form($q);  # save submitted parameters 
```

我有一个`before_template_render`钩子可以使保存的验证错误消息可用于模板（它们实际上是在 中呈现的`views/layouts/main.tt`）。

我还有一个钩子，它获取保存的提交参数并使用[HTML::FillInForm](https://metacpan.org/release/HTML-FillInForm)模块`after_template_render`将它们放回呈现的 HTML 表单中。

由于我拥有该基础设施，因此在编辑表单中显示现有用户记录并预先填充所有字段的路由处理程序是微不足道的：

```
get '/user/:id' => sub {
    if( my $user = User->find( param('id') ) ) {
        fill_in_form($user);
        return template 'user/edit', { id => $user->id };
    }
    not_found "User not found";
}; 
```

`User`in`User->find()`是我的另一个特定于应用程序的帮助函数。它使用[Dancer::Plugin::DBIC](https://metacpan.org/release/Dancer-Plugin-DBIC)模块为我的`user`表返回一个结果集对象。

我会说我不一定是 Data::Form::Validator 的忠实粉丝。我已经能够实现我想要的一切，但有时它似乎需要比我想要的更多的工作。

# concurrency - cuda 理解并发内核执行

> ID：12344223
> 
> 赞同：5
> 
> 时间：2012-09-10T00:51:13.020
> 
> 标签：concurrency, cuda

我试图了解并发内核执行的工作原理。我写了一个简单的程序来尝试理解它。内核将使用 2 个流填充 2D 数组。当有 1 个流，没有并发时，我得到了正确的结果。当我尝试使用 2 个流，尝试并发时，我得到了错误的结果。我相信这要么与内存传输有关，因为我不太确定我是否正确或我设置内核的方式。编程指南对我的解释不够好。出于我的目的，我需要 Matlab 来调用内核。

据我了解，主程序将：

*   在主机上分配固定内存
*   在 GPU 上分配单个流所需的内存（2 个流 = 主机总内存的一半）
*   创建流
*   循环穿过溪流
*   使用 cudaMemcpyAsync() 将单个流的内存从主机复制到设备
*   为流执行内核
*   将流的内存复制回主机，cudaMemcpyAsync()
    *   我相信我通过使用基于每个流的数据大小和流编号的偏移量从我需要它的位置为每个流引用内存来做正确的事情。
*   摧毁溪流
*   释放内存

这是我尝试使用的代码。

并发内核.cpp

```
__global__ void concurrentKernel(int const width, 
                                  int const streamIdx,
                                  double *array)
 {
     int thread = (blockIdx.x * blockDim.x) + threadIdx.x;;

     for (int i = 0; i < width; i ++)
     {
        array[thread*width+i] = thread+i*width+1;
//         array[thread*width+i+streamIdx] = thread+i*width+streamIdx*width/2;
     }

 } 
```

并发MexFunction.cu

```
#include <stdio.h>
#include <math.h>
#include "mex.h"

/* Kernel function */
#include "concurrentKernel.cpp"

void mexFunction(int        nlhs,
                 mxArray    *plhs[],
                 int        nrhs,
                 mxArray    *prhs[])
{

    int const numberOfStreams = 2; // set number of streams to use here.
    cudaError_t cudaError;
    int offset;

    int width, height, fullSize, streamSize;
    width = 512;
    height = 512;
    fullSize = height*width;
    streamSize = (int)(fullSize/numberOfStreams);
    mexPrintf("fullSize: %d, streamSize: %d\n",fullSize, streamSize);

    /* Return the populated array */
    double *returnedArray;
    plhs[0] = mxCreateDoubleMatrix(height, width, mxREAL);
    returnedArray = mxGetPr(plhs[0]);

    cudaStream_t stream[numberOfStreams];
    for (int i = 0; i < numberOfStreams; i++)
    {
        cudaStreamCreate(&stream[i]);    
    }

    /* host memory */
    double *hostArray;
    cudaError = cudaMallocHost(&hostArray,sizeof(double)*fullSize);    // full size of array.
    if (cudaError != cudaSuccess) {mexPrintf("hostArray memory allocation failed\n********** Error: %s **********\n",cudaGetErrorString(cudaError)); return; }

    for (int i = 0; i < height; i++)
    {
        for (int j = 0; j < width; j++)
        {
            hostArray[i*width+j] = -1.0;
        }
    }

    /* device memory */
    double *deviceArray;
    cudaError = cudaMalloc( (void **)&deviceArray,sizeof(double)*streamSize);    // size of array for each stream.
    if (cudaError != cudaSuccess) {mexPrintf("deviceArray memory allocation failed\n********** Error: %s **********\n",cudaGetErrorString(cudaError)); return; }

    for (int i = 0; i < numberOfStreams; i++)
    {
        offset = i;//*streamSize;
        mexPrintf("offset: %d, element: %d\n",offset*sizeof(double),offset);

        cudaMemcpyAsync(deviceArray, hostArray+offset, sizeof(double)*streamSize, cudaMemcpyHostToDevice, stream[i]);
        if (cudaError != cudaSuccess) {mexPrintf("deviceArray memory allocation failed\n********** Error: %s **********\n",cudaGetErrorString(cudaError)); return; }

        concurrentKernel<<<1, 512, 0, stream[i]>>>(width, i, deviceArray);

        cudaMemcpyAsync(returnedArray+offset, deviceArray, sizeof(double)*streamSize, cudaMemcpyDeviceToHost, stream[i]);
        if (cudaError != cudaSuccess) {mexPrintf("returnedArray memory allocation failed\n********** Error: %s **********\n",cudaGetErrorString(cudaError)); return; }

        mexPrintf("returnedArray[offset]: %g, [end]: %g\n",returnedArray[offset/sizeof(double)],returnedArray[(i+1)*streamSize-1]);
    }

    for (int i = 0; i < numberOfStreams; i++)
    {
        cudaStreamDestroy(stream[i]);    
    }

    cudaFree(hostArray);
    cudaFree(deviceArray);

} 
```

当有 2 个流时，结果是一个零数组，这让我觉得我的内存做错了。谁能解释我做错了什么？如果有人需要帮助从 Matlab 编译和运行这些，我可以提供执行此操作的命令。

更新：

```
for (int i = 0; i < numberOfStreams; i++)
{
    offset = i*streamSize;
    mexPrintf("offset: %d, element: %d\n",offset*sizeof(double),offset);

    cudaMemcpyAsync(deviceArray, hostArray+offset, sizeof(double)*streamSize, cudaMemcpyHostToDevice, stream[i]);
    if (cudaError != cudaSuccess) {mexPrintf("deviceArray memory allocation failed\n********** Error: %s **********\n",cudaGetErrorString(cudaError)); return; }

    concurrentKernel<<<1, 512, 0, stream[i]>>>(width, i, deviceArray);

}
cudaDeviceSynchronize();

for (int i = 0; i < numberOfStreams; i++)
{
    offset = i*streamSize;
    mexPrintf("offset: %d, element: %d\n",offset*sizeof(double),offset);

    cudaMemcpyAsync(returnedArray+offset, deviceArray, sizeof(double)*streamSize, cudaMemcpyDeviceToHost, stream[i]);
    if (cudaError != cudaSuccess) {mexPrintf("returnedArray memory allocation failed\n********** Error: %s **********\n",cudaGetErrorString(cudaError)); return; }

    mexPrintf("returnedArray[offset]: %g, [end]: %g\n",returnedArray[offset/sizeof(double)],returnedArray[(i+1)*streamSize-1]);

    cudaStreamDestroy(stream[i]);    
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T07:10:55.890

您需要记住，与流一起使用的 API 是完全异步的，因此控制权会立即返回给调用主机线程。如果您不在运行异步操作的 GPU 和主机之间插入某种同步点，则无法保证您在流中排队的操作实际上已完成。在您的示例中，这意味着需要这样的东西：

```
for (int i = 0; i < numberOfStreams; i++) 
{ 
    offset = i;//*streamSize; 
    mexPrintf("offset: %d, element: %d\n",offset*sizeof(double),offset); 

    cudaMemcpyAsync(deviceArray, hostArray+offset, sizeof(double)*streamSize, 
                    cudaMemcpyHostToDevice, stream[i]); 

    concurrentKernel<<<1, 512, 0, stream[i]>>>(width, i, deviceArray); 

    cudaMemcpyAsync(returnedArray+offset, deviceArray, sizeof(double)*streamSize,
                    cudaMemcpyDeviceToHost, stream[i]); 
} 

// Host thread waits here until both kernels and copies are finished
cudaDeviceSynchronize();

for (int i = 0; i < numberOfStreams; i++) 
{ 
    mexPrintf("returnedArray[offset]: %g, [end]: %g\n",returnedArray[offset/sizeof(double)],returnedArray[(i+1)*streamSize-1]); 
    cudaStreamDestroy(stream[i]);     
} 
```

这里的关键是，在尝试检查主机内存中的结果之前，您需要确保两个内存传输都已完成。您的原始代码和更新都不会这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T22:48:56.780

此外，您似乎正在为不同的并发流重用 deviceArray 指针。如果当前代码按原样工作，很可能是因为@Tom 提到的错误依赖关系导致硬件按顺序运行流。你真的应该有一个单独的 deviceArray 每个流：

```
/* device memory */
double *deviceArray[numberOfStreams];
for (int i = 0; i < numberOfStreams; i++)
{
    cudaError = cudaMalloc( (void **)&deviceArray[i],sizeof(double)*streamSize);    // size of array for each stream.
    if (cudaError != cudaSuccess) {mexPrintf("deviceArray memory allocation failed\n********** Error: %s **********\n",cudaGetErrorString(cudaError)); return; }
}

for (int i = 0; i < numberOfStreams; i++)
{
    offset = i;//*streamSize;
    mexPrintf("offset: %d, element: %d\n",offset*sizeof(double),offset);

    cudaMemcpyAsync(deviceArray[i], hostArray+offset, sizeof(double)*streamSize, cudaMemcpyHostToDevice, stream[i]);
    if (cudaError != cudaSuccess) {mexPrintf("deviceArray memory allocation failed\n********** Error: %s **********\n",cudaGetErrorString(cudaError)); return; }

    concurrentKernel<<<1, 512, 0, stream[i]>>>(width, i, deviceArray[i]); 

    cudaMemcpyAsync(returnedArray+offset, deviceArray[i], sizeof(double)*streamSize,
                    cudaMemcpyDeviceToHost, stream[i]);     
} 
```

# objective-c - 如何在 NSTextView 中设置字体？

> ID：12344224
> 
> 赞同：6
> 
> 时间：2012-09-10T00:51:24.267
> 
> 标签：objective-c, xcode, cocoa, nstextview, nsfont

看起来很简单，我根本找不到任何方法来做到这一点（`setFont:`不起作用）：

*   有一个`NSTextView`
*   将其字体设置为 some `NSFont`。

* * *

**提示：（**很明显，但无论如何......）如果用户添加任何文本，新文本应该“继承”完全相同的样式......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-10T01:12:20.630

我不知道你做错了什么，我可以在我自己的项目中更改 NSTextView 的字体。您确定要在加载文本视图后设置字体吗？检查是否使用 NSLog 加载了文本视图。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-10T00:55:27.743

您必须将字体设置为 textStorage，而不是 TextView

```
[[textView textStorage] setFont:[NSFont fontWithName:@"Menlo" size:12]]; 
```

# c++ - 尝试访问字符映射时，freetype 2 库崩溃

> ID：12344227
> 
> 赞同：2
> 
> 时间：2012-09-10T00:51:29.807
> 
> 标签：c++, freetype2

我正在尝试将[这个](https://github.com/cdave1/freetype2-android/issues/1)很棒的 freetype 2 版本与我的多平台库一起使用。我还没有在Android上测试过，但是我尝试过在win32下编译测试。它编译得很好，没有错误，但是当库尝试读取 TT_CMap 的“数据”（总是坏指针）成员时，它总是崩溃。它发生的功能仅取决于字体文件，即一种字体 - 一个地方。我已经尝试了来自 Windows、MacOS X 和 Android 的不同 ttd 字体，但它只影响会发生分段错误的位置。例如，如果我尝试检索标准窗口 arial.ttf 字体的任何字符的索引，它总是会在此处崩溃：

```
static FT_UInt tt_cmap4_char_map_binary( TT_CMap     cmap, FT_UInt32*  pcharcode, FT_Bool     next )
{
    [...]
    p = cmap->data + 6;
    num_segs2 = FT_PAD_FLOOR( TT_PEEK_USHORT( p ), 2 );
    [...] 
```

因为 cmap->data 是无效的指针。

我的测试代码如下所示：

```
int error = 0;

// Initialize freetype library first
error = FT_Init_FreeType( &ft_lib );
if ( error ) {
    ODF(("Unable to init freetype library! Error code is %d.\n", error));
    return false;
}

// Load font file into the memory buffer
iMemBuff faceFileBuff;
if (igelLoadResource(iString("Data/arial.ttf"), faceFileBuff) != ROR_Success) {
    ODF(("ERROR: Unable to open font file!\n"));
    return false;
}

// Init font
error = FT_New_Memory_Face( ft_lib, (FT_Byte*)faceFileBuff.GetPtr(), faceFileBuff.GetSize(), 0, &ft_face );
if ( error == FT_Err_Unknown_File_Format ) {
    ODF(("ERROR: the font file could be opened and read, but it appears that its font format is unsupported.\n"));
    return false;
} else if ( error ) {
    ODF(("ERROR: %d error code means that the font file could not be opened or read, or simply that it is broken...\n", error));
    return false;
}

// Setup font metrics
error = FT_Set_Pixel_Sizes( ft_face, 0, 16 );
// error = FT_Set_Char_Size(ft_face, 0, 16*64, 300, 300 );
if ( error  ) {
    ODF(("ERROR: Unable to set char/pixel size! Error code %d.\n", error));
    return false;
}

sint32 ox = 0, oy = 0;
int error = 0;
FT_GlyphSlot  slot = ft_face->glyph;  // a small shortcut
for (uint32 cc=0; cc<text.StringSize(); ++cc) {

    // Find the character 'a' index
    int glyph_index = FT_Get_Char_Index( ft_face, text.CStr()[cc] );

    // Load glyph
    error = FT_Load_Glyph( ft_face, glyph_index, FT_LOAD_DEFAULT );
    if ( error  ) {
        ODF(("ERROR: Unable to load face from the font! Error code %d.\n", error));
        continue;
    }

    // Render the glyph
    error = FT_Render_Glyph( ft_face->glyph, FT_RENDER_MODE_NORMAL );
    if ( error  ) {
        ODF(("ERROR: Unable to render glyph! Error code %d.\n", error));
        continue;
    }

    // Draw the glyph to our target surface
    ComposeGlyph(image, &slot->bitmap, ox + slot->bitmap_left, oy + slot->bitmap_top);
    ox += slot->advance.x >> 6;
} 
```

当我用任何字符调用 FT_Get_Char_Index 时它会崩溃......

任何想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-27T05:29:46.490

就我而言，问题是当我释放传递给 FT_New_Memory_Face() 的字体内存块时，cmap->data 变为错误指针。只要我保留内存块，cmap->data 就会保持有效。

虽然这似乎不是你的情况，但只是想提供一些意见。

# c# - 如何在表格中间画一个圆，如何找到圆心？

> ID：12344230
> 
> 赞同：3
> 
> 时间：2012-09-10T00:51:42.910
> 
> 标签：c#, winforms

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace Test
{
    public partial class Form1 : Form
    {
        int x1, x2, wid = 100;

        public Form1()
        {
            InitializeComponent();

            x1 = this.Width / 2 ;
            x2 = this.Height / 2 ;
        }

        private void Form1_Load(object sender, EventArgs e)
        {

        }

        private void Form1_Paint(object sender, PaintEventArgs e)
        {

            e.Graphics.DrawEllipse(Pens.Red, x1,x2, wid, wid);
        }
    }
} 
```

我想在表格中间画一个简单的圆圈，然后我想画出从圆圈中心出来的线条。我该怎么做 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T01:14:32.610

属性`this.Width`和与描述自己`this.Height`的相同：`this.Bounds`

> 获取或设置控件的大小和位置，包括其非客户端元素，以像素为单位，相对于父控件

这意味着您需要调整边框和标题栏的粗细。使用`this.ClientRectangle`避免了整个问题。

```
public partial class Form1 : Form
{
    int circleDiameter  = 100;

    public Form1()
    {
        InitializeComponent();
    }

     private void Form1_Paint(object sender, PaintEventArgs e)
    {

        Point CenterPoint = new Point()
        {
            X = this.ClientRectangle.Width/2,
            Y = this.ClientRectangle.Height/2
        };
        Point topLeft = new Point()
        {
            X=(this.ClientRectangle.Width - circleDiameter) / 2,
            Y=(this.ClientRectangle.Height - circleDiameter) / 2
        };
        Point topRight = new Point()
        {
            X=(this.ClientRectangle.Width + circleDiameter) / 2,
            Y=(this.ClientRectangle.Height - circleDiameter) / 2
        };
        Point bottomLeft = new Point()
        {
            X=(this.ClientRectangle.Width - circleDiameter) / 2,
            Y=(this.ClientRectangle.Height + circleDiameter) / 2
        };
        Point bottomRight = new Point()
        {
            X=(this.ClientRectangle.Width + circleDiameter) / 2,
            Y=(this.ClientRectangle.Height + circleDiameter) / 2
        };

         e.Graphics.DrawRectangle(Pens.Red, topLeft.X, topLeft.Y, circleDiameter, circleDiameter);
         e.Graphics.DrawLine(Pens.Red, CenterPoint, topLeft);
         e.Graphics.DrawLine(Pens.Red, CenterPoint, topRight);
         e.Graphics.DrawLine(Pens.Red, CenterPoint, bottomLeft);
         e.Graphics.DrawLine(Pens.Red, CenterPoint, bottomRight);
    }

    private void Form1_Resize(object sender, EventArgs e)
    {
        this.Invalidate();
    }

} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-11T18:01:58.937

如果我理解正确，这是你想要做的吗？

```
 const int circleRadius = 150;
        const int circleDiameter = circleRadius * 2;

        const double angleOfLineInDegrees = 65;
        const double angleOfLineInRadians = (angleOfLineInDegrees / 180) * Math.PI;

        // Center of the form
        var cirleCenter = new PointF(((float)Width / 2), ((float)Height / 2));

        // Ellipses draw like a rectangle. 
        // So just start at the center 
        // subtract by the radius along x and y axis
        // make the width and height the diameter.
        e.Graphics.DrawEllipse(Pens.Black, cirleCenter.X - circleRadius, cirleCenter.Y - circleRadius, circleDiameter, circleDiameter);

        // This line is using trig to convert the angle into a usable vector
        var lineVector = new PointF((float)Math.Cos(angleOfLineInRadians) * circleRadius, (float)Math.Sin(angleOfLineInRadians) * circleRadius);

        var lineEndPoint = new PointF(cirleCenter.X + lineVector.X, cirleCenter.Y + lineVector.Y);

        // Draw the line starting at 
        e.Graphics.DrawLine(Pens.Blue, cirleCenter, lineEndPoint); 
```

# function - 如何定义一个函数供以后在 Mathematica 中使用

> ID：12344233
> 
> 赞同：1
> 
> 时间：2012-09-10T00:52:00.203
> 
> 标签：function, wolfram-mathematica, package

我刚刚开始使用 Mathematica 并尝试定义一个函数以供以后使用。功能是：

```
test[x_]:=x^2 
```

虽然我没有关闭 Mathematica，但我可以在我的笔记本上使用该功能，但是当我关闭它时，该功能消失了，我试图`.m`用它保存一个文件，但它没有用。我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T17:21:36.367

也许您误解了如何保存/导入。这是应该工作的过程：

*   像上面那样定义一个函数，另存为`test.m`（在 Mathematica 8 中，它不会“看起来像”您保存它，打开的笔记本仍然是“Untitled-1”，但它确实保存了。您可以根据需要进行验证。 )
*   打开一个新笔记本
*   像这样导入你的库：`Import["C:\\users\\joeblow\\documents\\Mathematica Notebooks\\test.m"]`
*   您现在应该可以访问该`test`功能

这对你不起作用吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-28T12:37:28.963

打开 Mathematica，新建一个 Notebook

```
test[x_]=x^2;
DumpSave["test.mx",test]; 
```

您甚至不必保存 Notebook，只需关闭 Mathematica。（但请记住，在这种情况下，您将永远失去修改函数的机会）然后重新打开 Mathematica，创建一个新 Notebook

```
DumpGet["test.mx"];
test[5]
(*25*) 
```

# c# - 单元测试示例

> ID：12344234
> 
> 赞同：0
> 
> 时间：2012-09-10T00:52:12.277
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, unit-testing

我正在尝试学习编写单元测试。我遵循存储库模式并为我的控制器创建了一个存储库。Is 支持真实和虚假的 dbcontexts，现在我准备开始编写测试。我的问题是我不知道要测试什么。

1.  如果控制器的大部分工作是将数据传递给存储库而不是将结果传递给视图，我应该测试控制器吗？
2.  在我的存储库中，我有如下方法。它们非常简单，是否应该进行测试？
3.  我应该测试验证条件吗？
4.  最重要的事情。你能给我一些asp mvc单元测试的例子吗？我想像 [method]ShouldDo[whatever] 这样的语句列表可能会有所帮助。但恐怕很难临时想出一些不那么明显的东西。也许有人愿意分享他们的一个测试文件/项目或推荐一个值得一看的开源项目？

    ```
     public virtual void Update(T entity) 
            {
                Db.Attach(entity);
                Db.SaveChanges();
            }

            public virtual void Save(T entity)
            {
                Db.Add(entity);
                Db.SaveChanges();
            }

            public virtual void Remove(T entity)
            {
                Db.Delete(entity);
                Db.SaveChanges();
            } 
    ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T08:25:06.360

> 1.  如果控制器的大部分工作是将数据传递给存储库而不是将结果传递给视图，我应该测试控制器吗？

每个定义的控制器应该只是模型和视图之间的适配器。因此它不应该处理（即业务规则）信息。

听起来你的控制器没有，这都很好。如果您正在使用视图模型，那么只有一件事可能会出错：那就是您没有正确处理 ModelState（即，如果出现问题，请报告）。

因此，如果您想对此进行测试，请继续。

> 在我的存储库中，我有如下方法。它们非常简单，是否应该进行测试？

不，因为您没有验证传入数据是否正确。测试只是集成测试而不是单元测试。

> 我应该测试验证条件吗？

如果您想确保验证应该验证的内容。

> 最重要的事情。你能给我一些asp mvc单元测试的例子吗？我想像 [method]ShouldDo[whatever] 这样的语句列表可能会有所帮助。但恐怕很难临时想出一些不那么明显的东西。也许有人愿意分享他们的一个测试文件/项目或推荐一个值得一看的开源项目？

取决于你想测试什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T01:31:22.447

不幸的是，这个话题太广泛了，无法在这里给出一个简单的答案。谷歌是你的朋友。我在 Google 上搜索了“为 c# 编写单元测试”，得到了超过 200 万条回复。关于如何以及何时编写单元测试有许多相互竞争的哲学。我建议你研究——从谷歌开始——阅读几种方法，并根据你自己的偏好、编码风格和你试图解决的具体问题来决定哪种方法最合适。

# php - 电子邮件管道有效，但仍返回错误

> ID：12344235
> 
> 赞同：0
> 
> 时间：2012-09-10T00:52:26.123
> 
> 标签：php, email, pipe

我正在尝试将电子邮件传送到 php 脚本，以便自动处理电子邮件。
我知道我让管道正常工作，因为我收到了一封从 php 脚本发送给我的电子邮件，但我也收到一条错误消息：

```
A message that you sent could not be delivered to one or more of its
recipients. This is a permanent error. The following address(es) failed:

pipe to |/usr/local/bin/php -q /home/myUserName/domains/myDomain.nl/public_html/api/pipe.php
generated by forwarder@myDomain.nl 
```

有谁知道是什么导致了这个问题？
因为我显然不希望消息的发送者收到返回的错误消息，尤其是在管道正常工作的情况下。

编辑：

这可能是您也想知道的信息...
我的虚拟主机正在使用 DirectAdmin。
我自己没有运行服务器，所以我无法编辑任何配置文件。

编辑2：

.php 文件：

```
#!/usr/local/bin/php -q
<?php

    // read from stdin
    $fd = fopen("php://stdin", "r");
    $email = "";
    while(!feof($fd))
    {
        $email .= fread($fd, 1024);
    }
    fclose($fd);

    mail('my@email.nl', 'From my email pipe!', $email);
?> 
```

# android - 使用 Loader API 时 FragmentStatePagerAdapter 未设置 UI 元素

> ID：12344238
> 
> 赞同：0
> 
> 时间：2012-09-10T00:53:03.050
> 
> 标签：android, android-fragments, android-viewpager, android-loader

所以我现在在尝试将 FragmentStatePagerAdapter 与 Loader API 一起使用时遇到了这个问题，但在 UI 中没有设置任何值我的意思是当 onLoadFinished() 完成并将值设置为 TextView、ImageView 和 changeCursor 到我的适配器时没有反映它，我看到了我在 XML 中设置的 UI。

让我们看看我是否可以清楚地解释这个问题。

我有一个列表，当一个项目被点击时，你会看到这个的详细视图。当一个项目被选中时，两个元素被发送到细节，ids 数组和被选中项目的位置。

```
listView.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> adapterView, View view, int position, long id) {
                Intent intent = new Intent(ActionConstant.DETAIL);

                intent.putExtra("ids", ids);
                intent.putExtra("position", position);
                startActivity(intent);
            }
        }); 
```

因此，在 DetailActivity 中有一个 ViewPager，它有一个 FragmentStatePagerAdapter，它使用 id 和位置来加载正确的数据。

```
@Override
    public void onCreate(Bundle savedIntanceState) {

        super.onCreate(savedIntanceState);
        setContentView(R.layout.detail);
        ids = getIntent().getLongArrayExtra("ids");
        int currentIndex = getIntent().getIntExtra("position",-1);

        mPagerAdapter = new DetailPagerAdapter(getSupportFragmentManager());

        // Set up the ViewPager, attaching the adapter.
        mViewPager = (ViewPager) findViewById(R.id.pager);

        mViewPager.setAdapter(mPagerAdapter);
        mViewPager.setCurrentItem(currentIndex);

    } 
```

并且 DetailPagerAdapter 覆盖 getItem 和 getCount （返回 ids.length）

```
 @Override
        public Fragment getItem(int i) {
            return DetailFragment.newInstance(ids[i]);
        } 
```

现在在 DetailFragment 中 newInstance 执行此操作

公共静态 DetailFragment newInstance(long id) { DetailFragment f = new DetailFragment();

```
 // Supply num input as an argument.
    Bundle args = new Bundle();
    args.putLong("_id", id);
    f.setArguments(args);

    return f;
} 
```

当 onLoadFinished 被调用时。

```
@Override
    public void onLoadFinished(Loader<Cursor> loader, Cursor cursor) {

        if (loader.getId() == 1)
            adapter.changeCursor(cursor);
        else if (loader.getId() == 2) {
            if (!cursor.moveToNext())
                return;

            textName.setText(cursor.getString(cursor.getColumnIndexOrThrow(TraderColumns.NAME)));

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T00:30:27.993

尤里卡，发生的事情相当琐碎，但很有意义，我在片段的 onResume() 中有

```
getActivity().getSupportLoaderManager().restartLoader(CONTACT_REQUEST, null, this);

getActivity().getSupportLoaderManager().restartLoader(TRADER_DETAIL_REQUEST, null, this); 
```

所以这将使用活动的 supportLoader 管理器，因为这是一个实例，它让我所有的视图都搞砸了。相反，我使用：

> getLoaderManager().restartLoader(CONTACT_REQUEST, null, this);
> 
> getLoaderManager().restartLoader(TRADER_DETAIL_REQUEST, null, this);

# ios - 应用内购买的用户默认更改通知

> ID：12344239
> 
> 赞同：0
> 
> 时间：2012-09-10T00:53:05.677
> 
> 标签：ios, in-app-purchase, nsuserdefaults, key-value-observing

我正在为我的应用实施应用内购买。因此，我使用的是 com.companyname.product.feature 的产品标识符格式。产品标识符用于应用内购买（在沙盒中运行良好），并且作为用户默认知道产品已被购买。当用户购买产品时，com.companyname.product.feature 用户默认设置为 true。除以下内容外，一切正常。

我的视图控制器之一正在监听用户默认更改，以便它可以根据产品购买修改其行为。但是，控制器永远不会收到用户默认更改的通知。我过去曾多次实施这种类型的观察，但这不起作用。会不会和“。”有关？在关键路径中（我以前从未做过）？

在我的应用委托中：

```
NSString *const PHKeyIAPFeature = @"com.companyname.appname.feature";  // also the product ID for the features 
```

在我的观察者中：

```
 [[NSUserDefaults standardUserDefaults] addObserver:self forKeyPath:PHKeyIAPFeature options:NSKeyValueObservingOptionNew context:NULL]; 
```

在我的 IAP 管理器中：

```
 [[NSUserDefaults standardUserDefaults] setBool:TRUE forKey:productIdentifier]; 
```

其中 productIdentifier = PHKeyIAPFeature。

我知道购买产品时正在更新用户默认值，因为重新启动应用程序会反映更新的用户默认值。

有任何想法吗？TIA 的帮助。

- 约翰

# combinations - 不考虑顺序的重复组合

> ID：12344243
> 
> 赞同：2
> 
> 时间：2012-09-10T00:53:29.797
> 
> 标签：combinations, genetic-algorithm, asymptotic-complexity

我有以下问题。给定一个包含 n 个元素的集合 S，我需要生成所有可能的重复组合，而不考虑大小 k=1,2,...,m 的顺序。

例子：

```
n =3
S = {1,2,3} 
```

所有可能的组合是：

```
k=1: 1,2,3

k=2: 11, 12, 13, 22, 23, 33

k=3: 111, 112, 113, 122, 123, 133, 222, 223, 233, 333.

k=4: 1111, 1112, 1113, ...

...

k=m: ... 
```

显然，步骤 k 的组合可以使用在 k-1 处获得的组合来计算。什么是获得所有 k 的所有组合的最佳算法（伪代码）及其复杂性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T01:04:37.573

我相信回答这个问题最自然的方法是使用递归。

没有真正的“好”方法可以解决这个问题，因为您必须通过每个排列组合，这将为您提供 ^n 运行时间。我在网上找到了这个例子，使用 java 有类似的问题。它以相同的方式工作，但使用字符串而不是整数数组。您应该能够很容易地进行转换。

```
public class MainClass {
  public static void main(String args[]) {
    permuteString("", "String");
  }

  public static void permuteString(String beginningString, String endingString) {
    if (endingString.length() <= 1)
      System.out.println(beginningString + endingString);
    else
      for (int i = 0; i < endingString.length(); i++) {
        try {
          String newString = endingString.substring(0, i) + endingString.substring(i + 1);

          permuteString(beginningString + endingString.charAt(i), newString);
        } catch (StringIndexOutOfBoundsException exception) {
          exception.printStackTrace();
        }
      }
  }
} 
```

您可以很容易地添加一个 String.Repeat(n) 来重新创建问题的不同大小的组件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T22:39:14.380

您可以根据代码中真正需要的内容尝试 2 种方法。由于元素的数量可能会变得非常大，因此方法 1 可能不可行。方法 2 迭代所有可能对您的应用程序足够的解决方案。

**方法一：递归生成所有组合**

您从所有元素的有序集合开始（在您的示例 1..n 中）。该集合包含长度为 1 的所有组合。

然后创建一个包含长度为 1 的所有组合的新集合。您可以通过获取前一个集合的元素并附加所有可能大于或等于最后一个元素的其他元素来填充它。例如：如果您从集合中取出元素 1，则将其附加 1..n 以获取元素 11、12、13、...1n。如果您采用元素 3，那么您只需将其附加 3..n 即可获得元素 33,34,...3n。您重复该过程 k 次以获得长度为 k 的序列。

**方法2：迭代组合**

这些集合可能会变得非常大，您可以迭代所有解决方案。假设您需要长度为 k 的所有组合。

1.  创建一个长度为 k 的向量并用第一个元素的 k 倍填充它（k=4 时为 1111）

2.  将最后一个元素替换为其后继元素以创建新组合 (1112)。如果最后一个元素已经是集合 (n) 中的最大元素，则将其设置为第一个元素并增加倒数第二个元素。对于一组 2 个元素（1 和 2），1112 的后继将是 1121。递归地执行此添加。

这将遍历所有长度为 k 的组合。如果您还想要较低长度的组合，您可以通过查看向量的第一部分来找到它们。在示例中，它从 111 开始，当最后一个元素再次变为 1 时，找到长度 (k-1) 的新组合 (=112)

# jquery - 如何使用 jQuery Cookie 插件创建无需刷新页面即可更新的 cookie？

> ID：12344246
> 
> 赞同：0
> 
> 时间：2012-09-10T00:53:41.180
> 
> 标签：jquery, jquery-plugins, cookies

我正在记录用户在查看页面时单击的类/id/文本。无论如何，下面的代码有效（cookie值除外）......

```
// JavaScript Document
$(document).ready(function() {

    $("div,input,a,select,option,button,img,td",this).click(function(){

        var clickedText = $(this).text().substring(0, 30);

        // Get Element Values
        var elementClass = $(this).attr('class');                       
        var elementID = $(this).attr('id');

        // If element has no class then set var to ""
        if (typeof elementClass !== 'undefined' && elementClass !== false) {
            var elementClass = " " + elementClass;
        } else {
            var elementClass = "";
        }

        // If element has no class then set var to ""
        if (typeof elementID !== 'undefined' && elementID !== false) {
            var elementID = " / " + elementID + " |";
        } else {
            var elementID = "";
        }

        // Create string
        var clickedCookie = elementClass + elementID;

        // Print output on delevopment
        $("#show-cookies").append(clickedCookie + clickedText);

        // Set Cookie
        $.cookie('lastClicked', clickedText);

    });
}); 
```

我有 jQuery cookie 插件，目前在各种其他 jQuery 脚本上使用它。通过上面的操作，创建了一个 cookie，但它的值类似于“ `0A%09%20%0A%20%20%20%20%20%0A%20%20%20%20%20%0A%20%20%20%20%20%0A%09`”。我的代码中有什么东西会产生奇怪的 cookie 值吗？

它应该类似于正确的输出`$("#show-cookies").append(clickedCookie + clickedText);`？

`la3down | / lc-btn | / live-chat-contain | / live-chat | / contentWide | / frame-wrap`像我想要的那样输出。

本质上，我需要像上面那样读取 cookie 的值。有没有人有任何使用 jQuery Cookie 插件的经验？[https://github.com/carhartl/jquery-cookie/](https://github.com/carhartl/jquery-cookie/)我做错了吗？

最终，每次单击元素时我都需要更新 cookie 值...这意味着我还需要 .append() cookie 值（我认为？）。仍在研究 _gaq.push 命令...指向这将是一个额外的奖励哈哈...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T07:29:42.103

我已经为上述问题完成了完整的垃圾箱。这里也是演示链接...

**演示：** [http ://codebins.com/bin/4ldqp7i](http://codebins.com/bin/4ldqp7i)

**HTML**

```
 <span>
  <div id="show-cookie" class="cookie">
  </div>
</span>
<span>
  <button id="btnread" class="btnclass">
    Read Cookie
  </button>
  <button id="btnreset" class="btnclass">
    Reset Cookie
  </button>
</span>
<span>
  <div class="divblock">
    Div-Text
  </div>
</span>
<span>
  <input type="text" class="input" size="15" value="InputValue" id="txtinput"/>
</span>
<span>
  <a href="#" id="aLink" class="linkclass">
    My Text Link 
  </a>
</span>
<span>
  <select id="select_tag" class="selclass">
    <option>
      Option-1
    </option>
    <option>
      Option-2
    </option>
    <option>
      Option-3
    </option>
    <option>
      Option-4
    </option>
  </select>
</span>
<span>
  <img src="http://profile.ak.fbcdn.net/hprofile-ak-prn1/50305_151863314933391_163751676_q.jpg" id="img1" class="imgclass" />
</span>
<span>
  <table class="table" cellspacing="1" cellpadding="1">
    <tr>
      <td class="cell1" id="td1">
        Cell-1
      </td>
      <td class="cell2" id="td2">
        Cell-2
      </td>
      <td class="cell3" id="td3">
        Cell-3
      </td>
    </tr>
  </table>
</span>

<span>
  <input type="button" id="btn1" class="btnclass" value="Submit" />
</span> 
```

**jQuery**

```
 $(function() {

    $("div,input,a,select,option,button,img,td").not(':button[id=btnread],:button[id=btnreset]').click(function() {
        var clickedText = "";
        if (typeof $(this).attr('value') != 'undefined') {
            clickedText = $(this).attr('value').trim().substring(0, 30);
        } else {

            clickedText = $(this).text().substring(0, 30);

        }

        var elementClass = " ";
        var elementID = "";
        if (typeof $(this).attr('class') != 'undefined') {
            if ($(this).attr('class').trim() != "") elementClass += $(this).attr('class').trim();
        }

        if (typeof $(this).attr('id') != 'undefined') {
            if ($(this).attr('id').trim() != "") elementID += " / " + $(this).attr('id').trim() + " |";
        } else {
            elementClass += " |";
        }
        // Create string
        var clickedCookie = elementClass.toString() + elementID.toString();

        // Print output on delevopment
        $("#show-cookie").append(clickedCookie + clickedText);
        //Check Existing Cookie 
        var ckVal = ($.cookie('lastClicked'));
        if (ckVal != 'undefined' || ckVal != null) {
            ckVal += " " + clickedText;
        } else {
            ckVal = clickedText;
        }

        // Set Cookie
        $.cookie('lastClicked', ckVal, {
            expires: 2,
            path: "/"
        });
        $("#show-cookie").show(500);
    });

    $("#btnread").click(function() {
        var ck = ($.cookie('lastClicked'));
        alert(ck);
    });
    $("#btnreset").click(function() {
        $.cookie('lastClicked', "");
        $("#show-cookie").html("").hide(400);
    });
}); 
```

**CSS：**

```
span {
  display:block;
  margin-top:5px;
}
.divblock {
  background:#94dca8;
  color:#333;
  width:300px;
  text-align:center;
}
.input {
  border:1px solid #335599;
  color:#335599;
}
.selclass {
  border:1px solid #1122a9;
  color:#1122a9;
  background:#94dca8;
}
.imgclass {
  border:1px solid #1122a9;
}
.table {
  width:50%;
  border:1px solid #2255dc;
}
td {
  text-align:center;
}
.cell1 {
  background:#caa8a9;
}
.cell2 {
  background:#a8b8ed;
}
.cell3 {
  background:#a8bfac;
}
.btnclass {
  border:1px solid #333;
  background:#ada5a4;
}
.btnclass:hover{
  background:#cdcaca;
}
.cookie{
  background:#fda5b7;
  border:1px solid #fa6289;
  display:none;
} 
```

**演示：** [http ://codebins.com/bin/4ldqp7i](http://codebins.com/bin/4ldqp7i)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T01:30:41.133

[因为 cookie 在http](http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol)请求中来回传输，所以它们得到[url-encoded](http://www.w3schools.com/tags/ref_urlencode.asp)，因此 cookie 原始值可能会与其原始值不同。下面是一个例子：

原值：

> 2012 年 9 月 9 日，星期日

编码值：

> 星期日%2C+09+9 月+2012

使用 jQuery cookie 插件时，您不必担心这一点，因为它会为您处理编码/解码。但是，如果您尝试在服务器端读取 cookie 值，则可能需要对其进行解码。看看[这个 SO Question](https://stackoverflow.com/questions/1631683/i-want-unescaped-characters-in-my-cookie-jquery)了解更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T01:33:58.180

我知道您要去哪里，但是`$("div,input,a,select,option,button,img,td",this).click(function(){`在您选择时将单击绑定到每个元素，包括那些嵌套元素。因此，每次用户点击时，您可能会获得多个值，但不确定这是否是您所需要的。

至于您的问题，cookie 是 url 编码的，您可以通过`decodeURIComponent(clickedText)`. 下次如果你迷路了，用`console.log`追查问题，很多。

# c# - 将委托/命令作为参数传递给 MVVM 中的另一个命令

> ID：12344248
> 
> 赞同：2
> 
> 时间：2012-09-10T00:53:48.793
> 
> 标签：c#, wpf, xaml, mvvm, delegates

我有一个用户控件“A”，它有另一个用户控件“B”作为它的子控件。用例场景是，当用户单击“A”上的按钮时，它应该*请求*“B”处理一些信息（通常与“B”的状态有关）并获得结果，然后将其用于一些计算在一个'。

现在，我正在使用 MVVM 模式。“A”的视图模型对 A 或 B 的 UI 没有任何引用。我正在寻找这个：当用户单击“A”的 UI 上的按钮时，我需要在“B”中调用命令'，通过将“A”的视图模型中的委托作为参数传递给该命令。这样，当'B'中的命令处理信息时，它可以*调用*从'A'传来的回调函数。

现在，委托是无参数的。一旦用户控件“B”中的命令处理了一些信息，它就会更新*其状态*。此状态是一个依赖属性，它将绑定到“A”的视图模型中的属性。

有没有办法实现这样的目标？

我目前有一个可行的解决方案。但我想即兴编写代码并使其变得更好。这是我目前对这个问题的临时解决方法：

当用户单击“A”中的按钮时，我在“A”（xaml.cs）中有一个事件处理程序。在事件处理程序中，因为我有'B'的引用，我正在检查'B'中的命令是否可以执行，然后调用它。然后，我检查命令（在'A'的视图模型中）是否可以执行，然后调用它。

如果我的问题描述性不够，这里有一个代码示例来支持它：

**“A”的 XAML：**

```
<bNameSpace:B x:Name="BObject" DepenPropertyInB="{Binding PropInA, Mode=OneWayToSource}"/>
....
<telerik:RadButton Content="Process" HorizontalAlignment="Right" Height="30" Width="80" Grid.Column="2" Click="ProcessButton_Click" /> 
```

**A的XAML.cs：**

```
private void ProcessButton_Click(object sender, RoutedEventArgs e)
{
    if (BObject.StateDataRequestedCommand.CanExecute(""))
        BObject.StateDataRequestedCommand.Execute("");

    if(ViewModel.ProcessInfoRequestedCommand.CanExecute(""))
        ViewModel.ProcessInfoRequestedCommand.Execute("");
} 
```

**A的视图模型：**

```
private void OnProcessInfoRequestedCommand(string anyValue)
{
    // read the value of PropInA and do some processing
} 
```

**B的视图模型：**

```
private void OnStateDataRequestedCommand(string anyValue)
{
    // Bases on B's state do some calc and update DepenPropertyInB
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T01:04:52.650

稍后我会回来添加更多细节，但这基本上是我认为需要发生的事情。

点击应该有一个`DelegateCommand`类型实现，其中包含对 A 和 B 的视图模型的引用。您需要某种“导体”类来实例化视图模型，并且可以将适当的引用传递给命令对象。

* * *

因此，显然该命令属于 A 的视图模型，*但是*，它需要对 B 的引用。因此，请记住这一点来设置命令类：

```
public MyCommand : ICommand
{
    private readonly ViewModelA _a, ViewModelB _b;

    public MyCommand(ViewModelA a, ViewModelB b)
    {
        _a = a;
        _b = b;
    }

    public bool CanExecute(object arg)
    {
        // can-execute logic here
    }

    public void Execute(object arg)
    {
        _b.StateDataRequestedCommand.Execute("");
        _a.ProcessInfoRequestedCommand.Execute("");
    }
} 
```

*现在，但是将MyCommand*的一个实例放入 A 的视图模型中......

```
public MyCommand StateRequestedCommand { get; set; } 
```

并像往常一样绑定它...

```
<telerik:RadButton Command="{Binding StateRequestedCommand}" /> 
```

现在，挑战是以某种方式在 A 的视图模型中实例化这个类。我通常使用 NInject 将外部依赖项注入到类中，但是有不同的方法可以做到这一点。无论哪种方式，它都必须发生在比 ViewModelA 本身更高的级别，因为它没有对 ViewModelB 的引用。这可能在 App_Startup 逻辑中，或者在 IoC（例如，NInject）绑定中，或者在视图模型“定位器”中，如果你正在使用的话。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T01:57:12.523

每个命令都需要 CommandParameter 并且您使用它但发送“”而不是实际参数。参数可以是任何类型，因为它被取消为对象。因此，您可以将任何对象作为参数发送给任何命令。

```
class CommandA : ICommand
{
  void Execute(object param)
  {
    var commandB = param as CommandB;
    if(commandB != null)
    {
      commandB.Execute((int a) => {
          // continue your code here
        });
    }
  }

  bool CanExecute(object param)
  {
    return param is CommandB;
  }
}

class CommandB : ICommand
{
  void Execute(object param)
  {
    var action = param as Action<int>;
    if(action != null)
    {
      action(10);
    }
  }
}

class MVA
{
  CommandA CommandA{get;}
  CommandB CommandB{get;}
} 
```

XAML：

```
<Control x:Name="A" Command="{Binding CommandA}" CommandParameter="{Binding Command, ElementName="B"}">
  <Control x:Name="B" Command="{Binding CommandB} />
</Control> 
```

# php - 使用 PHP 从 zip 存档中获取阿拉伯语文件夹名称

> ID：12344249
> 
> 赞同：0
> 
> 时间：2012-09-10T00:54:09.467
> 
> 标签：php, utf-8, zip

我有一个 zip 存档，其中包含具有阿拉伯标题（名称）的文件夹和文件，例如：

```
مجلد جديد، ملف... 
```

我正在尝试使用 PHP 提取这些文件夹。

问题是：上传此文件并解压缩后，名称会丢失，例如：

```
مجلد جديد => ê¤é§ ¤§ï§ 
```

我正在使用这段代码来提取：

```
$saved_file_location = $target . $filename;

if(move_uploaded_file($source, $target . $filename)) {
    openZip($saved_file_location);
}

function openZip($file_to_open) {
    global $target;
    global $unique_folder;
            global $changed;
            $zip = new ZipArchive();
        $x = $zip->open($file_to_open);
        if ($x === true) {
            $zip->extractTo($target . $unique_folder);
            $zip->close();

            unlink($file_to_open); #deletes the zip file. We no longer need it.
                            $changed = true;
        } else {
            die("There was a problem. Please try again!");
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T00:59:25.047

Zip 文件不知道文件名的编码。您必须猜测文件名的编码并将它们转换为文件系统使用的编码。

# javascript - Jinja2 在 Javascript 中工作吗？

> ID：12344253
> 
> 赞同：-2
> 
> 时间：2012-09-10T00:55:34.083
> 
> 标签：javascript, python, google-maps-api-3, jinja2

我一直试图让它工作很长一段时间：

```
{% for record in records %}

var GPSlocation = "(37.7699298, -93.4469157)";
var LatLng = GPSlocation.replace("(", "").replace(")", "").split(", ")
var Lat = parseFloat(LatLng[0]);
var Lng = parseFloat(LatLng[1]);

var markerLatlng = new google.maps.LatLng(Lat, Lng);

var marker = new google.maps.Marker({
    position: record.GPSlocation,
    title: record.title
});

//add the marker to the map
marker.setMap(map);

{% endfor %} 
```

当我在其中对变量进行硬编码时，它工作正常，否则我不会做任何事情。当我只是在 html 中将它们打印出来时，我在记录变量中拥有了我想要的所有数据，但是当我尝试在 JavaScript 中使用它时它就不起作用了。有任何想法吗？

所以我需要在 Jinja2 系统上放置一个 JSON 编码过滤器，我猜它看起来像这样：

```
jinja_env = jinja2.Environment(loader = jinja2.FileSystemLoader(template_dir),
                           jinja_env.filters['json_encode'] = json.dumps,
                           autoescape = True) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T01:08:09.263

是的，但不是那样的。您可以改为执行以下操作：

```
{% for record in records %}
addRecord({
    title: {{ title|json_encode }}, // assuming you have json_encode set up as a filter
    position: {
        latitude: {{ record.position.latitude|json_encode }},
        longitude: {{ record.position.longitude|json_encode }}
    }
});
{% endfor %} 
```

# macos - 文件名 Unix 上的时间戳

> ID：12344257
> 
> 赞同：0
> 
> 时间：2012-09-10T00:57:44.487
> 
> 标签：macos, unix, datetime, mysqldump

我正在尝试`mysql`使用`mysqldump`.

```
 /Applications/MAMP/Library/bin/mysqldump
 --opt  --user=user--password=pass Database> 
 /Applications/MAMP/backup/data.sql 
```

我希望文件名在文件名中包含当前日期/时间（最多秒是可以的）。我的 data.sql 应该是`data<current date/time>.sql`. （或者从时代开始也可以）。

我知道我可以通过 using 获取当前时间， `date +%s`但如何将其用作文件名。我正在使用 MacOSx

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T01:01:16.003

在`bash`，你可以转储到

```
mysqldump Database > data$(date +%s).sql 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T05:29:19.190

我的解决方案是将以下内容添加到我的 .zshrc 文件中：

```
alias now='date -u +%Y-%m-%dT%H%MZ' 
```

这为您提供了一种非常简单的方法来制作 ISO 8601 格式的 Zulu 时间。然后我会这样做：

```
/Applications/MAMP/Library/bin/mysqldump --opt  --user=user--password=pass Database> /Applications/MAMP/backup/data-`now`.sql 
```

# regex - 正则表达式匹配和提取

> ID：12344261
> 
> 赞同：0
> 
> 时间：2012-09-10T00:58:13.803
> 
> 标签：regex, perl, loops

我有一个包含许多值的文件。一旦找到 REGEX，我试图只提取文件中匹配的所需行。文件.txt

```
 ...... 
    ......
    TRIP (
            ?name           "model"
            ?prompt         "Model name"
            ?defamount       "USD100"
            ?type           "adventure"
            ?display        "no"
            ?photos       "800"
               )
    TRIP (
            ?name           "macro"
            ?prompt         "macro model name"
            ?defamount       "USD500"
            ?type           "adventure"
            ?display        "no"
            ?photos       "1200"
            )
      TRIP( 
            ?name           "description"
            ?prompt         "description"
            ?defamount       "USD400"
            ?type           "historical"
            ?display        "yes"
            ?photos       "900"
             )
            .......
........
.....
.......
...... 
```

我想提取带有“名称和型号”的行，然后是“名称和描述”以及这些行我想提取第一个“defamount”，一旦“名称和型号”的行匹配，然后是“名称和描述”。我尝试了循环，但没有成功

```
use strict;
open FILE, "<File.txt";
open FILE2, ">>data1.l";

while (my $string = <FILE>) {

    if ($string =~ m/^ CELL/ig) {

        print FILE2 $string;
    }
    elsif ($string =~ m/"model"/i) {

        print FILE2 $string;
    }
    elsif ($string =~ m/defamount/o) {

        print FILE2 $string;
    }
    elsif($string =~ m/"description"/i) {

        print FILE2 $string;
    }
    elsif($string =~ m/defamount/o) {

        print FILE2 $string;
    }
}
close FILE;
close FILE2; 
```

这给了我文件中的所有“defamount”行，但我只想要匹配上述正则表达式后的第一个 defamount

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T02:51:46.680

这些`if...elsif`结构中的每一个都是在输入的每一行上计算的。您需要将它们视为一组线，因此跟踪您是否已经匹配了一条线以确定这是否是您想要保留的组。

在不完全重写程序的情况下，您需要执行以下操作：

```
my $keep = 0;

while(my $string = <FILE>){
    if ($string =~ m/name\s+/){ #matches name, start of new group
        if ($string =~ m/"(model|description)"/){ # keep this group
            $keep = 1;
            print FILE2 $string;
        } else { #discard this group
            $keep = 0;
        }
    }
    if ($string =~ m/defamount/ && $keep){ #only print if in a 'keep' block
        print FILE2 $string;
    }
} 
```

老实说，如果我从头开始，我会以完全不同的方式写这个。那是您在那里进行的一些非常农业的perl。但希望我所写的逻辑能帮助你继续前进。

# php - 如何从 PHP 文件向 Wordpress 菜单添加项目？

> ID：12344264
> 
> 赞同：4
> 
> 时间：2012-09-10T00:58:32.013
> 
> 标签：php, wordpress

我有一个基于 Wordpress 构建的会员网站，我想创建一个对所有用户都相同的导航菜单，除了一个显示“您的订阅”的选项卡，并且该选项卡将有一个下拉菜单，显示用户有哪些订阅，对于每个用户来说都是不同的。

这是我现在拥有的一个小样本：

```
if ( wp_emember_is_member_logged_in('19') ) {
    wp_nav_menu( array( 'menu' => 'example1', 'menu_class' => 'sf-menu' ) ); 
```

这将检查成员是否具有特定的会员级别，然后输入特定于该会员级别的菜单。唯一的问题是我有 20 个 elseif 语句和 20 个菜单，这根本没有效率。

基本上，我想向一个菜单添加单个选项卡，而不是创建大量不同的菜单。我只是不知道该怎么做。谢谢！

编辑提问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T11:51:16.780

您好，我对您的确切内容有点困惑，您基本上是说您想为所有用户提供一个菜单，并根据某个访问级别更改菜单中的 1 个元素吗？

如果是这种情况，您似乎需要一个“if”语句来确定（正如您所做的那样）我们是否处于正确的访问级别并相应地自定义菜单。基本上看起来你需要两个不同的数组来构建你的菜单：

```
if ( wp_emember_is_member_logged_in('19') )
{//this will be show for users with an access level of 19
    $menu = array( 'menu' => 'example1', 'menu_class' => 'sf-menu' )
}
else
{//this will be show for all users except with an access level of 19
    $menu = array( 'menu' => 'example2', 'menu_class' => 'sf-menu-2' );
}

wp_nav_menu($menu); 
```

您需要在 WP 的这一部分中自己配置/设置菜单：

```
http://YOUR-DOMAIN/wp-admin/nav-menus.php 
```

***编辑***

看起来您想编写更好的代码并且可能没有 20 种不同的 if/else 语句......我会做的是：

有一个文件夹，其中包含所有自定义菜单作为单独的 PHP 文件，这些文件与用户的组级别共享名称......即

```
custommenus/19.php
custommenus/20.php
custommenus/21.php
custommenus/22.php 
```

然后为访问级别加载正确的菜单，例如：

```
//there must be a way for you to grab the user access level
//for now I will hard code it
$current_user_access_level = 19;

$custom_menu_path = 'custommenus/'.$current_user_access_level.'.php';
$default_menu_path = 'custommenus/default.php';

//check to see if the custom menu file exists first
if(file_exists($custom_menu_path))
{
    include $custom_menu_path;
}
else
{//then the file exists, load some sort of default file
    include $default_menu_path;
} 
```

然后，每当您创建新的访问级别时，您只需将与访问级别同名的新文件添加到“custommenus”文件夹，如果尚未创建该文件，它将加载默认菜单！

希望这会有所帮助:) [PS 这是未经测试的]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T18:08:17.353

对于其他感兴趣的人，我一直在与 emagdim 合作以获得简单的解决方案。

找到的最好的方法是在 header.php 文件中使用输出缓冲。通过这种方式，我们可以使用 wp_nav_menu() 渲染多个菜单，但是使用输出缓冲我们可以将其分解成片段，然后移动这些片段。

下面是 bottom-menu.php 的重要代码（即更新部分）：

```
........
<?php /* Our navigation menu. */ ?>
<?php

if(wp_emember_is_member_logged_in()){
    wp_nav_menu( array( 'menu' => 'normal-menu', 'menu_class' => 'sf-menu' ) );

/** CUSTOM CODE ADDITION **/
//connect to database
$link = mysql_connect("localhost", "[USERNAME]", "[PASSWORD]") or die("Oops! Please wait a few seconds and try again");
//connect to table
mysql_select_db("[TABLE NAME]") or die(mysql_error());
//search table
$result = mysql_query("SELECT * FROM `wp_wp_eMember_membership_tbl` ORDER BY `alias` ASC");
$array = array();
//while there are still rows in the table we haven't been to...
while ($row = mysql_fetch_array($result)){
    //clean up the "alias" so it becomes the name of the menu
    $alias = strtolower(str_replace(' ','-',$row['alias']));
    //now this can be accessed as "$array[X]" to get the name of the menu.
    if ($alias == 'admin'){
        $alias = 'admin-menu';
        }
    $array[$row['id']] = $alias;
    }
//done is a way to check if anything is found, if not a default menu is loaded
echo '{BREAK}';
$done = 0;
$ids = array_keys($array);
$info2 =  wp_eMember_get_user_details("more_membership_levels");
if (strstr($info2,',')){
    $moreMemberLevels = explode(',',$info2);
    }elseif ($info2 != ''){
    $moreMemberLevels[0] = $info2;
    }
//go through each ID/menu possibility
for ($i = 0; $i < count($ids); $i++){
    if ((wp_emember_is_member_logged_in($ids[$i])) || ((is_array($moreMemberLevels)) && ((in_array($ids[$i],$moreMemberLevels))))){
        $done++;
        //add the mneu to wp
        /** UNCOMMENT THIS TO IMPLEMENT LOOKUP VERIFICATION BEFORE ADDING A MENU **/
        /*
        echo 'Searching for '.$array[$ids[$i]].'...';
        $res = mysql_query("SELECT * FROM `wp_posts` WHERE `post_type`='nav_menu_item' AND `post_name`='{$array[$ids[$i]]}' LIMIT 1");
        if (mysql_num_rows($res) == 1){*/
        if ($array[$ids[$i]] != 'free'){
            /** UNCOMMENT THIS TO DEBUG **/
            //echo 'Adding '.$array[$ids[$i]].' to menu...<br />';
            wp_nav_menu(array('menu'=>$array[$ids[$i]], 'menu_class'=>'sf-menu'));
            }
        }
    }

echo ' {BREAK}';

/** END CUSTOM CODE ADDITION **/

    }else{
    wp_nav_menu( array( 'menu' => 'normal-visitor-menu', 'menu_class' => 'sf-menu' ) );
    } 
```

以及 header.php 的更新代码（加载 bottom-menu.php）

```
....

<div id="page" class="hfeed">
<?php /* ======== BOTTOM MENU ======== */
    ob_start();
    get_template_part('bottom','menu');
    $bm = ob_get_clean();

    $bm_array = explode('{BREAK}',$bm);
    $bm_Top = $bm_array[0];
    $bm_Move = strip_tags($bm_array[1],'<li><br /><br><font><b><i><u><em><strong><a>');
    $bm_End = $bm_array[2];

    $bottomMenu = str_replace('My Menu Item</a></li>', 'My New Menu Item</a>
<ul class="sub-menu">'.$bm_Move.'</ul>
</li>',$bm_Top).$bm_End;
    ob_end_clean();
    echo $bottomMenu;
//echo '*****'.$bm_Move.'*****';
    ?>
    <div id="main"> 
```

# 附加信息/技术总结

此方法采用两个常规菜单之一，并根据每个成员样式应加载的内容向其中添加元素。“元素”是由 wp_nav_manu() 创建的完整菜单，但只有一项。菜单的名称也是会员级别的名称，但使用连字符而不是空格并且全部小写。通过这样做，我们不需要另一个表将看似任意的会员级别 ID 与菜单名称联系起来 - 您只需根据该系统命名菜单/会员资格，以便它知道要查找的内容。

此外，每个添加的“菜单”实际上是一个只有一个菜单项的菜单，其中的`<ul></ul>`标签被移除，以便将它们嵌套到`<ul>`所需父元素下方的子菜单中。

说了这么多，我们就可以使用 wp 菜单系统根据其成员级别和其他成员级别动态显示子菜单项的无限可能性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-18T15:43:21.903

如果您需要添加的只是列表末尾的一个菜单项，那么您可以连接到一个过滤器 (wp_nav_menu_items)，如此[处](http://www.wpbeginner.com/wp-themes/how-to-add-custom-items-to-specific-wordpress-menus/)所述。然后，您可以在订阅下拉菜单中附加一个菜单项。您可以简单地打印级别，而不是使用 if 语句。

使用此方法，您可以更精细地控制菜单项的内容，以及不同级别的成员资格是否相似。此外，**[switch](http://php.net/manual/en/control-structures.switch.php)**语句优于无限（if else）语句。

-希望有帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-12T14:18:15.477

`wp_nav_menu_objects`您可以使用过滤器将一个菜单中的项目合并到另一个菜单中。

您需要知道要合并的菜单的 ID，以及您希望合并项成为其子项的菜单项的 ID。然后你可以获取菜单项，设置它们的父菜单项并将它们与父菜单合并。例如

```
add_filter('wp_nav_menu_objects', 'my_wp_nav_menu_objects_filter', 10, 2);

function my_wp_nav_menu_objects_filter($menu_items, $args) {
  $sub_menu_id = 123;
  $sub_menu_parent_item_id = 456;

  $sub_menu_items = wp_get_nav_menu_items($sub_menu_id);

  foreach ($sub_menu_items as $item) {
    if (!$item->menu_item_parent) {
      $item->menu_item_parent = $sub_menu_parent_item_id;
    }
  }

  return array_merge($menu_items, $sub_menu_items);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-12T12:00:46.960

好的，对你来说最好的解决方案是使用自定义菜单我希望这能满足你的需要......
你可以像这样创建两个菜单

**在你的functions.php中：**

```
add_action( 'init', 'my_custom_menus' );
function my_custom_menus() {
    register_nav_menus(
        array(
            'loggedin-menu' => __( 'logged in users' ),
            'newmembers-menu' => __( 'new members' )
        )
    );
} 
```

**然后......你有当前菜单的地方 - 替换这个：**

```
if ( wp_emember_is_member_logged_in('19') ) {
    wp_nav_menu( array( 'menu' => 'example1', 'menu_class' => 'sf-menu' ) ); 
```

**有了这个：**

```
// check if user is logged in
if ( is_user_logged_in() ) {
    // Logged in.
    wp_nav_menu( array( 'theme_location' => 'loggedin-menu' ) );
} else {
    // Not logged in.
    wp_nav_menu( array( 'theme_location' => 'newmembers-menu' ) );
} 
```

完成此操作后，您可以创建菜单并为已登录的用户和未登录的用户提供不同的菜单。

![在此处输入图像描述](../Images/748ee49c10968485035a51ad4b03be12.png)

# dialog - 如何更改 YUI 对话框可拖动？

> ID：12344265
> 
> 赞同：0
> 
> 时间：2012-09-10T00:58:39.260
> 
> 标签：dialog, yui, draggable

一个 YAHOO.widget.Dialog 对象可以用一个布尔值来实例化，指定对话框是否应该是可拖动的。

但是，一旦对话框被实例化并可用，我以后如何更改可拖动设置？我在 API 中看不到任何方法可以做到这一点。浏览调试器中的对象，我看到了初始配置值，但更改这些值不会改变激活后的行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T12:00:53.140

“可拖动”似乎是您想要的属性/属性。尝试做：

```
myPanel.setProperty("draggable", false); 
```

或者，

```
myPanel.setProperty("draggable", true); 
```

# actionscript-3 - AS3 在嵌入的 YouTube 视频完成后移至下一帧

> ID：12344267
> 
> 赞同：1
> 
> 时间：2012-09-10T00:58:57.293
> 
> 标签：actionscript-3, youtube, flash-cs4

我已将来自 YouTube 的视频嵌入到 SWF 中，并且我正在尝试制作它，以便在视频结束时播放下一帧。

这是我正在使用的功能。

```
 function onPlayerStateChange(event:Event):void {
        // Event.data contains the event parameter, which is the new player state
        trace("player state:", Object(event).data);

        var State = ("player state:", Object(event).data);

        if (State == 0)
        gotoAndPlay(3);

    } 
```

我一直在寻找答案很长一段时间:(

# php - PHP任务日历性能提升

> ID：12344270
> 
> 赞同：0
> 
> 时间：2012-09-10T00:59:20.213
> 
> 标签：php, performance

我正在尝试使用 PHP 创建一个 7 天的任务日历——此时的日期没有与 MYSQL 数据库链接——这不是我的问题。

我目前的日历只让你看到即将到来的任务（未来的那些 - 今天，明天），而不是过去的（昨天，最后几周） - 这就是我喜欢的方式。

现在，我的问题是，虽然我的代码运行成功，但回显速度很慢，所以我正在寻找一种更快的方法来使用 PHP 获得相同的结果。

```
<?
$day_count = 0;
$date= time();
$month = date('m', $date); 
$year = date('Y', $date);
$days_in_month = cal_days_in_month(0, $month, $year) ; 
$day_num = date("j", $date);

while ($day_num <= $days_in_month) { 

    while ( $day_count >=0 && $day_count <=7)  {
        ?>
        <div class="day"> <? echo $day_num; ?> </div> 
        <?
        $day_num++;
        $day_count++;
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T01:18:40.850

这是真正的代码吗？

如果是这样，您可以通过摆脱外部循环来加快速度。目前该循环没有做任何事情，因为它是`true`第一次，然后内部循环只运行一次，因为您没有`$day_count`在任何地方重置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T01:41:06.400

`day_count`只需在内部 while 循环之前初始化变量：

```
$day_count=0;
while ( $day_count >=0 && $day_count <=7)  { 
//rest of your code ....... 
```

# php - 在mysql中获取行创建/更新的时间戳/日期

> ID：12344271
> 
> 赞同：4
> 
> 时间：2012-09-10T00:59:20.700
> 
> 标签：php, mysql, sql

它可能直接用 sql/mysql 获得一行的创建和更新时间吗？我知道一种获取表最后更新的方法，但我想知道是否会有一种快速的本地方法来使用 sql 执行此操作。

我做了一种方法来自动在表中创建 2 个字段（created_date 和 updated_date），但我决定先问你，因为可能有更好的方法来做到这一点。

我听到建议！感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T01:39:35.967

如果表中没有两个额外的列，我不知道有什么方法可以做到这一点 - 但我更新它们的方法是让数据库触发器而不是应用程序逻辑来完成它。

使用触发方法有一些好处，但也有一些缺点。

首先，好处：

*   以这种方式将其作为事后的想法添加到应用程序中要容易得多。对应用程序/站点代码的更改很少。触发器会处理这一切。（假设您通过指定字段名称插入新行）
*   触发器将处理任何其他更改数据的方式 - 从控制台更改行的人仍然会导致触发器触发，就像使用相同数据库的另一个应用程序一样。
*   *允许插入/更新*表的纯行的可能性（尽管我不这样做） 。

但也有一些缺点：

*   除非您知道触发器正在执行这些更新，否则它通常会被忽略，并且在迁移到另一台服务器等时触发器会被遗忘

# asp.net-mvc - MVC 路由多个控制器

> ID：12344274
> 
> 赞同：1
> 
> 时间：2012-09-10T01:00:16.403
> 
> 标签：asp.net-mvc, asp.net-mvc-routing

我正在使用 MVC 4.0，我正在尝试为每个控制器添加一个路由。

好吧，我的第一个控制器叫做CustomersController。我添加的路线是：

```
 routes.MapRoute(
        name: "Customer",
        url: "{controller}/{action}/{IdCustomer}",
        defaults: new { controller = "Customers", action = "Index", IdCustomer = UrlParameter.Optional }
    ); 
```

当我运行应用程序时，我在索引页面（列表）中获得以下链接：

```
http://localhost:6838/Customers/Create/5
http://localhost:6838/Customers/Edit/5
http://localhost:6838/Customers/Details/5
http://localhost:6838/Customers/Delete/5 
```

好的，不错！这是我正在寻找的，但是，现在开始我的问题。我添加了另一个控制器，称为 ItemsController（具有相同的操作 - 创建/编辑/详细信息/删除）然后我尝试添加相同的路由：

```
 routes.MapRoute(
        name: "Item",
        url: "{controller}/{action}/{IdItem}",
        defaults: new { controller = "Items", action = "Index", IdItem = UrlParameter.Optional }
    ); 
```

但现在结果不同了......我得到以下链接：

```
 http://localhost:6838/Items/Create?IdItem=1
    http://localhost:6838/Items/Edit?IdItem=1
    http://localhost:6838/Items/Detail?IdItem=1
    http://localhost:6838/Items/Delete?IdItem=1 
```

为什么.. 为什么 :'( 它不起作用？为什么它只适用于第一条路线而不适用于刚刚添加的新路线？！

最好的问候，丹

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T01:38:50.677

为了简要介绍我的答案，您的路线太模糊了。您需要更具体才能获得更好的结果（特别是如果您没有按名称使用路线）。我会选择以下内容：

```
routes.MapRoute(
    name: "Customers",
    url: "Customers",
    defaults: new { controller = "Customers", action = "Index" }
);
routes.MapRoute(
    name: "CustomerDetails",
    url: "Customer/{IdCustomer}",
    defaults: new { controller = "Customers", action = "Details", IdItem = UrlParameter.Optional }
);
routes.MapRoute(
    name: "CustomerEdit",
    url: "Customer/{IdCustomer}",
    defaults: new { controller = "Customers", action = "Edit", IdItem = UrlParameter.Optional }
);
/* and so on (then move on to Items) */ 
```

现在您可以通过名称引用它们，并且还可以消除您通常提供的许多基本信息（例如操作和控制器详细信息）。它还使更新链接更容易，因为路径是命名的，而不是明确的控制器/动作。

```
@Html.RouteLink("Edit Customer", "CustomerEdit", new { IdCustomer = model.Id }); 
```

您现在可以在不同的区域进行此操作，或者稍后通过更改定义的路由让另一个控制器处理它，并且所有 RouteLink 可以保持不变。

# java - Eclipse Java 在项目资源管理器中打开项目有些困难

> ID：12344283
> 
> 赞同：1
> 
> 时间：2012-09-10T01:01:23.197
> 
> 标签：java, eclipse

几个小时前这工作正常，但由于某种原因，我的 Eclipse IDE 在 Java EE 模式下的外观发生了变化，现在当我将项目导入工作空间时，我无法在项目资源管理器中看到它显示，所以无法运行它。关于如何完成的任何提示？

![在此处输入图像描述](../Images/06090bc357565ea227b9e641668c224c.png)

上图是在 Java EE 模式下导入后的项目视图图像。没有出现错误信息

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T01:44:45.850

首先，打开**Navigator View**并确保项目确实存在。

从**Project Explorer**视图的本地菜单中，“选择工作集”并确保选择“无工作集”。同样从本地菜单中，选择“自定义视图”并确认您没有过滤掉您可能想要的任何内容，并且您已启用显示您想要的所有类型的内容。

# mysql - MySQL：CASE 可以在插入或选择之间改变查询吗？

> ID：12344286
> 
> 赞同：1
> 
> 时间：2012-09-10T01:02:44.723
> 
> 标签：mysql, case

是否有可能有一个查询来检查是否满足条件，并且取决于答案 a)`INSERT`或 b) `UPDATE`？

（Mandar在回答中提出了更好的例子）

```
CASE 
   WHEN
      IF EXISTS (SELECT action FROM database where action = 'eat' AND user = 'me') 
      THEN  (UPDATE database set action = 'digest' where user = 'me')
   WHEN
      IF EXISTS (SELECT action FROM database where action = 'inhale' AND user = 'me') 
      THEN  (UPDATE database set action = 'exhale' where user = 'me')

   ELSE (INSERT INTO database (user,action) VALUES ('me','living'))
END CASE 
```

它没有给出预期的结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T01:07:39.110

使用如果存在

```
IF EXISTS (SELECT action FROM database where action = 'eat' AND user = 'me') 
 THEN  (UPDATE database set action = 'digest' where user = 'me')

ELSE (INSERT INTO database (user,action) VALUES ('me','eat')) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T01:14:20.217

如果`(action, user)`是表中的唯一键，则可以使用以下[`INSERT ... ON DUPLICATE KEY UPDATE`](http://dev.mysql.com/doc/refman/5.0/en/insert-on-duplicate.html)语法来实现：

```
INSERT INTO database (user,action) VALUES ('me','eat')
ON DUPLICATE KEY UPDATE Action='digest'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T01:30:30.570

你想要什么有很多可能的解决方案。我建议您为此创建一个存储过程。例子

```
DELIMITER $$
CREATE PROCEDURE InsertOrUpdate
BEGIN
    DECLARE `result` int;
    SET `result` := (   
                        SELECT COUNT(*) 
                        FROM database
                        WHERE action = 'eat' AND
                             `user` = 'me'
                    );
    IF  `result` > 0 THEN
        UPDATE database 
        SET action = 'digest' 
        WHERE user = 'me';
    ELSE
        INSERT INTO database (user,action) 
        VALUES ('me','eat');
    END IF;
END $$
DELIMITER ; 
```

用法，

```
call InsertOrUpdate(); 
```

# php - 输出多维数组 - 多层次

> ID：12344289
> 
> 赞同：0
> 
> 时间：2012-09-10T01:03:31.320
> 
> 标签：php, arrays, multidimensional-array

我正在寻找一种将多维数组输出为简单表的方法。

我通过`http://google.com/complete/search?output=toolbar&q=adam`使用简单函数处理此处可用的xml 得到它

```
function convertXmlObjToArr($obj) { 
$json = json_encode($obj);
$array = json_decode($json,TRUE);

return $array; 
```

}

并得到了一个数组

```
 array(1){ ["CompleteSuggestion"]=>
  array(10) {
    [0]=>
    array(1) {
      ["suggestion"]=>
      array(1) {
        ["@attributes"]=>
        array(1) {
          ["data"]=>
          string(12) "adam sandler"
        }
      }
    }
    [1]=>
    array(2) {
      ["suggestion"]=>
      array(1) {
        ["@attributes"]=>
        array(1) {
          ["data"]=>
          string(11) "adam levine"
        }
      }
      ["num_queries"]=>
      array(1) {
        ["@attributes"]=>
        array(1) {
          ["int"]=>
          string(8) "33200000"
        }
      }
    }
    [2]=>
    array(2) {
      ["suggestion"]=>
      array(1) {
        ["@attributes"]=>
        array(1) {
          ["data"]=>
          string(12) "adam carolla"
        }
      }
      ["num_queries"]=>
      array(1) {
        ["@attributes"]=>
        array(1) {
          ["int"]=>
          string(7) "5570000"
        }
      }
    }
    [3]=>
    array(2) {
      ["suggestion"]=>
      array(1) {
        ["@attributes"]=>
        array(1) {
          ["data"]=>
          string(12) "adam lambert"
        }
      }
      ["num_queries"]=>
      array(1) {
        ["@attributes"]=>
        array(1) {
          ["int"]=>
          string(8) "45400000"
        }
      }
    }
    [4]=>
    array(1) {
      ["suggestion"]=>
      array(1) {
        ["@attributes"]=>
        array(1) {
          ["data"]=>
          string(17) "adam sandler died"
        }
      }
    }
    [5]=>
    array(2) {
      ["suggestion"]=>
      array(1) {
        ["@attributes"]=>
        array(1) {
          ["data"]=>
          string(19) "adam sandler movies"
        }
      }
      ["num_queries"]=>
      array(1) {
        ["@attributes"]=>
        array(1) {
          ["int"]=>
          string(8) "43600000"
        }
      }
    }
    [6]=>
    array(2) {
      ["suggestion"]=>
      array(1) {
        ["@attributes"]=>
        array(1) {
          ["data"]=>
          string(13) "adam morrison"
        }
      }
      ["num_queries"]=>
      array(1) {
        ["@attributes"]=>
        array(1) {
          ["int"]=>
          string(8) "13800000"
        }
      }
    }
    [7]=>
    array(2) {
      ["suggestion"]=>
      array(1) {
        ["@attributes"]=>
        array(1) {
          ["data"]=>
          string(10) "adams golf"
        }
      }
      ["num_queries"]=>
      array(1) {
        ["@attributes"]=>
        array(1) {
          ["int"]=>
          string(8) "30500000"
        }
      }
    }
    [8]=>
    array(2) {
      ["suggestion"]=>
      array(1) {
        ["@attributes"]=>
        array(1) {
          ["data"]=>
          string(10) "adam yauch"
        }
      }
      ["num_queries"]=>
      array(1) {
        ["@attributes"]=>
        array(1) {
          ["int"]=>
          string(8) "19700000"
        }
      }
    }
    [9]=>
    array(2) {
      ["suggestion"]=>
      array(1) {
        ["@attributes"]=>
        array(1) {
          ["data"]=>
          string(9) "adam west"
        }
      }
      ["num_queries"]=>
      array(1) {
        ["@attributes"]=>
        array(1) {
          ["int"]=>
          string(9) "137000000"
        }
      }
    }
  }
} 
```

现在我想输出它并面临两个问题：

1.  我如何“挖掘”这样结构的数组中的相关信息（“数据”和“整数”）？到目前为止，我正在处理更简单的数组（不是那么“深”）。我正在尝试通过 foreach 循环

```
foreach($googleKeywords->CompleteSuggestion 作为 $suggestion){

 `echo"{$this->suggestion->data}";
         }` 

但不断收到“尝试获取非对象的属性”错误。

1.  正如您注意到的一些数据不完整 - “数据”中有一个名称但没有对应的“int”......是否有办法回显“无数据”是否未设置“int”？

一切顺利，

亚当

            回答 #1

赞同：1

时间：2012-09-10T05:09:19.547

你可以试试这个**（代码更新）**：

```
foreach($googleKeywords['CompleteSuggestion'] as $suggestion){
    if (count($suggestion) == 2) {
        echo $suggestion['suggestion']['@attributes']['data'];
        echo $suggestion['num_queries']['@attributes']['int'];
    }
} 
```

这至少应该让您了解如何访问数组的元素。

我会留给你来格式化输出。

该`if`语句检查是否设置了所有数据（您期望 2 个项目，数据和 int）。您可以有一个`else{}`部分显示“未设置数据”。循环是必要的`for`，因为您不知道有多少元素，而这种`for`循环方式为您解决了问题。它将遍历数组中的所有元素，无论是只有 1 还是 9 或其他任何元素。如果数组中有零个元素，`for`则将跳过循环。

希望这可以帮助。

            回答 #2

赞同：0

时间：2012-09-12T01:19:29.507

谢谢，

最终工作的代码涉及嵌套循环，如下所示：

```
<pre>foreach($keywords as $suggestion){
 foreach ($suggestion as $finalSuggestion){
   echo "<p>".$finalSuggestion['suggestion']['@attributes']['data']."</p>";
   echo $finalSuggestion['num_queries']['@attributes']['data']."<br/>";
    if (array_key_exists('num_queries', $finalSuggestion)) {
    echo "<p> ".$finalSuggestion['num_queries']['@attributes']['int']." </p>";
    }
    else
        {
        echo "<p>no data</p> ";
    }
     }

}
</pre> 
```

PS。对不起，代码的格式很糟糕，仍然不确定如何在这里正确执行....我通常只是放 <pre>，但现在它变得疯狂了....       

```

# python - pip：错误：没有名为 pip uninstall 的命令

> ID：12344290
> 
> 赞同：3
> 
> 时间：2012-09-10T01:03:36.783
> 
> 标签：python, pip

所以，这很奇怪。我一直在尝试在 emacs 上设置 python 开发环境 - 我尝试设置ropemacs、rope 和 pymacs。然而，它只是不咬人，抱怨 pymacs 助手没有在 30 秒内启动。好吧，我决定放弃这部分设置（自动完成功能非常好），我想删除这些“死”包。但是，当我尝试调用**pip uninstall**时，会收到标题中描述的错误消息。其他人有这个问题，或者知道如何解决它？

编辑：点子版本信息

来自 /usr/lib/python2.6/dist-packages 的 pip 0.3.1 (python 2.6)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T23:31:19.307

该子命令是在0.6`uninstall`中引入的。`pip`您的版本 (0.3.1) 不包含该功能。

升级你的点子：

```
$ curl https://raw.githubusercontent.com/pypa/pip/master/contrib/get-pip.py | python 
```

更多信息：

*   [http://www.pip-installer.org/en/latest/installing.html](http://www.pip-installer.org/en/latest/installing.html)
*   [http://www.pip-installer.org/en/latest/news.html](http://www.pip-installer.org/en/latest/news.html)

# python - PyQt - 表单不提交

> ID：12344291
> 
> 赞同：0
> 
> 时间：2012-09-10T01:03:53.380
> 
> 标签：python, pyqt, pyqt4, spynner

我正在尝试使用 PyQt 提交表单。我开始通过 Spynner 使用它，但我在我的 repl 中将其解构为原始的 PyQT 调用自己来尝试调试问题。

```
>>> obr.webframe.findAllElements('.qust input').toList()
[<PyQt4.QtWebKit.QWebElement object at 0xa343f7c>, <PyQt4.QtWebKit.QWebElement object at 0xa343fb4>]
>>> 
>>> elem = obr.webframe.findAllElements('.qust input').toList()[1]
>>> elem.setFocus()
>>> elem.evaluateJavaScript("this.click()") 
```

当这不起作用时，我从 Spynner 中调用点击事件的方法中提取了这个片段，这也不起作用：

```
>>> jscode =
"var e = document.createEvent('MouseEvents');e.initEvent( 'click', true, true );this.dispatchEvent(e);"
>>> 
>>> elem.evaluateJavaScript(jscode) 
```

最后：

```
>>> obr.webframe.findFirstElement('form')
<PyQt4.QtWebKit.QWebElement object at 0xa34387c>
>>> obr.webframe.findFirstElement('form').evaluateJavaScript('this.submit();')
<PyQt4.QtCore.QVariant object at 0xa343f44>
>>> 
```

在所有情况下，它都会立即返回。不发布表格。形式正常：

```
>>> obr.webframe.findFirstElement('form').attribute('action')
PyQt4.QtCore.QString(u'SubmitPage.aspx?g=d7a717c38&ust=72a0fc7b&nm=01f00&se=53')
>>> obr.webframe.findFirstElement('form').attribute('method')
PyQt4.QtCore.QString(u'post') 
```

如果有人有任何想法或建议，我将不胜感激。正如你所看到的，我一直在这里抓住稻草。不是我喜欢的调试风格...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T06:28:20.143

您应该使用单击解决方案，因为这将确保如果页面在单击提交按钮时执行了一些 javascript 代码，它也会被调用。它可以更改甚至向帖子数据添加其他字段。通常您使用的代码是正确的，请尝试使用以下代码段启动 javascript click 事件：

```
elem = obr.webframe.findAllElements('.qust input').toList()[1]
js_click = """
           var evt = document.createEvent("MouseEvents");
           evt.initMouseEvent("click", true, true, window, 1, 1, 1, 1, 1, false, false, false, false, 0, this);
           this.dispatchEvent(evt);
           """
elem.evaluateJavaScript(js_click) 
```

# c - 按位 C 代码的舍入问题

> ID：12344294
> 
> 赞同：0
> 
> 时间：2012-09-10T01:04:26.400
> 
> 标签：c, bit-manipulation

我必须遵循将浮点值（封装在 int 中）转换为 int 值的按位代码。

问题：存在舍入问题，因此在输入为 0x80000001 的情况下会失败。我该如何处理？

这是代码：

```
 if(x == 0) return x;

  unsigned int signBit = 0;
  unsigned int absX = (unsigned int)x;
  if (x < 0)
  {
      signBit = 0x80000000u;
      absX = (unsigned int)-x;
  }

  unsigned int exponent = 158;
  while ((absX & 0x80000000) == 0)
  {
      exponent--;
      absX <<= 1;
  }

  unsigned int mantissa = absX >> 8;

  unsigned int result = signBit | (exponent << 23) | (mantissa & 0x7fffff);
  printf("\nfor x: %x, result: %x",x,result);
  return result; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T01:16:44.057

那是因为 的精度`0x80000001`超过[了 a`float`](http://en.wikipedia.org/wiki/Single_Precision)的精度。阅读链接的文章，浮点数的精度是 24 位，因此任何一对浮点数的差 ( `x - y`) 小于两者的最高位`>> 24`根本无法检测到。 `gdb`同意你的演员：

主.c：

```
#include <stdio.h>

int main() {
    float x = 0x80000001;
    printf("%f\n",x);
    return 0;
} 
```

数据库：

```
Breakpoint 1, main () at test.c:4
4       float x = 0x80000001;
(gdb) n
5       printf("%f\n",x);
(gdb) p x
$1 = 2.14748365e+09
(gdb) p (int)x
$2 = -2147483648
(gdb) p/x (int)x
$3 = 0x80000000
(gdb) 
```

这种不精确的极限：

```
(gdb) p 0x80000000 == (float)0x80000080 
$21 = 1
(gdb) p 0x80000000 == (float)0x80000081
$20 = 0 
```

实际的按位表示：

```
(gdb) p/x (int)(void*)(float)0x80000000
$27 = 0x4f000000
(gdb) p/x (int)(void*)(float)0x80000080
$28 = 0x4f000000
(gdb) p/x (int)(void*)(float)0x80000081
$29 = 0x4f000001 
```

`double`s 确实有足够的精度来区分：

```
(gdb) p 0x80000000 == (float)0x80000001
$1 = 1
(gdb) p 0x80000000 == (double)0x80000001
$2 = 0 
```

# php - 导入 symfony 映像，无权访问 httpd.conf - Symfony 1.4

> ID：12344295
> 
> 赞同：0
> 
> 时间：2012-09-10T01:04:29.020
> 
> 标签：php, symfony1

当我想从本地服务器上的 Symfony 库中导入它时，我通常这样做：

```
//in server httpd.conf
Alias /symfony/web/sf /Applications/MAMP/htdocs/symfony/lib/vendor/symfony/data/web/sf
<Directory "/Applications/MAMP/htdocs/symfony/lib/vendor/symfony/data/web/sf">
    AllowOverride All
    Allow from All
</Directory> 
```

但是现在我的项目在外部服务器上，我只是无法访问 httpd.conf。如何将这些元素导入我的项目？现在我看不到任何图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T01:39:57.167

我不是 .htaccess 的专家，但我确信这可以使用规则来完成。也...我做了一个搜索来帮助你，我找到了。 [symfony 文档 别名](http://www.symfony-project.org/cookbook/1_0/en/web_server)向下滚动到别名。如果您最终遇到问题，请确保检查日志文件。

# html - 如何使用自动宽度保持下拉菜单与顶级类别的宽度相同

> ID：12344300
> 
> 赞同：2
> 
> 时间：2012-09-10T01:05:05.593
> 
> 标签：html, css, drop-down-menu, menu

我有一个由嵌套的 ul 列表组成的导航菜单，如下所示：

```
<ul id="menu">
    <li class="category top_level">
         <a href="#" class="category_name top_level_link">top level 1</a>
        <ul class="dropdown">
            <li class="item " >
                <a href="">item 1</a>
            </li>
            <li class="item ">
                <a href="">very long name of item 2</a>
            </li>
        </ul>   
    </li>
    <li class="category top_level">
        <a href="#" class="category_name top_level_link">longer top level name 2</a>
        <ul class="dropdown">
            <li class="item " >
                <a href="">very long name of item 3</a>
            </li>
            <li class="item ">
                <a href="">item 4</a>
            </li>
        </ul>   
    </li>                  
</ul> 
```

当前的CSS是：

```
 #menu ul{list-style-type:none;}
#menu li.top_level{vertical-align:top;zoom:1;display:inline;margin:2px;padding:0 1px 0 0;}
#menu .dropdown{float:none;z-index:100;position:absolute;width:180px;height:0;overflow:hidden;-webkit-transition:height 700ms;-moz-transition:height 700ms;}
#menu .category:hover .dropdown,#menu .category:focus .dropdown{-webkit-transition:height 940ms;-moz-transition:height 940ms;}
#menu .item a,#menu .category a,#menu .category a:visited,#menu .item a:visited{-webkit-transition:background-color 940ms;-moz-transition:background-color 940ms;-webkit-font-smoothing:antialiased;font-size:15px;line-height:1em;text-decoration:none;display:block;font-family:ColaborateLightRegular;color:#555;padding:.6em;}
#menu a.top_level_link{color:#555;background:none;padding:.4em .6em;}
#menu .dropdown a{text-align:left;}
#menu .item a:hover,#menu .category a:hover,#menu .item a:focus,#menu .category a:focus{text-decoration:none;-webkit-transition:all 0;-moz-transition:all 0;background:#d9d2d2;}
#menu .selected a{background:#d4d2d2!important;} 
```

顶级类别和列表的长度不同。我希望下拉项目的宽度与顶级类别相同。顶级类别在 css 中有“宽度：自动”。当宽度继承到下拉列表时，它们将宽度继承为“自动”，而不是继承顶层的实际宽度。我怎样才能解决这个问题？这是我想要的和我拥有的的图片：

![例子](../Images/d2a00ada5074fdd8da4be3e75a5b48fb.png)

我需要做什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-10T01:52:58.417

1：请格式化您的CSS。
2：该代码似乎缺少实际使其工作的位？

现在至于答案：
一般概念：您应该将子元素（.dropdown）设置为`width:100%`，并且您的父元素（.top_level）应该已`position:relative;`设置。
这意味着孩子的绝对定位将相对于父母进行（这与定位如何[解释您的意愿有关。](http://www.w3.org/wiki/CSS_absolute_and_fixed_positioning#Containing_blocks)），然后他们的宽度将设置为与父母的宽度相同。耶！

然后，当然，这实际上不起作用-我相信是因为您`display:inline`在那里的最高级别。我已将您的父元素更改为 display:block;，然后让它们浮动以使它们再次彼此相邻。

[您也可以使用`display:inline-block;`浮动而不是浮动来执行此操作，具体取决于您实际想要的行为类型]

**请参阅修订（缩进）css：**

```
#menu li.top_level{
  vertical-align:top;
  zoom:1;
  display:block;
  float:left;
  width:auto;
  position:relative;
  margin:2px;padding:0 1px 0;
}

#menu .dropdown{
  float:none;  
  z-index:100;
  position:absolute;
  width:100%;
  height:0;
  overflow:hidden;
  -webkit-transition:height 700ms;-moz-transition:height 700ms;
}

#menu .category:hover .dropdown,#menu .category:focus .dropdown{
  -webkit-transition:height 940ms;
  -moz-transition:height 940ms;
  height:auto;
} 
```

我还在 jsfiddle 上发布了一个演示来解决这个问题，如果你想看看：http: [//jsfiddle.net/UPRAc/1/](http://jsfiddle.net/UPRAc/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T01:51:31.523

我想当我这样做时，我会得到任何你想要的结果：

# 添加

```
margin:0;
padding:0; 
```

# 消除

```
position:absolute;
width:180px; 
```

**在此**：#menu .dropdown

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T01:40:28.240

我认为这对于纯 CSS 是不可能的。

我试过继承，但没有用。

# ios - 如何绘制平行四边形按钮

> ID：12344304
> 
> 赞同：3
> 
> 时间：2012-09-10T01:06:58.417
> 
> 标签：ios, uibutton, drawing

我需要绘制一个具有平行四边形形状的自定义按钮。做这个的最好方式是什么？图像方式（即为控件设置背景图像）不适合。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-05-14T11:11:56.743

如果您不需要为按钮设置任何图像，*Brain89*提供的解决方案很好。我有背景和内容图像，我需要制作一个平行四边形按钮而不更改图像。我使用下一个代码：

```
// Pass 0..1 value to either skewX if you want to compress along the X axis 
// or skewY if you want to compress along the Y axis
- (void)parallelogramButtonWithButton:(UIButton *)button withSkewX:(CGFloat)skewX withSkewY:(CGFloat)skewY {
    CGAffineTransform affineTransform =  CGAffineTransformConcat(CGAffineTransformIdentity, CGAffineTransformMake(1, skewY, skewX, 1, 0, 0));
    button.layer.affineTransform = affineTransform;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-12T11:30:55.237

希望这很容易。经过一番谷歌搜索后，我想出了解决方案

**UIParallelogramButton.h**

```
#import <UIKit/UIKit.h>
#import "QuartzCore/QuartzCore.h"

@interface UIParallelogramButton : UIButton
{
    CGFloat offset;
}
@property CGFloat offset;
@end 
```

**UIParallelogramButton.m**

```
#import "UIParallelogramButton.h"

@implementation UIParallelogramButton
@synthesize offset;

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self)
    {
        offset = 0.0F;
    }
    return self;
}

- (void)drawRect:(CGRect)rect
{
    UIBezierPath* maskPath = [UIBezierPath bezierPath];
    [maskPath moveToPoint:CGPointMake(rect.origin.x + offset, rect.origin.y)];
    [maskPath addLineToPoint:CGPointMake(rect.size.width + rect.origin.x, rect.origin.y)];
    [maskPath addLineToPoint:CGPointMake(rect.origin.x + rect.size.width - offset, rect.origin.y + rect.size.height)];
    [maskPath addLineToPoint:CGPointMake(rect.origin.x, rect.origin.y + rect.size.height)];
    [maskPath closePath];
    CAShapeLayer* maskLayer = [[CAShapeLayer alloc] init];
    maskLayer.frame = self.bounds;
    maskLayer.path = maskPath.CGPath;
    self.layer.mask = maskLayer;
}
@end 
```

# asp.net-mvc - 使用 sqlserver express 时实体框架未创建数据库

> ID：12344306
> 
> 赞同：4
> 
> 时间：2012-09-10T01:07:14.700
> 
> 标签：asp.net-mvc, entity-framework, code-first

使用 SQL Express 时，实体框架不会创建我的数据库，但如果我使用 SQL Server CE，它可以正常工作。

几天来我一直在尝试解决这个问题，但这可能是我对 ASP.NET 和 MVC 的缺乏经验。

```
 ConnectionStrings:
<connectionStrings>
    <!--
    <add name="CRM"
         connectionString="data source=|DataDirectory|CRM.sdf"
         providerName="System.Data.SqlServerCe.4.0" />-->

    <add name="CRM"
         connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\CRM.mdf;User Instance=true"
         providerName="System.Data.SqlClient" />

    <add name="ApplicationServices"
         connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|aspnetdb.mdf;User Instance=true"
         providerName="System.Data.SqlClient" />
  </connectionStrings> 
```

堆栈跟踪：

```
System.InvalidOperationException was caught
  Message=Unable to complete operation. The supplied SqlConnection does not specify an initial catalog.
  Source=System.Data.Entity
  StackTrace:
       at System.Data.SqlClient.SqlProviderServices.GetDatabaseName(SqlConnection sqlConnection)
       at System.Data.SqlClient.SqlProviderServices.DbCreateDatabase(DbConnection connection, Nullable`1 commandTimeout, StoreItemCollection storeItemCollection)
       at System.Data.Objects.ObjectContext.CreateDatabase()
       at System.Data.Entity.Internal.DatabaseOperations.Create(ObjectContext objectContext)
       at System.Data.Entity.Database.Create()
       at System.Data.Entity.CreateDatabaseIfNotExists`1.InitializeDatabase(TContext context)
       at System.Data.Entity.Internal.InternalContext.<>c__DisplayClass5.<PerformDatabaseInitialization>b__3()
       at System.Data.Entity.Internal.InternalContext.PerformInitializationAction(Action action)
       at System.Data.Entity.Internal.InternalContext.PerformDatabaseInitialization()
       at System.Data.Entity.Internal.LazyInternalContext.<InitializeDatabase>b__4(InternalContext c)
       at System.Data.Entity.Internal.RetryAction`1.PerformAction(TInput input)
       at System.Data.Entity.Internal.LazyInternalContext.InitializeDatabaseAction(Action`1 action)
       at System.Data.Entity.Internal.LazyInternalContext.InitializeDatabase()
       at System.Data.Entity.Internal.InternalContext.Initialize()
       at System.Data.Entity.Internal.InternalContext.GetEntitySetAndBaseTypeForType(Type entityType)
       at System.Data.Entity.Internal.Linq.InternalSet`1.Initialize()
       at System.Data.Entity.Internal.Linq.InternalSet`1.get_InternalContext()
       at System.Data.Entity.Internal.Linq.InternalSet`1.ActOnSet(Action action, EntityState newState, Object entity, String methodName)
       at System.Data.Entity.Internal.Linq.InternalSet`1.Add(Object entity)
       at System.Data.Entity.DbSet`1.Add(TEntity entity)
       at MvcApplication1.Controllers.CustomerController.Create(Customer customer) in C:\Users\hlcole\Documents\RegProjects\MvcApplication1\MvcApplication1\Controllers\CustomerController.cs:line 55
  InnerException: 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T01:10:42.437

正如它所说，你没有`Initial Catalog=__name__`在你的连接字符串中提供一个。

SqlCe 是为应用程序目的而创建的本地文件——不涉及多个数据库。但是，SQLEXPRESS 可以托管和提供多个数据库，这使得提供`Initial Catalog`势在必行。

将以下内容添加到您的`connectionString`:

```
;Initial Catalog=__name__ 
```

`__name__`您要使用的数据库的名称在哪里。

# jquery - jQuery滑块脚本在本地工作，在服务器上中断

> ID：12344312
> 
> 赞同：0
> 
> 时间：2012-09-10T01:08:07.537
> 
> 标签：jquery, jquery-ui, prefixfree

我被难住了：我构建的登录页面在本地完美运行，但是当我将其上传到我们的服务器时完全崩溃了。

这是页面：[http ://register.lot18.com/slider/google/](http://register.lot18.com/slider/google/)

中间的白框应该是完全居中的；当您完成表格的每个步骤时，下一步应该从右侧滑入。定位/滑动是用`/js/slider.js`jQuery UI 完成的。如果您下载该页面并在本地计算机上查看它，它应该看起来完全正确。

我什至从哪里开始调试呢？该页面已经在本地运行，所以基本上我正在尝试的一切都只是一个随机猜测。

更奇怪的是：它不会在 100% 的时间内中断。如果我坐在那里不断刷新页面，也许每 10 次尝试中就有 1 次，它会完美显示。然后我刷新它又坏了。

* * *

更新：这是我所看到的屏幕截图，均来自 OS X 上的 Safari 6：

本地：[https](https://dl.dropbox.com/u/547222/lp-local.jpg)
://dl.dropbox.com/u/547222/lp-local.jpg 服务器：[https ://dl.dropbox.com/u/547222/lp-server.jpg](https://dl.dropbox.com/u/547222/lp-server.jpg)

* * *

更新 2：当我删除 PrefixFree ( `js/prefixfree.min.js`) 时，页面呈现好像根本*没有*样式表一样 - 但同样，*仅*在服务器上而不是本地。PrefixFree 的一个副作用是它采用外部样式表并将它们内联插入到页面中。那么外部样式表是否没有得到正确的服务`content-type`？

* * *

更新 3：当我尝试通过直接 URI 验证 CSS 时，我从 W3C 验证器收到此错误：

`I/O Error: Unknown mime type : binary/octet-stream`

这意味着什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T02:30:43.847

我想我明白了... CSS 使用了错误的 MIME 类型：`binary/octet-stream`而不是`text/css`. 我从来没有注意到这一点，因为我在页面上使用了一个名为 PrefixFree 的 jQuery 插件，使用它的副作用是您的外部样式表在文档加载后作为内联样式插入到页面上。

我把 PrefixFree 拿出来然后 bam，页面加载时没有任何样式。

所以，位置是关闭的，因为`slider.js`实际上是在通过 PrefixFree 加载样式*之前计算它。*

我需要其他人为我在服务器上设置正确的 MIME 类型，所以我无法 100% 确认这一点，但我确定这就是问题所在。

* * *

[更新：这是OS X 上的 S3 和 Transmit](http://logbook.route19.com/post/8827368890/amazon-s3-content-type-problems-with-transmit)特有的问题。在 Transmit 首选项中，为 CSS 设置自定义上传标头（content-type：text/css），问题就解决了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T02:17:59.143

似乎触发了调整大小事件 ( `$(window).resize()`) 使对话框居中。正如@dave-anderson 提到的，我建议重新安排居中代码：

```
$(document).ready(function(){

    // [code as normal here]

    $(window).resize(function(){
        positionOnResize();
    });
    positionOnResize(); // initial positioning

}); // end document ready

function sealPosition() {
    var stepPosition = $(".step:eq(1)").position();
    $("#seal").css({
        left: stepPosition.left + 470,
        top: stepPosition.top - 80
    });
}

function dialogPosition() {
    $(".step:eq(0)").left();
    $(".step:eq(1)").center();
    $(".step:eq(2)").right();
    $(".step:eq(3)").right();
}

function positionOnResize() {
    dialogPosition();
    sealPosition();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T01:25:27.883

您已经在调用中声明了许多函数，`$(document).ready`但您可能可以将它们移到外面。

可能导致您遇到麻烦的一件事是，当您将函数调用附加到`$(window).resize`您的调用时`sealPosition()`，但这是在它下面声明的。

在将它们附加到这样的匿名函数中之后，我们在声明事物时遇到了一些奇怪的问题。尝试将 sealPosition 声明移到`resize`附加之上或`ready`调用之外。

# cocoa - 可可：如何创建新的 SBElementArray？

> ID：12344314
> 
> 赞同：0
> 
> 时间：2012-09-10T01:08:14.773
> 
> 标签：cocoa, applescript

我正在制作一个在 Mail.app 中阅读电子邮件的应用程序。首先，应用程序使用 Mail.app 获取所有发件人

```
 NSArray *emailSenders = [self.mailBox.messages arrayByApplyingSelector:@selector(sender)]; 
```

我必须显示目标用户的电子邮件内容，例如只显示来自“abc@gmail.com”的所有邮件，所以我得到包含目标用户电子邮件的发件人索引

```
[emailSenders enumerateObjectsUsingBlock:^(NSString *emailSender, NSUInteger idx, BOOL *stop) {
    if([emailSender rangeOfString:userEmail].location != NSNotFound){
        [emails addObject:[self.mailBox.messages objectAtIndex:idx]];
    }
}]; 
```

emails 是由创建的 SBElementArray

```
 SBElementArray *emails = [[SBElementArray alloc]init]; 
```

我想通过仅发送一次 Apple Script Event 来获取电子邮件中的所有内容，例如

```
[mails arrayByApplyingSelector:@selector(content)]; 
```

所以我创建了自己的 SBElementArray，但问题是 Xcode 显示：`*** -[SBElementArray init]: should never be used.` 当我运行此代码时，如何修复它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T01:14:38.527

只需将您过滤的项目添加到`NSArray`or`NSMutableArray`中，并记住它的元素是`SBObjects`.

# wpf - WPF 类加载错误？添加自定义类时崩溃

> ID：12344315
> 
> 赞同：3
> 
> 时间：2012-09-10T01:08:25.193
> 
> 标签：wpf, class, runtime-error

**弹出**

```
An unhandled exception of type 'System.IO.IOException' occurred in
PresentationFramework.dll

Additional information: Cannot locate resource 'mainwindow.xaml'. 
```

**输出日志**

```
'markless.vshost.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_32\mscorlib\v4.0_4.0.0.0__b77a5c561934e089\mscorlib.dll'
...
'markless.vshost.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_MSIL\PresentationFramework\v4.0_4.0.0.0__31bf3856ad364e35\PresentationFramework.dll'
The thread 'vshost.NotifyLoad' (0x6b0) has exited with code 0 (0x0).
The thread 'vshost.LoadReference' (0x1fa8) has exited with code 0 (0x0).
'markless.vshost.exe' (Managed (v4.0.30319)): Loaded 'T:\#_\Programming\GitHub\markless\src\win2\markless\bin\Debug\markless.exe', Symbols loaded.
Step into: Stepping over method without symbols 'markless.App.App'
'markless.vshost.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System.Configuration\v4.0_4.0.0.0__b03f5f7f11d50a3a\System.Configuration.dll'
A first chance exception of type 'System.IO.IOException' occurred in PresentationFramework.dll
An unhandled exception of type 'System.IO.IOException' occurred in PresentationFramework.dll
Additional information: Cannot locate resource 'mainwindow.xaml'.
The program '[6268] markless.vshost.exe: Program Trace' has exited with code 0 (0x0).
The program '[6268] markless.vshost.exe: Managed (v4.0.30319)' has exited with code 0 (0x0). 
```

每次我尝试将 C# 类添加到我的项目时都会发生这种情况。它是 WPF，当我开始一个新项目时，它会运行良好的*只是 window*。当我尝试向应用程序添加实际功能的那一刻，它就像这样让我大吃一惊。（哦，它*构建了*，它构建得足够公平——这是一个运行时错误。）即使我随后删除了该类，应用程序仍然无法正确运行。做什么？

任何帮助表示赞赏。

> 前进的方式有很多种，但站稳脚跟的方式只有一种。- 罗斯福

编辑：如果你想查看 repo，就[在这里](https://github.com/vermiculus/markless/tree/master/src/win2)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T01:25:34.197

> 附加信息：找不到资源“mainwindow.xaml”。

你的`App.xaml`：

```
<Application x:Class="markless.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             StartupUri="MainWindow.xaml"> 
```

问题不是添加任何类，而是删除/重命名`MainWindow`仍然在此处引用。

# ruby-on-rails - 对有序数据进行分组

> ID：12344321
> 
> 赞同：0
> 
> 时间：2012-09-10T01:09:44.610
> 
> 标签：ruby-on-rails, ruby, activerecord

显示组数据的最佳方式是什么？

目前在我的控制器中，我有：

```
@items = Item.order("group_name") 
```

然后在我看来，我可以遍历它：

```
- @items.each do |item|
  %p= item.name 
```

产生这样的东西的最干净和最有效的方法是什么：

```
<strong>Group Name 1</strong>
<p>Item 1</p>
<p>Item 2</p>
<strong>Group Name 2</strong>
<p>Item 1</p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T01:40:00.100

我认为 group_by 方法可以满足您的需求。这里有一个很好的概述：[http ://railscasts.com/episodes/29-group-by-month](http://railscasts.com/episodes/29-group-by-month)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T02:32:04.813

控制器

```
@items = Item.sanitized_and_ordered 
```

模型

```
class Item <<  ActiveRecord::Base
scope :ordered_group ,order('group_name')

class << self
   def sanitized_and_ordered
      ordered_group.group_by {|item| item.group_name}
   end
 end
end 
```

看法

```
- @items.each_pair do |key,value|
  %p= key
   - value.each do |item|
      %p= item.name 
```

# aviarc - 文件上传的 Aviarc 屏幕超时

> ID：12344323
> 
> 赞同：2
> 
> 时间：2012-09-10T01:10:22.150
> 
> 标签：aviarc

提交屏幕以处理上传的文件时，我遇到了较大文件的问题。最终在提交时出现此错误：

> 服务器请求期间发生错误：
> 屏幕提交后台请求期间已超时。请重试您的操作

如何解决超时错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T06:01:58.310

一种选择可能是增加 AJAX 超时限制。在 Aviarc Admin 中，转到 Applications > your app > Variables 并将变量添加`ajax-timeout-millis`到足够长的时间以使文件完全上传（如果变量不存在，您可以创建它）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T03:54:29.370

您要上传的文件有多大？听起来您需要为 servlet 容器配置最大 POST 大小。

*   如果使用嵌入式 Jetty，默认 POST 限制为 10MB - 您可以在启动脚本中使用 HTTP_MAX_POST_SIZE 变量进行配置。
*   如果使用 Tomcat，默认 POST 限制为 2MB，您需要按照此处所述配置 maxPostSize：http: [//tomcat.apache.org/tomcat-6.0-doc/config/http.html](http://tomcat.apache.org/tomcat-6.0-doc/config/http.html)
*   其他容器将有自己的最大 POST 大小的配置机制。

# php - 使用 ID 加载 wordpress 帖子时出错

> ID：12344331
> 
> 赞同：1
> 
> 时间：2012-09-10T01:12:38.330
> 
> 标签：php, wordpress

我正在尝试使用其 ID 检索 wordpress 帖子的内容：

```
$loadpost = url_to_postid($actual_link); 
$newpost = get_post($loadpost);
echo '<article id="post-'.$newpost["ID"].'"><h1>'.$newpost["post_title"].'</h1>'.$newpost["post_content"]; 
```

$loadpost 返回一个有效的 ID，但不知何故，这个表达式不起作用。IE 返回：

```
Fatal error: Cannot use object of type stdClass as array in /hermes/waloraweb046/b428/moo.snippetspacecom/splittemplate/wp-content/themes/split/index.php on line 24 
```

这是什么意思？

谢谢你们的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T01:18:44.810

因为 get_post(); 默认[输出为 OBJECT](http://codex.wordpress.org/Function_Reference/get_post)

你要返回的是

```
echo '<article id="post-'.$newpost->ID.'"><h1>'.$newpost->post_title.'</h1>'.$newpost->post_content; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T01:16:58.917

将所有 [''] 更改为 -> 示例

```
$newpost->ID;
$newpost->post_title 
```

wp 将大多数参数作为对象而不是数组传递。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T01:17:21.537

默认情况下[`get_post`](http://codex.wordpress.org/Function_Reference/get_post)返回一个对象，`ARRAY_A`作为第二个参数传递给它以返回一个关联数组。

```
$loadpost = url_to_postid($actual_link); 
$newpost = get_post($loadpost, ARRAY_A);
echo '<article id="post-'.$newpost["ID"].'"><h1>'.$newpost["post_title"].'</h1>'.$newpost["post_content"]; 
```

# python - 将多维 Json 数组解析为 Python

> ID：12344332
> 
> 赞同：7
> 
> 时间：2012-09-10T01:12:44.803
> 
> 标签：python, arrays, json, multidimensional-array

我很头疼，第一次尝试解析 JSON 并处理多维数组。

```
{
  "secret": "[Hidden]",
  "minutes": 20,
  "link": "http:\/\/www.1.com",
  "bookmark_collection": {
    "free_link": {
      "name": "#free_link#",
      "bookmarks": [
        {
          "name": "1",
          "link": "http:\/\/www.1.com"
        },
        {
          "name": "2",
          "link": "http:\/\/2.dk"
        },
        {
          "name": "3",
          "link": "http:\/\/www.3.in"
        }
      ]
    },
    "boarding_pass": {
      "name": "Boarding Pass",
      "bookmarks": [
        {
          "name": "1",
          "link": "http:\/\/www.1.com\/"
        },
        {
          "name": "2",
          "link": "http:\/\/www.2.com\/"
        },
        {
          "name": "3",
          "link": "http:\/\/www.3.hk"
        }
      ]
    },
    "sublinks": {
      "name": "sublinks",
      "link": [
        "http:\/\/www.1.com",
        "http:\/\/www.2.com",
        "http:\/\/www.3.com"
      ]
    }
  }
} 
```

这分为 3 个部分，我的第一个维度（秘密、分钟、链接）上的静态数据，我需要将其作为单独的字符串获取。

然后我需要每个没有固定名称的“书签集合”字典，所以我需要它们的名称和每个书签的链接/名称。

然后是单独的子链接，它们总是相同的，我需要单独字典中的所有链接。

我正在阅读有关解析 JSON 的内容，但我发现的大部分内容都是放入 1 个字典中的简单数组。有没有人有任何好的技术来做到这一点？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-10T01:38:51.877

解析 JSON 后，您将得到一个 Python 字典。所以，假设上面的 JSON 在一个名为 input_data 的字符串中：

```
import json
# This converts from JSON to a python dict
parsed_input = json.loads(input_data)

# Now, all of your static variables are referenceable as keys:
secret = parsed_input['secret']
minutes = parsed_input['minutes']
link = parsed_input['link']

# Plus, you can get your bookmark collection as:
bookmark_collection = parsed_input['bookmark_collection']

# Print a list of names of the bookmark collections...
print bookmark_collection.keys() # Note this contains sublinks, so remove it if needed

# Get the name of the Boarding Pass bookmark:
print bookmark_collection['boarding_pass']['name']

# Print out a list of all bookmark links as:
#  Boarding Pass
#    * 1: http://www.1.com/
#    * 2: http://www.2.com/
#  ...
for bookmark_definition in bookmark_collection.values():
    # Skip sublinks...
    if bookmark_definition['name'] == 'sublinks':
        continue
    print bookmark_definition['name']
    for bookmark in bookmark_definition['bookmarks']:
        print "    * %(name)s: %(link)s" % bookmark

# Get the sublink definition:
sublinks = parsed_input['bookmark_collection']['sublinks']

# .. and print them
print sublinks['name']
for link in sublinks['link']:
    print '  *', link 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T01:42:50.017

嗯，不 json.loads 做的伎俩？

例如，如果您的数据在文件中，

```
import json
text = open('/tmp/mydata.json').read()

d = json.loads(text)

# first level fields
print d['minutes'] # or 'secret' or 'link'

# the names of each of bookmark_collections's items
print d['bookmark_collection'].keys()

# the sublinks section, as a dict
print d['bookmark_collection']['sublinks'] 
```

此代码的输出（给定上面的示例输入）是：

```
20
[u'sublinks', u'free_link', u'boarding_pass']
{u'link': [u'http://www.1.com', u'http://www.2.com', u'http://www.3.com'], u'name': u'sublinks'} 
```

我认为，哪个可以满足您的需求？

# android - android asus tf300 - 外部 waas gps

> ID：12344333
> 
> 赞同：0
> 
> 时间：2012-09-10T01:12:45.767
> 
> 标签：android, gps

我想获得一个外部 waas gps 与我的新华硕变压器 tf300 一起使用。对于我正在编写的一些基于海洋的应用程序，内置 GPS（辅助 GPS）不够准确。

tf300 没有 USB 插槽——只有一个 hdmi 输出和蓝牙——当然我在看蓝牙选项。

有没有人在android上使用过外部蓝牙waas gps？我假设当外部 gps 在蓝牙范围内时，这将显示在设备设置中的位置提供程序列表中。我还假设当我调用 LocationManager.getProvider() 时，它将在我的应用程序中列为一个选项。

有人对外部 GPS 有任何运气吗？

同样基于我的研究 WAAS gps 是我应该使用的最佳精度。该设备将用于精度要求低于 10 英尺的海洋应用。有什么不同的 gps 技术我应该考虑吗？

# android - android懒惰列表图像加载数组

> ID：12344338
> 
> 赞同：0
> 
> 时间：2012-09-10T01:14:32.360
> 
> 标签：android, image, listview, lazy-loading

所以我已经做了好几个小时了，现在凌晨 4:07 我要睡觉了，所以我希望有人能帮助我。

我有一个 ImageResults 对象的 ArrayList，其类定义为：

```
public class ImageResults {

 String _title, _country, _thumbnailURL, _imageURL;

 public ImageResults(String title, String country, String thumbnailURL, String imageURL)
 {
     _title = title;
     _country = country;
     _thumbnailURL = thumbnailURL;
     _imageURL = imageURL;
 }

 public String getTitle()
 {
     return _title;
 }

 public String getCountry()
 {
     return _country;
 }

 public String getThumbnailURL()
 {
     return _thumbnailURL;
 }

 public String getImageURL()
 {
     return _imageURL;
 }
} 
```

现在为了使用[https://github.com/thest1/LazyList](https://github.com/thest1/LazyList)我必须从我的 imageresults 类型的数组列表中检索缩略图 url 并将它们放在一个数组中，就像我在这里做的那样

```
private void populateListBox()
{
    String[] imgLst = new String[imagesList.size()];

    for(int i = 0; i < imagesList.size();i++)
    {
        imgLst[i] = (imagesList.get(i)._thumbnailURL);
    //  Toast t = Toast.makeText(this,imgLst[0] , Toast.LENGTH_SHORT);
    //  t.show();
    }

    adapter=new LazyAdapter(this, imgLst);
    imageListView.setAdapter(adapter);
} 
```

现在问题是上面的方式不起作用，但是如果我按如下方式单独获取链接，它可以工作，这是链接在原始项目中组织的默认方式

```
private void populateListBox()
{
     String[] imgLst={
            "http://www.istartedsomething.com/bingimages/resize.php?i=Velodrome_EN-AU1182456710.jpg&w=300"};

    adapter=new LazyAdapter(this, imgLst);
    imageListView.setAdapter(adapter);
} 
```

这就是原始项目中链接的组织方式，是的，我 100% 确定这两种方法都以不同的方式返回相同的字符串，一种是从数组列表中的对象中获取它，另一种是我明确声明它。

```
 private String[] mStrings={
        "http://www.istartedsomething.com/bingimages/resize.php?i=Velodrome_EN-AU1182456710.jpg&w=300",
        "http://www.istartedsomething.com/bingimages/resize.php?i=Velodrome_EN-CA1182456710.jpg&w=300",
        "http://a3.twimg.com/profile_images/121630227/Droid_normal.jpg",
        "http://a1.twimg.com/profile_images/957149154/twitterhalf_normal.jpg",
        "http://a1.twimg.com/profile_images/97470808/icon_normal.png",
        "http://a3.twimg.com/profile_images/511790713/AG.png",
        "http://a3.twimg.com/profile_images/956404323/androinica-avatar_normal.png",
        "http://a1.twimg.com/profile_images/909231146/Android_Biz_Man_normal.png",
        "http://a3.twimg.com/profile_images/72774055/AndroidHomme-LOGO_normal.jpg",
        "http://a1.twimg.com/profile_images/349012784/android_logo_small_normal.jpg"}; 
```

主要活动课

```
public class BngPaperActivity extends Activity {

ListView imageListView;
Spinner countrySpinner;
String selectedMonth;
String selectedYear;

LazyAdapter adapter;

ProgressDialog progress;

Dialog date;

getResult getRes;

String ResultsString;

ArrayList<String> monthList = new ArrayList<String>();
ArrayList<ImageResults> imagesList = new ArrayList<ImageResults>();
String dateText;

TextView selectedDateView;
static final int MONTHYEARDATESELECTOR_ID = 3;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    progress =  new ProgressDialog(BngPaperActivity.this);

    monthList.add("January"); monthList.add("February"); monthList.add("March"); monthList.add("April");
    monthList.add("May"); monthList.add("June"); monthList.add("July"); monthList.add("August");
    monthList.add("September"); monthList.add("October"); monthList.add("November"); monthList.add("December");

    imageListView = (ListView) this.findViewById(R.id.imagesListView);
    countrySpinner = (Spinner) this.findViewById(R.id.countrySpinner);
    selectedDateView = (TextView) this.findViewById(R.id.selectedDateView);

    Button monthYearButton = (Button) this.findViewById(R.id.monthyearBTN);
    // set up a listener for when the button is pressed
    monthYearButton.setOnClickListener(new OnClickListener() {
        public void onClick(View arg0) {
            // call the internal showDialog method using the predefined ID

            showDialog(MONTHYEARDATESELECTOR_ID);
        }
    });

}

private DateSlider.OnDateSetListener mMonthYearSetListener =
    new DateSlider.OnDateSetListener() {
        public void onDateSet(DateSlider view, Calendar selectedDate) {
            // update the dateText view with the corresponding date
            dateText = (String.format("%tB %tY", selectedDate, selectedDate));
            selectedDateView.setText(dateText);
            try {

                 selectedMonth = monthList.indexOf(String.format("%tB", selectedDate)) + 1 +"";
                 selectedYear = String.format("%tY", selectedDate);

                 progress.setMessage("Fetching Images... \nPress Back Button To Cancel");
                 progress.setCancelable(true);

                getRes = new getResult(progress,view);
                getRes.execute();

                try {
                    ResultsString = getRes.get();
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (ExecutionException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

                parseResults(ResultsString);

            } catch (Exception e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

        }
};

private void parseResults(String result)
{
  Scanner scan = new Scanner(result);

  String current = scan.nextLine();
  String title = "";
  String country = "";
  String thumbURL = "";
  String imageURL = "";

  while(!current.equals("End of file"))
  {
      if(current.equals("Begin Thumb"))
      {
          current = scan.nextLine();
          title = current.substring(current.indexOf(":")+1);

          current = scan.nextLine();
          country = current.substring(current.indexOf(":")+1);

          current = scan.nextLine();
          thumbURL = current.substring(current.indexOf(":")+1);

          imageURL = thumbURL.replace("300", "900");

          current = scan.nextLine();
      }

      if(current.equals("End Thumb"))
      {
          imagesList.add(new ImageResults(title,country,thumbURL,imageURL));
      }

      current = scan.nextLine();
  }

  populateListBox();

}

private void populateListBox()
{

    //this is not working, i would like this one to work

        String[] imgLst = new String[imagesList.size()];

        for(int i = 0; i < imagesList.size();i++)
        {
            imgLst[i] = (imagesList.get(i)._thumbnailURL);
        //  Toast t = Toast.makeText(this,imgLst[0] , Toast.LENGTH_SHORT);
        //  t.show();
        }
    //-----------------------------------

        /* This is working
            String[] imgLst={
                    "http://www.istartedsomething.com/bingimages/resize.php?i=Velodrome_EN-AU1182456710.jpg&w=300"};
         */
    adapter=new LazyAdapter(this, imgLst);
    imageListView.setAdapter(adapter);
}

@Override
protected Dialog onCreateDialog(int id) {
    // this method is called after invoking 'showDialog' for the first time
    // here we initiate the corresponding DateSlideSelector and return the dialog to its caller

    final Calendar c = Calendar.getInstance();

    final Calendar minDate = Calendar.getInstance();
        minDate.set(Calendar.YEAR, 2009);
        minDate.set(Calendar.MONTH, Calendar.JUNE);
    final Calendar maxDate = Calendar.getInstance();
        maxDate.add(Calendar.DATE, 0);

    switch (id) {

    case MONTHYEARDATESELECTOR_ID:
        return new MonthYearDateSlider(this,mMonthYearSetListener,c,minDate,maxDate);

    }
    return null;
}

private class getResult extends AsyncTask<String, String, String> {

    private final HttpClient Client = new DefaultHttpClient();
    private String Content;
    private String Error = null;
    private ProgressDialog progress;
    DateSlider view;

    public getResult(ProgressDialog progress, DateSlider view) 
    {
        this.progress = progress;
        this.view = view;
    }

    protected void onPreExecute() {

        this.view.dismiss();
        this.progress.show();
    }

    @Override
    protected String doInBackground(String... urls) {
        HttpClient httpclient = new DefaultHttpClient(); 
        HttpResponse response; 
        String responseString = null; 
        try { 
            response = httpclient.execute(new HttpGet("http://devleb.com/BngPaper/BngPaperWebService.php?thumbnail=Yes&year="+selectedYear+"&month="+ selectedMonth)); 
            StatusLine statusLine = response.getStatusLine(); 
            if(statusLine.getStatusCode() == HttpStatus.SC_OK){ 
                ByteArrayOutputStream out = new ByteArrayOutputStream(); 
                response.getEntity().writeTo(out); 
                out.close(); 
                responseString = out.toString(); 
            } else{ 
                //Closes the connection. 
                response.getEntity().getContent().close(); 
                throw new IOException(statusLine.getReasonPhrase()); 
            } 
        } catch (ClientProtocolException e) { 
            //TODO Handle problems.. 
        } catch (IOException e) { 
            //TODO Handle problems.. 
        } 
        //Dialog.dismiss();

        progress.dismiss();
        return responseString; 
    }

    protected void onPostExecute(Void unused) {

        this.progress.dismiss();

        if (Error != null) {
            Toast.makeText(BngPaperActivity.this, Error, Toast.LENGTH_LONG).show();
        } 
    }

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T01:32:08.833

以下不起作用？

```
private void populateListBox()
{

    adapter=new LazyAdapter(this, mStrings);
    imageListView.setAdapter(adapter);
} 
```

就像在惰性列表项目中给出的示例一样。

# c++ - 解析 XML 样式表处理指令

> ID：12344341
> 
> 赞同：1
> 
> 时间：2012-09-10T01:15:33.723
> 
> 标签：c++, xml, qt

如何正确解析 XML 样式表处理指令？据我了解，XML 处理指令的价值，例如：

```
<?xml-stylesheet type="application/xsl" src="style.xsl" version="1.0"?> 
```

是：

```
type="application/xsl" src="style.xsl" version="1.0" 
```

如何将其解析为键值对列表？我已经搜索了一些有关如何执行此操作的示例，但找不到任何示例。

这里的关键词是*正确*的......我不想只写一个在某些情况下可能会失败的简单正则表达式，我想确保我解析这个完全符合您正确解析 XML 样式表指令的方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T03:57:19.260

XML 样式表 PI 的语法在[spec](http://www.w3.org/TR/xml-stylesheet/)中给出，因此，如果您想正确处理，只需为该语法编写解析器即可。由于该语言实际上是正则的，因此可以使用正则表达式对其进行正确解析。最大的复杂性可能是，由于 XML 规范不要求在处理指令中识别字符引用或预定义的实体引用，因此您可能需要自己负责处理这些内容。

至于你应该如何做，这取决于你在什么环境中工作。例如，这是一个 XQuery 函数，它完成这项工作并返回从处理指令中的伪属性创建的元素列表；如果 PI 与规范中给出的语法不匹配，它会返回一个名为`error`.

```
declare function bmt:parse-sspi($s as xs:string) 
  as element()* {

  if (bmt:check-sspi($s)) then
     let $s1 := substring-after($s,"<?xml-stylesheet"),
         $s2 := substring-before($s1,"?>")
     return bmt:parse-pseudoatts($s2) 
  else <error/>
}; 
```

此函数将解析伪属性的实际工作交给一个单独的递归函数，该函数在每次调用时解析一个属性-值对：

```
declare function bmt:parse-pseudoatts($s as xs:string) 
  as element()* {

  (: We know that $s is a syntactically legal sequence
     of pseudo-attribute value specifications. So we
     can get by with simpler patterns than we would
     otherwise need.
     :)

  let $s1 := replace($s,"^\s+","")
  return if ($s1 = "") then () else
         let $s2 := substring-before($s, '='),
             $Name := normalize-space($s2),
             $s3 := substring-after($s, '='),
             $s4 := replace($s3,"^\s+",""),
             $Val := if (starts-with($s4,'"')) then
                        substring-before(
                          substring($s4,2),
                          '"')
                     else if (starts-with($s4,"'")) then
                        substring-before(
                          substring($s4,2),
                          "'")
                     else <ERROR/>,
             $sRest := if (starts-with($s4,'"')) then
                        substring-after(
                          substring($s4,2),
                          '"')
                     else if (starts-with($s4,"'")) then
                        substring-after(
                          substring($s4,2),
                          "'")
                     else ""

  return (element {$Name} { $Val }, 
          bmt:parse-pseudoatts($sRest))
}; 
```

正如评论所表明的（如您所见），这两者都受益于提前知道 PI 实际上是合法的。因此，我们可以通过从字符串中第一个“=”之前的任何内容中去除空格来解析伪属性名称，依此类推。

正确性的保证由一个单独的`check-sspi`函数提供，该函数系统地构造一个正则表达式，以便于将函数与规范中的语法进行比较，以检查函数是否正确。

```
declare function bmt:check-sspi($s as xs:string) 
  as xs:boolean {

  let $pio := "<\?",
      $kw := "xml-stylesheet",
      $pic := "\?>",
      $S := "\s+",
      $optS := "\s*",
      $Name := "\i\c*",
      $CharRef := "&amp;#[0-9]+;|&amp;#x[0-9a-fA-F]+;",
      $PredefinedEntityRef := concat("&amp;amp;",
                                     "|&amp;lt;",
                                     "|&amp;gt;",
                                     "|&amp;quot;",
                                     "|&amp;apos;"),
      $dq := '"',
      $sq := "'",
      $dqstring := concat($dq,
                          "(",
                          "[^", $dq, "&lt;&amp;]",
                          "|",
                          "$CharRef",
                          "|",
                          "$PredefinedEntityRef",
                          ")*",
                          $dq),
      $sqstring := concat($sq,
                          "(",
                          "[^",$sq,"&lt;&amp;]",
                          "|",
                          "$CharRef",
                          "|",
                          "$PredefinedEntityRef",
                          ")*",
                          $sq),
      $psAttVal := concat("(",$dqstring,"|",$sqstring,")"),
      $pseudoAtt := concat("(", 
                           $Name, 
                           $optS, "=", $optS, 
                           $psAttVal,
                           ")"),
      $sspi := concat($pio,
                      $kw,
                      "(", $S, $pseudoAtt, ")*",
                      $optS,
                      $pic),
      $sspi2 := concat("^", $sspi, "$")
      return if (matches($s,$sspi2)) then true() else false()
}; 
```

对于测试字符串

```
<?xml-stylesheet  foo="bar"
      href="http://www.w3.org/2008/09/xsd.xsl"
      type='text/xsl'
?> 
```

顶层`parse-sspi`函数返回

```
<foo>bar</foo>
<href>http://www.w3.org/2008/09/xsd.xsl</href>
<type>text/xsl</type> 
```

如果我们只使用单个 Perl 风格的正则表达式进行解析，这些函数可能会更紧凑一些。有些人可能会发现这种紧凑的形式更自然，更容易理解，有些人会更喜欢这里给出的不太简洁的表述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T07:40:06.647

什么编程语言？

如果你使用 Java，你可以在这里找到一些有用的代码：

[http://grepcode.com/file/repo1.maven.org/maven2/net.sourceforge.saxon/saxon/9.1.0.8/net/sf/saxon/om/ProcInstParser.java](http://grepcode.com/file/repo1.maven.org/maven2/net.sourceforge.saxon/saxon/9.1.0.8/net/sf/saxon/om/ProcInstParser.java)

# sql - 如何并行批量复制到具有聚集索引的表？

> ID：12344344
> 
> 赞同：1
> 
> 时间：2012-09-10T01:15:45.247
> 
> 标签：sql, parallel-processing, bulkinsert, clustered-index

有一个过程可以将数据从 3 个并行源批量插入到 sql 表中。向该表添加主键后，由于成为死锁的牺牲品，有 2 个批量插入查询在一段时间后被取消。在我添加主键之前，这从未发生过。我认为问题与通过添加主键创建的聚集索引有关。

现在我只是要删除主键，然后在表上创建一个非聚集索引。我想了解更多关于问题是否是我认为的问题的信息，以及是否有办法让我添加聚集索引而不会搞砸加载过程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T01:24:03.530

不确定它是否比治疗更毒，但罗伯特提出在大量插入之前删除聚集索引：

[http://www.simple-talk.com/sql/learn-sql-server/bulk-inserts-via-tsql-in-sql-server/](http://www.simple-talk.com/sql/learn-sql-server/bulk-inserts-via-tsql-in-sql-server/)

我们只是锁定表并最少记录事务。

# ajax - 在 Aviarc 屏幕中设置 AJAX 工作流响应处理程序的正确方法是什么？

> ID：12344345
> 
> 赞同：1
> 
> 时间：2012-09-10T01:15:48.840
> 
> 标签：ajax, handler, response, aviarc

假设我有这样的屏幕：

```
<screen>
    <button label="Foo" name="foo-button"/>

    <action:behaviors>
        <action:when widget-event="foo-button.onClick">
            <action:call-ajax-workflow name="ajax/do-lots-of-foo"/>
            <!-- (1) -->
            <action:call-ajax-workflow name="ajax/do-less-foo"/>
            <!-- (2) -->
        </action:when>

        <action:when system-event="onAjaxRequestCompleted">
            <!-- (3) -->
        </action:when>
    </action:behaviors>
</screen> 
```

为每个 AJAX 请求放置处理程序的正确位置是什么？从理论上讲，我会假设 (1) 或 (2) 都不正确，就好像工作流是真正异步的，那么`ajax/do-less-foo`应该在`ajax/do-lots-of-foo`.

我的直觉是处理位置 (3) 的响应，并根据 的值有条件地执行不同的代码`event-parameters.workflow`。

这个对吗？还是`call-ajax-workflow`实际上是阻塞，而阻塞中的命令`onClick`只是串行执行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T01:49:51.103

目前，call-ajax-workflow 确实会在调用发生时阻止它运行的时间线。它不会阻塞屏幕或任何其他时间线。

在 Aviarc 2 中，您可以从脚本调用 ajax 工作流以使其非阻塞。我不确定在 Aviarc 3 中是否仍然可以轻松访问此功能（大概是这样）。

处理程序当前应该被内联放置，以便它们在它们正在处理的代码旁边，或者，如果一个处理程序应该处理多个调用，它应该被放入一个操作块中，并将对所述操作块的调用作为内联处理程序。

onAjaxRequestCompleted 事件只有在需要在 ajax 调用返回时不加选择地完成时才应该绑定。

如果命令曾经更改为（可能）非阻塞，或者如果添加了非阻塞的附加命令，等等，我希望处理程序可以作为命令的子元素添加。

# javascript - 如何使用 Underscore 和 Backbone 在 HTML 中表示模型属性

> ID：12344349
> 
> 赞同：0
> 
> 时间：2012-09-10T01:16:49.093
> 
> 标签：javascript, backbone.js, coffeescript, underscore.js

我有一个显示框内框的应用程序。每个盒子模型都有一个方法“children”，它返回盒子中显示的任何盒子。我想要做的是单击一个按钮并将子项呈现为一个表格，其属性列在几列中。

我不确定该怎么做。我认为下划线模板可能看起来像这样：

```
<table class='list-items-template'>
          <tr>
          <td><%= this.model.ITSCHILDX.get('image') %>       </td>
          <td><%= this.model.ITSCHILDX.get('title') %>       </td>
          <td><%= this.model.ITSCHILDX.get('description') %> </td>
          </tr>
      </table> 
```

但是在 Box 视图中，我需要某种方式来说明每个子项都应该插入到表中，并且应该表示它的每个属性。**非常**感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T04:39:20.560

您可以通过在模板中插入代码块来将迭代逻辑添加到模板中。要修改您的示例：

```
<table class='list-items-template'>
    <% for (var idx in this.model.ITSCHILDX) { %>
        <tr>
            <td><%= this.model.ITSCHILDX[idx].get('image') %></td>    
            <td><%= this.model.ITSCHILDX[idx].get('title') %></td>    
            <td><%= this.model.ITSCHILDX[idx].get('description') %></td>    
        </tr>
    <% } %>
</table> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T04:12:06.810

不确定我是否正确理解了设置，但您有一个 BoxModel。

```
BoxModel = Backbone.Model.extend({
    defaults: {
        'image':string,
        'title':string,
        'description':string
    }
}); 
```

BoxModel 可以包含子 BoxModel 吗？

```
boxModel.children = new Collection(); // of box models? 
```

并且您想遍历子集合并将每个模型表示为表格行？

如果这是你想要的，这就是我会做的。盒子模型由 BoxView 表示，它是一个表，它的子项本质上表示为行。所以我们将其定义为：

```
BoxView = Backbone.View.extend({
    tagName: 'table',
    className: 'list-items-template', // I just used this name to connect it with your ex.
                                      // I'd probably change it to like, box-table
    template: _.template('<tr>
        <td><%= image %>       </td>
        <td><%= title %>       </td>
        <td><%= description %> </td>
        </tr>'),
    initialize: function() {
        // Note: We've passed in a box model and a box model has a property called
        // children that is a collection of other box models
        this.box = this.model;
        this.collection = this.box.children // Important! Assumes collection exists.
    },
    render: function() {
        this.$el.html(this.addAllRows());
        return this;
    },
    addAllRows: function() {
        var that = this;
        var rows = '';
        this.collection.each(function(box) {
            rows += that.template(box.toJSON());
        });
        return rows;
    }
});

// This assumes that whatever BoxModel you have instantiated, it has a property called
// children that is a collection of other BoxModels. We pass this in.

// Get the party started
var myBoxTable = new BoxView({
    'model': someBoxModel  // Your box model, it has a collection of children boxModels
});

// Throw it into your page wherever.
$('#placeToInsert').html(myBoxTable.render.el()); 
```

另请注意，这基本上意味着您的孩子 boxModel 在此示例中以视觉方式表示。如果每个子（行）都必须有一些功能，而不是仅仅使用模板来写出视觉表示，我会使用该`addAllRows()`方法来实例化第二种类型的 BoxModel 视图。作为表格行的视图，具有更多功能，例如正确委派的事件。

# vb.net - 在绑定的组合框中搜索用户输入

> ID：12344351
> 
> 赞同：1
> 
> 时间：2012-09-10T01:17:03.907
> 
> 标签：vb.net, data-binding, combobox, datarow, late-binding

好的绅士们，

我试图在 vb.net 组合框中搜索项目。组合框已绑定到数据集。显示成员设置为仅显示所选记录的单列。我最初设置了它，因此组合中显示的对象是自定义类。在这个类中，我指定了我想要跟踪的所有属性，并且看起来效果很好。但是，现在我在其绑定状态下使用组合框，操作数据要困难得多。

任务：要让用户键入一个数字，如果该数字包含在 ComboBox 中，那么组合框应该移动到该记录，以便绑定到该控件的所有其他项目也将更新。

研究：我研究了 System.Windows.Forms.BingingManagerBase 类，它似乎有我需要的信息。我只是无法弄清楚这与我正在尝试做的事情之间的桥梁。我想把一些东西放在一起，所以我尝试简单地对数据集进行 SQL 搜索，以查找组合框中的文本。不幸的是，这需要后期绑定，而我的 .Net 紧凑框架的目标版本不支持。

这是我尝试的后期绑定的示例。（我正在使用 VB.net 2005，Compact Framework 3.5 我相信：

```
For i as integer = 0 to combobox.items.count - 1 

    dim Dsr as Dataset.Row  
    dim dv as dataview

    Dsr = DirectCase(Dv.row, Dataset.Row) 

    If Dsr(i).DesiredColumn = DesiredRow.Desiredcolumn then 
    'Do such and such code
    End If 

Next 
```

我希望能够在数据集中搜索与查询匹配的特定记录。在找到与查询匹配的行后，我希望能够将组合框移动到 SQL 查询中找到的行。主要问题似乎是 Combo 在 Datarowviews 中工作，而我的数据集主要转换为与 DS 有关的行。

任何人对此有一些见解，将不胜感激。

再次感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T02:13:02.053

```
For i As Integer = 0 To ComboBox.Items.Count - 1
                Dim drv As System.Data.DataRowView = Nothing
                Dim desiredColumn As String = String.Empty

                drv = DirectCast(ComboBox.Items.Item(i), DataRowView)
                desiredColumn = Convert.ToString(drv("Tag"))

                Debug.WriteLine(desiredColumn)
            Next 
```

这似乎找到了组合框中每条记录的列值，使我能够找到我正在搜索的文本的正确索引。就像我说的那样，如果我能找到一种方法来搜索组合框中的项目列表而不必解决每个项目，我将不胜感激。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T15:05:40.840

如果您知道应在组合框中设置为选中的项目，则只需设置[ComboBox.SelectedItem 属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.combobox.selecteditem%28v=vs.80%29)

如果您确实确实需要遍历绑定到组合框的所有项目，那么一旦您到达正确的项目，您就可以设置[ComboBox.SelectedIndex 属性](http://msdn.microsoft.com/en-US/library/system.windows.forms.combobox.selectedindex%28v=vs.80%29)。

# ruby - 你如何存根发生在 File.open 块内的 file.read？

> ID：12344356
> 
> 赞同：8
> 
> 时间：2012-09-10T01:18:24.960
> 
> 标签：ruby, rspec

如何存根 file.read 调用，以便它返回我想要的内容？以下不起作用：

```
def write_something
  File.open('file.txt') do |f|
    return contents = f.read
  end
end
# rspec
describe 'stub .read' do
  it 'should work' do
    File.stub(:read) { 'stubbed read' }
    write_something.should == 'stubbed read'
  end
end 
```

看起来存根被应用于`File`类，而不是我的块内的文件实例。所以按预期`File.read`返回。`stubbed read`但是当我运行我的规范时它失败了。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-10T01:29:20.457

我应该注意到这`File.open`只是 Ruby 非常大的 I/O API 的一部分，因此您的测试很可能与您的实现紧密耦合，并且不太可能在大量重构中幸存下来。此外，必须小心“全局”模拟（即常量或所有实例），因为它可能会无意中模拟其他地方的用法，从而导致令人困惑的错误和失败。

**与其模拟，不如考虑在磁盘上创建一个实际文件（使用[`Tempfile`](https://ruby-doc.org/stdlib/libdoc/tempfile/rdoc/Tempfile.html)）或使用更广泛的 I/O 模拟库（例如[FakeFS](https://rubygems.org/gems/fakefs)）。**

如果您仍然希望使用模拟，您可以稍微安全地存根`File.open`以产生双精度（并且仅在使用正确参数调用时）：

```
file = instance_double(File, read: 'stubbed read')
allow(File).to receive(:open).and_call_original
allow(File).to receive(:open).with('file.txt') { |&block| block.call(file) } 
```

或者，有点危险，存根所有实例：

```
allow_any_instance_of(File).to receive(:read).and_return('stubbed read') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-26T21:17:20.227

重点是要`File.open`返回一个对象，该对象将响应`read`您想要的内容，这是代码：

```
 it "how to mock ruby File.open with rspec 3.4" do
      filename = 'somefile.txt'
      content = "this would be the content of the file"
      # this is how to mock File.open:
      allow(File).to receive(:open).with(filename, 'r').and_yield( StringIO.new(content) )
      # you can have more then one of this allow

      # simple test to see that StringIO responds to read()
      expect(StringIO.new(content).read).to eq(content)

      result = ""
      File.open('somefile.txt', 'r') { |f| result = f.read }
      expect(result).to eq(content)
    end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-12T16:01:28.267

我就是这样做的

```
 describe 'write_something' do
      it 'should work' do  
        file_double = instance_double('File')
        expect(File).to receive(:open).with('file.txt').and_yield(file_double)
        expect(file_double).to receive(:read).and_return('file content')
        content = write_something
        expect(content).to eq('file content')
      end
    end 
```

# windows-8 - Metro / WinRT UI async void 事件处理程序未调用未处理的异常处理程序

> ID：12344357
> 
> 赞同：13
> 
> 时间：2012-09-10T01:18:31.567
> 
> 标签：windows-8, microsoft-metro, windows-runtime, async-await, c#-5.0

将以下内容视为从 Windows 8 Metro / WinRT 应用程序中提取的内容，这些内容已减少到显示异常所需的最低限度：

```
public class App : Application
{
    public App()
    {
        UnhandledException += (sender, e) => e.Handled = true;
    }
}

public class MainPage : Page
{
    private void Button_Click_1(object sender, RoutedEventArgs e)
    {
        throw new NotSupportedException();
    }

    private async void Button_Click_2(object sender, RoutedEventArgs e)
    {
        throw new NotSupportedException();
    }
} 
```

因此，给定一个带有两个按钮及其 click 事件处理程序的 Metro UI，唯一的区别是第二个事件处理程序被标记为`async`.

然后单击每个按钮，我希望在**这两种**情况下都会调用 UnhandledException 处理程序，因为它们（应该）都通过 UI 线程和关联的同步上下文输入。我的理解是，对于`async void`方法，任何异常都应该被捕获并通过初始同步上下文“重新抛出”（保留原始堆栈跟踪），这在[Async / Await FAQ](http://blogs.msdn.com/b/pfxteam/archive/2012/04/12/10293335.aspx)中也有明确说明。

**但是在这种情况下没有**调用UnhandledException 处理程序`async`，所以应用程序崩溃了！由于这挑战了我认为非常直观的模型，我需要知道为什么！是的，我知道我可以将处理程序的主体包装在 a 中`try { } catch { }`，但我的问题是为什么不调用 backstop UnhandledException 处理程序？

为了进一步强调为什么这没有意义，请考虑以下来自 WPF 应用程序的几乎相同的摘录，也使用 async / await 并以 .NET Framework 4.5 为目标：

```
public class App : Application
{
    public App()
    {
        DispatcherUnhandledException += (sender, e) => e.Handled = true;
    }
}

public class MainWindow : Window
{
    private void Button_Click_1(object sender, RoutedEventArgs e)
    {
        throw new NotSupportedException();
    }

    private async void Button_Click_2(object sender, RoutedEventArgs e)
    {
        throw new NotSupportedException();
    }
} 
```

[WPF既有Application DispatcherUnhandledException事件处理程序也有AppDomain UnhandledException事件处理程序的细微差别，但只能在DispatcherUnhandledException中将异常标记为“已处理”，这与Metro/WinRT Application UnhandledException事件处理程序一致以上。]

然后单击每个按钮，DispatcherUnhandledException 处理程序确实在**两种**情况下都被调用，正如预期的那样，应用程序不会**崩溃**。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T16:15:14.057

在这里回答：[异步事件回调没有触发 UnhandledException](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/bea154b0-08b0-4fdc-be31-058d9f5d1c4e)

这是 WinRT 的一个已知限制。希望它在下一次更新中得到修复。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-09-05T02:33:24.053

以下帖子中的解决方案对我有用，但有一个小改动：我不得不移动 AsyncSynchronizationContext.Register(); 到 App.OnLaunched 事件

[http://www.markermetro.com/2013/01/technical/handling-unhandled-exceptions-with-asyncawait-on-windows-8-and-windows-phone-8/](http://www.markermetro.com/2013/01/technical/handling-unhandled-exceptions-with-asyncawait-on-windows-8-and-windows-phone-8/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-07T08:56:29.987

如文档中所述（来源：http: [//msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.application.unhandledexception.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.application.unhandledexception.aspx)）：

> 了解 Application.UnhandledException 事件的几个限制非常重要。此事件仅用于 XAML 框架遇到的异常。未连接到 XAML 框架的其他 Windows 运行时组件或应用程序部分遇到的异常不会导致引发此事件。
> 
> 例如，如果一个不同的 Windows 组件调用了应用程序代码并且抛出了一个异常但未被捕获，则不会引发 UnhandledException 事件。如果应用程序创建一个工作线程，然后在该工作线程上引发异常，则不会引发 UnhandledException 事件。

[正如此对话](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/bea154b0-08b0-4fdc-be31-058d9f5d1c4e)中所指出的，**检索工作线程中发生的异常的唯一方法是将它们包装在 try/catch 块**中。因此，这是我在我的应用程序中使用的解决方法：我没有使用`Task.Run`或等效项在 UI 的工作线程上执行代码，而是使用此方法：

```
/// <summary>
/// Runs code in a worker thread and retrieves a related exception if any.
/// </summary>
/// <param name="target">The target.</param>
/// <param name="action">The action.</param>
public static void SafeRun(this DependencyObject target, Action action)
{
    Task task = ThreadPool.RunAsync(o =>
    {
        try
        {
            action();
        }
        catch (Exception ex)
        {
            /* Call the same error logging logic as in the UnhandledException event handler here. */
        }
    }).AsTask();
    task.Wait();
} 
```

底线是要记录应用程序中的所有错误，您应该：

1.  订阅*UnhandledException*事件以获取 XAML 堆栈相关的错误，
2.  将工作线程中发生的操作包装在 try/catch 块中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-07T14:15:37.750

从我的角度来看，唯一正确的答案在这里被否决（尝试 TaskScheduler 的 UnobservedTaskException 事件）

问题是您正在使用无法处理异常的“async void”。这不是 WinRT 的限制，而是异步的设计行为。您需要深入了解 async 才能在此处正确实现异常处理。请参阅这篇文章：http: [//msdn.microsoft.com/en-us/magazine/jj991977.aspx](http://msdn.microsoft.com/en-us/magazine/jj991977.aspx)

当 GC 收集未观察到的任务时，将重新引发异常。您可以通过注册 TaskScheduler UnobservedTaskException 事件来获取它们。注意 - 异常到达那里需要一些时间，因为垃圾收集器会记录它。

通常不使用'async void'，但在 UI 事件处理程序中你必须使用，所以这是你唯一的方法..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-25T11:24:49.897

这个问题很老了；尽管如此，一个类似的问题现在困扰着我的 UWP 应用程序。有时我必须通过允许异常向上传播来展开调用堆栈。我需要异常才能到达应用程序的`UnhandledException`处理程序，但这并不总是发生。此问题包括在非 UI 线程上抛出的明显情况。它还包括一个不明显的案例，我尚未确定其因果关系，即抛出 UI 线程。

我想出了以下解决方案。我捕获异常，然后将其显式发布到同步上下文。由于前面提到的奇怪问题，即使*已经在当前同步上下文上运行*，我也必须这样做。否则，异常有时不会到达`UnhandledException`处理程序。

```
private void Throw( Exception exception )
{
    uiContext.Post( arg => throw exception, null );
    throw new OperationCanceledException();
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-20T20:21:26.513

尝试 TaskScheduler 的 UnobservedTaskException 事件

# c# - 使 AvalonEdit MVVM 兼容

> ID：12344367
> 
> 赞同：18
> 
> 时间：2012-09-10T01:21:00.080
> 
> 标签：c#, .net, wpf, mvvm, avalonedit

我正在尝试使 Avalon MVVM 在我的 WPF 应用程序中兼容。通过谷歌搜索，我发现[AvalonEdit 对 MVVM 不友好](http://community.sharpdevelop.net/forums/t/11587.aspx)，我需要通过创建从 TextEditor 派生的类然后添加必要的依赖属性来导出 AvalonEdit 的状态。恐怕我在 Herr Grunwald 的回答中迷失[了](http://community.sharpdevelop.net/forums/t/11587.aspx)：

> 如果您确实需要使用 MVVM 导出编辑器的状态，那么我建议您创建一个派生自 TextEditor 的类，该类添加必要的依赖属性并将它们与 AvalonEdit 中的实际属性同步。

有没有人有一个例子或有关于如何实现这一目标的好建议？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-13T05:11:03.043

Herr Grunwald 正在谈论`TextEditor`使用[依赖属性](http://msdn.microsoft.com/en-us/library/ms752914.aspx)包装属性，以便您可以绑定到它们。基本思想是这样的（例如使用*CaretOffset*属性）：

## 修改后的 TextEditor 类

```
public class MvvmTextEditor : TextEditor, INotifyPropertyChanged
{
    public static DependencyProperty CaretOffsetProperty = 
        DependencyProperty.Register("CaretOffset", typeof(int), typeof(MvvmTextEditor),
        // binding changed callback: set value of underlying property
        new PropertyMetadata((obj, args) =>
        {
            MvvmTextEditor target = (MvvmTextEditor)obj;
            target.CaretOffset = (int)args.NewValue;
        })
    );

    public new string Text
    {
        get { return base.Text; }
        set { base.Text = value; }
    }

    public new int CaretOffset
    {
        get { return base.CaretOffset; }
        set { base.CaretOffset = value; }
    }

    public int Length { get { return base.Text.Length; } }

    protected override void OnTextChanged(EventArgs e)
    {
        RaisePropertyChanged("Length");
        base.OnTextChanged(e);
    }

    public event PropertyChangedEventHandler PropertyChanged;
    public void RaisePropertyChanged(string info)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(info));
        }
    }
} 
```

既然`CaretOffset`已经包装在 DependencyProperty 中，您可以将其绑定到一个属性，例如`Offset`在您的视图模型中。为了说明，将`Slider`控件的值绑定到相同的 View Model 属性`Offset`，并看到当您移动 Slider 时，Avalon 编辑器的光标位置会更新：

## 测试 XAML

```
<Window x:Class="AvalonDemo.TestWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:avalonEdit="http://icsharpcode.net/sharpdevelop/avalonedit"
    xmlns:avalonExt="clr-namespace:WpfTest.AvalonExt"
    DataContext="{Binding RelativeSource={RelativeSource Self},Path=ViewModel}">
  <StackPanel>
    <avalonExt:MvvmTextEditor Text="Hello World" CaretOffset="{Binding Offset}" x:Name="editor" />
    <Slider Minimum="0" Maximum="{Binding ElementName=editor,Path=Length,Mode=OneWay}" 
        Value="{Binding Offset}" />
    <TextBlock Text="{Binding Path=Offset,StringFormat='Caret Position is {0}'}" />
    <TextBlock Text="{Binding Path=Length,ElementName=editor,StringFormat='Length is {0}'}" />
  </StackPanel>
</Window> 
```

## 测试代码隐藏

```
namespace AvalonDemo
{
    public partial class TestWindow : Window
    {
        public AvalonTestModel ViewModel { get; set; }

        public TestWindow()
        {
            ViewModel = new AvalonTestModel();
            InitializeComponent();
        }
    }
} 
```

## 测试视图模型

```
public class AvalonTestModel : INotifyPropertyChanged
{
    private int _offset;

    public int Offset 
    { 
        get { return _offset; } 
        set 
        { 
            _offset = value; 
            RaisePropertyChanged("Offset"); 
        } 
    }

    public event PropertyChangedEventHandler PropertyChanged;
    public void RaisePropertyChanged(string info)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(info));
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-12T20:08:53.707

您可以使用编辑器中的 Document 属性并将其绑定到 ViewModel 的属性。

这是视图的代码：

```
<Window x:Class="AvalonEditIntegration.UI.View"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:AvalonEdit="clr-namespace:ICSharpCode.AvalonEdit;assembly=ICSharpCode.AvalonEdit"
        Title="Window1"
        WindowStartupLocation="CenterScreen"
        Width="500"
        Height="500">
    <DockPanel>
        <Button Content="Show code"
                Command="{Binding ShowCode}"
                Height="50"
                DockPanel.Dock="Bottom" />
        <AvalonEdit:TextEditor ShowLineNumbers="True"
                               Document="{Binding Path=Document}"
                               FontFamily="Consolas"
                               FontSize="10pt" />
    </DockPanel>
</Window> 
```

以及 ViewModel 的代码：

```
namespace AvalonEditIntegration.UI
{
    using System.Windows;
    using System.Windows.Input;
    using ICSharpCode.AvalonEdit.Document;

    public class ViewModel
    {
        public ViewModel()
        {
            ShowCode = new DelegatingCommand(Show);
            Document = new TextDocument();
        }

        public ICommand ShowCode { get; private set; }
        public TextDocument Document { get; set; }

        private void Show()
        {
            MessageBox.Show(Document.Text);
        }
    }
} 
```

来源：[博客 nawrem.reverse](http://nawrem.blogspot.com/2010/07/avalonedit-in-wpf-application-with-mvvm.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-05T10:20:39.217

不确定这是否符合您的需求，但我找到了一种方法来访问*ViewModel上**TextEditor*的所有“重要”组件，同时将其显示在 View 上，但仍在探索可能性。

 *我所做的不是在 View 上实例化*TextEditor*然后绑定我需要的许多属性，而是创建了一个 Content Control 并将其内容绑定到我在*ViewModel中创建的**TextEditor*实例。

 ****看法：***

```
<ContentControl Content="{Binding AvalonEditor}" /> 
```

***视图模型：***

```
using ICSharpCode.AvalonEdit;
using ICSharpCode.AvalonEdit.Document;
using ICSharpCode.AvalonEdit.Highlighting;
// ...
private TextEditor m_AvalonEditor = new TextEditor();
public TextEditor AvalonEditor => m_AvalonEditor; 
```

***在 ViewModel 中测试代码（有效！）***

```
// tests with the main component
m_AvalonEditor.SyntaxHighlighting = HighlightingManager.Instance.GetDefinition("XML");
m_AvalonEditor.ShowLineNumbers = true;
m_AvalonEditor.Load(@"C:\testfile.xml");

// test with Options
m_AvalonEditor.Options.HighlightCurrentLine = true;

// test with Text Area
m_AvalonEditor.TextArea.Opacity = 0.5;

// test with Document
m_AvalonEditor.Document.Text += "bla"; 
```

目前我仍在决定我需要我的应用程序来配置/使用 textEditor 做什么，但从这些测试来看，我似乎可以在保持 MVVM 方法的同时更改它的任何属性。**

# cmake - 在 CMake 中自动使用目录作为项目名称

> ID：12344368
> 
> 赞同：21
> 
> 时间：2012-09-10T01:21:50.580
> 
> 标签：cmake

我在使用 CMake 管理我的构建系统方面还很陌生，所以如果我很愚蠢并且这是一个坏主意，请告诉我。

我希望能够设置我的 cmakelists.txt 文件，这样当我这样做时

```
project( ... ) 
```

目录名称自动成为项目名称。我想这样做是因为我发现能够将一个项目的整个目录复制为另一个项目的起点很方便。但是，尽管我总是将目录重命名为有意义的名称，但我经常忘记更改`project(name)`cmakelists.txt 文件的行，然后我最终会在我的构建环境中打开多个同名的项目，这会让人感到困惑。

理想情况下，如果目录名称中有空格，它们将被下划线替换。

CMake 可以做到这一点吗？由于某种原因我没有看到，这是一个坏主意吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-10T03:28:30.447

您可以通过将以下内容添加到 CMakeLists.txt 的开头来实现此目的：

```
get_filename_component(ProjectId ${CMAKE_CURRENT_SOURCE_DIR} NAME)
string(REPLACE " " "_" ProjectId ${ProjectId})
project(${ProjectId}) 
```

我认为对一次性项目执行此操作没有问题，尽管我猜生产项目通常会有一个预定义的名称，该名称将在`project`命令中显式设置。

当您提到您“复制一个项目的整个目录作为另一个项目的起点”时，我假设您在复制时不包括构建树？CMake[并不能真正处理正在移动的构建树](http://www.cmake.org/cmake/help/v2.8.9/cmake.html#variable:CMAKE_USE_RELATIVE_PATHS)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-04-24T12:51:01.897

我认为 CMAKE_CURRENT_LIST_DIR 更适合这种情况

```
get_filename_component(ProjectId ${CMAKE_CURRENT_LIST_DIR} NAME)
string(REPLACE " " "_" ProjectId ${ProjectId})
project(${ProjectId} C CXX) 
```

# asp.net-mvc-3 - 使用 MVC Razor 实施电子商务分析

> ID：12344369
> 
> 赞同：1
> 
> 时间：2012-09-10T01:22:07.600
> 
> 标签：asp.net-mvc-3, razor, google-analytics, e-commerce, analytics

我正在 MVC3 站点（Google、Coremetrics）中实现各种分析跟踪服务，并研究考虑到以下详细信息，自定义 HTML 帮助程序或部分视图是否会更好地工作：

-代码运行多个站点并且需要业务逻辑来更改分析服务帐户 ID。
- 该类必须接受带有订单详细信息的对象才能呈现适当的标签。
- 代码必须知道正在呈现哪个视图。

我正在研究的解决方案包括一个 HTML 帮助器基类，它接受所需的对象并由每个提供者的单独 HTML 帮助器继承。这些助手将使用通用布局。是否有更好的方法在 MVC 上实现分析，并且由于需要业务逻辑，部分视图是否更适合？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T12:44:13.397

GA 分析跟踪代码非常简单，我们也使用 ASP.NET MVC3，但只是将必要的代码直接放入我们的“订单完成”视图中。

不过，没有理由不能使用 HTML 帮助程序。我建议不要让你的对象模型过于复杂。只需使用具有与 JavaScript 中使用的参数匹配的参数的单个帮助器。

您应该能够找到电子商务跟踪代码的示例，根据需要添加参数，完成。您可能希望创建另一个重载，从 web.config 中提取 GA ID 和域名，如示例中一样，但仍接受订单详细信息作为参数。

# ruby-on-rails - 将多个选定参数传递到提交链接

> ID：12344370
> 
> 赞同：1
> 
> 时间：2012-09-10T01:23:16.120
> 
> 标签：ruby-on-rails, ruby

我有一个尝试自动提交到后端的设置。有 3 个不同的下拉框，带有用户可选择的参数。我这样设置我的网站（所有“脚手架”）：

```
class Xsearch < ActiveRecord::Base
  has_many :xentry
  has_many :spectrafile
  has_many :parameter
end 
```

每个条目/文件/参数在其模型中都有 belongs_to :xsearch。

xsearch 的 index.html.erb 有以下内容：

```
<h1>Spectra Submitter</h1>
<h2>Select a database to search</h2>
<%= collection_select("xpost", :id, Xentry.all(), :title, :name ) %>
<h2>Select a parameter file to use</h2>
<%= collection_select(:ppost, :id, Parameter.all(), :name, :name ) %>
<h2>Select a Spectra file (or folder) to search</h2>
<%= collection_select(:spost, :id, Spectrafile.all(), :name, :name ) %>
<%= link_to "Search", :controller => "xsearches", :action => "search" %> 
```

我也尝试过使用 submit_tag 。我不知道如何在我的控制器中触发一个方法（如果它应该在控制器中？因为它来自我假设把它放在这里的浏览器），它具有来自每个 collection_select 的选定值。

简而言之：如何获取每个 collection_select 的选定值并将它们传递给函数？该函数应该放在哪里（在控制器或 .html.erb 文件中）？

谢谢，这让我发疯了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T18:24:49.067

我最终通过使用 form_new 方法解决了这个问题。这是我的代码，供其他正在搜索的人使用。此脚本的目的是允许其他用户通过授权用户向集群提交搜索。

```
<%= form_for(@xsearch) do |f| %>
  <% if @xsearch.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@xsearch.errors.count, "error") %> prohibited this xsearch from being saved:</h2>

      <ul>
      <% @xsearch.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>
    <div class="field">
      <h2>Pick A Database To Search</h2>
      <%= collection_select(:db, :id, @all_entries, :id, :name) %>
      <h2>Pick A Parameter File To Use</h2>
      <%= collection_select(:para, :id, @all_parameters, :id, :name) %>
      <h2>Pick a File or Folder To Search</h2>
      <%= collection_select(:sfile, :id, @all_spectrafiles, :id, :name) %>
    </div>

  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

以及控制器的 create: 方法中的相关位

```
def create
  @database = Xentry.find(params[:db][:id])
  @paramfile = Parameter.find(params[:para][:id])
  @spectrafile = Spectrafile.find(params[:sfile][:id])
  @recurse = params[:recurse]
  @email = params[:emailtag]
  if @email.empty?
    @email = "None"
  end
  if (@recurse == 'Yes')
    @recurse = 1
  else
    @recurse = 0
  end
  @recurse = 0#disabled until kill methods are implemented
  @hostname = hostname
  @username = username
  Net::SSH.start(@hostname, @username) do |session|
    session.exec('source .bashrc')
    session.exec('sh rscript.sh %s %s %s %s %d' % [@database['name'], @spectrafile['name'], @paramfile['name'], @email, @recurse])
    @xsearch = Xsearch.new(:database => @database['name'], :parameters => @paramfile['name'], :spectra => @spectrafile['name'])
    respond_to do |format|
      if @xsearch.save
        format.html { redirect_to @xsearch, notice: 'Search was successfully created.' }
        format.json { render json: @xsearch, status: :created, location: @xsearch }
      else
        format.html { render action: "new" }
        format.json { render json: @xsearch.errors, status: :unprocessable_entity }
      end
    end
  end
end 
```

# r - 当一个实例运行外部程序时，多个 R 实例的稳定性如何？

> ID：12344371
> 
> 赞同：7
> 
> 时间：2012-09-10T01:23:55.587
> 
> 标签：r, multiple-instances

我正在通过 R 运行一个外部程序，该程序非常消耗内存，并且可能需要超过 8 小时才能运行。我想打开另一个 R 实例来执行其他任务，但我担心外部程序崩溃并不得不重新启动进程。在这种情况下，我应该预料到会出现什么问题吗？外部程序只是寡妇，我在 MacBook Pro 的 Bootcamp 分区上运行它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-10T01:32:37.133

在适当的操作系统上，两个实例都是独立的，不会相互干扰。（除非他们竞争相同的资源，否则您的描述似乎并非如此。）

这与在服务器上运行多个用户并且每个用户运行一个或两个实例没有什么不同......

# bayesian - 具有零标准偏差的概率密度函数

> ID：12344375
> 
> 赞同：1
> 
> 时间：2012-09-10T01:25:12.450
> 
> 标签：bayesian, gaussian, normal-distribution, standard-deviation

我现在正在使用朴素贝叶斯算法实现一个电子邮件过滤应用程序。我的应用程序使用来自 UCI 机器学习存储库的 Spambase 数据集。由于属性是连续的，我使用概率密度函数 (PDF) 计算概率。但是，当我使用 k 折交叉验证评估数据时，训练集的其中一个属性可能只包含 0。出于这个原因，我得到了 0 标准差，PDF 返回 NaN，这导致大量垃圾邮件没有正确分类到该训练集。我应该怎么做才能解决问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T01:37:22.940

您可以使用离散的 PDF，它总是有界的。

或者，只需忽略任何方差为零的属性。包含零方差的分布是没有意义的，因为它们实际上*不会做*任何事情。例如，你想知道我的年龄，然后我告诉你我生活在地球上。这不应该改变您的估计，因为您拥有的每一条数据都是针对地球上的人们的。

# iphone - 无法使用带有可可错误 4 的 copyItemAtPath 复制数据库文件

> ID：12344377
> 
> 赞同：2
> 
> 时间：2012-09-10T01:25:22.950
> 
> 标签：iphone, file-manager

我想将数据库文件从捆绑包复制到用户文档。

我的代码如下：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentationDirectory, NSUserDomainMask, YES);
NSString *documentsDir = [paths objectAtIndex:0];
NSString *userPath = [documentsDir stringByAppendingPathComponent:@"db.sql"];

NSString *srcPath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:@"db.sql"];

NSFileManager *fileManager = [NSFileManager defaultManager];

NSLog(@"Bundle database exists: %i",[fileManager fileExistsAtPath:srcPath]);
NSLog(@"User Document folder database exists: %i",[fileManager fileExistsAtPath:userPath]);

BOOL find = [fileManager fileExistsAtPath:userPath];
BOOL copySuccess = FALSE;

NSError *error;

if (!find) {
    NSLog(@"don't have writable copy, need to create one");
    copySuccess = [fileManager copyItemAtPath:srcPath toPath:userPath error:&error];
}

if (!copySuccess) {

    NSLog(@"Failed with message: '%@'.",[error localizedDescription]);
} 
```

结果总是说：

> 捆绑数据库存在：1 用户文档文件夹数据库存在：0
> 没有可写副本，需要创建一个失败并显示消息：'
> 操作无法完成。（可可错误 4.）'。

请建议，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T02:07:07.597

您确定用户文档目录的代码不正确。

使用您的代码，我整理了一个有效的快速而肮脏的示例。对于您的应用程序，您可能希望创建一些包含静态函数“applicationDocumentsDirectory”的实用程序类，以便项目中的其他类可以在需要时调用它。

头文件：

```
#import <UIKit/UIKit.h>

@interface TST_ViewController : UIViewController

+ (NSString *) applicationDocumentsDirectory;

@end 
```

实施文件：

```
#import "TST_ViewController.h"

@interface TST_ViewController ()

@end

@implementation TST_ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    NSString *dbFilename = @"db.sql";
    NSString *userPath = [[TST_ViewController applicationDocumentsDirectory] stringByAppendingPathComponent:dbFilename];
    NSString *srcPath = [[[NSBundle mainBundle] resourcePath] stringByAppendingPathComponent:dbFilename];
    NSFileManager *fileManager = [NSFileManager defaultManager];

    BOOL foundInBundle = [fileManager fileExistsAtPath:srcPath];
    BOOL foundInUserPath = [fileManager fileExistsAtPath:userPath];
    BOOL copySuccess = FALSE;

    NSError *error;

    if(foundInBundle) {

        if (!foundInUserPath) {
            NSLog(@"Don't have a writable copy, so need to create one...");
            copySuccess = [fileManager copyItemAtPath:srcPath toPath:userPath error:&error];
        }

        if (!copySuccess) {
            NSLog(@"Failed with message: '%@'.",[error localizedDescription]);
        }

    } else {
        // handle error in the event the file is not included in the bundle
    }

}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

+ (NSString *) applicationDocumentsDirectory
{
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *basePath = ([paths count] > 0) ? [paths objectAtIndex:0] : nil;
    return basePath;
}

@end 
```

# objective-c - NSMutableURLRequest setHTTPBody 方法使用 SIGABRT 警告使应用程序崩溃

> ID：12344378
> 
> 赞同：0
> 
> 时间：2012-09-10T01:25:23.810
> 
> 标签：objective-c, ios, ios5, nsmutableurlrequest

```
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:@"riderfinder.appspot.com/login"]];
    [request setHTTPMethod:@"POST"];
    [request setValue:@"text/plain" 
   forHTTPHeaderField:@"Content-type"];

    NSString *body = @"username=";
    [body stringByAppendingString:accountEntered];
    [body stringByAppendingString:@"&"];
    [body stringByAppendingString:@"password="];
    [body stringByAppendingString:passwordEntered];

    NSMutableData *data = [[NSMutableData data] initWithString:body];

    //Crashes everything with "SIGABRT" warning/error. Nothing else is said.
    [request setHTTPBody:data]; 
```

如果有人知道出了什么问题，我将不胜感激。我通过 Apple 的调试器将其缩小到导致崩溃的最后一行。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T01:48:41.330

有2个错误：

1.  *正文*没有附加， `[body stringByAppendingString:accountEntered]`应该是`body=[body stringByAppendingString:accountEntered]`

2.  `NSMutableData *data = [[NSMutableData data] initWithString:body];`使用不正确，可以使用`NSData *data=[body dataUsingEncoding:NSUTF8StringEncoding];`

所以我修改了代码：

```
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:@"riderfinder.appspot.com/login"]];
[request setHTTPMethod:@"POST"];
[request setValue:@"text/plain" forHTTPHeaderField:@"Content-type"];

NSString *body = @"username=";
body=[body stringByAppendingString:accountEntered];
body=[body stringByAppendingString:@"&"];
body=[body stringByAppendingString:@"password="];
body=[body stringByAppendingString: passwordEntered];

//NSMutableData *data = [[NSMutableData data] initWithString:body];
NSData *data=[body dataUsingEncoding:NSUTF8StringEncoding];

[request setHTTPBody:data]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T03:08:18.387

首先，你应该让 'accountEntered' 和 'passwordEntered' 不为零。如果你已经这样做了，你应该设置断点来确切地知道哪一行崩溃。通常，“SIGABRT”错误意味着你释放了更多或无法识别的选择器。答案 1 上的代码是正确的。

# javascript - 将项目从列表传递到控制器

> ID：12344384
> 
> 赞同：0
> 
> 时间：2012-09-10T01:26:29.193
> 
> 标签：javascript, html, codeigniter

我有一个如下项目的下拉列表，我想单击将“类”或“继承”等名称发送到我的控制器。

```
<li><a href="#">Pointers</a></li>   
<li><a href="#" class="parent">Classes</a>
 <ul>
  <li><a href="#">Shapes</a></li>
  <li><a href="#">Submenu</a></li>
 </ul>
</li>
<li><a href="#">Inheritance</a></li>
<li><a href="#">Polymorphism</a></li>
<ul> 
```

我的问题是是否应该使用 Javascript，例如：

```
 <li><a href="#" id="someId" onclick="SomeMethod(this);" > Pointers</a> 
```

那么如何在我的函数中检索元素并发送到控制器？

或者我可以使用使用表单操作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T01:44:42.050

```
function SomeMethod(item) {
    var text = item.firstChild.nodeValue;
    ....
    window.location.href = "controller/action/" + text;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T02:14:11.643

不需要javascript...

## HTML：

```
<li><a href="the_controller/the_method/pointers">Pointers</a></li>   
<li><a href="the_controller/the_method/classes" class="parent">Classes</a>
 <ul>
  <li><a href="the_controller/the_method/shapes">Shapes</a></li>
  <li><a href="the_controller/the_method/submenu">Submenu</a></li>
 </ul>
</li>
<li><a href="the_controller/the_method/inheritance">Inheritance</a></li>
<li><a href="the_controller/the_method/polymorphism">Polymorphism</a></li>
<ul> 
```

## 控制器：

```
class The_controller extends CI_Controller{
    function the_method($the_word){
        /*do something with $the_word;*/
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T02:02:39.937

对于给出的示例，通过内联 onclick，它可以使用 innerHTML 工作。

```
<li><a href="#" id="someId" onclick="SomeMethod(this.innerHTML);" > Pointers</a> 
```

# javascript - Bootstrap 响应式导航栏

> ID：12344385
> 
> 赞同：7
> 
> 时间：2012-09-10T01:26:31.730
> 
> 标签：javascript, html, twitter-bootstrap

我可能遗漏了一些非常小的东西，这让我很沮丧，因为我已经坐在这里几个小时了，现在试图解决这个问题。导航栏不会与 Javascript 链接。正确调整窗口大小时会出现该按钮，但单击时不会折叠菜单。

快速查看我的标题中的链接（以防它们的顺序错误）

```
 <link rel="stylesheet" href="/assets/css/bootstrap.css">
<link rel="stylesheet" href="/assets/css/bootstrap-responsive.css">
<link rel="stylesheet" href="/assets/css/style.css?v=2">

<script src="/assets/js/bootstrap.js"></script>
<script src="/assets/js/bootstrap.min.js"></script>
<!-BootStrap--><script src="/assets/js/jquery-1.7.1.min.js"></script>
<script src="/assets/js/jquery.validate.min.js"></script>
<script src="/assets/js/script.js"></script>
<script src="/assets/js/bootstrap-fileupload.js"></script> 
```

快速查看我的 HTML -

```
<div class="navbar navbar-fixed-top">
    <div class="navbar-inner">
    <div class="container">
    <!--<button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">-->
    <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </a>
    <div class="span4">
        <a href="{site_url}" title="People Team">
        <img src="/assets/img/logo.png" alt="People Team Logo" />
        </a>
    </div>
    <nav>
        <div class="nav-collapse">
        <ul class="nav">
        <li{if segment_1 == ""} class="active"{/if}>
            <a href="/" title="Home">Home</a>
        </li>
        <li{if segment_1 == "services"} {/if}>
            <a href="/services" title="Contact People Team">Services</a>
        </li>
        <li{if segment_1 == "about"} {/if}>
            <a href="/about" title="About People Team">About the team</a>
        </li>
        <li{if segment_1 == "contact"} {/if}>
            <a href="/contact" title="Contact People Team">Contact Us</a>
        </li>
        </ul>   
    </div> 
```

我假设 Javascript 位于导航栏工作所需的 Bootstrap.min.js 或 Bootstrap.js 文件中。我快被难住了。任何帮助，将不胜感激。

干杯，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T01:37:50.223

更改 JS 加载的顺序。首先是 jQuery，其次是引导插件。

```
<script src="/assets/js/jquery-1.7.1.min.js"></script>
<script src="/assets/js/bootstrap.js"></script>  -- remove, as it is not really needed when including the minified version
<script src="/assets/js/bootstrap.min.js"></script> 
```

# c# - 如何在安装项目中添加许可证密钥？

> ID：12344391
> 
> 赞同：1
> 
> 时间：2012-09-10T01:28:18.687
> 
> 标签：c#, visual-studio-2010

我正在为我的 Windows 服务制作安装项目。安装时，用户应输入许可证密钥，我需要验证这一点。但是如何设置安装项目以提示输入产品密钥，任何人都可以帮我解决这个问题。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T04:38:06.370

遗憾的是，您不会在 Visual Studio 2012 中找到它，但您可能会在 2008/2010 年找到它。

2 你在看的东西：

(A) 客户信息用户界面[对话框](http://msdn.microsoft.com/en-us/library/8z9h65a3%28VS.80%29.aspx)

(B) [SerialNumberTemplate](http://msdn2.microsoft.com/en-us/library/w3xwh311%28VS.80%29.aspx)属性

# c# - 字典的大小对于应用程序来说太大了？

> ID：12344393
> 
> 赞同：1
> 
> 时间：2012-09-10T01:28:29.420
> 
> 标签：c#, windows-phone-7

我正在编写一个 Windows Phone 应用程序（在 c# 中），其中包含大量数据。

我想将此数据存储在字典中（或者不太理想的数组），但将有大约 10 000 个字典值（分布在 3-4 个字典中）。你觉得这些字典会不会太大，占用太多内存？

字典将是`Dictionary<int, customClass>`

使用数组显然会更好，但是您认为使用字典可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T01:45:59.367

像字典/数组/列表这样的集合中的项目数量并不重要，10w 个整数的成本不到 1M（大约 100,000 * 4bytes）。所以内存成本主要取决于你的`CustomClass`. 如果该类仅包含一些原始属性，那么它也不会占用太多内存。除非您执行诸如将文件数据加载到类的属性中之类的操作，否则您不必担心内存成本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T01:42:14.530

这完全取决于您存储的实际对象的数量......以及这些对象的大小。字典本身只有 32（或 64）位 x 10,000 x 2（键和值）加上一个小的开销 - 即小......因为字典只存储指向您的对象的指针。

# c++ - 避免dynamic_cast缓慢的著名解决方案？

> ID：12344394
> 
> 赞同：5
> 
> 时间：2012-09-10T01:28:33.423
> 
> 标签：c++, performance, dynamic-cast

我需要运行时多态性，所以我使用了`dynamic_cast`.
但是现在我遇到了两个问题——*太慢*`dynamic_cast`了！（向下滚动查看基准。）

 *长话短说，我最终以这种方式解决了这个问题，使用`static_cast`：

```
struct Base
{
    virtual ~Base() { }
    virtual int type_id() const = 0;

    template<class T>
    T *as()
    { return this->type_id() == T::ID ? static_cast<T *>(this) : 0; }

    template<class T>
    T const *as() const
    { return this->type_id() == T::ID ? static_cast<T const *>(this) : 0; }
};

struct Derived : public Base
{
    enum { ID = __COUNTER__ };  // warning: can cause ABI incompatibility
    int type_id() const { return ID; }
};

int main()
{
    Base const &value = Derived();
    Derived const *p = value.as<Derived>();  // "static" dynamic_cast
} 
```

但我肯定不是第一个遇到这个问题的人，所以我认为这可能值得一问：

与其想出像这样的自制解决方案，是否有一个众所周知的模式/库我可以在未来用来解决这个问题？

* * *

### 样本基准

要了解我在说什么，请尝试下面的代码 -`dynamic_cast`大约 比在我的机器上调用慢*15 倍*`virtual`（110 毫秒。对 1620 毫秒。下面的代码）：

```
#include <cstdio>
#include <ctime>

struct Base { virtual unsigned vcalc(unsigned i) const { return i * i + 1; } };
struct Derived1 : public Base 
{ unsigned vcalc(unsigned i) const { return i * i + 2; } };
struct Derived2 : public Derived1
{ unsigned vcalc(unsigned i) const { return i * i + 3; } };

int main()
{
    Base const &foo = Derived2();
    size_t const COUNT = 50000000;
    {
        clock_t start = clock();
        unsigned n = 0;
        for (size_t i = 0; i < COUNT; i++)
            n = foo.vcalc(n);
        printf("virtual call: %d ms (result: %u)\n",
            (int)((clock() - start) * 1000 / CLOCKS_PER_SEC), n);
        fflush(stdout);
    }
    {
        clock_t start = clock();
        unsigned n = 0;
        for (size_t i = 0; i < COUNT; i++)
            n = dynamic_cast<Derived1 const &>(foo).vcalc(n);
        printf("virtual call after dynamic_cast: %d ms (result: %u)\n",
            (int)((clock() - start) * 1000 / CLOCKS_PER_SEC), n);
        fflush(stdout);
    }
    return 0;
} 
```

当我简单地删除单词`virtual`并更改`dynamic_cast`为 时`static_cast`，我得到了 79 毫秒的运行时间——因此虚拟调用仅比静态调用慢约 25%！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T01:48:36.173

的大多数用法`dynamic_cast`可以替换为双重调度（又名[访问者模式](http://en.wikipedia.org/wiki/Visitor_pattern)）。这相当于两个虚拟调用，根据您的基准测试，它仍然比`dynamic_cast`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T01:39:05.370

您可能对这种恒定时间实现感兴趣：http: [//www.stroustrup.com/isorc2008.pdf](http://www.stroustrup.com/isorc2008.pdf)

还要注意，许多向上转换可能会在特定约束下被简化——例如，如果你不使用多重继承，只使用浅继承，或者以其他方式保证该类型没有共同的祖先，一些评估可能会被短路并且穷举`dynamic_cast`不需要执行评估（由 提供）。

像往常一样，针对您的给定用例和实际的类层次结构，针对您的供应商的实现来分析您的实现。*

# c++ - std::bind 没有按预期工作

> ID：12344395
> 
> 赞同：3
> 
> 时间：2012-09-10T01:29:13.423
> 
> 标签：c++, c++11

```
std::vector<int> v1;
std::function<void(const int&)> funct = 
static_cast<std::function<void(const int&)>>(std::bind(
                                            &std::vector<int>::push_back,
                                            &v1,
                                            std::placeholders::_1)); 
```

这给了我`no matching function for call to bind`.

我能够做到这一点：

```
threadPool.push_back(std::thread(runThread<lazyFunct>,
                     std::bind(&LazySkipList<int>::add,
                     &lsl, std::placeholders::_1), 0, 1000000, 1000000)); 
```

我正在使用支持 llvm C++11 的 Xcode 4.4。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-10T01:52:27.933

问题在于`std::vector::push_back()`两种可能的类型签名超载：

```
void push_back(const T& value);
void push_back(T&& value); 
```

因此，`std::bind()`无法推断模板参数。但是，您可以显式声明模板参数：

```
std::bind<void(std::vector<int>::*)(const int&)>(&std::vector<int>::push_back, &v1, std::placeholders::_1); 
```

这可以正确解决。

当然，此时使用 lambda 可能更简单：

```
auto func = [&](int i){ v1.push_back(i); }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T01:52:18.130

尝试：

```
auto funct = std::bind(static_cast<void(std::vector<int>::*)(const int&)>
                                             (&std::vector<int>::push_back),
                                              &v1,
                                              std::placeholders::_1); 
```

`push_back`已重载，因此您需要将其强制转换为适当的重载。

或者：

```
void(std::vector<int>::*p)(const int&) = &std::vector<int>::push_back;
auto funct = std::bind(p, &v1, std::placeholders::_1); 
```

或者显式提供模板参数，如 Keith Ballard 的答案所示，这实际上可能是最好的。

# c - 在 C 中将 int 转换为浮点数（无强制转换）

> ID：12344400
> 
> 赞同：0
> 
> 时间：2012-09-10T01:29:20.450
> 
> 标签：c, floating-point, int, bitwise-operators

如何将 int 转换为浮点数（以无符号返回，但解释为浮点数）？我不能使用任何高级语言结构，如联合、仅按位运算、控制逻辑（if/while）、+ 和 - 等。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T01:52:44.067

当然。您当然可以从原始字节缓冲区构造一个浮点数。单精度`float`s 在 IEEE-754 中表示为 32 位值，可以很容易地表示整数空间。[IEEE 浮点的维基百科条目](http://en.wikipedia.org/wiki/IEEE_float)描述了各种格式。您所要做的就是弄清楚要设置或测试哪些位。查看[关于单精度的维基百科页面以](http://en.wikipedia.org/wiki/Single_precision_floating-point_format)获得对位的详细描述。这是一个开始：

```
float convert_int(unsigned int num) {
    float result;
    unsigned int sign_bit = (num & 0x80000000);
    unsigned int exponent = (num & 0x7F800000) >> 23;
    unsigned int mantissa = (num & /* insert mask value here */);

    /* you can take over from here */

    return result;
} 
```

我留下了很多想象力，但我有一种感觉，这是一个家庭作业问题。一旦你理解了我写的部分，剩下的应该很容易完成。一个更好的解决方案是使用 a `union`，但我也将把它作为*练习留给读者*。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-09-10T11:19:37.413

如果您不想使用任何算术或按位运算符，那么您可以使用一种方法作为

```
 float convrt(int x)
 {
  return x;
 } 
```

它将返回浮点数...您可以在 main 中验证它为..

```
 void main()
 {
   int x=5;
   cout<<"size of x=" << sizeof(x);
   cout<<"size of convrt(x)=" << sizeof(convrt(x));
 } 
```

它将输出为

```
 size of x=2
    size of convrt(x)=4 
```

这意味着它被转换为浮点数。:-)

# mysql - 如何将查询转换为休眠查询语言？

> ID：12344403
> 
> 赞同：0
> 
> 时间：2012-09-10T01:30:02.040
> 
> 标签：mysql, hql

如何用休眠查询语言编写此查询

```
select * from preferred_space p, building b, floor f, space_type st, space s
    where p.user_id=11
    and p.space_id=s.id
    and s.building_id=b.id
    and s.floor_id=f.id
    and s.space_type_id=st.id 
    order by p.id; 
```

如果我这样做，它会向我显示一个错误？

```
 String sql =    "from     PreferredSpace p, Space s, Building b, Floor f, SpaceType st " +
                 "where    p.userId = ? " +
                 "and      p.spaceId = s.id" +
                 "and      s.buildingId = b.id" +
                 "and      s.floorId = f.id" +
                 "and      s.spaceTypeId = st.id" +
                 "order by p.id"; 
```

错误：

```
ERROR o.h.hql.internal.ast.ErrorCounter - line 1:242: unexpected token: s
16:18:17.569 [http-bio-8080-exec-24] ERROR o.h.hql.internal.ast.ErrorCounter - line 1:242: unexpected token: s
antlr.NoViableAltException: unexpected token: s 
```

以“s”开头的每一行都显示相同的错误。也用于“by”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T01:34:23.673

您需要添加空格：

```
String sql = "from     PreferredSpace p, Space s, Building b, Floor f, SpaceType st " +
             "where    p.userId = ? " +
             "and      p.spaceId = s.id " +
             "and      s.buildingId = b.id " +
             "and      s.floorId = f.id " +
             "and      s.spaceTypeId = st.id " +
             "order by p.id"; 
```

# android - Android 访问数据的最佳方式以及如何填充 Sqlite 数据库

> ID：12344405
> 
> 赞同：1
> 
> 时间：2012-09-10T01:30:14.600
> 
> 标签：android, sqlite, parsing, pdf, text

所以，我的数据包含在一个包含 3 列的表中，PDF 中有几百行，此时将每季度更新一次，我不知道它们是否可以以任何其他形式呈现给我。我使用 ZXing 条码扫描仪检查这些数据，看看扫描的 UPC 是否在其中，让用户知道它是否是授权项目。我假设我必须将 PDF 保存为文本，然后以某种方式将此信息导入 SQLite DB，这样我就可以向用户提供该行中包含的所有信息，然后从那里我可以使用这些信息来允许应用程序执行其他事情。不幸的是，当 PDF 保存为文本时，它只是用空格分隔所有内容，所以我看不到将它们导入数据库并将它们分隔到适当列中的简单方法。我是否需要手动进入并添加分隔符，然后解析数据以将其加载到数据库中？还是我看的方式完全错误或根本没有任何意义？

我需要这个灵活的更新，这就是为什么我认为使用 SQLite DB 是最好的方法，并希望我可以在安装应用程序时创建数据库，所以它只会填充一次，直到我用新数据发布更新.

在此先感谢您的帮助，我想我只是想指出正确的方向。

# java - Java EE 应用程序中的样式路径

> ID：12344406
> 
> 赞同：1
> 
> 时间：2012-09-10T01:30:19.340
> 
> 标签：java, html, css, path

我有一个 Java EE 应用程序，在应用程序中我有以下结构。

```
WEB-INF
    layout
        header.jsp
    styles
        main.css 
```

我想`main.css`在`header.jsp`. 我正在尝试执行以下操作（其中 ... 是路径）：

```
<link rel="stylesheet" href="..."> 
```

但是，我似乎无法找到正确的道路。我尝试了以下每一项都没有运气：

```
../styles/main.css
/styles/main.css
styles/main.css
/WEB-INF/styles/main.css
WEB-INF/styles/main.css 
```

什么是正确的路径？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-10T01:47:28.600

首先，`/WEB-INF`如果没有中间（前端控制器）servlet，文件夹中的资源不能直接公开访问（这也包括 JSP 文件本身！`<jsp:include>`在 webserver 上运行，而不是在 webbrowser 上运行）。因此，您必须将 CSS（以及 JS 和图像）文件放在`/WEB-INF`文件夹之外。

```
WebContent
 |-- WEB-INF
 |    `-- layout
 |         `-- header.jsp
 |-- styles
 |    `-- main.css
 : 
```

假设它现在在 中`/styles/main.css`，那么您可以按如下方式引用它：

```
<link rel="stylesheet" type="text/css" href="${pageContext.request.contextPath}/styles/main.css" /> 
```

使用`${pageContext.request.contextPath}`（使用前导斜杠打印当前上下文路径，从而保证 CSS URL 相对于域根目录）本身并不是必需的，但这是您最安全的选择，因为当前请求 URL 是未知的。`<link>`HTML , `<script>`, `<img>`,等元素中的所有相对路径`<a>`都是由网络浏览器相对于当前请求 URL 解析的（正如您在浏览器的地址栏中看到的那样）。只要不清楚您的请求 URL 是什么，我就无法在不使用`${pageContext.request.contextPath}`.

### 也可以看看：

*   [在WEB-INF下移动资源](https://stackoverflow.com/questions/12088103/moving-resources-under-web-inf/12194866#12194866)
*   [调用转发到 JSP 的 Servlet 时，浏览器无法访问/查找相关资源，如 CSS、图像和链接](https://stackoverflow.com/questions/3655316/browser-cant-access-find-relative-resources-like-css-images-and-links-when-cal/3658735#3658735)

# maven - Jersey web-service 使用 maven jetty:run 运行良好，但使用 jetty-runner.jar 返回 HTTP 404

> ID：12344408
> 
> 赞同：2
> 
> 时间：2012-09-10T01:30:33.507
> 
> 标签：maven, heroku, jetty

我在 Jersey 中实现了一个 Web 服务（没有容器或其他任何东西）。当我运行它时`maven jetty:run`，它工作正常，但是当我使用时我得到 HTTP ERROR 404 我[在这里](https://stackoverflow.com/questions/12241989/jetty-runs-correctly-via-maven-but-incorrectly-as-a-jar)`java -jar target/dependency/jetty-runner.jar --port 9090 target/*.war` 检查了一个类似的帖子，但该解决方案对我不起作用。这是我的 pom.xml 的样子：

```
<plugin>
    <groupId>org.mortbay.jetty</groupId>
    <artifactId>maven-jetty-plugin</artifactId>
    <version>6.1.22</version>
    <configuration>
        <connectors>
        <connector implementation="org.mortbay.jetty.nio.SelectChannelConnector">
            <port>9090</port>
            <maxIdleTime>60000</maxIdleTime>
        </connector>
        </connectors>
        <jetty-config>jetty.xml</jetty-config>
    </configuration>
</plugin>
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-dependency-plugin</artifactId>
    <version>2.3</version>
    <executions>
        <execution>
            <phase>package</phase>
            <goals><goal>copy</goal></goals>
            <configuration>
                <artifactItems>
                    <artifactItem>
                        <groupId>org.mortbay.jetty</groupId>
                        <artifactId>jetty-runner</artifactId>
                        <version>8.1.6.v20120903</version>
                        <destFileName>jetty-runner.jar</destFileName
                    </artifactItem>
                </artifactItems>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

我将不胜感激任何提示来解决我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-29T00:12:54.860

问题是我的项目的 artifactId 是 XXX。当我使用 mvn jetty:run 时，url 看起来像这样：`localhost:9090/XXX/path/to/service`。它没有通过调用返回任何东西：`localhost:9090/path/to/service`。但是，当我将其更改为 时`java -jar target/dependency/jetty-runner.jar --port 9090 target/*.war`，该 url 应该是`localhost:9090/path/to/service`而不是另一个 ( `localhost:9090/XXX/path/to/service`)。

我不知道是什么导致了这个设置，但至少我可以让它工作。

# c# - 从外部类调用调度程序到主窗口不起作用

> ID：12344412
> 
> 赞同：0
> 
> 时间：2012-09-10T01:31:18.063
> 
> 标签：c#, wpf, multithreading, dispatcher

```
 private void button1_Click(object sender, RoutedEventArgs e)
    {
        new Thread(delegate() { doTest(); }).Start();
    } 
```

当主窗口中包含 doTest() 时，如下所示，我的文本框正在从线程更新，我可以看到文本框值发生变化（因此从线程更新值正在工作。

```
 public void doTest()
        {
            int count = 20;
            while (count < 30)
            {
                 Dispatcher.Invoke(new Action(() => txtBoxLog.Text = count.ToString()), null);
                count++;
                Thread.Sleep(500);
            }
        } 
```

但是，如果我删除上面的代码并创建单独的类，放置在主窗口类之外，从线程更新我的文本框失败并且我没有收到任何错误但根本没有改变它的值，我使用调度程序从线程更新不是更新 .

从 doTest() 类访问主窗口我创建了内部静态主 winodwo calss tw

```
internal static MainWindow tw; 
```

现在我的 doTest() 方法在 clsTest.cs 文件中有以下代码

```
internal class clsTest
{
    public clsTest() { }

    public void doTest()
    {
        int count = 20;
        while (count < 30)
        {
            MainWindow.tw.Dispatcher.Invoke(
             new Action(() => MainWindow.tw.txtLog.Text = count.ToString()), DispatcherPriority.Background, null);

            count++;
            Thread.Sleep(500);
        }
    }
} 
```

请帮助我确定我在这里出错的地方..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T05:32:05.417

您发布的内容没有任何明显错误。它们对我来说看起来不错，我通过在示例应用程序中运行您的代码片段进行了仔细检查。我猜想这与您如何初始化未显示的静态“tw” MainWindow 实例有关。

编辑：好的，您不应该像您正在做的那样显式地创建一个新的 MainWindow 实例，因为 WPF 会自动为您创建一个。相反，您应该将该静态实例设置为指向默认实例，例如在 MainWindow 类的构造函数中：

```
internal static MainWindow tw;

public MainWindow()
{
    InitializeComponent();
    tw = this;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T01:36:08.027

> 帮助我确定我哪里出错了

这是您使用调度程序而不是仅[绑定](http://msdn.microsoft.com/en-us/library/ms752347.aspx).`Text`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T20:15:01.167

你不需要初始化`tw`as`tw = this`而不是`tw = new MainWindow()`吗？

# c++ - 我应该使用代码转换器（Python 到 C++）吗？

> ID：12344414
> 
> 赞同：-14
> 
> 时间：2012-09-10T01:31:26.310
> 
> 标签：c++, python, performance, code-generation, converter

让我直接说我不是程序员。我只是一个有想法的人，他迈出了第一步，将其变为现实。请注意，我对编程并不陌生，但是这里的一些概念和术语超出了我的想象。因此，如果之前回答了这个问题，我提前道歉（即将[Python 程序转换为 C/C++ 代码？](https://stackoverflow.com/questions/4650243/convert-python-program-to-c-c-code)）。

我有一个想法来创建一个简单的 AI 网络来分析通过云计算从手机发送的音乐数据（我找了一个负责云计算的人）。这将需要大量内存，并且需要快速进行硬数字运算。我曾计划在 python 中做这件事，但后来了解到这可能不是一个好主意（[Python 比 C++ 更快更轻吗？](https://stackoverflow.com/questions/801657/is-python-faster-and-lighter-than-c)）。

因为 python 真的是我皮套里唯一的枪，所以我正在考虑使用 python-to-C++ 转换器。但没有什么是没有代价的：

1.  这是保持我的代码快速的一种有利方式吗？
2.  使用转换器有什么好处？
3.  我错过了什么吗？我还是新手，所以我什至不确定要问什么问题。

提前致谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-10T01:36:35.157

一般来说，这是一种糟糕的代码编写方式，并且不能保证它会更快。在一种语言中简单而快速的事情在另一种语言中可能是复杂而缓慢的。你最好学习如何编写快速的 Python 代码或直接学习 C++，而不是与翻译器争吵并弄清楚如何使生成的代码以可接受的方式运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T01:41:47.617

如果你想要 C++，请使用 C++。但是请注意，PyPy 有很多基准测试表明它们可以比 C 快得多；并且使用使用编译扩展的 NumPy，数字工作变得更快、更容易。

如果你想用静态编译的东西编程，有点像 Python，那就是 RPython。

最后，您可以做 NumPy 所做的事情：使用用 C 或 C++ 编写的扩展来完成大部分繁重的计算工作，这似乎是合适的，因为分析显示了一个热点，或者因为您需要一个扩展来更轻松地做一些涉及python的内部结构。请注意，这会将您的代码绑定到特定的实现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T01:41:34.127

与已经说过的类似，C++ 在某些领域可能更快，而在其他领域则更慢。Python 完全一样。最终，任何语言都会被转换成机器码。最终取决于编译器是否使它尽可能高效，因为它知道如何做。也就是说，最好选择一种语言并学习如何编写快速高效的代码来做你想做的事。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-23T11:10:26.250

不，因为良好的 C++ 性能的很大一部分来自选择性能更好的架构的可能性。它并不是神奇地来自同一事实“因为它是 C”。

从 Python 到 C++ 的简单逐行翻译不太可能比仅使用[Cython](https://cython.org/)之类的东西更能提高性能，所以我认为使用 Cython 更合理。它仍然可能比一个优秀的开发人员从头开始使用 C++ 做的要糟糕得多。C++ 简单地提供了对所有内容的更多控制，例如定义所需最小长度的数据类型、堆栈上的固定大小数组、关闭生产中的数组边界检查等的可能性。

# html - 多个 CSS 背景刷新到浏览器顶部

> ID：12344415
> 
> 赞同：0
> 
> 时间：2012-09-10T01:31:28.023
> 
> 标签：html, css

我正在尝试创建渐变背景，然后在中心创建一个纯色框，然后在其中键入文本。我的代码在下面，效果很好，但纯色框（主体）与浏览器顶部不齐，之间有一点空间。你如何摆脱这个？

```
html {
    text-align: center;
    background-color: #FFF;
    background-image: url(../../Public/Documents/Business/Running%20Companies/Enlightenment%20Project/Website/images/bg.jpg);
    background-repeat: repeat-x;
    margin: 0px;

    }

body {
    background-color: #FFFFFF;
    height: 768px;
    width: 1024px;
    margin: auto;
    } 
```

**更新

工作代码如下：

```
html {
    font-family: sans-serif; /* 1 */
    -webkit-text-size-adjust: 100%; /* 2 */
    -ms-text-size-adjust: 100%; /* 2 */
    background-color: #FFF;
    background-image: url(images/bg.jpg);
    background-repeat: repeat-x;
}

/*
 * Removes default margin.
 */

body {
    margin: auto;
    background-color: #FFF;
    height: 768px;
    width: 1024px;
    padding-top: 1px;
    padding-right: 10px;
    padding-bottom: 0px;
    padding-left: 25px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T01:37:48.040

正如@loktar 评论的那样，尝试`margin: 0`身体（对不起@loktar，这里是新的）

我建议在你所有的项目中使用[normalize.css](http://necolas.github.com/normalize.css/)来摆脱这些小问题。

# javascript - 需要比特币检查地址和 json 帮助

> ID：12344416
> 
> 赞同：3
> 
> 时间：2012-09-10T01:31:47.220
> 
> 标签：javascript, jquery, json, bitcoin

我需要一些关于使用 JSON 和比特币/blockexplorer json 调用的帮助。我什至不确定这是否会奏效。基本上我正在尝试验证比特币钱包地址。我希望它检查 blockexplorer 以查看它是否是“有效”地址。

这是我到目前为止所做的：

```
function checkAddress(){
  var address = $('#wallet').val();
  $.getJSON('http://blockexplorer.com/q/checkaddress/'+address+'?format=json',{"format":"json"},function(data){
    alert('xxx == '+data);
  });
} 
```

但它似乎根本没有做任何事情。我甚至可以使用带有 JSON 的 blockexplorer 来获得结果吗？我对比特币非常陌生，我不完全确定我在做什么。

完整的 URL 应该是这样的： http: [//blockexplorer.com/q/checkaddress/1NXYoJ5xU91Jp83XfVMHwwTUyZFK64BoAD](http://blockexplorer.com/q/checkaddress/1NXYoJ5xU91Jp83XfVMHwwTUyZFK64BoAD) - 如果为真则返回 00

这是带有错误代码的页面本身：

[http://blockexplorer.com/q/checkaddress](http://blockexplorer.com/q/checkaddress)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T02:00:27.057

URL 未返回 JSON。您将希望改用 $.get 或 $.ajax，并查看返回的纯文本。

```
function checkAddress(){
  var address = $('#wallet').val();
  $.get('http://blockexplorer.com/q/checkaddress/'+address,function(data){
    alert('xxx == '+data);
  });
} 
```

# ruby - 2个不同控制器中的同名实例变量

> ID：12344425
> 
> 赞同：0
> 
> 时间：2012-09-10T01:33:42.550
> 
> 标签：ruby, ruby-on-rails-3, railstutorial.org

我完成了 Michael Hartl 的 Ruby on Rails 教程。现在我正在研究建议的练习。他构建的应用程序基本上是 Twitter 的克隆，人们可以在其中发布 Microposts，它们会出现在您的提要中[http://ruby.railstutorial.org/chapters/user-microposts#fig-micropost_created](http://ruby.railstutorial.org/chapters/user-microposts#fig-micropost_created)

主页`home.html.erb`来自 StaticPagesController，并具有一个 Micropost 文本框，可以在其中发布 Microposts。文本框的代码如下所示：

```
<%= form_for(@micropost) do |f| %>
  <%= render 'shared/error_messages', object: f.object %>
  <div class="field">
    <%= f.text_area :content, placeholder: "Compose new micropost..." %>
  </div>
  <%= f.submit "Post", class: "btn btn-large btn-primary" %>
<% end %> 
```

该`@micropost`变量在 StaticPagesController 中初始化，如下所示：

```
class StaticPagesController < ApplicationController
  def home
    if signed_in?
      @micropost = current_user.microposts.build
    end
  end 
```

现在在 MicropostsController 里面有一个像这样的创建动作：

```
def create
  @micropost = current_user.microposts.build(params[:micropost])
  if @micropost.save
    flash[:success] = "Micropost created!"
    redirect_to root_url
  else
    @feed_items = []
    render 'static_pages/home'
  end
end 
```

我的问题是第一个 @micropost 变量与第二个变量相比的目的是什么？

谢谢，迈克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T01:52:39.817

第一个`@micropost`可用于由第一个控制器方法呈现的视图；第二个`@micropost`可用于由第二个控制器方法呈现的视图。碰巧这两种方法正在渲染相同的视图。

唯一的问题是，因为第二个控制器是有条件的。如果创建成功（通过验证并保存），则存在重定向，因此没有正确的视图（尽管在客户端重定向之后会有一段时间）。但是如果它失败了，那么视图会得到一个对象，其中包含*用户输入的值*以及视图可以向用户显示的*验证错误。*

# c++ - Qt Creator 拒绝执行自定义 python 程序作为构建步骤命令

> ID：12344428
> 
> 赞同：0
> 
> 时间：2012-09-10T01:34:19.783
> 
> 标签：c++, linux, include, qt-creator, header-files

我正在编写一个共享库，为了更新我的`/usr/include`目录中的头文件，我编写了一个 python 程序来比较源目录中的头文件并使目录中的头文件保持最新`/usr/include`，希望能够在目录中自动完成当我将它们与我的测试可执行文件链接时，每个构建的标题本身。

问题是 Qt Creator 无法执行 python 程序。我的设置如下：

```
Command : 'python'
Working Directory : '/path/to/python/file'
Args    : 'PythonFile.py' 
```

是的，**启用自定义流程步骤**框已选中。

我的输出类似于以下内容：

`Could not start process "python " PythonFile.py`

诚然，如果有另一种更简单的方法来解决这个标题问题（并且包括更新自动完成的能力），我完全可以接受。

**编辑**

我还应该说我已经通过 CLI 执行了该程序，并且运行良好。

**更新**

根据 Slava 的建议更新命令，我得到以下输出：

```
Program is beginning
Traceback (most recent call last):
  File "UpdateHeaders.py", line 59, in <module>
    PROJECT_ROOT      = environ['ATLAS_PROJ_ROOT']
  File "/usr/lib/python2.7/UserDict.py", line 23, in __getitem__
    raise KeyError(key)
KeyError: 'ATLAS_PROJ_ROOT'
13:08:35: The process "/usr/bin/env" exited with code 1. 
```

然而，如果我通过 CLI 运行它，我会得到：

```
Program is beginning
Updating include directory on a UNIX based system, copying files from /home/amsterdam/Programming/atlas/Engine/AtlasEngine/ to /usr/include/atlas/Engine/
Found a source count of 5;
Found a dest count of 0
No headers have been copied to "/usr/include/atlas/Engine/", yet; copying now from "/home/amsterdam/Programming/atlas/Engine/AtlasEngine/" 
Iterating through ['AtlasEngine.pro', 'GameObject.hpp', 'AtlasEngine_global.h', 'Type_Config.hpp', 'Rectangle.hpp', 'AtlasEngine.pro.user', 'Engine.hpp', 'Engine.cpp']
Copying "/home/amsterdam/Programming/atlas/Engine/AtlasEngine/GameObject.hpp" to "/usr/include/atlas/Engine/GameObject.hpp"
Copying "/home/amsterdam/Programming/atlas/Engine/AtlasEngine/AtlasEngine_global.h" to "/usr/include/atlas/Engine/AtlasEngine_global.h"
Copying "/home/amsterdam/Programming/atlas/Engine/AtlasEngine/Type_Config.hpp" to "/usr/include/atlas/Engine/Type_Config.hpp"
Copying "/home/amsterdam/Programming/atlas/Engine/AtlasEngine/Rectangle.hpp" to "/usr/include/atlas/Engine/Rectangle.hpp"
Copying "/home/amsterdam/Programming/atlas/Engine/AtlasEngine/Engine.hpp" to "/usr/include/atlas/Engine/Engine.hpp" 
```

如图所示，除非通过 Qt Creator 运行，否则一切正常，没有任何错误。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T08:36:01.687

`Command : '/usr/bin/env'`
`Working Directory : '/path/to/python/file'`
`Args : 'python PythonFile.py'`

或者

`Command : '/usr/bin/env'`
`Args : 'python /path/to/python/file/PythonFile.py'`

# javascript - js文件是否会阻碍war文件的构建

> ID：12344430
> 
> 赞同：0
> 
> 时间：2012-09-10T01:34:39.227
> 
> 标签：javascript, deployment, war

我知道这听起来可能很愚蠢，但是 js 文件会阻碍战争文件的构建吗？

我正在和我的同事一起工作，他说使用我们项目中的一堆 js 文件构建 war 文件需要更长的时间。我不认为它会，但我找不到答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T02:52:48.983

没有足够的信息来回答你的问题。但是，您的同事可能是正确的。WAR 文件只是具有不同扩展名的 ZIP 文件。但是，当您*构建*WAR 文件时，通常会发生很多事情。您的构建过程通常会执行编译 Java 文件、创建元数据文件等操作。它还可能执行 JavaScript 文件的连接、验证和/或最小化。

如果您的构建过程确实优化或验证了 JavaScript，那么 JavaScript 文件的数量实际上可能很重要。但是，这不一定是坏事。您可能不想无缘无故地过度使用它，但只要您的构建过程执行必要的最小化步骤，这不是问题。

现在，如果您的构建过程没有对 JavaScript 文件做任何处理，那么您的同事可能会谈论另一个性能问题：页面加载时间。由于为每个文件发出单独的 HTTP 请求会产生大量开销，因此要检索一堆 JavaScript 文件可能会对用户的页面加载时间产生重大影响。这在移动用户等高延迟情况下会被进一步放大。这就是为什么 JavaScript 最小化和连接步骤通常包含在现代构建过程中的原因。

因此，您的同事可能对性能问题的原因有误，但建议您减少 JavaScript 文件数是正确的。您应该与开发构建过程的人交谈。如果构建脚本中没有 JavaScript 处理，那么为了您的用户，您当然应该将 JavaScript 文件数量保持在较低水平。如果有，并且您认为您的同事已经满了，您应该创建大约 50 个 JavaScript 文件（用一些随机 JavaScript 填充它们）并运行构建。如果构建时间似乎不再存在，那么您就知道您的同事是不正确的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T01:39:38.883

war 文件实际上只是具有一些特殊元数据和结构的 zip 文件，所以是的，从某种意义上说，这些文件必须像制作 zip 一样被压缩，因此需要更长的时间。但是，对于任何类型的文件都是如此，js文件没有什么特别之处。

# java - 无法在 ListView 中设置多项选择

> ID：12344432
> 
> 赞同：1
> 
> 时间：2012-09-10T01:34:51.347
> 
> 标签：java, android, listview, checkbox, contacts

我在 ListView 中设置多项选择时遇到问题。我的 ListView 有从 android 手机中检索到的联系人姓名。

我已经按照设置多项选择的示例进行操作，但没有成功。

我试过打字

```
SimpleCursorAdapter adapter = new SimpleCursorAdapter(this, R.layout.contacts_list, c, columns, views);
        list.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
        this.setListAdapter(adapter); 
```

但我没有在 ListView 中看到复选框。

我已经替换`R.layout.contacts_list`为`android.R.layout.simple_list_item_multiple_choice`它显示了复选框，但没有来自 android 手机联系人的姓名。

这是我的代码：contacts_list.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:background="@color/light_goldenrod"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ListView
        android:id="@android:id/list"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:stackFromBottom="false"
        android:transcriptMode="normal"
        android:choiceMode="multipleChoice" >
    </ListView>

    <TextView
        android:textColor="@color/dark_purple"
        android:id="@+id/contactName"
        android:textStyle="bold"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" /> 
```

联系人列表.java

```
public class ContactsList extends ListActivity
{
    final Context context = this;

    Cursor cursor;

    String[] buddiesList = 
        {"Kanak Priya",
        "Joanne Liew",
        "Michelle Lam",
        "Teo Kin Hua",
        "Melissa Haiting",
        "David Yeo",
        "Natasha Akhbar",
        "Gillian Gan",
        "Sonia",
        "Ms Long",
        "Joan Tang",
        "Stephanie",
        "Nur Ashiqin"
        };

    BuddyDBAdapter buddyDB = new BuddyDBAdapter(this);

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.contacts_list);

        ListView list = getListView();

        setListAdapter(new ArrayAdapter<String> (this, R.layout.contacts_list, R.id.contactName, buddiesList));

        Uri allContacts = Uri.parse("content://contacts/people");

        Cursor c = managedQuery(allContacts, null, null, null, null);

        String[] columns = new String[] {ContactsContract.Contacts.DISPLAY_NAME};
        int[] views = new int[]  {R.id.contactName};

        startManagingCursor(c);

        SimpleCursorAdapter adapter = new SimpleCursorAdapter(this, R.layout.contacts_list, c, columns, views);
        list.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
        this.setListAdapter(adapter);

        /*if(cursor.getCount()<0)
        {
            Intent displayIntent = new Intent(Intent.ACTION_VIEW);
            displayIntent.setData(Uri.parse("content://contacts/people"));
            startActivity(displayIntent);

            displayIntent = new Intent(Intent.ACTION_VIEW);
            //displayIntent.setData(Uri.parse("content://contacts/people/"+id));
            startActivity(displayIntent);
        }
        else
        {
            final AlertDialog alertDialog = new AlertDialog.Builder(this).create();
            alertDialog.setTitle("ALERT!");
            alertDialog.setMessage("NO Name is Found! D:");
            alertDialog.setIcon(R.drawable.warning);
            alertDialog.setButton("OK", new DialogInterface.OnClickListener()
            {
                public void onClick(DialogInterface dialog, int which)
                {
                    Intent backIntent = new Intent(context, ContactsList.class);
                    startActivity(backIntent);
                }
            });
            alertDialog.show();
        }*/
    }

    @Override
    public void onListItemClick(ListView l, View v, int position, long id)
    {
        buddyDB.open();
        long name_id;
        super.onListItemClick(l, v, position, id);

        Cursor c = ((SimpleCursorAdapter)l.getAdapter()).getCursor();

        TextView contactName = (TextView) v.findViewById(R.id.contactName);
        String NameValue = contactName.getText().toString();

        name_id = buddyDB.insertNames(NameValue);

        Toast.makeText(getBaseContext(),
                "Selected: " + buddiesList[position], Toast.LENGTH_SHORT).show();

        buddyDB.close(); 
```

哦，顺便说一句，

```
String[] buddiesList = 
        {"Kanak Priya",
        "Joanne Liew",
        "Michelle Lam",
        "Teo Kin Hua",
        "Melissa Haiting",
        "David Yeo",
        "Natasha Akhbar",
        "Gillian Gan",
        "Sonia",
        "Ms Long",
        "Joan Tang",
        "Stephanie",
        "Nur Ashiqin"
        }; 
```

用于我的 Toast 消息。

我真的需要帮助。任何帮助将不胜感激。示例也将不胜感激。
谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T02:01:20.097

您可能有两种选择：

**1 - 使用 Android 资源的默认布局 (simple_list_item_multiple_choice)**

您可以替换此代码：

> ```
> SimpleCursorAdapter adapter = new SimpleCursorAdapter(this,R.layout.contacts_list, c, columns, views); 
> ```

到：

```
SimpleCursorAdapter adapter = new SimpleCursorAdapter(this, android.R.layout.simple_list_item_multiple_choice, c, columns, new int {android.R.id.text1}); 
```

**2 - 创建包含您定义的复选框的新行布局并自行处理。**

联系人列表.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:background="@color/light_goldenrod"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >
    <ListView
        android:id="@android:id/list"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:stackFromBottom="false"
        android:transcriptMode="normal"
        android:choiceMode="multipleChoice" >
    </ListView>
</LinearLayout> 
```

联系人入口.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="fill_parent"
              android:layout_height="wrap_content">
    <TextView
        android:textColor="@color/dark_purple"
        android:id="@+id/contactName"
        android:textStyle="bold"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />
    <CheckBox
        android:id="@+id/contactCheckbox"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text=""
        android:checked="false" />

</LinearLayout> 
```

像这样添加自定义光标适配器：

```
public class YourCursorAdapter extends CursorAdapter  {

private Context mContext;
private Cursor mCurser;

public YourCursorAdapter(Context context, int layout, Cursor c, String[] from,
        int[] to, ContentResolver co) {
    super(context, c);
    mCurser = c;
    mContext = context;
}

@Override
public View newView(Context context, Cursor cursor, ViewGroup parent) {
    // TODO Auto-generated method stub
    LayoutInflater inflater = LayoutInflater.from(mContext);
    View v = inflater.inflate(R.layout.contact_entry, parent, false);
    bindView(v, mContext, cursor);
    return v;
}

@Override
public void bindView(View view, Context context, Cursor cursor) {

    TextView contactName= (TextView)view.findViewById(R.id.contactName);
    contactName.setText(cursor.getString((mCurser
            .getColumnIndexOrThrow(Contacts.Phones.DISPLAY_NAME))));
    CheckBox contactCheckbox = (TextView)view.findViewById(R.id.contactCheckbox);
    contactCheckbox.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            Checkbox checkBox = (Checkbox) v.findViewById(R.id.contactCheckbox)
            if (checkBox.isChecked())
                    checkBox.setChecked(false);
            else
                    checkBox.setChecked(true);
        }
    });
} 
```

在您的 ListActivity 中：

```
 YourCursorAdapter adapter = new YourCursorAdapter(this,
            null, c, null, null,null);
    this.setListAdapter(adapter); 
```

# c++ - 无需轮询即可更改时间

> ID：12344433
> 
> 赞同：1
> 
> 时间：2012-09-10T01:35:53.097
> 
> 标签：c++, c, linux, time

我想刷新并控制时间间隔的变化。大多数人只有一个无限循环，不断地从 time.h 轮询时间并浪费循环。有没有一种方法可以在不过多干扰系统的情况下更改时钟？我正在使用 c/c++ 并且真的想学习如何仅使用 linux 库手动执行此操作。大多数程序都需要时间的概念。

我想收到系统时钟更新的通知。我正在尝试做一个实时响应的科学应用程序。Sleep() 之类的东西只能让我指定从执行该声明开始的时间延迟。Localtime() 和 c 标头中的字符串返回时间只给了我执行的具体时间。如果我这次使用它为时已晚，它已经过去了太多纳秒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T01:43:22.147

阅读[time(7)](http://www.kernel.org/doc/man-pages/online/pages/man7/time.7.html)手册页以了解如何使用系统调用[gettimeofday(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/gettimeofday.2.html)、[setitimer(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/setitimer.2.html)、[clock_gettime(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/clock_gettime.2.html)、[timer_create(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/timer_create.2.html)等...以及相关的库函数 ( `strftime`, `localtime`, ...)到时间。

如果您想编写接收定时器事件的应用程序，请了解定时器和例如`SIGALRM`信号。读取第一个[信号(7)](http://www.kernel.org/doc/man-pages/online/pages/man7/signal.7.html)

但是你真的应该阅读[Advanced Unix Programming](http://basepath.com/aup/)和[Advanced Linux Programming](http://advancedlinuxprogramming.com)并了解什么是[系统调用](http://en.wikipedia.org/wiki/System_call)

您可能希望使用[poll(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/poll.2.html)进行轮询或等待。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T02:27:57.773

也是可移植且与大多数其他任务兼容的最基本方法是`select`. 它会一直休眠，直到经过一定时间或文件准备好进行 I/O，这为您提供了一种在下一个任务发生之前更新任务列表的方法。如果您不需要中断功能，您可以使用`sleep`(或`usleep`)。

# actionscript-3 - 视频流：“onBWDone：未定义”并且视频无法播放

> ID：12344436
> 
> 赞同：0
> 
> 时间：2012-09-10T01:36:59.570
> 
> 标签：actionscript-3, flash, amazon-s3, rtmp, amazon-cloudfront

我正在尝试从 Amazon 的 CloudFront/S3 服务流式传输视频。尽管我的文件名是正确的，并且状态为“NetConnection.Connect.Success”，但我的 NetConnection onBWDone 回调给了我一个“未定义”错误，并且视频没有播放或出现在舞台上的任何地方。连接报告它是成功的，所以我不知道问题出在哪里。这是我的代码：

```
var amazonCloudFrontDomain:String = "myCloudFrontDistributionID.cloudfront.net";
var amazonCloudFrontStreamURL:String = "rtmp://" + amazonCloudFrontDomain + "/cfx/st/";
var videoFileName:String = "myVideo.flv";

Security.allowDomain(amazonCloudFrontDomain);
Security.allowDomain("rtmp://" + amazonCloudFrontDomain);
Security.allowDomain(amazonCloudFrontStreamURL);

var client:Object = new Object();
client.onBWDone   = function(e){trace("onBWDone: " + e);}
client.onMetaData = function(e){trace("onMetaData: " + e);}
client.onCuePoint = function(e){trace("onCuePoint: " + e);}

var video:Video = new Video(300, 400);  //  create a new Video item and set its width and height
video.x = 0;  //  position the video's x position
video.y = 0;  //  position the video's y position
var duration:Number;  //  use this later to get the duration of the video being played
this.addChild(video);

var nc:NetConnection = new NetConnection();  //  variable for a new NetConnection
nc.client = client;
nc.addEventListener(NetStatusEvent.NET_STATUS,netConnectionStatusHandler,false,0,true);
nc.connect(amazonCloudFrontStreamURL);  //  set the nc variable to null

var ns:NetStream;
function netConnectionStatusHandler(e):void
{
    switch(e.info.code)
    {
        case "NetConnection.Connect.Success":
            trace("S3 Connected");

            ns = new NetStream(nc);  // create a variable for a new NetStream connection & connect it to the nc variable
            ns.addEventListener(NetStatusEvent.NET_STATUS, netStreamStatusHandler);  //  add a listener to the NetStream to listen for any changes that happen with the NetStream
            ns.addEventListener(AsyncErrorEvent.ASYNC_ERROR, netStreamAsyncErrorHandler);  //  add a listener to the NetStream for any errors that may happen
            ns.client = client;

            video.attachNetStream(ns);  // attach the NetStream variable to the video object
            video.smoothing = true;
            video.deblocking = 1;

            ns.bufferTime = 5;  // set the buffer time to 5 seconds
            ns.play(videoFileName);  //  tell the netstream what video to play and play it
            break;
    }
    trace(e.info.code);
}

function netStreamAsyncErrorHandler(Event:AsyncErrorEvent):void
{
    // trace(event.text);  // this will handle any errors with video playback
}

function netStreamStatusHandler(event:NetStatusEvent):void
{
    trace(event.info.code);  // this will handle any events that are fired when the video is playing back
    switch(event.info.code)  //  switch statement to handle the various events with the NetConnection
    {

        case "NetStream.Buffer.Full":  //  when the buffer is full fire the code below
            ns.bufferTime = 10;  // set buffer time to 10 seconds       break;
        case "NetStream.Buffer.Empty":  //  when the buffer is empty fire, code below
            ns.bufferTime = 10;  // set buffer time to 10 seconds
        break;
        case "NetStream.Play.Start":  //  when the video starts playing, fire the code below
            ns.bufferTime = 10;  // set the buffer time to 10 seconds
        break;
        case "NetStream.Seek.Notify":  // when you seek with the scrubber it sends a notify signal of the time
            ns.bufferTime = 10;  // set the buffer time to 10 seconds
        break;
        case "NetStream.Seek.InvalidTime":  // when you release the scrubber ahead of the video that has been loaded, you get this error.  it will jump you back to the last frame that has been loaded
            ns.bufferTime = 10;  // set the buffer time to 10 seconds
        break;
        case "NetStream.Play.Stop":  // when you reach the end of the video
            ns.pause();  // pause the video
            ns.seek(1);  // seek the video to the first frame
        break;
    }
} 
```

这是控制台输出：

```
S3 Connected
netConnectionStatusHandler: NetConnection.Connect.Success
onBWDone: undefined
NetStream.Play.Reset
NetStream.Play.Start 
```

……什么也没有发生。没有视频，没有音频，什么都没有。任何人都可以看到我的代码有任何问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T02:33:18.540

我相信并不是所有的流媒体应用程序都必须使用 onBWDone 函数，所以如果他们不使用它，它可能会将 null 或 undefined 传递给函数而不是 kbps。

因此，您的问题可能出`e`在下面的跟踪语句中：

```
client.onBWDone   = function(e){trace("onBWDone: " + e);} 
```

此外，该函数不接收事件对象，而是接收`... rest`通常只有一个项目的数组。试试这个：

```
client.onBWDone   = function(... rest){  //
    if(rest && rest.length > 0){  //since the function might not get any data, you need to check before trying to trace it out
        trace("onBWDone: " + rest[0]); //this is the kbps of the bandwidth available
    }
}; 
```

您可以在 Adob​​e 文档中了解更多信息：http: [//help.adobe.com/en_US/FlashMediaServer/3.5_Deving/WS5b3ccc516d4fbf351e63e3d11a0773d56e-7ffa.html](http://help.adobe.com/en_US/FlashMediaServer/3.5_Deving/WS5b3ccc516d4fbf351e63e3d11a0773d56e-7ffa.html)

**编辑**

关于您的视频路径：

Flash Media Server 应用程序通过 rtmp 以下列格式访问：“server:port/application/instance”。对于 VOD，instance 是文件的名称，对于 FLV，它不需要扩展名。

[http://help.adobe.com/en_US/FlashMediaServer/3.5_Deving/WS5b3ccc516d4fbf351e63e3d11a0773cfae-7ff3.html](http://help.adobe.com/en_US/FlashMediaServer/3.5_Deving/WS5b3ccc516d4fbf351e63e3d11a0773cfae-7ff3.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T22:49:31.590

我变了

```
var videoFileName:String = "myVideo.flv"; 
```

至

```
var videoFileName:String = "myVideo"; 
```

现在它可以工作了。出于某种原因，排除文件扩展名使它对我有用。我不知道为什么……奇怪。

# c# - 将第一个/最后一个 ListBox 项目滚动到滚动视图的中心

> ID：12344439
> 
> 赞同：1
> 
> 时间：2012-09-10T01:37:42.597
> 
> 标签：c#, wpf, listbox, scrollviewer

有什么办法可以确保如果我的用户在 my 中选择一个项目`ListBox`，该项目总是滚动到 my 的中心`ListBox`？显然我可以使用，`ScrollToVerticalOffset`但是如果用户选择了列表中的最后一项，ListBox 不允许 ScrollViewer 将其滚动到中心，因为它是最后一项。

我希望这是有道理的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T01:55:44.843

您可以尝试在 ListBox 中添加几个假/空项目，但在这种情况下，您必须避免选择这些假项目...

# java - 对象上的 Java 背景图像。找不到我的公共变量

> ID：12344449
> 
> 赞同：0
> 
> 时间：2012-09-10T01:39:18.710
> 
> 标签：java, image, swing, paintcomponent

我想要的是每次一个细胞被认为是“死的”，这张图片

[http://preview.turbosquid.com/Preview/Content_2009_07_25__02_34_32/dead%20cell%201.jpg8c11d904-1879-4bd9-b31c-439bcbb83646Larger.jpg](http://preview.turbosquid.com/Preview/Content_2009_07_25__02_34_32/dead%20cell%201.jpg8c11d904-1879-4bd9-b31c-439bcbb83646Larger.jpg)

显示在对象的背景上。

我在包 p_game 中有一个名为“Game”的类，代码如下

```
public class Game{
    public Image bg_image;
    public Game(){
           //Here is code that creates a 17*17 table of cells with the status 'Dead' 
        this.Cellules= new p_cell.Cellule[17][17];  
        for (int i=1; i<17; i++){
           for (int j=1; j<17; j++){
               Cellules[i][j]=new p_cell.Cellule(i,j,"Dead");
           }
        }
           //Here is code for the URL and Image
           URL url;
           try {
               url = new URL("http://preview.turbosquid.com/Preview/Content_2009_07_25__02_34_32/dead%20cell%201.jpg8c11d904-1879-4bd9-b31c-439bcbb83646Larger.jpg");
               bg_image = Toolkit.getDefaultToolkit().getDefaultToolkit().createImage(url);
           } catch (MalformedURLException e) {
            e.printStackTrace();
           }
    }
­} 
```

我试图在我的类 Cell（在包 p_cell 中）中使用 bg_image，但它说该变量不存在。我在这里想念什么？

```
public class Cell{
    public void paintComponent(Graphics g){

        g.drawImage(bg_image, 0, 0);

    } 
} 
```

给出的错误：bg_image 无法解析为变量

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T05:56:29.280

每个变量都属于一个类或类实例。
要使用 bg_image，您必须`Game`像这样实例化类：`Game game = new Game();`，然后将其与实例引用一起使用：`game.bg_image`。
如果您不想拥有`Game`类的实例，则应该将其设为`bg_image`静态并像这样使用它：`Game.bg_image`.
附加阅读：
关于静态变量：[http](http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html)
://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html 关于实例变量：[http ://docs.oracle.com/javase/tutorial/java/javaOO/变量.html](http://docs.oracle.com/javase/tutorial/java/javaOO/variables.html)

# iphone - 3G 网络上的三秒 https 连接时间

> ID：12344456
> 
> 赞同：0
> 
> 时间：2012-09-10T01:39:50.960
> 
> 标签：iphone, ios, ssl, https, ssl-certificate

在 3G 网络上 Ping 到服务器是 80 毫秒，与在 Wifi 上（60 毫秒）大致相同，但建立 SSL 连接的时间在 3G 上是 3.5 秒，在 Wifi 上是 0.5 秒。这与同时使用笔记本电脑和 iPhone 作为客户端相同。

3G塔不忙。互联网连接基本上是空闲的。

如果我在 Wifi 中运行手机，对服务器进行 70 毫秒的 ping，连接握手时间会快 6 倍 - 大约半秒，考虑到 ssl 握手细节，这大致是我所希望的。

这是正常的吗？我只在弗吉尼亚州的 AWS (heroku) 的一台服务器上对其进行了测试，从我的办公室对 Wifi 进行 50 毫秒的 ping 测试。在所有情况下，服务器都会在大约 40 毫秒左右的时间内构建和响应 10kB 的数据。

3G真的那么慢吗？或者我可以对 NSURLConnection 等进行一些调整以更快地握手？

这是在请求之间休眠的 3G 无线电吗？- 我不这么认为，即使我通过 ping 保持 3g 收音机开启，（比如说）同样的事情也会发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T16:17:02.090

我实际上不是 100% 确定这是答案。

手机上的 GSM 蜂窝无线电会尽可能多地关闭以节省电池。当您启动应用程序时，只要您请求网络资源，收音机就会打开。大约需要一秒钟？（不确定）启动收音机。

所以很难改进。到目前为止，我发现的唯一一件事就是在 main.m 中使用 NSURLConnection - 没有设置委托。这对我来说加快了大约 0.3 秒 - 到达代码中我真正想要上网的点所需的时间。

请注意，如果您实际上不需要上网，这会浪费电池！

```
 // warm up the radio ASAP. It seems to take over a second for the radio to turn on.
    // This saves about a quarter of a second or so. 404 is typically a fast easy response for a server. 
    NSURLRequest* request = [NSURLRequest requestWithURL:[NSURL URLWithString:@"http://yoursite.com/wedonthavethis/"]];
    [NSURLConnection connectionWithRequest:request delegate:nil]; 
```

# java - 使用 one-jar 构建一个 jar 文件

> ID：12344459
> 
> 赞同：1
> 
> 时间：2012-09-10T01:40:05.733
> 
> 标签：java, jar, clojure, onejar

我正在尝试使用 one-jar 生成一个包含 clojure jar 文件和 java 类文件的 jar 文件：[Creating one-jar file that for execution from Java/Clojure](https://stackoverflow.com/questions/12341993/creating-one-jar-file-that-for-execution-from-java-clojure)

按照[说明](http://one-jar.sourceforge.net/index.php?page=getting-started&file=quickstart)，我可以使用`one-jar-appgen-0.97.jar`. 按照指示，我替换了 java 源，并添加了`ThingOne-1.0.0-SNAPSHOT-standalone.jar`

运行`ant`，它构建 jar 文件没有错误，但是当我尝试执行 jar 文件时收到错误消息。

```
java -jar build/test-one-jar.jar 
test_one_jar main entry point, args=[]
Hello from Java!
Exception in thread "main" java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.simontuffs.onejar.Boot.run(Boot.java:342)
    at com.simontuffs.onejar.Boot.main(Boot.java:168)
Caused by: java.lang.ExceptionInInitializerError
    at clojure.lang.Namespace.<init>(Namespace.java:34)
    at clojure.lang.Namespace.findOrCreate(Namespace.java:176)
    at clojure.lang.Var.internPrivate(Var.java:149)
    at ThingOne.core.<clinit>(Unknown Source)
    at onejar.main.TestOneJarMain.run(TestOneJarMain.java:27)
    at onejar.main.TestOneJarMain.main(TestOneJarMain.java:20)
    ... 6 more
Caused by: java.lang.NullPointerException
    at clojure.lang.RT.lastModified(RT.java:374)
    at clojure.lang.RT.load(RT.java:408)
    at clojure.lang.RT.load(RT.java:398)
    at clojure.lang.RT.doInit(RT.java:434)
    at clojure.lang.RT.<clinit>(RT.java:316)
    ... 12 more 
```

可能有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T07:03:01.777

One-Jar 的 Boot.java 类中的第 168 和 342 行表示设置属性有问题。当单元测试失败时会发生此问题。我的猜测是它与[SourceForge One-Jar Bug Tracker 中的错误 3090800](https://sourceforge.net/tracker/index.php?func=detail&aid=3090800&group_id=111153&atid=658457)有关。

# java - 搜索“子数组”

> ID：12344460
> 
> 赞同：1
> 
> 时间：2012-09-10T01:40:17.623
> 
> 标签：java

我正在尝试创建一个函数，该函数将从更大的数组中检查 3x3 数组元素块中的特定元素。

```
9...84.6\.  
..4..75.8  
.3.......  
3....1...  
.7.5.6.4\.  
...4....2  
.......5\.  
5.97..2..  
.8.21...4 
```

我想传入一个编号为 0-8 的框，并仅在所选框中查找 x。拼图数组可能与上述类似。

```
protected static boolean box(int box, int x){
//box is a 3x3 subset of puzzle
//  012
//  345    <--- boxes numbered as such
//  678
    boolean present = false;
    int coordR = 0, coordC = 0;

    switch (box){
        case 0:
            coordR = 0;
            coordC = 0; 
        case 1:
            coordR = 0;
            coordC = 3;
        case 2:
            coordR = 0;
            coordC = 6;
        case 3:
            coordR = 3;
            coordC = 0;
        case 4:
            coordR = 3;
            coordC = 3;
        case 5:
            coordR = 3;
            coordC = 6;
        case 6:
            coordR = 6;
            coordC = 0;
        case 7:
            coordR = 6;
            coordC = 3;
        case 8:
            coordR = 6;
            coordC = 6;
    }
    System.out.print("Box " + box + " -\t");
    for (int i = coordR; i < 3; i++){
        for (int j = coordC; j < 3; j++){
            if (puzzle[i][j] == x){
                present = true;
                }
            System.out.print(puzzle[i][j]);
        }
    }
    System.out.println("");
    return present;
} 
```

有没有更有效的方法来做到这一点/使这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T01:54:39.403

当然：

```
protected static boolean box(int box, int d) {
    int boxY = box / 3;
    int boxX = box - (boxY * 3);

    int minX = boxX * 3;
    int maxX = minX + 3;
    int minY = boxY * 3;
    int maxY = maxX + 3;

    for (int y = minY; y < maxY; y++)
        for (int x = minX; x < maxX; x++)
            if (puzzle[x][y] == d) 
                return true;
    return false;
} 
```

供将来参考：您不应该忘记 switch 语句中的 break 语句。

# java - 比较Java中多个数组中对应值的更好方法

> ID：12344463
> 
> 赞同：1
> 
> 时间：2012-09-10T01:40:52.890
> 
> 标签：java, arrays, algorithm, arraylist, compare

我有一个 ArraysList 包含`M`已排序的列表。Arraylist 中的每个列表都具有相同的大小`N`。现在我想将`(N-1)` 每个列表中的第一个对应值与其他值进行比较，并且我想找到具有相同第一个`(N-1)`值的那些列表。直观地说，它可以通过两个 for 循环来完成，但复杂度可能高达`M*N*N`. 我想知道是否有更好的算法来做到这一点。顺便说一句，`M`可能是一个非常大的数字，而`N`往往是一个较小的数字。

对不起，我可能不太清楚。我希望最终输出是具有相同第一个`(N-1)`值的列表对。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T01:47:15.050

使用良好的散列算法计算`N-1`每一行中项目的散列码。按哈希码组织行，仅当哈希码匹配时才进行完整比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T13:35:32.693

对列表列表进行排序。

对它们进行排序`O(N M LOG M)`（假设比较是`O(N)`）。

如果您在基数排序方法中执行此操作，它实际上应该更多在行`O(N * M)`甚至`O(M LOG M)` 总计上（假设列表不相同）。

然后具有相同前缀的列表必须在此列表中的后续。

假设您正在尝试重新实现 APRIORI：是的，*请*保留候选项目集的排序列表。这正是 Apriori-Gen 构建下一轮候选者所需要的。将它们组织为排序树非常整洁，因为这在扫描数据库以计数项集时也很快。

# java - 优秀的 Java 游戏开发库

> ID：12344464
> 
> 赞同：24
> 
> 时间：2012-09-10T01:40:52.957
> 
> 标签：java, game-engine

我很快就要上 Java 的课程了，在课程的前几周我可能会有很多空闲时间。我想我会在空闲时间搞乱游戏设计，想知道是否有人可以推荐一些对游戏开发有益的 Java 库。

谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-10T01:44:16.863

我会推荐你​​：[LWJGL](http://lwjgl.org)

这些人的教程可以帮助你很多：[http ://www.youtube.com/user/TheCodingUniverse](http://www.youtube.com/user/TheCodingUniverse)

他正在详细解释如何使用 LWJGL 制作游戏。

另外，看看：[LibGDX](http://libgdx.badlogicgames.com/)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-11T15:08:59.627

我建议你看看[Slick2D](http://slick.ninjacave.com/)。它是一个易于使用的综合 2D 游戏库：一个用于试验 Java 的绝佳平台。

由于您还没有任何 Java 经验，因此我建议您远离 LWJGL 等低级库或 JMonkeyEngine 等复杂库。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-10T03:03:38.800

[JME](http://jmonkeyengine.com/)是一个值得一看的平台。

# java - 如何使用 JFreeChart 叠加拟合分布和直方图？

> ID：12344465
> 
> 赞同：2
> 
> 时间：2012-09-10T01:40:57.933
> 
> 标签：java, jframe, distribution, jfreechart

我正在使用 SSJ 库（它使用 JFreeChart 来绘制图表）使用最大似然估计来拟合数据的分布（Weibull、Gamma 等）。拟合分布后，我想将直方图与拟合的密度曲线一起绘制。我知道如何使用 HistogramChart 获得直方图，并且我知道如何使用 ContinuousDistChart 获得拟合密度图。问题是，如何将两者叠加在一个图上？HistogramChart 类具有访问底层 JFreeChart 的方法；但是，ContinuousDistChart 没有。可以用 JFreeChart 做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T09:57:18.557

如果`JFrame`方法返回的 in`umontreal.iro.lecuyer.charts.ContinuousDistChart`实际上是一个`org.jfree.chart.ChartFrame`，您可以强制转换并使用它`getChartPanel()`来向下钻取。[这里](https://stackoverflow.com/a/5522583/230513)有一个例子。

# makefile - 带有参考文件的 pandoc 的 Makefile

> ID：12344471
> 
> 赞同：5
> 
> 时间：2012-09-10T01:41:40.193
> 
> 标签：makefile, pandoc

我正在尝试为 pandoc 编写 Makefile。我希望能够键入`make filename.ext`，并且 Makefile 将自动从 编译`filename.txt`为`filename.ext`. 文件名可以是任何名为 .txt 的文件。这部分很容易。例如，我有一组规则，例如：

```
%.pdf: %.txt
    pandoc -s --smart -f markdown -o $@ $<

%.html: %.txt
    pandoc -s --smart --bibliography $(bib) -f markdown -t html --standalone -o $@ $<

%.docx: %.txt
    pandoc -s --smart --bibliography references.bib -f markdown -t docx -o $@ $<

%.tex: %.txt
    pandoc -s --smart --bibliography references.bib -o $@ $< 
```

但是，我还想从名为`filename.bib`. 因此，如果我键入`make fudge.pdf`，pandoc 会将 fudge.txt 转换为 fudge.pdf，同时合并来自 fudge.bib 的 bibtex 引用。我该怎么做呢？命令行类似于

```
pandoc -s --smart --bibliography filename.bib -f markdown -o $@ $< 
```

...但我不知道如何从 fudge.txt 获取 fudge.bib 而不做这样的事情：

```
pandoc -s --smart --bibliography $(subst .txt,.bib,$<) -f markdown -o $@ $< 
```

这将起作用，但是a）我想首先对文件 *.bib 进行一些预处理（即生成它并添加缺少的引用）并且b）在每一行都需要该宏。还有什么更优雅的吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-10T06:18:09.293

```
pandoc -s --smart --bibliography $*.bib -f markdown -o $@ $< 
```

# java - Android ListView 显示为空，但包含对象

> ID：12344472
> 
> 赞同：1
> 
> 时间：2012-09-10T01:41:40.383
> 
> 标签：java, android, xml, android-layout, android-listview

我的 android listview 有一个非常奇怪的问题。列表视图位于片段内，一切都在编译，我不再收到空指针错误，但列表视图显示为空。即使它看起来是空的，日志也说明列表视图有 385 个对象。我不明白为什么它是空的。我确实得到了一个蓝色片段，并且填充了列表视图。有任何想法吗？

我如何设置适配器：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.tabs_layout);
    initialiseTabHost(savedInstanceState);
    if (savedInstanceState != null) {
        mTabHost.setCurrentTabByTag(savedInstanceState.getString("tab")); //set the tab as per the saved state
    }

    ActivePackages = getList();
    LayoutInflater inflater = (LayoutInflater)   this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);        
    LinearLayout mContainer = (LinearLayout) inflater.inflate(R.layout.tab_frag1_layout, null);
    ListView activeList = (ListView) mContainer.findViewById(R.id.activelist);
    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, android.R.id.text1, ActivePackages);
    Log.i("valueof activeList",String.valueOf(activeList.getCount())); //returns 0 
    activeList.setAdapter(adapter);
    adapter.notifyDataSetChanged();
    Log.i("valueof activeList",String.valueOf(activeList.getCount())); //returns 385\. 
} 
```

这是片段的 xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <ListView 
        android:id="@+id/activelist"
        android:layout_width="match_parent"
        android:layout_height="match_parent" 
        android:background="#0073fd">    
    </ListView>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T17:23:53.460

在 Activity 中，您设置`setContentView(R.layout.tabs_layout);`了 tabs_layout ，然后您在 inflate 布局`R.layout.tab_frag1_layout`，`LinearLayout mContainer`但尚未添加`mContainer`in `tabs_layout`。

尝试`mContainer`在选项卡布局中设置。

# c - 成功 open() 后，程序在 read() 上停止

> ID：12344474
> 
> 赞同：-1
> 
> 时间：2012-09-10T01:41:42.843
> 
> 标签：c, io, low-level-io

几个小时以来，我一直把头撞在桌子上，试图弄清楚为什么下面的代码在`while(chars = read(fd, buff, BUFF_SZ)) > 0)`. 紧随其后的`printf`那一行没有被调用，而直接在上面的那一行是。文件描述符正在返回`0`一个有效值。

```
char *infile = argv[1];
int fd,chars;

if ((fd = open(infile, O_RDONLY) < 0)) {
    perror("open()");
    exit(1);
}
printf("%s - opened (fp: %d)\n", infile, fd);
while((chars = read(fd, buff, BUFF_SZ)) > 0){
    printf("%d\n", chars);
    for(i = 0; i < chars; i++){
        c = buff[i];
        total++;
        count[c]++;
    }
} 
```

我什至不知道如何调试它，因为在相关行之后没有触发任何内容，并且在此行之前一切看起来都很好。

完整的可编译代码：

```
#include <string.h>
#include <stdlib.h>
#include <sys/types.h>
#include <sys/stat.h>
#include <fcntl.h>
#include <stdio.h>

#include <unistd.h>

#define BUFF_SZ 4096

int main(int argc, char *argv[])
{
        if(argc != 2)
                perror("Wrong number of arguments!");

        int fd;
        char *infile = argv[1];
        char buff[BUFF_SZ];
        int chars,c,c2,i;
        long long total = 0;
        long long count[256];
        char line[71];

        printf("zeroing count[]\n");
        for (c = 0; c < 256; c++) {
                count[c] = 0;
        }

        if ((fd = open(infile, O_RDONLY) < 0)) {
                perror("open()");
                exit(1);
        }
        printf("%s - opened (fp: %d)\n", infile, fd);
        while((chars = read(fd, buff, BUFF_SZ)) > 0){
                printf("%d\n", chars);
                for(i = 0; i < chars; i++){
                        c = buff[i];
                        total++;
                        count[c]++;
                }
        }
        close(fd);
        printf("%s closed\n", infile);

        if(chars < 0){
                perror("read()");
        }

        printf("outputting results\n");
        for (c = 0;c < 256; c++) {
                printf("\t%d of 256\n", c+1);
                snprintf(line, 70, "%.70lf\n",
                         ((float)count[c] / (float)total));
                for (c2 = 68; c2; c2--) {
                        if (line[c2] != '0'
                                && line[c2] != '.')
                                break;
                }
                line[++c2] = 0;
                printf("%s\n", line);
        }
        return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T02:02:41.027

问题是您分配给`fd`.

```
if ((fd = open(infile, O_RDONLY) < 0)) { 
```

应该：

```
if ((fd = open(infile, O_RDONLY)) < 0) { 
```

线索是当您说它`fd`是 0 时。这不太可能，因为 fd 0 是标准输入，除非您在打开 infile 之前关闭标准输入，否则这种情况不会发生。

You were assigning `fd` the result of comparing the return value of `open` with 0, instead of assigning the return value itself.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T02:02:59.437

You only need to rearrange the parenthesis

```
if ((fd = open(argv[1], O_RDONLY)) < 0) { 
```

# php - 为文本区域激活 Wordpress TinyMCE 编辑器

> ID：12344476
> 
> 赞同：1
> 
> 时间：2012-09-10T01:42:05.810
> 
> 标签：php, wordpress, tinymce, textarea

我正在尝试为文本区域激活 TinyMCE。我的代码如下

```
<?php
wp_editor( '', 'content-id', array( 'textarea_name' => 'txtmessage', 'media_buttons' => false, 'tinymce_adv' => array( 'width' => '300', 'theme_advanced_buttons1' => 'formatselect,forecolor,|,bold,italic,underline,|,bullist,numlist,blockquote,|,justifyleft,justifycenter,justifyright,justifyfull,|,link,unlink,|,spellchecker,wp_fullscreen,wp_adv' ) ) ); 
echo "\r\n";
echo "\r\n";
echo "\r\n --------Original Message-------- \r\n \r\n";
echo "\r\n\r\n".$reply_message_contentmain; 
```

该代码有效。但是，我的问题是回声消息显示在 TinyMCE 区域的底部和外部。任何建议，如何解决？我不是php专家。谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T04:10:02.570

[wp_editor()](http://codex.wordpress.org/Function_Reference/wp_editor)的语法是：

```
<?php wp_editor( $content, $editor_id, $settings = array() ); ?> 
```

您已将 $content 留空并在编辑器调用后回显....所以请执行以下操作：

```
$content = '\r\n\r\n\r\n--------Original Message-------- \r\n\r\n\r\n' .$reply_message_contentmain
wp_editor( $content, 'content-id', array( 'textarea_name' => 'txtmessage', 'media_buttons' => false, 'tinymce_adv' => array( 'width' => '300', 'theme_advanced_buttons1' => 'formatselect,forecolor,|,bold,italic,underline,|,bullist,numlist,blockquote,|,justifyleft,justifycenter,justifyright,justifyfull,|,link,unlink,|,spellchecker,wp_fullscreen,wp_adv' ) ) ); 
```

这应该可行，但我目前无法从我所在的位置对其进行测试，让我知道你的进展情况（但这应该让你走上正轨）

# php - 在我的 PHP MySQL Web 应用程序中存储用户国家和州/省/郊区/地区的最有效和最简单的方法是什么？

> ID：12344478
> 
> 赞同：1
> 
> 时间：2012-09-10T01:42:15.570
> 
> 标签：php, mysql, codeigniter, database-design

> **可能重复：**
> [在数据库中存储国际地址的“最佳”方式是什么？](https://stackoverflow.com/questions/24481/what-is-the-best-way-to-store-international-addresses-in-a-database)

我希望应用程序是全球性的；这意味着来自多个国家（即澳大利亚、新西兰、美国和英国）的人可以发布列表。因为不同的国家有不同的邮政编码格式，不同的地区分类（澳大利亚和美国有州，但加拿大或英国等地不同），我如何有效地存储所有这些信息？

我只是无法想象这样的 MySQL 数据库模式会是什么样子。我不需要存储任何坐标，只需要存储用户国家、郊区/城市/地区和州/省，这样我就可以正确分类所有信息并将其显示在分类列表中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T01:52:05.417

在某些方面，这取决于您的网站获得了多少流量。有些人很可能会对此感到畏缩，但如果它是一个规模较小的网站，并且预计流量不会有太大增长，那么将您的表格标准化可能不值得。在这种情况下，将国家/地区存储为文字国家/地区名称可能就可以了。

然而，在大多数情况下——尤其是对于像国家名称这样的重复数据——我已经看到了需要规范化的方法。例如，对于一种快速简单的方法，您可以为每个国家/地区制作一个专用表并为其分配一个整数值 - 通常只是通过自动递增。在这种情况下，您可以为每个用户分配相关的国家/地区 ID。查询时，只需将两个表连接在一起即可。这通常是一种更有效的方法。

作为一个非常简单但有用的参考，O'reilly 的 Learning PHP、MySQL 和 Javascript 书籍中有一个类似的通过上述方法规范化表的示例。在大多数情况下，会有重复的数据——这是一个最小化它以及平衡效率和理论与实用性的问题。

# python - 我如何知道 python 函数使用wingware IDE 需要哪些参数

> ID：12344481
> 
> 赞同：0
> 
> 时间：2012-09-10T01:42:59.440
> 
> 标签：python

在 Visual Studio 中，您所要做的就是输入第一个括号，它会向您显示所需的参数。

在 python /wingware 中没有这样做，最好/最简单的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T08:40:15.647

这取决于 WingIDE 的版本。在免费版本 (WingIDE101) 中，您不会得到任何代码提示。您必须至少购买个人许可证，您会看到如下内容：![WingIDE 个人](../Images/7920ee30f2e6e357f365cc3312172d2c.png)

这也适用于导入和内置的模块

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T02:17:33.693

Python 是一种“动态类型”的编程语言，这意味着 IDE 在提供代码智能方面的可能性不大。

也就是说，Wing-IDE 是最适合 Python 的，您可以做一些事情：首先确保打开“Source Assistant”面板，即按 F2 并找到它在您的右侧。其次，请务必告知 IDE 您正在使用什么 Python 解释器，以及您的项目可能使用的任何特定 Python 路径；您可以在项目/项目属性中执行的所有操作。最后，有时您可能仍需要使用“assert isinstance(x,SomeType)”向 IDE 提供有关您的实例的提示。

诚然，这并不像使用 Visual Studio 那样简单，但使用 Python 及其功能强大的生态系统的充分理由，或者与 C/C++ 的轻松集成远远超过了补偿。

# android - 为什么我在 Android 设备上执行“pm”时会出现分段错误错误？

> ID：12344482
> 
> 赞同：4
> 
> 时间：2012-09-10T01:43:04.680
> 
> 标签：android, segmentation-fault, root

我的设备：htcg14 已植根

我可以在模拟器上执行 pm。

但我的设备不工作。在我执行“su”之前，它工作正常。

```
shell@android:/ $ pm
usage: pm list packages [-f] [-d] [-e] [-s] [-e] [-u] [FILTER]
       pm list permission-groups
       pm list permissions [-g] [-f] [-d] [-u] [GROUP] 
```

但是当我执行 su，然后执行 pm，我在下面得到一个错误。为什么？

```
shell@android:/ $ su
su
shell@android:/ # pm
pm
[1] + Stopped (signal)     pm
shell@android:/ # pm
pm
[2] + Stopped (signal)     pm
[1] - Segmentation fault   pm
shell@android:/ # busybox pm
busybox pm
pm: applet not found
[2] + Segmentation fault   pm
1|shell@android:/ # 
```

我怎样才能执行pm？帮助...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-12-16T18:21:58.423

在已建立的远程或本地 shell 会话中，确保设置了 LD_LIBRARY_PATH 环境变量：

```
/ # export LD_LIBRARY_PATH=/system/lib 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T03:15:10.173

升级您的`su`二进制文件 - 转到`SuperUser`应用程序并检查更新。如果这不能解决您的问题，请使用其他应用程序，例如`SuperSU`.

# php - 在 PHP 中获取模型属性

> ID：12344484
> 
> 赞同：3
> 
> 时间：2012-09-10T01:43:14.110
> 
> 标签：php, oop, reflection

我想`Model`在 PHP 中获取类的属性名称。在java中我可以这样做：

**模型.java**

```
public class Model {

    private Integer id;
    private String name;

    public Integer getId() {
        return id;
    }

    public void setId(Integer id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }
} 
```

**主.java**

```
import java.lang.reflect.Field;

public class Main {

    public static void main(String[] args) {
        for(Field field : Model.class.getDeclaredFields()) {
            System.out.println(field.getName());
        }
    }
} 
```

它将打印：

```
id
name 
```

我怎样才能在 PHP 中做到这一点？

**模型.php**

```
<?php 

    class Model {
        private $id;
        private $name;

        public function __get($property) {
            if(property_exists($this, $property))
                return $this->$property;
        }

        public function __set($property, $value) {
            if(property_exists($this, $property))
                $this->$property = $value;

            return $this;
        }
    }
?> 
```

**索引.php**

```
<?php

    # How to loop and get the property of the model like in Main.java above?
?> 
```

# 更新解决方案

**解决方案1：**

```
<?php

    include 'Model.php';

    $model = new Model();

    $reflect = new ReflectionClass($model);
    $props   = $reflect->getProperties(ReflectionProperty::IS_PRIVATE);

    foreach ($props as $prop) {
        print $prop->getName() . "\n";
    }
?> 
```

**解决方案2：**

```
<?php

    include 'Model.php';

    $rc = new ReflectionClass('Model');
    $properties = $rc->getProperties();

    foreach($properties as $reflectionProperty) {
        echo $reflectionProperty->name . "\n";
    }
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T01:46:00.723

我相信你在寻找[`ReflectionClass::getProperties`](http://php.net/manual/en/reflectionclass.getproperties.php)？

*在 PHP >= 5 中可用*

也提供，[`get_object_vars`](http://php.net/manual/en/function.get-object-vars.php)

*在 PHP 4 和 5 中可用*

两个文档页面都列出了示例，但如果您遇到问题，请更新您的问题或针对您遇到的特定问题提出不同的问题（并显示您尝试过的内容）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-10T01:46:55.357

您可以使用 PHP 的内置反射功能，就像在 Java 中一样。

```
<?php
$rc = new ReflectionClass('Model');
$properties = $rc->getProperties();
foreach($properties as $reflectionProperty)
{
    echo $reflectionProperty->name;
} 
```

在此处查看有关[反射](http://www.php.net/manual/en/book.reflection.php)的 PHP 手册。

# sorting - 如何根据clojure中另一个向量的值对一个向量进行排序

> ID：12344491
> 
> 赞同：2
> 
> 时间：2012-09-10T01:44:23.390
> 
> 标签：sorting, clojure

如何根据另一个向量的值对一个向量进行排序？

假设我有预定义的顺序：

```
(def order ["0M","6M","1Y","2Y","3Y"]) 
```

我有另一个向量`["0M","1Y","6M"]`（可能包含也可能不包含向量“订单”的所有元素）

输出应该是`["0M","6M","1Y"]`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T01:55:42.143

```
(def order ["0M","6M","1Y","2Y","3Y"])

(sort-by #(.indexOf order %) ["0M", "1Y", "6M"]) ; ("0M" "6M" "1Y") 
```

请注意，它`sort-by`返回一个序列。如果您绝对需要矢量结果，可以将输出提供给`vec`.

# c# - 按月过滤数据

> ID：12344499
> 
> 赞同：0
> 
> 时间：2012-09-10T01:45:48.570
> 
> 标签：c#, linq

我有一个包含月份数据的源数据，如下所示：

```
Oct 2011
Nov 2011
Dec 2011
Jan 2012
Feb 2012 
```

我需要选择发票所属的所有月份。发票具有以下属性：

```
Invoice.StartDate=13-10-2011;
Invoice.EndDate=11-01-2012;

sourceData.Where(x => x.SourceDate.Month >= Invoice.StartDate.Month && 
                 x.SourceDate.Year==Invoice.StartDate.Year && 
                 x.SourceDate.Month <= Invoice.EndDate.Month &&
                 x.SourceDate.Year == Invoice.EndDate.Year).ToList(); 
```

上面的查询返回 0。我期待过滤后的数据源结果如下：

```
Oct 2011
Nov 2011
Dec 2011
Jan 2012 
```

有人可以帮我实现上述目标吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T03:16:15.880

该解决方案只是创建设置为 0`DateTime`的 s，`Day`以便可以直接比较它们。它使用查询语法，因为它更方便创建新`DateTime`的 s。

```
startYearMonth = new DateTime(Invoice.StartDate.Year, Invoice.StartDate.Month, 0);
endYearMonth = new DateTime(Invoice.EndDate.Year, Invoice.EndDate.Month, 0);

(from data in sourceData
 let dataYearMonth = new DateTime(data.SourceDate.Year, data.SourceDate.Month, 0)
 where dataYearMonth >= startYearMonth && dataYearMonth <= endYearMonth
 select data).ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T03:01:37.003

您处理了年份相等的情况，但您还必须处理年份大于开始年份和年份小于结束年份的情况：

```
sourceData.Where(x => (x.SourceDate.Year > Invoice.StartDate.Year ||
                      (x.SourceDate.Month >= Invoice.StartDate.Month && 
                      x.SourceDate.Year == Invoice.StartDate.Year)) && 
                      (x.SourceDate.Year < Invoice.EndDate.Year ||
                      (x.SourceDate.Month <= Invoice.EndDate.Month &&
                      x.SourceDate.Year == Invoice.EndDate.Year))).ToList(); 
```

这个解决方案不那么可读并且容易出错，但它最接近您的原始解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T01:55:38.573

年份是独一无二的。2011 或 2012。但是您的 where 子句设置了不可能的选项。

```
x.SourceDate.Year == Invoice.StartDate.Year && x.SourceDate.Year == Invoice.EndDate.Year 
```

与

```
x.SourceDate.Year == 2011 && x.SourceDate.Year == 2012 
```

这个怎么样？

```
sourceData.Where(x => (x.SourceDate.Month >= Invoice.StartDate.Month && 
    x.SourceDate.Year==Invoice.StartDate.Year) || 
    (x.SourceDate.Month <= Invoice.EndDate.Month &&
    x.SourceDate.Year == Invoice.EndDate.Year)).ToList(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T02:03:28.857

您的代码在以下位置查找数据：

x.SourceDate.Month >= Invoice.StartDate.Month AND x.SourceDate.Year==Invoice.StartDate.Year AND x.SourceDate.Month <= Invoice.EndDate.Month AND x.SourceDate.Year == Invoice.EndDate。年

您的数据都不符合所有这些标准，您应该寻找以下内容：

(x.SourceDate.Month >= Invoice.StartDate.Month AND x.SourceDate.Year==Invoice.StartDate.Year) OR (x.SourceDate.Month <= Invoice.EndDate.Month AND x.SourceDate.Year == Invoice .EndDate.Year)

像这样：

```
sourceData.Where(x => (x.SourceDate.Month >= Invoice.StartDate.Month &&  
             x.SourceDate.Year==Invoice.StartDate.Year) ||  
             (x.SourceDate.Month <= Invoice.EndDate.Month && 
             x.SourceDate.Year == Invoice.EndDate.Year)).ToList(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-10T03:09:41.643

你不能做一个日期比较吗？我不确定源表中的值是否是实际日期项，但`Date()`如有必要，您始终可以使用构造函数来构建正确的日期。

```
sourceData.Where(x => x.SourceDate >= Invoice.StartDate && 
                 x.SourceDate <= Invoice.EndDate ).ToList(); 
```

# c# - 带有单选按钮的弹出窗口

> ID：12344500
> 
> 赞同：0
> 
> 时间：2012-09-10T01:45:56.893
> 
> 标签：c#, asp.net, radio-button

我有一个注册页面，我有一个注册按钮，当它被点击时，我必须弹出一个带有单选按钮的弹出窗口，比如父母和孩子。如何在没有 javascript 的情况下做到这一点？我正在使用 c# 和 asp.net。

```
 <body>
 <form id="form1" runat="server">
 <div>

    <asp:ScriptManager ID="ScriptManager1" runat="server">
    </asp:ScriptManager>

    <asp:RadioButtonList ID="RadioButtonList1" runat="server" AutoPostBack="True" 
        Visible="False">
        <asp:ListItem>parent</asp:ListItem>
        <asp:ListItem>child</asp:ListItem>
    </asp:RadioButtonList>
    <asp:Button ID="Button1" runat="server" onclick="Button1_Click" Text="Button" />
    <cc1:ModalPopupExtender ID="RadioButtonList1_ModalPopupExtender"     runat="server"           PopupControlID="form1"
        DynamicServicePath="" Enabled="True" TargetControlID="Button1">
    </cc1:ModalPopupExtender>

</div>
</form>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T04:07:14.470

最简单的方法是使用[JQuery](http://jqueryui.com/demos/dialog/)。我建议你试一试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T03:58:20.493

您可以只提交用户到目前为止所做的事情，然后使用这些单选按钮定向到不同的页面。或者创建一个链接以弹出一个新窗口到单选按钮。或者使用 css hoveron 效果来模仿弹出块，认为这不像按钮那样工作。

# windows - GIT获取多个存储库

> ID：12344504
> 
> 赞同：3
> 
> 时间：2012-09-10T01:46:07.773
> 
> 标签：windows, git, cmd

我有一个`github.com/userName`拥有 50 多个存储库的用户，我想将它们克隆到我的 Windows PC 上的单个目录中。最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T04:11:18.900

一种方法是再创建一个存储库，在其中将 50 多个存储库声明为**[submodules](http://git-scm.com/book/en/Git-Tools-Submodules)**。

这样，您将能够初始化/克隆您的 50 个存储库

```
git clone --recursive your_main_parent_repo 
```

（参见“[如何`git clone`包含子模块？](https://stackoverflow.com/questions/3796927/how-to-git-clone-including-submodules) ”）

但是，当您提交并推送您的任何子模块时，不要忘记提交并推送您`main_repo`的。

# java - Window Builder 忘记了哪些文件可以编辑

> ID：12344505
> 
> 赞同：3
> 
> 时间：2012-09-10T01:46:11.317
> 
> 标签：java, eclipse, window, builder, windowbuilder

我在 2 个系统之间同步我的 Eclipse，有时 Eclipse 会丢失资源管理器中的所有项目。我可以毫无问题地将它们添加回来，但是我的 Window Builder 插件忘记了哪些文件是使用 Window Builder 创建的。

我必须创建一个新的 Window Builder 文件并将相同的代码粘贴回我可以使用 Window Builder 的新文件中。

有什么方法可以选择一个 Java 文件来告诉 Window Builder 它可以编辑它吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T01:53:03.377

导入您的项目 > 右键单击​​要使用 WB 打开的类 > 打开方式 > WindowBuilder Editor

# html - -webkit-box 不缩小

> ID：12344516
> 
> 赞同：1
> 
> 时间：2012-09-10T01:48:29.407
> 
> 标签：html, css, google-chrome, webkit

我正在尝试使用`-webkit-box`.

当盒子的孩子长大时，一切都按预期工作 - 盒子长大以适应。不幸的是，当孩子们重新调整大小时，盒子仍然处于放大状态。仅当有多个孩子时才会发生这种情况。

这是设计使然吗？我可以解决这个问题（没有 javascript）吗？

我正在使用 Chrome 22.0.1229.39 beta-m。

[示例](http://jsfiddle.net/mwisnicki/s8z8N/)jsfiddle。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T02:11:24.733

您可以使用`display: -webkit-flex;`. 不幸的是，它只在 Chrome 21+ 上，但我怀疑这是一个问题，因为你已经在使用`-webkit-box`了。[http://jsfiddle.net/s8z8N/3/](http://jsfiddle.net/s8z8N/3/)

# asp.net - 如何根据特定路由将前缀附加到操作名称

> ID：12344522
> 
> 赞同：1
> 
> 时间：2012-09-10T01:49:11.767
> 
> 标签：asp.net, asp.net-web-api

我正在使用 asp.net mvc 4 和 web api。我的路线是这样的：

```
/api/{controller}/jqGrid/{action}/{id} 
```

例如，如果路线是：

```
/api/User/jqGrid/List 
```

我希望它会路由到用户控制器的动作名称“jqGrid_List”。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T06:25:55.073

不知道你为什么要这样做。但是您仍然可以在您的用户控制器中创建一个“jqGrid_List”操作并为其设置一个 ActionName，它会起作用。

**用户控制器**：

```
 [HttpGet, ActionName("List")]
    public string jqGrid_List()
    {
        return "WORKS";
    } 
```

您的**路线**：

```
routeTemplate: "api/{controller}/jqGrid/{action}/{id}" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T06:19:46.110

嗯，我不知道回答我自己的问题是否可以接受。我找到了解决方案。

首先，我需要添加一个 JqGridControllerConfiguration 属性，以将应用于控制器的默认操作选择器替换为我的。

```
[JqGridControllerConfiguration]
public class UserController : ApiController
{
    // GET: /api/User/jqGrid/List
    [HttpGet]
    public JqGridModel<User> jqGrid_List()
    {
        JqGridModel<User> result = new JqGridModel<User>();
        result.rows = Get();
        return result;
    }
} 
```

这是 JqGridControllerConfiguration 的代码：

```
public class JqGridControllerConfiguration : Attribute, IControllerConfiguration
{
    public void Initialize(HttpControllerSettings controllerSettings, HttpControllerDescriptor controllerDescriptor)
    {
        controllerSettings.Services.Replace(typeof(IHttpActionSelector), new JqGridActionSelector());
    }
} 
```

在 JqGridActionSelector 中，如果请求 URL 中存在“jqGrid/”，则修改“action”。

```
public class JqGridActionSelector : ApiControllerActionSelector
{
    public override HttpActionDescriptor SelectAction(HttpControllerContext controllerContext)
    {
        Uri url = controllerContext.Request.RequestUri;
        if (url.Segments.Any(s => string.Compare(s, "jqGrid/", true) == 0))
        {
            controllerContext.RouteData.Values["action"] = "jqGrid_" + controllerContext.RouteData.Values["action"].ToString();
        }

        return base.SelectAction(controllerContext);
    }
} 
```

# c++ - 使用 MFC 时由于“__cdecl”和“__thiscall”调用约定不匹配导致的链接器错误？

> ID：12344524
> 
> 赞同：4
> 
> 时间：2012-09-10T01:49:53.333
> 
> 标签：c++, visual-studio-2008, calling-convention

我正在使用 Visual Studio 2008。仅在使用 MFC CString（与 std::wstring 相比）构建包含静态链接库的项目时，我收到链接器错误。

所以这有效：

```
//header
class FileProcessor
{
    public:
        class iterator;
        friend class iterator;
    //...

    class iterator : public std::iterator<std::input_iterator_tag, std::vector<std::vector<std::wstring>>>
    {
    public:
    //...
    std::vector<std::vector<std::wstring>> operator*() const; 
    }
} 

//cpp 
std::vector<std::vector<std::wstring>> FileProcessor::iterator::operator*() const
{
    return _outerRef->_pimpl->_saxHandler->GetCurrentTable();
} 
```

但是这个

```
//header
#include <afx.h>

class FileProcessor
{
    public:
    class iterator;
    friend class iterator;
    //...

    class iterator : public std::iterator<std::input_iterator_tag, std::vector<std::vector<CString>>>
    {
    public:
        //...
        std::vector<std::vector<CString>> operator*() const; 
    }
} 

//cpp 
std::vector<std::vector<CString>> FileProcessor::iterator::operator*() const
{
    return _outerRef->_pimpl->_saxHandler->GetCurrentTable();
} 
```

给出链接器错误：

```
FileProcessingTests.obj : error LNK2019: unresolved external symbol "public: class
std::vector<class std::vector<class std::basic_string<wchar_t,struct 
std::char_traits<wchar_t>,class std::allocator<wchar_t> >,class std::allocator<class 
std::basic_string<wchar_t,struct std::char_traits<wchar_t>,class 
std::allocator<wchar_t> > > >,class std::allocator<class std::vector<class 
std::basic_string<wchar_t,struct std::char_traits<wchar_t>,class 
std::allocator<wchar_t> >,class std::allocator<class std::basic_string<wchar_t,struct 
std::char_traits<wchar_t>,class std::allocator<wchar_t> > > > > > __thiscall 
FileProcessing::FileProcessor::iterator::operator*(void)const "
(??Diterator@FileProcessor@FileProcessing@@QBE?AV?$vector@V?$vector@V?$basic_string@_WU?
$char_traits@_W@std@@V?$allocator@_W@2@@std@@V?$allocator@V?$basic_string@_WU?$char_traits
@_W@std@@V?$allocator@_W@2@@std@@@2@@std@@V?$allocator@V?$vector@V?$basic_string@_WU?$
char_traits@_W@std@@V?$allocator@_W@2@@std@@V?$allocator@V?$basic_string@_WU?$char_traits
@_W@std@@V?$allocator@_W@2@@std@@@2@@std@@@2@@std@@XZ) referenced in function "void 
__cdecl TestUnicodeSingleTable(void)" (?TestUnicodeSingleTable@@YAXXZ) 
```

在这两个项目中，调用约定都`__cdecl`在项目文件中指定。那么为什么`__thiscall`甚至会出现，我该如何解决呢？我必须使用`__cdecl`，因为我正在引用使用`__cdecl`.

**附加项目设置：**

这两个项目都有以下配置设置：

*   “使用 MFC”：在共享 DLL 中使用 MFC
*   “使用 ATL”：不使用 ATL
*   “字符集”：使用 Unicode 字符集

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T04:45:06.223

来自[MSDN](http://msdn.microsoft.com/en-us/library/ek8tkfbw%28v=vs.80%29.aspx)：

> __thiscall 调用约定用于成员函数，是不使用变量参数的 C++ 成员函数使用的默认调用约定。

所以 __thiscall 是方法的默认调用约定。这可能是问题所在。

我建议尝试为您遇到问题的方法添加一个 __cdecl 以查看会发生什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T06:01:04.727

它看起来`FileProcessingTests.cpp`没有被重建或者它正在使用一个陈旧的标题。该目标文件仍在尝试链接到`std::wstring`变体而不是`CString`变体。

错误消息是一种冗长的方式，表示未解析的外部符号用于：

```
std::vector<std::vector<std::wstring>> FileProcessor::iterator::operator*() const 
```

请记住，这`std::wstring`只是一个 typedef：

```
class std::basic_string<wchar_t,struct std::char_traits<wchar_t>,class std::allocator<wchar_t> > 
```

如果您使默认模板参数显式。错误消息也将默认模板参数`std::vector`设为显式，这就是错误消息如此可怕的原因。

# ios - 将 MagicalRecord 与 NSUndoManager 一起使用

> ID：12344526
> 
> 赞同：0
> 
> 时间：2012-09-10T01:50:01.230
> 
> 标签：ios, core-data, magicalrecord

我们知道，在 iOS 上，NSManagedObjectContext 没有默认的 NSUndoManager 实例。如果我们想在 Core Data 中支持撤销/重做，我们需要实例化我们自己的。

这是我在 appDelegate 中写的：

```
(BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
// Override point for customization after application launch.
[MagicalRecord setupAutoMigratingCoreDataStack];
NSUndoManager *undo = [[NSUndoManager alloc] init];
[[NSManagedObjectContext MR_context] setUndoManager:undo];

return YES;
} 
```

但后来，当我观察时：

```
NSLog(@"%p", [NSManagedObjectContext MR_context].undoManager); 
```

结果总是什么都没有，这意味着 undoManager 从未被实例化。任何人都可以建议在使用 MagicalRecord 时添加撤消/重做支持的正确方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-07T08:58:22.710

以下代码不起作用，因为您使用 MR_context 创建了一个新上下文。这个新的上下文将在语句之后被释放。

```
[[NSManagedObjectContext MR_context] setUndoManager:undo]; 
```

您要设置默认上下文的撤消管理器

```
[[NSManagedObjectContext MR_defaultContext] setUndoManager:undo]; 
```

# proxy - WebSockets 和应用程序代理连接问题

> ID：12344529
> 
> 赞同：3
> 
> 时间：2012-09-10T01:50:12.527
> 
> 标签：proxy, websocket, burp

有没有人有一个使用应用程序代理（例如 burp 或 zap）的 websocket 连接？

例如，我有一个工作版本的 jWebSockets，可以在我的本地机器上完美运行。

但是，当我使用 Burp 或 Zap 拦截时，连接超时并且我没有收到服务器响应。

我增加了服务器端的超时设置，但这并没有什么不同。

我也尝试过使用不可见的代理选项。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T10:25:50.067

目前支持 Web 套接字的工具很少，因为它确实是一个全新的协议。

当前版本的 ZAP (1.4.1) 不会，但下一个主要版本将：[http ://code.google.com/p/zaproxy/wiki/GSoC2012_WebSockets](http://code.google.com/p/zaproxy/wiki/GSoC2012_WebSockets)

如果您可以从主干构建 ZAP，那么它将支持 Web 套接字 - 在此处构建说明：[http ://code.google.com/p/zaproxy/wiki/Building](http://code.google.com/p/zaproxy/wiki/Building)

它将允许您查看 Web 套接字流量、拦截和更改它*并*对其进行模糊测试以尝试查找漏洞。

如果您有任何问题，请告诉我们，例如通过 ZAP 开发人员组：[http ://groups.google.com/group/zaproxy-develop](http://groups.google.com/group/zaproxy-develop)

西蒙（ZAP 项目负责人）。

更新 - ZAP 中的 Web Sockets 支持现在在每周跨平台版本中提供，可以从[http://code.google.com/p/zaproxy/downloads/list](http://code.google.com/p/zaproxy/downloads/list)下载，因此您不必自己构建它

# c++ - C++ Builder XE2：未找到 Color2RGB

> ID：12344532
> 
> 赞同：1
> 
> 时间：2012-09-10T01:51:00.863
> 
> 标签：c++, c++builder, vcl, c++builder-xe2

该函数的[文档](http://docwiki.embarcadero.com/Libraries/en/Vcl.Imaging.GIFImg.TGIFColorMap.Color2RGB)`TGIFColor Color2RGB(TColor)`应该在`Vcl.Imaging.GIFImg.hpp`源文件中。但是当我尝试使用它时，我得到了错误`Call to undefined function 'Color2RGB'`。这是一个简短的例子：

```
//---------------------------------------------------------------------------
#include <Vcl.Imaging.GIFImg.hpp>
#pragma hdrstop
//---------------------------------------------------------------------------
#pragma package(smart_init)

TGIFColor TestRGB(TColor fColor) {

   TGIFColor RGBColor = Color2RGB(fColor);
   return RGBColor;
} 
```

谁能解释如何调用这个函数，因为文档没有！？

// 谢谢

PS。我确实以“你好”开始了这个问题，但即使我编辑了这个问题，它也会被删除:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T01:59:18.180

再次更仔细地阅读文档。`Color2RGB()`不是像您尝试使用它那样的独立功能。它是`TGIFColorMap`类的静态方法，例如：

```
TGIFColor TestRGB(TColor fColor)
{
    TGIFColor RGBColor = TGIFColorMap::Color2RGB(fColor);
    return RGBColor;
} 
```

# c# - .NET 中的透明窗口

> ID：12344537
> 
> 赞同：0
> 
> 时间：2012-09-10T01:51:44.787
> 
> 标签：c#, wpf, winforms, .net-4.0

winforms或WPF有什么办法可以做这种UI吗？透明的模糊窗口。

![在此处输入图像描述](../Images/fb86b0233e5cb7af9aae3dec6f18d1e5.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T02:06:10.347

前注：Windows 8 移除了 Aero Glass 效果。Windows 将以纯色背景出现，其中有玻璃（就像当您禁用玻璃效果但仍运行 DWM 时它们在 Windows 7 上的显示方式一样）。

也就是说，效果是使用Win32的`DwmExtendFrameIntoClientArea`函数完成的。在您的程序中使用它会有所不同，具体取决于您使用的是 WPF 还是 WinForms（因为 WPF 窗口做了一些非常有趣的窗口子类化，当然，WPF 控件在很大程度上是无窗口的）。

要获得一个“全玻璃”窗口，您只需使用该`DwmExtendFrameIntoClientArea`函数来填充您的窗口，而不仅仅是前 50px 左右，这是 IE 和其他浏览器所做的。

这是有关如何使用 WPF 执行此操作的规范 MSDN 文章：http: [//msdn.microsoft.com/en-us/library/ms748975.aspx](http://msdn.microsoft.com/en-us/library/ms748975.aspx)

对于 WinForms，请参阅此博客文章：http: [//blogs.msdn.com/b/tims/archive/2006/04/18/578637.aspx](http://blogs.msdn.com/b/tims/archive/2006/04/18/578637.aspx)

享受吧，但考虑到 Windows 8 并不会长久……

# c# - 模拟网络共享以共享文件

> ID：12344541
> 
> 赞同：1
> 
> 时间：2012-09-10T01:52:16.860
> 
> 标签：c#, networking, window, file-sharing

很多时候，一个程序需要一个**恰好位于网络位置的文件**。以 Outlook 为例。如果我将 Outlook 数据库（.pst 文件）放置在网络位置的哪个位置，则 Windows 将使用户“透明”，并且 Outlook 仍然可以工作。另一个例子可能是快速书等等。（只要你有读写权限）

对于此示例，让我们使用 Microsoft Word。如果我想在网络中的其他计算机上打开一个文件，我可以导航到它：

![在此处输入图像描述](../Images/1c86d49352bff842994848602b3fa524.png)

并打开我想要的文件，因为我们在同一个网络上。

**现在我的问题是**我将如何模拟它？我想在互联网上有一个虚拟目录，我可以在其中放置我的 .pst 文件，然后从 Windows 资源管理器中选择它：

![在此处输入图像描述](../Images/5c84a696a76c952afc5ccec5203ec653.png)

（这个例子显然行不通）

有可能做到吗？我相信 Windows 使用与主机的 tcp 连接，然后主机用它共享的文件进行响应。我想实现一个程序，这样我就可以避免创建一个 vpn。此外，如果我可以将我的 pst（outlook 数据库文件）放在 Internet 上，这样我的所有计算机都可以打开同一个 Outlook 数据库，那就太好了。

**请注意，我提出这个问题的目的是在网络位置打开 Outlook 数据库文件。我希望能够从 Internet 上选择一个文件`windows open file dialog`。同样在当今世界，几乎所有事物都存在。我想创造它哈哈**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T02:23:33.043

Windows 为 CIFS（通用 Internet 文件系统，以前的 SMB 服务器消息块）资源提供网络重定向器。编写 CIFS 服务器是最简单的方法。

但您也可以使用其他现有重定向器之一，例如 NFS、WebDAV 或 Netware。并且还可以编写新的重定向器（虽然这需要内核模式代码，但有一些开发工具包可以为您提供内核代码，类似于 Linux FUSE 文件系统）。

如果您想避免编写代码，基于 HTTPS 的 WebDAV 将为您提供安全访问（不需要 VPN 层）并且软件已经存在。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-10T02:15:37.490

这取决于如何设置 Internet 上的服务器以使其文件可用。大多数情况下，tcpip 不是用于此的协议——它是 FTP、SFTP、HTTP 或类似的东西。我相信 Windows 资源管理器使用本地网络上的 RPC 调用来完成此操作。我不认为您将能够使用“打开文件对话框”，您将不得不编写类似的东西来处理您需要使用的协议。

# ios - iOS 上的 initwithCoder 和 encodewithCoder

> ID：12344546
> 
> 赞同：0
> 
> 时间：2012-09-10T01:52:54.767
> 
> 标签：ios, initwithcoder

我试图`UIButton`通过使用来保存 a 的状态`encodeWithCoder:`

```
- (void)encodeWithCoder:(NSCoder *)encoder
{  
  [coder encodeObject:self.button1 forKey:@"button1"];
} 
```

我的`initWithCoder:`样子是这样的：

```
-(void) initWithCoder:(NSCoder*)decoder
{
  self.button1 = [coder decodeObjectForKey:@"button1"];
} 
```

我保存了`button1`颜色、方向、角度等的状态。我可以用它来恢复它，`initwithCoder;`但是当我点击按钮时它没有响应。外观已恢复，但`IBAction`不再调用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T02:00:31.127

如果您手动创建/恢复按钮，那么您将取消 InterfaceBuilder/NIB 加载为您执行的自动设置。

您需要将目标操作显式添加到按钮。*您的示例代码中也有一些语法错误。*

```
-(void) initWithCoder:(NSCoder*)decoder
{
  self.button1 = [coder decodeObjectForKey:@"button1"];
  [self.button1 addTarget:self action:@selector(yourIBActionMethod:) forControlEvents:UIControlEventTouchUpInside];
} 
```

# c# - 文件名中有分号或左括号时的 FileUpload.FileName 行为

> ID：12344551
> 
> 赞同：13
> 
> 时间：2012-09-10T01:53:34.500
> 
> 标签：c#, string, char, contains

我有一个 FileUpload 控件，文件名有某些限制，某些字符是不允许的。以下代码适用于大多数字符，但由于某种原因不适用于其他字符：

```
if (FileUpload1.HasFile)
{
    if (FileUpload1.FileName.Contains('#') ||
        FileUpload1.FileName.Contains('&') ||
        FileUpload1.FileName.Contains(';') ||
        FileUpload1.FileName.Contains('{') ||
        FileUpload1.FileName.Contains('}') ||
        FileUpload1.FileName.Contains('+'))
    {
        //error: bad character detected
    }
} 
```

我可能可以使用正则表达式以另一种（更好的）方式做到这一点，但首先我真的想知道为什么上面的方法不起作用。

在 FileName**中**检测到以下字符：

```
# & } + 
```

在 FileName**中未**检测到以下字符：

```
; { 
```

为什么？

**编辑：**我尝试过的文件名示例。

*   Final+Version.pdf //+ 检测到

*   最终版本；版本.pdf //; 没有检测到

*   WhyHello{there.pdf //{ 未检测到

*   检测到策略}20120303.pdf //}

正如下面评论中提到的，字符串上的这些字符没有问题，那么可能是“FileName”的值或FileUploader处理文件名的方式有问题？

**编辑 2:** Breakpoint step through 显示，以 Policies{20120303.pdf 为例，FileName 的值为 Policies.pdf。所以这不再是 .Contains() 的问题，而是 FileUpload 和 FileName 的问题。

所以新的问题是，我该如何处理？我不希望包含这些字符的文件通过，并且我不希望提交的文件与用户命名它们的名称不同。因此，如果有人尝试提交“Policies{20120303.pdf”，我需要以下两个结果之一：

1.  检测到无效名称，过程中止
2.  提交带有完整和原始名称的文件，Policies{20120303.pdf

**编辑 3：** 如果我提交一个具有以下名称的文件：**foo;bar{baz.txt**， FileUpload.FileName 的值为“ **foo.txt** ”

**编辑 4：** 感谢下面的一些有用的评论，我尝试使用不同的浏览器（Chrome），它工作得很好！文件名保持不变，即使是 foo;bar{baz.txt。我使用 Opera，但它不起作用。我想这将它缩小到浏览器特定问题的范围内。我认为没有任何方法可以在 Opera 中正常工作，除非有人有任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T17:32:56.577

我在我的程序中使用了以下代码来检查文件名：

```
filename = txtFileName.Text;
if (filename == "" || (filename.IndexOfAny(System.IO.Path.GetInvalidFileNameChars()) != -1))
{
// Ask for a new file name, or whatever else you need to do.
} 
```

然而，在我的情况下，我在文件对象中设置文件名之前检查用户提供的字符串。我认为这可能也可以解决您的问题。

我猜在某个地方有一个函数可以在你验证它之前改变字符串。

# algorithm - 算法分析

> ID：12344552
> 
> 赞同：-1
> 
> 时间：2012-09-10T01:53:37.167
> 
> 标签：algorithm, math, analysis, operation

假设一台机器的吞吐量为 70 ops/s。假设我们有一个时间复杂度为 *T(n) = 2n^2 + 120的算法*

*确定机器对于大小为n = 8*的输入执行所述算法需要多少小时。

* * *

它是否正确？

*T(n) = 2n^2 + 120*

*T(8) = 2(8)^2 + 120* = *248* * *70* * *1000*

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T02:02:12.607

一些提示：

*   如果你的程序执行 70 次操作，需要多少秒？

*   一小时有多少秒？（一分钟多少秒，一小时多少分钟？）

# ruby - 为什么不是 [1..5] == [1,2,3,4,5]？

> ID：12344553
> 
> 赞同：6
> 
> 时间：2012-09-10T01:53:51.503
> 
> 标签：ruby, arrays, comparison, compare, range

为什么不是`[1..5] == [1,2,3,4,5]`？

为什么不是`[1..5].to_a == [1,2,3,4,5]`？

如何从 转换`[1..5]`为`[1,2,3,4,5]`？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-10T01:59:03.897

`[1..5]`是一个只有一个元素的数组，范围对象`1..5`

`[1..5].to_a`还是`[1..5]`

`(1..5).to_a`是`[1,2,3,4,5]`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T01:58:06.970

`[1..5]`是一个具有一个元素的数组 - 一个范围对象，所有迭代它的尝试都将失败。数组中可以包含多种对象。在上面的示例中，我将范围视为一个范围，并直接从中创建任何数组。

```
1.9.3-p125 :008 > (1..5).to_a  # Note regular parens.
 => [1, 2, 3, 4, 5] 
1.9.3-p125 :009 > 
```

要更*仔细地*做你所说的 - 从 [1..5] 开始 - 你可以这样做：

```
1.9.3-p125 :013 > newarray = []

1.9.3-p125 :014 > [1..5][0].each {|e| newarray << e}
 => 1..5 
1.9.3-p125 :015 > newarray
 => [1, 2, 3, 4, 5] 
1.9.3-p125 :016 > 
```

# javascript - Highchart Js 柱形图堆叠和分组

> ID：12344554
> 
> 赞同：1
> 
> 时间：2012-09-10T01:53:54.573
> 
> 标签：javascript, highcharts

我使用柱状堆叠和分组图表进行比较。

检查此示例代码：@fiddle [http://jsfiddle.net/wvT85/](http://jsfiddle.net/wvT85/)

我正在尝试比较两个男性堆栈

我希望分组图表具有相同的项目颜色并且没有重复的图例。

即，无论在哪里使用 john，它都应该具有相同的颜色，而 legand 应该只有一个 john 而不是两个。

任何人都可以帮助我处理此代码。

```
$(function () {
    var chart;
    $(document).ready(function() {
        chart = new Highcharts.Chart({

            chart: {
                renderTo: 'container',
                type: 'column'
            },

            title: {
                text: 'Total fruit consumtion, grouped by gender'
            },

            xAxis: {
                categories: ['Apples', 'Oranges', 'Pears', 'Grapes', 'Bananas']
            },

            yAxis: {
                allowDecimals: false,
                min: 0,
                title: {
                    text: 'Number of fruits'
                }
            },

            tooltip: {
                formatter: function() {
                    return '<b>'+ this.x +'</b><br/>'+
                        this.series.name +': '+ this.y +'<br/>'+
                        'Total: '+ this.point.stackTotal;
                }
            },

            plotOptions: {
                column: {
                    stacking: 'normal'
                }
            },

            series: [{
                name: 'John',
                data: [5, 3, 4, 7, 2],
                stack: 'male'
            }, {
                name: 'Joe',
                data: [3, 4, 4, 2, 5],
                stack: 'male'
            }, {
                name: 'John',
                data: [2, 5, 6, 2, 1],
                stack: 'male2'
            }, {
                name: 'Joe',
                data: [3, 0, 4, 4, 3],
                stack: 'male2'
            }]
        });
    });

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-27T10:31:02.363

使用链接到...

[http://api.highcharts.com/highcharts#plotOptions.series.linkedTo](http://api.highcharts.com/highcharts#plotOptions.series.linkedTo)

它的演示如下：

```
linkedTo: ':previous', 
```

[http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/demo/arearange-line/](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/demo/arearange-line/)

这样图例仍然有效，您不需要将颜色设置为相同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-06T09:01:08.737

我最近遇到了同样的问题。所以我所做的是，结合上面的两个答案来解决问题。

[http://jsfiddle.net/sanshila/2g79dhds/1/](http://jsfiddle.net/sanshila/2g79dhds/1/)

```
series: [{
            name: 'John',
            data: [5, 3, 4, 7, 2],
            stack: 'male',
            color: '#6666FF',
            events: {
                legendItemClick: function (event) {
                    this.visible ? this.chart.get('johnId').hide() : this.chart.get('johnId').show();
                }
            }
        }, {
            name: 'John',
            id: 'johnId',
            color: '#6666FF',
            showInLegend: false,
            data: [2, 5, 6, 2, 1],
            stack: 'male2'
        }] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T00:23:54.560

我认为这就是你想要的：http: [//jsfiddle.net/b3AF9/21/](http://jsfiddle.net/b3AF9/21/)

正如本所说，手动设置堆栈的颜色。然后将 ids 给第二个堆栈并添加

```
event: {
  legendItemClick: function(event){
     this.visible? 
       this.chart.get('Joe2').hide() :
       this.chart.get('Joe2').show();
  }
} 
```

在第一个堆栈中进行系列。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T02:44:55.857

您可以手动定义系列颜色并隐藏图例中的第二组以执行您想要的操作，但这并不能真正链接数据。例如，如果您单击图例，它不会隐藏两个 john。据我所知，不支持这种在不同系列中关联 2 个点的类型。我想说我认为您可能想重新考虑如何表示数据，我仍然不明白您要完成什么。

系列：[{名称：'约翰'，颜色：'蓝色'，数据：[5,3,4,7,2]，堆栈：'男性'}，{名称：'约翰'，颜色：'蓝色'， showInLegend:false, 数据: [2, 5, 6, 2, 1], 堆栈: 'male2' }] });

[http://jsfiddle.net/wvT85/2/](http://jsfiddle.net/wvT85/2/)

# internet-explorer - 如何使用 .getelementbyID 并复制内部 html - VBA

> ID：12344559
> 
> 赞同：0
> 
> 时间：2012-09-10T01:54:35.447
> 
> 标签：internet-explorer, vba, dom, getelementbyid

因此，我设置了对 Microsoft HTML 对象库和 Microsoft Internet 控件的引用，下面是通过获取元素 id 来输入值的示例：

```
With HTMLDoc

.getElementById("USER").setAttribute "value", "myuser"
.getElementById("PASSWORD").setAttribute "value", "mypass"
.getElementById("Button").Click

End With 
```

我很想知道，假设有一个名为“ReturnValue”的 ID 标记，其中包含我想复制到剪贴板的内部 html 中的字符串，我将如何在该实例中使用 .getElementByID 和 COPY？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T05:47:14.453

你可以像这样得到innerHTML：

```
TxtHtml = .getElementById("elementId").InnerHtml 
```

然后，您可以从 VBA 设置剪贴板文本：[http ://word.mvps.org/faqs/macrosvba/ManipulateClipboard.htm](http://word.mvps.org/faqs/macrosvba/ManipulateClipboard.htm)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-10T02:04:59.593

使用 JQuery 访问 innerHtml 或 Html 任何你想要的。

```
var textToCopy = $(#ReturnValue).innerHtml(); 
```

要将文本复制到剪贴板，您可以参考[使用 FireFox、Safari 和 Chrome 在剪贴板上复制/放置文本](https://stackoverflow.com/questions/127040/copy-put-text-on-the-clipboard-with-firefox-safari-and-chrome)

# asp.net-mvc-3 - 将来自多个表的自定义视图模型数据合并到一个视图中

> ID：12344561
> 
> 赞同：1
> 
> 时间：2012-09-10T01:54:55.140
> 
> 标签：asp.net-mvc-3, linq

我不明白为什么我找不到任何清楚地解释如何使用 MVC 做到这一点的东西。似乎是一个非常常规的问题：

我有三张桌子：

```
PackageName: PackageNameID,PackageName
Food: FoodID,Food
PackageContent: PackageContentID, PackageNameID, FoodID, Qty 
```

该应用程序应该描述食品包装。例如，一个名为“A”的包可能包含 4 个洋葱和 3 个辣椒。另一个包裹“B”可能包含 2 个面包卷和 2 个洋葱。

目前我有一个收集数据的自定义视图模型（“PackageNameModel”）：

```
public ViewResult Index() {
    var viewModel =
        from pn in db.PackageNames
        from pc in db.PackageContents
            .Where(p => p.PackageNameID == pn.PackageNameID).DefaultIfEmpty()
        from f in db.Foods
            .Where(f => f.FoodID == pc.FoodID).DefaultIfEmpty()
        select new PackageFoodModel { PackageName = pn, PackageContent = pc, Food = f };
    return View( viewModel );      
} 
```

这会正确返回数据，但我该怎么做才能使视图实际上是对应用程序有用的视图？

在我看来使用这个：

```
@foreach (var item in Model) {
<tr>
    <td>
        @Html.DisplayFor(modelItem => item.PackageName.PackageName1 ) , 
        @Html.DisplayFor(modelItem => item.Food.Food1)=@Html.DisplayFor(modelItem => item.PackageContent.Qty)
    </td>
    <td>
        @Html.ActionLink("Edit", "Edit", new { id=item.PackageName.PackageNameID }) |
        @Html.ActionLink("Details", "Details", new { id = item.PackageName.PackageNameID }) |
        @Html.ActionLink("Delete", "Delete", new { id = item.PackageName.PackageNameID })
    </td>
</tr>
} 
```

我能够显示以下内容：

```
 - A , Onions=4  Edit | Details | Delete
 - A , Peppers=3  Edit | Details | Delete
 - B , Rolls=2  Edit | Details | Delete   
 - B , Onions=2  Edit | Details | Delete 
```

这不是很有用。我想要做的是显示如下内容：

```
 - A (Onions=4,Peppers=3)   Edit | Details | Delete
 - B (Rolls=2,Onions=2) Edit | Details | Delete 
```

最后，导航到“编辑”操作后的下一页将为包装提供可编辑的名称以及所有可用食品的表格和相邻的数量框，以便可以更新每个包装中的食品/数量。

谁能解释这是如何在 MVC 框架中完成的？我在网上/书籍中看到的所有教程都处理更简单的数据。谁能指出一些处理此类问题的示例代码/教程？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T02:15:18.473

您需要汇总结果。

像这样创建一个视图模型

```
public class PackageViewModel
{
  public int ID { set;get;}
  public string Name { set;get;}
  public List<FoodItem> FoodItems { set;get;}
  public PackageViewModel()
  {
     FoodItems=new List<FoodItem>();
  }
}
public class FoodItem
{
  public string FoodName { set;get;}
  public int Quantity { set;get;}
} 
```

在您的 Get 操作中，您需要汇总来自数据访问层的数据中的数据并填充到 ViewModel 列表

```
public ActionResult IndeX()
{
  List<PackageViewModel> listVM=new List<PackageViewModel>();

   //Get your data and do aggregation and fill in listVM

  return View(listVm)l
} 
```

在我们看来，

```
@model List<PackageViewModel>

@foreach(var item in Model)
{
  <tr>
   <td>@item.Name</td>
   <td>
       foreach(var food in item.FoodItems)
       {
         @food.FoodName - @food.Quantity
       }
   </td>
   <td>
      @Html.ActionLink("Edit","Edit",new {@id=item.ID})
   </td>
  </tr>
} 
```

# javascript - getSript 在同一个对象上多次添加处理程序

> ID：12344562
> 
> 赞同：1
> 
> 时间：2012-09-10T01:55:20.107
> 
> 标签：javascript, jquery, ajax

我有 2 个 div，它们有多个元素，每个元素都有选项（事件）。在第一个 div 中，每个元素都有一个按钮，用于在第二个 div 中加载子元素。这些孩子有一个编辑按钮，可以打开一个用户可以编辑的对话框。

这是脚本：

```
$("#Content").load("elements.php?id=5", function(){
    $.ajaxSetup({cache: true});
    $.getScript("../js/elements.js", function(){
        $.ajaxSetup({cache: false});
    });
}) 
```

问题是：当我`#Content`用它的脚本加载时，它只在第一次运行良好，它打开一个对话框，但如果我加载两次，它打开**两个**对话框，然后三个等等。

如何删除我加载的最后一个脚本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T02:07:15.190

有绑定吗？任何直播等？我不确定是您当前的代码导致了此问题，还是 elements.js 是我不知道其中的内容。我确实建议检查[Jquery stopImmediatePropagation()](http://api.jquery.com/event.stopImmediatePropagation/)。我希望这能让你走上正确的道路。

# php - 模型结构：Zend 框架的 Data Mapper 与 Orm

> ID：12344569
> 
> 赞同：-1
> 
> 时间：2012-09-10T01:57:05.223
> 
> 标签：php, zend-framework, orm, rad

我习惯于在我的 dbtable 类中创建我的业务逻辑，但从我读到的内容来看，这是一个糟糕的设计。

我一直在阅读很多关于 zend 框架的模型架构的文章，但我仍然对应该使用哪种方法感到困惑。

根据您的经验，您使用什么方法？（Datamappers 或使用 ORM）*（同时考虑快速应用程序开发）*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T07:37:25.527

尝试提供一点帮助，

使用 ZF DbTable 类来保存业务逻辑的原因是这样做违反了“关注点分离”。

通过执行以下操作：

```
class Application_Model_DbTable_Genre extends Zend_Db_Table_Abstract
{
    protected $_name = 'genre';
    protected $_primary = 'id';

    public function fetchAllGenre()
    {
        $select = $this->select();
        $select->order('name ASC');

        $result = $this->fetchAll($select);

        return $result;
    }
} 
```

您的模型与您的数据库耦合。因此，如果您必须更改数据源，您将不得不重构触及该表的每一段代码。

现在您可以并且应该使用 ZF 提供的 DbTable 模型，但要与数据映射器和域模型一起使用。

```
//Domain Model
class Video_Model_Genre extends Jgs_Model_Entity_Abstract
{
    protected $name;

    public function getName()
    {
        return $this->name;
    }

    public function setName($name)
    {
        $this->name = $name;
        return $this;
    }
}

//The mapper
class Video_Model_Mapper_Genre extends Jgs_Model_Mapper_Abstract
{
    protected $_tableName = 'genre';

    function __construct(Zend_Db_Table_Abstract $tableGateway = null)
    {
        //Pass in the DbTable Model, This is the database adapter for this mapper.
        $tableGateway = new Application_Model_DbTable_Genre();
        parent::__construct($tableGateway);
    }

   //create the domain object 
    protected function createEntity($row)
    {
        $data = array(
            'id'   => $row->id,
            'name' => $row->name
        );

        return new Video_Model_Genre($data);
    }

    public function saveGenre(Video_Model_Genre $genre)
    {

        if (!is_null($genre->id)) {
            $select = $this->getGateway()->select();
            $select->where('id = ?', $genre->id);
            $row = $this->getGateway()->fetchRow($select);
        } else {
            $row = $this->getGateway()->createRow();
        }
        $row->name = $genre->name;

        $row->save();
        return $row;
    }
} 
```

[注意：] 如果你想查看用于构建这些类的基类/抽象类，[Github、Library](https://github.com/jschoenwolf/home-local.git)

使用映射器和域模型真正重要的是域模型不关心数据来自哪里。如果您有多个数据源，您可以为构建相同域模型的每个数据源构建一个映射器。

例如，如果我有一个 XML 文件，其中包含构建“流派”对象所需的所有信息，我可以构建一个使用该 XML 文件作为数据源的映射器，但我仍将使用相同的域模型来构建“流派”对象。

至于使用 ORM。在你知道如何使用它之后，ORM 会很棒。大多数 ORM 的学习曲线非常陡峭。面对现实吧，如果您还不知道和理解如何实现数据映射器模式，那么您可能还没有准备好使用 ORM。我知道我不是（我花了 3 个月的时间才用映射器走到这一步）。

# c# - myClass 的隐式转换失败 当 T 是 IEnumerable 时

> ID：12344573
> 
> 赞同：6
> 
> 时间：2012-09-10T01:57:33.453
> 
> 标签：c#, .net, .net-3.5

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-10T02:39:07.780

啊，你被 C# 语言规范的一个不太明显的限制所挫败。

> 对于给定的源类型 S 和目标类型 T，如果 S 或 T 是可空类型，则令 S [0]和 T [0]引用它们的基础类型，否则 S [0]和 T [0]分别等于 S 和 T。仅当满足以下所有条件时，才允许类或结构声明从源类型 S 到目标类型 T 的转换：
> 
> · S [0]和T [0]是不同的类型。
> 
> · S [0]或T [0]是发生运算符声明的类或结构类型。
> 
> · **S [0]和T [0]都不是接口类型。**
> 
> · 排除用户定义的转换，不存在从 S 到 T 或从 T 到 S 的转换。

现在，这似乎并不适用，因为您的隐式转换函数需要一个泛型参数，但这个限制似乎同样适用于用作泛型参数的类型。我拿了你的例子并改为`IEnumerable`（`List`一个完整的类型，而不仅仅是一个接口），它编译没有错误。

长话短说，您只需要在`WcfResult`构造函数中包装任何返回接口类型的表达式，因为隐式转换将不可用。

```
return new WcfResult<IEnumerable<Client>>(Client.GetClients(clientSearcher, LdapHelper, 100)); 
```

# c# - Apollo Stomp ActiveMQ 创建无效的临时目的地名称

> ID：12344574
> 
> 赞同：2
> 
> 时间：2012-09-10T01:57:47.750
> 
> 标签：c#, activemq, stomp, apollo

使用代理在 Windows 7 32 位上作为服务运行的 C# 框架 4.0，我在稳定版和开发版上都看到以下错误。

```
2012-09-09 20:25:03,524 | WARN  | Internal Server Error: org.apache.activemq.apollo.util.path.PathParser$PathException: Invalid destination: 'ID\cEros201-30171-634828191032886763-1\c0\c1', it does not match regex: [ a-zA-Z0-9\_\-\%\~\:]+ | org.apache.activemq.apollo.stomp.StompProtocolHandler | hawtdispatch-DEFAULT-2
2012-09-09 20:25:03,542 | WARN  | Internal Server Error: org.apache.activemq.apollo.util.path.PathParser$PathException: Invalid destination: 'ID\cEros201-30171-634828191032886763-1\c0\c1', it does not match regex: [ a-zA-Z0-9\_\-\%\~\:]+ | org.apache.activemq.apollo.stomp.StompProtocolHandler | hawtdispatch-DEFAULT-3 
```

这样做的最终结果是我无法使用临时队列作为客户端上的调用阻塞，并且在我可以响应异常之前会话超时。

```
Versions 
    Client dlls Stomp 1.5.2 NMS 1.5.0 
    Broker server apache-apollo-1.4 and apache-apollo-99-trunk-SNAPSHOT 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T16:35:06.097

作为一种解决方法，而不是使用 Apache.NMS.Stomp 切换到 Apache.NMS.ActiveMQ。Apache Apollo 在 61613 端口上同时支持 STOMP 和 ActiveMQ 协议。

# java - 线程问题，字段不更新

> ID：12344575
> 
> 赞同：0
> 
> 时间：2012-09-10T01:57:53.803
> 
> 标签：java, android, multithreading

Asycntask 的 onprogressupdate 总是被调用，：

```
 @Override
    protected void onProgressUpdate(Integer... values) {
        pbSubStatus.incrementProgressBy(values[1]);
        rawNum = values[0];
                     ...
    } 
```

在外部类：

```
 private double getCurrentTime() {
    return currentTime;
}
private void doSomethingOnThread() {
    LinearLayout layout = (LinearLayout) findViewById(R.id.main);
    sMeter = new Meter(context);
    layout.addView(sMeter);
    final Handler mHandler = new Handler();
    new Thread() {
        @Override
        public void run() {

            while (running) {
                previousTime = getCurrentTime();
                previousNum = getRawNum();
                try {
                    Thread.sleep(1500);

                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
                currentTime=getCurrentTime();
                currentNum = getRawNum();
                mHandler.post(mUpdateResults);
            }
        }
    }.start();
}
final Runnable mUpdateResults = new Runnable() {
    public void run() {
        updateResultsInUi();
    }
};
private void updateResultsInUi() {
    if(previousNum>currentNum){
        return;//TODO
    }else{
        int temp=currentNum-previousNum;//Problem here, both num are same.
        double timeTemp=currentTime-previousTime; 
        someField=  (float)( temp/timeTemp);
    }
    sMeter.setTarget(someField);//this should be last line to be executed in this snippt
} 
```

所以问题是 previousNum 和 currentNum 总是返回相同的数字。我希望线程等待 1.5 秒以从 onProgressupdate 获取新的 (getRawNum())。但我不明白他们返回的是相同的号码。感谢您的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T02:11:53.167

我不认为本节正在做你想做的事：

```
while (running) {
    previousTime = getCurrentTime();
    previousNum = getRawNum();
    try {
        Thread.sleep(1500);
    } catch (InterruptedException e) {
        e.printStackTrace();
    }
    currentTime=getCurrentTime();
    currentNum = getRawNum();
    mHandler.post(mUpdateResults);
} 
```

例如，假设这在 time=0 开始执行。在第一次迭代结束时，您将拥有：

```
previousTime = 0
currentTime  = 1500 
```

...但是，循环将*立即*开始第二次迭代，然后您将拥有：

```
previousTime = 1500
currentTime  = 1500 
```

...然后它将再休眠 1500 毫秒并设置`currentTime`为 3000，然后立即开始下一次迭代，`previousTime`也设置为 3000。

所以问题是，在绝大多数情况下，您的代码都会离开`currentTime`并`previousTime`设置为相同的值。它们具有不同值的唯一时间是在一次迭代结束和下一次迭代开始之间 的*极小的时间跨度。*

解决此问题的快速方法如下：

```
currentTime = getCurrentTime();
currentNum = getRawNum();
while (running) {
    try {
        Thread.sleep(1500);
    } catch (InterruptedException e) {
        e.printStackTrace();
    }
    previousTime = curentTime;
    previousNum = currentNum;
    currentTime=getCurrentTime();
    currentNum = getRawNum();
    mHandler.post(mUpdateResults);
} 
```

更好的方法可能是重构代码以使用循环缓冲区之类的东西来跟踪最后的`n`样本和样本时间戳。然后，您可以简单地定期查询一个新样本，并且在更新 UI 时，您只需将缓冲区中的最新内容与之前的内容进行比较。

至于 UI 中未更新的字段，请确保您尝试更新它们的代码正在主线程上运行。

# node.js - nginx不缓存静态资产

> ID：12344578
> 
> 赞同：0
> 
> 时间：2012-09-10T01:58:21.643
> 
> 标签：node.js, caching, nginx

我在两台不同的机器上有一个 nodejs 服务器和启用 SSL 的 nginx。请求/响应都正常工作，但是我在让 nginx 缓存东西时遇到了一些问题。我的服务器配置如下。最初，我在“位置/”块中有代理缓存语句，当时它只缓存我的索引页。我读到 nginx 不会缓存带有 set-cookie 标头的请求，所以我也忽略了它们（尽管它并没有阻止我的索引页面更早地被缓存）。我尝试摆弄一整天，但无法让 nginx 缓存我的 js 和 css 文件。所有此类请求都被路由回我的节点服务器。访问日志和错误日志没有任何异常条目。我究竟做错了什么？

```
server {
    listen 443 ssl;
    server_name example.com;

    ssl_certificate /webserver/nginx/credentials/cert;
    ssl_certificate_key /webserver/nginx/credentials/key;
    ssl_session_cache shared:SSL:10m;

    location ~ .*\.(ico|css|js|gif|jpe?g|png)$ {
        proxy_pass http://somewhere:80;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_redirect http:// https://;

        proxy_ignore_headers "Set-Cookie";
        proxy_cache one;
        proxy_cache_valid 200 1d;
        proxy_cache_valid any 1m;
        expires 7d;
        proxy_cache_use_stale error timeout invalid_header updating http_500 http_502 http_503 http_504;
    }

    location / {
        proxy_pass http://somewhere:80;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_redirect http:// https://;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T03:22:45.233

这就是我正在使用的（我没有启用 SSL，但我认为这不是问题）。您缺少 try_files 行，该行告诉 nginx 在传递给代理之前在根目录中查找文件。此外，这并不是真正的缓存问题 - 任何静态文件请求都不应该使用此配置访问您的 node.js 后端。

```
server {
  root        /public;
  listen      80;
  server_name _;
  index       index.html index.htm;
      charset     utf-8;

  # proxy request to node
  location @proxy {
    proxy_set_header   Host             $http_host;
    proxy_set_header   X-Real-IP        $remote_addr;
    proxy_set_header   X-Forwarded-For  $proxy_add_x_forwarded_for;
    proxy_set_header   X-NginX-Proxy    true;

    proxy_pass         http://127.0.0.1:3010;
    proxy_redirect     off;
    break;
  }  

  location / {
    try_files $uri.html $uri $uri/ @proxy;
  }

  #  static content
  location ~ \.(?:ico|jpg|css|png|js|swf|woff|eot|svg|ttf|html|gif)$ {
    access_log  off;
    log_not_found off;
    add_header  Pragma "public";
    add_header  Cache-Control "public";
    expires     30d;  
  }

  location ~ /\. {
    access_log    off;
    log_not_found off;
    deny all;
  }

  error_page 500 502 503 504 /50x.html;
      location = /50x.html {
      }

      error_page 404 /404.html;
      location = /404.html {
      }

} 
```

# android - android XML Attributes有什么区别

> ID：12344580
> 
> 赞同：0
> 
> 时间：2012-09-10T01:58:38.133
> 
> 标签：android, xml

```
<item name="android:actionBarStyle"> @ style / ActionBar.Home </ item>
<item name="actionBarStyle"> @ style / ActionBar.Home </ item> 
```

我的问题：前缀“android：”没有前缀“android：”有什么区别？

```
<style name="Theme.Iosched" parent="Theme.Base">
    <item name="android:windowBackground">@android:color/white</item>
    <item name="android:windowContentOverlay">@drawable/actionbar_shadow</item>
    <item name="windowContentOverlay">@drawable/actionbar_shadow</item>
    <item name="android:actionBarStyle">@style/ActionBar</item>
    <item name="actionBarStyle">@style/ActionBar</item>
    <item name="android:actionBarTabStyle">@style/ActionBar.TabView</item>
    <item name="actionBarTabStyle">@style/ActionBar.TabView</item>
    <item name="android:actionBarTabBarStyle">@style/ActionBar.TabBar</item>
    <item name="actionBarTabBarStyle">@style/ActionBar.TabBar</item>
    <item name="android:actionBarTabTextStyle">@style/ActionBar.TabText</item>
    <item name="actionBarTabTextStyle">@style/ActionBar.TabText</item>
</style> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T02:08:14.690

如果您查看 .xml 文件的顶部，它应该说：

```
xmlns:android="http://schemas.android.com/apk/res/android" 
```

当你说windowBackground时，它会引用那个命名空间，所以它知道它在看什么。

这里有一个相关的先前答案：[XML 中的“xmlns”是什么意思？](https://stackoverflow.com/questions/1181888/what-does-xmlns-in-xml-mean)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T10:37:35.707

我认为您正在使用一些支持库在预HoneyComb 设备（即ActionBarSherlock）中提供ActionBar **。**

如果是这样，那么当他们说 backgroundColor 时，他们指的是他们自己的变量，如果他们用**android**作为前缀：他们正在尝试访问系统值。由于这些值（常量）在您要添加 ActionBar 的设备中可能不可用。

如果您在 IDE 的帮助下检查这两行（即在 Eclipse 中通过 ctrl + 单击），

```
<item name="android:actionBarStyle"> @ style / ActionBar.Home </ item>
<item name="actionBarStyle"> @ style / ActionBar.Home </ item> 
```

@style / ActionBar.Home 的值都可能指向两个不同的位置。实际上，这些库有时会假设用户永远不需要修改它，从而使事情变得更糟。

一旦理解了这个概念，这个概念就很简单了。ActionBarSherlock 在对 ActionBar 的原生支持不可用的设备中提供自己的配置（通过使用这些变量）。然而，它只是绕过 Android API 提供的任何操作栏。

虽然我必须承认阅读和理解 ActionBarSherlock 有时是真正的痛苦。

# javascript - 如何在javascript回调函数中返回多个变量？

> ID：12344586
> 
> 赞同：1
> 
> 时间：2012-09-10T02:00:17.993
> 
> 标签：javascript

如果我有以下情况：

```
function hello(name, callback) {
var hello1 = "Hello There " + name;
callback(hello1);
}

hello("John", function(hello1) {
    alert(hello1);
}); 
```

我可以在警告框中得到“Hello There John”。如何使我可以拥有一个 hello2 变量，以便回调中有两个变量？我基本上想做类似的事情：

```
function hello(name, callback) {
var hello1 = "Hello There " + name;
var hello2 = "Greetings " + name;
callback(hello1, hello2);
}

hello("John", function(hello1, hello2) {
    alert(hello1 + " " + hello2);
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T02:22:20.720

如果你只有字符串值，最好是创建一个数组：

```
var someArray = new Array(); 
```

然后在函数中，您可以将值放入数组中：

```
someArray[someArray.length]= "HELLO USER WITH NAME: " + name;
someArray[someArray.length]= "HELLO USER WITH NAME: " + name2; 
```

然后返回数组：

```
callback(someArray); // or maybe will be better?: return someArray; 
```

在回调函数中，您可以通过以下方式获取值：

```
function callback(var retArray){
for(int i=0,i<retArray.length,i++){
console.log(retArray[i]); } 
```

或者您可以将自己的对象（函数）与一些字符串放在里面..然后返回这个函数..但是如果你只有字符串值，最好是数组。

# scala - 使用 Actor 传递消息

> ID：12344589
> 
> 赞同：0
> 
> 时间：2012-09-10T02:00:32.610
> 
> 标签：scala

我正在使用 scala 中的 Actor 编写一个程序，其中一个 Actor（Actor1）接受两个数字作为命令行参数并向另一个 Actor 发送消息（它计算它们的总和）。Actor2 将结果发送给 Actor1，后者将其打印在屏幕上。

```
class Actor1 extends Actor {
  def main(args: Array[String]) {   
    val n= Integer.parseInt(args(0))  
    val k= Integer.parseInt(args(1))  
    val actor2 = new Actor2   
    actor2 ! (n, k)  
  }

def act()
{    
           react{
                    case num: Integer =>
                    println(num)
                    case _=>
                    println("Sum not received")
                    exit

                   } 
}   
}
 class Actor2 extends Actor  {
    def act(){
       loop
       {
       react
            {
            case(n:Int, k:Int) =>
            val i = n + k
            val actor1 = new Actor1
             actor1 ! i}
         }
     }
    } 
```

是否可以在扩展 Actor 的类中定义 main()，还有其他方法可以接受 Actor 的命令行参数吗？它显示了错误：类 Actor1 需要是抽象的，因为未定义 ()Unit 类型的 trait Reactor 中的方法行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T06:21:42.643

首先要做的事情：您应该考虑使用[akka](http://akka.io)而不是默认的 Scala 演员。它只是更好..几乎在每个方面。

除此之外，这里有几个答案供您参考：

*   您的主要方法应位于独立对象（而不是伴随对象）中。所以使用这样的东西：并通过对象/类`object Main { def main(args:Array[String]) { ... } }`启动你的程序。`Main`（这是由于`Actor1`类内部的定义是非静态的，并且如果定义伴随对象，.class 文件名会发生冲突。）

*   在您的代码中，括号似乎有问题 - 或者您是否故意将`Actor2`其放在`Actor1`类中？如果您只创建三个单独的类/对象，它会更干净：`Actor1, Actor2, Main`.

*   当你创建 Scala actor 时，你必须显式地启动它们（在 akka 2.x 中不是这样）。所以你错过了你的电话`actor1.start`等等。请注意，您的程序不会在您的演员终止之前终止，所以不要怀疑在您添加之后它是否不再停止。

*   最后，一些小提示：

    *   您可能需要考虑使用`!?`并将您的答案发回给原始呼叫者，因为这也允许您有一个适当的终止条件。
    *   `Integer.parseInt("0")`可以更简单地写为 `"0".toInt`

# php - 如何从逗号分隔的标签中选择唯一关键字

> ID：12344590
> 
> 赞同：6
> 
> 时间：2012-09-10T02:00:39.547
> 
> 标签：php, mysql, arrays, explode

我想从我的数据库中检索一些标签，它们的形式是：

```
topic_id       tags
   1        `tag1,tag2,tag3`
   2        `tag1,tag4,tag5`
   3        `tag2,tag4,tag5`
   4        `tag6,tag7,tag2` 
```

我想要这样的东西：

```
tag1 tag2 tag3 tag4 tag5 tag6 tag7 
```

即所有唯一标签

这样我就可以将每个标签包装在一个链接中，以便对具有此类特定标签的新闻文章进行分组。

到目前为止，我编写的以下查询不起作用：

```
$tags = mysql_query("SELECT tags, topic_id
                       FROM forum_topics
                       WHERE topic_id > 0")  or die (mysql_error());
                    while($tag = mysql_fetch_assoc($tags)){   
                    $split_tags  = "$tag";
                    $pieces = explode(",", $split_tags);
                    echo $pieces ; 
```

当我这样做的时候 `print_r($pieces);`

我有`Array ( [0] => Array ) Array ( [0] => Array ) Array ( [0] => Array ) Array ( [0] => Array )`

这不是我想要的。

因为现在我的表结构看起来像这样`topic_id , topic_head, topic_body, topic_tag, topic_date, topic_owner`.. 我怎样才能进一步使 topic_tag 正常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T02:12:43.510

如果您规范化您的数据库设计，那么您可以通过以下方式轻松获得所有不同的标签

```
SELECT DISTINCT tags FROM forum_topics WHERE topic_id > 0 
```

但是现在，使用您的数据库结构，您不能这样做，您必须获取所有标签并 `array_unique`在它们上使用。

```
$tags = array();
$rows = mysql_query("SELECT tags FROM forum_topics WHERE topic_id > 0")  or die (mysql_error());
while($row = mysql_fetch_assoc($rows)){   
  $tags = array_merge($tags, explode(',' $row['tags']));
}
$tags = array_unique($tags);
print_r($tags); 
```

**但即使你能做到这一点，规范化你的数据库设计也是最好的选择。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T02:07:10.327

试试这个：

```
$tags = "";
while($row = mysql_fetch_assoc($tags)) {   
    $tags .= $row["tags"] . ",";
}

$tags = rtrim($tags, ",");
$pieces = explode(",", $tags);

print_r($pieces); // all of them

$pieces = array_unique($pieces);

print_r($pieces); // distinct 
```

...正如[Jonah Bishop 已经提到](https://stackoverflow.com/questions/12344590/how-to-select-unique-keywords-from-a-comma-separated-tags#comment16574052_12344590)的，请避免`mysql_*`使用函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T02:08:24.237

```
select distinct tags from forum_topics; 
```

# ant - 找不到：com/jcraft/jsch/UserInfo

> ID：12344599
> 
> 赞同：2
> 
> 时间：2012-09-10T02:02:16.880
> 
> 标签：ant, jsch

我正在尝试`<scp>`在我的构建文件中使用 Ant 任务。每次运行目标时都会给我一个错误：

```
cannot be found: com/jcraft/jsch/UserInfo 
```

我读过一些关于 Ant 1.7 存在这个问题的帖子。一些帖子正在讨论`ant-jsch.jar`从 ant_home 库中删除文件。不幸的是，我不能这样做，因为 ant_home 在许多其他项目中很常见，我无法从 lib 目录中删除或更新任何 jar 文件。

有没有办法可以纯粹使用 Ant 配置来解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T02:13:49.787

`ant-jsch.jar`包含 Apache Ant 团队开发的 ssh 相关任务，同时`jsch.jar`包含这些 ssh 任务依赖的 jsch 库。

所以做一点检查：检查是否`jsch.jar`在你的`$ANT_HOME/lib`，并检查 jar 是否包含`UserInfo.class`.

如果出现上述情况，请下载最新版本`jsch.jar`并放入`$ANT_HOME/lib`.

我目前正在使用`jsch.jar`去年下载的 Ant 1.8.4，没有任何问题。

* * *

更新：

首先检查此页面：

[http://ant.apache.org/manual/install.html#optionalTask​​s](http://ant.apache.org/manual/install.html#optionalTasks)

请注意，`<scp>`Ant 二进制发行版中默认包含其他 ssh 任务（ant-jsch.jar）。您无需编写`<taskdef>`即可使用`<scp>`，因为它默认包含在 Ant 的 lib 目录中。我建议您将`jsch.jar`以下几点放入该目录：

1.  这些 ssh 任务不支持 classpath def，也就是说，你不能在 ssh 任务中定义一个`<classpath>`指向`jsch.jar`然后引用它。
2.  您也可以放入`jsch.jar`系统的 CLASSPATH 环境变量中包含的任何目录，但这不是一个好习惯。
3.  我们通常将一个任务及其依赖项放在同一个目录中。

# macos - 在带有 Oracle JRE1.7 的 Mac OS 10.7.4 上运行 install4j 安装程序

> ID：12344601
> 
> 赞同：0
> 
> 时间：2012-09-10T02:02:36.753
> 
> 标签：macos, osx-lion, java, install4j, exe4j

我有一个使用 install4j 5.1.2 构建的安装程序。当我尝试在 Mac OS X 10.7.4 上安装它时。它抱怨说

“在您的系统上找不到 JVM。请定义 EXE4J_JAVA_HOME 以指向已安装的 JDK 或 JRE，或者从 www.java.com 下载 JRE”

然后我从 Oracle 下载了 JRE1.7_07 并再次尝试，我得到了同样的错误。好像我安装了完整的 JDK1.7_07，然后一切正常。

附加信息：

1.  如果我使用 Apple JRE 1.6 安装程序可以正常工作。但我的应用需要 JRE 1.7。

2.  当我安装 JRE1.7 时，我还为 JAVA_HOME、EXE4J_JAVA_HOME 定义了环境变量，但我仍然看到同样的错误。我有一种感觉，安装 JRE 时 install4J 不会读取 JRE。

3.  如果我安装 JDK，则 JRE 位于以下位置 /Library/Java/JavaVirtualMachine/ 就像我只安装 JRE，它位于以下位置 /Library/Internet Plug-ins/JavaAppletPlugin.plugin

我不确定，如果我错过了什么。有关如何解决此特定问题的任何指示都非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T14:17:45.297

我收到了来自 install4j 支持的以下电子邮件。

你好，

谢谢你的电邮。实际上，5.1.2 找不到 JRE，只能找到 JDK，因为在为 install4j 实现 OpenJDK 支持时 JRE 并未发布。这是在当前的 5.1.3 版本中实现的：

[http://download.ej-technologies.com/beta/install4j_windows_5_1_3.exe](http://download.ej-technologies.com/beta/install4j_windows_5_1_3.exe)

[http://download.ej-technologies.com/beta/install4j_windows-x64_5_1_3.exe](http://download.ej-technologies.com/beta/install4j_windows-x64_5_1_3.exe)

它将在月底发布。

亲切的问候，

# c++ - 在 MS Visual Studio 2010 上使用 OpenGL 缓冲区和 Cuda 互操作时出现异常错误

> ID：12344612
> 
> 赞同：0
> 
> 时间：2012-09-10T02:04:41.810
> 
> 标签：c++, opengl, cuda

我正在编写 cuda by example book 中给出的一段非常简单的代码，它是 cuda openGL interop 创建图形。该程序正在成功构建，但是当我运行该程序时，窗口显示：应用程序无法正确启动。单击确定关闭应用程序。我不知道为什么会这样，因为我很少有成功运行的示例 cuda 程序以及 opengl 示例程序。我什至从运行成功的 NVidia 示例程序中运行示例 cuda openGL 互操作程序。我应该在这里提一下，我已将所有 lib 文件包含在附加库中，以及包含在附加包含目录中的文件。我相信这是因为我用于互操作的像素缓冲区导致正常的 openGL 和 cuda 程序运行良好。我还应该提到，当我尝试将缓冲区 API 包含在程序中时，visual studio intellisense 正在显示缓冲区 API（如 glGenBuffers 等），但在程序中声明后，它显示标识符未定义，其下方有一条红线. 但是这件事并没有发生在 NVidia 示例 OpenGL 代码中。

我正在粘贴下面的代码：

```
#include <windows.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <math.h>
#include <time.h>
#include <GL/glew.h>
#include <GL/glut.h>
#include <GL/glaux.h>
#include <cuda.h>
#include <cuda_runtime.h>
#include <cutil.h>
#include <cuda_gl_interop.h>

#define     DIM    512

GLuint  bufferObj;
cudaGraphicsResource *resource;

// based on ripple code, but uses uchar4 which is the type of data
// graphic inter op uses. see screenshot - basic2.png
__global__ void kernel( uchar4 *ptr ) {
int x = threadIdx.x + blockIdx.x * blockDim.x;
    int y = threadIdx.y + blockIdx.y * blockDim.y;
    int offset = x + y * blockDim.x * gridDim.x;

    // now calculate the value at that position
    float fx = x/(float)DIM - 0.5f;
    float fy = y/(float)DIM - 0.5f;
    unsigned char   green = 128 + 127 *
        sin( abs(fx*100) - abs(fy*100) );

    // accessing uchar4 vs unsigned char*
    ptr[offset].x = 0;
    ptr[offset].y = green;
    ptr[offset].z = 0;
    ptr[offset].w = 255;
}

static void key_func( unsigned char key, int x, int y ) {
    switch (key) {
    case 27:
        // clean up OpenGL and CUDA
         cudaGraphicsUnregisterResource( resource );
        glBindBuffer( GL_PIXEL_UNPACK_BUFFER_ARB, 0 );
        glDeleteBuffers( 1, &bufferObj );
        exit(0);
    }
}

static void draw_func( void ) {

    glDrawPixels( DIM, DIM, GL_RGBA, GL_UNSIGNED_BYTE, 0 );
    glutSwapBuffers();
}

int main( int argc, char **argv ) {
    cudaDeviceProp  prop;
    int dev;

    memset( &prop, 0, sizeof( cudaDeviceProp ) );
    prop.major = 1;
    prop.minor = 0;
     cudaChooseDevice( &dev, &prop );
    cudaGLSetGLDevice( dev ) ;
    glutInit( &argc, argv );
    glutInitDisplayMode( GLUT_DOUBLE | GLUT_RGBA );
    glutInitWindowSize( DIM, DIM );
    glutCreateWindow( "bitmap" );

    glGenBuffers( 1, &bufferObj );
    glBindBuffer( GL_PIXEL_UNPACK_BUFFER_ARB, bufferObj );
    glBufferData( GL_PIXEL_UNPACK_BUFFER_ARB, DIM * DIM * 4,NULL, GL_DYNAMIC_DRAW_ARB);
cudaGraphicsGLRegisterBuffer( &resource, 
        bufferObj, 
        cudaGraphicsMapFlagsNone ) ;

    // do work with the memory dst being on the GPU, gotten via mapping
     cudaGraphicsMapResources( 1, &resource, NULL ) ;
    uchar4* devPtr;
    size_t  size;
    cudaGraphicsResourceGetMappedPointer( (void**)&devPtr, 
        &size, 
        resource) ;

    dim3    grids(DIM/16,DIM/16);
    dim3    threads(16,16);
    kernel<<<grids,threads>>>( devPtr );
    cudaGraphicsUnmapResources( 1, &resource, NULL ) ;

    glutKeyboardFunc( key_func );
    glutDisplayFunc( draw_func );
    glutMainLoop();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T17:31:36.643

不要忘记`glewInit()`之前`glGenBuffers()`。

# java - 从 Jackson 读取时双丢失的精度

> ID：12344614
> 
> 赞同：3
> 
> 时间：2012-09-10T02:05:09.777
> 
> 标签：java, json, jackson

这应该是一个简单的问题，但我在互联网上找不到任何东西。这是 JSON 字符串

```
 {"ratio":2.714,"daily":161.0,"userId":811032853,"topic":"#GOP2012","gender":"Unknow"} 
```

然后当我这样做时`mapper.readValue(*theString*,*theClass.class*)`，小数点后的所有数字都会丢失。对于上面的例子，我只得到了 2.0 的比率。

我用的jackson版本是1.9.9，应该是最新版本。

这是否也发生在其他人身上？谢谢大家 ：）

*theClass*只是一个包含所有这些变量的类。比率的类型是双倍的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T20:49:56.200

我会怀疑类定义有些奇怪。Jackson 不会截断 double 值，除了通常使用二进制浮点表示法的警告（即，如果你想避免任何舍入错误，你应该使用`BigDecimal`etc），这不足以导致这样的问题。

因此，查看 的定义会很有用`theClass`。如果截断确实按照解释的方式发生，那肯定是一个错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T02:59:10.510

我没有和杰克逊一起工作过，但你能以某种方式尝试这样的事情吗......

```
DecimalFormat df = new DecimalFormat("#.###");
df.format(doubleValue); 
```

# c# - 如何从多对多表中删除行

> ID：12344616
> 
> 赞同：0
> 
> 时间：2012-09-10T02:06:11.853
> 
> 标签：c#, asp.net-mvc, entity-framework

例如，我可以将这 3 个表列出示例字段：

**作者**--> AuthorId、姓名、[...]

**书**-> BookId，标题，[...]

**AuthorBooks** --> AuthorId, BookId

如何从多对多表 (AuthorBooks) 中删除行？我想做这样的事情：

```
var author = db.AUTHORS.Single(x => x.AUTHORID == 1);
var fictionBooks = author.BOOKS.Where(x => x.type == "fiction");
fictionBooks.Delete(); // This is what I want to do 
```

如何在多对多表上执行这样的删除？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T02:45:56.357

您必须遍历集合并删除每个项目。您始终可以将其包装在扩展方法中，以简化删除示例中的集合。

```
public static class FictionBookExtensions
{
    public static void Delete(IEnumerable<YourFictionBookClass> fictionBooks)
    {
        foreach (var fictionBook in fictionBooks)
        {
            db.DeleteObject(fictionBook);
        }
    }
} 
```

# objective-c - 转换无法执行两次

> ID：12344617
> 
> 赞同：0
> 
> 时间：2012-09-10T02:06:42.453
> 
> 标签：objective-c, ios5, transformation

我有这个功能，

```
-(void)transitionstar{
star.hidden = NO;
star2.hidden = NO;
star3.hidden = NO;
star4.hidden = NO;
star5.hidden = NO;
star6.hidden = NO;
[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:0.4f];
[UIView animateWithDuration:0.0 animations:^{
    CGAffineTransform scale = CGAffineTransformMakeScale(1, 1);
    CGAffineTransform rotate = CGAffineTransformMakeRotation(360.0);
     CGAffineTransform rotate2 = CGAffineTransformMakeRotation(-360.0);
     CGAffineTransform rotate3 = CGAffineTransformMakeRotation(-720.0);
     CGAffineTransform rotate4 = CGAffineTransformMakeRotation(720.0);
     CGAffineTransform rotate5 = CGAffineTransformMakeRotation(1080.0);
     CGAffineTransform rotate6 = CGAffineTransformMakeRotation(-1080.0);
    CGAffineTransform translate = CGAffineTransformMakeTranslation(-800, -800);
     CGAffineTransform translate2 = CGAffineTransformMakeTranslation(600, -600);
     CGAffineTransform translate3 = CGAffineTransformMakeTranslation(400, 400);
     CGAffineTransform translate4 = CGAffineTransformMakeTranslation(-200, 200);
     CGAffineTransform translate5 = CGAffineTransformMakeTranslation(900, -300);
     CGAffineTransform translate6 = CGAffineTransformMakeTranslation(-200, 500);

    CGAffineTransform transform =  CGAffineTransformConcat(translate, scale);
    transform = CGAffineTransformConcat(transform, rotate);

    CGAffineTransform transform2 =  CGAffineTransformConcat(translate2, scale);
    transform2 = CGAffineTransformConcat(transform2, rotate2);

    CGAffineTransform transform3 =  CGAffineTransformConcat(translate3, scale);
    transform3 = CGAffineTransformConcat(transform3, rotate3);

    CGAffineTransform transform4 =  CGAffineTransformConcat(translate4, scale);
    transform4 = CGAffineTransformConcat(transform4, rotate4);
    CGAffineTransform transform5 =  CGAffineTransformConcat(translate5, scale);
    transform5 = CGAffineTransformConcat(transform5, rotate5);
    CGAffineTransform transform6 =  CGAffineTransformConcat(translate6, scale);
    transform6 = CGAffineTransformConcat(transform6, rotate6);

    star.transform = transform;
    star2.transform = transform2;
    star3.transform = transform3;
    star4.transform = transform4;
    star5.transform = transform5;
    star6.transform = transform6;
}
                 completion:^(BOOL finished){
                     if (finished) {
                         star.hidden = YES;
                         star2.hidden = YES;
                         star3.hidden = YES;
                         star4.hidden = YES;
                         star5.hidden = YES;
                         star6.hidden = YES;
                     }
                 }];
[UIView commitAnimations];
} 
```

当我第一次调用它时，它确实有效。

但是，我在同一视图内再次调用，它无法执行并卡在那里。

-隐藏的工作

- 过渡不起作用

- 旋转不起作用

-nslog 工作

为什么第二次会变成这样？

**更新**

```
if(!positionrepeat)
        {
            //Display Correct IMAGE;
            [isrepeat addObject:[NSNumber numberWithInt:positionvalue]];
            //soundeffect = [self createSoundID: @"correct"];
            //AudioServicesPlaySystemSound(soundeffect);
            [self displayresulttext:@"correct"];
            [self.view setNeedsDisplay];
            [self transitionstar];
            correct++;
            completed.text = [NSString stringWithFormat:@"%d", correct];
            [self result];
        } 
```

这就是我调用函数的方式。然而，还是一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T02:23:51.967

我假设您在上面编写的方法在从 UIView 派生的类中工作。

如果这个假设是正确的，那么当必须重绘视图时可能会调用您的方法。

要重绘视图，您必须调用 setNeedsDisplay 方法，如下所示：

```
[myCustomView setNeedsDisplay]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T04:57:45.693

在这段代码中，您更改了转换

```
 star.transform = transform;
        star2.transform = transform2;
        star3.transform = transform3;
        star4.transform = transform4;
        star5.transform = transform5;
        star6.transform = transform6; 
```

例如，考虑您的 star1 初始变换是 x ，现在您正在为变换进行一些计算....

```
CGAffineTransform rotate = CGAffineTransformMakeRotation(360.0);
CGAffineTransform translate = CGAffineTransformMakeTranslation(-800, -800);
CGAffineTransform transform =  CGAffineTransformConcat(translate, scale);
    transform = CGAffineTransformConcat(transform, rotate); 
```

然后

您将星 x 的变换更改为 y ...

```
star.transform = transform;//say this is y 
```

现在你的星变会变得很好......

再次通过调用再次执行此代码，因此您的初始星形变换再次为 y 并且您将变换等同于 y 所以不需要并且您没有看到任何结果...

y=y 所以没有结果....

所以需要改变一些这样的逻辑或一些你想要的但这是一个想法......

第一个变化：你需要存储每颗星的变换，所以你需要一些变换类型的变量......

```
 CGAffineTransform star1Initial,star2Initial,star3Initial,star4Initial,star5Initial,star6Initial; 
```

第二个变化：您需要在视图中保存星星的初始变换确实加载....

```
 star1Initial=star1.transform;
    star2Initial=star2.transform;
    star3Initial=star3.transform;
    star4Initial=star4.transform;
    star5Initial=star5.transform;
    star6Initial=star6.transform;

-(void)transitionstar{
    star1.hidden = NO;
    star2.hidden = NO;
    star3.hidden = NO;
    star4.hidden = NO;
    star5.hidden = NO;
    star6.hidden = NO;

        star1.transform=star1Initial;
        star2.transform=star2Initial;
        star3.transform=star3Initial;
        star4.transform=star4Initial; 
        star5.transform=star5Initial;
        star6.transform=star6Initial;

//    [UIView beginAnimations:nil context:NULL];
//    [UIView setAnimationDuration:0.4f];
    [UIView animateWithDuration:1.0 animations:^{
        CGAffineTransform scale = CGAffineTransformMakeScale(1, 1);
        CGAffineTransform rotate = CGAffineTransformMakeRotation(360.0);
        CGAffineTransform rotate2 = CGAffineTransformMakeRotation(-360.0);
        CGAffineTransform rotate3 = CGAffineTransformMakeRotation(-720.0);
        CGAffineTransform rotate4 = CGAffineTransformMakeRotation(720.0);
        CGAffineTransform rotate5 = CGAffineTransformMakeRotation(1080.0);
        CGAffineTransform rotate6 = CGAffineTransformMakeRotation(-1080.0);
        CGAffineTransform translate = CGAffineTransformMakeTranslation(-800, -800);
        CGAffineTransform translate2 = CGAffineTransformMakeTranslation(600, -600);
        CGAffineTransform translate3 = CGAffineTransformMakeTranslation(400, 400);
        CGAffineTransform translate4 = CGAffineTransformMakeTranslation(-200, 200);
        CGAffineTransform translate5 = CGAffineTransformMakeTranslation(900, -300);
        CGAffineTransform translate6 = CGAffineTransformMakeTranslation(-200, 500);

        CGAffineTransform transform =  CGAffineTransformConcat(translate, scale);
        transform = CGAffineTransformConcat(transform, rotate);

        CGAffineTransform transform2 =  CGAffineTransformConcat(translate2, scale);
        transform2 = CGAffineTransformConcat(transform2, rotate2);

        CGAffineTransform transform3 =  CGAffineTransformConcat(translate3, scale);
        transform3 = CGAffineTransformConcat(transform3, rotate3);

        CGAffineTransform transform4 =  CGAffineTransformConcat(translate4, scale);
        transform4 = CGAffineTransformConcat(transform4, rotate4);
        CGAffineTransform transform5 =  CGAffineTransformConcat(translate5, scale);
        transform5 = CGAffineTransformConcat(transform5, rotate5);
        CGAffineTransform transform6 =  CGAffineTransformConcat(translate6, scale);
        transform6 = CGAffineTransformConcat(transform6, rotate6);

        star1.transform = transform;
        star2.transform = transform2;
        star3.transform = transform3;
        star4.transform = transform4;
        star5.transform = transform5;
        star6.transform = transform6;
    }
                     completion:^(BOOL finished){
                         if (finished) {
                             star1.hidden = YES;
                             star2.hidden = YES;
                             star3.hidden = YES;
                             star4.hidden = YES;
                             star5.hidden = YES;
                             star6.hidden = YES;
                         }
                     }];
//    [UIView commitAnimations];
} 
```

我希望这能帮到您....

嗨，试试这个旋转动画的代码.....

```
- (void) runSpinAnimationWithDuration:(CGFloat) duration;
{
    CABasicAnimation* rotationAnimation;
    int rotations=1;
    rotationAnimation = [CABasicAnimation animationWithKeyPath:@"transform.rotation.z"];
    rotationAnimation.toValue = [NSNumber numberWithFloat: M_PI * 2.0 /* full rotation*/ * rotations * duration ];
    rotationAnimation.duration = duration;
    rotationAnimation.cumulative = YES;
    rotationAnimation.repeatCount = 1.0; 
    rotationAnimation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseOut]; 
```

# node.js - Node 如何提供客户端 .js 文件？

> ID：12344622
> 
> 赞同：2
> 
> 时间：2012-09-10T02:07:10.043
> 
> 标签：node.js

例如，假设我们正在尝试使用 socket.io。

在提供给客户端的 html 文件中，我们在文件中包含以下内容。

```
<script src="/socket.io/socket.io.js"></script> 
```

所以有两个关于这个的问题：

1.  当 html 文件被提供给客户端时，它会加载 socket.io.js 资源（http://localhost:8080/socket.io/socket.io.js）而不触发 server.js 中的 requestHandler（我有一个命中 localhost:8080 的任何请求的日志语句）。这个资源如何在不触发 requestHandler 的情况下加载到客户端？

2.  Node在哪里找到客户端需要的socket.io.js资源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T02:50:53.730

假设您使用的是基本的 Socket.io 示例之一，这是因为 Socket.io 用它自己的句柄覆盖了您的句柄，并且如果请求是针对 socket.io 管理的内容，则不会运行您的处理程序。

当您调用时`.listen(app)`，`.listen(80)`它会设置处理数据并为客户端 JS 文件提供服务所需的所有处理程序。

# javascript - Jslint 错误：需要一个条件表达式，而是看到一个赋值

> ID：12344624
> 
> 赞同：0
> 
> 时间：2012-09-10T02:07:26.920
> 
> 标签：javascript, jslint

对于此代码：

```
var i = 0;
for (i < menuitem.length; i += 1;) 
```

JSlint 返回：

> 需要一个条件表达式，而是看到一个赋值。
> 
> 需要一个标识符，而是看到“）”。

并拒绝继续扫描。此代码工作正常，但有什么问题？我怎么能用“if”语句来写这个？（如果这就是 jslint 的意思）。

谢谢你们的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T02:23:07.133

是的，JSLint 非常恶毒。正如其他人指出的那样，您没有在正确的位置填写内容，但除此之外，JSLint 要求您*在*`for`循环的初始化部分中添加一些内容。不过，有几个选项可以让它在不影响逻辑的情况下发挥得很好。我最喜欢的是重置`i`（即使它已经设置）：

```
var i = 0;
for (i = 0; i < menuitem.length; i += 1) {
    /** do stuff **/
} 
```

这让 JSLint 很高兴，并且还确保`i`如果您决定将它用于`for`同一词法范围内的另一个循环，它会被重置。另一种选择是在`null`其中扔 a 以填充空间（如果您不想重置 的值`i`）：

```
var i = 0;
for (null; i < menuitem.length; i += 1) {
    /** do stuff **/
} 
```

两者都可以正常工作并安抚令人担忧的 JSLint。但是，没有人会真正关心您是否将初始化部分留空（除了 JSLint）。您可以尝试 JSHint，因为它对这类事情更加宽容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T02:09:34.277

你的`for`循环有点奇怪，第二部分应该是循环的条件，而不是你有一个分配。

您必须始终整理好零件`(initialisation; condition; step)`。

```
var i = 0;
for (; i < menuitem.length; i += 1) 
```

我只是将您的分号从末尾移到开头。或者，如果您愿意，您可以将变量声明和赋值放在第一部分中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T02:10:18.310

```
for (var i = 0; i < menuitem.length; i += 1) {
  // code
} 
```

或者

```
var i = 0;

for (; i < menuitem.length; i += 1) {
  // code
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T02:17:06.790

从您的代码片段中，我将假设 i 只是一个用于控制循环周期数的变量。正确的代码是

```
for (var i = 0; i < menuitem.length; i += 1) {
// code
} 
```

那是标准化的声明和语法——至少对于我现在能想到的语言来说。这就是这种循环的真正意义——for循环是这样设计的，所以作者可以简单地编写一行代码，而不是如果他/她想做一个while循环的话。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-10T02:18:23.240

找到了！以下是验证的准确答案：

```
var i;
for (i = 0; i < menuitem.length; i += 1) {
  // code
} 
```

var 应该在外面说 jslint ：s

# c# - MEF 和抽象工厂

> ID：12344632
> 
> 赞同：5
> 
> 时间：2012-09-10T02:09:15.963
> 
> 标签：c#, .net, dependency-injection, mef, .net-4.5

*更新：我应该尝试通过 DI 容器处理它还是这里的抽象级别错误？*

我想使用 MEF (.NET 4.5) 实现 ABSTRACT FACTORY。

它对我不起作用...

> 组成保持不变。由于以下错误，更改被拒绝：
> 
> 合成产生了一个单一的合成错误。下面提供了根本原因。查看 CompositionException.Errors 属性以获取更多详细信息。
> 
> 1) 未找到与约束匹配的导出：
> 
> 合同名称 Mef3.Factory
> 
> RequiredTypeIdentity Mef3.Factory 导致：无法在部件“Mef3.Program”上设置导入“Mef3.Program._factory (ContractName="Mef3.Factory")”。
> 
> 元素：Mef3.Program._factory (ContractName="Mef3.Factory") --> Mef3.Program

在 MEF 中这样做是否正确？如何将 id 转发给 Foo/Bar ctors？

编码：

```
class Program
{
    static void Main(string[] args)
    {
        var program = new Program();
        program.Run();
    }

    readonly CompositionContainer _container;

    public Program()
    {
        var catalog = new AssemblyCatalog(Assembly.GetExecutingAssembly());
        _container = new CompositionContainer(catalog);
        _container.ComposeParts(this);
    }

    [Import]
    public Factory _factory;

    public void Run()
    {
        var foo = _factory.GetInstance("foo", 123);
        Console.WriteLine(foo is Foo);
    }
}

[Export]
public class Factory
{
    private readonly ExportFactory<Foo> _fooFactory;
    private readonly ExportFactory<Bar> _barFactory;

    [ImportingConstructor]
    public Factory(ExportFactory<Foo> fooFactory, ExportFactory<Bar> barFactory)
    {
        _fooFactory = fooFactory;
        _barFactory = barFactory;
    }

    public Base GetInstance(string name, int id)
    {
        switch (name)
        {
            case "foo":
                return _fooFactory.CreateExport().Value;

            case "bar":
                return _barFactory.CreateExport().Value;
        }

        throw new ArgumentException();
    }
}

public class Foo : Base
{
    [ImportingConstructor]
    public Foo([Import("Id")] int id)
    {
    }
}

public class Bar : Base
{
    [ImportingConstructor]
    public Bar([Import("Id")] int id)
    {
    }
}

[InheritedExport]
public abstract class Base
{
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T02:50:59.357

该问题似乎是由您在 Foo 和 Bar 上的 [Import("Id")] 引起的。没有合同名称为“Id”的导出。MEF 通常不允许您在运行时传入导入，您需要能够在合成时满足整个图形，否则它将无法工作。如果您想使用 MEF 来完成此特定场景，您应该删除 Foo 和 Bar 上的 ImportingConstructor 并在 Base 类上添加一个 SetId 方法，并在您调用 GetInstance 时让您的工厂调用它。

# java - 为什么没有插入我的自定义 bean 验证消息？

> ID：12344634
> 
> 赞同：3
> 
> 时间：2012-09-10T02:10:06.993
> 
> 标签：java, bean-validation

我似乎无法让自定义验证消息起作用。首先，我使用自定义验证器尝试了它，但它在那里不起作用，所以按照[这个示例](https://stackoverflow.com/questions/2235544/)，我尝试使用带有自定义消息键的内置约束，但没有运气。

这是我针对该问题的 JUnit4 测试用例：

```
public class PatternMessageTest {
    private static Validator validator;

    @BeforeClass
    public static void setUp() {
        ValidatorFactory factory = Validation.buildDefaultValidatorFactory();
        validator = factory.getValidator();
    }

    @Test
    public void testIsValid_invalid() {
        StringHolder stringHolder = new StringHolder();
        stringHolder.setSomeString("not digits");

        Set<ConstraintViolation<StringHolder>> constraintViolations = validator.validate(stringHolder);
            assertEquals(1, constraintViolations.size());
            assertEquals(
                "Some validation message", 
                constraintViolations.iterator().next().getMessage());
    }

    private class StringHolder {
        @Valid
        @Pattern(regexp="\\d+", message="{mymessagekey}")
        private String _someString;

        // _someString getter, setter
    }

} 
```

这是 的内容`ValidationMessages.properties`，它位于我的目录的根`test`目录中：

```
mymessagekey=Some validation message 
```

测试输出为：

```
org.junit.ComparisonFailure: expected:<[Some validation message]> but was:<[{mymessagekey}]> 
```

所以显然没有找到消息密钥。我究竟做错了什么？

相关类路径：

*   验证-api-1.0.0.GA.jar
*   hibernate-validator-4.1.0.Final.jar
*   hibernate-validator-annotation-processor-4.1.0.Final.jar

在开始讨论这样一个简单的测试用例之前，我正在向 Spring MVC 应用程序添加验证，并且行为是相同的：我不断获取带有大括号的密钥作为验证返回的消息。

# java - 为 Javadoc 适当地记录 Varargs

> ID：12344638
> 
> 赞同：3
> 
> 时间：2012-09-10T02:11:43.793
> 
> 标签：java, parameters, documentation, javadoc, optional-parameters

我正在使用`varargs`可选参数的方法。关于如何最好地记录该方法的任何建议？

这是一个非常人为的例子：

```
/**
*
* @param consumption
*     liters of liquid consumed after last pee
* @param options
*   urgency
*       how badly you have to pee on a scale of 1-3,
*       3 being the highest (default 1)
*   bribe
*       what's a toilet worth to you? (default 0)
* @return waitTime
*    minutes until you'll be able to relieve yourself
*/
public integer whenCanIUseTheBathroom(int consumption, int... options){
    // Segment handling options, defining defaults/fallbacks
    int urgency = 1;
    int bribe = 0;
    if(options.length > 0) {
        urgency = options[0];
    }
    if(options.length == 2) {
        bribe = options[1];
    }

    // Segment determining one's fate
    ...
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T05:22:05.703

Varargs 通常不用于实现具有不同含义的可选参数，因为它不支持“子参数”的不同类型，提供较差的重构支持（想要插入新的“子参数”或删除旧的？），并且不灵活（提供“贿赂”时不能省略“紧迫性”）。因此，也没有使用 javadoc 记录它们的标准方法。

可选参数通常使用重载（通常使用委托）或构建器模式的变体来实现，它允许您编写：

```
new BathroomRequest(3).withBribe(2).compute(); 
```

有关该方法的更全面讨论，请参阅[Joshua Bloch 的 Effective Java，第 2 项](http://www.drdobbs.com/jvm/creating-and-destroying-java-objects-par/208403883?pgno=2)。

# php - PHP图像每小时

> ID：12344640
> 
> 赞同：2
> 
> 时间：2012-09-10T02:11:53.747
> 
> 标签：php, image, time, random, intervals

我有一个 PHP 文件，它会在每次刷新时从文件夹中随机生成一个图像。我从[这里下载了它（也有解释）](http://www.marcofolio.net/webdesign/php_random_image_rotation.html)。

我怎样才能让它每小时更改一次图像，而不是随机选择图像？例如，我希望它在一个小时内具有相同的图像，然后在该小时结束时更改。基本上，基于某个时间间隔的新图像。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T03:53:08.437

找线

`$imageNumber = time() % count($fileList);`

并将其替换为

`$imageNumber = (date(z) * 24 + date(G)) % count($fileList);`

那应该对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T03:38:17.213

我会说你需要一个[随机的 oracle](https://en.wikipedia.org/wiki/Random_oracle)函数。基本上，它是一个`random()`接受输入并生成随机数的函数，并保证所有具有相同输入的调用都会给出相同的输出。

要创建传递给 oracle 的值，请使用每小时都会更改的值。我会使用`julian_day_number * 24 + hour_number`或类似的东西（只是`hour_number`不够好，因为它会每 24 小时重复一次）。

然后，每当您的页面加载时，生成您的小时数，将其传递给您的 oracle，并使用结果，就像您现在使用随机值一样。它仍然会随机出现，并且会每小时更改一次。

希望有帮助！

**编辑：** 随机预言不需要花哨 - 它们可以很简单（公然从[这个答案](https://stackoverflow.com/a/1537970/589985)中窃取到另一个问题）：

```
int getRand(int val)
{
    //Not really random, but no one'll know the difference:
    return ((val * 1103515245) + 12345) & 0x7fffffff;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T03:45:00.767

保持简单，将 8 张不同的图片放入`img/`命名 from `1.jpg`to `8.jpg`，然后：

```
$imagePath = sprintf("img/%s.jpg", (date('G') %8) +1); 
```

[`G`参数为](http://php.net/manual/en/function.date.php)：

> 没有前导零的小时的 24 小时格式。

现在，您确定每小时都有不同的照片，而且每个人看到的都是一样的。

编辑：缩小或扩大重复周期调整模，`24`有几个除数 [1, 2, 3, 4, 6, 8, 12]。

# multithreading - QtConcurrent 运行的线程 id

> ID：12344650
> 
> 赞同：4
> 
> 时间：2012-09-10T02:13:04.767
> 
> 标签：multithreading, qt, qtconcurrent

我正在用 QT 做多线程程序。

我使用此代码来尝试它是否按我预期的那样工作。

```
QFuture<void> t1 = QtConcurrent::run(thread_process1, (void *)this);
QFuture<void> t2 = QtConcurrent::run(thread_process2, (void *)this); 
```

并且 thread_process1 和 2 都只是一行，即

```
qDebug()<<"thread id: "<<QString("%1").arg((int) QThread::currentThreadId(), 0, 16) ; 
```

但是，它们都显示线程 ID：“ffffffffb6085b40”

我做错了吗？？QFutureWatcher 似乎没有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T02:36:41.007

运行文档说，

> 在单独的线程中运行函数。该线程取自全局 QThreadPool。请注意，该功能可能不会立即运行；该函数仅在线程可用时运行。

不能保证每次调用 run 都会在不同的线程中运行。这些函数可能运行得如此之快，它们都由同一个线程按顺序处理。尝试在 thread_process_1 中进行睡眠调用，以查看这些函数是否被不同的线程拾取。

# java - OnResizeListener 或 OnDrawListener 或类似的东西

> ID：12344651
> 
> 赞同：1
> 
> 时间：2012-09-10T02:13:07.817
> 
> 标签：java, android

我需要`LinearLayout`在创建时获得我的主要宽度。在实际绘制之前，宽度为 0 - 直到`onCreate(...)`完成之后才绘制......所以我想做的是在它被绘制或调整大小时被告知，然后从那里获取宽度。这些似乎没有任何听众，所以有人对如何在创建时获得宽度有任何建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T02:33:54.883

也许它的废话答案..但你真的需要它 onCreate 方法吗？

您可以在 onStart 方法中移动 onCreate 方法中的所有内容。会有我认为一切都好，你不会得到宽度 0..

但如果你真的需要它在 onCreate 方法中。您可以覆盖视图的 onSizeChanged 方法。我现在不在带有 Eclipse 的 PC 上，但它看起来像：

```
View v=(View)findViewById(R.layout.your_layout);
v.setOnSizeChangedListener(new OnSizeChangedListener(){
@override
public OnSizeChanged(View v){
// ..... YOUR CODE IN HERE ......
}
}); 
```

编辑：sry..这是正确的答案，但不是很多:] 基本上没有 onSizeChangedListener，你需要自己写..

看看[https://stackoverflow.com/a/5087960/1148979](https://stackoverflow.com/a/5087960/1148979)你可以找到答案

# php - 如何在 CodeIgniter 的库中使用 session？

> ID：12344653
> 
> 赞同：11
> 
> 时间：2012-09-10T02:13:44.103
> 
> 标签：php, codeigniter, controller

我想通过在控制器的构造函数中使用我的库来检查用户是否已登录 CodeIgniter。

这是我的图书馆：

```
class Administrator_libs {

    public function validate_authen(){
        if( $this->session->userdata('user_authen') ){
            redirect(base_url().'admin/login/');
        }   
    }
} 
```

这是我的控制器：

```
class Administrator extends CI_Controller {

    public function __construct(){
        parent::__construct();
        $this->load->library('administrator_libs');
        $this->administrator_libs->validate_authen();
        $this->load->model('mod_menu');
    }
} 
```

但我收到此错误消息：

```
Undefined property: Administrator_libs::$session 
```

如何在 CodeIgniter 的库中使用 session？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-10T02:19:26.133

如果你想访问你自己内部的任何 CodeIgniter 库，你必须调用`get_instance()`. 这是因为`$this`绑定到您当前的库而不是 CodeIgniter 对象。

```
$CI =& get_instance();
if( $CI->session->userdata('user_authen') ){
    redirect(base_url().'admin/login/');
} 
```

请参阅[创建库](http://codeigniter.com/user_guide/general/creating_libraries.html)CodeIgniter 文档。特别是**在您的库中使用 CodeIgniter 资源下的内容**

这假设您在 中自动加载会话库`config/autoload.php`，如果没有，您还需要在实例化`$CI->load->library("session");`后添加。`$CI`

**重要提示：** `=&`不是错字。它通过引用传递以节省内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-29T06:37:56.413

你应该简单地去 application/autoload.php 并添加你的自动加载包，它应该看起来像这样：`$autoload['packages'] = array('database','form_validation','session','email');`

你可以看到我在我的包中添加了会话包。现在来到你的构造函数，你应该通过添加这个来加载这个包：`$this->load->library("session");`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-14T15:06:58.920

Session 和任何其他 lib / helper 等从 CI_Controller / CI_Model / etc**扩展**...如果您尝试`$this->whatever`在不从任何此 CI 模块扩展的库上使用，您将收到错误消息。正如 Jordan 所说，您可以使用 get_instance。

# javascript - 当用户按下“Ctrl+V”时如何在 Firefox 中获取剪贴板文本和 html

> ID：12344658
> 
> 赞同：0
> 
> 时间：2012-09-10T02:14:06.153
> 
> 标签：javascript, html, firefox, copy, paste

**当用户按下“Ctrl+V”时，如何在Firefox**中获取剪贴板文本和不带 Flash 的 html ，我可以将焦点移动到文本区域以获取粘贴文本，或将焦点移动到 contenteditable div 以获取粘贴 html，但是如何获取他们俩？

如果我将焦点移到一个 contenteditable div 以获取粘贴 html，然后从 innerHTML 中提取文本，似乎文本与粘贴事件文本不完全相同

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T02:26:05.683

之前有人问过这个问题，这里的答案似乎很流行：[JavaScript get clipboard data on paste event (Cross browser)](https://stackoverflow.com/questions/2176861/javascript-get-clipboard-data-on-paste-event-cross-browser)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T02:21:45.710

你的意思是像[**这个演示**](http://jsbin.com/ayesut/3)。当您粘贴到 contenteditable 中并点击 go 时，它会为您提供所粘贴内容的文本和 HTML。

```
input = document.getElementById('a'); // is contenteditable
input.textContent; // plain text
input.innerHTML; // html 
```

# python - 如何在 SQLAlchemy 中将对象添加到多对一关系？

> ID：12344664
> 
> 赞同：3
> 
> 时间：2012-09-10T02:15:18.270
> 
> 标签：python, sqlalchemy, pyramid

我写了两个这样的模型：

```
class ItemType(Base, DBBase):
    __tablename__ = 'itemtypes'

    id = Column(Integer, primary_key = True)
    name = Column(String), nullable = True)

    comments = relationship('ItemTypeComment')

class ItemTypeComment(Base, DBBase):
    __tablename__ = 'itemtypecomments'

    id = Column(Integer, primary_key = True)
    comment = Column(String), nullable = True)

    itemtype_id = Column(Integer, ForeignKey('itemtypes.id'), nullable = True)
    itemtype = relationship('ItemType') 
```

这里我们可以看到，一个 ItemType 可以有多个 ItemTypeComments。现在我想向 ItemType 类添加一个方法，以便轻松地向它添加注释。目前，我写道：

```
def add_comment(self, comment):
    comment = ItemTypeComment()
    comment.comment = comment
    comment.itemtype = self
    DBSession.add(comment) 
```

我想知道是否有更好的方法来做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T03:00:18.373

好吧，您拥有的代码没有任何问题。但是，您可以使用 .append() 方法稍微简化 add_comment：

```
def add_comment(self, comment):
    comment = ItemTypeComment()
    self.comments.append(comment) 
```

这消除了设置comment.itemtype，以及手动将新对象添加到您的DBSession。

# java - 在 Titanium 中设置 Android Activity

> ID：12344665
> 
> 赞同：3
> 
> 时间：2012-09-10T02:15:32.997
> 
> 标签：java, bluetooth, titanium, android-activity, appcelerator

我正在尝试在 Android 设备上启用蓝牙。我已阅读 Android 文档，并且非常了解该过程是什么。但是，我更倾向于使用清单文件实际启动 Activity。这是我到目前为止所做的......

我开发了一个带有几个类的 Android 模块：

1.  BluetoothModule // 扩展 KrollModule
2.  BluetoothSetup // 扩展 Activity

在 BluetoothSetup 中，该`onCreate`方法如下所示：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    connectBluetooth();
} 
```

同样在 BluetoothSetup 中，connectBluetooth() 方法如下所示：

```
protected void connectBluetooth(){

        // if statements to check if bluetooth is enabled/avail removed
        Intent intentBluetooth = new Intent(BluetoothAdapter.ACTION_REQUEST_ENABLE);

        startActivityForResult(intentBluetooth, 0); 

    }   

} 
```

最后，在模块的 timodule.xml 中，我添加了：

```
 <activity android:label="@string/app_name" android:name="com.eyesore.bluetooth2.BluetoothSetup">
                <intent-filter>
                    <action android:name="android.intent.action.MAIN"/>
                    <category android:name="android.intent.category.LAUNCHER"/>
                    <category android:name="android.intent.category.DEFAULT"/>
                </intent-filter>
            </activity> 
```

该模块编译得很好，但实际上并没有做任何事情。我担心我在这里错过了一个基本步骤，但我不确定它是什么。任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T15:41:42.357

Figured this out. Wound up creating a custom per instructions here:

[https://wiki.appcelerator.org/display/guides/Maintaining+a+Custom+AndroidManifest.xml](https://wiki.appcelerator.org/display/guides/Maintaining+a+Custom+AndroidManifest.xml)

I removed the extra code Titanium drops in the manifest file and it seems to be working.

# java - 平板电脑上的 DatePickerDialog 不会调用 onDateSet

> ID：12344667
> 
> 赞同：0
> 
> 时间：2012-09-10T02:15:42.513
> 
> 标签：java, android, tabs, galaxy, datepickerdialog

我正在使用 DatePickerDialog 提示用户输入日期。它在模拟器和我的三星 Galaxy Nexus 上运行良好，但在我的三星 Galaxy Tab 2 上没有调用 onDateSet。

我注意到，对话框更大，除了正常的旋转视图之外还显示了一个日历。这可能是问题吗？

这是一些代码：

```
import java.util.Calendar;
import java.util.Date;

import android.app.DatePickerDialog;
import android.app.Dialog;
import android.content.DialogInterface;
import android.content.Intent;
import android.os.Bundle;
import android.support.v4.app.DialogFragment;
import android.widget.DatePicker;

import com.cbit.gtbetapp.R;
import com.cbit.gtbetapp.gui.racedata.MeetingDataActivity;
import com.cbit.gtbetapp.gui.racedata.MeetingListFragment;
import com.cbit.gtbetapp.logic.Utility;

public class DatePickerFragment extends DialogFragment implements
        DatePickerDialog.OnDateSetListener {

    protected Date date = null;

    @Override
    public Dialog onCreateDialog(Bundle savedInstanceState) {

        // Use the current date as the default date in the picker
        final Calendar c = Utility.getToday();
        int year = c.get(Calendar.YEAR);
        int month = c.get(Calendar.MONTH);
        int day = c.get(Calendar.DAY_OF_MONTH);
        date = c.getTime();

        // Create a new instance of DatePickerDialog and return it
        DatePickerDialog dialog = new DatePickerDialog(getActivity(), this, year, month, day) {
            @Override
            public void onDateChanged(DatePicker view, int year, int month, int day) {
                super.onDateChanged(view, year, month, day);
                setTitle(getString(R.string.date_picker_title));
            }
        };
        dialog.setTitle(getString(R.string.date_picker_title));

        dialog.setButton(DatePickerDialog.BUTTON_POSITIVE,
                getString(android.R.string.ok), new DialogInterface.OnClickListener() {

                    @Override
                    public void onClick(DialogInterface dialog, int which) {
                        dialog.cancel();

                        Intent intent = new Intent(getActivity(), MeetingDataActivity.class);
                        intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                        intent.putExtra(MeetingListFragment.EXTRA_DATE, date.getTime());
                        startActivity(intent);
                    }
                });
        dialog.setButton(DatePickerDialog.BUTTON_NEGATIVE,
                getString(R.string.button_cancel),
                new DialogInterface.OnClickListener() {

                    @Override
                    public void onClick(DialogInterface dialog, int which) {
                        dialog.cancel();
                    }
                });
        return dialog;
    }

    public void onDateSet(DatePicker view, int year, int month, int day) {
        Calendar c = Calendar.getInstance();
        c.clear();
        c.set(Calendar.YEAR, year);
        c.set(Calendar.MONTH, month);
        c.set(Calendar.DAY_OF_MONTH, day);
        date = c.getTime();
    }
} 
```

什么可能导致这种情况？平板电脑中的错误？我错过了什么吗？谁能想到解决方法？

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T03:33:28.107

我很惊讶它完全有效。执行*默认*`onDateSet()`行为时会调用，但是由于您完全设置了新按钮，因此您将摆脱原始行为。您可以[查看代码](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.4_r2.1/android/app/DatePickerDialog.java#DatePickerDialog.%3Cinit%3E%28android.content.Context%2Cint%2Candroid.app.DatePickerDialog.OnDateSetListener%2Cint%2Cint%2Cint%29)。你为什么不开始你的活动？如果您想要设置文本，那么您可以获取每个按钮而不是设置它们 ( )。 *`onClick``onDateSet()``getButton(BUTTON_POSITIVE)`*

 *此外，请注意 Jelly Bean 中存在一个新错误，`onDateSet`即使您按回，也会调用两次，并且他们还删除了默认的取消按钮。去搞清楚。*

# c# - 没有表单的 C# 句柄

> ID：12344670
> 
> 赞同：0
> 
> 时间：2012-09-10T02:16:26.900
> 
> 标签：c#, message, volume, handle

我试图让我的程序发送消息以控制音量，但我需要一个句柄。我目前尝试在当前代码中使用如下所示的广播，但这会导致所有进程发送一条消息，导致音量上升到 100 或 0 并冻结程序。我试过使用 Process.GetCurrentProcess().MainWindowHandle; 但这仅在我有表单或命令提示符时才有效。注意我希望使用我对当前代码的修改来让这个程序工作。

```
using System;
using System.Windows.Forms;
using System.Runtime.InteropServices;
using System.Diagnostics;

    namespace Utilities
    {
        static class VolumeMessage
        {
            private const int APPCOMMAND_VOLUME_MUTE = 0x80000;
            private const int APPCOMMAND_VOLUME_UP = 0xA0000;
            private const int APPCOMMAND_VOLUME_DOWN = 0x90000;
            private const int WM_APPCOMMAND = 0x319;
            private static IntPtr Handle = (IntPtr)0xffff;

            [DllImport("user32.dll")]
            public static extern IntPtr SendMessageW(IntPtr hWnd, int Msg,
                IntPtr wParam, IntPtr lParam);

            public static void Mute()
            {
                SendMessageW(Handle, WM_APPCOMMAND, Handle,
                    (IntPtr)APPCOMMAND_VOLUME_MUTE);
            }

            public static void volumeDown()
            {
                SendMessageW(Handle, WM_APPCOMMAND, Handle,
                    (IntPtr)APPCOMMAND_VOLUME_DOWN);
            }

            public static void volumeUp()
            {
                SendMessageW(Handle, WM_APPCOMMAND, Handle,
                    (IntPtr)APPCOMMAND_VOLUME_UP);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-01T10:27:32.320

您可以使用

var handle = Process.GetProcessesByName("explorer").First().MainWindowHandle;

请注意，对于第二个参数，您可以传递 IntPtr.Zero

顺便说一句，我遇到了同样的问题，还有静音/音量控制......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-01T10:57:22.243

我认为您有时只需要一个表单来让 Windows 消息正常工作，因此创建一个并使其始终隐藏。我们以前不得不这样做，以实现这些方面的一些东西。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-10T03:27:24.513

如果您真的想这样做，那么您可以将其发送到桌面 hwnd 我相信。从内存中有一个 API 来获取这个 hwnd，它就像 GetDesktopWindow 或类似的东西。

但是，必须有更好的方法。当然，有一个 API 可以直接控制音量。

# php - 计数数据取决于句子 id 和数据频率

> ID：12344672
> 
> 赞同：2
> 
> 时间：2012-09-10T02:16:46.527
> 
> 标签：php, mysql, sql

我有桌子：

```
=========================================================================
| id | stem_before | stem_after | stem_freq | sentence_id | document_id | 
=========================================================================
|  1 |     a       |     b      |    1      |   0         |       1     |    
|  2 |     c       |     d      |    1      |   0         |       1     |        
|  3 |     e       |     f      |    1      |   1         |       1     |
|  4 |     g       |     h      |    1      |   2         |       1     |
|  5 |     i       |     j      |    2      |   0         |       2     |
|  6 |     k       |     l      |    1      |   0         |       2     |
========================================================================= 
```

我想分两步计算：第一步是将 1 除以`stem_freq`每个`sentence_id`and中的值的总和`document_id`。第二步是将第一步的结果与值相乘`stem_freq`

例如 ：

对于`document_id`= 1 和`sentence_id`= 0 的数据，第一步：`1/(1+1)`= 0.5，第二步`id`= 1 为`1*0.5`= 0.5。对于`id`= 2 是`1*0.5`= 0.5。

对于`document_id`= 2 和`sentence_id`= 0 的数据，第一步：`1/(2+1)`= 0.3333，第二步`id`= 5 是`2*0.3333`= 0.6666，对于`id`= 6 是`1*0.3333`= 0.3333。

这是我的代码：

```
$query = mysql_query ("SELECT sentence_id, document_id, stem_after, 
stem_freq,SUM(stem_freq) as freq 
FROM tb_stemming 
WHERE document_id ='$doc_id' 
GROUP BY(sentence_id)");

while ($row = mysql_fetch_array($query)) {
   $a    = $row['freq'];
   $freq = $row['stem_freq'];
   $tf   = $freq/$a;
} 
```

但它只给了我每个不同句子中第一个数据的结果：你能帮帮我吗？谢谢你 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T03:41:10.823

试试这个：

```
SELECT
    a.*, 
    a.stem_freq * b.value
FROM
    tb_stemming as a
    JOIN 
    (
        SELECT
            document_id,
            sentence_id,
            1 / sum(stem_freq) 'value'
        FROM
            tb_stemming
        GROUP BY document_id, sentence_id
    ) as b
    ON a.document_id = b.document_id AND a.sentence_id = b.sentence_id 
```

# php - 删除变量内字符串中的单词

> ID：12344673
> 
> 赞同：0
> 
> 时间：2012-09-10T02:16:59.193
> 
> 标签：php

我可以使用一些帮助。如何删除变量内字符串中的单词？例如：

```
$var = "test1 test2 ui"; $string="fru test1 frhu test2 vrui ui fehugr"; 
```

输出应该是：

```
fru fru vrui fehugr 
```

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T02:20:16.773

使用[str_replace](http://php.net/manual/en/function.str-replace.php)函数：

```
$ret = str_replace(explode(' ', $var), '', $string); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T02:40:07.263

@xdazz，不幸的是，您的代码没有返回请求的输出。

由于 Filippo 只想替换 /real/ 单词，它以 nothing/whitespace 开头并以 whitespace/new-line/nothing 结尾，因此您需要一个正则表达式。

```
$exp = '/(^|\s)('.str_replace(' ', '|', preg_quote($var, '/')).')(?=(\s|$))/';
$string = trim(preg_replace($exp, '', $string)); 
```

这仅替换真实的单词。

# javascript - 如何在不知道密钥的情况下访问 javascript 对象值

> ID：12344675
> 
> 赞同：21
> 
> 时间：2012-09-10T02:17:28.503
> 
> 标签：javascript

> **可能重复：**
> [如何枚举 javascript 对象的属性？](https://stackoverflow.com/questions/85992/how-do-i-enumerate-the-properties-of-a-javascript-object)

如果我有这样的 javascript 对象：

```
data = {
    a : 2,
    b : 3
} 
```

但是 a 和 b 是任意的，并在运行时决定。有没有办法在不知道密钥的情况下通过对象并访问所有属性？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-09-10T02:19:13.653

```
data = {
    a : 2,
    b : 3
}

for(var propName in data) {
    if(data.hasOwnProperty(propName)) {
        var propValue = data[propName];
        // do something with each element here
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-10T02:23:23.030

首先，这不是 JS 中通常所说的 an `Array`，它通常被称为`Object`. `Array`s 只包含值，即

```
arr = [1, 2, 3, 4] 
```

而`Object`s ('Associative arrays') 关联名称：值对。

要迭代 a 的值`Object`，请使用`for...in`

```
var object = { a: 'hello' }

for (var key in object) {
  if (object.hasOwnProperty(key)) {
    alert(key); // 'a'
    alert(object[key]); // 'hello'
  }
} 
```

这`hasOwnProperty`很重要，以确保您只查看实际对象，而不是属于原型的属性。

# iphone - 来自 UIView 的 UIImagePickerController

> ID：12344681
> 
> 赞同：2
> 
> 时间：2012-09-10T02:18:40.470
> 
> 标签：iphone, ios, uiviewcontroller, camera

当我按下按钮时，相机会打开，但如果我按下取消，或者在我拍照并按下 USE 后，相机就会卡住。我想解散，移除相机并将图像用于我的 ImageView。

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    scrtImg.image = [info objectForKey:UIImagePickerControllerOriginalImage];
    [picker2.view removeFromSuperview];
}

- (void)imagePickerControllerDidCancel:(UIImagePickerController *)picker
{
    [picker2.view removeFromSuperview];
}

- (IBAction)openCamera:(id)sender
{    
    picker2 = [[UIImagePickerController alloc]init];
    picker2.delegate = self;
    [picker2 setSourceType:UIImagePickerControllerSourceTypeCamera];
    [self addSubview:picker2.view];
    [picker2 release];  
} 
```

如果我在 ViewController 上使用此代码，效果很好，但在 UIView 中它不起作用。帮帮我，我需要从 UIView 打开相机，并在 UIView 中使用图像。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T09:29:28.460

一旦在窗口中添加 UIView 然后尝试。它可能会起作用。

# android - 即使方向发生变化，如何确保布局中的元素保持不变

> ID：12344683
> 
> 赞同：0
> 
> 时间：2012-09-10T02:19:11.070
> 
> 标签：android, android-layout, screen-orientation

我有个问题。我正在使用纵向方向在手机上测试我的应用程序，结果布局非常好。但是，当我将屏幕旋转到横向时，按钮和 EditText 不合适，因此我想知道有没有办法让元素保持在原位而不管方向如何？提前致谢。作为参考，我正在为我的项目使用相对布局。

# c# - 在 XAML 中设置样式

> ID：12344685
> 
> 赞同：2
> 
> 时间：2012-09-10T02:19:21.157
> 
> 标签：c#, wpf, xaml

我`Style`在 XAML 中有以下基础，我需要基于它创建一些新样式，每个新样式中只有 1 个属性不同。

```
<UserControl.Resources>
<Style x:Key="BaseButtonStyle" TargetType="{x:Type ButtonBase}">
            <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
            <Setter Property="Background" Value="{StaticResource Button.Background}"/>
            <Setter Property="BorderBrush" Value="{StaticResource Button.BorderBrush}"/>
            <Setter Property="Foreground" Value="{StaticResource Button.Foreground}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="HorizontalContentAlignment" Value="Center"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="Padding" Value="10,1,10,1"/>
            <Setter Property="SnapsToDevicePixels" Value="True"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type ButtonBase}">
                        <Grid x:Name="Root" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}">
                            <Grid x:Name="FocusState" Opacity="0">
                                <Border CornerRadius="4" Style="{StaticResource FocusTemplate}"/>
                            </Grid>
                            <Grid x:Name="DefaultState">
                                <Border Background="{StaticResource Button.DefaultState.Border1}"
                                    Padding="1" CornerRadius="3">
                                    <Border Background="{StaticResource Button.DefaultState.Border2}"
                                        Padding="1" CornerRadius="2">
                                    </Border>
                                </Border>
                            </Grid>
                            <Grid x:Name="HoverState" Opacity="0">
                                <Border Background="{StaticResource Button.HoverState.Border1}"
                                    Padding="1" CornerRadius="3">
                                    <Grid>
                                        <Border Background="{StaticResource Button.HoverState.Border2}"
                                            Padding="1" CornerRadius="2">
                                            <Border Background="{StaticResource Button.HoverState.Border3}"
                                                CornerRadius="1"/>
                                        </Border>
                                        <Border>
                                            <Border.Background>
                                                <RadialGradientBrush>
                                                    <RadialGradientBrush.RelativeTransform>
                                                        <TranslateTransform X="0" Y="0.5"/>
                                                    </RadialGradientBrush.RelativeTransform>
                                                    <GradientStop Color="#00FFFFFF" Offset="1"/>
                                                    <GradientStop Color="#BFFFFFFF" Offset="0"/>
                                                </RadialGradientBrush>
                                            </Border.Background>
                                        </Border>
                                    </Grid>
                                </Border>
                            </Grid>
                            <Grid x:Name="PressedState" Opacity="0">
                                <Border Background="{StaticResource Button.PressedState.Border1}"
                                    Padding="1" CornerRadius="3">
                                    <Border Background="{StaticResource Button.PressedState.Border2}"
                                        Padding="1" CornerRadius="2">
                                        <Border Background="{StaticResource Button.PressedState.Border3}"
                                            CornerRadius="1"/>
                                    </Border>
                                </Border>
                            </Grid>
                            <Grid x:Name="CheckedState" Opacity="0">
                                <Border Background="{StaticResource Button.CheckedState.Border1}"
                                    Padding="1" CornerRadius="3">
                                    <Border Background="{StaticResource Button.CheckedState.Border2}"
                                        Padding="1" CornerRadius="2">
                                        <Border Background="{StaticResource Button.CheckedState.Border3}"
                                            CornerRadius="1"/>
                                    </Border>
                                </Border>
                            </Grid>
                            <Grid Margin="2">
                                <ContentPresenter Margin="{TemplateBinding Padding}"
                                              HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                                              VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                                              RecognizesAccessKey="True"
                                              SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                            </Grid>
                        </Grid>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter TargetName="DefaultState" Property="Opacity" Value="0"/>
                                <Setter TargetName="HoverState" Property="Opacity" Value="1"/>
                                <Setter TargetName="PressedState" Property="Opacity" Value="0"/>
                                <Setter TargetName="CheckedState" Property="Opacity" Value="0"/>
                                <Setter Property="Foreground"
                                    Value="{StaticResource Button.Foreground}"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter TargetName="DefaultState" Property="Opacity" Value="0"/>
                                <Setter TargetName="HoverState" Property="Opacity" Value="0"/>
                                <Setter TargetName="PressedState" Property="Opacity" Value="1"/>
                                <Setter TargetName="CheckedState" Property="Opacity" Value="0"/>
                                <Setter Property="Foreground"
                                    Value="{StaticResource Button.Foreground}"/>
                            </Trigger>
                            <Trigger Property="ToggleButton.IsChecked" Value="True">
                                <Setter TargetName="DefaultState" Property="Opacity" Value="0"/>
                                <Setter TargetName="HoverState" Property="Opacity" Value="0"/>
                                <Setter TargetName="PressedState" Property="Opacity" Value="0"/>
                                <Setter TargetName="CheckedState" Property="Opacity" Value="1"/>
                                <Setter Property="Foreground"
                                    Value="{StaticResource Button.Foreground}"/>
                            </Trigger>
                            <Trigger Property="IsFocused" Value="True">
                                <Setter TargetName="FocusState" Property="Opacity" Value="1"/>
                            </Trigger>
                            <Trigger Property="Button.IsDefaulted" Value="True">
                                <Setter TargetName="FocusState" Property="Opacity" Value="1"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter TargetName="Root" Property="Opacity" Value="0.35"/>
                                <Setter Property="Foreground"
                                    Value="{StaticResource Button.Foreground}"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
</Style>

<UserControl.Resources> 
```

我将其设置为基本 Button 样式使用

```
<Style TargetType="{x:Type Button}" BasedOn="{StaticResource BaseButtonStyle}"/> 
```

到目前为止，一切都很好。接下来我想要第二种风格，唯一不同的部分是

```
<Border Background="{StaticResource Button.DefaultState.BorderNEWZ}"
//instead of
<Border Background="{StaticResource Button.DefaultState.Border2}" 
```

所以我尝试了 NEWSTYLETEST ......

```
 <Style x:Key="NEWSTYLETEST" TargetType="{x:Type Button}" BasedOn="{StaticResource BaseButtonStyle}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type ButtonBase}">
                    <Grid x:Name="Root" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}">
                        <Grid x:Name="FocusState" Opacity="0">
                            <Border CornerRadius="4" Style="{StaticResource FocusTemplate}"/>
                        </Grid>
                        <Grid x:Name="DefaultState">
                            <Border Background="{StaticResource Button.DefaultState.Border1}"
                                Padding="1" CornerRadius="3">
                                <Border Background="{StaticResource Button.DefaultState.BorderNEWZ}"
                                    Padding="1" CornerRadius="2">
                                </Border>
                            </Border>
                        </Grid>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

这确实将我需要的控制部分从`Button.DefaultState.Border2`to更改为，但它省略了基本样式`Button.DefaultState.BorderNEWZ`中其余部分中包含的其余值。`<Setter Property="Template">`

`<Setter Property="Template">`我可以每次都复制整个并更改我需要的行，但这似乎有点矫枉过正。有没有办法只`Button.DefaultState.Border2`针对每种新样式的更改，同时保持其他所有内容相同而不重复大量代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T02:55:39.407

BasedOn 在每个属性的基础上工作，所以在这种情况下，您已经告诉它覆盖“模板”属性。（全有或全无）最终，您将在此处概述您要寻找的答案：

[http://social.msdn.microsoft.com/forums/en-US/wpf/thread/abe21d46-8e32-4f33-bb8f-750bdc38cb14/](http://social.msdn.microsoft.com/forums/en-US/wpf/thread/abe21d46-8e32-4f33-bb8f-750bdc38cb14/)

# google-maps - Google Maps API - 显示什么？

> ID：12344687
> 
> 赞同：2
> 
> 时间：2012-09-10T02:19:36.810
> 
> 标签：google-maps, plot

我们如何以编程方式知道地图的哪一部分在任何给定时间是可见的？例如：

当我加载地图时，我设置了中心，这样我就知道我在哪一点，并且知道要加载哪些属性。但是，当用户拖动地图或放大地图的较小部分时。我怎么知道此时要绘制哪些属性？如何知道用户到底在看什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T02:41:07.690

您可以使用该方法`bounds = map.getBounds()`（假设这`map`是您存储 Google 地图的变量），这将返回当前视口的边界。

然后，`bounds.getSouthWest()`您`bounds.getNorthEast()`将获得两个角的纬度和经度，这样您就可以知道用户正在看到什么。

[https://developers.google.com/maps/documentation/javascript/reference#Map](https://developers.google.com/maps/documentation/javascript/reference#Map)

# configuration - Lua：我可以使用“require”作为依赖注入的一种形式吗？

> ID：12344690
> 
> 赞同：2
> 
> 时间：2012-09-10T02:20:15.463
> 
> 标签：configuration, dependency-injection, lua, loose-coupling

我正在设计一个医院集成系统，它使用来自不同医院（我们的客户）的数据，然后根据从数据库读取配置将特定的业务规则应用于所述数据。如果我使用 Java，我的第一直觉是构建一系列代表各种业务规则的接口，然后注入具体实例（使用 Spring/guice）来组成一个完全配置的对象。这将使我能够在配置逻辑（哪些 biz 规则应该适用于 Hospital Foo？）和实际业务规则本身之间实现清晰的分离。

不幸的是，我没有使用 Java，我使用的是 Lua。在过去的几天里，我沉浸在 Lua 文献中，与 DI 最接近的模拟似乎是模块的使用。此外，管理如何在运行时解析 lua 模块的规则似乎完全基于询问本地文件系统。

“模块模式”是实现我所追求的最佳/唯一方法（将配置逻辑与 biz 逻辑分离）？如果是这样，如何利用 Lua 的模块加载规则来改变在运行时加载的实际模块？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-10T02:53:35.677

第 1 步：停止像 Java 程序员那样思考。

你现在在*Lua*中。没有具有显式和编译时固定原型的类。函数是一等对象；他们是*价值观*。因此，以这种方式分解问题。

你有一堆“规则”（即：函数）。您希望将其中一些规则应用于某些数据。您有一个配置系统，上面写着“在将规则应用于位置 X 的数据时，请使用这组规则”。所以……这样做。

您检测到数据来自位置 X。因此，您调用配置逻辑为位置 X 构建 Lua 表，其中包含要应用于该数据的规则（即：函数）。位置 X 的配置逻辑从它们存储的任何地方加载规则，然后返回它们。如果配置在数据库或其他东西中，那么位置 X 的数据库条目可能会按名称引用规则。

如何将该规则名称转换为实际的 Lua 函数取决于您，但有很多方法。您可以有一个注册表，将目录中的所有 Lua 文件预加载到表中，然后根据该表中的名称选择规则。或者你有一个名为 Lua 文件/脚本的数据库，每个文件/脚本都是一个单独的规则。有许多方法可以实现这一点。

在 Lua 中，“依赖注入”只是“决定如何构建函数集合”。这并不是什么特别的事情，因为 Lua 是一种比 Java 更自由的语言。只是函数来自哪里，如何将它们放在一个表中，然后如何将该表应用于某些数据的问题。所有这些都取决于你。

# database - .MDF / .SDF 数据库客户端软件要求

> ID：12344693
> 
> 赞同：1
> 
> 时间：2012-09-10T02:21:00.143
> 
> 标签：database, vb.net, mdf, sdf, system-requirements

我开发了一个使用 VB.NET 运行 mysql (.mdf/.sdf) 数据库文件的程序。它肯定在我的开发机器上运行良好。现在我已经编译并生成了 .exe 文件，希望它可以在另一台没有 Visual Studio 和其他开发工具的个人计算机上运行。PC 运行数据库文件的软件要求是什么？由于我不想在客户端 PC 中安装 Visual Studio、SQL Management Studio 或其他重型开发工具。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T14:57:55.183

我想你的意思是 SQL Server Compact Edition 而不是“mysql”。

您要么必须让用户在他们的桌面上安装运行时，要么将 7 个 dll 文件与您的应用程序一起打包，请参阅：[如何使用应用程序部署 Sql 紧凑型数据库](http://msdn.microsoft.com/en-us/library/aa983326%28v=vs.90%29.aspx)

# visual-studio-2010 - 我应该设置哪些选项以允许文本字段成为 Visual Studio 2010 的 Gridview 中的下拉列表？

> ID：12344694
> 
> 赞同：0
> 
> 时间：2012-09-10T02:21:22.907
> 
> 标签：visual-studio-2010, web-applications, gridview, drop-down-menu

是否可以？我注意到 Gridview（Visual Studio 2010 Web 应用程序）仅包含文本字段，因此想知道是否可以将文本字段转换或更改为 Gridview 内的下拉列表。

如果您单击编辑字段，将出现文本字段，并且这些文本将存储在文本字段中。

[![在此处输入图像描述](../Images/a15ed436aea8264b0fe9e11c434e13d1.png)](https://i.stack.imgur.com/9FfwJ.gif)
[（来源：[microsoft.com](http://i.msdn.microsoft.com/dynimg/IC90936.gif)）]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T02:29:53.200

您应该将编辑模板添加到您的 aspx。

```
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False" 
            DataKeyNames="EmployeeID" DataSourceID="SqlDataSource1">
            <Columns>
                <asp:CommandField ShowEditButton="True" />
                <asp:BoundField DataField="EmployeeID" HeaderText="EmployeeID" 
                    InsertVisible="False" ReadOnly="True" SortExpression="EmployeeID" />
                <asp:BoundField DataField="LastName" HeaderText="LastName" 
                    SortExpression="LastName" />
                <asp:BoundField DataField="FirstName" HeaderText="FirstName" 
                    SortExpression="FirstName" />
                <asp:BoundField DataField="HireDate" HeaderText="HireDate" 
                    SortExpression="HireDate" />
                <asp:TemplateField HeaderText="City" SortExpression="City">
                    <EditItemTemplate>
                        <asp:DropDownList ID="DropDownList1" runat="server" 
                            DataSourceID="SqlDataSource2" DataTextField="City" DataValueField="City" 
                            SelectedValue='<%# Bind("City") %>'>
                        </asp:DropDownList>
                    </EditItemTemplate>
                    <ItemTemplate>
                        <asp:Label ID="Label1" runat="server" Text='<%# Bind("City") %>'></asp:Label>
                    </ItemTemplate>
                </asp:TemplateField>
            </Columns>
        </asp:GridView> 
```

请参阅：[演练：在 GridView Web 服务器控件中编辑时显示下拉列表](http://msdn.microsoft.com/en-us/library/ms178294%28v=vs.90%29.aspx)

# opencv - wxwidget opencv 与 jpeg、png、zlib、tiff 等第三个库冲突

> ID：12344695
> 
> 赞同：0
> 
> 时间：2012-09-10T02:21:31.233
> 
> 标签：opencv, wxwidgets, conflict

我在winXP上工作，并使用gcc4.7。

我建立了 OpenCV 2.4.2 静态库，它们有`liblibjpeg.a` `liblibpng.a` `liblibtiff.a` `libzlib.a`和其他`.a`文件。

`libwxjpeg.a` `libwxpng.a` `libwxtiff.a` `libwxzlib.a`然后我在shared和get等`.a`/`.dll`文件上构建了wxwidgets294 。

因此，当我在 wxwidgets 上使用 OpenCV 时，它们会发生冲突。当我链接`-lopencv_highgui -lopencv_imgproc -lopencv_core -lwxtiff -lwxjpeg -lwxpng -lwxzlib -lwxmsw29ud`wxwidget 可以工作，但 OpenCV 不能，就像`imread`会失败（它得到空垫）。当我链接`-lopencv_highgui -lopencv_imgproc -lopencv_core -llibjasper -llibtiff -llibjpeg -llibpng -lwxmsw29ud -lzlib`wxwidgets 无法工作时，它会在运行后立即退出。

有想法该怎么解决这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T13:18:00.107

你没有解释为什么它不能工作（你的意思是“退出”是“崩溃”吗？如果是这样，你试过调试它吗？）但总的来说，最好的方法是将你多次使用的所有库链接为共享库，并且没有静态库的多个（可能是不同的）副本。

至少 wxWidgets 可以配置为使用系统上已经存在的共享库（如果已安装）。你可能没有它们，这就是为什么它依赖于编译 wx 本身包含的版本。

# android - Android - 绘制位图

> ID：12344700
> 
> 赞同：0
> 
> 时间：2012-09-10T02:22:26.047
> 
> 标签：android, canvas, bitmap

我的测试 Android 应用程序有一个单独的活动 LoadImage，它有两个方法：一个使用 OpenCV 处理图像的 onCreate 方法，以及一个在屏幕上显示图像 5 秒的 Display 方法。这是我到目前为止的 Display 方法：

```
[convert OpenCV matrix to a bitmap using an OpenCV method]

Canvas canvas = new Canvas(bitmap);
canvas.drawBitmap(bitmap, 0, 0, null);

try {
    synchronized (this) {
        wait(5000);
    }
} catch (InterruptedException e) {
} 
```

这是单个活动的 XML 文件（它是一个空白屏幕）：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
</RelativeLayout> 
```

如果我按原样运行代码，我会得到......一个空白屏幕。如何让位图显示？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T03:07:16.400

尝试这个：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

<ImageView
            android:id="@+id/imageView1"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_marginLeft="2dp"/>
</RelativeLayout> 
```

并在您的 java 代码中执行此操作：

```
onCreate()
{
    ImageView imageView = (ImageView) findViewById(R.id.imageView1);
} 
```

**您正在将位图发送到画布吗？**

因此，请在您正在绘制位图中的方法中执行此操作。

```
imageView.setImageBitmap(bitmap); 
```

您不能将画布直接设置为 imageView1。

因为正如你在现实生活中所知道的，画布只是一把画笔。同样，这里的画布也只是一把画笔。所以不用担心它。您编辑的图像现在存储在`bitmap`唯一的。所以这就是为什么*您可以在通过 canvas 编辑后直接设置位图的原因*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-18T08:48:28.577

我将此添加到我的 acitity_main.xml（它是 LinearLayout）：

```
<ImageView
android:id="@+id/imageView1"
android:layout_width="200px"
android:layout_height="200px"
android:layout_marginLeft="2dp"/> 
```

并将此代码添加到同一个 xml 的活动的 OnCreate 方法中：

```
Bitmap bitmap = BitmapFactory.decodeFile(fileAndPath); 
mImageView = (ImageView) findViewById(R.id.imageView1);     
mImageView.setImageBitmap(bitmap); 
```

位图图像显示并保留在屏幕上。感谢上面的海报

# ruby - Redis 会为大量请求排队 hset 命令吗？

> ID：12344701
> 
> 赞同：2
> 
> 时间：2012-09-10T02:22:38.617
> 
> 标签：ruby, database, redis

假设我每秒有 100 个请求，对于每个查询，需要提取一个哈希值，然后需要更新相同的哈希值，如下所示：

redis.hget 'value', 'user-123' redis.hset 'value', 'user-123', JSON.generate({:number_of_visits => 15})

如果每秒有大量的读\写会发生什么？

redis 是否会将 hget 和 hset 命令都排队，并且它们都将按进入的顺序执行？进入的命令越多，它会减慢 hgets 的速度吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T02:24:42.453

Redis 使用单线程处理命令，因此命令会按照到达的顺序进行处理。

[这里](http://www.enjoythearchitecture.com/redis-architecture)的一些文档，

> 从根本上讲，Redis 是一个单线程服务器。这意味着单个线程使用 epoll、kqueue 和 select 等基于事件的范例来读取传入的连接。当文件描述符上发生特定事件时，它会处理它们并写回响应。此 UML 序列图显示了 Redis 如何在内部处理客户端接收到的命令：

如果您以比 redis 处理它们的速度更快的速度发送命令，则命令将在 redis 中排队，并且客户端将看到延迟增加，因为它们等待命令出列和处理。这将影响 hset 和 hget 命令。

# iphone - 带有自定义委托的 iOS 子视图

> ID：12344703
> 
> 赞同：-1
> 
> 时间：2012-09-10T02:23:08.510
> 
> 标签：iphone, uiviewcontroller, delegates, subview

我有三个 viewController，一个 tableViewController 在触摸单元格时添加一个 subView，我们称之为 userSubView，即 viewController 2。点击 VC2 上的一个按钮会添加另一个 subView，我们称之为 actionSubView，即 VC3。

我需要对 VC3 执行操作以在 VC1 上调用所需的委托协议方法。VC1 在头文件中导入自定义委托，Xcode 在 VC1 上正确填充所需的方法。在 VC1 中实例化 VC3 后，我还在 VC1 中将委托设置为 self。

但是，我的委托方法没有被调用。subViews 会导致这种情况怎么办？在使用 self. 由于所有 VC 的原因，要发布大量代码，而且我认为嵌套子视图和委托缺少一个基本想法。

谢谢，非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T05:32:58.320

多个对象（视图对象或视图控制器对象）之间的消息传递本质上是相同的方式。

在上面的问题陈述中，我找不到任何理由采用三个 UIViewController 子类只是为了使用它们的视图来添加父视图上的子视图。采用 UIView 子类也可以解决同样的目的。

我取了三个 UIView 子类，它们都需要委托方法在调用类中实现。主视图控制器将有他们的声明，如

```
#import "FirstView.h"
#import "SecondView.h"
#import "ThirdView.h"

@interface ViewController : UIViewController <ItemPickerDelegate , AllowLoadDelegate>
{
    FirstView*      objFirstView;
    SecondView*     objSecondView;
    ThirdView*      objThirdView;
}
@property (nonatomic , retain)  FirstView*      objFirstView;
@property (nonatomic , retain)  SecondView*     objSecondView;
@property (nonatomic , retain)  ThirdView*      objThirdView;

@end 
```

现在，同一个 View Controller 子类的实现看起来像

```
@implementation ViewController

@synthesize objFirstView;
@synthesize objSecondView;
@synthesize objThirdView;

-(void)dealloc {
    [objFirstView release];
    [objSecondView release];
    [objThirdView release];
    [super dealloc];
}
- (void)viewDidLoad
{
    [super viewDidLoad];
    [self loadInitialView];
}

-(void)loadInitialView {
    if (!objFirstView) {
        self.objFirstView = [FirstView initWithNibName:@"FirstView" bundle:nil];
    }
    [self.objFirstView setCaller:self];
    [self.objFirstView setCurrentContentMode:TableContentModeAll];
    [self.view addSubview:objFirstView];

    [objFirstView setFrame:CGRectMake(0, 0, 320, 220)];
}

- (void)viewDidUnload {
    [super viewDidUnload];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

#pragma mark -Delegate From First View

- (void)didSelectTableView:(UITableView*)tableView atIndexPath:(NSIndexPath*)indexPath {
    if (objSecondView) {
        [objSecondView removeFromSuperview];
    }
    else if (!objSecondView) {
        self.objSecondView = [SecondView initWithNibName:@"SecondView" bundle:nil];
    }
    [self.objSecondView setCaller:self];
    [self.view addSubview:objSecondView];
    [objSecondView setFrame:CGRectMake(0, 220, 320,60)];
}
- (void)didApplyFilter:(TableContentMode)filter {
    NSLog(@"%d filter Loaded",filter);
}

#pragma mark -Delegate From Second View

- (void)didAllowLoadFilters:(BOOL)allow {
    if (objThirdView) {
        [objThirdView removeFromSuperview];
    }
    else if (!objThirdView) {
        self.objThirdView = [ThirdView initWithNibName:@"ThirdView" bundle:nil];
    }
    [self.objThirdView setCaller:objFirstView];
    [self.view addSubview:objThirdView];
    [objThirdView setFrame:CGRectMake(0, 280, 320,30)];

}

@end 
```

在第二视图的最后一个委托方法实现中提到了从第三视图调用所需的第一视图委托方法的最简单方法。

```
[self.objThirdView setCaller:objFirstView]; 
```

流程如下：

Main ViewController (MainVC) 添加 FirstView 的子视图 -> FirstView 加载一个 TableView -> 当一个 TableCell 被选中时 -> 在 MainVC 中调用 Delegate 方法。这需要将第二个视图添加为子视图。SecondView 显示一个按钮 -> 按钮被点击（调用 MainVC 中的委托方法以添加第三个视图的子视图。现在 ThirdView 显示一个段控件 -> 段控件值已更改 -> 根据选定的过滤器和所需的委托方法之一重新加载 FirstView 表在 MainVC 中调用 FirstView。

我知道答案是不言自明的（虽然有点冗长:-)）但是如果您仍然有任何问题，您可以从[这里](https://dl.dropbox.com/u/33943536/MessagePassingDemo.zip)检查源代码并从中获取参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T22:20:15.857

尝试

```
(UIViewController*)[self.navigationController.viewControllers objectAtIndex:1]).callMethod 
```

其中 1 是您要访问的堆栈中的控制器数量

# c - 如何在 Unix C 中获取用户输入？

> ID：12344706
> 
> 赞同：0
> 
> 时间：2012-09-10T02:23:38.573
> 
> 标签：c, unix

我正在尝试编写一个可以在 Unix 环境中使用的程序。但是，这是我第一次做这样的事情，我对某些事情感到困惑。我的代码如下：

```
#include <unistd.h>
#include <stdio.h>

#define BUFFSIZE 4096

int main (int argc, char * argv[]){

int n;
char buf[BUFFSIZE];

if (argc != 2){
    err_sys("usage a.out <pathname>");  
}

if (access(argv[1], R_OK) == -1){
    err_ret("access error for %s", argv[1]);
}

if (access(argv[2], R_OK) == 0){
    printf("Would you like to overwrite (Y or N)? \n");
    if(){
        exit(0);
    }
}

while ((n = read(STDIN_FILENO, buf, BUFFSIZE) > 0)){
    if (write(STDOUT_FILENO, buf, n) != n){
        err_sys("write error"); 
    }
}

if (n < 0){
    err_sys("read error");
}

close(STDOUT_FILENO);
close(STDIN_FILENO);

exit(0);

} 
```

好的，所以基本上，我必须编写一个使用打开、读取、写入、关闭和访问的程序。但是，如果第二个参数（文件名）已经到位，我对如何实现必须提示用户覆盖或不覆盖的部分完全感到困惑。

也就是这些代码行：

```
if (access(argv[2], R_OK) == 0){
   printf("Would you like to overwrite (Y or N)? \n");
       if(){
           exit(0);
} 
```

我不确定如何从用户那里获得响应以及条件是什么。

另外，如果我的其他代码有任何错误，请随时通知我并让我知道如何改进它。

谢谢！

刚刚添加：

```
if (open(argv[1], O_RDONLY) < 0){
    err_ret("open error for %s", argv[1]);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T20:00:46.370

使用 fgets(3) 或 readline(3)，它们足够通用，可以在许多不同的场景中使用。避免使用 scanf(3) 因为它有问题，更多信息[在这里](http://c-faq.com/stdio/scanfprobs.html)

附带说明，请使用“size_t n”而不是“int n”。一般来说，您可以只使用 BUFSIZ，它是一个实现定义的值，并且在标题中很容易获得。另外，为什么在退出时关闭标准输入和标准输出？在您的程序中没有特定的理由这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T14:53:53.403

您可以使用 getchar() 或 scanf() 来获取用户输入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T02:48:04.800

要只读取一个字符，您可以调用 getchar() (stdio.h)（也有 scanf()）。

样本：
`c = getchar();
if(c == 'Y' || c == 'y'){ ... }
else if(c == 'N' || c == 'n'){ ... }
else { printf("Wrong option!") }`

# c# - Castle Windsor - 开放通用接口的 IoC 注册？

> ID：12344708
> 
> 赞同：38
> 
> 时间：2012-09-10T02:24:02.747
> 
> 标签：c#, .net, inversion-of-control, castle-windsor, ioc-container

Castle Windsor 是否允许注册开放的通用接口，还是我需要分别注册每个可能的类型化实例？

示例 - 以下类型为 T,Z 的编译失败，除非我单独指定 T,Z 为强类型。

```
 container.Register(Component
      .For<IAdapterFactory<T,Z>>()
      .ImplementedBy<AdapterFactory<T,Z>>()
      .LifeStyle.PerWebRequest); 
```

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-09-10T02:50:42.260

它被称为*open generic*，是的，Windsor 确实支持它。

```
 container.Register(Component
             .For(typeof(IAdapterFactory<,>))
             .ImplementedBy(typeof(AdapterFactory<,>))
             .LifestylePerWebRequest()); 
```

# objective-c - 扩展用户定义的类

> ID：12344711
> 
> 赞同：0
> 
> 时间：2012-09-10T02:24:31.723
> 
> 标签：objective-c, class, super

我创建了一个名为 Box 的类。我现在明白了，它也是objective C中定义的一个类。我的Box类编译没有错误，可以被消费者类调用。现在，我希望扩展 My box 类。我收到错误“冲突的超类名称'Box'”。有没有办法告诉 XCode 扩展我写的类？

谢谢，

詹姆士

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T02:45:51.047

如果我误解了您的问题，请原谅我，但您可以尝试使用类别。类别是子类化的替代方法，允许您向类添加方法。

这是您为 Box 类创建类别的方式：

```
@interface Box (categoryName)
//New methods go here
@end

@implementation Box (categoryName)
//New methods implementation goes here
@end 
```

# asp-classic - 未使用 cdo 和 microsoft smtp 服务器到达的电子邮件

> ID：12344712
> 
> 赞同：0
> 
> 时间：2012-09-10T02:24:32.077
> 
> 标签：asp-classic, smtp

我正在尝试使用 asp classic 发送电子邮件。使用下面的代码，我没有错误。但是电子邮件根本没有到达。所有消息都直接发送到我的 BadMail 文件夹。关于为什么会发生这种情况的任何想法？

```
<%
Set ObjSendMail = CreateObject("CDO.Message")

ObjSendMail.Configuration.Fields.Item ("http://schemas.microsoft.com/cdo/configuration/sendusing") = 2
ObjSendMail.Configuration.Fields.Item("http://schemas.microsoft.com/cdo/configuration/smtpserverpickupdirectory") = "d:\Inetpub\mailroot\Pickup"
ObjSendMail.Configuration.Fields.Update

ObjSendMail.From = "myemail@domain.com"
ObjSendMail.To = "targetemail@anotherdomain.com"

ObjSendMail.Subject = "TEST EMAIL"

ObjSendMail.TextBody="This is a message."

ObjSendMail.Send
set ObjSendMail=nothing
%> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T06:21:07.950

好吧，不是很多细节，但这是我的经验。某些 smtp 服务器需要不同的端口号。例如，gmail 需要端口 465。以下是有关通过 gmail 发送的更多信息：[通过 Google Apps 使用 CDO 发送邮件会出现传输错误：CDO.Message.1 error '80040213'](https://stackoverflow.com/questions/9669644/send-mail-with-cdo-through-google-apps-gives-transport-error-cdo-message-1-erro)

如果您正在使用另一个 smtp 服务器，请尝试在谷歌上搜索关键字 cdo、asp 以及您的服务器是什么。

希望这可以帮助。祝你好运。

# ruby-on-rails-3 - 保存到数据库时 JSON 中的多字节字符丢失

> ID：12344715
> 
> 赞同：4
> 
> 时间：2012-09-10T02:24:45.713
> 
> 标签：ruby-on-rails-3, json, utf-8, multibyte, hstore

我使用 Rails 的 .to_json() 方法将我的哈希转换为 JSON。

哈希：

```
{ "Größe" => "XL" } 
```

JSON：

```
"{\"Gr\\u00f6\\u00dfe\":\"XL\"}" 
```

之后，JSON 字符串存储在这个 Rails (3.2.6) SQL 命令称为**静态的 hstore (Postgres) 列中：**

```
UPDATE ... "static" = 'options=>"{\"Gr\u00f6\u00dfe\":\"XL\"}"' WHERE ... 
```

*已经缺少一个转义反斜杠。*

在数据库本身中，**静态**列如下所示：

```
"options"=>"{\"Gru00f6u00dfe\":\"XL\"}" 
```

***u00f6**和**u00dfe**的所有反斜杠都消失了。*

JSON.parse() 不再识别多字节字符，因此它返回以下哈希：

```
{ "Gru00f6u00dfe" => "XL" } 
```

有谁知道如何防止这种情况？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T04:13:50.707

开箱即用，rails 不支持 PostgreSQL 的 hstore。但修复很容易，只需使用[`activerecord-postgres-hstore`](http://rubygems.org/gems/activerecord-postgres-hstore)gem。使用`activerecord-postgres-hstore`将使您摆脱序列化或编码问题。这里是如何

1）安装gem然后将*静态*列类型更改为hstore

```
class ChangeHStoreDateTypeInMyTable < ActiveRecord::Migration
  def change
   change_column :my_table, :static, :hstore
  end 
```

2) 添加索引

```
CREATE INDEX my_table_gin_static ON my_table USING GIN(static); 
```

3）现在，您可以像往常一样实例化模型实体并更新值，而无需担心序列化或编码。

```
@model.static["Größe"] = "XL" 
```

更多信息：[https ://github.com/softa/activerecord-postgres-hstore](https://github.com/softa/activerecord-postgres-hstore)

# android - ImageView 有过多的垂直填充

> ID：12344721
> 
> 赞同：1
> 
> 时间：2012-09-10T02:26:23.690
> 
> 标签：android, android-layout, padding, scaling, android-imageview

我注意到，当在我的屏幕中显示`ImageView`自动缩小以适应窗口的图像时，即使缩放后的`ImageView`图像占用不到可见屏幕的 1/4，它们也会在图像上方和下方添加至少 50% 的填充。当显示适合而不调整大小的图像时，不会发生这种情况。

为什么会发生这种情况，我能做些什么来解决它？

如果重要的话，顶级布局是`LinearLayout`包含 a 的`ScrollView`，其中包括以下内容`ImageView`：

```
<ImageView
    android:id="@+id/image"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    /> 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T02:35:15.827

您必须告诉 Android 在缩放完成后您希望`View`' 的边界发生变化。

这是使用[`android:adjustViewBounds="true"`](http://developer.android.com/reference/android/widget/ImageView.html#attr_android:adjustViewBounds).

# c++ - C++ - 为什么通过标记器从文件中读取行这么慢？

> ID：12344722
> 
> 赞同：3
> 
> 时间：2012-09-10T02:26:27.257
> 
> 标签：c++, parsing, tokenize

我正在尝试从文件中读取 200,000 条记录，然后用于`tokenizer`解析字符串并删除每个部分周围的引号。但是与正常读取字符串相比，运行时间非常高。读取这些记录需要 25 秒（每条记录 0.0001 秒？？？？）。我的编程是否有问题，或者如果没有，是否有更快的方法来做到这一点？

```
int main()
{
    int counter = 0;
    std::string getcontent;
    std::vector<std::string> line;
    std::vector< std::vector<std::string> > lines;

    boost::escaped_list_separator<char> sep( '\\', '*', '"' ) ;
    boost::tokenizer<> tok(getcontent);

    std::ifstream openfile ("test.txt");

    if(openfile.is_open())
    {
        while(!openfile.eof())
        {
            getline(openfile,getcontent);

            // THIS LINE TAKES A LOT OF TIME
            boost::tokenizer<> tok(getcontent); 

            for (boost::tokenizer<>::iterator beg=tok.begin(); beg!=tok.end(); ++beg){
                line.push_back(*beg);
            }

            lines.push_back(line);
            line.clear();
            counter++;
        }
        openfile.close();
    }
    else std::cout << "No such file" << std::endl;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T03:16:50.297

至少如果我没看错的话，我想我会采取一种更像 C 的方法。不是读取一行，然后将其分解为标记，并剥离您不想要的字符，而是一次读取一个字符，并根据我读取的字符，决定是否将其添加到当前标记，结束标记并将其添加到当前行，或结束行并将其添加到行向量：

```
#include <vector>
#include <string>
#include <stdio.h>
#include <time.h>

std::vector<std::vector<std::string> > read_tokens(char const *filename) {
    std::vector<std::vector<std::string> > lines;
    FILE *infile= fopen(filename, "r");

    int ch;

    std::vector<std::string> line;
    std::string token;

    while (EOF != (ch = getc(infile))) {
        switch(ch) {
            case '\n':
                lines.push_back(line);
                line.clear();
                token.clear();
                break;
            case '"':
                break;
            case '*':
                line.push_back(token);
                token.clear();
                break;
            default:
                token.push_back(ch);
        }
    }
    return lines;
}

int main() {
    clock_t start = clock();
    std::vector<std::vector<std::string> > lines = read_tokens("sample_tokens.txt");
    clock_t finish = clock();
    printf("%f seconds\n", double(finish-start)/CLOCKS_PER_SEC);
    return 0;
} 
```

对您在评论中提供的样本的 20 万多份副本进行快速测试，它正在读取并（显然）使用 gcc 或 VC++ 约 4.5 秒在约 3.5 秒内标记数据。看到任何东西都变得更快（至少没有更快的硬件），我会有点惊讶。

顺便说一句，这是像您最初那样处理内存，这（至少在我看来）是非常有力的证据，表明在向量中管理内存可能不是主要瓶颈。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T05:25:00.820

好的，从评论看来，您想要一个尽可能快的解决方案。

这是我为实现接近该要求而要做的事情。

虽然你可能会得到一个内存池分配器来分配你的字符串，但 STL 不是我的强项，所以我将手动完成。请注意，这不一定是 C++ 方法。所以 C++-heads 可能会有点畏缩。有时，当您想要一些专业的东西时，您只需要这样做。

因此，您的数据文件大约为 10 GB……将其分配在一个块中是一个坏主意。您的操作系统很可能会拒绝。但是可以把它分成一大堆相当大的块。也许这里有一个神奇的数字，但我们说大约 64MB。是寻呼专家的人可以在这里发表评论吗？我记得曾经读过一次，使用小于精确的页面大小倍数是很好的（尽管我不记得为什么），所以让我们撕掉几个 kB：

```
const size_t blockSize = 64 * 1048576 - 4096; 
```

现在，一个结构来跟踪你的记忆怎么样？不妨把它列一个清单，这样你就可以把它们放在一起。

```
struct Block {
    SBlock *next;
    char *data;    // Some APIs use data[1] so you can use the first element, but
                   // that's a hack that might not work on all compilers.
} SBlock; 
```

是的，所以你需要分配一个块 - 你将分配一大块内存并使用第一个小块来存储一些信息。请注意，`data`如果需要对齐内存，可以更改指针：

```
SBlock * NewBlock( size_t blockSize, SBlock *prev = NULL )
{
    SBlock * b = (SBlock*)new char [sizeof(SBlock) + blockSize];
    if( prev != NULL ) prev->next = b;
    b->next = NULL;
    b->data = (char*)(blocks + 1);      // First char following struct
    b->length = blockSize;
    return b;
} 
```

现在你要读...

```
FILE *infile = fopen( "mydata.csv", "rb" );  // Told you C++ers would hate me

SBlock *blocks = NULL;
SBlock *block = NULL;
size_t spilloverBytes = 0;

while( !feof(infile) ) {
    // Allocate new block.  If there was spillover, a new block will already
    // be waiting so don't do anything.
    if( spilloverBytes == 0 ) block = NewBlock( blockSize, block );

    // Set list head.
    if( blocks == NULL ) blocks = block;

    // Read a block of data
    size_t nBytesReq = block->length - spilloverBytes;
    char* front = block->data + spilloverBytes;
    size_t nBytes = fread( (void*)front, 1, nBytesReq, infile );
    if( nBytes == 0 ) {
        block->length = spilloverBytes;
        break;
    }

    // Search backwards for a newline and treat all characters after that newline
    // as spillover -- they will be copied into the next block.
    char *back = front + nBytes - 1;
    while( back > front && *back != '\n' ) back--;
    back++;

    spilloverBytes = block->length - (back - front);
    block->length = back - block->data;

    // Transfer that data to a new block and resize current block.
    if( spilloverBytes > 0 ) {
        block = NewBlock( blockSize, block );
        memcpy( block->data, back, spilloverBytes );
    }
}

fclose(infile); 
```

好吧，就这样吧。你明白了。请注意，此时，您读取文件的速度可能比多次调用`std::getline`. 如果您可以禁用任何缓存，您仍然可以变得更快。在 Windows 中，您可以使用`CreateFile`API 并对其进行调整以实现真正的快速读取。因此，我之前关于可能对齐数据块（与磁盘扇区大小）的评论。不确定 Linux 或其他操作系统。

因此，这是一种将整个文件放入内存的复杂方法，但它足够简单，易于访问且具有适度的灵活性。希望我没有犯太多错误。现在你只想浏览你的块列表并开始索引它们。

我不打算在这里详细介绍，但总体思路是这样的。您可以通过在适当的位置闪现 NULL 值并跟踪每个标记的开始位置来就地标记化。

```
SBlock *block = blocks;

while( block ) {
    char *c = block->data;
    char *back = c + block->length;
    char *token = NULL;

    // Find first token
    while( c != back ) {
        if( c != '"' && c != '*' ** c != '\n' ) break;
        c++;
    }
    token = c;

    // Tokenise entire block
    while( c != back ) {
        switch( *c ) {
            case '"':
                // For speed, we assume all closing quotes have opening quotes.  If
                // we have closing quote without opening quote, this won't be correct
                if( token != c) {
                    *c = 0;
                    token++;
                }
                break;

            case '*':
                // Record separator
                *c = 0;
                tokens.push_back(token);  // You can do better than this...
                token = c + 1;
                break;

            case '\n':
                // Record and line separator
                *c = 0;
                tokens.push_back(token);  // You can do better than this...
                lines.push_back(tokens);  // ... and WAY better than this...
                tokens.clear();           // Arrrgh!
                token = c + 1;
                break;
        }

        c++;
    }

    // Next block.
    block = block->next;
} 
```

最后，您将在上面看到那些类似矢量的调用。现在，再次，如果你可以记忆你的向量，那是伟大而简单的。但再一次，我只是从不这样做，因为我发现直接使用内存更直观。您可以执行与我对文件块所做的类似的操作，但为数组（或列表）创建内存。您将所有令牌（只是 8 字节指针）添加到此内存区域并根据需要添加新的内存块。

您甚至可以制作一个小标题来跟踪其中一个令牌数组中有多少项。关键是永远不要计算一次你以后可以计算而无需额外成本的东西（即数组大小——你只需要在添加最后一个元素后计算它）。

你对线条再次做同样的事情。您所需要的只是一个指向标记块中相关部分的指针（如果您想要数组索引，如果一行吃进一个新块，您必须做溢出的事情）。

你最终会得到一个指向标记数组的行数组，它们直接指向你从文件中吸出的内存。虽然有一点内存浪费，但可能并不过分。这是您为快速编写代码所付出的代价。

我敢肯定它可以完美地包含在几个简单的类中，但我在这里把它原封不动地给了你。即使您创建了一堆 STL 容器的内存池，我预计这些分配器的开销以及容器本身仍然会使它比我给您的要慢。很抱歉，答案很长。我想我只是喜欢这些东西。玩得开心，希望这会有所帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-10T02:58:54.097

而不是,每次调用都会`boost::tokenizer<> tok(getcontent);`构造一个新的. 使用成员函数：`boost::tokenizer``getline``assign`

```
boost::escaped_list_separator<char> sep( '\\', '*', '"' ) ;
boost::tokenizer<boost::escaped_list_separator<char>> tok(getcontent, sep);

// Other code
while(getline(openfile,getcontent))
{
    tok.assign(getcontent.begin(), getcontent.end()); // Use assign here
    line.assign(tok.begin(), tok.end()); // Instead of for-loop
    lines.push_back(line);
    counter++;
} 
```

看看是否有帮助。此外，如果可能，请尝试预先分配向量内存。

# wolfram-mathematica - Mathematica 不知道 Cos[2] 甚至 Sin[12 Degree]！

> ID：12344726
> 
> 赞同：1
> 
> 时间：2012-09-10T02:28:13.863
> 
> 标签：wolfram-mathematica

我尝试了一些常见的角度，如 pi/2、pi/3 或 pi/6，但它可以工作，但是当您使用 2 rad 或 12 度等不常见的角度时，mathematica 不会返回任何值！请不要告诉我，mathematica 使用 20 个条目表或类似的东西来表示余弦和正弦！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T02:51:32.560

由于这些角度的 sin/cos 没有精确的表示（比如，说它`Cos[45 Degree]`是*1/sqrt(2)*），你需要做`N[Cos[2]]`and `N[Sin[12 Degree]]`（ie `N[...]`）。

> In[1]:= Cos[2]
> Out[1]:= Cos[2]
> 
> 输入[2]:= N[Cos[2]]
> 输出[2]:= -0.416147

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-30T16:35:33.000

Mathematica 试图保持计算的精度。整数被认为是无限精确的，因此要获得近似的十进制答案，您必须在输入中至少有一个近似数字或使用 N 函数。

```
Sin[2.0]
Sin[2.0`50]
N[Sin[2],50] 
```

为了研究 pi 的有理倍数，有几种选择。（在 9.0 版中）

有些是自动展开的，例如：

```
Sin[Pi/12] 
```

尝试**FunctionExpand**、**RootReduce**和**ToRadicals**。

```
Sin[12 Degree] // FunctionExpand 
```

给出：

```
-(1/8) Sqrt[3] (-1 + Sqrt[5]) + 1/4 Sqrt[1/2 (5 + Sqrt[5])] 
```

使用 Degree 似乎向 Mathematica 表明用户可能处于较低的数学水平并且不想看到复数或代数数对象，所以而不是

```
Sin[x Degree] 
```

利用

```
Sin[x Pi/180] 
```

1度的罪：

```
Sin[Pi/180] // RootReduce
% // ToRadicals 
```

有时结果可能令人失望：

```
Sin[Pi/77] 
```

不能以比以下更丰富的形式表达：

```
-(1/2) (-1)^(75/154) (-1 + (-1)^(2/77)) 
```

或者

```
1/2 Sqrt[root of some huge polynomial] 
```

这是由于数学语言的限制，而不是 Mathematica。参见伽罗瓦理论。Mathematica 可以在没有复数或 Root 对象的情况下编写的示例：

```
Table[{(\[Pi] k)/180, If[FreeQ[#, (-1)^x_], #, Style[Sin[(\[Pi] k)/180], Red]] &@
ToRadicals[Sin[(\[Pi] k)/180]]}, {k, 45}] // TableForm 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-20T19:08:19.210

对于初学者或只是对正在发生的事情感兴趣的人，Mathematica 还提供了一些取证功能。但是，这并没有使您更接近预期的结果。

例如来自 Mathematica 帮助的 FullForm。

FullForm[expr] 打印为 expr 的完整形式，没有特殊语法。

```
FullForm[Cos[2]]
```

给出同样让你失望的结果。但是该功能的帮助页面可能会让您走得更远，并且可以成为您在自己的提要上进一步步骤的灵感。它进一步深入到“一切都是一种表达”的概念。这也是 Mathematica 的范式，也是 Mathematica 的基础。已经提到了这个范式的一部分，

```
Cos[2] 
```

不会被评估。它是独立的东西。这种范式不应该也绝不是要引起失望或阻止人们使用 Mathematica。

Mathematica 也可以显示混合的数字和符号表示：

```
N[10, 4] Sin[.25 x]
```

N功能需要在您仔细检查下进行。一种解释是：

```
The precision n is given in decimal digits; it need not be an integer. 
```

这相当令人困惑，因为整数和十进制数字在 Mathematica 中具有完全相同的表示。

```
N[Cos[2]]
```

=-0.416147

是来自 Mathematica 内核的你的动作，具有默认精度。

由于 Wolfram Alpha Mathematica 的市场介绍比这要聪明得多。它提供 = 作为一种新的输入。没有其他所有内容的等号变成了白色的橙色底等号。这意味着您被允许输入现实世界的数学表达式，例如从教科书中获得有意义的传统数学答案。

在 Mathematica 12 中您所要做的就是单击一个全部答案符号，然后您就会得到从 Wolfram Alpha 已知的足够多的简单答案。

再次尝试或尝试 Mathematica。这真的很有趣。

# payment-services - Amazon Checkout - 付费用户

> ID：12344728
> 
> 赞同：0
> 
> 时间：2012-09-10T02:28:38.197
> 
> 标签：payment-services, amazon-pay

我正在查看来自亚马逊的不同支付选项，并阅读了各种文章，讨论了差异，并且可能会选择亚马逊结账，因为我不希望用户离开我的网站并想要一个可定制的结账。但是，Amazon Checkout 是否允许我从我的站点/账户向某些用户付款？我想像 PayPal 的自适应支付功能？

谢谢！

# java - 将图形添加到 KeyListener 的并发症

> ID：12344731
> 
> 赞同：2
> 
> 时间：2012-09-10T02:29:19.850
> 
> 标签：java, swing, applet, awt, java-2d

我正在尝试将射击添加到我的游戏中，但我无法将我的 Player 类更改为抽象类，否则它将无法正常工作，因此我只能做我能做的事情。

我已经尝试了一百万种不同的方法来解决这个问题，但都没有奏效。我搜索并搜索并观看了视频教程无济于事。这是我最后的手段，我相信有人可以帮助我。

这是我的第一个小程序，但我对 java 并不陌生。这不是 2D 游戏。这只是我一直在做的一个基本实验。

主类.java

```
/**
 *
 * @author Alexander Benoit
 */
import java.applet.*;
import java.awt.*;

public class MainClass extends Applet implements Runnable {

    private static final long serialVersionUID = 1L;
    Thread thread = new Thread(this);
    boolean running = true;
    Player p;
    Enemy e;
    Image dbImage;
    Graphics dbg;
    int xpos;
    int ypos;
    int mousex;
    int mousey;

    @Override
    public void init() {
        setSize(400, 400);
        p = new Player(this);
        e = new Enemy(this);
    }

    @Override
    public void start() {
        thread.start();
    }

    @Override
    public void destroy() {
        running = false;
    }

    @Override
    public void stop() {
        running = false;
    }

    @Override
    public void run() {
        while (running) {
            repaint();
            p.update(this);
            e.update(this, p);
            try {
                Thread.sleep(20);
            } catch (InterruptedException e) {
                System.out.print("Error occured");
            }
        }

    }

    @Override
    public void update(Graphics g) {
        dbImage = createImage(getWidth(), getHeight());
        dbg = dbImage.getGraphics();
        paint(dbg);
        g.drawImage(dbImage, 0, 0, this);
    }

    @Override
    public void paint(Graphics g) {
        g.drawString("Game", 180, 20);
        p.paint(g, this);
        e.paint(g, this);
    }
} 
```

播放器.java

```
/**
 *
 * @author Alexander Benoit
 */
import java.awt.*;
import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import java.net.URL;

public class Player implements KeyListener {

    private int x = 200, y = 200, velX = 0, velY = 0;
    private URL url;
    private Image player;
    private Image playerimg;
    private Image Image;
    public boolean isShooting;

    public Player(MainClass mc) {
        url = mc.getDocumentBase();
        player = mc.getImage(url, "http://i563.photobucket.com/albums/ss75/belhelmiel/player-1.png");
    }

    public void update(MainClass mc) {
        mc.addKeyListener(this);
        x += velX;
        y += velY;
    }

    public void paint(Graphics g, MainClass mc) {
        g.drawImage(player, x, y, mc);
        g.drawString("X:" + x + " Y:" + y, 10, 10);
        //g.drawRect(x, y, 50, 50);
    }

    @Override
    public void keyTyped(KeyEvent e) {
        //throw new UnsupportedOperationException("Not supported yet.");
    }

    @Override
    public void keyPressed(KeyEvent e) {
        switch (e.getKeyCode()) {

            case KeyEvent.VK_SPACE: {
                //This should make the player start shooting
                //I've tried a million different things
                //each one gave me some kind of problem primarily
                //because I can't set this class to abstract
                break;
            }

            case KeyEvent.VK_RIGHT: {
                if (x >= 430) {
                    x = -40;
                }
                velX = 2;
                break;
            }
            case KeyEvent.VK_LEFT: {
                if (x <= -40) {
                    x = 430;
                }
                velX = -2;
                break;
            }
            case KeyEvent.VK_UP: {
                if (y <= -35) {
                    y = 430;
                }
                velY = -2;
                break;
            }
            case KeyEvent.VK_DOWN: {
                if (y >= 400) {
                    y = -30;
                }
                velY = 2;
                break;
            }
        }
    }

    @Override
    public void keyReleased(KeyEvent e) {
        switch (e.getKeyCode()) {
            case KeyEvent.VK_SPACE: {
                //This should make the player stop shooting
                break;
            }

            case KeyEvent.VK_RIGHT: {
                velX = 0;
                break;
            }
            case KeyEvent.VK_LEFT: {
                velX = 0;
                break;
            }
            case KeyEvent.VK_UP: {
                velY = 0;
                break;
            }
            case KeyEvent.VK_DOWN: {
                velY = 0;
                break;
            }
        }
    }

    public int getX() {
        return x;
    }

    public int getY() {
        return y;
    }

    void restart() {
        x = 200 - 38 / 2;
        y = 200 - 38 / 2;
    }
} 
```

敌人.java

```
import java.awt.Graphics;
import java.awt.Image;
import java.net.URL;

/**
 *
 * @author Alexander Benoit
 */
public class Enemy {

    private int x = 50, y = 50, Speed=3;
    private URL url;
    private Image enemy;

    public Enemy(MainClass mc) {
        url = mc.getDocumentBase();
        enemy = mc.getImage(url, "http://i563.photobucket.com/albums/ss75/belhelmiel/enemy.png");
    }

    public void update(MainClass mc, Player p) {
        x+=Speed;
        if(x<=0){
            Speed=3;
        }else if(x>=mc.getWidth()-33){
            Speed=-3;
        }

        Collision(p);
    }

    public void paint(Graphics g, MainClass mc) {
        g.drawImage(enemy, x, y, mc);
    }

    private void Collision(Player p) {
        int PX = p.getX();
        int PY = p.getY();

        if(PX-38 <= x && PX+38 >= x && PY-38 <= y && PY+38 >= y) {
            p.restart();
            System.out.print("Collision Detected");
        }
    }
} 
```

对不起，如果我不能为您提供足够的信息，我自己也缺乏它，因为我在尝试了很长时间之后在网上找不到任何有用的信息。

摘要：当玩家按住空格键时，我需要让某种子弹发射。我知道如何使用 keylistener，但如果不将我的 Player 类设置为抽象，我就不能将 keylistener 与“Graphics g”一起使用，这是我做不到的，否则我的游戏将无法运行。我一直在寻找，试图弄清楚如何做到这一点，但无济于事。抱歉，如果这看起来有点奇怪，我重新启动可能会更好，但我已经为此工作了几个小时。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T20:32:26.777

您绝对可以使用 keylistener 和图形，而无需将播放器类设置为抽象。您只需要实现接口中声明的所有方法。您可以在此处了解抽象类，并[在](http://java.sun.com/products/jfc/tsc/articles/painting/index.html)[此处](http://docs.oracle.com/javase/tutorial/java/IandI/abstract.html)了解 AWT/Swing 绘画。

# ruby - 检查数组元素是否出现在线

> ID：12344737
> 
> 赞同：2
> 
> 时间：2012-09-10T02:30:03.173
> 
> 标签：ruby, arrays, string, contains

我正在逐行浏览一个文件，我想检查该行是否包含数组中的任何元素。例如，如果我有：

```
myArray = ["cat", "dog", "fish"] 
```

当前行说：

> 我爱我的宠物狗

输出会说

> 找到包含数组字符串的行

这是我所拥有的，但它不起作用。

```
myArray = ["cat", "dog", "fish"]
File.open('file.txt').each_line { |line|
  puts "Found a line containing array string" if line =~ myArray  #need to fix this logic
} 
```

我已经尝试过`include?`，`any?`但不知道我是否正确使用它们。

更新:: 我遗漏了一个重要部分。我需要完全匹配！所以如果它不准确，我不希望该语句返回 true。例如 - 如果我的行说“我爱我的宠物狗”，则该语句应该返回 false，因为“狗”在数组中。不是“小狗”

我对糟糕的澄清的错误

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T02:34:34.627

您必须分别检查数组中的每个字符串，并用于`\b`匹配单词边界以确保您只获得整个单词：

```
strings = ["cat", "dog", "fish"].map { |s| Regexp.quote(s) }

File.open('file.txt').each_line do |line|
  strings.each do |string|
    puts "Found a line containing array string" if line =~ /\b#{string}\b/
  end
end 
```

或者构建一个正则表达式：

```
strings = ["cat", "dog", "fish"].map { |s| Regexp.quote(s) }
pattern = /\b(#{strings.join('|')})\b/

File.open('file.txt').each_line do |line|
  puts "Found a line containing array string" if line =~ pattern
end 
```

调用`Regexp.quote`可防止在正则表达式中具有含义的字符产生意想不到的效果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T02:37:02.433

您可以使用您的数组创建一个正则表达式

```
myArray = ["cat", "dog", "fish"]
File.open('file.txt').each_line { |line|
  puts "Found a line containing array string" if %r(#{myArray.join('|')}) === line
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T02:37:40.297

```
arr = ['cat', 'dog', 'fish']

File.open('file.txt').each_line do |line|
  puts 'Found a line containing key word' if arr.any? { |e| line.include? e }
end 
```

对于检测为单词而不是子字符串：

`line =~ /(#{e}|.*\s#{e})([\s.,:;-].*|\n)/`

还有一个有趣的解决方案：

```
arr = ['cat', 'dog', 'fish']

File.open('file.txt').each_line do |line|
  puts 'Found a line containing array string' if !(line.split(/[\s,.:;-]/) & arr).empty?
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T02:41:03.383

```
myArray = ["cat", "dog", "fish"]
File.open('file.txt').each_line { |line|
  puts "Found a line containing array string" if myArray.any? { |word| /.*#{word}.*/.match? line}
} 
```

代码未测试

# android - 如何在 android 中启动最近的应用程序菜单？

> ID：12344738
> 
> 赞同：5
> 
> 时间：2012-09-10T02:30:04.910
> 
> 标签：android, android-intent

我想启动显示最近使用的应用程序的菜单。

我尝试在按下按钮时查看 logcat，希望有一些我可以启动但没有运气的意图。

我知道在某些手机上它是一个专用按钮，也可以通过长按主页按钮来实现。有什么方法可以以编程方式启动它吗？

编辑：更新标题更准确

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-09-08T08:42:32.530

当您按下“Recent Apps”按钮时，logcat 将输出以下消息：

```
568-716/system_process I/ActivityManager﹕ START u0 {act=com.android.systemui.recent.action.TOGGLE_RECENTS flg=0x10800000 cmp=com.android.systemui/.recent.RecentsActivity} from pid 627
    --------- beginning of /dev/log/main
568-582/system_process I/ActivityManager﹕ Displayed com.android.systemui/.recent.RecentsActivity: +215ms 
```

所以，我们可以通过编程来模拟这个操作。（不要忘记将标志设置为 0x10800000）：

```
Intent intent = new Intent ("com.android.systemui.recent.action.TOGGLE_RECENTS");
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_EXCLUDE_FROM_RECENTS);
intent.setComponent(new ComponentName("com.android.systemui", "com.android.systemui.recent.RecentsActivity"));
startActivity (intent); 
```

有关更多信息`RecentsActivity`，请在[此处](https://github.com/android/platform_frameworks_base/blob/master/packages/SystemUI/src/com/android/systemui/recent/RecentsActivity.java)阅读源代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-06-28T13:48:36.460

就像@Floerm 的帖子一样，这段代码只能在 android N 下工作，android N 已经改变了 IStatusBarService api，我们不能这样访问。

```
private void openRecentApps() {
try {
    Class serviceManagerClass = Class.forName("android.os.ServiceManager");
    Method getService = serviceManagerClass.getMethod("getService", String.class);
    IBinder retbinder = (IBinder) getService.invoke(serviceManagerClass, "statusbar");
    Class statusBarClass = Class.forName(retbinder.getInterfaceDescriptor());
    Object statusBarObject = statusBarClass.getClasses()[0].getMethod("asInterface", IBinder.class).invoke(null, new Object[]{retbinder});
    Method clearAll = statusBarClass.getMethod("toggleRecentApps");
    clearAll.setAccessible(true);
    clearAll.invoke(statusBarObject);
} catch (Exception e) {
    e.printStackTrace();
}} 
```

如果要在 Android N 中启动最近的应用程序，则需要使用 AccessibilityService。

```
accessibilityService.performGlobalAction(AccessibilityService.GLOBAL_ACTION_RECENTS); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T02:59:45.143

不，这是不可能的（主要是因为在各种深奥的 Android 操作系统之间有多种处理方式）。但是，您可以获得正在运行的进程列表并创建自己的最近应用程序列表。（也许[这个答案](https://stackoverflow.com/questions/3278895/how-to-check-current-running-applications-in-android)或[这个](https://stackoverflow.com/q/11174402/1438733)答案会对你有所帮助。）

# php - 在 pdo 中绑定多个值

> ID：12344741
> 
> 赞同：24
> 
> 时间：2012-09-10T02:31:11.233
> 
> 标签：php, pdo, bind

是否有一种简单的方法可以在 PDO 中绑定多个值而无需重复？看看下面的代码：

```
$result_set = $pdo->prepare("INSERT INTO `users` (`username`, `password`, `first_name`, `last_name`) VALUES (:username, :password, :first_name, :last_name)");

$result_set->bindValue(':username', '~user');
$result_set->bindValue(':password', '~pass');
$result_set->bindValue(':first_name', '~John');
$result_set->bindValue(':last_name', '~Doe');

$result_set->execute(); 
```

在这里，我以 4 次重复的方式绑定了值。那么有没有一种简单的方法可以在 PDO 中绑定多个值？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-09-10T02:34:25.107

`execute()`只要您可以将值视为`PDO::PARAM_STR`（字符串） ，您就可以始终在参数中绑定值。

```
$result_set = $pdo->prepare("INSERT INTO `users` (`username`, `password`, `first_name`, `last_name`) VALUES (:username, :password, :first_name, :last_name)");
$result_set->execute(array(
    ':username' => '~user',
    ':password' => '~pass',
    ':first_name' => '~John',
    ':last_name' => '~Doe'
)); 
```

您可以像使用任何数组一样使用传递的数组：

```
$user = "Nile";
$pdo->execute(array(":user" => $user)); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-10T02:33:45.483

如果你想基于类型（字符串、整数等）进行绑定，那么不。如果您可以将所有内容绑定为字符串：

```
$stmt = $db->prepare("...");
$stmt->execute(array(
    'foo' => 'bar',
    'something' => 'else',
    'third' => 'thing',
)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-25T16:44:51.953

要真正从不键入任何内容两次，您可以使用一个数组来提供数据，并在同一个数组上使用一个函数来输出 MySQL 查询的绑定部分。例如：

```
function bindFields($fields){
    end($fields); $lastField = key($fields);
    $bindString = ' ';
    foreach($fields as $field => $data){ 
        $bindString .= $field . '=:' . $field; 
        $bindString .= ($field === $lastField ? ' ' : ',');
    }
    return $bindString;
} 
```

数据和列名来自单个关联数组 ( `$data`)。然后，用于`bindFields($data)`生成一`column = :column`对字符串以连接到 MySQL 查询中：

```
$data = array(
    'a_column_name' => 'column data string',
    'another_column_name' => 'another column data string'
);

$query = "INSERT INTO tablename SET" . bindFields($data);

$result = $PDO->prepare($query);
$result->execute($data); 
```

`bindFields($data)`输出：

```
 a_column_name=:a_column_name,another_column_name=:another_column_name 
```

# tfs - TFS 2012 自定义构建工作流程；未找到构建覆盖

> ID：12344742
> 
> 赞同：0
> 
> 时间：2012-09-10T02:31:25.017
> 
> 标签：tfs, workflow-activity

在自定义 TFS 2012 工作流程中，我使用以下代码片段：

```
IBuildDetail buildDetail = context.GetValue(BuildDetail);
var testManagementService = TfsTeamProjectCollectionFactory
                .GetTeamProjectCollection(new Uri("http://tfs:8080/tfs/Sandbox"))
                .GetService<ITestManagementService>();

var buildCoverages = testManagementService
                .GetTeamProject(buildDetail.TeamProject)
                .CoverageAnalysisManager
                .QueryBuildCoverage(buildDetail.Uri.ToString(), CoverageQueryFlags.Modules); 
```

代码覆盖在构建上正确执行，构建的“构建摘要”包含：

```
> 2 binaries instrumented - 89% of all code blocks covered
    fooTests.dll - 99% of 479 code blocks covered
    foo.exe - 74% of 347 code blocks covered 
```

出于测试目的，自定义活动是“签入门控更改”之后工作流中的最后一个活动。在构建期间，`buildCoverages`变量包含一个长度为 0 的数组。知道这是为什么吗？覆盖结果是否异步提交回 TFS，发布构建完成？“事务”中的构建和上述代码是否在不可见正在进行的构建的情况下运行？非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T21:49:36.610

我不确定为什么（可能有无数的原因），但是在构建工作流程期间通过此接口获得的覆盖范围与工作流程不同步。添加延迟循环

```
do
{
    buildCoverages = testManagementService
            .GetTeamProject(buildDetail.TeamProject)
            .CoverageAnalysisManager
            .QueryBuildCoverage(buildDetail.Uri.ToString(), CoverageQueryFlags.Modules);
} while(buildCoverages.Length == 0 && retryDelay()) 
```

围绕此代码确保（到目前为止在几秒钟内）构建覆盖数组的可用性。

# ios - 从字节数组流式传输 MP3

> ID：12344743
> 
> 赞同：0
> 
> 时间：2012-09-10T02:31:25.700
> 
> 标签：ios, streaming

我有一个包含媒体文件并像收音机一样工作的网络服务器。需要设计一个 iOS 客户端应用程序来播放这些文件。

问题是我只能以字节数组的形式提供内容，因为有时，网络服务器本身并不拥有媒体并在发送时下载它。我正在考虑每 x 个字节使用 Json 请求。

iOS 中是否有本地函数来处理来自字节数组的 MP3 流。我对 iOS 知之甚少，因此我想确保从字节数组流式传输 mp3 是可能的并且符合 Apple-Store 标准。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T00:05:54.597

看看 matt Gallagher 的音频流媒体。这可能是一个好的开始。

[http://cocoawithlove.com/2008/09/streaming-and-playing-live-mp3-stream.html?m=1](http://cocoawithlove.com/2008/09/streaming-and-playing-live-mp3-stream.html?m=1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T16:18:45.860

可以使用像代理这样的网络服务器来发送文件，这是我找到的方法，以便我的服务器以与从第 3 方服务器接收文件相同的速率发送文件。

```
Private Sub SendFile(ByVal url As String)
Dim stream As System.IO.Stream = Nothing
Dim bytesToRead As Integer = 10000
Dim buffer() As Byte = New Byte((bytesToRead) - 1) {}

Try

    Dim fileReq As System.Net.WebRequest = CType(System.Net.HttpWebRequest.Create(url), System.Net.HttpWebRequest)
    Dim fileResp As System.Net.HttpWebResponse = CType(fileReq.GetResponse, System.Net.HttpWebResponse)
    If (fileReq.ContentLength > 0) Then
        fileResp.ContentLength = fileReq.ContentLength
    End If
    stream = fileResp.GetResponseStream
    Dim resp As System.Web.HttpResponse = HttpContext.Current.Response
    resp.ContentType = "application/octet-stream"
    resp.AddHeader("Content-Disposition", ("attachment; filename=\""" + ("mp3" + "\""")))
    resp.AddHeader("Content-Length", fileResp.ContentLength.ToString)
    Dim length As Integer = 1000000
    While (length > 0)
        If resp.IsClientConnected Then
            length = stream.Read(buffer, 0, bytesToRead)
            resp.OutputStream.Write(buffer, 0, length)
            resp.Flush()
            buffer = New Byte((bytesToRead) - 1) {}
        Else
            length = -1
        End If        
    End While
Catch
    stream.Close()
Finally
    If (Not (stream) Is Nothing) Then
        stream.Close()
    End If
End Try
Response.End()
End Sub 
```

# java - 安卓选择器

> ID：12344749
> 
> 赞同：1
> 
> 时间：2012-09-10T02:32:51.770
> 
> 标签：java, android, selector

我使用画廊来显示联系人的信息，在项目视图上，有两个按钮，我使用选择器作为他们的背景，现在这是问题，我触摸这两个按钮的区域，这两个按钮将改变背景看起来就像他们都被压制了一样。这是画廊项目

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout 
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent"
  android:background="#505050"
  >
  <ImageView 
    android:id="@+id/phone_contact_image"
    android:layout_height="160dip"
    android:layout_width="160dip"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="25dip"
    android:src="@drawable/contact_phone_image_1"
    />
  <TextView  
    android:id="@+id/phone_contact_name"
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
    android:text="@string/hello"
    android:textSize="25dip"
    android:layout_below="@id/phone_contact_image"
    android:layout_marginTop="10dip"
    android:gravity="center_horizontal"
    android:textColor="#FFFFFF"
    />
  <TextView
    android:id="@+id/phone_contact_numbler"
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
    android:textSize="25dip"
    android:gravity="center_horizontal"
    android:layout_below="@id/phone_contact_name"
    android:text="@string/contact_phone_numbler"
    android:textColor="#FFFFFF"
    />
  <Button 
    android:id="@+id/phone_contact_edit_btn"
    android:layout_height="wrap_content"
    android:layout_width="fill_parent"
    android:text="@string/editContact_title_edit"
    android:textSize="28dip"
    android:background="@drawable/btn_button_bg"
    android:layout_marginLeft="30dip"
    android:layout_marginRight="30dip"
    android:layout_marginTop="10dip"
    android:textColor="#FFFFFF"
    android:layout_below="@id/phone_contact_numbler"
    />
  <Button 
    android:id="@+id/phone_contact_call_btn"
    android:layout_height="wrap_content"
    android:layout_width="fill_parent"
    android:text="@string/title_call_via"
    android:textSize="28dip"
    android:background="@drawable/btn_confirm_bg"
    android:layout_marginTop="20dip"
    android:layout_marginLeft="30dip"
    android:layout_marginRight="30dip"
    android:textColor="#FFFFFF"
    android:layout_below="@id/phone_contact_edit_btn"
    />
</RelativeLayout> 
```

这是选择器

```
<?xml version="1.0" encoding="utf-8"?>

<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_focused="true" android:drawable="@drawable/btn_button_focus" />
    <item android:state_pressed="true" android:drawable="@drawable/btn_button_pressed" />
    <item android:drawable="@drawable/btn_button_normal" />
</selector> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T03:53:32.960

你说的对。但是您没有提到当状态未按下或未聚焦且未选中时，您将做什么？

试试这个： **在你的 res.values 文件夹中创建一个 styles.xml 文件** 并添加它。

```
 <style name="styleNormalButton">
        <item name="android:background">@drawable/backgroundbutton</item>
    </style> 
```

考虑这*`@drawable/backgroundbutton.xml`*是您的选择器文件并在其中添加以下代码。

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_focused="true" android:drawable="@drawable/btn_button_focus" />
    <item android:state_pressed="true" android:drawable="@drawable/btn_button_pressed"/>

    <item android:drawable="@drawable/btn_default_pressed_holo_dark"
      android:state_enabled="false" />
    <item android:drawable="@drawable/btn_button_normal" />
</selector> 
```

最后进入你的layout文件。将按钮的背景设置为*`style/styleNormalButton`*

希望对你有帮助

# sharepoint-2010 - 使用来自不同 Sharepoint 视图的数据填充 Excel 模板

> ID：12344751
> 
> 赞同：0
> 
> 时间：2012-09-10T02:32:59.430
> 
> 标签：sharepoint-2010, excel, vba

我对 Sharepoint 非常陌生，并为非常含糊而道歉。

我有一个通过从共享点站点导出不同视图来填充数据的 excel 模板。我正在尝试自动化整个过程，以便用户只需导出视图，模板就会自动填充所需的数据（并且希望完全绕过导出步骤）。所以工作流程是这样的：

```
1\. Select a view from the sharepoint site
2\. Export the view using "Export to Spreadsheet" option
3\. Save or open the .iqy file
4\. Repeat the steps 1-3 for 2 more different views 
```

现在我有了所需的数据，我可以通过查看项目名称及其在导出 2 和 3 中的相应数据来开始填充该数据。所有视图都具有共同的项目名称。对于一个项目，我必须从导出 2 中获取风险名称，并从导出 3 中获取已完成的活动和即将进行的活动。

任务：我需要的是我的模板应该有一个下拉列表，该下拉列表通过从 Sharepoint 视图中检索项目名称来填充，并将数据放在风险和活动以及其他占位符中，并调整行数，因为不同的项目将有不同的数量风险和活动项目。

任何实现这一目标的方向都将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T06:02:29.820

请让我建议2个选项：

1.  创建 Excel 加载项并使用 Sharepoint 客户端对象模型
2.  创建具有所需 UI 的自定义 Sharepoint Web 部件。使用 Sharepoint 服务器对象模型检索数据。使用 Open XML SDK 创建 Excel。

你可以用谷歌搜索上面列出的任何技术，你会发现很多信息。

但一个简短的总结：SP 客户端模型是一种从 Sharepoint 服务器外部访问 Sharepoint 的方式（它与后台的 web 服务一起工作），而 Sharepoint 服务器模型是一种从服务器访问 Sharepoint 的方式。Open XML SDK 是一种无需在服务器上安装 Office 即可访问/创建 Office 文档的方法。它基于 XML。

# php - 通过android搜索一个mssql db

> ID：12344752
> 
> 赞同：0
> 
> 时间：2012-09-10T02:32:59.943
> 
> 标签：php, android, sql-server, database, json

我有一个 android 应用程序，理论上，它将使用 php 作为代理并在 mssql db 中搜索一组变量（即开始日期、结束日期和用户名）。我知道理论上我会怎么做。android http post->php 查询->mssql 响应->php 编码-> android 列表视图。

3件事我想知道你是否能帮我弄清楚。

1）如何在两个表中搜索信息

2）我正在访问一个巨大的数据库，任何关于通过 android 处理确保大型数据库的提示或建议。

3）最后对这类事情有一些好的看法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T02:40:40.313

当您使用 PHP 时，为什么要考虑在 android 手机中搜索值？PHP 可以做你的搜索部分。您可以设置提取数据的必要条件。然后存储在数组的某个变量中并使用`echo json_encode($variable);`

`HttpGet`使用或`HttpPost`现在您拥有所需的数据在您的 android 中获取值，这将消耗更少的设备带宽。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T03:04:01.387

1）如何在两个表中搜索信息

我认为访问数据库的逻辑是在 PHP 中，所以你只要做一个合适的网关就可以了。

2）我正在访问一个巨大的数据库，任何关于通过 android 处理确保大型数据库的提示或建议。

即使你正在处理巨大的数据库，但你一次只需要在你的安卓手机上显示几个，假设它是分页，我建议你制作一个缓冲区，尽可能多地阅读你可以做的页面，然后从缓冲区（不是网络）获取页面，如果页面索引超出缓冲区，则通过网络更新缓冲区。

希望能帮助到你。

# multithreading - EPOLLONESHOT 返回多个事件

> ID：12344755
> 
> 赞同：0
> 
> 时间：2012-09-10T02:33:23.407
> 
> 标签：multithreading, epoll

目前我正在使用 epoll 实现一个多线程网络客户端应用程序。我的模型很简单：

1.  获取client_fd & 向远程服务器写入请求

2.  设置 fd 非阻塞并将其添加到 epfd(EPOLLIN|EPOLLET|EPOLLONESHOT) 以等待响应

3.  从 fd 获取 EPOLLIN，读取整个响应并释放资源

**我遇到的问题**是，有时我会在同一个 fd 上获得多个 EPOLLIN（通过**使用 EPOLLIN|EPOLLET|EPOLLONESHOT**）。由于我在第一个 EPOLLIN evt 中释放了所有资源（包括 client_fd），第二个 evt 使我的程序崩溃。

**任何建议都非常感谢:)**

这是代码片段：

```
//multi-thread wait on the sem, since there should be only one thread 
//at epoll_wait at the same time(L-F model)
sem_wait(wait_sem); 

int nfds = epoll_wait(epoll_fd,evts,max_evt_cnt,wait_time_out);

//leader got the fds to proceed
for(int i =0; i < nfds; ++i){
    io_request* req = (io_request*)evts[i].data.ptr;
    int sockfd = req->fd;
    if(evts[i].events & EPOLLIN){
        ev.data.fd=sockfd;
        if(0!=epoll_ctl(epoll_fd,EPOLL_CTL_DEL,sockfd,&ev)){
            switch(errno){
                case EBADF:
                    //multiple EPOLLIN cause EPOLL_CTL_DEL fail
                    WARNING("delete fd failed for EBADF");
                    break;
                default:
                    WARNING("delete fd failed for %d", errno);
            }
         }
         else{
                //currently walk around by just ignore the error fd
                crt_idx.push_back(i);
         }
    }
}

if(crt_idx.size() != nfds)//just warning when the case happen
    WARNING("crt_idx.size():%u != nfds:%d there has been some error!!", crt_idx.size(), nfds);

//current leader waked up next leader, and become a follower
sem_post(wait_sem);

for(int i = 0; i < crt_idx.size(); ++i)
{
    io_request* req = (io_request*)evts[crt_idx[i]].data.ptr;
    ...do business logic...
    ...release the resources & release the client_fd
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T18:04:18.640

我怀疑您的代码中某处存在某种错误或竞争条件。特别注意关闭套接字的位置。

# vba - VBA PowerPoint - 回到我来自的幻灯片

> ID：12344756
> 
> 赞同：1
> 
> 时间：2012-09-10T02:33:31.833
> 
> 标签：vba, button, controls, slide, powerpoint

我将如何做到这一点？因为我不断地添加和删除幻灯片，所以我需要代码来了解我来自哪张幻灯片，而不仅仅是转到一组幻灯片。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T03:26:39.087

```
 SlideShowWindows(1).View.GotoSlide(SlideShowWindows(1).View.LastSlideViewed.SlideIndex) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T03:02:46.523

我想到了。在浏览网页和一些思考的帮助下，我想出了这个：

为了存储当前幻灯片编号，除了需要您返回另一张幻灯片的幻灯片之外，我制作了一个模块：

```
Public CurrentSlide As Long, PreviousSlide As Long

Public Sub GoToPreviousSlide()
SlideShowWindows(1).View.GoToSlide (PreviousSlide)
End Sub

Public Sub StoreCurrentSlide()
CurrentSlide = ActivePresentation.SlideShowWindow.View.Slide.SlideIndex
If CurrentSlide <> 14 Then
'Execute only if the current slide is not a slide that uses this function (because if you store the current slide while in a slide that requires you to go back to another slide, it will overwrite the PurrentSlide value and render this useless). Add more slide numbers to the If statement as you need them.
PreviousSlide = CurrentSlide
Call GoToPreviousSlide
End If
End Sub 
```

当然，我必须确保每次幻灯片更改时都调用 StoreCurrentSlide，我制作了另一个模块来自动执行此操作：

```
Public Sub OnSlideShowPageChange()
StoreCurrentSlide
End Sub 
```

现在我可以在任何地方使用按钮并使用以下方法返回上一张幻灯片：

```
Private Sub OK_Click()
GoToPreviousSlide
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T14:21:58.570

如果您无论如何都使用按钮，为什么不使用PPT的动作设置；分配先前查看的幻灯片的操作设置。单击该按钮将使查看者返回到他们在当前幻灯片之前正在查看的任何幻灯片。

不需要 VBA。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-29T13:02:33.623

[Microsoft 365] 在演示文稿（幻灯片放映）中，键入数字并按 Enter。编辑幻灯片时，我使用保存在文件“Macros.pptm”中的这个 VBA 宏：

```
Sub GoToSlide()
Dim currNum As Integer, newNum As Integer, a As String
currNum = _ 
CInt(Application.ActiveWindow.View.Slide.SlideIndex)
a = InputBox("Current slide [" & currNum & "]:" & _ 
vbCrLf & _"Go to slide number:", _
"GoToSlide", currNum)
If (a <> "") Then
newNum = CInt(a)
Application.ActiveWindow.View.GoToSlide (newNum)
End If
End Sub 
```

我已将此宏作为新命令分配给快速访问功能区。当我编辑一个牌组时，我也必须打开文件“Macro.pptm”才能找到宏。宏显示当前幻灯片编号并提示输入所需的幻灯片编号，然后转到那里（除非用户按 ESC）。

# java - 具有透明背景的javacv图像

> ID：12344760
> 
> 赞同：1
> 
> 时间：2012-09-10T02:33:55.560
> 
> 标签：java, javacv, iplimage

我有一个要添加到另一个图像的透明背景的 PNG 图像。

我的问题是，当我加载`IplImage`背景时，背景不再透明 - 它变成白色。

如何在 javacv 中使用具有透明背景的图像？

```
IplImage src = cvLoadImage("2.png");
IplImage tmp = cvLoadImage("1.png");
cvSetImageROI(src, cvRect(41,28,tmp.width(),tmp.height())); // not the same size 
cvShowImage("1", src);  //before
cvCopy(src, tmp);
cvShowImage("2", src); //after
cvWaitKey(0);
cvResetImageROI(src); 
```

尝试添加 alpha channl 但没有用：

```
Graphics g=src.getBufferedImage().getGraphics();
        Graphics2D g2d = (Graphics2D)g;
        g2d.setComposite(AlphaComposite.getInstance(AlphaComposite.SRC_OVER,
                                                    10 * 0.1f));
        BufferedImage a = new BufferedImage(tmp.width(), tmp.height(), BufferedImage.TYPE_INT_ARGB);

        src = IplImage.createFrom(a); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T21:58:04.803

thx andrew，你对 alpha thinge 的看法是对的 :) 确实花了我更多的时间去寻找同样有效的东西，但它是 :)

```
public static void combine()
{
    try{
              File path = new File("D:/proj2/javacv2");

    // load source images

      BufferedImage image = ImageIO.read(new File(path, "3.jpg"));

      BufferedImage overlay = ImageIO.read(new File(path, "test4a.png"));

     // BufferedImage image=src.getBufferedImage();
   // BufferedImage overlay =tmp.getBufferedImage();
    // create the new image, canvas size is the max. of both image sizes
    int w = Math.max(image.getWidth(), overlay.getWidth());
    int h = Math.max(image.getHeight(), overlay.getHeight());
      //int w=tmp.width();
     // int h=tmp.height();
    BufferedImage combined = new BufferedImage(w, h, BufferedImage.TYPE_INT_ARGB);

    // paint both images, preserving the alpha channels
    Graphics g = combined.getGraphics();
    g.drawImage(image, 0, 0, null);
    g.drawImage(overlay, 41, 30, null);

    // Save as new image

       ImageIO.write(combined, "PNG", new File(path, "combined.png"));
    }catch(Exception e)
    {
        System.out.println("exception ");
    }

} 
```

# spring-security - BeanFactory 未初始化或已关闭 - 在访问 bean 之前调用“刷新”

> ID：12344762
> 
> 赞同：20
> 
> 时间：2012-09-10T02:34:07.007
> 
> 标签：spring-security, spring-3

我正在尝试将弹簧安全性添加到常规 JSF 应用程序中。经过反复尝试，我在tomcat启动时出现以下错误。

这是整个堆栈跟踪。任何帮助表示赞赏。

**编辑：**在进一步的测试中，我注意到以下堆栈跟踪，在第二组关于 BeanFactory 未初始化或已关闭的严重异常之前

```
SEVERE: Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderList
ener
java.lang.NoSuchMethodError: org.springframework.web.context.support.XmlWebApplicationContext.getEnvironment()Lorg/springframework/
core/env/ConfigurableEnvironment;
        at org.springframework.web.context.support.XmlWebApplicationContext.loadBeanDefinitions(XmlWebApplicationContext.java:87)
        at org.springframework.context.support.AbstractRefreshableApplicationContext.refreshBeanFactory(AbstractRefreshableApplicat
ionContext.java:130)
        at org.springframework.context.support.AbstractApplicationContext.obtainFreshBeanFactory(AbstractApplicationContext.java:46
7)
        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:397)
        at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:385)
        at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:284)
        at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:111)
        at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4205)
        at org.apache.catalina.core.StandardContext.start(StandardContext.java:4704)
        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:799)
        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:779)        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:601)
        at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:943)
        at org.apache.catalina.startup.HostConfig.deployWARs(HostConfig.java:778)
        at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:504)
        at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1315)
        at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:324)
        at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:142)
        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1061)
        at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1053)
        at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
        at org.apache.catalina.core.StandardService.start(StandardService.java:525)
        at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
        at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)        at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)

After this error, the mojarra 2.1.4 is initialized before the BeanFactory exception shows up

SEVERE: Exception sending context destroyed event to listener instance of class org.springframework.web.context.ContextLoaderListener
java.lang.IllegalStateException: BeanFactory not initialized or already closed - call 'refresh' before accessing beans via the ApplicationContext
        at org.springframework.context.support.AbstractRefreshableApplicationContext.getBeanFactory(AbstractRefreshableApplicationContext.java:171)
        at org.springframework.context.support.AbstractApplicationContext.destroyBeans(AbstractApplicationContext.java:1048)
        at org.springframework.context.support.AbstractApplicationContext.doClose(AbstractApplicationContext.java:1022)
        at org.springframework.context.support.AbstractApplicationContext.close(AbstractApplicationContext.java:970)
        at org.springframework.web.context.ContextLoader.closeWebApplicationContext(ContextLoader.java:556)
        at org.springframework.web.context.ContextLoaderListener.contextDestroyed(ContextLoaderListener.java:142)
        at org.apache.catalina.core.StandardContext.listenerStop(StandardContext.java:4245)
        at org.apache.catalina.core.StandardContext.stop(StandardContext.java:4886)
        at org.apache.catalina.core.StandardContext.start(StandardContext.java:4750)
        at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:799)
        at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:779)
        at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:601)
        at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:943)
        at org.apache.catalina.startup.HostConfig.deployWARs(HostConfig.java:778)
        at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:504)
        at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1317)
        at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:324)
        at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:142)
        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1065)
        at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
        at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
        at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
        at org.apache.catalina.core.StandardService.start(StandardService.java:525)
        at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
        at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414) 
```

我的 web.xml 是

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">

    <context-param>
      <param-name>contextConfigLocation</param-name>
      <param-value>
         /WEB-INF/applicationContext.xml
         /WEB-INF/applicationContext-security.xml
       </param-value>
    </context-param>
    <context-param>
        <param-name>javax.faces.PROJECT_STAGE</param-name>
        <param-value>Development</param-value>
    </context-param>
    <context-param>
    <param-name>javax.faces.VALIDATE_EMPTY_FIELDS</param-name>
    <param-value>false</param-value>
    </context-param>
    <context-param>
    <param-name>javax.faces.FACELETS_SKIP_COMMENTS</param-name>
    <param-value>true</param-value>
    </context-param>
    <context-param>
        <param-name>com.icesoft.faces.debugDOMUpdate</param-name>
        <param-value>false</param-value>
    </context-param>
    <context-param>
        <param-name>com.icesoft.faces.concurrentDOMViews</param-name>
        <param-value>true</param-value>
    </context-param>
    <context-param>
        <param-name>com.icesoft.faces.synchronousUpdate</param-name>
        <param-value>true</param-value>
    </context-param>

    <!-- Faces Servlet -->
    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <!-- <load-on-startup>1</load-on-startup> -->
    </servlet>
    <servlet>
    <servlet-name>Resource Servlet</servlet-name>
    <servlet-class>com.icesoft.faces.webapp.CompatResourceServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
    </servlet>
<!-- Extension Mapping -->
    <servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>/faces/*</url-pattern>
    <url-pattern>*.jsf</url-pattern>
    </servlet-mapping>
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>/icefaces/*</url-pattern>
    </servlet-mapping>
    <session-config>
    <session-timeout>90</session-timeout>
    </session-config>

    <servlet-mapping>
    <servlet-name>Resource Servlet</servlet-name>
        <url-pattern>/xmlhttp/*</url-pattern>
    <url-pattern>/resources/*</url-pattern>
    </servlet-mapping>

    <filter>
        <filter-name>springSecurityFilterChain</filter-name>
        <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
    </filter>

    <filter-mapping>
        <filter-name>springSecurityFilterChain</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping>

    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>
    <listener>
        <listener-class>org.springframework.security.web.session.HttpSessionEventPublisher</listener-class>
    </listener>

<welcome-file-list>
    <welcome-file>index.html</welcome-file>
</welcome-file-list>
</web-app> 
```

而我的 applicationContext-security.xml 是

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/security"
             xmlns:beans="http://www.springframework.org/schema/beans"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="http://www.springframework.org/schema/beans
           http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
           http://www.springframework.org/schema/security
           http://www.springframework.org/schema/security/spring-security-3.0.xsd">

<!--  key configuration here is an entry point to be used by security intercepts -->
<http realm="Sample Realm" entry-point-ref="authenticationEntryPoint" auto-config="false">

    <custom-filter ref="sessionManagementFilter" before="SESSION_MANAGEMENT_FILTER" />
    <!-- any role that is used to protect a directory, can be multiples -->
    <intercept-url pattern='/secure/**' access='ROLE_READER' />

    <!-- enable form login to use UsernamePasswordAuthenticationFilter [/j_spring_security_check] -->
    <form-login login-page="/general/logins/htmlLogin.faces"  
                    authentication-failure-url="/general/logins/loginFailed.jsf"/>

    <!-- logout page uses the default LogoutFilter, no changes are needed as IT accepts a GET call... -->
    <!-- here is an example logout link:
    <a href="#{request.contextPath}/j_spring_security_logout">Logout</a> -->
        <logout logout-url="/j_spring_security_logout"
                logout-success-url="/general/main.jsf"
                invalidate-session="true"/>
    </http>

    <beans:bean id="authenticationEntryPoint"
        class="org.springframework.security.web.authentication.LoginUrlAuthenticationEntryPoint">
        <beans:property name="loginFormUrl" value="/general/logins/login.jsf" />
    </beans:bean>

    <!-- test with this before you hook up your LDAP or other Authentication Manager -->
    <authentication-manager alias="authenticationManager">
        <authentication-provider>
            <user-service>
                <user name="joe.blow@gr.am" password="pass1234" authorities="ROLE_READER"/>
                <user name="tester@gr.com" password="pass5678" authorities="ROLE_READER"/>
            </user-service>
        </authentication-provider>
    </authentication-manager>

    <beans:bean id="sessionManagementFilter" class="org.springframework.security.web.session.SessionManagementFilter">
        <beans:constructor-arg name="securityContextRepository" ref="httpSessionSecurityContextRepository" />
        <beans:property name="invalidSessionUrl" value="/general/logins/sessionExpired.jsf" />
        <!-- this permits redirection to session timeout page from javascript/ajax or http -->
        <beans:property name="redirectStrategy" ref="jsfRedirectStrategy" />
    </beans:bean>

    <beans:bean id="jsfRedirectStrategy" class="com.palm.safe.spring.security.JsfRedirectStrategy"/>
    <beans:bean id="httpSessionSecurityContextRepository" class="org.springframework.security.web.context.HttpSessionSecurityContextRepository"/>

</beans:beans> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-10T14:04:07.833

我在以下代码中看到了这段代码`applicationContext-security.xml`：

```
<beans:beans xmlns="http://www.springframework.org/schema/security"
             xmlns:beans="http://www.springframework.org/schema/beans"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="http://www.springframework.org/schema/beans
           http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
           http://www.springframework.org/schema/security
           http://www.springframework.org/schema/security/spring-security-3.0.xsd"> 
```

您可能使用了不正确的 spring 版本。例如，如果您在库中使用 spring-xxx（spring-security-web.jar 或 spring-security-core.jar）版本 3.1.xx，则会出现此错误。尝试将代码`applicationContext-security.xml`从**3.0.xsd**更改为**3.1.xsd**（代码中的版本号必须与库文件夹中的版本匹配）。

希望这有帮助。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-10T03:40:04.317

您需要添加`RequestContextListener`到您的`web.xml`功能，即将 HTTP 请求对象绑定到为该请求提供服务的线程。这使得请求和会话范围的 bean 在调用链的下游可用。

```
<listener>
    <listener-class>org.springframework.web.context.request.RequestContextListener</listener-class>
</listener> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-05-23T06:44:09.453

我遇到了同样的问题，结果证明 maven spring 依赖链存在问题。依赖 org.springframework spring-context 是使用 3.0.5 版本导入的，而我使用的整个 spring 版本是 3.2.2。在我的 pom.xml 中显式添加依赖项解决了它。

我通过在运行服务器时使用 -verbose:class jvm 参数检测到问题，并检查 XmlWebApplicationContext 继承树中的 jar 类是从中加载的。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-05-30T18:21:03.467

在从 applicationcontext.xml 中的特定块中删除评论时，我错过了删除 **-->** “评论结束”。我没有注意到它，并且收到了这个错误。

后来删除它，一切正常！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-05-25T08:04:57.627

我也遇到了这个错误，问题是，通过剪切和粘贴，我无意中在我的 spring-servlet.xml 中列出了同一个 bean 两次：

```
<bean id="pathInfoHelper" class="org.nationalhistory.util.PathInfoHelper">
</bean>

<bean id="imageIndexer" class="org.nationalhistory.util.ImageIndexer"/>

<bean id="pathInfoHelper" class="org.nationalhistory.util.PathInfoHelper">
</bean> 
```

我在这里查看并在上面 om39a 的回答的帮助下找到了这个（谢谢！）。我刚刚编辑了文件，并且知道我有可能无意中粘贴了一些额外（或更少）的东西。然而，这个复式不是错误所指的 bean！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-16T07:12:46.777

我遇到了这个问题，直到我从服务器的部署中删除了有问题的项目（在 JBoss Dev Studio 中，右键单击服务器并在服务器视图中“删除”该项目），然后执行以下操作：

1.  在没有部署任何项目的情况下重新启动 JBoss EAP 6.1 服务器。
2.  服务器启动后，我将相关项目添加到服务器。

在此之后，只需通过选择服务器而不是项目本身来重新启动服务器（在调试或运行模式下）。

这似乎刷新了任何以前的设置/状态/内存/导致问题的任何内容，并且我不再收到错误。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-05-30T21:53:49.890

在你的 pom.xml 中使用这个依赖

`<dependency> <groupId>org.springframework</groupId> <artifactId>spring-webmvc</artifactId> <version>${springframework.version}</version> </dependency>`

# php - 如何安装 Phalcon Devtools

> ID：12344763
> 
> 赞同：5
> 
> 时间：2012-09-10T02:34:12.237
> 
> 标签：php, phalcon

对于 Phalcon 0.5.0 版本，如何安装 phalcon-devtools 以便我可以通过命令 shell 使用它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T02:41:11.697

尽管在撰写本文时 Phalcon-Devtools for 0.5.0 仍处于 alpha 阶段，但它们足够稳定，可以在开发环境中使用。

Phalcon Devtools 现在通过 PEAR 频道提供。

说明（也可在[http://pear.phalconphp.com](http://pear.phalconphp.com)中找到）

**注册频道**

```
pear channel-discover pear.phalconphp.com 
```

**列出可用的包**

```
pear remote-list -c phalcon 
```

**安装包**

```
pear install phalcon/package_name 
```

**安装特定版本/稳定性**

```
pear install phalcon/package_name-1.0.0
pear install phalcon/package_name-beta 
```

您还可以使用频道的[供稿接收更新](http://pear.phalconphp.com/feed.xml)

截至 2012 年 9 月 9 日，命令为：

```
pear channel-discover pear.phalconphp.com
pear install phalcon/Devtools-0.5.0 
```

如果一切顺利，发出：

```
phalcon commands 
```

你会看到：

```
Phalcon DevTools (0.5.0a4)

Available commands:
  commands
  controller
  model
  project
  scaffold 
```

# ruby - 如何重构这段 Ruby 代码？

> ID：12344765
> 
> 赞同：0
> 
> 时间：2012-09-10T02:34:24.760
> 
> 标签：ruby, coding-style, refactoring, readability

我创建了以下内容，这很有效，但看起来很神秘。有没有办法以更 Ruby 风格或易于理解的方式编写它？

此方法会删除数字以下的较低因子。所以，`10.high_factors`返回`[6,7,8,9,10]`。6 可以被 2 整除，所以 2 被删除。列表中没有大于 6 的倍数，因此保留。

```
class Fixnum
  def high_factors
    # Get the numbers that are not divisible by lower ones below self
    list = (2..self).to_a
    2.upto(self).each do |i|
      ((i+1)..self).each { |j| list.delete i if j.is_divisible_by? i }
    end

    list
  end

  def is_divisible_by? divisor
    self % divisor == 0
  end
end 
```

红宝石 1.9.3

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T02:56:32.853

您的方法的结果将始终是从`(N/2) + 1`到的数字列表`N`。

对于每个`i<=(N/2)`,`2*i`也将在列表中。

对于列表中的每一个，其中 x 是大于 1 的整数`j >= (N/2)+1`时不会有 a ，因为.`k=x*j``2*j > N`

因此，如果您的方法仅返回，`((self/2 + 1)..self).to_a`它也将按您的意愿工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T02:44:17.503

那这个呢？只需删除可被大数整除的数字。

```
class Fixnum
  def high_factors
    # Get the numbers that are not divisible by lower ones below self
    (2..self).reject do |i|
      (i+1..self).any? { |j| j.divisible_by?(i) }
    end
  end

  def divisible_by?(divisor)
    self % divisor == 0
  end
end 
```

ps：在 ruby​​ 中，通常省略布尔函数开头的'is_'，因为我们可以添加？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T09:51:02.720

这是我的

```
def high_factors
  ary = (2..self).to_a
  ary.reject do |factor|
    ary.index {|num| num != factor and num % factor == 0}
  end
end 
```

如果找不到合适的匹配项，它会起作用，因为 Array#index 会返回 nil。

# objective-c - 弹出一个以模态方式呈现的 UINavigationController

> ID：12344766
> 
> 赞同：2
> 
> 时间：2012-09-10T02:34:27.240
> 
> 标签：objective-c, ios5, uinavigationcontroller, modal-dialog, modalviewcontroller

我正在开发一个 iOS 5 应用程序，它首先向用户显示登录窗口。成功登录后，会执行 Modal Segue，显示 UINavigationController，其中包含实际应用程序的大部分内容。现在从这一点开始可能会发生很多事情，但我感兴趣的是用户何时决定注销。

我想返回第一个视图，即登录窗口，但我似乎无法弹出导航控制器并返回第一个视图。

作为可视化：

```
 (NavigationController)
[UserLoginViewController] --modal segue-> [UserMenuTableViewController] --push segue--> [otherviews, etc]
     ^                                                  |
     |                                             modal segue
     |                                                  |
     |                                                  v
     ^                                    [UserDashBoardViewController]
     |                                                  |
     |                                           (logout pressed)
     |                                                  |
      -<---------------pop back to login--------------<- 
```

我尝试过委托，以通知初始登录视图是时候关闭模态显示的导航控制器了，但我收到错误消息：

```
2012-09-10 11:13:05.749 KITxWebMobileJSONv4[1138:f803] attempt to dismiss modal view controller whose view does not currently appear. self = <UINavigationController: 0x68c6150> modalViewController = <UserDashboardViewController: 0x68d9fb0>
2012-09-10 11:13:05.749 KITxWebMobileJSONv4[1138:f803] attempt to dismiss modal view controller whose view does not currently appear. self = <UserLoginViewController: 0x688ffa0> modalViewController = <UINavigationController: 0x68c6150> 
```

登录视图委托如下所示：

```
// This method is called from the UserMenuTableViewController, when it's time to log out:
- (void)userMenuTableViewController:(UserMenuTableViewController *)sender
                          loggedOut:(BOOL)didLogOut
{
    if (didLogOut) {
        /* delete user info and take care of data on backend:
         * ...
         */

        // pop navigation controller, presenting the initial Login View:
        [self dismissModalViewControllerAnimated:YES];  // THIS LINE FIRES AND GETS THE ERROR ABOVE
    }
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([segue.identifier isEqualToString:@"Login Success"]) {  // successful login:

        // set (UINavigationController *)self.nav to the segue destination (for a handle, if needed):
        self.nav = (UINavigationController *)segue.destinationViewController;

        // grab the user menu and set self to be it's delegate:
        UserMenuTableViewController *userMenu = [self.nav.viewControllers lastObject];
        userMenu.delegate = self;
    }
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T03:52:51.890

在调用 NavigationController 后出现的 viewController 中，调用它

```
[self dismissViewControllerAnimated:YES completion:nil]; 
```

你想在哪里弹出你的navigationController。这对我有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-24T03:32:32.077

有点太晚了，但你可以使用 unwind segues 来做到这一点，它会相应地解开。

# cakephp - CakePHP 1.3 有任何并发 控制吗？

> ID：12344771
> 
> 赞同：1
> 
> 时间：2012-09-10T02:35:11.220
> 
> 标签：cakephp, concurrency, cakephp-1.3

有谁知道 CakePHP 1.3 是否有任何类型的并发控制，如果有人已经在表中写入，它会阻止表中的读/写操作？如果没有，是否有人知道我在哪里可以找到示例，或者我在哪里修改以完成此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T07:57:32.017

将 InnoDB 与事务结合使用。

saveAll() 函数使用事务。

# workflow - 具有现有内容的新工作流程和重命名工作流程

> ID：12344773
> 
> 赞同：1
> 
> 时间：2012-09-10T02:35:26.777
> 
> 标签：workflow, plone

我有一个具有自定义内容类型的站点`Content`，最初附加了一个工作流，`content_workflow`. 现有的`Content`.

我现在需要为这种类型添加第二个工作流，`content_beta_workflow`. 如何更新所有现有内容以成为新工作流程的一部分？

在相关说明中：如果我想将初始工作流重命名为`content_alpha_workflow`，如何更新所有现有内容以反映此更改？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T05:21:32.267

如果您只是从一种工作流程更改为另一种工作流程，请执行以下步骤：

1.  转到站点设置 > 类型
2.  从下拉菜单中选择您的自定义内容类型，页面将更新以显示当前工作流程
3.  从下拉列表中选择您的新工作流程，将生成一张地图，显示当前工作流程中的每个状态
4.  对于每个状态，选择新工作流中最匹配（或最合适）的状态

保存时，自定义站点的所有对象都将更新为使用新的工作流程。对于来自原始工作流的地图中的每个状态，该状态中的现有内容将被放入您在上面的步骤 4 中选择的状态。安全设置将被重新索引，您就完成了。

至于重命名旧的工作流，您可以在 ZMI 中的 portal_workflow 工具中进行。但只更改工作流的面向人类的标题。更改 ID 可能会对内容的工作流程历史产生副作用。

**已编辑**

*好的，我从您的评论中看到，除了*已经拥有的类型之外，您还希望将新的工作流程添加到类型中。这里有一些示例代码来实现这一点：

```
my_type = 'Content' # This is your content portal_type name
my_wf = 'content_workflow_beta'
wf_chain = list(wf_tool.getChainForPortalType(my_type))
if my_wf not in wf_chain:
    wf_chain.append(my_wf)
wf_tool.setChainForPortalTypes([my_type], wf_chain) 
```

您可以在用于定义内容类型和工作流的包的[升级步骤](http://collective-docs.readthedocs.org/en/latest/components/genericsetup.html?highlight=upgrade%20step#upgrade-steps)中添加此代码。在工作流工具上添加一个调用`updateRoleMappings`，除了您的原始工作流之外，您将被设置为通过标准 Plone UI 使用新的工作流。

正如您已经发现的那样，您还可以手动更新所有对象的工作流程历史记录以重命名工作流程 ID，但这是一个相当具有侵入性的步骤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T04:27:37.843

作为每个内容项`workflow_history`的`dict`属性，这是根据需要添加或更新合适的项的情况。首先，我将 GenericSetup 复制为`content_workflow`to `content_alpha_workflow`。接下来，我创建`content_beta_workflow`并将其添加到配置文件中。然后我写了以下升级步骤：

```
import logging
from DateTime import DateTime

def modify_content_workflow_history(context, logger=None):
    if logger is None: logger = logging.getLogger('my.product')

    # import the new workflows
    context.portal_setup.runImportStepFromProfile('profile-my.product:default', 'workflow')

    # set up some defaults for the new records
    _history_defaults = dict(
        action = None,
        actor = 'admin',
        comments = 'automatically created by update v2',
        time = DateTime(),        
    )
    _alpha_defaults = dict(review_state = 'alpha_state_1', **_history_defaults)
    _beta_defaults = dict(review_state = 'beta_state_1', **_history_defaults)

    for parent in context.parents.values():
        for content in parent.content.values():

            # don't acquire the parent's history
            if 'parent_workflow' in content.workflow_history:
                content.workflow_history = {}

            # copy content_workflow to content_alpha_workflow
            if 'content_workflow' in content.workflow_history:
                alpha_defaults = context.workflow_history['content_workflow']
                del content.workflow_history['content_workflow']
            else:
                alpha_defaults = (_alpha_defaults,) # must be a tuple
            content.workflow_history['ctcc_content_alpha_workflow'] = alpha_defaults

            # create the beta workflow with a modified actor
            beta_defaults = dict(**_beta_defaults)
            beta_defaults['actor'] = u'%suser' % parent.id
            content.workflow_history['ctcc_content_beta_workflow'] = (beta_defaults,)

    logger.info('Content workflow history updated') 
```

# objective-c - C / Objective-C 中的 Malloc 16 字节泄漏

> ID：12344774
> 
> 赞同：0
> 
> 时间：2012-09-10T02:36:17.203
> 
> 标签：objective-c, c, malloc, free

当我使用 Instruments 分析我的代码时，它显示此函数（如下）泄漏了 Malloc 16 个字节，但我从未在此函数中使用过 malloc。这个函数中是否有我应该释放一些资源的地方？

它可能看起来像很多代码，但我认为实际上只有变量 counts 和 counts2 作为可能的违规者。

```
+ (int) trimArray: (NSMutableArray*) source above: (short) max andMin: (short) min
{
    int counts[6][7];
    int counts2[6][7];
    for (int i=0;i<=5;i++)
    {
        for (int ii=0;ii<7;ii++)
        {
            counts[i][ii] = 0;
            counts2[i][ii] = 0;
        }
    }

    int capacity = (int)[source count]/max;
    if (capacity <2)
        capacity = 2;

    NSMutableArray *itemsToRemove = [[NSMutableArray alloc] initWithCapacity:capacity];

    int week,dow,count1,count2;
    EntryTimeItem *item;
    NSEnumerator *e;

    e = [source objectEnumerator];
    while (item = [e nextObject])
    {
        week = item.week_number;
        dow  = item.day_of_the_week;
        if (week >=0 && week <6 && dow >=0 && dow <7)
        {
            counts[week][dow]++;
        }
    }

    e = [source objectEnumerator];
    while (item = [e nextObject])
    {
        week = item.week_number;
        dow  = item.day_of_the_week;
        if (week >= 0 && week < 6 && dow >= 0 && dow < 7)
        {
            count2 = counts2[week][dow];
            count1 = counts[week][dow];
            if (count1 > max)
            {
                if (!count2)
                {
                    item.time = -1;
                    item.align = NSCenterTextAlignment;
                    item.label = [NSString stringWithFormat:@"%d entries",count1];
                }
                else {
                    // remove this item if it is after the first item which
                // was converted to a placeholder for all the items
                    [itemsToRemove addObject:item];
                }
            }
            counts2[week][dow]++;
        }
    }

    e = [itemsToRemove objectEnumerator];
    while (item = [e nextObject])
    {
        [source removeObject:item];
    }

    int count_extra_events = 0;
    for (int i=0;i<7;i++)
    {
        int count_events2 = 0;
        for (int ii = 0; ii < 6; ii++)
        {
            int count3 = counts[ii][i];
            if (count3 < max && count3 > min)
                count_events2 += count3 - min;
        }
        // store the greatest value found sofar
        if (count_events2 > count_extra_events)
        {
            count_extra_events = count_events2;
        }
    }

    return count_extra_events;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T02:38:46.093

问题似乎源于以下行：

```
NSMutableArray *itemsToRemove = [[NSMutableArray alloc] initWithCapacity:capacity]; 
```

请检查是否有，资源 itemsToRemove 可以被释放。

# c++ - 析构函数必须与构造函数对静态成员的操作相反？

> ID：12344777
> 
> 赞同：0
> 
> 时间：2012-09-10T02:36:19.720
> 
> 标签：c++, destructor, static-members

```
class A
{
    int id;
    static int count;
public:
    A()
    {
        count++;
        id = count;
        cout << "constructor called " << id << endl;
    }
    ~A()
    {
        //count -=2; /*Keypoint is here. */
                   /*Uncomment it later. But result doesn't change*/
        cout << "destructor called " << id << endl;
    }
};

int A::count = 0;

int main()
{
    A a[2];
    return 0;
} 
```

输出是

```
constructor called 1
constructor called 2
destructor called 2
destructor called 1 
```

问题是：即使您取消注释，`//count -=2;` 结果仍然相同。

这是否意味着如果构造函数将静态成员递增 1，那么析构函数也必须将其精确递减 1，并且您不能更改它的行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T02:38:19.017

`count`在调用第一个析构函数后没有任何访问。析构函数完全按照您编写的代码执行，无论是否修改`count`。`count`但是除非您以某种方式访问​​，否则您不会看到效果。

# ruby-on-rails - 如何使用条件运算符添加换行符

> ID：12344789
> 
> 赞同：0
> 
> 时间：2012-09-10T02:38:09.370
> 
> 标签：ruby-on-rails, ruby

好的，愚蠢的新手问题：如何仅在需要时才换行？

我正在创建一个基本地址列表，如果地址不为空，我只想包含一行地址。如何保持空白行不打印？我尝试过包含 break 和 new line 标签，并尝试使用两种品种的 puts 和引号并转义斜杠，但似乎无法正确显示地址。

有没有办法让地址的每一行打印在自己的行上，或者如果没有信息可以简单地省略该行？

这是代码的当前版本：

```
<p><strong>Main Address</strong></p>
    <p><%= if @vendor.address1 || null
             @vendor.address1  #need a break here
           end %>
      <%= if @vendor.address2 || null
             @vendor.address2 #need a break here
           end %>
      <%= @vendor.city %>, <%= @vendor.state %> <%= @vendor.zip %></p> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T02:44:43.493

我会这样做：

```
<p>
  <strong>Main Address</strong>
</p>
<p>
<% unless @vendor.address1.blank? %>
  <%= @vendor.address1 %><br>
<% end %>
<% unless @vendor.address2.blank? %>
  <%= @vendor.address2 %><br>
<% end %>
  <%= @vendor.city %>, <%= @vendor.state %> <%= @vendor.zip %>
</p> 
```

顺便说一句：`|| null`您的代码中的 Ruby 无效。`null`不存在，应该是`nil`。但即使您使用过`nil`，您的代码也不会像您期望的那样做。对于这类事情，你最好使用[`blank?`](https://stackoverflow.com/a/888877/84631).

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-10T02:55:09.233

```
<p><strong>Main Address</strong></p>
        <p><%= @vendor.address1%><%= <br/> if @vendor.address1.blank? %>
          <%=  @vendor.address2%><%= <br/> if @vendor.address2.blank? %>
          <%= @vendor.city %>, <%= @vendor.state %> <%= @vendor.zip %></p> 
```

# mysql - 计算一个字符串在 VARCHAR 字段中出现的次数？

> ID：12344795
> 
> 赞同：212
> 
> 时间：2012-09-10T02:39:14.377
> 
> 标签：mysql, sql

我有一张这样的桌子：

```
TITLE          |   DESCRIPTION
------------------------------------------------
test1          |   value blah blah value
test2          |   value test
test3          |   test test test
test4          |   valuevaluevaluevaluevalue 
```

我试图弄清楚如何返回字符串在每个描述中出现的次数。

所以，如果我想计算 'value' 出现的次数，sql 语句将返回：

```
TITLE          |   DESCRIPTION                  |   COUNT
------------------------------------------------------------
test1          |   value blah blah value        |   2
test2          |   value test                   |   1
test3          |   test test test               |   0
test4          |   valuevaluevaluevaluevalue    |   5 
```

有没有办法做到这一点？我根本不想使用 php，只想使用 mysql。

* * *

## 回答 #1

> 赞同：412
> 
> 时间：2012-09-10T02:56:58.783

这应该可以解决问题：

```
SELECT 
    title,
    description,    
    ROUND (   
        (
            LENGTH(description)
            - LENGTH( REPLACE ( description, "value", "") ) 
        ) / LENGTH("value")        
    ) AS count    
FROM <table> 
```

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2017-04-29T19:20:14.817

@yannis 解决方案的更简单和更有效的变体：

```
SELECT 
    title,
    description,    
    CHAR_LENGTH(description) - CHAR_LENGTH( REPLACE ( description, 'value', '1234') ) 
        AS `count`    
FROM <table> 
```

不同之处在于我将“值”字符串替换为 1 字符较短的字符串（在本例中为“1234”）。这样您就不需要进行除法和舍入来获得整数值。

通用版本（适用于每根针线）：

```
SET @needle = 'value';
SELECT 
    description,    
    CHAR_LENGTH(description) - CHAR_LENGTH(REPLACE(description, @needle, SPACE(LENGTH(@needle)-1))) 
        AS `count`    
FROM <table> 
```

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2012-09-10T02:58:05.250

尝试这个：

```
 select TITLE,
        (length(DESCRIPTION )-length(replace(DESCRIPTION ,'value','')))/5 as COUNT 
  FROM <table> 
```

# [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/5ede6/5)

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2012-09-10T02:52:13.837

在 SQL SERVER 中，这就是答案

```
Declare @t table(TITLE VARCHAR(100), DESCRIPTION VARCHAR(100))

INSERT INTO @t SELECT 'test1', 'value blah blah value' 
INSERT INTO @t SELECT 'test2','value test' 
INSERT INTO @t SELECT 'test3','test test test' 
INSERT INTO @t SELECT 'test4','valuevaluevaluevaluevalue' 

SELECT TITLE,DESCRIPTION,Count = (LEN(DESCRIPTION) - LEN(REPLACE(DESCRIPTION, 'value', '')))/LEN('value') 

FROM @t 
```

**结果**

```
TITLE   DESCRIPTION               Count
test1   value blah blah value        2
test2   value test                   1
test3   test test test               0
test4   valuevaluevaluevaluevalue    5 
```

我没有安装 MySQL，但是发现 LEN 的等效项是[LENGTH](http://lists.mysql.com/mysql/183791)而[REPLACE](http://dev.mysql.com/doc/refman/5.1/en/string-functions.html#function_replace)是相同的。

所以MySql中的等效查询应该是

```
SELECT TITLE,DESCRIPTION, (LENGTH(DESCRIPTION) - LENGTH(REPLACE(DESCRIPTION, 'value', '')))/LENGTH('value') AS Count
FROM <yourTable> 
```

请让我知道它是否也适用于 MySql。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-05-03T08:09:22.323

这是一个可以做到这一点的函数。

```
CREATE FUNCTION count_str(haystack TEXT, needle VARCHAR(32))
  RETURNS INTEGER DETERMINISTIC
  BEGIN
    RETURN ROUND((CHAR_LENGTH(haystack) - CHAR_LENGTH(REPLACE(haystack, needle, ""))) / CHAR_LENGTH(needle));
  END; 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2018-11-23T12:17:32.493

这是使用空间技术的 mysql 函数（用 mysql 5.0 + 5.5 测试）： `CREATE FUNCTION count_str( haystack TEXT, needle VARCHAR(32)) RETURNS INTEGER DETERMINISTIC RETURN LENGTH(haystack) - LENGTH( REPLACE ( haystack, needle, space(char_length(needle)-1)) );`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-05-09T10:55:22.123

```
SELECT 
id,
jsondata,    
ROUND (   
    (
        LENGTH(jsondata)
        - LENGTH( REPLACE ( jsondata, "sonal", "") ) 
    ) / LENGTH("sonal")        
)
+
ROUND (   
    (
        LENGTH(jsondata)
        - LENGTH( REPLACE ( jsondata, "khunt", "") ) 
    ) / LENGTH("khunt")        
)
AS count1    FROM test ORDER BY count1 DESC LIMIT 0, 2 
```

谢谢Yannis，您的解决方案对我有用，在这里我为多个关键字与订单和限制共享相同的解决方案。

# grails - 服务内部的 Grails Quartz 和线程

> ID：12344798
> 
> 赞同：1
> 
> 时间：2012-09-10T02:39:40.290
> 
> 标签：grails, groovy, quartz-scheduler

我有一个关于 Quartz 和在 Service 类中运行线程的问题。

我回答了我之前的问题：[Grails background process](https://stackoverflow.com/questions/12135599/grails-background-process)，但是我还有另一个问题。

**设置：**我有一个设置为运行服务的作业，它运行良好。但是在服务类中，我有一个可以并行运行的算法。

**问题：**通常我会以以下非常简单的方式将代码设置为并行运行：

```
Item.each {
   Thread.start {
      do some calculations here    
      write to DB
   }
} 
```

但是，由于我的代码需要写入数据库并且我需要利用域类，因此我的代码会刹车。Hibernate 抱怨线程无权访问某些东西。

我不确定为什么我不能在 Service 类中使用线程并利用域类。有人可以帮我解决这个难题吗？我需要以特殊方式创建线程吗？可能我不应该在 Service 类中创建线程（因为 Service 类似乎在线程中运行）？我需要将我的代码移动到 Job 类中吗？

请帮忙。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T14:19:11.943

默认情况下，新线程不会绑定 Hibernate Session。要附加休眠会话，请尝试以下操作：

```
Item.each {
    Thread.start {
        Item.withTransaction {
            do some calculations here    
            write to DB
        }
    }
} 
```

您还可以查看[GPars](http://gpars.codehaus.org/)以获得易于使用的并行化框架。

# php - 在 YII 中创建一个新应用

> ID：12344801
> 
> 赞同：1
> 
> 时间：2012-09-10T02:40:50.577
> 
> 标签：php, macos, yii, osx-lion

我正在尝试使用 MacOsX 10.7.4 在 Yii 1.1.12 中使用以下代码生成一个新应用程序：

> yii/framework/yiic webapp testapp

它抛出以下错误：

> dyld：库未加载：@loader_path/../lib/libssl.dylib
> 引用自：/usr/lib/libpq.5.dylib 原因：库版本不兼容：libpq.5.dylib 需要 1.0.0 或更高版本，但是libssl.0.9.8.dylib 提供版本 0.9.8 Trace/BPT 陷阱：5

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T03:15:43.820

能够在这篇文章中找到答案 [rails - postgres 错误：原因：库版本不兼容：libpq.5.dylib 需要 1.0.0 或更高版本，](https://stackoverflow.com/questions/11127486/rails-postgres-error-reason-incompatible-library-version-libpq-5-dylib-requ)

虽然这是一个与 yii 有关的问题。

对不起

# jquery-mobile - jquerymobile 图像粘在底部

> ID：12344806
> 
> 赞同：0
> 
> 时间：2012-09-10T02:41:27.483
> 
> 标签：jquery-mobile, footer, sticky-footer

我想要一张贴在屏幕底部中心的图像。我知道我可以用`<div data-role="footer">`它来做到这一点。然而，页脚顶部有一条可见的水平线，我想摆脱它。知道怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T02:46:40.123

最简单的方法是使用内置的 jQM 页脚，它具有`data-position="fixed"`使其粘在底部的属性。我不熟悉您所说的页脚具有的这条水平线，但只需覆盖默认的 jQM 样式表就可以轻松摆脱它。您可以使用 Firefox 中的 Firebug 或任何浏览器中的内置开发人员工具查看/测试编辑 CSS 样式。

它应该看起来像这样：

```
.ui-footer {
    /* Use !important to ensure the target style will be overridden! */
    border: none !important; 
} 
```

和 HTML：

```
... <!-- rest of page -->
<div data-role="footer" data-id="fixedFooter" data-position="fixed" data-tap-toggle="false">
    <img src="path/to/image.png" />
</div> 
```

# c# - 在 MONO Cairo 绘图中最小化或调整窗口大小时绘图消失

> ID：12344808
> 
> 赞同：0
> 
> 时间：2012-09-10T02:41:49.360
> 
> 标签：c#, mono, monodevelop

我有一个基于 MONO 的桌面应用程序。该应用程序有一个按钮和一个绘图区域，单击按钮它会在绘图区域中绘制一个房子.. 直到这里我没有任何问题，但是一旦我调整窗口大小或最小化窗口，绘图就会消失。

请让我知道是否有人遇到此问题或是否有人知道。

谢谢，

最好的问候， Veeresh

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T03:22:11.790

这是一个常见的“问题”。但这并不是真正的问题，这只是事情的运作方式。当您在屏幕上绘制某些东西时，它就在视频卡内存中。当您最小化或在其上移动另一个窗口时，需要重新绘制图像。在你的情况下，你没有什么可以重绘它。您可能需要移动代码以将其绘制到绘制事件中，以便在每次窗口需要绘制时绘制它。

另一种选择是绘制位图并在图像控件中显示位图，但这会浪费内存。在正确的情况下，它可能是正确的选择。

# php - 标签系统的数据库结构

> ID：12344809
> 
> 赞同：1
> 
> 时间：2012-09-10T02:41:50.713
> 
> 标签：php, mysql, database, optimization, normalization

我正在制作一个简单的 PHP 论坛，标签是在主题旁边创建的。

该表如下所示：

```
 CREATE TABLE IF NOT EXISTS `topic` (
  `topic_id ` int(100) NOT NULL AUTO_INCREMENT,
  `topic_head` varchar(5) NOT NULL,
  `topic_body` varchar(20) NOT NULL,
  `topic_tag` varchar(20) NOT NULL,
  `topic_date` varchar(20) NOT NULL,
  `topic_owner` varchar(20) NOT NULL,
  PRIMARY KEY (`topic_id`)
  ) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=4 ; 
```

特别是对于标签，我将以以下形式执行选择查询：

```
$tags = mysql_query("SELECT DISTINCT topic_tags
                       FROM forum_topics")
                       while($tags = mysql_fetch_assoc($tags){   
                       $split_tags  = "$tags";
                       $pieces = explode(",", $split_tags); 
```

目前，topic_tags 的格式为`tag1,tag2,tag3,tag4` 我怎样才能让每个主题标签与每个主题相关联？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T03:37:03.973

如果我理解正确，你想要的是另一个标签表，然后是第三个表来存储关系。所以：

```
CREATE TABLE `tags` (
  `t_id` int(11) NOT NULL AUTO_INCREMENT,
  `t_text` varchar(150) NOT NULL,
  `t_datetime` datetime NOT NULL,
  PRIMARY KEY (`t_id`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ;

CREATE TABLE `tag_pairs` (
  `tp_id` int(11) NOT NULL AUTO_INCREMENT,
  `tp_topic_id` int(11) NOT NULL,
  `tp_tag_id` int(11) NOT NULL,
  `tp_datetime` datetime NOT NULL,
  PRIMARY KEY (`tp_id`),
  FOREIGN KEY (`tp_topic_id`) REFERENCES topic('topic_id'), 
  FOREIGN KEY (`tp_tag_id`) REFERENCES tags('t_id') 
) ENGINE=InnoDB DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ; 
```

然后，根据 ID ($THIS_ID) 获取主题的标签：

```
$query = mysql_query("
  SELECT tags.t_text 
  FROM tags, tag_pairs, topic 
  WHERE topic.topic_id = '$THIS_ID'
  AND tag_pairs.tp_topic_id = topic.topic_id 
  AND tag_pairs.tp_tag_id = tags.t_id 
 "); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T07:42:02.633

仅调用列：`id`, `head`, `body`, `tag_id (FK)`,`date`和`user_id (FK)`

这更容易理解，也更容易使用。让我解释：

现在您将列用作：`topic_id`，但它应该是：`topic.id`。你怎么得到这个？通过简单地使用`tablename + column`. 因此，当调用表`topics`并且您有一个名为 的列`id`时，您可以通过说来使用它：`topics.id`。在上面来自 da5id 的答案中，我可以看到他正在使用`topics.topic_id`，不是有点矫枉过正吗？;)

另外，阅读这篇关于[数据库范式 3的文章，并使用](http://www.phlonx.com/resources/nf3/)[database+3nf](https://www.google.nl/search?q=database+3nf)自己搜索一下

# python - 在 Pyramid 中导入它们时如何缩短路径？

> ID：12344810
> 
> 赞同：3
> 
> 时间：2012-09-10T02:42:02.973
> 
> 标签：python, pyramid

我在金字塔项目目录中创建了一个名为“models”的文件夹，并将我的所有模型放在单独的文件中，例如：

```
models
  |------ User.py
            |------- class User
  |------ Group.py
            |------- class Group 
```

在一些像initializedb.py这样的脚本中，我必须写一些类似的东西

```
from ..models.User import User
from ..models.Group import Group 
```

这很丑陋。如何将它们缩短为

```
from ..models import User
from ..models import Group 
```

没有添加一些冗余，比如

```
from .User import User
from .Group import Group 
```

在模型/**初始化**.py 中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T04:48:10.720

唯一的方法是通过`models/__init__.py`：

```
from User import User
from Group import Group 
```

这将`models`变成一个包，并允许您使用`from ..models import User`.

一句忠告：标准做法是使用所有小写的模块名称并为类保留大写字母。这允许您同时在同一个命名空间中拥有`user`模块和类，如果模块包含使用类的便利函数，这将很方便。`User`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-10T07:23:37.480

这是一个粗略而肮脏的示例，说明您如何可能将其自动化。`__init__.py`使用以下内容创建一个：

```
import os
import sys
import glob
import pkgutil

def auto_importer():
    here = os.path.split(__file__)[0]
    for _, package, _ in pkgutil.iter_modules( [here] ):
        package_name = '%s.%s' % (here, package)
        if package_name not in sys.modules:
            __import__( package_name )
            module = sys.modules[package_name]
            public_members = (m for m in getattr(module, '__all__', dir(module)) if not m.startswith('__'))
            for member in public_members:
                globals()[member] = getattr(module, member)

auto_importer()

# clean up namespace to avoid these leaking out
del os, sys, glob, pkgutil
del auto_importer 
```

这将从每个包含的模块中导入没有前缀的所有内容`__`（因此我们不会从每个模块中提取所有特殊属性，例如`__file__`）。如果你只想`Group`从你的模块中导入类`group`，你可以添加一行`group.py`如下：

```
__all__ = [ 'Group' ] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T03:12:40.700

不幸的是，如果不导入模型/__init__.py，就没有任何方法可以满足您的要求。或者，将所有模型包含在一个 .py 文件中，而不是为每个模型创建一个单独的 .py 文件。

对不起。

# android - 创建新的 Android 项目后不生成 XML 或代码

> ID：12344812
> 
> 赞同：0
> 
> 时间：2012-09-10T02:42:30.417
> 
> 标签：android

创建新的 Android 项目后，不会生成任何 XML 文件（默认 Main.xml）。

我正在使用 Eclipse 4.2，ADT 20.0.3。我想ADT和SDK已经安装成功了。

当我创建一个新项目时，在选择 BlankActivity 并将活动的所有详细信息保留为默认状态并单击*完成*后，如下所述：[创建 Android 项目](http://developer.android.com/training/basics/firstapp/creating-project.html)，但项目向导不会*消失*，尽管项目没有任何 XML 或任何代码已生成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T02:51:25.567

*   转到 res 文件夹，然后转到`layout`文件夹，并在其中检查`main.xml`默认文件，您将找到 XML。

*   好吧，如果这是一个问题。让我向您展示在 Eclipse 中创建默认 Android 项目的方法。

`File --> New --> Android Project --> Write Project Name --> Next --> Select the SDK` `--> Give your package name as (eg: com.demo) --> finish.`

# function - 以具有 ksh 默认 shell 的用户身份将 shell 函数导出到 su

> ID：12344813
> 
> 赞同：2
> 
> 时间：2012-09-10T02:42:43.303
> 
> 标签：function, export, ksh, su

我有一种情况，只有root可以mailx，只有ops可以重新启动进程。我想制作一个自动脚本，既可以重新启动该过程，又可以发送一封有关这样做的电子邮件。

当我使用函数尝试此操作时，该函数“未找到”。

我有类似的东西：

```
#!/usr/bin/bash

function restartprocess {
/usr/bin/processcontrol.sh start
}

export -f restartprocess

su - ops -c "restartprocess"

mailx -s "process restarted" myemail.mydomain.com < emailmessage.txt

exit 0 
```

它告诉我找不到该功能。经过一番排查，原来 ops 用户的默认 shell 是 ksh。

我尝试将脚本更改为在 ksh 中运行，并将“export -f”更改为“typeset -xf”，但仍然找不到该函数。喜欢：ksh：找不到导出功能

我终于放弃了，只是调用了脚本（直接在函数中）并且有效。这就像是：

```
su - ops -c "/usr/bin/processcontrol.sh start" 
```

（这当然是对真实脚本的简化）。

鉴于用户 ops 的默认 shell 是 ksh 并且我无法更改或修改 sudoers，有没有办法导出一个函数，以便我可以 su 作为 ops（并且我需要运行 ops 的配置文件）并执行该函数？

我确保 ops 用户有权访问我希望它执行的脚本的目录，以及运行该脚本的权限。

任何有关这方面的教育将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T01:06:42.797

导出函数有很多限制，特别是结合`su - ...`不同的账户和不同的shell。

相反，把你的脚本翻过来，把*所有*要运行的命令放在调用shell的函数中。

类似的东西：（bash和ksh）

```
#!/usr/bin/bash

function restartprocess {
    /bin/su - ops -c "/usr/bin/processcontrol.sh start"
}

if restartprocess; then
    mailx -s "process restarted" \
        myemail@mydomain.com < emailmessage.txt
fi

exit 0 
```

这将隐藏函数`/bin/su`内部的所有处理`restartprocess`，并且可以随意扩展。

# c - 如何在 C 中将 unsigned char 打印为 2 位十六进制值？

> ID：12344814
> 
> 赞同：16
> 
> 时间：2012-09-10T02:42:48.533
> 
> 标签：c, keil

我正在尝试将无符号字符值打印为 2 位十六进制值，但总是将结果作为 4 位十六进制值，不确定我的代码有什么问题。

```
// unsigned char declaration
unsigned char status = 0x00;
// printing out the value 
printf("status = (0x%02X)\n\r", (status |= 0xC0)); 
```

我期待 2 位十六进制结果为`0xC0`，但我总是得到`0xC0FF`。

同样，当我尝试使用`%bu`格式标识符将相同的变量（状态）打印为无符号字符时，我得到的输出为`255`.

你如何得到两个十六进制字符作为输出？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-10T03:13:57.267

据我所知，[Keil C 编译器](http://www.keil.com/c51/c51.asp)并不完全符合 C 标准。如果是这样，它很可能没有完全遵循标准的提升规则，比如将`char`值传递给可变参数函数；在 8 位 CPU 上，不自动将 8 位值扩展到 16 位或更多位具有性能优势。

作为一种解决方法，您可以在将参数传递给`printf`. 尝试这个：

```
#include <stdio.h>

int main(void) {
    unsigned char status = 0x00;
    status |= 0xC0;

    printf("status = 0x%02X\n", (unsigned int)(status & 0xFF));
    return 0;
} 
```

用按位“与”`0xFF`清除除底部 8 位以外的所有位；`unsigned int` *不需要*强制转换为，但它保证参数实际上是`printf`格式`"%02X"`所期望的类型。

您还应该查阅您的实现文档，了解关于类型提升和`printf`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-10T02:49:15.367

您正在将 char 发送到需要 int 的格式字符串。printf 函数正在从堆栈中抓取另一个字节来填充它。尝试

```
 printf("%02X",(int)(status|0xC0)); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-01-20T18:34:15.753

查看所有答案，我认为我们可能缺少另一种方法。

```
const unsigned char chararr[]="abceXYZ";
for (int i=0; i< 7; ++i) {
    printf("%#04X %d %c\n", chararr[i], chararr[i], chararr[i]);
}
0X61 97 a
0X62 98 b
0X63 99 c
0X65 101 e
0X58 88 X
0X59 89 Y
0X5A 90 Z 
```

如果你使用 %#04x small x 那么输出将是 b 0x small x 前缀。# 井号告诉函数打印 0x。04 指示要输出多少位，如果输入是'0x0a'，它将打印这个，没有04它将打印'0xa'。

在我的电脑戴尔工作站中，输出与问题所预期的一样。除非

```
unsigned char status = 0x00;
printf("status = (0x%02X)\n\r", (status |= 0xC0));
// output
//status = (0xC0)
// is exactly expected by the original question. 
```

通过示例更好地说明：

```
 37    printf("status = (%#02x)\n", (status |= 0xC0));
 38    printf("status = (%#04x)\n", (status |= 0xC0));
 39    printf("status = (%#04x)\n", 0x0f);
 40    printf("status = (%#02x)\n", 0x0f);
status = (0xc0)
status = (0xc0)
status = (0x0f)
status = (0xf) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-10T02:49:22.297

将其转换为无符号字符：

```
printf("status = (0x%02X)\n\r", (unsigned char)(status |= 0xC0)); 
```

# sql - 进行安全的 sql 查询

> ID：12344817
> 
> 赞同：2
> 
> 时间：2012-09-10T02:43:24.410
> 
> 标签：sql, ruby-on-rails

下面的代码来自一个 Sinatra 应用程序（使用 DataMappe），我正在尝试将其转换为 Rails 3 应用程序。它是 Visit 类中的一个类方法。

```
def self.count_by_date_with(identifier,num_of_days)
    visits = repository(:default).adapter.query("SELECT date(created_at) as date, count(*) as count FROM visits where link_identifier = '#{identifier}' and created_at between CURRENT_DATE-#{num_of_days} and CURRENT_DATE+1 group by date(created_at)")
    dates = (Date.today-num_of_days..Date.today)
    results = {}
    dates.each { |date|
      visits.each { |visit| results[date] = visit.count if visit.date == date }
      results[date] = 0 unless results[date]
    }
    results.sort.reverse    
  end 
```

我的问题是这部分

```
 visits = repository(:default).adapter.query("SELECT date(created_at) as date, count(*) as count FROM visits where link_identifier = '#{identifier}' and created_at between CURRENT_DATE-#{num_of_days} and CURRENT_DATE+1 group by date(created_at)") 
```

Rails（据我所知）没有这个存储库方法，我希望在某种对象上调用查询，例如`Visit.find`

谁能给我一个提示，这将如何最好地为 Rails 应用程序编写？

我应该做

```
Visit.find_by_sql("SELECT date(created_at) as date, count(*) as count FROM visits where link_identifier = '#{identifier}' and created_at between CURRENT_DATE-#{num_of_days} and CURRENT_DATE+1 group by date(created_at)") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T03:10:03.013

Model.connection.execute "YOUR SQL" 应该对您有所帮助。就像是

```
class Visit < Activerecord::Base

   class << self
    def trigger(created_at,identifier,num_of_days) 
    sql =  "SELECT date(created_at) as date, count(*) as count FROM visits where  link_identifier = '#{identifier}' and created_at between CURRENT_DATE-#{num_of_days} and CURRENT_DATE+1 group by date(created_at)"

    connection.execute sql   
    end
   end
  end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T04:24:00.057

我知道您已经接受了答案，但您要求最好的方法来完成您在 Rails 中提出的要求。我提供这个答案是因为 Rails 不建议将[条件构建](http://guides.rubyonrails.org/active_record_querying.html#conditions)为纯查询字符串。

> 将您自己的条件构建为纯字符串可能会使您容易受到 SQL 注入攻击。例如，`Client.where("first_name LIKE '%#{params[:first_name]}%'")`不安全。

幸运的是，Active Record 非常强大，可以构建非常复杂的查询。例如，您的查询可以通过四个方法调用重新创建，同时仍然易于阅读和安全。

```
# will return a hash with the structure
# {"__DATE__" => __COUNT__, ...}
def self.count_by_date_with(identifier, num_of_days)
  where("link_identifier = ?", identifier)
  .where(:created_at => (num_of_days.to_i.days.ago)..(1.day.from_now))
  .group('date(created_at)')
  .count
end 
```

Active Record 被构建用于将 Ruby 对象转换为有效的 SQL 选择器和运算符。让它如此酷的原因在于 Rails 可以将[Ruby Range](http://www.ruby-doc.org/core-1.9.3/Range.html)转换为 a`[BETWEEN operator](http://guides.rubyonrails.org/active_record_querying.html#array-range_conditions)`或将[Array](http://www.ruby-doc.org/core-1.9.3/Array.html)转换为`[IN expression](http://guides.rubyonrails.org/active_record_querying.html#subset-conditions)`.

有关 Active Record[的更多信息，请查看指南](http://guides.rubyonrails.org/active_record_querying.html)。它解释了 Active Record 的功能以及如何使用它。

# php - 需要帮助使 sql 数据可用于数学函数 php

> ID：12344818
> 
> 赞同：2
> 
> 时间：2012-09-10T02:43:36.460
> 
> 标签：php, mysql, oop, math, web-applications

好的，我正在尝试通过 user_id 从多行中获取数据，然后将这些值作为单独的数组实例化到我的“Checks”类中。首先，我将向您展示我的 sql 设置。

```
id user_id date 总净额 联邦州 ssi other_pay other_deduct other_tax_deduct company check_no
 1 1 2012-07-26 434.88 354.39 40.70 15.71 18.27 0.00 6.31 0.00 K-VA-TT 3209181
2 1 2012-08-16 433.11 353.09 39.44 15.61 18.19 0.00 6.28 0.00 K-VA-TT 3230201

```

（有点聚集，但你明白了。我有一张照片，但它不会让我发布它..）

好的，现在是我用来将数据调用到 PHP 中的代码。

```
public function get_field($user) {
    global $database;
    $result = $database->query("SELECT * FROM ".static::$tablename." WHERE user_id=".$user);
    $field_data = array();
    $index = 0;
    while($row = mysql_fetch_assoc($result)) {
        $field_data[$index] = $row;
        $index++;
    }
    return $field_data;
} 
```

你们中的许多人可能已经猜到了，我是如何从上述函数接收数据的。

```
数组（[id] => 1 [user_id] => 1 [date] => 2012-07-26 [gross] => 434.88 [net] => 354.39 [federal] => 40.70 [state] => 15.71 [ssi ] => 18.27 [other_pay] => 0.00 [other_deduct] => 6.31 [other_tax_deduct] => 0.00 [company] => K-VA-TT [check_no] => 3209181) 数组 ([id] => 2 [user_id] => 1 [日期] => 2012-08-16 [总额] => 433.11 [净额] => 353.09 [联邦] => 39.44 [州] => 15.61 [ssi] => 18.19 [other_pay] => 0.00 [ other_deduct] => 6.28 [other_tax_deduct] => 0.00 [company] => K-VA-TT [check_no] => 3230201） 

```

我希望最终在我的课堂上像

```
public date = array(2012-07-26, 2012-08-16);
public $gross = array(434.88, 433.11)
ect.. 
```

我不知道我是否需要以不同的方式检索数据或只是在之后对其进行格式化。我尝试过嵌入 for 循环、while 循环、foreach，但似乎无法做到正确。我也有一个实例化功能

```
private static function instantiate($record) {
    $class_name = get_called_class();
    $object     = new $class_name;

    foreach($record as $attribute=>$value) {
        if($object->has_attribute($attribute)) {
            $object->$attribute = $value;
        }
    }
    return $object;
} 
```

哪个使用

```
private function has_attribute($attribute) {
    // get_object_vars returns an associative array with all attributes
    // (incl. private ones!) as the keys and their current values as the value
    $object_vars = get_object_vars($this);
    // we don't care about the value, we just want to know if the key exists
    // will return true or false
    return array_key_exists($attribute, $object_vars);  
} 
```

，并且我尝试与那些搞乱以使它们与数组一起使用，但也没有运气。我认为这是因为如果这个谜题的开头部分丢失了，其余部分也不会组合在一起。我在这里不知所措。正如我之前所说，我试图将它们放入类变量中，这样我就可以对它们进行数学运算（即总、平均等）。这是我正在开发的预算应用程序。任何帮助将不胜感激。即使这是一种完全不同的方式，对我来说可能不会那么混乱，我至少会试一试。如果您需要更多信息，请随时询问。我没有展示的两个功能几乎是不言自明的。再次感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T04:09:23.350

这种代码更改应该为您解决问题：

```
$date = array();
$gross= array();
// all the other columns.........like this

while($row = mysql_fetch_assoc($result)) {
    $date[] = $row['date'];
    $gross[] = $row['gross'];
    // other columns ...... like this
}

$filled_data =array ();
$filled_data[] =$date;
$filled_data[]=$gross;
// other arrays ...........

return $filled_data; 
```

# math - 解决递归

> ID：12344822
> 
> 赞同：0
> 
> 时间：2012-09-10T02:44:48.410
> 
> 标签：math, recurrence

T(n)=T(n-1) + lgn 我的做法是：

代入 n-1,n-2,n-3 最后我们得到 T(n)=T(1) + lg 2 +lg 3 所以 lg n => T(n) = lg(2*3*4* 5 n) 因此 T(n)=lg(n!)。

但他们给出的答案是 nlgn。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T06:03:01.817

这是计算复杂性的问题吗？如果是这样，那么你和“他们”都是正确的。

```
O(lg(n!)) = O(lg(n^n)) = O(n lg(n)) 
```

更严格地说，来自[斯特林](http://en.wikipedia.org/wiki/Stirling%27s_approximation)公式：

```
lg(n!) = n lg(n) - n + O(ln(n)) 
```

所以

```
O(lg(n!)) = O(n lg(n)) + O(n) + O(ln(n)) = O(n lg(n)) 
```

# java - 在 Swing 应用程序中使用 java.util.logging 包

> ID：12344824
> 
> 赞同：2
> 
> 时间：2012-09-10T02:45:00.837
> 
> 标签：java, swing, logging, java.util.logging

这个问题与[在 Java 应用程序中实现日志记录](https://stackoverflow.com/questions/12343600/implementing-logging-in-a-java-application)有关，但是由于那里的示例代码使问题变得非常长，所以我决定根据我目前所学的知识开始一个新问题。

为了说明我想要做什么，我有以下扩展 JFrame 的示例类：

```
package swingloggingsscce;

import java.io.IOException;
import java.util.logging.FileHandler;
import java.util.logging.Level;
import java.util.logging.Logger;
import java.util.logging.SimpleFormatter;

public class SwingLoggingSSCCE extends javax.swing.JFrame {

    public SwingLoggingSSCCE() {
        initComponents();
    }

    private void initComponents() {

        logButton = new javax.swing.JButton();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        setTitle("Swing Logging SSCCE");

        logButton.setFont(new java.awt.Font("Tahoma", 0, 24)); // NOI18N
        logButton.setText("Do Log");
        logButton.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                logButtonActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGap(147, 147, 147)
                .addComponent(logButton)
                .addContainerGap(146, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGap(120, 120, 120)
                .addComponent(logButton)
                .addContainerGap(143, Short.MAX_VALUE))
        );

        pack();
    }

    private void logButtonActionPerformed(java.awt.event.ActionEvent evt) {
        Logger.getLogger(SwingLoggingSSCCE.class.getName()).log(Level.INFO, "SwingLoggingFrame.logButtonActionPerformed()");
    }

    public static void main(String args[]) throws IOException {
        SwingLoggingSSCCE.initLogger();
        new SwingLoggingSSCCE().setVisible(true);
    }

    private static void initLogger() throws IOException {
        SwingLoggingSSCCE.HANDLER = new FileHandler(SwingLoggingSSCCE.LOG_FILE_NAME);
        SwingLoggingSSCCE.HANDLER.setFormatter(new SimpleFormatter());

        Logger logger = Logger.getLogger("");
        logger.setLevel(Level.INFO);
        logger.addHandler(SwingLoggingSSCCE.HANDLER);
    }

    private javax.swing.JButton logButton;

    private static final String LOG_FILE_NAME = "swingloggingsscce.log";
    private static FileHandler HANDLER = null;
} 
```

这完全按预期工作并生成以下“swingloggingsscce.log”文件：

```
Sep 09, 2012 8:37:43 PM swingloggingsscce.SwingLoggingSSCCE logButtonActionPerformed
INFO: SwingLoggingFrame.logButtonActionPerformed() 
```

现在我正在尝试在我的主应用程序中使用相同的功能。这是类`main()`：

```
/*
 * This file is part of BBCT.
 *
 * Copyright 2012 codeguru <codeguru@users.sourceforge.net>
 *
 * BBCT is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * BBCT is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
package bbct;

import bbct.data.BaseballCardIO;
import bbct.data.BaseballCardJDBCIO;
import bbct.exceptions.BBCTIOException;
import bbct.gui.BBCTFrame;
import bbct.gui.GUIResources;
import java.io.IOException;
import java.util.logging.FileHandler;
import java.util.logging.Handler;
import java.util.logging.Level;
import java.util.logging.Logger;
import java.util.logging.SimpleFormatter;
import javax.swing.JOptionPane;

/**
 * This is the driver class for the Baseball Card Tracker program.
 *
 * @author codeguru <codeguru@users.sourceforge.net>
 */
public class Baseball {

    private static final String LOG_FILE_NAME = "log/bbct.log";

    /**
     * Starts the Baseball Card Tracker by creating and showing the initial
     * window.
     *
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        try {
            Baseball.initLogger();

            // ****************** Added this line ******************
            Logger.getLogger(Baseball.class.getName()).log(Level.INFO, "Fixing to create a BaseballCardIO object.");
            BaseballCardIO bcio = new BaseballCardJDBCIO(GUIResources.DB_URL);

            Logger.getLogger(Baseball.class.getName()).log(Level.INFO, "Fixing to show a new frame.");

            new BBCTFrame(bcio).setVisible(true);
        } catch (BBCTIOException | IOException ex) {
            Logger.getLogger(Baseball.class.getName()).log(Level.SEVERE, "Unable to initialize storage.", ex);
            JOptionPane.showMessageDialog(null, ex.getMessage(), "Initialization Error", JOptionPane.ERROR_MESSAGE);
        }
    }

    private static void initLogger() throws IOException {
        boolean append = true;
        Handler handler = new FileHandler(Baseball.LOG_FILE_NAME, append);
        handler.setFormatter(new SimpleFormatter());

        Logger logger = Logger.getLogger("");
        logger.setLevel(Level.INFO);
        logger.addHandler(handler);
    }

    private static final String LOG_FILE_NAME = "log/bbct.log";
} 
```

我不会包含其余代码，因为完整的应用程序有 24 个类。问题是我的 BBCT 应用程序创建了一个“log/bbct.log”文件，但运行该应用程序后，该文件为空！我看不出我的`Baseball`类代码与`SwingLoggingSSCCE`. 但是，显然有些不同，否则它会起作用。我想，我只需要一些新鲜的眼光来看看我的代码。同时，我会尝试自己解决。

在此先感谢您的帮助。

**编辑：**

我忘了提到它`SwingLoggingSSCCE`也会在控制台上显示日志信息，但`bbct.Baseball`没有。

**更新：** 好的，我已经缩小了问题的范围。`BaseballCardIO`在创建对象之前，我添加了对 Logger.log() 的调用。这会出现在日志文件中，但不会出现在`bcio`创建之后的文件中。我想我只需要从那里继续我的调查。

**另一个更新：**

以下构造函数似乎是我的日志记录问题的根源：

```
public BaseballCardJDBCIO(String url) throws BBCTIOException {
    try {
        Logger logger = Logger.getLogger(BaseballCardJDBCIO.class.getName());
        logger.log(Level.INFO, "Creating BaseballCardJDBCIO object");
        logger.log(Level.INFO, "Getting database connection.");
        this.conn = DriverManager.getConnection(url);

        logger.log(Level.INFO, "Creating table");
        this.createTable();
    } catch (SQLException ex) {
        // TODO: Need a more user-friendly error message.
        throw new BBCTIOException(ex);
    }
} 
```

调用 后所有日志记录都停止`DriverManager.getConnection(url);`。一些进一步的研究表明 JDBC 使用 java.util.logging。我可能不想要所有的 JDBC 日志数据。但是，JDBC 似乎干扰了我需要添加到我的应用程序的日志记录。这是 JDBC 的“特性”吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T16:46:50.110

我发现了问题并发布了一个新的问答（希望）更简洁地解释并给出我的解决方案：[Using java.util.logging with JDBC drivers for the HyperSQL Database Engine](https://stackoverflow.com/questions/12353990/using-java-util-logging-with-jdbc-drivers-for-the-hypersql-database-engine?lq=1)

# ruby-on-rails - 次要 ID 自动递增

> ID：12344826
> 
> 赞同：1
> 
> 时间：2012-09-10T02:45:34.900
> 
> 标签：ruby-on-rails, ruby, activerecord

我有一个 ActiveRecord 模型，它需要有一个辅助 id。我可以想到几种方法来实现它，但最好的方法是什么？是否可以在迁移中指定自动增量，还是应该在过滤器中完成？

最佳做法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T02:53:59.890

这是一个解决方案

```
before_validation :add_secondary_id, :on => :create

def add_secondary_id
  self.secondary_id = self.class.select(:secondary_id).order('secondary_id DESC').first.secondary_id.to_i + 1
end 
```

# .htaccess - 剥离 query_string

> ID：12344831
> 
> 赞同：2
> 
> 时间：2012-09-10T02:46:44.903
> 
> 标签：.htaccess

我想摆脱我整个网站上的一些查询字符串（明确的 facebook 共享/喜欢查询，通常以 fb_action 开头）。

我考虑过使用 .htaccess 来做到这一点。

我想要这个：链接1）

```
http://example.com/documents/de_desmarais_en_sirois?fb_action_ids=10151430962018298&fb_action_types=og.likes&fb_source=timeline_og&action_object_map={%2210151430962018298%22%3A157643874359578}&action_type_map={%2210151430962018298%22%3A%22og.likes%22}&action_ref_map=[] 
```

看起来像：链接2）

```
http://example.com/documents/de_desmarais_en_sirois 
```

在我的 .htaccess 中，我添加了：

```
RewriteCond %{QUERY_STRING} fb_action
RewriteRule ^(.*) /$1? [R=301,L] 
```

但是，当我转到原始链接时，我被定向到我的根文件夹 example.com/pages.php，但我想保留 URL 的第一部分，即`example.com/documents/de_desmarais_en_sirois`. 我不想去我的根。

我应该修改/做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T04:01:56.133

我假设您已将这些规则添加到`/documents/`目录中的 htaccess 文件中？

您需要删除规则目标中的前导斜杠并添加重写基础：

```
RewriteBase /documents/

RewriteCond %{QUERY_STRING} fb_action
RewriteRule ^(.*) $1? [R=301,L] 
```

查询字符串匹配可以改进一点：

```
RewriteCond %{QUERY_STRING} (.*)(^|&)fb_[^&]+(.*)$
RewriteRule ^(.*) $1?%1%2 [R=301,L]
RewriteCond %{QUERY_STRING} (.*)(^|&)action_[^&]+(.*)$
RewriteRule ^(.*) $1?%1%2 [R=301,L] 
```

如果您有其他要保留的参数，则仅删除 facebook 查询字符串参数。

# string - 如何将 html 对象转换为字符串类型？

> ID：12344832
> 
> 赞同：22
> 
> 时间：2012-09-10T02:46:46.097
> 
> 标签：string, html-parsing

我使用 jQuery 方法来获取某种类型的 html 对象：

```
var content = $('#cke_ckeditor iframe').contents().find('.cke_show_borders').clone(); 
```

然后我想将其转换为`string`类型：

```
console.log(content[0].toString()); 
```

但结果是：

```
[object HTMLBodyElement] 
```

我怎样才能把它变成真正的字符串？

顺便问一下，我可以将转换后的 html 字符串转换为 html 对象吗？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2014-07-25T03:29:29.863

我相信您想使用[Element.outerHTML](https://developer.mozilla.org/en-US/docs/Web/API/Element/outerHTML)：

`console.log(content.outerHTML)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-05-25T18:51:35.917

我有同样的问题。

`var docString = "<html>"+content.documentElement.innerHTML+"</html>"`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-08-17T16:31:43.013

你可以用这个`content[0].prop('outerHTML')`

它对我有用

参考：[如何将 jQuery 对象转换为字符串？](https://stackoverflow.com/questions/652763/how-do-you-convert-a-jquery-object-into-a-string)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-27T15:43:52.027

您可以尝试以下方法：

```
content.text(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-12-14T11:40:28.917

将 jQuery 对象转换为字符串的正确方法：

var content = $('#cke_ckeditor').find('.cke_show_borders').eq(0).clone();

console.log(content.get(0).outerHTML);

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-10-05T12:14:23.810

'outerHTML' 为我工作。

在 Google Tag Manager 'custom javasctipt' 部分 {{Click Element}} 返回 [object HTMLElement]。

```
function() {
   var elm = {{Click Element}};
   return elm.outerHTML; // working
} 
```

结果 -

```
<i _ngcontent-c1="" class="material-icons">edit</i> 
```

# ruby - Watir：通过 bgcolor 标签搜索表格单元格并获取列号

> ID：12344841
> 
> 赞同：2
> 
> 时间：2012-09-10T02:49:23.233
> 
> 标签：ruby, watir

以下面的 html 为例。它是我用来练习的草稿纸，但它有一个我正在尝试使用的真实 html 的片段。

[http://www.carbide-red.com/prog/test_table.html](http://www.carbide-red.com/prog/test_table.html)

我试图找到一列，我能找到的唯一一致的标识符是背景颜色（bgcolor）。

```
<tr bgcolor="#ffffcc">
    <td bgcolor="yellow" class="date" align=center>Equipment</td>
    <td bgcolor="#ccccff" align=center class="date"><font color=black>8/12/12</font></td>
    <td bgcolor="#ccccff" align=center class="date"><font color=black>8/19/12</font></td>
    <td bgcolor="#ccccff" align=center class="date"><font color=black>8/26/12</font></td>
    <td bgcolor="#ccccff" align=center class="date"><font color=black>9/2/12</font></td>
    <td bgcolor="red" align=center class="date"><font color=yellow>9/9/12</font></td>
    <td bgcolor="#ccffcc" align=center class="date"><font color=black>9/16/12</font></td>
    <td bgcolor="#ccffcc" align=center class="date"><font color=black>9/23/12</font></td>
    <td bgcolor="#ccffcc" align=center class="date"><font color=black>9/30/12</font></td>
    <td bgcolor="#ccffcc" align=center class="date"><font color=black>10/7/12</font></td>
</tr> 
```

我正在尝试找到`<td>`具有 bgcolor=red 的那个。然后我想保存该单元格的列索引，以便我可以使用它来选择以下行的同一列。

但我似乎找不到搜索`bgcolor=`标签的方法。而且我还没有找到一种方法让 Watir 报告列/行索引以存储在变量中。但是如果我能找到`bgcolor=`标签，那么我可以搜索“设备”，然后计数，直到找到正确的标签。

我知道 html 代码并不理想，因为有任何“名称”或任何唯一标识符，但我无法更改。

我对 Ruby 和 Watir 很陌生。我试图在 Perl 中操作一个网站，但进展并不顺利，我发现了 Watir，它完全符合我的需要（而且非常简单），但现在我试图理解 Ruby 以及更精细的语义。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T04:11:53.920

如果我是你，我会使用 nokogiri：

```
doc = Nokogiri::HTML @browser.html
td = doc.at('td[@bgcolor="red"]')
index = td.search('./preceding-sibling::td').length 
```

除非页面上有棘手的 javascript，否则使用 mechanize 可能比 watir 更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T12:07:24.540

要获取文本，`<td bgcolor="red">`请尝试以下操作：

```
browser.element(:css => "td[bgcolor=red]").text 
```

你应该回来`"9/9/12"`。要单击元素，请替换`text`为`click`。

要将其索引放入变量中，请`index`尝试以下操作：

```
index = nil
browser.tds.each_with_index {|td, i| index = i if td.attribute_value("bgcolor") == "red" or td.attribute_value("bgcolor") == "#ff0000"} 
```

`index`变量应该是`5`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T13:20:35.797

是的，我正在处理的网页使用 Javascript，这就是为什么我很难在 Perl 下使用 Mechanize::Firefox。Watir 的工作更加顺利。

谢谢您的建议！起初它不起作用，但它帮助我进行了 Google 搜索，并且我能够获得一个工作版本。

```
require "watir"
require "nokogiri"

browser = Watir::Browser.new
browser.goto "http://www.carbide-red.com/prog/test_table.html"

doc = Nokogiri::HTML.parse(browser.html) 
td = doc.at('td[@bgcolor="red"]') 
columnindex = td.search('./preceding-sibling::td').length 

puts columnindex
browser.close 
```

这返回了“5”

**更新：**

为了其他人在搜索和学习时可能会发现这一点。要使用`columnindex`变量在行中查找特定列，请使用以下代码：

```
textvariable = browser.td(:text => "A58004").parent.td(:index => "#{columnindex}").text
puts "Textvariable: #{textvariable}" 
```

这会找到`<td>`包含术语“A58004”的 a，然后转到第 5 列 (0-5) 并返回该单元格的值。使用我原始问题中链接的网页，即“W = Sa”

# html - 在现有的 div 区域中放置一个 JavaScript 块

> ID：12344842
> 
> 赞同：0
> 
> 时间：2012-09-10T02:50:32.487
> 
> 标签：html, css, layout

我正在尝试删除[此](http://shoutkey.com/pliant)站点标题区域中的背景图像，并在徽标右侧放置一个矩形 javascript 广告。标题区域包含的各种 div 块非常令人困惑，我放置在徽标旁边的任何内容最终都位于其下方而不是右侧，即使它是几个字符的文本。徽标右侧似乎有足够的空间，所以我不确定出了什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T03:24:19.073

这里没有什么奇怪的。您的 logo 元素 ( `#rt-logo`) 是一个块元素，默认情况下不允许将内联元素放置在它旁边。您可以绝对定位您的广告框 - 类的父 div`.rt-omega`是相对定位的，这很简单 - 或者您可以给出`#rt-logo`a`float: left;`或 a`display: inline-block;`来做您想做的事情。

也就是说，这是一个非常基本的问题，您可能想看一两个[CSS 教程](http://www.w3schools.com/css/)。如果您打算花任何时间在网站上工作，那将是值得的。

# internet-explorer - 为什么资源管理器不显示此 SVG 渐变

> ID：12344846
> 
> 赞同：0
> 
> 时间：2012-09-10T02:51:30.887
> 
> 标签：internet-explorer, css, svg

我有这个网站[http://www.logtech.co.il](http://www.logtech.co.il)

顶部菜单的背景效果很好。它没有明显的原因破裂。我只更改了一些不相关元素的位置设置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T02:53:16.913

Internet Explorer 不支持 SVG，IE 中的矢量图形需要使用 VML。

我相信 IE10 现在原生支持 SVG。

# c# - C# 返回列表 - 不一致的可访问性

> ID：12344848
> 
> 赞同：6
> 
> 时间：2012-09-10T02:51:46.020
> 
> 标签：c#, list

> **可能重复：**
> [可访问性不一致](https://stackoverflow.com/questions/6959621/inconsistent-accessibility)

当我尝试将我的`List<MyType>`一个方法中的 a 返回到从另一个类调用它的东西时，它给了我以下错误：

可访问性不一致：返回类型`System.Collections.Generic.List<MyType>`比方法更难访问`MyMethod(string, string, string, string, string, string, string, string, string, string, string)`

关于在这里做什么的任何想法？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-10T02:54:19.250

嗯，就像它说的那样。您可能有一个`List<SomeInternalClass>`并且您正在`List<SomeInternalClass>`从一个*PUBLIC*方法返回它。所以，编译器告诉你，即使人们可以看到这个方法，他们也看不到你试图返回的类型。您需要将您的方法或类型设为内部或公开。

例子：

```
internal class Foo {
}
public class Class1
{
    public List<Foo> Bar() {

    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-10T02:55:04.913

这通常发生在您的方法返回的通用列表`MyType`比返回它的方法更难访问时，例如

```
public class TestClass {
    public List<MyClass> MyMethod() {
        return new List<MyClass>();
    }
    private class MyClass {
        public string Name {get;set;}
    }
} 
```

# vb.net - 如何生成报告

> ID：12344852
> 
> 赞同：0
> 
> 时间：2012-09-10T02:52:12.617
> 
> 标签：vb.net, crystal-reports-8.5

我在生成报告时遇到问题。我将水晶报表 8.5 与 vb.net 2008 一起使用，我想要的是当我生成报表时它会出现红色值，如果该值大于或小于实际值，否则它将给出默认值但是当我输入此代码时它会给我错误的结果

```
If {Intake.wheatType} = {Spec.WheatType} AND
{Intake.HB43} >={Spec.M_Min} AND{Intake.HB43} >={Spec.M_Max} Then
Red
Else
DefaultAttribute 
```

此报告与两个表相关，即表 Spec 和表 Intake。谁能帮助/教我如何解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T03:33:21.820

当确定一个值是否在最小值和最大值之间时，逻辑将是：

值是否**大于**最小值**，**值是否**小于**最大值？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T03:45:50.027

实际上，您可以为此创建一个`Formula Field`，

1.  从`Field Explorer`, 右击`Formula Field`
2.  将出现一个弹出窗口，输入您想要的公式的名称。
3.  在`Formula Editor`插入您自定义的公式中

代码：

```
If {Intake.wheatType} = {Spec.WheatType} AND {Intake.HB43} >={Spec.M_Min} AND {Intake.HB43} >={Spec.M_Max} Then
   Red
Else
   DefaultAttribute 
```

然后单击`OK`。将新创建的字段拖到您的报表上。就是这样。

**[有关更多信息，请参阅：添加公式字段](http://vb.net-informations.com/crystal-report/vb.net_crystal_report_formula_fields.htm)**

# javascript - CSS如何水平对齐元素组？

> ID：12344857
> 
> 赞同：1
> 
> 时间：2012-09-10T02:52:46.660
> 
> 标签：javascript, jquery, html, css

我无法将段落元素与一组按钮元素对齐。我正在使用 jQuery 和 CSS 来尝试这样做。

这是我看到的：

![在此处输入图像描述](../Images/5a52ab4c2956d2049d64523d799bdfdf.png)

理想情况下，我希望它们都位于屏幕顶部的同一水平线上，以避免像我一样浪费像素空间。所以有 DesignName 文本，然后在其右侧的一行中有按钮。

以下是在代码中添加元素的方式：

```
var theDiv = $("#theDiv");

theDiv.append('<div id="buttonMenuDiv"></div>');

var buttonDiv = $("#buttonMenuDiv");
buttonDiv.append('<p id="DesignName" class="DesignName">DesignName</p>');
buttonDiv.append('<input type="button" id="MainMenu" value="Main Menu" >');
buttonDiv.append('<input type="button" id="NewModule" value="New Module" >');
buttonDiv.append('<input type="button" id="SearchDesigns" value="Search Designs" >');
buttonDiv.append('<input type="button" id="DesignDescription" value="Design Description" >');
buttonDiv.append('<input type="button" id="SaveWork" value="Save Work" >');
buttonDiv.append('<input type="button" id="PackageDesign" value="Package Design" >');
buttonDiv.append('<input type="button" id="Tutorial" value="Tutorial" >'); 
```

“DesignName”类只指定了字体属性（大小、颜色），所以我没有包含它。谢谢你的帮助。

（在 append() 调用中使用单引号有一些编辑问题）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T03:07:21.517

```
#theDiv * {
display:inline;
} 
```

只需使元素内联而不是块。

[http://jsfiddle.net/v5eYt/3/](http://jsfiddle.net/v5eYt/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T03:07:42.673

段落和 div 是[块](https://developer.mozilla.org/en-US/docs/HTML/Block-level_elements)类型，这意味着它们后面会自动换行。输入不是，如果您希望“设计名称”后面不跟中断，您可能应该把它放在一个跨度中（跨度被认为是内联元素，它加入了它们周围的文本流）。上面评论中提到的浮动也可以，但它会带来更多的包袱——如果你只是想把一堆简单的项目放在同一行，内联元素（或在css）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-10T03:17:17.547

您可以对这些按钮使用 css 规则来实现：

```
/*css rule*/

#buttonMenuDiv > input{
   display: inline-block;
} 
```

您可以将显示设置为内联或内联块。但是如果你将它们设置为内联，'width' 和 'height' 属性将不再生效。

# wordpress - Facebook for WordPress 插件无法提交 Opengraph 操作

> ID：12344859
> 
> 赞同：1
> 
> 时间：2012-09-10T02:52:56.597
> 
> 标签：wordpress, action, facebook-opengraph

我尝试按照[此处](https://developers.facebook.com/wordpress/)的说明进行操作，但我也参考了[此](http://www.socialmediaexaminer.com/facebook-plugin-for-wordpress-guide/)内容。我能够安装插件、创建我的 Facebook 应用程序、获取名称空间、图标等。甚至测试帖子都有效，但是当我点击“提交”时，我得到一个对话框，上面写着：

> 内置操作类型要求您提供说明，以在正常运行的测试环境中将应用的 Open Graph 集成作为您的 Open Graph 测试用户使用。未能提供有效的测试环境将导致您的操作类型被拒绝。

我试过在框中输入，但是当我单击继续时，我又得到了这个框。我想设置自动同步并放弃联网博客，但也许我应该继续使用可行的解决方案，因为这远非顺利。如何提交并批准发布文章操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-26T16:09:13.763

我实际上让 Facebook for WordPress 插件工作，但我并没有发现它实际上让我的博客变得更好。它似乎运行缓慢，有时意外停止工作，并没有导致流量增加。如果您想将您的帖子分享到 Facebook，并且您可以在点击发布后自己单击按钮，我推荐使用 Professional Share 插件。如果你想要相关的帖子，我推荐 Yet Another Related Post 插件。

Facebook for WordPress 插件和 JetPack 太大了，它们太多了，在我看来它们不值得运行，我从 2005 年开始就一直在使用 WordPress。仅仅因为一家大公司制作了官方插件，并不意味着这是最好的。

# search - 谷歌搜索在搜索结果中保持关键字的顺序

> ID：12344861
> 
> 赞同：-1
> 
> 时间：2012-09-10T02:53:04.337
> 
> 标签：search

我想在 google 的查询中搜索“nice beautiful”，如何**在搜索结果的文本中保持查询词的顺序，**并且查询不是短语。
例如。每个搜索结果都必须像这样的模式：“......不错......漂亮......”
BTW：*有没有一种方法可以检测两个单词是否是相邻的形容词*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T03:14:36.243

利用

```
"nice * beautiful" 
```

与引号。对一组结果使用多个星号或星号，中间有更多单词。
链接：[nice * beautiful](https://www.google.com/search?sugexp=chrome,mod=6&sourceid=chrome&ie=UTF-8&q=nice%20%2a%20beautiful) and [nice ***** *** beautiful](https://www.google.com/search?sugexp=chrome,mod=6&sourceid=chrome&ie=UTF-8&q=nice%20%2a%2a%2a%20beautiful#hl=en&sclient=psy-ab&q=nice%20%2a%2a%2a%2a%2a%2a%2a%2a%20beautiful&oq=nice%20%2a%2a%2a%2a%2a%2a%2a%2a%20beautiful&gs_l=serp.3..0i7i10i30j0i7i30l2j0i7i10i30.10608.11088.0.11420.5.5.0.0.0.3.131.607.0j5.5.0.les;..0.0...1c.1.3nUP6Mq6TGI&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&fp=4d0493350179db3e&biw=1317&bih=656) .

有关谷歌搜索中通配符的更多信息，请点击[此处](http://www.googleguide.com/wildcard_operator.html)。

# java - 在 X 中向上移动 3 个矩形，但保持矩形的顺序

> ID：12344868
> 
> 赞同：0
> 
> 时间：2012-09-10T02:54:31.760
> 
> 标签：java, getresource

我在这里渲染了 3 个矩形。假设我想将它们全部移到线上但保持它们的顺序，我该怎么做？我尝试减去 Y 和高度而不是添加 Y 但正如预期的那样，下部矩形位于顶部，中间位于中间，顶部位于底部

前：

[z http://screensnapr.com/e/Lljb6S.png](http://screensnapr.com/e/Lljb6S.png)

之后： [z http://screensnapr.com/e/EgWID2.png](http://screensnapr.com/e/EgWID2.png)

那么是否有任何简单的解决方案可以将它们呈现在上方，而不必更改所有值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T03:23:09.967

你只希望你的盒子停留在 X 轴上，然后你需要通过所有高度的总和以及蓝色盒子和轴之间的距离来提升所有这些盒子 [就是这个`blueBox.y`]。

所以用一点伪代码：

```
double totalHeight = box1.height + box2.height + box3.height + Math.abs(box1.y);

for(box in boxes){

    box.y -= totalHeight;

} 
```

关键是你不能在不参考其他盒子的情况下说明单个盒子的位置——你需要那个总和。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T03:34:16.397

据我从您的问题中了解到，您想抬起这些矩形。

假设您想按`Z`像素增加它们。

那么第一个矩形的坐标将是：

`Y= Y- Z`

我希望我能理解你的问题:)

# c++ - 在 Mac 上运行 CDT Eclipse 时出错

> ID：12344871
> 
> 赞同：1
> 
> 时间：2012-09-10T02:54:57.083
> 
> 标签：c++, eclipse, macos

我通过 Eclipse 中的安装软件选项安装了 CDT 包，之后，我在我的 Mac 上使用 Xcode 安装了命令行工具。我在 Mountain Lion 上运行 Eclipse Juno。

安装命令行工具后，我导出了路径：

导出 CC=/usr/bin/gcc 导出 CC=/usr/bin/g++

在 Eclipse 中，自动生成的 HelloWorld 可执行项目和自动工具出现此错误：

```
Error 127 occured while running autoreconf
make: *** No rule to make target 'all'. 
```

根据我的发现，第二个与 g++ 有关，但我不确定问题是什么。

我会很感激任何帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-31T16:16:18.293

Hopefully you've installed the XCode command line tools. Also you might need to configure the project.

Ideally you invoke aclocal, automake --add-missing and then autoconf. Then run configure and make. You might need the -i option for autoconf.

# .net - 使用 Visual Basic 扫描 Wifi 网络

> ID：12344874
> 
> 赞同：3
> 
> 时间：2012-09-10T02:55:10.900
> 
> 标签：.net, vb.net, networking, wifi

有人可以告诉我（或一个例子）如何使用 Visual Basic 在 wifi 网络中扫描/连接吗？（VB.NET 2010）

我用谷歌搜索了它，但没有发现任何有用的东西。

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T02:58:40.990

看看[托管 Wifi API](http://managedwifi.codeplex.com/)。它是原生 Wifi API 的包装器，使其更易于交互。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-12-03T14:12:07.633

这只会在消息框中显示输出这不是你要找的，但它会给你一个想法。

```
Public Class Form1

    Private Sub btnScan_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnScan.Click
        Dim proc As New System.Diagnostics.Process()

        proc.StartInfo.FileName = "netsh"
        proc.StartInfo.Arguments = "wlan show networks mode=bssid"
        proc.StartInfo.RedirectStandardOutput = True
        proc.StartInfo.UseShellExecute = False
        proc.Start()
        MsgBox(proc.StandardOutput.ReadToEnd())
    End Sub
End Class 
```

# android - 安卓。如何调出WiFi

> ID：12344878
> 
> 赞同：1
> 
> 时间：2012-09-10T02:56:19.077
> 
> 标签：android, android-wifi

我有一个运行 Android 的嵌入式模块，并且操作系统在大约 5 分钟不活动后断开 WiFi。如果我随后运行任何使用网络连接的应用程序，WiFi 将保持关闭状态，并且图标不会显示在状态栏中。我必须进入设置和 WiFi 设置才能恢复 WiFi。

我有一个应用程序必须通过 WiFi 连接定期发送数据。如果我在 WiFi 处于活动状态的情况下启动程序并每 2-3 分钟发送一次数据，WiFi 将保持活动状态并且永远不会断开连接。如果我让 WiFi 断开连接然后尝试发送，它永远不会恢复。在代码中，调用：

```
 wifi.isWifiEnabled() 
```

始终返回 true，但图标仍然隐藏，表示 WiFi 未连接。我试图从代码中调用 reconnect() 作为带有按钮的测试，但 WiFi 从未出现。

从终端调试端口，我可以键入 IFCONFIG WLAN0 UP 并且 WiFi 连接到 AP。

我可以拨打任何电话会导致 WiFi 重新连接吗？除了检测 TCP/IP 连接失败之外，我有什么方法可以实际检测到 WiFi 已断开连接？

为了响应下面的请求，我添加了以下代码片段和 LOGCAT 输出

```
 wifi = (WifiManager) getSystemService(Context.WIFI_SERVICE);

    wifiLock = wifi.createWifiLock(WifiManager.WIFI_MODE_FULL, "Mini210-Lock");
    if(!wifiLock.isHeld())
    {
        wifi.setWifiEnabled(true);
        wifi.reconnect();
        // wifi.reassociate(); // Also try this!!
        wifiLock.acquire();    // Keep system alive
        Log.i("Alarm System", "WiFi Lock Acquired");
    } 
```

运行上述代码时，Logcat 显示如下。

```
 09-10 22:43:25.273: I/Alarm System(611): WiFi Lock Acquired
    09-10 22:43:25.417: I/ActivityManager(91): Display axon.alarm.system/.AlarmSystemActivity: +15s198ms (total +4h23m59s645ms)
    09-10 22:43:31.636: W/wpa_supplicant(133): Failed to initiate AP scan.
    09-10 22:43:41.636: W/wpa_supplicant(133): Failed to initiate AP scan. 
```

当我在调试监控端口输入ifconfig wlan0 up时，logcat中出现如下（部分重复输出已被删除）

```
 09-10 22:56:12.726: I/wpa_supplicant(133): CTRL-EVENT-SCAN-RESULTS  Ready
    09-10 22:56:12.726: I/wpa_supplicant(133): Trying to associate with 00:22:75:32:a9:47 (SSID='kpk_mobile' freq=2412 MHz)
    09-10 22:56:20.976: D/dhcpcd(623): checking 192.168.1.123 is available on attached networks
    09-10 22:56:20.976: D/dhcpcd(623): sending ARP probe (1 of 3), next in 1.73 seconds
    09-10 22:56:22.710: D/dhcpcd(623): sending ARP probe (2 of 3), next in 1.00 seconds
    09-10 22:56:23.714: D/dhcpcd(623): sending ARP probe (3 of 3), next in 2.00 seconds
    09-10 22:56:25.718: D/dhcpcd(623): leased 192.168.1.123 for 86400 seconds
    09-10 22:56:25.718: D/dhcpcd(623): adding IP address 192.168.1.123/24
    09-10 22:56:25.718: D/dhcpcd(623): adding route to 0.0.0.0/0 via 192.168.1.1
    09-10 22:56:25.730: D/dhcpcd(623): executing `/system/etc/dhcpcd/dhcpcd-run-hooks', reason BOUND
    09-10 22:56:25.773: D/dhcpcd(623): forking to background
    09-10 22:56:25.804: V/WifiStateTracker(91): DhcpHandler: DHCP request succeeded
    09-10 22:56:25.804: V/WifiStateTracker(91): IP configuration: ipaddr 192.168.1.123  gateway 192.168.1.1 netmask 255.255.255.0 dns1 192.168.1.1 dns2 0.0.0.0 DHCP server 192.168.1.1 lease 86400 seconds
    09-10 22:56:25.816: I/TelephonyRegistry(91): notifyDataConnection: state=0 isDataConnectivityPossible=false reason=dataDisabled interfaceName=null networkType=0
    09-10 22:56:25.828: D/WifiWatchdogService(91): (android.server.ServerThread) kpk_mobile (00:22:75:32:a9:47) does not require the watchdog
    09-10 22:56:25.843: V/FTPDroid(356): EventsReceiver: NETWORK_STATE_CHANGED_ACTION (exists: true, connected: true)
    09-10 22:56:25.863: D/Tethering(91): MasterInitialState.processMessage what=3
    09-10 22:56:25.902: I/GTalkService(278): [ServiceAutoStarter] --- connectivity changed
    09-10 22:56:25.902: I/GTalkService(278): [ServiceAutoStarter] --- start GTalk   service ---
    09-10 22:56:27.789: D/dhcpcd(647): sending ARP announce (1 of 2), next in 2.00 seconds
    09-10 22:56:29.789: D/dhcpcd(647): sending ARP announce (2 of 2)
    09-10 22:56:29.789: D/dhcpcd(647): renew in 43196 seconds 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T02:59:53.463

```
WifiManager wifiManager = (WifiManager) this.getApplicationContext()
                .getSystemService(Context.WIFI_SERVICE);
wifiManager.setWifiEnabled(true); 
```

试试这个，不知道行不行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T03:57:36.187

在清单中使用此权限

```
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE"></uses-permission>
<uses-permission android:name="android.permission.UPDATE_DEVICE_STATS"></uses-permission>
<uses-permission android:name="android.permission.CHANGE_WIFI_STATE"></uses-permission> 
```

使用以下命令将其状态设置为 ON：

```
wifiManager = (WifiManager) this.getSystemService(Context.WIFI_SERVICE); 
wifiManager.setWifiEnabled(true); 
```

# solr - 去除非数字字符并转换为浮点字段

> ID：12344886
> 
> 赞同：1
> 
> 时间：2012-09-10T02:58:18.390
> 
> 标签：solr, filter

我正在尝试使用 copyField 命令将包含数值但具有一些关联文本的文本字段放入可以进行范围过滤的数字字段中。

例如。正常值 1.3 或 200 脏值 200cc 或 1,500

是否可以设置使用过滤器去除非数字字符的浮点字段类型？

如果我这样定义，过滤器似乎没有处理

```
 <fieldType name="floatNoText" class="solr.TrieFloatField" >
    <filter class="solr.PatternReplaceFilterFactory" pattern="[^0-9.]" replacement="" replace="all"/>
    </fieldType> 
```

如果我用分析器定义它：

```
 <fieldType name="floatNoText" class="solr.TrieFloatField" >
        <analyzer>
    <filter class="solr.PatternReplaceFilterFactory" pattern="[^0-9.]" replacement="" replace="all"/>
    </analyzer>
    </fieldType> 
```

我收到以下错误：

严重：org.apache.solr.common.SolrException：没有类或标记器和过滤器列表的分析器

有没有办法设置一个数字字段，以便您可以对其应用过滤器？或者我可以让源字段将数据的剥离版本呈现给复制字段吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T10:25:23.733

我猜他希望该字段为 TrieFloatField 类型，因为它将运行范围查询等，这将比它只是一个文本字段更高效。

因此，一种方法是使用[更新处理器](http://wiki.apache.org/solr/UpdateRequestProcessor)，您可以在那里进行清理，并将正确的数值插入到字段中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T08:03:24.743

尝试以下字段类型：-

```
<fieldType name="numericOnly" class="solr.TextField" sortMissingLast="true" omitNorms="true">
  <analyzer>
    <tokenizer class="solr.KeywordTokenizerFactory"/>
    <filter class="solr.LowerCaseFilterFactory" />
    <filter class="solr.PatternReplaceFilterFactory" pattern="[^0-9]+" replacement="" replace="all" />
  </analyzer>
</fieldType> 
```

这应该只存储数值并替换其他所有内容。您可以根据需要微调正则表达式。
此外，这仅适用于索引值。
该值不会被存储，因此检索到的值仍然是字母数字。

# sqlite - sql查询中的语法错误？

> ID：12344887
> 
> 赞同：-3
> 
> 时间：2012-09-10T02:58:38.953
> 
> 标签：sqlite, syntax, syntax-error, create-table

我想在数据库中创建一些表，以便我编写一些查询来创建表。但我收到一个错误“您的 sql 语句中存在语法错误”。我检查了我所有的查询，但我无法找到我错了的语法。在这里，我附上了我的 sql 查询，请告诉我查询有什么问题。提前致谢。

```
CREATE TABLE "WATER&SEWAGE" (
 "CUSTOMER_ID" VARCHAR,
 "POTABLE_WATER" VARCHAR,
 "HOT_WATER" VARCHAR,
 "SAFETY" VARCHAR,
 "T/P_VALVE+EXT" VARCHAR,
 "HEATER_TYPE" VARCHAR,
 "GAS_VENT_CONDITION" VARCHAR,
 "FIRE_BOX_CONDITION" VARCHAR,
 "PRESSURE" VARCHAR,
 "BACK_FLOW" VARCHAR,
  "PLUMBING_CONDITION" VARCHAR,
  "CABINET_CONDITION" VARCHAR,
  "3_COMP_SINK" VARCHAR,
  "WATER_HEATER" VARCHAR,
  "CLEAN_OUT_CONDITION" VARCHAR,
  "FLOOR_DRAIN" VARCHAR,
  "FLOOR_SINK" VARCHAR,
  "MAINTANANCE" VARCHAR,
  "COMMENTS" VARCHAR,
  "EVIDENCE_PHOTOS" VARCHAR)

CREATE TABLE "TIME_AND_TETMPERATURE_REL" ("CUSTOMER_ID" INTEGER, "THERMOMTE_AVAILABLE" VARCHAR, "THERMO_TYPE" VARCHAR, "COLD_TEMP" VARCHAR, "FOOD_TYPE1" VARCHAR, "PROPER_COOLING" VARCHAR, "FOOD_TYPE2" VARCHAR, "COMPLIANCE" VARCHAR, "FOOD_TYPE3" VARCHAR, "TPHC" VARCHAR, "HACCP" VARCHAR, "HOT_HOLDING_TEMP" VARCHAR, "FOOD_TYPE4" VARCHAR, "HOT_TEMP" VARCHAR, "FOOD_TYPE5" VARCHAR, "IMPROPER_REHEATING" VARCHAR, "FOOD_TYPE6" VARCHAR, "FOOD_OUT_OF_TEMP" VARCHAR, "WRITTEN_PLAN_FILES" VARCHAR, "EMPLOYEE_KNOWLEDGE" VARCHAR, "TIME_KEEPING_METHODS" VARCHAR, "HACCP_METHODS" VARCHAR, "CALIBRATION" VARCHAR, "COOKING_TEMP" VARCHAR, "EQUIP_CONDITION" VARCHAR, "COMMENTS" VARCHAR, "EVIDENCE_PHOTOS" VARCHAR)

CREATE TABLE "PROTECTION_FROM_CONTAMINATION" ("FOOD_ADULTERATION" VARCHAR, "FOOD_SPOILAGE" VARCHAR, "CONTAMINATION" VARCHAR, "FOOD_STORAGE" VARCHAR, "REFRIGRATORS" VARCHAR, "FREEZER" VARCHAR, "FIFO" VARCHAR, "DRY" VARCHAR, "DISHWASHING_CHEMICALS" VARCHAR, "CLEANING" VARCHAR, "SANITIZER" VARCHAR, "SUPPLY_EQUIPMENT" VARCHAR, "PESTICIDES" VARCHAR, "COMMENTS" VARCHAR, "EVIDENCE_PHOTOS" VARCHAR, "CUSTOMER_ID" INTEGER)

CREATE TABLE "PHYSICAL_FACILITIES_2" ("CUSTOMER_ID" VARCHAR, "CEILING" VARCHAR, "WINDOWS" VARCHAR, "SPOILS_STORAGE" VARCHAR, "DOORS" VARCHAR, "PERSONAL_LOCKERS" VARCHAR, "FLOORS" VARCHAR, "CONDITION" VARCHAR, "HANDICAP" VARCHAR, "SELF_CLOSING_ROOM" VARCHAR, "TOILETS" VARCHAR, "TOILET_PAPER" VARCHAR, "TOILET_CONDITION" VARCHAR, "VENTILATION_CONDITION" VARCHAR, "MENS" VARCHAR, "MEN'S_VENTILATION" VARCHAR, "MEN'S_FLOOR_DRAWN" VARCHAR, "MEN'S_TOILET_STALLS" VARCHAR, "MEN'S_HAND_SINK" VARCHAR, "MEN'S_TOWELS" VARCHAR, "WOMEN'S" VARCHAR, "WOMEN'S_VENTILATION" VARCHAR, "WOMEN'S_FLOOR_DRAWN" VARCHAR, "WOMEN'S_TOILET_STALLS" VARCHAR, "WOMEN'S_HAND_SINK" VARCHAR, "WOMEN'S_TOWELS" VARCHAR, "COMMENTS" VARCHAR, "EVIDENCE_PHOTOS" VARCHAR)

CREATE TABLE "PHYSICAL_FACILITIES_1" ("CUSTOMER_ID" VARCHAR, "LIGHTNING" VARCHAR, "KITCHEN" VARCHAR, "STORAGE" VARCHAR, "REFRIGRATION" VARCHAR, "JANITORIAL" VARCHAR, "INTERIOR" VARCHAR, "FIXTURE" VARCHAR, "FOOTCANDLES_1" VARCHAR, "FOOTCANDLES_2" VARCHAR, "FOOTCANDLES_3" VARCHAR, "FOOTCANDLES_4" VARCHAR, "FOOTCANDLES_5" VARCHAR, "EXTERIOR" VARCHAR, "WINDOWS" VARCHAR, "GLASS" VARCHAR, "SCREEN" VARCHAR, "COMMENTS" VARCHAR, "EVIDENCE_PHOTOS" VARCHAR)

CREATE TABLE "PEST_CONTROL" ("CUSTOMER_ID" VARCHAR, "WALL/CEILING_PIPES" VARCHAR, "SANITATION" VARCHAR, "DOORS" VARCHAR, "SELF_CLOSING" VARCHAR, "RODENT_PROOF" VARCHAR, "VERMIN_PROOFING" VARCHAR, "FOUNDATION" VARCHAR, "ATTIC_VENTS" VARCHAR, "WINDOWS" VARCHAR, "TYPE_SCREENS" VARCHAR, "COMMENTS" VARCHAR, "EVIDENCE_PHOTOS" VARCHAR)

CREATE TABLE "GENERAL_FOOD_SAFETY_REQ" ("CUSTOMER_ID" VARCHAR, "APPROVED_METHODS" VARCHAR, "DEFROST" VARCHAR, "FROZEN_FOOD" VARCHAR, "FOOD_WASHING" VARCHAR, "PRODUCE_1" VARCHAR, "FRUITS" VARCHAR, "GRAINS" VARCHAR, "VEGETABLES" VARCHAR, "SEPERATE_FROM_CONT" VARCHAR, "RAW" VARCHAR, "PRODUCE_2" VARCHAR, "STORED_BULK" VARCHAR, "STORAGE" VARCHAR, "FIFO" VARCHAR, "REFRIGRATAION" VARCHAR, "STORAGE_TEMP" VARCHAR, "HUMIDITY" VARCHAR, "COMMENTS" VARCHAR, "EVIDENCE_PHOTOS" VARCHAR)

CREATE TABLE "FOOD_SAFETY_CERTIFICATION" ("CUSTOMER_ID" INTEGER,"OWNER" VARCHAR,"MANAGER" VARCHAR,"EMPLOYEE" VARCHAR,"NAME1" VARCHAR,"NAT'L_REGISTRY1" VARCHAR,"PROMETRIC1" VARCHAR,"SERVESAFE1" VARCHAR,"EXPIRATION1" VARCHAR,"NAME2" VARCHAR,"NAT'L_REGISTRY2" VARCHAR,"PROMETRIC2" VARCHAR,"SERVESAFE2" VARCHAR,"EXPIRATION2" VARCHAR,"COMMENTS" VARCHAR,"FOOD_TEMP" VARCHAR,"DISHWASHER" VARCHAR,"DANGER_ZONE" VARCHAR,"COOLING_FOODS" VARCHAR,"THAWING" VARCHAR,"REHEATING" VARCHAR,"THERMOMETERS" VARCHAR,"FIFO" VARCHAR,"HANDWASH" VARCHAR,"COOKING_TEMP" VARCHAR,"FOOD_POISONING_TYPES" VARCHAR,"EVEDENCE_PHOTOS" VARCHAR)

CREATE TABLE "FOOD_FROM_APPROVED_SOURCES" ("CUSTOMER_ID" VARCHAR, "RECEIPTS" VARCHAR, "DELIVERY_DOOR" VARCHAR, "AIR_CURTAIN" VARCHAR, "VELOCITY" VARCHAR, "OFF_LOAD" VARCHAR, "INSPECTS" VARCHAR, "RODENTS" VARCHAR, "WARNING" VARCHAR, "SHELL_FISH" VARCHAR, "GULF_OYSTER" VARCHAR, "FOOD_OUT_OF_TEMP" VARCHAR, "COMMENTS" VARCHAR, "EVIDENCE_PHOTO" VARCHAR)

CREATE TABLE "FOOD_FACILITY_SITE_FACTS" ("CUSTOMER_ID" INTEGER PRIMARY KEY  AUTOINCREMENT  NOT NULL  UNIQUE,"DBA" VARCHAR,"DISTRICT" VARCHAR,"CITY" VARCHAR,"ZIPCODE" VARCHAR,"ADDRESS" VARCHAR,"SEAT_NO" VARCHAR,"PHONE_NO" VARCHAR,"OWNER" VARCHAR,"PERSON_IN_CHARGE" VARCHAR,"WEBSITE" VARCHAR,"EMAIL" VARCHAR,"FACILITY_TYPE" VARCHAR,"SQ_FOOTAGE" VARCHAR,"NO_OF_SEATS" VARCHAR,"ALCOHOL_SALES" VARCHAR,"LTD_PREP" VARCHAR,"BUSINESS_LICENCE_NO" VARCHAR,"EXPIRATION" VARCHAR,"COMMENTS" VARCHAR,"EVIDENCE_PHOTOS" VARCHAR)

CREATE TABLE "FOOD_DISPLAY_SELF_SERVICE" ("CUSTOMER_ID" VARCHAR, "SELF_SERVICE" VARCHAR, "LIDS" VARCHAR, "UTENSILS" VARCHAR, "HOW_OFTEN_CHANGED" VARCHAR, "SCOOP" VARCHAR, "SNEEZ_GUARD" VARCHAR, "DISHES" VARCHAR, "CROSS" VARCHAR, "SENITATION" VARCHAR, "MAINTANANCE" VARCHAR, "MECHANICAL_CONDITION" VARCHAR, "SERVICE_OF_UTENSIL" VARCHAR, "TIME" VARCHAR, "PRPER_FOOD_LABELING" VARCHAR, "COMMENTS" VARCHAR, "EVIDENCE_PHOTOS" VARCHAR)

CREATE TABLE "EQUIPMENT/UTENSILS/LINES" ("CUSTOMER_ID" VARCHAR, "STORED_DISHES" VARCHAR, "CUPS" VARCHAR, "DAMAGED_DISHES" VARCHAR, "UTENSILS" VARCHAR, "LINES" VARCHAR, "COOLING_EQUIPMENT" VARCHAR, "COOK_WARE_STORAGE" VARCHAR, "CONDITION" VARCHAR, "STORAGE_LOCATION" VARCHAR, "NAPKINS" VARCHAR, "SANITATION" VARCHAR, "ADEQUATE_CAPACITY" VARCHAR, "HAZARDS" VARCHAR, "COMMENTS" VARCHAR, "EVIDENCE_PHOTOS" VARCHAR)

CREATE TABLE "EMPLOYEE_HEALTH_AND_HYGENE" ("CSTOMER_ID" INTEGER, "COMUNICABLE_DIESEASE" VARCHAR, "WIPING_BAGS" VARCHAR, "DISCHARGE" VARCHAR, "LOCKERS" VARCHAR, "PROPER_HAND_WASH" VARCHAR, "RESTROOM_CONDITION" VARCHAR, "HANDWASH_STATION" VARCHAR, "HAIR_RESTRAINT" VARCHAR, "GLOVES_USED" VARCHAR, "WOUND_CARE" VARCHAR, "FOOD_SAMPLE_TESTING" VARCHAR, "GARMENT_CONDITION" VARCHAR, "HEALTH" VARCHAR, "COMMENTS" VARCHAR, "EVIDENCE_PHOTOS" VARCHAR)

CREATE TABLE "DISH&WARE_WASHING" ("CUSTOMER_ID" INTEGER, "TYPE_OF_COMPARTMENT_SINK" VARCHAR, "PLUMBING_ISSUE1" VARCHAR, "QUATERNARY_AMMONIA" VARCHAR, "IODINE" VARCHAR, "HOT_WTR_SANIT_TEMP" VARCHAR, "PLUMBING_ISSUE2" VARCHAR, "HOT_WATER" VARCHAR, "TEMP" VARCHAR, "DISHWASHER_TYPE" VARCHAR, "WAQLL_CONDITION" VARCHAR, "SANITIZER_LEVELS" VARCHAR, "CHLORINE" VARCHAR, "SINK_OR_DISHWASHER" VARCHAR, "EVIDENCE_PHOTOS" VARCHAR)

CREATE TABLE "CORRECTIVE_ACTIONS" ("CUSTOMER_ID" VARCHAR, "CORRECTIVE_ACTIONS" VARCHAR)

CREATE TABLE "CONSUMER_ADVISORY" ("CUSTOMER_ID" VARCHAR, "TRUTH_IN_MENU" VARCHAR, "MAJOR_CHAIN" VARCHAR, "TRANS_FAT" VARCHAR, "SCHOOL" VARCHAR, "PROHIBITED" VARCHAR, "CALORIES" VARCHAR, "COMMENTS" VARCHAR, "EVEDINCE_PHOTOS" VARCHAR)

CREATE TABLE "COMPLAINS&ENFORCEMENTS" ("CUSTOMER_ID" VARCHAR, "PLAN_SUBMITTED" VARCHAR, "APPROVEL" VARCHAR, "CERTIFICATE_OF_OCCU" VARCHAR, "PRIOR_INSPEK_REPORT" VARCHAR, "LAST_INSPECTION_DATE" VARCHAR, "PERMIT_STATUS" VARCHAR, "POSTED" VARCHAR, "EXPIRATION" VARCHAR, "PERMIT_DISPLAYED" VARCHAR, "INSPECTION_REPORT_POSTING" VARCHAR, "COMMENTS" VARCHAR, "EVIDENCE_PHOTOS" VARCHAR) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T03:05:08.697

添加分号：[http ://sqlfiddle.com/#!5/5f70c](http://sqlfiddle.com/#!5/5f70c)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T08:25:02.990

您应该使用 SQLLite 语法。目前您正在使用 sql 语法。请查看 SQLLite 查询语法的文档。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T03:36:24.547

我看到了一些东西。最大的问题似乎是缺少分号。每当创建一个表 - 或任何 sql 语句 - 最后都需要一个分号。

另外，提几点建议。声明变量类型时，通常最好限制长度。例如，也许使用 VARCHAR(20) 代替 VARCHAR。同时，添加一些主键和外键，以便更好的关系和未来的查询。

举个例子：

```
CREATE TABLE "WATER&SEWAGE" (
"CUSTOMER_ID" VARCHAR(20) NOT NULL,
"POTABLE_WATER" VARCHAR(20),
 PRIMARY KEY('CUSTOMER_ID')) ENGINE InnoDB; 
```

在我写这篇文章的时候，我想我会使用 InnoDB，因为看起来你的数据库将主要是基于事务的。使用 InnoDB 代替标准的 MyISAM 可能是值得的。

在大多数应用程序中，您的数据库是整个站点的基础。值得花大量时间在第一次做正确的事情上。另外，在进入牌桌时，最好一次只做一个，直到问题解决为止。

# node.js - 茉莉花需要快递后如何存根？

> ID：12344896
> 
> 赞同：2
> 
> 时间：2012-09-10T03:00:14.387
> 
> 标签：node.js, express, jasmine, jasmine-node

当我想到我已经在这个文件的顶部包含了 express 时，我试图让下面的代码被测试。你能知道如何在 express 对象已经加载后对其进行修补吗？

```
var express = require('express')

Helper = (function() {                                                                           

  var HelperObject = function(params) {
    this.directories = params.directories;
  };

  HelperObject.prototype.addStaticPath = function(app) {
    for(i = 0; i < this.directories.length; i++) {                                               
      var static = express.static('/public');
      app.use(static);
    }
  };

  return HelperObject;
})(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T19:17:40.363

问题是，当您创建一个节点模块时，所需的模块绑定在模块的闭包中，您无法开始监视它，因为它在您的测试中不可见。

您可以在[Gently](https://github.com/felixge/node-gently#gentlyhijackrealrequire)中覆盖 require，但它会在您的代码中添加样板测试相关代码。

从文档：

> 返回一个新的 require 函数，它将对所有必需模块的引用捕获到轻轻的劫持中。
> 
> 要使用此功能，请在“my-module.js”中包含这样的一行。

```
if (global.GENTLY) require = GENTLY.hijack(require);

var sys = require('sys');
exports.hello = function() {
  sys.log('world');
}; 
```

> 现在您可以为上面的模块编写测试：

```
var gently = global.GENTLY = new (require('gently'))
  , myModule = require('./my-module');

gently.expect(gently.hijacked.sys, 'log', function(str) {
  assert.equal(str, 'world');
});

myModule.hello(); 
```

# .net - Windows 8 和 MySQL？我有哪些选择？

> ID：12344903
> 
> 赞同：0
> 
> 时间：2012-09-10T03:01:52.753
> 
> 标签：.net, mysql, windows-8, microsoft-metro

我目前正在编写一个 Metro 应用程序，我想通过将托管 SQL 处理连接到我的 Web SQL DB 来在我的应用程序中集成托管 SQL 处理。

.NET 4.5 有哪些选择？

另外，如果您不赞成，请解释原因，我知道.NET 4 有一些 MySQL 连接器，但它显然与 4.5 不兼容

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T03:24:36.953

我强烈建议客户端程序不要通过 Internet 直接连接到数据库服务器，原因如下：

*   客户端库是围绕数据库在几毫秒之外的假设设计和构建的，尤其是非常健谈的协议（MSSQL 就是其中之一）。因此，短期操作可能需要相当长的时间。
*   这是一项安全责任，您不仅将数据库服务器暴露在 Internet 上，而且还在应用程序中嵌入了连接详细信息（例如密码）。
*   它不适合可扩展性。如果您引入多个负载平衡或故障转移数据库服务器，您将不得不重写您的客户端。
*   它还假设不会有任何连接问题。许多网络（尤其是移动网络）限制端口 80/443 之外的活动，以防止滥用其网络（例如僵尸用户发起攻击）。

在这些情况下，理想的解决方案是为您的数据库开发 Web 服务前端；然后，您的应用程序将与 Web 服务而不是您的数据库进行交互。这还有其他优点。

当然，客户端（尤其是移动客户端）应该使用数据缓存，以便应用程序在离线时继续工作。

回到主题：假设您仍然想使用直接连接，那么我不明白为什么 MySQL 客户端库无法在 4.5 上运行。您可以修改程序集的清单/配置，以便它可以在 .NET CLR 的未来版本上运行（如果该库使用自删除后的类型和成员或依赖于更改的行为，您只会遇到问题。.NET 框架有向后和向前兼容性的良好声誉）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T03:10:42.837

通过 App Store 分发的 Metro 应用程序是沙盒化的，因此如果您使用 MySQL，您会遇到问题。如果你想要一个简单的数据库，我推荐 SQLite。如果您想确保可移植性，请避免使用任何“混合模式”实现——这里有一个“纯”.NET 实现：[http ://code.google.com/p/csharp-sqlite/](http://code.google.com/p/csharp-sqlite/)

您也可以使用大量 GUI 工具来管理和设计 SQLite 数据库。

# java - Android拆分字符串或使用匹配器更改它

> ID：12344904
> 
> 赞同：1
> 
> 时间：2012-09-10T03:02:05.677
> 
> 标签：java, android, regex

我正在拆分这个字符串

```
String xml_getMembermob = "Art C. Cauyao<$@PERX@$>501912568<$@ENDPERX@$>Tessa Rose Brainard<$@PERX@$>510831686<$@ENDPERX@$>" 
```

我发现我不能在一个简单的问题上拆分这种字符串，所以我创建了这段代码

```
String re1=".*?"; 
String re2="(<\\$@ENDPERX@\\$>)";
Pattern p = Pattern.compile(re1+re2,Pattern.CASE_INSENSITIVE | Pattern.DOTALL);
StringBuffer sb = new StringBuffer();
Matcher m = p.matcher(xml_getMembermob);
if (m.find())
{
   String tag1=m.group(1);
   Log.i("returned string get", ""+tag1); 
   String replacement = "$1 try $2";
   m.appendReplacement(sb, replacement);
   String asa = sb.toString();
   Log.i("buffered string" + "",asa);
    //m.appendReplacement(myStringBuffer,"wew");
} 
```

现在在我在这部分出现错误之前

```
m.appendReplacement(sb, replacement); 
```

我有日志说

```
09-10 10:53:44.878: I/returned string get(1198): <$@ENDPERX@$> 
```

所以我可以得出结论，上面的代码是有效的。

你能帮我拆分这个字符串或更改它的一些单词以便我可以轻松拆分它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T04:52:19.020

要在文本中查找模式并替换它，请使用以下命令：

```
Pattern p = Pattern.compile("find and replace me!");
Matcher m = p.matcher("a very long string that contains zero or more find and replace me! pattern inside");
StringBuffer sb = new StringBuffer();
boolean result = m.find();
while(result) {
    m.appendReplacement(sb, "I found you!");
    result = m.find();
}
m.appendTail(sb);
String strWithLink = sb.toString(); 
```

此代码将在您的字符串中搜索并替换所有“查找并替换我！” 用“我找到你了！”。

# html - Spring WAR 中的 CSS 文件返回 404

> ID：12344905
> 
> 赞同：4
> 
> 时间：2012-09-10T03:02:07.950
> 
> 标签：html, css, jsp, maven

我有一个使用 Spring 和 Maven 构建的 Java EE 应用程序。它具有通常的项目结构。这是层次结构的一部分。

```
MyApplication
    src
        main
            webapp
                WEB-INF
                    layout
                        header.jsp
                styles
                    main.css 
```

我想在我的 JSP 中包含那个 CSS 文件。我有以下标签。

```
<c:url var="styleSheetUrl" value="/styles/main.css" />
<link rel="stylesheet" href="${styleSheetUrl}"> 
```

当我部署应用程序时，找不到 CSS 页面。当我查看页面源时，href 是`/MyApplication/styles/main.css`. 查看 WAR 内部，有一个`/styles/main.css`. 但是，当我尝试直接在浏览器中访问 CSS 文件时，我得到了 404。

我发现问题的原因是 Dispatcher Servlet 映射。映射如下所示。

```
<servlet-mapping>
    <servlet-name>Spring MVC Dispatcher Servlet</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping> 
```

我想 Dispatcher Servlet 不知道如何处理 CSS 请求。处理这个问题的最佳方法是什么？我宁愿不必更改所有请求映射。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-10T03:33:25.643

您需要配置 Spring 以将[静态资源](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/mvc.html#mvc-config-static-resources)（CSS、JS、图像）与对您的应用程序的 servlet 请求分开处理。为此，请将您的 Spring 配置配置为通过单独的顶级目录（例如“static”）将请求映射到静态文件：

```
<!-- Where to load static resources (css, js, images) -->
<mvc:resources mapping="/static/**" location="/" /> 
```

然后更改您的 JSP 以使用路径`/static/styles/main.css`。

请注意，约定要求您将“样式”目录命名为“css”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-04-25T19:36:02.580

在 web.xml 中添加以下内容

```
<servlet-mapping>
  <servlet-name>default</servlet-name>
  <url-pattern>*.css</url-pattern>
</servlet-mapping>
<servlet-mapping>
  <servlet-name>default</servlet-name>
  <url-pattern>*.js</url-pattern>
</servlet-mapping> 
```

并使用以下内容包含您的CSS

```
<link rel="stylesheet" href="styles/main.css"> 
```

# c - 当使用 copy_to_user 时，它给出了错误的地址

> ID：12344910
> 
> 赞同：1
> 
> 时间：2012-09-10T03:03:42.277
> 
> 标签：c, linux-kernel, kernel

我正在尝试添加一个 proc 文件以从内核中读取一些信息。但是当我尝试`cat`从 proc 文件中获取信息时，它会给出“错误地址”错误。

```
int proc_read(char *buffer, char **starter, off_t off, int count, 
              int *eof, void *data)
{

    if (off > 0)
    {
        *eof = 1;
        return 0;
    }

    if (copy_to_user(buffer, info_str, info_str_size))
    {
        return -EFAULT;
    }

    return info_str_size;
} 
```

之后`insmod`，使用`cat`读取proc文件，却报bad address错误；`info_str`是一个全局`char`数组。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T08:04:08.367

您的问题的答案非常简单。在`proc_read`不需要使用的函数中`copy_to_user`：一个简单的函数就`memcpy`可以完成这项工作，因为缓冲区存在于内核内存中。但是，如果您正在创建一个`proc_write`函数，则确实需要使用`copy_from_user`，因为在这种情况下，缓冲区位于用户内存中。

一个提示是，您可能还应该发出`EOF`成功的信号。这将使您的函数无需被调用两次。

以下应该足够了：

```
int proc_read(char *buffer, char **starter, off_t off, int count,
              int *eof, void *data)
{
    if (off > 0)
    {
        *eof = 1;
        return 0;
    }

    memcpy(buffer, info_str, info_str_size);
    *eof = 1;
    return info_str_size;
} 
```

您还应该注意，这种写入文件条目的方式非常古老，您应该避免使用它。该`seq_file`界面不易出错（并且可以与越来越少的寻呼机一起使用）。如果您有兴趣，请查看[http://lwn.net/Articles/22355/ 。](http://lwn.net/Articles/22355/)

# jpa - OpenJPA 是否适用于 SQL Server IDENTITY？

> ID：12344912
> 
> 赞同：0
> 
> 时间：2012-09-10T03:03:58.900
> 
> 标签：jpa, openjpa

我正在使用 SQL Server 2008，OpenJPA 2.2

持久性设置可以正常`findAll()`工作。

我试过了：

```
@Id
@GeneratedValue(strategy = GenerationType.IDENTITY)
private int id = 0; 
```

并坚持

```
public void persist()
{
    EntityManager em = entityManager();
    try
    {
        em.persist(this);
    }
    catch (Exception ex)
    {
        System.out.println(ex);
    }
    finally
    {
        em.close(); 
    }
} 
```

结果也不例外，但没有插入数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T14:08:01.823

也许您需要一个事务来提交数据？

```
try
    {
        em.getTransaction().begin();
        em.persist(this);
        em.getTransaction().commit();
    }
    catch (Exception ex)
    ... 
```

# php - 通过相同id的其他表中其他行的值更新表的行

> ID：12344916
> 
> 赞同：1
> 
> 时间：2012-09-10T03:04:25.013
> 
> 标签：php, mysql, sql-update, jointable

我想通过表中`contracts`的值更新表，`contracts_history`其中两个 id 都相同。

我写了这段代码但不工作：

```
function recover_contract($contract_id)
{
$sql = "UPDATE contracts SET ROW = (SELECT * FROM contracts_history WHERE contracts.ID = contracts_history.ID)";
$result = $this->update($sql);
return $result;
} 
```

**更新：**
我使用此代码

```
update 
contracts a, 
contracts_history b 
set 
a.name_surname=b.name_surname 
```

但是我的表有 64 个结构，对于复制所有数据而没有所有结构的类型，没有任何解决方案吗？必须这样：

```
$sql = "INSERT INTO `contracts_history` SELECT * FROM `contracts` 
        WHERE id='$contract_id'"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T03:10:36.060

你可以试试这个作为你的查询吗？

```
$sql = "UPDATE contracts c 
        LEFT JOIN contracts_history h ON c.ID = h.ID 
        SET WHAT_YOU_WANT"; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T03:14:22.390

由于您要更新到一列，因此您`subquery`应该只返回一个值。

尝试，

```
UPDATE contracts 
SET ROW = (SELECT columnName
           FROM contracts_history 
           WHERE contracts.ID = contracts_history.ID
           LIMIT 1) 
```

或通过使用使用`JOIN`

```
UPDATE contracts a
       INNER JOIN contracts_history b
       ON a.ID = b.ID
SET    a.row = b.columnName 
```

**更新 1**

行。所以在这里，在使用子查询中的值更新的第一种类型上，我`LIMIT`在 select 语句中添加了因为你不能更新一个包含多个值的列，否则你会收到一条错误消息。在连接两个表的第二部分是两个表 `a.ID = b.ID`的关系。这定义了表如何相互关联。`SET a.row = b.columnName`,`columnName`是基本上表的值的来源`contracts_history`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-10T03:14:41.420

语法如下：

```
update 
    contracts a, 
    contracts_history b 
set 
    a.col1=b.col1, 
    a.col2=b.col2 
where 
    a.id=b.id 
```

不过，在那张纸条上，您没有在查询中指定 ID，这意味着它将更新历史表中的*所有行。*您可以像这样添加条件：

```
update 
    contracts a, 
    contracts_history b 
set 
    a.col1=b.col1, 
    a.col2=b.col2 
where 
    a.id=b.id 
    and a.id=3 
```

# android - 通过 Eclipse 在 Android XML 布局中编辑多个元素

> ID：12344919
> 
> 赞同：5
> 
> 时间：2012-09-10T03:05:54.203
> 
> 标签：android, eclipse, properties

我正在尝试在 xml 布局中编辑多个 textview。在安装 Juno 之前，我正在按 shift 按钮选择多个元素，并且所有属性都显示在属性视图上，因此我可以进行批量编辑。现在我在属性视图上拥有的一切； **ID、文本、提示、文本颜色、文本外观、文本大小、内容** 在这种特殊情况下，我想将它们的所有重力从无变为右。我想我在 eclipse 偏好上做错了什么或者错过了其他东西.. 需要帮助 thx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T21:26:39.680

我刚刚用 Eclipse 4.2.1 对其进行了测试。我打开了一个xml布局文件，选择了一堆TextView，然后右键单击并单击“属性”。所有属性都出现在属性视图中，我轻松地对它们进行了批量编辑。

# java - 从java中的树形图中检索n个值

> ID：12344926
> 
> 赞同：0
> 
> 时间：2012-09-10T03:08:36.687
> 
> 标签：java

我在我的 java 程序中使用树形图。程序的输出是一个排序好的映射如下

```
[cat=1, dog=1, pin=3, ball=4, mice=4..... and so on] 
```

我只想显示地图的前 3 个值，而不是显示整个地图。我希望我的输出如下

```
cat=1
dog=1
pin=3 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T03:10:54.120

添加一个计数变量，将其设置为零，并在达到三时退出循环：

```
int count = 0;
for (/* the loop that goes through all elements of the tree map...*/) {
    // Do your printing...
    count++;
    if (count == 3) break;
} 
```

我故意只发布一个骨架解决方案，假设这是一个家庭作业。

# php - imagepng 和 imagegif

> ID：12344927
> 
> 赞同：2
> 
> 时间：2012-09-10T03:08:56.553
> 
> 标签：php, gd

我需要一些关于 PHP GD 的帮助。这是我的一段代码。

```
 header("Content-type: image/gif");

    $image = imagecreatetruecolor(550, 20);
    imagealphablending($image, false);

    $col=imagecolorallocatealpha($image,255,255,255,127);
    $black = imagecolorallocate($image, 0, 0, 0);

    imagefilledrectangle($image,0,0,550,20,$col);
    imagealphablending($image, true);

    $font_path = 'font/arial.ttf';
    imagettftext($image, 9, 0, 16, 13, $black, $font_path, $lastlisten);
    imagesavealpha($image, true);

    imagepng($image); 
```

问题是当我使用 imagepng 时，它可以像这样很好地显示 png。![在此处输入图像描述](../Images/f46e43f720c40a164ad9de1b718a38ae.png)

但如果我改用 imagegif，它就会变成这个。 ![在此处输入图像描述](../Images/7db44428e6e4f341e2c4f9a15cfdb1e1.png)

我确实尝试过为 gif 和 png 使用不同的标题。imagegif 的结果仍然相同。问题是如何才能正确显示 GIF 版本？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T08:06:54.200

GIF 图像最多支持 256 种颜色。最重要的是，它只支持索引透明度：一个像素可以是 100% 不透明或 100% 透明。

另一方面，PNG 支持真实（数百万）彩色图像并支持 Alpha 通道透明度。这意味着一个像素可以是 100% 不透明、100% 透明或介于两者之间的。

您提到的 PNG 图像可能具有部分透明的边缘，因此浏览器可以轻松地将这些像素与背景颜色混合，从而产生平滑的效果。PNG是一个更好的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-10T08:01:31.293

第一个问题：你的角色很丑：那是因为你在使用 imagecreatetruecolor 时需要设置一个颜色较少的调色板。

```
$image = imagecreatetruecolor(550, 20);
imagetruecolortopalette($image, true, 256); 
```

应该解决这个问题。

第二个问题：没有透明度。

正如您在[PHP 手册](http://php.net/manual/en/function.imagesavealpha.php)中看到的那样，

> imagesavealpha() 设置标志以在保存 PNG 图像时尝试保存完整的 alpha 通道信息（与单色透明度相反）。

此功能不适用于 GIF 文件。

您可以改用[imagecolortransparent](http://fr.php.net/manual/en/function.imagecolortransparent.php)，但这并不完美，因为字体具有抗锯齿功能以使其边框更甜美。

这是我的代码：

```
<?php

$lastlisten = "test test test test test test";

error_reporting(E_ALL);
header("Content-type: image/gif");

$image = imagecreatetruecolor(550, 20);
imagetruecolortopalette($image, true, 256);

$transparent=imagecolorallocatealpha($image,255,255,255,127);
imagecolortransparent( $image, $transparent);
imagefilledrectangle($image,0,0,550,20,$transparent);

$black = imagecolorallocate($image, 0, 0, 0);
$font_path = dirname(__FILE__) . '/font.ttf';
imagettftext($image, 9, 0, 16, 13, $black, $font_path, $lastlisten);

imagegif($image); 
```

结果[在这里](http://home.fuz.org/tests/test.php)

希望这可以帮助。

# android - 我应该为这个 android UI 使用什么控件？

> ID：12344935
> 
> 赞同：2
> 
> 时间：2012-09-10T03:10:25.963
> 
> 标签：android, user-interface, components

我正在开发一个android应用程序，一页是这样的：

![在此处输入图像描述](../Images/5d5967ae38a434d7173573628516f973.png)

您可以在右上方看到一个“设置”按钮。单击它时，会从左侧弹出一个面板。

我是 android 新手，我不知道我应该使用哪些组件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T04:57:25.633

它被称为`side navigation`或`sliding menu`。我相信是由 facebook 介绍的。

这是如何设计的答案：

[Android Facebook 样式幻灯片](https://stackoverflow.com/questions/8657894/android-facebook-style-slide/8673805#8673805)

和项目代码：

[https://github.com/gitgrimbo/android-sliding-menu-demo](https://github.com/gitgrimbo/android-sliding-menu-demo)

我不仅在此处搜索并粘贴了链接，实际上我在我的应用程序中这样做了，它很容易实现并且效果很好

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T04:59:57.410

您可以使用 SlidingDrawer 如下：

```
<SlidingDrawer
    android:id="@+id/my_sliding_drawer"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_alignParentBottom="true"
    android:layout_margin="0dp"
    android:content="@+id/content"
    android:handle="@+id/handle" >

    <ImageButton
        android:id="@+id/handle">
        <!-- Your handle content comes here. -->
    </ImageButton>    

    <LinearLayout
        android:id="@+id/content">
        <!-- Your drawer contents come here. -->
    </LinearLayout>

</SlidingDrawer> 
```

# jquery - 我如何在我的 div 中附加我的图像名称作为文本，因为它使用我的预加载器函数预加载

> ID：12344942
> 
> 赞同：0
> 
> 时间：2012-09-10T03:11:50.677
> 
> 标签：jquery, image, append, preloader, preload

我有一个 javascript 预加载器，它将图像数组加载到我的页面，然后在完成后执行回调函数。

在预加载期间，我想将当前预加载的图像附加到加载框中的 HTML 页面。这是我当前的代码。当前代码不适用于每个图像，而只是显示最后加载的图像的名称。我可以做些什么来修复我的预加载器函数，以便在每个循环中将正确的名称附加到我的 div 中？

```
 // Usage: $(['img1.jpg','img2.jpg']).preloadImages(function(){ ... });
// Callback function gets called after all images are preloaded
$.fn.preloadImages = function(callback) {

  checklist = this.toArray();

  this.each(function() {
    $('div.circleText').html('<p>' +  this + '</p>');

    $('<img>').attr({ src: this }).load(function() {

      checklist.remove($(this).attr('src'));
      if (checklist.length == 0) { callback(); }
    });
  });
};

$([

'../img/about/01-inner-small.png',
'../img/about/01-small.png',
'../img/about/blue-gear.png',
'../img/about/orange-gear.png',
'../img/about/slimeGoblin.png',
'../img/about/03-small.png',
'../img/about/slideshow_back.png',
'../img/about/services_octopus.png',
'../img/about/services_pinkblur.png',
'../img/about/services_blur.png',
'../img/about/services_seahorse.png',
'../img/about/services_coral.png',
'../img/about/water3.png',
'../img/about/water2.png',
'../img/about/water1.png',
'../img/about/02-inner.png',
'../img/about/slime-glow.png',
'../img/about/02_longPhoto.png',
'../img/about/photo1.jpg',
'../img/about/orange-gear.png',
'../img/about/blue-gear.png',
'../img/about/01-small.png',
'../img/about/01.png',
'../img/about/slime-transparent.png',
'../img/about/slime.png',
'../img/about/02-small.png',
'../img/about/02.png',
'../img/about/01_head.png',
'../img/about/services_squid.png',
'../img/about/services_crabs.png',
'../img/about/02-small.png'

]).preloadImages(function(){ 
    // $('#loading').transition({ opacity: 0 }, 1000,'in-out',      
    //  function()
    //  { 
    //      $('#loading').hide();
    //  })
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T03:45:01.377

您的代码运行良好，只是因为它发生得如此之快，您没有意识到这一点。替换以下行：

```
$('div.circleText').html('<p>' + value + '</p>'); 
```

有了这个：

```
setTimeout(function() {
    $('div.circleText').html('<p>' + value + '</p>');
}, 1000 + (index * 100)); 
```

这将确保您在处理数组时看到每个数组对象。当然，您可以根据需要调整每个可见的时间。

[**演示**](http://jsfiddle.net/xHe7E/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T04:47:37.577

上面的解决方案没有解决问题，只是显示。

正确答案在这里：http: [//jsfiddle.net/ES8kw/1/](http://jsfiddle.net/ES8kw/1/)

`.load()`功能不好。

```
.load(function() {
                delete checklist[$.inArray($(this).attr('src'),checklist)];
                $('#loading').html('<p>' + $(this).attr('src') + '</p>');
                var done = 0;
                $.each(checklist,function(i){ if(typeof checklist[i] == "undefined") { done++; }})
                if (checklist.length == done) {
                  callback();
              }
          }); 
```

所有这些都需要包装在一个`setTimeout`

# magento - 迁移到本地主机后，我的 magento 在链接 n 图像显示中有一点错误

> ID：12344944
> 
> 赞同：1
> 
> 时间：2012-09-10T03:12:16.723
> 
> 标签：magento, magento-1.4, magento-1.6

在 localhost 中迁移后，我的新 magento 出现问题，我的图像 n 前端中的几个链接未显示，当我尝试将链接位置从旧 n 新 magento 复制到时，n 结果不同。我旧的不同复制链接是：

```
http://www.test.com/customer/account/login/ 
```

n 我的新复制链接是：

```
http://www.test2.com/%3C?=$this-%3EgetUrl( 
```

但是当我试图在 中查看脚本时`header.phtml`，脚本是相同的。这里的脚本..

…… `$this->getUrl('customer/account/login')?>' title='Login'>Login<`_

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T09:19:09.027

您的旧链接服务器支持 php 短标签，而您的新链接服务器不支持。检查新服务器中的 php.ini 文件并确保它存在：`short_open_tag=On`

另一种解决方案是，全部替换`<?=`为`<?php echo`，您应该一切顺利。

# php - 上传时获取图片名称

> ID：12344945
> 
> 赞同：2
> 
> 时间：2012-09-10T03:12:16.807
> 
> 标签：php, ajax, uploading

我的表单输入如下：

> - - - - - - - - - - - - -形式 - - - - - - - - - - - - -
> 
> 标题：[文本框]
> 
> 类别：[组合框]
> 
> 内容：[文字区]
> 
> 图片：[多选文件]
> 
> [按钮]
> 
> ------------------------结束表格------------------------

我在插入数据时使用 PHP 和 AJAX，但在上传时遇到问题。我无法获取用于上传和输入数据库的文件名（图像名称）。

这是我的 AJAX 脚本的一小部分：

```
data = "action=add&kode="+kode+"&file="+image+"&title="+title+"&categori="+categori+"&content="+content;
$.ajax({
    url: "action/prosesPOST.php",
    type: "POST",
    data: data,
    cache: false,
    success: function(msg){
        if(msg=="yes"){
        }else{
            $("#status").html("Failed...");
        }
        $("#status").html("");
        $("#loading").hide();
        $("#form-box").fadeOut("fast");
        $("#table").load('action/prosesPOST.php?action=loaddata');
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-06T04:55:49.470

更新：

Ajax 无法处理“上传图像”，所以我使用隐藏的 iframe 方法，就像评论对我来说是最好的方式，

[喜欢这个方法](https://stackoverflow.com/questions/2909442/how-to-make-asynchronousajax-file-upload-using-iframe)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T14:02:15.190

发布您的文件的[jQuery 表单插件。](http://malsup.com/jquery/form/)

```
<form action="#" method="post" enctype="multipart/form-data">
    <input type="file" name="myfile"><br>
    <input type="submit" value="Upload File to Server">
</form>
<script src="jquery.js"></script>
<script src="jquery.form.js"></script>

(function() {

    $('form').ajaxForm({

   complete: function(xhr) {
    status.html(xhr.responseText);
   }
    }); 

})();       
</script>` 
```

# ruby-on-rails - 截断 - 清理后的意外结果（RedCloth.new（object））

> ID：12344946
> 
> 赞同：1
> 
> 时间：2012-09-10T03:12:26.773
> 
> 标签：ruby-on-rails, ruby, truncate, sanitize, redcloth

我有一些想要使用 RedCloth 输出的文本。我试图弄清楚这是如何工作的，但我无法得到我想要的结果。

**使用代码：**

```
truncate(sanitize(RedCloth.new("*some* interesting text")).to_html, length: 6) 
```

**结果：**

*一些*

**预期结果：**

**有些**我...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T03:15:07.787

我才意识到问题出在哪里。我没有注意我的代码。我需要用 sanitize 反向截断 :) 糟糕！

```
sanitize(truncate(RedCloth.new("*some* interesting text").to_html, length: 6, separator: " ")) 
```

这给了我我需要的结果。您还必须使用分隔符：“”以使其看起来干净。

# php - PHP catch 无法打开流：HTTP 请求失败！HTTP/1.1 401 未经授权

> ID：12344949
> 
> 赞同：0
> 
> 时间：2012-09-10T03:12:57.443
> 
> 标签：php, oauth, error-handling, oauth-2.0

我正在尝试执行以下操作。

当我尝试使用 oAuth 访问服务时，如果我收到错误，因为我使用了错误的密钥，我不想显示错误消息，而是将用户发送到身份验证页面。

但是使用 try catch fn 不起作用。

这是我的代码：

```
$url = 'https://api.soundcloud.com/me.json?'.http_build_query(array(
        'oauth_token' => $token,
    ));
    //
    try{
        $user = json_decode(file_get_contents($url));
        return array(
            'uid' => $user->id,
            'nickname' => $user->username,
            'name' => $user->full_name,
            'location' => $user->country.' ,'.$user->country,
            'description' => $user->description,
            'image' => $user->avatar_url,
            'urls' => array(
                'MySpace' => $user->myspace_name,
                'Website' => $user->website,
            ),
        );
    }
    catch(Services_Soundcloud_Invalid_Http_Response_Code_Exception $e)
    {
        log_message('error', 'EXCEPTION: '.$e);
        return FALSE;
    } 
```

我希望它返回用户数组或 FALSE。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-10T03:32:29.887

您可以查看此处以捕获 file_get_content 错误

[如何处理 PHP 中 file_get_contents() 函数的警告？](https://stackoverflow.com/questions/272361/how-can-i-handle-the-warning-of-file-get-contents-function-in-php)

这提供了不同的解决方案，例如查看响应标头

```
$content = @file_get_contents("http://www.google.com");
if (strpos($http_response_header[0], "200")) { 
   echo "SUCCESS";
} else { 
   echo "FAILED";
} 
```

# iphone - iOS：在控制台上收到此消息（不是错误） - 应用程序窗口应在应用程序启动结束时具有根视图控制器

> ID：12344950
> 
> 赞同：1
> 
> 时间：2012-09-10T03:13:17.630
> 
> 标签：iphone, ios, xcode, compiler-errors

当我构建我的应用程序时，它编译时没有任何问题或错误。但是当我运行它时，我在控制台中看到了这条消息：

```
Application windows are expected to have a root view controller at the end of application launch. 
```

这是我的 Appdelegate 的方法，我认为它可能会导致这种情况（基于我在 SO 上看到的其他帖子）

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions: (NSDictionary *)launchOptions

  self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
  // Override point for customization after application launch.
  self.window.backgroundColor = [UIColor whiteColor];

  PhotosViewController *viewController = [[PhotosViewController alloc] initWithNibName:nil bundle:nil];

  self.navigationController = [[UINavigationController alloc] initWithRootViewController:viewController];
  [self.window addSubview:self.navigationController.view];

  [self.window makeKeyAndVisible];

   return YES; 
```

这是我需要担心的事情吗？即使出现此消息，我的应用程序也会在模拟器中运行。

关于我应该做些什么来摆脱它的任何建议？我能做些什么来调试这个？

顺便说一句，我在 SO 上看到了其他带有类似错误消息的问题，但是，没有一个场景适用于我的，所以我发布了这个问题。它不是重复的:)

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T03:15:25.663

代替：

```
[self.window addSubview:self.navigationController.view]; 
```

利用：

```
self.window.rootViewController = self.navigationController; 
```

[您可以在文档](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UIWindow_Class/UIWindowClassReference/UIWindowClassReference.html#//apple_ref/doc/uid/TP40006817-CH3-SW33)中找到更多详细信息[`UIWindow`](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UIWindow_Class/UIWindowClassReference/UIWindowClassReference.html#//apple_ref/doc/uid/TP40006817-CH3-SW33)

# python - 以同步方式检测节拍和播放 (wav) 文件

> ID：12344951
> 
> 赞同：3
> 
> 时间：2012-09-10T03:13:32.563
> 
> 标签：python, audio-processing, beat-detection

我正在尝试使用[这种](http://archive.gamedev.net/archive/reference/programming/features/beatdetection/index.html)节拍检测算法在 python 中进行音频处理。我已经实现了上述文章中的第一个（非优化版本）。虽然它会打印一些结果，但我无法检测它是否能以某种准确度工作，因为我不知道如何用它播放声音。

目前，我`Popen`在进入计算循环之前使用歌曲异步启动我的媒体播放器，但我不确定这种策略是否有效并给出同步结果。

```
#!/usr/bin/python

import scipy.io.wavfile, numpy, sys, subprocess

# Some abstractions for computation
def sumsquared(arr):
    sum = 0
    for i in arr:
            sum = sum + (i[0] * i[0]) + (i[1] * i[1])

    return sum

if sys.argv.__len__() < 2:
    print 'USAGE: wavdsp <wavfile>'
    sys.exit(1)

numpy.set_printoptions(threshold='nan')
rate, data = scipy.io.wavfile.read(sys.argv[1])

# Beat detection algorithm begin 
# the algorithm has been implemented as per GameDev Article
# Initialisation
data_len = data.__len__()
idx = 0
hist_last = 44032
instant_energy = 0
local_energy = 0
le_multi = 0.023219955 # Local energy multiplier ~ 1024/44100

# Play the song
p = subprocess.Popen(['audacious', sys.argv[1]])

while idx < data_len - 48000:
    dat = data[idx:idx+1024]
    history = data[idx:hist_last]
    instant_energy = sumsquared(dat)
    local_energy = le_multi * sumsquared(history)
    print instant_energy, local_energy
    if instant_energy > (local_energy * 1.3):
            print 'Beat'

    idx = idx + 1024
    hist_last = hist_last + 1024 # Right shift history buffer

 p.terminate() 
```

为了以时间同步的方式获得音频输出和算法（控制台）输出，我可以对脚本进行哪些修改/添加？即当控制台输出特定帧的结果时，该帧必须在扬声器上播放。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T19:56:12.073

# 工作节拍检测代码（NumPy / PyAudio）

如果您使用的是 NumPy，此代码可能会有所帮助。它假设信号（用 PyAudio 读取）是 16 位宽的 Int。如果不是这种情况，请更改或删除 signal.astype() 并调整归一化分频器（此处为最大 int16）。

```
class SimpleBeatDetection:
    """
    Simple beat detection algorithm from
    http://archive.gamedev.net/archive/reference/programming/features/beatdetection/index.html
    """
    def __init__(self, history = 43):
        self.local_energy = numpy.zeros(history) # a simple ring buffer
        self.local_energy_index = 0 # the index of the oldest element

    def detect_beat(self, signal):

        samples = signal.astype(numpy.int) # make room for squares
        # optimized sum of squares, i.e faster version of (samples**2).sum()
        instant_energy = numpy.dot(samples, samples) / float(0xffffffff) # normalize

        local_energy_average = self.local_energy.mean()
        local_energy_variance = self.local_energy.var()

        beat_sensibility = (-0.0025714 * local_energy_variance) + 1.15142857
        beat = instant_energy > beat_sensibility * local_energy_average

        self.local_energy[self.local_energy_index] = instant_energy
        self.local_energy_index -= 1
        if self.local_energy_index < 0:
            self.local_energy_index = len(self.local_energy) - 1

        return beat 
```

用于 wav 读取或麦克风记录的 PyAudio 示例将为您提供所需的信号数据。有效地创建一个 NumPy 数组`frombuffer()`

```
data = stream.read(CHUNK)
signal = numpy.frombuffer(data, numpy.int16) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T19:42:48.020

## 一种更简单的非实时方法

我对将控制台输出与实时音频同步并不乐观。我的方法会简单一些。当您阅读并处理文件时，将样本写入新的音频文件。每当检测到节拍时，为您正在编写的音频添加一些难以错过的声音，例如响亮、短促的正弦音。这样，您就可以从听觉上评估结果的质量。

合成您的节拍指示器声音：

```
def testsignal(hz,seconds=5.,sr=44100.):
    '''
    Create a sine wave at hz for n seconds
    '''
    # cycles per sample
    cps = hz / sr
    # total samples
    ts = seconds * sr
    return np.sin(np.arange(0,ts*cps,cps) * (2*np.pi))

signal = testsignal(880,seconds = .02) 
```

在您的`while`循环中，如果检测到节拍，则将测试信号添加到输入帧，如果未检测到节拍，则保持帧不变。将这些帧写入文件并收听以评估节拍检测的质量。

这是[aubio](http://aubio.org/)库用来评估节拍检测结果的方法。[请参阅此处](http://aubio.org/aubioonset.html)的文档。特别感兴趣的是`--output`命令行选项的文档：

> 将结果保存在此文件中。该文件将在输入文件的模型上创建。结果由一个非常短的木块样本标记。

## 优化

由于 numpy 已经是一个依赖项，使用它的功能来加速你的算法。您可以将`sumsquared`函数重写为：

```
def sumsquared(arr):
    return (arr**2).sum() 
```

摆脱 Python for 循环并将这些计算下推到 C 代码中应该可以提高速度。

另外，请查看[这个问题](https://stackoverflow.com/q/4936620/1015178)或[这个问题](https://stackoverflow.com/q/8070349/1015178)，以了解如何使用该方法将`while`循环中的局部到瞬时能量比较矢量化。`numpy.lib.stride_tricks`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T18:54:07.397

一个不错的选择是尝试使用 portaudio (pyaudio) 来获取实时数据，然后您应该能够查看它是否匹配。

这是一个使用 pyaudio 麦克风中的 fft 的好例子：

[http://www.swharden.com/blog/2010-03-05-realtime-fft-graph-of-audio-wav-file-or-microphone-input-with-python-scipy-and-wckgraph/](http://www.swharden.com/blog/2010-03-05-realtime-fft-graph-of-audio-wav-file-or-microphone-input-with-python-scipy-and-wckgraph/)

# java - 使用浮点坐标绘制图像

> ID：12344952
> 
> 赞同：1
> 
> 时间：2012-09-10T03:13:49.253
> 
> 标签：java, image, draw, graphics2d

我想绘制一个使用分数坐标缓慢移动的图像，以便移动更平滑。图像非常小（5x7 像素）。我认为 Graphics2D 可能有一种方法可以使用抗锯齿在小数位置绘制图像。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T07:16:53.453

使用[`AffineTransform`翻译实例](http://docs.oracle.com/javase/7/docs/api/java/awt/geom/AffineTransform.html#getTranslateInstance%28double,%20double%29)绘制图像- 它接受双打。

# javascript - 使用 JavaScript 获取 Gridview 单元格值

> ID：12344955
> 
> 赞同：0
> 
> 时间：2012-09-10T03:14:05.213
> 
> 标签：javascript, asp.net

我有一个带有复选框列的gridview，我可以确定是否选中了一行。我的问题是我无法获得单元格值。我正在使用 JavaScript。我正在使用 JS，因为一旦获得单元格值，我就必须进行 ajax 调用。提前谢谢。这是我的代码：

```
 function newData(mode) {

        if (mode == 'edit') {
            var valid = false; 
            var gv = document.getElementById("myGridview"); 

            for (var i = 0; i < gv.all.length; i++) { 
                var node = gv.all[i]; 
                if (node != null && node.type == "checkbox" && node.checked) { 
                    valid = true; 
                    break; 
                } 
            } 
            if (!valid) { 
                alert("Invalid. Please select a checkbox to continue."); 
            } 

            return valid; 
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T08:45:33.543

请记住，当呈现为 HTML 时，您的 GridView 的 ID 会发生变化，因此您的 document.getElementById("myGridview") 应该更改为 document.getElementById(myGridview.ClientID) ，这将返回正确的 HTML 表名称。

尝试使用 Firebug 或 IE 开发工具调试 javascript。

快乐编码！！！

# javascript - 子类访问父类的闭包变量

> ID：12344967
> 
> 赞同：2
> 
> 时间：2012-09-10T03:15:53.620
> 
> 标签：javascript

我正在为我当前的项目使用 John Resig 的继承实现，我想知道是否有办法让子类也继承（访问）父类的闭包变量......

例如，我写了下面的类

```
var Foo = (function() {  
  var p = "im p";

  var Foo = Class.extend({  
    getp : function() {
       return p;
    }
  });

  return Foo;
})(); 
```

现在 Foo 类可以访问闭包中的变量 p 。Foo 的子类也是如此……

```
var Bar = Foo.extend({});  
var bar = new Bar;
bar.getp(); // "im p" 
```

这并不奇怪，因为 bar.getp 只是调用 Foo.getp，后者可以访问 p。但是，如果我覆盖 bar.getp

```
var Bar = Foo.extend({
  getp : function() {
    return p;
  }
}); 
```

现在当我执行 bar.getp() 时，它会抛出 p 未定义，因为 bar 无法访问它

我有几种方法可以让 bar 可以访问 p，但我认为它们有点尴尬，你认为最干净的方法是实现这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T03:21:40.400

`p`变量只定义在自执行匿名`Foo`函数的范围内，所以没有办法取回。

将其视为私有成员，它也仅在它声明的类中可用。

如果您只需要检索它 - 您可以这样做：

```
var Bar = Foo.extend({
  getp : function() {
    var p = Foo.prototype.getp.call(this);
    return p;
  }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T03:37:47.663

闭包范围由定义函数时范围内的任何内容组成。在这种情况下，定义`p`第一个时在范围内`getp`，但在`getp`定义第二个时不在范围内。所以不能参考`p`。事实上，您可能已经发现，`p`第一种方法引用的`getp`方法实际上对所有`Foo`对象（及其子类）都是通用的。

JavaScript 并不能很好地适用于“私有变量”。通常，开发人员最终会在不需要继承时使用闭包范围的变量，或者在需要继承时使用某种约定，例如添加下划线，如下所示：

```
var Foo = Class.extend({  
    _p : "i'm p",
    getp : function() {
        return this._p;
    }
 }); 
```

然后你可以毫无困难地进行子类化：

```
var Bar = Foo.extend({  
    getp : function() {
        return this._p;
    }
}); 
```

现在，我还应该指出，您的示例非常做作，并且设计得有点毫无意义。我的意思是，为什么要覆盖`getp()`也只是返回的东西`p`？如果您的意图是实际创建一个私有的静态属性`p`，那么您所拥有的应该可以正常工作。如果您想`p`在子类中访问，您应该只使用`getp`您有权访问的方法，如下所示：

```
var Bar = Foo.extend({  
    getpete : function() {
        return Foo.getp() + "ete"; 
        //You can also use this.getp() if you want, there's no difference.
    }
}); 
```

希望有帮助！

# python - 使用 zlib 支持从源代码构建 Python

> ID：12344970
> 
> 赞同：53
> 
> 时间：2012-09-10T03:16:14.477
> 
> 标签：python, python-3.x

在 Ubuntu 12.04 上从源代码构建 Python 3.2.3 时，zlib 模块不可用。

我从 python.org 下载了官方源代码分发，并尝试使用以下命令构建和安装它。

```
tar xfa Python3.2.3.tar.bz2
cd Python-3.2.3
./configure --prefix=/opt/python3.2
make
sudo make install 
```

make 命令输出包括以下内容。

```
Python build finished, but the necessary bits to build these modules were not found:
_curses            _curses_panel      _dbm            
_gdbm              _sqlite3           _ssl            
_tkinter           bz2                readline        
zlib 
```

运行`make install`并启动解释器后，`zlib`无法导入模块。

我确认该`zlib1g-dev`软件包已安装在我的系统上。

我还发现[了这个类似的问题](https://stackoverflow.com/questions/6169522/no-module-named-zlib)，它建议将`--with-zlib`标志添加到`./configure`命令中。但是，这会返回一个错误，即它是一个无法识别的选项并且没有效果。

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2013-02-21T23:01:06.510

我在 CentOS 6.3 和 python 3.2.3 上遇到了类似的问题

我通过以下方式解决了它：

编辑`/Modules/Setup`并取消注释该行：

```
zlib zlibmodule.c -I$(prefix)/include -L$(exec_prefix)/lib -lz 
```

切换到目录 /Modules/zlib：

```
./configure
make
sudo make install 
```

然后编译了我的 python3.2 源代码。

然后能够测试 import zlib 并且一切正常:)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-11-25T17:04:42.527

我正在使用 CentOS 6.6 并收到 zlib 错误。此处提出的其他答案均不适合我（包括 CentOS 6.3 中取消注释模块/设置中的一行的修复）。我已经使用以下命令修复了它。

```
yum groupinstall "Development tools"
yum install zlib-devel bzip2-devel openssl-devel ncurses-devel sqlite-devel readline-devel tk-devel gdbm-devel db4-devel libpcap-devel xz-devel 
```

然后配置和安装python如下：

```
./configure --prefix=/usr/local LDFLAGS="-Wl,-rpath /usr/local/lib"
make && make altinstall 
```

我现在可以毫无问题地在 /usr/local/bin/python2.7 中导入 zlib。

[这些说明根据此处找到的文章稍作修改。](http://toomuchdata.com/2014/02/16/how-to-install-python-on-centos/)

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-09-10T03:16:14.477

解决方案是安装 Ubuntu 软件包`dpkg-dev`。

```
sudo apt-get install dpkg-dev 
```

原因在[这里](http://fnch.users.sourceforge.net/pythononubuntu1104.html)解释。

简而言之，最新版本的 Ubuntu 不会存储`libz.so`在标准`/usr/lib`位置，而是存储在特定于平台的位置。例如，在我的系统上是在`/usr/lib/x86_64-linux-gnu`. 这可以防止 Python 的构建系统找到它。

该`dpkg-dev`包安装`dpkg-architecture`可执行文件，这使 Python 能够找到必要的库。

最初的问题是关于 Python 3.2.3。我还下载了 Python 2.7.3 并确认存在相同的问题，并且该解决方案也适用于它。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2019-01-31T21:16:17.630

对于任何试图使用非系统/非标准`zlib`（例如从源代码构建自己的）的人，请确保同时传递`CPPFLAGS`（不是`CFLAGS`！）和`LDFLAGS`to `./configure`。例如，如果您`zlib`在`/opt/zlib`：

```
./configure CPPFLAGS='-I/opt/zlib/include' LDFLAGS='-L/opt/zlib/lib'
make
sudo make install 
```

我最终陷入了兔子洞，试图弄清楚为什么我们的 Python 没有在 zlib 支持下构建，并发现 CPython`setup.py`不查看`CFLAGS`包含目录，仅`CPPFLAGS`： [https ://github.com/python/cpython/ blob/master/setup.py#L562](https://github.com/python/cpython/blob/master/setup.py#L562)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2016-04-11T18:34:19.680

帮助我安装 python 3.5.1 的唯一解决方案是 apt-get zlib1g-dev（以及其他软件包，如 python-setuptools 和 python-pip），然后从源代码重建 python 3.5.1。

```
sudo apt-get update
sudo apt-get upgrade
sudo apt-get dist-upgrade
sudo apt-get install build-essential python-dev python-setuptools python-pip python-smbus
sudo apt-get install build-essential libncursesw5-dev libgdbm-dev libc6-dev
sudo apt-get install zlib1g-dev libsqlite3-dev tk-dev
sudo apt-get install libssl-dev openssl
cd ~
mkdir build
cd build
wget https://www.python.org/ftp/python/3.5.1/Python-3.5.1.tgz
tar -zxvf Python-3.5.1.tgz
cd Python-3.5.1
./configure
make
sudo make install 
```

取自：[https ://github.com/MrYsLab/xideco/wiki/Installing-Python-3.5](https://github.com/MrYsLab/xideco/wiki/Installing-Python-3.5)

正如我所理解的那样，新构建的 python 是包含以前 apt-getted 相关包的。因此，当您浏览新的 Python-3.5.1/lib/site-packages 的内容时，将会出现 pip 和 setuptools。更重要的是，它们将被复制到您使用 Python-3.5.1 制作的任何 virtualenv 中，并且此 virtualenv 将使用系统默认设置的 THEM。在安装新的 python 版本时，记住这一点非常**非常重要。**否则可能会陷入错误的黑洞，例如：

*   zlib 未安装；
*   “pip install ...”从 virtualenv 执行，将包安装到系统默认 python 而不是 virtualenv。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-02-16T22:16:15.930

我在使用 MAC 时遇到了同样的错误

我的 MAC 操作系统版本

```
$ uname -v
Darwin Kernel Version 13.4.0: Sun Aug 17 19:50:11 PDT 2014; root:xnu-2422.115.4~1/RELEASE_X86_64 
```

这里使用python3.4

# 问题）

1.  使用 python3.4 时 zlib 不可用

    $ python3.4 get-pip.py Traceback（最近一次调用最后一次）：文件“get-pip.py”，第 20204 行，在 main() 文件“get-pip.py”，第 152 行，在 main bootstrap(tmpdir =tmpdir) 文件“get-pip.py”，第 82 行，在 bootstrap import pip zipimport.ZipImportError: can't decompress data; zlib 不可用

2.  重建 Python 失败

    ./configure --with-zlib-dir=/usr/local/lib

...配置：警告：无法识别的选项：--with-zlib-dir ...

# 解决方案

1.  确保 zlib 已安装。默认情况下，它将安装在 /usr/lib

    ls /usr/lib/libz.*

如果没有安装，a. 下载并安装 i) 从 zlib.net 站点或 ii) 从 git repo 下载并安装，如下所示

```
git clone https://github.com/madler/zlib.git 
```

或 iii)。使用python源码目录Modules/zlib中的zlib源码

湾。安装 zlib

```
./configure --prefix=/usr/local
make
sudo make install 
```

2.通过取消注释“#zlib zlibmodule.c -I$(prefix)/include -L$(exec_prefix)/lib -lz”下面的行来编辑/Module/Setup

3.再次从源代码重建Python3.4

```
cd ${PYTHON_SRC_CODE_DIR}  
./configure --prefix=${PYTHON_HOME_DIR}
make
sudo make install 
```

4.确认安装请注意gzip依赖zlib。

```
nbr_repeation=100
f=open("some_file.txt","at")
for line in range(nbr_repeation): 
    print('[{}] This file will be compressed using python zlib/gzipmodule'.format(line),file=f)

f.close()
f=open("some_file.txt","rt")
import gzip
gz=gzip.open('some_file.gz', 'wt') 
for line in f : gz.write(line)

gz.close() # Like to be clean exit
f.close()  # Like a clean exit

"""confirm the creation of the compressed gzip files"""
import os
print([ (file,os.stat(file)[6],"bytes") for file in os.listdir(".") if file.startswith("some")]) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-04-02T13:02:42.103

```
sudo apt-get install build-essential python-dev 
```

即使 python-dev 是针对 python2.7 的，它仍然会引入所有必要的依赖项。

然后你需要做：

```
./configure
make
sudo make install 
```

重建python3

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-12-30T17:18:09.290

我找到的最简单的解决方案是在[python.org](http://python.org)上：

```
sudo apt-get build-dep python3.6 
```

如果该软件包不适用于您的系统，请尝试减少次要版本，直到您在系统的软件包管理器中找到可用的软件包。

如果您看到如下内容：`E: You must put some ‘source’ URIs in your sources.list`，打开软件和更新并启用源代码。

我尝试在[博客文章](https://medium.elegantly.rocks/install-python-3-6-0-on-ubuntu-16-8cd6e369fd73#.iaxnsea7e)中解释细节。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-04-23T08:40:39.400

`sudo apt-get install zlib1g-dev`

对我有用。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-05-27T18:33:10.610

对于在 macOS Mojave 上遇到相同错误的任何人，这是安装/链接头文件的最简单解决方案：

```
open /Library/Developer/CommandLineTools/Packages/macOS_SDK_headers_for_macOS_10.14.pkg 
```

然后像往常一样再次构建 Python（也适用于[pyenv](https://github.com/pyenv/pyenv)构建）。

# javascript - 为什么不在浏览器上获得 JQuery 效果？

> ID：12344974
> 
> 赞同：-1
> 
> 时间：2012-09-10T03:17:06.380
> 
> 标签：javascript, jquery, html, css, dom

我是 JQuery 的新手，我正在尝试一些简单的代码，但没有在浏览器上得到想要的输出。这是我的代码：

```
<head>
<title>Product</title>
<script type="text/javascript" src="../../Scripts/jquery-1.5.1-vsdoc.js"></script>
</head>

<body>

<script type="text/javascript">
$('p').css('color','#red');
</script>

<p> 
This is for test, supposed to show in red!!
</p>
</body> 
```

我做错了什么？我用firefox来观察结果。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-10T03:18:09.623

您尝试在未构建时使用 dom。在 jQuery 中有一个标准的事件处理程序：

```
$(document).ready(function () {
  $('p').css('color', 'red');
}); 
```

**更新：**也正如这里提到的，您应该使用`red`而不是`#red`，因为`#`用于颜色的十六进制代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-10T03:18:43.530

您需要将代码包装在 dom 就绪回调中。

```
$(function() {
  $('p').css('color','red');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T04:26:51.993

像这样编辑

```
<head>
    <title>Product</title>
    <script type="text/javascript" src="../../Scripts/jquery-1.5.1-vsdoc.js"></script>
</head>

<script type="text/javascript">
    $(document.ready(function(){
            $('p').css("color","red");
    })
</script>

<p> 
    This is for test, supposed to show in red!!
</p> 
```

# mysql - 播放框架2：内存数据库中的h2 mysql兼容模式：转义字符

> ID：12344978
> 
> 赞同：2
> 
> 时间：2012-09-10T03:17:59.023
> 
> 标签：mysql, playframework, playframework-2.0, h2

我正在开发模式下使用内存数据库中的 H2，但我希望它的行为尽可能像 mysql 数据库（请参阅[http://www.h2database.com/html/features.html#compatibility](http://www.h2database.com/html/features.html#compatibility)）

这是我在 application.conf 文件中的配置：

```
db.default.driver=org.h2.Driver
db.default.url="jdbc:h2:mem:play;MODE=MYSQL;DB_CLOSE_DELAY=-1" 
```

为了测试它，我只运行“play”并从 play 的控制台发出“h2-browser”并在 url jdbc 字段中输入“jdbc:h2:mem:play;MODE=MYSQL;DB_CLOSE_DELAY=-1”

以下语句在 mysql 中可以正常工作：

```
CREATE TABLE `tmp` (
  `name` varchar(50) NOT NULL
);
insert into tmp (name) values ('slash: \\, simple quotes \', double quotes \" -');
select * from tmp; 
```

但是在 h2 控制台中我得到一个错误，我唯一可以转义的字符是单引号，只需在它前面加上另一个单引号。（也尝试输入'SET MODE MySQL;'）

有没有办法让 h2 从 play 的框架 h2-browser 中表现得像 mysql？还是只是h2的限制？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-10T05:00:05.447

您提供的链接[http://www.h2database.com/html/features.html#compatibility](http://www.h2database.com/html/features.html#compatibility)记录了 H2 支持的确切兼容性功能。不支持未记录的内容。在这种情况下，问题似乎是字符串文字中的“反斜杠”转义：

```
'slash: \\, simple quotes \', double quotes \" -' 
```

反斜杠不是 ANSI SQL 的转义字符；要转义单引号，您需要使用两个单引号。问题是这可能不适用于 MySQL，因为单个反斜杠仍然是转义字符：

```
'slash: \, simple quotes '', double quotes " -' 
```

对于这个问题，一种解决方案是[对 MySQL 使用 ANSI 模式](http://dev.mysql.com/doc/refman/5.0/en/ansi-mode.html)，另一种解决方案是始终对 String 字面量使用绑定变量（JDBC 中的 PreparedStatement）。

# r - 带索引的 R lapply 语句

> ID：12344982
> 
> 赞同：3
> 
> 时间：2012-09-10T03:19:36.580
> 
> 标签：r, list, lapply

有没有办法可以让 lapply 声明也显示索引？更具体地说，考虑以下示例：

```
mylist <- list(c(5,4),c(3,2), c(1,3))

myfunction<- function(values){
  print("Adding values: ")
  return(values[1] + values[2])
}

lapply(mylist, myfunction) 
```

有没有办法让它打印“添加值：1”“添加值：2”等。列表中每个元素的一个元素？

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-10T03:54:48.237

该函数的`mapply`工作方式类似`lapply`，但允许您提供多个向量或列表。

在您的情况下，您可以创建第二个向量，与列表的长度相同，只是向上计数：

```
mapply(myfunction, mylist, seq_along(mylist)) 
```

让我们尝试一下：

```
myfunction<- function(values, index){ 
  cat("Adding values (", index, "): ", values[1], "...", values[2], " = ", sum(values), "\n" )
  invisible(values[1] + values[2])
}

mylist <- list(c(5, 4), c(3, 2), c(1, 3))

mapply(myfunction, mylist, seq_along(mylist)) 
```

结果：

```
Adding values ( 1 ):  5 ... 4  =  9 
Adding values ( 2 ):  3 ... 2  =  5 
Adding values ( 3 ):  1 ... 3  =  4 
```

* * *

## 高级用户乐趣

只是为了好玩，仔细阅读`?lapply`手册页会发现以下内容也有效：

```
myfunction<- function(values){
    print(sprintf("Adding values: %i",substitute(values)[[3]]))
    return(values[1] + values[2])
}

lapply(mylist, myfunction) 
```

这表明可以创建一个通用函数适配器来为您的原始函数（或任何其他函数）提供索引，修改为期望第二个索引参数：

```
myfunction<- function(values,index){
    print(sprintf("Adding values: %i",index))
    return(values[1] + values[2])
} 
```

现在适配器

```
lapply_index_adaptor=function(f)function(x,...)f(x,substitute(x)[[3]],...) 
```

现在使用适配器进行 lapply 调用：

```
lapply(mylist, lapply_index_adaptor(myfunction)) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-10T03:26:11.120

`message`如果您的意思是消息，则很好用。

```
mylist <- list(c(5, 4), c(3, 2), c(1, 3)) 
```

如果你想要索引（重读这可能是你想要的）

```
myfunction_idx <- function(idx, x) {
    .x <- x[[idx]]
    message(sprintf("Adding values %s:", idx))

    sum(.x)
}
lapply(seq_along(mylist), myfunction_idx, x = mylist)

## Adding values 1: 

## Adding values 2: 

## Adding values 3: 

## [[1]]
## [1] 9
## 
## [[2]]
## [1] 5
## 
## [[3]]
## [1] 4
## 
```

# 解决方案

该`plyr`包将即时构建一个进度条（`lapply`会更快

```
library(plyr)
llply(mylist, sum, .progress = 'text') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-10T03:48:34.990

您是否要求对正在发生的特定价值观和过程进行“评论”？

```
myfunction<- function(values){ 
  cat("Adding values: ", values[1], "...", values[2], " = ", sum(values), "\n" )
  invisible(values[1] + values[2])
}

 lapply(mylist, myfunction)

Adding values:  5 ... 4  =  9 
Adding values:  3 ... 2  =  5 
Adding values:  1 ... 3  =  4 
[[1]]
[1] 9

[[2]]
[1] 5

[[3]]
[1] 4 
```

# php - 通过 PHP 处理 SQL 到 JSON 用于气泡图

> ID：12344987
> 
> 赞同：0
> 
> 时间：2012-09-10T03:21:24.567
> 
> 标签：php, javascript, json, highcharts

我正在使用 Highcharts制作[气泡图。](http://jsfiddle.net/yHWfX/250/)这是我的数据示例：

```
 name  | price | quantity | count
--------+-------+----------+-------
 Female |     2 |        3 |     5
 Female |     3 |       12 |    10
 Female |     5 |        6 |    15
 Female |     1 |        7 |    25
 Male   |     3 |        5 |     7
 Male   |     2 |        9 |    11
 Male   |     5 |        7 |    23
 Male   |     4 |        4 |    14 
```

我正在使用 PHP 来查询数据并编码为 JSON：

```
$query = "SELECT name, price, quantity, count FROM sales WHERE id = $1";

$result = pg_prepare($db, "report", $query);
$result = pg_execute($db, "report", array($ID));

while ($row = pg_fetch_array($result, NULL, PGSQL_ASSOC))
{
        $response['xdata'][$row['name']]['x'][] = $row['price'];
        $response['xdata'][$row['name']]['y'][] = $row['quantity'];
        $response['xdata'][$row['name']]['radius'][] = $row['count'];
}

echo json_encode($response); 
```

[但是，为了正确绘制图形](http://jsfiddle.net/yHWfX/250/)，所需的 JSON 格式如下：

```
series: [{
    name: 'Female',
    marker:{
        symbol:'circle',
        fillColor:'rgba(24,90,169,.5)',
        lineColor:'rgba(24,90,169,.75)',
        lineWidth:1,
        color:'rgba(24,90,169,1)',
        states:{
            hover:{
                enabled:false
            }
        }
    },
    data: [{x:2,y:3,marker:{radius:5}},
           {x:3,y:12,marker:{radius:10}},
           {x:5,y:6,marker:{radius:15}},
           {x:1,y:7,marker:{radius:25}}]
    },{
    name: 'Male',
    marker:{
        symbol:'circle',
        fillColor:'rgba(238,46,47,.5)',
        lineColor:'rgba(238,46,47,.75)',
        lineWidth:1,
        color:'rgba(238,46,47,1)',
        states:{
            hover:{
                enabled:false
            }
        }
    },
    data: [{x:3,y:5,marker:{radius:7}},
           {x:2,y:9,marker:{radius:11}},
           {x:5,y:7,marker:{radius:23}},
           {x:4,y:4,marker:{radius:14}}]
   }] 
```

我的问题是，如何`$query`在 PHP 中正确处理以获得所需的 JSON 格式，并将其传递给类似的`series`东西`optionsBubble.series = data.xdata`？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T03:28:58.813

您首先必须将与数据库无关的部分构建到您的 PHP 结构中，例如

```
$data = array(
   0 => array(
        'name' => 'Female',
        'marker' => array (
             'symbol': 'circle'
             etc....),
        'data' => array() // database insertion occurs here
        ),
   1 => array(
        'name' => 'Male',
        etc...
        )
);

$locations = array('Female' => 0, 'Male' => 1, etc...) // reverse map your 'name' fields

while(...) {
     $data[$locations[$row['name']]][data]['x'][] = $row['price'];
     $data[$locations[$row['name']]][data]['y'][] = $row['quantity'];
           ^^^^^^^^^^^^^^^^^^^^^^^^--- reverse lookup to get right array index for 'name'
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T03:30:03.790

首先，我将建议您看一下您的 SQL 查询，尤其是`WHERE id=$1`. 如果我没记错的话（我对此非常确定。）您的查询将返回一 (1) 行，而不像您可能想要的那样多。我建议删除该`WHERE`子句，看看是否能解决您的问题。

如果不给我留言，我会看看我还能看到什么，我们可以从那里开始。

# java - 如何将java类链接到eclipse中的图像按钮？

> ID：12344990
> 
> 赞同：0
> 
> 时间：2012-09-10T03:21:46.147
> 
> 标签：java, android, image, imagebutton

我正在尝试创建一个包含 Imagebutton 的应用程序，并通过单击 imagebutton，应用程序将开始运行包本身内的另一个 java 类。我尝试使用这种方法，但是程序立即停止工作？我应该如何编码代码？谁能帮我？感谢：D

```
package com.fyp.gulliver;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;

public class GulliverActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        //---Map button---
        Button btnMap = (Button) findViewById(R.id.map);
        btnMap.setOnClickListener(new View.OnClickListener() {
        Class ourClass; 
            public void onClick(View v) {
                // TODO Auto-generated method stub
                try {
                    ourClass = Class.forName
                        ("com.fyp.gulliver.Maps");
                    Intent ourIntent = new Intent(GulliverActivity.this, ourClass);
                    startActivity(ourIntent);
                } catch (ClassNotFoundException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        });
    } 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T03:33:36.537

像这样创建意图

```
Intent ourIntent = new Intent(GulliverActivity.this, Maps.Class);
startActivity(ourIntent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T03:50:47.407

```
Button btnMap = (Button) findViewById(R.id.map);
        btnMap.setOnClickListener(new View.OnClickListener() {
        Class ourClass; 
            public void onClick(View v) {

            Intent i = new Intent(GulliverActivity.this, Maps.Class);
            startActivity(i);

}); 
```

你需要创建你想使用的类的对象！！（在非行为类的情况下）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T04:23:09.917

你的类（ourClass）应该是一个活动、服务、接收者、提供者……你应该把它记录在你的清单文件中才能工作。

# heroku - Heroku Slug 文件

> ID：12344992
> 
> 赞同：1
> 
> 时间：2012-09-10T03:22:36.870
> 
> 标签：heroku

我希望最小化 Heroku 的 slug 大小。我正在查看[文档](https://devcenter.heroku.com/articles/slug-compiler)并注意到 Heroku 将：

> 使用语言支持的依赖管理工具（例如 Bundler、npm、点，马文）。

这些依赖项是否包含在我的 slug 大小中？如果是这样，我的[.slugignore](https://devcenter.heroku.com/articles/slug-compiler#ignoring-files-with-)条目是否适用于他们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T17:41:29.893

是的，依赖项已下载并与您的应用程序一起打包以形成 slug，因此它们确实计入 slug 大小。

我不认为`.slugignore`排除适用于依赖项，仅适用于您的应用程序仓库中的文件。从 slug 中排除下载的依赖项会导致您的应用程序失败，因为它们是您的应用程序运行所必需的。

# kohana - 如何从 Kohana 框架中查询生成器的列中选择一个 MAX 值？

> ID：12344994
> 
> 赞同：0
> 
> 时间：2012-09-10T03:22:46.783
> 
> 标签：kohana, kohana-3.2, query-builder

我需要`INSERT`数据`table`，但在查询之前我必须知道`MAX`列中的值`position`，而不是`INSERT`数据 WHERE my `SELECTED before position+1`。查询生成器可以吗？

在我的第一条评论之后，我做了查询：

```
$p = DB::select(array(DB::expr('MAX(`position`)', 'p')))->from('supercategories')->execute();

echo $p; 
```

错误：

```
ErrorException [ Notice ]: Undefined offset: 1

MODPATH\database\classes\kohana\database.php [ 505 ]

500      */
501     public function quote_column($column)
502     {
503         if (is_array($column))
504         {
505             list($column, $alias) = $column;
506         }
507 
508         if ($column instanceof Database_Query)
509         {
510             // Create a sub-query 
```

**更新**

```
$p = DB::select(array(DB::expr('MAX(position)'), 'p'))->from('supercategories')->execute(); 
```

我用过这个。但是如何得到结果呢？

**解决方案**

```
$p = DB::select(array(DB::expr('MAX(position)'), 'p'))->from('supercategories')->execute()->get('p'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T03:46:06.480

整体解决方案如下所示：

1.  `DB::select(array(DB::expr('MAX(position)'), 'p'))`
2.  检索值使用`get('p')`或`$result->p`