# StackOverflow 问答 10671000-10671999

# php - AJAX 程序未在 Webstie 上运行，但在本地 WAMP 服务器上运行良好

> ID：10671000
> 
> 赞同：1
> 
> 时间：2012-05-20T05:23:18.153
> 
> 标签：php, javascript, ajax, wamp, wampserver

好吧，我正在尝试测试 AJAX 代码并运行本书中的示例示例：

AJAX 和 PHP 作者：Audra Hendrix；波格丹布林扎里亚；克里斯蒂安·达里

现在有三个文件：

1) 索引.html

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>AJAX with PHP, 2nd Edition: Quickstart</title>
<script type="text/javascript" src="quickstart.js"></script>
</head>
<body onload='process()'>
Server wants to know your name: 
<input type="text" id="myName" />
<div id="divMessage" />
</body>
</html> 
```

2) 快速启动.js

```
var xmlHttp = createXmlHttpRequestObject();
function createXmlHttpRequestObject() { 
var xmlHttp;
if(window.ActiveXObject)  {
try {
xmlHttp = new ActiveXObject("Microsoft.XMLHTTP");
}
catch (e) {
xmlHttp = false;
}
}
else
{
try {
xmlHttp = new XMLHttpRequest();
}
catch (e) {
xmlHttp = false;
}
}
if (!xmlHttp)
alert("Error creating the XMLHttpRequest object.");
else 
return xmlHttp;
}
function process(){
if (xmlHttp.readyState == 4 || xmlHttp.readyState == 0)  {
name = encodeURIComponent( 
document.getElementById("myName").value);
xmlHttp.open("GET", "quickstart.php?name=" + name, true);  
xmlHttp.onreadystatechange = handleServerResponse;
xmlHttp.send(null);
}
else
setTimeout('process()', 1000);
}
function handleServerResponse() {
if (xmlHttp.readyState == 4)   {
if (xmlHttp.status == 200)    {
xmlResponse = xmlHttp.responseXML;
xmlDocumentElement = xmlResponse.documentElement;
helloMessage = xmlDocumentElement.firstChild.data;
document.getElementById("divMessage").innerHTML = 
'<i>' + helloMessage 
+ '</i>';
setTimeout('process()', 1000);
} 
else     {
alert("There was a problem accessing the server: " + 
xmlHttp.statusText);
}
}
} 
```

3) 快速启动.php

```
<?php
header('Content-Type: text/xml');
echo '<?xml version="1.0" encoding="UTF-8" standalone="yes"?>';
echo '<response>';
$name = $_GET['name'];
$userNames = array('YODA', 'AUDRA', 'BOGDAN', 'CRISTIAN');
if (in_array(strtoupper($name), $userNames))
echo 'Hello, master ' . htmlentities($name) . '!';
else if (trim($name) == '')
echo 'Stranger, please tell me your name!';
else
echo htmlentities($name) . ', I don\'t know you!';
echo '</response>';
?> 
```

但是当我将它上传到我的站点时，相同的代码向我显示了问题：000Webhost.com

我尝试了 3 种不同的浏览器：

1）谷歌浏览器显示没有错误，但代码也没有运行。

2) FireFox 显示此错误为： XML Parsing Error: junk after document element Location: [http://flavorsofsoul.site88.net/ajax/quickstart/quickstart.php?name=](http://flavorsofsoul.site88.net/ajax/quickstart/quickstart.php?name=)第 3 行，第 1 列：

3) IE8 显示：网页错误详情

消息：需要对象行：65 字符：7 代码：0 URI： http: [//flavorsofsoul.site88.net/ajax/quickstart/quickstart.js](http://flavorsofsoul.site88.net/ajax/quickstart/quickstart.js)

我试图从互联网上找到解决方案，但没有任何帮助。因此，如果有人可以提供解决方案，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T06:17:49.700

这是使用 jQuery 的代码的一个端口，它将每秒轮询`$_GET`文本框中的值并将文本框中的值发送到服务器，并依赖于用名称填充一个 json 数组，然后如果返回的名称大于 1 个字符，则替换divMessage div 带有一条消息，希望对您有所帮助：

**轮询.php**

```
<?php
if(!empty($_GET['name']) && isset($_SERVER['HTTP_X_REQUESTED_WITH']) && strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) === 'xmlhttprequest'){

    header('Content-type: application/json');

    $userNames = array('YODA', 'AUDRA', 'BOGDAN', 'CRISTIAN');

    if (in_array(strtoupper($_GET['name']), $userNames)){
        $data = array('name'=>$_GET['name']);
        echo json_encode($data);
    }else{
        echo json_encode(array('name'=>''));
    }
    die;
}
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>AJAX Polling with jQuery & PHP (json)</title>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" charset="utf-8"></script>
<script>
//jQuery stuff
function poll(){
    setTimeout(function(){
        var name = $("#name").val();
        if(name.length == 0){name = 'null';}

        $.ajax({ url: "polling.php?name=" + name, cache: false,
        success: function(data){
            if(data.name.length >= 1){
                $("#divMessage").replaceWith('<div id="divMessage">Welcome '+ data.name +'!<div>');
            }else{
                $("#divMessage").replaceWith('<div id="divMessage">I Dont know you.<div>');
            }
            poll();
        }, dataType: "json"});
    }, 1000);
}
$(document).ready(function(){
    poll();
});
</script>
</head>
<body>
Server wants to know your name: <input type="text" id="name" />

<div id="divMessage"><div>
</body>
</html> 
```

# python - 如何优雅地关闭任何 WSGI 服务器？

> ID：10671004
> 
> 赞同：3
> 
> 时间：2012-05-20T05:24:05.570
> 
> 标签：python, http, wsgi

我一直在试验几个 WSGI 服务器，但无法找到让它们正常关闭的方法。我所说的优雅的意思是服务器停止监听（）新请求，但完成处理所有已接受（）的连接。然后服务器进程退出。

到目前为止，我已经在 FAPWS、Cherrypy、Tornado 和 wsgiref 上花费了一些时间。似乎无论我做什么，一些客户端都会收到“对等连接重置”。

有人可以将我引导到正确处理此问题的 WSGI 服务器吗？或者知道一种方法来配置这些服务器中的一个以进行干净关闭？我认为我的下一步是模拟一个简单的 http 服务器，它可以满足我的需求。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T05:30:51.710

HTTPd 有一个`graceful-stop`谓词，`-k`它允许它在完成请求后关闭任何工作人员。需要 mod_wsgi 才能使其成为 WSGI 容器。

# android - Android AsyncTask 奇怪地发布重复项

> ID：10671013
> 
> 赞同：3
> 
> 时间：2012-05-20T05:27:21.193
> 
> 标签：android, synchronize

我认为这不是一个简单的问题。我将简要介绍一下正在发生的事情。假设我们在文件 Byron.txt 中有一个数据源：

> 她走在美丽中，像
> 万里无云的星空和星空；
> 和所有最好的黑暗和光明
> 在她的容貌和她的眼睛里相遇：
> 如此柔和的温柔的光芒，
> 天堂拒绝艳丽的日子。

这段代码在 AsyncTask 中执行：

```
final ArrayList<Record> poem = new ArrayList<Record>();
final Object objectLock = new Object();
private Record rec = new Record();

@Override
protected Void doInBackground(Void... args) {
    String line = null;
    int i;
    int last;

    try {
        process = Runtime.getRuntime().exec("cat Byron.txt");
        bufferedReader = new BufferedReader(new InputStreamReader(process.getInputStream()), 8192);

        synchronized (objectLock) {
            poem.clear();
            last = i = poem.size() - 1;
        }
        while(line = bufferedReader.readLine()) != null) {
            rec.setString(line);
            synchronized (objectLock) {
                last++;
                poem.add(last, rec);
            }

            while(!bPause && i < last) {
                i++;
                publishProgress(poem.get(i));
            }
        }
    }
    catch (Exception e) {
        e.printStackTrace();
    }
    return null;
}

@Override
protected synchronized void onProgressUpdate(Record... m) {
    if(m.length > 0) {
        mContext.mTable.appendRow(m[0]);
    }

} 
```

UI 中有一个 TableLayout ，每次我们得到一个新行时，我们都会向它添加一个新的 TableRow。这是我们在 UI 中看到的输出：

> 她走在美丽中，像
> 万里无云的星空和星空；
> 万里无云的地方和繁星点点的天空；
> 万里无云的地方和繁星点点的天空；
> 对那温柔的光
> 如此温柔 对那温柔的光芒如此温柔

然后我们进入调试器，看看为什么会这样。
有时`synchronized (objectLock)`会跳过并继续循环。
没有发布，因为`i`已经赶上了`last`。
之后，该块被跳过的次数被执行
，但是原始行丢失并且当前行被添加到`poem`几次
然后，所有新行都被发布，直到再次`i`捕获`last`。

所以你看到我遵循了代码，我可以解释发生了什么，这里的问题是：**为什么跳过这个块？，为什么？**
我预计同步块会停止，直到它可以被执行。
至少这是我如何理解`synchronized (objectLock)`
即使不使用`wait()`和的功能`notify()`

我不假装在这里打开一个讨论（虽然如果你想我们可以在聊天区打开一个）
如果你发现代码中有问题，那么，回答问题让我知道。

**笔记：**

1.  `synchronized`之所以需要，是因为在应用程序的其他地方，用户可能希望通过电子邮件发送他到目前为止收到的行。

2.  用户可以暂停发布（`bpause`）；这就是`while`循环，只有在错误时才会`i`遵循。`last``bPause`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T17:03:11.187

我决定公布答案。尽管我对它的简单感到很*尴尬*。
我是在深入研究`AsyncTask`类和消息处理等之后才发现它的。

> 我发布它是希望它可以帮助人们在得出结论之前检查基本的东西，并且那里的人会因为这篇文章而节省半天的调试时间。

`Record rec`每次都是一样的。ArrayList 对每个条目都有相同的`poem`元素 id。并且所有的内容都立即改变了，因为它们都是一样的。
当进度立即发布时，它打印了正确的字符串，最后一个。但是，如果某些延迟导致进度稍后发布，则检索`poem.get(i)`记录会检索到不同的条目，但具有相同的指针，因此具有相同的内容。

**解决方案是为每个循环创建一个新记录。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T05:43:18.150

对`last`对象进行同步。

```
synchronized (last) {
   last++;
   poem.add(last, line);
} 
```

# iphone - ios writeToFile 更改不保存

> ID：10671017
> 
> 赞同：3
> 
> 时间：2012-05-20T05:28:35.060
> 
> 标签：iphone, ios, ios5

ios 声称该文件已被写入，但更改从未真正保存，就好像它们保留在缓冲区中一样。我必须冲洗还是什么？

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    NSString *myFilePath = [[NSBundle mainBundle]
                            pathForResource:@"MyFile"
                            ofType:@"txt"];

    NSLog(@"\n\nPath = \n%@", myFilePath);

    NSString *myFileContents = [NSString stringWithContentsOfFile:myFilePath
                                    encoding:NSUTF8StringEncoding
                                    error:nil];

    NSLog(@"\n\nContents = \n%@", myFileContents);

    [@"This line will be written to file" writeToFile:myFilePath
        atomically:YES encoding:NSUTF8StringEncoding error:nil];

    NSString *changedContents = [NSString stringWithContentsOfFile:myFilePath
                                    encoding:NSUTF8StringEncoding
                                    error:nil];

    NSLog(@"\n\nChanged Contents = \n%@", changedContents);
} 
```

输出：

```
Path = 
/Users/hamzeh/Library/Application Support/iPhone Simulator/5.1/Applications/2B318687-A745-4CD9-85BA-52A01AB76F6E/savepersistentdata_tutorial.app/MyFile.txt

Contents = 
This is a text file.
The file will be displayed on the iPhone.
That is all for now. 

Changed Contents = 
This line will be written to file 
```

这是我每次运行时得到的输出，因此更改实际上并没有写入文件。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-20T05:48:52.270

您无法编辑主捆绑包中的文件。您必须先将文件保存到应用程序文档文件夹，然后进行任何更改。

这是一些可能解决您的问题的代码：

首先将文本保存到您创建的目录中：

```
NSString *myFilePath = [[NSBundle mainBundle]
                            pathForResource:@"MyFile"
                            ofType:@"txt"];
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSLibraryDirectory, NSUserDomainMask, YES);
NSString *directory = [NSString stringWithFormat:@"%@/Some_Directory", [paths objectAtIndex:0]];

// Check if the directory already exists
if (![[NSFileManager defaultManager] fileExistsAtPath:directory]) {
    // Directory does not exist so create it
    [[NSFileManager defaultManager] createDirectoryAtPath:directory withIntermediateDirectories:YES attributes:nil error:nil];
} 

NSData *data = [[NSData dataWithContentsOfFile:myFilePath] retain];

NSString *filePath = [[directory stringByAppendingPathComponent:[NSString stringWithFormat:@"%@", [myFilePath lastPathComponent]]] retain];

NSError *error = nil;
if (![data writeToFile:filePath options:NSDataWritingFileProtectionNone error:&error]) {
    [data writeToFile:filePath atomically:NO];
}
[data release];
[filePath release]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T05:34:30.823

使用`NO`参数

```
[@"This line will be written to file" writeToFile:myFilePath atomically:NO encoding:NSUTF8StringEncoding error:nil]; 
```

iOS 文档说

*(BOOL)useAuxiliaryFile
如果是，则将接收方写入辅助文件，然后将辅助文件重命名为路径。如果否，则将接收器直接写入路径。YES 选项保证即使系统在写入过程中崩溃，路径（如果存在）也不会损坏。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T05:59:53.700

您不能在主包上写入文件，因为资源包是只读的。您还可以检查`writeToFile`方法的返回。如果您将其部署在设备上，则返回 false。

# android - 分辨率为 1024 X 600 的 WVGA 应用程序

> ID：10671019
> 
> 赞同：-2
> 
> 时间：2012-05-20T05:28:53.640
> 
> 标签：android

有什么办法可以将 1024 X 600 分辨率缩小到 480 X 800，我正在开发一个适用于 WVGA 分辨率的应用程序，但我只有一台平板电脑，我如何才能缩小平板电脑分辨率，请指导我希望它在 WVGA 分辨率下完美运行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T05:39:21.023

> 请指导。我希望它在 WVGA 分辨率下完美运行。

如果您希望它在 WVGA 分辨率下完美运行，那么您可能不应该使用平板电脑作为主要测试设备。您应该使用模拟器来保证真实的测试环境。

我还建议您在决定将应用程序限制为单一屏幕尺寸之前，先查阅 Android 开发者网站上的[**Supporting Multiple Screens文章。**](http://developer.android.com/guide/practices/screens_support.html)

# python - OSV 方法的返回语句

> ID：10671025
> 
> 赞同：4
> 
> 时间：2012-05-20T05:29:48.817
> 
> 标签：python, openerp

在 OpenERP 中，一个 OSV 对象可以返回一些可以打开一个新视图或激活一个动作的东西。例如，`sale.order`具有`manual_invoice`返回以下内容的方法：

```
 return {
        'name': _('Customer Invoices'),
        'view_type': 'form',
        'view_mode': 'form',
        'view_id': [res_id],
        'res_model': 'account.invoice',
        'context': "{'type':'out_invoice'}",
        'type': 'ir.actions.act_window',
        'nodestroy': True,
        'target': 'current',
        'res_id': inv_ids and inv_ids[0] or False,
    } 
```

它会在同一窗口中打开发票表单视图。

我已经看到`'view_id': [res_id],`被更改为`'views': [(id2, 'form')],`和其他部分也被修改，它仍然有效。

所以我不明白这个机制是如何工作的。什么决定了返回字典中应该包含哪些值？我怎么知道哪些是强制性的，哪些不是？

非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T10:10:25.510

返回的字典被解释为一个动作（`ir.actions.act_window`模型），例如在 XML 视图中找到的那些。该文档可在[Technical Memento](http://doc.openerp.com/memento/OpenERP_Technical_Memento_v0.6.4.pdf)和[官方文档](http://doc.openerp.com/v6.0/developer/2_7_menu_action/7_2_actions.html#window-action)中找到。

# php - 如果条件为 or

> ID：10671032
> 
> 赞同：2
> 
> 时间：2012-05-20T05:30:04.097
> 
> 标签：php

这是我的脚本：

```
$user_data = user_data($name);

        if($user_data['type'] == 'clerk') { 
        } elseif ($user_data['type'] == 'admin' ){
        }else
        { header("Location: login_admin1.php");}

    } 
```

如果我使用带有空白的 if 语句，`{}`它可以工作，但是一旦我使用这个脚本，它就不起作用了。

```
 if($user_data['type'] != 'clerk' || $user_data['type'] != 'admin')
{ header("Location: login_admin1.php");} 
```

我想检查`$user_data['type']`是文员还是管理员，（只有文员或管理员可以访问页面）可以检查页面。如果不是其中之一，他们将无法访问该页面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T05:31:23.000

使用`&&`代替`||`in`if`语句：

尝试：

```
if( $user_data['type'] != 'clerk' && $user_data['type'] != 'admin' ) { 
    header("Location: login_admin1.php");
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-20T05:34:46.680

为什么不使用[`in_array()`](http://php.net/manual/en/function.in-array.php)？

```
if ( ! in_array( $user_data['type'], array( "clerk", "admin" ) ) ) {
  // Is neither Clerk, nor Admin.
} 
```

`$user_data['type']`减少了一遍又一遍的书写。

# asp.net - 读取/解析 XML 文件的最佳方法是什么

> ID：10671036
> 
> 赞同：-6
> 
> 时间：2012-05-20T05:30:23.450
> 
> 标签：asp.net, .net, sql, xml

我有一堆这些 XML 文件，我想读取它们并将数据存储在 SQL 表中。读取/解析 XML 文件的最佳方法是什么？我正在使用 ASP.NET 4.0 和 SQL Server 2008。我非常擅长 C#/VB 和 asp.net，但对 XML 没有太多经验。基本上这些都是多项选择题，并且有答案。任何帮助将不胜感激。谢谢你。

```
<assessmentItem xsi:schemaLocation="http://www.imsglobal.org/xsd/imsqti_v2p0 imsqti_v2p0.xsd" identifier="choice" adaptive="false" timeDependent="false" title="001157" xmlns="http://www.imsglobal.org/xsd/imsqti_v2p0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <responseDeclaration identifier="RESPONSE" cardinality="single" baseType="identifier">
        <correctResponse>
            <value>A</value>
        </correctResponse>
    </responseDeclaration>
    <outcomeDeclaration identifier="SCORE" cardinality="single" baseType="integer">
        <defaultValue>
            <value>0</value>
        </defaultValue>
    </outcomeDeclaration>
    <stylesheet href="stylesheet/scip.css" type="text/css" />
    <itemBody>
        <span class="class1">
            <b>Nick had eight marbles. He found four more.<br />
                <br />
            </b>
        </span>
        <div class="class2">
            <span class="class1">
                <b>
                    <img src="images/41047.jpg" alt="" />
                </b>
            </span>
        </div>
        <span class="class1">
            <b>How many marbles does Nick have now?</b>
        </span>
        <choiceInteraction responseIdentifier="RESPONSE" shuffle="false" maxChoices="1">
            <simpleChoice identifier="A">
                <span class="class1">12</span>
                <rubricBlock>
                    <span class="class1" >
                        <b>Correct</b>
                    </span>
                </rubricBlock>
            </simpleChoice>
            <simpleChoice identifier="B">
                <span class="class1">8</span>
                <rubricBlock>
                    <span class="class1" >Chose a number from the stem</span>
                </rubricBlock>
            </simpleChoice>
            <simpleChoice identifier="C">
                <span class="class1">4</span>
                <rubricBlock>
                    <span class="class1" >Subtracted</span>
                </rubricBlock>
            </simpleChoice>
        </choiceInteraction>
    </itemBody>
    <responseProcessing template="http://www.imsglobal.org/question/qti_v2p0/rptemplates/match_correct" />
</assessmentItem> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T05:38:30.060

您的标题具有误导性。你在问`What is the best way to read/parse the XML files?`，这与`Storing XML in a database`.

而且我建议不要懒惰并阅读文档如何做到这一点。无论您使用什么语言，解析 XML 都是非常常见的任务。你会在网上找到很多例子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T05:48:31.360

**基本上这些是多项选择题及其答案。读取/解析 XML 文件的最佳方法是什么？**

让我们现在让你整理一下。请参阅此处，您需要阅读一些文章，并且鉴于您擅长 C# 和 VB.Net，这应该不是问题：

**[Google - Linq To XML 示例](http://www.google.com.au/search?sugexp=chrome,mod=11&sourceid=chrome&ie=UTF-8&q=LINQ+to+XML+read+xml+into+class)**

该技术的一种方法是使用 XDoc 加载 XML，然后将 XML 解析为类对象模型，使用具有匿名类型的 LinqToXML 创建类的选择和答案列表。

**[微软官方示例](http://code.msdn.microsoft.com/windowsdesktop/LINQ-to-XML-Language-53971190)**

# xml - 我使用哪些标签向 xml 文件添加版权声明？

> ID：10671037
> 
> 赞同：4
> 
> 时间：2012-05-20T05:30:23.897
> 
> 标签：xml, copyright-display

我正在为我的客户开发一个应用程序。我们在 strings.xml 中创建的内容是他们专有的，他们希望在 XML 文件中添加版权声明和商标声明。

我希望能够同时列出我的版权和客户的版权。
将此类信息包含到 xml 中的做法是什么？我是否创建了一个名为“版权”的标签？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-20T05:32:42.100

XML 的目的不是供公众查看，而是供开发人员或工具查看。

携带作者信息要么是数据的一部分（如在有作者的博客文章中），要么不是。

但是，您可以为此使用 XML 注释。或者您可以定义自己的 XSD 并像这样构建所有内容：

```
<?xml?>
<!--
    Copyright notices here
    From you regarding the XML itself
    From your client regarding the XML contents
-->
<root xmlns:copyright="http://www.w3.org/1999/xhtml">
    <!-- per file meta-data here -->
    <metadata>
        <!-- authors make it -->
        <author name="XXXXX" />
        <!-- copyright holders buy it from authors and sell it -->
        <copyright name="XXXXX" />
        <license type="GPL">
            Lorem ipsum dolor sit amet...
        </license>
    </metadata>
    <data>
        <entry>
            <!-- per entry meta-data here -->
            <metadata>
                <author name="XXXXX" />
            </metadata>
            <contents>
            </contents>
        </entry>
    </data>
</root> 
```

此外，如果第三方应用程序需要它（被提取和显示），那么使用 XML 元素而不是注释会更有用，因为它们很容易操作。

我的意思是可以用简单的文本进行评论，但是如果您想像我在示例中展示的那样将复杂的信息放在那里，并带有诸如作者/版权/许可之类的子字段，第三方程序员很容易获得这些节点对象。

如果您感觉特别命名空间，作为变体：

```
<?xml?>
<!--
    Copyright notices here
    From you regarding the XML itself
    From your client regarding the XML contents
-->
<root xmlns:copyright="http://www.w3.org/1999/xhtml">
    <!-- per file meta-data here -->
    <copyright:info>
        <!-- authors make it -->
        <copyright:author name="XXXXX" />
        <!-- copyright holders buy it from authors and sell it -->
        <copyright:holder name="XXXXX" />
        <copyright:license type="GPL">
            Lorem ipsum dolor sit amet...
        </copyright:license>
    </copyright:info>
    <data>
        <entry copyright:author="author name" copyright:holder="holder name">
            <contents>
            </contents>
        </entry>
    </data>
</root> 
```

使用命名空间，第三方程序员将很容易分离两层信息。

# javascript - 将生成的字符串作为 javascript 函数中的变量传递

> ID：10671043
> 
> 赞同：0
> 
> 时间：2012-05-20T05:31:29.030
> 
> 标签：javascript, variables

这是我的html：

```
<form>
<input type='text' name='campo1' value='valor0'/>
<input type='text' name='campo2' value='valor1'/>
<input type='text' name='campo3' value='valor2'/>
<input type='text' name='campo4' value='valor3'/>
<input type='text' name='campo5' value='valor4'/>
<input type='text' name='campo6' value='valor5'/>
<input type="button" onclick="inpt();">
</form> 
```

**我创建了一个函数来创建一个字符串并将其传递给另一个函数** **该字符串包含输入文本的所有值，输入名称中具有匹配字符串“campos”。**

```
<script type="text/javascript">
var tags_inpt = new Array();
var param = "";;
function inpt() {
tags_inpt=document.getElementsByTagName('input');
var i;
for (i=0; i<tags_inpt.length; i++) {
if ((tags_inpt[i].type=='text')&&(tags_inpt[i].name.match(/campo/))){
param += '"' +tags_inpt[i].value +'",';
}
}
alert(param + '"A"'); // this print -> "valor0","valor1","valor2","valor3","valor4","valor5","A" OK!!
// call funcion2()
funcion2("valor0","valor1","valor2","valor3","valor4","valor5","A"); // this result in valor1 in funcion2() OK!!
funcion2(param + '"A"'); // this return 'undefined' --> BAD
}

function funcion2(a,b,c,d,e,f,g){
var z = b;
alert (z);
}
</script> 
```

当使用 param 变量将参数动态传递给 时`funcion2()`，我得到未定义的值。

做这个的正确方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T05:35:50.590

尝试这个：

```
funcion2.apply(window, (param + ',"A"').split(",") ); 
```

查看[**演示**](http://jsfiddle.net/UW8XU/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T05:37:14.753

不要为此使用字符串连接，根据您的输入，这很容易出错。改用数组：

```
<script type="text/javascript">
function inpt() {
  var tags_inpt = document.getElementsByTagName('input');
  var matches = [];
  for (var i=0; i<tags_inpt.length; ++i) {
    if ((tags_inpt[i].type=='text') && (tags_inpt[i].name.match(/campo/))){
      matches.push(tags_inpt[i].value);
    }
  }
  matches.push('A');
  funcion2.apply(this, matches);
}

function funcion2(a,b,c,d,e,f,g) {
  var z = b;
  alert (z);
}
</script> 
```

# assembly - 当你禁用中断时会发生什么，你如何处理你不知道如何处理的中断？

> ID：10671048
> 
> 赞同：11
> 
> 时间：2012-05-20T05:32:14.053
> 
> 标签：assembly, x86, interrupt, interrupt-handling, isr

当您禁用中断（使用`cli`x86 中的指令）时，究竟会发生什么？

*   PIC 是否等待您打开中断，并在发生这种情况时触发中断？（如果是这样，它等待多长时间，如果时间“到期”会发生什么？）

*   从设备的角度来看，中断是否会被发送到“黑洞”而没有响应？

*   PIC 是否以某种方式告诉设备“CPU 很忙”之类的？

*   还是发生了其他事情？

另外，您如何处理您不知道如何处理的中断？
有什么方法可以告诉 PIC（或设备，如果您不知道设备是什么），“是的，我收到了您的消息，但我不知道如何处理它”？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-20T12:37:05.963

8259a PIC 等待来自 CPU 的 INTA 信号。CPU 在开始处理中断时通过将控制权转移到适当的 ISR 来发送它。哪个 ISR？PIC 将中断向量提供给 CPU，CPU 会在 IVT/IDT 中查找地址，剩下的就知道了。PIC 在收到 INTA 之前不会提供中断向量。

8259a PIC 只与 I/O 设备进行单向通信。他们可以告诉它他们有一个需要服务的中断。

因此，如果 CPU 不响应中断，那么 PIC 中的一切都将悬而未决。但是，设备可能会随心所欲地取消断言，然后重新断言中断请求信号。我不知道哪个做。我也不知道哪些对中断服务有任何时间要求。

如果您对来自特定来源的中断不感兴趣，您可以将其屏蔽，您将一无所获。如果您收到中断但不知道如何处理它，您可以告诉 PIC 您已处理它。这可能会使中断的设备处于“冻结”状态，无限期地等待服务发生。它还可能导致设备保持其中断请求信号为高电平，如果您在电平触发模式下进行中断，这将是一个问题——您将不断收到中断。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-20T12:24:14.543

中断仍然触发，但 CPU 没有在监听。当您再次开始收听时（`sti`），信号仍然存在，并将在第一时间生效。

一个 PC PIC 有几个级别的中断，我相信它可以为每个优先级保留一个活动中断。它将保留它们中的每一个，直到 CPU 告诉它相应的处理完成为止。长时间禁用中断可能会破坏这一点，所以不要那样做！

负责中断的设备在等待时不会得到任何响应——无论如何这都是一种响应。如果它不能等待，它可能会进入一些错误状态，当它最终出现时 CPU 会看到。

你只会得到你明确启用的中断，所以应该没有意外。打开中断的设备驱动程序更好地知道如何处理它。

# java - PersistenceException 发生：org.hibernate.exception.ConstraintViolationException：无法插入：[models.User]

> ID：10671050
> 
> 赞同：0
> 
> 时间：2012-05-20T05:32:25.963
> 
> 标签：java, hibernate, playframework

我有这个例外！这是我的模型课

```
@Entity
public class User extends Model {

    @OneToMany(mappedBy="email", cascade=CascadeType.ALL)
    public List<Photo> photo;

    @Email
    @Required
    @Unique
    public String email;

    @Required
    public String passwordHash;

    @Required
    public String education;

    @Required
    public String fname;

    @Required
    public String lname;

    @Required
    public Date dob;

    @Required
    public String gender;

    @Required
    public String country;

    @Required
    public Long phone;

    @Required
    public String status;

    @Required
    public String jobtitle;

    @Required
    public String company;

    @Required
    public String industry;

    @Required
    public Date addDate;

    public String needConfirmation;

public User(String email, String password, String fname,
                String lname, Date dob, String gender, String country,
                Long phone, String status, String education, String jobtitle, String company, String industry) {
        //all initialization here
    }
} 
```

你能告诉我哪里出错了吗playframework×2289

* * *

```
this is my photo class, and please tell me how can I allow JPA to generate my database

/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package models;

import controllers.Users;
import javax.persistence.Entity;
import javax.persistence.ManyToOne;
import play.db.jpa.Model;

/**
 *
 * @author nPandey
 */
@Entity
public class Photo extends Model{

    public String photoname;

    @ManyToOne
    public User email;

    public String owner;

    public Photo(){

    }

    public Photo(User email, String photo){
        this.photoname=photo;
        this.email=email;
        this.owner=email.email;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T06:08:45.370

检查您的实体在持久化/更新时是否缺少任何必填字段。还要检查在数据库中的用户表上设置了哪些约束（唯一键、外键、非空值......）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T06:42:33.060

你的`mappedBy`价值毫无意义。它用于双向关联的被动端。在这些情况下，它指向关系另一端的另一个类的属性。您将其指向`User`该类的属性之一。也许您的 Photo 类有一个`email`属性，但属于类型`User`（我猜不是）。因此，如果这是一个双向关联，请将`mappedBy`值设置为`Photo`具有相应`@ManyToOne`“返回”到`User`. 如果是单向关联，去掉mappedBy，或许可以使用@JoinColumn，使用单向一对多的外键映射策略

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-26T12:43:37.613

我遇到了同样的问题，它通过将关系相关符号从更改为`OneToMany`来解决`ManyToMany`。在我的情况下`ManyToMany`，作业和人员表之间存在关系，我试图在循环中将相同的作业列表添加到多个人员对象。

问题在于 Job Entity 的 Person Entity 类中使​​用的注释：

```
@ManyToMany // Changed from OneToMany to ManyToMany
private List<Job> jobList = new ArrayList<Job>(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-18T11:21:08.247

尝试如下编辑代码 - 在用户模型中

```
 @OneToMany(mappedBy = "user", cascade = CascadeType.ALL)
    public List<Photo> photos; 
```

在照片模型中

```
 @ManyToOne
    @NotFound(action = NotFoundAction.IGNORE)
    @JoinColumn(name = "email", nullable = false, insertable = false, updatable = false)
    public User user; 
```

检查此以供参考 - [http://en.wikibooks.org/wiki/Java_Persistence/OneToMany#Example_of_a_OneToMany_relationship_and_inverse_ManyToOne_annotations](http://en.wikibooks.org/wiki/Java_Persistence/OneToMany#Example_of_a_OneToMany_relationship_and_inverse_ManyToOne_annotations)

# javascript - 当用户尝试关闭浏览器中的当前选项卡时添加 javascript 警报

> ID：10671074
> 
> 赞同：-1
> 
> 时间：2012-05-20T05:36:13.490
> 
> 标签：javascript

我正在研究 asp.net(c#)。当用户尝试关闭浏览器中的当前选项卡时，我尝试添加一个 javascript 警报。该代码在 Chrome 中不起作用。请任何人帮助解决这个问题。

这是我的代码：

```
<script type="text/javascript">
window.onbeforeunload = function close_window() {

    var r = confirm("Do you want to view other topics?");
    if (r == true) 
    {
        alert("You pressed OK!");
        var Url = "http://stackoverflow.com/";
        window.location = Url;
        return false;
    }
    else 
    {
        window.close();
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T16:00:43.897

其实，试试这个。

```
function close_window() {
...
}
window.onbeforeunload = close_window; 
```

是的——这是非常糟糕的做法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T17:30:57.310

`()`调用函数时删除。

它应该是：

```
window.onbeforeunload = function close_window { 
```

# c# - 使用 StructureMap 在泛型工厂上注册方法

> ID：10671078
> 
> 赞同：4
> 
> 时间：2012-05-20T05:37:34.383
> 
> 标签：c#, generics, structuremap

我正在尝试在我的结构映射注册表中的通用工厂类上使用一种方法。通常，在使用工厂方法注册类型时，我会使用以下内容：

```
For<Foo>().Use(x => new FooFactory().GetFoo()); 
```

注册泛型类型时的以下内容：

```
For(typeof(ISomeGeneric<>)).Use(typeof(SomeGeneric<>)); 
```

如何将两者结合起来并从泛型工厂方法中检索泛型类型？我认为它应该是这样的：

```
For(typeof(IFoo<>)).Use(typeof(x => new FooFactory<>().Create(someParameter)); 
```

这只是给出了一个

```
"Cannot convert lambda expression to type object because it is not a delegate type" 
```

错误。我尝试了各种组合，但被难住了。有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-14T03:34:47.653

这是可能的，但如果可以的话，我会寻找替代方案。问题是要使用开放泛型，您必须使用一些反射。这意味着您将受到性能影响。

```
public class FooRegistry:Registry
{
    public FooRegistry()
    {
        For(typeof(IFoo<>)).Use(x =>
        {
            var ParamType = x.BuildStack.Current.RequestedType
                             .GetGenericArguments()[0];
            return BuildUsingFooFactory(ParamType);
        });
    }

    private object BuildUsingFooFactory(Type paramType)
    {
        var factoryType = typeof (FooFactory<>).MakeGenericType(new[] {paramType});
        var createMethod = factoryType.GetMethod("Create");
        object factory = Activator.CreateInstance(factoryType);
        return createMethod.Invoke(factory, new[] {"SomeParameterString"});
    }
}

public class FooFactory<T>
{
    public IFoo<T> Create(string param)
    {
        return new Foo<T>();
    }

}

public interface IFoo<T>
{
}

public class Foo<T> : IFoo<T>
{   
} 
```

您正在按顺序执行以下操作：

1.  找出请求的通用参数是什么。（参数类型）
2.  为工厂创建非开放的泛型类型（factoryType）
3.  抓住它的 create 方法。(创建方法)
4.  使用Activator（工厂）创建工厂实例
5.  使用您的一些参数调用工厂实例上的 create 方法。

StructureMap 负责将输出转换为正确的接口。

**更好的解决方案**

不要直接使用 IFoo，而是使用 IFooFactory。这使它更干净，你有一个到 IFooFactory<> 的开放通用映射。然后只需获取生成对象所需的 FooFactory 类型。

```
public class FooRegistry:Registry
{
    public FooRegistry()
    {
        For(typeof (IFooFactory<>))
            .Use(typeof (FooFactory<>))
            .CtorDependency<string>("connection")
            .Is("SomeConnectionString");
    }
}

public interface IFooFactory<T>
{
    IFoo<T> CreateInstance();
}

public class FooFactory<T> : IFooFactory<T>
{
    public FooFactory(string connection)
    {
    } 

    public IFoo<T> CreateInstance()
    {
        return new Foo<T>();
    }
}

public interface IFoo<T>
{
}

public class Foo<T> : IFoo<T>
{   
} 
```

# c - 将 PATH 环境变量拆分为单独的文件路径

> ID：10671079
> 
> 赞同：0
> 
> 时间：2012-05-20T05:37:45.603
> 
> 标签：c, path, environment-variables

我正在尝试做简单的 shell 作为对自己的练习。我正在编写一个函数，它应该在 PATH 中找到一个可执行文件，并返回一个指向字符串的指针，该字符串包含可执行文件的完整路径。这是我到目前为止所拥有的；

```
/*bunch of includes here*/

/*
 * Find executable in path, return NULL
 * if can't find.
 */
char *find_executable(char *command)
{
    const char *PATH = getenv("PATH");
    DIR *dp;
    /* get each pathname, and try to find executable in there. */
}

int main(int argc,char *argv[])
{ /* nothing intersting here ...*/
} 
```

我想知道我应该如何分隔路径的每个部分，并在 for 循环中处理这些部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T06:08:57.783

说路径将被分隔;
您可以使用 strtok 函数生成拆分令牌。
例如

`char *str = "/foo/a1/b1;/bar/a1/b1"`

现在您可以将 strtok 函数用作

```
char delims[] = ";"  
char *result = NULL;  
result = strtok( str, delims );  
while( result != NULL ) {  
    dp = result;  
    result = strtok( NULL, delims );   
} 
```

# java - 设置为父级的标准 IO（命令提示符）时，Windows Java 子进程不输入或输出

> ID：10671081
> 
> 赞同：9
> 
> 时间：2012-05-20T05:37:54.760
> 
> 标签：java, windows, cmd

在 Windows 下，当我的程序从命令行启动时，我无法可靠地操作子进程的 I/O。令人沮丧的是，服务器使用控制台进行 I/O 是标准的。GUI 很好，但我真的更喜欢坚持使用命令行并保持简单。我注意到当我从 Eclipse IDE 执行服务器时，子进程 I/O 很好，但从命令行运行则完全不同。我无法读取或写入子进程，但该进程仍在运行。我在下面编写了一些测试代码来演示这个问题，我希望这个问题可以在另一台机器上重现，然后希望从中得到解决方案。从 Eclipse 执行时，继承的 I/O 会按预期工作。然而，当从 Windows 命令提示符执行时，没有任何内容可以读取或写入子进程。在这两种情况下，将子进程输出重定向到文件总是成功，但输入仍然无法传递给子进程。如果已经有解决此问题的方法，请链接该页面。

JRE/JDK 实现：

```
>java -version
java version "1.7.0_01"
Java(TM) SE Runtime Environment (build 1.7.0_01-b08)
Java HotSpot(TM) 64-Bit Server VM (build 21.1-b02, mixed mode) 
```

考虑以下代码：

```
package com.comp8nerd4u2.io.test;

/*
 * These tests attempt to confirm what I'm experiencing under my build environment
 */

import java.io.File;
import java.io.IOException;

public final class PIOTest {

/** The command to run as a child process. The command itself isn't the test, but what you use to run this Java program is the test. */
private static final String[] COMMAND = {"cmd.exe", "/c", "echo This is a test. Feel free to change this."}; // Change this to just {"cmd.exe"} or some other program that accepts input and you'll see how frustrating this is
/** Controls how the test process is built */
private static final ProcessBuilder PB = new ProcessBuilder(COMMAND);
/** How long to allow the process to run before forcibly terminating it. */
private static final long PROCESS_TIMEOUT = 10000L;
private static final Runnable R = new TimedInterruptWorker(PROCESS_TIMEOUT);

private static int n = 0;

static {
    PB.redirectErrorStream(true);
}

private PIOTest() {}

public static void main(String[] args) {

    // ----- Begin Tests -----

    /*
     * Test #1: Let's test putting our command's output onto our standard I/O streams
     * Goal condition: Child process outputs expected output, and exits before the timeout. If child process expects input, it should accept entered input.
     * Known success factors: Parent process' standard I/O is piped to Eclipse. Tests would probably succeed with Netbeans as well
     * Known fail factors: Parent process' standard I/O is piped to Windows Command Prompt
     * Result under fail condition: Child process hangs if it fills up its output buffer or requests input, but exits on its own otherwise, unless it took longer than the timeout. 
     */
    PB.inheritIO();
    doTest();

    // Test #2: Let's test putting our command's output into a file
    PB.redirectOutput(new File("piotest.txt"));
    doTest();
}

/**
 * Performs the I/O test.
 */
private static void doTest() {
    n++;
    Process p = null;
    try {
        p = PB.start();
    } catch (IOException e) {
        e.printStackTrace();
        return;
    }
    try {
        Thread t = new Thread(R);
        t.setDaemon(true);
        t.start();
        System.out.format("[Test #%d] Child exited with status code %d\n", n, p.waitFor());
        t.interrupt();
    } catch (InterruptedException e) {
        p.destroy();
        System.out.format("[Test #%d] Child took longer than the timeout.\n", n);
    }
}

/**
 * Useful for sending interrupts after a certain amount of time has passed.
 * 
 * @author comp8nerd4u2
 */
private static final class TimedInterruptWorker implements Runnable {

    private long timeout = 0;
    private Thread target = null;

    public TimedInterruptWorker(long timeout) {
        this(timeout, Thread.currentThread());
    }

    public TimedInterruptWorker(long timeout, Thread target) {
        this.timeout = timeout;
        this.target = target;
    }

    @Override
    public void run() {
        try {
            Thread.sleep(timeout);
        } catch (InterruptedException e) {
            return;
        }
        target.interrupt();
    }

}

} 
```

更新：我修改了测试以在运行时接受任何命令，并将其上传到我的 linux vps 服务器。我从 ssh 会话运行它，所有子进程的 I/O 都可以轻松读取和写入。我注意到了一件事。当我打开一个交互式 bash shell 作为子进程，然后将它的输出重定向到一个文件时，我想 CentOS 停止了我的程序。那或我的程序崩溃了。

```
[admin@comp8nerd4u2 piotest]$ java -jar piotest.jar
Enter command to run : bash
[admin@comp8nerd4u2 piotest]$ [Test #1] Child took longer than the timeout.

[1]+  Stopped                 java -jar piotest.jar
[admin@comp8nerd4u2 piotest]$ 
```

第一行是我输入的命令。第二行是生成的 bash shell，但我从未在其中输入任何内容，因此我的程序在超时后将其杀死。它为第二次测试做好准备，创建“piotest.txt”文件，然后崩溃或被操作系统停止。实际测试本身没有改变，只是测试现在允许您输入在运行时运行的命令。这在linux中可以正常工作，但在windows中不行。我希望知道 Win32 API 的人能以某种方式解释为什么这个测试在 Windows 中失败。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T17:31:15.953

你看过这篇文章吗？[http://www.javaworld.com/jw-12-2000/jw-1229-traps.html?page=1](http://www.javaworld.com/jw-12-2000/jw-1229-traps.html?page=1)

在我看来，您需要为 Windows 上的输入/输出流提供服务。这篇文章是关于 Runtime.exec，但我敢打赌 ProcessBuilder 的本机代码非常相似，并且在 Windows 上具有相同类型的问题。

我猜测为什么这在 Windows 上的 Eclipse 上有效，是 Eclipse 代表您为流提供服务，以便在控制台视图中显示内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-11T23:16:05.287

我知道我回答迟了，但在找到答案之前我遇到了这个问题，并且想在同一条船上拯救其他人一些搜索。

这实际上是 Windows 的一个已知错误：[https ://bugs.openjdk.java.net/browse/JDK-8023130](https://bugs.openjdk.java.net/browse/JDK-8023130)

您可以通过自己重定向流来解决它：

```
Process p = pb.start();
BufferedReader br = new BufferedReader(new InputStreamReader(p.getInputStream()));
String line = null;
while ((line = br.readLine()) != null) {
   System.out.println(line);
}

p.waitFor();

br.close(); 
```

# php - 保持关联数组复选框处于选中状态

> ID：10671084
> 
> 赞同：1
> 
> 时间：2012-05-20T05:38:52.560
> 
> 标签：php, arrays, checkbox

我正在尝试检查复选框列表，直到帖子有效且没有错误。下面是我正在使用的代码。如果有任何帮助，我将不胜感激。

```
 <?php foreach ($drinks_checkbox as $option => $options){  ?>

     <input type='checkbox' id='drinks[]' name='drinks[]' value='<?php echo $option;?>'   <?php if(!empty($_POST['drinks'])){if($_POST['drinks']==$option){ echo "checked='checked'" ; }}?> /><?php echo $options;?><br />
    <?php } ?> 
```

我可以使用 implode 成功显示选中的复选框，但是我需要上述帮助..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T06:02:28.270

$_POST['drinks'] 是一个数组。此外，id 值不需要是 'drinks[]'

尝试这样的事情：

```
$drinksIndex = 0;
$drinksPost = $_POST['drinks'];
foreach ($drinks_checkbox as $option => $options){  ?>

  <input type='checkbox' id='drinks<?php echo $drinksIndex; ?>' name='drinks[<?php echo $drinksIndex; ?>]' value='<?php echo $option;?>'<?php
  if( !empty($drinksPost[$drinksIndex]) ) echo " checked='checked'";
  $drinksIndex++;
?> /><?php
echo $options;?><br />
<?php
} ?> 
```

修改了 !empty($drinksPost[$drinksIndex]) 部分并更改为关联。

如果这不起作用，你可以包括 $drinks_checkbox

# php - 检查字符串是否会在 PHP 中转换为日期

> ID：10671086
> 
> 赞同：4
> 
> 时间：2012-05-20T05:39:07.910
> 
> 标签：php, validation, date

一个简单的跟进从较早的问题（[PHP中的日期函数](https://stackoverflow.com/questions/10670970/date-functions-in-php)）我有以下代码：

```
$date_str = "Jan 14th 2011";
$date = new DateTime($date_str);
echo $date->format('d-m-y'); 
```

我想知道是否有一种简单的方法可以检查 $date_str 是否会转换为日期，以便在失败时停止防止错误？

基本上我希望避免使用 try catch 语句，但也许这是不可能的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-20T05:41:46.390

根据[文档](http://php.net/manual/en/datetime.construct.php)，如果无法正确解析日期，则 DateTime 构造函数将引发异常。所以...

```
try {
    $date = new DateTime($date_str);
} catch (Exception $e) {
    die("It puked!");
} 
```

如果您使用的是过程接口，则会得到一个布尔值 false，所以...

```
$date = date_create_from_format(...);
if ($date === FALSE) {
    die("It puked!");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T05:43:40.560

因为如果传递了不正确的值，DateTime 类将引发异常。处理异常的唯一方法是使用 try catch 语句。

```
try {
    $date = new DateTime($date_str);
    $date->format('d-m-y');
} catch(Exception $e) {
    //$e will contain the caught exception if any.
} 
```

我认为没有理由跳过 try catch 方法。如果你想验证日期输入，那么你可能想看看 php 的[checkdate](http://in.php.net/checkdate)函数

# cocoa-touch - UIScrollview 内的 TTImageView 没有收到触摸

> ID：10671089
> 
> 赞同：0
> 
> 时间：2012-05-20T05:40:38.487
> 
> 标签：cocoa-touch, uiscrollview

我在 UIScrollview 中遇到了 TTImagViews 的问题。我搜索了高低，但真的找不到解决方案。有趣的是，点击手势适用于滚动视图内的最后一个 TTImageview。例如，我有 10 张图像，用户可以滚动，并且**触摸手势仅适用于第 2 页的第 10 张图像，或者更确切地说，最后一张图像**。这是我的代码；有什么建议么？

```
 UIScrollView *imageScroll=[[UIScrollView alloc] initWithFrame:CGRectMake(70, postMessageLabel.frame.size.height+10, 250, 78)];
    [imageScroll setContentSize:CGSizeMake(70 * ([[images objectAtIndex:0]count])+10,64)];        
    int startAtX=5;
    for(int i=0;i<[[images objectAtIndex:0]count];i++){
        if([[GlobalFunctions sharedGlobalFunctions] isValidURL:[[images objectAtIndex:0] objectAtIndex:i]]){
            TTImageView *imageView=[[TTImageView alloc] initWithFrame:CGRectMake(startAtX, 5, 64, 64)] ;
            imageView.userInteractionEnabled=YES;  
            [imageView addGestureRecognizer:thumbnailTap];                 
            imageView.urlPath=[[images objectAtIndex:0] objectAtIndex:i];
            imageView.autoresizesToImage=NO;
            imageView.defaultImage=nil;
            imageView.delegate=self;    
            [imageView setBackgroundColor:[UIColor blackColor]];
            [imageScroll addSubview:imageView];
            [imageView release];

        }
            startAtX+=70;            
    }

    [imageScroll setBounces:YES];
    [imageScroll setDelaysContentTouches:YES];
    [imageScroll setCanCancelContentTouches:NO];
    [self.view addSubview:imageScroll];
    [imageScroll release]; 
```

是的，如果 uiscrollview 中只有一个 ttimageview，那么点击手势可以完美运行。我不知道为什么！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T05:54:43.167

在 UIView 中添加图像视图，然后向该 UIView 添加点击手势。这对我有用，也对你有用。尝试以下操作：

```
UIScrollView *imageScroll=[[UIScrollView alloc] initWithFrame:CGRectMake(70, postMessageLabel.frame.size.height+10, 250, 78)];
    [imageScroll setContentSize:CGSizeMake(70 * ([[images objectAtIndex:0]count])+10,64)];        
    int startAtX=5;
    for(int i=0;i<[[images objectAtIndex:0]count];i++){
        if([[GlobalFunctions sharedGlobalFunctions] isValidURL:[[images objectAtIndex:0] objectAtIndex:i]]){
            TTImageView *imageView=[[TTImageView alloc] initWithFrame:CGRectMake(0, 0, 64, 64)] ;
            imageView.userInteractionEnabled=YES;  
            [imageView addGestureRecognizer:thumbnailTap];                 
            imageView.urlPath=[[images objectAtIndex:0] objectAtIndex:i];
            imageView.autoresizesToImage=NO;
            imageView.defaultImage=nil;
            imageView.delegate=self;    
            [imageView setBackgroundColor:[UIColor blackColor]];

UIView *viewWithImg=[[UIView alloc] initWithFrame:CGRectMake(startAtX, 5, 64, 64)];
        [viewWithImg addSubview:imgView];
        viewWithImg.tag=i;
        UITapGestureRecognizer *tapGesture2 =
        [[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(singleTapGestureCaptured2:)];        
        tapGesture2.numberOfTapsRequired = 1;
        tapGesture2.numberOfTouchesRequired=1;
        [viewWithImg addGestureRecognizer:tapGesture2];

            [imageScroll addSubview: viewWithImg];
            [imageView release];

        }
            startAtX+=70;            
    }

    [imageScroll setBounces:YES];
    [imageScroll setDelaysContentTouches:YES];
    [imageScroll setCanCancelContentTouches:NO];
    [self.view addSubview:imageScroll];
    [imageScroll release]; 
```

并在 singleTapGestureCaptured2 方法中

```
-(void)singleTapGestureCaptured2:(UITapGestureRecognizer *)gesture
{
    NSLog(@"image tag or arr index from images array: %d",[[gesture view] tag]);    
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T08:29:50.720

好吧，看起来我的代码没有问题；唯一的区别是我如何附加手势识别器。即使我修复了，我也不确定为什么会出错。这就是发生的事情

1.  我已经用典型的 alloc init 在我的 viewdidload 中声明了一个手势识别器。
2.  因此，我假设，手势识别器在整个视图中都可用。我只是不断地将它添加到图像循环中。

第2步; 似乎是问题所在。当我为每个图像声明一个手势识别器并在分配它后释放它时，问题就消失了。

所以从技术上讲，对于每张图片

```
---Create a gesture recognizer
   |-Attach it to the TTImageView
---Release the gesture recognizer 
```

这解决了问题。但我仍然很好奇，为什么手势识别器在分配给单个图像时工作，而当我将其分配给多个图像视图时失败。

感谢 Abdullah 的尝试，但你的解决方案让我无处可去。

# jquery-mobile - 使用 jQuery Mobile 在页面之间传递数据？

> ID：10671092
> 
> 赞同：7
> 
> 时间：2012-05-20T05:42:43.430
> 
> 标签：jquery-mobile, get

所以我刚刚开始学习 jQuery Mobile，并且了解了它如何通过 ajax 加载所有链接，而无需实际加载下一页。我的几个页面使用表单和 GET 将数据传递到下一页——在使用 jQuery Mobile 时如何做到这一点？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-20T07:50:25.587

我认为 JQM 很酷的一件事是您不必使用参数在页面之间传递数据。由于您与第一页在同一个 DOM 中，因此您可以使用普通的旧变量访问数据，即

```
field1 = $('[name=field1]').val();
field2 = $('[name=field2]').val(); 
```

只要您使用 JQM 的 ajax 功能，您就可以在下一页中执行以下操作：

```
$('.title').text(field1); 
```

我为你做[了一个 jsfiddle 例子](http://jsfiddle.net/codaniel/Zq32c/1/)。

其他方法是使用 localStorage 或 sessionStorage api，或者文档中也提到了一些插件。

1.  [页面参数](https://github.com/jblas/jquery-mobile-plugins/tree/master/page-params)
2.  [JQM路由器插件](https://github.com/azicchetti/jquerymobile-router)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-20T09:26:14.690

jQuery Mobile 页面之间传递参数通常有两种方法。

1.  在第一页修改ajax地址，在下一页解析ajax获取参数。
2.  使用 HTML5 sessionStorage（一种 WebStorage）来传递参数。

* * *

这是使用ajax地址传递参数的方法。 [如何在 Jquery Mobile 中的两个页面之间传递和获取参数？](https://stackoverflow.com/questions/7582781/how-to-pass-and-get-parameters-between-two-pages-in-jquery-mobile)

* * *

使用 sessionStorage/localStorage 传递参数，您可以在第一页添加此代码，

```
<a href="#page_Parameter1" onclick="sessionStorage.ParameterID=123">
    Before go to next page, parameter id is storaged into sessionStorage.
</a> 
```

在下一页，您可以使用此方法获取参数内容，

```
$('#page_Parameter1').live('pageshow', function(event, ui) {
    alert('Parameter ID: ' + sessionStorage.ParameterID);
}); 
```

# php - str_word_count() 没有 HTML

> ID：10671094
> 
> 赞同：1
> 
> 时间：2012-05-20T05:43:18.407
> 
> 标签：php, ckeditor

我`str_word_count()`用来计算内容中的字数`CKEditor`。我从 CKEditior 得到的内容是 HTML 内容，我需要计算字数。用 MS 的话，我得到的字数是 328。另一方面，在 html 标签中，我在使用`str_word_count()`362 个字后从我的内容中得到。有没有办法从 php 字符串变量中删除任何 HTML 标签？我尝试使用`strip_tags()`，它给了我 336。有没有办法在 PHP 中获得确切的字数？先感谢您。

例如这样的用户输入的这篇文章。

> 混合学校或男女学校
> 
> 你有没有想过混合学校对学生的影响？美国的大多数学校都是混合性别的，这意味着女孩和男孩在同一个教室里互相学习。一些家长想知道他们的孩子在学校的影响，无论是在混合学校还是在男女皆宜的学校。这些影响不仅与教育有关，还与他们的个性、与异性的行为以及最终他们的教育有关。在我看来，我认为面向青少年学生的男女皆宜的学校比混合学校要好得多，这个结论有很多原因。

在 MS 单词中，字数是：`107`

在php中

> `&nbsp;`
> 
> 混合学校或男女学校
> 
> `&nbsp;`
> 
> 你有没有想过混合学校对学生的影响？美国的大多数学校都是混合性别的，这意味着女孩和男孩在同一个教室里互相学习。一些家长想知道他们的孩子在学校的影响，无论是在混合学校还是在男女皆宜的学校。这些影响不仅与教育有关，还与他们的个性、与异性的行为以及最终他们的教育有关。在我看来，我认为面向青少年学生的男女皆宜的学校比混合学校要好得多，这个结论有很多原因。

结果：`114`

我正在为一篇文章计算额外的 7 个单词。

## 编辑

使用后

```
 $text = strip_tags($this->orginal_content);
    $text = str_replace('&nbsp;',"",$text);
    $this->orginal_content_count = str_word_count($text); 
```

结果：`112`

我找到了 3 个空格

```
 Mixed School or Unisex School       Have you ever think about the impact of mixed schools for students? Most of the schools in the U.S are mixed gender, which mean girls and boys are studying with each other in the same classroom. Some parents wonder about the influences of their child’s in the school either in mixed school or in unisex ones. These influences are not about the education only, the influences about their personality, behavior with the opposite sex and finally their education. In my opinion, I think the unisex schools for teenager’s students are much better than mixed schools, and this conclusion based in many reasons. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T06:41:11.827

好的。

你已经知道了`strip_tags()`。这是一个好的开始。

You're replacing `&nbsp;` with a space, but that only deals with that single specific entity. You would be better off using PHP's [`html_entity_decode()` function](http://php.net/manual/en/function.html-entity-decode.php) which will get rid of all of the entity codes from your string.

If extra spacing is causing you problems, you could try doing `str_replace()` or `preg_replace()` to get rid of them. eg:

```
$output = preg_replace('/\s\s+/',' ',$input); 
```

This will convert all multiple-whitespace instances into a single space character.

Now your word count should work a little better.

Hope that helps.

# jquery - Which jQuery attribute do I need to use to find specific text?

> ID：10671096
> 
> 赞同：1
> 
> 时间：2012-05-20T05:43:34.803
> 
> 标签：jquery

I'm trying to target the `a` tags that contain the html `next &raquo;` and add a class to that tag. I have tried using jQuery's `contains` but obviously it didn't work since I'm here.

```
$('a').contains('next &raquo;').addClass('next'); 
```

Which attribute do I need to use for this?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T05:48:07.300

You are looking for the `:contains()` selector ([ref](http://api.jquery.com/contains-selector/)):

```
$('a:contains("next »")').addClass('next'); 
```

# eclipse - Eclipse JPA 项目（eclipselink、derby）——“从实体创建表”在模式中生成表。但不适用于 SELECT * FROM TABLE_NAME；

> ID：10671102
> 
> 赞同：1
> 
> 时间：2012-05-20T05:44:16.737
> 
> 标签：eclipse, jpa, eclipselink, derby, entitymanager

我正在使用 eclipse JPA 项目在 Apache Derby 中创建实体。我正在使用 JPA 工具：

```
"generate tables from entities.." 
```

命令。当我使用这个命令时，表被放入数据库中。我可以看到这些表，并且它们具有来自 Eclipse“数据源资源管理器”的列。当我通过 ij 登录到 Derby 时。

我输入：

```
'show tables in schema x'; 
```

我得到与实体对应的表名列表。我输入：

```
'select * from <table in x>' 
```

我得到：

```
ERROR 42X05: Table/View 'ADDRESS' does not exist. 
```

为什么我的桌子不粘..？当我使用在使用“从实体生成表..”命令期间输入的 CREATE TABLE 命令时，它们会在那里生成表。当我输入“select * ..”时，我得到了一张桌子。

第二，可能相关的问题。我有一堂课。我使用以下命令来获取实体管理器：

```
EntityManagerFactory emf = Persistence.createEntityManagerFactory("DataModelAccess");

EntityManager em = emf.createEntityManager(); 
```

如果我对我的实体进行测试，例如：

```
public void runTest()
{
    EntityManagerFactory emf =
        Persistence.createEntityManagerFactory("DataModelAccess");

    EntityManager em = emf.createEntityManager();

    System.out.println(emf == null);

    Address address = new Address();
    address.setAddressID("1");
    address.setAddressNumber(1746);
    address.setStreetName("Howard");
    address.setStreetType("Court");
    address.setCity("Lennyville");
    address.setState("CT");
    address.setZipcode(73625);
    em.persist(address);
    em.close();
    emf.close();

    // reassign:
    emf = Persistence.createEntityManagerFactory("DataModelAccess");
    em = emf.createEntityManager();

    Address address2 = em.find(Address.class, "1");
    System.out.println(address2.getCity()); 
```

我在最后一行得到一个 NullPointerException。

如果我不重新分配给 emf 和 em，它**会将**城市打印到控制台。

**所以，**

**1\. 为什么SELECT * FROM <TABLE_NAME>没有出现表？**
     **但是会出现在 <SCHEMA> 中的 SHOW TABLES 中吗？**

**2\. 为什么我的数据不能跨会话持久化？**

我在 Eclipse 中从一个普通的旧 Java SE 对象运行它。没有 Java EE 容器。这是一个 Eclipse JPA 项目。有一个 persistence.xml 文件。有一个名为 'derby' 的连接由 eclipse 管理。也许我有一个 persistence.xml 文件问题？也许这是每个人的共同问题。由于某些不同的访问协议，JPA 和 eclipselink 可能会默认执行此操作？也许没有 Java EE 容器会变得很困难？

========

根据要求：地址类是完全无关的。我也尝试过基于字段和属性的访问。这对IJ没有任何影响。两种尝试都同样失败。这是一个总结：

```
@Entity 
@Table(name="ADDRESS") 
public class Address 
implements Serializable

...

@Id 
public String getAddressID() 
```

其他一切都是字段、构造函数、getter 和 setter。没有注释。我刚刚通过右键单击我的包并选择添加了一个新的 JPA 实体

```
New --> JPA Entity 
```

我使用 Eclipse 向导将字段放入其中。我使它基于属性。我想也许基于字段的访问会改变一些事情，所以我尝试了基于字段的访问，但没有任何区别。

你在哪里看到这个：address.setStreetName("Howard"); 有字段：

```
private String streetName; 
```

和两个对应的方法

```
setStreetName(String x); 
```

和

```
String getStreetName(); 
```

类中的所有字段都存在相同的公式。每个字段都有一个 getter 和一个 setter。没有比 getter 和 setter 更多的方法了。每个 getter/setter 方法对 1 个字段。没有比我提到的更多的注释。

仅供参考：我没有设置 Address 类的所有属性。表中的字段都作为 NULLABLE 输入到数据库中。然而，IJ 没有找到任何 TABLE。– user1405870 11 小时前

=========

这是 Address 和 Address_ 类：

```
package dataAccess.customer;

import javax.annotation.Generated;
import javax.persistence.metamodel.SingularAttribute;
import javax.persistence.metamodel.StaticMetamodel;

@Generated(value="Dali", date="2012-05-18T21:44:02.229-0500")
@StaticMetamodel(Address.class)
public class Address_ 
{
    public static volatile SingularAttribute<Address, String> addressID;
    public static volatile SingularAttribute<Address, Integer> addressNumber;
    public static volatile SingularAttribute<Address, String> streetName;
    public static volatile SingularAttribute<Address, String> streetType;
    public static volatile SingularAttribute<Address, String> building;
    public static volatile SingularAttribute<Address, String> floor;
    public static volatile SingularAttribute<Address, String> unit;
    public static volatile SingularAttribute<Address, String> landmarkName;
    public static volatile SingularAttribute<Address, String> city;
    public static volatile SingularAttribute<Address, String> state;
    public static volatile SingularAttribute<Address, Integer> zipcode;
} 
```

* * *

```
package dataAccess.customer;

import java.io.Serializable;
import java.lang.Integer;
import java.lang.String;
import javax.persistence.*;

/**
 * Entity implementation class for Entity: Address
 * 
 */
@Entity
@Table(name="ADDRESS")
public class Address
implements Serializable
{

    private String addressID;

    private Integer addressNumber;

    private String streetName;

    private String streetType;

    private String building;

    private String floor;

    private String unit;

    private String landmarkName;

    private String city;

    private String state;

    private Integer zipcode;

    private static final long serialVersionUID = 1L;

    public Address()
    {

    }

    @Id
    public String getAddressID()
    {
        return addressID;
    }

    public void setAddressID(String addressID)
    {
        this.addressID = addressID;
    }

    public Integer getAddressNumber()
    {
        return this.addressNumber;
    }

    public void setAddressNumber(Integer addressNumber)
    {
        this.addressNumber = addressNumber;
    }

    public String getStreetName()
    {
        return this.streetName;
    }

    public void setStreetName(String streetName)
    {
        this.streetName = streetName;
    }

    public String getStreetType()
    {
        return this.streetType;
    }

    public void setStreetType(String streetType)
    {
        this.streetType = streetType;
    }

    public String getBuilding()
    {
        return this.building;
    }

    public void setBuilding(String building)
    {
        this.building = building;
    }

    public String getFloor()
    {
        return this.floor;
    }

    public void setFloor(String floor)
    {
        this.floor = floor;
    }

    public String getUnit()
    {
        return this.unit;
    }

    public void setUnit(String unit)
    {
        this.unit = unit;
    }

    public String getLandmarkName()
    {
        return this.landmarkName;
    }

    public void setLandmarkName(String landmarkName)
    {
        this.landmarkName = landmarkName;
    }

    public String getCity()
    {
        return this.city;
    }

    public void setCity(String city)
    {
        this.city = city;
    }

    public String getState()
    {
        return this.state;
    }

    public void setState(String state)
    {
        this.state = state;
    }

    public Integer getZipcode()
    {
        return this.zipcode;
    }

    public void setZipcode(Integer zipcode)
    {
        this.zipcode = zipcode;
    }

} 
```

这是persistence.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
    <persistence-unit name="DataModelAccess" transaction-type="RESOURCE_LOCAL">
        <class>dataAccess.customer.Person</class>
        <class>dataAccess.customer.Address</class>
        <class>dataAccess.customer.PhoneNumber</class>
        <class>dataAccess.customer.Customer</class>
        <class>dataAccess.customer.TwoFieldTest</class>
        <exclude-unlisted-classes>true</exclude-unlisted-classes>
        <properties>
            <property name="eclipselink.ddl-generation.output-mode" value="database"></property>
            <property name="eclipselink.target-database" value="derby"/>
            <property name="eclipselink.target-server" value="None"/>
            <property name="eclipselink.exclude-eclipselink-orm" value="true"/>
            <property name="eclipselink.jdbc.batch-writing" value="JDBC"/>
            <property name="eclipselink.jdbc.cache-statements" value="true"/>
            <property name="eclipselink.jdbc.native-sql" value="true"/>
            <property name="javax.persistence.jdbc.url" value="jdbc:derby://localhost:1527/sample;create=true"/>
            <property name="javax.persistence.jdbc.driver" value="org.apache.derby.jdbc.ClientDriver"/>
            <property name="eclipselink.jdbc.bind-parameters" value="false"/>
            <property name="eclipselink.jdbc.exclusive-connection.mode" value="Transactional"/>
            <property name="eclipselink.orm.validate.schema" value="true"/>
            <property name="eclipselink.orm.throw.exceptions" value="true"/>
            <property name="eclipselink.ddl-generation" value="drop-and-create-tables"/>
        </properties>
    </persistence-unit>
</persistence> 
```

评语：
打电话

```
em.flush(); 
```

正是我所做的，以检查数据是否在会话中持续存在（它没有）。换句话说，当我运行方法“runTest()”时，我得到了正确的打印语句，在原始的 runTest() 方法下。我已经发布了修改后的“runTest()”方法（参见：//reassign“comment”）。现在，当我有一个客户时，我构建了三个实体：地址、电话号码和个人，客户可以通过在实体管理器中“在数据库中”查找其他三个实体来实例化。但是，如果我注释掉所有内容，除了在数据库中查找三个实体并创建新客户的代码之外，我发现我无法从数据库中获取数据。

看起来像这样：

```
 Customer c = new Customer();
    c.setAddress(em.find(Address.class, "1"));
    c.setPhoneNumber(em.find(PhoneNumber.class, "1"));
    c.setName(em.find(Person.class, "1"));
    c.setCustomerID("123");
    em.persist(c);
    */
    Customer actual = em.find(Customer.class, "123"); 
```

当我在 em.persist(c) 之前注释掉所有内容时，我没有得到任何实际的客户。

通常，我得到这个：

```
Customer: 
Name: 
Mr. Howard T Stewart III

Address: 
1746 Howard Court
Lennyville, CT 73625

Phone: 
(215) 256-4563 
```

但是当我注释掉一切直到

```
Customer actual = em.find(Customer.class, "123"); 
```

（现在..我在上一行中实例化了 em，但我现在没有创建人员、电话号码或地址。）

然后，..我明白了，

```
(actual == null) 
```

评估为真。

我是否滥用了“find()”命令？我是否应该做其他事情来加载与数据库的当前连接或其他事情（就通过 em (em.method()) 的命令而言）？

请记住，这里没有 Java EE 容器。我只是在eclipse中这样做，在j2se程序中运行主要方法，在eclipse中的JPA项目中，使用eclipselink 2.3。但这不是 EJB，也不是 ManagedBeans 等。

所以..

我找到了这个：

```
@Resource
UserTransaction utx;
...
try {
utx.begin();
bookDBAO.buyBooks(cart);
utx.commit();
} catch (Exception ex) {
try {
utx.rollback();
} catch (Exception exe) {
System.out.println("Rollback failed: "+exe.getMessage());
}
... 
```

不幸的是，在我进入 java ee 教程的 Web 部分之前，我没有找到任何关于 UserTransaction 的信息，因此，在 em.persist( ) 就是一切。此外，@Resource 可能无法在 Java EE 容器之外工作。

* * *

丹尼尔：谢谢你的评论，它给了我需要的答案。

即使我找到了上述项目，虽然我正在这样做：

```
em.getTransaction().begin();

// .. set fields of address .. 
em.persist(address);    

em.getTransaction().commit();
em.close(); 
```

它仍然无法正常工作。当我将persistence.xml 文件更改为仅创建表时，测试方法运行正确，并且当我注释掉所有内容但从数据库中检索客户时，它也正确返回。

我也试过：

```
SELECT * FROM <SCHEMA>.ADDRESS; 
```

这也很好。非常感谢，因为在教程中很难找到实体管理器由于“DROP AND CREATE TABLES”指令而实际在做什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T15:41:56.173

在你的 persistence.xml 你有，

```
<property name="eclipselink.ddl-generation" value="drop-and-create-tables"/> 
```

这意味着每次您创建一个新的 EntityManagerFactory 时，您都将重新创建您的数据库，从而丢失所有数据。

要么删除它，要么将其更改为“create-tables”以仅创建。

对于您的第一个问题，请尝试 ., iexaddress

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-18T18:52:45.933

由于您使用的是 Eclipselink JPA，因此如果您使用标准的“createQuery”方法，它将不遵循 SQL 查询的标准语法您需要使用这个：

```
select t from table1 t 
```

代替

```
select * from table1 
```

它遵循 JPQL 的语法。有关更多信息，请参阅此[链接](http://en.wikipedia.org/wiki/Java_Persistence_Query_Language)。

但是如果你想使用原生 sql 方法，请使用管理器实例中的“createNativeMethod”

# javascript - 回调方法中的 Javascript this Context

> ID：10671103
> 
> 赞同：1
> 
> 时间：2012-05-20T05:44:21.143
> 
> 标签：javascript, ajax, this

我是 Javascript 的新手。这段代码大部分都有效，但发生了一些奇怪的事情。当我调用`.send()`它时，它会触发异步请求并正常返回，但问题是`this`调用该`WebCall.prototype.__stateChangedCallback`方法时的上下文。在 Chrome`this`中是 XMLHttpRequest 对象，而我原以为它会是`WebCall`对象。谁能向我解释这是为什么？

```
function log (message) {
    if(typeof console == "object") {
        console.log(message);
    }
}

function WebCall () {
    var __callMethod;
    this.__callMethod = this.createXmlHttpRequest();
}

WebCall.prototype.createXmlHttpRequest = function () {
    if(window.XMLHttpRequest) {
        return new XMLHttpRequest();
    } else {
        return new ActiveXObject("Microsoft.XMLHTTP");
    }
}

WebCall.prototype.beginGet = function(url) {
    this.__callMethod.open("GET", url, true);
    this.__callMethod.onreadystatechange = this.__stateChangedCallback;
    this.__callMethod.send();
}

WebCall.prototype.__stateChangedCallback = function(readyState, status) {
    // this points to the XMLHttpRequest rather than the WebCall object WHY??!
    var request = this.__callMethod;
    if(request.readyState == 4) {
        if (request.status == 200) {
            this.onRequestCompleted(request);
        } else {
            this.onRequestFailed(status, request);
        }
    }
}

WebCall.prototype.onRequestCompleted = function (request) {

}

WebCall.prototype.onRequestFailed = function(status, request) {
    log("Request failed status= " + status);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T06:02:11.457

你所拥有的`WebCall.prototype.__stateChangedCallback`只是对匿名函数的引用：

```
WebCall.prototype.__stateChangedCallback = function(readyState, status) {
   //......................................^^^^ anonymous function
} 
```

这一行：

```
this.__callMethod.onreadystatechange = this.__stateChangedCallback; 
```

意味着，您对同一个匿名函数有另一个引用。此匿名函数不是原型对象的一部分。您*只需*在原型对象中对其进行引用。

解决方法是这样的：

```
var that = this;
this.__callMethod.onreadystatechange = function(readyState, status){
    //Calling anonymous function with 'this' context
    WebCall.prototype.__stateChangedCallback.apply( that, arguments );
} 
```

# javascript - 如何在 Fabric.js 中保存画布？

> ID：10671105
> 
> 赞同：5
> 
> 时间：2012-05-20T05:45:10.930
> 
> 标签：javascript, fabricjs

我正在尝试实现小型在线绘图和图像工具。出于这个原因，我喜欢使用织物。在我的程序中，我想将画布发送到 PHP。否则我想将画布保存为 web 目录中的 jpeg 图像。

如何将画布的结果保存或导出为图像。

# javascript - jquery对话框关闭功能

> ID：10671109
> 
> 赞同：1
> 
> 时间：2012-05-20T05:46:38.210
> 
> 标签：javascript, jquery, dialog

我想在单击对话框上的关闭 (X) 按钮时执行一些 javascript 功能。我测试了一些代码，但对我没有用。这样做

```
$(#dialog).close 
{
function one();
function two();
...
} 
```

tset 这不起作用：

```
<script>

  function beh()
  {
  $(document).ready(function() {
    $("#dialog").dialog({
    beforeClose: function(event, ui) {
      alert('hi');
   },
    width: 660,
    height: 495,
    closeOnEscape: false,
    hide: "fadeout",
    resizable: false,
    }
    );
  });
  }
  </script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T05:49:30.917

您应该像这样将回调附加到[`beforeclose`](http://jqueryui.com/demos/dialog/#event-beforeClose)事件：

```
$('#dialog').dialog({
   beforeClose: function(event, ui) {
       //call functions 
       customfunction1();
       customfunction2();
   }
}); 
```

然后当您[关闭](http://jqueryui.com/demos/dialog/#method-close)对话框时，它应该触发：

```
$('#dialog').dialog('close'); 
```

# jquery - Jquery UI Tab - 未单击时ajax选项卡不会完成加载

> ID：10671110
> 
> 赞同：0
> 
> 时间：2012-05-20T05:46:54.503
> 
> 标签：jquery, jquery-ui

我的 UI 选项卡有问题，当我使用带有 ajax url 的添加功能时，新选项卡在我单击它或使用选择功能之前不会加载，有没有办法在我使用之前先完成 ajax 加载的选项卡选择？我`$tabs.tabs('select', '#' + ui.panel.id);`在添加时使用它来选择选项卡，但有时需要一段时间才能完成 ajax 并且看起来不太好。

**这就是我初始化选项卡的方式：**

```
var $tabs = $(".tabs").tabs({
    ajaxOptions: {
        cache: false,
        success: function(xhr, status) {}
    },
    cache: true,
    spinner: '&nbsp;<img src="<?=base_url()?>images/ajax-loader-small.gif" alt="Loading..."/>',
    tabTemplate: "<li class='override_tabs'><a class='override_tab_anchors' href='#{href}'>#{label}" + "" + "<span><div style='text-align:center; display:none;' class='showarrow' id='#{label}'>" + "<img alt='up arrow' src='<?=base_url()?>images/up_arrow_tab.png'>    " + "</div>" + "</span></a><span class='override_close_icon' style='cursor: pointer;'>&nbsp;&nbsp;&nbsp;</span>" + "</li>",
    add: function(event, ui) {
        $tabs.tabs('select', '#' + ui.panel.id);
    },
    select: function(e, ui) {
        $(".showarrow").hide();
        $(".override_tab_anchors_selected").removeClass('override_tab_anchors_selected');
        return true;
    },
    load: function(e, ui) {}
});​ 
```

**这就是我调用 ajax 选项卡的方式**

```
$tabs.tabs("add","<?=base_url()?>index.php/contracts/vieweditcontract/"+contract_id+"/"+contract_id,tab_title); 
```

注意：主要关注的是，如何在完成加载/渲染后选择选项卡。

# csrf - 我什么时候不想保护页面免受 CSRF 的影响？

> ID：10671116
> 
> 赞同：0
> 
> 时间：2012-05-20T05:48:21.100
> 
> 标签：csrf

我正在尝试使用[csrf 保护项目](https://www.owasp.org/index.php/Category%3aOWASP_CSRFGuard_Project)。

我什么时候不想保护页面免受跨站点请求伪造（有受保护和不受保护页面的选项）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T13:35:57.333

一般来说，您不想要 csrf 保护的唯一原因是因为添加它会破坏您网站的一部分。有时这可能是因为特定页面上已经有不同类型的 csrf 保护。

# foursquare - API签入的实时响应中没有源参数

> ID：10671118
> 
> 赞同：0
> 
> 时间：2012-05-20T05:48:44.823
> 
> 标签：foursquare

我有一个应用程序
- 通过 API 启动
签入 - 通过推送机制接收签入数据

API 调用返回的 JSON 对象包含表示应用程序的源参数。[这实际上似乎没有必要，因为我的应用程序正在启动 API 调用......]

发送到我的应用程序的相应实时推送响应不包含源参数。这是为什么？

我正在尝试过滤掉与我的应用签入相关的推送数据，最简单的方法是检查源参数。[我还可以检查签入 ID，并注意两条路径中的重复项；但如果始终包含源参数，这似乎是不必要的。]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T23:18:21.510

不幸的是，我们的 Push API 目前没有传递该特定字段。你到底想做什么？

如果您希望获得有关您自己的应用签到的实时通知，那么您似乎真的不需要foursquare 的推送API？您可以让您的应用程序在您在foursquare上签入用户的同时（或之后）将您想要的信息发送到您自己的服务器，这样您仍然可以获得实时信息。

如果这对您不起作用，如果用户已授权您的应用程序（如果您使用的是用户推送 API，则会出现这种情况），您可以查询我们的签入详细信息端点（https://developer.foursquare .com/docs/checkins/checkins）来获取该信息，并过滤掉您不感兴趣的签到。

# c# - 在不显示单声道运行时终端的情况下运行 MonDevelop gtk# 程序 - Ubuntu

> ID：10671123
> 
> 赞同：0
> 
> 时间：2012-05-20T05:49:32.890
> 
> 标签：c#, ubuntu, mono, terminal, gtk#

当我用 MonoDevelop 编译我的 gtk# 项目时，它会创建文件并将它们放在 /bin/Release 中。但是当我双击该程序时，它会在后台显示单声道运行时终端。我希望能够在不显示运行时终端的情况下打开我的程序。有没有办法做到这一点？

注意：此程序仅用于 Ubuntu。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T12:36:19.777

我认为这不是在 Linux 上双击 Mono 程序集的最佳方式。

您可以尝试创建一个简单的可执行脚本，如下所示：

```
#!/bin/bash
mono /path/to/executable.exe 
```

给它可执行权限，而不是尝试执行它。

# android - 前视图背景透明

> ID：10671130
> 
> 赞同：1
> 
> 时间：2012-05-20T05:50:54.173
> 
> 标签：android, android-layout

我在 textView 前面添加了一个视图。但我希望我可以通过我的视图看到文本。像这样：![在此处输入图像描述](../Images/a42bef6d89cce10a02d8089399e2ed4d.png)

在此先感谢，任何答案都将不胜感激：D

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T05:56:06.757

在 XML 布局中，使背景半透明。如果这是一个简单的视图，请将其添加到您的主布局中：

```
android:background="#80FFFFFF" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T06:11:18.297

您可以通过此创建一个透明对话框。

```
public class DialogActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        final AlertDialog alertDialog = new AlertDialog.Builder(this).create();
        alertDialog.setTitle(" ");
        alertDialog.setMessage("");
        alertDialog.setIcon(R.drawable.icon);
        alertDialog.setButton("Accept", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {                
            }
        });
        alertDialog.setButton2("Deny", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int which) {
            }
        });
        alertDialog.show();
    }
} 
```

在此之后，只需在 AndroidManifest.xml 中添加一行，您可以在其中在清单中定义您的活动。

```
android:theme="@android:style/Theme.Translucent.NoTitleBar" 
```

试试下面的代码

```
Dialog mDialog = new Dialog(mContext, android.R.style.Theme_Translucent_NoTitleBar_Fullscreen); 
```

# windows - mac os x和windows上的rtf差异格式

> ID：10671132
> 
> 赞同：1
> 
> 时间：2012-05-20T05:52:05.480
> 
> 标签：windows, macos, rtf

我尝试使用objective-c 代码来读取mac osx 上的rtf（有图像）。我注意到 mac 上的应用程序 Textedit 总是删除 rtf 文件的图像信息。我在 Windows 上检查 rtf 的二进制代码。rtf 文件总是将图像更改为长文本字符串。

我不确定mac和win上的rtf定义是否有区别？

欢迎任何评论

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T15:18:28.660

我可能是错的，但我提醒 Mac OS X Textedit 在您添加图像时使用 RTFD 格式，而 Windows 保持在 RTF 上并将数据直接放入文本文件中。

RTFD 是一种包格式（实际上是一个文件夹），将图像分别存储为文件和文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-06T20:32:44.927

You are kind of correct.

Windows uses and implements the full RTF spec, which allows for embedded images to be written as either Hex code or Hex code converted to binary code.

On Mac, TextEdit will read RTF files just fine but it does not implement the entire spec. Specifically TextEdit ignores RTF streams which have embedded images. This is pure laziness on Apple's part. Instead Apple likes to use RTFD containers which have the image and the RTF code links to that image. Unfortunately these containers do not work in Windows.

What this means? There is no real RTF compatibility between TextEdit and Windows and vice versa. This is a very frustrating problem that has been around for a very long time.

I have filed bug reports with Apple to request that they support the RTF spec. Version 1.9 can be downloaded [here](http://www.microsoft.com/en-us/download/details.aspx?id=10725).

# jsf - 如何更新调用模板中的菜单栏

> ID：10671133
> 
> 赞同：1
> 
> 时间：2012-05-20T05:52:06.530
> 
> 标签：jsf, primefaces

作为一个练习，我希望有一个菜单栏在用户登录之前被禁用。当他登录时，我想调用一些会触发更新的东西。菜单栏在`master.xhtml`模板文件中

```
<h:form >
  <p:menubar id="masterMenuBar">
  <p:menuitem disabled="#{backing.disableMenu}" value="List users" />
  </p:menubar>
</h:form> 
```

作为登录的一部分，我有代码来刷新表单

```
public void refreshForm() {
  RequestContext context = RequestContext.getCurrentInstance(); 
  context.update("form1"); 
  context.update("masterMenuBar");
} 
```

我尝试了调用我定义的标签的上下文更新，`masterMenuBar`但`RequestContext`显然不包括我的调用模板表单（这听起来很合理）。

是否有其他一些我可以调用的上下文，其中包括对我的菜单栏的上下文更新？也许我走错了路，有更好的方法来实现同样的目标吗？

我确实注意到即使调整浏览器的大小也不足以再次调用我的`backing.disableMenu`bean。显然我需要一些相当坚固的东西才能让它第二次到达我的豆子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T12:08:52.217

您需要传递绝对客户端 ID，而不是相对客户端 ID。如果您右键单击并在浏览器中查看源代码，那么您会看到该`masterMenuBar`元素具有其表单的（自动生成的）ID 作为前缀。

您需要提供菜单位于固定 ID 中的表单

```
<h:form id="menuForm">
    <p:menubar id="masterMenuBar">
        ... 
```

并改为传递绝对客户端 ID。

```
context.update("menuForm:masterMenuBar"); 
```

* * *

**更新**：对不起，它不应该`:`以`update`与`<p:commandButton>`.

# c++ - 启动std :: thread时无法将（函数指针）左值绑定到（函数指针）右值？

> ID：10671134
> 
> 赞同：3
> 
> 时间：2012-05-20T05:52:16.997
> 
> 标签：c++, multithreading, templates, c++11

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-22T20:10:07.837

You stumbled upon two bugs.

The first bug in GCC is that during the "perfect forwarding"-value category deduction, it thinks that `goo<int>` is an rvalue. But `goo<int>` is actually an lvalue. So instead of deducing `_Callable` to `void(void (*)(int), int)`, it should have deduced it to `void(&)(void (*)(int), int)`. Then reference collapsing would have yielded that lvalue reference as parameter type, instead of `void(&&)(void (*)(int), int)` like it incorrectly does with your GCC version.

During the actual initialization of the parameter, it also incorrectly rejects initialization of rvalue reference parameter by the function lvalue (I don't remember what the state of the working draft was when GCC4.5 was released - but possibly the draft had it ill-formed back then). For function type expressions, the Standard allows to initialize an rvalue reference to function type with an lvalue of function type.

Resolving a template id to a function lvalue is quite convoluted, so it doesn't surprise me GCC got it wrong (see [http://llvm.org/bugs/show_bug.cgi?id=7505](http://llvm.org/bugs/show_bug.cgi?id=7505) and [http://llvm.org/bugs/show_bug.cgi?id=7505](http://llvm.org/bugs/show_bug.cgi?id=7505) for two examples of how many rules interact for seemingly simple things).

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-20T06:12:24.607

An lvalue is an expression representing an object that can have its address taken. For example, the left-hand side of an assignment expression to a primitive type must be an lvalue: `int i; i = 3;` is OK whereas `5 = 3` is not. The difference is that `&i` is OK but `&5` is not.

`goo<int>` is an lvalue of function type, but expressions of function type are essentially useless in C and C++. They are invariably converted to function pointers, by taking the address. The resulting pointer is not an lvalue, since that would be taking the address of the address.

The bug in G++ is in when the address is implicitly taken. Apparently the conversion occurs before template deduction when you pass a non-template `goo` but after when you pass `goo<int>`. You need it to happen earlier, so the constructor doesn't attempt to receive a reference.

The unary `&` operator suffices to force the conversion:

```
TH= std::thread(&goo<int>,ptr,1); 
```

[http://ideone.com/mI05j](http://ideone.com/mI05j)

# jquery - jQuery map 分解一个纯字符串并 在不需要时添加

> ID：10671136
> 
> 赞同：2
> 
> 时间：2012-05-20T05:52:45.727
> 
> 标签：jquery

我正在使用以下内容：

```
var items = $.map(json.errors, function (error) {
return error + '</br>';
}).join(''); 
```

json.errors 可以是`IEnumerable<string>`或只是字符串。

当 json.errors 为 IEnumerable 时，items 将填充文本，`<br>`每个错误消息之间都有一个。`<br>`但是，当 json.errors 是一个字符串时，items 会在字符串的每个字符后填充错误字符串。

当 json.errors 只是一个普通字符串时，有什么方法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T06:00:51.630

首先测试`json.errors`的类型，如果它不是字符串，则仅继续修改其内容。您可以使用以下方法获取类型`typeof`：

```
if ( typeof json.errors === "string" ) {
  // Proceed understanding you're handling a string
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T06:02:56.400

由于您当前的代码`<br/>`在每个字符串之后添加一个，而不仅仅是*在*字符串之间，这将是等效的：

```
if (typeof json.errors === "string" ) {
    json.errors = [ json.errors ] ;
}

// continue as before 
```

# html - 使用 CSS 或 LESS 翻转背景

> ID：10671137
> 
> 赞同：3
> 
> 时间：2012-05-20T05:53:00.910
> 
> 标签：html, css, less

有没有办法使用 CSS 或 LESS 以编程方式翻转元素的背景？具体来说，我想反转按钮的背景渐变。我不希望按钮的内容被翻转 - 只是背景。

例如，这个：

```
.button {background-image:linear-gradient(top, #000, #fff);} 
```

应该变成：

```
.button:active {background-image:linear-gradient(top, #fff, #000);} 
```

------------ 编辑：添加更多细节。------------

使用这个 LESS 代码：

```
.button {

  background-image:linear-gradient(top, red, green);

  &.primary {background-image:linear-gradient(top, blue, yellow);}
  &.secondary {background-image:linear-gradient(top, brown, grey);}

  &:active {background-image:linear-gradient(top, ..., ...);}

} 
```

有没有办法让我反转渐变的方向，而不必为“.button”、“.primary”和“.secondary”类分别定义“:active”状态？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-07T20:19:11.510

## 使用较新的浏览器

这篇文章已经有一年多了，但我想我会注意到现在有一​​些新浏览器的解决方案。以下已在 IE10（IE9 及以下不可用）、FF21 和 Chrome27 中测试。

使用伪元素和变换，您可以获得您最初想要的。最初，一些问题不允许对伪元素进行转换，因此这在某些旧版本中不起作用。

**[这是示例小提琴。](http://jsfiddle.net/qV5sD/9/)**尽管对于后备支持，您[可能仍需要额外的供应商前缀](http://jsfiddle.net/qV5sD/8/)。

**较少的**

```
.button {

  background-image:linear-gradient(to bottom, red, green);
  position: relative;

  &:after {
     content: '';  
     position: absolute;
     top: 0;
     right: 0;
     bottom: 0;
     left: 0;
     z-index: -1;

     &:active {
       -webkit-transform: rotate(180deg);
          -moz-transform: rotate(180deg);
           -ms-transform: rotate(180deg);
            -o-transform: rotate(180deg);
               transform: rotate(180deg);
     }
  }

  &.primary {background-image:linear-gradient(to bottom, blue, yellow);}
  &.secondary {background-image:linear-gradient(to bottom, brown, grey);}

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T06:02:47.797

我不确定您的`background-image:linear-gradient(top, #fff, #000);`css 规则，但如果您想更改按钮的背景，我想这就是方式 - 而不是`.class`使用选择器，`[type='']`否则将`:active`无法正常工作：

```
input[type="button"] {background:#fff;}
input[type="button"]:active {background:#000}
[...]
<input type="button" value="Test"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T06:06:32.683

你的意思是这样的：

[http://jsfiddle.net/UgQvg/2](http://jsfiddle.net/UgQvg/2)

?

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-20T06:07:34.870

不幸的是，我不认为 LESS 可以那样工作。您基本上是在尝试使用外部范围引用嵌套范围的颜色 - 或者更确切地说，试图获得类似多态的行为。LESS 只是不这样做。这很麻烦，但您可能必须`:active`为每种按钮类型定义部分。看到[这个 JsFiddle](http://jsfiddle.net/ASuAR/3/)。

现在，我认为您*可以使用*[SASS](http://sass-lang.com/) （如 LESS，但基于服务器端，基于 Ruby）来做类似的事情，也许使用包含专用按钮类的列表变量，然后使用`@each`循环来生成`:active`样式。但这可能是矫枉过正，除非你有***很多***专门的风格。

尽管如此，如果您使用的是 LESS，您可能想看看[LESS Elements](http://lesselements.com/) - 一组有用的 mixin，其中包括渐变支持。

# php - 在 str_replace 中使用数组

> ID：10671144
> 
> 赞同：0
> 
> 时间：2012-05-17T02:55:29.407
> 
> 标签：php, arrays

这是有效的 PHP 语法吗？我认为它可能会导致以下警告：

`Warning: Illegal offset type`

```
$filterclear = str_replace($tag, '', $queryString);
$filterclear = str_replace(array('=+', '++', '+&'), array('=', '+', '&'), $filterclear); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T04:15:28.573

它看起来不错，所以我唯一能想到的是，您可能在`$tag`变量或`$queryString`变量中使用对象而不是字符串。我会尝试`var_dump()`使用这些变量来确保它们是正确的类型。如果他们是这个函数很可能不是罪魁祸首。

# operating-system - x86 页表是如何工作的？

> ID：10671147
> 
> 赞同：27
> 
> 时间：2012-05-20T05:55:20.730
> 
> 标签：operating-system, x86, virtual-memory, computer-architecture

我熟悉 MIPS 架构，它有一个软件管理的 TLB。因此，您（操作系统）想要存储页表和页表条目的方式和位置完全取决于您。例如，我做了一个带有单个倒置页表的项目；我看到其他人在每个进程中使用 2 级页表。

但是 x86 的故事是什么？据我所知，TLB 是硬件管理的。x86 是否告诉您，“嘿，这是您当前使用的页表条目需要去的地方 [物理地址范围]”？但是等等，我一直认为 x86 使用多级页表，所以它会告诉你在哪里放置第一级或其他什么...？我很困惑。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-05-20T06:02:20.670

进入保护模式后，CR3 寄存器指向一个“页面目录”（在进入保护模式之前你可以把它放在任何你想要的地方），它是一个内存页面（记住，一个“小”页面是 4 KiB，一个“大”页面为 4 MiB），包含 1024 个指向“页表”的页面目录条目 (PDE)。每个条目是指针的前 10 位（页表的地址），加上构成指针底部部分的一堆标志（存在、权限、脏等）。

（1024 只是来自页面是 4096 字节，指针是 4 字节的事实。）

每个“页表”本身就是 1024 个“页表条目”（PTE），其中又包含 1024 个指向内存中*物理页面*的条目，以及一堆（几乎相同的）标志。

因此，要转换 32 位虚拟地址，您将指针的前 10 位作为 CR3 表中的索引（因为有 2^(个 10)条目），并且 -- 如果该 PDE 被进一步细分（意味着它是'不是一个“大”页面，您可以从标志中找出）-您获取 PDE 的前 20 位，查找该地址的页表，并使用虚拟地址的*下一个*索引到它-topmost 10位。然后最高 20 位指向物理页面，假设最低 12 位告诉您物理页面实际存在。

如果您使用的是物理地址扩展 (PAE)，[那么您会在最顶层的层次结构中获得*另一个*](http://wiki.osdev.org/Paging#Physical_Address_Extension)级别。

注意：为了您自己的理智（也许是 CPU），您可能希望将页面目录和页表映射*到它们自己*，否则事情会很快变得混乱。:)

TLB 是硬件管理的——因此页表的缓存是透明的——但是有一条指令 InvlPG 会为您使 TLB 中的 PTE 无效。（我不知道什么时候应该使用它，什么时候不应该使用它。）

来源：[http ://wiki.osdev.org/Paging](http://wiki.osdev.org/Paging)

# android - android共享首选项问题

> ID：10671152
> 
> 赞同：0
> 
> 时间：2012-05-20T05:57:09.837
> 
> 标签：android

我想在两种情况下强制使用填充设置页面

1）当用户第一次启动应用程序时 2）当数据库版本发生变化时，我希望在继续之前先填写设置页面

在我的设置类中，我将共享首选项设置为“false”，然后在下面的代码中进行检查

类设置 //主类 String flag = sharedPreferences.getString("CreatedFlag","");

```
 if(flag.equals("true"))
       {
            // Move to second activity
            Intent i =new Intent();
            i.setClass(someclass.this,otherPage.class );
             startActivity(i);
            finish();
       }
     else
     { // Stay on Settings page } 
```

问题：当用户第一次启动应用程序时它运行良好，它显示设置页面并填充页面，但是当用户第二次运行应用程序时它再次显示设置页面，因为共享首选项仍然具有真实值，然后再次用户运行应用程序第三次共享首选项更新值为假，并显示其他页面

我想要的是如果没有设置定义，设置页面只显示一次，否则它会进入主页

需要帮忙 ，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T06:10:57.493

我没有在这里看到您实际保存首选项的位置，我假设它在 otherPage 活动中？

如果不将此添加到第一个活动

```
SharedPreferences prefs = this.getsharedPreferences("myApp",0);
//check for the Created value in the shared preferences
String createdFlag = prefs.getString("Created","false"); // set default value == false
if(createdFlag == "false){
    goToSettingsPage(); // to the settings page we go...
} 
```

然后在您的设置页面上：

```
SharedPreferences prefs = this.getSharedPreferences("myApp",0);
SharedPreferences.Editor ed = prefs.edit(); // create the editor
ed.putString("Created","true"); // put the value to the prefs
ed.commit(); // commit the changes 
```

第一次运行后，共享的 prefs 文件将被持久化，然后在第二次运行时不应转到设置页面。

# android - 安卓版本兼容性

> ID：10671154
> 
> 赞同：0
> 
> 时间：2012-05-20T05:58:12.933
> 
> 标签：android, version

我已经用 Java 开发了 Simple android 应用程序，并将其上传到`play.google.com`. 我上传成功并且发布得很好，我完成了发布和保存应用程序的所有步骤。发布后它显示在应用商店中。问题是当我在我的 android 设备上搜索应用程序时，它会给出“这个项目是与您的设备不兼容”。我不明白为什么会发生这个错误。请任何人告诉我如何制作与所有版本的 android 兼容的 android 应用程序或我的应用程序应该在所有 android 设备上运行的任何其他方法。

这是我的清单文件代码：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="sml.sml.pkg"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".SMLActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T06:28:16.913

发生这种情况的原因有很多。您很可能是：

1.  未指定您的应用程序兼容的正确最低 SDK。为此，您应该添加`AndroidManifest.xml`以下内容。

    ```
    <uses-sdk android:minSdkVersion="#" /> 
    ```

    其中`#`应替换为与您的应用程序支持的最小 SDK 编号相对应的整数。例如，如果您的应用程序具有 Gingerbread (API 10) 支持但 Froyo (API 8) 不支持的功能*，*那么您应该将数字指定为`10`. **请注意，您很少希望添加该`android:maxSdkVersion`属性，因为这将阻止设备在发布新 SDK 版本时使用您的应用程序。**

2.  您的应用程序使用了您的设备不支持的功能。如果您在清单中声明了`<uses-feature>`标记，则可能会出现这种情况。

* * *

编辑：

我刚刚看到您添加到原始帖子中的代码。具体来说，您的代码`<uses-sdk android:minSdkVersion="15" />`将阻止运行低于 15 的 Android 版本的 Android 设备使用您的设备。要允许旧版本使用您的应用程序，您需要降低此数字。确保您 100% 确定您选择的 SDK 支持您的应用程序所需的 100% 功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T06:17:04.533

您需要在 AndroidManifest.xml 中提供 android:minSdkVersion 和 android:maxSdkVersion。我认为您在项目中实现的版本不支持您的移动版本。因此，在 Androidmanifest 文件中只需按照如下所示进行更改......

Androidmanifest.xml

```
 <uses-sdk android:minSdkVersion="7" android:maxSdkVersion="11"/> 
```

还根据您的移动版本提供这些版本。如果您使用的是 android 2.2 意味着它的 API 级别是 8。所以提供 minSdkVersion 为 8。

# php - 从多个表中选择查询

> ID：10671155
> 
> 赞同：0
> 
> 时间：2012-05-20T05:58:24.673
> 
> 标签：php, mysql, sql

我有 6 个表，需要一次从这些表中检索一些数据。任何人都可以告诉我，我可以从一个查询中选择我的值吗？

我需要这些值。

```
institute_id
institute_name
city_name
options (relate to institute_id) 
mediums (relate to institute_Id) 
```

这些来自我的桌子

```
CREATE TABLE institutes (
    institute_id INT(4) UNSIGNED NOT NULL AUTO_INCREMENT,
    login_id INT(4) UNSIGNED NOT NULL,
    address_id INT(4) NOT NULL,
    contact_id INT(4) NOT NULL,
    institute_code INT(4) NOT NULL, 
    institute_name VARCHAR(80) NOT NULL, 
    institute_details VARCHAR(80) NOT NULL, 
) ENGINE=MyISAM DEFAULT CHARSET=utf8;

CREATE TABLE address (
    address_id INT(4) UNSIGNED NOT NULL AUTO_INCREMENT,
    address_one VARCHAR(40) NOT NULL, 
    address_two VARCHAR(40) DEFAULT NULL, 
    city_id INT(4) UNSIGNED NOT NULL,
    PRIMARY KEY (address_id),
) ENGINE=MyISAM DEFAULT CHARSET=utf8;

CREATE TABLE city(
    city_id INT(4) UNSIGNED NOT NULL AUTO_INCREMENT,
    city_name VARCHAR(30) NOT NULL, 
    state_id INT(2) UNSIGNED NOT NULL,
    PRIMARY KEY (city_id),
) ENGINE=MyISAM;

CREATE TABLE medium(
    medium_id INT(2) UNSIGNED NOT NULL AUTO_INCREMENT,
    medium_name VARCHAR(30) NOT NULL, 
    PRIMARY KEY (medium_id),
) ENGINE=MyISAM;

CREATE TABLE options(
    option_id INT(2) UNSIGNED NOT NULL AUTO_INCREMENT,
    option_name VARCHAR(60) NOT NULL, 
    PRIMARY KEY (option_id),
) ENGINE=MyISAM;

CREATE TABLE institute_medium(
    im_id INT(4) UNSIGNED NOT NULL AUTO_INCREMENT,
    medium_id INT(2) UNSIGNED NOT NULL,
    institute_id INT(4) UNSIGNED NOT NULL,
    PRIMARY KEY (im_id)
) ENGINE=MyISAM; 
```

这些是我的桌子

我尝试过这样，但是当我尝试获得选项和媒介时，我感到困惑。在一个研究所的 instutite_medium 中总是有不止一种选项和媒介...

```
$query = "SELECT 
              institute_id, institute_name, city_name, 
              DATE_FORMAT(registration_date, '%M %e, %Y') AS date
          FROM 
              institutes 
          INNER JOIN 
              address ON institutes.address_id = address.address_id
          INNER JOIN 
              city ON address.city_id = city.city_id
          ORDER BY 
              registration_date DESC"; 
```

非常感谢任何评论。

谢谢你...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T06:20:05.797

您可以执行以下操作：

```
SELECT 
          institute_id, institute_name, city_name, 
          DATE_FORMAT(registration_date, '%M %e, %Y') AS date,
          GROUP_CONCAT(mediums.name SEPARATOR ', ')
      FROM 
          institutes 
      INNER JOIN 
          address ON institutes.address_id = address.address_id
      INNER JOIN 
          city ON address.city_id = city.city_id
      LEFT JOIN 
          institute_medium ON institutes.institute_id = institute_medium.institute_id
      LEFT JOIN 
          medium ON institute_medium.medium_id = medium.medium_id
      ORDER BY 
          registration_date DESC 
```

Will **GROUP_CONCAT(mediums.name SEPARATOR ', ')**基本上会内爆所有的媒体名称。

您可以删除组 concat 并使用 mediums.names 并使用右连接，然后您将多次拥有同一行，唯一的变化是媒体名称

# java - 缓冲区和控制台之间有什么区别可以使用....

> ID：10671157
> 
> 赞同：-1
> 
> 时间：2012-05-20T05:59:15.993
> 
> 标签：java

当我使用 buffer 而不是 console() 从我的代码中检索输出时，有什么区别？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T07:00:30.977

使用的[`Console`](http://docs.oracle.com/javase/6/docs/api/java/io/Console.html)类[`System.console()`](http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#console%28%29)似乎针对基于字符的*交互式*I/O，由实际控制台提供，例如 Windows 中的`cmd.exe`窗口或类 Unix 系统中的终端。因此，系统控制台可能并不总是可用，具体取决于底层操作系统和 JVM 的启动方式。

另一方面，[`Scanner`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Scanner.html)适用于任何输入流，包括文件和标准输入。它更灵活，但它不提供某些特定于控制台的功能`Console`，例如读取文本（通常是密码）而不将其回显到控制台的能力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T07:25:17.700

该类`Console`可以很容易地接受来自命令行的输入，包括回显和非回显。未回显意味着您在编写文本（例如 *、？等）时会在控制台中看到一些特殊字符，例如在 facebook 中输入密码时。:) 它的`format()`方法还可以轻松地将格式化的输出写入命令行（例如制作 *s 金字塔或格式化的日期和货币格式等）。它还有助于为单元测试编写测试引擎。或者您可以使用它为您提供一个简单的 CLI（命令行界面）而不是 GUI（图形用户界面），以防您想创建一个真正简单且小型的应用程序。是的，它也依赖于系统，这意味着您不能总是依赖您的系统为您提供控制台实例。

现在关于缓冲，它实际上是一种在 I/O（即输入和输出）中使用的技术，当您与流交互时（无论是字符流还是字节流，无论是来自控制台、套接字还是文件）。`read()`它主要用于通过避免多次调用和`write()`方法来加速 I/O 并节省系统资源。建议您在几乎所有类型的 I/O 交互中使用它。

# java - 比较两个 ArrayList

> ID：10671162
> 
> 赞同：-1
> 
> 时间：2012-05-20T06:00:19.243
> 
> 标签：java, arraylist, comparison, sorting, similarity

> **可能重复：**
> [如何比较两个数组列表？](https://stackoverflow.com/questions/8589351/how-to-compare-two-arraylist)

我有两个不同大小的字符串数组列表。我需要编写一个返回 true 的方法，如果列表 A（较大的列表）包含列表 B（较小的列表）的每个值。我将如何编写这样的方法？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T06:03:53.327

看看[`List.containsAll()`](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#containsAll%28java.util.Collection%29)。

有时只需看一眼文档（即使是家庭作业；]）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T06:04:11.593

听起来您应该使用集合而不是列表。对列表执行此操作将是`O(N^2)`，而分别对 HashSet`O(N)`或`O(NlogN)`TreeSet 执行此操作。

但是，如果性能不是主要问题（即列表相对较小，或者您不经常执行操作），那么只需`containsAll`在适当的列表对象上使用该方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T06:06:28.147

```
 public boolean containsAll(List<String> listA, List<String> listB) {
                Set<String> listAAsSet = new HashSet<String>(listA);

                for (String string : listB) {

                    if(listAAsSet.contains(string)==false) {
                        return false;
                    }
                }
                return true;
            } 
```

或者你可以使用`List.containsAll()`:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-20T06:08:03.450

可能有一种更有效的方法，但是您可以做的是循环遍历大列表，并且对于大列表中的每个元素，循环遍历小列表。找到了就早点跳出小列表，没找到就返回false。

```
bool found = false;

for (string a : listA)
{
   found = false;
   for (string b : listB)
   {
      if (b.equals(a))
      {
         found = true;
         break;
      }
   }

   if (!found)
      return false;
}

return true; 
```

# r - 情节时间（x 轴）和一天中的时间和剧集的持续时间（y 轴）

> ID：10671167
> 
> 赞同：-2
> 
> 时间：2012-05-20T06:00:56.150
> 
> 标签：r, date, graph, time, time-series

我正在测量事件的持续时间，我想绘制持续时间以及事件在每个观察日发生的时间。

我的数据集如下

```
> str(question.stack)
'data.frame':   398 obs. of  6 variables:
 $ id              : Factor w/ 1 level "AA11": 1 1 1 1 1 1 1 1 1 1 ...
 $ begin.recording : Factor w/ 1 level "8/15/2007": 1 1 1 1 1 1 1 1 1 1 ...
 $ begin.of.episode: Factor w/ 111 levels "1/1/2009","1/11/2009",..: 86 86 86 87 88 90 90 96 96 103 ...
 $ episode.day     : int  12 12 12 13 14 15 15 17 17 18 ...
 $ start.time      : Factor w/ 383 levels "0:06:01","0:17:12",..: 324 15 18 179 269 320 379 281 287 298 ...
 $ duration        : num  278 14 1324 18 428 ... 
```

我想在 x 轴上显示 episode.day。y 轴应该从 00:00 到 23:59:59（start.time）。例如，对于数据集的第二个条目，我想要一个从 (x=12,y=10:55:12) 到 (x=12, y=11:09:12) 的黑条，表示 14 分钟第 12 天的剧集持续时间。一个剧集可以跨越 1 天以上。

这可能与R吗？如果可能，请仅使用 baseR 解决方案

类似的东西是[用 ggplot2 在 x 轴上绘制日期和在 y 轴上绘制时间，](https://stackoverflow.com/questions/8192343/plot-dates-on-the-x-axis-and-time-on-the-y-axis-with-ggplot2)但不完全是我所期待的。

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T15:31:48.887

好的，我终于找到了。

在 x 轴上，我想将日期绘制为 POSIXct 或记录的天数（整数）。在 y 轴上，我想要一天中的时间，以便图表在每一天（x 轴）和情节发生的时间（y 轴）之间呈现一个黑条。

R 可以绘制 POSIX，但在我的情况下，剧集的开始和结束时间（对于 y 轴）应该是 date-“less”

我这样做了

```
#Cleaning the Dataset
qs<-question.stack
qs$id<-as.character(qs$id)
qs$begin.recording<-as.character(qs$begin.recording)
qs$begin.of.episode<-as.character(qs$begin.of.episode)
qs$start.time<-as.character(qs$start.time)
qs$start<-as.character(paste(qs$begin.of.episode,qs$start.time))
qs$duration<-round(qs$duration,0)

#Convert time and dates to POSIXct
qs$start<-as.POSIXct(qs$start,format="%m/%d/%Y %H:%M:%S",tz="UTC")
qs$start<-round(qs$start,"mins")
qs$end<-as.POSIXct(qs$start+qs$duration*60)
qs$start<-as.POSIXct(qs$start) 
```

现在我们有

```
str(qs)
'data.frame':   398 obs. of  8 variables:
 $ id              : chr  "AA11" "AA11" "AA11" "AA11" ...
 $ begin.recording : chr  "8/15/2007" "8/15/2007" "8/15/2007" "8/15/2007" ...
 $ begin.of.episode: chr  "8/27/2007" "8/27/2007" "8/27/2007" "8/28/2007" ...
 $ episode.day     : int  12 12 12 13 14 15 15 17 17 18 ...
 $ start.time      : chr  "6:15:12" "10:55:12" "11:15:12" "18:19:12" ...
 $ duration        : num  278 14 1324 18 428 ...
 $ start           : POSIXct, format: "2007-08-27 06:15:00" "2007-08-27 10:55:00" ...
 $ end             : POSIXct, format: "2007-08-27 10:53:00" "2007-08-27 11:09:00" ... 
```

下面创建了一个向量，其中包括有剧集的所有分钟数。可以按秒微调或按小时升级

```
tmp<-do.call(c, apply(qs, 1, function(x) seq(from=as.POSIXct(x[7]), to=as.POSIXct(x[8]),by="mins"))) 
```

下面做一个数据框。将一天中的时间从 POSIX 切换到 (date-"less")，然后再回到 POSIX，保证在 time.of.day 的所有时间都会有相同的日期。也许人们也可以使用起源论点来做到这一点。

```
ep <- data.frame(sqs=tmp, date=as.Date(tmp,"%Y-%m-%d"),time.of.day=as.POSIXct(as.character(format(tmp,"%H:%M")),format="%H:%M")) 
```

阴谋

```
plot(ep$date, ep$time.of.day,pch=".") 
```

![在此处输入图像描述](../Images/93014e6613b0ed933f7aa55c8671435d.png)

# android - 从缓存目录通过电子邮件发送文件

> ID：10671171
> 
> 赞同：2
> 
> 时间：2012-05-20T06:02:13.250
> 
> 标签：android

我正在尝试从我的应用程序发送文件附件电子邮件。

`getCacheDir()`保存到外部存储（SDCard）中的文件可以成功附加，但无法附加保存到我可以获取方法的临时目录中的相同文件。

唯一的区别是我要附加的文件的保存位置，这是因为 Android 规范或限制，还是我遗漏了什么？

我正在使用`ACTION_SEND`意图通过电子邮件发送附件文件

```
//// getting file path to save
//[fail] -- no attatchment in email
//path = new StorageUtil().getCacheFilePath(this, "attatchment.html");
//[success] -- attatchment.html is on email
path = new StorageUtil().getExternalAppStoragePath(this, "attatchment.html");
/// start intent if file saving is successful
if (this.export(path)==true) {
    Intent i = new Intent();
    i.setAction(Intent.ACTION_SEND);
    i.setType("text/html"); 
    i.putExtra(Intent.EXTRA_SUBJECT, "a subject");
    i.putExtra(Intent.EXTRA_TEXT, "");
    File f = new File(path);
    i.putExtra(Intent.EXTRA_STREAM, Uri.fromFile(f));
    startActivity(Intent.createChooser(i, "Send Email"));
} 
```

getCacheFilePath() 从以下代码创建路径，其中 fileName 是方法的第二个参数：

```
File cacheDir = ctx.getCacheDir();
File cacheFile = new File(cacheDir, fileName);
return cacheFile.getPath(); //path 
```

每条路径如下

```
//cache dir (attachcment failed): 
/data/data/{PACKAGE_NAME}/cache/attachment.html

//external dir (attachment successed): 
/mnt/sdcard/Android/data/{PACKAGE_NAME}/files/attachment.html 
```

来自缓存目录的文件对象`canRead()`，可以获取文件长度。谢谢！

== 已解决 ==

我发现发送Gmail时*Logcat上出现如下错误：*

```
file:// attachment paths must point to file:///mnt/sdcard. Ignoring attachment file:///data/data/{PACKAGE_NAME}/cache/attachment.html" 
```

所以这应该是Android的限制。添加`Intent.FLAG_GRANT_READ_URI_PERMISSION`没有效果和其他 Activity 像 Dropbox 结果类似。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-02-13T04:30:42.767

我建议你使用 getExternalCacheDir() 而不是 getCacheDir()，它指向“/storage/emulated/0/Android/data/”。此文件夹下的文件似乎可以附加到 gmail。

# javascript - Changing button text onclick

> ID：10671174
> 
> 赞同：77
> 
> 时间：2012-05-20T06:02:31.173
> 
> 标签：javascript, html, button, onclick

When I click on `myButton1` button, I want the value to change to `Close Curtain` from `Open Curtain`.
**HTML:**

```
<input onclick="change()" type="button" value="Open Curtain" id="myButton1"></input> 
```

**Javascript:**

```
function change();
{
    document.getElementById("myButton1").value="Close Curtain";
} 
```

The button is displaying open curtain right now and I want it to change to close curtain, is this correct?

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-05-20T06:08:00.790

If I've understood your question correctly, you want to toggle between 'Open Curtain' and 'Close Curtain' -- changing to the 'open curtain' if it's closed or vice versa. If that's what you need this will work.

```
function change() // no ';' here
{
    if (this.value=="Close Curtain") this.value = "Open Curtain";
    else this.value = "Close Curtain";
} 
```

Note that you don't need to use `document.getElementById("myButton1")` inside change as it is called in the **context** of `myButton1` -- what I mean by context you'll come to know later, on reading books about JS.

**UPDATE**:

I was wrong. Not as I said earlier, `this` won't refer to the element itself. You can use this:

```
function change() // no ';' here
{
    var elem = document.getElementById("myButton1");
    if (elem.value=="Close Curtain") elem.value = "Open Curtain";
    else elem.value = "Close Curtain";
} 
```

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2018-02-27T09:49:47.370

When using the `<button>` element (or maybe others?) setting 'value' will not change the text, but `innerHTML` will.

```
var btn = document.getElementById("mybtn");
btn.value = 'my value'; // will just add a hidden value
btn.innerHTML = 'my text'; 
```

When printed to the console:

`<button id="mybtn" class="btn btn-primary" onclick="confirm()" value="my value">my text</button>`

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-05-20T06:25:12.303

It seems like there is just a simple typo error:

1.  Remove the semicolon after change(), there should not be any in the function declaration.
2.  Add a quote in front of the myButton1 declaration.

Corrected code:

```
<input onclick="change()" type="button" value="Open Curtain" id="myButton1" />
...
function change()
{
    document.getElementById("myButton1").value="Close Curtain"; 
} 
```

A faster and simpler solution would be to include the code in your button and use the keyword this to access the button.

```
<input onclick="this.value='Close Curtain'" type="button" value="Open Curtain" id="myButton1" /> 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-05-20T07:26:58.967

There are lots of ways. And this should work too in all browsers and you don't have to use document.getElementById anymore since you're passing the element itself to the function.

```
<input type="button" value="Open Curtain" onclick="return change(this);" />

<script type="text/javascript">
function change( el )
{
    if ( el.value === "Open Curtain" )
        el.value = "Close Curtain";
    else
        el.value = "Open Curtain";
}
</script> 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2018-12-13T10:30:18.080

Add this function to the script

```
function myFunction() {

                var btn = document.getElementById("myButton");

                if (btn.value == "Open Curtain") {
                    btn.value = "Close Curtain";
                    btn.innerHTML = "Close Curtain";
                }
                else {
                    btn.value = "Open Curtain";
                    btn.innerHTML = "Open Curtain";
                }

            } 
```

and edit the button

```
<button onclick="myFunction()" id="myButton" value="Open Curtain">Open Curtain</button> 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-04-13T08:21:49.537

this code work for me

```
 var btn = document.getElementById("your_btn_id");
    if(btn.innerText=="show"){
       btn.innerText="hide";
      }
    else{
      btn.innerText="show";
      } 
```

using value is not work in my case

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-05-20T06:08:23.323

You are missing an opening quote on the id= and you have a semi-colon after the function declaration. Also, the input tag does not need a closing tag.

This works:

```
<input onclick="change()" type="button" value="Open Curtain" id="myButton1">

<script type="text/javascript">
function change()
{
document.getElementById("myButton1").value="Close Curtain";
}
</script> 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2018-09-05T07:15:24.263

If you prefer binding your events outside the html-markup (in the javascript) you could do it like this:

```
document.getElementById("curtainInput").addEventListener(
  "click",
  function(event) {
    if (event.target.value === "Open Curtain") {
      event.target.value = "Close Curtain";
    } else {
      event.target.value = "Open Curtain";
    }
  },
  false
);
```

```
<!doctype html>
<html>
<body>
  <input 
         id="curtainInput" 
         type="button" 
         value="Open Curtain" />
</body>

</html>
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2020-11-12T12:42:11.973

i know this is an old post but there is an option to sent the elemd id with the function call:

```
<button id='expand' class='btn expand' onclick='f1(this)'>Expand</button>
<button id='expand' class='btn expand' onclick='f1(this)'>Expand</button>
<button id='expand' class='btn expand' onclick='f1(this)'>Expand</button>
<button id='expand' class='btn expand' onclick='f1(this)'>Expand</button>

function f1(objButton)
    {
        if (objButton.innerHTML=="EXPAND") objButton.innerHTML = "MINIMIZE";
        else objButton.innerHTML = "EXPAND";
    } 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-04-10T11:40:44.867

this can be done easily with a vbs code (as i'm not so familiar with js )

```
<input type="button" id="btn" Value="Close" onclick="check">
<script Language="VBScript">
sub check
if btn.Value="Close" then btn.Value="Open" 
end sub
</script> 
```

and you're done , however this changes the Name to display only and does not change the function {onclick} , i did some researches on how to do the second one and seem there isnt' something like

```
btn.onclick = ".." 
```

but i figured out a way using <"span"> tag it goes like this :

```
<script Language="VBScript">
  Sub function1
  MsgBox "function1"
  span.InnerHTML= "<Input type=""button"" Value=""button2"" onclick=""function2"">"
  End Sub

   Sub function2
  MsgBox "function2"
  span.InnerHTML = "<Input type=""button"" Value=""button1"" onclick=""function1"">"
  End Sub
  </script>
  <body>
  <span id="span" name="span" >
  <input type="button" Value="button1" onclick="function1">
  </span>
  </body> 
```

try it yourself , change the codes in sub function1 and sub function2, basically all you need to know to make it in jscript is the line

```
span.InnerHTML = "..." 
```

the rest is your code you wanna execute

hope this helps :D

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2018-09-27T00:59:59.943

This worked fine for me. I had multiple buttons which I wanted to toggle the input value text from 'Add Range' to 'Remove Range'

```
<input type="button" onclick="if(this.value=='Add Range') { this.value='Remove Range'; } else { this.value='Add Range'; }" /> 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2019-05-16T14:43:25.030

```
var count=0;
document.getElementById("play").onclick = function(){

if(count%2 =="1"){

                document.getElementById("video").pause();
                document.getElementById("play").innerHTML ="Pause";
            }else {

            document.getElementById("video").play();
            document.getElementById("play").innerHTML ="Play";

            }
            ++count; 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2012-05-20T06:26:22.957

Try this,

```
<input type="button" id="myButton1" value="Open Curtain" onClick="javascript:change(this);"></input>
<script>
function change(ref) {
    ref.value="Close Curtain";
}
</script> 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-11-10T07:44:03.673

```
<input type="button" class="btn btn-default"  value="click me changtext"               id="myButton1" onClick="changetext()"  >

            <script>
            function changetext() {
                 var elem = document.getElementById("myButton1");
                if (elem.value=="click me change text")
                    { 
                        elem.value = "changed text here";
                    }
                else
                 {
                     elem.value = "click me change text";
                 }
            }
            </script> 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2015-09-02T22:17:09.963

If not opposed to or may already be using jQuery, you could do this without the approach of having to use obtrusive js. Hope it helps. [https://en.wikipedia.org/wiki/Unobtrusive_JavaScript](https://en.wikipedia.org/wiki/Unobtrusive_JavaScript) Also like to reference, [https://stackoverflow.com/a/3910750/4812515](https://stackoverflow.com/a/3910750/4812515) for a discussion on this.

HTML:

```
 <input type="button" value="Open Curtain" id=myButton1"></input> 
```

Javascript:

```
 $('#myButton1').click(function() {
            var self = this;
            change(self);
         });

          function change( el ) {
           if ( el.value === "Open Curtain" )
           el.value = "Close Curtain";
           else
           el.value = "Open Curtain";
          } 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2017-10-19T11:41:12.497

```
<!DOCTYPE html>
<html>
    <head>
      <title>events2</title>
    </head>
    <body>
      <script>
        function fun() {
          document.getElementById("but").value = "onclickIChange";
        } 
      </script>
      <form>
        <input type="button" value="Button" onclick="fun()" id="but" name="but">
    </form>
  </body>
</html> 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2019-04-08T15:11:45.957

Or more simple without having to name the element (with 'button' element):

```
<button onclick="toggleLog(this)">Stop logs</button> 
```

and script :

```
var bWriteLog = true;

function toggleLog(elt) {

  bWriteLog = !bWriteLog;
  elt.innerHTML = bWriteLog ? 'Stop logs' : 'Watch logs';
} 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2021-02-05T14:29:26.887

```
function change() {
 myButton1.value=="Open Curtain" ? myButton1.value="Close Curtain" : myButton1.value="Open Curtain";
} 
```

* * *

## 回答 #19

> 赞同：-1
> 
> 时间：2014-07-02T09:06:48.207

```
This is simple way to change Submit to loading state   

 <button id="custSub" type="submit" class="button left tiny" data-text-swap="Processing.. &nbsp;">Submit &nbsp;<i class="fa fa-angle-double-right"></i></button>

    <script>
    jQuery(document).ready(function ($) {

        $("button").on("click", function() {
          var el = $(this);
          if (el.html() == el.data("text-swap")) {
            el.html(el.data("text-original"));
          } else {
            el.data("text-original", el.html());
            el.html(el.data("text-swap"));
          }
          setTimeout(function () {
                el.html(el.data("text-original"));
           }, 500);
        });

    });
    </script> 
```

# php - 网站操作的经验值系统

> ID：10671177
> 
> 赞同：1
> 
> 时间：2012-05-20T06:02:53.593
> 
> 标签：php, database, codeigniter, user-experience

所以我需要创建一个每次用户完成一个动作时调用的函数，然后根据他们的动作给他们exp点。

目前我有这样的事情：

```
$this->db->query("INSERT INTO experience (userid, action, exp) VALUES (1, $some_action, $exp)"); 
```

只是想知道跟踪他们取得的成就的最佳方法是什么？也可以使用 SUM 函数根据这些记录计算他们的 exp 吗？或者如果有很多记录会不会太慢？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T06:23:21.910

您可能应该添加时间戳或日期时间字段，但是 SUM 将是解决方案：

```
$qry = "SELECT userid, SUM(exp) FROM experience WHERE userid = 9999" 
```

按操作细分：

```
$qry = "SELECT userid, action, SUM(exp) FROM experience WHERE userid = 9999 GROUP BY action" 
```

# xcode - 是否可以仅将 xcode 项目的源代码与 Dropbox 同步？

> ID：10671178
> 
> 赞同：0
> 
> 时间：2012-05-20T06:02:55.457
> 
> 标签：xcode, dropbox

是否可以仅将 xcode 项目的源代码与 Dropbox 同步？我希望只同步源代码而不是 xcode 项目下 build 目录中的文件。

是否可以？

欢迎任何评论

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T06:20:52.273

当前版本的 Xcode 默认情况下，将构建目录和其他中间文件保存在`~/Library/Developer/Xcode/DerivedData`. 假设您使用的是最近的 Xcode，并且尚未将其配置为将构建文件保存在项目目录中，您应该能够将项目目录放在 Dropbox 文件夹中。

# iphone - 检查 CGPoint 是否靠近另一个 CGPoint

> ID：10671182
> 
> 赞同：2
> 
> 时间：2012-05-20T06:03:19.660
> 
> 标签：iphone, cgpoint

在我的应用程序中，我有两个按钮和一个每秒触发一个动作的计时器。每秒，它会生成四个随机数。数字用作按钮的 X 和 Y 值，按钮移动到新点。但是，有时新点很接近，因此按钮重叠。我如何检查以确保不会发生这种情况？我已经尝试检查`CGRectIntersectsRect`按钮框架是否存在，但这无济于事。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T06:25:05.123

只是为了验证，您的`CGRectIntersectsRect`代码/结构看起来有点类似于这个权利：

```
-(void)update {

// This is the method that gets called every second where your four numbers are randomly generated

// Generate random numbers here
// Position the buttons based on 2 of the random numbers

if (CGRectIntersectsRect(button1.frame, button2.frame) {

 // regenerate the four numbers
 // reposition your buttons
} 
```

另外，我只是想知道，为什么每一秒？如果你愿意，也许可以在不同的线程上执行它，并使其每秒 10 次，这样按钮重叠不会显示太久，但这取决于你想要它的速度我猜......还有你为什么要生成 4如果您只使用两个随机数（据我们所知）。

但是，最终我们需要查看您的代码，否则我们无法看到您可能做错了什么。

# javascript - 不安全的 JavaScript 尝试使用 URL 启动框架的导航更改 - 如何尝试捕获它

> ID：10671183
> 
> 赞同：0
> 
> 时间：2012-05-20T06:03:37.213
> 
> 标签：javascript, security, try-catch

我的 iframe 中有这个脚本：

```
var redirectTo = "http://www.stackoverflow.com";
try {
      parent.location.href = redirectTo;
}catch(e){
      window.open(redirectTo);
    } 
```

浏览器不会捕获主题中的错误。
如果 try 块失败，我希望浏览器执行 catch 块。
但是，即使错误发生在 try 块内，浏览器仍然会看到错误。

**更新** 在正常情况下，我的代码工作正常。
当它的 iframe 在 iframe 中时它不起作用，在这些情况下我收到安全错误。
Y你有什么想法吗？我如何知道我的 iframe 是否在其他 iframe 中？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T06:21:33.653

您无法在 javascript 中捕获此类错误，因为它不是 javascript 错误，而是浏览器安全功能。但是您可以通过检查 url 和当前位置之间的域和端口匹配来防止它。如果父框架与 iframe 的域/端口不同，您也无法访问父框架。因此，如果父框架域/端口与子 iframe 不同，除非您已经从其他来源知道它，否则您甚至可能无法获得该位置。你试图做一些你真的不应该做的事情

（更新）**检查父节点**

```
var ploc=null
try {
  if (parent && parent.nodeName=="IFRAME")
    ploc=parent.location;//assuming current node is an iframe
}catch(e){
  //it may be an iframe but from another domain
}

if (ploc) ... //ok its an iframe and is from same domain the we can proceed 
```

# c - 省略 printf 会导致错误答案

> ID：10671188
> 
> 赞同：0
> 
> 时间：2012-05-20T06:04:15.883
> 
> 标签：c, printf

出于某种原因，我得到了一个非常不正确的问题答案，所以我输入了这个 printf 来尝试调试。

```
for (s = 0; s <= 100; s++) {
    for (t = 0; t <= 100; t++) {
        printf("At (%f,%f), spl = %f\n", s, t, spl(loc_data, s, t)); */
            if (spl(loc_data, s, t) > 80) { 
                     p++;
            }
        }  
} 
```

如果我省略 printf 行，我会得到一个不正确的答案。我认为这与内存分配或未初始化的变量有关，但这超出了我的能力范围。任何帮助，将不胜感激。

整个代码：

```
#include <stdio.h>
#include <math.h>

typedef struct {
double x;
double y;
double W;
} data_t;

double spl(data_t *, double, double);

int main(int argc, char **argv) {

data_t loc_data[1000];

double spl0, p = 0, pp;

int i = 0, j = 0;

double s, t;

while (scanf("%lf %lf %lf", &loc_data[i].x, &loc_data[i].y, &loc_data[i].W) == 3) {
    i++;
}

printf("\nStage 1\n=======\n");
printf("Number of sound sources: %d\n", i);
for (j = 0; j < i; j++) {
    printf("%.1f meters east, %.1f meters north, power %1.5f Watts\n", 
    loc_data[j].x, loc_data[j].y, loc_data[j].W);
}

printf("\nStage 2\n=======\n");
spl0 = spl(loc_data, 0, 0);
printf("SPL at (0.0,0.0): %.1f dB\n", spl0);

printf("\nStage 3\n=======\n");

for (s = 0; s <= 100; s++) {
    for (t = 0; t <= 100; t++) {
        printf("At (%f,%f), spl = %f\n", s, t, spl(loc_data, s, t)); 
        if (spl(loc_data, s, t) > 80) { 
            p++;
        }
    }
}
pp = p / 102.01;

printf("Points sampled: 10201\nAbove 80.0 dB: %.1f%%\n", pp);

return 0;
}

double spl(data_t *loc_data, double pointx, double pointy) {
int i = 0;
double r_sq, powi, spli, spl;
while (loc_data[i].W != 0) {
    r_sq = pow(loc_data[i].x - pointx,2) + pow(loc_data[i].y - pointy,2);
    powi = 10*log10(loc_data[i].W / pow(10,-12));
    spli = powi + 10*log10((2 / (4 * M_PI * r_sq)) + (4 / (2.5 * M_PI * r_sq)));
    spl = 10*log10(pow(10, spl/10) + pow(10, spli/10));
    i++;
}
return spl;
} 
```

为糟糕的格式道歉。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T06:41:01.077

`spl`在函数中初始化之前，您正在使用变量 ( ) `spl()`：

```
double spl(data_t *loc_data, double pointx, double pointy) {
int i = 0;
double r_sq, powi, spli, spl;
while (loc_data[i].W != 0) {
    r_sq = pow(loc_data[i].x - pointx,2) + pow(loc_data[i].y - pointy,2);
    powi = 10*log10(loc_data[i].W / pow(10,-12));
    spli = powi + 10*log10((2 / (4 * M_PI * r_sq)) + (4 / (2.5 * M_PI * r_sq)));
    spl = 10*log10(pow(10, spl/10) + pow(10, spli/10));
    //                     ^^^
    i++;
}
return spl;
} 
```

调用`printf()`可能会影响变量恰好具有的值。

此外，您将许多条目读入`loc_data`数组，但不要将该信息传递给`spl()`函数。在`spl()`您将带有字段的数组条目`W`视为“哨兵” - 数组的末尾。输入数据中的最后一个条目是否为零？如果是这样，您可能应该让我们知道，并可能在阅读完输入后检查一下。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T06:40:30.247

您没有`loc_data`以任何方式初始化条目，这意味着它们将包含垃圾。输入条目后`scanf`（确保在阅读 1000 行后停止阅读），用零填充数组的其余元素。我知道您说您已经尝试过了，但是在您发布的代码中看不到它。

此外，您应该`i`（在给它一个更好的名称之后）传递给`spl`函数，以便它知道您有多少好的来源，而不是寻找 0 作为终止符，如果您有 1000 个好的来源，它可能不存在，或者可能存在如果某个源的幂为 0，则为时过早。

# c# - 如何使函数返回 IEnumerable 而不是 C# 中的字符串

> ID：10671189
> 
> 赞同：4
> 
> 时间：2012-05-20T06:04:50.223
> 
> 标签：c#

我有以下返回字符串的函数：

```
public static string GetFormattedErrorMessage(this Exception e)
{
    if (e == null)
    {
        throw new ArgumentNullException("e");
    }

    var exError = e.Message;
    if (e.InnerException != null)
    {
        exError += "<br>" + e.InnerException.Message;
        if (e.InnerException.InnerException != null)
        {
            exError += "<br>" + e.InnerException.InnerException.Message;
        }
    }

    return exError;
} 
```

有人可以帮忙告诉我如何让这个函数`IEnumerable<string>`只返回一个元素吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-20T06:13:33.203

```
public static IEnumerable<string> GetFormattedErrorMessage(this Exception e)
        {
            if (e == null)
            {
                throw new ArgumentNullException("e");
            }

            var exError = e.Message;
            if (e.InnerException != null)
            {
                exError += "<br>" + e.InnerException.Message;
                if (e.InnerException.InnerException != null)
                {
                    exError += "<br>" + e.InnerException.InnerException.Message;
                }
            }

            yield return exError;
        } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-20T06:58:19.050

**为什么不只返回一个数组？**这很简单`return new string[] { exError };`

我不明白为什么人们用大炮杀死苍蝇，但你**真的**不需要`yield`这里......

我还应该注意：

*   **`yield`可能无法达到**您的预期

*   `yield`**较慢**（不是很多，但它就在那里）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T07:53:54.437

我可以看到您在 IEnumerable 中只需要一个元素，但我不明白为什么您想要一个 IEnumerable。

如果您想要异常的每条消息及其内部异常，您应该这样做：

```
public static IEnumerable<string> GetErrorMessages(this Exception e) 
{ 
    if (e == null) 
        throw new ArgumentNullException("e"); 

    yield return e.Message;

    Exception inner = e.InnerException;
    while(inner != null)
    {
        yield return inner.Message; 
        inner = inner.InnerException;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-20T06:55:29.320

您可以`yield return`像其他人向您展示的那样使用，但我认为这有点矫枉过正，因为幕后发生的事情。

你为什么不只`List<String>`用一个元素创建一个并返回它呢？这是一个`IEnumerable<String>`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-20T06:14:46.380

您应该使用 yield return 语句来实现这一点。

```
public static IEnumerable<string> GetMessage(Exception e)
{
    yield return e.Message;
} 
```

# javascript - 如何确保 highcharts 样条图保持在 0 和 1 之间？

> ID：10671191
> 
> 赞同：1
> 
> 时间：2012-05-20T06:05:53.640
> 
> 标签：javascript, highcharts

我正在使用 PHP 开发一个调查系统，并且正在使用 Highcharts 来绘制图表。如何确保图形区域底部显示 0，顶部显示 1？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T13:57:32.173

听起来您需要 yAxis [min](http://www.highcharts.com/ref/#yAxis--min)和[max](http://www.highcharts.com/ref/#yAxis--max)选项。

# html - 如何将未知大小的 DIV 在屏幕上水平和垂直居中

> ID：10671197
> 
> 赞同：7
> 
> 时间：2012-05-20T06:07:19.733
> 
> 标签：html, css, layout, alignment

我需要将 DIV 居中在屏幕中心，水平和垂直，我不知道 DIV 大小，而 div 是`position:fixed;`.

这个负边距技巧不起作用，因为我不知道 div 大小。 `top:50%; left:50%; magin-top:-100; margin-left:-100;`

不起作用，`margin-left: auto; margin-right: auto;`因为不起作用`position:fixed;`，`margin-top:auto; margin-bottom:auto;`也不能垂直居中；

我发现这种方法：`display: table-cell; vertical-align: middle;`不工作以太；

我知道如何使用 JavaScript 使用 getComputedStyle 来获取 div 内容大小，并进行数学运算来修复它的位置，但我想要一个纯 CSS 解决方案，因为我不想每次 div 内容更改时触发 JS .

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T17:28:03.400

您可以在 CSS 表格的帮助下垂直居中一个未知高度的盒子。盒子的高度由它的内容决定。请参阅此[演示](http://jsfiddle.net/tR5ZN/)，该演示使用 box 的**position: fixed**属性。盒子的**宽度也设置**好了。

这是 IE <= 7 的解决方法：

```
#table {
  height:100%;
  text-align:center;
  white-space: nowrap;
}
#container {
  display: inline;
  zoom: 1;
  text-align: left;
  vertical-align: middle;
}
#IEcenter {
  height: 100%;
  width: 1px;
  display: inline;
  zoom: 1;
  vertical-align: middle;
}
#container * {
  white-space: normal;
} 
```

这符合您的要求吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-04-19T11:00:23.387

如果您正在使用位置，则变换属性在这里会很有帮助。

您只需将以下属性添加到必须居中的元素中，

```
position: absolute;
left: 50%;
top: 50%;
transform: translate(-50%); 
```

请删除添加到元素的额外边距和填充。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T08:31:57.063

看[演示](http://jsfiddle.net/4kxDd/)（高度未知，宽度已设置）。

您可以使用 css 表格（在此示例中，html 是表格，而 body 是表格单元格）。标记：

```
<body>

    <div id="container">
        <h1>Lorem ipsum</h1>
        <p>At vero eos et accusam et justo duo dolores et ea rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit amet.</p>
    </div>

</body> 
```

CSS：

```
html {
  margin: 0;
  padding: 0;
  height: 100%;
  width: 100%;
  display: table;
}
body {
  margin: 0;
  padding: 0;
  display: table-cell;
  vertical-align: middle;
}
#container {
  width: 400px;
  margin: 0 auto;
  background: #ffea00;
  border: 2px solid #ff9800;
} 
```

您是否需要 IE <=7 的解决方法（因为 IE <=7 不知道 table | table-cell）？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-20T06:31:38.873

像这样的东西会起作用吗？它也使用了，`display: table-cell`但它需要 2 个 div 标签才能工作......具有`display: table`指定样式的父标签。

注意：我添加`z-index:-1;`到 centerbase 类。您可能需要根据您的设计进行调整。

```
<style>
.centerbase{
    display: table; 
    vertical-align: middle;
    height:100%;
    width:100%;
    text-align:center;
    position:fixed;
    z-index:-1;
}
.centerpane{
    display: table-cell; 
    vertical-align: middle;
}
</style>
<div class="centerbase">
    <div class="centerpane">
        <img src="https://www.google.com/images/srpr/logo3w.png" />
    </div>
​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​&lt;/div> 
```

如果您需要在 centerpane 中添加未居中对齐的文本，您可以在 centerpane 中添加另一个 div 并将样式指定为：`text-align:left; width:400px; margin:0px auto;`您必须为这个额外的 div 指定宽度。

# php - 如何在 php 中使用 listview 背后的概念？

> ID：10671207
> 
> 赞同：0
> 
> 时间：2012-05-20T06:08:50.863
> 
> 标签：php, listview

一位朋友要求我在她的网站上添加一些内容。她希望她的用户为自己创建一个定制的包。有人告诉我，我可以使用列表视图的概念，其中有添加、删除、全部移动、全部删除、重置按钮。

会有默认包和定制包。

我搜索了网络，但我只能找到连接到数据网格的列表视图。实际上我不需要那个，据我所知，我所需要的只是使用列表视图背后的概念。因为在所有选择之后，用户将提交定制的包，ADMIN 和用户本身将收到一封包含详细信息的电子邮件。

我是一个真正的php新手。有人能帮我吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T06:17:50.777

我建议查看购物车代码以了解如何在自定义包中添加和删除内容。有很多购物车教程。一个特别简单的方法在这里[http://www.phpwebcommerce.com/](http://www.phpwebcommerce.com/)。

至于写电子邮件，请使用此代码 [1]

```
$to = "recipient@example.com";
$subject = "Hi!";
$body = "Hi,\n\nHow are you?";
if (mail($to, $subject, $body)) {
    echo("<p>Message successfully sent!</p>");
} 
else {
    echo("<p>Message delivery failed...</p>");
} 
```

[1} 来自 [http://email.about.com/od/emailprogrammingtips/qt/How_to_Send_Email_from_a_PHP_Script.htm](http://email.about.com/od/emailprogrammingtips/qt/How_to_Send_Email_from_a_PHP_Script.htm)。我通常不使用 about.com，但这是非常简单的代码。

祝你好运！

# java - 单击按钮时面板未出现

> ID：10671213
> 
> 赞同：1
> 
> 时间：2012-05-20T06:10:23.620
> 
> 标签：java, swing, radio-button

我正在使用组单选按钮。我想要的是，当我选择了特定的单选按钮后，我按下按钮（称之为显示按钮）以根据所选单选按钮显示结果（在面板中放置的图表上） .问题是当我按下显示按钮时它不会显示结果，直到我点击面板虽然我按下面板时我没有编写任何代码。这是我的代码

```
private void Show1MouseClicked(java.awt.event.MouseEvent evt) {
    if (jRadioButton1.isSelected()) {
        Panel.removeAll();
       //some code
    }

    Panel.setVisible(true);
    Panel.add(frame1);
    Panel.setSize(700, 260);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T06:27:26.590

使用[CardLayout ，如此](http://download.oracle.com/javase/7/docs/api/java/awt/CardLayout.html)[处](https://stackoverflow.com/questions/5665156/calling-awt-frame-methods-from-subclass/5786005#5786005)所示。

![游戏视图](../Images/3e84734e45f9ce4d8da39f4e7796ef42.png) ![高分视图](../Images/108a81166d0c089a8de60cdb6ed2908a.png)

至于图表本身，如果数据发生变化，请更改模型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T06:17:36.997

您可能需要`repaint()`在更改后致电您的面板。当您使用鼠标与面板交互时，它会`repaint()`在幕后调用。

# windows-installer - Installshield Express 可以创建补丁 (.msp) 吗？

> ID：10671217
> 
> 赞同：-1
> 
> 时间：2012-05-20T06:12:25.737
> 
> 标签：windows-installer, installshield, patch, msp

您可以使用 Installshield Express 创建 Windows 安装程序补丁 (.msp) 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T12:51:38.770

根据[FlexeraSoftware](http://www.flexerasoftware.com/products/installshield/features.htm)，补丁创建不是 InstallShield Express 的功能。

# c# - 检查点击不在网格元素上

> ID：10671224
> 
> 赞同：1
> 
> 时间：2012-05-20T06:14:10.663
> 
> 标签：c#, windows-phone-7

我有一个网格，有：堆栈面板、按钮和约 50% 的空白空间。

只有当它不在按钮、堆栈面板上、仅在网格的空白空间上时，我才需要处理单击。

我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T07:25:24.723

这是基于默认模板的示例，网格名为`LayoutRoot`.

```
private void LayoutRoot_Tap(object sender, GestureEventArgs e)
{
    if (e.OriginalSource == LayoutRoot)
        MessageBox.Show("You clicked on LayoutRoot!");
    else
        MessageBox.Show("You clicked on somewhere else!");
} 
```

XAML

```
<Grid x:Name="LayoutRoot" ... Tap="LayoutRoot_Tap"> 
```

# java - AbstractionAction 的 putValue() 方法是否适用于 JMenuItem 的子类等？

> ID：10671225
> 
> 赞同：1
> 
> 时间：2012-05-20T06:14:33.037
> 
> 标签：java, swing

也许这是一个坏主意，但我为[JMenuItem](http://docs.oracle.com/javase/7/docs/api/javax/swing/JMenuItem.html)编写了一个子类来添加一个新的构造函数。让我们称之为`JMenuItemX`：

```
import java.awt.event.ActionListener;
import javax.swing.JMenuItem;

@SuppressWarnings("serial")
public class JMenuItemX extends JMenuItem
{
  public JMenuItemX(final String the_text, final char the_mnemonic,
                    final ActionListener the_action)
  {
    super(the_text);
    setMnemonic(the_mnemonic);
    addActionListener(the_action);
  }
} 
```

* * *

现在，我正在尝试使用[AbstractAction](http://docs.oracle.com/javase/7/docs/api/javax/swing/AbstractAction.html)向组件添加工具提示：

```
import java.awt.event.ActionEvent;
import javax.swing.AbstractAction;
import javax.swing.JOptionPane;

@SuppressWarnings("serial")
public class AboutAction extends AbstractAction
{

  public AboutAction()
  {
    super("About");
    putValue(SHORT_DESCRIPTION, "Show the popup window");
  }

  @Override
  public void actionPerformed(final ActionEvent the_event)
  {
    JOptionPane.showMessageDialog(null, "Hello World!");
  }
} 
```

并像这样构造组件（JFrame、JMenuBar 和 JMenu 已经设置好）：

```
menu.add(new JMenuItemX("About", 'a', new AboutAction())); 
```

*（如您所见，如果我要添加多个菜单项，这种单行格式更易于阅读。）*

* * *

菜单项以正确的文本可见，并且助记符和操作按预期工作。但是没有工具提示......但是，如果我只是使用 JMenuItem，工具提示就可以了！

```
JMenuItem about = new JMenuItem(new AboutAction());
about.setMnemonic('a');
menu.add(about); 
```

* * *

如何让 AbstractAction 与我的 JMenuItem 子类一起使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T06:27:24.227

您重写的构造函数不使用 JMenuItem 构造函数，将 Action 作为参数，也不调用`setAction()`。因此，您的菜单项与操作无关。

我不会为了添加构造函数而创建子类。为什么不简单地创建一个工厂方法？

```
public JMenuItem createMenuItemWithListener(String text, 
                                            char mnemonic, 
                                            ActionListener action) {
    JMenuItem result = new JMenuItem(text);
    result.setMnemonic(mnemonic);
    result.addActionListener(action);
    return result;
}

public JMenuItem createMenuItemWithAction(char mnemonic, 
                                          Action action) {
    JMenuItem result = new JMenuItem(action);
    result.setMnemonic(mnemonic);
    return result;
} 
```

# python - 熊猫浮点错误

> ID：10671227
> 
> 赞同：0
> 
> 时间：2012-05-20T06:14:57.427
> 
> 标签：python, ipython, pandas

我在熊猫的一个简单时间序列上遇到浮点错误。我正在尝试进行移位操作...但这也发生在诸如*`rolling_mean`*.

编辑：有关更多信息...我昨天在错误之前尝试从源代码实际构建它。我不确定在构建尝试之前是否会发生错误，因为我从来没有搞砸过这些功能。

EDIT2：我以为我已经解决了这个问题，但是当我在 python 中运行它时，它可以工作，但是当它在 ipython 中时，我得到了错误。

EDIT3：Numpy 1.7.0，iPython 0.13，pandas 0.7.3

```
In [35]: ts = Series(np.arange(12), index=DateRange('1/1/2000', periods=12, freq='T'))

In [36]: ts.shift(0)
Out[36]: 
2000-01-03     0
2000-01-04     1
2000-01-05     2
2000-01-06     3
2000-01-07     4
2000-01-10     5
2000-01-11     6
2000-01-12     7
2000-01-13     8
2000-01-14     9
2000-01-17    10
2000-01-18    11

In [37]: ts.shift(1)
Out[37]: ---------------------------------------------------------------------------
FloatingPointError                        Traceback (most recent call last)
/Users/trenthauck/Repository/work/SQS/analysis/campaign/tv2/data/<ipython-input-37-2b7cec97d440> in <module>()
----> 1 ts.shift(1)

/Library/Python/2.7/site-packages/ipython-0.13.dev-py2.7.egg/IPython/core/displayhook.pyc in __call__(self, result)
    236             self.start_displayhook()
    237             self.write_output_prompt()
--> 238             format_dict = self.compute_format_data(result)
    239             self.write_format_data(format_dict)
    240             self.update_user_ns(result)

/Library/Python/2.7/site-packages/ipython-0.13.dev-py2.7.egg/IPython/core/displayhook.pyc in compute_format_data(self, result)
    148             MIME type representation of the object.
    149         """
--> 150         return self.shell.display_formatter.format(result)
    151 
    152     def write_format_data(self, format_dict):

/Library/Python/2.7/site-packages/ipython-0.13.dev-py2.7.egg/IPython/core/formatters.pyc in format(self, obj, include, exclude)
    124                     continue
    125             try:
--> 126                 data = formatter(obj)
    127             except:
    128                 # FIXME: log the exception

/Library/Python/2.7/site-packages/ipython-0.13.dev-py2.7.egg/IPython/core/formatters.pyc in __call__(self, obj)
    445                 type_pprinters=self.type_printers,
    446                 deferred_pprinters=self.deferred_printers)
--> 447             printer.pretty(obj)
    448             printer.flush()
    449             return stream.getvalue()

/Library/Python/2.7/site-packages/ipython-0.13.dev-py2.7.egg/IPython/lib/pretty.pyc in pretty(self, obj)
    353                 if callable(obj_class._repr_pretty_):
    354                     return obj_class._repr_pretty_(obj, self, cycle)
--> 355             return _default_pprint(obj, self, cycle)
    356         finally:
    357             self.end_group()

/Library/Python/2.7/site-packages/ipython-0.13.dev-py2.7.egg/IPython/lib/pretty.pyc in _default_pprint(obj, p, cycle)
    473     if getattr(klass, '__repr__', None) not in _baseclass_reprs:
    474         # A user-provided repr.
--> 475         p.text(repr(obj))
    476         return
    477     p.begin_group(1, '<')

/Library/Python/2.7/site-packages/pandas/core/series.pyc in __repr__(self)
    696             result = self._get_repr(print_header=True,
    697                                     length=len(self) > 50,
--> 698                                     name=True)
    699         else:
    700             result = '%s' % ndarray.__repr__(self)

/Library/Python/2.7/site-packages/pandas/core/series.pyc in _get_repr(self, name, print_header, length, na_rep, float_format)
    756                                         length=length, na_rep=na_rep,
    757                                         float_format=float_format)
--> 758         return formatter.to_string()
    759 
    760     def __str__(self):

/Library/Python/2.7/site-packages/pandas/core/format.pyc in to_string(self)
     99 
    100         fmt_index, have_header = self._get_formatted_index()
--> 101         fmt_values = self._get_formatted_values()
    102 
    103         maxlen = max(len(x) for x in fmt_index)

/Library/Python/2.7/site-packages/pandas/core/format.pyc in _get_formatted_values(self)
     90         return format_array(self.series.values, None,
     91                             float_format=self.float_format,
---> 92                             na_rep=self.na_rep)
     93 
     94     def to_string(self):

/Library/Python/2.7/site-packages/pandas/core/format.pyc in format_array(values, formatter, float_format, na_rep, digits, space, justify)
    431                         justify=justify)
    432 
--> 433     return fmt_obj.get_result()
    434 
    435 

/Library/Python/2.7/site-packages/pandas/core/format.pyc in get_result(self)
    528 
    529             # this is pretty arbitrary for now
--> 530             has_large_values = (np.abs(self.values) > 1e8).any()
    531 
    532             if too_long and has_large_values:

FloatingPointError: invalid value encountered in absolute

In [38]: ts.shift(-1)
Out[38]: ---------------------------------------------------------------------------
FloatingPointError                        Traceback (most recent call last)
/Users/myusername/Repository/work/SQS/analysis/campaign/tv2/data/<ipython-input-38-314ec815a7c5> in <module>()
----> 1 ts.shift(-1)

/Library/Python/2.7/site-packages/ipython-0.13.dev-py2.7.egg/IPython/core/displayhook.pyc in __call__(self, result)
    236             self.start_displayhook()
    237             self.write_output_prompt()
--> 238             format_dict = self.compute_format_data(result)
    239             self.write_format_data(format_dict)
    240             self.update_user_ns(result)

/Library/Python/2.7/site-packages/ipython-0.13.dev-py2.7.egg/IPython/core/displayhook.pyc in compute_format_data(self, result)
    148             MIME type representation of the object.
    149         """
--> 150         return self.shell.display_formatter.format(result)
    151 
    152     def write_format_data(self, format_dict):

/Library/Python/2.7/site-packages/ipython-0.13.dev-py2.7.egg/IPython/core/formatters.pyc in format(self, obj, include, exclude)
    124                     continue
    125             try:
--> 126                 data = formatter(obj)
    127             except:
    128                 # FIXME: log the exception

/Library/Python/2.7/site-packages/ipython-0.13.dev-py2.7.egg/IPython/core/formatters.pyc in __call__(self, obj)
    445                 type_pprinters=self.type_printers,
    446                 deferred_pprinters=self.deferred_printers)
--> 447             printer.pretty(obj)
    448             printer.flush()
    449             return stream.getvalue()

/Library/Python/2.7/site-packages/ipython-0.13.dev-py2.7.egg/IPython/lib/pretty.pyc in pretty(self, obj)
    353                 if callable(obj_class._repr_pretty_):
    354                     return obj_class._repr_pretty_(obj, self, cycle)
--> 355             return _default_pprint(obj, self, cycle)
    356         finally:
    357             self.end_group()

/Library/Python/2.7/site-packages/ipython-0.13.dev-py2.7.egg/IPython/lib/pretty.pyc in _default_pprint(obj, p, cycle)
    473     if getattr(klass, '__repr__', None) not in _baseclass_reprs:
    474         # A user-provided repr.
--> 475         p.text(repr(obj))
    476         return
    477     p.begin_group(1, '<')

/Library/Python/2.7/site-packages/pandas/core/series.pyc in __repr__(self)
    696             result = self._get_repr(print_header=True,
    697                                     length=len(self) > 50,
--> 698                                     name=True)
    699         else:
    700             result = '%s' % ndarray.__repr__(self)

/Library/Python/2.7/site-packages/pandas/core/series.pyc in _get_repr(self, name, print_header, length, na_rep, float_format)
    756                                         length=length, na_rep=na_rep,
    757                                         float_format=float_format)
--> 758         return formatter.to_string()
    759 
    760     def __str__(self):

/Library/Python/2.7/site-packages/pandas/core/format.pyc in to_string(self)
     99 
    100         fmt_index, have_header = self._get_formatted_index()
--> 101         fmt_values = self._get_formatted_values()
    102 
    103         maxlen = max(len(x) for x in fmt_index)

/Library/Python/2.7/site-packages/pandas/core/format.pyc in _get_formatted_values(self)
     90         return format_array(self.series.values, None,
     91                             float_format=self.float_format,
---> 92                             na_rep=self.na_rep)
     93 
     94     def to_string(self):

/Library/Python/2.7/site-packages/pandas/core/format.pyc in format_array(values, formatter, float_format, na_rep, digits, space, justify)
    431                         justify=justify)
    432 
--> 433     return fmt_obj.get_result()
    434 
    435 

/Library/Python/2.7/site-packages/pandas/core/format.pyc in get_result(self)
    528 
    529             # this is pretty arbitrary for now
--> 530             has_large_values = (np.abs(self.values) > 1e8).any()
    531 
    532             if too_long and has_large_values:

FloatingPointError: invalid value encountered in absolute 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T18:51:26.450

我会将其添加为评论，但我还没有特权这样做:)

它适用于 python 和 iPython 0.12；iPython 0.13 仍在开发中（请参阅[http://ipython.org/](http://ipython.org/)），并且由于您遇到的错误似乎涉及 iPython 0.13 egg 中的格式，我怀疑这可能是原因。尝试使用 iPython 0.12 - 如果它有效，请使用 iPython 提交错误报告，然后可能坚持使用 0.12 直到 0.13（更）稳定。

# model-view-controller - RESTful api，用于 spring mvc 之上的动态展示

> ID：10671228
> 
> 赞同：1
> 
> 时间：2012-05-20T06:15:27.503
> 
> 标签：model-view-controller, rest

我想为简单项目的 CRUD 构建一个典型的 mvc 应用程序，api 应该是 RESTful 的。这里的问题是，我有一大堆需要初始化的物品。在服务器端，这些项目被定义为 java bean，并且项目的相应创建表单是根据从 bean 获取的字段信息（数据类型、验证约束等）动态创建的。我是 REST 新手，刚刚阅读了有关 url 应该如何定义 HTTP 动词指定的资源和操作的名词。从这个角度来看，如何建模类似 `.../client/showForm?type=xyz`从非 RESTful 方式到 RESTful 方式？？我的目的是告诉服务器为 xyz 类型的客户端动态构造并发送回 CREATE 表单。我上面提到的 url 的一个明显问题是它在 url 中指定了操作，从我读过的内容来看，它使其非 RESTful。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T06:46:57.683

当我想到 REST 时，我想到了资源。我想到了数据。换句话说，我不认为 REST 是我通常用来检索表单的东西，它是一个用户界面组件。

REST 是一种架构风格，用于使用统一资源标识符或 URI 来标识服务器上的资源。此外，对由 URI 标识的资源执行的操作是根据请求中使用的特定 HTTP 方法确定的：GET、POST、PUT、DELETE 等。

因此，假设您有一个 Client 对象。该客户端对象可能具有以下属性：

*   姓名
*   地点
*   帐号

如果我想检索单个客户端的数据，我可能会使用以下 URI：

```
GET /client/xyz/   # xyx is the accountnumber used to identify the client. 
```

我会使用 GET 方法，因为 REST 将 GET 描述为从服务器检索数据时使用的方法。

理论上，数据可以以 HTML 格式返回，因为 REST 不是标准，而更像是一系列灵活的指南；然而，为了真正将我的数据与我的用户界面分离，我会选择使用与平台无关的东西，如 JSON 或 XML 来表示数据。

接下来，当将客户端添加到服务器上的集合时，我将使用 /client/ URI 模式，但我将使用 HTTP 方法 POST，该方法用于将资源添加到服务器上的集合中。

```
# Pass the data as JSON to the server and tell the server to add the client to the 
 # collection
POST /client/    {"accountnumber":"abc" , "Name" : "Jones" , "Location" : "Florida"} 
```

如果我要修改或替换服务器上的现有记录，我很可能会使用 HTTP 方法 PUT，因为 REST 指南说，如果重复重复相同的操作不会改变服务器的状态，则应该使用 PUT。

```
# Replace the client abc with a new resource
PUT /client/abc/  {"accountnumber":"abc" , "Name" : "Bob Jones" , "Location" : "Florida"} 
```

REST 背后的一般思想是，它用于识别资源，然后根据使用的 HTTP 方法对该资源采取行动。

如果您坚持将您的数据与您的视图耦合，一种方法可以完成此操作并使用客户端数据检索实际表单，可能是将表单表示为资源本身：

```
GET /client/abc/htmlform/ 
```

此 URL 当然会返回客户端 abc 的客户端数据，但会以浏览器呈现的 HTML 形式返回。

虽然我的编码风格利用 JSON 或 XML 等数据传输来从我的视图中抽象和分离我的数据，但您可以很好地将这些数据传输为 HTML。但是，使用 JSON 或 XML 的优势在于您的 RESTful API 变得独立于平台。如果您曾经将您的 API 扩展到其他开发人员希望使用它的地方，他们可以这样做，无论他们使用什么特定平台或编程语言。换句话说，我的 PHP、Java、C#、Python、Ruby 或 Perl 开发人员可以使用该 API。

换句话说，任何可以发出 HTTP 请求并可以发送 GET、POST、PUT、DELETE 请求的语言或平台都可以用于扩展或构建您的 API。这是 REST 的真正优势。

有关设置控制器以将 REST 与 Spring MVC 一起使用的更多信息，请参阅[此问题](https://stackoverflow.com/a/10561268/552792)。此外，请查看[Spring MVC 文档](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/mvc.html)以获取更多信息。

此外，如果您还没有查看[REST 上的 Wikipedia 文章](http://en.wikipedia.org/wiki/Representational_state_transfer)，我强烈建议您这样做。最后，关于 REST 的另一本经典读物是[《我如何向妻子解释 REST》](http://tomayko.com/writings/rest-to-my-wife)。享受。

# c - 如何让gdb跟随execv？尽管“follow-exec-mode”无法正常工作

> ID：10671229
> 
> 赞同：8
> 
> 时间：2012-05-20T06:15:56.343
> 
> 标签：c, debugging, gdb, execv

我写了两个简单的程序：

```
int main(int ac, char **argv ) {
    execv( "/home/me/Desktop/execvtest2", argv );
} 
```

和

```
int main(int ac, char **argv ) {
    execv( "/home/me/Desktop/execvtest1", argv );
} 
```

我已经用 gcc -g 将它们编译到相应的输出文件中。我正在使用 gcc (Ubuntu/Linaro 4.4.4-14ubuntu5.1) 4.4.5 运行 Ubuntu 10.10。

当我使用 GNU gdb (GDB) 7.2-ubuntu 调试第一个程序时，我可以一直执行到第一个 execv 语句，但是这两个文件只是继续运行。即使我将 follow-exec-mode 设置为 new，我也无法进入第二个程序。当我设置 catch exec 时，gdb 会在每次调用 execv 时停止（因为第二个程序没有链接源，我无法退出 gdb，因为它有点挂起！？），但我不能跨过调用“新”（因为 exec 替换进程）劣质程序。

那么如何做到这一点呢？一定有办法进入新流程吧？难道我做错了什么？

干杯

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-12T04:55:20.563

你可以使用“catch”命令。这将使您有机会在执行后放置一些断点

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-18T21:11:38.257

我一直在做一些与你为我的一门课所做的非常相似的事情。这有点骇人听闻，如果您试图获取寄存器值之类的东西，它可能会搞砸。根据[GDB 的文档](ftp://ftp.gnu.org/old-gnu/Manuals/gdb/html_chapter/gdb_14.html)，您可以在维护执行文件的同时更改符号文件。为此，只需使用命令`symbol-file file2`。请注意，这必须是使用 GDB 标志（GCC 中的 -g）编译的二进制文件。加载此符号文件后，您将无法中断或查看原始执行文件的任何行。但是，您可以为新符号文件设置断点，即`break file2.c:40`然后像以前一样逐步执行。它有点 hackish 并且可能无法完美运行，因为您实际上是在捕获新进程的执行并将其映射到其二进制文件的符号表，而不使用该二进制文件直接运行它。我没有出色的结果，但您可以通过这种方式查看中间值。另一件事，为了返回调试原始文件，您必须`symbol-file file`重新加载它的符号表。

# objective-c - 有没有办法在 Objective-C 中以编程方式单击链接、将信息输入登录表单等？（就像机械化一样）

> ID：10671230
> 
> 赞同：0
> 
> 时间：2012-05-20T06:16:53.770
> 
> 标签：objective-c, cocoa

有没有类似于 Objective-C 的机械化的东西？我想在搜索栏中输入信息，选择一个链接，然后从网页中提取一些信息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T08:32:45.033

您可以[在 WebView 的上下文中运行 JavaScript 代码，](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/WebKit/Classes/WebView_Class/Reference/Reference.html#//apple_ref/occ/instm/WebView/stringByEvaluatingJavaScriptFromString%3a)也可以[自己与其 DOM 交互](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/WebKit/Classes/WebView_Class/Reference/Reference.html#//apple_ref/occ/instm/WebView/mainFrameDocument)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T08:33:22.317

您可以将 javascript 注入页面以执行您想要的操作`stringByEvaluatingJavaScriptFromString`。例如模拟点击，注入：

```
getElementById('the_button').click(); 
```

# javascript - 如何简化复杂的多边形？

> ID：10671234
> 
> 赞同：8
> 
> 时间：2012-05-20T06:17:41.490
> 
> 标签：javascript, geometry, polygon

最近一直在思考如何将复杂的多边形转化为非复杂的多边形。这是怎么做到的？

这是我想做的事情：

![例子](../Images/39a2f087d96126597c03798cd2a88966.png)

完成后我将使用 JavaScript 结束，但任何形式的解决方案都可以（语言、算法或只是简单的英语）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-20T12:45:18.127

我将使用与手动绘制多边形时相同的启发式方法（这可能不是计算该多边形的最数学有效的方法，但可能是最容易理解/实现的方法）。

1.  从一点开始
2.  找到我当前点和我要到达的点之间的所有交点
3.  如果不存在，则绘制到下一点
4.  如果有，则绘制到那里，然后将下一个点设置为从那里开始的下一个点
5.  如果您没有回到起点，请转到 2。

[这是 jsfiddle 上的示例](http://jsfiddle.net/mq9Zn/1/)实现。注意：它没有优化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-20T16:52:46.333

我相信最简单的路线是执行[平面扫描](http://en.wikipedia.org/wiki/Sweep_line_algorithm)以检测所有边缘边缘交叉点。增加一个基本的平面扫描算法实现来保持最外层边界并不难，这正是你想要的。几乎所有[关于计算几何的教科书](http://en.wikipedia.org/wiki/List_of_books_in_computational_geometry)都很好地解释了这一点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-08T09:37:09.060

这是一个较晚的答案，但这可以使用[Javascript Clipper Library](https://sourceforge.net/projects/jsclipper/)来完成。所需的操作是简化（内部使用联合操作），它会删除边与其他边相交的自相交。

笔记！Javascript Clipper 5 不能确保在所有情况下解决方案都只包含真正简单的多边形。这种特殊情况是顶点接触边缘。Clipper 6（Javascript 版本尚未准备好）也可以处理这些特殊情况。

* * *

## 使用 Javascript Clipper 简化多边形主演示

您可以使用[Javascript Clipper Main Demo](http://jsclipper.sourceforge.net/5.0.2.2/main_demo.html)来玩 Clipper 。单击多边形-自定义，您可以在此处输入自己的多边形，然后进行所需的操作。

让我们举个例子：
[[7,86, 196,24, 199,177, 47,169, 51,21, 224,102, 223,146, 7,140,​​ 7,86]]

如果您在演示中输入这些点（作为主题或剪辑），您将获得以下多边形： ![在此处输入图像描述](../Images/a1577e4e0a54521cfbcd19cb777cb524.png)

然后进行简化操作，产生以下解决方案：

![在此处输入图像描述](../Images/9285ce1923162ddb09d8e30e15894e18.png)

在多边形资源管理器中点击求解，可以看到简化多边形的坐标：[[199,177, 47,169, 47.75,141.13, 7,140,​​ 7,86, 49.62,72.02, 51,21, 114.51,50.73, 196,24, 197.28 ,89.49, 224,102, 223,146, 198.38,145.32]]

* * *

## 简化多边形的代码示例

最后，我将完整的功能代码放在[JSBIN](http://jsbin.com/OCEZoZo/1)中，其中包括 SVG 绘图功能，因此相当长：

```
<html>
  <head>
    <title>Javascript Clipper Library / Simplifying Polygons</title>
    <script src="clipper.js"></script>
    <script>
function draw() {
  var subj_polygons = [[{"X":7,"Y":86},{"X":196,"Y":24},{"X":199,"Y":177},{"X":47,"Y":169},{"X":51,"Y":21},{"X":224,"Y":102},{"X":223,"Y":146},{"X":7,"Y":140},{"X":7,"Y":86}]];
  var scale = 100;
  subj_polygons = scaleup(subj_polygons, scale);
  var cpr = new ClipperLib.Clipper();
  cpr.AddPolygons(subj_polygons, ClipperLib.PolyType.ptSubject);

  var solution_polygons = new ClipperLib.Polygons();
solution_polygons = cpr.SimplifyPolygons(subj_polygons, ClipperLib.PolyFillType.pftNonZero);
  //console.log(JSON.stringify(solution_polygons));
  var svg = '<svg style="margin-top:10px; margin-right:10px;margin-bottom:10px;background-color:#dddddd" width="240" height="200">';
  svg += '<path stroke="black" fill="yellow" stroke-width="2" d="' + polys2path(solution_polygons, scale) + '"/>';
  svg += '</svg>';
  document.getElementById('svgcontainer').innerHTML = svg;
}

// helper function to scale up polygon coordinates
function scaleup(poly, scale) {
  var i, j;
  if (!scale) scale = 1;
  for(i = 0; i < poly.length; i++) {
    for(j = 0; j < poly[i].length; j++) {
      poly[i][j].X *= scale;
      poly[i][j].Y *= scale;
    }
  }
  return poly;
}

// converts polygons to SVG path string
function polys2path (poly, scale) {
  var path = "", i, j;
  if (!scale) scale = 1;
  for(i = 0; i < poly.length; i++) {
    for(j = 0; j < poly[i].length; j++) {
      if (!j) path += "M";
      else path += "L";
      path += (poly[i][j].X / scale) + ", " + (poly[i][j].Y / scale);
    }
    path += "Z";
  }
  return path;
}
    </script>
  </head>
  <body onload="draw()">
  <h2>Javascript Clipper Library / Simplifying Polygons</h2>
  This page shows an example of simplifying polygon and drawing it using SVG.
    <div id="svgcontainer"></div>
  </body>
</html> 
```

* * *

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-20T11:58:04.127

您应该维护每个交点的事件边列表。

然后永远选择边缘（输出），它与前一个（输入）边缘的角度最小（逆时针）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-20T06:45:13.167

看来您将要研究[Convex Hull 算法](http://en.wikipedia.org/wiki/Convex_hull_algorithms)。这是一些 Convex Hull 算法的[小程序。](http://www.cse.unsw.edu.au/~lambert/java/3d/hull.html)您也许可以修改其中一种算法以获取您的极值点并从那里开始。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-22T13:16:18.033

好的，看来我提出了可行的解决方案：

[http://mrpyo.github.com/Polygon/](http://mrpyo.github.com/Polygon/)

它是 ActionScript，因此将其转换为 JavaScript 应该没有问题。如果有人感兴趣，我可以解释使用的算法...

# javascript - 在 Node.js 中表示状态的普遍接受的模式是什么

> ID：10671239
> 
> 赞同：1
> 
> 时间：2012-05-20T06:18:26.483
> 
> 标签：javascript, node.js, functional-programming

例如，在经典的面向对象编程中，我可能有一个类 School ，它有一个代表学生的字符串数组（不是理想的数据结构，仅用于说明目的）。它可能看起来像这样

```
class School {
    String name;
    String[] students;
} 
```

然后我可以实例化一堆不同的学校，每个学校都有不同的名字和不同的学生。这个概念如何转化为 Node.js？如果我有一个 School 模块，那么整个应用程序将共享一个实例。我最初的想法是将每所学校表示为 JSON 对象，并基本上传递 JSON，而我通常会传递 School 的实例。这是正确的想法吗？是否有替代方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T07:03:32.707

如果应该从外部隐藏状态（即受保护的属性），您可以执行以下操作：

```
SchoolFactory = {
    create: function(name, students) {
        students = students || [];
        // return the accessor methods
        return {
            getName: function() {
                return name;
            },
            addStudent: function(student) {
                students.push(student);
            }
            // add more methods if you need to
        }
    }
}

var school = SchoolFactory.create('Hogwarts');
console.log(school); // will not display the name or students
school.addStudent('Harry'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T06:36:46.933

构造函数和实例：

```
function School(name, students) {
  this.name = name;
  this.students = students || [];
};
School.prototype.enroll = function (student) {
  if (!~this.students.indexOf(student)) {
    this.students.push(student);
  } else {
    throw new Error("Student '" + student + "' already enrolled in " + this.name);
  }
};
var s = new School("Lakewood");
console.log(s.name);
console.log(s.students);
s.enroll("Me");
console.log(s.students); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T06:36:15.723

我不关心任何模式...但是如果您喜欢这些模块...您可以声明一个学校模块并在其导出中包含一个 School 类。不会共享单个实例，因为您将实例化该类

# ruby - 仅当 Ruby 中的所有值都为 true 时才返回 true

> ID：10671242
> 
> 赞同：13
> 
> 时间：2012-05-20T06:18:57.837
> 
> 标签：ruby

验证可枚举的所有元素是否满足特定条件的快速方法是什么？我想在逻辑上它会像：

```
elements = [e1, e2, e3, ...]
return (condition on e1) && (condition on e2) && (condition on e3) && ... 
```

例如，如果我有一个整数数组，并且我想回答“所有整数都是奇数吗？”这个问题。

我总是可以遍历每个值，检查它是否为真，然后在其中一个返回假时返回假，但有更好的方法吗？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-20T06:23:25.550

您可以使用[`all?`](http://ruby-doc.org/core-1.8.7/Enumerable.html)Enumerable mix-in 中的函数。

```
elements = [1, 3, 5, 7, 9, 11, 13, 15, 17, 19]
return elements.all? { |elem| elem % 2 != 0 } 
```

或者，正如评论中所指出的，`odd?`如果您专门寻找奇数值，您也可以使用。

```
elements = [1, 3, 5, 7, 9, 11, 13, 15, 17, 19]
return elements.all?(&:odd?) 
```

# ios - 如何更改 NSMutableDictionary 中现有对象的键？

> ID：10671246
> 
> 赞同：2
> 
> 时间：2012-05-20T06:20:02.663
> 
> 标签：ios, nsmutabledictionary

如何更改 NSMutableDictionary 中现有对象的键？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T06:27:21.833

您必须从原始密钥中删除对象并使用新密钥将其添加回来。你可以把它变成一个类别`NSMutableDictionary`。

该类别看起来像这样：

```
@interface NSMutableDictionary (RenameKey)

- (void)renameKey:(NSString *)original to:(NSString *)new;

@end

@implementation NSMutableDictionary (RenameKey)

- (void)renameKey:(id)original to:(id)new; {
    id value = [self objectForKey:original];
    [self removeObjectForKey:original];
    [self setObject:value forKey:new];}
@end 
```

您可能应该在方法名称中添加前/后缀以避免将来在运行时发生名称冲突。以上也不是线程安全的，执行重命名需要三个步骤。

# php - 未找到数组值的 PHP MySQL 查询

> ID：10671254
> 
> 赞同：1
> 
> 时间：2012-05-20T06:21:49.450
> 
> 标签：php, mysql

我有一组数据，可以在说话的庄园中动态生成独特的数据。它实际上是一个包含 5 个哈希的数组。

我想要做的是一个带有 where 子句的基本选择查询，它通过 OR 基本上是一个单行查询而不是每个数组项的查询来检查每个查询。

我试图确保进入数据库的哈希值与另一个哈希值相同，我知道实际发生的概率几乎为零，但仍有可能，比抱歉更安全是我对此事的看法

无论如何，我正在考虑的查询没有任何意义，好像找到了一个匹配项查询将导致我想要做的就是从原始数组中找到未找到的那个并在没有找到所有 5 个的地方使用它'我会随机选择一个我猜我想在一个新数组中形成一个 1 到 5 的结果，所以我可以从该结果中随机选择

这是可能的，还是用一个单曲查询循环遍历每一个更容易？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T06:29:12.867

```
"SELECT
        CASE hashes.hash
            WHEN $hashes[0] THEN 0
            WHEN $hashes[1] THEN 1
            WHEN $hashes[2] THEN 2
            WHEN $hashes[3] THEN 3
            ...
        END
    FROM hashes WHERE hashes.hash IN(".implode($hashes).")" 
```

这应该准确地告诉您在服务器上找到了您发送到服务器的哪些哈希值。

结果集将是生成查询的数组的索引键 (0, 1, 2, 3)。

如果您基于 100 个散列的数组发送查询，并得到一个包含 99 个散列的结果集，这意味着在 db 中至少没有找到一个散列。

您可以像这样循环遍历结果集：

```
while($row = $pdo->fetch()) {
    $index = $row[0]  // first column of the result set
   unset($hashes[$index]);
} 
```

当 while 完成时，数组中剩下的唯一散列应该是在数据库中找不到的散列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T06:24:54.347

我的观点是，用一个查询循环遍历每个查询会更容易。从你所说的来看，一次做这件事似乎没有什么大的好处。

在这种情况下，我会建议：

```
 alter table myTable create id_bkp int;
 update myTable set id_bkp=account_id;
 update myTable set account_id=56 where id_bkp=100;
 update myTable set account_id=54 where id_bkp=56;
 alter table myTable drop id_bkp; 
```

当然，这取决于您使用的数据库系统。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T06:30:42.333

你的意思是这样的吗？

```
$sql = "SELECT * FROM `table` WHERE `field` = ";

$where_string = "'" . implode("' OR `field` = '",$my_array) . "'";

$sql .= $where_string; 
```

你可以使用：

```
$my_array = array_unique($my_array); 
```

删除重复值。

# javascript - javascript：删除元素后停止 setInterval

> ID：10671256
> 
> 赞同：3
> 
> 时间：2012-05-20T06:23:21.603
> 
> 标签：javascript, jquery, setinterval, clearinterval

我想`clearInterval`在删除包含`setInterval`函数的 div 后自动执行函数，而这个 div 是 ajax 响应的结果，因为它在删除 div 后不会自行停止。

```
$('#element').mouseover(function(){
     $.post('ajax/ajax.php', function(data) {
         $('<div id="tooltip'></div>").appendTo("div#main");
         $('#tooltip').html(data);
         $('#tooltip').show();
     });
}).mouseout(function(){
     clearInterval(intervalId);
     $('#tooltip').empty();
     $('#tooltip').remove();
}); 
```

ajax 响应包含带有间隔 Id 处理程序`data`的 javascript函数：`setInterval`

```
var intervalId = window.setInterval(pics_load, 3000); 
```

我尝试使用[Jquery 卸载](http://api.jquery.com/unload/)但同样的问题：

```
$('#tooltip').unload(function(){
     clearInterval(intervalId);
} 
```

我也尝试在 ajax 响应中使用它：

```
$(window).unload(function(){
     clearInterval(intervalId);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T08:03:26.390

您是否尝试过使用将 intervalId 存储在`#element`自身上`$.data`？

```
$('#element').mouseover(function() {
     var $this = $(this);
     $.post('ajax/ajax.php', function(data) {
         $('<div id="tooltip'></div>").appendTo("div#main");
         $('#tooltip').html(data);
         $('#tooltip').show();
         // save interval id here
         var intervalId = setInterval('pics_load', 3000);
         $this.data('intervalId', intervalId);
     });
}).mouseout(function(){
     // retrieve intervalId here
     var intervalId = $(this).data('intervalId');
     clearInterval(intervalId);
     $('#tooltip').empty();
     $('#tooltip').remove();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T07:26:53.690

我仍然对您通常尝试做的事情感到困惑......所以我会假设：

*   每次用户结束`#element`您想要从服务器获取帮助描述并且用户很快移除对该元素的关注时，您想要隐藏帮助描述

女巫听起来很合理......但是在哪里`setInterval()`出现？为什么需要使用这些方法？您只想在第一次过度操作时显示它？

作为一名优秀的开发人员，我会这样做：

*   仅在第一次向服务器询问该帮助描述，因此一旦您有多个用户，我可以在服务器上节省一些负载。
*   使用`data-`属性保存描述并在可用时重新使用它们
*   **请注意**，您已经可以预先填充它们。

* * *

我假设的 HTML

```
<div class="container">
    <h1>Stackoverflow</h1>
    <ul>
      <li>Element 1</li>
      <li>Element 2</li>
      <li>Element 3</li>
      <li>Element 4</li>
      <li>Element 5</li>
    </ul>
</div> 
```

作为 jQuery，我会做这样的事情

```
$(function() {

  $("ul li").hover(
    function() {
      // on mouse over

      if($(this).prop("data-tooltip") === undefined) {
        // use $.post() and retrieve the tooltip description,
        //   then place it on data-tooltip property

        $.post('ajax/ajax.php', function(data) {               
          // save for next time
          $(this).prop("data-tooltip", data);
          // show
          tooltip($(this), $(this).prop("data-tooltip")); 
        });
      }
      else { 
        // show saved description
        tooltip($(this), $(this).prop("data-tooltip"));
      }

    },
    function() {
      // on mouse out          
      tooltip();          
    }
  );  

});

function tooltip(elm, msg) {
  if(msg)
    $("<span class='tooltip' />").stop().html(msg).appendTo(elm).show();
  else 
    $(".tooltip").hide();
} 
```

举个简单的例子，这里有一个[JsBin 上的 Live Demo](http://jsbin.com/awafah/edit#javascript,html,live)。

* * *

**如果您想**进一步缩小代码，可以使用**CSS 框架**来帮助您。

[这是相同的示例](http://jsbin.com/apuxaz/edit#javascript,html,live)，但现在使用的是[Bootstrap Tooltip](http://twitter.github.com/bootstrap/javascript.html#tooltips)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T06:43:26.703

在块外声明**intervalId**，分配时不要使用**var**。**在设置间隔之前检查intervalId**是否仍然未使用也是一个好主意。

```
var intervalId=null;
$('#element').mouseover(f    unction(){
     $.post('ajax/ajax.php', function(data) {
         $('<div id="tooltip'></div>").appendTo("div#main");
         $('#tooltip').html(data);
         $('#tooltip').show();
     //somewhere inside this should be:
     if (!intervalId) ... //then set the interval
 });
}).mouseout(function(){
     clearInterval(intervalId);
     intervalId=null;
     $('#tooltip').empty();
     $('#tooltip').remove();
}); 
```

# google-app-engine - 使用 Java 将数据从 Google Cloud Storage 加载到 BigQuery

> ID：10671266
> 
> 赞同：3
> 
> 时间：2012-05-20T06:25:21.473
> 
> 标签：google-app-engine, google-cloud-storage, google-bigquery

我想将数据从 Google Cloud Storage 上传到 BigQuery，但找不到任何描述如何执行此操作的 Java 示例代码。有人可以给我一些提示如何做到这一点吗？

我真正想做的是将数据从 Google App Engine 表传输到 BigQuery（并每天同步），以便我可以进行一些分析。我使用 Google App Engine 中的 Google Cloud Storage Service 将（新）记录写入 Google Cloud Storage 中的文件，唯一缺少的部分是将数据附加到 BigQuery 中的表（或为首次写入创建新表）。诚然，我可以使用 BigQuery 浏览器工具手动上传/附加数据，但我希望它是自动的，否则我需要每天手动进行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-21T15:38:07.253

我不知道任何用于将表从 Google Cloud Storage 加载到 BigQuery 的 java 示例。也就是说，如果您按照[此处](https://developers.google.com/bigquery/articles/gettingstartedwithjava#insertqueryjob)运行查询作业的说明进行操作，则可以使用以下内容运行 Load 作业：

```
Job job = new Job();
JobConfiguration config = new JobConfiguration();
JobConfigurationLoad loadConfig = new JobConfigurationLoad();
config.setLoad(loadConfig);

job.setConfiguration(config);

// Set where you are importing from (i.e. the Google Cloud Storage paths).
List<String> sources = new ArrayList<String>();
sources.add("gs://bucket/csv_to_load.csv");
loadConfig.setSourceUris(sources);

// Describe the resulting table you are importing to:
TableReference tableRef = new TableReference();
tableRef.setDatasetId("myDataset");
tableRef.setTableId("myTable");
tableRef.setProjectId(projectId);
loadConfig.setDestinationTable(tableRef);

List<TableFieldSchema> fields = new ArrayList<TableFieldSchema>();
TableFieldSchema fieldFoo = new TableFieldSchema();
fieldFoo.setName("foo");
fieldFoo.setType("string");
TableFieldSchema fieldBar = new TableFieldSchema();
fieldBar.setName("bar");
fieldBar.setType("integer");
fields.add(fieldFoo);
fields.add(fieldBar);
TableSchema schema = new TableSchema();
schema.setFields(fields);
loadConfig.setSchema(schema);

// Also set custom delimiter or header rows to skip here....
// [not shown].

Insert insert = bigquery.jobs().insert(projectId, job);
insert.setProjectId(projectId);
JobReference jobRef =  insert.execute().getJobReference();

// ... see rest of codelab for waiting for job to complete. 
```

有关加载配置对象的更多信息，请参阅[此处](http://javadoc.google-api-java-client.googlecode.com/hg/apis/bigquery/v2/com/google/api/services/bigquery/model/JobConfigurationLoad.html)的 javadoc 。

# jquery - jQuery 通过动作保持活动状态

> ID：10671269
> 
> 赞同：0
> 
> 时间：2012-05-20T06:25:47.350
> 
> 标签：jquery, session, keep-alive

我正在尝试编写一个 jQuery 脚本来检查用户是否在最后一分钟内单击、滚动或点击了某个键。如果是这样，它应该在下一个间隔（1 分钟）显示警报。如果没有，只要页面在 1 小时内加载，它仍然会每隔 1 分钟显示一次警报。

这似乎应该有效，但事实并非如此。有任何想法吗：

```
$(function() {

        var initialPageLoad = new Date().getTime();
        var lastSiteAction = 0;
        var checkInterval = setInterval(function(){
           if(Date().getTime() - lastSiteAction > 60000){
               if(Date().getTime() - initialPageLoad > 3601000){
                   clearInterval(checkInterval);
               }else{
                   alert('Tried to checkin!  You have not done anything in the last minute.');
               }
           }else{
                alert('Tried to checkin!  You have done something in the last minute.')
           }
        }, 60000); // 1 mins * 60 * 1000

        $(document).keydown(function(){
             lastSiteAction = new Date().getTime();
        });
        $(document).scroll(function(){
             lastSiteAction = new Date().getTime();
        });
        $(document).mousedown(function(){
             lastSiteAction = new Date().getTime();
        });

        alert('loaded!');
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T08:24:00.997

您的代码在许多方面似乎存在缺陷，尤其是因为您每分钟都在检查用户是否进行了交互。假设用户在检查前 1 秒进行了交互。第一次检查（用户交互后 59 秒）什么都不做，然后在 1:59 进行第二次检查显示警报。用户已近两分钟处于非活动状态，而不是 1 分钟。

作为解决方案怎么样：http: [//jsfiddle.net/xAzNN/5/](http://jsfiddle.net/xAzNN/5/)

# c - C中这两个令人困惑的函数指针表示法之间的区别？

> ID：10671270
> 
> 赞同：2
> 
> 时间：2012-05-20T06:25:49.743
> 
> 标签：c, function-pointers

C中这两种函数指针表示法有什么区别？

`void (*a[]())`和`void (*a)()[]`

它们是否都表示相同 - a 作为指向函数的指针数组 - 或者第二个表示指向函数数组的指针？

我应该如何调用这些函数 - 比如说`void (*a[]()) = {swap, add, sub, prod};`？

这是否意味着这`a`是一个由 4 个元素组成的函数指针数组，并且`swap`, `add`, `sub`,`prod`的地址在`a[0]`...`a[3]`中。我应该如何调用这些函数，像这样？

```
*a[i]() 
```

还是这样？

```
a[i]() 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-20T06:39:30.873

使用[cdecl.org](http://cdecl.org)来解决这些问题，直到您可以不假思索地做到这一点。

`void (*a[]())`: 将 a 声明为返回指向 void 的指针的函数数组

然而

`void (*a)()[]`: 将 a 声明为指向返回 void 数组的函数的指针

后者无效 C.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-20T13:31:47.067

他们都是无效的。

```
void (*a[]()); 
```

被解释为

```
 a        -- a
       a[]      -- is an array
       a[]()    -- of function
      *a[]()    -- returning pointer
void (*a[]())   -- to void. 
```

您不能声明函数类型的数组。相似地，

```
void (*a)()[] 
```

被解释为

```
 a       -- a
     (*a)      -- is a pointer
     (*a)()    -- to a function
     (*a)()[]  -- returning an array of unknown size
void (*a)()[]  -- of void. 
```

函数不能返回数组类型，也不能有`void`.

如果要声明一个指向返回函数的指针数组`void`，可以将其构建为：

```
 a          -- a
       a[N]       -- is an N-element array
      *a[N]       -- of pointers
     (*a[N])()    -- to functions
void (*a[N])();   -- returning void 
```

因此，`void (*a[N])();`声明`a`为一个指向返回函数的指针数组`void`。您将数组中的每个单独函数称为

```
(*a[i])(); 
```

或者

```
a[i](); 
```

虽然我更喜欢第一种形式，即使它有点混乱。

因此，给定函数`swap`、`add`、`sub`和的列表`prod`，您可以将数组构建为

```
void swap() {...}
void add() {...}
void sub() {...}
void prod() {...}
...
void (*a[])() = {swap, add, sub, prod};
...
(*a[0])(); // calls swap
(*a[1])(); // calls add 
```

给定函数名称，我假设它们采用某种参数。请注意，数组中的所有函数指针都应具有相同的*签名*；也就是说，它们都应该具有相同的返回类型，以及相同数量和类型的参数。

当您通过指针调用函数时，C 允许您删除显式取消引用，因此您可以将这些函数称为

```
 a[0]();
 a[1](); 
```

但我更喜欢第一种形式，即使它在视觉上更混乱。

请记住，`[]`函数调用`()`的优先级高于一元`*`，因此`T *a[N]`声明指向 的 N 元素数组，声明指向 的 N 元素数组的指针，声明`T`返回指向的指针的函数，并声明指向返回的函数的指针.`T (*a)[N]``T``T *f()``T``T (*f)()``T`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-20T06:39:16.947

根据[C 中的 Right-Left-Rule （](http://ieng9.ucsd.edu/~cs30x/rt_lt.rule.html)[此处](http://www.codeproject.com/Articles/7042/How-to-interpret-complex-C-C-declarations#right_left_rule)的其他参考），编译器（可能也被标准）认为这两个表达式都是无效的。

第一个是函数数组，后者是空数组。

指向返回 void 的函数的指针数组将是

```
void (*a[])() 
```

.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-20T06:39:47.710

第二个表达式在 C 中无效，因为首先它不允许数组，`void`其次它不允许函数返回数组。

# android - 多次播放 WAV 文件

> ID：10671271
> 
> 赞同：1
> 
> 时间：2012-05-20T06:26:07.400
> 
> 标签：android

每次用户按下一个按钮时，我都需要播放相同的短 wav 文件（1 秒）。我有以下代码可以点击大约 30 次，然后设备上的应用程序“强制关闭”。我认为正在发生的事情是正在创建媒体播放器的新实例，然后实例建立（大约 30 次点击）并且应用程序崩溃。所以我然后添加了“发布”实例，希望在单击按钮时播放 wav，然后释放媒体播放器。但是，它不是那样工作的。使用 mp.release() 没有声音播放可能是因为 medaiplayer 太快被释放而用户听不到声音？

任何人都有一个很好的提示来帮助我让它工作吗？非常感谢大家。

按钮 button2 = (Button) findViewById(R.id.button10); button2.setOnClickListener(new View.OnClickListener() {

```
 public void onClick(View v) {
            // Perform action on click
            MediaPlayer mp = MediaPlayer.create(getApplicationContext(), R.raw.clicker);
            mp.start();
            mp.release(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T06:29:44.410

它很简单，只需创建一次 MediaPlayer，然后随着时间的推移播放它。

```
 private MediaPlayer mp;
 public void onClick(View v) {
            // Perform action on click
            if (mp == null){
                 mp = MediaPlayer.create(getApplicationContext(), R.raw.clicker);
            }
            mp.start();
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T12:55:15.063

为什么在 SoundPool 更适合小型音频文件时使用 MediaPlayer？作为基础，您可以使用它：

```
this.setVolumeControlStream(AudioManager.STREAM_MUSIC);

soundPool = new SoundPool(4, AudioManager.STREAM_MUSIC, 70);

final HashMap<Integer, Integer>  soundPoolMap = new HashMap<Integer, Integer>();

final int soundID = 4;
soundPoolMap.put(soundID, soundPool.load(this, R.raw.wav_sound, 4));

soundPool.setOnLoadCompleteListener(new OnLoadCompleteListener() 
{
    public void onLoadComplete(SoundPool soundPool, int sampleId, int status) 
    {
        if (sampleId == 4)
        {
            soundPool.play(4, 50, 50, 1, 0, 1f);                                
        }
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T09:28:10.157

这是可行的简单解决方案

```
MediaPlayer mp;
mp = MediaPlayer.create(getApplicationContext(), R.raw.clicker);

 public void onClick(View v) {
            // Perform action on click
            if(mp.isPlaying())
                {
                mp.stop();
                mp.reset();
                mp.release();
                }
                mp = MediaPlayer.create(getApplicationContext(), R.raw.clicker);
                mp.start(); 
```

这将检查媒体播放器是否已经在播放。如果它已经在播放，它将停止并释放它，然后初始化该媒体播放器（mp）对象并启动媒体播放器。

如果没有播放，它将执行 if 语句之后的代码，并在初始化 mediaplayer 对象（本例中为 mp）后启动媒体播放器

要了解有关 MediaPlayer 的更多信息，请研究此[http://developer.android.com/reference/android/media/MediaPlayer.html](http://developer.android.com/reference/android/media/MediaPlayer.html)。研究 Mediaplayer 生命周期

# c# - 如何读取 Excel 工作表中的一行并将其剪切？

> ID：10671272
> 
> 赞同：-2
> 
> 时间：2012-05-20T06:26:09.853
> 
> 标签：c#, visual-studio-2010, c#-4.0

我想读取单列中的行并将其放入字符串变量中。我一次排一排。当我读取一行时，我想从工作表中删除该行并保存 Excel 文件。第二次，它跳过空行并进入下一行。删除它并保存文件。这继续..我怎样才能使用 C# 实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T06:30:32.800

如果您只是想从 Excel 中读取，我建议您使用[Linq to Excel](http://code.google.com/p/linqtoexcel/)

但是，由于您还想更新 Excel 文档，因此免费入门的最佳位置是[Excel Interop](http://msdn.microsoft.com/en-us/library/dd264733.aspx)（稍后会出现链接）或[OLEDB 与 Excel](http://www.codeproject.com/Articles/8500/Reading-and-Writing-Excel-using-OLEDB)的连接。

如果您有一点预算，[Spreadsheet Gear](http://www.google.com/aclk?sa=L&ai=C-hWokI-4T67_BYnGsQKzu8HWCbXhxinnlZvPCe3qhbwTCAAQAVCan5OQ_f____8BYMnm8IbIo5AZyAEBqgQZT9CtjYAGHfhVAyOCbZJhbE7BGF_T_JUYPQ&sig=AOD64_007LbmoavxLK10HemsfJyLyH5Dyg&ved=0CAoQ0Qw&adurl=http://www.spreadsheetgear.com/support/samples/excel.aspx&rct=j&q=interop%20excel%20c#)非常值得研究。

# visual-c++ - Visual c 中使用的 fastcall 关键字是什么？

> ID：10671281
> 
> 赞同：12
> 
> 时间：2012-05-20T06:28:27.527
> 
> 标签：visual-c++, calling-convention, fastcall

我已经看到`fastcall`在许多函数之前附加的符号。为什么使用它？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-20T06:33:36.627

该函数之前的符号称为“调用约定”。它指定编译器如何（在低级别）将输入参数传递给函数并在执行后检索其结果。

有许多不同的调用约定，最流行的是`stdcall`和`cdecl`。

您可能认为只有一种方法可以做到这一点，但实际上，您可以通过多种方法调用函数并传入和传出变量。您可以将输入参数放在堆栈上（推送、推送、推送调用；弹出、弹出、弹出读取输入参数）。或者您可能更愿意将它们放在寄存器中（这是`fastcall`- 它试图将一些输入参数放入寄存器中以提高速度）。

但那么订单呢？你是从左到右还是从右到左推动它们？结果怎么样 - 总是只有一个（假设没有引用参数），所以你是否将结果放在堆栈中，在寄存器中，在某个内存地址？

另外，假设您正在使用堆栈进行通信-调用函数后实际清除堆栈的工作是谁-调用者还是被调用者？

备份然后恢复（某些）CPU 寄存器的内容怎么样 - 调用者应该这样做，还是被调用者保证它将按原样返回所有内容？

最流行的调用约定（到目前为止）是`cdecl`，它是 C 和 C++ 中的标准调用约定。WIN32 API 使用`stdcall`，这意味着调用 WIN32 API 的任何代码都需要`stdcall`用于这些函数调用（使其成为另一个流行的选择）。

`fastcall`有点奇怪——人们意识到许多函数只有一个 in/out 参数，从基于内存的堆栈中推入和弹出是相当多的开销，并且使函数调用有点繁重，因此引入了不同的编译器（不同) 调用约定，将一个或多个参数放在寄存器中，然后将其余参数放在堆栈中以获得更好的性能。问题是，并不是所有的编译器都使用相同的规则来定义什么去哪里和谁做什么`fastcall`，因此你在使用它时必须小心，因为你永远不知道谁在做什么。最后，看看[fastcall 真的更快吗？](https://stackoverflow.com/questions/2188680/is-fastcall-really-faster)有关`fastcall`性能优势的信息。

复杂的东西。

*需要记住的重要一点：如果您不确切*知道自己在做什么，请不要添加或更改调用约定，因为如果调用者和被调用者都不同意调用约定，您可能会最终堆栈损坏和段错误。这通常发生在当您在 DLL/共享库中调用函数并且编写的程序依赖于 DLL/SO/dylib 作为某个调用约定（例如`cdecl`）时，然后使用不同的调用约定重新编译该库（比如说，`fastcall`）。现在旧程序无法再与新库通信。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T06:31:33.063

[维基百科指出](http://en.wikipedia.org/wiki/X86_calling_conventions#fastcall)

> 名为 fastcall 的约定尚未标准化，并且根据编译器供应商的不同，实现方式也有所不同。通常，fastcall 调用约定在寄存器中传递一个或多个参数，从而减少调用所需的内存访问次数。

# javascript - javascript + jquery + setinterval + 动画

> ID：10671284
> 
> 赞同：4
> 
> 时间：2012-05-20T06:29:33.327
> 
> 标签：javascript, jquery, jquery-animate, setinterval

我遇到了 setInterval 和 jquery animate 的问题。这是我的代码：

```
function slides1() {

    ...

    $("table#agah1").animate({
        "left": first1
    }, "slow");
    $("table#agah2").animate({
        "left": first2
    }, "slow");
}

$(function () {
    cyc = setInterval("slides1()", 3000);
}); 
```

当切换到另一个浏览器选项卡并在一段时间后返回时，动画会毫不拖延地继续执行，直到我离开该选项卡的时间，然后才能正确操作。我添加了这些也没有任何运气：

```
$(window).focus(function () {
    jQuery.fx.off = false;
    cyc = setInterval("slides1()", 3000);
});
$(window).blur(function () {
    jQuery.fx.off = true;
    window.clearInterval(cyc);
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T06:35:14.700

~~较新版本的 jQuery 使用`requestAnimationFrame`回调来处理效果，浏览器不会处理隐藏选项卡上的效果。~~

~~与此同时，您的`setInterval`事件仍在发生，导致更多动画排队。~~

与其用来安排动画，不如使用`setInterval`上一个动画的“完成回调”来触发下一个循环，`setTimeout`如果需要的话。

```
function slides1() {

    ...

    $("table#agah1").animate({
        "left": first1
    }, "slow");
    $("table#agah2").animate({
        "left": first2
    }, "slow", function() {
       setTimeout(slides1, 2000); // start again 2s after this finishes
    });
}

$(function () {
    setTimeout(slides1, 3000);    // nb: not "slides1()"
}); 
```

这将确保动画间延迟和动画本身之间存在紧密耦合，并避免`setTimeout`与动画不同步的任何问题。

# codeigniter - CodeIgniter 的 IPN 库 - 脚本忽略我的代码

> ID：10671285
> 
> 赞同：0
> 
> 时间：2012-05-20T06:29:35.937
> 
> 标签：codeigniter, paypal, paypal-ipn

我正在使用 CI IPN 库，就它们的功能而言，一切运行顺利，所有 txn 信息都提交给数据库，这意味着脚本被调用并运行。但是，当我尝试在成功的 txn 的情况下添加我自己的指令时 - 即向客户发送电子邮件并将他的详细信息添加到数据库 - 它完全忽略了我的代码。我试图删除“如果成功”的条件，它仍然不起作用。重要的是要注意，当我通过来自另一个控制器的直接调用在 IPN 控制器之外运行这些模型时，它们运行良好。这是代码：

```
 class Ipn extends CI_Controller {

    // To handle the IPN post made by PayPal (uses the Paypal_Lib library).
    public function index()

    {

    $this->load->library('PayPal_IPN'); // Load the library

    // Try to get the IPN data.
    if ($this->paypal_ipn->validateIPN())
    {
        // Succeeded, now let's extract the order
        $this->paypal_ipn->extractOrder();

        // And we save the order now 
        $this->paypal_ipn->saveOrder();

        // Now let's check what the payment status is and act accordingly
        if ($this->paypal_ipn->orderStatus == PayPal_IPN::PAID)
        { 
            $this->load->model("register_model"); // my own code
            $this->register_model->insert(); // my own code
            $this->register_model->email_customer(); //my own code
        } // end if PAID
    } 
    else // Just redirect to the root URL
    {
        $this->load->helper('url');
        redirect('/', 'refresh');
    } // end if validates
  } // end function
 } // end class 
```

TIA 为您提供帮助。马塔尼亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T06:46:05.610

调试您的 Paypal IPN 代码可能是一场噩梦，我遇到了类似的麻烦，最终将控制器中的变量记录到文件中。

您确定您的“register_model”模型没有问题吗？也许尝试添加一些[日志](http://codeigniter.com/user_guide/general/errors.html)，检查您收到的变量。如果它记录并且一切看起来都正确，您需要查看您的“register_model”模型。

# java - java使用匿名类排序

> ID：10671287
> 
> 赞同：12
> 
> 时间：2012-05-20T06:30:00.537
> 
> 标签：java, class, sorting, anonymous

我有一堂课，我正在对列表进行排序。

```
import java.util.*;

public class First 
{

    private static HashMap<String,Second> msgs;

    public static void main(String[] args) 
    {           

    List<String> ls=new ArrayList<String>();

   ls.add("fourth");
   ls.add("2");
   ls.add("second");
   ls.add("first");
   ls.add("third");
   ls.add("1");

   Iterator it=ls.iterator();

   // before sorting
   while(it.hasNext())
   {
     String s=(String)it.next();
     System.out.println(s);
   }

   Collections.sort(ls, new Comparator(){
       public int compare(Object o1, Object o2) {
           return -1;
           // it can also return 0, and 1
        }
    });

System.out.println(" ");

//after sorting
   Iterator iti=ls.iterator();
   while(iti.hasNext())
   {
     String s=(String)iti.next();

     System.out.println(s);
   }

}

} 
```

程序运行后，我得到这些值：

```
1    
third
first
second
2
fourth 
```

我的问题是 Collection.sort() 函数在这里的行为是什么。从比较函数返回 -1 时，我们得到列表的相反顺序。那我们怎样才能得到其他排序顺序呢？返回 0 和 1 的作用是什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-20T16:09:07.667

最后，我以这种方式修改了排序函数以获取排序后的数据。

```
 Collections.sort(ls, new Comparator() 
                           {

                            public int compare(Object o1, Object o2) 
                            {
                            String sa = (String)o1;
                            String sb = (String)o2;

                            int v = sa.compareTo(sb);

                            return v;           

                                // it can also return 0, and 1
                            }
                           }    
                    ); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-07-03T13:20:21.347

您可以通过这种方式使用匿名类：

```
TreeSet<String> treeSetObj = new TreeSet<String>(new Comparator<String>() {
    public int compare(String i1,String i2)
    {
        return i2.compareTo(i1);
    }
}); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-20T06:35:02.897

这是[javadoc](http://docs.oracle.com/javase/6/docs/api/java/util/Comparator.html#compare%28T,%20T%29)所说的：

> 整数比较（T o1，T o2）
> 
> 比较它的两个参数的顺序。返回负整数、零或正整数，因为第一个参数小于、等于或大于第二个。

您的比较器实现不遵守此合同，因此结果是不确定的。如果它认为 o1 小于 o2，它必须返回一个负值。如果它认为 o1 大于 o2，它必须返回一个正值。如果它认为 o1 等于 o2，它必须返回 0。它当然必须是一致的。如果 o1 < o2，则 o2 > o1。如果 o1 < o2 且 o2 < o3，则 o1 < o3。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-20T06:35:34.073

> 返回 0 和 1 的作用是什么？

也就是说o1等于o2，或者o1大于o2。

您的匿名比较器当前表示 o1 小于 o2，对于*和**的每个可能值`o1``o2`*。这根本没有意义，并导致行为`sort`不可预测。

一个*有效*的比较器必须实现该`compare(Object, Object)`方法，以便它的行为符合`Comparator`接口的要求。

* * *

如果您的真正目的是颠倒列表中元素的顺序，请不要使用`sort`. 利用`Collections.reverse()`

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-05-20T06:45:43.633

`java.util.Comparator`类在`compare`方法 java doc 中说：

> 作为第一个参数的负整数、零或正整数小于、等于或大于第二个参数。

您可以使用以下代码：

```
Collections.sort(ls, new Comparator() 
{
    public int compare(Object o1, Object o2) 
    {
       if(o1 instanceof String && o2 instanceof String) 
       {
          String s_1 = (String)o1;
          String s_2 = (String)o2;

          return s_1.compareTo(s_2);
       } 
       return 0;    
    }
}); 
```

此代码必须正常工作。您可以更改比较方法以获得更大的灵活性。

`compareTo`类中的方法`String`在其 java 文档中说：

> `0`如果参数字符串等于该字符串的值；`0`如果此字符串按字典顺序小于字符串参数，则值小于；`0`如果此字符串按字典顺序大于字符串参数，则值大于。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-20T06:37:01.777

来自 Comparator 的 Javadoc

```
Compares its two arguments for order.  Returns a negative integer,
 zero, or a positive integer as the first argument is less than, equal
 to, or greater than the second. 
```

因此，为您的类定义小于、等于或大于的功能，您缺少等于和大于功能。

# swing - 如何将水平/垂直间隔行为添加到 miglayout

> ID：10671289
> 
> 赞同：0
> 
> 时间：2012-05-20T06:30:42.103
> 
> 标签：swing, miglayout

我正在使用 migLayout 并将其设置为 flowY。
然后我的对象添加了很多空白。
通常，在摇摆编辑器上，我会添加垂直或水平间隔。
使用 miglayout 添加它的最佳做法是什么？

另外 - 有时我会在组件之间放置垫片，这样两个组件就会在面板上保持最大的间隙。我如何模仿这种行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T10:36:00.770

首先，我建议阅读`getting started`migLayout 网站上的文档（[入门 PDF](http://www.miglayout.com/QuickStart.pdf)）。

为了给你的自定义间距，我建议使用：

```
MigLayout l = new MigMayout (
  "",
  "[][]20[]",
  "[]20[]"
); 
```

在 PDF 的第 3 页上。

# database - 冗余关系？

> ID：10671291
> 
> 赞同：1
> 
> 时间：2012-05-20T06:30:51.627
> 
> 标签：database, database-design, relational-database, table-relationships

我正在尝试设计一个数据库模型，但我有一个问题。

我需要表示这一点：

一个订单可能有零个或一个 QAP。
一份订单可以有一份或多份电子报告。
一份电子报告必须有一个 QAP。

为了表示这一点，我有这个模型：

![在此处输入图像描述](../Images/e659ae86f5dcdeef7ce12f5a9ddeec37.png)

如果一个订单没有 QAP，用户必须选择一个将其添加到电子报告中。如果订单有 QAP，用户不需要选择一个来将其添加到 E-Report，因为所有 E-Reports 都将具有该订单的 QAP。

用户将收到一个 Orden，然后他将填写 E-Reports。我对订单不感兴趣，我对用户填写的电子报告感兴趣，QAP 有填写所需的信息。

我的问题是**，如果 Order 没有 QAP 电子报告可能有不同的 QAP**。
例如，Order1 没有 QAP，但它有两个 E-Report：

*   E-Report1 具有 QAP1，并且
*   E-Report2 有 QAP2。

**这个数据库设计正确吗？

我不确定 Order 表和 E-Report 表中的重复 qapId 列是否正确。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T11:43:28.983

> 一个订单可能有零个或一个 QAP。

使 Order.qapid 成为可为空的外键将符合此要求。

> 一份订单可以有一份或多份电子报告。

使 EReport.orderid 成为不可为空的外键将*满足*该要求，但不太适合它。没有要求每个订单至少有一个 EReport 的声明方式。不过，您*可以*使用可更新的视图、触发器等来做到这一点。但是，您的意思是“每个订单必须至少有一个 EReport”并不十分清楚，这意味着 EReport 中的一行与 Order 中的一行同时创建。

> 一份电子报告必须有一个 QAP。

使 EReport.qaoid 成为不可为空的外键将符合此要求。

> 如果订单有 QAP，用户不需要选择一个来将其添加到 E-Report，因为所有 E-Reports 都将具有该订单的 QAP。

如果您将订单的 QAP 复制到 EReport，您可能会以错误的方式处理整个问题。你还说

> 我的问题是如果订单没有 QAP 电子报告可能有不同的 QAP。

这意味着每个订单只有一个 QAP。您可能需要在 Order 表中存储一个且仅一个 QAP，而在 EReport 表中*根本不需要存储*qapid。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T19:35:22.640

由于在强制 Order 获得 QAP 之前，EReports 可以有不同的 QAP，因此无法使用声明性引用完整性（单独）来表示您的约束。您现在拥有的模型就是您需要使用的模型，结合一些程序逻辑来强加您的规则，即如果 EReports 的 Order 有一个 QAP，则它们必须共享相同的 QAP。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T11:58:40.553

所以你想代表一种情况，`Order`没有`QAP`，但它是`EReport`，而且它必须是同一个？

好吧，既然`EReport`must always have `Order`，你可以省略`EReport.qapId`和依赖`Order.qapId`，如下所示：

![在此处输入图像描述](../Images/2a67dbee258e8088c7b0ed4141c5d0d4.png)

如果`Order.forOrder`为 false，那么您的客户端应用程序可以解释`Order.qapId`为好像它仅适用于 child `EReport`s，否则它适用于两者`Order`和`EReport`s。

# c# - 如何将用户的多个答案与我的 XML 文件进行比较？

> ID：10671300
> 
> 赞同：1
> 
> 时间：2012-05-20T06:34:00.523
> 
> 标签：c#, asp.net, xml

我正在创建一个采访网页，用户可以在其中回答文本框内屏幕上提到的特定问题。我有一个检查按钮。单击此按钮时，我需要比较在特定问题文本框中输入的答案，并且通常通过与我的 XML 文件对特定问题的答案进行比较来以百分比显示答案的准确性。

这是我的 XML 文件”

```
<?xml version="1.0" encoding="utf-8" ?> 
<Questions> 
  <Question id="1">What is IL code </Question> 
  <Answer id="1">Half compiled, Partially compiled code </Answer> 
  <Question id="2">What is JIT </Question> 
  <Answer id="2">IL code to machine language </Answer> 
 <Question id="3">What is CLR </Question> 
  <Answer id="3">Heart of the engine , GC , compilation , CAS(Code access security) , CV ( Code verification) </Answer> 
</Questions> 
```

这是我的表格：

![在此处输入图像描述](../Images/22149f2c59f274663a30e75b8c560a51.png)

下面是我的检查按钮的代码，我只比较了一个标签和文本框。有用。

```
XmlDocument docQuestionList = new XmlDocument();// Set up the XmlDocument //
docQuestionList.Load(@"C:\Users\Administrator\Desktop\questioon\questioon\QuestionAnswer.xml"); //Load the data from the file into the XmlDocument //
XmlNodeList AnswerList = docQuestionList.SelectNodes("Questions/Question");
foreach (XmlNode Answer in AnswerList)
{
    if (Answer.InnerText.Trim() == Label2.Text)
    {
        string[] arrUserAnswer = TextBox1.Text.Trim().ToLower().Split(' ');
        string[] arrXMLAnswer = Answer.NextSibling.InnerText.Trim().ToLower().Split(' ');
        List<string> lststr1 = new List<string>();
        foreach (string nextStr in arrXMLAnswer)
        {
            if (Array.IndexOf(arrUserAnswer, nextStr) != -1)
            {
                lststr1.Add(nextStr);
            }
        }
        if (lststr1.Count > 0)
        {
            TextBox1.Text = ((100 * lststr1.Count) / arrXMLAnswer.Length).ToString() + "%";
        }
        else
        {
            TextBox1.Text = "0 %";
        }
    }
} 
```

如您所见，我只比较了一个问题和相应答案的值，但我希望这不是硬编码的。相反，它应该接受问题和相应的文本框答案并与我的 XML 文件进行比较。我怎样才能实现我的目标？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T06:50:29.673

我只是保持简单，并设置一系列问题、答案和用户的答案......

```
XDocument xdoc = XDocument.Load(@"C:\Users\Administrator\Desktop\questioon\questioon\QuestionAnswer.xml");
string[] questions = xdoc.Root.Elements("Question").Select(x => (string)x).ToArray();
string[] answers = xdoc.Root.Elements("Answer").Select(x => (string)x).ToArray();
string[] userAnswers = new string[] { TextBox1.Text, TextBox2.Text, TextBox3.Text };
for (int i=0 ; i < questions.Length ; i++)
{
    // handle responses
    string[] words = answers[i].Split(' ', StringSplitOptions.RemoveEmptyEntries)
        .Select(w => w.ToLower().Trim()).ToArray();
    string[] userWords = userAnswers[i].Split(' ', StringSplitOptions.RemoveEmptyEntries)
        .Select(w => w.ToLower().Trim()).ToArray();
    string[] correctWords = words.Intersect(userWords);

    // do percentage calc using correctWords.Length / words.Length
} 
```

# parallel-processing - 哪些 NoSQL 产品支持并行查询处理？

> ID：10671301
> 
> 赞同：0
> 
> 时间：2012-05-20T06:34:03.350
> 
> 标签：parallel-processing, nosql, nosql-aggregation

我打算将 NoSQL 产品（特别是 Cassandra 或 Hbase）用于仓库应用程序。我没有发现关于哪种产品支持范围查询的并行查询处理（在单个盒子和集群上）的任何有用信息。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T22:03:27.860

看看 Apache Hive ..它可能是您的用例而不是 Hbase 或 Cassandra 的更好选择..它提供了完整的并行处理，因为 Hive 查询在后台转换为 MapReduce 作业，使我们能够实现高并行性..还有Hive 为我们提供了 Hadoop 集群顶部的数据仓库功能以及类似 SQL 的功能。如果您来自 SQL 背景，这可能会非常有帮助。您可以在单台机器上设置 Hadoop 并开始在其上使用 Hive .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T12:55:49.250

对于任何使用 MapReduce 框架的人。或者您可以使用 Hadoop 来实现，它是 MapReduce 技术的 Java 框架。

我建议 MongoDB

# javascript - 如何在 JavaScript 中操作 JSON 数据而不产生副作用？

> ID：10671302
> 
> 赞同：0
> 
> 时间：2012-05-20T06:34:12.850
> 
> 标签：javascript, json, functional-programming

考虑以下代码

```
var myData = {name: 'John'};

function fixName(data) {
    var newData = data;
    newData.name = 'Mike';
    return newData;
}

var myData2 = fixName(myData);
console.log(myData2.name);
console.log(myData.name); 
```

'Mike' 被打印了两次，因为在我的函数中，newData 和 myData 指向同一个东西。如何更改我的函数以使其对 myData 没有副作用？这意味着程序应该先打印“Mike”，然后再打印“John”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T06:39:26.790

您可能想[查看这个答案](https://stackoverflow.com/a/728694/575527)以了解有关“克隆”对象（这真的很复杂）的解释，或者采取简单的方法并使用J.Resig 自己提供的[jQuery 扩展](https://stackoverflow.com/a/122704/575527)，它在技术上将此克隆代码抽象为一个简单的句法

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T06:39:00.733

所以基本上你想创建一个对象的副本而不是获取一个引用？

[如果是这种情况，您可能会对这个问题](https://stackoverflow.com/questions/122102/what-is-the-most-efficient-way-to-clone-a-javascript-object)感兴趣，其中接受的答案使用一段简单的 jQuery 来完成。

如果像我一样，你不想使用 jQuery，你可以使用一个循环来获得一个基本的副本：

```
var myData2 = {};
for( var x in myData) if( myData.hasOwnProperty(x)) myData2[x] = myData[x];
// Copied! 
```

这对于任何仅用作关联数组的对象（就像您的数组和大多数 JSON 对象一样）实际上已经足够了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T06:39:33.420

您需要克隆该数据对象。

克隆对象的最佳方法是什么在[这里回答](https://stackoverflow.com/questions/122102/what-is-the-most-efficient-way-to-clone-a-javascript-object)

```
// jQuery
newData = $.extend({}, data); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-20T06:55:29.010

要克隆`myData`，您可以使用`JSON.parse(JSON.stringify(myData))`：

```
var myData = {name: 'John'};

function fixName(data) {
    var newData = data;
    newData.name = 'Mike';
    return newData;
}

var myData2 = fixName( JSON.parse(JSON.stringify(myData)) );
console.log(myData2.name); //=> Mike
console.log(myData.name);  //=> John 
```

顺便说一句，这也会克隆嵌套对象。

用它制作一个函数可能是一个想法：

```
function cloneObj(obj,reviver){
  return JSON.parse(JSON.stringify(obj),reviver);
} 
```

哪里`reviver`可以用来操作对象中的数据，在您的情况下，这将`fixName`过时。

```
var myData2 = cloneObj(myData, function(k,v){return k === 'name' ? 'Mike' : v;}); 
```

# php - 如何处理创建全新对象并从数据库中检索对象？PHP/MySQL 面向对象

> ID：10671314
> 
> 赞同：0
> 
> 时间：2012-05-20T06:36:34.140
> 
> 标签：php, database, oop

$object = new myClass($name);

如果我使用“new”在应用程序中创建一个新对象以保存到数据库，那么我使用什么方法从数据库中检索现有对象？

是否有处理真正的新对象与从数据库中获取现有对象的标准程序？

编辑：

拥有一个根据参数更改的构造函数会是一个坏主意吗？

IE

```
__construct($param) {
  if(is_numeric($param)) {
    // get existing data from DB
  } else {
    // set name for new object
    $this->name = $param;
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T06:44:56.147

通常你会想要一个 Collection 类来实例化你的新对象。

因为每条记录一个数据库查询是浪费的。

因此，您将拥有一个模拟数据库记录的类和一个模拟记录列表的类。

```
 class collection {
     protected $filters = array('ids' => array(), 'published' => true, 'name' => '');
     protected $records = array();
     public function __construct($filters) {
         // validate $filters content here
         $this->filters = array_merge($this->filters, $filters);
         $query = $this->generateQueryUsing($this->filters);
         $pdos = $pdo->query($query);

         foreach($pdos->fetch(PDO::FETCH_CLASS, 'Record', array(NULL, FALSE)) AS $item)
            $this->records[] = $item;

         foreach($pdos->fetch() AS $item)
            $this->records[] = new Record($item, FALSE); // Record::__construct($data, $is_new = TRUE)

     }
 } 
```

# jquery - jQuery 绑定到许多元素（打开）从特定元素取消绑定（关闭）

> ID：10671317
> 
> 赞同：4
> 
> 时间：2012-05-20T06:37:00.637
> 
> 标签：jquery

我的目标是绑定到页面上的许多元素（使用 on()），然后在单击特定元素后取消绑定（使用 off()）。

```
$(document).on({
    mouseenter: enter,
    mouseleave: leave,
    mousedown: down,
    mouseup: up,
    click: click
}, ".up_side .thumbsUp"); 
```

on() 函数运行良好，但我不知道如何使用 off() 解除与单击元素的绑定。

```
var click = function() {
    var thumbsUp = $(this);

    var successCallback = function(data) {
        // This is where I need to unbind the clicked element
        $(thumbsUp).off({
            mouseenter: enter, 
            mouseleave: leave
        });
    }

    $(this).castVote(direction, modelName, modelId, successCallback, errorCallback);
} 
```

谢谢！！！

* * *

## 解决方案

使用 .data() 存储标志并在执行代码之前检查标志。这似乎是一种解决方法，并使代码更脆弱。如果有人找到更好的方法，请回帖。谢谢！

```
 $(document).on({
    mouseenter: function(){
        if ($(this).data("submitted") != true)
        {
            $(this).css("cursor", "pointer");
            $(this).css("backgroundPosition", "-48px");
        }
    },
    mouseleave: function(){
        if ($(this).data("submitted") != true)
        {
            $(this).css("backgroundPosition", "0px");
        }
    },
    mousedown: function() {
        if ($(this).data("submitted") != true)
        {
            $(this).css("backgroundPosition", "-96px");
        }
    },
    mouseup: function() {
        if ($(this).data("submitted") != true)
        {
            $(this).css("backgroundPosition", "0px");
        }
    },
    click: function() {
        if ($(this).data("submitted") != true)
        {
            var thumbsUp = $(this);
            var ballotBox = $(thumbsUp).parent();
            var votingStation = $(ballotBox).parent();

            //ballotBox.hide(0, "", function() {
            var direction = $(thumbsUp).dataset("direction");
            var modelName = $(votingStation).dataset("modelName");
            var modelId = $(votingStation).dataset("modelId");

            var successCallback = function(data) {
                $(thumbsUp).css("backgroundPosition", "-144px");

                // Add flag to indicate successful vote 
                thumbsUp.data("submitted", true)

                $(this).vote_up_side('animateBallotBox', data, ballotBox, thumbsUp);
            }

            var errorCallback = function(XMLHttpRequest, textStatus, errorThrown) {
                $(this).vote_up_side('animateError', ballotBox);
            }

            $(this).castVote(direction, modelName, modelId, successCallback, errorCallback);
        }
    }
}, ".up_side .thumbsUp"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T07:04:34.017

[`.off()`文档](http://api.jquery.com/off/)说：

> **选择器**一个选择器，它应该与`.on()`附加事件处理程序时最初传递给的选择器相匹配。

和（我的重点）

> 要删除特定的委托事件处理程序，请提供选择器参数。选择器字符串必须与附加事件处理程序时传递给的字符串**完全匹配。**`.on()`

因此，AFAIK 不可能有*选择地*（没有双关语）从委托的事件处理程序中删除*一些元素。*

我认为您唯一的选择是将事件处理程序保留在适当的位置，但`.data()`使用您用来指示该特定元素是否已被单击的一些元素标记每个元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T06:57:07.617

你可以使用“.one()”吗？

来自文档：“要删除与 .on() 绑定的事件，请参阅 .off()。要附加仅运行一次然后自行删除的事件，请参阅 .one()。”

[http://api.jquery.com/one/](http://api.jquery.com/one/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T22:50:42.703

实际上，这没有任何意义。`off()`根据官方 jQuery 文档，在没有选择器的情况下调用时，所有指定的事件都将被删除。因此，无论原始绑定是直接绑定还是委托绑定 ，`$(".someElement").off("click")`都应该从 中取消绑定所有点击处理程序。**如果它不工作，那么 jQuery 有一个错误，你应该提交一个错误报告。**`".someElement"`

 **你这样做的方式`data()`肯定会奏效，但我个人认为这是不必要的混搭/破解。**

# c - 加入路径时的段错误

> ID：10671325
> 
> 赞同：1
> 
> 时间：2012-05-20T06:38:49.253
> 
> 标签：c, string, segmentation-fault, concatenation

我编写了这个函数来加入 C 中的两条路径；

```
void *xmalloc(size_t size)
{
    void *p = malloc(size);
    if (p == NULL) {
        perror("malloc");
        exit(EXIT_FAILURE);
    }
    return p;
}

char *joinpath(char *head, char *tail)
{
    size_t headlen = strlen(head);
    size_t taillen = strlen(tail);
    char *tmp1, *tmp2;

    char *fullpath = xmalloc(sizeof(char) * (headlen + taillen + 2));
    tmp1 = head;
    tmp2 = fullpath;
    while (tmp1 != NULL)
        *tmp2++ = *tmp1++;
    *tmp2++ = '/';
    tmp1 = tail;
    while (tmp1 != NULL);
        *tmp2++ = *tmp1++;
    return fullpath;
} 
```

但是我在第一个 while 循环中遇到了段错误，在`*tmp2++ = *tmp1++;`. 有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T06:44:08.317

`while (tmp1 != NULL)`是不正确的。
应该是`while (*tmp1 != '\0')`。
指针本身永远不会变为 NULL。正是它所指向的。

# ios - 在 AlertView 中单击“登录”按钮后，尝试转换到新的 UIView

> ID：10671327
> 
> 赞同：0
> 
> 时间：2012-05-20T06:38:52.913
> 
> 标签：ios, alertview

我已经搜索了允许我在单击警报视图上的按钮后转移到新页面的方法。我必须使用 prepareForSegue 方法吗？或者有没有更简单的方法？

```
-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex{

    if(buttonIndex ==0){
        //code goes here
    }

    if(buttonIndex ==1){
        NSString *username = [[alertView textFieldAtIndex:0] text];
        NSString *password = [[alertView textFieldAtIndex:1] text];
        NSLog(@"Username:%@",username);
        NSLog(@"Password:%@",password);

        //Check if username and password tally if tally move on to Menu page
        MainPageViewController *anotherController = [[MainPageViewController alloc] initWithNibName:@"AnotherView" bundle:nil];

        [self.navigationController pushViewController:anotherController animated:YES];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T06:47:53.340

您必须使用 alertview 委托方法 -`alertView:clickedButtonAtIndex:`知道单击了哪个按钮，您可以对其执行后续操作。

# android - 添加到Phonegap应用程序时修改了Zip文件？

> ID：10671336
> 
> 赞同：-1
> 
> 时间：2012-05-20T06:39:37.703
> 
> 标签：android, cordova, zip

我正在编写一个 Phonegap 应用程序，该应用程序在 /assets/www/ 文件夹中包含一个 zip 存档。当应用程序启动时，文件被复制到文件系统根目录。当我尝试读取标题时，文件似乎已被修改。

这是我电脑上的 hexdump：

```
# hexdump -C Archive.zip| more
00000000  50 4b 03 04 14 00 00 00  08 00 4c b7 b1 40 84 1d  |PK........L..@..|
00000010  9b 1a 21 00 00 00 a0 01  00 00 0a 00 1c 00 73 61  |..!...........sa| 
```

这是 /sdcard/ 中文件的 hexdump：

# hexdump -C Archive.zip| 更多的

```
00000000  50 4b 03 04 14 00 00 00  08 00 4c ef bf bd ef bf  |PK........L.....|
00000010  bd 40 ef bf bd 1d ef bf  bd 1a 21 00 00 00 ef bf  |.@........!.....|
00000020  bd 01 00 00 0a 00 1c 00  73 61 6d 70 6c 65 2e 74  |........sample.t| 
```

休斯顿！我们出现了问题！

那么，谁动了我的奶酪？发生了什么？由于 .apk 文件是压缩文件夹，因此将 zip 文件添加到 zip 文件中是否存在潜在的破坏性副作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T07:55:03.397

Android 使用特殊的 zip 对齐方式。这可能是你的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-07T17:55:03.083

您的应用程序将 zip 文件从（可能）Latin-1 转换为 UTF-8。

`ef bf bd`是用于替换字符的 UTF-8 代码。

# java - 从抽象类返回类型化列表变为非类型化/原始

> ID：10671347
> 
> 赞同：0
> 
> 时间：2012-05-20T06:41:55.303
> 
> 标签：java, list, generics, abstract-class

我在返回键入的列表时遇到了困难。出于某种原因，它作为原始列表返回，尽管我真的很想得到键入的列表。

它与类抽象有关。通过在类上添加/删除 abstract 关键字，我的 List 从 raw 变为 typed，反之亦然。似乎因为抽象而贬低了我的泛型？

```
public abstract class Notice<T> {
    public List<Contact> contacts;

    public List<Contact> getContacts()
    {
            return this.contacts;
    }
}

public class Contact {
}

public class Service {
    public Service(Notice notice) {
        // ! Would like to use List<Contact> here, as I defined in Notice !
        List contacts = notice.getContacts();       
    }
} 
```

我该如何解决这个问题，为什么会这样。我尝试了 Java 泛型常见问题解答等。

更新代码； **FacebookMes​​senger服务**

```
public class FacebookMessengerService extends MessengerService<FacebookNotice> {
    public void send(FacebookNotice notice)
    {
        //
        // ERROR occurs here:
        // "Type mismatch: cannot convert from element type Object to Contact"
        //
        // Also, hovering over it tells me to be just a rawtyped List instead of List<Contact>
        //

        for (Contact contact : notice.getContacts())
        {
            // ..
        }       
    }
} 
```

**信使服务**

```
public abstract class MessengerService<T extends Notice> implements IMessengerService<T> {
} 
```

**信使服务**

```
public interface IMessengerService<T extends Notice> {
    public void send(T notice);
} 
```

**Facebook活动邀请通知**

```
public class FacebookEventInvitationNotice extends FacebookNotice<EventInvitation> {    
    public FacebookEventInvitationNotice(EventInvitation trigger) {
        super(trigger);
    }
} 
```

**Facebook通知**

```
public abstract class FacebookNotice<T extends Trigger> extends Notice<T> {
    public static FacebookMessengerService service = new FacebookMessengerService();

    public FacebookNotice(T trigger) {
        super(trigger);
    }

    public void send()
    {
        service.send(this);
    }
} 
```

**注意**

```
public abstract class Notice<T extends Trigger> implements INotice<T> 
{
    public List<Contact> contacts = new ArrayList<Contact>();
    public T trigger;

    public Notice(T trigger)
    {
        this.trigger = trigger;
    }

    public void addContact(Contact contact)
    {
        this.contacts.add(contact);
    }

    public List<Contact> getContacts()
    {
        return this.contacts;
    }
} 
```

**我注意到**

```
public interface INotice<T extends Trigger> {
    public void send();
} 
```

**活动邀请**

```
public class EventInvitation extends Trigger {
    private Event event;

    public EventInvitation(Event event)
    {
        this.event = event;
    }

    public Event getEvent()
    {
        return this.event;
    }

} 
```

**扳机**

```
public class Trigger {
    public List<Notice> notices = new ArrayList<Notice>();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T06:44:12.840

您需要完全通用：

```
public class Service {
    public Service(Notice<?> notice) {
        List<Contact> contacts = notice.getContacts();       
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T08:31:22.653

通过按照建议更改我的代码：

```
public class FacebookMessengerService extends MessengerService<FacebookNotice<?>> {
    public void send(FacebookNotice<?> notice)
    {
        for (Contact contact : notice.getContacts())
        {

        }       
    }
} 
```

我的问题似乎解决了！不过，我看不出有什么区别，`FacebookNotice`并且`FacebookNotice<?>`可能会迫使我`List<Contact>`成为原始类型列表？

# asp.net - 无法托管 WCF 服务

> ID：10671360
> 
> 赞同：0
> 
> 时间：2012-05-20T06:43:49.877
> 
> 标签：asp.net, wcf, c#-4.0

我创建了网站以在运行时托管 Web 服务引发运行时错误

> 在服务“Try”实施的合同列表中找不到合同名称“ITry”。

我的 WCF 服务接口和类看起来像这样

```
namespace test1
{
   [ServiceContract]
   public interface ITry
   {
        [OperationContract]
        [WebInvoke(Method = "GET",
         ResponseFormat = WebMessageFormat.Json,
         UriTemplate = "data/{username}/{password}")]
        string Login(string username, string password);
    }
} 
```

服务实现：

```
namespace test1
{
    public class Try : ITry
    {
        public string Login(string username, string password)
        {
            using (var instance = new FacultySystemEntities1())
            {
                var user = instance.Users.Where(u => u.UserName == username && u.UserPassword == password).FirstOrDefault();

                if (user != null)
                    return "true";
                else
                    return "false";
            }
        }
    }
} 
```

和网站，web.config 看起来像

```
<configuration>
  <system.web>
    <compilation debug="true" targetFramework="4.0"/>
  </system.web>
  <system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <serviceMetadata httpGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true"/>
    <services>
      <service name="test1.Try">
        <endpoint address="http://localhost:8732/Try" binding="webHttpBinding" contract="ITry"/>
      </service>
    </services>
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>
</configuration> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T06:58:03.537

将 web.config 中的合同属性从“ITry”更新为“test1.ITry”。

```
<services> 
  <service name="test1.Try"> 
    <endpoint address="http://localhost:8732/Try" binding="webHttpBinding" contract="test1.ITry"/> 
  </service> 
</services> 
```

# java - 我的服务没有启动

> ID：10671364
> 
> 赞同：0
> 
> 时间：2012-05-20T06:43:58.957
> 
> 标签：java, android, android-service

我正在尝试在后台启动服务。当用户选中复选框时，它应该启动服务并显示 MyService 类中的 Toast。但是在开始服务后我没有得到那个吐司。我在下面的代码中做错了什么？

我的主要活动

```
public class SampleServiceActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    final CheckBox cb = (CheckBox) findViewById(R.id.checkBox1);

    cb.setOnCheckedChangeListener(new OnCheckedChangeListener(){
        public void onCheckedChanged(CompoundButton buttonView,
                boolean isChecked) {

            if(isChecked) {
                Toast.makeText(getBaseContext(), "Checked", Toast.LENGTH_LONG).show();
                startService(new Intent(getBaseContext(), MyService.class));
            } else {
                Toast.makeText(getBaseContext(), "Unchecked", Toast.LENGTH_LONG).show();
                stopService(new Intent(getBaseContext(), MyService.class));
            }
        }

    });
}
} 
```

我的服务等级

```
public class MyService extends Service {

@Override
public IBinder onBind(Intent arg0) {
    // TODO Auto-generated method stub
    return null;
}

public int onStartCommand(Intent intent, int flags, int startId) {
    Toast.makeText(this, "Service Started", Toast.LENGTH_LONG).show();
    return START_STICKY;
}

//method to stop service
public void onDestroy() {
    super.onDestroy();
    Toast.makeText(this, "Service Stopped", Toast.LENGTH_LONG).show();
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T07:00:30.150

可能是您没有在 manifest.so 中注册您的 MyService 服务，因此请注册为：

```
<?xml version="1.0" encoding="utf-8" ?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.xxx.xxx" android:versionCode="1"
    android:versionName="1.0">

    <application android:icon="@drawable/xxx" android:label="@string/app_name" >

        <activity> ... </activity>

        <service  android:name=".MyService " />

    </application>
</manifest> 
```

# php - 区分大小写的查询

> ID：10671368
> 
> 赞同：2
> 
> 时间：2012-05-20T06:44:47.147
> 
> 标签：php, mysql

我可以使用表单中的以下代码获取用户输入的名称（用户名）。所以我的问题是，如果我输入`Shibbirbd`（第一个字母是大写字母，但它`shibbirbd`在我的数据库中），那么它会成功进入用户登录面板！但这是错误的。为什么会这样？Mysql 数据库用户名是：`shibbirbd`.

登录表单脚本：

```
$uname = mysql_real_escape_string(htmlspecialchars(trim($_POST['uname'])));
$pass = mysql_real_escape_string(htmlspecialchars(trim($_POST['pass']))); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T06:47:48.643

您可以将您的`WHERE`子句更改为`WHERE BINARY`( `WHERE BINARY uname = '$uname'`) 以测试用户名的二进制值是否相等。

如果您希望此表上的所有查询都区分大小写，则应考虑更改排序规则，如[@Kolink 建议](https://stackoverflow.com/a/10671382/54680)的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T06:47:15.377

您是说如果您在应该有小写字母的地方使用大写字母，您希望它不会让您登录吗？

在这种情况下，将表的排序规则更改为区分大小写的内容，例如`utf8_bin`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T06:47:33.570

在大多数情况下，字符串是不区分大小写的。为什么用户名区分大小写很重要？

在 MySQL 中，您可以使用编码 _ci 看到它，这意味着不区分大小写。如果需要，请尝试一些 _bin 或 _cs 甲酸盐。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-20T06:48:03.070

听起来列排序规则不区分大小写，这是默认设置。尝试将其更改为区分大小写的排序规则，例如 latin_general_cs

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-20T06:50:04.207

用于`COLLATE`区分大小写。您可以在此链接中看到示例。
[http://dev.mysql.com/doc/refman/5.0/en/case-sensitive.html](http://dev.mysql.com/doc/refman/5.0/en/case-sensitivity.html)

# ios - 如何检索月份的最后日期给月份作为iphone中的参数

> ID：10671372
> 
> 赞同：1
> 
> 时间：2012-05-20T06:45:40.967
> 
> 标签：ios, date, monthcalendar

我想在 iphone 应用程序中检索给定月份的最后日期。谁能告诉我如何实现这一目标？我在 stackoverflow 上看到了一些解决方案，但他们只是给出了一个月的最后一天。

谢谢。

更新：

```
 +(NSString*)getLastDateOfMonth:(NSString *)monthYearString {

    //NSString *inputDate = [NSString stringWithFormat:@"%@ %@",@"01",monthYearString];
    NSString *inputDate = [NSString stringWithFormat:@"%@ %@",@"01",@"May 2012"];
    NSLog(@"Input date:- %@",inputDate);

    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc]init];
    [dateFormatter setDateFormat:@"dd MMM yyyy"];
    NSDate *date = [dateFormatter dateFromString:inputDate];

    NSCalendar *gregCalendar=[[[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar] autorelease];

    NSDateComponents *components=[gregCalendar components:NSMonthCalendarUnit|NSYearCalendarUnit fromDate:date];
    NSInteger month=[components month];
    NSInteger year=[components year];

    if (month==12) {
        [components setYear:year+1];
        [components setMonth:1];
    }
    else {
        [components setMonth:month+1];
    }
    [components setDay:1];

    NSDate *lastDate = [[gregCalendar dateFromComponents:components] dateByAddingTimeInterval:0];

    NSDateFormatter *outputFormatter = [[NSDateFormatter alloc]init];
    [outputFormatter setDateFormat:@"MM/dd/yyyy"];
    NSString *lastDateOfMonth = [outputFormatter stringFromDate:lastDate];

    return lastDateOfMonth;

} 
```

如果我使用此代码，它会在控制台中显示错误的输出，如下所示

```
 Input date:- 01 May 2012
LAst DAte in Month:- 06/01/2012 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T06:59:04.403

您可以使用此功能来做到这一点：-

```
 NSDate currDate=[NSDate date];

NSDate *getLastDateMonth(NSDate *currDate)
{

    NSCalendar *gregCalendar=[[[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar] autorelease];

    NSDateComponents *components=[gregCalendar components:NSMonthCalendarUnit|NSYearCalendarUnit fromDate:currDate];
    NSInteger month=[components month];
    NSInteger year=[components year];

    if (month==12) {
        [components setYear:year+1];
        [components setMonth:1];
    }
    else {
        [components setMonth:month+1];
    }
    [components setDay:1];

    return [[gregCalendar dateFromComponents:components] dateByAddingTimeInterval:0];
    } 
```

# javascript - jquery 插件 - 工作，但在调试时，甚至在到达该行之前就显示了结果

> ID：10671375
> 
> 赞同：0
> 
> 时间：2012-05-20T06:46:01.240
> 
> 标签：javascript, jquery-plugins, coffeescript

我的 jquery 插件咖啡脚本：

```
(($) ->

  $.fn.externalify = (options) ->

    console.log "start"
    console.log @    
    settings = $.extend {
      'rel' : 'external' 
    } , options 

    links = $ @selector+" a"
    console.log "---first links--"
    console.log links
    console.log '---first links--'
    if links.length is 0
      if ((@[0].toString().indexOf("http://") is 0) or (@[0].toString().indexOf("https://") is 0))
        unless @[0].host is  window.location.host

        $(@).attr settings
    console.log "---links---"
    console.log links
    console.log '----links---'      
    for i in links
      if (i.toString().indexOf("http://") is 0)or(i.toString().indexOf("https://") is 0)
        console.log "--"
        console.log i
        console.log "--"
        unless i is window.location.host
           console.log "Before : "
           console.log $(i)
           $(i).attr settings
           console.log "After : "
           console.log $(i)

) jQuery 
```

javascript中的代码：

```
 (function() {

(function($) {
  return $.fn.externalify = function(options) {
  var i, links, settings, _i, _len, _results;
  console.log("start");
  console.log(this);
  settings = $.extend({
    'rel': 'external'
  }, options);
  links = $(this.selector + " a");
  console.log("---first links--");
  console.log(links);
  console.log('---first links--');
  if (links.length === 0) {
    if ((this[0].toString().indexOf("http://") === 0) || (this[0].toString().indexOf("https://") === 0)) {
      if (this[0].host !== window.location.host) $(this).attr(settings);
    }
  }
  console.log("---links---");
  console.log(links);
  console.log('----links---');
  _results = [];
  for (_i = 0, _len = links.length; _i < _len; _i++) {
    i = links[_i];
    if ((i.toString().indexOf("http://") === 0) || (i.toString().indexOf("https://") === 0)) {
      console.log("--");
      console.log(i);
      console.log("--");
      if (i !== window.location.host) {
        console.log("Before : ");
        console.log($(i));
        $(i).attr(settings);
        console.log("After : ");
        _results.push(console.log($(i)));
      } else {
        _results.push(void 0);
      }
    } else {
      _results.push(void 0);
    }
  }
  return _results;
};
})(jQuery);

}).call(this); 
```

如果有类似的链接

```
<span><a href="http://google.com">google</a></span> in body tag . 
```

如果我运行 $("span").externalify() ，那么属性 "rel" : "external" 将被添加到链接中，从而使链接为：

```
<span><a rel="external" href = "http://google.com">google</a></span> 
```

它工作正常，但如果你看到我的代码，我已经放了很多 console.log 命令。他们都在打印带有“rel”：“external”的新的，在操作之前和之后，它都在显示属性，怎么会发生这种情况。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T10:30:39.427

这是一大堆代码，本质上是这样的：

```
$('a').filter(->
    /^http/.test(this.href) and this.href.indexOf(location.host) < 0
).attr(rel: 'external') 
```

您可以考虑为外部链接实现自定义伪选择器，而不是插件：

```
$.expr[':']['external'] = (elem) ->
    /^(\w+:)?\/\//.test(elem.href) and elem.href.indexOf(location.host) < 0

// usage:
$('.container a:external').attr('rel', 'external') 
```

请注意，我用更复杂的正则表达式替换了简单的“http”测试；省略协议的 url`//google.com`是允许的，并且越来越普遍。仅`//`在开头存在就足以检测绝对 url。这也捕获了除 http 之外的任何其他协议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T07:10:05.427

当您可以*简化*时，为什么要*混淆*？看看我在这里创建的代码：http: [//jsfiddle.net/aajFj/](http://jsfiddle.net/aajFj/)它工作得很好......希望它有所帮助。

# javascript - .js 文件在没有 respond_to 的情况下被调用

> ID：10671376
> 
> 赞同：1
> 
> 时间：2012-05-20T06:46:05.023
> 
> 标签：javascript, ruby-on-rails, ajax, ruby-on-rails-3

我有一个评级控制器，其创建操作通过 Javascript 调用。我的评级文件夹中有一个 create.js 文件。我认为为了调用 create.js 文件，您需要这样的东西

```
respond_to do |format|
    format.js
end 
```

但是，当我删除它时，仍然会调用 create.js 文件。这是因为 create.js 在 create 操作中被调用（即方法的名称和 .js 文件匹配）吗？谢谢！

更新：当 format.js 丢失时，它无法找到 DOM 的元素。例如，如果我有类似的东西

```
$('#id_3').html('<%=escape_javascript render(:partial => 'show') %>'); 
```

正如我在终端中看到的那样，部分“显示”被执行，但它找不到 div“id_3”，因此部分永远不会出现在 DOM 中。任何澄清将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T16:58:35.787

轨道魔法！如果指向您的资源的链接类似于 /dogs/1.js，那么 respond_to 会按照您的想象处理它。尝试调用 /dogs/1 看看会发生什么。还有效吗？现在尝试在 format.js 之前添加 format.html。这应该让您对 respond_to 的工作原理有一个很好的了解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-04T16:48:48.093

这就是 Rails 的工作方式：它呈现与操作同名的视图。

如果您有多个具有相同名称（不同格式）的视图，则必须在请求中指定您想要的视图并使用该`respond_to`方法进行相应的响应：

```
def index
  respond_to do |format|
    format.js { ... }
    format.html { ... }
    ...
  end
end 
```

`GET /index.html`将呈现 index.html.erb 文件（假设您使用的是 ERB）

`GET /index.js`将呈现 index.js.erb 文件

# actionscript-3 - MovieClip load on run time Security control. AS3/Flash/Flex

> ID：10671383
> 
> 赞同：1
> 
> 时间：2012-05-20T06:47:26.943
> 
> 标签：actionscript-3, flash, security, movieclip, abuse

I am building application in Flash Builder 4.6.

I allow other users to upload and run they own MovieClips inside my app(movie clips loaded by my app). I provide them with an interface to access my app futures.

I am concerned about abusing, so I wish to protect my self from the next scenarios:

*   Browser activities such as redirects or opening links. (Pay attention that they can plant java script code using [ExternalInterface](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/external/ExternalInterface.html).)
*   Crunching the browser by ruining infinite loops:

> while(true){ ;// kill browser }

*   Asking the user for unlimited storage permission and feel it with garbage.

Is it possible to protect my app from all that?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T10:29:44.777

I don`t think what you want is completly possible.

*   Are you loading all the clips in your application domain or a
    seperated one? This is the first thing I would change. Even if you
    give the extended clip an interface, if it is loaded in the main
    application domain, it has access to everything. We devoloped a bridge to communicate with external clips without the need to implement them in our application domain. Each clip needs to be extending a specific baseclass. The whole communication works with events and the prevent default method.

*   ExternalInterface calls and navigateToURL with javascript access urls should be permitted if you have set the allowScriptAccess to samedomain only. If you have an interface for calling urls, validate the urls before you navigate to them.

*   For the last two items i have no answer or simply no it is not possible.

The whole cross site scripting topic is huge. And when you done some facebook app development you know how difficult it is to meantaine security and usibility for the developers.

# android - 手动预编译xml布局文件并使用

> ID：10671391
> 
> 赞同：7
> 
> 时间：2012-05-20T06:48:51.413
> 
> 标签：android

是否可以手动预编译布局文件，将其放入 jar 中并使用它？如果可能的话怎么办？

我来解释一下：使用apk打包时，构建过程会预编译xml资源，用于运行时优化。假设，例如，我想从服务器加载 xml 文件，并将它们加载到 ui。我需要预编译它们，我更喜欢在服务器端使用 android sdk 进行编译。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-31T08:51:18.383

**尝试这个：**

1.  将您的 xml 文件放入您的资源文件夹（例如放入 res/xml）
2.  运行你的项目
3.  转到项目的 bin 文件夹
4.  打开 youapplication.apk 作为 zip-archive
5.  转到存档的 res/xml 文件夹
6.  从该文件夹中提取已编译的 xml
7.  使用提取的 xml 作为您编译的 xml 文件

# javascript - 在 firefoxaddonsdk 中使用第三方 api

> ID：10671393
> 
> 赞同：1
> 
> 时间：2012-05-20T06:49:34.303
> 
> 标签：javascript, firefox, firefox-addon-sdk

我正在尝试在我的扩展中使用 ericvold 的工具栏按钮模块。当我使用 Add-on Builder 在线尝试时，它工作正常。但是当我在我的计算机上使用附加 SDK 执行此操作时，它似乎有一些问题，并且似乎没有添加任何地方。

我遵循的步骤是：

*   [从github](https://github.com/erikvold/toolbarbutton-jplib)以 zip 格式下载工具栏。

*   解压缩并将其添加到我在附加 SDK 中的包中，然后运行`cfx docs`​​.

*   `index.html`将（第三方 API）中列出的文档复制到`main.js`.

*   `packages.json`在我的（vold utils 也已下载并添加）中添加依赖项。

它仍然没有向我显示工具栏。

我的代码是这样的：

```
exports.main = function(options) {
  // create toolbarbutton
  var tbb = require("toolbarbutton").ToolbarButton({
    id: "TBB-TEST",
    label: "TBB TEST",
    onCommand: function () {
      tbb.destroy();
    }
  });

  if (options.loadReason == "install") {
    tbb.moveTo({
      toolbarID: "nav-bar",
      forceMove: false // only move from palette
    });
  }
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T20:33:34.403

这是您可以查看的 github 存储库：

[https://github.com/canuckistani/toolbar-template](https://github.com/canuckistani/toolbar-template)

这是一个基本的附加组件，它具有指向 Erik Vold 的工具栏和实用程序库的 git 子模块，并实现了一个非常简单的工具栏按钮。

```
const data = require("self").data;
const tabs = require("tabs");

exports.main = function(options) {

    var btn = require("toolbarbutton").ToolbarButton({
        id: 'my-toolbar-button',
        label: 'Add skull!',
        image: data.url('favicon.png'),
        onCommand: function() {
            if (typeof(tabs.activeTab._worker) == 'undefined') {
                let worker = tabs.activeTab.attach({
                    contentScript: 'self.port.on("sayhello", function() { alert("Hello world!"); })'
                });
                tabs.activeTab._worker = worker;
            }
            tabs.activeTab._worker.port.emit("sayhello");
        }
    });

    if (options.loadReason === "install") {
        btn.moveTo({
          toolbarID: "nav-bar",
          forceMove: false // only move from palette
        });
  }
}; 
```

要查看它是如何工作的，只需安装 xpi 文件：

[https://github.com/canuckistani/toolbar-template/raw/master/toolbar.xpi](https://github.com/canuckistani/toolbar-template/raw/master/toolbar.xpi)

注意：此示例适用于 SDK 版本 1.7，由于 export.main() 的更改，它可能不适用于 SDK 主分支。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T01:54:36.300

更改`D:\addon-sdk-1.6.1\packages\erikvold-toolbarbutton-jplib-46e51ab\lib\toolbarbutton.js`为`D:\addon-sdk-1.6.1\packages\toolbarbutton\lib\toolbarbutton.js`

# entity-framework - 如何跳过 Code First 数据库更新中的某些字段？

> ID：10671397
> 
> 赞同：2
> 
> 时间：2012-05-20T06:50:02.950
> 
> 标签：entity-framework, ef-code-first

例如，我的所有实体类都有一个“CreateDate”属性，使用的是 EF 4.3 Code First。我想防止对该字段的任何更改发送到数据库，除非是在首次创建对象时。

现在我可以将此属性设为只读，但我使用的是 MVC4 前端，这需要在 HTTP POST 操作期间实例化一个新对象并将其绑定到传入的属性值。然后我可以读取原始对象并根据它设置值，这不太有效，或者将值存储在不太安全的隐藏字段中。

当我的 DbContext 保存更改时，我希望简单地禁止对此字段的任何更新。我可以这样做吗？如何？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T07:13:58.100

我会为实体使用标记接口，`CreateDate`然后我会在设置或重置值`DbContext.SaveChanges`的帮助下覆盖然后。`ChangeTracker``CreatedAt`

也许这听起来很复杂，但我创建了一个小示例，您可以从中开始：

```
public interface ICreatedAt
{
    DateTime CreatedAt { get; set; }
}

public class MyEntity : ICreatedAt
{
    public int Id { get; set; }

    public DateTime CreatedAt { get; set; }
}

public class MyContext : DbContext
{
    public DbSet<MyEntity> MyEntities { get; set; }

    public override int SaveChanges()
    {
        foreach (var entry in ChangeTracker.Entries<ICreatedAt>())
        {
            if (entry.State == System.Data.EntityState.Added)
            {
                entry.Entity.CreatedAt = DateTime.Now;
            }
            if (entry.State == System.Data.EntityState.Modified)
            {
                entry.Entity.CreatedAt = 
                    entry.OriginalValues.GetValue<DateTime>("CreatedAt");
            }
        }
        return base.SaveChanges();
    }
} 
```

# visual-studio-2010 - Visual Studio：使用解决方案或目录根范围设置程序集属性的宏

> ID：10671400
> 
> 赞同：0
> 
> 时间：2012-05-20T06:50:26.133
> 
> 标签：visual-studio-2010, visual-studio-macros

我想要一个用于 Visual Studio 的宏来设置程序集属性。有没有为此的代码模板？在 VS 内还是在互联网上？我正在寻找设置公司名称，商标等。

**更新：**

好的，这就是我刚刚用 C# 编写/破解的内容。我以为可能有一个片段。

```
 class Program
{
    /// <summary>
    /// 
    /// </summary>
    /// <param name="args"></param>
    static void Main(string[] args)
    {
        string rootDir = args[0];
        string qualifyingFileName = args[1];
        string disqualifyingPathNamePart = args[2];
        string assAttrib = args[3];
        string assAttribReplace = args[4];
        bool removeComments = bool.Parse(args[5]);
        bool removeEmptyLines = bool.Parse(args[6]);
        bool IsCSharp = false;

        IEnumerable<string> assFiles = Directory.EnumerateFiles(rootDir, qualifyingFileName, SearchOption.AllDirectories);
        foreach (string ass in assFiles)
        {
            try
            {
                if (ass.Contains(disqualifyingPathNamePart)) { continue; }
                IsCSharp = ass.EndsWith(".cs");
                List<string> assFileLines = new List<string>();
                assFileLines.AddRange(File.ReadAllLines(ass));

                for (int i = assFileLines.Count - 1; i >= 0; i--)
                {
                    if (assFileLines[i].Trim().StartsWith(IsCSharp ? "using" : "Imports")) { assFileLines.RemoveAt(i); continue; }
                    if (assFileLines[i].Trim().StartsWith("Option")) { assFileLines.RemoveAt(i); continue; }

                    if ((removeComments) && (assFileLines[i].Trim().StartsWith(IsCSharp ? "//" : "'"))) { assFileLines.RemoveAt(i); continue; }
                    if ((removeEmptyLines) && (assFileLines[i].Trim().Length == 0)) { 
                        assFileLines.RemoveAt(i); continue;
                    }
                    if (!assFileLines[i].Contains(assAttrib)) { continue; }
                    assFileLines[i] = assAttribReplace;
                }

                if (IsCSharp)
                {
                    assFileLines.Insert(0, "using System;");
                    assFileLines.Insert(1, "using System.Resources;");
                    assFileLines.Insert(2, "using System.Reflection;" );
                    assFileLines.Insert(3, "using System.Runtime.InteropServices;");
                    assFileLines.Insert(4, "");
                }
                else
                {
                    assFileLines.Insert(0, "Option Strict On");
                    assFileLines.Insert(1, "Option Explicit On");
                    assFileLines.Insert(2, "");
                    assFileLines.Insert(3, "Imports System");
                    assFileLines.Insert(4, "Imports System.Resources");
                    assFileLines.Insert(5, "Imports System.Reflection");
                    assFileLines.Insert(6, "Imports System.Runtime.InteropServices");
                    assFileLines.Insert(7, "");
                }
                File.WriteAllLines(ass, assFileLines);
            }
            catch { }
        }
        Console.WriteLine("Finito");
        Console.ReadLine();
    }
} 
```

用法：一个包含以下语句的批处理文件：

> ```
> > macros.exe D:\Devzone AssemblyInfo.cs 3PL AssemblyCompany
> > "[assembly: AssemblyCompany(\"Your company name\")]" true true
> > 
> > macros.exe D:\Devzone AssemblyInfo.cs 3PL AssemblyCopyright
> > "<Assembly: AssemblyCopyright(\"Copyright © 2003-2013\. Your company
> > name. All Rights Reserved.\")>" true true
> > 
> > macros.exe D:\Devzone AssemblyInfo.vb 3PL AssemblyCopyright
> > "<Assembly: AssemblyCopyright(\"Copyright © 2003-2013\. Your company
> > name. All Rights Reserved.\")>" true true 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T06:55:57.543

您为什么不使用 assemblyinfo 文件并定义其属性的任何原因？

[http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.applicationservices.assemblyinfo.aspx](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.applicationservices.assemblyinfo.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T06:57:58.427

这是一篇关于创建自己的模板的旧帖子。

[http://devrants.blog.com/2006/09/19/visual-studio-template-beyond-the-basics/](http://devrants.blog.com/2006/09/19/visual-studio-template-beyond-the-basics/)

模板是包含以下内容的 zip 文件：

```
.vstemplate

one or more custom files. 
```

通过自定义这些，您可以节省大量的剪切和粘贴时间和精力。

此模板参数页面不完整。

$safeitemrootname$ = 这似乎是用户在对话框中输入的名称。

如果您将其与此处定义的多项目模板结合使用。这允许您使用提供的名称作为类的根。例如，您可以有一个模板，其名称为 Entity.cs，它创建以下文件：

```
EntityModel.cs
IEntityModel.cs
IEntityView.cs
IEntityController.cs
EntityController.cs 
```

$fileinputname$ = 这也适用于模板

$XmlConvert_itemname$ = 这是做什么的？我认为这是一个向导填充的项目。

尽管有文档，但 WizardExtension 似乎也可以在项目模板中工作。

# java - `telephonyService.answerRingingCall();` 方法调用的错误“telephonyService 无法解析”

> ID：10671402
> 
> 赞同：1
> 
> 时间：2012-05-20T06:51:17.843
> 
> 标签：java, android, reflection

我正在尝试创建一个应用程序，该应用程序将在选中复选框时自动接听电话。我已将 ITelephony.aidl 添加到 com.android.internal.telephony 并关注网络上的信息，但我似乎无法继续，它不会让我使用该`answerRingingCall();`方法。错误我得到“无法解决电话服务”`telephonyService.answerRingingCall();`

有什么建议么？

```
import android.app.Activity;
import android.os.Bundle;
import android.widget.CheckBox;
import android.widget.CompoundButton;
import android.widget.CompoundButton.OnCheckedChangeListener;
import android.widget.Toast;
import com.android.internal.telephony.ITelephony;

public class AnswerActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        CheckBox AnswerCheckBox = (CheckBox) findViewById(R.id.answerCheck); 

        AnswerCheckBox.setOnCheckedChangeListener(new OnCheckedChangeListener() {

            public void onCheckedChanged(CompoundButton buttonView, 
            boolean isChecked) { 
            // TODO Auto-generated method stub 
            if (buttonView.isChecked()) { 

                telephonyService.answerRingingCall();

            Toast.makeText(getBaseContext(), "Calls will be answered", 
            Toast.LENGTH_SHORT).show(); 
            } 
            else 
            { 
            Toast.makeText(getBaseContext(), "Calls will NOT be answered", 
            Toast.LENGTH_SHORT).show(); 
            } 

            } 
            }); 

            } 

            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T07:00:57.847

你应该调用`telephonyService.answerRingingCall();`方法`PhoneStateListener`

```
 // Create a new PhoneStateListener
  listener = new PhoneStateListener() {
      @Override
      public void onCallStateChanged(int state, String incomingNumber) {

        switch (state) {
        case TelephonyManager.CALL_STATE_IDLE:

          break;
        case TelephonyManager.CALL_STATE_OFFHOOK:

          break;
        case TelephonyManager.CALL_STATE_RINGING:
          // Ringing.. answer now
          telephonyService.answerRingingCall();
          break;
        }
   } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-15T07:35:37.373

尝试查看`answerPhoneAidl`以下链接的方法： [https ://code.google.com/p/auto-answer/source/browse/trunk/src/com/everysoft/autoanswer/AutoAnswerIntentService.java](https://code.google.com/p/auto-answer/source/browse/trunk/src/com/everysoft/autoanswer/AutoAnswerIntentService.java)

# objective-c - 在 obj-c 项目中初始化动态 2d c 数组时遇到问题

> ID：10671404
> 
> 赞同：0
> 
> 时间：2012-05-20T06:51:49.403
> 
> 标签：objective-c, arrays, 2d, malloc

这是一个 iOS 项目。我正在修改我的 dataController 的一部分以使用 2D C 数组而不是嵌套的 NSMutableArrays 来优化速度。我发现我需要对数组的各个部分执行数千个整数加法运算，并且对象模型相当慢。

我的数组维度目前是 710 x 55，710 数字是动态的。我还有 5 个其他相同大小的数组，将来可能会更多，因此我需要避免使用 NSArrays。

我不会发布整个源代码，所以只发布相关部分：

```
@implementation MMEventDataController

int **wbOcMatrix = NULL;
int numEvents = 0;

-(void)generateMatrix {

for (NSDictionary *item in JSONData) {

{...}
// Here I parse some JSON data and bring part of it into newEvents.wb which is an
// NSMutableArray of ints. These can be ints 1 thru 55, which represent various
// flags that can be set. Only 5 flags will be inside each newEvent.wb. 
{...}

// Create some empty C arrays. This part is probably where I go wrong.

    wbOcMatrix = (int **) realloc (wbOcMatrix, (numEvents+1) * sizeof(int *));

    wbOcMatrix[numEvents] = malloc (55 * sizeof(int));

    int wbOcArray[] = {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0};

// Here we find which 5 flags are set in newEvent.wb and set the corresponding index of
// wbOcArray to 1.

    for (id object in newEvent.wb) {

        int v = wbOcArray[[object intValue]-1];
        v++;
        wbOcArray[[object intValue] -1] = v;
        }

// Then we bring the new wbOcArray into the next index of the wbOcMatrix and increment.

    wbOcMatrix[numEvents] = wbOcArray;
    numEvents++;

}

// This process repeats for all items in the JSON data, at the moment is 710, thus
// creating an array 710 x 55. 
```

二维数组似乎创建得很好，这意味着我有适当大小的数组，其中包含数据，但是，数组的每一行都包含相同的数据！该数据来自迭代 710。

我的怀疑是，由于我的数组是一个指针数组，每次迭代都会改变原始指针处的数据，并且所有行都指向同一个地方。那么如何为每次迭代分配新的内存空间呢？我以为这就是 malloc 的用途...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T11:03:59.170

你的问题在这里：

```
int wbOcArray[] = {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}; 
```

当循环结束时，这将自动释放。如果你`NSLog(@"%p", wbOcArray);`直接在上面的行之后放一个，你会看到，它总是指向同一个地址。

将此行替换为：

```
int* wbOcArray = (int*)malloc(sizeof(int)*55);
for(int i = 0; i < 55; i++) wbOcArray[i] = 0; 
```

最好的，克里斯蒂安

# c++ - 成员模板的 C++ 混淆属性名称

> ID：10671406
> 
> 赞同：20
> 
> 时间：2012-05-20T06:52:53.170
> 
> 标签：c++, templates

我发现当`v.foo`从模板类型 () 的变量访问非模板属性 () 时`T& v`，如果存在同名的模板函数 ()，C++ 可能会被欺骗认为它是成员模板`template class <T> void foo()`。如何从 C++ 规范中解释这一点？考虑这个简单的程序：

```
#include <cassert>

/** Determine whether the 'foo' attribute of an object is negative. */
template <class T>
bool foo_negative(T& v)
{
    return v.foo < 0;
}

struct X
{
    int foo;
};

int main()
{
    X x;
    x.foo = 5;
    assert(!foo_negative(x));
    return 0;
} 
```

我们有一个模板函数`foo_negative`，它接受任何类型的对象并确定其 foo 属性是否为负。该函数使用 [T = X] 进行`main`实例化。`foo_negative`该程序编译并运行，没有任何输出。

现在，将此函数添加到程序的顶部：

```
template <class T>
void foo()
{
} 
```

用 G++ 4.6.3 编译它会导致这个编译器错误：

```
funcs.cpp: In function ‘bool foo_negative(T&)’:
funcs.cpp:13:14: error: parse error in template argument list
funcs.cpp: In function ‘bool foo_negative(T&) [with T = X]’:
funcs.cpp:25:5:   instantiated from here
funcs.cpp:13:14: error: ‘foo’ is not a member template function 
```

（其中第 13 行是`return v.foo < 0`第 25 行`assert(!foo_negative(x))`。）

Clang 会产生类似的错误。

笏？添加一个从未调用过的不相关函数如何将语法错误引入有效程序？解析`foo_negative`时，编译器不知道 的类型`v`，更重要的是，它不知道`v.foo`是成员模板还是常规成员。显然，它必须在解析时（在模板实例化之前）决定是将其视为成员模板还是普通成员。

如果它认为`v.foo`是成员模板，`< 0`则被视为作为`0`模板参数传递，并且缺少`>`，因此出现语法错误。然后，当`foo_negative`用 [T = X] 实例化时，还有另一个错误，因为`X::foo`不是成员模板。

但是为什么它认为`v.foo`是成员模板呢？这种歧义正是`template`关键字的用途：如果我写了`v.template foo`，那么我会明确告诉 C++ 期待一个成员模板，但我没有使用`template`关键字！我没有提到成员模板，所以它应该假设它是一个普通成员。有一个与成员同名的*函数*这一事实不应该有任何影响。为什么会这样？它不可能是编译器中的错误，因为 GCC 和 clang 是一致的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-20T20:00:55.800

它看起来确实像一个编译器错误。

标准说：

> 在名称查找 (3.4) 发现名称是模板名称或 operator-function-id 或literal-operator-id 引用一组重载函数后，其中任何成员都是函数模板，如果后面跟着a <，< 总是作为模板参数列表的分隔符，而不是小于运算符。

并在 3.4.5/1

> 在类成员访问表达式 (5.2.5) 中，如果 . 或 -> 标记后紧跟一个标识符，后跟一个 <，必须查找标识符以确定 < 是模板参数列表 (14.2) 的开头还是小于运算符。标识符首先在对象表达式的类中查找。如果未找到标识符，则在整个后缀表达式的上下文中查找它并命名一个类模板。

该标准似乎没有表明名称查找可以在这里找到非成员函数模板。无论如何，`<`应该在模板定义时确定 的含义，而不是实例化时（那时为时已晚）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-20T10:52:38.480

**这是一个错误。**

您的代码在 MSVC (2011) 上运行良好。我认为编译器的解析器将“<”翻译为模板语句的开始标记。但是为什么 Clang 和 GCC 同时有这个 bug？

请在[此处](http://gcc.gnu.org/bugzilla/)和[此处](http://llvm.org/bugs/enter_bug.cgi?product=clang)报告错误。

也许这也很有趣： [g++/Clang 中的另一个错误？[C++ 模板很有趣]](https://stackoverflow.com/questions/4420828/another-bug-in-g-clang-c-templates-are-fun)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-29T20:44:23.980

在 Clang 中，这是[PR11856](http://llvm.org/PR11856)，大约在 2.5 个月前修复。Clang trunk 和 Clang 3.1 不报告[此代码](http://codepad.org/CLhyD4tr)的任何错误。Clang 错误包括[解释](http://llvm.org/bugs/show_bug.cgi?id=11856#c2)为什么此代码被拒绝，以及为什么代码正确，在此处复制（稍微调整以解决您的情况）：

> 这里重要的段落是**[basic.lookup.classref]p1**：
> 
> “在类成员访问表达式 (5.2.5) 中，如果`.`or`->`标记后紧跟一个*标识符*，后跟 a `<`，则必须查找标识符以确定`<`是模板参数列表 (14.2) 的开头还是 a小于运算符。首先在对象表达式的类中查找标识符。如果找不到标识符，则在整个*后缀表达式*的上下文中查找它，并命名一个类模板。
> 
> 由于`v`是依赖的，因此可能找不到*标识符*，因此我们考虑如果我们查看整个 *postfix-expression*的上下文会发生什么。由于我们找到了一个函数模板，我们不应该断定我们有一个*template-id*的开头。

# jsf - java.lang.NoClassDefFoundError：com/sun/faces/facelets/tag/jstl/core/IterationStatus

> ID：10671412
> 
> 赞同：1
> 
> 时间：2012-05-20T06:55:26.423
> 
> 标签：jsf, jsf-2, jstl

我在我的 facelet 中使用 ui:repeat 来迭代一个集合，如下所示：

```
<ui:repeat var="name" value="#{loginBean.names}">  
                <h:outputLabel value="#{name}" />
</ui:repeat> 
```

但它给出了以下例外：

```
SEVERE: Servlet.service() for servlet [Faces Servlet] in context with path [/eSchool] threw exception [com/sun/faces/facelets/tag/jstl/core/IterationStatus] with root cause
java.lang.NoClassDefFoundError: com/sun/faces/facelets/tag/jstl/core/IterationStatus 
```

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T12:12:41.450

您似乎正在运行像 Tomcat 这样的准系统 JSP/Servlet 容器，而不是像 Glassfish 这样的完全有价值的 Java EE 容器。JSP/Servlet 容器不附带[JSTL](https://stackoverflow.com/tags/jstl/info)，而 Facelets 需要它用于`<ui:repeat>`,`<c:xxx>`和`<fn:xxx>`标签/功能。

下载[jstl-1.2.jar](http://download.java.net/maven/1/jstl/jars/jstl-1.2.jar)，将其放入您的 webapp`/WEB-INF/lib`并冲洗干净，这个问题应该会消失。

# wcf - WCF 服务调用服务

> ID：10671415
> 
> 赞同：1
> 
> 时间：2012-05-20T06:55:38.770
> 
> 标签：wcf, service, timeout, client, synchronous

我有两个 .net 3.5 WCF 服务，其中服务 A 同步调用服务 B。

两个服务都在同一台机器上，并且具有以下行为：

```
[ServiceBehavior(InstanceContextMode = InstanceContextMode.PerCall)] 
```

我为服务 B 创建了客户端，并在服务 A 中像这样使用它`OperationContract`：

```
Proxyclient client = null;
bool error = true;
int returnVal = 0;

try
{
  client = new Proxyclient;
  returnVal = client.CallServiceB();
  client.Close();
  error = false;
}
finally
{
  if (error)
  {
    client.Abort();
  }
} 
```

但是当服务 A 被调用时，它会在 TraceListener 日志文件中写入一个错误：

> 写入管道时出错，无法识别错误 232。

请注意，此消息是绑定特定的 ( `netNamedPipeBinding`)。对于我测试的所有其他绑定，我也遇到了错误。其他绑定的一般含义是：

> 无法写入/连接连接超时并已关闭。

但是，服务/客户端工作，它只是在日志文件中产生错误，所以我认为 WCF 在这里重试基础上工作。但这会向我的日志文件发送垃圾邮件，我不确定这是否会在将来造成一些问题。

一些非常特别的事情要注意：

仅当客户端超过 2 分钟未调用服务 B 时才会出现此问题（但这个时间会因我测试的每个绑定而变化）。因此，在服务启动后的第一次日志中没有错误，如果我每 10 秒调用一次该服务，日志中也不会出现错误。

我已经做了什么：

1.  我玩了所有服务的超时设置，没有任何更改
2.  我将客户端放入控制台应用程序并从该控制台应用程序调用服务 B。这里就不写这些错误了！
3.  我在多台机器上对此进行了测试，并在所有机器上都遇到了问题。
4.  我从服务 A 和 B 中删除了所有代码。我只有 WCF 基本代码，但仍然有这个问题。

我希望有人能帮助我。

提前致谢。

# c# - 如何从样式继承并覆盖某些内容？

> ID：10671416
> 
> 赞同：3
> 
> 时间：2012-05-20T06:55:50.193
> 
> 标签：c#, wpf, xaml, inheritance, styles

具体问题是如何继承我的自定义样式“Water”并覆盖其“Grid.Background”-Part？

有没有可能？首先，我只想在那里放另一张图片。

**ButtonStyles1.xaml**

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" mc:Ignorable="d">
    <Style x:Key="Water" TargetType="{x:Type Button}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type Button}">
                    <Grid x:Name="Grid" ShowGridLines="False" d:DesignWidth="150" d:DesignHeight="150">
                        <Grid.Background>
                            <ImageBrush ImageSource="/WpfControlLibrary_Battleship;component/Resources/ButtonBackgrounds/Water.jpg"/>
                        </Grid.Background>
                        <Grid.RowDefinitions>
                            <RowDefinition/>
                            <RowDefinition/>
                            <RowDefinition/>
                            <RowDefinition/>
                            <RowDefinition/>
                            <RowDefinition/>
                            <RowDefinition/>
                            <RowDefinition/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition/>
                            <ColumnDefinition/>
                            <ColumnDefinition/>
                            <ColumnDefinition/>
                            <ColumnDefinition/>
                            <ColumnDefinition/>
                            <ColumnDefinition/>
                            <ColumnDefinition/>
                        </Grid.ColumnDefinitions>
                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualStateGroup.Transitions>
                                    <VisualTransition From="MouseOver" GeneratedDuration="0">
                                        <Storyboard>
                                            <DoubleAnimation Duration="0:0:0.5" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="PathNW"/>
                                            <DoubleAnimation Duration="0:0:0.5" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="PathNE"/>
                                            <DoubleAnimation Duration="0:0:0.5" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="PathSW"/>
                                            <DoubleAnimation Duration="0:0:0.5" Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="PathSE"/>
                                        </Storyboard>
                                    </VisualTransition>
                                </VisualStateGroup.Transitions>
                                <VisualState x:Name="Normal"/>
                                <VisualState x:Name="MouseOver">
                                    <Storyboard>
                                        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="PathNW">
                                            <EasingDoubleKeyFrame KeyTime="0" Value="1"/>
                                        </DoubleAnimationUsingKeyFrames>
                                        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="PathNE">
                                            <EasingDoubleKeyFrame KeyTime="0" Value="1"/>
                                        </DoubleAnimationUsingKeyFrames>
                                        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="PathSW">
                                            <EasingDoubleKeyFrame KeyTime="0" Value="1"/>
                                        </DoubleAnimationUsingKeyFrames>
                                        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="PathSE">
                                            <EasingDoubleKeyFrame KeyTime="0" Value="1"/>
                                        </DoubleAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                                <VisualState x:Name="Pressed"/>
                                <VisualState x:Name="Disabled"/>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                        <Path x:Name="PathNW" Data="M2.5,2.5 L82.833332,2.5 M2.5000006,2.5 L2.5000006,82.833329" HorizontalAlignment="Stretch" Height="Auto" Margin="0" StrokeStartLineCap="Square" Stretch="Fill" StrokeEndLineCap="Square" Stroke="#FF9B0000" StrokeThickness="5" VerticalAlignment="Stretch" Width="Auto" Grid.ColumnSpan="2" Grid.RowSpan="2" Opacity="0"/>
                        <Path x:Name="PathNE" Grid.Column="6" Data="M2.5,2.5 L82.833356,2.5 M82.833333,2.5 L82.833333,82.833335" HorizontalAlignment="Stretch" Height="Auto" Margin="0" StrokeStartLineCap="Square" Stretch="Fill" StrokeEndLineCap="Square" Stroke="#FF9B0000" StrokeThickness="5" VerticalAlignment="Stretch" Width="Auto" Grid.ColumnSpan="2" Grid.RowSpan="2" Opacity="0"/>
                        <Path x:Name="PathSW" Data="M2.5,2.5 L2.5,82.833328 M2.5,82.833323 L82.833336,82.833323" HorizontalAlignment="Stretch" Margin="0" Grid.Row="6" StrokeStartLineCap="Square" Stretch="Fill" StrokeEndLineCap="Square" Stroke="#FF9B0000" StrokeThickness="5" Width="Auto" Grid.ColumnSpan="2" Grid.RowSpan="2" Opacity="0"/>
                        <Path x:Name="PathSE" Grid.Column="6" Data="M2.5000001,168.16667 L168.16665,168.16667 M168.16666,2.5000051 L168.16666,168.1667" HorizontalAlignment="Stretch" Height="Auto" Margin="0" Grid.Row="6" StrokeStartLineCap="Square" Stretch="Fill" StrokeEndLineCap="Square" Stroke="#FF9B0000" StrokeThickness="5" VerticalAlignment="Stretch" Width="Auto" Grid.ColumnSpan="2" Grid.RowSpan="2" Opacity="0"/>
                        <Rectangle x:Name="Rectangle" Grid.ColumnSpan="8" Fill="Red" Margin="0" Grid.RowSpan="8" Stroke="Black" Opacity="0.495">
                            <Rectangle.Visibility>
                                <Visibility>Hidden</Visibility>
                            </Rectangle.Visibility>
                        </Rectangle>
                    </Grid>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsFocused" Value="True"/>
                        <Trigger Property="IsDefaulted" Value="True"/>
                        <Trigger Property="IsMouseOver" Value="True"/>
                        <Trigger Property="IsPressed" Value="True"/>
                        <Trigger Property="IsEnabled" Value="False"/>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <Style x:Key="Bow_W" TargetType="{x:Type Button}" BasedOn="{StaticResource Water}">
        <!--How to inherit from the style "Water" and to overwrite the "Grid.Background"-Part?-->
    </Style>
</ResourceDictionary> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T08:06:29.393

您需要将模板绑定到外部属性，然后您的样式可以覆盖该属性。例子：

```
<Style x:Key="Water" TargetType="Button">
    <Setter Property="Background">
        <Setter.Value>
            <ImageBrush ImageSource="/WpfControlLibrary_Battleship;component/Resources/ButtonBackgrounds/Water.jpg"/>
        </Setter.Value>
    </Setter>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="Grid">
                <Grid Background="{TemplateBinding Background}" ...
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style>

<Style x:Key="SomeOtherWaterStyle" BasedOn="{StaticResource WaterStyle" TargetType="Grid">
    <Setter Property="Background" Value="Red"/>
</Style> 
```

请注意，模板绑定的属性的实际选择取决于您。`Background`在这种情况下使用它可能是有意义的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T11:33:09.563

您始终可以使用**basedon**属性，例如：

```
<Style x:Key="NewSytle" BasedOn="{StaticResource Water}">
  <Setter Property="Control.Background" Value="Blue"/>
</Style> 
```

# eclipse - Eclipse Project Explorer - 项目列表存储在哪里？

> ID：10671422
> 
> 赞同：1
> 
> 时间：2012-05-20T06:57:01.267
> 
> 标签：eclipse

Eclipse 如何填充 Project Explorer？当前项目列表存储在文件系统的什么位置以及以什么格式存储？

如果我将项目目录`Bar/Foo`从某个工作台移动`Bar/`到其他工作台`Baz/`，然后`Baz/`作为当前工作台打开，则项目`Foo`不会显示。显然 Eclipse 没有使用工作台目录中存在的目录来查找项目。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T07:00:37.870

项目在工作区中声明。您必须导入或创建项目才能使它们存在。它们的存在存储在工作区中 .metadata 文件夹的某个区域中。

如果要通过 API 获取项目列表，则需要 Resources API。

要具体获取列表，这是调用：

```
 IProject projects[] = ResourcesPlugin.getWorkspace().getRoot()
            .getProjects(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T07:58:09.127

正如弗朗西斯厄普顿所说，项目列表存储在 .metadata 文件夹中，最有可能在 .metadata/plugins/org.eclipse.core.resources 文件夹中。

您可以使用 Francis 所示的 Resources API 以编程方式修改此列表，或者如果您想导入现有项目（如问题中所述），请使用 Import existing project... 向导 from File/Import... 在一般类。

# php - jQuery .post 帖子元素

> ID：10671425
> 
> 赞同：2
> 
> 时间：2012-05-20T06:57:38.090
> 
> 标签：php, jquery, .post

这是我的代码；

```
<script type="text/javascript">
function submitform()
{
$.post("handlers/request.php");

}                       
</script>

<form action="handlers/request.php" method="post" data-ajax="false" id="request">
<a href="javascript: submitform()">
<input type="hidden" name="url" value="http://google.com" />
</a>
</form> 
```

在一个单独的 PHP 文件（handers/request.php）中，我有一个简单的：

```
$url = $_POST['url']; 
```

它不接受这个。为什么不？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T06:59:49.697

您实际上并没有传递任何数据。

```
$.post("handlers/request.php", { url: $("[name='url']").val() }, function(data){
  console.log( data );
}); 
```

注意第二个参数，它是一个将我们的值传递到服务器端 PHP 脚本的对象。`url`密钥将成为服务器`$_POST['url']`端，并将包含来自`[name='url']`表单输入的值。

此外，将此功能绑定到锚点单击时，请避免以下情况：

```
<a href="javascript: submitform()"> 
```

相反，请使用更多类似的东西：

```
<a class="submit" href="enablejs.html">Submit</a> 
```

然后，在您的 JavaScript 中：

```
$(function(){
  $("form#request").on("click", "a.submit", function(e){
    e.preventDefault();
    $.post("handlers/request.php", { url: $("[name='url']").val() }, function(data){
      console.log( data );
    });
  });
}); 
```

将 JavaScript 排除在 HTML 之外总是好的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T07:49:57.153

简单来说，您需要：

*   将一些数据传递给您的代码没有的 Ajax 页面。
*   决定数据通过后该怎么做。

$.post 的语法如下：

```
jQuery.post( url [, data] [, success(data, textStatus, jqXHR)] [, dataType] ) 
```

所以它会是：

```
$.post("test.php", { name: "John", time: "2pm" } ); 
```

传递简单的 JavaScript 变量，或者：

```
$.post("test.php", $("#request").serialize()); 
```

传递一个带有 id "request" 的完整表单，就像你的一样。`test.php`如果您的页面返回一些代码，您需要指定一个回调函数。

此外，您的 HTML 实现有些混乱。将隐藏的输入放在`A`标签中是没有意义的。尝试类似：

```
<form action="handlers/request.php" method="post" data-ajax="false" id="request">
    <input type="hidden" name="url" value="http://google.com" />
    <input type="button" onclick="submitform();" value="Submit" />
</form>

function submitform() {
    $.post("handlers/request.php", $("#request").serialize());
} 
```

# algorithm - 如何正确告知用户阅读进度

> ID：10671426
> 
> 赞同：0
> 
> 时间：2012-05-20T06:57:43.857
> 
> 标签：algorithm, design-patterns, user-interface, user-experience

一次向用户显示一个屏幕（或允许他自由滚动），系统将始终具有以下变量：

顶线可见。屏幕上可见的线条。总行数。

告诉用户它在文本中的进度的最佳方法是什么？

如果系统使用第 1 行作为 0% `topLine * 100 / totalLines`，那么在文本的末尾，它将是 <100%，例如 97.5%

如果系统占屏幕中的可见线`(topLine + linesVisible) * 100 / totalLines`，它将从 >0% 开始，例如 11%

如果系统使用从 0% 开始并以 100% 结束的曲线，则每次他切换设备或调整字体/屏幕大小时，百分比都会改变。

这个问题有一个共同的模式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T09:10:04.957

我认为这不会有一个共同的模式。该任务是特定于设备和特定于应用程序的。

您应该计算所有三个变量`top line visible`，`lines visible in the screen`以及 `total lines`当用户更改字体或字体大小时。并且当用户只滚动`top line visible`并且`lines visible in the screen`应该被计算在内时。

看看 MS Word 甚至 Amazon Kindle 是如何处理这个问题的。当您将鼠标放在滚动条上时，MS Word 会显示进度。亚马逊 Kindle 在页面底部显示进度。它们都显示页码或页面百分比而不是行，但它们的方法也可以应用于行。

此外，如果您的文档不是很大，那么将浮点数显示为进度也不会令人愉快。在这种情况下，四舍五入的百分比就可以了。

# ruby-on-rails-3 - 如何在 ruby on rails 中使用 Map 数据结构

> ID：10671430
> 
> 赞同：0
> 
> 时间：2012-05-20T06:58:48.630
> 
> 标签：ruby-on-rails-3

我有一些循环，我希望将其转换为地图，但问题在于我的循环内部我正在对数组的元素执行 if 条件，此外我正在计算不止一件事循环内的数组..这怎么可能？

对于 ids_to_be_warned 中的供应商 ID if(Supplier.find(supplier_id).banned.nil?)
(Supplier.find(supplier_id)).update_attribute(:reason_for_warning_or_banning, reason) (Supplier.find(supplier_id)).update_attribute(:banned, "false ") Update.create(supplier_id: supplier_id, type: "warn-s") end end

# backbone.js - 简单的 Backbone 搜索页面 - 你会怎么做？

> ID：10671435
> 
> 赞同：8
> 
> 时间：2012-05-20T06:59:50.410
> 
> 标签：backbone.js, search-form

我想使用 Backbone 实现一个简单的搜索页面。它不是单页应用程序，但仍想使用 Backbone 构建我的 JavaScript 代码。搜索页面由搜索表单和搜索结果组成。搜索是通过 AJAX 完成的，并且必须保存在历史记录中。从历史记录加载页面时，应将搜索查询参数加载到表单中。搜索表单和搜索结果可以实现为 Backbone.View 的。但是，我在将它们粘合在一起时遇到了问题。

我认为我需要某种控制器。有一个 Backbone.Router，但它是正确的地方吗？AJAX 调用应该放在哪里？

欢迎对此类页面的结构提出任何建议。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-21T04:58:02.373

您可以创建一个`SearchModel`. `SearchModel`会有一个方法，比如：“performSearch(string)”，它会触发你的 ajax 调用。当调用返回时，模型可以执行以下操作：

```
this.set("searchResults", ajaxResult) 
```

并且您的视图可以绑定到模型的该属性：

```
// SearchResultsView
Backbone.View.extend({
    initialize: function() {
        this.model.on("change:searchResults", this.displayResults, this);
    },
    displayResults: function(model, results) {
        // do whatever...
    }
}); 
```

示例搜索表单视图以供参考：

```
Backbone.View.extend({
   events: {
      "submit": "formSubmitted"
   },
   formSubmitted: function(e) {
      this.model.performSearch(e.target.value);
   }
}); 
```

`SearchModel`供参考的例子：

```
Backbone.Model.extend({
   performSearch: function(string) {
      // fire your ajax request.  provide a bound
      // _searchComplete as the callback
   },
   _searchComplete: function(results) {
     this.set("searchResults", results);
   }
}); 
```

# javascript - 加载 iframe 后在 iframe 中执行 JavaScript 代码？

> ID：10671436
> 
> 赞同：1
> 
> 时间：2012-05-20T07:00:03.513
> 
> 标签：javascript, iframe, execute, loaded

我希望能够在别人的页面内执行代码。

下面是一个便于理解的例子：

假设我想在加载后更改某些 iframe 页面的颜色：

```
 document.body.style.backgroundColor = "#AAAAAA";

 document.getElementById('targetFrame').contentWindow.targetFunction(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T07:07:04.350

如果是别人的页面。如果没有对方的一些合作，你根本无法做到这一点。想一想，如果像您这样的随机人员可以针对其他开发人员编写的应用程序任意运行代码，这将对 Web 的安全性产生什么影响？虽然我相信你的品格很好，但有足够多的人道德低劣，这对数据安全来说是个大问题。

话虽如此，此安全规则也有例外；然而。

例如，如果其他 Web 开发人员允许您在他或她的页面上执行代码，您可以使用 HTML5 window.postMessage API 将消息从一个上下文传递到另一个上下文，然后在收到该消息时运行命令。

澄清一下，这需要其他开发人员在他/她的网站中注册一个监听器来监听从您的网站发送的事件。

**您同事网站上的代码：**

```
// register to listen for postMessage events
window.addEventListener("message", changeBackground, false);  

// this is the callback handler to process the event
function changeBackground(event)  
{  

  // you're colleage is responsible for making sure only YOU can
   // make calls to his/her site!
  if (event.origin !== "http://example.org:8080")  
    return;  

  // event.data could contain "#AAAAAA" for instance
  document.body.style.backgroundColor = event.data;
  // do other stuff
  }
} 
```

**你的代码：**

```
// pass the string "#AAAAAA" to the iframe page, where the changeBackground
 // function will change the color
document.getElementById("theIframe").contentWindow.postMessage("#AAAAAA", targetOrigin); 
```

为了在 iframe 完成加载时执行此代码，您当然需要能够检测到这一点，这可以通过使用[iframe 的加载事件](http://www.nczonline.net/blog/2009/09/15/iframes-onload-and-documentdomain/)或让您的同事[反向使用 postMessage 来通知您触发你的活动。](https://stackoverflow.com/a/10670723/552792).

有关更多信息，请查看[关于 Web 消息的 HTML5 规范](http://www.whatwg.org/specs/web-apps/current-work/multipage/web-messaging.html#web-messaging)。

# c# - 流或文件未关闭

> ID：10671437
> 
> 赞同：0
> 
> 时间：2012-05-20T07:00:05.093
> 
> 标签：c#, asp.net-mvc-3, file, stream

我让他遵循代码

```
 HttpPostedFileBase files = Request.Files[0];
    Stream fileStream = files.InputStream;

    using (Stream file = System.IO.File.OpenWrite(originalImage))
    {
        StreamUtil.CopyStream(fileStream, file);
        file.Close();
        fileStream.close();
        fileStream.dispose();
    }

    // here is CopyStream method

    public static void CopyStream(Stream input, Stream output)
    {
        var buffer = new byte[8*1024];
        int len;
        while ((len = input.Read(buffer, 0, buffer.Length)) > 0)
        {
            output.Write(buffer, 0, len);
        }
    } 
```

当我尝试两次写入同一个文件时，我得到

```
The process cannot access the file \u0027D:FILENAME because it is being used by another process 
```

我怎样才能关闭它？所以一旦请求写入完成，它将被关闭？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T07:46:51.477

我想把它写成评论，但不清楚：

尝试做这样的事情：

```
MemoryStream fileStream = new MemoryStream();

fileStream.WriteByte(04);

using (Stream file = System.IO.File.OpenWrite(originalImage))
{
    CopyStream(fileStream, file);
}

using (Stream file = System.IO.File.OpenWrite(originalImage))
{
    CopyStream(fileStream, file);
} 
```

您在第二个使用行上是否遇到相同的错误？

# opengl - 在 OpenGL 中使用 gluOrtho2D 绘制纹理

> ID：10671441
> 
> 赞同：1
> 
> 时间：2012-05-20T07:00:33.840
> 
> 标签：opengl, graphics

我正在使用以下代码来显示原始图像文件，但它什么也不显示：

```
GLuint texture;
GLuint LoadTexture( const char * filename, int width, int height);
void FreeTexture(GLuint texture);

void display()
{
    glClear (GL_COLOR_BUFFER_BIT);
    glBindTexture( GL_TEXTURE_2D, texture ); 
    glBegin (GL_QUADS); //begin drawing our quads
    glTexCoord2d(0.0, 0.0);
    glVertex3f(0.0, 0.0, 0.0); //with our vertices we have to assign a texcoord

    glTexCoord2d(1.0, 0.0);
    glVertex3f(1.0, 0.0, 0.0); //so that our texture has some points to draw to

    glTexCoord2d(1.0, 1.0);
    glVertex3f(1.0, 1.0, 0.0);

    glTexCoord2d(0.0, 1.0);
    glVertex3f(0.0, 1.0, 0.0);
    glEnd();
    glPopMatrix();
    glFlush();
}

void init()
{
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    gluOrtho2D(0, 640, 0, 480);
    glEnable( GL_TEXTURE_2D );
}

int main(int argc, char **argv)
{
    glutInit (&argc, argv);
    glutInitDisplayMode (GLUT_SINGLE);
    glutInitWindowSize (640, 480);
    glutInitWindowPosition (100, 100);
    glutCreateWindow ("A basic OpenGL Window");
    glutDisplayFunc (display);
    init();
    texture = LoadTexture("texture.raw", 256, 256);
    glutMainLoop ();
    FreeTexture(texture);

    return 0;
} 
```

我得到的只是一个空屏幕。有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T07:04:58.287

调用 gluOrtho2d 后，您的视图将从 0,0 映射到 640,480。您正在绘制一个值从 0,0 到 1,1 的四边形，这将是屏幕左下角单个像素的大小。

使用全屏 ( `glVertex(640,480);`) 或使用 gluOrtho2d 指定 1x1 视口 ( `gluOrtho2d(0,1,0,1);`)

# html - XSLT - 添加 转换成文本字符串而不是 \n

> ID：10671444
> 
> 赞同：2
> 
> 时间：2012-05-20T07:00:37.370
> 
> 标签：html, xml, xslt, replace, find

我有一个这样的 XML 文档：

```
<xml>
  <item>
    <title>Article 1</title>
    <text><![CDATA[Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec lorem diam, eleifend sed mollis id, condimentum in velit.

Sed sit amet erat ac mauris adipiscing elementum. Pellentesque eget quam augue, id faucibus magna.

Ut malesuada arcu eu elit sodales sodales. Morbi tristique porttitor tristique. Praesent eget vulputate dui. Cras ut tortor massa, at faucibus ligula.]]></text>
  </item>
</xml> 
```

“段落”之间有空行的地方。

而且我需要使用 XSLT 转换，其中元素将在 < p > 和 </ p > 之间具有每一段文本。所以我想要的输出是这样的：

```
<h2>Article 1</h2>    
<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec lorem diam, eleifend sed mollis id, condimentum in velit.</p>
<p>Sed sit amet erat ac mauris adipiscing elementum. Pellentesque eget quam augue, id faucibus magna.</p>
<p>Ut malesuada arcu eu elit sodales sodales. Morbi tristique porttitor tristique. Praesent eget vulputate dui. Cras ut tortor massa, at faucibus ligula.</p> 
```

到目前为止，我有一个 XSLT，它看起来像这样：

```
<xsl:template match="/">
        <html>
            <head>
                <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
                <title>Page title</title>
            </head>
            <body>
                <h1>Table of contents</h1>
                <ol>
                <xsl:for-each select="xml/item>
                        <li><xsl:value-of select="./title"/></li>
                </xsl:for-each>
                </ol>
                <hr/>
                <xsl:for-each select="xml/item">
                    <h2><xsl:value-of select="./title"/></h2>
                    <xsl:value-of select="./text" disable-output-escaping="yes"/>
                </xsl:for-each>
            </body>
        </html>
</xsl:template> 
```

如何`\n`用段落 HTML 标记处理正确位置的替换？我在这里检查了类似的问题，但我显然无法将它们应用于我的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T08:00:26.483

With XSLT 2.0, you can use a regular expression to tokenize your string.

To do so, replace your `<xsl:value-of>` by:

```
<xsl:analyze-string select="text" regex="&#xa;">
    <xsl:non-matching-substring>
        <p>
            <xsl:value-of select="."/>
        </p>
    </xsl:non-matching-substring>
</xsl:analyze-string> 
```

In XSLT 1.0, you'd have to define a template that will be called recursively and generates a `<p>` element for the substring before the first linefeed.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T08:28:34.913

如果您必须使用 XSLT 1.0，以下命名模板可以完成这项工作：

```
<xsl:template name="replace-nl">
  <xsl:param name="str"/>
  <xsl:if test="$str">
    <xsl:variable name="before" select="substring-before($str, '&#10;')"/>
    <xsl:variable name="after" select="substring-after($str, '&#10;')"/>      
    <p>
      <xsl:choose>
        <xsl:when test="$before">
          <xsl:value-of select="normalize-space($before)"/>
        </xsl:when>
        <xsl:otherwise>
          <xsl:value-of select="normalize-space($str)"/>
        </xsl:otherwise>
      </xsl:choose>
    </p>
    <xsl:call-template name="replace-nl">
      <xsl:with-param name="str" select="$after"/>
    </xsl:call-template>
  </xsl:if>
</xsl:template> 
```

只需调用它而不是`xsl:value-of`要替换换行符的位置，例如：

```
<xsl:for-each select="xml/item">
  ...
  <xsl:call-template name="replace-nl">
    <xsl:with-param name="str" select="text"/>
  </xsl:call-template>                    
</xsl:for-each> 
```

# eclipse - 在 Ubuntu 12.04 上的 Eclipse 3.7.2 上配置 jython 2.5.1 时出错

> ID：10671446
> 
> 赞同：1
> 
> 时间：2012-05-20T07:00:42.013
> 
> 标签：eclipse, configuration, jython, pydev, interpreter

我正在尝试通过 Ubuntu 软件中心在 Ubuntu 12.04 上安装的 Eclipse 3.7.2 上设置 Jython 解释器。Eclipse 是 eclipse-platform 3.7.2-1 版本。PyDev 已按照用户手册的指示安装（或者至少我相信如此），并且我尝试使用 PyDev 的更新和夜间构建来设置解释器。目前，PyDev 版本为：PyDev for Eclipse 2.6.0.2012050900 org.python.pydev.feature.feature.group Aptana

还安装了 Jyton： panton@maleficio:~$ dpkg -l |grep -i jython ii jython 2.5.1-2ubuntu2 Python 与 Java 无缝集成

我可以在“正确”目录中找到它：

panton@maleficio:~$ ls -1 /usr/share/java/jython* /usr/share/java/jython-2.5.1.jar
/usr/share/java/jython.jar panton@maleficio:~$

（第二个文件只是第一个文件的链接）。

这就是说，当我尝试创建一个新项目时，File -> New -> Project -> PyDev -> PyDev Project，然后 Next，我提供了三种项目类型：Python，这看起来不错，并显示一个组合框选择解释器，以及 Jython 和 Iron Python，它们（两者）都提醒我“请在继续之前在相关首选项中配置解释器。”。

对于接下来的段落，我将坚持使用 Jython 选项，因为 Iron Python 已经没有 Precise Pagolin (Ubuntu 12.04) 的“官方”发行版。

好的，然后我转到Window->Preferences，然后选择Interpreter-Jython，然后New，我选择一个正确的名称，Jython 2.5.1，然后是正确的路径，/usr/share/java/jython-2.5.1 。罐，

## 按确定，并收到此消息：

获取解释器信息时出错。常见原因包括： - 使用不受支持的版本（Jython 至少应该是 2.1，所以它是：它是 2.5.1 版本） - 指定了无效的解释器。完全没有，因为我选择的是真实文件，而不是链接。……………………………………………………………………………………………………………………………………

## 错误日志说：

```
 See error log for details.
    No output was in the standard output when trying to create the interpreter info.
    The error output contains:>>error importing site
        at org.python.core.PySystemState.getPath(PySystemState.java:513)
        at org.python.core.PySystemState.getPathLazy(PySystemState.java:502)
        at org.python.core.util.RelativeFile.<init>(RelativeFile.java:21)
        at org.python.core.packagecache.PathPackageManager.packageExists(PathPackageManager.java:43)
        at org.python.core.packagecache.SysPackageManager.packageExists(SysPackageManager.java:159)
        at org.python.core.PyJavaPackage.__findattr_ex__(PyJavaPackage.java:132)
        at org.python.core.PyObject.__findattr__(PyObject.java:869)
        at org.python.core.packagecache.PackageManager.lookupName(PackageManager.java:136)
        at org.python.core.JavaImporter.find_module(JavaImporter.java:39)
        at org.python.core.JavaImporter.find_module(JavaImporter.java:25)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:616)

    java.lang.NoClassDefFoundError: java.lang.NoClassDefFoundError: org/jruby/ext/posix/util/Platform
    <<

------------------------------------------------------
The Workspace log on Eclipse says:
-------------------------------------------------------
eclipse.buildId=I20110613-1736
java.version=1.6.0_24
java.vendor=Sun Microsystems Inc.
BootLoader constants: OS=linux, ARCH=x86_64, WS=gtk, NL=en_US
Command-line arguments:  -os linux -ws gtk -arch x86_64

Error
Sun May 20 08:39:09 CEST 2012
No output was in the standard output when trying to create the interpreter info.
The error output contains:>>error importing site
    at org.python.core.PySystemState.getPath(PySystemState.java:513)
    at org.python.core.PySystemState.getPathLazy(PySystemState.java:502)
    at org.python.core.util.RelativeFile.<init>(RelativeFile.java:21)
    at org.python.core.packagecache.PathPackageManager.packageExists(PathPackageManager.java:43)
    at org.python.core.packagecache.SysPackageManager.packageExists(SysPackageManager.java:159)
    at org.python.core.PyJavaPackage.__findattr_ex__(PyJavaPackage.java:132)
    at org.python.core.PyObject.__findattr__(PyObject.java:869)
    at org.python.core.packagecache.PackageManager.lookupName(PackageManager.java:136)
    at org.python.core.JavaImporter.find_module(JavaImporter.java:39)
    at org.python.core.JavaImporter.find_module(JavaImporter.java:25)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)

java.lang.NoClassDefFoundError: java.lang.NoClassDefFoundError: org/jruby/ext/posix/util/Platform
<<

java.lang.RuntimeException: No output was in the standard output when trying to create the interpreter info.
The error output contains:>>error importing site
    at org.python.core.PySystemState.getPath(PySystemState.java:513)
    at org.python.core.PySystemState.getPathLazy(PySystemState.java:502)
    at org.python.core.util.RelativeFile.<init>(RelativeFile.java:21)
    at org.python.core.packagecache.PathPackageManager.packageExists(PathPackageManager.java:43)
    at org.python.core.packagecache.SysPackageManager.packageExists(SysPackageManager.java:159)
    at org.python.core.PyJavaPackage.__findattr_ex__(PyJavaPackage.java:132)
    at org.python.core.PyObject.__findattr__(PyObject.java:869)
    at org.python.core.packagecache.PackageManager.lookupName(PackageManager.java:136)
    at org.python.core.JavaImporter.find_module(JavaImporter.java:39)
    at org.python.core.JavaImporter.find_module(JavaImporter.java:25)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)

java.lang.NoClassDefFoundError: java.lang.NoClassDefFoundError: org/jruby/ext/posix/util/Platform
<<
    at org.python.pydev.ui.interpreters.AbstractInterpreterManager.createInfoFromOutput(AbstractInterpreterManager.java:415)
    at org.python.pydev.ui.interpreters.JythonInterpreterManager.doCreateInterpreterInfo(JythonInterpreterManager.java:77)
    at org.python.pydev.ui.interpreters.JythonInterpreterManager.internalCreateInterpreterInfo(JythonInterpreterManager.java:46)
    at org.python.pydev.ui.interpreters.AbstractInterpreterManager.createInterpreterInfo(AbstractInterpreterManager.java:369)
    at org.python.pydev.ui.pythonpathconf.ObtainInterpreterInfoOperation.run(ObtainInterpreterInfoOperation.java:81)
    at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121) 
```

* * *

## Jruby 已经安装好了，它的版本是：

panton@maleficio:~$ dpkg -l |grep -i jruby

## ii jruby 1.5.6-2 Ruby 的 100% 纯 Java 实现

并且 jar 文件 /usr/lib/jruby/lib/jruby.jar 存在并包含两个错误转储中引用的类。

根据要求，我执行以下命令：
~$ java -Dpython.home=/usr/share/java -classpath /usr/share/java/jython-2.5.1.jar:$CLASSPATH org.python.util.jython plugins/在 org.python.core.PySystemState.getPathLazy(PySystemState.java:502) 在 org.python.core.PySystemState.getPath(PySystemState.java:513) 在 org.python.core.PySystemState.getPathLazy(PySystemState.java:502) 在 org.python.pydev/pysrc/interpreterInfo.py 错误导入站点.python.core.util.RelativeFile.(RelativeFile.java:21) 在 org.python.core.packagecache.PathPackageManager.packageExists(PathPackageManager.java:43) 在 org.python.core.packagecache.SysPackageManager.packageExists(SysPackageManager. java:153) 在 org.python.core.PyJavaPackage。**在 org.python.core.PyObject 中找到 attr_ex** (PyJavaPackage.java:132)。**查找属性**(PyObject.java:869) 在 org.python.core.org.python.core.JavaImporter.find_module(JavaImporter.java:39) 在 org.python.core.packagecache.PackageManager.lookupName(PackageManager.java:136)。 JavaImporter.find_module(JavaImporter.java:25) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java: 43) 在 java.lang.reflect.Method.invoke(Method.java:616)

java.lang.NoClassDefFoundError: java.lang.NoClassDefFoundError: org/jruby/ext/posix/util/Platform

欢迎对此提供任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T05:37:40.533

我刚刚遇到了同样的问题，我通过卸载 Ubuntu 12.04 存储库中提供的 Jython 版本并使用项目网站中提供的版本重新安装 Jython 来解决它。Fabio Zadrozny 对这个错误的看法是正确的。谢谢你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T23:44:41.843

好吧，似乎 Jython 出于某种原因与 JRuby 冲突（这对我来说似乎很奇怪）。

你可以尝试运行：

```
java -Dpython.home=/usr/share/java -classpath /usr/share/java/jython-2.5.1.jar:%CLASSPATH% org.python.util.jython plugins/org.python.pydev/pysrc/interpreterInfo.py 
```

并粘贴从命令行运行得到的输出？

* * *

编辑：

嗯，这似乎不是 PyDev 问题（我认为如果您在该命令行中更改了解释器信息.py 仅使用“import sys;import os.path”来获取文件，您将遇到相同的错误 - 请检查那）。

我的猜测是 Jython 和 JRuby 有冲突......您可以尝试在执行 Jython 时设置您的 CLASSPATH 以删除 JRuby（如果您能够使用该命令行使其在 shell 中工作，您应该能够从该外壳并正确配置 Jython 解释器）。

* * *

编辑2：

好的，我快速浏览了一下 Jython，这似乎是一个 Jython 错误。关于你那里的版本......请参阅：[https](https://bitbucket.org/jython/jython/src/fd2130e12b7c/src/org/python/core/PySystemState.java) ://bitbucket.org/jython/jython/src/fd2130e12b7c/src/org/python/core/PySystemState.java （它有一个**导入org.jruby.ext.posix .util.Platform**，绝对不应该存在）。在存储库的最新版本中，它已经更改为**import jnr.posix.util.Platform**，因此，显然，这主要是获取适当的 Jython 版本的问题（可能是 linux repo 中的版本不正确-- 或者至少，您**需要**在 PYTHONPATH 上安装 JRuby 才能使 Jython 工作，这确实很尴尬（但应该已经在 J​​ython 方面进行了修复）。

# java - ActionListener 中的 Java swing 问题

> ID：10671449
> 
> 赞同：0
> 
> 时间：2012-05-20T07:01:32.673
> 
> 标签：java, swing, actionlistener

```
//GUI.java
public class GUI extends JFrame implements ActionListener {

    private static final long serialVersionUID = 870343916997182570L;
    private JPanel btmPanel;

    public GUI(String arg0) throws HeadlessException {
        super(arg0);
        createGUI();
    }

    private void createGUI() {
        setSize(WIDTH, HEIGHT);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setLayout(new BorderLayout());

        //ResultPanel rslt = new ResultPanel();
        //this.getContentPane().add(rslt.createPanel(), BorderLayout.CENTER);

        btmPanel = new JPanel();
        btmPanel.setBackground(Color.LIGHT_GRAY);
        btmPanel.setLayout(new FlowLayout());

        JButton blueSearch = new JButton("Search");
        blueSearch.setBackground(Color.WHITE);
        blueSearch.addActionListener(this);
        btmPanel.add(blueSearch);

        JButton blackChart = new JButton("Chart");
        blackChart.setBackground(Color.WHITE);
        blackChart.addActionListener(this);
        btmPanel.add(blackChart);

        this.getContentPane().add(btmPanel, BorderLayout.SOUTH);    
    }   

    @Override
    public void actionPerformed(ActionEvent e) {
        String buttonString = e.getActionCommand();

        if (buttonString.equals("Search")) {
            ResultPanel rslt = new ResultPanel();
            this.getContentPane().add(rslt.createPanel(), BorderLayout.CENTER);
        }
    }

}

//ResultPanel.java
public class ResultPanel extends JPanel implements ActionListener {

    private static final long serialVersionUID = -7851502165390304971L;
    private JPanel textPanel;
    private JTextArea textDisplay;

    public ResultPanel() {
        textPanel = new JPanel(); 
        textDisplay = new JTextArea("Text Area:");
    }

    public JPanel createPanel() {

        textDisplay.setEditable(true);
        textPanel.setBackground(Color.LIGHT_GRAY);
        textPanel.setLayout(new BorderLayout());
        textPanel.add(textDisplay,BorderLayout.CENTER);

        return textPanel;
    }

    @Override
    public void actionPerformed(ActionEvent e) {

    }

} 
```

我的主机架上有两个按钮，我希望按下按钮时可以改变面板。

问题是“actionPerformed”中的代码不起作用，

但如果我把它们放在 creatGUI().... 中效果很好（见标记部分）。

那有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T07:14:43.667

在运行中添加组件后，`JFrame`您需要调用`revalidate()`并`repaint()`更改为可见。

尽管正如您所说，如果您将它们添加到 中`createGUI()`，那么它是可见的，因为当时它是您的 Swing 应用程序的静态添加，您首先添加了它，然后将其设置为可见。

尽管您的代码有一些漏洞，但我可以快速告诉您的最好的方法是您扩展`JPanel`for `ResultPanel`，尽管您从未使用过`ResultPanel`，因此我修改了您的代码以考虑问题`ResultPanel`。在这里尝试从您的示例中修改的代码：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class AddComponentExample
{
    private JFrame frame;
    private JPanel btmPanel;
    private ResultPanel resultPanel;

    public AddComponentExample()
    {
        resultPanel = new ResultPanel();
    }

    private void display()
    {
        frame = new JFrame("Adding Component Example");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        btmPanel = new JPanel();
        btmPanel.setBackground(Color.LIGHT_GRAY);
        btmPanel.setLayout(new FlowLayout());

        JButton blueSearch = new JButton("Search");
        blueSearch.setBackground(Color.WHITE);
        blueSearch.addActionListener(new ActionListener()
        {
            public void actionPerformed(ActionEvent ae)
            {
                if (!resultPanel.isShowing())
                {
                    resultPanel = resultPanel.createPanel();
                    frame.getContentPane().add(resultPanel, BorderLayout.CENTER);
                    frame.revalidate();  // For Java 7 and above.
                    // frame.getContentPane().revalidate(); // For Java 1.6 or below.
                    frame.repaint(); // required sometimes
                }
                else
                    System.out.println("Panel is already Visible");
            }
        });
        btmPanel.add(blueSearch);

        JButton blackChart = new JButton("Chart");
        blackChart.setBackground(Color.WHITE);
        //blackChart.addActionListener(this);
        btmPanel.add(blackChart);

        frame.getContentPane().add(btmPanel, BorderLayout.PAGE_END);
        frame.setSize(500, 500);
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
    }

    public static void main(String... args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                new AddComponentExample().display();
            }
        });
    }
}

class ResultPanel extends JPanel implements ActionListener {

    private static final long serialVersionUID = -7851502165390304971L;
    private JPanel textPanel;
    private JTextArea textDisplay;

    public ResultPanel() {
        textPanel = new JPanel(); 
        textDisplay = new JTextArea("Text Area:");
    }

    public ResultPanel createPanel() {

        textDisplay.setEditable(true);
        textPanel.setBackground(Color.LIGHT_GRAY);
        textPanel.setLayout(new BorderLayout());
        textPanel.add(textDisplay,BorderLayout.CENTER);
        add(textPanel);
        return this;
    }

    @Override
    public void actionPerformed(ActionEvent e) {

    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T07:13:06.013

`pack();`添加面板后只需调用。这将使 JFrame 显示更新。

```
 if (buttonString.equals("Search")) {
        ResultPanel rslt = new ResultPanel();
        this.getContentPane().add(rslt.createPanel(), BorderLayout.CENTER);
        pack();
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-10T12:00:33.727

使用**ActionListener**的*匿名类*

 *** * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-19T11:39:57.787

```
Use one line of code: this.revalidate();
This will validate and repaint the frame so that it can show the JPanel.

if (buttonString.equals("Search")) {
  ResultPanel rslt = new ResultPanel();
  this.getContentPane().add(rslt.createPanel(), BorderLayout.CENTER);
  this.revalidate();
} 
```**

# ruby - 如何使用 ruby /anemone/nokogiri 从网站上刮取产品

> ID：10671452
> 
> 赞同：-1
> 
> 时间：2012-05-20T07:02:09.773
> 
> 标签：ruby, nokogiri, scraper, anemone

是否可以使用 ruby​​ 中的 anemone 和 nokogiri 库从电子商务网站上抓取产品？

我了解如何使用 nokogiri 从每个产品页面提取我需要的数据，但我不知道如何让 anemone/nokogiri 抓取网站并抓取所有产品页面。

非常感谢朝着正确的方向推进

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T06:26:01.397

我弄清楚了我的问题。首先是海葵似乎没有爬过所有的页面。这是因为我想要的页面位于一个子域下，我必须告诉 anemone 与主域分开爬行。其次是我需要一种方法来确定哪些页面实际上是产品页面（因此需要被解析）。我通过解析我想要的字段之一（sku 编号）然后使用 RegEX 测试它是否是一个 sku 来做到这一点。

# asp.net - 我怎样才能理想地使用 iframe 和 asp.net 登录系统？

> ID：10671453
> 
> 赞同：0
> 
> 时间：2012-05-20T07:02:09.813
> 
> 标签：asp.net

我正在创建一个简单的 asp.net 站点，它的背面播放着收音机。我将收音机放在一个包含完整 iframe 的 aspx 页面上，我将所有其他 aspx 页面加载到该页面上，这样收音机就不会在我每次在网站上执行某些操作时刷新。当我退出站点时，收音机会增加两倍；这意味着不止一台收音机开始播放，如果我多次登录和注销，就会创建更多的收音机副本，使收音机的声音翻倍。有人可以解释当我从 asp.net 站点注销时到底发生了什么吗？有没有更好的方法让页面上的内容在用户浏览网站时不刷新？

谢谢，Y_Y

# c - ctype.h isdigit 不适用于 argv

> ID：10671454
> 
> 赞同：-2
> 
> 时间：2012-05-20T07:02:29.593
> 
> 标签：c, command-line-arguments, argv

好的。让我重新开始。我正在尝试编写一个程序来评估它的反向波兰符号参数。（即 ./program 2 4 +，计算结果为 6）。

```
int main(int argc, char *argv[]) 
{
   char oper[MAXOP];
   char *ptr;
   unsigned char c;
   double op2;
   while (--argc > 0 && ++argv != NULL) {
     ptr =  oper;
     if (isdigit(c = **argv)) 
     {
        while (isdigit(c = **argv++)) 
        {
            *ptr++ = c;
        }
        *ptr = '\0';
        push(atof(oper));
     } 
     else if (isalpha(c)) 
     {  
        while (isalpha(c = **argv++)) 
        {
            *ptr++ = c;
        }
                   ...
         ...
    }
} 
```

程序应该检查每个参数的第一个字符，如果它是字母或数字或运算符，但它总是结果是一个字母。

+++++++++ 更新 +++++++++++++

嗯，这很奇怪。它现在正在工作。在条件之前， `isdigit(c = **argv)`对于数字参数没有评估为真（如果其余代码错误则无关紧要）。现在可以了，但条件`isdigit(c = **argv++)`是错误的。

应该是`isdigit(c = *argv[0]++)`。

我有两个同名文件。它们位于不同的目录中，但包含相同的代码。在使用这个文件时，我必须在另一个目录中编译另一个文件，因此尽管对这个文件进行了编辑，但得到了相同的输出。我的错。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T07:09:41.633

您是否尝试过使用调试器并弄清楚会发生什么？

我的第一个猜测是这`**argv++`是错误的（你是在增加 argv 吗？*argv？**argv？即使它没有错，它只是令人困惑的代码）。切换到：

```
char *cur_arg = *argv; 
```

并检查 cur_arg （使用 cur_arg++ 来获取下一个字符，而不是 c=*cur_arg++ - 再次，令人困惑的代码）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T12:02:07.123

```
#include <stdio.h>
#include <ctype.h>

#define MAXOP 16

int main(int argc, char *argv[]) {
    char oper[MAXOP];
    char *ptr;
    unsigned char c;
    double op2;

    while(--argc > 0 && ++argv != NULL) {
        ptr = oper;
        if(isdigit(c = **argv)){
            while(isdigit(c = *(*argv)++)){
                *ptr++ = c;
            }
            *ptr = '\0';
            printf("DEBUG:%s\n", oper);
        } else if(ispunct(c)){//isalpha is alphabet check , '+' does not fit.
            while(ispunct(c = *(*argv)++)){
                *ptr++ = c;
            }
            *ptr = '\0';
            printf("DEBUG:%s\n", oper);
        }
    }
    return 0;
} 
```

# algorithm - 活动时间表

> ID：10671455
> 
> 赞同：-2
> 
> 时间：2012-05-20T07:03:11.050
> 
> 标签：algorithm

我有以下任务。有24小时的时间表。还有一些固定长度的事件。我有一个预定义长度的新事件（例如 1 小时 25 分钟）。任务是要知道 - 我可以在一天中插入多少次这个任务（这个任务不能与其他事件相交。

![在此处输入图像描述](../Images/54e37d995ec0b2bc765a858d3e4f248d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T08:26:57.260

我们的问题可能被认为有点简单，所以让答案也简单（在 Ruby 中）：

```
#! /usr/bin/ruby
DAY_START = 0
DAY_END = 24*60
# now, busy periods as array of size-2 arrays:
BUSY_PERIODS = [[9*60, 9*60+30], [18*60+30, 20*60]]
ADDITIONAL_EVENT_LENGTH = 1*60 + 25   # that is, 1 hour and  25 minutes
# in this simple program,
# time will be expressed as a number of minutes of the day
# for more advanced use, try to use "Time" class

# now let define a function to compute the list of free periods
# from a given list of busy periods:
def compute_free_periods( list_of_events )
  # at the begining of the calculation, our whole day is assumed free:
  free_periods = Array[ [ DAY_START, DAY_END] ]
  # now, one by one, let us take away the busy periods:
  list_of_events.each_with_object free_periods do | busy_period, free_periods |
    # we use 'each_with_object' version of 'each' enumerator
    # list of free_periods is passed in as an external object
    # so that we can gradually take each busy period away from it

    # let us first note the end time for the last free period
    # ( [-1] refers to the last element of the list of free periods,
    # subsequent [1] to the second element of the size-2 array )
    last_free_period_end = free_periods[-1][1]

    # and now, let us split this last free period into two by the
    # current busy period (busy periods assumed non-overlapping and
    # sorted in ascending order)

    # first, end time of the last free period is set to the beginning
    # of the busy period that we consider in this iteration:
    free_periods[-1][1] = busy_period[0]

    # then, additional free period is appended to the list of
    # free periods usind << operator, starting when the busy period ends:
    free_periods << [ busy_period[1], last_free_period_end ]
  end
end

# now, let us use the function we just defined:
free_periods = compute_free_periods( BUSY_PERIODS )

# Now, for each free period we will count how many times we can stuff
# in the desired additional event:
free_period_capacities = free_periods.map { |free_period|
  # we are using map function for this, which will return
  # an array of the same length as free_periods, having
  # performed prescribed modifications on each element:

  # first, we calculate how many minutes a free period has
  period_length = free_period[1] - free_period[0]
  # then, we will use whole-number division to get the number
  # of additional events that can fit in:
  period_length / ADDITIONAL_EVENT_LENGTH
  # (in Ruby, whole number division is the default behavior of / operator)
}

# and finally, we sum up the free period capacities for our new event:
total_events_possible = free_period_capacities.reduce( :+ )
# (summing is done elegantly by using reduce function with + operator)

# the last remaining thing we can do to consider program finished is to
puts total_events_possible # print the result on the screen 
```

如果你去掉注释并缩短它，那么程序就会变得很短：

```
#! /usr/bin/ruby
DAY_START, DAY_END = 0, 24*60
BUSY_PERIODS = [[9*60, 9*60+30], [18*60+30, 20*60]]
ADDITIONAL_EVENT_LENGTH = 1*60 + 25

def compute_free_periods( list_of_events )
  free_periods = Array[ [ DAY_START, DAY_END] ]
  list_of_events.each_with_object free_periods do | busy_period, free_periods |
    last_free_period_end = free_periods[-1][1]
    free_periods[-1][1] = busy_period[0]
    free_periods << [ busy_period[1], last_free_period_end ] end
end

free_periods = compute_free_periods( BUSY_PERIODS )
free_period_capacities = free_periods.map { |free_period|
  period_length = free_period[1] - free_period[0]
  period_length / ADDITIONAL_EVENT_LENGTH }
puts ( total_events_possible = free_period_capacities.reduce( :+ ) ) 
```

你看，没有那么多的算法。只是简单的编码。拿起例如。Ole Foul Zed 的教科书[Learn Ruby The Hard Way](http://ruby.learncodethehardway.org/book/)并从练习 0 开始阅读到最后。或者，您可以使用其他语言，例如[Python](http://learnpythonthehardway.org/)。Ole Zed 具有教学天赋。如果您喜欢这种体验，请不要忘记将其作为电子书购买。

# java - 即使应用程序被强制停止也重新启动服务并且即使在关闭应用程序后也保持在后台运行服务如何？

> ID：10671460
> 
> 赞同：18
> 
> 时间：2012-05-20T07:04:10.600
> 
> 标签：java, android, android-service

我正在尝试在后台运行服务。我的应用程序所做的是当用户选中复选框然后服务启动以及未选中时服务停止。哪个工作得很好。但问题是当我从任务管理器关闭应用程序时，它也会停止服务。我想要的是即使在任务管理器关闭后也能保持服务运行。然后，停止该服务的唯一方法是用户自己通过取消选中该框。

我怎样才能做到这一点？

这是我的代码

我的主要活动

```
public class SampleServiceActivity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    final CheckBox cb = (CheckBox) findViewById(R.id.checkBox1);

    cb.setOnCheckedChangeListener(new OnCheckedChangeListener() {
        public void onCheckedChanged(CompoundButton buttonView,
                boolean isChecked) {

            if(isChecked) {
                Toast.makeText(getBaseContext(), "Checked", Toast.LENGTH_LONG).show();
                startService(new Intent(getBaseContext(), MyService.class));
            } else {
                Toast.makeText(getBaseContext(), "Unchecked", Toast.LENGTH_LONG).show();
                stopService(new Intent(getBaseContext(), MyService.class));
            }
        }

    });
}
} 
```

我的服务等级

```
public class MyService extends Service {
Notify n = new Notify();
@Override
public IBinder onBind(Intent arg0) {
    // TODO Auto-generated method stub
    return null;
}

public int onStartCommand(Intent intent, int flags, int startId) {
    Toast.makeText(this, "Service Started", Toast.LENGTH_LONG).show();
    n.initNotification(getBaseContext(), true);
    return START_STICKY;
}

//method to stop service
public void onDestroy() {
    super.onDestroy();
    n.cancelNotification(getBaseContext());
    Toast.makeText(this, "Service Stopped", Toast.LENGTH_LONG).show();
}
} 
```

**更新**

我们怎样才能让这个服务像 gtalk 服务一样运行呢？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-22T18:36:28.730

我不确定您指的是哪个“任务管理器”，因为不同的“任务管理器”会有不同的行为，所以我的答案基于用户转到“设置”-->“管理应用程序”和-->“强制停止应用程序”时的操作android给了他。

假设您的服务作为进程的一部分运行，并且如果用户强制停止您的进程，则在用户**手动**启动您之前，您将无法再次运行该服务。这对于 3.0 及更高版本特别有效*（*检查**您**的）。当您认为有一个应用程序始终保持服务启动并以某种方式让用户烦恼时，这似乎也是合乎逻辑的。因此，当用户在应用程序上点按 (:) force-stops) 时，它**不应重新启动**服务以继续对用户进行窃听。

******例如，想象一下如果您可以创建应用程序，该应用程序通过持有唤醒锁在您的处理器时间吃掉，并且您无法杀死它们，会发生什么。这将是可怕的和巨大的安全灾难。******

******因此，在用户启动您的一项活动之前，您**将无法**以任何方式重新启动您的服务。******

****您也不能禁用强制停止按钮 AFAIK。您应该认为，除了您的应用程序和（在有限的范围内）您被授予访问权限的资源之外，设备上的任何内容都不是您可以控制的。****

****最后，如果您想强制停止，即使是 gtalk 应用程序也会屈从于您的意愿。只有当您使用 Gtalk 或其他使用 gtalk 服务的应用程序（例如 PUSH Gmail）时，它才会启动（适用于 gtalk 不是固件一部分的手机）。还可以在这里查看**Android C2DM**：****

 ****[https://stackoverflow.com/a/11238779/1218762](https://stackoverflow.com/a/11238779/1218762)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-09-02T06:44:43.447

我认为这个链接会对你有所帮助。
[在管理应用程序中禁用强制停止按钮](https://stackoverflow.com/questions/11560185/disable-force-stop-button-in-manage-application/17946961#17946961)

它禁用包安装程序设置中的强制停止按钮，因此没有人可以停止您的应用程序。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-22T00:14:47.247

你不能阻止你的服务在任何情况下都被杀死。但是，您可以要求系统重新启动它。有两种情况：（1）进程因某种异常原因死掉（2）手机重启。在前者中，START_STICKY 或 START_REDELIVER_INTENT 用于重新启动服务。在后者中，您需要为 android.intent.action.BOOT_COMPLETED 添加一个 BroadcastReceiver。

您的代码从 onStartCommand 返回 START_STICKY，因此您选择了服务重启路径之一：“如果此服务的进程在启动时被终止（从 onStartCommand(Intent, int, int) 返回后），则将其留在已启动状态，但不保留此交付意图。稍后系统将尝试重新创建服务..."

“这种模式适用于将明确启动和停止以运行任意时间段的事物，例如执行背景音乐播放的服务。”

您也可以使用 START_REDELIVER_INTENT。

请注意，如果您的服务正在做任何重要的工作，它需要在后台线程中运行。

[http://developer.android.com/reference/android/app/Service.html#START_STICKY](http://developer.android.com/reference/android/app/Service.html#START_STICKY)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-20T08:16:32.220

我不完全确定您可以防止您的应用程序被 TaskManager 关闭。如果您考虑一下，这样做是有道理的。想象一下，您有一个应用程序无法响应用户输入，并且也无法响应被任务管理器杀死。不好。但是，我发现[这个](https://stackoverflow.com/questions/2681499/android-how-to-auto-restart-application-after-its-been-force-closed)问题与您的问题相似。您也可以让系统自动重新启动您的服务，如此处所述[（在该页面上向下滚动一点到“启动服务”之前](http://developer.android.com/guide/topics/fundamentals/services.html#ExtendingService)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-09-02T01:53:20.263

如果你想第一次启动一个隐藏的应用程序，请使用我的方法我制作一个像这样的透明启动器活动

```
<activity android:name=".MainActivity"
    android:label="@string/app_name"
    android:theme="@style/Theme.Transparent"
    android:excludeFromRecents="true"
    >
    <intent-filter>
        <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
    </intent-filter>
</activity> 
```

所以我通过将此代码放在 oncreat() [代码] 中使应用程序隐藏在启动器中

```
PackageManager p = getPackageManager();
    ComponentName componentName = new ComponentName(this, MainActivity.class); // activity which is first time open in manifiest file which is declare as <category android:name="android.intent.category.LAUNCHER" />
p.setComponentEnabledSetting(componentName,PackageManager.COMPONENT_ENABLED_STATE_DISABLED, PackageManager.DONT_KILL_APP); 
```

因此，我使用此代码在启动器上显示应用程序图标，并使其能够在使用广播接收器启动的服务类和网络连接广播接收器类中运行（autostart.java 和 networkConnectinCheck.java）：

```
PackageManager p = context.getPackageManager();
    ComponentName componentName = new ComponentName(context, MainActivity.class);
    p.setComponentEnabledSetting(componentName, PackageManager.COMPONENT_ENABLED_STATE_ENABLED, PackageManager.DONT_KILL_APP); 
```

现在我可以通过用户的手第一次运行应用程序，之后我可以随时使用我的接收器来午餐应用程序。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-23T18:54:27.137

让您`Service`在单独的进程中运行。[这个博客](http://www.vogella.com/articles/AndroidServices/article.html#service_overview)中有一个很好的教程。

您可以`android:process`在标签中指定属性`<Service>`以使您的应用程序在自己的进程中运行。

```
<service
android:name="MyServiceName"
android:process="my_process" 
android:icon="@drawable/icon"
android:label="@string/service_name"
>
</service> 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-05-25T06:30:16.490

您可以尝试在服务的 onDestroy 事件上重新启动服务。使用一些标志来查找服务是否被用户关闭或其强制关闭。

请注意，不能保证每次都会调用 onDestroy。****

# asp.net - 在 ASP.NET 中创建 RSS 阅读器

> ID：10671462
> 
> 赞同：0
> 
> 时间：2012-05-20T07:04:32.253
> 
> 标签：asp.net, rss-reader

我使用 VS2010，C# 我想从其他站点读取 RSS 内容并将它们显示在我的站点中，目前此过程是手动执行的（站点管理员搜索其他站点并在新闻项目中复制/粘贴相关内容！），但我想做它是自动的，我认为最好的解决方案是 RSS，我尝试了几个示例代码，但都没有工作，有没有简单的方法在 ASP.NET 中实现 RSS 阅读器？我在这里有什么选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T08:41:19.050

## 阅读 RSS 链接

```
public void ReadDoc(XmlDocument rssDoc)
{
    XmlNode nodeRss = null;
    XmlNode nodeChannel = null;
    XmlNode nodeItem = null;
    try
    {
        if (rssDoc == null)
        {
            return;
        }

        // Loop for the <rss> tag
        for (int i = 0; i < rssDoc.ChildNodes.Count; i++)
        {
            // If it is the rss tag
            if (rssDoc.ChildNodes[i].Name == "rss")
            {
                 nodeRss = rssDoc.ChildNodes[i];
                 break;
            }
        }

        if (nodeRss == null)
        {
            return;
        }
        for (int i = 0; i < nodeRss.ChildNodes.Count; i++)
        {
            if (nodeRss.ChildNodes[i].Name == "channel")
            {
                nodeChannel = nodeRss.ChildNodes[i];
                break;
            }
        }

        if (nodeChannel == null)
        {
            return;
        }

        // Loop for the <title>, <link>, <description> and all the other tags
        for (int i = 0; i < nodeChannel.ChildNodes.Count; i++)
        {
            if (nodeChannel.ChildNodes[i].Name == "item")
            {
                nodeItem = nodeChannel.ChildNodes[i];
                if (nodeItem["title"] != null){}
                if (nodeItem["description"] != null){}
                if (nodeItem["pubDate"] != null){}
            }
        }
    }
    catch (Exception)
    {
        throw;
    }
    finally
    {
        nodeRss = null;
        nodeChannel = null;
        nodeItem = null;
    }
} 
```

* * *

```
public void CreateRSS(String Path)
{
    XmlDocument doc = null;
    XmlTextReader rssReader = null;
    Label doclbl = null;
    Label snolbl = null;
    try
    {
        try
        {
            rssReader = new XmlTextReader(Path);
        }
        catch (Exception)
        {
            return;
        }

        if (rssReader == null)
        {
            return;
        }

        doc = new XmlDocument();
        try
        {
            doc.Load(rssReader);
        }
        catch (Exception)
        {
            return;
        }

        if (doc == null)
        {
            return;
        }

        ReadDoc(doc);
    }
    catch (Exception)
    {
        throw;
    }
    finally
    {
        doc = null;
        rssReader = null;
        doclbl = null;
        snolbl = null;
    }
} 
```

# php - 无法通过 php curl 验证 TMG

> ID：10671465
> 
> 赞同：1
> 
> 时间：2012-05-20T07:04:49.080
> 
> 标签：php, curl, proxy, authorization

我想通过代理在网络中的 php 中通过 curl 打开网页。但不幸的是，TMG 服务器无法对我进行身份验证并返回 407 错误。这是我的代码：

```
$ch = curl_init("http://google.com");;
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_PROXY, "http://192.168.4.10:8080");
curl_setopt($ch, CURLOPT_PROXYPORT,8080);
curl_setopt($ch, CURLOPT_PROXYUSERPWD, "8909103:uvixqr");
curl_setopt($ch, CURLOPT_USERAGENT, 'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.0.8) Gecko/2009032609 Firefox/3.0.8');
//curl_setopt($ch, CURLOPT_HEADER, 1);
$x = curl_exec($ch);
var_dump($x);
curl_close($ch);
```

并返回以下错误：

```
网络访问消息：页面无法显示
说明：您尝试访问的页面有问题，无法显示。

尝试以下操作：
刷新页面：单击刷新按钮再次搜索页面。超时可能是由于 Internet 拥塞而发生的。
检查拼写：检查您输入的网页地址是否正确。地址可能打错了。
从链接访问：如果有指向您要查找的页面的链接，请尝试从该链接访问该页面。
如果您仍然无法查看请求的页面，请尝试联系您的管理员或帮助台。

技术信息（支持人员）
错误代码：407 需要代理身份验证。Forefront TMG 需要授权才能完成请求。拒绝访问 Web 代理过滤器。(12209)
IP地址：192.168.4.10
日期：2012 年 5 月 20 日上午 6:51:36 [格林威治标准时间]
服务器：ISA3.ee.kntu.local
来源：代理
```

问题出在哪里，我应该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T07:12:51.007

curl TMG (ISA3) 认证：

**url_setopt($ch, CURLOPT_PROXYAUTH, CURLAUTH_NTLM);**

```
curl_setopt($ch, CURLOPT_PROXY, "http://proxyserver:8080");
curl_setopt($ch, CURLOPT_PROXYPORT, 8080);
curl_setopt ($ch, CURLOPT_PROXYUSERPWD, "yourdomain.com\username:password"); 
```

有用 ;）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T07:08:56.960

您正在设置代理端口两次：

```
curl_setopt($ch, CURLOPT_PROXY, "http://192.168.4.10:8080");
curl_setopt($ch, CURLOPT_PROXYPORT, 8080); 
```

去掉 CURLOPT_PROXY 设置中的 :8080 ，并将 CURLOPT_PROXYPORT 值放在引号中：

```
curl_setopt($ch, CURLOPT_PROXY, "http://192.168.4.10");
curl_setopt($ch, CURLOPT_PROXYPORT,"8080"); 
```

将其设置为详细模式也很有帮助：

```
curl_setopt($ch, CURLOPT_VERBOSE, 1); 
```

# iphone - 检查时间和日期是否在特定日期和时间之间

> ID：10671468
> 
> 赞同：5
> 
> 时间：2012-05-20T07:05:22.050
> 
> 标签：iphone, objective-c, ios, nsdate, nsdateformatter

我有 3 个变量；

开始日期 -`Wed Apr 12` 结束日期 -`Wed Jun 11` 时间持续时间 - `11.00 am from 11.00 pm`。（这是一个字符串，11AM 是开始时间，12PM 是结束时间）

1.) 现在，我需要获取当前日期和时间 ( `[NSDate date]`) 并检查当前日期是否介于`startDate`and之间`endDate`，然后检查当前时间是否介于`timeDuration`(as in between `11.00am from 11.00pm`)

2.）如果当前时间在持续时间之间（如在之间`11.00 am from 11.00 pm`）我需要计算剩余时间到以下场景；

a.) 如果时间是上午 10 点，我需要计算到开始时间的时间，即`11.00am`。（答案是`1 hour`）。

b.）如果时间是`11.45AM`，由于时间大于开始时间（这是`11.00am`）我需要计算剩余时间到结束时间（这是`11.00pm`）。

c.) 如果时间是`11.45pm`，由于时间大于结束时间（即`11.00pm`），我需要打印一个 NSLog 说“超时”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T07:17:10.827

您可以使用`- (NSComparisonResult)compare:(NSDate *)anotherDate`
比较当前日期来开始日期和结束日期。

```
NSComparisonResult

enum {
   NSOrderedAscending = -1,
   NSOrderedSame,
   NSOrderedDescending
}; 
```

例子：

```
NSDate *currentDate = [NSDate date];  
if (([currentDate compare:startDate ] == NSOrderedDescending) &&
    ([currentDate compare:endDate ] == NSOrderedAscending)) {

   //currentDate is between startDate and endDate.
} 
```

或通过[bbum](https://stackoverflow.com/users/25646/bbum)查看[此](https://stackoverflow.com/a/1988179/944634)解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T04:06:00.400

基本思想是将您的`startDate`and`endDate`转换为实际`NSDate`的 's 并将它们与当前日期进行比较。然后，如果当前日期在适当的范围内，则将开始和结束时间添加到当前日期，以得出开始和结束时间的特定时间点。一旦你有了这些日期，你就可以使用 NSDate 的`compare`和 `timeIntervalSinceDate`方法来获取你需要的值：

```
// NOTE:  NO error checking is being done in this code.

// Starting variables  
NSString *startDateString     = @"Wed Apr 12";
NSString *endDateString       = @"Wed Jun 11";
NSString *timeDurationString = @"11.00 am from 11.00 pm";

// Get the current date
NSDate *currentTime        = [NSDate date];
NSCalendar *cal            = [NSCalendar currentCalendar];
NSDateComponents 
         *currentDateComps = [cal components:NSYearCalendarUnit|NSMonthCalendarUnit|NSDayCalendarUnit 
                                    fromDate:currentTime];

// Add the current year onto our date string
NSString *startDateStringWithYear = [NSString stringWithFormat:@"%@ %d", startDateString, currentDateComps.year];
NSString *endDateStringWithYear   = [NSString stringWithFormat:@"%@ %d", endDateString, currentDateComps.year];

// Calculate NSDate's for start/endDate
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"EEE MM dd yyyy"];
NSDate *startDate = [formatter dateFromString:startDateStringWithYear];
NSDate *endDate   = [formatter dateFromString:endDateStringWithYear];

// Return if today's date is not between the start and end dates
if ([startDate compare:currentTime] == NSOrderedDescending || 
    [endDate compare:currentTime] == NSOrderedAscending) 
{
    return;
}

// Break the timeDurationString into separate words
NSArray *timeDurationStringWords = [timeDurationString componentsSeparatedByString:@" "];

// Calculate NSDate's for the start time for today:
NSString *startTimeString = [timeDurationStringWords objectAtIndex:0];
currentDateComps.hour     = [[startTimeString substringToIndex:2] intValue];
currentDateComps.minute   = [[startTimeString substringFromIndex:3] intValue];
if ([[timeDurationStringWords objectAtIndex:1] isEqualToString:@"pm"]) 
{
    currentDateComps.hour += 12;
}
NSDate *startTime         = [cal dateFromComponents:currentDateComps];

// And now the end time for today
NSString *endTimeString   = [timeDurationStringWords objectAtIndex:3];
currentDateComps.hour     = [[endTimeString substringToIndex:2] intValue];
currentDateComps.minute   = [[endTimeString substringFromIndex:3] intValue];
if ([[timeDurationStringWords objectAtIndex:4] isEqualToString:@"pm"]) 
{
    currentDateComps.hour += 12;
}
NSDate *endTime           = [cal dateFromComponents:currentDateComps];

// Now we have what we really want:  A specific start time, current time, and end time.

// Check to see if we are waiting to start:
if ([startTime compare:currentTime] == NSOrderedDescending) {
    NSTimeInterval minutesToStartTime = [startTime timeIntervalSinceDate:currentTime] / 60;
    NSLog(@"Start time is in %02d+%02d", (int)(minutesToStartTime / 60), (int)minutesToStartTime % 60);
    return;
}

// Check to see if we are late:
if ([endTime compare:currentTime] == NSOrderedAscending) {
    NSLog(@"Time Exceeded");
    return;
}

// We are between the two times:
NSTimeInterval minutesToEndTime = [endTime timeIntervalSinceDate:currentTime] / 60;
NSLog(@"End time is in %02d+%02d", (int)(minutesToEndTime / 60), (int)minutesToEndTime % 60); 
```

# javascript - jquery试图使用按键事件删除突出显示的元素

> ID：10671470
> 
> 赞同：1
> 
> 时间：2012-05-20T07:05:29.383
> 
> 标签：javascript, jquery

我正在使用以下代码突出显示该元素：

```
$(".ss").live({ 
    mouseenter: function () { HighLight(this) }, 
    mouseleave: function () { OffLight(this); }, 
      keypress: function () { KeyOperation(this); }
});

function HightLight(s)
{
  $(s).css({border : "1px solid red"});
}
function OffLight(s)
{
  $(s).css({border : "0"});
}
function KeyOperation(s)
{
  $(s).remove();
} 
```

**KeyOperation()**函数未在按键时执行。

在这里，当用户突出显示任何元素时，我正在尝试这样做，并且在突出显示时，如果他按下`Delete key`，则应该删除该元素。但这不起作用，谁能告诉我我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T07:15:03.090

我相信这就是你所追求的。将鼠标悬停在任何`.ss`元素上都会添加一个临时类。如果用户在任何时候按下键 46，该类的项目将被删除。请参阅下面的工作小提琴。

```
// Bind to a closer parent if possible
$(document)
    .on("keyup", function(e){
        if ( e.which === 46 ) $(".removeMe").remove(); 
    })
    .on("mouseenter mouseleave", ".ss", function(f){
        $(this).toggleClass("removeMe", f.type === "mouseenter" );
    }); 
```

从这个例子中可以清楚地看出，`$.live`不再鼓励事件委托。从这里开始使用`$.on`。

小提琴：http: [//jsfiddle.net/YS7jH/2/](http://jsfiddle.net/YS7jH/2/)

# image - 如何使用hibernate将图像存储到postgres数据库中

> ID：10671471
> 
> 赞同：4
> 
> 时间：2012-05-20T07:05:31.677
> 
> 标签：image, hibernate, postgresql, store, hibernate-mapping

我想使用 hibernate 和 Java 将图像存储到数据库中。我正在使用 postgres 数据库

我尝试`bytea`使用数据类型将图像和`byte[]`数据类型存储在 hibernate pojo 中。

我使用了以下代码，

```
CREATE TABLE photo
(
  "photo_name" bytea
)
WITH (OIDS=FALSE);
ALTER TABLE photo OWNER TO postgres; 
```

休眠波乔

```
public class PhotoEntity {

byte[] name;

public byte[] getName() {
    return name;
}

public void setName(byte[] name) {
    this.name = name;
} 
```

}

但它在映射时会出错。
请给我任何参考来做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T10:24:53.200

如果您通过 JPA2 使用 Hibernate，则可能需要`@Lob`注释，但我不确定这是否适用于`oid`或`bytea`字段。看：

[字节 [] 的正确休眠注释](https://stackoverflow.com/questions/3677380/proper-hibernate-annotation-for-byte)

还有一篇[Hibernate 开发博客文章](http://in.relation.to/15492.lace)，内容丰富。

如果您通过 XML 映射或它自己的注释方言使用 Hibernate，请显示您的确切代码和错误消息。

[另请参阅此处](https://stackoverflow.com/questions/3677380/proper-hibernate-annotation-for-byte)的答案。

# php - Yii 没有使用 CController::redirect() 函数正确重定向

> ID：10671477
> 
> 赞同：0
> 
> 时间：2012-05-20T07:06:32.617
> 
> 标签：php, yii

在我正在创建的一个 yii 站点中，我有一个带有 url 的页面，该页面以`http://localhost/administrator/restaurant/list` 表格格式显示餐厅列表以及一个删除按钮。删除按钮指向`http://localhost/administrator/restaurant/delete/<id>`。

我的`actionDelete`控制器如下：

```
public function actionDelete(){
        $model = Restaurants::model()->findByAttributes(
                                        array(
                                            'id'=>$_GET['id'],
                                            'clientId'=>Yii::app()->user->clientId
                                        ));
        $model->delete();
        Yii::app()->user->setFlash('success',Yii::t('error','Restaurant has been deleted successfully'));
        $this->redirect('restaurant/list',true);
    } 
```

但是在单击删除按钮时，该行已从数据库中成功删除，但不是重定向到`http://localhost/administrator/restaurant/list`页面，而是重定向到`http://localhost/administrator/restaurant/delete/restaurant/list`并显示错误。我实现重定向功能的方式有问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-20T07:11:50.617

改用数组路由：

```
$this->redirect(array('restaurant/list'), true); 
```

* * *

使用 GET 删除是一个非常糟糕的主意，因为浏览器甚至可以在您单击链接之前预取链接。对于这样的任何场景，您都应该使用 POST。

# javascript - 为什么点运算符不能访问数组元素？

> ID：10671481
> 
> 赞同：2
> 
> 时间：2012-05-20T07:07:22.207
> 
> 标签：javascript

这个问题是关于 JavaScript 语言基础的。为什么我们可以使用点 ( `.`) 运算符来访问对象的元素，但不能访问数组元素？

换句话说，为什么`myArray.0`在 JavaScript 中无效？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T07:08:53.513

使用点符号访问的 javascript 属性名称不能以数字开头。这只是 javascript 语法规则/语法的一部分。因此，即使点表示法可以用于数组，它也不会，因为数组索引是数字，并且以数字开头的属性名称不能用点表示法访问。

对于数组，您显然可以使用：

```
myArray[0] 
```

但是，这也适用于以数字开头的对象属性，例如：

```
var x = {"12": "foo"};
alert(x["12"]);     // foo 
```

而且，你不能这样做：

```
alert(x.12) 
```

即使当`x`是一个对象并且`"12"`是该对象的合法属性。您必须使用`x["12"]`才能访问它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T07:09:57.817

为什么？因为那是javascript语法。就如此容易。

你`[x]`用来获取 x 索引处的元素不是`.x`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T07:18:27.710

点表示法中的属性名称必须是有效的 JavaScript id。任何不是有效 id 的对象属性名称都不能在点表示法中使用，无论是在对象还是数组中。对于此类属性名称，如果属性名称是字符串或转换为字符串，则必须使用 [] 表示法。

请注意，您可以将点节点与数组一起使用来获取其长度，例如，因为“长度”是一个有效的 id。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-20T07:22:22.100

所以只是为了扩展 jfriend00 的回复-以下内容将起作用，因为属性名称以字母而不是数字开头

```
var test = new Array();
test['zero'] = "Testing";
alert(test.zero); // Does work 
```

# asp.net-mvc - MVC4部分视图未在回发时将值加载到“容器”模型中

> ID：10671482
> 
> 赞同：9
> 
> 时间：2012-05-20T07:07:23.780
> 
> 标签：asp.net-mvc

所以我想创建一个可重复使用的视图来编辑地址、电话号码等。

我设置了一个包含所有所需模型的容器模型。创建了一个局部视图来处理表单的地址部分

但是当它回发到控制器时，客户数据来自主页，但部分视图中的任何内容都不存在（使用 MVC4/Razor）

容器模型

```
public class CustomerViewModel {
    public Customer CustomerData { get; set; }
    public Address MainAddress { get; set; }
    public Address ShippingAddress { get; set; }
    public Phone MainPhone { get; set; }
    public Phone Fax { get; set; }
} 
```

控制器：

```
public ActionResult Edit(int id = 0) {
    CustomerViewModel model = new CustomerViewModel();
    model.CustomerData = Customer.FetchById(id);
    if (model.CustomerData == null) return HttpNotFound();

    //... load addresses, phones

    return View(model);
}

[HttpPost]
public ActionResult Edit(CustomerViewModel model) {
    if (ModelState.IsValid) {
        ///... save everything here - model has CustomerData, but nothing else
    }

    return View(model);
} 
```

主视图：

```
@model ProjectName.WebSite.Models.CustomerViewModel

.....

@using (Html.BeginForm()) {
    @Html.ValidationSummary(true)

    <fieldset>
        <legend>Customer</legend>
        @Html.HiddenFor(model => model.ModelCustomer.CustomerId)

        <div class="editor-label">
            @Html.LabelFor(model => model.ModelCustomer.CompanyName)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.ModelCustomer.CompanyName)
            @Html.ValidationMessageFor(model => model.ModelCustomer.CompanyName)
        </div>

        ...        

        @Html.Partial("Address", Model.MainAddress, new ViewDataDictionary {
            TemplateInfo = new System.Web.Mvc.TemplateInfo { HtmlFieldPrefix = "Main" }
        })

        ...        

        <p>
            <input type="submit" value="Save" />
        </p>
    </fieldset>
}
..... 
```

地址部分视图：

```
@model ProjectName.Business.Address

<fieldset style="margin-top:  20px;">
    <legend>@(ViewData["label"] ?? "Address")</legend>

    @Html.HiddenFor(model => model.AddressId)

    <div class="editor-label">
        @Html.LabelFor(model => model.Street)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.Street)
        @Html.ValidationMessageFor(model => model.Street)
    </div>
    ...
</fieldset> 
```

我在这里做错了什么 - 为什么我不能从部分视图中填充模型？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-18T04:53:06.513

**解决了！**我想到了！睡不着，一不小心就睡着了！

在视图中，您必须确保 HtmlFieldPrefix 使用与复合模型类中相同的名称，因此由于我将两个地址命名为“MainAddress”和“ShippingAddress” - 只需确保在设置时使用相同的名称部分：

```
@Html.Partial("Address", Model.MainAddress, new ViewDataDictionary(Html.ViewDataContainer.ViewData) {
    TemplateInfo = new System.Web.Mvc.TemplateInfo { HtmlFieldPrefix = "MainAddress" }
})

@Html.Partial("Address", Model.ShippingAddress, new ViewDataDictionary(Html.ViewDataContainer.ViewData) {
    TemplateInfo = new System.Web.Mvc.TemplateInfo { HtmlFieldPrefix = "ShippingAddress" }
}) 
```

# html - div 的大小动态到文本 - 清除两者都不起作用

> ID：10671484
> 
> 赞同：0
> 
> 时间：2012-05-20T07:07:39.810
> 
> 标签：html, css

我希望文章的 div（白色内容和右侧灰色列）将随着白色文本的高度而扩展。

我试图添加`clear:both`到#bodycont，但它没有帮助

我怎样才能使它灵活？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T08:02:00.510

`clear: both;` is to be added AFTER using floats: placing it on `#bodycont` would be useful if your header had floats (I didn't check). Placing it on the parent will do nothing (though there're other methods where the selector begins with this parent, namely `parent:after { /* strange bunch of instructions working in IE8 and above */ }`, but that's not the parent itself)

Some general instructions:

*   don't ever use the `height` property on columns or layout blocks.
    You don't know how much content will go there, on another similar page or in 1 year.
    You don't know if some visitors are [zooming text](http://www.w3.org/TR/WCAG-TECHS/F69.html) a lot or on a smartphone ([related](http://www.w3.org/TR/WCAG-TECHS/G179.html)).
    You can have a layout without a single use of `height` property: particular cases need `min-height` when graphical elements are to be displayed entirely (when there's a nice background of known height that shouldn't be cropped), general case is using methods that don't need the height of elements to display properly.
*   add `clear: both` on the element that follows floating columns or on the sibling of an element that contain floats. In your case the footer.
*   Floating an element means its content is removed from the (HTML) flow. It doesn't "count" anymore for determining the height of a parent, it's not really there. Thus, an element that only contain floats have an height of ... 0\. Everything was removed from the flow, no height. That'as annoying if you had a background on this parent as it won't display anymore... but you still want that background to have the same height as the tallest of the floating children. A (not so) modern clearfix is described by Thierry Koblentz here: [http://www.yuiblog.com/blog/2010/09/27/clearfix-reloaded-overflowhidden-demystified/](http://www.yuiblog.com/blog/2010/09/27/clearfix-reloaded-overflowhidden-demystified/) (the `:before` part is only there for consistent collapsing margins, you only need the `:after` along with the parent, err betweeen the parent and the next element, that's where `:after` is)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T12:32:35.907

解决方案是添加`display:table`和删除高度。因为允许我根据文本显示高度。

很简单！

# php - php中的条形码有什么用？

> ID：10671486
> 
> 赞同：0
> 
> 时间：2012-05-20T07:08:40.067
> 
> 标签：php, gd

我看过很多教程和文章，展示了如何使用 Gd 库和 Pear 使用 Php 生成条形码。但坦率地说，我不知道生成它们有什么用。

就像在零售商店中一样，条码被打印在纸上以扫描并获取特定产品的详细信息。但是网络上的条形码有什么用？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T07:50:38.320

我为售票的商店建立了几个网站。我们使用 GD 为诸如缆车票、电影票、机票之类的东西生成条形码；几乎任何需要属于特定人的票。

可以使用条形码扫描仪扫描条形码，然后将其标记为在数据库中使用。我猜，这些条码就像任何其他条码一样被使用，它们只是使用 PHP 生成的。

# c++ - -Os 的更多警告

> ID：10671492
> 
> 赞同：2
> 
> 时间：2012-05-20T07:09:05.807
> 
> 标签：c++, gcc, compiler-construction, warnings, warning-level

这个节目

```
int main()
{
    int a, b;
    a = b;
    return 0;
} 
```

如果你编译它，编译时不会出现警告或错误

`g++ -Wall test.cpp`

但是，如果您在优化的情况下编译它，即使在相同的警告级别

`g++ -Wall -Os test.cpp`

然后它会开始抱怨你正在使用未初始化的变量！
（注意：实际程序稍长，并没有像这里的这个小例子那样清楚地暴露问题。）

我试过用谷歌搜索，但要么我没有使用正确的搜索词，要么这不是一个已知的现象。无论如何，我的问题基本上是

*   为什么编译器会用 -Os 而不是用 -O0 给出这个警告，即使是在相同的警告级别？（如果有的话，对于这个小例子，我希望它是相反的，因为可以完全优化变量，然后问题就会消失。）
*   是否有任何其他编译器选项会触发这样的意外警告？因为我有兴趣让我的程序没有错误，所以我喜欢看到所有的程序！
*   这是一个已知的功能吗？如果是这样，我在哪里可以找到它？我确实尝试过搜索。
*   或者这只是我特定版本的编译器（gcc 4.3.2-1.1，Linux，32 位）中的一个小故障？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T07:37:32.497

编译器需要进行额外的检查才能执行一些优化，这会导致它发出额外的警告。[在An Introduction to GCC](http://www.network-theory.co.uk/docs/gccintro/gccintro_52.html)的相关章节中有对其的简要说明。

顺便说一句，在我的平台（x86 上的 32 位 ubuntu 12.04）上，代码会使用 gcc 4.6.3、gcc 4.7.0 和 gcc 4.8 快照生成警告：

> uninitialized.cpp：在函数'int main（）'中：uninitialized.cpp:3:9：警告：变量'a'设置但未使用[-Wunused-but-set-variable] uninitialized.cpp:4:10：警告: 'b' 在此函数中未初始化使用 [-Wuninitialized]

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T07:15:28.943

对于更高的优化级别，编译器会**注意到**您将非初始化变量等同起来。所以警告。

# java - 使用 org.apache.http 发送带有 SOAP 操作的 HTTP Post 请求

> ID：10671494
> 
> 赞同：20
> 
> 时间：2012-05-20T07:09:24.677
> 
> 标签：java, apache, http, post, httpwebrequest

我正在尝试使用 org.apache.http api 编写带有 SOAP 操作的硬编码 HTTP Post 请求。我的问题是我没有找到添加请求正文的方法（在我的情况下 - SOAP 操作）。我会很高兴得到一些指导。

```
import java.net.URI;
import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.entity.StringEntity;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.impl.client.RequestWrapper;
import org.apache.http.protocol.HTTP;

public class HTTPRequest
{
    @SuppressWarnings("unused")
    public HTTPRequest()
    {
        try {
            HttpClient httpclient = new DefaultHttpClient();
            String body="DataDataData";
            String bodyLength=new Integer(body.length()).toString();
            System.out.println(bodyLength);
//          StringEntity stringEntity=new StringEntity(body);

            URI uri=new URI("SOMEURL?Param1=1234&Param2=abcd");
            HttpPost httpPost = new HttpPost(uri);
            httpPost.addHeader("Test", "Test_Value");

//          httpPost.setEntity(stringEntity);

            StringEntity entity = new StringEntity(body, "text/xml",HTTP.DEFAULT_CONTENT_CHARSET);
            httpPost.setEntity(entity);

            RequestWrapper requestWrapper=new RequestWrapper(httpPost);
            requestWrapper.setMethod("POST");
            requestWrapper.setHeader("LuckyNumber", "77");
            requestWrapper.removeHeaders("Host");
            requestWrapper.setHeader("Host", "GOD_IS_A_DJ");
//          requestWrapper.setHeader("Content-Length",bodyLength);          
            HttpResponse response = httpclient.execute(requestWrapper);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-05-22T19:46:45.937

这是一个完整的工作示例：

```
import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpPost; 
import org.apache.http.entity.StringEntity;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.util.EntityUtils;

public void callWebService(String soapAction, String soapEnvBody)  throws IOException {
    // Create a StringEntity for the SOAP XML.
    String body ="<?xml version=\"1.0\" encoding=\"UTF-8\"?><SOAP-ENV:Envelope xmlns:SOAP-ENV=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:ns1=\"http://example.com/v1.0/Records\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:SOAP-ENC=\"http://schemas.xmlsoap.org/soap/encoding/\" SOAP-ENV:encodingStyle=\"http://schemas.xmlsoap.org/soap/encoding/\"><SOAP-ENV:Body>"+soapEnvBody+"</SOAP-ENV:Body></SOAP-ENV:Envelope>";
    StringEntity stringEntity = new StringEntity(body, "UTF-8");
    stringEntity.setChunked(true);

    // Request parameters and other properties.
    HttpPost httpPost = new HttpPost("http://example.com?soapservice");
    httpPost.setEntity(stringEntity);
    httpPost.addHeader("Accept", "text/xml");
    httpPost.addHeader("SOAPAction", soapAction);

    // Execute and get the response.
    HttpClient httpClient = new DefaultHttpClient();
    HttpResponse response = httpClient.execute(httpPost);
    HttpEntity entity = response.getEntity();

    String strResponse = null;
    if (entity != null) {
        strResponse = EntityUtils.toString(entity);
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-20T07:17:14.490

soapAction 必须作为 http-header 参数传递 - 使用时，它不是 http-body/payload 的一部分。

在此处查看 apache httpclient 的示例：http: [//svn.apache.org/repos/asf/httpcomponents/oac.hc3x/trunk/src/examples/PostSOAP.java](http://svn.apache.org/repos/asf/httpcomponents/oac.hc3x/trunk/src/examples/PostSOAP.java)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-20T08:14:22.267

*`... using org.apache.http api. ...`*

您需要`SOAPAction`在请求中包含作为标头。正如您所拥有`httpPost`的那样`requestWrapper`，有三种添加标题的方法。

```
 1\. httpPost.addHeader( "SOAPAction", strReferenceToSoapActionValue );
 2\. httpPost.setHeader( "SOAPAction", strReferenceToSoapActionValue );
 3\. requestWrapper.setHeader( "SOAPAction", strReferenceToSoapActionValue ); 
```

唯一的区别是`addHeader`允许多个具有相同标题名称的值，并且`setHeader`只允许唯一的标题名称。`setHeader(...`over 写入同名的第一个标头。

您可以根据自己的要求使用其中任何一种。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-05T13:56:07.170

在通过 java 客户端调用 WCF 服务时，确定需要在 soap 操作上设置什么的最简单方法是加载 wsdl，转到与服务匹配的操作名称。从那里获取操作 URI 并将其设置在肥皂操作标头中。你完成了。

例如：来自 wsdl

```
<wsdl:operation name="MyOperation">
  <wsdl:input wsaw:Action="http://tempuri.org/IMyService/MyOperation" message="tns:IMyService_MyOperation_InputMessage" />
  <wsdl:output wsaw:Action="http://tempuri.org/IMyService/MyServiceResponse" message="tns:IMyService_MyOperation_OutputMessage" /> 
```

现在在 java 代码中，我们应该将 soap 动作设置为动作 URI。

```
//The rest of the httpPost object properties have not been shown for brevity
string actionURI='http://tempuri.org/IMyService/MyOperation';
httpPost.setHeader( "SOAPAction", actionURI); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-02T09:32:39.010

它给出了**415** Http 响应代码作为错误，

所以我加了

```
httppost.addHeader("Content-Type", "text/xml; charset=utf-8"); 
```

现在一切都好，http：200

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-12-08T11:56:51.843

这是我尝试过的示例，它对我有用：

创建 XML 文件 SoapRequestFile.xml

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:tem="http://tempuri.org/">
       <soapenv:Header/>
       <soapenv:Body>
          <tem:GetConversionRate>
             <!--Optional:-->
             <tem:CurrencyFrom>USD</tem:CurrencyFrom>
             <!--Optional:-->
             <tem:CurrencyTo>INR</tem:CurrencyTo>
             <tem:RateDate>2018-12-07</tem:RateDate>
          </tem:GetConversionRate>
       </soapenv:Body>
    </soapenv:Envelope> 
```

这里是java中的代码：

```
import java.io.File;
import java.io.FileInputStream;

import org.apache.http.client.methods.CloseableHttpResponse;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.entity.InputStreamEntity;
import org.apache.http.impl.client.CloseableHttpClient;
import org.apache.http.impl.client.HttpClients;
import org.apache.http.util.EntityUtils;
import org.junit.Assert;
import org.testng.annotations.Test;

import io.restassured.path.json.JsonPath;
import io.restassured.path.xml.XmlPath;
@Test
            public void getMethod() throws Exception  {
                //wsdl file :http://currencyconverter.kowabunga.net/converter.asmx?wsdl
                File soapRequestFile = new File(".\\SOAPRequest\\SoapRequestFile.xml");

                CloseableHttpClient client = HttpClients.createDefault(); //create client
                HttpPost request = new HttpPost("http://currencyconverter.kowabunga.net/converter.asmx"); //Create the request
                request.addHeader("Content-Type", "text/xml"); //adding header
                request.setEntity(new InputStreamEntity(new FileInputStream(soapRequestFile)));
                CloseableHttpResponse response =  client.execute(request);//Execute the command

                int statusCode=response.getStatusLine().getStatusCode();//Get the status code and assert
                System.out.println("Status code: " +statusCode );
                Assert.assertEquals(200, statusCode);

                String responseString = EntityUtils.toString(response.getEntity(),"UTF-8");//Getting the Response body
                System.out.println(responseString);

                XmlPath jsXpath= new XmlPath(responseString);//Converting string into xml path to assert
                String rate=jsXpath.getString("GetConversionRateResult");
                System.out.println("rate returned is: " +  rate);

        } 
```

# java - 如何增强tomcat线程池行为

> ID：10671503
> 
> 赞同：1
> 
> 时间：2012-05-20T07:11:18.777
> 
> 标签：java, tomcat, threadpool

我正在使用 tomcat7 运行 java 应用程序。我需要存储每个 tomcat 线程的信息，所以我可以使用 ThreadLocals 方法。

在我的 server.xml 中，线程池定义如下所示：

```
 <Executor name="tomcatThreadPool" namePrefix="catalina-exec-" 
    maxThreads="10000" minSpareThreads="2000"/> 
```

我有一个类 EnhanceThread

```
public class EnhanceThread extends Thread {
    ...
    @Override
    public void run() {
       SomeThreadLocals.set(data);
       super.run();
     }
} 
```

如何覆盖 tomcat 线程池定义并使其使用我的类？有没有更好的方法来威胁这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T12:36:55.343

您不需要为此弄乱 Tomcat 线程。只需使用以下代码：

```
public class JsonSerializerFactory {
    private static final ThreadLocal<JsonSerializer> JSON_SERIALIZER = 
        new ThreadLocal<JsonSerializer>() {
            @Override 
            protected JsonSerializer initialValue() {
                 return new JsonSerializer();
            }
        };

    public static JsonSerializer get() {
        return JSON_SERIALIZER;
    }
} 
```

每次你需要一个序列化器时，调用`JsonSerializerFactory.get()`它，它会返回线程本地实例，如果它还不存在则懒惰地创建它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T19:54:07.003

Tomcat Executor 构建在 java.util.concurrent 类之上，因此您*可以*替换 Tomcat 组件类，但我认为这不是一个好主意。

如果您需要将数据放入请求范围，在 Servlet 规范中有许多定义明确的方法，例如 ServletRequestListener。您还可以使用 Servlet 过滤器并有选择地将其添加到仅需要它的请求中。

# python - 使用 Python 将非常规数据插入到 Sqite3

> ID：10671506
> 
> 赞同：0
> 
> 时间：2012-05-20T07:11:51.463
> 
> 标签：python, sqlite

我已经尝试了很多不同的变体，并且只使用变量的直字符串进行调试，但我相信这与数据类型有关？这应该是一个快速的原型，但已经吃了一个下午！

```
#! usr/bin/ python
import sqlite3 
import sys
import psutil

cpu_usage = psutil.cpu_percent()
ram_usage = psutil.phymem_usage()
disk_usage = psutil.disk_usage('/')
network = psutil.network_io_counters(True)

conn = sqlite3.connect('stats.db')
cur = conn.cursor()

cur.execute("CREATE TABLE stats (id INTEGER PRIMARY KEY, cpu TEXT, ram TEXT, disk TEXT, network TEXT, timestamp DATE DEFAULT (datetime('now','localtime')))")
cur.execute("INSERT INTO stats (id, cpu, ram, disk, network, timestamp) VALUES (?, ?, ?, ?, ?, ?)", (None, cpu_usage, ram_usage, disk_usage, network, None))

print(cur.fetchall()) 
conn.commit()

conn.close() 
```

* * *

```
Traceback (most recent call last):
  File "build_db.py", line 15, in <module>
    cur.execute("INSERT INTO stats (id, cpu, ram, disk, network, timestamp) VALUES (?, ?, ?, ?, ?, ?)", (None, cpu_usage, ram_usage, disk_usage, network, None))
sqlite3.InterfaceError: Error binding parameter 2 - probably unsupported type. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T21:19:13.250

我做了一个解决方法 - 它不是那么优雅，但我导入 simplejson 并使用 simplejson.dumps(variable) 的结果将值插入为 json。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T12:17:23.863

您确实需要阅读[psutil 的文档](http://code.google.com/p/psutil/wiki/Documentation#CPU)。

> psutil.disk_usage（路径）
> 
> 返回有关给定路径的磁盘使用统计信息作为命名元组，包括以字节表示的总空间、已用空间和可用空间以及使用百分比。如果路径不存在，则会引发 OSError。请参阅提供示例用法的示例/disk_usage.py 脚本。

```
>>> psutil.disk_usage('/')
usage(total=21378641920, used=4809781248, free=15482871808, percent=22.5) 
```

现在由您决定要插入数据库的值。

# ios - 从 phonegap 启动 iOS Messenger

> ID：10671508
> 
> 赞同：0
> 
> 时间：2012-05-20T07:11:52.570
> 
> 标签：ios, cordova

有没有办法从使用 PhoneGap 制作的 HTML5 应用程序在 iOS 上启动 Messenger？有人可以指出我正确的方向吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T09:51:18.417

您可以通过使用特定方案引发 URL 请求来调用 iOS 环境中的另一个应用程序。所以要在您的 html 中打开电子邮件或电话应用程序，

```
 <a href="tel:+919900600233" class="call mobile"></a>
<a href="mailto:help@domain.com" class="email"></a> 
```

当用户点击此超链接时，用户将被带到相应的应用程序。消息应用程序的相同方式，使用

```
<a href="sms:+919900600233" class="SMS"></a> 
```

所有 URL 方案列表：[iOS URL 方案](http://wiki.akosma.com/IPhone_URL_Schemes#SMS)

# java - 一旦开始，如何停止intent.ACTION_CALL？

> ID：10671510
> 
> 赞同：1
> 
> 时间：2012-05-20T07:12:35.810
> 
> 标签：java, android, android-intent, phone-call

我正在使用`Intent intent = new Intent(Intent.ACTION_CALL);`我的应用程序拨打电话。

有没有办法在一段时间后终止通话？或者在 ACTION_CALL 开始之前为它设置一个计时器？

我正在使用来自 Prasanta's Blog 的以下代码，但由于某种原因`context`出现以下错误。有什么建议么？

> 无法解决

```
import java.lang.reflect.Method;
import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.os.RemoteException;
import android.telephony.PhoneStateListener;
import android.telephony.TelephonyManager;
import android.util.Log;
import android.widget.CheckBox;
import android.widget.CompoundButton;
import android.widget.CompoundButton.OnCheckedChangeListener;
import android.widget.TextView;
import android.widget.Toast;
import com.android.internal.telephony.ITelephony;

public class AnswerActivity extends Activity {
    private static final String TAG = null;
    /** Called when the activity is first created. */
    private ITelephony telephonyService;
    TelephonyManager telephonyManager;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

    TelephonyManager tm = (TelephonyManager) context
            .getSystemService(Context.TELEPHONY_SERVICE);{

    try {
        // Java reflection to gain access to TelephonyManager's
        // ITelephony getter
        Log.v(TAG, "Get getTeleService...");
        Class c = Class.forName(tm.getClass().getName());
        Method m = c.getDeclaredMethod("getITelephony");
        m.setAccessible(true);
        com.android.internal.telephony.ITelephony telephonyService =
                (ITelephony) m.invoke(tm);
    } catch (Exception e) {
        e.printStackTrace();
        Log.e(TAG,
                "FATAL ERROR: could not connect to telephony subsystem");
        Log.e(TAG, "Exception object: " + e);
    }

}
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T23:17:10.460

你的问题已经被问过很多次了。简短的回答是没有官方的方法可以做到这一点。

长答案：

*   [在 Android 中结束通话](https://stackoverflow.com/questions/3823987/end-call-in-android)
*   [无法在 android 版本 2.2.6 中结束通话](https://stackoverflow.com/questions/10549234/unable-to-end-call-in-android-verstion-2-2-6)
*   [结束外出通话](https://stackoverflow.com/questions/9733356/ending-the-out-going-call)

仔细阅读它们。寻找有人说“曾经工作......”的情况。

在有人提议打开飞行模式的问题之一中（该应用程序当然需要权限才能做到这一点）。它很粗糙，但它有效。不过，作为用户，我会对这样做的应用程序有所保留。

# android - 添加谷歌地图功能后无法实例化活动组件信息

> ID：10671515
> 
> 赞同：2
> 
> 时间：2012-05-20T07:13:29.457
> 
> 标签：android, eclipse, android-manifest, android-mapview, android-maps

在我的应用程序中，当我选择按钮时，它会让我关注 mapView 类，它显示了用户的当前位置。

但是，它抛出

```
java.lang.RuntimeException: Unable to instantiate activity. ComponentInfo error 
```

我已经在 AndroidManifest 文件中添加了 java 类文件。

我的xml文件如下..

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <com.google.android.maps.MapView 
        android:id="@+id/mapView"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:enabled="true"
        android:clickable="true"
        android:apiKey="my api key"/>

</LinearLayout> 
```

我的java类如下

```
package c.c.c;

import com.google.android.maps.MapActivity;
import android.app.Activity;
import android.os.Bundle;

public class MygoogleActivity extends MapActivity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }

    @Override
    protected boolean isRouteDisplayed() {
        // TODO Auto-generated method stub
        return false;
    }
} 
```

我的android清单文件如下

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="c.c.c" android:versionCode="1" android:versionName="1.0">

    <uses-sdk android:minSdkVersion="8" />
    <uses-permission android:name="android.permission.CALL_PHONE"></uses-permission> 
    <uses-library android:name="com.google.android.maps" />
    <uses-permission android:name="android.permission.INTERNET" ></uses-permission>
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />  

    <application android:icon="@drawable/icon" android:label="@string/app_name">
        <activity android:name=".MygoogleActivity" android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>
</manifest> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T07:31:32.767

你需要在你的 AndroidMainfest 文件中添加谷歌地图用户库

AndroidManifest.xml

```
<application android:icon="@drawable/icon" android:label="@string/app_name">

         <uses-library android:name="com.google.android.maps" />
          <activity>
                /**********/
          </activity>
 </application> 
```

您还需要提供互联网许可...

```
 <uses-permission android:name="android.permission.INTERNET"></uses-permission> 
```

# xcode - 使用 xcode 包括 phonegap 中的图像；寻找“目标”？

> ID：10671522
> 
> 赞同：0
> 
> 时间：2012-05-20T07:15:02.950
> 
> 标签：xcode, cordova

我正在尝试在 xcode 的 phonegap 应用程序的页面上包含一个 .png。我将它正确地包含在资源中，包括“复制项目...”复选框等等，但我仍然在页面上看到一个小错误框而不是图像。

我阅读[此](http://wiki.phonegap.com/w/page/16494763/Building%20A%20Self-Contained%20Application%20%28iPhone%29)页面寻求帮助，页面的最后一部分，在底部的“疑难解答”下，显示了我的问题的解决方案。但是，我在 XCode 中找不到目标文件夹。它根本不存在。在该教程中间附近的图片中，您可以看到 Targets 文件夹位于 frameworks 文件夹下方，还有一堆其他内容，例如“可执行文件”和“错误和警告”，但对我来说，除了 Products 之外，框架之后什么都没有文件夹。您在图片中看到的所有这些东西根本不存在。我正在使用 XCode 4.2 版。我在哪里可以找到目标文件夹？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-20T09:59:53.927

因此，您使用的 Xcode 可能是升级版本。Xcode 4.2 目标的位置已更改，您可以参考[此图像](https://img.skitch.com/20111208-diucey1rnscaqhe4qnyffbj462.png)（从谷歌图像中随机挑选），因此请查看此内容，您将知道在哪里可以找到目标设置。

# asp.net - ASP CheckBox1_CheckedChanged 事件不起作用。

> ID：10671524
> 
> 赞同：0
> 
> 时间：2012-05-20T07:15:10.703
> 
> 标签：asp.net, html, user-controls, checkbox

当用户单击 ASP 页面中的复选框时，我只想看到一个 Html 表（id​​='xx'）。一旦用户取消勾选复选框，表格应该再次不可见。

```
<table>
    <tr>
         <td colspan='2'>
               <table id='xx'>
                      <tr>
                          <td colspan='2'>
                                Student Information :
                           </td>
                           </tr>
                           <tr>
                           <td>
                             <asp:Label ID="Label1" runat="server" Text="Select Student name :"></asp:Label>
                           </td>
                           <td>
                              <asp:DropDownList ID="DropDownList1" runat="server" Width="200px">
                                   </asp:DropDownList>
                           </td>
                       </tr>
    ... 
```

我试过这段代码：

```
 protected void CheckBox1_CheckedChanged(object sender, EventArgs e)
    {

        if (CheckBox1.Checked == true)
        {
            // need a way to hide the Table id='xx' 
        }
        else {
            DropDownList1.Visible = true; // This is also not working
        }
    } 
```

请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T07:33:37.933

回发时对 CheckBox 控件使用**AutoPostBack="true"**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T07:29:21.287

试试这个...

```
<table>
    <tr>
        <td colspan='2'>
            <asp:CheckBox runat="server" ID="CheckBox1" Text="check" Checked="true" AutoPostBack="true"
                OnCheckedChanged="CheckBox1_CheckedChanged" />
            <table id='xx' runat="server">
                <tr>
                    <td colspan='2'>
                        Student Information :
                    </td>
                </tr>
                <tr>
                    <td>
                        <asp:Label ID="Label1" runat="server" Text="Select Student name :"></asp:Label>
                    </td>
                    <td>
                        <asp:DropDownList ID="DropDownList1" runat="server" Width="200px">
                        </asp:DropDownList>
                    </td>
                </tr>
            </table>
        </td>
    </tr>
</table>

protected void CheckBox1_CheckedChanged(object sender, EventArgs e)
{
    this.xx.Visible = CheckBox1.Checked;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T07:38:01.233

你在这里有两个选择...

> 1.  使用 runat = "server" 制作表服务器控件
> 2.  在 Check/UnCheck CheckBox 控件上，将显示属性设置为 True/False。

## 选项 1 服务器端的句柄

```
<table id='xx' runat = "server"> 
```

现在您可以访问如下表控件

```
xx.Visible  = true/false; 
```

* * *

## 选项 2 在客户端处理

```
<asp:CheckBox onclick="return SelectChk(this);" ID="chk" ></asp:CheckBox> 
```

**JavaScript 函数**

```
<script language="javascript" type="text/javascript">
    function SelectChk(CtlId) {
        var IsChecked = document.getElementById(CtlId.id).checked;
        if (IsChecked) {
            document.getElementById(<%=xx.ClientID%>).style.display = 'block';
        }
        else{
            document.getElementById(<%=xx.ClientID%>).style.display = 'none';
        }
    }
</script> 
```

# php - 编写不包括一个文件的 .htaccess 重写规则

> ID：10671525
> 
> 赞同：0
> 
> 时间：2012-05-20T07:15:13.750
> 
> 标签：php, regex, apache, .htaccess

我正在使用一个框架，需要调用目录中的特定文件，但是为了框架的缘故，该目录是为对 index.php 的所有请求的 url 设置的。

我有一个名为的文件`check-session.php`，需要任何请求来`localhost/admin/check-session.php`执行实际的 check-session.php 文件而不是路由到`index.php`. 如何使用与 .htaccess 位于同一文件夹中的文件来执行此操作`check-session.php`？

我几乎没有重写规则/条件的经验。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T07:23:24.767

找到重写为 index.php 的 RewriteRule 并将这些直接放在它之前：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-l
RewriteCond %{REQUEST_URI} !\.php$ 
```

如果它是您请求的真实文件，那应该会阻止它映射到 index.php。

如果这不起作用，请在 .htaccess 中发布实际的重写

# c++ - WM_CHAR lParam 扩展密钥（24 位）始终为 0

> ID：10671526
> 
> 赞同：0
> 
> 时间：2012-05-20T07:15:25.693
> 
> 标签：c++, winapi, bit-manipulation

我正在尝试获取扩展密钥状态

```
WNDPROC lpfnEditWndProc; 

//edit - hwnd of edit control
lpfnEditWndProc = (WNDPROC) SetWindowLong(edit, GWL_WNDPROC, (DWORD) SubClassProc); 

struct Bits {
    WORD nRepeatCount: 16;
    BYTE nScanCode : 8;
    BYTE nExtended : 1;
    BYTE nReserved : 4;
    BYTE nContext : 1;
    BYTE nPrevious : 1;
    BYTE nTransition : 1;
  };

union KeyInfo
{  
  LPARAM lParam;
  Bits bits;  
};

LRESULT CALLBACK SubClassProc(HWND hwnd, UINT msg, WPARAM wParam, LPARAM lParam) 
{
     switch (msg) { 
          case WM_CHAR: 
          {
              KeyInfo v;
              v.lParam = lParam;

              printf("nExtended = %d\n", v.bits.nExtended);
          }
          break;

     }

     return CallWindowProc(lpfnEditWndProc, hwnd, msg, wParam, lParam); 
} 
```

**n 始终扩展 == 0**

我试图以不同的方式输出信息，比如`(lParam << 24) & 1;`

都一样 nExtended == 0

Win7 64 位，Visual Studio 2010

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T07:35:32.097

[WM_CHAR](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646276.aspx)的文档说：

> 因为按下的键和产生的字符消息之间不一定是一一对应的，所以lParam参数的高位字中的信息通常对应用程序没有用处。高位字中的信息仅适用于发布 WM_CHAR 消息之前的最新 WM_KEYDOWN 消息。

您必须处理 WM_KEYDOWN 和 WM_KEYUP 消息以获取扩展密钥信息。

# c# - 使用 Linq to Entities 执行字符串搜索

> ID：10671531
> 
> 赞同：4
> 
> 时间：2012-05-20T07:16:02.840
> 
> 标签：c#, .net, string, linq, linq-to-entities

我想在 Linq to Entities 中启用此功能（因此过滤发生在 SQL Server 上）？

```
public static bool ContainsAny(this string source, StringComparison comparison,
                               IEnumerable<string> searchTerms)
{
  return searchTerms.Any(searchTerm => source.Contains(searchTerm, comparison));
} 
```

我的目标是搜索一个表并通过使用上述函数过滤某个列来限制结果，即`GetContacts().Where(c => c.FullName.ContainAny(searchTerm))`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-20T19:14:16.290

首先，在表达式中使用 StringComprison 并期望 Linq 2 实体将其转换为正确的 Sql 语句是很棘手的（如果可能的话，我不知道）。

其次，在表达式中使用像*ContainsAny这样的自定义函数也很棘手。*

所以如果我是你，简单的解决方案是：

```
GetContacts().Where(c => searchTerms.Any(term => c.FullName.Contains(term))) 
```

这应该在 EF4 中工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-26T10:21:34.073

看看我创建的一个 nuget 包

## [http://www.nuget.org/packages/NinjaNye.SearchExtensions](http://www.nuget.org/packages/NinjaNye.SearchExtensions)

这将启用以下（以及更多），它将返回搜索词出现在指定属性中的结果

```
var result = GetContacts().Search("searchTerm", c => c.FullName); 
```

要搜索多个术语，您可以执行以下操作：

```
var result = GetContacts().Search(searchTerms, c => c.FullName); 
```

以上将返回任何搜索词出现在属性中的结果

这构建了一个表达式树，它在不在内存中的数据库上执行搜索，因此只有匹配的结果从服务器返回。

有关更多信息，请查看**[项目 GitHub 页面](https://github.com/ninjanye/SearchExtensions)**或我的**[博客文章](http://jnye.co/posts/tagged/search-extensions)**

# actionscript-3 - AS3 - 基于外部图像构建动态菜单

> ID：10671535
> 
> 赞同：0
> 
> 时间：2012-05-20T07:16:30.270
> 
> 标签：actionscript-3, flash, flash-cs5

我对一个项目有一个有趣的补充，它对许多其他人来说也可能是一个很棒的功能。我有一个远程目录，其中包含许多内容和数量经常变化的图像。

我正在尝试使用图像名称制作影片剪辑按钮的文本下拉菜单，以便可以单独加载和查看每个图像。但是我想根据文件夹中的图像数量和基于文件名或带有名称的单独文本文件标记的按钮动态填充菜单。

-------- 所以我知道如何通过脚本构建文本菜单，但我不知道如何获取--1）图像数量或--2）名称的信息。这可以通过动作脚本完成吗？如果这听起来太简单，图像的数量通常在 50 左右，所以它是一个滚动菜单。所以我想我还需要--3）根据动态创建的按钮数量定义滚动菜单动画剪辑的长度。=-)

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T07:49:37.890

除非它是 AIR 应用程序，否则您不能让 ActionScript 文件自行读取目录的内容（或检查文件系统）。

在这种情况下，您最好的选择是加载像 PHP 这样的服务器端脚本，该脚本将打开一个文件夹并以 XML 格式输出其内容。然后，您的 ActionScript 文件将处理此 XML 并创建必要的可视数据。

这样您就会知道文件数据/列表始终是最新的且万无一失。

# php - 来自类 php 的 Ajax 调用方法

> ID：10671537
> 
> 赞同：10
> 
> 时间：2012-05-20T07:16:50.533
> 
> 标签：php, ajax, class, methods

你好 ，

我想通过ajax从一个类中调用一个方法。类是这样的：

```
class MyClass{
      public function myMethod($someParameter,$someParameter2){
          //do something
          return $something;
      }
      private function myMethod2($someParameter3){
          //do something
          return something;
      }

} 
```

我可以使用 ajax 调用类方法（myMetod(2,3)）并返回做某事吗？我可以这样使用吗？

```
$.ajax({
        url : 'myClass.php',
        data : {
                    someData: '2,3',
               }
        type : 'POST' ,
        success : function(output){
                  alert(output)
        }
}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-20T07:25:51.917

您需要创建调用此类方法并且可以作为ajax 请求调用的php 脚本。创建一个文件，如：

例如：

**我的文件.php**

```
<?php

   $date = $_POST; // print_r( $_POST ); to check the data

   $obj = new MyClass();

   $obj->myMethod( $_POST['field1'], $_POST['field2'] );
   $obj->myMethod2( $_POST['field1'] );

?> 
```

并将您的 jQuery 代码更改为：

```
$.ajax({
        url  : 'path/to/myfile.php',
        data : { someData: '2,3' },
        type : 'POST' ,
        success : function( output ) {
                    alert(output)
                  }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-20T07:23:23.647

> 我可以用`ajax`调用一个类方法（myMetod(2,3)）并用返回来做一些事情吗？

是的你可以。

因为调用类方法需要初始化你的对象，`myClass.php`你需要实例化类并传递正确的输入，如果类方法要返回一些输出，只需回显它。

例如。如果你想打电话，从你的 ajax 电话，`myMethod`然后在你的`myClass.php`

```
//Check for ajax request to instantiate the class.
if(isset($_SERVER['HTTP_X_REQUESTED_WITH']) && strtolower($_SERVER['HTTP_X_REQUESTED_WITH']) == 'xmlhttprequest') {
   $object = new MyClass();
   //hold the return value in a variable to send output back to ajax request or just echo this method.
   $result = $object->myMethod($_POST['value'], $_POST['value2']);
   echo $result;
} 
```

# java - 如何在 netbeans 中填充表

> ID：10671540
> 
> 赞同：1
> 
> 时间：2012-05-20T07:17:26.713
> 
> 标签：java, swing, netbeans

我可以找到的每个示例都通过创建没有 gui 的表或解释如何从数据库填充。我一定遗漏了一些简单的东西，但这是我到目前为止基于不同教程和[如何使用表格：创建表格模型的内容](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#data)。

```
private void btnAddRecordToTableActionPerformed(java.awt.event.ActionEvent evt) {
    String strPledgeArray[][] = 
    {
        {"1","2","3","4","5"}
    };
String columnNames[] = {"Column 1", "Column 2", "Column 3","Column 4","Column 5"};
    JTable tblDataGridResults = new JTable(strPledgeArray, columnNames);
} 
```

然而，按下按钮后没有任何反应。我究竟做错了什么？

从我的阅读来看，我认为这是因为没有模型，但每次我看到任何关于模型的东西时，它们都在不同的类中，或者使用只会在我的程序中产生错误的构造函数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T07:29:09.510

1) 代码行

```
JTable tblDataGridResults = new JTable(strPledgeArray, columnNames); 
```

创建一个未添加到 GUI 的新 JTable

2) 最好将 ColumnNames 和 Rows 添加到 DefaultTableModel，请在教程中阅读[TableModel 的工作原理](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#data)

编辑

还是不明白？？？

```
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.*;
import javax.swing.table.*;

public class RemoveAddRows extends JFrame {

    private static final long serialVersionUID = 1L;
    private Object[] columnNames = {"Type", "Company", "Shares", "Price"};
    private Object[][] data = {
        {"Buy", "IBM", new Integer(1000), new Double(80.50)},
        {"Sell", "MicroSoft", new Integer(2000), new Double(6.25)},
        {"Sell", "Apple", new Integer(3000), new Double(7.35)},
        {"Buy", "Nortel", new Integer(4000), new Double(20.00)}
    };
    private JTable table;
    private DefaultTableModel model;

    public RemoveAddRows() {

        model = new DefaultTableModel(data, columnNames) {

            private static final long serialVersionUID = 1L;

            @Override
            public Class getColumnClass(int column) {
                return getValueAt(0, column).getClass();
            }
        };
        table = new JTable(model) {

            private static final long serialVersionUID = 1L;

            @Override
            public Component prepareRenderer(TableCellRenderer renderer, int row, int column) {
                Component c = super.prepareRenderer(renderer, row, column);
                int firstRow = 0;
                int lastRow = table.getRowCount() - 1;
                int width = 0;
                if (row == lastRow) {
                    ((JComponent) c).setBackground(Color.red);
                } else if (row == firstRow) {
                    ((JComponent) c).setBackground(Color.blue);
                } else {
                    ((JComponent) c).setBackground(table.getBackground());
                }
                /*if (!isRowSelected(row)) {
                String type = (String) getModel().getValueAt(row, 0);
                c.setBackground("Buy".equals(type) ? Color.GREEN : Color.YELLOW);
                }
                if (isRowSelected(row) && isColumnSelected(column)) {
                ((JComponent) c).setBorder(new LineBorder(Color.red));
                }*/
                return c;
            }
        };
        table.setPreferredScrollableViewportSize(table.getPreferredSize());
        JScrollPane scrollPane = new JScrollPane(table);
        add(scrollPane);
        JButton button1 = new JButton("Remove all rows");
        button1.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent arg0) {
                if (model.getRowCount() > 0) {
                    for (int i = model.getRowCount() - 1; i > -1; i--) {
                        model.removeRow(i);
                    }
                }
                System.out.println("model.getRowCount() --->" + model.getRowCount());
            }
        });
        JButton button2 = new JButton("Add new rows");
        button2.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent arg0) {
                Object[] data0 = {"Buy", "IBM", new Integer(1000), new Double(80.50)};
                model.addRow(data0);
                Object[] data1 = {"Sell", "MicroSoft", new Integer(2000), new Double(6.25)};
                model.addRow(data1);
                Object[] data2 = {"Sell", "Apple", new Integer(3000), new Double(7.35)};
                model.addRow(data2);
                Object[] data3 = {"Buy", "Nortel", new Integer(4000), new Double(20.00)};
                model.addRow(data3);
                System.out.println("model.getRowCount() --->" + model.getRowCount());
            }
        });
        JPanel southPanel = new JPanel();
        southPanel.add(button1);
        southPanel.add(button2);
        add(southPanel, BorderLayout.SOUTH);
    }

    public static void main(String[] args) {
        RemoveAddRows frame = new RemoveAddRows();
        frame.setDefaultCloseOperation(EXIT_ON_CLOSE);
        frame.pack();
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T07:28:58.920

尝试这个，

使用 Object[][] 数组而不是 String[][]

JTree 构造函数将二维对象数组作为表格的内容，以及一维字符串数组......然后创建一个表格。

例如：

```
import java.awt.BorderLayout

import java.awt.Color;

import javax.swing.JFrame;

import javax.swing.JPanel;

import javax.swing.JScrollPane;

import javax.swing.JTable;

public class Test6 extends JFrame {

    public Test6(){

        this.setSize(300,300);
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        Mpanel m = new Mpanel();
        this.add(m,BorderLayout.CENTER);

    }

    class Mpanel extends JPanel {

        JTable mTable;

        private Object[][] cells = {{"Vivek",10.00},{"Vishal",20.00}};

                    private String[] columnNames = { "Planet", "Radius" };
        JScrollPane mScroll;

        public Mpanel(){

            this.setSize(150,150);
            this.setComponent();
        }

        public void setComponent(){

            mTable = new JTable(cells,columnNames);
            mTable.setAutoCreateRowSorter(true);
            mScroll = new JScrollPane(mTable);

            this.add(mScroll);

        }
    }

    public static void main(String[] args){

        new Test6().setVisible(true);
    }
} 
```

# java - 最大轨迹二叉树

> ID：10671545
> 
> 赞同：1
> 
> 时间：2012-05-20T07:18:28.847
> 
> 标签：java

-- java -- 对于树

> ```
>  5
>   4     3
> 30  5 
> ```

我需要找到“最大轨道”，所以对于这棵树，它的 39 (5​​+4+30)

我需要一个可以做到这一点的函数（复杂度 O（n））有人可以帮助我吗？

```
public static int GetTreePath(BinTreeNode<Integer> t){
        if (t==null)
            return 0;

        if (t.IsLeve()){
            return t.getInfo();
        }else{
            GetTreePath(t.getLeft());
            GetTreePath(t.getRight());
        }
        return t.getInfo();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T07:33:22.057

有一个DP解决方案。

```
F(i) = max(F(child) + value(i)) 
```

`calculate(f)`从叶子到根，或递归并保存`f(i)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T07:29:03.163

只需稍微修改您的代码，以获得两个可能的子树的最大值。

```
public static int GetTreePath(BinTreeNode<Integer> t){
    if (t==null)
        return 0;

    if (t.IsLeve()){
        return t.getInfo();
    }else{
        return Math.max(
            GetTreePath(t.getLeft()), 
            GetTreePath(t.getRight()) 
            ) + t.getInfo();
    }
} 
```

# jquery - jQuery：动画完成（）事件在停止（）上执行

> ID：10671547
> 
> 赞同：1
> 
> 时间：2012-05-20T07:19:49.470
> 
> 标签：jquery, event-handling, jquery-animate

假设我有这个

```
$(".a").animate(
        {"left":"100%"},
        {duration:50000, complete:function(){
             $(".a").css("background-color","black");
        }}
);

$(".b").mouseover(function(){
        $(".a").stop();
}); 
```

当-ed 时，`.b`将因此不会被触发....`mouseover``.a``stop()``complete:event`

**即使它停止它`complete:event`会被触发，我应该怎么做？**

有没有比这更好的解决方案？

```
function aaa(){
   $(".a").css("background-color","black");
 }    

$(".a").animate(
        {"left":"100%"},
        {duration:50000, complete:function(){
            aaa();
        }}
);

$(".b").mouseover(function(){
        $(".a").stop();
        aaa();
}); 
```

* * *

**[更新]** 这就是我的代码的实际样子，抱歉没有早点显示...

```
$(".a").animate(
        {"left":"100%"},
        {duration:50000, complete:function(){
             alert("A");
        }}
);

$(".b").mouseover(function(){
        $(".a").stop().animate(
             {"top":"100%"}
        )
}); 
```

我只想`alert("A")`被执行一次..但我不会阻止用户`mouseover`-ing `.b`which stop `.a`..

如果我要这样写`.b`鼠标悬停：

```
$(".b").mouseover(function(){
        $(".a").stop().animate(
             {"top":"100%"}
             {complete:function(){
                  alert("A");
             }}            
        )
}); 
```

它可能会`alert("A")`两次，我不希望那样...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T07:32:45.577

您正在寻找[jQuery.stop()](http://api.jquery.com/stop/)`'jumpToEnd'`的参数：

这可以解决问题：

```
$(".a").stop(true,true); 
```

[**演示：**](http://jsfiddle.net/JW872/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T07:23:18.403

为什么需要触发呢，难道不能在调用`complete:event`后直接调用绑定到右边的同一个函数，`.stop()`得到同样的效果吗？

# assembly - 带括号的汇编器简单计算

> ID：10671550
> 
> 赞同：-1
> 
> 时间：2012-05-20T07:19:56.943
> 
> 标签：assembly, masm, masm32

我正在尝试求解一个方程。我正在使用 MASM32。我认为我正在使用正确的代码。但即使我使用必要的值来解方程，我也得到了“更大”的价值。我错过了什么或做错了什么？

```
.386
.model flat, stdcall 
option casemap :none
include \masm32\include\windows.inc
include \masm32\include\kernel32.inc
include \masm32\include\masm32.inc
includelib \masm32\lib\kernel32.lib
includelib \masm32\lib\masm32.lib

.data
blogas_a db "OK",0
a_value dw 6   
a_min dw 1     
a_max dw 7

blogas_b db "less",0
b_value dw -9  
b_min dw -10
b_max dw 19

blogas_c db "greater",0
c_value dw 2
c_min dw -3
c_max dw 27

.code
start:
;________1 lygtis______a-b*c+2*a=36____________________________
_check1:
mov ax, [a_value]
push ax

mov ax, [b_value]
mov bx, [c_value]
mul bx
push ax

mov ax, 2
mov bx, [a_value]
mul bx
push ax

pop ax
pop bx
add ax, bx
pop bx
sub bx, ax

cmp ax, 36
je _outOfRange
jg _outOfRange2
jl _outOfRange3
;_____________________________________
_outOfRange: invoke StdOut, addr blogas_a
JMP _exit
_outOfRange3: invoke StdOut, addr blogas_c
JMP _exit
_outOfRange2: invoke StdOut, addr blogas_b
_exit: invoke ExitProcess, 0
end start 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T07:27:40.653

`sub bx, ax`将修改`bx`，`ax`并将保持原样。您可能正在寻找`sub ax, bx`。

* * *

编辑：您计算的方程式与您的评论建议的不同。您的代码将以下值推送到堆栈：

```
a
b * c
a * 2 
```

并弹出它们以执行以下数学运算（在应用我上面建议的更改之后）：

```
(a * 2) + (b * c) - (a) 
```

您需要修改正在执行的数学运算。

# vb.net - 在RichTextBox中为vb.net中的多种字体设置选择字体大小

> ID：10671556
> 
> 赞同：2
> 
> 时间：2012-05-20T07:21:32.617
> 
> 标签：vb.net, richtextbox

我想`RichTextBox`使用组合框更改字体大小。如果我们使用此代码在选择文本中使用一种字体，则很容易更改字体大小。

```
RichTextBox1.SelectionFont = New Font(SelectionFont.FontFamily, CInt(ToolStripComboBox3.Text), RichTextBox1.SelectionFont.Style) 
```

但是，如果我们的选择中有多种字体，它就不起作用。

我有另一个选择的代码来解决这个问题。But the only problem with this code is that it is good for less then 2000 characters - but when the selection text is large it is worthless. 请看下面的代码：

```
 Public rtbTemp As New RichTextBox()
    Public Sub ChangeFontSize(ByVal rtb As RichTextBox, ByVal fontSize As Single)
        'This method should handle cases that occur when multiple fonts/styles are selected
        ' Parameters:-
        ' fontSize - the fontsize to be applied, eg 33.5
        If fontSize <= 0.0 Then
            Throw New System.InvalidProgramException("Invalid font size parameter to ChangeFontSize")
        End If
        Dim rtb1start As Integer = rtb.SelectionStart
        Dim len As Integer = rtb.SelectionLength
        Dim rtbTempStart As Integer = 0
        ' If len <= 1 and there is a selection font, amend and return
        If len <= 1 AndAlso rtb.SelectionFont IsNot Nothing Then
            rtb.SelectionFont = New Font(rtb.SelectionFont.FontFamily, fontSize, rtb.SelectionFont.Style)
            Return
        End If
        ' Step through the selected text one char at a time
        rtbTemp.Rtf = rtb.SelectedRtf
        For i As Integer = 0 To len - 1
            rtbTemp.[Select](rtbTempStart + i, 1)
            rtbTemp.SelectionFont = New Font(rtbTemp.SelectionFont.FontFamily, fontSize, rtbTemp.SelectionFont.Style)
        Next

        ' Replace & reselect
        rtbTemp.[Select](rtbTempStart, len)
        rtb.SelectedRtf = rtbTemp.SelectedRtf
        rtb.[Select](rtb1start, len)
        Return
    End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T07:38:05.740

这是代码：字体大小组合框的 Xaml：

```
 <ComboBox Width="50" Name="FontsSizeCombo" FontSize="12" ItemsSource="{Binding}">
                <ComboBoxItem Content="8"/>
                <ComboBoxItem Content="9" />
                <ComboBoxItem Content="10" />
                <ComboBoxItem Content="11" />
                <ComboBoxItem Content="12" />
                <ComboBoxItem Content="14" />
                <ComboBoxItem Content="16" />
                <ComboBoxItem Content="18" />
                <ComboBoxItem Content="22" />
                <ComboBoxItem Content="24" />
                <ComboBoxItem Content="26" />
                <ComboBoxItem Content="36" />
                <ComboBoxItem Content="48" />
                <ComboBoxItem Content="72" />
            </ComboBox> 
```

工作 Vb.Net 代码：

```
Private Sub FontsSizeCombo_DropDownClosed(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles FontsSizeCombo.DropDownClosed
    mainRTB.Selection.ApplyPropertyValue(RichTextBox.FontSizeProperty, FontsSizeCombo.Text)
End Sub 
```

mainRtb 是我的富文本框。如果它是正确的，请检查这个作为答案。谢谢你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-20T03:20:39.630

* * *

## 在这里我改变了一些东西

公共 rtbTemp 作为新的 RichTextBox()

```
Public Sub ChangeFontSize(ByVal rtb As RichTextBox, ByVal fontSize As Single, ByVal fntName As String)

    If fontSize <= 0.0 Then
        Throw New System.InvalidProgramException("Invalid font size parameter to ChangeFontSize")
    End If
    Dim rtb1start As Double = rtb.SelectionStart
    Dim len As Double = rtb.SelectionLength
    Dim rtbTempStart As Double = 0
    ' If len <= 1 and there is a selection font, amend and return
    If len <= 1 AndAlso rtb.SelectionFont IsNot Nothing Then
        rtb.SelectionFont = New Font(fntName, fontSize, rtb.SelectionFont.Style)
        Return
    End If
    ' Step through the selected text one char at a time
    rtbTemp.Rtf = rtb.SelectedRtf
    For i As Double = 0 To len - 1
        rtbTemp.[Select](rtbTempStart + i, 1)
        rtbTemp.SelectionFont = New Font(fntName, fontSize, rtbTemp.SelectionFont.Style)
    Next

    ' Replace & reselect
    rtbTemp.[Select](rtbTempStart, len)
    rtb.SelectedRtf = rtbTemp.SelectedRtf
    rtb.[Select](rtb1start, len)
    Return

End Sub 
```

# php - jQuery 数据表 MySQL 日期到 PHP 日期

> ID：10671557
> 
> 赞同：1
> 
> 时间：2012-05-20T07:21:39.157
> 
> 标签：php, jquery, mysql, date, datatables

我正在使用数据表服务器端处理来检索我的表的所有值。一列呈现用户的注册日期，采用 MySQL 日期格式。是否可以在显示时转换为 PHP 日期格式。

```
$('#data').dataTable( {
        "bProcessing": true,
        "bServerSide": true,
        "sAjaxSource": "userlist.php",
} ); 
```

谢谢。

工作解决方案：

将此添加到服务器端但没有效果，

```
while ($aRow = mysql_fetch_array($rResult)) {
$row = array();
for ($i = 0; $i < count($aColumns); $i++) {
    if ($aColumns[$i] == "version") {
        /* Special output formatting for 'version' column */
        $row[] = ($aRow[$aColumns[$i]] == "0") ? '-' : $aRow[$aColumns[$i]];
    } elseif ($aColumns[$i] == "date") {
        /* Special output formatting for 'date' column */
        $date = new DateTime($aRow["date"]);
        $timestamp = $date->getTimestamp();
        $row[] = date("d-m-Y", $timestamp);
    } elseif ($aColumns[$i] != ' ') {
        /* General output */
        $row[] = $aRow[$aColumns[$i]];
    } 
}
$output['aaData'][] = $row; 
```

}

我的 mysql 列之一的名称为“日期”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T07:29:12.977

在从脚本发送输出之前，`userlist.php`只需使用 PHP`date('d-m-Y', $timestamp)`或其他任何方式重新格式化日期即可。

回应评论：

这段代码未经测试，但原理如下：

您的 SQL 表中有一个日期列，假设它称为“日期”。因此[在示例脚本中](http://datatables.net/examples/data_sources/server_side.html)：

```
$aColumns = array('date', etc.); 
```

在脚本底部的“输出”部分，您会看到：

```
if ( $aColumns[$i] == "version" )
{
    /* Special output formatting for 'version' column */
    $row[] = ($aRow[ $aColumns[$i] ]=="0") ? '-' : $aRow[ $aColumns[$i] ];
}
/* insert this date formatting statement here */
elseif ( $aColumns[$i] == "date" ) {
    /* Special output formatting for 'date' column */
    $date = new DateTime($aRow["date"]);
    $timestamp = $date->getTimestamp();
    $row[] = date("d-m-Y", $timestamp);
} 
```

如果您需要对日期列进行排序，则可能需要使用日期排序插件，因为数据表不为所有日期格式提供默认排序。

# sql - 如何在按计数排序的 sql 表中获得 10 个中间用户

> ID：10671558
> 
> 赞同：2
> 
> 时间：2012-05-20T07:21:41.930
> 
> 标签：sql, sql-server, sql-server-2008

我有两个具有以下架构的表：

**表 A**

```
usernName, email (one email per user) 
```

**表 B**

```
userName, product (many products per user) 
```

我想编写一个查询，返回`userName + email`产品数量最多的 10 个用户、中间的 10 个用户和产品数量最少的 10 个用户。

我预先验证有超过30条记录（避免重复）

我知道`groupby`帮不了我。我应该使用 rank`partitionby`吗？`groupby`和 和有什么不一样`partitionby`？

我该怎么写这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T07:32:18.957

```
SELECT  userName, email
FROM    (
        SELECT  *,
                ROW_NUMBER() OVER (ORDER BY products DESC) rn,
                COUNT(*) OVER () AS cnt
        FROM    (
                SELECT  userName, email, products
                FROM    a
                CROSS APPLY
                        (
                        SELECT  COUNT(*) products        
                        FROM    b
                        WHERE   b.userName = a.userName
                        ) p
                )
        ) q
WHERE   rn <= 10
        OR
        rn >= cnt - 10
        OR
        rn BETWEEN cnt / 2 - 5 AND cnt / 2 + 4 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T17:48:15.153

以下内容在逻辑上应该等同于[@Quassnoi 的建议](https://stackoverflow.com/a/10671613/297408)，但其构建方式使您能够`10`轻松地参数化（替换为`@cnt`以下内容）：

```
SELECT
  userName,
  email
FROM (
  SELECT
    A.userName,
    A.email,
    rnAsc    = ROW_NUMBER() OVER (ORDER BY COUNT(*) ASC),
    rnDesc   = ROW_NUMBER() OVER (ORDER BY COUNT(*) DESC)
  FROM A
    INNER JOIN B ON A.userName = B.userName
  GROUP BY
    A.userName,
    A.email
) s
WHERE rnAsc  <= @cnt
   OR rnDesc <= @cnt
   OR rnAsc - rnDesc BETWEEN -@cnt AND @cnt - 1
; 
```

# combobox - 如何通过 MenuItem 选择更改 Dojo ComboButton 标签？

> ID：10671559
> 
> 赞同：0
> 
> 时间：2012-05-20T07:21:51.323
> 
> 标签：combobox, dojo

我可以通过单击它拥有的菜单项来更改组合按钮的标签吗？我尝试通过以下方式做到这一点：

```
var menu_item=new MenuItem({
    label:search_types_value[key].display_name,
    onClick:function(){
        search_type_button.label="hi";
    search_type_button.startup();
    }
});

var search_type_button=new ComboButton({
    id:"search_type_button",
    label:"types",
    dropDown: search_type_menu
},"search_type_button"); 
```

但是，这似乎不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T11:21:19.603

乍一看，这似乎是一个范围问题。`search_type_button`在 onClick 函数中不可用。不要直接向菜单项提供 onclick 函数，而是使用`.connect`将 连接`onClick`到要执行的函数。

```
var menu_item=new MenuItem({
    label:search_types_value[key].display_name,
});

var search_type_button=new ComboButton({
    id:"search_type_button",
    label:"types",
    dropDown: search_type_menu
},"search_type_button");

search_type_button.connect(menu_item, 'onClick', function() {
    var newLabel = 'hi';
    this.set('label', newLabel);
}); 
```

# ios - 如何访问存储在 iphone 中的用户的视频或其他媒体文件？

> ID：10671567
> 
> 赞同：0
> 
> 时间：2012-05-20T07:23:25.363
> 
> 标签：ios

我不是指照片应用程序中的资产。

我想知道是否可以访问用户在 iphone 上的音乐或视频中拥有的媒体文件。

如果可能，我应该使用哪个框架？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T07:28:05.830

不越狱似乎是不可能的。

附言。刚才我发现我的 iPad 中的一个应用程序可以访问 video.app 列表。我的 iPad 是 ios 5.1.1。也许现在是可能的！

# android - ActionbarSerlock 示例项目未生成 R 文件

> ID：10671576
> 
> 赞同：1
> 
> 时间：2012-05-20T07:25:36.813
> 
> 标签：android, actionbarsherlock

我一直在尝试学习如何使用[ActionbarSherlock](http://actionbarsherlock.com/)来自定义我的应用程序并添加操作栏和使用片段。

我从他们的网站下载了 zip 文件，并将该`library`文件夹添加为一个新的 android 项目。

然后，我确保它已`isLibrary`检查为真。

之后，我从现有创建了一个新的 android 项目并添加了`JakeWharton-ActionBarSherlock-88fc341/samples/fragments`但突然我看到所有这些错误都出现了。

我确保它导入了`actionbarSherlock`项目，然后我`Gen`手动（删除）和通过`project>clean>clean all`选项删除了库，但没有生成 R 文件。

唯一生成的是一个`BuildConfig`文件，但我不能强制生成 R 文件。

有什么想法吗？

***构建配置.Java：***

```
package com.actionbarsherlock.sample.fragments;

public final class BuildConfig {
    public final static boolean DEBUG = true;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T08:10:56.560

好的。

因此，在[IRC 频道](http://webchat.freenode.net/)(#android-dev) 上与 Jake Wharton 交谈后，他在此处发表了评论，我检查了构建目标是否正确。不幸的是，因为`minSdk`是 7，构建目标不是在清单中指定的 15，而是 2.1：S

无论如何，解决方案是将目标构建更改为正确的构建（actionbarSherlock 为 15）并清理并再次构建......

非常感谢杰克。

# android - Android - 可用于传输多媒体的自定义文件格式是什么？

> ID：10671581
> 
> 赞同：1
> 
> 时间：2012-05-20T07:26:56.643
> 
> 标签：android, android-layout, file-upload

我的要求是创建一个可以播放的带有小音频文件、文本、小动画效果的 android 应用程序。如何定义新的可下载文件格式，可以从网站下载/通过蓝牙传输到其他手机。

使用该应用程序，我们必须能够导入文件格式，并且必须能够播放多媒体。你们能帮我看看如何进行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T09:11:34.240

仅使用 zip 文件怎么样？（由于音频和图像文件已经被压缩，您可以简单地对这些文件使用“存储”选项。）

# javascript - 视频阵列不工作

> ID：10671583
> 
> 赞同：1
> 
> 时间：2012-05-20T07:27:23.470
> 
> 标签：javascript, jquery, ios, arrays, html

当我单击`<body>`标签中的一个按钮时，它们都播放相同的视频，而不是应该播放的视频。这以前有效，但我找不到我改变的东西。有人可以指出吗？

脚本是

```
$("li, .thumbs").on('click', function() {   
        var numb = $(this).index(),
            videos = [" ", "http://homepage.mac.com/qt4web/A-chord.m4v",
            "images/intro01.m4v",
            "http://homepage.mac.com/qt4web/A-chord.m4v",
            "http://video-js.zencoder.com/oceans-clip.mp4",
            "images/clip2.m4v",
            "images/intro01.m4v",
            "images/clip2.m4v"],
            myVideo = document.getElementById("myVid");
            myVideo.src = videos[numb];
            myVideo.load();
            setTimeout(function(){
                myVideo.play();
                }, 200); 
```

和 html 是

```
<ul class="thumbs">
              <div style="top:-128px;"><li rel="0"><img src="" alt="" width="280" height="128" /></li></div>  
              <div style="top:0px;"><li rel="1"><img src="graphics/filler.png" alt="" width="280" height="128" /></li></div>
              <div style="top:128px;"><li rel="2"><img src="graphics/filler2.png" alt="" width="280" height="128" /></li></div>
              <div style="top:256px;"><li rel="3"><img src="graphics/filler.png" alt="" width="280" height="128" /></li></div>
              <div style="top:384px;"><li rel="4"><img src="graphics/filler2.png" alt="" width="280" height="128" /></li></div>
              <div style="top:512px;"><li rel="5"><img src="graphics/filler.png" alt="" width="280" height="128" /></li></div>
              <div style="top:640px;"><li rel="6"><img src="graphics/filler2.png" alt="" width="280" height="128" /></li></div>
    </ul> 
```

***编辑***：我非常抱歉这有多长，但我会发布脚本以防万一。阵列工作正常，直到某个时候，它可能在这里

```
$(document).ready(function () {
    var video = $("#myVid");    
    $("#MyT").fadeOut();
    video.on("loadedmetadata", function() {});
    $("li, .thumbs").bind("touchstart click", function() {
        $("#bigPic").removeClass("move");
        $("#MyT").fadeIn(0);});
        <!--$(".slider, .timeBar").fadeOut(0).fadeIn(0);
    $("li, .thumbs").on('click', function() {   
        var numb = $(this).index();
            videos = [" ", "http://homepage.mac.com/qt4web/A-chord.m4v",
            "images/intro01.m4v",
            "http://homepage.mac.com/qt4web/A-chord.m4v",
            "http://video-js.zencoder.com/oceans-clip.mp4",
            "images/clip2.m4v",
            "images/intro01.m4v",
            "images/clip2.m4v"];
            myVideo = document.getElementById("myVid");
            myVideo.src = videos[numb];
            myVideo.load();
            setTimeout(function(){
                myVideo.play();
                }, 200);            
    $("#myVid").bind("loadeddata", function() {
        $("#bigPic").addClass("move");
        $("#MyT").fadeOut(750);
    });
    $("#myVid").bind("playing", function() {
        ("#bigPic").removeClass("move");
        $("#MyT").fadeOut(750);    
            });
    $("#myVid").bind("ended", function () {
        $("#bigPic").removeClass("move");       
    function playArray(index,ele,array,listener){
    ele.removeEventListener(listener||0);
    ele.src = array[index];
    ele.load();
    ele.play();
    index++;
    if(index>=array.length){
        index=i;
    }
    listener = ele.addEventListener('ended',function(){
        playArray(index,ele,array,listener);
    },false);
}
playArray(0,document.getElementById("myVid"),videos);   
}); 
video.on("timeupdate", function() {
        var currentPos = myVid.currentTime;
        var maxduration = myVid.duration;
        var perc = 100 * currentPos / maxduration;
        $(".timeBar").css("width",perc+"%");    
    });
    var updatebar = function(x) {
        var progress = $(".progress");
        //calculate drag position
        //and update video currenttime
        //as well as progress bar
        var maxduration = myVid.duration;
        var percentage = 100 * position / progress.width();
        if(percentage > 100) {
            percentage = 100;
        }
        if(percentage < 0) {
            percentage = 0;
        }
        $(".timeBar").css("width",percentage+"%");  
        myVid.currentTime = maxduration * percentage / 100;};
});                 
});

$(function(){
  $("#content div:not(.slider)").bind('touchstart click', function() {
  $(".slider").animate({ top: $(this).offset().top, height: $(this).height() });
  });
  });

   $(function(){
$("#content div:not(.control)").bind('click', function() {
  // first, we hide .control, then do animation, then in the callback we do fadeIn
  $(".control").hide().animate({
    top: $(this).offset().top,
    height: $(this).height()
    }, function() {
       $(this).fadeIn();
    }
  );
});
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T07:33:55.183

尝试：

```
$(".thumbs li").click( function() {
    var numb = $(this).attr("rel");

        videos = [" ", "http://homepage.mac.com/qt4web/A-chord.m4v",
        "images/intro01.m4v",
        "http://homepage.mac.com/qt4web/A-chord.m4v",
        "http://video-js.zencoder.com/oceans-clip.mp4",
        "images/clip2.m4v",
        "images/intro01.m4v",
        "images/clip2.m4v"];
        myVideo = $("#myVid");
        myVideo.src = videos[numb];
        myVideo.load();
        setTimeout(function(){
            myVideo.play();
            }, 200);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T07:41:31.813

您可能想尝试修改获取索引的方式：
而不是

```
var numb = $(this).index(); 
```

你可以使用：

```
var numb = $(this).prevAll().length; 
```

# .net - 如何向 System.Windows.Forms.MenuItem 添加图标？

> ID：10671585
> 
> 赞同：5
> 
> 时间：2012-05-20T07:27:49.777
> 
> 标签：.net, winforms, menu, contextmenu

我试图向我的上下文菜单项之一添加一个图标，但我做不到。有谁能够帮我？

这是我写的代码：

```
 private System.Windows.Forms.ContextMenu notifyContextMenu;
 private void foo() {
            if (notifyIcon == null) {
                notifyIcon = new System.Windows.Forms.NotifyIcon();   
            }

           if (notifyContextMenu == null) {
               notifyContextMenu = new System.Windows.Forms.ContextMenu();
               notifyContextMenu.MenuItems.Add("Exit");
               // How do I add an icon to this context menu item?
             }
            notifyIcon.ContextMenu =  notifyContextMenu;
          }
     } 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-20T09:06:03.893

[Lex Li 的回答](https://stackoverflow.com/a/10671895/366904)涵盖了执行此操作的*最简单*方法：从`MainMenu`控件切换到控件，该`MenuStrip`控件为向每个菜单项添加图标提供了内置的、开箱即用的支持。不幸的是，正如我在对他的回答[的评论中所讨论的那样，这种解决方案会产生一些丑陋的后果。](https://stackoverflow.com/questions/10671585/system-windows-forms-menuitem-how-to-add-an-icon#comment13845835_10671895)

特别是，如果您使用该`MenuStrip`控件，您的菜单在较新版本的 Windows 上将永远看起来难看且不合适，因为它们是由可能永远不会更新的 .NET 代码自定义绘制的。当然，它们在 Windows XP 上看起来很漂亮，但至少 5 年来这已经是老新闻了。从 Windows Vista 开始，菜单看起来完全不同，这也是您的用户对您的应用程序的期望。世界上最酷的图标不会让你看起来更现代。相比：

               ![MenuStrip（及其小兄弟 ContextMenuStrip）在 Windows Vista 及更高版本上看起来非常丑陋，与使用 MainMenu（及其小兄弟 ContextMenu）实现的平台本机菜单相比](../Images/62d8f38ea580c97522fb1632255d13d5.png "MenuStrip（及其小兄弟 ContextMenuStrip）在 Windows Vista 及更高版本上看起来非常丑陋，与使用 MainMenu（及其小兄弟 ContextMenu")

所以更复杂的解决方案是坚持使用`MainMenu`控件，它实际上使用 Windows 本身绘制的菜单，但编写一些处理添加图标的代码。

幸运的是，Wyatt O'Day 已经为您编写了一个很棒的自定义控件。您所要做的就是下载它，将其放入您的项目中，编译并开始使用它。它是开源的，在 BSD 许可下获得许可，它生成的菜单*在所有版本的 Windows 上看起来都是平台原生的*。[从他的网站](http://wyday.com/vistamenu/)下载它，或者从[他的介绍和 100% 准确的咆哮](http://wyday.com/blog/2009/making-the-menus-in-your-net-app-look-professional/)开始。

结果**很棒**：

               ![比较 Wyatt 的 VistaMenu 控件在 4 种不同操作系统上的外观：Windows 7、Vista、XP 和 2000。在所有 4 种操作系统上，它看起来就像平台原生菜单，只是图标不同！](../Images/bca6af4481256b86b4426056c047353e.png "比较 Wyatt 的 VistaMenu 控件在 4 种不同操作系统上的外观：Windows 7、Vista、XP 和 2000。在所有 4 种操作系统上，它看起来就像平台原生菜单，只是图标不同！")

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-20T08:18:59.177

MainMenu/ContextMenu 已过时，您应该改用菜单条类。

改变

```
notifyContextMenu = new System.Windows.Forms.ContextMenu();
notifyContextMenu.MenuItems.Add("Exit"); 
```

至

```
notifyContextMenu = new System.Windows.Forms.ContextMenuStrip();
var exitMenuItem = notifyContextMenu.Items.Add("Exit");
exitMenuItem.Image = ...; 
```

[http://msdn.microsoft.com/en-us/library/system.windows.forms.toolstripitem.image.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.toolstripitem.image.aspx)

最后将上下文菜单条附加到通知图标，

```
notifyIcon.ContextMenuStrip = notifyContextMenu; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-10-23T18:11:22.070

您可以使用函数 SetMenuItemInfo 将图标添加到菜单项。

```
using System;
using System.Collections.Generic;
using System.Drawing;
using System.Drawing.Imaging;
using System.Runtime.InteropServices;
using System.Windows.Forms;

namespace WindowsFormsApp1
{
    class Program
    {
        static void Main()
        {
            var menu = new ContextMenu();
            menu.Popup += MenuItem_Popup;
            SetMenuInfo(menu.Handle, new MENUINFO());
            var item = menu.MenuItems.Add("Exit", (sender, e) => Application.Exit());
            SetImage(item, Properties.Resources.Image1);

            var notifyIcon = new NotifyIcon
            {
                Icon = Properties.Resources.Icon1,
                ContextMenu = menu
            };
            notifyIcon.Visible = true;
            Application.Run();
            notifyIcon.Visible = false;
        }

        static Dictionary<MenuItem, IntPtr> MenuBitmaps = new Dictionary<MenuItem, IntPtr>();

        static void SetImage(MenuItem item, Image img)
        {
            using (var bmp = new Bitmap(img.Width, img.Height, PixelFormat.Format32bppPArgb))
            {
                using (var g = Graphics.FromImage(bmp)) g.DrawImage(img, 0, 0);
                MenuBitmaps[item] = bmp.GetHbitmap(Color.FromArgb(0));
            }
        }

        static void MenuItem_Popup(object sender, EventArgs e)
        {
            var info = new MENUITEMINFO();
            int i = 0;
            foreach (MenuItem item in ((Menu)sender).MenuItems)
                if (item.Visible)
                {
                    if (MenuBitmaps.TryGetValue(item, out info.hbmpItem))
                        SetMenuItemInfo(((Menu)sender).Handle, i, true, info);
                    i++;
                }
        }

        [DllImport("user32.dll", CharSet = CharSet.Auto)]
        static extern bool SetMenuInfo(IntPtr hMenu, MENUINFO lpcmi);

        [DllImport("user32.dll", CharSet = CharSet.Auto)]
        static extern bool SetMenuItemInfo(IntPtr hMenu, int uItem, bool fByPosition, MENUITEMINFO lpmii);
    }

    [StructLayout(LayoutKind.Sequential, CharSet = CharSet.Auto)]
    public class MENUINFO
    {
        public int cbSize = Marshal.SizeOf(typeof(MENUINFO));
        public int fMask = 0x10; //MIM_STYLE
        public int dwStyle = 0x4000000; //MNS_CHECKORBMP
        public uint cyMax;
        public IntPtr hbrBack;
        public int dwContextHelpID;
        public IntPtr dwMenuData;
    }

    [StructLayout(LayoutKind.Sequential, CharSet = CharSet.Auto)]
    public class MENUITEMINFO
    {
        public int cbSize = Marshal.SizeOf(typeof(MENUITEMINFO));
        public int fMask = 0x80; //MIIM_BITMAP
        public int fType;
        public int fState;
        public int wID;
        public IntPtr hSubMenu;
        public IntPtr hbmpChecked;
        public IntPtr hbmpUnchecked;
        public IntPtr dwItemData;
        public IntPtr dwTypeData;
        public int cch;
        public IntPtr hbmpItem;
    }
} 
```

# macos - PyQt 用 pyrcc4 编译 .qrc 文件以在 OSX 下的 Maya 中使用

> ID：10671593
> 
> 赞同：0
> 
> 时间：2012-05-20T07:28:58.327
> 
> 标签：macos, pyqt, maya

我在尝试编译资源文件（文件名为 resource.qrc）时遇到了很多麻烦。我正在使用 PyQt 为 Maya 制作用户界面，并且在 OSX 10.6.8 中进行。PyQt、Qt、Sip 工作正常。我最初使用的是Windows，并在win7下编译了我的资源文件。

我设法在这里找到了 pyrcc4 可执行文件

**/Applications/Autodesk/maya2013/Maya.app/Contents/Frameworks/Python.framework/Versions/2.6/bin/pyrcc4**

和这里

**/usr/local/bin/pyrcc4**

但是当我使用这个可执行文件时，我收到以下错误

```
dyld: Library not loaded: libQtCore.4.dylib
Referenced from: /Applications/Autodesk/maya2013/Maya.app/Contents/Frameworks/Python.framework/Versions/2.6/bin/pyrcc4
Reason: image not found
Trace/BPT trap 
```

我是否使用了正确的 pyrcc4 可执行文件？我在网上找不到任何关于在 OSX 下编译 .qrc 文件的文档，所以我不确定。如果是正确的 pyrcc4，我该如何纠正上述问题？有没有另一种方法可以在 OSX 下编译 .qrc 文件？

我还在**/usr/local/Trolltech/Qt-4.7.1/bin/**下找到了可执行的 rcc 。使用 rcc 编译可以成功地在 C++ 中编译它。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T11:24:55.107

`pyrcc4`似乎无法找到 Qt 库。

尝试找到库所在的目录并将`LD_LIBRARY_PATH`变量设置为指向它：

```
export LD_LIBRARY_PATH="/path/to/qt/libs" 
```

或直接使用：

```
LD_LIBRARY_PATH="/path/to/qt/libs" pyrcc4 <inputs> 
```

# c - 为什么 printf("%.6g, ) 忽略小数点后的零？

> ID：10671600
> 
> 赞同：4
> 
> 时间：2012-05-20T07:30:04.897
> 
> 标签：c, floating-point, double, printf, precision

我想在小数点后最多打印 6 位，所以我使用了以下内容：

```
printf("%.6g",0.127943989); 
```

的输出`printf`是 0.127944 这是正确的，但是当我尝试这个时：

```
printf("%.6g",0.007943989); 
```

输出变成了 0.00794399，这不是我期望看到的！

似乎`printf`忽略了小数点后的零。那么如何强制它输出最大 6 位精度呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T07:41:26.757

是`"%f"`格式说明符：

```
printf("%.6f\n",0.007943989)  // prints 0.007944 
```

你在找什么？请记住，如果数字允许，这不会自动切换到`%e`格式样式，因此这可能也不是您要寻找的。

例如，以下内容：

```
printf("%.6g\n",0.00007943989);
printf("%.6f\n",0.00007943989); 
```

印刷：

```
7.94399e-005
0.000079 
```

并且不清楚您是否想要提供的较小数字的指数形式`"%g"`。

请注意，对于精度规范的处理方式，规范`%f`和`%g`的行为略有不同。

*   for `%f`：“小数点字符后的位数等于精度规范”
*   for `%g`：“具有指定有效位数的精度”

并且小数点后的零不计入有效数字（这解释了您看到的行为`%g`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T07:51:52.720

ISO C 标准要求

> 可选精度，形式为句点 ('.')，后跟可选的十进制数字字符串... 这给出 ... **g**和**G**转换的最大有效位数

这是使用 GNU libc（GCC 4.5.1、libc 2.11；GCC 4.6.3、libc 2.15）获得的输出

```
printf("%.6g\n", 0.12);
0.12
printf("%.6g\n", 0.1234567890);
0.123457
printf("%.6g\n", 0.001234567890);
0.00123457
printf("%#.6g\n", 0.001234567890);
0.00123457
printf("%.6g\n", 0.00001234567890);
1.23457e-05
printf("%#.6g\n", 0.00001234567890);
1.23457e-05

printf("%.6f\n", 0.12);
0.120000
printf("%.6f\n", 0.1234567890);
0.123457
printf("%.6f\n", 0.001234567890);
0.001235
printf("%#.6f\n", 0.001234567890);
0.001235
printf("%.6f\n", 0.001234567890);
0.000012
printf("%#.6f\n", 0.001234567890);
0.000012 
```

# php - eval 函数的替代方法是什么？

> ID：10671602
> 
> 赞同：7
> 
> 时间：2012-05-20T07:30:14.300
> 
> 标签：php, eval

我`eval()`在我当前的项目中使用这样的：

```
if (class_exists($class_name)) //$class_name depends on user input
    eval($class_name.'::MyStaticMethod()'); 
```

`eval()`当且仅当具有名称`$class_name`的类存在时才会执行，所以它有点安全，但我仍然认为这不是最好的解决方案。

我可以做上面没有的代码`eval()`吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-07-17T12:42:47.977

*我最近回答[了这个问题](https://stackoverflow.com/questions/17672183/php-eval-does-not-return-the-function-results)。[我的答案](https://stackoverflow.com/a/17672269/1283847)的最后一部分完美地回答了这个问题，并且对未来的读者来说比这里提供的答案更有用。这就是为什么我要回答我自己的问题。*

PHP 有一些特性可以避免`eval`在大多数情况下使用：

1.  PHP 是一种非常动态的语言。它有能力做以下事情[`strings`](http://php.net/manual/en/language.types.string.php)：

    *   定义和/或获取变量（从 PHP 4.3 开始支持）。例如：

        ```
        $variableName = 'MyVariable';
        // Create new variable with the name defined in variable $variableName
        ${$variableName} = 'MyValue';
        //Outputs: string(7) "MyValue"
        var_dump($MyVariable);
        //Outputs: string(7) "MyValue"
        var_dump(${'MyVariable'}); 
        ```

        [演示](http://3v4l.org/AQ5I3)

    *   调用函数（从 PHP 4.3 开始支持）。例如：

        ```
        // Create function with the name defined in variable $functionName
        function MyFunction($argument) {
            return 'Argument passed is: '.$argument;
        }

        $functionName = 'MyFunction';

        // Outputs:
        // string(48) "Argument passed is: Calling MyFunction directly."
        var_dump(MyFunction('Calling MyFunction directly.'));
        // Outputs:
        // string(51) "Argument passed is: Calling MyFunction with string."
        var_dump($functionName('Calling MyFunction with string.')); 
        ```

        [演示](http://3v4l.org/lPDRH)

    *   创建类的实例（从 PHP 5.0 开始支持）。例如：

        ```
        class MyClass {
            public function __construct() {
                echo 'Constructing MyClass'."\n";
            }
        }

        $className = 'MyClass';

        $objFromString = new $className();
        // Outputs: object(MyClass)#1 (0) {}
        var_dump($objFromString); 
        ```

        [演示](http://3v4l.org/dkqP0)

    *   调用静态方法（从 PHP 5.0 开始支持）。例如：

        ```
        class MyClass {
            public static function staticMethod() {
                return 'MyClass::staticMethod called';
            }
        }

        $staticMethodName = 'staticMethod';
        // Outputs: string(28) "MyClass::staticMethod called"
        var_dump(MyClass::$staticMethodName()); 
        ```

        [演示](http://3v4l.org/rApQn)

        从 PHP 5.3 开始，类名也可以通过字符串定义。例子：

        ```
        class MyClass {
            public static function staticMethod() {
            return 'MyClass::staticMethod called';
            }
        }

        $className = 'MyClass';
        $staticMethodName = 'staticMethod';

        var_dump($className::$staticMethodName());
        var_dump($className::staticMethod()); 
        ```

        [演示](http://3v4l.org/TCnSr)

    *   调用对象的实例方法（从 PHP 5.0 开始支持）。例如：

        ```
        class MyClass {
            public function instanceMethod() {
                return 'MyClass::instanceMethod called';
            }
        }

        $methodName = 'instanceMethod';

        $obj = new MyClass();
        // Outputs: string(30) "MyClass::instanceMethod called"
        var_dump($obj->$methodName()); 
        ```

        [演示](http://3v4l.org/eiLdL)

    *   访问对象的静态和实例属性（从 PHP 5.0 开始支持）。例如：

        ```
        class MyClass {
            public static $myStaticProperty;
            public $myInstanceProperty;
        }

        $staticPropertyName = 'myStaticProperty';
        $instancePropertyName = 'myInstanceProperty';

        MyClass::${$staticPropertyName} = 'my static value';
        $obj = new MyClass();
        $obj->{$instancePropertyName} = 'my instance value';

        var_dump(MyClass::${$staticPropertyName});
        var_dump($obj->{$instancePropertyName}); 
        ```

        [演示](http://3v4l.org/njit9)

2.  PHP 有两个功能：[`call_user_func`](http://php.net/manual/en/function.call-user-func.php)和[`call_user_func_array`](http://www.php.net/manual/en/function.call-user-func-array.php)用于动态函数/方法调用。两者都有完整的记录，所以我不会在这里详细介绍。
3.  即使上面的一切还不够 PHP 5 附带了很棒的[`Reflection`AP](http://php.net/manual/en/book.reflection.php) ​​I。不幸的是，文档中的示例很少，但反射是这里要讨论的一个很大的话题。基本上，在阅读了它的工作原理之后使用反射并不是什么大不了的事。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-20T07:32:37.433

我建议[`call_user_func`](http://php.net/manual/de/function.call-user-func.php.)。

另一种方法是`call_user_func()`这样称呼它：

```
$class_and_method = 'Class::MyStaticMethod()';
$class_and_method(); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-20T07:33:03.937

是的：

```
call_user_func(array($class_name, 'MyStaticMethod')); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-01T01:17:48.850

自 PHP 5.3+ 起，

```
$class_name::MyStaticMethod(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-20T08:48:36.443

Adisory: userinput + eval = 安全漏洞；

eval 也是一项昂贵的操作，需要将字符串解析为可操作的格式（解析树、抽象语法树等）并执行新找到的逻辑。

你不想评估每一个小代码。如果您有一些东西可以咀嚼，或者更确切地说将该逻辑放在可重用和参数化的地方，例如函数，请使用 eval。

同样从 php 5.4 开始

```
$method = array('class_name', 'method_name');
$method(); // calls class_name::method_name() 
```

# csrf - 跨站请求伪造与登录的关系

> ID：10671603
> 
> 赞同：3
> 
> 时间：2012-05-20T07:30:29.130
> 
> 标签：csrf, csrf-protection

我想知道登录和跨站点请求伪造之间是否有任何关系？我的问题是，是否有不需要登录但仍需要保护 CSRF 的网站？能给我举个例子吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T07:49:01.427

为了使 CSRF 有效，您的站点只需要能够以不需要显式身份验证或验证的方式代表某人行事。

通过自动登录 cookie 登录的用户是最流行的 CSRF 攻击，但例如时事通讯订阅表格可能同样容易受到攻击，并且可能导致人们从您的系统收到不需要的电子邮件以确认他们的订阅。

所以回答你的问题，虽然登录和 CSRF 是相关的，但它们并不是相互排斥的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-22T10:44:51.220

CSRF 攻击利用客户端请求的真实性，因为攻击站点能够伪造客户端代表客户端执行的请求，从而享有服务器对客户端请求的信任。因此，服务器假定来自客户端的任何请求都是控制客户端的用户的预期行为。CSRF 利用了这种隐含的信任。

此时不需要对客户端进行身份验证。尽管经过身份验证的用户通常具有攻击站点所针对的特权，但 CSRF 攻击的主要目标是在用户不知情的情况下代表用户发送任意请求。因此，目标站点也可以是您需要与攻击站点不同的发起者的任何站点（例如投票、唯一访问者、恶意活动等）。

# c# - 我应该在线程完成工作后将线程引用显式设置为 null 吗？

> ID：10671604
> 
> 赞同：2
> 
> 时间：2012-05-20T07:30:37.477
> 
> 标签：c#, multithreading

我应该在线程完成工作后将线程引用显式设置为 null 还是没有必要？如果我想将其设置为 null 那么我应该在代码中的哪个位置执行此操作？

我应该使用标志检查线程是否处于活动状态`thread.isalive`，然后如果它不活动则将其设置为 null 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T07:38:35.463

您应该像对待任何其他对象一样对待 Thread ：
仅在需要时保留引用（例如对于 a `Join()`）。

当您确实有一个长期引用 ta Thread（即在静态字段中）`null`时，您应该将其设置为不再需要它的时间。但最好不要有这样的变量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-21T02:17:00.563

> 我应该在线程完成工作后将线程引用显式设置为 null 还是没有必要？

就个人而言，我不会打扰。在某些情况下，明确地将对象引用设置为 null 确实很重要。无论类型如何，这些案例都是：

*   如果变量是静态成员并且它引用的对象会消耗大量内存。
*   如果该变量是一个包含在更长生命周期的对象中的实例成员，该对象引用了一个消耗大量内存的对象。
*   如果变量是长时间运行的方法的局部变量，该方法引用了一个消耗大量内存的对象。¹

这些是我能想到的。也许还有更多，但可能不多。这里的共同点是变量引用了一个消耗大量内存的对象。托管`Thread`对象本身不会消耗大量内存，因此我无法想象将类型变量设置`Thread`为 null 将为您完成很多工作，无论它如何使用。大多数资源在线程启动时分配，然后在线程结束时释放。

> 我是否应该使用 thread.isalive 标志检查线程是否处于活动状态，如果它不活动，则将其设置为 null。

我更喜欢使用`Thread.Join`来测试并等待线程完成。事实上，我*从来没有*用过`Thread.IsAlive`任何有用的东西……曾经。

* * *

¹*如果 GC 可以检测到不再使用引用，则 GC 实际上足够聪明，可以在方法结束之前处理本地对象引用。*

# python - Python 到 C 转换器/解释器

> ID：10671606
> 
> 赞同：7
> 
> 时间：2012-05-20T07:30:54.533
> 
> 标签：python, c, converter

将 Python 脚本转换为 C 的各种工具有哪些。我主要看这些工具/转换器/解释器的速度。

谢谢，-J

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-20T07:45:19.073

cython 是您正在寻找的[http://www.cython.org/](http://www.cython.org/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-20T11:49:54.177

Mark Dufour 的[Shedskin](http://code.google.com/p/shedskin/)是一个有趣的替代方案，它可以解析大量 python 子集，并将其转换为 C++。该项目还有一个非常好的[博客](http://shed-skin.blogspot.com.au/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T12:00:23.663

您可以使用[Pypy 将 Python 语言的一个子集翻译为 C](http://doc.pypy.org/en/release-2.4.x/translation.html)。

# java - 绝对定位 JButton

> ID：10671607
> 
> 赞同：0
> 
> 时间：2012-05-20T07:31:07.023
> 
> 标签：java, layout, null, jframe, jbutton

我试图定位一个具有空布局的 JButton，但它不会显示，如果我切换到 gridlayout，无论我改变什么，它们都只会在中间排列。如何设置按钮的位置和大小？

帧内

```
package Run;

import javax.swing.*;

import ThreeD.Display;
import ThreeD.Launcher;
import TowerDefence.Window;

import java.awt.*;
import java.awt.image.BufferedImage;

public class Frame extends JFrame{

    public static String title = "Game";        

    /*public static int GetScreenWorkingWidth() {
        return java.awt.GraphicsEnvironment.getLocalGraphicsEnvironment().getMaximumWindowBounds().width;
    }*/

    /*public static int GetScreenWorkingHeight() {
        return java.awt.GraphicsEnvironment.getLocalGraphicsEnvironment().getMaximumWindowBounds().height;
    }*/

    //public static Dimension size = new Dimension(GetScreenWorkingWidth(), GetScreenWorkingHeight());
    public static Dimension size = new Dimension(1280, 774);

    public static void main(String args[]) {
        Frame frame = new Frame();

        System.out.println("Width of the Frame Size is "+size.width+" pixels");
        System.out.println("Height of the Frame Size is "+size.height+" pixels");
    }

    public Frame() {
        setTitle(title);
        setSize(size);
        setResizable(false);
        setLocationRelativeTo(null);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        ThreeDLauncher();
    }

    public void ThreeDLauncher() {
        //setLayout(new GridLayout(1, 1, 0, 0));
        setLayout(null);

        Launcher launcher = new Launcher();
        add(launcher);

        setVisible(true);       
    }

    public void TowerDefence() {
        setLayout(new GridLayout(1, 1, 0, 0));

        Window window = new Window(this);
        add(window);

        setVisible(true);
    }

    public void ThreeD() {
        BufferedImage cursor = new BufferedImage(16, 16, BufferedImage.TYPE_INT_ARGB);
        Cursor blank = Toolkit.getDefaultToolkit().createCustomCursor(cursor, new Point(0, 0), "blank");

        getContentPane().setCursor(blank);

        Display display = new Display();
        add(display);

        setVisible(true);

        display.start();
    }

} 
```

在启动器中

```
package ThreeD;

import java.awt.Rectangle;

import javax.swing.JButton;
import javax.swing.JPanel;
import javax.swing.UIManager;

public class Launcher extends JPanel{   
    private JButton play, options, help, mainMenu;
    private Rectangle rplay, roptions, rhelp, rmainMenu;

    public Launcher() {
        drawButtons();
    }

    private void drawButtons() {
        try {
            UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        } catch(Exception e) {
            e.printStackTrace();
        }

        play = new JButton("Play");
        options = new JButton("Options");
        help = new JButton("Help");
        mainMenu = new JButton("Main Menu");

        rplay = new Rectangle(20, 50, 80, 40);
        roptions = new Rectangle(20, 50, 80, 40);
        rhelp = new Rectangle(20, 50, 80, 40);
        rmainMenu = new Rectangle(20, 50, 80, 40);

        play.setBounds(rplay);
        options.setBounds(roptions);
        help.setBounds(rhelp);
        mainMenu.setBounds(rmainMenu);

        add(play);
        add(options);
        add(help);
        add(mainMenu);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T07:50:00.517

子容器不继承父容器的 LayoutManager，所以在 Launcher 的构造函数中我会推荐：

```
public Launcher() {
    this.setLayout(null);
    //this.setLayout(new GroupLayout(2, 2)); // I strongly recommend you try this though and get rid of the setBounds and rects
    drawButtons();
} 
```

编辑：LayoutManagers 布局他们的组件，但不是组件内部的内容。这就是为什么仅仅设置框架的布局是不够的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T07:46:38.503

我的猜测是您在添加`JPanel`启动器之前没有设置大小或布局。所以按钮显示正常，但 JPanel 不是。尝试输入：

```
launcher.setBounds( new Rectangle( 0, 0, 200, 200 ) ); 
```

或您需要的任何尺寸。

看看这是否有效

# ruby-on-rails - 无法批量分配受保护的属性：password_confrimation

> ID：10671609
> 
> 赞同：1
> 
> 时间：2012-05-20T07:31:34.580
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我不知道为什么我会收到以下关于大规模分配保护的错误。虽然我有配置设置为 config.active_record.whitelist_attributes = false

以下是模型和控制器的代码

有任何想法吗？

```
 ActiveModel::MassAssignmentSecurity::Error in UsersController#create 
Can't mass-assign protected attributes: password_confrimation
Rails.root: C:/Users/huzaifa.gain/My Documents/Aptana Studio 3 Workspace/blog

Application Trace | Framework Trace | Full Trace
app/controllers/users_controller.rb:7:in `new'
app/controllers/users_controller.rb:7:in `create'

Request

Parameters: 
{"utf8"=>"?",
 "authenticity_token"=>"CIPrmS9ZZlgUELOMkAT6Htw1eLPMxmXRh7Ur7doeYcY=",
 "user"=>{"email"=>"huzi",
 "password"=>"[FILTERED]",
 "password_confrimation"=>"[FILTERED]"},
 "commit"=>"Create User"}

class UsersController < ApplicationController
  def new 
    @user = User.new
  end

  def create
    @user = User.new(params[:user])
    if @user.save
       redirect_to_ articles_path, :notice => 'User successfully added.'
     else 
       render :action =>'new'
    end
  end

  def edit
    @user = User.find(parms[:id]) 
  end

  def update
    @user = User.find(parms[:id])
    if @user.update_attributes(params[:user])
      redirect_to articles_path, :notice => 'Updated user information successfully'
    else 
      render :action => 'edit'
    end
  end
end

require 'digest'
class User < ActiveRecord::Base

  attr_accessor  :email, :password , :password_confirmation
  attr_accessible :email, :password , :password_confirmation
  validates :email, :uniqueness => true, 
                                    :length => {:within => 5..50},
                                    :presence => true

  validates :password, :confirmation => true, :length => { :within => 4..20 }, :presence => true, :if => :password_required?

  has_one :profile

  has_many :articles, :order => 'published_at DESC, title ASC',
                      :dependent => :nullify
  has_many :replies, :through => :articles, :source => :comments

  before_save :encrypt_new_password

  def self.authenticate(email, password)
    user = find_by_email(email)
        return user if user && user.authenticated?(password)
  end

  def authenticated?(password)
    self.hashed_password == encrypt(password)
  end

  def encrypt_new_password
    return if password.blank?
      self.hashed_password  = encrypt(password)                                                                                                                                                                                                                                                                                                                                                                                                                                                              
  end

  def password_required?
    hashed_password.blank? || password.present?
  end

 def encrypt(string)
   Digest::SHA2.hexdigest(string)
 end 

end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T13:46:09.293

我认为这是因为一个错字。您的模型有`attr_accessible :email, :password , :password_confirmation`，但看起来您的表单拼写为 password_confrimation。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T14:05:08.303

更改您的表格：

```
:password_confrimation 
```

至：

```
:password_confirmation 
```

这是一个错字。

# python - 如何确定提要是否在没有 etag 的情况下更新并修改了标题作为响应？

> ID：10671610
> 
> 赞同：0
> 
> 时间：2012-05-20T07:31:42.143
> 
> 标签：python, http-headers, atom-feed, feedparser

我正在使用 feedparser 解析原子提要。我发出请求时发回的响应标头键是日期、内容长度、内容类型、字符集、连接、服务器。这是提要的起点，

```
<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
<title>Hello</title>
<link href="http://example.com/"/>
<link rel="self" href="http://example.com/feed"/>
<link rel="search" type="application/opensearchdescription+xml"             href="http://example/com/search.xml" title="Hello" />
<updated>2012-05-20T02:24:56Z</updated>
<id>abcd/</id>
<icon>abcd</icon>
<author><name>abcd</name></author> 
```

更新后的标签的值必须是最后一次更新提要的时间。是否可以在 feedparser.parse 方法的请求标头中发送此更新值？如果是，那将是哪个标头，然后检查响应标头以查看它是否已更新？除此之外，还有其他方法可以确定提要是否已更新？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T07:08:29.963

您可以在请求中设置[If-Modified-Since](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.25)`304 Not Modified` ，如果内容尚未更新，则应该获取。如果您收到 200 响应，但内容确实没有更新，则服务器不接受请求，除了比较内容的日期或哈希值之外，您几乎无能为力。

# html - 如何控制选择标签的宽度？

> ID：10671614
> 
> 赞同：42
> 
> 时间：2012-05-20T07:32:23.333
> 
> 标签：html, css

我有一个国家列表，有些国家的名字很长：

```
<select name=countries>
 <option value=af>Afghanistan</option>
 <option value=ax>Åland Islands</option>
 ...
 <option value=gs>South Georgia and the South Sandwich Islands</option>
 ...
</select> 
```

默认情况下，选择框将与列表中最长的选项一样长。我想创建一个选择框，使其在从宽浏览器窗口查看时显示默认行为，但在从窄浏览器窗口查看时很好地适应容器宽度的 90%，小于最长选项的长度。

我试过`min-width: 90%;`了，但没有用。这可以单独通过 CSS 样式来完成吗？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-05-20T07:42:39.233

采用`style="max-width:90%;"`

```
<select name=countries  style="max-width:90%;">
 <option value=af>Afghanistan</option>
 <option value=ax>Åland Islands</option>
 ...
 <option value=gs>South Georgia and the South Sandwich Islands</option>
 ...
</select> 
```

[**现场演示**](http://jsfiddle.net/nGFnj/3/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-20T07:56:24.427

你只是把它倒过来了。指定最小宽度将使选择菜单始终*至少*是该宽度，因此无论窗口大小如何，它都会继续扩展至 90%，并且至少是其最长选项的大小。

你需要`max-width`改用。这样，它会让选择菜单扩展到其最长的选项，但如果它超出了您设置的最大 90% 宽度，请将其压缩到该宽度。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-11-15T14:00:36.803

添加 div 包装器

```
<div id=myForm>
<select name=countries>
 <option value=af>Afghanistan</option>
 <option value=ax>Åland Islands</option>
 ...
 <option value=gs>South Georgia and the South Sandwich Islands</option>
 ...
</select>
</div> 
```

然后写CSS

```
#myForm select { 
width:200px; }

#myForm select:focus {
width:auto; } 
```

希望这会有所帮助。

# android - 应用程序仅在启动模拟器/电话时显示强制关闭，因为广播接收器显示异常

> ID：10671619
> 
> 赞同：0
> 
> 时间：2012-05-20T07:33:17.327
> 
> 标签：android, broadcastreceiver, forceclose

该应用程序仅在模拟器/手机重新启动时显示强制关闭。它有两个广播接收器 1 用于检查电话状态和接听电话，其他用于在顶部保留通知图标。接收器监控手机状态仅在启动时给出以下异常，否则应用程序工作正常。日志如下所示

```
05-20 12:48:15.688: INFO/Andros:AnsTheCall:receiver(218): initialised the receiver
05-20 12:48:15.707: WARN/dalvikvm(218): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
05-20 12:48:15.827: ERROR/AndroidRuntime(218): FATAL EXCEPTION: main
05-20 12:48:15.827: ERROR/AndroidRuntime(218): java.lang.RuntimeException: Unable to start receiver com.andros.AnsTheCall.AnsTheCallReceiver: java.lang.NullPointerException
05-20 12:48:15.827: ERROR/AndroidRuntime(218):     at android.app.ActivityThread.handleReceiver(ActivityThread.java:2821)
05-20 12:48:15.827: ERROR/AndroidRuntime(218):     at android.app.ActivityThread.access$3200(ActivityThread.java:125)
05-20 12:48:15.827: ERROR/AndroidRuntime(218):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2083)
05-20 12:48:15.827: ERROR/AndroidRuntime(218):     at android.os.Handler.dispatchMessage(Handler.java:99)
05-20 12:48:15.827: ERROR/AndroidRuntime(218):     at android.os.Looper.loop(Looper.java:123)
05-20 12:48:15.827: ERROR/AndroidRuntime(218):     at android.app.ActivityThread.main(ActivityThread.java:4627)
05-20 12:48:15.827: ERROR/AndroidRuntime(218):     at java.lang.reflect.Method.invokeNative(Native Method)
05-20 12:48:15.827: ERROR/AndroidRuntime(218):     at java.lang.reflect.Method.invoke(Method.java:521)
05-20 12:48:15.827: ERROR/AndroidRuntime(218):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
05-20 12:48:15.827: ERROR/AndroidRuntime(218):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
05-20 12:48:15.827: ERROR/AndroidRuntime(218):     at dalvik.system.NativeStart.main(Native Method)
05-20 12:48:15.827: ERROR/AndroidRuntime(218): Caused by: java.lang.NullPointerException
05-20 12:48:15.827: ERROR/AndroidRuntime(218):     at com.andro.AnsTheCall.AnsTheCallReceiver.onReceive(AnsTheCallReceiver.java:37)
05-20 12:48:15.827: ERROR/AndroidRuntime(218):     at android.app.ActivityThread.handleReceiver(ActivityThread.java:2810)
05-20 12:48:15.827: ERROR/AndroidRuntime(218):     ... 10 more 
```

请帮忙

```
public class AnsTheCallReceiver extends BroadcastReceiver {

public static final String TAG = "Andros:AnsTheCall:receiver";
public selectedTabType attentFlag = selectedTabType.TYPE_INVALID;

private Intent AnsTheCallServiceIntent = null;
public String contactName = null;
public String contactEmail = "";
public int PhoneNumberCount= 0;

@Override
public void onReceive(Context context, Intent intent) {

    SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(context);
    SharedPreferences.Editor editor = prefs.edit();
    // Check phone state
    String phone_state = intent.getStringExtra(TelephonyManager.EXTRA_STATE);
    String phoneNumber = intent.getStringExtra(TelephonyManager.EXTRA_INCOMING_NUMBER);
    String lastPhoneNumber = null;
    Log.i(TAG,"initialised the receiver");

    if (phone_state.equals(TelephonyManager.EXTRA_STATE_RINGING) && prefs.getBoolean("appEnabled", false)) {
        int is_starred = isStarred(context, phoneNumber); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T08:30:20.270

检查`com.andro.AnsTheCall.AnsTheCallReceiver.onReceive(AnsTheCallReceiver.java:37`导致您的服务强制关闭的原因。

> 12：48：15.827：错误/AndroidRuntime（218）：引起：java.lang.NullPointerException 05-20 12：48：15.827：错误/AndroidRuntime（218）：在 com.andro.AnsTheCall.AnsTheCallReceiver.onReceive（AnsTheCallReceiver。爪哇：37）05-20 12：48：15.827：

# javascript - Swig（Node.js）中的JSON.parse（）？

> ID：10671620
> 
> 赞同：2
> 
> 时间：2012-05-20T07:33:19.977
> 
> 标签：javascript, node.js, template-engine, swig-template

当我被困在这里时，我正试图从 Jade 切换到 Swig（被 Swig 的疯狂性能所吸引）作为我的 Express 模板引擎——我正在将一系列序列化 JSON 从 Express 发送到 Swig 并使用此循环检索 Swig 中的数据这里：

```
<ul id = "list">
    {% if items %}
        {% for item in items %}
            {{ JSON.parse( item ).title }}
        {% endfor %}
    {% endif %}
</ul> 
```

...但我明白了：

```
SyntaxError: Unexpected token )
    at Object.Function (unknown source)
    at createTemplate (/home/vijay/node_modules/swig/index.js:72:14)
    at getTemplate (/home/vijay/node_modules/swig/index.js:109:26)
    at Object.compile (/home/vijay/node_modules/swig/index.js:153:16) 
```

如果我更改`JSON.parse( item ).title`为`JSON.parse( item )`上述内容，而不是错误，我会在我的视图中得到这个：

```
function parse() { [native code] } 
```

下面看一下`item`JSON 对象：

```
item { 
    id     : 2,
    title  : 'City Life ',
    author : 'Timothy J. Lindenburg',
    date   : 1337498792626,
    indent : 0         
} 
```

简而言之，我想访问`item`Swig 中的各个键和值，但我无法让 JSON.parse() 工作。如果有人能指出我正确的方向，将不胜感激（我听说 Swig 是基于 Django 模板的，所以如果你使用过这些模板，这应该很容易）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T14:24:42.610

我不知道你为什么要解析它。在 swig 中，它已经是 JSON。因此，要获得标题，请更改`{{ JSON.parse(item).title }}`为`{{ item.title }}`.

# java - Console() 的运行时错误

> ID：10671625
> 
> 赞同：0
> 
> 时间：2012-05-20T07:34:01.223
> 
> 标签：java, runtime-error, noclassdeffounderror

我已经安装了 JDK 1.6 版，现在代码已编译但会引发运行时错误

```
class Console1
{
    public static void main(String args[])
    {
        System.console().readLine("this is how we give he input to the string");
        System.out.println("this is what we want to print:0)");
    }
} 
```

## 输出

```
exception in thread "main" java.lang.NoClassDefFoundError: Console 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T08:21:23.387

看起来您正在使用不同版本的 Java 运行。将此作为第一行代码添加到您的“应用程序”中。它将显示用于运行应用程序的 java 版本。

```
System.out.println(System.getProperty("java.version")); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T08:02:41.350

Instead of console you can use...

```
BufferedReader bufferRead = new BufferedReader(new InputStreamReader(System.in));
String s = bufferRead.readLine(); 
```

see [example](http://www.mkyong.com/java/how-to-read-input-from-console-java/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T07:49:12.370

[我看到这](https://stackoverflow.com/questions/10665343/java-lang-system-error-in-console)与您的其他线程有关。

System.console() 返回控制台对象，它是在 JDK 1.6 中添加的，您说您已经安装了 jdk 1.6，因此只能假设您用于编译和运行代码的 java 版本不同。

你能告诉我你用什么来编译代码，以及你是如何运行代码的吗？

以后，请使用您最初发布的同一线程，这样更容易被人们追踪。

# javascript - Jquery - 图像，动画

> ID：10671627
> 
> 赞同：1
> 
> 时间：2012-05-20T07:34:18.017
> 
> 标签：javascript, jquery, jquery-animate, layer

我不知道这是否有意义，但我会尽力解释。我目前有 image1，它填充了我屏幕的整个 x 轴。我需要使用 j-query 为这个图像设置动画，这样当我点击我的按钮时，它会打开（想想有人打开关闭的窗帘，左右两侧将被拉到两侧），以便显示 image2。

我要问的是，j-query 可以像这样动画吗？方法/效果叫什么？现在image2在image1下面，我怎样才能让image2在image1后面？还是反过来，image2 需要在 html 中，而 image1 是在它上面分层的？

注意：image1 是一个 div

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T07:50:48.773

你的意思是这样的：[http ://web.enavu.com/demos/dual_sliding_door/](http://web.enavu.com/demos/dual_sliding_door/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T07:43:32.063

我想我明白你在描述什么。你需要两个元素，并排放置。左侧元素将显示图像的左侧 50%，右侧元素将在右侧显示剩余的 50%。然后，您将在屏幕外为这些设置动画。左侧将向左全宽，右侧将向右侧全宽，在它们下方显示您的图像。

单元素：

```
                                   IMG 元素
+-------------------------------------------------- ------------------------------+
| 全图 |
+-------------------------------------------------- ------------------------------+

```

两个元素：

```
               元素 A 元素 B
+----------------------------------------++-------- ------------------------------+
| 左 50% IMG L || 右 右 50% IMG |
+----------------------------------------++-------- ------------------------------+
<---- 左动画关闭 右动画关闭 ---->

```

动画后：

```
---+---------------------------------------------------------- ---------------+---
 大号 | 第二张图片 | R
---+---------------------------------------------------------- ---------------+---

```

因此，每个图像都需要两个元素来显示它们。您可以将其构造为这样的列表：

```
<ul id='slideshow'>
  <li><img src='foo.png' /></li>
  <li><img src='bar.png' /></li>
</ul> 
```

使用 jQuery，您可以将列表项内容重组为以下内容：

```
<li>
  <div class='left'>
    <img src='foo.png' />
  </div>
  <div class='right'>
    <img src='foo.png' />
  </div>
</li>
<li>
  <div class='left'>
    <img src='bar.png' />
  </div>
  <div class='right'>
    <img src='bar.png' />
  </div>
</li> 
```

此时，您可能希望为`UL`包含所有这些列表项的 设置一个固定的宽度和高度，并将它们相对于它们的父项放置在 0,0 处。然后，您将给每个 a`z-index`以将它们层叠在一起。

使用 jQuery，您可以抓取最高的元素，并在屏幕外对其和元素`z-index`进行动画处理，从而显示具有第二高 z-index 的元素。然后，您将最近动画元素的 更改为比最低元素小 1，然后将其和项目返回到其原始位置。`left``right``z-index``left``right`

然后对新可见的列表项重复最后的步骤。

# asp.net - 自定义验证器错误未显示

> ID：10671628
> 
> 赞同：0
> 
> 时间：2012-05-20T07:34:19.930
> 
> 标签：asp.net, .net

我在页面上有网格，在它的一列内有文本框作为项目模板。我使用自定义验证器的 clientValidationfuntion 来验证在文本框中输入的文本。

我在 ClientValidationFunction 中使用的 javascript 函数被正确调用，它也设置了

args.isvalid = false

在javascript函数内部，但页面上未显示错误消息。

网格和自定义验证器控件都在同一个更新面板控件中。

请提出可能是什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T08:04:34.390

You have two options here

## Option 1

Go to the `View Source` and check how the complete ID is being rendered. Now in the `JavaScript function` write the below code.

```
document.getElementById('CompleteValidatorID').style.display = 'none'; 
```

## Option 2

Set `ClientIDMode = "Static"`

## Mark UP

```
<asp:CustomValidator ID="cmp" runat="server" ClientIDMode="Static" ErrorMessage="hello"></asp:CustomValidator> 
```

## JavaScript Code

```
document.getElementById('cmp').style.visibility = "visible";
document.getElementById('cmp').innerHTML = 'Error!'; 
```

# android - 带有滚动条的广告展示

> ID：10671630
> 
> 赞同：0
> 
> 时间：2012-05-20T07:34:55.230
> 
> 标签：android, admob

我已根据[本](http://googleadsdeveloper.blogspot.com/2011/12/incorporating-android-admob-ads-into.html)指南使用 SDK v6 在我的应用中添加了广告。
在 2.3 和 4.0 上显示的广告都带有垂直滚动条（实际上滚动了一点）。
如何删除它？

TIA。 ![广告图片](../Images/6de077a73309acfcdfb88dba49cea6a7.png)

# validation - 禁用 JS 后事件处理程序代码是否“持久”？

> ID：10671631
> 
> 赞同：0
> 
> 时间：2012-05-20T07:35:27.013
> 
> 标签：validation, document-ready, javascript

在使用 jquery document.ready 事件的网站上测试客户端验证时，我注意到了一些有趣的事情。

如果我在禁用 js 的情况下加载登录页面，它的`noscript`标签会将用户重定向到另一个页面，通知浏览器未启用 js 支持。

如果我在启用 js 的情况下加载登录页面，然后继续禁用它，则附加在其 document.ready 事件上的代码仍在运行，并完美验证了其登录和密码字段中的空输入。

由于我没有看到请求服务器执行此类验证的页面，我想知道假设最初启用 js 的事实是否足以让 document.ready 运行并永久附加代码，无论我如何切换之后的js支持吗？或者也许我错过了什么？

感谢大家能给我的见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T07:38:09.180

即使您在设置中禁用 JS，浏览器仍会在*当前打开的页面上运行 JS。*禁用 JS 时加载的任何新页面都将禁用其脚本。

就像浏览器只在页面加载时检查该设置：

```
Load page -> is scipts on? -> yes -> run        //changing it anywhere after
                           -> no  -> do not run //does not affect it's status 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T07:39:53.277

如果称为“从现在开始禁用 js”，“禁用 javascript”实际上会更接近现实。在禁用之前执行的所有内容都已执行。禁用后将发生的所有事情（例如超时、间隔等）都不再执行。

# android - AndEngine ClassNotFoundException

> ID：10671633
> 
> 赞同：0
> 
> 时间：2012-05-20T07:36:08.977
> 
> 标签：android, andengine

今天我开始在 AndEngine 上工作，并且很早就遇到了问题。尝试了一些示例代码来将背景设置为某种颜色，它会抛出 ClassNotFoundException。尝试清理项目，更改工作区。需要一些帮助...

这是我的课

```
 package com.Try4;

    import org.anddev.andengine.engine.Engine;
    import org.anddev.andengine.engine.camera.Camera;
    import org.anddev.andengine.engine.options.EngineOptions;
    import org.anddev.andengine.engine.options.EngineOptions.ScreenOrientation;
    import org.anddev.andengine.engine.options.resolutionpolicy.RatioResolutionPolicy;
   import org.anddev.andengine.entity.scene.Scene;
     import org.anddev.andengine.entity.scene.background.ColorBackground;
   import org.anddev.andengine.entity.util.FPSLogger;
     import org.anddev.andengine.ui.activity.BaseGameActivity;

   import android.view.Display;

   public class Try4Activity extends BaseGameActivity{

private Camera mCamera;

private Scene mMainScene;

@Override
public Engine onLoadEngine() {

    final Display display = getWindowManager().getDefaultDisplay();

        int cameraWidth = display.getWidth();

        int cameraHeight = display.getHeight();

        mCamera = new Camera(0, 0, cameraWidth, cameraHeight);

        return new Engine(new EngineOptions(true, ScreenOrientation.LANDSCAPE,

            new RatioResolutionPolicy(cameraWidth, cameraHeight), mCamera));

}

@Override
public void onLoadResources() {

}

@Override
public Scene onLoadScene() {
    mEngine.registerUpdateHandler(new FPSLogger());

        mMainScene = new Scene();

        mMainScene.setBackground(new ColorBackground(0.09804f, 0.6274f, 0.8784f));

        return mMainScene;

}

@Override
public void onLoadComplete() {

} 
```

}

这是我的 manifest.xml

```
 <?xml version="1.0" encoding="utf-8"?>
     <manifest xmlns:android="http://schemas.android.com/apk/res/android"
     package="com.Try4"
     android:versionCode="1"
     android:versionName="1.0" >

     <uses-sdk android:minSdkVersion="7" />
     <uses-permission android:name="android.permission.WAKE_LOCK"/>
     <uses-permission android:name="android.permission.CAMERA"/>
     <application
     android:icon="@drawable/ic_launcher"
     android:label="@string/app_name" >
     <activity
        android:name=".Try4Activity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    </application> 
```

堆栈跟踪

```
 05-20 07:28:56.015: W/dalvikvm(351): threadid=3: thread exiting with uncaught exception              (group=0x4001b188)
 05-20 07:28:56.045: E/AndroidRuntime(351): Uncaught handler: thread main exiting due to    uncaught exception
05-20 07:28:56.065: E/AndroidRuntime(351): java.lang.RuntimeException: Unable to   instantiate activity ComponentInfo{com.Try4/com.Try4.Try4Activity}:     java.lang.ClassNotFoundException: com.Try4.Try4Activity in loader   dalvik.system.PathClassLoader@44c066a8
05-20 07:28:56.065: E/AndroidRuntime(351):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2417)
05-20 07:28:56.065: E/AndroidRuntime(351):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
05-20 07:28:56.065: E/AndroidRuntime(351):  at android.app.ActivityThread.access$2200(ActivityThread.java:119)
05-20 07:28:56.065: E/AndroidRuntime(351):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
05-20 07:28:56.065: E/AndroidRuntime(351):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-20 07:28:56.065: E/AndroidRuntime(351):  at android.os.Looper.loop(Looper.java:123)
05-20 07:28:56.065: E/AndroidRuntime(351):  at android.app.ActivityThread.main(ActivityThread.java:4363)
05-20 07:28:56.065: E/AndroidRuntime(351):  at java.lang.reflect.Method.invokeNative(Native Method)
05-20 07:28:56.065: E/AndroidRuntime(351):  at java.lang.reflect.Method.invoke(Method.java:521)
05-20 07:28:56.065: E/AndroidRuntime(351):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
05-20 07:28:56.065: E/AndroidRuntime(351):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
05-20 07:28:56.065: E/AndroidRuntime(351):  at dalvik.system.NativeStart.main(Native Method)
05-20 07:28:56.065: E/AndroidRuntime(351): Caused by: java.lang.ClassNotFoundException:  com.Try4.Try4Activity in loader dalvik.system.PathClassLoader@44c066a8
05-20 07:28:56.065: E/AndroidRuntime(351):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:243)
05-20 07:28:56.065: E/AndroidRuntime(351):  at java.lang.ClassLoader.loadClass(ClassLoader.java:573)
05-20 07:28:56.065: E/AndroidRuntime(351):  at java.lang.ClassLoader.loadClass(ClassLoader.java:532)
05-20 07:28:56.065: E/AndroidRuntime(351):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
05-20 07:28:56.065: E/AndroidRuntime(351):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2409)
05-20 07:28:56.065: E/AndroidRuntime(351):  ... 11 more
05-20 07:28:56.086: I/dalvikvm(351): threadid=7: reacting to signal 3
05-20 07:28:56.106: I/dalvikvm(351): Wrote stack trace to '/data/anr/traces.txt' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T07:47:52.553

您不应该在包名中使用大写字母...应该是`com.try4.Try4Activity`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-29T11:43:56.707

问题出在清单文件的这一行中：

```
 <activity
    android:name=".Try4Activity"
    android:label="@string/app_name" > 
```

而是使用这个：

```
<activity
    android:name="package.subpackage.projectname.Try4Activity"
    android:label="@string/app_name" > 
```

# shell - Cakephp shell：找不到Shell类HelloShell

> ID：10671634
> 
> 赞同：10
> 
> 时间：2012-05-20T07:36:16.107
> 
> 标签：shell, cakephp

我是 cakephp 的新手。我按照 cakephp 手册所述配置 cakephp shell，当我使用命令 cake Hello 运行 HelloShell 时，我得到如下错误信息：

```
Error: Shell class HelloShell could not be found.
1#G:\htdocs\cakedemo\lib\Cake\Console\ShellDispatcher.php(191):ShellDispatcher>_getShell('hello')
2#G:\htdocs\cakedemo\lib\Cake\Console\ShellDispatcher.php(69):ShellDispatcher->dispatch()
3#G:\htdocs\cakedemo\app\Console\cake.php(33):ShellDispatcher::run(Array)  {main} 
```

我的 cakephp 版本：

## 欢迎使用 CakePHP v2.2.0-beta 控制台

应用程序：控制台

## 路径：G:\htdocs\cakedemo\app\Console\

任何有帮助的人都可以给我一个建议，请。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-20T08:45:39.490

这是你的错误。您应该始终在您的 APP 路径中执行蛋糕控制台。

```
...app/>../lib/Cake/Console/cake MyShell 
```

或（使用 APP 控制台文件夹）：

```
...app/>Console/cake MyShell 
```

然后 MyShell 应该在`...app/Console/Command/`. 这里的所有都是它的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-10T14:24:50.090

错误：`Shell class HelloShell could not be found`出现是因为：拼写错误或在错误的目录下运行命令。

**解决方法：**

**1.** php.exe、cake.exe的设置路径

**2.**比如我的Cake网站根是：

```
C:\tools\xampp1.8.3\htdocs\cakephp-2.5.5 
```

在包含内容的文件夹中创建新文件`C:\tools\xampp1.8.3\htdocs\cakephp-2.5.5\app\Console\Command\HelloShell.php`：

```
class HelloShell extends AppShell {
    public function main() {
        $this->out('Hello world.');
    }
} 
```

**3.**打开**cmd**，输入：

```
cd /d C:\tools\xampp1.8.3\htdocs\cakephp-2.5.5\app

cake hello 
```

我们`hello`在命令行中使用来调用`HelloShell`类，因为“约定优于配置”。

![在此处输入图像描述](../Images/44de1d3e24aea2d7af3d04a62ee52fef.png)

参考： [http ://book.cakephp.org/2.0/en/console-and-shells.html#creating-a-shell](http://book.cakephp.org/2.0/en/console-and-shells.html#creating-a-shell)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-24T10:39:31.657

确保在 /var/www/html/Console/cake.php ini_set('include_path', $root . PATH_SEPARATOR . 'Cake' . $ds . 'lib' . PATH_SEPARATOR . ini_get('include_path') );

然后转到根文件夹。在我的情况下，位置将是 /var/www/html/ 然后给出 shell 文件名；hello 是我的 shell 名称，即 /var/www/html/Console/cake hello 组合在一起 /var/www/html$ /var/www/html/Console/cake hello

你的 shell 将被执行。

# php - PHP变量优先级

> ID：10671637
> 
> 赞同：0
> 
> 时间：2012-05-20T07:37:25.417
> 
> 标签：php

我有一个关于 php 变量的问题。举个例子：

这是我要编辑用户联系人列表的 while 循环。

```
$sql = mysql_query("SELECT * FROM addcontacts WHERE name LIKE 'a%' AND uname = 
'$uname'");

while($re = mysql_fetch_array($sql))
{
$id = (int) $re['id'];  
$name = mysql_real_escape_string(htmlspecialchars(trim($re['name'])));
$surname = mysql_real_escape_string(htmlspecialchars(trim($re['surename'])));
$group = mysql_real_escape_string(htmlspecialchars(trim($re['group'])));
$email =  mysql_real_escape_string(htmlspecialchars(trim($re['email'])));
$skype = mysql_real_escape_string(htmlspecialchars(trim($re['skypeid']))); 
$facebook = mysql_real_escape_string(htmlspecialchars(trim($re['facelink']))); 
$twitter = mysql_real_escape_string(htmlspecialchars(trim($re['twitterlink'])));
$aim = mysql_real_escape_string(htmlspecialchars(trim($re['aimid'])));
$myspace = mysql_real_escape_string(htmlspecialchars(trim($re['myspacelink'])));
$notes = mysql_real_escape_string(htmlspecialchars(trim($re['specialnote'])));

more code......
?> 
```

所以我的问题是，在**$sql**查询之前是否可以访问这个**$id ？**我需要这个**$id**值到表单的顶部，因为有一个按钮名称：编辑联系人。所以如果我得到这个**$id**值，那么我可以编辑用户联系人列表。

 ******* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T07:40:59.627

不，ID 来自数据库，因此您必须执行*一些*查询才能获取它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T07:43:18.350

您`$id`是从 MySQL 记录中给出的 id。据我了解您的问题，您需要在构建表单之前进行查询。

你说

> 我需要这个 $id 值到表格的顶部，因为

所以我认为有一点不好的设计。您需要表格来更新记录吗？如果是这样，您应该使用`id`要修改的记录的（或 ID）调用表单。******

# git - 如何修复被中断的 git fetch 破坏的 git 存储库？

> ID：10671638
> 
> 赞同：19
> 
> 时间：2012-05-20T07:37:32.200
> 
> 标签：git, git-pull, git-fetch

如果`git fetch`例如被 Ctrl-C 中断或由连接问题引起，则之后`git fetch`也`git pull`无法工作。

```
user@computer:~/code/openttd-git$ git fetch
^C
user@computer:~/code/openttd-git$ git fetch
error: Unable to find 22d90742fc79a9011fb86ee03d8aeea66bc12657 under http://git.openttd.org/openttd/trunk.git
Cannot obtain needed object 22d90742fc79a9011fb86ee03d8aeea66bc12657
error: Fetch failed. 
```

我相信这与存储库无关。使用`git clone`将此损坏的本地存储库的副本创建到新的本地存储库中并不能解决此问题。到目前为止我知道的唯一解决方案是`git clone`将整个远程存储库 ( `origin/master`) 放入一个新的本地存储库。但是有没有更好（更快）的解决方案？

有来自 2011 年 2 月的最后一条消息的[Debian 错误报告](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=602528)。这是我有相同的错误还是已经有修复或任何解决方案或解决方法？我的 git 版本是 1.7.10。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-13T07:59:29.003

试试这些命令：

```
git fsck
git gc 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-02-02T19:00:21.987

`*.pack.temp`在`.git/objects/pack`您的本地存储库中找到一个。然后找到一个`.idx`具有相同基本名称的文件，并将它们都移开（或删除它们，但安全总比抱歉好）。重新运行`git fetch`它应该可以工作（嗯，它对我有用）。

例如：

```
% git fetch
error: Unable to find a4fb0b54b2609df8a1ee4b97c268d205fc5bf9f1 under https://www.example.com/~someuser/something.git
Cannot obtain needed object a4fb0b54b2609df8a1ee4b97c268d205fc5bf9f1
error: fetch failed.

% ls -l .git/objects/pack
total 65872
-rw-r--r-- 1 someuser someuser    64072 Feb 12  2014 pack-2e31e66e67d8596f1193bbbc06c87293900c6e45.idx
-rw-r--r-- 1 someuser someuser    16920 Jul 21  2013 pack-3d76e0bf6c67d71913efc0711d56f04c7f79b95d.idx
-rw-r--r-- 1 someuser someuser    62224 Feb 11  2014 pack-74107fa80989df6619479874d94b5f8ed010fd2f.idx
-rw-r--r-- 1 someuser someuser    96552 Oct 30 22:55 pack-bb75633331ea0e74d4d3cb29f7660e1ba00fb899.idx
-rw-r--r-- 1 someuser someuser    73228 Mar  6  2014 pack-de0c1bcf3550cd7a2fd0c5a981bc17d15f1144c0.idx
-r--r--r-- 1 someuser someuser   129144 Feb  2 18:57 pack-ffb25d036dea040923468e2de07023f9b497aeb7.idx
-r--r--r-- 1 someuser someuser 46413554 Feb  2 18:57 pack-ffb25d036dea040923468e2de07023f9b497aeb7.pack
-r--r--r-- 1 someuser someuser   129312 Feb  2 19:10 pack-ffbdfa2c676aaf392ea722cb68eaa87e45af092c.idx
-rw-r--r-- 1 someuser someuser 20450545 Feb  2 19:09 pack-ffbdfa2c676aaf392ea722cb68eaa87e45af092c.pack
-rw-r--r-- 1 someuser someuser   129312 Feb  2 18:36 pack-ffbdfa2c676aaf392ea722cb68eaa87e45af092c.idx
-rw-r--r-- 1 someuser someuser  9863168 Feb  2 18:37 pack-ffbdfa2c676aaf392ea722cb68eaa87e45af092c.pack.temp

% mv .git/objects/pack/pack-ffbdfa2c676aaf392ea722cb68eaa87e45af092c.idx /tmp/
% mv .git/objects/pack/pack-ffbdfa2c676aaf392ea722cb68eaa87e45af092c.pack.temp /tmp/
% git fetch
From https://www.example.com/~someuser/something
   3288ab9..a4fb0b5  master     -> origin/master 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T17:29:27.207

```
man git-fsck 
```

说要使用 rsync ：

> 您必须在备份或其他存档中找到任何损坏的对象（即，您可以删除它们并与其他站点进行 rsync，以希望其他人拥有您损坏的对象）。

```
rsync -av user@host:repo/.git ./.git 
```

为我工作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-05T00:12:20.523

使用 Git 2.30（2021 年第一季度）的清理应该更简单：“ [`git fetch`](https://github.com/git/git/blob/f3a112a75effe4ea7dca4d47edeced43fb77691a/Documentation/git-fetch.txt)” ^(（[man](https://git-scm.com/docs/git-fetch)）)被杀死可能会留下一个 pack-objects 进程，仍在计算以找到一个好的压缩，浪费周期。

这已得到纠正。

请参阅[Jeff King ( ) 的](https://github.com/peff)[提交 309a402](https://github.com/git/git/commit/309a4028e72b5f6050d5cf17b5056cc3ea14c16b)（2020 年 12 月 1 日[）](https://github.com/peff)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 f3a112a](https://github.com/git/git/commit/f3a112a75effe4ea7dca4d47edeced43fb77691a))^(中，2020 年 12 月 3 日）)[`peff`](https://github.com/peff)
^([`gitster`](https://github.com/gitster))

> ## [`upload-pack`](https://github.com/git/git/commit/309a4028e72b5f6050d5cf17b5056cc3ea14c16b): 在信号或退出时杀死 pack-objects 助手
> 
> ^(签字人：杰夫·金)

> 我们生成一个外部打包对象进程来实际将对象发送到远程端。如果我们在此过程中被信号杀死，那么 pack-objects 可能会继续运行。一旦它开始为包生成输出，它将看到写入上传包失败并自行退出。
> 但在此之前，它可能会在遍历对象图、压缩增量等方面做大量工作，这些都将毫无意义。因此，一旦我们知道调用者不会读取结果，请确保立即杀死。
> 
> 这里没有测试，因为它本质上是活泼的，但这里有一个简单的复制是在像 linux.git 这样的大型 repo 上：
> 
> *   确保您没有打包位图（因为它们使枚举阶段快速进行）。对于`linux.git`，在我的机器上遍历整个图形大约需要 30 秒左右。
> *   运行 " ^( ^([man](https://git-scm.com/docs/git-clone)) ^) ; " " 很重要，因为如果将进度写入（通过边带多路复用到客户端），那么它会很快注意到写入 stderr 失败[`git clone --no-local -q . dst`](https://github.com/git/git/blob/309a4028e72b5f6050d5cf17b5056cc3ea14c16b/Documentation/git-clone.txt)`-q``pack-objects``upload-pack`
> *   在另一个终端中杀死客户端克隆进程（不要使用 ^C，因为它会发送`SIGINT`到所有进程）
> *   运行 " `ps au | grep git`" 或类似的方法来观察`upload-pack`5 秒内死亡（它会发送一个 keepalive 通知客户端已经离开）
> *   但是您仍然会看到`pack-objects`在遍历和增量压缩阶段消耗 100% 的 CPU（和 1GB+ 的 RAM）。它会在开始写入包时立即退出（当它会注意到它`upload-pack`消失时）。
> 
> 使用此补丁，`pack-objects`立即退出`upload-pack`。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-20T10:14:04.457

你能跑吗：

```
git reset --hard <some prior commit> 
```

理论上，如果你刚刚运行`git fetch`，你应该能够：

```
git reset --hard HEAD 
```

这应该丢弃由中断的提取操作引起的更改，将您的存储库返回到先前的状态。此时，您应该能够重新运行您的`fetch`操作。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-01-29T22:36:13.477

存储库很可能*已*损坏。`git fsck`在服务器上运行`git gc`可能会解决它。克隆到一个单独的目录并从该目录中提取也将为您提供提交。之后 a`git fetch`将起作用，因为它只更新 refs 而不必获取任何对象。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-05-21T07:58:07.413

你试过清理回购吗？

```
git gc 
```

被警告，因为上面的命令也会清理 reflog 的东西。

# windows - 是否可以使用 Linux 环境对 Windows Mobile 7 进行编码？

> ID：10671646
> 
> 赞同：1
> 
> 时间：2012-05-20T07:38:27.987
> 
> 标签：windows, mobile, monodevelop

是否可以使用 Linux 环境对 Windows Mobile 7 进行编码？我找到了 MonoDevelopement，我想知道这是否可以实现？

感谢您的指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T07:52:45.273

您可以使用 MonoDevelop 进行开发，但 Mono Team 需要一些时间才能将 .Net Framework 中的最新添加项移植到 Mono。因此，如果您想使用最新的功能，Mono 不是您的最佳选择。

# c++ - 复杂的 C++ 数据类型和 COM

> ID：10671649
> 
> 赞同：2
> 
> 时间：2012-05-20T07:38:46.913
> 
> 标签：c++, com, asp-classic

我希望从 ASP Classic 访问 dll 的功能，我的理解是 COM 是要走的路。

与 dll 关联的 .h 头文件如下所示：

```
...

struct _Data;

typedef struct _Field
{
    INT  iType;
    BOOL bChanged;
    INT  iFieldId;
    INT  iInternalFieldId;  
    INT  iLenght;
    INT  iDec;
    RW iRW;
    union
    {
        DOUBLE    d;
        CHAR*     s;
        LONG      l;
        BOOL      b;
        LONG      date;
        struct _Data* data;
    }
    value;
} FIELD;

typedef struct _MetaData
{
    HANDLE hHandle;
    INT        iDatabaseId;
    INT        iFields;
    INT        iStructSize;
} META;

typedef struct _Data
{
    META  metaData;
    FIELD rgField[MAX_FIELD];
} DATA, *PDATA;

...

#ifdef __cplusplus
extern "C" 
{
#endif //__cplusplus

    __declspec(dllexport) P_DATA __stdcall CreateData(INT iDatabaseId);
    __declspec(dllexport) ERROR __stdcall GetStr(DATA* pData, INT iFieldId, CHAR** ppsValue, INT iLen);

... 
```

因此，您可以看到函数本身很简单，但数据相当复杂。

我应该如何为我的 COM 服务器定义这样的数据类型？

谢谢，

巴里

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-03T17:53:32.280

在大多数 IIS 应用程序中与 ASP 一起使用的脚本语言（如 VBScript 和 JScript）中没有结构类型。您不能声明结构变量来接收返回值或将其传递给 C++ 函数。

您需要将结构包装成自动化类型。编写实现 IDispatch 的自动化服务器类，并将结构成员公开为简单自动化类型或其他自动化服务器类的属性（例如，具有 Count 和 Item 属性的集合类）。请参阅[Don Box 撰写的“通过 IDispatch 传递结构”，Microsoft Systems Journal，1996 年 6 月。](http://www.microsoft.com/msj/0696/activex0696.aspx)

# php - PHP 使用 http 获取域名

> ID：10671655
> 
> 赞同：-1
> 
> 时间：2012-05-20T07:40:14.513
> 
> 标签：php, parse-url

我想从 URL 获取域并输出：`http://www.domain.com/`

我找到了这个，但没有出来`http://`

```
<?php
$url = 'http://www.lebanonpost.com/2012/05/20/press-754/';
$parse = parse_url($url);
$domain = str_ireplace('www.', '', parse_url($url, PHP_URL_HOST));
print $parse['host']; // prints 'google.com'
?> 
```

输出：`www.lebanonpost.com`

我希望它是：`http://www.lebanonpost.com/`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T07:47:18.770

尝试：

```
print $parse['scheme'] . '://' . $parse['host']; 
```

*`https`如果有而不是，它将起作用`http`*

## [在这里测试](http://codepad.org/7rE80Sa3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T07:44:58.920

您可以连接`http://`到您的输出：

```
<?php
    $url = 'http://www.lebanonpost.com/2012/05/20/press-754/';
    $parse = parse_url($url);
    $domain = str_ireplace('www.', '', parse_url($url, PHP_URL_HOST));
    $domainURL = $parse['scheme'].'://'.$parse['host'].'/';
    print $domainURL;
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-17T17:47:54.050

这是我一直用于使用 PHP 打印 url 的资源 - [https://stackoverflow.com/a/8891890/1964113](https://stackoverflow.com/a/8891890/1964113)

这个答案分解了每一部分，甚至是 http/https 和#fragments。

谷歌这些东西男人！真的很容易找到。

# asp.net - 如何计算两个日期之间的天数？

> ID：10671658
> 
> 赞同：0
> 
> 时间：2012-05-20T07:41:07.430
> 
> 标签：asp.net, vb.net, datetime

我有 2 个文本框，txtStartDate.Text 和 txtEndDate.Text，用户通过日历日期选择器选择日期。现在我想计算两个选定日期之间的天数并将结果保存在数据库字段 totalDay(type integer) 中，以下是我的代码：

但是当我单击按钮并尝试将其保存到数据库中时，我收到此错误：

正在使用的 SQL Server 版本不支持数据类型“时间”。

我应该怎么做才能克服这个问题？

```
Imports System
Imports System.Data
Imports System.Data.SqlClient
Imports System.Threading
Imports System.Globalization

Partial Class addevent
Inherits System.Web.UI.Page

Protected Sub ButtonAddEvent_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles ButtonAddEvent.Click

    Dim connString As String = ConfigurationManager.ConnectionStrings("ConnectionString1").ConnectionString
    '"Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\eventdb.mdf;Integrated Security=True;User Instance=True"
    Dim con As SqlConnection = New SqlConnection(connString)

    Dim cmdQuery As String = "INSERT INTO eventinfo(venue,totalDay,eventTitle,startDate,endDate,description) VALUES (@venue,@totalDay,@eventTitle,@startDate,@endDate,@description)"
    Dim cmd = New SqlCommand(cmdQuery)
    cmd.Connection = con
    cmd.CommandType = CommandType.Text
    con.Open()
    cmd.Parameters.AddWithValue("@eventTitle", txtEventTitle.Text)
    cmd.Parameters.AddWithValue("@venue", txtEventLocation.Text)
    cmd.Parameters.AddWithValue("@startDate", txtStartDate.Text)
    cmd.Parameters.AddWithValue("@endDate", txtEndDate.Text)
    cmd.Parameters.AddWithValue("@description", txtEventDescription.Text)

    Dim fmt As String = "dd/MM/yyyy"
    Dim dtStart As DateTime = DateTime.ParseExact(txtStartDate.Text, fmt, Nothing)
    Dim dtEnd As DateTime = DateTime.ParseExact(txtEndDate.Text, fmt, Nothing)

    Dim ts As TimeSpan = dtEnd - dtStart

    cmd.Parameters.AddWithValue("@totalDay", ts.TotalDays)

    cmd.ExecuteNonQuery()
    cmd.Parameters.Clear()
    con.Close()

    Response.Redirect("~/addbooth.aspx")

End Sub
End Class 
```

我的表结构： ![在此处输入图像描述](../Images/945ba3b9460c654e721a45aa3de4a1b6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T07:58:02.180

由于您的字段是整数类型，并且您只允许用户输入没有时间组件的天数，因此可以使用以下方法：

```
cmd.Parameters.AddWithValue("@totalDay", ts.Days) 
```

TimeSpan.TotalDays 以双精度形式为您提供天数和天数，TimeSpan.Days 仅提供整个天数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T08:00:35.733

尝试`SQL DataBase Type` 在 SQL 命令参数列表中添加，如下所示。

## 示例代码

`cmd.Parameters.Add("ParameterName", SqlDbType.Date).Value = "Value";`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T08:04:59.790

用这个：

```
Dim totalday As Integer = DateDiff(DateInterval.Day, <Date_1> , <Date_2>) 
```

# android - Android - 使用 DOM 解析器的 KML 解析器

> ID：10671661
> 
> 赞同：1
> 
> 时间：2012-05-20T07:41:40.950
> 
> 标签：android, xml, android-xml, android-maps

我这里有问题。我想从谷歌地图解析 KML 文档。我会成功解析存储坐标的节点。

但我想将节点解析为子节点，这里是 KML 文档。

```
<Placemark>
<name>Head north on Jalan Kebagusan Raya toward Jalan Anggrek</name>
<description><![CDATA[go 850&#160;m]]></description>
<address>Jalan Kebagusan Raya</address>
...
</Placemark 
```

为了解析它，我使用了这段代码，

```
NodeList nlPlace = doc.getElementsByTagName("Placemark");
        for(int p = 0; p < nlPlace.getLength(); p++){
            Node rootPlace = nlPlace.item(p);
            NodeList itemPlace = rootPlace.getChildNodes();
            for(int y = 0; y < itemPlace.getLength(); y++){
                Node placeStringNode = itemPlace.item(y);
                NodeList place = placeStringNode.getChildNodes();
                //valueName = nameList.item(0).getNodeValue().toString() + "+";
                pathName.add(place.item(0).getNodeValue());
            }
        }

desk.setText("");
        for (int j = 0; j < strPlace.length; j++){
            desk.append("Deskripsi:\n" + strPlace[j] + "\n");
        } 
```

但是当我在真正的设备/模拟器中尝试时，我得到了一些我不想要的东西。这是我真实设备的截图 ![在此处输入图像描述](../Images/e1e8b449e653bd7efb4d00b30b72686e.png)

从 scrshot 中，我只想获取“在 Jalan Darmo Kali 向东北方向前往 Jalan Darmoerjo 4”的信息。只是它。

你能帮我解决我的问题吗？

提前谢谢，对不起我的英语，谢谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T09:15:45.427

像下面这样的东西应该做你想要的。

```
NodeList nlPlace = doc.getElementsByTagName("Placemark");
for(int p = 0; p < nlPlace.getLength(); p++){
    Element place = (Element)nlPlace.item(p);
    Element name = (Element)place.getElementsByTagName("name");

    //.....
    }
} 
```

# windows - 如何为 Visual C++ dll 项目生成 lib

> ID：10671662
> 
> 赞同：0
> 
> 时间：2012-05-20T07:41:50.470
> 
> 标签：windows, visual-c++

我有一个 Visual C++ dll 项目。可以创建dll，但不会生成lib。我应该修改哪个项目属性来输出库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T08:36:31.890

[使用模块定义文件](http://msdn.microsoft.com/en-US/library/d91k01sh)：

*   将 DEF 文件添加到您的 DLL 项目（如果它还没有的话）。
*   验证 DEF 文件是否用作“模块定义文件”。
*   添加要导出到 DEF 文件的所有符号。

或者，您可以使用[`__declspec(dllexport)`](http://msdn.microsoft.com/en-us/library/a90k134d.aspx)定义导出的符号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T08:20:10.767

你导出一些符号吗？如果不导出某些内容，则不会生成 lib。

# bash - 如何使用脚本运行 MinGW？

> ID：10671667
> 
> 赞同：10
> 
> 时间：2012-05-20T07:42:54.773
> 
> 标签：bash, batch-file, mingw

有没有办法从 msys.bat 或任何其他方法从批处理文件运行 MinGW 并输入`.sh`文件以使其运行？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-11T00:50:00.340

像这样的批处理文件

```
C:\MinGW\msys\1.0\bin\sh ~/test.sh
pause 
```

# c - ANSI C 中的序列化和反序列化问题

> ID：10671668
> 
> 赞同：1
> 
> 时间：2012-05-20T07:43:14.630
> 
> 标签：c, networking, serialization, ipc, deserialization

这是我一直在研究很长时间的东西，但无法解决为什么它不能正常工作，希望你能帮我解决一些问题！我会尽量做到描述性。

这个想法是序列化一个结构（NIPC数据包结构），通过TCP发送到另一个进程，然后反序列化并重新构建这个结构。但不知何故，我无法让它正常工作，只是部分地。这里是结构。

```
typedef struct {
    char pct_type;
    short int payload_lenght;
}__attribute__((__packed__)) t_header;

typedef struct {
    char* path;
    long unsigned int size;
    long int offset;
}__attribute__ ((__packed__)) t_payload_read;

typedef struct {
    t_header header;
    t_payload_read payload;
}__attribute__ ((__packed__)) t_pct_read; 
```

然后，我首先序列化了有效载荷（偏移量、大小和路径），以计算有效载荷的长度，然后是整个数据包，包括要发送的标头。然后反序列化，但没有办法让它工作，另一方面，我得到标题 OK 和路径字段“OK”，但我得到关于偏移量和大小的奇怪数字，例如，使用这个硬编码值结构体：

```
type: 4  
offset: 5  
size: 15  
path: ~/Desarrollo/Workspace 
```

我得到：

```
pct->header.pct_type: 4
pct->header.payload_length: 28
pct->payload.path: ~/Desarrollo/Workspac
pct->payload.size: 143994937
pct->payload.offset: 143994941 
```

在这里我附加了我设计的序列化和反序列化函数，我尽量做到描述性和仔细。

```
char* serialize_read(t_pct_read* packet) {
    char* buffer = malloc(
            sizeof(t_header) + sizeof(packet->payload.offset)
                    + sizeof(packet->payload.size)
                    + strlen(packet->payload.path + 1));
    char* payload = malloc(
            sizeof(packet->payload.offset) + sizeof(packet->payload.size)
                    + strlen(packet->payload.path) + 1);
    int offset;

    // First I serialize the Payload, in order to calculate It's lenght 

    memcpy(payload, packet->payload.path, strlen(packet->payload.path) + 1);

    offset = strlen(packet->payload.path)+1;

    memcpy(payload + offset, &packet->payload.size, sizeof(long unsigned int));

    offset += (sizeof(long unsigned int));

    memcpy(payload + offset, &packet->payload.offset, sizeof(long int));

    packet->header.payload_lenght = offset+1; // Here I get payload's length

    offset = 0;

    // Same procedure here, but for the entire packet, including the header.    

    memcpy(buffer, &packet->header.pct_type, sizeof(char));

    offset = sizeof(char);

    memcpy(buffer + offset, &packet->header.payload_lenght, sizeof(short int));

    offset += sizeof(short int);

    memcpy(buffer + offset, packet->payload.path,
            strlen(packet->payload.path) + 1);

    offset += strlen(packet->payload.path + 1);

    memcpy(buffer + offset, &packet->payload.size, sizeof(long unsigned int));

    offset += (sizeof(long unsigned int));

    memcpy(buffer + offset, &packet->payload.offset, sizeof(long int));

    return buffer;

}

t_pct_read* deserialize_read(char* stream) {
    t_pct_read* packet = malloc(sizeof(t_pct_read));

    int offset;
    int alloc_size;

    memcpy(&packet->header.pct_type, stream, sizeof(char));

    offset = sizeof(char);

    memcpy(&packet->header.payload_lenght, stream + offset, sizeof(short int));

    offset += sizeof(short int);

    for (alloc_size = 1; (stream + offset)[alloc_size - 1] != '\0';
            alloc_size++) {
        packet->payload.path = malloc(alloc_size)+1;
    }

    memcpy(packet->payload.path, stream + offset, alloc_size+1);

    offset += strlen(packet->payload.path);

    memcpy(&packet->payload.size, stream + offset, sizeof(long unsigned int));

    offset += (sizeof(long unsigned int));

    memcpy(&packet->payload.offset, stream + offset, sizeof(long int));

    return packet;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T07:55:10.793

撇开样式问题不谈，您的反序列化函数中出现了一个错误。代替

```
offset += strlen(packet->payload.path); 
```

采用

```
offset += alloc_size+1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T07:57:29.393

`strlen(packet->payload.path + 1)`看起来很可疑，尤其是与`strlen(packet->payload.path) + 1)`.
你确定这是你的意思吗？

# mongodb - mongodb：upserting：仅在插入文档时设置值

> ID：10671669
> 
> 赞同：20
> 
> 时间：2012-05-20T07:43:17.460
> 
> 标签：mongodb

考虑一个简单的 mongo 文档结构：

{ _id，第一次，最后一次 }

客户端需要插入具有已知 ID 的文档，或更新现有文档。'lastTime' 应始终设置为最近的时间。对于“firstTime”，如果正在插入文档，则“firstTime”应设置为当前时间。但是，如果文档已经创建，则“firstTime”保持不变。我想纯粹用 upserts 来做（以避免查找）。

我已经抓取了[http://www.mongodb.org/display/DOCS/Updating](http://www.mongodb.org/display/DOCS/Updating)，但我只是不知道如何完成该特定操作。

我不认为这是不合理的，有 $push 和 $addToSet 操作可以有效地在数组字段上执行此操作，而在简单字段上没有任何操作。就像应该有类似 $setIf 操作的东西。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-04-08T06:53:39.393

我遇到了完全相同的问题，对于 <2.4 没有简单的解决方案，但是从 2.4 开始，**$setOnInsert**运算符让您可以做到这一点。

```
db.collection.update( <query>,
                      { $setOnInsert: { "firstTime": <TIMESTAMP> } },
                      { upsert: true }
                    ) 
```

有关详细信息，请参阅[setOnInsert 的 2.4 发行说明](http://docs.mongodb.org/manual/reference/operator/setOnInsert/#op._S_setOnInsert)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T21:51:49.290

在尝试根据现有内容更新文档时，我遇到了一个非常相似的问题——也许这个解决方案也适用于你：

尝试从您的记录中删除 _id 属性并仅在更新的查询部分中使用它（您必须从 pymongo speak 翻译...）

```
myid = doc.get('_id')
del doc['_id']
mycollection.update({'_id':myid}, {'$set':doc}, upsert=True) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-02-22T08:57:40.990

如果您随后将触发以下代码 2 次，它将首先在文档插入时设置`firstVisit`和`lastVisit`（并将`upsertedId`在响应中返回），然后将仅更新`lastVisit`（并将返回`modifiedCount: 1`）。

使用 Mongo 4.0.5 进行测试，但我相信应该使用旧版本。

```
db.collection.updateOne(
  {_id: 1}, 
  { 
    $set: { 
      lastVisit: Date.now() 
    }, 
    $setOnInsert: {
      firstVisit: Date.now()
    }
  }, 
  { upsert: true }
); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-21T15:57:54.833

没有办法只用一个 upsert 来做到这一点。您必须将其作为 2 个操作进行 - 首先尝试插入文档，如果它已经存在，则插入将由于 _id 索引上的重复键违规而失败。然后您执行更新操作以将 lastTime 设置为现在。

# iphone - 如何使用 UIActionSheet 切换视图？

> ID：10671673
> 
> 赞同：-1
> 
> 时间：2012-05-20T07:43:26.333
> 
> 标签：iphone, objective-c, ios, xcode

按下取消按钮时如何使用 UIActionSheet 切换视图？

xcode 4.3.2

```
- (void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex {

    NSString *buttonTitle = [actionSheet buttonTitleAtIndex:buttonIndex];
    if ([buttonTitle isEqualToString:@"Done"]) {
        thiredViewController *controller1 = [[thiredViewController alloc] initWithNibName:@"thiredViewController" bundle:nil];
        [self presentModalViewController:controller1 animated:NO];
    }
} 
```

这段代码什么都不做，视图没有改变，我朋友告诉我，我不能用这个方法在新的 Xcode 中改变视图，那我应该用什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T10:38:12.423

你*永远不*应该比较按钮的*标题*来决定采取什么行动。如果您决定在其他地方更改它但忘记更改您的委托方法怎么办？如果您将应用程序本地化为多种语言，这也会变得混乱。

`UIActionSheet`有一个方便的`cancelButtonIndex`方法，您可以使用它：

```
if (buttonIndex == actionSheet.cancelButtonIndex) {
    //do your thing...
} 
```

# java - 我应该为我的 Android 应用程序使用 SQLite 数据库还是只使用 JSON？

> ID：10671677
> 
> 赞同：1
> 
> 时间：2012-05-20T07:44:08.787
> 
> 标签：java, android, json, sqlite

我目前正在构建我的第一个 Android 应用程序，并且我已经到了需要考虑数据存储的地步。我的应用程序旨在帮助起草一支梦幻足球队，因此它使用了一个由 200-400 名球员组成的庞大名单，每个球员都有各自的预测、姓名、位置、球队等。

虽然该应用程序足以编辑、添加和删除名册中的球员和预测，但它绝对不是为了从头开始创建名册而构建的，所以我将在应用程序中包含一个默认名册。我希望用户能够保存和加载他们对默认花名册所做的修改，以及从在线下载更新的预测。

我对数据库的唯一经验是在 Web 编程课程中使用的远程 MySQL 数据库。数据库是否适合我正在尝试做的事情？有没有办法存储不同版本的数据库/表，以便用户可以拥有多个名册或下载更新？对于序列化的 JSON 对象，这是否更好？或两者？

任何帮助或建议将不胜感激！多谢你们

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T09:37:29.270

除非您的数据很琐碎，否则推荐使用 Sqlite（Android 的默认数据库引擎）存储结构化数据。

JSON 对于与服务器交换数据很有用。

# java - 如何将超类转换为子类

> ID：10671681
> 
> 赞同：-1
> 
> 时间：2012-05-20T07:44:46.617
> 
> 标签：java, concurrency, runnable

我有这个问题，我似乎无法在 Internet 上找到解决方案。我在这里发布了一个类似的链接，[http://www.coderanch.com/t/581517/java/java/cast-superclass-subclass#2645691](http://www.coderanch.com/t/581517/java/java/cast-superclass-subclass#2645691)

```
class Example implements Runnable {
       String ID;

       public Example (String ID) {
            this.ID = ID;
       }
       public void run() {
     // Code to do something.
   }
} 
```

我正在使用 ScheduledThreadPoolExecutor 类。在该类下，有一个名为 getQueue 的方法。然而 getQueue 返回一个 Runnable 接口的 BlockingQueue。有没有办法从 Runnable 接口的阻塞队列中取回示例类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T07:53:42.437

您是否使用 ScheduledThreadPoolExecutor 的 schedule 方法将新任务插入队列？这些任务是 Example 类的实例吗？

如果是这样，那么在获得新的“可运行”时，您可以通过以下方式将其转换为示例：

```
Runnable r = getRunnableFromQueue();
Example e = (Example) r; 
```

根据程序的流程，最好在强制转换之前验证类型是否匹配（例如使用 instanceof）。

希望能帮助到你。

# wpf - Schedular.Dispatcher 在哪里？

> ID：10671684
> 
> 赞同：3
> 
> 时间：2012-05-20T07:45:19.700
> 
> 标签：wpf, c#-4.0, system.reactive

我为 wpf 尝试了 Rx(Reactive Extensions) 并且无法找到`Scheduler.Dispatcher`.
我确实添加了参考，`System.Reactive.Windows.Threading.dll`但即使那样我也无法使其工作......任何建议。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T08:33:22.823

现在是`DispatcherScheduler.Instance`。

# java - 如何从其他类中获取 var

> ID：10671686
> 
> 赞同：-1
> 
> 时间：2012-05-20T07:45:41.010
> 
> 标签：java, android, eclipse, class

我相信我有一个简单的问题......但对于我作为初学者来说，我再也看不到它了。

在一个类中，我想从另一个类中获取一些 var。

第一类：

```
package com.blabla;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.SharedPreferences;
import android.preference.PreferenceManager;
public class SMSReceiver extends BroadcastReceiver {

@Override
public void onReceive(Context context, Intent intent) {
    //get shared preferences

    GetSettings test1 = new RingSettings();
    String theSMStext = test1.getSMStext();
    Boolean theActivateSMS = test1.getActivateSMS();    
}
} 
```

第 2 类：

```
package com.blabla;
import android.content.Context;
import android.content.SharedPreferences;
import android.preference.PreferenceManager;
public class GetSettings {

/**
 * @param args
 */
private String SMStext;
private Boolean ActivateSMS;

public static void RingSettings(Context context) {
    SharedPreferences sp = PreferenceManager.getDefaultSharedPreferences(context);

    String SMStext = sp.getString("SMStext", "0");
    Boolean ActivateSMS = sp.getBoolean("ActivateSMS", false);
}

public String getSMStext(){
    return SMStext;
}

public Boolean getActivateSMS(){
    return ActivateSMS;
}
} 
```

Eclipse 在 Class1 中为我提供“RingSettings 无法解析为类型”=> 在 GetSettings test1 = new RingSettings();

我做错了什么？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T08:00:23.520

You definitly have a few things to fix here.

*   RingSettings as defined in GetSettings returns type void not a GetSettings object.
*   RingSettings is defined to take a context as an argument.
*   RingSettings is defined as a method of a GetSettings object and should be called with GetSettings.RingSettings(context)
*   assuming you are trying to create a GetSettings object... GetSettings should have a constructor

These are just a few to get started. I don't mean to be rude here but you should be playing with some simpler examples to better learn the basics of Java. That being said, if you fix the above problems and repost your code someone should be able to get you closer to what your trying to accomplish.

Check out this info on the `new` keyword: (to get you started)

[The new operator instantiates a class by allocating memory for a new object and returning a reference to that memory. The new operator also invokes the object constructor.](http://docs.oracle.com/javase/tutorial/java/javaOO/objectcreation.html)

Good luck

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T08:27:26.373

最简单的解决方案是实现一个辅助类：

```
public class GlobalVars extends Application {

    private static String value2;

    public static String getValue() {
        return value2;
    }

    public static void setValue(String value) {
        value2 = value;
    }
} 
```

在 A 类中，将值设置为`GlobalVars.setValue("something");`

在 B 类中，获取值为`String your_value = GlobalVars.getValue();`

# mongodb - VMPlayer ubuntu 上的 mongodb

> ID：10671688
> 
> 赞同：0
> 
> 时间：2012-05-20T07:46:01.000
> 
> 标签：mongodb

我已经在 windows7 上运行的 VMplayer 中的 ubuntu 上安装了 mongoDB。

我已经编辑了主机文件

> 机器名 192.168.1.12。

我安装了所有软件包并尝试启动 mongod。这是我得到的错误：

> ubuntu:/etc/init.d$ start mongodb start: 拒绝发送消息，1 个匹配规则；type="method_call", sender=":1.128" (uid=1000 pid=9669 comm="start mongodb") interface="com.ubuntu.Upstart0_6.Job" member="Start" error name="(unset)" requested_reply="0" 目的地="com.ubuntu.Upstart" (uid=0 pid=1 comm="/sbin/init")

你能告诉我可能是什么问题吗？
我能够在 ubuntu 中成功安装。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T20:15:38.370

那是权限错误，你需要sudo，即运行以下命令就可以了——

sudo 启动 mongodb

# jquery - 如何为我的下拉框激活 selected()

> ID：10671692
> 
> 赞同：3
> 
> 时间：2012-05-20T07:46:21.180
> 
> 标签：jquery, backbone.js, drop-down-menu, haml, jquery-chosen

我正在使用[selected()](http://harvesthq.github.com/chosen/)来实现我的下拉框。

在我的主页中，我将下拉框设置为如下代码

```
//Code in home template
.bookmark_questions
  %select
    %option{value: "xxxx"} xxxxxx
    %option{value: "xxxx"} xxxxxx
    %option{value: "xxxx"} xxxxxx
    %option{value: "xxxx"} xxxxxx

//Code in home view
render: ->
  $(@el).html @template()
  @$('select').chosen()
  @ 
```

在我的主页视图中，我尝试通过“ `@$('select').chosen()`”激活选择，但是当我尝试运行代码时，出现以下错误

> this.search_field[0] 未定义

![在此处输入图像描述](../Images/c1c40ecf8081ca203d435f9cbedc5c44.png)

为我的案例激活选择的正确方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T21:24:51.450

我知道这已经很老了，但是我遇到了几乎相同的问题，解决问题的方法是等待调用插件，直到`select`将`DOM`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T11:07:04.927

Backbone 可能会`render()`在您的 DOM 准备好之前调用，同时`chosen`找不到您指定的元素。这是我的解决方案：

首先，在顶层的 coffee/js 文件末尾添加一个 DOM 就绪块。

```
$ ->
  $('.bookmark_questions select').chosen() 
```

然后让 Backbone.View 告诉`chosen`在视图准备好时更新项目

```
render: ->
  @$el.trigger('liszt:updated') 
```

# iphone - 检测 UITextField 的焦点变化

> ID：10671698
> 
> 赞同：42
> 
> 时间：2012-05-20T07:47:05.490
> 
> 标签：iphone, ios, ios5, uitextfield, xcode4.3

我正在尝试将动画设置为在键盘隐藏并出现在文本字段时向上移动，并且我让它工作得很好，但是当焦点从一个文本字段移动到另一个文本字段时，它不起作用因为键盘已经显示了。

在 viewDidLoad 中，我注册了以下内容：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillShow:) name:UIKeyboardWillShowNotification object:nil];
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillHide:) name:UIKeyboardWillHideNotification object:nil]; 
```

然后在keyboardWillShow 和keyboardWillHide 方法中，它确定视图是否应该移动并相应地动画。但是，如果键盘已经显示并且用户单击需要视图向上移动的另一个文本字段，则不会调用该方法。当键盘已经显示时，有什么方法可以检测焦点是否已更改为另一个文本字段？如果有一种方法可以做到这一点而不必将所有文本字段设置为委托，那就太好了。

提前致谢。

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2012-05-20T07:51:45.973

使用`UITextField`委托方法..它比键盘方法更好..当 textField 获得焦点时`- (void)textFieldDidBeginEditing:(UITextField *)textField;`将被触发..当它失去焦点时`- (void)textFieldDidEndEditing:(UITextField *)textField;` 将被触发。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-20T08:19:13.387

```
-(BOOL)textFieldShouldBeginEditing:(UITextField*)textField {
if (textField.tag == 1) { //first textField tag
    //textField 1
}
else {
   //textField 2
}
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-09-23T05:19:07.460

使用 UITextFieldDelegate

和

```
func textFieldDidBeginEditing(textField: UITextField) {
        println("did")
        if textField.tag == 1{
            self.txtFullName.layer.borderColor = UIColor.blueColor().CGColor
        }
    } 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-09-18T20:39:52.767

在 Swift 4 中：

1.  实施`UITextFieldDelegate`到你的`ViewController`班级
2.  `textFields`添加您要检测焦点的 Outlets
3.  实现功能`textFieldDidBeginEditing`（如果您想收到有关该特定操作的通知，请参阅[Apple 的文档](https://developer.apple.com/documentation/uikit/uitextfielddelegate)）并用您的代码填充它
4.  在`viewDidLoad()`将您的`ViewController`班级分配为`textField`您之前在步骤 2 中添加的代表时

它必须类似于：

```
class ViewController: UIViewController, UITextFieldDelegate {
    @IBOutlet weak var yourTextField: UITextField!

    func textFieldDidBeginEditing(_ textField: UITextField) {
        // Your code here
    }

    override func viewDidLoad() {
        super.viewDidLoad()
        yourTextField.delegate = self
    }

    ...

} 
```

# javascript - 在共享点环境之外使用脚本调用 lists.asmx Webservices

> ID：10671700
> 
> 赞同：0
> 
> 时间：2012-05-20T07:47:27.740
> 
> 标签：javascript, asp.net, sharepoint, soap, windows-desktop-gadgets

我想使用 List.asmx getallitems webservice 来获取 Windows 7 小工具中的所有列表项，过去 10 天我一直在研究，但找不到我想要的。

请记住，我在 google 上找到了数百个教程，它们正在做同样的事情，但对于 Sharepoint 2010 或 Web 内容 webpart，或者使用 .Net Web 参考或代理。

这里的问题是，我正在使用 Sharepoint 2007，我想为客户开发一个 Windows 7 小工具，因此它将脱离 sharepoint 环境，并且因为它是一个 Windows 7 小工具，所以我掌握的所有工具都是，

*   HTML
*   脚本语言 JavaScript/Jquery
*   SOAP 调用 web 服务
*   CAML 查询可能吗？
*   XMLHTTP请求？但是我们的门户是使用 SSL/HTTPS

哦，我忘了提一件事，我还需要进行 Windows 身份验证，所以我不能直接编写 SOAP 消息来获取列表项。所以我可以使用的 Web 服务是“lists.asmx”和“authentication.asmx”

**附加信息**

我们的共享点目前可以通过 Ipad 访问，他们正在做的是，以某种方式验证用户并获得一个 cookie 作为回报，并将其用于以后的验证和操作，如何做到这一点？我一点头绪都没有。至少目前我也不能很好地向他们寻求帮助。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T09:41:04.327

如果您有能力为您的小工具部署 COM 组件，您可以查看[类似的帖子](https://stackoverflow.com/a/10651437/623816)。从 .NET CCW DLL 调用 SP WS 时，您可以重复使用经过身份验证的 Windows 会话。

--- 费尔达

# c++ - C++ 类中的许多成员函数会影响性能吗？

> ID：10671702
> 
> 赞同：1
> 
> 时间：2012-05-20T07:47:44.183
> 
> 标签：c++, performance, class, function, member

如果我继续向类中添加成员函数，是否会对性能产生重大影响？当我使用该类时，我可能一次只能同时使用几个成员函数，因此理论上我可以将单个类拆分为多个具有较少成员函数的较小类。将很多函数塞进同一个类中是否会对性能造成很大影响？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T07:52:45.300

不，没关系。但是大量公共 api 的存在表明，如果你想要一个好的设计
，你应该确保你遵循**[单一责任原则。](http://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CGMQFjAA&url=http://en.wikipedia.org/wiki/Single_responsibility_principle&ei=1aK4T_fyJYvyrQeV5u38Bw&usg=AFQjCNFoci3JyHtoEwOx1lduCbF7IcS50Q)**

> 改变班级的理由不应该超过一个。

如果您的设计坚持这一点，那么它一切都很好，并且在类中塞满了很多功能不会对性能造成任何坏处。

`virtual`如果这些函数的目的是在派生类中被覆盖，那么有些人可能会争论性能会受到影响，那么你应该制作它们`virtual`，除非这些函数不是`virtual`为了灵活性而制作的，而是为了一个深思熟虑的设计的基础，然后继续制作它们`virtual`。性能命中不应该是一个问题，它是您为想要拥有的功能付出的代价。

此外，只有配置文件才能真正为您提供有关性能瓶颈的准确指示，没有它，您得到的只是基于经验的推测或猜测，这可能并不真正具有指示性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T07:58:12.417

性能损失**不是**来自于拥有大量函数，而是来自于执行给定任务的函数调用的深层层次结构。每个函数调用都会导致

1.  推入/保存当前基指针
2.  保存当前堆栈指针，然后将当前堆栈指针作为新的基指针。
3.  将参数压入堆栈。

4.  执行功能。

因此，例如，如果在执行顺序中，如果您最终调用 10 个函数，您会结束堆栈 10 次，并且当函数（/s）完成时，堆栈必须展开。

其次，有 gcc 优化来降低跳转到您的函数的成本，`.Text`例如，通过使用改善此类函数的局部性的`attribute`被调用`hot`，以便更快地访问此类函数。

您始终必须将函数执行视为 **在执行它的线程的上下文中 **以便您可以识别各种瓶颈并优化它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T07:49:54.540

不，如果您将班级分成更小的部分，那么二进制大小不应该也不会有任何差异。如果您想将二进制大小减少到只有您调用的函数，您可以使您的类成为模板。

# if-statement - VHDL If 语句

> ID：10671705
> 
> 赞同：1
> 
> 时间：2012-05-20T07:48:35.197
> 
> 标签：if-statement, vhdl

例如，如果您有这样的过程：

```
process (clk)
if (var = '1') then
   var2 = '1';
end if;

if (var2 = '1') then
   //do something
end if;
end process; 
```

第二个 if 语句会在下一个时钟周期执行，还是会在 var2 = '1' 执行后立即执行？

下面的代码会和上面的代码做同样的事情吗？

```
process (clk)
if (var = '1') then
   var2 = '1';
end if;
end process;

process (var2)
if (var2 = '1') then
   //do something
end if;
end process; 
```

如果有人可以解释时间问题，那就太好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-21T12:11:35.940

如果您`var`的 s 是变量，那么您不能明智地执行第二个选项，因为您不能跨进程使用变量（在大多数情况下，请参见下文）。如果它们实际上是信号，那么可以。

在第一个代码中 - 如果它们是变量，那么是的，它们将立即更新并且代码的第二部分将运行。

如果它们是信号，那么第二个`if`块将仅在下一次运行，因为信号仅在写入它们的进程结束时更新。

第二个示例代码将在第一个运行后的下一个“增量周期”中运行第二个进程，因为它对 var2 上的更改很敏感。

* * *

您*可以*在进程之间使用变量，但必须将它们指定为`shared variable`s。如果你用“直接”的着色变量来做这件事，你会冒着可怕的类似 Verilog 的竞争条件的风险，因为读取和更新的顺序是未定义的。

您应该使它们`protected type`有点像 OO，并且具有对值进行操作的方法，从而允许跨多个进程进行原子访问。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T11:32:37.897

在您的第一段代码中 - 作为`var2`一个变量，它将立即获得新值。因此，该`if`语句将看到新值，并将`//do something`在同一时间片内发生。

（`//`评论？真的吗？这是 VHDL。我们用过`--`）

您的第二段代码不起作用。变量的作用域是进程，不能用于在进程之间传递值。您必须使用信号，因此规则会发生变化。考虑这段代码：

```
signal sig  : std_logic := 1;
signal sig2 : std_logic := 0;

process (clk)
  if (sig = '1') then
    sig2 <= '1';
  end if;

  if (sig2 = '1') then
    -- do something
  end if;
end process;

process (sig2)
  if (sig2 = '1') then
    -- do something else
  end if;
end process; 
```

初始条件：`sig`is`1`和`sig2`is `0`，所以我们只是在等待`clk`边缘。

当时钟沿到达时，我们进入我们看到的第一个进程，`sig`即`1`分配`1`给`sig2`。到目前为止一切都很简单，但是因为`sig2`是一个信号，所以在过程完成之前不会发生分配。比意味着当我们在下一行比较时，它会是假的（`sig2`现在仍然是），我们不会。然后我们结束这个过程。`1``sig2``0``-- do something`

现在，因为在第一个进程`sig2`更改值结束时，`0 -> 1`第二个进程将被触发（它对 敏感`sig2`）。它看到了`sig2`，`1`所以它会`-- do something else`的。

当下一个时钟沿到来时（并且它可能是此代码的负沿），`sig2`仍然`1`如此，所以现在我们将`-- do something`，我们将为每个时钟沿执行此操作。

总之，此代码的事件顺序为：

```
Clk  : 0->1
Sig2 : 0->1
-- Do Something Else
Clk  : 1->0
-- Do Something
Clk  : 0->1
-- Do Something
Clk  : 1->0
-- Do Something
Clk  : 0->1
-- Do Something
......... 
```

当您了解该排序时，您将了解 VHDL 如何安排事物的重要部分。

# xcode - cv::imread OpenCV 的相对路径与绝对路径

> ID：10671706
> 
> 赞同：0
> 
> 时间：2012-05-20T07:48:42.327
> 
> 标签：xcode, visual-studio-2010, opencv

我在 VS2010 和 Xcode 4.2 上都遇到了 OpenCV 2.3.1 和 2.4 的跨平台错误

如果我在将图像路径作为绝对路径时使用 cv::imread ，它可以工作。如果那是相对路径，则它不起作用。我通常将图像与代码以及项目中的所有其他目录放在同一个目录中，只是为了小心。

如果有人能回答这个问题，将不胜感激。谢谢！

哈里什。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T08:15:20.097

在 Visual Studio 中，当您创建 C++ 项目时，它会将项目的工作目录设置为项目目录，而不是可执行文件的输出目录。

这意味着如果您从 Visual Studio 中运行项目（通过使用 F5 按钮或“开始调试”按钮），您正在编写的程序将无法看到与.exe 文件。但是，当您从 Windows 资源管理器（通过双击它）运行程序时，它将按预期工作。

要解决此问题，您需要进入`Configuration properties`->下的项目属性窗口`Debugging`，并将工作目录从 更改`$(ProjectDir)`为`$(OutputPath)`。您应该为 Debug 和 Release 配置更改此设置。

我不知道这在 XCode 中是否相同，但你也可以在那里尝试这个解决方案。

![工作目录配置](../Images/8b42264485e17b18dd32066f7f5fb4d7.png)

# python - 在 (i)python 会话之间保留命令历史记录

> ID：10671709
> 
> 赞同：3
> 
> 时间：2012-05-20T07:49:03.650
> 
> 标签：python, shell, command-line

当我从命令行打开 python 或 ipython 时，我没有以前使用的命令历史记录，使用 up 键
有没有办法配置它，记住命令，比如 .bash_history？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T08:14:03.707

干净地退出 ipython`Ctrl+D`并且 ipython 应该默认执行此操作。

# c# - ASP.Net url 路由结构

> ID：10671719
> 
> 赞同：0
> 
> 时间：2012-05-20T07:50:26.007
> 
> 标签：c#, database, url-routing, webforms

我正在查看一个具有良好 URL 结构且 URL 路由基于面包屑的网站。如果有人能给我关于关于的想法，我将不胜感激

1.  本站结构的数据库设计
2.  如何使用 c# & URL 路由在 ASP.Net webform 中实现这样的 URL 路由

    网站网址示例

    [http://www.messefrankfurtme.com/frankfurt/204/messe-frankfurt/for-visitors/the-company/meet-the-team/sales-team.aspx](http://www.messefrankfurtme.com/frankfurt/204/messe-frankfurt/for-visitors/the-company/meet-the-team/sales-team.aspx)

对我来说，它看起来像是一个嵌套的页面结构，可以达到任何深度。可能类似于数据库设计中的PageID、ParentPageID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T08:22:07.950

实际上，它看起来并不难实现。
请注意，所有网址都以“frankfurt/[ID]/”开头

这个 ID 是解析器真正感兴趣的唯一部分。请注意，如果您访问[http://www.messefrankfurtme.com/frankfurt/19/messe-frankfurt/for-visitors/about-us/messe-frankfurt.aspx](http://www.messefrankfurtme.com/frankfurt/19/messe-frankfurt/for-visitors/about-us/messe-frankfurt.aspx)或访问
[http://www.messefrankfurtme。 com/frankfurt/19/asd.aspx](http://www.messefrankfurtme.com/frankfurt/19/asd.aspx) 这是同一页。

他们拥有的是一个 URL 生成器，它获取一个页面并根据它的 ID 和路径生成一个 URL。

url 解析器要简单得多，实际上只解析 ID，忽略 URL 的所有其他部分。
这是处理智能 URL 的好方法，但它会创建重复的页面，这可能对 SEO 不利。

我建议在 URL 解析器中添加几行，这将向 URL 生成器查询给定 ID 的正确 URL，如果不是请求的 URL，则将用户重定向到正确的 URL。

# java - 内部类的通用数组创建编译错误

> ID：10671723
> 
> 赞同：5
> 
> 时间：2012-05-20T07:51:07.737
> 
> 标签：java, arrays, generics

我正在尝试使用泛型实现链接集合，如下所示。

```
public class A<E> {

  private class B {

    private B[] b;
    private E item;

    private B() {
      this.b = new B[2];
    }

  } // end inner class B

} // end class A 
```

A 是集合，B 是集合中的元素或节点，其中包含一个引用后继/前任的数组和一个项目。

不允许创建数组。我得到的错误是`generic array creation`. 我认为它实际创建的是一个数组是否正确`A<E>.B`？

如果不是，是什么导致了错误？

如果是这样，我该如何解决这个问题？

我显然省略了大量的代码，如果我提供的还不够，请告诉我。任何意见，将不胜感激。谢谢你。

**编辑 1：**我应该提到参数化类型必须与 in`A`相同`B`。所以传递`<E>`给内部类是不可能的，因为它创建并`E#2`离开`A`.`E#1`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T08:20:28.677

您调用`B`从外部类继承泛型，因为它不是静态的。而且你不能只是让它静态，因为它也需要`E`。

因此，您的`B.b`数组确实需要一个通用类型，即，`A<E>.B`或者如果您将代码更改为*静态*内部类`A.B<E>`（如果您使用`private static class B<E>`）。

在 Java 中，由于泛型的实现方式（通过擦除），数组的类型没有明确定义。一方面，它应该是 的数组`B`，另一方面，它应该是 的数组`Object`。

最可行的解决方案似乎是`Object[]`显式使用和强制转换。如果您想提高类型安全性，当然可以使用`ArrayList<B>`内部使用的 an `Object[]`！

在您的特定代码中，`B b1, b2;`也可能是一个实际上更快（无边界检查）并且需要更少内存（无数组对象；无大小信息）的选项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T18:02:39.367

`B`是一个非静态内部类。这意味着它引用了封闭类的实例。所以它被外部类的类型参数隐式参数化。所以当你写的时候`B`，它的意思是`A<E>.B`。要创建数组，您应该使用原始类。但是，`B`不是原始类；要引用原始类，您需要明确限定它：`A.B`

所以这就是你想要的：

```
this.b = new A.B[2]; 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-20T08:00:08.343

您还需要将 E 传递给内部类

```
 private class B<E> {

            private B[] b;
            private E item;

            private B() {
                this.b = new B[2];
            }

        } // end inner class B 
```

# matlab - 如何在同一画布上按顺序可视化matlab中的许多矩阵以制作视频？

> ID：10671724
> 
> 赞同：2
> 
> 时间：2012-05-20T07:51:27.970
> 
> 标签：matlab, visualization

我需要这样的东西[，](https://stackoverflow.com/questions/3942892/how-do-i-visualize-a-matrix-with-colors-and-values-displayed)但我有很多描述二维电场随时间变化的矩阵。所以我希望矩阵可视化相互替换，以获取视频

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T12:22:54.083

我想给你一个示例代码，以从一系列绘图中生成动画 gif。您可以修改绘图以生成您喜欢的任何内容；例如，您的链接中的那个。

```
gifOutputName = 'sample.gif';

%# As an example, let us draw a 3-D plot
%# You can generalize it to anything you like
Z = peaks; surf(Z);
axis tight
set(gca,'nextplot','replacechildren');
for j = 1:20
    surf(sin(2*pi*j/20)*Z,Z)

    %# Grab the current frame
    RGB = frame2im(getframe(gcf));

    %# Reduce it to 256 colors since it's gonna be GIf image
    [IND, map] = rgb2ind(RGB, 256);

    if j == 1 % Vreate in the first step

        %# 'LoopCount' indicates how many times the animation will play, 
        %# Inf states infinity. Refer to "GIF-Specific Parameters" in the 
        %# documentation.
        imwrite(IND, map, gifOutputName, 'gif', 'LoopCount', Inf);

    else %# Otherwise, append it to the previous
        imwrite(IND, map, gifOutputName, 'gif', 'WriteMode', 'append');
    end
end
close %# Close the figure 
```

[![在此处输入图像描述](../Images/c50ed9e9bdf3c31b3fa68f1cd0a21594.png)](https://i.stack.imgur.com/1HADF.gif)
[（来源：[ismailari.com](http://ismailari.com/wp-content/uploads/2008/07/ornek_animasyon.gif)）]

# sql - 使用过程创建 PL/SQL 包

> ID：10671727
> 
> 赞同：2
> 
> 时间：2012-05-20T07:51:58.320
> 
> 标签：sql, oracle, plsql

我想用一些程序创建一个 oracle 包，但是我得到一个编译错误。如何调试此代码？

```
CREATE OR REPLACE PACKAGE BODY es IS
    PROCEDURE spisok(parent_id IN INTEGER)
    AS ID SPISOK_UZLOV.SP_ID%TYPE;
        CURSOR child_id IS SELECT fr_id FROM frame WHERE fr_fr_id=parent_id;
    BEGIN
        INSERT INTO SPISOK_UZLOV VALUES(parent_id);
        OPEN child_id;
        LOOP
            FETCH child_id INTO ID;
            EXIT WHEN child_id%NOTFOUND;
            spisok(ID);
        END LOOP;
        CLOSE child_id;
    END spisok;
END es; 
```

我得到 [Err] ORA-24344：编译错误成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T07:58:00.370

`SHOW ERROR`可以给你一些提示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T08:01:34.393

这是包体的代码，你真的先声明了包吗？请参阅此链接以供参考：[http ://docs.oracle.com/cd/B10501_01/appdev.920/a96624/09_packs.htm](http://docs.oracle.com/cd/B10501_01/appdev.920/a96624/09_packs.htm)

# c# - 将时间跨度除以 2？

> ID：10671728
> 
> 赞同：34
> 
> 时间：2012-05-20T07:52:00.110
> 
> 标签：c#, windows-phone-7, datetime, xml-parsing

我有两次，它们的值是从 web 的 XML 中获取的。

```
XElement xmlWdata = XElement.Parse(e.Result);

string SunRise = xmlWdata.Element("sun").Attribute("rise").Value;
string SunSet = xmlWdata.Element("sun").Attribute("set").Value;

DateTime sunrise = Convert.ToDateTime(SunRise.Remove(0,11));
DateTime sunset = Convert.ToDateTime(SunSet.Remove(0, 11)); 
```

这给了 med 时间：日出 04:28，日落 22:00。然后如何进行计算：

**`(sunrise + (sunset-sunrise)/2)`**

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-05-20T07:58:16.557

我想你想这样做：

```
TimeSpan span = sunset-sunrise;
TimeSpan half = new TimeSpan(span.Ticks / 2);
DateTime result = sunrise + half; 
```

如果你愿意，它可以写在一行中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T06:29:54.727

`TimeSpan sunnyTime = TimeSpan.FromTick(sunrise.Ticks + (sunset.Ticks - sunrise.Ticks) / 2);`

# android - 使用 GL_fragcolor 时，Android openGL es 2.0 RGB 值不正确

> ID：10671729
> 
> 赞同：0
> 
> 时间：2012-05-20T07:52:02.590
> 
> 标签：android, eclipse, opengl-es

我在 android 平台（三星 Galaxy S2）上使用 OpenGL 2.0。当我通过假设为完美的灰色阴影的 GL_fragcolor 设置一个值时，我在渲染场景时将绿色分量置于红色和蓝色值的上方或下方。

```
"   void main() {                               " +
"       vec4 c = texture2D(texture0, tCoord);   " +
"       c *= vColor;                            " +
"       gl_FragColor = vec4(c.r,c.r,c.r,1);     " + 
"   }                                           "; 
```

如您所见，上述例程的最终结果应该为每个组件输出相同的值。（这是一个临时套路，夸大使用灰度输出的问题）

RGB 渗色问题的屏幕截图。我没有足够的积分在这里张贴照片所以把它上传到 photobucket...

[http://s1267.photobucket.com/albums/jj556/mrpookie99/?action=view¤t=rgb.png](http://s1267.photobucket.com/albums/jj556/mrpookie99/?action=view&current=rgb.png)

所以我不知道它是否将 8bit 值转换为 565 值或类似的值，因为我找不到任何可以将输出分辨率设置为屏幕的文档...

谢谢你的帮助，

安德鲁。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T11:13:53.220

好的，我现在知道为什么会出现这种情况了...

如果您使用 GLSurfaceView 的默认设置，它会为显示器创建一个 16 位深的缓冲区 @ 565 RGB ...

为了解决这个问题，我将默认缓冲区从 16 位更改为 32 位，一切都已修复:)

[http://developer.android.com/reference/android/opengl/GLSurfaceView.html](http://developer.android.com/reference/android/opengl/GLSurfaceView.html)

开发人员指南中的一句话：“如果没有调用 setEGLConfigChooser 方法，则默认情况下，视图将选择深度缓冲区深度至少为 16 位的 RGB_565 表面。”

希望这对将来的其他人有所帮助...

# c# - 移动文件后找不到类型或命名空间名称

> ID：10671731
> 
> 赞同：0
> 
> 时间：2012-05-20T07:52:41.950
> 
> 标签：c#, .net

当我尝试运行 C# 代码时，我在 Visual Studio 中收到此错误消息：

> 找不到类型或命名空间名称“Shape”（您是否缺少 using 指令或程序集引用？）

这是因为我更改了解决方案资源管理器中某些文件的位置吗？从一开始，我将文件放在一个文件夹中，然后我将它们移到外面并删除了该文件夹。我尝试使用重建解决方案并进行清理，但仍然出现此错误。

现在我在解决方案资源管理器中拥有相同“级别”中的所有文件。我该怎么做才能让它再次工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T07:58:01.340

有几件事要尝试：

1.  确保包含该类的类文件`Shape`在解决方案资源管理器中标记为“包含在项目中”。

2.  在有错误的文件中，确保您有一个适当的`using`语句引用`Shape`该类所在的命名空间。

3.  如果`Shape`该类位于外部 DLL 中，请确保在您的项目中引用它。

4.  仔细检查包含该类的类文件的命名空间是什么`Shape`。根据您移动这些文件的方式，它可能已经更改，您需要更新`using`使用它的语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T08:06:51.547

这可能是由很多事情造成的。例如公共、程序集引用以及在项目或解决方案文件夹中。JohnFx 在他的回复中已经处理了其中一些。但要让你“走”，请执行以下操作：

将所有文件移动到解决方案中的同一个项目中。因此，您的解决方案有一个项目，并且所有文件都在该项目中。

这至少应该让你继续前进。然后进行实验。

祝你好运。

# c++ - 递归模板

> ID：10671737
> 
> 赞同：2
> 
> 时间：2012-05-20T07:53:33.010
> 
> 标签：c++, templates, recursion

是否可以为此数据类型编写模板定义？

```
myclass<int, myclass<int> > data; 
```

第二个模板变量应该是可选的，具有相同类型的默认值。

**澄清**

现在我使用这个定义：

```
class defaultClass { };
template <typename T, typename C=defaultClass>
class myclass { ... }; 
```

我想预先定义的`defaultClass`是`myclass<T>`

我想实现类似自动实现属性的东西：第二个参数应该是定义包装变量的上下文。如果上下文被省略，它应该在模板类本身创建的对象中。（我意识到它可以通过另一种方式解决，这只是用例。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T08:27:38.393

看起来非常相似

[http://en.wikipedia.org/wiki/Curiously_recurring_template_pattern](http://en.wikipedia.org/wiki/Curiously_recurring_template_pattern)

您可以通过使用模板基类型创建类层次结构来做您想做的事情，然后您的每个类都可以从该基类派生，例如

```
template<class T> class base { ... };

class derived: public base<derived> {...}; 
```

# macos - 如何配置 Mac MAMP，这样我就不必 777 个文件夹

> ID：10671739
> 
> 赞同：0
> 
> 时间：2012-05-20T07:53:49.863
> 
> 标签：macos, apache, web, localhost, mamp

目前我正在本地使用 git repo，因此在推送文件之前我不会更改任何权限。

我在 OSX 10.6.8 上使用 MAMP。我确定一定有什么我做错了。我希望网页能够写入文件夹，同时保持对文件夹的 755 权限。

注意：MAMP 安装在应用程序中，但我的用户文件夹中的文件夹中有根目录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T08:00:31.433

运行 Apache 的进程的用户是什么？您必须将用户或组更改为 apache 进程，并且您将有权访问文件和 apache 进程。

例子：

```
$ ls -ld incomming
drwxrwxr-x 42 john apache 4096 May 20 07:33 incomming 
```

此文件夹所有者是 John，他拥有完整的写入权限。此文件夹也可由组 apache 写入，该组应该是 apache 进程组。

# linux - 在 ubuntu 上构建 sqlcipher

> ID：10671741
> 
> 赞同：1
> 
> 时间：2012-05-20T07:53:54.060
> 
> 标签：linux, sqlite, ubuntu, sqlcipher

嗨，我正在尝试**在 ubuntu (11.10 minimum) 上构建 sqlcipher**。不过在 Mac OS XI 上没有问题。

我按照 sqlcipher.net 的说明进行操作。第一步是配置。我尝试使用以下命令执行配置：

```
./configure --enable-tempstore=yes CFLAGS="-DSQLITE_HAS_CODEC" LDFLAGS="-lcrypto" 
```

但我收到以下错误消息：“配置：错误：C 编译器无法创建可执行文件”

在 config.log 中，一些行引起了我的注意，但我不知道如何解决它：

```
gcc version 4.6.1 (Ubuntu/Linaro 4.6.1-9ubuntu3) 
configure:2544: $? = 0
configure:2551: gcc -V >&5
gcc: error: unrecognized option '-V'
gcc: fatal error: no input files
compilation terminated.
configure:2555: $? = 4
configure:2578: checking for C compiler default output file name
configure:2600: gcc -DSQLITE_HAS_CODEC  -lcrypto conftest.c  >&5
/usr/bin/ld: cannot find -lcrypto
collect2: ld returned 1 exit status 
```

有人在 ubuntu 上成功构建 sqlcipher 了吗？问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T13:21:31.007

您需要安装 GNU 编译器工具链才能从源代码构建。在终端中执行以下命令。

```
$ sudo apt-get install build-essential 
```

# azure - 无法使用 Spring.NET 将依赖项注入到 Azure WorkerRole 对象

> ID：10671744
> 
> 赞同：3
> 
> 时间：2012-05-20T07:54:11.983
> 
> 标签：azure, spring.net, azure-worker-roles

我在使用 spring.net 4.0 和 nhibernate 3.0 为基于 ASP.net 的 Web 应用程序开发 Web 应用程序方面有中等经验。最近我遇到了一种情况，我需要使用 spring.net 来注入属于`WorkerRole`该类的服务依赖项。我创建了 app.config 文件，就像我通常在春季使用 web.config 文件一样。这是为了清楚起见。（我已经排除了根节点）

```
<configSections>
    <sectionGroup name="spring">
      <section name="context" type="Spring.Context.Support.WebContextHandler, Spring.Web" requirePermission="false" />
      <section name="objects" type="Spring.Context.Support.DefaultSectionHandler, Spring.Core" requirePermission="false" />
      <section name="parsers" type="Spring.Context.Support.NamespaceParsersSectionHandler, Spring.Core" />
    </sectionGroup>
  </configSections>
    <spring>
    <context>
      <!-- Application services and data access that has been previously developed and tested-->
      <resource uri="assembly://DataAccess/data-access-config.xml" />
      <resource uri="assembly://Services/service-config.xml" />
      <resource uri="AOP.xml" />
      <resource uri="DI.xml"/>
    </context>
    <parsers>
      <parser type="Spring.Data.Config.DatabaseNamespaceParser, Spring.Data" />
      <parser type="Spring.Transaction.Config.TxNamespaceParser, Spring.Data" />
      <parser type="Spring.Aop.Config.AopNamespaceParser, Spring.Aop" />
    </parsers>
  </spring> 
```

同样，这是 AOP.xml

```
<object id="FilterServiceProxy" type="Spring.Aop.Framework.ProxyFactoryObject, Spring.Aop">
    <property name="proxyInterfaces" value="Domain.IFilterService"/>
    <property name="target" ref="FilterService"/>
    <property name="interceptorNames">
      <list>
        <value>UnhandledExceptionThrowsAdvice</value>
        <value>PerformanceLoggingAroundAdvice</value>
      </list>
    </property>
  </object>
</objects> 
```

和 DI.xml

```
<object type="FilterMt.WorkerRole, FilterMt" >
  <property name="FilterMtService1" ref="FilterServiceProxy"/>
</object> 
```

但是，我无法将任何依赖项注入工作角色。有人可以让我知道我在这里做错了什么吗？是否有其他方法可以为 Windows azure 应用程序配置 Spring.net DI？

我没有收到任何配置错误，但我看到依赖项尚未注入，因为我尝试注入的属性对象仍然为空。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-20T09:33:25.980

根据我的经验，你不能在你的 WorkerRole 类（实现 RoleEntryPoint 的类）中注入任何东西。到目前为止，我使用[Unity](http://nuget.org/packages/UASI)所做的（我还为 Unity 构建了自己的帮助程序来帮助我注入 Azure 设置），我拥有自己的基础架构，由 Unity 运行和构建，但我在代码中为工作人员创建了它角色。

例如，我在我的 RoleEntry 点的 OnStart() 方法中初始化依赖容器，在那里我解决了我需要的任何事情。然后在我的 Run() 方法中，我在已解决的依赖项上调用一个方法。

这是我的 RoleEntryPoint 实现的快速剥离版本：

```
public class WorkerRole : RoleEntryPoint
{
    private UnityServiceHost _serviceHost;
    private UnityContainer _container;

    public override void Run()
    {
        // This is a sample worker implementation. Replace with your logic.
        Trace.WriteLine("FIB.Worker entry point called", "Information");
        using (this._container = new UnityContainer())
        {
            this._container.LoadConfiguration();
            IWorker someWorker = this._container.Resolve<IWorker>();
            someWorker.Start();

            IWorker otherWorker = this._container.Resolve<IWorker>("otherWorker");
            otherWorker.Start();

            while (true)
            {
                // sleep 30 minutes. we don't really need to do anything here.
                Thread.Sleep(1800000);
                Trace.WriteLine("Working", "Information");
            }
        }
    }

    public override bool OnStart()
    {
        // Set the maximum number of concurrent connections 
        ServicePointManager.DefaultConnectionLimit = 12;

        // For information on handling configuration changes
        // see the MSDN topic at http://go.microsoft.com/fwlink/?LinkId=166357.

        this.CreateServiceHost();

        return base.OnStart();
    }

    public override void OnStop()
    {
        this._serviceHost.Close(TimeSpan.FromSeconds(30));    
        base.OnStop();
    }

    private void CreateServiceHost()
    {
        this._serviceHost = new UnityServiceHost(typeof(MyService));

        var binding = new NetTcpBinding(SecurityMode.None);
        RoleInstanceEndpoint externalEndPoint =
            RoleEnvironment.CurrentRoleInstance.InstanceEndpoints["ServiceEndpoint"];
        string endpoint = String.Format(
            "net.tcp://{0}/MyService", externalEndPoint.IPEndpoint);
        this._serviceHost.AddServiceEndpoint(typeof(IMyService), binding, endpoint);
        this._serviceHost.Open();
    } 
```

如您所见，我自己的逻辑是 IWorker 接口，我可以拥有任意数量的实现，我在我的 Run() 方法中启动它们。我要做的更多是拥有一个 WCF 服务，再次完全通过 DI 和 Unity 进行配置。这是我的 IWorker 界面：

```
public interface IWorker : IDisposable
{
    void Start();
    void Stop();
    void DoWork();
} 
```

就是这样。我的 WorkerRole 中没有任何“硬”依赖项，只有 Unity 容器。我的两个工人有非常复杂的 DI，一切都很好。

不能直接干预 WorkerRole.cs 类的原因是它是由 Windows Azure 基础结构实例化的，而不是由您自己的基础结构实例化的。您必须接受这一点，并在 WorkerRole 适当的方法中构建您的基础设施。并且不要忘记您绝不能退出/中断/返回/退出 Run() 方法。这样做会标记 Windows Azure 基础架构，表明您的代码有问题，并会触发角色回收。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-25T10:35:37.477

我知道这是一个老问题，但我正在经历同样的学习曲线，并想与那些努力理解机制的人分享我的发现。

您无法在工作角色类中访问 DI 的原因是因为它在 IIS 之外的操作系统中的单独进程中运行。将您的课程想象`WebRole`成在 Windows 服务中运行。

我用我的 MVC 网站和 WebRole 类做了一个小实验：

```
public class WebRole : RoleEntryPoint
{
    public override void Run()
    {
        while (true)
        {
            Thread.Sleep(10000);
            WriteToLogFile("Web Role Run: run, Forest, RUN!");
        }
    }

    private static void WriteToLogFile(string text)
    {
        var file = new System.IO.StreamWriter("D:\\tmp\\webRole.txt", true); // might want to change the filename
        var message = string.Format("{0} | {1}", DateTime.UtcNow, text);

        file.WriteLine(message);
        file.Close();
    }
} 
```

这将每 10 秒（左右）向文件写入一个新字符串。现在以调试模式启动您的 Azure 站点，确保站点部署到 Azure 模拟器并且 VS 中的调试器已启动。检查站点是否正在运行并检查 WebRole 是否正在写入相关文件。

现在停止 IIS Express（或 IIS，如果您在完整安装中运行它）而不停止 VS 调试器。您网站中的所有操作现在都已停止。但是，如果您检查临时文件，该过程仍在运行，并且您仍然每 10 秒添加新行。直到你停止调试器。

因此，您在 Web 应用程序的内存中加载的任何内容都在 IIS 内部，并且在 Worker Role 内部不可用。而且您需要从头开始重新配置您的 DI 和其他服务。

希望这可以帮助某人更好地理解基础知识。

# javascript - 重新激活视图时避免从头开始重新渲染 Flash 对象

> ID：10671745
> 
> 赞同：1
> 
> 时间：2012-05-20T07:54:12.410
> 
> 标签：javascript, html, flash, ember.js

我有一个关于 ember js 中用于视图的 div 缓存的问题。

我正在渲染一个非常繁重的 Flash 应用程序作为视图的一部分，我想在视图之间切换，但不一定必须从头开始重新加载 Flash 应用程序。我最好希望它被“隐藏”。

有没有办法在 ember 中执行此操作目前我正在使用[https://github.com/ghempton/ember-routemanager](https://github.com/ghempton/ember-routemanager)实现此功能，其中一个 flash 应用程序保留在 /#media 上，另一个在 /#publishing 所以当用户去/#media media.swf 被加载，/#publishing publishing.swf 被加载到容器 div 中。这些路由中的每一个都有一个与之关联的相应视图类，用于呈现要呈现的 Flash 对象标签。

过去，我使用 jquery 来隐藏容器 div，但我正在寻找更清洁的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-27T15:30:59.247

听起来您想要的功能是能够重用视图实例，并且它是跨状态的 DOM。我对如何做到这一点有一些想法，不幸的是，如果没有一些讨厌的黑客，现在是不可能的。

此外，不幸的是，对于 flash 对象，如果您在 DOM 中移动它们或更改它们的可见性，它们似乎会重新渲染。据我所知，要“隐藏”一个 Flash 对象而不导致重新渲染，您只能使用 CSS 将其移出屏幕。

**更新：**

这是一个有效的 jsFiddle 示例：http: [//jsfiddle.net/EE3B8/1](http://jsfiddle.net/EE3B8/1)

不幸的是，该技术不适用于 Flash 对象，因为在 DOM 中移动它们会导致它们被重新加载。这将是消除昂贵的 DOM 创建/视图实例化的好方法。

# vb.net - 合并两个数据表的最佳方法

> ID：10671746
> 
> 赞同：1
> 
> 时间：2012-05-20T07:54:59.283
> 
> 标签：vb.net, datatable

我需要用条件来标记两个数据表。我有一个数据表，其中数据来自本地 XML 数据库和另一个数据表，其中数据来自远程 SQL Server。

如果在远程数据表中进行了任何更新，我需要更新/与本地数据表合并。这是我到目前为止所拥有的：

```
Public Sub MargeTwoTable()

    Dim SQL As String = ""
    Dim RemoteTable As New DataTable
    Dim LocalTable As DataTable
    Dim dal As New DalComon
    Dim yy As Integer = 0
    Dim UpdateDate As String
    Dim TableName As String = "V_Book_Price"

    LocalTable = LoadDataTable(TableName, True)
    UpdateDate = LocalTable.Compute("MAX(update_date)", Nothing)

    SQL = "select * from V_Book_Price where Update_Date > '" & UpdateDate & "'"
    RemoteTable = dal.GetDataSetBySQL(SQL).Tables(0)

    If RemoteTable.Rows.Count > 0 Then

        For i = 0 To RemoteTable.Rows.Count - 1
            Dim st As DataRow

            Dim mm() As DataRow = LocalTable.Select("ID = '" & RemoteTable.Rows(i).Item("ID") & "'")

            If mm.Length = 0 Then

                st = LocalTable.NewRow

                For yy = 0 To RemoteTable.Columns.Count - 1
                    st(yy) = RemoteTable.Rows(i)(yy)
                Next

                LocalTable.Rows.Add(st)

            Else
                st = mm(0)

                For yy = 0 To RemoteTable.Columns.Count - 1
                    If IsDate(RemoteTable.Rows(i)(yy)) Then
                        st(yy) = CDate(RemoteTable.Rows(i)(yy)).ToString("s")
                    Else
                        st(yy) = RemoteTable.Rows(i)(yy)
                    End If
                Next

                mm = Nothing
            End If
        Next

    End If

End Sub 
```

在此代码中，数据来自远程数据库，该数据库更新日期获取器，然后是本地数据库。两个表都有“ID”作为主键。代码运行良好，但问题是当更新超过 1000 条记录时，此函数使用循环需要太长时间。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-20T08:33:48.277

不确定是否适用，但您是否看过 [DataTable.LoadDataRow()](http://msdn.microsoft.com/en-us/library/system.data.datatable.loaddatarow.aspx)方法？
替换上面的所有代码似乎是一个不错的选择。

您的代码可以简化为这些行

```
Dim row as DataRow
For Each row in RemoteTable.Rows
    LocalTable.LoadDataRow(row.ItemArray, false)
Next 
```

另一种选择可能是[DataTable.Merge](http://msdn.microsoft.com/en-us/library/system.data.datatable.merge.aspx)可以将您的代码剪切为单行

```
LocalTable.Merge(RemoteTable, False) 
```

但是，这两种方法的真正有效性取决于模式兼容性和自动编号（身份）列的存在。

# php - 使用 php 配置和运行计划任务（Cron Jobs！）

> ID：10671751
> 
> 赞同：0
> 
> 时间：2012-05-20T07:55:18.600
> 
> 标签：php, codeigniter, scheduled-tasks, pyrocms

我想在管理面板上建立一个部分，以提供配置计划任务的能力。

主意 ：

在那个面板上：

*   管理员可以上传一个php文件（我可以这样做）
*   制定时间表（即每周星期五 12:00 一次）（我可以这样做）
*   为上传的 php 文件分配一个时间表（我可以这样做）
*   在预定时间执行 php 文件。（这是我的问题）

真正的问题是如何在不强制站点管理员使用 cPanel 或 ssh 的情况下安排和执行 php 文件？

我希望这个问题很清楚。顺便说一句，我正在使用 pyrocms（如果需要）

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-20T08:02:34.283

You can write a bash script that gets values from each shedule and its file, and use `cron` to execute it on the background.

# search - 通过标准分析器搜索索引数据的 Lucene 前缀

> ID：10671755
> 
> 赞同：1
> 
> 时间：2012-05-20T07:56:18.877
> 
> 标签：search, lucene, standards, prefix

我正在使用 Lucene 3.6.0 for Java 创建索引。它们是使用标准分析器构建的。有什么方法可以使用 lucene 执行前缀搜索，即我希望结果以指定的搜索字符串开头而不更改用于索引的分析器？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T22:46:51.353

如果您的意思是像“work*”这样的查询来查找“work”、“worker”、“working”等，您已经可以使用标准分析器分析的文本执行这些查询。

记录在这里： http: [//lucene.apache.org/core/3_6_0/queryparsersyntax.html#Wildcard%20Searches](http://lucene.apache.org/core/3_6_0/queryparsersyntax.html#Wildcard%20Searches)

# android - 针对移动设备的正确视口

> ID：10671757
> 
> 赞同：1
> 
> 时间：2012-05-20T07:56:38.280
> 
> 标签：android, iphone, meta-tags, viewport

我在标题中有以下内容：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0"> 
```

我也尝试过使用：

```
@media screen and (max-device-width: 320px) { .... @media screen and (min-width: 321px) {<-- works only on iphone.. android is not 320px. 
```

但不得不将其修改为..

```
@media screen and (max-device-width: 360px) { .... @media screen and (min-width: 361px) { <--- to support iphone & android 
```

我查看了 android 的文档，并尝试将视口内容设置为 320，但对于 android 设备，内容仍然显示错误。

有人可以告诉我吗？

# xml - xml 文件中的更新对 flash 程序不可见

> ID：10671764
> 
> 赞同：-2
> 
> 时间：2012-05-20T07:57:40.693
> 
> 标签：xml, google-chrome, flash

我是一名网络开发人员并且面临一个问题，因为 xml 内部存储在 chrome 缓存中。因此，我的 swf flash 程序看不到我对 xml 文件的更新。

如果可以的话请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T10:14:10.900

使用缓存是有充分理由的——它可以防止客户端计算机一遍又一遍地下载相同的文件。您不应该使用“缓存杀手”，即使这是您经常遇到的答案。因为，通过将随机数添加到 GET 方法发送的请求中，您不会阻止文件被缓存 - 相反，您会创建文件的唯一缓存副本 - 不必要地膨胀用户 PC 上的缓存（并且还运行机会可能的重复 - 因为随机不保证没有重复）。

你应该做什么：

1.  如果您的数据经常被修改（通常每隔几个小时一次就足够了），您应该考虑将其与 POST 方法的响应一起发送。POST 响应通常不会被缓存（除非通过代理服务器 - 但这是完全不同的事情）。

2.  提供适当的缓存控制标头。查找 HTTP 协议规范并了解您可以使用的选项。有多种可能，它们可能会将缓存的生命周期限制为某个日期，或者自缓存副本以来的某个时间量等。

[http://www.mnot.net/cache_docs/](http://www.mnot.net/cache_docs/)这是一篇我建议进一步阅读的文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T08:06:28.023

您可以使用随机生成的数字/字符串或当前时间作为 GET 查询字符串，例如：

```
var xmlFile:String = "file.xml?no-cache=" + new Date().time.toString();
trace(xmlFile); 
```

# linux - 如何在c中制作'makefile'

> ID：10671778
> 
> 赞同：0
> 
> 时间：2012-05-20T07:59:44.237
> 
> 标签：linux, gcc, makefile

我不明白如何为 C 代码生成 makefile

我有以下 .c 文件，通常我按以下方式执行：

```
gcc server.c -o server.out -lpthread 
```

编译后，我运行 .out 文件，如下所示：

```
./server.out 4000 
```

已编辑

我只需要make文件来编译程序而不是运行它..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T08:04:08.513

首先，您可以在 eclipse 中创建一个项目，它会为您创建一个 makefile。然后您可以开始详细了解所有添加的内容，这可以删除您理解的不必要的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T08:06:22.843

[https://github.com/ChrisLundquist/OpenCL-Compiler/blob/master/Makefile](https://github.com/ChrisLundquist/OpenCL-Compiler/blob/master/Makefile)

是一个简单的make文件的例子。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-20T08:07:06.577

如果命名您的可执行文件`server`对您有用，那么只需

```
LDLIBS=-lpthread
all: server 
```

在一个名为的文件`Makefile`中。你可以输入

```
make 
```

建造它。

否则你`Makefile`应该包含：

```
server.out: server.c
        gcc server.c -o server.out -lpthread 
```

除了它是一个表格，而不是文本“<code>gcc”之前的**空格。**

# mysql - Sql 查询显示表 A 中的数据和表 B 中的数据，其中表 A 的 parent_id 使用连接在表 B 中找到

> ID：10671788
> 
> 赞同：0
> 
> 时间：2012-05-20T08:00:34.303
> 
> 标签：mysql

使用 MySQL。

我有两张桌子。表 A 和表 B。

表 A 的一些值具有与表 B 相关的 ID。此 ID 在表 A 中标识为 crm_field，在表 B 中标识为 parent_id。

我试着做这个查询。

```
select * 
from tableA inner join tableB ON tableA.crm_field=tableB.parent_field 
WHERE tableA.id = '75' AND 
      tableA.category != 'null' AND 
      tableA.category != 'No Category' 
```

我的预期结果是，tableA 中满足 where 要求的数据将与 tableB 的数据一起显示，tableB 的 parent_id 与 tableA 中 crm_field 的数据相同。

实际结果是显示 tableB，但包含值的 parent_id 除外。似乎它在 crm_field = 0 和 parent_id = 0 时进行了查询，当我希望它在 crm_field 具有在 parent_id 中也找到的 22 之类的实际值时进行查询。尝试这样做：

```
select * 
from tableA inner join tableB ON tableA.crm_field=tableB.parent_field 
WHERE tableA.id = '75' AND 
      tableA.category != 'null' AND 
      tableA.category != 'No Category' AND 
      tableA.crm_field != '0' 
```

但它只显示了我需要添加到 tableA 的 tableB 中的数据。

有没有办法使用连接查询来做到这一点？

如果不是，我不妨做一个双重查询。

谢谢

样本输出：

```
tableA  
id|name|crm_field|category  
0|dog|0|hi  
1|cat|22|hi  
2|bear|0|null|  

tableB  
id|name|parent_id|  
0|wild|22|  
1|foo|0| 
```

显示应该是这样的：

```
0|dog|0|hi  
1|cat|22|hi  
2|wild|22 
```

-如果这甚至可能吗？

要达到这一点，我要在这里完成的是：

crm_field 有一些值。

但如果查询在 crm_field 中看到 22 或 21 或两者，则应显示在 tableB 中找到的相应值。

要知道如果 crm_field == 21 或 22 我这样做了，它将执行另一个查询以将相应的值添加到数组中。但我想用尽可能少的代码来实现这一点，因此我正在尝试加入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T08:46:58.660

以下`UNION`将为您提供给定输入的输出

```
SELECT  id, name, crmfield
FROM    TableA
WHERE   category != 'null'
UNION ALL
SELECT  a.id, b.name, a.crmfield
FROM    TableA AS a
        INNER JOIN TableB AS b ON b.parent_id = a.crm_field
WHERE   parent_id != '0' 
```

但是您的表格设计存在几个问题（正如 JohnFx 已经提到的）

*   您永远不应该`'null'`在任何数据库中存储字符串值。
*   将外键命名为它们链接的主键要容易得多（至少对我而言）。没有办法知道它`parent_id`与`crm_field`. 我建议重命名`TableB.parent_id`以`TableB.crm_field`使该链接清晰。
*   您不希望`TableB.foo`结果中返回记录。这让我觉得很奇怪。我可以想象您只希望返回关系的某些部分，但在这里您似乎已经附加了一些特殊含义`0`作为外键。

# java - 迭代 ArrayList 并获取匹配项 ID

> ID：10671790
> 
> 赞同：0
> 
> 时间：2012-05-20T08:00:41.587
> 
> 标签：java, arraylist

我有一个 ArrayList，其中包含 profId、名字、姓氏、年龄等数据。

现在我有一个姓氏和名字，它来自用户表单方面。现在我想将它们与 ArrayList 进行比较。如果两者都匹配，我想检索“各自的 profId”。

例如，arraylist 包含类似的数据

> profId 姓 名字 年龄
> 
> 1 罗伊萨姆 25
> 
> 2 ryob arnav 30

现在用户将分别输入姓氏和名字作为 roy 和 sam。我将通过他们的 getter 方法获取这些数据。

现在，我应该如何将这两个名称与 ArrayList 进行比较，这样我才能得到他的完美 profid：

> '1'。

我试图通过这种方式进行比较。

```
//  existPatList is arraylist patfamily is object of Family from where I will get users value

for(Family p : existPatList) {
    System.out.println("Last name" +p.getLastName());             
    System.out.println("First name"+p.getFirstName());
    if(p.getLastName().equalsIgnoreCase(patFamily.getLastName())) {
        System.out.println("got it");       
    }
} 
```

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T08:14:09.287

`&&`在你的`if`情况下使用 a`firstName`和 和`lastName`。

```
for(Family p : existPatList) {
   System.out.println("Last name" +p.getLastName());             
   System.out.println("First name"+p.getFirstName());
   if(p.getFirstName().equalsIgnoreCase(patFamily.getFirstName()) && p.getLastName().equalsIgnoreCase(patFamily.getLastName())) {
       System.out.println("got it");       
   }
} 
```

要`profId`更换您的线路：

```
System.out.println("got it"); 
```

和

```
System.out.println(p.getProfId); //or do whatever you wanna do with profId 
```

我认为这里你`getters`也有一个 get 方法`profId`，即`getProfId()`

# c++ - 理解文件格式

> ID：10671793
> 
> 赞同：0
> 
> 时间：2012-05-20T08:01:31.587
> 
> 标签：c++, htk

我有一个关于文件读取的问题，我对此感到沮丧，因为我正在进行一些手写识别开发，而我使用的工具似乎没有读取我的训练数据文件。

所以我有一个文件可以正常工作。我在此处粘贴该文件的一些内容：

```
 è      Aڈ2*A   ê“AêA mwA)àXA$NلAئ~A›إA:ozA)"ŒA%IœA&»ّAم3ACA

|®AH÷AD¢A ô-A گ&AJXAsAA mGA قQAٍALs@÷8´A 
```

该文件的格式我知道前 12 个字节是 2 个长字节和 2 个短字节，最有可能的数据为 4 、 1000 、 1024 、 9 但 T 无法读取文件以获取这些值。

实际上，我想以类似于上述格式的格式写入前 12 个字节，但我似乎不知道该怎么做。

忘了提剩下的数据是浮点数。当我将数据写入文件时，我得到人类可读的文本而不是这些符号，当我阅读这些符号时，我没有得到实际值。如何获得这些符号的实际浮点数和整数？

我的代码是

```
struct rec
{
    long a;
    long b ;
    short c;
    short d;
}; // this is the struct 

FILE *pFile;
struct rec my_record;

// then I read using fread

fread(&my_record,1,sizeof(my_record),pFile);` 
```

`a`我在、和中得到的值是 85991456、-402448352、8193 和 2336，而不是实际值`b`。`c``d`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T08:09:06.200

编译器为您的结构成员添加填充以使其（通常）4字节对齐。在这种情况下，变量`c`和`d`被填充。

您应该一次从您的`fread`而不是您的结构中读取每个定义的数据类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T08:17:38.173

首先，您应该在十六进制编辑器中打开该文件，以查看它包含的确切字节。从您发布的文本摘录中，我认为它不包含您期望的 4、1000、1024 和 9，但文本形式可能会非常误导，因为不同的字符编码对于相同的字节序列显示不同的字符。

如果您已确认该文件包含预期的数据，则可能还有其他问题。其中之一是字节序，一些机器和文件格式编码一个 4 字节`long`，最低有效字节在前，而其他机器和文件格式首先读取和写入最高有效字节。

其他问题涉及`long`您使用的数据类型。如果您的计算机具有 64 位架构并且您使用的是 Linux，`long`则 是 64 位值，并且您的结构变为 20 字节长而不是 12 字节。

**编辑：**

要在像您这样的 litte-endian 机器上读取 big-endian long，您应该逐字节读取数据并手动构建 long：

```
// Read 4 bytes
unsigned char buf[4];
fread(buf, 4, 1, pFile);
// Convert to long
my_record.a = (((long)buf[0]) << 24) | (((long)buf[1]) << 16) | (((long)buf[2]) << 8) | ((long)buf[3]); 
```

# php - 搜索字符串和输出数组

> ID：10671799
> 
> 赞同：1
> 
> 时间：2012-05-20T08:02:43.033
> 
> 标签：php, arrays, string, stripos

我的代码：

```
 $css="
    .class1{
        padding:10px 15px 0 auto;
        padding:10px 150px 0 20px;
        padding:13px 30px 10px 50px;
        padding:24px 1px 0 -20px;
    }
    "; 
```

下面的函数提取 [padding:] 和 [;] 之间的内容

```
 function extract_unit($css, $start, $end){
    $pos = stripos($css, $start);
    $str = substr($css, $pos);
    $str_two = substr($str, strlen($start));
    $second_pos = stripos($str_two, $end);
    $str_three = substr($str_two, 0, $second_pos);
    $unit = trim($str_three); // remove whitespaces
    echo $unit;
    return $unit;
    }

    echo extract_unit($css , 'padding:',';'); 
```

输出：10px 15px 0 自动

如何使用此函数提取数组中的所有填充。所以结果我需要是这样的：

```
 array(
    "10px 15px 0 auto",
    "10px 150px 0 20p",
    "13px 30px 10px 50px",
    "24px 1px 0 -20px"
    ); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T08:07:02.847

您可以为此使用正则表达式

```
preg_match_all("/padding:(.*);/siU",$css,$output);

print_r($output[1]); 
```

[演示](http://codepad.viper-7.com/lfduSl)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-20T08:13:54.653

[爆炸](http://php.net/manual/en/function.explode.php)可以做一些技巧：

```
// first get content inside class{} and remove "padding:"
$parts = explode( "{", $css );
$parts = str_replace( "padding:" , "", explode( "}", $parts['1'] ) );

// now break it with ';'
$padding = explode( ";", $parts['0'] ); 
```

## [在这里测试](http://codepad.org/xwM9BrYd)

# linux - 挂钩 bash 命令？

> ID：10671800
> 
> 赞同：2
> 
> 时间：2012-05-20T08:03:18.793
> 
> 标签：linux, bash, gnu

我厌倦了`cd`对其他目录执行长命令，所以我想做一个小工具来跳转到最近的文件夹。

我已经搜索并没有找到任何可以让我在`cd`运行命令时触发进程的 API。有人可以指出我正确的方向吗？

解决`bash_history`似乎效率低下，并且并不总是启用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T08:09:53.657

有一个经典的 bash 脚本可以使目录导航更容易：http: [//linuxgazette.net/109/marinov.html](http://linuxgazette.net/109/marinov.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T14:11:55.270

看看[`pushd`和`popd`](http://tiswww.case.edu/php/chet/bash/bashref.html#SEC87)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T08:16:16.507

如果您使用的是最新版本的 bash，您只需`Ctrl`+`R`并键入几个字母即可获取历史记录。因此，如果您按`Ctrl`+`R`并键入`cd`，您将获得最后一个`cd`命令。再次按`Ctrl`+ `R`，您将获得倒数第二个`cd`命令，依此类推。

是的，`cd -`带您到最后一个工作目录。您还可以在 shell 变量中找到您的最后一个工作目录`$OLDPWD`

# r - Plot explicit cdf over ecdf

> ID：10671806
> 
> 赞同：0
> 
> 时间：2012-05-20T08:04:20.273
> 
> 标签：r, explicit, ecdf

I have some data and I just plotted the empirical cumulative distribution using `Ecdf` like this:

```
Ecdf(data) 
```

Now, I tried to adjust the parameters (lambda, mu, sigma) for a mixture of two normals to this data, and now I would like to plot the cdf of this model using and explicit function over the plot created by `Ecdf`, is there any way to do this or I just have to simulate data so then I can use again `Ecdf`?

The explicit function, just to illustrate is something like:

```
ipc_values_EM$lambda[1] * dnorm(x, ipc_values_EM$mu[1], ipc_values_EM$sigma[1]) 
+
ipc_values_EM$lambda[2] * dnorm(x, ipc_values_EM$mu[2], ipc_values_EM$sigma[2]) 
```

(as you can note, is the mixture of two normals different mu's and different sigmas)

# string - Arduino：字符串到 int 得到奇怪的值

> ID：10671810
> 
> 赞同：3
> 
> 时间：2012-05-20T08:05:04.330
> 
> 标签：string, int, type-conversion, arduino

我想将 a 转换`String`为 an `int`，我能找到的只是您必须将 String 转换为 char 数组，然后将此数组转换为 an `int`，但是我的代码会产生奇怪的值，我无法弄清楚问题出在哪里.

```
void ledDimm(String command)
{
    // Get the Value xx from string LEDDimm=xx
    String substring = command.substring(8, command.length());

    Serial.println("SubString:");
    Serial.println(substring);
    Serial.println("SubString Length:");
    Serial.println(substring.length());

    // Create a Char Array to Store the Substring for conversion
    char valueArray[substring.length() + 1];

    Serial.println("sizeof ValueArray");
    Serial.println(sizeof(valueArray));

    // Copy the substring into the array
    substring.toCharArray(valueArray, sizeof(valueArray));

    Serial.println("valueArray:");
    Serial.println(valueArray);

    // Convert char array to an int value
    int value = int(valueArray);

    Serial.println("Integer Value:");
    Serial.println(value);

    // Write the Value to the LEDPin
    analogWrite(LEDPin, value);
} 
```

串行输出如下所示：

```
Received packet of size 11
From 192.168.1.4, port 58615
Contents:
LEDDimm=100
SubString:
100
SubString Length:
3
sizeof ValueArray
4
valueArray:
100
Integer Value:
2225 
```

我希望得到一个值为 100 的 int，但实际的 int 是 2225？！我在这里做错了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-05T23:33:14.853

`toInt()`String 类中甚至还有一个（未记录的）方法：

> int myInt = myString.toInt();

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-20T08:56:27.130

您需要使用函数`int value = atoi(valueArray);`where`valueArray`是一个以空字符结尾的字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-14T10:58:04.323

toInt() 方法在这方面非常有用，但我发现它只能转换长度为 5 或以下的字符串，尤其是小于 65535 的值，因为它是 int 可以取的最大值。在这个值上，它只给出随机数（溢出值）。使用此方法时请注意这一点，因为它浪费了我很多有用的时间来解决这个问题。希望能帮助到你。

# rest - Any Sencha touch2 examples about REST proxy?

> ID：10671811
> 
> 赞同：0
> 
> 时间：2012-05-20T08:05:55.907
> 
> 标签：rest, sencha-touch-2

Can anybody please provide some examples about REST proxy in sencha touch 2~~ ?
I need to study it but didnot find any example about it

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T17:02:56.150

根据 TDeBailleul 的评论，这是您开始的好地方。我认为它已经足够详细了：

[http://docs.sencha.com/touch/2-0/#!/api/Ext.data.proxy.Rest](http://docs.sencha.com/touch/2-0/#!/api/Ext.data.proxy.Rest)

关于 REST 与 JSONP。本质上，REST 是一种特定类型的 Ajax。

JSONP 实际上是跨域 AJAX。它们在本质上是不一样的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T16:49:05.277

这是 ExtJS 的一个 - touch 和 extjs 之间的数据包非常相似。

[http://try.sencha.com/extjs/4.0.7/examples/restful/restful/](http://try.sencha.com/extjs/4.0.7/examples/restful/restful/)

# java - Watch expression doesnt show value in eclipse with java

> ID：10671812
> 
> 赞同：15
> 
> 时间：2012-05-20T08:06:05.203
> 
> 标签：java, eclipse, debugging, watch

I am using eclipse helio with java.

The watch expression option is not working for me when debugging my code

If I am doing a watch on variable, I cant see the value of that variable in the watch view if i hoover with my mouse over the variable in the code i can see its value if I check the variable in the variables view I can see its value

but in the watch expressions window i cant see its value (and its a problem if i try to watch expressions for example)

did anyone encounter this problem

(it used to work fine and show values but then suddenly it stopped and i have no idea why)

thanks

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-04-18T19:04:39.370

对我来说，问题与项目的源路径配置错误有关。有很多不同的方法可以解决这个问题，但一种是在调试器中暂停时右键单击线程，选择“编辑源查找...”，然后摆弄那里指定的路径（见下文）。

![在此处输入图像描述](../Images/423b944e3743e3a6da4c53bc8b093a17.png)

就我而言，问题是我已将源查找路径指定为“文件系统目录”。通过删除“文件系统目录”路径并将源查找添加为“Java 项目”，我能够让我的表达式视图再次工作。

您可以通过打开 Debug -> Display 视图并尝试在此处评估 Java 表达式来检查问题是否是您的源查找路径。如果您看到这样的消息，那么您的源查找路径是错误的：

```
To perform an evaluation, an expression must be compiled in the context of a Java project's build path. The current execution context is not associated with a Java project in the workspace. 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-20T08:27:30.293

通常（至少对于简单的情况）表达式视图有效。但有时它确实停止显示值。

通常刷新和清理项目+（有时）重启 Eclipse 帮助。

如果你能看到简单的值而看不到表达式，有时是因为表达式返回的类没有出现在当前类的导入列表中。在这种情况下，我经常尝试将显式转换为类写入手表表达式，有时它会有所帮助。

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-23T08:25:21.460

就我而言，在针对 Wildfly 进行调试时，在我作为 Maven 项目打开 eclipselink 2.6.4 的源代码后，我的工作区不知何故损坏了。

打开这个 maven 项目后——它具有各种依赖项，您可以在 oracle 库上进行映像——在我的工作区中，表达式和显示视图不再起作用。变量视图，而调试继续工作以及所有鼠标悬停。

然后我创建了一个全新的空工作区。只导入了我想调试的项目。重新配置的 Wildfly 服务器。瞧，表情和展示又恢复了工作。

所以，我不知道我的日食发生了什么……但它似乎与我工作区中的元数据从根本上被破坏有关。

因此，如果您感觉突然失去了在工作区中正确调试的能力，则可能是您的工作区受到了重创。

这似乎是发生在我身上的事情。最后，我现在可以在这个新工作区上使用表达式了。

# mysql - 在 MySQL 中使用 UNION 时如何知道结果来自哪个表

> ID：10671813
> 
> 赞同：4
> 
> 时间：2012-05-20T08:06:14.877
> 
> 标签：mysql

我正在使用联合查询：

```
SELECT snippet_id, title FROM tbl_snippets WHERE title LIKE ?
UNION
SELECT tag_id, tag FROM tbl_tags WHERE tag LIKE ?
UNION
SELECT category_id, category FROM tbl_categories WHERE category LIKE ? 
```

我如何知道结果来自哪个表？snippet_id、tag_id 和 category_id 没有我可以用来确定结果来自何处的前缀（如 SN、TG 或 CI）。结果基本上放在一个结果中，所以我真的不知道我的想法是否可能，这就是我来这里询问的原因。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-20T08:09:36.163

为什么不将前缀添加为单独的（计算的）列？

```
SELECT 'SN' prefix, snippet_id, title FROM tbl_snippets WHERE title LIKE ?
UNION ALL
SELECT 'TA', tag_id, tag FROM tbl_tags WHERE tag LIKE ?
UNION ALL
SELECT 'CA', category_id, category FROM tbl_categories WHERE category LIKE ? 
```

**编辑：**我也改为`UNION [DISTINCT]`-`UNION ALL`原因如下：

*   如果原始查询对 和 产生不同的结果`UNION`，`UNION ALL`则引入前缀将改变结果行数。
*   大多数情况下`UNION ALL`比`UNION DISTINCT`.
*   大多数人其实都想拥有`UNION ALL`。

# javascript - jQuery 处理按键组合

> ID：10671822
> 
> 赞同：21
> 
> 时间：2012-05-20T08:07:25.857
> 
> 标签：javascript, jquery

我知道当`keypress`事件发生时，我们可以访问对象的事件属性按下了哪个键`keycode`，但我需要知道如何`keypress`通过 ..etc 之类的 jQuery 处理组合`ctrl + D`？

在以下代码中，我尝试执行以下操作：

```
$(document).on("keypress", function(e) { 
    if( /* what condition i can give here */ )           
        alert("you pressed cntrl + Del");
}); 
```

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-05-20T08:09:43.423

jQuery 已经为您处理了这个问题：

```
if ( e.ctrlKey && ( e.which === 46 ) ) {
  console.log( "You pressed CTRL + Del" );
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-09-24T12:03:57.727

我知道这是一个已经回答的老问题，但标记为正确的答案对我不起作用。这是捕获我编写的组合键的简单方法：

**注意：**此示例是捕捉`ctrl + space`组合，但您可以轻松地将其更改为任何其他键。

```
 var ctrlPressed = false; //Variable to check if the the first button is pressed at this exact moment
    $(document).keydown(function(e) {
      if (e.ctrlKey) { //If it's ctrl key
        ctrlPressed = true; //Set variable to true
      }
    }).keyup(function(e) { //If user releases ctrl button
      if (e.ctrlKey) {
        ctrlPressed = false; //Set it to false
      }
    }); //This way you know if ctrl key is pressed. You can change e.ctrlKey to any other key code you want

    $(document).keydown(function(e) { //For any other keypress event
      if (e.which == 32) { //Checking if it's space button
        if(ctrlPressed == true){ //If it's space, check if ctrl key is also pressed
          myFunc(); //Do anything you want
          ctrlPressed = false; //Important! Set ctrlPressed variable to false. Otherwise the code will work everytime you press the space button again
        }
      }
    }) 
```

# iphone - 如何在静态 UITableViewCell 中设置背景图像？

> ID：10671829
> 
> 赞同：0
> 
> 时间：2012-05-20T08:09:14.887
> 
> 标签：iphone, ios, ipad

我尝试了以下代码，但单元格根本没有改变：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    //Set background image of cells
    UITableViewCell *cell;

    cell = [CalculatorTableView cellForRowAtIndexPath:[NSIndexPath indexPathForRow:0 inSection:0]];
    cell.backgroundView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"Spots.png"]];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T08:13:13.420

两件事情。首先，应该在 cellForRowAtIndexPath 方法中创建单元格。其次，您应该制作背景视图，然后将其添加到单元格内容视图中。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
   cell = [CalculatorTableView alloc] initWithStyle:UITableViewStyleDefault reuseIdentifier:nil]; //This wil obviously depend on your subclass
   UIImageView *backgroundView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"Spots.png"]];
   [cell.contentView addSubview:backgroundView];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T08:13:57.677

```
cell.backgroundView = [ [[UIImageView alloc] initWithImage:[ [UIImage imageNamed:@"Spots.png"] stretchableImageWithLeftCapWidth:0.0 topCapHeight:5.0] ]autorelease]; 
```

这可能是一个更好的方法。

或者，你可以试试这个：

你可以试试这个对你有帮助的代码。

将此代码放入`cellForRowAtIndexPath`方法中

```
 UIImageView *av = [[UIImageView alloc] initWithFrame:CGRectMake(20, 20, 277, 58)];
    av.backgroundColor = [UIColor clearColor];
    av.opaque = NO;
    av.image = [UIImage imageNamed:@"Spots.png"];
    cell.backgroundView = av; 
```

您将单元初始化代码放在 viewDidLoad 中？这是非常错误的，它应该在：

```
 cellForRowAtIndexPath: 
```

您可能想查看此链接：

[表视图编程](https://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/TableView_iPhone/AboutTableViewsiPhone/AboutTableViewsiPhone.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T12:07:54.113

`viewWillAppear:`在调用after 之前，使用静态表视图创建的单元格不存在。将上面的代码移动到该方法中（并确保首先调用`super`实现。

# sql - 如何在 LINQ to Entities 中展平层次结构？

> ID：10671832
> 
> 赞同：1
> 
> 时间：2012-05-20T08:09:28.143
> 
> 标签：sql, sql-server, linq, entity-framework, linq-to-entities

我有一个 class `Org`，它具有`ParentId`（指向消费者）和`Orgs`属性，以启用 Org 实例的层次结构。我也有一个类`Customer`，它有一个`OrgId`属性。给定任何名为的 Org 实例，`Owner`我如何检索该组织的所有 Customer 实例？也就是说，在 LINQ 之前，我会以`Owner`根为根对 Org 树进行“手动”遍历。我确信存在更简单的东西。

示例：如果我有一个名为“Film”的根级别组织，ID 为“1”，子组织名为“Horror”，ParentId 为“1”，ID 为 23，我想查询 Film 下的所有客户，所以我必须让所有客户的 OrgId 都为 1 和 23。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T13:39:54.433

Linq 不会帮助您，但 SQL Server 会。

创建一个 CTE 以生成一个扁平化的 Org Id 列表，例如：

```
CREATE PROCEDURE [dbo].[OrganizationIds]
    @rootId int

AS
    WITH OrgCte AS 
    ( 
        SELECT OrganizationId FROM Organizations where OrganizationId = @rootId
        UNION ALL 
        SELECT parent.OrganizationId FROM Organizations parent
        INNER JOIN OrgCte child ON parent.Parent_OrganizationId = Child.OrganizationId
    ) 
    SELECT * FROM OrgCte 

RETURN 0 
```

现在将函数导入添加到映射到此存储过程的上下文中。这会在您的上下文中产生一个方法（返回的值是可为空的 int，因为原始 Parent_OrganizationId 被声明为 INT NULL）：

```
public partial class TestEntities : ObjectContext
{
    public ObjectResult<int?> OrganizationIds(int? rootId)
    {
        ... 
```

现在您可以使用这样的查询：

```
// get all org ids for specific root.  This needs to be a separate 
// query or LtoE throws an exception regarding nullable int.
var ids = OrganizationIds(2);

// now find all customers
Customers.Where (c => ids.Contains(c.Organization.OrganizationId)).Dump(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T09:11:47.013

不幸的是，在实体框架中不是原生的。您需要构建自己的解决方案。可能您需要迭代到根目录。您可以通过要求 EF 一次性获得一定数量的父母来优化此算法，如下所示：

```
...
select new { x.Customer, x.Parent.Customer, x.Parent.Parent.Customer } 
```

使用这种方法（这里：3），您仅限于静态固定数量的父级，但它将为您节省 2/3 的数据库往返。

编辑：我想我没有得到你的数据模型，但我希望这个想法很清楚。

编辑2：为了回应您的评论和编辑，我采用了这样的方法：

```
var rootOrg = ...;
var orgLevels = new [] {
 select o from db.Orgs where o == rootOrg, //level 0
 select o from db.Orgs where o.ParentOrg == rootOrg, //level 1
 select o from db.Orgs where o.ParentOrg.ParentOrg == rootOrg, //level 2
 select o from db.Orgs where o.ParentOrg.ParentOrg.ParentOrg == rootOrg, //level 3
};
var setOfAllOrgsInSubtree = orgLevels.Aggregate((a, b) => a.Union(b)); //query for all org levels

var customers = from c in db.Customers where setOfAllOrgsInSubtree.Contains(c.Org) select c; 
```

请注意，这仅适用于有界的最大树深度。在实践中，通常是这种情况（如 10 或 20）。

性能不会很好，但它是一个 LINQ-to-Entities-only 解决方案。

# php - Kohana：提供 robots.txt 的最佳方式是什么？

> ID：10671836
> 
> 赞同：0
> 
> 时间：2012-05-20T08:09:58.113
> 
> 标签：php, web-applications, kohana, robots.txt, kohana-3.2

在我们的网络应用程序中，我们将所有 404 重定向到一个漂亮的错误页面，但对于 robots.txt，我们需要提供一个默认页面（或返回 404），否则 google 不会索引我们。

我应该专门为[http://www.mydomain.com/robots.txt](http://www.mydomain.com/robots.txt)添加到 bootstrap.php 的路由吗？

或者我应该通过 .htaccess 执行此操作吗？

有没有我忽略的更清洁的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T08:27:09.313

只需创建文件。如果 .htaccess 配置正确，Kohana 框架只有在请求的文件没有“直接命中”时才会起作用。

# html - Bootstrap 模态行为异常

> ID：10671839
> 
> 赞同：1
> 
> 时间：2012-05-20T08:10:21.270
> 
> 标签：html, css, twitter-bootstrap, modal-dialog

我正在尝试将 BootStrap 模式添加到已经存在的页面中，但遇到了以下问题：

模态显示完全符合我的预期，内容看起来非常漂亮，但我有两个问题。如果我`class="modal"`在页面加载时默认只指定模式显示并且不会关闭。如果我包含`class="modal hide"`，则模式不会在页面加载时显示，但在单击相应按钮时也不会关闭。

我没有与 Bootstrap 网站上的[模态示例代码](http://twitter.github.com/bootstrap/javascript.html#modals)有任何大的不同，有什么想法吗？

这是应该启动模式的按钮：

```
<a class="btn" data-toggle="modal" href="#testmodal" >About</a> 
```

这是模态本身：

```
 <div class="modal hide fade in" id="testmodal">
        <div class="modal-header">
            <button class="close" data-dismiss="modal">x</button>
            <h3>Modal Header</h3>
        </div>
        <div class="modal-body">
            <p>body</p>
        </div>
        <div class="modal-footer">
            <a href="#" class="btn">Close</a>
        </div>
    </div> 
```

为了记录，是的，我确实记得包括 bootstrap-modal.js 和 bootstrap-transition.js

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T20:31:09.397

很高兴您的问题得到解决。

此外，如果您想要默认引导功能而不自定义任何内容，只需使用主页上的大下载按钮。这个 zip 文件包含一个默认的 bootstrap.min.js 文件，其中包含所有插件（如模式对话框等）。如果您使用该文件而不是所有单独的 javascript 文件，则您的页面必须发出更少的请求并更快地加载。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T11:02:35.943

您的关闭链接应该是这样的：

```
<a class="close" data-dismiss="modal">×</a> 
```

因为， data-dismiss 是一个自定义的 HTML5 数据属性。这里用于关闭模态窗口。

# .net - 算法决策过程框架

> ID：10671840
> 
> 赞同：1
> 
> 时间：2012-05-20T08:10:30.970
> 
> 标签：.net, rule-engine, expert-system

我正在寻找一个允许以下内容的框架：

*   实现几种算法，将一个或多个简单类 (POCO) 集合作为输入，并生成新的 POCO 列表
*   每个算法通常都在查看输入集合的各种属性，以及它们之间的关系。
*   一个重要的要求是算法需要以可管理的方式表达，便于维护和更改
*   很高兴拥有：一种允许用户维护算法的方法

我可能正在寻找规则引擎、专家系统实现、分类器算法或这些的某种组合。

更新：规则可能相当复杂，例如，如果第一个集合中的 3 个对象和第二个集合中的 2 个对象匹配，则搜索第二个集合中的第三个不匹配对象和第三个集合中的对象的匹配项. 匹配规则可以在委托函数中定义。

有任何想法吗？

我在 .Net 世界中生活和工作 :-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T08:47:31.420

.NET 有几个规则引擎。[Drools](http://droolsdotnet.codehaus.org/)的 .NET 版本不是我推荐的。我知道的最好的之一是[NxBRE](https://sourceforge.net/projects/nxbre/)。然而，该项目已经休眠了很长一段时间。[WWF 规则引擎](http://www.richard-banks.org/2007/08/how-to-use-windows-workflow-rules.html)可能是您的一个选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T04:12:22.460

我不确定我是否完全理解您在“更新”部分中解释的规则，但您检查过[Enigma 规则引擎](http://www.enigmasupercomputing.com/RulesEngine)吗？

这是一个简单的、确定性的（非RETE）规则引擎，我创建它以针对 POCO 对象运行，并且具有相对易于使用的界面（对于非程序员）。它基于 Windows 工作流，因此内置了用于遍历集合、评估表达式的活动，并且您可以创建自己的活动类等。传入和传出作为集合的参数是小菜一碟。

# python - python中的矩阵运算，最大值

> ID：10671841
> 
> 赞同：0
> 
> 时间：2012-05-20T08:10:35.667
> 
> 标签：python, matrix, numpy

我有两个矩阵

```
A = array([[ 12.,   0.],[  0.,   4.]])
B = array([[ 13.,   5.],[  -1.,   -5.]]) 
```

我想得到第三个，其元素对应于先前矩阵的最大值。例如，我想制作类似的东西

```
C = array([[ 13.,   5.],[  0.,   4.]]) 
```

我可以做任何矢量运算来使结果更快吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T10:10:33.583

使用`numpy.maximum`.

```
>>> np.maximum(A, B)
array([[ 13.,   5.],
       [  0.,   4.]]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T09:09:46.977

使用 numpy 数组而不是数组更容易。使用 numpy 数组，您可以使用 np.where 函数来解决此问题：

```
 import numpy as np
    A = np.array([[ 12.,   0.],[  0.,   4.]])
    B = np.array([[ 13.,   5.],[  -1.,   -5.]])
    C = np.where(A>B,A,B)
    >>> C
    array([[ 13.,   5.],
    [  0.,   4.]]) 
```

这类似于： np.where(condition, [returnvalue if true, returnvalue if false]) 如果您不传递可选的返回参数，您将获得一个包含条件为真的索引的数组。

# json - JSON output in Umbraco 5

> ID：10671842
> 
> 赞同：0
> 
> 时间：2012-05-20T08:10:37.667
> 
> 标签：json, umbraco, umbraco5

I just switched from Umbraco 4 to Umbraco 5 and it seems like a lot has changed. So what i basically want is a possibility to add a alternative template to my document-types. The fall back template shall return the content as JSON.

Why, you say? I want to create an API-like way of accessing the Umbraco data from my mobile devices.

WebAPI (http://cultiv.nl/blog/2012/4/22/exposing-umbraco-5-content-through-the-aspnet-web-api/) I have thought about using WebAPI from asp.net MVC 4, but the project is really just a proof of concept and i don't want to code each endpoint.

So i found a som guys that did a package for Umbraco 4 that actually does this and renders the content of @currentPage as Json. The template is hit by adding "/JSON" to the end of the url. Unfortunetly this uses xslt, which ihas been removed from Ubraco 5.1 (Good thing).

So. I bet it's simple to create a partial, a macro or a partial macro that does this and add it to a template. But is just cant figure out where to start.

Any help with that? What I'm looking for is a step guide on what steps to take, to make the setup. Rendering the stuff ad json in C# i can handle. It's the integration into Umbraci I lack.

Hoe u can help.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T08:25:18.293

替代模板的工作方式与 v4 中的完全相同：只需在 url 末尾添加模板名称：yoururl/json

然后使用以下代码向名为“json”的模板添加一个新的 razor 视图：

```
@inherits RenderViewPage
@using System.Web.Mvc.Html;
@using Umbraco.Cms.Web;
@{
    Layout = "";
}
{
@foreach (var attribute in Model.Attributes)
{
    string.Format("\"{0}\": \"{1}\"", attribute.AttributeDefinition.Alias, attribute.DynamicValue);
}
} 
```

此代码可以用作起点，而无需使用 web api 或自己的控制器。

不要忘记允许所有文档类型的模板

hth，托马斯

# perl - 在 Perl 中重命名子目录

> ID：10671843
> 
> 赞同：1
> 
> 时间：2012-05-20T08:10:40.347
> 
> 标签：perl

```
#!/usr/bin/perl -w

use strict;
use File::Copy;
use File::Spec;

my($chptr, $base_path, $new, $dir);

$dir = "Full Metal Alchemist"; #Some dir

opendir(FMA, $dir) or die "Can't open FMA dir";
while($chptr = readdir FMA){
$base_path = File::Spec->rel2abs($dir).'/'; #find absolute path of $fir
if($chptr =~ m(Chapter\w*\d*)){ #some regex to avoid the .. and . dirs
    $new = join(" 0", split(/\W/, $chptr)); #modify said sub directory
    rename "$base_path$chptr", "$base_path$new" ? print "Renames $base_path$chptr to
    $base_path$new\n" : die "rename failed $!";
    }
}
closedir FMA; 
```

最初，我的脚本只使用相对路径来执行移动操作，但由于某种原因，这使得子目录不受影响。我的下一步是进行绝对路径，但无济于事。我只是在学习 Perl，所以我觉得我犯了一个简单的错误。我哪里出错了？TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T08:41:13.043

您可以排除`.`如下`..`：

```
if ( $child ne '.' and $child ne '..' ) { ... } 
```

一些一般性说明：

*   始终对您想要做什么有一个非常明确的规范。这也有助于每个试图帮助你的人。
*   目前尚不清楚这里出了什么问题。也许您的正则表达式根本不匹配您希望它匹配的目录？问题是什么？
*   尝试将非常特定的部分（例如您要开始处理的目录的名称）制作成参数。显然，一些细节更难成为参数，比如重命名什么以及如何重命名。
*   使用`opendir`, `readdir`,`rename`和`File::Spec`是很好的开始。不过，有一个更简单的方法：看一下[`Path::Class`module](https://metacpan.org/module/Path%3a%3aClass)，特别是它的两个子类。它们提供了一个精心设计的抽象层`File::Spec`（甚至更多），它基本上是文件系统操作的一站式服务。

# css - CSS 3 如何使用动态标题构建动态边框

> ID：10671852
> 
> 赞同：1
> 
> 时间：2012-05-20T08:12:11.487
> 
> 标签：css

我是 CSS 3 的新手，但是当我尝试按照我的模板设计 CSS 时，我很困惑

例如，我的模板中的标题 css 将是：

> T恤-------------更多----

但是当 Title 太长时

> 儿童T恤-----------------------------------更多----

我的边界也会很长。我希望我的边框自动修复我的标题，这意味着当标题太长时，我的边框将用我的宽度修复。

示例我的宽度是`700px;`标题是从数据库加载的，我的边框宽度是`550px;`

当标题是

> T恤-------------更多----

当标题太长时，我的边框将被修复

> 儿童T恤-----------------更多----

像这样

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T20:34:19.717

听起来好像您正在尝试重新实现一个[`<fieldset>`](http://www.456bereastreet.com/lab/styling-form-controls-revisited/fieldset/).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T08:40:52.427

我不确定你的 html 结构是什么样的，但试试这个......

```
<div id="main">
    <span class="title">Tshirt</span>
    <span class="more">more</span>
</div> 
```

你的 CSS

```
#main {position: relative; border-top: 2px solid #000; width: 700px;}

.title {position: absolute; top: 0; left: 0; margin-top: -10px;}

.more {position: absolute; right: 20px; top: 0; margin-top: -10px;} 
```

希望这会有所帮助.. 您可以通过修改“top、left、right 和“margin-top”来移动它。

# java - 单元测试应用引擎 - Eclipse - Maven

> ID：10671855
> 
> 赞同：2
> 
> 时间：2012-05-20T08:12:19.113
> 
> 标签：java, google-app-engine, junit

对于使用 Eclipse-Maven 进行 Appengine 测试，我在 POM.xml 中定义了这个

```
 <!-- Appengine Testing -->

    <dependency>
        <groupId>com.google.appengine</groupId>
        <artifactId>appengine-api-labs</artifactId>
        <version>${appengine.version}</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>com.google.appengine</groupId>
        <artifactId>appengine-testing</artifactId>
        <version>${appengine.version}</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>com.google.appengine</groupId>
        <artifactId>appengine-api-stubs</artifactId>
        <version>${appengine.version}</version>
        <scope>test</scope>
    </dependency> 
```

但是，每次我添加这个依赖项时，当我的 webapp 被调用时，它都会抛出这个错误：

```
java.lang.ClassCastException: com.google.appengine.tools.development.ApiProxyLocalImpl cannot be cast to com.google.appengine.tools.development.ApiProxyLocal 
```

尽管我可以运行 JUnit 并测试我的 Appengine 特定代码，但每次我必须运行应用程序时，我都必须删除这些依赖项并刷新所有内容，这非常痛苦。

这种情况有什么解决方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T16:32:30.490

您使用哪个版本？我的*POM*不包含*appengine-api-labs*。也许您可以尝试不使用它：

```
<dependency>
  <groupId>com.google.appengine</groupId>
  <artifactId>appengine-api-stubs</artifactId>
  <version>${gae.version}</version>
  <type>jar</type>
  <scope>test</scope>
</dependency>
<dependency>
  <groupId>com.google.appengine</groupId>
  <artifactId>appengine-testing</artifactId>
  <version>${gae.version}</version>
  <type>jar</type>
  <scope>test</scope>
</dependency> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T21:33:28.477

我使用与您相同的 POM（@xybrek），我通过做一个简单的方法解决了这个问题`mvn clean gae:run`，现在它可以在 maven 上运行......

# regex - 如何匹配特定的标签值并在匹配后从前一个标签中获取结果？

> ID：10671857
> 
> 赞同：1
> 
> 时间：2012-05-20T08:12:32.877
> 
> 标签：regex, perl

**输入文件：**

```
<TABLE BORDER="7" CELLPADDING="10">
<TR>
<TD>This is a TD cell</TD>
<TD><PRE> sample</PRE></TD>
<TH>This is a TH cell</TH>
</TR>
<TR>
<TH VALIGN="TOP">Text aligned top</TH>
<TH>Image in TH cell with default alignments ---></TH>
<TH><IMG SRC="blylplne.gif" ALT="airplane"></TH>
</TR>
</TABLE> 
```

我喜欢匹配标签`<TD><PRE> sample</PRE></TD>`，如果匹配，我喜欢从前一个标签中获取结果，即`<TD>This is a TD cell</TD>`

**输出：**

> 这是一个 TD 细胞

我尝试使用以下代码：

```
MY $Output = m/<TD.*?\/TD>/; 
```

我能够匹配标签，但无法通过匹配相同的标签从前一个标签中获得结果。任何人都可以让我使用它。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T17:27:48.487

由于您需要倒退，我认为可能需要构建一棵完整的树。通常我推荐使用 DOM 样式的 HTML 解析器（请参阅 参考资料[`Mojo::DOM`](http://p3rl.org/Mojo%3a%3aDOM)），但要构建树，请尝试使用[`HTML::Tree`](http://p3rl.org/HTML%3a%3aTree).

编辑：

所以我决定看看我是否可以用 来做到这一点`Mojo::DOM`，并且效果很好：

```
#!/usr/bin/env perl

use strict;
use warnings;

use 5.10.0;
use Mojo::DOM;

my $dom = Mojo::DOM->new->xml(1)->parse(<<'HTML');
<TABLE BORDER="7" CELLPADDING="10">
<TR>
<TD>This is a TD cell</TD>
<TD><PRE> sample</PRE></TD>
<TH>This is a TH cell</TH>
</TR>
<TR>
<TH VALIGN="TOP">Text aligned top</TH>
<TH>Image in TH cell with default alignments ---></TH>
<TH><IMG SRC="blylplne.gif" ALT="airplane"></TH>
</TR>
</TABLE>
HTML

my $collection = $dom->find('TR TD');
my $i = -1; # so that first increment makes 0
$collection->first(sub{$i++; /sample/;});
say $collection->[$i-1]; 
```

您必须强制进行 XML 解析，因为 HTML5 不使用大写标签，但其余部分应该是不言自明的。

**编辑 2012 年 11 月 1 日**

Mojolicious 3.54 刚刚发布，它为 Mojo::DOM 提供了新的[`next`](http://mojolicio.us/perldoc/Mojo/DOM#next)和[`previous`](http://mojolicio.us/perldoc/Mojo/DOM#previous)方法，这在这里有所帮助。（我用这篇文章作为他们使用的案例）。这意味着，现在您可以执行以下操作：

```
say $dom->find('TR TD')->first(qr/sample/)->previous; 
```

而不是上面示例的最后 4 行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T08:56:57.160

对于正则表达式来说，这并不是一个真正的好问题。使用单个表达式可以做的最好的事情是匹配*两个*单元格并捕获组中第一个单元格的内容。例如

```
<TD>(.*?)</TD>\s*<TD><PRE> sample</PRE></TD> 
```

我想你需要`<PRE> sample</PRE>`用另一个表达式替换任何内容，但你没有在这里提供足够的信息。

如果您需要更通用地执行此操作，则使用实际上可以遍历文档树的 html 解析器将是一个更好的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T15:56:38.360

您可以使用lookbehind 和lookahead 来断言文本在另一个文本之前或之后 - 环视是零宽度断言，这意味着它们不会捕获任何内容：

```
(?<=TD>)[^>]+(?=</TD>\s*<TD><PRE>\s*sample</PRE></TD>) 
```

意思是：

1.  `(?<=TD>)`- 从你所在的位置向后看，并断言有标签
2.  `[^>]+`- 匹配不是标签结尾的所有内容
3.  `(?=</TD>\s*<TD><PRE>\s*sample</PRE></TD>)`- 从您所在的位置向前看，并断言以下文本是`</TD>\s*<TD><PRE>\s*sample</PRE></TD>`（结束标签、可选空白字符和您的条件）

此匹配的结果是与#2 匹配的文本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-20T16:40:46.463

尽管我们经常被警告不要使用成熟的 html 解析器编写自己的 html 正则表达式，但有时前者可能会完成这项工作。看看这个选项是否有帮助（你可能想匹配更多的`<PRE>`标签）：

```
use Modern::Perl;

my $html = <<'html';
<TABLE BORDER="7" CELLPADDING="10">
<TR>
<TD>This is a TD cell</TD>
<TD><PRE> sample</PRE></TD>
<TH>This is a TH cell</TH>
</TR>
<TR>
<TH VALIGN="TOP">Text aligned top</TH>
<TH>Image in TH cell with default alignments ---></TH>
<TH><IMG SRC="blylplne.gif" ALT="airplane"></TH>
</TR>
</TABLE>
html

say $html =~ m|<TD>(.*?)</TD>.*<TD><PRE>|is; 
```

**输出**：

这是一个 TD 细胞

# java - Android：字符串无法转换为 JSONArray？

> ID：10671860
> 
> 赞同：1
> 
> 时间：2012-05-20T08:13:07.540
> 
> 标签：java, android, json, http

我可以从 php 的 json_encode 获得 json 响应，并且能够在 eclipse 的 logcat 中显示响应是什么：

```
[{"idusers":"1","full_name":"Test Subject","get_email":"test_subject@gmail.com"},
{"idusers":"2","full_name":"Test Subject_2","get_email":"test_subject_2@gmail.com"}] 
```

现在，我正在尝试

```
 //parse json data
    try {
        JSONArray jArray = new JSONArray(result);
        for(int i =0; i<jArray.length(); i++){
            JSONObject json_data = jArray.getJSONObject(i);
            Log.i("log_tag","id: "+json_data.getInt("idusers")+
                    ", Full Name: "+json_data.getString("full_name")+
                    ", Email: "+json_data.getString("get_email")
                    );
        }
    }catch(JSONException e){
        Log.e("log_tag","Error parsin data "+e.toString());
    } 
```

但是，我收到一条错误消息

`Error parsin data org.json.JSONException: Value testing of type java.lang.String cannot be converted to JSONArray`

有没有办法解决 JSONArray 问题？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T08:29:59.857

您的 JSON 无效。第二个数组元素的“get_email”值中缺少引号 (")。

应该：

```
[
    {
        "idusers": "1",
        "full_name": "Test Subject",
        "get_email": "test_subject@gmail.com"
    },
    {
        "idusers": "2",
        "full_name": "Test Subject_2",
        "get_email": "test_subject_2@gmail.com"}] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-22T02:02:58.683

发现发生了什么。我在 PHP 文档中有一个字符串并且没有被调用。我有“测试”这个词，这是错误中的词。一旦这个“测试”被删除，它就起作用了。谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T08:25:18.953

尝试向 JSON 返回的 PHP 变量添加强制转换。另外，您使用的是 json_encode 吗？

```
$user_id = (int) $id;
$email = (string) $email; 
```

# entity-framework - 实体框架迁移：迁移期间超时 SqlException

> ID：10671863
> 
> 赞同：6
> 
> 时间：2012-05-20T08:13:31.020
> 
> 标签：entity-framework, sqlexception, entity-framework-migrations, command-timeout

可以访问 Sql Server。我想使用实体框架迁移来迁移数据库。我有“图像”表，其中有 130k 记录有图像。在迁移中，使用“CREATE INDEX”将“INDEX”添加到这些表中。我知道`SqlException`命令超时已过期。但在连接字符串中，我只能定义连接超时。我尝试在这里定义命令超时： `(IObjectContextAdapter)DbContext.ObjectContext.CommandTimeout`但它没有帮助我。在 DbMigrator 中也是如此，但他在任何地方都没有这样的财产。

所以我需要帮助，我应该`CommandTimeout`在实体框架中定义迁移，但不知道该怎么做。请帮帮我，抱歉英语不好

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T09:04:14.520

我认为这在 EF4 中是不可能的。它作为一项功能添加到本周发布的 EF5 候选版本中：http: [//blogs.msdn.com/b/adonet/archive/2012/05/15/ef5-release-candidate-available-on- nuget.aspx](http://blogs.msdn.com/b/adonet/archive/2012/05/15/ef5-release-candidate-available-on-nuget.aspx)

# javascript - 如何更改具有特殊 id 的 muitl div 显示？

> ID：10671865
> 
> 赞同：1
> 
> 时间：2012-05-20T08:13:49.940
> 
> 标签：javascript, jquery

我有一些 div 如下

```
<div id="span1"></div>
<div id="span3"></div>
<div id="span5"></div>
<div id="span7"></div>
..... 
```

id中有“span”，jquery如何显示或隐藏？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T08:15:20.567

您可以将选择器的选择器隐藏在一个数组中，然后用逗号加入：

```
var tohide = [
    "#span1",
    "#span3",
    "#span5",
    "#span7"
];

$(tohide.join(',')).hide(); 
```

* * *

或者，为每个类添加一个公共类：

```
<div class="tohide" id="span1"></div>
<div class="tohide" id="span3"></div>
<div class="tohide" id="span5"></div>
<div class="tohide" id="span7"></div>

$('.tohide').hide(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-20T08:16:25.650

如果我正确理解了这个问题，这应该可以解决问题。

```
$('[id*="span"]').hide(); 
```

也就是说，更好的方法是将类放在您想要使用相同代码操作的所有元素上，然后使用该类将元素作为一个组隐藏。

```
<div id="span1" class"span"></div>
<div id="span3" class"span"></div>
<div id="span5" class"span"></div>
<div id="span7" class"span"></div>

$('div.span').hide(); 
```

这干净多了。

# z3 - 具有未解释排序的模型

> ID：10671878
> 
> 赞同：2
> 
> 时间：2012-05-20T08:15:42.793
> 
> 标签：z3

当 Z3 返回一个具有未解释排序的模型时，例如`Q`，它使用形式为 的常量`Q!val!0`。

但是，如果我从头开始创建查询并将这个符号称为 的居民`Q`，那么 Z3 理所当然地抱怨这`Q!val!0`是一个未知常数。

本质上，我试图让 Z3 枚举 的所有居民`Q`，方法是要求它给我一个与之前返回的模型不同的模型。因此，在随后对 Z3 的调用中，我需要引用这些常量。

有没有办法使用 SMT-Lib2 接口来做到这一点？

# php - 获取图像宽度

> ID：10671881
> 
> 赞同：0
> 
> 时间：2012-05-20T08:16:25.713
> 
> 标签：php, image

我通常`getimagesize`用来获取图像宽度。但有时它不会返回任何东西。

例如 ：

```
getimagesize('images/image num 1.jpg'); 
```

那么是否有任何其他函数可以返回图像宽度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T08:19:47.627

如果您在问题中使用这样的图像名称，则会出现问题。您必须删除空格。

在**JAVA**中，我用过这个

（我已经知道文件的类型）

```
Random generator = new Random();
int r = generator.nextInt(100000);
Calendar now = Calendar.getInstance();
//rename file         
file.setFileName((now.getTimeInMillis() + r)+"."+type);
photo_name = file.getFileName();
//...
uploadphoto(photo_name); 
```

有很多相关的 php 方法会产生随机名称、数字等。例如

```
$photo_name = (date("Y-m-d H:i:s") . $users_ip); 
```

# php - 删除 xml 标签外的文本 - PHP

> ID：10671886
> 
> 赞同：1
> 
> 时间：2012-05-20T08:16:50.073
> 
> 标签：php, xml, error-handling

有时我会在 XML 中收到 xml 标签之外的文本，如下所示：

```
Bad command error. XYZ. Some more text<?xml version="1.0" encoding="utf-8"?><xml></xml> 
```

这会在 php.ini 中返回错误。因为我正在使用这个函数来读取 xml：

```
simplexml_load_string($xml); 
```

有没有办法可以删除 xml 标签之外的文本，这样我就不会在 xml 中出现错误？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T08:22:59.970

```
if (preg_match("/<\\?xml.*\\?>.*/", $xml, $matches)) {
    $xml = $matches[0];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T08:31:12.170

试试这个代码，它只会提取 xml。

```
$lpos = strpos('<?xml', $xml);
$xml = substr($xml, $lpos, strrpos('>', $xml) - $lpos +  1); 
```

但它有一些限制，例如：xml后面可以有'>'字符。我也建议尝试[`tidy_repair_string()`](http://ru2.php.net/manual/en/tidy.repairstring.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T18:13:08.107

快速单线。

```
$xml = preg_replace("/^.+<\\?xml/", "<?xml", $xml, 1); 
```

将删除在`<?xml`标记之前的字符串中找到的任何字符。

但是，我会说，如果您得到这样格式错误的 XML，您应该尝试找出错误格式的原因，而不是仅仅尝试解决它。

听起来首先生成 XML 的代码中有一个讨厌的错误。如果是您的代码，您需要在那里解决问题，而不是回避问题。如果它来自第三方系统，您需要通知他们该错误。

# python - 在python中调用具有多重继承的父类

> ID：10671889
> 
> 赞同：2
> 
> 时间：2012-05-20T08:17:48.380
> 
> 标签：python

如果这个问题已经得到回答，我提前道歉，我只是找不到它。使用多重继承时，如何使用特定父级的方法？假设我有这样的东西

```
Class Ancestor:
    def gene:

Class Dad(Ancestor):
    def gene:
        ...

Class Mom(Ancestor):
    def gene:
       ...

Class Child(Dad,Mom):
    def gene:
        if(dad is dominant):
             #call dad's gene
        else:
             #call mom's gene 
```

我怎样才能做到这一点？super() 没有指定特定父级的选项。谢谢！编辑：忘记提及一个极其重要的细节 - 这些方法具有相同的名称并且被覆盖。对不起，再次感谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-20T08:23:39.540

那不是`super`目的。`super`只是为了调用继承层次结构中的下一项，无论它是什么 - 换句话说，它应该在您不知道或不关心该层次结构是什么时使用。

对于您的情况，您可能只想直接调用该方法。但请注意，您实际上根本不需要处理祖先，因为`methodA`并且`methodB`无论如何都不会被覆盖：所以您可以调用它们`self`：

```
if whatever:
   self.methodA()
else:
   self.methodB() 
```

如果您处于覆盖方法的情况，则需要指定祖先：

```
class C(A, B):
    def methodA(self):
        if whatever:
            A.methodA(self)
        else:
            B.methodA(self) 
```

# wordpress - 使用 .htaccess 根据推荐人限制访问？

> ID：10671892
> 
> 赞同：0
> 
> 时间：2012-05-20T08:18:29.403
> 
> 标签：wordpress, .htaccess, mod-rewrite, user-agent, referrer

我想使用 .htaccess 规则来加强我博客的 Wordpress 的安全性。基本上，我想在以下情况下禁止连接：

*   用户代理为空
*   推荐人字符串为空
*   一些选定 php 文件的引用字符串不是来自我的域

我想出了以下代码。我在正确的轨道上吗？如果没有，请建议我应该做些什么来解决它。谢谢！

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{HTTP_REFERER} ^$
    RewriteCond %{HTTP_USER_AGENT} ^$
    RewriteCond %{REQUEST_URI} wp-comments-post\.php* [NC]
    RewriteCond %{REQUEST_URI} wp-admin\.php* [NC]
    RewriteCond %{REQUEST_URI} wp-login\.php* [NC]
    RewriteCond %{HTTP_REFERER} !.*example.com.* [NC]
    RewriteRule . - [R=403,L]
</IfModule> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T22:36:26.860

好吧，我想我已经想通了。我能够想出一个我认为有效的片段：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{REQUEST_URI} wp-comments-post\.php* [NC,OR]
    RewriteCond %{REQUEST_URI} wp-admin\.php* [NC,OR]
    RewriteCond %{REQUEST_URI} wp-login\.php*
    RewriteCond %{HTTP_REFERER} !.*tambnguyen.com.* 
    RewriteRule . - [R=403,L]
</IfModule> 
```

当我未登录时，我似乎无法使用新的浏览器窗口/选项卡访问[http://tambguyen.com/wp-admin/](http://tambnguyen.com/wp-admin/) 。我可以单击一个秘密链接登录。此外，一旦我'我已登录，我可以毫无问题地访问[http://tambguyen.com/wp-admin/ 。](http://tambnguyen.com/wp-admin/)

# linux - 这个shell脚本代码行是什么意思

> ID：10671894
> 
> 赞同：-1
> 
> 时间：2012-05-20T08:18:42.513
> 
> 标签：linux, bash, shell, unix, scripting

我在我的 linux 实例中的 .bashrc 中发现了以下几行代码。有人可以解释一下这行代码是什么意思。我没有shell编程背景。

```
if [ -f ~/.bashrc ]; then
        . ~/.bashrc
fi 
```

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-20T08:22:04.957

`[ -f ~/.bashrc]` [测试](http://linux.die.net/man/1/test)`.bashrc`当前主目录中是否存在文件。如果它存在，那么它是有源的。

这意味着它在当前 shell 中执行，而不是通过启动新 shell。因此脚本中的所有更改都会直接影响当前的 shell，而无需导出变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T08:25:43.760

嗯，它是`if`shell脚本编程语言中的条件语句。 `if [-f ~/.bashrc]`意味着如果您的主目录中确实有一个名为的文件`.bashrc`，那么当您登录 linux 系统时，该`./bashrc`文件将由 init 进程自动运行。它用于为您自动配置系统环境。

# php - 如何从 symfony 中的 URL 猜测动作名称和模块名称？

> ID：10671897
> 
> 赞同：1
> 
> 时间：2012-05-20T08:19:39.343
> 
> 标签：php, symfony1, routing

例如，我有一个引用 URL。我想根据上一页的模块重定向到一个页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T10:34:16.830

[此页面](http://snippets.symfony-project.org/snippet/61)上有一个代码片段。要获取上一页的模块和操作，您将使用referer：

```
 $referer = sfContext::getInstance()->getRequest()->getReferer();
    // you have to check if the referer is not empty and is a page of your site
    ....
    // then get the module and action:
    $url = parse_url($referer);
    $path = trim($url['path'], '/');
    if (!sfConfig::get('sf_no_script_name') && $pos = strpos($path, '/') )
    {
        $path = substr($path, $pos+1);
    }
    $params = sfContext::getInstance()->getRouting()->findRoute('/'.$path);
    $module = $params['parameters']['module'];
    $action = $params['parameters']['action']; 
```

# c - C中的整数到字符数组转换

> ID：10671901
> 
> 赞同：0
> 
> 时间：2012-05-20T08:20:22.777
> 
> 标签：c, arrays, integer, char

我有下面的代码。我想通过将值增加一（*002*`001` ）来修改前三个字符（ ）。但是，当我运行代码时，我得到以下输出：`packet_received`

 *```
Hop_network = 001 
new Hop_network = 2 
packet_received = 2 
```

我想看到的是：

> packet_received = 002456

我该怎么做？当第一个字符不是 0 时，该代码可以正常工作，并且接收消息不必一直以 0 开头。谢谢你的回答。

```
int main(int argc,char *argv[]){
    char Hop_network[4];
    char packet_received[]= "001456";
    int Hop_increaser;

    Hop_network[0] = packet_received[0];
    Hop_network[1] = packet_received[1];
    Hop_network[2] = packet_received[2];
    Hop_network[3] = '\0';
    printf("Hop_network = %s\n", Hop_network);

    Hop_increaser = atoi(Hop_network);
    Hop_increaser = Hop_increaser + 1;
    sprintf(Hop_network, "%d", Hop_increaser);
    printf("new Hop_network = %s\n", Hop_network);

    packet_received[0] = Hop_network[0];
    packet_received[1] = Hop_network[1];
    packet_received[2] = Hop_network[2];
    printf("packet_received = %s\n", packet_received);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T08:23:20.433

您可以使用宽度说明符来 sprintf 左对齐数字。

```
sprintf(Hop_network, "%03d", Hop_increaser); 
```

这意味着“用零左对齐到宽度 3”。

所有格式说明符的文档都可以在这里找到：[http ://www.cplusplus.com/reference/clibrary/cstdio/sprintf/](http://www.cplusplus.com/reference/clibrary/cstdio/sprintf/)*

# php - google chrome ajax 调用在 js concole 中不显示阿拉伯字符

> ID：10671907
> 
> 赞同：0
> 
> 时间：2012-05-20T08:21:12.180
> 
> 标签：php, google-chrome, arabic

我正在使用 ajax 处理阿拉伯字符中的数据，一切正常，我可以将阿拉伯字符存储到数据库中，我可以从数据库中检索阿拉伯字符并将其打印到屏幕上，一切正常，但我的问题是当我检查**javascripte concole在谷歌**浏览器上检查检索数据我无法显示阿拉伯字符，但打印是这样的**（这只是示例，并非所有数据）**

```
["\u0645\u062f\u064a\u0646\u0629","\u0645\u062f\u064a\u0646\u0629 \u062a\u0627\u0631\u064a\u062e\u064a\u0651\u0629","\u0634\u062e\u0635\u064a\u0651\] 
```

我的意思是这样

![在此处输入图像描述](../Images/22b22c7488199c7935a6932c7499585d.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T08:25:40.827

使用 JSON 时，字符串为 UTF-8，特殊字符编码为`\u`后跟 4 个十六进制字符。

在您的情况下，如果您尝试解码该字符串 - 例如，使用数组的第一项：

```
>>> str = "\u0645\u062f\u064a\u0646\u0629";
"مدينة" 
```

我不读阿拉伯语，但这对我来说看起来像阿拉伯语:-)

即使 JSON*看起来不太好*，但这并不重要：重要的是，一旦 JSON 被解码，您就可以取回原始数据；而且，在这里，您似乎可以做到。

要在浏览器的控制台中获取原始的、解码的字符串*（我想是出于调试目的）*，您应该能够使用您在应用程序中使用的相同 JS 库*（如果有的话）*或`JSON.parse()`函数*（我刚刚测试了这个实际上，在 Firefox 的控制台中）*：

```
>>> JSON.parse('"\u0645\u062f\u064a\u0646\u0629"');
"مدينة" 
```

当然，您必须编写一些代码才能将解码后的值实际输出到浏览器的控制台*（无论是“手动”还是从服务器获取 JSON 时）*；但由于浏览器的控制台它是一个调试工具，它似乎还可以。
默认情况下，控制台作为调试工具，输出它从服务器获取的原始 JSON 字符串——并且，使用 JSON，特殊字符被编码，你无能为力*（除了解码 JSON 字符串并显示它你自己，如果你需要）*

如果您想在每次从服务器获得结果时将解码后的字符串输出到控制台，则每次从服务器获得结果时都必须调用`JSON.parse()`；然后输出它，可能使用`console.log()`.

不过，不要忘记在分发您的应用程序/将其上传到生产服务器之前删除该调试代码。

# java - java代码中的Android按钮背景图像

> ID：10671910
> 
> 赞同：0
> 
> 时间：2012-05-20T08:22:05.850
> 
> 标签：java, android, imagebutton

我有 45 个按钮，我在 java 代码中通过循环创建。现在我需要根据用户交互设置和更改背景图像，还需要根据按钮调整图像大小。如果我可以为 java 中的图像按钮做所有事情，这对我很有帮助。

我如何在java代码中调整按钮的背景图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T08:36:40.797

将包含图像和要用于每个按钮的数据的数组存储起来，并在循环初始化 ImageButtons 时使用它们。

发布一些代码以获得详细帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T10:08:01.307

如果要根据 Button 的尺寸调整图像大小，请使用`getHeight()`和`getWidth()`方法获取按钮的大小，并使用以下函数调整 Button 的图像大小：

## 调整位图大小：

```
public Bitmap getResizedBitmap(Bitmap bm, int newHeight, int newWidth) {

int width = bm.getWidth();

int height = bm.getHeight();

float scaleWidth = ((float) newWidth) / width;

float scaleHeight = ((float) newHeight) / height;

// create a matrix for the manipulation

Matrix matrix = new Matrix();

// resize the bit map

matrix.postScale(scaleWidth, scaleHeight);

// recreate the new Bitmap

Bitmap resizedBitmap = Bitmap.createBitmap(bm, 0, 0, width, height, matrix, false);

return resizedBitmap;

} 
```

* * *

现在您可以使用Button 对象上的`setBackgroundDrawable()`or`setBackgroundResource()`方法来更改其**背景图像**，并且您可以通过`setHeight()`和`setWidth()`方法调整 Button 的大小。 [参考](http://thinkandroid.wordpress.com/2009/12/25/resizing-a-bitmap/)

# dll - 如何使用 CMake 将 DLL 文件复制到与可执行文件相同的文件夹中？

> ID：10671916
> 
> 赞同：116
> 
> 时间：2012-05-20T08:24:10.807
> 
> 标签：dll, cmake

我们使用 CMake 在 SVN 中生成源代码的 Visual Studio 文件。现在我的工具需要一些 DLL 文件与可执行文件位于同一文件夹中。DLL 文件位于源代码旁边的文件夹中。

如何更改`CMakeLists.txt`生成的 Visual Studio 项目在发布/调试文件夹中已有特定的 DLL 文件或在编译时复制它们？

* * *

## 回答 #1

> 赞同：142
> 
> 时间：2012-05-20T10:44:43.497

我会`add_custom_command`用`cmake -E copy_if_different...`. 如需完整信息，请运行

```
cmake --help-command add_custom_command
cmake -E 
```

因此，在您的情况下，如果您具有以下目录结构：

```
/CMakeLists.txt
/src
/libs/test.dll 
```

并且您的命令适用的 CMake 目标是`MyTest`，那么您可以将以下内容添加到您的 CMakeLists.txt 中：

```
add_custom_command(TARGET MyTest POST_BUILD        # Adds a post-build event to MyTest
    COMMAND ${CMAKE_COMMAND} -E copy_if_different  # which executes "cmake - E copy_if_different..."
        "${PROJECT_SOURCE_DIR}/libs/test.dll"      # <--this is in-file
        $<TARGET_FILE_DIR:MyTest>)                 # <--this is out-file path 
```

如果您只想`/libs/`复制目录的全部内容，请使用`cmake -E copy_directory`：

```
add_custom_command(TARGET MyTest POST_BUILD
    COMMAND ${CMAKE_COMMAND} -E copy_directory
        "${PROJECT_SOURCE_DIR}/libs"
        $<TARGET_FILE_DIR:MyTest>) 
```

如果您需要根据配置（例如发布、调试等）复制不同的 dll，那么您可以将它们放在以相应配置命名的子目录中：`/libs/Release`和`/libs/Debug`. 然后，您需要在调用中将配置类型注入到 dll 的路径中`add_custom_command`，如下所示：

```
add_custom_command(TARGET MyTest POST_BUILD
    COMMAND ${CMAKE_COMMAND} -E copy_directory
        "${PROJECT_SOURCE_DIR}/libs/$<CONFIGURATION>"
        $<TARGET_FILE_DIR:MyTest>) 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2015-12-23T23:21:22.543

我将这些行放在我的顶级 CMakeLists.txt 文件中。CMake编译的所有库和可执行文件都将放在构建目录的顶层，以便可执行文件可以找到库并轻松运行所有内容。

```
set (CMAKE_LIBRARY_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR})
set (CMAKE_RUNTIME_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}) 
```

请注意，这并不能解决 OP 从项目源目录复制预编译二进制文件的问题。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2020-01-04T19:27:38.807

我今天在尝试构建我的程序的 Windows 版本时遇到了这个问题。我最终自己做了一些研究，因为所有这些答案都不能让我满意。有三个主要问题：

*   我希望调试版本与库的调试版本链接，而发布版本分别与库的发布版本链接。

*   除此之外，我希望将正确版本的 DLL 文件（调试/发布）复制到输出目录。

*   我想在不编写复杂而脆弱的脚本的情况下实现这一切。

在 github 上浏览了一些 CMake 手册和一些多平台项目后，我找到了这个解决方案：

将您的库声明为具有“IMPORTED”属性的目标，引用其调试并发布 .lib 和 .dll 文件。

```
add_library(sdl2 SHARED IMPORTED GLOBAL)
set_property(TARGET sdl2 PROPERTY IMPORTED_IMPLIB_RELEASE "${SDL_ROOT_PATH}/lib/SDL2.lib")
set_property(TARGET sdl2 PROPERTY IMPORTED_LOCATION_RELEASE "${SDL_ROOT_PATH}/bin/SDL2.dll")
set_property(TARGET sdl2 PROPERTY IMPORTED_IMPLIB_DEBUG "${SDL_ROOT_PATH}/lib/SDL2d.lib")
set_property(TARGET sdl2 PROPERTY IMPORTED_LOCATION_DEBUG "${SDL_ROOT_PATH}/bin/SDL2d.dll") 
```

像往常一样将此目标与您的项目链接

```
target_link_libraries(YourProg sdl2 ...) 
```

如果自上次构建以来已以某种方式更改，则进行自定义构建步骤以将 dll 文件复制到其目标

```
add_custom_command ( TARGET YourProg POST_BUILD
    COMMAND ${CMAKE_COMMAND} -E copy_if_different
    $<TARGET_FILE:sdl2> $<TARGET_FILE_DIR:YourProg>
) 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-11-17T22:45:54.257

已接受答案的附录，作为单独的答案添加，因此我得到了代码格式：

如果您在同一个项目中构建 dll，它们通常位于 Release、Debug 等目录中。您必须使用 Visual Studio 环境变量来正确复制它们。例如：

```
"${PROJECT_BINARY_DIR}/your_library/\$\(Configuration\)/your_library.dll" 
```

对于源和

```
"${CMAKE_CURRENT_BINARY_DIR}/\$\(Configuration\)/your_library.dll" 
```

为目的地。注意逃跑！

您不能将 CMake CMAKE_BUILD_TYPE 变量用于配置，因为它在 VS 项目生成时已解决，并且始终是默认值。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2018-02-02T18:23:43.810

您还可以使用命令 find_library：

```
find_library(<some_var> NAMES <name_of_lib> PATHS "<path/to/lib>") 
```

使用定义的 EXECUTABLE_PATH，例如：

```
set(EXECUTABLE_OUTPUT_PATH ${PROJECT_BINARY_DIR}/bin) 
```

您可以移动可执行文件所需的 .dll 文件

```
file(COPY ${<some_var>}
    DESTINATION ${EXECUTABLE_OUTPUT_PATH}) 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2020-07-29T17:12:09.927

# 在构建期间移动文件使用 `install`

我在尝试遵循 CMake 官方教程[Step 9](https://cmake.org/cmake/help/latest/guide/tutorial/index.html#mixing-static-and-shared-step-9)时遇到了这个问题。这是我要移动的文件的位置：

```
src
 |_build
    |_Debug
       - `MathFunctions.dll` 
```

这是我希望文件所在的位置：

```
src
 |_build
    |_install
         |_bin
             - `MathFunctions.dll` 
```

由于这个 DLL 是作为共享库生成的，我所做的只是将这一行包含在包含库源代码`CMakeLists.txt`的**子目录中**`src/Mathfunctions/CMakeLists.txt`

```
install(FILES ${PROJECT_BINARY_DIR}/$<CONFIG>/MathFunctions.dll
DESTINATION bin) 
```

感谢您的回答，我可以考虑这一点。只是一条线，所以我认为还可以。`$<CONFIG>`可以有两个值*Debug*或*Release*取决于项目的构建方式，如原始问题所要求的。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-06-19T10:40:22.070

这对其中一个很有用

```
SET(CMAKE_ARCHIVE_OUTPUT_DIRECTORY
    ${PROJECT_SOURCE_DIR}/lib CACHE
    PATH "Directory where all the .lib files are dumped." FORCE)
SET(CMAKE_RUNTIME_OUTPUT_DIRECTORY
    ${PROJECT_SOURCE_DIR}/bin CACHE
    PATH "Directory where .exe and .dll files are dumped." FORCE) 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2021-10-27T09:36:59.953

对于 Windows 用户，[`$<TARGET_RUNTIME_DLLS:tgt>`](https://cmake.org/cmake/help/latest/manual/cmake-generator-expressions.7.html?highlight=target_file_dir#genex:TARGET_RUNTIME_DLLS)CMake 3.21+ 中有一个新的生成器表达式，您可以使用这个官方片段来复制目标所依赖的所有 DLL。

```
find_package(foo REQUIRED)

add_executable(exe main.c)
target_link_libraries(exe PRIVATE foo::foo foo::bar)
add_custom_command(TARGET exe POST_BUILD
  COMMAND ${CMAKE_COMMAND} -E copy $<TARGET_RUNTIME_DLLS:exe> $<TARGET_FILE_DIR:exe>
  COMMAND_EXPAND_LISTS
  ) 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-05-20T08:31:58.233

您可能需要[添加自定义目标](http://cmake.org/cmake/help/v2.8.8/cmake.html#command:add_custom_target)并使其依赖于您的可执行目标之一。

要使用上述功能复制文件，请使用：

```
COMMAND ${CMAKE_PROGRAM} -E copy_if_different ${CMAKE_BINARY_DIR}/path/to/file.dll ${CMAKE_BINARY_DIR}/where/to/put/file.dll` 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-07-02T12:23:07.513

当前评分最高的答案中的以下命令取决于放在 /libs/ 中的输出。

```
add_custom_command(TARGET MyTest POST_BUILD
    COMMAND ${CMAKE_COMMAND} -E copy_directory
        "${PROJECT_SOURCE_DIR}/libs/$<CONFIGURATION>"
        $<TARGET_FILE_DIR:MyTest>) 
```

我使用以下命令进行复制，这对我来说无处不在。请注意，我只是在此处复制输出 dll，而不是整个目录。另请注意，我正在对目标 /bin/ 目录进行硬编码，该目录特定于该项目。但我想分享`$<TARGET_FILE_DIR:${CMAKE_PROJECT_NAME}>/$<TARGET_FILE_NAME:${CMAKE_PROJECT_NAME}>`我认为很简洁的语法：

```
add_custom_command(TARGET ${CMAKE_PROJECT_NAME} POST_BUILD
    COMMAND ${CMAKE_COMMAND} -E copy_if_different
        $<TARGET_FILE_DIR:${CMAKE_PROJECT_NAME}>/$<TARGET_FILE_NAME:${CMAKE_PROJECT_NAME}>
        ${CMAKE_CURRENT_SOURCE_DIR}/bin/$<TARGET_FILE_NAME:${CMAKE_PROJECT_NAME}>) 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-06-09T13:23:38.160

我是 CMake 初学者，但我仍然想分享我的经验。在我的情况下，我需要一个安装后副本，以便我的所有二进制文件都在其中。对于可以在 CMake 中导入的第三方二进制文件，以下内容适用于我：

```
find_package( dependency REQUIRED )
if( MSVC ) 
    # If done properly and if the dependency has a correct config file, IMPORTED_LOCATION_RELEASE should be defined
    get_target_property( DEP_SHARED_LIB_PATH dependency IMPORTED_LOCATION_RELEASE )
    # Create a bin directory in the install folder
    add_custom_command(TARGET BGS POST_BUILD COMMAND ${CMAKE_COMMAND} -E make_directory  ${CMAKE_INSTALL_PREFIX}/bin/)
    # Copy the shared lib file
    add_custom_command(TARGET BGS POST_BUILD COMMAND ${CMAKE_COMMAND} -E copy ${DEP_SHARED_LIB_PATH} ${CMAKE_INSTALL_PREFIX}/bin/)
endif() 
```

显然 IMPORTED_LOCATION_RELEASE 可以有变体，具体取决于共享库的构建/安装方式。可能是 IMPORTED_LOCATION_DEBUG。

也许有更好的方法来获取该属性名称，我不知道。

# php - 用php以相反方向打印星星*

> ID：10671917
> 
> 赞同：1
> 
> 时间：2012-05-20T08:24:19.487
> 
> 标签：php, printf

像这样：

```
 *
  **
 ***
**** 
```

不像这样：

```
 *
 **
 *** 
```

我的意思是相反的方向。星星应该从左边增加填充。有什么办法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-20T08:27:37.703

[使用str_pad()](http://php.net/manual/en/function.str-pad.php)将字符串填充到所需的长度。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-20T08:28:11.683

添加

```
//&nbsp; for every desired space 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-20T08:35:41.883

帮助你思考这个问题（因为它是家庭作业）。

*   你将如何正式确定需要做的事情？当您必须正确对齐某些内容时，这意味着什么？
*   想想可以使正确对齐更具挑战性的方法 - 例如，您是否需要事先知道每条线的长度？
*   什么样的[`string function`](http://www.php.net/manual/en/ref.strings.php)会符合要求？

# c++ - Kruskal 算法实现

> ID：10671918
> 
> 赞同：1
> 
> 时间：2012-05-20T08:24:33.833
> 
> 标签：c++, algorithm, kruskals-algorithm

我想在 C++ 中实现 Kriskal 的算法，但是......

> DAA.exe 中 0x0127160d 处未处理的异常：0xC0000005：访问冲突读取位置 0xdd2021d4。

它在 getRoot 函数的这一行停止：

> 而（城市[根].prev！= NO_PARENT）

我认为问题在于城市数组中的数据。当我打印数组中的所有数据时，这不是我想要的。城市的名称是这样的“════════════════¤¤¤¤ллллллю■ю■”和数字（int） - 像这样（-842150451）。以下是完整代码。

```
#include<iostream>
#include<cstdio>
#include<algorithm>
#include<cstring>

#define NO_PARENT -1

struct city {
    char name[11];
    int prev;
};

struct path {
    unsigned i, j, price;
};

bool comparsion(path p1, path p2) {
    return p1.price > p2.price;
}

int getRoot(city *cities, int cityNumber) {
    int root = cityNumber, tmp;

    while(cities[root].prev != NO_PARENT)
        root = cities[root].prev;

    while(cityNumber != root) {
        tmp = cityNumber;
        cityNumber = cities[cityNumber].prev;
        cities[tmp].prev = root;
    }

    return root;
}

bool isListed(city *cities, int n, char cityName[]) {
    for(int i = 0; i < n; i++)
        if(strcmp(cities[i].name, cityName))
            return true;
    return false;
}

int getCityNumber(city *cities, int n, char cityName[]) {
    for(int i = 0; i < n; i++)
        if(strcmp(cities[i].name, cityName))
            return i;
    return NO_PARENT;
}

int minPrice(city *cities, path *paths, int cityCount, int pathCount) {
    unsigned minPrice = 0;
    // sort paths by price
    std::sort(paths, &paths[pathCount-1], comparsion);

    for(int k = 0; k < pathCount; k++) {
        printf("path: %d - %d\n", paths[k].i, paths[k].j);
        int c1 = getRoot(cities, paths[k].i), c2 = getRoot(cities, paths[k].j);
        if(c1 != c2) {
            minPrice += paths[k].price;
            cities[c2].prev = c1;
        }
    }

    return minPrice;
}

    int main() {
    int n, m, k;
    do {
        scanf("%d %d %d", &n, &m, &k);
    } while(n < 2 || n > 10001 || m < -1 || m > 100001 || k < -1 || k > 100001);

    city* cities = (city*)malloc(n*sizeof(city));
    path* paths = (path*)malloc((m + k)*sizeof(path));
    int addCities = 0;
    char city1[11], city2[11];
    for(int i = 0; i < (m + k); i++) {
        scanf("%s %s", city1, city2);

        if(addCities < n && !isListed(cities, n, city1)) { // if city1 is not into cities
            // add it
            strcpy(cities[addCities].name, city1);
            cities[addCities].prev = NO_PARENT;
            addCities++;
        }
        paths[i].i = getCityNumber(cities, n, city1); // number of city1

        if(addCities < n && !isListed(cities, n, city2)) { // if city2 is not into cities
            // add it
            strcpy(cities[addCities].name, city2);
            cities[addCities].prev = NO_PARENT;
            addCities++;
        }
        paths[i].j = getCityNumber(cities, n, city1); // number of city2

        if(i >= m)
            scanf("%d", &paths[i].price);
    }

    for(int i = 0; i < (m + k); i++)
        printf("%s: %d\n", cities[i].name, cities[i].prev);

    // Calculate min price
    printf("%d ", minPrice(cities, paths, n, k + m));

    system("pause");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T12:42:09.100

在 isListed() 和 getCityNumber() 中，您使用 strcmp() 来检查字符串是否相等。你这样做的方式有两个问题：

1.  当两个字符串相等时 strcmp 返回 0，因此您需要检查 if(strcmp(...) == 0 )。这是 C 语言中这些奇怪的东西之一。
2.  在 malloc'ing 之后，您*需要*将 city [i].name 设置为例如“未命名”或只是“\0”。否则， strcmp 将在未初始化的字符串上调用 - 如果它们在 11 个字符内不包含空字符，它将失败。在 malloc 行之后添加此代码：

    ```
    for( int i = 0 ; i < n ; ++ i ) {
        cities[ i ].name[ 0 ] = '\0';
        cities[ i ].parent    = NO_PARENT;
    } 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T08:34:41.983

你必须初始化“城市”。n 个城市之间有 (m+k) 条路径，但这并不一定意味着所有 n 个城市都包含在这些路径中，因为您已将一个城市的**prev**成员设置为`NO_PARENT`当它被列为 city1 或 city2 时，当一个城市从未将其列为未定义的**prev**成员，并且当您将其用作 getRoot 函数中的索引时，`while(cities[root].prev != NO_PARENT) root = cities[root].prev;`这将导致问题。

# php - 聊天客户端/帖子无需重新加载页面

> ID：10671925
> 
> 赞同：1
> 
> 时间：2012-05-20T08:25:57.713
> 
> 标签：php, javascript, ajax, chat

我正在寻找一个允许用户创建组然后在这些组中聊天/发帖的站点。但是，当在组内发布帖子/聊天时，我不希望用户必须重新加载页面才能查看该组内的这些新帖子/聊天。我的问题归结为：您对如何做到这一点（语言、网络服务等）的最佳意见是什么？

我很了解 PHP、SQL、HTML、CSS，但不太了解 XML、Javascript、AJAX（我遇到过足够多的人来阅读代码并知道它们是如何工作的，但我对它们并不熟练或自信。我有感觉我需要读一本书/所有这些来建立我描述的那种网站。）

任何和所有输入将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T08:38:36.757

Web 在处理典型的请求/响应模型方面做得很好，其中客户端发出请求，服务器响应资源。但是，当涉及到服务器必须向客户端发送数据而客户端不请求数据的应用程序时，这就是我们必须发挥创造力的地方。

可以使用几种不同的方法来促进基于 Web 的实时应用程序。

**轮询：**

轮询涉及客户端定期向服务器发出请求以接收更新。这种方式有两个主要问题：第一，很长一段时间内可能没有数据供服务器推送。因此，可能会浪费大量带宽继续轮询服务器以获取更新。其次，轮询率决定了应用程序的实时性。虽然快速的轮询速度会使更新更快出现，但它会浪费带宽。相反，较长间隔的轮询使用较少的带宽，但缺点是更新不会很快出现。

一般来说，对于 2012 年的聊天应用来说，这是一个非常糟糕的解决方案。

**彗星/反向 AJAX：**

Comet 是一种在过去 5 年中成功使用的技术，它采用请求/响应的概念并使用 hack 来模拟实时效果。Comet 背后的一般思想是客户端向服务器发出请求，服务器无限期地保持连接打开。服务器等待直到有更新发送给客户端。一旦更新准备就绪，服务器就会发送响应，这会模拟服务器向客户端发出请求。一旦客户端收到响应，它就会打开一个新连接，并重复该过程。

当与 Continuations 结合使用时，该技术已被证明可以在某些平台上扩展到超过 20,000 个同时连接，从而确保为其他任务释放等待线程。

这不仅节省了带宽，而且使应用程序感觉非常实时。

**网络套接字：**

Websockets 是在 HTML5 中引入的，作为 Comet 的替代品，使用的是 ws:// 协议而不是 http。然而，这还没有被所有浏览器供应商广泛采用，关于协议的规范可能仍然存在讨论。它有许多与彗星相同的好处。

* * *

有关 Comet 的更多信息，请查看[Comet 和 PHP](http://www.zeitoun.net/articles/comet_and_php/start)以及[Comet 在 PHP 中的挑战](https://stackoverflow.com/q/603201/552792)。对于客户端集成，请查看[Dojo Cometd 库](http://dojotoolkit.org/reference-guide/1.7/dojox/cometd.html)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-20T08:50:37.910

我会说 AJAX 是最好的方法。或者，创建一个重新加载的 iframe

# ms-access-2007 - 追加查询以验证数据

> ID：10671926
> 
> 赞同：0
> 
> 时间：2012-05-20T08:26:14.000
> 
> 标签：ms-access-2007

我正在使用带有参数值的 Access 2007 附加查询，以使数据输入员能够将数据输入到表中。请告知我如何强制在文本字段“new_part_ID”中输入的数据始终为大写，并将数字字段“workorder Qty”为整数而不是文本非常感谢您，Nathaniel

```
 INSERT INTO tbl_New_part_ID_input ( new_part_ID, [workorder Qty] )
    SELECT [please CAREFULLY enter  work order  part_ID in UPPERCASE] AS Expr1, [please CAREFULLY enter the work order Qty] AS Expr2; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T08:38:11.240

对于大写部分，您可以像这样即时转换输入

```
INSERT INTO tbl_New_part_ID_input ( new_part_ID, [workorder Qty] )
    SELECT upper([please CAREFULLY enter  work order  part_ID]) AS Expr1, [please CAREFULLY enter the work order Qty] AS Expr2; 
```

至于数量是强制整数。您始终可以将字段类型设置为仅允许会导致查询错误的整数。另一种选择是对用户输入的数量应用某种舍入函数。

确实没有办法直接显示与查询输入相关的验证消息。如果你真的必须这样做，我建议使用表单而不是查询并将验证规则放在字段上。或者，您可以直接在表中的字段上应用验证规则，而不是在查询中。

# sql-server - Sqlite 中的 TSQL“IF @@Rowcount > 0”模拟？

> ID：10671931
> 
> 赞同：6
> 
> 时间：2012-05-20T08:27:09.187
> 
> 标签：sql-server, tsql, sqlite

我对表 [foo] (bar_id int 主键自动增量，bar_name varchar) 有 t-sql 插入查询，其中包含文本：

```
INSERT INTO foo(bar_name)
VALUES (@bar_name_new);
IF @@ROWCOUNT > 0
    SELECT bar_id, bar_name
    FROM foo
    WHERE bar_id = scope_identity(); 
```

触发器可以在插入后修改 bar_name 字段。这就是为什么我需要刷新“bar_name”字段。现在我需要在 sqlite db 上做同样的事情。我写过这个：

```
INSERT INTO foo(bar_name)
VALUES (@bar_name_new);

 SELECT bar_id, bar_name
 FROM foo
 WHERE bar_id = (SELECT last_insert_rowid()); 
```

我可以检查调用 sqlite changes() 函数的 db 中的更改数量。而且我知道sqlite中的case语句。但是我如何告诉 sqlite 当 changes() 返回 0 时不需要选择呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-04-28T02:04:02.933

SQLite 的 SQL 风格没有 T-SQL 所具有的分支和循环结构。控制流逻辑以宿主语言执行。

在您的情况下，您需要[sqlite3_changes](http://www.sqlite.org/c3ref/changes.html)函数。无论如何，您都将需要它来决定是否有任何行要检索。虽然，为了方便和高效，`where changes() > 0`如果（我怀疑）查询计划器足够聪明，可以立即返回，您也可以只执行查询。

# c++ - 在类中初始化私有静态变量

> ID：10671942
> 
> 赞同：3
> 
> 时间：2012-05-20T08:28:33.070
> 
> 标签：c++, class

我在头文件中有一个类：

```
class Employee
    {
        //Private data members
    private:
        string firstName;
        string lastName;
        char gender;

        //number of employees
        const static int numEmployees = 0;

    public: 
    ....
    }; 
```

**愚蠢的事情是在教练的“指南”中说，在类的私有成员中将 numEmployees 声明为 0 的静态整数值**

问题是我不能更新`numEmployees`变量，因为它是`const`，例如当你公开声明构造函数时：..你不能增加`numEmployees = numEmployees + 1`。

如果您不声明`numEmployees`为`const`，则只需在`static int numEmployees;`Visual Studio 2010 中给出错误说只会`const`在类中声明。

知道如何申报`numEmployees`吗？谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-20T08:33:11.520

既然`numEmployees`要变了，那就不应该了`const`。非 const 静态变量必须在类声明之外进行初始化，例如在源文件中，如下所示：

```
int Employee::numEmployees = 0; 
```

话虽如此，`numEmployees`成为`Employee`班级的一员可能不是最好的主意。

我会做`gender`一个枚举，而不是一个字符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-20T08:45:53.453

在 C++ 中，静态变量需要在类声明中声明，但也需要在实现模块中定义。

```
// --- .h interface file
class MyClass
{
    public:
        static int my_static_variable;
    ...
};

// --- .cpp implementation file
#include "myclass.h"
int MyClass::my_static_variable = 0; 
```

这种限制没有真正的技术论据，但它是语言的定义方式。

如果由于某种原因你真的需要规避它，你可以使用函数级静态：

```
class MyClass
{
    public:
        // Note: returning a reference to int!
        static int& my_static_variable()
        {
            static int n = 0;
            return n;
        }
}; 
```

但是，要访问该变量，您需要在这种情况下正式调用一个方法：

```
MyClass::my_static_variable() = 0;
MyClass::my_static_variable() ++;
MyClass::my_static_variable() *= 2; 
```

我说“正式”是因为对于这样一个简单的内联声明函数，一个体面的编译器生成的机器代码将与只处理一个变量所需的代码相同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T08:30:21.973

在类之外初始化`numEmployees`为

```
Employee::numEmployees = 0 
```

并将其声明`public`为类中的成员

```
static int numEmployees; 
```

您也可以在`private`不初始化的情况下声明它，因为静态成员默认分配为零。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-20T08:32:12.343

您已将其声明为`const`. 如何更改 const 参数？

因此，您可以将其设为静态并在构造函数中初始化为您想要的某个值。默认情况下，静态变量初始化为零。

# x86 - Intel x86 XOR 操作码 0x31

> ID：10671946
> 
> 赞同：2
> 
> 时间：2012-05-20T08:29:05.800
> 
> 标签：x86, opcode

以下 Intel x86 指令是操作码 0x31: `xor <r/m32>,<r32>`。在指令的实际机器代码中，0x31 后跟另一个十六进制值，表示使用的寄存器或内存地址。我的问题如下：

1.  哪些十六进制代码表示可以进行异或的可能寄存器？
2.  考虑到可以使用的寄存器和内存参数组合的数量，这条指令可能创建的机器代码有哪些限制？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T08:39:50.727

您可以在[英特尔® 64 和 IA-32 架构软件开发人员手册](http://www.intel.com/content/www/us/en/processors/architectures-software-developer-manuals.html "英特尔® 64 和 IA-32 架构软件开发人员手册")中找到英特尔处理器操作码的完整描述。该`XOR`指令是第 2B 卷的第 682 页：指令集参考，MZ。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T09:21:52.407

回答第二部分。

您不想随意修改堆栈指针，`ESP`. 如果您损坏它，您的代码将崩溃或挂起。

同样，指令将要使用的地址都应该对应于分配的可写内存。如果您尝试访问未由物理内存映射或只读但正在写入的内存位置，您的代码将崩溃。

所以你必须注意你的基址和索引寄存器、位移和索引寄存器乘法器。当组合在一起形成您要读取/写入的内存地址时，它们应该指向您知道有可访问内存的地方。

通常，您可以通过将某些内容压入堆栈或递减来在堆栈上分配一些内存以满足您的需要`ESP`。

如果您需要访问程序的代码内存，请确保这些只是读取。代码存储器通常是只读的。

如果你需要执行某些东西，它要么必须是现有程序的代码，要么是位于可执行内存中的代码。期望默认情况下所有不是程序代码的内存都是不可执行的。不过，Windows 和 Linux 中有一些特殊功能可以更改内存区域的内存保护并使其可执行或可写。

# jsf - 登录后如何重定向？

> ID：10671950
> 
> 赞同：1
> 
> 时间：2012-05-20T08:29:57.890
> 
> 标签：jsf, redirect, managed-bean

我已将用户名和密码绑定到后备托管 bean。在后台 bean 中，当我使用 DB 检查用户名和密码时，我想将页面从 重定向`login.xhtml`到`home.xhtml`. 我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-20T12:16:34.147

只需返回附加`faces-redirect=true`参数的视图 ID。

例如

```
public String login() {
    User found = userService.find(username, password);

    if (found != null) {
        this.user = found;
        return "home?faces-redirect=true"; // Will redirect to home.xhtml.
    }
    else {
        addGlobalErrorMessage("Unknown login, please try again");
        return null; // Will stay in current view (and show error message).
    }
} 
```

# java - 使用java查找围绕模式的子字符串

> ID：10671952
> 
> 赞同：-2
> 
> 时间：2012-05-20T08:30:18.407
> 
> 标签：java, regex, substring

我有一个长字符串变量`X`和另一个字符串（长度为一两个单词）`Y`。我想`Y`在它出现之前和之后找到 50 个单词`X`。如何使用 reg-ex 实现这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-20T08:38:10.790

为什么这必须是一个正则表达式？如果它周围没有 50 个单词怎么办，因为匹配在字符串的开头？

考虑只定位匹配项，然后单独找到一个合适的“片段”围绕它，而不是试图将它全部塞进一个神奇的、无法维护的正则表达式中。

明确地这样做并没有错：找到匹配项，将片段增长到所需的大小，返回匹配项。使它成为一个有据可查的方法“extractSnippet”，而不是尝试在单个正则表达式中执行它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T08:38:29.627

检查这个 PHP 正则表达式，我很确定它也适用于 Java：

```
php > preg_match_all("/([a-z]+ ){4}donkey( [a-z]+){4}/","summer donna summer donna summer donkey hop hop hop hop bzzp",$matches); print_r($matches);
Array
(
  [0] => Array
    (
        [0] => donna summer donna summer donkey hop hop hop hop
    )

  [1] => Array
    (
        [0] => summer 
    )

  [2] => Array
    (
        [0] =>  hop
    )

) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T08:43:17.887

Java 需要 Java.util.regex.* 库（最后一个 kliny 用于依赖项）来执行它。导入它并调用一个实例，例如：

```
Pattern p = Pattern.compile("(\\d+)");
Matcher m = p.matcher(name);
StringBuffer sb = new StringBuffer();
while(m.find()){
   sb.append(m.group()); //this appends the context of Pattern p to the appended sb
} 
```

在 Pattern 中，可以调用常规的正则表达式语法。

我认为您可能会遇到在 y 字符串之前或之后可能没有 50 多个单词的问题。

*粗略地说，我会说首先使用$y*之类的模式检查是否存在以在 X 上执行。然后使用拆分操作和 " " 空格分隔符来计算单词的数量。从那里，它是一个计数问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-20T09:25:45.977

此代码生成一个包含 300 个单词的字符串 (Word0 .. Word299)，定义要搜索的目标 as `"Word12 Word13"`，然后在该字符串之前最多找到 50 个单词，之后最多查找 50 个单词。

```
final StringBuilder b = new StringBuilder();
final String matchWords = "Word12 Word13";
for (int i = 0; i < 300; i++) b.append("Word").append(i).append(" ");
final Matcher m =
  Pattern.compile(
    "((?:\\S+\\s+){0,50})" + Pattern.quote(matchWords) + "((?:\\s+\\S+){0,50})"
  ).matcher(b.toString());
if (m.find()) System.out.println("Words before: " + m.group(1) +
    "\nAfter: " + m.group(2)); 
```

# c++ - 不同 C++ 文件中的相同类名

> ID：10671956
> 
> 赞同：24
> 
> 时间：2012-05-20T08:31:22.373
> 
> 标签：c++, class, name-clash

如果两个 C++ 文件对同名的类有不同的定义，那么当它们被编译和链接时，即使没有警告也会抛出一些东西。例如，

```
// a.cc
class Student {
public:
    std::string foo() { return "A"; }
};
void foo_a()
{
    Student stu;
    std::cout << stu.foo() << std::endl;
}

// b.cc
class Student {
public:
    std::string foo() { return "B"; }
};
void foo_b()
{
    Student stu;
    std::cout << stu.foo() << std::endl;
} 
```

当使用 g++ 编译并链接在一起时，两者都将输出“A”（如果在命令行顺序中 a.cc 在 b.cc 之前）。

一个类似的话题是[here](https://stackoverflow.com/questions/2075078/c-vs2005-defining-the-same-class-name-in-two-different-cpp-files)。我看到命名空间会解决这个问题，但我不知道为什么链接器甚至没有发出警告。如果该类的一个定义具有另一个未定义的额外功能，则假设 b.cc 更新为：

```
// b.cc
class Student {
public:
    std::string foo() { return "B"; }
    std::string bar() { return "K"; }
};
void foo_b()
{
    Student stu;
    std::cout << stu.foo() << stu.bar() << std::endl;
} 
```

然后 stu.bar() 效果很好。感谢任何可以告诉我编译器和链接器在这种情况下如何工作的人。

作为一个额外的问题，如果类是在头文件中定义的，是否应该总是用未命名的命名空间包装它们以避免这种情况？有没有副作用？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-20T08:39:33.517

这违反了一个定义规则（C++03, 3.2/5“一个定义规则”），它说（除其他外）：

> 如果每个定义出现在不同的翻译单元中，并且定义满足以下要求，则可以有多个类类型的定义（第 9 条），... 在程序中。给定这样一个名为 D 的实体在多个翻译单元中定义，则
> 
> *   D 的每个定义都应由相同的记号序列组成；

如果您违反了单一定义规则，则行为是未定义的（这意味着可能会发生奇怪的事情）。

链接器看到多个定义`Student::foo()`- 一个在 a 的目标文件中，一个在 b 的目标文件中。但是它并没有抱怨这一点；它只是选择两者之一（碰巧，它遇到的第一个）。这种对重复函数的“软”处理显然只发生在内联函数中。对于非内联函数，链接器*将*抱怨多个定义并拒绝生成可执行文件（可能有放宽此限制的选项）。GNU`ld`和 MSVC 的链接器都以这种方式运行。

这种行为是有道理的；内联函数需要在它们使用的每个翻译单元中可用。在一般情况下，它们需要有可用的非内联版本（以防调用未内联或函数的地址被占用）。 `inline`实际上只是围绕单一定义规则的免费通行证 - 但要使其工作，所有内联定义都必须相同。

当我查看目标文件的转储时，我看不到任何明显的东西可以向我解释链接器如何知道一个函数允许有多个定义而其他函数不允许，但我确信有一些标志或记录就是这样做的。不幸的是，我发现链接器的工作原理和目标文件的详细信息并没有得到很好的记录，所以确切的机制对我来说可能仍然是个谜。

至于你的第二个问题：

> 作为一个额外的问题，如果类是在头文件中定义的，是否应该总是用未命名的命名空间包装它们以避免这种情况？有没有副作用？

您几乎肯定不想这样做，每个类在每个翻译单元中都是不同的类型，因此从技术上讲，它们不能从一个翻译单元传递到另一个翻译单元（通过指针、引用或复制）。此外，您最终会得到任何静态成员的多个实例。那可能效果不好。

将它们放在不同的命名空间中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-20T08:38:41.460

您违反了类定义的单一定义规则，并且该语言明确禁止这样做。编译器/链接器不需要警告或诊断，并且这种情况肯定不能保证在这种情况下按预期工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-20T08:40:02.473

我认为您的“额外”问题是主要问题的线索。

如果我理解您的额外问题，那么我认为您*不想*将它们包装在命名空间中，因为如果您将同一类#include 到多个 .cc 文件中，那么您可能只想使用每种方法的一个副本，即使它们是在类内部定义的。

这（有点）解释了为什么您在主要示例中只获得每个函数的一个版本。我希望链接器只是假设这两个函数是相同的——从相同的#included 源生成。如果链接器能够检测到它们何时不同并发出警告，那就太好了，但我想这很难。

正如 Mark B 所指出的，实际的答案是“不要去那里”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-20T08:48:01.033

除了违反一个定义规则之外，您不会看到编译器因为[C++ 中的名称修改而抱怨](http://en.wikipedia.org/wiki/Name_mangling#Name_mangling_in_C.2B.2B)

编辑：正如 Konrad Rudolph 所指出的：在这种情况下，损坏的名称将是相同的。

# html - 阻止我调整我的大小

> ID：10671962
> 
> 赞同：0
> 
> 时间：2012-05-20T08:32:13.010
> 
> 标签：html, image, doctype

最近我爱上了 HTML5（尤其是游戏），我意识到我应该首先加强我的 JavaScript，因此，我阅读*Head First JavaScript(O'Reilly)*来尝试一下。我打算显示一个**img**标签，其大小根据不同的导航器大小而变化，但是当我添加**!DOCTYPE html**时，无法调整**img的大小。这是我的简化代码：**

```
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" /> 
        <title>Pet</title>
        <link rel="stylesheet" href="style/rock.css">
        <script type="text/javascript">
            function resizeRock(){
                document.getElementById("rock").style.height = ( document.body.clientHeight - 100 ) * 0.9;
            }
        </script>
    </head>
    <body onload="resizeRock();">
        <div id="_rock">
            <img src="image/rock.png" alt="Rock" id="rock"/>
        </div>
    </body>
</html> 
```

如果我删除**!DOCTYPE html**，一切顺利，但我想知道原因，更重要的是，我想知道如何在 HTML5 中调整**img**标签的大小。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T11:50:51.967

添加`<!DOCTYPE html>`时，会将文档置于标准模式。

您需要进行一些更改才能使其正常工作。首先，在标准模式下，页面只有它需要的高度。`document.body.clientHeight`图像的高度和一点边距也是如此。为了使页面的高度与视口的高度相匹配，就像在 quirks 模式下默认发生的那样，添加以下 CSS：

```
html, body { height:100% } 
```

其次，在标准模式下，您需要在设置 style.width 和 style.height 时说明您使用的尺寸。这就像添加`+ "px"`到尺寸设置行的末尾一样简单，使其

```
document.getElementById("rock").style.height = 
                                    ( document.body.clientHeight - 100 ) * 0.9 + "px"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T09:28:30.797

很可能`<img>`是内联 CSS 元素，您无法为此类元素设置高度。

添加：

```
 #rock {
       display: block;
 } 
```

在您的样式表中。

摩尔资讯

*   [https://stackoverflow.com/a/4906624/315168](https://stackoverflow.com/a/4906624/315168)

# regex - mod_rewrite 消除 .html 或 .php

> ID：10671963
> 
> 赞同：0
> 
> 时间：2012-05-20T08:32:21.060
> 
> 标签：regex, .htaccess, mod-rewrite, url-rewriting

这可能已经在这里讨论了一遍又一遍，但从来没有让它发挥作用。目前我在我的本地主机（wamp）上运行我的网站我需要消除 .html 扩展名我有多个需要重写的文件。

alltourplaces.php
tourplaces.php
等

我为 alltourplaces.php 提供的链接是 Resorts.html 或 City-Hotels.html 或 Liveaboards.html 等。

tourplaces.php 的链接是 Coco-Palm.html 或 Trades-Hotel.html 或 Princess-Haleema.html 等。

我也尝试过不使用 .html ，但它给出了错误。

下面是我使用的 .htaccess 代码

```
options -indexes
Options +FollowSymLinks
RewriteEngine On
RewriteBase /

RewriteRule ^1zevens/(.*)\.html$ /1zevens/alltourplaces.php?tptName=$1 [L]
RewriteRule ^1zevens/(.*)\.html$ /1zevens/tourplaces.php?tpsName=$1 [L] 
```

我在哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T09:27:35.210

尝试这个：

```
RewriteRule ^/?1zevens/(.*?)(\.html)?$ /1zevens/alltourplaces.php?tptName=$1 [L] 
```

它现在有效吗？还可以考虑使用**启用日志记录**`RewriteLog`，并检查日志文件以了解规则的作用。

# matlab - 在matlab中寻求一种使用非循环方法进行计算的方法

> ID：10671967
> 
> 赞同：1
> 
> 时间：2012-05-20T08:32:46.890
> 
> 标签：matlab, loops

我正在将 ac 程序移植到 matlab 以模拟一些数学问题。我在 matlab 中重写了所有代码，但我发现在一个循环中花费了太多时间。我不知道是否有更好的方法来计算以下而不是使用 for 语句

我在一个结构中定义了大约 1000 个矩阵（所有相同的维度）

A{1} = 矩阵1 A{2} = 矩阵2 ... A{1000} = 矩阵1000

B 是与 A{n} 维数相同的常数矩阵

我想计算 A{n} 和 B 的逐元素生成，并将所有结果元素的总和返回到

```
for k=1:1000
  AllSum(k) = sum(sum(A{k}.*B))
end 
```

A 的大小取决于参数，典型大小为 300x300。如果我运行一次上述循环，速度还可以。但是该循环将在另一个块中执行，该块将被调用多次，因此需要很长时间才能找到所有总和。我想知道有没有什么办法可以提升它。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T09:08:46.137

在您的特定情况下，您可以先计算所有`A`矩阵的总和，然后乘以`B`. 与其定义`A`为元胞数组，不如将它们定义为一个 3d 数组：（我同意 @SeçkinSavaşçı 的这一点）

```
A(:,:,i) = ... 
```

代替：

```
A{i} = ... 
```

然后，求和并乘以`B`：

```
result = sum(A,3).* B; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-21T13:48:49.903

同意您应该使用 3d 矩阵而不是单元格。

产品总和让你想起了什么？点积。一系列dot产品让你想起了什么？向量矩阵乘法。所以你想要做的是重塑你的数据，使你的矩阵的每一列都是一个展开的 A{k}，你的 B 行向量是你展开的 B 矩阵。换句话说，A 和 B 是 2D 的事实与您的计算无关。

如果`A(:,:,k) = A{k}`按照建议将 A 转换为，则：

```
vec = B(:).';
mtx = reshape(A, size(A,1)*size(A,2), size(A,3));
AllSum = vec*mtx; 
```

# graph - 我们如何使用聚类系数进行聚类？有什么具体的算法吗？

> ID：10671968
> 
> 赞同：1
> 
> 时间：2012-05-20T08:32:51.373
> 
> 标签：graph, cluster-analysis

我想使用局部聚类系数对我的图进行聚类。我知道聚类系数衡量一个节点如何可能形成一个聚类，但我似乎无法找到任何使用聚类系数的特定聚类算法。

我试图搜索论文，但似乎没有任何相关论文。我错过了什么吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T19:53:40.570

我认为聚类系数不是用于聚类分析，而是用于网络分析。即，它衡量网络中节点的连通性，或者图的集群预期程度。

还请理解“集群”是一个非常广泛的术语。并非每种类型的集群对每个用例都很有趣。

使用聚类系数进行聚类分析可能会产生您已经可以通过其他方法找到的结果，例如经典的团检测方法。

# jquery - jquery结合链接ID

> ID：10671969
> 
> 赞同：1
> 
> 时间：2012-05-20T08:32:52.903
> 
> 标签：jquery, tooltip, tipsy

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-20T08:39:07.247

你可以试试这个：

```
$('div[id^=fbName]').tipsy({fade: true}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-20T08:58:55.960

这比通过 ID 引用所有这些 DIV 更简洁

首先，为每个要对其进行批量操作的 DIV 添加一个类。

```
<div id='fbNameS1' class='fancyboxMod doTipsyThing' />
<div id='fbNameS2' class='fancyboxMod doTipsyThing' />
<div id='fbNameS3' class='fancyboxMod doTipsyThing' /> 
```

然后你可以使用这样的短选择器来调整它们：

```
$('div.doTipsyThing').tipsy({fade: true}); 
```

这是一种更易于维护的方式来完成您正在尝试做的事情。

**更新：**
我更新了我的示例以展示如果您需要在这些元素上设置另一个类，您将如何执行此操作，因为您说它们需要 fancyboxMod。

# python - 从python中的方法引用文件

> ID：10671970
> 
> 赞同：-2
> 
> 时间：2012-05-20T08:32:57.503
> 
> 标签：python, tk

我需要一些帮助。我正在使用这种方法来帮助我打开带有对话框的文件：

```
from Tkinter import *
import tkFileDialog

fileOpen = Tk()
fileOpen.withdraw() #hiding tkinter window

file_path = tkFileDialog.askopenfilename(
title="Open file", filetypes=[("txt file",".txt"),("All files",".*")])

if file_path != "":
    print "you chose file with path:", file_path

else:
    print "you didn't open anything!"

print file_path 
```

它工作正常，并且文件是在 Python 中打开的，但我不知道如何对该文件进行进一步的命令，例如，如果我想读取它或在其上写入。
我曾尝试将其引用为 fileOpen，但这似乎不起作用，而且我不知道该变量将是什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-20T08:48:30.470

该文件根本没有打开。要打开它，请调用`open(file_path)`。这给了你一个你可以`read`从或`write`到的对象。请阅读 Python 教程中[关于文件 I/O 的部分](http://docs.python.org/tutorial/inputoutput.html#reading-and-writing-files)。

# python - 如何将文件加载为列表并将其放置在与其加载的类不同的类中

> ID：10671972
> 
> 赞同：0
> 
> 时间：2012-05-20T08:33:11.217
> 
> 标签：python, list, class, function, load

```
class Tasks(object):
    def __init__(self, container=None):
        if container is None:
            container = []
        self.container = container

    def add(self,name,date,priority):
        self.container.append([name,date,priority])

    def __str__(self):
        return str(self.container)

    def __repr__(self):
        return str(self.container)

    def __getitem__(self, key):
        return Tasks(self.container[key])

    def __len__(self):
        return len(self.container)

class management(Tasks):
    def save(self):
        outfile = open ("tasks.txt","w")
        outfile.write(("\n".join(map(lambda x: str(x), task))))

        print task
        outfile.close ()
    def load(self):
        load_file = open("tasks.txt","r")
        task = load_file.readlines()
        print task
        #this line is the attempt to convert back into the original format
        Tasks(add(task))

task = Tasks()        
if __name__== "__main__":

    p = management(Tasks)

    #task.add("birthday","27092012","high")
    #task.add("christmas","20062000","medium")
    #task.add("easter","26011992","low")
    print task

    #print len(task)
    #p.save()
    p.load()

    print "test",task
    print len(task) 
```

我的代码的最终目的是生成一个任务管理器（待办事项列表）

上面的代码生成一个 [name,date,priority] 列表，然后将其保存在一个名为 tasks.txt 的文本文件中 - 据我所知，这可以完美运行（只要我注释掉 p.load）。

然而......加载函数加载文件，但我需要能够打印它作为打印任务加载的列表，就像我在注释掉 p.load() 时所做的那样。

这将使我能够最终，删除，排序等任务

提前致谢

我为我不知道如何在第一行表达的糟糕问题道歉

**编辑：** 我考虑过酸洗可以保留列表格式，但我认为它不能解决我能够将参数传递回 Tasks() 类以便能够将它们打印为打印任务的问题

**编辑 2** 加载函数现在读取

```
 def load(self):
     with open("tasks.txt", "r") as load_file:
         tasks = [ast.literal_eval(ln) for ln in load_file]
     print tasks
     for t in tasks:
         todo.add(t) 
```

显然（或者至少我认为）我收到错误 NameError: global name 'todo' is not defined 我已经尝试使用 task.add(t) 并得到 TypeError: add() 需要 4 个参数（给定 2 个）

我也尝试使用 Tasks.add(t) 并得到错误 TypeError: unbound method add() must be called with Tasks instance as first argument (得到列表实例代替)

我显然不明白代码，你能解释一下吗，谢谢。

**编辑 3** while True: menu_choice = int(input("Select a number from the menu"))

```
try:
    if menu_choice == 1:

        task = raw_input ("task")
        date = raw_input ("date")
        priority = raw_input ("priority")
        tasks = Tasks([(task,date,priority)])
        print tasks

    elif menu_choice == 2:
        print tasks
    elif menu_choice == 3:
        tasks.save()
    elif menu_choice == 4:
        tasks.load()
except:
    print sys.exc_info() 
```

这每次都会重写任务而不是附加它，有什么想法吗？菜单选项 2,3,4 也不起作用，因为任务不是全局定义的，不知道如何解决这个问题？也许回来？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T08:41:26.250

假设您的名称、任务和优先级是简单的 Python 对象，您可以使用以下命令加载它们`ast.literal_eval`：

```
with open("tasks.txt", "r") as load_file:
    # no need for readlines, just loop over the file!
    tasks = [ast.literal_eval(ln) for ln in load_file] 
```

然后循环过来`tasks`把里面的对象放到一个`Tasks`对象里面。请注意，这是`Tasks(add(task))`行不通的。您需要有一个类型的对象`Tasks`，将其传递给`load`（我们称之为`todo`），然后执行

```
for t in tasks:
    todo.add(t) 
```

顺便说一句，你不需要`management`上课。两个独立的功能就可以了。[Python 不是 Java](http://dirtsimple.org/2004/12/python-is-not-java.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-20T09:34:51.963

尝试一种不同的、更 Pythonic 的方法。与其说是答案，不如说是另一种选择。编辑三次以考虑对新功能的许多请求。

```
import pickle

class TasksError(Exception):
    def __init__(self, value):
        self.value = value
    def __str__(self):
        return repr(self.value)

class Task(object):
    def __init__(self, task = () ):
        if task ==():
            raise TasksError('Empty task.')
        self.name = task[0]
        self.date = task[1]
        self.priority = task[2]

    def __str__(self):
        output = '''Name: %s
Date: %s
Priority: %s
''' % ( self.name,
        self.date,
        self.priority )
        return output

class Tasks(object):
    def __init__(self, container = []):
        self.container = [ Task(todo) for todo in container ]

    def find_by_priority(self, priority = 'high'):
        # example method to seek and print high priority tasks
        # using this example, you will be able to conduct many
        # types of searches
        results = [ task
                   for task in self.container
                   if task.priority == priority ]
        return results

    def sort_by_date(self):
        # example method of how to sort, again, many other
        # ways of sorting can be implemented, this is just
        # to demonstrate the principle
        # for more info on sorting,
        # visit:  http://wiki.python.org/moin/HowTo/Sorting
        self.container = sorted(self.container,
                                key=lambda task: task.date)

    def add(self, task):
        if task == '':
            raise TasksError('Empty task')
        self.container.append( Task(task) )

    def save(self):
        try:
            output = open('tasks.pkl', 'wb')
            pickle.dump(self.container, output)
            output.close()
        except:
            raise TasksError('Failed to save.')

    def load(self):
        try:
            pkl_file = open('tasks.pkl', 'rb')
            self.container = pickle.load(pkl_file)
            pkl_file.close()
        except:
            raise TasksError('Failed to load')

    def __str__(self):
        output = '\n'.join( [ str(todo) for todo in self.container ] )
        return output

if __name__== "__main__":
    divider = '-' * 30 + '\n'

    tasks = Tasks( [("birthday","20121111","high"),
                    ("christmas","20121225","medium"),
                    ("easter","20120405","low")] )
    print 'Three original tasks:\n'
    print tasks # prints out three tasks
    print divider

    tasks.add( ("new-task","20120320","high") )
    print 'Three original plus one new task:\n'
    print tasks # prints out four tasks
    print divider

    tasks.save() # pickles the task list and saves to disk

    tasks = Tasks( container = [] ) # creates a new, empty task list
    print 'Empty task list:\n'
    print tasks # prints out empty list
    print divider

    tasks.load() # loads the pickled list
    print 'The four pickled tasks, reloaded:\n'
    print tasks # prints out four tasks
    print divider

    while True:
        print divider, '''Make your selection:
1\. Add new task
2\. Print all tasks
3\. Save tasks
4\. Load tasks from disk
5\. Find high priority tasks
6\. Sort by date
<ENTER> to quit
'''
        try:
            menu_choice = int(input("Select a number from the menu: "))
        except:
            print 'Goodbye!'
            break

        if menu_choice == 1:
            # note: no error checking here
            # even an empty input is accepted
            task = raw_input (">>> Task: ")
            date = raw_input (">>> Date as string YYYYMMDD: ")
            priority = raw_input (">>> Priority: ")
            todo = (task, date, priority)
            # note that here you should add a task
            # your method created a NEW task list
            # and replaced the old one
            tasks.add( todo )
            print tasks
        elif menu_choice == 2:
            print divider, 'Printing all tasks'
            print tasks
        elif menu_choice == 3:
            print divider, 'Saving all tasks'
            tasks.save()
        elif menu_choice == 4:
            print divider, 'Loading tasks from disk'
            tasks.load()
        elif menu_choice == 5:
            print divider, 'Finding tasks by priority'
            results = tasks.find_by_priority(priority='high')
            for result in results: print result
        elif menu_choice == 6:
            print divider, 'Sorting by date'
            tasks.sort_by_date()
            print tasks 
```

重要说明：这是作为练习生成的代码，用于演示您正在寻求实现的许多功能，并展示正确使用面向对象设计如何允许您封装每个任务和任务列表并轻松操作它们。它还演示了使用 pickle 作为您在原始问题中使用的文本文件实现的 Pythonic 替代方案。它还演示了按字段搜索和排序，实现了两个简单的方法。

如果你对这个项目很认真，你需要看看一个合适的数据库，比如[SQLite](http://docs.python.org/library/sqlite3.html)，它允许人们搜索、排序、更新、添加和删除记录的功能比你手动可靠地实现的要多。

# javascript - 从命令行执行 HTML Javascript

> ID：10671978
> 
> 赞同：3
> 
> 时间：2012-05-20T08:34:14.150
> 
> 标签：javascript, jquery, html, web-scraping

我有许多网页试图解析使用 curl 获得的信息。每个页面都使用 JQuery 在浏览器中加载文档时转换其内容（使用 document.ready 函数） - 主要设置 div 的类/ID。一旦加载了 Javascript 函数，这些信息就更容易解析。

我有哪些选择（最好是从命令行）执行页面的 Javascript 内容并转储转换后的 HTML？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-20T09:35:08.350

要抓取动态网页，请不要使用 curl 等静态下载工具。

如果您想抓取动态网页，请使用可以通过编程语言控制的无头网络浏览器。最流行的工具是 Selenium

[http://code.google.com/p/selenium/](http://code.google.com/p/selenium/)

使用 Selenium，您可以将修改后的 DOM 树作为 HTML 从浏览器中导出。

一个示例用例：

[https://stackoverflow.com/a/10053589/315168](https://stackoverflow.com/a/10053589/315168)

# python - 如何对 Python 中的模块级对象进行更改？（如 Pylons 元对象）

> ID：10671981
> 
> 赞同：2
> 
> 时间：2012-05-20T08:35:14.743
> 
> 标签：python, sqlalchemy, pylons

我正在开发一个使用 SQLAlchemy 进行数据库访问的 Python 服务器应用程序。我想在 meta.py 模块中有引擎、会话和元数据对象，这些对象在整个程序中用于访问数据库（如 Pylons 约定）。

引擎和会话对象`None`在 meta.py 模块中初始化，然后在其他模块中实际分配实际值。例如

`model/meta.py`：

```
engine = None
Session = None
metadata = Metadata() 
```

`model/__init__.py`：

```
from simplesite.model import meta

def init_model():
    # ...
    sm = orm.sessionmaker(...)
    meta.Session = orm.scoped_session(sm) 
```

问题是当我导入并`init_model()`在另一个模块中运行时，然后从 meta.py 导入 Session，它仍然设置为 None。IE

```
from model.meta import Session
from model import init_model

init_model()
# Session is still None! 
```

有人可以告诉我为什么会这样和/或它在 Pylons 应用程序中是如何工作的吗？我猜答案将是关于 Python 如何工作的更基本的东西？

关于如何在整个应用程序中拥有单点数据库访问的替代建议也将受到赞赏（即在大型应用程序中使用 SQLAlchemy 的最佳实践）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T06:36:32.570

我正在回答这个问题，因为它看起来只是坐在这里，尽管@katrielalex 在评论中给出了答案。

当您这样做时`from model.meta import Session`，您将创建一个名为的新局部变量`Session`，该变量绑定到该模块中的对象。运行时`init_model()`，它会重新绑定`meta`模块内的名称，但这不会影响您的局部变量。

您可以通过在完成工作`meta.Session`后才访问来达到您想要的效果：`init_model()`

```
from model import meta
from model import init_model
init_model()
Session = meta.Session 
```

# iphone - 如何减少 OHAttributedLabel 和 drawTextInRect 的内存使用

> ID：10671985
> 
> 赞同：2
> 
> 时间：2012-05-20T08:35:49.167
> 
> 标签：iphone, objective-c, ios, ipad, uilabel

我在我的自定义 UITableViewCell 中使用 OHAttributedLabel 并尝试分析应用程序，因为该应用程序似乎像理智一样使用内存。所以这就是我发现的：

![在此处输入图像描述](../Images/99e92fdedc0484cd5a105aed272eb225.png)

关于如何减少这种内存消耗的任何想法？同样在库中，它有一种计算文本高度的方法，但由于某种原因，它是基于仪器的最重的堆栈跟踪之一：

![在此处输入图像描述](../Images/5efc6cd841ecdd3e2d223e7abdfb1876.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-20T11:18:22.577

我猜这只是因为正在创建他的绘图上下文，尝试减小标签大小并且您应该看到较低的内存，无论如何在绘图操作之后上下文应该被释放并成为全层内存的一部分。我的意思是构建表格视图后的整体应用程序内存分配是多少？

# java - 尝试使用 eclipse 将文件推送到 android 设备时出现问题

> ID：10671987
> 
> 赞同：2
> 
> 时间：2012-05-20T08:35:56.730
> 
> 标签：java, android, eclipse, ddms

我目前正在`Samsung Galaxy S2 i1900G`尝试测试我的应用程序，但显然我需要推送一个数据库文件才能让我的应用程序连接到它并工作。但似乎每次我尝试将文件推送到设备中时都会出错。

这是我不断收到的错误

```
[2012-05-20 16:16:26 - ddms] transfer error: Read-only file system
[2012-05-20 16:16:56] Failed to push selection: Read-only file system 
```

我似乎无法弄清楚问题是什么。如果我要root我的手机会有什么不同吗？现在是否可以植根三星 Galaxy S2 i1900G 型号？希望你们能帮帮我。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-29T15:42:47.750

这是解决方案

1.  打开 Android 虚拟设备管理器
2.  选择你的模拟器
3.  编辑你的模拟器
4.  必须指定 SD 卡的大小 1024MB
5.  在硬件选项中单击新设置属性添加 sd 卡支持：是（值）
6.  启动你的模拟器，在 Eclipse 窗口-->showview-->other->android-->file explorer
7.  -> 在文件资源管理器中打开 mnt->sdcard 并使用 pushfile 按钮插入文件和图像
8.  完毕

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-20T08:44:29.930

您可以尝试`adb shell mount -o remount,rw /data`重新挂载 /data 为 rw

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-20T08:42:33.383

如果您的应用程序需要访问数据库，则无需将其复制到手机上。无论如何，如果您要启动手机并强制启动，这种类型的应用程序只能在您的特定手机上运行。

此处的这篇文章 - [http://www.vogella.com/articles/AndroidSQLite/article.html](http://www.vogella.com/articles/AndroidSQLite/article.html) - 解释了如何在 Android 应用程序中使用 SQLite 数据库。如果数据库尚不存在，您应该只使用内置 API 从您的应用程序创建数据库。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-20T09:02:13.627

这可能是因为您的设备以 USB 存储模式连接，这意味着您的 SD 卡已安装...您必须以不同的模式连接设备才能使 adb 能够推送文件

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-04T19:06:04.793

即使它正在工作，您也无法推送到所有目录，并且当您不这样做时，您可能看起来有问题。

在 DDMS Perspective ，文件资源管理器选项卡中选择 sdcard 目录并尝试推送 - 它应该去 - 你只能推送到 rw 目录，有些是只读的。如果你能做到这一点，那么你只需要确保你使用的目录是 rw - 它显示在同一视图的权限选项卡中。

# c# - 如何使用给定值填充 MVC 中的下拉列表

> ID：10671990
> 
> 赞同：0
> 
> 时间：2012-05-20T08:36:32.663
> 
> 标签：c#, asp.net-mvc, drop-down-menu

我有一个视图模型，该模型具有指向另一个模型的外键，基于此，我想创建一个 dropDownList，它将向我显示所选值的名称，并为我提供所有其他选项，以便我可以将其更改为我想要的任何内容。这是我的创建表单：

```
@using (Html.BeginForm()) {
@Html.ValidationSummary(true, "Failed creating the feed")
<fieldset>
    <legend>FeedViewModel</legend>

    <div class="editor-label">
        @Html.HiddenFor(model => model.FeedId)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.LinkUrl)
    </div>
    <div class="editor-field">
        @Html.EditorFor(model => model.LinkUrl)
        @Html.ValidationMessageFor(model => model.LinkUrl)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.FolderId)
    </div>
    <div class="editor-field">

    </div>

    <p>
        <input type="submit" value="Create" />
    </p>
</fieldset> 
```

我想在 Last div 处创建 dropDownList，我已经有了模型中的值。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T08:49:04.450

您应该使用 Html.DropDownListFor 扩展方法：

```
@Html.DropDownListFor(m => m.ImageId, new SelectListItem[] {
            new SelectListItem {
                Selected = true,
                Text = "Text 1",
                Value = "Fileld Value 1"
            },
            new SelectListItem {
                Selected = false,
                Text = "Text 2",
                Value = "Fileld Value 2"
            }
        }); 
```

当然，第二个参数 IEnumerable 可以从数据库中填充，而不是硬编码。

# sencha-touch-2 - 如何定义和发送变量？

> ID：10671993
> 
> 赞同：2
> 
> 时间：2012-05-20T08:37:09.543
> 
> 标签：sencha-touch-2

我是 Sencha Touch 2 的新手，我在使用 drupal、json 等时遇到问题......

这很简单，但我无法解决问题。

我有一个由 json 完成的列表。这个 json 来自 json 格式的 Drupal7 视图。

在我看来，我有这样的事情：

```
var listaArtistas = {
        xtype: 'list',
        title: 'Artistas',
        height: 240,
        store: {
            autoLoad: true,
            fields: ['node'],
            proxy: {
                type: 'ajax',
                url: 'http://localhost/json-artistas',

                reader: {
                    type: 'json',
                    rootProperty: 'nodes'
                }
            }
        },
        listeners: {
            itemtap: function(lista,index,target,record,e,eOpts)
            {

                var artistDetail = new Ext.create('app.view.ArtistDetail');

                panelHomeNav.push(artistDetail);

            }
        },

        itemTpl: tpl

        }; 
```

这段代码对我有用。并与艺术家一起完成清单。

现在我单击艺术家并转到另一个视图（artistDetail）。但是要正确地显示这个包含艺术家详细信息的列表，需要我之前点击过的艺术家的 ID。

我在artistDetail 中需要这样的东西.... url: 'http://localhost/json-artistasDetail'+NID，其中NID 是之前在列表中的艺术家的ID。

我不知道如何在 Sencha 的 2 个视图之间传递这个参数

感谢您的帮助...或阅读：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-20T18:52:24.607

有很多选项是可能的，这里是一个：创建详细视图后，您可以设置一个专用属性，例如：

```
var artistDetail = new Ext.create('app.view.ArtistDetail');
artistDetail.setArtistID(artistID);
panelHomeNav.push(artistDetail); 
```

# c++ - 将 %s 格式说明符与 boost::format 和 std::string 一起使用

> ID：10671996
> 
> 赞同：7
> 
> 时间：2012-05-20T08:37:41.797
> 
> 标签：c++, boost, boost-format

我知道使用`%s`格式说明符，`std::string`这样会导致未定义的行为：

```
std::string myString = "test";
printf("%s", myString); 
```

**`std::string`但是使用相同的说明符和 a with是否可以节省`boost::format`？**

```
#include <boost/format.hpp>

int main() 
{
   std::string myString = "test";

   boost::format fmt("%s");
   fmt % myString;

   std::cout << fmt.str();

   return 0;
} 
```

`%s`指定一个 (const) `char*`，但我提供一个`std::string`. 这也会导致UB吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-20T08:48:36.580

`%s`与`boost::format`和一起使用是安全的`std::string`。与 相比`printf`，格式字符串中的类型字符“不会将相关参数强制为一组受限制的类型，而只是设置与此类型规范相关联的标志。”

[http://www.boost.org/doc/libs/1_49_0/libs/format/doc/format.html#printf_directives](http://www.boost.org/doc/libs/1_49_0/libs/format/doc/format.html#printf_directives)