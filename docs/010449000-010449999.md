# StackOverflow 问答 10449000-10449999

# url - Localized URLs in Play 2.0?

> ID：10449006
> 
> 赞同：5
> 
> 时间：2012-05-04T12:41:41.417
> 
> 标签：url, seo, playframework-2.0

Yesterday we had a Play 2.0 presentation at our local [JUG](http://www.finjug.org) but we couldn't figure out whether it is possible to have localized URLs (for SEO purposes).

For example /help, /hilfe etc should point to the same controller but the template should be rendered with different language content.

Is there any way to do this in Play 2.0?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T13:14:47.443

我喜欢你的问题，因为它至少对我来说很有创意:) 检查这种方法对我有用：

**`conf/routes`**：

```
GET     /help     controllers.Application.helpIndex(lang = "en")
GET     /hilfe    controllers.Application.helpIndex(lang = "de")

GET     /help/:id     controllers.Application.helpTopic(lang = "en", id: Long)
GET     /hilfe/:id    controllers.Application.helpTopic(lang = "de", id: Long) 
```

**`controllers/Application.java`**：

```
public static Result helpIndex(String lang) {
    return ok("Display help's index in " + lang.toUpperCase());
}

public static Result helpTopic(String lang, Long id) {
    return ok("Display details of help topic no " + id + " in " + lang.toUpperCase());
} 
```

**`views/someView.scala.html`**：

```
<a href="@routes.Application.helpIndex("en")">Help index</a><br/>
<a href="@routes.Application.helpIndex("de")">Hilfe index</a><br/>

<a href="@routes.Application.helpTopic("en", 12)">Help topic no 12</a><br/>
<a href="@routes.Application.helpTopic("de", 12)">Hilfe topic no 12</a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T10:25:42.333

您使用[GlobalSettings.onHandlerNotFound()](http://www.playframework.org/documentation/api/2.0.1/java/play/GlobalSettings.html#onHandlerNotFound%28java.lang.String%29)并检查是否是 url 的翻译版本。然后，您可以进行重定向。但是，这以默认语言的 url 结尾。

更简洁的是使用[GlobalSettings.onRouteRequest](http://www.playframework.org/documentation/api/2.0.1/java/play/GlobalSettings.html#onRouteRequest%28play.api.mvc.RequestHeader%29)，您可以在其中实现自己的逻辑来获取处理程序。

此外，您可以创建自己的路由器。[在google-groups](https://groups.google.com/d/topic/play-framework/3_qIOPB4Z_I/discussion)有一个关于它的讨论，带有一个[scala 解决方案](https://gist.github.com/1866044)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T14:52:08.123

（这与[以前的答案](https://stackoverflow.com/a/10449571/1066240)不同，因此作为单独的方法添加）

`mapping table`您还可以在 DB 中创建某种类型，您可以在其中存储具有不同参数的记录的完整路径：

```
urlpath              record_id    lang
/help/some-topic     12           en
/hilfe/ein-topic     12           de 
```

比在`conf/routes`文件中您需要使用允许您使用的规则`Dynamic parts spanning several /`（请参阅[路由文档](http://www.playframework.org/documentation/2.0/JavaRouting)）即：

```
GET    /:topic    controller.Application.customDbRouter(topic:String) 
```

如果没有“静态”规则可用，您还可以将标准路由机制与自定义路由机制混合在一起，如果没有可用的“静态”规则，则将上述规则放在`conf/routes`文件末尾，然后它将尝试在映射表中找到它或返回`notFound()`结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T13:21:57.847

据我所知，在 Play 1.2.x 中是可能的，而不是在 2.x 中。我的意思是，如果不复制文件中的映射、为 EN 添加一个、为 DE 添加一个等，这是不可能的。

一个更简单的 SEO 替代方案可能是“伪造”站点地图文件中的网址。

所以你的 Routes 文件有

```
GET  /action/:param/:seo-string   Controller.methodAction(param) 
```

so`seo-string`将在处理过程中被忽略，并且您会在站点地图文件中生成多个链接：

```
/action/1/english-text
/action/1/german-text 
```

这将设置搜索引擎。对于用户，他们可以看到正确语言的 URL，您可以使用 HTML 5 历史记录更改 URL。

这是额外的工作，但如果你真的想要它...

# iphone - Sample Xcode IOS project for Poppler

> ID：10449009
> 
> 赞同：2
> 
> 时间：2012-05-04T12:42:08.297
> 
> 标签：iphone, ios, ipad, pdf, poppler

I want to test Poppler in my IOS project for Pdf view and rendering. Is there any sample Xcode project that uses Poppler or any step by step guidelines for this? I want to use it for iPad.

# c# - 如何实现策略模式？

> ID：10449013
> 
> 赞同：3
> 
> 时间：2012-05-04T12:42:22.743
> 
> 标签：c#, strategy-pattern

我有两种类似的方法来解析行。第一种方法

```
 public IList<LasLine> GetLasLines(string section)
        {
            var lasLines = new List<LasLine>();
            bool startParse = false; // Секція знайдена і почати парсити її
            foreach(var line in _lines)
            {
                if(GetSectionName(line).Equals(section) && !startParse)
                {
                    startParse = true;
                }
                else
                {
                    if(IsCommentLine(line)) continue; 
                    if(IsBeginSection(line)) break; 
                    LasLine lasLine;
                    if(!TryParseLasLine(line, out lasLine)) continue; 
                    lasLines.Add(lasLine); 
                }
            }
            return lasLines;
        } 
```

第二个

```
public IList<AsciiLogDataLine> GetAsciiLogData()
{
var asciiLogData = new List<AsciiLogDataLine>();
bool startParse = false; 
foreach(var line in _lines)
{
if(GetSectionName(line).Equals(LasSectionName.ASCIISection) && !startParse)
{
startParse = true;
}
else
{
    if(IsCommentLine(line)) continue; 
    AsciiLogDataLine asciiLogDataLine;
    if(!TryParseAsciiLogDataLine(line, out asciiLogDataLine)) continue;                         asciiLogData.Add(asciiLogDataLine);          
              }
    }
    return asciiLogData;
    } 
```

是否有可能实现这种模式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T13:25:48.527

我认为，您可以为此 Line Classes 创建通用合同（接口），并使用例如通用方法。

```
IEnumerable<IDataLine> GetLines<T>(Func<object> parseFunction)
{
   ...
   var dataLine = parseFunction(line);
   if (dataLine == null)
   {
       continue;
   }
   ...
} 
```

或者您可以创建 IParser 并将其注入方法中

```
IEnumerable<IDataLine> GetLines<T>(IParser parser)
{
   ...
   if (!parser.CanParse(line))
   {
        continue;
   }
   var dataLine = parser.Parse(line);
   ...
} 
```

最后一个示例更类似于策略模式。

# java - 发送前编辑 HTML 响应

> ID：10449016
> 
> 赞同：1
> 
> 时间：2012-05-04T12:42:32.110
> 
> 标签：java, http, response

我有一个 Web 服务，它将接收一个请求，在 java 中执行一个操作，然后作为标准返回一个响应。

然而，期望响应的客户端期望 HTTP 响应在消息末尾附加两个字符（任何，没关系，目前只是 \n\n，并且出于我不知道的原因 - 这是遗留代码），在标题和正文之外。

目前它是通过首先将 HTTP 消息发送到代理来完成的，该代理附加字符并转发消息，但是有没有人知道在不需要代理的情况下可以在 java 中完成此操作的方法？

即 - 我可以访问完整的 HTML 响应以在发送之前对其进行编辑吗？

编辑：客户端不是浏览器，而是发送 SOAP 消息的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T12:57:45.620

假设这是按照 servlet 规范作为网络服务器运行的，您可以使用过滤器。

```
import java.io.IOException;

import javax.servlet.Filter;
import javax.servlet.FilterChain;
import javax.servlet.FilterConfig;
import javax.servlet.ServletException;
import javax.servlet.ServletRequest;
import javax.servlet.ServletResponse;
import javax.servlet.annotation.WebFilter;
import javax.servlet.http.HttpServletResponse;

@WebFilter(asyncSupported = true, filterName = "LegacyAppender", urlPatterns = { "/paths/tofile" })
public class AppendFilter implements Filter {

    @Override
    public void destroy() {

    }

    @Override
    public void doFilter(ServletRequest req, ServletResponse resp, FilterChain chain) throws IOException, ServletException {
        chain.doFilter(req, resp);
        HttpServletResponse hsr = (HttpServletResponse) resp;
        hsr.getWriter().print("\r\n");
    }

    @Override
    public void init(FilterConfig arg0) throws ServletException {

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T09:22:39.653

我们最终使用了 apache-cxf 拦截器，因为我们最终只需要完整的 SOAP 消息。通过添加将 SoapMessage 内容转换为字符串、添加两个字符并再次设置内容的传出拦截器，我们的问题得到了解决。

不管怎么说，还是要谢谢你！

# iphone - iOS 应用程序在 iOS 5 中处于后台时可以接收摇动手势吗？

> ID：10449019
> 
> 赞同：0
> 
> 时间：2012-05-04T12:42:44.197
> 
> 标签：iphone, ios, ipad

我必须[链接](https://stackoverflow.com/questions/5858792/how-to-detect-shake-gesture-while-application-in-background)它说它不能在 iOS 4 中完成。现在已经一年了，所以这些限制仍然适用于 iOS 5？可以在 iOS 5 中完成吗？任何替代方法可以做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T12:43:52.210

不，还是做不到。后台的应用程序不会收到来自用户的任何事件。唯一的例外是播放音乐的应用程序，并且可以从播放/暂停、下一个、上一个按钮获取事件。

# gwt - datePicker in GWT

> ID：10449021
> 
> 赞同：1
> 
> 时间：2012-05-04T12:42:47.687
> 
> 标签：gwt, datepicker, gwt2, uibinder

Hi have **Date in a string Format.**

*datevalue= [Tue Mar 06 06:00:00 CET 2012].*

in my code i have `textBox` where value is set. when i click on `textbox` i see a `datepicker`.

what i want to do is , In a `datepicker` the `date` should be highlighted whatever the value is in `textbox`.

and also when i click `datePicker` the value in the text should be in a **same format** as **[Tue Mar 06 06:00:00 CET 2012].**

my code is.

```
private TextBox getTimeLable(String datevalue) {
        // TODO Auto-generated method stub
        System.out.println("date" + datevalue);
        final TextBox   timebx =new TextBox();
        timebx.setReadOnly(true);
        timebx.setText(datevalue);
        final PopupPanel popupPanel=new PopupPanel(true);
        DatePicker datePicker=new DatePicker();
        datePicker.addValueChangeHandler(new ValueChangeHandler<Date>() {

            public void onValueChange(ValueChangeEvent<Date> event) {
                // TODO Auto-generated method stub

                Date date=event.getValue();
                timebx.setText(DateTimeFormat.getFormat("yyyy-MM-dd").format(date));
                popupPanel.hide();
            }
        });
        popupPanel.setWidget(datePicker);
        timebx.addClickHandler(new ClickHandler() {

            public void onClick(ClickEvent event) {
                // TODO Auto-generated method stub
                int x=timebx.getAbsoluteLeft();
                int y=timebx.getAbsoluteTop();
                popupPanel.setPopupPosition(x, y+20);
                popupPanel.show();
            }
        });

        return timebx;
    } 
```

* * *

edited for error

```
errorjava.lang.IllegalArgumentException: [Tue Mar 06 05:00:00 UTC 2012]

errorjava.lang.IllegalArgumentException: [Wed May 09 12:00:00 UTC+2 2012] 
```

Initially the textbox is with this value [Tue Mar 06 05:00:00 UTC 2012] . but when i click on text box n select the date . date picker gives the second date in textbox Wed May 09 12:00:00 UTC+2 2012\. The first one may be illegalArgument as it is set by me. but the second one is set by the date picker.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T05:59:39.497

这应该工作

```
import com.google.gwt.i18n.client.DateTimeFormat; 

DatePicker datePicker=new DatePicker();  // Have to make final to use in inner method

timebx.addClickHandler(new ClickHandler() {

        public void onClick(ClickEvent event) {
            // TODO Auto-generated method stub
            String strDate = timebx.getText();
            DateTimeFormat format = DateTimeFormat.getFormat("yyyy-MM-dd");
            try {  
              Date selDate = (Date)format.parse(strDate); 
              datePicker.setValue(selDate, true);
            } catch(Exception pe){
             // setting current date
             datePicker.setValue(new Date(), true);
            }

            int x=timebx.getAbsoluteLeft();
            int y=timebx.getAbsoluteTop();
            popupPanel.setPopupPosition(x, y+20);
            popupPanel.show();
        }
    }); 
```

# java - Watij 的 JxBrowser OS X / Java 1.6_64 不兼容？

> ID：10449023
> 
> 赞同：0
> 
> 时间：2012-05-04T12:43:02.040
> 
> 标签：java, macos, 64-bit, watij, jxbrowser

我尝试在我的 OS X 10.6 系统上安装和使用[Watij （Java 中的 Web 应用程序测试）。](http://watij.com/)

但是，在尝试运行示例测试时，出现以下异常：

```
Exception in thread "main" java.lang.RuntimeException: java.lang.Error:
JxBrowser library doesn't support current operation system:

OS: Mac OS X
OS architecture: x86_64
Java vendor: Apple Inc.
Java version: 1.6.0_31
Execution data model: 64-bit

    at com.teamdev.awtinteraction.a.b(Unknown Source)
    at com.teamdev.xpcom.MacXPCOMMessageLoopThread.invokeAndWait(Unknown Source)
    at com.teamdev.xpcom.MacXPCOMMessageLoopThread.<init>(Unknown Source)
    [stack trace continues] 
```

怀疑是 64 位问题，我使用 Java 首选项应用程序将 JVM 切换为默认为 32 位执行。但是，错误消息是完全相同的。

有没有人想到解决这个问题的方法，或者通过确保选择 32 位 JVM，或者通过知道哪个其他环境元素可以消除不兼容性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T01:05:39.913

尝试将 -d32 添加到您的 VM 参数中。

# html - 让左右浮动重叠而不是堆栈

> ID：10449031
> 
> 赞同：12
> 
> 时间：2012-05-04T12:43:34.317
> 
> 标签：html, css, layout, css-float

这比解释更容易显示：http: [//jsfiddle.net/gN4VZ/](http://jsfiddle.net/gN4VZ/)

![在此处输入图像描述](../Images/3ae9c8a95fcb67f66b76d0759b694af5.png)

当两者结合超过容器宽度时，是否可以让我的右浮动内容（蓝色）与我的左浮动内容（红色）重叠而不是堆栈？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-04T12:47:41.683

您可以使用[绝对定位](http://www.w3.org/TR/CSS2/visuren.html#absolute-positioning)。

*代替*

```
float: right 
```

*采用：*

```
position: absolute;
right: 0; 
```

*而不是*

```
float: left 
```

*采用：*

```
position: absolute;
left: 0; 
```

请务必`position: relative;`在您的 parent上设置，`div`以便绝对定位相对于它们各自的容器而不是页面。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T12:48:38.963

使用绝对定位并将`.box`类设置为`position:relative`.

[http://jsfiddle.net/gN4VZ/1/](http://jsfiddle.net/gN4VZ/1/)

请注意，我必须在每个上设置一个高度，`.box`以便它不会重叠顶部/底部。

你的新 CSS 将是

```
.bar {
    border:solid 1px black;
    color:white;
    position:relative;
    height:40px;
}
.clear {
    clear:both;
}
.left-bar {
    background:red;
    height:40px;
    position:absolute;
    left:0;
}
.right-bar {
    background:blue;
    position:absolute;
    right:0;
    height:40px;
}​ 
```

* * *

正如 My Head Hurts 所建议的那样，您可以只放置正确的位置，这样就不需要外部 div 的高度。

[http://jsfiddle.net/gN4VZ/2/](http://jsfiddle.net/gN4VZ/2/)

# mysql - 两个同时插入

> ID：10449035
> 
> 赞同：2
> 
> 时间：2012-05-04T12:43:53.443
> 
> 标签：mysql, myisam

如果我要插入 1000 行（需要 20 秒，但只有一个查询）会发生什么。2 秒后，其他人试图在同一位置插入一行，例如

```
20secondquery
1|yellow
2|blue
3|green
4|violet

2secondquery
4|blue 
```

他们的行会被插入还是会排队直到我的插入完成？(MyISAM)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T12:53:30.783

MyISAM 使用表级锁定。另一个插入必须等待

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T12:45:50.623

取决于您使用的是哪种事务和/或锁定。

如果有人发出一个大的 INSERT 语句，那将作为一个操作自动完成。如果他们向一大堆 INSERTS 发送垃圾邮件，那么第二个查询将介于两者之间。

你需要研究[表锁定](http://dev.mysql.com/doc/refman/5.0/en/lock-tables.html)来控制这种事情。

```
LOCK TABLES widgets WRITE;
INSERT INTO widgets (name) VALUES ('Widget A');
INSERT INTO widgets (name) VALUES ('Widget B');
INSERT INTO widgets (name) VALUES ('Widget C');
INSERT INTO widgets (name) VALUES ('Widget D');
INSERT INTO widgets (name) VALUES ('Widget E');
UNLOCK TABLES; 
```

在 和之间的时间里`LOCK TABLES`，`UNLOCK TABLES`没有其他东西将能够读取或写入表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T12:47:37.357

简短的回答是：这取决于:)

这取决于您的 MySQL 服务器配置（`concurrent_insert`例如的值）以及您为插入数据而运行的查询。

[MyISAM 的并发插入文档](http://dev.mysql.com/doc/refman/5.0/en/concurrent-inserts.html)

# javascript - Sending attachment via Web Service using java script

> ID：10449037
> 
> 赞同：0
> 
> 时间：2012-05-04T12:43:55.990
> 
> 标签：javascript, web-services, lotus-domino

I want to attach PDF file to Domino/Notes document using Web service. Currently i have done saving the Notes document by web service using java script. The problem is the sending PDF file to domino server.

How to achieve this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T21:38:22.143

您需要发送附件 base64 编码，由 lsxsd.lss 文件中定义的 XSD_BASE64BINARY 类提供。有关如何处理附件的示例，请参阅[IBM Lotus Domino 7 中的实用 Web 服务：编写复杂的 Web 服务。](http://www.ibm.com/developerworks/lotus/library/web-services3/#N102C6)

# sql - 在 SQL Server 中作为一个数据库访问各种数据库

> ID：10449040
> 
> 赞同：1
> 
> 时间：2012-05-04T12:44:20.933
> 
> 标签：sql, sql-server, database, database-security

我在 SQL Server 中有两个不同的数据库，比如说 db1 和 db2，我需要在它们之间连接数据，但是使用我的应用程序只能访问 db1。

所以，我想到了两种可能性：第一种是在 db 1 中创建一个从 db 2 读取数据的视图。第二种是创建某种逻辑或虚拟数据库，一种 db3，这样我就可以访问 db1 和db2 到 db3。可能吗？

打开其他建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T12:51:43.413

该视图是一个不错的选择，我认为不需要“虚拟”数据库。使用 KISS 原则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T12:50:19.680

“逻辑或虚拟数据库”？没必要。假设数据库在同一台服务器上，视图甚至像 select * from db2.dbo.table 这样的直接选择都可以解决问题

如果不是，您需要在 DB1 上创建一个指向 DB2 的链接服务器

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T12:51:05.233

是的，创建一个存储过程并执行“联合/加入”SQL 查询。

在“from”子句中的 SQL Query 中，您需要编写“from [DatabaseName].[Schema].[Table]”

您需要在应用程序可以访问的数据库中托管存储过程。

# javascript - 如何从以下类型的 json 中读取颜色？

> ID：10449041
> 
> 赞同：-1
> 
> 时间：2012-05-04T12:44:22.180
> 
> 标签：javascript, json

```
{
  "events": [
    [
      1,
      "arun Thakur",
      "04/30/2012 00:00",
      "04/30/2012 00:00",
      1,
      0,
      0,
      "11",
      1,
      "New Delhi",
      ""
    ],
    [
      3,
      "ryurts",
      "05/02/2012 01:30",
      "05/02/2012 04:30",
      0,
      0,
      0,
      "blue",
      1,
      "",
      ""
    ],
    [
      7,
      "Sandeep Singh",
      "05/01/2012 00:00",
      "05/01/2012 01:30",
      0,
      0,
      0,
      "blue",
      1,
      "sadasdasfdg",
      ""
    ],
    [
      9,
      "sadasdsdsa",
      "05/02/2012 00:00",
      "05/02/2012 00:00",
      1,
      0,
      0,
      "yellow",
      1,
      "",
      ""
    ],
    [
      11,
      "Hello World",
      "04/30/2012 00:00",
      "04/30/2012 00:00",
      1,
      0,
      0,
      "",
      1,
      "",
      ""
    ]
  ],
  "issort": true,
  "start": "04/30/2012 00:00",
  "end": "05/06/2012 23:59",
  "error": null
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T14:42:51.277

其中一些项目没有颜色，并且数据结构很差，但这似乎是您想要的：

```
var json = <your data here>;

for(var i = 0; i < json.events.length; i++) {
    var item = json.events[i];
    console.log(item[7]);
} 
```

我只是将颜色打印到控制台。大概你会在那里放一些更有用的代码。

# android - 更改 TextView 的值

> ID：10449045
> 
> 赞同：0
> 
> 时间：2012-05-04T12:44:30.657
> 
> 标签：android, textview

我正在创建一个应用程序，该应用程序在每个活动的顶部都有标题，到目前为止我一直在这样做：

为每个页面创建一个 header.xml。但我认为必须有更有效的方法。
我可以有一个常量 header.xml，然后在我的 onCreate 方法中更改文本的值。

这是我到目前为止一直在做的事情：

选择活动，

使用布局chooseact.xml

```
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@color/white">

   <include layout="@layout/selectheader" />
   <include layout="@layout/redcell" />

   <ListView
    android:id="@android:id/list"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
   />

</TableLayout> 
```

里面有一个 header.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="match_parent"
        android:layout_height="60dp"
        android:src="@drawable/headerrect" />

    <TextView
        android:layout_width="match_parent"
        android:layout_height="60dp"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:gravity="center"
        android:text="@string/leagues"
        android:textColor="@color/white"
        android:textSize="25dp"
        android:textStyle="bold"/>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T12:52:28.173

给 header.xml 中的 TextView 一个 id，就像对 ImageView 所做的那样。然后在每个 Activity 的 onCreate() 方法中可以设置文本。

```
TextView headerText = (TextView) findById(R.id.header_text);
headerText.setText("The text that should show up"); 
```

header.xml 与 TextView 使用 id 属性：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="match_parent"
        android:layout_height="60dp"
        android:src="@drawable/headerrect" />

    <TextView
        android:id="@+id/header_text"
        android:layout_width="match_parent"
        android:layout_height="60dp"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:gravity="center"
        android:text="@string/leagues"
        android:textColor="@color/white"
        android:textSize="25dp"
        android:textStyle="bold"/>

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T12:56:10.353

[这个答案](https://stackoverflow.com/questions/7831044/how-do-i-create-a-header-or-footer-button-bar-for-my-android-application/7831387#7831387)可以是另一种使用方法..您不需要在所有 xml 中添加标题..并且不需要在每个活动中制作标题文本视图。

# r - 安装包时遇到问题：ecogbm

> ID：10449048
> 
> 赞同：0
> 
> 时间：2012-05-04T12:44:38.933
> 
> 标签：r

我从这里下载了一个包：

[生态gbm](http://www.stanford.edu/~hastie/Papers/Ecology/ecogbm_1.01.tar.gz)

我试着像这样安装它：

```
setwd("d:/RStuff")
install.packages("ecogbm_1.01.tar.gz", repos = NULL, type="source") 
```

不幸的是，我得到了这个：

```
Installing package(s) into ‘C:/Users/Bla/Documents/R/win-library/2.15’
(as ‘lib’ is unspecified)
* installing *source* package 'ecogbm' ...
** Creating default NAMESPACE file
** libs

*** arch - i386
ERROR: compilation failed for package 'ecogbm'
* removing 'C:/Users/Bla/Documents/R/win-library/2.15/ecogbm'
Warning messages:
1: running command 'C:/PROGRA~1/R/R-215~1.0/bin/x64/R CMD INSTALL -l         "C:/Users/Bla/Documents/R/win-library/2.15"   "ecogbm_1.01.tar.gz"' had status 1 
2: In install.packages("ecogbm_1.01.tar.gz", type = "source", repos = NULL) :
   installation of package ‘ecogbm_1.01.tar.gz’ had non-zero exit status` 
```

我不确定这是否`i386`意味着什么。我运行 64 位 R 版本。我的安装过程是否有缺陷，或者有人可以验证这个包有问题吗？还有其他方法可以安装吗？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T12:54:21.250

我的印象是您试图在 Windows 上安装源代码包，但没有可用的适当源代码构建工具。如果是这种情况，那么您需要从某个地方获取二进制文件或自己构建一个。有关如何设置所需工具链的详细信息，请参阅[R Windows 常见问题解答](http://cran.r-project.org/bin/windows/base/rw-FAQ.html)和[R 安装和管理手册](http://cran.r-project.org/doc/manuals/R-admin.html)

如果你不喜欢自己设置工具链，你可以使用 Uwe Ligges 维护的优秀的 WinBuilder 服务器。有关详细信息，请参阅 R Windows 常见问题解答的[相关部分](http://cran.r-project.org/bin/windows/base/rw-FAQ.html#How-can-I-get-a-binary-version-of-a-package_003f)以及此处的站点：[http ://win-builder.r-project.org/](http://win-builder.r-project.org/)

请注意有关已知可在类 UNIX 上工作的软件包的要点；鉴于**ecogbm**是一个 beta 包，即使在 UNIX 类似系统上构建它也可能存在问题，这很可能意味着也无法构建 Windows 二进制文件。

# objective-c - NSFetchedResultsController 和 NSPredicate 以及部分名称

> ID：10449049
> 
> 赞同：0
> 
> 时间：2012-05-04T12:44:40.307
> 
> 标签：objective-c, core-data, nspredicate, nsfetchedresultscontroller

我有两个实体的核心数据模型，它们彼此之间存在多对多关系。

例如，

```
Conference <<---->> Speaker 
```

一个会议可以有多个演讲者，一个演讲者可以参加多个会议。

我试图使用 NSFetchedResultsController fetchRequest 的主要实体是**Speaker**。

虽然它确实列出了所有发言者，但我试图将该部分作为“会议”名称并列出该部分中的所有发言者。我想要它，以便作为演讲者的名字“约翰”出现在两个部分中。这意味着他是两次会议的发言人。

这是我正在使用的 sectionNameKeyPath： `@"conferences.Name"`

```
NSFetchedResultsController *aFetchedResultsController = [[[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:self.managedObjectContext sectionNameKeyPath:@"conferences.Name"  cacheName:@"fCache"] autorelease]; 
```

它有点不起作用，`{TedEx}` 当我使用`[sectionInfo name]`.

另一个问题是，如果我一个发言者出现在一个部分（会议）中，它将不会出现在另一部分中（即使该部分（会议）具有该发言者对象）。

这可能是因为，我将 sectionName 作为一组组合会议。`TedEx, SXSW`作为一个单独的部分。

一些目标应该是如何挑选出 sectionNameKeypath 以仅获取一个会议并列出每个会议中的所有发言人。也许我应该设置某种谓词？

我在这里有点束缚，这种方法有问题吗？我读过关于谓词的文章，但如果你是核心数据的新手，它有点难以理解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T20:53:41.307

这与您考虑的方式略有不同，我不确定是否有更好的方法可以使用您想要的 FRC 和 sectionNameKeyPath 来完成它，但也许这会起作用：

1.  无需获取 Speakers，只需执行正常`NSFetchRequest`操作即可获取被`NSArray`调用的`conferences`. 您可以按会议名称或日期或您需要的任何内容对其进行排序。
2.  然后为您的表格视图将部分的数量设置为`[conferences count]`.
3.  对于每个部分的行数，获取该部分的会议对象`[conferences objectAtIndex:section]`，并返回该会议的发言人数。
4.  要填充单元格数据，只需通过调用获取 Speaker 对象：`[[conferences objectAtIndex:indexPath.section] objectAtIndex:indexPath.row];`

# regex - 来自 Udacity 课程的 Peter Norvig 的正则表达式编译器用 Racket 重写

> ID：10449052
> 
> 赞同：1
> 
> 时间：2012-05-04T12:44:50.140
> 
> 标签：regex, racket

这些天我参加了 Peter Norvig 的 Udacity 课程 CS212：计算机程序设计。不幸的是，这门课程都是用 Python 编写的，所以为了学习，我在 Racket 中为该课程的第 3 单元中给出的正则表达式编译器编写了等效代码。

你可以在这里看到我的代码：http: [//codepad.org/8x0rMXOi](http://codepad.org/8x0rMXOi)

现在，困扰我的是 Norvig 先生的 Python 原始代码比我的要短一些。:( 但是好吧，我只是 Racket 的初学者，这是意料之中的。但我想知道是否有一些 Racket 专家可以缩短我的代码，使 Racket 代码变得比原始 Norvig 的 Python 代码更短？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T13:38:25.900

这里有一些提示。

ormap 表达式在：

```
 (define (in-chars? c chars)
   (ormap (lambda (ch) (equal? c ch)) (string->list chars))) 
```

可以写成

```
 (memv c (string->list chars)) 
```

中的 if-epression

```
(define (match pattern text)
  (define remainders (pattern text))
  (if (not (set-empty? remainders))
      (substring text 0 (- (string-length text)
                           (string-length (argmin string-length 
                                                  (set->list remainders)))))
      #f)) 
```

可以写成

```
 (and (not (set-empty? remainders))
      (substring ...) 
```

但是你的功能很小而且很重要，所以我不会改变太多。

操作字符串的更方便的语法将使字符串操作程序的读写更容易。几年前我做了一个尝试，写了一个 concat 宏。

我用它来实现 Norvig 的拼写检查器（你可能会对他的原始文章感兴趣）。生成的拼写检查器和 concat 宏在此处解释

[http://blog.scheme.dk/2007/04/writing-spelling-corrector-in-plt.html](http://blog.scheme.dk/2007/04/writing-spelling-corrector-in-plt.html)

更新：我编写了拼写检查器的更新版本。concat 宏使简单的字符串操作更短。

[https://github.com/soegaard/this-and-that/blob/master/spell-checker.rkt](https://github.com/soegaard/this-and-that/blob/master/spell-checker.rkt)

# cruisecontrol.net - 巡航控制.net中带有自定义字符串的日期标签器年份格式

> ID：10449054
> 
> 赞同：1
> 
> 时间：2012-05-04T12:44:53.863
> 
> 标签：cruisecontrol.net

我在 Cruise control .net 中使用 dateLabeller 进行标记。

```
 <labeller type="dateLabeller">

</labeller> 
```

它对我来说很好，每次构建标签每次都在增加。但我也想在日期之前添加一些文本，所以我使用以下代码

```
<labeller type="dateLabeller">
  <yearFormat>QAT-0000</yearFormat>
  <revisionFormat>0000</revisionFormat>
</labeller> 
```

现在每次构建前触发时都会生成相同的标签。

我该如何解决这个问题

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T16:30:00.763

使用格式值，就像在`Int32.ToString(String)`. [在此处](http://msdn.microsoft.com/en-us/library/0c899ak8.aspx)查找有关自定义数字格式字符串的信息。

所以这应该解决它：

```
<labeller type="dateLabeller">
  <yearFormat>'QAT-'0000</yearFormat>
</labeller> 
```

**更新：**我查看了源代码，发现它`dateLabeller`无法处理非数字标签，因为最后一次成功集成的标签被解析为一个`System.Version`对象。

# ibm-midrange - Tabsequence un a DSPF subfile vertical, with multicolumn subfile

> ID：10449056
> 
> 赞同：0
> 
> 时间：2012-05-04T12:44:55.640
> 
> 标签：ibm-midrange, rpg

是否有一个 DSPF 关键字，它定义在多列子文件中，当从列中的最后一个字段到达时，光标跳转到同一列上出现的第一个字段，下一行，而不是默认行为, 同一行的下一个条目在哪里获得 corsur 位置？

如果我有

```
 C1F1a C1F2a  C2F1a C2F2a
     C1F1b C1F2b  C2F1b C2F2b
     C1F1c C1F2c  C2F1c C2F2c 
```

C=列，F=字段

在 C1F2a 上的标签应该让我在 C1F1b 上。C1F2c 上的选项卡应该让我进入 C2F1a。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T13:24:34.553

SFLCSRPRG (Subfile Cursor Progression) 关键字看起来会做你想做的事。

# java - 接受“不”但不接受“不喜欢”的词法分析器

> ID：10449057
> 
> 赞同：4
> 
> 时间：2012-05-04T12:44:55.703
> 
> 标签：java, parsing, antlr, grammar, lexer

我需要一个小技巧来让我的解析器完全工作。我使用 antlr 来解析布尔查询。

查询由元素组成，通过 ands、ors 和 nots 链接在一起。

所以我可以有类似的东西：

```
"(P or not Q or R) or (( not A  and B) or C)" 
```

问题是，一个元素可以很长，并且通常采用以下形式：

```
a an_operator b 
```

例如 ：

```
"New-York matches NY" 
```

技巧，其中一个 an_operator 是“不像”

所以我想修改我的词法分析器，以便 not 检查它后面是否有类似，以避免解析包含“不喜欢”运算符的元素。

我目前的语法在这里：

```
// save it in a file called Logic.g
grammar Logic;

options {
  output=AST;
}

// parser/production rules start with a lower case letter
parse
  :  expression EOF!    // omit the EOF token
  ;

expression
  :  orexp
  ;

orexp
  :  andexp ('or'^ andexp)*    // make `or` the root
  ;

andexp
  :  notexp ('and'^ notexp)*      // make `and` the root
  ;

notexp
  :  'not'^ atom    // make `not` the root
  |  atom
  ;

atom
  :  ID
  |  '('! expression ')'!    // omit both `(` andexp `)`
  ;

// lexer/terminal rules start with an upper case letter
ID    : ('a'..'z' | 'A'..'Z')+;
Space : (' ' | '\t' | '\r' | '\n')+ {$channel=HIDDEN;}; 
```

任何帮助，将不胜感激。谢谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T15:43:16.300

这是一个可能的解决方案：

```
grammar Logic;

options {
  output=AST;
}

tokens {
  NOT_LIKE;
}

parse
  :  expression EOF!
  ;

expression
  :  orexp
  ;

orexp
  :  andexp (Or^ andexp)*
  ;

andexp
  :  fuzzyexp (And^ fuzzyexp)*
  ;

fuzzyexp
  :  (notexp -> notexp) ( Matches e=notexp  -> ^(Matches $fuzzyexp $e)
                        | Not Like e=notexp -> ^(NOT_LIKE $fuzzyexp $e)
                        | Like e=notexp     -> ^(Like $fuzzyexp $e)
                        )?
  ;

notexp
  :  Not^ atom
  |  atom
  ;

atom
  :  ID
  |  '('! expression ')'!
  ;

And     : 'and';
Or      : 'or';
Not     : 'not';
Like    : 'like';
Matches : 'matches';
ID      : ('a'..'z' | 'A'..'Z')+;
Space   : (' ' | '\t' | '\r' | '\n')+ {$channel=HIDDEN;}; 
```

这会将输入解析`"A not like B or C like D and (E or not F) and G matches H"`为以下 AST：

![在此处输入图像描述](../Images/32139acafd97b32ffc6535f577086a4c.png)

# php - 是否有 PHP 函数将数据库中的重音字母转换为 html 代码？

> ID：10449059
> 
> 赞同：1
> 
> 时间：2012-05-04T12:44:57.297
> 
> 标签：php

有一个`MySQL`数据库包含带有`accentuated`字母的数据，如`é`. 我想在我的`PHP`页面中显示它，但问题是由于`accent`. 那么有没有`function`把重音转换成HTML代码，比如`é`转换成`&eacute;`！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T12:49:49.657

而不是使用`htmlentities`你应该在你的文件中使用 unicode 字符集，例如

```
<?php
header('Content-Type: text/html; charset="utf-8"'); 
```

为了安全起见，您可以将以下元标记添加到您的 html 文件中：

```
<html>
  <head>
    <meta charset="utf-8" /> 
```

然后，确保您的数据库连接使用 utf8：

```
mysql_connect(...);
mysql_select_database(...);

mysql_set_charset('utf-8'); 
```

然后，所有浏览器都应该正确显示特殊字符。

优点是您可以轻松地在 php 文件中的任何地方使用 unicode 字符 - 例如版权符号 (©) 或破折号 (–) - 假设您的 php 文件也以 utf-8 编码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T12:47:01.183

尝试[`htmlspecialchars()`](http://php.net/manual/en/function.htmlspecialchars.php)和/或[`htmlentities()`](http://www.php.net/manual/en/function.htmlentities.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T12:51:28.353

你可以很容易地用 str_replace 自己制作一个：

```
function txtFormat($input){

    $output = str_replace('/\à/','&#201;',$input);
    $output = str_replace('/\è/','&#232;',$output);
    $output = str_replace('/\é/','&#233;',$output);
    $output = str_replace('/\ì/','&#236;',$output);
    $output = str_replace('/\ò/','&#242;',$output);
    $output = str_replace('/\ù/','&#249;',$output);

    return $output;

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T12:52:16.043

使用以下代码

```
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head> 
```

并且在插入数据库之前不要通过 utf8_encode() 函数对您的数据进行编码希望这会解决您的问题:)

# ruby-on-rails - 在 Rails 中，让 assets:precompile 输出它已预编译的文件列表？

> ID：10449060
> 
> 赞同：3
> 
> 时间：2012-05-04T12:44:58.140
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, asset-pipeline

在 Rails 中，如何输出为资产管道编译的资产列表`rake assets:precompile`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-08-26T21:27:03.263

这是 2 年后的事了，但我刚刚发现这个问题又问了一次并想通了。你可以用`Sprockets`!

```
Rails.application.assets.each_logical_path(*Rails.application.config.assets).to_a 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-17T23:44:43.477

预编译资产后，检查`manifest.yml`资产目录中的文件。您可以通过检查找到它所在的目录`config.assets.prefix`。您可以通过设置更改位置 `config.assets.manifest = '/path/to/some/other/location'`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-05-28T14:34:54.437

对于 Rails 5，在控制台上：

```
Rails.application.config.assets[:precompile] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T12:57:21.107

目前，似乎没有办法打印出资产管道编译的资产列表

# ruby-on-rails - 如何将方法名称附加到vim中的结束标记

> ID：10449062
> 
> 赞同：0
> 
> 时间：2012-05-04T12:45:04.130
> 
> 标签：ruby-on-rails, vim

我正在尝试修改[endwise](https://github.com/tpope/vim-endwise)，它在我输入后已经在新行上附加了一个“end”

```
def my_func 
```

所以我最终得到

```
def my_func

end 
```

我想要做的是更新代码，以便我最终得到

```
def my_func

end # </ "my_func" > 
```

这将告诉我结局是什么，这将有助于在查看嵌套的 dos/whiles/defs 时产生混淆

任何帮助深表感谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T12:59:21.300

我会使用片段引擎。如今，它们都支持某种同步占位符。在一个地方填空，在其他地方就会被填满。

# java - Maven：单元测试未运行

> ID：10449064
> 
> 赞同：0
> 
> 时间：2012-05-04T12:45:10.307
> 
> 标签：java, maven

我在运行 Maven 项目的单元测试时遇到问题。

该项目曾经是一个pom。我把它分成三个pom。

我的maven是这样的。这些pom中的三个看起来都像这样。

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>

<groupId>com.mycompany</groupId>
<artifactId>client</artifactId>
<version>1.0</version>

<parent>
    <groupId>com.mycompany</groupId>
    <artifactId>base-pom</artifactId>
    <relativePath>../../build/shared/pom.xml</relativePath>
    <version>1.0</version>
</parent>

<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.3.2</version>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
            </configuration>
        </plugin>

        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-surefire-plugin</artifactId>
            <version>2.12</version>
            <configuration>
                <includes>
                    <include>**/*Test.java</include>
                </includes>
                <forkMode>never</forkMode>
                <useFile>false</useFile>
            </configuration>
        </plugin>
    </plugins>
</build>

<dependencies>
   ....
</dependencies> 
```

顶级pom是：

```
<groupId>com.mycompany</groupId>
<artifactId>project</artifactId>
<version>1.0</version>
<packaging>pom</packaging>

<modules>
    <module>modules/shared</module>
    <module>modules/client</module>
    <module>modules/adapter</module>
</modules> 
```

由所有模块共享的父 POM 是：

```
<groupId>com.mycompany</groupId>
<artifactId>base-pom</artifactId>
<version>1.0</version>
<packaging>pom</packaging>

<parent>
    <groupId>com.mycompany</groupId>
    <artifactId>mycompany-parent</artifactId>
    <version>1.0.8</version>
</parent>

<properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <project.reporting.sourceEncoding>UTF-8</project.reporting.sourceEncoding>
</properties>

<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.3.2</version>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
            </configuration>
        </plugin>
    </plugins>
</build>

<dependencyManagement>
  ...
</dependencyManagement> 
```

它通常在只有一个 POM 时工作。这是什么问题？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T17:01:33.343

我建议重组您的项目结构以代表项目的真实布局。[我可以建议在SO](https://stackoverflow.com/questions/10452444/how-to-restructure-maven-multi-module-project)上阅读此条目

# asp.net-mvc-3 - asp.net mvc 路由 - 多个参数

> ID：10449074
> 
> 赞同：0
> 
> 时间：2012-05-04T12:45:55.097
> 
> 标签：asp.net-mvc-3, asp.net-mvc-routing

我刚刚启动了 MVC，我可以将一个 ID 传递给一个页面，但似乎无法让我的路由使用两个参数。有谁知道为什么？

这是我的代码：

**全球的：**

```
 routes.MapRoute(
           "Default", // Route name
           "{controller}/{action}/{id}", // URL with parameters
           new { controller = "Account", action = "Login", id = UrlParameter.Optional } 
       ); 

    routes.MapRoute(
    "EditVoucher",                                              // Route name
    "{controller}/{action}/{id}/{userid}",                           // URL with parameters
    new { controller = "Admin", action = "EditVoucher", id = "", userid = "" }  // Parameter defaults
    );     

**My controller:**  

[HttpGet]
 public ActionResult EditVoucher(int ID, int UserID)
 {
}

**my link:**

 @Html.ActionLink("[Edit]", "EditVoucher", new { Controller = "Admin", id = item.ID, userid = 2 })  

this passes through the values fine but I end up with this sort of URL:

**/Admin/EditVoucher/2?userid=2**

thanks 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T12:53:13.560

`ActionLink`将使用可以满足您的参数的第一条路线。

由于第一个（默认）路由也满足您的参数，因此您需要将自定义路由放在首位。

# eclipse - Eclipse 端口 51235 上可用的服务

> ID：10449080
> 
> 赞同：1
> 
> 时间：2012-05-04T12:46:42.943
> 
> 标签：eclipse, firefox, integration, opera

我们使用 Crucible/FishEye 进行代码审查，在 Firefox 中，源文件的内容视图上方有一个 Eclipse 图标。如果我单击它，源文件将在 Eclipse 中打开。

Crucible/FishEye 不会在 Opera 中显示该图标。我试图将它破解到 Opera 中，看看它是否有效。但是，它甚至不显示图标：

```
<img src="http://localhost:51235/icon"> 
```

`netstat`显示 Eclipse 侦听该端口，其他同事也能够通过端口 51235 在 Firefox 中使用该扩展功能，因此该端口似乎是 Eclipse 中的预定义端口。

1.  ~~有谁知道如何使这项工作或 Eclipse 在这里检查什么？~~
2.  有谁知道通过端口 51235 可以做什么？

编辑：我把所有发现都放在我的回答中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T11:33:22.177

该端口似乎是Eclipse中[Atlassian连接器的一部分。](http://www.atlassian.com/)他们为他们的连接器编写[了源代码](https://bitbucket.org/atlassian/connector-eclipse/src/b26692bd1c5d8eb7fc4e01cf94d731874c25a49a/com.atlassian.connector.eclipse.directclickthrough.ui/src/com/atlassian/connector/eclipse/internal/directclickthrough/servlet/DirectClickThroughServlet.java?at=default)和一个[测试类](https://bitbucket.org/atlassian/connector-eclipse/src/77f70dee2ea7/com.atlassian.connector.eclipse.tests/src/HttpServerTest.html)。

以下是可能的 URL 的简要列表：

*   图标：`http://localhost:51235/icon`

*   打开一个问题：`http://localhost:51235/issue?issue_key=PL-31&server_url=https://studio.atlassian.com/&id=`

*   打开构建：`http://localhost:51235/build?build_key=ECL-COM&build_number=1118&server_url=https://gdansk.bamboo2.atlassian.com&id=`

*   打开一个文件：

    *   `http://localhost:51235/file?file=plugin.xml&id=`
    *   `http://localhost:51235/file?file=org.eclipse.mylyn.discovery.core/plugin.xml&id=`
    *   `http://localhost:51235/file?file=CompletionActionStates.java&path=src/org/dubik/codecompletionlive/completions&line=10&id=`
    *   `http://localhost:51235/file?file=Test.java&path=src/main/java/com/atlassian/connector&line=10&vcs_root=https://studio.atlassian.com/svn/PL/trunk/atlassian-intellij-connector/&id=`
*   打开评论

    *   文件和版本化注释定义：`http://localhost:51235/review?review_key=CR-PL-66&server_url=https://svn.atlassian.com/atlaseye&file_path=src/main/java/com/atlassian/theplugin/util/CodeNavigationUtil.java&comment_id=CMT:9831&id=`

    *   文件定义：`http://localhost:51235/review?review_key=CR-PL-66&server_url=https://svn.atlassian.com/atlaseye&file_path=src/main/java/com/atlassian/theplugin/util/CodeNavigationUtil.java&id=`

    *   一般性评论定义：`http://localhost:51235/review?review_key=CR-PL-66&server_url=https://svn.atlassian.com/atlaseye&comment_id=CMT:9899&id=`

**笔记：**

*   `id`总是用 填充`Math.floor(Math.random()*1000)`，即 0 到 999 之间的随机数
*   所有链接都返回图标

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T11:24:00.767

如果您添加一个加载该 URL 的 IFRAME，您可能会看到一个跨网络错误页面。如果这样做，请选择始终允许该服务器的流量，并查看它是否有效。

# jquery - 显示和隐藏一些跨度文本

> ID：10449081
> 
> 赞同：1
> 
> 时间：2012-05-04T12:46:44.377
> 
> 标签：jquery

我刚开始编程和学习 Jquery，我正在尝试构建一个简单的显示/隐藏文本按钮，实际上我几乎成功了，但问题是我有两个按钮和两个文本要显示/隐藏，但是当我点击两个文本都显示/隐藏的按钮中的任何一个。这是我的代码：

HTML：

```
<div class="mestre">
    <h2>Title</h2>
    <p>some text</p> 
 <h4>Saiba mais</h4><--the button -->
   <span class="saibamais">hidden text</span></div>
<div class="mestre">
    <h2>Title</h2>
    <p>some text</p> 
 <h4>Saiba mais</h4><--the button -->
   <span class="saibamais">hidden text</span></div> 
```

JS

```
 var saibamaisBtn = $('#conteudo div.mestre h4');
    saibamais = $('#conteudo div.mestre span.saibamais');

       $(function(){ 
saibamais.css('display', 'none');
  });

 saibamaisBtn.hover(function(){
   var $this = $(this);
         $this.css('text-decoration', 'none');

},  function(){
    $(this).css('text-decoration', 'underline');

});

   saibamaisBtn.click(
    function() {
        saibamaisBtn.next('span').slideToggle('fast')
            }

            ); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T12:51:18.080

```
saibamaisBtn.click(
    function() {
        $(this).closest('span.saibamais').slideToggle('fast');
    }); 
```

或者

```
saibamaisBtn.on('click', 
    function() {
        $(this).next('span.saibamais').slideToggle('fast');
    });​ 
```

[**演示**](http://jsfiddle.net/N9nP6/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T12:52:13.243

您所做的一切都基于一个类，该类在您的文档中出现多次。

您可以用 ID 替换类，或尝试[类似](https://stackoverflow.com/questions/441687/find-the-next-element-that-is-not-immediate)的方法，以便只影响一个跨度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T12:53:03.117

因为 saibamaisBtn 代表您正在对所有 span 元素执行操作的按钮组。通常你会这样写 -

```
$('#conteudo div.mestre h4').click(function() {
    $(this).next('span').slideToggle('fast');
}); 
```

这将隔离被单击的按钮并专注于 next() 中可用的跨度。

# mysql - 我想用文本类型列制作数据库。但长度始终为 0 。在mysql中

> ID：10449083
> 
> 赞同：0
> 
> 时间：2012-05-04T12:46:51.827
> 
> 标签：mysql, text, sql-types

我在 mysql 中创建 db 表。

```
create table finaltest1(id int(10),title text(20), category text(20), price text(10), ymd text(15), iconurl text(50), screenshoturl text(150), appid text(15), company text(30), capacity text(15)); 
```

但是文本列的长度都是0。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T12:51:06.033

如果您想要带有字段的有限文本，请使用数据类型 VARCHAR (20) 。否则，对于长文本，只需使用 TEXT 数据类型。

检查：[http ://www.htmlite.com/mysql003.php](http://www.htmlite.com/mysql003.php)

你 20 给出的长度在 TINYTEXT 之下。

```
TINYTEXT    256 bytes    
TEXT        65,535 bytes            ~64kb
MEDIUMTEXT  16,777,215 bytes        ~16MB
LONGTEXT    4,294,967,295 bytes     ~4GB 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T12:57:06.547

正如 swati 已经说过的，您需要学习[MySQL 字符串数据类型](http://dev.mysql.com/doc/refman/5.5/en/string-types.html)。如果您使用 TinyText，该列将始终占用 256 个字节，即使它是空的。您应该注意，对于 *Text 列类型，您不能有默认值。

如果您使用 VARCHAR(20) 列，则实际使用的数据空间取决于内容，您可以使用默认值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T13:00:42.160

`text`不需要长度。[从文档](http://dev.mysql.com/doc/refman/5.5/en/blob.html)中了解更多信息。以下查询应该有效。

```
create table finaltest1(id int(10),
    title text,
    category text,
    price text,
    ymd text,
    iconurl text,
    screenshoturl text,
    appid text,
    company text,
    capacity text
); 
```

# c - “使用两倍的长度作为宽度打印字符串”是什么意思？意思是？

> ID：10449084
> 
> 赞同：-4
> 
> 时间：2012-05-04T12:46:55.877
> 
> 标签：c

我现在不能问我的讲师，因为我在哪里是深夜和周末。

这是问题：“编写一个程序，从键盘输入一个字符串并确定字符串的长度。**使用两倍的长度作为宽度打印字符串。”**

粗体部分是我不明白的部分。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T12:50:39.837

他的意思是用填充打印，例如

```
Hello <-- not padded
     Hello <-- padded in 10-char field, right justified 
```

# windows-phone-7 - 如何在 twitter api wp7 中解压 gzip QueryResponse？

> ID：10449086
> 
> 赞同：0
> 
> 时间：2012-05-04T12:47:10.497
> 
> 标签：windows-phone-7, twitter, gzip

我有这样的问题[https://dev.twitter.com/discussions/4563](https://dev.twitter.com/discussions/4563)

```
 if (webResponse.Headers["Content-Encoding"] == "gzip")
                {
                    byte[] bytes = UTF8Encoding.Unicode.GetBytes(stream);
                    MemoryStream ms = new MemoryStream(bytes);
                    var rstream = new ICSharpCode.SharpZipLib.GZip.GZipInputStream(ms);
                    using (var reader = new StreamReader(rstream, Encoding.UTF8))
                    {
                        var st = reader.ReadToEnd();// Exception here: "Error baseInputStream GZIP header,  second byte doesn't match"
                        parameters = HelperMethods.GetQueryParameters(st);
                    }
                } 
```

我使用这个库：[http ://slsharpziplib.codeplex.com/](http://slsharpziplib.codeplex.com/)

**更新：** 我只使用 RestClient 发布推文。对于登录，我使用：

```
var AccessTokenQuery = oAuthHelper.GetAccessTokenQuery(OAuthTokenKey, tokenSecret, VerifyPin);
            AccessTokenQuery.QueryResponse += new EventHandler<WebQueryResponseEventArgs>(AccessTokenQuery_QueryResponse);
            AccessTokenQuery.RequestAsync(TwitterSettings.AccessTokenUri, null); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T15:06:53.983

看起来您收到的 gzip 响应与 SharpZipLib 所期望的不太一样。

您得到的错误来自[SharpZipLib/src/GZIP/GzipInputStream.cs](https://github.com/icsharpcode/SharpZipLib/blob/master/src/GZip/GzipInputStream.cs)并且可能来自这一行：

```
if (magic != (GZipConstants.GZIP_MAGIC & 0xFF)) {
                throw new GZipException("Error GZIP header,  second magic byte doesn't match");
} 
```

尝试将流保存到文件中，然后查看它。看看你是否可以用 7-zip 等解压它。然后一旦你知道出了什么问题，你就可以从那里开始。

## 更新：

There appears to be a solution to the problem you are having at the end of [the discussion you linked to](https://dev.twitter.com/discussions/4563) and I wanted to make sure you were aware of it:

> @SMCApps I caught a break...
> 
> ```
> Dim client = New RestClient() With { _
> .Authority = "https://api.twitter.com/oauth", _
> .Credentials = credentials, _
> .HasElevatedPermissions = True, _
> .SilverlightAcceptEncodingHeader = "gzip", _
> .DecompressionMethods = Silverlight.Compat.DecompressionMethods.GZip _
> } 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T14:32:19.480

I faced the same problem, I solved it by updating the Hammock to latest version. You can get it at [http://nuget.org/packages/Hammock](http://nuget.org/packages/Hammock)

After updating, It worked only when I commented the

```
DecompressionMethods =Hammock.Silverlight.Compat.DecompressionMethods.GZip 
```

line from my Oauth request. I'm not sure how n why?

# c - 用任意数初始化指针

> ID：10449088
> 
> 赞同：1
> 
> 时间：2012-05-04T12:47:14.377
> 
> 标签：c, pointers

```
{
    int *p=12;
    printf("%p",p);
    printf("\n%d",p);
} 
```

输出：

0000000C

12

问题：那么 p 是否分配了地址 0x0000000C？

```
{ 
    int *p=12;
    *p=22;
} 
```

但是这个不运行。那么究竟发生了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T12:49:56.823

```
int *p=12; 
```

这声明了一个指针并设置它指向的地址`12`。

```
*p=22; 
```

这将取消引用指针并将 22 写入`int`该内存地址`12`。由于您没有分配任何内存，只是将指针设置为指向随机地址，因此会导致运行时错误。

让您感到困惑的是，这两段代码都包含`*p=...`. 但是，第一个赋值是指针，第二个赋值是指针。这只是用 C 编程时必须习惯的符号重载之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T12:49:35.770

这两种情况都有未定义的行为。

*   第一个示例的行为未定义，因为您使用了无效指针。

*   第二个示例最糟糕，因为您**取消引用**具有无效地址的指针。

    ```
    int *p=12; // set the address 12 to the int pointer called p
    *p=22;     // set the value 22 to the address 12 (invalid address) 
    ```

# c# - 如何使用 C# 使图像平滑移动

> ID：10449090
> 
> 赞同：2
> 
> 时间：2012-05-04T12:47:18.470
> 
> 标签：c#, image

我正在尝试使用 C#/winform 制作类似 Chain Reaction (http://www.yvoschaap.com/chainrxn/) 的游戏，但我找不到一种方法让图像像 Chain Reaction 中的效果一样平滑移动.任何人都可以给我一些想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T12:52:29.073

这是在 WinForms 中实现任何类型的自定义绘图时的常见问题，无论是游戏、图形还是任何所有者绘制的控件。问题是默认情况下所有 WinForms 控件都将 DoubleBuffer 属性设置为 False。

将 Form 的 DoubleBuffer 属性设置为 True 将消除烦人的闪烁。

正如评论中所建议的那样，XNA 是游戏开发的不错选择，但要在 WinForms 中快速修复，您可能需要做的就是将 Form 设置为使用[双缓冲区](https://web.archive.org/web/20140811193726/http://bobpowell.net/doublebuffer.aspx)进行绘制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T12:54:12.567

上次我不得不在 c# 中移动某些东西时，我使用了计时器。您每次增加/减少图像位置，如下所示：

`image.Left += 1;`

如果我没记错的话，它做得很好，但我不确定它是否容易实现。

无论如何，我希望它有所帮助！祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T12:52:40.367

在您的表单构造函数中添加以下行：

```
SetStyle( ControlStyles.ResizeRedraw, true );
SetStyle( ControlStyles.UserPaint, true );
SetStyle( ControlStyles.AllPaintingInWmPaint, true );   
SetStyle( ControlStyles.OptimizedDoubleBuffer, true ); 
```

这将有助于优化重新渲染。

对于您的运动，您应该使用一个计时器以固定的时间速率使控件无效...并且您必须将计算保存在像 PointF 这样的浮点结构中以避免运动中的闪烁...

```
// This will move 30 pixels per second it rate is the elapsed time in seconds between calls to the update position method, and should move smooth :)
PointF Velocity = (30,0) * time_rate;  
PointF Pos = Pos + Velocity; 
```

你应该只使用一个将成为你的屏幕游戏的控件，也许是一个 PictureBox，在paint方法中你可以这样绘制球：

```
private void pictureBox1_Paint(object sender, System.Windows.Forms.PaintEventArgs e)
{
   Graphics g = e.Graphics;

   foreach (Ball ball in balls)
   {
       ball.Update();
       g.FillEllipse(ball.Brush, ball.Pos.X - ball.Radius, ball.Pos.Y - ball.Radius, ball.Radius*2, ball.Radius*2);
   }
} 
```

# c++ - 转换为 const int

> ID：10449096
> 
> 赞同：-3
> 
> 时间：2012-05-04T12:47:57.687
> 
> 标签：c++, c

如何将 int 的值复制到新的 const int 中？

由此：

```
int start= 343; 
```

进入这个：

```
const int end = start; 
```

如何做到这一点，任何例子？我真的不知道怎么做，请帮帮我-

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-04T12:51:04.780

像这样：

```
int start = 343;
const int end = start; 
```

如果您想确定`end`是 const，请尝试修改它：

```
end++; // Compile error! 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T12:54:09.300

如果你使用 C++，你可以在运行时设置一个常量成员变量：

```
class M
{ 
    public: 
      M(int number) : mNumber(number)
      {
      }
    const int mNumber;
}; 
```

# c# - 通过 C# 将 JSON 数据发布到 PHP 并将值存储在 MYSQL 中

> ID：10449099
> 
> 赞同：0
> 
> 时间：2012-05-04T12:48:01.400
> 
> 标签：c#, php, mysql, json

我的 C# 类应该发送到 PHP：

```
MyData data = new MyData();
data.Name = "MyName";
data.Type = "MyType";
data.ID = 1;
data.Description = "MyLongDescription..."; 
```

如何通过 C# 以 JSON 格式将其发送到 PHP？以及如何在 PHP 中检索它？下一步应该是将提交的数据/值插入 MySQL 数据库。

C# -> 向 PHP 发送一些 JSON 数据 -> 通过 PHP 将 JSON 数据写入 MYSQL DB

示例数据库：MyData(varchar Name, varchar Type, int ID, varchar Description)

我当前的 PHP 代码：

```
$json = json_decode($input,true);

$connection = mysql_connect("localhost","root","");
if (!$connection)
{
     die(mysql_error());
}

mysql_select_db("MyDataDB", $con);

mysql_query("INSERT INTO MyData (Name, Type, OtherID, Description) 
VALUES('$json[Name]','$json[Type]','$json[ID]','$json[Description]')"); 
```

有任何想法吗？

感谢您的努力。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T12:53:06.097

用于编码的 C# 代码：

```
var jsonSerializer = new System.Web.Script.Serialization.JavaScriptSerializer();
string json = jsonSerializer.Serialize(yourCustomObject); 
```

要解码的 PHP 代码：

```
$decoded = json_decode($received_json_string); 
```

顺便说一句，你试过什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T13:02:12.043

我会回答这个问题，但就昆汀而言，你有很多事情要做。

C# 和 PHP 之间没有直接的互操作性，因此您需要从 PHP 公开 Web 服务并在 C# 中使用它。更好的是，让 C# 直接保存到 mysql 并且不用担心互操作。

# ruby-on-rails-3 - Rails：向 collection_select 添加选项

> ID：10449101
> 
> 赞同：6
> 
> 时间：2012-05-04T12:48:09.197
> 
> 标签：ruby-on-rails-3, form-helpers

我正在使用一个collection_select 字段，但需要在选项前面加上一些默认选项，它不代表特定的模型记录，并且用于将appropriet 字段设置为NULL。但我就是找不到任何方法来做到这一点。

如果您需要更多信息，请不要急于询问。使用带有标准表单助手的 Rails 3.2.3。

PS我知道我可以做这样的事情：

```
@parents = ['default_name','nil']
@parents << Model.all.map {|item| [item.name,item.id]} 
```

但我认为还有一种更优雅的方式。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-04T13:20:50.697

有一个 :include_blank 选项可以传递给[collection_select](http://api.rubyonrails.org/classes/ActionView/Helpers/FormOptionsHelper.html#method-i-collection_select)辅助方法：

```
f.collection_select(:author_id, Author.all, :id, :name_with_initial,
                    :include_blank => "Nothing selected") 
```

还有一个类似的选项叫做 :prompt，也可以查看一下。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-04T13:03:41.923

您可能可以使用**select**代替：

```
f.select(:item_id, @items.collect {|p| [ p.name, p.id ] } + ['Or create a new one like','new'], {:include_blank => 'Please select a item'}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T13:01:14.870

你认为这样的事情可以接受吗？

```
collection_select :field1, :field2, @models+[Model.new(name: "default_name")], :name, :id 
```

# c++ - fread 的替代用法

> ID：10449111
> 
> 赞同：2
> 
> 时间：2012-05-04T12:48:43.927
> 
> 标签：c++, loops, fread

我想以一种奇怪的方式使用*fread*或类似的东西。我不确定这是否可能......让我解释一下这个案例：

我有一个名为“ *dummy ”的**二进制*文件。该文件中包含 unsigned char 数组。但是，我想将它们放入一个浮点数组中，该数组将存储 4 倍的内存空间。

 *我可以实现如下目标：

```
FILE* in_file;
int numberOfCharacters = 1000; // number of unsigned characters to read ...
in_file = fopen("dummy", "rb");

float* floatArray = (float*) malloc( numberOfCharacters * sizeof(float) );

for(int i=0;i<numberOfCharacters;i++)
{
    unsigned char temp;
    fread(&temp, sizeof(unsigned char), 1, in_file);
    floatArray[i] = temp;
} 
```

我知道（实际上并没有真正尝试过）这种方式可能会奏效。但我很好奇是否有更好（更快）的方法呢？也许，没有循环..？

提前致谢，

坐下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T12:52:18.740

该示例看起来没问题（尽管一些错误检查可能很好）。一种可能的性能改进可能是将`fread`之前的循环移动并一次读取所有 1000 个条目（进入分配的 char 数组）。但这可能只会稍微快一点，因为 fread 被缓冲了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T13:00:56.467

袖口：

*   如果二进制文件的源和目标（正在读取它的位置）之间的字节序不匹配，并且写入/读取过程没有考虑到这一点，您可能会遇到问题。
*   查找`setvbuf`为您的文件设置缓冲模式。
*   您可能还想查看内存映射文件 ( `mmap`)
*   `fstream`这在 C++ 中使用（文件流）和迭代器（即在语法上）要容易得多。此外，如果您想要性能，您可以通过覆盖适当的成员来创建自己的优化文件流。
*   如需进一步阅读，请查看[过滤流](http://lists.boost.org/Archives/boost/att-49459/fltrsbf1.htm)缓冲区

小尼特：

*   在 C 中，您不需要强制转换的返回值`malloc`
*   `#include`正确的标题
*   测试是否`fopen`成功，然后在完成后关闭文件
*   取消分配你的`floatarray`一次完成

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T12:55:43.110

检查 fread 的返回值是否为 EOF 将避免额外的循环并可能用垃圾填充 floatArray 的其余部分

你也可以得到文件的大小

```
fseek (in_file, 0, SEEK_END);
size=ftell (in_file); 
```

如果要为浮点数组分配更少的内存*

# javascript - 如何访问根元素的子节点？

> ID：10449115
> 
> 赞同：0
> 
> 时间：2012-05-04T12:49:26.270
> 
> 标签：javascript, dom

我正在尝试访问根元素的子节点，但我无法这样做，因为返回的元素都是“未定义的”——包括返回的数组。

```
<html>
<head>
    <script>
        function dothis()
        {
        var elements = document.getElementsByTagName("body").parentNode.childNodes;
        alert(elements.length);
        }
    </script>
</head>
<body onload="dothis();">
    <p>Welcome</p>
    <ul>
        <li>hello</li>
    </ul>
</body>

</html>​ 
```

[http://jsfiddle.net/PrPPM/1/](http://jsfiddle.net/PrPPM/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T12:52:44.297

[`getElementsByTagName`](https://developer.mozilla.org/en/DOM/element.getElementsByTagName)返回一个`NodeList`（根据规范。在某些浏览器中，例如 Firefox，我认为它返回一个`HTMLCollection`）。无论如何，它返回的是一个类似数组的对象。您需要访问特定索引处的元素：

```
var elements = document.getElementsByTagName("body")[0].parentNode.childNodes; 
```

# c# - C# System.Security.Cryptography.HMACSHA1.ComputeHash() 不返回预期结果

> ID：10449129
> 
> 赞同：7
> 
> 时间：2012-05-04T12:50:01.430
> 
> 标签：c#, .net, cryptography

我正在尝试基于 RFC 4226 在 C# 中实现 OTP 解决方案：[https ://www.rfc-editor.org/rfc/rfc4226](https://www.rfc-editor.org/rfc/rfc4226)

我找到了一个示例实现，它看起来像这样：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Security.Cryptography;

namespace OTP
{
    class Program
    {
        static void Main(string[] args)
        {
            System.Text.UTF8Encoding encoding = new System.Text.UTF8Encoding();
            byte[] secretKey = encoding.GetBytes("12345678901234567890");
            byte[] counter = encoding.GetBytes("1");
            Console.WriteLine(CalculateHotp(secretKey, counter));
            Console.ReadKey();
        }

        public static int CalculateHotp(byte[] key, byte[] counter)
        {
            var hmacsha1 = new HMACSHA1(key);
            byte[] hmac_result = hmacsha1.ComputeHash(counter);
            int offset = hmac_result[19] & 0x0f;
            int bin_code = (hmac_result[offset] & 0x7f) << 24
                           | (hmac_result[offset + 1] & 0xff) << 16
                           | (hmac_result[offset + 2] & 0xff) << 8
                           | (hmac_result[offset + 3] & 0xff);
            int hotp = bin_code % 1000000;
            return hotp;
        }
    }
} 
```

问题是调用：

```
byte[] hmac_result = hmacsha1.ComputeHash(counter); 
```

不返回预期结果，因此返回的 OTP 将是错误的。阅读 RFC4226 附录 D ( [https://www.rfc-editor.org/rfc/rfc4226#appendix-D](https://www.rfc-editor.org/rfc/rfc4226#appendix-D) )，有一些测试值可供使用，结果与它们不匹配：

```
From the RFC 4226, Appendix D:
The following test data uses the ASCII string
 "12345678901234567890" for the secret:

  Secret = 0x3132333435363738393031323334353637383930

  Table 1 details for each count, the intermediate HMAC value.

Count    Hexadecimal HMAC-SHA-1(secret, count)
0        cc93cf18508d94934c64b65d8ba7667fb7cde4b0
1        75a48a19d4cbe100644e8ac1397eea747a2d33ab
2        0bacb7fa082fef30782211938bc1c5e70416ff44
3        66c28227d03a2d5529262ff016a1e6ef76557ece
4        a904c900a64b35909874b33e61c5938a8e15ed1c
<snip>

Table 2 details for each count the truncated values (both in
hexadecimal and decimal) and then the HOTP value.

                  Truncated
Count    Hexadecimal    Decimal        HOTP
0        4c93cf18       1284755224     755224
1        41397eea       1094287082     287082
2         82fef30        137359152     359152
3        66ef7655       1726969429     969429
4        61c5938a       1640338314     338314
<snip> 
```

由于我在上面的示例中使用“12345678901234567890”作为键和“1”作为计数器，我希望 ComputeHash() 的结果为：75a48a19d4cbe100644e8ac1397eea747a2d33ab，OTP 为：287082

但我得到了 OTP：906627

我真的看不出我在这里做错了什么，有没有人使用 HMACSHA1 类在 C# 中成功实现了基于计数器的 OTP？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-04T13:04:28.597

您错误地使用了计数器。计数器不应该是一个 ASCII 字符串，它应该是一个大端的数字（长）值。

利用

```
var counter = new byte[] { 0, 0, 0, 0, 0, 0, 0, 1 }; 
```

代替此测试，您的代码将返回正确的 OTP。

# php - JS/PHP 数组合并

> ID：10449131
> 
> 赞同：0
> 
> 时间：2012-05-04T12:50:09.777
> 
> 标签：php, javascript, arrays

我有一个表单，用户可以在其中上传图像并为它们输入标题，然后提交。为了完成它，我集成了AJAXUPLOADER，它不允许一次上传多个图像，但是一张一张，我没有问题。

成功时，它返回上传的文件名，我做什么，我插入一个包含图像文件名作为值的隐藏字段。我插入一个文本字段供用户输入标题。

基本上，我想要一个包含多个文件名和标题的数组，所以我输入了以下代码：

```
 input type="text" name="images[][title]" input type="hidden" value="'+response+'" name="images[][url]" 
```

它工作得很好，但是有一个问题。数组结构使用上面的代码构建：

```
[images] => Array
    (
        [0] => Array
            (
                [title] => Ferrari
            )

        [1] => Array
            (
                [url] => d2339e1d8da95e811c4344eaef226d09.jpg
            )

        [2] => Array
            (
                [title] => Ferrari
            )

        [3] => Array
            (
                [url] => 714208a8c1b819a548a258c33e311e98.jpg
            )

    ) 
```

但是，我希望它们采用这种格式：

```
 [images] => Array
    (
        [0] => Array
            (
                [title] => Ferrari,
                [url] => d2339e1d8da95e811c4344eaef226d09.jpg
            )

        [1] => Array
            (
                [title] => Ferrari,
                [url] => 714208a8c1b819a548a258c33e311e98.jpg
            )

    ) 
```

任何快速帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T13:00:25.317

By declaring indices in your input, that array will automatically be built properly for you, no need to do any fancy array merging.

```
<input type="text" name="images[0][title]" />
<input type="hidden" value="'+response+'" name="images[0][url]" />

<input type="text" name="images[1][title]" />
<input type="hidden" value="'+response+'" name="images[1][url]" /> 
```

So on and so forth :) If you're using a PHP loop to declare your inputs, it's as simple as this.

```
<? for($i = 0; $i < 2; $i++) { ?>
<input type="text" name="images[<?= $i ?>][title]" />
<input type="hidden" value="'+response+'" name="images[<?= $i ?>][url]" />
< } ?> 
```

I hope this helps make your life easier!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T12:55:14.660

命名它`titles[]`，然后在 PHP 中组合它们。

例子：

```
<?php
header("Content-type: text/plain"); //Display only
$urls = array(
    "http://example.com/",
    "http://example.com/images/"
);
$titles = array(
    "Example",
    "Example Images"
);
$images = array();
foreach ($urls as $key => $value) {
    $images[$key]["url"] = $value;
    $images[$key]["title"] = $titles[$key];
}

print_r($images); 
```

# javascript - 未捕获的语法错误：GOOGLE MAPS API V3 中出现意外的令牌非法

> ID：10449136
> 
> 赞同：0
> 
> 时间：2012-05-04T12:50:19.413
> 
> 标签：javascript, maps

我正在尝试在 Google Maps V3 中加载多边形路径，如果编码线很短，一切正常。但如果它更长这样 - 我在上面得到错误。我认为它与“@”字符有某种关系。操作在 Chrome 中！！

```
polyShape.setPath(google.maps.geometry.encoding.decodePath("snfiIwfxtCXhGfEbLzAhJRbPYlPk@jHmCxJMlE?hJeBtE}Ed_@_AxN{AbLkCrGcHlTsDrKoBpNRzH?vE?jHl@pGtA~IfCfFvHpCLnBm@~FqH~[aCzRs@rZg@dI{Hx]qLze@_L|SmHpJyMfFyDoBcHiGuCwBcHtAkAs@MoFiBoF}BViBvEmGvF_ElIuAjDwJvEiB`DB|AhB|DxAnFXhGSpG_GdIgLi@gHbAsB|DWhGeB~F}FzAgAjAwEfMkH|AuBdB{@hCwBzIaBrDIzBR~BPdArCrJd@dE@rKe@vIy@`HK`NKqBrOmBfEsBvK....")); 
```

# magento - Magento 添加 url 链接以打开特定产品选项卡

> ID：10449142
> 
> 赞同：1
> 
> 时间：2012-05-04T12:50:40.647
> 
> 标签：magento, tabs, product

Magento 1.7.0.0

好的，我正在使用现代主题中可用的产品选项卡。我添加了一个自定义选项卡以将评论添加为选项卡 [成功]。

现在它说：

“成为第一个评论此产品的人”我希望此链接转到该页面上的选项卡，而不是转到评论页面。

我意识到我需要一些javascript，但只是我不知道如何调用选项卡。

有任何想法吗？

谢谢。安迪。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T01:50:30.380

如果你已经在使用 jQuery ......你可以像这样简单地“破解”它

```
jQuery(document).ready(function($){
        $("#addreview").attr("href", "#review-form");
        $("#addreview").click(function(){
            $(".product-tabs").children("li").removeClass("active");
            $("#product_tabs_reviews").addClass("active");
            $(".product-tabs-content").css("display", "none");
            $("#product_tabs_reviews_contents").css("display", "block");
        });
    }); 
```

请注意根据您自己的标记更改选择器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T11:35:20.077

我的代码在 tabs.phtml 中如下所示：

```
 <div id="tabs">
<ul>
    <?php foreach ($this->getTabs() as $_index => $_tab): ?>
        <?php if($this->getChildHtml($_tab['alias'])): ?>
            <li class="<?php echo !$_index?' active first':(($_index==count($this->getTabs())-1)?' last':'')?>"><a href="#<?php echo $_tab['alias'] ?>"><?php echo $_tab['title']?></a></li>
        <?php endif; ?>
    <?php endforeach; ?>
</ul>
<div class="clearer"></div>
<?php foreach ($this->getTabs() as $_index => $_tab): ?>
    <?php if($this->getChildHtml($_tab['alias'])): ?>
        <div class="product-tabs-content" id="<?php echo $_tab['alias'] ?>"><?php echo $this->getChildHtml($_tab['alias']) ?></div>
    <?php endif; ?>
<?php endforeach; ?>
</div> 
```

然后添加：jquery-ui-tabs.js 和相关的 .css

# algorithm - 临时作业分配的资源调度算法

> ID：10449144
> 
> 赞同：0
> 
> 时间：2012-05-04T12:50:50.863
> 
> 标签：algorithm, scheduling, job-scheduling

我们正在开发一个使用后端服务器池来处理不同作业的系统。我正在寻找一种算法，该算法将允许为传入的作业请求分配资源。

事先不知道工作的清单或时间表。所以工作的资源分配需要在收到工作请求时进行，我不能提前为所有工作制定完整的计划。不同的作业也会有不同的优先级。更糟糕的是，作业的确切执行时间也无法提前知道。

我们开发了一些工具，这些工具将为我的调度程序提供每个服务器的性能/负载信息。因此，此信息可用于调度目的。

现在基于这些要求和约束，任何人都可以指出任何可用于为此类动态/临时作业开发调度引擎的算法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T09:18:02.843

不幸的是，我找不到任何灵丹妙药来解决我的问题，没有一种算法能够解决我的资源分配问题。因此，我们使用了简单的装箱算法本身，几乎没有使用历史数据进行系统行为预测，并且有几个后台线程根据当前负载进行负载平衡。

所以简而言之，在开始时没有可用的算法来进行资源分配。借助历史行为和当前负载资源平衡可以完成。

# css - CSS 滚动条的跨浏览器兼容性

> ID：10449152
> 
> 赞同：0
> 
> 时间：2012-05-04T12:51:13.813
> 
> 标签：css, internet-explorer, scrollbar

我们正在我们的网站上实现 CSS 滚动条，除了旧版本的 IE（如 IE8）之外，它们在所有浏览器上都能正常工作。我们不能让 IE 处理相同的 CSS/JS 规则以获得相同的输出。正如我们注意到的那样，一些网站已经设法让资源管理器显示自定义栏而不是标准，我想知道是否有人可以分享一些代码，使 CSS 栏独立于浏览器以完全相同的方式显示客户正在使用的。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T13:00:46.263

没有如此神奇的代码可以让网站在所有浏览器上看起来都一样。css/js 的每个问题都要特殊对待，尤其是在 IE 上。

如果您只想将 css 规则应用于 Internet Explorer，您可以使用[IE 条件注释](http://msdn.microsoft.com/en-us/library/ms537512%28v=vs.85%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T13:05:25.803

我将这个用于自定义滚动条，它支持所有主流浏览器，可能你用过这些..!! 反正这里是链接 [http://www.hesido.com/web.php?page=customscrollbar](http://www.hesido.com/web.php?page=customscrollbar)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T13:11:57.833

使用条件注释为 IE8 编写自定义 CSS

```
<!--[if IE 8 ]><html class="ie8"> <![endif]-->
.ie8 .bar {
    your code...
} 
```

# c++ - 如何使用 C++ 驱动程序将 mongodb 数组保存到向量中？

> ID：10449153
> 
> 赞同：5
> 
> 时间：2012-05-04T12:51:14.580
> 
> 标签：c++, mongodb, bson, mongo-cxx-driver

例如，如果我在 shell 中执行此操作

```
> db.numbers.save( { name: "fibonacci", arr: [0, 1, 1, 2, 3, 5, 8, 13, 21] } ) 
```

然后我想进入`arr`我的 C++ 程序。

在我得到 BSONObj 之后，我可以`name`得到

```
std::string name = p.getStringField("name"); 
```

`p`BSON 对象在哪里。

但是从数组中获取元素并将它们保存到 std::vector 中的正确方法是什么？

编辑：

经过更多研究后，我找到了 BSONElement doxygen 文档并制作了这个。

```
std::vector<int> arr;
std::vector<BSONElement> v = p.getField("arr").Array();
for(std::vector<BSONElement>::iterator it = v.begin(); it != v.end(); ++it)
    arr.push_back(it->numberInt()); 
```

但我仍然不确定这是否是正确的方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T16:36:43.727

另外两种方式：

```
// this way is easy but requires exact type match (no int64->int32 conversion)
std::vector<int> ints;
p.getObjectField("arr").vals(ints); // skips non int values
p.getObjectField("arr").Vals(ints); // asserts on non int values 
```

或者

```
// this way is more common and does the conversion between numeric types
vector<int> v;
BSONObjIterator fields (p.getObjectField("arr"));
while(fields.more()) {
    v.push_back(fields.next().numberInt());
}

//same as above but using BSONForEach macro
BSONForEach(e, p.getObjectField("arr")) {
    v.push_back(e.numberInt());
} 
```

或者，您可以将输出保留为 a`vector<BSONElement>`并直接使用它们，但是您需要确保 BSONObj 将比向量寿命更长。

# php - 带有多个页面的jquery mobile ajax帖子

> ID：10449155
> 
> 赞同：0
> 
> 时间：2012-05-04T12:51:27.343
> 
> 标签：php, jquery, html, jquery-mobile

我用 jQuery mobile 构建了一个应用程序，我有一个小问题。

我要翻页：

index.html 测试.html

在这两个页面上，我都使用 ajax 帖子从数据库中获取内容。当我测试应用程序时，index.html 上的结果会显示在屏幕上，所以一切顺利，但是当我导航到另一个页面（如 test.html）时，结果不会显示。当我刷新页面 test.html 时，结果显示在屏幕上。现在，当我返回 index.html 时，结果消失了。

我在 Chrome 上测试过。

我希望有人能告诉我问题是什么。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T12:56:32.843

jQuery Mobile**仅从第一页头**加载脚本，因此您应该在索引头中放入 test.html 页面的所有脚本（或包含的脚本）。您甚至可以从其他页面中删除 head 标签。

# .net - 如何绑定按钮以关闭窗口样式的命令

> ID：10449161
> 
> 赞同：0
> 
> 时间：2012-05-04T12:51:48.343
> 
> 标签：.net, wpf, xaml

我想创建一个窗口样式的自定义关闭按钮，它依赖于窗口的关闭命令。我写了这样的东西：

```
<Style x:Key="WindowsGeneralStyle"  TargetType="Window">
   ...
    <Setter Property="Template" >
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type Window}">
                <Grid>
                     ...
                     <Button x:Name="closebtn" Command={Binding Close} ... />
                </Grid> 
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

但它没有用。这是怎么做的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T05:19:25.367

我解决了问题。我为我们的 ResourceDictionary 创建了一个部分类，并在后面的代码中处理了关闭按钮单击事件：

资源字典 XAML 文件：

```
 <ResourceDictionary ...  x:Class="MyNameSpace.WindowStyle">
    ...
    <Style x:Key="WindowsGeneralStyle"  TargetType="Window">
            <Setter Property="Template" >
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type Window}">
                        <Grid>
                             ...
                             <Button x:Name="closebtn"  Click="CloseBTN_Clicked" ... />
                        </Grid> 
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
</ResourceDictionary> 
```

和后面的代码：

```
namespace MyNameSpace
{
    public partial class WindowStyle
    {
        private void CloseBTN_Clicked(object sender, RoutedEventArgs e)
        {
            Window.GetWindow(((FrameworkElement)e.Source)).Close();
        }
    }
} 
```

现在，它工作得很好！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T12:57:16.667

`{Binding Close}`试图绑定到*当前*`Close`的命令，你可能想要类似.*`DataContext`*`{x:Static ApplicationCommands.Close}`

# c# - 我的 Windows 服务无法识别进程

> ID：10449167
> 
> 赞同：1
> 
> 时间：2012-05-04T12:52:23.237
> 
> 标签：c#

我用 C# 编写了一个 Windows 服务应用程序，以查找配置的应用程序是否在进程中运行。例如，如果我配置了 OUTLOOK 并检查了应用程序进程列表，如果 Outlook 打开/关闭，如果我的应用程序在进程列表中没有找到 OUTLOOK，那么它会通过电子邮件告诉我你的应用程序 OUTLOOK 已关闭或崩溃。

当我尝试在代码中运行它时，它只会在 OUTLOOK 关闭时发送电子邮件，但是当我使用 Service 运行时，即使 OUTLOOK 正在运行，它也会发送电子邮件。

谁能解释一下为什么我的服务无法识别应用程序进程列表中的应用程序。

```
 public void GetListofApplications(List<string> applicationsInConfig)
    {
        if (AppsInActive.Count > 0)
        {
            AppsInActive.Clear();
        }
        StringBuilder sb = new StringBuilder();
        foreach (Process p in Process.GetProcesses("."))
            try
            {
                if (p.MainWindowTitle.Length > 0)
                {
                    APPsInProcess.Add(p.ProcessName.ToString());
                }
            }
            catch(Exception ex)
            {
                Logger.Log("Exception in Finding Process" + ex);
            }

        foreach (var application in applicationsInConfig)
        {
            if (APPsInProcess.Contains(application))
            {
                AppsActive.Add(application);
            }
            else
            {
                AppsInActive.Add(application);
            }
        }

        foreach (var item in AppsInActive)
        {
            Logger.Log("Following application is either crashed/closed :" + item);
        }

        Helper.EmailSetup setup = new Helper.EmailSetup();
        setup.ApplicationFailedEmailSetup(AppsInActive, DateTime.Now);
               } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T13:20:36.983

尝试以这种方式检查OUTLOOK

```
 var _proc = Process.GetProcesses().Where(o => o.ProcessName.Contains("OUTLOOK"));
            if (_proc.Count()>0)
            {
            } 
```

首先尝试仅查找前景，如果这没有帮助，请发表评论

# python - 用另一个 QuerySet 过滤一个 QuerySet

> ID：10449168
> 
> 赞同：0
> 
> 时间：2012-05-04T12:52:25.670
> 
> 标签：python, django

嗨，我的英语不太好，但我会尽力解释自己。我正在使用 python 和 Django 创建一个 Web 项目。我有这 4 个模型（这是我可以对表格和字段进行的最佳翻译）：

```
class Humans (models.Model): 
    name = models.CharField(max_length=15)
    surname = models.CharField(max_length=15)
    doc_num = models.CharField(max_length=11)
    ...

class Records (models.Model): 
    closing_state = models.CharField(max_length=2)
    ...
    humans = models.ManyToManyField(Humans, through='Reco_Huma')

class Reco_Huma (models.Model): 
    id_record = models.ForeignKey(Records)
    id_human = models.ForeignKey(Humans)
    categorys = models.CharField(max_length=2)
    reserv_identity = models.CharField(max_length=2)
    repre_entity = models.CharField(max_length=2)

class Observations (models.Model): 
    id_record = models.ForeignKey(Records)
    text = models.CharField(max_length=80)
    category = models.CharField(max_length=2, choices=CAT) 
```

现在给定一个来自 Humans 的 doc_num，一个来自 Observations 的文本，我想获得所有记录的 QuerySet。

为了澄清我首先这样做：

```
q1 = Reco_Huma.objects.filter(id_human.doc_num=x)
q2 = Observations.objects.filter(text=y) 
```

两个查询集都给了我一个 id_record 列表，然后我想纵容该列表并使用该 id_record 过滤 Records 表

我希望你能理解我

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T13:11:23.513

重新表述您的查询，您需要与某个 Human 相关联并且具有某个 Observation 的所有记录。所以应该是：

```
result = Records.objects.filter(observations__text=y, humans__doc_num=x) 
```

作为一般规则，如果您想以某种类型的对象结束，在查询中从那里开始会有所帮助。

# django - Django + Tastypie 的分析

> ID：10449172
> 
> 赞同：3
> 
> 时间：2012-05-04T12:52:36.703
> 
> 标签：django, profiling, tastypie

在使用 Tastypie 的 Django 应用程序上进行分析的最佳工具是什么（所有响应或 JSON，所以 django_toolbar 在这种情况下不好）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-30T03:17:28.250

一种可能的解决方案是创建一个仅将 TastyPie 响应呈现为 HTML 的视图。这将允许 django-debug-toolbar 输出正确的分析数据。以下是一个相当快速和肮脏的尝试。

## 在 urls.py 中：

只需将以下行添加到您的 url 模式中，但请确保仅在启用调试时才包含它。

```
(r'^api_profile/(?P<resource>.*)$', 'common.views.api_profile') 
```

## 在 common/views.py 中：

将此视图放置在您想要的任何位置，我已将其放在我的常用应用程序中。

```
from django.shortcuts import render_to_response
# Import the tastypie.api.Api object with which your api resources are registered. 
from apps.api.urls import api

def api_profile(request, resource):
    """ Allows easy profiling of API requests with django-debug-toolbar. """
    context = {}
    resource = resource.strip('/')
    resource = api.canonical_resource_for(resource)
    obj_list = resource.wrap_view('dispatch_list')(request)
    response = resource.create_response(request, obj_list)
    context['api_response'] = response
    return render_to_response('common/api_profile.html', context) 
```

## 在模板/common/api_profile.html 中：

包括一个非常简单的模板。

```
<body>
    {{api_response}}
</body> 
```

现在，您可以在启用 django-debug-toolbar 的情况下导航到“/api_profile/a_resource/”，并获取用于生成 a_resource 列表视图的分析数据。也可以使用请求参数，例如我一直在分析请求'api_profile/posts/?limit=8&offset=16'。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-09T23:28:50.913

如果您想付款，[New Relic很好。](http://www.newrelic.com)您还可以在[https://github.com/shaunsephton/django-snippetscream](https://github.com/shaunsephton/django-snippetscream)中使用 hotshot profiler 快速查看正在发生的事情

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-06T14:17:20.360

我使用这个中间件-> [https://djangosnippets.org/snippets/2126/](https://djangosnippets.org/snippets/2126/)

正如评论所述，只是

> 通过将其添加到您的 MIDDLEWARE_CLASSES 来安装它。如果您以超级用户身份登录，或者当 settings.DEBUG 为 True 时，它​​始终处于活动状态。要使用它，请将 'profile=1' 作为 GET 或 POST 参数传递给任何 HTTP 请求。

它将创建一个交互式 HTML，显示执行的查询、时间、方法……你应该试一试！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T09:57:40.040

我从未真正尝试过分析 django 应用程序。但前段时间我读过一篇关于这个主题的有趣文章。 [http://reinout.vanrees.org/weblog/2012/04/18/profiling-python.html](http://reinout.vanrees.org/weblog/2012/04/18/profiling-python.html)

# c# - 截取 Sitecore 中页面的渲染 HTML/运行时 HTML

> ID：10449176
> 
> 赞同：0
> 
> 时间：2012-05-04T12:52:42.940
> 
> 标签：c#, xhtml, sitecore, httpresponse

目前，我希望在主要的“内容”部分之外创建一个页面层次结构，以使其与其他部分分开，并与所有其他跨站点数据一起保存。我能够以我想要的方式分配布局、子布局和获取内容。

但是，我需要将内容作为 XHTML（目前非常简单的 XHTML）来通过 iTextSharp 和 Html Tidy 或等价物推送它。是否有我可以挂钩的管道或事件，以便我可以获得大部分页面或所有页面响应？

我注意到`Sitecore.Layouts`命名空间包括`Converter`、`DesignTimeHtml`和`RuntimeHtml`，后者引用了`convertToRuntimeHtml`管道，它似乎传递了一个 HtmlDocument。这些似乎是与所见即所得编辑器相关的管道。

如果不存在这样的东西，找到页面上的所有控件然后将它们呈现出来会接近 Sitecore 呈现的内容吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T13:07:19.227

您也许可以在`renderLayout`管道中添加自定义处理器。我建议你真的只是为各种管道创建一个处理器，看看你可以为它们访问什么。一种简单的方法是反编译`Sitecore.kernel.dll`并查看`kernel\Sitecore.Pipelines.{the pipeline name here}\{the pipeline name here}Args.cs`. 一旦您调查了每个管道的 args 对象，就可以帮助您了解哪个 args 对象可以访问您在 C# 中所需的内容。从那里您可以测试该管道中的实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T14:10:47.197

我不确定您是否具有在 Sitecore 管道中访问渲染的 HTML 输出所需的低级别访问 a `System.Web.UI.Control`，这最终归结为子布局。而且我几乎可以肯定，没有 Sitecore 管道可以拥有整个渲染页面。

从我在快速查看 Reflector 时看到的情况来看，`RenderLayout`Sitecore 管道将允许您修改流程，因为子布局项与其用户控制对应项链接在一起。然后`RenderingReference`添加到`Sitecore.Context.PageContext`. 然后`Sitecore.Web.UI.WebControls.Placeholder`负责获取所有内容`RenderingReferences`并调用 System.Web.UI.Control.RenderControl()` 方法。

由于 Sitecore 正在调用`System.Web.UI.Control.RenderControl()`您的所有子布局并基本上将输出扔到浏览器，而不通过管道推送呈现的 HTML，您可能希望查看非 Sitecore 解决方案。

您可以覆盖`Render(HtmlTextWriter writer)`用户控件上的所有方法，但这是很多重复的编码（除非您有一个基本控件？）。您最好的选择可能是在整个页面生成并即将发送到客户端之后使用 ASP.NET HttpModule 进行格式化。这是一个例子 - [http://madskristensen.net/post/A-whitespace-removal-HTTP-module-for-ASPNET-20.aspx](http://madskristensen.net/post/A-whitespace-removal-HTTP-module-for-ASPNET-20.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T13:20:48.187

我最近这样做了，发现`<convertToRuntimeHtml>`管道对我不起作用。相反，我已将我的处理器添加到`<renderField>`管道中，该管道至少适用于该`sc:fld`功能（因此也适用于`<sc:text>`标签）。

这是我的处理器的代码：

```
public class ContentVariablesProcessor
{
    public void Process(Sitecore.Pipelines.RenderField.RenderFieldArgs args)
    {
        if (args != null)
        {
            // Manipulate output
            args.Result.FirstPart = "my output";
        }
    }
} 
```

# keyboard - Enter 键在 Netbeans 7.1 上不起作用

> ID：10449177
> 
> 赞同：2
> 
> 时间：2012-05-04T12:46:29.860
> 
> 标签：keyboard, netbeans

我在 Debian 下安装了带有 PHP 扩展的 Netbeans，但回车键在代码编辑器上不起作用。仅在 PHP 项目中，它在 Java 项目中运行良好。

**更新：**

我更新到 Netbeans 7.1.2，它工作正常！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T09:45:25.573

也来自[http://forums.netbeans.org/topic46466.html](http://forums.netbeans.org/topic46466.html)

“...通过单击左侧的信息图标解决了这个问题

似乎默认值为 HTML 5 - 这会生成解析器异常。将项目默认设置为上述设置后，我可以正常使用 ENTER - 即使在新打开的文件上也是如此。”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-03T05:59:41.980

请单击文件顶部的信息（灯泡图标）或从您开始 php 代码的位置。单击灯泡后，选择“将项目默认设置为 HTML 4.01 过渡”选项，现在您可以正常使用 Enter 键。请检查下面附上的屏幕截图。

[![在此处输入图像描述](../Images/51774a8b86bc04d7f3613f29d9de27b1.png)](https://i.stack.imgur.com/mltm3.png)

# mysql - DBI：如果第一个数据库不存在，则连接到不同的数据库

> ID：10449189
> 
> 赞同：6
> 
> 时间：2012-05-04T12:53:17.437
> 
> 标签：mysql, perl, dbi

我正在尝试对我们的一些遗留代码进行排序，这些代码有两个目的。它使用 DBI*创建*数据库，然后使用 DBI*连接*到该数据库。不幸的是，它对每个都使用了相同的代码。这意味着如果您创建一个`sales`数据库，稍后在使用 reconnect 时，您必须显式调用`$dbh->do('use sales')`. 这会导致各种问题，例如开发人员忘记这样做或数据库处理重新连接并忘记它在哪个数据库中。

作为第一次修复，我们尝试做的是在数据库不存在时`DBI::connect()`使用该方法重新连接到 MySQL，从而允许我们创建数据库。`HandleError`由于各种遗留原因（是的，我们都去过那里），尝试在`connect()`方法之外捕获“未知数据库”错误要困难得多。

因此，我第一次解决这个问题如下：

```
use strict;                                                                                                                                               
use warnings;
use DBI;
use PadWalker 'peek_my';
my $dbh = DBI->connect(
    $dsn,
    $user,
    $pass,
    {   RaiseError  => 1,
        PrintError  => 0,
        HandleError => \&reconnect_if_unknown_database,
    },
);

sub reconnect_if_unknown_database {
    my ($msg, $drh, $dbh) = @_;
    return unless $msg =~ /Unknown database/;

    my ($dsn, $user, $pass, $attr) = @{peek_my(1)}{qw/$dsn $user $pass $attr/};

    unless ($dsn && $user && $pass && $attr) {
        return;    # don't do this if we can't get everything
    }

    # they're all scalar refs.
    $_ = $$_ foreach $dsn, $user, $pass, $attr;

    unless ($dsn =~ s/^[^;]+;/DBI:mysql:mysql;/) {
        return;    # can't parse dsn, so return
    }
    delete $attr->{HandleError};    # infinite loops tickle

    $_[2] = DBI->connect($dsn, $user, $pass, $attr);
} 
```

这行得通，而且它目前对最终用户是透明的，但它也感觉像是一堆热气腾腾的 1 和 0。有没有更好的方法在连接失败时重新连接到*不同的数据库？*

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T14:36:49.497

我不确定这是否可行，但它可能比使用更好`PadWalker`：

```
use strict;use warnings;
use DBI;

my %attr = (RaiseError => 1, PrintError => 0);

my $dbh = DBI->connect(
    $dsn,
    $user,
    $pass,
    {
        %attr,
        HandleError => sub {
            reconnect_if_unknown_database(
                $dsn, $user, $pass, \%attr, @_
            )
        },
    },
);

sub reconnect_if_unknown_database {
    my ($dsn, $user, $pass, $attr, $msg, $drh, $dbh) = @_;

    return unless $msg =~ /Unknown database/;

    return unless $dsn =~ s/^[^;]+;/DBI:mysql:mysql;/;

    $_[-1] = DBI->connect($dsn, $user, $pass, $attr);
} 
```

# java - ANT 可以更改 XML 文件中的值吗？

> ID：10449191
> 
> 赞同：2
> 
> 时间：2012-05-04T12:53:19.823
> 
> 标签：java, spring, ant

ANT 可以更改 XML 文件中的值吗？

我正在研究 Java、Spring 系统，并且在 XML 文件中，我们有服务器名称、用户名、密码之类的东西，对于我们正在推广系统的每个环境都必须更改。我想让 ANT 脚本询问 SA 的服务器名称、用户名，然后替换 xml 文件中的值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T12:56:54.093

我曾经有像 @someProperty@ 这样的占位符并进行直接搜索和替换，但您可以使用[XmlTask](http://www.oopsconsultancy.com/software/xmltask/)​​ 。我们使用它来更改 EAR 的上下文根 - 由于 XML 命名空间废话，它不是很漂亮：

```
<xmltask source="META-INF/application.xml"  report="true" failwithoutmatch="true" dest="META-INF/application.xml">
     <replace path="//*[local-name()='application']//*[local-name()='module'][@id='WebModule_XXXX']//*[local-name()='web']//*[local-name()='context-root']/text()" withText="${contextRoot}"/>
</xmltask> 
```

但是要更改您想要的内容，我们现在使用 Spring 3.1 配置文件，我们所做的就是在属性文件中切换环境配置文件。我们有用于开发、自动化 uat、qa 和生产的单独配置文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T12:55:47.653

查看[Ant 替换任务](http://ant.apache.org/manual/Tasks/replace.html)以进行字符串替换，只需为您的占位符选择合适的字符串。

[输入任务](http://ant.apache.org/manual/Tasks/input.html)可用于收集所需的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T13:19:04.580

您还可以考虑从 PropertyPlaceholderConfigurator 加载 Spring xml 文件中的属性。然后，您可以将您的属性保存在标准的 Java .properties 文件中，并在通过层级推广您的项目时根据需要进行编辑。这里有一个不错的例子：[example](http://www.zparacha.com/how-to-read-properties-file-in-spring/#.T6PWlL_kXqc)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-13T08:50:01.840

您可以使用 Guillaume Polet 评论所指示的蚂蚁过滤器。我也遵循了同样的方法，它解决了我的问题。有关详细信息，请参阅[https://ant.apache.org/manual/Tasks/filter.html](https://ant.apache.org/manual/Tasks/filter.html)。

# google-closure-compiler - 使用 Google Closure Compiler 部分跳过部分

> ID：10449195
> 
> 赞同：1
> 
> 时间：2012-05-04T12:53:44.347
> 
> 标签：google-closure-compiler

我正在服务器上生成一个 javascript，并希望运行 Google Clousure Compiler 以在脚本的 php 源代码上运行。

```
var jsvar = <?=$var ? true : false ?>; 
```

如果有什么方法可以告诉编译器跳过 ? 就像一个正则表达式跳过：

```
/<\?=.*?\?>/ 
```

最好的祝福，

尼古拉斯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-05T13:20:40.647

我发现当我将客户端 JavaScript 与服务器端逻辑分开时，我的代码更容易维护。现在我编写脚本，以便我的服务器端处理发出初始化变量。

示例 - 服务器端：

```
<?php echo 'var mynamespace = {}; mynamespace.jsvar = "' . $var . '";'; ?> 
```

在我的客户端javascript中：

```
var mynamespace = window['mynamespace'] || {};
function MyFunction() {
  alert(mynamespace['jsvar']);
}
MyFunction(); 
```

使用这种风格，我的客户端 javascript 可以使用 Closure-compiler 轻松编译。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-04T20:09:11.030

你可以这样做：

```
var jsvar = eval("<?=$var ? true : false ?>"); 
```

编译器不会触及字符串的内容。

# javascript - 如何确定是否定义了 JavaScript 函数？

> ID：10449197
> 
> 赞同：3
> 
> 时间：2012-05-04T12:53:49.307
> 
> 标签：javascript

我想检查是否定义了一个函数（我不在乎如何，我的意思是它是可调用的）

示例代码：

```
var functions = {
    'alert':'alert',
    'undefinedFunction':'undefinedFunction',
    'ff.showAlert':'ff.showAlert'
};

var ff = {
    showAlert: function() {
        alert('the function works');
    }
};

for (i in functions) {
    console.log(i+' : '+typeof window[functions [i]]);
} 
```

这返回：

```
alert : function
undefinedFunction : undefined
ff.showAlert : undefined

console.log(typeof window.ff.showAlert); return function 
```

[现场演示](http://jsfiddle.net/GrJbC/3/)
有没有办法以编程方式检查函数是否存在？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T13:08:27.720

编码：

```
window[functions [i]] 
```

正在检查，`window['ff.showAlert']`但您真正要检查的是：

```
window['ff']['showAlert'] 
```

或者

```
window.ff.showAlert 
```

为此，您需要遍历命名空间（`window`-> `ff`->...）：

```
function methodIsDefined(fn, obj) {
  var ns = fn.split('.');
  fn = ns.pop();
  do {
    if (!ns[0]) {
      return typeof obj[fn] === 'function';
    }
  } while(obj = obj[ns.shift()]);
  return false;
} 
```

例如

```
methodIsDefined('ff.showAlert', window); // => true
methodIsDefined('ff.foo', window); // => false 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T13:01:14.807

您的问题在于命名空间。字符串`"ff.showAlert"`不引用函数`window['ff']['showAlert']`，而是引用`window['ff.showAlert']`，这是一个重要的区别。您声明的函数实际上是由`window['ff']['showAlert']`. 因此，您正在检查其存在的地方是错误的。

如果要检查此类命名空间函数的存在，首先必须拆分字符串，然后遍历 DOM 以找到正确的属性。代码将类似于以下内容（未经测试！）：

```
function checkFunction( name ) {

  var path = "ff.showAlert".split( '.' ),
      runner = window;

  for( var i=0; i<path.length; i++ ) {
    if( path[i] in runner ) {
      runner = runner[ path[i] ];
    } else {
      return false;
    }
  }
  return runner;
} 
```

**编辑**

正如@VirtualBlackFox 在评论中指出的那样：上述解决方案仅在函数在`window`-scope 之下声明时才有效。如果它在另一个函数的范围内，则必须将该范围作为附加参数传递并在那里搜索。

即使在这种情况下，您也无法检查例如在某些闭包结构中定义的函数是否存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T13:14:11.107

您需要拆分多部分函数名称，例如`'ff.showAlert'`. 此外，由于您指定为 var，除非它超出任何函数范围，否则它`ff`不会成为成员。`window`它是否来自您的代码示例还不是很清楚。

无论如何，下面的函数允许您传入一个基础对象，以防您需要指定一个以外的对象`window`，并且它会拆分多部分函数名称：

```
function isFnDefined(fnName, baseObj) {
    try {
        var parts = fnName.split('.'),
            ii;

        // If no baseObj was provided, default to 'window'.
        baseObj = baseObj || window;

        for (ii in parts) {
            baseObj = base[parts[ii]];
        }

        return typeof baseObj === 'function';
    }
    catch (e) {
        return false;
    }
}​

isFnDefined('alert');          // returns true
isFnDefined('undefinedFunc');  // returns false
isFnDefined('ff.showAlert');   // returns true, if ff is a member of window 
isFnDefined('showAlert', ff);  // returns true 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-04T13:02:01.910

您需要使用 eval()：[http ://www.w3schools.com/jsref/jsref_eval.asp](http://www.w3schools.com/jsref/jsref_eval.asp)

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-05-04T13:03:10.860

您有一个代表当前范围内某些内容的字符串，并且您想知道它是什么，解决方案是评估该字符串。

```
var f = undefined;
try
{
    f = eval(functions[i]);
}
catch(ReferenceError) {}
console.log(typeof f); 
```

但是为什么要在输入对象中存储字符串而不是函数本身呢？

此外，如果您可以强制每个字符串成为相对于窗口的引用（当前范围内没有“var”或来自另一个范围的关闭），那么[@Sirko](https://stackoverflow.com/users/1169798/sirko)解决方案可能是最好的解决方案。

# java - 我想用 Java 中的 String replaceAll 方法用新值替换整个字符串

> ID：10449198
> 
> 赞同：8
> 
> 时间：2012-05-04T12:53:55.060
> 
> 标签：java

```
String x = "Welcome to Java World";
System.out.println(x.replaceAll(".*","JAVA"));
Actual Output = "JAVAJAVA" .
Excepted Output = "JAVA". 
```

任何人都可以帮助为什么它会像这样替换。".*" 原始字符串中的所有字符并将其替换为 "JAVA" 。为什么这会返回 "JAVAJAVA" 。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-04T13:03:44.997

您的正则表达式可以匹配 0 到所有字符。首先，它匹配整个 string `"Welcome to Java World"`，然后匹配 string 的结尾`""`，将两者都替换为`"JAVA"`。

为了使这项工作按您的预期工作，您有几个选择。

```
String x = "Welcome to Java World";
System.out.println(x.replaceAll(".+","JAVA")); 
```

注意 + 而不是 *，这意味着 1 或多个，所以结尾不会匹配。

或者

```
String x = "Welcome to Java World";
System.out.println(x.replaceFirst(".*","JAVA")); 
```

这只会用 替换整个字符串`"JAVA"`，不会替换字符串的空端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T13:06:16.123

你不需要`replaceAll`你的使命。完全相同的语义是通过简单地陈述来实现的

```
System.out.println("JAVA"); 
```

由于`String`在 Java 中是不可变的，因此您无法避免获取新对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T13:07:43.917

为什么使用“replaceAll”而不是“=”？字符串在java中是不可变的

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-04T13:22:55.870

您还可以使用以下格式 x.replaceAll(".*\z", "JAVA");

因为 .* 将匹配到字符串结尾之前，而 \z 将匹配字符串字符的结尾。

# php - 使用 cURL 从网页中获取 html 并使用 preg-replace 剥离 html

> ID：10449200
> 
> 赞同：3
> 
> 时间：2012-05-04T12:54:02.680
> 
> 标签：php, html, regex, curl, preg-replace

我想从 The Pirate Bay 获取统计数据，可以在 TPB 的以下 div 中找到统计数据：

```
<div id="stats">5.695.184 registered users Last updated 14:46:05.<br />35.339.741 peers (25.796.820 seeders + 9.542.921 leechers) in 4.549.473 torrents.<br />    </div> 
```

这是我的代码：

```
<?php
    $ch = curl_init();
    $timeout = 5;
    curl_setopt($ch, CURLOPT_URL,"http://thepiratebay.se"); 
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch,CURLOPT_CONNECTTIMEOUT,$timeout);
    curl_setopt($ch,CURLOPT_COOKIE,"language=nl_NL; c[thepiratebay.se][/][language]=nl_NL");
    $data=curl_exec($ch);
    $data = preg_replace('/(.*?)(<div id="stats">)(.*?)(<\/div>)(.*?)/','$2',$data);
    echo $data; 
    curl_close($ch); 
    exit;
?> 
```

如您所见，我使用以下`preg-replace`模式来剥离 HTML：

```
$data = preg_replace('/(.*?)(<div id="stats">)(.*?)(<\/div>)(.*?)/','$2',$data); 
```

但这行不通。我得到了整个 TPB 页面，而不仅仅是统计数据。有人有答案吗？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T13:08:03.090

忘记使用正则表达式进行屏幕报废，改用[domDocument](http://php.net/manual/en/class.domdocument.php)，看看它是多么简单：

```
<?php 
function curl_get($url){
    $useragent = 'Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 5.1; .NET CLR 1.0.3705; .NET CLR 1.1.4322; Media Center PC 4.0)';
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL,$url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch,CURLOPT_CONNECTTIMEOUT,5);
    curl_setopt($ch, CURLOPT_USERAGENT, $useragent);
    curl_setopt($ch,CURLOPT_COOKIE,"language=nl_NL; c[thepiratebay.se][/][language]=nl_NL");
    $data=curl_exec($ch);
    curl_close($ch);
    return $data;
}

function get_pb_stats(){
    $html = curl_get("http://thepiratebay.se");
    // Create a new DOM Document
    $xml = new DOMDocument();

    // Load the html contents into the DOM
    @$xml->loadHTML($html);

    $return = trim($xml->getElementById('stats')->nodeValue);
    //regex to add the brake tag after 15:04:05\. 
    $return = preg_replace('/\d{2}[:]\d{2}[:]\d{2}[.]/','${0}<br />',$return);
    return $return;
}

echo get_pb_stats();

/*
5.695.213 geregistreerde gebruikers Laatste update 15:04:05.<br />35.505.322 peers (25.948.185 seeders + 9.557.137 leechers) in 4.546.560 torrents.
*/
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T13:10:01.620

为什么不使用 preg_match()？

```
preg_match('/<div id="stats">(.*)<br \/>/Usi', $data, $m);
$stats = $m[1]; 
```

# python - 从 python 调用 bash

> ID：10449201
> 
> 赞同：1
> 
> 时间：2012-05-04T12:54:04.230
> 
> 标签：python, bash, stdout, stdin

我有一个调用 bash 脚本的 python 脚本。bash 脚本编译了几个模块，我想在运行时看到编译结果打印在屏幕上。

无论如何，最重要的是 bash 脚本在运行时需要用户提供相当多的输入。如何让我的 python 脚本为 bash 脚本提供标准输入/标准输出？

目前我正在使用

```
(_stat, _resl) = commands.getstatusoutput("./myBashScript") 
```

但是通过这种方式，当 bash 正在运行时，用户不会受到任何提示......

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T13:04:40.070

如果您使用`subprocess`（如您所愿！）并且不指定 stdin/stdout/stderr，它们将正常运行。例如：

```
# lol.py
import subprocess
p = subprocess.Popen(['cat'])
p.wait()

$ python lol.py
hello
hello
catting
catting 
```

您也可以随意处理`stdout`：

```
# lol.py
import subprocess

p = subprocess.Popen(['cat'], stdout=subprocess.PIPE)
p.wait()

print "\n\nOutput was:"
print p.stdout.read()

$ python lol.py
hello
catting

^D

Output was:
hello
catting 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T13:08:13.667

试试[envoy 库](https://github.com/kennethreitz/envoy)。

```
import envoy
r = envoy.connect('./myBashScript')
r.send('input text') # send info on std_in
r.expect('output text') # block until text seen
print r.std_out # print whatever is in the std_out pipe 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T13:00:43.570

您可以使用 os.system 为此打开一个终端窗口，例如 gnome-terminal，以运行 bash 脚本。

# javascript - Dojo要求，模块加载失败时连接错误

> ID：10449207
> 
> 赞同：8
> 
> 时间：2012-05-04T12:54:15.653
> 
> 标签：javascript, error-handling, dojo, requirejs

当我尝试加载不存在的模块时，它会失败并出现 404 错误（当然）。我想处理这个错误，但不知道如何连接到“错误”事件。

根据 Dojo doc，我应该可以使用[它的 micro event api](http://livedocs.dojotoolkit.org/loader/amd#the-micro-event-api)来做到这一点。

此代码不起作用。

```
var handle = require.on('error', function( error )
                 {
                     alert('Finally error')
                 });

require(['nonexistent/module'], function ( m )
{
     alert('Module was loaded correctly')           
}); 
```

Dojo 版本是 1.7.1，浏览器最新的 Chrome。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T00:02:22.477

关于这个的文档*有点*好奇。在 xhr 要求失败后，我*可以*在短暂的超时 (dojoConfig.waitSeconds) 后触发“错误”事件，但只能在异步模式下，并且只能使用 Dojo 的开发版本。

为什么？好吧，只有异步模式会引发事件，看起来 CDN 构建是使用 dojo-timeout-api == 0 构建的。

您可以使用自己的自定义 (SDK) 版本的 Dojo 吗？

@mschr - 如果您使用 Dojo（每晚）而不是 Dojo 1.7.2，则您的 jsfiddle 示例有效 - 与上述相同的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T16:11:38.370

用调试集试试

```
<script src="{{baseUrl}}/dojo/dojo.js" data-dojo-config="async:true, debug: true, debugAtAllCost:true"></script> 
```

编辑; 没有这样的运气 - 似乎文档在这里实施之前..

为可能找到解决方案而创建了一个小提琴，概念很好，我自己会喜欢使用它

[http://jsfiddle.net/seeds/h6bXQ/](http://jsfiddle.net/seeds/h6bXQ/)

# sql - 创建后更改数据库设计

> ID：10449208
> 
> 赞同：2
> 
> 时间：2012-05-04T12:54:20.677
> 
> 标签：sql, sql-server, database, sql-server-2008, database-design

我有一个包含许多列的现有数据库。其中之一是“语言”，它指示行中其他数据的语言。

如果数据库中还没有几千行，我希望实现的设计很容易编辑。

我想做的是选择所有不同的语言（英语、西班牙语、法语、昆雅语......）——我们可以假设这些都是小写的，并将这些数据放入自己的表中。

我希望创建的表结构简单：

```
Language ID    |   Language   |   Shorthand for language
1              |    English   |    en-us 
```

然后我希望编辑我的原始表格，并在“语言”列（我将删除）的地方，我希望输入相应语言 ID 的编号。

因此，例如，英文行将如下所示：

```
IrrelevantInfo   |   LanguageID
foobar           |     1 
```

我可以在不丢失所有数据的情况下做到这一点吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T13:02:56.880

确实。

像这样的东西应该工作：

```
CREATE TABLE Languages (id int identity NOT NULL PRIMARY KEY, 
                        [Language] varchar(100), 
                        Shorthand varchar(100))

BEGIN TRAN -- We do a transaction here to ensure consistency

INSERT INTO Languages ([Language])
SELECT DISTINCT [Language]
FROM MySourceTable

-- Update the shorthands later

ALTER TABLE MySourceTable
ADD LanguageID int 
FOREIGN KEY REFERENCES Languages(id)

UPDATE t
SET LanguageID = l.id
FROM MySourceTable T
INNER JOIN Languages l
    ON l.[Language] = t.[Language]

ALTER TABLE MySourceTable
DROP [Language]

COMMIT TRAN 
```

我还强烈建议在`LanguageId`字段上添加索引，并重建所有索引，尤其是聚集索引。添加和删​​除列会对表和索引的碎片造成严重破坏。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T13:02:01.813

当然有可能。

1.  创建新的语言表。
2.  将现有表中的不同语言插入到语言表中。
3.  将该列添加`LanguageID`到现有表中。
4.  `LanguageID`使用带有连接列的语言表更新现有表`language`。
5.  `language`从现有表中删除该列。

# php - Magento 没有使用正确的数据库详细信息

> ID：10449210
> 
> 赞同：0
> 
> 时间：2012-05-04T12:54:29.387
> 
> 标签：php, magento, e-commerce

在将 Magento 商店移动到新服务器的过程中。

为 Magento 1.5.1 复制了文件的干净副本，然后复制了 app/media/shin 文件夹以覆盖干净的文件夹。

尽管 local.xml 中的详细信息 100% 正确，但一切似乎都很好，除了我的 PDO 权限被拒绝。

我已经擦除了缓存文件夹。

有任何想法吗？

* * *

排序后，我一定错过了一些东西，但是擦掉很多东西并重新开始似乎可以解决它。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T13:50:52.523

例如，您确定没有在 local.bak.xml 中留下旧信息吗？Magento 读取 /app/etc 中的每个 xml 文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T13:10:21.747

返回什么主页？您是否更改了数据库中的值？检查此查询。

```
SELECT * FROM core_config_data WHERE path = 'web/unsecure/base_url' OR path = 'web/secure/base_url'; 
```

# maven - 如何将自定义构建的 jar 文件注册为 maven 主工件？

> ID：10449216
> 
> 赞同：11
> 
> 时间：2012-05-04T12:54:52.397
> 
> 标签：maven, jar, maven-antrun-plugin, gmaven-plugin

我有一个项目预计会提供一个 jar 文件：

```
<packaging>jar</packaging> 
```

但是 jar 是以自定义方式构建的，因此使用 jar:jar 完成的默认打包已被禁用

```
<plugin>
  <artifactId>maven-jar-plugin</artifactId>
  <version>2.3.2</version>
  <executions>
    <execution>
      <id>default-jar</id>
      <phase>none</phase>
    </execution>
  </executions>
</plugin> 
```

但是当我想在现有 jar 上应用 shade:shade 时出现错误

> 项目主工件不存在。

我假设 maven 不知道我的自定义工具创建的 .jar 文件。如何让它知道，因为[antrun attachArtifact](http://maven.apache.org/plugins/maven-antrun-plugin/tasks/attachArtifact.html)不起作用

```
<attachartifact file="./bin/classes.jar" classifier="" type="jar"/> 
```

我得到的错误是

> 发生 Ant BuildException：org.apache.maven.artifact.InvalidArtifactRTException：对于工件 {:jar}：附加工件的 ID 必须与其对应的主工件不同。

所以这不是注册主要工件的方法......有没有（不编写自定义java插件）？

谢谢，卢卡斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-20T10:04:17.740

我检查了 JarMojo 的来源，它让我知道如何使用 Groovy 解决它（通过 gmaven）

```
<plugin>
  <groupId>org.codehaus.gmaven</groupId>
  <artifactId>gmaven-plugin</artifactId>
  <version>1.3</version>
  <executions>
    <execution>
      <id>set-main-artifact</id>
      <phase>package</phase>
      <goals> 
        <goal>execute</goal>
      </goals>
      <configuration>
        <source>
          project.artifact.setFile(new File("./bin/classes.jar"))
        </source>
      </configuration>
    </execution>
  </executions>
</plugin> 
```

它有效！:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-24T19:40:48.417

像这样的东西

```
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>build-helper-maven-plugin</artifactId>
    <version>1.8</version>
    <executions>
        <execution>
            <id>attach-artifacts</id>
            <phase>package</phase>
            <goals>
                <goal>attach-artifact</goal>
            </goals>
            <configuration>
                <artifacts>
                    <artifact>
                        <file>${basedir}/bin/classes.jar</file>
                        <type>jar</type>
                    </artifact>
                </artifacts>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-19T21:55:56.930

虽然您的解决方案可能适用于构建到 install+ 阶段或反应堆中没有依赖项的情况，但在仅构建到编译或测试阶段的情况下，依赖项不会找到未打包的类。使用 maven-release-plugin 之类的插件时会发生构建编译。

扩展您选择的解决方案以包括在编译期间识别解包的类

```
<plugin>
  <groupId>org.codehaus.gmaven</groupId>
  <artifactId>gmaven-plugin</artifactId>
  <version>1.3</version>
  <executions>
    <execution>
      <id>set-main-artifact-compile</id>
      <phase>compile</phase>
      <goals> 
        <goal>execute</goal>
      </goals>
      <configuration>
        <source>
          project.artifact.setFile(new File("./bin/classes"))
        </source>
      </configuration>
    </execution>
    <execution>
      <id>set-main-artifact</id>
      <phase>package</phase>
      <goals> 
        <goal>execute</goal>
      </goals>
      <configuration>
        <source>
          project.artifact.setFile(new File("./bin/classes.jar"))
        </source>
      </configuration>
    </execution>
  </executions>
</plugin> 
```

默认情况下，maven-install-plugin 将使用已识别的工件，如下所示 `${project.build.directory}/${project.finalname}.jar`

所以另一个选择可能是这样的

```
<build>
    <directory>bin</directory>
    <outputDirectory>bin/classes</outputDirectory>
    <finalName>classes</finalName>
</build> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-24T17:59:25.143

我们遇到了同样的问题，出现“附加的工件必须具有与其相应的主工件不同的 ID”错误。我们在以下优秀的博客文章中找到了解决方案：

[http://devblog.virtage.com/2013/04/embed-and-run-ant-tasks-and-scripts-from-maven/](http://devblog.virtage.com/2013/04/embed-and-run-ant-tasks-and-scripts-from-maven/)

如[本节所述](http://devblog.virtage.com/2013/04/embed-and-run-ant-tasks-and-scripts-from-maven/#.22an-attachned-artifact-must-have-a-different-id-than-its-corresponding-main-artifact.22-error)，您可以通过添加分类器来解决此问题，以便 Maven 可以区分 ant-built jar 和 maven-built jar。由于您使用的是 antrun attachartifact，因此您需要：

```
<attachartifact file="./bin/classes.jar" classifier="foo" type="jar"/> 
```

请注意，当您想要将此 jar 作为其他项目的依赖项时，您还需要包含该分类器（以及 groupId、artifactId 和 version）。

# ios - AudioServicesPlaySystemiPad 上的音量

> ID：10449217
> 
> 赞同：9
> 
> 时间：2012-05-04T12:54:55.807
> 
> 标签：ios, audio

在我的应用程序中，我使用 AudioServicesPlaySystemSound 播放小 caf 文件。当在 iPhone 上运行我的应用程序并通过横向按钮更改音量时，应用程序的声音也会发生变化，但在 iPad 上，我的应用程序中的声音音量始终相同。也许是因为在 iPhone 上是铃声音量，而不是在 iPad 上是设备音量。

如何在 iPad 上获得相同的 iPhone 行为？

请原谅我的英语不好......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T20:43:35.230

我遇到了同样的问题，但是如果您使用按钮更改系统声音音量，所有系统声音都将与您的应用程序一起修改。我发现这*真的很*烦人。解决方案是使用 AVAudioPlayer 代替 AudioServices：同样简单，但更通用。在那里，您可以通过编程方式微调每种声音的音量。

```
NSURL *soundurl   = [[NSBundle mainBundle] URLForResource: @"mysound" withExtension: @"caf"];
AVAudioPlayer *mySoundPlayer =[[AVAudioPlayer alloc] initWithContentsOfURL:soundurl error:&error];
mySoundPlayer .volume=0.4f; //between 0 and 1
[mySoundPlayer prepareToPlay];
mySoundPlayer.numberOfLoops=0; //or more if needed

[mySoundPlayer play]; 
```

# jquery - 如果元素不为空，则添加内容

> ID：10449218
> 
> 赞同：13
> 
> 时间：2012-05-04T12:55:02.193
> 
> 标签：jquery

HTML：

```
<div id="parent"> 
  <div class="child"></div> 
  <div class="child"><p>Div with content<p></div> 
  <div class="child"><img scr="pic.png" alt="Div with picture" /></div>
</div> 
```

我想要的结果：

```
<div id="parent"> 
  <div class="child"></div> 
  <div class="child"><h1>title</h1><p>Div with content<p></div> 
  <div class="child"><h1>title</h1><img scr="pic.png" alt="Div with picture" /></div>
</div> 
```

我的 jQuery 代码：

```
$(".child").each(function() {
    if ($(this).html != '')
        $(this).prepend('<h1>title</h1>');
}); 
```

结果与我的 jQuery 代码：

```
<div id="parent"> 
  <div class="child"><h1>title</h1></div> 
  <div class="child"><h1>title</h1><p>Div with content<p></div> 
  <div class="child"><h1>title</h1><img scr="pic.png" alt="Div with picture" /></div>
</div> 
```

所以我只想为某个非空类的每个 div 添加一个标题。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-04T12:59:16.247

```
$(".child:not(:empty)").prepend('<h1>title</h1>'); 
```

[jQuery 空选择器](http://api.jquery.com/empty-selector/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-04T12:56:47.563

```
$(".child").each(function() {
    if ($(this).html())
        $(this).prepend('<h1>title</h1>');
}); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-04T13:03:35.717

```
$("#parent .child").each(function() {
    if ($.trim($(this).html()).length > 0 )
        $(this).prepend('<h1>title</h1>');
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-04T12:58:26.597

改为使用长度检查。

```
$(".child").each(function() {
    if ($(this).html().length)
        $(this).prepend('<h1>title</h1>');
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T13:02:07.240

你有一个未关闭的`<p>`并获取选择器的 html，你使用一个函数，而不是一个属性：

```
$(this).html() 
```

你的小提琴 [http://jsfiddle.net/bCKGV/](http://jsfiddle.net/bCKGV/)

我的 [http://jsfiddle.net/bCKGV/1/](http://jsfiddle.net/bCKGV/1/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-04T13:08:32.997

试试这个：

```
 $(".child:not(:empty)").prepend('<h1>title</h1>'); 
```

或者：

```
$("#parent .child").each(function() {
    if ($(this).html())
        $(this).prepend('<h1>title</h1>');
}); 
```

# jquery - 带有 FancyBox 的 Internet Explorer 莫名其妙的行为

> ID：10449231
> 
> 赞同：0
> 
> 时间：2012-05-04T12:55:55.903
> 
> 标签：jquery, internet-explorer, fancybox

我在我的 2 个网站中实现了 FancyBox（相同的版本、文件和所有内容）：

1.  [http://multiformeingegno.it](http://multiformeingegno.it)
2.  [http://bombacarta.com/le-attivita/bombafoto/](http://bombacarta.com/le-attivita/bombafoto/)

每个浏览器（包括 IE）在第一个网站上一切正常，fancybox 正确加载，没关系。在带有 IE 的第二个网站中，如果我单击 3 个大图像之后的缩略图，而不是打开 Fancybox，IE 会转到缩略图 url！我不明白为什么！链接是：

```
<a href="BIG IMAGE URL" class="fancybox" data-fancybox-group="gallery">
   <img src="THUMB URL" style="margin-right:5px;border:none" alt="" width="150" height="150"/> 
```

一切都应该按预期工作（我在 JS 控制台上有 0 个错误，它是相同的 FANCYBOX 实现、相同的文件和一切）！我无法解释的是为什么当链接到大图像时，Internet Explorer 会转到拇指 URL！

当然，所有其他浏览器（包括 Safari Mobile 和 Android 浏览器）都可以正常工作！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T18:14:47.463

您上面的所有网站都不能在 IE7 上正常运行。Fancybox 弹出，但没有画廊功能（至少在 IE7 中）。

您的网站正在使用 fancybox 的修改版本：http: [//bombacarta.com/wp-content/themes/raymond-31/fancybox/jquery.fancybox.js](http://bombacarta.com/wp-content/themes/raymond-31/fancybox/jquery.fancybox.js)

[我刚刚将它更新到来自fancybox](http://fancyapps.com/fancybox/)网站的最新版本（包括 css 文件），它在所有浏览器中都能正常工作，包括 IE7+

检查演示[http://www.picssel.com/playground/jquery/bombafoto.html](http://www.picssel.com/playground/jquery/bombafoto.html)

我在上面的示例中使用的 fancybox 版本（如果你想比较）： [http ://www.picssel.com/playground/jquery/fancybox2.0.6/jquery.fancybox.pack.js](http://www.picssel.com/playground/jquery/fancybox2.0.6/jquery.fancybox.pack.js)

我猜克隆过程中出了点问题。

# linux - 如何使用存储在单个变量中的引号传递命令行参数？

> ID：10449233
> 
> 赞同：2
> 
> 时间：2012-05-04T12:56:00.620
> 
> 标签：linux, bash, shell

我想从 shell 脚本调用外部应用程序，但是这个 shell 脚本在单个变量中获取参数（来自其他脚本）。一切都很好，直到我不必对单个参数使用双引号，而是用空格分隔单词。

这是我的问题的简化示例（sh_param 仅打印所有传递的参数）：

```
#!/bin/sh

pass() {
    echo "Result with \$@"
    ./sh_param $@
    echo "Result with \"\$@\""
    ./sh_param "$@"
    echo "Result with \$*"
    ./sh_param $*
    echo "Result with \"\$*\""
    ./sh_param "$*"
}

pass '"single param" separate params' 
```

和结果（sh_param 只打印所有传递的参数）：

```
Result with $@
Param: "single
Param: param"
Param: separate
Param: params
Result with "$@"
Param: "single param" separate params
Result with $*
Param: "single
Param: param"
Param: separate
Param: params
Result with "$*"
Param: "single param" separate params 
```

而且我要：

```
Param: single param
Param: separate
Param: params 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T13:25:20.337

### 脚本

```
pass() {
  echo 'Result with "$@"'
  sh_param "$@"
}

sh_param() {
  for i in "$@"
  do
    echo Param: $i
  done
}

pass "single param" separate param 
```

* * *

### 结果

```
Result with "$@"
Param: single param
Param: separate
Param: param 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T15:48:18.043

如果您遇到单个变量，则必须使用`eval`：

```
$ show() { i=0; for param; do ((i++)); echo "$i>$param"; done; }

$ show '"single param" separate params'
1>"single param" separate params

$ eval show '"single param" separate params'
1>single param
2>separate
3>params 
```

请注意，双引号会被 shell 吃掉。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-05T11:03:57.760

Avoid passing the whole thing as a single argument (as you do with the squotes). It's hard enough to make shell scripts that carefully preserve the number of arguments passed, without needing to make it harder by flattening them into strings and expanding them again.

If you do need to though, there are some best practices to follow. I had to write a script a while back that serves as a su/sudo wrapper: su takes a single argument that it passes to sh to evaluate; sudo takes any number of arguments that it passes on unmodified to an execv(e).

You have to be pretty careful about getting it portable and not running into problems in obscure shells. The whole script isn't very useful to post, but the general gist is to write some escaping functions and very perform the quoting to build up a bullet-proof, unreadably-cautiously escaped string that's safe to pass to `eval`.

```
bash_escape() {
  # backtick indirection strictly necessary here: we use it to strip the
  # trailing newline from sed's output, which Solaris/BSD sed *always* output
  # (unlike GNU sed, which outputs "test": printf %s test | sed -e s/dummy//)
  out=`echo "$1" | sed -e s/\\'/\\''\\\\'\\'\\'/g`
  printf \'%s\' "$out"
}
append_bash_escape() {
  printf "%s " "$1"
  bash_escape "$2"
}
sed_escape() {
  out=`echo "$1" | sed -e 's/[\\/&]/\\\\&/g'`
  printf %s "$out"
} 
```

These useful functions let you do something like this to portably build command strings:

```
COMMAND=
while [ $# -gt 0 ] ; do
  COMMAND=`append_bash_escape "$COMMAND" "$1"` ; shift
done 
```

You can then manipulate the command string, for example by running `bash_escape` on it and using `sed_escape` to substitute into the string `"su - root -c SUB_HERE"`, or just substitute it directly into a string like `"sudo -- SUB_HERE"`. You then have something you can safely `eval` without worrying about metacharacters, argument splitting, unescaped globs, and so on.

Be paranoid, and unittest your script with every nasty input you can think of to make sure your argument splitting and preserving really is correct!

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-07T20:05:29.200

Answering my own question. BIG thanks goes to pzanoni. xargs seems to parse correctly anything you are throwing to it :-) "$@", "$*", $@ and $* works good with it. So my code now looks like:

```
#!/bin/sh

pass() {
    echo $* | xargs ./sh_param
}

pass '"single param" separate params' 
```

And result is what I wanted:

```
Param: single param
Param: separate
Param: params 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T13:25:18.150

`sh_param`这可能会奏效，尽管在不知道如何处理其论点的情况下很难判断。

```
#!/bin/sh

pass() {
    echo "Result with \"\$@\""
    ./sh_param "$@"
}

pass "single param" separate params 
```

# c++ - 重载后缀增量运算符

> ID：10449235
> 
> 赞同：0
> 
> 时间：2012-05-04T12:56:10.483
> 
> 标签：c++

> **可能重复：**
> [运算符重载](https://stackoverflow.com/questions/4421706/operator-overloading)

假设我有一个类`Foo`，我想重载后缀增量运算符。我做类似的事情：

```
class Foo{
.....
public:
   friend Foo& operator++(Foo&, int); 
```

然后我在某处定义新的运算符。我真的不知道这`int`是从哪里来的。

如果我有： `f = Foo();`我可以：

```
f++; 
```

在我看来，这似乎是一元的。

语法规则如何？

在我运行的测试中，传递的 int 值是`0`. ti 总是为零吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T12:58:49.857

int 参数只是一个约定，提示编译器区分前缀和后缀运算符。

# alfresco - Alfresco：基于一些自定义 repo webscripts 的自定义共享评估器

> ID：10449239
> 
> 赞同：0
> 
> 时间：2012-05-04T12:56:20.263
> 
> 标签：alfresco, alfresco-share

因此，我想根据一些存储库 webscripts 的结果在 Share 中编写一组新的评估器。

当前现有的共享评估器可通过一些 XML 配置使用，并且与 Alfresco 常用的元数据相关。

但是，我想知道如何编写我自己的 Java 评估器，同时重新使用这里已经存在的大部分逻辑（BaseEvaluator）。

假设我有一个存储库 webscript，它返回一些 JSON，例如 {"result" : "true"}：

*   如何从我的自定义评估器访问它？主要是如何从 Spring 上下文访问到 alfresco webapp 的代理 URL？
*   我需要用 Java 编写自己的异步调用吗？
*   在哪里可以找到所需评估方法的这个 JSONObject 参数？

感谢您的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-08T19:33:55.117

看看这是否有帮助。这进入了扩展 BaseEvaluator 的类。通过 Spring 连接 bean，然后将评估器设置为您的操作。

```
public boolean evaluate(JSONObject jsonObject) {
    boolean result = false;

    final RequestContext rc = ThreadLocalRequestContext.getRequestContext();
    final String userId = rc.getUserId();
    try {
        final Connector conn = rc.getServiceRegistry().getConnectorService().getConnector("alfresco", userId, ServletUtil.getSession());
        final Response response = conn.call("/someco/example?echo=false");
        if (response.getStatus().getCode() == Status.STATUS_OK) {
            System.out.println(response.getResponse());
            try {
                org.json.JSONObject json = new org.json.JSONObject(response.getResponse());
                result = Boolean.parseBoolean(((String) json.get("result")));
            } catch (JSONException je) {
                je.printStackTrace();
                return false;
            }
        } else {
            System.out.println("Call failed, code:" + response.getStatus().getCode());
            return false;
        }
    } catch (ConnectorServiceException cse) {
        cse.printStackTrace();
        return false;
    }
    return result;
} 
```

在此示例中，我使用了一个简单的示例 Web 脚本，它回显您的 JSON 并根据“echo”参数的值切换结果。因此，当使用“false”调用它时，JSON 返回 false，而求值器返回 false。

我可能应该指出评估方法期望的 org.json.simple.JSONObject 和我用来从响应 JSON 中获取结果的 org.json.JSONObject 之间的名称冲突。

# python - 关闭上次打开的选项卡

> ID：10449242
> 
> 赞同：2
> 
> 时间：2012-05-04T12:56:27.547
> 
> 标签：python, browser

我可以从使用以下代码打开的*Python关闭上次打开的选项卡（不关闭浏览器）吗？*

```
import webbrowser
webbrowser.get("firefox").open_new_tab(url) 
```

你可以使用任何东西来完成这个任务。我知道*webbrowser*模块无法做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T13:37:31.897

不，您不能以编程方式关闭浏览器（无需破解或创建插件）。

[浏览器控制器](http://docs.python.org/library/webbrowser.html#browser-controller-objects)仅提供打开浏览器的方法，但不提供关闭浏览器的方法。

this 隐式调用 new Process 然后解析命令行参数，例如

```
import subprocess
subprocess.Popen("firefox -new-tab %s" % url, shell=True) 
```

等于打开shell cmd：

> C:\Program Files\Mozilla Firefox\firefox -new-tab [http://docs.python.org](http://docs.python.org)

大多数标准浏览器也包括 Firefox 提供了它的[命令行参数](http://kb.mozillazine.org/Command_line_arguments)来打开新的窗口/选项卡，但没有关闭打开的选项卡。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-14T22:18:44.210

You can send the hotkey combination to close the tab (`Ctrl` + `W`) using the `pykeyboard` library from here, [https://github.com/SavinaRoja/PyUserInput](https://github.com/SavinaRoja/PyUserInput).

# ruby-on-rails - RVM 不会将 Rails 安装到系统

> ID：10449247
> 
> 赞同：0
> 
> 时间：2012-05-04T12:56:46.017
> 
> 标签：ruby-on-rails, ruby, macos, rvm

我尝试了以下命令：

```
rvm system gem install rails
rvm system install rails
rvmsudo gem install rails
sudo gem install rails 
```

在这些命令之一之后，我收到一条消息，告诉我运行`sudo gem install rails`. 但它不起作用。

在 Mac OSX 10.6.8 版本的 rvm 1.9.2 上安装 rails 之前我没有遇到任何问题。

**有人可以帮我吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T15:49:42.310

如果您没有 ruby​​ 1.9.3，请使用：

```
$ rvm install 1.9.3 
```

或者你可以从这里开始：

```
$ rvm use 1.9.3

$ rvm gemset create rails313

$ rvm use 1.9.3@rails313 --default

$ gem install rails -v 3.1.3 
```

注意：我以 1.9.3 为例，您也可以使用其他 ruby​​ 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T13:02:35.123

首先检查 rvm 安装是否正确或不使用此命令

```
rvm --help 
```

然后通过这个命令安装rails

```
 gem install rails -v=3.2.1 
```

或者你想要的任何版本..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-03T14:54:27.833

首先通过运行检查是否满足所有依赖项：

```
$ rvm requirements 
```

**下一个：**

```
$ rvm install ruby 
```

**下一个：**

```
$ gem install rails 
```

**注意：**您可能必须使用`sudo`或`rvmsudo`在命令之前使用，具体取决于其是系统范围安装还是用户特定。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-08T13:20:45.083

确保你已经安装`build_essentials`，也尝试`rvm requirements`，它提供了所有依赖项，使用`rvmsudo`命令安装所有
参见：[Installing Ruby on Rails - Mac OS Lion](https://stackoverflow.com/questions/6840719/installing-ruby-on-rails-mac-os-lion)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T12:59:42.797

如果您已成功安装 rvm，请进行测试以`rvm info`使其返回输出，然后您只需`gem install rails`将 rails 安装到您与 RVM 一起使用的 ruby​​ 版本中 - 无需 sudo。我误解了吗？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-04T16:04:01.730

[按照文档](https://rvm.io/rvm/install#explained)。确保您已通过`rvm requirements`. 除非您在 $HOME 中有一些奇怪的用户权限，否则没有理由在您的系统上使用 sudo w/rvm。

# .net - 如何将 WPF Toolkit 图表的 itemsource 动态数据绑定到公共属性？

> ID：10449251
> 
> 赞同：2
> 
> 时间：2012-05-04T12:56:59.890
> 
> 标签：.net, wpf, charts

如何动态更新 WPF ToolKit 图表控件的数据源？在以下示例中，我使用 {Binding SomeText} 成功更新了 TextBlock.Text 属性，并将 MainWindow 的 DataContext 设置为属性 Input。（请看下面的代码）

TextBlock.Text 绑定到 Input.SomeText 并且图表假设使用 Input.ValueList 作为数据源。

图表仍然是空的。放置一次能填满

```
lineChart.DataContext = Input.ValueList; 
```

在主窗口构造函数中并将 XAML 中的绑定设置为 ItemsSource="{Binding}"。但这仅在启动时有效，例如，当您单击按钮时它不会更新。我想在应用程序使用新传入数据运行时更新图表。

我有以下 XAML：

```
<chartingToolkit:Chart  Name="lineChart">

                <chartingToolkit:LineSeries DependentValuePath="Value" IndependentValuePath="Key" ItemsSource="{Binding ValueList}">
                </chartingToolkit:LineSeries>

</chartingToolkit:Chart>
<Button Width="100" Height="24" Content="More" Name="Button1" />
<TextBlock Name="TextBlock1" Text="{Binding SomeText}" /> 
```

带代码：

```
class MainWindow
{

    public DeviceInput Input;

    public MainWindow()
    {
        InitializeComponent();

        Input = new DeviceInput();
        DataContext = Input;
            lineChart.DataContext = Input;
        Input.SomeText = "Lorem ipsum.";

    }

    private void Button1_Click(System.Object sender, System.Windows.RoutedEventArgs e)
    {
        Input.AddValues();
    }
}

public class DeviceInput : INotifyPropertyChanged
{

    private string _SomeText;
    public string SomeText {
        get { return _SomeText; }

        set {
            _SomeText = value;
            OnPropertyChanged("SomeText");
        }
    }

    public List<KeyValuePair<string, int>> ValueList {get; private set;}

    public DeviceInput()
    {
        ValueList = (new List<KeyValuePair<string, int>>());
        AddValues();
    }

    public void AddValues()
    {
            //add values (code removed for readability)
        SomeText = "Items: " + ValueList.Count.ToString();
        OnPropertyChanged("ValueList");
    }

    public event PropertyChangedEventHandler INotifyPropertyChanged.PropertyChanged;

    private void OnPropertyChanged(String info)
    {
        if (PropertyChanged != null) {
            PropertyChanged(this, new PropertyChangedEventArgs(info));
        }
    }

} 
```

SomeText 得到更新，并确保 ValueList 发生变化，我将 ValueList.Count 放在文本块中，您可以看到计数在上升，但图表保持不变。

所以这导致 1 成功绑定（但不更新）：

```
lineChart.DataContext = Input.ValueList;

ItemsSource="{Binding}" 
```

这根本不绑定：

```
ItemsSource="{Binding ValueList}" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T13:15:09.127

wpf 绑定到公共属性，所以你需要

```
 public List<KeyValuePair<string, int>> ValueList {get; private set;} 
```

编辑：[这里](http://www.codeproject.com/Articles/196502/WPF-Toolkit-Charting-Controls-Line-Bar-Area-Pie-Co)有一些关于使用图表控件的更多信息。

编辑2：

```
ItemsSource="{Binding ValueList}" 
```

这是行不通的，因为您必须首先创建 ValueList 作为属性，其次您需要将 datacontext 设置为 DeviceInput 的实例（就像您在 mainwindow.cs 中所做的那样）。

EDIT3：快速而肮脏的例子，只需复制和粘贴，如果你点击按钮，数据将被添加

视图模型

```
public class Input
{
    public ObservableCollection<KeyValuePair<string, int>> ValueList { get; private set; }

    public Input()
    {
        this.ValueList = new ObservableCollection<KeyValuePair<string, int>>();
        ValueList.Add(new KeyValuePair<string, int>("Developer", 60));
        ValueList.Add(new KeyValuePair<string, int>("Misc", 20));
        ValueList.Add(new KeyValuePair<string, int>("Tester", 50));
        ValueList.Add(new KeyValuePair<string, int>("QA", 30));
        ValueList.Add(new KeyValuePair<string, int>("Project Manager", 40));
    }

    public void Add(KeyValuePair<string, int> data)
    {
        ValueList.Add(data);
    }
} 
```

窗口.cs

```
public partial class MainWindow : Window
{
  private Input data;
  public MainWindow()
  {
    data= new Input();
    InitializeComponent();
    this.DataContext = data;
  }

  private void button1_Click(object sender, RoutedEventArgs e)
  {
    this.data.Add(new KeyValuePair<string, int>("XXX", 27));
  }

} 
```

xml

```
<ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto" Margin="0,-28,0,28">
    <Grid Height="921">
        <chartingToolkit:Chart Height="262" HorizontalAlignment="Left" Margin="33,0,0,620" Name="columnChart" Title="Column Series Demo" VerticalAlignment="Bottom" Width="360">
            <chartingToolkit:ColumnSeries DependentValuePath="Value" IndependentValuePath="Key" ItemsSource="{Binding ValueList }" />              
        </chartingToolkit:Chart>
        <chartingToolkit:Chart  Name="pieChart" Title="Pie Series Demo" VerticalAlignment="Top" Margin="449,39,43,0" Height="262">
            <chartingToolkit:PieSeries DependentValuePath="Value" IndependentValuePath="Key" ItemsSource="{Binding ValueList }" IsSelectionEnabled="True" />
        </chartingToolkit:Chart>
        <chartingToolkit:Chart  Name="areaChart" Title="Area Series Demo" VerticalAlignment="Top" Margin="33,330,440,0" Height="262">
            <chartingToolkit:AreaSeries DependentValuePath="Value" IndependentValuePath="Key" ItemsSource="{Binding ValueList }" IsSelectionEnabled="True"/>
        </chartingToolkit:Chart>
        <chartingToolkit:Chart  Name="barChart" Title="Bar Series Demo" VerticalAlignment="Top" Margin="449,330,43,0" Height="262">
            <chartingToolkit:BarSeries  DependentValuePath="Value" IndependentValuePath="Key" ItemsSource="{Binding ValueList }" IsSelectionEnabled="True"/>
        </chartingToolkit:Chart>
        <chartingToolkit:Chart  Name="lineChart" Title="Line Series Demo" VerticalAlignment="Top" Margin="33,611,440,0" Height="254">
            <chartingToolkit:LineSeries  DependentValuePath="Value" IndependentValuePath="Key" ItemsSource="{Binding ValueList }" IsSelectionEnabled="True"/>
        </chartingToolkit:Chart>
        <Button Content="Button" Height="23" HorizontalAlignment="Left" Margin="342,10,0,0" Name="button1" VerticalAlignment="Top" Width="75" Click="button1_Click" />
    </Grid>
</ScrollViewer> 
```

# c# - 全选文本框文本

> ID：10449254
> 
> 赞同：1
> 
> 时间：2012-05-04T12:57:10.660
> 
> 标签：c#, c#-4.0

我正在使用以下代码。我想当我选择`textbox`它告诉我的所有文本时，但我不知道为什么它不起作用。请给我一些帮助。请提供一些代码，以便我在选择`textbox` `text`它告诉我的所有文本时可以使用它

```
if (textBox1.SelectAll() == true)
        {
            MessageBox.Show("You have selected all text in the textbox");
        } 
```

它会告诉我：*运算符`==`不能应用于类型的操作数`void`和`bool`*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T13:02:10.140

你不能简单地检查是否`TextBox.SelectionLength == TextBox.Text.Length`？

[http://msdn.microsoft.com/en-us/library/system.windows.forms.textboxbase.selectionlength.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.textboxbase.selectionlength.aspx)

您比较失败，因为您正在将文本与方法的返回值进行比较，该[`SelectAll`](http://msdn.microsoft.com/en-us/library/system.windows.controls.textbox.selectall%28v=vs.95%29.aspx)方法是 void（它不返回任何内容，因为它只是应用选择）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T12:58:29.513

因为

```
textBox1.SelectAll() 
```

返回`nothing`或返回类型是`void`

只需使用

```
textBox1.SelectAll(); 
```

**如果要检查是否选择了所有文本，请检查**

```
if(textBox1.SelectedText == textBox1.Text)
{
     MessageBox.Show("You have selected all text in the textbox");
} 
```

**或者**

```
if(TextBox.SelectionLength == TextBox.Text.Length)
{
     MessageBox.Show("You have selected all text in the textbox");
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T13:01:32.657

```
if(textBox1.SelectedText==textBox1.Text)
{
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T13:00:09.073

只使用

```
textBox1.SelectAll(); 
```

执行此方法时，将选择文本框中的所有文本。您无需将其与`true`. [TextBox.SelectAll()](http://msdn.microsoft.com/en-us/library/system.windows.controls.textbox.selectall%28v=vs.95%29.aspx)返回类型为`void`. 将布尔值与 void 进行比较会产生错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T13:05:54.383

我认为您想为 TextBox.SelectionChanged 事件添加一个事件处理程序，并在其中将 TextBox.SelectedText 与 TextBox.Text 进行比较

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-07-08T06:27:27.983

我认为您应该在此处使用 GotMouseCapture 事件，该代码对我来说效果很好。

```
 private void textBox_GotMouseCapture(object sender, MouseEventArgs e)
    {
        textBox.SelectAll();
        textBox.Focus();
    } 
```

# php - Php，将 3d 数组打印到表格中

> ID：10449260
> 
> 赞同：1
> 
> 时间：2012-05-04T12:57:36.033
> 
> 标签：php, arrays, dynamic

基本上我需要将一些数据分类到前 5 名最佳销售中。我已经设法将我使用的 3 个数组分组。

```
$c = array_combine($PriceArray,$namesArray,$ProductArray);
krsort($c); 
```

价格数组是总数。（有点愚蠢的名字，我刚刚意识到）namesarray 是名称数组，product array 是产品代码列表

我需要在表格中打印它

“|3.45 英镑|果冻豆 | 120|” 所以他们有自己的专栏，但目前它正在像 | 3.45| 数组 | 数组|

我用

```
 echo '<td>'.$ProductArray[$i].'</td>'.'<td>'.$year.'</td>'.'<td>'.array_keys($c,$c[$i]).'<td>'. $PriceArray[$i].'</td>'; 
```

打印它。

提前致谢

```
 Array
    (

    [0] => 77358.47
    [1] => 111004.98
    [2] => 227194.9
    [3] => 84645.75
    [4] => 29693.58
    [5] => 198867.2
    [6] => 110779.5
    [7] => 210530.62
    [8] => 102916.79
    [9] => 186630.75
    [10] => 140143.24
    [11] => 48984.48
    [12] => 74759.34
    [13] => 204793.14
    [14] => 82192.5
    [15] => 167402.7
    [16] => 58232.72
    [17] => 216302.32
    [18] => 26353.92
    [19] => 149993.1 
```

)

```
Array
(
    [0] => Jelly beans
    [1] => Banana milkshake powder
    [2] => Edam Cheese
    [3] => Hairnet
    [4] => Aubergine jam
    [5] => White bread
    [6] => Brown bread
    [7] => Purple bread
    [8] => Plain flour
    [9] => Striped flour
    [10] => Soft tissues
    [11] => Anti personnel mines
    [12] => Chicken fillets
    [13] => Beef cubes
    [14] => Marshmallows
    [15] => Fizzy carrot juice
    [16] => Low fat lard
    [17] => Suet dumpling mix
    [18] => Gravy powder
    [19] => Cherry pie filling
)
Array
(
    [0] => 121
    [1] => 122
    [2] => 123
    [3] => 124
    [4] => 125
    [5] => 126
    [6] => 127
    [7] => 128
    [8] => 129
    [9] => 130
    [10] => 131
    [11] => 132
    [12] => 133
    [13] => 134
    [14] => 135
    [15] => 136
    [16] => 137
    [17] => 138
    [18] => 139
    [19] => 140 
```

) 产品代码 年份 名称 销售总额

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T13:15:44.300

Zip 功能公然盗取自：[来自 SO 的 zip 功能](https://stackoverflow.com/questions/2815162/is-there-a-php-function-like-pythons-zip)

```
function zip() {
  $args = func_get_args();
  $zipped = array();
  $n = count($args);
  for ($i=0; $i<$n; ++$i) {
    reset($args[$i]);
  }
  while ($n) {
    $tmp = array();
    for ($i=0; $i<$n; ++$i) {
      if (key($args[$i]) === null) {
        break 2;
      }
      $tmp[] = current($args[$i]);
      next($args[$i]);
    }
    $zipped[] = $tmp;
  }
  return $zipped;
}

function cmp($a, $b)
{
  if($a[0] == $b[0]){
    return 0;
  }
  return ($a[0] < $b[0]) ? -1 : 1;
}

$PriceArray   = array( 4.56, 1.23, 7.89 );
$namesArray   = array( 'ab', 'cd', 'ef' );
$ProductArray = array( '11', '22', '33' );

$c = zip($PriceArray, $namesArray, $ProductArray);

usort($c, 'cmp');

foreach($c as $prices)
{
  //$prices[0] == price
  //$prices[1] == name
  //$prices[2] == code
  echo "{$prices[0]}|{$prices[1]}|{$prices[2]}\n"; 
```

印刷：

> 1.23|cd|22
> 4.56|ab|11
> 7.89|ef|33

我正在使用 Python 中本机可用的 zip 函数来组合 N 数组并将它们“压缩”在一起。
因此，取所有给定数组的索引 0，并将其设为新的数组条目。对所有可用的索引执行此操作。

该`cmp`函数采用两个变量，在本例中为两个数组，其中 index-0 = 价格，1 = 名称，2 = 代码。您显然想按价格升序排序，因此我们正在比较价格指数。这会产生一个基于价格的新/排序数组。

您还可以`usort($c, 'cmp');`使用以下内容替换呼叫：

```
usort($c, function($a, $b){
  if($a[0] == $b[0]){
    return 0;
  }
  return ($a[0] < $b[0]) ? -1 : 1;
}); 
```

但是，这仅适用于 PHP 版本 >= 5.3

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T21:49:42.210

只需将键和值放入新数组即可。

$NewNamesArray = array_values($c); $NewPriceArray = array_keys($c)

# android - 在android中存储和检索共享首选项

> ID：10449263
> 
> 赞同：0
> 
> 时间：2012-05-04T12:57:39.747
> 
> 标签：android, sharedpreferences

我正在尝试使用我正在使用此代码的首选项存储一些设置：

```
 SharedPreferences pref = getPreferences(MODE_WORLD_WRITEABLE);
                        pref.edit().putString("some settings", "lalal");
                        pref.edit().commit(); 
```

我做错了什么文件被创建但为空

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T13:01:41.160

**试试这个代码：**

```
SharedPreferences customSharedPreference = getSharedPreferences("myCustomSharedPrefs", Activity.MODE_PRIVATE);
SharedPreferences.Editor editor = customSharedPreference.edit();
editor.putString("some settings", "lalal");
editor.commit(); 
```

**并使用以下代码获取值：**

```
SharedPreferences shf = getSharedPreferences("myCustomSharedPrefs", MODE_WORLD_READABLE);
String strShPref = shf.getString("some settings", ""); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T13:04:35.247

您的首选项有 2 个不同的编辑器，第一个添加字符串，第二个提交空更改，因为您更改了另一个编辑器。

改变这个：

```
 pref.edit().putString("some settings", "lalal");
   pref.edit().commit(); 
```

进入这个：

```
 pref.edit().putString("some settings", "lalal").commit(); 
```

# c - gcc 和 glibc 版本

> ID：10449267
> 
> 赞同：3
> 
> 时间：2012-05-04T12:57:47.453
> 
> 标签：c, linux, gcc, centos, glibc

我安装了 gcc 4.1.2。我也在 CentOS 上使用 yum 安装了一个新的独立 gcc（版本 4.4.6）。现在我的问题是，这两个 gcc 版本是使用相同的 glibc 版本还是 glibc 对它们都不同？我怎样才能知道？其次，就性能而言，使用更新版本的 glibc 会更好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T13:01:45.933

两个 GCC 版本都将使用您在系统上安装的 glibc 版本。GCC 包（通常）不提供单独的 C 库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T13:17:57.490

编写一个调用 glibc 函数的简单程序。然后用两个版本的 gcc 编译它，然后`ldd a.out`在每次编译时执行。您将获得使用的库列表。

如果您的源文件是`test.c`：

```
$ gcc test.c -o out1  # with gcc 4.1.2
$ gcc test.c -o out2  # with gcc 4.4.6 
$ ldd out1
$ ldd out2 
```

这将显示每个 gcc 使用的 libc 版本。

性能可能会更好，也可能不会更好，具体取决于对 glibc 函数所做的更新。

# delphi - 在 Delphi 7 应用程序中不会触发“-”的 OnKeydown

> ID：10449271
> 
> 赞同：0
> 
> 时间：2012-05-04T12:58:09.583
> 
> 标签：delphi, delphi-7, onkeydown

我们使用的是 Delphi 7 企业版，应用程序是在 Windows XP 上构建的，在 Windows XP 和 Windows 7 上进行测试。

在我们维护的应用程序中，发生了一些奇怪的事情。由于某种原因，点击“-”键（qwerty 布局，在顶部的“0”和“=”键之间）根本不会注册。

我们检查了我们找到它的编辑的 OnKeyDown、表单的 OnKeyDown（有和没有键预览）甚至 ProcessMessage 例程，但是这个键的事件永远不会到达应用程序。我们对 OnKeyPress 得到相同的结果。

是的，小键盘上的“-”键确实有效。此外，这种行为只在这个应用程序中可见，但是如果我们创建一个新应用程序，只实现了 unit1.pas 中默认表单的 OnKeyDown。它确实有效。

因此，我们设法以某种方式告诉应用程序正确忽略这一键。有谁知道如何（取消）完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T01:07:28.550

大卫的评论是正确的；您可以（使用版本控制）剥离应用程序，直到您了解发生了什么。但是我认为您还需要了解以下概念：

1.  表单中的 OnKeyDown 事件并不是键盘快捷键可以使用的唯一位置。你应该找出它会去哪里，这就是为什么 Sertac 的评论在那里。

2.  您的应用程序外部的某些东西可能会捕获该键盘键（尽管这在 Control 或 Alt + 键组合中更常见）。

3.  您的表单内或应用程序中的其他地方可能正在获取该密钥并使用它。

4.  这里有一篇关于[KeyPreview](http://delphi.about.com/od/objectpascalide/a/keyboard_events.htm)的好文章，您也需要了解这一点。

# c - C 语言中使用的关键字 '%type' 和 '%token' 是什么？

> ID：10449272
> 
> 赞同：0
> 
> 时间：2012-05-04T12:58:13.587
> 
> 标签：c, syntax, keyword

当我深入研究[OpenNTPD](http://openntpd.org/)源代码文件时，我注意到了以前在任何 C 代码中从未见过的新关键字和语法，例如`}%`, `%%`,`%type`和`%token`一个名为[parse.y](http://www.openbsd.org/cgi-bin/cvsweb/src/usr.sbin/ntpd/parse.y?rev=1.49;content-type=text/plain)的文件：

```
%{
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <arpa/inet.h>

...

%}

%token  LISTEN ON
%token  SERVER SERVERS SENSOR CORRECTION RTABLE REFID WEIGHT
%token  ERROR
%token  <v.string>      STRING
%token  <v.number>

....

grammar     : /* empty */
        | grammar '\n'
        | grammar main '\n'
        | grammar error '\n'        { file->errors++; }
        ;

main        : LISTEN ON address listen_opts {
            struct listen_addr  *la;
            struct ntp_addr     *h, *next;

            if ($3->a)
... 
```

除了这些关键字之外，大多数文件的内容都具有通常的 C 语法。有人知道这些关键字是什么以及它们的用途吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T13:00:07.497

我的猜测是这是[Yacc](http://en.wikipedia.org/wiki/Yacc)代码（即[语法](http://en.wikipedia.org/wiki/Formal_grammar)的定义），而不是纯 C。这是类似于[BNF](http://written%20in%20a%20notation%20similar%20to%20BNF.)的符号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T13:30:56.633

如果你看`*.l`文件，你可能还会看到很多 C 代码，混合着`%%`, `%x`,`%s`等`%option`。然后是词法分析器输入文件，通常伴随着一个 yacc`*.y`文件。

# java - 如何找出我已写入 bytebuffer 的字节数（java 新手）

> ID：10449281
> 
> 赞同：0
> 
> 时间：2012-05-04T12:58:31.497
> 
> 标签：java, android, nio

我试过阅读文档，但没有解释什么是限制、标记等。令人讨厌的是 ByteBuffer.limit 函数的描述说它返回限制。现在什么是限制？跟容量一样还是不一样...

一天结束，我想知道我“放入”缓冲区的字节数

如果我分配大小为 1024 的缓冲区并在其中写入单词“hello”。如何获得写入缓冲区的 5 个字节的结果？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T13:05:07.193

[java.io.Buffer 文档](http://docs.oracle.com/javase/7/docs/api/java/nio/Buffer.html)中解释了您想知道的内容。

> 缓冲区的*容量*是它包含的元素数量。缓冲区的容量永远不会是负数，也永远不会改变。
> 
> *缓冲区的限制*是不应读取或写入的第一个元素的索引。缓冲区的限制永远不会是负数，也永远不会大于其容量。
> 
> *缓冲区的位置*是要读取或写入的下一个元素的索引。缓冲区的位置永远不会是负数，也永远不会大于其限制。
> 
> **不变量**
> 
> 以下不变量适用于标记、位置、限制和容量值：
> 
> ```
> 0 <= mark <= position <= limit <= capacity 
> ```
> 
> 新创建的缓冲区始终具有零位置和未定义的标记。初始限制可能为零，也可能是其他值，具体取决于缓冲区的类型及其构造方式。新分配的缓冲区的每个元素都被初始化为零。
> 
> **标记和重置**
> 
> A buffer's mark is the index to which its position will be reset when the reset method is invoked. The mark is not always defined, but when it is defined it is never negative and is never greater than the position. If the mark is defined then it is discarded when the position or the limit is adjusted to a value smaller than the mark. If the mark is not defined then invoking the reset method causes an InvalidMarkException to be thrown.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T21:18:14.230

The write() method *returns* the numbered bytes transferred. You're overcomplicating this.

# java - 文件夹层次结构遍历

> ID：10449282
> 
> 赞同：-7
> 
> 时间：2012-05-04T12:58:37.680
> 
> 标签：java, algorithm

我需要编写一个有效的算法来完成以下任务：

给定一个可以代表文件或文件夹的节点列表，构建文件夹层次结构的树结构。节点包含： 1.当前节点的父路径，String。2.这个节点是文件还是文件夹。

我花了一天时间思考这个问题，但无法得出答案。这是可行的吗？

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T13:01:26.893

伙计，我认为一个简单的递归文件搜索就足够了。请参阅此链接

[递归列出Java中的文件](https://stackoverflow.com/questions/2056221/recursively-list-files-in-java)

之后它只是使用 JTree。我可以建议您在发布常见问题之前环顾四周吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T13:02:44.617

假设有一种方法可以识别给定节点的父节点（例如通过具有路径），这是绝对可行的。

只是一些提示，因为这似乎是为您设计的学习体验：

使用map nodeKey->node（例如path->node），在遍历节点时提取父节点的键并在map中查找。如果您获得父节点，请将当前节点添加为该父节点的子节点。

# javascript - 异步创建 Google GeoChart

> ID：10449283
> 
> 赞同：0
> 
> 时间：2012-05-04T12:58:38.260
> 
> 标签：javascript, google-visualization

我想在我的应用程序中放置一个 GeoChart，但我不想在 DOM 加载时创建它。我只想在用户交互后渲染。我已经加载了 google.visualization 库，包括 GeoChart 和 CoreChart 包。

当我加载 Chrome 控制台时 google.visualization.arrayToDataTable 和 google.visualization.GeoChart 不见了！在 DOM 加载时执行所有内容时，相同的代码也有效。

关于如何正确加载库的任何提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-13T01:20:39.767

确保您已包含以下两行：

```
google.load('visualization', '1', {'packages': ['geochart']});
google.setOnLoadCallback(drawRegionsMap); 
```

但不是制作回调 drawRegionsMap，而是调用其他一些在加载图表时处理的函数。希望有帮助。

# android - 如何在片段交易时隐藏软键盘？

> ID：10449285
> 
> 赞同：0
> 
> 时间：2012-05-04T12:58:53.673
> 
> 标签：android, tabs, keyboard, android-fragments

当我单击编辑框时，软键盘正在显示。但是当编辑框失去焦点时它没有隐藏。我在我的应用程序中使用片段。我尝试了下面的代码来隐藏键盘。

```
 public void onActivityCreated(Bundle arg0) {

    super.onActivityCreated(arg0);
    _context = this.getActivity();
    InputMethodManager imm = (InputMethodManager) getActivity().getSystemService(Context.INPUT_METHOD_SERVICE);     
    if (imm != null) 
    imm.hideSoftInputFromWindow(getView().getWindowToken(), 0); 
} 
```

但应用程序间歇性崩溃。logcat 错误如下所示。

```
05-04 18:22:15.540: E/AndroidRuntime(8152): java.lang.IllegalStateException: Recursive entry to executePendingTransactions
05-04 18:22:15.540: E/AndroidRuntime(8152): at android.support.v4.app.FragmentManagerImpl.execPendingActions(Unknown Source)
05-04 18:22:15.540: E/AndroidRuntime(8152): at android.support.v4.app.FragmentManagerImpl$1.run(Unknown Source) 
```

请任何人帮助我做到这一点...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T09:10:59.923

我不知道它为什么会崩溃。但我找到了另一种实现方式。这是代码

```
public void onTabChanged(String tag) {

    InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);             
    imm.hideSoftInputFromWindow(mTabHost.getApplicationWindowToken(), 0); 
} 
```

# javascript - Ubuntu 中的 Netbeans 7.0.1 没有 javascript 支持？

> ID：10449292
> 
> 赞同：13
> 
> 时间：2012-05-04T12:59:25.030
> 
> 标签：javascript, netbeans, syntax-highlighting

我刚刚在 ubuntu 12.04 中安装了 netbeans 7.0.1，并且没有任何 JAVASCRIPT 支持。我没有收到任何错误，但我的 .js 文件只是显示为没有语法突出显示的常规文本文件。

我的情况与[这篇文章](https://stackoverflow.com/questions/7488976/netbeans-doesnt-support-javascript)不同，因为当我转到“工具”->“选项”->“杂项”->“文件”时，在“关联文件类型 (MIME)”下我没有“文本/javascript”选项。

同样在我之前安装的 netbeans 中，我可以右键单击项目的“Source Files”文件夹，选择 New -> other，然后我可以像这样创建一个新的 .JS 文件。但是现在没有 .js 文件的选项。只有 PHP（因为我安装了 PHP 插件）、XML、SQL、CSS 和其他一些。

另一件事，我经常在 .php 文件中嵌入 javascript。我的嵌入式 js 只显示为纯文本，没有语法突出显示。

我还检查了 JS 的其他插件，但没有什么可以作为解决方案。有谁知道如何启用 JS 文件识别和语法高亮？

谢谢！

** 更新 **

这个安装很奇怪（编辑文本时，按回车没有反应，没有回车，什么都没有）所以我会尝试重新安装，会更新结果。

** 更新 2 **

从 netbeans 网站安装了 7.1 for linux，一切正常。一定是从 Ubuntu 软件中心安装错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T00:25:00.913

我在 Ubuntu 12.04 64 位上使用 Netbeans 7.0.1。安装 Netbeans 7.1.2 修复了我的颜色/语法问题。

对于需要重新安装的，这里是下载页面： http: [//netbeans.org/downloads/index.html](http://netbeans.org/downloads/index.html)

请务必检查工具 -> 选项 -> 杂项 -> 文件以确保一切正常。

PS @jeffery_the_wind 感谢您的更新！这让我今天发疯了，我用谷歌搜索了几个小时，找不到解决方案。

# c# - 2个数组中的最小值

> ID：10449294
> 
> 赞同：0
> 
> 时间：2012-05-04T12:59:34.560
> 
> 标签：c#, arrays, printing

我有 2 个数组，第一个数组保存 resource_wastage 的所有值，第二个数组保存 power_consumed 的所有值。要实现模糊逻辑，我需要同时检查资源浪费和功耗是否低，然后我的输出将是数组索引，如果其中一个低而第二个不是，那么我应该转到下一个值在数组中。

例如：

```
for(int i=0, i<n; i++) 
if(res_was[0] is low in all res_was[i=0 to n] && [pow_con[0] is low in all pow_con[i=0 to n])
    {
      print i;
      break;
    }

    else continue with next value in arrays; 
```

请帮助我如何实现这一点，我的意思是检查两个数组中的值是否同时低。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T13:07:31.657

你可以使用这样的东西。数组有特殊的最小搜索方法。

```
var resMin = res_was.Min();
var powMin = pow_con.Min();
for(int i = 0; i < n; i++)    
{
      if(res_was[i] == resMin && pow_con[i] == powMin)
      {
         Console.writeLine(i);
         break;
      }    
} 
```

可能您需要使用更复杂的 Min 方法。您可以在 MSDN 中阅读所有这些内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T14:03:58.303

也试试这个；

找到最小值和最小值位置，然后比较是否相等继续你的过程......

```
 int _ires_wasminValue = Enumerable.Range(0, res_was.Length).Min(i => res_was[i]);
        int _imin_res_was_pos = Array.IndexOf(res_was, _ires_wasminValue);

        int _ipow_cons_minValue = Enumerable.Range(0, res_was.Length).Min(i => res_was[i]);
        int _imin_pow_cons_pos = Array.IndexOf(res_was, _ires_wasminValue);

        if (_imin_pow_cons_pos==_imin_res_was_pos)
        {
            Console.writeLine(_imin_pow_cons_pos);                
        } 
```

# android - 我无法在 web 视图中垂直滚动

> ID：10449296
> 
> 赞同：0
> 
> 时间：2012-05-04T12:59:36.867
> 
> 标签：android, android-layout, android-webview

在我的 android 应用程序中，我有一个 webview：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

<WebView
    android:id="@+id/webView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" />

</LinearLayout> 
```

我的问题是我无法垂直滚动页面。在水平方向上它工作得很好，但在垂直方向上却不行。现在，例如，如果我将 android:layout_height 的大小设置为 400dp，那么它就可以工作了！但是我不能支持多种屏幕尺寸......有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T13:05:40.123

添加

```
android:orientation="vertical" 
```

或者

```
android:orientation="horizontal" 
```

到线性布局

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-20T19:54:26.637

对我来说，它通过在 webview 上启用 javascript 来工作。因此，如果未设置该标志，我想 webkit 呈现包含 javascript 的页面存在一些问题。

WebSettings webSettings = mWebView.getSettings();
webSettings.setJavaScriptEnabled(true);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T13:03:16.523

也许您可以将 webview 放在滚动视图中，通过将高度增加到 400 dp，您将其置于创建滚动视图的线性布局的限制之外。加载页面时，线性布局不会考虑到这一点。

# arrays - 数组算法中的匹配

> ID：10449297
> 
> 赞同：0
> 
> 时间：2012-05-04T12:59:41.393
> 
> 标签：arrays, algorithm, match

我有一系列项目，我需要找到匹配的项目（重复项）。我现在正在运行最简单的 O(n^2) 算法。项目类型并不重要，但如果你想知道它的图像。

```
myarray;   
for(i = 0; i < myarray.length - 1; i++) 
    for(int j = i+1; j < myarray.length; j++) 
        if(myarray[i] = myarray[j]) 
           output(names of items); 
```

我尝试了维基百科和谷歌，但无法给出答案。任何语言的任何链接、算法或代码都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T13:09:23.760

如果您可以找到项目的订单，请对它们进行排序。然后找到相等的项目将非常简单，因为它们将彼此相邻。

这只是 O(n*Log(n))。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T13:11:54.963

要查找数组中的重复项，您可以对列表进行排序和扫描，在`O(n log n)`. 如果您只想输出重复项，并且内存不是问题，您可以保留您已经看到的元素的 hashSet，遍历数组，检查当前元素是否在您的集合中。如果是，则将其作为重复输出，否则将其插入到集合中。那将是`O(n)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T13:12:48.520

与其对相邻项目进行排序然后比较，不如将每个项目添加到自平衡二叉树中，这样您就可以免费获得“已经存在”检查（有点）。

# amazon-emr - 我们能否将更多 Amazon Elastic Mapreduce 实例添加到现有 Amazon Elastic Mapreduce 实例中？

> ID：10449300
> 
> 赞同：3
> 
> 时间：2012-05-04T12:59:52.413
> 
> 标签：amazon-emr

我是亚马逊服务的新手，面临一些问题。

假设我在 Amazon Elastic Mapreduce 上运行一些作业流程，总共有 3 个实例。在上面运行我的工作流程时，我发现我的工作需要更多时间来执行。在这种情况下，我需要向其中添加更多实例，以便我的实例会增加，因此作业将快速执行。

我的问题是如何将此类实例添加到现有实例中？因为如果我们终止现有实例并再次创建更多数量的新实例是耗时的。

有什么办法吗？如果是，请建议我。我正在通过 CLI 完成所有这些任务。因此，请也与 AWS 管理控制台中的 GUI 步骤一起使用命令分享答案。

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-09T16:40:10.577

是的，您可以使用命令行工具执行此操作

向核心组添加更多实例：

```
elastic-mapreduce --modify-instance-group CORE --instance-count 40 
```

要创建具有 40 个实例的任务组（无数据节点）：

```
elastic-mapreduce --add-instance-group TASK --instance-count 40 --instance-type c1.medium 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-07T02:01:34.600

重要的是要注意 CORE 实例组实例不能减少，因为它们作为数据节点参与。它们只能增加。TASK 实例只做处理，可以增减。

# c++ - 如何在win32中使用GetSaveFileName保存文件？

> ID：10449304
> 
> 赞同：10
> 
> 时间：2012-05-04T13:00:05.510
> 
> 标签：c++, winapi, savefiledialog

我编写此代码以获取 fileName 以保存我的文件：

```
#include "stdafx.h"
#include <windows.h>

int _tmain(int argc, _TCHAR* argv[])
{            
    OPENFILENAME ofn;

    char szFileName[MAX_PATH] = "";

    ZeroMemory(&ofn, sizeof(ofn));

    ofn.lStructSize = sizeof(ofn); 
    ofn.hwndOwner = NULL;
    ofn.lpstrFilter = (LPCWSTR)L"Text Files (*.txt)\0*.txt\0All Files (*.*)\0*.*\0";
    ofn.lpstrFile = (LPWSTR)szFileName;
    ofn.nMaxFile = MAX_PATH;
    ofn.Flags = OFN_EXPLORER | OFN_FILEMUSTEXIST | OFN_HIDEREADONLY;
    ofn.lpstrDefExt = (LPCWSTR)L"txt";

    GetSaveFileName(&ofn);
    printf("the path is : %s\n", ofn.lpstrFile);
    getchar();
    return 0;
} 
```

但输出是：

```
 the path is : H 
```

为什么 ？难道我做错了什么 ？
我在 Windows 7 上使用 Visual Studio 2008。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-04T13:08:26.863

这一行：

```
printf("the path is : %s\n", ofn.lpstrFile); 
```

应该使用 printf 的宽字符版本。

```
wprintf(L"the path is : %s\n", ofn.lpstrFile); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-04T17:05:06.777

根本问题在于以下几行：

```
char szFileName[MAX_PATH] = "";
...
ofn.lpstrFile = (LPWSTR)szFileName;
ofn.nMaxFile = MAX_PATH; 
```

这将创建一个 MAX_PATH 字符的缓冲区，但它告诉`GetSaveFileName`函数它是一个 MAX_PATH*宽*字符的缓冲区。当有人选择长路径名时，这可能会崩溃（或默默地践踏内存）。

赠品是演员。不要对编译器或库撒谎。他们不喜欢那样，他们最终总会得到报复。将这些行替换为：

```
WCHAR szFileName[MAX_PATH] = L"";
...
ofn.lpstrFile = szFileName;  // no cast needed
ofn.nMaxFile = MAX_PATH; 
```

现在选定的文件名将作为一串宽字符返回。Tony The Lion 的回答是正确的，因为您需要使用`wprintf`而不是`printf`打印宽字符字符串：

```
wprintf(L"the path is : %s\n", ofn.lpstrFile);  // though I'd use szFileName at this point 
```

如果您需要 8 位字符而不是宽字符的字符串，可以使用 WideCharToMultiByte。但我通常会坚持使用宽字符 API。

除非您确切知道它的作用以及在您的特定情况下为什么需要它，否则永远不要施放。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-03-03T21:33:54.923

你们都错了，这是一个简单的 C 指针/堆栈问题。

```
// WRONG:
char szFileName[MAX_PATH] = ""; 
```

这会混淆数组和指针，您在堆栈上声明一个数组，然后更改其内存地址以指向数据部分中的空字符串。换句话说，缓冲区溢出。

```
// RIGHT:
char szFileName[MAX_PATH];
ZeroMemory(szFileName, MAX_PATH); 
```

这在堆栈上声明了一个字符数组并将所有元素初始化为空终止符。

希望有帮助！

# jquery - Matt Ryall 的 jQuery 实时过滤器 - 只返回以字符串开头的结果？

> ID：10449309
> 
> 赞同：0
> 
> 时间：2012-05-04T13:00:13.790
> 
> 标签：jquery

可以修改 Matt Ryall 的 jQuery 实时过滤器以仅显示以搜索文本开头的结果吗？

[http://mattryall.net/blog/2008/07/jquery-filter-demo](http://mattryall.net/blog/2008/07/jquery-filter-demo) 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T13:04:37.987

是的，通过在正则表达式前面添加一个插入符号，它将强制字符串以输入的值开头。

```
$("#filter").keyup(function () {
    var filter = $(this).val(), count = 0;
    $(".filtered:first li").each(function () {
        if ($(this).text().search(new RegExp("^" + filter, "i")) < 0) { // ADDED CARET HERE
            $(this).addClass("hidden");
        } else {
            $(this).removeClass("hidden");
            count++;
        }
    });
    $("#filter-count").text(count);
}); 
```

# android - 带有背景图像和渐变的 Android 选择器

> ID：10449311
> 
> 赞同：17
> 
> 时间：2012-05-04T13:00:16.857
> 
> 标签：android, button, background

我知道有与此类似的帖子，但我在其中任何一个中都找不到我的答案。所以，我有这个可绘制的 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item android:state_enabled="true">
    <bitmap
        android:src="@drawable/bm_btn_background"
        android:tileMode="repeat"
        android:gravity="center" />
</item>
<item android:state_enabled="true">
    <shape android:shape="rectangle">
        <gradient
            android:startColor="#a0e0b071"
            android:endColor="#a0a67637"
            android:angle="270" />
        <stroke
            android:width="1dp"
            android:color="#5c3708" />
        <corners
            android:radius="5dp" />
        <padding
            android:left="10dp"
            android:top="10dp"
            android:right="10dp"
            android:bottom="10dp" />
    </shape>
</item>
<item android:state_pressed="true" >
    <shape>
        <gradient
            android:startColor="#a0a67637"
            android:endColor="#a0e0b071"
            android:angle="270" />
        <stroke
            android:width="1dp"
            android:color="#5c3708" />
        <corners
            android:radius="5dp" />
        <padding
            android:left="10dp"
            android:top="10dp"
            android:right="10dp"
            android:bottom="10dp" />
    </shape>
</item> 
```

我正在尝试创建一个以重复图像作为背景并应用渐变的按钮。使用此代码，我只能看到背景图像，而不是渐变、边框和圆角。此外，当我单击按钮时，它不会改变（渐变应该会改变）。不知道这段代码有什么问题？如果我使用图层列表而不是选择器，我会得到想要的结果，但是当我按下按钮时它也不会改变。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-05-04T13:27:05.497

您的选择器代码错误，因为：

*   您有两个元素的同一状态和选择器遇到的第一个状态（`state_enabled`），`Bitmap`它将停止在那里，并且您的梯度永远不会出现（为此，您应该使用一个`layer-list`具有项目的项目`Bitmap`和梯度的梯度）

*   选择器将按顺序匹配状态。当您按下时`Button`，`state_pressed`将永远不会被激活，因为选择器将首先匹配第`state_enabled`一个元素上的那个（为此，您应该移动`state_pressed`上述 state_enabled 元素的代码）。

实际上，您应该只删除`state_enabled`并让`Bitmap`+`gradient`成为 . 的默认值`Button`。Bellow是您的选择器（我假设您只想更改图像上的渐变（但即使在按下状态下图像也应该出现，如果这不是想要的行为，只留下渐变`state_pressed`））：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <item android:state_pressed="true">
        <layer-list>
            <item>
                <bitmap android:gravity="center" android:src="@drawable/bm_btn_background" android:tileMode="repeat" />
            </item>
            <item>
                <shape>
                     <gradient android:angle="270" android:endColor="#a0e0b071" android:startColor="#a0a67637" />
                     <stroke android:width="1dp" android:color="#5c3708" />
                     <corners android:radius="5dp" />
                     <padding android:bottom="10dp" android:left="10dp" android:right="10dp" android:top="10dp" />
                </shape>
            </item>
        </layer-list>
    </item>

    <item android:state_enabled="true">
        <layer-list>
            <item>
                <bitmap android:gravity="center" android:src="@drawable/bm_btn_background" android:tileMode="repeat" />
            </item>
            <item>
                <shape android:shape="rectangle">
                    <gradient android:angle="270" android:endColor="#a0a67637" android:startColor="#a0e0b071" />
                    <stroke android:width="1dp" android:color="#5c3708" />
                    <corners android:radius="5dp" />
                    <padding android:bottom="10dp" android:left="10dp" android:right="10dp" android:top="10dp" />
                </shape>
            </item>
        </layer-list>
    </item>

</selector> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T13:06:27.947

就我而言，我正在使用它。试试看

```
<item android:state_pressed="true">
    <shape>
        <solid android:color="@color/mediumGray" />

        <stroke
            android:width="1px"
            android:color="@color/darkGray" />

        <padding
            android:bottom="2dp"
            android:left="1dp"
            android:right="1dp"
            android:top="2dp" />

        <corners
            android:bottomLeftRadius="7sp"
            android:bottomRightRadius="7sp"
            android:topLeftRadius="7sp"
            android:topRightRadius="7sp" />
    </shape>
</item>
<item android:state_focused="true">
    <shape>
        <solid android:color="@color/mediumGray" />

        <stroke
            android:width="1px"
            android:color="@color/darkGray" />

        <padding
            android:bottom="2dp"
            android:left="1dp"
            android:right="1dp"
            android:top="2dp" />

        <corners
            android:bottomLeftRadius="7sp"
            android:bottomRightRadius="7sp"
            android:topLeftRadius="7sp"
            android:topRightRadius="7sp" />
    </shape>
</item>
<item>
    <shape>
        <solid android:color="@color/lightGray" />

        <stroke
            android:width="1px"
            android:color="@color/blackTransparent" />

        <padding
            android:bottom="2dp"
            android:left="1dp"
            android:right="1dp"
            android:top="2dp" />

        <corners
            android:bottomLeftRadius="7sp"
            android:bottomRightRadius="7sp"
            android:topLeftRadius="7sp"
            android:topRightRadius="7sp" />
    </shape>
</item> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T13:07:23.150

看看你的状态属性

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <!-- Non focused states -->
    <item android:drawable="@drawable/nicebuttonround" android:state_focused="false" android:state_pressed="false" android:state_selected="false"/>
    <item android:drawable="@drawable/nicebuttonround" android:state_focused="false" android:state_pressed="false" android:state_selected="true"/>

    <!-- Focused states -->
    <item android:drawable="@drawable/nicebuttonroundi" android:state_focused="true" android:state_pressed="false" android:state_selected="false"/>
    <item android:drawable="@drawable/nicebuttonroundi" android:state_focused="true" android:state_pressed="false" android:state_selected="true"/>

    <!-- Pressed -->
    <item android:drawable="@drawable/nicebuttonroundi" android:state_pressed="true" android:state_selected="true"/>
    <item android:drawable="@drawable/nice22i" android:state_pressed="true"/>

</selector> 
```

要将背景作为图像重复，您只需创建 9 个音高图像。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-03T08:52:57.613

我使用 Photoshop 画布大小选项在图像右侧添加了额外的透明空间，它对我来说效果很好。下载下图查看演示。 [![在此处输入图像描述](../Images/88726f014aad49609c759ea12afe08e7.png)](https://i.stack.imgur.com/m5Y6f.png)

# drupal - 如何在 Drupal 的 t() 函数中打印 % 百分比符号？

> ID：10449314
> 
> 赞同：1
> 
> 时间：2012-05-04T13:00:22.030
> 
> 标签：drupal, translation

如何在 Drupal 的 t() 函数中打印 % 百分比符号？

```
<?=t('% Daily Value') ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T11:59:38.327

Drupal`t()`函数使用`%`,`@`和`!`作为变量引用运算符，区别在于在字符串中替换时对变量执行的替换类型。

问题是，为了使它起作用，您必须在`t()`. 在您的示例中，您没有提供替换值数组，因此不会尝试替换。

您的`%`标志应该可以通过，而无需进一步逃脱。

# magento - 致命错误：在第 4 行的 BookmarksController.php 中找不到类“Mage_Adminhtml_Controller_action”

> ID：10449315
> 
> 赞同：3
> 
> 时间：2012-05-04T13:00:22.547
> 
> 标签：magento, bookmarks

表明： `Fatal error: Class 'Mage_Adminhtml_Controller_action' not found in .../app/code/local/Magentix/SocialBookmarking/controllers/Adminhtml/BookmarksController.php on line 4`

我检查了一下，发现第 4 行的 bookmarkscontroller.php.on 中没有任何内容。这是怎么回事？我还检查了社交书市插件是否仍然显示在首页。

原始代码：

```
<?php

/** http://www.magentix.fr **/

class Magentix_SocialBookmarking_Adminhtml_BookmarksController extends Mage_Adminhtml_Controller_action {

    protected function _initAction() {

        $this->loadLayout()

            ->_setActiveMenu('cms/socialbookmarking')

            ->_addBreadcrumb(Mage::helper('adminhtml')->__('Items Manager'), Mage::helper('adminhtml')->__('Item Manager'));

        return $this;

    }   

    public function indexAction() {

        $this->_initAction()->renderLayout();

    }

    public function editAction() {

        $id     = $this->getRequest()->getParam('id');

        $model  = Mage::getModel('socialbookmarking/bookmarks')->load($id);

        if ($model->getId() || $id == 0) {

            $data = Mage::getSingleton('adminhtml/session')->getFormData(true);

            if (!empty($data)) {

                $model->setData($data);

            }

            Mage::register('socialbookmarking_data', $model);

            $this->loadLayout();

            $this->_setActiveMenu('cms/socialbookmarking');

            $this->_addBreadcrumb(Mage::helper('adminhtml')->__('Item Manager'), Mage::helper('adminhtml')->__('Item Manager'));

            $this->_addBreadcrumb(Mage::helper('adminhtml')->__('Item News'), Mage::helper('adminhtml')->__('Item News'));

            $this->getLayout()->getBlock('head')->setCanLoadExtJs(true);

            $this->_addContent($this->getLayout()->createBlock('socialbookmarking/adminhtml_bookmarks_edit'))

                ->_addLeft($this->getLayout()->createBlock('socialbookmarking/adminhtml_bookmarks_edit_tabs'));

            $this->renderLayout();

        } else {

            Mage::getSingleton('adminhtml/session')->addError(Mage::helper('socialbookmarking')->__('Bookmark does not exist'));

            $this->_redirect('*/*/');

        }

    }

    public function newAction() {

        $this->_forward('edit');

    }

    public function saveAction() {

        if ($data = $this->getRequest()->getPost()) {

            if(isset($_FILES['bookmarkimage']['name']) && $_FILES['bookmarkimage']['name'] != '') {

                try {

                    $uploader = new Varien_File_Uploader('bookmarkimage');

                    $uploader->setAllowedExtensions(array('jpg','jpeg','gif','png'));

                    $uploader->setAllowRenameFiles(false);

                    $uploader->setFilesDispersion(false);

                    $path = Mage::getBaseDir('media').DS.'social';

                    $uploader->save($path, $_FILES['bookmarkimage']['name']);

                } catch (Exception $e) {

                }

                $data['image'] = 'social/'.$_FILES['bookmarkimage']['name'];

            }

            if(isset($data['bookmarkimage']['delete'])) $data['image'] = '';

            $model = Mage::getModel('socialbookmarking/bookmarks');     

            $model->setData($data)->setId($this->getRequest()->getParam('id'));

            try {

                if ($model->getCreatedTime == NULL || $model->getUpdateTime() == NULL) {

                    $model->setCreatedTime(now())->setUpdateTime(now());

                } else {

                    $model->setUpdateTime(now());

                }   

                $model->save();

                Mage::getSingleton('adminhtml/session')->addSuccess(Mage::helper('socialbookmarking')->__('Bookmark was successfully saved'));

                Mage::getSingleton('adminhtml/session')->setFormData(false);

                if ($this->getRequest()->getParam('back')) {

                    $this->_redirect('*/*/edit', array('id' => $model->getId()));

                    return;

                }

                $this->_redirect('*/*/');

                return;

            } catch (Exception $e) {

                Mage::getSingleton('adminhtml/session')->addError($e->getMessage());

                Mage::getSingleton('adminhtml/session')->setFormData($data);

                $this->_redirect('*/*/edit', array('id' => $this->getRequest()->getParam('id')));

                return;

            }

        }

        Mage::getSingleton('adminhtml/session')->addError(Mage::helper('socialbookmarking')->__('Unable to find bookmark to save'));

        $this->_redirect('*/*/');

    }

    public function deleteAction() {

        if( $this->getRequest()->getParam('id') > 0 ) {

            try {

                $model = Mage::getModel('socialbookmarking/bookmarks');

                $model->setId($this->getRequest()->getParam('id'))->delete();

                Mage::getSingleton('adminhtml/session')->addSuccess(Mage::helper('socialbookmarking')->__('Bookmark was successfully deleted'));

                $this->_redirect('*/*/');

            } catch (Exception $e) {

                Mage::getSingleton('adminhtml/session')->addError($e->getMessage());

                $this->_redirect('*/*/edit', array('id' => $this->getRequest()->getParam('id')));

            }

        }

        $this->_redirect('*/*/');

    }

    public function massDeleteAction() {

        $socialbookmarkingIds = $this->getRequest()->getParam('socialbookmarking');

        if(!is_array($socialbookmarkingIds)) {

            Mage::getSingleton('adminhtml/session')->addError(Mage::helper('socialbookmarking')->__('Please select bookmark(s)'));

        } else {

            try {

                foreach ($socialbookmarkingIds as $socialbookmarkingId) {

                    $socialbookmarking = Mage::getModel('socialbookmarking/bookmarks')->load($socialbookmarkingId);

                    $socialbookmarking->delete();

                }

                Mage::getSingleton('adminhtml/session')->addSuccess(

                    Mage::helper('adminhtml')->__(

                        'Total of %d record(s) were successfully deleted', count($socialbookmarkingIds)

                    )

                );

            } catch (Exception $e) {

                Mage::getSingleton('adminhtml/session')->addError($e->getMessage());

            }

        }

        $this->_redirect('*/*/index');

    }

    public function massStatusAction() {

        $socialbookmarkingIds = $this->getRequest()->getParam('socialbookmarking');

        if(!is_array($socialbookmarkingIds)) {

            Mage::getSingleton('adminhtml/session')->addError($this->__('Please select bookmark(s)'));

        } else {

            try {

                foreach ($socialbookmarkingIds as $socialbookmarkingId) {

                    $socialbookmarking = Mage::getSingleton('socialbookmarking/bookmarks')

                        ->load($socialbookmarkingId)

                        ->setStatus($this->getRequest()->getParam('status'))

                        ->setIsMassupdate(true)

                        ->save();

                }

                $this->_getSession()->addSuccess(

                    $this->__('Total of %d record(s) were successfully updated', count($socialbookmarkingIds))

                );

            } catch (Exception $e) {

                $this->_getSession()->addError($e->getMessage());

            }

        }

        $this->_redirect('*/*/index');

    }

    protected function _sendUploadResponse($fileName, $content, $contentType='application/octet-stream') {

        $response = $this->getResponse();

        $response->setHeader('HTTP/1.1 200 OK','');

        $response->setHeader('Pragma', 'public', true);

        $response->setHeader('Cache-Control', 'must-revalidate, post-check=0, pre-check=0', true);

        $response->setHeader('Content-Disposition', 'attachment; image='.$fileName);

        $response->setHeader('Last-Modified', date('r'));

        $response->setHeader('Accept-Ranges', 'bytes');

        $response->setHeader('Content-Length', strlen($content));

        $response->setHeader('Content-type', $contentType);

        $response->setBody($content);

        $response->sendResponse();

        die;

    }

} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-04T13:29:24.857

您的扩展类名称拼写错误 -`Mage_Adminhtml_Controller_action`应该是`Mage_Adminhtml_Controller_Action`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T13:11:05.153

确保你：

*   将文件包含在bookmarkscontroller.php 中
*   把 BookMarksController 放在正确的位置

# c - 如何执行多次出现的二进制搜索？

> ID：10449317
> 
> 赞同：0
> 
> 时间：2012-05-04T13:00:27.043
> 
> 标签：c, algorithm

我正在尝试对数组执行二进制搜索，我必须找到**所有**出现的字符串。我已经尝试过`bsearch`，但我不知道该怎么做。

```
/* data structures */

typedef struct {
    char *name;
    char *value;
} acronym;

struct {
    acronym *tab;
    size_t size;
} acronymArray;

/* code */

char buf[256];
fgets(buf, sizeof buf, stdin);
for (size_t i = 0; i < acronymArray.size; ++i) 
       if (!strcmp(buf, acronymArray.tab[i].name)) 
           printf("Found: %s\n", acronymArray.tab[i].value);

 /* How to translate it with a binary search ?
    Of course my array was sorted with qsort previously */ 
```

我试过了，但它只适用于一次：

```
if ((k = bsearch(k, acronymArray.tab, acronymArray.size, sizeof *acronymArray.tab, compare)))
    printf("found : %s\n", k->value); 
```

我想过在我的结构“首字母缩略词”中添加一个布尔变量，但我不确定……这不是作业。

非常感谢 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T13:04:23.183

这应该很简单：您使用二分搜索找到*任何*出现，然后从找到的出现向前/向后查看，直到找到*不*等于找到的项目的内容（或直到找到序列结束）。所有出现在排序列表中必须是连续的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T13:20:03.417

我认为您应该发布所有代码。存储字符串的常用方式是使用哈希表或二叉树。

# c# - 后台弹出消息框

> ID：10449318
> 
> 赞同：0
> 
> 时间：2012-05-04T13:00:31.723
> 
> 标签：c#, asp.net

```
String message = "Are you sure the event: \"" + event_text + "\" has been complete for Loan# " + loannumber + "?"; //show popup to confirm the completion of event

var result = System.Windows.Forms.MessageBox.Show(message, "Loan # "+loannumber+" - Processed Event: "+event_text, System.Windows.Forms.MessageBoxButtons.YesNo);

if (result == System.Windows.Forms.DialogResult.No)
{

    //do nothing close popup
}
else
{

//do something else 
```

我的 ASP.NET 页面上有这段代码。当我单击网页上的按钮时，应该会显示此弹出窗口。问题是有时它会显示在前台，但有时我必须实际单击文档上的小图标。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T13:06:43.673

将服务器端对话框显示为 Web 应用程序的一部分是不常见的。这将阻止 Web 服务器的线程，并且用户（除非他们坐在 Web 服务器控制台，而不是在家/办公室使用 Web 浏览器）将看不到它。

我认为您想做一个客户端弹出窗口-也许使用 javascript 警报或 HTML 对话框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T13:23:33.923

不要使用消息框。

如果您需要从代码隐藏中触发 JavaScript 警报消息，请尝试使用 ScriptManager。

```
ScriptManager.RegisterClientScriptBlock(this, typeof(Page), "clientScript", "alert('hi');", true) 
```

上面的代码使用页面注册脚本并触发警报消息。最后一个参数*true*表示标签将围绕您提供的脚本打开和关闭。

# jquery - 无法让 $.getScript 工作

> ID：10449322
> 
> 赞同：0
> 
> 时间：2012-05-04T13:00:41.657
> 
> 标签：jquery, getscript

我正在尝试在桌面上为 cloudzoom 加载一个自定义 javascript，为触摸设备加载另一个。

在我的我有这段代码：

```
 if ("ontouchstart" in document.documentElement){
            // It's a touch screen device.
           $.getScript('/js/cloud-zoom.1.0.2.min.js'), 
               $(function() {
                  alert('iPad Load was performed.');
                });
        }
        else {
            $.getScript('/js/cloud-zoom.1.0.2.custom.js'), 
            $(function() {
              alert('Custom Load was performed.');
            });
        } 
```

这工作正常。但是当我删除警报时，脚本将不会加载......我也没有在 Firefox 的控制台中收到错误。我怎样才能让它在不发出警报的情况下工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T13:03:24.877

您有语法错误。

你写了

```
$.getScript(...),
$(function() { }); 
```

是无效的`,`，不应该在那里。

如果要传递脚本回调，请编写

```
$.getScript("...", function() { ... }); 
```

# mysql - 将较长的字符串与较短的字符串匹配

> ID：10449324
> 
> 赞同：1
> 
> 时间：2012-05-04T13:00:42.470
> 
> 标签：mysql

我有一个表单，用户可以在其中搜索表中的所有条目，但我遇到了特定条目的问题。

为了更好地理解，我举个例子：

用户可以选中 5 个框：1、2、3、4、5，并且他选中了所有框。

如果特定行的值为“1|2|3”，我的搜索查询将找不到它。

事先我在 php （这是一个数组）中获取 post 变量，并在每个值之前和之后添加“%”。在这种情况下：“%1%2%3%4%5%”

我的搜索查询：

```
SELECT id FROM table WHERE string LIKE '%1%2%3%4%5%' 
```

在这种情况下，它不会找到值为“1|2|3”的行。我想这种方式很正常，反之亦然，但我想执行一个匹配原始字符串部分的查询。在我的情况下，“%1%2%3%4%5%”匹配“1|2|3”。

我怎样才能做到这一点？

提前感谢您抽出宝贵时间。

编辑：我可以在没有多个 AND、OR 运算符的情况下执行此操作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T13:03:26.147

在你找到更性感、更高效的东西之前，你可以使用：

```
SELECT id FROM table WHERE string LIKE '%1%' OR string LIKE '%2%' OR string LIKE '%3%' OR string LIKE '%4%' OR string LIKE '%5%' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T13:03:39.533

我会说 - 不要使用 like，使用 substring 或一些类似的功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T13:10:59.177

只需将其更改为：

```
string LIKE '%1%'
  OR
string LIKE '%2%'
  OR
string LIKE '%3%'
  ... 
```

这将解决您的问题 - 但您应该真正考虑[规范化您的数据库](http://en.wikipedia.org/wiki/Database_normalization)（在这种情况下，将 5 个不同的标志存储为 1/0 用于五个不同的设置，而不是将它们全部放在一个字段中）。

# php - zend 框架视图因异常而中断

> ID：10449336
> 
> 赞同：0
> 
> 时间：2012-05-04T13:01:34.207
> 
> 标签：php, zend-framework

我在我的一个视图**index.phtml中使用此代码**

```
 <?php echo $this->action('123', '456', null); ?>
        <?php echo $this->action('googlecalendar', 'widget', null); ?>
        <?php echo $this->action('blablabla', 'abc', null); ?> 
```

现在，如果第二个动作在这一行抛出**异常**

```
$service = Zend_Gdata_ClientLogin::getHttpClient($email, $password, $service); 
```

（我正在尝试/捕获）

```
const MANCA_DATI_AUTENTICAZIONE = 1;
const ERRORE_DURANTE_COLLEGAMENTO = 2;
const CAPTCHA_REQUIRED = 3;
try {
                    $service = Zend_Gdata_ClientLogin::getHttpClient($email, $password, $service);

                }
                catch(Zend_Gdata_App_HttpException $e)
                {

                    return self::ERRORE_DURANTE_COLLEGAMENTO;
                }
                catch(Zend_Gdata_App_AuthException $e)
                {

                    return self::MANCA_DATI_AUTENTICAZIONE;
                }
                catch(Zend_Gdata_App_CaptchaRequiredException $e)
                {

                    return self::CAPTCHA_REQUIRED;
                }
... 
```

该文件的整个输出都在`<html xmlns="http://www.w3.org/1999/xhtml">`标记之前。

这是我的**layout.php**

```
<?php

$content_layout = $this->layout()->content;
...
?>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
...<?php echo $content_layout?> 
```

我目前正在使用最新的 Zend (1.1.11)。如果该行没有发生异常，则一切正常。我尝试调试 zend 库但找不到解决方案

# javascript - 了解 node.js 的某些方面

> ID：10449347
> 
> 赞同：4
> 
> 时间：2012-05-04T13:02:10.283
> 
> 标签：javascript, node.js

node.js 有几个方面我不太了解。我希望有人能让事情更清楚

当您安装 node.js 时，您将文件存储在哪里，以便 Web 浏览器可以显示您的内容？例如 Apache 有一个 www 文件夹。

node.js 会取代客户端 javascript 吗？

node.js 如何与 HTML 交互？例如，如果我想将来自服务器的数据放入这个 div 元素中`<div id="content"></div>` ，在 PHP 中，您可以执行以下操作：`<div id="content"><?php echo $content; ?></div>`

你会从客户端调用 node.js 吗？例如：对 node.js 的 Ajax 请求以获取数据。

令我困惑的是，因为它是从服务器运行的，所以我希望我可以在浏览器上使用 javascript 从 node.js 服务器获取数据。但是，我看到的示例从未完成。

提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T13:06:27.493

> 当您安装 node.js 时，您将文件存储在哪里，以便 Web 浏览器可以显示您的内容？例如 Apache 有一个 www 文件夹。

哪里都行。node.js 不提供静态内容，它运行 JavaScript。您在启动它时告诉它要运行哪个脚本。

您可以编写一些提供静态内容的 JavaScript，但将其保存在何处取决于您编写的代码。

> node.js 会取代客户端 javascript 吗？

仅在任何服务器端编程替换客户端 JavaScript 的情况下。

在服务器端使用 JS 的一个优点是您可以在客户端和服务器上重用库。有关声称专注于此的框架，请参阅[Mojito](http://developer.yahoo.com/cocktails/mojito/)（我自己还没有时间尝试）。

> 例如，如果我想将来自服务器的数据放入这个 div 元素中`<div id="content"></div>`，在 PHP 中，您可以执行以下操作：`<div id="content"><?php echo $content; ?></div>`

PHP 是一种具有嵌入式编程语言的模板语言。JavaScript 是一种编程语言。通常，您会使用 JS 中的模板语言（例如[mustache](http://mustache.github.com/)）。

> 你会从客户端调用 node.js 吗？例如：对 node.js 的 Ajax 请求以获取数据。

是的，如果你愿意的话。就像任何其他服务器端编程环境一样。（假设您使用节点来运行 HTTP 服务器）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T14:06:39.177

Node.js 不是服务器（例如 Apache）。它是一个使用一些内置库（所谓的模块）运行 Javascript 的平台。在 Node.js 中编写服务器（HTTP 或任何其他）非常容易，但您也可以编写完全不同的程序（与网络无关，意味着在本地执行）。

我建议您阅读以下内容：[http](http://www.nodebeginner.org/) ://www.nodebeginner.org/ 。这花了我几个小时，但让我能够毫不费力地理解 Node 的基础知识。

至于客户端脚本，它通常是分开的。Node 中的代码在单独的环境中运行，然后在浏览器中运行。他们可以交流，但你必须明确地让他们交流。它与 PHP 中的服务器端编码没有太大区别。服务器上的代码会产生一些输出（例如 HTML），然后发送给客户端。如果输出中有脚本，客户端（浏览器）会执行它。它们可以通信（通过 XHR、websockets 等），但这些脚本本身是独立的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T13:50:08.890

> node.js 如何与 HTML 交互？例如，如果我想将来自服务器的数据放入这个 div 元素中，在 PHP 中，您可以执行以下操作：

您可能会将内容作为 JSON 发送到 JS-Client 并将其插入 DOM（使用纯 JS 或 JQuery）。

我已经在 Node.js 中编写了一个非常简单（而且功能不太丰富:-P）的*聊天*[应用程序](https://github.com/helpermethod/real-time-web-applications)，尝试一些概念并了解在客户端和服务器上使用 JS。也许它会给你一些线索。

**编辑**

在这个应用程序中，服务器还提供静态文件，在实现生产就绪应用程序时不应该这样做（Node 并不真正适合提供静态文件！）。

# javascript - 使用 Javascript 在命令提示符下提示用户输入

> ID：10449351
> 
> 赞同：1
> 
> 时间：2012-05-04T13:02:28.707
> 
> 标签：javascript, windows, user-input, command-prompt

我的一个团队使用 DSS 在 windows 命令提示符下运行 javascript 以实现某些芯片设计目的。

现在需要在命令提示符下提示用户输入，并且他们希望它使用 Javascript 函数来完成。

我尝试过警报和提示，但我感觉无法使用 Javascript 在命令提示符上提示用户输入。

该脚本用于某种 CCS 事物。

任何人都可以指导我们如何使用 JAVASCRIPT 在命令提示符下提示用户输入。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T13:17:09.797

您可以使用`StdIn`：

```
WScript.StdOut.Write('please enter your input: ');
var myInput = WScript.StdIn.ReadLine(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T13:07:39.413

由于您使用的是 Windows，因此最简单的方法是使用 JScript 引擎。它可以使用几乎所有的 windows 内部功能。

以下是有关如何使用输入/输出的说明：

[http://msdn.microsoft.com/en-us/library/c61dx86d%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/c61dx86d%28v=vs.85%29.aspx) http://www.aspfree.com/c/a/Windows-Scripting/Handling-User-Input -in-WSH/ [http://technet.microsoft.com/en-us/library/ee156599.aspx](http://technet.microsoft.com/en-us/library/ee156599.aspx)

# eclipse - 使用 Maven pom.xml 将 War 文件部署到 Tomcat 根目录

> ID：10449354
> 
> 赞同：2
> 
> 时间：2012-05-04T13:02:39.070
> 
> 标签：eclipse, tomcat, web-applications, maven, pom.xml

假设以下`pom.xml`maven 将构建一个`client.war`文件，该文件在部署到 Tomcat 时将具有 URL`www.server.com:8080/client/`

必须进行哪些更改才能在服务器根目录访问应用程序`www.server.com:8080/`？

> ```
> <project>
>     <modelVersion>4.0.0</modelVersion>
>     <groupId>...</groupId>
>     <artifactId>client</artifactId>
>     <packaging>war</packaging>
>     <version>1.0-SNAPSHOT</version>
>     <name>...</name>
>     <url>http://maven.apache.org</url>
>     <build>
>         <resources>
>             <resource>
>                 <directory>target/generated-resources</directory>
>             </resource>
>             <resource>
>                 <directory>src/main/resources</directory>
>                 <filtering>true</filtering>
>             </resource>
>         </resources>
>         <plugins>
>             ...
>         </plugins>
>         <finalName>client</finalName>
>     </build>
> ...
> </project> 
> ```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-04T13:44:36.370

如果您愿意，我相信您可以将战争命名为 client.war。然后配置[tomcat6插件](http://tomcat.apache.org/maven-plugin-2/tomcat6-maven-plugin/deploy-mojo.html)，设置路径如下：

```
<plugin>
  <groupId>org.apache.tomcat.maven</groupId>
  <artifactId>tomcat6-maven-plugin</artifactId>
  <version>2.0-beta-1</version>
      <!-- put the configuration in an execution if you want to... -->
      <configuration>
        <path>/</path>
        <warFile>${project.build.directory}/client.war</warFile>
        <!-- other config options here -->
      </configuration>
</plugin> 
```

我没有使用过tomcat7版本的插件，但我猜它是相似的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-27T15:01:40.377

由于您使用的是 eclipse、tomcat 和 maven 的组合，我将猜测这里使用的是 m2e-wtp 插件。有一个[FAQ 可以解决这个问题](http://wiki.eclipse.org/M2E-WTP_FAQ#How_do_I_change_the_context_root_of_my_project.3F)。这也显示了如何以特定于 maven 的方式更改上下文根（使用 war 插件为战争指定 finalName），这会导致正确命名的战争文件（例如其他答案中提到的 ROOT.war 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T14:34:46.900

Maven war 插件（默认定义在 super-pom 上）只会生成一个 war 文件。您可以在 Tomcat 上设置您的应用程序。如果您想将“部署到容器”添加到您的 maven 构建中，请使用[Tomcat Maven Plugin](http://tomcat.apache.org/maven-plugin.html)或[Cargo Maven Plugin](http://cargo.codehaus.org/Maven2+plugin)。

实际上，您想要的与 Maven 无关。将您的战争名称设置为 ROOT.war 应该这样做（`<finalName>ROOT</finalName>`在您的构建部分），但是如果您想将您添加`context.xml`到战争文件中，您可以执行以下操作（假设`src/main/webapp`您的 webapp 文件夹是由 maven 定义的）：

```
`<plugin>
<groupId>org.apache.maven.plugins</groupId>

<artifactId>maven-war-plugin</artifactId>  
        <configuration>  
          <webResources>  
            <webResource>  
              <directory>${basedir}/src/main/webapp/META-INF</directory>  
              <includes>  
                <include>context.xml</include>  
              </includes>  
              <targetPath>META-INF</targetPath>  
              <filtering>true</filtering>  
            </webResource>  
          </webResources>  
        </configuration>  
      </plugin> 
```

`

# iphone - 使用 shouldChangeCharacterInRange 方法无法在 UITextField 中获得正确的值

> ID：10449358
> 
> 赞同：1
> 
> 时间：2012-05-04T13:02:46.560
> 
> 标签：iphone, objective-c, uitextfield

我有一个来自我的一个单元格的 detailView，它就在那里。我有 2 个 UITextField，其中一个我输入 100 之类的值，重点是我希望另一个 UITextField 显示“a+b”值。例如。在我的“a”文本字段中，我有一个值 45，当我输入“b”文本字段时，它应该是动态变化的，当我输入 1 时它应该是 46，当我输入 10 时，它应该是 55、100 - 145 .但我的问题是，它得到“旧”值，所以当我输入10时它只加1，当我输入100时它加10。当我最后点击屏幕上的任何地方时，键盘消失然后它得到正确的值，但它应该是动态变化的。有一段我的代码：

```
-(BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {

    NSString *calculator=[calculateField text];
    int modifyer = [calculator intValue];

    intProtein = [protein intValue];
    int prot = [protein intValue];

    self.intProteinResult = prot+modifyer;

    [proteinTextField setText:[NSString stringWithFormat:@"%i", intProteinResult]];

    return YES;
} 
```

是的，我确实尝试过搜索与我类似的主题，并尝试过其他方法 stringByReplacingCharactersInRange:range withString:string。但我不知道如何使用它。请帮助，任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T14:03:19.837

使用此代码将值分配给计算器变量：

```
NSString* calculator = [[calculateField text] stringByReplacingCharactersInRange: range withString: string]; 
```

无论替换或编辑哪个字符，上述内容都应该始终有效。

# r - `levels<-`(这是什么魔法？

> ID：10449366
> 
> 赞同：117
> 
> 时间：2012-05-04T13:03:18.017
> 
> 标签：r, types, levels

在回答另一个问题时，@Marek 发布了以下解决方案： [https ://stackoverflow.com/a/10432263/636656](https://stackoverflow.com/a/10432263/636656)

```
dat <- structure(list(product = c(11L, 11L, 9L, 9L, 6L, 1L, 11L, 5L, 
                                  7L, 11L, 5L, 11L, 4L, 3L, 10L, 7L, 10L, 5L, 9L, 8L)), .Names = "product", row.names = c(NA, -20L), class = "data.frame")

`levels<-`(
  factor(dat$product),
  list(Tylenol=1:3, Advil=4:6, Bayer=7:9, Generic=10:12)
  ) 
```

作为输出产生：

```
 [1] Generic Generic Bayer   Bayer   Advil   Tylenol Generic Advil   Bayer   Generic Advil   Generic Advil   Tylenol
[15] Generic Bayer   Generic Advil   Bayer   Bayer 
```

这只是一个向量的打印输出；所以要存储它，你可以做更令人困惑的事情：

```
res <- `levels<-`(
  factor(dat$product),
  list(Tylenol=1:3, Advil=4:6, Bayer=7:9, Generic=10:12)
  ) 
```

显然这是对级别函数的某种调用，但我不知道这里做了什么。这种巫术叫什么名字，如何提升自己在这个领域的魔法能力？

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2012-05-08T02:40:42.237

这里的答案很好，但他们错过了一个重要的点。让我试着描述一下。

R 是一种函数式语言，不喜欢改变它的对象。但它确实允许赋值语句，使用替换函数：

```
levels(x) <- y 
```

相当于

```
x <- `levels<-`(x, y) 
```

诀窍是，这种重写是由`<-`; 它不是由`levels<-`. `levels<-`只是一个接受输入并给出输出的常规函数​​；它不会改变任何东西。

这样做的一个结果是，根据上述规则，`<-`它必须是递归的：

```
levels(factor(x)) <- y 
```

是

```
factor(x) <- `levels<-`(factor(x), y) 
```

是

```
x <- `factor<-`(x, `levels<-`(factor(x), y)) 
```

这种纯函数转换（直到最后，赋值发生的地方）等同于命令式语言中的赋值，这有点美妙。如果我没记错的话，函数式语言中的这种结构称为镜头。

但是，一旦你定义了替换函数，如`levels<-`，你会得到另一个意想不到的意外收获：你不仅有能力进行分配，你还有一个方便的函数，它接受一个因素，并给出另一个不同级别的因素。真的没有什么“任务”！

因此，您所描述的代码只是利用了`levels<-`. 我承认这个名字`levels<-`有点令人困惑，因为它暗示了一个任务，但这不是正在发生的事情。该代码只是设置了一种管道：

*   从...开始`dat$product`

*   将其转换为因子

*   更改级别

*   将其存储在`res`

就个人而言，我认为那行代码很漂亮；）

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-05-04T13:10:38.250

没有巫术，这就是（子）赋值函数的定义方式。 `levels<-`有点不同，因为它是（子）分配因子属性的原语，而不是元素本身。这种类型的函数有很多例子：

```
`<-`              # assignment
`[<-`             # sub-assignment
`[<-.data.frame`  # sub-assignment data.frame method
`dimnames<-`      # change dimname attribute
`attributes<-`    # change any attributes 
```

其他二元运算符也可以这样调用：

```
`+`(1,2)  # 3
`-`(1,2)  # -1
`*`(1,2)  # 2
`/`(1,2)  # 0.5 
```

既然你知道了，这样的事情真的会让你大吃一惊：

```
Data <- data.frame(x=1:10, y=10:1)
names(Data)[1] <- "HI"              # How does that work?!? Magic! ;-) 
```

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2012-05-04T13:23:28.533

这种“魔术”的原因是“赋值”表单必须有一个真正的变量才能处理。并且`factor(dat$product)`没有分配给任何东西。

```
# This works since its done in several steps
x <- factor(dat$product)
levels(x) <- list(Tylenol=1:3, Advil=4:6, Bayer=7:9, Generic=10:12)
x

# This doesn't work although it's the "same" thing:
levels(factor(dat$product)) <- list(Tylenol=1:3, Advil=4:6, Bayer=7:9, Generic=10:12)
# Error: could not find function "factor<-"

# and this is the magic work-around that does work
`levels<-`(
  factor(dat$product),
  list(Tylenol=1:3, Advil=4:6, Bayer=7:9, Generic=10:12)
  ) 
```

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2012-05-04T14:58:10.410

对于用户代码，我确实想知道为什么要使用这样的语言操作？您问这是什么魔法，其他人指出您正在调用具有名称的替换函数`levels<-`。对于大多数人来说，这很神奇，而且真正的预期用途是`levels(foo) <- bar`.

您展示的用例是不同的，因为`product`它不存在于全局环境中，因此它只存在于调用的本地环境中，`levels<-`因此您想要进行的更改不会持续存在 - 没有重新分配`dat`.

在这些情况下，`within()` 使用的功能是最理想的。你自然会想写

```
levels(product) <- bar 
```

在 R 中，但当然`product`不作为对象存在。`within()`解决了这个问题，因为它设置了您希望运行 R 代码的环境并在该环境中评估您的表达式。`within()`因此，在正确修改的数据帧中，将调用的返回对象分配给成功。

这是一个示例（您不需要创建新的`datX`- 我只是这样做，所以中间步骤保留在最后）

```
## one or t'other
#dat2 <- transform(dat, product = factor(product))
dat2 <- within(dat, product <- factor(product))

## then
dat3 <- within(dat2, 
               levels(product) <- list(Tylenol=1:3, Advil=4:6, 
                                       Bayer=7:9, Generic=10:12)) 
```

这使：

```
> head(dat3)
  product
1 Generic
2 Generic
3   Bayer
4   Bayer
5   Advil
6 Tylenol
> str(dat3)
'data.frame':   20 obs. of  1 variable:
 $ product: Factor w/ 4 levels "Tylenol","Advil",..: 4 4 3 3 2 1 4 2 3 4 ... 
```

我很难看出像你展示的那样的结构在大多数情况下是如何有用的——如果你想改变数据，改变数据，不要创建另一个副本并改变它（这就是所有的`levels<-`调用毕竟）。

# xcode - 用自制版本覆盖 Xcode 中的 git

> ID：10449374
> 
> 赞同：43
> 
> 时间：2012-05-04T13:03:43.410
> 
> 标签：xcode, macos, git, path, homebrew

我已经安装了 XCode，因此 git 也在那里。由于我想使用自制软件安装更新版本的 git。

但是由于我的 PATH 看起来像这样，因此从未调用过 git 的自制版本

```
/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11/bin 
```

这意味着`/usr/bin/git`总是在之前调用`/usr/local/bin/git`。

有没有办法在不改变 PATH 的情况下改变它？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-05-04T20:25:01.433

Xcode 实际上使用的是存储在`/Applications/Xcode.app/Contents/Developer/usr/bin`. `/usr/bin`当您安装命令行工具作为 Xcode 安装的一部分时，将安装相同版本的 GIT 。因此，您将无法更改 Xcode 正在使用的内容（除非您愿意修改 Xcode 包的内容）。如果从终端应用程序中，您想使用自制安装的 GIT，那么您有两个选择：

1.  使用完整路径引用 GIT`/usr/local/bin/git ...` 对于这种情况，您可以创建一个别名`alias mgit=/usr/local/bin/git`，然后`mgit ...`从终端使用
2.  将路径更改为`PATH=/usr/local/bin:$PATH`您的`.bashrc`或`.zshrc`使用 zsh 文件（或每次在命令行启动终端时）。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-11-13T14:49:29.240

由于 Xcode 硬编码了自己安装的 git 版本，因此`/Applications/Xcode.app/Contents/Developer/usr/bin/git`我设法使用了这个变通技巧：

1.  切换到 Xcode 目录：

    `cd /Applications/Xcode.app/Contents/Developer/usr/bin`

2.  像这样重命名 Xcode 的 git：

    `sudo mv ./git ./git-xcode-usr-bin`

3.  链接通过自制软件安装的我自己的 git：

    `sudo ln -s /usr/local/bin/git ./git`

我做了同样的事情`/usr/bin/git`

这将实际链接`/usr/local/Cellar/git/1.8.0/bin/git`（因为我目前使用的是 git 1.8.0）

当然这可能会导致其他一些问题，例如当我将来升级自制软件的版本 git 时，它对我不起作用:( 然后我必须创建一个新链接。

我这样做是因为我想在这里解决我自己的问题[](https://stackoverflow.com/questions/13177203/unable-to-create-a-snapshot-in-xcode-4-5-1-after-update-the-gitconfig-option "XCode 4.5.1 更新 ~/.gitconfig 选项 [push.default] 为 “simple”">13177203</a> 后无法创建快照，在 StackOverFlow 上搜索了半天，终于得到了这个解决方案。 </p>     </div>
    <div class=")

[于 2012-11-13T14:49:29.240 回答](https://stackoverflow.com/questions/13177203/unable-to-create-a-snapshot-in-xcode-4-5-1-after-update-the-gitconfig-option "XCode 4.5.1 更新 ~/.gitconfig 选项 [push.default] 为 “simple”">13177203</a> 后无法创建快照，在 StackOverFlow 上搜索了半天，终于得到了这个解决方案。 </p>     </div>
    <div class=")[](https://stackoverflow.com/questions/13177203/unable-to-create-a-snapshot-in-xcode-4-5-1-after-update-the-gitconfig-option "XCode 4.5.1 更新 ~/.gitconfig 选项 [push.default] 为 “simple”">13177203</a> 后无法创建快照，在 StackOverFlow 上搜索了半天，终于得到了这个解决方案。 </p>     </div>
    <div class=")

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-06-17T16:02:38.487

如果您使用的是[fish shell](http://fishshell.com)而不是 bash，则可以通过将以下内容添加到`~/.config/fish/config.fish`.

```
function git
  /usr/local/bin/git $argv; 
end 
```

# ssh - 期望语言，如何在期望脚本关闭时保持生成的程序运行

> ID：10449376
> 
> 赞同：2
> 
> 时间：2012-05-04T13:03:47.707
> 
> 标签：ssh, tcl, expect

```
spawn ssh -fnqX username@192.168.1.100 google-chrome 
expect -re "password"  
send "passwd\r"
interact (?) 
```

如何在整个脚本关闭时继续运行 chrome。所以我可以在同一个外壳中做另一件事吗？非常感谢您。

新增。

```
spawn ssh -fnqX $log_name@192.168.1.100 firefox  
expect -re "password"  
send "$passwd_v100\r"
expect -re "failed to create drawable| ~"
send eof\r 
```

实际上，我后来写了上面的代码，它运行正常。好吧，我不知道代码如何`send eof\r`使脚本运行良好。我觉得很奇怪。顺便说一句，firefox 调用了字符串“failed to create drawable”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T14:08:09.877

Using [nohup](http://en.wikipedia.org/wiki/Nohup) maybe?

# asp.net - 第 3 方通过 URL 中的会话数据将变量传递给 ASP

> ID：10449378
> 
> 赞同：0
> 
> 时间：2012-05-04T13:03:50.330
> 
> 标签：asp.net, html, forms, session-state

我有一个允许搜索数据库的 ASP 表单。该表单有一个搜索框 (id = street)，人们可以在其中输入他们的街道名称，然后表单将提供回复。

我在另一个网站的沼泽标准页面上有一个标准的 HTML 表单，它将街道变量传递给表单，而 ASP 表单从 URL 中获取了它，这很好用。

从那以后，我们不得不更新表单以将会话数据放在 URL 中而不是 cookie 中，但遗憾的是，现在沼泽标准页面上的表单不再有效。该变量不会被表单识别。

会话 URL 的格式为[http://www.adomainname.com/(S(mbta4i55vubtxn55gnzhdt55))/form/search.aspx](http://www.adomainname.com/(S(mbta4i55vubtxn55gnzhdt55))/form/search.aspx)

```
<form action='http://www.adomainname.com/form/search.aspx' method="post"> 
<input type="text" value="High Street" id="street" name="street" />
<input type="submit" />
</form> 
```

有人遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T13:37:30.930

我还不清楚你要做什么，但我会试一试答案......

如果您想要 URL 中的街道，请将方法更改为“获取”。

# android - 在 Android 中通过 getIntent() 获取辅助 Intent

> ID：10449383
> 
> 赞同：0
> 
> 时间：2012-05-04T13:04:04.010
> 
> 标签：android, android-intent

我有一个主要活动的应用程序。从主要活动，用户可以通过以下方式进入下一个活动`Intent`：

```
Intent myIntent = new Intent(MainActivity.this, SecondaryActivity.class);
startActivity(AchievementInfoIntent); 
```

在 SecondaryActivity 中，用户可以选择在 Twitter 中发布“推文”。成功认证后，我获得了 oauth_token 和 oauth_verifier。

以下是 LogCat 显示的内容：

```
05-04 15:45:05.754: INFO/ActivityManager(1274): Starting activity: Intent { act=android.intent.action.VIEW cat=[android.intent.category.BROWSABLE] dat=callback://twitter?oauth_token=uo1yJCSkHwdbmyYp4KgUCLXYWQYFrp9sV7Me0TGyfU&oauth_verifier=fgugbGfJL3E5Gz7tfK97ukGsXfX6UoqWRMzMiJUZk cmp=my.app/.SecondaryActivity } 
```

在发布推文之前，我需要获取这些令牌和验证器，所以在我的`onResume`函数中我输入了以下代码：

```
protected void onResume() {
    super.onResume();
    Uri uri = this.getIntent().getData();
... 
```

但这会返回`Intent`创建 SecondaryActivity的原始文件`LogCat`：

```
05-04 15:45:05.754: INFO/ActivityManager(1274): Intent { cmp=my.app/.SecondaryActivity (has extras) } 
```

我怎样才能获得让我回到我的应用程序的 Intent，并获得我需要的所有东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T13:30:45.963

据我了解，您希望从 SecondaryActivity 获得一些结果到您的 MainActivity。为此，您应该使用 startActivityForResult(intent intent)。这是一个[教程](http://www.mubasheralam.com/tutorials/android/how-start-new-activity-and-getting-results)

# hibernate - 使用 jetty-maven-plugin 运行 webapp 时出现休眠错误

> ID：10449384
> 
> 赞同：0
> 
> 时间：2012-05-04T13:04:07.923
> 
> 标签：hibernate, maven, jetty, maven-jetty-plugin

我有一个使用 Hibernate 的 Maven 构建的 Web 应用程序。它在 Tomcat 中成功运行，但在 Tomcat 中执行时失败并出现以下异常`jetty-maven-plugin`：

```
java.lang.TypeNotPresentException: Type org.hibernate.collection.PersistentCollection not present
at sun.reflect.generics.factory.CoreReflectionFactory.makeNamedType(CoreReflectionFactory.java:98)
at sun.reflect.generics.visitor.Reifier.visitClassTypeSignature(Reifier.java:107)
at sun.reflect.generics.tree.ClassTypeSignature.accept(ClassTypeSignature.java:31)
at sun.reflect.generics.visitor.Reifier.reifyTypeArguments(Reifier.java:50)
at sun.reflect.generics.visitor.Reifier.visitClassTypeSignature(Reifier.java:120)
at sun.reflect.generics.tree.ClassTypeSignature.accept(ClassTypeSignature.java:31)
at sun.reflect.generics.repository.ClassRepository.getSuperInterfaces(ClassRepository.java:82)
at java.lang.Class.getGenericInterfaces(Class.java:794)
at org.springframework.core.GenericTypeResolver.doResolveTypeArguments(GenericTypeResolver.java:170)
at org.springframework.core.GenericTypeResolver.resolveTypeArguments(GenericTypeResolver.java:164)
<snip>
Caused by: 
java.lang.ClassNotFoundException: org.hibernate.collection.PersistentCollection
at org.codehaus.plexus.classworlds.strategy.SelfFirstStrategy.loadClass(SelfFirstStrategy.java:50)
at org.codehaus.plexus.classworlds.realm.ClassRealm.loadClass(ClassRealm.java:244)
at org.codehaus.plexus.classworlds.realm.ClassRealm.loadClass(ClassRealm.java:230)
at org.eclipse.jetty.webapp.WebAppClassLoader.loadClass(WebAppClassLoader.java:424)
at org.eclipse.jetty.webapp.WebAppClassLoader.loadClass(WebAppClassLoader.java:377)
at java.lang.Class.forName0(Native Method)
at java.lang.Class.forName(Class.java:247)
at sun.reflect.generics.factory.CoreReflectionFactory.makeNamedType(CoreReflectionFactory.java:95)
at sun.reflect.generics.visitor.Reifier.visitClassTypeSignature(Reifier.java:107)
at sun.reflect.generics.tree.ClassTypeSignature.accept(ClassTypeSignature.java:31)
at sun.reflect.generics.visitor.Reifier.reifyTypeArguments(Reifier.java:50)
at sun.reflect.generics.visitor.Reifier.visitClassTypeSignature(Reifier.java:120)
at sun.reflect.generics.tree.ClassTypeSignature.accept(ClassTypeSignature.java:31)
at sun.reflect.generics.repository.ClassRepository.getSuperInterfaces(ClassRepository.java:82)
at java.lang.Class.getGenericInterfaces(Class.java:794) 
```

`org.hibernate.collection.PersistentCollection`is in `hibernate-core`，它作为对 Web 应用程序的传递依赖项包含在内。它绝对可以在 WAR 中访问，因为应用程序在放入 Tomcat 时可以正常运行。

POM 包含以下插件配置：

```
<plugin>
    <groupId>org.mortbay.jetty</groupId>
    <artifactId>jetty-maven-plugin</artifactId>
    <version>8.1.3.v20120416</version>

    <configuration>
        <jettyXml>src/main/jetty/jetty-env.xml</jettyXml>
    </configuration>

    <dependencies>
        <dependency>
            <groupId>c3p0</groupId>
            <artifactId>c3p0</artifactId>
            <version>0.9.1.2</version>
        </dependency>

        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <version>5.1.9</version>
        </dependency>
    </dependencies>
</plugin> 
```

为什么`jetty-maven-plugin`没有解决`org.hibernate.collection.PersistentCollection`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T16:28:09.457

事实证明这是 Spring Flex 和 Hibernate 4 之间的不兼容：[https](https://jira.springsource.org/browse/FLEX-220) ://jira.springsource.org/browse/FLEX-220 。

# ajax - 表格单元格单击事件与 f:ajax 标记一起使用

> ID：10449389
> 
> 赞同：1
> 
> 时间：2012-05-04T13:04:32.497
> 
> 标签：ajax, jsf-2, uirepeat

我一直在玩 JSF 和 ui:repeat 来创建一个简单的动态表。我在这个过程中的下一步是允许表格中的每个单元格都可以点击/编辑，并开始将 f:ajax 绑定在 h:outputlabel 周围。这就是我的困境开始的地方，因为我希望整个单元格都是可点击的，而不仅仅是单元格的内容/文本，而且我还没有找到让单元格响应 ajax 点击的方法。

我一直在进行大量搜索，但没有找到我需要的方向或 JSF 专家说“那不可能”。

所以，我的问题是：

1.  是否有可以使用的 jsf 组件，它可以与 f:ajax 标记一起使用，并且还可以格式化以适合表格单元格？
2.  有没有办法让实际的表格单元格点击事件与 f:ajax 标签或类似的东西一起工作。

一如既往地感谢您的意见和建议！

问候，

麦克风

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T14:42:58.983

没有标准的 JSF 组件可以生成`<td>`带有`onclick`属性的 a。

最好的办法是在表格单元格中包含 a并通过将其 CSS属性设置为 来`<h:commandLink>`让它跨越表格单元格的整个空间。`display``block`

```
<td>
    <h:commandLink ... style="display:block;">
        <f:ajax ... />
        <h:outputLabel ... />
        ...
    </h:commandLink>
</td> 
```

*（请注意，最佳做法是在单独的`.css`文件中指定 CSS 类并改为使用`styleClass`；以上只是示例）*

这给最终用户的印象是整个表格单元格都是可点击的。

# mysql - 以列格式而不是从 MySQL 查询中按行获取分组数据

> ID：10449390
> 
> 赞同：0
> 
> 时间：2012-05-04T13:04:33.260
> 
> 标签：mysql, subquery, multi-table

很难为此制定一个更具描述性的标题。我现在已经花了几个小时，并且认为最好只是问别人！

我有 3 张桌子，看起来像这样

地点：

```
 id    |    name    
    1     |   Plymouth
    2     |   Torquay
                   etc 
```

销售记录

```
 itemId   |    saleDate (unix)    |    qty    |    saleLocation    |
      123    |    UNIXTIMESTAMP      |     1     |          1         |
      458    |    UNIXTIMESTAMP      |     4     |          2         |
      215    |    UNIXTIMESTAMP      |     2     |          2         |
      541    |    UNIXTIMESTAMP      |     1     |          1         | 
```

产品

```
 itemId   |    brand    |    
      123    |    1        |     etc 
```

显然，每个表实际上都包含比这更多的数据，但这就是所需的全部。

我需要的是一个输出，它可以告诉我每个项目或特定位置已售出的项目组的数量。我需要看起来像这样的东西：

输出

```
 mnth    |    yr    |    location1Sales    |     location2Sales  
     10     |   2006   |          14          |           7
     11     |   2006   |          13          |           12
     12     |   2006   |          8           |           1      ... etc 
```

我昨天在这里发布的问题：

[MySQL子查询从一个表中获取ID列表以查询第二个表](https://stackoverflow.com/questions/10433233/mysql-subquery-to-get-a-list-of-ids-from-one-table-to-query-a-second-table)

得到了友好的回答，并给了我一个相当有效的查询来检索`TOTAL`所有位置的组合销售额（根本没有与昨天问题中发布的查询相关的位置数据），而且效果很好。

我当然可以添加一个附加子句`WHERE`并仅获取单个位置的数据，但我希望所有这些都在一个表中。

今天我试图添加一些分组/where子句以将位置添加到查询中，但无法理解如何创建上述格式的表。

我已经获得了行中的位置数据输出，但我需要按照上面的列形式

```
SELECT DAY( FROM_UNIXTIME( saleDate ) ) AS 
   DAY , MONTH( FROM_UNIXTIME( saleDate ) ) AS mnth, 
   YEAR( FROM_UNIXTIME( saleDate ) ) AS yr, 
   COUNT( s.id ) AS invCount, locations.name, 
   s.location, SUM( quantity ) AS saleQty 
FROM salesRecords s
     LEFT JOIN locations ON locations.id = s.location
     INNER JOIN products ON s.itemNo = products.id
     WHERE products.brand =  '313' <=== X
 AND s.location LIKE  '1\_%' <=== XX
 GROUP BY  `locations`.`name` , mnth, yr 
```

X：品牌 ID 是按品牌对产品进行分组所需的变量

XX：位置是这样查询的，因为 saleLocation 以 dB 形式保存`"locationId_tilId"`，因为销售由 til 跟踪，尽管出于此数据的目的，我只需要位置 ID，我不关心 tilId

我正在尝试获取这些数据并将其转换为 Javascript 数组，以便我可以使用出色的 amCharts 插件来绘制它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T01:54:14.667

```
select
      year( FROM_UNIXTIME( saleDate )) as yr,
      month( FROM_UNIXTIME( saleDate )) as mnth,
      sum( if( saleLocation = 1, qty, 0 )) as Location1Sales,
      sum( if( saleLocation = 2, qty, 0 )) as Location1Sales
   from
      salesRecords
   group by
      year( FROM_UNIXTIME( saleDate )),
      month( FROM_UNIXTIME( saleDate )) 
```

如果您有更多销售地点，只需将它们添加到 SUM( IF() ) 构造...

# php - jquery ajax调用方法

> ID：10449394
> 
> 赞同：0
> 
> 时间：2012-05-04T13:04:40.423
> 
> 标签：php, jquery, ajax

我正在使用一个类在数据库上做一些 CRUD 的东西，这个（http://net.tutsplus.com/tutorials/php/real-world-oop-with-php-and-mysql）我将使用jquery 检查用户名是否已经注册。

我可以专门为该任务创建一个 php 文件，但只想扩展该类并创建一个名为 checkname() 的方法。

我如何在 jquery 中调用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T13:28:10.463

您可以使用 jQuery 对以下 php 文件进行 ajax 调用：

**PHP** **[假设，test.php]**

```
<?php

class ABC extends XYZ {
  public function checkname() {
    if(isset($_POST) && !empty($_POST['name'])) {
      echo json_encode(array('status' => 'done'));
    }
  }
}
$ins = new ABC();
$ins->checkname(); // calling the function checkname

?> 
```

**jQuery：**

```
$.ajax({
  url: 'test.php', //  write the url correctly
  type: 'post',
  data: "name=XYZ&location=PQR"
}).done(function(response) {
   console.log(response.status); // will log done
}).fail(function(jqXHR, textStatus) {
   console.log("Failed: " + textStatus);
}); 
```

这只是一个例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T13:08:35.460

您需要使用 jQuery 的 Ajax 功能来访问调用该函数的 PHP 页面。您不能通过 Ajax 直接调用 PHP 函数，必须在后端设置一些东西。

# java - Android 发布到 Facebook 图片超时

> ID：10449396
> 
> 赞同：0
> 
> 时间：2012-05-04T13:04:51.740
> 
> 标签：java, android, facebook

我对 Facebook 实施有简单的后图像：

```
Bundle params = new Bundle();
params.putString("message", message);
params.putByteArray("picture", data);

String uploadResponse = mFacebook.request("me/photos", params, "POST"); 
```

这是在线程中执行的。

现在。有没有办法让 Facebook 请求“超时”，因为当网络慢时它会永远持续下去？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T18:06:16.663

看起来您无法使当前代码中的请求超时。

[Facebook 对象](https://github.com/facebook/facebook-android-sdk/blob/master/facebook/src/com/facebook/android/Facebook.java)调用[Util](https://github.com/facebook/facebook-android-sdk/blob/master/facebook/src/com/facebook/android/Util.java)类的*openUrl*方法。此方法使用[HttpURLConnection](http://docs.oracle.com/javase/1.5.0/docs/api/java/net/URLConnection.html)类发出请求，并且它具有可用于使请求超时的[setConnectTimeout](http://docs.oracle.com/javase/1.5.0/docs/api/java/net/URLConnection.html#setConnectTimeout%28int%29)方法，但 facebook 实现不允许您为其传递参数，可能是因为此方法是 java 版本 1.5 中的新方法他们希望 SDK 适用于较低版本。

如果您在 1.5 或更高版本上运行应用程序，则只需修改 facebook SDK 的代码以包含超时。

# java - 如何正确添加新的布局 xml？

> ID：10449401
> 
> 赞同：0
> 
> 时间：2012-05-04T13:05:16.967
> 
> 标签：java, android, eclipse, android-layout, view

我正在使用 eclipse 编写一个 android 应用程序。

我有一个名为 MenuActivity 的主要活动，它显示一个菜单。当用户按下播放时，它会启动游戏活动。

我在 res/layout/game.xml 中创建了一个新布局。我希望 GameActivity 使用该布局使用`setContentView()`. 问题是R.layout。没有看到我添加的任何新布局 xml。

我错过了什么？xmls 不是视图？我做这一切都错了吗？！:)

任何信息将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T13:06:53.073

你建立项目吗？eclipse 是否导入了 Android.R？因为这可能会导致一个大问题。阻止构建的任何 XML 文件中是否存在任何错误？所有的可能性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T13:12:04.947

只需转到 Projects -> Clean it 重建您的项目并重新生成 R。

# javascript - 直接在 childView 中运行函数 VS 在其模型上触发事件 [在 BackBone 中]

> ID：10449403
> 
> 赞同：0
> 
> 时间：2012-05-04T13:05:24.010
> 
> 标签：javascript, backbone.js

假设有一个 bookList 视图（以书籍为模型）和一些书籍视图（以书籍为模型）

如果我想在每个书本视图中运行一个函数。至少有两种方法：

1.  在 bookList 视图中维护一个包含所有书籍视图的数组，而不是直接运行该函数

2.  在书籍模型中的每个书籍模型上触发自定义事件以使视图运行该功能。

哪一个更好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T15:07:42.890

我真的认为你应该考虑更多关于你的应用程序的事情，你将被你的应用程序概念的自然流程引导到决定。

所以根据你的方法：

### 使用视图维护数组

如果您没有足够的这些 bookView，它可以是一个解决方案。实际上，您应该在这里问自己的问题是，您真的只需要该数组来实现该功能，还是可以将其用于其他用途。

### 在每个图书模型上触发自定义事件

这将为每个 bookView 添加一些相同的事件侦听器和回调（函数本身）。这将要求每个 bookView 在您的浏览器中共享内存，以获得相同的信息。

我也在考虑第三种方法：

### 在您的 bookList 视图中触发一个自定义事件，该事件由您的 Book 视图监听

所以你可以设法做到这一点，并使用你想要的函数在触发器上设置一个参数，所以基本上你的书 View 中的代码将类似于：

```
var cb = function(theFn) {
    theFn.apply(this); // here we are setting theFn this to this view
}

bookList.on('doThisFunction', cb, this); 
```

当你触发时，你可以做类似的事情

```
theFn = function() {
      this.render();
}
bookList.trigger('doThisFunction', theFn); 
```

请注意，当您不再需要 bookView 时，您应该关闭 eventlistener ：`bookList.off('doThisFunction', cb)`从您的 book View 中，因为您的 bookList 事件聚合器中有一个垃圾。

# outlook-addin - 日历的 Outlook 加载项

> ID：10449405
> 
> 赞同：0
> 
> 时间：2012-05-04T13:05:33.200
> 
> 标签：outlook-addin, outlook-2007, icalendar

我对插件的东西真的很陌生。我的代码应该执行以下操作： Outlook 用户保存/创建任何内容。如果创建的项目是约会项目，我的系统必须将它保存在 c: 目录下，以项目主题作为文件名。这是我的代码。那里有什么问题？

注意：当我创建一个新约会时，if 子句正在工作，如果我在那里写任何其他代码，它正在工作，但我无法获得 ai 的信息，例如`ai.Subject`.

```
namespace SendToMRBS
{
    public partial class ThisAddIn
    {
        private void ThisAddIn_Startup(object sender, System.EventArgs e)
        {
           this.Application.ItemLoad += new Outlook.ApplicationEvents_11_ItemLoadEventHandler(Application_ItemLoad);
    }

    void Application_ItemLoad(object Item)
    {
        if (Item is Outlook.AppointmentItem)
        {
            Outlook.AppointmentItem ai = Item as Outlook.AppointmentItem;
            ai.SaveAs("C:\\" + ai.Subject, Microsoft.Office.Interop.Outlook.OlSaveAsType.olICal);
        }
    }

    private void ThisAddIn_Shutdown(object sender, System.EventArgs e)
    {
    }

    #region VSTO generated code

    /// <summary>
    /// Required method for Designer support - do not modify
    /// the contents of this method with the code editor.
    /// </summary>
    private void InternalStartup()
    {
        this.Startup += new System.EventHandler(ThisAddIn_Startup);
        this.Shutdown += new System.EventHandler(ThisAddIn_Shutdown);
    }

    #endregion

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T10:48:22.943

我找到了解决方案.. Item 对象没有属性或其他东西，所以我不得不使用 NewInspector 事件。这是我的新代码：

```
public partial class ThisAddIn
{

    private void ThisAddIn_Startup(object sender, System.EventArgs e)
    {
        this.Application.ItemLoad += new Outlook.ApplicationEvents_11_ItemLoadEventHandler(Application_ItemLoad);

    }

    void Application_ItemLoad(object Item)
    {
        if (Item is Outlook.AppointmentItem)
        {
            this.Application.Inspectors.NewInspector += new Outlook.InspectorsEvents_NewInspectorEventHandler(Inspectors_NewInspector);
        }
    }

    void Inspectors_NewInspector(Outlook.Inspector Inspector)
    {
        Outlook.AppointmentItem ai = Inspector.CurrentItem;
        ai.Write += new Outlook.ItemEvents_10_WriteEventHandler(ai_Write);
    }

    void ai_Write(ref bool Cancel)
    {
        Outlook.Inspector ins = this.Application.ActiveInspector();
        Outlook.AppointmentItem appi = ins.CurrentItem;

        appi.SaveAs("c:\\test.ics", Microsoft.Office.Interop.Outlook.OlSaveAsType.olICal);
    }

    private void ThisAddIn_Shutdown(object sender, System.EventArgs e)
    {
    }

    #region VSTO generated code

    /// <summary>
    /// Required method for Designer support - do not modify
    /// the contents of this method with the code editor.
    /// </summary>
    private void InternalStartup()
    {
        this.Startup += new System.EventHandler(ThisAddIn_Startup);
        this.Shutdown += new System.EventHandler(ThisAddIn_Shutdown);
    }

    #endregion

} 
```

# jquery - 使用 JQuery 向各个方向展开 div

> ID：10449412
> 
> 赞同：2
> 
> 时间：2012-05-04T13:06:03.463
> 
> 标签：jquery, html

我有一个 div 网格，每个都有内容：一些文本、一张图片和某种 [x] 按钮。这些 div 的位置都设置为绝对值（这是一个不规则的网格，这就是我选择绝对值的原因）。

我现在要做的是让它们在鼠标光标位于它们上方时展开（并将其放在网格中其他重叠的 div 之上）。我设法在这里做到了：http: [//jsfiddle.net/CvhkM/2833/](http://jsfiddle.net/CvhkM/2833/)。问题是我希望它恢复到它的初始位置和尺寸（每个 div 都有自己的位置和尺寸）并且由于某种原因它不会工作......（请注意，这是我第一次使用 jQuery）。哦，我可以补充一下，我将如何限制它不扩展到区域（矩形区域）之外？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T13:31:56.387

上面提到的溢出问题肯定有帮助，你可以在你的 CSS 中做到这一点。我个人会做溢出：隐藏或溢出：自动，以便您溢出的内容保持隐藏，直到框悬停。

我在下面添加了代码以帮助您使代码变得动态，您可以随意调整悬停动画上的数字和乘数，这使您可以根据原始尺寸:)

```
var multiplying_factor = 1.5;
$(function() {
    $('.div').each(function() {
        $(this).data('original_position', $(this).offset());
        $(this).data('original_width', $(this).width());
        $(this).data('original_height', $(this).height());

        $(this).hover(function() {
            $(this).stop().animate({
                left   : $(this).data('original_position').left - ($(this).data('original_width') * multiplying_factor / 4),
                top    : $(this).data('original_position').top - ($(this).data('original_height') * multiplying_factor / 4),
                width  : $(this).data('original_width') * multiplying_factor,
                height : $(this).data('original_height') * multiplying_factor
            }, 300);
        },function() {
            $(this).stop().animate({
                left   : $(this).data('original_position').left,
                top    : $(this).data('original_position').top,
                width  : $(this).data('original_width'),
                height : $(this).data('original_height')
            }, 300);
        });
    });

});    ​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T13:21:06.393

它是一个溢出问题。尝试添加

```
$('.div').css('overflow','visible'); 
```

看到这个 JSFiddle：

[http://jsfiddle.net/CvhkM/2834/](http://jsfiddle.net/CvhkM/2834/)

# xcode - 获取临时对象的地址

> ID：10449414
> 
> 赞同：0
> 
> 时间：2012-05-04T13:06:05.500
> 
> 标签：xcode

我在许多平台上进行开发，今天我遇到了 iOS 和 xCode 的问题，我正在将一些项目更新到最新的 xCode 4.3.2（Apple LLVM 编译器 3.1）

由于几次**警告已成为错误：*“获取临时对象的地址”***

不幸的是，我使用了很多，请参阅我的示例：

```
float dist = Vector3Dlength(&Vector3D(pos2 - pos1)); 
```

*   避免创建一个临时变量并生成一行新代码（尽管这行代码是由编译器在堆栈上创建的）
*   我知道自 10 年的编码以来可能导致的错误 :) 但我想继续这样......

有人建议避免此错误而无需编辑代码？（使用新的 xCode 4.3.2（Apple LLVM 编译器 3.1））

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T13:38:06.620

您需要更改代码，不能获取不是*lvalue*的地址，并且临时地址不是 lvalue 。

更改您的代码以改为使用 const 引用`Vector3D`。这不会花费您一份副本，并且是明确定义的行为。

```
float Vector3Dlength(Vector3D const& pvect) {
  return sqrt(pvect.x * pvect.x ...);
}

...
float dist = Vector3Dlength(Vector3D(pos2 - pos1)); 
```

# android - Android 多联系人选择器（可选择选择哪个电话号码）

> ID：10449416
> 
> 赞同：5
> 
> 时间：2012-05-04T13:06:12.123
> 
> 标签：android, android-intent, android-2.2-froyo

我需要能够在 Android 中选择多个联系人。流程是这样的：

1.  用户单击打开联系人应用程序的按钮。
2.  但是，我需要能够选择多个联系人（在同一启动意图中），而不是能够选择单个联系人。
3.  如果一个联系人有多个电话号码，我需要用户能够选择他想要选择的电话号码。

当我在消息应用程序中单击“联系人”时，此功能已经存在于我的三星 Android 手机（运行 2.3 Gingerbread）中。见下面的截图：

![在此处输入图像描述](../Images/ae86418a7119ed7aab55b578e37e0df6.png)

![在此处输入图像描述](../Images/586bd148f35f4f2b780b753bedd9d20c.png)

![在此处输入图像描述](../Images/24429794aed85727a53d2790e268843a.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T13:40:59.307

没有内置的方法可以做到这一点，因此您需要自己完成大部分工作。幸运的是，这并不难。

**展示**

要显示您的联系人，您可以使用具有多选模式的列表视图，也可以创建自定义适配器并将其绑定到常规列表视图。我*认为*具有多选功能的列表视图不会让您为每一行放置除文本之外的任何内容，但您必须深入挖掘才能找到答案。

我已经将自定义适配器方法用于非常相似的事情（除了多个电话号码部分）。这很容易做到，而且我发现自定义适配器从长远来看非常有用。

[自定义适配器列表视图教程](http://windrealm.org/tutorials/android/listview-with-checkboxes-without-listactivity.php "自定义适配器教程")

通过自定义适配器设置，您可以创建包含个人所有信息的数据对象，包括他们的姓名和电话号码。在自定义适配器的 getView 中，您可以决定显示每条信息的内容/方式和位置。

**收集信息**

您需要使用 ContactContract API 来获取联系人信息。

[阅读联系信息](http://app-solut.com/blog/2011/03/working-with-the-contactscontract-to-query-contacts-in-android/)

[读取联系人的所有电话号码](https://stackoverflow.com/questions/2356084/read-all-contacts-phone-numbers-in-android)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T13:11:27.007

你将不得不自己写这一切。您可以使用`ContactsContract`提供程序查询所有带有电话号码的联系人，然后对于选定的联系人，您可以查询该联系人的所有电话号码。您可以根据需要在活动或对话框中显示结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-17T21:35:05.550

**不幸的是，并非所有版本的 android 都支持此代码**

我知道这有点晚了，但想分享这个！我在网上找到了一些不完整的代码，在用它破解后我终于找到了答案！基本上你启动选择器并让它返回额外的数据=]

网上没有完整的答案，所以希望它对那里的一些人有所帮助！

享受：

```
 public void pickContact(View v){
    try {
        Intent phonebookIntent = new Intent("intent.action.INTERACTION_TOPMENU");
        phonebookIntent.putExtra("additional", "phone-multi");
        startActivityForResult(phonebookIntent, PICK_CONTACT); 
        // PICK_CONTACT IS JUST AN INT HOLDING SOME NUMBER OF YOUR CHOICE

    } catch (Exception e) {
        e.printStackTrace();
    }
}

public String getData(String contact, int which)
{
    return contact.split(";")[which];
}

public void onActivityResult(int reqCode, int resultCode, Intent data) {
    final int URI = 0;
    final int NUMBER = 1;

    if (RESULT_OK != resultCode) return;
    Bundle contactUri = data.getExtras();
    if (null == contactUri) return;

    ArrayList<String> contacts = (ArrayList<String>)contactUri.get("result");
    Toast.makeText(getApplicationContext(), getData(contacts.get(0),NUMBER), Toast.LENGTH_SHORT).show();
} 
```

# android - 如何在Android上绘制轨迹

> ID：10449419
> 
> 赞同：-1
> 
> 时间：2012-05-04T13:06:18.510
> 
> 标签：android, android-layout

我想从**Android**中的数据点追踪轨迹。

我应该使用什么方法？

要知道对象的位移，我需要从我已经在 Android 上确定的点确定轨迹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T21:35:28.177

[http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/graphics/DrawPoints.html](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/graphics/DrawPoints.html)它展示了绘图的基础知识，你需要做的就是画一大堆线正确的？你所需要的只是一个 xi 和 yi，然后是一个 xf 和 yf 来绘制它。

# php - 最佳实践：类方法中的新对象实例化

> ID：10449421
> 
> 赞同：1
> 
> 时间：2012-05-04T13:06:24.697
> 
> 标签：php

最佳实践问题：在另一个类方法中创建新对象有什么不当之处吗？我在下面有一个小例子：

```
public function export() {

$orders = new Orders($id);
$all_orders = $orders->get_all_orders();

  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T13:11:55.913

你给出的例子是完全可以接受的。

例如，如果您在所有方法中实例化同一个对象，那么您可以将对象存储为属性。

示例：Orders 对象在构造函数中实例化并存储为属性。

```
class Something
{    
    protected $orders;

    public function __construct($id)
    {
        $this->orders = new Orders($id);
    }

    public function export()
    {

        // use $this->orders to access the Orders object
        $all_orders = $this->orders->get_all_orders();
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-11T04:01:31.640

在我看来，在构造函数中传递 Order 对象将是一种更好的方法。这将使测试更容易。

这一切都取决于问题的大局，显然 id 需要在其他地方传递给 Order 对象：

```
class Something
{    
    protected $orders;

    public function __construct(Order $order)
    {
        $this->orders = $order;
    }

} 
```

# asp.net - CassiniDev 嵌入在 WinForm 应用程序中？

> ID：10449430
> 
> 赞同：3
> 
> 时间：2012-05-04T13:06:49.443
> 
> 标签：asp.net, winforms, cassini-dev

我正在尝试组合一个 winform 应用程序，该应用程序还具有一个 Web 界面，可以与从应用程序的 winform 部分生成的事件进行交互。我在应用程序中成功运行了 cassinidev 服务器，并且正在处理 asp.net 页面，但我仍然遇到了一些障碍，我不确定它们是否可能？？？

1.  我无法在页面后面使用代码。我已将适当的属性添加到页面指令，但我仍然无法从 aspx 页面访问控件。

2.  我无法从应用程序的 Web 部分访问课程。看截图...

也许我想要完成的事情甚至是不可能的，但如果有人能帮助我指出正确的方向，我将不胜感激！

![在此处输入图像描述](../Images/b08bb6f8ab4141fea2afd4b59da480b4.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T14:03:43.843

我很确定你不能这样做，因为你唯一可用的就是“网站路径”选项。但是，您确实有来源，如果您找到某种共享数据的方式（可能使用 ApplicationPool），您可能会这样做......但我猜您仍然需要在启动时将该数据转换为静态变量你的网页。似乎工作太多了 2 我。我建议也使用自托管 WebApi，然后将其用作您网站的数据层。两者都可以托管在 winforms 中，webapi 可以直接从您的代码中共享静态数据 :)

# ajax - Ajax 无法识别 JSP 会话

> ID：10449435
> 
> 赞同：0
> 
> 时间：2012-05-04T13:07:06.553
> 
> 标签：ajax, json, jsp, servlets

我试图将一个对象放在 servlet 内的会话中，并在 javascript 代码中读取它。实际上可以，但是在将普通的 javascript 代码转换为 AJAX 之后，它就无法识别它了。

这是servlet的代码

```
protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
        JSONObject object = new JSONObject();
        object.put("A","A");
        request.getSession().setAttribute("json", object.toJSONString());
} 
```

我想在下面的 AJAX 代码中收到它。

```
<script type="text/javascript">
function runAjax(){
    var ajax = new XMLHttpRequest();
    ajax.onreadystatechange = function(){
        if(ajax.readyState == 4 && ajax.status == 200){
            var json = <%=session.getAttribute("json")%>
            alert(json);
        }
    }
    ajax.open("GET", "servlet", true);
    ajax.send();
}

</script> 
```

json 内容为空。

请问有什么帮助吗？

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T13:44:33.910

JavaScript 在浏览器中执行。JSP scriptlet 在服务器上执行。

因此，当您向包含上述 JavaScript 代码的页面发出请求时，HTML 是由服务器生成的。服务器执行以下 scriptlet 代码：`<%=session.getAttribute("json")%>`. 由于此时 session 属性不存在，因此生成的 HTML 为：

```
 ajax.onreadystatechange = function() {
    if (ajax.readyState == 4 && ajax.status == 200) {
        var json = null
        alert(json);
    }
} 
```

然后浏览器下载这段 HTML/JS 代码，在浏览器中执行 JS 代码。浏览器向服务器发送一个 AJAX 请求，当响应返回时，浏览器执行以下函数：

```
function() {
    if (ajax.readyState == 4 && ajax.status == 200) {
        var json = null
        alert(json);
    }
} 
```

很明显，警告框中显示的是`null`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T19:56:08.063

您可以尝试像这样在 javascript 中具有会话对象值。

```
 protected void doGet(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
      JSONObject object = new JSONObject();
      object.put("A","A");
      request.getSession().setAttribute("json", object.toJSONString());
      PrintWriter out=response.getWriter();
      out.write(object.toJSONString());
     } 

  <script type="text/javascript">
       function runAjax(){
                          var ajax = new XMLHttpRequest();
                          ajax.onreadystatechange = function(){
                             if(ajax.readyState == 4 && ajax.status == 200){
                                 var json = ajax.responseText;
                                 alert(json);
                                }
                                   }
                                 ajax.open("GET", "servlet", true);
                                 ajax.send();
                          }
 </script> 
```

# android - 在 android 上清除 setFillAfter()

> ID：10449439
> 
> 赞同：-1
> 
> 时间：2012-05-04T13:07:13.760
> 
> 标签：android

我正在使用翻译动画为视图制作动画。我已经使用了 setFillAfter(true) 并且动画成功了。

我的代码是。

```
final ImageView image= (ImageView) findViewById(R.id.image2);
        image.setBackgroundResource(R.drawable.lamb);
        final Animation animation = AnimationUtils.loadAnimation(this, R.anim.translate);
        animation.setFillAfter(true);
        image.startAnimation(animation);
        animation.setAnimationListener(new AnimationListener() 
        {
            public void onAnimationStart(Animation animation) {     }
            public void onAnimationRepeat(Animation animation) {    }
            public void onAnimationEnd(Animation animation) 
            {
                Handler ss = new Handler();
                ss.postDelayed(new Runnable() 
                {
                    public void run() 
                    {
                        image.setVisibility(View.INVISIBLE);
                    }
                } ,4000);
            }
        }); 
```

我使用处理程序在 4 秒后隐藏图像视图，但它没有隐藏。一段时间后如何隐藏图像？

动画结束后，我想在最后一个位置显示图像，所以我使用 setFillAfter(true); 4 秒后，我隐藏图像视图。

如何使图像不可见？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T13:13:54.037

您将需要设置 AnimationListener。当动画结束时，使视图不可见。

```
moveForward.setAnimationListener(new AnimationListener(){

        @Override
        public void onAnimationEnd(Animation animation) {
            view.setVisibility(View.INVISIBLE);
        }

        @Override
        public void onAnimationRepeat(Animation animation) {
        }

        @Override
        public void onAnimationStart(Animation animation) {
        }

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-21T07:51:12.747

image.clearAnimation()，在 setVisibility(View.INVISIBLE) 之前

# .htaccess - htaccess 规则不会触发

> ID：10449453
> 
> 赞同：0
> 
> 时间：2012-05-04T13:07:55.023
> 
> 标签：.htaccess, mod-rewrite

我设置了以下规则。前两个正在工作，但最后一个并不想开火

```
RewriteRule ^/Content/(.*)/(.*)$                    /?main=$1&headline=$2 [L]
RewriteRule ^/Content/(.*)$                         /?main=$1 [L]
RewriteRule ^/Content/(.*)$                            /?index.php?p=$1 [L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T13:10:45.337

这是因为您的第二条和第三条规则看起来相同。如果你想同时触发最后两个（在这种情况下它没有意义），只需删除 [L]，它命令解析器在命中后停止。

# mysql - 我想在 db 中获得 like ™ 字符。如何？在ios中

> ID：10449464
> 
> 赞同：0
> 
> 时间：2012-05-04T13:08:34.687
> 
> 标签：mysql, ios, database, nsstring

在 mysql 数据库表中

```
 varchar title(20) - db table column. 
  title: Banana™  - table row. 
```

在 return.php （服务器）

```
 $get_query=$_GET['query'];

 $connect=mysql_connect("localhost","root","") or die("die");

mysql_select_db("testdb",$connect);

$query=mysql_query($get_query,$connect);

while($row = mysql_fetch_array($query ))
{
$list[]=$row;

 }

print json_encode($list);

mysql_free_result($query);

mysql_close($connect); 
```

在 ios (客户端)

```
NSString * szURL =[NSString stringWithFormat:@"http://localhost/return.php?query=%@",query]; 

NSURL *url = [NSURL URLWithString:[szURL stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding ]];

NSString *strData = [NSString stringWithContentsOfURL:url
                                             encoding:NSUTF8StringEncoding
                                                error:&error];

NSDictionary *rootItem = (NSDictionary *)[strData JSONValue];
NSArray * appLists= (NSArray *)rootItem;

NSMutableArray *resultArray =[[[NSMutableArray alloc]init] autorelease];

for(NSDictionary * oneApp in appLists)
{   
   NSString *appTitle=(NSString*)[oneApp objectForKey:@"title"];

 } 
```

但 appTitle 为 NULL；

我想，我需要隐藏角色。

™ 是问题。我如何通过 (NSString *) 获得 Banana™？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T13:30:51.237

也许问题出在这里：

```
NSDictionary *rootItem = (NSDictionary *)[strData JSONValue];
NSArray * appLists= (NSArray *)rootItem; 
```

它是数组还是字典？在迭代之前检查一下`appLists`。A `NSLog`to`[strData JSONValue];`真的很有用。

# ios - dyld 问题库未加载

> ID：10449468
> 
> 赞同：2
> 
> 时间：2012-05-04T13:08:39.953
> 
> 标签：ios, dyld

当我尝试构建目标时，动态链接器出现此错误：

```
dyld: Library not loaded: @rpath/iPhoneSimulatorRemoteClient.framework/Versions/A/iPhoneSimulatorRemoteClient 
```

我使用上面路径上引用的这个 iphonesim 库[链接](https://github.com/jhaynie/iphonesim)。

我使用 Xcode 4.3，在这种情况下，我认为路径错误。

如何将此路径更改为正确路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T21:14:55.323

我再次下载了这个库并重新编译它。

我认为这是相关的，因为 XCode 4.3 有另一个框架路径。

请检查此链接[链接](http://blog.justus-beyer.de/2012/02/after-xcode-update-to-4-3-xcodebuild-fails/)

# arrays - 获取数组并用逗号替换空格

> ID：10449472
> 
> 赞同：0
> 
> 时间：2012-05-04T13:09:00.613
> 
> 标签：arrays, variables, str-replace

我整日整夜都在做某事，但似乎我没有进一步了解它，因为实际上学习对我来说有点复杂:(

代码是这样的：

```
 $aDoor = $_POST['zeilenid'];
  if(empty($aDoor))
  {
    echo("You didn't select anything.");
  }
  else
  {
    $N = count($aDoor);
    echo("You selected $N entry ID(s): ");
    for($i=0; $i < $N; $i++)

    {
      $str = $aDoor[$i];
      $str = ereg_replace(" ",",",$str);
      echo($str . " ");
    }
  } 
```

它不起作用-我想要ID，它将显示不以这种方式显示它们：8 9 10，而是以这种方式显示：8、9、10并将其保存在一个变量中！我如何做到这一点？我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T13:11:01.947

你试一试：

```
 $aDoor = $_POST['zeilenid'];
  if(empty($aDoor))
  {
    echo("You didn't select anything.");
  }
  else
  {
    $N = count($aDoor);
    echo("You selected $N entry ID(s): ");
    echo join(", ", $aDoor);
  } 
```

join 将数组的所有元素组合成一个字符串，并在每个元素之间插入第一个参数

编辑：保存：

```
$str = join(", ", $aDoor); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T13:12:55.270

```
$clean_search = str_replace(' ', ',', $user_search);

    $search_words = explode(' ', $clean_search);

    $final_search_words = array();

    if (count($search_words) > 0) {
        $final_search_words[] = $user_search;
      foreach ($search_words as $word) {

        if (!empty($word)) {

          $final_search_words[] = $word;

        }

      }

    } 
```

此代码将用逗号替换空格，if 条件用于仅用一个空格替换多余的空格。

# jquery - 使用 Jquery 在 Firefox 中为背景位置 y 设置动画

> ID：10449474
> 
> 赞同：8
> 
> 时间：2012-05-04T13:09:04.263
> 
> 标签：jquery, css, firefox, jquery-animate

我试图只为背景图像的 y 位置设置动画。

代码在除 Firefox 之外的所有浏览器中运行良好。我在之前的讨论中注意到 FF 存在问题，`background-position-y`但我不想仅针对这种特殊情况包含一个插件。

```
$(".module").animate({
    "height": 160,
    "background-position-y": cropsize //variable for needed position
}, "slow"); 
```

正如在这个问题中所回答的那样：[仍然遇到 jQuery 背景动画问题 - 在 safari 和 IE 中工作，仅此而已！](https://stackoverflow.com/questions/6030077/still-having-problems-with-jquery-background-animate-works-in-safari-and-ie-n)我应该可以使用普通`background-position`属性，但这样做只会破坏其他浏览器中的动画。

```
$(".module").animate({
    "height": 160,
    "background-position": "0 "+cropsize+"px"
}, "slow"); 
```

也许这只是我缺少的语法错误，但我似乎无法在 FF（最新版本）中使用它

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-04T13:14:58.677

`background-position-x/y`不是任何 CSS 规范的真正组成部分，它的 IE 特定 CSS，添加到 IE5.5，后来由 Webkit 实现。

Opera 和 Firefox 不接受它。

最好的解决方案是使用该`step`方法，它可以让您对任何东西进行动画处理。

为了给 Luka 的答案添加一点点，即使方法是正确的，这也有点错误，使用该方法的最简单`step`方法是为任意值设置动画，并将步骤挂钩，例如：

```
$('elem').animate({
  'border-spacing': -1000
},
{
  step: function(now, fx) {
    $(fx.elem).css("background-position", "0px "+now+"px");
  },
  duration: 5000
}); 
```

该元素必须以 jQuery 样式包装才能接受 jQuery 方法，例如`css()`. 我用过`border-spacing`，但任何不会影响您网站的 css 属性都可以使用，只需记住在您的 CSS 中为所使用的 css 属性设置一个初始值。

该`step`方法也可以单独使用，如果您设置 fx.start 和 fx.end 值，像 Luka 一样使用它`now+=1`几乎等于只使用 setInterval，但想法是一样的。

[**小提琴**](http://jsfiddle.net/q9aeh/1/)

**编辑：**

对于较新版本的 jQuery，还有其他选项，请参阅此答案：

[Y 轴上的 JQuery 动画背景图像](https://stackoverflow.com/questions/12340130/jquery-animate-background-image-on-y-axis/12340191#12340191)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-15T22:21:33.527

firefox 不理解 jquery animate 的背景位置，但 firefox 接受 css3 animate。

代码：

```
 if ($.browser.mozilla) {      
     $('.tag').css({
               'background-position': 'center 0px',
               '-moz-transition': 'all 1500ms ease'
     })
  } else {
     $('.tag').animate({
               'background-position-y': 0
     }, 1500);
  } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T13:33:48.087

看起来 jquery 的动画只需要一个背景属性，而不是两者。您可以使用百分比或像素，两者都可以。但据我所知，没有办法只指定 x 或 y 坐标。希望有人可以证明我错了，但这就是这个小提琴似乎表明的：

[http://jsfiddle.net/JMC_Creative/dPjSz/](http://jsfiddle.net/JMC_Creative/dPjSz/)

此外，无论您将什么背景位置值放入 css，jquery 动画似乎总是从“0 50%”开始。嗯……

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-04T13:23:21.180

使用步骤参数：

```
 $("item").animate({
           opacity:1,
       }, 
      step: function(now, fx){ 
          $(fx.elem).css("background-position","0px "+now+"px");
          now+=1;
      }
}); 
```

来自 jQuery 文档：[http ://api.jquery.com/animate/#step](http://api.jquery.com/animate/#step)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-16T05:46:29.333

```
$initElement.addClass(initClass).animate(
            {height:[0, 'easeInCirc'], top:  ['+=' + initHeight, 'easeInCirc'] , borderSpacing:[initHeight,'easeInCirc']}, 
            {step: function(now, fx) {
                $initElement.css({"background-position" : "0px -"+now+"px"}
                )},
            },
            {duration: time4design, queue:false},
            function(){ $initElement.removeClass(initClass)}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-04T19:53:16.897

```
var x = 0; var y = 0;
window.setInterval(function() {
    $(".layer").css("background-position", x + "px " + y + "px");
    x++; y--;
}, 50); 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-05-04T13:19:38.427

`background-position`动画仅适用于 jQuery 1.5.2 或更低版本

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-05-04T14:15:43.220

在 jQuery 中，您可以制作动画`background-position-x`或`y`像这样：

```
$(selector).animate({ 
                       backgroundPositionY: amountToAnimate 
                    }, duration); 
```

这个想法是在 javascript 中，`-`字符是字符串之外的保留运算符。jQuery 使用 camelcase 来解决这个问题。

# php - php key() 函数在对象内部不起作用

> ID：10449479
> 
> 赞同：1
> 
> 时间：2012-05-04T13:09:20.113
> 
> 标签：php, sockets, key

我有这个函数来获取 $clientsObjects 数组中元素的索引键。数组中的每个元素都保留一个 Client 类的对象，该对象具有一个 getSocket() 方法，该方法返回一个套接字资源。

我 100% 确定 $socket 函数参数等于数组中的 Client->getSocket() 之一。由于某种原因，代码永远不会进入 if 语句......有什么建议吗？

```
function getClientObjectKey($socket)
{       
    global $clientsObjects;             
    while ($sock = current($clientsObjects))
    {                       
        if ($sock->getSocket() == $socket)          
            return key($clientsObjects);    
        $sock = next($clientsObjects);
    }           
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T13:14:45.133

您可以使用 wich 执行相同操作，[`foreach`](http://de2.php.net/manual/en/control-structures.foreach.php)这将使您可以直接访问密钥并为您进行迭代，因此您不必弄乱`current`,`next`和`key`：

```
foreach ($clientsObjects as $key => $sock){                       
  if ($sock->getSocket() == $socket)          
    return $key;    
} 
```

无论如何，`key()`在您的情况下使用应该不是问题，所以我假设您尝试比较的对象之间存在差异。

# android - 在 Android 中根据时间/位置自动切换我的声音配置文件

> ID：10449480
> 
> 赞同：0
> 
> 时间：2012-05-04T13:09:23.697
> 
> 标签：android, profiles

我想在创建应用程序时获得一些输入，该应用程序将根据当前时间切换我的声音配置文件。

例如。
从上午 9:00 到下午 6:00 -> 办公室档案（仅适用于工作日，否则为家庭档案）
从晚上 6:00 到晚上 10:00 -> 晚上 10:00 到早上6:00 的家庭档案 -> 从早上 6:00 开始的
夜间档案
-上午 9:00 -> 主页简介

我们如何实现这一点？

# python - 字符串到 Python 中的列表中

> ID：10449484
> 
> 赞同：2
> 
> 时间：2012-05-04T13:09:28.207
> 
> 标签：python, string, list

我有一个包含数字列表的 str ，我想将其转换为列表。现在我只能在列表的第 0 个条目中获取整个列表，但我希望每个数字都是列表的一个元素。有谁知道在 Python 中执行此操作的简单方法？

```
for i in in_data.splitlines():
    print i.split('Counter32: ')[1].strip().split() 
```

我的结果不是我想要的

```
['12576810']\n['1917472404']\n['3104185795'] 
```

我的数据

```
IF-MIB::ifInOctets.1 = Counter32: 12576810
IF-MIB::ifInOctets.2 = Counter32: 1917472404
IF-MIB::ifInOctets.3 = Counter32: 3104185795 
```

我要结果

```
['12576810','1917472404','3104185795'] 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-04T13:18:06.250

鉴于您的数据为

```
>>> data="""IF-MIB::ifInOctets.1 = Counter32: 12576810
IF-MIB::ifInOctets.2 = Counter32: 1917472404
IF-MIB::ifInOctets.3 = Counter32: 3104185795""" 
```

您可以在意图更明确的地方使用正则表达式

```
>>> import re
>>> [re.findall("\d+$",e)[0] for e in data.splitlines()]
['12576810', '1917472404', '3104185795'] 
```

或如@jamylak 所指出的那样

```
re.findall("\d+$",data,re.MULTILINE) 
```

或[str.rsplit](http://docs.python.org/library/stdtypes.html#str.rsplit)将在性能上具有优势

```
>>> [e.rsplit()[-1] for e in data.splitlines()]
['12576810', '1917472404', '3104185795'] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-04T13:17:01.713

你已经很远了。根据您拥有的代码，试试这个：

```
result = []
for i in in_data.splitlines():
    result.append(i.split('Counter32: ')[1].strip())
print result 
```

你也可以这样做：

```
result = [i.split('Counter32: ')[1].strip() for i in in_data.splitlines()] 
```

然后，你也可以去看看@Abhijit 和@KurzedMetal 对正则表达式做了什么。一般来说，这将是要走的路，但我真的很喜欢你如何通过简单的拆分来避免它们。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-04T13:20:52.380

我就是这样做的。

```
data="""IF-MIB::ifInOctets.1 = Counter32: 12576810 ... IF-MIB::ifInOctets.2 = Counter32: 1917472404 ... IF-MIB::ifInOctets.3
= Counter32: 3104185795"""

[ x.split()[-1] for x in data.split("\n") ] 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-04T13:18:07.677

我最好尝试使用您提供的信息：

```
>>> data = r"['12576810']\n['1917472404']\n['3104185795']"
>>> import re
>>> re.findall("\d+", data)
['12576810', '1917472404', '3104185795'] 
```

如果需要，您甚至可以将其转换为 int 或 long`map()`

```
>>> map(int, re.findall("\d+", data))
[12576810, 1917472404, 3104185795L]
>>> map(long, re.findall("\d+", data))
[12576810L, 1917472404L, 3104185795L] 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-04T13:17:22.120

```
with open('in.txt') as f:
 numbers=[y.split()[-1] for y in f]
print(numbers)      

  ['12576810', '1917472404', '3104185795'] 
```

**或者：**

```
with open('in.txt') as f:
    numbers=[]
    for x in f:
        x=x.split()
        numbers.append(x[-1])
print(numbers)  

['12576810', '1917472404', '3104185795'] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-04T13:51:31.150

```
result = [(item[(item.rfind(' ')):]).strip() for item in list_of_data] 
```

使用列表推导的变体。遍历所有数据行，找到空白的最后一个索引，从最后一个找到的空白位置剪切到它的结尾，剥离结果字符串（擦除可能的空白）并将结果放入新列表中。

```
 data = """F-MIB::ifInOctets.1 = Counter32: 12576810
IF-MIB::ifInOctets.2 = Counter32: 1917472404
IF-MIB::ifInOctets.3 = Counter32: 3104185795"""
    result = [ (item[(item.rfind(' ')):]).strip() for item in data.splitlines()]
    print result 
```

结果：

```
['12576810', '1917472404', '3104185795'] 
```

# android - Actionbarsherlock 后退按钮不返回

> ID：10449485
> 
> 赞同：11
> 
> 时间：2012-05-04T13:09:30.887
> 
> 标签：android, actionbarsherlock

当我按下主页按钮时，它不会像我想的那样返回。

```
public class TotalOverview extends SherlockActivity {

public void onCreate(Bundle savedInstanceState) {
    setTheme(R.style.Theme_Sherlock);       
    super.onCreate(savedInstanceState);         
    //requestWindowFeature(Window.FEATURE_PROGRESS);  

    getSupportActionBar().setDisplayHomeAsUpEnabled(true);
    getSupportActionBar().setHomeButtonEnabled(true);
    setContentView(R.layout.main); 
    //getSupportActionBar().setDisplayHomeAsUpEnabled(true);
    getSupportActionBar().setHomeButtonEnabled(true);

} 
```

我也尝试用这种方法捕捉它

```
public boolean onOptionsItemSelected(MenuItem item)
{
    boolean toReturn = false;
    int id = item.getItemId();  
    if( id == R.id.abs__home)
    {
        toReturn = true;
    }
    return toReturn;
} 
```

但这不起作用我确实使用了这种方法，但 id 与 R.id.abs__home 的 id 不同。那么我怎样才能让它工作。

我使用的模拟器有 android 版本 2.3.1。对于其余的一切，来自 actionbarsherlock 的工作都像预期的那样。

蓝色块是我单击的按钮，单击后我想返回。 ![在此处输入图像描述](../Images/ea0548aaf82fc8eee91c606720d9ced8.png)

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-05-04T13:13:14.103

用于`android.R.id.home`检测家庭可供性，而不是`R.id.abs__home`. 例如，从[这个示例项目](https://github.com/commonsguy/cw-omnibus/tree/master/EmPubLite/T12-Book)中，使用 ABS 4.0.2：

```
 @Override
  public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
      case android.R.id.home:
        pager.setCurrentItem(0, false);
        return(true);

    // more code here for other cases
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T15:51:02.360

这是错误，这里报告了[https://groups.google.com/forum/?fromgroups=#!topic/actionbarsherlock/dsZr7z4_xvU](https://groups.google.com/forum/?fromgroups=#!topic/actionbarsherlock/dsZr7z4_xvU)

# java - 显示日期范围的 I18N 友好方式是什么？

> ID：10449487
> 
> 赞同：5
> 
> 时间：2012-05-04T13:09:32.607
> 
> 标签：java, internationalization, jodatime

我显示日期范围如下：

```
public static void main(String[] args) {
    Locale.setDefault(new Locale("nl", "NL"));

    DateTime d1 = new DateTime();
    DateTime d2 = new DateTime().plusDays(30);

    final String s1 = d1.toString(DateTimeFormat.shortDate());
    final String s2 = d2.toString(DateTimeFormat.shortDate());

    System.out.println(s1 + "-" + s2); // shows  "4/05/12-3/06/12" for en_AU
    System.out.println(s1 + "-" + s2); // shows  "4-5-12-3-6-12" for nl_NL
} 
```

对于荷兰的用户，他们看到的是“4-5-12-3-6-12”。这令人困惑。

有什么方法可以显示考虑到用户区域设置的日期范围？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T13:29:30.067

在本地化应用程序中，这种分离将由翻译人员在翻译您的资源包时决定：

```
#foo.properties
#comment: a date range
dateRange={0,date}-{1,date} 
```

可能变成：

```
#foo_en.properties
dateRange={0,date} to {1,date} 
```

这可以使用[MessageFormat](http://docs.oracle.com/javase/7/docs/api/java/text/MessageFormat.html)类型来处理。某种形式的东西：

```
//untested code
MessageFormat mf = new MessageFormat(formatString, locale);
//java.util.Date instances
Object[] range = {date1, date2};
String result = mf.format(range); 
```

即使您没有提供完整的翻译，这种方法也可能适用于某些本地化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T13:12:39.690

也许使用省略号 (...) 而不是破折号？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T13:15:35.167

至少在值周围使用更多空间：

```
"4-5-12 - 3-6-12" 
```

每年的 4 位数字，afaik，在每个地区都是可以理解的：

```
"4-5-2012 - 3-6-2012" 
```

固定位数可能符合您的口味，也可能不符合您的口味：

```
"04-05-2012 - 03-06-2012" 
```

从第 2 到第 3 形式，我没有看到太大的改进，但到第 2 形式，有。我们都经常接触较小的数字而不是较大的数字，而且较小的数字很少。11、12 和 13 经常穿过你的路，但如果你看到 2011、2012 和 2013 年，那几年以来，它主要是日期。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T13:25:46.777

您可以使用：

```
SimpleDateFormat sdf;

// Create new SimpleDateFormat object that returns default pattern.
sdf = new SimpleDateFormat();
String dateFormat = sdf.format(date);
System.out.println("Date by SimpleDateFormat class : " + dateFormat); 
```

输出是：

***SimpleDateFormat 类的日期：2008 年 6 月 14 日下午 1:15***

# actionscript-3 - 有没有办法影响 Flash / AS3 中的自动声音设置？

> ID：10449488
> 
> 赞同：3
> 
> 时间：2012-05-04T13:09:35.247
> 
> 标签：actionscript-3, flash, apache-flex, audio, rtmfp

我正在使用 RTMFP 在 Flash 中创建一个启用语音的应用程序，我注意到一旦打开 RTMFP 流并开始播放，Flash 插件就会自动调节其他进程/应用程序（至少在 Windows 上）的音量 - 非常类似于Skype 这样做的方式。此外，一旦访问麦克风，Flash 似乎也会自行调节（！）音量，这在小组会议中是非常矛盾的。见：http: [//i50.tinypic.com/2415r4k.jpg](http://i50.tinypic.com/2415r4k.jpg)

所以，我想做的是访问自动声音设置，要么禁用，要么为它们设置我自己的规则，因为在我看来，默认设置效果不太好。不幸的是，搜索这个主题并没有提出任何可用的结果，所以我希望也许其他人已经设法做到这一点并且能够给我一个提示。

如果这通常是不可能的，那么在每个打开的 NetStream 上禁用自动声音设置就足够了，这样至少这些声音总是保持在 100% 或更高，具体取决于具体情况。有谁知道在 NetStream 实例上手动设置音量/增益是否会覆盖插件所做的自动设置？还是自动声音设置总是覆盖/添加到该设置并且完全不受开发人员的影响？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T15:12:33.423

这更像是一个 Windows 7 问题，与 Flash 没有直接关系。如果您检查控制面板中的设置，您可以更改此行为：声音 - 通信 - “当 Windows 检测到通信活动时”。

从 Flash 的角度来看，没有解决方法，因为操作系统本身控制着这个音量调整。如果您在 NetStream 上使用 SoundTransform(1)，Flash Player 会输出完整音量，但 Windows 声音管理器会高出一级并再次将其关闭。

# php - 在 CodeIgniter 和 MongoDB 中传递 URI 变量

> ID：10449489
> 
> 赞同：1
> 
> 时间：2012-05-04T13:09:46.880
> 
> 标签：php, codeigniter, mongodb, mongodb-php

我在 CodeIgniter 的控制器中有一个函数，如下所示：

```
public function age($var = null) 
{
    $data = $this->mongo_db
        ->where('age', $var)
        ->get('users');

    echo "<pre>";
    print_r($data);
    echo "</pre>";
} 
```

当我导航到[http://www.siteurl.com/controller/age/25](http://www.siteurl.com/controller/age/25)时，它应该带回所有年龄为 25 岁的文档，但它没有返回任何数据。

如果我将查询修改为以下内容，则可以正常工作...

```
public function age($var = null) 
{
    $data = $this->mongo_db
        ->where('age', 25)
        ->get('users');

    echo "<pre>";
    print_r($data);
    echo "</pre>";
} 
```

这可能是非常简单的事情，但我是 codeigniter 的新手，我只是看不出出了什么问题！

任何帮助，将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T14:26:03.570

我可以看到两者之间的唯一区别`$var`是字符串而不是整数。我现在无法对此进行测试，但我怀疑您需要先将变量类型转换为整数，然后再将其传递给 Alex 的库。

```
$data = $this->mongo_db
    ->where('age', (int) $var)
    ->get('users'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T13:22:37.720

试试这个：

```
public function age($var = false) 
{
    if ($var) {
       $data = $this->mongo_db
           ->where('age', $var)
           ->get('users');

       echo "<pre>";
       print_r($data);
       echo "</pre>";
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T13:28:33.843

你有没有配置任何路线？在配置中放这样的东西

```
$route['controller/age/(:num)'] = "controller/age/$1"; 
```

# facebook - Facebook sdk 问题

> ID：10449496
> 
> 赞同：0
> 
> 时间：2012-05-04T13:10:14.997
> 
> 标签：facebook, ios5

我正在开发一个最终会在用户的 facebook 上发布图像的 iphone 应用程序。我一直在遵循[https://developers.facebook.com/docs/mobile/ios/build/](https://developers.facebook.com/docs/mobile/ios/build/)的指示。这些说明是指通过运行 sdk 附带的脚本来使用针对 arc 更正的静态 sdk：~/facebook-ios-sdk/scripts/build_facebook_ios_sdk_static_lib.sh

当我运行这个脚本时，生成的库只是 .h 文件，而不是 .m 文件或您期望的任何其他文件。当我使用这个库（将文件副本添加到我的项目），运行项目时，我看到登录屏幕，然后点击确定，（线程转到我的 viewController，我可以点击我放在那里的圆形矩形按钮）但是线程从未访问过我的 fbDidLogin 方法，当我通过调用 facebook 类获取 accessToken 时，它为空。有没有人见过这个问题？我是否应该使用原始 facebook sdk 中的 .m 文件并仅替换脚本生成的 .h 文件？

[创建 iOS Facebook SDK 静态库](https://stackoverflow.com/questions/10235380/creating-an-ios-facebook-sdk-static-library)

[Facebook iOS SDK - 如何为 Xcode 4.3 构建静态库？](https://stackoverflow.com/questions/9493640/facebook-ios-sdk-how-to-build-static-library-for-xcode-4-3)

顺便说一句，我使用的是 xcode 4.2 和 Lion。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-21T05:28:48.470

**[更新]** 我设法通过首先修改 m 文件并运行 bash 脚本来生成新的静态库来解决这个问题。

由于 ARC 版本使用静态库，它不直接显示 .m 文件。我跟你有同样的问题。除了删除 facebook 应用程序并强制我的应用程序使用 safari 进行身份验证之外，还没有找到解决方案。

# mysql - SSIS 访问 MySQL 表

> ID：10449500
> 
> 赞同：2
> 
> 时间：2012-05-04T13:10:29.753
> 
> 标签：mysql, ssis

我在 SSIS 中创建了 MySQL 连接，它连接正确。然后为表复制创建了一个数据流。MySQL -> SQL 设置 ADO.Net 源和 OLE DB 目标。

在 ADO.Net 源代码中，我选择表或视图，一切正常，我可以查看所有表，它们已列出。我选择要复制的那个，当我按下“预览”时，会弹出错误。

![在此处输入图像描述](../Images/c6631f3220e183304d7a3425a65acf3b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T13:19:10.087

我认为您的 MySQL 语法有问题。

试试这个链接来配置[MySQL](http://dev.mysql.com/doc/refman/5.0/en/ansi-mode.html)以在 ANSI 模式下运行

# tcl - 如何获取列表指针的位置

> ID：10449501
> 
> 赞同：0
> 
> 时间：2012-05-04T13:10:31.277
> 
> 标签：tcl

我有一个清单说测试

```
set test "Hi i am Nitesh"
regexp "am" $test
tell test # to ge the position of the pointer 
```

我收到一个错误

```
can not find channel named "test" 
```

不知道该怎么做

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T13:33:50.663

看起来你在这里有两个完全不同的概念。一方面，您有一个列表，并且您想找到一个术语在列表中的位置。然后，另一方面，您正在使用**tell**（通常用于确定开放通道的访问位置）。我怀疑您真正需要的是搜索名为 test 的字符串。尝试使用[http://www.tcl.tk/man/tcl8.5/TclCmd/string.htm#M8](http://www.tcl.tk/man/tcl8.5/TclCmd/string.htm#M8)

```
set test "Hi i am Nitesh"
string first "am" $test 
```

如果您想将 test 视为列表，则只需使用[lsearch](http://www.tcl.tk/man/tcl8.5/TclCmd/lsearch.htm)查找列表索引。

```
lsearch $test am 
```

# asp.net-mvc - 由javascript更新的asp.net mvc禁用文本框不发布新值

> ID：10449508
> 
> 赞同：6
> 
> 时间：2012-05-04T13:10:59.020
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我正在为我的视图使用强类型模型。我有一个禁用的文本框，我使用 javascript 更新其值。使用此呈现文本框

```
<%: Html.TextBoxFor(model => model.TotalAmount, new { disabled = "disabled"})%> 
```

这将呈现一个名称和 ID 为“TotalAmount”的文本框。TotalAmount 也是我模型上绑定到此视图的属性。

在视图中更新其值的 javascript 在其函数中是这样的：

```
document.getElementById('TotalAmount').value = {assigning new value here}; 
```

该函数确实被调用，当我在另一个可编辑文本框中更改某些值时，我可以看到禁用文本框中的值。但是，当我将此表单发布到我的操作方法时，如下所示：

```
[HttpPost]
public ActionResult Process (ProcessVM FormPostVM)
{
} 
```

禁用的文本框属性 [TotalAmount] 仍然具有旧值，但我修改的可编辑文本框包含我输入的新值。为什么禁用的文本框不包含 javascript 更新值？

我尝试使用

```
ModelState.Remove("TotalAmount"); 
```

在上面的操作方法中，但我已经认为它不起作用。

任何线索，提示？

谢谢你的时间....

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-04T13:13:27.733

提交表单时，具有该属性的 HTML 输入元素（例如文本框）`disabled="disabled"`永远不会将其值发送到服务器。如果您想将值发送到服务器，同时仍然禁止用户更改它，您可以制作文本框`readonly`：

```
<%= Html.TextBoxFor(model => model.TotalAmount, new { @readonly = "readonly" }) %> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-04T13:13:45.943

禁用的输入永远不会在表单提交中发送，请尝试使用`readonly`属性或隐藏输入

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-04T13:15:32.873

禁用的字段不会被发布。尝试有一个隐藏的表单域，它将值发送到服务器，并设置 TotalAmount 和隐藏的表单域。在服务器上，改为使用隐藏字段的值。

附带说明一下，由于这看起来像订单总数，所以我会在服务器上重新计算，而不是打开有人破解 html 并获得他们产品折扣的可能性。

**编辑：** 就其他人而言，我忘记了 readonly 属性。那也行。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-04T13:13:29.233

如果您将其更改为使用`readonly`而不是`disabled`，那么这应该为您提供相同的功能，但发布值。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-09-01T16:13:33.207

正如您所发现的，浏览器不会将值返回到禁用的输入控件中。解决此问题的最简单方法可能是挂钩表单提交，并在提交表单时重新启用输入；用户将没有机会编辑该值，它应该与请求的其余部分一起发布。

我认为最后一个问题描述了它：请检查一下：

[检索 asp:TextBox 的值](https://stackoverflow.com/questions/803003/retrieving-the-value-of-a-asptextbox)

# javascript - 调用 rootNode.childElements 时未定义？

> ID：10449510
> 
> 赞同：0
> 
> 时间：2012-05-04T13:10:59.423
> 
> 标签：javascript, dom

我很困惑——我的 rootNode 有一个值，无论是 dom.html 还是 Document，但是 childElements 始终是未定义的。曾经回来的一切都是未定义的。

![如您所见，定义了 root](../Images/9920a1e99686c3abfdc691fb28f12fa6.png)

![虽然子元素不是](../Images/797eec182901e0bd86dbb4f2ac0bd3cd.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T13:13:06.133

`element[element]`应该`elements[element]`在每次出现。

# jboss - 在 Application Server 中部署后如何工作？

> ID：10449511
> 
> 赞同：0
> 
> 时间：2012-05-04T13:11:00.923
> 
> 标签：jboss, websphere

到目前为止，我一直在使用 Java 进行编码。

想知道 -**在 Application Server 中部署后会发生什么**

假设我在 AppServer 中部署了我的 EAR（WebSphere 或 Jboss 并假设部署成功！）

*   EAR 转换成 tmp 文件.. 等等
*   请求如何在 Application Server 的 100 个 EAR 或 WAR 中选择一些 EAR 或 WAR？
*   应用服务器如何寻找数据源？
*   Plugin-cfg.xml 如何工作。.. .. 等等.. 等等.. 还有更多

有什么文件什么的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T13:13:34.277

这是一个非常非常模糊的问题，我将从这里开始：[http](http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/index.jsp) ://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/index.jsp 以及 WebSphere Application server v7“开发和部署应用程序”部分的说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T13:28:28.677

我觉得服务器的实现因人而异，所以尽量把一些基本原则。

*   请求如何在 Application Server 的 100 个 EAR 或 WAR 中选择一些 EAR 或 WAR？

Application Server 保留 WAR 列表和绑定 URL 模式 /* 。如果模式匹配，则请求转到应用程序。否则 - 错误 404。然后应用程序应该在内存中，即使用特定的类加载器加载。之后使用反射调用 doGet 等方法。

*   应用服务器如何寻找数据源？

    应用服务器在启动期间从 xml 描述中收集所有资源并根据请求进行更改。接下来，随叫随到。这是从 Hashtable 环境中获取数据源的[Tomcat 源示例。](http://svn.apache.org/repos/asf/tomcat/tc6.0.x/trunk/java/org/apache/naming/factory/DataSourceLinkFactory.java)

# python - ORA-12899: 导入 .dmp 文件 + 字符集转换

> ID：10449514
> 
> 赞同：0
> 
> 时间：2012-05-04T13:11:16.690
> 
> 标签：python, django, oracle, nls-lang

我正在使用 Oracle 数据库服务器在 Ubuntu 10.04 上开发一个 django 项目。所以我安装了：

*   Oracle 数据库 10g xe 通用 Rel.10.2.0.1.0
*   cx_Oracle-5.0.4-10g-unicode-py26-1.x86_64

当我导入由 oracle 10gr2 企业版（在 Windows XP 上）生成的 .dmp 文件时，我收到如下所列的错误，可能与字符集转换有关（我的数据库包含希腊语）并且我的数据没有完全同步。

```
> Username: 
Connected to: Oracle Database 10g Express Edition Release 10.2.0.1.0 - Production
Export file created by EXPORT:V10.02.01 via conventional path
import done in US7ASCII character set and AL16UTF16 NCHAR character set
import server uses AL32UTF8 character set (possible charset conversion)
export client uses EL8MSWIN1253 character set (possible charset conversion)
. . importing table                       "xxx"
IMP-00019: row rejected due to ORACLE error 12899
IMP-00003: ORACLE error 12899 encountered
ORA-12899: value too large for column "xxx"."xxx"."xxx" (actual: 41, maximum: 40)
and so on 
```

我的 oracle express 服务器使用以下设置运行：

> NLS_CHARACTERSET AL32UTF8
> 
> NLS_DATE_LANGUAGE 美国
> 
> NLS_LANGUAGE 美国
> 
> NLS_LENGTH_SEMANTICS BYTE
> 
> NLS_NCHAR_CHARACTERSET AL16UTF16
> 
> NLS_NCHAR_CONV_EXCP 假
> 
> NLS_TERRITORY AMERICA

并且生成 .dmp 文件的数据库服务器正在运行

> NLS_CHARACTERSET EL8MSWIN1253
> 
> NLS_NCHAR_CHARACTERSET AL16UTF16

有没有人提示我如何解决这个问题？

感谢你！

# java - 在 JavaSE 上运行 MIDlet 的 Microemu

> ID：10449515
> 
> 赞同：1
> 
> 时间：2012-05-04T13:11:16.807
> 
> 标签：java, java-me, emulation, midlet

我得到了这个 J2ME 应用程序`5ud0ku.jar`（

我尝试使用 microemu，但似乎无法正常工作。

模拟器也可以没有假手机用户界面吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-27T11:35:01.813

我发现 pstros 非常适合在台式计算机上运行 JavaME 东西，而且它不会给你假手机 UI。

[http://www.volny.cz/molej/pstros/](http://www.volny.cz/molej/pstros/)

# excel - Tinymce 从 excel 复制/粘贴（插件 BBcode）

> ID：10449520
> 
> 赞同：2
> 
> 时间：2012-05-04T13:11:29.327
> 
> 标签：excel, tinymce, bbcode

我正在使用 tinyMCE，您可以在下面看到实现。现在的问题是：当我从 EXCEL 复制一些记录并将它们粘贴到我的 tinymce 字段中时。它对我来说已经足够好（使用插件：粘贴，他实际上会显示字段）当我从我的字段中询问值时，我会得到一个表结构的返回值，该表结构取决于你粘贴的内容。但我不想要任何 html，请看下面我想要的。

**实现代码：**

```
tinyMCE.init({ 
mode : "exact", 
elements: "id", 
theme : "advanced", 
plugins : "bbcode, inlinepopups", 
content_css : "tinymce.css", 
entity_encoding : "raw", 
remove_linebreaks : false, 
forced_root_block: false, 
force_br_newlines: true, 
invalid_elements : "p, div, span", 
force_p_newlines: false, t
heme_advanced_buttons1 : $cur_buttons, 
theme_advanced_buttons2: "", 
theme_advanced_buttons3: "", 
init_instance_callback : "tiny_mce_callback"}); 
```

**从 tinyMCE 对象返回：**

```
<table style="border-collapse: collapse;" width="216" border="0"
       cellspacing="0" cellpadding="0">
<!--StartFragment-->
<colgroup>
  <col style="mso-width-source: userset; mso-width-alt: 1152;" width="27"/>
  <col width="55" />
  <col style="mso-width-source: userset; mso-width-alt: 2858;"
       span="2" width="67"/>
</colgroup>
<tbody>
<tr style="mso-height-source: userset;">
<td class="xl24" width="27" height="12">1</td>
<td class="xl26" width="55">26/05/12</td>
<td class="xl24" width="67">Amsterdam</td>
<td class="xl24" width="67">Casablanca</td>
</tr>
<tr style="mso-height-source: userset;">
<td class="xl24" height="12">2</td>
<td class="xl25">27/05/12</td>
<td class="xl24">Casablanca</td>
<td class="xl24">Rabat</td>
</tr>
<tr style="mso-height-source: userset;">
<td class="xl24" height="12">3</td>
<td class="xl25">28/05/12</td>
<td class="xl24">Rabat</td>
<td class="xl24">Fes</td>
</tr>
<tr style="mso-height-source: userset;">
<td class="xl24" height="12">4</td>
<td class="xl25">29/05/12</td>
<td class="xl24">Fes</td>
<td class="xl24"> </td>
</tr>
<tr style="mso-height-source: userset;">
<td class="xl24" height="12">5</td>
<td class="xl25">30/05/12</td>
<td class="xl24">Fes</td>
<td class="xl24">Erg Chebbi</td>
</tr>
<tr style="mso-height-source: userset;">
<td class="xl24" height="12">6</td>
<td class="xl25">31/05/12</td>
<td class="xl24">Erg Chebbi</td>
<td class="xl24">Dades Vallei</td>
</tr>
<tr style="mso-height-source: userset;">
<td class="xl24" height="12">7</td>
<td class="xl25">01/06/12</td>
<td class="xl24">Dades Vallei</td>
<td class="xl24">Ouarzazate</td>
</tr>
<tr style="mso-height-source: userset;">
<td class="xl24" height="12">8</td>
<td class="xl25">02/06/12</td>
<td class="xl24">Ouarzazate</td>
<td class="xl24">Marrakesh</td>
</tr>
<tr style="mso-height-source: userset;">
<td class="xl24" height="12">9</td>
<td class="xl25">03/06/12</td>
<td class="xl24">Marrakesh</td>
<td class="xl24"> </td>
</tr>
<tr style="mso-height-source: userset;">
<td class="xl24" height="12">10</td>
<td class="xl25">04/06/12</td>
<td class="xl24">Marrakesh</td>
<td class="xl24"> </td>
</tr>
<tr style="mso-height-source: userset;">
<td class="xl24" height="12">11</td>
<td class="xl25">05/06/12</td>
<td class="xl24">Marrakesh</td>
<td class="xl24">Amsterdam</td>
</tr>
<!--EndFragment--></tbody>
</table> 
```

**预期收益：**

```
1   26/05/12    Amsterdam   Casablanca
2   27/05/12    Casablanca  Rabat
3   28/05/12    Rabat   Fes
4   29/05/12    Fes 
5   30/05/12    Fes Erg Chebbi
6   31/05/12    Erg Chebbi  Dades Vallei
7   01/06/12    Dades Vallei    Ouarzazate
8   02/06/12    Ouarzazate  Marrakesh
9   03/06/12    Marrakesh   
10  04/06/12    Marrakesh   
11  05/06/12    Marrakesh   Amsterdam 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T13:17:57.513

您应该查看有关 paste 插件的[tinymce 配置选项。](http://www.tinymce.com/wiki.php/Plugin:paste)

另一种选择是去掉所有不需要的 html 标签，只使用纯文本：[TinyMCE 粘贴为纯文本](https://stackoverflow.com/questions/4122451/tinymce-paste-as-plain-text)

# sql - 复杂的 SQL 查询 - 折叠日期范围

> ID：10449521
> 
> 赞同：5
> 
> 时间：2012-05-04T13:11:29.287
> 
> 标签：sql, oracle

我们有一个表格，列出了“服务时间”的开始和结束日期。我想要一个可以搜索所有行并根据日期间隔识别服务中断的查询。

```
Data:
Start         End
1/1/2000   2/1/2001
2/2/2001   4/1/2001
4/1/2004   6/2/2006
6/3/2006   9/1/2010
8/1/2011   9/1/2012

Desired result:
1/1/2001 - 4/1/2001     //The first two ranges collapsed because no break in service 
4/1/2004 - 9/1/2010     // The 3rd and 4th rows collapsed because no real break in service 
8/1/2011 - 9/1/2012 
```

这可能更容易在应用程序逻辑或存储过程中完成，只是想知道是否有任何 SQL 巫术可以让我接近。

```
Table definition:
CREATE TABLE CONG_MEMBER_TERM 
(
  CONG_MEMBER_TERM_ID NUMBER(10, 0) NOT NULL 
  , CONGRESS_ID NUMBER(10, 0) NOT NULL 
  , CHAMBER_CD VARCHAR2(30 BYTE) NOT NULL 
  , CONG_MEMBER_ID NUMBER(10, 0) NOT NULL 
  , STATE_CD CHAR(2 BYTE) NOT NULL 
  , CONG_MEMBER_TYPE_CD VARCHAR2(30 BYTE) NOT NULL 
  , DISTRICT NUMBER(10, 0) 
  , START_DT TIMESTAMP(6) WITH TIME ZONE 
  , END_DT TIMESTAMP(6) WITH TIME ZONE 
  , CREATE_DT TIMESTAMP(6) WITH TIME ZONE NOT NULL 
  , UPDATE_DT TIMESTAMP(6) WITH TIME ZONE NOT NULL
)

Insert into CONG_MEMBER_TERM (CONG_MEMBER_TERM_ID,CONGRESS_ID,CHAMBER_CD,CONG_MEMBER_ID,STATE_CD,CONG_MEMBER_TYPE_CD,DISTRICT,START_DT,END_DT,CREATE_DT,UPDATE_DT) values (2945,104,'H',494,'OK','REP',2,to_timestamp_tz('04-JAN-95 01.00.00.000000000 AM -05:00','DD-MON-RR HH.MI.SS.FF AM TZR'),to_timestamp_tz('04-OCT-96 01.00.00.000000000 AM -05:00','DD-MON-RR HH.MI.SS.FF AM TZR'),to_timestamp_tz('02-MAY-12 09.45.47.000000000 AM -05:00','DD-MON-RR HH.MI.SS.FF AM TZR'),to_timestamp_tz('02-MAY-12 09.45.48.000000000 AM -05:00','DD-MON-RR HH.MI.SS.FF AM TZR'));
Insert into CONG_MEMBER_TERM (CONG_MEMBER_TERM_ID,CONGRESS_ID,CHAMBER_CD,CONG_MEMBER_ID,STATE_CD,CONG_MEMBER_TYPE_CD,DISTRICT,START_DT,END_DT,CREATE_DT,UPDATE_DT) values (2946,105,'H',494,'OK','REP',2,to_timestamp_tz('07-JAN-97 01.00.00.000000000 AM -05:00','DD-MON-RR HH.MI.SS.FF AM TZR'),to_timestamp_tz('19-DEC-98 01.00.00.000000000 AM -05:00','DD-MON-RR HH.MI.SS.FF AM TZR'),to_timestamp_tz('02-MAY-12 09.45.47.000000000 AM -05:00','DD-MON-RR HH.MI.SS.FF AM TZR'),to_timestamp_tz('02-MAY-12 09.45.49.000000000 AM -05:00','DD-MON-RR HH.MI.SS.FF AM TZR'));
Insert into CONG_MEMBER_TERM (CONG_MEMBER_TERM_ID,CONGRESS_ID,CHAMBER_CD,CONG_MEMBER_ID,STATE_CD,CONG_MEMBER_TYPE_CD,DISTRICT,START_DT,END_DT,CREATE_DT,UPDATE_DT) values (2947,106,'H',494,'OK','REP',2,to_timestamp_tz('06-JAN-99 01.00.00.000000000 AM -05:00','DD-MON-RR HH.MI.SS.FF AM TZR'),to_timestamp_tz('15-DEC-00 01.00.00.000000000 AM -05:00','DD-MON-RR HH.MI.SS.FF AM TZR'),to_timestamp_tz('02-MAY-12 09.45.47.000000000 AM -05:00','DD-MON-RR HH.MI.SS.FF AM TZR'),to_timestamp_tz('02-MAY-12 09.45.49.000000000 AM -05:00','DD-MON-RR HH.MI.SS.FF AM TZR'));
Insert into CONG_MEMBER_TERM (CONG_MEMBER_TERM_ID,CONGRESS_ID,CHAMBER_CD,CONG_MEMBER_ID,STATE_CD,CONG_MEMBER_TYPE_CD,DISTRICT,START_DT,END_DT,CREATE_DT,UPDATE_DT) values (2948,109,'S',494,'OK','SEN',null,to_timestamp_tz('04-JAN-05 01.00.00.000000000 AM -05:00','DD-MON-RR HH.MI.SS.FF AM TZR'),to_timestamp_tz('09-DEC-06 01.00.00.000000000 AM -05:00','DD-MON-RR HH.MI.SS.FF AM TZR'),to_timestamp_tz('02-MAY-12 09.45.48.000000000 AM -05:00','DD-MON-RR HH.MI.SS.FF AM TZR'),to_timestamp_tz('02-MAY-12 09.45.49.000000000 AM -05:00','DD-MON-RR HH.MI.SS.FF AM TZR'));
Insert into CONG_MEMBER_TERM (CONG_MEMBER_TERM_ID,CONGRESS_ID,CHAMBER_CD,CONG_MEMBER_ID,STATE_CD,CONG_MEMBER_TYPE_CD,DISTRICT,START_DT,END_DT,CREATE_DT,UPDATE_DT) values (2949,110,'S',494,'OK','SEN',null,to_timestamp_tz('04-JAN-07 01.00.00.000000000 AM -05:00','DD-MON-RR HH.MI.SS.FF AM TZR'),to_timestamp_tz('02-JAN-09 01.00.00.000000000 AM -05:00','DD-MON-RR HH.MI.SS.FF AM TZR'),to_timestamp_tz('02-MAY-12 09.45.48.000000000 AM -05:00','DD-MON-RR HH.MI.SS.FF AM TZR'),to_timestamp_tz('02-MAY-12 09.45.49.000000000 AM -05:00','DD-MON-RR HH.MI.SS.FF AM TZR'));
Insert into CONG_MEMBER_TERM (CONG_MEMBER_TERM_ID,CONGRESS_ID,CHAMBER_CD,CONG_MEMBER_ID,STATE_CD,CONG_MEMBER_TYPE_CD,DISTRICT,START_DT,END_DT,CREATE_DT,UPDATE_DT) values (2951,111,'S',494,'OK','SEN',null,to_timestamp_tz('06-JAN-09 01.00.00.000000000 AM -05:00','DD-MON-RR HH.MI.SS.FF AM TZR'),to_timestamp_tz('22-DEC-10 01.00.00.000000000 AM -05:00','DD-MON-RR HH.MI.SS.FF AM TZR'),to_timestamp_tz('02-MAY-12 09.45.48.000000000 AM -05:00','DD-MON-RR HH.MI.SS.FF AM TZR'),to_timestamp_tz('02-MAY-12 09.45.49.000000000 AM -05:00','DD-MON-RR HH.MI.SS.FF AM TZR'));
Insert into CONG_MEMBER_TERM (CONG_MEMBER_TERM_ID,CONGRESS_ID,CHAMBER_CD,CONG_MEMBER_ID,STATE_CD,CONG_MEMBER_TYPE_CD,DISTRICT,START_DT,END_DT,CREATE_DT,UPDATE_DT) values (2950,112,'S',494,'OK','SEN',null,to_timestamp_tz('05-JAN-11 01.00.00.000000000 AM -05:00','DD-MON-RR HH.MI.SS.FF AM TZR'),null,to_timestamp_tz('02-MAY-12 09.45.48.000000000 AM -05:00','DD-MON-RR HH.MI.SS.FF AM TZR'),to_timestamp_tz('02-MAY-12 09.45.49.000000000 AM -05:00','DD-MON-RR HH.MI.SS.FF AM TZR')); 
```

如果上一次服务与下一次服务之间的差距大于 24 个月，则视为服务中的“差距”。

_麦克风

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T14:15:42.120

这是使用分析函数和示例在 SQL 中折叠时间范围的标准方法。

你的桌子：

```
SQL> create table mytable (startdate,enddate)
  2  as
  3  select date '2000-01-01', date '2001-02-01' from dual union all
  4  select date '2001-02-02', date '2001-04-01' from dual union all
  5  select date '2004-04-01', date '2006-06-02' from dual union all
  6  select date '2006-06-03', date '2010-09-01' from dual union all
  7  select date '2011-08-01', date '2012-09-01' from dual
  8  /

Table created. 
```

查询：

```
SQL> select min(startdate) startdate
  2       , max(enddate)   enddate
  3    from ( select startdate
  4                , enddate
  5                , max(rn) over (order by startdate) maxrn
  6             from ( select startdate
  7                         , enddate
  8                         , case lag(enddate) over (order by startdate)
  9                           when startdate-1 then
 10                             null
 11                           else
 12                             rownum
 13                           end rn
 14                      from mytable
 15                  )
 16         )
 17   group by maxrn
 18   order by startdate
 19  /

STARTDATE           ENDDATE
------------------- -------------------
01-01-2000 00:00:00 01-04-2001 00:00:00
01-04-2004 00:00:00 01-09-2010 00:00:00
01-08-2011 00:00:00 01-09-2012 00:00:00

3 rows selected. 
```

它分三个阶段工作：

1.  仅将唯一的 rownum 分配给作为组开始的那些记录
2.  给不是组开始的记录与组的开始相同的编号（使用带有滑动窗口的分析函数 MAX）
3.  按组号聚合

这个查询的真正美妙之处在于只需要一个 TABLE ACCESS FULL ：

```
SQL> select * from table(dbms_xplan.display_cursor(null,null,'allstats last'))
  2  /

PLAN_TABLE_OUTPUT
-------------------------------------------------------------------------------------------------------------------------
SQL_ID  8v1suw8j53tqz, child number 0
-------------------------------------
select min(startdate) startdate      , max(enddate)   enddate   from ( select startdate               , enddate
             , max(rn) over (order by startdate) maxrn            from ( select startdate
, enddate                        , case lag(enddate) over (order by startdate)                          when
startdate-1 then                            null                          else                            rownum
                         end rn                     from mytable                 )        )  group by maxrn
order by startdate

Plan hash value: 2933657513

-------------------------------------------------------------------------------------------------------------------------
| Id  | Operation                | Name    | Starts | E-Rows | A-Rows |   A-Time   | Buffers |  OMem |  1Mem | Used-Mem |
-------------------------------------------------------------------------------------------------------------------------
|   1 |  SORT ORDER BY           |         |      1 |      5 |      3 |00:00:00.01 |       3 |  2048 |  2048 | 2048  (0)|
|   2 |   HASH GROUP BY          |         |      1 |      5 |      3 |00:00:00.01 |       3 |       |       |          |
|   3 |    VIEW                  |         |      1 |      5 |      5 |00:00:00.01 |       3 |       |       |          |
|   4 |     WINDOW BUFFER        |         |      1 |      5 |      5 |00:00:00.01 |       3 |  2048 |  2048 | 2048  (0)|
|   5 |      VIEW                |         |      1 |      5 |      5 |00:00:00.01 |       3 |       |       |          |
|   6 |       WINDOW SORT        |         |      1 |      5 |      5 |00:00:00.01 |       3 |  2048 |  2048 | 2048  (0)|
|   7 |        COUNT             |         |      1 |        |      5 |00:00:00.01 |       3 |       |       |          |
|   8 |         TABLE ACCESS FULL| MYTABLE |      1 |      5 |      5 |00:00:00.01 |       3 |       |       |          |
-------------------------------------------------------------------------------------------------------------------------

24 rows selected. 
```

问候，
罗布。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T13:49:56.127

这可以使用分析来完成，但我不确定您想从查询中得到什么。

例如：

```
drop table mydates;

create table mydates (sdate date, edate date);

insert into mydates values (to_date('2000-01-01' ,'YYYY-MM-DD'), to_date('2000-01-02' ,'YYYY-MM-DD'));

insert into mydates values (to_date('2000-01-02' ,'YYYY-MM-DD'), to_date('2000-02-01' ,'YYYY-MM-DD'));
-- insert a gap
insert into mydates values (to_date('2001-01-01' ,'YYYY-MM-DD'), to_date('2001-01-02' ,'YYYY-MM-DD'));

insert into mydates values (to_date('2001-01-02' ,'YYYY-MM-DD'), to_date('2001-02-01' ,'YYYY-MM-DD')); 
```

在这里，我们有两组，每排两排，它们之间有服务中断。您可以使用 lag 函数轻松找到 start_date 与之前的行 end_date 不同的所有行。此 SQL 将为您提供每个组的起始行：

```
select * 
  from 
  (
    select lag(edate, 1, null) over (order by sdate asc)  as previous_end,
    sdate sd,
    edate ed
    from mydates
  )
where previous_end != sd or previous_end is null; 
```

但我不确定那是你想要的。您可以变得更漂亮并向下折叠所有行，这样您就可以在每个连续组中取出一行。

如果您发布更完整的示例（包括创建对象和数据的脚本），这可能会很有用。

```
select min(sd) sd, max(ed) ed
from
(
  select max(grp) over (order by sd) grp,
         sd, ed
  from  
  (
    select 
      case 
        when previous_end != sd or previous_end is null then
          rn
        else
          null
      end grp,
      sd, 
      ed
    from 
    (
      select lag(edate, 1, null) over (order by sdate asc)  as previous_end,
      row_number() over (order by sdate asc) as rn,
      sdate sd,
      edate ed
      from mydates
      order by sdate asc
    )
  )
) group by grp
order by sd asc; 
```

# c# - 文本框和 DateTimePicker BackColor 角落案例 - 有对此的解释吗？

> ID：10449525
> 
> 赞同：2
> 
> 时间：2012-05-04T13:12:02.527
> 
> 标签：c#, vb.net, winforms

向窗体添加一个 DateTimePicker、两个文本框和两个按钮

添加以下代码：

```
Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) Handles Button1.Click
    DateTimePicker1.Enabled = True
    TextBox1.Enabled = True
    TextBox2.Enabled = True
    TextBox1.BackColor = DateTimePicker1.BackColor
    TextBox2.BackColor = Color.FromArgb(DateTimePicker1.BackColor.A, DateTimePicker1.BackColor.R, DateTimePicker1.BackColor.G, DateTimePicker1.BackColor.B)
End Sub

Private Sub Button2_Click(sender As System.Object, e As System.EventArgs) Handles Button2.Click
    DateTimePicker1.Enabled = False
    TextBox1.Enabled = False
    TextBox2.Enabled = False
    TextBox1.BackColor = DateTimePicker1.BackColor
    TextBox2.BackColor = Color.FromArgb(DateTimePicker1.BackColor.A, DateTimePicker1.BackColor.R, DateTimePicker1.BackColor.G, DateTimePicker1.BackColor.B)
End Sub 
```

在所有情况下，从,和的`BackColor`回读都具有相同的 ARGB 值`DateTimePicker``TextBox1``TextBox2`

但是当`Button2`点击时，**屏幕上**`TextBox1`的实际上是 F0F0F0 （来自屏幕抓取颜色选择器）- 有对此的解释吗？`BackColor`

 **我认为这也适用于 C# - 因此是标签。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T13:39:42.323

您可以使用`ReadOnly`属性而不是`Enabled`属性来控制可编辑行为并分配 custom `BackColor`。**

# ms-access - 除非在 shift 键绕过模式下，否则进度条不显示

> ID：10449529
> 
> 赞同：8
> 
> 时间：2012-05-04T13:12:12.683
> 
> 标签：ms-access, vba

我有一个打开时不显示数据库窗口的数据库。相反，它显示一个总机。我确实有一些查询和报告需要一段时间才能运行并希望向用户显示进度条。我可以让进度条显示的唯一方法是当我使用 shift 键绕过以调出数据库窗口进入数据库时​​。然后，进度条显示并且效果很好。当数据库窗口不显示时，如何让它显示？

我使用以下内容来初始化进度条：

```
Application.SysCmd acSysCmdInitMeter, "Progress:", 500 
```

然后在循环中，我使用以下内容更新进度条：

```
TempRecordCount = TempRecordCount + 1
Application.SysCmd acSysCmdUpdateMeter, TempRecordCount 
```

然后，一旦不再需要它，我将执行以下操作：

```
Application.SysCmd acSysCmdRemoveMeter 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T13:30:52.113

**工具 --> 启动... --> [x] 显示状态栏**

我怀疑当您在启动选项中取消选中“显示数据库窗口”旁边的框时，您也取消了“显示状态栏”旁边的框。由于进度条显示在状态栏中，因此您需要确保选中该选项。

# c++ - COM：访问冲突使 BSTR 的 SafeArray

> ID：10449530
> 
> 赞同：0
> 
> 时间：2012-05-04T13:12:20.360
> 
> 标签：c++, com, variant, safearray

下面的代码工作得很好，感谢您使用一个 COM 客户端，但使用新客户端（同一软件的更新版本）`string_array_to_bstr_safearray_variant`会引发访问冲突，一切都死了。

谁能告诉我我是否做错了我以前逃避的事情..？我没有正确分配内存吗？

```
#include "comutil.h"

void string_array_to_bstr_safearray_variant(long arraylength,char ** in_array,VARIANT *out_variant)
{
    CComSafeArray<BSTR> out_array;
    ATLENSURE_SUCCEEDED(out_array.Create(arraylength));
    for (int i=0;i<arraylength;i++)
        ATLENSURE_SUCCEEDED(out_array.SetAt(i,_com_util::ConvertStringToBSTR(in_array[i])));
    CComVariant ccv(out_array);
    HRESULT hr = ccv.Detach(out_variant);
    ATLENSURE_SUCCEEDED(hr);
}

//names: output parameter to contain variant holding safearray of bstrs
STDMETHODIMP CCalculation::get_output_shortnames(VARIANT* names)
{
    char** names_array = calc_get_short_output_names(calc); //this works fine
    string_array_to_bstr_safearray_variant(output_length,names_array,names); //this fails before returning
    return S_OK;
} 
```

**编辑：调试器信息**

如果没有调试器，我会遇到访问冲突。

使用调试器单步执行此代码似乎可以工作。 `output_length`设置正确；`out_array`被正确创建和填充`out_variant`，据我所知，通过变量观察也是如此。但是，COM 客户端仍然失败，说`"lisp value has no coercion to VARIANT with this type: #<safearray...>"`（这很奇怪，因为客户端的先前版本解释返回值就好了）。然后它崩溃并抱怨它的内存不足。

在调试器中运行代码，但让它运行而不是单步执行，它在 的构造函数中失败`CComVariant`，抱怨由于内部调用`SafeArrayCopy`失败而引发了无效参数。

编辑：在最近的另一个步骤中，它在循环中失败了，所以问题可能出在@terriblememory 所暗示的 CComSafeArray 上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T02:03:36.150

CComSafeArray 的文档实际上并没有说它支持 BSTR。BSTR 的功能标志是否在底层 SAFEARRAY 中设置？（这不是一个真正的答案，但我没有业力来评论，对不起！）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T13:31:59.523

好吧，我终于找到了答案！问题中发布的代码是正确的。早期的代码导致未定义的行为：

```
STDMETHODIMP CCalculation::configure(VARIANT radii) // radii contains a safearray of doubles
{
CComSafeArray<double> radii_sa;
radii_sa.Attach(radii.parray);
ULONG num_radii = radii_sa.GetCount();

//unpack radii array into c-style array
double *radii_array = new double[num_radii];
for (long i=0;i<num_radii;i++)
radii_array[i] = radii_sa.GetAt(i);

//...do something with radii_array...

delete[] radii_array;

return S_OK;
} 
```

你发现故意的错误了吗？COM 规则说半径属于客户端，而不是我的 dll。通过附加到它然后让包装器超出范围，我正在释放安全数组。通过在 return 语句之前添加这个来修复：

```
radii_sa.Detach(); 
```

# html - 将图像（不同大小）和文本对齐到列表中心？

> ID：10449531
> 
> 赞同：0
> 
> 时间：2012-05-04T13:12:22.280
> 
> 标签：html, css

是否可以使用 CSS 将本示例中的所有内容对齐到中心？如果没有，那我该怎么办？

如您所见，图像的高度不同，因此使事情变得更加复杂。我想要的是对齐所有图像和文本，使它们看起来像一条线。

这是小提琴：http: [//jsfiddle.net/cRGeD/](http://jsfiddle.net/cRGeD/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T13:45:03.150

简单答案使用 span 而不是 li

[http://jsfiddle.net/cRGeD/22/](http://jsfiddle.net/cRGeD/22/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T13:25:20.617

这可以帮助你，我已经为文本添加了 DIV 并将其浮动到左侧，然后将行高调整为 li 的 250%，检查小提琴 [http://jsfiddle.net/chanduzalte/cRGeD/8/](http://jsfiddle.net/chanduzalte/cRGeD/8/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T13:38:58.647

编辑：在这里，我将以下原则应用于您的 jsFiddle 中的前两项：http: [//jsfiddle.net/cRGeD/23/](http://jsfiddle.net/cRGeD/23/)。

HTML

```
<span class="icon question-icon">1234</span> 
```

CSS

```
.icon{
  padding-left: 20px;
  background-position: left center;
  background-repeat: no-repeat;
  display: inline-block;
}

.question-icon{
  background-image: url("../path/for/images.jpg");
} 
```

这样你就可以为不同的图标使用不同的类，并且只需要将图像路径添加到新的类中。

# exception - Spring MVC 3.1 异常：Errors/BindingResult 参数应紧跟在模型属性参数之后

> ID：10449532
> 
> 赞同：2
> 
> 时间：2012-05-04T13:12:23.367
> 
> 标签：exception, spring-mvc

我升级到 Spring 3.1.1.RELEASE，现在我在以下方法上遇到了异常：

```
@RequestMapping(method = RequestMethod.POST, params = "_finish")
public ModelAndView doPostFinish(@PathVariable("runEnvironmentName") RunEnvironment pEnvironment, @ModelAttribute("command") JobSpecNewCommand pCommand, BindingResult pErrors) 
{
...
} 
```

引发以下异常：

```
java.lang.IllegalStateException：需要一个 Errors/BindingResult 参数
紧跟在控制器方法中的模型属性参数之后
签名：

java.lang.IllegalStateException：错误/BindingResult 参数应紧跟在控制器方法签名中的模型属性参数之后：public org.springframework.web.servlet.ModelAndView de.wwag.infra.oocsd.projectAdmin.fe.natures .hudson.jobspecs.RunEnvJobSpecNewController.doPostFinish(de.wwag.infra.oocsd.projectAdmin.common.domain.RunEnvironment,de.wwag.infra.oocsd.projectAdmin.fe.natures.hudson.jobspecs.JobSpecNewCommand,org.springframework.validation .BindingResult)
    在 org.springframework.web.method.annotation.ErrorsMethodArgumentResolver.resolveArgument(ErrorsMethodArgumentResolver.java:62) ...

```

如您所见，方法签名符合预期。BindingResult 参数在模型属性之后声明。

在同一个类中，声明了以下方法：

```
@ModelAttribute("otherJobSpecs")
public List<JobReference> modelOtherJobSpecs(@PathVariable("runEnvironmentName") RunEnvironment pEnvironment, @ModelAttribute("command") JobSpecNewCommand pCommand) 
{
...
} 
```

当我从类中删除该方法时，一切都按预期工作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T15:56:10.223

这是 Spring 中的一个错误，我报告了它：[SPR-9378](https://jira.springsource.org/browse/SPR-9378)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T20:55:00.613

阅读 Spring 错误 SPR-9378，您必须从 @ModelAttribute 方法中删除模型变量：

```
@ModelAttribute
public void populateModel(Model model) { //this method haven't Libro Object
    model.addAttribute(Genero.values());
    model.addAttribute(EstadoLibro.values());
}

@RequestMapping(method=RequestMethod.POST)
public String grabarLibro(@Validated @ModelAttribute Libro libro, BindingResult result) {
   ...
} 
```

它对我有用。

# c - C RS232 通讯。如何比较CPU时间？

> ID：10449533
> 
> 赞同：0
> 
> 时间：2012-05-04T13:12:28.173
> 
> 标签：c, time, serial-port, cpu

第一次发布，所以可能会有比必要更多的信息，但我想彻底：

我们在 C 语言中的一项练习是创建发送器和接收器程序，这些程序将通过 RS232 串行通信与空调制解调器交换数据。我们使用了一个虚拟端口程序（如果你想测试，我使用了 eltima 软件的 Virtual Serial Port 试用版）。我们需要做 4 个版本：

1) 使用由以前的学生创建的预定库，该库具有发送者和接收者等预制函数 2) 使用 inportb 和 outportb 函数 3) 使用 OS 中断 int86 并通过 REGS 联合提供寄存器值 4) 使用内联汇编

编译器：DevCPP（流血）。

一切正常，但现在我们需要根据发送和接收字符所花费的 CPU 时间来比较所有不同的版本。它特别说我们必须找到以下内容：

平均值、标准偏差、最小值、最大值和 99.5 %

课堂上没有任何解释，所以我在这里有点迷失......我猜这些是经过多次正态分布试验后的统计数字？但即便如此，我如何实际测量 CPU 周期呢？我会继续搜索，但同时我会在这里发帖，因为截止日期是 3 天 :D。

int86版本的代码示例：

```
#include <stdio.h>
#include <stdlib.h>
#include <dos.h>

#define RS232_INIT_FUNCTION 0
#define RS232_SEND_FUNCTION 1
#define RS232_GET_FUNCTION 2
#define RS232_STATUS_FUNCTION 3
#define DATA_READY 0x01

#define PARAM 0xEF
#define COM1 0
#define COM2 1

void rs232init (int port, unsigned init_code)
{
     union REGS inregs;
     inregs.x.dx=port;
     inregs.h.ah=RS232_INIT_FUNCTION;
     inregs.h.al=init_code;
     int86(0x14,&inregs,&inregs);
}

unsigned char rs232transmit (int port, char ch)
{
     union REGS inregs;
     inregs.x.dx=port;
     inregs.h.ah=RS232_SEND_FUNCTION;
     inregs.h.al=ch;
     int86(0x14,&inregs,&inregs);
     return (inregs.h.ah);
}

unsigned char rs232status(int port){
     union REGS inregs;
     inregs.x.dx=port;
     inregs.h.ah=RS232_STATUS_FUNCTION;
     int86(0x14, &inregs, &inregs);
     return (inregs.h.ah);  //Because we want the second byte of ax
     }

unsigned char rs232receive(int port)
{
    int x,a;
    union REGS inregs;
    while(!(rs232status(port) & DATA_READY))
    {
        if(kbhit()){
            getch();
            exit(1); 
            }
        };
    inregs.x.dx=port;
    inregs.h.ah=RS232_GET_FUNCTION;
    int86(0x14,&inregs,&inregs);
    if(inregs.h.ah & 0x80)
    {
        printf("ERROR");
        return -1;
    }
    return (inregs.h.al);
}

int main(){
    unsigned char ch;
    int d,e,i;

    do{
        puts("What would you like to do?");
        puts("1.Send data");
        puts("2.Receive data");
        puts("0.Exit");
        scanf("%d",&i);
        getchar();

        if(i==1){
           rs232init(COM1, PARAM);

           puts("Which char would you like to send?");
           scanf("%c",&ch);
           getchar();
           while(!rs232status(COM1));
           d=rs232transmit(COM1,ch);
           if(d & 0x80) puts("ERROR");   //Checks the bit 7 of ah for error
        }
        else if(i==2){
           rs232init(COM1,PARAM);
           puts("Receiving character...");
           ch=rs232receive(COM1);
           printf("%c\n",ch);
        }
    }while(i != 0);

    system("pause");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T14:33:16.510

这里需要一些猜测，因为这个问题有点不确定。

您已经列出了四种不同的发送/接收字符的方法。我怀疑您的讲师正在寻找的是从您调用给定方法（或输入您的内联汇编代码）到您从该方法返回（留下内联代码）的时间。您将需要在通话前和通话后抓紧时间，找出它们的不同之处。

不那么含糊的是 cpu 时间。clock() 方法是最直接的方法，但这可能不是讲师想要的。

最后是统计数据，这很简单。做一堆运行，并运行一些关于时间的统计信息

# html - 表格在 Firefox 和 Chrome 中消失

> ID：10449535
> 
> 赞同：0
> 
> 时间：2012-05-04T13:12:36.150
> 
> 标签：html, css, html-table

我有一个表格，当我在 Firefox 或 chrome 中加载页面时，它从屏幕向右移动，导致大部分表格消失，表格应该位于屏幕中间，并且似乎在右侧重叠页面区域之外。

```
<html lang="en">

<head>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<title>Small North Run</title>
<meta name="description" content=" ">
<meta name="keywords" content=" ">
<link rel="stylesheet" href="default.css" type="text/css">
<link rel="stylesheet" href="sponsor.css" type="text/css">

</head>

<body>

<div id="wrapper">

<header>
    <h1>SMALL NORTH RUN</h1>
</header>

<nav>
<ul id="navlist">
    <li><a href="./">HOME</a></li>
    <li><a href="training">TRAINING REGIME</a></li>
    <li><a href="./forum">FORUM</a></li>
    <li><a href="./sponsor.php">SPONSOR</a></li>
    <li><a href="./contact.php">CONTACT</a></li>
</ul>
</nav>
<hr id="hrnav" />

<div id="content">

<p>This page allows you to sponsor a particular runner. Just simply select the name of the runner you wish to sponsor from the drop down list, then enter the amount you wish to donate followed by a brief message for the runner and then your name. Once making a donation the runner you have sponsored will be notified by email that you have made a donation.</p>
<br/>
<br/>
<br/>
<br/>
<form method="post" action="test.php">
<table>

    <tr><td><label>Runner:</label></td>
    <td>
    <select name="fullname">
    <?php do{?>
    <option value="<?php echo $rsNames['user_ID']; ?>"> <?php echo $rsNames['first_Name'];?> <?php echo $rsNames['last_Name'];?></option>
    <?php } while ( $rsNames= mysql_fetch_assoc($names_query))?>
    </select>
    </td>
    </tr>
    <tr><td><label>Donation (£):</label></td><td><input type="text" maxlength="9" value="0.00" name="donation"/></td></tr>
    <tr>
    <td>
        <label>Message:</label>
    </td>
    <td>
        <textarea  name="donationmessage" maxlength="200" cols="25" rows="6"> </textarea>
    </td>
    </tr>
        </tr>
    <tr><td><label>Your Name:</label></td><td><input type="text" maxlength="30"  name="donator"/></td></tr>
    <tr>
    <td>
    <tr><td><input id="submit" type="submit" value="Confirm Donation"/></td></tr>
    </table>
</form>

</div>

</div> <!-- END WRAPPER -->

</body>

</html>

CSS
#content { text-align: left; margin: 2px; padding: 10px; }

#content p { font: font: 12px/1.5 Verdana, sans-serif; float: left; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T13:15:57.967

尝试添加一个文档类型：

例如，这里是 HTML5 文档类型

```
<!DOCTYPE html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T23:34:54.950

1）你的表结构有一些错误

2）如果你需要居中表格，你可以设置它margin-left和margin-right auto。

可能有带有对齐的表格代码：

```
<table style='margin: 0 auto;'>
<tr>
        <td><label>Runner:</label></td>
        <td>
<select name="fullname">
<?php do{?>
<option value="<?php echo $rsNames['user_ID']; ?>"> <?php echo $rsNames['first_Name'];?> <?php echo $rsNames['last_Name'];?></option>
<?php } while ( $rsNames= mysql_fetch_assoc($names_query))?>
</select>
     </td>
</tr>
<tr>
        <td><label>Donation (£):</label></td>
        <td><input type="text" maxlength="9" value="0.00" name="donation"/></td>
</tr>
<tr>
        <td><label>Message:</label></td>
        <td><textarea  name="donationmessage" maxlength="200" cols="25" rows="6"> </textarea></td>
</tr>
<tr>
        <td><label>Your Name:</label></td>
        <td><input type="text" maxlength="30"  name="donator"/></td>
</tr>
<tr>
        <td><input id="submit" type="submit" value="Confirm Donation"/></td>
        <td>&nbsp;</td>
</tr></table> 
```

如果您仍有问题：在某处发布完整的 HTML 和 CSS 代码以进行详细分析。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T13:21:07.250

这对我来说似乎工作得很好。

也许你的css有问题？

编辑：您的 P 标签上的浮动样式造成了麻烦。

一个简单的解决方案可能是在您的 P 标记下使用一个 defloating-break-div （我不确定正确的名称是什么）：

```
<div style="float:none;">
     <br />
</div> 
```

这会导致其余代码恢复正常布局

# mysql - Mysql 时间算术 - 仅时间

> ID：10449539
> 
> 赞同：1
> 
> 时间：2012-05-04T13:12:43.460
> 
> 标签：mysql

这应该很容易......但让我发疯。

```
UPDATE time SET time = (time - interval 130 minute) WHERE stuff=whatever; 
```

Time 只是一个时间列，即 09:00:00。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T13:17:49.247

假设您想从当前时间中减去 130 分钟，您可以使用[`addtime`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_addtime)，如下所示：

```
UPDATE time SET time = addtime(time, '-02:10') where stuff=whatever 
```

130 分钟是 2 小时 10 分钟，因此是`-02:10`常数。

[这](http://sqlfiddle.com/#!2/6614a/1)是关于 sqlfiddle 的快速演示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T13:22:33.600

如果时间是日期时间或时间图，则必须使用 date_sub 函数

```
SELECT date_sub(time, interval 130 minute) FROM .... 
```

否则，您还可以将您的时间转换为`UNIX_TIMESTAMP`，将其转换`FROM_TIMESTAMP`为 mysql 时间戳

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T13:23:05.223

有一个 DATE_SUB 方法与您正在寻找的 DATE_ADD 方法类似。

DATE_SUB（现在（），间隔 130 分钟）

检查此链接以获取更多信息：

[http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-sub](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-sub)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T13:17:42.267

**将-**更改为**，**它将起作用。正确的查询是：

```
UPDATE time SET time = (time, interval 130 minute) where stuff=whatever 
```

# php - 使用 fgets/fread 从 fsockopen 读取数据挂起

> ID：10449540
> 
> 赞同：8
> 
> 时间：2012-05-04T13:12:48.207
> 
> 标签：php, fread, fgets, fsockopen, feof

这是我正在使用的代码：

```
if (!($fp = fsockopen('ssl://imap.gmail.com', '993', $errno, $errstr, 15)))
    echo "Could not connect to host";
$server_response = fread($fp, 256);
echo $server_response;

fwrite($fp, "C01 CAPABILITY"."\r\n");
while (!feof($fp)) {
    echo fgets($fp, 256);
} 
```

我得到第一个回应：

```
OK Gimap ready for requests from xx.xx.xx.xx v3if9968808ibd.15 
```

但随后页面超时。我已经搜索了 stream_set_blocking、stream_set_timeout、stream_select、fread 等，但无法让它工作。我需要读取服务器发送的所有数据，然后继续执行其他命令（我将使用 imap 检索电子邮件）。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-04T13:39:17.537

您的脚本最后挂在 while 循环中。这是因为您已将其用作`!feof()`循环的条件，并且服务器没有关闭连接。这意味着`feof()`将永远返回`false`并且循环将永远继续。

当您编写完整的实现时，这不会有问题，因为您将寻找响应代码并且可以相应地跳出循环，例如：

```
<?php

  // Open a socket
  if (!($fp = fsockopen('ssl://imap.gmail.com', 993, $errno, $errstr, 15))) {
      die("Could not connect to host");
  }

  // Set timout to 1 second
  if (!stream_set_timeout($fp, 1)) die("Could not set timeout");

  // Fetch first line of response and echo it
  echo fgets($fp);

  // Send data to server
  echo "Writing data...";
  fwrite($fp, "C01 CAPABILITY\r\n");
  echo " Done\r\n";

  // Keep fetching lines until response code is correct
  while ($line = fgets($fp)) {
    echo $line;
    $line = preg_split('/\s+/', $line, 0, PREG_SPLIT_NO_EMPTY);
    $code = $line[0];
    if (strtoupper($code) == 'C01') {
      break;
    }
  }

  echo "I've finished!"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T13:28:38.280

您的脚本应该可以正常工作。事实上，它正在工作。

当我运行您的代码时，请在我的电脑上查看以下结果：

```
* OK Gimap ready for requests from xx.xx.xx.xx l5if4585958ebb.20
* CAPABILITY IMAP4rev1 UNSELECT IDLE NAMESPACE QUOTA ID XLIST CHILDREN X-GM-EXT-1 XYZZY  SASL-IR AUTH=XOAUTH
C01 OK Thats all she wrote! l5if4585958ebb.20 
```

由于 gmail 不会断开您的连接。没有出现文件结尾。页面加载只是超时。

换句话说：您的脚本将一直等待，直到 gmail 断开连接，不幸的是，这发生在您的页面加载已经超时之后。

# android - 如何增加轮播图像空间？

> ID：10449546
> 
> 赞同：2
> 
> 时间：2012-05-04T13:13:03.280
> 
> 标签：android, carousel

我在下面的链接[carousel 演示源代码链接中下载了示例 android carousel 演示源代码](http://www.codeproject.com/Articles/146145/Android-3D-Carousel)

我的疑问是如果我添加更多图像，图像间隙非常低，所以如何增加图像空间，还有一个疑问底部图像反射是隐藏如何获得底部反射图像.....

这是我的 xml 源代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout 
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:pj="http://schemas.android.com/apk/res/com.carouseldemo.main"
    xmlns:bm="com.carouseldemo.main"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
    <LinearLayout
        android:layout_weight="0.5"
        android:padding="5dip"
        android:gravity="top"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" 
        >
            <com.carouseldemo.controls.Carousel
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:id="@+id/carousel"  
                pj:UseReflection="true"
                pj:Items="@array/entries"
                pj:SelectedItem="0"
                android:animationDuration="200"
            />      
    </LinearLayout>     
</LinearLayout> 
```

请看我的屏幕截图：

![在此处输入图像描述](../Images/d54f98fd7ea9a1cb021d4445d8ca988b.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-03T23:45:13.020

我修改了代码，在计算中`Calculate3DPosition`包含了 NEW 的使用：`verticalStretchFactor``y`

计算3D位置

```
 float y = -getHeight()/2f + (float) (diameter/mVerticalStretchFactor * z * android.util.FloatMath.sin(mTheta)); 
```

我将这个新的属性参数添加到控件的属性中。我发现 140f 数量级的因子在标准 Droid Phone 显示器上运行良好，可以在列表中的项目之间提供更大的垂直间距。我将该控件用作主菜单控件，列表中只有 5 到 6 个项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T13:23:54.590

它应该在**Carousel.java**文件中定义。请检查以下功能

> src/com/carouseldemo/controls/Carousel.java

```
getChildStaticTransformation  
makeAndAddView  
setUpChild  
Calculate3DPosition 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-24T07:30:12.333

谢谢大家的回答，尤其是森，麻风病患者。我解决了大图像点击错误选择的问题。如果用户只需要保持图像不变但问题仍然存在，那么您的解决方案非常有用。

如果有人需要像 Balaji 上面给出的示例图像那样使微调器图像保持不变，请使用 Sen 和 lepert 解决方案。

如果你想让图像成为主要图像并正确获得点击/选择，请更改下面给出的代码..这对我有用..

在某一方面的变化

CorousalSpinner.java 中的 pointToPosition(int x, int y) 无需更改上述方案给出的代码

代替

```
Collections.sort(fitting);

        if(fitting.size() != 0)
            return fitting.get(0).getIndex();
        else
            return mSelectedPosition; 
```

和

```
Collections.sort(fitting);

if(fitting.size() != 0){
    if(fitting.size()>1){
        return fitting.get((fitting.size()-1)).getIndex();
    }else{
        return fitting.get(0).getIndex();   
    }

}
else{
    return mSelectedPosition;
} 
```

# wcf - 单元测试 WCF Visual Studio 2010

> ID：10449554
> 
> 赞同：3
> 
> 时间：2012-05-04T13:13:35.960
> 
> 标签：wcf, visual-studio-2010, unit-testing, c#-4.0

我正在为我编写的 WCF 服务编写单元测试。问题是当我运行单元测试时，它会抛出错误，说没有端点监听。我需要编译我的 WCF 服务，然后运行单元测试。

是否有任何其他方式可以运行单元测试并托管 WCF 服务，然后再开始测试。

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T13:46:20.790

针对实际 WCF 服务运行测试不是单元测试，而是*集成*测试；如果您想这样做，您可以将其作为自动化构建过程的一部分，该过程部署服务然后运行您的测试。

要对您的服务进行*单元*测试，您应该忽略 WCF 方面并直接调用服务类，就好像它是任何其他类一样。

# ios - 静音播放 Http Live Streaming 视频的 AVPlayer

> ID：10449555
> 
> 赞同：5
> 
> 时间：2012-05-04T13:13:41.090
> 
> 标签：ios, avfoundation, avplayer, http-live-streaming, avaudiosession

我想知道是否可以使**AVPlayer**播放**HTTP Live Streaming 视频的****声音**静音？

 ****我已经尝试了几件事，比如设置[此处解释的](http://developer.apple.com/library/ios/#qa/qa1716/_index.html)**AVPlayer** 音量的 Apple 方法，但它仅适用于本地文件......（参见 Apple 文档底部的注释）。

[这篇文章](https://stackoverflow.com/questions/5237070/avplayer-questions-while-live-streaming-ios)中解释的类似方法也不起作用。

有解决办法吗？我真的不想让设备的声音静音，但只有一个视频，而其他播放器可以拥有自己的音频（用户可以平衡播放器之间的音频）。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-19T04:42:54.240

iOS 7.0 现在支持使用静音播放器

```
[AVPlayer setVolume:(float)volume] 
```

它也适用于 HTTP Live Streaming，我的应用程序正在广泛使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-03T13:05:52.010

根据 AVFoundation 团队的说法，不可能静音或禁用 HLS 视频的轨道。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T12:34:40.083

您可以使用 MPMusicPlayerController 共享实例将整个音频会话静音。

```
[[MPMusicPlayerController applicationMusicPlayer ]setVolume:0]; 
```****

# django - 带有路由器的 Django 数据库返回计数，但没有记录

> ID：10449556
> 
> 赞同：2
> 
> 时间：2012-05-04T13:13:41.590
> 
> 标签：django, multi-database

我有一个 django-orm 数据库，其中填充了电子表格中收集的数据。我正在尝试编写一个 diff 函数来根据电子表格的内容检查数据库的当前状态。我使用路由器从电子表格中加载数据，将其放入临时的 sqlite 数据库（“默认”数据库是 postgres），这是我的路由器：

```
reference_models = ['Stimulus'] # these values are fixed 
load_models = ['Response', 'Participant'] # these values vary per spreadsheet

class TestRouter(object):

    def db_for_read(self, model, **hints):
        if model._meta.object_name in reference_models:
            return 'default'
        else:
            assert model._meta.object_name in load_models
            return 'test'

    def db_for_write(self, model, **hints):
        assert model._meta.object_name not in reference_models
        return 'test'

    def allow_relation(self, obj1, obj2, **hints):
        return True

    def allow_syncdb(self, db, model):
        if db == "test":
            return True
        return None 
```

从我的差异脚本测试：

```
print("---> there are", Response.objects.all().using("default").count(), "original Response objects")
print(Response.objects.all().using("default").select_related("participant"))
print("---> there are", Response.objects.all().count(), "temporary Response objects")
print(Response.objects.all()) 
```

这个的输出是：

```
---> there are 137709 original Response objects
[ ## LOTS OF OBJECTS ##, '...(remaining elements truncated)...']
---> there are  1680 temporary Response objects
[] 
```

`.count()`如果方法找到 1680 个对象，为什么最后的查询是空的？

**编辑**这是一些额外的诊断信息（`from IPython import embed`用于在脚本运行时查看脚本的状态）：

```
In [16]: print Response.objects.all().query
SELECT "data_response"."id", "data_response"."modified", "data_response"."created", 
"data_response"."stimulus_id", "data_response"."participant_id", "data_response"."full_response",
"data_response"."full_response_orthography" FROM "data_response" INNER JOIN "data_stimulus" ON 
("data_response"."stimulus_id" = "data_stimulus"."id") INNER JOIN "data_participant" ON 
("data_response"."participant_id" = "data_participant"."id") ORDER BY "data_stimulus"."task" ASC, 
"data_stimulus"."number" ASC, "data_participant"."code" ASC 
```

我想问题是 Stimulus 对象是一个外键，路由器很困惑从哪里读取。但是，我可以在 ipython 控制台中通过 id 提取一个 Response 对象，然后将其 Stimulus 作为常规属性（`r = Response.objects.get(id=123)`then `s = r.stimulus`）。

**另一个编辑**我已经使用以下方法破解了一个功能但不令人满意的解决方案：

```
responses = []
for response in Response.objects.raw("""select * from data_response"""):
    responses.append(response) 
```

我不知道为什么这有效而`Response.objects.all()`无效。

# svn - SVN 存储库中发生错误

> ID：10449557
> 
> 赞同：0
> 
> 时间：2012-05-04T13:13:42.840
> 
> 标签：svn, tortoisesvn, visualsvn, ankhsvn

通过浏览器访问`SVN`存储库时，输入用户名和密码后发生错误。下面是错误

```
Redirect Cycle detected for URL http://localhost/svn/repos 
```

请帮我。我是新用户，对此一无所知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T16:23:13.070

这更可能是服务器配置错误问题而不是客户端问题。有关您的配置的更多详细信息应该可以阐明问题的根源：了解服务器版本、客户端版本以及查看配置文件等会很有帮助。

# wpf - 如何使用 ICommand 从头开始 MVVM 拖放列表框

> ID：10449559
> 
> 赞同：0
> 
> 时间：2012-05-04T13:13:46.350
> 
> 标签：wpf, vb.net, mvvm, drag-and-drop

在不使用 MVVMLight 的情况下，我需要使用 mvvm 将照片拖放到列表框中，最好使用 Icommands 和交互触发器，但是如果我使用命令，那么我不知道要为命令参数传递什么？有任何想法吗？谢谢。

这是我尝试过的一些想法：

```
 Public Property ImageList As New ObservableCollection(Of ListBoxItem)
Public Property AddImageCommand As ICommand = New Adjuster.DelegateCommand(AddressOf addImage)

Public Property DropCommand As ICommand = New Adjuster.DelegateCommand(AddressOf dropImage)

'Private Shared ReadOnly PreviewDropCommandProperty As DependencyProperty =
' DependencyProperty.RegisterAttached("PreviewDropCommand", GetType(ICommand), GetType(TestDocumentViewModel), New PropertyMetadata(PreviewDropCommandPropertyChangedCallBack))

Private Sub addImage()
    Dim dlg As New Microsoft.Win32.OpenFileDialog()
    dlg.ShowDialog()
End Sub

Private Sub dragImage(parm As Object)
    Throw New NotImplementedException
End Sub

Private Sub dropImage(e As Object)
    Dim droppedFilePaths As String() = TryCast(e.Data.GetData(DataFormats.FileDrop, True), String())

    For Each droppedFilePath As String In droppedFilePaths

        Dim fileItem As New ListBoxItem()

        fileItem.Content = System.IO.Path.GetFileNameWithoutExtension(droppedFilePath)
        fileItem.ToolTip = droppedFilePath

        ImageList.Add(fileItem)
        RaisePropertyChanged("ImageList")
        'DropListBox.Items.Add(fileItem)
    Next

End Sub

'Private Shared Function GetPreviewDropCommand(inUIElement As UIElement) As ICommand
'    Return DirectCast(inUIElement.GetValue(PreviewDropCommandProperty), ICommand)
'End Function

'Private Shared Sub PreviewDropCommandPropertyChangedCallBack(inDependencyObject As DependencyObject, inEventArgs As DependencyPropertyChangedEventArgs)
'    Dim uiElement As UIElement = TryCast(inDependencyObject, UIElement)
'    If uiElement Is Nothing Then
'        Return
'    End If

'    uiElement.Drop += Function(sender, args) Do
'    GetPreviewDropCommand(uiElement).Execute(args.Data)
'    args.Handled = True

'End Sub

'End Sub 
```

结束类

wpf

```
 <ListBox ItemsSource="{Binding ImageList}" VerticalAlignment="Stretch" HorizontalAlignment="Stretch" Width="Auto" Height="Auto" AllowDrop="True" Name="ImageListBox" >

            <i:Interaction.Triggers>
            <i:EventTrigger EventName="Drop">
                    <i:InvokeCommandAction Command="{Binding Path=DropCommand}" CommandParameter="{Binding }"  />
                    <!--<cmd:EventToCommand Command="{Binding Path=DropCommand}" PassEventArgsToCommand="True" />-->
                </i:EventTrigger>
          </i:Interaction.Triggers>
        </ListBox> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T13:21:33.147

我认为仅使用交互触发器是不可能的，因为您无法传递 EventArgs。为什么不继续使用 mvvm light？它建在那里

编辑：也许你会发现[这](http://weblogs.asp.net/alexeyzakharov/archive/2010/03/24/silverlight-commands-hacks-passing-eventargs-as-commandparameter-to-delegatecommand-triggered-by-eventtrigger.aspx)也有帮助

# c# - 作为 Windows 服务运行的控制台应用程序引发错误

> ID：10449560
> 
> 赞同：0
> 
> 时间：2012-05-04T13:13:52.230
> 
> 标签：c#, .net, wcf, windows-services, console-application

所以我有一个控制台应用程序，它等待客户端按回车键，然后将文件从硬编码位置复制到另一个位置。作为一个控制台应用程序，这很好用，但是当我将它转换为 Windows 服务时，当客户端按 Enter 键时，我收到以下错误代码：

```
"Could not connect to http://localhost:8080/myService. TCP error code 10061: 
 No connection could be made because the target machine actively refused it 127.0.0.1:8080." 
```

我已检查以确保端口已打开并且防火墙没有阻止它。一切似乎都很清楚，所以我对发生的事情感到困惑。下面我将发布我的客户端和主机代码，请查看它并让我知道我是否遗漏了一些东西，以便我可以继续前进。

这是主机

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.ServiceProcess;
using System.ServiceModel;
using myServiceLib;

namespace myServiceHost
{
    class Program : ServiceBase
    {
        static void Main(string[] args)
        {
            ServiceBase.Run(new Program());
        }

        public Program()
        {
             this.ServiceName = "myService";
        }

        protected override void OnStart(string[] args)
        {
            base.OnStart(args);

            using (ServiceHost serviceHost = new ServiceHost(typeof(myService)))
            {
                serviceHost.Open();
            }
        }
    }
} 
```

这是客户端

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.ServiceModel;

namespace myServiceClient
{
    class Program
    {
        static void Main(string[] args)

        Console.WriteLine("***** Prepairing to transfer files ***** \n");

        using (FileXferClient myMethod = new FileXferClient())
        {
            Console.WriteLine("Press any key to begin transfer...");
            Console.ReadLine();
            string fileName = "test.txt";
            string sourcePath = @"C:\TestFromC";
            string targetPath = @"C:\TestFromC\Test Folder";

            myMethod.FileXfer(fileName, sourcePath, targetPath);

            Console.WriteLine("File transfer is complete!");
        }
            Console.ReadLine();
        }
    }
} 
```

myServiceLib（这个在逻辑库中）

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.ServiceModel;

namespace myServiceLib
{
    public class myService : IFileXfer
    {
        public myService()
        {
            Console.WriteLine("Awaiting Files...");
        }
        public void FileXfer(string fileName, string sourcePath, string targetPath)
        {
            string passFileName = fileName;
            string passSourcePath = sourcePath;
            string passTargetPath = targetPath;

            string sourceFile = System.IO.Path.Combine(sourcePath, fileName);
            string destFile = System.IO.Path.Combine(targetPath, fileName);

            if (!System.IO.Directory.Exists(targetPath))
            {
                System.IO.Directory.CreateDirectory(targetPath);
            }

            System.IO.File.Copy(sourcePath, destFile, true);

            if (System.IO.Directory.Exists(sourcePath))
            {
                string[] files = System.IO.Directory.GetFiles(sourcePath);

                foreach (string s in files)
                {
                    fileName = System.IO.Path.GetFileName(s);
                    destFile = System.IO.Path.Combine(targetPath, fileName);
                    System.IO.File.Copy(s, destFile, true);
                }
            }
            else
            {
                Console.WriteLine("Source path does not exist!");
            }

            Console.WriteLine("Press any key to exit.");
            Console.ReadKey();
        }
    }
}

using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.ServiceModel;

namespace myServiceLib 
{
    [ServiceContract(Namespace = "http://Intertech.com")]
    public interface IFileXfer
    {
        //Transfer files from one the target machine to the destination location
        [OperationContract]
        void FileXfer(string fileName, string sourcePath, string targetPath);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T14:49:40.327

您`ServiceHost`在启动后立即关闭它：

```
 protected override void OnStart(string[] args)
    {
        base.OnStart(args);

        using (ServiceHost serviceHost = new ServiceHost(typeof(myService)))
        {
            serviceHost.Open();
        }
    } 
```

因为它在一个语句中，所以它会在你的方法返回之前`using`被释放（相当于调用`Close`） 。`OnStart`

相反，`serviceHost`在类中创建一个字段`Program`，然后有：

```
 protected override void OnStart(string[] args)
    {
        base.OnStart(args);

        serviceHost = new ServiceHost(typeof(myService));
        serviceHost.Open();
    } 
```

和

```
 protected override void OnStop()
    {
        serviceHost.Close();

        base.OnStop();
    } 
```

# html - 如何通过网络浏览器检测 iPad 是否在辅助功能模式下运行？

> ID：10449563
> 
> 赞同：0
> 
> 时间：2012-05-04T13:14:01.540
> 
> 标签：html, ipad, accessibility

如果 iPad 上的用户在可访问性模式下运行，我想使用 JavaScript/PHP/HTML 进行检测。它必须在浏览器中检测到这一点。

如果它处于可访问性模式，我想为 iPad 提供一个为屏幕阅读器准备的不同 HTML 页面。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T23:30:36.647

我自己对 HTML5 了解不多，但幸运的是，我刚刚浏览了 PragPub 在线杂志上的一篇文章，其中讨论了[HTML5 的辅助功能](http://pragprog.com/magazines/2010-10/html-accessibility-for-all)。也许那里有一些东西可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T03:03:06.743

简短的回答是：你不这样做，因为这是不可能的。没有 [可靠的] 方法可以检测用户是否在使用屏幕阅读器，无论是通过 javascript 还是通过用户代理标头。（您可以使用一些技巧来猜测 Windows 机器上是否存在屏幕阅读器，但我不知道 iPad/iOS 有任何对应物。）

更长的答案是：您不这样做，因为您无法对用户的能力或残障做出任何有意义的假设：相反，尝试提供一个已经尽可能可访问的页面，如果有必要，并且作为最后一招，将指向后备内容的链接放在页面本身上。HTML5 的可访问性功能使页面既具有视觉吸引力，又具有交互性*和*屏幕阅读器友好性成为可能。

举一个你不能做出假设的例子，用户使用 VoiceOver 可能不是因为他们是盲人，而是因为他们想用它来获得键盘导航。或者他们可能视力低下，因此需要屏幕阅读器的帮助，但仍想查看整体布局、图形、图表等。

就其价值而言，多年前为残障用户提供纯文本后备页面有点普遍。当屏幕阅读器根本无法处理 CSS 和 Javascript 时，这可能是有道理的，在 WAI-ARIA 属性之前，根本不可能创建既可交互又可访问的页面。这种方法目前非常不受欢迎 - 有关这种方法的一些问题，请参阅[WebAIM 上的这篇文章 - Accessiblity In Mind](http://webaim.org/articles/design/textonly)。虽然本文主要介绍纯文本方法，但其中大部分内容可能适用于任何形式的“可访问性版本”页面。

# javascript - javascript 函数 - 传递给函数的变量适用于 IE，但不适用于 Firefox

> ID：10449565
> 
> 赞同：0
> 
> 时间：2012-05-04T13:14:06.257
> 
> 标签：javascript

下面是一个 java 脚本函数和调用此函数的单击项目的 html。我可以通过使用警报来判断传递给函数的四个值在使用 firefox 时未定义，但在使用 IE 时有效。如果有人发现错误以及如何正确传递这些值，请告诉我。谢谢你。

```
 function LoadChild(lnEntityID, lnEntityCat, FullExpand, EquipID) {

            document.getElementById('dropTypes').disabled = false;
            document.getElementById('dropTypes').style.background = "white";
            DescStatus = 0;

            alert('lnEntityCat : ' + lnEntityCat);
            if (lnEntityCat == 0) {

                alert('First if is hit');
                PageMethods.LoadChild(lnEntityID, lnEntityCat, GLOBALEQUIPID, FullExpand, 0, 0, 1, LoadChildCallback);

            }
            else if (document.getElementById('img' + lnEntityID + lnEntityCat).canExpand == "true") {
                if (document.getElementById('div' + lnEntityID + lnEntityCat).style.display == 'none') {
                    document.getElementById('div' + lnEntityID + lnEntityCat).style.display = 'block';
                    document.getElementById('img' + lnEntityID + lnEntityCat).src = "../images/minus.gif"

                    PageMethods.LoadChild(lnEntityID, lnEntityCat, GLOBALEQUIPID, FullExpand, 0, 0, 1, LoadChildCallback);

                }
                else {
                    document.getElementById('div' + lnEntityID + lnEntityCat).style.display = 'none';
                    document.getElementById('img' + lnEntityID + lnEntityCat).src = "../images/plus.gif"
                }
            }
        } 
```

这是由服务器端代码生成的动态 html，该代码生成单击时调用 loadChild 的项目

```
<img canExpand="true" style="cursor:hand" id="img72635" src="../images/plus.gif" EntityID="726" EntityCat="35" onclick="LoadChild(this.EntityID, this.EntityCat, 0, this.lnEquip);"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T13:17:31.593

您依赖元素上的非标准属性被反映为元素对象上的属性。你不能可靠地，嗯，依赖它；您需要`getAttribute`改用：

```
onclick="LoadChild(this.getAttribute('EntityID'), this.getAttribute('EntityCat'), 0, this.getAttribute('lnEquip'));"> 
```

（不太确定`lnEquip`来自哪里，我在元素的属性中看不到它；如果您将它作为扩展添加到其他地方，`getAttribute`则从该特定的调用中删除该调用。）

* * *

请注意，使用非标准属性意味着您的 HTML 不会[验证](http://validator.w3.org). [现在，您可以通过在这些属性前面加上HTML5 规范](http://www.w3.org/TR/html5/global-attributes.html#embedding-custom-non-visible-data-with-the-data-attributes)`data-`中描述的前缀，以符合要求的方式执行此操作。虽然这在 HTML4 和更早版本中仍然无效，但它适用于所有浏览器，并且从 HTML5 开始有效。

# javascript - 如何使用 TinyMCE 和 Internet Explorer 8 解决“需要对象”错误消息

> ID：10449568
> 
> 赞同：4
> 
> 时间：2012-05-04T13:14:31.107
> 
> 标签：javascript, jquery, internet-explorer-8, tinymce

我正在使用带有 jQ​​uery 插件的 TinyMCE 3.5。

我正在使用未指定模式的 tinyMCE.init() 方法，然后将编辑器附加到我的元素：

```
tinyMCE.execCommand('mceToggleEditor',false,jQuery(this).attr('id')); 
```

编辑器在 Internet Explorer 8 中成功加载，但抛出“需要对象”错误

错误从第 22 行的 ForceBlocks.js 抛出，如下所示：

```
21 while (node != rootNode) {
22   if (blockElements[node.nodeName])
23     return;
24 
25   node = node.parentNode;
26 } 
```

在 firefox、chrome 或 safari 中不会出现错误。

tinyMCE.execCommand 方法的上下文是：

```
ADMIN = {
  triggerTextArea: function (event) {

    currentTarget = event.currentTarget;

    if(jQuery(currentTarget).hasClass('ajaxform'))
    {
      textareas = jQuery(this).find('.question-text-editor textarea');
      addTextArea = true;
    } else {
      textareas = jQuery(this).closest('.question-wrapper').find('.question-text-editor textarea');    
      addTextArea = (jQuery(this).is(':checked') && jQuery(this).val() == 'html');
    }

    if(addTextArea == true)
    {
      textareas.each(function() {
          console.log(jQuery(this).attr('id'));
          tinyMCE.execCommand('mceToggleEditor',false,jQuery(this).attr('id'));

        });

    } else {
      textareas.each(function() {
        editorId = jQuery(this).attr('id');
        tinymce.get(editorId).hide(); 
      });

    }
  }
}

  if(addTextArea == true)
  {
    textareas.each(function() {
        console.log(jQuery(this).attr('id'));
        tinyMCE.execCommand('mceToggleEditor',false,jQuery(this).attr('id'));

      });

  } else {
    textareas.each(function() {
      editorId = jQuery(this).attr('id');
      tinymce.get(editorId).hide(); 
    });

  }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T19:54:36.680

`forced_root_block`包含在[相关问题](https://stackoverflow.com/questions/11037537/forced-root-block-option-in-tinymce)中。对于 IE，如果在 execCommand 加载事件之后编辑器不立即可用，则需要[轮询文档。](https://stackoverflow.com/questions/9223467/)

# javascript - 只能选中一个复选框

> ID：10449579
> 
> 赞同：1
> 
> 时间：2012-05-04T13:15:27.690
> 
> 标签：javascript, jquery, html, jquery-mobile

我正在用 jquery mobile 构建一个移动 webapp。现在我想做两件事。一件事是只能选中一个复选框。另一件事是，当出现另一个复选框时，我不想修改我的 javascript。

我的html

```
<input type="checkbox" name="checkbox-zaal1" id="checkbox-1" onClick="CountChecks('checkbox-1')"/>
                    <label for="checkbox-1">Zaal 1</label>

                    <input type="checkbox" name="checkbox-zaal2" id="checkbox-2" onClick="CountChecks('checkbox-2')"/>
                      <label for="checkbox-2">Zaal 2</label>

                    <input type="checkbox" name="checkbox-zaal3" id="checkbox-3" onClick="CountChecks('checkbox-3')"/>
                    <label for="checkbox-3">Zaal 3</label> 
```

还有我的 javascript

```
function CountChecks(which) {
        var maxchecked = 1;
        var count = 0;
        for (i=0;i<=3;i++){
            if(eval('document.getElementById("checkbox-"+ i).checked == true')) { count++; }
        }
        if(count > maxchecked) {
            eval('document.getElementById("' + which + '").checked = false');
            alert('Sorry je kan enkel maar 1 meeting room reserveren');
        }
    } 
```

所以你可以在我的 javascript 中看到。我想在我的页面上的数量关闭复选框中更改 for 循环中的 3。我的第一个 eval 函数也有问题。但我无法弄清楚。

你可以帮帮我吗 ？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-04T13:17:44.667

使用单选按钮而不是复选框，并为它们提供相同的名称。然后根本不使用javascript。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T13:20:41.383

使用具有相同名称属性的单选按钮

[http://www.w3schools.com/jsref/dom_obj_radio.asp](http://www.w3schools.com/jsref/dom_obj_radio.asp)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T13:22:18.917

您在工作中使用了错误的东西，使用单选按钮，这是您在组中使用它们的方式：

```
<input type="radio" name="group1" value="Zaal1"> Zaal 1<br>
<input type="radio" name="group1" value="Zaal2"> Zaal 2<br>
<input type="radio" name="group1" value="Zaal3"> Zaal 3 
```

希望这会有所帮助。

# java - 如何将欧元符号编码为 android XML 文件中的 strings.xml

> ID：10449582
> 
> 赞同：5
> 
> 时间：2012-05-04T13:15:35.317
> 
> 标签：java, android, xml

我想，这很容易被发现。但是，谷歌给我的结果很糟糕。请问，有谁知道如何将欧元符号写入 strings.xml 值？我仍然得到一个例外，即不允许这样的值。谢谢。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-04T13:17:28.500

使用 XML/HTML € 实体：

```
&#8364; 
```

# android - Titanium：适用于 Android 的 ImageView，可水平和垂直滚动

> ID：10449587
> 
> 赞同：0
> 
> 时间：2012-05-04T13:15:50.373
> 
> 标签：android, scroll, imageview, titanium, scrollview

通过使用 Titanium Mobile 开发适用于 Android 的应用程序，我遇到了以下问题：

我有一个`ImageView`可以填满整个屏幕的。这`ImageView`是一张比`ImageView`;更大的图片。您需要滚动查看图片的所有元素。

如何在 Android`ImageView`上创建一个`Titanium`可滚动的（垂直和水平）。我试图通过放入`ImageView`a来解决这个问题`ScrollView`，但`ScrollView`Android 上的 a 只能垂直或水平滚动。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T13:21:53.873

我相信你唯一的选择是网络视图。没有其他东西可以滚动两个方向。

# opencv - OpenCV 的 undistortPoints 是否也可以纠正它们？

> ID：10449588
> 
> 赞同：2
> 
> 时间：2012-05-04T13:15:57.437
> 
> 标签：opencv, calibration

我试图通过使用带有两个摄像头的 OpenCV 2.3.1 来确定两个对象之间的距离，但无法计算对象的 objectPoints（OCV 2.3.1、MSVC++、Windows 7）。我认为这是因为图像点在计算视差之前没有被纠正。

**一、我首先做什么**

**步骤 1\. 自行校准每台相机**

```
int numSquares = numCornersHor * numCornersVer;
Size board_sz = Size(numCornersHor, numCornersVer);

Mat cameraMatrix = Mat(3, 3, CV_32FC1);
Mat distCoeffs;

vector<Mat> rvecs, tvecs;

cameraMatrix.ptr<float>(0)[0] = 1;
cameraMatrix.ptr<float>(1)[1] = 1;

calibrateCamera(object_points, 
       image_points, 
       image.size(), 
       cameraMatrix, distCoeffs, 
       rvecs, tvecs); 
```

**步骤 2\. 一起校准相机**

```
int numCornersHor = 4;
int numCornersVer = 3;
const float squareSize = 1.75;

Size imageSize = Size(numCornersHor, numCornersVer);
int numSquares = numCornersHor * numCornersVer;

for(int i = 0; i < pairs; i++ )
{
for( int j = 0; j < imageSize.height; j++ )
{
    for( int k = 0; k < imageSize.width; k++ )
    {
                    objectPoints[i].push_back(Point3f(j*squareSize, k*squareSize, 0));
    }
}
}

Mat R, T, E, F;

rms = stereoCalibrate(  objectPoints, 
                          imagePoints[0],   imagePoints[1],
        cameraMatrix[0],    distCoeffs[0],
        cameraMatrix[1],    distCoeffs[1],
        imageSize, 
        R,  T,  E,  F,
        TermCriteria(CV_TERMCRIT_ITER+CV_TERMCRIT_EPS, 100, 1e-5),
        CV_CALIB_FIX_ASPECT_RATIO +
        CV_CALIB_ZERO_TANGENT_DIST +
        CV_CALIB_SAME_FOCAL_LENGTH +
        CV_CALIB_RATIONAL_MODEL +
        CV_CALIB_FIX_K3 +   CV_CALIB_FIX_K4 +   CV_CALIB_FIX_K5
        ); 
```

**步骤 3\. 创建整改数据**

```
 stereoRectify(
        cameraMatrix[0],    cameraMatrix[1], 
        distCoeffs[0],  distCoeffs[1],
                  imageSize, 
        R, T, 
        RC1, RC2,  //RC1: Rotation matrix Camera 1
        PC1, PC2, 
        Q,
            CALIB_ZERO_DISPARITY, 
        1,  
        imageSize); 
```

**二、我相信什么**

目标：我正在尝试对来自相机 1 的图像和来自相机 2 的图像中一个物体的图像点进行不失真和校正（我执行此过程两次：一次是在粘土鸽子在发射器上时，一次是在粘土鸽子之前的一帧解体）

方法：我相信我不需要使用 initUndistortRectifyMap 然后 Remap 而是可以只使用 undistortPoints。我认为 undistortPoints 不扭曲兴趣点并纠正它们。

**三、我要做的第二件事**

如果我的信念不正确，您可以忽略这一点。

```
undistortPoints(launcherC1, launcherC1Undistorted, cameraMatrixC1, distCoeffsC1, R1, P1);   
undistortPoints(launcherC2, launcherC2Undistorted, cameraMatrixC2, distCoeffsC2, R2, P2);   

undistortPoints(clayPigeonC1, clayPigeonC1Undistorted, cameraMatrix1, distCoeffs1, R1, P1);
undistortPoints(clayPigeonC2, clayPigeonC2Undistorted, cameraMatrix2, distCoeffs2, R2, P2); 
```

undistortPoints 的输入和输出数组（launcherC1、launcherC1Undistorted、...clayPigeonC2、clayPigeonC2Undistorted）是 Point2f 对象的向量。

**四。信仰与现实的差异**

运行所有 undistortPoints 函数后，

1.  launcherC1Undistorted.y 不等于 launcherC2Undistorted.y
2.  ClayPigeonC1Undistorted.y 不等于 ClayPigeonC2Undistorted.y。

它们的差异高达 30%。

**五、问题**

1.  Q1 除了不扭曲它们之外， undistortPoints 是否还可以校正点？
2.  Q1.1_是的。修正后 y 的值是否应该相等？
3.  Q1.1.1_yes 你能从代码中看出我做错了什么，所以他们没有吗？
4.  Q1_no 如果 undistortPoints 没有纠正这些点，那么我该如何纠正它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-23T15:01:50.123

1.  `undistortPoints`无法校正点，因为您从未为其提供校正所需的参数 - 那是相机与其他相机的姿势关系。
2.  当您以正确的方式进行校正时，`stereoCalibrate`+ `initUndistortRectifyMap`+ `remap`，然后是 - 对应点的 y 值将相同。

# ios - 在drawRect中用两种不同的字体绘制一个NSString？

> ID：10449590
> 
> 赞同：1
> 
> 时间：2012-05-04T13:16:03.553
> 
> 标签：ios, nsattributedstring

我有一个字符串作为实例变量，我想在部分中用两种不同的字体绘制它。具体来说，它是：xyz( *abc* )。

即：我想用普通字体绘制'xyz（）'部分，用斜体绘制' *abc* '。

这个字符串是一个属性，视图是通用的。仅在特定情况下它应该显示这样的字符串。

我尝试了 NSAttributedString 及其 Mutable 版本，但它似乎在 iOS 上并不完全受支持。

无法获取属性的键，我该怎么办？

无论如何在这里使用 NSAttributedString 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T14:11:42.417

我会将 UIView 子类化以使用核心文本进行绘制并将其传递给自定义的 NSAttributed 字符串，

在我的头顶上是这样的：

```
CustomLabel.h
#import <CoreText/CoreText.h>

@interface CustomLabel : UIView
@property NSAttributedString *attributedText;
@end

CustomLabel.m

@interface SMAttributedTextView ()
{
    @protected
    CTFramesetterRef _framesetter;
}

@implementation SMAttributedTextView

@synthesize attributedString = _attributedString;
    //need dealloc even with ARC method to release framesetter if it still exists
- (void)dealloc{
    if (_framesetter) CFRelease(_framesetter);
}

- (void)setAttributedString:(NSAttributedString *)aString
{
    _attributedString = aString;
    [self setNeedsDisplay];//force redraw
}

- (void)drawRect:(CGRect)rect
{
    CGContextRef context = UIGraphicsGetCurrentContext();

    //Context Drawing Setup
    CGContextSetTextMatrix(context, CGAffineTransformIdentity);
    CGContextTranslateCTM(context, 0, self.frame.size.height);
    CGContextScaleCTM(context, 1.0, -1.0);
    CGContextSetShouldSubpixelPositionFonts(context, YES);
    CGContextSetShouldSubpixelQuantizeFonts(context, YES);
    CGContextSetShouldAntialias(context, YES);

    CGMutablePathRef path = CGPathCreateMutable();
    CGPathAddRect(path, NULL, rect);

    CTFramesetterRef framesetter = [self framesetter];
    CTFrameRef frame = CTFramesetterCreateFrame(framesetter, CFRangeMake(0, [_attributedText length]), path, NULL);
    CTFrameDraw(frame, context);
    CFRelease(frame);
    CFRelease(path);

    UIGraphicsPushContext(context);
}

@end 
```

所以在此之外，您将调用属性字符串的设置器，它应该重绘。在将其发送到视图之前，您还可以将自定义特征应用于 NSAttributd 字符串的范围。您可以使用正则表达式或只是一般的字符串搜索来找到它。

IE

```
NSMutableAttributedString *aString = [[NSMutableAttributedString alloc] initWithString:@"xyz(abc)"];
NSRange rangeOfABC = NSMakeRange(4,3);
//make style dictionary **see core text docs - I can't remeber off the top of my head sorry
[aString addAttributes:newAttrs range:rangeOfABC];

[customlabel setAttributedString:aString]; 
```

代码方面可能会略有不同 - 我在我的非工作机器上抱歉，所以无法 100% 验证它，

同样从记忆中，这就是您如何将斜体特征应用于属性字符串的当前字体

```
NSString *targetString = @"xyc(abc)";
NSMutableAttributedString *attString = [[NSMutableAttributedString alloc] initWithString:targetString];
NSRange entireRange = NSMakeRange(0, (targetString.length -1));
NSDictionary *attDict = [attString attributesAtIndex:entireRange.location effectiveRange:&entireRange];
CTFontRef curFontRef = (__bridge CTFontRef)[attDict objectForKey:@"NSFont"];
CTFontSymbolicTraits traits = CTFontGetSymbolicTraits(curFontRef);
BOOL isItalic = ((traits & kCTFontItalicTrait) == kCTFontItalicTrait);

NSMutableDictionary *newAttrs = [NSMutableDictionary dictionary];
CTFontRef italicRef = CTFontCreateCopyWithSymbolicTraits(curFontRef,
                                                         CTFontGetSize(curFontRef),
                                                         NULL,
                                                         kCTFontItalicTrait,
                                                         kCTFontItalicTrait);

if (italicRef)
{
    newAttrs = [NSDictionary dictionaryWithObjectsAndKeys:(__bridge id)italicRef, kCTFontAttributeName,nil];
    [attString addAttributes:newAttrs range:NSMakeRange(4,3)];//or whatever range you want
    CFRelease(italicRef);
} 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T13:49:28.640

我认为你需要使用两个不同的字符串/标签来达到这个效果。据我所知，仅使用标签或其他类似元素是不可能的。

我还在类似的情况下使用了 webviews，并使用 html/css 来显示具有不同样式的文本的一部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T13:58:58.347

您必须提供自己的控件来绘制`NSAttributedString`, like [`TTTAttributedLabel`](https://github.com/mattt/TTTAttributedLabel)。

# google-app-engine - 我无法使用 GQL 查询呈现 jinja2 模板

> ID：10449597
> 
> 赞同：-1
> 
> 时间：2012-05-04T13:17:03.400
> 
> 标签：google-app-engine

我正在关注谷歌应用引擎练习，但无法正确呈现 jinja 模板。

以下代码符合我的预期（它允许我使用 GQL 查询中的值呈现模板：

```
def get(self):
    blogpost = db.GqlQuery("SELECT * FROM BlogPosts ORDER BY created ASC")
    self.render('blog.html',blogpost=blogpost) 
```

当我使用 {{post.subject}} 之类的标签时，该代码会呈现我的 blog.html 模板

这段代码不允许我渲染模板：

```
def get(self):
    path = self.request.path[1:]
    post = db.GqlQuery("SELECT * FROM BlogPosts WHERE ID = " + str(path))
    self.render('permalink.html',post=post) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T14:12:50.767

我相信你不能通过这种方式通过 ID 查询。id 是实体键的一部分，因此：

```
SELECT * FROM YourModel where __key__ = KEY('YourModel', <numeric_id>) 
```

这应该会给你想要的结果。

# parameters - PL/SQL 游标使用参数作为列名

> ID：10449599
> 
> 赞同：0
> 
> 时间：2012-05-04T13:17:10.060
> 
> 标签：parameters, plsql, cursor

我正在使用 PL/SQL。我正在向我的程序发送一些参数。这些参数之一应该是列名。最初它是一个 varchar2，但我想在光标中使用它来引用列名。这怎么可能？

这就是我的代码的样子：

```
 PROCEDURE proc_name( x IN VARCHAR2, y IN VARCHAR2 ) IS

      cursor csr IS 
       SELECT * 
       FROM table
       SORT BY x y

     BEGIN 
      for y in csr loop 
        ------
      end loop; 

     END proc_name; 
```

在过去的几天里，我试图对此进行研究，但没有成功。我研究了动态 SQL，这是正确的方向吗？似乎不适合我。

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T15:58:00.077

试试这个：

```
PROCEDURE proc_name( x IN VARCHAR2, y IN VARCHAR2 ) IS

  rc sys_refcursor;

  r_table table%rowtype;

 BEGIN 
  open rc for
   'SELECT * 
    FROM table
    ORDER BY ' || x || ' ' || y;
  loop
    fetch rc into r_table;
    exit when rc%notfound;
    ------
  end loop; 
  close rc;

 END proc_name; 
```

# java - 是什么导致会话 ID 增加

> ID：10449601
> 
> 赞同：1
> 
> 时间：2012-05-04T13:17:26.500
> 
> 标签：java, jsf-2, cdi, jboss-weld, conversation-scope

我正在尝试找出我的 CDI 对话的问题。如果我通过我的应用程序采取一条路线，我有一个有效的页面，但如果我通过另一条路线则不行。我相信这与对话有关，但我不知道是什么。

工作流程是这样发生的：

1.  加载页面 A
2.  打开编辑页面A
3.  至此，一个新的对话开始，ID为1
4.  进行编辑并保存返回我的页面 A
5.  点击页面A上的链接加载页面B
6.  打开编辑页面 B
7.  会话以 ID 2 开始。在此开始时按刷新将启动 ID 为 3 的会话。其他刷新会增加会话 ID。
8.  编辑成功发生

它不工作的工作流程是这样的：工作流程是这样发生的：

1.  加载页面 A
2.  点击页面A上的链接加载页面B
3.  打开编辑页面 B
4.  对话从 ID 1 开始。刷新页面会告诉我，我的对话 ID 仍然是 1。
5.  页面上的各种操作会引发“WELD-000321 找不到要恢复 id 1 的对话”异常。

因此，这两个工作流程之间的区别在于，在工作流程中我进行了成功的编辑，当我在第二个编辑页面上时，我得到了增量对话 ID。不工作的工作流程，对话 ID 始终为 1，但我无能为力！

我想了解的事情是：

1.  如果我有一个 ID 为 1 的对话，做某事然后结束对话，当我开始一个新对话时 - 它的 ID 是什么？1（此对话结束）或 2（下一个未使用的 ID）。
2.  除了对话没有正确结束之外，还有什么想要我看到的递增对话 ID 的吗？据我所知，我正确地结束了我的对话。

希望其中一个问题的答案能够揭示出问题所在。感谢您的任何意见

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T10:07:51.443

从您写的内容看来，对话的开始和传播存在问题。如果没有您描述的问题，用例当然是可以实现的。您可能想在此处发布一些相关代码。

> 如果我有一个 ID 为 1 的对话，做某事然后结束对话，当我开始一个新对话时 - 它的 ID 是什么？1（此对话结束）或 2（下一个未使用的 ID）。

未指定 CDI 创建新 ID 的方式。焊接执行以下操作：

```
public class ConversationIdGenerator implements Callable<String>, Serializable {

    public static final String CONVERSATION_ID_GENERATOR_ATTRIBUTE_NAME = ConversationIdGenerator.class.getName();

    private static final long serialVersionUID = 8489811313900825684L;

    // The next conversation ID
    private final AtomicInteger id;

    /**
     * Creates a new conversation ID generator
     */
    public ConversationIdGenerator() {
        this.id = new AtomicInteger(1);
    }

    public String call() {
        int nextId = id.getAndIncrement();
        return String.valueOf(nextId);
    }

} 
```

> 除了对话没有正确结束之外，还有什么想要我看到的递增对话 ID 的吗？据我所知，我正确地结束了我的对话。

不，您在这里没有任何遗漏。问题很可能出在您的代码中（这是个好消息，因为您可以更改它:-)

# xcode - 如何从不同的视图控制器在一个场景中设置标签文本

> ID：10449606
> 
> 赞同：1
> 
> 时间：2012-05-04T13:17:40.717
> 
> 标签：xcode

我在 24 小时内阅读 Sam 的 Xcode，并且正在练习 segues。我已经使用以下代码开始了一个 segue：
但是我发现我的目标视图中标签中的文本没有被设置。然而，我在我的`NewSceneViewController`.

```
 - (IBAction)startSegue:(id)sender {  
     [self performSegueWithIdentifier:@"toNewScene" sender:sender];     
    }  

 - (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {  
    ViewController *startingViewController;  
    NewSceneViewController *myDestinationViewController;  

    startingViewController=(ViewController *)segue.sourceViewController;  

    myDestinationViewController=(NewSceneViewController *)segue.destinationViewController;  
    myDestinationViewController.myLabel.text=@"HI";
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T19:36:51.273

所以我放弃了我以前的答案......我在玩，发现你实际上可以设置一个 uilabels 文本......得到这个......之后！你展示了一个模态视图控制器。

```
ModalViewController *modalVC = [ModalViewController alloc] initWithNibName:@"ModalViewController" bundle:nil];

modalVC.modalTransitionStyle = UIModalTransitionStyleCoverVertical;

[self presentModalViewController:modalVC animated:YES];

modalVC.someLabel.text = @"what ever text you want..."; 
```

去搞清楚。这可能也可以通过情节提要完成，但需要手动覆盖 `prepareForSegue:`&`performSegueWithIdentifier:`方法。

# java - 从字母数字字符串中提取数字

> ID：10449610
> 
> 赞同：-4
> 
> 时间：2012-05-04T13:17:49.050
> 
> 标签：java

我想从一个字母数字字符串中提取字符串 '265.12' 或 '0.00'，它在 java 中可以具有值 '265.12+' 或 '265.12-' 和 '0.0+' 或 '0.0-' 。

是否可以一次性替换而不是使用 + 和 - 符号的两种替换方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T13:22:10.370

针对您的特定用例的有效实施：

```
String extractNum(String in) {
  final char last = in.charAt(in.length()-1);
  return (last == '+' || last == '-') ? in.substring(0, in.length()-1) : in;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T13:20:12.850

我认为`.replaceAll("\\$ ?(.+) ?[+-]", "$1")`应该做的伎俩。

PS：由@MarkoTopolnik 纠正:)

PS：由@userUnknown重新纠正-'

PS：自己重新编辑过=D

# c++ - 如何获取用户的 TapPoints

> ID：10449613
> 
> 赞同：0
> 
> 时间：2012-05-04T13:17:54.097
> 
> 标签：c++, marmalade, tapjoy

我正在使用 TapJoy 的果酱扩展程序，并使用[此处](http://knowledge.tapjoy.com/integration-8-x/ios/tools-plugins-extensions/airplay-extension)的 SDK 和示例项目。
这里用于获取用户 TapPoints 的函数是：

```
 s3eResult TapjoyGetTapPoints(TapjoyGetTapPointsCallbackFn callbackFn, void* userData) 
```

返回`s3eResult`的类型只显示查询的成功或失败。但是如何获得 int 或任何其他数字类型的实际点数？
我正在使用的是这样的：

```
int TapJoy::GetPoints(){
s3eResult res=TapjoyGetTapPoints((TapjoyGetTapPointsCallbackFn)&TapJoy::GetTapPointsCB, NULL);
return GetTapPointsCB(NULL,NULL);
}
int32 TapJoy::GetTapPointsCB(TapjoyGetTapPointsResult* result, void* userData)
{
int tapPoints = result->m_PointTotal;

sprintf("Points", "`x666666Tap Points: %d", tapPoints);

s3eDebugTracePrintf("GetTapPointsCB called with amount: %d", tapPoints);
cout<<tapPoints<<endl;

return tapPoints;
} 
```

这段代码的问题是我如何得到`TapjoyGetTapPointsResult* result`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T13:56:13.150

所以最后我做对了。`TapjoyGetTapPointsResult* result`是`Tapjoy`请求完成后发送并调用回调函数的结构。所以我可以使用的 TapPoints

```
result->m_PointTotal; 
```

留下问题和答案，以便将来可以帮助其他用户。

# css - 视网膜和非视网膜 ios 应用程序

> ID：10449614
> 
> 赞同：0
> 
> 时间：2012-05-04T13:17:55.837
> 
> 标签：css, retina-display

我的 Retina 显示器有问题。我有一个在非视网膜显示器上运行良好的应用程序。

在我的 CSS 列表中，我将 a 的高度设置`listitem`为`20px`.

**现在，当我在视网膜显示器**上尝试应用程序时，所有项目都显示**为 size 的两倍**。我猜是因为 iPhone 4 的分辨率（`window.innerHeight`例如）仍然`480x320`是即使真正的分辨率应该是`960x640`.

现在**我的问题是**，我需要一个单独的 css 用于视网膜显示器还是可以缩放所有内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T13:32:16.233

作为网络应用程序，您需要使用

```
-webkit-min-device-pixel-ratio:2 
```

因为这是 CSS 媒体查询，可以让您知道它是不是视网膜显示

对于图像上的一个小例子，假设你有：

```
<body class="bkground"> ... </body> 
```

通常你会有类似的东西：

```
.bkground {
  background-image: url(my-awesome-bkg.png);
  -webkit-background-size: 32px 16px;
} 
```

要将其加载到视网膜显示器中，您需要添加：

```
@media all and (-webkit-min-device-pixel-ratio:2) {
  .bkground {
    background-image: url(my-awesome-bkg-hd.png);
  }
} 
```

或使用以下方法将所有图像加载到外部 css 中：

```
<link rel="stylesheet" 
      href="retina.css" 
      media="all and (-webkit-min-device-pixel-ratio:2)" /> 
```

有一些外部服务会自动为你做这件事，看看 Sencha Fellows 为[Sencha.io提供的很棒的服务](http://docs.sencha.com/io/1-0/#!/guide/src)

* * *

Sencha.io 指南文档的链接已更新

> [http://docs.sencha.io/0.3.2/index.html#!/guide](http://docs.sencha.io/0.3.2/index.html#!/guide)

# iis-7.5 - 通过 UI 在文件级别设置的 Ipsecurity 限制未反映在 applicationhost.config 或 web.config

> ID：10449620
> 
> 赞同：3
> 
> 时间：2012-05-04T13:18:07.897
> 
> 标签：iis-7.5

**问题 1：** 我有一个托管在 IIS 7.5 上的 asp.net 4 网站。我有一个文件，它只能从一组 IP 地址访问并且需要匿名访问。

1.  [遵循http://www.iis.net/ConfigReference/system.webServer/security/ipSecurity](http://www.iis.net/ConfigReference/system.webServer/security/ipSecurity)中列出的步骤
2.  启用**IP 和域限制**角色
3.  选择需要应用限制的文件。通过 UI 添加了限制。
4.  重新启动了网络服务器

我假设一个条目像

```
<location path="WEBSITE/FILEPATH">
   <system.webServer>
      <security>
         <ipSecurity allowUnlisted="false">
            <add ipAddress="192.168.100.1" />
            <add ipAddress="169.254.0.0" subnetMask="255.255.0.0" />
         </ipSecurity>
      </security>
   </system.webServer>
</location> 
```

在我的**applicationhost.config**文件中。找不到。

尝试在网站的 web.config 中查找条目。也不在那里。

**问题：** IIS 管理器将这些信息保存在哪里？

**问题 2：****`<location>`**我尝试在我的 web.config 文件中添加上述xlm。尝试通过浏览器访问该文件并获得 500 响应代码。我尝试通过 IIS 管理器访问 IP 和域限制模块，但出现错误提示

```
This configuration section cannot be used at this path. 
This level happens when the section is locked at a parent level.
Locking is either by default(overrideModeDefault="Deny") 
or set explicitly by a location tab with overrrideMode="Deny" 
or the legacy allowOverride="false" 
```

经过一番谷歌搜索后，我打开 applicationHost.config 并将 ipSecurity 标签的覆盖行为更改为

```
<sectionGroup name="system.webServer">
<!-- other stuff here removed for brevity -->
<section name="ipSecurity" overrideModeDefault="Allow" />
</sectionGroup> 
```

这样做后，我得到了同样的错误。出于纯粹的沮丧和绝望，我也这样做

```
<location path="" overrrideMode="Allow">
<system.webServer>
<modules>
<add name="IpRestrictionModule" lockItem="false"/>
</modules>
</system.webServer>
</location> 
```

我确定我错过了一些非常简单的东西。

我希望我能够清楚地提出我的问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T13:23:13.237

据我所知，这些设置只能在文件夹级别配置，而不是在文件级别。在 IIS 管理管理单元中，没有选择文件的选项，在选择此选项之前，只能选择文件夹和网站。

编辑：我已经找到了你所做的并且实际上可以做到这一点（令我惊讶的是，配置管理器甚至可以在子文件夹中的 web.config 文件中创建元素）。

配置存储在 C:\windows\system32\inetsrv\config 的 ApplicationHost.config 中：

```
<location path="apixaban.de/test/test.aspx">
    <system.webServer>
        <security>
            <ipSecurity>
                <add ipAddress="172.100.16.11" allowed="true" />
            </ipSecurity>
        </security>
    </system.webServer>
</location> 
```

注意：这是“配置”节点的直接子节点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-11T11:22:23.020

尝试在 Notepad 或 wordpad 中打开文件，而不是在 64 位操作系统上使用 Notepad++ 或 Editplus。如果您在 Notepad++ 或 Editplus 中打开文件，则不会反映通过 IIS UI 所做的更改。还有其他与在 Notepad++ 中编辑和查看文件有关的其他问题。 [http://www.cosnetics.co.uk/articles/cannot-manually-edit-applicationhost.config/](http://www.cosnetics.co.uk/articles/cannot-manually-edit-applicationhost.config/)

# kaminari - 如何使用 Kaminari 获取页数

> ID：10449627
> 
> 赞同：19
> 
> 时间：2012-05-04T13:18:43.833
> 
> 标签：kaminari

我正在遍历大量模型对象，并且出于性能/内存原因需要分页。

我想做这样的事情：

```
for i in 1..Person.num_pages
  Person.page(i).each do
    # work
  end
end 
```

显然我可以得到计数并自己做数学，但是有没有相当于 num_pages 的？或者有没有更优雅的方式来做到这一点？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-06-16T19:14:17.777

### 使用`total_pages`.

是的，您可以使用它`total_pages`来检索模型中的总页数。

例如：

```
@blog_entries = Blog.all.page(1).per(20)
puts "total pages: #{@blog_entries.total_pages}" 
```

### 版本 < 0.14.0

在 0.14.0 版本之前，调用该方法`num_pages`而不是`total_pages`.

# magento - Magento 将运费税添加到税收明细和总计中

> ID：10449629
> 
> 赞同：6
> 
> 时间：2012-05-04T13:19:00.097
> 
> 标签：magento, e-commerce

我正在使用 Magento，但显示的总数有问题。

目前我有这个：

```
Subtotal: £10.00
Shipping & Handling: £5.00
Tax (at the moment just using 20% of Subtotal) (20%):£2.00
Grand Total: £17.00 
```

所以它应该看起来像：

```
Subtotal: £10.00
Shipping & Handling: £5.00
Tax (need it to be 20% of subtotal AND 20% of shipping & Handling) (20%):£3.00
Grand Total: £18.00 
```

如您所见，税款已从 2.00 英镑变为 3.00 英镑，因为我需要它来收取 20% 的运费和手续费以及 20% 的小计费？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-05T16:03:19.597

转到系统 -> 配置 -> 销售 -> 税收 -> 税收类别，然后将`Tax Class for Shipping`下拉列表更改为`Shipping`并重新检查您的总计。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-05T16:09:25.753

快速而肮脏的方法是覆盖 cart/totals.phtml 模板并`$this->getTotals()`从总计块中使用并手动显示您想要的总计。

如果您想要一种更清洁、更正确的方式来执行此操作，那么 tax 文件夹下的模板将控制这些内容的呈现方式。Tax 具体有两个使用模板的块，一个用于购物车，一个用于结帐。我不记得他们的确切名字。如果您想将此功能添加到块中，请覆盖这两个块。如果您希望在模板中执行此操作，请记住您有权访问将在模板时呈现页面的所有块。您可以说`Mage::app()->getLayout()->getBlock('block.name');`我不确定运输总块是否会包含您当时正在寻找的信息，因为它可能是由购物车总块动态创建的。如果是这种情况，那么您将必须首先获取总计块`Mage::app()->getLayout()->getBlock('cart.totals.block.name')`并在其上调用 getTotals()。然后，您可以获得总运费的 20%。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T01:50:56.083

只需将`Tax Class for Shipping`设置设置为`Taxable Goods`. 那么只要您的所有产品都设置在`Taxable Goods`税级中，该税将包括运费税。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-12T12:31:59.693

除了按照seanbreeden 的建议转到`System -> Configuration -> Sales -> Tax -> Tax Classes` 并将`Tax Class for Shipping`下拉菜单更改`Shipping` 为之外，您还应该确保`Tax Rule`在`Shipping` `Tax Class`.

为此，请转到正确的and =`Sales -> Tax -> Manage Tax Rules`并进行过滤。`Customer Tax Class``Product Tax Class``Shipping`

如果找到规则，请一一单击，您将看到应用在`Shipping`. 如果你想关闭运费税，你应该从你找到的`Shipping`所有东西中删除。`Tax Rules`

# c# - 具有延迟加载的 BusinessLogic 中的 NHibernate 会话

> ID：10449634
> 
> 赞同：0
> 
> 时间：2012-05-04T13:19:18.783
> 
> 标签：c#, nhibernate, session, n-tier-architecture, business-logic

我目前正在开发一个中型应用程序。该应用程序将具有具有不同表示层的 n 层结构。其中一部分将是一个 Web 应用程序，但很可能会有其他部分处理，例如传感器通信（目前尚不清楚如何开发它）。

我的问题是是否可以在业务逻辑层中直接使用 NHibernate，并让业务逻辑在延迟加载时为上层和水平层/部分提供请求的数据。

是否可以在业务层初始化会话并且仍然具有延迟加载？在那种情况下，会话将如何处理？是否可以将请求的数据与会话一起包装，以便只要对象处于活动状态，会话就处于活动状态？

祝你今天过得愉快。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T09:17:54.150

不确定我是否完全理解您的问题，但从我收集的信息来看，您问的是当您的客户端不是 Web 客户端时是否可以使用延迟加载。
答案是肯定的；`Session`初始化 的方式或位置无关紧要。

一些人（包括我自己）认为直接在业务层中使用 nHib 是最佳实践。

关于您关于“将请求的数据与会话包装在一起，以便只要对象处于活动状态，会话就处于活动状态”的问题 -
我不确定您的意思，但如果您的意思是与会话一起发送您的模型类，那么您的客户可以懒惰地加载他们的属性 - 我强烈建议不要去那里。
一个经验法则是，你**只**给客户它需要的东西，仅此而已。
（Ayende对此进行了[详细说明](http://ayende.com/blog/4011/the-stripper-pattern)。）
因此，我认为您应该始终使用 DTO 与您的客户进行交流。

我设置的方式是：
客户端从服务器请求数据 => 服务器加载对象（但不初始化延迟加载的属性），填充 DTO 并将其返回给客户端。

客户端请求延迟加载属性 => 服务器加载对象（使用 nHib 的二级[缓存](http://nhibernate.hibernatingrhinos.com/28/first-and-second-level-caching-in-nhibernate)或其他缓存机制），加载请求的属性并将 DTO 返回给客户端。

# c# - 使用未分配的局部变量 - if 语句

> ID：10449635
> 
> 赞同：3
> 
> 时间：2012-05-04T13:19:19.480
> 
> 标签：c#, unassigned-variable

我正在执行以下代码块，编译器抱怨未分配的局部变量，并且可以使用一些帮助来确定发生了什么。

```
while (rsData.Read())
{
    if (rsData["TYPE"] != DBNull.Value)
        strType = rsData["TYPE"].ToString().Trim();

    if (strType == "01")
    {
        if (rsData["Text"] != DBNull.Value)
            strwho = rsData["Text"].ToString();

        if ((strwho.Length < 10 || (strwho.IndexOf("NULL") > 1)))
            strwho = "";
    }
    else if (strType == "07")
    {
        if (rsData["Text"] != DBNull.Value)
            strmetades = rsData["Text"].ToString();

        if ((strmetades.Length < 10 || (strmetades.IndexOf("NULL") > 1)))
            strmetades = "";
    } 
```

它抱怨所有的 'if (strType == "01")' 行，我不确定发生了什么。我曾想过为此使用开关，但这似乎也遇到了同样的问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-04T13:20:57.440

声明字符串 strType 时，您必须分配一个值，例如

```
string strType = null; 
```

更多详细信息：[编译器错误 CS0165](http://msdn.microsoft.com/en-us/library/4y7h161d%28v=vs.80%29.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T13:26:46.340

这样做的原因是您在使用*之前*`strType`没有将变量分配给*任何*值。根据 C# 编译器规则，您**必须先将**变量分配给**任何**值，然后才能开始以任何方式使用它。

 *****换句话说，在*条件*之前分配一个空字符串就足够了，例如狗屎：

```
strType = srting.Empty; //at least one value is already assigned!

while (rsData.Read())
{
    .... //your code here
} 
```

为什么这个？避免歧义和不清晰的代码表示。

更多关于这一点，直接阅读 Eric Lippert 的一篇小文章：[为什么局部变量肯定在不可访问的语句中赋值？](http://blogs.msdn.com/b/ericlippert/archive/2012/03/05/why-are-local-variables-definitely-assigned-in-unreachable-statements.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T13:21:03.983

在使用局部变量之前，您应该为其分配一些值。您可以在声明它的地方初始化它（在 while 块之前）：

```
var strType = ""; // or null 
```

或者（如果您不希望 strType 记住之前迭代的值），请确保它在 reader 包含数据或存在 DbNull 时都获得初始值

```
strType = rsData["TYPE"] == DBNull.Value ? "" : rsData["TYPE"].ToString().Trim(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T13:21:38.997

它抱怨是因为在 If 语句时变量没有任何值。

做就是了`string strType = "";`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T13:23:07.993

此错误意味着您之前没有声明该变量。只需在 while 循环的开头初始化这些变量。

例子：

```
while (rsData.Read())
{
    string strType = string.Empty;
    string strwho = string.Empty; // Do this if you have the same error for strwho
    string strmetades = string.Empty; // Do this if you have the same error for strmetades

    // Your other code comes here
} 
```

如果您对 IF 语句的排序稍有不同，您甚至可以避免将空值重新分配给变量。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-04T13:33:19.023

很好，使用 String.Empty；

```
string strType=String.Empty; 
```*****

# android - 如何将参数传递给测试项目？

> ID：10449636
> 
> 赞同：0
> 
> 时间：2012-05-04T13:19:28.937
> 
> 标签：android, junit3

我有一个从字母表中随机抽取字符并处理它们的应用程序。我是 JUnit 的新手并尝试使用它。我想通过提供预定义字符并测试它是否正确处理它们来测试应用程序。如何将字符传递给测试项目？

我尝试在测试用例中设置 System.property，例如： System.setProperty("string_array", LETTERS);

并在测试项目中读取它，例如： String z = System.getProperty("string_array");

但这不起作用。

有解决方案，解决方法还是我完全走错了路？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T20:45:42.590

我必须承认我还没有在 Android 上做太多的单元测试。但理论上您不应该更改测试主题（您的项目）中的代码来进行单元测试。使用 JUnit，您可以进行白盒测试，这意味着您不必一次测试整个应用程序，而是测试特定的方法或对象。从 JUnit 中，您可以实例化项目内部类并使用您喜欢的任何数据提供测试方法，这就是您将数据传输到测试对象的方式。

目前我没有给你的代码示例，但你可能想通读[Android 测试基础知识](http://developer.android.com/guide/topics/testing/testing_android.html)，因为它们对常规的 JUnit TestCase 类有一些花哨的附加组件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T08:32:48.857

解决方案是 setActivityIntent。

您可以通过向测试的 Activity 发送意图来设置测试项目，如下所示：

```
public void setUp() throws Exception {
    Intent i = new Intent();
    i.putExtra("testLetterz", LETTERS);
    setActivityIntent(i);
    solo = new Solo(getInstrumentation(), getActivity());
} 
```

然后像这样运行测试：

```
@Smoke
public void testCheckOneWord() throws Exception {
    for(int i = 0; i < 5; i++) {
        int r = -1;
        Movable m;
        do {
            r++;
            m = (Movable) solo.getView(Movable.class, r);
        } while(!(m.getLetter() == LETTERS.charAt(i)));
        int x = m.getPosX();
        int y = m.getPosY();
        solo.drag(x, 10, y, 10+i*Movable.getDropSize(), 1);

    }
    solo.clickOnButton("Check");
    boolean expected = true;
    boolean actual = solo.searchText("2/10");
    assertEquals("The test is not found", expected, actual);
} 
```

在测试的 Activity 中，您读取了意图并使用了返回带有随机字符的字符串的方法，但如果 testLetterz 不为空，则返回 testLetterz。

在此示例中，我将包含字母的视图拖到放置区，然后检查它们是否在单词列表中。

我用过机器人。

# jquery - 在两个数据表之间拖放

> ID：10449637
> 
> 赞同：2
> 
> 时间：2012-05-04T13:19:36.800
> 
> 标签：jquery, datatables

我在我的[ruby](http://www.datatables.net)​​ on rails 项目中使用数据表。数据正在通过 ajax 填充。我想在表之间拖放行。是否有任何插件/黑客可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T13:26:29.570

您在标签中提到了自己的 jquery。所以使用它！

[http://jqueryui.com/demos/droppable/#shopping-cart](http://jqueryui.com/demos/droppable/#shopping-cart)

在回调事件中，您可以更新另一个表

# workspace - 从 TFS 2010 中的 CI 触发器中排除工作文件夹

> ID：10449640
> 
> 赞同：2
> 
> 时间：2012-05-04T13:19:54.013
> 
> 标签：workspace, working-directory

我的解决方案需要来自未包含在解决方案文件夹中的文件夹中的其他文件，因此我在构建定义的工作区选项卡中设置了第二个工作文件夹。

现在这个文件夹的文件被加载并且我的解决方案中的所有链接都很好 - 解决方案构建。

我编写了一个自定义活动，该活动是在构建过程新文件结束时生成的，并将它们检入我上面提到的同一个文件夹（第二个工作文件夹）中。

但是，由自定义活动自动签入的文件会一次又一次地触发整个解决方案......

所以真正的问题是：如何排除在持续集成模式下签入时触发的工作文件夹？隐藏文件夹似乎不是解决方案，因为我需要文件来构建解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T13:30:11.880

显然，您正在进行持续集成构建。使用以结尾的注释将更改提交到 TFS`***NO_CI***`应该可以防止重新触发构建。

您也可以[在此处](https://stackoverflow.com/questions/3829305/what-does-no-ci-stand-for)查看一些背景信息。

# objective-c - 无法连接到 PHP API

> ID：10449644
> 
> 赞同：1
> 
> 时间：2012-05-04T13:20:07.063
> 
> 标签：objective-c, web-services, cocoa, asihttprequest

我正在使用 ASIHTTPRequest 类为我的 iPhone 应用程序创建一些 Web 服务。这是我使用的一些示例代码

```
-(void)startRequest {
    NSURL *url = [NSURL URLWithString:@"www.myURL/iOS/objc.php"];
    //NSURL *url = [NSURL URLWithString:@"http://localhost:8888/API/objc.php"];
    ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];
    [request setDelegate:self];
    [request setPostValue:@"1" forKey:@"getWines"];
    [request startAsynchronous];
} 
```

显然我在这个函数中得到了结果：

```
- (void)requestFinished:(ASIHTTPRequest *)request {  
    NSString *result = request.responseString;
} 
```

当我使用 localhost URL 启动模拟器时

```
NSURL *url = [NSURL URLWithString:@"http://localhost:8888/API/objc.php"]; 
```

我的应用程序运行良好。但是当我

*   使用我的设备启动
*   使用模拟器启动到服务器位置

没发生什么事！我的意思是，永远不会调用 requestFinished ！

如果我尝试使用谷歌浏览器，我会得到一些答案，但是这两个条件都高于一切。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T14:12:06.520

我终于找到了问题所在，这是因为我写了

“www.myURL/iOS/objc.php”

代替

"http://www.myURL/iOS/objc.php",

改变一切！

# linux - 如何使用 Linux 将 VBS 脚本转换为 .EXE？

> ID：10449649
> 
> 赞同：0
> 
> 时间：2012-05-04T13:20:14.400
> 
> 标签：linux, ubuntu, vbscript

我需要使用 Linux (Ubuntu) 将 .VBS 脚本编译成 Windows .EXE 可执行文件

原因是当我在 Linux 上创建用户帐户时，它会为每个用户修改一个 VBS 脚本，然后该脚本会被下载并使用 Windows 转换为 .EXE，这是一个漫长的过程，所以如果我能找到编译它的方法在 Linux 上它会为我节省很多时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T13:21:25.423

[http://www.mono-project.com/VisualBasic.NET_support](http://www.mono-project.com/VisualBasic.NET_support)

这应该完全符合您的要求

# c++ - 无法从 'const char *' 转换为 'std::_String_const_iterator<_Elem,_Traits,_Alloc>

> ID：10449657
> 
> 赞同：0
> 
> 时间：2012-05-04T13:20:45.220
> 
> 标签：c++, visual-studio

我在 MS Visual Studio 2005 上的 Windows 上运行 Openipmp 客户端。尽管根据文档，它仅在 Visual Studio 6 和 MS Visual Studio .NET 上进行了测试。

当我编译 DRMPlugin 时，一段代码给出错误

```
error C2440: '<function-style-cast>' : cannot convert from 'const char *'
to 'std::_String_const_iterator<_Elem,_Traits,_Alloc>'
        with
        [
            _Elem=char,
            _Traits=std::char_traits<char>,
            _Alloc=std::allocator<char>
        ]
        No constructor could take the source type, or constructor overload resolution was    ambiguous 
```

这是代码

```
bool OpenIPMPDOIContentInfoManager::ParseHostIPPort(const std::string& hostURL,
    std::string& hostIP, int& hostPort) {
  const char* colon = strchr(hostURL.data(), ':');
  if (colon == NULL) {
    return false;
  }
  hostIP = std::string(hostURL.begin(), std::string::const_iterator(colon));
  hostPort = atoi(++colon);
  return true;
} 
```

有人可以告诉我代码有什么问题吗？

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T13:26:18.883

```
hostIP = std::string(hostURL.begin(), std::string::const_iterator(colon)); 
```

您不能`std::string::const_iterator`从指向字符的指针创建 a。您不应该尝试将 C 风格的字符串函数`strchr`与 C++ 风格`std::string`混合，因为它们不能很好地混合。使用`std::string::find`定位`:`然后`std::string::substr`创建`hostIP`or 否则，使用`std::find`(algorithm) 将迭代器获取到`:`字符串内部并使用当前的构造函数。

# iphone - 在 Core Data 中建立数千个对象之间关系的最有效方法是什么？

> ID：10449658
> 
> 赞同：1
> 
> 时间：2012-05-04T13:20:47.920
> 
> 标签：iphone, cocoa-touch, core-data

假设我插入了 10.000 个 Book 实体和 10.000 个 Author 实体，并且需要在它们之间设置一对一的关系。这两个实体都有一个名为 bookID 的属性。我这样做：

1.  获取所有书籍，按 bookID 排序
2.  获取所有作者，按 bookID 排序
3.  枚举书籍数组，如果 currentBook.bookID == currentAuthor.bookID，则 currentBook.author = currentAuthor。对所有书籍重复此操作。在刚刚设置关系的每 1000 本书中，保存上下文（否则会消耗更多内存）。

我的问题是内存分配过度。我该如何限制呢？我尝试了 [fetchRequest setBatchSize:], setFetchLimit: 与 setFetchOffset: 结合使用，但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T20:42:35.127

我认为您没有正确地概念化您的数据模型。属性“bookID”实际上不应该在作者实体中。在这两种方式中建立一对一的关系似乎也很奇怪。您更有可能希望从 Author 到 Book 建立一对多的关系（一个作者可以写多本书），甚至可能还有一个相反方向的一对多关系（一本书可能有多个作者，尽管这取决于您）。

# python - Pandas 无法导入 IPython

> ID：10449663
> 
> 赞同：1
> 
> 时间：2012-05-04T13:20:52.517
> 
> 标签：python, windows, pandas, python-2.7, ipython

我在跑步`Windows 7.0`，带着`Python2.7`。我在安装之前安装了熊猫`ipython0.12.1`（稳定）。

当我运行`import pandas`时，`IPython.exe`我收到错误消息：

> 没有名为 pandas 的模块

如果我通过 cmd 从开始菜单调用 IPython，它不会自动在`C:\Python27`pandas 所在的位置运行。相反，它以不同的路径运行`C:\Users\mycomputername\\.ipython`。（ipython 无法检测到机器上存在 pandas 库似乎是不合理的）。

话虽这么说，我还 cd 进入`C:\Python27\dist\ipython-0.12`文件夹以从那里运行，`ipython.exe`其中安装了相应的库。`distribute-0.6.26``pyreadline-1.7.1`

我仍然收到该错误消息。有谁知道安装顺序是否在 Windows7 上是特定的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T14:53:06.143

你有多个版本的 Python 吗？你的 Python 路径一定有什么问题。看看 sys.path：

```
import sys
for x in sys.path: print x 
```

pandas 应该安装在`C:\Python27\Lib\site-packages\pandas`其中的 egg 目录中。您可以通过启动常规 python 解释器并执行

`import pandas print pandas`

不确定 IPython 中可能有什么问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-31T21:14:05.273

我有同样的问题。所以我的原因是因为我有多个版本的 Python。因为，在使用 iPython 之前，我有另一个系统，所以该目录正在调用 Python 上的第一个版本。

**该怎么办：**

1) 检查你是否有正确的 Python 路径

```
import sys  
for x in sys.path: print x 
```

2）如果不删除其他版本，如果你真的不需要很多版本的Python。

这解决了我的问题。

# php - PHP 中的 PHP 语法和逻辑

> ID：10449666
> 
> 赞同：0
> 
> 时间：2012-05-04T13:21:00.013
> 
> 标签：php, wordpress

我正在使用以下工作：

```
<?php if ( is_singular() ) {} else {echo '<h1>';} ?><a href="<?php echo home_url() ?>/" title="<?php bloginfo( 'name' ) ?>" rel="home"><?php bloginfo( 'name' ) ?></a><?php if ( is_singular() ) {} else {echo '</h1>';} ?> 
```

它将站点标题设置为 h1 并将帖子标题设置为 h2，除非在单个帖子页面上，它会删除站点标题 h1 并使帖子标题成为用于 SEO 目的的 h1 标题。

我在我的 WordPress 主题中添加了一个选项页面，该页面也适用于直接设置。我遇到麻烦的地方是 PHP 中的 PHP，因为现在我想让它更高级一点，并添加一个自定义徽标选项。因此，如果我添加：

```
<?php $options = get_option('kittens_options'); echo $options['logo']; ?> 
```

并将其连接到我可以设置徽标的选项页面。然而，我想做的是将这两个代码组合成一个大条件：

```
<?php $options = get_option('kittens_options'); echo $options['logo'];
else {
if ( is_singular() ) {} else {echo '<h1>';}<a href="echo home_url()/" title="bloginfo( 'name' )" rel="home">bloginfo( 'name' )</a>if ( is_singular() ) {} else {echo '</h1>';}
} ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T13:31:40.753

试试这个。

```
 <?php 
$options = get_option('kittens_options');
if (!is_singular() ) {echo '<h1>';}
echo '<a href="'.home_url().'" title="'.bloginfo( 'name' ).'" rel="home">';
    if($options['logo']!="")
        echo $options['logo'];
    else
        echo bloginfo( 'name' );
echo '</a>';
if (!is_singular() ) {echo '</h1>';}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T13:26:48.617

```
<?php
$options = get_option('kittens_options');
echo $options['logo'];
if ( ! is_singular() ) {
    echo '<h1>';
}
echo '<a href="'.home_url().'/" title="'.bloginfo( 'name' ).'" rel="home">'.bloginfo( 'name' ).'</a>';
if ( ! is_singular() ) {
    echo '</h1>';
}
?> 
```

# c# - asp.net mvc 3 linq中的结果集过滤

> ID：10449674
> 
> 赞同：0
> 
> 时间：2012-05-04T13:21:25.437
> 
> 标签：c#, linq

说我有一个控制器的动作，比如

```
 IList <post> p =db.posts.Include("user").ToList();

        if (Request.Form["searchString"] != null)          
        {
            if ((p!=null) && (p.Any()))

            {
                p =(p.Where(a=>a.area==Request 
                .Form["searchString"]).Tolist();                                
            }
       }           
        if (Request.Form["searchString2"] != null)          
        {              
            if ((p!=null) && (p.Any()))

            {

            p=(p.Where(a=>a.city==Request 
          .Form["searchString2"]).Tolist();                                            
            }
        }  
      return View(p); 
```

首先我得到一个结果集（p）。然后我想按一些标准过滤 p。它为条件块内的 ToList() 提供了错误。错误：**帖子中没有 tolist() 的定义**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T13:24:19.527

这将是：

```
 if ((rs!=null) && (rs.Any()))
     {
     rs = (from posts1 in rs where                   
     posts1.area="Dhaka").ToList() ;                             
     } 
```

只要考虑一下，如果你打电话。`ToList()`或者`Any`它将转到数据库（如果您使用的是 ORM）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T13:24:37.967

```
var filteredRS=rs.Where(s=>s.area=="Dhaka").ToList(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T13:25:00.943

您可以直接过滤：

```
List <student> rs = db.students.Where(student => student.area == "Dhaka").ToList(); 
```

或者：

```
List <student> filtered = rs.Where(student => student.area == "Dhaka").ToList(); 
```

# android - 在我的应用程序中集成 facebook 登录

> ID：10449676
> 
> 赞同：0
> 
> 时间：2012-05-04T13:21:34.830
> 
> 标签：android, facebook, integration

我在我的应用程序中使用本机 Facebook API。
我正在尝试使用 facebook id 登录到我的 Android 应用程序，但它显示 facebook 错误`invalid`键。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T13:24:06.793

[http://sean.lyn.ch/2011/07/android-the-facebook-sdk-sso-and-you/](http://sean.lyn.ch/2011/07/android-the-facebook-sdk-sso-and-you/)

这个问题早已在此处（以及 Facebook Android SDK）得到解答，但我将尝试为最终偶然发现此线程的任何人提供完整的解决方案。

我正在使用 Facebook Android SDK 结合 Phonegap 和 Phonegap Facebook 插件进行开发。身份验证步骤工作得很好，直到我从在模拟器上部署到实际设备。我在运行 adb logcat 时看到的失败如下：

```
D/Facebook-authorize( 2194): Login failed: invalid_key
W/System.err( 2194): com.facebook.android.FacebookError: invalid_key 
```

我不知道为什么这在模拟器上有效但在设备上失败了。我怀疑 Facebook 有一项全面政策允许未签名的 .apk 应用程序，因为它们无法分发。

问题是 Facebook 需要有关用于签署应用程序的密钥的信息才能允许授权。我不知道的是，当您使用调试密钥库将构建推送到设备时，eclipse 环境会自动对构建进行签名。Android 文档 - 签名应用程序中提供了有关 Debug 密钥库的详细信息。

为了向 Facebook 提供有关签名的信息，您需要运行 Jay 提供的上述命令（在此重复）：

```
keytool -exportcert -alias androiddebugkey -keystore ~/.android/debug.keystore | openssl sha1 -binary | openssl base64 
```

这会生成一个短字符串（可能包括诸如“=”或“/”之类的字符），用于标识称为证书的签名。一旦你有了这个，你需要把它交给 Facebook。

在 Facebook 的开发者页面上找到您的应用程序（如果您还没有设置，则创建一个新应用程序）。进入应用程序摘要页面后，选择编辑设置，然后选择左侧的移动和设备。在 Android 部分下，您会看到一个 Key Hash 框。将上述命令中的证书字符串粘贴到此框中，然后点击保存。

给它几分钟来传播，你应该准备好了！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T05:29:08.187

作为一个初学者，当生成密钥散列的标准过程从来没有像您希望的那样容易工作时，我感到很困惑。

然而，我确实搜索了很多，发现在这个网站上生成哈希键的这种非常简单的方法：[http ://www.helloandroid.com/tutorials/using-facebook-sdk-android-development-part-1](http://www.helloandroid.com/tutorials/using-facebook-sdk-android-development-part-1)

生成 has 密钥后，您可以按照 facebook 指南在应用程序的控制面板中将哈希密钥添加到您的应用程序。

希望这可以帮助。

# networking - ping 谁知道我的应用程序是否可以访问 Internet

> ID：10449680
> 
> 赞同：0
> 
> 时间：2012-05-04T13:21:52.143
> 
> 标签：networking, proxy, wifi, ping

我想制作一个开源应用程序，它应该知道它是否可以访问外部世界（也就是互联网）。它可能因各种原因被阻止访问 Internet，例如未配置代理或来自无线网络的那些烦人的浏览器身份验证。

是否有某种服务可以 ping 以查看我是否可以访问 Internet，或者有什么建议或常见做法来验证它？我知道我可以 ping Google，但我更愿意使用一些特定的服务或采用最佳实践。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T13:43:20.577

好吧，正如您自己所说：您只想知道是否可以通过 ping 访问 Internet。ping 不会给您带来比成功更多的回报，所以我看不出您可以获得什么样的附加服务。如前所述，您可以使用 Google。我的猜测是你应该选择安全的东西，即使他们有问题，你也知道你会得到答案：那么有什么比 ping Google 更好的呢？如果有互联网连接，那将比什么都好。

如果您要获得有关您的连接（延迟、位置或其他）的更多信息，您可以考虑使用特定服务，但在这里 ping Google 似乎是最好的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T13:49:53.963

最佳做法是 ping （或以其他方式建立连接）到*您支付的*服务！

*您*不应该让其他方承担接收“网络启动”探测的费用——这是一种网络滥用。

参见例如[http://en.wikipedia.org/wiki/NTP_server_misuse_and_abuse](http://en.wikipedia.org/wiki/NTP_server_misuse_and_abuse)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T01:58:11.487

您可以让您的应用程序请求一个网站。这是一个简单的方法。Telnet www.google.com 80 GET /

响应将是网站的 HTML。

启动并运行后，您可以让应用 ping IP 并请求项目网站的页面。

我希望这有帮助。

# ruby-on-rails - Ruby On Rails 设计安装问题

> ID：10449683
> 
> 赞同：0
> 
> 时间：2012-05-04T13:22:00.477
> 
> 标签：ruby-on-rails

如果我的问题太简单，我深表歉意，但我是 ruby​​ 新手。我正在尝试使用设计应用程序向我的 rails 项目添加身份验证。完成本教程中描述的所有步骤后：
[http ://railscasts.com/episodes/209-introducing-devise?autoplay=true](http://railscasts.com/episodes/209-introducing-devise?autoplay=true)

我没有得到 devise.rb 文件（顺便说一句，安装成功，我在 bundler 安装列表中看到了warden 和 devise）并且一切都出错了，因为在用户模型创建迁移完成后出现错误消息：无法识别设计方法。

也许您可以给我一些建议，为什么会这样？我在 Windows 上工作。

感谢您的答复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T14:07:18.787

在 github 上上传你的代码（没有密码），因为我不知道你在哪里出错。你运行这个“rails generate devise_install”没有错误吗？您是否尝试过手动创建 devise.rb 文件？

# xslt - 如何在使用 XSLT 从 xml 检索数据时将属性添加到每个标记

> ID：10449684
> 
> 赞同：0
> 
> 时间：2012-05-04T13:22:10.293
> 
> 标签：xslt

我有如下所示的 xml 文件：

```
 <?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE pointList SYSTEM "point.dtd">
<pointList>
<point unit="mm">
<x>2</x>
<y>3</y>
</point>
<point unit="cm">
<x>9</x>
<y>3</y>
</point>
<point unit="px">
<x>4</x>
<y>7</y>
</point>
</pointList> 
```

使用 XSLT 我将其转换为 html 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="html"/>

    <xsl:template match = "/pointList">
    <table border = "1"><xsl:apply-templates/></table>
    </xsl:template>
    <xsl:template match = "/pointList/point">
    <tr><xsl:apply-templates/></tr>
    </xsl:template>
    <xsl:template match="pointList/point/x">
    <td><xsl:value-of select="text()"/></td>
    </xsl:template>
    <xsl:template match="pointList/point/y">
    <td><xsl:value-of select="text()"/></td>
    </xsl:template>

</xsl:stylesheet> 
```

现在我的 html 看起来像这样：

```
<table border="1">

<tr>

<td>2</td>
<td>3</td>

</tr>

<tr>

<td>9</td>
<td>3</td>

</tr>

<tr>

<td>4</td>
<td>7</td>

</tr>

</table> 
```

但我还有一件事要做，我被困住了。我的 xml 文件中有 unit 属性。我必须将单位的值添加到每个点，所以它看起来像这样：2mm 3mm 9cm 3 cm 4px 7 px。谁能告诉我应该如何修改我的 xslt 文件以便得到我想要的？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T13:29:17.790

改变

```
<xsl:template match="pointList/point/x">
  <td><xsl:value-of select="text()"/></td>
</xsl:template>

<xsl:template match="pointList/point/y">
  <td><xsl:value-of select="text()"/></td>
</xsl:template> 
```

到

```
<xsl:template match="pointList/point/*">
  <td><xsl:value-of select="concat(text(), ../@unit)"/></td>
</xsl:template> 
```

# ios - 在视图控制器的范围内保持 touchesMoved

> ID：10449686
> 
> 赞同：1
> 
> 时间：2012-05-04T13:22:10.957
> 
> 标签：ios, view, uiimageview, bounds, touchesmoved

我有一个拼图类型的应用程序，用户可以在其中拿起 40 个拼图块中的任何一个，然后在屏幕上拖动它们。在测试中，我注意到一些用户不小心将碎片掉到了屏幕边界之外，并且碎片无法找回。

我如何指定碎片不能移动到视图范围之外？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T14:20:46.380

我倾向于有一个策略，当触摸结束时，我检查所讨论的 CGRect 的边界是否在超级视图的矩形之外。如果是，那么我将动画它重新显示。

我不确定这将如何实现，因为我通常将 UIPanGestureRecognizer 用于这些类型的行为，这将允许我访问正在移动的视图对象。话虽如此，如果视图对象是 ivar，它看起来像这样。

```
-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {

    //note: pieceView is your ivar for the view being moved.
    CGRect screenRect = [[UIScreen mainScreen] bounds];
    void(^animationBlock)(void);  

    if ((pieceView.frame.origin.x + pieceView.frame.size.width) > screenRect.size.width) { //outside right side
        animationBlock = ^{
           int newXVal = (screenRect.size.width - (pieceView.frame.size.width/2));
            pieceView.center = CGPointMake(newXVal, pieceView.center.y);
        };
    }
    else if (pieceView.frame.origin.x < 0.0f) { //outside left side
        animationBlock = ^{
            int newXVal = -(pieceView.frame.size.width/2);
            pieceView.center = CGPointMake(newXVal, pieceView.center.y);
        };
    }
    else if ((pieceView.frame.origin.y + pieceView.frame.size.height) > screenRect.size.height) { //outside bottom
        animationBlock = ^{
            int newYVal = (screenRect.size.height - (pieceView.frame.size.height/2));
            pieceView.center = CGPointMake(pieceView.center.x, newYVal);
        };
    }
    else if (pieceView.frame.origin.y < 0.0f) { //outside top
        animationBlock = ^{
            int newYVal = -(pieceView.frame.size.height/2);
            pieceView.center = CGPointMake(pieceView.center.x, newYVal);
        };
    }

    [UIView animateWithDuration:0.2 animations:animationBlock];

} 
```

如果您最终使用 UIPanGestureRecognizer，那么您可以通过访问平移手势识别器的 view 属性来访问您正在移动的视图。

# android - 使用 cwac-locpoll 的 WakeLock 未锁定异常

> ID：10449688
> 
> 赞同：2
> 
> 时间：2012-05-04T13:22:20.787
> 
> 标签：android, commonsware-cwac

我正在使用 cwac-locpoll，它做得很好。但是，我的一些用户遇到了以下问题

```
java.lang.RuntimeException: WakeLock under-locked com.commonsware.cwac.locpoll.LocationPoller
at android.os.PowerManager$WakeLock.release(PowerManager.java:339)
at android.os.PowerManager$WakeLock.release(PowerManager.java:299)
at com.commonsware.cwac.locpoll.WakefulThread.onPostExecute(WakefulThread.java:59)
at com.commonsware.cwac.locpoll.LocationPollerService$PollerThread.onPostExecute(LocationPollerService.java:231)
at com.commonsware.cwac.locpoll.WakefulThread.run(WakefulThread.java:93) 
```

这是我的`LocationReceiver`课程，如您所见，它只是`SharedPreferences`通过帮助程序类将获得的位置存储在我的应用程序中。

```
public class LocationReceiver extends BroadcastReceiver {
    private static final String TAG = "LocationReceiver";

    @Override
    public void onReceive(Context context, Intent intent) {
    Bundle b = intent.getExtras();
        Location loc = (Location) b.get(LocationPoller.EXTRA_LOCATION);

        if (loc == null) {
            loc = (Location) b.get(LocationPoller.EXTRA_LASTKNOWN);

            if (loc == null) {
                Log.w(TAG, "Unable to get location. " + intent.getStringExtra(LocationPoller.EXTRA_ERROR));
            } else {
                Log.w(TAG, "Timeout getting location, using previous one " + loc);
            }
        } else {
            Log.i(TAG, "Got location " + loc);
        }

        // save location in preferences
        if (loc != null) {
            PrefsHelper.setLastLocation(loc.getLatitude(), loc.getLongitude());
        }
    }
} 
```

我还使用了一个单独的 cwac-wakeful`WakefulIntentService`来获取最后一个位置并做一些事情，但它们被设计为独立运行。换句话说：

1.  `LocationReceiver`由 cwac-locpoll 调用以不时地存储最后一个已知位置`SharedPreferences`。
2.  A `WakefulIntentService`（独立地）计划获取此位置并对其进行处理。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T13:31:56.327

这很可能与您的 无关`BroadcastReceiver`。我需要更新一些最近的更改以`WakefulIntentService`更好`LocationPoller`地处理边缘情况，例如 Android 摆脱服务并稍后将其恢复，这可能会有所帮助。

我已[就此提交了一个问题](https://github.com/commonsguy/cwac-locpoll/issues/5)——请跟踪该问题以获取有关何时发布修复程序的说明。鉴于此组件的性质，我需要进行长时间运行的测试，因此可能至少需要 24 小时才能发布补丁。

# html - Div Hover 在 IE 6 中不起作用

> ID：10449694
> 
> 赞同：1
> 
> 时间：2012-05-04T13:22:35.420
> 
> 标签：html, internet-explorer-6, mousehover

在 IE 6.0 中显示悬停的技巧或方法是什么？

其他浏览器，如 Firefox、Chrome 和 Safari，会显示 DIV 悬停，而 IE 6.0 则不会。

有没有任何 JScript 方法可以做到这一点？如果是这样，那么有人可以给我一个链接或代码片段，我可以从中为 IE 6 构建一个解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T14:12:17.900

使用[csshover.htc](http://xref.moodle.org/lib/csshover.htc.source.txt)

除此之外：

```
<!--[if IE 6]><style type="text/css"> body { behavior: url(csshover.htc) }</style><![endif]--> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T17:00:29.330

IE6 不支持标签`hover`以外的任何元素的样式。`<a>`

然而幸运的是，有很多技巧可以让它发挥作用。

最好的一个是[What:hover](http://peterned.home.xs4all.nl/csshover.html)。只需按照网站上的说明将脚本引用添加到 CSS 文件的顶部，所有悬停都将开始工作。

希望有帮助。

# java - Spring Web 服务 - 我如何提取请求？

> ID：10449698
> 
> 赞同：0
> 
> 时间：2012-05-04T13:22:37.793
> 
> 标签：java, spring, servlets, mime

我有一个在 Spring 端处理的 Web 服务，如下所示：

```
 @POST
    @Path("/processRequest")
    @Consumes("multipart/mixed")
    @ResponseStatus(HttpStatus.OK)
    public String processRequest(@Context ServletContext servletContext, MultipartInput input) {

        return addAccout(servletContext, input);
    } 
```

该请求将以多部分/混合请求的形式出现，如下所示：

```
--productBoundary
Content-Type: text/xml

<?xml version="1.0" encoding="UTF-8"?>
<product>
     <name>ProductA</name>
</product>

--productBoundary
Content-Type: text/xml

ZGF0YRBAAABn5///////////////5///Z+fn///n////////5////////2f//2f//+f//+f////n/
///////52f//////2f//////2f/////5////////+f/////Z+f///////////////9n//9nZ/9n////5+f///9
<snip>
//+f//////2f/////////5//n//////////9n

--productBoundary-- 
```

该请求将以多部分/混合形式出现。我可以使用 processRequest 的方法参数中显示的 Resteasy 对象来提取多部分/混合消息的每个部分。我想做的是获取消息，因为它的标题和其他所有内容都未经修改。这可能吗？

我需要能够完全按原样存储请求。使用 MultipartInput 结构意味着我已经修改了请求。无论如何我可以在不修改它的情况下获得请求（及其所有标题）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T13:38:36.627

[这里的文档：](https://docs.spring.io/spring-framework/docs/3.1.x/spring-framework-reference/html/new-in-3.1.html#d0e1654)

3.1.18 @RequestPart 注解控制器方法参数

这个新注释提供了对“multipart/form-data”请求部分内容的访问。请参阅第 16.10.5 节，“处理来自编程客户端的文件上传请求”和第 16.10 节，“Spring 的多部分（文件上传）支持”。

# wpf - UserControl vs. MVVM：两个用于上下值选择的依赖组合框

> ID：10449702
> 
> 赞同：1
> 
> 时间：2012-05-04T13:22:50.307
> 
> 标签：wpf, data-binding, mvvm, user-controls, event-handling

假设我有两个组合框。一个用于较低值，一个用于较高值。用户必须选择这两个值。为了让她感到舒服，我想通过限制上限组合框中的值来防止错误（下限>上限）。

### <示例>

这里举个例子。（在示例中，我使用整数 - 我的现实世界问题有不同的对象。）

1.  用户可以在 [1..5] 范围内进行选择：

    ```
    lower: [1, 2, 3, 4, 5]  --> no lower-value selected
    upper: [1, 2, 3, 4, 5]  --> no upper-value selected 
    ```

2.  如果她选择 3 作为下限值，我希望上复选框仅提供值 [3..5]。通过更改上部组合框的数据绑定 ObservableCollection<MyObj> 可以正常工作。

    ```
    lower: [1, 2, __3__, 4, 5]  --> User has selected '3'
    upper: [3, 4, 5]            --> after that, only values within the range [3..5] are available. 
    ```

3.  用户选择 4 作为上限值

    ```
    lower: [1, 2, __3__, 4, 5]  --> User has selected '3'
    upper: [3, __4__, 5]        --> User has selected '4' 
    ```

4.  用户改变主意并选择 2 作为较低的值

    ```
    lower: [1, __2__, 3, 4, 5]  --> User has selected '2'
    upper: [2, 3, __4__, 5]     --> '4' should be kept selected 
    ```

### </示例>

在 windows 窗体世界中，我会创建一个用户控件并自己控制事件处理。事实上，我会关闭`SelectedIndexChanged`上组合框的事件处理，调整它的底层列表，设置适当的索引并再次打开事件处理。

我在第四步遇到了一个奇怪的问题。我发现在更改基础集合时无法保留所选值。

*   处理此类问题的 mvvm 方式是什么？还是 mvvm 模式不是适合我的方案的良药？
*   这是一个用户控件的正确位置，我可以完全控制事件处理吗？
*   Expression-Blend 真的是使用 mvvm 模式构建的吗？;-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T13:29:29.773

而不是每次都创建一个新的上层集合，为什么不简单地使用 ICollectionView.Filter 呢？这样您就可以保留所选项目。

编辑：快速而肮脏的例子；）

```
public class MyCbo
{
    private int _selectedInt;
    public int SelectedInt
    {
        get { return _selectedInt; }
        set { _selectedInt = value; 
        this.view.Refresh();}
    }

    public List<int> MyFirst { get; set; }
    public List<int> MySecond { get; set; }

    private ICollectionView view;

    public MyCbo()
    {
        this.MyFirst = new List<int>() {1, 2, 3, 4, 5};
        this.MySecond = new List<int>() { 1, 2, 3, 4, 5 };

        this.view = CollectionViewSource.GetDefaultView(this.MySecond);
        this.view.Filter = Myfilter;
    }

    private bool Myfilter(object obj)
    {
        var item = Convert.ToInt32(obj);

        var upper = this.SelectedInt;

        if (item < upper)
            return false;

        return true;
    }
} 
```

用户控制

```
public partial class Comboxtwo : UserControl
{
    private MyCbo data;
    public Comboxtwo()
    {
        this.data = new MyCbo();
        InitializeComponent();
        this.DataContext = data;
    }
} 
```

xml

```
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition />
        <ColumnDefinition  />
    </Grid.ColumnDefinitions>
    <ComboBox Grid.Column="0" ItemsSource="{Binding MyFirst}" SelectedItem="{Binding SelectedInt, Mode=OneWayToSource}" Height="30"/>
    <ComboBox Grid.Column="1" ItemsSource="{Binding MySecond}" Height="30" />
</Grid> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-04T13:27:06.700

只是给你一个工作方向的推动力：这听起来像是你可以用[BindableLinq](http://bindablelinq.codeplex.com/)解决的问题，这将使你保持对 MVVM 的忠诚，并在你需要时保持灵活性。

如果您需要更多详细信息，请发表评论。

# c# - 视觉工作室中断处理的异常

> ID：10449703
> 
> 赞同：2
> 
> 时间：2012-05-04T13:22:51.620
> 
> 标签：c#, visual-studio-2010

我有一些代码可以在我们网络上的远程共享上创建文件夹，并且由于共享不可用而出现异常。我只是为了记录目的而在堆栈中进一步捕捉异常，但是由于某种原因，vs2010 只是停止执行并提醒我这个问题。我怎样才能让它忽略这个异常并让它冒泡。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T13:29:12.473

你只需要进入VS中的Debug菜单->Exceptions对话框，把你不想被困的异常取消勾选即可。您可以选择整个范围或单个例外类型。

# c# - c# 对象定义属性是否可以为空

> ID：10449704
> 
> 赞同：2
> 
> 时间：2012-05-04T13:22:55.530
> 
> 标签：c#

我有一个包含事件日期的对象。在数据库中，我有一个名为 ObjectEventDateUTC 的字段，它存储事件发生的 UTC 时间。

现在，我正在像这样定义 c# 对象类：

```
public class MyObject
{
   public DateTime EventDateUTC { get; set; }
   public DateTime EventDateUserTime { get; set; }
} 
```

该属性`EventDateUTC`在针对数据库运行的 linq-to-sql 查询中`EventDateUserTime`设置，该字段稍后在接收用户时区作为参数的封装方法中设置。

`EventDateUserTime`我的问题是：在查询填充对象的时间和方法设置属性的时间之间，字段会发生什么情况。我应该保持我的对象定义不变还是应该更改`EventDateUserTime`为 Nullable。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T13:26:09.400

新对象中的字段被擦除，即内存设置为全零。然后字段初始化程序（如果有）运行，然后是构造函数（CLI 执行第一步；编译器将最后两个操作组合为 make `.ctor()`）。

因此; 它们以“全零”开始，即`DateTime.MinValue`（0001 年 1 月 1 日）。如果您满足于将其视为隐式 null（在 1.0 中是必需的），那么很好。如果您想要更明确的内容，那`DateTime?`也可以。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T13:26:01.023

> 在查询填充对象的时间和方法设置属性的时间之间，字段 EventDateUserTime 会发生什么情况

它被初始化为其默认值 ( `DateTime.MinValue`)。您不需要将其设置为可为空的类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T13:29:28.507

> 我应该保持对象定义不变还是应该将 EventDateUserTime 更改为 Nullable。

最终，这取决于您的设计：如果未设置对象的状态`EventDateUserTime`是合法的，则使该字段可为空；如果您*总是*在从 LINQ 检索后立即设置它，请保持它不可为空。

也许更好的方法是创建`EventDateUserTime`一个计算属性，并存储用户时区：

```
public class MyObject {
    public TimeZone UserTimeZone { get; set; }
    public DateTime EventDateUTC { get; set; }
    public DateTime EventDateUserTime {
        get {
            // Calculate time based on EventDateUTC and UserTimeZone
        }
    }
} 
```

# ant - Ant 将提示值插入文件

> ID：10449709
> 
> 赞同：0
> 
> 时间：2012-05-04T13:23:05.357
> 
> 标签：ant

我正在尝试制作一个 Ant 脚本，它将提升 SA 的某些值并将它们添加到文件中。如果您运行以下脚本，属性名称会被添加到文件中，而不是值？

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<project default="run-count" name="run">
    <!--this file was created by Eclipse Runnable JAR Export Wizard-->
    <!--Ant 1.7 is required      
                               -->
    <target name="run-count">
         <input
            message="Please enter db-username:"
            addproperty="db.user"
          />
    </target>

    <concat destfile="input.txt" append="true">"${db.user}"</concat>

    <echo file="file.txt" append="true">
    <![CDATA[
      <h1>"${db.user}"</h1>
    ]]>
    </echo>
</project> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T22:19:29.807

问题是您输出到设置属性的目标范围之外的文件。

任何目标之外的内容都会首先执行。

所以这意味着在您提示用户输入用户名之前文件输出已经完成。

解决方案...

*   将`concat`and移动到目标`echo`内部`run-count`，或者
*   将它们包含在其他依赖于的目标中`run-count`，或
*   将`input`元素移动到它们之前，任何目标之外。

# php - 如果具有 id 的 div 具有某些文本，则删除其他 div

> ID：10449711
> 
> 赞同：3
> 
> 时间：2012-05-04T13:23:06.797
> 
> 标签：php, javascript, css, if-statement

如果具有 id 的 div 具有某些文本，则删除其他 div。

```
<script language="javascript"> 
var text = $('#div_with_dynamic_text').text();
var comparingText = 'THE_TEXT'
if(text == comparingText){
 $('#OTHER_DIV).css('display','none'); 
 }; 
</script>

<div id="div_with_dynamic_text">THE_TEXT</div>
<div id="OTHER_DIV"> some other div which needs to hide if certain text</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T13:24:46.497

您错过了单引号。它会很好用。

```
<script language="javascript"> 
var text = $('#div_with_dynamic_text').text();
var comparingText = 'THE_TEXT'
if(text == comparingText){
 $('#OTHER_DIV').css('display','none'); 
 }; 
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T13:26:56.093

缺少单引号：更改此：

```
$('#OTHER_DIV).css('display','none'); 
```

到：

```
$('#OTHER_DIV').css('display','none'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T13:35:04.170

更简单的方法

```
if($("div:contains('THE_TEXT')").length>0){
$('#OTHER_DIV').css('display','none');
} 
```

# ios - 图像未显示在第二个 ios 应用程序目标中

> ID：10449718
> 
> 赞同：1
> 
> 时间：2012-05-04T13:23:15.607
> 
> 标签：ios, image, uiimageview

我有一个应用程序，效果很好。我已经复制了目标，所以我有 2 个非常相似的应用程序，但功能略有不同——它不是一个精简版应用程序，而是同一种主体。

我复制了很多图形并将它们添加到项目中。我可以将图像添加到我的 .xib 文件中并且我看到它们很好，但是当我运行我的代码时，使用条件语句以编程方式更新图像视图以使用新图像，它不起作用！代码运行，但我在应用程序中看到的是一个*空*的图像视图。所以它改变了图像视图的来源，但实际上并没有显示帮助。

```
#ifdef OTHER_VERSION
[self.imgTitle setImage:[UIImage imageNamed:@"differentImage"]];
#endif 
```

我知道**#ifdef OTHER_VERSION**代码有效，因为它稍后*会*更改我的应用程序的功能，它只是我遇到问题的图像。

我是否需要更新项目或其他东西，或者专门将图像添加到新目标？

**更新：** 我刚刚注意到这一点：无法加载从带有标识符“com.domain.SecondApp”的包中的笔尖引用的“differentImage.png”图像

该图像肯定存在于项目中，该图像是否仅与我从中复制的原始应用程序“com.domain.FirstApp”相关联

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T13:36:28.813

在 Xcode 中选择左侧的目标。在右侧，单击构建阶段。展开“复制捆绑资源”并确保您的所有图像（和其他资源）都列在那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-07T09:55:51.290

我最近遇到了一个问题，即图像目录中的图像仅显示在一个目标中，而没有显示在另一个目标中。图像目录在其目标成员资格中选择了两个目标，该目录是两个目标的“复制捆绑资源”的一部分，并且两个图像都正确命名。

经过一番挫折，我发现右键单击未显示的图像并选择“在 Finder 中显示”会显示图像及其相关`Contents.json`文件。比较两者，我注意到未显示的图像缺少多个`filename:"my_file_name.png"`元素。

添加相关`filename`解决了这个问题：

```
{
  "images" : [
    {
      "idiom" : "universal",
      "scale" : "1x"
    },
    {
      "idiom" : "universal",
      "filename" : "my_file_name.png",
      "scale" : "2x"
    },
    {
      "idiom" : "universal",
      "scale" : "3x"
    }
  ],
  "info" : {
    "version" : 1,
    "author" : "xcode"
  }
} 
```

# asp.net - 如何自动更新 WCF 服务引用

> ID：10449721
> 
> 赞同：0
> 
> 时间：2012-05-04T13:23:22.230
> 
> 标签：asp.net, wcf, visual-studio, mercurial

我的解决方案包含以下项目

*   A（wcf 服务）
*   B (wcf 服务)
*   foo（参考文献 A）
*   酒吧（参考 B）

如果我对 A 进行更改，我们必须更新 foo 中的服务引用。

我们现在必须这样做的方法是通过转到 Debug | 在 Visual Studio 中手动启动 A & B。启动 New Instance 以便 Cassini 启动服务（http://localhost:59445/A.svc），然后转到 foo 并更新服务引用。

我想找到一种方法（最好是命令行驱动）来自动更新 foo 和 bar 中的服务引用。必须有一种更好的方法来执行此操作，然后手动执行此操作。

建议？

编辑：我希望得到一些“你做错了！” 注释。我需要这样做的原因是因为我们偶尔会向服务添加新功能，从而更改合同。但更大的原因是我们正在使用 DVCS（mercurial），更糟糕的是，我们正在从一个在 VS2008 中运行的分支合并到另一个运行 VS2010 的分支中。每一次这样的合并都会破坏 VS2010 服务引用，而且更新服务引用要容易得多。我们现在必须手动完成。自动完成会好得多。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T14:43:01.563

如果可以，您应该完全取消您的服务参考。只需创建对服务合同 DLL 的二进制引用，然后在客户端上使用 ChannelFactory 动态创建通道（[此处](https://stackoverflow.com/a/9769372/569662)为示例）。

然后，如果您的服务合同发生更改，您只需更新此程序集引用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T13:29:42.707

您可以查看[此博客文章](http://blogs.microsoft.co.il/blogs/oshvartz/archive/2008/05/24/automatic-updating-web-reference-net.aspx)（+[第 2 部分](http://blogs.microsoft.co.il/blogs/oshvartz/archive/2008/08/29/automatic-updating-service-wcf-reference-or-automatic-updating-web-reference-net-part-2.aspx)）或[此论坛帖子](http://social.msdn.microsoft.com/Forums/nl-BE/msbuild/thread/d2678d28-a0c5-419a-8fe3-4858cba149d6)，甚至[此 SO 帖子](https://stackoverflow.com/questions/4659922/is-it-possible-to-refresh-wcf-service-reference-from-vs2010-addin)。它不是开箱即用的，因此根据您的情况配置所提供的解决方案可能有点复杂且耗时，但无论如何，这当然取决于您。

# c++ - boost::optional<> 如何处理局部变量？

> ID：10449729
> 
> 赞同：0
> 
> 时间：2012-05-04T13:23:36.863
> 
> 标签：c++, boost, scope, global-variables

考虑这样一段代码：

```
struct B {
    int c;
    B() {
        c = 20;
    }
};
struct A {
    boost::optional<B> m_b;
    void f() {
        B b; 
        this->m_b = b;
    }
};

int main(void) {
    A a;
    a.f();
    cout << a.m_b->c << endl;
} 
```

显然，`a.m_b`在将局部变量分配`b`给`m_b`.

这让我很困惑，因为我认为分配一个对象`boost::optional<>`只是分配指向该对象的地址。由于在我的示例中该对象是`b`，它是一个局部变量，因此它的地址在函数完成后应该是无效`f()`的。

那为什么`a.m_b`还活着？它应该指向一个无效的地址。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T13:40:39.980

`boost::optional`'`operator=`将调用`B`' 的复制构造函数。如果将其插入到您的`struct B`中，您可以在其上设置断点以查看发生了什么：

```
B(B const& other)
{
} 
```

Boost 在其实现中使用了一个新的位置，也许这​​让你感到困惑？

# c# - 从 Oracle 读取的问题

> ID：10449733
> 
> 赞同：6
> 
> 时间：2012-05-04T13:23:56.700
> 
> 标签：c#, oracle, oracle11g

我刚刚安装了一个 Oracle express 数据库，并试图从我放在那里的表中读取一些数据：

```
using (OracleConnection conn = new OracleConnection("Data Source=localhost:1521/xe;Persist Security Info=True;User ID=SYSTEM;Password=SYSTEMPASSWORD"))
{
    OracleCommand command = new OracleCommand("SELECT * FROM Persons WHERE Firstname = 'John'", conn);
    conn.Open();
    OracleDataReader reader = command.ExecuteReader();

    try
    {
        while (reader.Read())
        {
            string strResult = reader.GetString(0);
        }
    }
    catch (OracleException oex)
    {
        MessageBox.Show(oex.Message, "Oracle error");
    }
    catch (Exception ex)
    {
        MessageBox.Show(ex.Message, "Error");
    }
    finally
    {
        reader.Close();
    }
} 
```

由于阅读器没有任何数据，`while (reader.Read())`它就退出了。怎么了？`Connectionstring`? 我在`SELECT`与 Oracle express 一起安装的 commandprompt 工具中运行了相同的工具，它工作正常。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T13:41:57.843

连接到任何系统时要做的第一件事是查看/测试它是否成功，然后继续。如果没有这些简单的测试，您的应用程序必然会表现得像一颗定时炸弹。一些防御性编程将使您的项目更容易调试。不是您正在寻找的答案，但目前在查询执行时连接状态尚不清楚。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-08T05:21:16.157

表 Persons 在 SYSTEM 模式中？运行另一个查询，例如“从 user_objects 中选择 object_name”，并向我们提供您所做的更新。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T09:37:40.137

自从我不将 Oracle 与 .Net 一起使用以来已经有很长时间了，但是我看不到您使用的是哪个数据库（它是“xe”吗？）。对于 SQL Server，我在连接字符串中使用 INITIAL CATALOG 指定它。在这里，您可以尝试不同的连接字符串：http: [//www.connectionstrings.com/oracle](http://www.connectionstrings.com/oracle)。我也会从打开连接开始。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-03T14:57:13.027

派对迟到了，但是...

我在访问视图时遇到了同样的问题，结果发现它没有授予适当的权限。一旦我将 SELECT 权限授予我的用户 ID，我就可以获取我的数据。

# powershell - 如何复制不同名称的同一目录中的文件夹？

> ID：10449734
> 
> 赞同：2
> 
> 时间：2012-05-04T13:23:58.233
> 
> 标签：powershell, powershell-2.0

我正在尝试复制文件夹并重命名它。

如何用powershell做到这一点？

复制项目失败，因为我试图将其粘贴到同一目录中。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T13:35:21.270

```
Copy-Item Original Original-Copy -recurse 
```

所以它也复制了内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T13:30:57.980

只需给目的地一个新名称。这对我有用。

> 副本项目原始原始副本

将名为“Original”的文件夹复制到名为“Original-Copy”的文件夹中。

# c# - 是指在初始化中被初始化的对象吗？

> ID：10449739
> 
> 赞同：0
> 
> 时间：2012-05-04T13:24:13.580
> 
> 标签：c#, syntax, initialization

我有一个带有几个委托方法的对象 DataParameterInfo (DPI)，这些委托方法用于将数据从 DataReader 移动到 POCO 或从 POCO 中获取值。

例子：

```
new DataParameterInfo<IBulletinPCN>
{
    FieldName = "ChangeProcedure",
    ParameterName = "@ChangeProcedure",
    EntityName = "ChangeProcedure",
    DataType = SqlDbType.NVarChar,
    FieldType = FieldType.Other,
    PopulateEntity = (dr, e) => e.ChangeProcedure = dr.IsDBNull(dr.GetOrdinal("ChangeProcedure")) ? null : dr.GetString(dr.GetOrdinal("ChangeProcedure")),
    ReadEntity = e => e.ChangeProcedure
} 
```

我想*在*PopulateEntity 委托中引用我的 DPI 的 Fieldname 属性，如下所示：

```
 PopulateEntity = (dr, e) => e.ChangeProcedure = dr.IsDBNull(dr.GetOrdinal(FieldName)) ? null : dr.GetString(dr.GetOrdinal(FieldName)), 
```

或许

```
 PopulateEntity = (dr, e) => e.ChangeProcedure = dr.IsDBNull(dr.GetOrdinal(this.FieldName)) ? null : dr.GetString(dr.GetOrdinal(this.FieldName)), 
```

当我尝试时，只有“this”指的是创建 DPI 的类，而不是 DPI 本身。

我可以在上面做我正在尝试的事情吗？如果可以，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T13:27:40.277

您不能在该类的对象初始化程序中引用该类的另一个成员 - 这将导致循环引用。

您可以通过在初始化程序*之后*`PopulateEntity`简单地分配您的属性来解决此问题。

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T13:44:10.047

您可以通过更改该委托的调用者将字段名作为参数传递给您的委托：

前任：

```
PopulateEntity = (dr, e, fieldname) => e.ChangeProcedure = dr.IsDBNull(dr.GetOrdinal(fieldname)) ? null : dr.GetString(dr.GetOrdinal(fieldname)) 
```

在执行该委托时，您说：

```
PopulateEntity(dr, e, this.fieldname); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T13:32:33.817

这`var x = new Foo { property = bar }`只是旧方法的一种简便方法`var x = new Foo(); x.property=bar;` 对于这种情况，您只需要使用旧方法即可，引用以前设置的属性值没有问题。*

# sql - 防止重复 SQL Server 2008 和经典 ASP

> ID：10449744
> 
> 赞同：1
> 
> 时间：2012-05-04T13:24:24.343
> 
> 标签：sql, sql-server, sql-server-2008, asp-classic

我正在从 Excel 导入记录，我想避免重复。在 ASP Classic 中，我编写了一个检查数据库是否存在重复项的函数。如果找到一个，它会在用户名的末尾添加一个数字并再次检查用户名是否唯一，例如 petejones 变为 petejones1。不幸的是，这个脚本太慢了，因为数据库有大约 150k 条记录，而且搜索唯一性需要很长时间。有没有办法在 T-SQL 的 SQL Server 2008 中直接做同样的事情？所以整个过程会很快。有制作独特的过程吗？

这是经典 ASP 中的函数。我知道有更好的方法可以做到这一点，所以不要嘲笑我的脚本。

```
FUNCTION CreateUniqueUsername(str)
  SET DbConn = Server.CreateObject("ADODB.connection")
  DbConn.Open DSN_LINK
  nCounter = 0
  Unique = ""
  IF InStr(str, "@") > 0 THEN
     strUsername = Left(str,InStr(str, "@")-1)
  ELSE
     strUsername = str
  END IF
  strUsername = FormatUsername(strUsername)
  strSQL = "SELECT UserName FROM Member WHERE UserName = '" & strUsername & "';"
  SET rs = DbConn.Execute(strSQL)
  IF rs.EOF AND rs.BOF THEN
    nFinalUsername = strUsername
  ELSE
    DO UNTIL Unique = true
      nCounter = nCounter + 1
      nFinalUsername = strUsername & nCounter
      strSQL2 = "SELECT UserName FROM Member WHERE UserName = '" & nFinalUsername & " ' "
      SET objRS = DbConn.Execute(strSQL2)
      IF objRS.EOF THEN
        Unique = true
      ELSE
        intCount = intCount
      END IF
    LOOP
    objRS.Close
    SET objRS = Nothing 
  END IF
  rs.Close
  SET rs = Nothing 
  SET DbConn = Nothing
  CreateUniqueUsername = nFinalUsername
END FUNCTION

FUNCTION FormatUsername(str)
  Dim OutStr
  IF ISNULL(str) THEN EXIT FUNCTION
  OutStr = lCase(Trim(str))
  OutStr = Replace(OutStr, "&rsquo;", "")
  OutStr = Replace(OutStr, "&rdquo;", "")
  OutStr = Replace(OutStr, "&#39;","")
  OutStr = Replace(OutStr, "&amp;","and")
  OutStr = Replace(OutStr, "'", "")
  OutStr = Replace(OutStr, "*", "")
  OutStr = Replace(OutStr, ".", "")
  OutStr = Replace(OutStr, ",", "")
  OutStr = Replace(OutStr, CHR(34),"")
  OutStr = Replace(OutStr, " ","")
  OutStr = Replace(OutStr, "|","")
  OutStr = Replace(OutStr, "&","")
  OutStr = Replace(OutStr, "[","")
  OutStr = Replace(OutStr, ";", "")
  OutStr = Replace(OutStr, "]","")
  OutStr = Replace(OutStr, "(","")
  OutStr = Replace(OutStr, ")","")
  OutStr = Replace(OutStr, "{","")
  OutStr = Replace(OutStr, "}","")
  OutStr = Replace(OutStr, ":","")
  OutStr = Replace(OutStr, "/","")
  OutStr = Replace(OutStr, "\","")
  OutStr = Replace(OutStr, "?","")
  OutStr = Replace(OutStr, "@","")
  OutStr = Replace(OutStr, "!","")
  OutStr = Replace(OutStr, "_","")
  OutStr = Replace(OutStr, "''","")
  OutStr = Replace(OutStr, "%","")
  OutStr = Replace(OutStr, "#","")
  FormatUsername = OutStr
END FUNCTION 
```

任何帮助将不胜感激，因为我仍在学习 SQL。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T13:52:07.437

您可以在 SQL 中执行此操作。这会寻找匹配的名称。如果找到匹配项，则它获取当前附加到它的最大数量并添加一个。所以最多它做两个**SELECTS**。当有很多重复时应该更快。

```
-- example table
declare @Member table(ID int identity, UserName varchar(80))
insert @Member values('Pete')
insert @Member values('Jill')
insert @Member values('Bob')
insert @Member values('Sam')
insert @Member values('Pete1')
insert @Member values('Pete2')
insert @Member values('Pete3')
insert @Member values('Bob1')

declare @UserName varchar(80), @FinalUserName varchar(80)
set @UserName = 'Pete'

set @FinalUserName = @UserName
if(exists(SELECT 1 FROM @Member WHERE left(UserName,len(@UserName)) = @UserName))
begin
    SELECT 
        @FinalUserName = @UserName + convert(varchar(12),max(substring(UserName,len(@UserName)+1,99)+1)) 
    FROM @Member 
    WHERE left(UserName,len(@UserName)) = @UserName
end

SELECT @FinalUserName 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T13:52:57.817

这个繁琐的表达式将检索第一个可用的用户名。如果存在同名用户并且用户名的其余部分是数字，则表达式将返回用户名与下一个数字连接。如果找不到这样的用户名，则表达式将返回此用户名。

您可以将每个“@username”替换为实际值，或者更好地使用[SqlCommand.ExecuteScalar](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx)。SqlCommand 将允许使用参数，这是更好的解决方案，因为您不必连接丑陋的字符串，并且它们会阻止使用[Sql Injection](http://en.wikipedia.org/wiki/SQL_injection)。

```
select @username 
     + isnull(convert (varchar (10),
         max (case when isnumeric (substring (m.Username, len (@username) + 1, 100)) = 1
                   then cast (substring (m.Username, len (@username) + 1, 100) as int) 
                   else (case when m.username = @username then 0 end)  
                   end) 
       + 1), '') UserName
from @members m
where m.username like @username + '%' 
```

这是一个[Sql Fiddle 测试场](http://sqlfiddle.com/#!3/eb26b/4)。替换`set @username = 'aa'`为其他用户名以查看结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T14:03:33.983

这可以通过插入允许重复的临时表中来实现，然后从临时表转移到主表中，在此过程中解决重复。

```
INSERT INTO MainTable (Column1, Column2, UniqueName)
SELECT  Column1,
        Column2,
        UserName + ISNULL(CONVERT(VARCHAR, NULLIF(RowNumber, 0)), '') [UniqueName]
FROM    (   SELECT  *, *, ROW_NUMBER() OVER (PARTITION BY UserName ORDER BY Column1) - 1 [Rownumber]
            FROM    StagingTable
        ) staging 
```

该声明的重要部分是：

```
ROW_NUMBER() OVER (PARTITION BY UserName ORDER BY Column1) - 1 
```

这给每一行一个行号（显然）。`PARTITION BY`像 group by 一样工作，这基本上意味着当用户名更改时行数将重置为 1 。该`ORDER BY`部分确定哪个重复的用户名应该是第 1 行，应该是第 2 行等。ROW_NUMBER() 从 1 开始，所以我从中减去了 1，所以它从 0 开始。

接下来是将此行号与用户名组合的问题：

```
UserName + CONVERT(VARCHAR, RowNumber) [UniqueName] 
```

这将产生用户名0、用户名1、用户名2...所以下一步是让“用户名0”只显示为用户名，给出用户名、用户名1、用户名2的列表：

```
UserName + ISNULL(CONVERT(VARCHAR, NULLIF(RowNumber, 0)), '') [UniqueName] 
```

这基本上是说如果行号为 0 则变为 null，则如果 this 的结果为 null 则变为 ''。

# c# - WCF REST API 记录的部分更新

> ID：10449745
> 
> 赞同：0
> 
> 时间：2012-05-04T13:24:26.157
> 
> 标签：c#, wpf, rest

我正在编写一个 WCF Rest API，它为一个实体提供 CRUD 功能，比如**Student**。这是它的定义方式：

```
class Student
{
  Guid Id;
  string Name;
  string LastName;
  string Age;
  DateTime DOB; 
} 
```

我的服务合同是这样的：

```
class StudentService
{
  [WebInvoke(Method = "POST")]
  public void Add(Student student)
  {...}

  [WebInvoke(Method = "PUT")]
  public void Update(Student student)
  {...}

  [WebGet()]
  public void Get(string Id)
  {...}

} 
```

现在的问题是，在更新学生记录时，客户端可能无法提供完整的数据。例如，它可能提供 Id 和 DOB，但没有 name 和 LastName。ID 为必填字段。我需要知道在这种情况下最好的方法/设计是什么？

我可以从数据库中获取现有记录并对两者进行比较，然后根据需要进行更新。这种方法的问题是我无法知道用户是否真的想要将字段更新为空。再说一次，比较似乎不是一个整洁的设计。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T13:31:01.537

发送sp中的所有值，然后在更新记录时写case语句检查null你可以在Update Statement中检查isnull，所以当参数为null时，用自己的值更新它们

像

更新学生集 Name = case when isnull(@Name,'') ='' then Name else @Name end where Id = 1127871

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-11T12:42:49.543

在经历了处理这种事情的各种策略之后，我有点实现了这个问题的答案中描述的内容：[仅更新 EF 实体上未设置为 null 的一些属性](https://stackoverflow.com/questions/9000702/only-update-some-properties-on-an-ef-entity-that-are-not-set-to-null)。

简而言之，我正在跟踪反序列化期间设置了哪些属性，然后仅更新这些属性。

# android - Android 捏/缩放和 glfrustum

> ID：10449749
> 
> 赞同：5
> 
> 时间：2012-05-04T13:24:44.367
> 
> 标签：android, opengl-es, zooming

[我使用OpenGL](http://en.wikipedia.org/wiki/OpenGL)绘制了几个 2D 形状，现在我想添加捏合/缩放。我的观点是透视图（顶视图）。我假设它是 z 轴 = 0 的 3D。

现在，我应该如何更改 glfrustum 并在我的活动中添加一个触摸方法，以便我可以捏/缩放？

```
gl.glFrustumf(-ratio, ratio, -1, 1, 1, 25); 
```

我认为应该是这样的

```
gl.glFrustumf(-ratio, ratio, -1, 1, 1*zoom, 25*zoom); 
```

但是应该如何编写触摸方法来更改此缩放参数以进行两指缩放？

现在的问题是渲染器，我在最后添加了缩放方法，但是在缩放方法中它给了我 gl.glfrustum 的错误，而在 onsurfacechanged 上它不会给我同样的错误！我该如何解决？

```
public class GLrenderer implements Renderer {
    public GLqueue tri;
    public GLrenderer() {
        tri = new GLqueue();

    }

    public void onSurfaceCreated(GL10 gl, EGLConfig eglConfig) {
        // TODO Auto-generated method stub
        gl.glDisable(GL10.GL_DITHER);
        gl.glHint(GL10.GL_PERSPECTIVE_CORRECTION_HINT, GL10.GL_FASTEST);
        gl.glClearColor(.0f, .0f, .0f, 0f);
        gl.glClearDepthf(1f);
    }

    public void onDrawFrame(GL10 gl) {
        // TODO Auto-generated method stub
        gl.glDisable(GL10.GL_DITHER);
        gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_COLOR_BUFFER_BIT);

        gl.glMatrixMode(GL10.GL_MODELVIEW);
        gl.glLoadIdentity();
        GLU.gluLookAt(gl, 0, 0, -5, 0, 0, 0, 0, 2, 0);

        //gl.glRotatef(1, 1, 0, 0);
    //  gl.glRotatef(10, 0, 0, 1);
        tri.draw(gl);

    }

    public void onSurfaceChanged(GL10 gl, int width, int height ) {
        // TODO Auto-generated method stub
        gl.glViewport(0, 0, width, height);
        float ratio = (float) width / height;
        gl.glMatrixMode(GL10.GL_PROJECTION);
        gl.glLoadIdentity();

        gl.glFrustumf(-ratio, ratio, -1, 1, 1, 25);
    }

    public static void zoom(float d2) {
        // TODO Auto-generated method stub
          int zoom = (int) (zoom*d2);

                gl.glFrustumf(-ratio, ratio, -1, 1, 1*zoom, 25*zoom);

    }

    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T13:30:07.757

如果你有一些浮点值决定你的缩放，你可以使用这个：

```
glFrustum(left*zoom, right*zoom, bottom*zoom, top*zoom, near, far); 
```

这是一个例子：

摘自`OnTouchListener`

```
public boolean onTouch(View v, MotionEvent event) {
    switch(event.getAction()){
    case MotionEvent.ACTION_DOWN:
        pointers = 1;
        return true;
    case MotionEvent.ACTION_POINTER_2_DOWN:
        pointers = 2;
        distance = fingerDist(event);
        return true;
    case MotionEvent.ACTION_MOVE:
        if( pointers == 2 ){
            float newDist = fingerDist(event);
            float d = distance/newDist;
            renderer.zoom(d);
            distance = newDist;
        }
        return true;
    default:
        return false;
    }

    }

protected final float fingerDist(MotionEvent event){
    float x = event.getX(0) - event.getX(1);
    float y = event.getY(0) - event.getY(1);
    return FloatMath.sqrt(x * x + y * y);
} 
```

来自`renderer`：

```
public final void zoom(float mult){
    zoom *= mult;
    Matrix.frustumM(
            pMatrix, 0, 
            zoom*left, zoom*right, zoom*bottom, zoom*top, 
            near, far);
} 
```

请注意，此代码是为 gles 2.0 而不是 1.0 编写的，因此`Matrix.frustumM()`您可以调用`gl.glFrustumf()`. 您可能必须将此操作发布到您的 gl-thread 才能正常工作。

# c++ - 线程不刷新数据，无法从标准输入获取所有数据

> ID：10449752
> 
> 赞同：0
> 
> 时间：2012-05-04T13:24:58.653
> 
> 标签：c++, multithreading, sockets

我正在创建一个套接字程序来将数据从一台 pc 传输到另一台，但是当我将一些二进制数据发送到另一端进行处理时出现问题。在这种情况下，我需要一个线程在数据套接字发送数据时监听消息套接字。所以我发现问题不在于套接字，如果我尝试将数据写入屏幕（这次没有套接字），就会出现问题。所以我尝试使用 fflush(stdout) 刷新数据但没有运气。代码以这种方式工作。

```
Initialize the 2 sockets.
Initialize 2 threads.
  One to get the data back through the data socket.
  The other send the data.    
And while sending all the data one pthread_join(m_thread2) in the main function, because the data can take 1 second to be processed or one hour so i keep the program alive this way. 
```

我创建了一个较小的版本，使用两个线程来读取并发送到屏幕，并且在主线程中。

代码：

```
#include <iostream>
#include <fstream>
#include <string.h>

using namespace std;

const int RCVBUFSIZE=2000;
char echoString[RCVBUFSIZE];
int recvMsgSize;
static void * _sendExec(void *instance);
static void * _recvExec(void *instance);
int main(){
  pthread_t m_thread, m_thread2;
  int merror, merror2;
  merror=pthread_create(&m_thread, NULL, _sendExec, NULL);
  merror2=pthread_create(&m_thread2, NULL, _recvExec, NULL);
  pthread_join(m_thread2, NULL);
}
static void * _sendExec(void *instance){
  int size;
  for(;;){
    while((size=read(fileno(stdin), echoString, RCVBUFSIZE))>0){
       write(fileno(stdout), echoString, size);
    }
    fflush(stdin);
    fflush(stdout);
    pthread_exit(0);
  }
}
static void * _recvExec(void *instance){
  while(1){
     //recvMsgSize=msgTmp->recv(buffer, RCVBUFSIZE)
     write(fileno(stdout), "", 0);
     sleep(1);
  }
} 
```

如果您尝试`cat file.tar.gz | ./a.out | tar -zvt`，您会看到并非所有数据都显示在屏幕上，如果我放在主屏幕上，删除 pthread_join 就可以了，问题是我需要返回数据，这可能需要一些时间。就像我做一个`cat file.tar.gz | ssh root@server "tar -zvt"`. 问题是，我可以在使用recvExec接收所有数据后杀死sendExec，但它只是在更改代码并删除套接字部分后将stdin刷新给我，只是为了说明问题

感谢人们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T14:19:57.057

在您的示例中，`tar`正在等待更多输入，因为您从不提供文件结束指示。试试这个：

```
static void * _sendExec(void *instance){
  int size;
  for(;;){
    while((size=read(fileno(stdin), echoString, RCVBUFSIZE))>0){
       write(fileno(stdout), echoString, size);
    }
    fflush(stdin);
    fflush(stdout);
    fclose(stdout); // THIS IS THE LINE THAT FIXES THE SAMPLE PROGRAM
    pthread_exit(0);
  }
} 
```

在添加`fclose`修复您的示例程序时，我不一定会在您的主程序中推荐它。您的示例仍然有一个无限循环（在 中`_recvExec`）并且永​​远不会终止。

# jsf - 升级问题 - JSF、Myfaces、Trinidad 和 Facelets 之间有什么联系？

> ID：10449753
> 
> 赞同：0
> 
> 时间：2012-05-04T13:25:00.540
> 
> 标签：jsf, tomcat, facelets, myfaces, trinidad

我一直在做一个项目并试图了解这些组件是如何工作的。我对每个人扮演的角色感到困惑。我目前的任务是在 Tomcat 5.5 中使用 JSF、MyFaces、Trinidad 和 Facelets 的项目，并让它在 Tomcat 6.0 中运行。当我在新容器中运行它时，我得到了非常奇怪的行为。所以我想弄清楚是否需要更新这些库中的任何一个。但我似乎无法弄清楚这些是如何协同工作的。所以这里有一些问题：

*   如何确定我拥有的 JSF 版本？
*   JSF、Facelets 和 MyFaces 有什么区别？
*   我读到 trinidad 是一个 JSF 框架。那么这是 JSF 的扩展吗？

鉴于这些信息，Tomcat 版本是否对这些框架有直接影响？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T14:05:33.417

[JSF](http://docs.oracle.com/javaee/6/tutorial/doc/bnaph.html)是一个基于组件的 MVC 框架，它是 Java EE 的一部分。JSF 只是一个抽象规范（就像 Java EE 中的几乎所有其他规范一样）。要真正使用它，您需要一个具体的 JSF 实现。主要的 JSF 实现是 Mojarra 和 MyFaces。

[MyFaces](http://myfaces.apache.org)是具体的 JSF 实现之一。[莫哈拉](http://javaserverfaces.java.net)是另一个。`MANIFEST.MF`您可以通过检查JSF 实现 JAR 文件中的文件来找出具体的 JSF 版本。

[Trinidad](http://myfaces.apache.org/trinidad/)是一个 JSF 组件库。JSF 组件库是一个扩展，应该在任意 JSF 实现之上使用。[组件库通常在标准组件集](http://download.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/)之上提供附加组件，具有更多皮肤、ajaxical 和增强功能。最终目标是尽量减少本土代码和代码重复。

[Facelets](http://docs.oracle.com/javaee/6/tutorial/doc/giepx.html)是一种基于 XML 的视图技术，是 JSP 的继承者。它允许您通过 XML 声明定义 JSF UI 组件，并沿它内联普通的普通 HTML。[`UIViewRoot`](http://docs.oracle.com/javaee/6/api/javax/faces/component/UIViewRoot.html)视图文件最终在视图构建期间（恢复视图阶段）被解析并转换为视图文件，并在视图渲染期间（渲染响应阶段）生成 HTML。这个 HTML 又被发送到客户端（在 webbrowser 中打开页面，右键单击并*查看源代码*以查看它）。

至于您的具体问题，Tomcat 5.5 是一个 Servlet 2.4 容器，因此您最多只能在其上运行 JSF 1.2 实现。Facelets 没有捆绑在 JSF 1.x 中。您需要单独安装 Facelets 1.x。Tomcat 6.0 是一个 Servlet 2.5 容器，因此您可以在其上运行 JSF 2.0 实现。Facelets 已经捆绑在 JSF 2.0 中，因此您不需要（也不应该）单独安装它。然后，在使用 Trinidad 时，请确保获得与 JSF 规范版本兼容的版本。

### 也可以看看：

*   [我们的 JSF 标签 wiki 页面](https://stackoverflow.com/tags/jsf/info)
*   [Mojarra 和 MyFaces 之间的区别](https://stackoverflow.com/questions/4530746/mojarra-or-myfaces-jsf2-0-starter)
*   [JSF 实现和组件库](https://stackoverflow.com/questions/2167509/jsf-implementations-and-component-libraries)
*   [什么决定了 JSF 版本？容器还是faces-config？](https://stackoverflow.com/questions/9329778/what-dictates-jsf-version-container-or-faces-config)

# ios - C 宏，创建一个 NSString 变量，变量名作为字符串的内容

> ID：10449762
> 
> 赞同：7
> 
> 时间：2012-05-04T13:25:28.167
> 
> 标签：ios, objective-c, c-preprocessor

尽管这不是一个好的编码习惯，但我想要一个应该像下面这样工作的宏：

```
CREATE_STRING(fooBar) 
```

它应该创建以下代码：

```
NSString *fooBar = @"fooBar"; 
```

我的宏看起来像这样：

```
#define CREATE_STRING(varName) NSString *varName = @"varName"; 
```

但现在我得到以下

```
NSString *fooBar = @"varName"; 
```

这似乎是一个很容易解决的问题，我已经检查了[IBM](http://publib.boulder.ibm.com/infocenter/comphelp/v8v101/index.jsp?topic=/com.ibm.xlcpp8a.doc/language/ref/numnum.htm)的文档，但我似乎无法`varName`进入字符串。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-04T13:30:40.503

采用

```
#define CREATE_STRING(varName) NSString *varName = @#varName 
```

反而。（另请注意，您不需要尾随分号以便能够将宏“调用”为类 C 函数。）

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-04T13:53:45.143

这是怎么做的

```
#define CREATE_STRING(varName) NSString *varName = @"" #varName 
```

它利用了编译器一个接一个地连接两个字符串常量这一事实。

# php - Assoc 数组操作 - array("value1", "value2") 到 array(array("keyname" => "value1"), array("keyname" => "value2"))

> ID：10449763
> 
> 赞同：0
> 
> 时间：2012-05-04T13:25:31.427
> 
> 标签：php, arrays, associative, array-unique

我正在做的是使用默认数字键的基本数组：

```
$basic_array = array("value1", "value2", "value3") 
```

我想将该数组与一个关联数组合并，例如：

```
$associative_array = array(array("filename" => "value4"), array("filename" => "value5"), array("filename" => "value6")) 
```

，因此关联数组中的每个数字键都包含一个额外的数组集。

最好的做法是：

```
$associative_array = array_merge(
    [combine $basic_array into temp_array set up with same 
        structure of $associative_array, and add $basic_array 
        values into temp_array]
    , $associative_array
); 
```

这显然取决于数组操作函数的组合（如果有的话）可以动态复制 $associative_array 结构，并用 $basic_array 的值填充每个子数组中的相应键，然后合并它们。

我这样做是因为我想用 associative_array 对 basic_array 中的所有内容进行重复数据删除。

我目前正在这样做：

```
$manual_additions_filenames = array("vtlcvsp.pdf", "vtp.pdf", "vtpsai.pdf", "2990-2.pdf", "2990-8.pdf", "vtxbrl.zip", "vtfrisp.pdf", "vtp.pdf", "vtpsai.pdf", "1939-2.pdf", "cashcollateral.pdf", "cashreserves.pdf");

$associative_array_filenames = array(); //dummy one-dimensional array to store values in filename key of associative array

foreach ($associative_array as $key => $field_array)
{
    $associative_array_filenames[] = $field_array["filename"];
} //pull filename and put into one-dimensional array

$manual_additions = array_diff(
    array_unique($manual_additions_filenames), $associative_array_filenames
); //compare, to get list of unique filenames to be tacked on

foreach ($manual_additions as $value)
{
    $associative_array[]["filename"] = $value;
} 
```

所有原生 php 数组函数都旨在消除所有这些 foreach 循环，或者我是这么想的，所以我很想清理这些垃圾。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-12-16T20:45:15.083

试试这个：

```
$basic_array = array("value1", "value2", "value3");
$basic_array = array_unique($basic_array);
$associative_array = array_map(
    function($item) { 
        return ['file_name' => $item];
    }, 
    $basic_array); 
```

# objective-c - 返回起始视图

> ID：10449766
> 
> 赞同：0
> 
> 时间：2012-05-04T13:25:35.480
> 
> 标签：objective-c, ios, ios4

我的 iPhone 应用程序有一个初始屏幕，然后是主屏幕，然后是最终摘要屏幕。当用户在摘要屏幕上单击“重新开始”时，我想返回到开始屏幕。我怎样才能做到这一点？

我可以使用以下方法关闭此摘要屏幕：

[自我dismissModalViewControllerAnimated：是]；

但是我如何回到那个初始屏幕呢？

谢谢，

-斯科特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T13:29:12.287

实现**UiNavigationController**并使用它的**popToRootViewControllerAnimated:**属性。

并正确研究 UiNavigationController 类参考以更好地理解它 - [http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html)

# android - Webview Android 超时

> ID：10449769
> 
> 赞同：4
> 
> 时间：2012-05-04T13:25:52.377
> 
> 标签：android, timeout

有没有办法设置超时值`WebView`？如果 url 响应太慢或者网站在 10 秒内没有加载，我希望 WebView 超时。

我真的不知道我应该从哪里开始:(

我有 2 节课，第 1 节是初学者，第 2 节是`webView`. Starter 是一种线程和启动屏幕，下一个活动是 main `webView`，所以我想添加一个检查器，如果站点在 4 10 秒内没有响应，它会给出错误。

我希望你们中的任何人都可以帮助我，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T13:27:48.647

您可以通过设置一个 Timer 来执行此操作，该 Timer 通过调用[getProgress()](http://developer.android.com/reference/android/webkit/WebView.html#getProgress%28%29)检查当前页面的进度，如果在某个指定时间后它小于某个阈值，则您可以关闭当前页面的加载。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T12:48:23.000

这是实现计时器的代码，该计时器将检查进度并在加载页面的时间超过一定时间时触发操作。

```
webView.setWebChromeClient(new WebChromeClient() {
    Long seconds = (long) 0.0;
    public void onProgressChanged(WebView view, int progress) {
        Date interestingDate = new Date();

        // second < 5 here you can use your desired time you wish to wait for.
        while (progress < 100 && seconds < 5) {
            //following line calculates time difference
            //between current time and time when page started loading.
            seconds = ((new Date()).getTime() - interestingDate.getTime())/1000;
        }

        if(progress < 100 && seconds > 5) {
            view.stopLoading();
            Log.d("###", "stopped");
        }       
    }
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-08T09:46:22.623

Darpans 代码将不起作用，至少不是因为参数 progress 在 期间不会改变`while`，只会在下一次调用时改变。试试这个：

```
private long starttime = 0;
public void onProgressChanged(WebView view, int progress) {
    Log.v(TAG, "progressChanged: " + progress);
    if(progress == 10) starttime = System.currentTimeMillis();

    long secondsSinceStart = (System.currentTimeMillis() - starttime) / 1000;

    if(progress < 100) {
        Log.v(TAG, "seconds since start: " + secondsSinceStart);
        if(secondsSinceStart > 5){
            view.stopLoading();
            Log.d(TAG, "TIMEOUT -> Stopped.");
        }
    } else {
        Log.v(TAG, progress + "% completed in: " + secondsSinceStart + " seconds");
    }
} 
```

不幸的是，这仅在建立与服务器的连接时才有效。如果不是，则`onProgressChanged`仅调用两次：在 10% 和 100% 时，加载被中止。

# algorithm - 在哪些情况下，我对这个难题的解决方案失败了

> ID：10449770
> 
> 赞同：0
> 
> 时间：2012-05-04T13:25:53.937
> 
> 标签：algorithm, puzzle, testcase

对于如下框架的问题拼图

对于两个字符串 A 和 B，我们将字符串的相似度定义为两个字符串共有的最长前缀的长度。例如，字符串“abc”和“abd”的相似度为2，而字符串“aaa”和“aaab”的相似度为3。计算字符串S与其每个后缀的相似度之和。

我编写了以下解决方案，它只能通过三个测试用例，但我无法弄清楚它失败的测试用例，你能帮我找出它失败的场景吗？

样本输入：2 ababaa aa

样本输出：11 3

解释：对于第一种情况，字符串的后缀是“ababaa”、“babaa”、“abaa”、“baa”、“aa”和“a”。这些字符串中的每一个与字符串“ababaa”的相似度分别为 6,0,3,0,1,1。因此答案是 6 + 0 + 3 + 0 + 1 + 1 = 11。

对于第二种情况，答案是 2 + 1 = 3。

```
 def find_suffix(string):
        if len(string) == 0:
            return 0
        tail = 0
        head = 1
        occurences = [1]
        while head < len(string):
            if string[head] == string[tail]:
                occured = occurences[tail] + 1
                tail = tail + 1
            else:
                if string[0] == string[head]:
                    occured = 2
                    tail = 1
                else:
                    occured = 1
                    tail = 0

            occurences.append(occured)
            head = head + 1
        return sum(occurences) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T16:01:49.700

我不知道蟒蛇。我用方案语言编写了这段代码。它适用于 DrRacket

```
(define inp-string (read))

(define inp-list (string->list inp-string))

(define (sim-len l1 l2)
  (cond ((or (null? l1) (null? l2)) 0)
        ((char=? (car l1) (car l2)) (+ 1 (sim-len (cdr l1) (cdr l2))))
        (else
          0)))

(define inp-strlen (string-length inp-string))

(define iter-cnt 0)
(define final-ans 0)

(define (sum-of-sim l)
 (define (iter count)
   (cond ((null? l) 0)
         ((= iter-cnt inp-strlen) 0)
         (else
         (set! final-ans (+ final-ans 
         (sim-len inp-list (string->list (substring inp-string iter-cnt inp-strlen)))))
           (set! iter-cnt (+ iter-cnt 1))
    (iter iter-cnt))))
(iter iter-cnt))

(sum-of-sim inp-list)

final-ans 
```

我测试的案例如下：

输入：- "" final-ans =0，输入：- "r" final-ans =1，输入：- "rajesh" final-ans =6，输入：- "rajesh bhat" final-ans=11，输入： - "rajraj" final-ans =9，输入：- "aaaaaa" final-ans =21

其他情况是什么？希望这可以帮助。

# c++ - C++ ofstream 文件写入是否使用缓冲区？

> ID：10449772
> 
> 赞同：34
> 
> 时间：2012-05-04T13:25:56.230
> 
> 标签：c++, file, file-io

下面是两个将 50,000,000 字节写入文件的程序。

第一个用 C 语言编写的程序使用一个缓冲区，一旦填充到任意值，就写入磁盘，然后重复该过程，直到写入所有 50,000,000 个字节。我注意到，当我增加缓冲区的大小时，程序运行的时间就会减少。例如，在 BUFFER_SIZE = 1 时，程序耗时约 88.0463 秒，而在 BUFFER_SIZE = 1024 时，程序仅耗时约 1.7773 秒。我记录的最佳时间是 BUFFER_SIZE = 131072。随着 BUFFER_SIZE 的增加，我注意到它实际上开始需要更长的时间。

第二个程序是用 C++ 编写的，它利用 ofstream 一次写入一个字节。令我惊讶的是，该程序只用了大约 1.87 秒即可运行。我预计它需要一分钟左右，就像 BUFFER_SIZE = 1 的 C 程序一样。显然，C++ ofstream 处理文件写入的方式与我想象的不同。根据我的数据，它的性能与 BUFFER_SIZE = 512 的 C 文件非常相似。它是否使用某种幕后缓冲区？

这是C程序：

```
const int NVALUES = 50000000; //#values written to the file
const char FILENAME[] = "/tmp/myfile";
const int BUFFER_SIZE = 8192; //# bytes to fill in buffer before writing

main()
{
    int fd;  //File descriptor associated with output file
    int i;
    char writeval = '\0';
    char buffer[BUFFER_SIZE];

    //Open file for writing and associate it with the file descriptor
    //Create file if it does not exist; if it does exist truncate its size to 0
    fd = open(FILENAME, O_WRONLY|O_CREAT|O_TRUNC, S_IRUSR|S_IWUSR);

    for(i=0;i<NVALUES;i++)
    {
        //Package bytes into BUFFER_SIZE chunks 
                //and write a chunk once it is filled
        buffer[i%BUFFER_SIZE] = writeval;
        if((i%BUFFER_SIZE == BUFFER_SIZE-1 || i == NVALUES-1))
            write(fd, buffer, i%BUFFER_SIZE+1);

    }

    fsync(fd);

    close(fd);
} 
```

这是 C++ 程序：

```
int main()
{
    ofstream ofs("/tmp/iofile2");
    int i;

    for(i=0; i<50000000; i++)
        ofs << '\0';

    ofs.flush();
    ofs.close();

    return 0;
} 
```

感谢您的时间。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-04T15:12:14.573

是的，所有流操作都是缓冲的，尽管默认情况下标准输入、输出和错误输出不是这样，因此与 C IO 的交互并不令人惊讶。

正如已经提到的，有一个[`streambuf`](http://www.cplusplus.com/reference/iostream/streambuf/)在幕后使用的基类。它提供了自己的缓冲区，其大小是一个实现细节。

[`streambuf::in_avail`](http://www.cplusplus.com/reference/iostream/streambuf/in_avail/)假设输入文件流和输出文件流设置为相同的缓冲区大小，您可以使用 （实验性地）检查该缓冲区的大小...

您可以在此处执行其他两项可能感兴趣的操作：

*   您可以更改`streambuf`流使用的对象，以切换到自定义版本
*   您可以更改`streambuf`对象使用的缓冲区

两者都应该在创建流之后或之后立即完成`flush`，以免丢失一些数据......

要说明缓冲区更改，请查看[`streambuf::putsetbuf`](http://www.cplusplus.com/reference/iostream/streambuf/pubsetbuf/)：

```
#include <fstream>
#include <vector>

int main () {
  std::vector<char> vec(512);

  std::fstream fs;
  fs.rdbuf()->pubsetbuf(&vec.front(), vec.size());

  // operations with file stream here.
  fs << "Hello, World!\n";

  // the stream is automatically closed when the scope ends, so fs.close() is optional
  // the stream is automatically flushed when it is closed, so fs.flush() is optional

  return 0;
} 
```

现在您可以重复您在 C 中所做的实验以找到最佳位置 :)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-04T13:33:49.337

是的，ostreams 使用流缓冲区，模板 basic_streambuf 的实例化的某个子类。basic_streambuf 接口的设计是为了让实现可以在有优势的情况下进行缓冲。

然而，这是一个实施质量问题。实现不需要这样做，但任何有能力的实现都会这样做。

您可以在 ISO 标准的第 27 章中阅读有关它的所有内容，尽管可能更具可读性的来源是*C++ 标准库：教程和参考*（[谷歌搜索](http://www.google.com/search?rls=en&q=the+C%2B%2B+standard+library+tutorial+an+dreference&ie=UTF-8&oe=UTF-8#hl=en&client=safari&rls=en&sa=X&ei=Ct2jT_b8JImtiQLZiZHmAw&ved=0CB4QvwUoAQ&q=the+C%2B%2B+standard+library+tutorial+and+reference&spell=1&bav=on.2,or.r_gc.r_pw.r_qf.,cf.osb&fp=897f2fc4916733e1&biw=1152&bih=728)）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-04T13:30:33.843

根据[this](http://www.cplusplus.com/reference/iostream/ofstream/)，`ofstream`有一个内部`filebuf`指针，可以通过`rdbuf`函数读取，它指向一个`streambuf`对象，即 this：

> `streambuf`对象通常与一个特定的字符序列相关联，**它们通过内部内存缓冲区从中读取和写入数据。**缓冲区是内存中的一个数组，在需要时与相关字符序列的物理内容同步。

我将重要的部分加粗，似乎它确实使用了缓冲区，但我不知道或没有发现它是什么类型的缓冲区。

# c# - castle-windsor - 根据对另一个组件的调用返回不同的实现

> ID：10449773
> 
> 赞同：0
> 
> 时间：2012-05-04T13:25:56.343
> 
> 标签：c#, dependency-injection, castle-windsor

我正在创建一个 Web API，我希望能够对其进行版本控制。我想做的方式是这样的：

1.  客户端应用程序在自定义 HTTP 标头中传递包含它们正在调用的 API 版本的每个请求。
2.  存在一个组件（称为`IVersionRetriever`或其他）以从请求中提取版本号。Castle Windsor 负责提供`IVersionRetriever`.
3.  在我希望服务接口的实现在版本之间有所不同的地方，Castle Windsor 被配置为 `IVersionRetriever.ApiVersion`根据获得的值检查并返回一个实现。

所有这一切似乎都很简单，但我无法从 Windsor 的注册 API 中计算出我会如何对 Windsor 说“对`IFoo`，如果`IVersionRetriever.ApiVersion`是 1，那么我想要一个`SuperFoo`，但如果版本是 2，那么我想要一个`SuperDuperFoo`.

我将如何配置它？

如果相关，所有组件都有 PerWebRequest 生活方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T13:48:30.230

根据 ApiVersion 使用 TypedFactory 来解析所需的 IFoo 怎么样？在这种情况下，依赖不会在 IFoo 上，而是在 IFooFactory 上

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T13:52:14.600

只是为了让您知道将来如何做：

```
container.Register(Component.For<IUnitOfWork>().UsingFactoryMethod(() => IVersionRetriever.ApiVersion == 1 ? new SuperFoo() : new SuperDuperFoo() ).LifeStyle.PerWebRequest); 
```

但我同意@Cristiano 的回答。

# ssas - SSAS - 以美元格式显示的多维数据集浏览货币

> ID：10449779
> 
> 赞同：3
> 
> 时间：2012-05-04T13:26:12.583
> 
> 标签：ssas

我使用 SSAS 构建了一个多维数据集，每当我使用 Visual Studio 或 Excel 浏览多维数据集时，货币总是以美元格式显示，而不是首选的英镑格式。

我检查了登录设置是否为英式英语格式，但无济于事我可以更改默认货币格式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T13:37:25.233

尝试直接在您的多维数据集上指定语言。在多维数据集设计器中，选择您的多维数据集并修改“语言”属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T13:16:44.327

您在维度上有一个 LANGUAGE 属性。默认情况下，立方体的 LANGUAGE 单元格属性的值为 1033，设置为 English (UK) 即可

> 您可以明确指定对象（例如维度或多维数据集）的 LANGUAGE 单元格属性。如果您未在对象上指定 LANGUAGE 单元格属性，则 LANGUAGE 单元格属性将从对象的父级继承。
> 
> 如果未在多维数据集上指定 LANGUAGE 单元属性，则多维数据集的 LANGUAGE 单元属性继承自包含该多维数据集的数据库。如果未在数据库上指定 LANGUAGE 单元属性，则 LANGUAGE 单元属性继承自服务器对象。

# android - Android 应用 2.2 移植到 4.0

> ID：10449783
> 
> 赞同：0
> 
> 时间：2012-05-04T13:26:25.513
> 
> 标签：android, image, memory, layout

我已经构建了一个基于 2.2 的应用程序。它工作正常并且运行良好。但是，当我将应用程序放在 4.0（分辨率为 1280x800 三星 Galaxy Note）上时。它崩溃并说它随机耗尽内存并且布局错误；无法修复大小

这是我的情况，我在 5 个活动中总共有大约 100 张图片（其中大部分是 .png 和 .jpg）（通常是 1 个背景图片，20 个带焦点的按钮背景图片和正常的一个），文件大小约为 2MB。

我在 xml 中设置图像和布局，例如相对布局背景或按钮背景或只是 imageview。

我想知道为什么它会耗尽内存，因为可绘制文件夹大小只有 2MB，为什么它会耗尽内存，为什么它在 2.2 上工作但在 4.0 上失败。

我希望有人能帮助我。

第一个问题是布局。例如，按钮尺寸比 2.2 中的要大。所以我担心它的缩放可能会影响内存问题。在我的按钮 xml 中，我将其设置为宽度和高度的 wrap_content。我不知道为什么它会比我预期的要大。我的想法是 4.0 中的布局 xml 存在一些差异，它会使布局变得奇怪或做一些缩放然后使内存变得奇怪。其实所有的图片都只有2MB，会不会内存不够呢？

第二个问题是内存。可能是内存处理与以前的版本不同。所以我需要做一些调整才能让它在 4.0 上工作吗？忽略布局问题，也许我可以进一步校准位置和大小。但是现在我无法显示布局，所以我猜想在 4.0 上可以做些什么？

最后，是否有可能找出每个 imageView 或按钮使用了多少内存？有了这个工具，也许可以进一步调查问题。

如果你有空，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T05:13:43.340

尝试将您的图像放在相应的可绘制文件夹中，例如 drawable-mdpi、drawable-hdpi 等。

如果您只有一个版本，请尝试将它们放入 drawable-nodpi。您可能需要根据您的布局设置方式选择将哪些放入 nodpi。

当 xhdpi 或 hdpi 设备从 drawable 或 drawable-mdpi 加载 drawable 时，系统会自动放大资源以匹配 dpi。从 mdpi 到 xhdpi，drawable 的大小将调整为 2 倍，mdpi 到 hdpi 的大小为 1.5 倍。

希望这可以帮助 ：）

# c# - 当只在基类中需要依赖时，是否适合在基类中使用属 性注入？

> ID：10449786
> 
> 赞同：15
> 
> 时间：2012-05-04T13:26:35.700
> 
> 标签：c#, dependency-injection, inversion-of-control, property-injection

例子：

```
public abstract class BaseControler : Controller
{
    public IUnitOfWork UnitOfWork { get; set; }
}

public class HomeController : BaseControler
{
    readonly IUserRepository _userRepository;

    // :-)
    public HomeController(IUserRepository userRepository)
    {
        _userRepository = userRepository;
    }
} 
```

我们都知道，当需要依赖时，我们必须使用*构造*函数**注入**。如果它是*可选*依赖项，我们可以使用**属性注入**来代替。

 ****但是当只有你的基类需要依赖时你应该怎么做？

当您使用**构造函数注入**时，我认为您会污染所有派生类。

```
public abstract class BaseControler : Controller
{
    readonly IUnitOfWork _unitOfWork;

    public BaseControler(IUnitOfWork unitOfWork)
    {
        _unitOfWork = unitOfWork;
    }
}

public class HomeController : BaseControler
{
    readonly IUserRepository _userRepository;

    // :-(
    public HomeController(IUserRepository userRepository, 
       IUnitOfWork unitOfWork) : base(unitOfWork)
    {
        _userRepository = userRepository;
    }
} 
```

当只在基类中需要依赖时，在基类中使用属**​​性注入是否合适？**

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-04T13:29:31.580

您没有污染派生类。您明确向消费者声明，如果没有这种依赖关系，此类将无法运行。

如果基类需要这个依赖才能正常运行，因为派生类派生自这个基类，它也隐含地需要这个依赖。所以第二个例子是正确的方法。您不应该将属性注入用于必需的依赖项。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T13:39:57.983

实际上你的派生类是一个基类。某处没有其他物体。当您将某些内容传递给基本构造函数时，实际上是在初始化同一个对象。它向客户展示了您的实例所依赖的内容：

```
public HomeController(IUserRepository userRepository, IUnitOfWork unitOfWork) 
```

有一个实例，它取决于两件事：用户存储库和工作单元。调用基类构造函数只是从派生类中删除初始化重复。****

# php - PHP 将 localhost 附加到外发电子邮件

> ID：10449788
> 
> 赞同：0
> 
> 时间：2012-05-04T13:26:44.373
> 
> 标签：php

这是我用来测试我的一个表单的电子邮件发送的 PHP 代码。虽然它运行良好，但由于某种原因，它会将@localhost.mydomain.com 附加到发件人电子邮件地址。这是一个例子：

```
From: James <james.bond@hotmail.com@localhost.mydomain.com> 
```

这是下面的完整代码。

```
<?php
       $email = sqlEscape($_POST['email']);
       $name  = sqlEscape($_POST['name']);
       $to = 'me@yahoo.com';
       $subject = 'Email From website';
       $message = 'The message here';

        $headers = 'From: "'.$name.'" <"'.$email.'">' . "\n";
        $headers .= 'MIME-Version: 1.0' . "\n";
        $headers .= 'Content-type: text/html; charset=iso-8859-1' . "\n";

        if(mail($to, $subject, $message, $headers)){                            

            echo('Message sent successfully');                      
        }else{
            echo('<a href="contact.php">Click here</a> to try again.');     
        }
?> 
```

有没有办法让它不附加它？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T13:34:13.893

你有没有试过： `ini_set(sendmail_from,$_POST['email']);`？

在 mail() 函数调用之前添加这一行。

# java - 如何从没有摆动组件初始化的线程将数据记录到 JTextArea（或 JTextPane）？

> ID：10449791
> 
> 赞同：1
> 
> 时间：2012-05-04T13:26:47.090
> 
> 标签：java, swing, logging, jtextarea, jtextpane

我有一个处理一些数据的 GUI 应用程序，它将文本行转换为对象。创建的每个对象都显示在 JTextPane 或 JTextArea 上。例子：

第 1 行已创建 827401830 第 2 行已创建 827401831

因此，用户被告知该过程。

在幕后，有一个线程在后台运行并完成所有工作。问题是该线程的字段之一是 JTextArea。它看起来像这样：

```
public class ConsumerThread implements Runnable 
{
    private ArrayBlockingQueue<TicketExchangeLine> queue;
    private JTextArea textArea; 

public ExchConsumerThread(ArrayBlockingQueue<TicketExchangeLine> queue, JTextArea textArea) 
{
    this.queue = queue;
    this.textArea = textArea; 
}

public void run() 
{
    try
    {       
        while (true)
        {               
            // check if end of file from producer POV
            if (queue.peek()!=null && ...)
                break;

            MyObject obj = queue.take();

            try{
                //do the process here
                textArea.append("here comes the output for the user..."+obj.getID);

            }catch(Exception nfe)
            {
                //Oops  
            } 
        }

        textArea.append("\nDone!");

    }catch (InterruptedException e)
    {
        // Oops
    }catch(Exception exp)
    {
        exp.printStackTrace();
    }
} 
```

}

所以上面的代码可以正常工作，但有时我不是从 GUI 使用这个线程，然后我无缘无故地实例化一个 JTextArea；更糟糕的是，我必须 system.out 一切才能看到进程。

问题：如何在不使用线程中的 Swing 组件的情况下将所有“处理过的数据”记录到 JTextArea（或有时是 JTextPane）？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T13:40:19.590

不是传递 a `JTextArea`，而是传递一个`OutputStream`（例如 a `PrintStream`）作为参数。这提供了足够的灵活性：

*   您的线程只是写入输出流
*   如果您希望输出出现在 a`JTextArea`中，则传递一个输出流，它将输出附加到 a`JTextArea`中。对文本区域的写入应该发生在 EDT 上，但是输出流会处理这个问题。您的线程不知道这一点
*   如果要将输出通过管道传输到`System.out`，只需将`System.out`直接作为参数传递

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T13:40:26.593

大多数 Swing 图形组件都分为图形表示（视图）和显示数据的抽象表示（模型）。`JTextArea`并且`JTextPane`是使用`Document`实例作为其模型的图形组件。

因此，您可以引用 Document 并调用 ，而不是引用和`JTextArea`调用。然后，如果您需要实例化 JTextArea，请使用 JTextArea 的构造函数，该构造函数将 Document 作为参数（或使用其方法）。`textArea.append``document.insertString``setDocument`

此外，Swing 不是线程安全的，每个可能影响 Swing 组件的方法调用都应该发生在 EDT（AWT 的调度线程）中。要在 EDT 上注入一些代码，请使用`SwingUtilities.invokeLater`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T13:31:12.960

不确定这是否是您要实现的目标，但使用您当前的代码，您可以像这样更改[EDT](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)上的 JTextArea ：

```
final MyObject obj = queue.take();
try {
    SwingUtilities.invokeLater(new Runnable() {
        public void run() {
            textArea.append("here comes the output for the user..." + obj.getID);
        }
    });
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-11T07:54:56.747

您似乎已经找到了答案，但我认为这是解决您问题的优雅而灵活的解决方案：

[从不同的地方向摇摆 JTextArea 发送消息](https://stackoverflow.com/questions/4297729/sending-messages-to-a-swing-jtextarea-from-different-places)

# java - 字符串格式删除标记后的所有内容

> ID：10449793
> 
> 赞同：0
> 
> 时间：2012-05-04T13:26:52.533
> 
> 标签：java, html, string, html-table

我有一个包含表格的 HTML 字符串。但是在某些情况下，标签
后面会有字符。 我想从字符串中删除标签之后的所有内容。 关于我如何在 Java 中做到这一点的任何想法？`</table>`
`</table>`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T13:30:57.413

假设`str`是这个字符串，您可以执行以下操作：

```
str = str.replaceAll("</table>.*","</table>"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T13:47:57.817

正如@Andrew Logvinov 所建议的那样使用[正则表达式。](http://docs.oracle.com/javase/tutorial/essential/regex/)

> `str.replaceAll("</table>.*","</table>");`

这意味着：将文字字符串`"</table>"`后面跟随任何`.`重复零次或多次的字符`*`，并将其替换为文字字符串`"</table>"`

请注意，此方法会替换所有（因此它需要第一个匹配项并删除字符串的其余部分），因此如果您有多个表或嵌套表，这将不会有任何好处。学习使用正则表达式以获得更好的解决方案。（或者只使用 indexOf 和 String 类中的任何方法）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T13:31:05.040

```
String endTableTag = "</table>";
String html = "<table><tr><td>Hello</td></tr></table>yadayadayada";
int index = html.lastIndexOf(endTableTag);
String cleanedup;
if (index>-1) {
    // Removes everything after the last table end tag
    cleanedup = html.substring(0, index + endTableTag.length());
} else {
    cleanedup = html;
}
System.out.println(cleanedup); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T13:45:10.643

```
String test = "testabc</table>anothertest</table>hahhah";
test = str.substring(0, (str.lastIndexOf("</table>")+"</table>".length()));
System.out.println(str.substring(0, (str.lastIndexOf("</table>")+"</table>".length())));
System.out.println(test); 
```

或测试它...

```
test.replaceAll("</table>.*","</table>"); would be better! ;) 
```

很好，但如果你有超过 1 个，你可能会遇到问题！;) 所以最好使用“lastIndexOf()”恕我直言！

# java - java.io.IOException：权限被 Xuggle 拒绝

> ID：10449799
> 
> 赞同：1
> 
> 时间：2012-05-04T13:27:12.907
> 
> 标签：java, xuggle, xuggler

我正在尝试在服务器上运行 Xuggle 5.4，并且有一个我不知道如何处理的异常。相同的代码在另外两台服务器上运行良好，并且在另一个应用程序（Playframework）下的同一台服务器上运行良好。它在另一个应用程序下运行的事实使我认为这可能是错误的。

错误的根源似乎是 Xuggle 试图创建一个临时文件并且访问被拒绝。我怎样才能知道这是哪里？如前所述，这可能是其他安装已经使用的位置，并且在另一个用户帐户下运行。

这是堆栈跟踪：

```
2012-05-04 08:49:01,985 ERROR ~ could not create temp file: {}
java.io.IOException: Permission denied
    at java.io.UnixFileSystem.createFileExclusively(Native Method) ~[na:1.6.0_26]
    at java.io.File.checkAndCreate(File.java:1704) ~[na:1.6.0_26]
    at java.io.File.createTempFile(File.java:1792) ~[na:1.6.0_26]
    at com.xuggle.ferry.JNILibrary.unpackLibrary(JNILibrary.java:274) [xuggle-xuggler-5.4.jar:5.4.0]
    at com.xuggle.ferry.JNILibrary.loadFromClasspath(JNILibrary.java:195) [xuggle-xuggler-5.4.jar:5.4.0]
    at com.xuggle.ferry.JNILibrary.load(JNILibrary.java:176) [xuggle-xuggler-5.4.jar:5.4.0]
    at com.xuggle.ferry.JNILibrary.load(JNILibrary.java:158) [xuggle-xuggler-5.4.jar:5.4.0]
    at com.xuggle.ferry.FerryJNI.<clinit>(FerryJNI.java:16) [xuggle-xuggler-5.4.jar:5.4.0]
    at com.xuggle.ferry.Ferry.<clinit>(Ferry.java:25) [xuggle-xuggler-5.4.jar:5.4.0]
    at com.xuggle.xuggler.XugglerJNI.<clinit>(XugglerJNI.java:19) [xuggle-xuggler-5.4.jar:5.4.0]
    at com.xuggle.xuggler.IContainer.<clinit>(IContainer.java:1622) [xuggle-xuggler-5.4.jar:5.4.0]
    at com.xuggle.mediatool.MediaReader.<init>(MediaReader.java:137) [xuggle-xuggler-5.4.jar:5.4.0]
    at com.xuggle.mediatool.ToolFactory.makeReader(ToolFactory.java:77) [xuggle-xuggler-5.4.jar:5.4.0]
    at logic.server.MediaCoder.createEncodingJobs(MediaCoder.java:39) [idoms-server:na]
    at controllers.FileCopyJob$ProgressListener.actionPerformed(FileCopyJob.java:127) [idoms-server:na]
    at controllers.FileCopyJob$DownloadCountingOutputStream.afterWrite(FileCopyJob.java:84) [idoms-server:na]
    at org.apache.commons.io.output.ProxyOutputStream.write(ProxyOutputStream.java:92) [commons-io-2.0.1.jar:2.0.1]
    at org.apache.commons.io.IOUtils.copyLarge(IOUtils.java:1263) [commons-io-2.0.1.jar:2.0.1]
    at org.apache.commons.io.IOUtils.copy(IOUtils.java:1236) [commons-io-2.0.1.jar:2.0.1]
    at controllers.FileCopyJob.doJob(FileCopyJob.java:58) [idoms-server:na]
    at play.jobs.Job.doJobWithResult(Job.java:50) [play-1.2.4.jar:na]
    at play.jobs.Job.call(Job.java:146) [play-1.2.4.jar:na]
    at play.jobs.Job$1.call(Job.java:66) [play-1.2.4.jar:na]
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303) [na:1.6.0_26]
    at java.util.concurrent.FutureTask.run(FutureTask.java:138) [na:1.6.0_26]
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:98) [na:1.6.0_26]
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:206) [na:1.6.0_26]
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [na:1.6.0_26]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [na:1.6.0_26]
    at java.lang.Thread.run(Thread.java:662) [na:1.6.0_26]
2012-05-04 08:49:02,003 ERROR ~ could not create temp file: {}
java.io.IOException: Permission denied
    at java.io.UnixFileSystem.createFileExclusively(Native Method) ~[na:1.6.0_26]
    at java.io.File.checkAndCreate(File.java:1704) ~[na:1.6.0_26]
    at java.io.File.createTempFile(File.java:1792) ~[na:1.6.0_26]
    at com.xuggle.ferry.JNILibrary.unpackLibrary(JNILibrary.java:274) [xuggle-xuggler-5.4.jar:5.4.0]
    at com.xuggle.ferry.JNILibrary.loadFromClasspath(JNILibrary.java:195) [xuggle-xuggler-5.4.jar:5.4.0]
    at com.xuggle.ferry.JNILibrary.load(JNILibrary.java:176) [xuggle-xuggler-5.4.jar:5.4.0]
    at com.xuggle.ferry.JNILibrary.load(JNILibrary.java:158) [xuggle-xuggler-5.4.jar:5.4.0]
    at com.xuggle.ferry.FerryJNI.<clinit>(FerryJNI.java:16) [xuggle-xuggler-5.4.jar:5.4.0]
    at com.xuggle.ferry.Ferry.<clinit>(Ferry.java:25) [xuggle-xuggler-5.4.jar:5.4.0]
    at com.xuggle.xuggler.XugglerJNI.<clinit>(XugglerJNI.java:19) [xuggle-xuggler-5.4.jar:5.4.0]
    at com.xuggle.xuggler.IContainer.<clinit>(IContainer.java:1622) [xuggle-xuggler-5.4.jar:5.4.0]
    at com.xuggle.mediatool.MediaReader.<init>(MediaReader.java:137) [xuggle-xuggler-5.4.jar:5.4.0]
    at com.xuggle.mediatool.ToolFactory.makeReader(ToolFactory.java:77) [xuggle-xuggler-5.4.jar:5.4.0]
    at logic.server.MediaCoder.createEncodingJobs(MediaCoder.java:39) [idoms-server:na]
    at controllers.FileCopyJob$ProgressListener.actionPerformed(FileCopyJob.java:127) [idoms-server:na]
    at controllers.FileCopyJob$DownloadCountingOutputStream.afterWrite(FileCopyJob.java:84) [idoms-server:na]
    at org.apache.commons.io.output.ProxyOutputStream.write(ProxyOutputStream.java:92) [commons-io-2.0.1.jar:2.0.1]
    at org.apache.commons.io.IOUtils.copyLarge(IOUtils.java:1263) [commons-io-2.0.1.jar:2.0.1]
    at org.apache.commons.io.IOUtils.copy(IOUtils.java:1236) [commons-io-2.0.1.jar:2.0.1]
    at controllers.FileCopyJob.doJob(FileCopyJob.java:58) [idoms-server:na]
    at play.jobs.Job.doJobWithResult(Job.java:50) [play-1.2.4.jar:na]
    at play.jobs.Job.call(Job.java:146) [play-1.2.4.jar:na]
    at play.jobs.Job$1.call(Job.java:66) [play-1.2.4.jar:na]
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303) [na:1.6.0_26]
    at java.util.concurrent.FutureTask.run(FutureTask.java:138) [na:1.6.0_26]
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:98) [na:1.6.0_26]
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:206) [na:1.6.0_26]
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) [na:1.6.0_26]
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) [na:1.6.0_26]
    at java.lang.Thread.run(Thread.java:662) [na:1.6.0_26]
2012-05-04 08:49:02,015 ERROR ~ Could not load library: xuggle; version: 5; Visit http://www.xuggle.com/xuggler/faq/ to find common solutions to this problem
08:49:02,115 ERROR ~ 

@6a91glkdf
Error during job execution (controllers.FileCopyJob)

Oops: UnsatisfiedLinkError
An unexpected error occured caused by exception UnsatisfiedLinkError: no xuggle in java.library.path

play.exceptions.UnexpectedException: Unexpected Error
    at play.Invoker$Invocation.onException(Invoker.java:244)
    at play.jobs.Job.onException(Job.java:124)
    at play.jobs.Job.call(Job.java:163)
    at play.jobs.Job$1.call(Job.java:66)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.access$301(ScheduledThreadPoolExecutor.java:98)
    at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:206)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.UnsatisfiedLinkError: no xuggle in java.library.path
    at java.lang.ClassLoader.loadLibrary(ClassLoader.java:1738)
    at java.lang.Runtime.loadLibrary0(Runtime.java:823)
    at java.lang.System.loadLibrary(System.java:1028)
    at com.xuggle.ferry.JNILibraryLoader.loadLibrary0(JNILibraryLoader.java:268)
    at com.xuggle.ferry.JNILibraryLoader.loadLibrary(JNILibraryLoader.java:171)
    at com.xuggle.ferry.JNILibrary.load(JNILibrary.java:161)
    at com.xuggle.ferry.FerryJNI.<clinit>(FerryJNI.java:16)
    at com.xuggle.ferry.Ferry.<clinit>(Ferry.java:25)
    at com.xuggle.xuggler.XugglerJNI.<clinit>(XugglerJNI.java:19)
    at com.xuggle.xuggler.IContainer.<clinit>(IContainer.java:1622)
    at com.xuggle.mediatool.MediaReader.<init>(MediaReader.java:137)
    at com.xuggle.mediatool.ToolFactory.makeReader(ToolFactory.java:77)
    at logic.server.MediaCoder.createEncodingJobs(MediaCoder.java:39)
    at controllers.FileCopyJob$ProgressListener.actionPerformed(FileCopyJob.java:127)
    at controllers.FileCopyJob$DownloadCountingOutputStream.afterWrite(FileCopyJob.java:84)
    at org.apache.commons.io.output.ProxyOutputStream.write(ProxyOutputStream.java:92)
    at org.apache.commons.io.IOUtils.copyLarge(IOUtils.java:1263)
    at org.apache.commons.io.IOUtils.copy(IOUtils.java:1236)
    at controllers.FileCopyJob.doJob(FileCopyJob.java:58)
    at play.jobs.Job.doJobWithResult(Job.java:50)
    at play.jobs.Job.call(Job.java:146)
    ... 8 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T22:36:15.380

然后问题是用于存储二进制文件的临时目录。由于另一个实例创建了这个临时位置，不同用户名下的第二个进程没有访问权限。开发人员现在已经意识到了这个问题。删除临时目录或授予权限可以解决问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-19T22:15:43.640

尽管这个问题已经很老了，并且 xuggle 已被弃用，但我想在查看这里的评论后，我仍然会向其他人展示我是如何解决这个问题的。

可以设置 java.io.tmpdir 属性，而不是删除文件夹或更改其权限。

像这样的例子：

```
java -Djava.io.tmpdir="~/custom/tempdir/" HelloWorld 
```

* * *

背景：

正如另一个答案的评论所建议的那样，将问题的根源追溯到创建相关临时文件夹的函数，表明 java 使用可以自定义的默认位置。

```
public static File createTempFile(String prefix,
                                  String suffix,
                                  File directory)
                           throws IOException 
```

> 在指定目录中创建一个新的空文件，使用给定的前缀和后缀字符串生成其名称。如果此方法成功返回，则保证：
> 
> 1.  返回的抽象路径名表示的文件在调用此方法之前不存在，并且
> 2.  此方法及其任何变体都不会在虚拟机的当前调用中再次返回相同的抽象路径名。
> 
> [...]
> 
> 如果目录参数为空，则将使用系统相关的默认临时文件目录。默认临时文件目录由系统属性 java.io.tmpdir 指定。在 UNIX 系统上，该属性的默认值通常是“/tmp”或“/var/tmp”；在 Microsoft Windows 系统上，它通常是“C:\WINNT\TEMP”。调用 Java 虚拟机时，可以为该系统属性赋予不同的值，但不保证对该属性的编程更改对该方法使用的临时目录有任何影响。

看：

1.  [JavaDoc createTempFile（字符串，字符串，文件）](http://docs.oracle.com/javase/1.5.0/docs/api/java/io/File.html#createTempFile(java.lang.String,%20java.lang.String,%20java.io.File))
2.  [旧版 Google 网上论坛讨论](https://groups.google.com/forum/?fromgroups=#!topic/xuggler-users/3RDIC7QWhCM)

# java - Integer.parseInt 是如何工作的

> ID：10449801
> 
> 赞同：-2
> 
> 时间：2012-05-04T13:27:31.613
> 
> 标签：java

方法 public static int parseInt(String str) 和 public static int parseInt(String str, int redix)

它是如何工作的？

& 他们之间有什么区别？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T13:29:19.713

您可以在[此处](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/Integer.java#Integer.parseInt%28java.lang.String,int%29)阅读实现。[以及这里](http://docs.oracle.com/javase/6/docs/api/java/lang/Integer.html#parseInt%28java.lang.String%29)的文档。

至于区别：

第一个假设字符串是十进制表示，而第二个期望另一个参数是表示的基础（二进制、十六进制、十进制等）

（`parseInt(String str)`实现为 return `parseInt(str, 10)`）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T13:32:15.653

哦，java，它开源有多好。来自JDK6中的整数：

```
 /**
 * Parses the specified string as a signed decimal integer value. The ASCII
 * character \u002d ('-') is recognized as the minus sign.
 *
 * @param string
 *            the string representation of an integer value.
 * @return the primitive integer value represented by {@code string}.
 * @throws NumberFormatException
 *             if {@code string} cannot be parsed as an integer value.
 */
public static int parseInt(String string) throws NumberFormatException {
    return parseInt(string, 10);
} 
```

并带有基数：

```
/**
 * Parses the specified string as a signed integer value using the specified
 * radix. The ASCII character \u002d ('-') is recognized as the minus sign.
 *
 * @param string
 *            the string representation of an integer value.
 * @param radix
 *            the radix to use when parsing.
 * @return the primitive integer value represented by {@code string} using
 *         {@code radix}.
 * @throws NumberFormatException
 *             if {@code string} cannot be parsed as an integer value,
 *             or {@code radix < Character.MIN_RADIX ||
 *             radix > Character.MAX_RADIX}.
 */
public static int parseInt(String string, int radix) throws NumberFormatException {
    if (radix < Character.MIN_RADIX || radix > Character.MAX_RADIX) {
        throw new NumberFormatException("Invalid radix: " + radix);
    }
    if (string == null) {
        throw invalidInt(string);
    }
    int length = string.length(), i = 0;
    if (length == 0) {
        throw invalidInt(string);
    }
    boolean negative = string.charAt(i) == '-';
    if (negative && ++i == length) {
        throw invalidInt(string);
    }

    return parse(string, i, radix, negative);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T13:29:43.247

它们的功能基本相同。 `parseInt(String str)`假设 base-10（除非字符串以`0x`or开头`0`）。 `parseInt(String str, int radix)`使用给定的基础。我没有看过代码，但我敢打赌第一个简单的调用`parseInt(str, 10)`（除了在这两种特殊情况下它会使用`16`and `8`）。

# css - HTML 内容仅使用滚动条滚动，而不是鼠标滚轮

> ID：10449802
> 
> 赞同：9
> 
> 时间：2012-05-04T13:27:38.633
> 
> 标签：css, scroll, overflow, mouseevent, mousewheel

我的`<div>`页面上有一个固定高度，并`overflow-y: scroll;`设置为当内容通过`<div>`. 没有什么不寻常的。

出于某种奇怪的原因，鼠标滚轮仅在光标位于*空白区域*`<div>`或滚动条本身上方时才会滚动内容。如果光标恰好位于 中的任何文本内容上`<div>`，则鼠标滚轮不会执行任何操作。

这在 Firefox 和 Chrome 中都会发生，因此它不仅仅是特定渲染引擎或其他东西的怪癖。

有`<div>`问题的覆盖在另一个 via 之上`position: absolute;`，所以我假设它的`<div>`背后以某种方式干扰了鼠标滚轮事件 - 但是你会认为问题会被逆转（`<div>`当*光标*在文本，而不是在空白处）。

其他人以前见过这样的事情吗？我难住了！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T14:35:30.690

明白了——因为我使用的是 FancyBox[鼠标滚轮插件](https://stackoverflow.com/questions/8565843/fancybox-how-to-scroll-page-when-fancybox-is-focused)。这会导致 FancyBox 捕获所有鼠标滚轮事件（用于滚动画廊）。因为我实际上并没有使用任何画廊，所以我不需要它，所以我把它拿出来并立即解决了我的问题。

# asp-classic - 经典 ASP 应用程序内存泄漏：设置 Windbg 时出现问题

> ID：10449804
> 
> 赞同：0
> 
> 时间：2012-05-04T13:27:40.707
> 
> 标签：asp-classic, iis-6, windbg

我在 IIS 6.0 上部署了一个经典的 asp 应用程序。应用程序每 1 或 2 小时崩溃一次。

为了测试内存泄漏，我安装了 Windbg 6。要监控过程，请执行以下步骤：

1.  执行命令：gflags.exe /i w3wp.exe +ust
2.  回收应用程序池
3.  将 Windbg 附加到相应的 w3wp 进程。

附加该进程后，将无法访问该应用程序。浏览器只是永远等待。如果我从 Windbg 退出，应用程序将开始正常工作。

我尝试搜索但没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T20:07:07.120

你为什么要附加WinDBG？为什么不将 DebugDiag 附加到进程 - 将其配置为跟踪 w3wp，并在内存超过某个限制或进程崩溃时生成内存转储。那里有很多可用的指南，但通常只有在内存转储*后才引入 WinDBG——并用它分析转储。*

# asp.net-mvc - 如何验证非模型属性？

> ID：10449807
> 
> 赞同：3
> 
> 时间：2012-05-04T13:27:54.903
> 
> 标签：asp.net-mvc, asp.net-mvc-3, validation

在我的应用程序中，我根据运行时数据动态呈现 UI。有一个模型，但它没有编译的属性。相反，我正在检查数据库并使用这样的帮助器呈现多个字段：

```
@Html.TextBox("name", RunTimeValue) 
```

现在我想对这些字段进行验证，但我不知道该怎么做。自定义 MetadataProvider 似乎不起作用，因为它仍然希望模型*具有*属性，而提供者提供属性。但是我的模型属性直到运行时才存在。我也不能使用，例如，`EditorFor`出于这个原因。那么如何在这种情况下注入验证（客户端和服务器）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T14:28:22.753

如果您启用了不显眼的验证，您可以通过这样做来作弊

```
@Html.TextBox("name", RunTimeValue, new Dictionary<string, object> { { "data-val", "true" }, { "data-val-required", "The name is required" } }) 
```

开箱即用的其他可能的 data-val 值是 data-val-regex（带有 data-val-regex-pattern）、data-val-range（带有 data-val-range-min 和 data-val-range-max )、data-val-number 和其他一些我没用过的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T13:38:23.300

您可以使用 JQuery 验证方法客户端验证，如下所示：

```
<script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.9/jquery.validate.min.js"></script>
<script type="text/javascript">
      $(document).ready(function () {
          $("form").validate({
              rules: {
                  name: "required"
              }
          });
      }); 
 </script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T13:38:48.840

你的限制在哪里？

数据库本身的约束，比如字符串的最大长度，是否为空等？在这种情况下，您可以从 db 中加载列类型并构建从中生成验证的工具。如果您根据请求生成模型，您还可以在运行时生成验证属性。您可能必须首先加载模型 + 约束，编写自己的绑定逻辑以使用提交的值更新模型，然后对其运行验证。

您的代码中有约束吗？如果是这种情况，您只需将运行时加载的字段映射到您的代码约束。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-05T19:50:41.940

在客户端，装配 jQuery.validate 似乎是最好的。

在服务器端，您需要查询相同的源以构造字段列表，然后查看每个字段的发布变量，根据需要进行验证，并在失败时添加一些不相关的摘要字符串。这不是非常 MVC 风格。

更好：建立一些模型来解释这一点，即使它是 IEnumerable ，其中 MyFields 是：

```
public class MyFields {
    public string Name { get; set; }
    public string Value { get; set; }
    public string ErrorMessage { get; set; }
    // TODO: Add fields for validation expectations: required, string length, etc
    // TODO: Maybe consider adding fields to specify the control needed: checkbox, select, etc
} 
```

如果您有这样的模型，则 post 上的服务器验证只是循环通过模型，确保每个预期字段都存在并且每个字段都通过验证。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-23T22:46:45.490

1.  确保您启用了不显眼的验证
2.  通过添加这些值来更改您的控件，例如示例

    `@Html.TextBox("name", RunTimeValue, new Dictionary<string, object> { { "data-val", "true" }, { "data-val-required", "The name is required" } })`

3.  在您的控件之后添加此行

    `@Html.ValidationMessage("name", "", new { @class = "text-danger" })`

4.  确保包含 JQuery 验证资源

    `@section Scripts {@Scripts.Render("~/bundles/jqueryval")}`

# eclipse - 如何从 Eclipse 市场访问个人捆绑更新站点

> ID：10449811
> 
> 赞同：2
> 
> 时间：2012-05-04T13:28:23.423
> 
> 标签：eclipse, update-site, eclipse-marketplace

当我尝试在 Eclipse 3.7 的“安装新软件”对话框中访问我的个人更新站点时，我收到以下错误，因此无法从该更新站点下载/安装任何插件：

```
org.eclipse.equinox.p2.core.ProvisionEcception

无法读取位于 http://marketplace.eclipse.org/user/16293/p2/repo 的存储库。
无法读取位于 http://marketplace.eclipse.org/user/16293/p2/repo 的存储库。
http://marketplace.eclipse.org/user/16293/p2/repo 不是有效的存储库位置。

```

这似乎不是一个暂时的问题。我在过去 2 个月左右收到此消息。我不知道发生了什么变化，因为在那之前它工作得很好。

这是 .log 中的堆栈跟踪：

```
!ENTRY org.eclipse.equinox.p2.ui 4 0 2012-05-04 15:05:49.778
!MESSAGE 无法读取位于 http://marketplace.eclipse.org/user/16293/p2/repo 的存储库。
!堆栈 1
org.eclipse.equinox.p2.core.ProvisionException：无法读取位于 http://marketplace.eclipse.org/user/16293/p2/repo 的存储库。
    在 org.eclipse.equinox.internal.p2.metadata.repository.SimpleMetadataRepositoryFactory.load(SimpleMetadataRepositoryFactory.java:128)
    在 org.eclipse.equinox.internal.p2.metadata.repository.MetadataRepositoryManager.factoryLoad(MetadataRepositoryManager.java:57)
    在 org.eclipse.equinox.internal.p2.repository.helpers.AbstractRepositoryManager.loadRepository(AbstractRepositoryManager.java:749)
    在 org.eclipse.equinox.internal.p2.repository.helpers.AbstractRepositoryManager.loadRepository(AbstractRepositoryManager.java:651)
    在 org.eclipse.equinox.internal.p2.metadata.repository.MetadataRepositoryManager.loadRepository(MetadataRepositoryManager.java:96)
    在 org.eclipse.equinox.internal.p2.metadata.repository.MetadataRepositoryManager.loadRepository(MetadataRepositoryManager.java:92)
    在 org.eclipse.equinox.p2.ui.ProvisioningUI.loadMetadataRepository(ProvisioningUI.java:402)
    在 org.eclipse.equinox.internal.p2.ui.model.MetadataRepositoryElement.getMetadataRepository(MetadataRepositoryElement.java:120)
    在 org.eclipse.equinox.internal.p2.ui.model.MetadataRepositoryElement.fetchChildren(MetadataRepositoryElement.java:70)
    在 org.eclipse.equinox.internal.p2.ui.model.RemoteQueriedElement.fetchDeferredChildren(RemoteQueriedElement.java:34)
    在 org.eclipse.ui.progress.DeferredTreeContentManager$1.run(DeferredTreeContentManager.java:235)
    在 org.eclipse.core.internal.jobs.Worker.run(Worker.java:54)
引起：java.io.IOException：http://marketplace.eclipse.org/user/16293/p2/repo 不是有效的存储库位置。
    在 org.eclipse.equinox.internal.p2.metadata.repository.SimpleMetadataRepositoryFactory.load(SimpleMetadataRepositoryFactory.java:102)
    ... 11 更多

```

出了什么问题？如何再次使用我的市场更新网站？

# wpf - wpf 键盘导航行为

> ID：10449815
> 
> 赞同：0
> 
> 时间：2012-05-04T13:28:37.277
> 
> 标签：wpf, grid, keyboard-navigation

我在我的 wpf 应用程序中遇到键盘导航问题。简化后，我有一个水平堆栈面板，其中包含一个菜单项列表，占据了屏幕宽度的四分之一。

在它的正下方，我有一个占据整个屏幕宽度的内容控件。

内容控件将根据突出显示的菜单项更改加载的用户控件。所有用户控件均以以下形式设置

```
<Grid>
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>
        <Grid Grid.Column="0" />
        <Grid Grid.Column="1" />
    </Grid>
</Grid> 
```

问题是，当我从堆栈面板按下向下键时，它会尝试将焦点放在其正下方的内部网格列上。第一列包含可聚焦的项目，但第二列不包含。这适用于堆栈面板中位于第一列正上方的前几个菜单项，但最终我得到直接位于第二列上方的菜单项，此时我无法向下导航。

如上面的 xaml 所示，我添加了外部网格，但这没有帮助。为什么焦点不会移动到网格（或内部网格）中可用的第一个可聚焦元素，如何强制焦点进入第 1 列？

我想我可以在我的视图模型中做到这一点，但我有很多页面都遇到了类似的问题，所以希望有一个比完全重写和控制所有键盘导航更简单的解决方案。

任何帮助将不胜感激。

更新：如果我在第一个网格上将 focuasable 设置为 true，则导航工作并最终出现在第 1 列中，但显然第一次按下“出现”键什么都不做，因为焦点被赋予了网格。我想要类似的行为，但导航将网格直接跳到第 1 列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T00:05:51.390

这个问题没有答案，所以我会发布我的解决方案。我仍然对它不满意，因为它似乎有点 hack，但直到出现更好的东西.....如上所述，键盘导航似乎可以在它周围使用网格，但我不希望网格有重点。我所做的是创建一个扩展网格的自定义控件。我覆盖获取键盘焦点，然后查看最后具有焦点的 uielement 并检查它是否在网格之外（即我正在导航到网格中）。如果是这样的话，那么我看看焦点可能来自哪个方向。我说可能是因为 PredictFocus 可能来自例如向上和向左按键，这就是为什么我认为这个解决方案有点 hacky。如果找到一个方向，那么我只需将焦点再次移向该方向。

```
protected override void OnGotKeyboardFocus(KeyboardFocusChangedEventArgs e)
    {
        UIElement previousFocus = (UIElement)e.OldFocus;
        if (previousFocus != null)
        {
            if (!previousFocus.IsDescendantOf(this))
            {
                if (previousFocus.PredictFocus(FocusNavigationDirection.Up).Equals(this))
                {
                    this.MoveFocus(new TraversalRequest(FocusNavigationDirection.Up));
                }
                else if (previousFocus.PredictFocus(FocusNavigationDirection.Down).Equals(this))
                {
                    this.MoveFocus(new TraversalRequest(FocusNavigationDirection.Down));
                }
                else if (previousFocus.PredictFocus(FocusNavigationDirection.Left).Equals(this))
                {
                    this.MoveFocus(new TraversalRequest(FocusNavigationDirection.Left));
                }
                else if (previousFocus.PredictFocus(FocusNavigationDirection.Right).Equals(this))
                {
                    this.MoveFocus(new TraversalRequest(FocusNavigationDirection.Right));
                }
            }
        }
        base.OnGotKeyboardFocus(e);
    } 
```

# c++ - ActiveX 调用 Javascript 函数

> ID：10449817
> 
> 赞同：0
> 
> 时间：2012-05-04T13:28:39.333
> 
> 标签：c++, plugins, activex, atl

我正在尝试从我的 ActiveX (ATL C++) dll 调用 Javascript。根据我所做的研究，您应该连接点。

添加到我的 idl 文件中

```
[
uuid(BDBFA5F9-B2CB-43b1-A414-CB6E3B15C6C2),
("Event interface for Test")
]
_ITestEvents
    {
    properties:
    methods:
    [id(1), helpstring("method Cancel")] void Cancel([in] char* x, [in] char* y);
    }; 
```

添加到我的类 .h 文件中

```
class ATL_NO_VTABLE CTest :
public CComObjectRootEx<CComSingleThreadModel>,
public CComCoClass<CTest, &CLSID_Test>,
public IConnectionPointContainerImpl<CTest>,
public CProxy_ITestEvents<CTest>,
public IObjectWithSiteImpl<CTest>,
public IObjectSafetyImpl<CTest,INTERFACESAFE_FOR_UNTRUSTED_CALLER | INTERFACESAFE_FOR_UNTRUSTED_DATA>,
public IProvideClassInfo2Impl<&CLSID_Test, &__uuidof(_ITestEvents), &LIBID_Test3Lib>,
public IDispatchImpl<ITest, &IID_ITest, &LIBID_Test3Lib, /*wMajor =*/ 1, /*wMinor =*/ 0>
    {
    public:

    BEGIN_COM_MAP(Clnaxprt)
    COM_INTERFACE_ENTRY_IMPL(IConnectionPointContainer)
    COM_INTERFACE_ENTRY(Ilnaxprt)
    COM_INTERFACE_ENTRY(IDispatch)
    COM_INTERFACE_ENTRY(IConnectionPointContainer)
    COM_INTERFACE_ENTRY(IObjectWithSite)
        COM_INTERFACE_ENTRY(IObjectSafety)
        COM_INTERFACE_ENTRY(IProvideClassInfo)
        COM_INTERFACE_ENTRY(IProvideClassInfo2)
    END_COM_MAP()

    BEGIN_CONNECTION_POINT_MAP(Clnaxprt)
        CONNECTION_POINT_ENTRY(__uuidof(_ITestEvents))
    END_CONNECTION_POINT_MAP() 
```

在 Visual Studio 中“实现了一个新的连接点”，它在 _ITestEvents_CP.h 中生成代码，该代码是使用方法名称 Fire_Cancel(char * x, char * y) 创建的。这就是我卡住的地方。我试图调用 Fire_Cancel 并且在调试生成的代码时没有连接，因此没有从 IDispatch 调用。我该怎么做才能创建连接？

仍然不确定 javascript 是如何工作的，但希望在我开始之前了解这部分。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T21:27:14.937

就我而言，HTML 和 Javascript 是错误的。如果您使用符号“id::function_name”，请确保它位于对象标记之后。如果符号是“for=id event=cancel”，那么它可以位于之前/之后

# haskell - Warp/WAI 的线程安全状态

> ID：10449819
> 
> 赞同：4
> 
> 时间：2012-05-04T13:28:44.357
> 
> 标签：haskell, concurrency, state, haskell-warp, haskell-wai

我想编写一个 Web 服务器，将其状态存储在一个带有/的`State`单子中。像这样的东西：`wai``warp`

```
{-# LANGUAGE OverloadedStrings #-}
import Network.Wai
import Network.Wai.Handler.Warp
import Network.HTTP.Types
import Control.Monad.State
import Data.ByteString.Lazy.Char8

main = run 3000 app

text x = responseLBS
        status200
        [("Content-Type", "text/plain")]
    x

app req = return $ text "Hello World"

app1 req = modify (+1) >>= return . text . pack . show

-- main1 = runStateT (run 3000 app1) 0 
```

当然，注释行不起作用。目的是将计数器存储在 state monad 中，并在每次请求时显示其递增的值。

另外，我如何获得线程安全？warp 是顺序还是并行运行我的中间件？

该州有哪些可用选项 - 除了`IORef`我可以在这种情况下使用之外，还有什么可以使用的吗？

我知道国家提供安全，但似乎 wai 不允许国家。

我只需要一个可以从其他地方调用的非常简单的单线程 RPC。`Haxr`包需要一个单独的 Web 服务器，这是一个矫枉过正。请参阅[从 Node.JS 调用 Haskell](https://stackoverflow.com/q/9897623/805266) - 它没有任何建议，因此我使用 Wai/Warp 和 Aeson 编写了一个简单的服务器。但似乎 WAI 旨在支持并发实现，因此它使事情变得复杂。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T13:37:52.660

如果它在`State`monad 中，则它在设计上是线程安全的。没有可能的共享状态的并发 IO 操作。它要么是线程安全的，要么无法编译。

如果作为设计的一部分，您可以真正并行访问共享状态（即更新全局计数器的单独 forkIO 线程），那么您需要在[monad](http://hackage.haskell.org/packages/archive/stm/2.1.1.2/doc/html/Control-Monad-STM.html#v%3aatomically)[`MVar`](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Control-Concurrent-MVar.html) （或其他一些事务屏障）中使用和或或以确保原子性。[`TVar`](http://hackage.haskell.org/packages/archive/stm/2.1.1.2/doc/html/Control-Concurrent-STM-TVar.html)[`STM`](http://hackage.haskell.org/packages/archive/stm/2.1.1.2/doc/html/Control-Monad-STM.html#v%3aatomically)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T15:47:44.823

如果您与状态的交互可以通过一次调用来表达`atomicModifyIORef`，您可以使用它，并且您不需要显式地序列化对状态的访问。

```
import Data.IORef

main = do state <- newIORef 42
          run 3000 (app' state)

app' :: IORef Int -> Application
app' ref req
   = return . text . pack . show `liftM` atomicModifyIORef ref (\st -> (st + 1, st + 1)) 
```

如果您的交互更复杂，并且您需要强制执行请求的完全序列化，您可以将 an`MVar`与`StateT`.

```
import Control.Concurrent.MVar
import Control.Monad.State.Strict

main = do state <- newMVar 42
          run 3000 (app' state)

app' :: MVar Int -> Application
app' ref request
   = do state <- takeMVar ref
        (response, newState) <- runStateT (application request) state
        putMVar newState --TODO: ensure putMVar happens even if an exception is thrown
        return response

application :: Request -> StateT Int (ResourceT IO) Response
application request = modify (+1) >>= return . text . pack . show 
```

# android - 非对称 android TableLayout 拉伸（一些）列

> ID：10449820
> 
> 赞同：0
> 
> 时间：2012-05-04T13:28:51.027
> 
> 标签：android, tablelayout, stretched

我写了下面的布局`Activity`，只有一个标题和四个 2x2 格式的按钮：

```
<?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:id="@+id/layout_main"
    android:gravity="center"
    android:background="@drawable/bgr_main">

<TableRow android:gravity="center_horizontal" >
    <ImageView
        android:id="@+id/img_qtitle"
        android:contentDescription="@string/qtitle_desc"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/app_title" />
</TableRow>

<TableRow android:gravity="center_horizontal" >
    <Button
        android:id="@+id/button_showlist"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_margin="10dip"
        android:background="@drawable/button_list"
        android:onClick="showList" />

    <Button
        android:id="@+id/button_playrandom"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_margin="10dip"
        android:background="@drawable/button_play"
        android:onClick="playRandom" />     
</TableRow>

<TableRow android:gravity="center_horizontal" >
    <Button
        android:id="@+id/button_playfav"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_margin="10dip"
        android:background="@drawable/button_fav"
        android:onClick="playLastFav" />

    <Button
        android:id="@+id/button_showmore"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_margin="10dip"
        android:background="@drawable/button_more"
        android:onClick="showMore" />       
</TableRow> 
</TableLayout > 
```

标题图像不像行的几个按钮（加上填充）那么宽。我的问题是每行中的第一个按钮图像是水平拉伸的。规范化非对称表的方法是什么？

* * *

v.2 在 gopher 之后

```
<TableLayout  xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:id="@+id/layout_main"
    android:gravity="center"
    android:background="@drawable/bgr_main">

<TableRow android:gravity="center_horizontal" >
    <ImageView
        android:id="@+id/img_qtitle"
        android:contentDescription="@string/qtitle_desc"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:src="@drawable/quieto_title" />
</TableRow>

<TableRow android:gravity="center_horizontal" >
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent">

    <Button
        android:id="@+id/button_showlist"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="right"
        android:layout_margin="5dip"
        android:background="@drawable/button_list"
        android:onClick="showList" />   

    <Button
        android:id="@+id/button_playrandom"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="left"
        android:layout_margin="5dip"
        android:background="@drawable/button_play"
        android:onClick="playRandom" />
    </LinearLayout> 
</TableRow>

<TableRow android:gravity="center_horizontal" >    
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent">

    <Button
        android:id="@+id/button_playfav"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_margin="5dip"
        android:layout_gravity="left"
        android:background="@drawable/button_fav"
        android:onClick="playLastFav" />

    <Button
        android:id="@+id/button_showmore"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="right"
        android:layout_margin="5dip"
        android:background="@drawable/button_more"
        android:onClick="showMore" />
    </LinearLayout> 
</TableRow> 
</TableLayout > 
```

这样可行！Eclipse 说：“这个 LinearLayout 布局或它的 TableRow 父级是没用的”，但对我来说没关系。我不会告诉客户的！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T13:49:00.137

您所看到的屏幕截图会有所帮助。

**ImageView 没有填满整个表格**

在 tablelayout 属性中，尝试指定`android:stretchColumns="*"`哪些允许列拉伸以填充表格。我相信如果允许所有列拉伸（如 * 表示），那么它们将拉伸，因此它们是均匀的（占用相同数量的空间）。

**按钮被拉伸**

您指定`layout_width="wrap_content"`了通常会达到您想要的效果，但在表格布局的情况下，您不能指定宽度。这是来自 TableRow android 文档：

```
The children of a TableRow do not need to specify the layout_width and layout_height attributes in the XML file. TableRow always enforces those values to be respectively MATCH_PARENT and WRAP_CONTENT. 
```

所以你需要在表格行中放置另一个容器，将你的按钮放在那个容器中，并将你的按钮设置为环绕并对齐到中间。像这样的东西应该工作：

```
<TableRow ...>
    <!-- Create a container -->
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent">
        <!-- Place button inside Container -->
        <Button 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            <!-- Place button in the middle of the container -->
            android:layout_gravity="center"
            .../>
   </LinearLayout>
</TableRow> 
```

# c# - 将部分类合并为一个类的工具？

> ID：10449825
> 
> 赞同：6
> 
> 时间：2012-05-04T13:29:05.683
> 
> 标签：c#, visual-studio, visual-studio-2010, partial-classes

是否有将部分类合并为一个非部分类的工具？

我不能使用 Reflector，因为我需要变量名等来匹配。

**编辑：**

我有数百个要合并的部分类，所以剪切粘贴是不现实的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T13:59:43.237

Resharper 具有“复制类型”功能，允许将类型的所有部分复制到单个文件中：http: [//www.jetbrains.com/resharper/documentation/reviewers_guide.html#refactorings](http://www.jetbrains.com/resharper/documentation/reviewers_guide.html#refactorings)

但是，需要手动操作，因为您必须为每个文件打开至少一个文件并调用该功能。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-15T12:08:02.820

我知道有人提到过使用 ReSharper，我正在使用 ReSharper 6.1，如果我单击`partial`部分类文件中的关键字，然后按 ALT+ENTER，它会给出一个选项“合并部分声明”。

我认为，如果这是一个相当复杂的课程，那么它很难做到这一点。但是我在一个更简单的版本上对其进行了测试，该版本具有两个不同的文件和一个在两者中定义的具有不同属性的部分类，并且它设法将它们很好地合并。

**编辑：** 执行此操作的自定义工具，我不确定。抱歉，如果这不能回答您的原始问题（只注意到您现在不能使用 Reflector，所以我认为 ReSharper 也不可能）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T13:31:15.523

```
Edit -> Copy -> Paste. 
```

不知道任何其他更简单的工具。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T13:32:02.847

只需将代码从一个文件复制到另一个文件，从另一个文件中删除第一个文件和部分关键字。

如果您有数百个部分类，那么让机器人做到这一点应该很容易，只需 x100 次。

# jquery-ui - 我无法让 jQueryUI 按钮集和按钮始终如一地工作

> ID：10449829
> 
> 赞同：0
> 
> 时间：2012-05-04T13:29:19.680
> 
> 标签：jquery-ui, button

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T14:30:45.810

You have to include one of the themes' CSS files for the jQuery UI widgets to render themselves correctly. I updated your fiddle with the UI Lightness theme file from Google's CDN repository.

You also have to close your `ready` handler properly to avoid syntax errors:

```
$(document).ready(function() {
    $('#rx-button').buttonset();
    $('#pr-button').button();
});  // <-- Do not forget the closing parenthesis and the semicolon. 
```

You will find the updated fiddle [here](http://jsfiddle.net/8ygnv/7/).

# opa - OPA：更换顶栏

> ID：10449836
> 
> 赞同：2
> 
> 时间：2012-05-04T13:29:39.397
> 
> 标签：opa

我已经看到 Bootstrap 顶栏已被弃用。

什么是替代方案？使用 WAppFrame 和 set_top_bar 方法？

或者使用导航模块提供的方法？但是这个模块中没有顶栏。

你有什么建议？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T14:59:54.393

已弃用的版本适用于 Bootstrap <= 1.4.0。

如果你使用新的 CSS，你应该使用这个模块：http: [//doc.opalang.org/module/stdlib.widgets.bootstrap/WBootstrap](http://doc.opalang.org/module/stdlib.widgets.bootstrap/WBootstrap)

的等价物`Navigation.topbar`是`Navigation.navbar`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T20:05:14.413

仅供参考，这是我用来获得相同行为的代码 topbar ：

```
nav = WB.Navigation.nav([{active:<>Home</>, onclick:ignore, href:some("/")}, {inactive:<>LoginLess</>, onclick:ignore, href:some("/boubou")}, {inactive:<>Sign up</>, onclick:ignore, href:some("user/new")}], false)
navBar = WB.Navigation.brand(<>Brand New</>, none, ignore) <+> nav
WB.Navigation.navbar(nav) 
```

# gcc - Ubuntu 升级后链接到库的问题

> ID：10449840
> 
> 赞同：0
> 
> 时间：2012-05-04T13:30:00.800
> 
> 标签：gcc, ubuntu, linker

在最近使用新的 Ubuntu 安装（以前是 11.04，现在是 12.04）后，我的项目似乎无法正确链接。我尝试链接到开源渲染库 LuxRender 的 API。我的代码是用 C++ 编写并使用 g++ 编译的。

我已经在这个问题上花费了很多时间，并且遇到了一些类似症状的问题的解决方案。但是，我还没有找到解决方案，所以我来这里寻求帮助。

示例代码 testmain.cc：

```
#include <lux_api.h>

int main (int argc, char* argv[]) {
    lux_instance* lux = CreateLuxInstance("Test");
    DestroyLuxInstance(lux);

    return 0;
} 
```

问题

```
$ g++ -c -o testmain.o testmain.cc -Wall -g -pedantic -I/home/taz/lux/lux-build/lux/cpp_api -I/home/taz/lux/lux-build/lux/core -I/home/taz/lux/lux-build/lux/core/queryable
$ g++ -o testmain testmain.o -llux
testmain.o: In function `main':
/home/taz/Documents/msc/test/testmain.cc:4: undefined reference to `CreateLuxInstance'
/home/taz/Documents/msc/test/testmain.cc:5: undefined reference to `DestroyLuxInstance'
collect2: ld returned 1 exit status 
```

首先，请注意，虽然其他人自 Ubuntu 11.10 以来存在链接问题，但链接顺序是正确的（`-llux`after `testmain.o`），所以这不是问题。

[其次，CreateLuxInstance 和 DestroyLuxInstance 函数是使用lux_api.h](http://src.luxrender.net/lux/file/0488d0d3ad0a/cpp_api/lux_api.h)中的 C 风格命名（with `extern "C"`）导出的。我包含了发生这种情况的头文件，所以编译器应该知道它，对吗？（使用 . 检查预处理器输出。）函数确实正确出现在库中，因此它们应该可供链接器使用：`g++ -E`

```
$ nm -s /usr/local/lib/liblux.so | grep LuxInstance
000000000008c440 t CreateLuxInstance
000000000008c4d0 t DestroyLuxInstance 
```

第三，我使用维护者的 cmake 文件从源代码编译（并在升级后重新编译）这个库。但即使我从他们的网站上获取编译版本，我也会遇到同样的问题。在这两种情况下，库都匹配包含的标头。

最后，我知道通过传递`-Wl,--verbose`查看链接器实际使用的库文件来使用正确的库文件。

我在这里想念什么？

一些版本：

```
$ ld --version
GNU ld (GNU Binutils for Ubuntu) 2.22
Copyright 2011 Free Software Foundation, Inc.
This program is free software; you may redistribute it under the terms of
the GNU General Public License version 3 or (at your option) a later version.
This program has absolutely no warranty.

$ g++ --version
g++ (Ubuntu/Linaro 4.6.3-1ubuntu5) 4.6.3
Copyright (C) 2011 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

$ uname -a
Linux linuxtaz 3.2.0-24-generic #37-Ubuntu SMP Wed Apr 25 08:43:22 UTC 2012 x86_64 x86_64 x86_64 GNU/Linux

$ lsb_release -irc
Distributor ID: Ubuntu
Release:    12.04
Codename:   precise 
```

## 编辑：

在构建 luxShared（与 Lux api 一起使用的共享库）时，问题出现在 de LuxRender 分发中。为什么在 Ubuntu 升级后出现这个问题对我来说仍然是一个谜，但对于其他正在努力解决这个问题的人来说，这是我的“解决方案”：

我想要构建的发行版是[v1.0-RC1](http://src.luxrender.net/lux/file/0488d0d3ad0a)。在文件中`cpp_api/export_defs.h`，我添加了以下几行：

```
#ifdef LUX_DLL
 #define CPP_API __attribute__ ((visibility ("default")))
#endif 
```

编译器抱怨 CPP_API 被双重声明，但我忽略了这一点。现在该库使用公开可用的 API 函数构建：

```
$ nm ./liblux.so | grep LuxInstance
000000000008c6c0 T CreateLuxInstance
000000000008c750 T DestroyLuxInstance 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T05:34:51.560

> 这些函数确实正确出现在库中，因此它们应该可供链接器使用：

```
$ nm -s /usr/local/lib/liblux.so | grep LuxInstance
000000000008c440 t CreateLuxInstance
000000000008c4d0 t DestroyLuxInstance 
```

不，他们**没有**。`t`符号是*本地*的（不能在定义它们的库之外使用）。你想要`T`（全局）符号。

如果这些符号是由`lux_api.h`（它们似乎是）导出的，则该库尚未正确构建。为您的发行版打开一个错误。

# facebook - 如何 Google + 样式文本输入扩展框

> ID：10449842
> 
> 赞同：0
> 
> 时间：2012-05-04T13:30:06.153
> 
> 标签：facebook, text, input, google-plus

在 G+ 和 Facebook 中，当您单击文本输入框（用于更新）时，它会展开并为您提供更多选项。例如提交按钮或另一个文本输入字段。

在我的一生中，我找不到如何称呼它，以便我可以查看一些预制的 css3/jquery 插件/教程。

这是我能找到的最接近的，但它并不是我想要的。 [http://www.appelsiini.net/projects/jeditable/default.html](http://www.appelsiini.net/projects/jeditable/default.html)

有什么提示吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T06:36:14.563

只需使用普通的 javascript/jquery 来隐藏/显示您想要的示例

```
<form><table><tr><td><lable id='lab'><input style='display:none' type='text' id='name'></input></label></td></tr></table></form> 
```

在这里你的 JS

```
$(function(){

$("#lab).click(function(){

$(this).css("display","none");

$("#name").css("display","block");
}
});

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T14:25:57.083

Facebook 实际上是通过 AJAX 加载另一个 CSS 样式表来实现的，但这里有一个常规的 Javascript 函数可以解决问题：

```
<html>
    <head>
        <title>Test</title>
        <script type="text/javascript">
            function showDiv() {
                var area = document.getElementById("inputbox");
                area.style.height = "80px";
                var div = document.getElementById("hiddendiv");
                div.style.display="block";
            }
        </script>
    </head>
    <body>
        <textarea id="inputbox" onfocus="showDiv()" style="height:30px;">Put focus on me...</textarea>
        <div id="hiddendiv" style="display:none;">to show me!</div>
    </body>
</html> 
```

# javascript - 打印 Javascript 而不是 ASP（经典）输出

> ID：10449845
> 
> 赞同：2
> 
> 时间：2012-05-04T13:30:12.173
> 
> 标签：javascript, asp-classic

我正在尝试制作一个列出记录的页面，并允许显示一个表单来编辑一个值。它重新加载页面并在末尾添加“？edit = true”，因此它知道将数据拉入表单，而不是列出所有条目。我在将其加载到 iframe 以替换主体不起作用后执行此操作。而且我已经设法以完全相同的方式以不同的形式做到这一点 - 除了它有效。（其实我有两个显示表格的函数，只会显示1个）

我得到的输出而不是表格是

> ; }catch(e) { 警报(e); }

这是最后加载的底部：

```
 <script type="text/javascript">
        try {

        document.getElementById("viewb").style.display = "none";
        document.getElementById("reviewb").style.display = "none";
        document.getElementById("editb").style.display = "none";
        document.getElementById("reeditb").style.display = "none";
        document.getElementById("delb").style.display = "none";
        document.getElementById("panel").innerHTML = "<%call showAScreen()%>";

        }catch(e) {
            alert(e);
        }
    </script> 
```

这是第一个定义的 asp 函数 - 位于顶部的 JavaScript 函数之后：

```
<% sub showAScreen()

If Request.QueryString("edit") <> "" Then
    showedits()
else
    showControlScreen()
end if 
end sub %> 
```

这是其余的：

```
<% sub showedits() 'Show edit record form

        dim selsql
        selsql = ""
        selsql = selsql & "SELECT A.[NBK] as 'NBK ID'"
        selsql = selsql & " ,A.[PersonNumber] as 'Person Number'"
        ...
        selsql = selsql & " ,A.[AOIScore] as 'AOI Score'"
        selsql = selsql & " ,A.[VendorName] as 'Vendor Name'"
        selsql = selsql & "   FROM (([ReportingDevDB].[dbo].[bAssociateRoster] as A left join "
        selsql = selsql & "[ReportingDevDB].[dbo].[bAssociateRoster] as B on A.ManagerNBK = B.NBK) left join"
        selsql = selsql & "[ReportingDevDB].[dbo].[bAssociateRoster] as C on A.TeamLeadNBK = C.NBK)"
        selsql = selsql & " where A.NBK='" & Request.QueryString("edit") & "'"

        on error resume next
        set rs = cnt.execute(selsql)
        dim outstr
        outstr = "<table><tr><td id='content'>"'Frame for code to be pulled from.
        outstr = outstr & "<form id='form' method='post' action='NewRosterManager.asp?selectnbk=" & rs(0) & "&update=true'>"

            outstr = outstr & "<table class='bluetable'>"
            outstr = outstr & "<thead><tr><td colspan='32'>Edit Data</td></tr></thead>"
            outstr = outstr & "<tbody class='list' style='text-align:left'>"
            outstr = outstr & "<tr><td>NBK:</td><td id='RecordNBK'>" & rs(0) & "</td></tr>"
            ...
            outstr = outstr & "<tr><td>Vendor Name:</td><td><input type='text' id='e_VendorName' name='e_VendorName' value='" & rs(25) & "'></td></tr>"
            outstr = outstr & "</tbody></table><input type='submit'></form>"

        outstr = outstr & "</td></tr></table>"'Frame for code to be pulled from.
        Response.write "<br/>" & outstr & "<br/>"

        Response.write selsql 'this doesn't work... can't test query
end sub %> 
```

再次......在过去的一周里，我已经尝试了所有我能想到的东西，但在我的谷歌搜索中我找不到任何类似的东西。我什至无法打印查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T13:33:38.580

您生成的应该用引号引起来，如下所示：

```
document.getElementById("panel").innerHTML = "<%call showAScreen()%>"; 
```

注意 <% 和 %> 标记周围的引号。

ASP 将调用 showAScreen 并将其插入 javascript 的引号内，因此输出将如下所示：

```
document.getElementById("panel").innerHTML = "&lt;table&gt;...&lt;/table&gt;"; 
```

更新：在 showAScreen 中，执行以下操作：

```
return "<br/>" & outstr & "<br/>" 
```

进而

```
Response.write "document.getElementById('panel').innerHTML = """ & showAScreen() & """" 
```

# android - 带有 ZXing 错误的 QR 码扫描仪

> ID：10449846
> 
> 赞同：0
> 
> 时间：2012-05-04T13:30:25.777
> 
> 标签：android, zxing, qr-code, scanning

我有这个计划扫描二维码并将值返回给用户的简单代码：

```
public class QRCodeScanner extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
}

private static final int REQUEST_BARCODE;

Intent intent = new Intent("com.google.zxing.client.android.SCAN");
intent.putExtra("SCAN_MODE", "QR_CODE_MODE");  
startActivityForResult(intent, REQUEST_BARCODE);

Toast toast = Toast.makeText(this, "Start scanning QR code", Toast.LENGTH_SHORT);
toast.show();
} 
```

现在我知道我需要将 src/com.google.zxing.client.* 文件夹放在这个项目的某个地方，但是在哪里？当我将它复制粘贴到我自己的 src/ 文件夹时，它们都会出现原始 CaptureActivity 项目中不存在的错误。我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T13:32:32.033

事实上，你没有。当您将应用程序配置为通过 Intent 使用 Zxing 时，唯一的要求是条形码扫描仪存在并安装在用户的设备上。Android 将处理打开应用程序并将扫描的条形码返回给您。

# ajax - 处理 AJAXified 组件的 JSF 2.0 异常的正确方法是什么？

> ID：10449862
> 
> 赞同：13
> 
> 时间：2012-05-04T13:31:02.317
> 
> 标签：ajax, jsf-2, exception-handling

我已经设置了 web.xml，以便任何 java.lang.Throwable（即任何未捕获的异常或错误）都将转发到错误页面。但是，对于 AJAXified 组件，异常不会通过此机制路由到错误页面。

我的测试用例是一个简单的`CommandButton`绑定到一个总是抛出`RuntimeException`. 似乎最好的做法是让操作方法捕获异常并添加`FacesMessage`类型错误严重性。这是人们做的吗？有没有办法配置 JSF，以便在 AJAXified 组件的支持 bean 方法抛出异常时可以显示错误页面？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-04T14:56:50.770

您需要为此实现一个自定义，当 ajax 请求中发生异常时，[`ExceptionHandler`](http://docs.oracle.com/javaee/6/api/javax/faces/context/ExceptionHandler.html)它*基本上执行以下操作：*

```
String errorPageLocation = "/WEB-INF/errorpages/500.xhtml";
context.setViewRoot(context.getApplication().getViewHandler().createView(context, errorPageLocation));
context.getPartialViewContext().setRenderAll(true);
context.renderResponse(); 
```

`web.xml`如果您想考虑错误页面，这并非微不足道。您需要解析整个内容`web.xml`以找到错误页面位置。此外，当渲染响应期间发生异常时，您基本上需要自己重建整个视图。OmniFaces组件库[正好](http://omnifaces.org)有这样一个异常处理程序，[`FullAjaxExceptionHandler`](http://omnifaces.org/docs/javadoc/current/org/omnifaces/exceptionhandler/FullAjaxExceptionHandler.html). 您可以在此处找到完整的源代码，并[在](http://showcase.omnifaces.org/exceptionhandlers/FullAjaxExceptionHandler)[此处](https://github.com/omnifaces/omnifaces/blob/master/src/main/java/org/omnifaces/exceptionhandler/FullAjaxExceptionHandler.java)找到展示示例。

### 也可以看看：

*   [在 JSF 错误处理程序中使用 ExternalContext.dispatch 会导致页面呈现损坏](https://stackoverflow.com/questions/15474345/using-externalcontext-dispatch-in-jsf-error-handler-causes-corrupt-page-renderin/15476224#15476224)
*   [JSF/PrimeFaces ajax 请求上的会话超时和 ViewExpiredException 处理](https://stackoverflow.com/questions/11203195/session-timeout-and-viewexpiredexception-handling-on-jsf-primefaces-ajax-request/11206114#11206114)

# jquery - jquery 在 IE 8.0 和其他浏览器中使用 xml 作为 html

> ID：10449864
> 
> 赞同：0
> 
> 时间：2012-05-04T13:31:05.743
> 
> 标签：jquery, jquery-xml

我需要从服务器获取一个 xml 字符串，其格式为：

```
<xml><material>
<record>
<id>..</id>
<name>..</name>
<quantity>..</quantity>
<plink>..</plink>
</record>
<record>
..
</record>
</xml></material> 
```

客户端获取此 xml 并对其进行处理：

```
$.ajax({
  url:'getrecords.php',
  cache:false,
  type:"GET",
  dataType:'html',
  success:function (html){
    var records=$(html).find("record");
    alert(records.length);
  } 
```

我的问题是，此代码在 Chrome 和 Firefox 中运行良好，但在 IE 8.0（我使用的是 8.0）中运行良好。它在 IE 中警告 0，而在 chrome 和 firefox 中警告正确长度。

我试试这个，但它也显示 IE 中的记录长度为 0，但在 Chrome 中很好

```
var records=$("<xml><root><item></item></root></xml>").find("item"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T14:02:19.150

如果返回的是 xml，为什么要将 dataType 设置为 html？尝试使用 dataType 'xml'

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T14:05:28.523

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script src="../../../Scripts/jquery-1.7.1.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            var xml = '<?xml version="1.0" encoding="utf-8" ?><material><record><id>1</id><name>A</name><quantity>10</quantity>'
                    + '<plink>test</plink></record><record><id>2</id><name>B</name><quantity>20</quantity><plink>test1</plink>'
                    + '</record><record><id>3</id><name>C</name><quantity>34</quantity><plink>test2</plink></record><record>'
                    + '<id>4</id><name>B</name><quantity>45</quantity><plink>test6</plink></record></material>';

            //            $.ajax({
            //                url: 'getrecords.php', cache: false, type: "GET", dataType: 'html',
            //                success: function (xml) { 
            var data = $($.parseXML(xml));
            var records = $(data).find('record');
            alert(records.length);
            //                }
            //            });
        });
    </script>
</head>
<body>
    <?xml version="1.0" encoding="utf-8" ?>
    <material>
  <record>
    <id>1</id>
    <name>A</name>
    <quantity>10</quantity>
    <plink>test</plink>
  </record>
  <record>
    <id>2</id>
    <name>B</name>
    <quantity>20</quantity>
    <plink>test1</plink>
  </record>
  <record>
    <id>3</id>
    <name>C</name>
    <quantity>34</quantity>
    <plink>test2</plink>
  </record>
  <record>
    <id>4</id>
    <name>B</name>
    <quantity>45</quantity>
    <plink>test6</plink>
  </record>
</material>
</body>
</html> 
```

# c++ - 提升进程间消息队列，打开和关闭

> ID：10449869
> 
> 赞同：2
> 
> 时间：2012-05-04T13:31:27.663
> 
> 标签：c++, boost-interprocess

我有两个进程，一个写入（create_only），另一个读取（open_only）。如果编写器进程正在结束，我删除队列。然而，读者能够继续执行 try_receive 并且不会引发异常或启用通知。检查队列是否存在的推荐方法是什么，我应该调用 get_max_msg 还是在进程间有一些我错过的其他调用？

# c# - 使用 MVVM 模式获取 WPF 组合框 SelectedItem 属性

> ID：10449870
> 
> 赞同：-1
> 
> 时间：2012-05-04T13:31:34.977
> 
> 标签：c#, wpf, mvvm

我正在`combobox`使用`MVVM`模式将 Observable 集合绑定到`combobox`a`SelectedItem`我想象它的方式是，必须有某种方法来创建`XAML`指向所选项目的绑定，并且我以后可以在我的视图模型中使用它。我似乎无法弄清楚的是如何......

关于如何实现这一目标的任何建议？

**XAML**

```
<ComboBox SelectedIndex="0" DisplayMemberPath="Text" ItemsSource="{Binding Path=DocumentTypeCmb,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" 
          Grid.Column="1" Grid.Row="4" Margin="0,4,5,5" Height="23"
          HorizontalAlignment="Left" Name="cmbDocumentType" VerticalAlignment="Bottom"
          Width="230" /> 
```

**代码**

```
//Obesrvable collection property
private ObservableCollection<ListHelper> documentTypeCollection = new ObservableCollection<ListHelper>();
public ObservableCollection<ListHelper> DocumentTypeCmb
{
    get
    {
        return documentTypeCollection;
    }
    set
    {
        documentTypeCollection = value;
        OnPropertyChanged("DocumentTypeCmb");
    }
}

//Extract from the method where i do the binding
documentTypeCollection.Add(new ListHelper { Text = "Item1", IsChecked = false });
documentTypeCollection.Add(new ListHelper { Text = "Item2", IsChecked = false });
documentTypeCollection.Add(new ListHelper { Text = "Item3", IsChecked = false });

DocumentTypeCmb = documentTypeCollection; 

//Helper class
public class ListHelper
{
    public string Text { get; set; }
    public bool IsChecked { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-04T13:35:57.617

试试这个：

```
public ListHelper MySelectedItem { get; set; } 
```

和 XAML：

```
<ComboBox ItemsSource="{Binding Path=DocumentTypeCmb,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}" 
      SelectedItem={Binding MySelectedItem}
      /> 
```

您只需要在 ViewModel 中有一个公共属性来获取/设置正确的类型，然后使用绑定将所选项目分配给它。请注意，SelectedItem 是一个依赖属性，因此您可以像这样绑定，但对于列表控件，SelectedItems（注意复数）**不是**依赖属性，因此您无法将其绑定回您的 VM - 为此有一个简单的解决方法可以使用而是一种行为。

另请注意，在我的示例中我没有实现属性更改通知，因此如果您从 VM 更改所选项目，它不会在 UI 中更新，但这很容易放入。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-04T13:37:12.363

当然，`ComboBox`有财产`SelectedItem`。您可以在视图模型中公开属性并在 XAML 中创建双向绑定。

```
public ListHelper SelectedDocumentType
 {
    get { return _selectedDocumenType; }
    set 
    {
        _selectedDocumentType = value;
        // raise property change notification
    }
}
private ListHelper _selectedDocumentType; 
```

…</p>

```
<ComboBox ItemsSource="{Binding DocumentTypeCmb, Mode=TwoWay}"
          SelectedItem="{Binding SelectedDocumentType, Mode=TwoWay}" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T13:36:38.697

这个怎么样？

```
SelectedItem={Binding SelectedDocumentType} 
```

# xml - jsp 使用 xsl 将 xml 转换为 html

> ID：10449875
> 
> 赞同：1
> 
> 时间：2012-05-04T13:31:42.983
> 
> 标签：xml, html, jsp, taglib

我有一个 Web 应用程序，我想在 jsp 中使用我的自定义 xsl 将 xml 转换为 html。

当我使用 altovaXMLSPY 测试 xml 和 xsl 时，它可以工作。

但是在jsp中，出现了问题。

该目录如下所示：

```
--root
   my.jsp
  --WEB-INF
    taglibs-xsl.tld
    --classes
      my.xml
      my.xsl 
```

jsp 看起来像这样：

```
<%@ page language="java" contentType="text/html; charset=UTF-8"  pageEncoding="UTF-8"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<%@taglib uri="http://jakarta.apache.org/taglibs/xsl-1.0" prefix="xsl"%>
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>

    <%@ page%>

    <title>my jsp</title>
    </head>

    <body>
        <p>
            <xsl:apply nameXml="WEB-INF/classes/my.xml" xsl="WEB-INF/classes/my.xsl" /> 
        </p>
    </body>
    </html> 
```

错误是：

> javax.servlet.jsp.JspException：缺少 bean 'WEB-INF/classes/my.xml'

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T13:38:28.147

我不确定，但我猜 xsl:apply 请求获取 XML，

请求无法访问WEB-INF目录，

也许将您的 xml/xsl 文件移到 WEB-INF 目录之外，看看是否有帮助？

我也认为 nameXml 指的是会话变量，请改用 xml="/my.xml"

# node.js - 如何从服务器发布数据并在 Meteor 中监听客户端的变化？

> ID：10449877
> 
> 赞同：2
> 
> 时间：2012-05-04T13:31:50.210
> 
> 标签：node.js, meteor

我发现 Meteor（如[http://meteor.com](http://meteor.com)中）在后台使用 SockJS。

我有一些服务器端代码可以定期检查 iTunes 中正在播放什么歌曲，我想将曲目信息发布到客户端。

我查看了 Meteors 文档，而 Meteor.publish/Meteor.subscribe 似乎专门处理 Meteor.Collections。我只想传递任意数据，如字符串或 JSON。

无论如何我可以在 Meteor 中像 Socket.IO 或 Faye 那样做简单的 pub/sub 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T21:43:16.600

您可以发布任意数据。它不必来自 Meteor.Collection。

有关起点，请参阅[http://docs.meteor.com/#meteor_publish 。](http://docs.meteor.com/#meteor_publish)您需要在服务器上编写一个发布函数，该函数调用`Meteor.setInterval`以设置定期检查，然后使用`this.set`、`this.unset`和`this.flush`将各个属性推送到每个客户端。

# encryption - 在哪里可以找到实现 CBC（密码块链接）解密的 C 程序？

> ID：10449878
> 
> 赞同：-1
> 
> 时间：2012-05-04T13:31:54.517
> 
> 标签：encryption

我想要一个采用加密字符串的程序，它应该由程序使用 CBC 算法解密。有没有网站有这样的加解密程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T13:35:46.163

CBC 是一种分组密码链接方法，可以应用于任何分组密码，例如 DES、AES、IDEA 等。

用可移植 C 语言编写的一个非常全面的加密库是[libtomcrypt](http://libtom.org/?page=features&whatfile=crypt)。也许你可以使用它。

# c# - 将复选框添加到消息框时如何返回正确的枚举

> ID：10449879
> 
> 赞同：1
> 
> 时间：2012-05-04T13:31:55.010
> 
> 标签：c#, .net, winforms

我创建了一个返回 DialogResult 的消息框。现在我在上面添加了复选框，想知道它是否被选中。那么我应该返回什么？我认为的简单方法是创建新枚举，它将包含 DialogResult 中的所有值加上一个指示复选框状态的值

```
public enum MyDlgResult
{
    NONE = DialogResult.NONE, 
    OK = DialogResult.OK ........................, 
    CHKBOXCHECKED = 8
} 
```

...并返回此枚举 MyDlgResult。但这是正确的做法吗？因为每次向我的消息框添加新功能时，我都必须在此枚举中添加值。
如果有的话，更好的方法来做到这一点。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T13:39:06.633

只需将属性添加到该消息框，它将成为 CheckBox 的 Checked 属性的代理，并在 OK 结果表单消息框上检查该新属性。

要添加的属性

```
public bool Checked
{
   get { return yourCheckBox.Checked; }
} 
```

像这样的最终代码

```
MessBox box = new MessBox();
if(box.Show() == DialogResult.OK)
{
   bool isChecked = box.Checked;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T13:38:45.917

您不必重写对话框的返回以使客户端代码能够获取 UI 控件的状态。对话框信息在关闭后会保留，您可以从中获取值。例如，假设有一个名为 SomeDlg 的 Form 类具有一个名为 PublicDlgProperty 的属性。PublicDlgProperty 可以设置为 OK，或任何其他 UI 更改，然后在对话框关闭后查询，如下所示：

```
var someDlg = new SomeDlg();
someDlg.ShowDialog();

var someLocalVariable = someDlg.PublicDlgProperty; 
```

这是一个非常简单的例子。您需要测试 DialogResult 以查看是否要查询该值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T13:40:20.067

我同意其他回答您的人的观点，即您应该拥有一个属性，委托 IsChecked 或其他东西，但是如果您必须仅使用返回枚举结果来执行此操作...

使枚举标记：

```
[Flags]
public enum MyDlgResult
{
    NONE = ...
    OK = ...
    CHK...
} 
```

然后，您可以返回：

```
return MyDlgResult.NONE | MyDlgResult.CHK; 
```

或者

```
return MyDlgResult.OK | MyDlgResult.CHK; 
```

要不就

```
return MyDlgResult.OK; 
```

依此类推...然后，您可以检查：

```
if (res.HasFlag(MyDlgResult.OK))
{
}

if (res.HasFlag(MyDlgResult.CHK))
{
} 
```

# android - 从 Android 应用程序将小部件添加到主屏幕

> ID：10449884
> 
> 赞同：2
> 
> 时间：2012-05-04T13:32:11.703
> 
> 标签：android

我在这里找到了示例：[Android - Intent that open widget context menu](https://stackoverflow.com/questions/10113645/android-intent-that-open-widget-context-menu)和这里：[http](http://coderender.blogspot.com/) ://coderender.blogspot.com/ 。

第一个启动小部件选择器，但当您选择任何内容时它就会消失。第二个允许您选择一个小部件，但它会在应用程序视图中显示它。有没有办法从应用程序中的按钮调用小部件选择，但手机上的主屏幕仍然是 AppWidgetHost？

这可能是我误解了一些事情，但在我看来，AppWidgetHost 必须是您调用小部件选择菜单的应用程序。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-04T14:15:51.143

> 有没有办法从应用程序中的按钮调用小部件选择，但手机上的主屏幕仍然是 AppWidgetHost？

仅当您是主屏幕时。

> 这可能是我误解了一些事情，但在我看来，AppWidgetHost 必须是您调用小部件选择菜单的应用程序。

更重要的是，它是`AppWidgetHost`必须做的工作才能利用选择。

# javascript - 检测画布内的鼠标点击位置

> ID：10449890
> 
> 赞同：5
> 
> 时间：2012-05-04T13:32:19.633
> 
> 标签：javascript, function, canvas, click, mouse

我在尝试为单击空白区域定义一个函数时遇到了一个真正的问题。到目前为止，我已经设法定义了我单击一个对象的位置——其中有 10 个——但是现在我需要一个单独的函数来处理我不单击任何对象时的情况。总体思路可以在[http://deciballs.co.uk/experience.html](http://deciballs.co.uk/experience.html)找到。对象是环。我的代码在下面......有什么想法吗？

```
var shapeObj = function (context, canvas, settingsBox, radius) {
    this.ctx = context;
    this.canvas = canvas;
    this.sBox = settingsBox;

    this.frequencies = new Array(220, 440, 1024, 2048);
    this.cols = new Array(255, 225, 200, 175, 150);
    this.strokes = new Array(1, 1.5, 2);
    this.waves = new Array('sine', 'sawtooth', 'triangle', 'square');

    this.properties = {
        dur: Math.random()*0.5,
        freq: this.frequencies[Math.floor(Math.random() * this.frequencies.length)],
        radius: radius,
        stroke: this.strokes[Math.floor(Math.random() * this.strokes.length)],
        speed: Math.random()*6-3,
        vol: Math.random()*10,
        col1: this.cols[Math.floor(Math.random() * this.cols.length)],
        col2: this.cols[Math.floor(Math.random() * this.cols.length)],
        col3: this.cols[Math.floor(Math.random() * this.cols.length)],
        alpha: 0,
        wave: this.waves[Math.floor(Math.random() * this.waves.length)],
        delay: 0 
    }

    this.x = Math.random()*this.ctx.canvas.width;
    this.y = Math.random()*this.ctx.canvas.height; 
    this.vx = 0.5;
    this.vy = 1;

    this.draw = function () {
        this.ctx.beginPath();
        this.ctx.arc(this.x, this.y, this.properties.radius, 0, Math.PI*2, false);
        this.ctx.closePath();
        this.ctx.stroke();
        this.ctx.fill();
    }

    this.clickTest = function (e) {
        var canvasOffset = this.canvas.offset();
        var canvasX = Math.floor(e.pageX-canvasOffset.left);
        var canvasY = Math.floor(e.pageY-canvasOffset.top);     
            var dX = this.x-canvasX;
            var dY = this.y-canvasY;
            var distance = Math.sqrt((dX*dX)+(dY*dY));
            if (distance < this.properties.radius) {
                this.manageClick();
            } else {
                this.properties.alpha = 0;
            }
    };

    this.manageClick = function () {
        this.sBox.populate(this.properties, this);
        var divs = document.getElementsByTagName('section');
        for(var i = 0, e = divs[0], n = divs.length; i < n; e = divs[++i]){
            e.className='class2';
        }
        this.properties.alpha = 0.5;
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T14:34:00.417

获得完美的鼠标点击有点棘手，我将分享迄今为止我创建的最防弹的鼠标代码。它适用于所有浏览器，包括各种填充、边距、边框和附加组件（如 stumbleupon 顶栏）。

```
// Creates an object with x and y defined,
// set to the mouse position relative to the state's canvas
// If you wanna be super-correct this can be tricky,
// we have to worry about padding and borders
// takes an event and a reference to the canvas
function getMouse(e, canvas) {
  var element = canvas, offsetX = 0, offsetY = 0, mx, my;

  // Compute the total offset. It's possible to cache this if you want
  if (element.offsetParent !== undefined) {
    do {
      offsetX += element.offsetLeft;
      offsetY += element.offsetTop;
    } while ((element = element.offsetParent));
  }

  // Add padding and border style widths to offset
  // Also add the <html> offsets in case there's a position:fixed bar (like the stumbleupon bar)
  // This part is not strictly necessary, it depends on your styling
  offsetX += stylePaddingLeft + styleBorderLeft + htmlLeft;
  offsetY += stylePaddingTop + styleBorderTop + htmlTop;

  mx = e.pageX - offsetX;
  my = e.pageY - offsetY;

  // We return a simple javascript object with x and y defined
  return {x: mx, y: my};
} 
```

您会注意到我使用了一些在函数中未定义的（可选）变量。他们是：

```
 stylePaddingLeft = parseInt(document.defaultView.getComputedStyle(canvas, null)['paddingLeft'], 10)      || 0;
  stylePaddingTop  = parseInt(document.defaultView.getComputedStyle(canvas, null)['paddingTop'], 10)       || 0;
  styleBorderLeft  = parseInt(document.defaultView.getComputedStyle(canvas, null)['borderLeftWidth'], 10)  || 0;
  styleBorderTop   = parseInt(document.defaultView.getComputedStyle(canvas, null)['borderTopWidth'], 10)   || 0;
  // Some pages have fixed-position bars (like the stumbleupon bar) at the top or left of the page
  // They will mess up mouse coordinates and this fixes that
  var html = document.body.parentNode;
  htmlTop = html.offsetTop;
  htmlLeft = html.offsetLeft; 
```

我建议只计算一次，这就是为什么它们不在`getMouse`函数中。

* * *

你真的应该有一个函数来处理鼠标点击，调用`getMouse`一次，然后遍历一个对象列表，用 x 和 y 检查每个对象。伪代码：

```
function onMouseDown(e) {
  var mouse = getMouse(e, canvas)
  var l = myObjects.length;
  var found = false;

  // Maybe "deselect" them all right here

  for (var i = 0; i < l; i++) {
    if (distance sqrt to myObjects[i]) {
      found = true;
      myObjects[i].ManageClickOrWhateverYouWantHere()
    }
    break;
  }

  // And now we can know if we clicked on empty space or not!
  if (!found) {
    // No objects found at the click, so nothing has been clicked on
    // do some relevant things here because of that
    // I presume from your question this may be part of what you want
  }

} 
```

# javascript - 如何使用位置底部将 div 设置为页面顶部的动画

> ID：10449891
> 
> 赞同：0
> 
> 时间：2012-05-04T13:32:22.797
> 
> 标签：javascript, jquery

我目前正在尝试在 3 层结构中为 div 的位置设置动画，第一层仅显示标题，第二层显示标题和摘录，然后第三层显示一些额外的副本。目前，我可以为第 1 层和第 2 层设置底部位置动画，但似乎无法弄清楚如何将第 3 层设置为理想情况下的顶部：0，我认为我无法做到。任何人都可以就如何实现这一目标提供任何建议吗？

JS

```
more.on('click', function(e){

  if( body.hasClass('tier1') ){
    body.removeClass('tier1').addClass('tier2');
    wrapper.delay(500).animate({ bottom: wrapper.data('tier2') }, 400, function(){
      //show close
      close.show();
    });

  } else if ( body.hasClass('tier2') ){
    body.removeClass('tier2').addClass('tier3');
    wrapper.delay(1500).animate({ bottom: '300' }, 500, function(){ // show be top of window
      // hide read more
      more.hide();

      // hide .excerpt + show .upper
      excerpt.fadeOut(function(){
        upper.fadeIn();
      });
    });
  }

  e.preventDefault();
}); 
```

链接到当前版本：[http ://bit.ly/IA65Mb](http://bit.ly/IA65Mb)

凯尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T13:56:55.753

检查这个[http://jsfiddle.net/d3eLE/6/](http://jsfiddle.net/d3eLE/6/) HTML

```
<div id="wrap">
        <a id="me">Click me</a>
</div> 
```

CSS

```
#wrap {
    position: absolute;
    bottom: 0;
    width: 400px;
    height: 50px;
    background: #ff0;
}

#me {
    border: 1px #000 solid;
    background: #0f0;
} 
```

jQuery

```
$("#me").click(function(){
    $("#wrap").animate({
        bottom: ( $(window).height() - $("#wrap").height() )
    }, 2000);

 }); 
```

除了使用底部，您可以使用顶部。

```
$("#wrap").removeAttr("bottom").animate({
    top: 0
}, 2000); 
```

# php - 从数组中删除一个项目？

> ID：10449892
> 
> 赞同：1
> 
> 时间：2012-05-04T13:32:28.113
> 
> 标签：php

我已经从 PHP 会话变量创建了一个数组，现在我正在尝试使用 ajax（在 jQuery 中）从数组中删除一个元素。
到目前为止，我有以下代码：

```
$val = $_SESSION['enquiry-basket'];
$array = explode($val);

foreach ($enquiries as $a => $q) {
    if ($q == $_POST['product_id']) {
        unset($array[$a]);
    }
} 
```

唯一的问题是，它不会删除该项目。
任何人都可以解释为什么，并告诉我如何解决它？

**编辑**

对不起大家。我之所以提到 jQuery，是因为我使用 jQuery ajax 调用来处理我上面显示的 PHP。
ajax 查询运行良好，因为一旦 ajax 返回成功，它就会处理一些 javascript 好东西（从 HTML 中删除一个 div）。
我已经添加了分隔符（不敢相信我错过了它），但该元素仍然没有从数组中删除。
我从来不擅长多维数组，所以这里是打印的数组：

```
Array ( [0] => 6 [1] => 8 ) 
```

它看起来对我来说是正确的，但我是阵列的业余爱好者。（6和8当然是我插入的字符串）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-04T13:35:35.337

`explode`缺少第一个参数：

```
explode(',', $val); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-04T13:35:47.477

您正在从 $array 中删除项目，而不是从 $_SESSION['enquiry-basket']。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T13:48:45.367

主要是explode函数的问题，缺少第二个参数：

更改自：

```
$array = explode($val); 
```

至：

```
$array = explode('~',$val);  // ~ is a delimiter 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-04T13:37:57.380

爆炸函数应该有两个参数。但是您只给出了数组的名称。爆炸（分隔符，字符串，限制）；

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-04T13:38:16.003

如果我正确理解您正在尝试做什么，那么问题是 JQuery 运行客户端，这意味着您在服务器端的 PHP 数组在来自 Ajax 的每个请求之间消失。唯一剩下的数组是 $_SESSION。

如果要使用 AJAX，则需要直接从 $_SESSION 中删除。其他任何东西都是无用的，因为数组和变量在每次调用之间“消失”。

# php - 保持数据库安全

> ID：10449898
> 
> 赞同：4
> 
> 时间：2012-05-04T13:32:45.343
> 
> 标签：php, mysql, database, security

这不是关于我遇到的特定问题，但我必须澄清一些事情，因为我与这个项目有很多风险。

我正在创建一个 Web 应用程序，该应用程序将部署到英国的一些大公司，如果我们弄错了，我们可能会付出巨大的代价！

我需要确保每个公司的数据都非常安全，所以我想知道为每个组织创建一个新数据库是否是个好主意，这样他们的数据是完全独立的，如果一个数据库被破坏，所有组织的数据不会受到影响 - 这将使我们有时间在所有数据受到损害之前对安全问题做出反应。我的问题是：

1.  这样做的短期和长期好处是什么（如果有的话）
2.  这有什么短期和长期的缺点（如果有的话）
3.  这是好习惯吗？
4.  它甚至会以我预期的方式解决安全问题吗？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T14:03:06.923

我假设这是一个关于为“软件即服务”风格的应用程序构建“多租户架构”的问题。

第一个问题是分离数据库可能是一个好主意，也可能不是一个好主意——但这不是第一个要问的问题。可以在重要级别访问您的数据库的人已经以极具破坏性的方式渗透到您的应用程序 - 他们几乎可以肯定地在您的数据库服务器上执行任意命令。这意味着您不仅要处理一个帐户的损坏，还要处理整个基础架构的损坏。这是一个“熄灯”的时刻，您必须在恢复时关闭整个系统。

如果他们没有在您的数据库服务器上建立外壳，则意味着存在应用程序层安全问题 - SQL 注入，或者在您的身份验证方案中升级权限的某种方式。同样，两者都是“熄灯”时刻。

所以，确保所有这些东西都被完全覆盖。在您的开发生命周期中包括安全测试；考虑使用自动化渗透测试工具作为持续集成系统的一部分。确保基础设施人员强化整个环境，并在接近发布候选时考虑进行第 3 方安全审计。考虑一个专注于安全问题的代码审查过程，并就特定的安全考虑因素达成一致的编码标准。告诉您的所有开发人员有关跨站点脚本、SQL 注入和其他应用程序级漏洞的信息。

一旦你完成了所有这些，你就锁上了门并栓上了窗户；您的数据库策略相当于您如何保证珠宝的安全。

单独的数据库提供了一些额外的安全性——但前提是您有相应的用户管理策略。在大多数网络应用程序中，只有两种类型的用户：“管理员”和“网络应用程序”。“管理员”可以创建/修改数据库（创建数据库、表、视图等），通常还可以修改数据。“Web 应用”应该只有数据修改权限，而没有修改数据库对象的权限。

为了使数据库拆分有意义，您必须确保：

*   可以访问您的 Web 应用程序文件系统的攻击者无法访问有效的用户名和密码，或者如果他们可以，只能访问一个客户端。
*   攻击者永远无法访问“管理员”凭据

但是，拆分数据库还有其他原因（除了安全性之外）。它降低了人为错误的风险，允许您在更细粒度的级别扩展系统，并允许您提供不同级别的托管（“黄金”用户拥有自己的服务器，“白银”用户拥有自己的数据库，“青铜” “抓住他们的机会）。

要实现这一点，您必须解决的大问题是部署——您将如何部署新版本的代码以及对数据库的更改？这反过来又可能使测试过程复杂化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T13:39:52.127

几乎可以肯定的是，独立的数据库。正如@Anigel 所说，甚至可能是单独的服务器，尽管其管理和成本更复杂，因此将取决于您的确切要求。

*   一个好处是，在未来的某个时候，也许一个客户端的数据会变大，因此更容易拆分到新服务器，或者他们可能会升级您的平台，但另一个没有。

*   如果您可以转储/加载整个数据库，而不是挑选所有名称以**clientX_**开头的表，则备份和恢复会更容易。

*   在单独的数据库上进行性能测量会更容易。

只需几个快速的想法即可开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T13:44:06.470

@Lee Price，为每家公司维护单独的数据库将是一件好事。

**好处：**

*   它将确保您的数据库安全

*   在很长一段时间内，当桌子的大小仅限于一家公司时，这会给您带来激烈的表现。操作会很快。

*   易于明智地操纵数据公司。

*   在支持方面提供帮助

**缺点：**

*   需要跟踪每家公司的架构更改

*   维护单独的数据库

*   维护单独的备份

*   与单个数据库相比，占用更多空间

但我个人建议您为每家公司使用单独的数据库。

# ios - OpenGL中的窗口变黑

> ID：10449899
> 
> 赞同：0
> 
> 时间：2012-05-04T13:33:00.923
> 
> 标签：ios, opengl-es

嗨，我对 ios 和 OpenGL 很陌生。我正在尝试按照 iPhone 3d 编程一书中的说明进行操作。我只想从 OpenGL 渲染一个灰屏。

我真的不知道我做错了什么，我需要了解为什么在我冒险之前我没有得到我的 OpenGL 窗口。

如果我可以进一步提供帮助，请发表评论:)

GLView.h：

```
#import <UIKit/UIKit.h>
#import <OpenGLES/EAGL.h>
#import <QuartzCore/QuartzCore.h>
#import <OpenGLES/ES1/gl.h>
#import <OpenGLES/ES1/glext.h>

@interface GLView : UIView {
    // Protected fields
    EAGLContext* m_context;
}

// public fields
-(void)drawWiew;

@end 
```

GLView.mm：

```
#import "GLView.h"

@implementation GLView

+(Class) layerClass {
    return [CAEAGLLayer class];
}

- (id)initWithFrame:(CGRect)frame
{
    if (self = [super initWithFrame:frame]) {
        CAEAGLLayer* eaglLayer = (CAEAGLLayer*) super.layer;
        eaglLayer.opaque = YES;

        m_context = [[EAGLContext alloc] initWithAPI:kEAGLRenderingAPIOpenGLES1];
        if (!m_context || ![EAGLContext setCurrentContext:m_context]) {
            [self release];
            return nil;
        }

        // Initialization code
        GLuint framebuffer, renderbuffer;
        glGenFramebuffersOES(1, &framebuffer);
        glGenRenderbuffersOES(1, &renderbuffer);

        glBindFramebufferOES(GL_FRAMEBUFFER_OES, framebuffer);
        glBindRenderbufferOES(GL_RENDERBUFFER_OES, renderbuffer);

        [m_context
         renderbufferStorage:GL_RENDERBUFFER_OES
         fromDrawable:eaglLayer];

        glFramebufferRenderbufferOES(
                                     GL_FRAMEBUFFER_OES, GL_COLOR_ATTACHMENT0_OES,
                                     GL_RENDERBUFFER_OES, renderbuffer);

        glViewport(0, 0, CGRectGetWidth(frame), CGRectGetHeight(frame));        

        [self drawWiew];
    }
    return self;
}

-(void)drawWiew {
    glClearColor(0.5f, 0.5f, 0.5f, 1);
    glClear(GL_COLOR_BUFFER_BIT);

    [m_context presentRenderbuffer:GL_RENDERBUFFER_OES];

    NSLog(@"drawView called");
}

-(void)dealloc {
    if ([EAGLContext currentContext] == m_context) 
        [EAGLContext setCurrentContext:nil];

    [m_context release];
    [super dealloc];
}

/*
// Only override drawRect: if you perform custom drawing.
// An empty implementation adversely affects performance during animation.
- (void)drawRect:(CGRect)rect
{
    // Drawing code
}
*/

@end 
```

HellowArrowAppDelegate.h：

```
#import <UIKit/UIKit.h>
#import "GLView.h"

@interface HelloArrowAppDelegate : UIResponder <UIApplicationDelegate> {
    UIWindow* window;
    GLView* view;
}

@property (strong, nonatomic) UIWindow *window;

@end 
```

HellowArrowAppDelegate.mm：

```
#import "HelloArrowAppDelegate.h"

@implementation HelloArrowAppDelegate

@synthesize window = _window;

- (void)dealloc
{
    [_window release];
    [super dealloc];
}

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    CGRect screenBounds = [[UIScreen mainScreen] bounds];

    _window = [[UIWindow alloc] initWithFrame:screenBounds];
    view = [[GLView alloc] initWithFrame:screenBounds];   

    [_window addSubview:view];
    [_window makeKeyWindow];

//    self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
//    // Override point for customization after application launch.
//    self.window.backgroundColor = [UIColor whiteColor];
//    [self.window makeKeyAndVisible];
    return YES;
}

- (void)applicationWillResignActive:(UIApplication *)application
{
    /*
     Sent when the application is about to move from active to inactive state. This can occur for certain types of temporary interruptions (such as an incoming phone call or SMS message) or when the user quits the application and it begins the transition to the background state.
     Use this method to pause ongoing tasks, disable timers, and throttle down OpenGL ES frame rates. Games should use this method to pause the game.
     */
}

- (void)applicationDidEnterBackground:(UIApplication *)application
{
    /*
     Use this method to release shared resources, save user data, invalidate timers, and store enough application state information to restore your application to its current state in case it is terminated later. 
     If your application supports background execution, this method is called instead of applicationWillTerminate: when the user quits.
     */
}

- (void)applicationWillEnterForeground:(UIApplication *)application
{
    /*
     Called as part of the transition from the background to the inactive state; here you can undo many of the changes made on entering the background.
     */
}

- (void)applicationDidBecomeActive:(UIApplication *)application
{
    /*
     Restart any tasks that were paused (or not yet started) while the application was inactive. If the application was previously in the background, optionally refresh the user interface.
     */
}

- (void)applicationWillTerminate:(UIApplication *)application
{
    /*
     Called when the application is about to terminate.
     Save data if appropriate.
     See also applicationDidEnterBackground:.
     */
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T22:53:07.253

OpenGL 屏幕可能会变黑，这取决于所使用的操作系统版本以及被绘制到的屏幕窗口的大小。例如，在 4.0、4.1 和 4.3 上运行良好的代码在 4.2 中可能会显示为黑色。或者，如果你将 OpenGL 窗口的大小加倍，它就可以工作。有时固件会妨碍 - 尝试使用更新版本的操作系统，看看它是否工作得更好。

# android - 从另一个类调用微调器给出异常

> ID：10449902
> 
> 赞同：1
> 
> 时间：2012-05-04T13:33:17.497
> 
> 标签：android, spinner

我有两个类：DineOutActivity.java 和 Userpersonal .java 我在 DineOutActivity.java 中定义了一个 spinner(spinner1)

我正在创建一个方法，以便在 UserPersonal.java 中单击图像

并调用微调器方法。因此，当我从 DineOutActivity.java 单击 spinner1 并进入 User Personal.java 然后单击提交时，它将重定向到另一个页面。

这是我的 DineOutActivity.java

```
public class DineOutActivity extends Activity {

    Spinner sp;
 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        /********************spinner***********/

        Spinner food = (Spinner) findViewById(R.id.spinner1);
        ArrayAdapter<CharSequence> foodadapter = ArrayAdapter.createFromResource(
                    this, R.array.item_array, android.R.layout.simple_spinner_item);
        foodadapter.setDropDownViewResource(R.layout.spinner_layout);
        food.setAdapter(foodadapter);
} 
```

这是我的 UsePersonal.java

```
 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.userpersonal);

    }

    public void spinner()
    { DineOutActivity doa = new DineOutActivity() ;
         Spinner food = doa.sp;

            food.setOnItemSelectedListener(new OnItemSelectedListener() {
            @Override
             public void onItemSelected(AdapterView<?> parent, View view,
                     int pos, long id) {
                if(pos ==3)
                {
                    Intent select = new Intent();
                    select.setClass(getBaseContext(), PizzaHut.class);
                }
}
          @Override
         public void onNothingSelected(AdapterView<?> arg0) {
             // TODO Auto-generated method stub

         }
     });
    }

public void onClick(View view)

{  spinner();
}

05-04 18:49:32.617: E/AndroidRuntime(24237): FATAL EXCEPTION: main
05-04 18:49:32.617: E/AndroidRuntime(24237): java.lang.IllegalStateException: Could not execute method of the activity
05-04 18:49:32.617: E/AndroidRuntime(24237):    at android.view.View$1.onClick(View.java:2144)
05-04 18:49:32.617: E/AndroidRuntime(24237):    at android.view.View.performClick(View.java:2485)
05-04 18:49:32.617: E/AndroidRuntime(24237):    at android.view.View$PerformClick.run(View.java:9080)
05-04 18:49:32.617: E/AndroidRuntime(24237):    at android.os.Handler.handleCallback(Handler.java:587)
05-04 18:49:32.617: E/AndroidRuntime(24237):    at android.os.Handler.dispatchMessage(Handler.java:92)
05-04 18:49:32.617: E/AndroidRuntime(24237):    at android.os.Looper.loop(Looper.java:130)
05-04 18:49:32.617: E/AndroidRuntime(24237):    at android.app.ActivityThread.main(ActivityThread.java:3687)
05-04 18:49:32.617: E/AndroidRuntime(24237):    at java.lang.reflect.Method.invokeNative(Native Method)
05-04 18:49:32.617: E/AndroidRuntime(24237):    at java.lang.reflect.Method.invoke(Method.java:507)
05-04 18:49:32.617: E/AndroidRuntime(24237):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
05-04 18:49:32.617: E/AndroidRuntime(24237):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
05-04 18:49:32.617: E/AndroidRuntime(24237):    at dalvik.system.NativeStart.main(Native Method)
05-04 18:49:32.617: E/AndroidRuntime(24237): Caused by: java.lang.reflect.InvocationTargetException
05-04 18:49:32.617: E/AndroidRuntime(24237):    at java.lang.reflect.Method.invokeNative(Native Method)
05-04 18:49:32.617: E/AndroidRuntime(24237):    at java.lang.reflect.Method.invoke(Method.java:507)
05-04 18:49:32.617: E/AndroidRuntime(24237):    at android.view.View$1.onClick(View.java:2139)
05-04 18:49:32.617: E/AndroidRuntime(24237):    ... 11 more
05-04 18:49:32.617: E/AndroidRuntime(24237): Caused by: java.lang.NullPointerException
05-04 18:49:32.617: E/AndroidRuntime(24237):    at com.crews.dineout.UserPersonal.spinner(UserPersonal.java:63)
05-04 18:49:32.617: E/AndroidRuntime(24237):    at com.crews.dineout.UserPersonal.onClick(UserPersonal.java:83)
05-04 18:49:32.617: E/AndroidRuntime(24237):    ... 14 more 
```

我在 UserPersonal.java food.setOnItemSelectedListener(new OnItemSelectedListener() {

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T13:51:07.810

您引用的活动是使用关键字“new”创建的
->`DineOutActivity doa = new DineOutActivity()`

活动有自己的生命周期，并使用意图创建！

见 [http://developer.android.com/reference/android/app/Activity.html](http://developer.android.com/reference/android/app/Activity.html)

因此，您不会与正确的对象交谈，因为此活动既没有布局，也没有贯穿`onCreate()`。

# c++ - 大向量的返回值优化与 auto_ptr

> ID：10449907
> 
> 赞同：5
> 
> 时间：2012-05-04T13:33:27.840
> 
> 标签：c++, auto-ptr, rvo

如果我使用 auto_ptr 作为填充大向量的函数的返回值，这会使该函数成为源函数（它将创建一个内部 auto_ptr 并在返回非 const auto_ptr 时传递所有权）。但是，我不能将此函数与 STL 算法一起使用，因为为了访问数据，我需要取消对 auto_ptr 的引用。我猜一个很好的例子是一个大小为 N 的向量字段，每个向量有 100 个分量。如果 N 很大，该函数是否按值或按 ref 返回每个 100 个分量向量是不一样的。

另外，当我尝试这个非常基本的代码时：

```
class t
{
    public: 
         t() { std::cout << "ctor" << std::endl; }
         ~t() { std::cout << "dtor" << std::endl; }
};

t valueFun()
{
   return t();
}

std::auto_ptr<t> autoFun()
{
   return std::auto_ptr(new t());
} 
```

autoFun 和 fun 调用都会产生输出

博士

所以我实际上看不到正在创建以传递给 return 语句的自动变量。这是否意味着为 valueFun 调用设置了返回值优化？在这种情况下 valueFun 是否会创建两个自动对象？

然后，如何使用函数优化如此庞大的数据结构的种群？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T14:46:00.250

有很多选择，动态分配可能不是最好的。

* * *

在我们深入讨论之前：这是一个瓶颈吗？

如果您没有分析并确保它是一个瓶颈，那么这个讨论可能会完全关闭......请记住，分析调试版本几乎没有用。

* * *

现在，在 C++03 中，有几种选择，从最可口到最少：

*   相信编译器：例如，即使在 gcc 中的 Debug 构建中，未命名的变量也会使用 RVO。
*   使用“out”参数（通过引用传递）
*   在堆上分配并返回一个指针（智能与否）
*   检查编译器输出

就个人而言，除非分析器证明我错了，否则我会相信我的编译器。

在 C++11 中，移动语义帮助我们变得更加自信，因为只要有`return`语句，如果 RVO 无法启动，则可以自动使用移动构造函数（如果可用）；并移动构造函数`vector`非常便宜。

所以它变成：

*   信任编译器：RVO 或移动语义
*   在堆上分配并返回一个`unique_ptr`

但实际上，第二点应该仅用于移动语义没有太大帮助的少数类：移动语义的成本通常与 的回报成正比`sizeof`，例如 a`std::array<T,10>`的大小等于，`10*sizeof(T)`所以它不太好，可能会受益从堆分配 + `unique_ptr`.

* * *

*切线：你已经信任你的编译器了。你相信它会警告你错误，你相信它会警告你危险/可能不正确的结构，你相信它可以正确地将你的代码翻译成机器程序集，你相信它会应用有意义的优化来获得不错的加速.. . 不相信编译器在明显的情况下应用 RVO 就像不相信你的心脏外科医生拿着 10 美元的钞票：这是你最不用担心的。;)*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T13:46:35.923

我相当肯定编译器会为 valueFun 做返回值优化。编译器无法应用返回值优化的主要情况是：

*   返回参数
*   根据条件返回不同的对象

因此 auto_ptr 不是必需的，并且由于必须使用堆而会更慢。

如果您仍然担心移动如此大的向量的成本，您可能想考虑使用`std::vector aCopy(std::move(otherVector))`C++11 的移动语义。这些几乎与 RVO 一样快，并且可以在任何地方使用（它也是保证在无法使用 RVO 时用于返回值。）

我相信大多数现代编译器此时都支持移动语义（或技术上的右值引用）

# css - 文本框的 CSS

> ID：10449910
> 
> 赞同：3
> 
> 时间：2012-05-04T13:33:47.183
> 
> 标签：css, css-selectors

如何为所有文本框添加 CSS 规则？
我知道 ：

```
input{} 
```

适用于所有输入，但如果我特别想要 type="text" ？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-04T13:34:50.023

使用[属性选择器](http://www.w3.org/TR/CSS2/selector.html#attribute-selectors)：

```
input[type="text"]
{
  /* ... */
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-04T13:34:47.470

```
input[type="text"] { color: orange; } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-04T13:35:07.960

使用此[属性选择器](http://www.w3.org/TR/CSS2/selector.html#attribute-selectors)：

```
input[type="text"] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T18:45:22.770

如果您的平台支持属性选择器，那就太好了——使用它们。但如果不是，则需要对每个文本输入应用一个类属性，以将它们与 CSS 中的单选按钮或复选框区分开来。

# spring - 在 Spring Framework 3.1 中限制 URL 篡改

> ID：10449916
> 
> 赞同：1
> 
> 时间：2012-05-04T13:34:01.240
> 
> 标签：spring, spring-mvc, spring-security

我正在使用 Spring Framework 3.1 构建应用程序

我正在将我的控制器映射到包含代表某个 id 的路径变量的 url。但我不希望用户篡改 url 并手动更改路径变量值。我想限制他们这样做。

我已经尝试过使用 ShallowEtagHeaderFilter。但它没有按预期的方式工作。我不知道我是否错过了过滤器的任何配置，或者它根本不起作用。

这是我的 web.xml，我在其中配置了调度程序 servlet 和过滤器。

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app version="3.0" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd">
    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/applicationContext.xml</param-value>
    </context-param>
    <listener>
        <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
    </listener>
    <servlet>
        <servlet-name>dispatcher</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <filter>
        <filter-name>encodingFilter</filter-name>
        <filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>
        <init-param>
            <param-name>encoding</param-name>
            <param-value>UTF-8</param-value>
        </init-param>
        <init-param>
            <param-name>forceEncoding</param-name>
            <param-value>true</param-value>
        </init-param>
    </filter>

    <filter>
        <filter-name>eTagFilter</filter-name>
        <filter-class>com.abc.config.EtagFilter</filter-class>
    </filter>

    <servlet-mapping>
        <servlet-name>dispatcher</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>

    <filter-mapping>
        <filter-name>encodingFilter</filter-name>
        <url-pattern>/</url-pattern>
    </filter-mapping>

    <filter-mapping>
        <filter-name>eTagFilter</filter-name>
        <servlet-name>dispatcher</servlet-name>
    </filter-mapping>

    <session-config>
        <session-timeout>
            30
        </session-timeout>
    </session-config>

</web-app> 
```

请帮我解决一下这个。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T13:50:38.453

我不明白 ShallowEtagHeaderFilter 如何适合这张图片，我想你误解了它的功能。它应该通过从浏览器缓存中获取页面来减少网络流量。这和你的情况完全不同。

基本上：如果您不希望用户篡改 URL，您将需要有一种方法来验证 URL 是由您的应用程序创建的，通常是某种校验和参数，其算法不易猜到。

例如，根据 计算`/site/12/user/12345/aB`哪里。现在，如果用户将 URL 更改为校验和错误，您可以发送 404 或 400 或您想要发送的任何错误。`aB``/site/12/user/12345``/site/13/user/12345/aB`

我可能会将校验和检查实现为过滤器并编写一个实用方法，该方法基于纯 URL 创建带有校验和的 URL（可能您还需要一个 JSP 标记）

# android - Android改变ImageView / Bitmap的颜色

> ID：10449917
> 
> 赞同：8
> 
> 时间：2012-05-04T13:34:12.373
> 
> 标签：android, bitmap, android-imageview

我需要找到一种方法来更改 Android 中位图的颜色。我需要根据`int`值在我的应用程序中平滑地替换/更改椭圆形图像的颜色。我需要类似 if `myValue=5`than change my image's color to `RED`and if `myValue=322`change color to之类的东西`BLUE`。我发现我能做到这一点的唯一方法是使用如下所示的 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
android:shape="oval" android:padding="10dp">
<!-- you can use any color you want I used here gray color-->
 <solid android:color="#cccccc"/> 
    <corners
     android:bottomRightRadius="10dp"
     android:bottomLeftRadius="10dp"
     android:topLeftRadius="10dp"
     android:topRightRadius="10dp"/>
</shape> 
```

之后何时`myValue`更改以设置我的`ImageView`图像资源。但是通过这种方式，我必须创建 35 个不同的 xml 文件……我认为这不是一个好主意。

那么谁能提出更好的解决方案来做到这一点？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-07T14:19:03.433

这就是我解决这个问题的方法：

1.  声明一个`ImageView`with`src="@drawable/button"`
2.  创建一个`Drawable`并设置`ColorFilter`它，然后将它用作您声明的 src ，`ImageView`如下所示：

>

```
Drawable myIcon = getResources().getDrawable( R.drawable.button );
ColorFilter filter = new LightingColorFilter( Color.BLUE, Color.BLUE );
myIcon.setColorFilter(filter);
color.setImageDrawable(myIcon); 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2014-01-24T21:23:14.683

这个解决方案对我来说不是很好。在某些图像中，最终颜色是错误的。我改用这个解决方案：

```
Drawable myIcon = getResources().getDrawable(R.drawable.your_image); 
myIcon.setColorFilter(Color.BLUE, PorterDuff.Mode.SRC_ATOP); 
((ImageView)findViewById(R.id.view_to_change)).setImageDrawable(myIcon); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-10-22T01:17:54.757

```
getResources().getDrawable( R.drawable.button ); 
```

现在已弃用。也可以这样做：

```
((ImageView) findViewById(R.id.my_icon))
  .setColorFilter(new LightingColorFilter(Color.BLUE, Color.BLUE)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-07T08:52:38.510

你应该这样。

```
Drawable myIcon = getResources().getDrawable( R.drawable.button ); 
ColorFilter filter = new LightingColorFilter( Color.BLACK, Color.BLACK);
myIcon.setColorFilter(filter); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-04T13:40:22.220

您可以使用 TransitionDrawable 来实现这一点 - [http://developer.android.com/reference/android/graphics/drawable/TransitionDrawable.html](http://developer.android.com/reference/android/graphics/drawable/TransitionDrawable.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-10-07T09:34:05.857

试试这个：

```
private final ImageView uiIV_statusIcon;
uiIV_statusIcon = anyView.findViewById(R.id.iv_status);
uiIV_statusIcon.setImageResource(R.drawable.ic_twotone_error_24); 
```

在活动中：

```
ImageViewCompat.setImageTintList(uiIV_statusIcon, ColorStateList.valueOf(getColor(R.color.md_red_400))); 
```

在一个片段中

```
ImageViewCompat.setImageTintList(uiIV_statusIcon, ColorStateList.valueOf(getContext().getColor(R.color.md_red_400))); 
```

在带有预分配变量 _context 的 Recyclerviewadapter 中：

```
ImageViewCompat.setImageTintList(uiIV_statusIcon, ColorStateList.valueOf(_context.getColor(R.color.md_red_400))); 
```

# java - 查找/替换为 charBuffer

> ID：10449922
> 
> 赞同：1
> 
> 时间：2012-05-04T13:34:24.313
> 
> 标签：java, pattern-matching, nio, replace

我是 NIO 课程的新手；我正在与（可能）非常大的文本文件进行一些模式匹配，到目前为止，我正在通过将其通道映射到 byteBuffer 来从文件中读取数据，然后将其转换为 charBuffer。我的问题是，将 charBuffer 的 MapMode 设置为 READ_WRITE，有没有办法在我处理 charBuffer 时直接修改它，比如 matcher.replaceAll()？或者我是否需要使用 matcher.find() 循环并手动替换模式的每个实例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T14:09:29.803

我会首先尝试阅读整个文件并进行查找和替换，看看性能是否可以接受。如果没有，请尝试读入足够的文本以创建匹配项，然后对文本的该部分进行替换。根据模式/性能，您可能需要编写自定义解析器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T09:33:17.350

1.  `Matcher.replaceAll()`返回一个新的字符串。它不会修改源字符串。让您`MappedByteBuffer`进入 READ_WRITE 模式丝毫不能改变这一点。

2.  除非新旧字符串的长度相同，否则您通常不能用其他字符串替换文件中的字符串。所以无论如何你都必须写一个新文件。

3.  我同意@Garret Hall 的回答。我会让它与 a 一起工作`BufferedReader`，然后决定我是否真的有性能问题。

# c - 知道我的数据包来自哪个 pcap 过滤器

> ID：10449924
> 
> 赞同：1
> 
> 时间：2012-05-04T13:34:27.440
> 
> 标签：c, pcap, libpcap

我正在尝试使用 libpcap 来嗅探一些“网络接口”（包括环回）。

在我的示例应用程序中，我在端口 1234、1235 和 1236 中有来自环回的数据包。我已经找到了一种使用 libpcap_setfilter() 使 libpcap 仅过滤来自这些地址的数据包的方法：我的目标是相应地转发这些数据包到它们来自的地址/端口（例如，来自 127.0.0.1/1234 的数据包可以通过 eth0 接口；来自 127.0.0.1/1235 的数据包可以通过 eth1 转发；来自 127.0.0 的数据包可以通过 eth1 转发。 0.1/1236 可以通过 eth2 转发）。

我的问题是：有什么方法可以知道这些数据包来自哪个端口而无需查看它们的内容？例如，我可以设置许多过滤器并以某种方式知道过滤我的数据包的过滤器是哪个过滤器吗？

我已经阅读了很多文档和教程，但到目前为止似乎没有一个有用。如果答案是“不可能”，我也可以。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T00:13:24.660

libpcap 运行的捕获机制仅支持一个过滤器，因此 libpcap 没有用于设置多个过滤器的 API。

但是，您可以`pcap_t`为同一个网络接口打开多个 's 并对它们应用不同的过滤器。`pcap_t`然而，从多个 's 读取可能是平台相关的。我从“eth0”、“eth1”和“eth2”推断这是 Linux，所以你应该能够在's的返回值上使用`select()`or or... ，如果or or...表示给定的描述符是可读的，调用相应的处理数据包。`poll()``pcap_get_selectable_fd()``pcap_t``select()``poll()``pcap_dispatch()``pcap_t``pcap_t`

# android - 在不使用 C2DM 的情况下在 android 上发送推送通知

> ID：10449930
> 
> 赞同：3
> 
> 时间：2012-05-04T13:34:48.633
> 
> 标签：android, notifications, push, android-c2dm

是否可以在不使用 Google 服务器的情况下向 android 应用程序发送推送通知[：C2DM](https://developers.google.com/android/c2dm/#server)？

所以，我想拥有自己的服务器，直接向应用程序发送通知，但我不确定设备如何感知通知，因为即使应用程序没有运行并且通知设备也需要接收通知应该出现在通知中心。

我认为来自[www.airpush.com](http://www.airpush.com)的人已经做到了这一点，但我不知道是怎么做到的。

任何人都可以帮我解决这个问题吗？

更新：

另外我想知道如果我不使用 C2DM，如何在通知中心显示通知？如果可以将通知中心配置为从我的服务器接收通知，即使用户删除我们开发的应用程序，注册该设备以接收通知的应用程序。

我想每天发送 3-4 条通知，但这些通知需要出现在通知中心，并且它们应该只通过我们的服务器。如何在应用程序中配置通知中心以在我的服务器上发出推送通知请求。

谢谢你！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T13:48:50.860

UrbanAirship 有一个名为[Helium push](https://docs.urbanairship.com/display/DOCS/Getting+Started%3a+Android%3a+Helium+Push)的解决方案。根据文档氦：

> 适用于 Android 1.6 及更高版本
> 不需要 Google 帐户
> 无默认每日推送限制
> 无默认每分钟推送限制
> 适用于 Amazon 设备（例如 Kindle Fire）
> 端到端 Urban Airship 支持（即 API 到设备）
> 最佳吞吐量

问题是您需要开发应用程序密钥才能使用此密钥。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-04T22:42:39.647

看看[MQTT](http://mqtt.org/)：

> MQTT 代表 MQ 遥测传输。它是一个发布/订阅、极其简单和轻量级的消息传递协议，专为受限设备和低带宽、高延迟或不可靠的网络而设计。

它可以用于（并在某些应用程序中使用）来实现自定义服务器推送解决方案。使用 MQTT 的最著名的应用程序之一是[Facebook Messanger](http://mqtt.org/2011/08/mqtt-used-by-facebook-messenger)。

您可以在 Internet 上轻松找到有关 MQTT 的更多信息，例如[在这个 SO question](https://stackoverflow.com/questions/10006533/push-notification-on-android-ibm-mqtt)或[这篇博客文章](http://tokudu.com/2010/how-to-implement-push-notifications-for-android/)中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-04T13:42:46.207

根据airpush.com 上的FAQ，他们没有使用真正的推送通知，而是每天轮询服务器几次。我认为这对您来说也是一个可行的解决方案的一个原因是，Android 的 C2DM 显然利用了 Google Play 商店，因此它不适用于分布在 Google 生态系统之外的设备。已经售出超过 500 万台 Kindle Fire，这值得思考。

来自 Airpush 常见问题解答：

> 当从 Android™ 应用程序的主要活动执行一次时，Airpush 客户端利用 Android™ 操作系统的 AlarmManager 框架来安排每天几次正在进行的服务器轮询事件。如果从服务器轮询广告，则将其缓存到最佳显示时间，该时间由服务器通过算法确定。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-04T13:47:12.260

如果不使用 C2DM，则没有“真正的推送通知”选项。因为（afaik，如果我错了，请纠正我）一个 android 设备在谷歌注册（他们仍然可以通过远程从你的手机中卸载恶意软件）并且使用这个 ip，他们可以进行推送通知。所有其他解决方案可能往往是“在服务器上注册，保持连接活动并等待请求”或其他东西，并且往往更耗电。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-06T13:47:07.123

如果您希望用户每天只收到 3-4 条消息，并且您的消息不受特定到达时间的限制，则不需要推送机制。只需在您的应用程序中创建一个服务，该服务每天检查您自己的 Web 服务 5-10 次。如果有新数据，让你的应用在通知中心显示。如果您不想让服务一直运行（就像许多消息传递应用程序一样），您可以设置警报（使用 Android AlarmManager 框架）定期唤醒您的应用程序以检查要显示的新消息。

> 如果可以将通知中心配置为从我的服务器接收通知，即使用户删除我们开发的应用程序，注册该设备以接收通知的应用程序。

听起来您想编写病毒或 root 工具包；-) 您可以使用电子邮件来代替您的消息。

2013 年 12 月 30 日更新：正如我在评论中所指出的，重建 GCM 所做的并不是一个好方法。当 Google 服务已经加载具有此功能的设备时就足够了。如果您的目标只是让 Google 看不到您发送给用户的消息，那么您不妨对它们进行加密。对于 Google 无法实际读取您的消息，客户端应用程序应生成一个密钥并将其发送到您的服务器。然后，您通过 GCM 发送的所有消息都可以使用该密钥进行加密。

如果您只是想规避 Google 对发送给用户的消息数量的限制，您可以将多条消息打包到一个 GCM 通知中并一个接一个地显示。但是话又说回来，我们又回到了前面描述的某种轮询解决方案，除了当您想要显示缓存在设备上的消息时，用户不需要访问互联网。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-11T22:28:57.010

Parse 具有出色的 Android 推送通知服务，非常易于设置。更多信息：[解析 Android 通知文档](https://www.parse.com/docs/android_guide#push)

# php - Javascript 输入到 HTML 表单 onSubmit 是否应该在理论上起作用？

> ID：10449945
> 
> 赞同：0
> 
> 时间：2012-05-04T13:35:27.573
> 
> 标签：php, javascript, html, calendar, onsubmit

我有代码请求用户通过此代码选择的日期：

```
 <script type="text/javascript" charset="utf-8">
            var k3 = new Kalendae(document.getElementById("cal"), {
                months:3,
                format:'DD-MM-YYYY',
                mode:'single'
            });
        </script> 
```

用户通过 javascript 选择日期并点击 html 提交按钮：

```
 <form name="input_data" action="#" method="post" 
onSubmit="javascript:location.href="#?date_value=" + k3.getSelected();"> 
```

**此代码的 html 操作指示它使用 # 重新加载同一页面，以便 php 可以使用以下命令捕获它：**

```
$dateValue= $_GET['date_value']; 
```

如果我回显 $dateValue 它应该在理论上回显原始的javascript输入吗？如果没有，它需要如何修改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T13:40:50.883

只需使用

```
<form action="" method="post"> 
```

应该管用。

假设您将按钮称为“保存”（name="save"）。这将在提交时触发 PHP。

```
if (isset($_POST['save'])) { // Your stuff here 
```

相反，您应该更新您的日历信息，将其存储在隐藏的输入字段中。我知道提交带有井号标签的表单会导致多个浏览器出现问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T13:54:09.607

如果您`#`像这样从表单标签中删除：

```
<form name="input_data" action="#" method="post" 
onSubmit="javascript:location.href="?date_value=" + k3.getSelected();"> 
```

url 将被附加`?date_value=Whatever`和调用，但是表单提交并抓取操作并将数据发布到它，如果你保留它，页面将不会被调用，所以理论上不会因为第二个页面加载而导致 get 丢失没有获得价值，但您可以通过对表单使用此编辑来使其工作，如下所示：

```
<script type="text/javascript">
    function edit() {
        document.input_data.action = "?date_value="+k3.getSelected();
    }
</script>

<body>
    <form name="input_data" action="" method="post" onSubmit="javascript:edit();">
        ...
    </form>
</body> 
```

这会将 get 值与表单中的 post 值一起发送，您可以通过更新表单中的 onSubmit 属性并删除编辑函数来执行此操作而无需其他函数，如下所示：

```
<body>
    <form name="input_data" action="" method="post" onSubmit="javascript:this.action='?date_value'+k3.getSelected();">
        ...
    </form>
</body> 
```

# ruby-on-rails - RVM 和 Passenger 有两个 Ruby 版本

> ID：10449949
> 
> 赞同：2
> 
> 时间：2012-05-04T13:35:45.907
> 
> 标签：ruby-on-rails, rvm, passenger, ruby-1.9, ruby-1.8

如何在 1.9 和 1.8(ree) ruby​​ 版本中使用 Passenger、RVM 和 Apache？我在生产环境中需要它。我试试这个：[RVM PASSENGER](http://rvm.io/integration/passenger/)但 REE 只能工作。1.9这样说：

> 给定的 ruby​​ 环境需要 ruby​​-1.9.2-p318（相对于 ree-1.8.7-2012.02）（RVM::IncompatibleRubyError）

我的 1.9 ruby​​ 版本的文件：.rvmrc

```
environment_id="ruby-1.9.2-p318"

if [[ -d "${rvm_path:-$HOME/.rvm}/environments"
  && -s "${rvm_path:-$HOME/.rvm}/environments/$environment_id" ]]
then
  \. "${rvm_path:-$HOME/.rvm}/environments/$environment_id"
  [[ -s "${rvm_path:-$HOME/.rvm}/hooks/after_use" ]] &&
    \. "${rvm_path:-$HOME/.rvm}/hooks/after_use" || true
  if [[ $- == *i* ]] # check for interactive shells
  then echo "Using: $(tput setaf 2)$GEM_HOME$(tput sgr0)" 
  else echo "Using: $GEM_HOME" 
  fi
else
  rvm --create use  "$environment_id" || {
    echo "Failed to create RVM environment '${environment_id}'."
    return 1
  }
fi 
```

setup_load_paths.rb

```
if ENV['MY_RUBY_HOME'] && ENV['MY_RUBY_HOME'].include?('rvm')
    begin
      rvm_path     = File.dirname(File.dirname(ENV['MY_RUBY_HOME']))
      rvm_lib_path = File.join(rvm_path, 'lib')
      require 'rvm'
      RVM.use_from_path! File.dirname(File.dirname(__FILE__))
    rescue LoadError
      # RVM is unavailable at this point.
      raise "RVM ruby lib is currently unavailable."
    end
  end

  ENV['BUNDLE_GEMFILE'] = File.expand_path('../Gemfile', File.dirname(__FILE__))
  require 'bundler/setup' 
```

httpd.conf

```
...
LoadModule passenger_module /usr/local/rvm/gems/ree-1.8.7-2012.02/gems/passenger-3.0.12/ext/apache2/mod_passenger.so
   PassengerRoot /usr/local/rvm/gems/ree-1.8.7-2012.02/gems/passenger-3.0.12
   PassengerRuby /usr/local/rvm/wrappers/ree-1.8.7-2012.02/ruby

... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-08T10:47:36.217

你可以查看这篇很棒的文章：[Phusion Passenger & running multiple Ruby versions](http://blog.phusion.nl/2010/09/21/phusion-passenger-running-multiple-ruby-versions/)

基本上，您可以使用 rvm 和反向代理来完成它。例如，您可以像往常一样部署一个 ruby​​ 版本（如 1.9），并使用反向代理设置另一个：

*   rvm 使用 1.8
*   宝石安装乘客--pre
*   cd /path/to/your/app
*   乘客开始 -a 127.0.0.1 -p 3000 -d
*   在您的 apache 配置中设置反向代理

    ```
    <VirtualHost *:80>
      ServerName www.hamburgers.com
      DocumentRoot /path/to/your/app/public
      PassengerEnabled off
      ProxyPass / http://127.0.0.1:3000
      ProxyPassReverse / http://127.0.0.1:3000
    </VirtualHost> 
    ```

您也可以尝试使用独角兽代替乘客，或者用 ngix 替换 apache。

# c# - 在 Azure Web 角色中获取程序集生成日期

> ID：10449954
> 
> 赞同：1
> 
> 时间：2012-05-04T13:35:57.840
> 
> 标签：c#, azure

在 Azure Web 角色中，我想检索生成程序集的日期/时间。我已经看到了一些通过[从 PE 标头中检索链接器时间戳](https://stackoverflow.com/questions/1600962/displaying-the-build-date)来执行此操作的技巧，但这需要您阅读在 Azure 项目中似乎不起作用的**Assembly.Location 。**我得到这个例外：

*NotSupportedException - 动态程序集中不支持调用的成员*

也许有更好的方法来获取这些信息。也许我可以获取部署 Web 角色的日期/时间？这对我也有用。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T16:59:02.637

你在问两个不同的事情。很有可能编译/构建代码的时间与部署角色的时间有很大的不同。因此，您可能会获得相同的日期/时间，也可能不会，除非您控制构建和部署相同的时间，否则无法保证。

如果您的目标是了解角色的部署时间，您可以在多个位置添加此日期/时间，并直接在您的角色特定代码中检索它。我不确定是否有办法从角色中获取部署时间，稍后会深入研究。

以下是我立即想到的一些建议：

1.  在您的服务配置中创建一个“字符串”设置并在您的角色特定代码中读取它。请记住，您不能直接在特定于 Web 角色的 W3WP.exe 进程中获取服务配置设置，因为这两个进程单独运行并且需要一些额外的编码。

2.  您还可以将日期/时间添加到服务配置并在启动任务中访问以进一步处理，如下所示：http: [//blogs.msdn.com/b/avkashchauhan/archive/2011/11/09/how-to-access-服务-配置-设置-在-windows-azure-startup-task.aspx](http://blogs.msdn.com/b/avkashchauhan/archive/2011/11/09/how-to-access-service-configuration-settings-in-windows-azure-startup-task.aspx)

3.  您可以在 App.Config 中添加日期/时间设置并访问它。我在这里描述过：http: [//blogs.msdn.com/b/avkashchauhan/archive/2011/10/25/reading-configuration-entries-using-system-configuration-configurationmanager-class-in-a-windows-azure -application.aspx](http://blogs.msdn.com/b/avkashchauhan/archive/2011/10/25/reading-configuration-entries-using-system-configuration-configurationmanager-class-in-a-windows-azure-application.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T16:38:08.813

在您链接到的解决方案中，而不是这样做：

```
System.Reflection.Assembly assembly = System.Reflection.Assembly.GetExecutingAssembly(); 
```

尝试这样做：

```
System.Reflection.Assembly assembly = typeof(AClassInMyAssembly).Assembly; 
```

我不确定这会奏效，但我认为它可能会奏效。如果没有，您可能会考虑组装版本是否适合您的目的。

# redbean - RedBean (ORM) 像其他 Bean 一样获取 Bean 与他的关系

> ID：10449957
> 
> 赞同：0
> 
> 时间：2012-05-04T13:36:25.327
> 
> 标签：redbean

我通过这种方式存储了一个产品 Bean：

```
$product = R::dispense( 'product' ); 
$product->name = $_POST['name']; 
$product->description = $_POST['description']; 
$product->price = $_POST['price']; 
$product->category = $_POST['category']; 
R::store( $product ); 
```

如何指示类别的属性是对类别 Bean 的 id 引用（或 FK）？我想像这样获得类别 Bean：

```
$products = R::find( 'product' ); 
foreach( $products as $product ) 
   $productCategory = $product->category->name; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T16:32:12.917

**如果**您还没有配置数据库表，我会这样做：

```
$product = R::dispense( 'product' ); 
$product->name = $_POST['name']; 
$product->description = $_POST['description']; 
$product->price = $_POST['price']; 
$product->category = R::load('category',$_POST['category']); 
R::store( $product ); 
```

**但**我相信，如果您的数据库为类别分配了一个外部索引并且它指向类别表，那么您可以执行上述操作。所以在你的`product`桌子上，有一列`category_id`并将其设为外部索引`category.id`，它*应该可以*工作。我可以稍后对其进行测试并给你一个更明确的答案，但这只是我所知道的。

# asp.net-mvc - 在 MVC4 SinglePageApplication 中上传图像/文件

> ID：10449961
> 
> 赞同：2
> 
> 时间：2012-05-04T13:36:51.183
> 
> 标签：asp.net-mvc, image, file-upload, asp.net-mvc-4

我正在开发一个 MVC4 SPA 应用程序。其中一项功能是能够上传文件/图像并存储在数据库中。我想知道如何做到这一点。我们可以用普通的 MVC 或 Asp.net 处理相同的方式吗？这是我的模型：

```
 public byte[] Image { get; set; }
    public byte[] Binary { get; set; }
    public string Name { get; set; }
    public string Description { get; set; }
    public string OtherInfo { get; set; } 
```

如果可能，请与我分享一些演示/教程...

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T13:38:30.987

我正在做类似的事情，最终使用了 Telerik MVC 组件（开源版本）。

上传控件在该套件中非常易于使用。

# android - Android - 如何在录制时添加增益控制

> ID：10449963
> 
> 赞同：2
> 
> 时间：2012-05-04T13:36:59.013
> 
> 标签：android, audio, fft, audio-recording, audiorecord

我为录音机应用程序工作，想添加增益控制，但我不知道该怎么做。我可以访问音频缓冲区，但我不知道如何使声音更大或更慢。我看到另一个应用程序有一个 seekBar 用于从特定范围中选择分贝。

```
aRecorder.read(buffer, 0, buffer.length);
fWriter.write(buffer); // Write buffer to file 
```

请告诉我应该怎么做才能在我的应用程序中实现增益控制。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T16:16:53.573

改变音量很简单，只需将所有样本乘以某个分数。+/- 3dB（分贝）的变化分别对应于乘以 2 或 0.5（参见[http://en.wikipedia.org/wiki/Decibel](http://en.wikipedia.org/wiki/Decibel)）。为防止输出不连续，请确保从头到尾平滑地改变乘法因子。

请参阅 AudioSampleBuffer::applyGainRamp() @ [http://www.rawmaterialsoftware.com/api/classAudioSampleBuffer.html](http://www.rawmaterialsoftware.com/api/classAudioSampleBuffer.html)

# maven - 在 Intellij Idea 中调试 jar 内容

> ID：10449966
> 
> 赞同：2
> 
> 时间：2012-05-04T13:37:10.957
> 
> 标签：maven, intellij-idea

我有一个非平凡的 maven 构建，它产生了一个 jar 填充，我希望 Itellij Idea 获取 maven 的输出，然后启动 jar，但 IDE 不允许我指定要在“应用程序”启动配置中使用的 jar。请建议一种以这种方式配置项目的方法。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-04T13:45:16.190

您可以创建一个新的虚拟模块，将此 jar 添加到其[依赖](http://www.jetbrains.com/idea/webhelp/configuring-module-dependencies-and-libraries.html)项并将源附加到库，然后您可以通过在运行配置中指定主类来调试它。模块本身可能不包含源或其他内容根。

# android - 无法在 monodroid 中获取位置更新

> ID：10449969
> 
> 赞同：0
> 
> 时间：2012-05-04T13:37:21.663
> 
> 标签：android, xamarin.android

我正在尝试在我的 Android 应用程序中获取位置，如下所示

```
LocationManager lmanager = (LocationManager)context.GetSystemService(Context.LocationService);
if (lmanager.IsProviderEnabled(LocationManager.NetworkProvider))
 {
  Location currentLoc = lmanager.GetLastKnownLocation(LocationManager.NetworkProvider);
} 
```

我也尝试使用`LocationManager.gpsProvider`而不是网络提供商。

在所有情况下，我都得到一个空引用异常`currentLoc`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T14:31:31.397

该[`GetLastKnownLocation()`](http://docs.mono-android.net/?link=M%3aAndroid.Locations.LocationManager.GetLastKnownLocation%28System.String%29)方法返回它所知道的最后一个位置，如果它之前从未收到任何更新，则该位置可能为 null。我认为您在这里要做的是侦听位置更新，然后在它们进入后对其进行响应。您可以通过实现[`ILocationListener`](http://docs.mono-android.net/?link=T%3aAndroid.Locations.ILocationListener)接口来做到这一点：

```
class MyLocationListener : Java.Lang.Object, ILocationListener
{
    public void OnLocationChanged(Location location)
    {
    }

    public void OnProviderDisabled(string provider)
    {
    }

    public void OnProviderEnabled(string provider)
    {
    }

    public void OnStatusChanged(string provider, Availability status, Bundle extras)
    {
    }
} 
```

在你的活动中，你可以声明你想使用这个类来开始监听这样的更新：

```
var locationManager = (LocationManager)GetSystemService(LocationService);
var locationListener = new MyLocationListener();

locationManager.RequestLocationUpdates(LocationManager.NetworkProvider, 5000, 2, locationListener); 
```

# java - 如何参数化 SELECT 语句的字段？

> ID：10449972
> 
> 赞同：1
> 
> 时间：2012-05-04T13:37:25.430
> 
> 标签：java, jdbc, prepared-statement

有没有办法使用`PreparedStatement`或其他实用程序对 SELECT 语句的字段进行参数化？

我的意思是：

`SELECT ?, ? FROM MY_TABLE WHERE ? = ?`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T13:38:37.240

不，JDBC 不允许您这样做。参数背后的想法是加快执行速度并避免 SQL 插入；参数化您选择的列对这两个目标都没有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T13:41:26.960

尝试以下

[http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html)

# c# - 检查主键是否存在

> ID：10449973
> 
> 赞同：1
> 
> 时间：2012-05-04T13:37:29.400
> 
> 标签：c#

我之前尝试过发布这个并且不得不删除它，因为代码编辑器没有正确和不完整地发布它。另外，我有一个成员问我有关 SQL 注入的问题。

这是故事：

我有一个页面，用户可以在其中检查他的信息，然后再将其提交到数据库。我要做的就是在提交之前查看该主键是否存在，以避免出现服务器错误。

在我的页面加载事件中，我有以下内容：

```
SqlConnection conn = new SqlConnection(ConfigurationManager.ConnectionStrings["ConnectionString1"].ConnectionString);

SqlCommand oldcmd = new SqlCommand("SELECT * from dbo.registrar WHERE [MY ID] = '"+ID+"'", conn);
oldcmd.CommandType = CommandType.Text;

SqlDataAdapter da = new SqlDataAdapter(oldcmd);
DataTable dt = new DataTable();
da.Fill(dt);

if (dt.Rows.Count >= 1)
{
   lblExists.Visible = true;
   lblExists.ForeColor = System.Drawing.Color.Red;
   lblExists.Text = "Oops! Our records show that you have already signed up for this service. Please check your information or contact your administrator for further assistance.";
} 
```

即使数据库中没有记录告诉我我做错了，标签也会触发。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-04T13:39:34.150

试试这个。

```
SqlCommand oldcmd = new SqlCommand("SELECT COUNT(*) from dbo.registrar WHERE [MY ID] = @id", conn);
oldcmd.Parameters.Add("@id", SqlDbType.Int);
oldcmd.Parameters["@id"].Value = ID;

if ((int)oldcms.ExecuteScalar() >= 1)
{
    lblExists.Visible = true;
    lblExists.ForeColor = System.Drawing.Color.Red;
    lblExists.Text = "Oops! Our records show that you have already signed up for this service. Please check your information or contact your administrator for further assistance.";
}
else
{
    lblExists.Visible = false;
} 
```

# internet-explorer-7 - FB.init 和 FB.ui 在 Canvas 应用程序的 IE7 中不起作用

> ID：10449982
> 
> 赞同：0
> 
> 时间：2012-05-04T13:38:03.857
> 
> 标签：internet-explorer-7, facebook-javascript-sdk, facebook-php-sdk

我说的网站在这里：

[https://www.facebook.com/kleenexau/app_295074103899059](https://www.facebook.com/kleenexau/app_295074103899059)

如果您在流行的浏览器中运行它 - 它可以工作。如果你在 IE7 中运行它，它就会神奇地停止工作。到目前为止，我已经挖掘了超过 1 天，并决定在这里发布这个问题。

我用来连接到 fb 的代码是：

```
<div id="fb-root"></div>
<script src="//connect.facebook.net/en_US/all.js"></script>
<script type="text/javascript">
FB.init({
    appId: _FBAPPID, xfbml: true, status: true, cookie: true, oauth: true,
    channelUrl: "//sharethesoftness.kleenex.com.au/channel.php"
});
</script> 
```

当您单击按钮时，将触发此代码：

```
function jumpToChoose(data) {
    if(data) {
        window.location = _SITE + "choose.html";
    }
}

function startButtonClickHandler() {

    $("#startButton").fadeOut();
    $("#ajaxloader").fadeIn();

    FB.ui({
        method : "permissions.request",
        "perms" : 'user_hometown,friends_hometown,email' /*publish_stream,user_about_me,friends_about_me,*/
    }, jumpToChoose);
} 
```

将“http”添加到 channelUrl 也不起作用。我不知道是什么导致了这个问题。我尝试了很多解决方案，还有这个： http: [//blog.coderubik.com/2011/03/cookies-and-facebook-canvas-apps/](http://blog.coderubik.com/2011/03/cookies-and-facebook-canvas-apps/)。

任何帮助，将不胜感激。如果您需要任何其他详细信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T09:20:24.530

尝试在页面的最顶部添加它，看看它是否有效。

```
<?php
    header('P3P: CP="NOI ADM DEV PSAi COM NAV OUR OTRo STP IND DEM"');
?> 
```

似乎 IE 正在阻止您存储第三方 cookie，此标头将使您的 cookie 能够在任何隐私设置中存活。

# ruby-on-rails-3 - 使用来自 Github 的分叉 gem (active_admin) 时出错

> ID：10449983
> 
> 赞同：1
> 
> 时间：2012-05-04T13:38:04.847
> 
> 标签：ruby-on-rails-3, github, gem, activeadmin, sprockets

我遇到了一个非常奇怪的问题。当我分叉 active_admin gem 并使用分叉的、未更改的版本时，它给了我以下错误：

```
Sprockets::CircularDependencyError in Active_admin/devise/sessions#new
/Users/Victor/.rvm/gems/ruby-1.9.2-p180/bundler/gems/active_admin-916ecdd04e3c/app/assets/javascripts/active_admin/base.js has already been required

Extracted source (around line #12):

9:     <%= stylesheet_link_tag style.path, style.options %>
10:   <% end %>
11:   <% ActiveAdmin.application.javascripts.each do |path| %>
12:     <%= javascript_include_tag path %>
13:   <% end %>
14: 
15:   <%= csrf_meta_tag %> 
```

当我使用原始版本时，没有错误。如果两个版本相同，这怎么可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-05T04:03:12.760

是的。您可以删除该行

```
//= require_directory ./ 
```

在

```
/.rvm/gems/ruby-1.9.2-p180/bundler/gems/active_admin-916ecdd04e3c/app/assets/javascripts/active_admin/application.js 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T09:54:39.170

从您的 app/assets/javascripts 文件夹中删除 active_admin.js - 看起来不再需要它。

# android - 将滚动条添加到动态视图

> ID：10449988
> 
> 赞同：0
> 
> 时间：2012-05-04T13:38:14.720
> 
> 标签：android, scrollbar

我有一个 LinearLayout，我在其中动态地创建了一定数量的 TextView。
有时，TextView 的数量超出了屏幕的大小。

如何向此视图添加滚动条，以便用户可以上下滚动并查看所有 TextView？

这是我的代码的一部分：

```
LinearLayout layout = (LinearLayout) findViewById(R.id.layout);
for (int n = 0; n < (numberOfPlayers*(numberOfPlayers-1)/2); n++) {
    TextView tv = new TextView(this);
    tv.setText(gamelist[n][0] + " - " + gamelist[n][1]);
    layout.addView(tv);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T13:41:40.587

在 ScrollView 中包含您的 linearLayout

```
<ScrollView 
   android:id="@+id/scroll"
   android:layout_height="wrap_content" 
   android:layout_width="wrap_content">

    <LinearLayout ... />

</ScrollView> 
```

请注意，一个 ScrollView 只能有一个视图子视图

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T13:42:30.347

将你的包装`LinearLayout`成`ScrollView`.

在这种情况下，您可以考虑使用`ListView`(tutorial [here](http://www.vogella.com/articles/AndroidListView/article.html) )。