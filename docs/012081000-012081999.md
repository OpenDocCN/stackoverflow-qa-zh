# StackOverflow 问答 12081000-12081999

# c# - 如何在给定目录的情况下取消所有文件扩展名的大写？

> ID：12081005
> 
> 赞同：3
> 
> 时间：2012-08-22T20:35:28.733
> 
> 标签：c#, rename, tolower

```
 originalFiles = Directory.GetFiles(fbFolderBrowser.SelectedPath).Where(file => !file.EndsWith(".db")).ToArray();

foreach (string file in originalFiles)
    {
         File.Move(file, file.Replace(".JPG", ".jpg"));
         File.Move(file, file.Replace(".TIFF", ".tiff"));
         File.Move(file, file.Replace(".JPEG", ".jpeg"));
         File.Move(file, file.Replace(".BMP", ".bmp"));
         File.Move(file, file.Replace(".GIF", ".gif"));
    } 
```

我认为运行上述内容会将文件扩展名更改为小写。

我在目录中有文件：

AAA_1.jpg
AAA_2.JPG
BBB_1.TIFF
BBB_2.GIF

我希望它是：

AAA_1.jpg
AAA_2.jpg
BBB_1.tiff
BBB_2.gif

我该怎么做呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-22T20:40:25.087

使用类的[`ToLower()`](http://msdn.microsoft.com/en-us/library/system.string.tolower.aspx)方法，使用`String`类的[`ChangeExtension()`](http://msdn.microsoft.com/en-us/library/system.io.path.changeextension.aspx)方法`Path`。这应该允许您将所有扩展名小写，而不必枚举每个可能的扩展名。

```
DirectoryInfo folder = new DirectoryInfo("c:\whatever");
FileInfo[] files = dirInfo.GetFiles("*.*");

foreach (var file in files)
{
    File.Move(file.FullName, Path.ChangeExtension(file, 
       Path.GetExtension(file).ToLower()));     
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-22T20:52:30.517

我知道了。感谢罗伯特的提示。

```
foreach (string file in originalFiles)
{
  File.Move(file, Path.ChangeExtension(file, Path.GetExtension(file).ToLower()));
} 
```

# php - array_unique 只返回一条记录

> ID：12081006
> 
> 赞同：2
> 
> 时间：2012-08-22T20:35:39.097
> 
> 标签：php, array-unique

在下面的代码中：

```
$sth = $dbh->query('SELECT DISTINCT title,courseId,location from training');  
$sth->setFetchMode(PDO::FETCH_ASSOC); 
$results = $sth->fetchAll();
$uu = array_unique($results);

echo "<pre>";
print_r($uu);
echo "</pre>"; 
```

我只得到 1 个结果`print_r($uu);`

如果我删除`array_unique`所有（30+）行，则返回。（不，并非所有这些都是重复的）:)

我究竟做错了什么？

编辑`var_dump()`结果：

```
array(23) {
  [0]=>
  array(3) {
    ["title"]=>
    string(26) "String Here"
    ["courseId"]=>
    string(1) "8"
    ["location"]=>
    string(1) "1"
  }
  [1]=>
  array(3) {
    ["title"]=>
    string(26) "Another String Here"
    ["courseId"]=>
    string(1) "8"
    ["location"]=>
    string(1) "2"
  }
  [2]=>
  array(3) {
    ["title"]=>
    string(24) "Third String Here"
    ["courseId"]=>
    string(1) "5"
    ["location"]=>
    string(1) "2"
  } 
```

ETC...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T20:40:41.333

根据我对它的理解，`array_unique`它不会递归地遍历数组。它将看到每个值`$uu === array()`因此删除除一个值之外的所有值，同时保留密钥。如果密钥始终为 0，我不会感到惊讶。

在手册中查看注释：

> 请注意，array_unique() 不适用于多维数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T20:44:17.563

从手册：

> 注意：请注意，array_unique() 不适用于多维数组。

更远：

> 注意：当且仅当 (string) $elem1 === (string) $elem2 时，才认为两个元素相等。换句话说：当字符串表示相同时。

当一个数组被转换为一个字符串时，你会得到“Array”。

* * *

你为什么还要打电话`array_unique`？您的数据库已经确保了唯一性。

我不确定细节，但这似乎是你想要的。我自己还在学习 SQL。

```
SELECT title, courseId, location
FROM training
GROUP BY title; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T20:55:30.760

关键字作用于整`DISTINCT`行，而不仅仅是一个字段。添加`DISTINCT`意味着结果集中的每一行都是唯一的（与其他行相比）。行可以共享*某些*字段，而不是*所有*字段。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T20:49:33.880

array_unique() 通过字符串表示比较项目。如手册所述，

> 两个元素被认为相等当且仅当 (string) $elem1 === (string) $elem2

数组的字符串转换将始终产生“Array”，因此 PHP 认为所有项目都是相同的，并且 array_unique() 只返回一个项目。

要解决这个问题，您必须编写自己的函数，可能要确保 in_array()。由于这些行来自数据库，您应该能够重新编写 SQL，以便只返回唯一的行。

# node.js - Dust 模板中的 for 循环

> ID：12081007
> 
> 赞同：3
> 
> 时间：2012-08-22T20:35:56.230
> 
> 标签：node.js, dust.js

我正在使用 NodeJS/Express3 和dusts-linkedin 并且想做相当于：

```
for(var i = locals.first;i < (locals.first + locals.pages); $i++) {
    <div>i</div>
} 
```

我想我需要创建一个辅助函数，但不清楚如何做

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T21:17:06.953

好的。就我而言，我试图创建一个寻呼机，但我将稍微简化一下答案，以便人们可以了解总体思路。可能有一种更清洁的方法来做到这一点。

我的助手将被称为“寻呼机”。我想传递一些本地变量。它们是 locals.start 和 locals.end - 每个都是代表我的寻呼机开始和结束的数字。我还将传递一个用于寻呼机的 url。

在我的模板中，我调用了助手以及我可能需要的所有参数：

```
{@pager start="{locals.start}" end="{locals.end}" url="/articles?page=%page%"/} 
```

然后在我的应用程序中添加这个助手。我需要确保我的灰尘模块存在：

```
cons = require('consolidate'),
dust = require('dustjs-linkedin'), 
```

然后创建助手：

```
dust.helpers['pager'] = function(chunk, context, bodies, params) {

  //tapping these to get the actual value (since we passed vsaraibles) and casting as a number with '+'
  first = +dust.helpers.tap(params.first, chunk, context);
  last = +dust.helpers.tap(params.last, chunk, context);

  //this one is all ready since we just passed a string
  url = params.url;

  //build our html - do whatever you need here - this is an example
  var html = '<ul>';
  for(var i = first; i <= last; i++) {
    //I used a replace and placeholder - prob other methods you can use
    html += '<li><a href="' + url.replace('%page%', i) + '">' + i '</a></li>';
  }
  html += '</ul>';

  //write this back to the template
  chunk.write(html);

  //return it
  return chunk;
}; 
```

希望这可以帮助某人

# javascript - Javascript 在第 xx 行导致堆栈溢出

> ID：12081011
> 
> 赞同：0
> 
> 时间：2012-08-22T20:36:07.753
> 
> 标签：javascript, stack-overflow

> **可能重复：**
> [带有 JQuery 的 IE 中的堆栈溢出（第 12/1076 行）](https://stackoverflow.com/questions/1768855/stack-overflow-in-ie-with-jquery-at-line-12-1076)

我的用户（使用 IE）报告以下错误：

第 43 行的堆栈溢出错误。

在我的页面中，我有以下 javascript 块来初始化谷歌地图。这是完整的代码：

```
 var map;

    function initializeMap() {

        var locations = [];
        var baseLat = 39.828175;
        var baseLng = -98.5795;

        @if (Model.Clubs.Any())
        {
            @:baseLat = @Model.Clubs.FirstOrDefault().latitude;
            @:baseLng = @Model.Clubs.FirstOrDefault().longitude;
        }

        @foreach (var club in Model.Clubs)
        {
            var content = string.Format("<span style='font-weight:bold; font-size: small;text-align:left;'>{0}<br/>{1}, {2}</span>", club.name, club.city, club.state);
            var link = string.Format("<span style='text-align:left;'><a href='/Search/Details?state={0}&cbsa={1}&clubid={2}' class='moreDescription'>Details</a></span>", club.state, club.cbsa_code, club.id);
            @:locations.push(["@Html.Raw(content)", @club.latitude, @club.longitude, 4, "@Html.Raw(link)"]);

        }

        map = new window.google.maps.Map(document.getElementById('map'), {
            zoom: 7,
            center: new window.google.maps.LatLng(baseLat, baseLng),
            mapTypeId: window.google.maps.MapTypeId.ROADMAP
        });

        var infowindow = new window.google.maps.InfoWindow();

        var marker, i;

        for (i = 0; i < locations.length; i++) {
            marker = new window.google.maps.Marker({
                position: new window.google.maps.LatLng(locations[i][1], locations[i][2]),
                map: map
            });

            window.google.maps.event.addListener(marker, 'click', (function(marker, i) {
                return function() {
                    infowindow.setContent(locations[i][0] + '<br/>' + locations[i][4]);
                    infowindow.open(map, marker);
                };
            })(marker, i));
        }

    } 
```

这是第 43 行：`position: new window.google.maps.LatLng(locations[i][1], locations[i][2])`

ReSharper 还说“声明从外部范围隐藏变量标记”和“声明从外部范围隐藏变量 i”

关于导致溢出的任何想法？

谢谢！

# php - 从 XML 源的关联数组创建 PHP 变量

> ID：12081014
> 
> 赞同：-1
> 
> 时间：2012-08-22T20:36:19.173
> 
> 标签：php, xml, arrays, variables

A如何从 web 服务的 XML 输出中获取以下数组，并提取 [Key] 及其 [Value] 并将它们转换为 PHP 变量（与其值匹配的键），以便我可以在 PHP 脚本中使用它们. 没有任何运气，做了一些研究，我在任何地方都没有看到这种布局。这种布局看起来不同，我找不到这种特殊布局转换的任何例子。有没有办法从下面提取特定的字符串数据，例如“user.id”并将其值“431349”分配为 php 变量？

```
Array
(
    [RedeemTokenResult] => Array
        (
            [DictionaryEntry] => Array
                (
                    [0] => Array
                        (
                            [Key] => environmentname
                            [Value] => Staging
                        )

                    [1] => Array
                        (
                            [Key] => user.prc.type
                            [Value] => C
                        )

                    [2] => Array
                        (
                            [Key] => user.country
                            [Value] => United States
                        )

                    [3] => Array
                        (
                            [Key] => user.displayname
                            [Value] => Corporate User
                        )

                    [4] => Array
                        (
                            [Key] => sso.testmode
                            [Value] => True
                        )

                    [5] => Array
                        (
                            [Key] => user.region
                            [Value] => Texas
                        )

                    [6] => Array
                        (
                            [Key] => user.par.seg.id
                            [Value] => 1
                        )

                    [7] => Array
                        (
                            [Key] => user.postalcode
                            [Value] => 10001
                        )

                    [8] => Array
                        (
                            [Key] => session.expire.timeout
                            [Value] => 60
                        )

                    [9] => Array
                        (
                            [Key] => user.lastname
                            [Value] => User
                        )

                    [10] => Array
                        (
                            [Key] => user.par.classoftrade
                            [Value] => ALL
                        )

                    [11] => Array
                        (
                            [Key] => user.id
                            [Value] => 431349
                        )

                    [12] => Array
                        (
                            [Key] => user.firstname
                            [Value] => Corporate
                        )

                    [13] => Array
                        (
                            [Key] => user.par.id
                            [Value] => 0
                        )

                    [14] => Array
                        (
                            [Key] => user.city
                            [Value] => test
                        )

                    [15] => Array
                        (
                            [Key] => user.address1
                            [Value] => test
                        )

                    [16] => Array
                        (
                            [Key] => user.profile.companyname
                            [Value] => TradeOne
                        )

                    [17] => Array
                        (
                            [Key] => user.email
                            [Value] => nickk@tradeonemktg.com
                        )

                    [18] => Array
                        (
                            [Key] => user.username
                            [Value] => tomsnac
                        )

                    [19] => Array
                        (
                            [Key] => sso.client.hostname
                            [Value] => 10.1.2.135
                        )

                    [20] => Array
                        (
                            [Key] => session.expire.url
                            [Value] => https://ssostage.tradeonemktg.com/ReturnUrl=https%3a%2f%2fprcstage3.tradeonemktg.com%2fv%2f6%2f1%2fprc%2fsn%2fLogin.aspx%3freturnurl%3d%252fv%252f6%252f1%252fprc%252fsn%252fHome.aspx
                       )

                    [21] => Array
                        (
                            [Key] => sso.client.ip4
                            [Value] => 10.1.2.135
                        )

                    [22] => Array
                        (
                            [Key] => user.timezone
                            [Value] => (GMT-06:00) Central Time (US & Canada)
                        )

                    [23] => Array
                        (
                            [Key] => user.culture
                            [Value] => en-US
                        )

                    [24] => Array
                        (
                            [Key] => user.par.seg.marketcode
                            [Value] => NDC
                        )

                    [25] => Array
                        (
                            [Key] => user.telephone
                            [Value] => 111111111
                        )

                    [26] => Array
                        (
                            [Key] => session.expire.time
                            [Value] => 7/23/2012 12:38:28 PM
                        )

                    [27] => Array
                        (
                            [Key] => sso.xfer.parameters
                            [Value] => 
                        )

                    [28] => Array
                        (
                            [Key] => sso.timestamp
                            [Value] => 7/23/2012 11:38:31 AM
                        )

                )

        )

) 
```

======================== 这是我正在处理的 PHP 文件 ....

```
<?
require_once "SSO.class.php";

$service = 'https://XXX.XXX.XXX.com/SSO/XXXXXX.asmx'; //Service URl from TradeOne
$affiliate = 'XXXXXXXXXXXXXXXXXXXXXXX'; // Affiliate from TradeOne
$pass = XXXXXXXXXXXXXXXXXXXXXXX; //Password secret from TradeOne

$token = $_REQUEST['token'];

$sso = new SSO($pass);
$hashedToken = $sso->encryptToken($token,$salt,$iv);

print $sso->toString();

require_once "../soap_lib/nusoap.php";
$client   = new nusoap_client($service.'?WSDL',true);
$tok = array(
             'affiliate'=>$affiliate,
             'hashedToken'=>$hashedToken
             );

$response = $client->call('RedeemToken',array('parameters'=>$tok)); 

echo '<br /><br />';

function keyValue(&$response) {
  $result = Array();
  foreach($response as $row) {
    $result[$row['Key']] = $row['Value'];
  }
  $a = $result;
}

keyValue($a['RedeemTokenResult']['DictionaryEntry']);

var_dump($response);

?> 
```

这是我做的最后一次编辑，结果是：

警告：在第 51 行的 /xxxx/xxxx/xx/xxxx/xxxx/xxx/xxxxxx.php 中为 foreach() 提供的参数无效 array(1) { ["RedeemTokenResult"]=> array(1) { ["DictionaryEntry" ]=> 空 } }

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T20:38:35.610

```
function keyvalue(&$array) {
  $result = Array();
  foreach($array as $row) {
    $result[$row['Key']] = $row['Value'];
  }
  $array = $result;
}

keyValue($array['RedeemTokenResult']['DictionaryEntry']); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T20:49:32.803

您应该使用数组而不是尝试创建一堆变量。您可以像这样创建一个动态的多维数组：

```
$result = array();
foreach( $response['RedeemTokenResult']['DictionaryEntry'] as $item) {
    $keys = explode( '.', $item['Key']);
    $array_name = array_shift( $keys); // Get name of the array
    $temp =& $result[$array_name];
    foreach( $keys as $key)
    {           
        $temp =& $temp[$key];
    }
    $temp = trim( $item['Value']);
} 
```

[这会产生一个看起来像这样](http://viper-7.com/QW6NkZ)的单个`$result`数组：

```
Array
(
    [user] => Array
        (
            [telephone] => 111111111
        )

    [session] => Array
        (
            [expire] => Array
                (
                    [time] => 7/23/2012 12:38:28 PM
                )

        )

    [sso] => Array
        (
            [xfer] => Array
                (
                    [parameters] => 
                )

        )

) 
```

现在您可以抓取以下元素：

```
echo $result['user']['telephone'];
echo $result['session']['expire']['time']; 
```

# javascript - 将 JSON 对象发布到 iFrame

> ID：12081016
> 
> 赞同：5
> 
> 时间：2012-08-22T20:36:30.017
> 
> 标签：javascript, json, http, post, iframe

我已经看到了将数据发布到 iframe 的不同方法，但我找不到可以只发送 JSON 对象的方法。所有的方法似乎都需要我使用表单元素来放入我的数据。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-22T20:56:50.700

查看[postMessage](https://developer.mozilla.org/en-US/docs/DOM/window.postMessage)并将 JSON.stringify 用于您的消息并在事件处理程序中使用 JSON.parse。

要实际发布到 iframe，您必须这样做

```
myIframe.contentWindow.postMessage(...) 
```

[小提琴](http://jsfiddle.net/rLYGY/)

html

```
<button onclick="_sendMessage ()">Send</button>
<iframe src="" id="myIframe">​ 
```

javascript

```
var myIframe = document.getElementById('myIframe');
myIframe.contentWindow.addEventListener('message', function(event) {
    console.log(JSON.parse(event.data));
}, false);

window._sendMessage = function() {
    var json = {payload:'Hello World'};
    myIframe.contentWindow.postMessage(JSON.stringify(json), '*');
}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-05T16:04:57.853

您可以使用[Porthole](http://ternarylabs.github.io/porthole) JS 库。它将自己描述为*“用于安全跨域 iFrame 通信的 JavaScript 库”*。

如果可用，它会使用`postMessage()`，但对于没有的浏览器，它会恢复为“隐藏代理”解决方法。

# c# - telerik radgrid 用于显示图片库

> ID：12081017
> 
> 赞同：0
> 
> 时间：2012-08-22T20:36:31.997
> 
> 标签：c#, asp.net, telerik, telerik-grid

我正在尝试使用telerik radgrid 来显示图片库。我将使用 radgrid 控制器的原因是能够使用寻呼机并设置排序设置（因此图像可以按照用户想要的方式排序）。图像将动态创建，因此图像的数量会有所不同。现在图像只会放在一列中，我当然会将它从左到右放在不同的行中。我会在不创建特定列的情况下这样做，原因是用户应该能够缩小和调整放置图像的内容的大小，然后动态更改一行中的图像数量。我的问题是 Telerik RadGrid 控件是否可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T04:50:26.407

在我看来，RadListView 控件比 RadGrid 更适合此类功能。查看这个图片库演示：[ListView / Image Gallery](http://demos.telerik.com/aspnet-ajax/controls/examples/integration/listviewsliderwindowrotator/defaultcs.aspx?product=listview)实际上所有这些功能都可以通过 ASP.NET ListView 控件实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T07:03:17.483

实际上，我找到了一个很好的解决方案，说明如何使用 radGrid 进行类似 ListView 或 DataList 的数据表示。 [http://www.telerik.com/help/aspnet-ajax/grid-listview-datalist-like-grid.html](http://www.telerik.com/help/aspnet-ajax/grid-listview-datalist-like-grid.html)

# jquery - 图片标题在悬停时出现在单独的 div 中

> ID：12081019
> 
> 赞同：0
> 
> 时间：2012-08-22T20:36:35.883
> 
> 标签：jquery, image, hover, title

我对 jQuery 很陌生，所以我将不胜感激您提供的任何帮助/建议！

我让它在 jsFiddle 中工作：http: [//jsfiddle.net/cakeeater/LUAtb/10/](http://jsfiddle.net/cakeeater/LUAtb/10/)

基本上，当您将鼠标悬停在图像上时，我只需要图像的标题来替换“Hello”文本。

```
jQuery().ready(function() { 
jQuery("#caption").text('Hello'); });
jQuery('img.gallery').mouseenter(function() { 
   var title = $(this).attr("title");
jQuery("#caption").text(title); });
jQuery('img.gallery').mouseleave(function() { 
jQuery("#caption").text('Hello'); }); 
```

然而，当我把它放到网站上时，“Hello”文本是唯一有效的功能——图像标题不会在悬停时显示：http: [//bit.ly/MNgdUS](http://bit.ly/MNgdUS)

我确信可能有更好的方法来编写脚本......我在 Firebug 中没有看到任何错误，我还尝试禁用站点上的所有其他脚本，结果相同。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T21:07:49.783

这应该有效：

```
$(function() {
    "use strict";
    $("#gallerydescription").text("Hello");
    $("img.team").hover(
        function() {
            $("#gallerydescription").text($(this).attr("alt"));
        },
        function() {
            $("#gallerydescription").text("Goodbye");
        }
    );
}); 
```

使用[`.hover()`](http://api.jquery.com/hover/).

> .hover() 方法绑定了 mouseenter 和 mouseleave 事件的处理程序。您可以使用它在鼠标位于元素内时简单地将行为应用于元素。
> 
> 调用`$(selector).hover(handlerIn, handlerOut)`是以下的简写：
> 
> `$(selector).mouseenter(handlerIn).mouseleave(handlerOut);`

# c# - MonoDevelop Addin 警告消息创建

> ID：12081026
> 
> 赞同：0
> 
> 时间：2012-08-22T20:36:52.937
> 
> 标签：c#, monodevelop, add-in

我为 MonoDevelop 3.0.3.5 开发了一个插件，它使用与此类似的代码输出到 Build Output 选项卡（我已经简化了）：

```
MonoDevelop.Ide.Gui.Pads.ErrorListPad errorListPad = IdeApp.Workbench.GetPad<MonoDevelop.Ide.Gui.Pads.ErrorListPad> ().Content as MonoDevelop.Ide.Gui.Pads.ErrorListPad;
System.IO.TextWriter buildOutput = errorListPad.GetBuildProgressMonitor().Log;
buildOutput.WriteLine("Build Output Test"); 
```

这很好，但我真正想做的是将一些消息也输出到错误列表中的警告选项卡。我已经看过[API 文档](http://monodevelop.com/Developers/Articles/API_Overview)，但仍然不确定如何完成这项任务。

有人对此有任何提示或提示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T23:38:48.353

将其添加到 TaskService。

[这是生成器工具这样做的一个示例](https://github.com/mono/monodevelop/blob/master/main/src/core/MonoDevelop.Ide/MonoDevelop.Ide.CustomTools/CustomToolService.cs#L185)。

# html - 中上 div

> ID：12081028
> 
> 赞同：0
> 
> 时间：2012-08-22T20:36:57.967
> 
> 标签：html, center

我试图将我的导航集中在一个纯 CSS 页面中。我正在寻找“以一切为中心”的外观。

目前，我并排有 3 个 div。这是最好的路线吗？或者我应该使用 1 个 div 并尝试将其居中？

我怎样才能做到这一点？帮助将不胜感激！

这是我的页面：

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head>
    <!-- <meta name="viewport" content="width=device-width; initial-scale=1.0"> -->
    <meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=no;">
    <link rel="stylesheet" type="text/css" href="style3.css" />
    <script type="text/javascript" src="jquery-1.7.2.js"></script>
    <script src="navigation.js"></script>
    </head><body>

<div id="top">

<header>
    <div id="topLeft"></div>
    <nav id="nav-wrap">

    <ul id="nav">
        <li><a href="#">Home</a></li>
        <li><a href="#">Attendees</a><ul><li><a href="#">Sub Menu</a></li><li><a href="#">Sub Menu</a></li><li><a href="#">Sub Menu</a></li><li><a href="#">Sub Menu</a></li></ul></li>
        <li><a href="#">Exhibitors</a></li>
        <li><a href="#">Speakers</a></li>
        <li><a href="#">Program</a></li>

    </ul>

</nav>
<div id="topRight">topright</div>
</header>

</div>  

<div id="middle">
<div id="headerLeft"></div>
<div id="headerimage">
    <img src="header-2013.jpg"/>
    </div>

<div id="headerRight"></div>    
    <br style="clear: left;" />

</div>

<div id="pagewrap"> 

<div id="content">
            <!--  <h3>To see the mobile navigation, narrow your browser window or check with a mobile device.</h3>
        <p>Unholy is a new, upcoming raiding guild with goals of
successfully accomplishing Player versus Environment and Player versus Player
raiding content. If thou art seeking such guild then thou would consider joining
us on our quest to victory over the evils that lurk within the depths of
Karazhan and Zul'Aman. All are welcome that have experienced the foul beasts
that roam abroad the forsaken ground in the Outlands and whish to further
explore and cleanse such places. If this should be thy calling then we welcome
you to our quest for victory, For the Horde </p> -->
        </div>

</div>

<footer>
<div id="footer">
footer
</div>
</footer>
</body></html> 
```

这是我的CSS：

```
/************************************************************************************
GENERAL
*************************************************************************************/
html {
    height: auto;
}

body {
    font: .9em/150% Arial, Helvetica, sans-serif;
    color: #666;
    overflow-x: hidden;
    /******extra Mike Clayton **/
    margin: 0;
    padding: 0;
    height: 100%;
}

a {
    text-decoration: none;
    color: #39C;
}

h1,h2 {
    line-height: 120%;
    margin: 0 0 10px;
    color: #000;
}

header {
    content: " ";
    display: table;
}

/************************************************************************************
STRUCTURE
*************************************************************************************/
#pagewrap {
    width: 100%;
    max-width: 650px;
    margin: 0px auto;
    /**Mike Clayton**/
    min-height: 100%;
    height: 100%;
}

#content {
    clear: both;
    border-top: solid 1px #ccc;
    padding-top: 20px;
    margin: 20px 0;
    width: 100%;
    /**Mike clayton**/
    margin-right:5px;
    margin-left:5px;

    padding-bottom:300px;
}

#top {
    width: 100%;
    background-color: #002664;
    clear: both;
}

#topLeft {
    float: left;
    background-color: #002664;
    width: 20%;
    margin: 0;
    margin-left:200px;
}

#topRight {
    float: left;
    background-color: #002664;
    width: 20%;
    margin: 0;
}

#middle {
    width: 100%;
    background-color: #AD1B30;
    overflow: hidden;
}

#headerLeft {
    float: left;
    background-color: #AD1B30;
    width: 20%;
    margin: 0;
}

#headerimage {
    width: 650px;
    align: center;
    margin: 0 auto;
}

#headerimage img {
    width: 100%;
}

#headerRight {
    float: left;
    background-color: #AD1B30;
    width: 20%;
    margin: 0;
}

#footer {
    clear: both;
    position: absolute;
    z-index: 10;
    height: 3em;
    bottom: 0;
    background-color: #002664;
    width: 100%;
}
/************************************************************************************
NAV
*************************************************************************************/
#nav-wrap {
    margin-top: 20px;

}

/* menu icon */
#menu-icon {
    display: none; /* hide menu icon initially */
}

#nav,#nav li {
    margin: 0;
    padding: 0;
}

#nav li {
    list-style: none;
    float: left;
    margin-right: 5px;
}

/* nav link */
#nav a {
    padding: 4px 15px;
    display: block;
    color: #000;
    background: #ecebeb;
}

#nav a:hover {
    background: #f8f8f8;
}

/* nav dropdown */
#nav ul {
    background: #fff;
    padding: 2px;
    position: absolute;
    border: solid 1px #ccc;
    display: none; /* hide dropdown */
    width: 200px;
}

#nav ul li {
    float: none;
    margin: 0;
    padding: 0;
}

#nav li:hover>ul {
    display: block; /* show dropdown on hover */
}

/************************************************************************************
MOBILE
*************************************************************************************/
@media screen and (max-width: 600px) { /* nav-wrap */
    #nav-wrap {
        position: relative;
    }

    /* menu icon */
    #menu-icon {
        color: #000;
        width: 42px;
        height: 30px;
        background: #ecebeb url(menu-icon.png) no-repeat 10px center;
        padding: 8px 10px 0 42px;
        cursor: pointer;
        border: solid 1px #666;
        display: block; /* show menu icon */
    }
    #menu-icon:hover {
        background-color: #f8f8f8;
    }
    #menu-icon.active {
        background-color: #bbb;
    }

    /* main nav */
    #nav {
        clear: both;
        position: absolute;
        top: 38px;
        width: 160px;
        z-index: 10000;
        padding: 5px;
        background: #f8f8f8;
        border: solid 1px #999;
        display: none; /* visibility will be toggled with jquery */
    }
    #nav li {
        clear: both;
        float: none;
        margin: 5px 0 5px 10px;
    }
    #nav a,#nav ul a {
        font: inherit;
        background: none;
        display: inline;
        padding: 0;
        color: #666;
        border: none;
    }
    #nav a:hover,#nav ul a:hover {
        background: none;
        color: #000;
    }

    /* dropdown */
    #nav ul {
        width: auto;
        position: static;
        display: block;
        border: none;
        background: inherit;
    }
    #nav ul li {
        margin: 3px 0 3px 15px;
    }
    #headerimage {
        display: none;
    }

    /**Mike Clayton**/
    #footer {
        clear: both;
        position: relative;
        z-index: 10;
        height: 3em;
        bottom: 0;
        background-color: #002664;
        width: 100%;
    }
}

@media screen and (min-width: 600px) {
    /* ensure #nav is visible on desktop version */
    #nav {
        display: block !important;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T21:01:55.557

尝试将此添加到您的导航包装中：

```
 #nav-wrap {
 position: relative;
 margin-top: 20px;
 left: 100%;
 } 
```

您还可以使用 px 值而不是百分比。

祝你好运！

# c# - 如何修复 C# 中的“x 是一个变量但像方法一样使用”语法错误？

> ID：12081031
> 
> 赞同：0
> 
> 时间：2012-08-22T20:37:21.233
> 
> 标签：c#, syntax

我在处理 gradrid 页脚总计时遇到以下错误“'fitem' 是一个'变量'，但用作'方法'”

```
protected void RadGrid1_ItemDataBound(object sender, Telerik.Web.UI.GridItemEventArgs e)
{
    if (e.Item is GridFooterItem)
    {
        GridFooterItem fitem = (e.Item as GridFooterItem);
        string value1 = fitem("CALENDAR_DAYS_MTD").Text;
        string value2 = fitem("WEEKENDS_MTD").Text;
        string value3 = fitem("HOLIDAYS_MTD").Text;
        string value4 = fitem("BUSINESS_DAYS_MTD").Text;
        int footervalue1 = Convert.ToInt32(value1.Split(':')[1]);
        int footervalue2 = Convert.ToInt32(value2.Split(':')[1]);
        int footervalue3 = Convert.ToInt32(value3.Split(':')[1]);
        int footervalue4 = Convert.ToInt32(value4.Split(':')[1]);
        //to get the value only.
        if (footervalue2 + footervalue3 + footervalue4 > footervalue1)
        {
            fitem("WEEKENDS_MTD").Style("color") = "Black";
            fitem("HOLIDAYS_MTD").Style("color") = "Black";
            fitem("BUSINESS_DAYS_MTD").Style("color") = "Black";

        }
        else
        {
            fitem("WEEKENDS_MTD").Style("color") = "Red";
            fitem("HOLIDAYS_MTD").Style("color") = "Red";
            fitem("BUSINESS_DAYS_MTD").Style("color") = "Red";
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T20:39:38.057

你的台词

```
fitem("WEEKENDS_MTD").Style("color") = "Black"; 
```

应该是

```
fitem["WEEKENDS_MTD"].Style["color"] = "Black"; 
```

因为`[]`括号用于访问索引，而`()`括号用于调用方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T20:40:06.053

你有这个：

```
 GridFooterItem fitem = (e.Item as GridFooterItem);
 string value1 = fitem("CALENDAR_DAYS_MTD").Text; 
```

使用`fitem("CALENDAR_DAYS_MTD")`可能应该是`fitem["CALENDAR_DAYS_MTD"]`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T20:40:16.140

我认为您正在考虑使用括号进行索引的 VB.NET，但这是 C#。它应该是：

```
fitem["CALENDAR_DAYS_MTD"].Text // Note the square brackets replacing the parens. 
```

不是：

```
fitem("CALENDAR_DAYS_MTD").Text 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T20:40:18.580

只要您使用 C#，就应该使用方括号而不是括号来引用索引。

```
fitem["WEEKENDS_MTD"].Style["color"] = "Black"; 
```

VB.NET 使用括号作为索引。

# scala - Scala Actors 和删除的条目

> ID：12081033
> 
> 赞同：1
> 
> 时间：2012-08-22T20:37:29.417
> 
> 标签：scala, actor

我有一个基本上做平均的 scala 演员实现。我推送一个条目，维护一个总数和一个计数并计算出平均值。发生的事情是，当我在测试期间以紧密的循环运行它时，我错过了一个条目，我相信这是最后一个。演员是这样的：

```
val actor = new Actor { def act = react { 
  case v: Long => addEntry(v); act
  case _ => ()
}}.start() 
```

编辑： addEntry 的实现是这样的：

```
 private def addEntry(v: Long) {
    total = total + v
    count = count + 1
    avg   = total / count
  } 
```

并且添加基本上是`actor ! 10`等等

在测试中调用 stop 后，我等待大约 200 毫秒以确保队列得到处理。（或者我认为这就是我正在做的，这是问题所在吗？）

Edit2：基本上，我现在认为，因为我在一个紧密的循环中设置这些值，然后立即调用 exit，最后一个或多个条目是/没有被处理或被删除。我在循环结束之间放了一个小睡眠（实际上是 CountDownLatch.await 和 actor.stop，现在我不能让测试失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T05:53:42.327

`react`只要您获得 a ，您的实现就会进入，`Long`否则它会停止。你可以用 包装它`loop`，这相当于`while (true)`，并添加一个匹配的表达式来停止它`actor`。`actor ! 10`将不匹配`case v: Long => ...`，因为 an`Int`已发送给演员，因此演员将停止。

```
val actor = new Actor {
  def act() = { 
    loop { 
      react {
        case "stop" => exit()      // you might create a messageobject instead
        case l: Long => addEntry(l)
        case i: Int => addEntry(i.toLong)
      }
    }
  }
}.start() 
```

这将是我的建议。

# javascript - 进行活动链接切换的简单方法

> ID：12081035
> 
> 赞同：0
> 
> 时间：2012-08-22T20:37:31.960
> 
> 标签：javascript

嗨，我正在构建一个页面，我有一个 iframe 正在拉取内容，我希望我的活动链接看起来是活动的。

我整理了一个 JSFiddle，对我想要完成的工作进行了超级基本的分解。基本上我想要发生的是当您单击其中一个锚标记时，它会应用它的悬停状态。当您单击另一个时，它会删除该悬停状态并将其恢复为原始状态。事情是有 3 个不同的 div 我想都相互切换。

非常感谢您的帮助。 [http://jsfiddle.net/u3p3C/1/](http://jsfiddle.net/u3p3C/1/)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-24T15:00:03.150

这是一个例子：http: [//jsfiddle.net/u3p3C/3/](http://jsfiddle.net/u3p3C/3/)

# python - 如何检测元组列表的错误

> ID：12081044
> 
> 赞同：-2
> 
> 时间：2012-08-22T20:38:07.320
> 
> 标签：python

```
l1 = [[(1,1), (1,2), (1,3)]]

for e in l1:
  for i, c in enumerate(e):
     n = re.search(r'(\d,\d)', c)
     if n:
        num = [int(y) for y in c.split(',')]
        print "num is ", num

        e[i] = Sequence_element(num[0], num[1])

if sorted(l1) != l1:
    raise ValueError, 'l1 is not in sequence' 

class Sequence_element(object):

   def __init__(self, first_elem, second_elem):
       self._first_elem = first_elem
       self._second_elem = second_elem

   def first_elem(self):
       return self._first_elem

   def second_elem(self):
      return self._second_elem 
```

这段代码是为了确保 (1,2) 在 (1,1) 之后和 (1,3) 在 (1,1) 和 (1,2) 之后

我排序的错误（l1）给出了 [(1,3), (1,2), (1,1)] 这是错误的，因为这应该给出 [(1,1), (1,2), (1 ,3)] 这意味着在引发错误时不应引发错误。

l1 的每个元素都是在另一个类的帮助下形成的，这可能是这个排序函数不起作用的原因。可能的解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T20:48:39.900

我得到 sorted(l1) 输出为 [(1, 1), (1, 2), (1, 3)] ，并且 sorted(l1) 等于 l1。我没有收到任何错误。

# c# - C# - 属性导致 StackOverflow

> ID：12081051
> 
> 赞同：0
> 
> 时间：2012-08-22T20:38:23.900
> 
> 标签：c#, stack-overflow

```
public class ModelInfo
{
    public int AssignedCount { get; set; }
    public int UnassignedCount { get; set; }
    public int TotalCount { get { return UnassignedCount + TotalCount; } }
} 
```

****编辑：* *** 当我将此代码放入 SO 时，我意识到 TotalCount 属性正在添加 UnassignedCount + TotalCount（我的意思是将其他两个计数加在一起）。有人可以详细解释为什么会发生 SO 错误吗？我的意思是，低级的东西。

*堆栈溢出！*

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-22T20:39:37.560

你是`TotalCount`从内部调用的`TotalCount`，不要那样做。

您可以为属性值设置另一个字段。

不过，我怀疑您的代码应为：

```
public int TotalCount { get { return UnassignedCount + AssignedCount ; } } 
```

编辑：至于为什么会发生 stackoverflow，这是因为当您使用 Properties 时，.NET 编译器实际上会生成 2 个函数，`set_PropertyName`并且`get_PropertyName`. 所以从本质上讲，它会导致`get_PropertyName`方法调用的堆栈溢出变得无限深。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-22T20:43:33.440

查看正在发生的事情（IMO）的最简单方法是将这些属性转换为方法：

```
// If we didn't have properties, this is what the two first lines would be. Ick!
private int assignedCount;
private int unassignedCount;

public int GetAssignedCount()
{
    return assignedCount;
}

public void SetAssignedCount(int value)
{
    assignedCount = value;
}

public int GetUnassignedCount()
{
    return unassignedCount;
}

public void SetUnassignedCount(int value)
{
    unssignedCount = value;
}

// And here's the read-only TotalCount property translation
public int GetTotalCount()
{
    return GetUnassignedCount() + GetTotalCount();
} 
```

现在里面的递归`GetTotalCount()`应该很清楚了。该方法无条件地调用自身，因此最终会炸毁堆栈。

*自动实现的属性的混合以及属性访问看起来*像字段访问的事实有时会妨碍记住它们实际上只是伪装的方法。希望上面的翻译能让这一切更加明显。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-22T20:43:25.257

> 有人可以详细解释为什么会发生 SO 错误吗？

当然：为了计算`TotalCount`，编译器生成如下代码：

*   得到`UnassignedCount`
*   得到`TotalCount`
*   添加`UnassignedCount`到`TotalCount`
*   返回结果

当调用属性 getter 时`TotalCount`（请记住，getter 是一个使用特殊语法的常规无参数函数），运行时将返回地址放在堆栈上。第二步找到我们回到开头，堆栈上有一个额外的返回地址；第三步再做一次，然后是第四步，第五步，以此类推。每次调用都会在堆栈上存放另一个返回地址。这一直持续到堆栈的限制，此时抛出异常。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-22T20:47:49.580

你应该可以这样写：你应该注意 TotalCount 永远不能被设置为所以它没有价值。您是否可能打算这样做：

```
public class ModelInfo
{
    public int AssignedCount { get; set; }
    public int UnassignedCount { get; set; }
    public int TotalCount { get { return UnassignedCount + AssignedCount; } }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-22T20:43:12.283

有一种称为“堆栈”的机制用于跟踪嵌套调用。当您调用一个方法或函数时，当前的“堆栈帧”（当您调用的方法返回时，控制将转移到的地址，以及您方法中的任何参数和方法局部变量）被压入堆栈。当控制权返回到您的方法时，此堆栈帧被弹出，CPU 寄存器恢复到它们之前的状态，以便您的方法可以继续执行。

堆栈是内存的*固定*分配，因此您只能调用这么多级别，然后才能用完存储在函数返回时恢复 CPU 寄存器状态所需的信息。此时，发生堆栈溢出错误，因为您溢出了堆栈。您进行了如此多的嵌套调用，以至于内存不足，无法将它们记录下来。

这就是发生异常的原因。您无限递归：您的属性 getter 一遍又一遍地调用自己，直到堆栈上没有更多空间。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-22T20:40:20.670

因为您指`TotalCount`的是`TotalCount`吸气剂内部。无限循环发生，直到达到堆栈溢出。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-22T20:40:56.927

尝试获取值时，您正在循环播放`TotalCount`

粗略地说，获取 TotalCount 的逻辑是：

*   获取 UnassignedCount 的值
*   获取 Totalcount 的值

重复，冲洗和清洗。

编辑：至于为什么，看看[维基](http://en.wikipedia.org/wiki/Stack_overflow)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-22T20:41:09.463

你在一个无限递归中，一个自称的属性

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-08-22T20:41:31.350

因为调用堆栈（理论上）会变得无限深。而且您没有无限堆栈来保存您需要的所有数据。

# sparql - SPARQL- 按类别字符串检索 DBPedia 资源

> ID：12081053
> 
> 赞同：1
> 
> 时间：2012-08-22T20:38:29.157
> 
> 标签：sparql, dbpedia

如何根据维基百科类别获取 DBpedia 资源？例如，日本所有被洪水淹没的岛屿。与“洪水”相关的可能类别候选列表包括：

*   类别：Floods_in_Malaysia
*   类别：Floods_in_Singapore
*   类别：Floods_in_Japan,
*   还有许多其他人......</li>

我无法使用 SPARQL 查询从类别导航到某些资源。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-24T01:33:09.010

找出要针对 DBpedia 编写什么 SPARQL 查询的最简单方法之一是找到包含您想要的一些信息的 Wikipedia，然后检查与其对应的 DBpedia 资源，然后基于此构造查询。例如，有一篇 Wikipedia 文章，[1993 Kagoshima 大雨](http://en.wikipedia.org/wiki/1993_Kagoshima_Heavy_Rain)。根据命名约定，这将我们引向 DBpedia 资源[http://dbpedia.org/resource/1993_Kagoshima_Heavy_Rain](http://dbpedia.org/resource/1993_Kagoshima_Heavy_Rain)。浏览这个，我们可以看到这篇文章是如何与日本的洪水类别相关的。特别是，我们看到数据包含以下三元组：

```
dbpedia:1993_Kagoshima_Heavy_Rain dcterms:subject category:Floods_in_Japan 
```

这表明我们尝试将以下查询放入[DBpedia SPARQL Endpoint](http://dbpedia.org/sparql)：

```
SELECT * WHERE {
  ?event dcterms:subject category:Floods_in_Japan .
} 
```

[SPARQL 结果](http://dbpedia.org/sparql?default-graph-uri=http%3A%2F%2Fdbpedia.org&query=SELECT+%2a+WHERE+%7B%0D%0A++%3Fevent+dcterms%3Asubject+category%3AFloods_in_Japan+.%0D%0A%7D&format=text%2Fhtml&timeout=30000&debug=on)

有两个结果：

```
event
http://dbpedia.org/resource/1953_North_Kyushu_Flood
http://dbpedia.org/resource/1993_Kagoshima_Heavy_Rain 
```

要回答您的特定问题，您必须深入挖掘数据以找到所需的属性和资源，但您将遵循相同的一般过程。

# gwt - GWT 使用来自 uibinder 的数组参数调用 UiConstructor

> ID：12081059
> 
> 赞同：1
> 
> 时间：2012-08-22T20:39:21.240
> 
> 标签：gwt, uibinder

我有以下 UiConstructor，它采用一个数组参数，一个 ImageResource 数组

```
@UiField ToggleButton leftToggleButton;

public @UiConstructor ToggleButtonGroup(ImageResource[] faceImages) {
    initWidget(uiBinder.createAndBindUi(this));

    leftToggleButton.getUpFace().setImage(new Image(faceImages[0]));
    leftToggleButton.getDownFace().setImage(new Image(faceImages[1]));
} 
```

我不知道调用此类构造函数的 ui.xml 表示法，因为它是一个数组

如果我将类型减少到 only `ImageResource`，我可以在我的 ui.xml 文件中成功使用以下内容

```
<ui:image field="SelectInverseImage" src="bundle/SelectInv.png" />
...
<mywidget:ToggleButtonGroup faceImages="{SelectInverseImage}"/> 
```

但是，当我尝试

```
<ui:image field="SelectImage" src="bundle/Select.png" />
<ui:image field="SelectInverseImage" src="bundle/SelectInv.png" />
<mywidget:ToggleButtonGroup faceImages="{SelectInverseImage}{SelectImage}"/> 
```

当我使用数组类型时`ImageResource[]`，我最终得到以下错误

```
[ERROR] [roza] Cannot parse value: "{SelectInverseImage}{SelectImage}" as type ImageResource[] 
```

有小费吗？

**PS：我对设置按钮的upFace和downFace部分不感兴趣，这里只是为了演示..主要是定义ui.xml符号来设置构造函数的数组类型属性**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T07:18:53.327

ui:with 是你的朋友。

有方法

```
ImageResource[] imgRsrcs() {
  return array here ...
} 
```

使用 ui:with 将 imgRsrcs 方法绑定到模板。

然后使用 imgRsrcs 作为参数，假设在类中找到了 imgRsrcs()`zzz.Main`

```
<ui:with field='main' type='zzz.Main'/>

<mywidget:ToggleButtonGroup faceImages="{main.imgRsrcs}"/> 
```

[在https://developers.google.com/web-toolkit/doc/latest/DevGuideUiBinder](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiBinder)阅读有关 ui:with 的信息。

# git - 从 Windows 上的现有文件创建新的 Git 存储库

> ID：12081060
> 
> 赞同：5
> 
> 时间：2012-08-22T20:39:27.293
> 
> 标签：git

我正在尝试仅在本地 Windows 机器上使用 Git。我有一个想要迁移到 Git 的现有项目。我不太确定应该如何构建工作流程。我是否应该将现有项目文件夹作为我项目的主要存储库，然后从中创建其他分支？或者我应该为所有 Git 存储库创建一个中央位置，将我现有的项目文件复制到那里作为主存储库，然后将我的项目从中央存储库签出到一个新文件夹中？

一个类似措辞的问题是，是否应该有一个中央 Git 文件夹来存放您的所有存储库，或者是否应该在每个项目中散布主要存储库（主干？）？

我想这个问题只有在本地运行和使用 Git 时才有意义。当将它用于真正的远程仓库时，它似乎更有意义。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-22T20:51:49.450

您可以直接在主项目的文件夹中创建 Git 存储库。
它们将默认添加到主分支中。
( `cd c:\path\to\yout\project && git init . && git add . && git commit -m "first commit"`)

不需要所有 git 存储库都应该存在的“中央”文件夹。
每个 Git 存储库都可以直接在每个项目所在的位置发展。

# javascript - 在页面加载时隐藏按钮

> ID：12081061
> 
> 赞同：0
> 
> 时间：2012-08-22T20:39:33.853
> 
> 标签：javascript, css

在不使用 jQuery 的情况下，当访问者访问页面时，我希望带有文本的按钮`"Process"`不可见（在所有浏览器中）。当他们从下拉列表中选择一个值而不是一个值时，`first entry (blank)`或者`Have a Baby`它使按钮可见。

```
<html>
<head>
<title>Life Event Picker Calendar</title>
<script>
// Function being used to hide/unhide the button
function changeMessage(oElement) {
    if (oElement.value == "100") {
        document.getElementById("btn").style.visibility = "hidden";
    } else if (oElement.value == "0") {
        document.getElementById("btn").style.visibility = "hidden";
    } else {
        document.getElementById("btn").style.visiblity = "visible";
    }
}
</script>
</head>
<body>

...
...
<!-- Based on the selection here - the button below would be made visible --> 
<select id="leave" onchange="changeMessage(this);">
  <option value="0"></option>
  <option value="5">Get Married</option>
  <option value="100">Have a Baby</option>
  <option value="90">Adopt a Child</option>
  <option value="15">Retire</option>
  <option value="15">Military Leave</option>
  <option value="15">Medical Leave</option>
</select>

 <!-- The button in question -->
 <button id="btn" onclick="getInfo()"type="button">Process</button>

...
... 

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T20:42:51.433

尝试将`style="visibility:hidden;"`属性添加到按钮。另外，考虑使用`display:none`and`display:inline-block`而不是`visibility`.

# javascript - LESSPHP 的 LESS javascript 评估错误

> ID：12081065
> 
> 赞同：0
> 
> 时间：2012-08-22T20:39:46.927
> 
> 标签：javascript, less, evaluation, lessphp

当我尝试使用 javascript 评估时出现错误。我正在使用lessphp v0.3.8 来编译我的LESS。

即使使用 lesscss.org 提供的示例 eval：

`@var: `"hello".toUpperCase() + '!' `;`

我收到一条错误消息：

> 更少的编译错误：解析错误：在`@var：`“hello”.toUpperCase（）+'！''失败；`less/style.less 在第 17 行

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T22:09:55.433

我已经回答了您在 GitHub 上提出的问题：[https ://github.com/leafo/lessphp/issues/296](https://github.com/leafo/lessphp/issues/296)

> lessphp 是用 PHP 编写的，我无法访问 JavaScript 解释器。除了让您运行 PHP 代码之外，我无能为力。

# c++ - C++：2 + x + 1 和 3 + x 一样吗？

> ID：12081066
> 
> 赞同：3
> 
> 时间：2012-08-22T20:39:49.517
> 
> 标签：c++, google-chrome

以下来自 Chromium 源代码的代码片段引起了我的注意（请参见[此处](http://code.google.com/searchframe#OAMlx_jo-ck/src/chrome/browser/ui/webui/print_preview/print_preview_ui.cc)的第 155 行）：

```
std::string PrintPreviewUI::GetPrintPreviewUIAddress() const {
  // Store the PrintPreviewUIAddress as a string.
  // "0x" + deadc0de + '\0' = 2 + 2 * sizeof(this) + 1;
  char preview_ui_addr[2 + (2 * sizeof(this)) + 1];
  base::snprintf(preview_ui_addr, sizeof(preview_ui_addr), "%p", this);
  return preview_ui_addr;
} 
```

不`2 + (2 * sizeof(this)) + 1`评价为`3 + 2 * sizeof(this)`？为什么作者选择这样写表达式？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-22T20:42:27.877

是的，它确实以相同的方式评估。

大概作者这样写是为了更清楚地说明他们的数组是如何布局的——即它包含 2 个字节用于一件事，然后是 2 个指针，然后再包含 1 个字节。（实际上我不确定他们为什么在这种情况下选择使用 sizeof() 运算符，因为指针的字符串表示的长度与指针的内存宽度不同）

编译器将在编译时优化数学，因此不会影响性能；这只是为了让其他程序员不必弄清楚 3 的来源。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T20:43:26.217

是的，它是一样的，假设所有类型都是整数而不是浮点，就像在这种情况下一样（对于浮点，结果*通常*是相同的，但是有一些奇怪的边缘情况涉及当事情圆润的，会让你大吃一惊）。

为了清楚起见，作者可能选择这样写：他们在缓冲区中存储了一个特定的字符串，该字符串由两个字节构成，添加更多数据，然后再添加一个字节。以这种方式编写它允许代码阅读器通过一次匹配一个片段来轻松地仔细检查计算的大小是否确实与正在写入的数据量相匹配。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-22T20:43:38.343

可能是为了可读性。写它的人试图表达 2 和 1 是两种不同的信息，而不是只有 3 并且不知道是什么组成的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T20:47:27.110

这对编译过程的翻译阶段生成的汇编代码没有影响。

我能想到作者以这种方式编写代码的唯一真正原因可能是出于可读性的原因——也许这种方式的逻辑比作者在代码中实现此逻辑之前使用“代数简化”更清晰。

关于帖子标题的纯数学注释 - 是的 2 + x + 1 确实等于 x + 3。但是，与计算机编程不同，在数学（至少算术/代数）中说 x 永远是无效的= x + 1 :-)

# python - 将 Python 列表传递给 SQL 查询

> ID：12081071
> 
> 赞同：2
> 
> 时间：2012-08-22T20:39:58.667
> 
> 标签：python, list, tuples

我正在尝试通过访问表中的字段中的项目进行光标搜索。然后我将它们附加到一个名为“distList”的列表中。我想将列表传递到等式中的 SQL 查询构建器“WHERE”子句中：

```
"Field1" in distList 
```

或长期来看，它看起来像这样：

```
"Field1" in ('ds(c1)', 'ds(b1)', 'ds(c2)', 'ds(g1)') 
```

该列表如下所示：

['ds(c1)', 'ds(b1)', 'ds(c2)', 'ds(g1)']

我遇到的问题是，上面的 SQL 等式不喜欢“查看”python 列表。它不识别方括号。它更喜欢圆括号，所以我考虑使用元组。我面临的问题是我不知道如何在光标搜索访问表中的项目后构建一个元组。这是我的代码示例：

```
distList = []
for lyr in arcpy.mapping.ListLayers(mxd, "", df):
    if lyr.name == "Disturbance":
           for row in arcpy.SearchCursor(lyr):
                if "ds" in row.Field1:
                     distList.append(row.Field1)
    lyr.definitionQuery = '"Field1"' + "in " + distList 
```

任何人都可以建议一种将我的列表放入元组的方法，或者只是一种更好的方法将我的项目转换为具有圆括号而不是方括号的格式？

作为一种解决方法，我尝试将列表转换为字符串`str(distList)`，然后替换括号。这很好用，但看起来很麻烦，我相信有更好的方法。

谢谢，迈克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T21:47:01.933

预处理列表：

```
distList = ['ds(c1)', 'ds(b1)', 'ds(c2)', 'ds(g1)']
refinedList = ','.join(a for a in distList) 
```

在 WHERE 子句中在 SQL 中传递细化列表，如下所示：

```
SQL_QUERY = """
select *
from abc
where someCol = ({0})

"""

SQL = SQL_QUERY.format(refinedList) 
```

这里的 {0} 是参数 (refinedList)。查看 pythonDocs 以更好地理解 String format() 函数。执行查询，将运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T20:53:42.893

你试过了吗：

```
str(tuple(distList)) 
```

**编辑：**

以上仅适用于具有多个项目的列表。

与 Arun 的答案类似的东西更笼统，因为它适用于一个或多个项目：

```
distlist = '({})'.format(','.join(elem for elem in distlist)) 
```

但是，根据查询和 RDBMS，事先检查单个项目并在这种情况下仅使用相等运算符可能会更有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T21:39:47.843

我收到了另一个网站的答案，所以我想我会把它传递下去。以下脚本将查询更改为字符串并被我的定义查询接受。为了增加价值，我“设置”了列表以消除重复项：

```
if "ds" in row.Field1:
            distList.append('"{}"'.format(row.Field1))
    lyr.definitionQuery = '"Field1" in ({})'.format(", ".join(set(distList))) 
```

# sql - 使用两个表的 SQL 递归 CTE

> ID：12081073
> 
> 赞同：0
> 
> 时间：2012-08-22T20:40:05.883
> 
> 标签：sql, sql-server-2005, common-table-expression, recursive-query

我有两个表，一个是产品客户映射，另一个是产品共享表。使用 SQL 递归 CTE，给定一个产品，我试图找到所有作为链链接的产品，映射到客户。此外，如果一个产品与另一个产品共享，我也需要将它包含在链中。希望我的例子比描述更有意义

```
Product Customer Table
Product    Customer
  Milk     Illinois
  Milk     Michigan
  Butter   Michigan
  Cream    Wisconsin
  Honey    Wisconsin
  Cheese   Minnesota

Product Sharing Table
Product    SharedProduct
 Butter     Cream
 Cream      Cheese 
```

对于上述数据，假设我的输入产品是牛奶，那么结果集应该包括所有产品 - 牛奶、黄油、奶油、蜂蜜和奶酪。在这里，Butter-Cream 和 Cream-Cheese 通过产品共享表链接。

我当前的 SQL 看起来像这样，但实际上并没有超过一层深度。

```
WITH Product_CTE AS
(
  SELECT DISTINCT [Product] FROM ProductCustomer
  WHERE [Product] IN (SELECT DISTINCT p2.[Product]
  FROM ProductCustomer p1 INNER JOIN ProductCustomer p2
  ON p1.[Customer] = p2.[Customer] WHERE p1.[Product] = 'Milk')
  UNION ALL
  SELECT [SharedProduct] FROM ProductSharing b
  INNER JOIN Product_CTE p ON p.[Product] = b.[Product]
)
Select [Product] from Product_CTE 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T21:34:38.417

CTE 有多个`UNION`s 的问题。尽管有可能，但它对我不起作用。

另一种方法是使用在没有更多行添加到工作表时停止的循环：

```
declare @ProductCustomers as Table ( Product VarChar(16), Customer VarChar(16) )
insert into @ProductCustomers ( Product, Customer ) values
  ( 'Milk', 'Illinois' ),
  ( 'Milk', 'Michigan ' ),
  ( 'Butter', 'Michigan ' ),
  ( 'Cream', 'Wisconsin' ),
  ( 'Honey', 'Wisconsin' ),
  ( 'Cheese', 'Minnesota' )

declare @ProductSharing as Table ( Product VarChar(16), SharedProduct VarChar(16) )
insert into @ProductSharing ( Product, SharedProduct ) values
  ( 'Butter', 'Cream ' ),
  ( 'Cream', 'Cheese ' )

declare @TargetProduct as VarChar(16) = 'Milk'

declare @ProductChain as Table ( Product VarChar(16) )
insert into @ProductChain ( Product ) values ( @TargetProduct )
declare @NewRows as Int = 1

while @NewRows > 0
  begin
  set @NewRows = 0
  -- Add products shared by the same customer.
  insert into @ProductChain
    select PCR.Product
      from @ProductCustomers as PCL inner join
        @ProductCustomers as PCR on
          -- Shared customer.
          PCR.Customer = PCL.Customer and
          -- Different product.
          PCR.Product <> PCL.Product
      where not exists ( select 42 from @ProductChain where Product = PCR.Product )
  set @NewRows = @NewRows + @@RowCount
  -- Add products linked through the product sharing table.
  insert into @ProductChain
    select PS.SharedProduct
      from @ProductSharing as PS inner join
        @ProductChain as PC on PC.Product = PS.Product
      where not exists ( select 42 from @ProductChain where Product = PS.SharedProduct )
  set @NewRows = @NewRows + @@RowCount 
  end

select Product
  from @ProductChain
  order by Product 
```

这里假设该`@ProductSharing`表是单向的。

# c# - 值不能为空，参数名称：source

> ID：12081075
> 
> 赞同：1
> 
> 时间：2012-08-22T20:40:15.507
> 
> 标签：c#, asp.net-mvc-3

我像这样将对象集合发送到我的视图模型

**控制器**

```
SoundsViewModel model = new SoundsViewModel(sound, AllGroups()); 
```

**视图模型**

```
public SoundsViewModel(sound, List<LocationGroup> allGroups)
        {
            ....

            Groups = new List<SoundLocationGroupViewModel>();
            if (allGroups !=null)
            {
                foreach (var item in allGroups)
                {
                    var i = (from r in sound.LocationGroups where r.Id == item.Id select r).FirstOrDefault();
                    Groups.Add(new SoundLocationGroupViewModel() { LocationGroupId = item.Id, LocationGroupName = item.Name, IsInLocationGroup = (i != null) });
                } 
            }
        } 
```

**错误信息是**

```
Value cannot be null.
Parameter name: source

 var i = (from r in sound.LocationGroups where r.Id == item.Id select r).FirstOrDefault(); 
```

显然，此消息在描述情况下似乎是完美且清晰的，但在调试时，我正在填充 allGroups 集合并在视图模型上正确接收。

任何想法，已经很晚了，如果有人建议我提示如何在明天早上的咖啡中解决这个问题，我将不胜感激。

谢谢

更新：现在它通过了。

```
foreach (var item in allGroups)
 {
    if(sound.LocationGroups !=null)
    {
     var i = (from r in sound.LocationGroups where r.Id == item.Id select r).FirstOrDefault();
     Groups.Add(new SoundLocationGroupViewModel() { LocationGroupId = item.Id, LocationGroupName = item.Name, IsInLocationGroup = (i != null) });
    } 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T21:04:18.530

~~`source`可能来自 FirstOrDefault() 扩展方法：~~

 ~~```
public static TSource FirstOrDefault<TSource>(this IEnumerable<TSource> source) 
```~~ 

由于某种原因，您的 Linq 查询返回 null。分两步尝试（并使用`Any`而不是`FirstOrDefault`因为您只是检查非空结果）：

```
bool isInGroup;
var q = (from r in sound.LocationGroups where r.Id == item.Id select r);
isInGroup = (q != null && q.Any());

Groups.Add(new SoundLocationGroupViewModel() 
    {
         LocationGroupId = item.Id, 
         LocationGroupName = item.Name, 
         IsInLocationGroup = isInGroup 
    }); 
```

 ~~因为它的价值`source`仍然来自 Linq 扩展方法，只是不是我想的那种。因为`sound.LocationGroups`异常`null`来自 linq 语句被编译到的扩展方法（我猜`Where`）。~~

# .net - asp.net mvc 4 显示许多图像

> ID：12081082
> 
> 赞同：-1
> 
> 时间：2012-08-22T20:40:31.963
> 
> 标签：.net, asp.net-mvc, image, compression, base64

我正在编写一个应用程序来显示许多图片（50-60）。请告诉我如何最好地实施它。50-60个查询不适合1个。一开始我做了以下方法：1.将图片转换为base64；2.通过Json返回集合（50-60行），但是占用空间很大。我正在尝试压缩 base64 但无效

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T23:13:59.767

[看看asp.net sprite and image optimization framework](http://aspnet.codeplex.com/releases/view/65787)可能值得一看。

[Hanselman 在这里](http://www.hanselman.com/blog/NuGetPackageOfTheWeek1ASPNETSpriteAndImageOptimization.aspx)写了一篇不错的博客。

它也可以作为[AspNetSprites-MvcAndRazorHelper在 nuget 上使用](http://nuget.org/packages/AspNetSprites-MvcAndRazorHelper)

另请注意，并非所有浏览器都支持[base64 图像方法](http://caniuse.com/#feat=datauri)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T04:46:04.537

这是我为最近建立的画廊类型网站所做的。

我收集了一组文件名，并以编程方式在我的图像文件库之上构建了一个 XML 文件。

```
.
.
.

  <image>
    <filename>/path/thumbnail-blah.jpg</filename>
    <targetimage>/path/blah.jpg</targetimage>
    <description>This is my file description</description>
  </image>
.
. 
```

所以现在我有一个 XML 文件，其中有一堆指向不同文件的节点，我可以使用 LINQ 轻松查询并快速访问任何文件。可以简单地提取一个文件名或所有文件名，获取诸如（上）之类的 nod 值并将其分配给网页上的标签。

在您的情况下实施这是否是一个好的决定将取决于您的图像添加或删除到网站的方式和频率。

我将逻辑集成到图像上传控件中，以在图像上传/删除时自动上传 XML 文件。

# events - 如何在拖放源中创建 Dojo onDrop 事件

> ID：12081083
> 
> 赞同：1
> 
> 时间：2012-08-22T20:40:33.390
> 
> 标签：events, dojo, drag-and-drop

我有一个用于拖放的 dojo.dnd.Source，并且希望在用户将项目从源框拖放到目标框时触发事件。任何人都有一个很好的例子来说明如何触发这个事件？

支持文档没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T14:45:04.740

我能够使用声明性语法使其工作，但由于某种原因，当我执行 dojo.connect 时它不会触发。

```
`<div data-dojo-type="dojo.dnd.Source" accept="widget" style="width: 100%; height: 100%;">
   <script type="dojo/connect" event="onDrop" args="source, nodes, copy">
     alert('onDrop');
   </script>
</div>` 
```

是的，文档很庞大，但我认为它没有具体的例子。我确实看到了一些关于堆栈溢出的其他帖子，所以你可能想做更多的探索。

# javascript - 是什么决定了 JavaScript 函数是命名匿名函数还是常规函数？

> ID：12081088
> 
> 赞同：4
> 
> 时间：2012-08-22T20:40:52.823
> 
> 标签：javascript, syntax, semantics

在阅读[“A re-introduction to JavaScript”时](https://developer.mozilla.org/en-US/docs/JavaScript/A_re-introduction_to_JavaScript#Functions)，我注意到函数的一些有趣之处：

> 如上所述提供给匿名函数的名称（或至少应该）仅可用于函数自己的范围。

在 nodejs 提示符下根据教程中的代码输入一些内容，我能够验证 node 是否与作者一致：

```
function add(foo, bar) {
  return foo + bar;
}

add(1, 2); 
```

得到我 3，并且：

```
var five = (function plus(foo, bar) {
             return foo + bar;
           })(2, 3);
plus(2, 3); 
```

给我一个关于 plus 未定义的语法错误。

我有点困惑，因为我用来定义这两个函数的代码是相同的（名称除外）。JavaScript 如何知道第一个是常规函数而第二个是命名匿名函数？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-22T20:43:28.463

第一个是普通的函数声明。声明的名称被引入当前作用域，并隐式引用函数体。在这种形式中，`function`是一个*语句*，因此不返回任何值。

第二个是*函数表达式*，解释器知道这一点，因为它是赋值右侧的一部分，并且因为它周围有大括号。每当单词`function`出现在可以提供其他“值”（或“表达式”）的地方，那么你所拥有的就是一个函数表达式。该表达式的*结果*是对函数体的引用。

如您的链接中所述，函数表达式的名称（如果给定一个）仅*在*函数中可用。

恕我直言，该链接中的命名不正确。在我看来，他们所谓的“命名匿名函数”应该被称为“命名函数表达式”。这种明显的错误可能源于所有匿名函数实际上都是函数表达式，但并非所有函数表达式都是匿名的。

请注意，如果您使用此样式：

```
var foo = function bar() {
    ...
} 
```

then 如上所述`bar`是一个函数表达式，然后将其结果分配给变量`foo`。该名称`bar`未放入当前范围，但在函数本身中可用。

变量的声明`foo`将被提升到作用域的顶部，但在上面的行实际执行之前不会被赋值（即对函数表达式的引用）。

另一个有趣的差异演示是（来自 Chrome 控制台）：

```
> function() { }
SyntaxError: Unexpected token (
> a = function() { }
function () { } 
```

请注意，唯一的区别是后者有一个赋值给`a`. *使用语句*声明匿名函数的尝试是非法的，因为语言语法要求函数语句包含函数的标签。然而，后者隐含地是一个函数表达式，它允许是匿名的。

# javascript - JavaScript Div 滚动条在 chrome 中不起作用

> ID：12081090
> 
> 赞同：0
> 
> 时间：2012-08-22T20:40:58.470
> 
> 标签：javascript, html, google-chrome, scroll

我有一个在 IE 中工作但在 Chrome 中不工作的 JavaScript 滚动器。另外，有没有办法扩展这个脚本来停止或从停止处重新启动？它无限滚动。

JavaScript：

```
// JavaScript Document
var scrollspeed = "1"       // SET SCROLLER SPEED 1 = SLOWEST
var speedjump       = "30"  // ADJUST SCROLL JUMPING = RANGE 20 TO 40
var startdelay  = "2"   // START SCROLLING DELAY IN SECONDS
var nextdelay       = "5"   // SECOND SCROLL DELAY IN SECONDS 0 = QUICKEST
var topspace        = "0"       // TOP SPACING FIRST TIME SCROLLING
var frameheight = "277" // IF YOU RESIZE THE WINDOW EDIT THIS HEIGHT TO MATCH

current = (scrollspeed)

if (isIE) {     

    function HeightData(){
        AreaHeight=dataobj.offsetHeight
        if (AreaHeight==0){
            setTimeout("HeightData()",( startdelay * 1000 ))
        } else {
            ScrollNewsDiv()
        }
    }

    function NewsScrollStart(){
        dataobj=document.all? document.all.ticker :      document.getElementById("ticker")
        dataobj.style.top=topspace
        setTimeout("HeightData()",( startdelay * 1000 ))
    }

    function ScrollNewsDiv(){
        dataobj.style.top = (parseInt(dataobj.style.top) - (scrollspeed)) + "px";
        if (parseInt(dataobj.style.top)<AreaHeight*(-1)) {
            dataobj.style.top=frameheight
        setTimeout("ScrollNewsDiv()",( nextdelay * 1000 ))
        } else {
            setTimeout("ScrollNewsDiv()",speedjump)
        }
    }

    NewsScrollStart();
} 
```

和 HTML：

```
<body onload="ScrollNewsDiv();">
<div id="ticker" style="display: block;">
    content
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T17:29:27.797

也许一个天真的答案，但我会去的。

因为所有功能都以 isIE 为条件，这在 Chrome 中可能是错误的。

# iphone - 设置自定义 UITableViewCell 选择器

> ID：12081092
> 
> 赞同：0
> 
> 时间：2012-08-22T20:41:00.297
> 
> 标签：iphone, ios, uitableview, selector

我创建了一个自定义`UITableViewCell`，它作为子视图添加到我的视图中。在这个视图中也有 aa `UITableView`。自定义`UITableViewCell`不是（包含）到`UITableView`.

我已经`UITableViewCell`像这样在我的 viewDidLoad 方法中设置了自定义。

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    // Create custom tableviewCell at top of screen under navigation controller

    cellContainer = [[UIView alloc] initWithFrame:CGRectMake(0.0, 0.0, 320.0, 44.0)];
    cellContainer.backgroundColor = [UIColor whiteColor];

    UITableViewCell *mycell = [[UITableViewCell alloc] initWithFrame:CGRectMake(0.0, 0.0, 320.0, 50.0)];
    mycell.textLabel.text = @"Select all";
    mycell.backgroundColor = [UIColor whiteColor];

    [cellContainer addSubview:mycell];
    [self.view insertSubview:cellContainer atIndex:1];

    // Set table positioning
    [subModelTableView setFrame:CGRectMake(0, 44, self.view.frame.size.width, self.view.frame.size.height - 44)];
    [self.view insertSubview:subModelTableView atIndex:0];

    // set tableview datasource and delegate
    [subModelTableView setDelegate:self];
    [subModelTableView setDataSource:self];
} 
```

目前我无法选择这个自定义表格视图单元格，我试图像这样在它上面设置一个选择器

```
[mycell addTarget:self action:@selector(myAwesomeMethod:) forControlEvents:UIControlEventTouchUpInside]; 
```

但我收到一个错误

```
No visible @interface for 'UITableViewCell' declares the selector 'addTarget:action:forControlEvents:' 
```

所以我想知道是否有另一种方法（正确的方法）或者我是否在正确的轨道上，我该如何解决这个错误？

`UITableViewCell`编辑：我在这个视图中有这个额外的原因是它`UINavigationBar`作为一个带有@“全选”的静态单元格位于下面，这个单元格位于上面`UITableView`但看起来被包含在`UITableView`但显然不是。

当用户滚动`UITableView`值时，如果用户不知道他想选择哪个单元格，我想启用@“全选”单元格，因此他会收到一个值列表，代表选择`UITableView`. 我希望这是有道理的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T20:58:40.887

> 所以我想知道是否有另一种方法（正确的方法）或者我是否在正确的轨道上，我该如何解决这个错误？

我认为这不是正确的做法。我认为您应该使用 UITableViewDelegate 的 didSelectRowAtIndexPath 方法。如果这不起作用，请详细说明您要做什么，以便提供更好的建议。

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDelegate_Protocol/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDelegate_Protocol/Reference/Reference.html)

# websphere-7 - WebSphere 7 - 同一集群内的两台服务器上的类路径不同

> ID：12081095
> 
> 赞同：0
> 
> 时间：2012-08-22T20:41:10.110
> 
> 标签：websphere-7

我在 WebSphere 7 中遇到了一个特殊问题。我们的 Spring WS 应用程序在 /WEB-INF/lib 下有几个 Jars，它没有明确的类路径。该应用程序部署在 2 个集群服务器中。EAR 仅包含一个 Module 而没有其他 Jar。它在其中一台服务器上工作，但在另一台服务器上失败。我们收到以下错误： 原因：java.lang.NoSuchMethodError: org/w3c/dom/Node.getLocalName()Ljava/lang/String;

正如在 WebSphere Classpath Viewer 中看到的，两个服务器的运行时 Classpath 是不同的。我怀疑这是错误的原因。我还确保两台服务器上的类加载相同并设置为 PARENT_LAST/Application

如何确保两台服务器上的 Classpath 相同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T10:19:58.823

打开 Dmgr 管理控制台并转到此处：

企业应用程序 > APP_NAME > 管理模块 > MODULE_NAME > 查看类加载器（选择服务器）

然后查看两台服务器，看看是否有任何不同

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T18:53:53.443

问题已解决。引起：java.lang.NoSuchMethodError: org/w3c/dom/Node.getLocalName()Ljava/lang/String; 是由于“xml4j.jar”包含一个没有 getLocalName() 方法的 Node 类版本引起的。Node 类和 getLocalName() 方法也是“dom.jar”的一部分。在其中一台无法正常工作的服务器中，可能正在加载错误版本的 Node 类。删除“xml4j.jar”后，它在所有环境中都有效

谢谢！

# javascript - 将文本插入所见即所得编辑器问题

> ID：12081105
> 
> 赞同：1
> 
> 时间：2012-08-22T20:41:39.017
> 
> 标签：javascript, iframe, ajaxcontroltoolkit, wysiwyg, html-editor

我的主要问题与将文本插入 Ajax 控件工具包 Html 编辑器的光标位置有关。这几天我一直在绞尽脑汁，终于到了解决这个问题的最后一站。我将设置一些上下文来更好地描述我的确切问题。

我在 ASP.Net 页面中使用 HtmlEditor，并尝试从 DropDownList 插入值。我正在使用客户端 javascript 来触发 selectedindexchanged 事件。例如，假设我在**设计面板**中有一些文本，如下所示：

```
123456789
1234[CaretPosition]56789
123456789 
```

现在，我想将变量`ddlText`准确地插入到插入符号的位置。我的代码现在的方式是将值插入到正确的**水平位置**，但它似乎忽略了我的选择在第二行的事实。输出将类似于以下内容：

```
1234[ddltext]56789
123456789
123456789 
```

注意我的插入符号位置在第二行，但插入的文本出现在第一行。有没有办法让插入功能将文本插入到正确的**水平和垂直位置**？

这是我处理插入事件的脚本。

```
 <script type="text/javascript">

            $(document).ready(function () {
                $('#<%=ddlFields.ClientID%>').change(function () {
                    var ddltext = $('#<%=ddlFields.ClientID%> option:selected').text();
                    insertText(ddltext)
                });
            });

            function insertText(text) {
                var editorField = document.getElementById('MainContent_Editor1_ctl02_ctl00').contentWindow.document.body.innerHTML;
                var range = document.getElementById('MainContent_Editor1_ctl02_ctl00').contentWindow.getSelection().getRangeAt(0);
                var selStart = range.startOffset;
                var selEnd = range.endOffset;
                var innerText = editorField.substring(0, selStart) + text + editorField.substring(selEnd, editorField.length);
                document.getElementById('MainContent_Editor1_ctl02_ctl00').contentWindow.document.body.innerHTML = innerText;                                           
            }
    </script> 
```

我现在一直在反对这个要求，我真的可以用一双新的眼睛来看待它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T15:02:21.030

在网络上随机网站的大量帮助下，我能够按照我的要求正常工作。没有一个网站提供明确的指导，但根据我从几个网站中学到的知识，我能够拼凑出一个在 Firefox、Chrome 和 IE 中处理此问题的函数。当在 ASP.net 页面中使用时，ajax 控制工具包 HTML 编辑器在 Opera 中本身存在很多错误，但这超出了我的控制能力。这是我处理问题要求的javascript。值得注意的是，在 IE 中，您应该将触发事件的函数更改为在 a`mousedown`而不是 a上触发`click`。希望此功能有助于汇总散布在网络上的有关此主题的所有信息。

```
 <script type="text/javascript">

        $(document).ready(function () {
            var isMSIE = /*@cc_on!@*/false;
            if (isMSIE == false) {
                $('#<%=btnAddField.ClientID%>').click(function (event) {
                    event.preventDefault();
                    insertText($('#<%=ddlFields.ClientID%> option:selected').val())
                    return false;
                });
            }
            if (isMSIE == true) {
                $('#<%=btnAddField.ClientID%>').mousedown(function (event) {
                    event.preventDefault();
                    insertText($('#<%=ddlFields.ClientID%> option:selected').val())
                    return false;
                });
            }
        });

        function insertText(text) {

            var sel, range;
            if (window.getSelection) {
                sel = document.getElementById('YourIFramesClientIDGoesHere').contentWindow.getSelection();
                var isMSIE = /*@cc_on!@*/false;

                if (sel.rangeCount && isMSIE == false) {

                    range = sel.getRangeAt(0);
                    range.deleteContents();
                    textNode = document.createTextNode(text);
                    range.insertNode(textNode);

                    range.setStart(textNode, textNode.length);
                    range.setEnd(textNode, textNode.length);
                    sel.removeAllRanges();
                    sel.addRange(range);
                }
            }
            if (sel.rangeCount && isMSIE == true) {

                range = document.selection.createRange();
                range.pasteHTML(text);

            }

        }
    </script> 
```

# android - 动态添加按钮到线性布局

> ID：12081109
> 
> 赞同：0
> 
> 时间：2012-08-22T20:41:53.533
> 
> 标签：android, android-layout, button

我正在尝试将按钮添加到线性布局：

```
public void populateAlarmLayout() {
        Log.d("Array", alarmButtons.size() + "");
        alarmLayout = (LinearLayout)findViewById(R.id.alarmlayout);
        for(int i = 0; i < alarmButtons.size(); i++) {
            selectedButton = new Button(this);
            selectedButton.setId(i+1);
            selectedButton.setWidth(150);
            selectedButton.setHeight(150);
            selectedButton.setTextSize(10);
            selectedButton.setText(alarmButtons.get(i));
            selectedButton.setOnClickListener(new ClickListener());
            selectedButton.setOnLongClickListener(new LongClickListener());
            alarmLayout.addView(selectedButton);
        }
    } 
```

`nullpointer`我在最后一行不断收到异常`alarmLayout.addView(selectedButton)`The `alarmlayout`is specified in`alarm.xml`但是我的当前`contentView`设置为`main_activity.xml`. 我很确定这是问题所在，但我不知道如何解决它！

我正在使用，`PagerAdapter`所以这也可能是问题所在。这是代码：

```
private class MyPagerAdapter extends PagerAdapter {

        public int getCount() {
            return 3;
        }

        public Object instantiateItem(View collection, int position) {

            LayoutInflater inflater = (LayoutInflater) collection.getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);

            int resId = 0;
            switch (position) {
            case 0:
                resId = R.layout.main;
                break;
            case 1:
                resId = R.layout.music;
                break;
            case 2:
                resId = R.layout.alarm;
                break;
            }

            View view = inflater.inflate(resId, null);
            ((ViewPager) collection).addView(view, 0);
            return view;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T21:24:44.140

我只是遇到了同样的问题。我有一个 GUI，但无法在我的 java 文件中访问它。我还尝试通过初始化一个新的 LinearLayout 来做到这一点。

但是，对于我的 LinearLayout，我使用 ViewGroup 和我之前设置的 id 进行了尝试。

我的代码如下所示：

```
ViewGroup linearLayout = (ViewGroup) findViewById(R.id.llActOver);
Button btTest = new Button(this);
btTest.setText("Test Button");
linearLayout.addView(btTest); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T21:15:02.060

代码很好。据我所知，NullPointerException 可能来自alarmLayout。你能调试你的应用程序并放置一对中断点来确认吗？

基于此，您能否检查资源的名称是否与您的 xml 中的外观完全相同？：

```
alarmLayout = (LinearLayout)findViewById(R.id.alarmlayout); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T20:48:30.257

如果警报布局不在当前视图中，我相信您需要先对其进行充气，然后才能向其添加任何视图。

`alarmLayout = getLayoutInflater().inflate(R.id.alarmlayout);`

# c# - 从从 Access 数据库读取的 OleDbDataReader 获取值

> ID：12081111
> 
> 赞同：3
> 
> 时间：2012-08-22T20:42:00.700
> 
> 标签：c#, ms-access, oledb

下面是我用来连接 Access 数据库并从查询中提取值的代码。问题是..我无法从阅读器对象中获取任何值。我可以看到行数正确，但是我不断收到 InvalidOperationException（无论我使用 GetValue() 还是 GetString()），说“行/列不存在数据”。

```
 System.Data.OleDb.OleDbConnection conn = new
        System.Data.OleDb.OleDbConnection();
        conn.ConnectionString = @"Provider=Microsoft Office 12.0 Access Database Engine OLE DB Provider;" +
                                @"Data source= C:\Users\nearod\Desktop\ImportDB.accdb";
        try
        {
            conn.Open();
            OleDbCommand cmd = new OleDbCommand("SELECT * FROM [SQL Agent Unique ID Test Load]", conn);

            OleDbDataReader reader = cmd.ExecuteReader();

            string companyCode = reader.GetValue(0).ToString();
            string agentId = reader.GetString(1);
            string firstName = reader.GetString(2);
            string lastName = reader.GetString(3);
            string nameSuffix = reader.GetString(4);
            string corporateName = reader.GetString(5);
            string entityType = reader.GetString(6);
            string obfSSN = reader.GetString(7);
            string obfFEIN = reader.GetString(8);
            string dummyIndicator = reader.GetString(9);
            // Insert code to process data.
        }
        catch (Exception ex)
        {
            MessageBox.Show("Failed to connect to data source");
        }
        finally
        {
            conn.Close();
        } 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-22T20:48:22.257

您必须调用如下所示的 Read 方法（使用 using 而不是处理自己的连接

```
string connectionString = @"Provider=Microsoft Office 12.0 Access Database Engine OLE DB Provider;" + @"Data source= C:\Users\nearod\Desktop\ImportDB.accdb";

string queryString=  "SELECT * FROM [SQL Agent Unique ID Test Load]";
 try
     {
    using (OleDbConnection connection = new OleDbConnection(connectionString))
        {
            OleDbCommand command = new OleDbCommand(queryString, connection);
            connection.Open();
            OleDbDataReader reader = command.ExecuteReader();

            while (reader.Read())
            {
                string companyCode = reader.GetValue(0).ToString();
            string agentId = reader.GetString(1);
            string firstName = reader.GetString(2);
            string lastName = reader.GetString(3);
            string nameSuffix = reader.GetString(4);
            string corporateName = reader.GetString(5);
            string entityType = reader.GetString(6);
            string obfSSN = reader.GetString(7);
            string obfFEIN = reader.GetString(8);
            string dummyIndicator = reader.GetString(9);
            // Insert code to process data.
            }
            reader.Close();
        }
   }
catch (Exception ex)
   {
            MessageBox.Show("Failed to connect to data source");
   } 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-22T20:58:51.300

像这样修改你的代码：

```
using (OleDbConnection connection = new OleDbConnection(connectionString))
    {
        OleDbCommand command = new OleDbCommand(queryString, connection);
        connection.Open();

        using (OleDbDataReader reader = command.ExecuteReader())
        {

            while (reader.Read())
            {
                string companyCode = reader.GetValue(0).ToString();
                string agentId = reader.GetString(1);
                string firstName = reader.GetString(2);
                string lastName = reader.GetString(3);
                string nameSuffix = reader.GetString(4);
                string corporateName = reader.GetString(5);
                string entityType = reader.GetString(6);
                string obfSSN = reader.GetString(7);
                string obfFEIN = reader.GetString(8);
                string dummyIndicator = reader.GetString(9);
                // Insert code to process data.
            }
        }
    } 
```

# ios - 向左滑动手势无法正常工作。UITableView

> ID：12081113
> 
> 赞同：0
> 
> 时间：2012-08-22T20:42:11.653
> 
> 标签：ios, uitableview, uigesturerecognizer

我在 UITableView 上使用滑动手势。我试图在向左滑动时对 TableViewCell 执行操作。我注意到正确的单元格被刷了，但由于某种原因，它似乎激活了一个随机的其他单元格。

我怀疑它与指针有关？我对内存指针不是很好，所以任何帮助都会很棒。处理滑动的代码是：

```
- (void)handleSwipeLeft:(UISwipeGestureRecognizer *)gestureRecognizer
{
    // Get location of the swipe
    CGPoint location = [gestureRecognizer locationInView:self.requestTableView];

    // Get the corresponding index path within the table view
    NSIndexPath *indexPath = [self.requestTableView indexPathForRowAtPoint:location];

    // Check if index path is valid
    if(indexPath)
    {
        //Get the cell out of the table view
        requestCell *cell = (requestCell *)[self.requestTableView cellForRowAtIndexPath:indexPath];

        NSLog(@"%@", [cell.IDLabel text]);

        cell.sendingImage.hidden = false;
        cell.activityIndicator.hidden = false;
        cell.requestorLabel.hidden = true;
        cell.dueDateLabel.hidden = true;
        cell.IDLabel.hidden = true;
        cell.priorityImage.hidden = true;     
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T21:17:49.863

调用“cellForRowAtIndexPath”很可能不会为您提供当前在屏幕上可见的单元格实例。UITableView（如果正确使用）基于单元重用 - 这意味着，每次调用“cellForRowAtIndexPath”时，表格视图都会尝试查找未使用的单元格，如果没有，则创建一个新单元格。在您的情况下，这意味着您执行滑动手势的单元格与处理滑动时调用 cellForRowAtIndexPath 方法时获得的单元格不同。相反，会返回一个当前未使用的单元类型实例，然后您对该实例执行更改。解决此问题的一种方法是，不要直接在手势处理程序中更改单元格的属性，`tableView reloadCellAtIndexPath...`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T21:41:56.533

也许你应该继承 UITableViewCell 并将 swipeGesture 直接添加到单元格中。只是一个想法。不过还没想好。

# html - CSS过渡使图像在悬停时上下移动

> ID：12081121
> 
> 赞同：4
> 
> 时间：2012-08-22T20:42:55.550
> 
> 标签：html, css, css-transitions

[http://imgur.com/bXU8I](http://imgur.com/bXU8I)

我有这张图片并且知道我需要使用 css 过渡来使乙烯基在滚动时向下移动？你会怎么做呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T20:48:02.753

应用于`position:relative`“乙烯基”元素，然后在其悬停状态下设置`top:#px`。

例如：

```
#vinyl {
 position: relative;
 /* transition properties here */
}

#vinyl:hover {
 top: 5px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T05:59:07.413

好吧，最简单的方法只涉及一个具有两个背景的元素。盖子是顶部的一个，另一个是乙烯基本身。

在 上`hover`，您只需更改`background-position`第二项的 。

[**演示**](http://dabblet.com/gist/3433187)

HTML 只是：

```
<div class='vinyl'></div> 
```

CSS是：

```
.vinyl {
    width: 109px;
    height: 162px;
    margin: 135px auto;
    background: url(http://img842.imageshack.us/img842/7524/albumm.jpg) 
            no-repeat 0 100%,
        radial-gradient(circle, transparent 3%, navy 4%, navy 5%, #4774a2 5%, 
                #4774a2 8%, navy 8%, navy 9%, #4774a2 10%, #4774A2 20%, 
                black 21%, #1c1c1c, black 69%, transparent 70%) 
            no-repeat 50% 0%;
    background-size: 109px 109px;
    transition: .65s;
}
.vinyl:hover {
    background-position: 0 100%, 50% 95%;
} 
```

* * *

如果您希望仅在将鼠标悬停在乙烯基本身上时发生过渡（封面上没有`transition`）`hover`，那么您需要使用两个元素。

[**演示**](http://dabblet.com/gist/3433239)- 我制作`.vinyl`了 的孩子`.cover`，给它定位并将其设置`z-index`为`-1`（这样它就会隐藏起来）。

HTML 现在是：

```
<div class='cover'>
    <div class='vinyl'></div>
</div> 
```

CSS是：

```
.cover {
    width: 111px;
    height: 111px;
    margin: 135px auto;
    background: url(http://img842.imageshack.us/img842/7524/albumm.jpg);
}
.vinyl {
    position: relative;
    z-index: -1;
    top: -49%; left: 1.5%;
    width: 109px;
    height: 109px;
    border-radius: 50%;
    background: radial-gradient(transparent 3%, navy 4%, navy 5%, #4774a2 5%, 
                #4774a2 8%, navy 8%, navy 9%, #4774a2 10%, #4774A2 20%, 
                black 21%, #1c1c1c, black 69%, transparent 70%) no-repeat 50% 0%;
    background-size: 109px 109px;
    transition: .65s;
}
.vinyl:hover { top: -3%; } 
```

# jquery - 如何通过选择器获取值并内联操作

> ID：12081126
> 
> 赞同：0
> 
> 时间：2012-08-22T20:43:09.763
> 
> 标签：jquery

抱歉，如果主题不是很具有描述性。

比如说我有这个：

```
// lets update the count
<div class='user-count'>3</div>

$('.user-count')val().text(x + 1); 
```

使它变成：

```
<div class='user-count'>4</div> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T20:44:34.070

`.val()`仅用于表单元素...

在这种情况下，您需要使用`.html()`获取内容，`parseInt()`将其转换为数字，然后对其进行修改，然后再次`.html()`将其添加回`div`.

像这样：

```
var $uC = $(".user-count");
val = parseInt($uC.html());
$uC.html(val+1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T20:45:05.550

使用 获取当前值[`text()`](http://api.jquery.com/text/)，将值解析为整数，加一，然后再次设置`text()`：

```
var $userCount = $(".user-count");
$userCount.text(parseInt($userCount.text()) + 1); 
```

**[演示](http://jsfiddle.net/6Mnja/)**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T20:46:17.450

`val`方法用于获取/设置表单控件的值，对于您应该使用的其他元素`text`，请`html`尝试以下操作：

```
$('.user-count').text(function(i, x){
    return parseInt(x, 10) + 1
}) 
```

[小提琴](http://jsfiddle.net/xqjHk/1/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-22T20:46:57.420

```
$('.user-count').text(function(index, val){
  return parseInt(val) + 1;
}); 
```

看到这个[小提琴](http://jsfiddle.net/MqRBd/1/)

# java - 如何使用旧版本的 java 1.6 运行 .jar 1.7 程序？

> ID：12081128
> 
> 赞同：3
> 
> 时间：2012-08-22T20:43:11.777
> 
> 标签：java, eclipse, jar

我有一个在 1.7 版本的 java 中运行良好的 code.jar，但是当使用另一台带有 1.6 版本的 linux 的计算机时，它给了我一个错误，我怎样才能在 1.6 版本中运行它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T23:58:55.553

调用时使用[交叉编译选项](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/javac.html#crosscomp-options)`javac`。

如果仅按照`-target`大多数其他回复中的建议指定选项，则 1.7 SDK 将发出有关`-bootclasspath`. 该选项需要一个`rt.jar`目标 JRE 版本（注意**不是**JDK）。它允许编译器检查引用核心 Java SE 的代码的类、方法和属性是否实际存在于`rt.jar`. 这对于确保兼容性非常重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T20:45:20.303

如果代码未使用较旧的 Java 兼容性标志编译，您将无法在 1.6 上运行它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T23:11:14.527

在 eclipse 中使用 Java 6 构建项目，您需要下载 Java 1.6 JRE，然后让 eclipse 指向 1.6 JRE，请参阅：[http://www.cleartoolkit.com/dokuwiki/doku.php?id=clearwiki:20。 cleardatabuilder:01.setup:01.prerequisites](http://www.cleartoolkit.com/dokuwiki/doku.php?id=clearwiki:20.cleardatabuilder:01.setup:01.prerequisites)

现在右键单击您的项目 -> 属性，单击 Java 编译器，取消选中“启用项目特定设置”，单击“配置工作区设置”，然后选择 1.6 作为您的编译器合规级别。

做“事情”来再次导出你的项目，新的 jar 应该可以工作。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T20:44:45.893

我不认为你可以用较低版本运行更高版本的类。

另一种方法可能是在将[目标版本](http://docs.oracle.com/javase/6/docs/technotes/tools/windows/javac.html)编译为 1.6 时。

例子：

```
javac yourFile.java -target 1.6 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-09T14:42:25.063

我在 Eclipse 中找到了解决方案！

如果您转到您的项目并右键单击以访问属性，则会出现一个名为 Java Compiler 的选项卡。如果启用项目特定属性并取消选中 JDK 合规性下的复选框，则可以将源兼容性和 .class 文件兼容性更改为 1.6。

这应该可以解决您的问题，并且生成的 .jar 文件应该可以在两个设备上运行。我通过将文件从 1.8 移动到 1.7 并在我的具有 OpenJDK 1.7 的 Raspberry Pi 上进行测试来测试这一点，效果很好。我希望这有帮助。

# database - 将本地 WordPress 站点连接到远程数据库

> ID：12081130
> 
> 赞同：5
> 
> 时间：2012-08-22T20:43:24.070
> 
> 标签：database, wordpress, local

我在本地开发 WordPress 主题，但在远程服务器上有一个相同站点的演示。我想做的是在本地开发，但让本地站点连接到远程数据库，而不必经常同步数据库。

是否可以将本地 WordPress 站点连接到远程数据库，而不是通过本地 MAMP 数据库连接？而且，我该怎么做呢？我的远程服务器是一个带有 GreenGeeks 的 VPS。

谢谢您的帮助。

丹尼斯

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-22T20:58:00.960

有可能，是的。

1.  确保您的本地 IP 在数据库服务器上被列入白名单以允许远程连接。
2.  打开 wp-config.php 并更改该`define('DB_HOST')`位，使其显示为`define('DB_HOST', 'your.domain.name');`. 您也可以使用 IP 地址。
3.  测试连接。

# javascript - 模拟虚拟世界：连续步骤还是离散步骤？

> ID：12081140
> 
> 赞同：7
> 
> 时间：2012-08-22T20:43:48.017
> 
> 标签：javascript, performance, node.js, simulation

我正在制作类似于 Polyworld 的东西，这意味着我将模拟虚拟世界，小爬行者在其中四处奔跑、进食和进化。我正在用 Node.js 做这个，我计划使用物理和神经网络，但我不确定更新世界的最佳方式是什么，更具体地说，更新函数是否应该接收增量时间作为参数，还是每次都做同样的事情，与他们最后一次打电话的时间无关？两种方式有什么好处？

**编辑：** 我反对持续更新的一点是我想实现某种间隔，例如，每 20 模拟秒产生一个食物块。如果 dt 与 1 不同（或 1 的一小部分），这将永远无法精确工作。

再说一次，如果我进行离散更新，更新不关心已经过去了多少时间，我将无法“减慢时间”。当我让它在一个强大的服务器上工作并在浏览器中渲染时，我认为更新会经常发生，我需要一种在不影响模拟的情况下减慢时间的方法，这样我就可以看到发生了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T06:48:25.380

每次调用更新函数时，您都可以计算自动画开始以来经过了多少时间。然后你将这个时间传递给更新函数并拥有它，即使帧可能不会在第 20 秒精确更新，你可以根据实际时间进行所有计算。

Example: Car starts its movement at 20th second with speed 3units/s. Assume that update function is triggered at following times: ..., 19.35s, 20.67s, ... When updating at 19.35s you know what it should not yet be moved so nothing happens, but when update function is triggered with time value 20.67s then you know that car has already been moving for 0.67s, therefore you calculate its position (time*speed) 0.67*3 = 2.01 and do all other calculations/draw as if it was already 2.01 units moved. This way you don't need to worry about not precise time measurements, lags, updating function taking more time than usually etc.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T18:15:17.870

If your don't have multiple agents (each with its own thread) that have to collaborate and that you dont have to deal with synchronization/events of process flow problems I recomend you to use continuous simulation. Using fixed time step and change the state of your world in each step. Each world piece change its state using a funcion like:

newState = f(oldState, deltaSteps)

About the speed problem you mention, do not directly map your iterations to time. Define a intermediate time unit (step), and them map this unit time to ms, iterations or what you prefer. So if you what to increase or reduce your simulation speed, just change the factor used to conver from step to time/iterations. If you need to change speed just change your constant.

Check this [page](http://www.extendsim.com/sols_simoverview.html#tables) with some insight about simulation techniques.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T22:39:29.147

我认为您不会超过某个频率（例如 50 Hz）。这会在不必要的精度上浪费 CPU 时间。

如果用户的设备无法提供该更新速率，您可以选择

1.  保持相同的物理频率并减慢挂钟速度
2.  使用较高的 delta T 降低物理频率

如果频率仍然高于 20Hz，我会选择 2。如果它变得更低，您可能应该切换到策略 1 以保持精度。

因此，您可能需要基于 deltaT 的解决方案，以便调整更新频率。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-31T20:54:59.037

Your update functions should do the same thing every time step.

There are drawbacks to both approaches, but passing a delta that represents the time elapsed since the last update becomes difficult to manage when simulating many-to-many interactions within a population. This is because it is time-consuming to predict the points in time (the deltas) at which interactions will happen. If these points in time are missed, the simulation is not accurate.

A drawback to the approach that updates all the elements at every time-step is that it will do unneeded work. However, the cost of this unneeded work will probably be less than the amount of work it would take to accurately predict which points in time need to be evaluated, especially given a complex interacting environment.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-29T08:59:00.457

I think you are going to want your animation to be continuous and based on some elapsed time or clock (that you might be able to speed up or slow down). So some update functions you would want to be based on a delta.

But that doesn't mean that you can't for example use a setInterval to spawn food blocks. It also doesn't mean that everything else needs or should be based on that delta.

For example, you could check after your position update for creatures that are near each other or whatever condition is required for procreation, and then generate the offspring as a discrete step that isn't dependent on the current clock. You would want to record what the clock was when that happened though.

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-30T21:32:24.630

I would do this with constant timestep. It's by far more easy to code. Each update function does one step according to environement. You don't have to update the browser each step. You can compute 10 or 100 steps and then send results to browser.

It will be much more accurate this way. Lot of small simple steps are much easier to code than delta time depending functions (a nightmare).

If you are using variable time steps. When time step is big, you could have scenario where an ant is on point A at t0 and point B at t+delta. You update the ant first, it ends in point B. The you update a food respawn point between A and B that should have respawn at t0+ 1/3 delta. The ant passed by without seening the food. The simulation is wrong.

Other things you'll probably need :

*   To be really accurate you must check collision between segments [previous position - new position] rather than points. Otherwise ants may cross themselve without colliding. Check physics engines.
*   Avoid to send all objects to your browser. Use Octrees or quadtrees to quickly determine wich subset of your data correspond to the area displayed by browsers.

Strange choice to do this in Node.js, I would use a Java or a real oop language.

You'll find lot of useful help on game developer forums.

# python - Python，两个列表的相同“for”

> ID：12081145
> 
> 赞同：2
> 
> 时间：2012-08-22T20:44:08.540
> 
> 标签：python, arrays, list

我有两个清单

```
a: a, b, c, d, e
b: blue, white, brown, yellow, red 
```

我需要 a 成为字典中的蓝键，所以我需要这样做：

```
dictonary[a]="blue" 
```

但是我该如何使用相同的...

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-22T20:45:06.637

用于[`zip()`](http://docs.python.org/library/functions.html#zip)合并`a`和`b`：

```
dict(zip(a, b)) 
```

因为`dict()`构造函数也可以采用 (key, value) 对的序列，所以根本不需要 for 循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T20:48:11.710

如果你真的想同时循环遍历列表，你可以遍历索引：

```
dictionary = {}
for i in range(min(len(a), len(b))):
    dictionary[a[i]] = b[i] 
```

如果您只是想达到描述的结果，最好按照[Martijn Pieters所说](https://stackoverflow.com/a/12081163/159388)并使用`dict(zip(a, b))`

# apache - 为 tomcat 生成 SSL 证书时没有提示输入密钥

> ID：12081146
> 
> 赞同：0
> 
> 时间：2012-08-22T20:44:14.660
> 
> 标签：apache, tomcat, ssl, ssl-certificate, jdk1.6

我正在尝试在 tomcat 上启用 SSL，并使用以下命令生成我的密钥库

/jdk1.6.0_23/bin/keytool -genkey -alias grc -keyalg RSA -keystore keystore -storetype pkcs12

这工作正常并生成了一个密钥库，但是在我在网上找到的所有教程中，他们指出作为最后一步，我应该被提示输入密钥，然后我必须输入与前两个提示输入相同的值商店通行证。我的问题：我从来没有得到这个最后的提示。

我在 Oracle Enterprise Linux 5 上运行它。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T21:08:03.107

使用密钥库类型 pkcs12 时，Keytool 始终使用密钥库密码。它不会提示它，因为它无法更改，如果您尝试提供它，`-keypass`您会收到一条警告，说明它被忽略了。

# asp.net-mvc-3 - MVC3 应用程序以什么身份运行？

> ID：12081152
> 
> 赞同：1
> 
> 时间：2012-08-22T20:44:31.637
> 
> 标签：asp.net-mvc-3

我正在开发一个 MVC3 应用程序。需要允许用户上传 CSV 文件，我需要将其保存在另一台服务器上（而不是运行 MVC3 应用程序的服务器）。将上传流重定向到流写入器似乎很简单，但应用程序必须有权访问我要保存的服务器上的文件夹。

我必须获得什么身份才能完成这项工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T20:57:21.953

> 我必须获得什么身份才能完成这项工作？

具有足够权限写入远程服务器的身份。不要忘记 ASP.NET MVC 是一个 ASP.NET 应用程序。因此，它在 IIS 中的托管方面遵循相同的规则。您可以在 IIS 管理控制台中配置应用程序池运行的标识：

![在此处输入图像描述](../Images/c08a1a67d36e2842f7a89a53bfd957f6.png)

因此，请确保您选择了一个帐户，该帐户已授予对目标文件夹足够的写入权限。

# jquery - Facebook 相似状态更新文本框

> ID：12081154
> 
> 赞同：3
> 
> 时间：2012-08-22T20:44:33.640
> 
> 标签：jquery, asp.net-mvc

我需要创建一个类似于状态更新文本框的 facebook。我的意思是，首先它会像一个纤细的文本框，当用户点击它时，它会变得很大，有点像文本区域。

有人知道怎么做吗？

注意请看附图。![在此处输入图像描述](../Images/33823d74d1addf1bbf7f8119fa1eb2de.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T20:55:20.090

您今天不一定需要 jQuery 或 JavaScript。实际上，您可以通过[`:focus pseudo-class`](http://msdn.microsoft.com/en-us/library/ie/cc304080%28v=vs.85%29.aspx)在选择器中使用纯 CSS 来执行此操作：

```
textarea {
  width: 500px;
  height: 20px;
}

textarea:focus {
  height: 100px;
  /* Uncomment for gradual resizing
  -webkit-transition: all 1s;
  -moz-transition:    all 1s;
  -ms-transition:     all 1s;
  -o-transition:      all 1s;
  transition:         all 1s;
  */
} 
```

Dabblet：[http ://dabblet.com/gist/3429275?result](http://dabblet.com/gist/3429275?result)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-22T20:55:01.873

制作两个 div，一个带有小文本框，另一个带有 textarea 和底部的按钮（使用 CSS）。使用第一个文本框的 blur() 函数隐藏自身并使用 textarea 和按钮显示另一个 div。当按下 Post 按钮时，第二个 div 应该被隐藏，而第一个应该被显示。

# ruby-on-rails - Rails：使用 link_to 创建不带 href 的链接

> ID：12081156
> 
> 赞同：41
> 
> 时间：2012-08-22T20:44:47.437
> 
> 标签：ruby-on-rails

如何使用`link_to`帮助器创建没有`href`属性的链接？我想专门为 javascript 操作创建一个链接，我不希望它重新加载页面或任何东西。

当我省略 url 参数时，单击链接会重新加载页面。同上提供`nil`代替 url。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-08-23T06:41:14.717

您还可以使用一个

```
content_tag("a","link text") 
```

这给了你

```
<a>link text</a> 
```

或者，来自@cesartalves 的评论，带有一个块：

```
content_tag("a") do
  image_tag("src") 
end 
```

参见：[rails api](http://api.rubyonrails.org/classes/ActionView/Helpers/TagHelper.html#method-i-content_tag)

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-08-22T21:49:34.457

我使用这种方法：

```
= link_to('Click me', 'javascript:;', :id => :foo) 
```

它基本上是一个Javascript`no-op`

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-08-22T21:46:12.670

将href设置为：

```
javascript:void(0) 
```

这将使您有一个链接，单击它不会执行任何操作，不会重新加载页面，也不会将页面移动到顶部。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-09-10T18:45:10.320

另一种选择是

```
= link_to("My hyperlink", "#") 
```

这将为您提供一个链接，单击该链接时不会像传入 nil 一样重新加载页面。同时，它会将鼠标设置为鼠标悬停时的指针，而 content_tag 方法无法做到这一点。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-07-26T06:04:37.420

我认为你最好在没有href的情况下使用按钮。

```
<button class='button'>Hello</button> 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-02-11T18:20:55.480

```
<%= link_to '+ Add Make', 'javascript:void(0)', id: 'add-make', onclick: 'addMake()' %> 
```

然后是你的 jQuery：

```
function addMake() {
  $.ajax({
    url: '/dealers',
    type: 'GET',
    dataType: 'script',
    success: function (data) {
      console.log('it was successful')
      $('.add-make').hide();
    },
    error: function (data) {
      console.log('it was error')
    }
  });
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-11-24T01:09:42.267

rails 5 的示例是：

`<%= content_tag("a", image_tag("/logo.png"), class: "navbar-brand") %>`

这将呈现为：

`<a class="navbar-brand"><img src="/logo.png" alt="Logo"></a>`

这类似于[niels](https://stackoverflow.com/users/1440497/niels)的答案，但有一个嵌套`image_tag`和一个类。

来源：[Rails API](http://api.rubyonrails.org/classes/ActionView/Helpers/TagHelper.html#method-i-content_tag)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-01-19T16:31:58.827

`href`在这种情况下，我更喜欢使用没有属性的纯 HTML ：

```
<a data-toggle="modal" data-target="#myModal">Open dialog</a> 
```

恕我直言，它比`content_tag("a","link text")`.

*   缺点`href=#`是浏览器默认点击时会滚动到顶部
*   `javascript:;`看起来很丑

# windows - Windows 7 DLL 函数需要提升的权限

> ID：12081157
> 
> 赞同：1
> 
> 时间：2012-08-22T20:44:55.127
> 
> 标签：windows, dll, driver, privileges, administrator

我在 Kontron 评估板上运行 Windows 7，并且在与他们的驱动程序之一交谈时遇到问题，而没有以管理员身份以提升的权限运行我的应用程序。该驱动程序允许我们读取和写入板上的 GPIO 引脚。在 system32 目录中安装了一个驱动程序和几个 DLL，它们公开了我们用来与驱动程序对话的 API。当我在没有提升权限的情况下运行我的测试应用程序时，初始化板的 API 调用失败。当我以提升的权限运行我的测试应用程序时，API 调用通过。Kontron 驱动程序附带的测试应用程序在运行之前都会提示以提升的权限运行，但我不明白为什么需要提升的权限。

我整个早上都在搜索谷歌试图找到原因，但我找不到任何信息，或者我没有搜索正确的术语。我只是想确定我是否能够绕过以提升的特权运行，或者是否就是这样。那么 Windows 7 对直接访问硬件的驱动程序是否有限制？它与DLL文件的位置有关吗？这与他们安装驱动程序的方式有关吗？这是否与他们构建 DLL 的方式有关？

任何解释我为什么会遇到这种情况的信息都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T13:31:58.733

根据 Harry 的评论，我查看了 Windows 访问控制列表 (ACL)。设备驱动程序负责设置设备对象的访问权限。在我的情况下，驱动程序似乎在运行时设置它们，因为驱动程序的 INF 文件中没有指定任何安全设置。

以下是一些包含更多信息的链接：

[SD、ACL 和 INF：设备对象保护的 IN 和 OUT](http://www.osronline.com/article.cfm?article=508)

[超级用户：什么是 Windows ACL？](https://superuser.com/questions/246280/what-are-windows-acls)

[MSDN：访问控制](http://msdn.microsoft.com/en-us/library/windows/desktop/dd319269(v=vs.85).aspx)

[MSDN：在设备对象上应用安全描述符](http://msdn.microsoft.com/en-us/library/windows/hardware/ff538907(v=vs.85).aspx)

[SysInternals：WinObj 工具](http://technet.microsoft.com/en-us/sysinternals/bb896657)

# android - 为我的 android 应用程序播放声音

> ID：12081158
> 
> 赞同：1
> 
> 时间：2012-08-22T20:44:56.317
> 
> 标签：android, audio

我正在尝试加载在特定事件发生时播放的音效。

出于某种原因，我可以听到声音，但它不能播放整个文件，并且会在中间刹车。

我的声音代码：

```
public class SoundManager {

    private Context context;
    private int nudgeSound = R.raw.nudge;

    public SoundManager(Context context)
    {
        this.context = context;
    }

    public void playNudgeSound()
    {           
        final MediaPlayer mediaPlayer = MediaPlayer.create(context, nudgeSound);

          mediaPlayer.setOnCompletionListener(new OnCompletionListener() {

              @Override
              public void onCompletion(MediaPlayer mp) {
                  mediaPlayer.reset();
              }

          });   
          mediaPlayer.start();

    }
} 
```

我的初始化：

```
 SoundManager soundManager = new SoundManager(this);
    soundManager.playNudgeSound(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T20:51:46.880

好吧，经过几天的疑惑和很多挫折后，我发现我的问题是 MediaPlayer.create() 没有太多时间将文件加载到内存中......它发生是因为 create() 并开始() 几乎同时被调用..

我的建议是在加载应用程序时加载所有声音文件，并在需要时调用 start()。构建某种 SoundManager 类。

感谢大家 ！希望它会帮助别人！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-26T20:29:13.607

你有没有考虑过使用 SoundPool 来代替？！在我的应用程序中，这很好用。

```
AudioManager audioManager = (AudioManager) context.getSystemService(Context.AUDIO_SERVICE);
int maxVolume = audioManager.getStreamMaxVolume(AudioManager.STREAM_NOTIFICATION);

SoundPool soundPool = new SoundPool(10, AudioManager.STREAM_NOTIFICATION, 0);
int sound = soundPool.load(context, R.raw.beep, 1);
soundPool.play(sound, maxVolume, maxVolume, 1, 0, 1f); 
```

# c# - 从代码发送电子邮件时出现“5.7.1 客户端没有权限”错误

> ID：12081159
> 
> 赞同：14
> 
> 时间：2012-08-22T20:44:55.767
> 
> 标签：c#, email, exchange-server, exchange-server-2010

所以我有一个非常基本的程序，它试图发送电子邮件，但我不断收到

> 信箱不可用。服务器响应为：5.7.1 客户端无权作为此发件人发送

这是我的程序

```
static void Main(string[] args)
{
    SmtpClient client = new SmtpClient("Server", 25);
    client.UseDefaultCredentials = false;
    client.DeliveryMethod = SmtpDeliveryMethod.Network;
    client.Credentials = new NetworkCredential("UserName", "Password");
    client.Send(new MailMessage("kevin@hopethisworks.com","Recipient"));
} 
```

我知道凭据有效，如果我使用相同的数据运行 SMTP 测试工具 3.0，一切都会很好。

![在此处输入图像描述](../Images/c1c07e7a65f2038be2abcd7408a9c4c6.png)

这是在交换服务器上为我的 IP 设置的接收连接器的一些屏幕截图

![在此处输入图像描述](../Images/b82e318a438d9fc56049e1c6fa925454.png)

![在此处输入图像描述](../Images/37390a725f588c5e8264c397771b01c8.png)

任何人都知道什么会导致我的代码中出现此错误，但不是在简单的 SMTP 测试工具中？我是否在某处缺少某种身份验证选项？我已经四次检查了所有信息在两个地方是否正确且相同，并且它在工具中有效，但在代码中无效。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-30T13:36:02.263

我发现了问题，我需要为经过身份验证的用户选中“接受任何发件人”框。

![在此处输入图像描述](../Images/4609cdbb0ba2eae9f2f2d926715b9f23.png)

更多信息在这里：[http ://technet.microsoft.com/en-us/library/aa997170(EXCHG.140).aspx](http://technet.microsoft.com/en-us/library/aa997170(EXCHG.140).aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-04-16T14:18:57.810

我知道这个线程已经很老了，但我也遇到了同样的麻烦，并且已经摸不着头脑了很长时间。在我的情况下，邮件服务器不接受“外国”发件人，因此例如，如果您在@sample.com 域中，则可能无法从“user@anotherdomain.com”发送邮件，因为服务器将拒绝这个5.7.1 错误。因此，这里有两件事很重要：1）正确的凭据将用于连接到服务器；2）“发件人”字段的值，因为您的服务器可以拒绝来自属于另一个域的发件人的邮件。换句话说，如果您在 @sample.com 域中，请尝试添加这个以及 new MailMessage {From = "someaddress@sample.com"}。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-06T08:15:01.650

我有同样的问题。我在一个单独的控制台应用程序中测试了 SMTP 设置，它运行良好。经过一番谷歌搜索，我意识到我的问题是我已经指定了两次发件人地址，一次在我的配置中：

```
<smtp deliveryMethod="Network" from="no.reply@somewhere.com"> 
```

而且在我的代码中：

```
mail.From = new MailAddress("different@somewhere.com"); 
```

从代码中删除发件人地址解决了该问题。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-09-12T04:08:14.730

我认为您必须将 UseDefaultCredentials 设置为 true：请参阅 powershell 代码

```
#SMTP server name
$smtpServer = "abcd.com.au"

#Creating a Mail object
$msg = new-object Net.Mail.MailMessage

#Creating SMTP server object
$smtp = new-object Net.Mail.SmtpClient($smtpServer)
$smtp.UseDefaultCredentials = $true 
```

# xml - 将 KML 导入谷歌地图后，点显示在南极洲

> ID：12081160
> 
> 赞同：2
> 
> 时间：2012-08-22T20:45:02.150
> 
> 标签：xml, google-maps, kml

我试图弄清楚我做错了什么。

这是我的 KML 的一个非常简单的版本：

```
<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2">
<Placemark>
<name>SUNSHINE CHEVRON</name>
<description>HIALEAH</description>
<Point>
    <coordinates>25.872066,-80.282852,0</coordinates>
</Point>
</Placemark>
</kml> 
```

当我尝试创建地图并导入此点时，它会显示在南极洲。

有什么想法吗？[我使用http://kmlvalidator.com/](http://kmlvalidator.com/)验证了文件，它返回时没有错误。

你能告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-22T21:35:15.777

请参阅[有关坐标的文档，](https://developers.google.com/kml/documentation/kmlreference#coordinates)坐标为经度、纬度、[高度]

> ```
> A single tuple consisting of floating point values for longitude, latitude, 
> and altitude (in that order). Longitude and latitude values are in degrees, 
> where:
> 
>    longitude ≥ −180 and <= 180
>    latitude ≥ −90 and ≤ 90
>    altitude values (optional) are in meters above sea level 
> ```
> 
> 不要在描述坐标的三个值之间包含空格。

所以他们应该是：

> ```
> <coordinates>-80.282852,25.872066</coordinates> 
> ```

（假设您想要[佛罗里达州](https://maps.google.com/maps?q=http%3a%2F%2Fwww.geocodezip.com%2Fgeoxml3_test%2Fkmltest_SUNSHINE_CHEVRON_a_kml.xml&hl=en&sll=25.871581,-80.282593&sspn=1.235634,1.691895&t=m&z=19)的地标）

# vba - 宏适用于一张纸但不适用于多张

> ID：12081164
> 
> 赞同：0
> 
> 时间：2012-08-22T20:45:09.273
> 
> 标签：vba, excel

我正在制作一个宏，它将搜索列表并在第一个具有“spectraseven”的列中找到所有条目。这会将这些记录复制到每个条目的工作表中。

当工作簿中只有一张工作表时，此宏有效，但当工作簿中有更多工作表时，它会`object or variable with block not set`在末尾带有箭头的行给出错误。( `If FoundCell.Address = FirstAddr Then`)

```
Function mySheetData(SheetName As String) As Boolean

'
'By Joe Was
    'This adds a sheet and names it "Test."
    'SheetName = Sheets(1).Range("a1")
    Sheets.Add.Name = SheetName

    'This selects your new sheet and moves it after sheet "Sheet3," which could be any sheet name.
    Sheets(SheetName).Select
    Sheets(SheetName).Move After:=Sheets(Worksheets.Count)

    'this selects the sheet with the data and its range.
    Sheets(1).Select
    Range("A1:c20").Select

    'This will copy and paste the data to your new sheet "Test."
    Selection.Copy
    Sheets(SheetName).Select
    ActiveSheet.Paste

    'At this point your data will be on the new sheet and selected for the next step.

End Function
'copy from template sheet
'add information from each summary sheet to the tech sheets

'Function MoveToTables(manName As String, startCell As Integer, cellRange As String) As Boolean
Sub testWild()
startCell = 1
Dim FoundCell As Range
Dim LastCell As Range
Dim FirstAddr As String
Dim technum As String

cellRange = "e1:e500"
topCount = startCell
With Range("e1:e500")
    Set LastCell = .Cells(.Cells.Count)
End With
Dim findString As String
findString = "SPECTRASEVEN*"
Set FoundCell = Sheets(1).Range(cellRange).Find(what:=findString, After:=LastCell)

If Not FoundCell Is Nothing Then
    FirstAddr = FoundCell.Address
End If
Do Until FoundCell Is Nothing
    Debug.Print FoundCell.Address
    Count = FoundCell.Row
    technum = Right(FoundCell, 4)
    Set FoundCell = Range(cellRange).FindNext(After:=FoundCell)
    temp = mySheetData(technum)
    ' vv This is the line with the error vv
    If FoundCell.Address = FirstAddr Then
             Exit Do
    End If
Loop
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T17:38:58.777

`Nothing`问题是在测试有机会发生之前，您正在前进到下一个单元格。

此示例用于打印单个数字：

```
Sub test1()

Dim j

j = 1
Do Until j = 10
    Debug.Print j
    j = j + 1
    If j = 10 Then Debug.Print "oops, why no exit?"
    Debug.Print j
Loop

End Sub 
```

如果您运行此代码，您将看到当 j=10 时打印的消息，即使看起来循环应该结束。
将增量固定在循环结束时，以便测试可以工作，给出：

```
Sub test2()

Dim j

j = 1

j = j + 1
Do Until j = 10
    Debug.Print j
    If j = 10 Then Debug.Print "oops, why no exit?"
    Debug.Print j
    j = j + 1
Loop

End Sub 
```

请注意，我现在有 2 个增量，一个在循环开始之前（以防 j 在我开始测试之前恰好是 9）和一个在末尾，因此循环可以在正确的点进行测试

# certificate - .cer 和私钥

> ID：12081165
> 
> 赞同：0
> 
> 时间：2012-08-22T20:45:11.660
> 
> 标签：certificate, private

我将供应商提供给我的 .cer 导入本地计算机（具体来说是受信任的根）。有人告诉我私钥在里面。我使用一些 .Net 代码打开了证书，它报告证书​​没有私钥。我做错了什么吗？我一直认为必须通过 .pfx 文件导入私有证书。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T08:46:21.673

.cer 和 .crt 文件是 DER 编码的 X509 证书，不能包含私钥。

# c# - 为 SendMessage() 编写 WM_TOUCH 消息，将 Kinect 作为多点触控设备

> ID：12081167
> 
> 赞同：2
> 
> 时间：2012-08-22T20:45:24.203
> 
> 标签：c#, multi-touch, sendmessage

[在将其标记为本文](https://stackoverflow.com/questions/11454572/c-sharp-simulating-multitouch-with-kinect)的副本之前，请知道我要求的比该问题的答案提供的更清晰和具体。

具体来说，我想知道如何在 C# 中构建[WM_TOUCH](http://msdn.microsoft.com/en-us/library/windows/desktop/dd317341(v=vs.85).aspx)消息并将其发送出去。

它上面的文档（上面链接）讲述了它的组成以及如何收集它发送的信息，但它没有说明如何实际构建 WM_TOUCH 消息，而且我对 C# 的了解还不够多，无法使用我的东西已经能够找到了。

我知道它应该看起来像这样：

```
[DllImport("user32.dll")]
public static extern int SendMessage(IntPtr hWnd, int wMSg, IntPtr wParam, IntPtr lParam);

/* code to make wParam and lParam */

SendMessage(HWND_BROADCAST, WM_TOUCH, _wParam, _lParam); 
```

wParam 将是一个 int，它告诉在 lParam 中找到了多少多点触控点。根据 msdn 页面，lParam 本身*“包含一个触摸输入句柄，可用于调用[GetTouchInputInfo](http://msdn.microsoft.com/en-us/library/windows/desktop/dd371582(v=vs.85).aspx)以检索有关与此消息关联的触摸点的详细信息” 。*GetTouchInputInfo 函数返回 TOUCINPUT[结构](http://msdn.microsoft.com/en-us/library/dd317334(VS.85).aspx)。

我的问题是如何在 C# 中构建 TOUCHINPUT 结构（因为文档是 C++ 中的），以及如何通过[SendMessage()](https://stackoverflow.com/questions/5083954/send-message-in-c-sharp)函数传递该信息，以便我可以将 kinect 视为任何多点触控设备中的通用多点触控设备。触摸应用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T08:25:00.373

您将需要在 C# 代码中表示 C++ 结构。
一旦有了 C# 结构，就可以将其用作输入或输出参数。
我发现转换这些结构的最佳方法是使用 P/Invoke Interop Assistant，网址为：[http ://clrinterop.codeplex.com/releases/view/14120](http://clrinterop.codeplex.com/releases/view/14120)

从您发布的链接中复制 TOUCINPUT 结构会给出以下输出：

```
[System.Runtime.InteropServices.StructLayoutAttribute(System.Runtime.InteropServices.LayoutKind.Sequential)]
public struct TOUCHINPUT {
    /// LONG->int
    public int x;
    /// LONG->int
    public int y;
    /// HANDLE->void*
    public System.IntPtr hSource;
    /// DWORD->unsigned int
    public uint dwID;
    /// DWORD->unsigned int
    public uint dwFlags;
    /// DWORD->unsigned int
    public uint dwMask;
    /// DWORD->unsigned int
    public uint dwTime;
    /// ULONG_PTR->unsigned int
    public uint dwExtraInfo;
    /// DWORD->unsigned int
    public uint cxContact;
    /// DWORD->unsigned int
    public uint cyContact;
} 
```

# ios5 - MPMoviePlayerViewController 覆盖控件在重用后不响应触摸

> ID：12081168
> 
> 赞同：4
> 
> 时间：2012-08-22T20:45:39.257
> 
> 标签：ios5, mpmovieplayercontroller, mpmovieplayer

这真让我抓狂。

这很简单，我有一个 MPMoviePlayerViewController 并且想要全屏显示电影。在 iOS 5.0+ 上使用 ARC 我想让这个播放器应用程序范围内可重用。

电影第一次播放，就覆盖了整个屏幕，播放效果惊人。覆盖控件正确显示并且对触摸的反应很好。我使用

```
[theMovie.moviePlayer setContentURL:movieURL];
[theMovie.moviePlayer prepareToPlay];

[self presentViewController:theMovie animated:YES completion:^{
    [theMovie.moviePlayer play];
}]; 
```

播放完毕后，我拦截通知并运行它

```
[self dismissViewControllerAnimated:YES completion:^{
            [theMovie.moviePlayer stop];
            [theMovie.moviePlayer setContentURL:nil];
}]; 
```

现在，问题是从第二次开始播放电影时，它会显示控件*，但*播放器不再响应电影区域中的触摸。我可以使用控件、返回、播放/暂停、搜索、完成等……但不能在非控件区域触摸来切换控件的可见性。如果我让它正常播放它会自动隐藏，但在触摸非控制区域后不会再次出现。

我不知道这里发生了什么。如果你能帮助我，我会很高兴。

谢谢，克。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T07:42:48.927

将 MPMoviePlayerViewController 的声明移动到 .h 文件中，在 m 文件中 viewDidLoad 或者 viewWillAppear 只需分配它并初始化 :)

# java - 字符串池：“Te”+“st”比“Test”快？

> ID：12081170
> 
> 赞同：7
> 
> 时间：2012-08-22T20:45:51.507
> 
> 标签：java, string, concatenation, benchmarking, pool

我正在尝试一些关于字符串池的性能基准。然而，结果并不出人意料。

我做了3个静态方法

*   perform0() 方法...每次都创建一个新对象
*   perform1() 方法 ... 字符串文字“Test”
*   perform2() 方法 ... 字符串常量表达式 "Te"+"st"

我的期望是（1\. 最快 -> 3\. 最慢）

1.  “测试”因为字符串池
2.  "Te"+"st" 因为字符串池，但由于 + 运算符而比 1 慢一点
3.  new String(..) 因为没有字符串池。

但基准测试显示“Te”+“st”比“Test”略快。

```
new String(): 141677000 ns 
"Test"      : 1148000 ns 
"Te"+"st"   : 1059000 ns

new String(): 141253000 ns
"Test"      : 1177000 ns
"Te"+"st"   : 1089000 ns

new String(): 142307000 ns
"Test"      : 1878000 ns
"Te"+"st"   : 1082000 ns

new String(): 142127000 ns
"Test"      : 1155000 ns
"Te"+"st"   : 1078000 ns
... 
```

这是代码：

```
import java.util.concurrent.TimeUnit;

public class StringPoolPerformance {

    public static long perform0() {
        long start = System.nanoTime();
        for (int i=0; i<1000000; i++) {
            String str = new String("Test");
        }
        return System.nanoTime()-start;
    }

    public static long perform1() {
        long start = System.nanoTime();
        for (int i=0; i<1000000; i++) {
            String str = "Test";
        }
        return System.nanoTime()-start;
    }

    public static long perform2() {
        long start = System.nanoTime();
        for (int i=0; i<1000000; i++) {
            String str = "Te"+"st";
        }
        return System.nanoTime()-start;
    }

    public static void main(String[] args) {
        long time0=0, time1=0, time2=0;
        for (int i=0; i<100; i++) {
            // result
            time0 += perform0();
            time1 += perform1();
            time2 += perform2();
        }

        System.out.println("new String(): " +  time0 + " ns");
        System.out.println("\"Test\"      : " + time1 + " ns");
        System.out.println("\"Te\"+\"st\"   : " + time2 + " ns");
    }
} 
```

有人可以解释为什么“Te”+“st”的性能比“Test”快吗？JVM在这里做了一些优化吗？谢谢你。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-22T20:50:08.230

`"Te" + "st"`是编译器时的常量表达式，因此在运行时的行为**与**简单`"Test"`的 . 任何性能损失都将在尝试编译它时，而不是在尝试运行它时。

这很容易通过反汇编你编译的基准类来证明`javap -c StringPoolPerformance`：

```
public static long perform1();
  Code:
...
   7:   ldc #3; //int 1000000
   9:   if_icmpge   21
   12:  ldc #5; //String Test
   14:  astore_3
   15:  iinc    2, 1
...

public static long perform2();
  Code:
...
   7:   ldc #3; //int 1000000
   9:   if_icmpge   21
   12:  ldc #5; //String Test
   14:  astore_3
   15:  iinc    2, 1
... 
```

方法的字节码是完全一样的！这是由[Java 语言规范 15.18.1](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.18.1)指定的：

> String 对象是新创建的（第 12.5 节），除非表达式是编译时常量表达式（第 15.28 节）。

您遇到的基准差异可能是由于典型的可变性或因为您的基准并不完美。请参阅这个问题：[如何在 Java 中编写正确的微基准测试？](https://stackoverflow.com/questions/504103/how-do-i-write-a-correct-micro-benchmark-in-java)

您违反的一些值得注意的规则：

1.  您不会丢弃测试内核的“热身”迭代的结果。
2.  您没有启用 GC 日志记录（尤其`perform1()`是在创建一百万个对象的测试之后*始终运行时）。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T20:51:41.947

也许 JIT 编译器启动，第三个是执行本机代码。也许串联被移到了循环之外。也许连接永远不会完成，因为变量永远不会被读取。也许区别在于噪音，您的三个样本巧合地指向相同的方向。

[强大的 Java 基准测试，第 1 部分：问题](http://www.ibm.com/developerworks/java/library/j-benchmark1/index.html)解释了许多 Java 基准测试可能出错的方式。

> 基准测试非常困难。许多因素，无论是明显的还是微妙的，都会影响您的结果。要获得准确的结果，您需要彻底掌握这些问题，可能通过使用解决其中一些问题的基准测试框架。转到[第 2 部分](http://www.ibm.com/developerworks/java/library/j-benchmark2/index.html)，了解这样一个健壮的 Java 基准测试框架。

在您了解 JVM 架构引入的特定缺陷之前，不要期望 Java 代码的微基准能够告诉您任何有用的信息，也不要期望即使是最好的微基准也能预测实际应用程序的性能。

我不知道你的目标是什么，但是学习使用一个好的分析器并在你的实际应用程序中使用它通常会告诉你有问题的行是否真的是低效率的根源，并让你衡量代码更改的效果。花时间学习分析器可能比花时间编写和调试微基准更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T21:00:29.173

首先，很高兴知道：

> 如果您一遍又一遍地连接字符串，比如说在一个循环中，那么您就会知道，因为它们是不可变的，所以会不断生成新的字符串。javac 编译器在内部使用 StringBuffer 来执行此操作 - 例如，您有

```
String itemList = "";
 itemList=itemList + items[i].description; 
```

> 在一个循环中。
> 
> 发生的事情是，在循环中，生成了两个对象。一个是StringBuffer-

```
itemList=new StringBuffer().append(itemList).
      append(items[i].description).toString(); 
```

> 另一个是通过 toString() 分配给 itemList 的字符串。

来源：[http ://thought-bytes.blogspot.com/2007/03/java-string-performance.html](http://thought-bytes.blogspot.com/2007/03/java-string-performance.html)

我认为这不适用于您的情况。在第一次性能测试中，您总是创建一个新对象，因此创建了 1000000 个`String("Test")`对象。在第二个和第三个示例中，只创建了一个被许多引用指向的对象。如前所述：`"Te"+"st"`被视为编译器时间常数，差异太小，不能说它比“测试”快。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T21:02:44.467

Mark Peters 是对的，两个 String 常量将毫不留情地连接起来。

这是因为按照它们的大小连接 String 对象所需的复制时间。

现在这些被编译器编译成 StringBuffer/StringBuilder 对象，你可以通过反编译一个 .class 文件看到它。

您应该看看这些类，但要注意，当将 StringBuilder 或 StringBuffer 呈现为 String 时，将创建一个新的 String 对象。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T21:11:42.183

很抱歉发布答案，但我无法将其放在评论中以显示该基准有多么缺陷。在 Linux 上，我更改了顺序并得到：

顺序很重要。

```
new String()   : 123328907 ns
"Test"         : 1153035 ns
"Te"+"st"      : 5389377 ns
"a"+"b"+"c"+"d": 1256918 ns 
```

# c# - FlowDocument XamlWriter Save - 不保留选项卡

> ID：12081171
> 
> 赞同：3
> 
> 时间：2012-08-22T20:45:52.397
> 
> 标签：c#, wpf, .net-4.0, whitespace, flowdocument

我正在使用`XamlWriter.Save`and`XamlReader.Load`将 FlowDocument 序列化和反序列化为字节数组以存储它：

```
private static byte[] FlowDocumentToByteArray(FlowDocument flowDocument)
{
    using (var stream = new MemoryStream())
    {
        XamlWriter.Save(flowDocument, stream);
        stream.Position = 0;
        return stream.ToArray();
    }
}

private static FlowDocument FlowDocumentFromByteArray(byte[] bytes)
{
    using (var stream = new MemoryStream(bytes))
    {
        return (FlowDocument)XamlReader.Load(stream);
    }
} 
```

但是我在保留空白时遇到了麻烦。以下测试失败：

```
[TestMethod]
public void FlowDocumentTabsNoBackground()
{
    var flowDocument = new FlowDocument();

    var paragraph = new Paragraph();
    paragraph.Inlines.Add(new Run("\t"));
    paragraph.Inlines.Add(new Run("a"));
    flowDocument.Blocks.Add(paragraph);

    byte[] bytes = FlowDocumentToByteArray(flowDocument);

    FlowDocument flowDocumentOut = FlowDocumentFromByteArray(bytes);

    var textRange = new TextRange(flowDocumentOut.ContentStart, 
        flowDocumentOut.ContentEnd);
    Assert.IsTrue(textRange.Text.StartsWith("\t"));
} 
```

但是这个测试通过了：

```
[TestMethod]
public void FlowDocumentTabsWithBackground()
{
    var flowDocument = new FlowDocument();

    var paragraph = new Paragraph();
    paragraph.Inlines.Add(new Run("\t"));
    paragraph.Inlines.Add(new Run("a")
        {
            Background = new SolidColorBrush(Color.FromArgb(255, 255, 255, 255))
        }
    );
    flowDocument.Blocks.Add(paragraph);

    byte[] bytes = FlowDocumentToByteArray(flowDocument);

    FlowDocument flowDocumentOut = FlowDocumentFromByteArray(bytes);

    var textRange = new TextRange(flowDocumentOut.ContentStart, 
        flowDocumentOut.ContentEnd);
    Assert.IsTrue(textRange.Text.StartsWith("\t"));
} 
```

为什么选项卡不能通过序列化/反序列化循环，为什么在段落中的其中一个运行中添加背景颜色有帮助？

# iis - IIS 6 应用程序池管理

> ID：12081176
> 
> 赞同：2
> 
> 时间：2012-08-22T20:46:17.940
> 
> 标签：iis, iis-6, application-pool

创建一个应用程序池，在默认的seb站点中创建一个Web应用程序并将其分配给应用程序池。现在，如果您在 IIS 中展开应用程序池节点，您将看到新的应用程序。通常，如果您想停用 Web 应用程序，您可以从 IIS 中将其删除。发生这种情况时，它会从应用程序池中分离出来。如果您刷新应用程序池，则 Web 应用程序将不再位于与该池关联的应用程序列表中。

如果有人决定通过文件系统删除 Web 应用程序，IIS 将无法更新元数据库，所以现在您无法在默认网站中看到 Web 应用程序，但它仍然出现在应用程序池下。有什么方法可以刷新元数据库以删除“孤立”的旧配置？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T14:43:05.450

我遇到过，我称之为重影！

如果您删除任何属于应用程序的文件夹而不首先将其作为应用程序删除，我已经看到会发生这种情况。

如果您只是重新创建那里的结构，然后在删除它之前将其从应用程序中删除，您将消除它。

更有趣的是：如果您将站点转换为 IIS 7.5，它将在转换期间在那里创建，然后您可以正常删除它。

# c# - 用 List 继承接口 作为财产问题

> ID：12081177
> 
> 赞同：3
> 
> 时间：2012-08-22T20:46:26.063
> 
> 标签：c#, .net, list, interface

我有两个接口，一个包含另一个接口的列表，我想要一个实现第一个接口的类，但有一个实现第二个接口的另一个类的列表，而不仅仅是一个接口列表。例子：

```
namespace TestInheritance
{
    public interface IBookShelf
    {
        long Stuff { get; set; }
        List<IBook> Books { get; set; }
    }
    public interface IBook
    {
        string Name { get; set; }
    }
    public class BookShelf : IBookShelf
    {
        public long Stuff { get; set; }
        public List<Book> Books { get; set; }
    }
    public class Book : IBook
    {
        public string Name { get; set; }
    }
} 
```

显然它不喜欢这样。有没有正确的方法来做我想做的事情，或者我只需要在我想使用它时制作`BookShelf`have a`List<IBook>`并将每个`IBook`转换为 a ？`Book`在这里寻找可以帮助我的模式。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T20:51:17.263

您可以`IBookShelf`在将泛型参数约束为的地方进行泛型`IBook`

然后你可以拥有：

```
public interface IBookShelf<T> where T : IBook
{
    long Stuff { get; set; }
    List<T> Books { get; set; }
}

public class BookShelf : IBookShelf<Book>
{
    public long Stuff { get; set; }
    public List<Book> Books { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T20:51:21.180

目前尚不清楚您*要做*什么-我*怀疑*您甚至不清楚。为什么特别想`BookShelf.Books`成为一名`List<Book>`？为什么它*限制*自己只包含`Book`值而不是`IBook`值？我建议您考虑在这种情况下您希望发生什么：

```
public class EvilBook : IBook
{
    public string Name { get; set; }
}

IBookShelf bookShelf = new BookShelf() { Books = new List<Book>() };
bookShelf.Books.Add(new EvilBook()); 
```

该代码中的任何内容都没有可疑¹，您给出的接口 - 但它最终将 a 添加`EvilBook`到 a`List<Book>`中，这肯定是不正确的。我经常发现，如果编译器阻止我做某事，那么想想如果它让我继续我的坏主意我可能会遇到什么问题是有用的。

您可能要*考虑*使`IBookShelf`通用：

```
public interface IBookShelf<T> where T : IBook
{
    long Stuff { get; set; }
    List<T> Books { get; set; }
} 
```

然后：

```
public class BookShelf : IBookShelf<Book> 
```

...但这实际上取决于您要实现的目标。

您可能还想问自己，您是否真的需要该接口……`IBook`以及您是否真的*想要*.`Books`

* * *

¹无论如何，编译器会识别：)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T20:52:24.787

像这样的东西怎么样：

```
namespace TestInheritance
{
    public interface IBookShelf <TBook> where TBook : IBook
    {
        long Stuff { get; set; }
        List<TBook> Books { get; set; }
    }
    public interface IBook
    {
        string Name { get; set; }
    }
    public class BookShelf : IBookShelf<Book>
    {
        public long Stuff { get; set; }
        public List<Book> Books { get; set; }
    }
    public class Book : IBook
    {
        public string Name { get; set; }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-15T13:47:57.007

1.  一般来说，铸造是可疑的，最好避免。这是一个很好的信号，表明有些事情是不对的。

2.  要修复您需要更改的代码

    ```
    public List<Book> Books { get; set; } 
    ```

    至

    ```
    public List<IBook> Books { get; set; } 
    ```

3.  你可以而且应该更概括一些事情。什么样的书架不能放其他物品？我还没有看到一个。考虑一下：

 `````
using System;
using System.Collections.Generic;
using System.Linq;

public class Program
{
public interface IShelf
{
    long Stuff { get; }
    List<IShelfItem> Items { get; }
}
public interface IShelfItem
{
    string Name { get; }
    string Thought {get; set;}//What do I think about it?
}
public class Shelf : IShelf
{
    public Shelf(long stuff, string color) 
    {
        Stuff = stuff;
        Items = new List<IShelfItem>();
        Color = color;
    }

    public long Stuff { get; private set; }
    public List<IShelfItem> Items { get; private set; }//Note, you can still add to the list.
    public string Color { get; set; }

}
public class Book : IShelfItem
{
    public Book( string name, string thought ) {
        Name = name;
        Thought = thought;
    }
    public string Name { get; private set; }//Books that are on shelves don't really change their name;
    public string Thought { get; set; }

    public string BookSpecificProperty { get; set; }
}

public static void Main()
{
    Shelf myShelf = new Shelf(42, "Dull boring grey");

    myShelf.Color = "Red";

    IShelf myIShelf = myShelf;
    //myIShelf.Color = "Red"; - 'IShelf' does not contain a definition for 'Color'

    myShelf.Items.Add( new Book("Title 1", "Such a great book" ) );

    //Eos pass

    var book = myShelf.Items.SingleOrDefault( i => i.Name == "Title 1" );
    if( book != null ) {
        book.Thought = "I used to think it was such a great book. It's just OK";
        //book.BookSpecificProperty = "X"; - 'IShelfItem' does not contain a definition for 'BookSpecificProperty'
    }
} 
`````

# python - 浪费时间尝试构建 python web 应用程序

> ID：12081187
> 
> 赞同：1
> 
> 时间：2012-08-22T20:47:28.090
> 
> 标签：python, sql, configuration, flask

我学习 Python 来构建一个 CMS/日历/计划应用程序，并且我知道大量的 SQL 和 HTML。在我学习的过程中，我遇到了新的工具/框架（bottle、SQLAlchemy、WTForms），我必须重新设置。

我在浪费时间继续下载、测试、学习一些这个和那个，然后废弃数据库/项目并重新开始。

我的网站有一些要求：

*   一个 SQL 数据库（PostgreSQL 或 MSSQL 或 MYSQL），如果我可以在某些表 (PII) 上加密数据。我无所谓是哪个。
*   SSL 支持
*   组、用户等的登录支持。
*   能够支持约 500 个并发用户。
*   使用 lighttpd 甚至 Apache 通过专用服务器部署
*   能够通过昂贵/质量提供商托管生产站点

我应该使用哪些模块/包来完成此任务？我是否在使用 Python、Flask、SQLAlchemy、WTForms（需要？）的正确轨道上？

也许换一种方式问——如果我坐在你的办公桌前，你会怎么做才能完成这个项目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T20:55:15.247

试试[Django](https://www.djangoproject.com/)。它是可用于 Python 的最成熟且功能最丰富的 Web 框架。如果您需要一些 Django 不提供开箱即用的功能，它也有很多插件。如果您对 Django 不满意，您可能应该切换到另一种语言。但是Django很棒，试一试。

# jboss - Spring 的 SessionFixationProtectionStrategy 杀死了 JBoss / Weld 下的 CDI Conversation

> ID：12081190
> 
> 赞同：0
> 
> 时间：2012-08-22T20:47:40.200
> 
> 标签：jboss, spring-security, cdi, jboss-weld, session-fixation

我有一个标记为 @ConversationScoped 的对象，并在向导的许多步骤之间使用。

这完美地工作，除了当我的用户登录时，Spring 的 SessionFixationProtectionStrategy 调用 session.invalidate() 方法以重新创建具有新 ID 的新会话。然后，它将无效会话的属性重新附加到新会话。

问题是有一个 WeldListener 实例绑定到 sessionDestroyed 事件，这将杀死绑定到 HttpSession 对象的 @ConversationScoped 实例。

我已禁用 SessionFixationProtectionStrategy 并且现在使用 NullAuthenticatedSessionStrategy 什么都不做，但我仍然想保留 Session Fixation 策略以保护我的网站免受此影响。

关于如何解决这个问题的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T17:38:56.047

您可以通过在用户进行身份验证时设置自定义随机cookie并在每次收到用户的请求时检查它来达到相同的效果。

编写一个自定义`AuthenticationSuccessStrategy`来设置 cookie，例如：

```
public class MySessionAS extends SavedRequestAwareAuthenticationSuccessHandler {

    /**
     * Called after the user has successfully logged in.
     */
    public void onAuthenticationSuccess(HttpServletRequest request, HttpServletResponse response,
            Authentication authentication) {
        // Generate random value
        String myAuthToken = ...
        request.getSession().setAttribute("myAuthToken", myAuthToken);
        Cookie myAuthCookie = new Cookie("myAppCookie", myAuthToken);
        myAuthCookie.setSecure(true); // You're using HTTPS, right?
        myAuthCookie.setMaxAge(-1); // It's a session cookie.
        response.addCookie(cookie);
        super.onAuthenticationSuccess(request, response, authentication);
    }
} 
```

并将其插入您的`form-login`配置中。

然后你只需要检查值。这样做的好地方是在您的 web 中的自定义投票者中`AccessDecisionManager`，或者如果这听起来太复杂，您可以使用自定义过滤器来检查用户是否经过身份验证（非空`SecurityContext`），如果是，请确保值提交的 cookie 与会话中存储的值匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-08T13:39:34.887

这是我正在使用的策略：

1.  从当前会话中分离焊接上下文（会话和对话）。
2.  复制所有会话属性后，在使其无效之前将它们从会话中删除（由于某种原因不这样做不起作用，可能是焊接中某处的会话破坏侦听器）
3.  创建新会话，从上一个会话中复制属性
4.  重新附加焊接上下文。

您需要复制 SessionFixationProtectionStrategy 类才能实现这一点，因为没有合适的钩子已经到位。这是 onAuthenticate。

```
public void onAuthentication(Authentication authentication, HttpServletRequest request, HttpServletResponse response) {
        boolean hadSessionAlready = request.getSession(false) != null;

        if (!hadSessionAlready && !alwaysCreateSession) {
            // Session fixation isn't a problem if there's no session

            return;
        }

        // Create new session if necessary
        HttpSession session = request.getSession();

        if (hadSessionAlready && request.isRequestedSessionIdValid()) {
            // We need to migrate to a new session
            String originalSessionId = session.getId();

            if (logger.isDebugEnabled()) {
                logger.debug("Invalidating session with Id '" + originalSessionId +"' " + (migrateSessionAttributes ?
                        "and" : "without") +  " migrating attributes.");
            }

            String id = weldAwareSessionFixationProtectionStrategyHelper.beforeInvalidateSession( request );

            Map<String, Object> attributesToMigrate = extractAttributes(session);

            for( String key : attributesToMigrate.keySet() ) {
                session.removeAttribute( key );
            }

            session.invalidate();
            session = request.getSession(true); // we now have a new session

            if (logger.isDebugEnabled()) {
                logger.debug("Started new session: " + session.getId());
            }

            if (originalSessionId.equals(session.getId())) {
                logger.warn("Your servlet container did not change the session ID when a new session was     created. You will" +
                        " not be adequately protected against session-fixation attacks");
            }

            transferAttributes(attributesToMigrate, session);

            weldAwareSessionFixationProtectionStrategyHelper.afterCreateNewSession( request, id );

            onSessionChange(originalSessionId, session, authentication);
        }
    } 
```

...这是 WeldAwareSessionFixationProtectionStrategyHelper

```
@ApplicationScoped
public class WeldAwareSessionFixationProtectionStrategyHelper {

    @Inject
    private HttpSessionContext httpSessionContext;

    @Inject
    private HttpConversationContext httpConversationContext;

    public String beforeInvalidateSession( HttpServletRequest httpServletRequest ) {

        String currentId = null;

        if( !httpConversationContext.getCurrentConversation().isTransient() ) {
            currentId = httpConversationContext.getCurrentConversation().getId();
        }

        httpConversationContext.deactivate();
        httpConversationContext.dissociate( httpServletRequest );

        httpSessionContext.deactivate();
        httpSessionContext.dissociate( httpServletRequest );

        return currentId;
    }

    public void afterCreateNewSession( HttpServletRequest httpServletRequest, String cid ) {

        httpSessionContext.associate( httpServletRequest );
        httpSessionContext.activate();

        httpConversationContext.associate( httpServletRequest );

        if( cid == null ) {
            httpConversationContext.activate();
        } else {
            httpConversationContext.activate( cid );            
        }
    }
} 
```

# python - 为什么 CherryPy 静态文件下载这么慢？

> ID：12081193
> 
> 赞同：4
> 
> 时间：2012-08-22T20:47:51.163
> 
> 标签：python, wsgi, cherrypy

如果我在 CherryPy 中挂载一个静态目录，如下所示：

```
wwwroot_config = { '/': 
                      { 'tools.staticdir.on': True, 
                        'tools.staticdir.dir': '/path/to/dir' } }

cherrypy.tree.mount(root, '/', config = wwwroot_config) 
```

从该目录下载文件非常缓慢。

但是，如果我创建自己的 WSGI 应用程序...

```
self.wsgi_server = wsgiserver.CherryPyWSGIServer((self.bindaddress, self.port), self.download_file, numthreads = 1) 
```

使用 self.download_file 包含，基本上：

```
return serve_file(theFile, "application/x-download", "attachment", os.path.basename(theFile), debug = True) 
```

我的速度快了 4-5 倍。

但是，这种方式不够灵活，因为 serve_file 添加到请求的标头（例如范围标头和内容长度）不会在响应中返回 - 我必须自己做。

我能做些什么来让第一种方式更快吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-11-04T18:22:42.080

我以前也遇到过同样的问题，尽管我记得只有在 Windows 机器上。你在 Windows 上运行 CherryPy 吗？CherryPy 3.5.0 中似乎有一个错误，它为静态文件返回错误的 Content-Length 标头，这导致浏览器闲置等待更多不存在的字节。

我没有详细研究过这个问题，但您可能想检查服务器发送的 Content-Length 标头，看看它是否与静态文件的实际大小匹配。临时解决方法可能是手动设置（或删除）“before_handler”挂钩中的 Content-Length 标头。

# ruby-on-rails-3 - Rails 3 has_one / belongs_to 与子目录中模型的关系

> ID：12081194
> 
> 赞同：0
> 
> 时间：2012-08-22T20:47:57.717
> 
> 标签：ruby-on-rails-3, migration, belongs-to, subdirectory, has-one

我正在尝试创建一个简单的关系，但在 Rails 3.2 下的子目录中使用模型

我有一个 User 类，每个用户都有一个电子邮件订阅。因为会有其他类型的订阅（也填充添加到用户）我把它们放在一个子目录中。（我的用户恰好来自 Devise，但我怀疑这无关紧要。）

这是代码

在`model/user.rb`

```
class User < ActiveRecord::Base
  has_one :email_sub

  before_create :build_email_subscription

  private

  def build_email_subscription
    Subscription::EmailSub.create(:is_subscribed => true, :user_id => self.id)
    true
  end
end 
```

请注意，我还创建了一种添加默认订阅的方法。

在`model/subscriptions/email_sub.rb`

```
class Subscriptions::EmailSub < ActiveRecord::Base
  belongs_to :user
end 
```

除了创建两个类的迁移之外，我还为关系创建了以下迁移。

```
class AddSubscriptionToUser < ActiveRecord::Migration
  def change_table :subscriptions_email_sub do |t|
    t.referneces :users
  end
end 
```

但是，这似乎不起作用。它似乎没有生成该`user_id`列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T02:27:37.260

看起来我让它工作了。我正在分享和注释我的结果供其他人学习。

在`model/user.rb`

```
class User < ActiveRecord::Base
  has_one :email_sub, :class_name => "Subscriptions::EmailSub"

  before_create :build_email_subscription

  private

  def build_email_subscription
    build_email_sub(:announcements => true, :notifications => true, :master => true)
    true
  end
end 
```

我明确包括`class_name`在子目录中查找模型。我使用`build_<attribute>`并传入了三个订阅的参数（后来从一个表单进来，但现在只是设置默认值）。

在`model/subscriptions/email_sub.rb`

```
class Subscriptions::EmailSub < ActiveRecord::Base
  attr_accessible :announcements, :daily_deals, :master
  belongs_to :user
end 
```

（我在上面省略了属性，因为它们与问题并不真正相关，但我会明确地将它们包括在此处以供初学者使用。）

我修改了 EmailSubs 模型的原始迁移，而不是新的迁移。

```
class CreateSubscriptionsEmailSubs < ActiveRecord::Migration
  def change
    create_table :subscriptions_email_subs do |t|
      t.boolean :master
      t.boolean :daily_deals
      t.boolean :announcements

      t.references :user    # I added this line to the generated migration
      t.timestamps
    end
  end
end 
```

我添加了这`t.references`条线。请注意，我之前使用的是复数而不是单数（在迁移中，表名需要是复数，字段单数）。t.references 将知道查找 _id 字段给定。

希望这可以帮助其他一些人节省一些时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T00:02:45.163

我会重做你设置模型的方式。我认为尝试编辑 rails 自动创建的关系表并不是一个好习惯。

对于您的模型 user.rb

```
class User < ActiveRecord::Base
    has_many :subscriptions
    // Put whatever before_create logic here if that's still working correctly
end 
```

将 subscription.rb 更改为：

```
class Subscription < ActiveRecord::Base
    belongs_to :user
    belongs_to :subscription_type
end 
```

然后制作另一个模型，subscription_type.rb

```
class SubscriptionType < ActiveRecord::Base
    has_many :subscriptions
end 
```

该模型将有 3 列：id、subscription_id 和 subscription_type_id，（可能还有一个列 subscription_type_name）。然后进行约定，例如 subscription_type_id 1 是电子邮件订阅，2 是杂志订阅或其他等等。或者，您可以在订阅模型中添加一个 subscription_type 列。

为了更轻松地查看模型中的列，请使用[annotate gem ，这是有关](https://github.com/ctran/annotate_models)[如何使用](http://ruby.railstutorial.org/chapters/modeling-users?version=3.1#sec%3amodel_annotation)的快速教程

# magento - Magento：由于添加了斜杠，Googlebot 试图访问无效的 URL

> ID：12081201
> 
> 赞同：1
> 
> 时间：2012-08-22T20:48:14.200
> 
> 标签：magento, googlebot

由于某种原因，当 googlebot 爬取我的 Magento 存储时，由于错误地在包含参数的 URL 中添加了斜杠，它会定期生成调试报告，例如：

```
http://www.sinfulthrills.co.uk/lingerie-clothing-1/sexy-lingerie?filter_brand=14054&filter_size=13258/. 
```

这是最新的商店调试报告的前几行：

```
URL: http://www.sinfulthrills.co.uk/lingerie-clothing-1/sexy-lingerie?filter_brand=14054&filter_size=13258/
IP Address: 66.249.72.177
Time: 2012-08-22 12:39:58 GMT
Error:
SQLSTATE[42000]: Syntax error or access violation: 1064 You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ')  INNER JOIN `catalog_product_index_eav` AS `filter_brand_idx` ON filter_brand_' at line 4 
```

现在我确定我的网站上没有一个包含斜杠的链接，那么谷歌怎么可能错误地添加了一个？我担心这些无效的 URL 会对我的索引定位产生负面影响 :(

我应该补充一点，发生这种情况时使用的过滤参数或参数值并不总是相同，也不是相同的产品类别。我没有发现任何模式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T14:47:47.937

也许您已经在站点地图中提交了此 URL？

此外，如果这是一个 404 链接，您可能可以使用 Google 网站管理员工具回溯它（在抓取错误列表中，它将提供链接页面）

总帐

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T08:49:39.157

谷歌似乎终于安定下来，现在注意到我设置的过滤器 - 我已经好几个星期没有出错了。如果他真的回答了这个问题，我会给实用程序回答这个问题的分数哈哈......

# jsf-2 - 根据用户权限禁用 JSF 中的特定字段

> ID：12081203
> 
> 赞同：0
> 
> 时间：2012-08-22T20:48:26.260
> 
> 标签：jsf-2

我想知道我们可以禁用一些 UI 组件的方式，例如基于用户权限的丰富：选择、输入文本、丰富日历。

我的目标是针对普通用户，应该禁用 hte 选项，而对于管理员，应该启用它。

为了隐藏整个组件，我可以使用 #{loginBean.userType=='Admin'} 之类的条件进行渲染

谢谢纳加拉吉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T20:54:24.810

完全相同，但您需要将该值设置为拟合属性：`disabled`、`readonly`等。

# java - Java数据存储方式

> ID：12081205
> 
> 赞同：2
> 
> 时间：2012-08-22T20:48:35.873
> 
> 标签：java

我目前正在编写一个客户端-服务器应用程序，以允许客户端从服务器请求数据。我正在考虑完全用本机 java 编写它，并且我正在使用文本和属性文件来完成我的大部分存储。

但是，我在试图找到一种存储以下内容的好方法时遇到了困难：

```
ID    Language from    Language to    Cost/100w    Comment
7101    English    Mandarin    $5.00    Outsource 
```

现在你可能会想，他为什么不直接使用数组列表，或者直接将数据存储在另一个文本文件中呢？我已经考虑了这些选项，并且我看到了每个选项的缺点。

据我所知，使用数组列表我无法存储整数，我想使用以下命令查询数据：

```
What is the cost of <ID> translation of <integer> words? 
```

如您所见，我需要将成本存储为整数，以便我可以将其用于求和。

对于文本文件，我只知道如何将数据存储在一行中，例如：

```
7101 English Mandarin $5.00 Outsource
7102 Greek Russian $12.00 -
etc. etc. etc. etc. etc 
```

所以我不知道如何查询数据。

再一次，我不想最终用 MySQL 存储它并且不得不使用 JDBC 驱动程序，我希望整个应用程序在本机 java 中运行。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T21:01:22.027

您还可以使用 XML 文件来正确构建数据。在查询数据时，您可以使用 XPath。

XML 将使您有机会允许多种数据格式，包括数字和所有格式。

例如：

```
<?xml version="1.0" encoding="UTF-8"?>
<data>
    <row id="7101">
        <language-from>English</language-from>
        <language-to>Mandarin</language-to>
        <cost>5.00</cost>
        <comment><![CDATA[Some comment]]></comment>
    </row>
</data> 
```

使用 XPath 查询数据：单词翻译的成本是多少？

```
/data/row[@id=7101]/cost/number() 
```

然后用结果除以 100 得到一个单词的价格。

使用 JDOM2 之类的库操作 XML 应该是在公园里散步。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T20:55:02.840

只需创建一个名为 TranslationType 的对象来为记录建模。它将具有 id、语言、...的属性

然后，您可以定义几种持久性类型，隐藏在一些智能接口后面，例如您可以随时交换使用的持久性实现，即使在运行时也是如此。潜在的持久性实现：简单的文本文件或二进制文件/序列化或 JDBC（其他 DB 类型）等。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-22T21:02:43.873

您还可以使用`Map` `(HashMap)`带有您的 id 作为键和自定义对象`Translation`作为包含所有行数据的值。使对象实现`Serializable`并将您的地图序列化到磁盘。`HashMap`已经实现`Serializable`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-22T20:50:31.063

谁说你必须使用 MySQL？您可以为此使用 SQLite。在每个主要操作系统上都有运行它的 JDBC 适配器。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-22T20:57:10.933

将它们放在一条线上有什么问题？搜索包含`<ID>`在名为`<integer>`.txt的文件中的行

然后您可以编写代码来搜索以每这么多单词的数量命名的文件，然后在该文件中搜索您想要的特定 ID？

`What is the cost of <7101> translation of <1000> words?`会找到一个名为 1000w.txt 的文件并获取包含该 ID 的行，然后解析它的总数吗？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-22T21:03:29.017

一种好的解决方案是将数据存储为 XML 文件。为数据文件和要为您的问题存储的数据创建和定义 XML 模式，在这种情况下，它是

ID 语言从语言到成本/100w 评论 7101 英语普通话 $5.00 外包

为数据文件定义模式可以让您更好地控制并强制执行适用于问题陈述的明确定义的类型。

您可以选择使用 JAX-B 或 XML-Beans 库从定义的模式生成类类型。根据应用程序的要求，读取 XML 数据解组和编组流或对象。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-09-19T21:45:47.390

您可以将最定义的 int 数据类型存储在数组中。只是一个例子：

```
 int[] arrayname = new int[n] 
```

# erlang - 我将如何运行命令行程序并通过标准输入向它提供数据

> ID：12081211
> 
> 赞同：1
> 
> 时间：2012-08-22T20:49:05.017
> 
> 标签：erlang

> **可能重复：**
> [Erlang Ports：与类似“wc”的程序接口？](https://stackoverflow.com/questions/8792376/erlang-ports-interfacing-with-a-wc-like-program)

我一直在做的是写入 /tmp/ 中的文件，然后运行 ​​os:cmd("cat /tmp/tmp.txt | myprogram")。不过一定有更好的办法。

编辑：这个问题是一样的，但没有答案[Erlang Ports: Interfaceing with a "wc"-like program?](https://stackoverflow.com/questions/8792376/erlang-ports-interfacing-with-a-wc-like-program)

这很相似，但答案很奇怪，我认为这并不比我所做的更好[http://erlang.2086793.n4.nabble.com/open-pipe-spawn-quot-cat-quot-how-to -close-stdin-of-cat-td2112721.html](http://erlang.2086793.n4.nabble.com/open-pipe-spawn-quot-cat-quot-how-to-close-stdin-of-cat-td2112721.html)

这也没有解决方案[http://erlang.2086793.n4.nabble.com/open-port-issue-td2103107.html](http://erlang.2086793.n4.nabble.com/open-port-issue-td2103107.html)

# python - 防止用户多次提交喜欢或不喜欢

> ID：12081213
> 
> 赞同：1
> 
> 时间：2012-08-22T20:49:21.103
> 
> 标签：python, django, jquery, django-sessions

# javascript

```
$('button.like').click(function(){
    $.get($(this).parent().attr('href'),function(data){
        $(this).html(''+data);
    });
    return false;
}); 
```

# 看法

```
def like(request):
    if request.is_ajax:
        r = Restaurant.objects.get(pk=1)
        r.food_likes +=1
        r.save()
        return HttpResponse(str(r.food_likes))
    else:
        return redirect(request.META.get('HTTP_REFERER')) 
```

# html

```
 <a href="/like/">
        <button class="like pull-right btn btn-info text-left pad0  btn-mini mrg-left5 like-food">
            <i class="icon-thumbs-up"></i>&nbsp;`{{rest.food_likes}}`
        </button>
    </a> 
```

# 怀疑

我如何使用会话更改javascript，以便即使用户重新加载页面，他也应该能够切换喜欢和不喜欢，例如，如果用户喜欢特定餐厅，则对于特定会话，然后如果他刷新然后也如果他想撤消他的操作，应该提示他不喜欢它，请帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T11:57:07.740

您可以轻松地将数据存储在 django 中的用户会话中，

```
# Returns value of is_user_like key from user's session if it's available, or False
request.session.get('is_user_like', False)
# Sets value of is_user_like in user's session to True
request.session['is_user_like'] = True 
```

将您的模板更改为：

```
<a href="/like/">
    <button class="like pull-right btn btn-info text-left pad0  btn-mini mrg-left5 like-food">
        <i class="{% if user_likes %}icon-thumbs-down{% else %}icon-thumbs-up{% endif %}"></i>&nbsp;`{{rest.food_likes}}`
    </button>
</a> 
```

并传递`user_likes = request.session.get('is_user_like', False)`给模板渲染器。还将商店添加到会话行到您喜欢的视图的代码中（不喜欢视图是负面的 - 如果有的话）：

```
def like(request):
    if request.is_ajax:
        r = Restaurant.objects.get(pk=1)
        r.food_likes +=1
        r.save()
        request.session['is_user_like'] = True
        return HttpResponse(str(r.food_likes))
    else:
        return redirect(request.META.get('HTTP_REFERER')) 
```

查看此文档以确保您已在 django 中启用 SessionMiddleware - 它在生成的设置文件中默认启用：[https ://docs.djangoproject.com/en/dev/topics/http/sessions/](https://docs.djangoproject.com/en/dev/topics/http/sessions/)

# ruby-on-rails-3 - 如何允许异常在 rspec 请求规范中冒泡

> ID：12081218
> 
> 赞同：7
> 
> 时间：2012-08-22T20:49:34.317
> 
> 标签：ruby-on-rails-3, rspec

我想知道如何简单地允许所有异常在请求规范中间冒泡到 rspec。

我希望一个例子能说明这一点。假设我有以下请求规范和相应的应用程序代码：

```
# user_browses_posts_spec.rb
feature 'User views a post' do
  scenario 'this should fail with route missing' do
    FactoryGirl.create(:post)
    visit(root_path)
    click_on('View Post')
  end
end

# config/routes.rb
MyApp::Application.routes.draw do
  root to: 'posts#index'
  # notice I have not defined a :posts resource, so post_path should raise NoMethodError
end

# assume a totally standard app/controllers/posts_controller.rb

# app/views/posts/index.html.erb
<% @posts.each do |post| %>
  <%= link_to 'View Post', post_path(post) %>  # this line should fail
<% end %> 
```

当我运行测试时，我看到的是：

```
Failure/Error: click_on('View Post')
Capybara::ElementNotFound:
  no link or button 'View Post' found 
```

这是因为当从应用程序中引发 NoMethodError 时，规范运行器没有察觉到问题，因为它看到了正常的 Rails 开发错误页面（带有错误消息、回溯、参数等）。

但我**想**在终端中看到的是：

```
Failure/Error: visit(root_path)
NoMethodError:
  undefined method `post_path' for #<PostsController:0x007fea60a779c8> 
```

那么，我的问题是如何完全禁用该 rails 错误处理，所以 NoMethodError 一直冒泡到 rspec？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T22:07:21.120

我不相信这是可能的。但是，我也不认为您真的希望 visit() 冒泡控制器错误，即使它可以，因为 visit() 旨在用于功能测试。

请求规范在它们自己的上下文中运行，这意味着该`visit()`方法像浏览器一样访问 URL，而不是直接调用控制器方法。因此，请求将通过所有 Rack 中间件和 Rails 路由层。那里的错误处理与现实世界中的行为相同，这对于像这样的“功能”测试来说是一件好事。

考虑一下当你手动测试这样的东西时会发生什么。当您转到特定（损坏的）URL 时，浏览器中会显示什么？两件事之一：

*   在生产中，它通常是一个静态错误页面
*   在开发中，生成的页面包含描述错误的文本（带有堆栈跟踪）

事实上，在这两种情况下，浏览器都会收到一个 HTML 页面。

接下来，您查看此页面并对自己说“嘿，这不是我期待的页面！”。此时，您已经确定*出了什么*问题：该页面不是您所期望的。然后，您必须在日志中进行调查，或阅读开发模式错误页面上的堆栈跟踪，以尝试确定出错的*原因。*

该规范本质上是在做同样的事情，但是是自动化的。该`visit()`调用运行良好，并且确实生成*了*某种 HTML 页面。然后，测试会尝试通过单击链接来验证其中是否包含某些特定内容，这就是测试失败的地方。这一步在概念上与您说“嘿！”相同。仅在页面加载并且不包含您期望的内容之后。

如果您愿意，可以直接对控制器方法进行单元测试。这些会在更细化的层面上告诉你*出了什么问题。*

功能测试：

*   **what**：页面不包含预期的内容
*   **为什么**：控制器操作引发错误

单元测试：

*   **what** : 控制器动作抛出了一个错误
*   **为什么**：有人忘记将该文件放入项目（或其他）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T23:03:07.403

你可以这样做：

```
expect { visit(root_path) }.to raise_exception 
```

您还可以指定特定的异常，请参阅[https://www.relishapp.com/rspec/rspec-expectations/v/2-12/docs/built-in-matchers/raise-error-matcher](https://www.relishapp.com/rspec/rspec-expectations/v/2-12/docs/built-in-matchers/raise-error-matcher)

# javascript - Phonegap + jQuery Mobile 改进

> ID：12081226
> 
> 赞同：2
> 
> 时间：2012-08-22T20:50:37.430
> 
> 标签：javascript, performance, html, jquery-mobile, cordova

我正在使用 jQuery Mobile 构建一个 Phonegap 应用程序，整个应用程序是动态的，它从 API 加载数据。我有大约 10 个页面，并且该应用程序在 Phonegap 上运行速度太慢，但对于本机浏览器来说它很快。我可以做些什么来加速Phonegap或其他地方？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T21:00:09.483

尝试禁用一些减慢它的 CSS。在您的 jquery mobile .css 文件中，将其添加到底部：

```
* {
text-shadow: none !important;
-webkit-box-shadow: none !important;
-webkit-border-radius:0 !important;
-webkit-border-top-left-radius:0 !important;
-webkit-border-bottom-left-radius:0 !important;
-webkit-border-bottom-right-radius:0 !important;
-webkit-border-top-right-radius:0 !important;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-15T17:23:18.527

除了禁用 CSS 的另一种方法是删除或使用 GC 的替代方案。

JavaScript 是基于 GC 的语言。这意味着，它具有不可预测的 GC 时间，这使得主线程停止。这使得 UI 很困难。在本机实现上，您可以控制是否使用 GC。

这在Android上不会是问题。Android 总是因为 Java 上的 GC 而苦苦挣扎。考虑到这一事实，大多数 Android 用户并不太关心用户体验。但在 iOS 上，您基于 HTML5 的应用程序的体验永远不会比竞争对手的原生应用程序更好。

这个 GC 时间问题有很多解决方法。比如增量-GC、实时-GC等等。但实际上，没有真正的解决方案。因为原始问题是您无法控制。

# sql - Oracle OLAP 表达式/分析函数和 NA 值

> ID：12081229
> 
> 赞同：1
> 
> 时间：2012-08-22T20:50:44.950
> 
> 标签：sql, oracle, olap, cube

此问题特定于 NA 值和 Oracle OLAP 表达式语法。

[http://docs.oracle.com/cd/E11882_01/olap.112/e23381.pdf](http://docs.oracle.com/cd/E11882_01/olap.112/e23381.pdf)

我正在尝试执行一些简单的 avg 和 sum 计算，并且在某些特定情况下我会有 NA 值。它似乎不作为表达式语法的一部分存在，但是无论如何执行这些计算之一并跳过这些值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T16:39:33.623

我认为您正在寻找的可能是[NASKIP](http://docs.oracle.com/cd/B14117_01/olap.101/b10339/x_monitor013.htm)和[NASKIP2](http://docs.oracle.com/cd/B28359_01/olap.111/b28126/dml_options062.htm)选项。这些控制如何在聚合函数 (NASKIP) 和加法/减法 (NASKIP2) 中处理 NA 值。

例如，这里有一些示例代码来说明这个想法：

```
" Set up some objects, and see how they look"
dfn test dimension text
maintain test add 'V1\nV2\nV3' " add some values"
dfn num.t variable integer <test>
" set the first one to 3, and leave the others null"
num.t(test 'V1') = 3           
report num.t

" See how the options work"
naskip=yes
naskip2=yes
report naskip, naskip2, total(num.t), total(num.t)+num.t(test 'V2') 
" Will all be 3"
naskip2=no
report naskip, naskip2, total(num.t), total(num.t)+num.t(test 'V2') 
" First 3, second NA"
naskip=no
report total(num.t), total(num.t)+num.t(test 'V2')                  
" All NA" 
```

由于 Oracle OLAP 使用引号作为注释，该代码看起来有点奇怪，但我已尝试将这种影响降到最低。如果这不是您要查看的内容，请发布一些示例，我会看看是否可以提出其他建议。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-22T21:01:03.310

这是一个很好的[参考](http://www.sqlsnippets.com/en/topic-12656.html)，解释了如何在分析函数中使用空值。

此外，您始终可以在查询中添加：“where is not null”以明确排除空值。

# javascript - 从字符串中替换 char 以进行土耳其语配置

> ID：12081232
> 
> 赞同：2
> 
> 时间：2012-08-22T20:50:48.427
> 
> 标签：javascript

我的网站中有一个聊天功能，但该功能无法正确显示土耳其语字符。所以，我在下面写了这个函数，但它什么也没返回。哪里出错了？文本以字符串形式获取注释。

```
function FindAndReplaceAll(text) 
{
  var normal = new Array("Ä±","Å?","Ã¼","Ã§","Ã¶","Ä?","ÅŸ","Ã‡","Ä°","ÄŸ","Åž","Ã–","Ãœ","Ä±","Å?","Ã§","Ã¶","Ä?","ÅŸ","Ã‡","Ä°","ÄŸ","Åž","Ã–","Ãœ","Ã¼","ÄŸ");
  var turkish = new Array("ı","ş","ü","ç","ö","ğ","ş","Ç","i","ğ","Ş","Ö","Ü","ı", "ş", "ç", "ö", "ğ", "ş", "Ç", "i", "ğ", "Ş", "Ö", "Ü", "ü", "ğ");

  for (var i = 0; i < text.length; i++) 
  {
    for(var j = 0; j < 27;j++)
        {
            if(text.charAt(i) == normal[j])
            {
                text.charAt(i) = turkish[j];    
            }

        }
  }

  return text;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T21:10:18.683

[小提琴](http://jsfiddle.net/f9u5S/)

看看这个..

```
 function FindAndReplaceAll(text) 
    {
  var normal = new Array("Ä±","Å?","Ã¼","Ã§","Ã¶","Ä?","ÅŸ","Ã‡","Ä°","ÄŸ","Åž","Ã–","Ãœ","Ä±","Å?","Ã§","Ã¶","Ä?","ÅŸ","Ã‡","Ä°","ÄŸ","Åž","Ã–","Ãœ","Ã¼","ÄŸ");
  var turkish = new Array("ı","ş","ü","ç","ö","ğ","ş","Ç","i","ğ","Ş","Ö","Ü","ı", "ş", "ç", "ö", "ğ", "ş", "Ç", "i", "ğ", "Ş", "Ö", "Ü", "ü", "ğ");

  for (var i = 0; i < text.length; i+=2) 
  {
    for(var j = 0; j < 27;j++)
        {
            if((text.charAt(i)+text.charAt(i+1)) == normal[j])
            {

               text= text.replace((text.charAt(i)+text.charAt(i+1)), turkish[j]);    
            }

        }
  }

  return text;
}
document.write(FindAndReplaceAll("Ä± Å? Ã¶"))
​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-10T08:48:15.317

你可以使用这个扩展

```
public static string ReplaceToTurkishChar(this string input)
{
        if (string.IsNullOrEmpty(input))
            return input;

        input = input
            //.Replace("&#305;", "ı").Replace("&#304;", "İ")
            .Replace("&Uuml;", "Ü").Replace("&uuml;", "ü")
            .Replace("&Ouml;", "Ö").Replace("&ouml;", "ö")
            //.Replace("&#286;", "Ğ").Replace("&#287;", "ğ")
            //.Replace("&#350;", "Ş").Replace("&#351;", "ş")
            .Replace("&Ccedil;", "Ç").Replace("&ccedil;", "ç");

        input = input
            .Replace("&#305;", "ı").Replace("&#304;", "İ")
            .Replace("&#220;", "Ü").Replace("&#252;", "ü")
            .Replace("&#214;", "Ö").Replace("&#246;", "ö")
            .Replace("&#286;", "Ğ").Replace("&#287;", "ğ")
            .Replace("&#350;", "Ş").Replace("&#351;", "ş")
            .Replace("&#199;", "Ç").Replace("&#231;", "ç");

        input = input
            .Replace("Ä±", "ı").Replace("Ä°", "İ")
            .Replace("Ã¼", "ü").Replace("Ãœ", "Ü")
            .Replace("Ã–", "Ö").Replace("Ã¶", "ö")
            .Replace("ÄŸ", "ğ").Replace("Ä?", "Ğ")
            .Replace("ÅŸ", "ş").Replace("Åž", "Ş")
            .Replace("Ã‡", "Ç").Replace("Ã§", "ç");

        input = input
            .Replace("\u0131", "ı").Replace("\u0130", "İ")
            .Replace("\u00FC", "ü").Replace("\u00DC", "Ü")
            .Replace("\u00F6", "ö").Replace("\u00D6", "Ö")
            .Replace("\u011F", "ğ").Replace("\u011E", "Ğ")
            .Replace("\u015F", "ş").Replace("\u015E", "Ş")
            .Replace("\u00E7", "ç").Replace("\u00C7", "Ç");

        return input;
} 
```

# android - 如何通过单击按钮从可绘制对象中获取图像

> ID：12081235
> 
> 赞同：0
> 
> 时间：2012-08-22T20:50:53.847
> 
> 标签：android, button, canvas, onclicklistener

如何获得一个按钮，该按钮可以通过 onclick 侦听器以编程方式从 drawables 文件夹中获取图像，而不是使用 xml。我在画布上创建了一个按钮和一个形状，但无法让按钮成为 onclick...任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T08:30:04.383

```
button.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {
        imageview.setImageResource(R.drawable.image);       
    }
}); 
```

我认为这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T21:21:45.883

```
LinearLayout mLinearLayout;
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // Create a LinearLayout in which to add the ImageView
    mLinearLayout = new LinearLayout(this);

    // Instantiate an ImageView and define its properties
    ImageView i = new ImageView(this);
    i.setImageResource(R.drawable.my_image);
    i.setAdjustViewBounds(true); // set the ImageView bounds to match the Drawable's dimensions
    i.setLayoutParams(new Gallery.LayoutParams(LayoutParams.WRAP_CONTENT,
    LayoutParams.WRAP_CONTENT));

    // Add the ImageView to the layout and set the layout as the content view
    mLinearLayout.addView(i);
    setContentView(mLinearLayout);
} 
```

[您可以在此处](http://developer.android.com/guide/topics/graphics/2d-graphics.html)阅读有关使用`Canvas`和的更多信息。`Drawables`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T21:00:09.213

首先，您需要设置一个在用户单击按钮时触发的功能。您可以在布局 xml 文件中的按钮属性中执行此操作：

```
android:onClick="someFunction" 
```

您需要在视图绑定到的 Activity 中创建此函数：

```
public void someFunction(View v){
    // Load the drawable
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T21:38:03.007

为什么不使用 ImageButton 并将背景设置为从可绘制对象中获取的图像？类似的东西

```
ImageButton imgBtn = (ImageButton) findViewById(....)
imgBtn.setBackgroundResource(R.your_resource_id)
imgBtn.setOnclickListener(.......) 
```

希望这对您有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-16T23:08:38.550

我刚刚尝试过，并且（假设）一个 ID 按钮`click`会将可绘制对象加载到 ImageView。确保 ImageView 没有声明 src 属性。

`android:src="@drawable/something "` 一定不在那里。

这是您以编程方式加载可绘制对象的方式。

```
 ImageView img;

    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    img=(ImageView)findViewById(R.id.imgViewone);

    Button button = (Button)findViewById(R.id.click);
    button.setOnClickListener(new Button.OnClickListener(){

        @Override
        public void onClick(View v) {
            img.setBackgroundResource(R.drawable.te7);

        }

    });

} 
```

# ruby-on-rails - 有没有办法阻止 ActiveRecord 查询 id=0 的对象？

> ID：12081236
> 
> 赞同：2
> 
> 时间：2012-08-22T20:50:58.667
> 
> 标签：ruby-on-rails, activerecord

在我的数据库中，我已将所有外键设置为`unsigned int not null default 0`. 结果，在我的 Rails 应用程序中，我收到了很多关于 id=0 对象的查询。这是一个例子：

```
class Foo < ActiveRecord::Base
  belongs_to :bar
end

class Bar < ActiveRecord::Base
end 
```

在控制台中，如果我这样做：

```
Foo.new.bar 
```

然后运行此查询：

```
SELECT `bars`.* FROM `bars` WHERE `bars`.`id` = 0 LIMIT 1 
```

我试过猴子补丁，但 method_missing 似乎无法捕捉到这些类型的调用。我真的不想（在这一点上真的不能）改变我的架构。我似乎可以解决这个问题的唯一方法是始终手动检查 bar_id ！= 0，但这似乎不是很干净。

想法/建议？

澄清一下，**我不想更改架构**。问题是：ActiveRecord 是否可以被配置/破解，使得 0 和 nil 都被视为无效 id，从而阻止对 id=0 对象的任何查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T22:05:21.817

您可以尝试在属于方法中使用条件。条件创建一个必须通过任何活动记录查询满足的默认 where 子句。

```
belongs_to :bar, :conditions => "id != 0" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T20:57:21.417

无论如何，我都会发布迁移解决方案。如果我很乐意删除它

> ...此时不能真正改变我的架构

被证明是真的。在新的迁移文件中：

```
def up
  change_column_default(:bars, :id, nil) # removes default, letting it be null
  execute "update bars set id = null where id = 0"
end

def down
  change_column_default(:bars, :id, 0)
  execute "update bars set id = 0 where id is null"
end 
```

# pdf-generation - 使用 AbcPDF 使网站适合边界框

> ID：12081240
> 
> 赞同：0
> 
> 时间：2012-08-22T20:51:25.737
> 
> 标签：pdf-generation, abcpdf

我似乎无法在下面的边界框内放置一个高度较长的网页。当 BrowserWidth 较小时，该网页会溢出页面，但是当它大于边界框时，它会很好地适应。

```
public abstract class HtmlToPdfModel : IPdfModel
    {
        public string Url { get; set; }
        public int PageWidth { get; set; } // 850 (in pixels)
        public int PageHeight { get; set; } // 844 (in pixels)
        public string FileName { get; set; }

        public virtual byte[] GetStream()
        {
            using (var doc = new Doc())
            {
                var w = doc.MediaBox.Width;
                var h = doc.MediaBox.Height;
                var l = doc.MediaBox.Left;
                var b = doc.MediaBox.Bottom;

                doc.Transform.Rotate(90, l, b);
                doc.Transform.Translate(w, 0);
                doc.HtmlOptions.PageCacheEnabled = false;
                doc.Rect.Width = h; // 792
                doc.Rect.Height = w; // 612

                if (!string.IsNullOrWhiteSpace(string.Format("{0}&r={1}", Url, new Random().Next(1, 100000))))
                {
                    var ratio = GetViewPortRatio((int)doc.Rect.Width, (int)doc.Rect.Height, PageWidth, PageHeight);

                    doc.HtmlOptions.BrowserWidth = (int)(doc.Rect.Width * ratio);
                    doc.AddImageUrl(Url);
                }

                doc.SetInfo(doc.GetInfoInt(doc.Root, "Pages"), "/Rotate", "90");

                using (var ms = new MemoryStream())
                {
                    doc.Save(ms);
                    if (ms.CanSeek)
                    {
                        ms.Seek(0, SeekOrigin.Begin);
                    }
                    return ms.GetBuffer();
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T17:55:48.737

用以下方法修复它。

```
using (var doc = new Doc())
            {
                var w = doc.MediaBox.Width;
                var h = doc.MediaBox.Height;
                var l = doc.MediaBox.Left;
                var b = doc.MediaBox.Bottom;

                doc.Transform.Rotate(90, l, b);
                doc.Transform.Translate(w, 0);
                doc.HtmlOptions.PageCacheEnabled = false;
                doc.HtmlOptions.Engine = EngineType.Gecko;
                doc.Rect.Width = h;
                doc.Rect.Height = w;
                //doc.Rendering.DotsPerInch = 92;

                if (!string.IsNullOrWhiteSpace(string.Format("{0}&r={1}", Url, new Random().Next(1, 100000))))
                {
                    var actualWidth = PageWidth / .75f;
                    var dimensionsScale = GetViewPortScale(PageHeight, PageWidth);

                    doc.HtmlOptions.BrowserWidth = Convert.ToInt32(actualWidth * dimensionsScale);

                    doc.AddImageUrl(Url);
                }

                doc.SetInfo(doc.GetInfoInt(doc.Root, "Pages"), "/Rotate", "90");

                using (var ms = new MemoryStream())
                {
                    doc.Save(ms);
                    if (ms.CanSeek)
                    {
                        ms.Seek(0, SeekOrigin.Begin);
                    }
                    return ms.GetBuffer();
                }
            }

       private float GetViewPortScale(float currentDimension, float dimension)
    {
        return (currentDimension / dimension);
    } 
```

# javascript - 来自 C++ 对象的 QML 调用方法

> ID：12081241
> 
> 赞同：0
> 
> 时间：2012-08-22T20:51:36.977
> 
> 标签：javascript, c++, qt, qml

好的，我知道如何从 QML 调用 C++ 方法，但在这种情况下它不起作用。

这就是我的代码的样子（它不是实际的代码，因为它非常大）：

```
Container //this is my main qml element, where is everything contained and started
{
 ElemA
 {
  id: elemA
  ...
 }
 ElemB
 {
  id: elemB
  ...
 }
} 
```

* * *

```
ElemA
{
 MyClass
 {
  id: myClass
  ...
 }
 //myClass.method() //runs fine

 //Now I call: elemB.myClass = myClass
 //after that, if I call method() it doens't work (below is code)
} 
```

* * *

```
ElemB
{
 property MyClass myClass
 //myClass.method() //doesn't run at all, neither shows any errors or warnings
} 
```

ElemA 和 ElemB 基本上是状态，我从中切换。它是这样的：一切都以状态 ElemA 开始，然后我可以切换到 ElemB，但是当我切换时，method() 不起作用（如上所述，没有错误或警告）。

我很确定当我输入“elemB.myClass = myClass”时出现问题（或者可能是不允许的，但它通过了），**换句话说，我不能将 C++ 对象作为属性传递给其他元素（使用 QML ）。**

**所以我的问题是我应该如何解决这个问题？**

* * *

**编辑：**我的代码实际上是游戏。我有很多 Elem，每个 Elem 代表一种状态（例如，ElemMenu 是游戏菜单，当我按下“选项”之类的按钮时，它会将我切换到 ElemOptions 状态，在那里我可以做一些其他事情）。

MyClass 是用于网络的 C++ 实现。现在的问题是我需要在 2 个状态（网络）之间有一个 c++ 对象实例：

*   第一个状态 (ElemA) 正在等待客户端连接并接受它们
*   2nd state (ElemB) 正在玩游戏

现在，一旦我接受了足够的客户端连接，我想开始游戏并切换到状态 ElemB，但我需要拥有相同的对象，以便我可以使用连接的客户端进行操作。

* * *

我尝试使用这种方法注入 myClass：*viewer.rootContext()->setContextProperty("myClass", new MyClass());* 但后来我无法在 QML 中将“myClass”与*Connections*元素一起使用（说 myClass 属性未定义，但我可以像*myClass.something()*一样进行方法调用。

我现在正在考虑重新实现 MyClass，并使其成为静态的。然后我可以在 MyClass 的 ElemA 和 ElemB 实例中创建，但如果可能的话我宁愿不这样做。

QtMobility 现在不是我的选择。

我正在使用 QT 1.8.1 和 QtCreator 2.5

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T01:57:55.217

为什么不在 elemB 上的属性上设置别名：

```
ElemB
{
    property alias myClassInElemB: myClass

    MyClass
    {
        id: myClass
        ...
    }
} 
```

在您的代码中，您可以这样做：`elemB.myClassInElemB = myClass`。

但是，我认为您的代码中存在概念问题。为什么你只使用`ElemA`和`ElemB`对象而不是`states`你的属性`Container`？为什么要调用`elemB.myClass = myClass`ElemA.qml（源代码`ElemA`）？解决这个问题可以让你写出更简单的东西并避免使用`myClass`. 你能告诉我们更多关于你的代码吗？

# php - 为什么这个while循环不起作用？

> ID：12081244
> 
> 赞同：-1
> 
> 时间：2012-08-22T20:51:50.957
> 
> 标签：php, mysql

这个while循环没有执行任何回声。我已经测试了 mysql_num_fields($result); 它给了我 16 所以不是 $i 已经大于 $j。我也不是无限的，只是什么都不做。

```
while ($row = mysql_fetch_array($result))  
{ 
    $i = 1;
    $j = mysql_num_fields($result);

    if ($i <= $j) {
        echo "<li>";
        echo "<a id='autoload' href='images/big/".$row['card$i'].".jpg' class='highslide'      onclick='return hs.expand(this, config1 )'>";
        echo "<img src='images/small/".$row['card$i']."jpg' alt''";
        echo " title='";
        echo $year." ". $brand." ".$playerfirst." ".$playerlast." ".$details."'/>";
        echo "</a>";
        echo "</li>";
        $i++;
    }
    else {
        break;
    }
} 
```

我想我应该说这个查询只返回 1 行。然后，我需要从几个不同的列（card1、card2、card3...card16）中提取一个数字，并将其作为图像文件名放入，如上所示。此外，我了解所有 mysqli 和防止注入的东西，我真的不需要担心这类项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T20:58:20.970

`mysql_num_fields`返回由 sql 查询返回的表中的列数。它不会改变每一行。您不应该在每个循环中都运行它。

此外，删除`$i`,`$j`行并将 if 语句更改为`if(false)`将执行与现在完全相同的操作，并且要解决此问题，您将完全删除 if 语句...

你需要一个[php & mysql](http://www.tizag.com/)教程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T20:58:27.750

**来自 PHP 手册**

> 返回对应于提取行的字符串数组，如果没有更多行，则返回 FALSE。返回数组的类型取决于 result_type 的定义方式。通过使用 MYSQL_BOTH（默认），您将获得一个包含关联索引和数字索引的数组。使用 MYSQL_ASSOC，你只能得到关联索引（因为 mysql_fetch_assoc() 有效），使用 MYSQL_NUM，你只能得到数字索引（因为 mysql_fetch_row() 有效）。
> 
> 如果结果的两列或多列具有相同的字段名称，则最后一列将优先。要访问同名的其他列，您必须使用该列的数字索引或为该列创建别名。对于别名列，您无法使用原始列名访问内容。

您的 while 将仅针对每个结果运行。你应该只需要做

```
while ($row = mysql_fetch_array($result))  
{ 

    echo "<li>";
    echo "<a id='autoload' href='images/big/".$row['card'].".jpg' class='highslide'      onclick='return hs.expand(this, config1 )'>";
    echo "<img src='images/small/".$row['card']."jpg' alt''";
    echo " title='";
    echo $year." ". $brand." ".$playerfirst." ".$playerlast." ".$details."'/>";
    echo "</a>";
    echo "</li>";

} 
```

这样做只会循环遍历每个结果。虽然结果中有一行，但请执行此操作。如果还有一行可用，则返回顶部然后再做一次

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T20:58:51.667

这就是您的代码今天所做的：

```
/* as long as i can fetch a database row */
while($row=mysql_fetch_array($result))  
{ 
   /* reset the counter i */
   $i=1;

   /* count the number of fields */
   $j=mysql_num_fields($result);

   /* as long as its at leas one field ($i is always 1) */
   if ($i <= $j)
   {

      /* print some html */
      echo "<li>";
      echo "<a id='autoload' href='images/big/".$row['card$i'].".jpg' class='highslide'      onclick='return hs.expand(this, config1 )'>";
      echo "<img src='images/small/".$row['card$i']."jpg' alt''";
      echo " title='";
      echo $year." ". $brand." ".$playerfirst." ".$playerlast." ".$details."'/>";
      echo "</a>";
      echo "</li>";

      /* increase counter to 2 (always gets to 2 as i always is 1 before) */
      $i++;
  }

  /* if there was zero field */
  else
  {
      /* break the loop */
      break;
  }

  /* loop by jumping ut to reset counter i */
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T21:52:45.643

就像每个人都说的那样，这段代码应该一起重新编写。但是为了弄清楚这个问题，你有一行 16 列。您想打印 16 次列表项 html。你想要的是一个 for 循环。if 循环只会运行一次。

```
for($i=1; $i <= $j; $i++) {
     /* print some html */
      echo "<li>";
      echo "<a id='autoload' href='images/big/".$row['card$i'].".jpg' class='highslide'      onclick='return hs.expand(this, config1 )'>";
      echo "<img src='images/small/".$row['card$i']."jpg' alt''";
      echo " title='";
      echo $year." ". $brand." ".$playerfirst." ".$playerlast." ".$details."'/>";
      echo "</a>";
      echo "</li>";
} 
```

# perl - 如何在 Perl 中获取 Windows 上的系统用户全名？

> ID：12081246
> 
> 赞同：2
> 
> 时间：2012-08-22T20:51:55.747
> 
> 标签：perl

我一直在使用 User::pwent 在 Perl 中获取系统用户的全名：

```
require User::pwent;
my $full_name = (User::pwent::getpwnam(getlogin)->gecos)[0]; 
```

但是，`getpwnam`在 Windows Perl 中没有实现。在 Windows 上获取用户全名的替代方法是什么？是可用的么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T21:27:29.340

戳了一下，我能找到的最好的方法是使用[`Win32API::Net::GetUserInfo()`](https://metacpan.org/module/Win32API%3a%3aNet#UserGetInfo-server-user-level-hash-)：

```
require Win32API::Net;
Win32API::Net::UserGetInfo( '', $self->sysuser, 10, my $info = {} );
my $full_name = $info->{fullName}; 
```

需要让它在一些 Windows 机器上运行，以确保它工作。

* * *

**更新：**确认可以使用 10 级用户信息：

```
> perl -MWin32API::Net -E "Win32API::Net::UserGetInfo('',Win32::LoginName(), 10, my $info = {} ); say $info->{fullName}"
Bartholomew Simpson 
```

不知道为什么 1011 不像[记录](https://metacpan.org/module/Win32API%3a%3aNet#USER-INFO-LEVELS)的那样工作，但这对我来说已经足够了。

# silverlight - 如何判断浏览器是否支持基于 User-Agent 的 Silverlight？

> ID：12081247
> 
> 赞同：0
> 
> 时间：2012-08-22T20:52:20.777
> 
> 标签：silverlight, browser, user-agent

问题：基于 HTTP 请求的 User-Agent 标头，我需要根据浏览器是否受 Microsoft Silverlight 支持来选择响应中的内容。

是否实际安装了 Silverlight 并不重要，重要的是浏览器是否可以安装它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T15:52:17.547

我发现的唯一方法是在用户代理上进行字符串匹配。

我从这里列出的用户代理中提取了一堆单词：[http ://www.useragentstring.com/pages/Mobile%20Browserlist/](http://www.useragentstring.com/pages/Mobile%20Browserlist/)

# ruby-on-rails - 在 Rails 中处理异步 3rd 方 http 请求

> ID：12081249
> 
> 赞同：0
> 
> 时间：2012-08-22T20:52:26.833
> 
> 标签：ruby-on-rails, ruby-on-rails-3, resque, eventmachine

我有以下工作流程，我正在寻找 Rails 应用程序：

*   解析传入请求
*   构建第 3 方 Web 服务请求
*   发送第 3 方请求
*   将工作人员排入队列以处理预期的响应
*   响应到达后处理响应 将解析结果作为响应返回

*   除了我正在使用的数据对象之外，还需要哪些模型？（例如队列、工人等？）

*   我需要重新实现哪些标准 Rails 控制器才能完成此操作？

所有结果都通过 JSON 传递。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T21:43:08.753

第 4 步 - 让工作人员排队以处理预期的响应是困难的。为什么不在收到回复时排队工作呢？

要在 Web 应用程序之外处理响应，我的建议是在收到响应后让工作人员排队处理作业。这似乎是最好的路线。

我能想到的唯一另一种方法是创建另一个应用程序来处理响应，并将第 3 方响应发送到该应用程序，然后将计算结果发送回您的 webapp。

# c# - MongoDB作为队列，有上限的集合+可尾游标

> ID：12081251
> 
> 赞同：6
> 
> 时间：2012-08-22T20:52:32.153
> 
> 标签：c#, mongodb, message-queue

（在 mongo-user 讨论组[https://groups.google.com/d/topic/mongodb-user/i1ge4bNiMgM/discussion](https://groups.google.com/d/topic/mongodb-user/i1ge4bNiMgM/discussion)上询问）

嗨，我想将 MongoDB 用作消息队列，并考虑为此目的使用上限集合 + 可尾游标。我知道可尾光标可用于按插入顺序访问文档，但是

1.  我可以对光标使用任何排序顺序吗？
2.  拖尾光标是否与过滤器查询一起使用（跳过一些我不想处理的文档）？如果是这样，它如何处理新文档的插入 - 只有当新文档符合查询条件时才会通知我？
3.  C# 驱动程序是否完全支持尾随游标？
4.  我希望我的队列保证单次传递 - 我的意思是如果两个客户端尝试从同一个集合中读取消息，他们不应该能够“消费”相同的消息。我认为这可以通过 findAndModify 来实现，但是如何使用尾随光标来实现呢？

谢谢 RG

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-23T06:58:08.080

AOL/About.me 于2012 年 4 月在硅谷 MUG上发表了关于“[将 MongoDB 作为消息队列”的演讲，您可能会发现它有助于规划您的方法。](http://www.slideshare.net/mongodb/mongodb-as-message-queue)

> 1.  我可以对光标使用任何排序顺序吗？
> 2.  拖尾光标是否与过滤器查询一起使用（跳过一些我不想处理的文档）？如果是这样，它如何处理新文档的插入 - 只有当新文档符合查询条件时才会通知我？

可尾游标尾随封顶集合的*末尾*，并且仅以自然顺序排列。如果您想要排序顺序，则需要使用索引查询。

请阅读[Create Tailable Cursor](http://docs.mongodb.org/manual/tutorial/create-tailable-cursor/)文档页面以获取更多信息。

> C# 驱动程序是否完全支持尾随游标？

是的，可尾游标支持是在 1.1 C# 驱动程序中实现的（参见：[代码示例](http://www.pastie.org/1977343)）。

> 我希望我的队列保证单次传递 - 我的意思是如果两个客户端尝试从同一个集合中读取消息，他们不应该能够“消费”相同的消息。我认为这可以通过 findAndModify 来实现，但是如何使用尾随光标来实现呢？

有几种方法：

*   让一个带有可尾光标的阅读器将任务分配给工作线程（即基于工作队列深度或循环）。这将比拥有多个阅读器更有效，但可能会出现单点故障。
*   （@Contango 在下面的评论中建议）拥有多个阅读器，但使用乐观并发确保只有一个工作人员“拥有”每个任务。这将导致更多的 I/O，但如果工作人员也直接拖尾，则可能会简化您的设计。

有关原子操作的更多信息，请参阅MongoDB 手册中的[隔离操作序列。](http://docs.mongodb.org/manual/tutorial/isolate-sequence-of-operations/)

# asp.net-mvc - ASP.NET MVC 框架 4.5 CSS 包在主机上不起作用

> ID：12081255
> 
> 赞同：145
> 
> 时间：2012-08-22T20:52:55.527
> 
> 标签：asp.net-mvc, asp.net-mvc-4, appharbor, asp.net-optimization

我正在用 MVC4 编写的应用程序港口上运行一个应用程序。

一堆 css 文件不起作用。在调试模式下的本地计算机中，我看到了应用程序的代码，并看到了文件。该应用程序按预期工作。

```
<link href="/Content/css/home/basic-jquery-slider.css" rel="stylesheet"/>
<link href="/Content/css/home/Home.css" rel="stylesheet"/> 
```

当我将应用程序上传到 Appharbor 时，我在代码中看到了捆绑包，但应用程序不起作用。

```
<link href="/Content/css/home?v=zhVOIpUNuvCOZhJyBcQWpMlozayor4te6k-pM29wHqI1" rel="stylesheet"/> 
```

`href`当我在我得到**403 - Forbidden: Access is denied**中浏览该链接时。

 **如何解决这个问题？

* * *

## 回答 #1

> 赞同：287
> 
> 时间：2012-08-22T22:22:49.060

我的猜测是该路径`Content/css`存在于您的应用程序的磁盘上。在这种情况下，IIS 将处理请求，而不是 MVC。

确保包的虚拟路径（StyleBundle 构造函数的参数）与文件系统中的文件夹不匹配。

从评论：

> “创建捆绑包时要遵循的一个很好的约定是在捆绑包名称中包含“捆绑包”作为前缀。这将防止可能的路由冲突。

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2012-11-28T03:07:20.173

默认情况下，此问题是 .NET 不会“处理”具有 .js 或 .css 扩展名的请求。

有两个修复（你只需要做一个）

A) 从捆绑包名称中删除扩展名。（推荐）这将导致 .NET 处理请求并通过 BundleModule 运行它。

B) 将此添加到您的 web.config 中的**system.webServer**部分，这将导致 .NET 通过 BundleModule 运行 .js 和 .css 请求。

```
<modules runAllManagedModulesForAllRequests="true">
  <remove name="BundleModule" />
  <add name="BundleModule" type="System.Web.Optimization.BundleModule" />
</modules> 
```

向找到真正原因并在我的博客上与我分享的 Ray Moro 大声喊叫：http: [//blog.cdeutsch.com/2012/11/fixing-404-errors-for-aspnet-mvc-apps.html](http://blog.cdeutsch.com/2012/11/fixing-404-errors-for-aspnet-mvc-apps.html)

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2015-01-30T07:22:22.683

当我尝试在 AppHarbor 上部署我的 ASP.NET MVC 应用程序时，我也发生了这种情况。

我有一个样式表包，名称为

```
@Styles.Render("~/Content/bootstrap") 
```

文件夹结构是

> - 内容
> 
> -- 内容\引导程序\ ...

只需将捆绑名称更改为`"~/Content/bootstrap-css"`我的问题即可解决。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2016-03-29T20:17:11.953

我知道我在这个问题上迟到了 4 年，但这对我有用。

```
public static void RegisterBundles(BundleCollection bundles)
{
   ...

   BundleTable.EnableOptimizations = true;     // Added this           
} 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2014-04-18T18:01:31.873

**403 错误已解决。**这是403错误的详细解释和解决方案。
**[该解决方案](http://www.mvccentral.net/Story/Details/articles/kahanu/stylebundle-403-error-solved)** 针对 CSS 捆绑包进行了演示。但是它也适用于 JavaScript。

[http://www.mvccentral.net/Story/Details/articles/kahanu/stylebundle-403-error-solved](http://www.mvccentral.net/Story/Details/articles/kahanu/stylebundle-403-error-solved)

简而言之，确保虚拟路径 与文件系统中的文件夹（例如）`[Script | Style]Bundle("~/content/[script | css]")`不匹配`C:\approot\Content\[script | css]``[Script | Style]Bundle("~/content/[scriptDiff | cssDiff]")`

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2018-09-17T14:30:15.747

我通过在 BundleConfig 类中添加以下代码行解决了这个问题

```
BundleTable.EnableOptimizations = false; 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2014-06-24T17:43:50.930

我做的很简单，

我在 ScriptBundle 的末尾添加“js”，如下所示： new ScriptBundle("~/bundles/appjs") 我在 StyleBundle 的末尾添加“css”，如下所示： new StyleBundle("~/content/appcss")

我的文件夹名称从不以“js”或“css”结尾。

那应该这样做。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-10-30T22:17:35.077

这也适用于“ScriptBundle 类”，确保构造函数的“参数名称”与 Web 应用程序文件系统中的路径不匹配。请记住，IIS 将尝试提供文件/请求。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-03-08T02:32:49.490

问题也可能来自被加密的文件。当我下载 BootStrap 并使用提供的文件时，这发生在我身上。它们在 Windows 资源管理器中显示为绿色，在 Visual Studio 中运行良好，但部署时出现 403 错误。

您可以通过转到属性，然后转到高级属性并有一个加密复选框来查看它们是否已加密。

取消选中，它将不再是一个问题。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-12-23T10:10:10.567

我对那个（403 Forbidden）错误有同样的问题。就我而言，原因是我组织中的代理服务器阻止了我的 css 文件。Css 文件名匹配块规则之一。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-12-23T17:04:17.403

我发现文件 bootstrap.css 不在内容文件夹中，所以我在包中查找它并粘贴在那里.. 它有效！**

# matlab - .m 文件作为 Sublime Text 的 MATLAB/Octave

> ID：12081256
> 
> 赞同：52
> 
> 时间：2012-08-22T20:53:02.853
> 
> 标签：matlab, octave, sublimetext2, sublimetext

Sublime 将`.m`文件视为 Objective C 文件。

我得到了一堆 MATLAB/Octave 文件，可以使用 Octave 进行处理，所有文件都带有`.m`扩展名。

如果我将扩展名更改为`.matlab`，那么 Sublime 会识别它们并正确格式化它们，但是 Octave 看不到它们。

我想：

(1) 改变 Sublime 使其识别`.m`为 MATLAB/Octave 而不是 Objective C，或者

(2) 告诉 Octave 识别`.matlab`它可以运行的东西。

我已经在 Sublime 和 Octave 方面四处寻找，但无济于事（[这](https://stackoverflow.com/questions/6964348/overlap-between-objective-c-and-matlab-octave-file-extensions)不是答案），而且我是 Octave 菜鸟。谢谢你。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-08-22T21:19:09.843

Sublime 2 可以配置为将某些文件扩展名与某些语法高亮方案相关联。请参阅此答案以了解具体操作方法[https://stackoverflow.com/a/8014142/694184](https://stackoverflow.com/a/8014142/694184)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2021-02-05T12:28:03.110

以下是如何使用`CTRL`+直接从 Sublime Text 运行 Matlab/Octave 代码`B`，并将`.m`文件与此 Matlab 语法相关联。这是特定于 Windows 的，请参阅注释中的以下原因。

首先一个`Matlab.sublime-build`：

```
{
    "cmd": ["cmd", "/k", "D:\\Documents\\software\\octave-4.0.0\\bin\\octave-cli.exe", "$file"],
    "selector": "source.matlab"
} 
```

然后一个`Matlab.sublime-settings`：

```
{
    "extensions":
    [
        "m"
    ]
} 
```

注意：我使用该`cmd /k`技巧使绘图显示在一个新窗口中，该窗口在 10 毫秒后不会“消失”（请参阅[​​如何在没有 Octave IDE 的情况下运行 Octave 代码（类似于 Python）？](https://stackoverflow.com/questions/66054173/how-to-run-octave-code-without-the-octave-ide-similarly-to-python)和[Octave: How to prevent plot window从关闭自己？](https://stackoverflow.com/questions/52569584/octave-how-to-prevent-plot-window-from-closing-itself)）。因此，不要忘记将其添加到您的绘图中：

```
h = plot(...)
waitfor(h) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-22T23:02:31.803

这些文件是脚本还是函数？如果它们是 Octave 脚本而不是函数，那么您可以拥有任何您喜欢并用于`source()`运行它们的扩展，独立于扩展。如果它们是函数，与 Matlab 不同，您可以在脚本文件中定义函数，加载它，它们将保留在内存中。

但是如果你根本不需要语法高亮，你应该可以更改 Sublime，只需找到文件 Objective-C.Sublime-package。如果不运行它，只需查看安装程序中的文件，我就会看到两种方法：

1.  尝试删除它（或者只是将其名称更改为 .bak 以便在出现问题时恢复它）
2.  该文件是一个包含两个 XML 文件的 tarball。打开这些文件并编辑将这些文件的扩展名设置为不同 .m 的条目

当然，还可以选择更改为自由文本编辑器中的自由文本编辑器，让您可以查看其源代码并做任何您想做的事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-09T21:14:16.417

这对我来说很好。我刚刚放了八度音程的路径，代码正在完美运行

```
{
"cmd": ["/usr/local/octave/3.8.0/bin/octave-3.8.0", "$file"],
"selector": "source.m"
} 
```

将其保存为 Octave.sublime-build

# objective-c - 适用于 iOS 的 Luma Key（从图像创建 Alpha 蒙版）

> ID：12081257
> 
> 赞同：35
> 
> 时间：2012-08-22T20:53:16.487
> 
> 标签：objective-c, ios, gpuimage

我正在构建一个应用程序，允许人们在白色背景下上传自己的图像，该应用程序将创建一个人的剪影。

我很难键入背景。我正在使用该`GPUImage`框架，并且该框架`GPUImageChromaKeyBlendFilter`非常适合颜色，但是如果您使用白色/黑色，则很难抠出其中一种颜色。如果我将键设置为白色或黑色，则两者的键相同。

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-08T23:28:40.680

电影制作中通常使用蓝色或绿色屏幕而不是白色来进行色度键控是有原因的。照片中的任何东西都可以是白色或足够接近白色，尤其是眼睛或亮点或只是部分皮肤。此外，很难找到一堵没有阴影的统一白墙，至少由你的主体投射。我建议建立一个直方图，在最亮的颜色中找到最常用的颜色，然后使用某个阈值搜索该颜色的最大区域。然后从该区域进行泛光填充，直到遇到足够不同的颜色。除非您想要实时视频流，否则所有这些都可以在软件中轻松完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T22:56:15.793

因此，要将白色更改为透明，我们可以使用以下方法：

```
-(UIImage *)changeWhiteColorTransparent: (UIImage *)image {
    CGImageRef rawImageRef=image.CGImage;

    const float colorMasking[6] = {222, 255, 222, 255, 222, 255};

    UIGraphicsBeginImageContext(image.size);
    CGImageRef maskedImageRef=CGImageCreateWithMaskingColors(rawImageRef, colorMasking);
    {
        //if in iphone
        CGContextTranslateCTM(UIGraphicsGetCurrentContext(), 0.0, image.size.height);
        CGContextScaleCTM(UIGraphicsGetCurrentContext(), 1.0, -1.0); 
    }

    CGContextDrawImage(UIGraphicsGetCurrentContext(), CGRectMake(0, 0, image.size.width, image.size.height), maskedImageRef);
    UIImage *result = UIGraphicsGetImageFromCurrentImageContext();
    CGImageRelease(maskedImageRef);
    UIGraphicsEndImageContext();    
    return result;
} 
```

并用黑色替换非透明像素，我们可以使用：

```
- (UIImage *) changeColor: (UIImage *)image {
    UIGraphicsBeginImageContext(image.size);

    CGRect contextRect;
    contextRect.origin.x = 0.0f;
    contextRect.origin.y = 0.0f;
    contextRect.size = [image size];
    // Retrieve source image and begin image context
    CGSize itemImageSize = [image size];
    CGPoint itemImagePosition;
    itemImagePosition.x = ceilf((contextRect.size.width - itemImageSize.width) / 2);
    itemImagePosition.y = ceilf((contextRect.size.height - itemImageSize.height) );

    UIGraphicsBeginImageContext(contextRect.size);

    CGContextRef c = UIGraphicsGetCurrentContext();
    // Setup shadow
    // Setup transparency layer and clip to mask
    CGContextBeginTransparencyLayer(c, NULL);
    CGContextScaleCTM(c, 1.0, -1.0);
    CGContextClipToMask(c, CGRectMake(itemImagePosition.x, -itemImagePosition.y, itemImageSize.width, -itemImageSize.height), [image CGImage]);

    CGContextSetFillColorWithColor(c, [UIColor blackColor].CGColor);

    contextRect.size.height = -contextRect.size.height;
    contextRect.size.height -= 15;
    // Fill and end the transparency layer
    CGContextFillRect(c, contextRect);
    CGContextEndTransparencyLayer(c);

    UIImage *img = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return img;
} 
```

所以在实践中这将是：

```
-(UIImage *)silhouetteForImage:(UIImage *)img {
    return [self changeColour:[self changeWhiteColorTransparent:img]];
} 
```

显然你会在后台线程中调用它，以保持一切顺利运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-22T15:35:21.790

玩一下 Quartz composer 和 CoreImage 过滤器可能会对你有所帮助。我相信这段代码应该让你成为一个剪影：

```
- (CGImageRef)silhouetteOfImage:(UIImage *)input
{
  CIContext *ciContext = [CIContext contextWithOptions:nil];
  CIImage *ciInput = [CIImage imageWithCGImage:[input CGImage]];
  CIFilter *filter = [CIFilter filterWithName:@"CIFalseColor"];
  [filter setValue:[CIColor colorWithRed:0.0 green:0.0 blue:0.0 alpha:1.0] forKey:@"inputColor0"];
  [filter setValue:[CIColor colorWithRed:0.0 green:0.0 blue:0.0 alpha:0.0] forKey@"inputColor1"];
  [filter setValue:ciInput forKey:kCIInputImageKey];
  CIImage *outImage = [filter valueForKey:kCIOutputImageKey];
  CGImageRef result = [ciContext createCGImage:outImage fromRect:[ciInput extent]];
  return result;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-23T15:08:39.403

有时，澄清您要达到的目标，然后了解差异可能会有所帮助。你说的是我收集的半透明与透明度。

半透明考虑了 alpha，允许基于图像像素的 alpha 值和在背景缓冲区上执行的评估类型将背景与前景混合。

透明度允许图像在具有硬 alpha 和阈值的部分中被“遮蔽”，并允许通过遮罩看到背景而不进行混合。阈值允许基于 alpha 值的有限混合，直到阈值。

Chromokeying 类似于透明度，因为它允许您将硬编码颜色设置为遮罩颜色（或混合抠像的 alpha 阈值），这允许通过具有该颜色的前景部分看到背景。

如果您的图像格式支持 alpha 值的数据类型或像素格式，则计算起来相当简单：

基于亮度的 Alpha = (R + G + B) / 3；

Alpha基于通道的predence = Max(R,G,B);

alpha 阈值为 127 的混合透明度意味着通过 alpha 测试且值为 127 或更低的每个像素都将被混合，而高于 127 的像素将被硬屏蔽。

我希望这有助于澄清一点，以防万一不清楚。很棒的代码家伙。

# c# - 如何暂停任务执行

> ID：12081258
> 
> 赞同：2
> 
> 时间：2012-08-22T20:53:23.753
> 
> 标签：c#, task-parallel-library

我有这个创建任务的代码：

```
 Task.Factory.StartNew(() =>
                        {
                            ExtractStuff(fileName);
                        }); 
```

有时我需要在里面暂停几秒钟`ExtractStuff`

用普通的可以`Thread.Sleep(1000)`吗？还是有其他方法可以暂停正在运行的任务？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T21:52:57.563

Thread.Sleep 将阻塞运行任务的线程（这并不理想），但只要您不并行运行大量任务，它就可以成为可接受的折衷方案（风险低且对性能没有大问题） . .NET 4.5 对 'async/await' 和 Task.Delay 进行了一些改进，它们将基于计时器隐式设置延续（不需要阻塞正在运行的线程），但这在 4.0 中不直接可用。

你可以用这样的东西自己做同样的事情（没有经过太多测试，所以谨慎使用）：

```
class Program
{
    static void Main(string[] args)
    {
        var fullAction = RunActionsWithDelay(DoSomething, 2000, DoSomethingElse);
        fullAction.Wait();
        Console.WriteLine("Done");
        Console.ReadLine();
    }

    static Task RunActionsWithDelay(Action first, int delay, Action second)
    {
        var delayedCompletion = new TaskCompletionSource<object>();
        var task = Task.Factory.StartNew(DoSomething);
        task.ContinueWith(t =>
        {
            if (t.IsFaulted)
            {
                delayedCompletion.SetException(t.Exception);
            }
            else
            {
                Timer timer = null;
                timer = new Timer(s =>
                {
                    try
                    {
                        DoSomethingElse();
                        delayedCompletion.SetResult(null);
                    }
                    catch (Exception ex)
                    {
                        delayedCompletion.SetException(ex);
                    }
                    finally
                    {
                        timer.Dispose();
                    }
                }, null, delay, Timeout.Infinite);                    
            }

        });
        return delayedCompletion.Task;
    }

    static void DoSomething()
    {
        Console.WriteLine("Something");
    }

    static void DoSomethingElse()
    {
        Console.WriteLine("Something Else");
    }
} 
```

这相当难看，尽管您可以将其封装得比上面的要好一些。它确实消除了“挂起”线程，但是与设置延续相关的额外性能开销。如果你有很多并行任务正在运行并且它们都需要引入延迟，我真的只建议这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T20:58:54.303

我相信这样做很好，但最好使用[TaskCreationOptions.LongRunning](http://msdn.microsoft.com/en-us/library/system.threading.tasks.taskcreationoptions.aspx)。

```
Task.Factory.StartNew(() =>
                    {
                        ExtractStuff(fileName);
                    },TaskCreationOptions.LongRunning); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T21:05:27.987

如果您需要延迟 ExtractStuff 的执行，您可以查看 ThreadPool.RegisterWaitForSingleObject 并与从未设置的 WaitHandle 结合使用。

```
private static WaitHandle NeverSet = new WaitHandle();
private void ExtractStuff(object state)
{
    string filename = state as string;
    ....
}

private void StartExtract(string filename);
{
    ThreadPool.RegisterWaitForSingleObject(NeverSet, ExtractStuff, fileName, seconds * 1000, true);
} 
```

希望这对您的探索有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-11-29T15:16:31.733

您可以使用 Task.Delay(timeout) 并在您的 ExtractStuff 方法中等待。

```
private async string ExtractStuff(fileName)
{
   // Your Code
   await Task.Delay(timeout);
} 
```

# php - 打印目录列表时删除某些项目

> ID：12081259
> 
> 赞同：0
> 
> 时间：2012-08-22T20:53:37.880
> 
> 标签：php, html, directory

我让用户使用打开并读取目录的下拉菜单从目录中选择特定文件。

目录列表中有一些不应该存在的项目。像这样的项目

```
.
..
.com.apple.timemachine.supported
.DS_Store 
```

我将如何去除这些？它们看起来像目录命令或信息或其他东西。用户不应该能够选择这些，即使我认为他们永远不会。

这是我用来读取目录并将项目打印到下拉列表中的代码。

```
<div id='fileOpen'>    
<?
    $pathToImages = 'images/';
    $pathToVolume = '/Volumes/storage/spots_in/';

    if ($handle = opendir($pathToVolume)) {
?>
    <span class='locate'>Locate master file:</span>
    <select id='file' name='file'> 
<?
    while (false !== ($entry = readdir($handle))) {
        echo "<option>";
        echo "$entry\n";
        echo "</option>";
    }
    closedir($handle);
 }
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T20:56:35.140

我用这个

```
if (!preg_match("/^\./","$entry\n")) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T20:55:41.657

```
while (false !== ($entry = readdir($handle))) {
    if (substr($entry, 0, 1) == '.') {
        continue;
    }

    /* Other stuff
} 
```

# ruby-on-rails - 我的复杂路由的控制器规范中没有路由匹配

> ID：12081261
> 
> 赞同：5
> 
> 时间：2012-08-22T20:53:48.177
> 
> 标签：ruby-on-rails, rspec, controller, routes

我有这条路线：

```
resources :items, path: 'feed', only: [:index], defaults: { variant: :feed } 
```

它嵌套在 api 和 v1 命名空间中。（request_source 参数来自 Api 命名空间）。

我想在我的控制器规范中测试索引操作。我试过了：

```
get :feed, community_id: community.id, :request_source=>"api" 
```

不起作用，因此：

```
get :index, community_id: community.id, :request_source=>"api", variant: 'feed' 
```

说：

```
ActionController::RoutingError:
   No route matches {:community_id=>"14", :request_source=>"api", :variant=>"feed", :controller=>"api/v1/items"} 
```

- - - -编辑 - - - - -

我想使用变体将参数发送到控制器的原因是因为我有所有这些路由：

```
 resources :items, path: 'feed',    only: [:index], defaults: { variant: 'feed' }
    resources :items, path: 'popular', only: [:index], defaults: { variant: 'popular' } 
```

然后，在 ItemsController 中，我有一个用于索引操作的前置过滤器“get_items”：

```
def get_items
  if params[:variant] == 'feed'
     ....
elsif params[:variant] == 'popular'
    ....
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T13:21:45.827

看起来问题出在定义`defaults: { variant: :feed }`. 你能否详细说明你试图用它来完成什么。

我创建了一个应用程序来测试你所拥有的，并在`config/routes.rb`

```
namespace :api do
  namespace :v1 do
    resources :items, path: 'feed', only: :index
  end
end 
```

我跑的时候得到了这个`rake routes`。

```
$ rake routes
api_v1_items GET /api/v1/feed(.:format) api/v1/items#index 
```

**更新：**`params`为您可以在操作中使用的路由中未定义的变量设置默认值。

```
params[:variant] ||= 'feed' 
```

**更新 2：**您可以像这样有条件地分配`params[:variant]`前过滤器。

```
class ItemsController < ApplicationController
  before_filter :get_variant

  # or more simply
  # before_filter lambda { params[:variant] ||= 'feed' }

  def index
    render text: params[:variant]
  end

private      

  def get_variant
    # make sure we have a default variant set
    params[:variant] ||= 'feed'
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T13:50:46.783

我必须设置默认变体的一个想法可能是允许路径是动态的。而不是设置`variant`为查询字符串，而是将其用作实际路径本身的一部分。此方法不需要控制器中的前置过滤器。

```
namespace :api do
  namespace :v1 do
    root :to => 'items#index', :defaults => { :variant => 'feed' }
    get ':variant' => 'items#index', :defaults => { :variant => 'feed' }
  end
end 
```

然后你可以访问网站上的不同区域

```
GET "http://localhost:3000/api/v1" # params[:variant] == 'feed'
GET "http://localhost:3000/api/v1/feed" # params[:variant] == 'feed'
GET "http://localhost:3000/api/v1/popular" # params[:variant] == 'popular' 
```

# python - 具有多个 url 路径的 CherryPy MethodDispatcher

> ID：12081265
> 
> 赞同：3
> 
> 时间：2012-08-22T20:54:47.293
> 
> 标签：python, cherrypy

`MethodDispatcher`from是否`CherryPy`处理多个 url 路径？我正在尝试执行类似下面的操作，但是虽然请求可以`/customers`正常工作，但请求`/orders`始终返回“404 没有与给定的 URI 匹配”。

```
class Customers(object):
    exposed = True

    def GET(self):
        return getCustomers()

class Orders(object):
    exposed = True

    def GET(self):
        return getOrders()

class Root(object):
    pass

root = Root()
root.customers = Customers()
root.orders = Orders()

conf = {
    'global': {
        'server.socket_host': '0.0.0.0',
        'server.socket_port': 8000,
    },
    '/': {
        'request.dispatch': cherrypy.dispatch.MethodDispatcher(),
    },
}

cherrypy.quickstart(root, '/', conf) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-18T10:12:56.227

我想我解决了，尝试使用：

```
cherrypy.tree.mount(Root())

cherrypy.tree.mount(Customers(), '/customers',
    {'/':
        {'request.dispatch': cherrypy.dispatch.MethodDispatcher()}
    }
)
cherrypy.tree.mount(Orders(), '/orders',
    {'/':
        {'request.dispatch': cherrypy.dispatch.MethodDispatcher()}
    }
)

cherrypy.engine.start()
cherrypy.engine.block() 
```

似乎为了在`Root`类中公开方法，您必须使用 annotation `@cherrypy.expose`。设置`exposed = True`可能不起作用。

请参阅我对我自己的问题[Combining REST dispatcher with default one in a single CherryPy app 的](https://stackoverflow.com/questions/21536057/combining-rest-dispatcher-with-the-default-one-in-a-single-cherrypy-app/22475983#22475983)回答。

# parameter-passing - 通过或不通过引用？

> ID：12081266
> 
> 赞同：0
> 
> 时间：2012-08-22T20:54:55.690
> 
> 标签：parameter-passing, pass-by-reference, pass-by-value, d

我正在写一个`MyClassCollection`. 这是一个数组，将存储大量`MyClass`. 该数组声明如下：`MyClass[] myClassInstances;`通过`Add(MyClass ins)`方法我存储`ins`在`myClassInstances`.

我的问题是：我应该通过引用传递它吗？我会得到更好的表现吗？我真的不需要它的副本。我更喜欢使用实例化的类（对吗？）；或者它是一种无用的优化努力（也许只是内存？）。

这是我当前的代码：

```
class foo { }

class foocollection {
  private foo[] foo_instances;
  public @property foo[] data() { return foo_instances; }
  public void add(foo f) {
     ++foo_instances.length;
      foo_instances[$-1] = f;
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T23:51:14.553

你所拥有的甚至不是法律代码。你不能增加一个数组。如果要追加`f`到`foo_instances`，请使用追加运算符：

```
foo_instances ~= f; 
```

至于通过引用传递，我不太明白你在问什么。*你*想通过引用传递什么？论据`add`？IE

```
public void add(foo f) {...} 
```

对比

```
public void add(ref foo f) {...} 
```

`ref`是没有意义的。您没有更改传入的类引用，因此没有理由使用`ref`. 那只会令人困惑。虽然您需要 100% 确定性能影响是什么，但如果通过`ref`速度更快，我会感到非常惊讶。类在传递给函数时不会被复制。它们是引用类型。所以，它是被复制的引用——而不是对象。它基本上是一个指针（尽管我相信它确实有一些额外的类型内容，因此它比指针略多）。复制它们很便宜。您不必担心将类传递给函数的成本。如果您使用的是*结构*，它可能会有所不同，因为结构通常是值类型并且在堆栈上，除非你明确地将它们放在堆上，但对于类来说，这不是问题。

无论如何，如果您有性能问题，要做的第一件事就是分析您的代码。确实有些事情显然比其他事情效率更高或更低，但是在您看到编译器实际执行的操作之前，您通常无法确定，结果通常与您的预期相反。因此，如果您想了解性能，请分析您的代码。

# c++ - 访问类的全局实例

> ID：12081268
> 
> 赞同：0
> 
> 时间：2012-08-22T20:54:57.683
> 
> 标签：c++, visual-studio-2008

我仍在努力弄清楚 C++。我一直在尝试做的是创建某些类的全局实例（控制输入的类存储在全局变量中，控制图形的类存储在全局变量中，控制整个游戏系统的类存储在变量中，等等。 ) 到目前为止，它运行良好。但现在我需要提供来自系统控制器的输入控制器数据的实例。

在我的 game.h 文件（运行主循环和其他一些东西的那个）中，我已经将系统定义为这样

《全球游戏系统》

在game.cpp中，我可以访问一个名为“keyCodes”的变量

在我的 input.cpp 文件中，我包含了 game.h 和 global.h（它不能仅与 game.h 一起使用，所以我想我也会尝试 global.h），我可以看到 gameSystem 的实例，但我无法访问它的 keyCodes 变量。

知道如何解决这个问题吗？当我用 AS3 和 Ruby 编程时，这种事情对我有用。我喜欢它保持东西的模块化方式。所以我真的很想在这个xx中以同样的方式做

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T21:29:28.137

很难准确地猜出你在做什么。从我的角度来看，我了解您在一个文件中有一个全局变量，并希望在另一个文件中访问它。如果是这种情况，您必须执行以下操作（我将以 an 为例，`int`但任何其他类型都是相同的。

创建一个`File1.h`头文件，在其中告诉世界存在一个`int`名为的全局变量，`MyGlobalInt`其中包含以下行：

```
// This is File1.h
extern int MyGlobalInt; 
```

这只是宣布变量存在。它**没有**声明变量。要声明变量，请在 a 中执行`File1.cpp`：

```
// This is File1.cpp
#include "File1.h"
int MyGlobalInt; 
```

File1.cpp 声明变量。现在它可以在任何包含`File1.h`. 例如在`File2.cpp`：

```
// This is File2.cpp
#include "File1.h"
void ChangeGlobalInt(int newValue)
{
  MyGlobalInt = newValue;
} 
```

在你的情况下，你应该把

```
extern Whatever_type_you_are_using keyCodes; 
```

在文件中`game.h`。文件`game.cpp`应`#include "game.h"`有效声明`keyCodes`：

```
#include "game.h"
Whatever_type_you_are_using keyCodes; 
```

现在，每个包含“game.h”的文件都可以使用`keyCodes`.

# android - Android：saveInstanceState 调用不是太频繁了吗？

> ID：12081270
> 
> 赞同：0
> 
> 时间：2012-08-22T20:54:59.590
> 
> 标签：android, android-activity

在我的活动中，当我移动到下一个活动时会调用 saveInstanceState（例如：活动 A 启动活动 B 并调用活动 A 的 saveInstanceState） - 这是正常行为吗？据我了解（来自文档），当操作系统关闭进程以回收资源时调用 saveInstanceState 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T21:27:57.240

> 据我了解（来自文档），当操作系统关闭进程以回收资源时调用 saveInstanceState 。

不会。在任何 Activity 转换中都会调用它，Android 可能会想要销毁您的 Activity，但又想要重新创建该 Activity 并让它看起来从未被销毁过。常见的情况是配置更改（例如，旋转屏幕），但在其他情况下也会出现。

特别是Android不能等到“OS关闭进程来回收资源”，因为到那时，Android可能会急于获取这些资源。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T20:57:40.940

每当您的活动从屏幕上消失时，将保存状态以供进一步表示。假设您执行屏幕方向更改。您可能知道，每当发生这种情况时，视图都会完全重新创建。Android 保持事物状态的方式是在销毁和重新创建之前保存状态。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T21:11:38.393

`onPause()`打电话太频繁了...

`onPause()`当活动进入后台时作为活动生命周期的一部分调用，如您在中所见：

*   [http://developer.android.com/reference/android/app/Activity.html](http://developer.android.com/reference/android/app/Activity.html)

`saveinstancestate()`调用以在被杀死之前从活动中检索每个实例的状态，以便可以在 onCreate(Bundle) 或 onRestoreInstanceState(Bundle) 中恢复状态（此方法填充的 Bundle 将传递给两者）。

# c# - 为什么 TabControl 的左右边框不一样？

> ID：12081275
> 
> 赞同：0
> 
> 时间：2012-08-22T20:55:16.497
> 
> 标签：c#, winforms, tabcontrol

我将 TabControl 对象添加到我的表单中，这就是我所拥有的（上下边框）： ![在此处输入图像描述](../Images/12f0534267f60af99913294d39f1040e.png)

看起来不错，但请查看下边框： ![在此处输入图像描述](../Images/b3da7f443ffd76031ef1421fbc021706.png)

右边框同样的问题，怎么回事，有没有机会解决这个问题？

# ruby - 将逗号分隔的字符串转换为 ruby 中的哈希

> ID：12081279
> 
> 赞同：3
> 
> 时间：2012-08-22T20:55:44.993
> 
> 标签：ruby

在 Ruby 中，我需要像这样转换一个字符串：

```
"keyA,valueA,keyB,valueB" 
```

变成这样的哈希：

```
{"keyA"=>"valueA", "keyB"=>"valueB"} 
```

我很确定这将涉及`each_slice`方法和可能的 enumerable `inject()`，如“ [ruby string to hash conversion](https://stackoverflow.com/questions/7836928/ruby-string-to-hash-conversion) ”中所述。

但我不知道如何将这些组件组合在一起。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-22T21:34:22.007

```
s = 'keyA,valueA,keyB,valueB'

Hash[*s.split(',')]
#=> { 'keyA' => 'valueA', 'keyB' => 'valueB' } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T21:02:21.540

试试这个：

```
s = "keyA,valueA,keyB,valueB"
Hash[*s.split(",").each_slice(2).collect{ |k,v| [k,v] }.flatten] 
```

# c++ - 从 UNIX FORTRAN 控制台应用程序调用 Windows C++ DLL

> ID：12081287
> 
> 赞同：0
> 
> 时间：2012-08-22T20:56:38.770
> 
> 标签：c++, unix, dll, fortran, wine

我正在寻找一种从 UNIX FORTRAN 控制台应用程序调用 Windows 构建的 x86 DLL 的方法。我读过 Winelib 可能会提供帮助，但我以前从未使用过它。

谁能给我一个好的开始方向？

# javascript - 在 if else 语句中调用变量

> ID：12081289
> 
> 赞同：-2
> 
> 时间：2012-08-22T20:57:00.263
> 
> 标签：javascript, jquery, variables

我有一个关于如何在函数的 if/else 语句中调用变量的快速问题。我的想法是这样的。

```
var variable = {
    anything
}

var variable2 = {
    anything
}

var options = function () {
    if($(this).hasClass(".itemname")){
        return variable
    } else {
        return variable2
    }
};

$("#items li").click(options); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T21:01:17.393

如果我理解得很好，你会要求这样的东西：

```
var variable = function () {
    alert(1);
}

var variable2 = function () {
    alert(2);
}

var options = function () {
    if($(this).hasClass("itemname")){
        return variable();
    } else {
        return variable2();
    }
};

$("#items li").click(options); 
```

[http://jsfiddle.net/pd3FV/](http://jsfiddle.net/pd3FV/)

# c# - 使用streamwriter C#的绝对路径

> ID：12081291
> 
> 赞同：3
> 
> 时间：2012-08-22T20:57:01.513
> 
> 标签：c#, streamwriter, absolute-path

我正在尝试使用 streamwriter 在我的文档文件夹中创建一个文本文件，但是当我实际使用完整路径时，它认为我使用的是相对路径。

我正在尝试使用以下路径创建文件：“%HOMEPATH%/My Documents/”，但它会将其视为相对路径。

任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-22T21:00:08.813

您应该使用[`Environment.GetFolderPath`](http://msdn.microsoft.com/en-us/library/14tx8hby.aspx)- 在这种情况下，这将完全避免您进行硬编码`My Documents`：

```
string docs = Environment.GetFolderPath(Environment.SpecialFolder.MyDocuments); 
```

如果你想获得一个与之相关的目录名，你应该使用[`Path.Combine`](http://msdn.microsoft.com/en-us/library/system.io.path.combine.aspx)：

```
string fooDocsDirectory = Path.Combine(docs, "foo"); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-22T20:59:57.097

在 .Net 中获取用户的 Documents 文件夹的正确方法是使用[`Environment.GetFolderPath()`](http://msdn.microsoft.com/en-us/library/14tx8hby.aspx)并传入`Environment.SpecialFolder.MyDocuments`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-22T20:59:53.400

使用[System.Environment.SpecialFolder.MyDocuments](http://msdn.microsoft.com/en-us/library/system.environment.specialfolder.aspx)来访问我的文档路径，而不是尝试使用系统变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T21:00:50.703

我会使用一些 API 解析环境变量，然后将包含绝对路径（“C:.....”）的路径输入到[StreamWriter](http://msdn.microsoft.com/en-us/library/fysy0a4b.aspx)

您可以按照 David Staratton 的建议使用[Environment.SpecialFolder Enumeration 。](http://msdn.microsoft.com/en-us/library/system.environment.specialfolder.aspx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T21:03:52.613

从命令提示符检查环境变量。我在我的机器上看到以下内容 -

家庭驱动器=C：

HOMEPATH=\用户\foo

因此，请尝试 %HOMEDRIVE%%HOMEPATH% 来解决您的问题

# directed-acyclic-graphs - 有向无环字图构造

> ID：12081293
> 
> 赞同：0
> 
> 时间：2012-08-22T20:57:07.640
> 
> 标签：directed-acyclic-graphs

假设我的 DAWG 中有 3 个单词：do、dot、bot 我将拥有这个：

[http://imageshack.us/photo/my-images/703/dawgp.png/](http://imageshack.us/photo/my-images/703/dawgp.png/)

这张图告诉我们“bo”也是一个词。这确实不是。如果只有路径来自“d”而不是“b”，则节点“o”是 EOW

我显然很想念，但我现在知道是什么了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T16:55:01.697

好的，我想我更好地了解您要做什么以及 DAG 如何适合您的工作。如果您想要一个图表来表示包含单词“do”、“dot”和“bot”的字典，那么您将拥有边；

```
.->d->o'->t'
.->b->o->t' 
```

在哪里 '。' 表示图的根，分支是完全独立的，即边“d->o”指向与“b->o”中提到的“o”不同的出现。通过试图让两条边都指向同一出现的“o”，你已经使图形格式不正确。

请注意，在我的“图表”中，我使用了一个 ' 符号来表示一个字母可以通过从词根读取到该符号来作为单词的结尾。如果以后有时间，我会更好地绘制图表。

# facebook - 摆脱 facebook 共享/喜欢的 URL 查询（通过 mod_rewrite）

> ID：12081298
> 
> 赞同：3
> 
> 时间：2012-08-22T20:57:24.757
> 
> 标签：facebook, mod-rewrite, facebook-like

facebook 中的 URL 共享如下：

```
www.mydomain.com 
```

变成

```
http://www.mydomain.com/?fb_action_ids=423308397714910&fb_action_types=og.likes&fb_source=timeline_og&action_object_map=%7B%22423308397714910%22%3A10151847670865082%7D&action_type_map=%7B%22423308397714910%22%3A%22og.likes%22%7D&action_ref_map=%5B%5D 
```

可不是闹着玩的。这是 - afaik - 链接共享的标准行为。问题是：此查询永久更改。所以分享的 URL 总是以 0 个赞开头。

我的问题是：如何摆脱这个？

更新：这仅在特殊情况下发生，例如当您的服务器上的 mod_rewrites 将[http://lalala.com](http://lalala.com)重定向到[http://www.lalala.com](http://www.lalala.com) - 这似乎激怒了 facebook 重定向器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T00:24:15.683

你不需要摆脱它，只要确保

1.  您的`og:url`元标记和/或规范元标记指向正确的 URL。
2.  您的喜欢按钮已`href`定义并且它们指向正确的 URL（没有那些无关的参数）。

如果有人点击 Facebook 的链接，然后复制/粘贴 URL（包括`fb_action_ids`,etc 参数）并将其分享回 Facebook，Facebook 的爬虫将跟随`og:url`或规范元标记并从该 URL 获取标签，这不会有参考参数。

如果有人单击链接并最终到达您的页面，并且您正在呈现一个赞按钮，前提是您没有在赞按钮上省略 href 参数，则实际 URL 的赞计数将可见，赞按钮将是对于`href`指向的任何 URL（可能会排除推荐参数）

# javascript - 如何在新窗口中打开缩略图

> ID：12081300
> 
> 赞同：-2
> 
> 时间：2012-08-22T20:57:42.657
> 
> 标签：javascript

我目前正在尝试用缩略图填充一个表格，该缩略图指向我的服务器中的图像，并在单击时在其自己的窗口中打开每个图像。

我可以用

```
echo '<td align="center"><a href="' . $big . $newFile . '" target="_blank"><img src="' . $images . $file . '" /></a></td>'; 
```

这可行，但我希望调整新窗口的大小。我决定使用 javascript，并且我有一个名为 showImg 的脚本来显示我的新窗口。缩略图显示，但是当我将鼠标悬停在缩略图上时，我无法使用 onclick 功能。有什么线索吗？

下面的代码是我正在尝试使用的

```
echo '<td align="center"><img src="' . $images . $file .      '"onclick="showImg(this.src,400,400,"' . $big . $newFile . '");"></td>'; 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T21:06:22.497

行情问题。整个 onclick 和函数参数都不能使用双引号。

将 PHP 更改为：

```
echo '<td align="center"><img thumb="' . $big . $newFile . '" src="' . $images . $file .      '" onclick="showImg(this, 400, 400);"></td>'; 
```

然后在 JavaScript 中从元素本身获取图像源和缩略图：

```
function showImg(img, width, height) {
    var src = img.src;
    var thumb = img.getAttribute("thumb");
    //window.open(...)
} 
```

# derby - Apache Derby 错误

> ID：12081302
> 
> 赞同：0
> 
> 时间：2012-08-22T20:58:02.497
> 
> 标签：derby

嘿，我正在尝试自学如何使用 Apache Derby 使用 JDBC。在教程中它说：编译示例应用程序

编译示例应用程序，如下所示：

javac SimpleApp.java

您可以放心地忽略任何可能弹出的编译警告。运行示例应用程序

像这样运行示例应用程序：

java SimpleApp

所以我打开我的命令提示符并输入这个，我得到一个错误：错误：找不到或加载 SimpleApp.java

有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T22:53:46.630

您应该输入示例还是下载示例？如果是这样，您需要将该文件放在硬盘驱动器上的目录中，如果 Java 文件不在包中，则在编译之前 cd 到该目录。

如果它在一个包中，那么您需要在编译之前创建一个镜像包结构的目录结构。

# javascript - 滚动时显示 div 并更改行为

> ID：12081303
> 
> 赞同：0
> 
> 时间：2012-08-22T20:58:03.040
> 
> 标签：javascript, jquery, css, html, javascript-events

有时我已经看到了这一点，但我不知道如何实现它或如何搜索它。这就是为什么我想解释它的作用：

假设我们有一个图像，一个箭头，它指向下方，当你点击它时，页面会向下滚动。当我现在向下滚动并到达指定点时，箭头指向上方并将我带回页面顶部。

感谢您的任何回复=）

编辑：我找到了一个例子。查看底部的小箭头以及到达页面末尾时它的变化情况。rorymcilroy.com

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T21:03:22.820

你可以使用[jQuery ScrollTo 插件](http://archive.plugins.jquery.com/project/ScrollTo)

这是一个[演示](http://demos.flesler.com/jquery/scrollTo/)

这是您想要的 jsfiddle 演示（使用 scrollTo 插件）

[jsfiddle 演示](http://jsfiddle.net/Mk2ar/7/)

的JavaScript：

```
$('#upDownArrow').click(function() {
    if($(this).hasClass("arrowUp")) {
        $.scrollTo( '#top', 500); // scroll to top      
        $(this).removeClass("arrowUp");
        $(this).addClass("arrowDown");
    } else {
        $.scrollTo( '#bottom', 500); // scroll to bottom
        $(this).removeClass("arrowDown");
        $(this).addClass("arrowUp");     
    }
}); 
```

的HTML：

```
<div id="#top"></div>
<div id="upDownArrow" class="arrowDown"><div class="arrow"></div></div>

<!-- add your content here -->

<div id="#bottom"></div> 
```

的CSS：

```
#upDownArrow {
    position: fixed;
    top: 50px;
    right: 50px;
    width: 30px;
    height: 30px;
    background: #33B;
}
#upDownArrow:hover {
    background: #99F;
    cursor: pointer;
}

#upDownArrow.arrowDown:hover .arrow {
    border-top-color: #99F;   
}

#upDownArrow.arrowUp:hover .arrow {
    border-bottom-color: #99F;   
}

#upDownArrow.arrowUp .arrow {
    position: absolute;
    border: 15px solid transparent;
    border-bottom: 15px solid #33B;
    top: -30px;
}

#upDownArrow.arrowDown .arrow {
    position: absolute;
    border: 15px solid transparent;
    border-top: 15px solid #33B;
    bottom: -30px;
} 
```

如果你想要一个上一个/下一个按钮，你可能必须创建一个项目/id/位置列表（查看 scrollTo 插件的文档以查看可以使用哪些参数），应该像这样逐步完成：

```
var steps = ["top","part1","part2","bottom"]; 
```

然后创建 2 个按钮，一个用于向上，一个用于向下，然后使用：

```
var currentPosition = 0;

$("#buttonUp").click(function() {
    if(currentPosition == 0) {
        currentPosition = steps.length-1;
    } else {
        currentPosition--;
    }
    $.scrollTo('#'+steps[currentPosition],500);        
});

$("#buttonDown").click(function() {
    if(currentPosition == steps.length-1) {
        currentPosition = 0;
    } else {
        currentPosition++;
    }
    $.scrollTo('#'+steps[currentPosition],500);        
}); 
```

这是一个带有向上和向下按钮的演示：

[带有上下的jsfiddle演示](http://jsfiddle.net/Mk2ar/12/)

[jsfiddle 上下全屏演示](http://jsfiddle.net/Mk2ar/12/embedded/result/)

这里是另一个演示，您的“按钮更改”滚动；）

[jsfiddle 按钮更改演示](http://jsfiddle.net/Mk2ar/15/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T21:09:27.763

[这](http://jsfiddle.net/azizpunjani/Y6jn4/9/)是我前一阵子写的。我想这就是你要找的。

```
$('a').on('click', function (event) {
    event.preventDefault();//stop the browser from jumping to the anchor
    var href  = $(this).attr('href'),  // get id of target div from link e.g #one #two 
        oset  = $(href).offset().top;   // get the offset top of the div
    $('html, body').stop().animate({
        scrollTop : oset  // animate the scrollTop property to the offset of target div
    }, 1000, function () {   
        location.hash = href; // change the hash to target div  
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T21:06:45.223

如果我理解正确，[这个问题](https://stackoverflow.com/questions/4801655/how-to-go-to-specific-to-element-on-page)和你的一样。

# javascript - 如何将 SC.Record 的 SC.Record.toMany() 数据绑定到 ListView？

> ID：12081305
> 
> 赞同：0
> 
> 时间：2012-08-22T20:58:16.323
> 
> 标签：javascript, web, sproutcore

我正在尝试使用 Sproutcore 呈现 UI，其中我有一个列表列表。有一个垂直的数据列表，其中每个关联的项目都有自己的项目列表。我已经根据我对 Sproutcore 的了解设置了我认为合适的模型。

模型：

```
App.VerticalData = SC.Record.extend({
  someField: SC.Record.attr(Boolean),
  associatedListOfData: SC.Record.toMany("App.HorizontalData", {
    inverse: "vertical",
    isMaster: YES
  })
});

App.HorizontalData = SC.Record.extend({
  someForeignKeyField: SC.Record.attr(Number),
  vertical: SC.Record.toOne("App.VerticalData", {
    inverse: "associatedListOfData",
    isMaster: NO
  }),
}); 
```

我在垂直列表的 ListItemView 中添加了一个子视图，并修改了子类，以便它将水平列表中的项目布局......嗯......水平。我遇到的问题是，我似乎能够从 toMany() 关系中获取数据以绑定到此水平列表的唯一方法是对垂直列表中的每个项目执行以下操作。

```
horizontalListView.set('content', App.store.find(SC.Query.local(App.HorizontalData, {
  conditions: 'someForeignKeyField = ' + keyValueOfVerticalItem)
}))); 
```

这是痛苦的，可悲的缓慢。我不明白为什么我似乎不能只将计算属性的结果用于当前垂直列表项的 toMany() 字段。有人可以在这里提供一些指导吗？也许我错过了一些愚蠢的东西。

如果我尝试直接访问该属性，这是我得到的结果：

```
Object
SproutCore18001994610927067697: "sc1271"
__sc_super__: Object
_bindings: Array[0]
_kvo_cacheable: true
_kvo_changeLevel: 0
_kvo_changes: null
_kvo_cloned: Object
_kvo_content_observed_keys: Object
_kvo_dependents: Object
_kvo_revision: 2
_object_toString: "SC.ManyArray:sc1271"
_observableInited: true
_observers: Array[0]
_prevStoreIds: Array[167]
_properties: Array[15]
_records: null
bindings: Array[0]
manyAttribute: Object
outlets: Array[0]
propertyName: "associatedListOfData"
propertyRevision: 2
record: Object
recordType: App.HorizontalData
__proto__: Object 
```

我不知道这看起来*是否正确*。所以我有可能在我用于测试数据的 FIXTURES 中仍然没有正确定义一些东西。我在 associatedListOfData 字段中输入的信息是与 Horizo​​ntalData 表中元素的 GUID 对齐的数字数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T19:29:03.480

经过更多测试和实验后，我认为问题可能与 App.store.dataHashes 不包含相关记录的值有关。这显然必须手动填充关联以协调记录，并且不会在关联中构造 SC.ManyArray 时自动填充存储。我不知道这是否是 Sproutcore 中的一个错误，或者它是否是预期的行为。

我能够通过使用 App.Horizo​​ntalData 表上的查询填充此属性来解决此问题，该表返回了我为我的 FIXTURE 生成的所有记录。如果商店有可用的散列数据，则使用作为 ListView 内容返回的 SC.ManyArray 可以按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T21:56:03.743

我认为您的记录定义可能有问题。如果您暂时忘记了列表视图，然后打开控制台，您可以抓取一条`App.VerticalData`记录并询问它是什么`associatedListOfData`吗？

例子：

```
var vertical_id = 1;
var vertical = App.store.find('App.VerticalData', vertical_id);

console.log(vertical.get('associatedListOfData')); 
```

如果打印不正确，那么您就知道记录本身有问题，而不是视图有问题。

我将不得不在这里猜测一下，但是由于您在创建记录时没有指定密钥，我敢打赌 SC 根本无法将两者联系在一起。除非您的数据库键是`associatedListOfData`and `vertical`，否则它可能不起作用。

如果这不能解决问题，您能否更新您的代码以显示它的实际编写方式，并可能向我们展示您的服务器发送的 JSON？

# java - 一个接口，多个听众

> ID：12081308
> 
> 赞同：0
> 
> 时间：2012-08-22T20:58:22.150
> 
> 标签：java, android, events, interface, listener

我有一个如下界面：

```
public interface OnLoadDrawableListener {
    public abstract void onGetDrawable();
} 
```

我有一个名为“Content”的类，它实现了：

```
private OnLoadDrawableListener dListener = null;

public void setOnLoadDrawableListener(OnLoadDrawableListener nListener) {
    dListener = nListener;
} 
```

然后，我想要以下内容：

```
content.setOnLoadDrawableListener(new OnLoadDrawableListener() {

            public void onGetDrawable() {
                imageResultItem.setImageDrawable(content.getImageDrawable()) ;
            }
        }); 
```

可以在许多类或对象中实现。我已经实现了，但监听器只在最后一个实现中工作

总之感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T21:01:11.030

你不能把它改成：

```
private List<OnLoadDrawableListener> dListeners = new ArrayList<OnLoadDrawableListener>();

public void addOnLoadDrawableListener(OnLoadDrawableListener nListener) {
    dListeners.add(nListener);
} 
```

然后在您想要通知您的听众时遍历列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T21:04:53.397

您不需要一组侦听器。只要您创建一个新的侦听器并将其附加到不同的对象，它就应该可以正常工作。

这里的问题是您可能只有一个对象“内容”的实例。正如您在代码中设置的那样，“内容”的每个实例都有自己的侦听器。为什么在同一个对象中需要多个相同类型的侦听器？

# python - 用于更改系统日期和时间的 Python 模块

> ID：12081310
> 
> 赞同：31
> 
> 时间：2012-08-22T20:58:22.330
> 
> 标签：python, date, time

如何在 Python 中更改系统日期、时间、时区？有没有可用的模块？

1.  我不想执行任何系统命令
2.  我想要一个通用的解决方案，它应该适用于 Unix 和 Windows。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-09-06T04:12:25.577

```
import sys
import datetime

time_tuple = ( 2012, # Year
                  9, # Month
                  6, # Day
                  0, # Hour
                 38, # Minute
                  0, # Second
                  0, # Millisecond
              )

def _win_set_time(time_tuple):
    import pywin32
    # http://timgolden.me.uk/pywin32-docs/win32api__SetSystemTime_meth.html
    # pywin32.SetSystemTime(year, month , dayOfWeek , day , hour , minute , second , millseconds )
    dayOfWeek = datetime.datetime(time_tuple).isocalendar()[2]
    pywin32.SetSystemTime( time_tuple[:2] + (dayOfWeek,) + time_tuple[2:])

def _linux_set_time(time_tuple):
    import ctypes
    import ctypes.util
    import time

    # /usr/include/linux/time.h:
    #
    # define CLOCK_REALTIME                     0
    CLOCK_REALTIME = 0

    # /usr/include/time.h
    #
    # struct timespec
    #  {
    #    __time_t tv_sec;            /* Seconds.  */
    #    long int tv_nsec;           /* Nanoseconds.  */
    #  };
    class timespec(ctypes.Structure):
        _fields_ = [("tv_sec", ctypes.c_long),
                    ("tv_nsec", ctypes.c_long)]

    librt = ctypes.CDLL(ctypes.util.find_library("rt"))

    ts = timespec()
    ts.tv_sec = int( time.mktime( datetime.datetime( *time_tuple[:6]).timetuple() ) )
    ts.tv_nsec = time_tuple[6] * 1000000 # Millisecond to nanosecond

    # http://linux.die.net/man/3/clock_settime
    librt.clock_settime(CLOCK_REALTIME, ctypes.byref(ts))

if sys.platform=='linux2':
    _linux_set_time(time_tuple)

elif  sys.platform=='win32':
    _win_set_time(time_tuple) 
```

我没有 Windows 机器，所以我没有在 Windows 上测试它......但你明白了。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-10-24T14:18:09.310

tMC 的答案似乎很棒。但是，它不适合我。我发现它需要一些更新，适用于 Linux 和 Windows + python 3。这是我更新的模块：

```
import sys
from _datetime import datetime

time_tuple = (2012,  # Year
              9,  # Month
              6,  # Day
              0,  # Hour
              38,  # Minute
              0,  # Second
              0,  # Millisecond
              )

def _win_set_time(time_tuple):
    import win32api
    dayOfWeek = datetime(*time_tuple).isocalendar()[2]
    t = time_tuple[:2] + (dayOfWeek,) + time_tuple[2:]
    win32api.SetSystemTime(*t)

def _linux_set_time(time_tuple):
    import subprocess
    import shlex

    time_string = datetime(*time_tuple).isoformat()

    subprocess.call(shlex.split("timedatectl set-ntp false"))  # May be necessary
    subprocess.call(shlex.split("sudo date -s '%s'" % time_string))
    subprocess.call(shlex.split("sudo hwclock -w"))

if sys.platform == 'linux2' or sys.platform == 'linux':
    _linux_set_time(time_tuple)

elif sys.platform == 'win32':
    _win_set_time(time_tuple) 
```

对于 Linux，请阅读以下答案：[Set the hardware clock in Python?](https://stackoverflow.com/questions/2193964/set-the-hardware-clock-in-python)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-10-27T07:45:21.263

我不得不稍微修改一下tMC的答案的win32版本：

```
def _win_set_time(time_tuple):
    import win32api
    dayOfWeek = datetime(*time_tuple).isocalendar()[2]
    t = time_tuple[:2] + (dayOfWeek,) + time_tuple[2:]
    win32api.SetSystemTime(*t) 
```

例如。当我根据旧时间服务器（时间协议，RFC868）使用它来设置时间时，我是这样操作的：

```
data = s.recv(4)
remote_time = (ord(data[0])<<24) + (ord(data[1])<<16) + (ord(data[2])<<8) + ord(data[3])
remote_time -= 2208988800
_win_set_time(time.gmtime(remote_time)[0:6] + (0,)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-24T18:52:37.467

这对我有用

*   自动转换为 UTC 时间
*   将字符串转换为日期时间
*   使用日期时间输入
*   它更具可读性

```
def _win_set_time(datetime_obj: datetime):  
    import win32api  
    # http://timgolden.me.uk/pywin32-docs/win32api__SetSystemTime_meth.html  
    # win32api.SetSystemTime(year, month , dayOfWeek , day , hour , minute , second , millisecond )  
    utc_datetime = datetime_obj.astimezone().astimezone(timezone.utc).replace(tzinfo=None)
    day_of_week = utc_datetime.isocalendar()[2]
    win32api.SetSystemTime(utc_datetime.year, utc_datetime.month, day_of_week, 
    utc_datetime.day, utc_datetime.hour, utc_datetime.minute, utc_datetime.second,
    int(utc_datetime.microsecond / 1000))

real_time_str = "2020 12 24 13 11 10 321"  
real_time = datetime.strptime(real_time_str, '%Y %m %d %H %M %S %f')  
_win_set_time(real_time) 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-22T22:30:10.837

现在我认为这是最好的解决方案

```
import sys,os
def change(s):
    if s == 1:os.system('date -s "2 OCT 2006 18:00:00"')#don't forget to change it , i've used date command for linux 
    elif s == 2:
        try:
          import pywin32
        except ImportError:
          print 'pywin32 module is missing'
          sys.exit(1)
        pywin32.SetSystemTime(year, month , dayOfWeek , day , hour , minute , second , millseconds )# fill all Parameters with int numbers
    else:print 'wrong param'
def check_os():
    if sys.platform=='linux2':change(1)
    elif  sys.platform=='win32':change(2)
    else:print 'unknown system' 
```

目前是临时解决方案，希望对您有所帮助，也可以看看

[http://timgolden.me.uk/pywin32-docs/win32api__SetSystemTime_meth.html](http://timgolden.me.uk/pywin32-docs/win32api__SetSystemTime_meth.html)

[http://timgolden.me.uk/pywin32-docs/win32api__SetLocalTime_meth.html](http://timgolden.me.uk/pywin32-docs/win32api__SetLocalTime_meth.html)

# opengl - 当调用 glUniform4f 来设置 float3 变量时会发生什么？

> ID：12081311
> 
> 赞同：0
> 
> 时间：2012-08-22T20:58:23.757
> 
> 标签：opengl

OpenGL会自动截断它还是这是一个错误？

我有一段讨厌的 OpenGL 代码，它似乎在程序中设置了一个 float4x3 数组，方法是使用 glUniform4fv 和一个包含 float4 值的大数组（即每行 4 个浮点数而不是 3 个），它似乎可以工作。也就是说，OpenGL 只将 3 个值复制到矩阵的每一行并跳过第 4 个值。可以假设这将始终有效吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T21:34:23.383

GLSL 规范对此非常明确：`glUniform*`调用的大小和类型必须与着色器中声明的大小和类型*完全*匹配（采样器和布尔值除外）。因此，如果您调用`glUniform4fv`，您必须设置类型的单个变量`vec4`或类型`count`数组变量中的条目数组`vec4`。

# c# - 这个编译错误是什么意思？？该脚本应该适用于发送 EMAIL

> ID：12081315
> 
> 赞同：-1
> 
> 时间：2012-08-22T20:58:49.973
> 
> 标签：c#, asp.net, asp-classic

我从一个网站下载了这个源代码，该网站有一个 DEMO 表单，通过下面的这个 SCRIPT 发送电子邮件。但是，当我在我的 arvixe 主机中添加它来为我的联系表单页面发送电子邮件时，我在下面收到这个编译错误

```
Server Error in '/' Application.

Compilation Error

Description: An error occurred during the compilation of a resource required to service this request. Please review the following specific error details and modify your source code appropriately. 

Compiler Error Message: BC30451: 'strHost' is not declared. It may be inaccessible due to its protection level.

Source Error:

Line 3:  
Line 4:     ' Change this to your own SMTP server
Line 5:     strHost = "localhost"
Line 6:     
Line 7:     if Request("Send") <> "" Then

Source File: E:\HostingSpaces\dma\myuniversalcare.com\wwwroot\contact-us\default.aspx    Line: 5 
```

这是脚本：

```
<%
    Session.CodePage = 65001

    ' Change this to your own SMTP server
    strHost = "localhost"

    if Request("Send") <> "" Then

        Set objMail = Server.CreateObject("Persits.MailSender")

        objMail.Host = strHost

        objMail.From = "info@persits.com"           ' From address
        objMail.FromName = "AspEmail Live Demo"     ' optional

        strToAddress = Trim(Request("txtTo"))

        ' To prevent header injection attack
        strToAddress = Replace( strToAddress, " ", "" )
        strToAddress = Replace( strToAddress, chr(13), "" )
        strToAddress = Replace( strToAddress, chr(10), "" )

        ' To address, 2nd argument omitted.
        objMail.AddAddress strToAddress

        ' Message subject
        objMail.Subject = objMail.EncodeHeader( Request("txtSubject"), "UTF-8" )

        ' Enable Unicode
        objMail.ContentTransferEncoding = "Quoted-Printable"
        objMail.CharSet = "UTF-8"

        ' Message body
        objMail.Body = Request("txtBody")

        ' Include a disclaimer
        objMail.Body = objMail.Body & chr(13) & chr(10) & chr(13) & chr(10) & "-----------------------------------" & chr(13) & chr(10) & chr(13) & chr(10) & "This message was generated by the AspEmail live demo on-line application. Persits Software, Inc. is not responsible for its content."

        On Error Resume Next
        objMail.Send ' Send message

        If Err = 0 then     
            txtMsg = "<font color=green>Success! Message sent to " & strToAddress + ".</font>"
        Else        
            txtMsg = "<font color=red>Error occurred: " + err.Description + "</font>"
        End If

    End If
%>

<HTML>
<HEAD>

<META HTTP-EQUIV="Content-Type" content="text/html; charset=utf-8">

<TITLE>AspEmail Live Demo: Unicode-enabled Message Sending</TITLE>
</HEAD>
<BODY style="font-family: arial narrow; font-size: 10pt">

<h2>AspEmail Live Demo: Unicode-enabled Message Sending</h2>

<P> 

<FORM METHOD="POST" ACTION="demo_simple.asp">

<TABLE CELLSPACING=2 CELLPADDING=2 BGCOLOR="#E0E0E0" style="border: 1pt black solid; border-collapse: collapse">
    <TR>
        <TD>To:</TD>
        <TD><INPUT TYPE="TEXT" size="40" NAME="txtTo" VALUE="<% = Server.HtmlEncode(Request("txtTo")) %>"></TD>
    </TR>
    <TR>
        <TD>Subject:</TD>
        <TD><INPUT TYPE="TEXT" size="40" NAME="txtSubject" VALUE="<% = Server.HtmlEncode(Request("txtSubject")) %>"></TD>
    </TR>
    <TR>
        <TD valign="top">Body:</TD>
        <TD><TEXTAREA NAME="txtBody" Rows="10" Cols="40"><% = Server.HtmlEncode(Request("txtBody")) %></TEXTAREA></TD>
    </TR>
    <TR>
        <TD COLSPAN=2><INPUT TYPE="SUBMIT" NAME="Send" VALUE="Send Message"></TD>
    </TR>

</TABLE>

<P>

<% = txtMsg %>

</FORM>

</BODY>
</HTML> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T21:04:06.800

该脚本不是为显式模式制作的，它使用变量而不首先声明它们。

为其使用的变量添加声明：

```
Dim strHost, objMail, strToAddress, txtMsg 
```

# objective-c - ASIHTTPRequest 错误 URL 错误

> ID：12081321
> 
> 赞同：0
> 
> 时间：2012-08-22T20:59:13.823
> 
> 标签：objective-c, ios, xml, asihttprequest

我一直在寻找这个问题一段时间。我正在尝试使用 ASIHTTPRequest 更新 xml 节点的值。这段代码应该发送一个请求，但它总是返回我：

```
Error Domain=ASIHTTPRequestErrorDomain Code=5 "Unable to create request (bad url?)" 
```

所以我试着像这个网站上的许多答案和其他人提出的那样对我的 URL 进行编码，但到目前为止没有任何效果......我试过这个：

```
stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding 
```

以及这个：

```
CFURLCreateStringByAddingPercentEscapes 
```

我也试过这个：

```
NSString *urlString = @"http://192.168.123.143:50003/Courbe.xml"; 
ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:[NSURL urlWithString:urlString]]; 
```

而且我总是遇到同样的错误。这是我试图运行的代码：

```
NSString *url = @"http://192.168.123.143:50003/Courbe.xml"; 
ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];
[request setRequestMethod:@"POST"];
[request addPostValue:@"111" forKey:@"tempset"];
[request setDelegate:self];
[request startSynchronous]; 
```

这些是我的委托方法：

```
- (void)requestFinished:(ASIHTTPRequest *)request
- (void)requestFailed:(ASIHTTPRequest *)request 
```

任何人都可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T21:10:24.600

`requestWithURL:`需要一个 NSURL 作为参数，但您传递的是一个 NSString。

尝试使用这个更正的代码：

```
NSString *urlString = @"http://192.168.123.143:50003/Courbe.xml"; 
ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:[NSURL urlWithString:urlString]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T21:07:27.090

你在哪里初始化`url`你使用的 `[ASIFormDataRequest requestWithURL:url]`？

# knockout.js - Knockoutjs observableArray 没有绑定

> ID：12081323
> 
> 赞同：1
> 
> 时间：2012-08-22T20:59:27.647
> 
> 标签：knockout.js

我正在尝试使用我的 init 数组并使用自定义函数（如 (http://knockoutjs.com/documentation/fn.html)）对其进行过滤，而不是创建一个新数组，我只是覆盖旧数组。我正在点击 PO 。在内存中它正在工作，但一旦完成它就不会绑定到 DOM。这是因为我正在重写数组而不是从现有数组中删除项目吗？

[http://jsfiddle.net/chadrickm/39xsC/](http://jsfiddle.net/chadrickm/39xsC/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T21:30:24.127

这不起作用，因为绑定将在这一行中断：

```
self.materialTrans = self.materialTrans.filterByProperty("PO", item.PO); 
```

Knockout observables 不能被覆盖。如果要更新它们的值，则需要将新值作为参数传入。绑定到旧函数，您通过重新分配它来删除它。使这项工作的一种方法是这样做：

```
self.materialTrans(self.materialTrans.filterByProperty("PO", item.PO)); 
```

并将您的函数更改为仅返回一个数组：

```
ko.observableArray.fn.filterByProperty = function(propName, matchValue) {

        var allItems = this(),
            matchingItems = [];
        for (var i = 0; i < allItems.length; i++) {
            var current = allItems[i];
            if (ko.utils.unwrapObservable(current[propName]) === matchValue) matchingItems.push(current);
        }
        return matchingItems;
}; 
```

这是更新的[小提琴](http://jsfiddle.net/39xsC/43/)。如果我误解了你的目标，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T21:34:48.477

我不知道这是否是唯一的问题，但是要设置 observableArray 的值，请执行以下操作：

```
self.materialTrans(x); 
```

而不是这个：

```
self.materialTrans = x; 
```

其中 x 是新的过滤数组，当然。

# c# - 未从数据库加载导航属性

> ID：12081325
> 
> 赞同：0
> 
> 时间：2012-08-22T20:59:30.877
> 
> 标签：c#, .net, entity-framework, ef-code-first

我在从 EF 4.3 Code First 数据库加载实体时遇到问题。我已将我的代码简化为这个工作示例代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Data.Entity;
using System.ComponentModel.DataAnnotations;
using System.Data.Entity.Infrastructure;

namespace CodeFirst {
    class Program {
        static void Main(string[] args) {
            Database.SetInitializer(new DropCreateDatabaseAlways<Context>());
            Database.DefaultConnectionFactory = new SqlCeConnectionFactory("System.Data.SqlServerCe.4.0");

            using (Context context = new Context()) { 
                A a = new A { B = new B { Foo = 1 } };
                context.As.Add(a);
                context.SaveChanges();
                Print(context); // B has ID=1, Foo=1
            }

            using (Context context = new Context()) { 
                Print(context); // B is null
            }

            Console.ReadLine();
        }

        public static void Print(Context context) {
            A a = context.As.Single();
            Console.WriteLine("A: ID=" + a.Id);
            if (a.B == null) {
                Console.WriteLine("B: null");
            }
            else { 
                Console.WriteLine("B: ID=" + a.B.Id + ", Foo=" + a.B.Foo);
            }
        }
    }

    class Context : DbContext {
        public DbSet<A> As { get; set; }
    }

    class A {
        public int Id { get; set; }
        public B B { get; set; }
    }

    class B {
        public int Id { get; set; }
        public int Foo { get; set; }
    }
} 
```

输出是：

```
A: ID=1
B: ID=1, Foo=1
A: ID=1
B: null 
```

在这个示例代码中，由于某种原因，当我检索`A`一个 new`Context`时，它的子属性`B`是`null`. 如果我设置断点并在`B`is处连接到数据库`null`，一切看起来都井井有条：

```
Table: A
--------
Id    B_Id
1     1

Table: B
--------
Id    Foo
1     1 
```

我只是想学习 Code First，所以我在这里可能有一个严重的误解，但这对我来说似乎很奇怪。谁能解释这种行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T01:33:25.910

到目前为止提供的两个答案都不必要地麻烦。

只需将您的实体类公开并将您的导航属性声明为`virtual`，EF 将延迟加载它们（即按需）

当`DbContext`您访问导航属性时，必须打开（即未释放）才能使其正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T21:05:20.763

你需要包括他们。

你需要做这样的事情：

```
var aWithNavProperties = As.Where(a=>a.Id==id).Include(a=>a.B).Single(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T21:08:52.590

默认情况下，实体框架仅在明确告知这样做时才连接表（这就是导航属性通常 mao 到的连接）。您可以使用以下[`Include()`](http://msdn.microsoft.com/en-us/library/bb738708.aspx)方法：

```
var a = context.As.Include("B").Single(); 
```

您还可以在加载实体本身后加载属性。这是延迟加载模式的一个实现（应该小心处理，它可以是一个真正的 PITA）

```
var a = context.As.Single();
// some other code
if (!a.BReference.IsLoaded())
    a.BReference.Load(); 
```

# javascript - 在Firefox中使用jquery更改img src

> ID：12081327
> 
> 赞同：1
> 
> 时间：2012-08-22T20:59:36.213
> 
> 标签：javascript, jquery, html, firefox

我创建了一个简单的图片库，中间有一张大图片，下面是缩略图：

```
<img class="primary-image" src="example.jpeg">
<div class="thumbnails"> 
    <img class="thumbnail" src="red.jpeg">
    <img class="thumbnail" src="blue.jpeg">
    <img class="thumbnail" src="green.jpeg">
</div> 
```

我在缩略图上有以下点击处理程序：

```
$('.thumbnail').click(function() {
    var src = $(this).attr('src');
    $('.primary-image').attr('src', src);
}); 
```

这在 chrome 中运行良好，但在 Firefox 中，图像从上到下加载缓慢，给出了一个不应该存在的丑陋“过渡”。

到底是怎么回事？

更新

我现在注意到正在发生的事情是浏览器不显示新图像。而且它只发生在特定的图片上：

*   如果我快速向下和向上滚动，图片会发生变化。（点击缩略图后）
*   如果整个图片画布可见，而我什么都不做，则之前的图片仍然存在，并且不会显示新图片。（点击缩略图后）
*   如果我切换应用程序并返回到 Firefox，新画面就在那里。（点击缩略图后）
*   如果我双击缩略图，图片会完全改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T21:03:59.983

您是否尝试过*预加载*图像？也许图像*缓存*在 Chrome 中，但没有缓存在 FireFox 中。

StackOverflow 上有人发布了一些代码来轻松预加载图像。请看一下[使用 jQuery 预加载图像](https://stackoverflow.com/questions/476679/preloading-images-with-jquery)

# jquery - jquery 对话框在使用 autoOpen 时有效，但在使用 .click 时无效

> ID：12081328
> 
> 赞同：2
> 
> 时间：2012-08-22T20:59:37.987
> 
> 标签：jquery, jquery-ui, dialog, jquery-dialog

```
<script>
$(function() {
    $( "#dialogwindow" ).dialog({
        height: 140,
        width: 400,
        zIndex: 999,
        autoOpen: false,
        modal: true
    });

    $( ".loginbtn" ).click(function() {
        $("#dialogwindow").dialog("open");
        return false;
    });
});
</script> 
```

与：

```
<a class="loginbtn" href="#">Login</a> 
```

和 div：

```
<div id="dialogwindow">
<p>Hello world</p>
</div> 
```

如果对话框具有 autoOpen: true 并且没有 .click 事件，则它可以工作。添加 .click 事件后，单击链接不会执行任何操作。

编辑：测试站点位于[http://kinnill.com/dev/raymondjames](http://kinnill.com/dev/raymondjames)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T04:07:05.997

根据[Wirey](https://stackoverflow.com/users/1385672/wirey)的评论，我将错误脚本的“#header a”字符串更改为“#navlinks a”。该对话框现在可以正常运行。

# variables - 如何在 Lua 中自动创建变量？

> ID：12081332
> 
> 赞同：0
> 
> 时间：2012-08-22T20:59:49.280
> 
> 标签：variables, loops, automation, lua

在开始之前，我会说我是 Lua 的初学者，所以可能不知道所有正确的术语，但我会尽力解释我所追求的。

我有一个`data`包含其他表的表 ( )。首次创建`data`时，它可以包含任意数量的表（我希望这在 1 到 50 之间）。

我想将每个表分配给它自己的变量。

如果我知道有多少张桌子，那么这很容易使用`table1 = data[1]; table2 = data[2]`等等。

我已经对 进行了计数，`data`以便知道条目的数量，所以我想要做的是自动创建变量，给它们命名并为其分配相应的表。

因此，假设`data`包含 10 个表。`table1`然后我想要创建名为,`table2`等的变量`table3`。`table1`应该是`data[1]`，`table2`应该是`data[2]`等等。

我确定我应该创建一个循环，并且每次都创建一个`count=count+1`附加到变量的数字。

我遇到的问题是我不知道如何创建一个名为`'table'+count`( `table1`) 的变量。

我如何将2个一起加入？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-22T21:32:51.083

创建具有构造名称的全局变量的方法是更新全局表`_G`

```
_G['table'..count] = data[count] 
```

例如，

```
Lua 5.1.4  Copyright (C) 1994-2008 Lua.org, PUC-Rio
> count = 3
> _G['table'..count] = 17
> = table3
17
> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-22T21:19:28.110

你不能，很少有编程语言支持这一点，那些通过反射来支持的语言。

最简单的方法是保留你的桌子！您的所有表都已存储在那里，您可以使用 data[x] 轻松引用特定表。当您这样做时，您可以仅使用它们的索引来引用您的表。

# java - 通过 Java Web 应用程序查找在 WebLogic 服务器上运行的所有应用程序的名称

> ID：12081341
> 
> 赞同：1
> 
> 时间：2012-08-22T21:00:10.993
> 
> 标签：java, jakarta-ee, web-applications, weblogic, wlst

假设我有 4 个应用程序（app1、app2、app3、app4）在 WebLogic Server 上运行。

我正在用 Java 编写一个新的 Web 应用程序，它将在同一台服务器上运行，该应用程序的目的基本上是列出在同一台服务器上运行的所有 Web 应用程序。所以，它应该列出（app1，app2，app3，app4）

现在我知道我可以使用 WLST 脚本来收集服务器上所有应用程序的名称，但我需要在我的 java 应用程序中访问这些名称。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T17:46:09.357

您将不得不使用[Java 管理扩展](http://www.oracle.com/technetwork/java/javase/tech/javamanagement-140525.html)(JMX)。

JMX 是一种 Java 技术，它定义了用于实现管理和监视应用程序以及面向服务的网络的标准。这些资源由称为 MBean (ManagedBeans) 的对象表示。

检查这个[例子](http://middlewaremagic.com/weblogic/?p=497)。

# c# - C# WriteFile() 在 USB 驱动器的 242 扇区停止写入

> ID：12081343
> 
> 赞同：9
> 
> 时间：2012-08-22T21:00:21.543
> 
> 标签：c#, file-io, deviceiocontrol

我编写了以下代码来将 0xFF 写入我的 USB 存储设备上的所有字节。由于某种原因，`WriteFile()`调用在扇区 242 处开始出错。我在两个单独的 USB 存储设备上完成了此操作，然后在十六进制编辑器中检查了这些设备。扇区 242 似乎是 FAT16 格式化设备上文件分配表的开始，以及 NTFS 设备上引导区的开始。我确信它在这些确切位置出错并非巧合，但是我不知道如何改变这种行为。`HRESULT`失败时我收到的是`WriteFile`-2147024891，即`E_ACCESSDENIED`. 有谁知道可能导致问题的原因？

注意：如果您要在本地系统上运行此代码，请非常小心，因为我已经硬编码了我的 USB 设备的物理设备 ID。请务必使用您尝试写入的设备更新 deviceId 变量。你不想破坏你的硬盘。

```
 public enum EMoveMethod : uint
    {
        Begin = 0,
        Current = 1,
        End = 2
    }

    [DllImport("Kernel32.dll", SetLastError = true, CharSet = CharSet.Auto)]
    static extern uint SetFilePointer([In] SafeFileHandle hFile, [In] long lDistanceToMove, [Out] out int lpDistanceToMoveHigh, [In] EMoveMethod dwMoveMethod);

    [DllImport("kernel32.dll", SetLastError = true, CharSet = CharSet.Unicode)]
    static extern SafeFileHandle CreateFile(string lpFileName, uint dwDesiredAccess, uint dwShareMode, IntPtr lpSecurityAttributes, uint dwCreationDisposition, uint dwFlagsAndAttributes, IntPtr hTemplateFile);

    [DllImport("kernel32", SetLastError = true)]
    internal extern static int ReadFile(SafeFileHandle handle, byte[] bytes, int numBytesToRead, out int numBytesRead, IntPtr overlapped_MustBeZero);

    [DllImport("kernel32.dll", SetLastError = true)]
    internal extern static int WriteFile(SafeFileHandle handle, byte[] bytes, int numBytesToWrite, out int numBytesWritten, IntPtr overlapped_MustBeZero);

    [DllImport("kernel32.dll", ExactSpelling = true, SetLastError = true)]
    private static extern bool DeviceIoControl(SafeFileHandle hDevice, uint dwIoControlCode, byte[] lpInBuffer, int nInBufferSize, byte[] lpOutBuffer, int nOutBufferSize, out int lpBytesReturned, IntPtr lpOverlapped);

    [DllImport("kernel32.dll", ExactSpelling = true, SetLastError = true)]
    private static extern bool CloseHandle(SafeFileHandle handle);

public void wipeDisk()
{
        const uint OPEN_EXISTING = 3;
        const uint GENERIC_WRITE = (0x40000000);
        const uint FSCTL_LOCK_VOLUME = 0x00090018;
        const uint FSCTL_UNLOCK_VOLUME = 0x0009001c;
        const uint FSCTL_DISMOUNT_VOLUME = 0x00090020;

        bool success = false;
        int intOut;
        string deviceId = @"\\.\PHYSICALDRIVE2";
        long DiskSize = 2056320000;

        SafeFileHandle diskHandle = CreateFile(deviceId, GENERIC_WRITE, 0, IntPtr.Zero, OPEN_EXISTING, 0, IntPtr.Zero);
        if (diskHandle.IsInvalid)
        {
            Console.WriteLine(deviceId + " open error.");
            return;
        }

        Console.WriteLine(deviceId + " " + Marshal.GetHRForLastWin32Error().ToString() + ": opened.");

        success = DeviceIoControl(diskHandle, FSCTL_LOCK_VOLUME, null, 0, null, 0, out intOut, IntPtr.Zero);
        if (!success)
        {
            Console.WriteLine(deviceId + " lock error.");
            CloseHandle(diskHandle);
            return;
        }

        Console.WriteLine(deviceId + " " + Marshal.GetHRForLastWin32Error().ToString() + ": locked.");

        success = DeviceIoControl(diskHandle, FSCTL_DISMOUNT_VOLUME, null, 0, null, 0, out intOut, IntPtr.Zero);
        if (!success)
        {
            Console.WriteLine(deviceId + " " + Marshal.GetHRForLastWin32Error().ToString() + ": dismount error.");
            DeviceIoControl(diskHandle, FSCTL_UNLOCK_VOLUME, null, 0, null, 0, out intOut, IntPtr.Zero);
            CloseHandle(diskHandle);
            return;
        }

        Console.WriteLine(deviceId + " " + Marshal.GetHRForLastWin32Error().ToString() + ": unmounted.");

        int numBytesPerSector = 512;
        long numTotalSectors = DiskSize / 512;

        byte[] junkBytes = new byte[512];
        for (int x = 0; x < 512; x++)
        {
            junkBytes[x] = 0xFF;
        }

        for (long sectorNum = 0; sectorNum < numTotalSectors; sectorNum++)
        {
            int numBytesWritten = 0;
            int moveToHigh;

            uint rvalsfp = SetFilePointer(diskHandle, sectorNum * numBytesPerSector, out moveToHigh, EMoveMethod.Begin);

            Console.WriteLine("File pointer set " + Marshal.GetHRForLastWin32Error().ToString() + ": " + (sectorNum * numBytesPerSector).ToString());

            int rval = WriteFile(diskHandle, junkBytes, junkBytes.Length, out numBytesWritten, IntPtr.Zero);

            if (numBytesWritten != junkBytes.Length)
            {
                Console.WriteLine("Write error on track " + sectorNum.ToString() + " from " + (sectorNum * numBytesPerSector).ToString() + "-" + moveToHigh.ToString() + " " + Marshal.GetHRForLastWin32Error().ToString() + ": Only " + numBytesWritten.ToString() + "/" + junkBytes.Length.ToString() + " bytes written.");
                break;
            }
            else
            {
                Console.WriteLine("Write success " + Marshal.GetHRForLastWin32Error().ToString() + ": " + numBytesWritten.ToString() + "/" + junkBytes.Length.ToString() + " bytes written.");
            }
        }

        success = DeviceIoControl(diskHandle, FSCTL_UNLOCK_VOLUME, null, 0, null, 0, out intOut, IntPtr.Zero);
        if (success)
        {
            Console.WriteLine(deviceId + " " + Marshal.GetHRForLastWin32Error().ToString() + ": unlocked.");
        }
        else
        {
            Console.WriteLine(deviceId + " " + Marshal.GetHRForLastWin32Error().ToString() + ": unlock error: " + Marshal.GetHRForLastWin32Error().ToString());
        }

        success = CloseHandle(diskHandle);
        if (success)
        {
            Console.WriteLine(deviceId + " " + Marshal.GetHRForLastWin32Error().ToString() + ": handle closed.");
        }
        else
        {
            Console.WriteLine(deviceId + " " + Marshal.GetHRForLastWin32Error().ToString() + ": close handle error: " + Marshal.GetHRForLastWin32Error().ToString());
        }
} 
```

**编辑/更新**

在使用第三方工具对 USB 设备进行低级别擦除后，我能够成功地使其工作。驱动器完全归零后，我能够成功写入设备。一旦识别出有效的 fat 或 ntfs 文件系统以及使用

```
 const uint FSCTL_LOCK_VOLUME = 0x00090018;
    const uint FSCTL_DISMOUNT_VOLUME = 0x00090020; 
```

配对`DeviceIoControl`似乎不会覆盖设备上的锁定窗口。

有谁知道如何在`DeviceIoControl`具有有效文件系统的驱动器上成功锁定 Windows 中的可移动 USB 设备？

我已经使用了几个第三方工具来做我想做的事情并且它们成功地工作。我知道这是可能的，但我阅读的所有 MSDN 文档都没有帮助解决问题。

**编辑/更新 2**

这取自[https://web.archive.org/web/20130507212546/http://msdn.microsoft.com/en-us/library/ff551353.aspx](https://web.archive.org/web/20130507212546/http://msdn.microsoft.com/en-us/library/ff551353.aspx)

> 应用程序需要锁定卷、卸载卷或两者，才能发出 DASD I/O。这是 Windows Vista 的新功能，旨在解决潜在的恶意技术。
> 
> 1.  文件系统将阻止对磁盘保留部分的所有写操作。在这种情况下，这些保留部分包括 MBR 和两个 FAT 区域。要阻止这些区域，您需要通过发送 FSCTL_LOCK_VOLUME 来锁定卷。您必须在执行实际写入操作的同一卷句柄上发出此结构。如果有打开的文件句柄，此请求可能会失败。在这种情况下，应用程序可以通过发出 FSCTL_DISMOUNT_VOLUME 来强制卸载文件系统。但是，在文件句柄关闭之前，不会真正卸载卷。在此之前，应用程序可以通过使用当前打开的相同文件句柄继续发出 DASD I/O。
>     
>     
> 2.  在文件系统已知的卷空间之外有一个扩展区域，写入操作将被阻止。要允许对该区域的写操作，您必须在卷句柄上发出 FSCTL_ALLOW_EXTENDED_DASD_IO。
>     
>     
> 
> 您可以使用 Win32 API 例程 DeviceIoControl 来发出所有以前的 FSCTS。

我相信这正是我们在上面的代码中实现的，但它似乎没有正常工作。我们得到了一个句柄并且正在锁定和卸载设备，所以我们应该能够正确地写入受保护的区域？

**编辑/更新 3**

好的，这是当前打开磁盘和卷的顺序。锁定、卸载等方法只是按照我们认为错误的顺序工作。

```
SafeFileHandle volumeHandle = CreateFile("\\.\E:",...);
LockVolume(volumeHandle);
DismountVolume(volumeHandle);
SafeFileHandle diskHandle = CreateFile("\\.\PHYSICALDRIVE1"...);
WriteStuff(diskHandle);
//Fails...
UnlockVolume(volumeHandle);
CloseVolume(volumeHandle);
CloseDisk(diskHandle); 
```

我仍然得到相同的结果，它仅在磁盘被丢弃时才有效。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T17:14:38.773

*这里磁盘*和*驱动器*之间存在混淆。

如果您想完全访问**磁盘**（这是您正在使用的情况`\\.\PHYSICALDRIVE`），您必须锁定所有已**安装的卷**，它们基本上**是物理磁盘的所有****分区（即*驱动器***） 。

使用该模式获取每个已**安装卷**（它是驱动器，而不是物理磁盘）的句柄，而不是使用`FSCTL_LOCK_VOLUME`返回的句柄。`CreateFile("\\.\PHYSICALDRIVE"...)`**`string.Replace("\\\\.\\{0}:", DriveLetter)`**

 **您可以使用`IOCTL_DISK_GET_DRIVE_LAYOUT`.

* * *

编辑：

来自[MSDN](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365747%28v=vs.85%29.aspx)：

> 如果以下条件之一为真，则磁盘句柄上的写入将成功：
> 
> 要写入的扇区不在卷的范围内。
> 
> 要写入的扇区属于已安装的卷，但您已使用 FSCTL_LOCK_VOLUME 或 FSCTL_DISMOUNT_VOLUME 显式锁定或卸载该卷。
> 
> 要写入的扇区属于除 RAW 之外没有挂载文件系统的卷。

所以基本上，你应该做的是：

*   获取每个卷的句柄
*   在每个卷上使用`FSCTL_LOCK_VOLUME` **或。** `FSCTL_DISMOUNT_VOLUME`如果卷中没有文件正在使用（即任何进程都没有打开任何文件的句柄），`FSCTL_LOCK_VOLUME`就足够了
*   获取物理磁盘的句柄
*   写入物理磁盘
*   关闭两个手柄。关闭音量手柄将解除锁定。

还要确保您使用管理员权限（提升的进程）运行您的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T15:21:28.787

我猜你正在使用`Windows Vista`或更高版本。操作系统将阻止任何直接写入这些扇区的尝试，因此您需要先进行锁定。更多关于这里：

[http://msdn.microsoft.com/en-us/library/ff551353.aspx](http://msdn.microsoft.com/en-us/library/ff551353.aspx)

也只是签入所以提出了这个帖子：

[CreateFile：直接对原始磁盘进行写入操作“访问被拒绝” - Vista，Win7](https://stackoverflow.com/questions/8694713/createfile-direct-write-operation-to-raw-disk-access-is-denied-vista-win7)

那里的调查信息可能会有所帮助，HTH ...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T16:27:29.050

**编辑**

我已编辑此答案以反映 ken2k 的建议。

ken2k 的建议确实解决了我遇到的问题。我不确定为什么我之前使用该方法的尝试没有成功，但是我刚刚重新访问/调整了我的代码，并且该方法似乎确实可以正常工作。

以下是我用来解决此问题的步骤：

*   获取物理磁盘的句柄
*   获取物理磁盘上每个逻辑驱动器的句柄
*   锁定物理磁盘上的每个驱动器
*   卸载物理磁盘上的每个驱动器
*   锁定物理磁盘（可选）
*   卸载物理磁盘（可选）
*   使用物理磁盘句柄将整个物理磁盘归零
*   解锁每个逻辑驱动器
*   解锁物理磁盘（仅当您选择锁定磁盘时）
*   关闭逻辑驱动器句柄
*   关闭物理磁盘句柄

注意：如果您希望在不终止程序的情况下执行背靠背磁盘操作，并且您已经使用了该`FSCTL_DISMOUNT_VOLUME`功能，则需要使用类似于以下内容的“重新挂载”磁盘：

```
ManagementObjectSearcher searcher = new ManagementObjectSearcher("root\\CIMV2", "SELECT * FROM Win32_DiskDrive"); 
```

或者

```
System.IO.DriveInfo.GetDrives(); 
```

当您尝试锁定每个单独的逻辑驱动器时，要将逻辑驱动器 ID 映射到物理磁盘 ID，请使用以下代码将逻辑驱动器标签链接到物理磁盘标签：

```
 List<string> driveLetters = new List<string>();
    string deviceId = @"\\.\PHYSICALDRIVE1";
    string queryString = "ASSOCIATORS OF {Win32_DiskDrive.DeviceID='" + deviceId + "'} WHERE AssocClass = Win32_DiskDriveToDiskPartition";
    ManagementObjectSearcher diskSearcher = new ManagementObjectSearcher("root\\CIMV2", queryString);
    ManagementObjectCollection diskMoc = diskSearcher.Get();
    foreach (ManagementObject diskMo in diskMoc)
    {
        queryString = "ASSOCIATORS OF {Win32_DiskPartition.DeviceID='" + diskMo["DeviceID"] + "'} WHERE AssocClass = Win32_LogicalDiskToPartition";
        ManagementObjectSearcher driveSearcher = new ManagementObjectSearcher("root\\CIMV2", queryString);

        ManagementObjectCollection driveMoc = driveSearcher.Get();
        foreach (ManagementObject driveMo in driveMoc)
        {
            driveLetters.Add("\\\\.\\" + driveMo["DeviceID"].ToString());
        }
    } 
```

因此，例如，如果物理磁盘标签是`\\.\PHYSICALDRIVE1`并且它包含一个带有驱动器号“E”的逻辑驱动器，则上述代码将映射`\\.\E:`到`\\.\PHYSICALDRIVE1`.

根据 ken2k 的建议，此映射也可以使用该`IOCTL_DISK_GET_DRIVE_LAYOUT`功能完成。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-28T07:20:50.293

对于这个命令，我确实运行并检查了它。 `SafeFileHandle diskHandle = CreateFile(deviceId, GENERIC_WRITE, 0/*Here*/ , IntPtr.Zero, OPEN_EXISTING, 0, IntPtr.Zero);`

通过平均 FILE_SHARE_READ |FILE_SHARE_WRITE (1|2) 将 GENERIC_WRITE 参数的第一个零下一个更改为 3 以获得良好的结果。我将其和设备 ID 更改为相同的驱动器名称 \.\f: 用于我的 USB 驱动器名称。最后我用这个代码替换了： `SafeFileHandle diskHandle = CreateFile(deviceId, GENERIC_WRITE, 3 , IntPtr.Zero, OPEN_EXISTING, 0, IntPtr.Zero);` 祝你好运

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-29T05:44:53.263

我测试跟随代码，需要修复我的 USB 磁盘以隐藏 rootkit 病毒。所以写这段代码：

```
using Microsoft.Win32.SafeHandles;
using System;
using System.Collections.Generic;
using System.IO;
using System.Management;
using System.Runtime.InteropServices;
using System.Windows.Forms;

namespace RootKeyremover
{
    public partial class Form1 : Form
    {
        public enum EMoveMethod : uint
        {
            Begin = 0,
            Current = 1,
            End = 2
        }

        [DllImport("Kernel32.dll", SetLastError = true, CharSet = CharSet.Auto)]
        static extern uint SetFilePointer([In] SafeFileHandle hFile, [In] long lDistanceToMove, [Out] out int lpDistanceToMoveHigh, [In] EMoveMethod dwMoveMethod);

        [DllImport("kernel32.dll", SetLastError = true, CharSet = CharSet.Unicode)]
        static extern SafeFileHandle CreateFile(string lpFileName, uint dwDesiredAccess, uint dwShareMode, IntPtr lpSecurityAttributes, uint dwCreationDisposition, uint dwFlagsAndAttributes, IntPtr hTemplateFile);

        [DllImport("kernel32", SetLastError = true)]
        internal extern static int ReadFile(SafeFileHandle handle, byte[] bytes, int numBytesToRead, out int numBytesRead, IntPtr overlapped_MustBeZero);

        [DllImport("kernel32.dll", SetLastError = true)]
        internal extern static int WriteFile(SafeFileHandle handle, byte[] bytes, int numBytesToWrite, out int numBytesWritten, IntPtr overlapped_MustBeZero);

        [DllImport("kernel32.dll", ExactSpelling = true, SetLastError = true)]
        private static extern bool DeviceIoControl(SafeFileHandle hDevice, uint dwIoControlCode, byte[] lpInBuffer, int nInBufferSize, byte[] lpOutBuffer, int nOutBufferSize, out int lpBytesReturned, IntPtr lpOverlapped);

        [DllImport("kernel32.dll", ExactSpelling = true, SetLastError = true)]
        private static extern bool CloseHandle(SafeFileHandle handle);

        public Form1()
        {
            InitializeComponent();
        }

        public void wipeDisk()
        {
            const short FILE_ATTRIBUTE_NORMAL = 0x80;
            const short INVALID_HANDLE_VALUE = -1;
            const uint GENERIC_READ = 0x80000000;
            const uint OPEN_EXISTING = 3;
            const uint GENERIC_WRITE = (0x40000000);
            const uint FSCTL_LOCK_VOLUME = 0x00090018;
            const uint FSCTL_UNLOCK_VOLUME = 0x0009001c;
            const uint FSCTL_DISMOUNT_VOLUME = 0x00090020;

            bool success = false;
            int intOut;
            //@"\\.\PHYSICALDRIVE2"
            string deviceId = @"\\.\" + comboBox1.Text.Substring(0,2);
            long DiskSize = 2056320000;

            SafeFileHandle diskHandle = CreateFile(deviceId, GENERIC_READ | GENERIC_WRITE, 3, IntPtr.Zero, OPEN_EXISTING, 0, IntPtr.Zero);
            if (diskHandle.IsInvalid)
            {
                Console.WriteLine(deviceId + " open error.");
                return;
            }

            Console.WriteLine(deviceId + " " + Marshal.GetHRForLastWin32Error().ToString() + ": opened.");

            success = DeviceIoControl(diskHandle, FSCTL_LOCK_VOLUME, null, 0, null, 0, out intOut, IntPtr.Zero);
            if (!success)
            {
                Console.WriteLine(deviceId + " lock error.");
                CloseHandle(diskHandle);
                return;
            }

            Console.WriteLine(deviceId + " " + Marshal.GetHRForLastWin32Error().ToString() + ": locked.");

            success = DeviceIoControl(diskHandle, FSCTL_DISMOUNT_VOLUME, null, 0, null, 0, out intOut, IntPtr.Zero);
            if (!success)
            {
                Console.WriteLine(deviceId + " " + Marshal.GetHRForLastWin32Error().ToString() + ": dismount error.");
                DeviceIoControl(diskHandle, FSCTL_UNLOCK_VOLUME, null, 0, null, 0, out intOut, IntPtr.Zero);
                CloseHandle(diskHandle);
                return;
            }

            Console.WriteLine(deviceId + " " + Marshal.GetHRForLastWin32Error().ToString() + ": unmounted.");

            int numBytesPerSector = 512;
            long numTotalSectors = DiskSize / 512;

            byte[] junkBytes = new byte[512];

            int k =0 ;
            IntPtr l= (IntPtr)0 ;
            SetFilePointer(diskHandle, 0, out k, EMoveMethod.Begin);
            ReadFile(diskHandle, junkBytes, (int)512,out k,l);
            //3e 17e 1f1-1fb
            //for (int x = 0x3e; x < 0x17e; x++)
            //{
            //    junkBytes[x] = 0x00;
            //}
            //for (int x = 0x1f1; x < 0x1fb; x++)
            //{
            //    junkBytes[x] = 0x00;
            //}
            for (int x = 0x1e1; x < 0x1ee; x++)
            {
                junkBytes[x] = 0x00;
            }

            //diskHandle = CreateFile(deviceId, GENERIC_WRITE, 3, IntPtr.Zero, OPEN_EXISTING, 0, IntPtr.Zero);
            for (long sectorNum = 0; sectorNum < 1; sectorNum++)
            {
                int numBytesWritten = 0;
                int moveToHigh;

                uint rvalsfp = SetFilePointer(diskHandle, sectorNum * numBytesPerSector, out moveToHigh, EMoveMethod.Begin);

                Console.WriteLine("File pointer set " + Marshal.GetHRForLastWin32Error().ToString() + ": " + (sectorNum * numBytesPerSector).ToString());

                int rval = WriteFile(diskHandle, junkBytes, junkBytes.Length, out numBytesWritten, IntPtr.Zero);

                if (numBytesWritten != junkBytes.Length)
                {
                    Console.WriteLine("Write error on track " + sectorNum.ToString() + " from " + (sectorNum * numBytesPerSector).ToString() + "-" + moveToHigh.ToString() + " " + Marshal.GetHRForLastWin32Error().ToString() + ": Only " + numBytesWritten.ToString() + "/" + junkBytes.Length.ToString() + " bytes written.");
                    break;
                }
                else
                {
                    Console.WriteLine("Write success " + Marshal.GetHRForLastWin32Error().ToString() + ": " + numBytesWritten.ToString() + "/" + junkBytes.Length.ToString() + " bytes written.");
                }
            }

            success = DeviceIoControl(diskHandle, FSCTL_UNLOCK_VOLUME, null, 0, null, 0, out intOut, IntPtr.Zero);
            if (success)
            {
                Console.WriteLine(deviceId + " " + Marshal.GetHRForLastWin32Error().ToString() + ": unlocked.");
            }
            else
            {
                Console.WriteLine(deviceId + " " + Marshal.GetHRForLastWin32Error().ToString() + ": unlock error: " + Marshal.GetHRForLastWin32Error().ToString());
            }

            success = CloseHandle(diskHandle);
            if (success)
            {
                Console.WriteLine(deviceId + " " + Marshal.GetHRForLastWin32Error().ToString() + ": handle closed.");
            }
            else
            {
                Console.WriteLine(deviceId + " " + Marshal.GetHRForLastWin32Error().ToString() + ": close handle error: " + Marshal.GetHRForLastWin32Error().ToString());
            }
        }

        private void button2_Click(object sender, EventArgs e)
        {
            wipeDisk();
            MessageBox.Show("اتمام عملیات پاک سازی");
        }

        private void comboBox1_Click(object sender, EventArgs e)
        {
            comboBox1.Items.Clear();
            foreach (DriveInfo drive in DriveInfo.GetDrives())
            {
                if (drive.DriveType == DriveType.Removable)
                {
                    comboBox1.Items.Add(drive.Name);
                }
            }
            if (comboBox1.Items.Count <= 0)
                button2.Enabled = false;
            else
            {
                button2.Enabled = true;
                comboBox1.SelectedIndex = 0;
            }
        }

        private void Form1_Load(object sender, EventArgs e)
        {
            comboBox1_Click(null, null);

        }
    }
} 
```**

# java - 有一个“设置器”/实例变量会导致单例 DAO 的竞争条件吗？

> ID：12081344
> 
> 赞同：1
> 
> 时间：2012-08-22T21:00:23.663
> 
> 标签：java, multithreading, spring, singleton, race-condition

假设以下类是单例

```
public class myDAO {
    //determines the tableName and Id column names to based on itemType
    private String itemType;
    public void setItemType(String itemType) {...} 

    //Following methods use itemType to customize their queries
    public boolean findObj(int id){...} 
    public boolean deleteObj(int id){...}
    public boolean updateObj(Obj obj){...}
    //etc...
} 
```

该代码最近使用 setter 进行了重构，从而为 DAO 提供了一些状态。我看到这是`singleton-scope`在 Spring 的配置文件中配置的。我有一种奇怪的感觉，这可能会导致潜在的比赛条件。那是对的吗？

我真的不确定这是否确实如此，但如果它是真的，恕我直言，弄清楚这将是一个噩梦般的情况。我知道这可能不是最好的设计，但我只是想知道当并发线程查询不同的`itemTypes`. 我正在考虑将范围更改为`prototype`但不确定在这种情况下是否确实需要。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T21:02:57.947

如果多个线程正在调用`setItemType(...)`然后调用`findObj(...)`并期望找到具有 id*和*item-type 的对象，那么是的，你奇怪的感觉是正确的，这是一个潜在的竞争条件，在多线程应用程序中不起作用.

相反，您应该将 传递`itemType`给您的每个方法：

```
public boolean findObj(String itemType, int id){...} 
public boolean deleteObj(String itemType, int id){...}
public boolean updateObj(String itemType, Obj obj){...} 
```

如果 itemType 在 Spring 构建 DAO 后仅设置一次，那么这没关系，但应该作为单线程完成的 Spring 配置的一部分来完成。

如果您必须为`itemType`所有或大多数方法添加参数，那么在我看来您不再应该有一个单例。相反，您应该考虑拥有一个 DAO 工厂或其他东西，并拥有多个 DAO 实例，每个实例都有自己的项目类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T21:03:32.637

如果该`setItemType`方法*仅*用于初始化（例如通过 Spring 配置）并且如果 Spring 强制执行适当的内存屏障以确保该值在使用前在所有线程中可见，那么它可能没问题 - 但有点异味。这是构造函数注入更简洁的地方，因为您可以将其设为`final`变量，这显然不是什么大问题。

如果在初始化*后*`setItemType`使用该方法，那么这*绝对*是一个问题。您要么需要多个实例（例如，每个类需要一个 DAO 引用），要么每个项目类型可能需要一个实例：声明几个单独的 bean，然后为每个需要 DAO 的类提供对“对”一个取决于它需要哪种类型。

# php - 正则表达式查找行上的最后一个整数

> ID：12081348
> 
> 赞同：1
> 
> 时间：2012-08-22T21:00:39.960
> 
> 标签：php, regex, preg-match

我有这个代码：

```
23561623:page[1].12 
6461620:page[3].7 
43631619:page[1].1 
265461620:page[6].2 
21461621:page[1].10 
```

我必须得到最后一个整数，如 12、7、1、2、10 等。有人可以帮助编写 preg_match 以便我得到它吗？

在此先感谢，幸运

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-22T21:02:16.877

```
$str = '23561623:page[1].12';
$parts = explode('.', $str);
echo $parts[1]; 
```

如果你*必须*使用`preg_match`（即使这里没有必要）：

```
$str = '23561623:page[1].12';
$matches = array();

if (preg_match('/\.(\d+)$/', $str, $matches)) {
    echo $matches[1];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T23:12:57.067

其他答案似乎假设总会有一个时期。可能有，但下面没有做出这样的假设。

如果你有一个这样的字符串块，你可以运行这个正则表达式代码：

```
if (preg_match_all('/(\d+)\s*$/m', $str, $matches)) {
    // $matches[1] contains all the integers
} 
```

它匹配最后一组数字 ( `(\d+)`)，可选地后跟空格 ( `\s*`)，直到行尾 ( `$`)。`/m`修饰符使得`$`表现为行尾而不是主题结尾。

# javascript - 检查在一定时间内是否“未”单击按钮（jQuery）

> ID：12081359
> 
> 赞同：1
> 
> 时间：2012-08-22T21:01:15.457
> 
> 标签：javascript, jquery, function, button, click

基本上：

您单击一个按钮，它会运行功能 1。
如果您在 1 秒内未再次单击该按钮，则会运行功能 2。
如果您在 1 秒内单击该按钮，则它会再次运行功能 1。
等等等等...

我无法弄清楚在 Javascript 中执行此操作的逻辑。

有没有办法？

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T21:04:43.587

您将需要使用计时器来跟踪时间。您可以`setTimeout`在 1 秒（1000 毫秒）内运行函数 2。但是，如果您再次单击按钮，您应该停止计时器。您可以使用`clearTimeout`.

核心线将是：

```
var timer;

// in button's click handler:
clearTimeout(timer);
timer = setTimeout(function2, 1000); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T21:08:19.877

从我的头顶开始（尚未对此进行测试，但这对我来说似乎是最合乎逻辑的）：

```
var t = null;

$("button").click(function() {
    console.log("this is function 1");
    if (t !== null) { window.clearTimeout(t); }

    t = window.setTimeout(function() {
        console.log("and this is function 2");
    }, 1000);
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-22T21:09:47.827

这应该这样做：

```
(function() {
    var timer = null;

    $('#button').on('click', function() {
        function1();                         // always call function1
        clearTimeout(timer);                 // clear the timer
        timer = setTimeout(function2, 1000); // run function2 1s later
    });
})(); 
```

见[http://jsfiddle.net/alnitak/QZRTA/](http://jsfiddle.net/alnitak/QZRTA/)

外部功能块用于将`timer`变量保持在本地范围内，而不创建全局变量。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-22T21:12:12.510

使用`setTimeout`和`clearTimeout`：

```
var t = null;
var timeoutMs = 1000; // in ms

$("#btn1").click(function (){
    func1();
    if (t !== null)
        clearTimeout(t);    
    t = setTimeout(func2, timeoutMs);
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T21:14:20.223

```
$('button').click(function() {
    console.log('Func 1');
    clearTimeout($(this).data('throttle'));
    $(this).data('throttle', setTimeout(function() {
        console.log('Func 2');
    }, 1000));
});​ 
```

[http://jsfiddle.net/dfsq/rrXWt/](http://jsfiddle.net/dfsq/rrXWt/)

# javascript - 同一页面上的多个切换

> ID：12081361
> 
> 赞同：0
> 
> 时间：2012-08-22T21:01:21.277
> 
> 标签：javascript, toggle

所以我有以下 HTML 代码：

```
<span class="full-width-red-left"></span>
<div class="full-width-red-wrapper">"Title
    <img src="/images/header_toggle_up.png" class="header-toggle" id="stafflist-icon" />
</div>
<span class="full-width-red-right"></span>
<div class="stafflist-content">
    <div class="full-width-content">
        Content
    </div>
</div>
<div class="full-width-footer"></div>

<span class="full-width-red-left"></span>
<div class="full-width-red-wrapper">"Title
    <img src="/images/header_toggle_up.png" class="header-toggle" id="stafflist-icon" />
</div>
<span class="full-width-red-right"></span>
<div class="stafflist-content">
    <div class="full-width-content">
        Content
    </div>
</div>
<div class="full-width-footer"></div> 
```

这在页面上多次显示，由 PHP foreach 生成。

然后我有以下 JS 代码，我正在尝试开始工作：

```
<script type="text/javascript">
$(document).ready(function() {

    $("#stafflist-icon").toggle(function(){

       $(".stafflist-content").slideUp('slow');
    } , 

    function() { 
        $(".stafflist-content").slideDown('slow');
    }); 
}); 
</script> 
```

显然，使用该代码，如果按下任何#stafflist-icon，所有 .stafflist-content DIVS 都会上下滑动。我需要的是当按下#stafflist-icon 时，只有下一个 .stafflist-content 向上或向下滑动，而不是每一个！

如果不使用计数器或 foreach 中的某些东西为每个人生成 ID，这是否可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T21:05:40.980

不能**有多个具有****相同**ID的 DOM 元素！

只有具有该 ID 的第一个元素会收到该事件。

一切都不会如你所愿。

* * *

您可以使用[此处](https://stackoverflow.com/a/11617389/561731)`nextFind`所示的此插件来选择要滑动的项目。

```
//to be used instead of prev/nextAll().eq(0);
(function ($) {
    var dirFind = function (selector, dir) {

        var elems = [];
        this.each(function (i, item) {
            while (item = item[dir]) {
                if (item.nodeType == 1) {
                    if ($(item).is(selector)) {
                        elems.push(item);
                        break;
                    }
                }
            }
        });

        return (this.pushStack(elems, dir, selector));
    }

    $.each({
        'prevFind': 'previousSibling',
        'nextFind': 'nextSibling'
    }, function (method, dir) {
        $.fn[method] = function (selector) {
            return dirFind.call(this, selector, dir);
        };
    });
}(jQuery));
//end of new prevall, nextall 
```

所以你可以这样做：

```
$(this).nextFind(".stafflist-content").slideDown('slow'); 
```

# java - 如何有效地获得数百万个未排序浮点数的排名？

> ID：12081363
> 
> 赞同：0
> 
> 时间：2012-08-22T21:01:35.867
> 
> 标签：java, c, algorithm, sorting, hash

有**2 亿个浮点数**，也许有些是重复的。

什么是获得其中每个元素排名的有效方法（例如，内存小于 1G）（它们最初是未排序的）？

像这样：

输入：[3.2, 3.2, 3.4, 7.81, 1.0]

输出： [2, 2, 4, 5 ,1]

我想到了[bitmap sort](http://www.cs.bell-labs.com/cm/cs/pearls/sec014.html)，但在这种情况下它看起来并不节省内存。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T00:00:40.407

我认为您无法在 1G 中完成所有操作。请注意，您的 200 Mvalue 数据集将占用 ~763 MiB，仅留下 ~261 MiB 可用于辅助数据。这排除了任何需要您同时存储索引和值的方法，因为 200 个 Mvalue 的索引至少需要 28 位。实际上，您确实需要 32 位，这将占用与原始（可能是 32 位）浮点值相同的空间。

要考虑的一种方法是对原始数据执行排序，同时将决策信息记录到位图，然后用等级索引替换原始数据并使用日志反转排列。

但是，在最坏的情况下，由此产生的排列至少需要`log2(N!) > N log2(N) - N log2(e)`一些存储空间（因此无法通过使用基数排序或其他方式来解决它）。对于指定的问题，请注意，`log2(200M)>27`日志可能需要多于`(200M * 25.5) / (8bits/byte) ~ 608 MiB`- 几乎与原始数据集一样大，并且远大于指定的辅助空间。

您可以将决策日志写入磁盘，然后重新读取以生成答案。但是，如果您允许磁盘 I/O，则最好进行外部排序，这将允许您解决比您的内存容量大得多的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T21:19:27.067

您不想对数组进行排序，但您想获得排序后位置所在的索引数组。它需要超过 1 GB 的内存，并且您可能需要进行一些后处理才能使相等的元素具有相同的等级，但您应该能够使用此解决方案作为起点：[获取索引排序后的数组？](https://stackoverflow.com/questions/4859261/get-the-indices-of-an-array-after-sorting)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T21:26:35.903

您可以根据浮点数的值对浮点数范围进行排序，`int`例如`Float.floatToRawInt(float)`.

如果您有 1 GB 并且每个值存储 8 个字节，则可以对多达 1.28 亿个或 2^27 个值的组进行排序。这意味着您将能够通过 2^5 或 32 次传球对它们进行排名。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T21:27:38.117

您可以尝试按照维基百科的说明进行[外部排序。](http://en.wikipedia.org/wiki/External_sorting)

在处理浮点数据时尝试使用内存映射文件。

```
public static void main(String[] args) throws IOException {
    RandomAccessFile raf = new RandomAccessFile("floats.dat", "rw");
    FileChannel fc = raf.getChannel();
    MappedByteBuffer mbb = fc.map(FileChannel.MapMode.READ_WRITE, 0, 1024 * 1024 * 1024);
    FloatBuffer fb = mbb.asFloatBuffer();
    Random random = new Random();
    for (int i = 0; i < 200000000; i++) {
        float rand = random.nextFloat();
        fb.put(rand);
    }
    fb.flip();

    // Read data in chunks, tune the size
    float[] f = new float[100000];
    fb.get(f, 0, f.length);

    // Process the data using some merge strategy
} 
```

据我了解，不应该对浮点数组本身进行排序。也使用内存映射文件存储 int 数组。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-02T21:35:54.530

如果您使用标准的 Java 排序方法和浮点数组，则可以使用 ~1.2GB IMO，因为它已经使用了非常节省空间和快速 (n lg(n)) 的排序方法（[TimSort](http://en.wikipedia.org/wiki/Timsort)，[MergeSort](http://en.wikipedia.org/wiki/Merge_sort)） - 请参阅数组。种类。

为了使其更快，您可以将浮点数转换为整数（但您需要预先知道精度），然后应用[整数排序](http://karussell.wordpress.com/2010/03/01/fast-integer-sorting-algorithm-on/)或已经提到的基数排序。

# dojo - 如何将图像添加到 dojo/dnd/Source 中的项目

> ID：12081365
> 
> 赞同：0
> 
> 时间：2012-08-22T21:01:42.727
> 
> 标签：dojo, dojo-dnd

我创建了一个具有源和目标位置的 dnd 解决方案。现在拖动是双向的，我想让它成为源的单向目标。然后从源向每个项目添加一个图像（删除图标），以便用户可以单击该图标并将记录发送回正确的目标。

第 1 部分，我试图了解如何使 dnd 单向和第 2 部分，如何为每个项目添加图像。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T21:37:05.407

这就是我的工作。

```
dojo.connect(selectedInstructions, "onDndDrop", instructions.addDeleteButton);

addDeleteButton: function (source, nodes, copy, target) {
    if (source != target) {
        dojo.forEach(nodes, function(node) {
            var instructionId = node.getAttribute("id");
            var oImg = document.createElement("img");
            oImg.setAttribute('src', 'images/delete.png');
            oImg.setAttribute('alt', 'Remove');
            oImg.setAttribute('class', 'remove_instruction');
            oImg.setAttribute('onClick', "javascript:instructions.removeInstruction('" + instructionId + "')");
            document.getElementById(instructionId).appendChild(oImg); 
        });
    }
}, 
```

然后我试图开始`on`工作，因为`connect`正在贬值，但我似乎没有太多运气。我将不得不稍后再回来讨论它，因为我现在正处于时间紧迫的状态以获取此代码。

```
on(selectedInstructions, "onDrop", instructions.addDeleteButton);
aspect.after(selectedInstructions, "onDrop", instructions.addDeleteButton); 
```

希望 Dojo 文档更好。感谢社区和它的支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T12:25:57.143

在 dnd 模块中有一些事件可以处理这个问题。

至于“第 1 部分”，请参阅此[http://dojotoolkit.org/reference-guide/1.8/dojo/dnd.html#id6](http://dojotoolkit.org/reference-guide/1.8/dojo/dnd.html#id6)并设置 `is'Source : false`目标，该目标应该只是一个目标。

并使用“part2”访问[http://dojotoolkit.org/reference-guide/1.8/dojo/dnd.html#id8](http://dojotoolkit.org/reference-guide/1.8/dojo/dnd.html#id8)并阅读有关“onDrop”的信息。如果在“仅限目标”源中重载该函数，您将可以访问正在删除的节点。

```
 onDrop: function(source, nodes, copy) {
    dojo.forEach(nodes, function(node) {
       node.innerHTML += "<button title=Delete> X </button>";
    });
 } 
```

# php - 提交表单时，变量会更新，但不会在 textarea 中更新

> ID：12081370
> 
> 赞同：0
> 
> 时间：2012-08-22T21:02:17.003
> 
> 标签：php, mysql, forms, pdo, textarea

请原谅我的标题，解释我的问题有点困难。所以就在这里。在[http://appsolute.vacau.com/cms](http://appsolute.vacau.com/cms)我在 textarea 中有一个变量。您可以从一开始就看到变量的输出。更新提交表单的文本就是更新变量。到目前为止一切都是正确的，对吧？提交表单时，页面会重新加载，但所有内容都来自变量的先前内容。但是在检查时，变量 WAS 更新了。即使你刷新页面。那么为什么我在提交表单后看不到变量的实际值呢？希望它是有道理的...

```
<html>
    <head>
        <title>Milan CMS</title><?php
$host     = "x";
$dbname   = "x";
$username = "x";
$password = "x";
$dbh      = new PDO("mysql:host=$host;dbname=$dbname", $username, $password);
$sth      = $dbh->prepare("SELECT * FROM milan   ");
$sth->execute();
$result   = $sth->fetchAll();
?>
    </head>

    <body>
        <?php
        var_dump($result);
        $myFile   = "trainingen.json";
        $fh       = fopen($myFile, 'w') or die("can't open file");
        fwrite($fh, json_encode($result));
        fclose($fh);
        ?>
        <form action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post" name="trainingen">
            <h3>Trainingen:</h3><p><textarea name="nametrainingen" rows="10" cols="60"><?php echo $result[0]['value']; ?></textarea></p>
            <input name="submit" type="submit" value="Verzenden"><input type="reset" value="Veld leeg maken">
        </form>
        <?php
        $invoer   = $_POST['nametrainingen'];
        if (isset($_POST['submit'])) { //test if submit button is clicked
            $sql = "DELETE FROM milan WHERE tag = 'trainingen'";
            $sth = $dbh->prepare($sql);
            $sth->execute();
            $sql = "INSERT INTO milan (tag, value) VALUES ('trainingen', '$invoer')";
            $sth = $dbh->prepare($sql);
            $sth->execute();
        }
        ?>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T21:08:52.303

简单的逻辑。首先对数据库进行更改

```
DELETE FROM milan
INSERT INTO milan 
```

然后从数据库加载行

```
SELECT * FROM milan 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T21:10:01.857

像这样重新安排逻辑：

```
<?php
        $invoer   = $_POST['nametrainingen'];
        if (isset($_POST['submit'])) { //test if submit button is clicked
            $sql = "DELETE FROM milan WHERE tag = 'trainingen'";
            $sth = $dbh->prepare($sql);
            $sth->execute();
            $sql = "INSERT INTO milan (tag, value) VALUES ('trainingen', '$invoer')";
            $sth = $dbh->prepare($sql);
            $sth->execute();
        }

        $sth      = $dbh->prepare("SELECT * FROM milan   ");
        $sth->execute();
        $result   = $sth->fetchAll();
    ?>
       <form action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post" name="trainingen">
            <h3>Trainingen:</h3><p><textarea name="nametrainingen" rows="10" cols="60"><?php echo $result[0]['value']; ?></textarea></p>
            <input name="submit" type="submit" value="Verzenden"><input type="reset" value="Veld leeg maken">
        </form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T21:17:13.523

您必须在输出内容之前处理您的数据。这意味着您必须遵循一定的程序：

*   加载核心配置：数据库连接等
*   插入/更新表和填充/预设变量
*   从（现已更新的）数据库中选择内容
*   输出（很可能是 html）

# mysql - 与数据库在线聊天 - 最快的方式？

> ID：12081373
> 
> 赞同：3
> 
> 时间：2012-08-22T21:02:30.270
> 
> 标签：mysql, chat

您好，我将创建一个基于网络的聊天程序。所有聊天都是私人的，没有群组框。

我需要记录所有聊天记录。我的想法是将所有消息推送到 mysql 数据库，然后每半秒检查一次该数据库是否有传入消息。

这是创建 Web 应用程序的最佳方式吗？该站点应支持 2000 个用户同时聊天。

有没有更好的选择？我见过人们谈论多个数据库、文本文件、TCP/IP (IRC) 和 SQL 的组合等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T21:10:56.717

MySQL 能够一次处理大量并发请求，但如何管理和维护数据库是重点。

完美维护和索引的表应该没有问题。保持表的结构尽可能简单。就像是

```
+----------------+--------------+-----------------
|    from        |     to       |   message      |
+----------------+--------------+----------------- 
```

而且，没有完美的方法来创建聊天程序。取决于许多其他因素，例如

*   **请求类型：** AJAX 或 Comet 或 WebSocket
*   **应用程序编码：**无垃圾编码，遵循多个设计模式之一的清洁 OO 代码
*   **缓存**：尽可能缓存大部分静态信息。
*   **数据归档或事务处理**
*   **查询**您与消息一起获取的内容（可能是之前可以缓存的内容。这些内容包括`names`等`avatar`）

# css - 使用西里尔字母为有序列表设置样式

> ID：12081378
> 
> 赞同：6
> 
> 时间：2012-08-22T21:02:50.050
> 
> 标签：css, html-lists

`list-style-type`CSS 属性有许多可能的值（例如`decimal`、`lower-latin`等`upper-greek`）。然而，西里尔字母没有（顺便说一句，对于不同的语言，它有不同的变体）。

**用西里尔字母设计有序列表的最佳方式是什么？**

（我提供了一个我最终得到的解决方案，尽管我对它不是很满意。）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-23T08:18:48.437

I know nothing about Cyrillic list schemes so I’m at risk of a bit of cultural embarrassment here, but CSS3 Lists module (still in working draft) [defines quite a few Cyrillic alphabetic list types](http://www.w3.org/TR/css3-lists/#predefined-alphabetic): `lower-belorussian`, `lower-bulgarian`, `lower-macedonian`, `lower-russian`, `lower-russian-full`, `lower-serbo-croatian`, `lower-ukrainian`, `lower-ukrainian-full`, `upper-belorussian`, `upper-bulgarian`, `upper-macedonian`, `upper-russian`, `upper-russian-full`, `upper-serbo-croatian`, `upper-ukrainian`, `upper-ukrainian-full`. As expected, the state of support for these is deplorable currently (certainly nothing in Gecko or WebKit), but hopefully going forwards these will start to be implemented.

Update: some changes have been made – the definition of list types has been moved into the [CSS3 Counter Styles module](http://www.w3.org/TR/css-counter-styles-3/) whose current draft (Feb 2015) has unfortunately lost all alphabetical Cyrillic types. This is in Candidate Recommendation stage so it’s unlikely that additions will be made at the point. Perhaps in CSS4 List Styles?

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T21:02:50.050

在这种方法中，我在每个列表项之前使用 CSS 生成的内容。

```
.lower-ukrainian {
  list-style-type: none;
}

.lower-ukrainian li:before {
  display: inline-block;
  margin-left: -1.5em;
  margin-right: .55em;
  text-align: right;
  width: .95em;
}

.lower-ukrainian li:first-child:before {
  content: "а.";
}

.lower-ukrainian li:nth-child(2):before {
  content: "б.";
}

/* and so on */ 
```

## 缺点

1.  硬编码，将列表限制为某个最大长度。
2.  与常规订单列表相比，像素不完美

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-04-02T18:10:19.803

这是西里尔字母的另一种解决方案，代码非常清晰：[jsfiddle.net](http://jsfiddle.net/DenVdmj/zgwa84j7/embedded/result,js,css,html/?fontColor=000&menuColor=f1f8fe&accentColor=0098ea&bodyColor=fff)

```
(() => {
  const selector  = 'ol.cyrillic',
        style     = document.createElement('style');

  document.head.appendChild( style );

  'абвгдежзиклмнопрстуфхцчшщэюя'.split('').forEach((c, i) =>
    style.sheet.insertRule(
      `${selector} > li:nth-child(${i+1})::before { 
         content: "${c})"
       }`, 0)
  );
})(); 
```

PS。您可以使用 Babel 将这个下一代代码转换为旧代码：[babeljs.io](https://babeljs.io/repl/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-22T22:05:25.337

我很惊讶没有西里尔字母编号。这是一个快速的 JS 解决方案：

```
function base_convert(n, base) {
    var dictionary = '0123456789abcdefghijklmnopqrstuvwxyz';
    var m = n.toString(base);
    var digits = [];

    for (var i = 0; i < m.length; i++) {
        digits.push(dictionary.indexOf(m.charAt(i)) - 1);
    }

    return digits;
}

var letters = {
    'russian': {
        'lower': 'абвгдеёжзийклмнопрстуфхцчшщъыьэюя',
        'upper': 'АБВГДЕЁЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯ'
    }
}

$('ul, ol').each(function() {
    if (!(results = $(this).prop('class').match(/(upper|lower)-([a-z]+)/i))) return;

    var characters = letters[results[2]][results[1]];

    $('> li', this).each(function(index, element) {
        var number = '', converted = base_convert(++index, characters.length);

        for (var i = 0; i < converted.length; i++) {
            number += characters.charAt(converted[i]);
        }

        $(this).attr('data-letter', number);
    });
});​ 
```

我的俄语写作确实很糟糕，正如你无法用字母数数看到的那样，所以`letters`适当地改变对象。

**演示：http: [//jsfiddle.net/JFFqn/14/](http://jsfiddle.net/JFFqn/14/)**

# c# - Post values are not set because of special characters in Web API

> ID：12081382
> 
> 赞同：3
> 
> 时间：2012-08-22T21:03:17.813
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, asp.net-web-api

I'm trying to make a post to my web api service. The point is that while sending a message like

```
{ message: "it is done" } 
```

working fine. However when I use special characters like çıöpş in my message it is unable to convert my json so that the post object remains null. What can I do? It is either current culture issue or something else. I tried to send my post parameter as HtmlEncoded style with encoding HttpUtility class but it didn't work either.

```
public class Animal{

  public string Message {get;set;}
} 
```

Web API method

```
public void DoSomething(Animal a){

} 
```

Client

```
Animal a = new Animal();
a.Message = "öçşistltl";
string postDataString = JsonConvert.SerializeObject(a);        
string URL = "http://localhost/Values/DoSomething";
WebClient client = new WebClient();

client.UploadStringCompleted += client_UploadStringCompleted;
client.Headers["Content-Type"] = "application/json;charset=utf-8";
client.UploadStringAsync(new Uri(URL), "POST",postDataString); 
```

Best regards,

Kemal

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-22T21:34:51.880

One possibility is to use the [UploadDataAsync](http://msdn.microsoft.com/en-us/library/ms144226.aspx) method which allows you to specify UTF-8 when encoding the data because the `UploadStringAsync` method that you are using basically uses `Encoding.Default` to encode the data when writing it to the socket. So if your system is configured to use some other encoding than UTF-8 you get into trouble because `UploadStringAsync` uses your system encoding whereas in your content type header you have specified `charset=utf-8` which could be conflicting.

With the `UploadDataAsync` method you could be more explicit in your intents:

```
Animal a = new Animal();
a.Message = "öçşistltl";
string postDataString = JsonConvert.SerializeObject(a);        
string URL = "http://localhost/Values/DoSomething";
string postDataString = JsonConvert.SerializeObject(a);
using (WebClient client = new WebClient())
{
    client.UploadDataCompleted += client_UploadDataCompleted;
    client.Headers["Content-Type"] = "application/json; charset=utf-8";
    client.UploadDataAsync(new Uri(URI), "POST", Encoding.UTF8.GetBytes(postDataString));
} 
```

* * *

Another possibility is to specify the encoding of the client and use `UploadStringAsync`:

```
Animal a = new Animal();
a.Message = "öçşistltl";
string postDataString = JsonConvert.SerializeObject(a);        
string URL = "http://localhost/Values/DoSomething";
string postDataString = JsonConvert.SerializeObject(a);
using (WebClient client = new WebClient())
{
    client.Encoding = Encoding.UTF8;
    client.UploadStringCompleted += client_UploadStringCompleted;
    client.Headers["Content-Type"] = "application/json; charset=utf-8";
    client.UploadStringAsync(new Uri(URI), "POST", postDataString);
} 
```

* * *

Or if you install the [`Microsoft.AspNet.WebApi.Client`](http://nuget.org/packages/Microsoft.AspNet.WebApi.client) NuGet package on the client you could directly use the new `HttpClient` class (which is the new kid on the block) to consume your WebAPI instead of `WebClient`:

```
Animal a = new Animal();
a.Message = "öçşistltl";
var URI = "http://localhost/Values/DoSomething";
using (var client = new HttpClient())
{
    client
        .PostAsync<Animal>(URI, a, new JsonMediaTypeFormatter())
        .ContinueWith(x => x.Result.Content.ReadAsStringAsync().ContinueWith(y =>
        {
            Console.WriteLine(y.Result);
        }))
        .Wait();
} 
```

# c# - C# XMLDocument 编码？

> ID：12081386
> 
> 赞同：0
> 
> 时间：2012-08-22T21:03:30.660
> 
> 标签：c#, xml, xmldocument

我正在尝试编写一个验证 XML 设置文件的函数，因此如果文件中不存在节点，则应该创建它。

我有这个功能

```
private void addMissingSettings() {
    XmlDocument xmldocSettings = new XmlDocument();
    xmldocSettings.Load("settings.xml");

    XmlNode xmlMainNode = xmldocSettings.SelectSingleNode("settings");

    XmlNode xmlChildNode = xmldocSettings.CreateElement("ExampleNode");
    xmlChildNode.InnerText = "Hello World!";

    //add to parent node
    xmlMainNode.AppendChild(xmlChildNode);
    xmldocSettings.Save("settings.xml");
} 
```

但是在我的 XML 文件上，如果我有

```
<rPortSuffix desc="Read Suffix">&#13;&#10;</rPortSuffix>
<wPortSuffix desc="Write Suffix">&#03;</wPortSuffix> 
```

当我保存文档时，它将这些行保存为

```
<rPortSuffix desc="Read Suffix">
</rPortSuffix>
<wPortSuffix desc="Sufijo en puerto de escritura">&#x3;</wPortSuffix>
<ExampleNode>Hello World!</ExampleNode> 
```

有没有办法防止这种行为？像设置一个工作字符集或类似的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T21:08:18.567

这两个文件是等价的，我相信所有 XML 解析器都应该将其视为等价的。

此外，Unicode 字符 U+0003 不是[有效的 XML 字符](http://www.w3.org/TR/2008/REC-xml-20081126/#dt-character)，因此如果您尝试在文件中表示它，您基本上会遇到其他问题。即使那个特定的 .NET XML 解析器似乎没有反对，其他解析器也可能会这样做。

如果您需要在 XML 中表示*绝对任意*的字符，我建议您以其他形式这样做 - 例如

```
<rPortSuffix desc="Read Suffix">\u000c\u000a</rPortSuffix>
<wPortSuffix desc="Write Suffix">\u0003</wPortSuffix> 
```

显然，您随后需要适当地解析该文本，但至少 XML 解析器不会妨碍您，并且您将能够表示任何 UTF-16 代码单元。

# eclipse-gef - 如何在 GEF 中的一次拖放中创建两个图形？

> ID：12081388
> 
> 赞同：0
> 
> 时间：2012-08-22T21:03:34.187
> 
> 标签：eclipse-gef

我喜欢在调色板的一次拖放中创建两个图形，即在一次拖放中应该创建两个图形，它们都具有单独的 EditPart 和 Model 类。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T12:59:13.383

There is multiple ways to make this happen: the easiest is to make you creationFactory return an array or a list of objects. Then, in you

```
protected Command getCreateCommand(final CreateRequest request) {
   if (request.getNewObject() instanceof List<?>/Object[]) {
     ...
   }
} 
```

or, the other way is to sublcass CreationTool to have a List of creation factories. Then, create a custom request type, for example,

```
public class MultiCreateRequest extends Request {
    ...    
} 
```

and override getCommand(Request request) dispatching method that it will handle that case:

```
public Command getCommand(Request request) {
   if (REQ_MULTI_CREATE.equals(request.getType()))
      return getMultiCreateCommand((MultiCreateRequest) request);
} 
```

when subclassing creation tool you should pay you attention to:

```
Constructor
createTargetRequest() (return MultiCreateRequest)
getCommandName() (return REQ_MULTI_CREATE)
getCreateRequest() (specify)
selectAddedObject(EditPartViewer viewer) (to select all created that way objects)
updateTargetRequest() (specify) 
```

Oh, i've actually came up with the idea, that creation new Tool subclassing TargetingTool is a better idea then subclassing CreationTool. Instead, you can just copy implementation (it's easy actually) and change it as you need.

# objective-c - 使用 NSStatusItem 进行内存管理：setToolTip

> ID：12081389
> 
> 赞同：0
> 
> 时间：2012-08-22T21:03:37.253
> 
> 标签：objective-c, memory-management, nsstring, nsstatusitem

我有一个带有静态 NSStatusItem 和 NSStream 客户端的单例类。每当我在 Stream 中收到一条消息时，我都会将它传递给另一个线程以更改 NSStatusItem 工具提示。

```
 case NSStreamEventHasBytesAvailable: 
    {
        if(stream == inputStream)
        {
            //InputStream ready
            uint8_t buf[1024];
            unsigned int len = 0;
            len = [inputStream read:buf maxLength:1024];
            if(len > 0) 
            {
                NSMutableData* data=[[NSMutableData alloc] initWithLength:0];
                [data appendBytes: (const void *)buf length:len];
                NSString *msgRcvd = [[NSString alloc] initWithData:data encoding:NSASCIIStringEncoding];
                NSLog(@"Message Recieved in StreamUtil ::: %@",msgRcvd);
                [self ProcessMessage:msgRcvd];
                [data release];
                [msgRcvd release];
            }
        }
        break;
    }

 @implementation SBNSStatusItem
 static SBNSStatusItem *sbNSStatusItem = NULL;
 +(SBNSStatusItem *) GetSBNSStatusItem
 {
    @synchronized(self)
    {
     if (sbNSStatusItem== NULL)
      {
        sbNSStatusItem= [[self alloc] init];
      }
    }
    return(sbNSStatusItem);
 }

 -(void) CreateNSStatusItem
 {
     // Initalization of NSStatusItem with NSMenu and Image setting
 }

 -(void) SetToolTip:(NSString *) toolTip
 {
   NSLog(@"%@",toolTip);  // Shows Correct Message
   [statusItem setToolTip:toolTip]; // But the ToolTip has some junk at the end of ori msg
   //[toolTip release]; // EXC_BAD_ACCESS
 }
 @end 
```

现在，来自 StreanUtil 的 Thread 使用要设置的消息调用 setToolTip。但是在 2 或 3 次调用之后，工具提示开始在原始工具提示消息的末尾显示一些垃圾文本。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T21:29:00.187

由于您传递给 SetToolTip: 的工具提示项只是一个指针，因此它可能会在其他地方设置或释放。

尝试这样的事情

```
- (void)SetToolTip:(NSString *) toolTip
{
    NSString *toolTipCopy = [toolTip copy];
    [statusItem setToolTip:toolTipCopy];
    [toolTipCopy release];
} 
```

此外，如果您的目标是 iOS 4 或 OS X 10.6 或更高版本，我会考虑迁移到 ARC。然后代码就会变成这样。

```
- (void)SetToolTip:(NSString *) toolTip
{
    [statusItem setToolTip:[toolTip copy]];
} 
```

# firefox - 在推送到在线存储库进行渲染之前，在浏览器中查看或测试 README 文件 *md

> ID：12081390
> 
> 赞同：10
> 
> 时间：2012-08-22T21:03:37.703
> 
> 标签：firefox, google-chrome, browser, github, markdown

是否有应用程序或方法在浏览器中在线或离线呈现 README.md 文件？我正在学习 Markdown，并且希望对我的一些写作有即时反馈，因为有时我会忘记空格或空行来实现我想要的，并且提交并推送到 GitHub 以查看其渲染对我来说很麻烦，而不是提到我为一个小改变而创建的大量提交。

有些人建议在您自己的服务器或虚拟服务器中设置 PHP 环境，但我不知道该怎么做（目前）。我正在考虑一个扩展，如果你在浏览器中打开一个 *.md 文件（我主要使用 Chrome，但偶尔使用 FF），它看起来与 GitHub 中的框架相同。\

我使用 TextMate 和 Sublime Text 2 来编写降价，也许他们有我在他们的网站上没有看到/找到的功能？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-06-26T03:01:55.840

# 懒惰的回答

^(（*对于独立的快速学习者*）)

*   在 Atom 编辑器中：`Ctrl/Cmd`++`Shift``M`
*   在 Sublime Text 中：有一个包可以突出显示 Github Flavored MD，它会在您在同一个编辑器中输入时实时呈现，它可能看起来不是很漂亮，但至少您可以立即知道您是否犯了错误。它被称为`knockdown`。[请参阅this other question和我的回答以了解更多信息。](https://stackoverflow.com/a/17644538/2016708)
    如果您不想在发布之前在浏览器中预览漂亮的结果，您可以使用该[**`Markdown Preview`**](https://sublime.wbond.net/packages/Markdown%20Preview)包。

* * *

# 详尽的回答

^(（*sublime-text 新手红十字会！*）)

## - 安装`Package Control`

1.  打开崇高文本。
    [[如果您在编辑 root 或 www-data （即 /var/www/ ）拥有的目录上的文件时需要此功能，您可能希望使用`gksu sublime`或类似的方式以管理员权限打开 sublime 并重复每个步骤]]

2.  `console`通过按`ctr`+ [[即 CONTROL 键加上 GRAVE ACCENT 键（通常在 TAB 键上方）]]激活 sublime```

    ![在此处输入图像描述](../Images/60e29320aa584ec8e5961d403dc47373.png)

3.  将以下选项之一复制粘贴到 sublime 控制台的`prompt`. [（然后按`enter`）]：

    如果崇高文本2：

    ```
    import urllib2,os,hashlib; h = '7183a2d3e96f11eeadd761d777e62404' + 'e330c659d4bb41d3bdf022e94cab3cd0'; pf = 'Package Control.sublime-package'; ipp = sublime.installed_packages_path(); os.makedirs( ipp ) if not os.path.exists(ipp) else None; urllib2.install_opener( urllib2.build_opener( urllib2.ProxyHandler()) ); by = urllib2.urlopen( 'http://sublime.wbond.net/' + pf.replace(' ', '%20')).read(); dh = hashlib.sha256(by).hexdigest(); open( os.path.join( ipp, pf), 'wb' ).write(by) if dh == h else None; print('Error validating download (got %s instead of %s), please try manual install' % (dh, h) if dh != h else 'Please restart Sublime Text to finish installation') 
    ```

    如果崇高文本3：

    ```
    import urllib.request,os,hashlib; h = '7183a2d3e96f11eeadd761d777e62404' + 'e330c659d4bb41d3bdf022e94cab3cd0'; pf = 'Package Control.sublime-package'; ipp = sublime.installed_packages_path(); urllib.request.install_opener( urllib.request.build_opener( urllib.request.ProxyHandler()) ); by = urllib.request.urlopen( 'http://sublime.wbond.net/' + pf.replace(' ', '%20')).read(); dh = hashlib.sha256(by).hexdigest(); print('Error validating download (got %s instead of %s), please try manual install' % (dh, h)) if dh != h else open(os.path.join( ipp, pf), 'wb' ).write(by) 
    ```

    ![在此处输入图像描述](../Images/912230664811e12819551d5517f598a1.png)

4.  当控制台打印出一条消息“*请重新启动 Sublime Text 以完成安装”* [（通常几乎是瞬时的）]时，关闭 sublime 。再次打开 sublime-text。

5.  重新启动 sublime-text 后，剩下的就很容易了，**请参阅“快速回答”** [（上图）]，或继续阅读。

### 关于使用包控制

您刚刚安装的内容为您的*Palette*添加了一组新命令，并为社区贡献的插件的美妙世界打开了大门；一种由其他人或您自己扩展 sublime 功能的方法！（分享您的代码！）。
现在让我们使用它来安装`Markdown Preview`.

1.  您可以通过按`ctr`+ `shift`+`P`并键入`Package Control`, （或类似命令调色板的模糊搜索功能的任何类似内容）来访问 Package Controll，在这种情况下，通过编写（或只是）搜索正确`pc`的命令。[（如果出现问题，您总是可以][）]。`pack``Package Control: Install Package``pi`
    [*`Remove Package`*]

    ![在此处输入图像描述](../Images/b484e2dd91cda66b8493f348f4e3aae5.png)

2.  要查看所有可用的软件包`enter`或单击它。Sublime 将搜索所有已注册的包，甚至会检查并只为您显示与您的 sublime-text 版本兼容的包，您必须等待几秒钟。
    [（或不到一秒，取决于您的互联网+计算机延迟+速度）]。

    ![在此处输入图像描述](../Images/d173ecca6880728021e22c588c192bdd.png)

3.  现在搜索并选择`Markdown Preview`.

    ![在此处输入图像描述](../Images/0e6b389fe9b1377394f0bfacc2a0203b.png)

4.  在您点击`Enter`或单击它后，需要一点时间来安装。

    ![在此处输入图像描述](../Images/3febdcfa008c521548f9fdd2ea243e4d.png)

    **就是这样**，*它只是工作*。

## - 你问如何使用它？

### 在默认浏览器中预览漂亮的降价：

1.  在 sublime-text 中并打开一个 .md 文件，再次按`ctr`+ `shift`+ `P`。
2.  搜索`Markdown Preview`和`enter`或单击它。
    ^(（有很多选择，我最喜欢 github 风格 :D）)

    ![在此处输入图像描述](../Images/e4c1be02e8270d8ebb4dfceb1c95145e.png)

## ......图片，否则它不会发生：

^(（它完全有效！这是证据）) ![在此处输入图像描述](../Images/99b1b647c07065154e673f205935b400.png)

***快！***
*成为sublime-text大师，你才更进一步，希望**我的回答**对你有所帮助*

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-22T21:09:54.260

您可以将[sublimetext-markdown-preview](https://github.com/revolunet/sublimetext-markdown-preview)包用于 Sublime Text。它允许您在浏览器上预览 Markdown 文件。有关安装说明，请参阅[README.md](https://github.com/revolunet/sublimetext-markdown-preview/blob/master/README.md)。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2015-08-06T21:16:53.220

您可以安装 python 包索引 pip，然后安装一个名为 Grip 的应用程序，该应用程序将在 localhost 端口上提供 .md 文件。安装后非常容易。

```
sudo easy_install pip
sudo pip install grip 
```

然后运行：

```
grip 
```

在 .md 文件的根目录中。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-11-01T15:53:25.713

有一个 Chrome 插件可以做到这一点。

[降价预览](https://chrome.google.com/webstore/detail/markdown-preview/jmchmkecamhbiokiopfpnfgbidieafmd)

> 在 Chrome 中将 Markdown 文件（.md、.markdown）转换和预览为 HTML。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2014-10-13T07:48:41.910

如果你在 OSX / Linux 上并且不介意命令行，这里有一个简单的脚本，可以在浏览器中打开渲染的 markdown：

```
#!/usr/bin/env bash

OUTPUT=/tmp/$(basename $1).html
markdown $1 > $OUTPUT
open $OUTPUT
# FIXME: Avoid deleting before opening; possible to use `wait`
# instead?
sleep 1
rm $OUTPUT 
```

您可能需要将该`open`命令替换为适用于您的 Linux 风格的命令，例如`firefox $OUTPUT`.

这`sleep 1`只是防止在浏览器有时间读取文件之前删除文件的技巧；我敢肯定，更熟练的 bash 黑客可以用不那么难看的东西代替它；）

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-22T21:45:26.427

@regularjack 的答案可能是要走的路，因为它与 Sublime Text 集成。但是，我只是想提请注意[Pandoc](http://johnmacfarlane.net/pandoc/)是一个文档转换器程序，用 Haskell 编写，它可以在包括 markdown 在内的多种文件格式之间进行转换。虽然它需要安装，但也有一个[页面可以试用](http://johnmacfarlane.net/pandoc/try)。虽然不适合大型文档，但此站点为您提供了一种简单的方法来复制和粘贴 markdown 并立即查看格式化结果。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-12-10T16:22:49.313

我喜欢免费的 Chrome 应用程序[stackit](https://stackedit.io/)。它允许您同时创建和预览降价文档 - 2 个窗格。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-12-09T22:07:27.070

试试[MarkView](https://chrome.google.com/webstore/detail/markview/iaddkimmopgchbbnmfmdcophmlnghkim/)一个 Chrome 扩展，用于编辑和查看带有大纲视图的 markdown 文件，支持 Github Flavored Markdown 表格样式和代码块语法高亮。

*   特征

    1.  以网页样式编辑和查看 Markdown 文件。
    2.  文件更改时自动重新加载本地文件（安装后：在 chrome://extensions/ 中选择“允许访问文件 URL”选项）
    3.  以可滚动的方式在内容旁边显示大纲
    4.  有 GoTop、ViewSource 和 GoBottom 的按钮
    5.  支持 Github Flavored Markdown 表格样式和代码高亮。
    6.  突出显示编程语言的代码区域（例如 ```ruby）
    7.  支持具有良好外观的网页打印（Chrome->文件->打印...）
    8.  响应式：当窗口尺寸小于 940px 时，轮廓部分会自动隐藏；调整大小大于 940 像素，将显示轮廓部分。
    9.  MarkView 将查看除 raw.github.com 下的所有 markdown 文件，因为该子域仅显示源。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-08-03T06:10:17.040

FireFox 有一个编辑器。直接进行编辑并不完美，但在签入之前快速检查更改或验证文件非常棒。

[https://addons.mozilla.org/en-US/firefox/addon/markdown-editor/](https://addons.mozilla.org/en-US/firefox/addon/markdown-editor/)

安装插件后，请确保转到自定义..（右键单击图标，在右上角的菜单旁边）将小图标添加到您的栏。然后您将能够打开/关闭/保存等。就像桌面应用程序一样。

# c# - 修改 Debug 和 Release Configuration 的属性值而不定义相应的字典

> ID：12081391
> 
> 赞同：1
> 
> 时间：2012-08-22T21:03:43.097
> 
> 标签：c#, .net, xml, msbuild

我想在 csproj 文件中以编程方式修改调试和发布配置的属性值。我是否必须定义 4 个字典才能做到这一点？

示例：假设我想将 Debug 和 Release 配置的“WarningLevel”属性（“x86”和“AnyCPU”的值将保持不变）更改为 WarningLevel = 4。

```
var globalPropertiesReleaseX86 = new Dictionary<string, string> { { "Configuration", "Release" }, { "Platform", "x86" } };
var globalPropertiesDebugX86 = new Dictionary<string, string> { { "Configuration", "Debug" }, { "Platform", "x86" } };
var globalPropertiesReleaseAnyCPU = new Dictionary<string, string> { { "Configuration", "Debug" }, { "Platform", "x86" } };
var globalPropertiesDebugAnyCpu = new Dictionary<string, string> { { "Configuration", "Debug" }, { "Platform", "x86" } };

Project projectReleaseX86 = new ProjectCollection(globalPropertiesReleaseX86).LoadProject(filePath);
projectReleaseX86.SetProperty("WarningLevel", "4");
...and so on???? 
```

我确信有更好的方法。任何建议将不胜感激。

提前致谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T21:33:55.343

您可以使用[ProjectRootElement](http://msdn.microsoft.com/en-us/library/microsoft.build.construction.projectrootelement.aspx)：

```
var project = ProjectRootElement.Open(fileName);
project.PropertyGroups.Where(x => x.Condition.Contains("x86") || 
                                  x.Condition.Contains("AnyCPU"))
    .ToList().ForEach(x => x.AddProperty("WarningLevel", "4")); 
```

# c# - 如何将键盘快捷键添加到 ICommand 对象

> ID：12081392
> 
> 赞同：2
> 
> 时间：2012-08-22T21:03:43.137
> 
> 标签：c#, .net, wpf, data-binding, wcf-binding

我有一个如下所示的 ICommand 属性：

```
private ICommand autoHideCommand;
public ICommand AutoHideCommand
{
   get { return autoHideCommand; }
   set
   {
      if (!object.Equals(autoHideCommand, value))
      {
         autoHideCommand = value;
         OnPropertyChanged("AutoHideCommand");
      }
   }
} 
```

命令下的实际类可以在[这里](http://avalondock.codeplex.com/SourceControl/changeset/view/94905#1742961)找到。这是一个相当基本的 ICommand 实现。

我真的很想为这个命令添加一些键盘输入绑定。但实际实现不支持它，ICommand 也不支持。

有没有人举例说明如何在这种情况下添加键盘绑定？（这甚至可能吗？）

注意：我需要在 C# 代码（不是 XAML）中执行此操作。那是因为我的窗口是动态生成的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T21:19:20.200

命令实现不需要知道调用它的名称（按钮或键盘快捷键等）。

当您创建`Window`您`CommandBinding`的[`CommandBindings`](http://msdn.microsoft.com/en-us/library/system.windows.uielement.commandbindings.aspx). 这会将键盘快捷键路由到您的`ICommand`.

# activex - 如何在没有 LPK_tool 的 GUI 的情况下生成 LPK 文件

> ID：12081406
> 
> 赞同：1
> 
> 时间：2012-08-22T21:05:14.423
> 
> 标签：activex

我使用 lpk_tool.exe 为我的 ActiveX 控件生成 LPK 文件。但是微软似乎已经放弃了这项技术，我什至在微软下载上都找不到下载链接。

但这不是问题，我可以从其他网站下载它。现在的问题是我想在没有 GUI 的情况下生成 LPK 文件。我试图找到 LPK 工具的 API 或命令行支持，但没有找到。我还询问了微软的支持表格，他们没有提供 LPK 工具的 API 或源代码。

任何人都可以帮助我吗？

# sorting - 按包含一些空值的 PropertyColumn 对 Wicket DataTable 进行排序

> ID：12081407
> 
> 赞同：0
> 
> 时间：2012-08-22T21:05:17.230
> 
> 标签：sorting, datatable, null, wicket

这是我的表的一些伪代码：

```
List<IColumn<Foo>> columns = new ArrayList<IColumn<Foo>>();
columns.add(new PropertyColumn<Foo>(Model.of("Name"), "name", "name"));
columns.add(new PropertyColumn<Foo>(Model.of("Leader"), "leader.lastName",
   leader.fullName"));

fooTable = new AjaxFallbackDefaultDataTable<Foo>("fooTable", columns,
   provider, 10); 
```

Foo 类包含其他字段：

```
private String name;
private User leader; 
```

User 类包含字符串 userName、password、firstName、lastName、email，以及：

```
public String getFullName() {
    // Use blank strings in place of "null" literals
    String f = firstName != null ? firstName: "";
    String l = lastName != null ? lastName: "";
    return (l + ", " + f);
} 
```

每个 Foo 都有一个名字，每个 User 都有一个名字和姓氏。然而，并不是每个 Foo 都有一个领导者，所以在上表中，领导者有几个空/空白值。当通过单击列标题按领导者对表格进行排序时，所有没有领导者的 Foo 都会丢失。当再次按名称排序时，它们返回，领导者为空白。

有没有什么办法解决这一问题？空值总是排在最后的偏好是最好的，但我会选择它们不会消失的任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T01:33:53.833

正确排序是`SortableDataProvider`. 如果它使项目消失，你应该修改它的逻辑。

# java - PrintWriter Sockets 发送数据 1 次后停止响应

> ID：12081411
> 
> 赞同：0
> 
> 时间：2012-08-22T21:05:50.373
> 
> 标签：java, sockets

你好呀。我正在尝试将数据从客户端发送到服务器，第一次它工作，但第二次它停止获取数据。我不知道怎么了。

[http://pastebin.com/Sc72aAqD](http://pastebin.com/Sc72aAqD)

基本上它是一个简单的键盘记录器，奇怪的是它第一次工作，但第二次它没有得到客户端的响应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T21:29:19.427

看起来您在客户端上有一个从服务器读取行的循环，如果该行是某个特定的字符串，您将一个字符串发送回服务器。

在服务器上，您似乎正在从客户端读取 15 行。但我没有看到服务器发送回客户端的任何内容。客户不会阻止：

```
while ((Client.f = in.readLine()) != null) { 
```

# javascript - 即使数组长度为1，循环传递三次的简写？

> ID：12081413
> 
> 赞同：3
> 
> 时间：2012-08-22T21:06:15.953
> 
> 标签：javascript, html

我在外部 .js 文件中有这个 javascript 函数：

```
function init() {
 var v = document.getElementsByTagName('video'),i;
 console.log(v.length);
  for (i in v) {
console.log("class:" + v[i].className + "id:" + v[i].id);
}
}
init(); 
```

以及专用 html 页面中的一个视频元素。这是脚本返回到 Chrome 控制台的内容：

```
1     //  v.length
class:video1id:bigBunny    //first pass of for loop
class:undefinedid:undefined     //??
class:undefinedid:undefined     //?? 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-22T21:08:50.103

A `NodeList`（由 返回`getElementsByTagName`）不仅具有元素，还具有两个附加属性：

```
length   (the amount of elements)
item     (to get an element, basically the same as using [i] notation) 
```

您也在迭代它们并将它们视为元素。他们不是; 他们没有班级也没有身份证。您应该改用数字`for`循环 ( `for(var i = 0; i < v.length; i++`)。这（不像`for in`）显然不能包含这样的属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T21:12:05.447

无论如何，您确实应该使用传统的 for 循环。

```
for(var i = 0; i < v.length; i++)
{
    console.log("class:" + v[i].className + "id:" + v[i].id);
} 
```

# java - 将 UTC 日期转换为毫秒

> ID：12081417
> 
> 赞同：10
> 
> 时间：2012-08-22T21:06:23.700
> 
> 标签：java, time, utc, milliseconds

我对当前 UTC 时间的毫秒数不感兴趣，我也不需要弄乱时区。我的原始日期已存储为 UTC 时间戳。

我在 UTC 时间的数据库中存储了一个日期，“2012-06-14 05:01:25”。我对日期时间不感兴趣，而只是它的日期部分。因此，在 Java 中检索日期并排除小时、分钟和秒后 - 我留下了“2012-06-14”。

如何将其转换为 UTC 毫秒？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-22T21:12:31.500

编辑：我错过了“忽略一天中的时间”部分。它现在存在，但接近尾声......

最简单的方法可能是使用[`SimpleDateFormat`](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)，适当地设置时区：

```
SimpleDateFormat format = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss", Locale.US);
format.setTimeZone(TimeZone.getTimeZone("UTC"));

Date date = format.parse(text);
long millis = date.getTime(); 
```

（设置时区在这里很重要，否则它会将值解释为*本地*时区。）

或者，如果您做的事情比这更简单，请使用[Joda Time](http://joda-time.sf.net)，它是一个更好的日期/时间 API。特别是，`SimpleDateFormat` *不是*线程安全的，而[`DateTimeFormatter`](http://joda-time.sourceforge.net/api-release/org/joda/time/format/DateTimeFormatter.html)is：

```
// This can be reused freely across threads after construction.
DateTimeFormatter formatter = DateTimeFormat.forPattern("yyyy-MM-dd HH:mm:ss")
    .withLocale(Locale.US)
    .withZoneUTC();

// Option 1
DateTime datetime = formatter.parseDateTime(text);
long millis = dateTime.getMillis();

// Option 2, more direct, but harder to diagnose errors
long millis = formatter.parseMillis(text); 
```

到目前为止，我们已经解析了整个堆。忽略日期部分的最简单方法就是将其四舍五入 - 毕竟，Java 不遵守闰秒，所以我们可以截断它：

```
long millisPerDay = 24L * 60L * 60L * 1000L; // Or use TimeUnit
long dayMillis = (millis / millisPerDay) * millisPerDay; 
```

这将“朝 1970 年四舍五入”，因此如果您的日期*在*1970 年之前，它将四舍五入到一天*结束*- 但我怀疑这不太可能成为问题。

使用 Joda Time 版本，您可以改用它：

```
DateTime dateTime = formatter.parseDateTime(text);
long millis = dateTime.toLocalDate().getLocalMillis(); 
```

我个人*不会*接受仅采用子字符串的想法。即使您实际上对*保留*小时/分钟/秒并不感兴趣，但我认为解析您所获得的内容*然后*丢弃信息是合适的。除此之外，它会使您的代码因错误数据而适当失败，例如

```
"2012-06-100" 
```

或者

```
"2012-06-14 25:01:25" 
```

指出为您提供数据的任何问题，最好发现这一点，而不是仅仅因为前 10 个字符没问题就盲目地继续。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-08T06:39:27.963

**更新：在**[Ole VV](https://stackoverflow.com/a/60924772/642706)的正确答案中查看使用*java.time*类的现代解决方案。

# 更简单

[Jon Skeet](https://stackoverflow.com/a/12081496/642706)的回答是正确的。他提出了一个很好的观点，即在解析时包含而不是截断时间信息。

但是，他的代码可以简化。尤其是因为[Joda-Time](http://www.joda.org/joda-time/)在最新版本中获得了一个重要的新方法：[`withTimeAtStartOfDay`](http://www.joda.org/joda-time/apidocs/org/joda/time/DateTime.html#withTimeAtStartOfDay()). 此方法取代了现在已弃用的所有与“午夜”相关的类和方法。

指定一个[Locale](http://docs.oracle.com/javase/8/docs/api/java/util/Locale.html)是一个好习惯，如他的代码所示。但在这种特殊情况下，不需要 Locale。

他的回答正确地暗示了 Joda-Time 库，远远优于使用 java.util.Date、.Calendar 和 java.text.SimpleTextFormat。这些课程是出了名的麻烦，应该避免。而是使用 Joda-Time 或 Java 8 中内置的新[java.time 包](http://docs.oracle.com/javase/8/docs/api/java/time/package-summary.html)（受 JSR 310 定义的 Joda-Time 启发）。

# 一天的第一刻

[如果您想要的是自纪元](http://en.wikipedia.org/wiki/Epoch_%28reference_date%29)以来的毫秒数，则您不能忽略时间。我怀疑您想要的是将时间更改为一天中的第一刻。在 UTC 中，这始终表示时间`00:00:00.000`。[但请注意，在当地时区，由于夏令时](http://en.wikipedia.org/wiki/Daylight_saving_time)和可能的其他异常情况，第一时刻可能是不同的时间。

# ISO 8601

您的字符串几乎采用标准[ISO 8601](http://en.wikipedia.org/wiki/ISO_8601)格式，但我们需要将 a 换成`T`中间的 SPACE。然后我们可以将生成的字符串直接提供给 Joda-Time，因为 Joda-Time 具有默认用于标准字符串的内置[格式化程序。](http://www.joda.org/joda-time/apidocs/org/joda/time/format/DateTimeFormatter.html)

# 示例代码

以下示例代码假定您的问题的目的是将字符串解析为[UTC](http://en.wikipedia.org/wiki/Coordinated_Universal_Time)时区中的日期时间值，将时间调整为一天中的第一刻，然后转换为自[Unix 纪元](http://en.wikipedia.org/wiki/Unix_time#Encoding_time_as_a_number)以来的毫秒数（开始1970 年 UTC）。

```
String inputRaw = "2012-06-14 05:01:25";
String input = inputRaw.replace( " ", "T" );  // Replace SPACE with a 'T'.
DateTime dateTime = new DateTime( input, DateTimeZone.UTC );  // Parse, assuming UTC.
DateTime dateTimeTopOfTheDay = dateTime.withTimeAtStartOfDay();  // Adjust to first moment of the day.
long millisecondsSinceUnixEpoch = dateTimeTopOfTheDay.getMillis();  // Convert to millis. Use a 'long', not an 'int'. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-03-30T05:53:20.230

## java.time 和 JDBC 4.2

我正在提供现代答案。这些天（以及过去几年）您应该使用现代 Java 日期和时间 API java.time 来进行日期和时间工作。从 JDBC 4.2 开始，您可以直接从数据库中检索 java.time 对象（并将它们存储到其中）。现代的 JPA 实现（至少从 Hibernate 5 开始是 Hibernate）将很乐意这样做。所以忘记`SimpleDateFormat`,`Date`和大多数旧答案中使用的其他旧类。上面提到的设计很糟糕，而 java.time 使用起来更好。

## 从数据库中检索正确的日期时间对象

我还建议您不要将 UTC 时间作为字符串从数据库中检索。如果 SQL 中的数据类型是`timestamp with time zone`（推荐用于 UTC 时间），则检索`OffsetDateTime`. 例如：

```
 PreparedStatement pStmt = yourDatabaseConnection
            .prepareStatement("select utc_time from your_table where id = 7;");
    ResultSet rs = pStmt.executeQuery();
    if (rs.next()) {
        OffsetDateTime utcDateTime = rs.getObject("utc_time", OffsetDateTime.class);
        long millisecondsSinceEpoch = utcDateTime.truncatedTo(ChronoUnit.DAYS)
                .toInstant()
                .toEpochMilli();
        System.out.println("Milliseconds since the epoch: " + millisecondsSinceEpoch);
    } 
```

如果 SQL 中的类型是`dateTime`或`timestamp`没有时区，我们可能需要检索一个`LocalDateTime`来代替（详细信息取决于您的 JDBC 驱动程序和数据库会话的时区）。它以同样的方式进行。要将您的转换`LocalDateTime`为`OffsetDateTime`，请参阅下面的转换。

## 如果您需要从字符串转换

如果您无法避免将 UTC 时间作为问题中的字符串，请将其解析为 a`LocalDateTime`并从那里转换。例如：

```
 DateTimeFormatter formatter = DateTimeFormatter.ofPattern("uuuu-MM-dd HH:mm:ss");
    String utcTimeString = "2012-06-14 05:01:25";
    long millisecondsSinceEpoch = LocalDateTime.parse(utcTimeString, formatter)
            .atOffset(ZoneOffset.UTC)
            .toInstant()
            .toEpochMilli();
    System.out.println("Milliseconds since the epoch: " + millisecondsSinceEpoch); 
```

输出：

> 自纪元以来的毫秒数：1339650085000

## 关联

*   [Oracle 教程：日期时间](https://docs.oracle.com/javase/tutorial/datetime/)解释如何使用 java.time。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T21:10:18.673

将 Date 对象与 SimpleDateFormat 结合使用。

Date 中有一个名为 getTime() 的方法，它将为您返回毫秒数。

解决您的问题的示例：

```
Date truc = new SimpleDateFormat( "y-m-d").parse( "2010-06-14");
System.out.println(truc.getTime()); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-07T22:38:10.337

```
SimpleDateFormat ft = new SimpleDateFormat ("yyyy-MM-dd"); //or whatever format you have
Date t = ft.parse('2014-03-20');

String result = String.format("%tQ", t);

System.out.printf("%tQ", t); 
```

这里有两种方法：

1.  您将结果毫秒放入变量结果中
2.  直接打印出来。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-02-10T22:34:31.837

我使用一种简单直接的方法：

```
Date date = new Date(utcDateInString);
long utcDateInMilliSeconds = date.getTime(); 
```

# android - 比较android中的两个整数

> ID：12081421
> 
> 赞同：1
> 
> 时间：2012-08-22T21:06:49.580
> 
> 标签：android, android-edittext

我想比较两组数字。第一个我将在代码中随机生成。第二个将输入到 EditText 中。

我想比较这两个数字，看看它们是否匹配。

随机数：

```
public static int random() {
   if (randomNumberGenerator == null)
      initRNG();

   return randomNumberGenerator.nextInt();
}

private static Random randomNumberGenerator;
private static synchronized void initRNG() {
   if (randomNumberGenerator == null)
      randomNumberGenerator = new Random();
} 
```

显示随机选择的数字

```
display = (TextView) findViewById (R.id.textView1);
display.setText ("Random Number:" + random ()); 
```

如何比较这两个数字？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T21:13:04.987

您可以使用以下内容：

```
display = (TextView) findViewById (R.id.textView1);
EditText myEditText = ...; // Find your EditText, maybe by ID?
int random = random(); // Get your random value
display.setText("Random Number:" + random()); // Show the random number
int numberEntered = -1; // Default value for numberEntered; should be a value you wouldn't get randomly
try {
    // Here, we try to make a number out of the EditText; if it fails, we get a Toast error
    numberEntered = Integer.parseInt(myEditText.getText().toString());
} catch (NumberFormatException nfe) {
    Toast.makeText(myEditText.getContext(), "That's not a number!", Toast.LENGTH_LONG).show(); // Tell the user they didn't enter a number
}
if (random == numberEntered) {
    // HAPPY DAY, THEY MATCH!
} else {
    // No luck :(
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-22T21:08:19.437

只需在两个数字之间进行减法，如果结果为 0，则两个数字都匹配。

编辑：减法只是表明两者都是数字的一种方式。显然，直接比较这两个数字比然后减去和比较更有意义。

# ios - 让 cookie 在 iOS5 中与 PhoneGap 一起工作？

> ID：12081426
> 
> 赞同：0
> 
> 时间：2012-08-22T21:07:28.220
> 
> 标签：ios, ios5, cookies, cordova

我正在尝试使持久性 cookie 与 PhoneGap 和 iOS5 一起工作，并且无法让它在应用程序的硬关闭之外持续存在。经常记录的添加方法

```
//special setting to accept cookies via ajax-request
NSHTTPCookieStorage *cookieStorage = [NSHTTPCookieStorage 
                                      sharedHTTPCookieStorage]; 
[cookieStorage setCookieAcceptPolicy:NSHTTPCookieAcceptPolicyAlways]; 
```

在 iOS5 中不起作用，或者我只是不确定放置它的正确位置。我正在使用 Cordova 1.8.1。

如果相关，我使用与此类似的代码进行持久存储：[https ://gist.github.com/3243819](https://gist.github.com/3243819)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T15:26:21.937

It's probably a better idea to use PhoneGap's device storage methods, see [http://docs.phonegap.com/en/2.2.0/cordova_storage_storage.md.html#Storage](http://docs.phonegap.com/en/2.2.0/cordova_storage_storage.md.html#Storage)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T15:10:55.523

显然 iOS 5 默认禁用 Cookie

# html - 为什么嵌套 div（Bootstrap 示例）如此普遍？

> ID：12081435
> 
> 赞同：0
> 
> 时间：2012-08-22T21:08:18.300
> 
> 标签：html, css, twitter-bootstrap

Bootstrap 是我注意到这种做法的众多网站之一，对我来说这似乎很糟糕，但它已经足够广泛，并且由比我更有经验的人完成，我认为我一定错过了一些东西。以[Bootstrap](http://twitter.github.com/bootstrap/)的 2.1.0 版本为例，如果您查看源代码，第 44-46 行（页面顶部菜单）是这些：

```
<div class="navbar navbar-inverse navbar-fixed-top">
  <div class="navbar-inner">
    <div class="container"> 
```

我了解每个类的相关 CSS 属性，以及使用在尽可能多的情况下对尽可能多的人有用但已基本完成设计的框架的缺点，我现在正试图清理我的标记。当 2 个（据我所知）就足够时，是否有理由使用 3 个 div？

虽然 '.container' 具有设置的宽度、清晰的属性和用于居中的边距设置，但我不明白为什么 '.navbar-inner' 位于与其父级不同的 div 中。将它作为一个类添加到它的父 div 并减少一层嵌套似乎更有意义。

是否有理由让我保留这个结构（或者就此而言，我应该将其纳入未来的编码实践中）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T21:20:45.230

嵌套 div 允许您单独设置和访问它们，这可以派上用场。但这当然取决于您的实际需求，并且正如您所说，只需使用 css 而无需过多的 div 就可以完成很多工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T21:16:44.620

这就是样式（在这种情况下，例如宽度/高度、边框、边距、填充）在不同浏览器（IE 与其他浏览器）上效果最佳的方式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-22T22:12:40.797

在大多数情况下，您可以通过组合几个类来降低标记的复杂性，例如

```
<div class="navbar navbar-inverse navbar-fixed-top navbar-inner container"> 
```

或者

```
<div class="navbar-inverse-fixed-top-inner-container"> 
```

但是要使这种标记起作用，您必须生成大量的 CSS 规则来满足每种情况。

通过将 CSS 中的大多数用例和标记分开，您最终会得到一些可读性很强的东西，并且在 CSS 和 HTML 方面都不那么繁重。

这也使您可以满足大量用户的大量组合。

* * *

恕我直言，该层次结构背后的主要原则是**可扩展性**。因为您可以轻松移除`.container`以放置其他东西 - 或者只是将其移动到其他地方。这只是供以后使用，当您可能在 10 年后再次阅读您的代码时。

我想指出的另一个原则是**封装**。如果您使用面向对象的语言（JS、C++、C#、Java 等）进行编程，那么您必须熟悉它。

根据您的示例：

```
<div class="navbar navbar-inverse navbar-fixed-top">
    <div class="navbar-inner">
        <div class="container"> 
```

`.container`不应该*知道*它的容器——你似乎同意这一点——但也不应该`.navbar-inner`知道它自己的`.navbar`状态：它是固定的、反向的，甚至不是导航栏。

应该只为它的`.navbar-inner`孩子提供适当的行为，我认为这就是为什么最好将它分开，即使你可以将它与导航栏混合。

* * *

也许在某些新版本中，或者只是想更改默认行为，导航栏与其内部可能存在冲突。

Let's try to avoid that and keep the intended structure. It doesn't look so messy anyway...

# asp.net - 您如何识别来自多个 html 文件输入的文件？

> ID：12081440
> 
> 赞同：0
> 
> 时间：2012-08-22T21:08:27.533
> 
> 标签：asp.net, asp.net-mvc-3, forms

我目前有一个包含多个文件输入的表单：

```
Resume: <input type="file" id="resume" name ="files" /><br />
Cover Letter: <input type="file" id="coverLetter" name ="files" /><br /> 
```

在我的后端：

```
[HttpPost]
public ActionResult Apply(ApplyModel form, List<HttpPostedFileBase> files) 
{
    if (!ModelState.IsValid)
    {
        return View(form);
    }
    else if (files.All( x => x == null))
    {
       ModelState.AddModelError("Files", "Missing Files");
       return View(form);
    }
    else
    {
        foreach (var file in files)
        {
            if (file.ContentLength > 0)
             {
                var fileName = Path.GetFileName(file.FileName);
                var path = Path.Combine(Server.MapPath("~/uploads"), fileName);
                file.SaveAs(path);
                <!--- HERE -->
            }
        }
    }
} 
```

我的问题是如何确定文件是来自 id resume 还是 coverLetter 在此处评论处。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T21:10:05.197

你无法识别它。您需要使用不同的名称：

```
Resume: <input type="file" id="resume" name="coverLetter" /><br />
Cover Letter: <input type="file" id="coverLetter" name="resume" /><br /> 
```

进而：

```
[HttpPost]
public ActionResult Apply(ApplyModel form, HttpPostedFileBase coverLetter, HttpPostedFileBase resume)
{
    ... now you know how to identify the cover letter and the resume
} 
```

并避免大量动作参数使用视图模型：

```
public class ApplicationViewModel
{
    public ApplyModel Form { get; set; }
    public HttpPostedFileBase CoverLetter { get; set; }
    public HttpPostedFileBase Resume { get; set; }
} 
```

进而：

```
[HttpPost]
public ActionResult Apply(ApplicationViewModel model)
{
    ... now you know how to identify the cover letter and the resume
} 
```

# vb6 - 将 VB6 引用设置为 Microsoft Word 97（已安装 Word 2007）

> ID：12081450
> 
> 赞同：0
> 
> 时间：2012-08-22T21:09:05.267
> 
> 标签：vb6, ms-word

我需要在我的 VB6 开发项目中使用对 Microsoft Word 97 的引用。（说来话长——简而言之，如果我使用对 MSWord97 的引用，那么我可以支持 Word 97+）。

我在我的开发机器上使用 Microsoft Word 2007。理想情况下，如果我能侥幸不安装 Word97，那就太好了。

在 VB6 中，我尝试设置对 C:\Software\Microsoft\Office97Pro\OFFICE\mso97.dll 的引用（软件路径 - 未安装），但这不起作用。然后我尝试了 regsvr32 mso97.dll 但这给了我错误：已加载 mso97.dll，但找不到 DllRegisterServer 入口点。

任何人都知道我需要做什么才能让它工作吗？或者我需要在我的机器上安装 Word 97 才能正常工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T22:48:41.573

添加对项目的引用时，查找`MS Word x.0 Object Library`x 是您要使用的 MS Word 版本的位置。我相信您可以参考比 Word 2007（12.0 版）更低的版本。寻找 8.0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T08:33:46.963

听起来您基本上想要按照[为多个 Office 版本编写自动化客户端中](http://support.microsoft.com/kb/244167)的建议进行操作，但忽略了有关使用后期绑定的建议。

涉及的类型库是 MSWORD8.OLB，但我不记得是否有任何合法的方法可以在没有 Word 97 或包含 Word 的 Office 97 版本的情况下获得它。我也不确定注册此 tylepib 对您的 Word 2007 安装有何影响，因为它们可能共享许多 ClassID 值。

在 VC++ 文章[PRB：Automation of Office Using #import Can Fail if Multiple Versions of Office Are Installed 中，](http://support.microsoft.com/kb/301321)微软似乎暗示这可能是一个可行的策略，只要您引用正确的 OLB。这对于 VB6 来说可能比在 C++ 中的问题要少，因为 VB6 不使用 VC++ #import 语义来定位类型库。再一次，他们可能指的是运行时行为，因为解释的结论是再次建议后期绑定。

文章[WD: How to Get the Word for Windows Type Library](http://support.microsoft.com/kb/143434)提供了 Word 6 和 Word 7 类型库的链接（链接可能不再有效），但没有针对 Word 97 的链接，他们建议您通过安装 Word 97 来获取。

无论如何，使用 Word 97 中的常量、枚举等听起来很安全，并对所有对象使用后期绑定。这个“半条面包”总比没有好。您仍然可以使用早期绑定声明进行初始开发以获得“智能感知”帮助，然后返回并将所有早期绑定对象声明更改为后期绑定`As Object`并替换`Set X = New TYPE`为相应的后期绑定`CreateObject()`调用，留下实际的强键入作为尾随注释。还可以使用条件编译`#If/#Else`块使稍后更容易返回到早期绑定。

由于今天可能无法合法获取 MSWORD8.OLB，您也可以考虑[关闭：“Visual Basic for Applications 中的内置常量”（WC0993）](http://support.microsoft.com/kb/112671)，它提供了包含 VB .BAS 模块的下载，该模块定义了许多旧版本 Word 和其他 Office 应用程序。下载链接有效 - 至少现在！

由于命名常量是类型库的主要原因（考虑到只有后期绑定才是真正安全的），这可能不是一个糟糕的折衷方案。您可以获取所需的 .BAS 文件，对其进行清理（其中肯定有一些缺陷），甚至可以将其转换为仅包含这些常量和枚举的自定义“通用字”TLB。就此而言，可能有人已经完成了这项工作。不过，我建议您在编写自己的“VB .BAS to ODL/IDL”编译器之前尝试一些搜索。

# android - 关闭应用程序时重置默认启动器

> ID：12081451
> 
> 赞同：1
> 
> 时间：2012-08-22T21:09:07.093
> 
> 标签：android, android-launcher, android-homebutton

我使用自定义启动器创建了一个具有儿童锁的儿童应用程序，但是我有一个小问题。当应用程序关闭并按下主页按钮时，将显示选择默认启动器的对话框。有没有办法在应用程序关闭时重置默认启动器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T21:18:49.180

您不能将任何特定应用设为默认应用。但是，您可以使用`PackageManager`and`setComponentEnabledSetting()`来禁用具有该`HOME`类别的活动。当用户想要再次选择使用您的主屏幕时，重新启用该功能。

# iframe - 带有 Windows Azure 托管网页 + IFrame + X-Frame-Options 的 Microsoft Dynamics CRM Online

> ID：12081455
> 
> 赞同：5
> 
> 时间：2012-08-22T21:09:22.737
> 
> 标签：iframe, azure, dynamics-crm-2011, access-control, x-frame-options

我正在尝试使用 Microsoft Dynamics CRM Online，其中 Windows Azure 托管一个自定义网页，该网页显示在 Microsoft Dynamics CRM Web 应用程序的 IFRAME 中。

我已阅读[http://msdn.microsoft.com/en-us/library/gg509061](http://msdn.microsoft.com/en-us/library/gg509061)（带有 Windows Azure 托管网页的 Microsoft Dynamics CRM Online）并遵循[http://social.technet.microsoft.com/上的说明wiki/contents/articles/2590.aspx](http://social.technet.microsoft.com/wiki/contents/articles/2590.aspx)（使用访问控制服务 v2.0 的安全 Windows Azure Web 角色 ASP.NET Web 应用程序）

我现在有一个 Windows Azure 网页，它显示一个 Windows Live Id 屏幕以进行登录。

问题是，当我将它放入 Dynamics 中的 IFrame 时，我得到以下信息：

此内容不能在框架中显示为帮助保护您输入本网站的信息的安全性，此内容的发布者不允许其在框架中显示。

这是由于 Windows Live Id 登录服务的 HTTP 标头“X-Frame-Options:deny”阻止 Internet Explorer 在框架中显示页面。当我已经登录 Windows Live Id 并且网页尝试对我进行身份验证时，甚至会发生这种情况。

那么这意味着如何工作，因为第一个 Microsoft 页面暗示它可以通过“带有 Windows Azure 托管网页的 Microsoft Dynamics CRM Online”来完成，并且可以选择显示在 IFRAME 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-07T13:26:17.480

[这篇文章](http://blogs.msdn.com/b/devkeydet/archive/2013/01/14/crm-online-amp-windows-azure-improving-the-sso-experience.aspx)建议了一种解决方法，方法是在新窗口中打开登录页面。这可以通过 standard 来实现`window.open(...)`，但是如果您的用户要使用 Outlook 客户端，您将不得不跳过一些额外的环节，因为嵌入式浏览器不会与用户的默认浏览器共享会话数据。（一种解决方法是使用`Xrm.Utility.openWebResource(...)`重定向到预期页面的自定义 HTML 页面。）

# php - 当表单验证器在 Ci 中处于活动状态时，对 input->post() 进行 XSS 过滤

> ID：12081457
> 
> 赞同：0
> 
> 时间：2012-08-22T21:09:36.147
> 
> 标签：php, codeigniter, xss

我想知道。我在 codeigniter 中使用表单验证类。在我的大部分输入字段中，我都打开了 xss 过滤：

```
$this->form_validation->set_rules('description', 'Description', 'required|xss_clean'); 
```

我的问题。输入类本身也有一个 XSS 过滤参数。是否也有必要设置这个参数，即使它已经通过验证器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T10:22:04.433

Input 类能够自动过滤输入以防止跨站点脚本攻击。

**如果您希望过滤器在每次遇到 POST 或 COOKIE 数据时自动运行，您可以通过打开`application/config/config.php`文件并设置**它来启用它：

```
$config['global_xss_filtering'] = TRUE; 
```

或者

```
$this->input->post('some_data', TRUE); // Specific item
$this->input->post(NULL, TRUE);        // All POST items 
```

而且您无需使用准备功能 (xss_clean)

# python - 在 Python 中求解矩阵形式的非线性方程组

> ID：12081463
> 
> 赞同：1
> 
> 时间：2012-08-22T21:09:55.447
> 
> 标签：python, matrix, equations, nonlinear-functions

我正在尝试求解 AX=X 形式的非线性方程组，其中，

A = M×M 矩阵

X = M×1 矩阵

因此，我总共有 M (=200) 个方程（和 M 个未知数）。

进一步来说，

A = [f11(x,y) f12(x,y) .... f1m(x,y),

```
 f21(x,y) f22(x,y) .....f2m(x,y),

 ..        ..           ..

 fm1(x,y) fm2(x,y) .... fmm(x,y)] 
```

X = [V1，

```
 V2,

   V3,
   .
   .
   Vm-2,
   0.33,
   0.33] 
```

因此，X 有 M-2 个未知数（V1，V2 ... Vm-1），A 有两个（x 和 y）。A 的元素是 x 和 y 的线性函数。

我在 scipy.fsolve 和 sympy.nsolve 上做了功课，但他们似乎不接受矩阵格式的方程。此外，由于有 200 个方程，每个方程都有所有未知数，因此逐个消除变量是不切实际的。

我对 python 比较陌生，所以非常感谢任何帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T22:36:25.437

令 f [ij] (x,y) = a [i] x + b [j] y。设 a = (a [1] , ..., a [m] ), b = (b [1] , ..., b [m] ), v = (V [1] , ... V [m-2] , 1/3, 1/ 3）是真正的列向量。然后

A = [f [ij] (x,y)] [m×m] = [a [i] x + b [j] y] [m×m] = [a [i] x] [m×1] [b [j] y] [1×m] = ([a [i] ] [m×1] x)([b [j] ] [1×m] y)

您的方程是 Av = v，或 Av = Iv（其中 I 是 m×m 单位矩阵），因此您想要求解 (AI)v = 0。这让人想起特征值问题。该特征值问题的[特征方程](https://en.wikipedia.org/wiki/Characteristic_polynomial#Characteristic_equation)是 0 = det(AI) = det(([a [i] ] [m×1] x)([b [j] ] [1×m] y) - I)，其中 det 是行列式（我固定1) 处的特征值。

一种可能的方法是对 x 和 y 数值求解 det(([a [i] ] [m×1] x)([b [j] ] [1×m y) - I) = 0 （使用像][牛顿法](https://en.wikipedia.org/wiki/Newton%27s_method)这样的求根算法） ，产生一个常数矩阵 A。

接下来，返回并使用线性方程求解器来求解 (AI)v = 0 以找到 v [1] , v [2] , ..., v [m-2]使用您以数值方式求解的常数矩阵 A。不幸的是，这不会保留 v 底部的 1/3 常量，因此您必须返回并重做上一步几次，直到您得到一个矩阵 A，该矩阵 A 接近最后两个值的 1/3 .

* * *

另一种解决方案是将整个事物粘在非线性方程求解器中。这种方法将比我上面解释的方法慢。

# tomcat - web.xml 中的 jsp 文件在 tomcat 中不起作用

> ID：12081467
> 
> 赞同：0
> 
> 时间：2012-08-22T21:10:15.163
> 
> 标签：tomcat

我有一个示例 web.xml，如下所示

```
<servlet>
    <servlet-name>Authorize</servlet-name>
    <jsp-file>/WEB-INF/jsp/facebook/authorize.jsp</jsp-file>
</servlet>

<servlet>
    <servlet-name>postAuthorize</servlet-name>
    <jsp-file>/WEB-INF/jsp/facebook/post_authorize.jsp</jsp-file>
</servlet>

<servlet>
    <servlet-name>referrerLink</servlet-name>
    <jsp-file>/WEB-INF/jsp/facebook/refer.jsp</jsp-file>
</servlet>

<servlet>
    <servlet-name>checkin</servlet-name>
    <jsp-file>/WEB-INF/jsp/facebook/checkin.jsp</jsp-file>
</servlet> 
```

如果我访问`/checkins/facebook/refer`（签入是我的上下文路径），我将得到以下堆栈跟踪。

```
javax.servlet.ServletException: No servlet class has been specified for servlet referrerLink
org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
java.lang.Thread.run(Thread.java:662) 
```

我有 jsp 目录和 WEB-INF。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T22:33:31.013

如果该属性`metadata-complete="true"`存在于 web.xml 的顶级元素中，请尝试将其删除。

# php - codeigniter - 如何使用 jquery 在 div 标签中显示弹出表单

> ID：12081470
> 
> 赞同：0
> 
> 时间：2012-08-22T21:10:19.907
> 
> 标签：php, jquery, codeigniter

我想在我的页面上有一个按钮，显示一个包含文本框和两个按钮的表单（在一个 div 中）。
我对 jquery 还不太熟悉，但我确实做了一些阅读，并尝试将我的代码建立在以下示例中：http: [//jqueryui.com/demos/dialog/#modal-form](http://jqueryui.com/demos/dialog/#modal-form)

我有一个看起来像这样的按钮：

```
 <input type='button' class='btn btn-info' value='Change VLAN' id='changevlan'/> 
```

和一个 div，其中包含我想要的弹出表单的详细信息：

```
 <div id="dialog-form" title="Change Vlan">
<p>You must supply a new vlan number</p>

<form>
<fieldset>
    <label for="vlan">Vlan Number:</label>
    <input type="text" name="vlan" id="vlan" class="text ui-widget-content ui-corner-all" />
</fieldset>
</form>
 </div> 
```

然后在我的页面底部，我包含了 jquery 和 jquery ui 库（我在底部加载以加快页面加载速度）并且我有以下 javascript：（我基于我在本文开头提到的示例.)

```
<script type="text/javascript">
$(function() {
    // a workaround for a flaw in the demo system (http://dev.jqueryui.com/ticket/4375), ignore!
    $( "#dialog:ui-dialog" ).dialog( "destroy" );

    var vlan = $( "#vlan" ),
      tips = $( ".validateTips" );

    function updateTips( t ) {
        tips
            .text( t )
            .addClass( "ui-state-highlight" );
        setTimeout(function() {
            tips.removeClass( "ui-state-highlight", 1500 );
        }, 500 );
    }

    function checkLength( o, n, min, max ) {
        if ( o.val().length > max || o.val().length < min ) {
            o.addClass( "ui-state-error" );
            updateTips( "Length of " + n + " must be between " +
                min + " and " + max + "." );
            return false;
        } else {
            return true;
        }
    }

    function checkRegexp( o, regexp, n ) {
        if ( !( regexp.test( o.val() ) ) ) {
            o.addClass( "ui-state-error" );
            updateTips( n );
            return false;
        } else {
            return true;
        }
    }

    $( "#dialog-form" ).dialog({
        autoOpen: false,
        height: 300,
        width: 350,
        modal: true,
        buttons: {
            "Change Vlan": function() {
                var bValid = true;
                allFields.removeClass( "ui-state-error" );

                bValid = bValid && checkLength( vlan, "vlan", 1, 1 );
                bValid = bValid && checkRegexp( vlan, /^([0-9])+$/i, "vlan must be numeric." );

                if ( bValid ) {
                    //this is where I need to redirect to another URL passing the vlan number.
                    $( this ).dialog( "close" );
                }
            },
            Cancel: function() {
                $( this ).dialog( "close" );
            }
        },
        close: function() {
            allFields.val( "" ).removeClass( "ui-state-error" );
        }
    });

    $( "#changevlan" )
        .button()
        .click(function() {
        alert('in here');
            $( "#dialog-form" ).dialog( "open" );
        });
});
</script> 
```

如您所见，我插入了一条警告语句以确保我正在进入 javascript。但我没有收到警报消息。并且 div 表单的内容仅在最初呈现时显示在主页上。

到目前为止我检查过的内容：

我试图仔细检查应该触发 div 表单显示的按钮的名称是否与我在 javascript 函数中查找的变量的名称相匹配：

```
 $( "#changevlan" )
        .button()
        .click(function() {
        alert('in here');
            $( "#dialog-form" ).dialog( "open" );
        }); 
```

我还确保我的 div 表单名为#dialog-form

但我不太确定还能尝试什么。如果您有任何建议，我将不胜感激。我还需要知道如何访问文本框的内容，然后将用户重定向到新的控制器和方法，将 vlan 号作为参数传递。也许我可以做一个 window.location 类型的事情......

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-26T17:40:26.913

你不需要更多的库，只需制作一个简单的 jQueryUI .dialog，在对话框的“div”元素内放置一些来自 CI 的内联 php，例如`<div id="dlgPopUpForm"><?= $this->load->view('dialogView.php'); ?></div>`，然后当然构建你的表单`dialogView.php`。

在运行时，php 将被读入 div，你用来创建对话框的 jquery 选项将处理其余部分。就像是`$("#dlgPopUpForm").dialog({ autoOpen: false, modal: true }); $("#someButton").click(function(e){ $("#dlgPopUpForm").dialog("open"); });`

不要忘记在表单视图页面上包含表单的 javascript（`dialogView.php`在我的示例中）

也许当我不那么懒惰的时候，我会在今天晚些时候给你举个例子，不过，它很简单

# php - Apigen 无法为替换的库生成文档

> ID：12081472
> 
> 赞同：0
> 
> 时间：2012-08-22T21:10:31.677
> 
> 标签：php, codeigniter, documentation

根据 codeigniter 文档，这就是我们应该用自己的库替换本地库的方法：

> 只需将您的类文件命名为与本机库相同的名称，就会导致 CodeIgniter 使用它而不是本机库。要使用此功能，您必须将文件和类声明命名为与本机库完全相同。

但是当我给两个类提供相同的名称时，Apigen 无法为它们生成文档，而是显示以下错误消息：

> 无法生成此类的文档。
> 
> 类最初是在 application/libraries/Session.php 中声明的，并且由于以下原因无效：
> 
> 类在 system/libraries/Session.php 中重新声明。

（在这种情况下，我试图替换会话类）。

在这种情况下，哪个是有罪的，codeigniter 还是 Apigen？以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T15:43:14.433

您可以使用该`--exclude`参数跳过您在 下替换的类`system`。手动列出覆盖的类可能很无聊，但您可以轻松编写脚本：

```
$app_files = glob('application/{core,libraries}/*.php', GLOB_BRACE);
foreach ($app_files as $file) {
    $sys_file = preg_replace('/^application\//', 'system/', $file);
    if (is_file($sys_file)) {
        print  ' --exclude '.realpath($sys_file); // looks like it has to be a full path
    }
}
print "\n"; 
```

并像这样在 CI 根目录中调用生成：

```
$ apigen `php overriden_classes.php` --source . --destination apigenout 
```

# ruby-on-rails-3 - Rails 设置belongs_to one 关联

> ID：12081473
> 
> 赞同：0
> 
> 时间：2012-08-22T21:10:51.937
> 
> 标签：ruby-on-rails-3, activerecord, associations, ruby-on-rails-3.2

我遇到了这个关联的问题：

分支 belongs_to 参照 参照 has_many 分支

在我的情况下，一个分支只属于一个参照物

我需要去做

```
branch.referent.id 
```

目前返回 nil，因为 Branch 可以为 Rails 提供许多参考

什么是最好的解决方案？

# java - 具有 int 节点的数学树的 Java 结构

> ID：12081474
> 
> 赞同：0
> 
> 时间：2012-08-22T21:10:51.980
> 
> 标签：java, tree

在 Java 中，`Tree`表示具有以下属性的树的最佳结构是：

*   所有节点都是**唯一** `int`的；
*   树的深度由下式给出`int d > 0`
*   一个节点可以有多少个孩子没有限制

我需要做的操作：

*   仅遍历位于任何节点**下一级的子节点**
*   添加节点
*   删除一个子树，它是一个节点，它的所有子节点一直向下
*   提取子树，即在单独的树中定位和复制（克隆）

我不需要的操作：

*   编辑节点

属性非常适合 a `Tree`，因此在性能方面可能有一些超级实现可用。`XMLTree`管他呢。

目前我正在使用数组来存储元素，但我发现它并不微妙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T21:23:06.853

`Node`这是可用于形成树结构的类的基本示例。编写以深度优先或广度优先方式遍历所有子节点的方法有一些复杂性。

作为替代方案，您可以考虑使用[`DefaultMutableTreeNode`](http://docs.oracle.com/javase/7/docs/api/javax/swing/tree/DefaultMutableTreeNode.html)which 免费提供这些方法 ( [`depthFirstEnumeration()`](http://docs.oracle.com/javase/7/docs/api/javax/swing/tree/DefaultMutableTreeNode.html#depthFirstEnumeration%28%29), [`breadthFirstEnumeration()`](http://docs.oracle.com/javase/7/docs/api/javax/swing/tree/DefaultMutableTreeNode.html#breadthFirstEnumeration%28%29))。此节点实现还允许您通过调用附加用户对象[`setUserObject(Object)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/tree/DefaultMutableTreeNode.html#setUserObject%28java.lang.Object%29)。缺点是实现可能不如编写自己的结构那么紧凑，因此它实际上取决于树的大小。

```
public class Node {
  private final int value;
  private final List<Node> children;

  public Node(int value) {
    this.value = value;
    this.children = new LinkedList<Node>();
  }

  public int getValue() {
    return value;
  }

  public List<? extends Node> getChildren() {
    return Collections.unmodifiableList(children);
  }

  public void addChild(Node child) { 
    children.add(child);
  }
} 
```

# javascript - javascript倒计时在每个页面加载时重置？

> ID：12081476
> 
> 赞同：-3
> 
> 时间：2012-08-22T21:11:01.157
> 
> 标签：javascript, countdown

我完全迷失了这段 javascript（查看源代码）：[http ://www.fff2012.com](http://www.fff2012.com)

以及打开页面的以下 php：

这是一个倒数计时器，需要在每个页面加载后刷新。

```
 <?php
function real_date_diff($date1, $date2 = NULL)  
{
    $diff = array();

    if(!$date2) {
        $cd = getdate();
        $date2 = $cd['year'].'-'.$cd['mon'].'-'.$cd['mday'].' '.$cd['hours'].':'.$cd['minutes'].':'.$cd['seconds'];
    }

    $pattern = '/(\d+)-(\d+)-(\d+)(\s+(\d+):(\d+):(\d+))?/';
    preg_match($pattern, $date1, $matches);
    $d1 = array((int)$matches[1], (int)$matches[2], (int)$matches[3], (int)$matches[5], (int)$matches[6], (int)$matches[7]);
    preg_match($pattern, $date2, $matches);
    $d2 = array((int)$matches[1], (int)$matches[2], (int)$matches[3], (int)$matches[5], (int)$matches[6], (int)$matches[7]);

    for($i=0; $i<count($d2); $i++) {
        if($d2[$i]>$d1[$i]) break;
        if($d2[$i]<$d1[$i]) {
            $t = $d1;
            $d1 = $d2;
            $d2 = $t;
            break;
        }
    }

    $md1 = array(31, $d1[0]%4||(!($d1[0]%100)&&$d1[0]%400)?28:29, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31);
    $md2 = array(31, $d2[0]%4||(!($d2[0]%100)&&$d2[0]%400)?28:29, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31);
    $min_v = array(NULL, 1, 1, 0, 0, 0);
    $max_v = array(NULL, 12, $d2[1]==1?$md2[11]:$md2[$d2[1]-2], 23, 59, 59);
    for($i=5; $i>=0; $i--) {
        if($d2[$i]<$min_v[$i]) {
            $d2[$i-1]--;
            $d2[$i]=$max_v[$i];
        }
        $diff[$i] = $d2[$i]-$d1[$i];
        if($diff[$i]<0) {
            $d2[$i-1]--;
            $i==2 ? $diff[$i] += $md1[$d1[1]-1] : $diff[$i] += $max_v[$i]-$min_v[$i]+1;
        }
    }

    return $diff;
}
?>

I'm not sure what to edit in order to make the countdown not refresh on each page load. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T21:23:10.603

每次我加载页面时，倒计时插件的参数都是相同的（见下文 - 20 天 10 秒）。您必须计算事件发生前的天/小时/分钟/秒，并将此计算的结果作为参数传递以正确初始化倒计时。看起来目前这不是动态生成的 - 但我无法通过查看源代码来查看 PHP 代码，因此我无法确定您目前正在尝试做什么。

```
 (function($){
            soundManager.setup({
                url: 'js/swf/',
                debugMode: false
            });
            $(window).load(function(){

                    $('#countdown').countdown({
                                                    timestamp   : { 'days'      : 20,
                                        'hours'     : 0,
                                        'minutes'   : 0,
                                        'seconds'   : 10                                            },
                        duration    : 360,

                        soundURL    : 'js/flip.mp3',
                        volume: 25,
                        callback    : function(days, hours, minutes, seconds){

                                var message = "";

                                message += days + " day" + ( days==1 ? '':'s' ) + ", ";
                                message += hours + " hour" + ( hours==1 ? '':'s' ) + ", ";
                                message += minutes + " minute" + ( minutes==1 ? '':'s' ) + " and ";
                                message += seconds + " second" + ( seconds==1 ? '':'s' ) + " <br />";

                                $('.callback').html(message);
                            }
                        })

                })
            })(jQuery) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T21:24:06.603

首先，您页面上的倒数计时器是在 java 脚本中而不是 PHP 中（我已经编辑了您的问题，希望 mods 可以解决）。

您的 java 脚本直接设置倒计时的开始：

```
$('#countdown').countdown({
timestamp   : { 'days'      : 20,
'hours'     : 0,
'minutes'   : 0,
'seconds'   : 10    

...
..
. 
```

您需要做的是与倒计时日期相比设置这些值！你可以这样做：

1.  确定从*现在*到*倒计时日期的差异*
2.  计算倒数计时器的每个日期部分（看看[这个](http://www.w3schools.com/jsref/jsref_obj_date.asp)）
3.  将每个日期部分放入一个变量中，并将上述代码示例中的位替换为相关变量。

# c++ - 从本地 html 文件提交表单

> ID：12081483
> 
> 赞同：0
> 
> 时间：2012-08-22T21:11:42.917
> 
> 标签：c++, html, linux, forms

我正在 Linux 中编写一个小型 c++ 程序，我想从本地 HTML 文件提交一个表单，但我不知道该怎么做。我不能使用 wget 或 Qt，因为我必须提供目标 URL，但我必须抛出本地 HTML 文件，因为我要发送的信息是相对于该本地文件动态内容的。我以为我可以修改 HTML 文件以在每个输入标记中添加 value ="value" 并添加一行 Javascript 来提交表单，然后使用 Linux 命令使用默认浏览器打开 HTML 文件，但我想不通找出如何保存生成的网页。谁能帮我？如果有人可以帮助我，我真的很感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T21:30:54.640

如果你想从你的 C 代码发送一个[HTTP](http://en.wikipedia.org/wiki/Http) `POST`请求，你需要一些 C HTTP 客户端库。然后我建议使用[libcurl](http://curl.haxx.se/libcurl/)

还有 C 或 C++ HTTP 服务器库，例如[Onion](https://github.com/davidmoreno/onion)和[Wt](http://www.webtoolkit.eu/wt)

或者，也许您只是想制作一个[CGI](http://en.wikipedia.org/wiki/Common_Gateway_Interface)或[Fastcgi](http://en.wikipedia.org/wiki/Fastcgi)程序。（几个图书馆可以帮助你）。

[（或者也许我误解了你的问题）]

# javascript - 使用 JavaScript 捕获文件浏览窗口的关闭

> ID：12081493
> 
> 赞同：8
> 
> 时间：2012-08-22T21:12:27.617
> 
> 标签：javascript, filedialog

我正在使用 infile 要求用户浏览他们机器上的文件。如果在没有选择文件的情况下关闭窗口，有没有办法捕捉到？
例如，如果单击 x。

```
<input type="file" name="data" id="inFile" size="15" style="display:none" onchange="handleFiles(this)"/> 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-26T19:41:27.963

由于[HTML 输入文件选择事件的解决方案在选择同一文件时未触发](https://stackoverflow.com/q/12030686/1048572)，我认为您可以使用它：

```
<input type="file" name="data" id="inFile" /> 
```

```
var fileElem = document.getElementById("inFile");
var fileSelected = null;
fileElem.onclick = function(e) {
    fileSelected = this.value;
    this.value = null;
});
/* or use this in your browse() function:
    fileElem.value = null;
*/
fileElem.onchange = function(e) { // will trigger each time
    handleFileDialog(this.value === fileSelected);
};

function handleFileDialog(changed) {
    // boolean parameter if the value has changed (new select) or not (canceled)
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-23T17:02:42.013

我所做的是：在用户打开窗口后启动计时器，并在该定时功能中，我每 0.5 秒检查一次是否已使用布尔变量选择了文件。一旦用户选择文件或发生 HTML5 DnD，我就会停止计时器。我希望这可以帮助别人。

```
<div id="uploader"><input type="file" name="data" id="inFile" size="15" style="display:none" onchange="handleFiles(this)"/></div>

<button dojoType="dijit.form.Button" id="fileSelect" type="button" onmouseup="browse();">Browse</button> 

var fileselected = false;
function handleFiles(input){
    fileselected = true;
//use input
}

var interval;
function browse(){
    fileselected = false;
    var fileElem = document.getElementById("inFile");
    fileElem.click();
    interval = setInterval(setdiv, 500);

}
function setdiv(){
    if(!fileselected){  
        //do staff until user decides to Dnd or  browse for file again
        clearInterval(interval);
    }   
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-22T21:27:56.977

我认为该`blur`事件会做到这一点：

```
<input
  type="file"
  onchange="changed=true; handleFiles(this)"
  onblur="if(!changed) alert('nothing selected'); changed=false;"
/> 
```

# optimization - If 语句优化 - 比较字符串与常量布尔标志

> ID：12081499
> 
> 赞同：0
> 
> 时间：2012-08-22T21:12:42.370
> 
> 标签：optimization, if-statement, string-comparison, internals, opcode

考虑以下 Java 代码：

```
public void DoStuff(String[] strings, boolean preEval)
{
    final String compareTo = "A Somewhat Long String of Characters";

    for ( int i = 0; i < strings.length; ++i )
    {
         if ( preEval )
         {
              if( strings[i].equals(compareTo) )
              {
                  //do something process intensive
              }
         }

         //do something process intensive
    }

} 
```

现在注意`if (preEval)`和那里面的内在陈述。如果使用的算法需要诸如 preEval 之类的条件，那么包含该`preEval`条件以用于代码优化是否有意义？

据我了解，评估条件标志是否解析为真或假比遍历字符集合并将该集合中的每个字符与来自不同集合的另一个对应字符进行比较要快得多。

我对汇编的了解大约是 30%，我想说的是所涉及的内部和操作码/助记符，因此我问这个问题的原因。

**更新**

*注意：*此处发布的代码与语言无关；我选择 Java 只是为了一些有形且易于阅读的东西，以及在程序员社区中广为人知的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T22:01:03.660

我会说这在大多数情况下可能是一种优化。

也就是说，您不应该花时间优化尚未测量的代码。

例如，如果出现以下情况，这可能**不**值得优化：

*   您的大多数情况涉及很少的字符串或非常短的字符串。
*   *在调用函数之前计算preEval*参数需要很长时间。

在实际情况下测量您的代码，确定您的瓶颈，**然后**进行优化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T21:36:50.310

一种成本较低的方法可能是使用 HashSet::contains(string) 方法来检查集合中是否存在字符串。您可能可以在使用字符串的 HashSet 或以字符串为键的 HashMap 进行迭代时设计掉字符串比较的需要。

我总是尝试使用 HashMap 来完全避免条件逻辑。

_瑞安

# javascript - JavaScript 用 HTML 替换文本

> ID：12081500
> 
> 赞同：1
> 
> 时间：2012-08-22T21:12:49.673
> 
> 标签：javascript, replace

我想替换网页中的一些文本，只有文本，但是当我通过 document.body.innerHTML 替换时，我可能会卡住，如下所示：

HTML：

```
<p>test test </p>
<p>test2 test2</p>
<p>test3 test3</p> 
```

JS：

```
var param = "test test test2 test2 test3";
var text = document.body.innerHTML;
document.body.innerHTML = text.replace(param, '*' + param + '*'); 
```

我想得到：

```
*test test
test2 test2
test3* test3 
```

“期望”结果的 HTML：

```
<p>*test test </p>
<p>test2 test2</p>
<p>test3* test3</p> 
```

因此，如果我想使用上面的参数（“test test test2 test2 test3”）执行此操作，则`<p></p>`不会考虑 - 导致 else 部分。

**如何将没有“考虑”的文本替换为可能位于其之间的 html 标记？**

提前致谢。

**编辑**（对于@Sonesh Dabhi）：

> 基本上我需要替换网页中的文本，但是当我扫描带有 html 的网页时，替换不起作用，我需要仅基于文本进行扫描和替换

**编辑 2:**
'Raw' JavaScript Please (no jQuery)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T00:21:53.980

这将做你想要的，它构建一个正则表达式来查找标签之间的文本并在那里替换。试一试。

[http://jsfiddle.net/WZYG9/5/](http://jsfiddle.net/WZYG9/5/)

神奇的是

```
(\s*(?:<\/?\w+>)*\s*)* 
```

其中，在下面的代码中有双反斜杠来在字符串中转义它们。正则表达式本身会查找任意数量的空白字符 (\s)。内部组 (?:</?\w+>)* 匹配任意数量的开始或结束标签。?: 告诉 java 脚本不计算替换字符串中的组，并且不记住它找到的匹配项。< 是文字小于字符。正斜杠（开始一个结束 html 标记）需要转义，问号表示 0 或 1 次出现。这由任意数量的空白字符进行。

“要搜索的文本”中的每个空格都被这个正则表达式替换，允许它匹配文本中单词之间的任意数量的空格和标签，并在编号变量 $1、$2 等中记住它们。替换字符串构建以将那些记住的变量放回原处。

它匹配任意数量的标签和它们之间的空白。

```
function wrapTextIn(text, character) {
            if (!character) character = "*"; // default to asterik
            // trim the text
            text = text.replace(/(^\s+)|(\s+$)/g, "");
            //split into words
            var words = text.split(" ");
            // return if there are no words
            if (words.length == 0)
                return;
                // build the regex
            var regex = new RegExp(text.replace(/\s+/g, "(\\s*(?:<\\/?\\w+>)*\\s*)*"), "g");
            //start with wrapping character
            var replace = character;
            //for each word, put it and the matching "tags" in the replacement string
            for (var i = 0; i < words.length; i++) {
                replace += words[i];
                if (i != words.length - 1 & words.length > 1)
                    replace += "$" + (i + 1);
            }
            // end with the wrapping character
            replace += character;
            // replace the html
            document.body.innerHTML = document.body.innerHTML.replace(regex, replace);
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T21:24:55.807

[工作演示](http://jsfiddle.net/WZYG9/)

```
USE THAT FUNCTION TO GET TEXT.. no jquery required 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T21:25:20.383

1.  首先删除标签。即您可以尝试 document.body.textContent / document.body.innerText 或使用此示例 var StrippedString = OriginalString.replace(/(<([^>]+)>)/ig,"");
2.  查找和替换（对于所有要替换的内容，在搜索后添加 1 个“/g”）

String.prototype.trim=function(){return this.replace(/^\s\s*/, '').replace(/\s\s*$/, '');};

var param = "测试测试 test2 test2 test3";

var text = (document.body.textContent || document.body.innerText).trim();

var 替换 = text.search(param) >= 0;

如果（替换）{

```
 var re = new RegExp(param, 'g');

  document.body.innerHTML = text.replace(re , '*' + param + '*'); 
```

} 别的 {

//参数没有被替换

//在这里做什么？

}

[请参见此处](http://jsfiddle.net/GZ2we/2/) 注意：使用条带化将丢失标签。

# class - Matlab @folder 类属性混淆

> ID：12081501
> 
> 赞同：0
> 
> 时间：2012-08-22T21:12:50.907
> 
> 标签：class, matlab, properties, attributes, directory

我在 matlab 中使用预先存在的代码，这些代码被组织成类。它不使用classdef，而是使用@folder's。我不完全确定它是如何工作的，它给我带来了一些麻烦。

构造函数格式如下：

```
function this = crazy_class(varargin)

    this.a = [];
    this.b = [];
    this = class(this, 'crazy_class'); 

end 
```

我需要向该类添加一个新属性，但如果我这样修改它：

```
function this = crazy_class(varargin)

    this.a = [];
    this.b = [];
    this.newProperty = [];
    this = class(this, 'crazy_class'); 

end 
```

我得到以下信息：

```
Number of fields for class crazy_class cannot be changed without clear classes. 
```

它不喜欢我向类添加新的未指定属性。很公平，如果有一个 classdef，添加一个新属性会很简单，但是我不知道如何使用 @folder 格式来做到这一点。

文件夹中没有 .m 文件或任何与此相关的文件来指定类的任何属性。我能找到的最接近的是重载函数：

subsasgn.m:

```
 this = builtin('subsasgn', this, selector, value); 
```

subsref.m:

```
 r = builtin('subsref', this, selector); 
```

但就是这样。当任何其他文件中没有提到它们时，此类如何知道哪些是有效属性，哪些不是。我应该寻找什么来改变这一点？

编辑：这很尴尬......我重新启动了 Matlab，现在一切正常。我认为通过键入命令 clear classes 或 clear all 可以解决问题，但我想它需要完全重启。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T21:24:36.000

关键是，您现在必须执行命令“清除类”，因为现有的类成员具有旧格式。MATLAB 自己告诉了你这个事实。这些属性在 crazy_class.m 文件中定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T11:58:41.140

您在这里使用“旧式”面向对象的代码。MATLAB 7.6 引入了“新式”面向对象的语法（使用`classdef`等），但在此之前，您可以使用您在此处使用的样式，它仍然受支持但已过时。

我建议您查看过时的文档，该文档[在此处](http://www.mathworks.com/help/pdf_doc/matlab/pre-version_7.6_oop.pdf)仍然可用。它将解释语法的细节，以及如何使用这些类。

# c - C中的typeof运算符

> ID：12081502
> 
> 赞同：65
> 
> 时间：2012-08-22T21:12:54.383
> 
> 标签：c, gcc, typeof

C中的typeof真的是运算符吗？
我在想，因为 C 中没有多态性，所以在运行时无事可做。也就是说，typeof 的答案在编译时是已知的。（我想不出在编译时不会知道的 typeof 的使用。）所以它似乎更像是一个编译时指令，而不是一个运算符。

typeof 是否使用任何（处理器）运行时（在 GCC 中）？

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-08-22T22:02:38.043

由于`typeof`是编译器扩展，因此并没有真正的定义，但在 C 的传统中，它将是一个运算符，例如`sizeof`，`_Alignof`也被视为一个运算符。

而且您误会了，C 具有仅在运行时确定的动态类型：变量修改 (VM) 类型。

```
size_t n = strtoull(argv[1], 0, 0);
double A[n][n];
typeof(A) B; 
```

只能在运行时确定。

在 2021 年加入：很有可能`typeof`采用与 for 类似的规则`sizeof`将其纳入 C23。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-08-22T21:15:51.863

这是一个 GNU 扩展。简而言之，这是一种声明与另一个具有相同类型的对象的便捷方式。例如：

```
int x;         /* Plain old int variable. */
typeof(x) y;   /* Same type as x. Plain old int variable. */ 
```

~~它完全在编译时工作~~，主要用于宏。宏依赖的一个著名例子`typeof`是`container_of`.

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-08-22T21:15:23.200

它是 GCC 编译器的 C 扩展，参见[http://gcc.gnu.org/onlinedocs/gcc/Typeof.html](http://gcc.gnu.org/onlinedocs/gcc/Typeof.html)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-08-22T21:15:51.620

它不完全是一个运算符，而是一个关键字。~~不，它不会做任何运行时魔法。~~

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-26T13:21:56.513

您需要使用此扩展的一种情况是获取匿名结构的指针。您可以查看this [question](https://stackoverflow.com/questions/53203535/c-pointer-to-anonymous-struct)作为示例。

# c# - 在表格单元格中打开 XML SDK 文字处理垂直方向

> ID：12081507
> 
> 赞同：2
> 
> 时间：2012-08-22T21:13:26.263
> 
> 标签：c#, asp.net, openxml

有人知道我可以将表格单元格中的文本方向切换 90 度吗？我正在使用 Open XML 在 Word 中创建一些标签模板，有些需要垂直文本方向。我正在尝试将`TextDirection`元素应用于单元格，但它不起作用......

```
var tc = new TableCell();
tc.Append(new TextDirection() { Val = TextDirectionValues.BottomToTopLeftToRight }); 
```

我试过... `BottomToTopLeftToRight`, `TopToBottomLeftToRightRotated`, 和`LefttoRightTopToBottomRotated`

我错过了什么还是应该在不同的位置应用它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T13:24:07.433

您需要将其应用于 TableCellProperties。

```
TableCell cell = new TableCell(
    new TableCellProperties(
        new TextDirection() { Val = TextDirectionValues.BottomToTopLeftToRight }), 
    new Paragraph(
        new Run(
            new Text("test")))); 
```

# python - 从blastx输出文件中提取特定条目，写入新文件

> ID：12081512
> 
> 赞同：1
> 
> 时间：2012-08-22T21:13:56.027
> 
> 标签：python, list, dictionary, biopython, blast

我创建了一个脚本，可以在 XML 格式的 Blastx 输出文件中成功搜索关键字（由用户指定）。现在，我需要将对齐标题中包含关键字的那些记录（查询、命中、分数、evalue 等）写入新文件。

我为每个查询标题、命中标题、电子值和对齐长度创建了单独的列表，但似乎无法将它们写入新文件。

*   问题 #1：如果 Python 出错，并且其中一个列表缺少值……怎么办？然后所有其他列表将提供有关查询的错误信息（“线滑点”，如果您愿意的话......）。

*   问题 #2：即使 Python 没有错误，并且所有列表的长度相同，我如何将它们写入文件，以便每个列表中的第一项相互关联（因此，项目 #10 来自每个列表也关联？）我应该创建一个字典吗？

*   问题#3：字典只有一个键值，如果我的查询有几个不同的命中怎么办？不确定它是否会被覆盖或跳过，或者它是否会出错。有什么建议么？我当前的脚本：

    ```
    from Bio.Blast import NCBIWWW
    from Bio.Blast import NCBIXML
    import re

    #obtain full path to blast output file (*.xml)
    outfile = input("Full path to Blast output file (XML format only): ")

    #obtain string to search for
    search_string = input("String to search for: ")

    #open the output file
    result_handle = open(outfile)

    #parse the blast record
    blast_records = NCBIXML.parse(result_handle)

    #initialize lists
    query_list=[]
    hit_list=[]
    expect_list=[]
    length_list=[]

    #create 'for loop' that loops through each HIGH SCORING PAIR in each ALIGNMENT from each RECORD
    for record in blast_records:
            for alignment in record.alignments:     #for description in record.descriptions???
                    for hsp in alignment.hsps:      #for title in description.title???

                            #search for designated string
                            search = re.search(search_string, alignment.title)

                            #if search comes up with nothing, end
                            if search is None:
                                    print ("Search string not found.")
                                    break

                            #if search comes up with something, add it to a list of entries that match search string
                            else:

                                    #option to include an 'exception' (if it finds keyword then DOES NOT add that entry to list)
                                    if search is "trichomonas" or "entamoeba" or "arabidopsis":
                                            print ("found exception.")
                                            break
                                    else:

                                            query_list.append(record.query)
                                            hit_list.append(alignment.title)
                                            expect_list.append(expect_val)
                                            length_list.append(length)

                                            #explicitly convert 'variables' ['int' object or 'float'] to strings
                                            length = str(alignment.length)
                                            expect_val = str(hsp.expect)

                                            #print ("\nquery name: " + record.query)
                                            #print ("alignment title: " + alignment.title)
                                            #print ("alignment length: " + length)
                                            #print ("expect value: " + expect_val)
                                            #print ("\n***Alignment***\n")
                                            #print (hsp.query)
                                            #print (hsp.match)
                                            #print (hsp.sbjct + "\n\n")

                                            if query_len is not hit_len is not expect_len is not length_len:
                                                    print ("list lengths don't match!")
                                                    break
                                            else:

                                                    qrylen = len(query_list)
                                                    query_len = str(qrylen)
                                                    hitlen = len(hit_list)
                                                    hit_len = str(hitlen)
                                                    expectlen = len(expect_list)
                                                    expect_len = str(expectlen)
                                                    lengthlen = len(length_list)
                                                    length_len = str(lengthlen)
                                                    outpath = str(outfile)

                                                    #create new file
                                                    outfile = open("__Blast_Parse_Search.txt", "w")
                                                    outfile.write("File contains entries from [" + outpath + "] that contain [" + search_string + "]")
                                                    outfile.close

                                                    #write list to file
                                                    i = 0
                                                    list_len = int(query_len)
                                                    for i in range(0, list_len):

                                                            #append new file
                                                            outfile = open("__Blast_Parse_Search.txt", "a")
                                                            outfile.writelines(query_list + hit_list + expect_list + length_list)
                                                            i = i + 1

                                                    #write to disk, close file
                                                    outfile.flush()
                                                    outfile.close

    print ("query list length " + query_len)
    print ("hit list length " + hit_len)
    print ("expect list length " + expect_len)
    print ("length list length " + length_len + "\n\n")
    print ("first record: " + query_list[0] + " " + hit_list[0] + " " + expect_list[0] + " " + length_list[0])
    print ("last record: " + query_list[-1] + " " + hit_list[-1] + " " + expect_list[-1] + " " + length_list[-1])
    print ("\nFinished.\n") 
    ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T21:52:09.327

如果我正确理解了您的问题，您可以使用默认值作为线滑点，例如：

```
try:
  x(list)
except exception:
  append_default_value(list) 
```

[http://docs.python.org/tutorial/errors.html#handling-exceptions](http://docs.python.org/tutorial/errors.html#handling-exceptions)

或者使用元组作为字典键`(0,1,1)`，例如使用 get 方法作为默认值。

[http://docs.python.org/py3k/library/stdtypes.html#mapping-types-dict](http://docs.python.org/py3k/library/stdtypes.html#mapping-types-dict)

如果您需要在输出文件中维护数据结构，您可以尝试使用搁置：

或者您可以在每条记录之后附加某种类型的引用，并为每条记录提供一个唯一的 ID，例如“ `#32{somekey:value}#21#22#44#`”

同样，您可以使用元组拥有多个键。

我不知道这是否有帮助，您可能会明确说明您的代码的哪些部分有问题。Like`x()`给了我输出`y`，但我期望`z`.

# asp.net - 使网站易于复制到 MS Word 的技术

> ID：12081519
> 
> 赞同：0
> 
> 时间：2012-08-22T21:15:14.963
> 
> 标签：asp.net, ms-word

这是一个奇怪的问题，我不知道在哪里发布它，但它就在这里。

我有一个供内部公司员工使用的 ASP .Net 网站。网站页面非常基本，有各种表格、div、css 和一些 javascript/jQuery。

一些网站页面经常用于演示。有时，用户需要离线复制内容。

我收到一个请求，当试图将某些页面从 IE/Firefox 复制到 Word/PowerPoint 时，它没有正确地进行布局。好吧，我显然知道为什么这是一个问题，但用户不知道并且正在要求使其成为可能。

我假设最简单的方法是使用“可打印”视图。但是由于其中一些页面仍在开发中，我们可以遵循一些技术来使这些页面在某种程度上可以复制到 word/ppt 中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T21:21:47.773

有[像这样的在线指南。](http://www.troublefixers.com/word-2010-how-to-paste-html-or-formatted-text-correctly-in-ms-word/)

# android - 在意图过滤器中处理 https 模式

> ID：12081520
> 
> 赞同：3
> 
> 时间：2012-08-22T21:15:21.390
> 
> 标签：android, android-intent

我在 Manifest 中有一个意图过滤器，它处理对 url 的点击，如果 url 匹配我的应用程序启动的过滤器数据。

```
<intent-filter>
  <action android:name="android.intent.action.VIEW" />
  <category android:name="android.intent.category.DEFAULT" />
  <category android:name="android.intent.category.BROWSABLE" />
  <data android:scheme="http" android:host="*" port="8765" android:path="/mypath" />
</intent-filter> 
```

当架构为“http”时，意图过滤器有效，但如果我将其更改为“https”，则意图过滤器不会执行任何操作并且链接开始在浏览器中加载。

有人知道这里有什么问题吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-28T11:47:28.817

只需在过滤器中添加一条额外的数据行：

```
<intent-filter>
  <action android:name="android.intent.action.VIEW" />
  <category android:name="android.intent.category.DEFAULT" />
  <category android:name="android.intent.category.BROWSABLE" />
  <data android:scheme="http" android:host="*" port="8765" android:path="/mypath" />
  <data android:scheme="https" android:host="*" port="8765" android:path="/mypath" />
</intent-filter> 
```

# mysql - 计算不同的值

> ID：12081522
> 
> 赞同：1
> 
> 时间：2012-08-22T21:15:31.287
> 
> 标签：mysql

DB 列：人员、政治观点、地区

数据库示例：

```
person1  liberal      Lviv
person2  communistic  Donetsk
person3  liberal      Lviv
person4  conservative Kyiv
person5  conservative Odesa
person6  conservative Lviv
person7  communistic  Kyiv 
```

预期列：地区，地区公民的不同政治观点的数量，该地区的自由派人数，该地区的保守派人数。预期结果：

```
Lviv    2  2  1
Kyiv    2  0  1
Donetsk 1  0  0
Odesa   1  0  1 
```

显然它看起来像这样：

```
SELECT region, ?????? FROM table GROUP BY region 
```

我可以使用一些选择，但没有简单的方法吗？像 DISTINCT(politicalViews) 或 COUNT(politicalViews,'liberal')

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T21:26:29.323

您可以在一个查询中完成这一切，使用聚合和`GROUP BY`

```
select region,
  COUNT(DISTINCT pol_view) DiffView,
  sum(CASE WHEN pol_view = 'liberal' THEN 1 ELSE 0 END) NumberLiberals,
  sum(CASE WHEN pol_view = 'conservative' THEN 1 ELSE 0 END) NumberConservatives
from test
group by region 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/a0249/13)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T21:23:04.230

```
SELECT region, count(distinct politicalViews),
 sum(politicalViews='liberal'), sum(politicalViews='conservative')
FROM table GROUP BY region; 
```

你为什么不想知道有多少共产党员？

# c# - 理解 C# 中的十六进制和字节

> ID：12081523
> 
> 赞同：10
> 
> 时间：2012-08-22T21:15:49.067
> 
> 标签：c#, binary, hex, byte

我似乎缺乏对在 C#（或一般编程）中计算和使用十六进制和字节值的基本理解。

我想知道如何从字符串和 RGB 颜色等来源计算十六进制值和字节（0x--）（比如我如何弄清楚 R255 G0 B0 的 0x 代码是什么？）

为什么我们用FF之类的东西，是为了补偿base 10系统得到10之类的数字吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-22T21:22:11.627

十六进制是以 16 为基数的，所以我们不是从 0 到 9，而是从 0 到 F。我们通常在十六进制常量前面加上`0x`. 因此，

```
Hex      Dec
-------------
0x00  =  0
0x09  =  9
0x0A  =  10
0x0F  =  15
0x10  =  16
0x200 =  512 
```

字节是计算机上值的典型存储单位，在大多数现代系统中，一个字节包含 8 位。请注意，`bit`实际上意味着`binary digit`，因此，我们收集到一个字节的最大值为 11111111 二进制。那是 0xFF 十六进制，或 255 十进制。因此，一个字节至少可以用两个十六进制字符表示。典型的 4 字节`int`是 8 个十六进制字符，例如`0xDEADBEEF`.

RGB 值通常包含 3 个字节的值，按 RGB 的顺序排列。因此，

```
R=255 G=0 B=0    =>  R=0xFF G=0x00 B=0x00  =>  0xFF0000  or #FF0000 (html)
R=66  G=0 B=248  =>  R=0x42 G=0x00 B=0xF8  =>  0x4200F8  or #4200F8 (html) 
```

对于我的十六进制计算，我喜欢使用 python 作为我的计算器：

```
>>> a = 0x427FB
>>> b = 700
>>> a + b
273079
>>>
>>> hex(a + b)
'0x42ab7'
>>>
>>> bin(a + b)
'0b1000010101010110111'
>>> 
```

对于 RGB 示例，我可以演示如何使用[位移](http://en.wikipedia.org/wiki/Logical_shift)来轻松计算这些值：

```
>>> R=66
>>> G=0
>>> B=248
>>>
>>> hex( R<<16 | G<<8 | B )
'0x4200f8'
>>> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-22T21:23:01.943

Base-16（也称为*hex*）表示法很方便，因为您可以在一个十六进制数字中恰好容纳四位，这使得转换为二进制非常容易，但不需要像完整的二进制表示法那样多的空间。当您需要以人类可读的形式表示面向位的数据时，这很有用。

学习十六进制很容易——你需要做的就是记住一个定义十六进制到二进制转换的 16 行短表：

```
0 - 0000
1 - 0001
2 - 0010
3 - 0011
4 - 0100
5 - 0101
6 - 0110
7 - 0111
8 - 1000
9 - 1001
A - 1010
B - 1011
C - 1100
D - 1101
E - 1110
F - 1111 
```

有了这张表，您可以轻松地将任意长度的十六进制字符串转换为相应的位模式：

```
0x478FD105 - 01000111100011111011000100000101 
```

转换回来也很容易：将二进制数字按四分组，然后使用表格生成十六进制数字

```
0010 1001 0100 0101 0100 1111 0101 1100 - 0x29454F5C 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T21:47:16.220

发布的实际问题的答案（“为什么我们使用 FF 之类的东西，是为了补偿基数为 10 的系统以获得像 10 这样的数字？”）是这样的：计算机使用位，这意味着 1 或 0。

本质类似于李发布的所谓[“位置符号”](http://en.wikipedia.org/wiki/Positional_notation)。在十进制数中，数字中的每个位置指的是 10 的幂。例如，在数字 123 中，最后一个位置表示 10^0 -- 那些。中间位置代表 10^1 - 十位。第一个是 10^2——数百个。所以数字“123”代表 1 * 100 + 2 * 10 + 3 * 1 = 123。

二进制数字使用相同的系统。数字 10（以 2 为底）表示 1 * 2^1 + 0 * 2^0 = 2。

如果你想用二进制表示十进制数 10，你会得到数字 1010。这意味着，你需要四位来表示一个十进制数字。

但是使用 4 位，您最多可以表示 16 个不同的值，而不仅仅是 10 个不同的值。如果您需要每个数字四位，则最好使用以 16 为底的数字，而不是仅以 10 为底的数字。这就是十六进制发挥作用的地方。

* * *

关于如何转换 ARGB 值；正如其他回复中所写，二进制和十六进制之间的转换相对容易（4 个二进制数字 = 1 个十六进制数字）。

十进制和十六进制之间的转换更复杂，至少对我来说，首先将十进制转换为二进制表示，然后将二进制数转换为十六进制更容易（如果我必须在脑海中进行）。谷歌可能有大量的方法和算法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-22T21:37:24.000

在十进制中，每个数字的权重是右边的 10 倍，例如 32 中的“3”是 3 * 10，而 102 中的“1”是 1 * 100。二进制是相似的，除了因为只有两位数（0 和 1）每个位的权重仅是右边一位的两倍。十六进制使用 16 位数字 - 10 位十进制数字以及字母 A = 10 到 F = 15。

n 位十进制数可以表示高达 10^n - 1 的值，类似地，n 位二进制数可以表示高达 2^n - 1 的值。

十六进制很方便，因为您可以用 4 位表示单个十六进制数字，因为 2^4 = 16 个可能的值可以用 4 位表示。

您可以通过一次从右 4 位分组并将每个组转换为相应的十六进制来将二进制转换为十六进制。例如 1011100 -> (101)(1100) -> 5C

从十六进制到二进制的转换更加简单，因为您可以简单地将每个十六进制数字扩展为相应的二进制，例如 0xA4 -> 1010 0100

# iphone - MKMapView 自定义图像不起作用

> ID：12081527
> 
> 赞同：2
> 
> 时间：2012-08-22T21:15:59.550
> 
> 标签：iphone, objective-c, ios, mkmapview

尝试遵循本教程：[http ://www.switchonthecode.com/tutorials/building-an-earthquake-monitor-for-iphone-using-mapkit](http://www.switchonthecode.com/tutorials/building-an-earthquake-monitor-for-iphone-using-mapkit)

我的图标显示在所有正确的位置（和正确的数字），并且图像也显示。（但它总是相同的图像。那是因为条件 if(self.marker.type == "nzpost" 不起作用，因为 type 始终为空（就像 initWithAnnotation() 中标记对象上的所有属性一样） . 由于某种原因，这些属性都是空的。

注解视图界面：

```
@interface PayMarkerAnnotationView : MKAnnotationView {
    PaymentMarker *marker;
}

@property (strong, nonatomic) IBOutlet PaymentMarker *marker;

@end 
```

带注释的初始化：（这里 self.marker.type 应该有一个值。

```
- (id)initWithAnnotation:(id <MKAnnotation>)annotation reuseIdentifier:(NSString *)reuseIdentifier {
    if(self = [super initWithAnnotation:annotation reuseIdentifier:reuseIdentifier]) {
        self.backgroundColor = [UIColor clearColor];
        NSString* imageName = [[NSString alloc] init];

        if([self.marker.type isEqualToString:@"nzpost"]) {
            imageName = @"icon-map-post.png";
        } else {
            imageName = @"icon-map-incharge.png";
        }
        self.image = [UIImage imageNamed:imageName];
    }
    return self;
} 
```

## 地图视图：

```
- (MKAnnotationView *)mapView:(MKMapView *)lmapView viewForAnnotation:(id <MKAnnotation>)annotation {
    PayMarkerAnnotationView *markerView = (PayMarkerAnnotationView *)[lmapView dequeueReusableAnnotationViewWithIdentifier:@"markerView"];
    if(markerView == nil) {
        markerView = [[PayMarkerAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:@"markerView"];
    }
    markerView.annotation = annotation;
    return markerView;
} 
```

添加我的标记

```
-(void)renderPaymentMarkers
{
    [self.map addAnnotations: nzPostMarkers];
    [self.map addAnnotations: inChargeMarkers];
}

Marker class:

@interface PaymentMarker : NSObject <MKAnnotation> {
    NSString* type;
    NSString* description;
    float latitude;
    float longitude;}

@property (nonatomic) NSString* description;
@property (nonatomic) NSString* type;
@property (nonatomic) float latitude;
@property (nonatomic) float longitude;

//MKAnnotation
@property (nonatomic, readonly) CLLocationCoordinate2D coordinate;

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T00:54:28.007

`marker`变量 in`PayMarkerAnnotationView`永远不会设置 。

（我不确定您为什么也将其属性`IBOutlet`设为 an 。）

访问前需要在`initWithAnnotation`方法中设置：

```
if (self = [super initWithAnnotation...
    //set marker equal to the annotation this view is being created for...
    marker = annotation;

    self.backgroundColor = [UIColor clearColor];
    ... 
```

但是，您首先不需要该`marker`变量。
`MKAnnotationView`已经有一个`annotation`属性，当您调用`super initWithAnnotation`.

所以在你的`initWithAnnotation`, 而不是这个：

```
if([self.marker.type isEqualToString:@"nzpost"]) { 
```

你可以这样做：

```
PaymentMarker *pm = (PaymentMarker *)self.annotation;
if([pm.type isEqualToString:@"nzpost"]) { 
```

那应该可以解决主要问题。

另一个潜在的问题是`viewForAnnotation`，您正在`annotation`直接更新视图的属性，以防视图被另一个注释重新使用。

这很好（虽然它应该在一个`else`块中完成）但问题是视图在`image`更新时也不会`annotation`更新。

因此，如果先前使用该视图的注释属于“nzpost”类型，但当前注释属于其他类型，则视图仍将显示先前注释类型的图像。

为了解决这个问题，这里有两种可能的解决方案：

*   为每种类型使用单独的重用标识符（因此有两个 id：“post”和“incharge”）。这样，只有具有匹配图像的视图才会被重新用于当前注释。
*   覆盖`setAnnotation:`并`PayMarkerAnnotationView`更新`annotation`和`image`属性。我更喜欢这个解决方案。

其他一些完全不相关的项目......

这一行：

```
NSString* imageName = [[NSString alloc] init]; 
```

没有意义，因为稍后的代码只是`imageName`用新值覆盖。所以分配的内存被放弃了。相反，只需声明`imageName`：

```
NSString* imageName; 
```

这些属性：

```
@property (nonatomic) NSString* description;
@property (nonatomic) NSString* type; 
```

应该用`copy`属性声明（编译器应该抱怨这个）：

```
@property (nonatomic, copy) NSString* description;
@property (nonatomic, copy) NSString* type; 
```

您可能还想更改`description`属性的名称，因为您正在覆盖由提供的同名属性`NSObject`（除非这是您的意图）。

# java - 在方法中触发暂停和继续？

> ID：12081532
> 
> 赞同：0
> 
> 时间：2012-08-22T21:16:50.350
> 
> 标签：java, jsf, jakarta-ee, servlets

我如何在执行之间“暂停”一个方法，并在外部触发它以继续执行该方法？

Thread 是一个 servlet，该`executeAndWait`方法通过单击按钮启动。现在我想对`SessionScoped`变量进行轮询。如果这个变量改变了它的状态（例如变为真），轮询/等待方法应该继续。

我首先考虑的是`Observer`模式。但是有了这个我可以触发方法的*执行*。但我需要睡眠/等待并触发方法的*继续*。

除了轮询“全局”变量之外，还能如何做到这一点。？

```
class MyThread {

    @Inject
    MyBean bean;

    doExecuteAndWait() {
        //this waits for the var to turn into "true" state
        while(!bean.isVarValid()) {
            Thread.sleep(1000);
        }
        //continue execution if somevar is set to true externally
    }
}

class MySignal {
    @Inject
    MyBean bean;

    //this triggers the continuation of the method from class above
    toggleVar() {
        bean.setVarValid(true);
    }   
}

@SessionScoped
class MyBean() {
    varValid = false;

    isVarValid() {
        return varValid;
    }

    setVarValid(Boolean status) {
        this.varValid = status;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T21:34:34.453

您可以使用[CountDownLatch](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/CountDownLatch.html)。

将其初始化为`1`，调用`await()`，`MyThread`然后从应该释放的时候 调用该`countDown()`方法。`MySignal`

这样您就不需要继续轮询变量的值。

# ios - 使用 runAction 的目标 c 中的背景坐标配置问题？

> ID：12081535
> 
> 赞同：-1
> 
> 时间：2012-08-22T21:17:24.540
> 
> 标签：ios, cocos2d-iphone

在我的游戏中，我有两个背景一个接一个地创建一个向左移动的连续循环。但是，现在一个去，另一个不跟随。

我无情地尝试了不同的数字，但似乎没有任何帮助。

谢谢你能给我的任何帮助。

```
if((self = [super init]))
    {

        self.isTouchEnabled = YES;

        background=[CCSprite spriteWithFile:@"testbackground88.png"];
        [self addChild:background z:1];
        background.position=ccp(500,240);
        id repeat1 =[CCRepeatForever actionWithAction:[CCSequence actions:
                                                             [CCMoveTo actionWithDuration:7 position:ccp(-300,240)],
                                                             [CCPlace actionWithPosition:ccp(800,240)],nil]];
       [background runAction:repeat1];

        background2=[CCSprite spriteWithFile:@"testbackground92.png"];
        [self addChild:background2 z:1];
        background2.position=ccp(500,240);
        id repeat2 =[CCRepeatForever actionWithAction:[CCSequence actions:
                                                             [CCMoveTo actionWithDuration:7 position:ccp(-300,240)],
                                                             [CCPlace actionWithPosition:ccp(800,240)],nil]];
       [background2 runAction:repeat2];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T07:39:29.837

按照你这样做的方式，你应该总是看到 bg2 超过 bg，因为它们每次都移动到相同的确切位置。例如，如果您希望将 background2 放在背景 1 的右侧，您可以执行类似的操作

```
background2=[CCSprite spriteWithFile:@"testbackground92.png"];
[self addChild:background2 z:1];
int bgWidth = background2.contentSize.width;
background2.position=ccp(500 + bgWidth ,240);
id repeat2 =[CCRepeatForever actionWithAction:[CCSequence actions:
    [CCMoveTo actionWithDuration:7 position:ccp( (-300 + bgWidth) ,240)],
    [CCPlace actionWithPosition:ccp((800 + bgWidth ),240)],nil]]; 
```

最好将两个 sprite 添加到一个容器 Sprite 中，一个相邻的，并在容器上执行移动操作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T05:17:30.407

```
if((self = [super init]))
{
    self.isTouchEnabled = YES;

    //add an empty container sprite in 0,0 pos
    CCSprite container = [CCSprite node];
    [self addChild:container];

    // get the screen size and use it for positioning
    CGSize scrSize = [[CCDirector sharedDirector] winSize];

    // add the sprites to the container
    background  =[CCSprite spriteWithFile:@"testbackground88.png"];
    background2 =[CCSprite spriteWithFile:@"testbackground92.png"];

    [container addChild:background z:1];
    [container addChild:background2 z:1];

    // use the background's widths to define it's in between distance. 
    int bgDist = ( background2.contentSize.width + background.contentSize.width) / 2;
    // the container's total travel;
    int containerTravel =  ( background.contentSize.width + background2.contentSize.width)/2 ;

    background.position     =ccp(scrSize.width/2, scrSize.height/2);
    background2.position    =ccp( (scrSize.width/2 + bgDist), scrSize.height/2);

    // move the container
    CCRepeatForever loopBgTravel =[CCRepeatForever actionWithAction:[CCSequence actions:
        [CCMoveTo actionWithDuration:0 position:ccp(0,0)],
        [CCMoveTo actionWithDuration:7 position:ccp(-containerTravel,0)]];

   [container runAction:loopBgTravel];
} 
```

如果这不起作用，请随时再次询问

# c++ - boost托管内存中的内存对齐约束

> ID：12081541
> 
> 赞同：0
> 
> 时间：2012-08-22T21:17:39.877
> 
> 标签：c++, memory, boost, alignment

我正在使用 boost::interprocess::managed_external_buffer，当尝试在特定地址创建这样的缓冲区时，我收到以下错误（断言失败）：

> /homes/mdorier/local/include/boost/interprocess/managed_external_buffer.hpp:67: boost::interprocess::basic_managed_external_buffer::basic_managed_external_buffer(boost::interprocess::create_only_t, void*, typename boost::interprocess::ipcdetail: :basic_managed_memory_impl::size_type) [charType = char, AllocationAlgorithm = boost::interprocess::rbtree_best_fit, 0ul>, IndexType = boost::interprocess::iset_index]: 断言`(0 == (((std::size_t) addr) & (AllocationAlgorithm::Alignment - size_type(1u))))' 失败。

managed_external_buffer.hpp 中的第 67 行对应于以下函数中的 BOOST_ASSERT 语句：

```
//!Creates and places the segment manager. This can throw
   basic_managed_external_buffer
      (create_only_t, void *addr, size_type size)
   {
      //Check if alignment is correct
      BOOST_ASSERT((0 == (((std::size_t)addr) & (AllocationAlgorithm::Alignment - size_type(1u)))));
      if(!base_t::create_impl(addr, size)){
         throw interprocess_exception("Could not initialize buffer in basic_managed_external_buffer constructor");
      }
   } 
```

我的代码在带有 GCC 4.6.2 的 Ubuntu i686 上运行良好。上面的错误出现在带有 GCC 4.4.3 的 Ubuntu x86_64 上。

知道为什么在一个平台上我没有收到任何错误，而内存对齐在另一个平台上似乎很重要吗？

如果 managed_external_buffer 要我对齐地址，我可以接受，但我至少应该知道要提供什么值。我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T21:23:34.163

看起来它正在检查自然点对齐。

所以在 32 位平台上它需要 4 字节对齐，而 64 位平台正在检查 8 字节对齐。

一些体系结构非常难以容忍数据类型与内存地址的错位。

# r - 包含非 ASCII 字符的 odfWeave 错误源文档

> ID：12081543
> 
> 赞同：2
> 
> 时间：2012-08-22T21:17:50.957
> 
> 标签：r, sweave, odf, odfweave

在我的文档上调用 ODFWeave 时出现此错误。

```
 Pre-processing the contents
 Sweaving  content.Rnw 

 Error: ‘content.Rnw’ is not ASCII and does not declare an encoding 
```

我已经看到了一些可以在 LaTeX 文档“(Sweave --encoding=utf-8)”中添加编码开关的方法，但不知道这是否可以使用 odfWeave 来完成

我之前通过将源文档转换回 ASCII 解决了这个问题，但理想情况下，如果转换可以使用我的文档中的任何内容（例如，某些名称需要非 ASCII 字符集）运行，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T22:57:38.380

我们对 odfWeave 进行了更改，使其（正确地）使用 utf-8 编码。事实上，我们通过使用 Sweave 的 'encoding="UTF-8"' 选项来强制执行此操作。

我想问题是“为什么不是 utf-8 文档”？老实说，因为我没有文档（或 sessionInfo() 的结果），所以我真的没有给你一个好的答案。您可能在编织过程中创建了非 utf8 字符。

一个可能有帮助的线程是：

[http://r.789695.n4.nabble.com/Running-odfWeave-on-its-own-examples-odt-td4639889.html](http://r.789695.n4.nabble.com/Running-odfWeave-on-its-own-examples-odt-td4639889.html)

弄清楚这一点似乎很复杂，我希望我有一个明确的答案给你。

# c++ - 否定多种类型 std::size_t 的安全方法

> ID：12081544
> 
> 赞同：3
> 
> 时间：2012-08-22T21:18:10.957
> 
> 标签：c++

当我想否定一些类型`std::size_t`时，我通常会这样做`-static_cast<int>(number)`。但是，我知道该数字可能不适合`int`. 所以，我的问题是什么是安全的便携方式来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T21:25:44.140

没有安全的便携式方法可以做到这一点。

`size_t`是无符号类型。不能保证有*任何有*符号整数类型大到足以容纳 的最大值`size_t`。

如果您能够假设您要否定的值不是太大，您可以将其转换为`long long`（如果您的编译器支持它）或`long`（如果它不支持）：

```
size_t s = some_value;
long long negative_s = -(long long)s; 
```

如果您担心溢出，可以在进行转换之前比较`s`to的值。`LLONG_MAX`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T21:25:34.810

`-static_cast<int>(number)`是*安全*的；的结果`static_cast`是实现定义的，如果它不适合`int`.

要检测结果是否不适合：

```
(number <= std::numeric_limits<int>::max()) ? -static_cast<int>(number) : ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T21:27:49.697

安全的方法检查变量是否适合相应的有符号类型：

```
typedef std::size_t my_uint;
typedef typename std::make_signed<my_uint>::type my_int;

my_uint n = /* ... */;

if (n > std::numeric_limits<my_int>::max()) { /* Error! */ }

my_int m = -static_cast<my_int>(n); 
```

你需要`#include <limits>`和`<type_traits>`。

（或者把所有东西都放在一行里：）

```
if (n > std::numeric_limits<typename std::make_signed<decltype(x)>::type>::max()) { /* Error! */ } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-22T21:28:04.890

我认为您有一个固有的问题，因为您不可能否定 a `std::size_t`using的上半部分范围内的值`std::ssize_t`，因为 a`std::ssize_t`只能描述范围内的一半值`std::size_t`。例如，如果您的`unsigned char`值为 255，则永远无法获得`signed char`-255 的值……您需要更大的类型，例如`signed short`. 如果`std::size_t`是您平台的最大集成容器，那么您根本无法以“负”格式描述这些值，而无需指定一些自定义数据类型，例如`struct`带有用于指定符号的额外标志变量的a价值。那当然不再是“便携式”...

# vb.net - vb.net 中赋值的返回值是多少？

> ID：12081545
> 
> 赞同：6
> 
> 时间：2012-08-22T21:18:12.670
> 
> 标签：vb.net, return-value, assignment-operator

我做作业时的返回值是多少？

例如，我可以这样做吗？（即赋值返回被赋值的值）

```
Dim a As Integer = 1
Dim b As Integer = 2
a = b = 3 
```

今天写这段代码的时候出现了一个问题：

```
Dim updates = GetUpdates()
While updates.Count > 0
    Foo.ApplyUpdates(updates)
    updates = GetUpdates()
End While 
```

我有点希望我能写成这样......

```
While (updates = GetUpdates).Count > 0
    Foo.ApplyUpdates(updates)
End While 
```

我知道它不是那么干净......（我完全没有声明过`updates`）但它让我对分配在.NET中的工作方式感到好奇......它是一个有返回值的函数吗？如果是这样......它会返回什么？

**编辑**

我尝试了第一段代码。看起来编译器将其解释为将 b 和 3 的比较结果分配给 a...，这当然是编译器错误。

而对于第二个代码块，我知道该运算符`=`没有为任何类型定义`updates`......即它认为这是一个比较，而不是一个赋值。

所以补充一下我的问题，为什么它会这样工作？仅仅是因为 vb.net 重载了`=`具有两种含义（赋值和比较）的符号吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-22T21:23:15.503

> 关于分配如何在 .NET 中工作。

这实际上是关于赋值在 VB 中的工作方式，而不是在 .NET 中。

这在 VB.Net 中不起作用。VB.Net 中的[= 运算符](http://msdn.microsoft.com/en-us/library/41d8z008)只是“将其右侧的值分配给其左侧的变量或属性”。

> 我做作业时的返回值是多少？

如上面的语句所示，赋值运算符*在 VB.Net 中不返回值*。

请注意，这与其他 .NET 语言不同。例如，在 C# 中，赋值[= 运算符](http://msdn.microsoft.com/en-us/library/sbkb459w.aspx)执行您所描述的操作，并且“将其右侧操作数的值存储在由其左侧操作数表示的存储位置、属性或索引器中，*并将该值作为其结果*。”

```
Dim a As Integer
Dim b As Integer
a = b = 3 
```

请注意，`Option Strict`指定时，这实际上是一个错误：“Option Strict On 不允许从 'Boolean' 到 'Integer' 的隐式转换。”

这是因为 VB.Net 将其视为两个操作 - 它基本上是在尝试这样做：

```
Dim a As Integer
Dim b As Integer

Dim temp as Boolean
temp = (b = 3)
a = temp 
```

> 所以补充一下我的问题，为什么它会这样工作？仅仅是因为 vb.net 重载了符号 = 有两种含义（赋值和比较）吗？

嗯，这就是语言的设计方式。不过，我怀疑您是正确的，因为相同的运算符 (=) 被用作赋值，并且比较是 VB 采用这种方式的原因。然而，最初的 VB 语言是这样的，并且为了保持 VB.Net 的语法相同（或尽可能接近），我怀疑这种行为被继承了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-22T21:22:41.733

在 Visual Basic`a = b = 3`中转换为有些出乎意料的东西。由于 VB 没有`==`运算符，而是`=`用于赋值和相等比较，所以上面的表达式归结为以下内容：

```
If b = 3 Then
    a = True
Else
    a = False
End If 
```

# javascript - 在循环中对 setTimeout 延迟应用缓动

> ID：12081547
> 
> 赞同：9
> 
> 时间：2012-08-22T21:18:44.837
> 
> 标签：javascript

我在 javascript 循环中调用多个 setTimeout。当前将延迟设置为在每次迭代时增加 200 毫秒，使“self.turnpages()”函数每 200 毫秒触发一次。

但是，我想对这些可变延迟应用某种缓和，以便当循环开始到达最后几次迭代时，延迟会进一步分开，从而导致函数触发减慢。

```
var self = this;    
var time = 0; 

for( var i = hide, len = diff; i < len; i++ ) {
                     (function(s){
                             setTimeout(function(){                    
                                        self.turnPages(s);                           
                             }, time);
                       })(i);                                  
             time = (time+200);
} 
```

我完全不知道如何从这个开始。

希望有人可以提供帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-22T22:10:15.537

这听起来像是 Robert Penner 的缓动方程的工作！[您可以在此处](http://www.robertpenner.com/easing/)下载原始的 ActionScript 2.0 版本（只需删除参数上的强类型以移植到 JavaScript），[此处](http://upshots.org/actionscript/jsas-understanding-easing)对参数有很好的解释。

像下面这样的东西会做你想要的（[小提琴](http://jsfiddle.net/7GQMq/3/)）：

```
var time = 0;
var diff = 30;

var minTime = 0;
var maxTime = 1000;

// http://upshots.org/actionscript/jsas-understanding-easing
/*
    @t is the current time (or position) of the tween. This can be seconds or frames, steps, seconds, ms, whatever – as long as the unit is the same as is used for the total time [3].
    @b is the beginning value of the property.
    @c is the change between the beginning and destination value of the property.
    @d is the total time of the tween.
*/
function easeInOutQuad(t, b, c, d) {
  if ((t /= d / 2) < 1) return c / 2 * t * t + b;
  return -c / 2 * ((--t) * (t - 2) - 1) + b;
}

function easeOutQuad(t, b, c, d) {
  return -c * (t /= d) * (t - 2) + b;
}

function easeInQuad(t, b, c, d) {
  return c * (t /= d) * t + b;
}

for (var i = 0, len = diff; i <= len; i++) {
  (function(s) {
    setTimeout(function() {
      //self.turnPages(s);                           
      console.log("Page " + s + " turned");
    }, time);
  })(i);

  time = easeInOutQuad(i, minTime, maxTime, diff);
  console.log(time);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-10-23T11:54:18.700

**2019 年回答**：您不需要制作自己的循环计时，或处理单个字符变量，只需使用缓动运行函数即可。[`easy-ease`](https://www.npmjs.com/package/easy-ease)这是一个使用npm的快速示例：

```
 import ease from 'easy-ease';

ease({
  startValue: 1,
  endValue: 33,
  durationMs: 2000,
  onStep: function(value) {
    console.log(value)
  }
}); 
```

# ruby-on-rails - 如何从 Resque 工作人员向 Redis 发送数据？

> ID：12081550
> 
> 赞同：0
> 
> 时间：2012-08-22T21:18:47.963
> 
> 标签：ruby-on-rails, redis, resque

我正在尝试创建一个 resque 工作人员，将一些网页抓取作为后台工作。Worker 接收到网站主页的 URL，进行一些网页抓取，然后将结果存储在 Redis 中，并在其中保留五分钟。

下面的代码看起来应该完成我上面描述的吗？

```
class TrialScraper
  @queue = :trial_scraper_queue
  def self.perform(homepage)
    hashed_site_data = 
      {
        :homepage =>
          {
            :url => homepage,
            :title => download_title(homepage),
            :meta_tags => download_robots_tags(homepage) 
          },
        :robots_file => download_robots_file(homepage),
      }
         p hashed_site_data #just to make sure it's working
    REDIS.setex(homepage, 60*5, hashed_site_data.to_json)
  end 
```

现在，这甚至没有出现在 Resque 的 Web 界面中。

知道我做错了什么吗？我认为问题在于将数据发送到 REDIS，但我不确定。

编辑：只是为了澄清，这里有一些更详细的信息。我对上述工作人员的看法是，它在 Resque 的 Web 界面中显示为工作。

我的代码的最终结果应该只是将一些键值对发送到 redis（在 Resque 之外）。但是当我在 redis 客户端并列出所有密钥时，我看不到任何地方列出的密钥。但我应该看到主页与其他键一起列出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T21:49:00.547

我最近编写了一个写入 Resque 队列的项目，然后在处理作业队列时，它会将结果写入同一个 Redis 存储，所以有可能:)

如果您没有在 Resque Web 界面中看到该作业，那么您很可能没有将该作业排入队列？

例如/

```
ok = Resque.enqueue(TrialScraper, homepage) 
```

希望有帮助吗？

# struts2 - Struts2 使用迭代器标签处理数组列表对象字段问题

> ID：12081555
> 
> 赞同：0
> 
> 时间：2012-08-22T21:19:04.150
> 
> 标签：struts2

我正在做一个项目，我在我的操作类填充方法中将对象加载到 ArrayList arrayDiary 中。链接到该页面的页面的 URL 为“populateDiary.action”。我有这个arrayList的公共getter和setter，我可以看到populate方法被调用并且arrayList确实包含值。

我的问题是，当我尝试使用 STRUTS 迭代器标记填充 li 时，我在屏幕上看不到任何内容。我已经阅读了几篇关于此的帖子，据我所知，它们已经完全复制了它们——但是我没有在屏幕上看到我的结果。这是我的 diary.jsp 代码：

```
<s:iterator value="arrayDiary" status="pos" id="res">
<li onclick="$('#eventList').toggleClass('eventList'); $('#eventDesc').toggleClass('eventDesc'); $('.active').toggleClass('active'); $(this).toggleClass('active');"><a href="#"><s:property value="#res.title"/></a></li>
</s:iterator> 
```

这是我的动作类代码：

```
private ArrayList<DiaryEntry> arrayDiary;
private ArrayList<DiaryEntry> arrayEvent;

public String populate() {
    ArrayList<DiaryEntry> arrayEvent = new ArrayList<DiaryEntry>();
    ArrayList<DiaryEntry> arrayDiary = new ArrayList<DiaryEntry>();
    DiaryEntry load = new DiaryEntry();
    username = (String) ActionContext.getContext().getSession().get("username");
    loginId = (String) ActionContext.getContext().getSession().get("loginId");
    ArrayList<DiaryEntry> diaryEntry = load.loadDiaryEntry(username, loginId);
    for (DiaryEntry entry:diaryEntry) {
        if(entry.getEvent() == null) {
            arrayDiary.add(entry);
        }
        else {
            arrayEvent.add(entry);
        }
    }
    return "populate";
}

public ArrayList<DiaryEntry> getArrayDiary() {
    return arrayDiary;
}

public void setArrayDiary(ArrayList<DiaryEntry> arrayDiary) {
    this.arrayDiary = arrayDiary;
}

public ArrayList<DiaryEntry> getArrayEvent() {
    return arrayEvent;
}

public void setArrayEvent(ArrayList<DiaryEntry> arrayEvent) {
    this.arrayEvent = arrayEvent;
} 
```

这是我的 struts.xml：

```
<action name="*Diary" method="{1}" class="spirit.DiaryAction">
    <result name="populate">/diary.jsp</result>
    <result name="input">/diary.jsp</result>
    <result name="success">/diary.jsp</result>
</action> 
```

如果有人能发现我出错的地方，我将不胜感激。我已经在这个问题上工作了 2 天，但没有成功。提前感谢您的帮助和反馈。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T21:48:40.073

在你的动作类中有一个明显`ERROR`的，你已经在你的类和你的方法中定义了，你的方法`arrayDiary`肯定没有发生任何事情`arrayEvent``populate()``<s:iterator>`

请像这样更改您的方法`populate()`：

```
public String populate() {
    arrayEvent = new ArrayList<DiaryEntry>();
    arrayDiary = new ArrayList<DiaryEntry>();
    DiaryEntry load = new DiaryEntry();
    username = (String) ActionContext.getContext().getSession().get("username");
    loginId = (String) ActionContext.getContext().getSession().get("loginId");
    ArrayList<DiaryEntry> diaryEntry = load.loadDiaryEntry(username, loginId);
    for (DiaryEntry entry:diaryEntry) {
        if(entry.getEvent() == null) {
            arrayDiary.add(entry);
        }
        else {
            arrayEvent.add(entry);
        }
    }
    return "populate";
} 
```

# regex - Perl 中文件处理程序和正则表达式的模式匹配

> ID：12081565
> 
> 赞同：0
> 
> 时间：2012-08-22T21:19:28.377
> 
> 标签：regex, perl, grep, pattern-matching, file-handling

继我之前提出的一个问题之后，我试图从两个文件中读取数据，然后逐行解析一个文件，以匹配另一个文件每一行中包含的字符串。第一个是日志文件，第二个我将调用我的密钥文件。我决定使用 foreach 循环遍历密钥文件，然后将其嵌入其中，一个 while 循环将逐步遍历日志的每一行。我正在尝试使用模式匹配来识别特定的字符串，但是这个字符串要么被两个加号（即+name+）包围，要么被一个加号和一个星号（即+name*）包围。不幸的是，我没有太多运气让模式匹配工作......我在下面包含了我的模式搜索代码段的主体：

```
foreach $element (@fr_array) {
open (LOGFILE, "<", $logname)  or die $!;
while (<LOGFILE>) { #While reading one line at a time from the log....
  chomp;
  $log_string = <LOGFILE>;
  if ($log_string =~ /\+$element\+/) {
     $fr_count++;
     print "Counter increment since $log_string is the same as $element.";
     $log_match++;
     }
  } 
```

*编辑*

感谢您的反馈，大家...我调用的几个命令用于帮助我跟踪程序并找到问题....我接受了一些建议，经过更多研究，我正在尝试使用grep 命令，但模式匹配似乎仍然无法正常工作。无论我使用什么作为搜索字符串，它似乎都被解析为真的。我整天都在查看代码，但我也不太确定从这里去哪里。在使用正则表达式失败后，我决定使用不同的搜索字符串，这个字符串由除了几个等号之外的所有文字组成。现在，澄清一下，一旦找到匹配的火柴，我就不想对它们做任何事情，我只需要跟踪有多少火柴，因此我使用了计数器。无论如何，我将包含我现在所在位置的更新代码段。我已经确认我的循环工作正常，这只是模式匹配的问题。我现在得到结果，但数字不准确....我的测试日志应该只返回 1 或 2，但它向我吐出 204。

```
open (LOGFILE, "<", $logname)  or die $!;
while($log_string = <LOGFILE>) {
   chomp $log_string;
   foreach $element (@fr_array) {
      $fr_count++ if (grep {"Action=123 Cls=AM"} $log_string) 
```

再次感谢大家的帮助和耐心。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T21:40:46.573

正如我在评论中指出的那样，您正在尝试在 perl 中模拟“grep -f key_file log_file”命令。看看这个 grep 命令是否可以帮助你。

对于此 perl 代码，您尝试打开 @fr_array 中每个元素的文件。它不是必需的，并且使代码效率低下。此外，您在需要更正的 while 循环中读取 LOGFILE 两次。可以像下面这样阅读示例代码。请注意，+ 或 * 可以通过正则表达式中的 [\+\*] 匹配。

```
open (LOGFILE, "<", $logname)  or die $!;
while(my $log_string = <LOGFILE>) {
  chomp $log_string;
  foreach $element (@fr_array) {
    if ($log_string =~ /\+$element[\+\*]/) {
      $fr_count++;
      print "Counter increment since $log_string is the same as $element.";
      $log_match++;
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T10:04:35.873

我不能 100% 确定我是否正确理解了这个问题。
如上所述，您可以使用“grep”非常简单地做到这一点。
2个柜台有什么目的？

这是一个 perl 的例子。

输入文件：

```
123456789abc
234567890abc
345678901abc
bla+bteam+bla
456789012abc
567890123abc
678901234abc
+cteam*
789012345abc
+ateam*
890123456abc
901234567abc
012345678abc 
```

perl代码：

```
#!/usr/bin/env perl
use strict;

my @tags = ("ateam","bteam");

open LOGFILE, "< inputfile.txt" or dir $!;
my @input = <LOGFILE>;
close LOGFILE;

my ($fr_count, $log_match) = 0;
map { 
    chomp;
    foreach my $tag (@tags) { 
        /\+$tag[\+\*]/ && do { 
            print "Counter increment since $_ is the same as $tag.\n";
            $fr_count++; $log_match++;
        }
    }  
} @input; 
```

# php - 访客点击计数器 - 建议的方法

> ID：12081569
> 
> 赞同：2
> 
> 时间：2012-08-22T21:19:40.830
> 
> 标签：php

我最近收到一个朋友的挑战。以为我会在这里分享它，因为我没有好的解决方案。

假设我的网站需要访问者点击计数，每次访问时计数都会永久增加。

## 问题

**使用 GET 请求更改服务器状态**被认为是不好的做法。因为我想统计进入我网站的用户数量，所以我必须以某种方式存储状态。

我将如何处理这个？我应该打破这种做法并更改 GET 请求的服务器吗？还是有一些更精细的计划我可以完成？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T21:28:51.690

您所做的断言通常是正确的。但是在这里，您想要精确地跟踪是否有人发出了 GET 请求。因此，对此类请求进行这种处理是有道理的！

与缓存机制结合使用时，这有点棘手。因为计算访问者的部分​​不能在缓存中，所以您总是需要服务器端来跟踪计数。

其他解决方案包括：

*   Google Analytics 等外部工具使用带有跟踪图像的 JavaScript（检索图像是一种模拟 POST 请求的方法，但无论如何它只是 GET），并结合 cookie 来仅跟踪唯一身份访问者。
*   日志分析是另一种选择。Web 服务器可以将每个请求连同其他信息（如 IP 地址、用户代理）一起写入文件。分析访问日志可以解决。

[编辑] 我特别喜欢跟踪图像。使这两种解决方案更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T21:26:24.967

我记录访问的方法是使用 PHP`auto_prepend_file`或`auto_append_file`. 在这些文件中，您有以下内容：

```
error_reporting(0);
$conn = mysqli_connect('localhost', 'visitor_counter', 'password', 'visitors');
$ip = mysqli_real_escape_string($conn, $_SERVER['REMOTE_ADDR']);
$query = "UPDATE `visits` SET `count` = `count` + 1 WHERE `ip` = '$ip'";
mysqli_query($conn, $query); 
```

我使用共享主机，所以我必须使用这样的`.htaccess`文件：

```
php_value auto_prepend_file /php/head.php 
```

希望这可以帮助！

# django - 如何使用 django-tastypie 进行发布请求并将数据保存到数据库？

> ID：12081571
> 
> 赞同：3
> 
> 时间：2012-08-22T21:20:22.313
> 
> 标签：django, tastypie

所以，我第一次使用 django-tasty-pie 构建了 rest API。我陷入了一个基本问题，该问题涉及将数据发布到将数据保存到数据库的本地服务器。我怎么做？

如何发送从请求中获取数据并将其保存到数据库的发布请求？

不幸的是，django-tasty-pie 文档中没有太多关于 POST/PUT 的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T22:03:24.337

这个页面对我帮助很大

[http://django-tastypie.readthedocs.org/en/latest/interacting.html](http://django-tastypie.readthedocs.org/en/latest/interacting.html)

# java - Java/Tomcat：ServletContext 和 getResourceAsStream 问题

> ID：12081578
> 
> 赞同：0
> 
> 时间：2012-08-22T21:21:22.500
> 
> 标签：java, tomcat, servlets, web-inf

我正在尝试从 Tomcat Web 应用程序访问 conf 文件（位于 WEB-INF 文件夹中）。目前，我将文件的位置硬编码为`String`. `String`但是，当 tomcat/webapps 文件夹与我的硬编码指示的位置不同时，这不起作用。我在网上查看过，似乎使用该`getResourceAsStream ()`方法是我正在寻找的，但我很难让它发挥作用。当我调用该`getServletContext ()`方法时，我的应用程序不喜欢它。谁能帮我？

编辑：相关的代码块

```
BufferedReader myReader = new BufferedReader (new InputStreamReader (getServletContext ().getResourceAsStream ("/WEB-INF/conf.txt"))); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T17:15:27.543

为了解决这个问题，我在 WEB-INF (path/to/app/WEB-INF/classes/mypackage/) 下创建了两个文件夹，然后将我的文件放在这个文件夹中。然后，我从我的 POJO 调用`this.getClass.getResourceAsStream ("<filename>")`打开一个流。为了得到一个字符串，它是我所做的文件的完整绝对路径名`this.getClass.getResource ("<filename>").toString ().substring (5)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T21:27:49.523

如果您尝试从 Tomcat 中的 WEB-INF 目录加载文件，请使用以下代码：

例如，对于 WEB-INF/config/config.xml 中的文件

```
ServletContext context = ....//get servlet context
InputStream is = context.getResourceAsStream("/WEB-INF/config/config.xml"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T11:25:17.140

以下代码对我有用。我把我的`config`文件保存在`WEB-INF/`

web.xml 代码片段：

```
<servlet>
    <servlet-name>wizardcontroller</servlet-name>
    <servlet-class>com.sg.poc.wizard.controller.CustomerWizardController</servlet-class>
    <init-param>
        <param-name>plm-config</param-name>
        <param-value>plm-config.xml</param-value>
    </init-param>
</servlet> 
```

Servlet 代码片段：

```
String configfile = config.getInitParameter("plm-config") ;
InputStream is = config.getServletContext().getResourceAsStream("/WEB-INF/"+configfile);
System.out.println("Resource Stream is : "+is); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T22:04:29.770

如果您的配置文件位于 /WEB-INF/config.xml，您可以使用“../config.xml”而不是完整路径从 servlet 访问它。这是因为编译的应用程序类通常位于 /WEB-INF/classes 中。

# c# - 从 URL 打开应用程序

> ID：12081579
> 
> 赞同：2
> 
> 时间：2012-08-22T21:21:28.337
> 
> 标签：c#

> **可能重复：**
> [如何创建自己的 URL 协议？（例如所以：//…）](https://stackoverflow.com/questions/389204/how-do-i-create-my-own-url-protocol-e-g-so)

我怎么能四处输入我的浏览器，例如“assembly://update”。并将字符串“update”传递给应用程序的启动参数？我知道 Steam 可以做到这一点，所以我想知道是否可以通过注册表调整。

**找到了。**对我有用的答案在这里：[如何创建自己的 URL 协议？（例如所以：//...）](https://stackoverflow.com/questions/389204/how-do-i-create-my-own-url-protocol-e-g-so)

# haskell - Haskell 你好，世界！WinGHCi 中的程序

> ID：12081585
> 
> 赞同：0
> 
> 时间：2012-08-22T21:22:08.833
> 
> 标签：haskell

我正在使用 Winghci，问题是当我使用时：

```
main = putStrLn "Hello, World!" 
```

我只是想从这个文本文件中获取一些输出，而不必执行任何函数。

上述程序仅在我键入 main 时才有效。

谢谢，我们将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T08:56:28.543

要简单地获得一些输出而无需进一步输入，您可以使用 runhaskell 运行您的文件。它带有 HaskellPlatform 并位于 bin 目录中。您也可以通过右键单击使用 runhaskell 执行您的 haskell 脚本，但脚本完成后它不会显示终端。所以你要么想从终端做事，要么使用 ghci，因为它保持打开状态。

# c# - 如何在 C# 中找到最高版本的 varchar？

> ID：12081590
> 
> 赞同：4
> 
> 时间：2012-08-22T21:22:32.900
> 
> 标签：c#, sql

我正在尝试在 C# 中获取最新版本的程序。下面的代码是我能够让代码在我的控制器中运行而没有任何错误的唯一方法：

```
PList = PList.Where(x => x.PSP == LP && x.VERSION == "1.3"); 
```

问题是，除非我在每个新版本中都维护此代码并将代码中的代码更正为最新版本，否则它将无法正常工作。

所以我认为我可以使用*max*函数来获取最新版本，但它是 SQL DB 中的 varchar，我无法更改它，因为我无权访问更改类型。

我已经尝试了不同的方法来做到这一点，比如下面的例子，但没有运气。

```
PList = PList.Where(x => x.PSP == LP && x.VERSION.MAX()); 
```

*运算符“&&”不能应用于“bool”和“char”类型的操作数*

**那么当我需要知道 PSP 是否等于 LP并且**版本是数据库中的最高数字时，如何获得 Max 版本？感谢您的帮助！

**更新**

谢谢大家的出色回答，我可以看到他们中的一些人可能如何独立工作，但他们都没有使用我拥有的代码。我认为发布其余代码可能有助于更轻松地诊断问题，所以这里是其余代码。

```
public virtual ActionResult getAjaxP(string TP = null)
{
    if (TP != null)
    {
        var PList = from x in db.iamp_mapping select x;
        PList = PList.Where(x => x.PSP == TP);
        return Json(PList.Select(x => new { x.PS }).Distinct().ToArray(), JsonRequestBehavior.AllowGet);
    }
    return View();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T21:28:12.877

不幸的是，您的版本号存储为文本。这意味着“1.11”实际上早于“1.3”。

除此之外，您可以使用`OrderByDescending`. 例如

```
var item = PList.Where(x => x.PSP == LP)
                .OrderByDescending(x => x.VERSION)
                .First(); 
```

这将获得具有最高版本号的*单个项目。*如果有*多个*项目与该版本号匹配，它会变得有点棘手 - 您可能希望按版本分组，然后按组键排序。基本上我们需要更多关于你想要达到的目标的信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-22T21:53:48.017

您可以利用[System.Version](http://msdn.microsoft.com/en-us/library/hdxyt63s%28v=vs.100%29)类。

```
var maxVersion = PList
    .Select(x => new Version(x.VERSION))
    .Max()
    .ToString();

PList = PList.Where(x => x.PSP == LP && x.VERSION == maxVersion); 
```

例如，这将有利于“1.11”而不是“1.3”。

如果这是 Linq-to-Sql，它可能涉及对数据库的额外调用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T21:41:33.707

试试这个

```
 var Max_VERSION = (from x in PList where x.PSP == LP select x.VERSION).Max(); 
```

简单的例子：

```
string[] versions = {"1.3","1.8","4.1","1.9", "1.4", "0.5", "1.7" };
           var max_VeRsion = (from p in versions select p).Max(); 
```

哎呀：

```
 string[] versions = {"1.3","1.8","4.2","1.9", "4.11", "0.5", "1.17" };

        var mv = (from p in versions
                 let m = versions.Max().Split(Convert.ToChar(".")).First()
                 let n = (from q in versions
                          where q.Split(Convert.ToChar(".")).First() == m
                          select Convert.ToInt32(q.Split(Convert.ToChar(".")).Last())).Max().ToString()
                 where
                     p.Split(Convert.ToChar(".")).First() == m && p.Split(Convert.ToChar(".")).Last() == n
                 select p).First(); 
```

最后一次尝试:)

```
 string max_version_work = (from q in
                                       (from p in versions
                                        select new
                                        {
                                            Ma = Convert.ToInt32(p.Split('.').First())
                                            ,
                                            Mi = Convert.ToInt32(p.Split('.').Last())
                                        })
                                   orderby q.Ma descending, q.Mi descending
                                   select string.Format("{0}.{1}", q.Ma, q.Mi)).FirstOrDefault(); 
```

# java - 将“where 条件”传递给导出 pdf 的 jasperreports

> ID：12081601
> 
> 赞同：0
> 
> 时间：2012-08-22T21:23:04.737
> 
> 标签：java, jasper-reports, ireport

一个简单的 SQL 表，具有两个属性和三行：

> 参考 | 姓名：
> 
> 0 | 第一的
> 
> 1 | 第二
> 
> 2 | 第三

我有一个带有 Swing 的 Java 应用程序，通过 JList 显示这一点（每行连接两个字符串，引用和名称）。

我按下一个按钮，使用从 iReport 编译的“from_ireport.jasper”成功导出整个数据库。我也可以从代码编译。

我想选择一个或多个元素，按下按钮并获得仅包含所选元素的 pdf。我在哪里以及如何指定 jasper 的“where 条件”？

我找不到一个简单的例子来看看。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T12:09:51.910

要解决此问题，您可以使用*JR*报告的参数。

例如，您可以使用以下查询表达式：

```
<queryString>
        <![CDATA[SELECT reference, name FROM table WHERE $P!{whereCondition}]]>
</queryString> 
```

用于传递参数值的 Java 代码示例：

```
Map<String, Object> params = new HashMap<String, Object>();
params.put("whereCondition", "reference > 0");
JasperReport jasperReport = JasperCompileManager.compileReport(reportSource);
JasperPrint jasperPrint = JasperFillManager.fillReport(jasperReport, params, connection); 
```

* * *

有关更多详细信息，您可以查看[查询示例](http://jasperreports.sourceforge.net/sample.reference/query/index.html#query)。

# git - ClearCase - 如何像 Git 一样使用

> ID：12081609
> 
> 赞同：5
> 
> 时间：2012-08-22T21:23:21.057
> 
> 标签：git, clearcase

当然，我们的组织在任何地方都没有文档。

我想知道是否可以以类似 git 的方式使用 clearcase？

意思是，有没有一种方法来分支/分叉一个特定的文件？拉请求？合并/提交？ETC。？

或者对于某种类型的桌面 SVN 是否有一种简单的方法可以用于我的 clearcase 工作流程？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T21:45:09.030

[您将在“每个开发人员应该知道的基本 clearcase 概念是什么？](https://stackoverflow.com/questions/645008/what-are-the-basic-clearcase-concepts-every-developer-should-know/645771#645771) ”中找到 ClearCase 和 Git 之间的主要区别。

阻止您像 Git 一样使用 ClearCase 的主要区别是缺少私有提交：如果您在与您的同事相同的分支（或 UCM 流）中签入文件，他/她将不得不立即获取您的新版本（对于动态视图）或在下次更新时（快照视图）。

跨站点使用 ClearCase 可以通过 ClearCase 多站点来完成，它具有阻止任何并发工作的繁琐的所有权系统。
或者您可以使用 CCRC（ClearCase 远程客户端）

在这两种情况下，您仍然需要连接到 ClearCase 服务器，否则您将无法签入（从 Git 更改，您可以在本地提交）。

我建议至少将 ClearCase 与 UCM（ClearCase 附带的一种方法）一起使用，这将迫使您清楚地定义 UCM 组件（相当于 Git 存储库的大小）和 Streams（您正在使用的基线配置）。
从那里，您可以清楚地看到您需要执行的合并工作流程。

有关更多信息，请参阅“ [ClearCase UCM - 使用组件的最佳实践](https://stackoverflow.com/questions/1764329/clearcase-ucm-best-practices-using-components/1766662#1766662)”。
但同样，这将与 Git 不同。

另请参阅“[描述使用版本控制（VCS 或 DVCS）的工作流程](https://stackoverflow.com/questions/2704996/describe-your-workflow-of-using-version-control-vcs-or-dvcs)”以更好地了解 CVCS 和 DVCS 之间的区别。

# asp.net - 为什么这个 ASP-EMAIL 表单不会发送电子邮件

> ID：12081610
> 
> 赞同：-3
> 
> 时间：2012-08-22T21:23:24.253
> 
> 标签：asp.net, asp-classic

我最近在修复我的 ASP EMAIL 脚本时得到了帮助，但现在我在尝试从联系表发送电子邮件时收到此编译错误。脚本位于错误消息下方

“/”应用程序中的服务器错误。

编译错误

说明：在编译服务此请求所需的资源期间发生错误。请查看以下特定错误详细信息并适当修改您的源代码。

编译器错误消息：BC30807：不再支持“Let”和“Set”赋值语句。

源错误：

第 10 行：if Request("Send") <> "" Then 第 11 行：
第 12 行：设置 objMail = Server.CreateObject("Persits.MailSender") 第 13 行：
第 14 行：objMail.Host = strHost

源文件：E:\HostingSpaces\dma\myuniversalcare.com\wwwroot\contact-us\Default.aspx 行：12

这是脚本：

```
<% 
    Session.CodePage = 65001 

Dim strHost, objMail, strToAddress, txtMsg 

    ' Change this to your own SMTP server 
    strHost = "localhost" 

    if Request("Send") <> "" Then 

        Set objMail = Server.CreateObject("Persits.MailSender") 

        objMail.Host = strHost 

        objMail.From = "info@persits.com"           ' From address 
        objMail.FromName = "AspEmail Live Demo"     ' optional 

        strToAddress = Trim(Request("txtTo")) 

        ' To prevent header injection attack 
        strToAddress = Replace( strToAddress, " ", "" ) 
        strToAddress = Replace( strToAddress, chr(13), "" ) 
        strToAddress = Replace( strToAddress, chr(10), "" ) 

        ' To address, 2nd argument omitted. 
        objMail.AddAddress strToAddress 

        ' Message subject 
        objMail.Subject = objMail.EncodeHeader( Request("txtSubject"), "UTF-8" ) 

        ' Enable Unicode 
        objMail.ContentTransferEncoding = "Quoted-Printable" 
        objMail.CharSet = "UTF-8" 

        ' Message body 
        objMail.Body = Request("txtBody") 

        ' Include a disclaimer 
        objMail.Body = objMail.Body & chr(13) & chr(10) & chr(13) & chr(10) & "-----------------------------------" & chr(13) & chr(10) & chr(13) & chr(10) & "This message was generated by the AspEmail live demo on-line application. Persits Software, Inc. is not responsible for its content." 

        On Error Resume Next 
        objMail.Send ' Send message 

        If Err = 0 then      
            txtMsg = "<font color=green>Success! Message sent to " & strToAddress + ".</font>" 
        Else         
            txtMsg = "<font color=red>Error occurred: " + err.Description + "</font>" 
        End If 

    End If 
%> 

<HTML> 
<HEAD> 

<META HTTP-EQUIV="Content-Type" content="text/html; charset=utf-8"> 

<TITLE>AspEmail Live Demo: Unicode-enabled Message Sending</TITLE> 
</HEAD> 
<BODY style="font-family: arial narrow; font-size: 10pt"> 

<h2>AspEmail Live Demo: Unicode-enabled Message Sending</h2> 

<P>  

<FORM METHOD="POST" ACTION="demo_simple.asp"> 

<TABLE CELLSPACING=2 CELLPADDING=2 BGCOLOR="#E0E0E0" style="border: 1pt black solid; border-collapse: collapse"> 
    <TR> 
        <TD>To:</TD> 
        <TD><INPUT TYPE="TEXT" size="40" NAME="txtTo" VALUE="<% = Server.HtmlEncode(Request("txtTo")) %>"></TD> 
    </TR> 
    <TR> 
        <TD>Subject:</TD> 
        <TD><INPUT TYPE="TEXT" size="40" NAME="txtSubject" VALUE="<% = Server.HtmlEncode(Request("txtSubject")) %>"></TD> 
    </TR> 
    <TR> 
        <TD valign="top">Body:</TD> 
        <TD><TEXTAREA NAME="txtBody" Rows="10" Cols="40"><% = Server.HtmlEncode(Request("txtBody")) %></TEXTAREA></TD> 
    </TR> 
    <TR> 
        <TD COLSPAN=2><INPUT TYPE="SUBMIT" NAME="Send" VALUE="Send Message"></TD> 
    </TR> 

</TABLE> 

<P> 

<% = txtMsg %> 

</FORM> 

</BODY> 
</HTML> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T21:26:03.833

如果您使用的是 aspx，则不能使用 set 。您在 aspx 页面中有一个 ASP 代码。

# mysql - 在 1 个查询中获取测验数据、问题和答案？

> ID：12081611
> 
> 赞同：0
> 
> 时间：2012-08-22T21:23:24.627
> 
> 标签：mysql, sql, database

我需要为每个问题获取测验标题、测验描述、测验问题和答案。我的表结构是：

```
quizes
quize_id | title | user_id | ...

questions
questions_id | quize_id | question | ...

question_answers
answer_id | question_id | user_id | answer | ... 
```

我可以使用加入

```
SELECT * FROM quizes JOIN questions q ON q.quize_id=quizes.quize_id JOIN question_answers a ON a.question_id=q.question_id 
```

但是这样做的问题是我会得到许多带有冗余数据的行。例如，每一行都会带有字段 title,user_id, ... 另一种方法是为每个问题进行额外查询以获取答案。有没有更好的办法？我应该只使用 1 个查询还是更多？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T00:30:32.560

您的表包含 3 种类型的数据。如果您使用已有的查询，您将获得所有数据作为一个大表。你说过这涉及很多重复。

如果您使用多个查询，您将获得多个结果集，这实际上会给您留下多个表，因此这不太可能有帮助。

您可以将查询缩减为仅要获取数据的列：

```
SELECT qq.Question, qa.Answer
FROM quizes qz 
  join questions qq on qz.quize_id = qq.quize_id 
  join question_answers qa on qq.question_id = qa.question_id
WHERE qz.quize_id = @quize_id
ORDER BY 1, 2  --or other ordering 
```

但是，如果同一问题有多个答案，则该问题将在每一行重复。您对此无能为力，这是将多个表的数据组合到一个表中的代价（“反规范化”）。

如果您需要格式化输出表，使其看起来像这样（但有更多列）：

```
 Quize_id | Question | Answer
    1          Q1         A1
                          A2
               Q2         A3
    2          Q3         A4 
```

这是完全不同的事情。您需要使用您必须填充临时表的查询，按您想要显示的排序顺序对数据进行排序。您需要向此表添加一个主键（整数）列，然后运行一组更新语句以将重复值替换为空值，然后按主键列的顺序输出表。（还有其他方法可以做到这一点，但这是最容易解释的）

这有帮助吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-23T09:25:28.827

我还发现了另一种返回我需要的所有数据的方法，包括每个问题的用户详细信息：

```
SELECT 
    question, 
    group_concat(qa.answer SEPARATOR ',') as answers,
    group_concat(qa.user_id SEPARATOR ',') as userIds,
    group_concat(up.nickname SEPARATOR ',') as nickname
FROM quize_questions qq
INNER JOIN question_answers qa ON qa.question_id=qq.question_id
INNER JOIN user_profile up ON up.user_id = qa.user_Id
GROUP BY qq.question_id 
```

我只是不确定这是否是正确的方法。我担心速度。

# python - 在两个列表上使用 zip() 与两个可迭代对象进行比较

> ID：12081612
> 
> 赞同：1
> 
> 时间：2012-08-22T21:23:25.370
> 
> 标签：python, python-2.7

作为免责声明，我对编程比较陌生，所以请原谅我在写这个问题时所做的任何简单疏忽。

我正在使用 Python 2.7.3，在这样做的过程中，我注意到一些对我来说似乎不寻常的东西，并且无法通过 Google 搜索或 Python 文档找到令人满意的解释。我可以创建一个列表并使用 zip() 创建一个元组列表，如下所示：

```
numList = range(4)
print zip(numList, numList)

[(0, 0), (1, 1), (2, 2), (3, 3)] 
```

但是，当我在 numList 上使用 iter() 函数创建一个可迭代对象并在该对象上以类似方式使用 zip() 时，我得到了截然不同的结果：

```
numList = range(4)
numList = iter(numList)
print zip(numList, numList)

[(0, 1), (2, 3)] 
```

如果有人能解释这两个程序之间的区别以及导致这种情况发生的幕后情况，我将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-22T21:28:13.317

在第一种情况下，您提供`zip`“两个”列表（实际上是相同的对象，即列表，但您提供了对它的两个引用），因此它交替地从每个列表中提取相同的信息并“压缩”它。使用信息不会*消耗*它。

在第二种情况下，您创建一个迭代器，它将“即时”/按需生成从 0 到 3 的值。

现在，您将此迭代器两次提供给 zip（同样，对迭代器的引用相同），这会从每个迭代器交替“拉出”数据。（即它调用迭代器的`next()`函数）。

“第一个”迭代器提供第一个值`0`，“第二个”迭代器（实际上只是对同一个值的引用）提供下一个值`1`，以此类推，直到迭代器在 处用尽`3`。

所以要记住的主要事情是，你在这两种情况下提供的是对*同一个*对象`zip`的两个相同的引用。在第一种情况下，列表包含*所有*已经被交错/压缩的数据（访问/使用数据不会使其不可用）。在第二种情况下，数据是*按需*生成的，因此生成的序列被交错/压缩，并且随着每个值的生成，它被消耗并且随后不再可用。

 ***我希望这是有道理的（更容易在一张纸上勾勒出来：）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T21:27:11.393

当你迭代一个迭代器时，元素会被消耗掉，所以每个数字只出现一次。

当您对同一个列表进行两次迭代时，会生成两个单独的列表迭代器，每个迭代器都会生成一次数字，因此每个数字总体上会出现两次。

你的第一个程序相当于做

```
print zip(iter(numList), iter(numList)) 
```***

# c# - 使用 HtmlAgilityPack 将特定节点保存为 HTML

> ID：12081613
> 
> 赞同：0
> 
> 时间：2012-08-22T21:23:32.390
> 
> 标签：c#, html, html-agility-pack

我有一个显示表格以及一些按钮、导航选项卡等的网站。使用 HtmlAgilityPack 我只想将包含表格（div）的节点保存到 .html 文件中。我一直在试验这段代码：

```
string dashboard = doc.DocumentNode.SelectSingleNode("//div[@id='Dashboard']").InnerHtml;
doc.LoadHtml(dashboard);
doc.Save(currDir + "\\dashboardOutputFile.html"); 
```

但这只会保留表格的文本组件，而不会保留其布局/显示信息。我尝试添加 Doctype 声明以及将 html 和 body 标记包含到仪表板字符串中，但它没有效果。

任何建议表示赞赏。

问候。

编辑：

我应该更明确。我通过覆盖 Render 方法来捕获我的页面的 html：

```
protected override void Render(HtmlTextWriter writer)
{
    using (HtmlTextWriter htmlwriter = new HtmlTextWriter(new StringWriter()))
    {
        base.Render(htmlwriter);
        string renderedContent = htmlwriter.InnerWriter.ToString();

        var doc = new HtmlDocument();
        doc.LoadHtml(renderedContent);

        try
        {
            string dashboard = doc.DocumentNode.SelectSingleNode("//div[@id='Dashboard']").InnerHtml;
            dashboard = "<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\"><br><html xmlns=\"http://www.w3.org/1999/xhtml\"><head></head><body><div><br>" + dashboard + "<br></div></body></html>";
            doc.LoadHtml(dashboard);
            doc.Save(currDir + "\\dashboardOutputFile.html");
        }
        catch (NullReferenceException ex)
        {
            // Do nothing.
        }
        writer.Write(renderedContent);
    }
} 
```

据我所知，字符串“dashboard”应该包含一个完整的 HTML 页面。然而，生成的 .html 文件显示如下：

```
INCIDENT MANAGEMENT
Jun '12 F'12
Trend   F'12    2011
(avg)
Severe Incidents (Sev1/2):  2       2   4.16
Severe Avoidable Incidents (Sev1/2):    1       1.3 1.91
Incidents (Sev3):   600     459 460.92
Incidents (Sev4) - No business Impact:  869     782 793
Proactive Tickets Opened:   24      20  14
Proactive Tickets Resolved/Closed:  22      17.8    11
CHANGE MANAGEMENT
Total Planned Changes:  623     564 583.58
Change Success Rate (%):    99.9        99.4    99
Non-Remedial Urgent Changes:    5       11.4    47.08
PROBLEM MANAGEMENT
New PIRs:   1       1.4 2
Closed PIRs:    1       2.3 3
Overdue Action items:   2       3.4 0
COMPLIANCE MEASUREMENTS
    Jun Trend   May
Total Number of Perimeter Devices:  258     242
Perimeter Devices - Non Compliant:  31      7
Total Number of Internal Devices:   6632        6521
Internal Devices - Non Compliant:   160     38
Unauthorized Perimeter Changes: 0       0
Unauthorized Internal Changes   0       0
LEGEND

ISP LINKS
June    May Trend
SOC CPO DRP SOC CPO DRP
39% 35% 74%     38% 35% 73%     
BELL MPLS HEAD ENDS
June    May Trend
SOC CPO SOC CPO
8%  5.5%    7%  10% 7.5%    5%  6%  10% 
ENTERPRISE NETWORK (# of issues called out)
June    May Trend
CORE    FW/DMZ  CORE    FW/DMZ
1   0   1   0   
US & INTL (# of issues called out)
June    May Trend
US  Intl    US  Intl
2   3   2   3   
LINE OF BUSINESS    BELL WAN MPLS
<>  50%-65% >65%    <>  50%-65% >65%    Trend
Retail: 2269    4   0   2271    2   0   
Business Banking:   60  0   0   51  1   0   
Wealth: 121 2   1   111 3   2   
Corporate:  49  2   0   51  1   1   
Remote ATM: 280 0   0   279 0   0   
TOOLS
Version Currency    Vulnerability Status    Health Status
Key Messages: 
```

仅显示表格单元格的文本。没有表格布局，没有背景颜色等。即使我将文件复制到 JSFiddle 中，它也会像这样显示。为了使它成为一个完整的 HTML 页面，我缺少什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T19:37:43.733

可能有一个链接到原始 html 的 css 文件未在您下载的页面中读取。

# dynamic - Getpivotdata 基于另一个单元格中的值的透视位置。

> ID：12081617
> 
> 赞同：1
> 
> 时间：2012-08-22T21:24:04.437
> 
> 标签：dynamic, excel-2007, excel-formula, excel-2010, pivot-table

GETPIVOTDATA("Data",{动态引用另一张表},"Field","Item")

我试图让我的公式变得超级动态。我有 5 - 10 个不同的工作表，上面有数据透视表。我设置了其余的公式，以从一个可以更改的小数据表中获取它们的“FIELD”和“ITEM”。我已经尝试过命名范围，但再次无法使其正常工作。getpivot 中唯一我无法动态化的是数据透视表的位置。我看到了 CHOOSE(1,"STRINGS") 函数，但我不知道会有多少个枢轴。我已经将 INDIRECT() 与 vlookups 一起使用。我没有任何想法欢迎任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T10:23:48.363

使用命名范围来引用数据透视表应该可以工作。但是，请确保命名范围仅引用数据透视表中的单个单元格。如果它指的是一个范围或整个表，它将不起作用。

**编辑** 如果你想从另一个单元格中拉出数据透视表，你需要使用 INDIRECT 函数

```
    =GETPIVOTDATA("金额",INDIRECT($Q$2),"姓名","Jack","Month","Feb")
```

单元格 $Q$2 可以包含引用数据透视表的命名范围或单元格引用。无论哪种情况，如果您要跨多个工作表工作，您还需要指定工作表。例如，$Q$2 可以包含

```
    枢轴！$A$1
```

# vb.net - 获取 WebBrowser 的 Document.Url

> ID：12081623
> 
> 赞同：0
> 
> 时间：2012-08-22T21:24:47.780
> 
> 标签：vb.net, visual-studio-2010

编程环境：Visual Studio 2010
编程语言：VB.NET

我有一个动态添加的选项卡式网络浏览器，`Dim`每次用户单击“新选项卡”按钮时，我都是网络浏览器，如下所示：`browser = New WebBrowser()`并根据选项卡计数为其命名，例如 browser2，如果有 2标签页。所以我的问题是**- 关于时间 -**我将如何获得 WebBrowser 的 Url，我已经尝试过`Dim UrlString As String = CType(tabMain.SelectedTab.Controls.Item(browser.Name), WebBrowser).Url.ToString`但是，如果我错了，请纠正我，我发现 WebBrowser 没有被归类为控件，以及我认为这个的原因是因为：

1.  这给了我一个例外：对象引用未设置为对象的实例。
2.  所以我尝试循环浏览 中的控件，`tabMain.SelectedTab`发现 WebBrowser(browser) 不包含在集合中。我用来循环的代码是：

    `For Each ctrl As Control In Me.tabMain.SelectedTab.Controls` `MsgBox(ctrl.Name)`
    `Next`

尝试循环遍历所有父控件，但没有出现 WebBrowser 的迹象。希望这是足够的信息=P

提前致谢。

**更新：**发现了问题，真的很愚蠢，我的理论也是胡说八道=P。只是忽略=]大声笑

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T08:16:25.087

试试这个。

```
Dim UrlString As String = CType(tabMain.Controls.Item(0), WebBrowser).Url.ToString 
```

我假设`tabMain`是`TabControl`. 如果这是真的并且每个选项卡中都有一个`WebBrowser`控件，那么它应该可以工作。

# arrays - 使用 VBA 将值插入到 Excel 表中的正确方法是什么？

> ID：12081624
> 
> 赞同：5
> 
> 时间：2012-08-22T21:24:52.577
> 
> 标签：arrays, vba, excel, insert, listobject

我需要能够使用 VBA 代码将大量值插入到 excel 中的空表中。到目前为止，代码是这样工作的。

首先，用户在用户表单中输入一个值。然后代码清除表格，然后根据代码中已有的查找条件查找一系列数字。检索到的数据全部包含在单个列中，并像数组一样存储。

从这里开始，我需要将所有值放入表中的某个列（策略#），从而将表行扩展为检索数据集中的行数。（如果需要，我确实已经将计数单独存储为“AC”）我要插入的列标题是“Policy #”。

请记住，在代码的当前时间表中只有一个空白行，我怎样才能正确插入数据？我试过了

```
 range("commissionstatement[Policy #]").value = Als 
```

但这不起作用。顺便说一下，Als 是值数组。通常要插入数组，我必须插入一个大小相等的范围，这就是我已经将行数作为 AC 的原因。

我也尝试过使用`range("commissionstatement").listobject.listrows`，但这也不起作用。

有什么建议吗？我是否需要在表中插入与我添加的数据数量相等的行数，然后才能像这样将数据实际放入其中...

```
range("commissionstatement").listobject.listrows.add () 
```

然后插入数据？

如果需要更多信息，请告诉我。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T05:54:47.637

假设您使用的是 Excel 2010，试试这个（可能不适用于早期版本的 Excel）

```
Sub AddToList()
    Dim lo As ListObject
    Dim ws As Worksheet
    Dim Als() As Variant
    Dim rng As Range

    Set ws = ActiveSheet

    ' Get reference to table
    Set lo = ws.ListObjects("MyTable")  ' <--- Update this with your table name

    If lo.InsertRowRange Is Nothing Then
        ' List already has data
        Set rng = lo.ListRows.Add.Range
    Else
        ' List is empty
        Set rng = lo.InsertRowRange
    End If

    '  *** Remove one of these two lines ***
    ' If Als is a 1 dimensional array
    rng.Cells(1, lo.ListColumns("Policy #").Index).Resize(UBound(Als) - LBound(Als) + 1, 1) = Application.Transpose(Als)

    ' If Als is 2 dimensional array (1 to rows, 1 to 1)
    rng.Cells(1, lo.ListColumns("Policy #").Index).Resize(UBound(Als, 1), 1) = Als
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-02T11:53:12.427

这对我有用。我还用数组中的数据填充了一个空的 ListObject。为此，数组`matriu`必须是二维数组。

```
Dim matriu() As Variant
Dim ls As ListObject

Set ls = Hoja1.ListObjects(1)

' Retrieve data
matriu = Hoja1.Range("Origen")

' Erease all rows of the ListObject, if needed
ls.DataBodyRange.Delete

' This line is needed in order for the next line 
' not to throw an error if the listobject is empty.
ls.ListRows.Add

' Fill the ListObject with all data in one operation to reduce execution time    
Range(ls.DataBodyRange.Cells(1, 1), _
   ls.DataBodyRange.Cells(UBound(matriu, 1), UBound(matriu, 2))) = matriu 
```

# python - 使用重载的 _init_ 验证表单

> ID：12081628
> 
> 赞同：0
> 
> 时间：2012-08-22T21:25:02.063
> 
> 标签：python, django, django-forms, django-views

我有一个带有新*init*方法的表单，它允许根据参数显示各种选择：

```
class Isochrone_Set_Parameters(forms.Form):
    Grid_Choices = Grids_Selection.Grid_Choices

    def __init__(self, Grid_Type, *args, **kwargs):
        super(Isochrone_Set_Parameters, self).__init__(*args, **kwargs)

        if Grid_Type == Grids_Selection.Grid_Values[0]:
            Choices = (('0.0','0.0'),('0.1','0.1'),('0.3','0.3'),('0.5','0.5'),('0.6','0.6'),('0.7','0.7'), \
                   ('0.8','0.8'),('0.9','0.9'),('0.95','0.95'))
            self.fields['Rotation_Rate'] = forms.ChoiceField(choices=Choices)
        elif Grid_Type == Grids_Selection.Grid_Values[1]:
            Choices = (('0.0','0.0'),('0.568','0.568'))
            self.fields['Rotation_Rate'] = forms.ChoiceField(choices=Choices)
        else:
            Choices = (('-1.0','-1.0'),('-2.0','-2.0'))
            self.fields['Rotation_Rate'] = forms.ChoiceField(choices=Choices)

        self.fields.keyOrder = [
            'Selected_Grid',
            'Metallicity',
            'Mass',
            'Rotation_Rate']

    Selected_Grid = forms.ChoiceField(choices=Grid_Choices)
    Metallicity = forms.FloatField()
    Mass = forms.FloatField() 
```

和以下观点：

```
def Isochrone(request):
    if request.method == 'POST':# If the form has been submitted...
        form = Isochrone_Set_Parameters(request.POST) # A form bound to the POST data

        if form.is_valid():

            return HttpResponse("C'est ok")

        else:
            return render_to_response("Site/Isochrone.html",{                         
                            'form': form
                            },context_instance=RequestContext(request))
    else:

        form = Isochrone_Set_Parameters(Grid_Type = "NotSet",initial={'Metallicity': -1.0, 'Mass': -1.0, 'Rotation_Rate': -1.0}) # An unbound form

        return render_to_response("Site/Isochrone.html",{
                        'form': form
                        },context_instance=RequestContext(request)) 
```

发布表单时，form.is_valid() 测试失败。我没有错误消息，并且可以通过 form.POST.["My_Value"] 访问发布的值。我不明白我做错了什么。有人可以告诉我如何纠正这个问题吗？

（我准确地说，该错误似乎与表单中*init*方法的重载有关，因为如果我为 Rotation_Rate 放置一个简单的 ChoiceField，它会完美运行。）

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T22:24:09.317

您已将签名更改为表单初始化，因此第一个参数现在是`Grid_Type`而不是通常的`data`. 这意味着当你这样做时`form = Isochrone_Set_Parameters(request.POST)`，POST 被用于`Grid_Type`。

要么确保你总是通过`Grid_Type`，要么（最好）根本不把它放在参数列表中：从`kwargs`：

```
def __init__(self, *args, **kwargs):
    Grid_Type = kwargs.pop('Grid_Type', None)
    super(Isochrone_Set_Parameters, self).__init__(*args, **kwargs)
    ... 
```

（另外，请使用 PEP8 标准命名约定：`IsochroneSetParameters`、、`grid_type`等）。

# ios - 无法从 wsdl 导入 localhost url

> ID：12081637
> 
> 赞同：0
> 
> 时间：2012-08-22T21:25:42.540
> 
> 标签：ios, wcf, soap, soapui, wsdl2objc

我正在尝试在 iPhone 上使用肥皂来使用 WCF Web 服务（不是我自己编写的）。在同一 Web 服务器上运行这些工具时，我可以使用 SoapUI 和 .Net WebService Studio 测试该服务。但是当我从另一台机器上尝试时，这两个工具在尝试从本地主机导入时都会失败：

```
<wsdl:import namespace="http://MyDomain.IGeneralInterface" location="http://localhost:8000/?wsdl=wsdl0"/> 
```

wsdl0：

```
<xsd:schema targetNamespace="http://MyDomain.IGeneralInterface/Imports">
<xsd:import schemaLocation="http://localhost:8000/?xsd=xsd0" namespace="http://MyDomain.IGeneralInterface"/>
<xsd:import schemaLocation="http://localhost:8000/?xsd=xsd2" namespace="http://schemas.datacontract.org/2004/07/MyDomain.IGeneralInterface"/>
<xsd:import schemaLocation="http://localhost:8000/?xsd=xsd1" namespace="http://schemas.microsoft.com/2003/10/Serialization/"/>
<xsd:import schemaLocation="http://localhost:8000/?xsd=xsd3" namespace="http://schemas.microsoft.com/2003/10/Serialization/Arrays"/>
<xsd:import schemaLocation="http://localhost:8000/?xsd=xsd4" namespace="http://schemas.microsoft.com/Message"/>
</xsd:schema> 
```

我希望能够使用 wsdl2objc，但它也无法识别导入。

谁能告诉我为什么这是一个问题以及如何处理它？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T08:30:23.707

他们失败的原因是您的 wsdl 不平坦。为了使您的 WCF 服务具有互操作性，您可能会考虑扁平化您的 wsdl。请点击以下链接：

**[如何展平你的 wsdl](http://weblogs.thinktecture.com/cweyer/2007/05/improving-wcf-interoperability-flattening-your-wsdl.html)。**

注意：如果您是 .NET 4.5，那么您会将其作为内置功能。即，当您开发服务时，您会看到一个生成扁平 wsdl 的 url。

# asp.net - listview插入项模板中的下拉列表将null传递给数据库

> ID：12081639
> 
> 赞同：4
> 
> 时间：2012-08-22T21:25:43.673
> 
> 标签：asp.net

目前我有一个下拉列表，它有自己的 sqldatasource 填充下拉列表。ddl 在一个 listviews 中，它也在 sqldatasource 上，插入项模板。但是，当我们单击插入时，传递给 dbase 的值是空值。

```
<InsertItemTemplate>
                    <tr style="">
                        <td>
                            <asp:Button ID="InsertButton" runat="server" CommandName="Insert" 
                                Text="Insert" />
                            <asp:Button ID="CancelButton" runat="server" CommandName="Cancel" 
                                Text="Clear" />
                        </td>
                        <td>
                            &nbsp;</td>
                        <td>
                            <asp:TextBox ID="td_t_idTextBox" runat="server" Text='<%# Bind("td_t_id") %>' Enabled="false" />
                        </td>
                        <td>

                            <asp:DropDownList ID="DropDownList2iit" runat="server" DataSourceID="SqlDataSource30" 
                            DataTextField="document_name" DataValueField="document_id" 
                            SelectedIndex='<%# Bind("td_docid") %>'>
                            </asp:DropDownList>
                        </td>
                    </tr>
                </InsertItemTemplate> 
```

我尝试在我的 sqldatasource 插入参数中同时使用 document_id 和 td_docid。

```
<InsertParameters>
        <asp:Parameter Name="td_t_id" Type="Int32" />
        <asp:Parameter Name="td_docid" Type="Int32" />
        <asp:Parameter Name="document_id" Type="Int32" />
    </InsertParameters> 
```

但是，使用时这两个值都不会给我一个除 null 之外的实际值。这是普遍现象吗？

更新：我最终使用 oniteminserting 做了一些魔术背后的代码

```
protected void ListView2_OnItemInserting(object sender, EventArgs e)
{
    string sv = ((DropDownList)ListView2.InsertItem.FindControl("DropDownList2iit")).SelectedValue;
    SqlDataSource31.InsertParameters.Add("document_id", sv);

} 
```

它像它应该的那样工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-27T11:09:38.937

这个问题很老，但可能会对某人有所帮助。

您正在将下拉列表的值绑定到 selectedindex 属性。它应该绑定到 SelectedValue。无需为此编写代码..

代替 ：

```
SelectedIndex='<%# Bind("td_docid") %>'> 
```

和

```
SelectedValue= '<%# Bind("td_docid") %>' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-27T09:56:54.347

您可以尝试如下。（我 100% 确定，但希望它完全有效）

```
protected void ListView2_OnItemInserting(object sender, EventArgs e)
{
    string sv = ((DropDownList)e.Item.FindControl("DropDownList2iit")).SelectedValue;
    SqlDataSource31.InsertParameters.Add("document_id", sv);

} 
```

# javascript - 引导 onClick 按钮事件

> ID：12081640
> 
> 赞同：21
> 
> 时间：2012-08-22T21:25:45.387
> 
> 标签：javascript, jquery-events

这似乎是一个愚蠢的问题，但只是得到了引导，它没有在网站上提供任何关于向按钮添加 Javascript 回调的示例......

尝试将我的按钮设置为 id 标志，然后

```
<div class="btn-group">
  <button id="rectButton" class="btn">Rectangle</button>
  <button class="btn">Circle</button>
  <button class="btn">Triangle</button>
  <button class="btn">Line</button>
  <button class="btn">Curve</button>
  <button class="btn">Pic</button>
  <button class="btn">Text</button>
  <button class="btn">Gradient</button>
</div> 
```

我想为矩形按钮添加回调...

```
$('#rectButton').on('show', function (e) {
    //ACTION
}) 
```

无法理解引导回调的意义。

我在网上能找到的都是面向 Rails + Bootstrap 的……没有 bootstrap，只有 JS。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-08-22T21:34:47.137

js中没有`show`事件 - 您需要将按钮绑定到`click`事件：

```
$('#id').on('click', function (e) {

     //your awesome code here

}) 
```

请注意，如果您的按钮位于 a 内`form`，您可能更愿意将整个表单绑定到`submit`事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-11-24T10:27:49.247

如果像我一样，您在页面上动态创建了按钮，

```
$("#your-bs-button's-id").on("click", function(event) {
                       or
$(".your-bs-button's-class").on("click", function(event) { 
```

方法不起作用，因为它们仅适用于当前元素（而不是未来元素）。相反，您需要引用在网页初始加载时存在的父项。

```
$(document).on("click", "#your-bs-button's-id", function(event) {
                       or more generally
$("#pre-existing-element-id").on("click", ".your-bs-button's-class", function(event) { 
```

[在此处](https://stackoverflow.com/questions/6658752/click-event-doesnt-work-on-dynamically-generated-elements)和[此处](https://stackoverflow.com/questions/203198/event-binding-on-dynamically-created-elements)的堆栈溢出中，还有许多其他关于此问题的参考。

# jquery - .load() 失去了加载的 html 元素的层次结构

> ID：12081641
> 
> 赞同：0
> 
> 时间：2012-08-22T21:25:53.747
> 
> 标签：jquery

我几乎已经解决了使用 jquery (1.8.0) 部分加载 html 的任务。

这是我将从我的服务器收到的 html：

```
<form id="save-form" action="/sales_item/edit/9/" method="post">
  <p>
     <label for="id_item_description">Item Description:</label>
     <input id="id_item_description" type="text" maxlength="40" value="test2y" name="item_description">
  </p>
  <input type="submit" value="save">
</form> 
```

但是，当我在`<tr>`元素中使用以下 jquery 加载上述内容时...

```
function row_edit() {
    // e.g. url = '/sales_item/edit/8' 
    var url = $(this).attr("href") + "/";

    //e.g. get whole row to be replaced with editing fields
    var row = $(this).closest('tr')

    row.load(
        url,        
        function () {
            $("#save-form").submit(url, row_save);
        }
    );
    return false;
} 
```

，层次结构完全丢失了，看看form标签是如何在内容之前关闭的。

```
<tr>
   <form id="save-form" action="/sales_item/edit/9/" method="post"></form>      
   <p>
     <label for="id_item_description">Item Description:</label>
     <input id="id_item_description" type="text" maxlength="40" value="test2y" name="item_description">
   </p>
   <input type="submit" value="save">
</tr> 
```

知道我在负载中做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T21:33:40.450

A`<tr>`不能包含`<form>`元素。大多数浏览器都尝试在一定程度上解决它，但它并不可靠，而且它毕竟是无效的。

您需要创建`<td>`第一个：

```
$("<td>").appendTo(row).load(...); 
```

# unit-testing - 在使用 CocoaPods 时设置 RestKit 0.10.1 进行测试？

> ID：12081644
> 
> 赞同：0
> 
> 时间：2012-08-22T21:26:13.763
> 
> 标签：unit-testing, restkit, cocoapods

我正在尝试在使用 CocoaPods 时为 RestKit 设置测试环境，但我似乎无法包含 RestKit 的测试框架。

我[使用 RestKit 进行了单元测试，](https://github.com/RestKit/RestKit/wiki/Unit-Testing-with-RestKit)但我无法包含我的任何 podfile。

然后我发现[这篇](http://www.irvinruz.com/en/posts/using-cocoapods-to-manage-your-ios-project-dependencies)关于设置 CocoaPods 的文章有一小部分关于测试：

> 在尝试执行 CookPix 的单元测试时，我遇到了这个问题
> 
> LoggerClient.h not found 如上所述， pod install 更改了您的 Xcode 项目主目标（我猜它需要与项目名称类似的那个）以基于 Pods.xcconfig 文件的目标配置。这让 Xcode 可以找到您的依赖项的头文件，并使用正确的标志编译您的项目。
> 
> 然而，它不会改变所有目标的配置，在我们的例子中，单元测试目标。要解决此问题，请单击您的 Xcode 项目，然后再次单击辅助面板上的 Xcode 项目，然后单击 Info 选项卡。将单元测试目标的“基于配置文件”属性更改为 Pod。这应该修复单元测试目标的依赖关系。

这解决了包含我的 pod 文件的问题，但我无法安装 RestKit 的测试框架。编译器找不到这个文件，因为 pod 没有安装它。

```
#import <RestKit/Testing.h> 
```

通过查看 CocoaPod 规范，它看起来应该被包括在内。这是我的 Podfile 中的相关行。

```
pod 'RestKit', '0.10.1' 
```

我也试过：

```
pod 'RestKit/Testing', '0.10.1' 
```

结果相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T13:56:53.150

我还没有调查为什么会这样，但要包含 RestKit 的测试文件，你必须把

```
pod 'RestKit/Testing', '0.10.1' 
```

前

```
pod 'RestKit', '0.10.1' 
```

并清除您的 pods 目录并进行 pod 安装。或者，如果您正在运行 Cocoapods 0.14.0.rc1，则可以跳过此步骤，在这种情况下，您可以使用 pod update。

# yql - 如何执行批量查询？

> ID：12081645
> 
> 赞同：1
> 
> 时间：2012-08-22T21:26:20.597
> 
> 标签：yql

如果我有一个包含多个 url 的数组：

```
['http://www.abc.com', ..., 'http://www.xyz.com'] 
```

对于每个 url，我想使用以下查询获取 html：

```
select * from html where url=[url from array] 
```

问题：我是否需要为数组中的每个 url 向 yql 发出请求，或者有没有办法用所有 url 向 yql 发送单个请求并接收批量响应？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T22:31:20.180

您可以使用以下查询：

```
select * from html where url in ('http://www.yahoo.com','http://www.google.com') 
```

或者，您也可以使用 yql.query.multi YQL 表，它允许您组合不同的 YQL 查询。例如：

```
select * from yql.query.multi where queries="select * from html where url='http://www.google.com';select * from html where url='http://www.javarants.com/rss'" 
```

# nginx - Kohana 似乎不适用于 NGiNX

> ID：12081646
> 
> 赞同：3
> 
> 时间：2012-08-22T21:26:23.933
> 
> 标签：nginx, kohana

这是我在日志中得到的错误：

```
2012-08-22 17:20:35 --- ERROR: HTTP_Exception_404 [ 404 ]: Unable to find a route to match the URI: index.php ~ SYSPATH/classes/kohana/request.php [ 1126 ]
2012-08-22 17:20:35 --- STRACE: HTTP_Exception_404 [ 404 ]: Unable to find a route to match the URI: index.php ~ SYSPATH/classes/kohana/request.php [ 1126 ]
--
#0 /var/www/index.php(109): Kohana_Request->execute()
#1 {main} 
```

这是我的 nginx 配置：

```
server {
        listen  80;
        server_name     000.000.00.00;

        root    /var/www;
        index   index.php;

        location / {
                try_files $uri $uri/ @kohana;
        }

        location ~ /\. {
                deny  all;
        }

        location ~* \.php$ {
                try_files $uri $uri/ @kohana;

                fastcgi_pass unix:/var/run/php5-fpm.sock;
                fastcgi_index index.php;
                fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
                fastcgi_param PATH_INFO $fastcgi_script_name;
                include /usr/local/nginx/conf/fastcgi_params;
        }

        location @kohana {
                fastcgi_pass 127.0.0.1:9000;
                fastcgi_index index.php;
                include /usr/local/nginx/conf/fastcgi_params;
                fastcgi_param SCRIPT_FILENAME $document_root/index.php;
        }

        #error_page  404              /404.html;

        error_page   500 502 503 504  /50x.html;
        location = /50x.html {
                root    html;
        }
} 
```

在首页我得到：

```
HTTP_Exception_404 [ 404 ]: Unable to find a route to match the URI: index.php 
```

和

```
 DOCROOT/index.php [ 109 ] » Kohana_Request->execute() 
```

提前感谢您的帮助！

**更新**

```
Kohana::init(array(
    'base_url'   => '/',
));

Route::set('default', '(<controller>(/<action>(/<id>)))')
    ->defaults(array(
            'controller' => 'welcome',
            'action'     => 'index',
    )); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T12:43:18.493

我有一个类似的问题，这是我们最终得到的 nginx 配置

```
server {
listen       80;
server_name <<INSERT SERVER NAME>>;
root   /add/root/directory;

index index.php;

# ROUTING TO KOHANA IF REQUIRED
location / {
    try_files $uri $uri/ @kohana;
}

# BLOCKS ACCESS TO . FILES (.svn, .htaccess, ...)
location ~ /\. {
    deny  all;
}

# FOR PHP FILES
location ~* \.php$ {
    # PHP FILES MIGHT BE TO HANDLED BY KOHANA
    try_files $uri $uri/ @kohana;

    fastcgi_pass 127.0.0.1:9000;
    fastcgi_index index.php;
    fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
    include fastcgi_params;
}

# HANDLES THE REWRITTEN URLS TO KOHANA CONTROLLER
location @kohana
{
    fastcgi_pass 127.0.0.1:9000;
    fastcgi_index index.php;
    include fastcgi_params;
    fastcgi_param SCRIPT_FILENAME $document_root/index.php;
}

# CACHE CONTROL FOR STATIC FILES
location ~* \.css|\.js|\.jpg|\.jpeg|\.png|\.gif|\.swf|\.svg|\.tiff|\.pdf$ {
    expires 30d;
}

# REDIRECTING MEDIAS TO STATIC
location ^~ /medias/ {
    rewrite ^/medias/(.*) http://static.xxxx.com/$1 permanent;
    break;
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T20:53:59.397

尝试浏览到`http://localhost/`而不是`http://localhost/index.php`.

如果不是这样，[示例 nginx 配置](http://kohanaframework.org/3.2/guide/kohana/tutorials/clean-urls#nginx)可能会有所帮助。

# php - PHP 脚本不会重新路由到感谢页面

> ID：12081650
> 
> 赞同：0
> 
> 时间：2012-08-22T21:26:44.453
> 
> 标签：php, forms

我有一个提交和/应该/重新路由到thankyou.html页面的表单。

下面是我正在使用的脚本：

```
<?php
  $name = $_REQUEST['name'] ;
  $email = $_REQUEST['email'] ;
  $message = $_REQUEST['message'] ;

  mail( "myemail@gmail.com", "Feedback Form Results",
    $message, "From: $email" );
  header( "thankyou.html" );
?> 
```

感谢页面肯定存在并且可以正常工作，我缺少什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T21:28:01.390

是的。`header`设置 HTTP 标头，它不会重定向。但是，您可以通过设置[*Location*](http://en.wikipedia.org/wiki/HTTP_location)标头使用它来重定向到页面。

```
header("Location: thankyou.html"); 
```

使用*Location*标头时有关相对 URL 的说明：

> 这个例子，根据标准是不正确的，它指定返回的 URI 是绝对的。但是，大多数流行的浏览器都会接受相对 URL。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T21:28:04.093

`header`设置 HTTP 标头。有一个称为`Location`可以重定向的特定标头。

你要：

```
header('Location: thankyou.html'); 
```

# jquery - jQuery colorbox 和 onOpen 回调事件

> ID：12081651
> 
> 赞同：1
> 
> 时间：2012-08-22T21:26:54.190
> 
> 标签：jquery, colorbox

我正在使用 jQuery colorbox 并将 HTML 加载到 iframe 中。一切正常。在 iframe 加载时，我想显示一条“待在页面正在加载”的消息

我尝试使用回调接口......如果我使用在加载/打开事件之前发送警报的传统示例，它可以正常工作。如果我尝试使用 document.write 来显示消息，我会看到消息但 iframe 不会加载。

```
 //Examples of how to assign the ColorBox event to elements
            $(".iframe").colorbox({
                                            iframe:true, width:"80%", height:"80%",
                                           onOpen:function(){document.write("fff"); }

                                }); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T21:29:57.747

`document.write()`页面加载后请勿使用。如果这样做，它将完全停止文档的内容。事实上，[根本](https://stackoverflow.com/questions/802854/why-is-document-write-considered-a-bad-practice)[不要使用`document.write()`](https://stackoverflow.com/questions/802854/why-is-document-write-considered-a-bad-practice).

如果您需要比`alert()`测试和调试更好的东西**（您确实需要），请**使用[`console.log()`](https://stackoverflow.com/questions/1739221/what-is-a-good-javascript-debugging-tool).

# maven - Maven 包的版本与依赖项不同：树显示

> ID：12081652
> 
> 赞同：0
> 
> 时间：2012-08-22T21:26:56.430
> 
> 标签：maven, maven-2, maven-3, maven-shade-plugin

我有一个类似这样的依赖结构：

```
A:compile
    com.jolbox:bonecp:jar:0.7.1.RELEASE:compile
        com.google.guava:guava:jar:r06:compile
    com.google.guava:guava:jar:13.0:compile 
```

也就是我的项目依赖A，它依赖于Guava 13.0和BoneCP（依赖于Guava r06）。

当我跑步时，`mvn clean dependency:tree | grep guava`我看到：

```
[INFO] |  |  \- com.google.guava:guava:jar:13.0:compile 
```

据我了解，Maven 的依赖解决方案是应该发生的。

但是，当我运行`mvn clean package`并解压生成的 jar 时，似乎 Guava r06 已包含在内。在 A 中，我依赖的是 Guava 13.0 中的功能，但不是 r06，所以我遇到了运行时故障（`java.lang.NoClassDefFoundError: com/google/common/collect/Table`）。

我正在使用 shade 插件（1.4）来创建包含所有依赖项的 jar。这是`mvn --version`（在我们的构建服务器上，我遇到了这个问题）的结果：

```
Apache Maven 3.0.4 (r1232337; 2012-01-17 08:44:56+0000)
Maven home: /opt/apache/apache-maven-3.0.4
Java version: 1.6.0_26, vendor: Sun Microsystems Inc.
Java home: /usr/lib/jvm/java-6-sun-1.6.0.26/jre
Default locale: en_US, platform encoding: UTF-8
OS name: "linux", version: "2.6.32-5-amd64", arch: "amd64", family: "unix" 
```

在另一台机器（我的本地工作站）上，打包的 jar 包含我预期的 Guava 13.0。该机器上的版本信息是：

```
/usr/java/default
Apache Maven 2.2.1 (rNON-CANONICAL_2011-06-28_14-50_mockbuild; 2011-06-28 10:50:25-0400)
Java version: 1.6.0_27
Java home: /usr/java/jdk1.6.0_27/jre
Default locale: en_US, platform encoding: UTF-8
OS name: "linux" version: "2.6.43.8-1.fc15.x86_64" arch: "amd64" Family: "unix" 
```

从 Maven 2.2.1 到 3.0.4 的变化是否改变了依赖解析策略？这里发生了什么？

# java - 添加 OnItemSelectedListener 时应用程序崩溃

> ID：12081653
> 
> 赞同：0
> 
> 时间：2012-08-22T21:26:59.443
> 
> 标签：java, android

我最近对我制作的应用程序的 iOS 版本进行了更新，我想将相同的功能放入 Android 版本中。基本上，它需要用户输入一年，他们从列表中选择，然后将前一年输入到我指定的文本字段的占位符文本中。当我查看如何在 Android 中执行相同的功能时，我发现我需要一个 OnItemSelectedListener。然而，这时麻烦就来了。添加必要的代码并将 AdapterView 导入我的 Activity 后，我的应用程序在首次启动时不断崩溃。由于我不确定它一直在哪里崩溃，这里是我的应用程序的 github 页面的链接

[Github 实验分支](https://github.com/bryceac/RMD-Calculator/tree/experimental/src/com/MinDis/android)

master 分支上的代码工作正常，所以这真的很奇怪。

由于这些文件很难破译，这里是我用来应用 OnItemSelectedListener 的代码：

```
// give Spinner a listener for new functionality to work
selection.setOnItemSelectedListener(new OnItemSelectedListener() {
    public void onItemSelected(AdapterView<?> parentView, 
                               View selectedItemView, int position, long id) {
        // get year selection for use with new functionality
        int iyear = Integer.parseInt(selection.getSelectedItem().toString()); 
        balance.setHint(R.string.balance + " from 12/31/" + pyear.getPrevYear(iyear)); 
    }
    // create empty method
    public void onNothingSelected(AdapterView<?> parentView) {}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T15:48:18.320

我经历并从主分支复制了东西，事情开始工作而没有崩溃。现在，我遇到了提示问题，但是由于这个关于为什么它一直崩溃的问题，我不确定我是否可以保持这个问题的开放性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T21:50:58.203

在追踪错误时，我仍然看不到 LogCat，它是**最**重要的信息...

所以这些是我的猜测：

*   我看不到您在哪里定义适配器，`selection`所以我假设您在 XML 中执行此操作。您是否确认这`selection.getSelectedItem().toString()`是一个有效的字符串`Integer.parseInt()`？

    如果您有权访问该数组（调用它`selectionArray`），您可以简单地使用：

    ```
    ... + pyear.getPrevYear(selectionArray[position]); 
    ```

*   `R.string.balance`是一个整数，它引用您想要的字符串。显示您想要使用`getString(R.string.balance)`或可能使用的字符串本身`getResources().getString(R.string.balance)`。

*   验证您的变量都不为空：`selection`、、`balance`和`pyear`。

* * *

再解释一下第一点：

1.  为数组和字符串创建一个类变量：

    ```
    int[] choicesArray; 
    ```

2.  在 onCreate() 中初始化它；

    ```
    choicesArray = getResources().getIntArray(R.array.choices_array); 
    ```

3.  在 OnItemSelectedListener 中使用：

    ```
    balance.setHint(getResources().getString(R.string.balance) + " from 12/31/" + (choicesArray[position] - 1)); 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T21:42:15.463

确保在 setHint 时 var balance 不为空。可能是 findViewById 中的 id 不正确。确保 R.id.amount 是 R.layout.main 内部的视图。

# ruby-on-rails - Rails - 使用 fields_for 重复代码的自定义助手

> ID：12081658
> 
> 赞同：0
> 
> 时间：2012-08-22T21:27:16.107
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我在 application.rb 文件中创建了一个自定义助手，如下所示：

```
module ApplicationHelper

  def add_feature_field(feature_type, object_form_builder, actions_visible)
    object_form_builder.object.features.build
    fields = object_form_builder.fields_for :features do |features_builder|
      render :partial => "features/fixed_feature", :locals => {:feature => features_builder, :fixed_feature_type => feature_type, :form_actions_visible => actions_visible}
    end
 end
end 
```

从我的角度来看，我这样称呼这个助手：

```
<%= add_feature_field("First Name", customer, false) %>
<%= add_feature_field("Last Name", customer, false) %>
<%= add_feature_field("Date of Birth", customer, false) %> 
```

这几乎与预期的一样工作，除了一个主要障碍：第二次调用助手时，它呈现 2 个字段而不是单个字段，第三次呈现 3 个字段。

我假设正在发生的事情是我的助手中的 fields_for 循环正在拾取先前构建的对象，并渲染这些对象 - 任何人都可以提出一种防止这种情况的方法吗？

编辑：为清楚起见，根据评论，此帮助方法正在客户表单中使用；正在创建的要素是嵌套属性。

# c++ - GDB：运行直到特定断点

> ID：12081660
> 
> 赞同：11
> 
> 时间：2012-08-22T21:27:33.797
> 
> 标签：c++, c, command-line, gdb, breakpoints

在 GDB 调试 C++ 代码中：我策略性地设置了 15 个断点，但我不希望它们中的任何一个在我遇到断点 #2 之前激活。GDB中有run-until-breakpoint- *n命令吗？*

我发现自己在做两件事之一：

1.  删除所有其他断点，以便 #2 是所有存在的，运行，重新添加所有断点；或者

2.  跑步并反复`continue`经过所有休息时间，直到我在 #2 看到第一个休息时间。

我想要这样的东西`run-until 2`会忽略除＃2之外的所有其他断点，但不会删除它们。这存在吗？还有其他人有更好的方法来处理这个吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-22T23:08:42.237

您可以设置断点，`enable`并且`disable`这些命令将接受一个*范围*。在程序执行过程中，在战略点使用这些命令和一个范围。

我假设当您提到断点*#2*时，您指的是断点的 gdb 编号。这是一个简单的 gdb 会话示例：

```
(gdb) info breakpoints
Num Type           Disp Enb Address    What
1   breakpoint     keep y   0x00001ddb in main at example.c:34
2   breakpoint     keep y   0x00001e00 in main at example.c:39
3   breakpoint     keep y   0x00001e15 in main at example.c:40
(gdb) disable 1-3
(gdb) enable 2
(gdb) info breakpoints
Num Type           Disp Enb Address    What
1   breakpoint     keep n   0x00001ddb in main at example.c:34
2   breakpoint     keep y   0x00001e00 in main at example.c:39
3   breakpoint     keep n   0x00001e15 in main at example.c:40
(gdb) 
```

现在只启用断点#2。运行程序，当执行在 #2 处中断时，重新启用所有所需的断点，范围为：

```
(gdb) enable 1-3
(gdb) info breakpoints
Num Type           Disp Enb Address    What
1   breakpoint     keep y   0x00001ddb in main at example.c:34
2   breakpoint     keep y   0x00001e00 in main at example.c:39
3   breakpoint     keep y   0x00001e15 in main at example.c:40 
```

您还可以混合断点编号和范围：

```
(gdb) disable 1 4 6-7
(gdb) info breakpoints
Num Type           Disp Enb Address    What
1   breakpoint     keep n   0x00001ddb in main at example.c:34
2   breakpoint     keep y   0x00001e00 in main at example.c:39
3   breakpoint     keep y   0x00001e15 in main at example.c:40
4   breakpoint     keep n   0x00001e4f in main at example.c:43
5   breakpoint     keep y   0x00001e4f in main at example.c:44
6   breakpoint     keep n   0x00001e5e in main at example.c:45
7   breakpoint     keep n   0x00001e5e in main at example.c:46 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-22T23:22:24.840

从 7.0 版开始，GDB 支持 python 脚本。我编写了一个简单的脚本，它将暂时禁用所有启用的断点，除了具有指定编号的断点并执行 GDB`run`命令。

将以下代码添加到`.gdbinit`文件中：

```
python
import gdb

class RunUntilCommand(gdb.Command):
    """Run until breakpoint and temporary disable other ones"""

    def __init__ (self):
        super(RunUntilCommand, self).__init__ ("run-until",
                                               gdb.COMMAND_BREAKPOINTS)

    def invoke(self, bp_num, from_tty):
        try:
            bp_num = int(bp_num)
        except (TypeError, ValueError):
            print "Enter breakpoint number as argument."
            return

        all_breakpoints = gdb.breakpoints() or []
        breakpoints = [b for b in all_breakpoints
                       if b.is_valid() and b.enabled and b.number != bp_num and
                       b.visible == gdb.BP_BREAKPOINT]

        for b in breakpoints:
            b.enabled = False

        gdb.execute("run")

        for b in breakpoints:
            b.enabled = True

RunUntilCommand()
end 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-22T21:31:04.587

对他们来说，比删除所有其他断点要少一些痛苦`disable`。这样您就不必重新输入与断点相关的所有内容来将其恢复，只需`enable`按数字再次输入即可。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-22T21:31:26.137

`gdb`可以禁用断点而不是删除断点。然后，您所要做的就是在需要时重新启用它们。

# database - 将plone数据库转换为csv或SQL

> ID：12081663
> 
> 赞同：1
> 
> 时间：2012-08-22T21:27:43.703
> 
> 标签：database, csv, plone

我正在帮助一个计划改变其成员系统的组织。现在他们的系统是在 Plone 中开发的，他们所有的数据都在一个 Data.fs 文件中。

他们的系统目前处于停机状态，需要一些时间和精力才能启动和运行。

有没有办法将数据库中的数据转换为标准格式，例如 csv 文件或 SQL？或者他们是否需要预先启动并运行系统并从“内部”克隆中导出文件？

感谢您的帮助和想法！

亲切的问候，塞缪尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-23T06:11:48.907

该`Data.fs`文件是一个面向对象的数据库文件，它是由一个名为[ZODB](http://www.zodb.org/)的框架编写的。其中的数据代表 python 实例，以树状结构布局。

您*可以*从 python 脚本打开这个数据库，但是为了让您理解包含的结构，您需要访问构成存储实例的原始类定义。如果没有这些类定义，您将得到的只是完全没有用的占位符对象（损坏的对象）。

因此，让 Plone 实例备份并运行可能更容易，因为如果您有目录（基本上是专门的数据库索引）之类的东西来构建导出，导出您想要的确切数据会更容易。

可能是因为一些微不足道的事情，我们可以在 Stack Overflow、Plone 用户邮件列表或 #plone IRC 频道中为您提供帮助。如果您确实启动并运行了它并且对您尝试导出的内容有一些详细信息，我们当然可以提供帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T23:18:10.467

您需要启动并运行系统才能导出数据。data.fs 文件中的数据存储为 Python 泡菜，“外部”系统无法理解。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T12:00:24.933

正如其他人之前指出的那样，最好的办法是让 Plone 再次跑回来。这样做之后，尝试[使用 csvreplicata](http://plone.org/products/csvreplicata/)将现有数据导出为 csv 格式。对于用户帐户，请尝试[atreal.usersinout](http://plone.org/products/atreal.usersinout/)。

如果您需要专业帮助，可以从[http://plone.org/support/providers搜索可用的提供者](http://plone.org/support/providers)

如需免费支持，请在此处发布具体问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-23T14:14:29.523

最近我设法使用 SQLExporter 将 Plone 4 站点导出到 sqlite：http: [//plone.org/products/proteon.sqlexporter](http://plone.org/products/proteon.sqlexporter)。但是您需要先让您的 Plone 实例正常工作才能使用它。

# java - 有没有办法确定 Tomcat on Elastic Beanstalk 中环境的 URL 是什么？

> ID：12081676
> 
> 赞同：2
> 
> 时间：2012-08-22T21:28:23.937
> 
> 标签：java, tomcat, amazon-web-services, amazon-elastic-beanstalk

每个 Elastic Beanstalk 环境都有一个关联的 URL（在具有环境的 Elastic Load Balancer 上）。在 EB 的 Java/Tomcat 风格中，有没有办法查询那个 URL，所以它可以在应用程序中动态使用？

我当前的解决方法是将 URL 作为参数传递给容器，但是在切换环境 URL 以进行实时部署时效果不佳。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T11:45:52.373

是的，它确实。

后端负载均衡器在被调用时会转发额外的 URL。

检查请求标头“Host”和“X-Forwarded-Host”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T13:02:36.210

根据评论的要求：在应用程序生命周期的哪个阶段，您需要上述 URL？如果它是为了响应客户端请求，您可以操纵从[HttpServletRequest#getRequestURL()](http://docs.oracle.com/javaee/6/api/javax/servlet/http/HttpServletRequest.html#getRequestURL%28%29)或类似 API 获得的内容？

（我很好奇你用什么来满足你的需求）

# c++ - 必要时扩展 Qt 接口

> ID：12081679
> 
> 赞同：3
> 
> 时间：2012-08-22T21:28:49.867
> 
> 标签：c++, qt, layout

我正在开发一个 Qt 项目，我注意到一些 GUI 表单存在一个持续存在的问题。该表单在 KDE（下图）和 Windows 上看起来不错，但是当应用程序在任何基于 GNOME3 的设备（如 Unity 或 GNOME3 本身）上运行时，表单的某些部分会隐藏在视图之外。（上图，Sort Ascending 单选按钮下方的所有内容都被切断）

问题似乎在于 Qt 布局如何处理大字体。如果用户使用正常大小的系统字体（<= 10pt）一切正常。如果他们使用较大的字体，则表格不足以容纳所有内容。受此错误影响的其他形式只是拥挤，但这并不像重要控制超出范围那样严重。如果我放大对话框，布局不想调整自身大小以利用新空间。有没有一种简单的方法可以做到这一点，还是我需要对其进行硬编码？最初，代码阻止了在运行时调整对话框大小，但恢复该功能并不能修复错误。即使对话框可以展开，问题是布局不会随之展开。

到目前为止，我已经将所有受影响的表单都设置为超大以弥补这个错误，但是在字体大小合适的 Windows 和 KDE 系统上让对话框比它们需要的大得多看起来很奇怪。有没有办法让受影响的对话框/布局自行调整大小，以便在运行时一切都合适？如果是这样，当部分 GUI 超出范围时，程序将如何检测它？我不希望强制使用一定的字体大小（由于视力问题，有些人可能更喜欢大字体）。

提前感谢您的帮助。

![部分选项被切断（就在升序排序下方）](../Images/4b347aa0d6af67b3d5d8286bfb320592.png)

![这就是它应该看起来的样子](../Images/531455016539a013b95b445c8e3b1a65.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T02:57:52.700

解决此问题的方法是在显示表单时使用不同的方法。我将描述一种更动态的方式。我已经在具有 96 和非常高 DPI 模式（超过 120）的 Windows 上成功使用了这种方法。

1.查询操作系统并获取用户为特定系统项选择的字体；说出用于窗口标题或系统对话框的字体。如果他们愿意，您也可以允许用户稍后选择他们的字体。如果可能，请在执行此操作时使用 True Type 字体。

2\. 使用该字体，构造一个用于标签或编辑控件的字符串对象（我不知道这对于 QT 是什么，对于 Windows 是 GetTextExtentPoint32）并将其传递给系统函数以确定宽度和您的环境的字符串高度。

3\. 给定上述值，放置控件并根据需要在控件周围使用填充动态调整表单大小。对于按钮，您可能总是在按钮上方和下方添加一定百分比的像素来品尝。

4\. 对于位图和 jpeg 等图形元素，再次查询操作系统以获取显示器的当前 DPI 设置，并使用更大的预制资源。自然，这些元素周围的所有文本都将动态放置。

请注意，在 Windows 上，您需要使用清单将您的 exe 标记为高 dpi 感知。

# c# - 将同步 Moq 模拟转换为异步

> ID：12081680
> 
> 赞同：25
> 
> 时间：2012-08-22T21:28:50.097
> 
> 标签：c#, moq, async-await

我正在将同步 asp.net 代码的主体转换为 .net 4.5 和新的异步语法。

我有很多看起来像的测试代码：

```
var retVal = new Foo(bar,baz);
_myMock.Setup(x => x.DoSomething(123)).Returns(retVal); 
```

当我将 DoSomething 的签名从 转换为 时`Foo DoSomething()`，`async Task<Foo> DoSomething()`我的所有测试代码都必须重写。我目前的解决方法是将原始代码转换为：

```
var retVal = new Foo(bar,baz);
_myMock.Setup(x => x.DoSomething(123))
   .Returns(new Task<Foo>(()=>retVal)); 
```

这不是一个特别难的转换，但是当我有数千个需要更新的测试时，它很乏味。

我尝试制作一个名为 ReturnsAsync 的扩展方法来执行一些这种形式的 m，但是我遇到了一些我无法完全确定的类型推断问题。是否有标准或更简单的方法来转换这种模拟以更好地处理异步方法？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-08-23T13:19:19.550

首先，命名：基于任务的异步模式 (TAP) 说所有异步且返回`Task`s 的方法都应命名为以 . 结尾`Async`。所以，你的方法应该命名为`DoSomethingAsync`.

其次，构造函数`Task`创建一个`Task`未启动的，你必须`Start()`手动创建它。如果您的实际`DoSomething`方法也这样做，那又不遵循 TAP，这意味着您的代码无法与`await`. 相反，您应该使用`Task.Run(() => value)`，或者，甚至更好，`Task.FromResult(value)`。

第三，如果您向我们展示您的代码运行不佳会更好，以便我们可以告诉您您在哪里犯了错误。

现在，`ReturnsAsync()`扩展方法的主体非常简单，但我的大部分工作是找出正确的类型（特别是因为我不知道起订量）。代码如下所示：

```
public static class MoqExtensions
{
    public static IReturnsResult<TMock> ReturnsAsync<TMock, TResult>(
        this IReturns<TMock, Task<TResult>> setup, TResult value)
        where TMock : class
    {
        return setup.Returns(Task.FromResult(value));
    }
} 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2014-02-26T12:28:00.013

Moq 4.2 添加了`ReturnsAsync()`扩展方法，因此您不再需要添加自己的方法。

# asp.net-mvc-3 - MVC 实体框架修改子实体

> ID：12081683
> 
> 赞同：0
> 
> 时间：2012-08-22T21:28:59.680
> 
> 标签：asp.net-mvc-3, entity-framework

我对使用 MVC3 和 EF4 很陌生，我正在尝试实现父子实体集的 CRUD 功能，但是我还没有找到我需要的一些特定要求的示例，因此想要一点帮助。

我的情况是我有一个`Product`具有子实体的`Category`实体。我让实体的所有 CRUD 功能都可以正常工作，并且在详细信息视图中`Product`与`Category`实体一起使用的详细信息功能。`Product`但是我需要`Categories`从给定的`Product`.

通常这不是什么大问题，但是在这种情况下，当用户将 a 添加`Category`到 a时，`Product`我只需要允许用户能够`Categories`从数据库中所有可用的列表中进行选择。用户还可以`Categories`从`Product`.

我希望使用所有未使用的“类别”实现一个 DropDownList 会很好，但是我不知道如何使用一个来允许用户添加和删除“类别”，然后通过 EF 将更改保存到数据库中。

有没有人对如何实现这一点有任何建议/示例？

如果需要任何额外信息，请询问。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T05:02:30.503

我对具有多对多关系的作者和书籍做了类似的事情。基本思想是从视图中创建一个 JSON 对象，其中包含其中的所有作者并提交给控制器。我还使用 jQuery UI TagIt 来允许用户添加/删除与本书相关的作者。当用户单击“保存图书”按钮时，脚本会构建一个模仿图书对象的 JSON 对象。

下面是代码。在尝试此代码之前，请确保您已在项目中添加了“json2.js”和“tagit.js”。

**查看型号：**

```
 public class BookViewModel
    {
        public string Title { get; set; }
        public int BookId { get; set; }
        public int IsAvail { get; set; }
        public string CallNumber { get; set; }
        //Assiged authors
        public List<AuthorViewModel> Authors { get; set; }
        //available authors
        public List<AuthorViewModel> AuthorOptions { get; set; }
     }

    public class AuthorViewModel
    {
        public int AuthorId { get; set; }
        public string FirstName { get; set; }
    } 
```

**Book/Edit.chtml 的代码：**

```
@using System.Web.Script.Serialization
@model eLibrary.Models.BookViewModel

@{
    ViewBag.Title = "Edit";
}

<h2>Edit</h2>

<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>

@*This is for JSON*@
<script src="../../Scripts/json2.js" type="text/javascript"></script>
<script src="../../Scripts/tagit.js" type="text/javascript"></script>
 @*These are for styling Control*@
<link href="../../Content/themes/base/jquery.ui.all.css" rel="stylesheet" type="text/css" />
<script type="text/javascript">

    //This function is used for sending data(JSON Data) to BookController
    function BookSave() {
        // Step 1: Read View Data and Create JSON Object

        var author = { "AuthorId": "", "FirstName": "" };
        // Creating book Json Object
        var book = { "BookId": "", "Title": "", "IsAvail": "", "CallNumber":"", "authors": []};

        // Set Boook  Value
        book.BookId = $("#BookId").val();
        book.Title = $("#Title").val();
        book.IsAvail = $("#IsAvail").val();
        book.CallNumber = $("#CallNumber").val()  ;

        var tags = $('#authors').tagit('tags');

        for (var i in tags) {

            author.AuthorId = tags[i].value;
            author.FirstName = tags[i].label;

            book.authors.push(author );

            author = { "AuthorId": "", "FirstName": "" };

        }

        // Step 1: Ends Here
        // Set 2: Ajax Post
        // Here i have used ajax post for saving/updating information
        $.ajax({
            url: '/Book/Edit',
            data: JSON.stringify(book),
            type: 'POST',
            contentType: 'application/json;',
            dataType: 'json',
            success: function (result) {

                if (result.Success == "1") {
                    window.location.href = "/Book/Edit";
                }
                else {
                    alert(result.ex);
                }
            }
        });

    }

    </script>

@using (Html.BeginForm())
{
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>Book Details</legend>

        @Html.HiddenFor(model => model.BookId)

        <div class="editor-label">
            @Html.LabelFor(model => model.Title)
        </div>
        <div class="editor-field">
            @Html.EditorFor(model => model.Title)
            @Html.ValidationMessageFor(model => model.Title)
        </div>
        <div class="editor-label">
            @Html.LabelFor(model => model.IsAvail)
        </div>
            @Html.EditorFor(model => model.IsAvail)
            @Html.ValidationMessageFor(model => model.IsAvail)

        @Html.EditorFor(model => model.CallNumber);
    </fieldset>

@Html.Partial("AuthorsByBook", Model.Authors, new ViewDataDictionary { { "mode", "EDIT" } })        

    <input type="button" value="Book Save" onclick="BookSave()" />
} 
```

**Book/AuthorsByBook.chtml 的代码**

```
@model IEnumerable< eLibrary.Models.AuthorViewModel>
<link href="../../Content/tagit-awesome-blue.css" rel="stylesheet" type="text/css" />
     <div class="box">
       <ul id="authors" name="authors">

    </ul>
    </div>
<script type="text/javascript">

//Load authors in the javascript variable
    $(function () {
      var initialAuthorList=[];

      @if(ViewData["mode"]=="EDIT")
{      

   foreach (var category in Model)
   {

        <text>

        initialAuthorList.push({label: "@category.FirstName", value: @category.AuthorId });
        </text>

 }
 }

  $('#authors').tagit({tagSource: function (request, response) {

                    $.ajax({

                        url: "/Author/SearchAuthor", type: "POST", dataType: "json",

                        data: { searchText: request.term, maxResults: 10 },
                        success: function (data) {
                            response($.map(data, function (item) {

                                return { label: item.FirstName, value: item.AuthorId }
                            }))
                        }
                    })
                },

    initialTags:initialAuthorList,minLength:3,allowNewTags:false,sortable:true,delay:400});

    });
    </script> 
```

**BookController.cs 的代码**

```
public ActionResult Edit(int id)
        {
            //To DO: use repository to fetch data
            Book  book = db.Books.Single(a => a.BookId  == id);
            Mapper.CreateMap<Book, BookViewModel>();
            Mapper.CreateMap<Author, AuthorViewModel>();
            BookViewModel bookVm = Mapper.Map<Book, BookViewModel>(book);
            List<AuthorViewModel> Authors = Mapper.Map<List<Author>,List<AuthorViewModel>>( db.Authors.ToList());
            bookVm.AuthorOptions = Authors;
            return View(bookVm);
        }

[HttpPost]
        public ActionResult Edit(BookViewModel bookv)
        {
            //create maps
            Mapper.CreateMap<AuthorViewModel, Author>();
            Mapper.CreateMap<BookViewModel, Book>();

            //convert view objects to model objects
            Book book = Mapper.Map<BookViewModel, Book>(bookv);
            List<Author> authors = Mapper.Map<List<AuthorViewModel>, List<Author>>(bookv.Authors.ToList());

            //this has to be executed before db.Books.Attach
            //clear authors
            book.Authors.Clear();

            db.Books.Attach(book);

            //assign authors to book
            foreach (Author a in authors) { db.Authors.Attach(a); }

            book.Authors.Clear();

            foreach (Author a in authors) { book.Authors.Add(a); }

        db.ObjectStateManager.ChangeObjectState(book, EntityState.Modified);
        db.SaveChanges();
        return RedirectToAction("Index");

    } 
```

**AuthorController.cs 中 SearchAuthor 方法的代码**

```
public JsonResult SearchAuthor(string searchText, int? maxResults)
        {
            IEnumerable<Author> query = db.Authors;
            searchText = searchText.ToLower();
            query = query.Where(c => c.FirstName.ToLower().Contains(searchText));

            if ((maxResults ?? 0) == 0)
            {
                return Json(query.ToList());
            }
            else
            {
                return Json(query.Take((int)maxResults).ToList());
            }
        } 
```

# android - 没有硬编码 IP 地址的 KSOAP2 连接

> ID：12081692
> 
> 赞同：1
> 
> 时间：2012-08-22T21:29:43.923
> 
> 标签：android, ksoap2, android-ksoap2

```
private String METHOD_NAME = "schedule";
private String NAMESPACE = "http://calculate.backend.web.org";
private String SOAP_ACTION = NAMESPACE + METHOD_NAME; 
private static final String URL = "http://192.168.0.4:8080/AndroidBackEnd/services/Calculate?wsdl"; 
```

这是我用来通过 Ksoap 从客户端连接到我的 Web 服务的代码。我在 URL 中硬编码 IP 地址。当我切换到新网络时，我需要将应用程序的 IP 地址更改为工作

任何人都可以分享这个解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T12:47:19.307

有两种方法可以解决它。

1.  （不是很优雅）：不是在代码中硬编码，而是从用户那里获取输入。这部分*`AndroidBackEnd/services/Calculate?wsdl`*将始终保持不变，因此您只需要托管 Web 服务的系统的 IP 地址并将其与 contant 部分连接起来。在您的代码中保存一个默认值并在没有输入时运行它。否则，连接到用户将输入其 IP 的机器。

2.  （正如其他人已经建议的那样）：创建自己的域。（很可能您可能需要购买。有一些仍然免费提供，但您需要搜索它们。或者，如果您愿意购买，则可以查看[http://www.dotster。 com/](http://www.dotster.com/)或[http://www.networkSolutions.com](http://www.networkSolutions.com)）。注册域后，您需要输入提供 Web 服务的系统的静态 IP 以使 DNS 指向您的系统。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T21:57:57.923

例如：

从例如[此列表中](http://dnslookup.me/dynamic-dns/)选择免费的[动态 DNS](http://en.wikipedia.org/wiki/Dynamic_DNS)服务。你会得到一个这样的地址，你可以设置为指向你的 IP 地址。然后用新地址替换硬编码的 IP。`http://myserver.dyndns.org`

```
private static final String URL = "http://myserver.dyndns.org/AndroidBackEnd/services/Calculate?wsdl"; 
```

动态 DNS 实际上适用于非常定期更改的 IP 地址（并​​且可能需要这些服务定期更新 IP）。如果您不需要，请寻找常规的[DNS 托管服务](http://en.wikipedia.org/wiki/DNS_hosting_service)。

# java - JComboBox getSelectedIndex() 方法

> ID：12081696
> 
> 赞同：1
> 
> 时间：2012-08-22T21:30:02.970
> 
> 标签：java, swing, jcombobox, itemlistener

我正在制作一个简单的文本编辑器，您可以在其中设置字体样式、字体大小、全部清除等。要设置字体大小，我添加了 JComboBox 并实现了 ItemListener。这是我的 MainWindow 类：

```
import javax.swing.*;

public class MainWindow extends JFrame{
Editor e = new Editor();

public MainWindow(){
    super(".:My Text Editor:.");
    getContentPane().add(e);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    pack();
    setVisible(true);
}

public static void main(String[] args) {
    SwingUtilities.invokeLater(new Runnable(){
        public void run() {
            new MainWindow();
        }
    });

}

} 
```

这是我的编辑器类：

```
import javax.swing.*;

import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.Font;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.ItemEvent;
import java.awt.event.ItemListener;

public class Editor extends JPanel{
JPanel optionPanel = new JPanel();
JTextArea editArea = new JTextArea();
JButton boldBtn = new JButton("Bold");
JButton italicBtn = new JButton("Italic");
JButton plainBtn = new JButton("Plain");
JButton clearBtn = new JButton("Clear all");
String [] fontSizes = {"10","11","12","13","14","15","16","17","18","19","20"};
int fontSize;
JComboBox combo = new JComboBox(fontSizes);

public Editor(){
    createUI();
    addEvents();
}

public void createUI(){
    optionPanel.add(boldBtn);
    optionPanel.add(italicBtn);
    optionPanel.add(plainBtn);
    optionPanel.add(combo);
    optionPanel.add(clearBtn);

    setLayout(new BorderLayout());
    add(optionPanel,BorderLayout.NORTH);
    add(new JScrollPane(editArea),BorderLayout.CENTER);
    setPreferredSize(new Dimension(640,480));
}

public void addEvents(){

    boldBtn.addActionListener(new ActionListener(){
        public void actionPerformed(ActionEvent e){
            editArea.setFont(new Font("Sans Serif",Font.BOLD,fontSize));
        }
    });

    italicBtn.addActionListener(new ActionListener(){
        public void actionPerformed(ActionEvent e){
            editArea.setFont(new Font("Sans Serif",Font.ITALIC,fontSize));

        }
    });

    plainBtn.addActionListener(new ActionListener(){
        public void actionPerformed(ActionEvent e){
            editArea.setFont(new Font("Sans Serif",Font.PLAIN,fontSize));
        }
    });

    combo.addItemListener(new ItemListener(){

        public void itemStateChanged(ItemEvent e){
            int ind = combo.getSelectedIndex();
            System.out.println(ind); 
            fontSize = Integer.parseInt(fontSizes[ind]);
            editArea.setFont(new Font("Sans Serif",Font.PLAIN,fontSize));
        }
    });

    clearBtn.addActionListener(new ActionListener(){
        public void actionPerformed(ActionEvent e){
            editArea.setText("");
        }
    });
}

} 
```

现在，奇怪的事情发生在我把 System.out.println(ind); 行只是为了查看 getSelectedIndex() 方法返回给我的索引。根据我单击的项目，它会返回给我：

```
1
1
0
0
2
2
3
3 
```

为什么会这样？不应该只返回 1 0 2 3 吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T21:36:00.357

每当您更改 JComboBox 中的选择时，都会触发 itemStateChanged 事件两次，一次用于 DESELECT 的旧​​选定项，一次用于 SELECT 用于新选定项。

如果您只希望代码执行一次，只需执行以下操作：

```
if (e.getStateChange() == ItemEvent.SELECTED) {
...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T21:36:38.053

JCombobox 为您使用 ItemEvent.getStateChanged() 区分的 SELECTED 和 DESELECTED 触发 itemStateChanged 两次。因此，将您的代码包装在 if 中，如下所示：

```
public void itemStateChanged( ItemEvent event ) {
    if( event.getStateChanged() == ItemEvent.SELECTED ) {
        // code here
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-22T21:39:22.483

似乎 itemStateChanged 被触发了两次。我认为ItemEvent参数每次都不一样。也许您应该在做某事之前检查事件类型。

抱歉，我现在无法检查，但如果您仍然需要帮助，我会稍后再检查。

# delphi - 如何消除变量“panel1, panel2, panel3 .. etc.” 在德尔福？

> ID：12081700
> 
> 赞同：2
> 
> 时间：2012-08-22T21:30:26.467
> 
> 标签：delphi, optimization, delphi-7

我有这种类型

```
type
 TMain = class(TForm)

 panel1: Tpanel;
 panel2: Tpanel;
 panel3: Tpanel;
 panel4: Tpanel;
 panel5: Tpanel;
 panel6: Tpanel;
 panel7: Tpanel;
 panel8: Tpanel;
 ......
 panel45: Tpanel;

 label1: TLabel;
 label2: TLabel;
 label3: TLabel;
 label4: TLabel;
 label5: TLabel;
 label6: TLabel;
 label7: TLabel;
 ...........
 label109: TLabel; 
```

我怎样才能在一行中调用这些组件......在类型内？

谢谢 ...

更新....

从我得到并接受的 anwser 的基础上，当我拥有所有这些组件并从主窗体中进行 button1.click 之类的操作时，它工作得很好......

但我习惯从单位做出行动......所以

当我单击一个按钮时，我会看到一个过程 DoMaths(Sender: TObject);

```
procedure Tform1.DoMaths(Sender: TObject);
  begin
    if TButton1(Sender).hint := 'Make the standard Package' then
      do_Maths_standard_package;
  end; 
```

do_Maths_standard_package 在单位 ComplexMaths 中。

是程序 do_Maths_standard_package 表单单元 ComplexMaths 它从 Form1 调用一些组件...例如 Form1.label1 等...

因此，当我调用 RegisterClass(TLabel) 并从类型中删除 Tlabel 时，它会给出一个错误，它无法找到 Label1 ...

请有人可以帮助我，以免从一开始就进行洞计划...

再次感谢你...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-23T07:11:03.503

您可以删除 TPanel 或 TLabel 的名称，然后它只存在于控件列表中，而不存在于表单的类型声明中。您要么需要留下一个标签和一个面板，要么添加：

```
initialization
  RegisterClass(TPanel);
  RegisterClass(Tlabel);
end. 
```

在表格的末尾。

这使得带有很多控件的表单更加整洁。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-23T02:09:07.643

使用`TForm.Controls`数组：

```
var
  i: Integer;
  Pnl: TPanel;
begin
  for i := 0 to ControlCount - 1 do
    if Controls[i] is TPanel then
    begin
      Pnl := TPanel(Controls[i]);
      Pnl.Caption := 'This is panel ' + IntToStr(i);
    end;
end; 
```

Delphi 自动为每个创建两个列表`TWinControl`：

*   `Controls``TControl`包含控件包含的所有项目的列表。

*   `Components`是`TComponents`一个控件上所有的列表。

请注意，所有`Controls`都是`Components`，但不是所有`Components`都是`Controls`；这就是为什么有两个列表。（`TDataSet`例如， A 在`Components`列表中，但不在`Controls`列表中；`TEdit`另一方面， a 将在两者中。）

您也可以使用相同的技术来遍历面板或其他容器上的组件 -例如，`TPanel`同时具有`Control`和`Component`数组。

如果您真正想要的是减少`type`声明本身中的项目数量，请在运行时创建它们——Delphi 将根据`Owner`and自动将它们添加到数组中`Parent`：

```
procedure TForm1.FormCreate(Sender: TObject);
var
  i: Integer;
  Panel: TPanel;
  Label: TLabel;
begin
  for i := 0 to 10 do
  begin
    Panel := TPanel.Create(Self);  // Set who frees it
    Panel.Parent := Self;   // Set display surface
    Panel.Align := alTop;
    Panel.Name := Format('Panel%d', [i]); // Not necessary
    Panel.Caption := Panel.Name;  

    // Add a label on each panel, just for fun.
    Label := TLabel.Create(Panel); // Panel will free label
    Label.Parent := Panel;         // Label will show on panel
    Label.Top := 10;
    Label.Left := 10;
    Label.Name := Format('Label%d', [i]);
    Label.Caption := Label.Caption;   // Not necessary
  end;
end; 
```

请注意，自己创建它们不是“优化”，因为它只是将加载从 VCL 转移到你自己做。它会减小 .dfm 文件的大小，但不会加快您的代码或加载时间，这意味着您也无法直观地布置表单。（维护你的代码也更难，因为你的控件有无意义的名字。知道什么`LastNameEdit`或是什么`EditLastName`比`Edit1`你在 6 个月后阅读代码要容易得多。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-22T21:32:00.197

您可以使用数组：

```
panels : array[1..45] of TPanel; 
```

这将允许您创建一个控件数组，并通过索引访问和使用它们。

# r - 按因子写表

> ID：12081701
> 
> 赞同：1
> 
> 时间：2012-08-22T21:30:47.730
> 
> 标签：r

鉴于此数据框：

```
 years random_numbers
1   2003            -24
2   2004            152
3   2005             23
4   2006             73
5   2007             80
6   2008             85
.   ....             .. 
```

生成数据框的代码：

```
years = c(rep(2003:2012,4))
random_numbers = as.integer(rnorm(40)*100)
testDF = data.frame(years, random_numbers) 
```

我怎样才能生成ff。文本文件：

*   2003.txt 包含数字 -24、3、88 等。
*   2004.txt 包含数字 152、67、100 等。

我有点不知所措。我正在考虑将年份作为因素，然后以某种方式将其与

```
write.table(???, ???, append = T, row.names = F,  col.names = T) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T22:20:45.657

包`plyr`，`d_ply`让这很容易。

定义一个写入文件的函数：

```
myfun <- function(x) {
  filename <- paste0(unique(x$years), '.txt')
  write.table(x$random_numbers, filename, row.names=F, col.names=T)
} 
```

然后调用它`d_ply`：

```
d_ply(testDF, .(years), myfun) 
```

不过要小心……因为它会默默地将一堆文件写入您当前的工作目录！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T23:48:01.057

```
 sapply(testDF$years, function(x) 
    write.table(testDF[testDF$years==x,], file=paste(x, "txt", sep=".") )
    ) 
```

您不想设置 append=T。也可以使用子集：

```
sapply(testDF$years, function(x) 
    write.table(subset( testDF, years==x), file=paste(x, "txt", sep=".") )
    ) 
```

# python - Python正则表达式删除空格并将空格所在的字母大写？

> ID：12081704
> 
> 赞同：1
> 
> 时间：2012-08-22T21:31:03.690
> 
> 标签：python, regex, tags, python-2.7

我想从用户提供的单个输入框中创建一个标签列表，用逗号分隔，我正在寻找一些可以帮助自动执行此操作的表达式。

我想要的是提供输入字段和：

*   删除所有双+空格、制表符、换行符（只留下单个空格）
*   删除所有（单引号和双引号）引号，除了逗号，它只能有一个
*   在每个逗号之间，我想要Something Like Title Case，但不包括第一个单词，而不是单个单词，这样当删除最后一个空格时，标签就会显示为“somethingLikeTitleCase”或“something”或“twoWords” '
*   最后，删除所有剩余的空格

到目前为止，这是我在 SO 周围收集的内容：

```
def no_whitespace(s):
"""Remove all whitespace & newlines. """
    return re.sub(r"(?m)\s+", "", s)

# remove spaces, newlines, all whitespace
# http://stackoverflow.com/a/42597/523051

  tag_list = ''.join(no_whitespace(tags_input))

# split into a list at comma's

  tag_list = tag_list.split(',')

# remove any empty strings (since I currently don't know how to remove double comma's)
# http://stackoverflow.com/questions/3845423/remove-empty-strings-from-a-list-of-strings

  tag_list = filter(None, tag_list) 
```

但是，在修改该正则表达式以删除除逗号以外的所有标点符号时，我迷失了方向，我什至不知道从哪里开始大写。

有什么想法可以让我朝着正确的方向前进吗？

* * *

如建议的那样，这里有一些示例输入 = desired_outputs

form: 'tHiS is a tag, 'whitespace' !&#^ , secondcomment , no!punc$$, ifNOSPACESthenPRESERVEcaps' 应该是 ['thisIsATag', 'secondcomment', 'noPunc', 'ifNOSPACESthenPRESERVEcaps']

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T23:46:22.017

这是解决问题的一种方法（不使用任何正则表达式，尽管有一个地方可以）。我们将问题拆分为两个函数：一个函数将字符串拆分为逗号分隔的片段并处理每个片段 ( `parseTags`)，另一个函数接受字符串并将其处理为有效标签 ( `sanitizeTag`)。注释代码如下：

```
# This function takes a string with commas separating raw user input, and
# returns a list of valid tags made by sanitizing the strings between the
# commas.
def parseTags(str):
    # First, we split the string on commas.
    rawTags = str.split(',')

    # Then, we sanitize each of the tags.  If sanitizing gives us back None,
    # then the tag was invalid, so we leave those cases out of our final
    # list of tags.  We can use None as the predicate because sanitizeTag
    # will never return '', which is the only falsy string.
    return filter(None, map(sanitizeTag, rawTags))

# This function takes a single proto-tag---the string in between the commas
# that will be turned into a valid tag---and sanitizes it.  It either
# returns an alphanumeric string (if the argument can be made into a valid
# tag) or None (if the argument cannot be made into a valid tag; i.e., if
# the argument contains only whitespace and/or punctuation).
def sanitizeTag(str):
    # First, we turn non-alphanumeric characters into whitespace.  You could
    # also use a regular expression here; see below.
    str = ''.join(c if c.isalnum() else ' ' for c in str)

    # Next, we split the string on spaces, ignoring leading and trailing
    # whitespace.
    words = str.split()

    # There are now three possibilities: there are no words, there was one
    # word, or there were multiple words.
    numWords = len(words)
    if numWords == 0:
        # If there were no words, the string contained only spaces (and/or
        # punctuation).  This can't be made into a valid tag, so we return
        # None.
        return None
    elif numWords == 1:
        # If there was only one word, that word is the tag, no
        # post-processing required.
        return words[0]
    else:
        # Finally, if there were multiple words, we camel-case the string:
        # we lowercase the first word, capitalize the first letter of all
        # the other words and lowercase the rest, and finally stick all
        # these words together without spaces.
        return words[0].lower() + ''.join(w.capitalize() for w in words[1:]) 
```

事实上，如果我们运行这段代码，我们会得到：

```
>>> parseTags("tHiS iS a tAg, \t\n!&#^ , secondcomment , no!punc$$, ifNOSPACESthenPRESERVEcaps")
['thisIsATag', 'secondcomment', 'noPunc', 'ifNOSPACESthenPRESERVEcaps'] 
```

这段代码中有两点值得澄清。首先是`str.split()`in的使用`sanitizeTags`。这将`a b c`变成`['a','b','c']`，而`str.split(' ')`将产生`['','a','b','c','']`。这几乎肯定是您想要的行为，但有一个极端情况。考虑字符串`tAG$`。变成一个空间，`$`并被分裂剥离；因此，这变成了`tAG`而不是`tag`. 这可能是你想要的，但如果不是，你必须小心。我要做的是将该行更改为`words = re.split(r'\s+', str)`，这会将字符串拆分为空格，但保留前导和尾随的空字符串；但是，我也会更改`parseTags`为使用`rawTags = re.split(r'\s*,\s*', str)`. 您必须进行这两项更改；`'a , b , c'.split(',') becomes ['a ', ' b ', ' c']`, 这*不是*您想要的行为，同时`r'\s*,\s*'`也会删除逗号周围的空格。如果忽略前导和尾随空格，则差异无关紧要；但如果你不这样做，那么你需要小心。

最后，没有使用正则表达式，而是使用`str = ''.join(c if c.isalnum() else ' ' for c in str)`. 如果需要，您可以将其替换为正则表达式。（**编辑：**我在这里删除了一些关于 Unicode 和正则表达式的不准确之处。）忽略 Unicode，您可以将这一行替换为

```
str = re.sub(r'[^A-Za-z0-9]', ' ', str) 
```

这用于`[^...]`匹配*除*列出的字符之外的所有字符：ASCII 字母和数字。但是，最好支持 Unicode，而且也很简单。最简单的方法是

```
str = re.sub(r'\W', ' ', str, flags=re.UNICODE) 
```

这里，`\W`匹配非单词字符；单词字符是字母、数字或下划线。`flags=re.UNICODE`指定（在 Python 2.7 之前不可用；您可以改为用于`r'(?u)\W'`早期版本*和*2.7），字母和数字都是任何适当的 Unicode 字符；没有它，它们只是ASCII。如果您不想要下划线，您也可以添加`|_`到正则表达式以匹配下划线，也可以用空格替换它们：

```
str = re.sub(r'\W|_', ' ', str, flags=re.UNICODE) 
```

我相信，最后一个与我不使用正则表达式的代码的行为完全匹配。

* * *

另外，这就是我在没有这些注释的情况下编写相同代码的方法；这也允许我消除一些临时变量。您可能更喜欢存在变量的代码；这只是口味问题。

```
def parseTags(str):
    return filter(None, map(sanitizeTag, str.split(',')))

def sanitizeTag(str):
    words    = ''.join(c if c.isalnum() else ' ' for c in str).split()
    numWords = len(words)
    if numWords == 0:
        return None
    elif numWords == 1:
        return words[0]
    else:
        return words[0].lower() + ''.join(w.capitalize() for w in words[1:]) 
```

* * *

为了处理新期望的行为，我们必须做两件事。首先，我们需要一种方法来固定第一个单词的大小写：如果第一个字母小写，则将整个字母小写，如果第一个字母大写，则将除首字母以外的所有字母*小写*。这很简单：我们可以直接检查。其次，我们希望将标点符号视为完全不可见：它不应该将以下单词大写。同样，这很容易——我什至讨论了如何处理上面类似的事情。我们只是过滤掉所有非字母数字、非空白字符，而不是将它们变成空格。结合这些变化给了我们

```
def parseTags(str):
    return filter(None, map(sanitizeTag, str.split(',')))

def sanitizeTag(str):
    words    = filter(lambda c: c.isalnum() or c.isspace(), str).split()
    numWords = len(words)
    if numWords == 0:
        return None
    elif numWords == 1:
        return words[0]
    else:
        words0 = words[0].lower() if words[0][0].islower() else words[0].capitalize()
        return words0 + ''.join(w.capitalize() for w in words[1:]) 
```

运行此代码为我们提供以下输出

```
>>> parseTags("tHiS iS a tAg, AnD tHIs, \t\n!&#^ , se@%condcomment$ , No!pUnc$$, ifNOSPACESthenPRESERVEcaps")
['thisIsATag', 'AndThis', 'secondcomment', 'NopUnc', 'ifNOSPACESthenPRESERVEcaps'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T22:44:09.983

您可以使用允许出现在单词中的字符的白名单，其他所有内容都将被忽略：

```
import re

def camelCase(tag_str):
    words = re.findall(r'\w+', tag_str)
    nwords = len(words)
    if nwords == 1:
        return words[0] # leave unchanged
    elif nwords > 1: # make it camelCaseTag
        return words[0].lower() + ''.join(map(str.title, words[1:]))
    return '' # no word characters 
```

此示例使用`\w`单词字符。

### [例子](http://ideone.com/v7QC3)

```
tags_str = """ 'tHiS iS a tAg, 'whitespace' !&#^ , secondcomment , no!punc$$, 
ifNOSPACESthenPRESERVEcaps' """
print("\n".join(filter(None, map(camelCase, tags_str.split(','))))) 
```

### 输出

```
thisIsATag
whitespace
secondcomment
noPunc
ifNOSPACESthenPRESERVEcaps 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T22:03:12.193

我认为这应该有效

```
def toCamelCase(s):
  # remove all punctuation
  # modify to include other characters you may want to keep
  s = re.sub("[^a-zA-Z0-9\s]","",s)

  # remove leading spaces
  s = re.sub("^\s+","",s)

  # camel case
  s = re.sub("\s[a-z]", lambda m : m.group(0)[1].upper(), s)

  # remove all punctuation and spaces
  s = re.sub("[^a-zA-Z0-9]", "", s)
  return s

tag_list = [s for s in (toCamelCase(s.lower()) for s in tag_list.split(',')) if s] 
```

这里的关键是利用 re.sub 进行您想要的替换。

编辑：不保留大写字母，但确实处理带有空格的大写字符串

编辑：在 toCamelCase 调用之后移动了“if s”

# string - ADF convertNumber 抛出空字符串？

> ID：12081706
> 
> 赞同：0
> 
> 时间：2012-08-22T21:31:06.983
> 
> 标签：string, converter, oracle-adf

所以我在我的 jspx 页面中有这段代码（valorTicket 是 Double）

```
>                               <af:inputText value="#{bindings.valorTicket.inputValue}"
                                        label="Valor TAG" id="itValorTicket"
                                        required="false"  >

                            <af:convertNumber id="cnTicket" type="currency"  
                                              minFractionDigits="2" 
                                              maxFractionDigits="2"/>
                            <af:validateDoubleRange id="vdrTicket"
                                                    minimum="0.01"
                                                    maximum="10000000000000"
                                                    messageDetailNotInRange="O valor deve ser de R$ 0,01 até R$ 10.000.000.000.000,00"/>
                          </af:inputText> 
```

当我只提交输入而不更改它的初始值（空）时，一切都按原样运行，但是当我设置一个数字并提交然后删除所有内容并提交“Double.valueOf（）”时抛出一个 numberFormatException：空字符串，我'我尝试在 web.xml 中设置以下参数

> javax.faces.INTERPRET_EMPTY_STRING_SUBMITTED_VALUES_AS_NULL

但是我仍然得到同样的错误，即使现在提交的值是空的。

对此有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T06:26:39.957

如果不知道您使用的 JDeveloper 版本，很难说。你能提供发行版以便可以复制吗？请注意，javax.faces.INTERPRET_EMPTY_STRING_SUBMITTED_VALUES_AS_NULL 并非对所有 JDeveloper 11g 版本都可用

# jsp - EL 表达式未在内部求值 标签

> ID：12081708
> 
> 赞同：0
> 
> 时间：2012-08-22T21:31:21.560
> 
> 标签：jsp, oracle-adf, jspx

我很难评估`mod`语句中的表达式`<c:if>`。

```
<af:forEach begin="0" end="2" step="1" var="col" varStatus="columnStatus">

    <c:set var="colIndex" value="${columnStatus.index}" scope="page" />

    <trh:cellFormat width="33%" valign="top" halign="center" id="cf1">        
        <af:panelGroupLayout id="pgl4" layout="vertical" halign="center">
            <af:iterator id="i1"
                    value="#{pageFlowScope.SkillsMatcherBean.candidateList}"
                    rows="#{pageFlowScope.SkillsMatcherBean.candidateListSize}"
                    var="row"
                    varStatus="rowStatus"
                    first="#{columnStatus.index}">
                <c:if test="${rowStatus.index mod 3 == '${columnStatus.index}'}">
                    <af:group id="g1">
                        <af:outputText value="index" id="ot6"/>
                        <af:outputText value=" #{rowStatus.index}" id="ot2"/>
                        <af:outputText value="end" id="ot7"/>
                        <af:outputText value=" #{columnStatus.index}" id="ot3"/>
                        <af:outputText value="count" id="ot13"/>
                        <af:outputText value=" #{rowStatus.index % 3}" id="ot5"/>
                        <af:outputText value="#{test}" id="ot1"/>
                        <af:spacer width="10" height="5" id="s1"/>
                    </af:group>
                </c:if>
            </af:iterator>
        </af:panelGroupLayout>
    </trh:cellFormat>
</af:forEach> 
```

我有两个迭代器循环，外循环`varStatus`变量 as`"columnStatus"`和内循环`varStatus`变量 as `"rowStatus"`。

`columnStatus`跨越 0 - 2
`rowStatus`跨越 1 - 18

在上面的表达式中，`rowStatus.index mod 3`总是计算为`0`。我试过用`%`and `mod`。

我正在使用`Jdev 11.1.1.6`.

请让我知道如何实现这一目标。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-20T17:33:28.270

虽然 Frank 在功能上是正确的，但在性能方面他却不是：af:forEach 将为每次迭代生成一个 UI 组件，并且 af:switcher 将包含子树，即使渲染为 false。所以他的建议增加了 UI 树的大小。通常，该页面中每个操作的 UI 树大小和响应大小之间存在相关性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T06:29:27.350

问题在于 af:iterator 标签。它标记它的孩子，这意味着它不会评估其中的表达式。使用 af:forEach 代替 af:iterator。请注意，区别在于 af:iterator 适用于集合，而 af:forEach 适用于列表。

另请注意，您可以使用 af:switcher 来切换一组组件的视觉状态，而不是使用 c:if。JSTL 和 JSF 没有相同的请求行为，这就是为什么首选任何原生 JSF 组件的原因

坦率

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-20T21:12:26.853

问题是 EL 表达式将始终为 false ，因为它将数字与引号内的字符串进行比较。

您应该尝试以下操作：

```
 <c:if test="${rowStatus.index mod 3 == columnStatus.index}"> 
```

# websphere-mq-fte - 如何在fte ant脚本中实现日志记录

> ID：12081709
> 
> 赞同：1
> 
> 时间：2012-08-22T21:31:22.050
> 
> 标签：websphere-mq-fte

我正在尝试在 FTE 中实现日志记录，我需要记录所有监视器信息，即成功执行了多少监视器作业以及失败了多少。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T04:11:04.813

这可能会有所帮助。您是否正在实施自己的日志记录？

监控日志发布在 SYSTE.FTE/Log 主题上。您可以订阅以接收有关此主题的出版物并按照您想要的方式进行处理。更多细节[在这里](http://publib.boulder.ibm.com/infocenter/wmqfte/v7r0/topic/com.ibm.wmqfte.doc/monitor_log_xsd.htm)。

# ios - NSURLConnection:didReceiveResponse: 除了 didFailWithError 之外调用：

> ID：12081711
> 
> 赞同：1
> 
> 时间：2012-08-22T21:31:48.213
> 
> 标签：ios, nsurlconnection

我注意到，如果存在连接问题，那么除了 didFailWithError: （使用 HTTP 400）之外，还会调用 didReceiveResponse:。

这不是我所期望的，并且使处理错误情况变得棘手 - 特别是因为我还注意到 didReceiveResponse: 是在 didFailWithError: 之前调用的东西：有时在它之后。

我不敢相信这是预期的行为，因此我想知道我的代码是否存在某种问题，但如果有的话，我无法想象如何。

任何人都可以确认 NSURLConnection 的行为应该是什么，或者他们以前是否见过这样的行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T22:06:15.390

很确定这是按预期工作的。`-connectionDidFinishLoading:`和`connection:didFailWithError:`方法是互斥的，但是任何一个都可以通过调用（或多个！）来进行`connection:didReceiveResponse:`。

毕竟，在这种情况下，您*确实*收到了有效的 HTTP 响应。它恰好表明您的请求由于该请求的某些问题而无法处理。（与加载失败但没有响应的超时相反。）

但是，其中一个`-connectionDidFinishLoading:`或`connection:didFailWithError:`应该始终是您为给定连接收到的*最后一条消息。*（如果您对多个连接使用单个委托，请确保在看到这些调用乱序时查看的是同一个连接对象。）

# ios - VOIP 应用程序窗口（在前台）在活动蜂窝呼叫期间无法接收用户输入

> ID：12081714
> 
> 赞同：0
> 
> 时间：2012-08-22T21:31:59.750
> 
> 标签：ios, cocoa-touch, voip, banner, background-foreground

在有效的 VOIP 通话期间，当收到并接听来电时，我的应用程序将进入后台。如果在进行蜂窝电话呼叫时，我将我的应用程序带回前台，应用程序视图会出现但没有响应。“触摸以返回通话”横幅以绿色显示在视图的顶部，但应用程序视图看起来好像有一个较暗的透明窗口覆盖在其顶部，从而阻止视图接收输入。如果我将我的应用程序置于后台，将另一个应用程序置于前台，然后将我的应用程序置于前台，一切都按预期工作，所以问题似乎只针对活动的手机通话和/或绿色横幅？在设置->通知-> 电话 我尝试关闭通知中心并关闭警报样式，希望移除横幅以查看问题是否仍然存在，但这些设置不会影响该横幅。除了似乎覆盖有透明窗口的应用程序窗口之外，如果我触摸该窗口，我可以在各个方向（上下左右）拖动整个应用程序窗口（或视图）并且它有一个反弹当我释放它时效果（如 tableview 垂直滚动）。

如果我不知道问题，我无法解决（：

谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T22:48:54.417

您确定没有在您的视图顶部添加可能拦截您所有事件的视图吗？我的第二个猜测是您的应用收到了内存警告并卸载了一堆视图。但是，这不太可能，因为您仍然可以看到所有视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T14:08:33.980

我不知道您“将您的应用程序带回前台”的真正含义，但我可以肯定地告诉您，您不能在同一个线程中调用 UI 和来电，因此对于这种情况，当您想要要在通话期间呈现一些视图，您可以尝试以下操作：

```
public void InvokeGUIThread(Action action)
{
  Dispatcher.Invoke(action);
} 
```

例如，如果您想在文本块中设置文本，请执行以下操作：

```
InvokeGUIThread(() =>
        {
            textBlockSome.Text = e.Item.ToString();
        }); 
```

# asp.net - 在 ASP.Net 页面中出现错误

> ID：12081715
> 
> 赞同：0
> 
> 时间：2012-08-22T21:31:59.900
> 
> 标签：asp.net

您能否让我知道为什么以下代码不起作用，当调试器通过变量“strStatus”时我收到错误消息。错误消息是：“对象引用未设置为对象的实例。” 你能帮忙吗？谢谢-Yagya

```
 protected void Button1_Click(object sender, EventArgs e)
    {
        if (Y0130_chkNew.Checked == true)
        {
            bool isChecked = true; // This is required for later retrieval.

            string strAction = "Reporting";
            string strFromRole = ddSelectRole.SelectedValue;

            string TxtBoxID = myProject.getTextBox(strAction, strPath);
            TextBox txtb = new TextBox();
            txtb = (TextBox)Page.FindControl(TxtBoxID);
            string strStatus = txtb.Text;

            string ddID = myProject.getDropDown(strAction, strPath);
            DropDownList ddLst = new DropDownList;
            ddLst = (DropDownList)Page.FindControl(ddID);
            string strForwardRole = ddLst.SelectedValue;

            // Call the function now
            my.updateXML(strFromRole, strAction, strStatus, strForwardRole, strPath);

        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T21:35:35.357

您正在使用函数查找控件，并且可能会返回页面上不存在的文本框 id。请尝试调试并查看您从 myProject.getTextBox 函数获得的文本框 id 以及页面上是否存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T21:42:21.367

`Page.FindControl(TxtBoxID);`返回 null 你的异常的原因是什么。`FindControl`不递归搜索控件，仅在给定的`NamingContainer`.

如果控件没有嵌套在`NamingContainer`页面上的另一个中（fe a `GridViewRow`），则根本没有理由使用，`FindControl`因为您可以直接引用它：

```
string strStatus = TextBox1.Text; // assuming TextBox1 is declared on the aspx 
```

如果您使用`MasterPages`的不是页面`NamingContainer`中的控件，而是：`ContentPage``ContenPlaceHolder`

[在页面上找不到文本框](https://stackoverflow.com/a/9520061/284240)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T06:53:11.543

最终代码： if (Y0130_chkNew.Checked == true)
{
string TxtBoxID = "Y0140_txtStatus"; 文本框 txtb = new TextBox();
txtb = (TextBox)Page.Master.FindControl("ContentPlaceHolder1").FindControl(TxtBoxID);
字符串 strStatus = txtb.Text；

```
 string ddID = "Y0150_ddOwnerRoleAssignment";
            DropDownList ddLst = new DropDownList();             
            ddLst = (DropDownList)Page.Master.FindControl("ContentPlaceHolder1").FindControl(ddID);            
            string strForwardRole = ddLst.SelectedValue;                       
        } 
```

# php - 如何使用 Excel 更新 mySQL 数据库中的列

> ID：12081716
> 
> 赞同：2
> 
> 时间：2012-08-22T21:32:00.757
> 
> 标签：php, mysql, database, excel, phpmyadmin

我有一张桌子，大约有。10,000 条客户记录。表结构如下所示：

**客户ID** | **名字**| **姓氏**| **电话号码**

我正在尝试使用更新的Excel 文件更新**PhoneNumber**列，该文件只有两列**ClientID** | **电话号码**

我的 cpanel 安装了 phpmyadmin，但是如何将 excel 文件导入数据库并仅根据**ClientID更新****PhoneNumber**？

 **谢谢大家！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T21:39:12.803

**简单、棘手和聪明的解决方案：**

用列复制它做数据表：

```
SQL | PhoneNumber | SQL | ClientID | SQL 
```

**样本数据：**

第 1 列：（`UPDATE clients SET phonenumber = '`将其复制到每一行）

第 2 栏：`12345`

第 3 列：（`' WHERE ClientID=`将其复制到每一行）

第 4 栏：`123`

第 5 列：（`;`将其复制到每一行）

**将其保存为 CSV（空格分隔，不带引号），导入为 SQL**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-22T21:41:57.290

我不知道这是否可能，但是您可以轻松地使用 excel 电子表格生成一系列 MySQL 命令来更新电话号码。如果 ID 是 A 列，电话号码是 B 列，那么函数就是：

`concatenate("update yourTableName set phonenumber = '", A1, "' where ID = ", B1, ";")`

然后填写并将生成的命令复制到 PHPMyAdmin 的 SQL 选项卡中。**

# xml - 使用 xslt 操作 XML 文本节点

> ID：12081717
> 
> 赞同：-2
> 
> 时间：2012-08-22T21:32:01.723
> 
> 标签：xml, xslt, xpath

我想用 xslt 从以下数据中删除一些不需要的文本

```
Address>
<Rowinfo>
<LocatorDesignator>Dwelling  (Part Of) Null</LocatorDesignator>
<LocatorName>Flat  - Buena Villa House</LocatorName>
</Rowinfo>
<Rowinfo>
<LocatorDesignator>Flat  - Buena Villa House 1</LocatorDesignator>
<LocatorName>Flat  3a  Anderson's House</LocatorName>
</Rowinfo>
<Rowinfo>
<LocatorDesignator>Offices Unit 2a Funlife Building 02a</LocatorDesignator>
<LocatorName>office Unit 2a   Funlife Building  <LocatorName>
 </Rowinfo>
 </Address> 
```

生产这个

```
<LocatorDesignator>Dwelling(Part Of)</LocatorDesignator>
<LocatorName>Buena Villa House</LocatorName>

<LocatorDesignator>Flat 1</LocatorDesignator>
<LocatorName> Anderson's House</LocatorName>

<LocatorDesignator>office Unit 2a</LocatorDesignator>
<LocatorName> Funlife Building  <LocatorName> 
```

在定位器名称中：提取

*   布埃纳别墅

*   安德森的房子

*   趣生活大厦

换句话说，双引号中的部分将被删除：

```
(row1) "Flat  -" Buena Villa House.   
(row2) "Flat  3a"  Anderson's House .
(row3) "office Unit 2a"   Funlife Building. 
```

在 Locatordesignator 中：删除

*   无效的

*   布埃纳别墅

*   趣生活大厦

换句话说，双引号中的部分将被删除：

```
(row1) Dwelling  (Part Of) "Null"
(row2) Flat  " Buena Villa House" 1\.   
(row3) office Unit 2a   "Funlife Building 02a". 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T14:36:46.203

**这个完整的转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:my="my:my">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <my:LocatornameDeletes>
  <del>Flat  -</del>
  <del>Flat  3a</del>
  <del>office Unit 2a</del>
 </my:LocatornameDeletes>

 <my:LocatordesignatorDeletes>
  <del>Null</del>
  <del>Buena Villa House</del>
  <del>Funlife Building 02a</del>
 </my:LocatordesignatorDeletes>

 <xsl:variable name="vLocNameDels" select="document('')/*/my:LocatornameDeletes/*"/>    
 <xsl:variable name="vLocDesDels" select="document('')/*/my:LocatordesignatorDeletes/*"/>   
 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>

 <xsl:template match="LocatorName/text()">
  <xsl:call-template name="makeDeletes">
   <xsl:with-param name="pDeletes" select="$vLocNameDels"/>
  </xsl:call-template>
 </xsl:template>

 <xsl:template match="LocatorDesignator/text()">
  <xsl:call-template name="makeDeletes">
   <xsl:with-param name="pDeletes" select="$vLocDesDels"/>
  </xsl:call-template>
 </xsl:template>

 <xsl:template name="makeDeletes">
  <xsl:param name="pText" select="."/>
  <xsl:param name="pDeletes"/>

  <xsl:variable name="vDelText" select="$pDeletes[contains($pText, .)][1]"/>
  <xsl:if test="$vDelText">
   <xsl:variable name="vRough">
     <xsl:value-of select="substring-before($pText, $vDelText)"/>
     <xsl:value-of select="substring-after($pText, $vDelText)"/>
   </xsl:variable>

   <xsl:value-of select="normalize-space($vRough)"/>
  </xsl:if>
 </xsl:template>
</xsl:stylesheet> 
```

**当应用于（纠正格式错误）提供的 XML 文档时**：

```
<Address>
    <Rowinfo>
        <LocatorDesignator>Dwelling  (Part Of) Null</LocatorDesignator>
        <LocatorName>Flat  - Buena Villa House</LocatorName>
    </Rowinfo>
    <Rowinfo>
        <LocatorDesignator>Flat  - Buena Villa House 1</LocatorDesignator>
        <LocatorName>Flat  3a  Anderson's House</LocatorName>
    </Rowinfo>
    <Rowinfo>
        <LocatorDesignator>Offices Unit 2a Funlife Building 02a</LocatorDesignator>
        <LocatorName>office Unit 2a   Funlife Building  </LocatorName>
    </Rowinfo>
</Address> 
```

**产生想要的正确结果**：

```
<Address>
   <Rowinfo>
      <LocatorDesignator>Dwelling (Part Of)</LocatorDesignator>
      <LocatorName>Buena Villa House</LocatorName>
   </Rowinfo>
   <Rowinfo>
      <LocatorDesignator>Flat - 1</LocatorDesignator>
      <LocatorName>Anderson's House</LocatorName>
   </Rowinfo>
   <Rowinfo>
      <LocatorDesignator>Offices Unit 2a</LocatorDesignator>
      <LocatorName>Funlife Building</LocatorName>
   </Rowinfo>
</Address> 
```

**说明**：

1.  `LocatorName`在 global-level element 中提供了 text-node children 中要删除的字符串`my:LocatornameDeletes`。

2.  `LocatorDesignator`在 global-level element 中提供了 text-node children 中要删除的字符串`my:LocatordesignatorDeletes`。

3.  身份规则“按原样”复制选择执行它的每个节点。

4.  有两个模板覆盖了标识模板——一个匹配`LocatorName/text()`，另一个匹配`LocatorDesignator/text()`。这些模板中的每一个都简单地调用`makeDeletes`模板，将包含要删除的子字符串的正确节点集作为参数传递给它。

5.  模板执行实际的`makeDeletes`“删除在其`$pDeletes`参数中传递的子字符串。这是使用标准 XPath 函数[**`substring-before()`**](http://www.w3.org/TR/1999/REC-xpath-19991116/#function-substring-before)和[**`substring-after()`**](http://www.w3.org/TR/1999/REC-xpath-19991116/#function-substring-after).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T13:39:14.633

您可以在 XSLT 1.0 中使用这些字符串函数来实现您的目标：

1.  包含（）
2.  子串（）
3.  子串之前（）
4.  子字符串后（）

使用 XSLT 搜索函数名称以获取每个函数的规范。

如果您可以升级到 XSLT 2.0，我肯定会推荐它。在 XSLT 2.0 中，您将能够使用正则表达式来更简单地实现您的目标。

## 例子

有了这个输入文件...

```
<t>
 <row>"Flat  -" Buena Villa House.</row>  
 <row>"Flat  3a"  Anderson's House .</row>
 <row>"office Unit 2a"   Funlife Building.</row>
</t> 
```

...当此 XSLT 1.0 样式表应用于所述文档时，将删除双引号文本片段...

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" indent="yes"/>

<xsl:template match="/">
 <t>
   <xsl:apply-templates select="*/row"/>
 </t>
</xsl:template>

<xsl:template match="row">
 <row>
  <xsl:call-template name="remove-quoted-bit">
    <xsl:with-param name="raw-text" select="." />
  </xsl:call-template>  
 </row>
</xsl:template>
<xsl:template name="remove-quoted-bit">
  <xsl:param name="raw-text" />
  <xsl:choose>
    <xsl:when test="contains($raw-text,'&quot;')">
      <xsl:value-of select="concat(
        substring-before($raw-text,'&quot;'),
        substring-after( substring-after($raw-text,'&quot;'),'&quot;')
        )" />
    </xsl:when>
    <xsl:otherwise>
      <xsl:value-of select="$raw-text" />
    </xsl:otherwise>  
  </xsl:choose>  
</xsl:template>  

</xsl:stylesheet> 
```

...并产生此输出...

```
<t>
  <row> Buena Villa House.</row>
  <row>  Anderson's House .</row>
  <row>   Funlife Building.</row>
</t> 
```

### 更新

语法编辑。

# autotools - Makefile.am 似乎忽略了 AM_LDLIBS

> ID：12081718
> 
> 赞同：1
> 
> 时间：2012-08-22T21:32:10.110
> 
> 标签：autotools, autoconf, automake

我目前正在努力理解自动工具。我快到了，但是当涉及到`AM_CFLAGS`and`AM_LDLIBS`宏时，我对 automake 的行为感到有些困惑。

下面是我很短的 Makefile.am

```
 1 bin_PROGRAMS = sqlmigrate
  2 sqlmigrate_SOURCES = sqlmigrate.c db.c
  3 
  4 AM_CFLAGS=-g -Wall -D_LARGEFILE64_SOURCE=1 -I/usr/local/apr/include/apr-1
  5 AM_LDLIBS=-lsqlite3 -lapr-1 
```

我的理解是，当没有相应的参数传递给时使用`AM_CFLAGS`and ，但在给定时它们会屈服于此类参数。`AM_LDLIBS``./configure`

然而，在创建 Makefile.in 并运行 configure 之后，`make all`显然没有使用指定的`CFLAGS`，`LDLIBS`即使我指定了它们。

更奇怪的是（无论如何对我来说），如果我碰巧使用`AC_CHECK_LIB`宏，我的配置脚本会导致包含这些库。

```
 1 #                                               -*- Autoconf -*-
  2 # Process this file with autoconf to produce a configure script.
  3 
  4 AC_PREREQ([2.68])
  5 AC_INIT([sqlmigrate], [1.0], [])
  6 AM_INIT_AUTOMAKE(1.8)
  7 AC_CONFIG_SRCDIR([sqlmigrate.c])
  8 
  9 # Checks for programs.
 10 AC_PROG_CC
 11 AC_PROG_INSTALL
 12 
 13 # Checks for libraries.
 14 # AC_CHECK_LIB([sqlite3], [sqlite3_open])
 15 # AC_CHECK_LIB([apr-1], [apr_pool_initialize])
 16 
 17 # Checks for header files.
 18 AC_CHECK_HEADERS([stdlib.h string.h unistd.h])
 19 
 20 # Checks for typedefs, structures, and compiler characteristics.
 21 
 22 # Checks for library functions.
 23 
 24 AC_CONFIG_HEADER(config.h)
 25 AC_CONFIG_FILES([Makefile])
 26 AC_OUTPUT 
```

因此，在`AC_CHECK_LIB`注释掉的行的情况下，`gcc`在不链接库的情况下调用。

我觉得我在这里用自动工具挂在线程上。随意爆炸我的现实，向我展示我的方式的错误。

谢谢你的时间！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T21:43:25.970

回答我自己的问题，我认为我的 Makefile.am 中有错误的变量。AM_LDLIBS 似乎不存在——我应该使用 AM_LDFLAGS，尽管我仍然不明白为什么 ./configure 在我使用 AC_CHECK_LIB 宏时会导致库被链接。

# linux - 在linux中，如何为内存区域创建文件描述符

> ID：12081720
> 
> 赞同：15
> 
> 时间：2012-08-22T21:32:21.653
> 
> 标签：linux, mmap

我有一些程序处理文件或内存缓冲区中的一些数据。我想提供统一的方式来处理这些情况。

我可以 1）映射文件，以便我们可以将它们作为内存缓冲区统一处理；2) 使用 fopen 和 fmemopen 创建 FILE*，以便将它们作为 FILE* 统一访问。

但是，我不能使用上述任何一种方式。我需要将它们都作为文件描述符来处理，因为我使用的库之一只接受文件描述符，并且它在文件描述符上执行 mmap。

所以我的问题是，给定一个内存缓冲区（我们可以假设它与 4K 对齐），我们能否获得一个由该内存缓冲区支持的文件描述符？我在其他一些问题中看到 popen 是一个答案，但我认为 popen 中的 fd 不能被 mmap-ed。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-24T08:57:55.093

您无法从“某个内存区域”轻松创建文件描述符（除了 C 标准库之外，这没有帮助）。但是，您可以*创建一个共享内存区域*，并获得一个文件描述符作为回报。

从[shm_overview (7)](http://man7.org/linux/man-pages/man7/shm_overview.7.html)：

> shm_open(3)
> 创建并打开一个新对象，或打开一个现有对象。这类似于 open(2)。该调用**返回一个文件描述符**，供下面列出的其他接口使用。

列出的接口中有`mmap`，这意味着您可以像内存映射常规文件一样“内存映射”共享内存。

因此，*只要您控制*“内存缓冲区”的创建，就`mmap`可以无缝地使用这两种情况（文件或内存缓冲区） 。

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T21:35:50.473

`mmap`您可以将数据段写入（可能使用）到`tmpfs`基于文件（可能在`/run/`目录下），然后将打开的文件描述符传递给您的库。*

# ruby - 一个神，用于不同的红宝石与 rvm

> ID：12081726
> 
> 赞同：1
> 
> 时间：2012-08-22T21:33:11.450
> 
> 标签：ruby, rvm, god

我的机器上有两个应用程序。
每个应用程序（服务器）都有自己的 gemset，并且可以在不同的 ruby​​ 版本上运行。

我将使用安装在它自己的 gemset 中的上帝来管理这些应用程序。

我的上帝配置文件`config.god`如下所示：

```
God.watch do |w|
  current_path = "/home/vagrant/server-1"
  w.name = "server 1"
  w.start = "ruby #{current_path}/simple-server.rb"
  w.keepalive
end

God.watch do |w|
  current_path = "/home/vagrant/server-2"
  w.name = "server 2"
  w.start = "ruby #{current_path}/simple-server.rb"
  w.keepalive
end 
```

我的服务器只是将 ruby​​ 版本写入文件（`/home/vagrant/server-2/simple-server.rb`）：

```
require "date"

loop do
  # simple console output
  puts "Hello on #{RUBY_VERSION}, #{RUBY_PATCHLEVEL}, #{RUBY_PLATFORM}, #{RUBY_RELEASE_DATE}"

  # Specify the name of the log file
  log_file = File.join File.expand_path( File.dirname(__FILE__) ), "testfile.txt"

    # Write the log into the file
    File.open( log_file, 'a') do |f|
        date = DateTime.now
        date = date.strftime("%H:%M:%S")

        f.puts "#{date} on #{RUBY_VERSION}, #{RUBY_PATCHLEVEL}, #{RUBY_PLATFORM}, #{RUBY_RELEASE_DATE}"
    end

  sleep 2
end 
```

我用`god -c config.god`.

问题是我的应用程序没有使用 .rvmrc 中指定的 ruby​​ 版本运行。

我也试过：

*   `~/.rvm/bin/wrapped_god -d config.god -D`
*   `rvmsudo ~/.rvm/bin/wrapped_god -d config.god -D`
*   `rvmsudo god -d config.god -D`

这种情况有解决方案吗？

**编辑**2012.08.27：

我已将我的上帝配置更改如下：

```
w.start="~/.rvm/bin/rvm in #{current_path} do ruby simple-server.rb" 
```

它奏效了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T22:52:43.363

尝试：

```
start="~/.rvm/bin/rvm in #{current_path} do ruby simple-server.rb" 
```

# php - 如何读取这个数组？

> ID：12081727
> 
> 赞同：0
> 
> 时间：2012-08-22T21:33:17.527
> 
> 标签：php, arrays

```
array(4) {
  [0]=> int(9)
  ["obj"]=> int(3569)
  ["gen"]=> int(0)
  [1]=> array(1) {
    [0]=> int(0)
  }
} 
```

我正在学习 PHP，并在使用`var_dump`.

我知道在这个数组中有 4 个键，0 obj gen 和 1，在这些键中，值是这样的，数字 9，整数 3569，整数 0，但最后一部分是什么意思？

```
[1]=> array(1) { [0]=> int(0) } 
```

如果有人可以帮助我或将我链接到一些非常感谢的学习材料，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T21:35:20.943

最后一部分表示存储的值`$array[1]`是另一个数组。这不像某些语言只允许在数组中使用一种类型的变量。完全可以将数组嵌套到第 n 级，如下所示：

```
$arrayInsanity = array(
    array (
        array(
            //etc..
        )
     )
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T21:35:30.940

该键`1`包含一个嵌套数组，其中的键`0`具有 value `0`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T21:35:59.560

在`<pre>`您的`var_dump()`. 它会让它更清楚。

```
echo "<pre>";
var_dump($myArray);
echo "</pre>"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T21:36:44.827

数组中有第二个数组，键为 1，其中第 0 个元素值为 int(0)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T21:37:39.103

它是原始数组中的另一个数组。第二个数组包含一个值为 0 的整数。整个数组被称为多维数组，因为它包含一个数组本身。

下一次，尝试`print_r()`一个数组并查看结果输出的源代码 - 它会为您很好地布置。

# jquery - Jquery Mobile Display Popup on anchor click

> ID：12081730
> 
> 赞同：0
> 
> 时间：2012-08-22T21:33:50.350
> 
> 标签：jquery, jquery-mobile

我的 html 页面中有这段代码：

```
 <div data-role="content">
 <div class="content-primary">  
 <ul data-role="listview" data-split-icon="add" data-split-theme="d" 
      id="itemsMenu">
 </ul>

 <div data-role="popup" id="previewImg" data-theme="d" data-overlay-theme="b" 
      class="ui-content" style="max-width:340px;">
    <h3>Image Preview</h3>   
        <a href="index.html" data-role="button" data-rel="back" 
            data-inline="true"  data-mini="true">Cancel</a> 
 </div>

 <a href='#previewImg' id='tmpImg'  data-rel="popup" data-position-to="window" 
   data-transition="pop">
 </a>

  </div><!--/content-primary -->    
 </div> 
```

动态`ul > itemsMenu`填充的位置。当我单击列表视图上的一行时，我希望会出现弹出窗口。除了这一行之外，列表视图的点击事件工作正常

```
$("#tmpImg").click(); 
```

是锚点点击事件的问题还是弹出框本身的问题？

**::更新::** 我的绑定脚本

```
$('body').on('vclick','.imgClass',function(e) {
     e.preventDefault();
     e.stopImmediatePropagation();
     alert("This one Fires");
     $("#tmpImg").click();         
 }); 
```

`imgClass`我动态生成的类在哪里`listview`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T21:54:19.937

据我了解，您正在将绑定设置到页面上尚未出现的元素（列表项）。你可能应该使用类似的东西：

```
 $(document).on('click', 'your_row_selector', function(){
      // do sth
 }) 
```

然后，您可以动态添加列表项并通过始终存在的文档将绑定委托给它们。因此，问题应该出在您的事件处理上，而不是弹出窗口

**编辑：**
关于弹出窗口，我会做两件事：

1) 使用

```
 $('#tmpImg').popup('open') 
```

2) 尽量不要绑定到虚拟事件，例如`vlick`. [JQM 文档](http://jquerymobile.com/test/docs/api/events.html)声明要谨慎使用虚拟事件，因为它们的行为快速但不可预测。尝试绑定以`click`查看这是否有效。

# oracle - ORA-01019 无法在 Windows 7 上的 ADO 程序的用户端分配内存

> ID：12081734
> 
> 赞同：0
> 
> 时间：2012-08-22T21:34:15.030
> 
> 标签：oracle, delphi, ado

我将我们的 Delphi 7 BDE 程序转换为使用 ADO，以便它们可以在 Windows 7 上运行。但我收到错误 ORA-01019 无法在用户端分配内存。我使自己成为具有创建全局对象权限的组的一部分，并且程序运行。但我们不想授予标准用户此权限。我还创建了一个自定义清单，其中执行级别为“requireAdministrator”，并将其放在项目文件夹中。我仍然得到同样的错误。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-23T07:06:05.983

1.  尝试使用 Microsoft OLEDB 提供程序 for Oracle ( `MSDAORA`)、Oracle OLEDB 提供程序 ( `OraOLEDB`) 甚至 Oracle ODBC。其中之一应该在不调整用户权限的情况下工作。
2.  ADO 不是 Oracle 数据访问的最佳选择。`MSDAORA`使用`OCI7`，并获得一些限制，例如不能与 BLOB 一起使用。`OraOLEDB`使用新的 OCI，但也有一些问题，例如无法编辑某些查询结果等。最后 ADO（更准确地说是 dbGo）很慢（[更多](http://www.da-soft.com/anydac/data-access-performance.html)）。
3.  考虑迁移到 3d 派对产品。BDE -> 3d 派对方式很简单，有许多数据访问库，包括我们的产品 - [AnyDAC](http://www.da-soft.com/anydac/)（[更多](http://www.da-soft.com/anydac/docu/Migrating_BDE_applications.html)）。此外，他们没有这样的问题。

# c++ - 带有 size_t 的正确形式（将 -1 作为默认值传递以获得最大尺寸）

> ID：12081736
> 
> 赞同：3
> 
> 时间：2012-08-22T21:34:20.583
> 
> 标签：c++, c, unsigned

我正在尝试向后解析文本文件。我已经完成了解析，现在我试图给我的函数一个限制，这样它就不会读取我的整个 5Mb-2Gb 日志文件。我将此限制作为 size_t 传递，我试图想办法默认限制以读取文件中的所有内容。

由于将 -1 传递给无符号类型将设置最高位，我假设这意味着我获得了 size_t 的最大大小。我想知道，这是不好的形式吗？另外，有没有更好的方法来实现我的目标。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T21:37:15.147

为了获得 a`size_t`可以容纳的最大可能值，请使用[`std::numeric_limits`](http://en.cppreference.com/w/cpp/types/numeric_limits). 这将是最便携的方法：

```
#include <limits>

size_t max_value = std::numeric_limits<size_t>::max(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T21:38:23.660

关于用于获取无符号整数类型的最大大小是否“可以”的问题`-1`，我将[在此处向您推荐此问题/答案](https://stackoverflow.com/questions/809227/is-it-safe-to-use-1-to-set-all-bits-to-true)。

鉴于该答案，您可以使用遵循更好的 C++ 方法的另一个选项是使用`std::numeric_limits<size_t>::max()`.

最后，在 C 语言中，您可以使用描述您正在阅读的数据类型的最大整数值的各种`_MAX`定义之一。`limits.h`例如，对于`size_t`类型，您可以使用`SIZE_MAX`等。

# java - 绝对初学者的 Java 编程中列出的 Java 挑战

> ID：12081737
> 
> 赞同：4
> 
> 时间：2012-08-22T21:34:21.073
> 
> 标签：java, oop, vector, overloading, overriding

这大概是个初级问题。但是，我已经阅读了面向绝对初学者的 Java 编程的第 5 章，并进入了挑战部分。我不太明白这个问题。

问题问：

> “创建一个 Holder 类，以便它维护一个对象列表，可能由字符串表示，您可以使用它的方法添加或从中获取。提示：尝试覆盖 Vector 类。”

我查看了[int [] [] convert --to--> Vector<Vector<Double>>](https://stackoverflow.com/questions/8375420/int-convert-to-vectorvectordouble)页面，并在最后一个响应中看到了一个简单 Vector 的示例，但我仍然难以理解这个问题。

我认为我的主要问题是理解如何覆盖 Holder 类。

这个问题的答案可能有助于许多新的 Java 程序员理解向量和覆盖。

供您参考：
第二个问题指出：

> “创建 Holder 类的子类。发挥你的想象力。考虑一个可以存放食物并保持冷藏的 Refrigerator 类，或者一个存放钱的 Wallet。尝试覆盖 Holder 类中定义的方法。尝试创建一些重载方法.

这是完整的问题，我将在本章中添加一些示例，以便您更好地了解我的问题所在。我不想要编码答案（除非必要），只是用更基本的术语解释这个问题。

这些是本章中提供的示例：这些是我必须纳入我的答案的技巧吗？

简单类定义：

```
public class SimpleCardDeck {
String[] cards = {“2C”, “3C”, “4C”, “5C”, “6C”, “7C”, “8C”,
“9C”, “10C”, “JC”, “QC”, “KC”, “AC”,
“2D”, “3D”, “4D”, “5D”, “6D”, “7D”, “8D”,
“9D”, “10D”, “JD”, “QD”, “KD”, “AD”,
“2H”, “3H”, “4H”, “5H”, “6H”, “7H”, “8H”,
“9H”, “10H”, “JH”, “QH”, “KH”, “AH”,
“2S”, “3S”, “4S”, “5S”, “6S”, “7S”, “8S”,
“9S”, “10S”, “JS”, “QS”, “KS”, “AS”};
public void list() {
for (int c=0; c < cards.length; c++) {
System.out.print(cards[c] + “ “);
}
}
} 
```

创建和测试对象：

```
public class SimpleCardDeckTest {
public static void main(String args[]) {
SimpleCardDeck deck = new SimpleCardDeck();
System.out.println(deck.cards[0]);
System.out.println(deck.cards[10]);
System.out.println(deck.cards[51]);
deck.list();
}
} 
```

一个类的例子：

```
public class Automobile {
public static final String DEFAULT_COLOR = “white”;
public String name;
public boolean running;
public String color;
public int numMiles;
public Automobile() {
this(false, DEFAULT_COLOR, 0);
}
public Automobile(boolean running, String color, int numMiles) {
this.running = running;
this.color = color;
this.numMiles = numMiles;
name = null;
}
public void start() {
if (running) {
System.out.println(“Can’t start, already running.”);
}
else {
running = true;
System.out.println(“The automobile has been started.”);
}
}
public void shutOff() {
if (!running) {
System.out.println(“Can’t shut off, not running.”);
}
else {
running = false;
System.out.println(“The automobile has been shut off.”);
}
}
public String getColor() {
return color;
}
public void setColor(String color) {
this.color = color;
}
public void drive() {
if (running) {
numMiles += 10;
System.out.println(“You have driven 10 miles”);
}
else {
System.out.println(“You need to start the automobile first.”);
}
}
public int getNumMiles() {
return numMiles;
}
public String toString() {
String str;
str = “name = “ + name
+ “, running = “ + running
+ “, color = “ + color
+ “, numMiles = “ + numMiles;
return str;
}
} 
```

类测试示例：

```
public class AutomobileTest {
public static void main(String args[]) {
Automobile auto1 = new Automobile();
System.out.println(“Auto 1: “ + auto1.toString());
Automobile auto2 = new Automobile(true, “green”, 37000);
auto2.name = “INGRID”;
System.out.println(“Auto 2: “ + auto2.toString());
System.out.println(“Driving Auto 1...”);
auto1.drive();
System.out.println(“Driving Auto 2...”);
auto2.drive();
System.out.println(“Starting Auto 1...”);
auto1.start();
System.out.println(“Starting Auto 2...”);
auto2.start();
System.out.println(“Giving Auto 1 a paint job...”);
auto1.setColor(“red”);
System.out.println(“Auto 1 is now “ + auto1.getColor());
System.out.println(“Renaming Auto 1...”);
auto1.name = “CHRISTINE”;
System.out.println(“Auto 1 is named “ + auto1.name);
System.out.println(“Shutting off Auto 2...”);
auto2.shutOff();
System.out.println(“Shutting off Auto 2 AGAIN...”);
auto2.shutOff();
System.out.println(“Auto 1: “ + auto1.toString());
System.out.println(“Auto 2: “ + auto2.toString());
}
} 
```

汽车子类：

```
public class BigTruck extends Automobile {

protected boolean trailer;
public BigTruck() {
this(false, DEFAULT_COLOR, 0);
}
public BigTruck(boolean running, String color, int numMiles) {
super(running, color, numMiles);
trailer = false;
}
public void attachTrailer() {
if (trailer) {
System.out.println(“There is already a trailer attached.”);
}
else {
trailer = true;
System.out.println(“Attached a trailer.”);
}
}
public void detachTrailer() {
if (trailer) {
trailer = false;
System.out.println(“Detached the trailer.”);
}
else {
System.out.println(“There is no trailer attached.”);
}
}
public void haul() {
if (trailer) {
drive();
}
else {
System.out.println(“There is nothing to haul.”);
}
}
public String toString() {
String str = super.toString();
str += “, trailer = “ + trailer;
return str;
}
} 
```

子类测试：

```
public class BigTruckTest {
public static void main(String args[]) {
BigTruck truck = new BigTruck();
System.out.println(truck);
System.out.println(“Starting...”);
truck.start();
System.out.println(“Driving...”);
truck.drive();
System.out.println(“Attaching Trailer...”);
truck.attachTrailer();
System.out.println(“Hauling...”);
truck.haul();
System.out.println(“Detaching trailer...”);
truck.detachTrailer();
System.out.println(“Shutting off...”);
truck.shutOff();
System.out.println(“Painting...”);
truck.setColor(“black”);
System.out.println(truck);
}
} 
```

矢量维克多：

```
import java.util.Vector;
public class VectorVictor {
public static void main(String args[]) {
Vector v = new Vector(5, 5);
System.out.println(“size, capacity”);
System.out.println(v.size() + “, “ + v.capacity());
v.add(new String(“Fuzzy”));
System.out.println(v.size() + “, “ + v.capacity());
v.add(new String(“Wuzzy”));
System.out.println(v.size() + “, “ + v.capacity());
v.add(new String(“was”));
System.out.println(v.size() + “, “ + v.capacity());
v.add(new String(“a”));
System.out.println(v.size() + “, “ + v.capacity());
v.add(new String(“bear”));
System.out.println(v.size() + “, “ + v.capacity());
v.add(new String(“Fuzzy”));
System.out.println(v.size() + “, “ + v.capacity());
v.add(new String(“Wuzzy”));
System.out.println(v.size() + “, “ + v.capacity());
v.add(new String(“had”));
System.out.println(v.size() + “, “ + v.capacity());
v.add(new String(“no”));
System.out.println(v.size() + “, “ + v.capacity());
v.add(new String(“hair”));
System.out.println(v.size() + “, “ + v.capacity());
v.add(new String(“Fuzzy”));
System.out.println(v.size() + “, “ + v.capacity());
v.add(new String(“Wuzzy”));
System.out.println(v.size() + “, “ + v.capacity());
v.add(new String(“wasn’t”));
System.out.println(v.size() + “, “ + v.capacity());
v.add(new String(“fuzzy”));
System.out.println(v.size() + “, “ + v.capacity());
v.add(new String(“was”));
System.out.println(v.size() + “, “ + v.capacity());
v.add(new String(“he”));
System.out.println(v.size() + “, “ + v.capacity());
v.trimToSize();
System.out.println(v.size() + “, “ + v.capacity());
String[] str = new String[v.size()];
v.copyInto(str);
for (int s=0; s < str.length; s++) {
System.out.print(str[s] + “ “);
}
}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T21:56:25.940

因此，鉴于这本书已有 10 多年的历史，我觉得术语可能有点过时了。我怀疑他们希望您将 Vector 类子类化或创建一个类，该类是 Vector 的包装器（即：具有一个 Vector 作为成员的类）。泛型使您的书中使用的 Vector 类变得无关紧要。我相信在 2004 年 Java 中添加了泛型。请参阅：[Java 泛型教程](http://docs.oracle.com/javase/tutorial/java/generics/)

我还强烈建议您选择一本新的 Java 书籍来学习。Java 编程语言自 2002 年以来发生了相当大的变化，学习这种过时的语言版本并没有真正让自己受益。

我强烈建议您查看 Java 教程。它们是介绍一般编程和 Java 语言的绝佳方式：[Java 教程](http://docs.oracle.com/javase/tutorial/index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T21:51:27.883

我认为这个问题的目的是帮助您习惯继承和泛型的概念。同时，“取自”措辞并不是最合适的措辞，这让我认为他们不想强调与 Collections/Containers 相关的问题方面。

问题的第二部分似乎强调了泛型的概念，因为您应该使用实例化的泛型类型（FoodItem，Money）扩展 Holder “合格”

```
 public class Holder<T> extends Vector<T>{

           public addTo(T item){
               super.add(item);
           }

           public takeFrom(T item){
                super.remove(item);
           }
     }

     public class Refrigerator extends Holder<FoodItem>{
     }

     public class Wallet extends Holder<Money>{
     } 
```

# cmd - 在共享文件服务器上运行 pdftk

> ID：12081740
> 
> 赞同：0
> 
> 时间：2012-08-22T21:34:26.357
> 
> 标签：cmd, shared, pdftk, fileserver

我在共享文件服务器上安装了 pdftk，它在服务器本身上运行良好。
是否可以从可以访问文件服务器但本身没有安装 pdftk 的另一台计算机运行 pdftk？

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T23:38:38.703

pdftk doesn't need to be "installed", you just run the binary executable file. If I recall correctly, it does have a dependency on the libgcc library, so this would need to be present somewhere the system can automatically find it (like /windows/system32 on windows, or /lib | /lib64 on linux systems). Then you would just need to make sure the fileserver shares the folder that contains the pdftk binary executable and proper permissions are given.

# node.js - Connect-mongo 会话不会被自动删除

> ID：12081741
> 
> 赞同：13
> 
> 时间：2012-08-22T21:34:30.310
> 
> 标签：node.js, session, mongodb, express, connect

我有一个使用 NodeJS、Express、MongoDB 和 connect-mongo 的应用程序。

我的问题是会话到期时似乎不会自动从 MongoDB 中删除，因此数据库大小会增长直到磁盘已满。

connect-mongo 的开发者[写了一条评论](https://github.com/kcbanner/connect-mongo/issues/27#issuecomment-5133845)：

> connect-mongo 将要求 MongoDB 删除在当前日期之前过期的所有会话。

但这似乎并没有在我的情况下发生。

我的配置是：

```
var express = require('express');
var MongoStore = require('connect-mongo');

var sessionStore = new MongoStore({db: 'myappsession'});

var app = express.createServer();

app.configure(function(){
    app.set('views', __dirname + '/views');
    app.set('view engine', 'ejs');
    app.use(express.bodyParser());
    app.use(express.methodOverride());
    app.use(express.cookieParser());
    app.use(express.session({ secret: "myappsecret", store:sessionStore }));
    app.use(app.router);
    app.use(express.static(__dirname + '/public'));
}); 
```

我目前正在运行以下版本：

*   **节点：** 0.7.0-pre
*   **连接蒙戈：** 0.1.7
*   **快递：** 2.5.2
*   **连接：** 1.8.5

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-23T04:08:54.140

您还没有[`clear_interval`](https://github.com/kcbanner/connect-mongo#options)为您的会话设置 a .. connect-mongo 默认值为 -1（或“从不”）：

> `clear_interval`清除过期会话的时间间隔（可选，默认值：**-1**）。值 <= 0 禁用过期会话清除。

每小时（3600 秒）删除过期会话的示例：

```
var sessionStore = new MongoStore({
     db: 'myappsession',
     clear_interval: 3600
}); 
```

您还应该确保您已将`maxAge`会话设置为实际过期（例如使用 1 天）：

```
app.use(express.session({
    secret: "myappsecret",
    cookie: { maxAge: 24 * 60 * 60 * 1000 },
    store:sessionStore
})); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-09-27T05:22:18.180

我不知道从哪里获取`clear_interval`选项，但我正在查看[最新版本](https://github.com/jdesboeufs/connect-mongo/blob/master/src/index.js)的代码：

```
class MongoStore extends Store {
 constructor(options) {
  options = options || {}

  /* Fallback */
  if (options.fallbackMemory && MemoryStore) {
    return new MemoryStore()
  }

  super(options)

  /* Options */
  this.ttl = options.ttl || 1209600 // 14 days
  this.collectionName = options.collection || 'sessions'
  this.autoRemove = options.autoRemove || 'native'
  this.autoRemoveInterval = options.autoRemoveInterval || 10
  this.transformFunctions = computeTransformFunctions(options, true)

  // ...

setAutoRemoveAsync() {
  const removeQuery = {expires: {$lt: new Date()}}
  switch (this.autoRemove) {
    case 'native':
      return this.collection.createIndex({expires: 1}, {expireAfterSeconds: 0})
    case 'interval':
      this.timer = setInterval(() => this.collection.remove(removeQuery, {w: 0}), this.autoRemoveInterval * 1000 * 60)
      this.timer.unref()
      return Promise.resolve()
    default:
      return Promise.resolve()
  }
} 
```

因此，根据该代码设置自动删除的正确方法似乎是：

```
const store = new MongoStore({
  url: "put db connection string here ...",
  autoRemove: 'interval',     
  autoRemoveInterval: 60 * 24 // In minutes. Default
}) 
```

我没有看到任何`clear_interval`选项的痕迹，所以在我看来，建议的解决方案没有效果......

# php - Restler 没有收到 ñ 字符

> ID：12081756
> 
> 赞同：2
> 
> 时间：2012-08-22T21:35:45.173
> 
> 标签：php, rest, character-encoding, special-characters, restler

我正在使用 Restler 制作 REST 服务，但是我发现当我将`ñ`字符传递给它时，整个参数变为空。

这是因为 REST 还是因为我缺少一些奇怪的编码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T22:10:34.153

虽然我不知道您的情况是否属于这种情况，但通常 HTTP 不是 Unicode 等扩展字符集的安全传输。我发现 base64 是在 REST 客户端和服务器之间传输数据的最佳方式。

# selenium - Selenium Webdriver 操作的日志记录或扩展

> ID：12081760
> 
> 赞同：2
> 
> 时间：2012-08-22T21:35:57.197
> 
> 标签：selenium, webdriver, action, extend, overwrite

有没有办法覆盖或扩展本机 Selenium WebDriver 操作，如“单击”或“发送键”以用于日志记录？因此，在执行常规 click 或 sendKeys 后，将触发以下代码：

```
Logger log = Logger.getLogger(className);
log.setLevel(logLevel);
log.info(strButtonName + " was clicked"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T22:54:41.260

确切的实现将取决于语言，但您应该能够创建一个继承 WebDriver 的类，然后添加扩展方法或重载来执行单击和记录操作。

# c# - 如何使默认 System.Convert （到数字）方法将空字符串识别为零？

> ID：12081763
> 
> 赞同：0
> 
> 时间：2012-08-22T21:36:04.300
> 
> 标签：c#, .net, type-conversion

我有一些解析字符串的代码，当字符串为空时，会引发异常。我想让程序仍然将空字符串转换为零而不修改解析代码。我怎么做？

**UPD：**我知道如果我有几行代码，我应该用 来检查输入字符串`String.IsNullOrEmpty`，但我有将近一百`Convert.ToInt32`行`Convert.ToInt16`，所以我真的很想用其他方式解决这个问题，比如编写扩展方法之类的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T21:44:30.243

我会做类似的事情：

```
Convert.ToInt32(String.IsNullOrEmpty(myStr) ? "0" : myStr) 
```

另一个想法是使用：

```
int res;
Int32.TryParse("", out res); 
```

`TryParse`将失败并返回 false，但是由于必须初始化参数，因此`res`将设置为 0 。`out`

您确实没有太多选择可以避免更改“近百个” `Convert.Int32`. 使用[Steve 的扩展方法技术](https://stackoverflow.com/a/12081890/392044)是相当简单的，但是您必须遍历每个调用并`.EmptyToNumber()`在末尾添加。

您还可以在 Visual Studio 中执行全局*查找和替换*`Convert.ToInt32(`并替换为`SafeConvert.ToInt32(`，然后将静态类实现`SafeConvert`为包装器。这应该是相当安全的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T21:42:45.493

*如果不*更改传入的值`Convert.ToInt32`（或具有观察到的抛出 a 行为的其他转换方法），则无法完成此操作`FormatException`。

如果*只是*导致问题的空字符串，那么三元条件运算符会很方便：

```
int num = !string.IsNullOrEmpty(input)
    ? Convert.ToInt32(input)
    : 0; 
```

（`Convert.ToInt32(null)`实际上将评估为 0 就好了，但我们自己处理这种情况同样有效..）

当然，对于`"foo"`诸如此类的输入值，这仍然会中断..

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-22T21:47:21.730

我能想到的最好的事情是

```
int number = System.Convert.ToInt32("".EmptyToNumber()); 
```

其中 EmptyToNumber 是字符串的扩展方法

```
public static string EmptyToNumber(this string input)
{
    return (string.IsNullOrEmpty(input) ? "0" : input); 
} 
```

但是，这将需要在代码中搜索所有人的 Convert.ToInt32 并将扩展名 EmptyToNumber 添加到作为参数传递的现有字符串中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-22T21:47:22.273

我认为这里正确的做法是应用不同的技术，而不是期望框架为你改变。尝试使用以下代码为字符串实例创建扩展方法。

```
public static class ConversionExtensions
{
    public static int? ToInt32(this string input)
    {
        int value;
        if (!int.TryParse(input, out value) && !string.IsNullOrEmpty(input))
        {
            // this is some weird input that 
            // I may need to handle
            return null;
        }
        return value;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-22T21:39:46.527

```
 String x = "";
    int val =0;

    if(x != String.Empty){

      if(Integer.TryParse(x)){
         val = Convert.ToInt32(x)
       }else{
         ///Exception
      }
    }

     Use val variable here 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-22T21:49:09.357

如果您熟悉 RegEx，则可以执行以下操作

```
public static bool IsNumeric(string text)
{
    return string.IsNullOrEmpty(text) ? false :
            Regex.IsMatch(text, @"^\s*\-?\d+(\.\d+)?\s*$");
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-22T22:02:46.343

感谢 ChaosPandion 的回答（基于他的代码），我想出了如何进行快速检查和转换。它还有助于将代码更改减少到仅从中删除`Convert.`。

这是int的方法：

```
public static Int32 StringToInt32(string str)
{
    if (string.IsNullOrEmpty(str))
        return 0;
    else
        return Convert.ToInt32(str);
} 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-08-22T22:13:10.293

你说字符串为空时抛出异常？所以抓住异常。

```
int myvar = 0;
try {
  myvar = myParseMethod(input); // call your parse method here
}
catch (MyEmptyStringException ex) {
  // Keep going
} 
```

# php - Extjs - 通过 ajax 将特定参数传递给另一个脚本

> ID：12081769
> 
> 赞同：0
> 
> 时间：2012-08-22T21:36:34.003
> 
> 标签：php, ajax, json, extjs

我有一个位于面板中的图表。我想将面板的标题传递给使用 ajax 的 php 脚本。我已经为我的商店使用了 ajax 代理。例如，我想知道面板的标题，以便查询正确的数据。这是我到目前为止所做的。

```
var store = Ext.create('Ext.data.JsonStore', {
    fields: ['project', 'accepted', 'rejected', 'deleted', 'undefined'],
    proxy: {
        type: 'ajax',
        url: 'generate_proj.php',
        extraParams: {foo: this.idname},
        reader: {
            type: 'json'
        }
    },
    autoLoad: true,
    listeners:  { 
        load: function(obj,records) {
            var text = Ext.decode(obj.responseText);
            console.log(this.idname);
            Ext.each(records,function(rec) {});
        }
    }
}); 
```

在我的 php 脚本中，我使用`$value = $_GET['foo'];`.

我确定我很接近，但我找不到任何关于如何更好地利用参数的示例或文档。有什么帮助或想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T21:43:05.120

`extraparams` 应该是`extraParams`，骆驼装的。[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.proxy.Server-cfg-extraParams](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.proxy.Server-cfg-extraParams)尽管他们的文档中有评论说它不起作用。

一种解决方法是监听`beforeload`事件并从那里更改参数[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.AbstractStore-event-beforeload](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.AbstractStore-event-beforeload)

```
listeners:  {
    scope: this 
    beforeload: function(store, operation) {
        operation.params.foo = this.idname;
    }
} 
```

# graph - 关于来自 Graphlabs 的 Graphchi：社区检测示例

> ID：12081773
> 
> 赞同：0
> 
> 时间：2012-08-22T21:36:44.850
> 
> 标签：graph, hadoop, graphchi

如果有人知道 Graphchi 并试图理解 communitydetection.cpp 代码，我需要帮助来理解这段代码在一步一步地做什么：

```
 for(int i=0; i < vertex.num_edges(); i++) {
            bidirectional_label edgelabel = vertex.edge(i)->get_data();
            vid_t nblabel = neighbor_label(edgelabel, vertex.id(), vertex.edge(i)->vertex_id());
            std::map<vid_t, int>::iterator existing = counts.find(nblabel);
            int newcount = 0;
            if(existing == counts.end()) {
                counts.insert(std::pair<vid_t,int>(nblabel, 1));
                newcount = 1;
            } else {
                existing->second++;//map iterator
                newcount = existing->second;
            }
            if (newcount > maxcount || (maxcount == newcount && nblabel > maxlabel)) {
                maxlabel = nblabel;
                maxcount = newcount;
            }
        }
        newlabel = maxlabel;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T22:23:30.703

很公平，我在社区检测示例中添加了代码注释： [http ://code.google.com/p/graphchi/source/browse/example_apps/communitydetection.cpp](http://code.google.com/p/graphchi/source/browse/example_apps/communitydetection.cpp)

```
 /* The basic idea is to find the label that is most popular among
           this vertex's neighbors. This label will be chosen as the new label
           of this vertex. */
        // This part could be optimized: STL map is quite slow.
        std::map<vid_t, int> counts;
        int maxcount=0;
        vid_t maxlabel=0;
        /* Iterate over all the edges */
        for(int i=0; i < vertex.num_edges(); i++) {
            /* Extract neighbor's current label. The edge contains the labels of
               both vertices it connects, so we need to use the right one. 
               (See comment for bidirectional_label above) */
            bidirectional_label edgelabel = vertex.edge(i)->get_data();
            vid_t nblabel = neighbor_label(edgelabel, vertex.id(), vertex.edge(i)->vertex_id());

            /* Check if this label (nblabel) has been encountered before ... */
            std::map<vid_t, int>::iterator existing = counts.find(nblabel);
            int newcount = 0;
            if(existing == counts.end()) {
                /* ... if not, we add this label with count of one to the map */
                counts.insert(std::pair<vid_t,int>(nblabel, 1));
                newcount = 1;
            } else {
                /* ... if yes, we increment the counter for this label by 1 */
                existing->second++;
                newcount = existing->second;
            }

            /* Finally, we keep track of the most frequent label */
            if (newcount > maxcount || (maxcount == newcount && nblabel > maxlabel)) {
                maxlabel = nblabel;
                maxcount = newcount;
            }
        } 
```

# python - 套接字接收“无”：无限循环

> ID：12081776
> 
> 赞同：3
> 
> 时间：2012-08-22T21:36:54.940
> 
> 标签：python, sockets, infinite-loop

我正在开发一个 IRC-bot 作为一个小的 Python 项目。该机器人运行良好，但无法长时间保持连接。过了一会儿，它只是将空行打印到终端然后 ping 出去（因为它无法处理来自服务器的 PING）。

这段代码处理接收部分：

```
def listen(channel):
    while True:
        data = conn.recv(4096)
        print data
        if data != '':
            if data.split()[0] == 'PING':
                process the data 
```

过了一会儿，机器人只是在终端上打印白线，我不知道为什么。

完整代码可在 Github 上找到：[https ://github.com/Silox/Python-IRC-bot/blob/master/bot.py#L101](https://github.com/Silox/Python-IRC-bot/blob/master/bot.py#L101)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T21:53:16.097

[从这里](http://docs.python.org/howto/sockets.html#socket-howto)引用：

> 当 a`recv`返回 0 字节时，表示对方已关闭（或正在关闭）连接。您将不会在此连接上收到更多数据。曾经。

服务器已经关闭了你的连接，可能是由于你没有回复它的 ping 导致的超时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T22:10:05.617

IRC 消息是否总是适合/填充 4K 边界？如果没有，那么您可能错过了 ping，因为它在两次调用`recv()`. 您需要收集返回的数据`recv()`，然后查找协议定义的消息边界。如果您不这样做，那么当消息与您选择的 4K 缓冲区不一致时，您将无法正确处理它们并且可能会丢失消息。这可能是您首先失去连接的原因。（我不知道 IRC，但这是一般原则）

# html - ie中的输入/按钮问题

> ID：12081781
> 
> 赞同：0
> 
> 时间：2012-08-22T21:37:27.860
> 
> 标签：html, css, internet-explorer, cross-browser

由于某种原因，我的搜索框在 ie 中没有正确显示。搜索框根本不可见，按钮位于不应该出现的角落。这是我的 HTML：

```
<div class="searchbox">
<form action="?" method="get">
    <input type="text" placeholder="Search Modern Spaces" />
    <button type="submit" value="submit" />
 </form>
</div><!--searchBoxOne--> 
```

和CSS：

```
.searchbox input {
color: #b0b0b0;
width: 430px;
height: 28px;
margin-top: 32px;
padding: 10px 5px;
float: left;    
font-size: 20px;
border: 0;
border-radius: 4px 4px 4px 4px; 
box-shadow: inset 0 0 6px #7b7a7a;     
}

.searchbox button{
overflow: visible;
position: relative;
margin: 39px 0 0 -40px;
border: 0;
padding: 0;
cursor: pointer;
height: 40px;
width: 36px;
background:url(../images/srch_button.png) no-repeat;

} 
```

关于如何解决这个问题的任何想法？我感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T21:43:24.457

像这样试试

```
<div class="searchbox">
<form action="?" method="get">
<input type="text" placeholder="Search Modern Spaces" />
<button>Submit</button>
</form>
</div><!--searchBoxOne--> 
```

或者旧的方式而不是`<button type="submit" value="submit" />`插入这个

```
<input type='submit' value='submit' /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T21:46:43.103

[`box-shadow`](http://caniuse.com/#feat=css-boxshadow)仅在 IE9+ 上受支持。如果您使用的是 IE < 9，`box-shadow`则忽略，因此文本框不可见，因为它的边框为 0。

# php - 重定向 Header() 替代品

> ID：12081782
> 
> 赞同：-3
> 
> 时间：2012-08-22T21:37:28.913
> 
> 标签：php, header

> **可能重复：**
> [PHP 已发送的标头](https://stackoverflow.com/questions/8028957/headers-already-sent-by-php)

我有一个显示下拉菜单的 php 网页

下拉菜单提供了后端脚本的链接，该脚本将运行查询并设置一些会话变量。然后它重定向到结果页面

```
header('Location: search_results.php'); 
```

重定向因“无法修改标头信息 - 标头已发送”而终止

试图找出解决这个问题的方法。“修改标头”错误是当前运行的 PHP 脚本中始终存在的本地错误？还是一般来说是整个会议？

谢谢，JM

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T21:39:46.153

确保您没有在该行之前输出任何内容（例如空格或其他输出）。

一个简单的方法是打开输出缓冲区：

```
ob_start(); 
```

并在适当的时候清除它：

```
ob_end_clear();  // erases output buffer
// or 
ob_end_flush();  // sends output buffer to screen 
```

但是，正确的解决方案是检查您的代码并确保没有杂散的输出语句。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T21:39:46.107

如果不查看您的代码，我会冒险猜测您在`header`PHP 代码之前有 HTML。标头需要在 HTML 之前进行解析。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T21:39:57.903

`ob_start()`您可以通过在 PHP 脚本的开头发出一个来尝试使用输出缓冲。

`<?php`这个错误的一个常见原因是在起始标签之前有一个空格（有时是一个 BOM） ；标头检查是本地的，它不是会话范围的。另一方面，它*受到*其他包含的 PHP 文件的影响，因此您也必须检查它们。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-22T21:39:57.840

您可以使用元重定向

```
<meta http-equiv="refresh" content="2;url=http://google.com/"> 
```

以上会在 2 秒内刷新页面到[http://google.com/](http://google.com/) 然后 javascript 重定向

```
<script type='text/javascript'>
document.location.href='http://google.com';
</script> 
```

# xcode - com.apple.iokit.CHUDKernLib 内核恐慌修复

> ID：12081784
> 
> 赞同：4
> 
> 时间：2012-08-22T21:37:39.927
> 
> 标签：xcode, osx-lion

com.apple.iokit.CHUDKernLib 似乎引起了恐慌。每次我启动时都会发生恐慌。我只能在安全模式下启动。帮助！我已经为 Xcode 3.2 完成了卸载命令，但它没有卸载。它显然与 CHUD kext 有关。我目前正在度假，因此无法将其带到 Apple 商店。
它是安装了山狮的 2012 15 MBP。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-23T00:46:39.690

固定的！首先我只想说，在这个维修教程的过程中你的机器可能发生的任何事情都不是我的责任。现在我们已经弄清楚了，让我们开始教程吧！行。让我们开始解释为什么安装 Xcode 3.2.5 会在启动时导致内核崩溃。Xcode 安装了多个组件，例如 CHUD kexts 和各种其他 kexts，以使系统能够进行更多系统通信（据我所知），因此 iPhone Simulator 之类的东西可以正常运行。但是这些 kexts（据我所知）是 32 位的。我怎么知道这个？好吧，他们在具有 32 位和 64 位内核的 Lion 上工作，这允许 Xcode 3.2.5 在 Lion 上工作。

现在我们已经结束了，让我们开始吧！1.首先在做任何事情之前尝试启动Mac上的恢复分区并使用磁盘工具通过按住alt并启动恢复来修复权限。如果做不到这一点，请按照以下步骤操作。

1.  不要担心您的数据是安全的。重新启动您的 Mac 并在铃声响起后按住 shift 键。

2.  现在您应该处于安全模式。登录并下载[此](http://mac.softpedia.com/get/Developer-Tools/Apple-CHUD-Tools.shtml)文件。这是做什么的？删除 Xcode 3.2.5 安装的所有导致内核崩溃的 CHUD 组件。

3.  下载后，双击 dmg 文件，然后您应该会看到一个名为 Utilities 的文件夹，单击该文件夹并双击 CHUD Remover 并让它完成它的工作。

4.  几秒钟后，它会通知你它已经完成了它最擅长的事情，删除了 CHUD。

5.  此时，您可以重新启动以查看您的内核恐慌已更改为有关 AppleProfileFamily 的内容。这是另一个安装了 Xcode 的 Kext，它弄乱了你的安装。要删除它并解决问题，请启动终端并输入此命令（如果在此之后出现问题，我不对任何问题承担任何责任） sudo rm /System/Library/Extensions/AppleProfileFamily.kext

6.  输入您的密码并按回车键。

7.  现在您可以重新启动到正常工作的 Mountain Lion 安装！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-22T22:37:42.427

作为旁注，您可以通过不在 XCode 3 中安装“系统工具”来完全避免此问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-05-09T18:03:13.770

James Heald 在接受的答案中链接到的*此文件*当前链接到 softpedia.com 页面，其*下载*链接似乎不再有效。还有很多链接可以尝试让您下载 MacKeeper :))

相反，在以安全模式启动后（按下 shift 键），我从以下位置删除了 Xcode 3 安装程序明显安装的以下四个文件`/System/Library/Extensions`：

`AppleProfileFamily.kext` `CHUDProf.kext` `CHUDKernLib.kext` `CHUDUtils.kext`

然后我正常重新启动，我似乎又恢复了业务。（我提到这四个文件的原因是内核恐慌报告说它是在加载其中一个时发生的，而另外三个的修改日期完全相同，在 2010 年，这些是迄今为止最旧的文件`/System/Library/Extensions`。）

# apache2 - 使用 WSGI 和 Apache 运行时 Python 的工作目录

> ID：12081789
> 
> 赞同：9
> 
> 时间：2012-08-22T21:38:18.437
> 
> 标签：apache2, mod-wsgi

我有一个 Web 应用程序，除其他外，它将查询数据库并使用数据创建 Excel 电子表格。在将文件发送到客户端计算机之前，我需要将电子表格保存到服务器的磁盘。我正在使用 Flask 框架和 openpyxl 来生成电子表格。在 Flask 的开发服务器上运行时一切正常，但真正的服务器是带有 WSGI 的 Apache2。当我在那里运行它时，它会在尝试保存电子表格时引发“权限被拒绝”错误。我不知道在 Apache/WSGI 中运行时 Python 的工作目录是什么。

有没有办法，也许在 WSGI 配置文件中，改变工作目录，或者以某种方式控制它将保存到哪里？如果可能的话，我想使用相对路径进行保存（它使代码更便携），这就是为什么更改工作目录是最好的解决方案。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-23T01:12:55.003

您不应该更改工作目录。

采用：

```
import os
here = os.path.dirname(__file__) 
```

然后该变量`here`将包含该代码文件所在的目录。然后，您可以为与之相关的事物构建绝对路径。

```
database = os.path.join(here, 'database.db') 
```

请注意，您的代码在 Apache 中运行的用户仍需要对该目录的读/写访问权限。

与往常一样，请确保您阅读了文档。文档的相关部分是：

*   [应用程序工作目录](https://modwsgi.readthedocs.io/en/develop/user-guides/application-issues.html#application-working-directory)
*   [Apache用户的访问权限](https://modwsgi.readthedocs.io/en/develop/user-guides/application-issues.html#access-rights-of-apache-user)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-04-20T17:05:41.013

我有一个类似的问题，我想将 glob() 与相对路径一起使用。它在我的开发环境中有效，但在带有 mod_wsgi 的服务器上无效。我在[这里](https://modwsgi.readthedocs.io/en/develop/configuration-directives/WSGIDaemonProcess.html)发现有一个 'home=' 选项，您可以将其添加到 WSGIDaemonProcess 指令中以设置应用程序的初始工作目录。您可以在虚拟主机文件中找到它（在我的系统上的 /etc/apache2/sites-available/mysite.conf 中）

# vba - VB控制键盘

> ID：12081792
> 
> 赞同：-1
> 
> 时间：2012-08-22T21:38:52.763
> 
> 标签：vba

我正在寻找一个 VB 脚本来发送以下键盘命令：

Ctrl+w

如果有人可以帮助我，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T21:44:15.440

看一下 SendKeys 函数：

```
SendKeys "^w", True ' ^ indicates holding 'Ctrl', second parameter is 'Wait' 
```

更多资源：

[在 VBA shell 命令中使用 AppActivate 和 Sendkeys](https://stackoverflow.com/questions/4675281/using-appactivate-and-sendkeys-in-vba-shell-command)

[http://msdn.microsoft.com/en-us/library/office/aa202943%28v=office.10%29.aspx](http://msdn.microsoft.com/en-us/library/office/aa202943%28v=office.10%29.aspx)

[http://www.tek-tips.com/faqs.cfm?fid=5037](http://www.tek-tips.com/faqs.cfm?fid=5037)

# cocoa - 在 Mountain Lion 中重新启动我的 Cocoa 应用程序会导致奇怪的 NSScrollView 和 NSTableView 行为

> ID：12081795
> 
> 赞同：0
> 
> 时间：2012-08-22T21:39:20.453
> 
> 标签：cocoa, osx-mountain-lion, nsscrollview

我的 Mountain Lion 应用程序包含一个 NSScrollView 和一个使用 NSTableViewCell 的 NSTableView。我希望 ScrollView 具有圆角，例如提醒。我在这里找到了一个说要使用的答案：

```
[listScrollView setWantsLayer:YES];
[listScrollView.layer setCornerRadius:10.0f]; 
```

当我第一次启动应用程序时，一切正常。我向下滚动列表以查看底部的项目并退出应用程序。当我重新启动应用程序时，列表顶部会向下移动以匹配滚动条的顶部，它会记住我退出时滚动到的位置。但是，滚动或调整窗口大小会导致列表正确绘制。如果我单击其中一个列表项，它会选择应该在该位置的项。

[这是退出前的列表底部](http://imgur.com/ooceS)

[这是重新启动应用程序后显示的内容](http://imgur.com/tHMWW)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T23:29:59.767

我发现了问题，或者至少如何避免这种奇怪的行为。

奇怪的行为是在部分向下滚动 TableView 的项目然后立即重新启动后退出 Cocoa 应用程序后在 NSScrollView 中查看 NSTableView 的行。Mountain Lion 记住了应用程序部分向下滚动的状态，并开始在从列表顶部向下滑动的滚动旋钮顶部绘制 TableView 的行。

问题是我在哪里设置要显示的 ScrollView 层，我用它来为滚动视图创建圆角。

我最初是使用名为 listScrollView 的 IBOUTLET 在 Document 的 windowControllerDidLoadNib 方法中设置 ScrollView 的层。

我将该代码移到 ScrollView 的 drawRect 方法中：

```
if (!self.wantsLayer) {
    [self setWantsLayer:YES];
    [self.layer setCornerRadius:10.0f];
} 
```

Viola，ScrollView 现在有圆角，它夹住了 ScrollView 的角和滚动旋钮插槽以及 ScrollView 顶部和底部的 TableView 的行角。

# jquery - jQuery Mobile + Phonegap 登录页面

> ID：12081798
> 
> 赞同：2
> 
> 时间：2012-08-22T21:39:33.980
> 
> 标签：jquery, sqlite, jquery-mobile, cordova, login

我正在创建一个使用 Jquery Mobile 和 Phonegap 的 Android 应用程序。我正在处理一个包含几个字段的登录页面。人们通常如何在 Phonegap + Jquery Mobile 应用程序中验证用户信息？他们使用 sqlite、localstorage 吗？我似乎找不到任何将 sqlite 与 phonegap 应用程序一起使用的登录页面示例。我尝试使用 phonegap 存储页面上的示例，但我还是有点迷茫。你们能不能给我一个起点或指导我到一个资源，该资源向我展示了如何在 PhoneGap + JQuery Mobile 应用程序中创建身份验证登录页面？这甚至是为移动网络应用程序创建登录页面的正确方法吗？先感谢您。

# php - 使用 simplepie 链接推文

> ID：12081807
> 
> 赞同：0
> 
> 时间：2012-08-22T21:40:00.167
> 
> 标签：php, twitter, hyperlink, simplepie, linkify

我正在尝试使某些推文中包含的链接在我的推特小部件上工作，例如，当我推特一张图片并且推特将其变成一个短链接时。这是代码...提前感谢您的帮助！

```
if ( !function_exists( 'wp_echo_twitter' ) ) {
    function wp_echo_twitter($username) {
        include_once( ABSPATH . WPINC . '/class-simplepie.php' );

        // Fetch feed, set cache locaiton, and initialize function
        $feed = new SimplePie();
        $feed->set_feed_url("http://twitter.com/statuses/user_timeline/$username.atom?count=200");
        $feed->set_cache_location( ABSPATH . WPINC );
        $feed->init();
        $feed->handle_content_type();

        // Output tweet
        foreach ($feed->get_items(0, 1) as $item):
            echo '<p class="hero-p" style="margin-bottom: 9px;">"' . $item->get_description() . '"</p>' . '<span><a href="' . $item->get_permalink() . '">' . $item->get_date('D, M j, Y') . '</a></span>';
        endforeach;

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T20:21:17.243

```
require_once('simplepie.inc');
$cache = "/cache";
$duration = 3600;

// turn urls, hashtags and @replies into links
function twitterify($ret) {
$ret = preg_replace("#(^|[\n ])([\w]+?://[\w]+[^ \"\n\r\t< ]*)#", "\\1<a target=\"_new\" href=\"\\2\" >\\2</a>", $ret);
$ret = preg_replace("#(^|[\n ])((www|ftp)\.[^ \"\t\n\r< ]*)#", "\\1<a target=\"_new\" href=\"http://\\2\" >\\2</a>", $ret);
$ret = preg_replace("/@(\w+)/", "<a target=\"_new\" href=\"http://www.twitter.com/\\1\" >@\\1</a>", $ret);
$ret = preg_replace("/#(\w+)/", "<a target=\"_new\" href=\"http://search.twitter.com/search?q=\\1\" >#\\1</a>", $ret);
return $ret;
}

//  make the time twittery
function niceTime($time) {
$delta = time() - $time;
if ($delta < 60) {
return 'less than a minute ago.';
} else if ($delta < 120) {
return 'about a minute ago.';
} else if ($delta < (45 * 60)) {
return floor($delta / 60) . ' minutes ago.';
} else if ($delta < (90 * 60)) {
return 'about an hour ago.';
} else if ($delta < (24 * 60 * 60)) {
return 'about ' . floor($delta / 3600) . ' hours ago.';
} else if ($delta < (48 * 60 * 60)) {
return '1 day ago.';
} else {
return floor($delta / 86400) . ' days ago.';
}
}

function getLastTweet($username){
$twitter = new SimplePie("http://twitter.com/statuses/user_timeline/$username.rss", $cache, $duration);
foreach ($twitter->get_items(0,1) as $item) :
$pubDate = $item->get_item_tags('','pubDate');
$data = $pubDate[0]['data'];
$time = niceTime(strtotime(str_replace("+0000", "", $data)));

echo "<p>"; 
echo twitterify(str_replace("$username: ", "", $item->get_title()));
echo "<span>$time</span>"; 
echo "</p>";
endforeach;
}
// show tweet
getLastTweet("twitterusername"); 
```

# c - fbounds 检查不起作用，有什么替代品吗？

> ID：12081809
> 
> 赞同：0
> 
> 时间：2012-08-22T21:40:08.000
> 
> 标签：c, makefile, bounds-checker

我试图让 fbounds 检查工作，但我没有成功。我收到以下错误：

> /tmp/cczxKZzn.s：汇编程序消息：
> 
> /tmp/cczxKZzn.s:48：错误：“push”的指令后缀无效
> 
> /tmp/cc9xD8T3.s:125：错误：“pop”的指令后缀无效

虽然我的makefile看起来像这样（使用简单的makefile，一切都在正确编译）：

```
all: error check

error: error.c
    /usr/local/gcc-4.0.2/bin/gcc -fbounds-checking -g -Wall -pedantic $< -o $@

.PHONY: clean check

clean:
    -rm error

check:  error
    ./error 
```

由于该代码与汇编程序无关，我不知道该怎么做。汇编器问题是我在谷歌搜索该主题时唯一能看到的问题。

* * *

您能否提出其他解决方案，例如检查是否位于数组之外？如（这是我的error.c）：

```
#include <stdio.h>
#include <stdlib.h>
int main()
{
  int a[1][10];
  a[0][11]=42;
  return 0;
} 
```

* * *

编辑。会不会是版本不兼容？已安装 gcc 4.4+ 并且我正在使用经过一点修改的 gcc 4.0.2 的路径来执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T21:48:15.643

> 由于该代码与汇编程序无关，我不知道该怎么做。汇编器问题是我在谷歌搜索该主题时唯一能看到的问题。

看起来你调用了错误的汇编器——一个 32 位的，试图编译一个 64 位的目标代码。检查您的路径和标志。

**更新**：我从来没有研究过 gcc 是如何调用它的组件的。我还不是很清楚。无论如何，它看起来不像我相信的那样依赖于 PATH，而是依赖于它的 ./configure 设置（--prefix、--build 等等）。

我的， `--prefix=/usr`--build=x86_64-suse-linux, --program-suffix=-4.6 `, looks for its components in (with respect to the directory where the`gcc` 二进制文件驻留在： - ../lib64/gcc/x86_64-suse-linux/4.6 - ../lib64/gcc/ - ../lib64/gcc/x86_64-suse-linux/4.6/../../../../x86_64-suse-linux/bin/x86_64-suse-linux/4.6/ - ../lib64/ gcc/x86_64-suse-linux/4.6/../../../../x86_64-suse-linux/bin/

（检查`strace`）。

如果其中一个目录中存在来自另一个 gcc 的二进制文件，它将被调用而不是“正确”的那个。

尝试用`gcc -v`（或用`strace`）检查哪个`as`正在运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-22T11:39:30.993

如果有人仍然需要用这个古老的 gcc 版本运行边界检查：你能做的最好的就是告诉它把相关的参数传递给汇编器`-Wa,--32`，所以你需要这个：

```
error: error.c
    /usr/local/gcc-4.0.2/bin/gcc -fbounds-checking -Wa,--32 -g -Wall -pedantic $< -o $@ 
```

背景信息：您的古老 gcc 生成 32 位程序集，而您的现代汇编程序默认为 64 位。对于大多数指令来说这不是问题，因为通常 32 位寄存器操作在 64 位模式下，推送和弹出是例外：它们不支持 64 位模式下的 32 位操作数。

# css - 仅对 box-shadow Inset 底部有问题

> ID：12081814
> 
> 赞同：60
> 
> 时间：2012-08-22T21:40:43.083
> 
> 标签：css

我正在使用 box-shadow 来创建内部阴影...

```
box-shadow: inset 0 0 10px #000000;
-moz-box-shadow:    inset 0 0 10px #000000;
-webkit-box-shadow: inset 0 0 10px #000000; 
```

...但希望内部阴影仅从底部进入。我已经尝试了几种方法来尝试完成这项工作，但不能......我将如何使用 box-shadow 做到这一点？

* * *

## 回答 #1

> 赞同：147
> 
> 时间：2012-08-22T22:01:05.190

对定义展开距离的第四个长度使用负值。这经常被忽略，但所有主要浏览器都支持。有关结果，请参[见此 Fiddle](http://jsfiddle.net/acjbizar/rM5tB/1194/)。

```
div {
  background: red;
  height: 100px;
  width: 200px;
  -moz-box-shadow: inset 0 -10px 10px -10px #000000;
  -webkit-box-shadow: inset 0 -10px 10px -10px #000000;
  box-shadow: inset 0 -10px 10px -10px #000000;
}
```

```
<div></div>
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2015-05-25T18:24:20.153

[JSnippet DEMO](https://www.jsnippet.net/snippet/246/boxshadow-Inset-one-side-only)

**仅在顶部：**

```
-moz-box-shadow:    inset  0  10px 10px -10px grey;
-webkit-box-shadow: inset  0  10px 10px -10px grey;
 box-shadow:        inset  0  10px 10px -10px grey; 
```

**仅在底部：**

```
-moz-box-shadow:    inset  0 -10px 10px -10px grey;
-webkit-box-shadow: inset  0 -10px 10px -10px grey;
 box-shadow:        inset  0 -10px 10px -10px grey; 
```

**仅在顶部和底部：**

```
-moz-box-shadow:    inset  0  10px 10px -10px grey, 
                    inset  0 -10px 10px -10px grey;
-webkit-box-shadow: inset  0  10px 10px -10px grey, 
                    inset  0 -10px 10px -10px grey;
 box-shadow:        inset  0  10px 10px -10px grey, 
                    inset  0 -10px 10px -10px grey; 
```

**快速示例**

```
.shadow-top {
    -moz-box-shadow:    inset  0  10px 10px -10px grey;
    -webkit-box-shadow: inset  0  10px 10px -10px grey;
     box-shadow:        inset  0  10px 10px -10px grey;
}
.shadow-bottom {
    -moz-box-shadow:    inset  0 -10px 10px -10px grey;
    -webkit-box-shadow: inset  0 -10px 10px -10px grey;
     box-shadow:        inset  0 -10px 10px -10px grey;
}
.shadow-top-bottom {
    -moz-box-shadow:    inset  0  10px 10px -10px grey, 
                        inset  0 -10px 10px -10px grey;
    -webkit-box-shadow: inset  0  10px 10px -10px grey, 
                        inset  0 -10px 10px -10px grey;
     box-shadow:        inset  0  10px 10px -10px grey, 
                        inset  0 -10px 10px -10px grey;
}

div { display:inline-block; margin-right:15px; width:150px; height:100px; background:yellow; }
```

```
<div class='shadow-top'></div>
<div class='shadow-bottom'></div>
<div class='shadow-top-bottom'></div>
```

# google-drive-api - 在 Google Drive SDK 上调用 showSettingsDialog() 会引发拒绝显示文档，因为 X-Frame-Options 禁止显示

> ID：12081816
> 
> 赞同：2
> 
> 时间：2012-08-22T21:40:54.107
> 
> 标签：google-drive-api

我正在尝试通过 Javascript 将我的 Google Drive 应用程序中的文件共享给 Google Plus。

我遵循了此页面上的示例代码：[https ://developers.google.com/drive/manage-sharing#add_the_dialog_script](https://developers.google.com/drive/manage-sharing#add_the_dialog_script)

我将我的应用程序注册到 Google Drive SDK，我使用网站管理员工具验证了我的应用程序的 URL（不确定是否有必要，但以防万一）并在页面加载后放置此代码：

```
 var clientId = 'GOOGLE DRIVE SDK CLIENT ID';
  var apiKey = 'MY API KEY';

  var scopes = ['https://www.googleapis.com/auth/drive.readonly'];

  var access_token = ''; // Set after access is granted

  var share_client; // Set after access is grated

  function handleClientLoad() {
    gapi.client.setApiKey(apiKey);
    window.setTimeout(checkAuth,1);
  }

  function checkAuth() {
    gapi.auth.authorize({client_id: clientId, scope: scopes, immediate: true}, handleAuthResult);
  }

  function handleAuthResult(authResult) {
    if (authResult && !authResult.error) {
      init = function() {
          share_client = new gapi.drive.share.ShareClient('756276963659');
      }
      gapi.load('drive-share', init);
    } else {
        console.log("error"); 
    }
  }

  function handleAuthClick(event) {
    gapi.auth.authorize({client_id: clientId, scope: scopes, immediate: false}, handleAuthResult);
  } 
```

一个按钮调用handleAuthClick，而handleClientLoad在页面加载时被调用：

```
 <script src="https://apis.google.com/js/client.js?onload=handleClientLoad"></script> 
```

然后分享一个项目：

```
 if (isShareEnabled()){
    share_client.setItemIds([image.fileID]);
    share_client.showSettingsDialog();
  } 
```

这时会出现一个窗口，其中显示文本“正在加载...”，并且旋转图标会在屏幕上停留几秒钟，然后出现警告消息“抱歉，此时无法共享。请稍后再试。” 出现。

通过查看 Javascript 控制台：

```
Uncaught Error: SYNTAX_ERR: DOM Exception 12 2956664786-v2-doclist_share.js:453
Refused to display document because display forbidden by X-Frame-Options. 
```

在 Chrome 21 和 Firefox 14 上测试，同样的问题。

这只是一个暂时的问题还是我做错了什么？

编辑：我还尝试将我的客户端 ID 用于 Web 应用程序，而不是使用 Google Drive SDK 的客户端 ID，结果相同。

edit2：“拒绝显示文档，因为 X-Frame-Options 禁止显示”似乎更像是一个警告，而“未捕获错误：SYNTAX_ERR：DOM 异常 12 2956664786-v2-doclist_share.js:453”停止执行。DOM Exception 12 是语法错误，例如属性设置错误。

页面： http: [//pierotofy.it/test/](http://pierotofy.it/test/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T00:48:51.317

你需要确保两件事：

*   您在 Google API 控制台的 Google Drive SDK 设置中设置的“打开方式”URL 必须与您使用共享对话框的页面具有相同的域。
*   目前，您还需要将您的应用程序*安装*在您的 Google Drive 上，以使可嵌入的小部件工作。我们目前正在努力消除此限制，因为自从我们推出了 API 的 v2 以来，它并不总是有意义的。

# perl - Perl - “下一个”和“继续”之间的区别？

> ID：12081818
> 
> 赞同：26
> 
> 时间：2012-08-22T21:41:26.927
> 
> 标签：perl, loops

`next`快速 Perl 问题：当通过一个循环（比如一个 while 循环）时，a和`continue`command有什么区别？我认为两者都只是跳到循环的下一次迭代。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-22T21:46:36.143

`continue`关键字可以在循环**块**之后*使用*。块中的代码在下一次迭代之前执行（在评估循环条件之前）。它不影响控制流。**`continue`**

 **```
my $i = 0;
when (1) {
  print $i, "\n";
}
continue {
  if ($i < 10) {
    $i++;
  } else {
    last;
  }
} 
```

几乎相当于

```
foreach my $i (0 .. 10){
  print $i, "\n";
} 
```

该关键字在Perl 的-构造`continue`中还有另一个含义- 。在一个块被执行之后，Perl 会自动执行s，因为大多数程序都是这样做的。如果您想进入*下*一个案例，则必须使用。在这里，修改控制流。`given``when``switch``case``when``break`*`continue``continue`*

 *```
given ("abc") {
  when (/z/) {
    print qq{Found a "z"\n};
    continue;
  }
  when (/a/) {
    print qq{Found a "a"\n};
    continue;
  }
  when (/b/) {
    print qq{Found a "b"\n};
    continue;
  }
} 
```

将打印

```
Found a "a"
Found a "b" 
```

该`next`关键字仅在循环中可用并导致新的迭代，包括。重新评估循环条件。`redo`跳转到循环块的开头。不评估循环条件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-03-11T08:16:10.323

执行下*一个*语句将跳过执行循环中该特定迭代的其余语句。

*continue*块中的语句将为每次迭代执行，而不管循环是否照常执行，或者循环是否需要通过遇到*下一个*语句来终止特定的迭代。*没有continue*块的示例：

```
my $x=0;
while($x<10)
{
    if($x%2==0)
    {
        $x++; #incrementing x for next loop when the condition inside the if is satisfied.
        next;
    }
    print($x."\n");
    $x++;  # incrementing x for the next loop 
} 
```

在上面的示例中，x 的增量需要写入 2 次。但是如果我们使用 continue 语句，它可以保存需要一直执行的语句，我们可以在 continue 循环内只增加一次 x。

```
my $x=0;
while($x<10)
{
    if($x%2==0)
    {
        next;
    }
    print($x."\n");
}
continue
{
        $x++;
} 
```

两种情况下的输出都是 1,3,5,7,9***

# jpa - JPA 两个实体使用相同的@JoinTable

> ID：12081825
> 
> 赞同：0
> 
> 时间：2012-08-22T21:41:52.670
> 
> 标签：jpa

我有用户有角色，用户有一个组，它也可以有角色。我需要一种简单的方法来获取用户直接或间接拥有的所有角色。

我正在考虑这样的事情：

```
@Entity
@Table(name = "USER")
public class User{
@Id
private Integer id;
@OneToMany
@JoinTable(name = "USER_ROLES", joinColumns = @JoinColumn(name = "USER_ID"), 
inverseJoinColumns = @JoinColumn(name = "ROLE_ID")   )
private List<Roles> roles;
@ManyToOne
private List<Group> group;
}

@Entity
@Table(name = "GROUP")
public class Group{
@Id
private Integer id;
@OneToMany
@JoinTable(name = "USER_ROLES", joinColumns = @JoinColumn(name = "GROUP_ID"), 
inverseJoinColumns = @JoinColumn(name = "ROLE_ID")   )
private List<Roles> roles;
}

@Entity
@Table(name = "ROLE")
public class Role{
@Id
private Integer id;
@Column
private String name;
} 
```

...但是这样我需要两个步骤：首先我可以获得直接角色，然后是间接角色，我需要合并两个集合。有没有更简单或更方便的方法来做到这一点？

从 SQL 可以很容易地做到这一点：

```
USER      USER_ROLES  ROLE
----      ----------  ----
ID        USER_ID     ID
GROUP_ID  GROUP_ID    NAME
          ROLE_ID

SELECT *
FROM   USER u
JOIN   USER_ROLES u_r ON (u.ID = u_r.USER_ID)
JOIN   USER_ROLES g_r (u.GROUP_ID = u_r.GROUP_ID); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T09:30:55.083

这通常是一个坏主意。

*   如果 a与 a`User`具有相同的 id，`Group`则会发生冲突。
*   您不能在数据库中使用外键约束。
*   其他奇怪的事情最终会发生。
*   在 JPA 中实现这一点很困难，而且很容易出错。

`Role`在and `Group`、`Role`and`User`和`Group`and之间使用单独的表格`User`。

# spring - 使用不同类加载器的多个 Spring 应用程序上下文？

> ID：12081836
> 
> 赞同：3
> 
> 时间：2012-08-22T21:42:35.790
> 
> 标签：spring, aspectj

人们通常希望多个 Web 应用程序共享对单个应用程序上下文的访问。[例如这里](http://springtips.blogspot.com/2007/06/using-shared-parent-application-context.html)描述了如何做到这一点。

这个问题正好相反：在单个 Web 应用程序中拥有多个应用程序上下文。通常这很容易，您只需创建并使用它们。

但是，在某些情况下，Spring 方面的静态变量是不可能的，例如：

*   您有两个应用程序上下文 X 和 Y，它们都创建了一个`MyBean`具有`@Transactional`注释的
*   X 和 Y 都包含自己的事务管理器
*   X 和 Y 都有`<tx:annotation-driven mode="aspectj"/>`声明
*   您正在构建时 AspectJ 编织

在这种情况下，问题在于`<tx:annotation-driven mode="aspectj"/>`实际上转换为这样的bean：

```
<bean class="org.springframework.transaction.aspectj.AnnotationTransactionAspect"
  factory-method="aspectOf"/> 
```

请注意，这会返回 的方面对象`AnnotationTransactionAspect`，它是存储在静态变量中的单例。 `AnnotationTransactionAspect`extends `TransactionAspectSupport`，其中包含实例字段，例如缓存事务管理器。

效果是即使 X 和 Y 中的 bean 完全分离，它们也会在`AnnotationTransactionAspect`方面单例中争夺相同的实例字段。这会导致例如“没有正在进行的事务”异常，因为有人得到了错误的事务管理器。

同样的事情也会发生`@Configurable`：用于配置 bean 的 bean 工厂存储在一个静态变量中（请参阅 参考资料`AnnotationBeanConfigurerAspect.beanConfigurerSupport`）。这是一个更大的问题，因为您可以使用 来避免 AspectJ `@Transactional`，但无法使用 来避免它`@Configurable`。

我可以想到三个解决方案：

1.  停止使用方面
2.  写我自己的方面
3.  在创建 X 和 Y 的线程中创建/设置新的上下文类加载器

选项 #1 不好，因为我真的很喜欢`@Configurable`.

选项 #2 看起来并不有趣。

选项#3 看起来很简单。

那么选项＃3如何工作？这是我变得模糊的地方。我需要将 Spring 类加载到 X 和 Y 中的不同类加载器中。这意味着上下文类加载器无法正常委托给它的父级（Web 应用程序类加载器）等。你将如何设置它？

谢谢。

# php - 如何检查 PHP 中是否加密的 Zip 存档？

> ID：12081839
> 
> 赞同：0
> 
> 时间：2012-08-22T21:42:51.403
> 
> 标签：php, encryption, zip, zipfile, ziparchive

据我了解，状态为存档加密，包含通用位标志。我尝试使用 ZipArchive::statname() 进行检查，但似乎无法通过此方法获取信息。

我还能做什么？阅读存档并解析标题？我知道我可以调用 system()，但我不想使用这个方法，因为它的特殊性（一些托管这个函数被禁用）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T21:53:47.717

ZIP 文件头：（加密文件与普通文件）

![在此处输入图像描述](../Images/735a41d0492382c5480cfe641808aac7.png)

`09`似乎是加密标志。

检查第 7 个字节是`0x09`

```
function zip_is_encrypted($filename) {
  $handle = fopen($filename, "rb");
  $contents = fread($handle, 7);
  fclose($handle);
  return $contents[6] == 0x09;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-19T10:36:40.250

这是 ZIP 标准：[http](http://www.pkware.com/documents/casestudies/APPNOTE.TXT) ://www.pkware.com/documents/casestudies/APPNOTE.TXT 。

从第 4.3.7 节开始：

```
4.3.7  Local file header:

  local file header signature     4 bytes  (0x04034b50)
  version needed to extract       2 bytes
  general purpose bit flag        2 bytes
  compression method              2 bytes
  ... 
```

从第 4.4.4 节开始：

```
4.4.4 general purpose bit flag: (2 bytes)

    Bit 0: If set, indicates that the file is encrypted.
    ... 
```

所以你需要检查第七个字节的 FIRST BIT 而不是整个字节。您必须检查每个文件，因为每个文件都可以单独加密（第 4.3.6 节）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-24T09:29:00.380

那是行不通的，因为 Header 可以重复 n 次。

要解决此问题，请打开 zip zip_open() 并尝试读取每个条目 zip_entry_open()

如果有不可读的条目，则 zip 可能会被加密！

# html - 网站在移动设备上运行不佳，有哪些快速修复方法？

> ID：12081841
> 
> 赞同：1
> 
> 时间：2012-08-22T21:43:05.570
> 
> 标签：html, css

我正在为 checkmaid.com 的客户做一些小改动，但我意识到它在 iPhone 上运行不佳。我注意到其他网站会缩小以适应（不是真正的响应式网站），但这个没有。我尝试使用以下方法，但没有运气：

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"> 
```

背景也没有跨越顶级 div 的整个宽度，我一直无法解决尝试不同的 CSS 的问题。

谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T21:45:56.550

试试这个

```
<meta name="viewport" content="user-scalable = yes"> 
```

# r - 具有颜色阈值和网格的 R 矩阵图

> ID：12081843
> 
> 赞同：4
> 
> 时间：2012-08-22T21:43:12.613
> 
> 标签：r, matrix, plot, gridlines

我的矩阵由 0 到 100 之间的值组成，尺寸为 100 x 100。我基本上想绘制这个矩阵，但是将所有高于 50 的值涂成红色，低于 50 的值涂成蓝色。最重要的是，我想添加一个漂亮的灰色网格，就像他们在这里用 ggplot 做的那样：

[http://learnr.wordpress.com/2009/07/15/ggplot2-version-of-figures-in-lattice-multivariate-data-visualization-with-r-part-5/](http://learnr.wordpress.com/2009/07/15/ggplot2-version-of-figures-in-lattice-multivariate-data-visualization-with-r-part-5/)

我想知道实现这一目标的最简单方法是什么？我不确定是否要尝试 ggplot，因为从我目前看到的情况来看，它看起来相当复杂。这样的任务没有其他简单的绘图功能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T03:02:14.200

在基本图形中，它只是：

```
image(x, col=c("red","blue")[1+(x>50)] ) 
```

要添加网格，请使用：

```
grid(nx=100, ny=100, lty=1) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-22T22:24:00.570

我不是 100% 确定您的数据是否在矩阵中并且您想要一个热图类型图。或者，如果它是其他形式，并且您想要一个像您链接到的散点图。我只是假设您的数据与描述的一样，并且您想要一个热图。我想它是这样的：

```
 x=abs(rnorm(100*100,50,25))
    x=matrix(x,nrow=100) 
```

所以我会重塑数据，使其看起来像 xy 坐标：

```
require(reshape2)
require(ggplot2)
x1=melt(x)
names(x1)=c("x","y","color") 
```

然后我会把我的分界线变成一个因素：

```
x1$color=factor(x1$color>50)
levels(x1$color)=c("lessthan50","more than 50") 
```

然后调用ggplot：

```
qplot(x, y, fill=color, data=x1,geom='tile') 
```

![在此处输入图像描述](../Images/d9bdb2dffcbfc8ff800539af33320e12.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-28T23:56:14.547

你可以用 levelplot 简单地做到这一点，

```
x <- abs(runif(100*100,0, 100))
x <- matrix(x,nrow=100)
levelplot(x, cuts=1, col.regions=c("red", "blue")) 
```

# certificate - 还有其他人收到此 Bing Maps 证书错误吗？

> ID：12081846
> 
> 赞同：0
> 
> 时间：2012-08-22T21:43:29.077
> 
> 标签：certificate, bing-maps

尝试使用 Bing Maps Ajax API 调试脚本问题，但在从该 url 拉入他们的脚本时遇到证书错误：

[https://ecn.dev.virtualearth.net/mapcontrol/mapcontrol.ashx?v=7.0](https://ecn.dev.virtualearth.net/mapcontrol/mapcontrol.ashx?v=7.0)

很确定 url 是正确的，但 Chrome 告诉我服务器被错误识别为 *.vo.msecnd.net

只有我？微软的问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-22T22:35:39.677

好的，我作弊了，但我们的地图再次使用 https 工作。显然 MS 有一个无效的证书，可能很快就会回来，但是对于需要地图的生产站点来说，这是可行的：

[黑客]

1.  从非 https 站点复制脚本：[http ://ecn.dev.virtualearth.net/mapcontrol/mapcontrol.ashx?v=6.3](http://ecn.dev.virtualearth.net/mapcontrol/mapcontrol.ashx?v=6.3)
2.  将其托管在您的 https 服务器上，例如：/bing_maps_ohhh_no_what_happened/mapcontrol.js
3.  更新您的代码以使用新的网址：

    ```
    //bingurl='https://ecn.dev.virtualearth.net/mapcontrol/mapcontrol.ashx?v=6.3&s=1';
    bingurl = https://greatwebapp-really-it-is.yoursite/bing_maps_ohhh_no_what_happened/mapcontrol.js 
    ```

4.  胜利！！

[/黑客]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-20T10:02:52.647

我遇到了这个问题，试图在其 url 中使用 https:// 加载 mapcontrol。

SeanDowney 的回答对我帮助很大，我最终找到了一个更永久的解决方案（至少满足我们的需要）。

虽然证书确实看起来很乱，但我最终的解决方案是在 mapcontrol.ashx url 的末尾添加“&s=1”。

# objective-c - 如何根据当前角度从原点偏移圆的扇区

> ID：12081847
> 
> 赞同：0
> 
> 时间：2012-08-22T21:43:34.690
> 
> 标签：objective-c, opengl-es, trigonometry

我正在尝试研究如何创建一个新的矢量位置或目标矢量位置来表示给定当前角度的圆（或饼图）的提取部分。具体来说，我需要通过为我的动画每帧增加 x 和 y 来计算从当前向量到达目标向量所需的总浮点值 - （这部分已经完成了一些背景信息）。我已经在我的程序中确定了以下信息......这是一个示例：

*   矢量开始：x 1.000000 y 0.000000 z 0.200000
*   矢量结束：0.406737 y 0.913545 z 0.200000
*   交叉产品。x 0.182709，y 0.118653，z -0.913545
*   以度为单位的起始角度：0.000000
*   结束角度（度）：66.000000
*   矢量起点和终点之间的角度（以度为单位）：33

我试过使用下面的方法来增加/减少位置

```
float distanceX = (crossProduct.x > 0) ? crossProduct.x + 0.5 : crossProduct.x - 0.5;
float distanceY = (crossProduct.y > 0) ? crossProduct.y + 0.5 : crossProduct.y - 0.5; 
```

然后申请：

```
translationX = cosf(distanceX) * 1;
translationY = sinf(distanceY) * 1;
translationX /= 10;
translationY /= 10; 
```

得到： 翻译X：0.077587 翻译Y：0.057994

最后将新坐标传递到：

```
glTranslatef(translationX, translationY, 0.0); 
```

这段代码在某种程度上可以工作，但是当我将它应用到圆圈的不同部分时遇到了麻烦，即某些部门在共享象限中的象限。

感谢所有的回复。这是 [@Mark Oblak](https://stackoverflow.com/users/526828/matic-oblak)建议的实现代码。

```
GLKVector4 normalizedVectorStart = GLKVector4Normalize(vStart);
GLKVector4 normalizedVectorEnd = GLKVector4Normalize(vEnd);

GLKVector4 vectorOffset = GLKVector4Add(normalizedVectorStart, normalizedVectorEnd);
GLKVector4 normalizedVectorOffset = GLKVector4Normalize(vectorOffset);

NSLog(@"normalizedVectorOffset x %f y %f z%f", normalizedVectorOffset.x, normalizedVectorOffset.y, normalizedVectorOffset.z); 
```

normalizedVectorOffset x 0.532707 y 0.345944 z0.151473

```
float sign = GLKVector4DotProduct(normalizedVectorOffset, vStart);
float distanceFromCenter = 0.2;

sign = (sign > 0.0) ? 1.0 : -1.0;

GLKVector4 normalizedVectorOffsetWithSign = GLKVector4MultiplyScalar(normalizedVectorOffset, sign * distanceFromCenter);
NSLog(@"normalizedVectorOffset (sign) x %f y %f z%f", normalizedVectorOffsetWithSign.x, normalizedVectorOffsetWithSign.y, normalizedVectorOffsetWithSign.z); 
```

normalizedVectorOffset (符号) x 0.106541 y 0.069189 z0.030295

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T04:44:12.907

您可以通过将偏移量的长度乘以角度的余弦和正弦来找到从某个点在某个角度的偏移量。

例子：

```
#define PI 3.141592654f

float angle = 45.0f;
float angleInRadians = angle * (PI / 180.0f);

float centerX = 0;
float centerY = 0;

float distanceFromCenter = 10.0f;

float offsetX = cos(angleInRadians) * distanceFromCenter;
float offsetY = sin(angleInRadians) * distanceFromCenter; 
```

然后你可以对`distanceFromCenter`每一帧进行插值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T07:07:01.000

我不得不读了好几遍，但如果我理解正确：如果你的整个圆的中心在 (0,0,0) 并且你有来自中心的 2 个向量的信息，它们代表你的圆在哪里切片，那么你的例子要简单得多。你的向量是： offsetVector = normalized((normalized(start) + normalized(end)))

然后你需要得到偏移因子的符号： sign = (dotProduct(offsetVector, start) > .0) ？1.0:-1.0

您的最终结果是： offsetVector = offsetVector * sign * someFactor 其中 someFactor 表示您要从中心移动切片的距离。

# node.js - 在 Node JS / Express JS 中渲染多条内容（块）而无需回调地狱

> ID：12081850
> 
> 赞同：0
> 
> 时间：2012-08-22T21:43:47.117
> 
> 标签：node.js, mongodb, express, mongoose

我有一个使用 res.render("/somepage", vars) 渲染的页面。vars 是一个包含查询结果的对象。但是，如果我想在侧边栏中显示一段不相关的内容而不创建回调地狱并在 vars 中包含两个查询的结果怎么办？使用 async/promises 不是一种选择。

我使用的方法是只创建主要内容，然后通过调用返回 JSON 对象的 URL 使用 jQuery $.get 获取侧边栏内容。这个 JSON 对象是另一个查询的结果，我使用 res.json(someQueryResult) 创建它

[我在http://lelizondo.tumblr.com/post/29971693078/holy-sh-batman-showing-async-blocks-of-data-from](http://lelizondo.tumblr.com/post/29971693078/holy-sh-batman-showing-async-blocks-of-data-from)上发表了更广泛的解释，但我想知道是否有更好的方法，也许使用部分或我缺少的其他技术。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T19:40:12.370

这可能更像是一个发展哲学问题。正如第一位评论者所提到的，从某种意义上说，向服务器发出两个请求以呈现单个页面是一种浪费。但是，如果这是真正独立于主体的内容，您可能确实希望避免将查询/渲染与主体内容纠缠在一起。这使您可以单独维护它（减少错误的风险）并可能让不同的人（如果您在团队环境中）在组成页面的不同“小部件”上工作。

我建议对您的 jQuery 方法的唯一改进是使用[下划线微模板](http://ericbutera.com/post/8356684645/micro-templating)之类的东西来呈现该 JSON，而不是手动构建 HTML。

朝着这个方向迈出的下一步（就像我说的那样，这是一个哲学问题）将使用诸如[骨干网之类的东西](http://backbonejs.org)之类的东西，并将您的服务器端路由扩展为完整的 REST API。然后从理论上讲，随着站点的增长，它甚至可能来自不同的 node.js 服务器。

如果你想全押，总有这样的[方法](http://addyosmani.com/largescalejavascript/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T22:21:44.297

您可能希望考虑像导体这样的东西.. [http://howtonode.org/step-of-conductor](http://howtonode.org/step-of-conductor)

# google-apps-script - 服务错误：ContactApp：不匹配

> ID：12081852
> 
> 赞同：0
> 
> 时间：2012-08-22T21:43:57.647
> 
> 标签：google-apps-script

这是错误：

> 服务错误：ContactsApp：不匹配：etags = [“RX44ejVSLit7I2A9WhJWFkoLRAM.”]，版本 = [1345671373905000]

当我是执行脚本的人时，我的 App Script 应用程序运行良好，但是当另一个人执行脚本时，我收到上述错误。我已根据需要设置了所有执行权限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T10:29:37.390

GAS 团队意识到联系人和日历的这个问题。

根据您为 sleep() 设置的时间，它可能会定期工作。它似乎与服务器负载有关。

分成两个脚本对我来说效果很好。第一个脚本是接受或创建联系人数据的地方。该脚本将数据推送到数据库中（我使用了 ScriptDb）。要添加到联系人的每个字段都是单独的记录，并引用需要添加到的联系人。

第二个脚本在触发器上检查数据库是否有任何新数据。它遍历数据库，试图为每个联系人添加一个字段。每次尝试添加字段时都使用 try()...catch()。注意：不要在这个过程中使用 sleep()，你的脚本可能会超时。

当然，您可以等到 GAS 解决问题。

# ruby - ruby中更快的Fixnum乘法？

> ID：12081855
> 
> 赞同：5
> 
> 时间：2012-08-22T21:44:20.300
> 
> 标签：ruby, performance, multiplication

使用 ruby​​ 1.9.2p290（2011-07-09 修订版 32553）[x86_64-linux]

我一直在做很多分析，我注意到 ruby​​ Fixnum 乘法真的很慢。

通过一些分析，我了解到这是（部分）因为**对 Fixnum#* 的每次调用都涉及对 Kernel#kind_of 的 6 次调用**。

我知道你可以编写 C 扩展，但这些乘法分布在整个代码中。那么，有没有办法在 Ruby 中避免这种开销呢？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-23T00:55:25.467

我严重怀疑这些测量结果是否准确，原因如下：

1.  您没有说明您使用的是哪个 Ruby 实现，而是`ruby-prof`一个 Ruby 分析器。它分析 Ruby 代码。我不知道`Fixnum#*`Ruby 代码在哪里，没有 Ruby 实现。在 MRI、YARV、MRuby 和 tinyrb 中是 C 代码，在 Rubinius 中是 C++ 代码，在 MacRuby 中是 Objective-C 代码，在 JRuby 和 XRuby 中是 Java 代码，在 RubyGoLightly 中是 Go 代码，在 IronRuby 和 Ruby 中。 NET 是 C# 代码，在 MagLev 和 SmallRuby 中是 Smalltalk 代码，在 Cardinal 中是 PASM 代码。`ruby-prof`可以分析 Ruby 代码，但不能分析 C、C++、Objective-C、Java、C#、Go、Smalltalk 或 PASM。只有红宝石。因此，它根本*无法*配置文件`Fixnum#*`。

2.  无需`Fixnum#*`多次检查课程。它知道那`self`是 a `Fixnum`，否则调用不会一开始就分派给`Fixnum#*`方法，所以它只需要检查参数。它还需要检查结果是否适合a `Fixnum`，但它会在内部完成，而不是通过调用`kind_of?`（事实上，这甚至没有意义：为了能够在乘法的结果，它首先必须构造结果对象，并且为了构造结果对象，它必须知道它是否适合a `Fixnum`）。

3.  它不会通过调用`kind_of?`和遍历整个 Ruby 方法查找和方法分派机制来进行类检查。它是 Ruby 实现的内部函数，它可以访问所有私有内部实现细节，它只会直接检查类或调用一些内部解释器函数，而不是 Ruby 方法`kind_of?`

4.  我检查了`Fixnum#*`各种流行的 Ruby 实现中的实现，没有发现*任何*对`kind_of?`. 不幸的是，您没有说明您使用的是哪个 Ruby 实现。

    *   鲁比尼乌斯：[`Fixnum::mul`在`vm/builtin/fixnum.cpp`l。78–89](https://GitHub.Com/Rubinius/Rubinius/blob/master/vm/builtin/fixnum.cpp#L78-89)
    *   YARV：[`fix_mul`在`numeric.c`l。2596–2640](https://GitHub.Com/Ruby/Ruby/blob/trunk/numeric.c#L2596-2640)
    *   JRuby：[`org.jruby.RubyFixnum.{op_mul, multiplyFixnum, multiplyOther}`在`src/org/jruby/RubyFixnum.java`l。472–520](https://GitHub.Com/JRuby/JRuby/blob/master/src/org/jruby/RubyFixnum.java#L472-520)（在这里你可以清楚地看到，例如，方法如何使用 Java`instanceof`运算符而不是 Ruby 的`kind_of?`方法来检查类。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-23T15:45:29.647

嗯，我想我想通了。我正在使用 GSL libray，它似乎使用您可以在此处看到的代码修补了 Fixnum#*：[https ://github.com/romanbsd/rb-gsl/blob/master/lib/gsl/oper.rb# L15](https://github.com/romanbsd/rb-gsl/blob/master/lib/gsl/oper.rb#L15)

此代码包括...等待它... 6 调用 Kernel#kind_of？在一个大的“或”声明中。

我不会假装完全理解它的工作原理或发生原因，但代码路径与分析器输出完美匹配。

# sql - Visual Studio 2010 数据库项目允许使用无效 SQL 构建存储过程

> ID：12081856
> 
> 赞同：2
> 
> 时间：2012-08-22T21:44:26.907
> 
> 标签：sql, visual-studio-2010, sql-server-2005, database-project

我有一个指定为 2005 的数据库项目。（这是在项目设置下的属性屏幕上。）

我们有几台服务器部署和运行，生产环境是 2005，但我们有一些 2008 R2 服务器可供我们开发，因此我们将项目指定为 2005。

我添加了我在仅用于开发的 2008R2 数据库上创建的存储过程。一切正常，所以我将它添加到数据库项目中。该项目构建和部署良好，这意味着它生成了 .sql 文件。我们不应用 VS 项目的更改。

我们有一个针对 2005 数据库运行的 CI TFS 构建。（我们有几个配置，每个配置都针对不同的数据库“部署”）。它构建和部署良好。同样，它仅将更新生成到 SQL 文件中。

存储过程包含以下代码：

```
 insert SiteCAChargeParameterSet
    values (
             ( select siteID 
                 from SiteCAChargeParameterSet
                where SiteCAChargeParameterSetID = @OldSiteCAChargeParameterSet
              ),
                @NewSetName,0,0,@UserID, @currentDate,@UserID, @currentDate
            ) 
```

定义了所有变量。当我尝试在 2005 数据库上创建此存储过程时，我收到一个错误 (1046)，表明不允许选择“在此上下文中不允许子查询”。

我的问题是为什么编译器允许这样做。显然，因为我已经指出这是一个 sql server 2005 项目，所以它应该遵循该版本的规则。此外，由于它正在与 2005 数据库进行比较，因此也应该知道这是非法的。

我希望有一个我没有打开的选项或类似的东西。或者这只是 SQL“编译器”中的一个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T15:10:36.727

如果您还没有这样做，请尝试在项目属性页面的“调试”选项卡上编辑“目标连接”，并确保它指向 SQL 2005 数据库。

这将确保 VS 为您的项目检查正确的 SQL 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T12:48:50.580

尝试将 2008r2 服务器上数据库的兼容级别设置为 90 (SQL Server 2005)。

```
ALTER DATABASE <database_name>
SET COMPATIBILITY_LEVEL = 90 
```

这可以允许检测不兼容的子选择。

# javascript - 模块化 javascript 字符串处理框架

> ID：12081858
> 
> 赞同：0
> 
> 时间：2012-08-22T21:44:33.100
> 
> 标签：javascript, text, collaboration, modular

我正在构建一个基于 js 的协作系统，其中一部分将文本分解为组件，以允许动态换出、重新排列等部分。最终，我希望用户能够突出显示文本的一部分，从而将内容分割成模块化单元。目的是允许编辑单个组件并选择每个组件的最佳版本。有没有人遇到过任何解决此类问题的开源工具？

有很多工具可以帮助实现所涉及的一些功能，但我真的在寻找更全面的东西，比如专门针对这些挑战的范围设计的框架或引擎。我构建了一个灵活的 javascript 对象结构，以允许轻松分配和关联概念。我正在使用 jQuery 来获取内容字符串，并且一直在使用 jQuery 和下划线的组合以及我放在一起的各种其他工具和实用程序来进行文本/对象操作，再加上修改后的 jQueryUI 小部件来执行诸如拖动/掉落等

为该项目的这一阶段做的几天准备已经让我清楚地了解所涉及的巨大复杂性，我不想浪费时间重新发明轮子。浏览各种各样的工具让人不知所措，我觉得我可能会滥用很多时间而不依赖在该领域有更多经验的其他人。我知道必须有许多项目已经解决了这种视觉内容/概念修改分类并解决了复杂性以从流程中发展出一些最佳实践。

我考虑过一些处理文本解析的 WebKit 和 Firefox 内部，但这似乎有点偏离我的目标，尽管 DocumentFragment 接口可能有一些希望。昨晚我开始更深入地研究 Dojo，我不得不说我对他们的大量工作如此彻底感到惊讶。在浏览了已经投入语言语义学和其他基本概念理论的大量工作中的一小部分之后，我想我应该看看是否有一个项目可以让我获得灵感、指导，甚至只是利用其中的一些已经完成了。有什么建议么？

感谢您的任何意见！

# java - Java 帮助（文件流）

> ID：12081861
> 
> 赞同：0
> 
> 时间：2012-08-22T21:45:06.993
> 
> 标签：java, stream, runtime.exec

我想在输入另一个字符后执行记事本（C:\a.txt）。

这段代码用记事本打开 a.txt 但是当我写“Java”时，我想显示我的控制台 Java。在我写“然后是 Java”之后，我想显示我的控制台 Java，然后是 Java”。

```
Process process = Runtime.getRuntime().exec("notepad.exe C:\\a.txt");
InputStreamReader read = new InputStreamReader(process.getInputStream());
while(read.read() != -1){
System.out.println(read.read());
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T21:48:02.900

您将无法以`Notepad`这种方式阅读正在发生的事情。

`getInputStream()`/`getOutputStream`允许您对进程的[标准输入和输出进行](http://en.wikipedia.org/wiki/Standard_streams)*写入*和*读取*，但这些流通常与桌面应用程序的用户界面无关。记事本不会将其用户界面中发生的事情与这些流相呼应。

您可以监视文件系统对*a.txt*的更改，但这假定您在记事本中每次更改后都*保存文件。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T21:49:23.333

如果您想在文件打开时检测更改，您可以使用[https://blogs.oracle.com/thejavatutorials/entry/watching_a_directory_for_changes#register](https://blogs.oracle.com/thejavatutorials/entry/watching_a_directory_for_changes#register)然后使用您提供的代码重新读取文件

# php - PHP/Codeigniter 无法重新声明类 - require_once 和 class_exists 让我失望了

> ID：12081863
> 
> 赞同：1
> 
> 时间：2012-08-22T21:45:21.280
> 
> 标签：php, codeigniter, declaration

我在我们的 CodeIgniter 支持的网站中遇到了一个令人困惑的问题。一个 PHP 类 - TChild - 将间歇性地开始抛出“无法重新声明类”错误并破坏使用它的每个页面。坦率地说，我为确保声明代码只运行一次而付出的努力变得非常荒谬，但无济于事。tchild.php 的顶部当前如下所示：

```
(!( isset( $GLOBALS['tchild_counter'] ) ))
    ? $GLOBALS['tchild_counter'] = 1 
    : $GLOBALS['tchild_counter']++ ;
log_message("info", "tchild has been included " . $GLOBALS['tchild_counter'] . " times");

if($GLOBALS['tchild_counter'] != 1) {
    log_message("info", "STOP RUNNING TWICE");
} else {

if ( ! defined('BASEPATH')) {
    log_message("error", "BASEPATH not set; no direct script access allowed");
    exit('No direct script access allowed');
}
log_message("info", "Basepath is fine, checking if tchild exists (proc".getmypid().")");
log_message("info", "why does that last line seem to run twice?");
if ( ! class_exists('TChild')) {
log_message("info", "TChild does not exist, creating it");
if(class_exists('tchild')) {
    log_message("info", "tchild apparently exists?");
} else {
    log_message("info","okay, I'm extra-sure that tchild doesn't exist");
}

class TChild extends ActiveRecord\Model { 
```

这是一大堆...的*东西*，但至少它应该确保 TChild 只定义一次，对吧？嗯，不。大多数情况下，它工作正常，但偶尔服务器会进入某种奇怪的状态，尽管有相反的证据，它决定 TChild 被声明了两次。从我添加的大量日志语句来看，我相当肯定 tchild.php 一开始只包含在一个 require_once 中，而且它绝对不会多次到达类定义。（然而，它确实会吐出两个“停止运行两次”日志条目，即使事情运行良好。我不知道为什么，但至少这不会破坏任何东西。）

一旦它开始失败，它会继续破坏一切（通常）几分钟，然后以与最初失败一样神秘的原因自行修复。

我不知道这里发生了什么。谷歌搜索导致我尝试将 apc.enabled = 0 添加到我的 php.ini 中，但它并没有对崩溃或性能产生影响。（我不认为它一开始就启用了，但值得一试。）

**更新：**

啊哈，第三方库中有一个 require 语句多次包含该文件。我仍然不知道为什么要重新声明该类，尽管我将声明包含在所有 if/else 块中，但至少现在看来一切正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T23:02:37.640

而不是仅仅重复文件被多次包含的事实，让 PHP 告诉你它来自哪里：

*   [http://php.net/manual/en/function.debug-print-backtrace.php](http://php.net/manual/en/function.debug-print-backtrace.php)
*   受上面 John B 评论的启发，`__FILE__`可能会发现您的文件不知何故有两个名称

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T22:48:10.607

在 log_message("info", "STOP RUNNING TWICE"); 之后返回怎么样？返回; 或退出（0）；似乎您的文件不止一次被包含，并且您永远不会停止代码的任何部分。它只是到达`class TChild extends ActiveRecord\Model`and 再次声明的部分。

如果我在你刚刚做的地方：

```
if ( ! defined('BASEPATH')) {
    log_message("error", "BASEPATH not set; no direct script access allowed");
    exit('No direct script access allowed');
}

if (class_exists('TChild') || class_exists('tchild')) {
    log_message("info", "class already exists returning");
    return; // or exit(0);
}

class TChild extends ActiveRecord\Model {
… 
```

你问我你应该检查文件是从哪里包含的，除非它是从其他一些难以追踪的代码中包含的。但是上面的代码应该足够了。您可以使用[xhprof](http://pecl.php.net/package/xhprof)或[xdebug](http://xdebug.org)`debug_backtrace`来检查您的文件包含在其他实用程序中的位置。

# python - itertools.dropwhile 的困难

> ID：12081864
> 
> 赞同：2
> 
> 时间：2012-08-22T21:45:22.497
> 
> 标签：python, itertools

我试图使用`itertools.dropwhile`仅从生成器返回第三个元素之后的元素，但我遇到了一些麻烦：

```
from itertools import dropwhile

    it = (i for i in range(10,20))
    a = dropwhile(enumerate < 3, it)   
    next(a)
    TypeError: 'bool' object is not callable 
```

我正在寻找的输出是：

```
[14, 15, 16, 17, 18, 19] 
```

谁能解释我的代码有什么问题并提供可行的解决方案？谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-22T21:51:21.870

`itertools`提供了一个功能，可以完全满足您的需求，甚至更多。来自[Python 标准库](http://docs.python.org/library/itertools.html#itertools.islice)，

> 迭代工具。**`islice`**（*可迭代*[，*开始*]，*停止*[，*步骤*]）
> 
> 创建一个从可迭代对象中返回选定元素的迭代器。如果*start*不为零，则跳过 iterable 中的元素，直到到达*start*。之后，元素将连续返回，除非*step*设置为高于 1 导致项目被跳过。如果*stop*是`None`，则迭代继续，直到迭代器耗尽（如果有的话）；否则，它会停在指定位置。

```
>>> import itertools
>>> it = (i for i in range(10, 20)) # it = xrange(10, 20)
>>> a = itertools.islice(it, 4, None)
>>> list(a)
[14, 15, 16, 17, 18, 19] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T21:56:14.317

to的`predicate`参数`itertools.dropwhile`应该是一个接受单个参数的函数，`enumerate < 3`只是一个语句。在 Python 2.x 上，这将始终评估为 False `"type" > "int"`，因为在 Python 3.x 上，它将导致`TypeError: unorderable types: type() < int()`.

以下是更改代码并仍然使用的方法`dropwhile`：

```
>>> it = (i for i in range(10, 20))
>>> a = dropwhile(lambda i_v: i_v[0] < 4, enumerate(it))
>>> list(a)
[(4, 14), (5, 15), (6, 16), (7, 17), (8, 18), (9, 19)] 
```

请注意，`enumerate`必须在可迭代对象上调用它，以便我们可以创建一个使用索引来确定是否删除当前值的 lambda，但这意味着结果是一个`(index, value)`元组列表，而不仅仅是值。我还将比较更改为，`< 4`因为您想从 开始`14`，这是 的第四个元素`it`。

更好的选择是`itertools.islice`在[Deokhwan 的回答](https://stackoverflow.com/a/12081933/505154)中使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-29T22:06:41.240

这里的其他一些答案很有帮助，但它们并没有给出所要求的结果。接受的答案解释了有用的`itertools.islice()`，但如果 using`itertools.dropwhile()`是一个要求，那么它就不太对了。其他一些答案不必要地复杂。

一个简单的解决方案可能比预期更容易找到。例如：

```
list(dropwhile(lambda x: x < 14, xrange(10, 20))) 
```

我把这个包裹起来，`list()`因为要求的具体结果是`[14, 15, 16, 17, 18, 19]`. 可以删除该部分以`dropwhile()`用作迭代器`.next()`，等等。因为这是一个迭代器，而不是`range()`我使用`xrange()`的，因为使用迭代器更有效。 `range()`会起作用，但可能效率不高。

我不确定目标的一部分是否也是使用`enumerate()`。也许是这样，但在示例`enumerate`中被用作变量，而不是函数。枚举不是获得请求的结果所必需的，它不是问题的一部分，所以我认为它被错误地使用了。

正如其他人指出的那样，问题中的示例不需要使用理解来获取范围中的所有项目。这个答案也没有使用它。如果我们要进一步简化代码，获得所需结果的最简单解决方案是：

```
range(14, 20) 
```

但这不包括使用`itertools.dropwhile()`.

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-22T21:50:45.517

试试看：

```
a = dropwhile(lambda x:x < 3, it) 
```

参数必须是可调用的。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-22T22:01:33.313

```
 it = (i for i in range(10,20)) 
```

这有点多余，为什么不简单地使用`range(10,20)`（或`xrange`）？

您的代码中断是因为`dropwhile`需要一个函数作为其参数，并且您提供了一个布尔值（通过将函数`enumerate`与数字 3 进行比较来生成，这有点奇怪！）

使用枚举的解决方案可能如下所示：

```
a = dropwhile(lambda (i,val): i<3), enumerate(seq)) 
```

但 then`a`仍然是枚举对（索引，值）的列表。

一种更有效的方法可能如下所示：

```
class Counter:
    def __init__(self):
        self.n = 0

    def __call__(self):
        current = self.n
        self.n += 1
        return current 
```

（在[这里](http://ideone.com/hOyHJ)查看实际操作，这很简单）

那么你可以像这样使用它：

```
c = Counter()
a = dropwhile(lambda elem: c() < 3, seq) 
```

这使您可以使用`dropwhile`. 您的计数器实例为 seq 中的每个元素调用一次，并且每次都给出下一个数字。

* * *

也就是说，你最好使用`itertools.islice`：

```
import itertools
a = itertools.islice(range(10, 20), 3, None) 
```

`islice`允许您像列表切片一样进行切片（就像`myList[3:]`在这种情况下，从元素 #3 到结尾），但可以将任何序列作为其参数。

# java - 添加到大型 Java 集合，性能瓶颈

> ID：12081867
> 
> 赞同：7
> 
> 时间：2012-08-22T21:45:40.547
> 
> 标签：java, performance, collections

我正在尝试将一百万个对象添加到列表中。完成它所需的时间比我有耐心等待的时间长。似乎每一步都需要越来越长的时间来进行。

```
 int size = 1000000;
    Deque<DatastoreElement> content = new LinkedList<DatastoreElement>();

    for (int i = 0; i < size; i++) {

        String k = Utils.getRandomStringOfLength(20);
        String v = Utils.getRandomStringOfLength(300); // goes faster with smaller number

        int metaHash = random.nextInt(10) + 1;
        KVPair kvp = new KVPair(k, v);
        DatastoreElement dse = new DatastoreElement(metaHash, kvp);

        content.addLast(dse); // confirmed problem is here

        if (i % 10000 == 0) {
            System.out.println(i);
        }
    } 
```

我尝试向 中添加内容`List`，`Set`结果非常相似。它快速启动并在某个数字后窒息。

我应该使用什么集合来存储大量类似的元素？我在这里错过了一些简单的东西吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-22T21:58:40.523

这个问题通常与集合*无关*，与`LinkedList`所示的（具有`O(1)`附加特征）无关。

因此，可能的嫌疑人正在颠簸/交换内存。*确保JVM有足够的内存，系统有更多的..*

`LinkedList`从to `ArrayList`(or )切换`ArrayDeque`将保持`O(1)` *摊销*性能，但每个项目的开销**可能**会*稍少。*（开销，以及这种减少是否重要，取决于添加的对象的大小和后备存储的填充率。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T22:10:59.960

*   ArrayList 已经被建议（在链表中，每个项目/节点都意味着一个附加对象）。
*   另外（以前也建议过），如果您使用基于数组的集合，请尝试将其构造/调整为足够的长度。
*   此外，如果内存是一个问题，您可能希望将享元模式与字符串元素一起使用`String#intern()`，这样可以收集冗余实例。

# jquery - 执行某事 onchange 复选框

> ID：12081871
> 
> 赞同：3
> 
> 时间：2012-08-22T21:46:00.390
> 
> 标签：jquery, checkbox, onchange

你能说我做错了什么吗？当我创建一个函数并创建一个 onchange="function()" 它可以工作。

```
<input type="checkbox" name="test" value="bar" />

$('input[name=test]').change(function(){
if($('input[name=test]').is(':checked')){
        alert('Checked');
    } else {
        alert('Not checked');
    }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T21:49:13.667

它在这里工作，所以它也应该适合你。

[http://jsfiddle.net/Sz3BK/](http://jsfiddle.net/Sz3BK/)

您使用的是哪个 jquery 版本？

# android - Objective-C JSON 数据引号

> ID：12081873
> 
> 赞同：0
> 
> 时间：2012-08-22T21:46:10.607
> 
> 标签：android, objective-c, ios, json, sbjson

下午好，

我正在将 JSON 字符串从 Web 服务传递给 iOS 应用程序和 Android 应用程序。业务规则规定此 JSON 字符串可以包含带引号的数据。

```
{"message": [{"MessageID": "22", "CompanyID": "0897001", "MessageText": "this "message" has quotes", "JobID": "BT201-Main-1-031508-134700", "AttachmentCount": "0", "MainDevice": "1"},{"MessageID": "23", "CompanyID": "0897001", "MessageText": "this message has  no quotes", "JobID": "BT201-Main-1-031508-134700", "AttachmentCount": "0", "MainDevice": "1"}]} 
```

在做了一点 google-ing 之后，我发现如果我想发送带引号的数据，我只需要在值内的引号前加上一个反斜杠：

```
{"MessageID": "22", "CompanyID": "0897001", "MessageText": "this \"message\" has quotes", "JobID": "BT201-Main-1-031508-134700", "AttachmentCount": "0", "MainDevice": "1"} 
```

当 android 应用程序得到这个 JSON 时，它会很好地解析它。数据显示在视图中，带有引号和全部。iOS应用程序并非如此。我可以对 JSON 做些什么来让 iOS 应用程序正确解析 JSON？我目前在我的 iOS 应用程序中使用 SBJSON。任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T14:20:36.170

您能看到您提供给解析器的 JSON 实际上包含 \" 吗？JSON 是如何生成的？SBJson 确实正确处理了嵌入的引号。这是一个指向明确检查它的测试套件的特定部分的链接：

[https://github.com/stig/json-framework/tree/master/Tests/Data/valid/string/escapes](https://github.com/stig/json-framework/tree/master/Tests/Data/valid/string/escapes)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T21:49:38.800

iOS有什么问题。你也得到反斜杠吗？在这种情况下，模式替换呢？

# c# - 为什么在方法的一部分中识别出 DataRow 而在另一部分中却不能识别（如何动态添加 DataRows）？

> ID：12081875
> 
> 赞同：5
> 
> 时间：2012-08-22T21:46:11.713
> 
> 标签：c#, winforms, oracle, dynamic, dotconnect

使用此代码：

```
OracleDataTable dt = PlatypusSchedData.GetAvailablePlatypi(); 
OracleDataTable outputDt = new OracleDataTable();

int iRows = 12;
while (iRows > 0)
{
    outputDt.Rows.Add(new DataRow()); // line 1
    //var dr = new DataRow();     // line 2a
    //outputDt.Rows.Add(dr);      // line 2b
    iRows -= 1;
}

for (int i = 0; i < dt.Rows.Count; i += 1) {
    DataRow dr = dt.Rows[i];
    int outputColumn = 0;
    if (i % 12 == 0 && i > 0) {
        outputColumn += 1; //2?
    }
    outputDt.Rows[i % 12][outputColumn] = dr[0];
    outputDt.Rows[i % 12][outputColumn + 1] = dr[1];
}
dataGridView1.DataSource = outputDt; 
```

...我使用第 1 行（第 2a 和 2b 行注释掉）或使用第 2a 和 2b 行（第 1 行注释掉）得到这个编译时错误：

*'System.Data.DataRow.DataRow(System.Data.DataRowBuilder)' 由于其保护级别而无法访问*

这让我感到困惑，因为 for 循环中的 DataRow 是可以容忍的。如何将这些 DataRows 添加到我的 OracleDataTable？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-22T21:52:00.060

for 的构造函数`DataRow`被标记为`protected internal`，因此不能直接构造它。

为 a 获取新行的正确代码`DataTable`是

```
DataRow dr = dt.NewRow(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T21:53:03.213

我不熟悉，`OracleDataTable`但我认为它继承自 normal `DataTable`。

您不能`DataRow`直接创建 a ，因为构造函数是[protected](http://msdn.microsoft.com/en-us/library/bcd5672a%28v=vs.100%29.aspx)。相反，您必须使用一种工厂方法，例如[`DataTable.Rows.Add`](http://msdn.microsoft.com/en-us/library/system.data.datarowcollection.add.aspx)or [`DataTable.NewRow`](http://msdn.microsoft.com/en-us/library/system.data.datatable.newrow.aspx)。这可确保将正确的架构应用于新架构，`DataRow`因为它是从其`DataTable`.

所以这应该工作：

```
while (iRows > 0)
{
    DataRow dr = outputDt.NewRow();
    // fill the fields of the row ...
    // add it to the DataTable:
    outputDt.Rows.Add(dr);
    iRows -= 1;
} 
```

# php - 从 Google API 地理编码到表单字段到数据库？

> ID：12081879
> 
> 赞同：0
> 
> 时间：2012-08-22T21:46:49.357
> 
> 标签：php, javascript, mysql, type-conversion, geocoding

在一定程度上，我的一切都很好。我有一个表格，用户在表格中填写他们的地址（街道、城市、州、邮政编码的单独字段）。一旦他们点击提交，在提交按钮上，我就有了一系列的 onClick 功能。它将他们的地址字段合并为一个由逗号和空格分隔的隐藏字段（就像您手写地址一样）。这工作正常。然后，一旦合并，下一个函数会对地址进行地理编码，并将纬度和经度也返回到表单上的隐藏字段。这也有效（我认为）这是我这样做的代码。

```
function codeAddress1() {

      var sAddress = document.form.post_consolidatedAddress1.value;
      var storedLatLng;
      var lon;
      var lat;
      var splittingPoint;
      var stoppingPoint;

      geocoder.geocode( { 'address': sAddress}, function(results, status) {

          if (status == google.maps.GeocoderStatus.OK) {

                  document.form.longitude1.value = results[0].geometry.location.lng();
                  document.form.latitude1.value = results[0].geometry.location.lat();
                    alert(document.form.latitude1.value);
                    alert(document.form.longitude1.value);

          } else {

              alert("Geocode was not successful. Please contact the site webmaster and inform them of the following error: " + status);
          }
        });

  } 
```

至少当它向我显示警报时，其中包含纬度和经度。不过，我的问题出现了：一旦我在隐藏字段中有这些值，我需要将其提交到 MySQL 数据库，以便稍后按距离排序。我已经构建了数据库，以便纬度和经度字段是 FLOAT 类型，长度为 10,6（大到足以包含我通过测试获得的返回值）。但是当我提交到数据库时，我实际上并没有得到值，我只得到 0.000000。我已经尝试了几种方法使从表单中发布的值成为浮点数，这是我目前在我的 PHP 中获取要提交的值的方法：

```
$latitude1 = floatval($_REQUEST['latitude1']) ;
$longitude1 = floatval($_REQUEST['longitude1']) ; 
```

我也试过：

```
$latitude1 = (float) $_REQUEST['latitude1'] ;
$longitude1 = (float) $_REQUEST['longitude1'] ; 
```

没有任何工作......有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T14:31:49.847

好的，我已经成功了。我为使其正常工作所做的工作是：我现在运行合并和地理编码脚本，只需单击一下即可。我添加了一个复选框，要求用户确认输入的所有信息是否正确，该复选框的 onclick 运行脚本以设置地址合并，并设置纬度和经度。然后他们单击一个单独的按钮来提交表单。然后在php表单上，我不费心去调整数据类型，我就让它按原样进入数据库，让数据库把它当作一个浮点数来处理。然后我只是让表单在提交表单之前验证该复选框已被选中。这已经奏效，并且值正确显示在数据库中。最后。

# linux - Linux，在 n 列上排序

> ID：12081883
> 
> 赞同：0
> 
> 时间：2012-08-22T21:46:57.953
> 
> 标签：linux, bash, shell, unix

所以我在下面的行中遇到了一些麻烦，我正在尝试对“可用空间”列进行排序，但认为由于前面的“可用空间：”文本而导致排序失败，我该怎么办去按 $(NF -2) 降序排序？

谢谢你。

```
df -h / | egrep -v "Filesystem|xscsi" |  sed '$!N;s/\n/ /' | awk '{printf "%-10s %s\n", $1, "\tTotal utilization: " $(NF -1)"(" $(NF -3) ")\tFree space: " $(NF -2)}' | sort -r -n -k 3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T21:50:17.577

你可以对输出进行排序

```
df -h / | egrep -v "Filesystem|xscsi" |  sed '$!N;s/\n/ /' 
```

命令之前将文本添加到它，所以它变成

```
df -h / | egrep -v "Filesystem|xscsi" | sort -r -n -k 3 | sed '$!N;s/\n/ /' | awk '{printf "%-10s %s\n", $1, "\tTotal utilization: " $(NF -1)"(" $(NF -3) ")\tFree space: " $(NF -2)}' 
```

# linux - 没有 www 的虚拟主机 2 重定向到虚拟主机 1

> ID：12081886
> 
> 赞同：5
> 
> 时间：2012-08-22T21:47:11.030
> 
> 标签：linux, apache, unix, virtualhost, httpd.conf

我的 httpd.conf 看起来像这样：

```
NameVirtualHost *:80

<VirtualHost *:80>
    DocumentRoot /var/www/host1.com
    ServerName   host1.com
    ServerAlias  www.host1.com
</VirtualHost>

<VirtualHost *:80>
    DocumentRoot /var/www/host1.com/subdomain
    ServerName   subdomain.host1.com
    ServerAlias  www.subdomain.host1.com
</VirtualHost>

<VirtualHost *:80>
    DocumentRoot /var/www/host2.com
    ServerName   host2.com
    ServerAlias  www.host2.com
</VirtualHost> 
```

所以，一切都像它应该的那样工作，除了：

host2.com 显示 /var/www/host1.com/

然而

www.host2.com 显示 /var/www/host2.com/

我很确定这是一个 Apache 配置问题，但我无法弄清楚。有什么帮助吗？？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-23T03:11:41.853

以这种方式尝试

```
DocumentRoot /var/www/host2.com
ServerName   www.host2.com
ServerAlias  *.host2.com 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-08T13:57:55.483

尝试这个 ：

```
DocumentRoot /var/www/host.com
ServerName   host.com
ServerAlias  *.host.com 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T20:19:29.370

您是否为 www 正确配置了 DNS FQDN 或 CNAME？

```
www.host2.com
host2.com 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-16T23:37:26.663

对于 Windows，在主机文件 127.0.0.1 host2.com 127.0.0.1 www.host2.com 中

指向相同的 ip 并且您的配置工作正常。

# php - 使用颜色框为 PHP 表单创建“thankyou”弹出窗口

> ID：12081887
> 
> 赞同：2
> 
> 时间：2012-08-22T21:47:15.317
> 
> 标签：php, javascript, jquery, forms, colorbox

我已经在我的网站上使用了颜色框，因此我想在用户提交表单后使用 inlineHTML 颜色框向用户提供感谢反馈。

我已经将包含感谢文本的内联内容contact_thanks 设置为隐藏的div。

然后我将 PHP 脚本设置为重新路由到我的域 + #contact_thanks

唯一的问题是，我缺少一些调用 jQuery 来更改隐藏的颜色框 div 的部分，而且我不确定我需要在我的代码中添加什么才能使其工作。

现场可以在[这里](http://www.haselden.co.uk/james/index.php)找到，随时发送测试消息（它只发给我！）

**PHP的**

```
<?php
  $name = $_REQUEST['name'] ;
  $email = $_REQUEST['email'] ;
  $message = $_REQUEST['message'] ;

  mail( "myemail@gmail.com", "Message",
    $message, "From: $email" );
  header( "Location: http://www.mysite.co.uk/james/index.php#contact_thanks" );
?> 
```

**的HTML**

```
<div style='display:none'>
      <div id='contact_thanks' style='padding:10px; background:#fff;'>
      <span class="colorBox">Thank you for your message!</span>
      <p>Thanks!</p>
</div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T11:01:40.303

替换这个：

```
$(window).load(function() {
    if( window.location.hash == '#contact_thanks' ) {
      $('#contact_thanks').show();
    } 
}); 
```

有了这个：

```
$(document).ready(function() {
    if( window.location.hash == '#contact_thanks' ) {
      $.colorbox({inline:true, href:'#contact_thanks', width:700});
    } 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T22:38:36.243

将此添加到您的 .js 文件中（假设您已加载 jQuery）：

```
$(window).load(function() {
    if( window.location.hash == '#contact_thanks' ) {
      $('#contact_thanks').show();
    } 
}); 
```

但是您还需要编辑您的html：

```
<div id='contact_thanks' style='padding:10px; background:#fff; display:none'>
    <span class="colorBox">Thank you for your message!</span>
    <p>Thanks!</p>
</div> 
```

实际上，最好将所有样式移动到您的 css 并应用于#contact_thanks。还有更好的选择，但实现起来会有点困难 - 通过 .ajax() 发送表单数据，然后在成功后显示您的消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T01:12:10.013

您没有隐藏`#contact_thanks` `div`，而是隐藏了一些未命名的内容`div`：

```
<div style="display: none">
  <div id="contact_thanks" style="padding-top: 10px; padding-right: 10px; padding-bottom: 
.... 
```

要么给那个未命名`div`的名字（id），然后`$().show()`用 jQuery 给它，或者只是隐藏实际的`#contact_thanks` `div`.

所以而不是：

```
<div style="display: none">
      <div id="contact_thanks" style="...... 
```

像这样：

```
<div id="give_the_div_a_name_either_way">
      <div id="contact_thanks" style="display: none" 
```

然后用一点 jQuery：`$("#contact_thanks").show();`

应该做的伎俩。

# javascript - 骨干路由器导航和锚定href

> ID：12081894
> 
> 赞同：23
> 
> 时间：2012-08-22T21:47:46.507
> 
> 标签：javascript, backbone.js

在支持主干的应用程序中，我看到代码继续使用`<a href="#foo"></a>`，而锚点单击由主干事件处理程序处理。

或者，可以通过以下方式处理对 #foo 的导航：

```
Router.history.navigate("foo"); 
```

我相信后者是更好的方法，因为它可以轻松地与 HTML5 的 pushState 功能进行迁移。如果我们确实使用 pushState，对于不支持 pushState 的浏览器，Backbone 将能够优雅地降级为 #foo。

由于我仍然是 Backbone 的新手，是否可以有更有经验和知识渊博的人确认是这种情况？

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-08-22T22:07:52.077

我个人已经`pushState`启用并使用了 Tim Branyen 的骨干样板中采用的方法，即[添加一个单击处理程序](https://github.com/tbranyen/backbone-boilerplate/blob/master/app/main.js#L22)，该处理程序将所有链接点击发送到，`navigate`除非它们具有`data-bypass`属性：

```
$(document).on("click", "a:not([data-bypass])", function(evt) {
  var href = { prop: $(this).prop("href"), attr: $(this).attr("href") };
  var root = location.protocol + "//" + location.host + Backbone.history.options.root;

  if (href.prop && href.prop.slice(0, root.length) === root) {
    evt.preventDefault();
    Backbone.history.navigate(href.attr, true);
  }
}); 
```

这工作得很好，正如@nickf 提到的那样，您不必使用哈希/哈希邦黑客，即使对于不支持 pushState 的浏览器也是如此。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-22T22:04:35.660

你应该把你的链接写成它们的“正确”地址，也就是说，不要使用散列，这只是绕过特定浏览器的一些缺陷的黑客。为了让这一切正常工作，请附加一个点击处理程序来捕获对这些项目的点击并将 URL 传递给 Backbone.history，然后它可以使用 pushState 或在需要时转换为 hashbang 的 URL。例如：

```
$(document).on('click', 'a[href^="/"]', function (event) {
    // here, ensure that it was a left-mouse-button click. middle click should be
    // allowed to pass through
    event.preventDefault();
    Backbone.history.navigate(this.href);
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-09-15T18:56:59.390

Chris 的回答很棒，但还有一个补充可以让它变得更好。`Backbone.history.navigate()`实际上返回 true 或 false 告诉我们它是否可以在内部路由到它。因此，我们可以跳过该`data-bypass`属性并改为执行以下操作：

```
$(document).on("click", "a", function(evt) {
  var href = { prop: $(this).prop("href"), attr: $(this).attr("href") };
  var root = location.protocol + "//" + location.host + Backbone.history.options.root;

  if (href.prop && href.prop.slice(0, root.length) === root) {
    if (Backbone.history.navigate(href.attr, true)) {
      evt.preventDefault();
    }
  }
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-22T21:57:18.463

是的，我尝试在我的 Backbone 应用程序中尽可能多地使用 Router.history.navigate。这还有一个好处是，如果用户在浏览器中键入 URL“/foo”，Backbone 会正确路由它。显然，如果它是一个外部链接或您不想用 Backbone 处理的东西，那么您不应该包含它。

# python - python中的时间延迟循环

> ID：12081895
> 
> 赞同：3
> 
> 时间：2012-08-22T21:47:52.383
> 
> 标签：python

我有

```
for i in xrange(repeat):
  #does my stuff
  time.sleep(10) 
```

但是，如果这是最后一次运行，我不希望它睡觉。意思是，如果没有更多的迭代，不要睡觉

我该如何优雅地处理这个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-22T21:54:21.963

```
case of 1x repetition: doStuff
case of 2x repetition: doStuff, sleep, doStuff
case of 3x repetition: doStuff, sleep, doStuff, sleep, doStuff
... 
```

你似乎想要做一堆事情，然后在每件事之间睡觉。

此外，延迟与任务的性质无关。

* * *

**解决方案 1——如果不是最后一个就休眠**

最简单的方法是对 for 循环进行特殊处理：

```
for i in range(numTimesToRepeat):
    if i>0:
        time.sleep(lengthToSleep)
    doStuff() 
```

您也可以执行以下操作，但由于您重复，它就不那么优雅了`doStuff()`：

```
doStuff()
for i in range(numTimesToRepeat-1):
    time.sleep(lengthToSleep)
    doStuff() 
```

* * *

**解决方案 2 -- 带 break 的 While 循环**

解决这些问题最直接的方法之一是跳出 while 循环。它很脏，而且有点非函数式编程，但这是人类自然会想到的问题：

```
numTimesToRepeat = ...
while True:
    doStuff()                     # we did stuff
    numTimesToRepeat -= 1         # repeat one less time because we just did it
    if numTimesToRepeat==0:       # do we repeat again?
        break                     #   no -> done!
    else:
        time.sleep(lengthToSleep) #   yes -> sleep before repeating 
```

虽然循环很烦人，因为如果您犯了编程错误，您的程序将无限循环。

* * *

**解决方案 3 -- 检测是否最后**

如果不是循环的第一次迭代，上述方法会做一些事情。但是，“检测循环的最后一次迭代”是您尝试解决问题的方式。这有点烦人，但你可以这样做：[https](https://stackoverflow.com/a/6090673/711085) ://stackoverflow.com/a/6090673/711085并像这样使用它：

```
for i,task,isLast in enumerateLast(tasks):
    task()
    if not isLast:
        time.sleep(lengthToSleep) 
```

不太优雅的是反转列表并执行以下操作`enumerate()`：

```
for untilLast,task in reversed(enumerate(reversed(tasks))):
    task()
    if untilLast>0:
        time.sleep(lengthToSleep) 
```

（非常小的无关细节：请注意，在这种`reversed(enumerate(reversed(iterable)))`情况下，如果任务是一个生成器，它将生成每个要执行的任务，以相反的顺序枚举它们，然后执行它们：这可能会导致滞后，并且还会阻止您创建无限任务生成器）

* * *

**任务抽象**

无论您采用哪种方式，您都可能希望通过创建回调来抽象任务的概念，在回调中插入每个之间的延迟，有点像`''.join`.

```
def callAndWaitBetween(tasks):
    for ..task.. in enumerate?(tasks):
        #... some solution to this problem...
        task() 
```

作为参考，如果延迟取决于任务，那么您的任务应该返回等待多长时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-22T21:53:23.193

试试这个：

```
for i in xrange(repeat):
  if i<repeat:
    time.sleep(10) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-22T22:10:12.640

如果你所做的只是睡觉，你可以做到

```
for i in range(repeat)[:-1]:
  time.sleep(10) 
```

但是，如果您确实需要执行某种类型的操作，那么：

```
sleep = [lambda: time.sleep(20) for i in range(repeat)[:-1]] + [lambda: None]

for i in xrange(repeat):
  # do stuff
  sleep.pop(0)() 
```

如果您确实有很多迭代，请使用`itertools`创建生成器而不是列表`sleep`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T22:04:11.937

一个while循环可能会起作用

```
while repeat > 0:
    #do stuff
    if repeat > 1:
        time.sleep(10)
    repeat -= 1 
```

只需将 repeat 直接设置为循环重复的次数，而不是使用 xrange。

# c# - 在具有已知良好登录名的远程计算机上访问 PrincipalContext 时访问被拒绝

> ID：12081899
> 
> 赞同：6
> 
> 时间：2012-08-22T21:48:03.257
> 
> 标签：c#, active-directory, directoryservices

我正在尝试将域帐户添加到远程计算机的管理员组。我遇到的问题是，当我尝试实际连接到远程计算机 PrincipleContext 时，它给了我一条拒绝访问消息，但我以远程计算机本地管理员的身份连接。当我尝试访问它时，虽然我得到**"Access is denied"**。我知道登录名是正确的，因为如果我更改它，我会得到一个错误的密码/用户名错误。

管理员帐户是真正的管理员帐户，我可以使用该帐户登录到本地框，并且我具有完全的管理员访问权限，我可以根据需要将用户添加到管理员组，而不会出现任何问题。有什么想法会导致它在尝试远程执行此操作时报告访问被拒绝？

```
try
      {
        using (PrincipalContext pc = new PrincipalContext(ContextType.Machine, "SERVER_IP_HERE", null, ContextOptions.Negotiate, @"RemoteMachineNameHere\Administrator", "MyPassword"))
        {
          //Get an access denied error here trying to connect to the Context
          GroupPrincipal group = GroupPrincipal.FindByIdentity(pc, "Administrators");
          PrincipalContext dom1PC = new PrincipalContext(ContextType.Domain, "FQDNOFDomainHere");
          var me = UserPrincipal.FindByIdentity(dom1PC, IdentityType.SamAccountName, @"MyUserName");
          group.Members.Add(me);
          group.Save();
        }
      }
      catch (System.DirectoryServices.DirectoryServicesCOMException E)
      {
        Console.WriteLine(e);

      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-07-20T08:27:40.340

我遇到了同样的问题，经过两天的搜索，终于找到了[类似主题](https://stackoverflow.com/questions/828432/psexec-access-denied-errors/14103682#14103682)的解决方案。

```
reg add HKLM\SOFTWARE\Microsoft\Windows\CurrentVersion\Policies\system /v LocalAccountTokenFilterPolicy /t REG_DWORD /d 1 /f 
```

在您的目标服务器上执行以上 cmd 然后重新启动，您将不再被拒绝访问！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-05-31T11:54:35.063

出色地！我有一台配置了域并安装了 AD 的服务器。我们将其命名为**A**。我需要从属于网络的其他 PC **B连接到它***（但是它没有加入域）*。

因此，对于这种情况，唯一的更改是在线完成 -

```
using (PrincipalContext pc = new PrincipalContext(ContextType.Machine, "SERVER_IP_HERE", null, ContextOptions.Negotiate, @"DomainNameOfRemoteMachineHere\Administrator", "MyPassword") 
```

*所以这里是代码 -*

```
static void Main()
    {
        try
        {
            using (PrincipalContext pcRoot = new PrincipalContext(ContextType.Machine, "IP_Address", null, ContextOptions.Negotiate, @"domainNameHere\Administrator", "SomePass"))
            {
                //Get an access denied error here trying to connect to the Context
                var group = GroupPrincipal.FindByIdentity(pcRoot, "Administrators");
                var pc = new PrincipalContext(ContextType.Domain, "FQDNOFDomainHere");
                var user = UserPrincipal.FindByIdentity(pc, IdentityType.SamAccountName, "vssaini");

                if (group == null)
                {
                    Console.WriteLine("Group not found.");
                    return;
                }

                if (user == null)
                    Console.WriteLine("User not found.");
                else
                    group.Members.Add(user);

                group.Save();
            }
        }
        catch (Exception exc)
        {
            Console.WriteLine(exc);
        } 

        // Wait for output
        Console.ReadKey();
    } 
```

在测试时它运行顺利。

# java - 使用 iText 旋转 PdfSignatureAppearance

> ID：12081902
> 
> 赞同：3
> 
> 时间：2012-08-22T21:48:21.297
> 
> 标签：java, rotation, itext, electronic-signature

我在尝试在 iText 中旋转 PdfSignatureAppearance 时遇到了一个大问题（例如 90 度）。我正在使用 MakeSignature.signDetached 方法签署 PDF，并为外观设置我自己的文本和图像。

这是一些代码：

```
PdfReader reader = new PdfReader("my input file");
FileOutputStream fout = new FileOutputStream("my output file");

PdfStamper stamper = PdfStamper.createSignature(reader, fout, '\0');
PdfSignatureAppearance sap = stamper.getSignatureAppearance();

sap.setLayer2Text("Signed by someone");
sap.setAcro6Layers(true);
sap.setSignatureGraphic("my signature image", null));
sap.setRenderingMode(PdfSignatureAppearance.RenderingMode.GRAPHIC_AND_DESCRIPTION);

Rectangle pageSize = reader.getPageSize(1); //the page to sign: 1 is the 1st one

Rectangle rect = new Rectangle(llx, lly, urx, ury, rotation);
//llx, lly ... come from a GUI. They are working fine, but the rotation is not considered

sap.setVisibleSignature(rect, 1, null); //1 is the page to sign

MakeSignature.signDetached(sap, ...); //sign the document 
```

我的问题是“轮换”论点。无论我设置什么，文本和图像都不会旋转。查看iText代码（我使用的是iText 5.3.2），签名层边界框的旋转参数被丢弃，所以，这样设置旋转根本没有效果。

现在的问题是：有没有办法在不重写整个 PdfSignatureAppearance 和 MakeSignature 类的情况下旋转我的签名层？

只是为了澄清：对文档进行数字签名的代码工作正常。我唯一的问题是签名的可视层：我无法旋转它。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-04-27T23:52:38.757

一个允许重用代码的工作示例`com.itextpdf.text.pdf.PdfSignatureAppearance`（例如，自动计算字体大小）：

```
public class RotateVisualSignature {
    public static void main(String[] args) throws IOException, DocumentException, GeneralSecurityException {
        // Loading private key and certificates.
        KeyStore keyStore = KeyStore.getInstance("PKCS12");
        keyStore.load(new FileInputStream("signer.p12"), "secret".toCharArray());
        String alias = keyStore.aliases().nextElement();
        PrivateKey privateKey = (PrivateKey) keyStore.getKey(alias, "secret".toCharArray());
        Certificate[] certificateChain = keyStore.getCertificateChain(alias);

        PdfReader reader = new PdfReader("sample.pdf");
        FileOutputStream os = new FileOutputStream("sample-signed.pdf");
        PdfStamper stamper = PdfStamper.createSignature(reader, os, '\0');
        PdfSignatureAppearance appearance = stamper.getSignatureAppearance();
        appearance.setCertificate(certificateChain[0]);

        // This method has to be called as an alternative to 'com.itextpdf.text.pdf.PdfSignatureAppearance.setVisibleSignature'.
        setVisibleSignatureRotated(stamper, appearance, new Rectangle(120, 650, 170, 770), 1, null);

        // Perform the signature.
        ExternalSignature externalSignature = new PrivateKeySignature(privateKey, "SHA-256", null);
        ExternalDigest externalDigest = new BouncyCastleDigest();
        MakeSignature.signDetached(appearance, externalDigest, externalSignature, certificateChain, null, null, null, 0, MakeSignature.CryptoStandard.CMS);
    }

    private static void setVisibleSignatureRotated(PdfStamper stamper, PdfSignatureAppearance appearance, Rectangle pageRect, int page, String fieldName) throws DocumentException, IOException {
        float height = pageRect.getHeight();
        float width = pageRect.getWidth();
        float llx = pageRect.getLeft();
        float lly = pageRect.getBottom();
        // Visual signature is configured as if it were going to be a regular horizontal visual signature.
        appearance.setVisibleSignature(new Rectangle(llx, lly, llx + height, lly + width), page, null);
        // We trigger premature appearance creation, so independent parts of it can be modified right away.
        appearance.getAppearance();
        // Now we correct the width and height.
        appearance.setVisibleSignature(new Rectangle(llx, lly, llx + width, lly + height), page, fieldName);
        appearance.getTopLayer().setWidth(width);
        appearance.getTopLayer().setHeight(height);
        PdfTemplate n2Layer = appearance.getLayer(2);
        n2Layer.setWidth(width);
        n2Layer.setHeight(height);
        // Then we rotate the n2 layer. See http://developers.itextpdf.com/question/how-rotate-paragraph.
        PdfTemplate t = PdfTemplate.createTemplate(stamper.getWriter(), height, width);
        ByteBuffer internalBuffer = t.getInternalBuffer();
        internalBuffer.write(n2Layer.toString().getBytes());
        n2Layer.reset();
        Image textImg = Image.getInstance(t);
        textImg.setInterpolation(true);
        textImg.scaleAbsolute(height, width);
        textImg.setRotationDegrees((float) 90);
        textImg.setAbsolutePosition(0, 0);
        n2Layer.addImage(textImg);
    }
} 
```

结果将是这样的：

[![旋转视觉签名](../Images/e246b56b9c5505bade03900f7ce4b4c5.png)](https://i.stack.imgur.com/FLktj.png)

要使用它，您只需按`setVisibleSignatureRotated`原样复制方法并将调用替换为`com.itextpdf.text.pdf.PdfSignatureAppearance#setVisibleSignature`调用`setVisibleSignatureRotated`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T11:53:43.887

目前不支持在使​​用便捷方法（例如 setRenderingMode()、setLayer2Text()、setSignatureGraphic() 等）创建签名时设置旋转...

因此，您有两个选择： 1\. 要求我们提供该功能。数字签名白皮书前 90 页的草稿刚刚发布给新闻信的订阅者，因此我们正在研究这些课程。但是：使用智能卡签名、重构验证过程等……目前是绝对优先的，所以你可能需要等待一段时间。2\. 使用 getLayer() 方法沿您想要的任何方向绘制内容。对于背景中的图像，那将是 getLayer(0)；和 getLayer(2) 用于文本。

请注意，以前也有第 1、3、4 层，但它们只有在 acro6Layers 等于 true 时才会起作用；这就是你的情况，但不鼓励使用 acro6Layers（它已经过时了：你不应该再使用它了）。事实上，我现在将弃用该方法并将该值默认设置为 false。

# php - 使用 PHP exec 执行命令

> ID：12081903
> 
> 赞同：0
> 
> 时间：2012-08-22T21:48:27.113
> 
> 标签：php, shell, exec

我正在处理我的一个项目。我在我的 Windows 机器上使用 XAMPP 来开发项目。这是我面临的问题。我需要在服务器上执行一个 shell 脚本并在网页上显示结果。问题是大多数脚本都按预期运行，但我无法获得以下命令的输出，

> ls, 猫, 密码

因为这些命令返回给我一个空白数组。

我无法找到确切的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T22:05:33.110

这不是您问题的直接答案，但我觉得指出`ls`,`cat`和的功能`pwd`可以在 PHP 中模拟很重要，所以如果您所做的只是调用这些命令并将结果传递回 PHP ，那么调用它们可能没有任何意义。

`ls`是一个目录列表。PHP 提供了一个名为的类[`DirectoryIterator`](http://php.net/manual/en/class.directoryiterator.php)，只需几行代码就可以做到这一点：

一个例子：

```
$iterator = new DirectoryIterator($directory);
foreach ($iterator as $fileinfo) {
    if ($fileinfo->isFile()) {
        print "File: ".$fileinfo->getFilename();
    }
} 
```

`pwd`获取当前目录。PHP 有一个内置函数[`getcwd()`](http://php.net/manual/en/function.getcwd.php)，可以在一行代码中执行此操作。

`cat`将文件（和管道）打印到输出缓冲区。这可能也可以在 PHP 中完成。`cat`有时用于一些您可能希望保留在 shell 中的相当复杂的命令行内容。但是对于简单的东西（甚至是中等复杂的东西），PHP 完全可以胜任。

了解更多关于您想要实现的目标会有所帮助，但我相信 PHP 能够完成听起来像您正在做的事情，而无需使用 shell。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T21:50:29.420

使用[`passthru()`](http://php.net/manual/en/function.passthru.php)而不是`exec()`.

# javascript - 结束多次调用（由于循环引用） - JQuery

> ID：12081904
> 
> 赞同：0
> 
> 时间：2012-08-22T21:48:38.327
> 
> 标签：javascript, jquery

我的目标相当简单。在我的 web 应用程序中，我有两个页面，我想从另一个页面调用每个页面。

但是我在 Javascript 中实现函数调用的方式似乎有缺陷。我已经阅读了`closure`、和`bubbling`，但仍然不确定实现这一点的正确方法。`recursion``event.stopPropagation()`

这是我可以重现我的问题的最小代码。

```
    函数初始化（）{
    var $div1 = '点击加载页面 2';
    $("#main").append($div1);

    var $div2 = '点击返回第一页';
    $("#main").append($div2);    
    显示第一页（）；
}

    函数显示第一页（）{
    var $div1 = $("#div1");
    var $div2 = $("#div2");    

    $div2.hide();
    $div1.show();

    alert("第一次调用");

    $div1.click(函数(){
    显示第二页（）；
    });
}

    函数 displaySecondPage() {
    var $div1 = $("#div1");
    var $div2 = $("#div2");    

    alert("第二次调用");
    $div1.hide();
    $div2.show();

    $div2.click(函数(){
    显示第一页（）；
    });
}

```

几次单击 div 后，我最终弹出了**许多**警报。我只希望每个调用都执行一次。显然，我错过了终止函数调用的方法。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T21:52:32.790

您的

```
$div1.click(function(){
    displaySecondPage();
}); 
```

和

```
$div2.click(function(){
    displayFirstPage();
}); 
```

应该在你的`init()`函数里面。每次调用它们时，您都会向 div 添加另一个单击处理程序。您只想添加一次，所以只需将它们放入`init()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T21:58:44.020

我认为这个问题是因为每次调用显示函数时都会将一个新的匿名函数绑定到 click 事件。

将点击绑定代码移动到您的 init() 函数中：

```
function init(){
    var $div1 = 'Click to Load page 2';
    $("#main").append($div1);

    var $div2 = 'Click to go back to  page 1';
    $("#main").append($div2);  

    var $div1 = $("#div1");

    $div1.click(function(){
    displaySecondPage();
    });

    var $div2 = $("#div2");

    $div2.click(function(){
    displayFirstPage();
    });    

    displayFirstPage();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-22T22:02:45.313

如果出于某种原因您不想将`.click()`函数放入函数中`init()`（如[Golf](https://stackoverflow.com/a/12081943/503550)所描述的），则可以将每一`.click()`行更改为`.unbind().click()`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-22T21:52:48.513

我认为您每次调用时都会添加一个新的点击处理程序

$div2.click(函数)

# php - php脚本中的代理并通过浏览器连接到它

> ID：12081909
> 
> 赞同：0
> 
> 时间：2012-08-22T21:49:12.167
> 
> 标签：php, proxy, socks

我可以找到任何充当代理服务器（袜子，http，..）的php脚本并通过firefox连接到它（就像任何其他代理服务器一样）（例如，在该脚本充当代理之后首先运行脚本，...）我想绕过过滤

我已经看到了这个 sourceforge.net/projects/php-proxy ，我需要像 socks 代理一样连接到它

我没有任何服务器用作 ssh 隧道或在其中安装其他代理应用程序我只有服务器并允许在其中运行任何 php screapt

坦克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T15:00:59.747

代理服务器基本上做一件简单的事情：它加载您请求的日期（为了更容易，我假设它是其余答案中的一个网站）并将其发送给您。因为您不直接连接到该网站，所以它认为您位于请求页面的位置**：**您的服务器。

有多种方式可以连接到代理服务器，其中一些使用自定义协议，而您可以在 Web 浏览器中使用 http(s) 连接到其他方式。因为您提到您想使用 Firefox 连接到您的代理，所以我假设您需要一个 Web 代理，例如[hidemyass.com](http://hidemyass.com)。

当您在 Web 代理上请求网页时，会按此顺序发生以下事情：

1.  您的计算机向 Web 代理发送请求。在此请求中也是您要加载的网站的地址；
2.  代理打开您请求的网站。由于网站基本上只是一个数据文档，因此您可以使用一个简单的函数来打开它，例如`file_get_contents()`. 或者，您可以使用`CURL`更多选项和更好的性能。您将此数据保存在变量中；
3.  代理现在已经获得了网站，但还不能向用户显示。因为几乎每个网站都加载其他文件（如样式表、脚本、图像甚至其他 HTML 文档），所以您还需要使用代理而不是用户的 Internet 连接来加载这些文件。实现这一点的最简单（而且不是无懈可击）的方法可能是查找`http://`数据中的每一个并将其替换为对代理服务器的请求；
4.  现在您已将网站保存在服务器上的变量中，您只需将其显示给用户即可。您可以将其打印到屏幕上。只要确保使用请求的文件传递正确的标题！

请注意，这不是完美的代理服务器：例如，您还需要支持 https 请求并检查 AJAX 请求（或完全禁用 Javascript，许多代理服务器都会这样做）。如果您只想使用代理服务器，我建议您查看现有的（或查看您链接到的 Sourceforge 项目中的评论，其中包含指向更好替代方案的链接）。但是，如果您发现这是一个有趣的项目，那么祝您好运！

# sql - Oracle 数据密集化填补空白

> ID：12081911
> 
> 赞同：1
> 
> 时间：2012-08-22T21:49:13.790
> 
> 标签：sql, database, oracle

试图填补表格上的空白以用于报告目的，该表格仅在表格上的值更改时才更新。

![在此处输入图像描述](../Images/379e7847c14c19ecc7a848a47a8cfb47.png)

**代码：**

```
WITH 
week_list AS --List of weeks
 (
  SELECT (  (trunc(to_date('06152012','mmddyyyy'), 'IW')+7) - (LEVEL * 7) )+6 as week 
      from dual
      connect by level <= 7
  order by ( (trunc(to_date('06152012','mmddyyyy'), 'IW')+7) - (LEVEL * 7) )+6
 )  
SELECT 
  product, 
  week,
  undist_amt_eod as quantity,
  LAST_VALUE(undist_amt_eod IGNORE NULLS) OVER (PARTITION BY product ORDER BY week) repeated_quantity
FROM 
 (
    SELECT 
      product, 
      week_list.week, 
      inv_table.undist_amt_eod
    FROM 
      inv_table PARTITION BY (product)
        RIGHT OUTER JOIN week_list ON (week_list.week = inv_table.history_date)
    where 
      inv_table.tab = '*' --Includes all types of this product
  )
ORDER BY product, week; 
```

**周列表示例输出：**

![在此处输入图像描述](../Images/cdb85462cfb28e04f5db464443bd398d.png)

**表格内容：**请注意，表格每天可以有多个选项卡。* 是当天所有选项卡的总和，所以我只对 * 值感兴趣。

![在此处输入图像描述](../Images/f1aef7adfc5575e9022347bdbefcff2e.png)

我基于[此处](http://docs.oracle.com/cd/B19306_01/server.102/b14223/analysis.htm)找到的 oracle 示例中的代码。不确定为什么数据输出仍然不密集。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-23T03:12:00.533

问题是您的 WHERE 子句：

```
where inv_table.tab = '*' --Includes all types of this product 
```

因为您正在执行右外连接，所以 inv_table.tab 将在没有匹配项时为 NULL。将其更改为以下内容之一：

```
where inv_table.tab = '*' or inv_table.history_date is null --Includes all types of this product 
```

或者，如果 inv_table.tab 永远不能为 NULL，则：

```
where coalesce(inv_table.tab, '*') = '*' 
```

# c# - 将添加的树节点背景颜色更改为红色

> ID：12081912
> 
> 赞同：0
> 
> 时间：2012-08-22T21:49:14.457
> 
> 标签：c#, asp.net, treeview

似乎是一个相当简单的请求，但我还没有找到解决方案。我以编程方式将根节点添加到 asp.net 树视图控件。我想将该节点更改为只有该节点的颜色为红色。

有人请 C# asp.net 代码吗？我添加节点的代码如下。谢谢，

达摩

```
TreeNode onjParent = new TreeNode(ItemShouldExist, ItemShouldExist);                             
onjParent.PopulateOnDemand = true;
TreeViewAddItems.Nodes.Add(onjParent);
onjParent.Checked = true; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T21:55:42.993

这将 10 个节点添加到 Treeview，并且只有节点 4 具有红色背景。

```
protected void Page_Load(object sender, EventArgs e)
{
    for (int i = 0; i < 10; i++)
    {
        if (i == 4)
            this.TreeView1.Nodes.Add(new TreeNode() { Text = "<span style='background-color:red'>Node_" + i + "</span>", Value = i.ToString() });
        else
            this.TreeView1.Nodes.Add(new TreeNode() { Text = "Node_" + i, Value = i.ToString() });
    }
} 
```

编辑：将字体颜色更改为背景。祝你好运！

# eclipse - 为什么“运行 Ant Build”的 Eclipse 键盘快捷键仅适用于某些文件扩展名？

> ID：12081914
> 
> 赞同：0
> 
> 时间：2012-08-22T21:49:23.880
> 
> 标签：eclipse, ant, keyboard-shortcuts, build.xml

如果我在一个 .txt 文件中`Alt-Shift-X`，`Q`或者使用我自己创建的`Alt-R`快捷方式，它会运行该项目的 build.xml。

如果我在一个 .js 文件中并且我做同样的事情，它什么也不做。

我用不同的文件、文件类型和编辑器进行了测试，绝对是文件扩展名决定了它是否有效。

其他键盘快捷键（与“在 Windows”中的“时间”相同）在所有文件中都可以正常工作。

一些扩展名（.txt、.cfm、.xml）有效，而另一些（.html、.js、.less、.cfg）则无效。

我可以看到的工作之间的唯一链接是，当查看首选项>常规>编辑器>文件关联时，那些工作的链接`locked by 'X' content type`至少有一个关联的编辑器。

经测试，将 *.js 添加到“文本”内容类型可使快捷方式适用于 JS 文件。

**为什么分配“内容类型”允许具有特定扩展名的文件运行 Ant 构建文件？**

无论当前文件类型如何，如何使其工作（无需检查并设置所有文件扩展名的内容类型以及所有非扩展文件的名称）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T06:06:27.563

键绑定不是全局存在的，而是为给定的上下文定义的。Eclipse 中所有现有的[上下文](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/guide/workbench_advext_contexts.htm)构成一个层次结构，例如“编辑文本”以“在窗口中”作为父级，以“在对话框和窗口中”作为父级。

如果激活了某个上下文（插件明确需要这样做），则此上下文和该层次结构中所有父级的所有键绑定都可用。由于“运行 Ant Build”命令绑定到“在 Windows 中工作”上下文，我*猜想*非工作编辑器仅在您描述的某个内容类型处于活动状态时才设置该上下文（我会评价一个错误） . 或者他们定义了一个将“在对话框和 Windows 中”作为直接父级的上下文，从而“绕过”了定义快捷方式的“在 Windows 中”上下文。

一种可能的解决方法*可能是*将首选项中的键绑定上下文从“在 Windows”中更改为“在对话框和 Windows 中”。

# java - 如何训练 POSTagger OpenNLP 并将结果附加回旧模型？

> ID：12081915
> 
> 赞同：1
> 
> 时间：2012-08-22T21:49:24.710
> 
> 标签：java, opennlp

所以，我正在尝试使用 POSTagger 的培训 API。但我想将新的训练数据附加到旧模型中。或者，如果我想多次训练它，我会有很多模型文件。我如何将结果组合回现有模型。所以，我只有一个数据更大的模型。我认为模型文件是一个二进制文件，所以我不确定在这种情况下附加文件是否可以工作。

这是我的代码

```
 public class POSTraining {
    private final String outputModel;
    private InputStream dataIn;

    public POSTraining() throws IOException {
        outputModel = this.getClass().getResource("/model/en-pos-maxent.bin").getPath();
        dataIn = this.getClass().getResourceAsStream("/model/en-pos.train");
    }

    public static void main(String args[]) throws IOException {

        POSTraining posTraining = new POSTraining();
        posTraining.train();
    }

    public void train() {
        try {
            ObjectStream lineStream = new PlainTextByLineStream(dataIn, "UTF-8");
            ObjectStream sampleStream = new WordTagSampleStream(lineStream);

            TrainingParameters trainParams = new TrainingParameters();
            trainParams.put("model", ModelType.MAXENT.name());
            POSModel trainedModel = POSTaggerME.train("en", sampleStream, trainParams, null, null);

            BufferedOutputStream bufferedOutputStream = new BufferedOutputStream(new FileOutputStream(outputModel));
            trainedModel.serialize(bufferedOutputStream);

        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            if (dataIn != null) {
                try {
                    dataIn.close();
                } catch (IOException e) {
                    // Not an issue, training already finished.
                    // The exception should be logged and investigated
                    // if part of a production system.
                    e.printStackTrace();
                }
            }
        }

    }
} 

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T21:50:18.957

NLP 模型通常无法做到这一点。您无法逐步调整它们。

# ios - 当 UIScrollView 在可见视图之外滚动按钮时更改 UIButton textLabel 位置

> ID：12081917
> 
> 赞同：0
> 
> 时间：2012-08-22T21:49:35.013
> 
> 标签：ios, uiscrollview, uibutton, uilabel

我有一个有趣的场景，我有点坚持想法。我希望有人知道某种“UIButton+FloatingLabel”类别，或者可能只是我忽略的一些简单的东西。

我有一个水平滚动的 UIScrollView 和一堆不同宽度的按钮。我面临的问题是，当 UIButton 开始在可见视图之外滚动时，textLabel 随之而来（标签在按钮中是 leftAligned）。

我希望能够检测到这一点并将标签“浮动”在剩余按钮的视图中，直到整个按钮滚动离开。

我能想到的最接近的事情是覆盖 UIScrollView`layoutSubviews`并在每次 contentOffset 更新时检查标签视图，但这对于很多按钮来说可能非常昂贵。

谁能提供一些指导或几个有用的链接？任何帮助表示赞赏，干杯！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T22:27:31.617

可以实现的一种方法是子类化`UIButton`并在该子类中使用您自己的标签。然后覆盖`drawRect:`您的自定义方法`UIButton`以根据按钮在物理屏幕上的位置 ( `[UIScreen mainScreen]`) 更改标签的位置。

希望这可以帮助。

# android - Android 使用 TextWatcher 替换单词

> ID：12081924
> 
> 赞同：4
> 
> 时间：2012-08-22T21:50:23.833
> 
> 标签：android, android-edittext

我有一个`editText`，你在里面写一些东西，然后当你点击下一步..你写的文本被写入另一个editText..它工作得很好..但我想用 textWatcher 替换一些字母..

示例：如何使 S 成为 $ 或 O 成为 @

**更新：**

```
 final EditText First = (EditText)findViewById(R.id.etFirst);
    String strFirst = First.getText().toString();
    final TextView done = (TextView)findViewById(R.id.tvName);
    String strDone = done.getText().toString();
    Button Trans = (Button) findViewById(R.id.bTrans);

        Trans.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                //First EditText
                if (First.getText().toString().equals("John")) {
                    done.setText("JOHN");
                } else {
                if (First.getText().toString().equals("Ahmed")) {
                    done.setText("AHMED");
                } else  {
                done.setText(First.getText());
                                }
                            }
                        };
                    });

        First.addTextChangedListener(new TextWatcher() {
            public void onTextChanged(CharSequence s, int start, int before, int count) {
            }

            public void beforeTextChanged(CharSequence s, int start, int count, int after)    {
            }

            public void afterTextChanged(Editable s) {
            done.setText(First.getText().toString().replaceAll("S", "$"));
            }
            }); 
```

我的代码会将您在 EditText 中写入的内容输入到下面的大型 TextView 中。当我按下按钮时`Trans`，它会设置您编写的文本，但我想将一些字母示例 S 替换为 $ .. 当我输入 S 时，什么也没有发生..只是 S 它不会是 $ ..

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T21:58:00.663

将 Textwatcher 分配给您的 editText 然后执行类似的操作

```
editText.setText(editText.getText().toString().replaceAll("S", "$")); 
```

这是应用了代码的 textWatcher

```
 final EditText First = (EditText)findViewById(R.id.etFirst);
    String strFirst = First.getText().toString();
    final TextView done = (TextView)findViewById(R.id.tvName);
    String strDone = done.getText().toString();
    Button Trans = (Button) findViewById(R.id.bTrans);

        Trans.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                //First EditText
                if (First.getText().toString().equals("John")) {
                    done.setText("JOHN");
                } else {
                if (First.getText().toString().equals("Ahmed")) {
                    done.setText("AHMED");
                } else  {
                done.setText(First.getText());
                                }
                            }
                        };
                    });

        First.addTextChangedListener(new TextWatcher() {
            public void onTextChanged(CharSequence s, int start, int before, int count) {
            }

            public void beforeTextChanged(CharSequence s, int start, int count, int after)    {
            }

            public void afterTextChanged(Editable s) {
                String text = First.getText().toString();
                text = text.replace('s', 'd'); // Any of the diffrent replace methods should work.
                text = text.replace('S', '$'); // This uses the char replace method. Note, the ' quotations
                text = text.replace('O', '@');
                text = text.replace('o', '@');
                done.setText(text);
            }
        }); 
```

错误可能在于您再次获取旧字符串并对其进行应用`text.replace`。而不是修改后的字符串。我原以为它会得到新的字符串，但 setText 似乎没有立即触发。

因此，如果您将字符串放入变量中，则应用所有更改。然后把它放回你的文本框就可以了。( `I have tested and working code here Pasted above`)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T22:01:22.910

将第一个 EditText 的值放入第二个 EditText 的值时，可以使用 Java 的`replace()`String 函数。例如，以下代码打印“$X@$$”。

```
String value = "SXOSS";
String newValue = value.replace("S", "$"); //replaces all instances of S with $
newValue = newValue.replace("O", "@"); //replaces all instances of O with @
System.out.println(newValue); 
```

# python - 使用 matplotlib pcolor 进行插值

> ID：12081932
> 
> 赞同：6
> 
> 时间：2012-08-22T21:51:05.987
> 
> 标签：python, numpy, matplotlib, scipy

我有两个 numpy 数组，第一个是 (30, 365) 并且包含全年 30 个深度的值，第二个数组是 (30, 1) 并且包含与深度对应的实际深度（以米为单位）第一个数组。我想绘制第一个数组，以便根据第二个数组缩放深度，但我还希望对数据进行插值（前几个深度相对靠近，而较低的深度相距很远，为 pcolor 图像提供块状外观.)

这就是我正在做的事情：

```
import numpy as np
import matplotlib.pyplot as plt

x = np.arange(0, 365, 1)
X, Y = np.meshgrid(x, depth)    #depth is the (30, 1) array

plt.pcolor(X, -Y, data)         #data is the (30, 365) array 
```

这导致了块状外观，关于如何获得更平滑的图形的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T22:55:51.547

您的深度是否在规则网格上（即恒定间距）？如果是这样，您可以使用关键字 and来`imshow`设置范围。否则，您有两个选择。`extent``aspect='auto'`

您可以`pcolormesh`改用并使用`shading='gouraud'`. 这将有助于清晰的颜色量化，但不如插值好。

第二种选择是将数据插值到一个新的常规深度网格中，这样您就可以使用`imshow`不同的插值选项。例如，要仅沿深度方向进行插值，您可以使用 scipy's `interpolate.interp1d`：

```
from scipy.interpolate import interp1d

fint = interp1d(depth, data.T, kind='cubic')
newdata = fint(newdepth).T 
```

之所以`.T`添加，是因为插值必须在最后一个索引上，而深度是数据的第一个索引。如果您愿意，可以替换`kind`为。`'linear'`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-22T22:01:35.953

不，`pcolor`不做插值。您可以尝试`NonUniformImage`，甚至可以`imshow`代替。[在此处](http://matplotlib.sourceforge.net/examples/pylab_examples/image_nonuniform.html)查看示例

# math - 数学优化

> ID：12081934
> 
> 赞同：0
> 
> 时间：2012-08-22T21:51:24.790
> 
> 标签：math, optimization

我正在尝试提取 s 的错误值。可以通过将方程拟合到等式来计算 s 值。该方程具有已知的变量 (a,b,c,e,i)，这些变量具有一定的关联误差。我试过这个：

```
f[i, a, b, c, e, 
  s] = ((i*b/(e*(a - c))*s*b/(e*c))/(i*b/(e*(a - c)) + s*b/(e*c)) - 
   i*b/(e*a))
Nminimize[
 f[i, a, b, c, e, s] == 0.062 && 1.19 <= a <= 1.21 && 
  1.09 <= b <= 1.11 && 0.8 <= c <= 0.9 && 
  76.7*10^-4 <= e <= 77.7*10^-4 && 0.001265 <= i <= 0.001224, s] 
```

没有得到我想要的答案... 0.0618011 Nminimize[False, 0.00206]

也许你可以在这方面帮助我。非常感谢您的关注。桑德里娜

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-25T21:45:15.303

您的变量 i 的间隔可能是错误的（最大值小于最小值）。

我已经使用 Microsofts Solver Foundation 尝试过您的问题。

结果：

```
a: 1,19398028498287
b: 1,09538090507082
c: 0,810937961158584
e: 0,00768194947134329
i: 0,00125448670370341
s: 0,00220457588242784 
```

我的 C# 代码：

```
using System;
using Microsoft.SolverFoundation.Services;

namespace akMSFStackOverflow
{
    class Program
    {
        static void Main(string[] args)
        {
            SolverContext context = SolverContext.GetContext();             
            Model model = context.CreateModel();                            

            Decision a = new Decision(Domain.RealNonnegative, "a");
            Decision b = new Decision(Domain.RealNonnegative, "b");
            Decision c = new Decision(Domain.RealNonnegative, "c");
            Decision e = new Decision(Domain.RealNonnegative, "e");
            Decision i = new Decision(Domain.RealNonnegative, "i");
            Decision s = new Decision(Domain.RealNonnegative, "s");
            Term goal;

            model.AddDecisions(a, b, c, e, i, s);

            goal = (i * b / (e * (a - c)) * s * b / (e * c)) /
                   (i * b / (e * (a - c)) + s * b / (e * c)) - i * b / (e * a);

            model.AddConstraints("limits",                              
                                 1.19 <= a <= 1.21,
                                 1.09 <= b <= 1.11,
                                 0.8 <= c <= 0.9,
                                 76.7e-4 <= e <= 77.7e-4,
                                 0.001224 <= i <= 0.001265);   //  min/max swapped for i bound!

            model.AddGoal("goal", GoalKind.Minimize, (goal - 0.062) * (goal - 0.062));

            Solution solution = context.Solve();

            Report report = solution.GetReport();
            Console.WriteLine("a={0} b={1} c={2} e={3} i={4} s={5} ", a, b, c, e, i, s);
            Console.Write("{0}", report);
        }
    }
} 
```

# .htaccess - htaccess 路由多个域

> ID：12081935
> 
> 赞同：2
> 
> 时间：2012-08-22T21:51:24.653
> 
> 标签：.htaccess

我正在启动一个项目，该项目需要使用相同的（自定义）框架从一个服务器/IP 托管 8 个网站。

我需要做的是为每个站点使用单独的应用程序文件夹。这部分很简单，只需复制文件夹结构即可。我遇到问题的部分是`.htaccess`.

每个应用程序文件夹的设置如下：

```
- application
  -controller
  -view
  -www
    -css
    -js
    -img 
```

现在，需要发生的是需要设置对文件的请求来获取它们，并且任何不是文件的请求都会转到单个应用程序的引导文件......这部分很简单，因为我有一个`.htaccess`一旦请求到达那里，webroot 中的文件就可以处理。

我需要的是，在主根文件夹中，用于`.htaccess`根据用户访问的域来决定要访问的应用程序。

当只有一个应用程序文件夹可以访问时，我的 htaccess 重定向部分如下所示：

```
RewriteEngine on

RewriteCond     %{DOCUMENT_ROOT}/application/www%{REQUEST_URI} -d
RewriteRule     ^(.*[^/])$ /$1/                 [R=301,L]

RewriteRule ^$  application/www/        [L]
RewriteRule (.*)    application/www/$1      [L] 
```

基本上，我需要使用相同的框架为多个域复制它。

应用程序文件夹的名称与域名相同，如果有帮助的话！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T22:17:05.553

尝试这个：

```
RewriteEngine On

RewriteCond %{DOCUMENT_ROOT}/%{HTTP_HOST}/www%{REQUEST_URI} -d
RewriteRule ^(.*[^/])$ /$/ [R=301,L]

RewriteRule ^$ application/www/ [L]

RewriteCond %{DOCUMENT_ROOT}/%{HTTP_HOST}/www%{REQUEST_URI} -d [OR]
RewriteCond %{DOCUMENT_ROOT}/%{HTTP_HOST}/www%{REQUEST_URI} -f
RewriteRule ^(.*)$ application/www/$1 [L] 
```

最后一条规则上面的 2 个条件确保请求的资源确实存在于应用程序的 www 文件夹中，否则 404 消息会暴露文件夹结构。

您可能需要使用一些规则（在这些规则之上）规范化主机名，如下所示：

```
RewriteCond %{HTTP_HOST} !^www\. [NC]
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L] 
```

强制主机名以**www**或

```
RewriteCond %{HTTP_HOST} ^www\.(.*)$ [NC]
RewriteRule ^(.*)$ http://%1/$1 [R=301,L] 
```

从主机名中删除**www 。**

# iphone - 循环遍历 NSArray 中的 NSStrings

> ID：12081938
> 
> 赞同：2
> 
> 时间：2012-08-22T21:51:56.643
> 
> 标签：iphone, ios, for-loop, nsstring, nsmutablearray

基本上我想要做的是： 1\. 从 URL 获取 .plist 2\. 将数组从 plist 文件放入 NSMutableArray 3\. 遍历 NSMutableArray 中的每个字符串并将它们排序为多个 NSMutableArrays

我已经完成了 1 和 2 并且我有一个 NSMutableArray 可以使用。所以这就是 NSArray 中字符串的样子：

```
Looper|September 28th, 2012|http://clips.vorwaerts-gmbh.de/big_buck_bunny.mp4?TestLink|http://ia.media-imdb.com/images/M/MV5BMTM5NTkwMzI2MF5BMl5BanBnXkFtZTcwMTc5MjQ2Nw@@._V1._SY317_.jpg 
```

这是一个电影预告片应用程序，所以我想要做的就是将此字符串（以及在 NSMutabeArray 中格式类似的所有其他字符串）排序为 4 个不同的 NSMutableArray，并将它们拆分为“|” 使用 componentsSeparatedByString。这是我到目前为止所拥有的，但是当我记录“titleArray”时，它只会出现数组中的第一个标题：

```
NSInteger count = [newTrailers count];
for (int i = 0; i < count; i++) {
    NSString* body = [newTrailers objectAtIndex:i];

    NSArray *splits = [NSArray arrayWithObjects:body, nil];

    NSMutableArray* titleArray = [[NSMutableArray alloc] init];
    NSMutableArray* descriptionArray = [[NSMutableArray alloc] init];
    NSMutableArray* linkArray = [[NSMutableArray alloc] init];
    NSMutableArray* posterArray = [[NSMutableArray alloc] init];

    for (NSString* item in splits)
    {
        NSArray* parts = [item componentsSeparatedByString: @"|"];
        if ([parts count] == 4)
        {
            [titleArray addObject: [parts objectAtIndex: 0]];
            [descriptionArray addObject: [parts objectAtIndex: 1]];
            [linkArray addObject: [parts objectAtIndex: 2]];
            [posterArray addObject: [parts objectAtIndex: 3]];
        }
    }

    NSLog(@"Title Arrray: %@", titleArray);
} 
```

感谢您的帮助，我是 for 循环和整数的新手，所以请放轻松！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T22:02:34.540

在您的代码中创建了很多数组 - 特别是对于 newTrailers 数组中的每个条目，您为标题、描述等创建数组...

如果我说对了，那么您想做的事情应该是这样的（未经测试，只是对您的代码进行了一些重新排列）：

```
NSInteger count = [newTrailers count];
NSMutableArray* titleArray = [[NSMutableArray alloc] init];
NSMutableArray* descriptionArray = [[NSMutableArray alloc] init];
NSMutableArray* linkArray = [[NSMutableArray alloc] init];
NSMutableArray* posterArray = [[NSMutableArray alloc] init];

for (int i = 0; i < count; i++) {
    NSString* body = [newTrailers objectAtIndex:i];

    NSArray* parts = [body componentsSeparatedByString: @"|"];
    if ([parts count] == 4)
    {
        [titleArray addObject: [parts objectAtIndex: 0]];
        [descriptionArray addObject: [parts objectAtIndex: 1]];
        [linkArray addObject: [parts objectAtIndex: 2]];
        [posterArray addObject: [parts objectAtIndex: 3]];
    }
}
NSLog(@"Title Arrray: %@", titleArray); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-16T11:29:44.267

这是用于迭代字符串数组的示例代码

```
NSArray *arr = [NSArray arrayWithObjects:@"AString",@"AnotherString", nil];
for(NSString *str in arr){

    NSLog(@"%@",str);
} 
```

迅速

```
let arr : NSMutableArray = ["A","B"]

for str in arr as! [String]
{

    print(str)
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-22T22:18:31.597

摆脱`splits`数组及其forin循环，直接拆分`body`字符串：

```
NSString* body = [newTrailers objectAtIndex:i];
NSMutableArray* titleArray = [[NSMutableArray alloc] init];
NSMutableArray* descriptionArray = [[NSMutableArray alloc] init];
NSMutableArray* linkArray = [[NSMutableArray alloc] init];
NSMutableArray* posterArray = [[NSMutableArray alloc] init];

NSArray* parts = [body componentsSeparatedByString: @"|"];
if ([parts count] == 4) {

    [titleArray addObject: [parts objectAtIndex: 0]];
    [descriptionArray addObject: [parts objectAtIndex: 1]];
    [linkArray addObject: [parts objectAtIndex: 2]];
    [posterArray addObject: [parts objectAtIndex: 3]];
} 
```

# c# - Amazon EC2-DescribeInstances 不返回 InstanceID？

> ID：12081942
> 
> 赞同：0
> 
> 时间：2012-08-22T21:52:12.060
> 
> 标签：c#, amazon-ec2

我有一个 C# 程序，我试图在其中获取实例 ID 列表并用它们填充组合框。我正在尝试使用 DescribeInstances，这是我的代码：

```
DescribeInstancesRequest request = new DescribeInstancesRequest();
List<Amazon.EC2.Model.Reservation> result = m_client.DescribeInstances(request).DescribeInstancesResult.Reservation;
    foreach (Amazon.EC2.Model.Reservation reservation in result)
    {
        instanceCB.Items.Add(reservation.ReservationId);
    } 
```

ReservationId在哪里，我想要InstanceId，但它似乎不是DescribeInstances返回的结果的成员。我可以使用另一个具有此功能的功能吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T03:44:44.480

你甚至没有得到正在运行的实例对象。你的代码应该是这样的： -

```
foreach (RunningInstance ri in result.RunningInstance)
 {
      instanceCB.Items.Add(ri.InstanceId);
 } 
```

它应该工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-03T23:50:53.243

```
List<RunningInstance> instances = runResponse.RunInstancesResult.Reservation.RunningInstance;
List<String> instanceIDs = new List<string>();
foreach (RunningInstance item in instances)
{
    instanceIDs.Add(item.InstanceId);
} 
```

# bash - crontab 和 sh 脚本

> ID：12081944
> 
> 赞同：0
> 
> 时间：2012-08-22T21:52:32.690
> 
> 标签：bash, node.js, cron, crontab, sh

我有一个 sh 脚本，我想通过 cron 每三个小时调用一次。该脚本调用了一堆 node.js 脚本，并且在直接调用时可以完美运行。但是，当通过 cron 调用时，我得到了 sh 脚本记录的日期，但没有来自我的 node.js 脚本的其他日志（直接调用 sh 时所有日志都很好）。知道为什么吗？

该脚本位于内部目录中，但我使用的是所有绝对路径。请在下面找到我的代码，如有必要，请在[Github](https://github.com/theMechanism/The-Social-Mechanism)上找到有关 node.js 内容的更多详细信息（注意：服务器最近从 sh 更改为 bash，但我认为这不会产生任何实际影响）。

**crontab**

```
SHELL=/bin/sh
MAILTO=my@email.com
0 */3 * * * /absolute/path/to/script.sh 
```

**脚本.sh**

```
#!/usr/bin/env sh
node /absolute/path/to/script1.js
node /absolute/path/to/script2.js
node /absolute/path/to/script3.js

LOGFILE=/absolute/path/to/error.log

log(){
    message="$@"
    echo $message
    echo $message >>$LOGFILE
}

log "Cron performed $(date)" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T10:01:41.097

Crontab 在调用命令时不会加载您的普通用户环境，因此您的 bash 脚本或 node.js 内容所依赖的任何其他环境变量都不会存在。例如，您的 shell 如何找到“节点”命令？

Cron 脚本不会在您的用户帐户的 bash 环境中运行，因此直接在您的 shell 中运行它们不是有效的测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T17:01:17.623

```
PATH=/usr/kerberos/sbin:/usr/kerberos/bin:/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/root/bin
SHELL=/bin/sh
MAILTO=my@email.com
0 */3 * * * /absolute/path/to/script.sh 
```

# wordpress - wordpress the_content() 格式化裸文本节点

> ID：12081948
> 
> 赞同：1
> 
> 时间：2012-08-22T21:52:53.773
> 
> 标签：wordpress, formatting

我正在查看 WordPress 函数 the_content() 的源输出，并注意到 html 格式很奇怪。

```
<div>
    <p> <inline element> 'text node' </inline element> </p>
    'text node'
    <p> <inline element> 'text node' </inline element> </p>
    'text node'
</div> 
```

我正在使用 php DOM 解析器编辑 textContent，发现除了 inline element 标签中的所有文本节点之外的所有文本节点都不在 ap 标签中。所以它们是包含内容的 div 标签的 textContent 。

我想知道这是我的错还是 wordPress 的输出不好。我认为如此广泛使用的 cms 不太可能出现如此基本的格式问题。

编辑：我仍然不知道其他主题开发人员是否发现了 wordPress 的这个问题。无论如何，我写了一个小片段来修复它。

```
function setDOM(){
$html = get_the_content();
$html = trim( preg_replace( '/\s+/', ' ', $html ) ); 
$dom = new DOMDocument;
$dom->loadHTML($html);

$xpath = new DOMXpath($dom);
$textNodes = $xpath->query('//text()');

foreach($textNodes as $textNode){
    $parent = $textNode->parentNode;
    if (($parent->nodeName !== 'em') &&
    ($parent->nodeName !== 'strong') &&
    ($parent->nodeName !== 'a') &&
    ($parent->nodeName !== 'dt')) {

        $txt = $textNode->textContent;  
        $newP = $dom->createElement('p');
        $newTxt = $dom->createTextNode($txt);
        $newP->appendChild($newTxt);

        $parent->replaceChild($newP, $textNode);

    }
}
$dom->saveHTML();
return $dom;
}

$dom = setDOM();

echo $dom->saveHTML(); 
```

诚然，我是 PHP 新手，任何关于该片段的提示或反馈都将不胜感激。

# html - 带有 Google 应用程序脚本的 HTML。

> ID：12081954
> 
> 赞同：0
> 
> 时间：2012-08-22T21:53:12.607
> 
> 标签：html, google-apps-script, google-apps

我刚开始使用 Google Html 服务，但我似乎无法启动我的项目。我从谷歌示例中拼凑了这段代码，但我无法让它工作。在脚本文档中，我有 2 个文件，一个称为 Code.gs，另一个是 Map.html。当我将此脚本发布为 Web 应用程序然后运行它时，页面变为黑色。我知道它有点工作，因为如果我插入一个

你好世界

进入正文，网页显示Hello World。Bellow 分别是 Code.gs 和 Map.html 的代码

```
function doGet() { 
  return HtmlService.createHtmlOutputFromFile('Map');
} 
```

黑色的

```
<html>
  <head>
    <script type='text/javascript' src='https://www.google.com/jsapi'></script>
    <script type='text/javascript'>
     google.load('visualization', '1', {'packages': ['geochart']});
     google.setOnLoadCallback(drawMarkersMap);

      function drawMarkersMap() {
      var data = google.visualization.arrayToDataTable([
        ['City',   'Population', 'Area'],
        ['Rome',      2761477,    1285.31],
        ['Milan',     1324110,    181.76],
        ['Naples',    959574,     117.27],
        ['Turin',     907563,     130.17],
        ['Palermo',   655875,     158.9],
        ['Genoa',     607906,     243.60],
        ['Bologna',   380181,     140.7],
        ['Florence',  371282,     102.41],
        ['Fiumicino', 67370,      213.44],
        ['Anzio',     52192,      43.43],
        ['Ciampino',  38262,      11]
      ]);

      var options = {
        region: 'IT',
        displayMode: 'markers',
        colorAxis: {colors: ['green', 'blue']}
      };

      var chart = new google.visualization.GeoChart(document.getElementById('chart_div'));
      chart.draw(data, options);
    };
    </script>
  </head>
  <body>
    <div id="chart_div" style="width: 900px; height: 500px;"></div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T18:44:43.603

这是因为 caja 不支持您使用的库。Caja 是一个引擎，它将用于在向用户显示之前进行检查，目前它支持 JQuery 和 JQuery UI，[https://developers.google.com/apps-script/html_service#Caja](https://developers.google.com/apps-script/html_service#Caja)。因此，如果您想测试您的代码，您可能需要访问*http://caja.appspot.com/*并对其进行测试。

# java - 方法不起作用

> ID：12081956
> 
> 赞同：0
> 
> 时间：2012-08-22T21:53:13.150
> 
> 标签：java, methods, arraylist

我有一个方法，我试图从另一个类接收一个数组列表并将其存储在一个新的数组列表中。当我单击按钮时，该方法应该运行，但我什么也没得到。相反，我的 GUI 冻结了，执行挂起。

```
public class GUI implements ActionListener {

private JFrame frame = new JFrame("Dryck & Ingrediens"); // GUI
private JTextField jtf = new JTextField();// GUI
private JTextArea jl1 = new JTextArea();// GUI
private JList jl = new JList();// GUI
private JButton b = new JButton("Sök");
private JScrollPane js = new JScrollPane(jl);// GUI
private JLabel lab = new JLabel("Ange dryck");//GUI
private JLabel lab1 = new JLabel("Walid Shams");
private JLabel lab2 = new JLabel("Kushtrim Brahimi");
private HashMap<String, ArrayList<String>> drinkar = null;//Controller
private ServerHandler serverH = new ServerHandler();

public GUI() {

    frame.getContentPane().setLayout(null);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setBounds(50, 300, 420, 400);
    frame.setResizable(false);
    frame.setVisible(true);
    js.add(jl);
    js.add(jl1);
    jl1.setEditable(false);
    lab.setBounds(90, 20, 130, 20);
    lab1.setBounds(300, 310, 130, 20);
    lab2.setBounds(300, 330, 130,20);
    jtf.setBounds(50, 40, 150, 40);
    b.setBounds(230, 40, 100, 40);
    jl.setBounds(50, 90, 150, 200);
    jl1.setBounds(210, 90, 150, 200);
    Container con = frame.getContentPane();
    con.setBackground(Color.cyan);

    jtf.addKeyListener(new KeyListener() {

        public void keyTyped(KeyEvent e) {
        }

        public void keyPressed(KeyEvent e) {
        }

        public void keyReleased(KeyEvent e) {

                if (jtf.getText().length() > 0) {
                    serverH.writeMsg(jtf.getText());
                }
                else {
                    String[] empty = new String[]{""};
                    jl.setListData(empty);
                }
        }
    });

    jl.addListSelectionListener(new ListSelectionListener() {

        public void valueChanged(ListSelectionEvent e) {
             if (jl.getSelectedIndex() != -1) {
                 String item = (String) jl.getSelectedValue();
                 jl1.setText("");
                 for (String ingrediens : drinkar.get(item)) {
                     jl1.append(ingrediens + "\n");
                 }
             }else{
                 jl1.setText("");
             }
        }
    });
    frame.add(jtf);
    frame.add(jl);
    frame.add(jl1);
    frame.add(lab);
    frame.add(lab1);
    frame.add(lab2);
    frame.add(js);
    frame.add(b);
}

public void actionPerformed(ActionEvent e) {
    if(e.getSource().equals(b)){
        getArrayList();
    }

}

// tar emot arrayen, lagrar i ny array och visar i JList
public void getArrayList() {

    DefaultListModel model = new DefaultListModel();
    ArrayList<String> drinks = new ArrayList<String>();

    drinks = serverH.receiveArrayList();
    System.out.println("the contents of the list" + drinks);

    for(int i = 0; i < drinks.size(); i++){
        model.addElement(drinks.get(i));
    }
    jl.setModel(model);

}

public static void main(String[] args) {
    GUI g = new GUI();

} 
```

}

这是我的 serverHandler 类，它来自我试图接收 Arraylist 的地方。但似乎它没有通过我的 GUI。

```
public class ServerHandler  {

private Socket socket;// ServerHandler
private DataInputStream dis;// ServerHandler
private ObjectInputStream ois = null;// ServerHandler
private DataOutputStream dos;// ServerHandler
private HashMap<String, ArrayList<String>> drinkar;

public ServerHandler(){

    socket = new Socket();
    InetSocketAddress ipPort = new InetSocketAddress("127.0.0.1", 4444);
    try {
        socket.connect(ipPort);
        dis = new DataInputStream(socket.getInputStream());
        dos = new DataOutputStream(socket.getOutputStream());
    } catch (Exception e) {
    }
//        new Thread(this).start();
}

public ArrayList<String> receiveArrayList() {
    String fromServer;
    try {
        while ((fromServer = dis.readUTF()) != null) {
            if (fromServer.equals("read")) {
                getArrayList();
            }

        }
    } catch (Exception e) {
    }
    return getArrayList();

}

public void writeMsg(String jtf){

    if (dos != null) {
        if (jtf.length() > 0) {
            try {
                dos = new DataOutputStream(socket.getOutputStream());
                dos.writeUTF(jtf);
            } catch (IOException ex) {
                System.out.print(ex);
            }
        }
    }
}

public ArrayList<String> getArrayList(){

ArrayList<String> arr = new ArrayList<String>();

    try {
        ois = new ObjectInputStream(socket.getInputStream());
        drinkar = (HashMap<String, ArrayList<String>>) (ois.readObject());

        Iterator it = drinkar.keySet().iterator();
        while(it.hasNext()){
            String temp = (String) it.next();
            arr.add(temp);
        }
        System.out.println(arr);

    } catch (ClassNotFoundException ex) {
        System.out.println(ex);
    } catch (IOException ex) {
        System.out.println(ex);
    }

    return arr;

}

public ArrayList<String> drinks(){

    ArrayList<String>arr = new ArrayList<String>();
    return null;

}

public static void main(String[] args) {
    ServerHandler sv = new ServerHandler();
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T19:36:35.583

好的，总结一下。首先，调用 getArrayList 两次不是一个好主意，因为第二次在套接字中没有任何东西，而你只是吞下了饮料...... :) 从 while 循环中返回 getArrayList。关于您在上一条评论中的问题，这是一个设计问题。也从地图中返回值。我认为，您不应该剥离键集并将其作为列表返回（您可以通过 更轻松地完成此操作`new ArrayList(map.keySet())`）。而是返回整个地图并将其拆分到 GUI 的 getArrayList

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T21:57:59.900

您永远不会将动作侦听器添加到`b`您的 JButton。因此，`if(e.getSource().equals(b))`始终为 false，因为`b`按钮从不启动操作。由于 this if 永远不会评估为 true，因此永远不会调用该方法。

# php - 用 PHP 附加 SQLite 3 数据库？

> ID：12081960
> 
> 赞同：0
> 
> 时间：2012-08-22T21:53:20.863
> 
> 标签：php, database, sqlite, cordova

我一直在研究这个问题很长时间，我一直认为我有答案，但它从来没有奏效。基本上，我有四个 .sqlite3 文件需要**跨**.sqlite3 执行事务。所以...我研究了附加它们，并认为我拥有它...

无论如何，我正在尝试在内存中创建一个数据库，将其他四个附加到它，然后对所有四个执行操作。我不需要内存数据库，但听起来它让事情变得容易多了。

我以前只用 JavaScript 做过 SQLite，几乎没有 PHP 经验。

在此示例中，$pathToMesh 是包含两个 .sqlite3 文件的文件夹的绝对路径，而 $pathToUser 指向另一个具有两个相同名称的不同文件的文件夹。我总是得到响应“文件存在”，然后当我尝试在这些数据库（格式`database.table_name`）上执行基本的 SQLite 时，它​​就死了。我一直在尝试查找错误消息，但是因为我在 PhoneGap 应用程序中从 Ajax 调用这个 PHP，所以我看不到发生了什么。

```
if (file_exists($pathToMesh . $dbame) && file_exists($pathToMesh . $sbame)) {
    echo "File Exists";
    $db = new PDO('sqlite::memory:');
    $db->query("ATTACH DATABASE '" . $pathToMesh . $dbname . "' AS meshStats");
    $db->query("ATTACH DATABASE '" . $pathToMesh . $sbname . "' AS meshSB");
    $db->query("ATTACH DATABASE '" . $pathToUser . $dbname . "' AS upStats");
    $db->query("ATTACH DATABASE '" . $pathToUser . $sbname . "' AS upSB");
    //Code continued
else {
    echo "Files don't exist.";
} 
```

提前致谢。

# android - Android 位置感知通知

> ID：12081964
> 
> 赞同：3
> 
> 时间：2012-08-22T21:54:01.293
> 
> 标签：android, notifications, location, battery

我正在寻找位置感知通知的最佳技术。

我的第一次尝试是使用 LocationManager 的 addProximityAlert，但它需要 ACCESS_FINE_LOCATION（COARSE_LOCATION 给我一个 SecurityException）并保持 GPS 始终打开和激活（至少在 Jelly Bean 上），这会很快耗尽电池。[当屏幕处于睡眠状态（ addProximityAlert](https://developer.android.com/reference/android/location/LocationManager.html#addProximityAlert%28double,%20double,%20float,%20long,%20android.app.PendingIntent%29)）时，它似乎也不尊重每 4 分钟一次的检查。

我正在考虑使用 PASSIVE_PROVIDER 来收集其他应用程序的位置信息，并且可能每隔一段时间使用一项服务来询问 COARSE_LOCATION（比如在屏幕关闭时每 4 分钟一次，并且在屏幕打开时更频繁地设备已插入）。

要求是当用户靠近某些位置时，应用程序将触发通知。

任何人已经实施或有建议以有效且电池效率高的方式实施这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T22:34:59.073

我构建了这样一个应用程序（因此我在办公时间问答中提出了关于如何测量 LocationManager 的功耗的问题），同时它运行得非常好。我最初打算使用内置的接近警报，但在与您相同的问题上苦苦挣扎，并认为它不够灵活。

相反，我构建了一个服务，该服务使用 LocationProvider 每五分钟使用 NETWORK_PROVIDER 轮询一次位置，计算到所需位置的距离，如果在附近，则触发通知。在拥有大量 Wifi 网络的城市中，这给了我 50 米的（报告的）精度。

我还使用 PASSIVE_PROVIDER 从其他应用程序的位置请求中受益。

如果我在所需位置附近并且报告的精度太粗略而无法确定我是否在指定的接近范围内，我将使用单个 GPS 位置请求作为备份。如果 NETWORK_PROVIDER 超时，我也会使用单个 GPS 位置请求。为了不让 GPS 提供商在我使用地铁时耗尽电池电量，它还有一个带有指数退避的超时。

当我连接到 Wifi 网络时，我假设我没有移动，并在此期间禁用位置提供程序。

我所做的最后一个更改是为 NETWORK_PROVIDER 使用 15 分钟（“不精确重复”）计时器，如果我可以确定我将无法在 15 分钟内到达任何已保存的位置（因此以 5 分钟间隔轮询）没有意义）。这有助于节省电力。

我正在考虑使用更长的时间间隔来节省更多的电量，但是在这里找到一个启发式方法来确定我是否能够在那个时间内到达我保存的位置之一并不容易，因为我不能总是假设相同的行驶速度（步行、乘火车或汽车旅行）。但是由于我无法测量由我的应用程序引起的 LocationManager 的功耗，我不知道如何评估日常场景中的功耗。

我不介意内置 API 是否会提供所有这些逻辑，但我得出的结论是它没有，所以我自己构建了这个。

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T22:46:54.073

我正在使用以下库来执行此操作。[https://code.google.com/p/little-fluffy-location-library/](https://code.google.com/p/little-fluffy-location-library/)

它易于使用，但并没有提供太大的灵活性。例如，您不能即时更改更新频率。但是它的源是可用的，你可以转换它。

# ssis - SSIS - 如何使用投标来调试父/子包？

> ID：12081965
> 
> 赞同：2
> 
> 时间：2012-08-22T21:54:08.883
> 
> 标签：ssis, bids, cdc

我有一些包用于使用 SQL CDC 加载数据仓库数据库。该设计大致基于使用 CDC 的 codeplex 示例解决方案。

基本结构由一个 Master 包组成，它设置 lsn 区间变量，验证区间是否有效，然后为要从中提取的每个数据库调用两个不同的子包 1 并将区间变量传递给它们。

除了消除这些子包并将它们的内容移动到主包中的序列容器中之外，有什么方法可以使用 Bids 来调试包？

这些包不能单独运行，因为它们依赖于 master 来设置间隔变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T08:04:53.013

我使用子包中的脚本任务将变量设置为预期值，然后自行运行子包。这样你就可以在 BIDS 中调试它。因此，在这种情况下，您将在脚本任务中设置间隔值。然后，您将任务作为在包中运行的第一件事（您可以将其他所有内容放在序列容器中），然后在 BIDS 中运行子包。

我过去这样做的另一种方法是在子包中设置变量的默认值，但我更喜欢脚本任务 - 它更干净：完成后我删除任务并且我的包和以前一样.

如果您不确定变量值应该是什么，那么您可以运行主包并通过查看本地窗口从中获取值，然后使用这些值设置您的包。我希望这可以帮助别人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T22:12:05.390

我的经验是，您可以在 BIDS 中运行父包（只要子包位于本地可以访问的位置），您将能够看到整个包组的执行情况。当调用子包时，BIDS 会在界面中切换到该包并继续向您显示流程。您可以在每个包中设置数据查看器，以便在需要时查看数据。（所有包都应该在同一个解决方案/项目中才能正常工作。）

# jquery - 在 UIWebView.EvaluateJavascript() 中使用 jQuery ajax

> ID：12081968
> 
> 赞同：1
> 
> 时间：2012-08-22T21:54:19.363
> 
> 标签：jquery, ajax, json, uiwebview, xamarin.ios

在我的应用程序中，我在 MonoTouch 中使用 UIWebView 来评估一些 javascript。javascript 需要使用 ajax 从服务中检索一些 json。当 ajax 完成时，它使用 NSUrlProtocol 回调应用程序。

只要我将 XMLHttpRequest 用于 ajax 内容，这就会非常有效。但是当使用 jQuery.getJSON 或 jQuery.ajax 时它根本不起作用。事实上，请求甚至不会被 UIWebView 执行。（我可以这么说，因为 NSUrlProtocol 会为每个加载的 Url 通知）。该服务是一个 ASP.NET MVC4 Web API 应用程序，用于处理 jsonp 和跨服务脚本。除了这个之外，它在我能想到的每一个场景中都非常有效。

关于可能导致 jQuery 失败的任何建议？

# python - python：在 subprocess.popen 中使用引号

> ID：12081970
> 
> 赞同：0
> 
> 时间：2012-08-22T21:54:22.773
> 
> 标签：python, subprocess

我正在尝试这个但是得到以下代码行的错误：

```
p = subprocess.Popen(r"/bin/date -s "%s" " % self.sysdate) 
```

错误：

```
  文件“date.py”，第 12 行
    p = subprocess.Popen(r"/bin/date -s "%s" " % self.sysdate)
                                             ^
SyntaxError：无效的语法

```

我也试过：

```
p = subprocess.Popen(r'/bin/date -s "%s" ' % self.sysdate) 
```

仍然有错误。对此的任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-22T21:58:51.497

Subprocess 更喜欢程序及其参数的字符串列表。尝试

```
subprocess.Popen(['/bin/date', '-s', '%s' % self.sysdate]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T22:22:09.947

您将子进程 Popen args 作为字符串列表发送。此外，当您拆分字符串时，请使用模块功能，如`shlex.split`.

```
>>> date_str = '/bin/date -s "%s"' % '%HH:%MM'
>>> date_str
'/bin/date -s "%HH:%MM"'
>>> import shlex
>>> vals = shlex.split(date_str)
>>> vals
['/bin/date', '-s', '%HH:%MM']
>>> p = subprocess.Popen(vals) 
```

# mysql - mysql将列值限制为预设值

> ID：12081974
> 
> 赞同：0
> 
> 时间：2012-08-22T21:55:12.397
> 
> 标签：mysql, constraints

我想限制一列的值，一个很好的类比是选择表单字段元素，其中有一个值列表，并且只能选择其中一个。

我记得看到一个表的结构是这样的，这就是我意识到可以做到这一点的方式。

任何人都可以编写 mysql 查询来创建具有此特征的列吗？

表名 = some_table 列名 =some_column 值 1 = value_1 值 2 = value_2

创建此表后，我将使用什么查询来选择一个值或另一个

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T22:02:25.127

您可以使用枚举来做互斥值，并使用 set 来设置多个值。例如：

```
CREATE TABLE Car
(
   ID SMALLINT UNSIGNED,
   Model VARCHAR(40),
   Color ENUM('red', 'blue', 'green', 'yellow'),
   Options SET('power-doors', 'power-windows', 'automatic', 'disc-brakes')
 ); 
```

查询像普通查询一样工作。

# delphi - delphi中的SMTP主机是什么

> ID：12081975
> 
> 赞同：0
> 
> 时间：2012-08-22T21:55:16.780
> 
> 标签：delphi, smtp

我有一个发送电子邮件的应用程序。它使用 NMSMTP 组件。在 NMSMTP.host 中是“MAILHOST”。我试图找出 MAILHOST 是什么以及值存储在哪里？如何设置该主机值？

我可以使用 NMSMTP.connect 进行连接，但是在尝试使用 NMSMTP.sendMail 时，我收到错误消息“来自 abc.com 的 554 邮件因政策原因被拒绝”

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T22:48:45.413

主机是您用于发送邮件的电子邮件帐户的外发邮件的电子邮件服务器。例如，如果您的电子邮件地址是`Naren@example.com`，并且您用于发送邮件的电子邮件服务器是`smtp.example.com`，那么您的 SMTP 主机是`smtp.example.com`。

之前`.example.com`的具体情况取决于您的服务器配置为使用什么。您必须与提供电子邮件帐户的 ISP 联系，以了解正确的主机是什么，因为这取决于它的配置方式。（域没有“标准”SMTP 主机名。）

# c# - 我如何在图片框中绘制一个在边缘上标记的多边形

> ID：12081978
> 
> 赞同：2
> 
> 时间：2012-08-22T21:55:26.360
> 
> 标签：c#, draw, polygon, point

我以这种方式尝试过，但没有得到所需的结果：

```
System.Drawing.Point[] p = new System.Drawing.Point[6];
p[0].X = 0;
p[0].Y = 0;
p[1].X = 53;
p[1].Y = 111;
p[2].X = 114;
p[2].Y = 86;
p[3].X = 34;
p[3].Y = 34;
p[4].X = 165;
p[4].Y = 7;
g = PictureBox1.CreateGraphics();
g.DrawPolygon(pen1, p); 
```

我想做的是在图片框中绘制一个多边形，该多边形用不同的颜色和速率（角的数量和边缘的坐标）定义

![在此处输入图像描述](../Images/c9a85bf500d49d59cb6b0bd9473ffd20.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T22:55:39.627

创建一个 xOffset 变量，将其设置为 30，并将其添加到每个 X 值。让 yOffset 等于 50 并将其添加到所有 Y。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-26T23:56:42.820

只需对您的图形对象执行此操作：

```
g.TranslateTransform(30, 40); 
```

在绘制之前。

当然，你不应该使用`PictureBox1.CreateGraphics();`，而是画出你想要在事件中**坚持**的东西！..`Paint``e.Graphics`

# java - 将静态类字段重置为初始值

> ID：12081982
> 
> 赞同：2
> 
> 时间：2012-08-22T21:55:53.463
> 
> 标签：java, reflection

我注意到这个问题提出了与单元测试相关的问题，但我的问题是更一般的编程，我想要一些建议。

我正在编写一个软件，它使用 Java 反射来选择和改变作为特定库一部分的字段的值。然后我运行与库相关的代码，记录该字段的效果，然后转到另一个字段。

问题是我认为初始化库代码的行为会重置它需要运行的字段。事实证明不是。而且我不知道具体哪些字段可能已经更改（因为它们很多，图书馆很大）。所以我需要一种方法来重置所有不涉及重新启动我的整个反射使用代码的字段。

我在其他问题中看到 ClassLoaders 可以通过重新加载受影响的类来做到这一点。但是评论还说，这只有在您首先创建了加载这些类的 ClassLoader 时才有效。

任何人都可以建议任何方法来可靠地重置普通 Java 执行中的类的静态字段吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T14:49:09.663

我会说，为每个类编写一个静态同步方法，重置所有属性，当你在类加载器上调用它时同步（getClass（）.getClassloader（））

# forms - 只为新对象设置字段

> ID：12081985
> 
> 赞同：2
> 
> 时间：2012-08-22T21:56:00.860
> 
> 标签：forms, symfony, doctrine-orm, symfony-sonata

有一些字段的表格：

```
protected function configureFormFields(FormMapper $formMapper)
{
    $isNew = !$this->getRequest()->get($this->getIdParameter());

    $formMapper
        ->add('title')
        ->add('file', 'file', array('required' => $isNew))
    ;
} 
```

有没有更好的方法使字段只对新对象是必需的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-23T03:20:52.823

在我们这边，我们的做法与原始帖子相同，但我们很高兴知道有一个更清洁的解决方案:)

对于这么小的需求，事件订阅者看起来太复杂了。

最好的问候，克里斯托夫

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-12-10T07:34:03.090

使用这个：

```
$isNew = $this->getSubject()->isNew(); 
```

抛出错误：

```
Attempted to call an undefined method named "isNew" of class "SomeEntity". 
```

所以我改用这个：

```
if ($this->getSubject()->getId() === null) {
    $isNew = true;      
} else {
    $isNew = false;
} 
```

我希望它可以帮助任何人在未来面临同样的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-23T00:23:58.850

我认为更好的方法是将事件订阅者添加到表单类中，您可以在此处查看示例：

[http://symfony.com/doc/current/cookbook/form/dynamic_form_generation.html](http://symfony.com/doc/current/cookbook/form/dynamic_form_generation.html)

谢谢 ;）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-04T16:20:18.710

您可以使用[从文档中找到](http://sonata-project.org/bundles/admin/2-3/doc/cookbook/recipe_dynamic_form_modification.html)`isNew()`的奏鸣曲功能：

```
protected function configureFormFields(FormMapper $formMapper)
{
    $isNew = $this->getSubject()->isNew();

    $formMapper
        ->add('title')
        ->add('file', 'file', array('required' => $isNew))
    ;
} 
```

但是，`$this->getSubject()`没有返回正确的东西存在一些问题。有[一个拉取请求打开以解决这些问题](https://github.com/sonata-project/SonataAdminBundle/pull/2076#issuecomment-65503564)（我已链接到我的评论，其中包含有关如何在当前状态下使用分支的说明。）

# jquery-mobile - JQuery Mobile 标记和 CSS 未在 Blackberry 5 上呈现

> ID：12081989
> 
> 赞同：0
> 
> 时间：2012-08-22T21:56:15.613
> 
> 标签：jquery-mobile

我的 jquery 移动网站在所有黑莓 6 设备上运行良好，但黑莓 5 型号上没有显示任何样式。我需要添加什么来在黑莓 5 上进行 jQuery 移动渲染吗？我正在使用 JQM v1.1.1，一个黑莓 BOLD 9700 设备

这是我要渲染的内容：

母版页：

```
<%@ Master Language="C#" AutoEventWireup="true" CodeBehind="UserMobile.master.cs" Inherits="User.Mobile.UserMobile" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head id="Head1" runat="server">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link href="Css/jquery.mobile.custom.structure.min.css" rel="stylesheet" type="text/css" />
    <link href="Css/jquery.mobile.custom.theme.min.css" rel="stylesheet" type="text/css" />
    <%--<link href="Css/eneCustom.min.css" rel="stylesheet" type="text/css" />--%>

  <%--  <script src="Js/jquery-1.8.min.js" type="text/javascript"></script>--%>
    <script src="Js/jquery1.6.js" type="text/javascript"></script>
    <script src="Js/jquery.mobile.custom.min.js" type="text/javascript"></script>

    /

    <asp:ContentPlaceHolder ID="HeadContent" runat="server">
    </asp:ContentPlaceHolder>
</head>

<body>

<div data-role="page" data-theme="b">

    <div data-role="header" data-position="fixed">

         <asp:ContentPlaceHolder ID="TopHeaderContent" runat="server"></asp:ContentPlaceHolder>

    </div><!-- /header -->

    <div data-role="content">   

 <asp:ContentPlaceHolder ID="MainContent" runat="server"></asp:ContentPlaceHolder>

    </div><!-- /content -->

    <div data-role="footer" data-position="fixed">
    <asp:ContentPlaceHolder ID="FooterContent" runat="server"></asp:ContentPlaceHolder>

    </div><!-- /footer -->

</div><!-- /page -->

</body>

</html> 
```

主页：

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Mobile/UserMobile.Master" AutoEventWireup="true" CodeBehind="DummyPAge.aspx.cs" Inherits="User.Mobile.DummyPAge" %>
<asp:Content ID="Content1" ContentPlaceHolderID="HeadContent" runat="server">
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="TopHeaderContent" runat="server">
<h1>HEADER</h1>
</asp:Content>
<asp:Content ID="Content3" ContentPlaceHolderID="MainContent" runat="server">
HI THERE
</asp:Content>
<asp:Content ID="Content4" ContentPlaceHolderID="FooterContent" runat="server">
<h1>FOOTER</h1>
</asp:Content> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T22:17:21.003

RIM5 不支持 jQuery mobile。有关支持的平台，请参阅[http://jquerymobile.com/test/docs/about/platforms.html 。](http://jquerymobile.com/test/docs/about/platforms.html)

# xml - 是否可以将多个位置批量添加到“我的地点”下的 Google 地图？

> ID：12081990
> 
> 赞同：2
> 
> 时间：2012-08-22T21:56:16.983
> 
> 标签：xml, google-maps, kml

我有一个包含 52 个位置的 KML 文件，但是当我将它导入 Google 地图时，我只得到最后一点。

为了复制，我将我的 KML 文件减少到两个位置，并且得到了相同的结果。

```
<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2">
<Placemark><name>SUNSHINE CHEVRON</name>
<description>HIALEAH
</description>
<Point><coordinates>-80.282852,25.872066,0</coordinates></Point>
</Placemark>
<Placemark><name>SUNSHINE #30028</name>
<description>HIALEAH
</description>
<Point><coordinates>-80.31525,25.883871,0</coordinates></Point>
</Placemark>
</kml> 
```

在这种情况下，只有 Sunshine #30028 显示在地图上。

有没有办法批量上传到谷歌地图。我愿意使用其他服务来实现这一点，但它不能包含任何广告。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-22T22:48:12.340

您缺少[<Document>](https://developers.google.com/kml/documentation/kmlreference#document)元素。

[没有它](https://maps.google.com/maps?q=http%3a%2F%2Fwww.geocodezip.com%2Fgeoxml3_test%2Fkmltest_2_SUNSHINE_CHEVRON_a_kml.xml&hl=en&sll=25.877968,-80.299051&sspn=0.029036,0.038409&t=m&z=19)，你会得到一个地标[，](https://maps.google.com/maps?q=http%3a%2F%2Fwww.geocodezip.com%2Fgeoxml3_test%2Fkmltest_2_SUNSHINE_CHEVRON_b_kml.xml&hl=en&sll=25.88387,-80.31525&sspn=0.001815,0.002401&t=m&z=15)你会得到两个。

要回答标题中的问题，请转到 Google 地图中的“我的地点”，单击“创建地图”，然后单击“导入”。您可以在网络上提供本地 KML 文件或 KML 文件的 URL，它会将其导入您的 Google“我的位置”。您甚至可以将多个 KML 文件导入同一个地图，然后将其再次导出为 KML。

# excel - excel：如果有匹配的值，则删除整行（附加img）

> ID：12081993
> 
> 赞同：0
> 
> 时间：2012-08-22T21:56:30.893
> 
> 标签：excel

截图：http: [//i.imgur.com/hziit.jpg](http://i.imgur.com/hziit.jpg)

在上图中，我试图定位所有具有“ratings_users”值的行。对于与该值匹配的所有行，我只想删除整行。我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T23:27:44.583

你可以使用这样的宏：

```
Sub DeleteRatingsUsers()

maxRow = ActiveSheet.UsedRange.Rows.Count

For i = 1 To maxRow
    If (StrComp(ActiveSheet.Cells(i, 2).Text, "ratings_users", vbTextCompare) = 0) Then
        Rows(i).Select
        Selection.Delete Shift:=xlUp
    End If
Next

End Sub 
```

# php - 我的 joomla 问题左加入 mysql

> ID：12081996
> 
> 赞同：0
> 
> 时间：2012-08-22T21:56:57.190
> 
> 标签：php, mysql, joomla

对，我得到了这个工作，但由于某种原因，我的循环仍然显示错误的值......

```
$db = JFactory::getDBO();
    $query = "select * from jos_gerencia_vendas AS a LEFT JOIN jos_gerencia_clientes AS b ON b.Id=a.id_cliente where a.id_edicao = ".$iddaedicao." order by b.nomecliente ASC";

    $db->setQuery($query);
    $list = $db->loadObjectList();
    foreach ($list as $item)
            {
            $Id = $item->Id;
            $id_venda = $item->id_venda;
            $id_edicao = $item->id_edicao;
            $id_vendedor = $item->id_vendedor;
            $id_cliente = $item->id_cliente;
            $id_produto = $item->id_produto;
            $data_insercao = $item->data_insercao;
            $pagina = $item->pagina; 
```

我需要从 foreach 循环内的 jos_gerencia_vendas 检索 $Id 变量，有什么线索吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T02:40:26.830

如果您在两个表上都有一个名为 Id 的列，那么当您获得 $item->Id 时将是模棱两可的。您能否在 mysql 控制台或 phpmyadmin 上运行查询以查看它是否抛出任何错误？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-23T17:14:09.377

您可以使用别名从查询中检索信息，如下所示

```
$query = "select a.id as id,a.col1 as id_venda,a.col2 as id_edicao,b.col1 as id_vendedor from jos_gerencia_vendas AS a LEFT JOIN jos_gerencia_clientes AS b ON b.Id=a.id_cliente where a.id_edicao = ".$iddaedicao." order by b.nomecliente ASC";

    $db->setQuery($query);
    $list = $db->loadObjectList();
    foreach ($list as $item)
            {
            $Id = $item->Id;
            $id_venda = $item->id_venda;
            $id_edicao = $item->id_edicao;
            $id_vendedor = $item->id_vendedor; 
```