# StackOverflow 问答 10829000-10829999

# c# - 实体做得太多？

> ID：10829000
> 
> 赞同：7
> 
> 时间：2012-05-31T07:13:05.833
> 
> 标签：c#, linq-to-sql, architecture, dependencies

我有一个古老的谜题，所以我想我会与你分享，可能会得到正确的方向。问题是，我们在数据库中的一些实体非常大（读取有很多属性），很少业务逻辑使用所有实体属性，所以每次我需要考虑必须加载哪些属性才能使业务逻辑正常工作。非常假设的样本：

```
public class Product 
{
    public string Title {get;set;}
    public string Description {get;set;}

    public string RetailPrice {get;set;}
    public string SupplierId {get;set;}

    public Supplier Supplier { get;set;}

    // many other properties
}

public class ProductDiscountService
{
    public decimal Get(Product product)
    {
        // use only RetailPrice and Supplier code
        return discount;
    }
}

public class ProductDescriptionService 
{
    public string GetSearchResultHtml(Product product) 
    {
        // use only Title and Description
        return html;
    }
} 
```

看起来我可以提取接口 IDiscountProduct 和 ISearchResultProduct，将产品标记为实现这些接口，然后创建实现每个接口的较小 DTO，但这看起来有点矫枉过正（至少我没有看到任何人使用接口对属性进行分组） .

将数据库中的实体拆分为更小的实体看起来也不合理，因为所有这些属性都属于产品，恐怕我将被迫使用许多连接来选择某些东西，如果我决定某些属性属于另一个实体，这一举措将很难实施。

让特定方法的业务逻辑中使用的每个属性都作为方法参数看起来也很糟糕。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T16:28:24.140

除非属性很大（读取长字符串和/或二进制文件），否则我会全部加载它们。

以下几点适用于简单的属性（例如标题）

1.  没有额外的代码（仅以标题获取此产品，或仅以价格获取，等等）
2.  产品实例始终是完整的，因此您可以在不检查属性是否为空的情况下传递它。
3.  如果您必须延迟加载一些其他属性，那么它会比急切地加载它们花费更多。如果您有 20 个属性 - 这甚至不是一个大对象（同样，如果您的（假设的）描述属性的大小不是千字节）。

现在，如果您有相关对象（ProductSupplier） - 这应该是延迟加载的，imo，除非您知道将使用此属性。

# android - 为什么在我的 Activity 启动后立即调用 onStop？

> ID：10829005
> 
> 赞同：11
> 
> 时间：2012-05-31T07:13:23.083
> 
> 标签：android, android-activity, android-lifecycle

我有一个活动需要在启动时打开屏幕（以防屏幕关闭）。所以在我的`onCreate`，我有：

```
getWindow().addFlags(WindowManager.LayoutParams.FLAG_DISMISS_KEYGUARD
            |WindowManager.LayoutParams.FLAG_TURN_SCREEN_ON
            |WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON
            |WindowManager.LayoutParams.FLAG_SHOW_WHEN_LOCKED); 
```

使用这种简单的组合，我可以让我的活动在从我的后台服务启动时显示（是的，这是一个合法的案例）。

然而，问题在于，当我在这种情况下启动我的活动时，会有一个非常奇怪的生命周期行为。使用广泛的日志记录，我发现活动开始后**立即**发生以下 7 步过程：

1.  创建
2.  开始
3.  恢复
4.  暂停
5.  停止
6.  开始
7.  恢复

看到了吗？对于简单的活动启动，onStart 会被调用两次。更重要的是，onStop 被神秘地调用了，即使活动刚刚开始 - 并且没有发生任何会导致它停止的事情。

我已经在许多不同的场景中对此进行了测试，似乎这种奇怪的行为只发生在屏幕关闭并且活动在被破坏后启动时才会发生。如果屏幕打开，或者活动已停止 [但尚未销毁]，活动将正常启动，并且 onStart 仅调用一次。

**底线**：似乎当我的活动启动并强制打开屏幕时，Android会启动该活动，然后停止它，然后无缘无故地再次启动它。

那么：为什么会发生这种情况？我能做些什么来解决这个问题（以便在有正当理由之前不会调用 onStop）？

* * *

笔记：

*   有问题的活动正在使用启动`singleTask`模式
*   我试过禁用键盘锁/锁，但没有效果
*   我在运行 Android 3.2 的三星 Galaxy Tab 10.1 上目睹了这种行为。我没有测试这是否适用于其他任何东西......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-01T16:35:29.000

我在这里遇到了类似的问题： [Activity Lifecycle X Power Button X Lock Screen](https://stackoverflow.com/questions/9948315/activity-lifecycle-x-power-button-x-lock-screen)

问题是，由于我的活动是强制横向的，当我打开屏幕时，它会以纵向显示锁定屏幕，这会导致配置更改，从而破坏当前的活动。

解决方案是在我的 AndroidManifest.xml 中的 Activity 上添加一个 android:configChanges="orientation"。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-03-15T08:37:21.903

正如@cyberhuman 所建议的那样，[在开始活动后立即调用 OnPause 和 OnStop()](https://stackoverflow.com/questions/25369909/onpause-and-onstop-called-immediately-after-starting-activity)这个问题的答案为我指明了正确的方向。

我的活动在实际显示给用户之前完成了完整的“虚拟”生命周期的问题是，当活动变得可见时我尝试播放铃声被附加的后续“onStop（）”直接静音，并使用标志来使活动在屏幕关闭/屏幕锁定/屏幕打开/活动在后台运行时启动时正常运行是不可能的。

我终于通过覆盖**onWindowFocusChanged(boolean hasFocus)**方法并从那里启动铃声解决了我的问题。把它放在这里以防有人遇到同样的问题。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-05-31T07:17:27.750

您可以检查 中的情况`onStart`，设置静态或全局变量，然后检查变量`onStop`以覆盖标准行为。

# android - 如何拆分字符串并在android中获取特定字符串？

> ID：10829006
> 
> 赞同：-1
> 
> 时间：2012-05-31T07:13:31.497
> 
> 标签：android

我想拆分一个字符串并最终得到一个单词。我在数据库中的数据如下。

> 莫罕达斯·卡拉姆昌德·甘地 (1869-1948)，也被称为圣雄甘地，于 1869 年 10 月 2 日出生于印度古吉拉特邦的波尔班达尔。他在一个非常保守的家庭中长大，该家庭与统治家族有联系卡提亚瓦。他在伦敦大学学院接受法律教育。src="/Leaders/gandhi.png"

从上面的段落中，我想获得图像名称“gandhi”。我得到“src =”的索引。但现在我怎么才能得到图像名称，即“gandhi”。

我的代码：

```
int index1;
public static String htmldata = "src=";
if(paragraph.contains("src="))
{
   index1 = paragraph.indexOf(htmldata);
   System.out.println("index1 val"+index1);
}
else
   System.out.println("not found"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T07:18:34.130

您可以使用`StringTokenizer`该类（来自 java.util 包）：

```
StringTokenizer tokens = new StringTokenizer(CurrentString, ":");
String first = tokens.nextToken();// this will contain one word
String second = tokens.nextToken();// this will contain rhe other words
// in the case above I assumed the string has always that syntax (foo: bar)
// but you may want to check if there are tokens or not using the hasMoreTokens method 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T07:28:00.517

试试这个代码。检查它是否适合你..

```
public String getString(String input)
    {
        Pattern pt = Pattern.compile("src=.*/(.*)\\..*");
        Matcher mt = pt.matcher(input);
        if(mt.find())
        {
            return mt.group(1);
        }
        return null;
    } 
```

**更新：** 更改多个项目 -

```
public ArrayList<String> getString(String input)
    {
        ArrayList<String> ret = new ArrayList<String>();
        Pattern pt = Pattern.compile("src=.*/(.*)\\..*");
        Matcher mt = pt.matcher(input);
        while(mt.find())
        {
            ret.add(mt.group(1));
        }
        return ret;
    } 
```

现在您将获得一个包含所有名称的数组列表。如果没有名称，那么您将得到一个空的数组列表（大小为 0）。始终检查尺寸。

# wordpress - 向 WordPress 用户注册添加额外验证

> ID：10829008
> 
> 赞同：1
> 
> 时间：2012-05-31T07:13:34.240
> 
> 标签：wordpress, authentication, login

我正在为我儿子的高中国际文凭网站创建一个仅限会员的家长目录。该目录将包含目前有学生参加 IB 课程的每个年级的家长的联系信息（姓名、街道地址、电话号码、电子邮件地址）。我需要能够根据有效的学生 ID（这是一个数字）验证父母对目录的访问权限。

我有一个电子表格，其中包含每个学生的姓名、他们的学生证和他们父母的姓名。在某些情况下，一个家庭拥有多个学生/学生证。

作为一般方法，我试图弄清楚我应该如何考虑这一点。我有一些想法，但我需要将它们提炼成更简洁的调查。

1.  一种想法是为所有学生批量创建 wp 订阅者帐户。他们的学生证会以某种方式附加到用户记录中。家长将被引导至登录页面，在那里他们将使用孩子的用户名、密码（可以重置）和固定的学生 ID 登录。如果验证通过，它们将被重定向到目录页面。
2.  另一个想法是动态创建引用包含学生 ID 的单独表的用户帐户。只要该唯一的学生 ID 是注册的一部分并进行身份验证，任何拥有该号码的人都可以注册个人资料。

在任何一种情况下，一旦创建了帐户，联系人配置文件就可以预先填充用户信息或在那时更新。

所以我的问题是：我是否以正确的方式思考这个问题？如果是这样或不是，我怎样才能更好地定义这个想法以获得更准确的范围？然后，最终，我需要一些关于以 DIY 方式完成它的可能选项的指导。

抱歉，字数太长了。非常感谢您的反馈。下面是一些似乎在我正在尝试做的事情附近的链接。

[https://wordpress.stackexchange.com/questions/45900/adding-extra-authentication-field-in-login-page](https://wordpress.stackexchange.com/questions/45900/adding-extra-authentication-field-in-login-page)

[将 wordpress 身份验证与现有用户数据库集成](https://stackoverflow.com/questions/8922546/integrating-wordpress-authentication-with-an-existing-user-database)

# android - Android：快速操作的适当使用

> ID：10829010
> 
> 赞同：1
> 
> 时间：2012-05-31T07:13:51.117
> 
> 标签：android, contextmenu, quickaction

我已经看到相当多的应用程序使用快速操作作为关键功能的访问点。它有“时间和地点”吗？您何时会在上下文菜单中选择快速操作，反之亦然？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T08:14:23.273

I would try to use wherever is possible the new design patterns. That would mean the Contextual Action Bar:

[http://developer.android.com/design/patterns/selection.html](http://developer.android.com/design/patterns/selection.html)

It looks like Android changes the design patterns every year because the "Quick Actions" pattern was recommend on July 2010 according to this presentation:

[http://www.slideshare.net/AndroidDev/android-ui-design-tips](http://www.slideshare.net/AndroidDev/android-ui-design-tips)

But as I said, I would go with the new ICS design pattern. You can use the Sherlock ActionBar for backward compatibility:

[http://actionbarsherlock.com/](http://actionbarsherlock.com/)

# android - 在 android 中开发 Google Talk

> ID：10829015
> 
> 赞同：0
> 
> 时间：2012-05-31T07:14:23.757
> 
> 标签：android, google-talk

我是android平台的新手。我想用 Google Talk 开发 android 应用程序。如何找到与 Android 版 Google Talk 相关的文档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T07:15:59.227

对于 gtalk 可以试试这个[word-press](http://davanum.wordpress.com/2008/12/29/updated-xmpp-client-for-android/)文章

可能有帮助 这个 android 应用程序旨在使您能够通过 gtalk 控制您的手机。对于喜欢在真实键盘上输入短信的人来说，它可能很有用。

这是[TalkMyPhone](http://code.google.com/p/talkmyphone/)示例应用程序

[Google Talk API 与 Android 应用程序的集成](https://stackoverflow.com/questions/9304136/google-talk-api-integrations-with-android-app)

# jquery-mobile - jquery mobile navbar图标出现在圆圈中

> ID：10829016
> 
> 赞同：1
> 
> 时间：2012-05-31T07:14:40.420
> 
> 标签：jquery-mobile

我正在使用自定义图标，但它们出现在一个圆圈中。这里是我需要关闭的课程以阻止这种情况吗？

```
<div data-theme="a" data-role="footer" data-position="fixed">
                <div data-role="navbar" data-iconpos="top">
                    <ul>
                        <li>
                            <a href="#" id="test1" data-theme="e" data-icon="custom" data-corners="false" data-iconshow="true" data-wrapperels="span" class="ui-btn-active">
                                <span class="foot_font">test1</span>
                            </a>
                        </li>
                        <li>
                            <a href="page40.html" id="test2" data-theme="e" data-icon="custom" data-corners="false" data-iconshow="true" data-wrapperels="span">
                                <span class="foot_font">test2</span>
                            </a>
                        </li>
                        <li>
                            <a href="page44.html" id="test3" data-theme="e" data-icon="custom" data-corners="false" data-iconshow="true" data-wrapperels="span">
                                <span class="foot_font">test3</span>
                            </a>
                        </li>
                        <li>
                            <a href="page22.html" id="test4" data-theme="e" data-icon="custom" data-corners="false" data-iconshow="true" data-wrapperels="span">
                                <span class="foot_font">test4</span>
                            </a>
                        </li>
                        <li>
                            <a href="page47.html" id="test5" data-theme="e" data-icon="custom" data-corners="false" data-iconshow="true" data-wrapperels="span">
                                <span class="foot_font">test5</span>
                            </a>
                        </li>
                    </ul>
                </div>
            </div> 
```

![在此处输入图像描述](../Images/63884738f93c2c1ce1ede9c4fb58e713.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T07:48:45.187

您可以通过添加覆盖此 css 行为

```
.ui-icon
{
    border-radius:0px!important;
    -moz-border-radius:0px!important;
    -webkit-border-radius:0px!important;
    -ms-border-radius:0px!important;
    -o-border-radius:0px!important;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-27T11:14:39.367

要删除后面的圆形灰色背景，只需添加

```
ui-nodisc-icon 
```

链接/按钮的类

例如，您的代码可以更改为

```
<a href="#" id="test1" data-theme="e" data-icon="custom" data-corners="false" data-iconshow="true" data-wrapperels="span" class="ui-btn-active ui-nodisc-icon">
    <span class="foot_font">test1</span>
</a> 
```

# mysql - 如何加快此查询

> ID：10829018
> 
> 赞同：1
> 
> 时间：2012-05-31T07:14:48.647
> 
> 标签：mysql, query-optimization

我使用了这个查询，mysql 给出结果的时间太长了。行数为 160 万。

```
SELECT DISTINCT TB.ID,  Latitude, Longitude,
    111151.29341326*SQRT(pow(-6-`Latitude`,2)
        +pow(106-`Longitude`,2)*cos(-6*0.017453292519943)
        *cos(`Latitude`*0.017453292519943)) as Distance  
FROM `tablebusiness` AS TB, `tablecity` AS TC, `businessestag` AS BC,
    `businessesdistricts` AS BD, `tabledistrict` AS TD, 
     (SELECT ID, 
         (SELECT Title 
            FROM `tablebusiness` As TBuild 
           WHERE TBuild.ID = TBB.Building) As BuildingTitle 
      FROM `tablebusiness` As TBB) AS TBuilding  
WHERE TB.City = TC.City AND BC.BusinessID = TB.ID AND BD.BusinessID = TB.ID 
  AND TD.ID = BD.District AND TBuilding.ID = TB.ID 
  AND (`Title` LIKE '%%' OR `Street` LIKE '%%'  OR TB.City LIKE '%%' 
       OR Country LIKE '%%' OR Tag LIKE '%%' OR TD.District LIKE '%%' 
       OR TBuilding.BuildingTitle LIKE '%%') 
  AND (-6.0917668133836 < `Latitude` AND `Latitude` < -5.9082331866164 
       AND 105.90823318662 < `Longitude` AND `Longitude` < 106.09176681338)  
ORDER BY Distance LIMIT 0, 100 
```

即使行数是查询的 160 万部分，即

```
AND (-6.0917668133836 < `Latitude` AND `Latitude` < -5.9082331866164 AND 105.90823318662 < `Longitude` AND `Longitude` < 106.09176681338) 
```

大大限制了行数。似乎mysql不会通过搜索来优化查询

```
AND (-6.0917668133836 < `Latitude` AND `Latitude` < -5.9082331866164 AND 105.90823318662 < `Longitude` AND `Longitude` < 106.09176681338) first. 
```

我通过移动前面的纬度经度方面来更改查询

```
SELECT DISTINCT TB.ID,  Latitude, Longitude,
    111151.29341326*SQRT(pow(-6-`Latitude`,2)
        +pow(106-`Longitude`,2)*cos(-6*0.017453292519943)
        *cos(`Latitude`*0.017453292519943)) as Distance  
FROM `tablebusiness` AS TB, `tablecity` AS TC, `businessestag` AS BC,
    `businessesdistricts` AS BD, `tabledistrict` AS TD, 
     (SELECT ID, 
         (SELECT Title 
            FROM `tablebusiness` As TBuild 
           WHERE TBuild.ID = TBB.Building) As BuildingTitle 
      FROM `tablebusiness` As TBB) AS TBuilding
WHERE (-6.0917668133836 < `Latitude` AND `Latitude` < -5.9082331866164 
       AND 105.90823318662 < `Longitude` AND `Longitude` < 106.09176681338) 
  AND TB.City = TC.City AND BC.BusinessID = TB.ID AND BD.BusinessID = TB.ID 
  AND TD.ID = BD.District AND TBuilding.ID = TB.ID 
  AND (`Title` LIKE '%%' OR `Street` LIKE '%%'  OR TB.City LIKE '%%' 
       OR Country LIKE '%%' OR Tag LIKE '%%' OR TD.District LIKE '%%' 
       OR TBuilding.BuildingTitle LIKE '%%')
ORDER BY Distance LIMIT 0 ,100 
```

它仍然一样慢。

那我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T07:46:41.007

你真的需要`tablebusiness`在 FROM 子句中包含表三次吗？我已经重写了这个并使用了 JOIN。检查您的 WHERE 条件。`Title`LIKE '%%'是什么？试试这个简化的查询 -

```
SELECT
  TB.ID,
  Latitude,
  Longitude,
  111151.29341326 * SQRT(POW(-6 - `Latitude`, 2) + POW(106 - `Longitude`, 2) * COS(-6 * 0.017453292519943) * COS(`Latitude` * 0.017453292519943)) AS Distance
FROM
  `tablebusiness` AS TB
  JOIN `tablecity` AS TC
    ON TB.City = TC.City
  JOIN `businessestag` AS BC
    ON BC.BusinessID = TB.ID
  JOIN `businessesdistricts` AS BD
    ON BD.BusinessID = TB.ID
  JOIN `tabledistrict` AS TD
    ON TD.ID = BD.District
  LEFT JOIN `tablebusiness` TBuilding
    ON TBuilding.ID = TB.ID
WHERE
  (`Title` LIKE '%%' OR `Street` LIKE '%%' OR TB.City LIKE '%%' OR Country LIKE '%%'
    OR Tag LIKE '%%' OR TD.District LIKE '%%' OR TBuilding.BuildingTitle LIKE '%%')
  AND (-6.0917668133836 < `Latitude` AND `Latitude` < -5.9082331866164 
    AND 105.90823318662 < `Longitude` AND `Longitude` < 106.09176681338) 
ORDER BY
  Distance
LIMIT
  0, 100 
```

在 JOIN 和 WHERE 子句中使用的字段上添加索引也将加快查询速度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T07:38:08.493

做什么`explain select ...`和`show create table tablebusiness \G`说什么？

MySQL 如何使用[索引进行范围查询](http://dev.mysql.com/doc/refman/5.5/en/range-access-multi-part.html)有一些限制，请务必阅读。

根据我对许多用例的经验，在 MySQL 中使用 b-tree 索引比空间索引更有效。我建议将经度和纬度更改为整数（乘以适当的数字以获得“小数”并确保您有一个跨越两列（`alter table tablebusiness add index latlon (latitude,longitude)`）的索引。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T07:27:20.143

您在经度和经度列上有 BTree 索引吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-31T07:24:49.547

只有使用索引才能搜索查询的某些部分。所以你必须有一个索引。由于 MySQL 具有（地理）空间数据的扩展，因此您应该查找它并使用 R-tree 索引。这是对两列进行范围限制的最有效类型。

# javascript - 单击 Ajax 可排序表的一行时如何打开信息窗口

> ID：10829021
> 
> 赞同：2
> 
> 时间：2012-05-31T07:14:50.277
> 
> 标签：javascript, php, google-maps, google-maps-api-3, dom-events

我在这里问过类似但不一样的[东西](https://stackoverflow.com/questions/10827931/opening-info-window-when-clicking-a-table-row)（并且已经回答了）。现在我有一些后续问题，我认为最好重新问（我已经阅读了规则，我希望我不会违反任何规则。但如果我这样做，请提醒我）。

我正在从 MySQL 表中加载几个城市的 ID、名称和位置，然后将其填充到 HTML 表中。还有一个带有指向这些城市的标记的谷歌地图。

当用户单击 HTML 行之一（tr 标签）时，我希望在城市标记上弹出一个信息窗口。我正在使用没有任何 jQuery 的 PHP、Javascript 和 XML。我已经做到了这一点。

现在我正在尝试使 HTML 表可排序。因此，当用户单击 th 时，数据将根据单击的 th 进行排序（但是对于此示例，它只能按 ID 排序）。

问题是至少排序一次后，单击 tr 时不会再弹出信息窗口。

我的 HTML：

```
<?php
   $query = "SELECT id, name, lat, lng FROM city ORDER BY id";
   $arrCities = mysql_query ($query);
?>

<div id="gmap" style="width: 550px; height: 450px"></div>

<table id="tblData">
   <tr>
       <th>/* when the th clicked it'll call js function */
             <a href="javascript:GetData('sort.php?by=id&val=<? echo $val; ?>', 'tblData');">ID</a>
       </th>
       <th>City</th>
   </tr>

   <?php while ($row = mysql_fetch_assoc($arrCities)) { ?>

       <tr id="<?php echo $row['id']; ?>">

           <td><?php echo $row['id']; ?></td>
           <td><?php echo $row['name']; ?></td>

       </tr>
   <?php } ?>
</table> 
```

我的 PHP 用于创建 XML 来填充标记（my-xml-generator.php）：

```
<?php
    $query = "SELECT id, name, lat, lng FROM city ORDER BY id";
    $arrCities = mysql_query ($query);

    $dom = new DOMDocument('1.0', 'utf-8');
    $node = $dom->createElement ('markers');
    $parNode = $dom->appendChild ($node);

    header('Content-type: text/xml');

    while ($row = mysql_fetch_assoc($arrCities))
    {
            $node = $dom->createElement ('marker');
            $newNode = $parNode->appendChild ($node);
            $newNode->setAttribute ('id', $row['id']);
            $newNode->setAttribute ('name', $row['name']);
            $newNode->setAttribute ('lat', $row['lat']);
            $newNode->setAttribute ('lng', $row['lng']);
    }

    echo $dom->saveXML();
?> 
```

我的谷歌地图 Javascript：

```
 var gmap = new google.maps.Map (mapDiv, options);

    var arrMarkers = []; 
    var infoWindow = new google.maps.InfoWindow;

    // add markers to the map
    DownloadUrl ("my-xml-generator.php", function(data)
    {
        var xml = data.responseXML;
        var markers = xml.documentElement.getElementsByTagName ("marker");

        for (var i = 0; i < markers.length; i++)
        {
            var id = markers[i].getAttribute("id");

            var lat = parseFloat (markers[i].getAttribute("lat"));
            var lng = parseFloat (markers[i].getAttribute("lng"));
            var pos = new google.maps.LatLng (lat, lng);

            var markerOptions =
            {
                position    : pos,
                map         : gmap,
                draggable   : false
            };

            // add the marker
            var marker = new google.maps.Marker (markerOptions);
            arrMarkers.push(marker);

            // assign onclick event for each tr
            // this is the part that I have to somehow re-run after the sorting is done
            var tr = document.getElementById(id);
            google.maps.event.addDomListener (tr, "click",
                (function(i) {
                    var row = i;
                    return function() {
                        RowClick (row);
                    }
                })(i)
            );

            // add info window
            var html = '<div>' + id + '</div>';

            BindInfoWindow (marker, gmap, infoWindow, html);
        }
    });

    function BindInfoWindow (marker, map, infoWindow, html)
    {
        google.maps.event.addListener (marker, "click", function()
        {
            infoWindow.setContent (html);
            infoWindow.open (map, marker);
        });
    }

    function RowClick (i)
    {
        google.maps.event.trigger (arrMarkers[i], "click");
    }

    function DownloadUrl (url, callback)
    {
        var xhr = new XMLHttpRequest();

        xhr.onreadystatechange = function()
        {
            if (xhr.readyState == 4)
            {
                xhr.onreadystatechange = DoNothing;
                callback(xhr, xhr.status);
            }
        };

        xhr.open ('GET', url, true);
        xhr.send (null);
    }

    function DoNothing() {} 
```

我的 GetData() 函数（简单且常用的函数）：

```
function GetData (dataSource, divID)
{
    var xhr = new XMLHttpRequest();

    xhr.open ("GET", dataSource);

    xhr.onreadystatechange = function()
    {
        if (xhr.readyState === 4)
        {               
                var targetDiv = document.getElementById (divID);
                targetDiv.innerHTML = xhr.responseText;
        }
    }

    xhr.send (null);
} 
```

我的 sort.php（我的排序方式是再次运行查询以检索所需的排序结果并将 tr 行输出到表的 innerHTML）：

```
<?php
   $by = $_GET['by'];
   $val = $_GET['val'];

   $query = "SELECT id, name, lat, lng FROM city ORDER BY $by $val";
   $arrCities = mysql_query ($query);

   // set the new order value
   $val == 'ASC' ? 'DESC' : 'ASC';
?>

   <tr>
       <th>
             <a href="javascript:GetData('sort.php?by=id&val=<? echo $val; ?>', 'tblData');">ID</a>
       </th>
       <th>City</th>
   </tr>

   <?php while ($row = mysql_fetch_assoc($arrCities)) { ?>

       <tr id="<?php echo $row['id']; ?>">

           <td><?php echo $row['id']; ?></td>
           <td><?php echo $row['name']; ?></td>

       </tr>
   <?php } ?>
</table> 
```

当点击一个 tr 时，该 tr 中包含的城市的信息窗口将正确弹出。排序也有效

但是在它被排序一次之后， tr 的点击事件显然已经消失了。排序后如何重新分配？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T07:47:59.623

1.  存储标记的 ID。
2.  封装负责将标记绑定到行的 JS。
3.  `DownloadUrl`在回调和`GetData`函数内部调用封装好的JS 。

# 店铺编号

使 arrMarkers 成为一个对象：`var arrMarkers = {};`

# 封装绑定

```
function BindMarkerRows() {

    for(var id in arrMarkers) {
        var tr = document.getElementById(id);

        google.maps.event.addDomListener (tr, "click",
            (function(marker) {
                return function() {
                    google.maps.event.trigger (marker, "click");
                }
            })(arrMarkers[id])
        );
    }
} 
```

# 更新下载地址

```
DownloadUrl ("my-xml-generator.php", function(data) {

    var xml = data.responseXML;
    var markers = xml.documentElement.getElementsByTagName ("marker");

    for (var i = 0; i < markers.length; i++) {

        var id = markers[i].getAttribute("id");

        var lat = parseFloat (markers[i].getAttribute("lat"));
        var lng = parseFloat (markers[i].getAttribute("lng"));
        var pos = new google.maps.LatLng (lat, lng);

        var markerOptions =
        {
            position    : pos,
            map         : gmap,
            draggable   : false
        };

        // add the marker
        var marker = new google.maps.Marker (markerOptions);
        arrMarkers[id] = marker; //Here we access the object as an associative array
    }

    BindMarkerRows();
} 
```

# 更新 GetData

```
function GetData (dataSource, divID)
{
    var xhr = new XMLHttpRequest();

    xhr.open ("GET", dataSource);

    xhr.onreadystatechange = function()
    {
        if (xhr.readyState === 4)
        {
            var status = xhr.status;

            if ((status >= 200 && status < 300) || status === 304)
            {
                var targetDiv = document.getElementById (divID);
                targetDiv.innerHTML = xhr.responseText;
                BindMarkerRows();
            }
        }
    }

    xhr.send (null);
} 
```

# c# - .msu Windows 更新的静默安装？

> ID：10829027
> 
> 赞同：2
> 
> 时间：2012-05-31T07:15:15.513
> 
> 标签：c#, windows, installation, updates, silent

我遇到了 Windows 更新静默安装的小问题。为什么我需要它？我有用于重新安装 win7 的系统磁盘的位副本（利用 .net 框架、Visual Studio、Java 和 50 多个其他应用程序一次安装）。然后我需要安装一些重要的更新。我在 c# 中编写了小型实用程序，工作正常，除了安装即使使用 `startInfo.Arguments = "/quiet/norestart/passive";`. 不沉默：我的意思是至少有两个窗口询问我是否需要安装或重新启动选项。

问题在另一个论坛中发言[人们如何部署 HOTFIXES .msu 文件？](http://social.technet.microsoft.com/Forums/en-US/configmgrswdist/thread/5a4a4dc7-845a-41d5-8694-95c3da38578f) 但解决方案对我来说有点不清楚。有人知道如何解决它吗？再次，`startInfo.Arguments = "/quiet/norestart/passive";` 或者`startInfo.Arguments = @"/qb!"+ "REBOOT=ReallySuppress"+ @"/qn";` 不工作，并且在链接中解释了原因。 `textBox1.Text`是一个目录中所有修补程序和更新的位置。

{

```
 string[] filePaths = Directory.GetFiles(textBox1.Text);
        ProcessStartInfo startInfo = new ProcessStartInfo();
        startInfo.CreateNoWindow = true;
        startInfo.UseShellExecute = true;
        startInfo.WindowStyle = System.Diagnostics.ProcessWindowStyle.Hidden;
        //startInfo.Arguments = "/quiet/norestart/passive";

        for (int i = 0; i < filePaths.Length; i++)
        {
            label1.Text = "Working";
            startInfo.FileName = filePaths[i];
            startInfo.Arguments = @"/qb!"+ "REBOOT=ReallySuppress"+ @"/qn";

            try
            {
                Process.Start(startInfo.FileName).WaitForExit(); 

            }
               catch (Exception exc)
            {
                MessageBox.Show(exc.Message, "", MessageBoxButtons.OK, MessageBoxIcon.Error);
            }

        }
        label1.Text = " Done ";

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T07:19:25.043

首先，您只是将没有空格的参数链接在一起，因此只传递了一个可能不起作用的参数。尝试

```
startInfo.Arguments = "/qb! REBOOT=ReallySuppress /qn" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T14:46:01.040

最后我使用纯 CMD 行绕过它。除例外情况外，无 Windows 的静默安装。

```
private void button1_Click(object sender, EventArgs e)
    {
        string[] filePaths = Directory.GetFiles(textBox1.Text);
        Process process = new Process();
        process.StartInfo.FileName = "cmd.exe";
        process.StartInfo.CreateNoWindow = true;
        process.StartInfo.UseShellExecute = false;
        process.EnableRaisingEvents = false;

        for (int i = 0; i < filePaths.Length; i++)
        {
            if (i == 0) { label1.Text = "Working On first task"; }
            process.StartInfo.Arguments = "/C " + "@" + "\"" + filePaths[i] + "\"" + " /quiet /norestart";
            process.Start();
            process.WaitForExit();
            label1.Text = (100 * i / filePaths.Length).ToString() + " % is done"; 

        }
        label1.Text = "Done";

    } 
```

# c - C unix，套接字上的非对称加密

> ID：10829030
> 
> 赞同：5
> 
> 时间：2012-05-31T07:15:23.120
> 
> 标签：c, sockets, unix, encryption

我在 C unix 中有一个客户端/服务器应用程序，我需要使用 RSA 之类的东西加密/解密数据（但不一定是 RSA）。是否有此类功能的库（和相应的文档）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T07:18:57.967

您可以查看[SSL/TLS C API](http://www.openssl.org/docs/ssl/ssl.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T08:07:57.687

For a Client/Server Application, the best way to ensure security is by using TLS/SSL.

The latest version of TLS is TLS 1.2 ([RFC 5246](http://www.ietf.org/rfc/rfc5246.txt)) and as WagnerVaz has rightly mentioned, the best opensource library available fro TLS is [OpenSSL](http://www.openssl.org/) .OpenSSL not only provides the library for TLS/Crypto. But, it also provides you a tool for generating certificates & private keys (based on RSA/DSA etc) on various formats.

Though OpenSSL is the finest TLS Library available in the market, it is a little difficult to understand and use for a first timer. There is a very wonderful tutorial written by Eric Rescorla himself on using OpenSSL.

[An Introduction to OpenSSL Programming (Part - I)](http://www.rtfm.com/openssl-examples/part1.pdf) / [An Introduction to OpenSSL Programming (Part - II)](http://www.rtfm.com/openssl-examples/part2.pdf)

It would be best if you first try to get some idea as to what is SSL and then start writing code for the same.

Alternately, let's say you are interested only in assymetric encryption / decryption, still OpenSSL's Crypto Libraries can be used.

# spring - jsf 2.0 spring 3 范围请求不起作用

> ID：10829032
> 
> 赞同：5
> 
> 时间：2012-05-31T07:15:27.020
> 
> 标签：spring, jsf-2

我正在尝试使用 spring 为 jsf 提供托管 bean。我假设 @ManagedBean 将被 JSF 容器拾取以将 JSF 中的 EL 链接到托管 bean，即使我通过在 faces-config.xml 中配置 spring 使用来使用 spring。

Spring 将提供 bean，但现在**谁来管理 bean 的范围？**

我尝试在 bean 上进行注释以使其成为请求范围，但它们不起作用。

```
@ManagedBean(name="helloBean") //meant for JSF
@RequestScoped //meant for JSF
@Scope(value="request") //meant for spring
@Controller //meant for spring
public class HelloBean implements Serializable { 
```

实际上早些时候我使用的是普通的 JSF，@ManagedBean 和 @RequestScoped 运行良好。现在，当我尝试使用 spring 进行集成时，范围不起作用。

我什至尝试在 spring 配置中设置 bean 范围，但它们在 spring 上下文（单例和原型）中按预期工作，但不是 web 请求上下文。

我试图避免使用上面的 @Scope 和 @Controller 注释，希望 JSF 将管理范围，但看起来不像。

下面是我的 spring config 和 MyHelloBean 的文件片段，它可能有助于更好地沟通。

```
<bean id="helloBean" class="com.mkyong.common.HelloBean" init-method="init" />

<bean id="myHelloBean" class="com.mkyong.common.MyHelloBean" init-method="init" >
        <property name="helloBean" ref="helloBean"></property>
</bean>

@ManagedBean
@RequestScoped
@Scope(value="request")
@Controller
public class MyHelloBean implements Serializable {

    private static final long serialVersionUID = 1L;
    //@ManagedProperty(value = "#{helloBean}")
    private HelloBean helloBean; 
```

见上面的 MyHelloBean 我正在使用 spring DI 来设置由 spring 设置的 helloBean。我已经注释掉了@ManagedBean，我想我可以把它留在那里，因为它会被spring以任何方式忽略，我猜JSF不会处理它，但为了安全起见，我把它注释掉了，让JSF不处理它。

为了完成我在 faces-config 中使用下面来激活 spring 使用。

```
<el-resolver> 
org.springframework.web.jsf.el.SpringBeanFacesELResolver 
</el-resolver> 
```

问候，

米腾。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T08:52:00.557

我们的团队在集成 JSF 和 Spring bean 时遇到了类似的问题，包括它们的作用域问题。我在这里分享我们的知识。

# 范围

基本上现在，当您在应用程序上下文中定义时，**Spring 将管理您的 bean，从而管理范围**。Spring 会将 JSF 范围注释映射到他的本机范围注释。

*   Spring 和 JSF 支持都提供范围的示例：

@RequestScoped 注解将映射到 @Scope("request") Spring 的注解等，以及其他支持的范围。

*   当 Spring 不支持 JSF 提供的范围时的示例：

@ViewScoped 未在 Spring 的本机范围注释中定义，因此（不确定）它将使用 Spring 的默认范围，即单例或请求范围（不确定）。

# 豆类注射液

在 JSF2 中，您使用 @ManagedProperty 注释进行注入，而 Spring 使用 @Autowired 注释。**有什么区别和选择哪个？**

*   使用 @ManagedProperty 注入 Spring bean：

您希望注入的 Spring 组件必须具有一个与 jsf 注入注释的值匹配的值：@Component(value = "valueMatches") 注入 @ManagedProperty(value = "valueMatches")。

*   使用 @Autowired 注入 Spring bean：

您希望注入的 Spring 组件必须不需要自定义值来区分，如果它是您要注入的 bean 的唯一实现：@Component 注入 @Autowired。

# 我们的方式

我们使用 Spring 的注解来定义 Beans、Scopes 和 Injection。

我们用@Scope(value = "desiredScope")、@Controller(value = "beanName") 和@Qualifier(value = "beanName") 注释标记了JSF bean。稍后可以在 faces-config.xml 中通过 @Controller 注释中定义的“beanName”值从 JSF 上下文中访问它。

我们用 @Service 注解标记了 Spring 服务。

我们使用 @Autowired 注解注入 Spring 服务和 JSF bean。

我们在 Web 上找到了 ViewScope 和 FlashScope 自定义实现，并将它们用于我们的 bean。因此，我们没有丢失任何 JSF2 作用域，甚至添加了新作用域。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T07:48:57.407

您的方法有点令人困惑，因为您似乎正在混合 Spring XML 配置和基于 Spring [Annotation 的](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html#beans-annotation-config)配置。[如这里](http://cagataycivici.wordpress.com/2007/12/19/annotate-jsf-beans-with-spring-25/)所描述的示例，如果您使用带注释的配置，那么您应该：

```
<context:component-scan base-package="com.yourcom.package" /> 
```

订购 Spring 扫描注释。否则，如果您使用的是 XML 配置，那么您应该：

```
<bean id="helloBean" class="com.mkyong.common.HelloBean" init-method="init" scope="request" /> 
```

默认情况下，`scope`对于 Spring bean 是`singleton`.

# data-binding - Grails，使用会话中的值注入/填充域对象

> ID：10829033
> 
> 赞同：2
> 
> 时间：2012-05-31T07:15:27.767
> 
> 标签：data-binding, grails

在我的应用程序中，许多类都有共同的字段“公司”。当应用程序保存该对象时，它们必须填写公司（对此进行验证）。公司也保持在一个会话中。现在，当我想使用域类作为命令对象时，必须已经填写公司，否则我会收到验证错误。在进行任何验证之前，有什么方法可以始终填写公司字段，这样我就不必每次都手动进行。（我试过自定义数据绑定器，但是当请求中没有参数时它不起作用）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T09:41:03.933

您可以在对象被保存、更新或验证之前使用GORM [events](http://grails.org/doc/latest/guide/GORM.html#eventsAutoTimestamping) `beforeInsert`或.`beforeUpdate``beforeValidate`

在您的域中，您需要类似的东西：

```
import org.springframework.web.context.request.RequestContextHolder 
class Foo {
    String company
    ...
    def beforeInsert = {
        try {
            // add some more error checking (i.e. if there is is no request)
            def session = RequestContextHolder.currentRequestAttributes().getSession()
            if(session) {
                this.company = session.company
            }             
        } catch(Exception e) {
            log.error e
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-24T04:19:34.943

如果您想在绑定过程*之前*绑定一个属性，您可以创建一个自定义的[BindEventListener](http://grails.org/doc/latest/api/org/codehaus/groovy/grails/web/binding/BindEventListener.html)并在*grails-app/conf/spring/resources.groovy中注册*

首先，创建您的自定义 BindEventListener

**/src/groovy/SessionBinderEventListener.groovy**

```
import org.springframework.beans.MutablePropertyValues
import org.springframework.beans.TypeConverter

class SessionBinderEventListener implements BindEVentListener {

    void doBind(Object wrapper, MutablePropertyValues mpv, TypeConverter converter) {
        def session = RequestContextHolder.currentRequestAttributes().getSession()
        mpv.addPropertyValue("company", session.company)
    }

} 
```

其次，注册您的 BindEventListener

**grails-app/conf/spring/resources.groovy**

```
beans = {
    sessionBinderEventListener(SessionBinderEventListener)
} 
```

**但是**，如果您的域类不包含名为 company 的属性，您将获得[InvalidPropertyException](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/beans/InvalidPropertyException.html)。要克服这个问题，请创建一个包含名为*company*的属性的类列表- 请参阅下面的详细信息

**/src/groovy/SessionBinderEventListener.groovy**

```
import org.springframework.beans.MutablePropertyValues
import org.springframework.beans.TypeConverter

class SessionBinderEventListener implements BindEVentListener {

    private List<Class> allowedClasses = [Foo]

    void doBind(Object wrapper, MutablePropertyValues mpv, TypeConverter converter) {
        if(!(allowedClasses.contains(wrapper.class))) {
            return
        }

        def session = RequestContextHolder.currentRequestAttributes().getSession()
        mpv.addPropertyValue("company", session.company)
    }

} 
```

# php - php标头位置在脚本中不起作用

> ID：10829034
> 
> 赞同：-1
> 
> 时间：2012-05-31T07:15:29.967
> 
> 标签：php, javascript, forms, html

每当我提交表单时，通过在 php 中打开错误报告都会遇到此错误：

警告：无法修改标头信息 - 标头已由 /Applications/MAMP/htdocs/cranium/includes/register.inc 中的（输出开始于 /Applications/MAMP/htdocs/cranium/includes/header.inc.php:14）发送。第 65 行的 php

在我的 header.inc.php 中，我有以下代码：

```
<!doctype html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"> <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Cranium eSolutions</title>
  <meta name="viewport" content="width=device-width">
  <link rel="stylesheet" href="/cranium/css/style.css">
  <script src="/cranium/js/libs/modernizr-2.5.3.min.js"></script>
</head>
<body> 
```

我使用 include_once 将此代码包含在我的页面中。（第 14 行指向 body 标记，之后没有空格或其他任何内容）。

在我的 register.inc.php 中：

```
<?php
error_reporting(E_ALL); ini_set('display_errors', 'On');
$username = mysql_real_escape_string(stripcslashes($_POST['txtUser']));

//generate password
$password = generatePassword(10,5);

$email = mysql_real_escape_string(stripcslashes($_POST['txtEmail']));

//random code
$com_code = sha1(uniqid(rand()));

$fName = mysql_real_escape_string(stripcslashes($_POST['txtFname']));
$lName = mysql_real_escape_string(stripcslashes($_POST['txtLname']));
$address = mysql_real_escape_string(stripcslashes($_POST['txtAddress']));
$city = mysql_real_escape_string(stripcslashes($_POST['txtCity']));
$zip = (int)$_POST['txtZip'];
$country = $_POST['txtCountry'];
$mobile = mysql_real_escape_string(stripcslashes($_POST['txtMobileNo']));
$office = mysql_real_escape_string(stripcslashes($_POST['txtOfficeNo']));
$specialty = $_POST['txtFOS'];
$prof = $_POST['txtProf'];

//checkbox
$practiceFetch = $_POST['chkSOP'];
$n = count($practiceFetch);
$practice = '';
for ($i = 0; $i < $n; ++$i) {
    $practice .= $practiceFetch[$i].', ';
}
$practice = substr($practice,0,-2);

$coordinator = mysql_real_escape_string(stripcslashes($_POST['txtPrimaryCoord']));
$relationship = mysql_real_escape_string(stripcslashes($_POST['txtRelationship']));
$relEmail = mysql_real_escape_string(stripcslashes($_POST['txtRelEmail']));
$feedback = mysql_real_escape_string(stripcslashes($_POST['txtHow']));

//service concat
//if ($_POST['txtSubService']) $subService = mysql_real_escape_string(stripcslashes(' - '.$_POST['txtSubService']));
//$service = mysql_real_escape_string(stripcslashes($_POST['txtService'])).$subService;
$service = 'tae';

//start Query
require_once('../includes/db.config.php');
$checkQuery = "SELECT username FROM tblAccounts WHERE username='$username'";
$checkResult = mysqli_query($cxn,$checkQuery);
if (mysqli_num_rows($checkResult) <= 0) {
    $query = "INSERT INTO tblAccounts VALUES('','$username','$password','$fName','$lName','$address','$email','$com_code','$city',$zip,'$country',$mobile,$office,'$specialty','$prof','$practice','$coordinator','$relationship','$relEmail','$feedback','$service')";
    $result = mysqli_query($cxn,$query);
    //email confirmation
    $to = $email;
    $subject = "Confirmation from Cranium eSolutions Inc., to $username";
    $header = "Cranium eSolutions Inc.: Confirmation from craniumesolutions.com";
    $message = "Please click the link below to verify and activate your account. <br />";
    $message .= "http://imageworkz.asia/Cranium-Trial/confirm.php?passkey=$com_code";
    $sentmail = mail($to, $subject, $message, $header);
    if($sentmail) {
        header('Location: http://www.google.com');
    } else {
        header('Location: http://localhost/cranium/verificationfail.html');
    }
} else {

    echo '<span style="color:red;">Username already exists</span>';

}
?> 
```

第 65 行指向 header('Location: www.google.com.');

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-31T07:18:10.777

**你不能在`header()`调用之前输出任何东西。**检查您的代码是否正在回显某些内容，或者显示任何错误。

看`header.inc.php`第 14 行。那是输出一些东西的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T07:26:21.453

header.ing.php 是输出。

您运行 "include('header.inc.php') 的那一瞬间，您就有了输出。

解决方案：稍后运行。

* * *

此外，在您的标头（位置）命令之后添加“退出”以停止正在执行的脚本的其余部分。PHP 将继续运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T07:23:32.543

您可以通过使用输出缓冲区来解决此问题。

[http://php.net/manual/de/function.ob-start.php](http://php.net/manual/de/function.ob-start.php)

这将缓冲输出，直到您刷新它或您的脚本完成。之前没有输出=>没问题！

# ios - iPhone PhoneGap restKit / jsonkit 重复符号

> ID：10829046
> 
> 赞同：0
> 
> 时间：2012-05-31T07:17:10.260
> 
> 标签：ios, cordova, restkit, phonegap-plugins

我被要求将现有的网站设为 PhoneGap，所以一切顺利，我将其转换为骨干网，包括 phonecap.js，以获得更时髦的东西。然后我被要求创建一个 AR 视图，所以我告诉人们我会在本机中这样做，而不是因为我不确定在 PhoneGap 中是否可行，或者需要很长时间。

所以我创建了一个单独的项目，在那里我对 AR 组件进行了测试，它运行良好。它使用 RestKit 下载数据，然后在 camerapreview 中显示代表数据的小气泡。

本周我的工作是将它们组合起来，因此您单击 PhoneGap 中的一个按钮，然后它会打开本机视图控制器。再次一切顺利。我创建了一个插件，它调用了这个函数，所以下一步就是复制所有的 AR 逻辑，而这一切都乱套了。

我不断得到重复的符号，其中很多我花了 6 到 7 个小时试图解决它，但我没有通过 100 个具有不同解决方案的网站，但没有一个有效。

所以 3 点钟我决定 f* restkit 让我只使用 jsonkit 并自己进行映射，但是同样的事情发生了重复的符号，每次它是 cordova / PhoneGap 然后是库。

我做错了什么还是科尔多瓦不好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T11:35:23.093

发现了问题。基本上我的应用程序和我使用的 RESTKit/JSONKit 库使用了相同的库。因此，要修复您从您的库或库中删除冲突的库，大多数情况下只需删除您的库即可。如果你删除了你的，然后引用库库 .h 文件。

# javascript - 如何在 Internet Explorer 中使用 html 子元素在 contenteditable div 中获取插入符号位置

> ID：10829047
> 
> 赞同：4
> 
> 时间：2012-05-31T07:17:11.817
> 
> 标签：javascript, internet-explorer, contenteditable, caret, cursor-position

我正在使用一个 contenteditable div，它可以选择在文本流中包含内联 html 元素，例如标签“<p> <font> <br>”。

在某些时候，我需要获取 contenteditable div 的插入符号位置（光标位置），插入符号（光标）位于 html 子元素之后。

我在 Firefox 的 javascript 中使用以下代码，它可以正常找到 contenteditable div 的插入符号位置（光标位置），但我没有找到任何解决方案让 Internet Explorer 找到`window.getSelection`未定义的插入符号位置（光标位置）。

```
function getCaretPosition() {
     if (window.getSelection && window.getSelection().getRangeAt) {
          var range = window.getSelection().getRangeAt(0);
          var selectedObj = window.getSelection();
          var rangeCount = 0;
          var childNodes = selectedObj.anchorNode.parentNode.childNodes;
          for (var i = 0; i < childNodes.length; i++) {
               if (childNodes[i] == selectedObj.anchorNode) {
                   break;
               }
               if (childNodes[i].outerHTML)
                    rangeCount += childNodes[i].outerHTML.length;
               else if (childNodes[i].nodeType == 3) {
                    rangeCount += childNodes[i].textContent.length; 
               }
          }
          return range.startOffset + rangeCount;
    }
    return -1;
} 
```

我发现它`document.selection;` 可以在 Internet Expolrer 上使用，但我认为找到可内容编辑 div 的插入符号位置（光标位置）对我来说不起作用。

任何人都可以为我解决任何问题。

在下面的示例中，我的**光标位置在 <p>two</p> 中的 't' 和 'w' 之间** `<div contenteditable="true"><p>one<br><b>t|wo</b></p></div>`我想在上面的示例中需要数字 14，因为此时我需要执行一些操作，我正在使用这个 contenteditable div作为我的自定义样式的 RichTextbox 适用于它

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-06T12:30:03.843

嗨，我找到了 Internet Explorer 版本 8 或更低版本的答案

```
 var cursorPosition=0;    
       if (document.selection && document.selection.createRange) {
            range = document.selection.createRange();
            if (range.parentElement() == YourEditableControl) {
                var tmpEle = document.createElement("span");
                YourEditableControl.insertBefore(tmpEle, YourEditableControl.firstChild);
                var tmpRange = range.duplicate();
                tmpRange.moveToElementText(tmpEle);
                tmpRange.setEndPoint("EndToEnd", range);
                cursorPosition= tmpRange.text.length;
            }
        } 
```

上面的代码解决了我找到 IE8 或更低版本的当前光标位置的问题，因为 window.getSelection() 对于 IE8 或更低版本是未定义的，并且适用于 IE9

因此可以使用`document.selection`对象`selection`和`range`对象来获取当前插入符号或光标位置表单`contenteditable` `div`或其他控件

我希望这个能帮上忙

# xml - 如何选择元素取决于使用 xslt 中的文本内容

> ID：10829049
> 
> 赞同：2
> 
> 时间：2012-05-31T07:17:15.677
> 
> 标签：xml, xslt

源xml是这样的：

```
<source>
    <idset>
        1,2,4
    </ideset>
    <c id = "1">aaa</c>
    <c id = "2">bbb</c>
    <c id = "3">ccc</c>
    <c id = "4">ddd</c>
</source> 
```

使用 idset 内容“1,2,4”生成新的 xml，如下所示：

```
<result>
    aaabbbddd
</result> 
```

我认为它应该使用文本“1,2,4”作为参数，但我不知道该怎么做

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T07:33:06.083

根据您之前的问题使用 XSLT 2.0...

**输入 XML**

```
<source>
    <idset>
        1,2,4
    </ideset>
    <c id = "1">aaa</c>
    <c id = "2">bbb</c>
    <c id = "3">ccc</c>
    <c id = "4">ddd</c>
</source> 
```

**XSLT 2.0**

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="/source">
        <result>
            <xsl:apply-templates select="c[@id=tokenize(normalize-space(current()/idset),',')]/text()"/>            
        </result>
    </xsl:template>
</xsl:stylesheet> 
```

**XML 输出**

```
<result>aaabbbddd</result> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T12:38:50.233

**XSLT 1.0 解决方案**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/*">
  <result>
   <xsl:apply-templates select="c"/>
  </result>
 </xsl:template>
 <xsl:template match=
 "c[not(contains(concat(',', normalize-space(/*/idset), ','),
                 concat(',', @id, ',')
                 )
        )
    ]"/>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<source>
    <idset>
    1,2,4
    </idset>
    <c id = "1">aaa</c>
    <c id = "2">bbb</c>
    <c id = "3">ccc</c>
    <c id = "4">ddd</c>
</source> 
```

**产生了想要的正确结果**：

```
<result>aaabbbddd</result> 
```

# c# - 当两个 Linq 调用使用不同的语法时，我可以合并它们吗？

> ID：10829056
> 
> 赞同：1
> 
> 时间：2012-05-31T07:17:59.873
> 
> 标签：c#, linq

我有以下代码。该函数有很多 Linq 调用，我在将其落实到位时得到了帮助。

```
 public IList<Content.Grid> Details(string pk)
    {
        IEnumerable<Content.Grid> details = null;
        IList<Content.Grid> detailsList = null;
        var data = _contentRepository.GetPk(pk);
        var refType = this.GetRefType(pk);
        var refStat = this.GetRefStat(pk);
        var type = _referenceRepository.GetPk(refType);
        var stat = _referenceRepository.GetPk(refStat);
        details =
        from d in data
        join s in stat on d.Status equals s.RowKey into statuses
        from s in statuses.DefaultIfEmpty()
        join t in type on d.Type equals t.RowKey into types
        from t in types.DefaultIfEmpty()
        select new Content.Grid
        {
            PartitionKey = d.PartitionKey,
            RowKey = d.RowKey,
            Order = d.Order,
            Title = d.Title,
            Status = s == null ? null : s.Value,
            StatusKey = d.Status,
            Type = t == null ? null : t.Value,
            TypeKey = d.Type,
            Link = d.Link,
            Notes = d.Notes,
            TextLength = d.TextLength
        };
        detailsList = details
                .OrderBy(item => item.Order)
                .ThenBy(item => item.Title)
                .Select((t, index) => new Content.Grid()
                {
                    PartitionKey = t.PartitionKey,
                    RowKey = t.RowKey,
                    Row = index + 1,
                    Order = t.Order,
                    Title = t.Title,
                    Status = t.Status,
                    StatusKey = t.StatusKey,
                    Type = t.Type,
                    TypeKey = t.TypeKey,
                    Link = t.Link,
                    Notes = t.Notes,
                    TextLength = t.TextLength,

                })
                 .ToList();
        return detailsList;

    } 
```

第一个对 Linq 使用一种格式，第二个使用另一种格式。有什么方法可以简化和/或组合这些吗？我真的很想让这段代码更简单，但我不知道该怎么做。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T07:25:52.450

当然，您可以将它们组合在一起。Linq 关键字（例如`from`,`where`和`select`get 转换为您在下面调用的 Extension 方法之类的调用，因此实际上没有区别。

如果您真的想组合它们，最快的方法是`()`绕过第一个查询，然后附加您`details`在第二个查询中使用的方法调用。像这样：

```
detailsList =
        (from d in data                    // <-- The first query
         // ...
         select new Content.Grid
         {
             // ...
         })
         .OrderBy(item => item.Order)    // <-- The calls from the second query
         .ThenBy(item => item.Title)
         .Select((t, index) => new Content.Grid()
         {
             //...
         }).ToList(); 
```

But i think that would be ugly. Two queries are just fine IMO.

# iphone - 新的 fbconnect Api 错误？

> ID：10829057
> 
> 赞同：0
> 
> 时间：2012-05-31T07:18:03.860
> 
> 标签：iphone, ios, facebook, xcode4, fbconnect

我在我的应用程序中使用 fbconnect api 将图像上传到 facebook 墙上。大约 2 个月前它对我很有效。但现在它对我不起作用，为此我使用此链接整合新的 fbconnect api .. [https://github.com/facebook/facebook-ios-sdk](https://github.com/facebook/facebook-ios-sdk) 但它给了我以下 4 个错误。

```
"_OBJC_CLASS_$_FBPermissionDialog", referenced from:
"_OBJC_CLASS_$_FBXMLHandler", referenced from:
"_OBJC_CLASS_$_FBSession", referenced from:
"_OBJC_CLASS_$_FBStreamDialog", referenced from: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T07:28:42.707

你建立了源吗？这可能是一个常见问题。转到项目设置 -> 构建阶段 -> 编译源并将以下文件添加到列表中

更新：

似乎您的项目中可能没有该文件。从此链接下载 sdk： [下载](https://github.com/facebook/facebook-ios-sdk)

要从那里下载，请按“下载”按钮并下载为 .zip

然后找到标有“src”的文件夹将其拖到您的项目中，您应该可以开始了！

还要确保导入：

```
#import "FBConnect.h" 
```

并符合正确的代表

# jquery - Themeroller 半径不再工作？

> ID：10829061
> 
> 赞同：0
> 
> 时间：2012-05-31T07:18:33.153
> 
> 标签：jquery, jquery-mobile

我的主题滚轮有问题..问题是我想在我的按钮上有一个半径，当我使用 TR 时，它会显示在他们的示例样本上，但是当我下载样式并想要使用它时，按钮是根本不圆

[在这里您可以看到我的意思的示例](http://yellowgreenmedia.nl/2/)

有谁知道如何解决这一问题？

谢谢

戴夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T07:58:57.453

Change the **data-inset** from false to true in your tag

# asp.net - asp.net gridview 格式化

> ID：10829062
> 
> 赞同：0
> 
> 时间：2012-05-31T07:18:33.477
> 
> 标签：asp.net, gridview

我有一个gridview，它有三列日期，pnl，cumpnl 我可以在使用代码应用于所有单元格时添加一些格式，例如

```
Protected Sub OnRowCreated(sender As Object, e As GridViewRowEventArgs)
    If e.Row.RowType = DataControlRowType.DataRow Then
        For Each cell As TableCell In e.Row.Cells
            cell.Font.Size = 10
            cell.HorizontalAlign = HorizontalAlign.Center
        Next
    End If

End Sub 
```

在那个 For...Next 循环中，如何仅引用 pnl 和 cumpnl 列中的单元格？无论如何，我看不到通过列标题名称或索引来引用单元格。

更新：

通过使用 RowDataBound 事件，我现在可以重置列中值的格式，但基于单元格值的前景色设置会出错（“输入字符串格式不正确”）。另外，我正在对列索引进行硬编码。我需要一种基于列标题名称动态获取列索引的方法

```
Protected Sub gvDataRetrieval_RowDataBound(sender As Object, e As System.Web.UI.WebControls.GridViewRowEventArgs) Handles gvDataRetrieval.RowDataBound
    If e.Row.RowType = DataControlRowType.DataRow Then
        For i As Integer = 1 To 2
            e.Row.Cells(i).Text = FormatCurrency(e.Row.Cells(i).Text, 2).ToString()
            If Double.Parse(e.Row.Cells(i).Text) < 0 Then e.Row.Cells(i).ForeColor = Drawing.Color.Red
        Next
 End If
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-23T20:28:24.343

卡皮尔的 C# 代码

```
 private void DataGrid1_RowCreated(Object sender, GridViewRowEventArgs e)
    {
        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            for (int i = 1; i < e.Row.Cells.Count; i++)
            {
                if (i == 1) { e.Row.Cells[i-1].Font.Bold = true; } else { e.Row.Cells[i-1].Font.Bold = false; }
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T07:24:01.093

每个循环的外部：

```
e.Row.Cells(index) 
```

例如。添加标题工具提示：

```
 Protected Sub Grid1_RowCreated(ByVal sender As Object, ByVal e As GridRowEventArgs)
       //setting row cells
    If e.Row.RowType = DataControlRowType.DataRow Then
      For i As Integer = 1 To e.Row.Cells.Count
        If i = 1 Then
           e.Row.Cells(i).Font.Size= 8
        ELSE
           e.Row.Cells(i).Font.Size= 12
        END IF
      NEXT
    End If
    End Sub 
```

# regex - 形成正则表达式的特殊方法？

> ID：10829065
> 
> 赞同：3
> 
> 时间：2012-05-31T07:18:50.557
> 
> 标签：regex

我遇到了这个正则表达式，我想知道它是如何使用的：

```
^.*(?=.{10,})(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$ 
```

我想知道正则表达式的各个部分是什么意思，而不仅仅是整个正则表达式的作用。

根据我对正则表达式的了解，我认为它匹配任何与数字（0-9）、小写和大写字母匹配的输入（至少 10 个字符长），但我需要确认这是否正确？

**编辑**

我也不知道它是什么意思验证，但看看我认为它做了什么，正则表达式可以简化为：

```
[\d|[a-zA-Z]]{10,} 
```

**编辑 2** 我注意到我的替换正则表达式不能确保我至少满足每个要求中的一个（至少一个数字、大写和小写字母）。有什么方法可以调整它，以便正则表达式也能做到这一点，还是只有原始正则表达式才有可能？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T07:26:07.903

我可以解释正则表达式的各个部分的作用，但总的来说，我觉得这很奇怪：

```
^.*(?=.{10,})(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$ 
```

基本上你说的是真的 - 正则表达式中没有其他魔法。

`^.*`- 匹配行首和 0+ 个字符，然后确保

以下只是断言-它们都不匹配/捕获任何内容。如果你想查找它，它被称为正向前瞻。如果它们都评估为真，则正则表达式的最后一部分将完成其余部分：

`(?=.{10,})`- 从第一个匹配停止的地方（可能在行首之后）有一个 10+ 字符的字符串（任何字符）

`(?=.*\d)`- 并且前面的整个字符串中至少有一位数字

`(?=.*[a-z])`- 和一个小写字母

`(?=.*[A-Z])`- 和一个大写字母

如果这一切都是真的，那么：

`.*$`- 匹配所有内容直到行尾

注意：如果任何断言失败，则不会匹配任何内容。

**到您的编辑**

我不这么认为 - 说字符串中某处有一个大写和小写字母和一个数字，并且说该字符串由 10+ 个字符组成，这些字符都是数字或字母（大写或小写）或两者兼而有之。您的正则表达式将匹配仅包含数字和字母或两者混合的字符串 - 原始正则表达式确保这些类中的每一个至少表示一次。似乎有人可能用它来验证用户密码或类似的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T07:27:46.903

这可能用于验证候选密码 - 它

1.  检查它是否至少有 10 个字符长
2.  检查它是否包含至少一位数字
3.  检查它是否包含至少一个小写字母
4.  检查它是否包含至少一个大写字母

您的替换正则表达式并不相同，因为它只是对上述条件进行 OR - 长讨厌的正则表达式与它们。上述条件也没有顺序；字母或数字可以出现在字符串中的任何位置。

实际上，我看不到进一步简化它的方法-您可能会删除开头的 .* 和结尾的 .*$ ，因为它们实际上没有任何用途。但除此之外，那个长正则表达式可以很好地结合强加这些条件而不强加命令。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T07:42:11.477

我认为这用于确保密码强度：它必须至少有 10 个字符长，至少 1 个数字，至少 1 个小写字母和至少 1 个大写字母。

整个正则表达式中最重要的部分是`(?=...)`运算符，它匹配但不消耗它匹配的字符串部分。因此，多个`(?=...)`相邻的多个用作 AND 运算符。

`(?=.{10,})`匹配任何至少 10 个字符的序列。

`(?=.*\d)`匹配任何后面的单个数字。

`(?=.*[a-z])`匹配任何后面的小写字符。

`(?=.*[A-Z])`匹配任何后面的大写字符。

因此，此正则表达式将匹配具有至少 10 个字符长的子字符串、至少有一个数字、一个小写字符和一个大写字符的任何字符串。

你可以看到它听起来比它应该的更复杂，尤其是子字符串部分。确实，`.*`后面的部分`^`是不必要的，我们可以将其简化为

```
^(?=.{10,})(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T08:56:17.763

正如其他人所说，这是一个密码强度验证正则表达式，但`.*`一开始不应该存在。实际上，`.*`最初消耗整个字符串，然后回溯，直到它到达所有四个前瞻都可以匹配的位置。它可以工作，但是如果不需要，为什么要让正则表达式做这么多工作呢？

```
^(?=.{10,})(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).*$ 
```

删除前导`.*`后，正则表达式*永远*不必回溯（除非您在成功的前瞻回溯后计算返回到起始位置）。至于`.*$`最后的，可能没有必要，但也没有坏处。我会把它留在里面，以防有人试图将匹配的结果用于某些东西而不是原始字符串。

还有一点：您可以通过删除第一个前瞻并将`.{10,}`替换为来使正则表达式更简洁`.*`：

```
^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{10,}$ 
```

之所以这样写，是为了解决 Internet Explorer ( [ref](http://blog.stevenlevithan.com/archives/regex-lookahead-bug) ) 中长期存在的错误。该错误最终在 IE8 或 IE9 中得到修复，但我会保持原样，以防万一。

# git - 如何将 git 命令行转换为 tortoiseproc？

> ID：10829073
> 
> 赞同：3
> 
> 时间：2012-05-31T07:19:40.497
> 
> 标签：git, command-line, tortoisegit

TortoiseGit 的 TortoiseProc.exe 的命令行如何实现这个 git 命令？

```
git pull -v --progress origin master 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T07:45:23.413

我认为 TortoiseProc 可以执行任何 git 命令行。
仅允许您访问[TortoiseGit](http://code.google.com/p/tortoisegit/) GUI 的某些部分。

[您可以在直接从 VisualStudio 中使用 TortoiseGit / TortoiseSVN 提交](http://www.lanwin.de/2009/11/19/commit-with-tortoisegit-tortoisesvn-directly-von-visualstudio/)或在“[从命令行执行 TortoiseGit](http://ayende.com/blog/4749/executing-tortoisegit-from-the-command-line) ”中看到一个示例：
在每种情况下，当调用 tortoiseProc 命令时都会弹出一个 GUI。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T02:43:19.123

如果你已经知道对应的 git 命令行，为什么不直接在 bash 中运行呢？为了方便在当前目录下运行 bash，您可以运行 msysgit setup 并勾选设置选项中的上下文菜单项。

# python - 可选文件扩展名的正则表达式匹配

> ID：10829075
> 
> 赞同：2
> 
> 时间：2012-05-31T07:20:05.173
> 
> 标签：python, regex, url, python-2.7

我正在使用 Python 中的正则表达式从文本中提取部分 URL。我正在寻找的 URL 来自一组有限的模式，所以感觉我应该能够在正则表达式中处理它们。我要提取的是文件名的第一部分（**以下所有示例中的“some.file.name”**），其中可以包括点、字母和数字。

这些是 URL 可以采用的形式：

```
http://www.example.com/some.file.name.html
http://www.example.com/some.file.name_foo.html
http://www.example.com/some.file.name(123).html
http://www.example.com/some.file.name_foo(123).html
http://www.example.com/some.file.name
http://www.example.com/some.file.name_foo
http://www.example.com/some.file.name(123)
http://www.example.com/some.file.name_foo(123) 
```

我想我对这个正则表达式非常满意：

```
http://www\.example\.com/([a-zA-Z0-9\.]+)(_[a-z]+)?(\(\d+\))?(\.html)? 
```

但是当 URL 类似于列表中的第一个时，它会在匹配项中包含“.html”。有什么方法可以阻止这种情况，还是正则表达式的基本限制？

我很高兴删除代码中的扩展名，因为它始终是相同的，并且永远不会作为文件名的一部分有效，但将其作为正则表达式匹配的一部分会更干净。

**编辑：**

我要强调的是，这些 URL 是在正文中。我无法保证它们之前或之后是否有字符，或者这些字符可能是什么。我认为可以安全地假设它们不会是数字、字母、下划线或圆点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T07:25:00.880

默认情况下，正则表达式是**贪婪匹配的。**

试试这个正则表达式：

```
^http://www\.example\.com/([a-zA-Z0-9\.]+?)(_[a-z]+)?(\(\d+\))?(\.html)?$ 
```

请注意，在第一部分中添加的额外`?`内容未捕获。`.html`它使第一组捕获*尽可能少地匹配*，而不是尽可能多地匹配。如果没有`?`，`.html`将被包含在第一组中，因为其他组是可选的，并且贪婪匹配尝试尽可能“早”匹配。

PS 另请注意，我使用`^`并`$`始终匹配整行来锚定正则表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T07:24:49.483

您可以将 .html 扩展名指定为非捕获组：

```
http://www\.example\.com/([a-zA-Z0-9\.]+)(_[a-z]+)?(\(\d+\))?(?=(\.html)?) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T09:32:02.810

在我看来，您不关心文件扩展名。您只想提取文件名。

试试这个：

```
http://www\.example\.com/([\w]+.[\w]+.[\w()]+) 
```

在 PHP 中，我使用了 preg_match_all($regex, $str, $matches)，它返回了类似这样的内容。

```
Array
(
    [0] => Array
        (
            [0] => http://www.example.com/some.file.name
            [1] => http://www.example.com/some.file.name_foo
            [2] => http://www.example.com/some.file.name(123)
            [3] => http://www.example.com/some.file.name_foo(123)
            [4] => http://www.example.com/some.file.name
            [5] => http://www.example.com/some.file.name_foo
            [6] => http://www.example.com/some.file.name(123)
            [7] => http://www.example.com/some.file.name_foo(123)
        )

    [1] => Array
        (
            [0] => some.file.name
            [1] => some.file.name_foo
            [2] => some.file.name(123)
            [3] => some.file.name_foo(123)
            [4] => some.file.name
            [5] => some.file.name_foo
            [6] => some.file.name(123)
            [7] => some.file.name_foo(123)
        )

) 
```

希望能帮助到你！

# google-app-engine - AppEngine - 优化 POST 请求的读/写计数

> ID：10829078
> 
> 赞同：1
> 
> 时间：2012-05-31T07:20:41.483
> 
> 标签：google-app-engine, google-cloud-datastore, jdo

我需要优化我正在使用的 POST 请求的读/写计数。

有关请求的一些信息：

*   用户发送约 100 个项目的 JSON 数组
*   servlet 需要使用单个`long`属性检查接收到的任何项目是否比数据存储中的对应项更新
*   我正在使用 JDO

我目前做的是（伪代码）：

```
 foreach(item : json.items) {
     storedItem = persistenceManager.getObjectById(item.key);
     if(item.long > storedItem.long) {
         // Update storedItem
     }
 } 
```

这显然会导致每个请求约 100 个读取请求。

减少此逻辑的读取计数的最佳方法是什么？使用 JDO`Query`吗？我读到使用“IN”-查询只会导致多个查询相继执行，所以我认为这对我没有帮助:(

还有`PersistenceManager.getObjectsById(Collection)`。这有什么帮助吗？找不到任何有关这将发出多少请求的文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T08:53:32.367

我认为您可以使用以下调用进行批量获取：

```
Query q = pm.newQuery("select from " + Content.class.getName() + " where contentKey == :contentKeys"); 
```

类似上述查询的内容将返回您需要的所有对象。你可以从这里处理所有其余的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T07:39:30.283

最好的选择是

```
pm.getObjectsById(ids); 
```

因为那是为了在调用中获取多个对象（特别是因为你有 id，因此有键）。当然，当前代码（2.0.1 和更高版本）应该为 getEntities() 执行单个数据存储调用。看到[这个问题](http://code.google.com/p/datanucleus-appengine/issues/detail?id=197&can=1&q=label%3aTargetRelease-2.0.1&colspec=ID%20Stars%20Type%20Status%20Priority%20FoundIn%20TargetRelease%20Owner%20Summary)

# lua - Lua：自动创建表的方法？

> ID：10829081
> 
> 赞同：0
> 
> 时间：2012-05-31T07:20:55.820
> 
> 标签：lua, creation, lua-table

我正在尝试将数据库数据类别的数据值加载到表中以进行进一步处理。每个数据类别都应该有自己的表。不幸的是，数据类别的数量并不一致，并且因数据库而异，因此我考虑根据当前数据类别的数量自动创建表：

```
--categories is a table containing the names of all data categories
for a = 1, #categories, 1 do 
temptable..a = {}; 
end 
```

这当然是行不通的，因为 Lua 试图将表分配给变量而不是它的值。以这种方式也无法进行变量连接。有没有办法让 Lua 自动创建表？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T07:31:57.760

记住在 Lua 中表可以包含表，所以为什么不简单地这样做

例如

```
cat = {'cat1','cat2','cat3'}

temptable = {}
for i,v in pairs(cat) do
temptable[v] = {1+ i,2 + i,3 + i}
end 
```

会给你一张包含 temptable 的桌子

```
[cat2] => table
    (
       [1] => 3
       [2] => 4
       [3] => 5
    )
[cat1] => table
    (
       [1] => 2
       [2] => 3
       [3] => 4
    )
[cat3] => table
    (
       [1] => 4
       [2] => 5
       [3] => 6
    ) 
```

可以使用

```
for i,v in pairs(temptable.cat1) do
print(i,v)
end 
```

# java - 签署 SOAP 数据包后未写入 WCF UserNameToken

> ID：10829092
> 
> 赞同：1
> 
> 时间：2012-05-31T07:22:06.427
> 
> 标签：java, .net, wcf, web-services, soap

我正在尝试使用用户名令牌、摘要密码和随机数调用 java 服务。但是，我成功地根据服务的要求生成了 usernametoken。我正在使用[http://blogs.msdn.com/b/aszego/archive/2010/06/24/usernametoken-profile-vs-wcf.aspx](http://blogs.msdn.com/b/aszego/archive/2010/06/24/usernametoken-profile-vs-wcf.aspx)这个项目。我现在得到的服务问题是抱怨在 SOAP 数据包签名后 usernametoken 已被修改。我曾尝试使用 Encoder 手动对令牌进行签名，但 java 服务不能接受 2 个签名令牌。服务期望使用 WS11、SOAP12。签名应该引用二进制安全令牌。我不知道如何克服 usernametoken 签名问题。对此的任何帮助将不胜感激。绑定代码的样子。

```
AsymmetricSecurityBindingElement messageSecurity =
new AsymmetricSecurityBindingElement(new X509SecurityTokenParameters(X509KeyIdentifierClauseType.IssuerSerial,                                                                                                                                                       SecurityTokenInclusionMode.AlwaysToInitiator),  new X509SecurityTokenParameters(X509KeyIdentifierClauseType.Thumbprint, SecurityTokenInclusionMode.AlwaysToRecipient));
messageSecurity.IncludeTimestamp = true;
messageSecurity.LocalClientSettings.TimestampValidityDuration = TimeSpan.FromHours(2);
messageSecurity.MessageSecurityVersion =
MessageSecurityVersion.WSSecurity11WSTrust13WSSecureConversation13WSSecurityPolicy12BasicSecurityProfile10;
messageSecurity.MessageProtectionOrder = MessageProtectionOrder.EncryptBeforeSign;
messageSecurity.SetKeyDerivation(false);
messageSecurity.EndpointSupportingTokenParameters.Signed.Add(new UsernameTokenParameters());
CustomBinding binding = new CustomBinding();
binding.Elements.Add(messageSecurity);
binding.Elements.Add(new TextMessageEncodingBindingElement(MessageVersion.Soap12WSAddressing10, Encoding.UTF8));
binding.Elements.Add(new HttpTransportBindingElement());
EndpointAddress serviceAddress = new EndpointAddress(new Uri("http://xya.com"),                                                                          EndpointIdentity.CreateDnsIdentity("Test Location 027 :5657050091"), new AddressHeaderCollection());
ChannelFactory<DhsUserAuthUploadHposDvaStatementsPortTypeChannel> channelFactory = new ChannelFactory<DhsUserAuthUploadHposDvaStatementsPortTypeChannel>(binding, serviceAddress);
UsernameClientCredentials credentials = new UsernameClientCredentials(new UsernameInfo("user1", "user1"));
credentials.ServiceCertificate.SetDefaultCertificate(XXXXXXX);
channelFactory.Endpoint.Behaviors.Remove(typeof(ClientCredentials));
channelFactory.Endpoint.Behaviors.Add(credentials);
channelFactory.Endpoint.Contract.ProtectionLevel = ProtectionLevel.Sign;
var client = channelFactory.CreateChannel();
client.upload(); 
```

**SOAP 请求应该看起来像**

```
 <s:Envelope xmlns:s="http://www.w3.org/2003/05/soap-envelope" xmlns:a="http://www.w3.org/2005/08/addressing"
        xmlns:u="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity- utility-1.0.xsd">
 <s:Header>
<a:Action s:mustUnderstand="1" u:Id="_2"></a:Action>
<a:MessageID u:Id="_4">urn:uuid:5da819a8-aa8d-4275-96a6-bf442510dab5</a:MessageID>
<a:ReplyTo u:Id="_5">
  <a:Address>http://www.w3.org/2005/08/addressing/anonymous</a:Address>
</a:ReplyTo>
<VsDebuggerCausalityData xmlns="http://schemas.microsoft.com/vstudio/diagnostics/servicemodelsink">uIDPo7sBpVzzmo9HtC8qFKcxqwoAAAAAYq4+mfejvkWlHkVaHB/zovT/3WdxLOZLpXjc7SgJ+qkACQAA</VsDebuggerCausalityData>
<a:To s:mustUnderstand="1"
      u:Id="_6">http://xya.com/</a:To>
<o:Security s:mustUnderstand="1"
            xmlns:o="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
<u:Timestamp u:Id="uuid-50a519be-99d1-499d-a456-bf81a5566077-1">
    <u:Created>2012-05-29T00:33:57.917Z</u:Created>
    <u:Expires>2012-05-29T00:38:57.917Z</u:Expires>
</u:Timestamp>
<o:BinarySecurityToken u:Id="uuid-6dd46443-6092-4bd3-9e5c-f455ccb6a6de-2"
                         ValueType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3">MIIF1zCCBL+gAwIBAgIDBHONMA0GCSqGSIb3DQEBBQUAMH8xCzAJBgNVBAYTAkFVMQwwCgYDVQQKEwN</o:BinarySecurityToken>
<wsse:UsernameToken wsu:Id="89a288a0-fb17-44b9-97d8-808ad5e318bd"
                      xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd"
                      xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
    <wsse:Username>user1</wsse:Username>
    <wsse:Password Type="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordDigest">So8DJF7O8fYdstMK/DAASuM+nLY=</wsse:Password>
    <wsse:Nonce EncodingType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0#Base64Binary">DK6E6IT356SfZLWSMsY7mw==</wsse:Nonce>
    <wsu:Created>2012-05-29T00:33:57Z</wsu:Created>
  </wsse:UsernameToken>
  <Signature xmlns="http://www.w3.org/2000/09/xmldsig#">
    <SignedInfo>
      <CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
      <SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1"/>
      <Reference URI="#_1">
        <Transforms>
          <Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
        </Transforms>
        <DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
        <DigestValue>8Po0d4s3JJB1Xh4vdB6+7M/ivoA=</DigestValue>
      </Reference>
      <Reference URI="#_2">
        <Transforms>
          <Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
        </Transforms>
        <DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
        <DigestValue>Azl0elmnUzxTSLUuwfWf6DLT8h8=</DigestValue>
      </Reference>
      <Reference URI="#_3">
        <Transforms>
          <Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
        </Transforms>
        <DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
        <DigestValue>h1iD7HzEK+uslbPRHjwN2zt7zhc=</DigestValue>
      </Reference>
      <Reference URI="#_4">
        <Transforms>
          <Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
        </Transforms>
        <DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
        <DigestValue>MYOf+GwjbcNnUP+EPkeVepuAkv8=</DigestValue>
      </Reference>
      <Reference URI="#_5">
        <Transforms>
          <Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
        </Transforms>
        <DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
        <DigestValue>k69pykploFPkXhw5ogDHcjcJUI0=</DigestValue>
      </Reference>
      <Reference URI="#_6">
        <Transforms>
          <Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
        </Transforms>
        <DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
        <DigestValue>TSr1cnqSoYmoEIURjA5OZB/iyS0=</DigestValue>
      </Reference>
      <Reference URI="#uuid-50a519be-99d1-499d-a456-bf81a5566077-1">
        <Transforms>
          <Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
        </Transforms>
        <DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
        <DigestValue>V0OOCzGhK9mXCNZTxfzllEhQWwI=</DigestValue>
      </Reference>
      <Reference URI="#89a288a0-fb17-44b9-97d8-808ad5e318bd">
        <Transforms>
          <Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
        </Transforms>
        <DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
        <DigestValue>s3bH9/JJJmeemMXlqjgKXSU/2xw=</DigestValue>
      </Reference>
    </SignedInfo>
    <SignatureValue>oPO8qJ3trY1r1UFB6OQ+fsa1zL18k6Qipd</SignatureValue>
    <KeyInfo>
      <o:SecurityTokenReference>
        <o:Reference URI="#uuid-6dd46443-6092-4bd3-9e5c-f455ccb6a6de-2"/>
      </o:SecurityTokenReference>
    </KeyInfo>
  </Signature>
</o:Security>
</s:Header>
<s:Body>....</s:Body>
</s:Envelope> 
```

绑定生成的soap与上面的类似，但唯一的问题是签名无效。有没有办法延迟登录 WCF？谢谢

# jquery - MVC - 通过单击带有 jQ uery 的图像重定向到另一个视图？

> ID：10829093
> 
> 赞同：0
> 
> 时间：2012-05-31T07:22:08.860
> 
> 标签：jquery, html, asp.net-mvc, model-view-controller, html-helper

我正在使用 MVC。

我的 html 中有这一行：

```
<div id="logo"><a href="#"><img src="../../Content/img/logo3.png" alt="" /></a></div 
```

但是当用户单击徽标时，我想重定向到另一个视图。

我怎样才能做到这一点？我需要相同的结构。

提前致谢

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-31T07:24:17.857

为您的锚点提供一个`href`指向您要重定向到的控制器操作的值：

```
<div id="logo">
    <a href="@Url.Action("someaction", "somecontroller")">
        <img src="../../Content/img/logo3.png" alt="" />
    </a>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T07:25:52.697

```
<a href="<%: Url.Content("~/Controllor/View") %>">
                <div id="logo">
                </div>
 </a> 
```

# android - Android - 设置\定义模拟器的端口

> ID：10829096
> 
> 赞同：0
> 
> 时间：2012-05-31T07:22:19.117
> 
> 标签：android, android-emulator, telnet

有没有办法定义安卓模拟器的端口号？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T07:25:23.603

是的

```
emulator -port <port> -avd <avd_name> 
```

> 控制台端口号必须是介于 5554 和 5584 之间的偶数，包括 5554 和 5584。+1 也必须是免费的，并将保留给亚行。

有关模拟器的命令行参数，请参阅[Android](http://developer.android.com/guide/developing/tools/emulator.html)模拟器。

# iphone - 使用 ImageIO 在 iOS 上创建渐进式 jpeg 会在设备上产生块状结果

> ID：10829100
> 
> 赞同：11
> 
> 时间：2012-05-31T07:22:51.403
> 
> 标签：iphone, ios, cocoa, uiimage, javax.imageio

我正在尝试从一个`UIImage`对象创建一个渐进式 jpeg，这是我的代码

```
NSMutableData *data = [NSMutableData data];

NSString *path = [NSHomeDirectory() stringByAppendingPathComponent: @"Library/Caches/test.jpg"];

CFURLRef url = CFURLCreateWithString(NULL, (CFStringRef)[NSString stringWithFormat:@"file://%@", path], NULL);
CGImageDestinationRef destination = CGImageDestinationCreateWithURL(url, kUTTypeJPEG, 1, NULL);
CFRelease(url);

NSDictionary *jfifProperties = [NSDictionary dictionaryWithObjectsAndKeys:
                                (__bridge id)kCFBooleanTrue, kCGImagePropertyJFIFIsProgressive,
                                nil];

NSDictionary *properties = [NSDictionary dictionaryWithObjectsAndKeys:
                            [NSNumber numberWithFloat:.7], kCGImageDestinationLossyCompressionQuality,
                            jfifProperties, kCGImagePropertyJFIFDictionary,
                            nil];

CGImageDestinationAddImage(destination, ((UIImage*)object).CGImage, (__bridge CFDictionaryRef)properties);
CGImageDestinationFinalize(destination);
CFRelease(destination); 
```

这在模拟器中运行时效果很好，但不幸的是在设备上产生了厚实/块状的结果：

![块状/块状结果。](../Images/6151633a6e7b1337cce699b745dc151e.png)

关于发生了什么的任何想法？我会恢复使用`UIImageJPEGRepresentation`作为最后的手段，我真的需要渐进式 JPEG。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T08:41:46.287

在 iOS 模拟器上它可以如你所提到的。

但是您是否在带有 Retina Display 的 IOS 模拟器上进行了测试。为此，请执行以下步骤： 1\. 启动模拟器 2\. 转到“硬件”-->“设备” 3\. 选择具有 Retina 显示屏的模拟器并再次检查。

如果您在 ios 视网膜模拟器上遇到问题，那么您就明白了。

尝试使用分辨率非常小的图像，然后在您的设备上进行测试。

很少有问题可以在`UIImageView`. 请检查下面提到的链接：- [UIImageView 中的高分辨率图像](https://stackoverflow.com/questions/3821752/can-we-use-higher-resolution-images-in-uiimageview)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T22:54:42.680

好消息：我刚刚在 iPhone 4 上进行了测试，图像看起来很棒：

```
NSDictionary *jfifProperties = [NSDictionary dictionaryWithObjectsAndKeys:
@72, kCGImagePropertyJFIFXDensity,
@72, kCGImagePropertyJFIFYDensity,
@1, kCGImagePropertyJFIFDensityUnit,
nil]; 
```

（使用新的文字语法）。

一个很好的[JFIF 参考](http://en.wikipedia.org/wiki/JPEG_File_Interchange_Format)，了解这些密度选项的含义。

# java - 如何使用部署变量类名导入静态函数？

> ID：10829102
> 
> 赞同：1
> 
> 时间：2012-05-31T07:23:00.047
> 
> 标签：java

我正在为计算机和 Android 开发跨平台的 OpenGL 游戏。

对于计算机平台，我使用 LWJGL：

```
import static org.lwjgl.opengl.GL20.*; 
```

对于 Android 平台，我使用：

```
import static android.opengl.GLES20.*; 
```

我不想创建接口 GL 并包装这些函数，我不想用不同的导入两次编写相同的类。我知道这是可能的，因为 Java 在启动时会被编译为本机。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T08:38:24.790

我看到您的问题有两种解决方案：

*   第一个，是包装（你不想要的）。并在运行时注入正确的类或实例。

*   第二个是在编译时使用一些宏预处理或一些脚本来指定要根据目标平台使用的导入。它会使编译变得更加复杂，您可能必须`org.lwjgl.opengl.GL20.*`在开发阶段明确使用。
    因此，最简单的做法是**创建一个脚本以**`org.lwjgl.opengl.GL20.*`在`android.opengl.GLES20.*`目标平台为 Android 时替换。

# java - 在 Tomcat 服务器上加载文件 (JSF,SPRING)

> ID：10829113
> 
> 赞同：1
> 
> 时间：2012-05-31T07:23:48.597
> 
> 标签：java, file, tomcat, maven, load

这里有人知道如何在tomcat服务器上加载文件吗？我们正在使用：Maven、JSF 2、Spring 3、Tomcat 7

我有以下项目结构：

![结构体](../Images/c18bc57e00c9ae5f8d0f0bb5faa70812.png)

我想加载 page.xml 文件！

我想过在服务器的 server.xml 中的 GlobalNamingResource 中设置一个环境变量。但是如何在我的 WebApp 中访问这个变量呢？

或者我可以使用 ContextClassLoader，但如果我想加载该文件，我总是会返回 null。

问题是，我不能使用 FacesContext，因为如果我调用 FacesContext.getCurrentInstance(); 会返回 null；

目前，我必须对路径进行硬编码才能使其工作。但是如果我想在 Eclipse 中测试它或者将它部署在服务器上，我总是必须更改这条路径。

```
@PostConstruct
public void loadMenu() {
             List<Page> pageCollection = new ArrayList<Page>();
    Page page = null;

    File xmlFile = new File(
            "C:\\Program Files\\Apache Software Foundation\\Tomcat 7.0\\webapps\\rainstar2-webapp\\WEB-INF\\classes\\at\\beko\\rainstar2\\page.xml");

    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    try {
        DocumentBuilder db = dbf.newDocumentBuilder();
        Document xmlDoc = db.parse(xmlFile);
        xmlDoc.getDocumentElement().normalize();

        NodeList pages = xmlDoc.getElementsByTagName("page");
        int size = pages.getLength();
        Node pageNode = null;

        for (int i = 0; i < size; i++) {
            pageNode = pages.item(i);
            NamedNodeMap attr = pageNode.getAttributes();
            page = new Page();
            page.setLabel(attr.getNamedItem("key").getNodeValue()
                    .toString());
            page.setRedirect(Boolean.valueOf(attr.getNamedItem("redirect")
                    .getNodeValue().toString()));
            page.setNavigationName(attr.getNamedItem("url").getNodeValue()
                    .toString());
            page.addRole(attr.getNamedItem("role").getNodeValue()
                    .toString());
            pageCollection.add(page);
        }
    } catch (ParserConfigurationException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (SAXException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T07:33:31.237

使用 JSF，您可以使用[ResourceHandler](http://docs.oracle.com/javaee/6/api/javax/faces/application/ResourceHandler.html)。它适用于`/webapp/resources`. 我不完全确定下的资源`/main`

```
 FacesContext currentContext = FacesContext.getCurrentInstance();
    ResourceHandler resourceHandler = currentContext.getApplication()
            .getResourceHandler();
    Resource resource = resourceHandler.createResource(fileName, libraryName); 
```

是 下的文件夹的`libraryName`名称`/webapp/resources`。

编辑：不依赖 JSF，您可以使用旧的[ClassLoader](http://docs.oracle.com/javase/6/docs/api/java/lang/ClassLoader.html)。

```
 InputStream inputStream = this.getClass().getClassLoader()  
             .getResourceAsStream("/path/to/file/from/.war_as_root/fileName"); 
```

请注意，该路径是相对于您打包的 .war 根目录的路径

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T08:22:22.217

好的，我的解决方案是。

我将 page.xml 放入 web-inf。

```
ClassLoader loader = Thread.currentThread().getContextClassLoader();
    URL url = loader.getResource("..\\page.xml");
    File xmlFile = null;
    try {
        xmlFile = new File(url.toURI());
    } catch (URISyntaxException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    } 
```

![在此处输入图像描述](../Images/1452bee49b905a488a5dfb64a65b242a.png)

# android - android中EditText内的可点击按钮（或任何视图）

> ID：10829124
> 
> 赞同：10
> 
> 时间：2012-05-31T07:24:35.933
> 
> 标签：android, button, android-edittext

我想在我的 EditText 中有一个按钮或一个可点击的视图，以便我可以在点击它时执行一些操作。感谢[Marcosbeirigo](https://stackoverflow.com/users/181915/marcosbeirigo)的[回答，我能够在我的 EditText 中放置一个可绘制对象。](https://stackoverflow.com/a/4281770/840669)但是，现在我想让它可以点击，以便我可以对其执行一些操作。我知道这是可能的，因为 HTC 在他们的股票短信应用程序中使用 EditText 内的按钮，如下图所示 -

![EditText 中的发送按钮](../Images/6296cf71421efe1600a78e9b8fb9881e.png)

就我而言，按钮将位于任何位置，也可以位于中心。但主要是如何在 EditText 中放置一个按钮？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-31T07:30:57.630

使用相对布局。Send 和 Attach 按钮是简单的 Android 按钮，而 32/160 是一个 TextView。将按钮和文本视图放在 EditText 对象上，使用布局安排并为 EditText 对象设置一些正确的填充，以便其中的文本不会在按钮下方。

您不需要任何可绘制对象，并且收听 android 按钮的单击事件不再是问题。它绝对正确

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-10-14T11:01:37.997

使用这个，它对我有用 -

```
 <RelativeLayout android:layout_width="match_parent"
     android:layout_height="wrap_content">

            <EditText android:id="@+id/id_search_EditText"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:singleLine="true"
                android:paddingRight="40dp"
                android:hint="Enter your feelings and connect" />

        <ImageButton android:id="@+id/id_search_button"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignTop="@+id/id_search_EditText"
            android:layout_alignBottom="@+id/id_search_EditText"
            android:layout_alignRight="@+id/id_search_EditText"
            android:background="@drawable/ic_launcher"/>

      </RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-31T07:50:29.003

我认为您尝试搜索设置单击事件以查找复合可绘制对象。你可以在这里找到一些解决方案

[在编辑文本内处理可绘制的点击事件](https://stackoverflow.com/questions/3554377/handling-click-events-on-a-drawable-within-an-edittext)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T07:28:46.017

editText 里面没有按钮它只是一个带有白色背景的editText，所以你看不到它的边距和简单的布局安排。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-31T07:53:36.283

唯一可能的解决方案是使用[相对布局](http://developer.android.com/reference/android/widget/RelativeLayout.html)，它允许您将视图也叠加到其他视图中。其他布局不允许你做这样的事情。

我还找到了这个教程： http: [//developer.android.com/resources/articles/layout-tricks-merge.html](http://developer.android.com/resources/articles/layout-tricks-merge.html)也许它可以帮助你:)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-25T09:36:02.687

![输出](../Images/0184c574c6dfabcfd0c3acdb5f744a9f.png)

使用此代码可能会起作用。

```
<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical">

    <RelativeLayout
        android:id="@+id/REFReLayTellFriend"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="10dp"
        android:orientation="horizontal"
        android:paddingBottom="5dp"
        android:paddingTop="5dp">

        <EditText
            android:id="@+id/txtSearch"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:background="@drawable/editext_rounded"
            android:drawableLeft="@android:drawable/ic_menu_search"
            android:gravity="start"
            android:hint="Search"
            android:singleLine="true"/>

        <ImageButton
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignRight="@+id/txtSearch"
            android:background="@drawable/ic_action_content_filter_list"/>

    </RelativeLayout>

</LinearLayout> 
```

# c# - 动态 linq，如何生成 LIKE 和 NOT LIKE

> ID：10829128
> 
> 赞同：0
> 
> 时间：2012-05-31T07:24:49.517
> 
> 标签：c#, linq, entity-framework

在我的场景中，我必须根据用户在屏幕上选择的内容构建动态查询。

用户可以选择一个列名，然后选择一个运算符，然后键入一个值。

我已经这样做了，但是 LIKE 和 NOT LIKE 的语法如何呢？所以

**第一个。我将列名添加到我的列表中**

```
var columns = new Dictionary<string, string>
              {
                {"CurrentStatus", "Current Status"},
                {"RequestNumber", "Request Number"},
                {"RequestDate", "Request Date"},
                {"IsOnHold", "Is On Hold"},
                {"BrandReturnedVehicle", "Brand Returned Vehicle"},
                {"TypeReturnedVehicle", "Type Returned Vehicle"},
                {"ChassisReturnedVehicle", "Chassis Returned Vehicle"},
                {"DestructionCertificateNumberReturnedVehicle", 
                              "Destruction Certificate Number Returned Vehicle"},
                {"AmmountWithVAT", "Ammount WithVAT "},
                {"AmmountWithoutVat", "Ammount Without Vat"},
                {"Percentage", "Percentage"},
                {"VehicleDestructionDate", "Vehicle Destruction Date"},
                {"Comments", "Comments"},
                {"Discriminator", "Request Type"},
              };

                DdlColumn1.DataSource = columns;  
                DdlColumn1.DataTextField = "Value";
                DdlColumn1.DataValueField = "Key";              
                DdlColumn1.DataBind(); 
```

**第二。根据所选的列名称，我将运算符添加到下拉列表中。**

```
protected void DdlColumn1SelectedIndexChanged(object sender, EventArgs e)
        {
            LoadOperatorsDependingOnColumn(sender as DropDownList, DdlColumn1.SelectedValue);
        }

    private void LoadOperatorsDependingOnColumn(DropDownList ddlOperators, string columnname)
                {
                    var operators = new Dictionary<string, string>();
                    operators.Clear();
                    switch (columnname)
                    {
                        case "CurrentStatus":
                            AddTextOperatorsToList(operators);
                            ddlOperators.DataSource = operators;
                            ddlOperators.DataTextField = "Value";
                            ddlOperators.DataValueField = "Key";
                            ddlOperators.DataBind();
                            break;
                        case "AmmountWithVat":
                            AddNumberOperatorsToList(operators);
                            break;
                    }
                }

private static void AddTextOperatorsToList(Dictionary<string, string> operators)
            {
                operators.Add("==", "Equals");
                operators.Add("<>", "Not Equals");
                operators.Add("LIKE", "Contains");
                operators.Add("NOT LIKE", "Does not Contain");
            }

            private static void AddNumberOperatorsToList(Dictionary<string, string> operators)
            {
                operators.Add("=", "Equals");
                operators.Add("<>", "Not Equals");
                operators.Add(">", "Greater than");
                operators.Add(">=", "Greater or equal than");
                operators.Add("<", "Less than");
                operators.Add("<=", "Less or equal than");
            }

private string ColumnType(string columnName)
            {
                switch (columnName)
                {
                    case "CurrentStatus":
                        return "Text";
                        break;
                    case "RequestNumber":
                        return "Text";
                        break;
                }
            }

            private string BuildQuery()
            {
                var sb = new StringBuilder();
                        //var list = RequestBaseBL.GetRequestByCustomQuery("RequestNumber == \"12\"");

                if (ColumnType(DdlColumn1.SelectedValue) == "Text" && DdlOperator1.SelectedItem.Text=="==")
                {
                    sb.Append(DdlColumn1.SelectedValue);
                    sb.Append(DdlOperator1.SelectedValue);
                    sb.Append("\"" +  TxtValue1.Text + "\"");
                } 
```

1.  我不知道如何连接/附加字符串以使不等于、包含和不包含与动态 linq 库一起使用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T08:25:38.333

看起来动态 linq 的东西不支持 'LIKE' - 但我想这就是你问这个问题的原因。我能想到的最好的办法是用 (x >= y0 AND x < y1) 之类的东西替换 LIKE。
所以：

```
if (ColumnType(DdlColumn1.SelectedValue) == "Text" && DdlOperator1.SelectedItem.Text=="LIKE")
{
    string s = TxtValue1.Text;
    Char c = s[s.Length - 1];
    string s1 = s.Substring(0, s.Length - 1) + ((Char)(c + 1));
    string clause = string.Format("{0} >= \"{1}\" and {0} < \"{2}\"", DdlColumn1.SelectedValue, s, s1);
    sb.Append(clause);
} 
```

即，将搜索字符串的最后一个字符的值加 1，并将其用作搜索的上限。
如果你知道你只处理简单的拉丁字符集，你可以让它稍微简单一些并使用：

```
string clause = string.Format("{0} >= \"{1}\" and {0} <= \"{1}z\"", DdlColumn1.SelectedValue, TxtValue1.Text); 
```

但是可能值得看看[这里的谓词构建器](http://www.albahari.com/nutshell/predicatebuilder.aspx)以获得更多的类型安全性。

编辑

嗯，我从来没有！忘记这一切。

看来您可以将“myField.Contains(myCriteria)”和“myField.StartsWith(myCriteria)”用于 CONTAINS 和 LIKE

```
sb.Append(string.Format("{0}.Contains(\"{1}\")", DdlColumn1.SelectedValue, TxtValue1.Text); 
```

和

```
sb.Append(string.Format("{0}.StartsWith(\"{1}\")", DdlColumn1.SelectedValue, TxtValue1.Text); 
```

并且，对于不喜欢：

```
sb.Append(string.Format("!{0}.StartsWith(\"{1}\")", DdlColumn1.SelectedValue, TxtValue1.Text); 
```

# c# - 从gridview单元格获取值到数据库

> ID：10829132
> 
> 赞同：0
> 
> 时间：2012-05-31T07:25:10.367
> 
> 标签：c#, sql, gridview

我想获取单元格中的值并将其存储在一个变量中，然后将其插入数据库

我在 girdview 中显示产品我想让用户在发生这种情况时选择产品我希望程序向数据库发送订单

我只想将它插入到订单表中，但我不知道当我使用文本框时这段代码如何

```
 SqlConnection conn = new SqlConnection(ConfigurationManager.ConnectionStrings["ConnectionString"].ConnectionString);
    SqlCommand cmd = new SqlCommand("Insert Into OrdarTable (TotalPrice ) VALUES (@Price)", conn);
    cmd.CommandType = CommandType.Text;
    cmd.Parameters.AddWithValue("@Price", .............);
    conn.Open();
    cmd.ExecuteNonQuery(); 
```

但如果我将单元格中的数据转换为字符串并将它们放在标签中然后将它们插入到表格中，那么我不会使用 girdview

```
 string s = grdCart.SelectedRow.Cells[4].Text; 
```

它不闪烁，我收到此错误

```
Object reference not set to an instance of an object. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T09:18:00.297

您遇到的错误意味着没有 SelectedRow，它返回 null，因此您可以获取单元格值，甚至可以从中访问单元格，因为它为 null。

由于您使用了“SelectedRow”，我假设您将 AutoGenerateSelectButton 属性设置为 true，如果是这样，那么您必须执行 gridview_SelectedIndexedChaning 事件并将您的代码放入其中。如果没有，则启用它并执行我上面描述的操作，否则请提供额外的详细信息，以便我们为您提供帮助。

# wordpress - 特定 wordpress 帖子的短网址

> ID：10829137
> 
> 赞同：0
> 
> 时间：2012-05-31T07:25:35.617
> 
> 标签：wordpress, share, permalinks

如何查看特定 wordpress 帖子的短网址（或默认永久链接）（现在正在使用漂亮的永久链接）。我只是一个访客。我想查看“短网址”只是为了分享。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T10:44:01.927

根据主题的创建方式，

如果您查看该页面的源代码，它可能会将与该帖子关联的 ID 号作为类或 div id 应用。

IE：

```
<div id="post-2311" class="post-2311 post status-publish format-standard category-news" > 
```

在这里您可以看到 post-2311 是 DIV 的 id，这将在模板中使用 wordpress $post->ID，您可以使用此 ID 号生成该页面的短 url。

```
ie: http://thewebsite.com/?p=2311 
```

使用该链接会将您定向到该帖子，但将查询字符串替换为漂亮的 url。

米

# c - 实时时钟是否支持闰秒？

> ID：10829139
> 
> 赞同：4
> 
> 时间：2012-05-31T07:25:40.963
> 
> 标签：c, system-clock, unix-timestamp

我有一个电话`clock_gettime(CLOCK_REALTIME)`，它可以处理闰秒吗？如果不是，需要进行哪些更改？在 Solaris 上工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T07:44:45.407

如果您的 Unix 系统与 NTP 同步，它很可能会处理闰秒。

有关更多信息，请参阅本文：[NTP Leap Second](http://www.meinberg.de/english/info/leap-second.htm#os)。

# ios - 获取iOS的root权限

> ID：10829143
> 
> 赞同：0
> 
> 时间：2012-05-31T07:25:55.563
> 
> 标签：ios, ios4

我想获得iOS的root权限？？

据我所知，这是不可能的。但是要确认是否可以通过越狱设备来完成。我需要做一些系统调用也得到缓冲区帧根。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T07:39:49.533

是的，您只能通过越狱来获得设备的root权限。

# sql - 创建作业以使用 SSIS 转换数据

> ID：10829152
> 
> 赞同：1
> 
> 时间：2012-05-31T07:26:44.910
> 
> 标签：sql, sql-server, sql-server-2008, ssis, sql-server-2008-r2

我想每天通过 SSIS 将数据从 OldDatabase 转换为 NewDatabase。为了这：

```
1- Create Script From Exists New DataBase
2- Change DatabaseName OF Generated Script and Then Execute Script To Create NewDatabase2 whit no data.
3- Set SSIS Configuration Parameters.
4- Execute SSIS Package to convert Data. 
```

我想通过 Job 执行此操作。我想怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T08:46:52.587

您的要求不是很清楚，但有两个 SSIS 任务可以帮助您。

如果要传输所有内容，可以使用“[传输数据库任务](http://technet.microsoft.com/en-us/library/ms141204.aspx)”

如果您需要指定对象，您可以使用“ [Transfer SQL Server Objects Task](http://msdn.microsoft.com/en-us/library/ms142159.aspx) ”，您可以在其中指定是否先删除对象以及如何处理数据等内容：

![在此处输入图像描述](../Images/486b99909b6eb1e11c5a5c5bf2d71977.png)

# c# - C# 从传感器读取串行数据

> ID：10829162
> 
> 赞同：1
> 
> 时间：2012-05-31T07:27:46.953
> 
> 标签：c#

我想为我的设备制作一个 GUI 来显示每个传感器的值。我的设备以这种格式发送数据

`:1*895*123; :1*987*145;`

`*`用于从传感器中分离数据

`;`用于数据的结尾

`:`用于在下一个循环中开始数据

我有变量点、Rx1 和 Ry2 来存储数据并将其显示在标签上，但看起来我的程序不起作用.. 这是我的代码

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        string TestText, Rx1, Ry1, dot;
        public Form1()
        {
            InitializeComponent();
        }

        private void Form1_Load(object sender, EventArgs e)
        {

        }

    private void button1_Click(object sender, EventArgs e)
    {
        serialPort1.PortName = "COM7";
        serialPort1.BaudRate = 2400;

        serialPort1.Open();
        if (serialPort1.IsOpen)
        {
            button1.Enabled = false;
            button2.Enabled = true;
        }
    }

    private void button2_Click(object sender, EventArgs e)
    {
        if (serialPort1.IsOpen)
        {
            serialPort1.Close();
            button1.Enabled = true;
            button2.Enabled = false;
        }

    }

    private void serialPort1_DataReceived(object sender, System.IO.Ports.SerialDataReceivedEventArgs e)
    {
        TestText = serialPort1.ReadExisting();
        string[] nameArray = TestText.Split ('*');
        foreach (string name in nameArray)
        {
            dot = nameArray[0];
            Rx1 = nameArray[1];
            Ry1 = nameArray[2];
        }
    }

    private void label3_Click(object sender, EventArgs e)
    {

    }

    private void timer1_Tick(object sender, EventArgs e)
    {
        label3.Text = dot;
        posY.Text = Ry1;
        posX.Text = Rx1;
    }
        //this.Invoke(new EventHandler(DisplayText));
    }

} 
```

我还是 c# 的新手，对它不太好..所以我需要帮助。之前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T07:51:19.347

你确定你在接收数据的方法中得到完整的数据包吗？如果不是，您需要缓冲它们以确保它正常工作。

你可以试试这样的。

```
// A buffer for the incoming data strings.
string buffer = string.Empty;

private void serialPort1_DataReceived(object sender, System.IO.Ports.SerialDataReceivedEventArgs e)
{
  // buffer up the latest data.
  buffer += serialPort1.ReadExisting();;

  // there could be more than one packet in the data so we have to keep looping.
  bool done = false;
  while (!done)
    {
       // check for a complete message.
       int start = buffer.IndexOf(":");
       int end = buffer.IndexOf(";");
       if (start > -1 && end > -1 && start < end)
       {
          // A complete packet is in the buffer.
          string packet = buffer.Substring(start + 1, (end - start) - 1);

          // remove the packet from the buffer.
          buffer = buffer.Remove(start, (end - start) + 1);

          // split the packet up in to it's parameters.
          string[] parameters = packet.Split('*');
          rx1 = parameters[0];
          ry1 = parameters[1];
          dot = parameters[2];

       }
    else
       done = true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T08:09:11.573

如果您在阅读后只获得一大块数据。例如`:1*895*123;`

```
TestText = serialPort1.ReadExisting();//:1*895*123;
string[] nameArray = TestText.Split(new []{":", "*", ";"}, StringSplitOptions.RemoveEmptyEntries);
label3.Text = nameArray[0];//1
posY.Text = nameArray[1];  //895
posX.Text = nameArray[2];  //123 
```

如果你收到`:1*895*123; :1*987*145;`

```
var chunks = s.Split(new [] { ":", ";", " "}, StringSplitOptions.RemoveEmptyEntries);
foreach (var chunk in chunks)
{
   string[] data = chunk.Split(new [] { "*" }, StringSplitOptions.RemoveEmptyEntries);
   label3.Text = data[0];
   posY.Text = data[1];  
   posX.Text = data[2];  
} 
```

但是在标签中，您只会看到最新的块数据，因此您需要存储数据列表。例如，您可以创建类：

```
class chunkData
{
    public string dot;
    public string posX;
    public string posY;
} 
```

并像这样使用它：

```
private List<chunkData> dataList = new List<chunkData>();
private void serialPort1_DataReceived(object sender, SerialDataReceivedEventArgs e)
{
   TestText = serialPort1.ReadExisting();
   var chunks = TestText.Split(new [] { ":", ";", " "}, StringSplitOptions.RemoveEmptyEntries);
   foreach (var chunk in chunks)
   {
      string[] data = chunk.Split(new [] { "*" }, StringSplitOptions.RemoveEmptyEntries);
      dataList.Add(new chunkData(){dot=data[0], posX=data[1], posY=data[2]})
   }
   //display dataList to DataGridView or other control
} 
```

**编辑**：如果您逐个符号地接收数据，您可以执行以下操作：

```
private void serialPort1_DataReceived(object sender, SerialDataReceivedEventArgs e)
{
   string temp = serialPort1.ReadExisting();
   if(temp == ";") //OK we have end of data lets process it
      splitAndDisplay();
   else
      TestText += temp; 
}

private void splitAndDisplay()
{
   string[] nameArray = TestText.Split(new []{":", "*"}, StringSplitOptions.RemoveEmptyEntries);
   this.Invoke(new Action(() =>
     {
       label3.Text = nameArray[0];
       posY.Text = nameArray[1];  
       posX.Text = nameArray[2];
      }));
   TestText = "";
} 
```

# c# - 我们可以使用 Response.Flush () 代替 Response.End()

> ID：10829168
> 
> 赞同：5
> 
> 时间：2012-05-31T07:28:15.370
> 
> 标签：c#, asp.net, response, httpcontext, response.redirect

`Response.End()`生成`ThreadAbortException`.

代替`HttpContext.Current.ApplicationInstance.CompleteRequest`它并不能解决问题。

那么，我们可以使用`Response.Flush()`而不是`Response.End()`

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-31T07:41:51.093

将`Response.Flush()`缓冲区中的内容发送给浏览器，但不会停止页面的处理，因此它将继续执行后续步骤。

要做的`Response.End()`是**停止 asp.net Page Life Cycle 中下一个函数调用的执行步骤**。 [http://msdn.microsoft.com/en-us/library/ms178472.aspx](http://msdn.microsoft.com/en-us/library/ms178472.aspx)

这就是为什么它需要抛出一个异常，抛出一系列调用的循环。

一种替代方法是，`Response.Close()`但这也不会停止执行步骤，如果您在与浏览器的连接关闭后尝试发送某些内容，则可能会出现其他错误。如果您这样做，`Response.Close()`您还需要`Flush()`在调用它之前也这样做，否则浏览器会获得不可预测的数据。

您还可以阅读：[Redirect to a page with endResponse to true VS CompleteRequest and security thread](https://stackoverflow.com/questions/14641143/redirect-to-a-page-with-endresponse-to-true-vs-completerequest-and-security-thre)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-11T07:12:01.003

使用下载文件前的条件`Response.IsClientConnected`-

```
if (Response.IsClientConnected)
 {
    Response.Clear();
    Response.ClearContent();
    Response.ClearHeaders();
    Response.ContentType = "Application/pdf";
    Response.AppendHeader("Content-Disposition", "attachment; filename=" + fileName);
    Response.TransmitFile(Server.MapPath(@"yourpath" + fileName));
    Response.Flush();
    Response.Close();
  } 
```

经过大量的努力，它对我很有效。我希望它也适合你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-13T12:21:07.430

不！你不能！你可以

```
Response.SuppressContent = true; 
```

# c# - 为什么 AjaxForm 不适合我？

> ID：10829169
> 
> 赞同：1
> 
> 时间：2012-05-31T07:28:21.120
> 
> 标签：c#, ajax, asp.net-mvc-3

我有以下表格，我想做的是，当人们点击搜索按钮时，一个请求将提交给服务器，服务器将返回一组新的结果，我将重新渲染 div 以呈现新的结果

```
@using (Ajax.BeginForm("Search", new AjaxOptions { HttpMethod = "Post", UpdateTargetId = "DivToUpdate" }))
        {
            <div style="margin: 10px 50px 5px 50px;">
                @Html.TextBox("instrument", (string)ViewBag.DefaultInstrumentStr)
                &nbsp;&nbsp;&nbsp;
                <input type="submit" value="Search" />
            </div>
        }
        <div id="DivToUpdate" style="width: 100%; display: none;">
            @if (Model != null)
            {
                @Html.Partial("_InstrumentList", @Model);
            }
            else
            {
                <span>Loading ....</span>
            }
        </div> 
```

这是我的控制器实现：

```
public ActionResult Search(string instrument)
        {
            // ... base on the input perform certain action to generate a list of result

            return PartialView("_InstrumentList", instruments);
        } 
```

当我运行它时，点击搜索后，我只会在浏览器中看到部分视图，数据不会更新 div。

有人知道我做错了什么吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T07:55:37.133

您必须引用一些脚本：

在 MVC3 中（设置 UnobtrusiveJavaScriptEnabled 为真）：

```
jquery.unobtrusive-ajax.js 
```

在 MVC2 和 MVC3 中（设置 UnobtrusiveJavaScriptEnabled false）：

```
MicrosoftMvcAjax.js 
```

对于不同之处，您可以查看：[Unobtrusive Client Validation in ASP.NET MVC 3](http://bradwilson.typepad.com/blog/2010/10/mvc3-unobtrusive-validation.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T07:32:00.050

> 有人知道我做错了什么吗？

您忘记将`jquery.unobtrusive-ajax.js`脚本引用到您的页面：

```
<script src="@Url.Content("~/Scripts/jquery.unobtrusive-ajax.js")" type="text/javascript"></script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T07:32:14.950

您尝试更新的`div`必须在`Ajax.BeginForm`括号内。

# python - 代理后面的 SOAP Web 服务，使用 python-suds 访问

> ID：10829170
> 
> 赞同：0
> 
> 时间：2012-05-31T07:28:21.537
> 
> 标签：python, soap, https, reverse-proxy, suds

我有这个奇怪的python suds 案例场景。

我有一个在本地 IP 上运行的肥皂服务（java），比如说`http://10.0.0.1:8080/services/`

我在本地网络中使用 suds http base auth，它工作正常。

```
from suds.client import Client
c = Client(url, username="user", password="pass") 
```

但我想让它从外部访问，所以我问系统管理员：“你能为这个肥皂服务设置一个外部 IP 使用反向代理吗”

“是的，但是公司防火墙不允许使用 8080 端口，所以你的规则是：

`http://10.0.0.1:8080/services/*`<->`https://example.com/services/*`

然后设置了规则，但我无法让客户端工作。我尝试了各种交通工具：

```
from suds.transport.https import WindowsHttpAuthenticated
from suds.transport.http import HttpAuthenticated
#from suds.transport.https import HttpAuthenticated
from suds.client import Client

http = HttpAuthenticated(username="jlee", password="jlee")
#https = HttpAuthenticated(username="jlee", password="jlee")
ntlm = WindowsHttpAuthenticated(username="jlee", password="jlee")
url = "https://example.com/services/SiteManager?wsdl"
c = Client(url, transport = http) 
```

它总是返回：

```
suds.transport.TransportError: HTTP Error 403: Forbidden ( The server denied the specified Uniform Resource Locator (URL). Contact the server administrator.  ) 
```

我试图`https://example.com/services/SiteManager?wsdl`从 chrome 访问 URL，它也返回 403！

但是，如果我首先使用其他路由登录（我的服务器在 tomcat 上运行其他 http 页面），然后再次访问该 URL，则会显示 wsdl desc 页面！

谁能告诉我这有什么问题？是否与反向代理服务器或 suds 传输的配置有关？

非常感谢！杰基

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T09:41:28.237

通过与系统管理员（负责设置反向代理）交谈找到了解决方案，他说 MS DMZ（反向代理服务器）中有一个复选框选项，用于允许 http 基本身份验证。

# javascript - 使用 Raphael 绘制不随滚动条移动的东西

> ID：10829174
> 
> 赞同：0
> 
> 时间：2012-05-31T07:28:38.017
> 
> 标签：javascript, scroll, raphael

我正在使用拉斐尔画一个人物。图很大，所以浏览器窗口显示一个滚动条。现在，即使用户移动滚动条，我也希望图形的一部分保持静止。怎么可能做到这一点？另外，我想根据滚动条的位置来改变图形（例如，显示滚动条的x坐标）。这可能吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T00:05:12.710

这是我的问题的解决方案。为了使图形的一部分保持静止而不管滚动，请创建两个画布，一个用于应滚动移动的部分，一个用于静止部分。然后将第二个画布放入`<div style="position:fixed">`。这是代码：

```
<div id="part1">
    <script type="text/javascript">
        var paper1 = Raphael("part1", 1000, 200);
        // draw the figure
    </script>
</div>
<div id="part2" style="position: fixed">
    <script type="text/javascript">
        var paper2 = Raphael("part2", 1000, 200);
        // draw the figure
    </script>
</div> 
```

请注意，此代码仅在图形的两个部分分开时才有效。如果它们重叠，我不知道它们是否仍然可以在两个画布中绘制。

要根据滚动条的位置更改图形，请使用以下代码。getScrollX() 函数改编自[http://www.howtocreate.co.uk/tutorials/javascript/browserwindow](http://www.howtocreate.co.uk/tutorials/javascript/browserwindow)上的代码。

```
<script type="text/javascript">
    function getScrollX() {
        var scrOfX = 0;
        if (typeof (window.pageYOffset) == 'number') {
            //Netscape compliant
            scrOfX = window.pageXOffset;
        } else if (document.body
                && (document.body.scrollLeft || document.body.scrollTop)) {
            //DOM compliant
            scrOfX = document.body.scrollLeft;
        } else if (document.documentElement
                && (document.documentElement.scrollLeft || document.documentElement.scrollTop)) {
            //IE6 standards compliant mode
            scrOfX = document.documentElement.scrollLeft;
        }
        return scrOfX;
    }

    window.onscroll = function() {
        var x = getScrollX();
        // change the figure
    }
</script> 
```

# tridion - 如何使用核心服务在 SDL Tridion 2011 中创建结构组？

> ID：10829178
> 
> 赞同：-1
> 
> 时间：2012-05-31T07:28:53.003
> 
> 标签：tridion

我想使用核心服务在 Tridion 2011 中创建一个结构组有什么想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-31T07:38:06.497

这是代码：

```
var structureGroup = ClientAdmin.GetDefaultData(ItemType.StructureGroup, "tcm:0-2-1");
structureGroup.Title = "SG";
structureGroup.Directiry = structureGroup.Title.Replace(" ", ""),
structureGroup = (StructureGroupData) ClientAdmin.Create(structureGroup, new ReadOptions()); 
```

如果您想了解更多信息，我认为这里不需要任何解释 - 检查`StructureGroupData`CoreService API 文档中的类

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T22:29:39.913

上面的代码似乎不是标准的核心服务 API。检查这个。

```
CoreServiceClient channel = new CoreServiceClient("basicHttp_2011");
string organizationalItemId = "tcm:6-3-4";
StructureGroupData sg = new StructureGroupData();
sg.Id = "tcm:0-0-0";
sg.Title = "NewSG";
sg.LocationInfo = new LocationInfo() { OrganizationalItem = new LinkToOrganizationalItemData() { IdRef = organizationalItemId } };
sg.Directory = "NewSG";
sg = (StructureGroupData)channel.Save(sg, new ReadOptions()); 
```

您可能会注意到 Directory 属性不能包含空格。那是因为它是通过正则表达式验证的。您可以在位于 [TRIDION_HOME]\bin 的文件 cm_xml_usr.xsd 中更改它。

# wordpress - 键入本地 Wordpress URL 有效，但单击同一链接无效

> ID：10829179
> 
> 赞同：0
> 
> 时间：2012-05-31T07:28:54.833
> 
> 标签：wordpress, apache, url, hyperlink, wamp

Wordpress 本地安装在 WAMP（win 7 x64）上，当我输入[http://lc.loc](http://lc.loc)时，我的网站首页加载正常。但是，当我在加载的页面上单击此 URL 的链接时，我会进入从我的 DNS 主机下载的 DNS 失败页面。页面上所有以[http://lc.loc/](http://lc.loc/)开头的链接都是这样断的；如果我将它们输入到它们工作的地址栏中，如果我单击页面上的相同链接，我会收到 DNS 'page not found' 错误。

我已经尝试过 firefox、chrome 和 IE，但它们都发生了同样的事情。

mod_rewrite 已启用，并且 http.conf 中的 LoadModule rewrite_module modules/mod_rewrite.so 行取消注释，Include conf/extra/httpd-vhosts.conf 也是如此

wordpress 没有创建 .htaccess 文件，这可能是问题所在，但我相信我已经启用了执行此操作所需的所有设置。我设置了 www 文件夹中所有文件的权限，以便“每个人”都具有完全访问权限。我还从我在共享主机帐户上进行的全新 wordpress 安装中手动添加了一个 .htaccess 文件，但这并没有帮助。

httpd-vhosts.conf 中的虚拟主机配置：

```
NameVirtualHost *:80
<VirtualHost *:80>
ServerName lc.loc
ServerAlias lc.loc
DocumentRoot "e:/wamp/www/lc" 
```

我尝试将永久链接结构更改为帖子类型，虽然这确实成功地更改了链接的 url，但单击这些链接仍然以所描述的方式失败。

主机文件配置：

```
127.0.0.1    lc.loc 
```

我真的很感谢在解决这个问题方面的帮助，因为我不知道它是否是 apache、wordpress 或其他地方的设置。

谢谢，卡尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T16:11:48.667

在您的 wordpress 配置中检查您的 WordPress 地址 URL 和站点地址 URL。如果它仍然设置为 localhost 可能会导致问题。

*编辑澄清：*这些值可以从 WAMP 包含的 phpmyadmin 系统中编辑。在 wordpress 数据库中，`wp_options`您要更正的值将列在 下`siteurl`。

# facebook - 使用 signed_request 的 Facebook 身份验证

> ID：10829182
> 
> 赞同：1
> 
> 时间：2012-05-31T07:29:03.980
> 
> 标签：facebook, oauth, facebook-javascript-sdk

我正在尝试构建一个 facebook 身份验证的 Web 应用程序，这样就不必构建我自己的。因此，在 facebook 对他们进行身份验证并向我提供他们的 user_id 之后，我可以简单地将其存储在他们的数据库中。

显然，我想保护我的用户不被纯粹使用他们的 user_id 欺骗。这是我想出的：

1.  我不会在浏览器和我的服务器之间来回传递 user_id，而是传递signed_request，因为在不知道我的 app_secret 的情况下不能欺骗它
2.  为了防止被嗅探和重用，我将把我的请求封装在 SSL (HTTPS) 中
3.  为了防止使用过时的signed_requests，我将确保issued_at 是相对较新的。

这部分是signed_request 的用途，还是有更正确的方式来使用facebook 身份验证？

我的方法有什么明显的问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T08:23:35.680

这是对用户进行身份验证的明智方式。我认为您已经涵盖了绕过身份验证系统的所有可能方法，因此您应该没有问题。

如果您尝试进行 API 调用，您还应该使用该`FB.getLoginStatus()`功能为已经登录到您的应用程序的用户提供个性化体验。

# z3 - 基于模型的量词实例化和多排序逻辑的 St1 片段

> ID：10829186
> 
> 赞同：1
> 
> 时间：2012-05-31T07:29:17.487
> 
> 标签：z3

[这是我之前](https://stackoverflow.com/q/10799108/1211793)关于 Z3 的基于模型的量词实例化 (MBQI) 和分层排序片段的问题的后续内容（再次感谢 Leonardo de Moura 的快速回答）。

在他们关于多排序逻辑的可判定片段的论文 [Abadi 等人，多排序逻辑的可判定片段，LPAR 2007] 中，作者描述了多排序逻辑的片段 St1，该片段可通过有限模型属性判定。

此片段需要对排序进行分层，并且公式 F 必须是（skolemized）prenex 范式，如 Z3 文档中所述，但允许使用额外的原子公式

> y in Im[f]

出现在 F 中，这是一个“简写”

> 存在 x1 : A1, ..., xn : An 。y = f(x1,...,xn)

其中 f 是具有签名 f 的函数：A1 x ... x An -> B，并且 f 必须是范围为 B 的唯一函数。因此，St1 片段允许（以非常有限的方式）违反分层，例如，为了断言 f 是满射的。

我不确定这是否是一个开放的研究问题：有人知道 Z3 的 MBQI 决策程序对于 St1 片段是否完整？Z3 会在有限时间后（理论上）为 F 产生 SAT 或 UNSAT 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T18:36:34.933

首先，澄清一点，原则上，MBQI可以决定分层的多排序片段。理由在[http://research.microsoft.com/en-us/um/people/leonardo/ci.pdf](http://research.microsoft.com/en-us/um/people/leonardo/ci.pdf) (*) 的第 4.1 节中给出。但是，Z3 4.0 不支持实施第 4.1 节中建议的附加规则。因此，Z3 4.0 可能会`unknown`在此片段中的公式上失败（返回）。我只是想明确区分算法和使用当前 Z3 的实际实现。

关于您的问题，是的 MBQI 框架可以决定包含扩展谓词的分层公式`y in Im[f]`。我假设这个谓词只是积极地出现。也就是说，我们没有`not y in Im[f]`which 等价于

`forall x1:A1, ...,xn:An. y != f(x1, ... xn)`

如果`y in Im[f]`仅积极地出现，那么它可以被扩展，并且在 skolemization 之后，我们有一个形式为 的基础公式`y = f(k1, ..., kn)`。MBQI 仍然是一个决策过程，因为`F*`(*) 中定义的集合仍然是有限的。`F*`只有当分层在一个通用公式中被打破时，它才会变得无限。

# c# - TransactionScope 和 DependantTransaction

> ID：10829195
> 
> 赞同：1
> 
> 时间：2012-05-31T07:29:55.353
> 
> 标签：c#, multithreading, transactions, transactionscope

我可以获得与 DB 或 File-IO 无关的示例用法吗？

我已经阅读了有关 IEnlistmentNotification 和 Transactions 的内容，并且想知道是否可以为仅在内存中的自定义类（例如我自己的资源管理器）使用事务行为？

我想知道的场景 - 假设我在内存中有一些数据结构，它有一些 5 个属性（线程安全）。我启动 5 个线程来更新每个属性（可以说它的计算密集型）。现在 4 可能会成功，而 5th 可能会失败，在这种情况下，我想将我的数据结构回滚到其原始状态。我可以为这种情况实施 DependantTransaction 吗？

PS：我知道我可以手动保存克隆副本，将其还原回 catch 块等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T07:34:51.330

对于内存中的对象，已经有一些事务范围提供程序的第 3 方实现；但是，一般来说，它们有点脆弱，并不值得痛苦——*尤其是*因为您使用的是线程。坦率地说，我强烈建议您更多地查看常规的备忘录模式，或者*不需要回滚*的不可变数据结构（即您只需丢弃单独的变异副本）。

是的，它可能可以完成，但*除非*编写事务范围提供程序是您项目的**目的**，否则我建议您首先专注于交付应用程序逻辑。只是在说'

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T09:10:21.233

如果其他人有兴趣，找到这些 -

[另一个问题](https://stackoverflow.com/questions/2517917/how-to-implement-a-memory-transaction-scope-in-c)

[C#中的STM](http://en.wikipedia.org/wiki/Software_transactional_memory#C.23)

[STM.NET 库](http://blogs.msdn.com/b/stmteam/)

# java - 如何返回特定类型的列表而不是 List在休眠？

> ID：10829197
> 
> 赞同：14
> 
> 时间：2012-05-31T07:30:10.260
> 
> 标签：java, hibernate, casting, hql

我有类树：

```
classA {  
      classB b;  
      classC c;
      .....
} 
```

我有这样的 HQL 查询：

```
SELECT a.field1, b.field2, c.field3, c.field4
FROM a LEFT OUTER JOIN b ON a.id = b.fk
       LEFT OUTER JOIN c ON b.id = c.fk 
```

此查询返回`List<Object[]>`.

是否可以将返回的数据转换为以下类：

```
classD {
    Type1 fiedl1;
    Type2 field2;
    Type3 field3;
} 
```

那么可以通过 Hibernate 进行投射还是我需要手动进行所有投射？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-05-31T07:44:07.513

JPA 查询中有不同类型的选择。**您当前使用 Array 作为返回类型，您需要的是 Construct 返回类型。**以下是如何实现这一点：

```
String queryStr =
    "select NEW package.YourDefinedCustomClass(
     a.field1, b.field2, c.field3, c.field4) from a left outer join b 
     on a.id=b.fk left outer join c on b.id=c.fk";

TypedQuery<YourDefinedCustomClass> query =
    em.createQuery(queryStr, YourDefinedCustomClass.class);

List<YourDefinedCustomClass> results = query.getResultList(); 
```

**基本上有两点：**

1.  自定义类必须是您的结果返回类型
2.  自定义类必须有一个构造函数，它接受您在查询字符串中定义的结果值。

[阅读有关 JPA2 查询中的选择的更多信息。](http://www.objectdb.com/java/jpa/query/jpql/select#SELECT_in_Criteria_Queries_)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T07:35:26.230

如果你真的确定你可以做类型转换。

```
 List<classD> newlist = ...;
 for(Object o : list){
      newlist.add((classD) o);
 } 
```

不过要小心这个

所以是的。手动铸造。（注：带数组（可以直接投）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-31T07:39:53.453

您可以使用 TypedQuery

```
TypedQuery<ClassA> q = em.createQuery("select a from a left outer join b on a.id=b.fk left outer join c on b.id=c.fk", ClassA.class); 
List<ClassA> res = q.getResultList(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-10-04T13:10:23.883

如果您使用 Hibernate 5.x，您可以使用`ResultTransformer`，例如，如[本博文](https://vladmihalcea.com/why-you-should-use-the-hibernate-resulttransformer-to-customize-result-set-mappings/)中所述。请注意，这`ResultTransformer`将在 Hibernate 6 中被@Deprecated。

应用于您的场景：

```
List<classD> classDDTOs = entityManager
.createQuery(
    "SELECT a.field1, b.field2, c.field3, c.field4 " +
    "FROM a LEFT OUTER JOIN b ON a.id = b.fk " +
    "LEFT OUTER JOIN c ON b.id = c.fk")
.unwrap( org.hibernate.query.Query.class )
.setResultTransformer( 
    new ResultTransformer() {
        @Override
        public Object transformTuple(
            Object[] tuple, 
            String[] aliases) {
            return new classD(
                (Type1) tuple[0],
                (Type2) tuple[1],
                (Type3) tuple[1],
            );
        }

        @Override
        public List transformList(List collection) {
            return collection;
        }
    } 
)
.getResultList(); 
```

上面的代码假设`classD`有一个构造函数`classD(Type1, Type2, Type3)`。

这种方法的一个优点是它允许您定义`ResultTransformer`一次，并允许您在具有相同结果类型的所有查询中重用它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-27T10:58:56.073

我有同样的问题..我写了这个查询

```
Query sqlquery = session.createQuery("select c.courseName,f.facultyID,f.facultyName,f.facultyEmailID,f.facultyContactNo,s.subjectName from com.bean.CourseBean as c,com.bean.FacultyBean as f,com.bean.Faculty_SubjectBean as fs,com.bean.SubjectBean as s where f.facultyID=fs.facultyBean.facultyID AND s.subjectID=fs.subjectBean.subjectID AND c.courseID=f.courseBean.courseID AND collegeid=1"); 
```

我返回了对象列表，并在我写的 servlet 中，

java.util.List objList=objFacultyService.listFaculty_sql(1);

```
java.util.List<Temp> objtemp = new ArrayList<Temp>() ;
for (Object[] objects : objList)
{

        Temp temp = new Temp();
        temp.setFacultyEmailID(objects[3].toString());
        temp.setCourseName(objects[0].toString());
        if(objects[4]==null)
        {
            temp.setFacultyContactNo(1);
        }
        else
        {
                  temp.setFacultyContactNo(Long.parseLong(objects[4].toString()));
        }
        temp.setFacultyID(Long.parseLong(objects[1].toString()));
        temp.setFacultyName(objects[2].toString());
        temp.setSubjectName(objects[5].toString());
        objtemp.add(temp);

} 
```

# android - 尝试重新加载活动本身时出错

> ID：10829198
> 
> 赞同：0
> 
> 时间：2012-05-31T07:30:10.267
> 
> 标签：android, android-intent

我正在尝试重新加载活动。这是代码：

```
public class CobaGesture extends Activity {
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    ImageButton resetBut = (ImageButton) findViewById(R.id.reset);
    resetBut.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            startActivity(getIntent().setFlags(Intent.FLAG_ACTIVITY_BROUGHT_TO_FRONT)); finish();
        }
    }); 
```

当我按下重置但是，一切都还好，但我的应用程序有点卡住，当我反复触摸屏幕时，强制关闭我来了。这是日志猫：

```
05-31 14:20:45.370: ERROR/ActivityManager(103): ANR in coba.gesture (coba.gesture/.CobaGesture)
05-31 14:20:45.370: ERROR/ActivityManager(103): Reason: keyDispatchingTimedOut
05-31 14:20:45.370: ERROR/ActivityManager(103): Load: 3.91 / 2.13 / 1.86
05-31 14:20:45.370: ERROR/ActivityManager(103): CPU usage from 15350ms to 0ms ago with 99% awake:
05-31 14:20:45.370: ERROR/ActivityManager(103):   65% 6436/coba.gesture: 63% user + 1.9% kernel / faults: 40 minor
05-31 14:20:45.370: ERROR/ActivityManager(103):   29% 103/system_server: 21% user + 7.8% kernel / faults: 5 minor
05-31 14:20:45.370: ERROR/ActivityManager(103):   0.9% 41/adbd: 0% user + 0.8% kernel / faults: 41 minor
05-31 14:20:45.370: ERROR/ActivityManager(103):   0.2% 6227/com.svox.pico: 0.1% user + 0% kernel / faults: 79 minor
05-31 14:20:45.370: ERROR/ActivityManager(103):   0.1% 476/zygote: 0.1% user + 0% kernel / faults: 84 minor
05-31 14:20:45.370: ERROR/ActivityManager(103):   0.4% 647/com.android.settings: 0% user + 0.4% kernel
05-31 14:20:45.370: ERROR/ActivityManager(103):   0.1% 225/com.android.systemui: 0% user + 0% kernel
05-31 14:20:45.370: ERROR/ActivityManager(103):   0% 220/com.android.phone: 0% user + 0% kernel / faults: 14 minor
05-31 14:20:45.370: ERROR/ActivityManager(103): 100% TOTAL: 86% user + 13% kernel + 0.1% softirq
05-31 14:20:45.370: ERROR/ActivityManager(103): CPU usage from 3589ms to 4323ms later:
05-31 14:20:45.370: ERROR/ActivityManager(103):   56% 6436/coba.gesture: 55% user + 1.3% kernel / faults: 12 minor
05-31 14:20:45.370: ERROR/ActivityManager(103):     27% 6446/Thread-10: 27% user + 0% kernel
05-31 14:20:45.370: ERROR/ActivityManager(103):     26% 6453/Thread-11: 26% user + 0% kernel
05-31 14:20:45.370: ERROR/ActivityManager(103):     1.3% 6441/Compiler: 1.3% user + 0% kernel
05-31 14:20:45.370: ERROR/ActivityManager(103):   38% 103/system_server: 23% user + 14% kernel
05-31 14:20:45.370: ERROR/ActivityManager(103):     19% 111/SurfaceFlinger: 11% user + 7.4% kernel
05-31 14:20:45.370: ERROR/ActivityManager(103):     17% 172/InputDispatcher: 8.9% user + 8.9% kernel
05-31 14:20:45.370: ERROR/ActivityManager(103):     1.4% 265/Binder Thread #: 1.4% user + 0% kernel
05-31 14:20:45.370: ERROR/ActivityManager(103):     1.4% 268/Binder Thread #: 1.4% user + 0% kernel
05-31 14:20:45.370: ERROR/ActivityManager(103):     1.4% 304/Binder Thread #: 1.4% user + 0% kernel
05-31 14:20:45.370: ERROR/ActivityManager(103):     1.4% 394/Binder Thread #: 1.4% user + 0% kernel
05-31 14:20:45.370: ERROR/ActivityManager(103):   0.7% 647/com.android.settings: 0% user + 0.7% kernel / faults: 1 minor
05-31 14:20:45.370: ERROR/ActivityManager(103):     1.4% 648/HeapWorker: 0% user + 1.4% kernel
05-31 14:20:45.370: ERROR/ActivityManager(103): 100% TOTAL: 80% user + 19% kernel 
```

这是什么意思？如何解决？如果您有其他方式来重新加载活动，请告诉我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T07:33:35.767

尝试这样的事情

```
Intent intent = getIntent();
overridePendingTransition(0, 0);
intent.addFlags(Intent.FLAG_ACTIVITY_NO_ANIMATION);
finish();

overridePendingTransition(0, 0);
startActivity(intent); 
```

我使用它，它工作正常。

# python - 覆盖使用 from...import 的模块方法

> ID：10829200
> 
> 赞同：35
> 
> 时间：2012-05-31T07:30:14.113
> 
> 标签：python

我在覆盖`from...import`使用语句的方法时遇到问题。一些例子来说明问题：

```
# a.py module
def print_message(msg):
    print(msg)

# b.py module
from a import print_message
def execute():
    print_message("Hello")

# c.py module which will be executed
import b
b.execute() 
```

我想覆盖`print_message(msg)`方法而不更改 a 或 b 模块中的代码。我尝试了很多方法，但`from...import`导入了原始方法。当我将代码更改为

```
import a
a.print_message 
```

然后我看到了我的变化。

你能建议如何解决这个问题吗？

- - - - - - - - - 更新 - - - - - - - - -

我试着像下面那样做，例如：

```
# c.py module
import b
import a
import sys
def new_print_message(msg):
    print("New content")
module = sys.modules["a"]
module.print_message = new_print_message
sys.module["a"] = module 
```

但这在我使用`for...import`语句的地方不起作用。仅适用于 import a 但正如我所写，我不想更改 b.py 和 a.py 模块中的代码。

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-05-31T07:44:47.773

在您的`a`和`b`模块不变的情况下，您可以尝试`c`如下实现：

```
import a

def _new_print_message(message):
    print "NEW:", message

a.print_message = _new_print_message

import b
b.execute() 
```

您必须首先 import `a`，然后覆盖该函数，然后 import`b`以便它使用`a`已导入（并更改）的模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-08T06:45:12.807

# 模块1.py

```
def function1():
    print("module1 function1")
    function2()

def function2():
    print("module1 function2") 
```

# 模块2.py

```
import module1

test = module1.function1()
print(test) 

""" output
module1 function1
module1 function2
"""
def myfunction():
    print("module2 myfunction")

module1.function2 = lambda: myfunction()

test = module1.function1()
print(test)

"""output
module1 function1
module2 myfunction
""" 
```

# c# - asp.net listBox 文本/值

> ID：10829204
> 
> 赞同：2
> 
> 时间：2012-05-31T07:30:27.870
> 
> 标签：c#, asp.net, data-binding, listbox

基本上我需要用字符串填充listBox 的.Text 值，用int 填充它的.Value 值。通过做这个：

```
lbUsers.DataSource = new UserManagerBO().GetGlobalUserList();
lbUsers.DataBind(); 
```

这会为 .Value 和 .Text 分配一个字符串。

现在我知道 GetGlobalUserList() 返回一个 string[] 这就是我得到上述行为的原因，那么如何返回 int 值和字符串值呢？也许去二维数组？然后如何将这些结果绑定到列表框？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T07:39:25.183

**选项 1** 让该方法返回`string[]`并为值选择`SelectedIndex`。

**选项 2** 创建一个自定义类作为 Damith 的答案。

**选项 3** A`Dictionary<int, string>`就足够了。

`Dictionary Keys`为`ListBox Value`和`Dictionary Values`为`ListBox Text`。

假设这是您的方法返回的字典

```
//Adding key value pair to the dictionary
Dictionary<int, string> dStudent = new Dictionary<int, string>();
dStudent.Add(0, "Eena");
dStudent.Add(1, "Meena");
dStudent.Add(2, "Deeka");
dStudent.Add(3, "Tom");
dStudent.Add(4, "Dick");
dStudent.Add(5, "Harry");
dStudent.Add(6, "Yamla");
dStudent.Add(7, "Pagla");
dStudent.Add(8, "Dewana");
dStudent.Add(9, "Guru");
dStudent.Add(10, "Sholay"); 
```

第2步：

现在是时候将字典对与您的列表框绑定了。以下代码绑定到列表框。

```
//binding to the list
lst.DataTextField = "Value";
lst.DataValueField = "Key";
lst.DataSource = dStudent;
lst.DataBind(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T07:45:12.943

使用用户属性创建自定义类。这可以在您与全球用户打交道时重新使用

```
public class CustomClass()
{
    public int ID { get; set; }
    public int Name  { get; set; }
} 
```

从 中返回`CustomClass`对象集合`GetGlobalUserList()`，您需要更改`GetGlobalUserList`方法的签名和逻辑。你这样做的人，

```
lbUsers.DataSource = new UserManagerBO().GetGlobalUserList(); 
```

设置`DataTextField` 和`DataValueField`你的列表框

```
lbUsers.DataTextField  = "Name";
lbUsers.DataValueField = "ID";
lbUsers.DataBind(); 
```

# orm - 在 JPA 2 中选择集合不会导致异常

> ID：10829206
> 
> 赞同：0
> 
> 时间：2012-05-31T07:30:28.580
> 
> 标签：orm, jpa-2.0, eclipselink

根据第 181 页的书，我在理解 Pro JPA 2 书中的这行代码时遇到了一些麻烦。

> 选择查询的结果类型不能是集合；它必须是单值对象，例如实体实例或持久字段类型。诸如 e.phones 之类的表达式在 SELECT 子句中是非法的，因为它们会导致 Collection 实例（每次出现的 e.phones 都是一个集合，而不是一个实例）。因此，就像 SQL 和表一样，如果我们想沿着集合关联导航并返回该集合的元素，我们必须将两个实体连接在一起。

请考虑以下实体与关系映射

```
@Entity
public class Employee {
    ..
    @OneToMany(mappedBy="employee", cascade=CascadeType.ALL, targetEntity=Phone.class)
    private Collection<Phone> phones = new ArrayList<Phone>();
    ..
}
@Entity
public class Phone {
    ..
    @OneToOne 
    private Employee employee;
    ..
} 
```

现在在一个测试类中，我用这个测试用例进行了尝试

```
@Test
public void selectCollectionTest(){
    TypedQuery<Object> query = em.createQuery("select e.phones from Employee e where e.id = 1", Object.class);  
    List<Object> empList = query.getResultList();
    for(Object temp: empList){
        System.out.println(temp);
    }
} 
```

我期待会引发异常，但什么都没有发生，我能够选择集合？

它是否正确？有人可以解释或清除我的理解吗？

Eclipselink

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T13:38:22.237

EclipseLink 允许这样做，它是一个扩展，JPA 规范不支持它。

和查询一样，

```
select p from Employee e join e.phones p where e.id = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T12:35:53.523

尝试通过删除 where 子句使用以下代码运行您的查询：

```
select e.phones from Employee e, Object.class 
```

我要说明的一点可能是您对emp id 1 的结果仅包含单个电话对象。

# ruby-on-rails - 使用 wkhtmltopdf 通过 pdfkit 将 html 转换为 pdf 时的字母间距问题

> ID：10829209
> 
> 赞同：3
> 
> 时间：2012-05-31T07:30:33.433
> 
> 标签：ruby-on-rails, wkhtmltopdf, pdfkit

我的 HTML 文件有一些段落我使用 8pt 字体大小。将 HTML 转换为 PDF 后，段落会获得额外的字母间距，并且一些字母会重叠。

我尝试了以下所有建议（例如使用 dpi 和 xserver），但没有一个有效。

[http://code.google.com/p/wkhtmltopdf/issues/detail?id=72&q=letter](http://code.google.com/p/wkhtmltopdf/issues/detail?id=72&q=letter)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-02-20T16:37:40.427

我意识到这个问题有点老了。但是从这个 wkhtmltopdf 字母间距问题中得到了相当多的挫败感，我想放弃一个潜在的解决方法：

```
'--dpi 96' 
```

将此选项添加到二进制参数中，您可能会像我最终一样微笑！即：

```
wkhtmltopdf --option1 --option2 --dpi 96 "www.host.com/page.html" file.pdf 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T19:27:02.320

伙计们，如果您想获得您的 PDF 视图，就像它在您的网页中一样，请在您的 config/initializer/pdfkit.rb 中复制以下代码（在初始化程序文件夹中创建此文件）

```
PDFKit.configure do |config| 
config.wkhtmltopdf ='/usr/local/bin/wkhtmltopdf'
config.default_options = {
   :encoding=>"UTF-8",
   :page_size=>"Ledger",
   :zoom => '1.3',
   :disable_smart_shrinking=>false
}
end 
```

请检查此链接以获取更多“：page_size”属性

[wkhtmltopdf：什么纸张尺寸是有效的？](https://stackoverflow.com/questions/6394905/wkhtmltopdf-what-paper-sizes-are-valid)

并通过访问此链接发现新选项

[http://madalgo.au.dk/~jakobt/wkhtmltoxdoc/wkhtmltopdf-0.9.9-doc.html](http://madalgo.au.dk/~jakobt/wkhtmltoxdoc/wkhtmltopdf-0.9.9-doc.html)

希望这一切都会对你有所帮助。谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-14T18:18:17.707

### 更新 wkhtmltopdf。

我发现解决这些字母间距问题的最佳方法是确保您使用的是最新版本`wkhtmltopdf`（撰写本文时为 0.12.2.1）。

在 Rails 中，您可以简单地使用它的边缘二进制 gem，如下所示：

```
gem 'wkhtmltopdf-binary-edge' 
```

首先快速尝试一下，看看您的问题是否已解决。我的是。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-10T17:55:47.307

2021 年，我使用 200 dpi 解决了这个问题。

# iphone - JOIN 与子查询 - 性能 sqlite3

> ID：10829210
> 
> 赞同：2
> 
> 时间：2012-05-31T07:30:33.953
> 
> 标签：iphone, performance, sqlite

所以我有3张桌子：

`Locations (LocationID [PK])`

`Track_Locations (TrackID [FK], LocationID [FK])`

`Tracks (TrackID [PK])`

我正在为 iPhone 构建一个应用程序，有人告诉我 a`JOIN`可能会比子查询运行得更快。这是真的？我已经四处搜索，但找不到直接的答案，并且想知道在这种情况下最好使用什么。

我在这两种情况下的查询将如下所示：

子查询：

```
SELECT LocationID, TimestampGPS, Longitude, Latitude, ... 
FROM locations 
WHERE LocationID 
IN (SELECT LocationID FROM track_locations WHERE TrackID = ?) 
```

使用`JOIN`：

```
SELECT l.LocationID, l.TimestampGPS, l.Longitude, l.Latitude, ... 
FROM locations l
JOIN track_locations tl
ON (l.LocationID = tl.LocationID)
JOIN tracks t
ON (t.TrackID = tl.TrackID)
WHERE t.TrackID = ? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T07:35:44.100

A`JOIN`几乎总是比子查询快，因为它产生一个查询，而子查询是两个查询。然而，一些数据库知道如何将这些简单的子查询优化为`JOIN`s，尽管我怀疑 SQLite 不会。

也就是说，有时，考虑到数据的结构，执行子查询*会*更快。找出答案的唯一真正方法是使用可能来自野外的样本数据集合加载您的数据库，并对这两种方法进行基准测试。

然而，我怀疑这将是一次洗涤。大多数 iPhone 应用程序在数据库中没有足够的行来产生很大的不同。

# php - PHP递归调用导致内部服务器错误

> ID：10829211
> 
> 赞同：1
> 
> 时间：2012-05-31T07:30:46.933
> 
> 标签：php, recursion

我正在编写一个邮件模板系统。用户应该能够在那里使用标记，它们将被实际数据替换。问题在于，我替换标记的函数工作得很好，但我需要对该函数进行递归调用，它只会运行一次，这就是我想出的：

```
public function replace_placeholders($content, $recipient, $settings, $interface, $recommendation, $format, $recursion = false) {
    $content = $this->replace_ph('briefanrede'  , $recipient['id']          , $content);
    $content = $this->replace_ph('anrede'       , $recipient['title']       , $content);
    $content = $this->replace_ph('email'        , $recipient['email']       , $content);
    $content = $this->replace_ph('kundennummer' , $recipient['kdnumber']    , $content);
    $content = $this->replace_ph('briefanrede'  , $recipient['briefanrede'] , $content);

    if($recipient['title'] == $settings['anrede_w'] || $recipient['title'] == $settings['anrede_m']) {
        $content = $this->replace_ph('vorname'  , $recipient['forename']    , $content);
        $content = $this->replace_ph('nachname' , $recipient['surename']    , $content);
    } else {
        $content = $this->replace_ph('vorname'  , ""    , $content, true);
        $content = $this->replace_ph('nachname' , ""    , $content, true);
    }

    $content = $this->replace_salutation($recipient, $settings, $content);

    //Recommendation    
    if($this->need_replacement($content, 'weiterempfehlung') === false && $recursion === false) {
        if($recommendation['own_page'] == 1) {
            $baseurl = $recommendation['location'];
        }  else {
            $baseurl = $recommendation['link'];
        }
        $pattern = ($format == "html") ? '<a href="%s">%s</a>' : '%s';
        $url = $this->replace_placeholders($baseurl, $recipient, $settings, $interface, $recommendation, true);
        $content = $this->replace_ph('weiterempfehlung' , (($format == "html") ? sprintf($pattern, $url, $settings['text_weiterempfehlung']): sprinf($pattern, $url)), $content);

    }

    return $content;
} 
```

此行中的递归调用

```
$url = $this->replace_placeholders($baseurl, $recipient, $settings, $interface, $recommendation, true); 
```

导致 500 内部服务器错误。我不知道为什么，因为我认为我将递归限制为运行一次。你能帮我吗？

对不起，我的英语不好，我努力写出清晰的句子。

**//编辑：**

阿帕奇日志：

```
[Wed May 30 15:31:56 2012] [warn] [client xx.xxx.xx.xxx] (104)Connection reset by peer: mod_fcgid: error reading data from FastCGI server
[Wed May 30 15:31:56 2012] [warn] [client xx.xxx.xx.xxx] (104)Connection reset by peer: mod_fcgid: ap_pass_brigade failed in handle_request_ipc function
[Wed May 30 15:31:56 2012] [error] [client xx.xxx.xx.xxx] File does not exist: /var/www/web80/html/web80-newsletter/favicon.ico
[Wed May 30 15:31:58 2012] [error] mod_fcgid: process /var/www/php-fcgi/web80.php53/php-fcgi(21975) exit(communication error), get unexpected signal 11 
```

php 错误日志为空。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T07:57:14.637

似乎您在递归调用中错过了一个参数，使`$recursive = false`continue 始终为假，这反过来又使您的 if 语句

```
if($this->need_replacement($content, 'weiterempfehlung') === false && $recursion === false) 
```

总是返回真。尝试将最后一个变量添加到您的递归调用中，您应该能够正确执行您的脚本，即：

```
$url = $this->replace_placeholders($baseurl, $recipient, $settings, $interface, 
$recommendation, true, true);
                     ^ added one true 
```

我认为您要添加而不是第一个 true 的是`$format`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T07:50:41.547

信号 11 是 SIGSEGV，即进程由于错误的内存访问而崩溃（例如取消引用 NULL 指针或访问它不应该访问的内存）。

这不是 PHP 脚本应该引起的，因此您应该首先升级到最新的稳定 PHP 版本，如果仍然发生，请尽可能减少您的脚本（删除在崩溃仍然发生时可以删除的所有内容）然后报告它是一个 PHP 错误。

# php - 在 Ajax 应用程序中优化使用 mysql

> ID：10829217
> 
> 赞同：0
> 
> 时间：2012-05-31T07:31:30.250
> 
> 标签：php, mysql, ajax

我开发了一个 ajax 应用程序，其中每 5 秒调用一次服务器页面，用于从数据库中获取最新数据。

假设我**`server.php`**从我的**`client.html`**页面调用，每 5 秒获取一次响应。这是**client.html**中的示例代码：

```
$(document).ready(function() {  
refresh_msg();
});

function refresh_msg()
{
setTimeout(update_msg, 5000);
}

function update_msg()
{
var url = "server.php";
var params = "task=update&id=12";

http.open("POST", url, true);           
http.setRequestHeader("Content-type", "application/x-www-form-urlencoded");

http.onreadystatechange = function() {
    if(http.readyState == 4 && http.status == 200) {
        var resp = http.responseText;
        }
}
http.send(params);

setTimeout(update_msg, 5000);
} 
```

现在在**server.php**文件中，我包含数据库文件 (database.php) 并为客户端请求提供服务。这是示例代码：

```
<?php
include_once 'database.php';

if(isset($_POST['task']) && isset($_POST['id']))
{
$sql = "select message from user_messages where id='".$_POST['id']."'";
$res = mysql_query($sql);
// send response
}
?> 
```

最后这是我的**database.php**文件，其中包含数据库连接详细信息：

```
<?php
mysql_connect("localhost:3306","root","root");
mysql_select_db("my_database");
?> 
```

现在看到的问题是，每 5 秒创建一个新的 mysql 连接（我看到在 Mysql Administrator > Server Connections 中创建了很多连接）。

我觉得这不是查询数据库的最佳方式。相反，我可以有一个 mysql 连接并将其用于来自客户端的所有后续 ajax 请求吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T07:57:13.717

如果您的数据库服务器与 Web 服务器在同一台机器上，那么在每个请求上创建新连接的开销确实非常小。在大多数简单的用例中，为每个请求创建一个到数据库的新连接可能就可以了。**如果您的数据库服务器太忙，它可能与应用程序的设计有关，而不是因为连接被打开和关闭（请参阅下文以获得更好的解决方案）。**

如果这个答案根本不可接受，您可以探索使用[持久数据库连接](http://us3.php.net/manual/en/features.persistent-connections.php)。在一个通用的例子中，Apache 是最流行的 Web 服务器之一，有两种情况：

1.  标准连接。Apache 的父进程将创建一些用于处理请求的工作进程（在 Apache 的配置中定义）。如果请求一个 PHP 文件，将在该工作进程中创建一个 PHP 解释器的实例。此外，如果在解释 PHP 文件期间请求 MySQL 连接，则将建立与数据库的连接。脚本执行完成后，将关闭与数据库的连接。

2.  持久连接。以上所有内容都是正确的，除了一个区别：当 PHP 脚本执行完毕后，从该 Apache 进程到数据库的连接不会关闭。然后，如果该工作人员处理的下一个请求请求相同的数据库连接（即，与相同数据库的连接，在同一主机上，使用相同的用户/密码），则将重新使用先前使用的连接。

持久连接是否对您的性能有真正的影响取决于许多因素，从 Web 服务器容量和配置到应用程序设计和数据库结构。

**更好的解决方案：**

一般来说，您可能不需要持久连接；如果您因为轮询（每 X 秒检查一次的过程）而觉得您的数据库太忙，那么您最好实现一个缓存层并完全消除对数据库的访问。

假设您有一个用户到用户的消息传递应用程序，您可以编写一些基本的缓存逻辑，例如：

1.  在用户页面发出第一个请求时，查询他的消息并将最新消息（或其他消息）放入像 memcached 这样的缓存中
2.  每次用户轮询时，检查该值是否在缓存中；如果是，没有变化
3.  每次用户向另一个用户发送消息时，从缓存中删除接收用户的最后一条消息
4.  下次接收用户轮询服务器时，它会看到没有消息，并返回数据库获取最新值

每隔几秒直接轮询一次数据库通常会导致应用程序无法很好地扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T07:56:13.170

连接池将是您的答案。我不是 PHP 专家，但我在 google 上找不到任何东西向您展示如何进行连接池。

您可能想阅读这个 SO 问题以获取更多信息：[PHP 中的连接池](https://stackoverflow.com/questions/39753/connection-pooling-in-php)

希望有帮助。

# java - 在java中使用共享密钥加密/解密？

> ID：10829218
> 
> 赞同：2
> 
> 时间：2012-05-31T07:31:33.297
> 
> 标签：java, encryption

我有客户令牌，我要从一个 Web 应用程序说 app1 发送到另一个 Web 应用程序说 app2。我想在 app1 加密客户令牌并在 app2 使用在 app1 和 app2 共享的密钥对其进行解密。我不知道如何开始？如果有人可以使用共享密钥向我指出一些示例代码或一些教程，那将非常有帮助，因为网上有太多加密/解密的东西（如对称密钥、公私钥），这真的让我很困惑。另一个限制是我有很短的时间来详细介绍。提前致谢。

**编辑：-**我正在寻找类似[http://sanjaal.com/java/186/java-encryption/tutorial-java-des-encryption-and-decryption/](http://sanjaal.com/java/186/java-encryption/tutorial-java-des-encryption-and-decryption/)但使用 AES 的简单程序？无法使用共享密钥在 AES 中找到这种示例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T11:19:13.737

我建议这样做：让

您的每个应用程序都分配一个公钥/私钥对，并将私钥安全地存储在密钥中，并用密码保护。确保这是非常安全的。不用说公共证书（也包含公共密钥）将是公共的。
每个应用程序都将拥有所有其他应用程序的公钥证书。现在，当一个应用程序想要与其他应用程序通信时；

首先`sign`（基本上加密）使用发送应用程序的私钥的令牌。
然后使用您要将数据发送到的应用程序的公钥加密结果值。

这样，接收此值的应用程序可以确保中间没有人能够辨认出您发送的内容并验证令牌是否来自受信任的实体。
但是如果你使用共享密钥（对称密钥），那么如果对称密钥被泄露，那么所有的应用程序都会被泄露。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-31T07:55:28.230

通常您使用非对称算法（例如 RSA）来加密对称密钥（例如 AES）以安全地与另一方共享它，然后您的后续通信使用对称密钥加密。这是非常基本的要点，但还有更多因素需要考虑。

我可以看到你自己现在陷入了非常大的麻烦，有几个原因。

1.  你不了解密码学的概念
2.  你不愿意深入研究它
3.  只是想从网上获取一些代码并使用它。
4.  时间真的很短

我了解您可能别无选择，也许您的雇主/客户希望快速完成这项工作。但我彻底建议你不要继续，除非你知道你在做什么。如果您正在处理信用卡信息或其他重要客户信息等敏感细节，请帮自己一个忙，深入研究密码学。

如果您以不正确的方式使用加密算法，那么加密算法的强度并不重要。因此，您需要了解如何正确使用每种算法及其优缺点。

# google-maps-api-3 - 如何将可视化表格的结果保存为excel

> ID：10829219
> 
> 赞同：0
> 
> 时间：2012-05-31T07:31:35.940
> 
> 标签：google-maps-api-3, google-fusion-tables

我正在使用可视化 api 在我的网页上显示我的融合表。现在我想将表保存或下载为 excel 数据。我在网页中为该融合表添加了查询功能。因此查询数据将显示新结果每次。所以我想将这些结果保存为 excel。帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T10:08:13.713

我发布了[一个答案](https://stackoverflow.com/a/10441491/1211981)，应该允许你这样做。当然，您的网页无法保存到用户的硬盘，但您可以提供一个链接，允许用户保存与 Excel 兼容的 CSV 文件。

# javascript - 淡出所有“LI”元素

> ID：10829225
> 
> 赞同：0
> 
> 时间：2012-05-31T07:32:02.203
> 
> 标签：javascript, html, prototypejs

请告诉我如何使用 PrototypeJS 隐藏（淡出）所有`li`元素。

PS可以有任意数量的`li`元素。

**HTML：**

```
<div class="rtr-img" >
  <ul id="rotator_ul">
    <li id="rtr-img-1"><a href="/link/1/"><img src="b1.jpg"/></a></li>
    <li id="rtr-img-2"><a href="/link/2/"><img src="b2.jpg"/></a></li>
    <li id="rtr-img-3"><a href="/link/3/"><img src="b3.jpg"/></a></li>
  </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T07:33:59.630

据我所知，PrototypeJS 没有内置动画/效果。您可以使用 Scriptaculous 库，它是 Prototype 的附加组件，并提供了一个[`fade`方法](http://madrobby.github.com/scriptaculous/effect-fade/)。

如果要淡出整个`ul`元素：

```
$("rotator_ul").fade({ 
    from: 1,
    to: 0 
}); 
```

如果您想（如您的问题中所述）淡出所有`li`元素：

```
$$("li").invoke("fade", { 
    from: 1, 
    to: 0 
}); 
```

# ios - 确定 UIGraphicsBeginImageContext 使用 CGBitmapContextCreate 来创建图形上下文吗？

> ID：10829226
> 
> 赞同：0
> 
> 时间：2012-05-31T07:32:05.590
> 
> 标签：ios, cocoa-touch, uikit, core-graphics, graphicscontext

是否`UIGraphicsBeginImageContext`用于`CGBitmapContextCreate`创建图形上下文[**更新：**我在文档中找不到它]，所以图形上下文是完全相同的吗？我也尝试过介入，`UIGraphicsBeginImageContext`但调试器不允许我介入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T08:53:06.877

在iOS 文档的[UIKit Function References](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIKitFunctionReference/Reference/reference.html)`UIGraphicsBeginImageContext`页面中，写了以下内容：

> 创建基于*位图的*图形上下文并使其成为当前上下文。

重点补充。[在指向CGContextRef](http://developer.apple.com/library/ios/#documentation/GraphicsImaging/Reference/CGContext/Reference/reference.html)页面的链接之后，我发现了这个：

> 图形上下文包含绘图参数和将页面上的绘图渲染到目标所需的所有设备特定信息，无论目标是*应用程序中的窗口、**位图图像**、PDF 文档还是打印机。*

再次强调。这表示（截至目前）有 4 种 Core Graphics 上下文，每种都有自己的初始化程序。与位图有关的唯一类型是基于位图的 CGContextRef，并且只有一种记录方式可以创建它们（好吧，从技术上讲，它有两个版本）。很有可能正在使用此功能。我相信这`UIGraphicsBeginImageContext`只是一种方便的方法。它只是为 CGBitmapContextCreate 设置了一组默认参数（它需要很多参数）并将创建的上下文推送到图形堆栈上。

# sql-server - SQL Server > 复制某些行并更改 2 个值

> ID：10829228
> 
> 赞同：1
> 
> 时间：2012-05-31T07:32:09.497
> 
> 标签：sql-server, tsql

我正在使用以下语句选择我的数据：

```
select distinct min(revision_number) as revno,po_number 
from PO_HEADER 
group by PO_NUMBER
having MIN(revision_number) > 0; 
```

我得到以下数据：

```
7   30492-SA-EH504
20  30492-PS-SO895
20  30492-RA-DD219
26  30492-SA-KK474
1   30492-BA-AT236
17  30492-RA-DD386
21  30492-PS-FS803
25  30492-PS-WM324
33  30492-SA-NS011 
```

我想用 复制行并将其`min(revno)`设置`revno`为零。我尝试使用整个表插入并使用上面`where exists`的`select`语句，它会复制整个表。

这是`30492-SA-EH504`当前表格的样子：

```
30492-SA-EH504 7
30492-SA-EH504 8
30492-SA-EH504 9
30492-SA-EH504 10 
```

这是我希望它照顾的方式：

```
30492-SA-EH504 0
30492-SA-EH504 7
30492-SA-EH504 8
30492-SA-EH504 9
30492-SA-EH504 10 
```

我正在浏览 T-SQL 的 MSDN 以了解在这种情况下如何使用存在，但正如我所说的那样，它要么复制所有内容，要么什么都不复制，而我目前没有这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T07:37:17.943

```
insert into PO_HEADER(po_number, revision_number, ....other columns)
    select POH.po_number, 0, ...other columns
    from PO_Header AS POH
    INNER JOIN (select po_number, MIN(revision_number) as min_revision_number
        from PO_HEADER 
        group by PO_NUMBER
        having MIN(revision_number) > 0) AS POHMin ON POHMin.po_number = POH.po_number
            AND POHMin.min_revision_number = POH.revision_number 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T07:50:01.570

这应该按预期工作：

```
WITH CTE AS(
    SELECT RevNum = ROW_NUMBER()OVER(PARTITION BY po_number ORDER BY revision_number)
         , revision_number
         , po_number
    FROM PO_HEADER t
) 
INSERT INTO PO_HEADER 
SELECT 0, t1.po_number
FROM CTE t1
WHERE t1.RevNum = 1
AND EXISTS(
    SELECT  NULL FROM CTE t2
    WHERE   t2.po_number = t1.po_number
    AND     t2.RevNum > 1
) 
```

# ios - 如何从字符串中复制括号内的子字符串并随后将其删除？

> ID：10829232
> 
> 赞同：0
> 
> 时间：2012-05-31T07:32:19.117
> 
> 标签：ios, xcode

我收到如下文字：- `1\. e4 e5 2\. Nf3 Nc6 3\. Bb5 {This opening is called the Ruy Lopez.} 3... a6 4\. Ba4 Nf6 5\. O-O Be7 6\. Re1 b5 7\. Bb3 d6 8\. c3 O-O 9\. h3 Nb8 10\. d4 Nbd7 11\. c4 c6 12\. cxb5 axb5 13\. Nc3 Bb7 14\. Bg5 b4 15\. Nb1 h6 16\. Bh4 c5`

我需要删除 {} 内的注释，但在此之前我需要将它与移动的索引号一起复制，如 3 或 Bb5。

为了删除我正在使用的字符串

```
- (NSString *)stringFilter:(NSString *)targetString {

    NSScanner *theScanner;
    NSString *text = nil;

    theScanner = [NSScanner scannerWithString: targetString];

    while ([theScanner isAtEnd] == NO) {

        [theScanner scanUpToString:@"{" intoString:NULL] ; 

        [theScanner scanUpToString:@"}" intoString:&text] ;

        targetString = [targetString stringByReplacingOccurrencesOfString:
                      [NSString stringWithFormat:@"%@}", text]
                                                           withString:@""];

    } 

    return targetString;

} 
```

我正在寻找如何复制该字符串并将其存储在字典或数组中谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T07:46:18.100

我使用下面的分类方法来获取 '(' & ')' 之间的内容。你可以很容易地适应它...

编辑：完整的完整类别

```
//  NSString+Parenthesis.h
#import <Foundation/Foundation.h>

@interface NSString (Parenthesis)

-(NSString*)contentsInParenthesis;

@end

//  NSString+Parenthesis.m
#import "NSString+Parenthesis.h"

@implementation NSString (Parenthesis)

-(NSString*)contentsInParenthesis {
    NSString *subString = nil;
    NSRange range1 = [self rangeOfString:@"("];
    NSRange range2 = [self rangeOfString:@")"];

    if ((range1.length == 1) && (range2.length == 1) && (range2.location > range1.location)) {
        NSRange range3;
        range3.location = range1.location+1;
        range3.length = (range2.location - range1.location)-1;

        subString = [self substringWithRange:range3];
    }

    return subString;
}

@end 
```

# php - facebook 图形 api 与 fql ？哪个更快？

> ID：10829239
> 
> 赞同：1
> 
> 时间：2012-05-31T07:33:05.170
> 
> 标签：php, facebook, facebook-graph-api, facebook-fql

我正在尝试开发一个 facebook 应用程序。我遇到了 facebook graph api 和 fql 从 facebbok 获取数据。根据我的应用程序，我需要使用其中一个从 facebook 获取大量信息。任何人都可以建议哪个更快的图形 api 或 fql 用于获取大量数据？

谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T12:59:12.533

Graph api 有其优点和缺点，fql 也是如此。

Graph api 简单、易于使用且更结构化（至少对我而言），但 fql 比 graph api 更强大。

有些查询是您无法在图形 api 中执行的，或者至少您需要从图形 api 进行多次调用，但只需要通过 fql 进行一次调用。

**简而言之，

有些操作只有 fql 可以做（并且 graph api 失败）但是没有 graph api 可以做而 fql 不能做的操作:)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T08:20:40.160

这取决于您要达到的目标。如果您想获取 Graph API 调用不直接提供的数据，FQL 会更好。例如，如果您想从多个表中获取信息。就速度而言，它实际上取决于 FQL 查询的复杂程度以及从 Facebook 检索到的数据量。

通过 Graph API 进行简单调用会更快，并且必须更容易调用，而不是 FQL 等效项。但是，如前所述，FQL 更强大。

# php - 尝试使用 JSON 将 javascript 发送到 php 脚本以打包

> ID：10829241
> 
> 赞同：0
> 
> 时间：2012-05-31T07:33:07.040
> 
> 标签：php, javascript, jquery, json, packer

我正在使用 JSON 将 javascript 脚本代码发送到 php 脚本以进行打包（加密） 我正在使用 Dead Edwrd 的 PHP Javascript Packer 打包`http://joliclic.free.fr/php/javascript-packer/en/index.php` 器工作正常，但我面临一个奇怪的问题，导致打包结果出错。

这是我要打包的原始脚本：

```
<script type='text/javascript'>jwplayer('mediaspace').setup({ 'flashplayer': 'http://www.domain.com/player/player/player.swf', 'file': 'http://doamin.com','image': 'http://www.domain.com/images/background.jpg', 'skin': 'http://www.domain.com/player/skin/glow.zip', 'plugins': 'hd-2,timeslidertooltipplugin-1', 'hd.file': 'http://doamin.com', 'controlbar': 'over', 'stretching': 'exactfit', 'width': '700', 'height': '404' });</script> 
```

**在将其发送到我的 php 脚本之前，我在此脚本上使用了 javascript 转义**

逃跑后是这样的：

```
%3Cscript%20type%3D%27text/javascript%27%3Ejwplayer%28%27mediaspace%27%29.setup%28%7B%20%27flashplayer%27%3A%20%27http%3A//www.domain.com/player/player.swf%27%2C%20%27file%27%3A%20%27http%3A//domain.com%27%2C%20%20%20%20%20%27image%27%3A%20%27http%3A//www.domain.com/images/background.jpg%27%2C%20%27skin%27%3A%20%27http%3A//www.domain.com/player/skin/glow.zip%27%2C%20%27plugins%27%3A%20%27hd-2%2Ctimeslidertooltipplugin-1%27%2C%20%27hd.file%27%3A%20%27http%3A//domain.com%27%2C%20%27controlbar%27%3A%20%27over%27%2C%20%27stretching%27%3A%20%27exactfit%27%2C%20%27width%27%3A%20%27700%27%2C%20%27height%27%3A%20%27404%27%20%7D%29%3B%3C/script%3E 
```

然后我使用 JSON 将它发送到我的 php 脚本。

PHP脚本获取值并打包脚本并将打包脚本返回给javascript：

```
<?php
$src = $_GET['code'];
$callback = $_GET['callback'];

require 'class.JavaScriptPacker.php';

$packer = new JavaScriptPacker($src, 'Normal', true, false);
$packed = $packer->pack();

$output = array('error'=>'none', 'results'=> $packed , 'source' => $src);
$out_string =  json_encode($output);
echo $callback.'('.$out_string.');';
?> 
```

P/SI 已将“源”添加到数组中，因此我可以检查 php GET 到底是什么。

现在的问题，我不知道为什么，但是 php 正在向 source/$src 添加反斜杠，如下所示：

```
<script type=\'text/javascript\'>jwplayer(\'mediaspace\').setup({ \'flashplayer\': \'http://www.domain.com/player/player.swf\', \'file\': \'http://domain.com\', \'image\': \'http://www.domain.com/images/ackground.jpg\', \'skin\': \'http://www.domain.com/player/skin/glow.zip\', \'plugins\': \'hd-2,timeslidertooltipplugin-1\', \'hd.file\': \'http://domain.com\', \'controlbar\': \'over\', \'stretching\': \'exactfit\', \'width\': \'700\', \'height\': \'404\' });</script> 
```

这破坏了包装结果

我想要的结果：

```
eval(function(p,a,c,k,e,d){while(c--){if(k[c]){p=p.replace(new RegExp('\\b'+c.toString(a)+'\\b','g'),k[c])}}return p}('<8 g=\'f/e\'>d(\'l\').k({\'j\':\'3://6.5.0/4/4/4.n\',\'7\':\'3://b.0\',\'m\':\'3://6.5.0/i/h.c\',\'9\':\'3://6.5.0/4/9/x.z\',\'o\':\'a-2,w-1\',\'a.7\':\'3://b.0\',\'y\':\'v\',\'u\':\'q\',\'p\':\'r\',\'s\':\'t\'});</8>',36,36,'com|||http|player|domain|www|file|script|skin|hd|doamin|jpg|jwplayer|javascript|text|type|background|images|flashplayer|setup|mediaspace|image|swf|plugins|width|exactfit|700|height|404|stretching|over|timeslidertooltipplugin|glow|controlbar|zip'.split('|'))) 
```

但是**我得到的结果是由于反斜杠**（这也破坏了脚本）

```
eval(function(p,a,c,k,e,d){while(c--){if(k[c]){p=p.replace(new RegExp('\\b'+c+'\\b','g'),k[c])}}return p}('<2 1=\\\'0/3\\\'>4(\\\'7\\\').6({\\\'5\\\':\\\'8:',9,9,'text|type|script|javascript|jwplayer|flashplayer|setup|mediaspace|http'.split('|'))) 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T07:44:38.007

您可能打开了[magic_quotes ，它会自动将反斜杠添加到POST、GET 和COOKIE 变量中。](http://www.php.net/manual/en/info.configuration.php#ini.magic-quotes-gpc)

在 php.ini 中禁用它（自 PHP 5.3 起已弃用，并在 5.4 中删除）或简单地使用 stripslashes：

```
$src = $_GET['code'];
if (get_magic_quotes_gpc())  
  $src = stripslashes($src); 
```

或者您可以一次转义所有 $_GET 变量：

```
$_GET = array_map('stripslashes', $_GET); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T07:40:46.820

在 php 脚本的开头添加：

```
if(get_magic_quotes_gpc())
{
    function undo_magic_quotes_array($array)
    {
        return is_array($array) ? array_map('undo_magic_quotes_array', $array) : stripslashes($array));
    }
    $_GET = undo_magic_quotes_array($_GET);
    $_POST = undo_magic_quotes_array($_POST);
    $_COOKIE = undo_magic_quotes_array($_COOKIE);
    $_FILES = undo_magic_quotes_array($_FILES);
    $_REQUEST = undo_magic_quotes_array($_REQUEST);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T07:40:53.620

这是因为 json_encode。您将整个脚本视为一个字符串。自然，作为一个字符串，它需要 \ 来转义各种字符。

将在此处创建的 JSON 如下所示：

```
{
    'error':'none', 
    'results':'eval(...)',
    'source':'...whatever your $src is...'
} 
```

请注意，`eval(...)`无论您的 $src 是什么，现在都包含在引号中。它们是字符串，必须转义各种字符。

# symfony - 从 Symfony2 中的实体访问的配置参数

> ID：10829243
> 
> 赞同：0
> 
> 时间：2012-05-31T07:33:21.893
> 
> 标签：symfony

有没有办法从实体内部访问会话或配置参数？我想在我的所有捆绑包中的每个实体中都可以访问 app.session.xyz。是否可以配置原则或创建一些服务来存档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T07:50:14.863

这是个坏主意。您的实体不得包含任何逻辑。您所有的业务逻辑都应该存在于专用服务中。

无论如何，这是不可能的。您不能使用 DIC 将服务注入实体，因为它不知道如何创建它们。

# c++ - 无法编译。头文件。封闭自己的对象定义

> ID：10829245
> 
> 赞同：1
> 
> 时间：2012-05-31T07:33:28.767
> 
> 标签：c++, class, opencv, g++, libraries

在这里，我遇到了与上次类似的问题，但我找不到任何答案。

请注意，我认为很重要：通常我使用下一个命令在 opencv 中编译我的程序：

```
g++ -o def program.cpp `pkg-config --cflags opencv` `pkg-config --libs opencv` 
```

这一行将创建一个可执行文件，其名称将是 def 并且我将能够使用它。

我在一个项目中工作，随着项目变得越来越大，我不得不定义一些对象，只是为了让一切变得更容易和可能处理。我从文件中创建了一个对象：homogra.cpp 和 homogra.h，我使用的命令是：

```
g++ -c  homogra.cpp `pkg-config --cflags opencv` `pkg-config --libs opencv` 
```

然后，我在我的 program.cpp 中写了 #include "homogra.h"

我编译如下：

```
 g++ -o def program.cpp homogra.o `pkg-config --cflags opencv` `pkg-config --libs opencv` 
```

到目前为止，一切正常。

然后我创建了第二个对象（使用与 homogra 相同的编译行，但这次使用的是segmentator.cpp 和segmentator.h），我写了#include "segmentator.h",(in program.cpp) 行并编译喜欢：

```
g++ -o def program.cpp .o segmentator.o `pkg-config --cflags opencv` `pkg-config --libs opencv` 
```

现在它无法正常工作，并且无法识别分段器。我已经检查了分段器是否正常工作，如果homogra 是program.cpp 中的唯一包含，一切正常。

我注意到一些奇怪的事情。如果我更改行并在之前编写，在#include 行中，#include "segmentator.h" 然后 #include "homogra.h"，然后是编译器，使用同一行进行编译：

```
 g++ -o def program.cpp homogra.o segmentator.o `pkg-config --cflags opencv` `pkg-config --libs opencv` 
```

只识别这个时间分割器而不是同源词。这可能有点难以理解，我试图尽可能地解释它。

有什么帮助！？

提前谢谢了。

这是homogra.h：

```
using namespace cv;
using namespace std;

#ifndef _NAMES_H  
#define _NAMES_H   
class homogra {
public:

    Mat matCalculation( Mat img, Mat img2);
    void printMatrix(Mat matrix);

};
#endif 
```

在homogra.cpp 我有所有典型的包括和homogra.h：

```
#include <stdio.h>
#include <stdlib.h>
#include <opencv2/core/core.hpp>
#include <opencv2/imgproc/imgproc.hpp>
#include <opencv2/highgui/highgui.hpp>
#include <iostream>
#include <sstream>
#include "opencv2/features2d/features2d.hpp"
#include "opencv2/calib3d/calib3d.hpp"
#include "homogra.h" 
```

然后解释功能。

对象 2 是 segmentator.h

```
 using namespace cv;
 using namespace std;

#ifndef _NAMES_H  
#define _NAMES_H   
 class segmentator {
public:

    void search(Mat img,vector<std::vector<cv::Point> >& contours);

     void similar(vector<std::vector<cv::Point> >& contours,vector<std::vector<cv::Point> >& contours2,vector<int>& idx);

    vector<Mat> separate(Mat img,Mat img2,vector<std::vector<cv::Point> >&   contours,vector<std::vector<cv::Point> >& contours2,vector<int> idx);
};

#endif 
```

在segmentator.cpp 中，除了homogra.h 之外，我再次拥有所有相同的包含，而我使用segmentator.h 而不是这个。

Program.cpp 是 image_reg.cpp：

```
#include <stdio.h>
#include <stdlib.h>
#include <iostream>
#include <sstream>
#include "opencv2/features2d/features2d.hpp"
#include "opencv2/calib3d/calib3d.hpp"
#include <opencv2/core/core.hpp>
#include <opencv2/imgproc/imgproc.hpp>
#include <opencv2/highgui/highgui.hpp>

#include "homogra.h"
#include "segmentator.h" 
 using namespace cv;
 using namespace std;

int main(int argc, char ** argv )
{ //Here is the code where I try to invoque two instances of homogra and segmentator.
} 
```

如果我让 homogra.h 作为第一个在 image_reg.cpp 的包含列表中被读取，那么只有 homogra.h 被识别，如果我让在第一个位置分段器，那么只有 segmentator.h 实例将被创建和homogra。h 不会被识别。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T09:20:40.317

您的包含标头保护是错误的。它们应该是唯一的，使用源文件的名称，而不仅仅是`_NAMES_H`.

所以在 homogra.h 你应该有这个：

```
#ifndef HOMOGRA_H  
#define HOMOGRA_H   
...
#endif 
```

...在segmentator.h中，你应该有这个

```
#ifndef SEGMENTATOR_H  
#define SEGMENTATOR_H   
...
#endif 
```

此外，在头文件中有一个[非常糟糕的做法。](https://stackoverflow.com/questions/5849457/using-namespace-in-c-headers)`using namespace xxx;`您使您的标头很难与其他标头共存。

正如 Jonathan Wakely 指出的那样，以下划线开头的符号也不是一个好主意。

# android - 使用 XML 和代码创建视图 - 元素不显示

> ID：10829246
> 
> 赞同：0
> 
> 时间：2012-05-31T07:33:29.603
> 
> 标签：android, android-layout, tablelayout

我正在制作一个简单的音板应用程序 - 按钮应该出现在两列中，按下按钮会播放声音。我做了它并使用 XML 定义了所有按钮，它工作正常，但是由于应用程序已经附加了一个侦听器以使用循环播放声音，我决定只使用代码来定义按钮。

所以代码没有错误，应用程序启动但没有按钮出现。这里有一个类似的问题：[Content not show in dynamic created android TableLayout](https://stackoverflow.com/questions/10154800/content-not-showing-in-dynamically-created-android-tablelayout)尽管如果我理解正确，建议的解决方案（确保我使用`TableLayout.LayoutParams`）已经在这里应用。

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
    setContentView(R.layout.main_table2);

    int[] sounds = { ... };

    String[] labels = { ... };

    declareButtons(sounds, labels);
}

private void declareButtons(int[] sounds, String[] labels)
{
    TableLayout tbl = (TableLayout) this.findViewById(R.id.tblMain);
    TableRow row = null;
    Button cell;

    for (int i=0; i<sounds.length; i++)
    {
        cell = new Button(this);
        cell.setText(labels[i]);
        cell.setOnClickListener(this.getStartListener(sounds[i]));

        cell.setBackgroundDrawable(getResources().getDrawable(R.drawable.soundbutton));
        cell.setTextColor(color.white);
        TableLayout.LayoutParams cellParams = new TableLayout.LayoutParams(TableLayout.LayoutParams.MATCH_PARENT, TableLayout.LayoutParams.WRAP_CONTENT, (float) 1);
        cellParams.leftMargin = (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, 5, getResources().getDisplayMetrics());
        cellParams.topMargin = cellParams.leftMargin;

        if (i%2==0) // left column
        {
            row = new TableRow(this);
            cell.setLayoutParams(cellParams);
            row.addView(cell);
        }
        else // right column
        {
            cellParams.rightMargin = cellParams.leftMargin;
            cell.setLayoutParams(cellParams);
            row.addView(cell);
            row.setLayoutParams(new TableLayout.LayoutParams(TableLayout.LayoutParams.MATCH_PARENT, TableLayout.LayoutParams.MATCH_PARENT));
            tbl.addView(row);
        }
    }

    if (sounds.length%2 > 0) // handle uneven amount of buttons
        tbl.addView(row);
} 
```

这是布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/leonbg2"
    android:orientation="vertical" >

    <ScrollView
        android:id="@+id/scrollView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <TableLayout
            android:id="@+id/tblMain"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >

        </TableLayout>
    </ScrollView>

</LinearLayout> 
```

这是以前定义表行的方式，效果很好：

```
 <TableRow
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" >

            <Button
                android:id="@+id/buttonaw"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginLeft="5dp"
                android:layout_marginTop="5dp"
                android:layout_weight="1"
                android:background="@drawable/soundbutton"
                android:text="A what?"
                android:textColor="@android:color/white" />

            <Button
                android:id="@+id/buttona"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:layout_marginLeft="5dp"
                android:layout_marginRight="5dp"
                android:layout_marginTop="5dp"
                android:layout_weight="1"
                android:background="@drawable/soundbutton"
                android:text="Argh!"
                android:textColor="@android:color/white" />
        </TableRow> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T10:32:18.117

好吧，我设法自己解决了这个问题，摆脱`TableLayout`了一堆`LinearLayout`s （每行一个）。该代码与在 if 语句的左列部分中添加`row.setOrientation(LinearLayout.HORIZONTAL);`before或多或少相同。`cell.setLayoutParams(cellParams);`这个故事的寓意是；如果你认为你需要使用 TableLayout，你可能不需要。和平。

# ms-access - 访问每个公司的 2007 VBA 报告电子邮件

> ID：10829247
> 
> 赞同：0
> 
> 时间：2012-05-31T07:33:30.040
> 
> 标签：ms-access, vba, ms-access-2007

2007年我有一份大约150页的供应商报告。每份报告每页都有地址、电子邮件联系人、电话号码、产品和公司名称。每月一次，我必须向供应商发送一封电子邮件，以确认联系人地址、电话号码和产品的更改。

我想将该特定报告发送到该特定电子邮件而不是整个报告。我希望这是自动化的。

在网上研究后，我用 VBA 编写了代码，但仍然无法正常工作。我得到太多参数。预期 1\. 错误。

下面是我的表单的代码，带有发送报告按钮。

```
Dim strSql As String
Dim strSubject As String
Dim strMsgBody As String
strSql = "SELECT DISTINCT Name, EMail FROM [Suppliers and Products]"

Set dbs = CurrentDb
Set rst = dbs.OpenRecordset(strSql)

'loop through the recordset

 Do While Not rst.EOF
    ' grab email string

    strEmail = rst.Fields("EMail")

    ' grab name
    strName = rst.Fields("Name")

    Call fnUserID(rst.Fields("EMail"))

    'send the pdf of the report to curent supplier
    On Error Resume Next

    strSubject = "September 2012 Supplier's Listing"
    strMsgBody = "2008 Procedure Review Attached"
    DoCmd.SendObject acSendReport, "Suppliers Confirmation forms", acFormatHTML, strEmail, , , strSubject, strMsgBody, False

    If Err.Number <> 0 Then
        MsgBox Err.Number & vbCrLf & Err.Description, vbOKOnly, "Delivery Failure to the following email address: " & strEmail
    End If

    On Error GoTo PROC_ERR

    ' move and loop
    rst.MoveNext
Loop

' clean up
rst.Close
Set rst = Nothing
dbs.Close
Set dbs = Nothing

PROC_Exit:
Exit Sub

PROC_ERR:
MsgBox Err.Description
Resume PROC_Exit 
```

我有一个带有以下代码的模块

```
Option Compare Database

Public Function fnUserID(Optional Somevalue As Variant = Null, Optional reset As Boolean = False) As Variant
    Static EMail As Variant
    If reset Or IsEmpty(EMail) Then EMail = Null
    If Not IsNull(Somevalue) Then EMail = Somevalue

    fnUserID = EMail
End Function

Public Function SendReportByEmail(strReportName As String, strEmail As String)
    On Error GoTo PROC_ERR

    Dim strRecipient As String
    Dim strSubject As String
    Dim strMessageBody As String
    'set the email variables
    strRecipients = strEmail
    strSubject = Reports(strReportName).Caption
    strMessageBody = "May 2012 Suppliers' List "

    ' send report as HTML
    DoCmd.SendObjectac acSendReport, strReportName, acFormatHTML, strRecipients, , , strSubject,    strMessageBody, False
    SendReportByEmail = True

    PROC_Exit:
    Exit Function
    Proc Err:

    SendReportByEmail = False

    If Err.Number = 2501 Then
        Call MsgBox("The email was not sent for " & strEmail & ".", vbOKOnly + vbExclamation + vbDefaultButton1, "User Cancelled Operation")
        Else: MsgBox Err.Description
    End If
    Resume PROC_Exit

End Function 
```

作为报告的查询正在获取其数据，具有以下 SQL。

```
SELECT Names.Name, Names.Phys_Address, 
       Names.Telephones, Names.Fax, Names.EMail, 
       Names.Web, Names.Caption AS Expr1, [Products by Category].CatName, 
       [Products by Category].ProdName
FROM [Names] 
INNER JOIN [Products by Category] 
ON Names.SuppID=[Products by Category].SupID
WHERE ((Names.EMail = fnUserID()) or (fnUserID() Is Null)); 
```

请帮忙，因为我被困在哪里出错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T14:45:58.920

一些笔记。

```
On Error GoTo PROC_ERR

Dim qdf As QueryDef
Dim strSQL As String
Dim strSubject As String
Dim strMsgBody As String

strSQL = "SELECT DISTINCT [Name], EMail, SuppID FROM Names " _
       & "INNER JOIN [Products by Category] " _
       & "ON Names.SuppID=[Products by Category].SupID "

Set dbs = CurrentDb
Set rst = dbs.OpenRecordset(strSql)

qrySQL = "SELECT Names.Name, Names.Phys_Address, " _
       & "Names.Telephones, Names.Fax, Names.EMail, " _
       & "Names.Web, Names.Caption AS Expr1, " _
       & "[Products by Category].CatName, " _
       & "[Products by Category].ProdName " _
       & "FROM [Names] " _
       & "INNER JOIN [Products by Category] " _
       & "ON Names.SuppID=[Products by Category].SupID "

'loop through the recordset

 Do While Not rst.EOF
    ' grab email string

    strEmail = rst.Fields("EMail")

    ' grab name
    strName = rst.Fields("Name")

    ' You should check that the email is not null
    Call fnUserID(rst.Fields("EMail"))

    'send the pdf of the report to curent supplier
    'On Error Resume Next

    'The query that the report uses
    Set qdf = CurrentDB.QueryDefs("Suppliers and Products")
    qdf.SQL = qrySQL & " WHERE SuppID=" & rst!SuppID

    strSubject = "September 2012 Supplier's Listing"
    strMsgBody = "2008 Procedure Review Attached"
    DoCmd.SendObject acSendReport, "Suppliers Confirmation forms", _
        acFormatHTML, strEmail, , , strSubject, strMsgBody, False

    ' move and loop
    rst.MoveNext
Loop

''Reset the query
qdf.SQL = qrySQL

rst.Close
Set rst = Nothing
dbs.Close
Set dbs = Nothing

PROC_Exit:
Exit Sub

PROC_ERR:
    If Err.Number <> 0 Then
        MsgBox Err.Number & vbCrLf & Err.Description, vbOKOnly, _
          "Delivery Failure to the following email address: " & strEmail
    End If
MsgBox Err.Description
Resume PROC_Exit 
```

# javascript - jPlayer 进度条旋钮

> ID：10829250
> 
> 赞同：0
> 
> 时间：2012-05-31T07:33:37.970
> 
> 标签：javascript, jquery, html, css, jplayer

我最近在使用 jPlayer，我希望播放栏（“jp-play-bar”）在流式传输时在右侧有一个小旋钮，就像这张图片中的那个： ![所需的进度条行为](../Images/32781d52bfe5f71c119c391c83ad3a93.png)

然而，当我尝试设置背景时，图像被切片并包含在进度条的边界内（jp-progress）。如何在不破坏其他视觉效果的情况下将其设置为弹出？有人试过吗？

这是他们官方网站的演示版本：[http ://www.jplayer.org/latest/demo-01](http://www.jplayer.org/latest/demo-01)

非常感谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T08:54:31.460

我刚刚摆弄了一下，想出了：

[http://jsfiddle.net/gRoberts/BNt3m/](http://jsfiddle.net/gRoberts/BNt3m/)

通过更多的调整，复制您需要的内容应该非常简单。

然后，您还可以根据需要使用该`$.jPlayer.event.timeupdate`事件来创建时间泡泡。

# android - 如何在没有 startActivity(); 的情况下显示以前的视图？

> ID：10829257
> 
> 赞同：-1
> 
> 时间：2012-05-31T07:34:03.000
> 
> 标签：android, android-tabhost

> **可能重复：**
> [Android：返回上一个活动](https://stackoverflow.com/questions/4038479/android-go-back-to-previous-activity)

我需要在没有 startActivity 的情况下转到上一个活动，因为我不想再次打开该活动。我可以根据需要选择上下活动吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T07:39:07.663

只需调用`finish()`.

您的活动将被关闭，您将返回之前的活动。

# sql-server-2008 - 使用 SSIS 将行附加到目标的 SQL 查询

> ID：10829259
> 
> 赞同：3
> 
> 时间：2012-05-31T07:34:11.267
> 
> 标签：sql-server-2008, ssis

我创建了一个用于将记录从一个表导入到另一个表的 SSIS 包。它工作正常，但在源表中的记录正在定期增加。因此我定期执行包。在 Package 在插入新行之前，我从 Destination 表中截断记录，然后 Executing Package 。

```
 SQL TASK -1 

        Truncate table "OLE DB Destination"

        SQL TASK -1 

        CREATE TABLE "OLE DB Destination" (

           "ZZCOIL_APPR10" NVARCHAR2(20),
           "ZZSTORAGE_LOC10" NVARCHAR2(15),
           "ZZDETAIL1" NVARCHAR2(40),
           "ZZTOTAL_QTY" NUMBER(7, 2),
           "ZZNOTE1" NVARCHAR2(100),
           "ZZNOTE2" NVARCHAR2(100)
                                           ) 
```

但我不想要那个解决方案，我只想插入目标表中不存在的剩余记录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T08:37:07.660

你需要一个查找转换。

你会有这样的东西：

![在此处输入图像描述](../Images/f3490221a262f54295ff43630cc9a2d4.png)

因此，例如，您的组件将查找查询作为“从 DestinationTable 中选择 ID”，并且您将按 ID 匹配它们。在目标表上找不到的所有源 ID 将被发送到“查找不匹配输出”路径，然后插入它们

有几个关于如何在 Internet 上使用此组件的示例。[这](http://sqlblog.com/blogs/andy_leonard/archive/2010/02/09/ssis-snack-configuring-an-ssis-2005-lookup-transformation-for-a-left-outer-join.aspx)是一个

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T19:33:27.837

您可以在 ssis 中使用表差异组件.....

# jquery-ui - JQuery UI Widget继承/类方法调用

> ID：10829262
> 
> 赞同：0
> 
> 时间：2012-05-31T07:34:20.167
> 
> 标签：jquery-ui, jquery-ui-dialog, jquery-ui-widget

我正在尝试在 JQuery UI (v 1.9 m8) 中编写一个自定义小部件：[http](http://pastebin.com/zua4HgjR) ://pastebin.com/zua4HgjR 从我的网站我这样称呼它：var D = new $.ui.mail({}); 基本上它有效。

是否有更好的方法在单击按钮时调用 doSend？

问题是如何从函数处理程序访问对象实例？"this" 返回整个 html 窗口。尝试使用 $.proxy 不起作用：单击：$.proxy(this.doSend, this);

谢谢指教！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T01:15:47.793

不幸的是，如果您使用`options`成员设置按钮，您将无法引用调用所需的元素`doSend`。我能够想出的一种解决方法是`_create`在您有适当参考的方法中分配处理程序。

```
_create: function() {
    this.options.buttons = [
        {
            text: 'Send',
            click: function(self) {
                return function() {
                    $(self.element).mail('doSend');
                };
            }(this)
        },
        {
            text: 'Cancel',
            click: function() { $(this).remove() }
        }
    ];                     
    this._super(arguments);
} 
```

**现场示例**- [http://jsfiddle.net/hhscm/2/](http://jsfiddle.net/hhscm/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T09:33:58.940

这个周末我终于完成了我的插件：[http ://agrimarket-blacksea.com/jsc/jquery-mail.js](http://agrimarket-blacksea.com/jsc/jquery-mail.js)

我决定以经典的方式调用“类函数”：`$(this).mail('doSend')`，直到我找到更好的东西。

谢谢！

# visual-c++ - vc++paint中如何清除之前绘制的所有图形？

> ID：10829267
> 
> 赞同：2
> 
> 时间：2012-05-31T07:34:49.850
> 
> 标签：visual-c++, graphics, picturebox

我使用绘画事件在图片框中绘制了矩形。当我单击清除按钮时。我希望图形消失。每次鼠标移动时我都会调用绘画事件。我应该怎么办？

油漆事件中的代码：

```
Graphics^ g = e->Graphics;
float PenWidth = 2;
if(msdwnflag!=-1 && count%2==1)
{
    if(selecflag==0)
    {
    g->DrawRectangle( gcnew Pen( Color::Blue,PenWidth ), RcDraw);
}
else
{
    RcDraw.Width = finalMousePos.X- RcDraw.X;
    RcDraw.Height = finalMousePos.Y- RcDraw.Y;
    g->DrawRectangle( gcnew Pen( Color::Red,PenWidth ), RcDraw);
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T08:04:22.693

如果`pb`是您`PictureBox`则清除其图像以清除所有图形。此外，您可以使用变量 ( `buttonpressed`) 来检查它是真（按下按钮清除）还是假（否则）

```
 buttonpressed=1;
     pb->Image = nullptr;
     pb->Refresh(); 
```

如果未按下按钮，则在您的绘制方法中包括所有图形：

```
 if (buttonpressed != 1){
         // all your graphics code
     } 
```

如果您希望在按下按钮时重新显示图形，请更改`buttonpressed`值：

```
 buttonpressed=0;
    pb->Refresh(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T06:19:22.667

绘制透明颜色的图形。我终于做到了。不是 gud 设计，但可以工作:)

# android - 在屏幕锁定时保持 onPause 状态的活动？

> ID：10829269
> 
> 赞同：0
> 
> 时间：2012-05-31T07:34:53.287
> 
> 标签：android

当用户按下屏幕锁定当前正在运行的活动将进入 onDestroy 状态。如何防止这种情况？激活屏幕锁定后，我只需要将我的活动保持在 onPause 状态吗？

注意：对于正常活动，当我按下屏幕锁定按钮时，它只会进入 onPause 状态。但用于捕获视频的活动只会进入 onDestroy 状态

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T08:47:35.970

您可以使用 onRestoreInstanceState() 和 onSavedInstanceState() 保存您的实例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T07:53:41.040

您无法“选择”系统对您的活动所做的事情。如果系统决定销毁它，无论如何它都会调用'onDestroy'。只有在某些极端情况下，您才能告诉系统它*应*该做什么（例如，不要在方向更改时破坏）。如果你不想被杀，你应该获得一个[唤醒锁](http://developer.android.com/reference/android/os/PowerManager.WakeLock.html)。

# java - dwr 和 jquery ajax 的区别？

> ID：10829271
> 
> 赞同：10
> 
> 时间：2012-05-31T07:35:18.043
> 
> 标签：java, jquery, dwr

我想了解更多关于在 Java 中将 Ajax 与[DWR](http://directwebremoting.org/dwr/introduction/)和 Jquery Ajax 结合使用。与其他有什么优势吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-31T07:50:13.427

用最简单的术语来说，DWR 是一个将服务器端 Java 对象的方法暴露给 JavaScript 代码的引擎。有效地，使用 DWR，您可以从应用程序代码中消除 Ajax 请求-响应周期的所有机制。这意味着您的客户端代码永远不必直接处理 XMLHttpRequest 对象或服务器的响应。您无需编写对象序列化代码或使用第三方工具将您的对象转换为 XML。您甚至不需要编写 servlet 代码来将 Ajax 请求调解为对 Java 域对象的调用。

DWR 作为 servlet 部署在您的 Web 应用程序中。作为一个黑盒子，这个 servlet 执行两个主要角色：首先，对于每个公开的类，DWR 动态生成 JavaScript 以包含在您的 Web 页面中。生成的 JavaScript 包含代表 Java 类上相应方法的存根函数，并且还在幕后执行 XMLHttpRequests。这些请求被发送到 DWR servlet，它的第二个角色是将请求转换为对服务器端 Java 对象的方法调用，并在其 servlet 响应中将方法的返回值发送回客户端，并编码为 JavaScript。DWR 还提供有助于执行常见 UI 任务的 JavaScript 实用程序函数。

# jquery - jQuery - 销毁动画

> ID：10829273
> 
> 赞同：1
> 
> 时间：2012-05-31T07:35:39.800
> 
> 标签：jquery, jquery-animate, destroy

如何销毁同一元素上创建的动画？

例如：我有动画

```
$('#sortable').animate({
    paddingTop: 85
}, 100); 
```

在同样的行动中，我想摧毁它，因为我不再需要它了。就像是：

```
$('#sortable').animate('destroy'); 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T07:41:44.297

只需使用[stop()](http://api.jquery.com/stop/)

```
$('#sortable').stop(true);// first argument removes all animations in the queue 
```

# internet-explorer - 我是否应该考虑我的个人网站的兼容性？

> ID：10829278
> 
> 赞同：0
> 
> 时间：2012-05-31T07:36:06.723
> 
> 标签：internet-explorer, compatibility

在创建我的个人网站时，我希望结合 HTML5 和 CSS3 引入的许多令人惊叹的新功能，并真正尝试采用这些新技术并以我可以使用的任何方式使用它们。

请注意，我并不是想通过这个网站特别推销自己，它更多的是个人项目和探索。

我将努力掌握创建流畅、响应迅速、易于访问的设计的艺术，同时严格遵循 w3.org 的标准。这是我想在冒险中保持的一种“适当性”。

不幸的是，正如许多人所知，即使是最现代的浏览器也没有完全符合标准。

考虑到我对这个网站的意图，我应该考虑兼容性，还是直接运行 w3.org 标准（因为最终主流浏览器必须赶上）？

在我看来，我正试图沉迷于我们可以使用的更新和不久的未来技术。处理兼容性是完全相反的 - 不得不沮丧和破解过去的方式。

我是否应该考虑该网站的兼容性？你会？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T21:50:35.370

如果您想在网络行业找到一份工作，您的个人网站应该支持您的潜在雇主期望它支持的内容。如果您想根据您的个人网站在任何行业找到工作，您应该支持他们在工作中使用的任何浏览器。

否则，是的，只支持“现代”的。但是，至少要弄清楚哪些有效，哪些无效，并在那些无效的情况下显示一个很好的小消息。如果您只是重定向到至少允许不受支持的浏览器访问重要内容的纯文本内容，则可以加分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T07:53:28.457

我真的认为这取决于您和您的目标受众。我个人已经完全放弃了对 IE6 的支持。但就标准而言，我建议您坚持使用它们并确保您拥有有效的 HTML 标记和 CSS。

# java - 是否可以在用户代码中使用 Java Unsafe？

> ID：10829281
> 
> 赞同：3
> 
> 时间：2012-05-31T07:36:28.880
> 
> 标签：java, classloader

我正在阅读 java.util.concurrent 包中的代码，我发现 Unsafe 类（用于实现这些同步器）很有趣。我可能永远不会在任何实际代码中使用它，因为类名本身似乎不鼓励这样做，但出于好奇，我对这个类有 2 个问题。

1）。这个类的单例访问器是这样的：

```
 public static Unsafe getUnsafe() {
        Class cc = sun.reflect.Reflection.getCallerClass(2);
        if (cc.getClassLoader() != null)
            throw new SecurityException("Unsafe");
        return theUnsafe;
    } 
```

所以如果这个方法是从用户代码中调用的，它会抛出一个异常。如何解决这个问题？（可能通过引导类加载器加载我自己的类？这可能吗？）

2）。上面的代码假定`getClassLoader`将为由 boostrap 类加载器加载的类返回 null。但是 javadoc`Class#getClassLoader`说“某些实现可能使用 null 来表示引导类加载器。”，这意味着不能保证这个假设。对于确实违反此假设的实现，Unsafe（以及依赖它的各种类，例如 ReentrantLock）不会完全无法工作吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T07:41:15.690

> 如何解决这个问题？

您可以像这样访问该类（前提是安全管理器将允许更改可访问性）：

```
public static Unsafe getUnsafe() {
    try {
            Field f = Unsafe.class.getDeclaredField("theUnsafe");
            f.setAccessible(true);
            return (Unsafe)f.get(null);
    } catch (Exception e) { /* ... */ }
} 
```

> 对于确实违反此假设的实现， Unsafe ... 不会根本无法工作吗？

类的细节`Unsafe`也是特定于实现的。没有理由期望这个特殊`Unsafe`的能够与类加载器子系统的任何其他实现一起使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-14T14:57:17.987

另一种方法是使用 jvm 选项**-Xbootclasspath/a:** <*目录和 zip/jar 文件由`;`*>分隔

您可以创建一个简单的类，该类将调用`Unsafe.getUnsafe()`并将其附加到 bootclasspath。

```
public class UnsafeAccessor {

    public static Unsafe getUnsafe()  {
        return Unsafe.getUnsafe();
    }

} 
```

命令行：

```
java -Xbootclasspath/a:&lt;path_to&gt;/unsafeaccessor.jar -cp 
```

通过这种方式，您将直接将此类添加到 System Bootstrap Classloader。JVM 会将类视为 JDK 的一部分，您可以在代码中调用 UnsafeAccessor.getUnsafe() 而不是 Unsafe.getUnsafe()：

```
Unsafe unsafe = UnsafeAccessor.getUnsafe(); 
```

# sql - 如何根据数据类型显示空间

> ID：10829289
> 
> 赞同：0
> 
> 时间：2012-05-31T07:37:18.943
> 
> 标签：sql, oracle, stored-procedures, plsql, oracle10g

我已经编写了将数据复制到 txt 文件中的程序，下面给出了程序

```
declare
empsfile utl_file.file_type;
cursor empscur is
select * from newemp;
begin
empsfile := utl_file.fopen('DIPRJDIR','EMPS.TXT','W');
for rec in empscur
loop
utl_file.put_line(empsfile,rec.EMPNO||rec.ENAME||rec.JOB||rec.MGR||rec.HIREDATE||rec.SAL||rec.COMM||rec.DEPTNO);
end loop;
UTL_FILE.FCLOSE(empsfile );
EXCEPTION
 WHEN OTHERS THEN
   DBMS_OUTPUT.PUT_LINE( 'ERROR -->' ||  SQLERRM);
END;
/ 
```

上述程序的输出是

```
7839KING      PRESIDENT017-NOV-815000010
7698BLAKE     MANAGER  783901-MAY-812850.5.530
7782CLARK     MANAGER  783909-JUN-812450010
7566JONES     MANAGER  783902-APR-812975020
7654MARTIN    SALESMAN 769828-SEP-811250140030
7499ALLEN     SALESMAN 769820-FEB-81160030030
7844TURNER    SALESMAN 769808-SEP-811500030
7900JAMES     CLERK    769803-DEC-81950030
7521WARD      SALESMAN 769822-FEB-81125050030
7902FORD      ANALYST  756603-DEC-813000020
7369SMITH     CLERK    790217-DEC-80800020
7788SCOTT     ANALYST  756609-DEC-823000020
7876ADAMS     CLERK    778812-JAN-831100020
7934MILLER    CLERK    778223-JAN-821300010 
```

现在我的问题是我想根据上述字段的数据类型显示空间，例如假设 ENAME VARCHAR2(10) 比如果数据中的名称是 6 个字段比我必须显示 4 个空格请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T08:00:06.903

LPAD 功能可以帮助您吗？

```
utl_file.put_line(empsfile,rec.EMPNO||LPAD(rec.ENAME,10,' ')||rec.JOB||rec.MGR||rec.HIREDATE||rec.SAL||rec.COMM||rec.DEPTNO); 
```

# php - 从另一个 Sql 条目查看/编辑 Sql 条目

> ID：10829290
> 
> 赞同：0
> 
> 时间：2012-05-31T07:37:20.460
> 
> 标签：php, sql

我有一个问题可能听起来有点混乱，但我会尽力解释我的问题。

我的 sql 数据库中有 2 个表：表 1 称为事件，表 2 称为结果

事件表包含有关过去计算机游戏比赛的条目

```
eg. EventID   EventName  EventDate  Location 
      1       GG vs AU    04/08     Game room 1 
```

结果表包含几乎相同的条目..但该单个条目的更多详细信息

```
eg.  EventID   MemberID       Score        Ranking 
       1         02        7(victory):5      1st 
```

基本上，我将进入“事件”php 文件，然后我会看到条目。当我按下同一行中的任何条目时（例如 1、GGvsAU、04/08、Gameroom1），它会将我链接到结果表，这将为我提供有关该匹配的更深入的信息。在该示例中，eventID 为 1，因此当我按下同一行中的任何条目时，它会将我链接到 results.php?EventID=1

事件 php 文件运行良好，所以一切都很好.. 但是一旦我按下条目，它就会将我链接到结果 php 文件。

我现在遇到的问题是Results php文件。当我按下 Events.php 中的条目时，它会将我链接到 results.php?EventID=1，但它会显示数据库中的所有条目。我只想要 EventID1 的信息。

此外，是否可以根据下面的代码“隐藏”EventID 和“MemberID”？

事件.php

```
<?
        $pdo = new PDO('mysql:host=localhost;dbname=clubresults', 'root', '12345678');
    #Set Error Mode to ERRMODE_EXCEPTION.
    $pdo->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);  

$query = $pdo->query('SELECT EventID, EventName, EventDate, Location from events');
$rowset = array();

if ($query) {
  while ($row = $query->fetch(PDO::FETCH_ASSOC)) {
    // Build array of rows
    $rowset[] = $row;
  }    

  // Output header first
  $headrow = $rowset[0];
  print("<table border=\"1\">\n<tr>\n");
  // Use $rowset[0] to write the table heading
  foreach ($headrow as $col => $val) {
    printf("<th>%s</th>\n", $col);
  }
  print("</tr>");

  // Then output table rows.
  // Outer loop iterates over row
  foreach ($rowset as $row) {
     print("<tr>");
     // Inner loop iterates over columns using $col => $val
     foreach ($row as $col => $val) {
        // We don't know your column names, but substitute the first column (the ID) for FIRSTCOL here
        printf("<td><a href=\"listresults.php?EventID=%s\">%s</a></td>\n", $row['EventID'],$val);
     }
     print("</tr>");
  }
}
print("</table>");
?> 
```

Results.php（我有问题的那个）

```
 <?
 #Get the event id from $_GET
    $int_event_id = $_GET["EventID"];
    if((int)$int_event_id)
    {
        $pdo = new PDO('mysql:host=localhost;dbname=clubresults', 'root', '12345678');
    #Set Error Mode to ERRMODE_EXCEPTION.
    $pdo->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);  
  $query = $pdo->query('SELECT * from results WHERE EventID ='$int_event_id' ORDER By EventID ASC');
}
    $rowset = array();

if ($query) {
  while ($row = $query->fetch(PDO::FETCH_ASSOC)) {
    // Build array of rows
    $rowset[] = $row;
  }    

  // Output header first
  $headrow = $rowset[0];
  print("<table border=\"1\">\n<tr>\n");
  // Use $rowset[0] to write the table heading
  foreach ($headrow as $col => $val) {
    printf("<th>%s</th>\n", $col);
  }
  print("</tr>");

  // Then output table rows.
  // Outer loop iterates over row
  foreach ($rowset as $row) {
     print("<tr>");
     // Inner loop iterates over columns using $col => $val
     foreach ($row as $col => $val) {
        // We don't know your column names, but substitute the first column (the ID) for FIRSTCOL here
        printf("<td><a href=\"index.php?ID=%s\">%s</a></td>\n", $row['EventID'],$val);
     }
     print("</tr>");
  }
}
print("</table>"); 
```

我真的很感谢任何可以帮助我解决这个问题的人！非常感谢！

最后修改与逼真的解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T08:14:57.240

干得好。在“Results.php”中，您需要在查询中添加 where 子句以仅显示特定事件 ID 的数据。所以检查我下面的代码。

```
<?
    #从$_GET获取事件id
    $int_event_id = $_GET["EventID"];
    if((int)$int_event_id)
    {
       $pdo = new PDO('mysql:host=localhost;dbname=clubresults', 'root', '12345678');
       #将错误模式设置为 ERRMODE_EXCEPTION。
       $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);  

```
 $query = $pdo->query("SELECT * from results WHERE EventID ='$int_event_id' ORDER By EventID ASC");
} 
```

?>

```

此外，您正在“events.php”中与“listresults.php”链接，不确定它是否是错字。它应该链接到“Results.php”对吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T09:11:52.947

为了隐藏 ListResults.php 中的 EventID 和 MemberID 列，您可以简单地将它们排除在选择查询之外。

因此，不要查询所有列 (*)：

```
SELECT * from results 
```

像这样查询特定列：

```
SELECT Score, Ranking FROM results 
```

就您而言，我怀疑您最终会想要成员名称，因此请尝试以下操作：

```
SELECT Member.Name AS Name, Result.Score AS Score, Result.Ranking AS Ranking
FROM results
INNER JOIN members
ON results.MemberID = members.MemberID
WHERE results.EventID = '$int_event_id' 
```

这样做是从成员表中获取成员名称，其中 MemberID 与结果匹配。

# php - 在 echo 中显示所选选项的结果（PHP 形式）

> ID：10829300
> 
> 赞同：1
> 
> 时间：2012-05-31T07:38:32.313
> 
> 标签：php, javascript, forms, echo

我有一个表格，我用它来从一系列单选按钮中进行选择。

（说明：表格作为一系列按钮使用，通过使用 onClick 命令，例如：

```
...
        <td onClick="answer7()" background="images/button-bg7.png" width="100"><div align="center"><span class="style4">Activities</span></div></td>
          <td onClick="answer8()" background="images/button-bg8.png" width="100"><p align="center" class="style2">Suggestions/ Ideas</p>          </td>
          <td onClick="answer9()" background="images/button-bg9.png" width="100"><div align="center"><span class="style2">Repairs</span></div></td>
... 
```

)

这从一系列隐藏字段中选择，本质上是隐藏的单选按钮（例如：

```
 <input type="hidden" name="RadioGroup1" value="Activities" id="RadioGroup1_6" />
Activities</label>
        <br />
        <label>
        <input type="hidden" name="RadioGroup1" value="Suggestions" id="RadioGroup1_7" />
Suggestions</label>
        <br />
        <label>
        <input type="hidden" name="RadioGroup1" value="Repairs" id="RadioGroup1_8" />
Repairs</label> 
```

)

这已经过测试并且运行良好 - 表中的按钮确实可以从隐藏的单选字段中选择正确的选项。

现在，我想在表格下方构建一个句子，告诉他们他们选择了哪个，例如“请继续下面的*选择*查询：”

我想我需要使用 Javascript 或 jQuery，但不知道如何构建它。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T07:48:42.223

作为第一个评论，如果您为所有这些元素创建一个 onClick 处理程序会更简单。单击时获取 td 的 id 属性（当然，您必须设置），那么您将不需要隐藏字段，同时您可以选择用户做出的选择。像这样的东西：

```
<table>
    <tr>
        <td class="myClick" id="Activities"> Press here </td>
    </tr>
    <tr>
        <td class="myClick" id="Repairs"> Press here aswell </td>
    </tr>
</table> 
```

虽然它不一定是您更改的 id 属性，但您也可以使用其他东西。受 jQuery 启发：

```
$("td.myClick").click(function() { alert("You clicked: " + $(this).attr("id")); }); 
```

这应该是它的开始，您可以更改警报部分以使用 jQuery 编辑另一个 div（提示是使用 .html() 函数），它应该相当简单。请询问您是否需要更多信息。

# php - PHP exec（）不起作用

> ID：10829301
> 
> 赞同：0
> 
> 时间：2012-05-31T07:38:40.840
> 
> 标签：php, exec, executable

我需要执行下面的代码

```
E:\xampp\htdocs\acm\upload\P0005\A0020>pdflatex.exe demo 
```

在 php.ini 中。我使用了下面的编码

```
shell_exec("cmd pdflatex.exe upload/P0005/A0020/ demo"); 
```

但它不起作用..我如何在 php 中执行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T07:40:00.180

您需要包含完整路径：

```
shell_exec("cmd E:\\xampp\\htdocs\\acm\\upload\\P0005\\A0020\\pdflatex.exe E:\\xampp\\htdocs\\acm\\upload\\P0005\\A0020\\ demo"); 
```

或者

```
shell_exec("cmd E:\\xampp\\htdocs\\acm\\upload\\P0005\\A0020\\pdflatex.exe demo"); 
```

第二个示例与您问题中的第一个命令匹配-双反斜杠（`\\`）用于打印`\`字符-第一个是`\`转义第二个

# python - 在scrapy中写入单独的列而不是逗号分隔的csv文件

> ID：10829302
> 
> 赞同：0
> 
> 时间：2012-05-31T07:38:41.093
> 
> 标签：python, csv, scrapy

我正在使用scrapy并将从网页获取的数据写入CSV文件

我的`pipeline`代码：

```
def __init__(self):
    self.file_name = csv.writer(open('example.csv', 'wb'))
    self.file_name.writerow(['Title', 'Release Date','Director'])

def process_item(self, item, spider):
    self.file_name.writerow([item['Title'].encode('utf-8'),
                                item['Release Date'].encode('utf-8'),
                                item['Director'].encode('utf-8'),
                                ])
    return item 
```

我在 CSV 文件中的输出格式是：

```
Title,Release Date,Director
And Now For Something Completely Different,1971,Ian MacNaughton
Monty Python And The Holy Grail,1975,Terry Gilliam and Terry Jones
Monty Python's Life Of Brian,1979,Terry Jones
..... 
```

但是是否可以将`title`其值写入一列，`Release date`将其值写入下一列，`Director`并将其值写入下一列（因为 CSV 是逗号分隔值），格式如下所示。

```
 Title,                                 Release Date,            Director
And Now For Something Completely Different,      1971,              Ian MacNaughton
Monty Python And The Holy Grail,                 1975,     Terry Gilliam and Terry Jones
Monty Python's Life Of Brian,                    1979,              Terry Jones 
```

任何帮助，将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T07:50:19.030

TSV（制表符分隔值）可能会为您提供所需的内容，但当线条的长度非常不同时，它通常会变得难看。

您可以轻松编写一些代码来生成这样的表格。诀窍是您需要在输出之前拥有所有行才能计算列的宽度。

你可以在互联网上找到很多片段，[这是我以前使用的一个](http://ginstrom.com/scribbles/2007/09/04/pretty-printing-a-table-in-python/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T12:16:08.043

> **更新**——重构代码以便：
> 
> 1.  使用@madjar 建议的生成器函数和
> 2.  更适合 OP 提供的代码片段。

## 目标输出

我正在尝试使用[`texttable`](http://pypi.python.org/pypi/texttable). 它产生与问题中相同的输出。此输出可能会写入 csv 文件（记录将需要为适当的 csv 方言进行按摩，我找不到仍然使用`csv.writer`并仍然获得每个字段中的填充空格的方法。

```
 Title,                      Release Date,             Director            
And Now For Something Completely Different,       1971,              Ian MacNaughton        
Monty Python And The Holy Grail,                  1975,       Terry Gilliam and Terry Jones 
Monty Python's Life Of Brian,                     1979,                Terry Jones 
```

## 编码

这是生成上述结果所需的代码草图：

```
from texttable import Texttable

# ----------------------------------------------------------------
# Imagine data to be generated by Scrapy, for each record:
# a dictionary of three items. The first set ot functions
# generate the data for use in the texttable function

def process_item(item):
    # This massages each record in preparation for writing to csv
    item['Title'] = item['Title'].encode('utf-8') + ','
    item['Release Date'] = item['Release Date'].encode('utf-8') + ','
    item['Director'] = item['Director'].encode('utf-8')
    return item

def initialise_dataset():
    data = [{'Title' : 'Title',
         'Release Date' : 'Release Date',
         'Director' : 'Director'
         }, # first item holds the table header
            {'Title' : 'And Now For Something Completely Different',
         'Release Date' : '1971',
         'Director' : 'Ian MacNaughton'
         },
        {'Title' : 'Monty Python And The Holy Grail',
         'Release Date' : '1975',
         'Director' : 'Terry Gilliam and Terry Jones'
         },
        {'Title' : "Monty Python's Life Of Brian",
         'Release Date' : '1979',
         'Director' : 'Terry Jones'
         }
        ]

    data = [ process_item(item) for item in data ]
    return data

def records(data):
    for item in data:
        yield [item['Title'], item['Release Date'], item['Director'] ]

# this ends the data simulation part
# --------------------------------------------------------

def create_table(data):
    # Create the table
    table = Texttable(max_width=0)
    table.set_deco(Texttable.HEADER)
    table.set_cols_align(["l", "c", "c"])
    table.add_rows( records(data) )

    # split, remove the underlining below the header
    # and pull together again. Many ways of cleaning this...
    tt = table.draw().split('\n')
    del tt[1] # remove the line under the header
    tt = '\n'.join(tt)
    return tt

if __name__ == '__main__':
    data = initialise_dataset()
    table = create_table(data)
    print table 
```

# node.js - 创建 geddy 应用程序后，geddy 命令中断

> ID：10829307
> 
> 赞同：1
> 
> 时间：2012-05-31T07:39:17.553
> 
> 标签：node.js, geddy

我正在关注 geddy[教程](http://geddyjs.org/tutorial.html)。

我使用 npm 安装 geddy & jake，创建应用程序，cd 进入创建的文件夹，然后运行 ​​geddy 命令。但是在运行 geddy 命令时出现错误，这是我的完整输出：

```
martin@crunchbang:~/code$ npm install geddy jake -g
/usr/local/bin/jake -> /usr/local/lib/node_modules/jake/bin/cli.js
/usr/local/bin/geddy -> /usr/local/lib/node_modules/geddy/bin/cli.js
jake@0.2.33 /usr/local/lib/node_modules/jake 
geddy@0.4.1 /usr/local/lib/node_modules/geddy 
martin@crunchbang:~/code$ geddy app geddy_todo
Created app geddy_todo.
martin@crunchbang:~/code$ cd geddy_todo/
martin@crunchbang:~/code/geddy_todo$ geddy

node.js:201
    throw e; // process.nextTick error, or 'error' event on first tick
          ^
TypeError: Object #<Object> has no method 'addListener'
at [object Object].<anonymous>           (/usr/local/lib/node_modules/geddy/lib/cluster/master.js:25:11)
at /usr/local/lib/node_modules/geddy/bin/cli.js:109:9
at Object.<anonymous> (/usr/local/lib/node_modules/geddy/bin/cli.js:181:5)
at Module._compile (module.js:432:26)
at Object..js (module.js:450:10)
at Module.load (module.js:351:31)
at Function._load (module.js:310:12)
at Array.0 (module.js:470:10)
at EventEmitter._tickCallback (node.js:192:40)
martin@crunchbang:~/code/geddy_todo$ 
```

运行这些命令后，无论我在哪里运行，geddy 命令似乎都被破坏了，我得到以下信息：

```
martin@crunchbang:~$ geddy

node.js:201
    throw e; // process.nextTick error, or 'error' event on first tick
          ^
TypeError: Object #<Object> has no method 'addListener'
at [object Object].<anonymous> (/usr/local/lib/node_modules/geddy/lib/cluster/master.js:25:11)
at /usr/local/lib/node_modules/geddy/bin/cli.js:109:9
at Object.<anonymous> (/usr/local/lib/node_modules/geddy/bin/cli.js:181:5)
at Module._compile (module.js:432:26)
at Object..js (module.js:450:10)
at Module.load (module.js:351:31)
at Function._load (module.js:310:12)
at Array.0 (module.js:470:10)
at EventEmitter._tickCallback (node.js:192:40) 
```

当我运行时：

```
npm rm geddy jake 
```

我明白了

```
martin@crunchbang:~$ sudo npm rm geddy jake
npm WARN Not installed in /home/martin/node_modules geddy
npm WARN Not installed in /home/martin/node_modules jake 
```

我不确定接下来要尝试什么才能使其正常工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T19:08:34.543

听起来您没有安装最新版本的 node 和 npm。我不能肯定，但尝试卸载 node 和 npm 并从[http://nodejs.org](http://nodejs.org)重新安装最新版本。

您需要确保将 Geddy 和 Jake 安装为全局包。

```
npm install -g geddy jake 
```

# .net - 将项目从 .NET 3.5 迁移到 .NET 4.0：突然释放句柄失败

> ID：10829308
> 
> 赞同：3
> 
> 时间：2012-05-31T07:39:17.527
> 
> 标签：.net, frameworks

我刚刚将项目的目标框架从 .NET 3.5 更改为 .NET 4.0，以从新功能中受益。但是现在当我开始我的程序时，我得到：

> “BitmapHandle”类型的 SafeHandle 或 CriticalHandle 未能正确释放值为 0xB605123D 的句柄。这通常表明句柄通过其他方式被错误地释放（例如使用 DangerousGetHandle 提取句柄并直接关闭它或围绕它构建另一个 SafeHandle。）

但我什至不知道从哪里开始寻找原因我没有得到更多信息，在 3.5 上一切都很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-10-11T07:40:52.103

这是 WPF SplashScreen 类中的一个错误。在 .NET 4.6 BitmapHandle 中仍然存在一个 SafeHandle 类，它的[ReleaseHandle()](http://referencesource.microsoft.com/#WindowsBase/Shared/MS/Win32/NativeMethodsOther.cs,35a3e2b593f6d035)方法如下所示：

```
 protected override bool ReleaseHandle()
    {
        return UnsafeNativeMethods.DeleteObject(handle);
    } 
```

这是非常正确的，它确保 GDI 位图对象无论发生什么都被正确销毁。该错误存在于[SplashScreen.DestroyResources()](http://referencesource.microsoft.com/#WindowsBase/Base/System/Windows/SplashScreen.cs,57538949b88b042f)方法中，它帮助太大了：

```
 private void DestroyResources()
    {
        //...
        if (_hBitmap != null && !_hBitmap.IsClosed)
        {
            UnsafeNativeMethods.DeleteObject(_hBitmap.MakeHandleRef(null).Handle);
            _hBitmap.Close();
            _hBitmap = null;
        }
        //...
    } 
```

两个电话`DeleteObject`，太多了。调试器有一个 MDA（托管调试助手）来监视此类错误，它会看到 ReleaseHandle() 失败并介入。您通常不会看到这一点，因为（不明智地）MDA 默认情况下是关闭的。调试 > 异常 > 托管调试助手 > ReleaseHandleFailed。取消勾选它以停止接收通知。

像这样的错误非常讨厌，它们打开了处理回收攻击的大门。然而，它实际上可被利用的几率非常低，Close() 调用紧跟 DeleteObject() 调用之后，位图并不是特别危险 :) 技术上可能发生事故，您必须让另一个线程同时创建 GDI 对象时间，这在 WPF 应用程序中并不经常发生。

您可以在 connect.microsoft.com 上提交错误，指向此 Q+A 的链接就足够了。

# php - 如何使用 PHP 在 MySQL 数据库中插入图像？

> ID：10829313
> 
> 赞同：1
> 
> 时间：2012-05-31T07:39:36.163
> 
> 标签：php, mysql, image, file-upload

我正在使用这种形式：

```
<FORM action="testimage1.php" method="post">
                 <div style="font:bold 10px arial,serif;" >Product Name*</div>
                 <input type="text" name="myuserName" maxlength="50" /><br />
                  <div style="font:bold 10px arial,serif;" >Upload a photo</div>
                 <input name="uploadimage" type="file" /></br>
                 <div style="font:bold 10px arial,serif;">Product Description:</div> <input type="text" name="product" value=""></br>
                 <input id="submit" type="submit" value="submit" /><br />
                 </form> 
```

并在 test1.php

```
require_once("dbconnect.inc.php");  //for database connection                   
    $db_name="thinstrokes";                                     
     $tbl_name="product";
     $db_selected=mysql_select_db("$db_name")or die("cannot select DB");
    // Connect to server and select databse.
    // username and password sent from form 
    $myusername=$_POST['myusername']; 
    $myproduct=$_POST['product'];
    $filename=$_POST['uploadimage'];

$imgData = file_get_contents($filename);
    $size = getimagesize($filename);
    $sql = "INSERT INTO product
    (productname, image_id , image_type ,image, image_size, image_name,productdesc)
    VALUES
    ('$myusername','11', '{$size['mime']}', '{$imgData}', '{$size[3]}', 
     '{$_FILES['userfile']['name']}','$productdesc')";
    $result=mysql_query($sql) or die("error in uploading/*"); 
```

并得到错误是： -

*file_get_contents(DSC02945.JPG) [function.file-get-contents]：无法打开流：C:\xampp\htdocs\thinstrokes original site\testimage1.php 中没有这样的文件或目录在第 22 行*

*警告：getimagesize(DSC02945.JPG) [function.getimagesize]：无法打开流：C:\xampp\htdocs\thinstrokes original site\testimage1.php 中没有这样的文件或目录在第 23 行*

我该如何纠正它..???

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T07:42:09.133

您需要 enctype=multipart/form-data 在您的表单声明中。并通过 $_FILES 变量而不是 $_POST 变量访问文件。像：

```
<form action="testimage1.php" method="post" enctype="multipart/form-data">
   <input name="uploadimage" type="file" />
</form>

<?php
    $filename = $_FILES['uploadimage']['tmp_name'];   
?> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-06-22T23:38:56.563

```
$imgData = file_get_contents($filename);
$size = getimagesize($filename);
mysql_connect("localhost", "$username", "$password");
mysql_select_db ("$dbname");
$sql = sprintf("INSERT INTO testblob
    (image_type, image, image_size, image_name)
    VALUES
    ('%s', '%s', '%d', '%s')",
    mysql_real_escape_string($size['mime']),
    mysql_real_escape_string($imgData),
    $size[3],
    mysql_real_escape_string($_FILES['userfile']['name'])
    );
mysql_query($sql); 
```

# vba - 使用 VB 或 .bat 从打开的资源管理器窗口复制数据

> ID：10829320
> 
> 赞同：0
> 
> 时间：2012-05-31T07:39:55.823
> 
> 标签：vba, batch-file, copy

我想问您是否可以（以及如何）将所有数据从打开的资源管理器窗口（名称或路径未知）自动复制到另一个文件夹？我认为 .bat 无法做到这一点，但 VB 可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T09:22:38.757

这是一个简单的 VBA 示例，我在 Internet Explorer 中打开一个网页，复制所有文本，然后将其放在一个单元格中。你的问题不是很清楚，所以我不知道这是否解决了你想要做的事情，但它可能会有所帮助。

**编辑**重新阅读您的问题后，我认为我将 Explorer 与 Internet Explorer 混淆了......所以这可能并不相关。如果是这样，我会删除这个。

```
Dim ex As InternetExplorer
Dim hd As HTMLDocument
Dim s As String

Set ex = New InternetExplorer

With ex
    .Navigate "http://donttrack.us/"
    .Visible = 1
    Set hd = .Document
    s = hd.body.innerText
    Range("A1") = s
End With 
```

# jsp - 如何在jsp的include中添加scriptlet？

> ID：10829328
> 
> 赞同：0
> 
> 时间：2012-05-31T07:40:30.047
> 
> 标签：jsp

我们如何在 include 中添加 scriplet？

例如：

```
<@include file="../../../sample/Includes/util.jsp"> 
```

现在我想在此添加上下文路径：

```
request.getContextPath()

<@include file="request.getContextPath()/sample/Includes/util.jsp"> 
```

但我遇到了一些错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T08:04:12.947

静态包含总是相对的。

*   如果相对 URL 以 / 开头，则路径是相对于 JSP 应用程序的上下文的，它是一个 javax.servlet.ServletContext 对象，该对象又存储在应用程序对象中。
*   如果相对 URL 以目录或文件名开头，则路径是相对于 JSP 文件的

包含文件的路径名，始终是相对 URL。简单地说，相对 URL 只是 URL 的路径段，没有协议、端口或域名，如下所示：

*   “错误.jsp”
*   “/模板/在线商店.html”
*   “/beans/calendar.jsp”

[资源](http://java.sun.com/products/jsp/tags/11/syntaxref11.fm6.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T07:57:41.107

包含是上下文相关的，所以你应该只在一个正斜杠前面加上它。

# sencha-touch-2 - 将“禁用”配置设置为自定义 Ext.field.Text 时出错

> ID：10829332
> 
> 赞同：0
> 
> 时间：2012-05-31T07:40:56.700
> 
> 标签：sencha-touch-2

我有一个自定义文本框，它给了我一个文本框，旁边的文本字段中有一个按钮。（运行代码你会明白我的意思）。唯一的问题是，如果我将禁用状态设置为 false，我会收到一条错误消息：
`Uncaught TypeError: Object [object Object] has no method 'getValue'`
但如果我将其设置为 true，一切都很好。

这是我的代码：

```
 var disabled = false;

    var _oInput = Ext.create("Ext.field.Text", {
        flex: 8,
        labelWidth:0,
        labelAlign: "right",
        value: self.psValue,

    });

    var _oSenchaObject = Ext.create("Ext.field.Text",{
        label: "test",
        disabled: disabled,  //This gives me the error
        component: {
          xtype: 'container', 
          layout: 'hbox', 
          items: [
              _oInput, 
              {
                xtype: 'button', 
                flex: 1, 
                text: '...',
                //disabled: disabled,
              }
          ]
        },
    });

    var formPanelComment = Ext.create('Ext.form.Panel', {
        title:"Comments",
        items: [{
            xtype: 'fieldset',
            title: "Comments",
            items: [
                _oSenchaObject
            ]
        }]
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T08:22:28.520

好问题。:)

这是因为在您定义“自定义” `textfield`（包含带有内部按钮的普通文本字段）时发生冲突。

看看你的代码片段，给你一个错误的行是：

```
var _oSenchaObject = Ext.create("Ext.field.Text",{
        ...
        disabled: disabled,  //This gives me the error
        component: {
          ...
        },
    }); 
```

在这里，`disabled`config 应用于子组件（在`component`config 中定义），但 Sencha Touch 不知道如何正确禁用您的文本字段，禁用您的内部容器（其中包含另一个字段和按钮）。我想这类似于错误或框架限制。

因此，解决方案只是`disabled`为您的每个单身孩子设置配置。在上面的示例中，只需将该行移至`_oInput`'s config.

希望能帮助到你。

# mysql - 如果我们不关闭mysql node js模块中的mysql连接有什么问题吗

> ID：10829333
> 
> 赞同：5
> 
> 时间：2012-05-31T07:40:57.843
> 
> 标签：mysql, node.js, node-mysql, node-modules

如果我们在 node js 中不关闭或结束 mysql 连接，是否影响功能。

我正在这样做

```
var mysql      = require('mysql');
var connection = mysql.createConnection(...);

connection.query('SELECT 1', function(err, rows) {
  // connected! (unless `err` is set)
}); 
```

我的代码中的任何地方都没有结束 mysql 连接。我的问题是是否有必要关闭 mysql 连接。如果我们不关闭 mysql 连接，我将来会面临任何其他问题。

请帮助我是nodejs的新手

**EDIT1** 我不会遇到任何问题，如无法连接、打开的连接太多等，是否意味着任何与资源相关的问题？对。

**编辑2**

如果我们不手动或使用 end 函数结束它，哪个即时 mysql 连接将关闭？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T09:09:09.723

您*应该*关闭连接。

您执行此操作的时间点取决于您的程序对该连接执行的操作。

如果程序寿命很长并且只需要一个连接但连续使用该连接，那么您可以只打开该连接，但您应该准备好在需要时重新打开连接 - 例如，如果服务器重新启动。

如果程序只打开一个连接，做一些事情，然后一段时间不使用连接，你应该在不使用连接时关闭连接。

如果程序是短暂的，即它建立一个连接，做一些事情，然后退出，你可以在不关闭连接的情况下离开，因为当你的程序退出时它会自动关闭。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T15:59:18.563

实际上，你会遇到 MySQL 中的这样一个问题：

> “[host] 由于许多连接错误而被阻止；使用 'mysqladmin flush-hosts 解除阻止”

因为 MySQL 将开始将那些失败的断开连接计为“连接错误”。然后，您的数据库将一直无法使用，直到您在 MySQL 服务器上执行 FLUSH HOSTS。事实上，我知道这一点，它发生在我们的 NodeJS 项目中。

`connection.end()`在使用或的任何输出或渲染语句之前编写一些代码以显式关闭数据库连接`connection.destroy()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T07:42:25.650

不，你不需要关闭它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-25T07:54:53.937

如果你的问题是“当我告诉服务器我正在关闭连接时，mysql 端是否有任何特定的清理”，那么答案是“不，如果你只是退出客户端进程或关闭套接字，它与调用 connection.end( )"

# asp.net - LDAP 用户属性请求返回异常结果

> ID：10829334
> 
> 赞同：2
> 
> 时间：2012-05-31T07:41:00.723
> 
> 标签：asp.net, vb.net, ldap

在我验证用户存在后，我正在努力使用 LDAP 从 AD 返回用户详细信息。我正在使用一个简单的身份验证方法，如下所示：

```
Function AuthenticateUser(path As String, user As String, pass As String) As Boolean
    Dim de As New DirectoryEntry(path, user, pass, AuthenticationTypes.Secure)
    Try
        Dim ds As DirectorySearcher = New DirectorySearcher(de)
        Dim result As SearchResult = ds.FindOne()

        If result Is Nothing Then Return False

'>>DEBUG OUTPUTS ONLY:
        displayName.Text = result.GetDirectoryEntry().Properties.Item("distinguishedName").Value
        displayName.Text += result.GetDirectoryEntry().Properties("name").Value

        Return True
    Catch
        Return False
    End Try
End Function 
```

问题是“distinguishedName”返回“DC=our-domain,DC=co,DC=uk”，而“name”只返回“our-domain”，而不是刚刚被认证的用户名

注意：displayName.text 输出纯粹用于调试目的

我尝试了各种请求组合，但似乎没有返回用户详细信息。

ETA：致安全警察：这一切都在 https 连接中，我不会以纯文本形式发送密码！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T10:03:54.770

```
1\. Dim de As New DirectoryEntry(path, user, pass, AuthenticationTypes.Secure)
2\. Try
3\.    Dim ds As DirectorySearcher = New DirectorySearcher(de)
4\.    Dim result As SearchResult = ds.FindOne() 
```

第 1 行基本上是创建一个`DirectoryEntry`元素，它指的是`path`. `username`和`password`参数服务的唯一目的是[*授权*](http://msdn.microsoft.com/en-us/library/wh2h7eed.aspx)访问`path`所指的任何实体。

由于您目前拥有东西，因此您绑定到域，而不是用户（但您*有权*以该用户的身份连接到域）。

然后，您在第 3 行中创建一个[`DirectorySearcher`](http://msdn.microsoft.com/en-us/library/system.directoryservices.directorysearcher.aspx). 但是您使用的构造函数只是说将搜索根植于`de`（正如我们已经建立的那样，它只是域）。您还没有做任何事情来搜索域内的特定用户 - 他们可能正在连接以执行几乎任何可以想象的搜索。

您可能想要做的是查看[接受过滤器参数](http://msdn.microsoft.com/en-us/library/3k4hcz9f.aspx)的 DirectorySearcher 的重载- 并提供一个过滤器参数，将搜索限制为仅限用户。我不知道您的`user`参数是什么形式 - 如果是，比如说，以用户主体名称 ( `user@domain`) 的形式，您可以尝试指定一个过滤器：

```
Dim ds As DirectorySearcher = New DirectorySearcher(de,"(userPrincipalName=" + user + ")") 
```

如果您只有一个用户名，则需要搜索`sAMAccountName`. 如果您有一个旧式域名 ( `domain\user`)，那么通常您希望将其拆分为`\`，丢弃该域名，然后仍然在 上搜索`sAMAccountName`。

[`Filter`在属性文档](http://msdn.microsoft.com/en-us/library/system.directoryservices.directorysearcher.filter.aspx)中可以找到一些（但不是太多！）关于构造过滤器参数的帮助。

# c# - How to work with files for Mobile Device

> ID：10829336
> 
> 赞同：0
> 
> 时间：2012-05-31T07:41:09.043
> 
> 标签：c#, file-io, windows-mobile-6.5

I have to develop application for mobile device, using Visual Studio 2008\. Application have to read files and write to them.

Problem I have that I don't know where are files when I run application on mobile device or even on device emulator in VS. If I run application on PC, everything works well.

Can you give me some point what to do and where to look at?

Thank you in advance!

**I didn't mention, it's for Windows Mobile 6.5**

P.S. tried to work with StringBuilder like:

```
StringBuilder sb = new StringBuilder();
using (StreamReader sr = new StreamReader("TestFile.txt")) 
{
    String line;
    // Read and display lines from the file until the end of 
    // the file is reached.
    while ((line = sr.ReadLine()) != null) 
    {
        sb.AppendLine(line);
    }
}
string allines = sb.ToString(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T07:46:12.533

手机应用程序，**出于安全原因，应用了****沙盒**的概念，这意味着您的应用程序无权访问系统上的任何文件，如果您想使用沙盒区域来操作文件或其他类型的数据，您需要使用他们的 API 来访问它。

在 Windows Phone 7 世界中，这被称为[`IsolateStorage`](http://www.windowsphonegeek.com/tips/all-about-wp7-isolated-storage--intro-to-isolated-storage)

这是一个关于如何将它与文件一起使用[的好例子。](http://3water.wordpress.com/2010/08/07/isolated-storage-on-wp7-ii/)

* * *

糟糕的是，我没有阅读标签`windows-mobile-6.5`，但我会让我的 WP7 在上面回答并在下面回答你：

Windows Mobile 没有驱动器，因此您不能使用驱动器号，并且对于该位置，这通常是您的应用程序位置的根目录（您可以从资源管理器中找到它），但通常这是我们所做的：

```
string path = "\\test.txt";//file Loc: *start->file explorer->text.txt*
if (!File.Exists(path))
{
    using (StreamWriter sw = File.CreateText(path))
    {
        sw.WriteLine("Hello");
        sw.WriteLine("And");
        sw.WriteLine("Welcome");
    }
}
using (StreamReader sr = File.OpenText(path))
{
    string s = "";
    label1.Text = "";
    while ((s = sr.ReadLine()) != null)
    {
        label1.Text += s;
    }
} 
```

试试看……

# cross-browser - 跨浏览器相对链接

> ID：10829340
> 
> 赞同：0
> 
> 时间：2012-05-31T07:41:19.290
> 
> 标签：cross-browser, href

我有一个相对链接，例如`<a href='file.ext'>text</a>`

它对我来说很好，但最近我们一直在上面记录 404。似乎某个版本的 FF3.5 将其用作相对于基域的链接，而不是当前目录（这是预期的）。

有人可以确认这是浏览器兼容性问题吗？使用其他浏览器以及其他版本的 FF 进行测试似乎工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T15:42:39.837

3.5而不是3.6？我不会担心的。甚至可能不是真正的浏览器。3.5 应该自动更新到 3.6。（现在 3.6 版不断催促用户升级到 12 版。）

尽管如此，重要的是要知道旧版本的 FF 参考文件略有不同。他们引用与页面相关的文件。你确定404总是在hrefs中吗？它们可以通过 CSS 或其他方法加载吗？这或许可以解释。

这里有一些信息，您会发现问题已随着 FF 的较新版本而改变：[Reference app relative virtual paths in .css file](https://stackoverflow.com/questions/89418/reference-app-relative-virtual-paths-in-css-file)

您也可以尝试使用双引号。您可以下载 FF 的旧版本（例如 3.6）并自行测试。[http://www.mozilla.org/en-US/firefox/all-older.html](http://www.mozilla.org/en-US/firefox/all-older.html)

# python - 如何取消设置由 python gobject.timeout_add 设置的计时器？线程？

> ID：10829341
> 
> 赞同：4
> 
> 时间：2012-05-31T07:41:31.230
> 
> 标签：python, multithreading, timer, pygobject

我想在一个线程中设置计时器并在我想取消设置由 gobject.timeout_add 设置的计时器时终止该线程，这是一个好方法吗？

基本上我想每 180 秒运行一次函数，但我希望能够随时停止它（从另一个函数调用）。如何正确实现这一目标？

我读过杀死线程是不好的！像这样的简单任务有多糟糕？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-20T14:34:45.257

根据[文档](http://www.pygtk.org/pygtk2reference/gobject-functions.html#function-gobject--timeout-add)，当您调用`gobject.timeout_add`它时，它会返回一个`int`对于该超时源来说是唯一的。[然后在文档](http://www.pygtk.org/pygtk2reference/gobject-functions.html#function-gobject--source-remove)的更下方，您会看到一个名为的函数，该函数`gobject.source_remove`将一个作为参数的函数`int`为您删除事件源，而不必弄乱线程等。例子：

```
integer_id = gobject.timeout_add( 180000, callback_func)
#And then somewhere else in your code...
gobject.source_remove(integer_id) #This will stop the timeout_add from occurring! 
```

希望有帮助！

# silverlight - Are there any docs on the sllauncher.exe command line options?

> ID：10829344
> 
> 赞同：6
> 
> 时间：2012-05-31T07:41:36.210
> 
> 标签：silverlight, silverlight-oob

The sllauncher.exe has the following not very helpful usage text:

```
Usage: SLLauncher.exe [app_id] [debug] [/install:<file path to XAP>]
  [/emulate:<file path to XAP>] [/overwrite] /origin:<original app uri>
  [/uninstall] [/shortcut:<desktop|startmenu|desktop+startmenu|none>] [/pid] 
```

I'm specifically interested in what the `/pid` switch does. I can't seem to find a link fully documenting sllauncher's command-line switches.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-10-08T01:34:28.523

我意识到这已经很晚了，但我最近也有同样的问题。我能找到的最好的文档是微软的[Tim Heuer在](https://developer.microsoft.com/en-us/advocates/tim-heuer)[没有浏览器的情况下安装 Silverlight 应用程序的帖子：](https://timheuer.com/blog/archive/2010/03/25/using-sllauncher-for-silent-install-silverlight-application.aspx)

> /install:"path-toXAP-File" - 这是第一个并指向您要安装的 XAP 文件。这可能位于网络共享、CD 或安装程序中。这是必需的。
> 
> /origin:"URI-to-origin" - 这是 XAP 的“起源”并且是必需的。即使您可能没有使用自动更新功能等，您也必须设置它。实际上，我建议您要聪明一点，并将 XAP 也放在真实的 URI 端点上，这样您的来源实际上是真实的。
> 
> /shortcut:desktop+startmenu - 虽然这是可选的，但实际上不包括至少一个似乎很愚蠢 - 否则您的用户将很难启动您的应用程序！您可以使用：桌面、开始菜单或桌面+开始菜单（我的推荐）。
> 
> /overwrite - 此选项确认您正在安装的 XAP 将覆盖当前存在的任何现有版本。这是可选的，但同样，我认为你应该使用它。

在该部分下方，他演示`/emulate:"path-toXAP-File"`了一种指定要启动的先前安装的 XAP 的方法（由 匹配`/origin`）。

抱歉，我也找不到关于`/pid`开关的任何信息。

# c# - 打开和编辑 Access 数据库的 C# Win 表单

> ID：10829347
> 
> 赞同：2
> 
> 时间：2012-05-31T07:41:50.683
> 
> 标签：c#, ms-access

我正在尝试学习将 C# 与 Microsoft Access 文件一起使用。

我想创建一个打开 .mdb 文件、查看表并对其进行编辑并再次保存的 C# win Form App。

我已经搜索了两天的示例，我发现的唯一示例是 2001 -2003 年编写的应用程序。

谁能指导我一个很好的例子或教程？

我使用 Visual Studio 2010

我会很感激的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T08:19:51.623

这是一个很好的例子：[Access Database Editor in C#](http://www.codeproject.com/Articles/1909/Access-Database-Editor-in-C)

您可以在 stackoverflow.com 上参考[使用代码连接访问数据库](https://stackoverflow.com/questions/4995333/connecting-to-access-database-using-code)，那里有很多示例

# eclipse - Newbie: Web.xml Eclipse. xsi:schemaLocation & xmlns:web

> ID：10829350
> 
> 赞同：0
> 
> 时间：2012-05-31T07:41:59.797
> 
> 标签：eclipse, jakarta-ee, java-ee-6

2.5 xsd and 3.0 xsd. Why there are 2 xsd?

```
Project Spec:
    Server info: Apache Tomcat/7.0.27
     Servlet version: 3.0
     JSP version: 2.1
     Java version: 1.6.0_32

<?xml version="1.0" encoding="UTF-8"?>
<web-app 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xmlns="http://java.sun.com/xml/ns/javaee" 
xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" 
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" 
id="WebApp_ID" version="3.0">
  <display-name>MyFirstApp</display-name>
  <welcome-file-list>
    <welcome-file>index.html</welcome-file>
    <welcome-file>index.htm</welcome-file>
    <welcome-file>index.jsp</welcome-file>
    <welcome-file>default.html</welcome-file>
    <welcome-file>default.htm</welcome-file>
    <welcome-file>default.jsp</welcome-file>
  </welcome-file-list>
</web-app> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T07:49:02.917

因为您的 Web.xml 的自动生成器（您使用？生成此代码？）为您的 xmlns:web 和您的 xsi:schemaLocation 选择了最后一个更好的版本。

我认为在 web.xml 的 2 个元素上有不同的 xsd 版本不是问题。如果您有问题，请转到 2.5 版本。

我看到你正在使用 JSP，也许看看 JSF2.0 + Primefaces 3.2 更好？

# iphone - using NSMutableArray to change subviews

> ID：10829355
> 
> 赞同：0
> 
> 时间：2012-05-31T07:42:12.553
> 
> 标签：iphone, ios, nsmutablearray, uiswipegesturerecognizer

I have creates an array of three viewControllers which I would like to swipe between. and have animate across the screen.

So far I have created the array of views, have gesture control and am loading the first view of the array to the view in the viewDidLoad method of the viewController thats holding my animation stuff.

What I have done is added to viewController objects, (current, furutre) when the app first loads I put the first view of the array into the current viewController.. then when I swipe the view I Load the next view int he array into the future viewcontroller and perform an animation.. Then I do the same for the third animation.. however its breaking down, because I am not passing the second view to current then the third view to future before the last animation.. (hope this makes sense.)

Heres the code thats doing what I am doing so far..

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.

    self.title = @"Prototype";
    //Initalizse the swipe gestuer listener
    [self setupLeftSwipeGestureRecognizer];
    [self setupRightSwipeGestureRecognizer];

    //Initalize all of the swipe views
    DetailViewController *DVCA = [[DetailViewController alloc] initWithNibName:@"DetailViewController" bundle:[NSBundle mainBundle]];
    DetailViewControllerB *DVCB = [[DetailViewControllerB alloc] initWithNibName:@"DetailViewControllerB" bundle:[NSBundle mainBundle]];
    DetailViewControllerC *DVCC = [[DetailViewControllerC alloc] initWithNibName:@"DetailViewControllerC" bundle:[NSBundle mainBundle]];

    //Assinge swipeviews to viewArray
    viewArray = [NSArray arrayWithObjects:DVCA, DVCB, DVCC, nil];

    //Initalize viewcount so it can keep track of which viewController is in view
    viewCount = 0;

    // set detail View as first view 
    currentViewController = [viewArray objectAtIndex:viewCount];
    [self.view addSubview:currentViewController.view];

}

// Need to change this to work with viewArray
- (void)swipedScreen:(UISwipeGestureRecognizer*)gesture {

    //Left swipe
    if (gesture.direction == UISwipeGestureRecognizerDirectionLeft) {

        //stops swipes from returning any viewCount outside of viewArrays range
        if ((viewCount >= 0) || (viewCount >= 2)) {
            //Increment for next view
            viewCount += 1;

            futureViewController = [viewArray objectAtIndex:viewCount];
            [self.view addSubview:futureViewController.view];
            [futureViewController.view setFrame:CGRectMake(320, 0, self.view.frame.size.width, self.view.frame.size.height)];

            [UIView animateWithDuration:0.25 animations:^{
                [futureViewController.view setFrame:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];
                [currentViewController.view setFrame:CGRectMake(-320, 0, self.view.frame.size.width, self.view.frame.size.height)];
            }];

        }

    }
    //Right swipe -- still need to do this (go back through the view array.
    else if (gesture.direction == UISwipeGestureRecognizerDirectionRight){

        [UIView animateWithDuration:0.25 animations:^{
            [self.detailViewA.view setFrame:CGRectMake(0, 0, self.view.frame.size.width, self.view.frame.size.height)];
            [self.detailViewB.view setFrame:CGRectMake(320, 0, self.view.frame.size.width, self.view.frame.size.height)];
        }];

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T07:47:38.977

抱歉，您应该使用 UInavigationController 在视图控制器的视图之间切换。您仍然可以为帧设置动画，而不使用 uinavigation 控制器中包含的经典动画。您在导航控制器中推送和弹出视图控制器。在苹果文档中查找 UINavigationController ，如果您试图通过代码避免导航栏，则不需要在顶部放置导航栏。

# php - PHP - download file from other server and transmt same in parallel to user

> ID：10829363
> 
> 赞同：2
> 
> 时间：2012-05-31T07:42:53.230
> 
> 标签：php, web, download

I have a problem mentioned below:

There will be multiple servers like a.com, b.com, b1.com and so on. The user will always logon to a.com and request for a file which would be present on any of the b.com, b1.com etc server. All fiels are present on servers with names starting from "b".

The application will connect to b1.com and find the file. Now I want a way to download the file from b1.com without the user knowing that it is actually coming from b1.com. Is there a way that the file can be directly downloaded from b server to user desktop/pc? Or is there any way that while the file is being downloaded from "b" to "a", I can start the file transfer from "a" to "user"

I dont want to first downlaod the complete file from b to a and then a to user as it will double up the transfer time which will impact performance when file is large.

Any solutions in mind for this?? I am using PHP on server side. Any other solution is also welcome.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T07:49:22.650

使用[fsockopen](http://php.net/manual/en/function.fsockopen.php)或[`fopen`](http://php.net/manual/en/function.fopen.php)连接到您的 b 服务器，向您的客户端发送标头以指示文件类型以触发下载，然后在循环中使用 每次下载 8 KB 文件[`fread`](http://php.net/manual/en/function.fopen.php)，并使用[输出缓冲](http://php.net/manual/en/book.outcontrol.php)( `ob_flush()`) 将 8 KB 刷新到用户，并迭代直到文件完成下载。

**或者**

为了避免这一切，您可以考虑使用 Apache 的[mod_proxy](http://httpd.apache.org/docs/current/mod/mod_proxy.html)模块。

# asp.net - 我可以通过扩展方法访问 web.config

> ID：10829368
> 
> 赞同：0
> 
> 时间：2012-05-31T07:43:31.253
> 
> 标签：asp.net, vb.net

我可以在扩展方法中访问 web.config 的应用程序设置中的值吗？

我有以下代码，但它不工作：

```
<Extension()> _
Public Function DocCountExt(ByVal value As Collection) As Integer
    Dim maxOffSet As Integer = Integer.Parse(ConfigurationManager.AppSettings(APP_SETTINGS_OFFSET))
    return maxOffSet
End Function 
```

上面的代码不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T07:45:55.193

至少三十个字符让我再次感到震惊：/

原答案：

```
Yes 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T07:48:47.467

是的，只需使用`System.Configuration.ConfigurationManager`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T07:49:10.243

是的，你可以。将其作为参数传递，因为 Exension Method 是静态的。

# java - 在 JBoss 7 部署结束时执行操作

> ID：10829370
> 
> 赞同：1
> 
> 时间：2012-05-31T07:43:39.367
> 
> 标签：java, java-ee-6, jboss7.x, jboss-weld

我们有一个应用程序需要在部署结束时进行一些初始化（在 JBoss 7.1.0 实例中），因为只有这样所有必需的服务才能可用（其中有很多）。

我们尝试的一种方法是：

我们有一个单例服务和一个 @Startup 注释，但到目前为止，我们还没有成功地告诉 JBoss 最后创建实例而没有太多麻烦。

我们可以使用`@DependsOn`，但我们必须维护一个不断增长且已经很大的依赖项列表，因此我们宁愿将其作为最后的手段。

在过去（JBoss 4 和 5），有可能定义对应用程序的依赖（如`@Depends("myapp.ear")`），这正是我们需要的。

从 JBoss 7 开始，情况发生了变化，但我认为仍有办法做到这一点。

另一种方法是尝试创建我们自己的 JBoss 子系统，该子系统在所有其他子系统启动后调用，但我们无法找到一种方法来等待其他子系统完成后再执行我们需要的操作。

我们还可以考虑哪些其他选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-08T06:27:59.357

您可以将带有注释的类`@Startup`放入不同的 EAR 或更好的 WAR 中。我认为，WAR 将默认部署在任何 EAR 之后，而无需配置任何东西。

在启动类中，您可以只调用实际的初始化，它与应用程序的其余部分一起部署`myapp.ear`。调用是通过 EJB 本地或远程接口完成的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-08T04:29:16.450

您可以拥有一个servlet，例如BootstrapServlet.java，在您的WEB-INF/web.xml 中使用设置load-on-startup>1 /load-on-startup> 进行定义，并在该servlet 中进行初始化。

# android - 在 Android App 和网络服务器之间同步数据

> ID：10829371
> 
> 赞同：272
> 
> 时间：2012-05-31T07:43:48.470
> 
> 标签：android, android-syncadapter, data-sharing

我想在 Android 应用程序和服务器之间同步数据（例如数据库记录、媒体）。如果你看过`Evernote`或类似的应用程序，你肯定明白我的意思。

我有一些问题（假设我们要同步数据库记录）：

1.  每个用户都有自己的服务器空间的一部分（例如`Evernote`或`Dropbox`）。也许用户通过手机创建新记录并在服务器中创建新记录。**我怎样才能将这些记录匹配在一起？**如果有相同 ID 的记录**你建议我什么算法？**

2.  除了*JSON*，**还有什么方法可以在手机设备和服务器之间发送数据？**

3.  如果*SyncAdapter*和*ContentProvider*可以解决我的问题，请为我解释清楚。（如果您可以向我提供一些示例或教程，或者任何有助于扩大/指导我的搜索的建议或关键字也将不胜感激）。

* * *

## 回答 #1

> 赞同：312
> 
> 时间：2012-07-07T01:38:43.273

我将尝试通过解决更大的问题来回答您的所有问题：***如何在网络服务器和 android 应用程序之间同步数据？***

* * *

在您的网络服务器和安卓应用程序之间同步数据需要在您的安卓设备上使用几个不同的组件。

## 持久存储：

这就是您的手机实际存储从网络服务器接收到的数据的方式。实现此目的的一种可能方法是编写您自己的由 Sqlite 数据库支持的自定义*ContentProvider 。*可以在此处找到内容提供者的体面教程：http: [//thinkandroid.wordpress.com/2010/01/13/writing-your-own-contentprovider/](http://thinkandroid.wordpress.com/2010/01/13/writing-your-own-contentprovider/)

*ContentProvider*定义了一个一致的接口来与您存储的数据进行交互。如果您愿意，它还可以允许其他应用程序与您的数据进行交互。*您的ContentProvider*背后可能是 Sqlite 数据库、缓存或任何任意存储机制。

虽然我当然会推荐使用带有 Sqlite 数据库的*ContentProvider*，但您可以使用任何您想要的基于 java 的存储机制。

## 数据交换格式：

这是您用于在网络服务器和 Android 应用程序之间发送数据的格式。目前最流行的两种格式是 XML 和 JSON。选择格式时，您应该考虑可用的序列化库类型。我立即知道有一个很棒的 json 序列化库，叫做 gson：[https](https://github.com/google/gson) ://github.com/google/gson ，尽管我确信 XML 存在类似的库。

## 同步服务

您将需要某种异步任务，它可以从您的服务器获取新数据并刷新移动内容以反映服务器的内容。每当您对内容进行本地更改并希望反映这些更改时，您还需要通知服务器。Android 提供了*SyncAdapter*模式作为一种轻松解决此模式的方法。您需要注册用户帐户，然后 Android 将为您执行许多魔法，并允许您自动同步。这是一个很好的教程：[http ://www.c99.org/2010/01/23/writing-an-android-sync-provider-part-1/](http://www.c99.org/2010/01/23/writing-an-android-sync-provider-part-1/)

* * *

至于如何识别记录是否相同，通常您将创建具有唯一 id 的项目，并将其存储在 android 设备和服务器上。您可以使用它来确保您引用的是相同的参考。此外，您可以存储诸如“updated_at”之类的列属性，以确保您始终获得最新数据，或者您不会意外覆盖新写入的数据。

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2016-04-25T04:58:03.157

**如果我们今天**想想，[接受](https://stackoverflow.com/a/11371601/1318946)的答案太老了。正如我们所知，我们有许多新的库可以帮助您制作这种类型的应用程序。

您应该学习以下肯定会对您有所帮助的主题：

*   [SyncAdapter：](https://developer.android.com/training/sync-adapters/creating-sync-adapter.html)应用程序中的同步适配器组件封装了在设备和服务器之间传输数据的任务的代码。根据您在应用程序中提供的调度和触发器，同步适配器框架运行同步适配器组件中的代码。

*   [Realm](https://realm.io/)：Realm 是一个移动数据库：SQLite 和 Core Data 的替代品。

*   Square, Inc. 为 Android 和 Java[改造类型安全的 HTTP 客户端。必须学习](http://square.github.io/retrofit/)[一种智能的使用改造方式](https://futurestud.io/blog/retrofit-getting-started-and-android-client/)

您的数据库同步逻辑如下：[如何将 Android 手机上的 SQLite 数据库与服务器上的 MySQL 数据库同步？](https://stackoverflow.com/a/18074302/1318946)

祝所有新学习者好运。:)

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2012-05-31T22:07:16.620

如果您自己编写，请记住以下几点

设备和同步服务器之间的正确身份验证

设备和服务器之间的同步协议。它通常分为 3 个阶段，身份验证、数据交换、状态交换（哪些操作有效，哪些失败）

选择您的有效负载格式。我建议将基于 SyncML 的 XML 与基于 JSON 的格式混合来表示实际数据。因此，SyncML 用于协议，而 JSON 用于正在交换的实际数据。在处理数据时使用 JSON 数组总是首选，因为使用 JSON 数组很容易访问数据。

跟踪客户端和服务器上的数据更改。您可以维护更改的 id 的更改日志，并在同步会话期间获取它们。此外，在对象成功同步时清除更改日志。您还可以使用布尔变量来确认同步状态，即上次同步的时间。这将有助于最终用户确定上次同步完成的时间。

当服务器上的数据发生变化时，需要有一种从服务器到设备的通信方式来启动同步会话。您可以使用 C2DM 或编写自己的基于 tcp 的持久通信。tcp 方法非常无缝

一种跨多个设备复制数据更改的方法

最后但并非最不重要的一点是，一种检测和处理冲突的方法

希望这有助于作为一个好的起点。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2015-05-15T02:51:40.493

@Grantismo 对整体提供了很好的解释。如果您想知道实际上是谁在做这些事情，我建议您看看 google 为 2014 年的 Google IO 应用程序所做的事情（深入了解他们发布的这些应用程序的源代码总是值得的。有可以从那里学到很多东西）。

这是一篇关于它的博客文章：[http ://android-developers.blogspot.com.br/2014/09/conference-data-sync-gcm-google-io.html](http://android-developers.blogspot.com.br/2014/09/conference-data-sync-gcm-google-io.html)

从本质上讲，在应用程序方面：GCM 用于发送信号，Sync Adapter 用于数据获取并与 Content Provider 正确对话，这将使事情变得持久（是的，它将数据库与应用程序其他部分的直接访问隔离开来）。

此外，如果您想查看 2015 年的代码：[https ://github.com/google/iosched](https://github.com/google/iosched)

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2016-07-20T10:46:07.887

例如，您要将表`todoTable`从同步`MySql`到`Sqlite`

`version (type INT)`首先，`todoTable`为两者创建一个列`Sqlite`名`MySql` [![在此处输入图像描述](../Images/f4e0a9fe2027a72c41b5ea1dc8246ff0.png)](https://i.stack.imgur.com/IsTwv.png)

二、创建`database_version`一列名的表名`currentVersion(INT)`
[![在此处输入图像描述](../Images/ed5bee0dca8bc39a7269afbec65a63f5.png)](https://i.stack.imgur.com/N6twX.png)

在`MySql`中，当您添加新项目`todoTable`或更新项目时，您必须将该项目的版本升级+1，**同时**升级`currentVersion` [![在此处输入图像描述](../Images/6d552db6ce20c36f75f901cf7b32c2cc.png)](https://i.stack.imgur.com/YAMrk.png)

在`Android`中，当您要同步时（通过手动按下同步按钮或​​使用周期时间运行的服务）：

您将带有`Sqlite`currentVersion（当前为 1）的请求发送到服务器。
然后在服务器中，您会发现`MySql`版本值大于`Sqlite`currentVersion(1) 的项目然后响应 Android（在此示例中，版本 2 的项目 3 将响应 Android）

在`SQLite`中，您将添加或更新新项目`todoTable`并升级 currentVersion

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2012-07-06T17:37:12.587

查看[parseplatform.org](http://parseplatform.org/)。它是开源项目。

（您也可以在[back4app.com](https://www.back4app.com)上购买商业包。）

这是一个非常直接且用户友好的服务器端数据库服务，它提供了一个很棒的 android 客户端 API

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-05-31T08:49:56.297

实现此目的的一种方法是拥有一个等待数据的服务器端应用程序。可以使用 Java 中的对象发送数据，也`HttpRequest`可以编写自己的`TCP/IP`数据传输实用程序。可以使用`JSON`格式或您认为合适的任何其他格式发送数据。如果数据包含敏感信息，也可以在发送到服务器之前对其进行加密。所有服务器应用程序所要做的就是等待`HttpRequests`进来并解析数据并将其存储在您想要的任何地方。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-07-07T00:40:43.277

我建议使用类似于[Hessian](http://hessian.caucho.com/)的二进制 web 服务协议。它工作得很好，他们确实有一个 android 实现。它可能有点重，但取决于您正在构建的应用程序。希望这可以帮助。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-10-26T15:25:41.127

@Grantismo 很好地概述了 Android 同步组件。

SyncManagerAndroid 库提供了一个简单的 2 路同步实现以插入 Android 同步框架 (AbstractThreadedSyncAdapter.OnPerformSync)。

[https://github.com/sschendel/SyncManagerAndroid](https://github.com/sschendel/SyncManagerAndroid)

# javascript - jquery 重定向到页面元素，但没有显示？

> ID：10829372
> 
> 赞同：-1
> 
> 时间：2012-05-31T07:43:52.777
> 
> 标签：javascript, jquery, jquery-ui, jquery-mobile

> **可能重复：**
> [如何使用 javascript 显示 jquery 页面（在 div 内）？](https://stackoverflow.com/questions/10828089/how-to-display-jquery-pageinside-a-div-using-javascript)

这是我的 javascript 代码

```
function loginPostData(jsonRequest)
{
    alert("hello");
    $.post("http://localhost:8080/edserve/MobileServlet", 
            JSON.stringify(jsonRequest), 
            function(data) 
            {
                var obj = JSON.stringify(data);
                alert(obj);
                if(data.status=="success")
                {
                    <!--problem lies here-->
                    $.mobile.changePage( "#mainMenu");
                    //$('#result').load('index.html#mainMenu');
                    // . load also give the same result
                }
                else
                {
                    if(data.message=="user not verified")
                    {
                        //display verification page 
                    }   
                }   
            }, "json");
} 
```

**问题**：jquery 加载主菜单页面，但没有显示任何内容，直到我刷新页面

只是我的页面的快速参考

```
<div data-role="page" id="login">
    // other page content
            <div id="divrightButton">

            <!-- calling loginSubmit which calls loginPostData method/function-->   
            <a class="bluebutton" href="#" onclick="loginSubmit(); return false;">Login</a>

            </div>
        </form>
</div>

<!--main page-->
<div data-role="page" id="mainMenu">

     Main menu
</div> 
```

我也开始知道 jquery 中存在一些问题，具有相同的页面转换 [https://github.com/jquery/jquery-mobile/issues/2529](https://github.com/jquery/jquery-mobile/issues/2529)

但是如何解决这些问题，我对此节点没有任何线索以防万一，我还尝试了以下重定向/加载

```
$.mobile.changePage("#mainMenu",{allowSamePageTransition: true }); 
$('#result').load('index.html#mainMenu');
$.mobile.changePage( $("#mainMenu")); 
```

没有工作，我的意思是它工作但结果相同，没有显示

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T08:03:48.613

尝试这个..

```
if( data.status == "success" ) {
    window.location = 'index.html#mainMenu';
    return;
} 
```

刷新页面后，只有 html 可以运行，并且在刷新页面后仅显示 html 而不是服务器响应。如果您想在 mainMenu div 上显示服务器响应，那么您需要使用 Ajax 调用并在获得响应后编写在html中显示数据的代码..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T10:58:34.810

**尝试使用这个应该可以**

```
 function loginPostData(jsonRequest)
    {
        alert("hello");
        $.post("http://localhost:8080/edserve/MobileServlet", 
                JSON.stringify(jsonRequest), 
                function(data) 
                {
                    var obj = JSON.stringify(data);
                    alert(obj);
                    if(data.status=="success")
                    {
                        $('#mainmenu').children().remove(); //clears div
                        $('#mainmenu').html(data);  //Loads data

                    }
                    else
                    {
                        if(data.message=="user not verified")
                        {
                            //display verification page 
                        }   
                    }   
                }, "json");
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T13:23:05.753

使用此代码重定向/显示特定的 div 元素

`$.mobile.changePage("#mainMenu",{allowSamePageTransition: true });`

并下载以下 css 文件，它是页面/div 元素之间转换的必要条件

[jquery.mobile.transitions.css](https://github.com/jquery/jquery-mobile/blob/ca9df1197a9748ee7448fb9b28c14c41d80d4601/themes/default/jquery.mobile.transitions.css)

# java - 我想为搜索类实现接口什么是实现接口的最佳方法？

> ID：10829376
> 
> 赞同：1
> 
> 时间：2012-05-31T07:44:08.660
> 
> 标签：java, design-patterns, ooad

我想要一个包含几个不同选项的搜索类，我的搜索类应该能够以不同的方式过滤结果，例如：

```
getX()
getY()
getZ()
getK() 
```

以上 X,Y,Z,K 是我的标准，它们在我的情况下很常见，所以我决定创建一个如下界面：

```
public interface IFilter {

public String getX();
public void setX(String x);
.
.
.

//I am not sure about the return type of my criteria!
public IAmNotSureAboutReturnType criteria();
} 
```

应用程序每次都应该能够获得 1 个或多个条件，我的想法是有一个接口来指示一个类实现所有条件和所有条件（）方法，以将编译的条件返回给我的搜索类。

所有标准都基于字符串，但我不确定条件（）的返回类型，因为它应该结合所有给定的标准并返回一种特定类型作为返回值。

我的搜索类不是基于 SQL，它主要基于 JSON。

谁能建议我为搜索类提供标准接口的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T08:00:56.533

也许访问者模式将有助于过滤器的实现：

```
public interface IFilter<T> {

    /**
    * This method will be called by filtering mechanizm. If it return true - item 
    * stay in resul, otherwise item rejected
    */
    boolean pass(T input);

} 
```

您可以创建将组合多个过滤器的 AND 和 OR 过滤器：

```
public class AndFilter<T> implements IFilter<T> {

    private final List<IFilter<T>> filters;

    public AndFilter(List<IFilter<T>> filters) {
        this.filter = filter;
    }

    @Override
    public boolean pass(T input) {
        for(IFilter<T> filter : filters) {
            if(!filter.pass(input)) {
                return false;
            }
        }
        return true;
    }
} 
```

# javascript - 无法从控制器传递的字符串构建 jquery dform

> ID：10829384
> 
> 赞同：0
> 
> 时间：2012-05-31T07:45:19.163
> 
> 标签：javascript, forms, model-view-controller, jqgrid

我想在我的 MVC 应用程序中使用 dForm。当我尝试从以下 json 字符串构建表单时，没关系。

```
 var formdata = {
        'action': 'index.html',
        'method': 'get',
        'elements':
                [
                 {
                  "type":"select",
                  "name":"Name",
                  "caption":"Name",
                  "options":"first":{"html":"first","class":"active"},
                            "second":{"html":"second","class":"active"},
                  "selected":null
                 } 
               ]
  }; 
```

但是当我将生成的部分用于以下元素时：

```
 var elements = {
                "action": "index.html",
                "method": "get",
                "elements":
                        [
                             $('#jqgrid').jqGrid('getGridParam', 'userData')
                        ]
            };
            $('#myform').buildForm(elements); 
```

我从 dform 收到以下错误：

```
 uncaught exception: No element type given! Must always exist. 
```

但我确信“元素”标签与我在第一个示例中发布的相同。

我发现在萤火虫中，我可以看到 jqGrid 的获取字符串 userData，格式如下：

```
"userdata":"{\"type\":\"select\",\"name\":\"Name\",\"caption\":\"Name\",\"options\":{\"first\":\"first\" ..... 
```

我从 JObject 生成 userData。也许有问题。我试图替换转义字符 '\' 但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T00:24:42.383

这种格式看起来不太对。它可能正在尝试转换

```
{ "userdata" : "JSON String" } 
```

据我所知，您可能必须做：

```
JSON.parse($('#jqgrid').jqGrid('getGridParam', 'userData').userdata); 
```

如果还是不行，请查看[Google Group](https://groups.google.com/group/jquery-dform?pli=1)，在那里帮助您可能更容易。

# mysql - mysql 中临时表的旧代码 TYPE=HEAP 出错

> ID：10829392
> 
> 赞同：3
> 
> 时间：2012-05-31T07:46:01.833
> 
> 标签：mysql

我有一个正在工作的旧代码：

```
CREATE TEMPORARY TABLE temp_tree (id INTEGER, parent_id INTEGER) type=HEAP; 
```

现在我有 mysql 5 并且这段代码不起作用。在内存中创建临时表的正确方法是什么？我搜索了[文档](http://dev.mysql.com/doc/refman/5.0/en/memory-storage-engine.html)

但找不到合适的例子。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T07:56:42.507

新版本中不推荐使用类型。检查mysql的版本并使用`Engine = Memory.`

# c# - Css 解析器错误

> ID：10829394
> 
> 赞同：1
> 
> 时间：2012-05-31T07:46:06.130
> 
> 标签：c#, windows-phone-7

我在 m Windows Phone 应用程序中使用[解析器。](http://www.codeproject.com/Articles/20450/Simple-CSS-Parser)

```
CSSDocument css = new CSSDocument();
CSSParser parser = new CSSParser();
BoneSoft.CSS.CSSParser parser = new BoneSoft.CSS.CSSParser();
parser.ParseText("body {font-family: Helvetica, arial, sans-serif;font-size: 16px;}h2 {color: #e2703b;}.newsimage{margin-bottom:10px;}.date{text-align:right;font-size:35px;}");
css = parser.CSSDocument; 
```

此内置库方法中存在错误：

```
public CSSDocument ParseText(string content) {
    MemoryStream mem = new MemoryStream();
    byte[] bytes = ASCIIEncoding.ASCII.GetBytes(content);
    mem.Write(bytes, 0, bytes.Length);
    return ParseStream(mem);
} 
```

> 尝试访问该方法失败：System.Text.Encoding.get_ASCII()

我做错了什么？

**Update1** 我发现 Windows Phone 不支持 ASCII 编码的信息。那么还有其他方法可以解析 Windows 手机的 css 吗？

**Update2** 作为一个变体，我刚刚更改了解析器的代码并编译了一个新的 dll。所以现在

我把这个方法字节数组

```
public CSSDocument ParseText(byte[] bytes ) {
            MemoryStream mem = new MemoryStream();
                        mem.Write(bytes, 0, bytes.Length);
            return ParseStream(mem);
        } 
```

它解决了这个问题，但是还有其他方法可以如何解析 Windows Phone 的 css 吗？

# wordpress - wordpress 中 wp_nav_menu 的 HTML 存在于哪里

> ID：10829395
> 
> 赞同：2
> 
> 时间：2012-05-31T07:46:07.330
> 
> 标签：wordpress

我想知道 HTML 代码放在菜单的什么位置。是否有模板菜单可以跟随。

更清楚一点：当我调用“wp_nav_menu()”时，渲染了哪个文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T09:59:34.420

## 该`wp_nav_menu()`函数在 wp-includes/nav-menu-template.php 中定义：

```
function wp_nav_menu( $args = array() ) {
    static $menu_id_slugs = array();

    $defaults = array( 'menu' => '', 'container' => 'div', 'container_class' => '', 'container_id' => '', 'menu_class' => 'menu', 'menu_id' => '',
    'echo' => true, 'fallback_cb' => 'wp_page_menu', 'before' => '', 'after' => '', 'link_before' => '', 'link_after' => '', 'items_wrap' => '<ul id="%1$s" class="%2$s">%3$s</ul>',
    'depth' => 0, 'walker' => '', 'theme_location' => '' );

    $args = wp_parse_args( $args, $defaults );
    $args = apply_filters( 'wp_nav_menu_args', $args );
    $args = (object) $args;

    // Get the nav menu based on the requested menu
    $menu = wp_get_nav_menu_object( $args->menu );

    // Get the nav menu based on the theme_location
    if ( ! $menu && $args->theme_location && ( $locations = get_nav_menu_locations() ) && isset( $locations[ $args->theme_location ] ) )
        $menu = wp_get_nav_menu_object( $locations[ $args->theme_location ] );

    // get the first menu that has items if we still can't find a menu
    if ( ! $menu && !$args->theme_location ) {
        $menus = wp_get_nav_menus();
        foreach ( $menus as $menu_maybe ) {
            if ( $menu_items = wp_get_nav_menu_items($menu_maybe->term_id) ) {
                $menu = $menu_maybe;
                break;
            }
        }
    }

    // If the menu exists, get its items.
    if ( $menu && ! is_wp_error($menu) && !isset($menu_items) )
        $menu_items = wp_get_nav_menu_items( $menu->term_id );

    // If no menu was found or if the menu has no items and no location was requested, call the fallback_cb if it exists
    if ( ( !$menu || is_wp_error($menu) || ( isset($menu_items) && empty($menu_items) && !$args->theme_location ) )
        && $args->fallback_cb && is_callable( $args->fallback_cb ) )
            return call_user_func( $args->fallback_cb, (array) $args );

    // If no fallback function was specified and the menu doesn't exists, bail.
    if ( !$menu || is_wp_error($menu) )
        return false;

    $nav_menu = $items = '';

    $show_container = false;
    if ( $args->container ) {
        $allowed_tags = apply_filters( 'wp_nav_menu_container_allowedtags', array( 'div', 'nav' ) );
        if ( in_array( $args->container, $allowed_tags ) ) {
            $show_container = true;
            $class = $args->container_class ? ' class="' . esc_attr( $args->container_class ) . '"' : ' class="menu-'. $menu->slug .'-container"';
            $id = $args->container_id ? ' id="' . esc_attr( $args->container_id ) . '"' : '';
            $nav_menu .= '<'. $args->container . $id . $class . '>';
        }
    }

    // Set up the $menu_item variables
    _wp_menu_item_classes_by_context( $menu_items );

    $sorted_menu_items = array();
    foreach ( (array) $menu_items as $key => $menu_item )
        $sorted_menu_items[$menu_item->menu_order] = $menu_item;

    unset($menu_items);

    $sorted_menu_items = apply_filters( 'wp_nav_menu_objects', $sorted_menu_items, $args );

    $items .= walk_nav_menu_tree( $sorted_menu_items, $args->depth, $args );
    unset($sorted_menu_items);

    // Attributes
    if ( ! empty( $args->menu_id ) ) {
        $wrap_id = $args->menu_id;
    } else {
        $wrap_id = 'menu-' . $menu->slug;
        while ( in_array( $wrap_id, $menu_id_slugs ) ) {
            if ( preg_match( '#-(\d+)$#', $wrap_id, $matches ) )
                $wrap_id = preg_replace('#-(\d+)$#', '-' . ++$matches[1], $wrap_id );
            else
                $wrap_id = $wrap_id . '-1';
        }
    }
    $menu_id_slugs[] = $wrap_id;

    $wrap_class = $args->menu_class ? $args->menu_class : '';

    // Allow plugins to hook into the menu to add their own <li>'s
    $items = apply_filters( 'wp_nav_menu_items', $items, $args );
    $items = apply_filters( "wp_nav_menu_{$menu->slug}_items", $items, $args );

    $nav_menu .= sprintf( $args->items_wrap, esc_attr( $wrap_id ), esc_attr( $wrap_class ), $items );
    unset( $items );

    if ( $show_container )
        $nav_menu .= '</' . $args->container . '>';

    $nav_menu = apply_filters( 'wp_nav_menu', $nav_menu, $args );

    if ( $args->echo )
        echo $nav_menu;
    else
        return $nav_menu;
} 
```

### 您可以根据调用函数时添加的 $args 更改 html。请参阅 Codex，[函数参考 wp_nav_menu()](http://codex.wordpress.org/Function_Reference/wp_nav_menu)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T10:17:00.050

wp_nav_menu() 可以被视为具有自己方法的助手。如果它不能满足您的需求，您可以创建自己的。

# sql-server - 删除服务代理队列中的消息

> ID：10829398
> 
> 赞同：22
> 
> 时间：2012-05-31T07:46:13.220
> 
> 标签：sql-server, queue, service-broker

我想在 SQL Server Management Studio 中清除我的队列，但我不想只删除整个队列中的内容（消息）。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-10-10T19:50:32.253

为了清楚起见，只需结合前面的两个答案（Ben 和 Jānis）。这对我有用：

```
declare @c uniqueidentifier
while(1=1)
begin
    select top 1 @c = conversation_handle from dbo.queuename
    if (@@ROWCOUNT = 0)
    break
    end conversation @c with cleanup
end 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-05-31T14:35:21.240

像这样的东西应该工作：

```
while(1=1)
begin
    waitfor (
        receive top(1)
        conversation_group_id
        from dbo.yourQueue
    ), timeout 1000;

    if (@@rowcount = 0)
        break;
end 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-06-04T14:30:52.090

我将使用以下语句使用[结束对话](http://msdn.microsoft.com/en-us/library/ms177521.aspx) （这也将从所有队列中删除所有相关消息）：

```
End Converstation @c With CleanUp 
```

如果您只是收到消息，那么您将对话保持打开状态。使用 CleanUp 结束对话仅适用于特定情况。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-10-31T17:08:57.920

如果您使用的是 SQL Server（从 2008 年开始），您可以使用 RECEIVE

```
WHILE (0=0)
BEGIN
    RECEIVE * FROM dbo.YourQueue;
    IF (@@ROWCOUNT = 0) BREAK;
END 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-08T21:22:27.493

我遇到了与原始海报相同的问题，但我需要清除包含数百万条消息的队列（失败的消息队列，尤其是在多年未检查的非生产环境中）。

上面的解决方案本来可以工作，但每分钟处理不到 10 条消息。通过分批进行，我每分钟收到 30000 条消息。

代码中唯一值得注意的项目是`where validation = 'N'`. 这将对话句柄限制为真实消息。响应/错误有一个重复的对话句柄，该句柄被`end conversation`. 如果没有这个子句，脚本仍然可以工作，但会在输出中产生很多错误。

```
declare @conversationBatch table (convH uniqueidentifier)
declare @conversationHandle uniqueidentifier

declare convCursor cursor for
    select convH from @conversationBatch

insert into @conversationBatch
    select top 1000 conversation_handle  
      from dbo.queuename WITH (NOLOCK) 
     where validation = 'N'

while @@rowcount > 0
begin
    open convCursor
    fetch next from convCursor into @conversationHandle
    while @@FETCH_STATUS = 0 
    begin
        end conversation @conversationHandle with cleanup
        fetch next from convCursor into @conversationHandle
    end
    close convCursor

    delete from @conversationBatch
    insert into @conversationBatch
        select top 1000 conversation_handle  
          from dbo.queuename WITH (NOLOCK) 
         where validation = 'N'

 end

 deallocate convCursor 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2015-12-10T12:14:15.573

```
while(1=1)
begin
    waitfor (
        receive top(1)
        conversation_group_id
        from kartokumaqueue2), timeout 1000;

        if(@@ROWCOUNT = 0) break;
end 
```

# ubuntu - 如何通过不同的端口（80除外）启动nginx

> ID：10829402
> 
> 赞同：148
> 
> 时间：2012-05-31T07:46:55.920
> 
> 标签：ubuntu, nginx

嗨，我是 nginx 的新手，我试图在我的服务器上设置它（运行 Ubuntu 4），它已经运行了 apache。

所以在我`apt-get install`之后，我尝试启动nginx。然后我收到这样的消息：

```
Starting nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
configuration file /etc/nginx/nginx.conf test is successful
[emerg]: bind() to 0.0.0.0:80 failed (98: Address already in use)
[emerg]: bind() to 0.0.0.0:80 failed (98: Address already in use)
[emerg]: bind() to 0.0.0.0:80 failed (98: Address already in use)
[emerg]: bind() to 0.0.0.0:80 failed (98: Address already in use)
[emerg]: bind() to 0.0.0.0:80 failed (98: Address already in use) 
```

这是有道理的，因为 Apache 使用的是端口 80。

然后我尝试修改`nginx.conf`，我参考了一些文章，所以我改成这样：

```
 server {

        listen       8080;

        location / {
         proxy_pass  http://xx.xx.xx.xx:9500;
         proxy_set_header   Host             $host:8080;
         proxy_set_header   X-Real-IP        $remote_addr;
         proxy_set_header   X-Forwarded-For  $proxy_add_x_forwarded_for;
         proxy_set_header Via    "nginx";
        } 
```

保存此文件并尝试再次启动 nginx 后，我仍然收到与以前相同的错误。我真的找不到关于这个的相关帖子，任何好人都可以解开一些光吗？

提前致谢 ：）

==================================================== ========================

**我应该在这里发布 conf 中的所有内容：**

```
user www-data;
worker_processes  1;

error_log  /var/log/nginx/error.log;
pid        /var/run/nginx.pid;

events {
    worker_connections  1024;
    # multi_accept on;
}

http {
    include       /etc/nginx/mime.types;

    access_log  /var/log/nginx/access.log;

    sendfile        on;
    #tcp_nopush     on;

    #keepalive_timeout  0;
    keepalive_timeout  65;
    tcp_nodelay        on;

    gzip  on;
    gzip_disable "MSIE [1-6]\.(?!.*SV1)";

    include /etc/nginx/conf.d/*.conf;
    include /etc/nginx/sites-enabled/*;

   server {

        listen       81;

        location / {
         proxy_pass  http://94.143.9.34:9500;
         proxy_set_header   Host             $host:81;
         proxy_set_header   X-Real-IP        $remote_addr;
         proxy_set_header   X-Forwarded-For  $proxy_add_x_forwarded_for;
         proxy_set_header Via    "nginx";
        }

    }
}

 mail {
      See sample authentication script at:
      http://wiki.nginx.org/NginxImapAuthenticateWithApachePhpScript

      auth_http localhost/auth.php;
      pop3_capabilities "TOP" "USER";
      imap_capabilities "IMAP4rev1" "UIDPLUS";

     server {
         listen     localhost:110;
         protocol   pop3;
         proxy      on;
     }

     server {
         listen     localhost:143;
         protocol   imap;
         proxy      on;
     }
 } 
```

基本上，除了添加服务器部分之外，我什么也没做。

* * *

## 回答 #1

> 赞同：209
> 
> 时间：2012-10-09T12:52:10.093

你必须去`/etc/nginx/sites-enabled/`，如果这是默认配置，那么应该有一个文件名：`default`.

通过定义所需的端口来编辑该文件；在下面的代码片段中，我们在端口 81 上为 Nginx 实例提供服务。

```
server {
    listen 81;
} 
```

要启动服务器，请运行以下命令行；

```
sudo service nginx start 
```

您现在可以在端口 81 上访问您的应用程序（对于 localhost，[http://localhost:81](http://localhost:81)）。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2015-07-13T09:21:03.673

按照这个：打开你的配置文件

```
vi /etc/nginx/conf.d/default.conf 
```

更改您正在侦听的端口号；

```
listen       81;
server_name  localhost; 
```

向 iptables 添加规则

```
 vi /etc/sysconfig/iptables 
-A INPUT -m state --state NEW -m tcp -p tcp --dport 81 -j ACCEPT 
```

重启 IPtables

```
 service iptables restart; 
```

重启nginx服务器

```
service nginx restart 
```

在端口 81 上访问你的 nginx 服务器文件

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2013-10-08T14:36:37.100

您将需要更改 Apache 或 Nginx 的配置端口。完成此操作后，您需要使用您使用的“服务”命令重新启动重新配置的服务器。

* * *

**阿帕奇**

编辑

```
sudo subl /etc/apache2/ports.conf 
```

并将以下行中的 80 更改为不同的内容：

```
Listen 80 
```

如果您只是更改端口或在此处添加更多端口，您可能还必须更改 VirtualHost 语句

```
sudo subl /etc/apache2/sites-enabled/000-default.conf 
```

并将以下行中的 80 更改为不同的内容：

```
<VirtualHost *:80> 
```

然后重新启动：

```
sudo service apache2 restart 
```

* * *

**Nginx**

编辑

```
/etc/nginx/sites-enabled/default 
```

并更改以下行的 80 ：

```
listen 80; 
```

然后重新启动：

```
sudo service nginx restart 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-11-21T07:15:02.013

如果您在 Windows 上，则以下端口相关的服务器设置存在于< ***nginx 安装路径 >/conf***文件夹的文件***nginx.conf中。***

 *```
server {
    listen       80;
    server_name  localhost;
.... 
```

更改端口号并重新启动实例。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-08-09T09:29:16.853

如果您在使用 Docker 时遇到此问题，请务必映射正确的端口号。如果您在运行 docker（或通过 docker-compose.yml）时映射端口 81:80，则您的 nginx 必须侦听端口 80*而不是*81，因为 docker 已经完成了映射。

我自己在这个问题上花了很多时间，所以希望它可以对未来的谷歌人有所帮助。*

# django - 解释 Django Traceback

> ID：10829411
> 
> 赞同：1
> 
> 时间：2012-05-31T07:47:45.417
> 
> 标签：django, traceback

我收到以下消息。我有点明白我的项目服务器找不到模板。但是，我不知道它到底在抱怨什么模板。很高兴听到对正在发生的事情的替代解释。

```
Environment:

Request Method: GET
Request URL: http://127.0.0.1:8000/polls/1/

Django Version: 1.4
Python Version: 2.7.3
Installed Applications:
('django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'polls',
 'django.contrib.admin')
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.middleware.csrf.CsrfViewMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware')

Template Loader Error:
Django tried loading these templates, in this order:
Using loader django.template.loaders.filesystem.Loader:
/home/stanley/mytemplates/polls/detail.html, polls/poll_detail.html (File does not exist)
Using loader django.template.loaders.app_directories.Loader:
/usr/local/lib/python2.7/dist-packages/django/contrib/auth/templates/polls/detail.html, polls/poll_detail.html (File does not exist)
/usr/local/lib/python2.7/dist-packages/django/contrib/admin/templates/polls/detail.html, polls/poll_detail.html (File does not exist)

Traceback:
File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py" in get_response
  136\.                     response = response.render()
File "/usr/local/lib/python2.7/dist-packages/django/template/response.py" in render
  104\.             self._set_content(self.rendered_content)
File "/usr/local/lib/python2.7/dist-packages/django/template/response.py" in rendered_content
  79\.         template = self.resolve_template(self.template_name)
File "/usr/local/lib/python2.7/dist-packages/django/template/response.py" in resolve_template
  55\.             return loader.select_template(template)
File "/usr/local/lib/python2.7/dist-packages/django/template/loader.py" in select_template
  193\.     raise TemplateDoesNotExist(', '.join(not_found))

Exception Type: TemplateDoesNotExist at /polls/1/
Exception Value: polls/detail.html, polls/poll_detail.html 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T09:31:29.807

我将尝试更深入地回答这个问题，尤其是对您的陈述“我认为我将模板放在错误的位置”作出反应。这可以使用您发布的回溯轻松解决。

它告诉你的第一件事是关于你的环境的一些东西——你可以简单地忽略它。这对于 TemplateLoaderError 没有用处。如果您的任何应用程序需要特殊版本的 Python 或类似的东西，这可能很重要。

接下来要发现的是发生了什么样的错误，这对您的特殊情况非常有帮助：

```
Template Loader Error:
Django tried loading these templates, in this order:
Using loader django.template.loaders.filesystem.Loader:
/home/stanley/mytemplates/polls/detail.html, polls/poll_detail.html (File does not exist) 
```

如果你仔细看看这个，它会告诉你 Django 在哪里试图找到指定的模板，以及它在寻找它们时发生了什么（文件不存在）。这将帮助你找到一个解决方案来检查你是否真的把你的模板放在了错误的地方（这种情况经常发生，即使对于更有经验的 Django 开发人员也是如此）。

下一部分是回溯。在您的情况下，您可以直接忽略它，因为您的项目文件夹中不涉及任何文件。如果是这样，那意味着您可能搞砸了命名文件中的某些内容，并且 Django 甚至会告诉您您的代码在哪一行（可能）引发了异常。

最后一部分是有关已引发异常的信息，在您的情况下为 TemplateDoesNotExist。Django 有一些特殊的例外情况，您可以在[此处](https://docs.djangoproject.com/en/1.4/ref/exceptions/)找到。除了这些 Django 引发了标准的 Python 异常。

希望我没有告诉你太多你已经知道的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T08:04:28.837

你的设置里有这样的东西吗？

```
PROJECT_ROOT = path.dirname(path.abspath(__file__)) #gets directory settings is in

TEMPLATE_DIRS = (
    PROJECT_ROOT+'/templates',
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T08:09:57.517

您可能在 settings.py 文件中的 TEMPLATE_DIRS 元组中指定了一些路径。Django 仅在这些目录中搜索 html 模板。因此，将以下路径添加到您的 TEMPLATE_DIRS。

```
TEMPLATE_DIRS = ('/polls',) 
```

# css - CSS居中不适用于自动边距和隐藏溢出

> ID：10829414
> 
> 赞同：2
> 
> 时间：2012-05-31T07:48:08.720
> 
> 标签：css, positioning, centering

我注意到，如果我以更宽的分辨率查看页面，部分的内容会向右对齐，而不是居中。

我用

```
margin: 0 auto;
width: 998px;
overflow: hidden; 
```

它似乎有这个错误，至少在 Safari、Firefox 和 Chrome 中。我尝试禁用`overflow: hidden`它并消除了该错误，但在内容中弄乱了我的浮动。

您可以在此处的页面上查看示例：http: [//autouncle.dk/da/brugte-biler/Kia](http://autouncle.dk/da/brugte-biler/Kia)或[http://autouncle.dk/da/brugte-biler/Ford](http://autouncle.dk/da/brugte-biler/Ford)（您必须在至少 1500px 宽屏才能看到错误）。

关于什么可能导致此错误以及可能的解决方案的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T07:58:40.980

关于问题的原因：这是由于`page-title`您的标题元素：

`#header-outer`element 包含一些浮动元素，但您忘记了清除，因此站点主要部分的左侧偏移量从结束处开始`page-title`。（*您可以通过隐藏`page-title`元素来验证这一点 - 当您设置`display: none`页面正确居中*时）

![在此处输入图像描述](../Images/39eb3bc80a35705d062d956a95418ec7.png)

所以添加

```
body#basic_page #header-outer {
   overflow: hidden;
} 
```

你解决问题

作为旁注，强烈避免将空 div 仅用于清除目的：有一些不需要额外标记的更简洁的方法，例如 easyclearing

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T08:01:40.183

您的解决方案正在删除`overflow: hidden`

要修复第二个示例中的浮动错误，请尝试使用 100% 的宽度：

```
body#basic_page.brands_controller #content .text_info {
   overflow: hidden;
   font-size: 12px;
   width: 100%; /* new rule */
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T07:55:46.553

去除那个

```
overflow:hidden 
```

from`div#content`并将其内容放入其中的额外内容`<div>` 中

```
width:100%;
overflow:hidden; 
```

这解决了我的问题。

# php - 如何获取 PHP Codesniffer 规则集的所有密钥以与 Sonar 一起使用？

> ID：10829417
> 
> 赞同：3
> 
> 时间：2012-05-31T07:48:30.430
> 
> 标签：php, sonarqube, codesniffer

我正在尝试在 phpcs 中添加 Drupal 编码标准。
我可以运行 Drupal 标准 `phpcs --standard=Drupal`

现在我想用 Sonar 执行相同的标准。

在 Sonar 中，我可以在`rules.xml`扩展中添加所有规则集的键，但是如何*获取*这些规则的所有键？

我可以使用文件和文件夹结构识别一些键，`*sniff.php`但我不确定我是否得到了所有这些键。

谁能建议一种自动化的方法来获取特定标准中的**所有可用规则？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T12:15:39.290

您必须识别 Drupal 标准引用的所有嗅探，并在 Sonar（[通过 Web UI](http://docs.codehaus.org/display/SONAR/Quality+profiles)）中创建一个引用它们的配置文件。然后您激活此配置文件作为默认配置文件，您就可以进行分析了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T14:22:19.910

从帮助消息中可能不清楚，但命令行工具对此有一个标志：

```
-e    Explain a standard by showing the sniffs it includes 
```

因此，要显示 Drupal 编码标准中的所有嗅探，可以运行：

```
phpcs -e --standard=Drupal 
```

输出将是这样的：

```
The vendor/drupal/coder/coder_sniffer/Drupal/ standard contains 111 sniffs

Drupal (68 sniffs)
------------------
  Drupal.Array.Array
  Drupal.Array.DisallowLongArraySyntax
  Drupal.CSS.ClassDefinitionNameSpacing
  Drupal.CSS.ColourDefinition
  Drupal.Classes.ClassCreateInstance
  Drupal.Classes.ClassDeclaration
  Drupal.Classes.FullyQualifiedNamespace
  Drupal.Classes.InterfaceName
  Drupal.Classes.PropertyDeclaration
  Drupal.Classes.UnusedUseStatement
  Drupal.Classes.UseLeadingBackslash
  Drupal.Commenting.ClassComment
  Drupal.Commenting.DataTypeNamespace
  Drupal.Commenting.DocCommentAlignment
  Drupal.Commenting.DocComment
  Drupal.Commenting.DocCommentStar
  Drupal.Commenting.FileComment
  Drupal.Commenting.FunctionComment
  Drupal.Commenting.HookComment
  Drupal.Commenting.InlineComment
  Drupal.Commenting.PostStatementComment
  Drupal.Commenting.VariableComment
  Drupal.ControlStructures.ControlSignature
  Drupal.ControlStructures.ElseIf
  Drupal.ControlStructures.InlineControlStructure
  Drupal.Files.EndFileNewline
  Drupal.Files.FileEncoding
  Drupal.Files.LineLength
  Drupal.Files.TxtFileLineLength
  Drupal.Formatting.MultiLineAssignment
  Drupal.Formatting.MultipleStatementAlignment
  Drupal.Formatting.SpaceInlineIf
  Drupal.Formatting.SpaceUnaryOperator
  Drupal.Functions.DiscouragedFunctions
  Drupal.Functions.FunctionDeclaration
  Drupal.InfoFiles.AutoAddedKeys
  Drupal.InfoFiles.ClassFiles
  Drupal.InfoFiles.DuplicateEntry
  Drupal.InfoFiles.Required
  Drupal.Methods.MethodDeclaration
  Drupal.NamingConventions.ValidClassName
  Drupal.NamingConventions.ValidFunctionName
  Drupal.NamingConventions.ValidGlobal
  Drupal.NamingConventions.ValidVariableName
  Drupal.Scope.MethodScope
  Drupal.Semantics.ConstantName
  Drupal.Semantics.EmptyInstall
  Drupal.Semantics.FunctionAlias
  Drupal.Semantics.FunctionT
  Drupal.Semantics.FunctionWatchdog
  Drupal.Semantics.InstallHooks
  Drupal.Semantics.LStringTranslatable
  Drupal.Semantics.PregSecurity
  Drupal.Semantics.RemoteAddress
  Drupal.Semantics.TInHookMenu
  Drupal.Semantics.TInHookSchema
  Drupal.Strings.UnnecessaryStringConcat
  Drupal.WhiteSpace.CloseBracketSpacing
  Drupal.WhiteSpace.Comma
  Drupal.WhiteSpace.EmptyLines
  Drupal.WhiteSpace.Namespace
  Drupal.WhiteSpace.ObjectOperatorIndent
  Drupal.WhiteSpace.ObjectOperatorSpacing
  Drupal.WhiteSpace.OpenBracketSpacing
  Drupal.WhiteSpace.OpenTagNewline
  Drupal.WhiteSpace.OperatorSpacing
  Drupal.WhiteSpace.ScopeClosingBrace
  Drupal.WhiteSpace.ScopeIndent

Generic (13 sniffs)
-------------------
  Generic.CodeAnalysis.UselessOverridingMethod
  Generic.Files.ByteOrderMark
  Generic.Files.LineEndings
  Generic.Formatting.SpaceAfterCast
  Generic.Functions.FunctionCallArgumentSpacing
  Generic.Functions.OpeningFunctionBraceKernighanRitchie
  Generic.NamingConventions.ConstructorName
  Generic.NamingConventions.UpperCaseConstantName
  Generic.PHP.DeprecatedFunctions
  Generic.PHP.DisallowShortOpenTag
  Generic.PHP.LowerCaseKeyword
  Generic.PHP.UpperCaseConstant
  Generic.WhiteSpace.DisallowTabIndent

MySource (1 sniffs)
-------------------
  MySource.Debug.DebugCode

PEAR (3 sniffs)
---------------
  PEAR.Files.IncludingFile
  PEAR.Functions.FunctionCallSignature
  PEAR.Functions.ValidDefaultValue

PSR2 (2 sniffs)
---------------
  PSR2.Namespaces.NamespaceDeclaration
  PSR2.Namespaces.UseDeclaration

Squiz (23 sniffs)
-----------------
  Squiz.Arrays.ArrayBracketSpacing
  Squiz.Arrays.ArrayDeclaration
  Squiz.CSS.ClassDefinitionClosingBraceSpace
  Squiz.CSS.ClassDefinitionOpeningBraceSpace
  Squiz.CSS.ColonSpacing
  Squiz.CSS.DisallowMultipleStyleDefinitions
  Squiz.CSS.EmptyClassDefinition
  Squiz.CSS.EmptyStyleDefinition
  Squiz.CSS.Indentation
  Squiz.CSS.MissingColon
  Squiz.CSS.SemicolonSpacing
  Squiz.ControlStructures.ForEachLoopDeclaration
  Squiz.ControlStructures.ForLoopDeclaration
  Squiz.ControlStructures.SwitchDeclaration
  Squiz.Functions.FunctionDeclarationArgumentSpacing
  Squiz.Functions.MultiLineFunctionDeclaration
  Squiz.PHP.LowercasePHPFunctions
  Squiz.PHP.NonExecutableCode
  Squiz.Strings.ConcatenationSpacing
  Squiz.WhiteSpace.FunctionSpacing
  Squiz.WhiteSpace.LanguageConstructSpacing
  Squiz.WhiteSpace.SemicolonSpacing
  Squiz.WhiteSpace.SuperfluousWhitespace

Zend (1 sniffs)
---------------
  Zend.Files.ClosingTag 
```

# php - 使用 mktime 显示 2012 年的月份列表

> ID：10829424
> 
> 赞同：4
> 
> 时间：2012-05-31T07:48:47.547
> 
> 标签：php, date, mktime

我目前面临需要尽快解决的问题。

我正在尝试使用以下代码列出当年（2012 年）的所有月份：

```
for ($m=1; $m<=12; $m++) {
     $month = date('F', mktime(0,0,0,$m));
     echo $month. '<br>';
     } 
```

但我得到以下意外输出：

一月 三月 三月 五月 五月 七月 七月 八月 十月 十月 十二月 十二月

我做错了什么请帮忙！！！

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-05-31T07:50:43.867

试试这个：

```
for ($m=1; $m<=12; $m++) {
     $month = date('F', mktime(0,0,0,$m, 1, date('Y')));
     echo $month. '<br>';
     } 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-31T07:57:35.497

每年的月份都是一样的

```
$array = array("January", "February",.....);
for ($m=0; $m<12; $m++) {
     echo $array[$m]. '<br>';
     } 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-31T09:08:49.413

我想你应该以这种方式循环它。

```
for($i = 1 ; $i <= 12; $i++)
{
 echo date("F",strtotime(date("Y")."-".$i."-01"));
 echo "<br/>";
} 
```

或者在您的情况下，您想使用 mktime()

```
for($i = 1 ; $i <= 12; $i++)
{
 echo date("F",mktime(0,0,0,$i,1,date("Y")));
 echo "<br/>";
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-05-31T07:54:00.990

设置`day`为`mktime()`，`1`否则执行转换：`30.2.2012 = 1.3.2012`

```
$month = date('F', mktime(0,0,0,$m,1)); 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-07-04T11:23:23.813

注意本地化。

你也可以使用这个

```
setlocale(LC_TIME, 'it_IT');
for($m=1;$m<=12;$m++){
  echo strftime("%B", mktime(0, 0, 0, $m, 12));
} 
```

更改函数 setlocale() 上的参数，您可以显示本地化文本。

[setlocale 代码列表](http://download1.parallels.com/SiteBuilder/Windows/docs/3.2/en_US/sitebulder-3.2-win-sdk-localization-pack-creation-guide/30801.htm)

# connection-string - VSTS LoadTest、连接字符串和 TFS2010

> ID：10829425
> 
> 赞同：1
> 
> 时间：2012-05-31T07:48:52.350
> 
> 标签：connection-string, load-testing

我们在构建服务器上运行了几个负载测试，我在将测试结果保存在结果存储数据库中时遇到了问题。它在本地运行时运行良好，直到一周前，测试结果在构建服务器（TFS2010）上运行时仍然存在。注意我没有测试控制器或测试代理。只有一个构建控制器和构建代理。我已经为控制器“本地 - 无控制器”设置了连接字符串，它似乎已正确保存（也可以在构建服务器上看到连接字符串）。但是通过构建服务器运行时，结果不会保存在数据库中。本地工作正常。那么我在这里做错了什么，连接字符串保存在哪里？我的猜测是它遵循测试控制器，因此我没有明确地拥有一个，我的猜测是它使用默认的本地测试控制器。关于链条断裂的地方有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T08:52:49.920

A 通过在每个构建服务器上打开 Visual Studio 并配置连接字符串来解决问题 - *sigh

# javascript - Javascript 框架：Knockout、backbone、ember…

> ID：10829427
> 
> 赞同：1
> 
> 时间：2012-05-31T07:49:02.317
> 
> 标签：javascript, backbone.js, knockout.js, ember.js

我目前正在使用带有 node.js 和 Express 服务器端的 javascript 编写的 Web 应用程序项目，是时候考虑这个应用程序的客户端了。这两个问题是：

*   我应该考虑使用框架还是可以在没有这样的工具的情况下编写它？
*   如果不是，哪个框架？

我选择了其中三个：backbone、knockout 和 Ember。我阅读了我发现的所有关于它们的问题，但我仍在犹豫。需要考虑的要点是：

*   像淘汰赛那样将 html 与 javascript 混合是很好的吗？
*   我的应用程序是否易于维护？
*   框架会不会在明天继续存在而不消失，让我处于非常不舒服的境地？

**编辑**：你觉得 JavaScriptMVC 怎么样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T08:08:52.433

正如@Christian Varga 在评论中所说，这取决于。但是，我会提出以下意见：

> 像淘汰赛那样将 html 与 javascript 混合是很好的吗？

通过淘汰赛，您不必将 javascript 混合到 html 中。请参阅[不显眼的事件处理](http://knockoutjs.com/documentation/unobtrusive-event-handling.html)。

> 我的应用程序是否易于维护？

根据我的淘汰经验，如果应用程序变得特别大，页面确实会变得复杂。然而，如果你想要一个[SPA](http://en.wikipedia.org/wiki/Single-page_application)风格的页面，那么代码总是会相当复杂。我没有使用过 Ember 或 Backbone，但 Backbone 确实以适合大型应用程序而闻名。

> 框架会不会在明天继续存在而不消失，让我处于非常不舒服的境地？

我认为您已经明智地选择了要考虑的三个框架。Knockout 和 Backbone 都有相当广泛的采用。Knockout 将[与 MVC4 一起提供，](http://www.hanselman.com/blog/ASPNETMVC4ASPNETWebAPIAndASPNETWebPagesV2RazorNowAllOpenSourceWithContributions.aspx)这让您对它的未来充满信心。Ember 较新，但它背后似乎有很多令人兴奋的东西。[对 Ember 进行了很好的讨论，并在此处](http://news.ycombinator.com/item?id=3739260)提供了对淘汰赛和骨干的各种参考

希望这可以帮助您评估最适合您的项目的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-24T14:32:50.853

所有这些都是很好的框架。你可以选择任何人，你不会犯大错。当然，您可能比其他人更喜欢一个，但这是一个品味问题。所有这些框架将使您的应用程序易于维护。

现在，我想添加更多内容。您问“我应该考虑使用框架”吗？您可以构建自己的东西，这很酷。我只是建议记住你的项目的良好组织。在我短暂的经验中，Js 是一团糟。这些 FW 可帮助您保持代码整洁有序。

还要向组织添加 1 件事：您应该考虑一些 AMD 工具，例如[Require.js](http://requirejs.org/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T09:09:07.827

如果您正在考虑构建具有可扩展性和可维护性的应用程序，您可能需要考虑参考架构，例如[Boilerplatejs](http://boilerplatejs.org/)。

BoilerplateJS 结合了构建大型应用程序时使用的最佳实践。此外，它还附带了诸如 knockoutjs 之类的库以及有助于构建和组织代码的实用程序。

# javascript - Node.js 服务器上的 3D 模型

> ID：10829429
> 
> 赞同：4
> 
> 时间：2012-05-31T07:49:07.747
> 
> 标签：javascript, node.js, collision-detection

我正在制作一个 3D 游戏，我在[这里](https://gamedev.stackexchange.com/questions/29384/how-to-implement-physics-and-aoe-spells-in-an-mmo-game)和[这里](https://gamedev.stackexchange.com/questions/29887/collision-detection-in-multiplayer-games/29889#29889)都被告知我应该始终在服务器端执行碰撞检测。现在，问题是我不知道怎么做！平面上玩家之间的碰撞很容易，因为玩家是用圆柱体表示的，但是，当地图本身是带有山丘等的模型时，我该如何进行碰撞检测？是否有可能以某种方式在 Node.js 服务器上导入 3D 模型？然后，假设我确实导入了模型，是否有一些碰撞检测库，或者我必须自己做数学？（我最后的手段是~~将模型转换为 JSON~~（模型已经转换为 JSON），然后读取所有顶点，但这会很痛苦。）

这些模型是在 Blender 中制作的，可以转换为 .obj、.dae 或**.js (JSON)**（这是我目前使用的）。

如果没有这样的模块，允许导入模型并检查碰撞，我想我可以自己制作。在这种情况下，请提供一些提示，或进一步阅读如何测试一个点是否与由某些顶点定义的对象发生碰撞。

**编辑：** “地图”上会有物体，比如树木和房屋。我在想，甚至可能是洞穴。它也会有山丘等等，但我想高度图是不可能的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T22:35:00.470

如果您要自己动手解决方案，我会建议以下内容。

# 地形

最好让地形是一个网格，只有每个顶点的高度不同。结果是一堆四边形，每个四边形在 (x, y) 平面上具有相同的尺寸。顶点具有不同的 (z) 值来构成斜率。网格排列使您可以轻松地确定在执行碰撞检查时必须测试哪些三角形是否相交。

如果这不是一个选项（地形预建在建模包中），您可能无论如何都希望使用内存中的网格，并存储（部分）在每个单元格内的三角形列表。

## 检查碰撞

最简单的方法是考虑你的演员在空间中的点。然后，您将确定该点的地形高度，如下所示：

1.  确定点所在的网格单元格
2.  获取与单元格关联的三角形
3.  获取包含该点的三角形（在 (x, y) 平面内）
4.  获取点的三角形/平面的高度

在“纯网格”地形的情况下，步骤 3 仅涉及单点/平面检查以确定我们需要 2 个三角形中的哪一个。否则，您必须对每个三角形进行点中点检查（您可能可以重复使用点/平面检查或使用 BSP 进行进一步优化）。

第四步伪代码：

```
point = [ x, y, z ] // actor position

relativePt = point - triangle.vertices[0]
normal = triangle.plane.normal
distance = relativePt DOT normal // (this is a dot-product)

intersection = [
    point.x,
    point.y,
    point.z + distance / normal.z ] 
```

这会计算从演员位置向上/向下的光线与三角形平面的交点。这就是那个 (x, y) 位置的地形高度。然后您可以简单地检查演员的位置是否低于该高度，如果是，则将其 z 坐标设置为地形高度。

# 物体（房屋，树木，...）

为每个对象提供 1 个或多个凸面碰撞体积，它们一起大致对应于其实际形状（请参阅[UDN 上的此页面](http://udn.epicgames.com/Three/CollisionReference.html)以了解虚幻引擎如何处理对象的碰撞外壳）。

您将不得不使用一些空间细分技术来快速确定在移动演员时要检查*所有世界对象中的哪些碰撞。*如果大多数运动是二维的（例如，只有地形和一些房屋），您可以使用简单的网格或[四叉树](http://en.wikipedia.org/wiki/Quadtree)（类似于具有进一步细分的网格）。一个 3 维选项将是[octree](http://en.wikipedia.org/wiki/Octree)。

空间细分的点与组织为网格的地形相同：将放置对象与空间中的单元/体积相关联，以便您可以确定要检查碰撞的对象集，而不是检查与*所有*对象的碰撞.

## 检查碰撞

1.  使用您使用的空间细分技术获取“潜在的碰撞对象”；fe 获取actor当前网格单元中的对象。
2.  对于每个对象的每个凸碰撞体积：
3.  使用[分离轴定理](http://en.wikipedia.org/wiki/Hyperplane_separation_theorem)，确定actor是否与碰撞体积相交。有关一些实现提示，请参阅[我对另一篇文章的回答](https://stackoverflow.com/questions/10394329/javascript-separating-axis-theorem/10401714#10401714)（该问题与 2D 案例有关，但代码在很大程度上适用；只需将“边缘”读作“平面”）。
4.  如果发生碰撞，请使用“违规平面”之一的法线将actor移动到该平面旁边。

**注意：**在这种情况下，将 Actor 的碰撞体积建模为一个长方体或 3 面圆柱体左右。

此外，您可能需要考虑为每个对象构建一个 BSP 树，并为您的演员使用轴对齐的边界框。但这有点超出了这个答案的范围。如果您的对象将具有更复杂的碰撞体积，那将会更快。

# 最后的想法

好吧，这已经是一个很长的答案了，这些只是一些粗略的介绍。碰撞是一个相当广泛的话题，因为您可以根据需要采取许多不同的方法。

例如，我没有介绍“跟踪碰撞”，即在演员移动时检测碰撞。相反，上面关于对象的建议会检查演员是否在对象内。这可能适合也可能不适合您的需求。

我也刚刚意识到我还没有涵盖演员与演员的碰撞。也许最好在 (x, y) 平面上碰撞 2 个圆，并额外检查它们的垂直空间是否相交。

无论如何，我真的要结束这件事。希望这至少会为您指明正确的方向。

# blackberry - 如何在一个应用程序中将 BlackBerry Java SDK 与 BlackBerry WebWorks 集成

> ID：10829431
> 
> 赞同：1
> 
> 时间：2012-05-31T07:49:15.427
> 
> 标签：blackberry, blackberry-webworks

我想在我的应用程序中使用 BlackBerry Java SDK 开发一些模块，并使用 BlackBerry WebWorks 开发其他模块。我可以同时利用 Java SDK 和 WebWorks。我不知道如何将它们集成到一个应用程序中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T19:05:09.867

I would seriously consider choosing one or the other. All the major APIs are accessible via WebWorks, and if you need a Java component you can [build an extension](https://bdsc.webapps.blackberry.com/html5/documentation/ww_developing/Creating_and_using_a_JS_extensiong_in_your_widget_1316872_11.html).

The other way around, I suppose you could use some kind of webview that uses local html/css/js assets alongside a Java app, but that's a mess. You're better off just going with WebWorks.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T00:30:19.237

您可以使用 WebWorks 创建您的 UI，然后，无论您拥有什么 Java 代码，您都必须将扩展（.jar 文件）导入您的 WebWorks 项目。

[https://bdsc.webapps.blackberry.com/html5/documentation/ww_developing/using_javascript_extensions_1866976_11.html](https://bdsc.webapps.blackberry.com/html5/documentation/ww_developing/using_javascript_extensions_1866976_11.html)

# node.js - 如何在 node.js 中设置环境变量？

> ID：10829433
> 
> 赞同：111
> 
> 时间：2012-05-31T07:49:23.990
> 
> 标签：node.js

如何在 node.js 中设置环境变量？

我宁愿不依赖任何特定于平台的东西，例如运行导出或 cmd.exe 的设置。

* * *

## 回答 #1

> 赞同：171
> 
> 时间：2012-05-31T08:06:39.093

您可以在以下位置设置环境变量`process.env`：

```
process.env['VARIABLE'] = 'value'; 
```

*-或者-*

```
process.env.VARIABLE = 'value'; 
```

节点应该注意平台细节。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-05-29T06:13:18.943

首先你应该安装这个包：- [https://github.com/motdotla/dotenv](https://github.com/motdotla/dotenv) [ `npm install dotenv`]

然后您需要在项目的根目录中创建一个 .env 文件，您可以在其中添加如下变量：-

```
NODE_ENV=PRODUCTION
DATABASE_HOST=localhost 
```

现在您可以在代码中轻松访问这些变量，如下所示：-

```
require('dotenv').config()
console.log(process.env.NODE_ENV); 
```

它对我有用，希望能有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-05-26T11:15:56.903

**node v14.2.0** 设置环境变量首先在你的项目主目录中创建一个文件名 config.env 然后写入你需要的所有变量，例如

配置.env

```
NODE_ENV=development
PORT=3000
DATABASE=mongodb+srv://lord:<PASSWORD>@cluster0-eeev8.mongodb.net/tour-guide?retryWrites=true&w=majority
DATABASE_LOCAL=mongodb://localhost:27017/tours-test
DATABASE_PASSWORD=UDJUKXJSSJPWMxw 
```

现在从 npm 安装 dotenv，dotenv 将卸载你的工作

```
npm i dotenv 
```

现在在您的服务器启动器脚本中，在我的情况下，它是 server.js 使用 doenv 加载 env 变量。

```
const dotenv = require('dotenv');
dotenv.config({ path: './config.env' });
const app = require('./app'); // must be after loading env vars using dotenv

//starting server
const port = process.env.PORT || 3000;
app.listen(port, () => {
  console.log(`app running on port ${port}...`);
}); 
```

我用的是express，我所有的express代码都在app.js里，写在这里供大家参考

```
const express = require('express');
const tourRouter = require('./route/tourRouter');
const userRouter = require('./route/userRouter');

if (process.env.NODE_ENV === 'development') {
  console.log('mode development');
}
app.use(express.json());

app.use('/api/v1/tours', tourRouter);
app.use('/api/v1/users', userRouter);

module.exports = app; 
```

现在使用控制台启动你的服务器，我使用的是**nodemon**，你可以从 npm 安装它；

```
nodemon server.js 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-24T11:41:03.233

## 那么我要做的是首先从 npm 安装 dotenv 包

`npm install dotenv`

## 然后我将它导入到我的文件中。

`require('dotenv').config();`

## 那么你就可以走了。:)

您可以使用以下方法读取变量：

`console.log(process.env.MY_VARIABLE);`

虽然您可以使用以下方法***设置***变量：

`process.env.MY_OTHER_VARIABLE = 'helloworld`;

# java - 如何从生成的自动完成列表中选择第一个元素？

> ID：10829434
> 
> 赞同：1
> 
> 时间：2012-05-31T07:49:29.293
> 
> 标签：java, eclipse, google-chrome, selenium-rc

代码是-

```
selenium.click("id=j_idt743:j_idt2340:lnkpgPtMHXProblemShowAdd");
selenium.focus("id=j_idt743:j_idt2340:txtPtMHXProblemPastMedicalHistoryName"); 
selenium.type("id=j_idt743:j_idt2340:txtPtMHXProblemPastMedicalHistoryName",s1);
selenium.typeKeys("id=j_idt743:j_idt2340:txtPtMHXProblemPastMedicalHistoryName",s1);
selenium.keyDown("id=j_idt743:j_idt2340:txtPtMHXProblemPastMedicalHistoryName","\40");
selenium.keyDown("id=j_idt743:j_idt2340:txtPtMHXProblemPastMedicalHistoryName","\13"); 
```

关键事件不起作用.......

# caching - 在 Playframework 中缓存模型。我必须在哪里放置缓存代码？

> ID：10829437
> 
> 赞同：1
> 
> 时间：2012-05-31T07:49:49.393
> 
> 标签：caching, playframework, memcached, playframework-1.x

你能向我解释一下 - 我如何在 playframework 中使用 memcached？ 我必须将模型放在缓存中吗**？**

在官方网站的示例中，他们将缓存代码放在控制器中，但我认为这是个坏主意 - 控制器方法变得太复杂，我必须重复相同的代码部分。

我尝试将缓存代码放入模型的方法中（Overide save() 和 delete()）：

```
@Override
public News save() {
News news = super.save();
List<News> newsList = News.findAll();
Cache.set("news", newsList);
return news;
} 
```

但是我有更多的保存和删除方法！例如：

```
public static int deleteAll(); 
```

和

```
public static int delete(String query, Object... params); 
```

我无法覆盖它们，因为它们是静态的（在最后一个中，我无法接收有关已删除对象的信息）。

**我在互联网上找到了关于这个主题的内容：**

在[这个问题](https://stackoverflow.com/questions/9512154/is-there-a-auto-cache-framework-for-playframework)的答案中，我发现：“模型缓存：通过休眠完成，无需实现任何东西” **这是什么意思？**如何打开此选项？

这里有一些关于休眠缓存的信息[。](https://groups.google.com/group/play-framework/browse_thread/thread/d8e25dd8346aec68/0c713a2140dd1dab?lnk=raot)将变量放在 application.conf 中是必要的：

```
hibernate.cache.provider_class=com.googlecode.hibernate.memcached.Memcached CacheProvider 
hibernate.cache.use_query_cache=true 
hibernate.memcached.servers=127.0.0.1:11211 
hibernate.memcached.cacheTimeSeconds=300 
```

但是我在官方网站上没有找到关于这个变量的任何信息。

我需要帮助！如何正确进行缓存？谢谢！

# database - ms 访问转储到 sql 插入

> ID：10829438
> 
> 赞同：1
> 
> 时间：2012-05-31T07:49:50.420
> 
> 标签：database, ms-access

有没有一种方法可以将相当大的 ms 访问数据库转储为 INSERT INTO TABLE 格式的文件。我想对我的数据库中的所有表执行此操作。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T07:55:06.093

看看这个可能会对你有所帮助。

[将 MS ACCESS DB 导入到 mySql？](https://stackoverflow.com/questions/1453180/importing-ms-access-db-to-mysql)

或者，您可以将您的 MS Access 数据库导出为 CSV，然后使用 PHP 或 mySQL Query 将 csv 插入到 mySQL 数据库中。

```
LOAD DATA INFILE '$filename' INTO TABLE `report` FIELDS TERMINATED BY ',' LINES TERMINATED BY '\n'; 
```

# php - Zend Framework 中以 API 为中心的开发

> ID：10829439
> 
> 赞同：3
> 
> 时间：2012-05-31T07:49:53.030
> 
> 标签：php, model-view-controller, api, zend-framework

我正在尝试使用 Zend 框架创建以 API 为中心的 Web 服务。我希望前端与后端分离，所有通信都应仅使用 API 进行，如下图所示：

![在此处输入图像描述](../Images/67cf7930b45dff7962b8693e58ab14d8.png)

整体架构可以总结如下图所示：

![在此处输入图像描述](../Images/9ec8d54b932660c33be40d9b11910c9b.png)

我想知道在项目组织和文件夹结构方面最好的方法/实践是什么，最好使其与zend的项目组织方式兼容。

我是否应该创建两个单独的项目，一个仅用于处理前端，而另一个仅用作 API 服务器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T20:16:00.003

我会推荐一个使用 Zend 的 rest 控制器库的 API 单独的 Zend 应用程序。

这是一个很好的教程：[http](http://www.techchorus.net/create-restful-applications-using-zend-framework) ://www.techchorus.net/create-restful-applications-using-zend-framework 。您基本上使用与任何 zend 应用程序相同的文件结构。

然后我会为你的第 3 方提供一个完全独立的 zend 应用程序。

如果您将它们保存在同一台服务器上，您只需将它们放在不同的目录中。

```
3rdpartyapp /
    application/
    public/
    library/
    ...

api /
    application/
    public/
    library/
    ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T02:10:26.537

在此处试用 ZoHo [https://www.zoho.com/general/blog/announcing-the-zoho-projects-api.html](https://www.zoho.com/general/blog/announcing-the-zoho-projects-api.html)

# facebook - 有什么办法可以在facebook上回复朋友墙上的帖子？

> ID：10829443
> 
> 赞同：-1
> 
> 时间：2012-05-31T07:50:18.697
> 
> 标签：facebook, social-networking, social

我不确定这个问题在stackoverflow上是否有效。如果没有，请指出我正确的方向。

我朋友的姐姐最近去世了。她在 Facebook 上有超过 2500 个朋友，包括他。她的很多朋友都在他的FB墙上发布吊唁信息，天知道结果如何，包括给她家人的信息。

我的朋友希望回复这些消息，但无法这样做，因为似乎有一些隐私/帐户设置。

有人可以帮忙吗？

RIP 梅加

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T08:17:59.817

您需要访问她的帐户详细信息才能回复。即使您创建一个应用程序来自动回复每条消息，她的帐户也需要对该应用程序进行授权。最好保留她的个人资料并让她的兄弟向她的每个朋友发送个人信息（尽管这会很乏味）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T08:19:30.083

你可以看看这里：[facebook：报告死者的个人资料](https://www.facebook.com/help/contact/?id=305593649477238)

您可以做的是要求将帐户设置为“记忆帐户”状态

# php - Zend 中的 post 和 param 变量的区别

> ID：10829448
> 
> 赞同：0
> 
> 时间：2012-05-31T07:50:29.057
> 
> 标签：php, zend-framework, post, zend-form-element

我的一个助手中有这段代码

```
 $front = Zend_Controller_Front::getInstance();
 $request = $front->getRequest();  
 print_r($request->getParams()); 
```

结果

```
Array
(
    [controller] => packaging
    [action] => index
    [package] => 87
    [module] => default
    [groupid] => 32
    [packageid] => 87
    [conceptrel] => 161
    [always_same] => 
    [getparts] => 1
) 
```

这里有时 packageid 来自 POST，有时来自 url(getparam)..我怎么知道它是 post 还是 param？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T08:05:56.547

我得到了答案

```
$front = Zend_Controller_Front::getInstance();
$request = $front->getRequest();
print_r($request->getUserParams()); //only user params not post,get..etc 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T09:29:49.397

回答您提出的问题：

> *我怎么知道它是 post 还是 param ？*
> 
> **24.4.2.3**。确定请求方法 getMethod() 允许您确定用于请求当前资源的 HTTP 请求方法。此外，还有多种方法可让您在询问是否已发出特定类型的请求时获得布尔响应：
> 
> 是获取（）
> 
> 是邮政（）
> 
> isPut()
> 
> 是删除（）
> 
> 是头（）
> 
> 是选项（）

所以这会产生如下代码：

```
if ($this->getRequest()->isPost()){
    //do some stuff
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T08:02:37.183

您可以先检查请求是否已发布`$request->isPost();`

至于起源，您也可以为此编写一个助手。中的`getParams`方法`Zend_Controller_Request_Http`首先返回用户参数，然后是 GET，然后是 POST。当名称匹配时，最后一个是首选。您的助手必须考虑到这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T09:20:08.633

你也可以这样做：

```
$this->getRequest()->setParamSources(array('_POST')); 
```

并且您的`$_POST`数组将始终等于`getParams()`;

# python - 正则表达式：在 python 代码中找到一个禁止的字符

> ID：10829450
> 
> 赞同：0
> 
> 时间：2012-05-31T07:50:36.497
> 
> 标签：python, regex, interpreter

我需要使用正则表达式来确定单行 python 代码是否包含非法字符'$'。但它允许出现在评论中或作为字符串的一部分。意义：

```
"legal char $" illegal $ #legal $ 
```

上面的行应该失败，因为它的 $ 不是字符串或注释的一部分。如果我删除它，并得到

```
"legal char $" legal #legal $ 
```

这条线应该通过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T07:55:24.567

非法：在创建临时字符串后检查 a `.*$.*#?`，使用 re.sub 将行中的 \".*?\" 替换为空字符串。

合法的：不是非法的 :) 或`[^$]*#?`

# java - 如何使用本地 XSD 验证 beans.xml？

> ID：10829452
> 
> 赞同：1
> 
> 时间：2012-05-31T07:50:41.210
> 
> 标签：java, xsd, cdi, jboss-weld

在我的应用程序中，我有一些`beans.xml`文件（对于每个模块）。这些文件中的每一个都包含必需的 XSD 声明：

```
<beans xmlns="http://java.sun.com/xml/ns/javaee" 
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
       xmlns:weld="http://jboss.org/schema/weld/beans" 
       xsi:schemaLocation="
          http://java.sun.com/xml/ns/javaee http://docs.jboss.org/cdi/beans_1_0.xsd
          http://jboss.org/schema/weld/beans http://jboss.org/schema/weld/beans_1_1.xsd"> 
```

昨天，由于一些[JBoss.org 中断](https://twitter.com/jbossorg/status/202754151308988416)，模式文件不可用，因此我的 beans.xml 无法正确验证。

它并没有阻止项目验证，但减慢了项目构建速度（主要是由于测试中的焊接使用）。

那么，什么是解决方案，当使用 Weld 1.1.5 作为 CDI 实现时，在编译期间不验证 beans.xml，**或者**使用本地 XSD 文件（如果是，如何声明它，以及将它放在哪里一个Maven项目）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T16:24:19.320

刚刚和皮特缪尔谈过。他说这是一个错误。你介意创建一张 JIRA 票吗？

# c# - ASP.NET C# DateTime 模型/控制器/视图格式

> ID：10829456
> 
> 赞同：0
> 
> 时间：2012-05-31T07:50:46.273
> 
> 标签：c#, asp.net, datetime

我有一个带有 DateTime 时间的模型 Toto。
我有一个可以编辑 Toto 的基本控制器。
在编辑视图中，我可以看到以下格式的日期：MM/dd/yyyy hh:mm:ss AM(PM)
我将该时间存储在数据库中。
但是我怎样才能以这种格式显示它：dd/MM/yyyy。

我已经找到了方法，我只是添加

> [DisplayFormat(ApplyFormatInEditMode=false, DataFormatString = "{0:dd/MM/yyyy}")]

当我查看所有条目时效果很好，但在编辑模式下我具有相同的基本格式（MM/dd ...）。
所以我改变：

> ApplyFormatInEditMode=true

编辑视图中的格式很好，但是当我保存它时，它告诉我：值“30/10/2012”对时间无效。

如何在编辑视图中应用格式？

非常感谢。

* * *

要清楚，我想要格式：dd/MM/yyyy 而不是 MM/dd/yyyy

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T08:02:39.490

将 DataFormatString 更改为 {0:d} 就像

`[DisplayFormat(ApplyFormatInEditMode=true, DataFormatString = "{0:d}")]`

# android - iSpeech SDK Android 验证错误

> ID：10829458
> 
> 赞同：0
> 
> 时间：2012-05-31T07:50:50.387
> 
> 标签：android, verifyerror, ispeech

我使用[iSpeech Demo](http://www.ispeech.org/instructions/sampleprojects/android/fulldemo.html)设置了一个带有 iSpeech SDK 的测试应用程序，但它给了我以下我迷失的异常......

```
05-31 13:41:23.218: I/dalvikvm(271): Could not find method org.ispeech.SpeechSynthesis.getInstance, referenced from method org.ispeech.sdksample.TTSActivity.prepareTTSEngine
05-31 13:41:23.218: W/dalvikvm(271): VFY: unable to resolve static method 31: Lorg/ispeech/SpeechSynthesis;.getInstance (Landroid/app/Activity;)Lorg/ispeech/SpeechSynthesis;
05-31 13:41:23.218: D/dalvikvm(271): VFY: replacing opcode 0x71 at 0x0000
05-31 13:41:23.228: W/dalvikvm(271): VFY: unable to resolve exception class 37 (Lorg/ispeech/error/InvalidApiKeyException;)
05-31 13:41:23.228: W/dalvikvm(271): VFY: unable to find exception handler at addr 0x11
05-31 13:41:23.228: W/dalvikvm(271): VFY:  rejected Lorg/ispeech/sdksample/TTSActivity;.prepareTTSEngine ()V
05-31 13:41:23.228: W/dalvikvm(271): VFY:  rejecting opcode 0x0d at 0x0011
05-31 13:41:23.228: W/dalvikvm(271): VFY:  rejected Lorg/ispeech/sdksample/TTSActivity;.prepareTTSEngine ()V
05-31 13:41:23.228: W/dalvikvm(271): Verifier rejected class Lorg/ispeech/sdksample/TTSActivity;
05-31 13:41:23.228: W/dalvikvm(271): Class init failed in newInstance call (Lorg/ispeech/sdksample/TTSActivity;)
05-31 13:41:23.228: D/AndroidRuntime(271): Shutting down VM
05-31 13:41:23.228: W/dalvikvm(271): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
05-31 13:41:23.248: E/AndroidRuntime(271): FATAL EXCEPTION: main
05-31 13:41:23.248: E/AndroidRuntime(271): java.lang.VerifyError: org.ispeech.sdksample.TTSActivity
05-31 13:41:23.248: E/AndroidRuntime(271):  at java.lang.Class.newInstanceImpl(Native Method)
05-31 13:41:23.248: E/AndroidRuntime(271):  at java.lang.Class.newInstance(Class.java:1429)
05-31 13:41:23.248: E/AndroidRuntime(271):  at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
05-31 13:41:23.248: E/AndroidRuntime(271):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2577)
05-31 13:41:23.248: E/AndroidRuntime(271):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
05-31 13:41:23.248: E/AndroidRuntime(271):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
05-31 13:41:23.248: E/AndroidRuntime(271):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
05-31 13:41:23.248: E/AndroidRuntime(271):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-31 13:41:23.248: E/AndroidRuntime(271):  at android.os.Looper.loop(Looper.java:123)
05-31 13:41:23.248: E/AndroidRuntime(271):  at android.app.ActivityThread.main(ActivityThread.java:4627)
05-31 13:41:23.248: E/AndroidRuntime(271):  at java.lang.reflect.Method.invokeNative(Native Method)
05-31 13:41:23.248: E/AndroidRuntime(271):  at java.lang.reflect.Method.invoke(Method.java:521)
05-31 13:41:23.248: E/AndroidRuntime(271):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
05-31 13:41:23.248: E/AndroidRuntime(271):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
05-31 13:41:23.248: E/AndroidRuntime(271):  at dalvik.system.NativeStart.main(Native Method) 
```

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-04T14:27:15.150

他们论坛上的这个帖子似乎回答了你的问题： [http ://www.ispeech.org/forums/showthread.php/942-Verify-Error](http://www.ispeech.org/forums/showthread.php/942-Verify-Error)

# bluetooth - 使用 WMI 列出并启用禁用的蓝牙服务？

> ID：10829463
> 
> 赞同：0
> 
> 时间：2012-05-31T07:51:19.857
> 
> 标签：bluetooth, wmi

我目前正在寻找一种方法来列出远程蓝牙设备公开的服务并启用它们。

通常我会使用 WindowsAPI 函数（或更可能是已知的包装器之一）来列出服务并通过 GUID (SetServiceEnable) 启用它们。

**问题是，该设备公开了两个具有相同 GUID 的服务！**

因此，使用 windowsAPI 函数只能启用这些服务之一。无法启用其他服务。

我想也许 WMI 可以解决问题，但我还是 WMI 的新手，找不到任何

Windows 本身能够通过服务菜单同时启用、不启用或启用特定服务。

**更新** 我要解决的问题是能够启用第一个或第二个服务。现在只有第一个服务（通常是我需要的服务），但我找不到启用第二个服务的解决方案（使用 Windows UI 除外）。

如果启用了这两个服务，我在 devicemanager (SPP) 中有两个 Commports。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-02T08:22:14.200

由于我无法添加评论/问题（还没有 stackoverflow 的特权）。这是我最好的选择。

如果我理解正确的话，在服务记录中多次提供服务是无效的，对吧？您能否在蓝牙配对 UI 中右键单击设备并查看是否看到两个服务，并且您可以通过 Windows UI 启用它们？一旦启用它们，您是否会在设备管理器中看到该设备下的两个 PNP devnodes（按连接查看），它们具有您启用的两个服务的相应相反角色？（我不能尝试这个，因为我不知道我拥有的具有两个相同 UUID 的设备。）

您可能已经知道，当您在远程设备上启用服务时，您实际上并没有通过 Windows 蓝牙 API 在远程设备上启用该服务。您正在做的是告诉Windows中的核心蓝牙组件生成服务的相应相反角色。（这就是 BluetoothSetLocalServiceInfo 所做的。）例如，如果远程设备支持 A2DP 接收器，则通过启用该服务，桌面上的蓝牙服务将为该设备注册一个 A2DP 源服务，该服务会生成一个 PNP devnode 用于将 A2DP 源驱动程序匹配到安装在那个devnode上。通过禁用该服务，蓝牙服务将注销 A2DP 源 devnode 并且 PNP devnode 将被删除（有点像拔掉 USB 设备）。

根据您看到的重复配置文件，在远程设备的同一 mac 地址上匹配两个设备对象和驱动程序对象的实例可能没有意义。

我的回答（实际上并没有回答您的问题）是检查在这种情况下在桌面上启用这两项服务是否有效，并且您将使用桌面上的驱动程序。例如，A2DP 和 HFP 的捆绑将需要 A2DP 和 HFP 来同步某些行为，例如 AVDTP 挂起。根据实现和驱动程序，他们可能不会期望安装了两个 A2DP 驱动程序实例，从而导致本地驱动程序出现意外状态。

# django - Postgresql 和 django - Unix 域套接字

> ID：10829464
> 
> 赞同：7
> 
> 时间：2012-05-31T07:51:27.137
> 
> 标签：django, postgresql

我花了几个小时来解决这些问题，但没有解决任何问题。网上有几个关于这个问题的话题，但没有一个说绝对可以解决这个问题。

我刚刚安装了 postgresql 以便在我的 django 项目中使用它。

```
DATABASES = {
    "default": {
        "ENGINE": "django.db.backends.postgresql_psycopg2", # Add "postgresql_psycopg2", "postgresql", "mysql", "sqlite3" or "oracle".
        "NAME": "name",                       # Or path to database file if using sqlite3.
        "USER": "postgres",                             # Not used with sqlite3.
        "PASSWORD": "pass",                         # Not used with sqlite3.
        "HOST": "",                             # Set to empty string for localhost. Not used with sqlite3.
        "PORT": "",                             # Set to empty string for default. Not used with sqlite3.
    }
} 
```

这是我的 settings.py，错误是

```
could not connect to server: No such file or directory
    Is the server running locally and accepting
    connections on Unix domain socket "/var/run/postgresql/.s.PGSQL.5432"? 
```

有人对此有解决方案吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-31T11:06:16.887

您需要找到一个 postgres 套接字。检查主 postgres 进程 pid ( `ps auxw | grep postgres`) 并列出其打开的 unix 套接字 ( `lsof -p [PID_OF_POSTGRES_PROCESS] | grep unix`)。将此路径写入`HOST`选项中`settings.py`。

从分发包`apt-get install postgresql`（`settings.py`

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-21T01:25:21.850

这是另一种可能性：如果您在现有版本上安装了新版本的 PostgreSQL，安装程序可能已为其分配了一个非标准端口号。

Django 期望 PostgreSQL 监听端口 5432。即使你使用的是 Unix 套接字，套接字也是以端口号命名的，所以这仍然很重要！

检查`/etc/postgresql/<version>/main/postgresql.conf`线路`port = nnnn`。如果那个数字不是 5432，那是你的问题。另一个指标是您的套接字文件`/var/run/postgresql`将`.s.PGSQL.5433`使用非标准端口号调用类似的东西。

要修复它，您可以编辑端口号`postgresql.conf`以使用默认（5432），或者如果您需要它在非标准端口号上运行，然后`DATABASE_PORT = 'nnnn'`在您的 django中设置`settings.py`。

感谢[Erik Forsberg](http://efod.se/blog/archive/2010/02/06/pscopg2-operationalerror)的指点！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-10T17:24:33.593

在当代的 Fedora 系统上，添加了一个私有临时目录功能，它会导致这种症状。[https://fedoraproject.org/wiki/Features/ServicesPrivateTmp](https://fedoraproject.org/wiki/Features/ServicesPrivateTmp)

此功能导致 Web 应用程序使用与默认 PostgreSQL 域 socked 所在的系统 /tmp 目录不同的 tmp 目录。

要在 Fedora 上为 Apache-httpd 更改此功能的 systemd 指令，请编辑文件`/usr/lib/systemd/system/httpd.service`并将其更改`PrivateTmp=true`为`PrivateTmp=false`

或者，您可以避免使用域套接字来避免此问题。

# apache - 如何更好地解决反水蛭问题？

> ID：10829465
> 
> 赞同：0
> 
> 时间：2012-05-31T07:51:30.537
> 
> 标签：apache, web

当我遇到热吸问题时，我搜索了该网站并找到了两种解决方法。第一种是更简单的方法，代码如下所示：

```
RewriteEngine On 
RewriteCond %{HTTP_REFERER}!^$ Options +FollowSymlinks 
RewriteCond %{HTTP_REFERER}!^http://(www\.)?mydomain.com(/)?.*$ [NC] 
RewriteRule .*\.(gif¦jpg¦jpeg¦png¦swf)$ [mydomain.com...] [R,NC]" 
```

这只能防止一些简单的偷窃，但对一个有决心的人却无能为力。

另一种方法是基于脚本和 cookie 的更好方法。他们说：“你在网站的‘授权’页面上设置了一个 cookie，然后只有在图像请求中存在正确的 cookie 时才使用脚本来提供图像。图像保存在只有脚本可以访问的目录中，并且不是通过网络。因此，该脚本充当您网站上的“图像服务器”。” 我理解这个原则，但不知道如何实现它。谁能知道如何实现这一点？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T08:07:14.847

我不能真正给出任何实现，而只是对如何实现它的一些想法：

您将需要一个“门户”页面，在其中为用户设置 cookie。任何没有您网站 cookie 的资源请求都应在此处重定向。这里可能没有登录机制，这取决于您网站的用途，但通常您会在用户登录后设置 cookie。

所有资源链接都将链接到同一个“脚本”页面。不同之处在于不同的资源将具有不同的标识符（可以是某种 id - 如果您维护 id 到文件路径映射的数据库）。标识符必须包含在 URL 的查询中。“脚本”将根据标识符在服务器上查找资源（在 id 到文件映射的情况下，您将获取文件路径并检索文件）。

会有一个“脚本”页面，例如可以是 php 代码。它将检查 cookie，然后检查标识符，然后相应地加载资源。您可能还需要检查Referer 以进一步限制访问（不检查，热链接将适用于任何登录用户）。

* * *

在此实现中，共享资源的热链接对于尚未访问“门户”页面（或尚未登录，具体取决于您的网站）的任何用户都不起作用。如果登录用户从其他地方单击链接，它也将不起作用。

但是，在您的问题中提到的两种实现中，抓取您的网站以获取资源都很简单，因为抓取器可以自由调整 HTTP 标头。

# wpf - 网格中是否有最大列数？如何改变它？

> ID：10829470
> 
> 赞同：1
> 
> 时间：2012-05-31T07:52:07.093
> 
> 标签：wpf, gridview

我正在使用带有 DevXpress GridControl 的 WPF 网格，显然我不能显示超过 31 列。可能吗？

如果是这样，有没有办法超过这个限制？

# ruby - Ruby：如何将数据数组转换为散列和 json 格式？

> ID：10829473
> 
> 赞同：9
> 
> 时间：2012-05-31T07:52:33.527
> 
> 标签：ruby

我对 Ruby 数组和哈希操作非常陌生。

我该如何做这个简单的转换？

```
array = [#<struct id=1, car='red'>, #<struct id=2, car='yellow'>, #<struct id=3, car='green'>] 
```

所需的 json 输出：

```
[{id : 1, car : 'red'} , {id:2, car :'yellow'} ,{id:3 , car: "green"}] 
```

有没有人有任何提示？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-31T08:02:58.560

```
array.map { |o| Hash[o.each_pair.to_a] }.to_json 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-31T08:01:11.260

将`struct`对象数组转换为 数组`hash`，然后调用`to_json`. 您需要 require `json`(ruby 1.9) 才能使用该`to_json`方法。

```
array.collect { |item| {:id => item.id, :car => item.car} }.to_json 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-31T08:10:38.307

默认情况下，当使用 json ruby​​ gem 编码为 json 时，Struct 实例将显示为字符串：

```
require 'json'
array = [#<struct id=1, car='red'>, #<struct id=2, car='yellow'>, #<struct id=3, car='green'>] # assuming real structure code in the array
puts array.to_json 
```

印刷

```
["#<struct id=1, car='red'>", "#<struct id=2, car='yellow'>", "#<struct id=3, car='green'>"] 
```

这显然不是你想要的。

下一个合乎逻辑的步骤是确保您的结构实例可以正确序列化为 JSON，以及从 JSON 中创建回来。

为此，您可以更改结构的声明：

```
YourStruct = Struct.new(:id, :car)
class YourStruct
  def to_json(*a)
    {:id => self.id, :car => self.car}.to_json(*a)
  end

  def self.json_create(o)
    new(o['id'], o['car'])
  end
end 
```

因此，您现在可以编写以下内容：

```
a = [ YourStruct.new(1, 'toy'), YourStruct.new(2, 'test')]
puts a.to_json 
```

哪个打印

```
[{"id": 1,"car":"toy"},{"id": 2,"car":"test"}] 
```

并从 JSON 反序列化：

```
YourStruct.json_create(JSON.parse('{"id": 1,"car":"toy"}'))
# => #<struct YourStruct id=1, car="toy"> 
```

# iphone - 视图上的可触摸多边形？

> ID：10829474
> 
> 赞同：0
> 
> 时间：2012-05-31T07:52:37.527
> 
> 标签：iphone, ios, opengl-es

我需要显示一个视图，我需要在该视图上使用其顶点为多边形设置动画。多边形应该是可触摸的，因此一旦被触摸就会触发一个事件，并且一旦它触发了该事件，我需要能够使用一些动画过程来移动它的顶点。
我需要三个这样的多边形来形成一个 3D 立方体。

变暗的区域是我拥有立方体的视图（实际上是图像）。

![在此处输入图像描述](../Images/02bb27241c91382918da358ce9401ee7.png)

![在此处输入图像描述](../Images/8623c8ed8ad25d2deb5e5dc8603e2392.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T10:12:22.343

该过程有两个步骤：绘图和事件处理。

可以使用 Quartz2D 进行绘图，通过在视图中实现 drawRect，计算屏幕上立方体的坐标，然后创建和绘制路径，这对于实心填充的形状非常有效。另一种方法使用您指定三角形的 OpenGL 视图。

在事件处理端，可以实现 onTouchesBegan: 和好友获取交互的位置，可能还有 hitTest: 允许其下的其他视图处理后续事件。接下来你需要决定的是你想要的准确度——你可以定义一个与立方体大致匹配的盒子并测试它的触摸。无论如何，大多数人都会想在中间的某个地方触摸它。为了准确测试，您需要屏幕坐标，并测试每个多边形中的每个三角形以查看它是否包含位置。谷歌对此所需的数学进行[了很好的解释](http://www.blackpawn.com/texts/pointinpoly/default.html)。在 OpenGL 的情况下，您必须手动重复 OpenGL 执行的计算，以找出您的多边形在屏幕上的最终位置。

# java - 使用重定向 Spring-MVC 时错误消息丢失

> ID：10829479
> 
> 赞同：0
> 
> 时间：2012-05-31T07:53:29.377
> 
> 标签：java, spring, spring-mvc

我正在开发一个基于 Spring-MVC 的应用程序，需要向最终用户显示错误消息，以防过程中出现问题。这是我正在做的一段代码

```
GlobalMessages.addErrorMessage(model, "facebook.user.accessDenied");
return REDIRECT_PREFIX + "http://localhost:8080/storefront"; 
```

我在 UI 中使用标签来显示错误消息，但似乎使用重定向只是删除我的错误消息。我是 Spring-MVC 的新手，不确定我做对了还是错了。

我注意到的一件奇怪的事情是，在重定向 URL 时，正在更改

```
http://localhost:9001/storefront/?errorKey=facebook.user.accessDenied 
```

这是 addErrorMessage 函数的剩余部分

```
public static void addErrorMessage(final Model model, final String messageKey)
    {
        addMessage(model, ERROR_MESSAGES_HOLDER, messageKey);
    }

protected static void addMessage(final Model model, final String messageHolder, final String messageKey)
    {
        if (model.containsAttribute(messageHolder))
        {
            final Map<String, Object> modelMap = model.asMap();
            final List<String> messageKeys = new ArrayList<String>((List<String>) modelMap.get(messageHolder));
            messageKeys.add(messageKey);
            model.addAttribute(messageHolder, messageKeys);
        }
        else
        {
            model.addAttribute(messageHolder, Collections.singletonList(messageKey));
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T09:34:42.597

我无法理解您究竟想在这里实现什么。但我猜你试图在控制器级别完成验证后显示错误消息，然后想再次显示相同的表单但有错误消息。

我也对您的**REDIRECT_PREFIX**变量感到困惑。它的价值是什么？？如果您使用“重定向：”作为其值，那么这就是问题所在。当您重定向到其他视图时，您附加到模型属性的错误消息将不会显示在表单中。您只需指定显示表单的视图名称，spring 将自动显示与您的模型属性绑定的错误。

希望这对您有所帮助。干杯。

# activex - ActiveXControl 中的 DatTimePicker 在 WEB 应用程序中使用只能第一次使用？之后不工作

> ID：10829488
> 
> 赞同：0
> 
> 时间：2012-05-31T07:53:54.557
> 
> 标签：activex, datetimepicker

我的 ActiveXControl 中有 VB.Net windows DateTimePicker 控件。当我在我的 Web 应用程序中使用这个 ActiveX 控件时，我的 dateTime 选择器控件仅在应用程序加载时才第一次工作。之后它根本不会显示日历。此外，我无法从我的 Web 应用程序中调试 ActiveX 控件。

有趣的是，当我将 AtciveXControl 用作单独的应用程序并运行时，它对我来说效果很好。但是当在 WEB 应用程序中使用时，我遇到了这个问题。请建议/建议。或者这是任何 dll 问题等我无法弄清楚。提前致谢 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T08:01:01.963

我得到了解决方案。整个问题是因为一行 - Application.EnableVisualStyles() 。(System.Windows.Forms.Application.EnableVisualStyles()) 希望这对遇到麻烦的人有所帮助。

# windows-phone-7 - 我想为列表框中的每一行制作 3 个文本块。

> ID：10829494
> 
> 赞同：0
> 
> 时间：2012-05-31T07:54:30.437
> 
> 标签：windows-phone-7

```
<ListBox>
    <ListBox.ItemTemplate>
        <DataTemplate>
            <StackPanel Width="479" Height="50">
                <StackPanel.Background>
                    <ImageBrush ImageSource="images/blue_cell.png" Stretch="Fill" />
                </StackPanel.Background>
                <TextBlock x:Name="section" Text="{Binding FallbackValue=day}" Foreground="White" FlowDirection="LeftToRight" Visibility="Visible" />
             </StackPanel>
         </DataTemplate>
     </ListBox.ItemTemplate>
 </ListBox> 
```

我想为`listbox`. 每个都`textBlock`包含我定义的列表中的一个值。它是一个类中的项目。

我使用绑定数据时的问题`fallbackvalue`是，它返回给我列表框的项目，而不仅仅是一天。

示例：listBox 行包含名称和日期。我想要文本框中的一天和列表框同一行中的另一个文本框中的一天，但文本块不同。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T09:25:38.387

我认为您对它的用途感到困惑`FallbackValue`。它是绑定失败时显示的字符串。

假设您要购买看起来有点像这样的对象集合：

```
class Item
{
    public string Name { get; set; }
    public string Day { get; set; }
} 
```

您可以创建类似于您所追求的东西：

```
<ListBox> 
    <ListBox.ItemTemplate> 
        <DataTemplate> 
            <StackPanel Orientation="Horizontal"> 
                <TextBlock Text="{Binding Day}" />
                <TextBlock Text="{Binding Name}" />
                <TextBlock Text="{Binding Day}" /> 
            </StackPanel> 
        </DataTemplate> 
    </ListBox.ItemTemplate> 
</ListBox> 
```

# coldfusion - 在没有控制器方法的情况下隐藏 FW/1 操作（仅查看）

> ID：10829496
> 
> 赞同：1
> 
> 时间：2012-05-31T07:54:42.897
> 
> 标签：coldfusion, controller, fw1

目前我在我的 FW/1 视图中使用“部分”概念：这些布局块可以被不同的视图重用。它们带有下划线前缀以便于维护，但与 CFWheels 不同，它们仍然可以用作不太好的隐式视图。

例如，有一个目录结构：

```
/views/member/_user.cfm
/views/member/profile.cfm
/views/member/register.cfm 
```

这样，实际用户表单位于 _user.cfm 中，并且可以使用`#view('member/_user')#`.

我想要的是阻止访问`member._user`网站上的页面。

一种解决方案是在控制器中创建`_user`方法`member.cfc`并将用户重定向到某处。但是为每个部分创建这样的方法是一种低效的方法。

替代方法是解析`rc.action`in`before`并检查前缀中是否有下划线，但我不确定这是干净的解决方案。

如果控制器中没有相应的方法，是否可以禁用该操作（抛出 404）？或者也许有一些框架事件/标志可以让我处理“缺少方法”的情况`before`？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T15:11:25.483

您可以在控制器中创建一个方法来检查 rc.action 以查看*项目*部分是否以 _ 开头并重定向到其他地方（或引发错误，或任何您想做的事情）。然后在 Application.cfc 中的*setupRequest()方法中使用**controller()*函数调用此方法。

 *例如，我有一个带有*checkItem()方法的**controllers/security.cfc*控制器，如下所示：

 *```
function checkItem( rc ) {
    //check if restricted item hss been requested and redirect to main.default
    if ( left(variables.fw.getItem(), 1) eq "_" ) {
        variables.fw.redirect('main');
    }
} 
```

并在 Application.cfc 的 setupRequest() 中调用它：

```
function setupRequest() {
    //controller( 'security.authorize' );
    controller( 'security.checkItem' );
} 
```

这样，它会在每个请求上自动调用 - 无需为控制器中的每个 _item 定义单独的方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T05:17:29.740

最简单的方法是将它们放在不在 Web 根目录中的文件夹中。因此，它们无法通过网络访问。然后使用 ColdFusion 映射使它们可用于 ColdFusion。

有道理？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T15:47:19.857

您可以使用[mod_rewrite](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)来检测包含`/_`并酌情阻止/重定向的 URL。

例如：

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} ^/\w+/_
RewriteRule ^.* /error/404 [L] 
```

第一个 RewriteCond 确保该文件不存在 - 因此，如果您有一个真实文件`/css/_default.css`，则任何对该文件的请求都将失败此条件并且不会重定向。

第二个 RewriteCond 接受第一个段的任何字母数字，然后如果`_`在第二个段的开头有 a 则继续。（不必匹配整个 URI，只要开头就足够了。）

最后，仅当两个条件都为真时才应用 RewriteRule，但匹配所有 URL，并执行服务器端重定向到`/error/404`- 您可以根据需要更新该部分。（该`[L]`标志告诉 mod_rewrite 不要尝试任何进一步的重写。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T06:28:10.277

好的，因为没有我期望的答案（这很好），这是我已经用于电子邮件模板的另一种方法。

在`/views/emails/`所有视图中都是电子邮件模板，它们没有操作，但只能像这样调用：

```
local.body = variables.fw.view("emails/registration_confirmation", local.attrs);
local.template = variables.fw.view("emails/default", {body = local.body}); 
```

`registration_confirmation.cfm`特定电子邮件正文的模板在哪里，并且`default.cfm`（可以不同地称呼它）是电子邮件模板本身。

为了防止我在问题控制器中描述的问题，`emails.cfc`如下所示：

```
component extends="components.helpers.controller" {

    public void function before(required struct rc) {
        variables.fw.redirect("user.forbidden");
    }

} 
```

我想可以再创建一个这样的控制器`partials.cfc`并将所有视图保留在`/views/partials/`.

但这是我在现实生活中的第一个 FW/1 项目，我的想法来得太晚了，无法重构这么多视图 (1)，而且我认为从维护的角度来看，在同一目录中包含部分内容比将它们*放在制作的地方更糟糕对他们有感觉*（2）。

这是我问这个问题的两个原因。**

# spotify - 检索专辑/播放列表信息 API

> ID：10829497
> 
> 赞同：0
> 
> 时间：2012-05-31T07:54:49.757
> 
> 标签：spotify

我在另一个线程（http://stackoverflow.com/questions/9474011/showing-a-album-cover）中读到：

> 请不要使用任何 sp。API - 它们是私有的，很快就会消失。

我的问题是，从 API 获取专辑和/或播放列表信息的正确方法是什么？

我目前正在玩这个：

```
sp.core.getMetadata(uri, {
    onSuccess: function(uri) {
       // Success
    },
    onFailure: function() {
       // Failure
    }
}); 
```

我想这是私人的，不应该使用对吗？相反，我应该从模型中获取信息。* 对象？如果没有，是否有另一种首选方法来处理这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T08:36:51.670

始终使用模型。文档可以在[这里](https://developer.spotify.com/technologies/apps/docs/beta/)找到。

例如：

```
var sp = getSpotifyApi(1);
var models = sp.require('sp://import/scripts/api/models');

var a = models.Album.fromURI("spotify:album:5zyS3GEyL1FmDWgVXxUvj7", function(album) {
    console.log("Album loaded", album.name);
}); 
```

# iphone - iPhone 将图像发布到 Facebook 订阅源

> ID：10829501
> 
> 赞同：7
> 
> 时间：2012-05-31T07:55:05.403
> 
> 标签：iphone, objective-c, facebook, facebook-graph-api

```
NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                               photoDescription, @"message",
                               image, @"image",
                               nil];

[facebook requestWithGraphPath:@"me/photos"
                                    andParams:params
                                andHttpMethod:@"POST"
                                  andDelegate:self]; 
```

这就是我将图像上传到 Facebook 的方法。图片已成功上传到 Facebook 'photos'。但我想将图像发布到我的 Facebook 订阅源。所以我尝试了，

```
[facebook requestWithGraphPath:@"me/feed"
                                    andParams:params
                                andHttpMethod:@"POST"
                                  andDelegate:self]; 
```

但它仍然是发布到“照片”的图像。它没有出现在Feed中...

我搜索并使用了不同的方法来解决问题，但我找不到任何有用的东西......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-17T11:05:10.680

```
UIImage* image=...;
if ([FBSession.activeSession.permissions
         indexOfObject:@"publish_actions"] == NSNotFound) {

        NSArray *permissions =
        [NSArray arrayWithObjects:@"publish_actions",@"publish_stream", nil];
        [[FBSession activeSession] requestNewPublishPermissions:permissions defaultAudience:FBSessionDefaultAudienceFriends
                                              completionHandler:^(FBSession *session, NSError *error) {}];
    }
    else
    {
    NSMutableDictionary* params = [[NSMutableDictionary alloc] init];
    [params setObject:@"Photo post test..." forKey:@"message"];
    [params setObject:UIImagePNGRepresentation(image) forKey:@"picture"];
    //for not allowing multiple hits

        [FBRequestConnection startWithGraphPath:@"me/photos"
                                 parameters:params
                                 HTTPMethod:@"POST"
                          completionHandler:^(FBRequestConnection *connection,
                                              id result,
                                              NSError *error)
     {
         if (error)
         {
             //showing an alert for failure
             UIAlertView *alertView = [[UIAlertView alloc]
                                       initWithTitle:@"Post Failed"
                                       message:error.localizedDescription
                                       delegate:nil
                                       cancelButtonTitle:@"OK"
                                       otherButtonTitles:nil];
             [alertView show];

         }
         else
         {
             //showing an alert for success
             UIAlertView *alertView = [[UIAlertView alloc]
                                       initWithTitle:@"Post success"
                                       message:@"Shared the photo successfully"
                                       delegate:nil
                                       cancelButtonTitle:@"OK"
                                       otherButtonTitles:nil];
             [alertView show];

         }
     }];
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T09:29:10.247

不知道你的`params`样子，但试试这个..

```
UIImage *image = ...// some image.

NSData *imageData= UIImagePNGRepresentation(image);

NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                           @"some message", @"message", imageData,@"source", nil];

[facebook dialog:@"feed" andParams:params andDelegate:self]; 
```

# c# - 当我知道成员名称时，访问动态对象成员的最佳方式是什么？

> ID：10829504
> 
> 赞同：4
> 
> 时间：2012-05-31T07:55:07.437
> 
> 标签：c#, dynamic, .net-4.0

给定一个动态对象和一个字符串成员名称：

```
string AMemberNameIKnowExists = "SomeMember"; //determined at runtime
dynamic myDynamicObject = //... 
```

我想访问我的动态对象上的“SomeMember”成员。我是否必须使用标准反射工具，或者我拥有一个动态对象这一事实是否为我提供了一种通过名称解析成员的更好方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T08:42:49.537

我没有对此进行测试，但您应该可以使用`DynamicObject`'s[`TryGetMember`](http://msdn.microsoft.com/en-us/library/system.dynamic.dynamicobject.trygetmember.aspx)方法：

```
myDynamicObject.TryGetMember(new GetMemberBinder("SomeMember", false), out result) 
```

据我了解`dynamic`，这就是动态调用`myDynamicObject.SomeMember`被翻译成的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T07:59:02.393

Try this way to get property value form the object

```
myDynamicObject.GetType()
               .GetProperty("SomeMember")
               .GetValue(myDynamicObject, null); 
```

# eclipse - Eclipse Indigo：安装 PTP 后 C/C++ 断点不起作用

> ID：10829508
> 
> 赞同：1
> 
> 时间：2012-05-31T07:55:27.467
> 
> 标签：eclipse, breakpoints, eclipse-indigo

在我的 Eclipse 经典版上安装并行工具平台 (PTP) 后，我的 C/C++ 应用程序的所有断点都停止工作。创建断点时，Eclipse 不是创建一个小蓝点，而是放置一个大绿点（表示 MPI 应用程序中使用的断点）。由于我的项目是 C/C++ 项目，因此在调试模式下会完全忽略这些“并行”断点。

任何人都知道如何将调试设置重置为 C/C++？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T07:59:01.417

检查运行->断点类型->C/C++断点。我的设置为并行断点。

# objective-c - NSDateFormatter 产生（空）SQLite 和 iOS 5.1

> ID：10829511
> 
> 赞同：2
> 
> 时间：2012-05-31T07:55:43.650
> 
> 标签：objective-c, ios, ipad, datetime

也许有人可以帮助解释为什么我在将字符串转换为日期时得到一个空值。一切看起来都不错，但我显然在这里遗漏了一些东西。

一些背景：

这个 iPad 应用程序将在不同的国家/地区使用，我需要计算日期以查看自用户上次登录以来是否已过去 90 天。

我有一个 SQLite 数据库，其中 DateLastIn 字段设置为 TEXT

我的对象有一个 DateLastIn 属性设置为 NSDate

在填充我的记录对象时，我设置了一个 NSDateFormatter 。

```
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"yyyy-MM-dd hh:mm:ss"];  // SQLite default date format 
```

然后我阅读了 DateLastIn（使用 FMDB 包装器用于 SQLite）。

```
 // test SQLite as String
        NSString *testDate = [results stringForColumn:@"DateLastIn"];
        NSLog(@"DateLastIn straight from DB (string) shows %@", testDate); 
```

结果： **直接来自 DB（字符串）的 DateLastIn 显示 2012-04-23 18:20:51**

到目前为止一切都很好。接下来我测试将其转换为 NSDate 对象，例如

```
 NSDate *aDate = [[NSDate alloc] init];
        aDate = [formatter dateFromString:testDate];
        NSLog(@"Using formmater on string date results in: %@", aDate); 
```

结果： **在字符串日期上使用格式化程序会导致：（空）**

我在 SQLite 中尝试过 DATETIME，我尝试在我的对象中使用 NSString 而不是 NSDate 并且似乎在绕圈子。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T08:37:51.200

`NSDateFormatter`使用[来自 Unicode Technical Standard #35 的格式模式](http://unicode.org/reports/tr35/tr35-10.html#Date_Format_Patterns)。

对于小时格式，您需要`HH`(Hour [0-23]) 而不是`hh`(Hour [1-12])。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T08:41:30.617

我将您的日期格式更改为 HH 而不是 hh 并且它有效。这是我的测试代码....

```
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateFormat:@"yyyy-MM-dd HH:mm:ss"];  // SQLite default date format

// test SQLite as String
NSString *testDate = @"2012-04-23 18:20:51";

NSDate *aDate = [formatter dateFromString:testDate];

NSLog(@"Using formmater on string date results in: %@", aDate); 
```

# sed - 如何将输入和输出作为同一个文件运行 sed 命令？

> ID：10829514
> 
> 赞同：59
> 
> 时间：2012-05-31T07:55:53.733
> 
> 标签：sed

我正在尝试在 shell 脚本中使用 sed 命令，我想在其中删除 read 的`STARTremoveThisComment`行和 read 的行`removeThisCommentEND`。

当我将它复制到一个新文件时，我可以做到这一点

```
sed 's/STARTremoveThisComment//' > test 
```

但是如何通过使用相同的文件作为输入和输出来做到这一点？

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2012-05-31T08:00:43.493

`sed -i`（或扩展版本，`--in-place`）将自动化通常使用不太高级的实现完成的过程，将输出发送到临时文件，然后将其重命名回原始文件。

`-i`用于就地编辑，您还可以提供备份后缀以保留原始副本：

```
sed -i.bak fileToChange
sed --in-place=.bak fileToChange 
```

这两个都将原始文件保留在`fileToChange.bak`.

请记住，就地编辑可能并非在所有`sed`实现中都可用，但它*是*在 GNU`sed`中的，根据您的标签，它应该在所有 Linux 变体上都可用。

如果您使用的是更原始的实现，则可以使用以下内容：

```
cp oldfile oldfile.bak && sed 'whatever' oldfile >newfile && mv newfile oldfile 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2015-03-23T18:52:36.467

You can use the flag **-i** for in-place editing and the **-e** for specifying normal script expression:

```
sed -i -e 's/pattern_to_search/text_to_replace/' file.txt 
```

To delete lines that match a certain pattern you can use the simpler syntax. Notice the **d** flag:

```
sed -i '/pattern_to_search/d' file.txt 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-31T13:07:18.447

You really should not use sed for that. This question seems to come up ridiculously often, and it seems very strange that it does, since the general solution is so trivial, it seems bizarre that people want to know how to do it in sed, and in python, and in ruby, etc. If you want to have a filter operate on an input and overwrite it, use the following simple script:

```
#!/bin/sh -e
in=${1?No input file specified}
mv $in ${bak=.$in.bak}
shift
"$@" < $bak > $in 
```

Put that in your path in an executable file name `inline`, and then the problem is solved in general. For example:

```
inline input-file sed -e s/foo/bar/g 
```

Now, if you want to add logic to keep multiple backups, or if you have some options to change the backup naming scheme, or whatever, you fix it in one place. What's the command line option to get 1-up counters on the backup file when processing a file in-place with `perl`? What about with `ruby`? Is the option different for `gnu-sed`? How does `awk` handle it? The whole friggin' point of unix is that tools do one thing only. Handling logic for backup files is a second thing, and needs to be factored out. If you are implementing a tool, do not add logic to create backup files. Tell your users to use a 2nd tool for that. Integration is bad. Modularity is good. That is the unix way.

Notice that this script has several problems. The permissions/mode of the input file may be changed, for example. I'm sure there are innumerable other issues. However, by putting the backup logic in a wrapper script, you localize all of these issues and don't have to worry that `sed` overwrites the files and changes mode, while `python` keeps the file in place and does not change the inode (I made up those two cases, the point being that not all tools will use the same logic, while the wrapper script will.)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T07:59:27.003

据我所知，不可能使用相同的文件进行输入和输出。虽然一种解决方案是制作一个将其保存到另一个文件的 shell 脚本，但删除旧的输入并将输出重命名为输入文件名。

```
sed -e s/try/this/g input.file > output.file;mv output.file input.file 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-01T16:59:10.480

I suggest using `sponge`

> sponge reads standard input and writes it out to the specified file. Unlike a shell redirect, sponge soaks up all its input before writing the output file. This allows constructing pipelines that read from and write to the same file.

```
cat test | sed 's/STARTremoveThisComment//' | sponge test 
```

# valgrind - mips 上的 valgrind

> ID：10829515
> 
> 赞同：2
> 
> 时间：2012-05-31T07:55:56.093
> 
> 标签：valgrind, coredump, mips32

我一直在尝试在 MIPS 机器上运行 valgrind。我成功交叉编译了 valgrind 并从测试套件中运行了一些测试。但是每当 valgrind 尝试创建一个核心转储时，断言就会失败。它来自文件 coredump-elf.c

```
 vg_assert(sizeof(*regs) == sizeof(prs->pr_reg)); 
```

显然，这个断言检查字节数组的大小是否与 valgrind 的寄存器结构相同。

但我无法克服这个错误。

我在 MIPS 32 机器上使用 valgrind。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-25T01:11:18.960

[Trunk Valgrind](http://valgrind.org/downloads/repository.html)很好地支持 MIPS32 LE/BE 和 MIPS64 LE/BE。

从主干下载代码：

```
svn co svn://svn.valgrind.org/valgrind/trunk valgrind 
```

配置、制作和使用它。您应该看不到任何 MIPS32 问题。

# iphone - iphone中MFMessageComposeViewController的字符限制

> ID：10829520
> 
> 赞同：1
> 
> 时间：2012-05-31T07:56:13.987
> 
> 标签：iphone, ios, ipad

iphone和ipad中通过MFMessageComposeViewController可以发送多少个字符的短信。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T08:06:40.903

没有真正的最大值，因为 SMS 160 个字符，当您有超过 160 个字符时，它会发送多于一条 SMS。

如果您阅读[`MFMessageComposeViewController`](http://developer.apple.com/library/ios/#DOCUMENTATION/MessageUI/Reference/MFMessageComposeViewController_class/Reference/Reference.html)文档，则没有提及最大体长。

# javascript - For循环内部函数（新手）

> ID：10829521
> 
> 赞同：2
> 
> 时间：2012-05-31T07:56:29.490
> 
> 标签：javascript

我想有一些我的 for 循环在函数范围内使用的变量（不是全局的）。

我试图将 for 循环包装在这样的函数中，但会导致控制台错误：

```
function() {
    var data = livingroomTableData;
    for(var i = data[0]; i < data[1]; i++) {
        var elemvalue = data[2] + format(i) + ".png";
        livingroomTableArray[i] = elemvalue;
    }
} 
```

我希望数据变量仅在此 for 循环内（不是全局）具有 livingroomTableData 的值。在其他循环中，我将在数据变量中输入一个不同的变量。

哦，是的，你可能会说，我是个新手。:S

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T08:03:34.680

javascript中只有函数作用域，不存在块作用域，所以不能让变量只在for循环内。您可以做的是创建一个函数范围。

代码示例：

```
(function(livingroomTableData) {
    var data = livingroomTableData;
    //... the rest code
})(livingroomTableData); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T08:04:32.350

*最大*的问题是这一行：

```
for(var i = data[0]; i < data[1]; i++) { 
```

这意味着，从`i`数组的第一个元素开始，执行循环中的代码，在`i`每次运行结束时递增 1，直到`i`不小于`data`.

我会重写它以向您展示一个工作版本，但不清楚您真正想要做什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T08:17:57.787

```
function() {
    for(var i = 0; i < livingroomTableData.length; i++) {
        var data = livingroomTableData[i];
        //your code here...
    }
} 
```

# java - 将密码传递给junitcore

> ID：10829522
> 
> 赞同：1
> 
> 时间：2012-05-31T07:56:34.870
> 
> 标签：java, selenium

我正在开发一个独立的应用程序来测试使用 Selenium Webdriver 的网站。该应用程序将使用 JavaFX 或 Swing UI 来允许用户加载测试套件文件并选择要运行的测试以及在哪个浏览器中运行它们。UI 还将捕获测试使用的数据，例如用户名和密码。

我计划使用 JUnitCore 运行选定的测试类，但我需要将数据从 UI 传递到测试类。对于大多数数据，我可以使用 System.setProperty(prop, value) 来做到这一点。但是，我还需要将网站的管理员密码和其他密码传递给测试

将密码传递给测试的最佳方法是什么？

使用 System.setProperty 存储密码时会有哪些安全问题？我是否应该加密数据并将其存储在文件中并让测试读取文件并解密数据？这显然会增加设置每个测试所需的处理量

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T11:58:59.337

*   如果运行 UI 的用户知道密码，那么我并没有真正看到您的安全问题。你在为谁辩护？
*   如果运行 UI 的用户不知道密码（并且密码应该存储在测试用例本身中），那么你就陷入困境 - 加密很好，但你必须存储密码以某种方式解密......无尽的循环，没有安全的空间。即使存储是安全的，弱点肯定是传输到浏览器（无论如何都将作为封装在 JSON 中的纯字符串完成）和自动输入到浏览器本身。说真的，如果您不信任运行测试的机器，请不要存储密码。

但是，对于第一种情况（当用户必须在 UI 中输入密码时），为了最大限度地减少威胁的可能性并为了最大的方便，我会这样做：

1.  创建一个[单例](http://en.wikipedia.org/wiki/Singleton_pattern)类`PasswordHolder`
2.  a`PasswordHolder`会记住 a 中的密码（[由 给他们`JPasswordField`](http://docs.oracle.com/javase/tutorial/uiswing/components/passwordfield.html)）`Map<String, char[]>`或`Map<String, Password>`其中 key 是某个密码标识符，而 value 是密码本身
3.  一旦通过`getPassword()`方法访问密码，[其内容将被取消](https://stackoverflow.com/questions/8881291/why-is-char-preferred-over-string-for-passwords)

一个快速的示例实现（为了进一步改进，我希望我不会忘记包含任何重要的东西......但它可能会发生）。我认为它有点不言自明：

```
public class PasswordHolder {

    private static PasswordHolder instance = null; 
    private final Map<String, Password> map = new HashMap<String, Password>();

    private PasswordHolder() {
        // nothing to do
    }

    public static PasswordHolder getInstance() {
        if (instance == null) {
            instance = new PasswordHolder();
        }
        return instance;
    }

    public void addPassword(String name, char[] pass) {
        if (map.containsKey(name)) {
            // throw some sort of Exception("Duplicate password name, man.")
        }
        map.put(name, new Password(pass));
    }

    public Password getPassword(String name) {
        return map.get(name);
    }

} 
```

作为最方便的事情，我写`Password`了一个`CharSequence`所以是有用的`sendKeys(CharSequence keys)`。不幸的是，`sendKeys()`使用`toString()`了，所以无论如何你都必须从密码中创建一个字符串（这被认为是一种不好的做法）。

```
public class Password implements CharSequence {

    private final char[] pass;
    private final BitSet nulled;

    Password(char[] pass) {
        this.pass = pass;
        nulled = new BitSet(pass.length);
    }

    private void nullify(int start, int end) {
        for (int i = start; i < end; i++) {
            pass[i] = '\0';
        }
        nulled.set(start, end);
    }

    @Override
    public int length() {
        return pass.length;
    }

    @Override
    public char charAt(int index) {
        if (nulled.get(index)) {
            // throw some Exception("That character has already been read!")
        }
        char ret = pass[index];
        pass[index] = '\0';
        nulled.set(index);
        return ret;
    }

    @Override
    public CharSequence subSequence(int start, int end) {
        if (nulled.get(start, end).cardinality() > 0) {
            // throw some Exception("Some of the characters has already been read!")
        }
        Password subPass = new Password(Arrays.copyOfRange(pass, start, end)); 
        nullify(start, end);
        return subPass;
    }

    @Override
    public String toString() {
        if (nulled.cardinality() > 0) {
            // throw some Exception("Some of the characters has already been read!")
        }
        String str = new String(pass);
        nullify(0, pass.length);
        return str;
    }

} 
```

# c# - 如何阻止对话框窗口隐藏

> ID：10829524
> 
> 赞同：9
> 
> 时间：2012-05-31T07:56:42.937
> 
> 标签：c#, wpf, modal-dialog

如果我创建一个派生自 System.Windows.Window 的类并使用 ShowDialog 显示它，它会按预期显示在主窗口上方，并且主窗口被禁用。但是，可以将两个窗口都放在其他应用程序后面，然后将主窗口带回来。这只会留下一个似乎已经崩溃的窗口，并且可能会令人困惑。

如果显示主窗口，是否可以确保始终显示对话窗口？MessageBox.Show 对话框没有这样的问题

**更新：**

测试对话框定义为

```
public partial class MyDialog : Window
{
    public MyDialog()
    {
        InitializeComponent();
    }
} 
```

并调用使用

```
 MyDialog d = new MyDialog();
    d.ShowDialog(); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-31T08:27:06.757

您必须设置 Owner 属性。

```
MyDialog d = new MyDialog();
d.Owner = Application.Current.MainWindow;//or your owning window
d.ShowDialog(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T08:10:45.600

为确保在显示主窗口时始终显示对话框窗口，将处理程序添加到主窗体可见性更改事件，`TopMost`以根据主可见性为子窗体设置 true 或 false

```
ChildForm frmDLg = null;
public MainForm()
{
    this.VisibleChanged += MainFrmVisibleChanged;
}

private void LoadDialogForm()
{
    try {
        if (frmDLg == null || frmDLg.IsDisposed) {
            frmDLg = new ChildForm();
        }
        frmDLg.ShowDialog();
    } catch (Exception ex) {
        //Handle exception
    }
}

private void MainFrmVisibleChanged(object sender, System.EventArgs e)
{
    if (frmDLg != null && !frmDLg.IsDisposed) {
        frmDLg.TopMost = this.Visible;
    }
} 
```

**更新**

```
public override bool Visible
        {
            get
            {
                return base.Text;
            }
            set
            {
                base.Text = value;
                // Insert my code
                if (frmDLg != null && !frmDLg.IsDisposed)
                {
                    frmDLg.TopMost = this.Visible;
                }
            }
        } 
```

我能想到的最后一种治疗方法是使用带有 user32 dll getforegroundwindow 的计时器来检查主窗体是否可见。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T08:40:18.963

此代码应该可以按您的意愿工作

```
public MainWindow()
    {
        InitializeComponent();

        this.Activated += new EventHandler(MainWindow_Activated);
    }

    void MainWindow_Activated(object sender, EventArgs e)
    {
        if (m == null)
            return;

        m.Activate();
    }

    private void button1_Click(object sender, RoutedEventArgs e)
    {
        m = new MyDialog();
        m.ShowDialog();
    }
    MyDialog m; 
```

# c# - 忽略不区分大小写的字典键中的连字符

> ID：10829534
> 
> 赞同：4
> 
> 时间：2012-05-31T07:57:20.727
> 
> 标签：c#, asp.net, vb.net

我在 asp.net/vb.net 中有一个不区分大小写的字典，如下所示：

```
Dim caseInsensitiveDictionary = New Dictionary(Of String, Single)(StringComparer.OrdinalIgnoreCase) 
```

它拥有这样的价值观

```
one hundred, 100
one hundred one, 101
one hundred two, 102 
```

我希望如果用户试图找到这样的值：

```
Response.Write(dictionary("ONE-hundred").ToString) 
```

他得到 100，但现在它得到了异常，因为字典键没有连字符“-”。我需要覆盖哪种方法。

请建议

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T08:06:20.690

您必须创建一个自定义 IEqualityComparer。

像这样的东西：

```
public class MyEqualityComparer : IEqualityComparer<string>
{
    public bool Equals(string x, string y)
    {
        return FixString(x).Equals(FixString(y), StringComparison.InvariantCultureIgnoreCase);
    }

    private string FixString(string x)
    {
        // replace hyphens
        return x.Replace("-", " ");
    }

    public int GetHashCode(string obj)
    {
        return FixString(obj).GetHashCode();
    }
} 
```

然后在字典中使用该类： Dictionary x = new Dictionary(new MyEqualityComparer())

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T08:16:28.923

您也可以添加`ONE-hundred,100`到字典（最简单的方法）或构建自定义`StringComparer`：

```
Class CaseInsensitiveIgnoringStringComparer
    Inherits StringComparer
    Private caseInsentiveComparer As System.StringComparer = StringComparer.OrdinalIgnoreCase
    Public Property IgnoreList As IList(Of String) = Nothing
    Public Property ReplaceWith As String = " "

    Private Function Replace(original As String) As String
        If IgnoreList Is Nothing OrElse IgnoreList.Count = 0 Then
            Return original
        Else
            For Each s As String In IgnoreList
                original = original.Replace(s, ReplaceWith)
            Next
            Return original
        End If
    End Function

    Public Overloads Overrides Function Compare(x As String, y As String) As Integer
        Return caseInsentiveComparer.Compare(Replace(x), Replace(y))
    End Function

    Public Overloads Overrides Function Equals(x As String, y As String) As Boolean
        Return caseInsentiveComparer.Equals(Replace(x), Replace(y))
    End Function

    Public Overloads Overrides Function GetHashCode(obj As String) As Integer
        Return caseInsentiveComparer.GetHashCode(Replace(obj))
    End Function
End Class 
```

测试

```
Dim comp = New CaseInsensitiveIgnoringStringComparer() With {.IgnoreList = {"-", "+"}, .ReplaceWith = " "}
Dim caseInsensitiveDictionary = New Dictionary(Of String, Single)(comp)
caseInsensitiveDictionary.Add("One hundred", 100)
caseInsensitiveDictionary.Add("One hundred one", 101)
caseInsensitiveDictionary.Add("One hundred two", 102)

' normally following both lines would cause exceptions '
Dim n100 = caseInsensitiveDictionary("ONE-hundred")
n100 = caseInsensitiveDictionary("oNE+Hundred") 
```

# java - “const”关键字的目的是什么？

> ID：10829538
> 
> 赞同：7
> 
> 时间：2012-05-31T07:57:43.137
> 
> 标签：java

为什么`const`Java中有保留关键字但没有功能？如果他们决定`final`改用，那么拥有的意义`const`何在？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-31T08:00:20.237

从[JLS](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.9)：

> 关键字`const`和`goto`是保留的，即使它们当前未使用。**如果这些 C++ 关键字错误地出现在程序中，这可能允许 Java 编译器生成更好的错误消息。**

从历史的角度来看，我可以为您提供Josh [Bloch](http://en.wikipedia.org/wiki/Joshua_Bloch) 2003 年的以下[引用：](http://web.archive.org/web/20030808110023/http://developer.java.sun.com/developer/community/chat/JavaLive/2003/jl0729.html)

> Josh Bloch：我们没有计划`const`在 Java 语言中添加对关键字的支持。这在 C++ 中是喜忧参半。如您所知，它只是建议性的，可以打开或关闭。高斯林讨厌它，`final`反而做了。您真正想要的是“不可变的”，但要使其正常工作是一个研究问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T08:00:40.720

您需要询问 Java 1.0 之前的设计者以找出他们*最初*的动机，但我推测他们只是保持他们的选择开放。`goto`保留字是另一个例子。

我的猜测是，在 JLS 中找到的“aix”文本是“事后”合理化。为什么？因为`struct`, `union`,`unsigned`等等在 Java 中不是保留字！简而言之，我不买它......不管 JLS 声称什么:-)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-31T07:59:30.897

[http://docs.oracle.com/javase/tutorial/java/nutsandbolts/_keywords.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/_keywords.html)

"The keywords const and goto are reserved, even though they are not currently used."

i don't know about the exact background but maybe they used to be part of java?

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-31T08:00:26.657

它**只是保留关键字**。它没有任何用例或功能

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-31T08:02:43.630

> 人们认为保留关键字是为了允许对 Java 语言进行扩展，以包括 C++ 风格的 const 方法和指向 const 类型的指针。Java Community Process 中用于在 Java 中实现 const 正确性的增强请求票已于 2005 年关闭，这意味着 const 正确性可能永远不会进入官方 Java 规范。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-31T08:09:39.110

从 JLS -

“关键字 const 和 goto 是保留的，即使它们当前未使用。如果这些 C++ 关键字错误地出现在程序中，这可能允许 Java 编译器产生更好的错误消息”

# asp.net-mvc-3 - 如何使用 JQuery 和 tokenInput 触发控制器

> ID：10829539
> 
> 赞同：3
> 
> 时间：2012-05-31T07:57:49.017
> 
> 标签：asp.net-mvc-3, jquery-tokeninput

我正在使用 TokenInput 和 MVC 3 C#。

我想让这部分 JQuery 工作，但它永远不会从输入框中将字符串传递给我的控制器类中的方法。我究竟做错了什么。

**创建.cshtml**

```
<input type="text" id="authorlist" name="q" data-autocomplete="@Url.Action("GetAuthors", "Author")" /> 
```

**作者控制器.cs**

```
public ActionResult GetAuthors(string term)
        {
            term = term.ToUpper();
            var authors = db.AUTHOR
                .Where(a => a.FULL_NAME.ToUpper().StartsWith(term))
                .Select(a => new { id = a.AUTHOR_ID, name = a.FULL_NAME});

            return Json(authors, "application/json", Encoding.UTF8, JsonRequestBehavior.AllowGet);
        } 
```

**Javascript/Jquery**

```
 $("#authorlist").tokenInput('/author/getauthors/' + $(this).val(), {
        hintText: "Select Authors",
        searchingText: "Searching..."
    }); 
```

**通过实际调用数据自动完成**值并以这种方式触发 ActionResult，我本来希望以更 MVC 的方式使用 JQuery ，但我迷路了，如您所见：

```
$("#authorlist").tokenInput($(this).attr("data-autocomplete"), {
        hintText: "Choose authors"        
    }); 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T09:00:14.880

问题在于您的 url 构建，因为 TokenInput`q`默认使用查询参数，但在您的操作中使用的是`term`.

你有两个选项：

更改动作签名：

```
public ActionResult GetAuthors(string q)
{
} 
```

配置令牌输入：

```
$("#authorlist").tokenInput($(this).attr("data-autocomplete"), {
        queryParam: 'term',
        hintText: "Choose authors"        
    }); 
```

# asp.net-mvc-3 - MVC3：发送表单（模型）值和额外参数的按钮

> ID：10829541
> 
> 赞同：4
> 
> 时间：2012-05-31T07:58:00.123
> 
> 标签：asp.net-mvc-3, button, parameters

在 MVC3 项目中，我使用 Html.BeginForm 发布一些（模型）值。除了那些我想发送一个额外的参数之外，它不是表单（模型）的一部分，而是在 ViewBag 中。现在，当我使用 Button（此处的答案代码：[MVC3 razor Error in creation HtmlButtonExtension](https://stackoverflow.com/questions/10456956/mvc3-razor-error-in-creating-htmlbuttonextension)）时，所有表单值都已发布，但额外参数保持为空。当我使用 ActionLink 时，会发布参数，但不会发布表单值:) 知道如何将两者结合起来吗？谢谢！

```
@Html.Button("Generate!", new { id = ViewBag.ProjectID })
@Html.ActionLink("Generate!", "Post", new { id = @ViewBag.ProjectID }) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T08:25:21.183

我的建议是在您的 App.Domain.Model 中声明一个新对象，如下所示

```
namespace App.Domain.Model
{
    public class CustomEntity
    {
        public Project projectEntity { get; set; }
        public int variableUsed { get; set; }
    }
} 
```

在您看来，您可以使用 CustomEntity.projectEntity 和 CustomEntity.variableUsed 轻松访问它们。

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T08:49:01.820

您可以执行以下操作。

查看代码

```
@using (Html.BeginForm("ActionName", "ControllerName", FormMethod.Post, new { @id = "frmId", @name = "frmId" }))
{
        @*You have to define input as a type button not as a sumit. you also need to define hidden variable for the extra value.*@
        <input type="hidden"  name="hndExtraParameter" id="hndExtraParameter" />
        <input value="Submit" type="button" id="btnSubmit" onclick="UpdateHiddenValue()" />
}

<script type="text/javascript">

function ValidateUser() {
$("#hndExtraParameter").val('Assignvaluehere');
$("#frmId").submit();
}

</script> 
```

控制器代码

```
[HttpPost]
public ActionResult ActionName(Model model, string hndExtraParameter)
{
//Do your operation here.
} 
```

# asp.net - 回发后保存文件上传控件的路径

> ID：10829542
> 
> 赞同：0
> 
> 时间：2012-05-31T07:58:00.657
> 
> 标签：asp.net

我想在 FileUpload asp.net 控件中回发后保存文件路径，例如：

```
function GetPathToDownloadPictures() {
    var pathToDownLoadPicture = document.getElementById('<%= UploadPicturesNews.ClientID %>').value;
    document.getElementById('<%= PathToPicturesHidden.ClientID %>').value = pathToDownLoadPicture;
}

window.document.onload = AddPathToUploadControl();

function AddPathToUploadControl() {
    var pathToDownLoadPicture = document.getElementById('<%= PathToPicturesHidden.ClientID %>').value;
    document.getElementById('<%= UploadPicturesNews.ClientID %>').value = pathToDownLoadPicture;
} 
```

将 FileUpload 的路径添加到 HiddenField 并在回发后将 HiddenField 的路径添加到 FileUpload，但不起作用....帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T08:25:10.147

原始文件路径在现代浏览器中不再可用，因为此信息被视为安全风险。

根据浏览器的不同，您要么收不到任何路径信息，要么收不到IE 上的[c:\fakepath](http://devio.wordpress.com/2012/04/02/computer-says-fakepath/)。

# mips - 端口 vhdl 的不兼容模式

> ID：10829543
> 
> 赞同：0
> 
> 时间：2012-05-31T07:58:07.727
> 
> 标签：mips, vhdl

我的代码出现以下错误：`** Failure: (vsim-3808) Incompatible modes for port "d_out".`

我指定了一个新组件，定义了它的实体，连接了它的端口，一切看起来都很好，甚至编译了但是当我运行一个 tb 时，它写了一个出现在标题中的错误

这是代码的一部分：

```
signal jal_nor_out: std_logic;
 jal_unit: jal_nor
port map(
data_in(5 downto 0) => instruction(31 downto 26),
d_out => jal_nor_out
);
jal_writedata_mux : Mux_2to1_xN
port map(
    sel => jal_nor_out,
    d_in1 => WriteData,
    d_in2 => pc_inc,
    d_out => data_mux_out
    ); 
```

在另一个文件上我有：

```
 entity jal_nor is
    port(
    data_in : in std_logic_vector(5 downto 0);
    d_out : out std_logic
    );
end jal_nor;
architecture bhv of jal_nor is
    begin
        process (data_in) 
          begin
            if data_in="000011" then
                d_out <= '1';
            else
                d_out <= '0';
            end if;
        end process;
    end bhv; 
```

这是多路复用器代码

```
 entity Mux_2to1_xN is
  generic(
           WIDTH :     integer := 32);
  port(
        sel   : in  std_logic;
        d_in1 : in  std_logic_vector((WIDTH - 1) downto 0);
        d_in2 : in  std_logic_vector((WIDTH - 1) downto 0);
        d_out : out std_logic_vector((WIDTH - 1) downto 0));
end Mux_2to1_xN; 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T12:08:17.050

听起来编译器认为你已经告诉它关于端口的两件不同的事情。您是否使用过任何`component`声明？

调试建议：

制作一个较小的测试用例 - 不断删除代码，直到您拥有导致错误的代码的最小子集。取出无关紧要的端口，未使用的信号，以及其他所有内容。在执行此操作的过程中，您会发现一个非常小的代码子集导致了问题，并且可能能够自己修复它。如果没有，您可以在此处发布一小段独立的代码供我们查看。只是最小的代码，没有注释掉很多行。并确保您发布的内容编译为相同的错误...

# php - 如何在php中将12h转换为24h

> ID：10829545
> 
> 赞同：0
> 
> 时间：2012-05-31T07:58:21.053
> 
> 标签：php

我想在 php 中转换 12 小时时间，格式如下：**05/31/2012 09:48 AM**

到 24 小时时间格式：**2011-11-27 11:53:36**

这是我可以更改的代码行：

$time= $_POST['时间'];

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T07:59:11.607

您可以使用`strtotime`then`date`函数。

[http://php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)那里列出了所有可能的选项。

date 的第一个参数是格式，第二个参数是时间戳（通过 strtotime 获得的当前日期字符串）。

`date('Y-m-d H:i:s', strtotime($your_current_date_string));`

格式就在我的脑海中，并不准确。您可以在提供的链接中的表格中查找您需要的格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T08:04:44.740

[http://psoug.org/snippet/Convert_12_to_24_hour_time_and_vice_versa_241.htm](http://psoug.org/snippet/Convert_12_to_24_hour_time_and_vice_versa_241.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T08:06:10.597

你可以使用这个：

```
// $time = 05/31/2012 09:48 AM
$time = $_POST['time'];    
//output new time: 2012-05-31 09:48:00
$newTime = date("Y-m-d H:i:s", strtotime($time)) ); 
```

[活生生的例子](http://codepad.org/OtiXVugf)

**文件**：

*   [时间](http://php.net/manual/en/function.strtotime.php)
*   [日期](http://it2.php.net/manual/en/function.date.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T08:07:24.367

你必须像这样使用 strtotime ：

```
$date="05/31/2012 09:48 AM";

echo date("Y-m-d H:i:s",strtotime($date)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-31T08:07:55.687

通过以下链接了解 PHP 中的日期功能

[http://php.net/manual/en/function.date.php](http://php.net/manual/en/function.date.php)

# android - 如何读取 Stock CPU Usage 数据

> ID：10829546
> 
> 赞同：117
> 
> 时间：2012-05-31T07:58:24.180
> 
> 标签：android, cpu-usage

在冰淇淋三明治上，开发人员选项中的一个选项是“显示 CPU 使用情况”，它在屏幕上添加了一个覆盖（见下面的截图）。

我的问题是，我如何读取数据？我猜包名是当前活动的进程，但是后面的红绿条是什么意思呢？包裹顶部的3个数字是什么？

![在此处输入图像描述](../Images/dd00dbab632a1a967354b8006c173651.png)

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-05-31T08:01:32.010

这应该是 Unix 平均负载。[维基百科](http://en.wikipedia.org/wiki/Load_%28computing%29)有一篇关于这个的好文章。

这些数字显示了不同时间间隔内 CPU 的*平均*负载。从左到右：最后一分钟/最后五分钟/最后十五分钟

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-06-05T13:58:29.817

到目前为止，这是我能找到的最有用的信息来源。显然，这些数字不会以 % 表示平均负载：http: [//forum.xda-developers.com/showthread.php ?t=1495763](http://forum.xda-developers.com/showthread.php?t=1495763)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-05-21T19:39:05.273

正如其他答案所指出的那样，在 UNIX 系统上，这些数字代表1/5/15 分钟周期内的**CPU 负载平均值。**但在 Linux（以及随后的 Android）上，它代表的是不同的东西。

在可追溯到 1993 年的内核补丁（[一篇关于该主题的深度文章](http://www.brendangregg.com/blog/2017-08-08/linux-load-averages.html)）之后，在 Linux 中，负载平均数不再严格代表**CPU**负载：因为计算不仅考虑了 CPU 绑定进程，还考虑了处于不间断等待状态的进程 - 最初的目标是以这种方式考虑 I/O 绑定进程，以表示更多的“系统负载”而不仅仅是 CPU 负载. 问题是自 1993 年以来，不间断状态的使用在 Linux 内核中有所增长，它不再通常代表 I/O 绑定进程。一些 Linux 开发人员使用不间断等待作为一种简单的等待来避免在其实现中容纳信号，从而进一步加剧了这个问题。结果，在 Linux（和 Android）中，我们可以看到不客观地代表真实负载的倾斜的高负载平均数字。有 Android 用户报告称，不合理的高负载平均值与低 CPU 利用率形成鲜明对比。例如，即使系统和 CPU 处于空闲状态，我的旧 Android 手机（具有 2 个 CPU 内核）通常显示的平均负载约为 12。因此，Linux (Android) 中的平均负载数并不是一个可靠的性能指标。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-04-26T04:58:09.363

更多关于“平均负载”显示超过 1 分钟、5 分钟和 15 分钟的 CPU 负载

Linux、Mac 和其他类 Unix 系统显示“平均负载”数字。这些数字告诉您系统的 CPU、磁盘和其他资源的繁忙程度。一开始它们并不能不言自明，但很容易熟悉它们。

```
WIKI: example, one can interpret a load average of "1.73 0.60 7.98" on a single-CPU system as:

during the last minute, the system was overloaded by 73% on average (1.73 runnable processes, so that 0.73 processes had to wait for a turn for a single CPU system on average).
during the last 5 minutes, the CPU was idling 40% of the time on average.
during the last 15 minutes, the system was overloaded 698% on average (7.98 runnable processes, so that 6.98 processes had to wait for a turn for a single CPU system on average) if dual core mean: 798% - 200% = 598%. 
```

您可能有一个具有多个 CPU 或多核 CPU 的系统。在这样的系统上，平均负载数字的工作方式略有不同。例如，如果您在单 CPU 系统上的平均负载为 2，这意味着您的系统过载了 100% — 在整个时间段内，一个进程正在使用 CPU，而另一个进程正在等待。在具有两个 CPU 的系统上，这将是完全使用——两个不同的进程一直在使用两个不同的 CPU。在具有四个 CPU 的系统上，这将是一半的使用率——两个进程正在使用两个 CPU，而两个 CPU 处于空闲状态。

要了解负载平均数，您需要知道系统有多少 CPU。平均负载为 6.03 表示具有单个 CPU 的系统严重过载，但在具有 8 个 CPU 的计算机上会很好。

更多信息：[链接](https://www.howtogeek.com/194642/understanding-the-load-average-on-linux-and-other-unix-like-systems/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-12-23T13:10:43.087

来自[高性能 Android 应用程序](http://shop.oreilly.com/product/0636920035053.do)书（第 157 页）：

*   我们看到的相当于[adb shell dumpsys cpuinfo](https://stackoverflow.com/questions/24612982/interpreting-dumpsys-cpuinfo)命令
*   数字显示了 1 分钟、5 分钟和 15 分钟的[CPU 负载](http://blog.scoutapp.com/articles/2009/07/31/understanding-load-averages)（从左侧开始）
*   颜色显示 CPU 在用户空间（绿色）、内核（红色）和 IO 中断（蓝色）中花费的时间

# objective-c - 无法为 NSOutlineView 中的复选框设置初始状态

> ID：10829547
> 
> 赞同：0
> 
> 时间：2012-05-31T07:58:31.793
> 
> 标签：objective-c, cocoa, checkbox, nsoutlineview

我有大纲视图，其中每个元素都是复选框。我想为某些业务逻辑提供的这些复选框设置初始状态。我正在尝试以 NSOutlineViewDelegate 的适当（我希望）方法来做到这一点：

```
- (NSView *)outlineView:(NSOutlineView *)outlineView viewForTableColumn:(NSTableColumn *)tableColumn item:(id)item
{
    NSButton *res = [outlineView makeViewWithIdentifier:@"checkbox" owner:self];
    res.title = [item description];
    if([item intValue] & 1)
        res.state = NSOnState;
    else
        res.state = NSOffState;
    return res;
} 
```

一切都很好，按钮标题更改正确。但是状态变化被完全忽略了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T07:58:17.910

最后我找到了解决方案。我仍然不知道为什么会发生这种情况，在这种情况下分配复选框标题和分配复选框状态有什么区别。但似乎有人在我的方法中分配后调用 item 的 integerValue 方法来设置复选框的状态。所以，要解决这个问题，我需要确保 item 的 integerValue 方法返回合适的值。

# java - routeContext 中的 PropertyPlaceholderConfigurer。无法从属性文件设置 uri

> ID：10829551
> 
> 赞同：3
> 
> 时间：2012-05-31T07:58:48.783
> 
> 标签：java, spring, properties

我有属性文件，我想通过这个文件在我的路由中设置 uri：

```
 <beans xmlns="http://www.springframework.org/schema/beans"
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
           http://camel.apache.org/schema/spring http://camel.apache.org/schema/spring/camel-spring.xsd">

        <import resource="TransactionsParserConfig.xml"/>

        <bean id="transactionsValidator" class="com.class.TransactionsValidator"/>
        <bean id="transactionsValidator123" name="${ftp.host}"/> <!--here I can use property-->

        <routeContext id="transactionsRoutes" xmlns="http://camel.apache.org/schema/spring">
            <route id="routeFTP">
                <from uri="direct:start" />
<!--here I can NOT use property-->
                <from uri="ftps://${ftp.host}/?securityProtocol=SSL"/>

etc...

<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

    <bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="locations">
            <array>
                <value>classpath:/ftp.properties</value>
            </array>
        </property>
    </bean>
</beans> 
```

但看起来不允许从属性文件设置 uri。因为当我在 routexContext 标记之外使用 ${ftp.host} 时，一切都很好。当我在 routeContext 中点击 ctrl+mouseclick 时，即使是 Idea 也无法重定向我。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T12:17:48.267

由于 Spring 的限制，Camel 无法在其 Spring DSL 中使用 PropertyPlaceholderConfigurer。有很多方法可以实现您想要的。其中一些由[链接](http://camel.apache.org/properties.html)描述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-01T15:29:24.647

您可以使用下面提到的 bean 配置

```
<bean id="myProperties" class="org.springframework.beans.factory.config.PropertiesFactoryBean">
    <property name="locations">
        <list>
            <value>file:/properties1.properties</value>
            <value>file:/properties2.properties</value>
        </list>
    </property>
</bean> 
```

可以在 java 类中访问属性，例如

```
@Value("${categories.insert.sql}")
private String insertQuery; 
```

可以在骆驼上下文中访问属性，例如

```
<setHeader headerName="signature">
    <constant>{{api.secretkey}}</constant>
</setHeader> 
```

希望这有效

# java - 丢弃一个字符的前导和尾随系列，否则保留相同的字符

> ID：10829554
> 
> 赞同：2
> 
> 时间：2012-05-31T07:58:57.727
> 
> 标签：java, regex

我必须使用以下规则处理字符串：

*   它可能会或可能不会以一系列`'`.
*   它可能会也可能不会以一系列`'`.
*   应提取上述内容之间的任何内容。但是，包含的字符串也可能包含也可能不包含一系列`'`.

例如，我可以获得以下字符串作为输入：

*   `''''aa''''`
*   `''''aa`
*   `aa''''`
*   `''''aa''bb''cc''''`

对于上述示例，我想（分别）从中提取以下内容：

*   `aa`
*   `aa`
*   `aa`
*   `aa''bb''cc`

我在Java中尝试了以下代码：

```
Pattern p = Pattern.compile("[^']+(.+'*.+)[^']*");
Matcher m = p.matcher("''''aa''bb''cc''''");
while (m.find()) {
    int count = m.groupCount();
    System.out.println("count = " + count);
    for (int i = 0; i <= count; i++) {
        System.out.println("-> " + m.group(i));
    } 
```

但我得到以下输出：

```
count = 1
-> aa''bb''cc''''
-> ''bb''cc'''' 
```

任何指针？

**编辑：**没关系，我`*`在我的正则表达式末尾使用 a ，而不是`+`. 做这个改变给了我想要的输出。但我仍然欢迎正则表达式的任何改进。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T08:05:27.703

看看 Java 的 Pattern 类的边界匹配器（http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html）。尤其是 $（= 行尾）可能很有趣。我还推荐以下用于正则表达式测试的 Eclipse 插件：http: [//sourceforge.net/projects/quickrex/](http://sourceforge.net/projects/quickrex/)它使您可以准确地查看给定测试字符串的匹配项和正则表达式组。

例如尝试以下模式： [^']+(.+'*.+)+[^'$]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T08:10:56.047

这个对我有用。

```
 String str = "''''aa''bb''cc''''";
        Pattern p = Pattern.compile("^'*(.*?)'*$");
        Matcher m = p.matcher(str);
        if (m.find()) {
            System.out.println(m.group(1));
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T08:13:03.027

我在 Java 方面不是很好，所以我希望正则表达式就足够了。对于您的示例，它[运行良好](http://regexr.com?3147a)。

```
s/^'*(.+?)'*$/$1/gm 
```

# c++ - POCO HTTPSClientSession 在哪里？

> ID：10829558
> 
> 赞同：0
> 
> 时间：2012-05-31T07:59:17.640
> 
> 标签：c++, openssl, poco-libraries

构建 POCO lib 后，我发现我无法使用`HTTPSClientSession`类，然后我在任何地方从谷歌搜索它，发现 OpenSSL 不是我构建的。我花了大约一整天的时间来处理它，但我失败了。任何人都可以详细给我一些有用的步骤？谢谢！关键词：`NetSSL_OpenSSL`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T09:36:39.687

安装`Win32OpenSSL-1_0_0j.exe`（或其他版本），你最好安装在`C://`.然后下载完整的POCO源代码（必须完整，包含NetSSL_OpenSSL目录）。最后，构建它。结束！

# ssas - MDX crossjoin with 5 dimensions

> ID：10829561
> 
> 赞同：1
> 
> 时间：2012-05-31T07:59:29.690
> 
> 标签：ssas, mdx, cube, cross-join

Assuming we have the following dimension

*   DATE
*   CONTRACTOR
*   COLOR
*   SIZE

and a set of 6 measures, we want to get the 6 measures for every Semestrer, Trimester, Month, Contractor, Color and Size for a given Year.

Here is my MDX query:

```
SELECT 
   { 
         ... the 6 measures ... 
   } ON COLUMNS, 
    { 
          (
                [Dim DATE].[year].[year].AllMembers * 
                [Dim DATE].[SEMESTRE NOM].[SEMESTRE NOM].AllMembers * 
                [Dim DATE].[TRIMESTRE NOM].[TRIMESTRE NOM].AllMembers * 
                [Dim DATE].[MOIS NOM].[MOIS NOM].AllMembers *
                [Dim CONTRACTOR].[Name CONTRACTOR].AllMembers *
                [Dim COLOR].[Name COLOR].AllMembers *
                [Dim SIZE].[Name SIZE].AllMembers 
         ) 
   } DIMENSION PROPERTIES MEMBER_CAPTION, MEMBER_UNIQUE_NAME ON ROWS 

 FROM   ( 
   SELECT ( { StrToSet( "[Dim DATE].[year].[year].&[" + @Year + "]" , CONSTRAINED ) }      

   ) ON COLUMNS 
FROM [TheCube] 
```

This is very slow (more than 20 minutes), with only 6 Contractors, 6 Color, 18 sizes... and what is the differences between `.AllMembers` and `.Members` ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T09:57:49.997

根据层次结构中的实际年数，您可能会使用交叉连接创建一个相当大的集合。正如评论中提到的icCube，为什么不使用：

```
StrToSet( "[Dim DATE].[year].[year].&[" + @Year + "]" , CONSTRAINED ) 
```

在 ROWS 上的交叉连接中？

所有成员与成员；这是一个[文档](http://www.iccube.com/support/documentation/mdx/AllMembers.html)；allmembers 包括计算。会员；你有任何昂贵的计算吗？会员？

[Dim DATE].[MOIS NOM].[MOIS NOM].AllMembers 中有多少成员？三个月，学期？

# php - Phing 和 Composer，哪个方向？

> ID：10829566
> 
> 赞同：31
> 
> 时间：2012-05-31T07:59:37.090
> 
> 标签：php, build-automation, dependency-management, phing, composer-php

我想在我的应用程序中同时使用 Phing 和 Composer。Phing 作为构建系统和 Composer 来管理依赖项。但是应该以哪种方式使用它们？

目前，我们正在所有服务器上全局安装 Phing。Phing 应该完全自动化我们各种项目的构建。只需签出项目的副本，使用默认目标运行 Phing，您应该会很好。这也意味着那里应该有一个 Phing 目标，它调用 Composer 来安装所有依赖项。所以，Phing 调用作曲家。但是我一直找不到有关此设置的任何信息。没有 ComposerTask 或任何类似的东西，谷歌搜索并没有发现任何人以这种方式工作。

但我确实看到了很多相反的情况。人们使用 Composer 将 Phing 安装为项目依赖项。

那么，每种方法的（缺点）优点是什么？我是否试图以错误的方式做到这一点？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-31T08:24:54.737

我认为通过 composer 安装 phing 的主要优势在于，对于开源项目，更容易确保您的用户以这种方式安装了 phing。通常在这些设置中，phing 只是某些库用来完成某些任务的工具。

另一个优点是每个项目都可以使用不同版本的 phing，如果你有一个系统范围的版本，你就无法做到这一点。

如果您使用 phing 来管理您的整个项目构建/设置，则从中调用 composer 可能是有意义的，但反过来也是如此。例如，您可以在每次依赖项更新后使用 composer[脚本](http://getcomposer.org/doc/articles/scripts.md)来触发 phing 任务。这样，项目设置将是：

*   查看
*   运行作曲家
*   作曲家在更新/安装 deps 后运行 phing
*   项目建成

老实说，我不知道是否有正确的答案。您可以使两种方式都起作用，但是通过这种方式，您至少可以避免必须先安装 phing。显然，您需要安装 composer，但可以说这更容易，而且无论如何您都需要它。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-10-23T22:49:36.727

关于这个主题的其他想法。

一般来说，塞尔达克是对的，两者都是可能的。不过，也有关于 phing 的争论。在构建架构的层面上，我认为首先作曲家没有意义。构建过程具有更广泛的范围和更长的生命周期，因此应该管理依赖管理器，反之亦然。

此外，如果您使用 Phing 令牌替换来确定要在哪个环境中安装哪些依赖项版本，那么首先使用 composer 几乎是不可能的，因为 phing 将生成 composer.json，因此必须在 composer 可以运行之前安装。

# android - Remove orientation restricitons programmatically

> ID：10829568
> 
> 赞同：14
> 
> 时间：2012-05-31T07:59:42.280
> 
> 标签：android, android-layout

In my manifest I've setup an activity restricted to portrait orientation. But I need to remove this restriction on condition. So, how do I achieve removing orientation restrictions programmatically ?

upd: my present settings are:

```
 <activity
        android:name=".activity.MainActivity"
        android:label="@string/app_name"
        android:theme="@android:style/Theme.NoTitleBar"
        android:screenOrientation="portrait"
        android:configChanges="orientation">

 /**
 * Defines whether the device being used is a tablet and if so adds horizontal orientation option.
 */
     protected void _updateScreenOrientationModes(){
         if(((MyApplication) getApplication())._isTablet == true)
                setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_UNSPECIFIED);
         } 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-31T08:50:36.860

无论您是否`android:screenOrientation`在 Manifest 中设置，您都可以使用[Activity.setRequestedOrientation()](http://developer.android.com/reference/android/app/Activity.html#setRequestedOrientation%28int%29)以编程方式设置方向。

实质上，“解除限制”是通过以下方式完成的

```
 setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_UNSPECIFIED); 
```

之后，当物理设备方向改变时，Activity 将表现出改变屏幕方向的默认行为。

但是，您可能希望同时实际匹配当前的物理设备方向。我还没有尝试过，但是我很确定如果您所做的只是上述操作，如果设备在您进行操作时处于横向，那么您将保持纵向模式，直到您实际移动设备纵向并返回横向。

我要做的是确保`android:configChanges="orientation"`在您的 Manifest 中设置并覆盖[Activity.onConfigurationChanged()](http://developer.android.com/reference/android/app/Activity.html#onConfigurationChanged%28android.content.res.Configuration%29)，您可以在其中根据您的情况执行方向更改或缓存方向。然后，只要您的状况发生变化，您就可以方便地掌握当前的身体方向，以便您可以在必要时更改它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T09:13:16.740

我将留下我的另一个答案，因为它解决了您提出的更普遍的问题。但是，在对其他人的评论中，您说：

> 我需要允许平板电脑同时具有方向和手机只有纵向

您的特定情况实际上比一般情况更容易：从您的清单中删除两者`android:screenOrientation="portrait"`以`android:configChanges="orientation"`允许默认行为。然后，在启动过程中，如果设备是手机，请使用

```
 setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT); 
```

显然，设备在运行时永远不会在平板电脑或手机之间发生变化，因此您只需在启动时执行一次。平板电脑将获得默认行为，因此无论设备处于何种物理方向，这就是他们将使用的方式。手机将被迫进入纵向并保持这种状态。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T08:04:25.790

以编程方式，您可以使用“setRequestedOrientation()”更改屏幕方向

在您的 java 类中，根据您需要的条件编写以下代码.....

要更改为纵向模式，请使用 ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE 常量：

```
 setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE); 
```

要更改为纵向模式，请使用 ActivityInfo.SCREEN_ORIENTATION_PORTRAIT 常量：

```
 setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT); 
```

# javascript - onbeforeunload 循环并挂起 Firefox

> ID：10829569
> 
> 赞同：1
> 
> 时间：2012-05-31T07:59:54.070
> 
> 标签：javascript, firefox, onbeforeunload

我正在使用此脚本来防止页面的重新加载和后退按钮导航，以通知用户如果他/她离开，所做的更改将丢失。

在 Firefox 中，问题似乎只在点击后退按钮时出现。显示警告对话框，并且无论您按“留下”还是“离开”，都会不断循环备份，并且您必须强制关闭 Firefox。

有没有更好的脚本，实际上在 FF 中有效？

```
window.onbeforeunload = function (e) {
   e = e || window.event;

   if (e) {
      e.returnValue = message;
   }

   return message;
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T08:39:02.480

这段代码在 Firefox 和 Chrome 中适用于我：

```
<script type="text/javascript">
window.onbeforeunload = confirmExit;
function confirmExit()
{
   return "Are you sure you want to leave?";
}
</script> 
```

# ruby - Ruby 库来阅读 Apple Numbers 文档？

> ID：10829571
> 
> 赞同：4
> 
> 时间：2012-05-31T08:00:02.467
> 
> 标签：ruby

有几个 Ruby 开源库可用于读取 Microsoft Excel 文件，例如[roo](http://roo.rubyforge.org/)或 [电子表格](http://spreadsheet.rubyforge.org/)。Apple Numbers 文档呢？有什么可用的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T06:16:24.453

这样的图书馆显然不存在（还没有？）。目前一个好的解决方法是通过 applescript 自动转换为 CSV，然后读取此结果，而不是尝试直接读取 Numbers 文件。不过，这可能不适合每个人的需求，但对我来说非常有效。

这是小程序：

```
# -------------------------------------------------------------------------------
# Command-line tool to convert an iWork '09 Numbers
# document to CSV.
#
# Parameters:
# - input: Numbers input file
# - output: CSV output file
#
# Attik System, Philippe Lang
#
# Creation date: 31 mai 2012
# Modification date: 
# -------------------------------------------------------------------------------
on run argv
    # We retreive the path of the script
    set myPath to (path to me)
    tell application "Finder" to set myFolder to folder of myPath

    # We get the command line parameters
    set input_file to item 1 of argv
    set output_file to item 2 of argv

    # We retreive the extension of the file
    set theInfo to (info for (input_file))
    set extname to name extension of (theInfo)

    # Paths
    set input_file_path to (myFolder as text) & input_file
    set output_file_path to (myFolder as text) & output_file

    if extname is equal to "numbers" then
        tell application "Numbers"
            open input_file_path
            save document 1 as "LSDocumentTypeCSV" in output_file_path
            close every window saving no
        end tell
    end if
end run 
```

像这样使用它：

```
osascript convert_to_csv.scpt input_file.numbers output_file.csv 
```

# silverlight-5.0 - 集成到 ASP.net 项目时，Client.Bin 不更新

> ID：10829573
> 
> 赞同：0
> 
> 时间：2012-05-31T08:00:11.260
> 
> 标签：silverlight-5.0

我正在使用 .Net 4.0 创建 Silverlight 应用程序，并将其集成到在 .Net 3.5 中创建的 ASP.net 项目中。

每当我在 Silverlight 项目中进行更改时，这些更改都不会反映到 ASP.net 项目中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T08:22:37.967

**您需要确保您的 Silverlight 应用程序和网站已连接**

将其添加到解决方案中是不够的。您需要在网站和您的 Silverlight 应用程序之间建立 Silverlight 关系。

*   右键单击您的网站项目并选择`Properties`.
*   选择`Silverlight Applications`左侧的选项卡
*   按`Add...`
*   保持选中状态并从下拉列表中`Use an existing Silverlight project in the solution`选择要添加的项目。`Project`
*   `Add a test page that references the control`如果您想为您的应用程序提供单独的测试页面，请选中。
*   按下`Add`，你就完成了。

该网站现在将构建您的 Silverlight 应用程序并将输出 Xap 文件包含在其 ClientBin 文件夹中。

![添加 Silverlight 应用程序对话框](../Images/c81938270628cf619e47a758dc3cb634.png)

# c# - SampleGrabber 未调用 BufferCB

> ID：10829575
> 
> 赞同：0
> 
> 时间：2012-05-31T08:00:20.237
> 
> 标签：c#, directshow, directshow.net

我正在使用 SampleGrabber 来获取音频数据，但是我的 BufferCB 方法没有被执行。我究竟做错了什么 ？

```
//add Sample Grabber
            IBaseFilter pSampleGrabber = (IBaseFilter)Activator.CreateInstance(Type.GetTypeFromCLSID(CLSID_SampleGrabber));
            hr = pGraph.AddFilter(pSampleGrabber, "SampleGrabber");
            checkHR(hr, "Can't add Sample Grabber");

        AMMediaType pSampleGrabber_pmt = new AMMediaType();
        //pSampleGrabber_pmt.majorType = MediaType.Audio;
        pSampleGrabber_pmt.subType = MediaSubType.PCM;
        pSampleGrabber_pmt.formatType = FormatType.WaveEx;
        pSampleGrabber_pmt.fixedSizeSamples = true;
        pSampleGrabber_pmt.formatSize = 18;
        pSampleGrabber_pmt.sampleSize = 2;

        WaveFormatEx pSampleGrabber_Format = new WaveFormatEx();
        pSampleGrabber_Format.wFormatTag = 1;
        pSampleGrabber_Format.nChannels = 1;
        pSampleGrabber_Format.nSamplesPerSec = 48000;
        pSampleGrabber_Format.nAvgBytesPerSec = 96000;
        pSampleGrabber_Format.nBlockAlign = 2;
        pSampleGrabber_Format.wBitsPerSample = 16;
        pSampleGrabber_pmt.formatPtr = Marshal.AllocCoTaskMem(Marshal.SizeOf(pSampleGrabber_Format));
        Marshal.StructureToPtr(pSampleGrabber_Format, pSampleGrabber_pmt.formatPtr, false);
        hr = ((ISampleGrabber)pSampleGrabber).SetMediaType(pSampleGrabber_pmt);
        DsUtils.FreeAMMediaType(pSampleGrabber_pmt);
        checkHR(hr, "Can't set media type to sample grabber");

        ISampleGrabber pGrabber = new SampleGrabber() as ISampleGrabber; 
        pGrabber = (ISampleGrabber)pSampleGrabber;
        pGrabber.SetCallback(null, 1); 
```

我的 BufferCB 方法就像

```
public int BufferCB(double SampleTime, IntPtr pBuffer, int BufferLen)
        {

            return 0;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T08:22:24.590

您创建并配置了一个实例`pSampleGrabber`，然后将回调附加到另一个未使用的空闲实例`pGrabber`。

你需要

```
pSampleGrabber as ISampleGrabber 
```

代替

```
new SampleGrabber() as ISampleGrabber 
```

# php - 用户登录后显示用户名

> ID：10829580
> 
> 赞同：0
> 
> 时间：2012-05-31T08:00:53.650
> 
> 标签：php, html, login

您好，我尝试在他们登录后显示用户名。

这是我的代码

这是我想展示的页面。索引.php

```
<?php

require_once 'classes/Membership.php';
$membership = New Membership();

$membership->confirm_Member();

?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Home Page</title>
<link href="css/me.css" rel="stylesheet" type="text/css" />
</head>

<body>
<div id="top">
</div>

<div id="top-register">
<?
$_SESSION['username']
?>
<a href="login.php?status=loggedout">
Log Out </a> 
</div>
<div id="top-login">
<a href="index.php"> </a>
</div>

<div id="line">
<div id="banner-text">
Testing
</div>
<div id="banner">
</div>
</div>

<center>
<div id="plan"> 
<div id="plan-innder">
<a href="index.php"><img src="images/plan/starter.png" alt="Starter" width="250" height="300" /></a>

<a href="index.php"><img src="images/plan/regular.png" alt="Regular" width="250" height="300" /></a>

<a href="index.php"><img src="images/plan/advanced.png" alt="Advanced" width="250" height="300" /></a>
</div>
</div>

    enter code here

</center>
</body>
</html> 
```

工作会员.php

```
<?php

require 'Mysql.php';

class Membership {

    function validate_user($un, $pwd) {
        $mysql = New Mysql();
        $ensure_credentials = $mysql->verify_Username_and_Pass($un, md5($pwd));

        if($ensure_credentials) {
            $_SESSION['status'] = 'authorized';
            header("location: index.php");
        } else return "Please enter a correct username and password";

    } 

    function log_User_Out() {
        if(isset($_SESSION['status'])) {
            unset($_SESSION['status']);

            if(isset($_COOKIE[session_name()])) 
                setcookie(session_name(), '', time() - 1000);
                session_destroy();
        }
    }

    function confirm_Member() {
        session_start();
        if($_SESSION['status'] !='authorized') header("location: login.php");
    }

 } 
```

mysql.php

这就是连接到数据库的内容。

```
require_once 'includes/constants.php';

class Mysql {
    private $conn;

    function __construct() {
        $this->conn = new mysqli(DB_SERVER, DB_USER, DB_PASSWORD, DB_NAME) or 
                      die('There was a problem connecting to the database.');
    }

    function verify_Username_and_Pass($un, $pwd) {

        $query = "SELECT *
                FROM users
                WHERE username = ? AND password = ?
                LIMIT 1";

        if($stmt = $this->conn->prepare($query)) {
            $stmt->bind_param('ss', $un, $pwd);
            $stmt->execute();

            if($stmt->fetch()) {
                $stmt->close();
                return true;
            }
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T08:14:25.780

In your index.php write the following code:

```
<div id="top-register">
<?
echo "Hello" .$_SESSION['username'];
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T08:12:50.920

我想，你之前错过了回声。改变

```
<?
$_SESSION['username']
?> 
```

至

```
<?
echo $_SESSION['username']
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T08:07:29.573

创建一个会话变量，它将保存您从查询中获得的用户名，然后在您的页面中回显该会话变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-11T18:11:22.480

我为我的用户登录页面使用了相同的 nettuts 教程。这对我来说可以在 index.php 页面上显示登录用户。

在 INDEX.PHP 页面的正文中插入：

```
<?php
echo "Welcome ", $_SESSION['username'];
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-31T08:10:40.887

在班级成员资格更改此...

```
 if($ensure_credentials) {
        $_SESSION['status'] = 'authorized';
        header("location: index.php");
    } else return "Please enter a correct username and password"; 
```

对此...

```
 if($ensure_credentials) {
        $_SESSION['status'] = 'authorized';
        $_SESSION['username'] = $un;
        header("location: index.php");
    } else return "Please enter a correct username and password"; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-12-11T08:49:33.550

我认为您错过了在 index.php 页面上开始会话，因此请在页面开头输入此行

```
session_start(); 
```

# sql - 如何获得学生的学业进步？

> ID：10829583
> 
> 赞同：0
> 
> 时间：2012-05-31T08:01:06.750
> 
> 标签：sql, sql-server, tsql

课程表

```
course_code   course_name      credit_points_reqd
1             Comp Science     300
2             Soft Engineering 300 
```

主题表

```
subject_code   subject_name    credit_points
CS123          C Prog          15
CS124          COBOL           15 
```

报名表

```
student_id    student_name  course_code      subject_code      Results  
1             Lara Croft    1                CS123               70
1             Lara Croft    1                CS124               50
2             Tom Raider    2                CS123               60
2             Tom Raider    2                CS124               40
3             James Bond    1                CS123               NULL
3             James Bond    1                CS124               40 
```

输出表

```
student_name   course_name      credit_points_obt    credit_points_reqd
Lara Croft     Comp Science     30                   300          
Tom Raider     Soft Engineering 15                   300 
```

我目前正在使用 TSQL。所以这里的情况。我已经准备好这些表格来获得输出，就像我在那里展示的那样。我需要计算获得的学分。如果学生在他们所修的科目中获得 > 50 分，则获得学分。我想忽略根本没有获得任何学分的学生（例如，詹姆斯邦德被忽略，因为他还没有获得任何积分）

```
select student_name, course_name,credit_points_obt,credit_points_reqd
FROM enrolment (SELECT student_full_name, SUM(credit_points) AS credit_points_obt
               FROM enrolment
               GROUP BY student_id), 
```

完全卡住了……我现在不知道该去哪里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T08:58:36.623

您可以有条件地求和以获得主题的分数。如果没有给出结果将是空的，所以你在有子句中过滤掉那些学生/课程对。

我已将 > 50 条件更改为 >= 50，因为您的结果与您的要求相矛盾。此外，根据数据，我会说您已经省略了学生表，但如果您没有，这是必须的。

[现场测试是@Sql Fiddle](http://sqlfiddle.com/#!3/2ecd8/9)。

```
select enrolment.student_name, 
       course.course_name,
       course.credit_points_reqd,
       sum(case when enrolment.results >= 50 
                then subject.credit_points 
            end) credit_points_obt
  FROM enrolment
 inner join course
    on enrolment.course_code = course.course_code
 inner join subject
    on enrolment.subject_code = subject.subject_code
 group by enrolment.student_name, 
          course.course_name, 
          course.credit_points_reqd
having sum(case when enrolment.results >= 50 
                then subject.credit_points 
            end) is not null 
```

# jquery - 如何从 AngularJS 控制器正确调用 jQuery

> ID：10829584
> 
> 赞同：12
> 
> 时间：2012-05-31T08:01:07.027
> 
> 标签：jquery, jquery-ui, angularjs

我正在尝试将 jQuery-UI 选项卡与 AngularJS 一起使用。

[请参阅此处](http://plunker.no.de/edit/pNvygT?live=preview)的示例

问题是在控制器中调用`jQuery("#tabs").tabs();`似乎连接了“tabbify”某些东西所需的“一半”。

想法？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-31T10:18:06.423

您根本不应该在控制器中进行 DOM 操作。相反，您应该使用指令。

我一直在为自己的使用开发一组指令：[https ://github.com/ganarajpr/Angular-UI-Components](https://github.com/ganarajpr/Angular-UI-Components)

理念是将这些简单的代码放在指令文件中：

```
.directive('maketab',function() {
        return function(scope, elm, attrs) {
            elm.tabs({
                show: function(event, ui) {
                        scope.$broadcast("tabChanged",ui);
                }
            });
        };
    }) 
```

然后，在要转换为选项卡的 div 中：

```
<div id="mytab" maketab>

<ul>
....
</ul>

<div>...</div>
...
</div> 
```

*请注意，div 及其子结构应符合 JQuery UI 的要求。*

如需更强大的示例和更多组件，请查看 github 存储库。

# php - 在 mysql start 上运行一些脚本

> ID：10829588
> 
> 赞同：2
> 
> 时间：2012-05-31T08:01:23.013
> 
> 标签：php, javascript, mysql, bash, triggers

我想在mysql启动时向mysql添加一些类似的触发器。所以我有 MEMORY 表和 cron 脚本，它们每 1 小时转储一次这个表。我想在mysql启动时填写这个表格转储。

我怎样才能做到这一点？我知道我可以创建将运行 mysql 并导入转储的 bash 脚本，但我想通过 mysql 工具来执行此操作。可能存在一些在mysql运行时执行的触发器或事件。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T08:20:03.510

设置[`init-file`](http://dev.mysql.com/doc/en/server-options.html#option_mysqld_init-file)选项（在命令行或选项文件中）。

# sockets - 蓝牙：如何使用 Bluez 创建一个套接字以连接到具有特定 UUID 的服务？

> ID：10829596
> 
> 赞同：1
> 
> 时间：2012-05-31T08:01:49.153
> 
> 标签：sockets, bluetooth, sdp

我正在使用 BlueZ 库来管理 linux 下的蓝牙堆栈。我正在尝试打开一个应该与已知 UUID 的特定服务连接的套接字。我已成功尝试按照此处的示例打开服务器和客户端之间的套接字：

[http://people.csail.mit.edu/albert/bluez-intro/c404.html](http://people.csail.mit.edu/albert/bluez-intro/c404.html)

其中还描述了如何探索远程主机中的服务；但是，我无法弄清楚如何在连接套接字时指定 UUID。这在其他情况下非常简单，因为它在使用 Android 库时会发生；但是，对于 BlueZ，我还没有在网上找到示例。

谢谢您的帮助！

斯特凡诺

-- 在回复中补充了一些细节……不知道对不对；如果没有，对不起

* * *

感谢您的帮助！

在我的帖子中，我说我想连接一个具有指定 UUID 的套接字，因为我想到了一个像 createRfcommSocketToServiceRecord 这样的函数，可以在以下位置找到：

[http://developer.android.com/reference/android/bluetooth/BluetoothDevice.html#createRfcommSocketToServiceRecord%28java.util.UUID%29](http://developer.android.com/reference/android/bluetooth/BluetoothDevice.html#createRfcommSocketToServiceRecord%28java.util.UUID%29)

它返回给定特定 UUID 的套接字。我正在开发两个软件，一个是客户端，另一个是服务器，因此这是我正在创建的服务，而不是标准服务。我使用指定的 UUID 在服务器上发布此类服务，并且我想从客户端连接到它。服务器运行良好，因为使用 android 平台，利用提到的 createRfcommSocketToServiceRecord 方法，我能够使用正确的服务连接到服务器。

您发布的示例也很清楚，但不幸的是它是在 Python 中，而（我忘了指出）我使用 Bluez 作为 C 库。我能够利用 SDP 并检查远程服务器上的服务；但是，在设置套接字时，我看不到如何指定端口。我想到了 rc_channel，但据我了解，它是蓝牙通道（范围从 1 到 11 或类似的东西）。您能否指出在客户端创建套接字时我应该能够在哪里指定端口？在 sdp 处理的复杂结构中，我在哪里可以找到正确的端口？——参考：

[http://people.csail.mit.edu/albert/bluez-intro/x604.html](http://people.csail.mit.edu/albert/bluez-intro/x604.html)

再次感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T17:11:28.240

您不通过 UUID 连接套接字。您使用套接字连接到远程设备并浏览其 SDP 以发现它提供的 UUID，并将其映射到套接字端口。这是一个使用 PyBluez 的过程示例，BlueZ 之上的 python 包装器 [http://people.csail.mit.edu/albert/bluez-intro/x290.html](http://people.csail.mit.edu/albert/bluez-intro/x290.html)

# html - 切换活动链接的 CSS 类

> ID：10829597
> 
> 赞同：1
> 
> 时间：2012-05-31T08:01:49.717
> 
> 标签：html, css

我在页面上有 5 个链接，当我单击每个链接时，它会改变颜色，但只要 ma=ove 我的光标并放在页面的其他区域，对活动链接的关注就会消失。所以我无法显示当前的链接状态。请告诉我如何解决

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T08:43:44.690

**html**

```
<tr>
 <td>
  <a href="#" class="linkbold">Basic2</a>
 </td>
</tr>
<tr>
 <td>
  <a href="#" class="linkbold">Basic3</a>
 </td>
</tr>
<tr>
 <td>
  <a href="#" class="linkbold">Basic4</a>
 </td>
</tr> 
```

**CSS**

```
.linkbold{ color:#0066FF; font-family:Tahoma; font-size:11px; text-decoration:none; font-weight:bold !important; }
.active { color: red; } // define any color for active class

// you can use css shorthand for font property
.linkbold { font: bold 11px Tahoma, sans-serif; color:#0066FF; } 
```

如果你想了解更多关于[css 速记的知识](http://www.sitepoint.com/introduction-css-shorthand/)

​<strong>jquery

```
$('a.linkbold').on('click', function(){
    $('a.linkbold').removeClass('active'); // remove any active class
    $(this).addClass('active'); // and then add active class for clicked element.
});​ 
```

[这里的工作示例](http://jsfiddle.net/agriboz/TkPBV/2/)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-31T08:30:38.007

```
<html>
<head>
    <style type="text/css">
        a:link {color:blue;}
        a:visited {color:red;}
        a:hover {color:green;}
    </style>
</head>
<body>
    <a href="#">first</a>
    <br/>
    <a href="#">second</a>
</body>
</html> 
```

# c# - 坚持调用 WCF 对象

> ID：10829598
> 
> 赞同：0
> 
> 时间：2012-05-31T08:01:54.880
> 
> 标签：c#, wcf

这很尴尬，试图自己找到解决方案，但我真的缺乏知识，我无法做到，所以我在这里发布我的问题。

当我调用我的服务时，我的 wcf 服务返回此值

```
 <s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
   <s:Body>
      <GetProcessLocationsResponse xmlns="http://tempuri.org/">
         <GetProcessLocationsResult >
            <a:ProcessLocationData>
               <a:Id>1</a:Id>
               <a:Name>IL</a:Name>
            </a:ProcessLocationData>
            <a:ProcessLocationData>
               <a:Id>2</a:Id>
               <a:Name>MD</a:Name>
            </a:ProcessLocationData>
            <a:ProcessLocationData>
               <a:Id>3</a:Id>
               <a:Name>NY</a:Name>
            </a:ProcessLocationData>
             </GetProcessLocationsResult>
      </GetProcessLocationsResponse>
   </s:Body>
</s:Envelope> 
```

在我的服务类中我写了这个方法

```
 public Array GetProcessLocations()
    {
        return this.GetSoapServiceClient().GetProcessLocations().ToArray();
    }

    public List<ProcessLocationData> GetProcessLocationsOnlyName()
    {
        return this.GetSoapServiceClient().GetProcessLocations().ToList();
    } 
```

我在我的 xyz.class 中调用此服务，如下所示

```
 Array GetProcLocation=  new GatewayService().GetProcessLocations(); 
```

这会返回整个对象，例如 ID 和 Name

但我试图通过调用“GetProcessLocationsOnlyName”方法仅获取名称

我试图像下面那样做

```
array ProcName= ProcessLocationData.Name 
```

应该返回服务中的所有名称，例如数组中的 (IL,MD,NY)，但我根本看不到 ProcessLocationData。

以另一种方式，我试图拆分数组（GetProcLocation）并仅获取名称并添加到新数组中？这有意义吗？

请有人引导我走上正确的道路。在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T09:32:41.583

我对你的问题有点困惑。我确实了解您希望拥有 2 个服务方法，它们都返回一个 ProcessLocationData 数组，一个返回带有 id 和名称的列表 (GetProcessLocations)，一个返回一个仅带有名称的 ProcessLocationData 数组 (GetProcessLocationsOnlyName)。您的问题是客户端代理不包含 GetProcessLocationsOnlyName 方法。

您应该确保这两种方法都使用[OperationContract](http://msdn.microsoft.com/en-us/library/system.servicemodel.operationcontractattribute.aspx)进行注释，否则它们不会被您的服务公开。您应该在服务接口中或直接在服务中具有此属性。您可以看到您的服务在 wsdl 或使用[WCF Test Client](http://msdn.microsoft.com/en-us/library/bb552364.aspx)中公开了这两种方法。

然后您必须确保您的客户端代理是最新的。

*   如果您的客户端代理是使用 Visual Studio 生成的，您应该尝试[更新](http://msdn.microsoft.com/en-us/library/bb628652.aspx)您的服务参考
*   如果您的客户端代理是使用 svcutil 生成的，您必须[手动重新生成它](http://msdn.microsoft.com/en-us/library/aa347733.aspx)

* * *

与您的评论相关，如果您只想返回名称字段，您有以下选项。

*   您可以使用相同的[DataContract](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.datacontractattribute.aspx)，这意味着返回 ProcessLocationData 列表并为每个对象返回一个空 Id
*   您可以创建一个只有一个属性 Name 的新 DataContract，并返回这些对象的列表

我的建议是使用相同的 DataContract 并在数据访问方法中仅加载所需的数据。例如，创建一个新方法 GetProcessLocationsName()，它将创建您的 ProcessLocationData 列表，并且只加载它们的名称。

# android - 将当前呼叫置于前台

> ID：10829599
> 
> 赞同：0
> 
> 时间：2012-05-31T08:01:55.593
> 
> 标签：android, telephonymanager

假设一个 Android 用户正在通话，然后他们点击“home”并启动我的应用程序（将通话留在后台）。

在我的应用程序中，我使用 TelephonyManager.CALL_STATE_IDLE 检测到正在进行的呼叫，但随后我希望显示正在进行的呼叫显示，以便用户可以直接控制呼叫（即看到结束呼叫按钮）。

发出意图 ACTION_DIAL 无济于事，因为这只会打开一个拨号程序窗口，而不是正在进行的呼叫窗口。

任何人都可以建议如何在我的代码中显示正在调用的窗口。

非常感谢，彼得

# mysql - 在 mysql 字段中搜索

> ID：10829601
> 
> 赞同：0
> 
> 时间：2012-05-31T08:02:17.803
> 
> 标签：mysql, search, full-text-search, field, where-clause

# 我需要一个 select 语句来匹配包含全名的字段中的部分记录。

如果记录包含 john，它将显示带有 john、johnson、johnsmith 等的记录。john 可以是名称中的任何位置

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T08:04:04.657

```
select  
  name_field  
from  
  my_table  
where  
  name_field like '%john%' 
```

**更新**：对于这个问题

> 您的意思是要问“如何查找，如果 row1 的 name_field 值与从其他 row2 到 rowN 的相同字段值完全或部分匹配？”

你回答“*这正是我需要的*”。

以下解决方案可能对您有所帮助：

```
select  
 t.name_field_id, t.name_field as 'name_value',  
 d.name_field_id as 'id_of_dup', d.name_field as 'dup_in'  
from  
 my_table t,  
 my_table d  
where  
 d.name_field != t.name_field  
 and d.name_field like concat( '%', t.name_field, '%'  )  
order by name_value, dup_in; 
```

# java - Java EE：在服务器和客户端之间共享实体类

> ID：10829602
> 
> 赞同：1
> 
> 时间：2012-05-31T08:02:19.823
> 
> 标签：java, inheritance, jaxb, jpa-2.0

我负责为多个客户端提供后端功能的 Java EE 应用程序。一些客户端也是用 Java 编写的，所以我将我的实体提取到一个单独的 jar 中，服务器和客户端共享该 jar。

服务器使用 JPA2 实现持久性，使用 JAX-RS 与客户端通信，使用 JAXB 序列化到/从 XML 和 JSON。因此，（共享的）类文件包含 JPA 和 JAXB 注释。

显然，同一个对象在服务器（它是托管的 JPA 实体）和客户端（它是反序列化的 POJO）上的行为不同——尤其是在一对多关系方面。

**问题：**有时我想让各个方法调用的行为根据它们的执行位置而有所不同。我可以通过继承来解决这个问题，这样我就不必手动维护同一个类的两个实现了吗？

例子：

*   一支球队有很多球员。玩家有名字。
*   请求被映射到`GET /team/<id>`获得一个团队，并`GET /team/<id>/<playerName>`为一个团队获得一个特定的球员。
*   对于编组和序列化，`Team`应保持“平坦”（不包括播放器）。但是，在序列化中包含他们的名字，以便客户端知道他们可以详细检索哪些玩家。

在服务器端，我会这样构建它：

```
@Entity
@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class Team {

  /* some other fields, belonging to the Team */

  @OneToMany(fetch = FetchType.LAZY, mappedBy="team")
  @XmlTransient  // don't marshall the players
  List<Player> players;

  /* getters and setters as necessary */

  @XmlElement
  public List<String> getPlayerNames() {
    List<String> names = new ArrayList<String>();
    for (Player p : getPlayers()) {
      names.add(p.getName());
    }
    return names;
  }
} 
```

在客户端，我会将其映射到：

```
@XmlRootElement
@XmlAccessorType(XmlAccessType.FIELD)
public class Team {

  /* some other fields, belonging to the Team */

  List<String> playerNames;

  public List<String> getPlayerNames() {
    return playerNames;
  }

  public void setPlayerNames(List<String> playerNames) {
    this.playerNames = playerNames;
  }

  /* getters and setters as necessary */

} 
```

这样，玩家名称在服务器端被编组（通过`@XmlElement`-annotated `getPlayerNames()`）。当客户端收到它时，它会正确地解组列表。每个人都很高兴。

但是，现在我必须维护两个基本相同的类，其中只有微小的差异......正确执行此操作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T09:35:32.907

直接序列化实体并通过网络传输它们可能会产生问题，例如，如果您有循环引用，或者如果您希望包含反序列化可能需要的其他信息，尤其是在 JSON 中。另一个问题可能是分离的实体（如果您将它们发送到客户端，实体管理器将失去对实体的控制，当它们返回时您必须重新附加它们）或延迟加载（您不能在客户端上延迟加载）。因此，我建议在通过网络传输实体之前将它们转换为数据传输对象。有关详细信息和动机，请参阅 Fowler 的《企业应用程序架构模式》（第 401 页，该章的大部分内容可通过 Google 图书获得）。

在客户端和服务器上使用相同的类也可能有问题，因为它们的行为不同，并且将来可能会进一步分化。您可能会通过在客户端和服务器上提交相同的代码库来限制自己，或者最终导致一团糟。

# php - mysql DELETE 与另一个表中的字段检查

> ID：10829603
> 
> 赞同：1
> 
> 时间：2012-05-31T08:02:21.930
> 
> 标签：php, mysql

大家早上好，周四早上快乐。我希望我自己能做到这一点，但由于我还不是 MySQL 语句的大师（还）而且我在这个`DELETE`查询中迷失了方向，所以就这样......

我必须做一个`DELETE`像这样的简单查询，（通过它的 id 删除评论）

```
DELETE FROM mya_news_comments WHERE comment_id='".$_GET['comment_id']."'"; 
```

但同时，为了防止人们删除整个网站的评论，我需要确保删除此评论的人是它应该是的人（在我们的例子中，是艺术家）。

我有另一个表`mya_news`，其中有字段`news_id`，`artist_id` 在`mya_news_comments`我也有一个名为`news_id`

所以我需要检查我是否删除了特定艺术家的comment_id，而不是其他艺术家的。基本上我需要交叉检查`news_id`从`mya_news_comments`签出的字段是否与具有相同`news_id`from`mya_news`和`artist_id`from的字段`mya_news`等于`$_id`（包含我的`artist_id`）

我真的被困在这里了。如果需要，我很乐意提供更多细节。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T08:07:58.603

```
DELETE mya_news_comments
FROM   mya_news_comments
WHERE  mya_news_comments.comment_id = (SELECT [another_table].comment_id WHERE [cond])
   AND mya_news.artist_id = (SELECT [another_table].artist_id WHERE [cond]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T08:04:43.377

您可以像在语句中一样在语句中[连接](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)表：`DELETE``SELECT`

```
DELETE mya_news_comments
FROM   mya_news_comments JOIN mya_news USING (news_id)
WHERE  mya_news_comments.comment_id = ?
   AND mya_news.artist_id = ? 
```

# javascript - 使用 JScript 在 global.asa 中创建数据库连接

> ID：10829604
> 
> 赞同：1
> 
> 时间：2012-05-31T08:02:22.270
> 
> 标签：javascript, asp-classic, jscript, global.asa

我有个问题。我有这样一段带有 JScript 的 ASP 代码：

```
var stringa = "Driver=SQL Server;Server=xxx;Database=xxx;Uid=xxx;Pwd=xxx;";
var cn = new ActiveXObject("ADODB.Connection");
var rs = new ActiveXObject("ADODB.Recordset");
cn.Open(stringa);
var SQL = "SELECT * FROM pippo"
rs.Open(SQL, cn, 1);

// ...

rs.Close(); 
```

我想将此代码转换为两个文件：global.asa（用于连接）和 pippo.asp（用于其余代码）。在网上，我发现只有`global.asa`用 VBScript 编码的代码，但我想使用 JScript。你能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T08:38:31.490

我过去所做的是将连接字符串存储为`Application`global.asa 中设置的变量，并`Connection`逐页创建对象。global.asa 的 JScript 版本的语法将与 VBScript 版本非常相似。

从[文档](http://msdn.microsoft.com/en-us/library/ms525965%28VS.90%29.aspx)中：

> 当应用程序启动时，服务器查看 Global.asa 文件并处理 Application_OnStart 函数。当应用程序结束时，服务器处理 Application_OnEnd 函数。

所以一个准系统 global.asa 可能看起来像：

```
<script language="JScript" runat="Server">
    function Application_OnStart() {
        Application.Contents("connString") = "<etc...>";
    }
</script> 
```

# android - phonegap 相机问题“失败，因为：”

> ID：10829606
> 
> 赞同：2
> 
> 时间：2012-05-31T08:02:37.813
> 
> 标签：android, eclipse, cordova, eclipse-plugin, camera

我正在使用 PhoneGap 相机，但遇到了一个奇怪的问题。我实现了在 Eclipse AVD 和实际的 HTC Wildfire 上运行官方网站上的示例，但是由于我安装了 AppLaud ADT，它停止工作，现在我收到了消息

> “失败，因为：”

没有错误信息。

我试图从 scracth 重新安装 eclipse 并再次复制示例失败。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-05T02:06:43.667

您可能尚未将图像数据发送到`onSuccess`方法。

```
function onPhotoDataSuccess(imageData) {

      var smallImage = document.getElementById('smallImage');

      // Unhide image elements
      //
      smallImage.style.display = 'block';

      // Show the captured photo
      // The inline CSS rules are used to resize the image
      //
      smallImage.src = "data:image/jpeg;base64," + imageData;
        alert('set image');
    }

navigator.camera.getPicture(onSuccess, onFail, { quality: 20,
        destinationType: destinationType.DATA_URL });

function onSuccess(imageURI) {
    var image = document.getElementById('myImage');
    image.src = imageURI;

}

function onFail(message) {
    alert('Failed because: ' + message);
} 
```

# c# - 事件没有在后面的代码中触发

> ID：10829609
> 
> 赞同：0
> 
> 时间：2012-05-31T08:02:52.093
> 
> 标签：c#, javascript

```
PnlImages.Controls.Add(new LiteralControl("  <img id=\"img\" class=\"content\" src=\"" + url + "\" runat=\"server\" name=\"img\" onclick=\"return onClick(this);\" />"));

public void onClick(object sender)
{

} 
```

调试器没有触发，而是给出错误“预期对象”。
请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T08:21:07.497

runat=\"server\" 属性不是 HTML 属性，而是 ASP.Net 实例化 ASP.Net 控件（System.Web.UI 命名空间）的指令，这些控件不仅生成 HTML，还生成 ViewState、事件处理程序等。

onclick 属性是指需要在 HTML 或链接的 .js 文件中实现的 JavaScript 函数，而不是 C# 后端代码中的 OnClick 方法。

# .net - 为什么VB.Net在接口上找不到扩展方法？

> ID：10829615
> 
> 赞同：5
> 
> 时间：2012-05-31T08:03:40.920
> 
> 标签：.net, vb.net, extension-methods

我有一个具有扩展方法的 C# 库，例如：

```
public interface ISomething { ... }
public class SomethingA : ISomething { ... }
public class SomethingB : ISomething { ... }

public static class SomethingExtensions 
{
    public static int ExtensionMethod(this ISomething input, string extra) 
    {
    }
} 
```

如果从 C# 调用该扩展可以正常工作，但如果从外部 VB.Net 应用程序调用则会出现问题：

```
Dim something = Me.SomethingManager.GetSomething(key)
Dim result = something.ExtensionMethod("extra") 
```

这编译得很好，但在运行时抛出异常：

> 未找到类型“SomethingB”的公共成员“ExtensionMethod”。

如果将 VB.Net 更改为显式使该类型成为其工作的接口：

```
Dim something as ISomething = Me.SomethingManager.GetSomething(key)
Dim result = something.ExtensionMethod("extra") 
```

为什么？为什么扩展方法只作用于接口而不作用于实现它的类？如果我使用子类，我会遇到同样的问题吗？VB.Net 的扩展方法实现不完整吗？

我可以在 C# 库中做些什么来使 VB.Net 在没有显式接口的情况下工作吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T13:11:19.370

使用 Option Infer Off 时，此代码...

```
Dim something = Me.SomethingManager.GetSomething(key)
Dim result = something.ExtensionMethod("extra") 
```

...是相同的...

```
Dim something As Object = Me.SomethingManager.GetSomething(key)
Dim result As Object = something.ExtensionMethod("extra") 
```

由于`something`is 的 type `Object`，它找不到扩展方法，因为它没有在 type 上定义`Object`。

现在，如果您设置，您将获得与使用 C#关键字`Option Infer On`相同的结果。`var`类型将被自动推断。请注意，这也可能会破坏现有代码，但可以为特定文件启用它，例如`Option Strict`.

最佳做法是将两者都设置`Option Strict`为`Option Infer`开。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T08:06:30.650

如果它*抛出异常*而不是给出编译时错误，则表明您已关闭[Option Strict](http://msdn.microsoft.com/en-us/library/zcd4xwzs.aspx) ...我不知道在这种情况下扩展方法会发生什么，因为它们通常在*编译时*解决，但是在 Option Strict 关闭的情况下，您将进行后期绑定。

我建议你打开 Option Strict，一切都应该很好......

（根据理查德的回答，您*还*需要导入命名空间，但我假设您已经这样做了。如果您在打开选项严格后忘记这样做，您会看到*编译时*错误，无论如何.)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T11:13:45.060

为 Jon 为我指明正确的方向而欢呼，但这里需要一个完整的答案就足够了。

扩展方法是一种编译器技巧，因此（在 C# 中）：

```
var something = this.SomethingManager.GetSomething(key);
var result = something.ExtensionMethod("extra"); 
```

在编译时转换为：

```
ISomething something = this.SomethingManager.GetSomething(key);
int result = SomethingExtensions.ExtensionMethod(something, "extra"); 
```

作为类的方法出现的静态扩展方法只是编译器的聪明之处。

问题是`Dim`在 VB 中与`var`在 C# 中不同。感谢 VB 的后期绑定，它更接近`dynamic`.

因此，使用 VB 中的原始示例：

```
Dim something = Me.SomethingManager.GetSomething(key)
Dim result = something.ExtensionMethod("extra") 
```

与 C# 不同，在 VB 中确定类型的工作`something`要等到运行时才进行，并且不会发生使扩展方法起作用的编译器的聪明才智。如果显式声明了类型，则可以解析扩展方法，但如果是后期绑定，则扩展方法将永远无法工作。

如果他们使用`Option Strict On`（如 Jon 建议的那样），那么他们将被迫总是声明类型，发生早期绑定并且编译器的聪明才智使扩展方法起作用。无论如何，这是最佳实践，但由于他们没有这样做，因此做出的改变对他们来说将是一个痛苦的改变。

这个故事的寓意：如果您希望任何来自 VB 的人在它附近登陆，请不要在您的 API 中使用扩展方法：-S

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T08:06:22.743

您是否导入了包含定义命名空间的类的命名空间。

例如。如果没有

```
Imports System.Linq 
```

# sql - 如何为 tclodbc 定义驱动程序？

> ID：10829621
> 
> 赞同：1
> 
> 时间：2012-05-31T08:04:15.070
> 
> 标签：sql, odbc, tcl, freetds

我想使用 Linux 环境中的 tclodbc 连接到 MS SQL 服务器。我有驱动程序（freeTDS）和连接字符串。但我不知道如何配置 tclodbs 使用的驱动程序。有一个命令

> **数据库配置** *操作驱动属性*

但我不知道该放什么`operation`and `attributes`，以及这是否是正确的命令。

与我的问题相关：[Accessing Microsoft SQL Server from Tcl running on GNU/Linux](https://stackoverflow.com/questions/10634158/accessing-microsoft-sql-server-from-tcl-running-on-gnu-linux/10635949#10635949)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T11:58:40.877

好的，这是我根据[这些](http://www.freetds.org/userguide/odbcconnattr.htm) 关于如何使用 FreeTDS 驱动程序建立无 DSN 连接的[指南的看法。](http://www.freetds.org/userguide/dsnless.htm)

我已经针对 Microsoft SQL Server 2005 的实例对其安装了 2.5-5、2.2.11 和 0.8.2-1-4.1 和 8.4.16-2的Debian `tclodbc`Lenny系统进行了测试。`unixodbc``libdbd-freetds``tcl`

```
package require tclodbc

proc cs_append {varName args} {
    set alen [llength $args]
    if {$alen < 2 || $alen % 2 != 0} {
        return -code error "Wrong # args: should be varName key value ?key value?"
    }

    upvar 1 $varName qs

    foreach {key value} $args {
        if {$qs ne ""} {
            append qs \;
        }
        append qs $key = \{ [string map {\{ \\\{} $value] \}
    }
}

set user test
set pass secret

set cs ""
cs_append cs DRIVER FreeTDS UID $user PWD $pass \
    Server myserver.domain.local \
    ClientCharset UTF-8 \
    APP "My test app"

database connect db $cs
foreach row [db {select * from MyDatabase..MyTable}] {
    puts $row
}
db disconnect 
```

一些注意事项：

*   `/etc/odbcinst.ini`通过在文件中注册 FreeTDS 驱动程序，ODBC 子系统必须知道它。我想至少在我的系统上，适当的软件包会自己处理这个问题，但你最好验证你是否在该文件中注册了 FreeTDS，否则`DRIVER=FreeTDS`连接字符串中的那个位将不起作用，因为 ODBC 将不知道如何加载命名的驱动程序库。
*   和连接字符串参数在我`ClientCharset`的*情况下不起作用。*虽然我可以接受第二个，但第一个很糟糕，因为在这种情况下，字符数据以某种拙劣的编码返回。`APP`

     *`/etc/freetds/freetds.conf`但是，当我使用文件中的命名服务器`ServerName=THAT_SERVER`而不是`Server=SERVER_HOST`在连接字符串中使用命名服务器时，就没有这样的问题了。不幸的是，这种方式破坏了使用无 DSN 设置的一半目的。

    很可能这是我的 FreeTDS 驱动程序版本中的一个错误，我这里有一个非常过时的系统，所以 YMMV 和你最好检查一下你的系统。* 

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T11:02:44.257

如果我们查看[文档](http://tclodbc.cvs.sourceforge.net/viewvc/tclodbc/tclodbc/doc/reference.htm?revision=1.5)，我们会看到有 6 个操作，其中您可能想要的一个是`add_dsn`. 包括一个例子（下面，有一个小的修正）：

```
set driver "Microsoft Access Driver (*.mdb)" 
set attributes [list "DSN=mydsn" "DBQ=c:\mydb.mdb" "FIL=MS Access"] 
database configure add_dsn $driver $attributes 
```

恐怕您必须查阅 FreeTDS 文档才能获得正确的属性集合，但我*认为*（基于[此证据](http://www.freetds.org/userguide/dsnless.htm)）您将拥有驱动程序，并且如果它是空列表`FreeTDS`，则属性*可能*没问题（或仅`TDS_Version=5.0`在其中）。配置ODBC我真的不是太懂……</p>*

# c# - Error converting data type varchar to bigint

> ID：10829625
> 
> 赞同：1
> 
> 时间：2012-05-31T08:04:25.987
> 
> 标签：c#, asp.net, sql, sql-server

I am retrieving values from listbox and formatting them in string as

```
if (lbRaisedByLogin.SelectedIndex != -1)
    {
        foreach (ListItem item in lbRaisedByLogin.Items)
        {
            if (item.Selected == true)
            {
                sb.AppendFormat("{0},", item.Value);
            }
        }

        searchCase.raisedByLogin = sb.ToString().TrimEnd(Convert.ToChar(","));
        sb.Length = 0;
    } 
```

I am passing these strings to store procedure as parameter (Datatype-- Varchar(Max))

in stored procedure I am comparing these values like

```
SELECT * FROM AUS_CID_Cases
WHERE
AddedBy IN ( @raisedByLogin ) 
```

Where @raisedByLogin is one of the parameter i passed. It has values like @raisedByLogin="4,2,1"

AddedBy has datatype bigint.

When I run code I get error as "Error converting data type varchar to bigint.".. I understand it is because AddedBy column has datatype bigint. I can not change that datatype.

However when i cast AddedBy like

```
SELECT * FROM AUS_CID_Cases
WHERE
CAST(AddedBy as VARCHAR) IN ( @raisedByLogin ) 
```

I dont get error, but nothing is selected i.e I dont get any result from select statement.

What can I do?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T08:47:00.163

First create this view

```
CREATE FUNCTION [dbo].[Split](@String varchar(8000), @Delimiter char(1))       
returns @temptable TABLE (items varchar(8000))       
as       
begin       
    declare @idx int       
    declare @slice varchar(8000)       

    select @idx = 1       
        if len(@String)<1 or @String is null  return       

    while @idx!= 0       
    begin       
        set @idx = charindex(@Delimiter,@String)       
        if @idx!=0       
            set @slice = left(@String,@idx - 1)       
        else       
            set @slice = @String       

        if(len(@slice)>0)  
            insert into @temptable(Items) values(@slice)       

        set @String = right(@String,len(@String) - @idx)       
        if len(@String) = 0 break       
    end   
return 
```

then change the query to this and try,

```
SELECT * FROM AUS_CID_Cases
WHERE
CAST(AddedBy as VARCHAR) IN ( select * from split(@raisedByLogin,',') ) 
```

found above Function [here](http://blog.logiclabz.com/sql-server/split-function-in-sql-server-to-break-comma-separated-strings-into-table.aspx), and managed to solve this issue sometime back...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T08:14:21.713

try to build SQL select query inside stored procedure and execute after that.

```
DECLARE @raisedByLogin varchar(600)

SET @SQL = 
'SELECT * FROM AUS_CID_Cases
 WHERE
  AddedBy IN (' + @raisedByLogin + ')' 

EXEC(@SQL) 
```

check [How to pass a list of values or array to SQL Server stored procedure?](http://vyaskn.tripod.com/passing_arrays_to_stored_procedures.htm) for more information

# c# - 具有多个接收者的消息广播

> ID：10829632
> 
> 赞同：2
> 
> 时间：2012-05-31T08:04:37.537
> 
> 标签：c#, tcp, udp, message, msmq

我有一个发送消息的主窗体和作为单独应用程序运行的随机数量的接收窗体（C# 4.0）。

每次随机数量的表单之一收到消息，但收到消息后，其他表单将不再收到消息。

我已经用 UDP、TCP IP、MSMQ 试过这个，但我似乎没有让它运作良好。发送者和接收者在同一个系统上运行。

谁能推荐我一种方法来广播一条消息，该消息一直保留在某种队列中，直到所有表单都收到它，或者它可以保留在该队列中直到应用程序关闭，但是如何...？

在此先感谢人们！

亲切的问候韦斯利

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-09-13T16:18:59.357

## 组播 MSMQ

您可以将**MSMQ 与多播**选项一起使用（在尝试之前检查您的 Windows 安装是否具有该选项，您将在 Windows 控制面板的“添加/删除 Windows 功能”部分找到它）。

使用 MSMQ 多播队列的发送方将提交可由许多 MSMQ 多播队列接收方处理的消息。

## 接收者

阅读器必须有一个私有队列，然后您需要设置要使用的多播地址（多播地址的选择是任意的，这就是为什么您经常会在不同的帖子中看到相同的地址，请参阅 msdn 文档了解更多信息），如下所示：

```
var myQueue = MessageQueue.Create(".\private$\MulticastTest", false);
myQueue.MulticastAddress = "234.1.1.1:8001"; 
```

或以标准方式直接使用现有的多播队列（如果已使用多播地址创建）：

```
var myQueue = new MessageQueue(multicastQueueName()); 
```

然后您将不得不使用您喜欢的方法收听新消息，我更喜欢使用这个：

```
myQueue.Formatter = new XmlMessageFormatter(new Type[] { typeof(String) });
myQueue.PeekCompleted += new PeekCompletedEventHandler(QueuePeekCompleted);
myQueue.BeginPeek(); 
```

委托 QueuePeekCompleted 如下所示：

```
 private void QueuePeekCompleted(object sender, PeekCompletedEventArgs e)
     {
        try
        {
            var message = myQueue.EndPeek(e.AsyncResult);

            //LogInfo("Received this : " + message.Body);
        }
        catch (Exception ex)
        {
            //LogError(ex);
        }
        myQueue.Receive();
        myQueue.BeginPeek();
    } 
```

## 发件人

多播消息的发送者必须像这样连接到多播队列：

```
MessageQueue myQueue = new MessageQueue("formatname:multicast=234.1.1.1:8001"); 
```

然后像往常一样发送消息：

```
myQueue.Send("hey listen!"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T10:31:16.260

您正在寻找的消息传递模式称为[发布-订阅](http://en.wikipedia.org/wiki/Publish_subscribe)。MSMQ 本身不支持这种消息传递模式。

但是有许多开源工具，包括[RabbitMQ](http://www.rabbitmq.com/dotnet.html)和[NServiceBus](http://www.nservicebus.com/)。

# c# - 具有单例模式的 3 层应用程序

> ID：10829638
> 
> 赞同：-4
> 
> 时间：2012-05-31T08:04:55.787
> 
> 标签：c#, design-patterns, n-tier-architecture

我只是用以下模式创建一个 3 层 WinForm 应用程序。

-- 我的基类：DAL 类

```
public class Domain
{

    public string CommandName = string.Empty;
    public List<Object> Parameters = new List<Object>();

    public void Save()   
    {
        List<Object> Params = this.SaveEntity();
        this.ExecuteNonQuery(CommandName, Params.ToArray());
    }

    public void Delete() 
    {
        List<Object> Params = this.DeleteEntity();
        this.ExecuteNonQuery(CommandName, Params.ToArray());
    }

    public void Update() 
    {
        List<Object> Params = this.UpdateEntity();
        this.ExecuteNonQuery(CommandName, Params.ToArray());
    }

    protected virtual List<Object> SaveEntity()
    {
        return null;
    }
    protected virtual List<Object> UpdateEntity()
    { 
        return null;
    }
    protected virtual List<Object> DeleteEntity()
    {
        return null;
    }

    public int ExecuteNonQuery(string SqlText, params object[] Params)
    {
        /*
         * Code block for executing Sql
         */
        return 0;
    }
} 
```

**我的业务层类将继承 DLL 类**

-- 我的孩子们 : BLL CLASS

```
public class Person : Domain
{
    public string name
    {
        get;
        set;
    }
    public string number
    {
        get;
        set;
    }

    protected override List<object> SaveEntity()
    {
        this.Parameters.Add(name);
        this.Parameters.Add(number);
        return this.Parameters;
    }
} 
```

-- USE **这是使用我的基类的方式**

```
void Main()
{
    Person p = new Person();
    p.name = "Vijay";
    p.number = "23";
    p.Save();
} 
```

**问题**

*   这是我遵循的正确架构吗？是否有机会将基类创建为单例？
*   还有其他面糊架构吗？
*   我可以遵循任何模式来扩展我的功能吗？

请建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T11:16:45.083

让我们来看看。我会尽力提供我的意见。我在这里看到你正在尝试做的是 ORM。所以请将基类的名称从 Domain 更改为其他名称

**这是我遵循的正确架构吗？是否有机会将基类创建为单例？**

为什么你需要你作为单例的基类。您将继承您的基类，并创建子类的实例。永远不会创建 base 本身的实例。（99% 次 :)）

**还有其他面糊架构吗？**

明白此事。做某件事，可能有多种方法。这只是事实上，哪一个最适合你。

**我可以遵循任何模式来扩展我的功能吗？**

永远记住 SOLID 原则，它为您提供松散耦合并允许轻松扩展。

[坚硬的](http://www.c-sharpcorner.com/uploadfile/biswapinky/solid-principles-of-oops/)

我建议进行一些更改。不是基类，而是从接口开始，然后继承它来创建一个抽象类。

还要确保您的基类可以执行所有 CRUD 功能。我在这里看不到检索功能。你打算怎么做？可能您需要一个返回应用程序所有实体的存储库类。因此，当您需要人员时，您只需继续要求存储库返回所有人员。

总而言之，有很多 ORM 工具可以实现这种功能并节省开发人员的时间。最好学习这些技术。例如 LINQ - SQL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T04:53:56.667

正如 Anand 所建议的，我从基类中删除了所有与 SQL 相关的函数，并将它们全部放在另一个类中，`Sql`.

之后，我把这个`Sql`类变成了一个单例。我将`Sql`实例存储在其中，`BaseDAL`以便可以在所有 DAL 类中访问它。

我的代码看起来像这样

```
public class BaseDAL
{
    // Singleton Instance
    protected Sql _dal = Sql.Instance;

    public string CommandName = string.Empty;
    public List<Object> Parameters = new List<Object>();

    public void Save()   
    {
        List<Object> Params = this.SaveEntity();
        _dal.ExecuteNonQuery(CommandName, Params.ToArray());
    }

    public void Delete() 
    {
        List<Object> Params = this.DeleteEntity();
        _dal.ExecuteNonQuery(CommandName, Params.ToArray());
    }

    public void Update() 
    {
        List<Object> Params = this.UpdateEntity();
        _dal.ExecuteNonQuery(CommandName, Params.ToArray());
    }

    protected virtual List<Object> SaveEntity()
    {
        return null;
    }
    protected virtual List<Object> UpdateEntity()
    { 
        return null;
    }
    protected virtual List<Object> DeleteEntity()
    {
        return null;
    }

   // Other functions, like DataTable and DataSet querying
} 
```

新的 SQL 类是

```
public class Sql
{

    // All other functions are also present in this class for DataTable DataSet and many other 
    // So this class is more then enough for me.
    public int ExecuteNonQuery(string SqlText, params object[] Params)
    {
        // Code block for executing SQL
        return 0;
    }
} 
```

`CommandName`并`Parameters`作为字段而不是属性公开。在最初的解决方案中，它们是属性。此外，我在 BaseDAL 中有一个方法来查询数据，以帮助实现`Person`该类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T13:53:26.487

> 这是我遵循的正确架构吗

对于没有上下文的任何问题，没有架构是最佳的。也就是说，你可以做*一些*事情来让你的生活变得更加困难。单例在您的实施中不是您的问题。

> 还有其他面糊架构吗？

大概是。只是瞥一眼代码，我看到很多东西会在不久的将来伤害你，而不是那么近的将来。

首先，一条忠告：**把基础**搞好，在会走路之前不要跑。这可能是反对票的原因。

一些随机问题：

*   您在谈论 3 层架构，但从技术上讲，那里没有层，甚至没有层。`Person`对我来说看起来不像业务逻辑：如果我理解正确，它还必须提供要执行的命令的字符串，所以它必须知道 SQL。
*   空虚方法应该是抽象的。如果您希望能够执行任意 SQL，请将其移出类
*   正如@Anand 指出的那样，没有方法可以查询
*   CommandName 和 Parameters 公开为字段而不是属性
*   CommandName 不是名称，域看起来不像该类的合适名称
*   它看起来像是一个众所周知的问题（ORM）的尴尬解决方案。您说您希望能够执行自定义 SQL，但任何体面的 ORM 都应该能够让您做到这一点。

建议阅读：基本内容的[代码完成和](https://rads.stackoverflow.com/amzn/click/com/0735619670)[企业架构应用程序，以](https://rads.stackoverflow.com/amzn/click/com/073562609X)明确您可能需要的架构模式。

# jsf-2 - Primefaces Dataexporter 和 get 方法

> ID：10829640
> 
> 赞同：1
> 
> 时间：2012-05-31T08:05:00.140
> 
> 标签：jsf-2, primefaces

使用一个只包含一个字符串列表的简单类，我可以使用类 List`p:dataTable`的`get(int)`方法查看它的所有元素，但是当我尝试使用`p:dataExporter`组件导出它时它失败了。

这是Java源代码：

```
@ManagedBean
@SessionScoped
public class MainClass {

private List<ArrayList<String>> listOfListOfString;

public List<ArrayList<String>> getListOfListOfString() {
    return listOfListOfString;
}

public void setListOfListOfString(List<ArrayList<String>> listOfListOfString) {
    this.listOfListOfString = listOfListOfString;
}

public MainClass() {
    listOfListOfString = new ArrayList<ArrayList<String>>();
    ArrayList<String> firstList = new ArrayList<String>();
    firstList.add("a");
    firstList.add("b");
    listOfListOfString.add(firstList);
    ArrayList<String> secondList = new ArrayList<String>();
    secondList.add("1");
    secondList.add("2");
    listOfListOfString.add(secondList);
}
} 
```

和 XTHML 代码：

```
 <h:body>
    Hello from Facelets
    <h:form prependId="false">
        <p:dataTable id="tbl" var="myList" value="#{mainClass.listOfListOfString}" paginator="true" rows="10" > 
            <p:column headerText="First column"> 
                <h:outputText value="#{myList.get(0)}"/>
            </p:column>  
            <p:column headerText="Second column">  
                <h:outputText value="#{myList.get(1)}"/>
            </p:column>
        </p:dataTable>

        <h:commandLink  value=" csv">
            <p:dataExporter type="csv" target="tbl" fileName="userList" />
        </h:commandLink>
    </h:form>
</h:body> 
```

当我点击 csv 链接时的错误堆栈：

```
For input string: "get"
- Stack Trace

 java.lang.NumberFormatException: For input string: "get"
at java.lang.NumberFormatException.forInputString(NumberFormatException.java:48)
at java.lang.Integer.parseInt(Integer.java:449)
at java.lang.Integer.parseInt(Integer.java:499)
at javax.el.ListELResolver.coerce(ListELResolver.java:173)
at javax.el.ListELResolver.getType(ListELResolver.java:72) 
```

你知道为什么`p:dataTable`可以使用该`get(int)`方法而`p:dataExporter`不能吗？

谢谢，

菲利普

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T08:14:15.573

可能这两个组件的实现方式不同。

但是您可以通过这种方式访问​​列表元素：

```
#{myList[n]} 
```

`n`列表索引在哪里。

# c - 将文件内容转换为十六进制格式

> ID：10829644
> 
> 赞同：0
> 
> 时间：2012-05-31T08:05:12.230
> 
> 标签：c, hex, decimal

这里我有一个文件`testdec.txt`。在这个文件中的内容如下。

```
N = 162,27,79,83,101,69,213,78,188,215,254,75,222,74,204,124,53,108,240,157,213,109,189,143,226,71,120,134,57,27,64,230,126,218,4,249,150,44,182,223,70,241,96,113,61,115,54,13,209,53,236,157,164,126,202,150,121,13,180,223,50,84,239,39,188,44,119,71,50,220,196,107,218,66,106,24,203,13,150,135,231,65,240,236,32,226,166,2,243,26,236,253,185,88,196,58,255,146,93,202,57,219,57,160,62,160,225,167,0,209,231,110,156,106,8,119,47,255,46,87,76,10,243,99,48,147,47,197
E = 1,0,1 
```

在这里，我想将`N and`E 值转换为十六进制格式，并希望将每个十进制值写入两个字节的十六进制值，不带`comma`分隔符。我想将此十六进制值写入另一个`testhex.txt`文件。

如果十进制值只是十六进制的一个字节，那么我还必须`0`在该十六进制值前面添加。你可以在这个东西中看到`E`'s value。

我想在其他文件或同一个文件中做这些事情。可能在另一个文件中是可能的。我们不能在同一个文件中做。

我想要另一个`testhex.txt`文件输出文件，例如

```
N = A21B4F536545D54EBCD7FE4BDE4ACC7C356CF09DD56DBD8FE2477886391B40E67EDA04F9962CB6DF46F160713D73360DD135EC9DA47ECA96790DB4DF3254EF27BC2C774732DCC46BDA426A18CB0D9687E741F0EC20E2A602F31AECFDB958C43AFF925DCA39DB39A03EA0E1A700D1E76E9C6A08772FFF2E574C0AF36330932FC5
E = 010001 
```

那么我怎样才能实现这个目标。请给我关于这个的建议。

**编辑：也试试这个`testdec.txt`根据 BLUEPIXY 代码它在无限循环中消失了。**

```
N = 137,72,247,73,196,168,11,223,107,232,230,189,125,211,175,123,12,235,2,231,123,244,84,184,214,143,144,189,38,103,237,173,129,68,158,92,8,141,76,60,76,98,54,39,7,48,148,45,76,105,52,191,255,245,117,156,25,122,244,65,79,110,244,17,23,110,128,239,117,70,46,140,178,75,230,126,242,100,77,194,42,187,241,110,218,215,242,118,186,92,133,26,175,167,158,16,113,123,105,114,161,23,79,197,76,102,103,93,230,174,120,128,194,34,104,42,253,131,122,49,30,212,205,237,119,71,108,95
E = 1,0,1 
N = 137,72,247,73,196,168,18,223,107,232,230,189,125,211,175,123,12,235,2,231,123,244,84,184,214,143,144,189,38,103,237,173,129,68,158,92,8,141,76,60,76,98,54,39,7,48,148,45,76,105,52,191,255,245,117,156,25,122,244,65,79,110,244,17,23,110,128,239,117,70,46,140,178,75,230,126,242,100,77,194,42,187,241,110,218,215,242,118,186,92,133,26,175,167,158,16,113,123,105,114,161,23,79,197,76,102,103,93,230,174,120,128,194,34,104,42,253,131,122,49,30,212,205,237,119,71,108,95
E = 1,0,1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T10:40:03.643

一个样品

```
#include <stdio.h>

int main(){
    FILE *fin,*fout;
    char ch1,ch2;
    int data;

    fin=fopen("testdec.txt", "r");
    fout=fopen("testhex.txt", "w");
    while(1){
        if(EOF==fscanf(fin, "%c %c ", &ch1, &ch2))
            break;
        fprintf(fout, "%c %c ", ch1, ch2);
        while(EOF!=fscanf(fin, "%d%c%*[ \n]", &data, &ch1)){
            fprintf(fout, "%02X", data);
            if(ch1 == ',') continue;
            if(ch1 == '\n' || ch1 == ' '){
                fprintf(fout, "\n");
                break;
            }
        }
    }
    fclose(fout);fclose(fin);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T08:19:44.987

你有没有尝试过：

*   [man fgets](http://linux.die.net/man/3/fgets)，这从文件中读取行。
*   [man strtok](http://linux.die.net/man/3/strtok)，这会提取由分隔符分隔的数据。
*   [man atoi](http://linux.die.net/man/3/atoi)，这会将字符串转换为 int。
*   [man fprintf](http://linux.die.net/man/3/fprintf)，这会将 int 值作为十六进制字符串写入文件。

# javascript - F#/Clojure 到 Javascript：与环境和 javascript 库的交互

> ID：10829645
> 
> 赞同：2
> 
> 时间：2012-05-31T08:05:20.790
> 
> 标签：javascript, clojure, f#, clojurescript

我一直在研究（主要是）可以转换为 Javascript 的函数式语言，而这两种语言如今已经名列前茅。但是我对它们有两个疑问，（谈论 ClojureScript 和 Pit for F#）：

*   我想，由于两者都只是翻译原始语言，所以在调用任何 .Net 或 Java 时，程序无法直接编译为 Javascript。我说得对吗？如果是这样，在这种情况下，与 Java/.Net 环境交互的能力是“危险的”。
*   据我所知，ClojureScript 可以与任何 JS 库（node.js、jquery 等）进行交互，而在 Pit 中，他们正在开发“扩展”以允许这样做......所以我假设导入任何 js 库不支持。我在 SO 中读到 WebSharper 确实支持这一点，但没有太多证据并且是封闭源代码。那么，在实践中，两种语言的任何 JS 交互的实际状态如何？

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T09:59:05.817

我不熟悉 ClojureScript，但我可以回答您关于 Pit（和 WebSharper）的一些问题。

**调用 .NET 库**
Pit 只翻译显式标记的 F# 代码，因此当您调用标准 .NET 库或某些不支持 Pit 的 F# 库时，它不会工作（不像[Microsoft Live Labs Volta](http://en.wikipedia.org/wiki/Microsoft_Live_Labs_Volta)项目，它现在已经死了）。

但是，您可以在 F# 中重新实现任何此类库并告诉 Pit 改用该实现 - 如果该功能是标准 F# 库的一部分，您甚至可以从开源 F# 版本复制源代码。实际上，我认为这不是一个大问题，因为大多数 .NET 库都是特定于服务器或桌面的，因此您可能不需要那么多。

**调用 JS 库**
由于 F# 是一种静态类型语言，它需要知道您正在使用的事物的类型。在 Pit 和 WebSharper 中，这些是通过定义 F# 类型（没有实现）获得的，然后映射到 JavaScript。在 Pit 中，这些必须手动编写，尽管我猜测在 F# 3.0 中，这可以使用 F# 类型提供程序自动完成。我相信 WebSharper 有一个工具可以做到这一点，但它仅作为商业版本的一部分提供。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T15:31:51.620

在 WebSharper 中与 JavaScript 互操作不是问题。我们为现有的 JS 库提供了很多绑定，如果缺少任何功能，您可以使用如下代码在 F# 中相当快速地恢复它：

```
[<Direct "jQuery($x).hide()">]
let hide (x: obj) = () 
```

F# 中的挑战是类型安全——你愿意在无类型（通常是无类型！）JavaScript 库之上改进多少类型安全和精确的代码完成。我从未使用过 ClojureScript，但我想这甚至不是一个问题，因为 Clojure 也是无类型的。

与底层 .NET 平台的互操作确实是“危险的”。正如 Tomas 所指出的，WebSharper 要求对所有 JavaScript 可调用函数进行注释。我们已经解决了一些标准类（字符串、字典、地图和集合等集合）的限制，但支持还远未完成。

使用 WebSharper，您可以在服务器上运行 .NET 代码并通过 AJAX 相当透明地使用它：

```
[<Remote>]
let add (x: int) (y: int) = async.Return(x + y)

[<JavaScript>]
let remoteAdd () =
    async {
        let! sum = add 1 2
        return JavaScript.Log("RESULT", sum)
    }
    |> Async.Start 
```

不幸的是，如果您必须在客户端上运行大型 .NET 库，这不是一个解决方案，您可能不得不转向 Silverlight 的方向。

免责声明 - 我正在开发 WebSharper，所以我的输入显然是有偏见的。话虽如此，在 WebSharper 和 Pit 之间进行选择时，请记住 WebSharper 具有积极的开发、支持，并已在实际项目中使用。由于我们在较大的项目中使用它，因此我们必须注意优化输出代码并解决 F# 反射模型中的一些限制和错误，甚至为了我们的目的重写 F# 元数据读取器。这意味着我可以从 WebSharper 跟踪器中提取数十个已关闭的问题，并将它们重新发现为 Pit 问题。我不这样做，因为人类会因这种重复劳动而受到损害。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-05T06:48:48.660

我认为 ClojureScript 更适合。它具有与 JavaScript 相同的动态特性，并且可以使用 Google Closure Compiler 进行输出优化。它设计为在 JS VM 上运行。

与 Clojure几乎[没有区别](https://github.com/clojure/clojurescript/wiki/Differences-from-Clojure)。

# javascript - 用javascript模拟o nclick事件

> ID：10829648
> 
> 赞同：3
> 
> 时间：2012-05-31T08:05:26.963
> 
> 标签：javascript, click, simulate

我想要做的是在比按钮本身更宽的 div 中放置一个图像按钮，当单击外部 div 时，我希望调用图像按钮 onclick() 函数。我对下面的 html 代码的期望是，当我单击按钮本身时，它应该只提醒“单击按钮”。当我单击外部 div 时，它应该首先提示“div clicked”，然后是“button clicked”。问题是，当我单击 div 时，它会按顺序发出警报：“div clicked”然后“button clicked”，然后再次“div clicked”。当我单击按钮时，它会发出警报：“单击按钮”然后“单击 div”然后“单击按钮”然后“单击 div”。

我在这里找不到我缺少的东西，有什么帮助吗？

```
<html>
<body>
    <div style="width: 200px; border: 1px solid red;" onclick="alert('div clicked');(document.getElementById('addButton')).click();">
        <input type="button" onclick="alert('button clicked');"
            id="addButton"/>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T08:16:41.653

您错过的是一些事件在文档树中冒泡触发父元素的所有单击处理程序的事实。要停止它，请在事件对象上调用 stopPropagation。

```
<input type="button" onclick="event.stopPropagation ? event.stopPropagation() : (event.cancelBubble=true);alert('button clicked');"
        id="addButton"/> 
```

（旧的IE没有stopPropagation，需要设置event.cancelBubble=true）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T08:24:39.020

在 Internet Explorer 中，您可以简单地执行

```
myElement.click(); 
```

但是，W3 标准要复杂一些。以下代码应该适用于其他浏览器：

```
var evt = document.createEvent("HTMLEvents");
evt.initEvent("click", true, true);
myElement.dispatchEvent(evt); 
```

*   [文档.createEvent](https://developer.mozilla.org/en/DOM/document.createEvent)
*   [鼠标事件](https://developer.mozilla.org/en/DOM/MouseEvent)

另请参阅此问题：[如何模拟对锚标记的点击？](https://stackoverflow.com/questions/1421584/how-can-i-simulate-a-click-to-an-anchor-tag)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T08:17:55.850

使用 window.event.stopPropagation(); 像

```
<div style="width: 200px; border: 1px solid red;" onclick="alert('div clicked');(document.getElementById('addButton')).click();">
    <input type="button" value="X" onclick="alert('button clicked');window.event.stopPropagation();"
        id="addButton"/>
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T08:37:47.083

您需要避免像这样从 Javascript 冒泡事件：

```
<html>
<body>
    <script type="text/javascript">
        function clickOnDiv(e){
            alert('Div clicked.');
            document.getElementById('addButton').click();
            e.preventDefault();
            return false;
        }

    function clickOnButton(e){
        e.preventDefault();

        // This line to prevent event bubbling
        e.stopPropagation() ? e.stopPropagation() : (e.cancelBubble=true);

        alert('Button clicked.');
        return false;
    }

    </script>
    <div id='maDiv' style="width: 200px; border: 1px solid red;">
        <input type="button" value="Click Me !" id="addButton"/>
    </div>
    <script>
        (function(){
            document.getElementById('addButton').onclick = clickOnButton;
            document.getElementById('maDiv').onclick = clickOnDiv;
        })();
    </script>
</body>
</html> 
```

测试.. :)

# python - 删除 Python 中的最后一个输入行

> ID：10829650
> 
> 赞同：6
> 
> 时间：2012-05-31T08:05:54.927
> 
> 标签：python, input, console

我有以下代码：

```
num = int(raw_input("input number: "))
print "\b" * 20 
```

控制台输出看起来像

```
input number: 10 
```

我想`input number: 10`在用户按下后删除文本`ENTER`。退格键`\b`不能这样做。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T08:19:48.993

这将适用于大多数 unix 和 windows 终端......它使用非常简单的 ANSI 转义。

```
num = int(raw_input("input number: "))
print "\033[A                             \033[A"    # ansi escape arrow up then overwrite the line 
```

请注意，在 Windows 上，您可能需要使用以下 [http://www.windowsnetworking.com/kbase/windowstips/windows2000/usertips/miscellaneous/commandinterpreteransisupport.html启用 ANSI 支持](http://www.windowsnetworking.com/kbase/windowstips/windows2000/usertips/miscellaneous/commandinterpreteransisupport.html)

"\033[A" 字符串被终端解释为将光标向上移动一行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T08:16:24.113

There are control sequences for 'word back' and 'line back' and the like that move the cursor. So, you could try moving the curser back to the start of the text you want to delete, and overriding it with spaces. But this gets complicated very quickly. Thankfully, Python has the standard [curses module](http://docs.python.org/library/curses.html) for "advanced terminal handling".

The only issue with this is that it isn't cross-platform at the moment - that module has never been ported to Windows. So, if you need to support Windows, take a look at the [Console module](http://effbot.org/zone/console-index.htm).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-07-02T04:12:09.130

```
import sys

print "Welcome to a humble little screen control demo program"
print ""

# Clear the screen
#screen_code = "\033[2J";
#sys.stdout.write( screen_code )

# Go up to the previous line and then
# clear to the end of line
screen_code = "\033[1A[\033[2K"
sys.stdout.write( screen_code )
a = raw_input( "What a: " )
a = a.strip()
sys.stdout.write( screen_code )
b = raw_input( "What b: " )
b = b.strip()
print "a=[" , a , "]"
print "b=[" , b , "]" 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-05-31T08:15:17.763

You can use os module

```
import os
os.system('clear') 
```

The "cls" and "clear" are commands which will clear a terminal (ie a DOS prompt, or terminal window).

For IDLE:The best you could do is to scroll the screen down lots of lines, eg:

```
print "\n" * 100 
```

# ruby-on-rails - rake 命令获取“无法加载此类文件 -- yaml/编码”

> ID：10829654
> 
> 赞同：1
> 
> 时间：2012-05-31T08:06:01.457
> 
> 标签：ruby-on-rails, ruby, rake

我想在 CentOS 5.8 上使用 ruby​​-1.9.3-p194。我可以用 rvm 和系统安装它（安装了 libyaml 和 libyaml-devel）。但我不能运行所有的“rake”任务（不仅仅是“rake spec”）。

我得到“无法加载这样的文件——yaml/encoding”。这是一个带有跟踪的示例结果。“rake”版本是“0.9.2.2”。我该如何解决？

```
$ rake spec --trace
rake aborted!
cannot load such file -- yaml/encoding
/home/inohiro/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:182:in `require'
/home/inohiro/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:182:in `block in require'
/home/inohiro/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:547:in `new_constants_in'
/home/inohiro/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:182:in `require'
/home/inohiro/Projects/rails_2_3_14_r5066/src/admin/lib/tasks/fixture_dump.rake:2:in `<top (required)>'
/home/inohiro/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:171:in `load'
/home/inohiro/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:171:in `block in load_with_new_constant_marking'
/home/inohiro/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:547:in `new_constants_in'
/home/inohiro/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-2.3.14/lib/active_support/dependencies.rb:171:in `load_with_new_constant_marking'
/home/inohiro/.rvm/gems/ruby-1.9.3-p194/gems/rails-2.3.14/lib/tasks/rails.rb:14:in `block in <top (required)>'
/home/inohiro/.rvm/gems/ruby-1.9.3-p194/gems/rails-2.3.14/lib/tasks/rails.rb:14:in `each'
/home/inohiro/.rvm/gems/ruby-1.9.3-p194/gems/rails-2.3.14/lib/tasks/rails.rb:14:in `<top (required)>'
/home/inohiro/Projects/rails_2_3_14_r5066/src/admin/Rakefile:10:in `require'
/home/inohiro/Projects/rails_2_3_14_r5066/src/admin/Rakefile:10:in `<top (required)>'
/home/inohiro/.rvm/gems/ruby-1.9.3-p194/gems/rake-0.9.2.2/lib/rake/rake_module.rb:25:in `load'
/home/inohiro/.rvm/gems/ruby-1.9.3-p194/gems/rake-0.9.2.2/lib/rake/rake_module.rb:25:in `load_rakefile'
/home/inohiro/.rvm/gems/ruby-1.9.3-p194/gems/rake-0.9.2.2/lib/rake/application.rb:501:in `raw_load_rakefile'
/home/inohiro/.rvm/gems/ruby-1.9.3-p194/gems/rake-0.9.2.2/lib/rake/application.rb:82:in `block in load_rakefile'
/home/inohiro/.rvm/gems/ruby-1.9.3-p194/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/home/inohiro/.rvm/gems/ruby-1.9.3-p194/gems/rake-0.9.2.2/lib/rake/application.rb:81:in `load_rakefile'
/home/inohiro/.rvm/gems/ruby-1.9.3-p194/gems/rake-0.9.2.2/lib/rake/application.rb:65:in `block in run'
/home/inohiro/.rvm/gems/ruby-1.9.3-p194/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_handling'
/home/inohiro/.rvm/gems/ruby-1.9.3-p194/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
/home/inohiro/.rvm/gems/ruby-1.9.3-p194/gems/rake-0.9.2.2/bin/rake:33:in `<top (required)>'
/home/inohiro/.rvm/gems/ruby-1.9.3-p194/bin/rake:19:in `load'
/home/inohiro/.rvm/gems/ruby-1.9.3-p194/bin/rake:19:in `<main>' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T10:12:53.750

这不是 rake 问题，而是 ruby​​ <=> rails 版本不兼容。您正在使用最新的稳定版 ruby​​ 和恐龙时代的 rails 版本。

你需要做一些黑客攻击才能让他们相互理解！

这是一本不错的读物，应该可以帮助您入门：

[http://scottiestech.info/2012/02/07/make-rails-2-3-x-happy-with-ruby-1-9-3/](http://scottiestech.info/2012/02/07/make-rails-2-3-x-happy-with-ruby-1-9-3/)

这个要点也很震撼：

[https://gist.github.com/1976864](https://gist.github.com/1976864)（感谢乔纳森！）

# barcode - Redlaser 等应用程序在哪里获取商品的条形码数据库？

> ID：10829655
> 
> 赞同：1
> 
> 时间：2012-05-31T08:06:02.227
> 
> 标签：barcode

我知道[http://www.upcdatabase.com/](http://www.upcdatabase.com/)，但它很不完整。流行的移动应用程序在哪里获得条形码数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T16:03:28.270

我为 RedLaser 工作——我们已经从数千个不同的来源建立了自己的产品数据库。其中很多直接来自零售商和制造商。

# styles - 将草图样式应用于 SketchFlow 应用程序中的所有控件

> ID：10829660
> 
> 赞同：0
> 
> 时间：2012-05-31T08:06:11.103
> 
> 标签：styles, sketchflow, expression-blend-4

有没有办法在 Expression Blend 4 中将 SketchFlow 应用程序中的所有控件全局应用草图样式，而不必`Style="{DynamicResource Foo-Sketch}"`手动将属性应用到每个控件？

一般来说，我想让那些样式`SketchStyles.xaml`隐式定义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T19:51:39.747

您可能可以像这样隐式应用样式：

```
<UserControl.Resources>
    <Style BasedOn="{StaticResource Button-Sketch}" TargetType="Button"/>
</UserControl.Resources> 
```

您必须为要使用隐式样式的每种控件类型执行此操作。

# css - 如何使用 CSS 将图像放入 div 中？

> ID：10829675
> 
> 赞同：111
> 
> 时间：2012-05-31T08:07:39.590
> 
> 标签：css, image

我想在 CSS 中使用我的所有图像（我知道的唯一方法是将它们作为背景图像放入）。

但是这个解决方案的问题是你永远不能让 div 占据图像的大小。

`<div><img src="..." /></div>`所以我的问题是：在 CSS中拥有等价物的最佳方式是什么 ？

* * *

## 回答 #1

> 赞同：162
> 
> 时间：2012-05-31T12:32:42.427

[Jaap](https://stackoverflow.com/users/1227949/jaap)的回答：

```
<div class="image"></div>​ 
```

在 CSS 中：

```
div.image::before {
   content:url(http://placehold.it/350x150);
}​ 
```

你可以在这个链接上试试：http: [//jsfiddle.net/XAh2d/](http://jsfiddle.net/XAh2d/)

这是一个关于 css 内容的链接 [http://css-tricks.com/css-content/](http://css-tricks.com/css-content/)

这已经在 Chrome、firefox 和 Safari 上进行了测试。（我在mac上，所以如果有人在IE上有结果，告诉我添加它）

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-05-31T08:14:21.407

你可以这样做：

```
<div class="picture1">&nbsp;</div> 
```

并将其放入您的 css 文件中：

```
div.picture1 {
   width:100px; /*width of your image*/
   height:100px; /*height of your image*/
   background-image:url('yourimage.file');
   margin:0; /* If you want no margin */
   padding:0; /*if your want to padding */
} 
```

否则，只需将它们用作普通的

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-31T08:16:17.093

Take this as a sample code. Replace imageheight and image width with your image dimensions.

```
<div style="background:yourimage.jpg no-repeat;height:imageheight px;width:imagewidth px">
</div> 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-05-31T08:24:20.890

使用 Javascript/Jquery：

*   加载隐藏的图像`img`
*   加载图像后，获取宽度和高度
*   动态创建`div`并设置宽度、高度和背景
*   删除原件`img`

    ```
     $(document).ready(function() {
        var image = $("<img>");
        var div = $("<div>")
        image.load(function() {
          div.css({
            "width": this.width,
            "height": this.height,
            "background-image": "url(" + this.src + ")"
          });
          $("#container").append(div);
        });
        image.attr("src", "test0.png");
      }); 
    ```

# php - 在一行中摆脱“未定义的索引”而不重复

> ID：10829676
> 
> 赞同：1
> 
> 时间：2012-05-31T08:07:43.203
> 
> 标签：php

我正在处理*GROUP BY*查询的结果，该查询不会为所有常量排列生成结果。它显然给出了我想要的“未定义索引”通知。

我当然可以使用`isset`，但这意味着（索引的）代码重复。另一种方法是使用变量来存储索引，但这意味着每一行这样的代码现在都是两行。我喜欢这行代码的可读性。

```
$stat->setMapped($companyStats["Account"][mypackage_MyClass::$STATUS_ACCEPTED]); 
```

有什么办法（除了错误操作符`@`来避免这个通知）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T08:13:31.890

您应该从一个定义了所有键的数组开始，然后将您的数组合并到其中。结果将具有您定义的值和未定义的 null （或您设置的任何默认值）。

```
$allTheKeysYouWant = array('key1' => null, 'key2' => null, ...);
$keysFilled = array_merge($allTheKeysYouWant, $yourArray); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T10:54:08.200

在setMapped函数声明中，通过引用接受参数，即

```
function setMapped(&$companyStats) {
    if (isset($companyStats)) {
         .... 
```

# c# - Asp.net cache or manual caching

> ID：10829681
> 
> 赞同：4
> 
> 时间：2012-05-31T08:08:13.650
> 
> 标签：c#, asp.net, caching

I'm going to cache some RSS data from other websites to my server and update caches every 10 minutes. Should I use Asp.net system.web.caching or cache in database or file?

P.S: when a user requests a feed on my client application, my server downloads it from server. And in the next 10 minutes, if another user requests that feed, my server loads it from cache. There may be for than 100 feeds...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T08:24:04.927

使用自定义数据库缓存的原因是：

1.  更好地控制缓存过期的方式和时间
2.  数据太多（超过10Mg）*
3.  需要将它们保存太多时间（几天或几个月）*
4.  访问代码背后的缓存数据（出于任何原因）

在您的情况下，您只需要尽快将其过期，我认为数据很小（小于 10Mg）并且您将其保留 10 分钟，因此使用更快的 asp.net 缓存，因为它位于 iis 的核心, 并在完全没有转到您的代码的情况下重播。

[*] 我这么说是因为 asp.net 缓存保存在内存中，但您的自定义缓存保存在数据库中，因此可以在那里保存更长时间，并且可能很大。

# iphone - How to achieve logical deletion in UITableView with CoreData and NSFetchedResultsController

> ID：10829682
> 
> 赞同：2
> 
> 时间：2012-05-31T08:08:13.940
> 
> 标签：iphone, ipad, core-data, nsfetchedresultscontroller

I'm working with a master/detail mechanism. The tableview controller make use of [controller:(NSFetchedResultsController *)controller didChangeObject:...] to refresh the related row. It works great with insertions, and deletion.

Now I would like not to really delete rows, juste "hide" them.

So I add a boolean 'deleted' in my core data model, and my master use a predicate to fetch only "deleted = FALSE".

In the [controller:(NSFetchedResultsController *)controller didChangeObject:...] I need to :

*   check for NSFetchedResultsChangeUpdate.
*   If so, I need probably to 'refresh' le fetchedResultController (not sure if it can detect that a managedObject which match the predicate does not match anymore),
*   I need delete the row from the tableview.

Here is the code :

```
case NSFetchedResultsChangeUpdate:
    // This is fired by saving managedObject.deleted from FALSE to TRUE
    // ... so I would like to delete the corresponding row from the tableview
    // without reloading the full table.
    self.fetchedResultsController = nil;
    [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationFade];
break; 
```

But it doesn't work as expected, and juste crash with error message :

```
2012-05-31 09:48:23.293 TableViewTest[32701:fb03] CoreData: error: 
``Serious application error.  
An exception was caught from the delegate of NSFetchedResultsController during a call to -controllerDidChangeContent:.
Invalid    update: invalid number of rows in section 0\.  
The number of rows contained in an existing section after the update (7) 
must be equal to the number of rows contained in that section before the update (7),
plus or minus the number of rows inserted or deleted from that section (0 inserted, 1 deleted) 
and plus or minus the number of rows moved into or out of that section (0 moved in, 0 moved out). 
with userInfo (null) 
```

The message is clear, the NSFetchedResultsController don't return the correct count. By enabling CoreData request log, it seems that in this method, change are not yet commited.

I tried different method :

*   make sure that NSFetchedResults really make the request (explicitly call the fetch, deleting cache).
*   I tried to specify [fetchRequest includesPendingChanges] to include not yet commited change

But I always have the same problem. Why does it works for insertion and true deletion (insertion and deletion are not commited but are seen by the NSFetchedResultsController).

PS : To illustrate this particular problem I create a new project from Xcode template (using CoreData + MasterController options). You can find it on github [https://github.com/arnauddelattre/TableViewTest](https://github.com/arnauddelattre/TableViewTest) . You can try to add some row, then selecting a row and clicking on the "Logical deletion".

_

**EDIT : Following to Mundi response** Mundi suggests me to call save method on the managed context. As you can see, i'm already in the save method, which call [controller didChangeObject]. So, it leads to calling a save in a save. ![Stack in XCode screenshot](../Images/498c3496b60e843b86faecb34f0aff5b.png)

The strange thing to me, is that **it seems working**. But I'm afraid of possible side-effects (because of calling save in a save). Is it a "standard" way to achieve what I want ?

And I'm still not understanding why is this behavior different from inserting/true deletion.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T09:49:29.190

您可以在将您设置为之前保存（提交）`NSFetchedResultsChangeUpdate`回调中的更改。`fetchedResultsController``nil`

# windows - Metro 风格应用程序使用鼠标滚轮水平滚动

> ID：10829683
> 
> 赞同：4
> 
> 时间：2012-05-31T08:08:15.163
> 
> 标签：windows, microsoft-metro

嗨，我正在尝试为我的 Metro 风格应用程序进行概念验证。这是我的代码：

```
<html>
<head>
<script src="jquery.min.js"></script>
</head>

<body style="height: 600px">
    <div id="wrapper" style="width:10000px">
     <div class="child" style="float: left; width: 200px; border-style: solid;">Left Stuff</div>
     <div class="child" style="float: left; width: 200px; border-style: solid;">Middle Stuff</div>
     <div class="child" style="float: left; width: 200px; border-style: solid;">Right Stuff</div>
     <div class="child" style="float: left; width: 200px; border-style: solid;">Right Stuff</div>
     <div class="child" style="float: left; width: 200px; border-style: solid;">Right Stuff</div>
     <div class="child" style="float: left; width: 200px; border-style: solid;">Right Stuff</div>
     <div class="child" style="float: left; width: 200px; border-style: solid;">Right Stuff</div>
     <div class="child" style="float: left; width: 200px; border-style: solid;">Right Stuff</div>
    </div>
</body>
</html>

<script type="text/javascript">

    $(document).ready(function() {
        $("#wrapper").wrapInner("<table cellspacing='30'><tr>");
        $(".child").wrap("<td></td>");

        document.documentElement.onmousewheel = function (event) {
            $('body').scrollLeft($('body').scrollLeft() - event.wheelDelta);
        };
    });
</script> 
```

mousewheel 事件在 IE10 (windows 8) 中运行良好，因此我创建了一个 html5 javascript Metro 风格应用程序，其中仅包含 2 个文件：带有上述代码的 default.html 文件和 jquery.min.js 文件。

运行应用程序时，我有相同的显示，但水平滚动在使用鼠标滚轮时不起作用，就像它在 ie 10 中一样。注意：鼠标滚轮事件在 Metro 中被捕获（在这一行放置一个断点“$（'body'）.scrollLeft（ $('body').scrollLeft() - event.wheelDelta);" 但这不是滚动。

地铁有什么问题，还有其他方法可以进行水平滚动。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T22:35:12.137

您快到了。使用 .win-horizo​​ntal 而不是你的#wrapper。这对我有用。

在以下位置找到答案：[http ://social.msdn.microsoft.com/Forums/en-US/winappswithhtml5/thread/3b4e4ffa-3d27-4d34-810b-03311fac03e8](http://social.msdn.microsoft.com/Forums/en-US/winappswithhtml5/thread/3b4e4ffa-3d27-4d34-810b-03311fac03e8)

谢谢你朱莉安娜佩尼亚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-25T14:37:48.070

实际上，您所显示的所有代码都是添加 event.preventDefault(); 停止默认的垂直滚动。

```
<script type="text/javascript">

$(document).ready(function() {
    $("#wrapper").wrapInner("<table cellspacing='30'><tr>");
    $(".child").wrap("<td></td>");

    document.documentElement.onmousewheel = function (event) {
        $('body').scrollLeft($('body').scrollLeft() - event.wheelDelta);
        event.preventDefault();
    };
}); 
```

# ajax - 连续按两次按钮

> ID：10829690
> 
> 赞同：2
> 
> 时间：2012-05-31T08:09:05.520
> 
> 标签：ajax, jsf, primefaces

昨天我发布了一个关于必须按两次按钮才能使其工作的问题。我得到了很好的帮助，这是stackoverflow的标志，但问题仍然存在。我将代码减少到最低限度，但问题仍然存在。我仔细阅读了[BalusC](https://stackoverflow.com/questions/2118656/hcommandlink-hcommandbutton-is-not-being-invoked/2120183#2120183)的建议，希望能在表单中找到表单。我肯定什么都看不到，所以我将发布我的代码，希望更多的眼睛能看到一些东西。

我有一个模板，我从欢迎中调用（登录部分）。这将转到具有命令按钮的 userInfo。这是我神秘地必须按两次的命令按钮。在第二次按下命令按钮时，我将转到 userPhoto。一切都被削减到最低限度，以便我可以发布它。

master.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:f="http://java.sun.com/jsf/core"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:p="http://primefaces.org/ui">
<h:head>
<title>Master template</title>
</h:head>
<h:body>
<p:layout fullPage="true" >
    <p:layoutUnit position="north" size="254">
        Top
    </p:layoutUnit>

    <p:layoutUnit position="east" size="50" resizable="true">
        Hello
    </p:layoutUnit>

    <p:layoutUnit position="south" size="30">
        south
    </p:layoutUnit>

    <p:layoutUnit position="center">
        <ui:insert name="AreaOne">Default text</ui:insert>
    </p:layoutUnit>
</p:layout>

</h:body>
</html> 
```

欢迎1.xhtml：

```
<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:p="http://primefaces.org/ui">
<ui:composition template="master.xhtml">

    <ui:define name="AreaOne">
        <h:form id="form1">
            <p:commandButton type="submit" value="Login" action="userInfo" />
        </h:form>
        <p:messages />
    </ui:define>
</ui:composition>
</html> 
```

最后但并非最不重要的 userInfo.xhtml 带有需要按下两次的按钮：

```
<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this template, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:ui="http://java.sun.com/jsf/facelets"
xmlns:h="http://java.sun.com/jsf/html"
xmlns:p="http://primefaces.org/ui">
<ui:composition template="master.xhtml">

    <ui:define name="AreaOne">
        <h:form id="formP">
            <p:commandButton type="submit" value="photos"  action="userPhoto" />
        </h:form>
        <p:messages />
    </ui:define>
</ui:composition>
</html> 
```

我没有看到嵌套在任何其他表单中的任何表单，但有些事情是错误的，我不知道是什么。也许 BalusC 是正确的，它与 ajax 有关，但我也没有看到。

感谢所有的帮助。宜兰

我在 userPhoto 页面上添加了一个按钮，该按钮返回到 userInfo 页面。登录按钮是唯一一个第一次按下时起作用的按钮。当我使用命令按钮在 userInfo 和 userPhoto 之间来回切换时，总是需要按 2 次。我将显示 userPhoto 的中心

```
<ui:composition template="master.xhtml">
    <ui:define name="AreaOne">
        <h:form id="form3">
            <p:commandButton type="submit" value="home page" action="userInfo" />
        </h:form>
        <p:messages />
    </ui:define>
</ui:composition> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-31T13:16:21.427

你有一个非常具体的问题。您完全通过 ajax 而不是正常的同步请求进行导航，并且整个视图被新视图替换。新视图中的表单不再具有视图状态，这确实与[JSF 问题 790](http://java.net/jira/browse/JAVASERVERFACES_SPEC_PUBLIC-790)相关。也不可能在 的 中引用表单，`update`因为`<p:commandButton>`表单不存在于同一视图中。

毕竟完全不推荐用ajax导航。它使您的页面不可添加书签和不可搜索机器人索引。我建议更换所有形式的

```
<p:commandButton ... action="otherViewId" /> 
```

经过

```
<p:button ... outcome="otherViewId" /> 
```

这将通过正常的同步请求进行导航，并将创建新的视图，其中所有表单都将具有它们的视图状态。请注意，`<p:button>`不需要 a `<h:form>`，如果需要，您可以省略它。

* * *

**与具体问题无关**，我还建议放入`master.xhtml`该`/WEB-INF`文件夹，以便最终用户永远无法通过在浏览器地址栏中输入/猜测其 URL 来请求它。另请参阅[我需要将哪些 XHTML 文件放入 /WEB-INF 而哪些不需要？](https://stackoverflow.com/questions/9031811/which-xhtml-files-do-i-need-to-put-in-web-inf-and-which-not)

# php - Tinymce 动态生成的图标列表

> ID：10829691
> 
> 赞同：1
> 
> 时间：2012-05-31T08:09:06.783
> 
> 标签：php, jquery, tinymce, document

我正在尝试为小 mce 创建动态生成的图标列表。我已经编写了所有相关的 php 函数，我通过以下代码调用该函数。

```
$.post(url_file, { 
       content_name: $class_name, 
       page_url: filePath,
       app_code: app_code
   },
   function(data){
       var buttonlist = data;
   }); 
```

我需要传递以上 3 个参数才能获得这些图标。现在我有`buttonlist`。我试过`document.write(buttonlist)`了，但它给了我`missing : after property id`错误。我正在尝试在其中打印此内容；

```
tinyMCE.init({
        mode : "exact",
        elements : "elm1", 
        theme : "advanced",
        plugins : "Archiv,pagebreak,safari,spellchecker,pagebreak,
                   style,layer,table,save,advhr,advimage,advlink,
                   emotions,iespell,inlinepopups,insertdatetime,preview,
                   media,searchreplace,print,contextmenu,paste,
                   directionality,fullscreen,noneditable,visualchars,nonbreaking,
                   xhtmlxtras,template",
    --> document.write(buttonlist);
        theme_advanced_toolbar_location : "top", 
```

你知道我如何在tinymce代码中打印这个值吗？非常感谢帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T11:44:58.503

您需要动态添加按钮吗？

尝试这个：

要获取它，请为每个按钮行使用 json：

```
$.post(url_file, { 
   content_name: $class_name, 
   page_url: filePath,
   app_code: app_code
},
function(data){
   var buttons = $.parseJSON(data)
   var buttonlist1 = buttons.line1;
   var buttonlist2 = buttons.line2;
   var buttonlist3 = buttons.line3;
}); 
```

然后进行 MCE 初始化：

```
tinyMCE.init({
    mode : "exact",
    elements : "elm1", 
    theme : "advanced",
    plugins : "Archiv,pagebreak,safari,spellchecker,pagebreak,
               style,layer,table,save,advhr,advimage,advlink,
               emotions,iespell,inlinepopups,insertdatetime,preview,
               media,searchreplace,print,contextmenu,paste,
               directionality,fullscreen,noneditable,visualchars,nonbreaking,
               xhtmlxtras,template",
--> theme_advanced_buttons1 : buttonlist1,
--> theme_advanced_buttons2 : buttonlist2,
--> theme_advanced_buttons3 : buttonlist3,
    theme_advanced_toolbar_location : "top", 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T09:09:25.447

当使用 php 创建页面时，php 代码会在页面交付给客户端之前首先执行。因此，您可以执行以下操作：

```
<?php
    $my_generated_buttonlist = '"bold, italic, underline"';
?>

tinyMCE.init({

    mode : "exact",

    elements : "elm1", 

    theme : "advanced",

    plugins : "Archiv,pagebreak,safari,spellchecker,pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,inlinepopups,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template",

    theme_advanced_buttons1: '<?php echo $my_generated_buttonlist; ?>',

    theme_advanced_toolbar_location : "top",
    ... 
```

# android - 如何在 Android 的 onSaveInstanceState 方法中有两个 outState 语句？

> ID：10829693
> 
> 赞同：0
> 
> 时间：2012-05-31T08:09:21.597
> 
> 标签：android, sql, error-handling

我的 android 应用程序中的 onSaveInstanceState 方法有问题。我已经连接了两个 SQL 数据库，RemindersDbAdapter 和 ImageAdapter。

因此，我在我的主要活动中结束了这个：

```
private Long mRowId;
private Long mImageRowId;

@Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    outState.putLong(RemindersDbAdapter.KEY_ROWID, mRowId);
    outState.putLong(ImageAdapter.KEY_ROWID, mImageRowId);
} 
```

问题是这段代码崩溃了。有人可以给我一个提示来解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T09:33:25.890

如果您确定问题出在`onSaveInstanceState()`，那么很可能是`mRowId`或：`mImageRowId``null`

```
private static final Long DEF_ROW_ID = 0L;

@Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    outState.putLong(RemindersDbAdapter.KEY_ROWID, mRowId != null ? mRowId : DEF_ROW_ID);
    outState.putLong(ImageAdapter.KEY_ROWID, mImageRowId != null ? mImageRowId : DEF_ROW_ID);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T09:07:00.783

提供堆栈跟踪会更容易帮助:)

不知道这是否重要，但在你做多`super.onSaveInstanceState(outState);` **之后尝试打电话。**

# android - 网格视图错了

> ID：10829695
> 
> 赞同：0
> 
> 时间：2012-05-31T08:09:37.750
> 
> 标签：android

我已经制作了一个应用程序，其中我在自定义gridview中显示数据并且它运​​行良好但问题是当我滚动它并回到底部并返回顶部然后所有项目位置可以自动更改。有时它不会出现在滚动之后。这是我的代码，我认为有些问题`getView`

```
@Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub
        ViewHolder viewholder;
        // LayoutInflater inflator = activit.getLayoutInflater();

        if(convertView == null) { // recycled view is null so create it.
            viewholder = new ViewHolder();
        convertView = inflator.inflate(R.layout.gridviewrow, null);

        viewholder.imgvGridItem = (RelativeLayout) convertView
                .findViewById(R.id.rlGreidItemicon);
        viewholder.txtGridItemlabel = (TextView) convertView
                .findViewById(R.id.txtGridItemlabel);

            if ((lstpinfo.get(position).appname.toString()) != null) {

                viewholder.imgvGridItem.addView(getimageviewimage(lstpinfo
                        .get(position).icon));
                viewholder.txtGridItemlabel
                        .setText(lstpinfo.get(position).appname.toString());

            }
        }

        return convertView;

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T08:35:08.723

看起来转换视图逻辑没有完全实现。

当你滚动时，你会得到非空的convertView，你需要在其中设置新数据，在这种情况下你什么都不做...... +你没有在标签中设置 ViewHolder 来取回它convertView 并使用它。

```
@Override
        public View getView(int position, View convertView, ViewGroup parent) {
            System.out.println("getView " + position + " " + convertView);
            ViewHolder holder = null;

              if (convertView == null) {
                convertView = mInflater.inflate(R.layout.item1, null);
                holder = new ViewHolder();
                holder.textView = (TextView)convertView.findViewById(R.id.text);
                convertView.setTag(holder);
            } else {
                holder = (ViewHolder)convertView.getTag();
            }

         holder.textView.setText(mData.get(position));//<========== see it .....
            return convertView;
        }

    } 
```

# java - 如何设置不允许选择的 JFace TreeViewer？

> ID：10829696
> 
> 赞同：0
> 
> 时间：2012-05-31T08:09:38.183
> 
> 标签：java, jface, rcp, treeviewer

创建 JFace`TreeViewer`时，可以使用 SWT 常量设置允许用户对树项（`SWT.SINGLE`或`SWT.MULTI`）进行单项或多项选择。

谁能帮助我，因为我想要一棵根本无法选择其项目的树？我想要它作为预览目的，用户不应该在那里选择一个项目。

提前谢谢了，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T12:41:58.187

我真的不明白你为什么要抑制选择，但这就是它的工作方式：

```
viewer.addSelectionChangedListener(new ISelectionChangedListener() {
    @Override
    public void selectionChanged(final SelectionChangedEvent event) {
        if (!event.getSelection().isEmpty()) {
             v.setSelection(StructuredSelection.EMPTY);
        }
    }
}); 
```

除此之外，我会确保观众：

1.  未在部件站点中注册为选择提供者
2.  不接受其他 ISelectionChangedListeners

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-21T15:37:30.880

另一个简单的解决方案是将查看器放入单独的组合中并将其启用状态设置为 false：

```
Composite c = new Composite(parent, SWT.NONE);
TreeViewer viewer = new TreeViewer(c, SWT.Border);
c.setEnabled(false); 
```

您的查看器现在不会显示为灰色（设置`viewer.setEnabled`将使其显示为灰色），但用户无法在查看器中选择任何内容。更新和刷新查看器工作得很好。但请记住，`SelectionEvents`现在单击查看器时不会抛出 no 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T16:38:38.850

你能试试这个吗？基本上在选择事件上添加过滤器。在 Viewer 实现的情况下，org.eclipse.jface.util.OpenStrategy 类负责触发 Viewer 理解的选择事件。如果在 SWT 选择事件上添加过滤器，查看器将永远不会知道底层选择。

```
public class SWTSimpleTree {
  Display display = new Display();
  Shell shell = new Shell(display);

  Tree tree;
  private Listener filter = new Listener() {

    @Override
    public void handleEvent(Event event) {

      event.type=SWT.None;
      event.doit=false;
      event.item = null;
      tree.deselectAll();
    }
  };

  public SWTSimpleTree() {
    shell.setLayout(new GridLayout());

    tree = new Tree(shell, SWT.BORDER);

    tree.setLayoutData(new GridData(GridData.FILL_BOTH));

    TreeItem item = new TreeItem(tree, SWT.NULL);
    item.setText("ITEM");

    TreeItem item2 = new TreeItem(item, SWT.NULL);
    item2.setText("ITEM2");

    TreeItem item3 = new TreeItem(item2, SWT.NULL);

    item3.setText("ITEM3");

    System.out.println("item: " + item.getParent() + ", " + item.getParentItem());
    System.out.println("item2: " + item2.getParent() + ", " + item2.getParentItem());

    System.out.println(tree.getItemCount());
    System.out.println(tree.getItems().length);

    tree.getDisplay().addFilter(SWT.Selection, filter);
    tree.getDisplay().addFilter(SWT.DefaultSelection, filter);

    shell.setSize(300, 200);
    shell.open();
    //textUser.forceFocus();

    // Set up the event loop.
    while (!shell.isDisposed()) {
      if (!display.readAndDispatch()) {
        // If no more entries in event queue
        display.sleep();
      }
    }

    display.dispose();
  }

  private void init() {

  }

  public static void main(String[] args) {
    new SWTSimpleTree();
  }
} 
```

# android - Android：在 ListView 中单击时设置 TextView 颜色

> ID：10829700
> 
> 赞同：0
> 
> 时间：2012-05-31T08:10:03.427
> 
> 标签：android, android-listview, textview

我的 LinearLayout 中有一些 textView。它们是可点击的，我想让它们像 ListView 一样 onClick。对于listView，当用户单击一个项目时，我认为背景变为绿色。

我知道我可以手动执行此操作

```
tv.SetBackgroundColor(Color.GREEN); 
```

但是是否有自动执行此操作的方法，例如自动管理选择的列表视图。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T08:21:50.053

您需要将背景定义为包含状态列表的新 XML 文件。

[http://developer.android.com/guide/topics/resources/color-list-resource.html](http://developer.android.com/guide/topics/resources/color-list-resource.html)

例如，在您的可绘制文件夹中创建一个名为 background_states.xml 的文件并编写如下内容：

```
<?xml version="1.0" encoding="utf-8"?> 
<selector xmlns:android="http://schemas.android.com/apk/res/android">
<item
    android:state_selected="true"
   android:drawable="@color/white" ></item>
<item
    android:state_pressed="true"
   android:drawable="@color/white" ></item>
<item 
    android:drawable="@color/black" /> 
</selector> 
```

然后将这个新文件定义为 TextView 中的背景：

```
<TextView
   android:layout_width="wrap_content"
   android:layout_height="wrap_content"
   android:background="@drawable/background_states" 
```

有关不同状态的更多信息，请参阅上面的链接。

# java - 什么时候应该使用 String s = new String("Hello World")？

> ID：10829707
> 
> 赞同：4
> 
> 时间：2012-05-31T08:10:48.340
> 
> 标签：java, string

> **可能重复：**
> [Java 中表达式“new String(...)”的目的是什么？](https://stackoverflow.com/questions/390703/what-is-the-purpose-of-the-expression-new-string-in-java)

我知道`String s = new String("Hello World")`应该避免这种情况，因为它会为“Hello World”创造额外的空间，这在大多数情况下是不必要的。

解释为什么`String s = new String("Hello World")`应该避免的相关问题在这里：

[“文本”和新字符串（“文本”）有什么区别？](https://stackoverflow.com/questions/3052442/what-is-the-difference-between-text-and-new-stringtext-in-java)

但是我们什么时候需要使用`String s = new String("Hello World")`, 而不是`String s = "Hello World"`？这是我遇到的一个面试问题。

如果`String s = new String("Hello World")`在大多数情况下应该避免，为什么 Java 仍然允许这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T08:20:02.140

1) 字符串 s = "文本"; 此语法将为堆中的“文本”分配内存。并且每次您将此“文本”分配给其他变量时，它将每次返回相同的内存引用。对于 Exp -

```
 String aa = "text";
   String bb = "text";

   if(aa == bb){
       System.out.println("yes");
   } else {
       System.out.println("No");
   } 
```

将打印 - 是

但是
String s = new String("text"); 始终在内存中创建一个新位置并每次返回一个新引用。对于 Exp -

```
 String aa = new String ("text");
   String bb = new String ("text");

   if(aa == bb){
       System.out.println("yes");
   } else {
       System.out.println("No");
   } 
```

将打印 - 否

# android - 自动更改 ListView 的背景图片

> ID：10829711
> 
> 赞同：2
> 
> 时间：2012-05-31T08:11:01.887
> 
> 标签：android, listview

我想在一段时间后自动更改 ListView 的背景图像：我使用此代码：

在 onCreate(_) {

```
t = new Thread(){
            public void run() {
                for(int i=0; i<=5; i++){
                    Log.i("forrrrr ", i+"");
                    try {

                        if(flag == 0){
                        listV.setBackgroundDrawable(getResources().getDrawable(R.drawable.th2));
                        flag = 1;
                    }
                    else if(flag == 1){
                        listV.setBackgroundDrawable(getResources().getDrawable(R.drawable.th1));
                        flag = 0;
                    }
                    Thread.sleep(2000);
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }

            }
        };
    };
    t.start(); 
```

}

但我在运行时遇到了以下异常：

```
05-31 13:30:23.832: INFO/AndroidRuntime(309): NOTE: attach of thread 'Binder Thread #3' failed
05-31 13:30:24.442: INFO/ARMAssembler(59): generated scanline__00000077:03545404_00000004_00000000 [ 47 ipp] (67 ins) at [0x2fc6d8:0x2fc7e4] in 5635232 ns
05-31 13:30:24.723: DEBUG/dalvikvm(315): GC_EXTERNAL_ALLOC freed 882 objects / 61160 bytes in 67ms
05-31 13:30:25.332: INFO/forrrrr(315): 0
05-31 13:30:25.452: DEBUG/dalvikvm(315): GC_EXTERNAL_ALLOC freed 248 objects / 11760 bytes in 113ms
05-31 13:30:25.992: INFO/ActivityManager(59): Displayed activity com.dev/.Android10Activity: 2234 ms (total 765300 ms)
05-31 13:30:27.675: INFO/forrrrr(315): 1
05-31 13:30:27.675: WARN/dalvikvm(315): threadid=7: thread exiting with uncaught exception (group=0x4001d800)
05-31 13:30:27.675: ERROR/AndroidRuntime(315): FATAL EXCEPTION: Thread-8
05-31 13:30:27.675: ERROR/AndroidRuntime(315): java.lang.UnsupportedOperationException: removeAllViews() is not supported in AdapterView
05-31 13:30:27.675: ERROR/AndroidRuntime(315):     at android.widget.AdapterView.removeAllViews(AdapterView.java:511)
05-31 13:30:27.675: ERROR/AndroidRuntime(315):     at com.dev.Android10Activity$1.run(Android10Activity.java:61)
05-31 13:30:27.693: WARN/ActivityManager(59):   Force finishing activity com.dev/.Android10Activity 
```

如果我使用一个按钮并手动更改它，它会像这样运行良好：

```
button1.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                if(flag == 0){
                    listV.setBackgroundDrawable(getResources().getDrawable(R.drawable.th2));
                    flag = 1;
                }
                else if(flag == 1){
                    listV.setBackgroundDrawable(getResources().getDrawable(R.drawable.th1));
                    flag = 0;
                }               
            }
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T08:26:54.537

您不能从不是“UI 线程”的线程影响 UI 元素。[您应该使用Activity.runOnUiThread](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29)
运行此代码 或使用[本示例](http://www.vogella.com/articles/AndroidPerformance/article.html#handler)中的[处理程序](http://developer.android.com/reference/android/os/Handler.html)

这是另[一篇可能有用的文章](http://android-developers.blogspot.com/2009/05/painless-threading.html)

# configuration - 具有多个匹配部分的 sshd，覆盖设置

> ID：10829712
> 
> 赞同：11
> 
> 时间：2012-05-31T08:11:11.330
> 
> 标签：configuration, ssh, sshd

我有 sshd 应该只允许 sftp 访问一组用户的情况。

这很容易通过添加一个匹配部分来完成

```
Match Group groupname
    ChrootDirectory /srv/ftp
    ForceCommand internal-sftp 
```

现在我需要排除一个属于该组成员的用户。他应该具有正常的 shell 访问权限。

```
Match User username
    ChrootDirectory ???
    ForceCommand ??? 
```

我在这里设置什么？是否可以取消设置先前使用另一个匹配部分设置的配置指令？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2016-03-17T22:15:52.130

首先将设置应用于组，不包括用户名，然后将（其他）设置应用于用户名。如果您不对用户用户名使用“ForceCommand”设置，则不会应用。

```
Match Group groupname User !username
   ChrootDirectory /srv/ftp
   ForceCommand internal-sftp
Match User username
   PasswordAuthentication yes 
```

另一个示例是，如果用户从不同的 IP 地址登录，您可能需要不同的设置

```
#all users except username1 and username2 default to sftp
Match User *,!username1,!username2
    PasswordAuthentication yes
    AllowTCPForwarding no
    X11Forwarding no
    ForceCommand internal-sftp -f LOCAL0 -l INFO

#normal ssh allowed for users username1 and username2 from the local network
Match User username1,username2 Address 192.168.0.0/16
    PasswordAuthentication yes

#users username1 and username2 not allowed from other networks
Match User username1,username2 Address *,!192.168.0.0/16
    PasswordAuthentication yes
    AllowTCPForwarding no
    X11Forwarding no
    ForceCommand /usr/sbin/nologin 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-31T09:56:16.313

不要添加`Match User`部分。相反，通过将用户从原始匹配中排除来排除用户。

```
Match Group groupname User !username
    ChrootDirectory /srv/ftp
    ForceCommand internal-sftp 
```

`Match`必须满足行上的所有条件才能应用该部分。

我不确定确切的语法。您可能需要报价。

```
Match Group groupname User "!username"
    ChrootDirectory /srv/ftp
    ForceCommand internal-sftp 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-24T14:48:55.147

对我有用的是将用户规则放在首位：

```
Match user lee
    ChrootDirectory /mnt/s3
    ForceCommand internal-sftp

Match group ftp
    ChrootDirectory /home/%u
    ForceCommand internal-sftp 
```

# css - Wordpress 顶栏和我的顶栏和 IE9

> ID：10829719
> 
> 赞同：1
> 
> 时间：2012-05-31T08:12:02.757
> 
> 标签：css, wordpress, wordpress-theming

我在 header.php 中的某些 div 上添加了我的 css 功能，以便在 wordpress 主题上创建我自己的顶部栏现在我只面临一个问题，即 wordpress 顶部栏出现在 chrome 上但没有出现在 IE9 上，我相应地对 css 进行了编码调整顶部=28；它在 chrome 上完美运行，因为 WP 顶部栏出现在其上，但不在 IE9 上，因为 wordpress 仪表板顶部栏未出现在其上，并且顶部空间为 28；出现

请让我知道如何修复它，以便它可以在任一浏览器上完美运行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T08:25:11.983

如果您登录到 WordPress 管理面板，则会出现 WordPress 顶部栏。尝试在 IE9 上登录，您将看到管理栏。此外，管理栏使用带有 !important 属性的 CSS。但您不必担心，因为您网站的访问者不会看到此栏。

当我第一次研究 Wordpress 主题时，这个 Bar 浪费了我很多时间。您应该在设计主题时牢记没有这样的栏，即 top = 0（可能在您未登录管理面板的另一个浏览器中查看真实图片）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T09:48:07.960

无论是否显示 WordPress 的管理栏，您都可以有条件地设置顶部栏的样式。
检查 Firebug 或只是您页面的源代码，您会看到 WP`admin-bar`在`body`元素上添加了一个类。同样，`.logged-in`但我想无论是否显示 WP 管理栏，都会出现这个。

然后，您可以为访问者和您自己设置顶部栏的样式，例如：

```
.softgenic-bar {
    position: fixed;
    top: 0;
    left: 0;
    color: white;
    background: black;
}
.admin-bar .softgenic-bar {
    top: auto;
    bottom: 0;
    background: darkred;
} 
```

如果您将栏完全放在其他位置，请不要忘记相应地添加/删除填充和边距。
您还可以决定为自己绝对定位您的酒吧，并为您的访客固定。或者如果它与自己无关，则将其隐藏，这完全取决于其内容（例如，您不需要订阅自己的时事通讯^^，但仍应显示应用程序中的绘图工具）

# session - 从一个控制器重定向到另一个 ASP.NET MVC 时，会话为空

> ID：10829728
> 
> 赞同：1
> 
> 时间：2012-05-31T08:12:59.933
> 
> 标签：session, asp.net-mvc-2, redirect

从一个控制器重定向到另一个控制器时，为什么 Session 为空？当我再次刷新页面时，我发现会话对象不为空并且有数据！

第一个控制器：

```
HttpContext.Session["SiteCheckpoint"] = siteCheckpoint;
//redirect to second page controller
Response.Redirect(siteCheckpoint.FirstPageUrl + "?rf =" + referenceId); 
```

第二个控制器：

```
if (HttpContext.Session[Resources.SessionParameter.SiteCheckpoint] != null)
{
    GetCheckpointData();
}
else 
{                
    //Raise error page
} 
```

我尝试了这个解决方案，但没有奏效：

```
<remove name="Session" />
<add name="Session" type="System.Web.SessionState.SessionStateModule"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T16:05:14.567

我解决了我的问题，因为我没有在我的视图中定义任何模型我无法将任何数据传递给第二个控制器

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Views/Shared/Site.Master" Inherits="System.Web.Mvc.ViewPage<BCV4.Web.Redirection.Models.HomeModel>" %> 
```

# google-app-engine - 从 python 脚本将日志摄取到 bigquery

> ID：10829731
> 
> 赞同：-2
> 
> 时间：2012-05-31T08:13:15.743
> 
> 标签：google-app-engine, python-2.7, google-bigquery

我想在不使用 appengine mapreduce 的情况下将日志从 appengine 应用程序提取到 bigquery 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-06T18:57:13.883

我们在此处开源了将 appengine 日志迁移到 bigquery 的 Java 实现：http: [//blog.streak.com/2012/07/export-your-google-app-engine-logs-to.html](http://blog.streak.com/2012/07/export-your-google-app-engine-logs-to.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T17:36:09.990

[请参阅此处](https://developers.google.com/bigquery/docs/developers_guide#localimport)的 bigquery 文档。您可以发布包含要添加到表中的数据的多部分 http 请求。如果您正在进行追加，则无需提供架构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T00:24:47.983

还有一个名为“log2bq”的 Python 运行时实现，它演示了如何将 App Engine 日志提取到 BigQuery：[http ://code.google.com/p/log2bq/](http://code.google.com/p/log2bq/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-08T13:40:26.353

Google 最近发布了一个名为“Google Cloud Logging：日志导出”的（BETA）功能 [https://cloud.google.com/logging/docs/install/logs_export](https://cloud.google.com/logging/docs/install/logs_export)

他们将其总结为：

> 将您的 Google Compute Engine 日志和 Google App Engine 日志导出到 Google Cloud Storage 存储桶、Google BigQuery 数据集、Google Cloud Pub/Sub 主题或三者的任意组合。

我还没有尝试过这项新服务提供的所有功能，但是......

我们最近开始在我们的 Python GAE 项目中使用“将 App Engine 日志流式传输到 BigQuery”功能。这会将我们应用的日志直接发送到 BigQuery，因为它们正在发生，以便在 BigQuery 数据集中提供近乎实时的日志记录。

# c# - 如何计算 C# 中两个日期之间的月份数

> ID：10829732
> 
> 赞同：12
> 
> 时间：2012-05-31T08:13:26.693
> 
> 标签：c#, asp.net

我想知道如何计算两个日期之间的月份数。有什么方法可以在 C# 中计算它吗？

```
Eg1\.    Date1 = "2011/11/01"  
        Date2 = "2012/02/01"     
Result. Numbers of Month =3  

 Eg2\.  Date1 = "2012/01/31"
       Date2 = "2012/02/01"  
Result. Numbers of Month =1

 Eg3\.  Date1 = "2012/01/01"  
       Date2 = "2012/02/28"
 Result. Numbers of Month =1 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-31T08:20:48.897

这将给出月份之间的差异：

```
int months = (Date2.Year - Date1.Year) * 12 + Date2.Month - Date1.Month; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-31T08:17:45.100

我的[Noda Time](http://noda-time.googlecode.com)项目为此提供了：

```
LocalDate date1 = new LocalDate(2011, 11, 1);
LocalDate date2 = new LocalDate(2012, 2, 1);
Period period = Period.Between(date1, date2, PeriodUnits.Months);
long months = period.Months; // 3 
```

有关更多信息，请参阅[算术项目文档。](http://noda-time.googlecode.com/hg/docs/userguide/arithmetic.html)

# java - 错误：ViewMap 中的不可序列化属性值

> ID：10829734
> 
> 赞同：7
> 
> 时间：2012-05-31T08:13:31.123
> 
> 标签：java, jsf, jakarta-ee, managed-bean

我在 2 个系统（笔记本电脑）中有相同的应用程序，但它可以在一个系统中工作，但不能在另一个系统中工作。我在另一个系统中收到以下错误。我还发布了下面的代码。我想要做的是使用调用不同托管 bean 的方法的按钮和用于在数据库中添加记录的 placeOrder 按钮级联下拉列表。但我在页面时收到以下错误加载

```
WARNING: Setting non-serializable attribute value into ViewMap: (key: stockOrderBean, value class: beans.stockOrderBean)
    SEVERE: Error Rendering View[/ClientTemplate/stockTrade.xhtml]
    java.io.NotSerializableException: beans.stockOrderBean

    WARNING: JSF1087: Unable to generate Facelets error page as the response has already been committed.
    SEVERE: javax.faces.FacesException: beans.stockOrderBean 
```

xhtml代码：

```
 <h:outputText value="Exchange :"/>

                <p:selectOneMenu value="#{stockOrderBean.exchange}" style="width: 200px">
                    <f:selectItem itemLabel="Select Exchange"/>
                    <f:selectItem itemLabel="NSE" itemValue="nse"/> 
                    <f:selectItem itemLabel="BSE" itemValue="bse"/>
                    <p:ajax update="sym" listener="#{stockOrderBean.wow}"/>
                </p:selectOneMenu>
                <h:outputText value="Select ScripSymbol :"/>

                <p:selectOneMenu value="#{stockOrderBean.scripID}" style="width: 200px" id="sym">
                    <f:selectItem itemLabel="Select scrip"/>
                    <f:selectItems var="scrip" value="#{stockOrderBean.sl}" itemLabel="#{scrip.scripSymbol}" itemValue="#{scrip.scripID}"/>
                </p:selectOneMenu>

                <p:commandButton value="Get Quote"  actionListener="#{stockOrderBean.equity.setQuote}" oncomplete="cd.show()" update=":frmdialog" />

                <h:panelGrid columns="2" id="d1" style="width:565px">
                    <h:outputText value="How would you like to place order"/>                                
                    <p:selectOneRadio value="#{stockOrderBean.transType}">
                        <f:selectItem itemLabel="Market Order" itemValue="MarketOrder"/>
                        <p:ajax update="frmTrade:d1"/>
                        <f:selectItem itemLabel="Limit Order" itemValue="LimitOrder"/>
                        <p:ajax update="frmTrade:d1"/>
                   </p:selectOneRadio>                            
                   <h:outputText value="Trigger Price"/>
                   <p:inputText value="#{stockOrderBean.triggerPrice}" disabled="#{stockOrderBean.transType == 'LimitOrder'}"/>
                   <h:outputText value="Limit Price"/>
                   <p:inputText value="#{stockOrderBean.limitPrice}" disabled="#{stockOrderBean.transType == 'MarketOrder'}"/>                                
                </h:panelGrid>                

                <h:outputText value="Select your Demate Account"/>

                <p:selectOneMenu value="#{stockOrderBean.demateAccount}" style="width: 120px">
                    <f:selectItem itemLabel="#{stockOrderBean.demateAccount}" itemValue="#{stockOrderBean.demateAccount}"/>
                </p:selectOneMenu>

                <p:commandButton value="Place New Order"  actionListener="#{stockOrderBean.placeOrder}"/>
         <p:commandButton value="Reset New Order" type="reset"/>

</h:form>        
        <p:dialog widgetVar="cd" header="Scrip Quotes Detail" resizable="true">
            <h:form id="frmdialog">                        
                <table>
                            <tr>
                            <td>
                                Ask :
                            </td>
                            <td>                                        
                                <b><h:outputText value="#{stockOrderBean.equity.ask}"/></b>
                            </td>

                    </table>
               </h:form>
       </p:dialog> 
```

sockOrderBean 代码：

```
 @javax.faces.bean.ManagedBean
@javax.faces.bean.ViewScoped
public class stockOrderBean{

    @WebServiceRef(wsdlLocation = "WEB-INF/wsdl/localhost_8080/StatelessWebService/StatelessWebService.wsdl")
    private StatelessWebService_Service service;
//properties with getter setter
 @ManagedProperty(value="#{equtiyBean}")
    private equityBean equity = new equityBean();
public void placeOrder(...){
//method not called
} 
```

相同的代码在一个系统上运行，但在另一个系统上不运行。可能是什么原因，我该如何解决？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-31T13:01:53.753

一些服务器配置需要将 HTTP 会话保存在硬盘上，或者需要通过网络将它们传输到某个中央数据存储，通常是为了在集群中的多个服务器之间共享会话，或者最大限度地减少过多的内存使用。这反过来又要求实现所有会话属性[`Serializable`](http://docs.oracle.com/javase/7/docs/api/java/io/Serializable.html)，以便服务器可以使用[`ObjectOutputStream`](http://docs.oracle.com/javase/7/docs/api/java/io/ObjectOutputStream.html)将 Java 对象转换为字节，然后将其保存在磁盘上或通过网络传输，[`ObjectInputStream`](http://docs.oracle.com/javase/7/docs/api/java/io/ObjectOutputStream.html)并将这些字节转换回 Java 对象。

如果存储在 HTTP 会话中的对象未实现`Serializable`，那么您将`NotSerializableException`在消息中获得具有完整限定类名的 a。然后，您应该修复要实现的类`Serializable`。

```
public class StockOrderBean implements Serializable {
    // ...
} 
```

在 JSF 中，这适用于所有视图和会话范围的托管 bean。请求和应用程序范围的 bean 不需要实现`Serializable`. 请注意，所有 bean 属性也应该是`Serializable`. 但只要遇到一个，你就会得到足够的清晰`NotSerializableException`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T09:16:35.493

添加到会话中的任何内容都是序列化的。该错误告诉您，您的支持 bean 可能应该是可序列化的。不知道为什么它是间歇性的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T14:11:58.180

尝试将以下代码添加到您的 web.xml。它将会话对象保留在服务器端。

```
<context-param>
   <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
   <param-value>server</param-value>
</context-param> 
```

# ios - iOS中的可变图像类型？

> ID：10829738
> 
> 赞同：0
> 
> 时间：2012-05-31T08:13:35.743
> 
> 标签：ios, image, mutable

我正在寻找一个可变的图像类。
如您所知， NSArray 不是可变的，而 NSMutableArray 是可变的。

关于 UIImage 的 Apple 文档

> 图像对象是不可变的，因此您无法在创建后更改它们的属性。

我想要的是在创建后更改图像的颜色。
这怎么可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T08:17:24.213

您可以使用 Core Image 进入图像的位图并应用过滤器，然后渲染新图像。

更具体地说，您可以创建一个自定义子类`CIFilter`以将自定义过滤器应用于您的图像并进行渲染。

不幸的是，您需要做很多事情来完成这项工作，包括必须编写一些内核代码并在 QC 中对其进行测试、声明一个新接口、编写几个方法、注册并最终创建一个工厂方法。它有很多东西，但是，它就是这样。

请参阅[Core Image Programming Guide](https://developer.apple.com/library/ios/documentation/graphicsimaging/Conceptual/CoreImaging/ci_custom_filters/ci_custom_filters.html#//apple_ref/doc/uid/TP30001185-CH207-TPXREF101)和[Core Image Filters Reference](https://developer.apple.com/library/ios/#documentation/graphicsimaging/reference/CoreImageFilterReference/Reference/reference.html)。

# sql - 如何显示 2 个有条件的表中的值

> ID：10829739
> 
> 赞同：2
> 
> 时间：2012-05-31T08:14:01.590
> 
> 标签：sql, sql-server, sql-server-2000

使用 SQL Server 2000

表格1

```
ID date value

001 23/01/2012 100
002 25/02/2012 200
.... 
```

表2

```
Id date value

001 01/01/2012 200
001 02/01/2012 100
...
001 23/02/2012 200
...
001 31/03/2012 100
002 ....
..... 
```

我想选择 table2 的值，如果 id 和 date 与 table1 匹配，那么值将从 table1 显示

ID 日期值

```
001 01/01/2012 200
001 02/01/2012 100
...
001 23/02/2012 100 'matching id and date from table1
...
001 31/03/2012 100
002 ....
..... 
```

这个怎么做。

需要查询帮助

预期产出

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T08:17:40.327

假设 table1 中的行与 table2 中的行具有相同的 id 和日期（例如，如果 id/date 是 table1 的唯一/主键），那么以下将起作用：

```
SELECT
    table2.id,
    table2.date,
    ISNULL(table1.value, table2.value) AS value
FROM table2
    LEFT OUTER JOIN table1 ON table2.id = table1.id
        AND table2.date = table1.date 
```

如果 table1 中的多行可能与 table2 中的一行匹配，那么您需要聚合并决定要使用哪些不同的值，或者您是否想要取平均值、最小值或最大值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T09:21:11.403

```
SELECT DISTINCT Table2.ID, Table2.date,
            CASE
                WHEN Table1.ID = Table2.ID
                     AND Table1.date = Table2.date THEN Table1.value
                ELSE Table2.value
            END
FROM Table1, Table2 
```

**编辑**

```
SELECT n_t.n_ID,
       n_t.n_date,
       n_t.n_value
FROM
  (SELECT Table2.ID AS n_ID,
          Table2.date AS n_date,
          CASE
              WHEN Table1.ID = Table2.ID THEN CASE
                                                  WHEN Table1.date = Table2.date THEN Table1.value
                                                  ELSE Table2.value
                                              END
          END AS n_value
   FROM Table1,
        Table2) AS n_t
WHERE n_t.n_value IS NOT NULL 
```

# php - 正确定义类成员

> ID：10829746
> 
> 赞同：0
> 
> 时间：2012-05-31T08:14:30.233
> 
> 标签：php, oop, function

我对编程特别是 OOP 真的很陌生，我想知道如何正确编写这种函数？

有最佳实践吗？也许这取决于代码的可读性，但我不知道哪个更好？就个人而言，我更喜欢第三个，但我想学习“正确”的方式......

```
// Version #1
public function getUser( $id )
{
    $sql = "SELECT * FROM users WHERE id=$id";
    $user = $this->database->query($sql);
    return $user;
}

// Version #2    
public function getUser( $id )
{
    $user = $this->database->query("SELECT * FROM users WHERE id=$id");
    return $user;
}

// Version #3    
public function getUser( $id )
{
    return $this->database->query("SELECT * FROM users WHERE id=$id");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T08:24:33.223

所有这些都是错误的，因为你没有 sanitize `$id`，如果它是一个 int ，你的函数的第一行应该是：

```
$id = (int) $id; 
```

如果是别的，它应该是：

```
$id = $this->database->whateveryourescapefunctioniscalled($id); 
```

现在，你真正的问题。1 和 2 的优点是，如果您的数据库函数返回用户以外的其他内容（某些函数在失败时返回 false），您可以在此函数中处理它。在 #3 中，您必须在任何地方处理它`getUser`。这将变成一团糟。如果您的查询变得更长（需要连接等），您可能需要更像 1 的东西，但在那之前，2 很好。如果您不关心或不需要在这里处理失败的查询案例，即使 3 也可以。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-01T01:55:23.450

基于这三个例子，OOP 方面就没什么好说的了。你应该明白 CLASS 的 IDEA 是什么。课程围绕一个中心概念、想法或主题展开。然后，类字段是描述该主题的那些属性。例如，如果您有一个类表示坐标系中的一个点，那么 x 和 y 坐标的属性就是该类的自然属性。我想说的是，面向对象基于某些原则（许多人似乎忽略了这些原则）。这不是在两行与一行中编写一些代码。

# javascript - How to unnest functions in javaScript

> ID：10829748
> 
> 赞同：0
> 
> 时间：2012-05-31T08:14:34.587
> 
> 标签：javascript, function

I need some help to understand nested function in javaScript. So, below is a fictional script with nested functions, can somebody help me to understand how to unnest them ?

```
 function start (){

        document.ontouchmove = function1;

        document.onmouseup = function3 = function2; 

    };

    function function1 (){

        //code

    };

    function function2 (){

        // code

    };

    function function3 (){

        //code

    }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T08:20:10.607

您的代码片段中没有嵌套函数。

不过，您将赋值用作表达式，将其返回值用于“链式”赋值。

解除分配的链接只会相当于

```
function3 = function2;
document.onmouseup = function3; 
```

# python - Django 返回“配置文件匹配查询不存在”

> ID：10829750
> 
> 赞同：0
> 
> 时间：2012-05-31T08:14:38.390
> 
> 标签：python, django, django-models

我有一些问题。我导入 django 用户模型，创建新用户然后尝试获取它的配置文件，我所拥有的只是“配置文件匹配查询不存在”。为什么？我只是创建用户。

这是我的代码：

```
from django.contrib.auth.models import User 
user = User.objects.create(username="stackoverflow", password="tester1234")
user.get_profile() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T08:21:51.120

您可能忘记设置

```
AUTH_PROFILE_MODULE 
```

在你的`settings.py`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T08:20:35.683

[在线文档](https://docs.djangoproject.com/en/dev/topics/auth/#django.contrib.auth.models.User.get_profile)建议 get_profile()...

> 返回此用户的特定于站点的配置文件。如果当前站点不允许配置文件，则引发 django.contrib.auth.models.SiteProfileNotAvailable，如果用户没有配置文件，则引发 django.core.exceptions.ObjectDoesNotExist。有关如何定义特定于站点的用户配置文件的信息，请参阅下面有关存储其他用户信息的部分。

您确定已启用配置文件吗？

从您的代码片段看来，您可能没有创建一个单独的类的配置文件（请参见[此处](https://stackoverflow.com/questions/6085025/django-user-profile).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-07-08T10:27:25.370

还在signals.py中编写save方法：

```
@receiver(post_save,sender=User)
def save_profile(sender,instance,**kwargs):
    instance.profile.save() 
```

并将其添加到 app.py

```
class UserProfileConfig(AppConfig):
    name = 'UserProfile'

    def ready(self):
        import UserProfile.signals 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T08:34:38.490

Django 文档清楚地定义了这一点，我错过了，对不起

> 存储有关用户的附加信息
> 
> 如果您想存储与您的用户相关的附加信息，Django 提供了一种方法来指定特定于站点的相关模型——称为“用户配置文件”——为此目的。
> 
> 要使用此功能，请定义一个模型，其中包含您要存储的其他信息或您希望拥有的其他方法的字段，并将模型中的 OneToOneField 命名用户添加到用户模型。这将确保只能为每个用户创建一个模型实例。例如：
> 
> ```
> from django.contrib.auth.models import User
> 
> class UserProfile(models.Model):
>     # This field is required.
>     user = models.OneToOneField(User)
> 
>     # Other fields here
>     accepted_eula = models.BooleanField()
>     favorite_animal = models.CharField(max_length=20, default="Dragons.") 
> ```
> 
> 要指示此模型是给定站点的用户配置文件模型，请使用由以下项目组成的字符串填写设置 AUTH_PROFILE_MODULE，并用点分隔：
> 
> 定义用户配置文件模型的应用程序的名称（区分大小写）（换句话说，传递给 manage.py startapp 以创建应用程序的名称）。模型（不区分大小写）类的名称。
> 
> 例如，如果配置文件模型是一个名为 UserProfile 的类并在名为 accounts 的应用程序中定义，则适当的设置将是：
> 
> ```
> AUTH_PROFILE_MODULE = 'accounts.UserProfile' 
> ```
> 
> 当以这种方式定义和指定用户配置文件模型时，每个用户对象将有一个方法——get_profile()——它返回与该用户关联的用户配置文件模型的实例。
> 
> 如果配置文件不存在，则 get_profile() 方法不会创建配置文件。您需要为 User 模型的 django.db.models.signals.post_save 信号注册一个处理程序，并且在处理程序中，如果 created 为 True，则创建关联的用户配置文件：
> 
> # 在模型.py
> 
> 从 django.contrib.auth.models 导入用户 从 django.db.models.signals 导入 post_save
> 
> ```
> # definition of UserProfile from above
> # ...
> 
> def create_user_profile(sender, instance, created, **kwargs):
>     if created:
>         UserProfile.objects.create(user=instance)
> 
> post_save.connect(create_user_profile, sender=User) 
> ```

# iphone - NSFileSize what Entity?

> ID：10829755
> 
> 赞同：0
> 
> 时间：2012-05-31T08:15:01.997
> 
> 标签：iphone, ios, xcode

I have a method which gives me the fileSize of a directory. I looked up in the Documentation but it's not declared which entity NSFileSize has.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T08:19:14.853

在[NSFileManager 文档](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/nsfilemanager_Class/Reference/Reference.html#//apple_ref/doc/uid/20000305-SW2)中：

> NSFileSize
> 
> 文件属性字典中的键，其值指示文件的大小（以字节为单位）。对应的值是一个包含 unsigned long long 的 NSNumber 对象。重要如果文件有资源叉，则返回的值不包括资源叉的大小。在 iOS 2.0 及更高版本中可用。在 NSFileManager.h 中声明。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T08:20:42.613

`NSFileSize`是`NSFileManager`'s返回的属性字典中的键`attributesOfItemAtPath:error:`。该对象是一个 NSNumber，您可以从中获取 POD 值，使用`unsignedLongLongValue`.

你不会得到`NSFileSize`字典。你的意思是什么方法？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T15:35:20.827

我自己解决了这个问题，这要归功于目录没有 FileSize 的提示。这是我完成的代码：

```
-(float)getSizeOfDirectory:(NSString *)directory{

    NSFileManager *filemgr;
    NSArray *filelist;
    int count;
    float cacheSize = 0;

    filemgr =[NSFileManager defaultManager];
    filelist = [filemgr contentsOfDirectoryAtPath:directory error:NULL];
    count = [filelist count];

    for (NSString *url in filelist) {
        NSData *data = [filemgr contentsAtPath:[NSString stringWithFormat:@"%@/%@",directory,url]];
        cacheSize = cacheSize + ([data length]/1000);
    }

    cacheSize = (cacheSize/1024);
    NSLog(@"cacheSize: %f MB",cacheSize);

    return cacheSize;
} 
```

# java - Jaxb tag embedded in tag

> ID：10829756
> 
> 赞同：1
> 
> 时间：2012-05-31T08:15:03.157
> 
> 标签：java, jaxb

I have XML like this:

```
 <FirstTag Attr="123">
     <WrapperTag>
       <EmbeddedTag>
       ....
       </EmbeddedTag>
     </WrapperTag>
   </FirstTag> 
```

and code:

```
class FirstTag{
    EmbeddedTag tag;
} 
```

i dont want write WrapperTag's class. What annotation should I use for EmbeddedTag?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T08:24:28.057

您将需要使用：

```
@XmlRootElement(name = "FirstTag") 
```

在你的第一堂课之上，然后使用：

```
@XmlElementWrapper(name="Wrapper")
@XmlElement(name="Embedded Tag") 
```

在您想要作为包装器并嵌入的变量之上。

希望这可以帮助。

# wlanapi - How to Get Rssi Value of WlanGetNetworkBssList Function Return Value

> ID：10829759
> 
> 赞同：0
> 
> 时间：2012-05-31T08:15:21.123
> 
> 标签：wlanapi

Windows's WlanAPi has a function which is WlanGetNetworkBssList.This function return a variable which type is PWLAN_AVAILABLE_NETWORK. How to get rssi value of PWLAN_AVAILABLE_NETWORK rssi value using windows wlan api ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T14:38:56.610

These structure definitions and constructors work in my code works from WlanGetAvailableNetworkList it is incomplete and does not completely parse the structure, but it does get RSSI.

```
[StructLayout(LayoutKind.Sequential)]
    public struct WLAN_AVAILABLE_NETWORKS_LIST
    {
        public UInt32 NumberOfNetworks;
        //Current Not used by Native System, can be used to indicate desired network
        public UInt32 CurrentNetwork;

        //one per network found
        public WLAN_AVAILABLE_NETWORK[] Available_Network;

        //input for constructor
        private   IntPtr p;
        public    WLAN_AVAILABLE_NETWORKS_LIST(IntPtr _p)
            {
                IntPtr pn = new IntPtr();
                // TODO: Complete member initialization
                 this.p = _p;
                 this.NumberOfNetworks = (UInt32)Marshal.ReadInt32(p);
                 this.CurrentNetwork = (UInt32)Marshal.ReadInt32(p, 4);
                 this.Available_Network = new WLAN_AVAILABLE_NETWORK[NumberOfNetworks];
                 for (int i = 0; i < NumberOfNetworks; i++)
                 {
                     pn = (IntPtr)(p.ToInt32() + 8 + (628 * i));
                     //Available_Network[i] = (WLAN_AVAILABLE_NETWORK)Marshal.PtrToStructure(pn, typeof(WLAN_AVAILABLE_NETWORK));
                     Available_Network[i].strProfileName = Marshal.PtrToStringUni(pn);
                     Available_Network[i].SSID = new dot11_SSID(new IntPtr(pn.ToInt32() + 512));
                     Available_Network[i].dot11BssType = (DOT11_BSS_TYPE)Marshal.ReadInt32(pn, 512 + 36);
                     Available_Network[i].uNumberOfBssids = (UInt32)Marshal.ReadInt32(pn, 512+36+4);
                     Available_Network[i].wlanSignalQuality = (UInt32)Marshal.ReadInt32(pn, 512 + 36 + 5*4+32+4);
                 }
            }          
    } 
```

Structure for WLAN_AVAILABLE_NETWORK

```
 [StructLayout(LayoutKind.Sequential, CharSet = CharSet.Unicode)]
    public struct WLAN_AVAILABLE_NETWORK //size = 628
    {
        [MarshalAs(UnmanagedType.ByValTStr, SizeConst = 256)]
        public string strProfileName;//size 512
        public dot11_SSID SSID;//size 36
        public DOT11_BSS_TYPE dot11BssType; // size 4
        public UInt32 uNumberOfBssids; // 4
        //public bool bNetworkConnectable; // 4
        //public UInt32 wlanNotConnectableReason; // 4
        //public UInt32 uNumberOfPhyTypes; // 4
        ////public DOT11_PHY_TYPE[] dot11PhyTypes; // max is 8, size is 8*4 = 32
        //public UInt32[] dot11PhyTypes; // max is 8, size is 8*4 = 32
        //public bool bMorePhyTypes;// 4
        public UInt32 wlanSignalQuality; //  size 4
                    //A percentage value that represents the signal quality of the network. WLAN_SIGNAL_QUALITY is of type ULONG. This member contains a value between 0 and 100\. A value of 0 implies an actual RSSI signal strength of -100 dbm. A value of 100 implies an actual RSSI signal strength of -50 dbm. You can calculate the RSSI signal strength value for wlanSignalQuality values between 1 and 99 using linear interpolation.
        //public bool bSecurityEnabled;// 4
        ////public DOT11_AUTH_ALGORITHM dot11DefaultAuthAlgorithm;// 4
        ////public DOT11_CIPHER_ALGORITHM dot11DefaultCipherAlgorithm;// 4
        //public UInt32 dot11DefaultAuthAlgorithm;// 4
        //public UInt32 dot11DefaultCipherAlgorithm;// 4
        //public UInt32 dwFlags;// 4
        //public UInt32 dwReserved;// 4
        } 
```

I could not make the Marshal.PtrToStructure work.

Here is the function that calls the WlanGetAvailableNetworkList

```
 public static WLAN_AVAILABLE_NETWORKS_LIST GetAvailNetworkList()
    {
        UInt32 _dwflags = 3;
        IntPtr handle = GetClientHandle();
        IntPtr pGuid = GetCurrentInterfaceGuidPointer();
        IntPtr _ppAvailNetworkList = new IntPtr();
        uint error = WlanGetAvailableNetworkList(handle, pGuid, _dwflags, IntPtr.Zero, out _ppAvailNetworkList);
        if (error != 0)
        {
            Console.WriteLine("WlanEnumerated function in GetAvailNetworkPointer() failed... inspect error number" + error);
        }
        else
        {
            // It worked    
        }
        WLAN_AVAILABLE_NETWORKS_LIST TempNetworkList = new WLAN_AVAILABLE_NETWORKS_LIST(_ppAvailNetworkList);
        WlanFreeMemory(pGuid);
        CloseClientHandle(handle);
        return TempNetworkList;
    } 
```

and the NUINT test that confirms there are RSSI values.

```
 [Test]
    public void GetAvailNetworkReturnsRSSI()
    {
        WiFiApi.WLAN_AVAILABLE_NETWORKS_LIST networklist = WiFiApi.GetAvailNetworkList();
        for (int i = 0; i < networklist.NumberOfNetworks; i++)
        {
            string SSIDstr = new string(networklist.Available_Network[i].SSID.SSID);
            Console.Write("Network " + i + "    ");
            Console.Write(SSIDstr);
            Console.Write(" RSSI = " + networklist.Available_Network[i].wlanSignalQuality);
            Console.Write(" dbM = " + ((int)(networklist.Available_Network[i].wlanSignalQuality/2)-100));
            Console.WriteLine(" ");
            if (0 != networklist.Available_Network[i].SSID.SSID_Length)
            {
                Assert.LessOrEqual((int)networklist.Available_Network[i].wlanSignalQuality, 100);
                Assert.Greater((int)networklist.Available_Network[i].wlanSignalQuality, 0);
            }
        }
    } 
```

# ssl - Generating TLS master key with smartcard using PKCS11

> ID：10829761
> 
> 赞同：2
> 
> 时间：2012-05-31T08:15:29.747
> 
> 标签：ssl, smartcard, pkcs#11

I am supposed to generate tls specific keys with smartcard.

I examined for example P11TlsMasterSecretGenerator class but it requires CKM_TLS_MASTER_KEY_DERIVE_DH mechanism that smartcard to have for master key generation.

But my smartcard does not support this mechanism.

My question is if it possible to use other mechanisms such as CKM_ECDH1_DERIVE for this purpose.

Actually my concern is what CKM_TLS_MASTER_KEY_DERIVE_DH mechanism provides internally more than CKM_ECDH1_DERIVE.

If someone can link me a document or something, I really appreciate that.

Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T07:24:47.917

RFC5246 定义了这样的主密钥生成：

master_secret = PRF(pre_master_secret,"master secret",ClientHello.random + ServerHello.random)[0..47];

在哪里：

PRF（秘密，标签，种子）= P_hash（秘密，标签+种子）；

P_hash（秘密，种子）= HMAC_hash（秘密，A（1）+种子）+ HMAC_hash（秘密，A（2）+种子）+ HMAC_hash（秘密，A（3）+种子）+ ...

A(0) = 种子 A(i) = HMAC_hash(secret, A(i-1));

因此可以通过在智能卡上使用 HMAC 来实现这一算法。但这并不能解决我希望在卡中生成 master_secret 而不能从智能卡中提取的问题。HMAC 函数总是按预期输出一个字节数组作为结果。

# c# - 如何处理多个窗体

> ID：10829762
> 
> 赞同：0
> 
> 时间：2012-05-31T08:15:32.513
> 
> 标签：c#, winforms

我正在做一个存储电影的小项目。我正在使用三个窗口窗体、一个介绍窗体、一个主窗体和一个新电影窗体。我还有一个名为 MovieManager 的类，它是应用程序的核心。我的问题是我不确定我应该如何处理这个窗口。

假设我希望应用程序从介绍表单开始，当用户单击“确定”按钮时，主表单应该会出现。做这个的最好方式是什么？我应该在 Program.cs 中创建一个显示和隐藏不同窗口窗体的 MovieManager 类的对象，还是应该在 Program.cs 中从显示介绍窗体开始？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T08:24:33.717

您可以在开始应用程序时简单地在 Program.cs 中执行所有人员。将您的 IntroForm 显示为对话框。如果用户单击确定，则启动主应用程序表单，否则关闭应用程序。

```
static void Main()
{
    IntroForm introForm = new IntroForm();
    if (introForm.ShowDialog() != DialogResult.OK)
    {
        Application.Exit();
        return;

    }

    Application.Run(new MainForm());
} 
```

如果您需要`MovieManager`所有这些表单的单个实例，那么您可以在 Main 方法中创建它并将相同的实例传递给`IntroForm`and `MainForm`：

```
MovieManager movieManager = new MovieManager();

IntroForm introForm = new IntroForm(movieManager);
if (introForm.ShowDialog() != DialogResult.OK)
{
    Application.Exit();
    return;
}

Application.Run(new MainForm(movieManager)); 
```

您也可以实现`MovieManager`为[Singleton](http://msdn.microsoft.com/en-us/library/ff650316.aspx)，它可以通过静态属性在任何地方访问`MovieManager.Instance`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T08:31:17.833

你所说的介绍形式，我应该称之为启动画面。在 program.cs 中，我应该只弹出初始屏幕（带有徽标、标题和有关应用程序的信息、版本号等）。初始屏幕显示一段时间（为此使用计时器，或者 Thread.Sleep 也可能有点重）。

当启动屏幕关闭显示 MainForm 时，您可以从那里实例化 MovieManager 或使用静态 MovieManager（这取决于它的用途）。然后，您可以从主窗体实例化并显示新的电影窗体。

我们使用这样的一段代码：

```
static void Main(string[] args)
{
  try
  {
    SplashScreen.ShowSplashScreen();
    Application.DoEvents();
    SplashScreen.WaitForVisibility(.5);
    bool starting = true;
    while (starting)
    {
      try
      {
        SplashScreen.SetStatus("Initialize mainform...");
        starting = false;
        Application.Run(new MainForm());
      }
      catch (Exception ex)
      {
        if (starting)
          starting = XtraMessageBox.Show(ex.Message, "Fout bij initialiseren", MessageBoxButtons.RetryCancel, MessageBoxIcon.Error, MessageBoxDefaultButton.Button1) == DialogResult.Retry;
        else
          throw (ex);
      }
    }
  }
  catch (Exception ex)
  {
    if (ex is object)
      XtraMessageBox.Show(ex.Message, "Algemene fout", MessageBoxButtons.OK, MessageBoxIcon.Error, MessageBoxDefaultButton.Button1);
  }
} 
```

启动画面（摘录）中的代码如下所示：

```
if (_splashForm == null)
{
  ThreadPool.QueueUserWorkItem(RunSplashForm, null);
  while (_splashForm == null || _splashForm.IsHandleCreated == false)
  {
    System.Threading.Thread.Sleep(50);
  }
} 
```

也许这些链接也会为您提供一些有用的信息：

[http://www.reflectionit.nl/Articles/Splash.aspx](http://www.reflectionit.nl/Articles/Splash.aspx)

我们以此作为我们自己代码的基础：

[http://www.codeproject.com/Articles/5454/A-Pretty-Good-Splash-Screen-in-C](http://www.codeproject.com/Articles/5454/A-Pretty-Good-Splash-Screen-in-C)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T08:20:31.530

有不同的方式来展示一个新的表格。您可以首先使用 MdiWinForm 您必须将 IsMdiContainer 属性更改为 true 然后在 MainForm 中使用这些代码：

```
 Form2 f2;    

private void button1_Click(object sender, EventArgs e)
{
    if (f2 == null) {
       f2 = new Form2();
       f2.MdiParent = this;
       f2.FormClosed += delegate { f2 = null; };
       f2.Show();
    }
    else {
       f2.Activate();
    }
} 
```

# c# - Accessing Excel Graphs in C#

> ID：10829763
> 
> 赞同：2
> 
> 时间：2012-05-31T08:15:37.857
> 
> 标签：c#, excel, graph, charts

I have a graph (x y graph) with several curves on it in an excel file.
How can i access this graph in a c# application and extract values from the graph?

As an example, given curve 1 and an x value on an excel graph, i want to get the y value on the corresponding curve using a c# windows application. is this possible?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T11:18:53.580

你必须创建一个宏——与图形通信，然后创建你的 csharp 应用程序来与宏通信——你必须使用 excel 的互操作库 ..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T09:17:55.233

您可以使用[EPPlus](http://epplus.codeplex.com/)并获取图表系列的 excel 范围，然后从范围中获取图表数据，如下所示：

```
private List<double> ExtractChartValues(FileInfo excelFile, string sheetName, int drawing, int chartSerie)
{
  ExcelPackage ePack = new ExcelPackage(excelFile);
  ExcelWorksheet ws = ePack.Workbook.Worksheets[sheetName];

  List<double> result = new List<double>();
  ExcelChart ec = (ExcelChart)ws.Drawings[drawing];
  ExcelRange dataRange = ws.Cells[ec.Series[chartSerie].Series];
  foreach (ExcelRangeBase data in dataRange)
  {
    if (data.Value != null)
      result.Add((double)data.Value);
  }
  return result;
} 
```

# css - Can a script convert website colours to be consistent across multiple devices?

> ID：10829764
> 
> 赞同：1
> 
> 时间：2012-05-31T08:15:39.620
> 
> 标签：css, mobile, colors, gamma

I've noticed when checking my site across multiple devices, the colour yellow on the desktop looks orange on another device.

Is there a conversion standard or technique, script or method to convert some colours, or add a filter or any other hack or work around to change the colour across a website depending on device to more closely match particular colours?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T08:20:53.070

您可以使用用户代理来检测正在使用的设备/浏览器，并根据需要应用不同的 css 或通过 javascript 等进行修改。

这是一个在javascript中动态加载css文件的链接：

[http://www.javascriptkit.com/javatutors/loadjavascriptcss.shtml](http://www.javascriptkit.com/javatutors/loadjavascriptcss.shtml)

编辑：这将假设您知道哪些设备/浏览器显示颜色不正确

# html - Toggle two checkboxes with one click and without js

> ID：10829768
> 
> 赞同：3
> 
> 时间：2012-05-31T08:15:58.097
> 
> 标签：html, checkbox, cross-browser

Is there a way to toggle two *combined* checkboxes with one click?

I have a small calander where I want to select weeks with checkboxes. One week can be in two month so I have two checkboxes for the same week. How can I combine them safe?

I'm using this abstract HTML:

```
<label for="aa"><input type="checkbox" id="bb" /></label><br />
<label for="bb"><input type="checkbox" id="aa" /></label> 
```

See my [updated fiddle](http://jsfiddle.net/BeF4f/5) for a full example.

This works fine in Firefox (exept you make a double click) in the IE9 is just the checkbox toggled where you click on.

**Please don't suggest to use JavaScript. I know that this would be very simple.**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T08:20:15.773

只有一个复选框怎么样？我的意思是，只有一个星期，虽然它跨越几个月，但不是整整两个星期！考虑一下您的设计，即 Week Ending 4/5/2012 是在 5 月结束的一周，当然它从 4 月开始，但如果您打算将您的几周放在一个袋子里，如果可以的话，做一些明确的事情。

# java - HttpClient check Kerberos secured webpage. NTLM login didn't work

> ID：10829773
> 
> 赞同：5
> 
> 时间：2012-05-31T08:16:26.713
> 
> 标签：java, httpclient, kerberos

I have to write a program which checks a Kerberos secured site of our company. I try it with HttpClient and get following error:

```
KrbException: Server not found in Kerberos database (7)
    at sun.security.krb5.KrbTgsRep.<init>(KrbTgsRep.java:61)
    at sun.security.krb5.KrbTgsReq.getReply(KrbTgsReq.java:185)
        ... 
```

I have written a NTLM login 5 months ago, but it doesn't work for this Kerberos secured site. I think Nego2 is activated, so it doesn't fall back to NTLM if Kerberos fails.

I read the Kerberos Wikipedia article: [http://en.wikipedia.org/wiki/Kerberos_(protocol)](http://en.wikipedia.org/wiki/Kerberos_%28protocol%29) and I think the problem is that the TGS doesn't find the requested service in the database. I think this because I get a ticket before the error (I think its the TGT).

```
Found ticket for userid@EXAMPLE.COM to go to krbtgt/EXAMPLE.COM@EXAMPLE.COM expiring on Thu May 31 01:35:56 CEST 2012 
```

So the error whould happen at "Client Service Authorization" --> 2\. (see Wikipedia article)

The problem is that the service has to be in the kerberos database, because I can access it with the IE (without login, so single sign on works).

**So my question is:** Why does the TGS not find the server in the Kerberos database, but it works with IE?

**Extra Information**
I tried to get the necessary information on the top but here are all the information because I don't know if I got all necessary information:

OS is Windows 7
Firefox Version 9.0.1
Chrome Version 19.0.1084.52
Safari Version 5.0.2
IE Version 8.0.7600.16385

My Java Code:

```
 System.setProperty("java.security.auth.login.config", "file://c:/temp/jaas.conf");
    System.setProperty("java.security.krb5.conf", "c:/winnt/krb5.ini");
    System.setProperty("sun.security.krb5.debug", "true");
    System.setProperty("javax.security.auth.useSubjectCredsOnly","false");

    DefaultHttpClient httpclient = new DefaultHttpClient();
    try {
        httpclient.getAuthSchemes().register(AuthPolicy.SPNEGO, new SPNegoSchemeFactory());

        Credentials use_jaas_creds = new Credentials() {

            public String getPassword() {
                return null;
            }

            public Principal getUserPrincipal() {
                return null;
            }

        };

        httpclient.getCredentialsProvider().setCredentials(
                new AuthScope(null, -1, null),
                use_jaas_creds);

        HttpUriRequest request = new HttpGet("url.com:port/site"); //Kerberos secured url
        HttpResponse response = httpclient.execute(request);
        HttpEntity entity = response.getEntity();

        System.out.println("----------------------------------------");
        System.out.println(response.getStatusLine());
        System.out.println("----------------------------------------");
        if (entity != null) {
            System.out.println(EntityUtils.toString(entity));
        }
        System.out.println("----------------------------------------");

        // This ensures the connection gets released back to the manager
        EntityUtils.consume(entity); 
```

jaas.conf

```
com.sun.security.jgss.login {
com.sun.security.auth.module.Krb5LoginModule required client=TRUE;
};
com.sun.security.jgss.initiate {
com.sun.security.auth.module.Krb5LoginModule required client=TRUE;
};
com.sun.security.jgss.accept {
com.sun.security.auth.module.Krb5LoginModule required client=TRUE;
}; 
```

krb5.ini

```
[logging]
 default = FILE:log/krb5libs.log
 kdc = FILE:log/krb5kdc.log
 admin_server = FILE:log/kadmind.log

[libdefaults]
 ticket_lifetime = 24000
 default_realm = EXAMPLE.COM
 dns_lookup_realm = false
 dns_lookup_kdc = false

[realms]
 EXAMPLE.COM = {
  kdc = url
  admin_server = url
 }

[domain_realm]
 url.com = EXAMPLE.COM

[kdc]
 profile = /var/kerberos/krb5kdc/kdc.conf

[appdefaults]
 pam = {
   debug = false
   ticket_lifetime = 36000
   renew_lifetime = 36000
   forwardable = true
   krb4_convert = false
 } 
```

Hole Log file from a test run:

```
log4j:WARN No appenders could be found for logger (org.apache.http.impl.conn.BasicClientConnectionManager).
log4j:WARN Please initialize the log4j system properly.
Kerberos-Benutzername [user]: user
Kerberos-Passwort für user: *******
Using builtin default etypes for default_tkt_enctypes
default etypes for default_tkt_enctypes: 3 1 23 16 17.
Using builtin default etypes for default_tkt_enctypes
default etypes for default_tkt_enctypes: 3 1 23 16 17.
>>> KrbAsReq calling createMessage
>>> KrbAsReq in createMessage
>>> KrbKdcReq send: kdc=kdcurl UDP:88, timeout=30000, number of retries =3, #bytes=155
>>> KDCCommunication: kdc=kdcurl UDP:88, timeout=30000,Attempt =1, #bytes=155
>>> KrbKdcReq send: #bytes read=220
>>> KrbKdcReq send: #bytes read=220
>>> KDCRep: init() encoding tag is 126 req type is 11
>>>KRBError:
     sTime is Thu May 31 08:46:29 CEST 2012 1338446789000
     suSec is 51983
     error code is 25
     error Message is Additional pre-authentication required
     realm is EXAMPLE.COM
     sname is krbtgt/EXAMPLE.COM
     eData provided.
     msgType is 30
>>>Pre-Authentication Data:
     PA-DATA type = 11
     PA-ETYPE-INFO etype = 23
>>>Pre-Authentication Data:
     PA-DATA type = 2
     PA-ENC-TIMESTAMP
>>>Pre-Authentication Data:
     PA-DATA type = 15
AcquireTGT: PREAUTH FAILED/REQUIRED, re-send AS-REQ
Using builtin default etypes for default_tkt_enctypes
default etypes for default_tkt_enctypes: 3 1 23 16 17.
Pre-Authentication: Set preferred etype = 23
>>>KrbAsReq salt is EXAMPLE.COMuser
Pre-Authenticaton: find key for etype = 23
AS-REQ: Add PA_ENC_TIMESTAMP now
>>> EType: sun.security.krb5.internal.crypto.ArcFourHmacEType
>>> KrbAsReq calling createMessage
>>> KrbAsReq in createMessage
>>> KrbKdcReq send: kdc=kdcurl UDP:88, timeout=30000, number of retries =3, #bytes=219
>>> KDCCommunication: kdc=kdcurl UDP:88, timeout=30000,Attempt =1, #bytes=219
>>> KrbKdcReq send: #bytes read=100
>>> KrbKdcReq send: #bytes read=100
>>> KDCRep: init() encoding tag is 126 req type is 11
>>>KRBError:
     sTime is Thu May 31 08:46:29 CEST 2012 1338446789000
     suSec is 114485
     error code is 52
     error Message is Response too big for UDP, retry with TCP
     realm is EXAMPLE.COM
     sname is krbtgt/EXAMPLE.COM
     msgType is 30
>>> KrbKdcReq send: kdc=kdcurl TCP:88, timeout=30000, number of retries =3, #bytes=219
>>>DEBUG: TCPClient reading 3277 bytes
>>> KrbKdcReq send: #bytes read=3277
>>> KrbKdcReq send: #bytes read=3277
>>> EType: sun.security.krb5.internal.crypto.ArcFourHmacEType
>>> KrbAsRep cons in KrbAsReq.getReply user
Using builtin default etypes for default_tkt_enctypes
default etypes for default_tkt_enctypes: 3 1 23 16 17.
Found ticket for user@EXAMPLE.COM to go to krbtgt/EXAMPLE.COM@EXAMPLE.COM expiring on Thu May 31 18:46:29 CEST 2012
Entered Krb5Context.initSecContext with state=STATE_NEW
Service ticket not found in the subject
>>> Credentials acquireServiceCreds: same realm
Using builtin default etypes for default_tgs_enctypes
default etypes for default_tgs_enctypes: 3 1 23 16 17.
>>> CksumType: sun.security.krb5.internal.crypto.RsaMd5CksumType
>>> EType: sun.security.krb5.internal.crypto.ArcFourHmacEType
>>> KrbKdcReq send: kdc=kdcurl UDP:88, timeout=30000, number of retries =3, #bytes=3298
>>> KDCCommunication: kdc=kdcurl UDP:88, timeout=30000,Attempt =1, #bytes=3298
>>> KrbKdcReq send: #bytes read=110
>>> KrbKdcReq send: #bytes read=110
>>> KDCRep: init() encoding tag is 126 req type is 13
>>>KRBError:
     sTime is Thu May 31 08:46:29 CEST 2012 1338446789000
     suSec is 192613
     error code is 7
     error Message is Server not found in Kerberos database
     realm is EXAMPLE.COM
     sname is HTTP/url.com:port
     msgType is 30
KrbException: Server not found in Kerberos database (7)
    at sun.security.krb5.KrbTgsRep.<init>(KrbTgsRep.java:61)
    at sun.security.krb5.KrbTgsReq.getReply(KrbTgsReq.java:185)
    at sun.security.krb5.internal.CredentialsUtil.serviceCreds(CredentialsUtil.java:294)
    at sun.security.krb5.internal.CredentialsUtil.acquireServiceCreds(CredentialsUtil.java:106)
    at sun.security.krb5.Credentials.acquireServiceCreds(Credentials.java:562)
    at sun.security.jgss.krb5.Krb5Context.initSecContext(Krb5Context.java:594)
    at sun.security.jgss.GSSContextImpl.initSecContext(GSSContextImpl.java:230)
    at sun.security.jgss.GSSContextImpl.initSecContext(GSSContextImpl.java:162)
    at sun.security.jgss.spnego.SpNegoContext.GSS_initSecContext(SpNegoContext.java:851)
    at sun.security.jgss.spnego.SpNegoContext.initSecContext(SpNegoContext.java:309)
    at sun.security.jgss.GSSContextImpl.initSecContext(GSSContextImpl.java:230)
    at sun.security.jgss.GSSContextImpl.initSecContext(GSSContextImpl.java:162)
    at org.apache.http.impl.auth.GGSSchemeBase.generateGSSToken(GGSSchemeBase.java:99)
    at org.apache.http.impl.auth.SPNegoScheme.generateToken(SPNegoScheme.java:80)
    at org.apache.http.impl.auth.GGSSchemeBase.authenticate(GGSSchemeBase.java:155)
    at org.apache.http.impl.auth.SPNegoScheme.authenticate(SPNegoScheme.java:75)
    at org.apache.http.client.protocol.RequestAuthenticationBase.authenticate(RequestAuthenticationBase.java:125)
    at org.apache.http.client.protocol.RequestAuthenticationBase.process(RequestAuthenticationBase.java:83)
    at org.apache.http.client.protocol.RequestTargetAuthentication.process(RequestTargetAuthentication.java:80)
    at org.apache.http.protocol.ImmutableHttpProcessor.process(ImmutableHttpProcessor.java:109)
    at org.apache.http.protocol.HttpRequestExecutor.preProcess(HttpRequestExecutor.java:176)
    at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:516)
    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:906)
    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:805)
    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:784)
    at mypackage.ClientKerberosAuthentication.main(ClientKerberosAuthentication.java:152)
Caused by: KrbException: Identifier doesn't match expected value (906)
    at sun.security.krb5.internal.KDCRep.init(KDCRep.java:133)
    at sun.security.krb5.internal.TGSRep.init(TGSRep.java:58)
    at sun.security.krb5.internal.TGSRep.<init>(TGSRep.java:53)
    at sun.security.krb5.KrbTgsRep.<init>(KrbTgsRep.java:46)
    ... 25 more
----------------------------------------
HTTP/1.1 401 Unauthorized
----------------------------------------
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Draft//EN">
<HTML>
<HEAD>
<TITLE>Error 401--Unauthorized</TITLE>
</HEAD>
<BODY bgcolor="white">
<FONT FACE=Helvetica><BR CLEAR=all>
<TABLE border=0 cellspacing=5><TR><TD><BR CLEAR=all>
<FONT FACE="Helvetica" COLOR="black" SIZE="3"><H2>Error 401--Unauthorized</H2>
</FONT></TD></TR>
</TABLE>
<TABLE border=0 width=100% cellpadding=10><TR><TD VALIGN=top WIDTH=100% BGCOLOR=white><FONT FACE="Courier New"><FONT FACE="Helvetica" SIZE="3"><H3>From RFC 2068 <i>Hypertext Transfer Protocol -- HTTP/1.1</i>:</H3>
</FONT><FONT FACE="Helvetica" SIZE="3"><H4>10.4.2 401 Unauthorized</H4>
</FONT><P><FONT FACE="Courier New">The request requires user authentication. The response MUST include a WWW-Authenticate header field (section 14.46) containing a challenge applicable to the requested resource. The client MAY repeat the request with a suitable Authorization header field (section 14.8). If the request already included Authorization credentials, then the 401 response indicates that authorization has been refused for those credentials. If the 401 response contains the same challenge as the prior response, and the user agent has already attempted authentication at least once, then the user SHOULD be presented the entity that was given in the response, since that entity MAY include relevant diagnostic information. HTTP access authentication is explained in section 11.</FONT></P>
</FONT></TD></TR>
</TABLE>

</BODY>
</HTML>

---------------------------------------- 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-03T11:23:42.590

它行不通。

1.  Active Directory 不使用 SPN 中的任何端口。不知道那些愚蠢的东西是从哪里进入 HttpClient 的。
2.  在 Active Directory 中没有为您的目标主机注册 SPN。

回答您的问题：

1.  一点也不，只有[服务类和主机名是强制的](http://msdn.microsoft.com/en-us/library/windows/desktop/ms676924%28v=vs.85%29.aspx)。服务类已经标识了端口注册的服务，例如 LDAP、HTTP、FTP 等。我们的森林中有数十万个 SPN。他们都没有端口。例如，我会做大量工作来注册 HTTP 服务器的每个端口实例。AD 必须只知道目标主机。它将相应地加密服务票证。这使它独一无二。
2.  为什么浏览器会失败？它确实将 SPN 构造为`HTTP/<FQDN>`. 只要这个目录存在，一切都会顺利。

当我尝试 HTTPClient 时，我从未对糟糕的 SPNEGO 支持感到满意。当我拿到手的时候，我想重写那些东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-22T17:19:11.287

我创建了一个小工具来简化将 httpclient 3 连接到 kerberos（无外部配置文件），您可能想尝试一下。 [https://github.com/DovAmir/httpclientAuthHelper](https://github.com/DovAmir/httpclientAuthHelper)

```
DefaultHttpClient httpclient = new DefaultHttpClient();
AuthUtils.securityLogging(SecurityLogType.KERBEROS,true);
CredentialsUtils.setKerberosCredentials(client, new UsernamePasswordCredentials("xxx", "xxx"), "domain", "kdc");
client.executeMethod(httpget); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-20T04:12:03.793

我找到了解决这个问题的方法。
只需在 SPNegoSchemeFactory 对象的构造函数中添加一个参数（true）。

```
 httpclient.getAuthSchemes().register(AuthPolicy.SPNEGO, new SPNegoSchemeFactory(true)); 
```

这将使您的名字*HTTP/url.com:port*变为*HTTP/url.com*。
感谢这个jira：[https ://issues.apache.org/jira/browse/HTTPCLIENT-966?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel](https://issues.apache.org/jira/browse/HTTPCLIENT-966?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel)

# php - mysql error during inserting a image in mysql database

> ID：10829775
> 
> 赞同：1
> 
> 时间：2012-05-31T08:16:34.727
> 
> 标签：php, mysql, html, css

I am working on a website and my task is to take product image from user and store that image in the database..i am using mysql database. My code for html form is as:-

```
 <FORM action="testimage1.php" ENCTYPE="multipart/form-data" method="post">
              <div style="font:bold 10px arial,serif;" >Product Name*</div>
              <input type="text" name="myuserName" maxlength="50" /><br />
             <div style="font:bold 10px arial,serif;" >Upload a photo</div>
               <input name="uploadimage" type="file" /></br>
              <div style="font:bold 10px arial,serif;">Product Description:</div> 
              <input type="text" name="product" value=""></br>
              <input id="submit" type="submit" value="submit" /><br />
     </FORM> 
```

My code for testimage1.php is as:-

```
 require_once("dbconnect.inc.php");                       
    $db_name="thinstrokes";                                     //for localhost databasename
     $tbl_name="product";
     $db_selected=mysql_select_db("$db_name")or die("cannot select DB");

    $myusername=$_POST['myusername']; 
    $mypassword=$_POST['product'];
    $filename=$_FILES['uploadimage']['tmp_name']; 
    $imgData = file_get_contents($filename);
    $size = getimagesize($filename);
    $sql = "INSERT INTO product
    (productname, image_id , image_type ,image, image_size, image_name,   productdesc)VALUES
    ('$myusername','11', '{$size['mime']}', '{$imgData}', '{$size[3]}', 
     '{$_FILES['userfile']['name']}','$productdesc')";
    $result=mysql_query($sql) or die("error in uploading/*"); 
```

and i am getting an error as:-error in uploading/* how can i correct it?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T08:27:15.653

在将其放入查询之前，您需要逃避`$imgData`和***其他一切。***`mysql_real_escape_string`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T08:28:43.020

您需要使用[绑定](http://www.php.net/manual/en/mysqli-stmt.bind-param.php)变量。首先，您对[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)攻击持开放态度。

假设有人制作了一个文件名`\';DROP product;`并将其上传...

话虽如此，将二进制数据内联到查询中并不会在 99% 的时间里起作用。

对于绑定参数，您的查询变成这样，您调用 bind_parm 将数据附加到每个？。

```
$sql = "INSERT INTO product (productname, image_id , image_type ,image, image_size, image_name, productdesc) VALUES (?,?,?,?,?,?,?)"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T08:31:54.413

首先，我认为您不应该将图像直接上传到 Mysql。而是使用目录并将所有内容放在那里。所以说尝试这样的事情：

```
//target to the path of my files
$target_path = "uploads/product_images/";
if(!is_dir($target_path)) mkdir($target_path);
$uploadfile = $target_path . basename($_FILES['userfile']['name']);

//Move the uploaded file to $taget_path
(move_uploaded_file($_FILES['userfile']['tmp_name'], $uploadfile)); 
```

然后您可以使用以下命令访问上传的文件：

```
echo "<a href=" . $target_path . basename($row['userfile']) . ">
     {$row['userfile']}</a>"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T08:33:09.417

尝试改变这一点：

```
$sql = "INSERT INTO product
(productname, image_id , image_type ,image, image_size, image_name, productdesc)VALUES
('$myusername','11', '{$size['mime']}', '{$imgData}', '{$size[3]}', 
'{$_FILES['userfile']['name']}','$productdesc')"; 
```

有了这个：

```
$size_mime = mysql_real_escape_string($size['mime']);
$size3 = mysql_real_escape_string($size[3]);
$filename = mysql_real_escape_string($_FILES['userfile']['name']);
$sql = "INSERT INTO product
(productname, image_id , image_type ,image, image_size, image_name, productdesc) VALUES
('{$myusername}','11', '{$size_mime}', '{$imgData}', '{$size3}', 
'{$filename}','$productdesc')"; 
```

并编辑：

```
$myusername=$_POST['myusername']; 
$mypassword=$_POST['product'];
$filename=$_FILES['uploadimage']['tmp_name']; 
```

有了这个：

```
$myusername = mysql_real_escape_string($_POST['myusername']); 
$mypassword = mysql_real_escape_string($_POST['product']);
$filedata = mysql_real_escape_string($_FILES['uploadimage']['tmp_name']); 
```

**你应该绝对避免sql注入！**

# c++ - Should I use std::unique_ptr in a std::vector member variable in my class?

> ID：10829781
> 
> 赞同：7
> 
> 时间：2012-05-31T08:16:43.977
> 
> 标签：c++, stl, c++11, smart-pointers, visual-c++-2012

Imagine a `class C` that has a member variable `m_MyList` of type `std::vector` in which I want to store objects of type `MyClass`. `C` has two functions that add or remove objects in `m_MyList`. `m_MyList` should also be made accessible for consumers of `C` as they need to read the collection of `MyClass` objects. The external reader of the collection will have no means to change the collection, thus the `MyClass` objects are owned only by `C`.

Now my question: In C++11 style, what is the best T to store in the vector? The possibilities seem to be:

*   `std::vector<MyClass>`
*   `std::vector<MyClass*>`
*   `std::vector<unique_ptr<MyClass>>`, using `std:move` to push the `unique_ptr` into the `vector`

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-31T08:19:10.993

如果`MyClass`对象由 拥有`C`，那么最好的选择是最简单的：

```
std::vector<MyClass> 
```

我可以看到在这里使用的唯一原因`std::unique_ptrs`是如果您需要保留指向基类的指针以实现多态性。在这种情况下，unique_ptrs 用于在向量销毁时释放资源。但是`C`接口不应该将所有权转移给客户端。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-31T08:21:54.220

`std::vector<MyClass*>`如果 C 拥有对象，则原始指针 ( ) 不正确。其他两个与以下权衡非常相似：

*   `std::vector<MyClass>`- 要求 MyClass 是可复制和/或可移动的
*   `std::vector<unique_ptr<MyClass>>`- 需要（额外的）动态分配

在容器上执行的操作类型也可能是相关的。举一个极端的例子，如果 MyClass 很大并且容器被反复洗牌，`unique_ptr`那将是更好的选择。

# python - how to group a data in python

> ID：10829782
> 
> 赞同：3
> 
> 时间：2012-05-31T08:16:52.087
> 
> 标签：python

I have a file with data like:

```
 Entry   Freq.
    2     4.5
    3     3.4
    5     4.9
    8     9.1
    12    11.1
    16    13.1
    18    12.2
    22    11.2 
```

now the problem I am trying to solve is: I want to make it a grouped data (with range 10) based on the Entry and want to add up the frequencies falling within the range. e.g. for above table if I group it then it should be like:

```
 Range   SumFreq.
     0-10    21.9(i.e. 4.5 + 3.4 + 4.9 + 9.1)
     11-20   36.4 
```

I reached upto column separation with following code but can't be able to perform range separation thing: my code is:

```
inp = ("c:/usr/ovisek/desktop/file.txt",'r').read().strip().split('\n')
for line in map(str.split,inp):
    k = int(line[0])
    l = float(line[-1]) 
```

so far is fine but how could I be able to group the data in 10 range.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T08:25:10.237

一种方法是 [ab] 使用整数除法将为您提供正确的 bin 的事实：

```
import collections
bin_size = 10
d = collections.defaultdict(float)
for line in map(str.split,inp):
    k = int(line[0])
    l = float(line[-1])
    d[bin_size * (k // bin_size)] += l 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T08:25:53.007

怎么样，只是在那里添加你的代码：

```
def group_data(range):
    grouped_data = {}
    inp = ("c:/usr/ovisek/desktop/file.txt",'r').read().strip().split('\n')
    for line in map(str.split,inp):
        k = int(line[0])
        l = float(line[-1])
        range_value = k // range
        if grouped_data.has_key(range_value):
            grouped_data[range_value]['freq'] = groped_data[range_value]['freq'] + l
        else:
            grouped_data[range_value] = {'freq':l, 'value':[str(range_value * range) + ':' + str((range_value + 1) * range )]}
    return grouped_data 
```

这应该给你一个字典，如：

```
{1 : {'value':'0-10', 'freq':21.9} , .... } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T08:34:15.660

这应该让你开始，测试很好：

```
inp = open("/tmp/input.txt",'r').read().strip().split('\n')
interval = 10
index = 0
resultDict = {}
for line in map(str.split,inp):
        k = int(line[0])
        l = float(line[-1])
        rangeNum = (int)  ((k-1)/10 )
        rangeKeyName = str(rangeNum*10+1)+"-"+str((rangeNum+1)*10)
        if(rangeKeyName in resultDict):
                resultDict[rangeKeyName] += l
        else:
                resultDict[rangeKeyName] = l

print(str(resultDict)) 
```

会输出：

```
{'21-30': 11.199999999999999, '11-20': 36.399999999999999, '1-10': 21.899999999999999} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-31T08:57:02.150

你可以这样做：

```
fr = {}
inp = open("file.txt",'r').read().strip().split('\n')
for line in map(str.split,inp):
    k = int(line[0])
    l = float(line[-1])
    key = abs(k-1) / 10 * 10

    if fr.has_key(key):
        fr[key] += l
    else:
        fr[key] = l

for k in sorted(fr.keys()):
    sum = fr[k]
    print '%d-%d\t%f' % (k+1 if k else 0, k+10, sum) 
```

输出：

```
0-10    21.900000
11-20   36.400000
21-30   11.200000 
```

# android - 将 facebook sdk 添加到 Android 项目时出错

> ID：10829784
> 
> 赞同：0
> 
> 时间：2012-05-31T08:16:56.157
> 
> 标签：android

我想创建一个应用程序登录并将照片上传到 facebook。我在以下位置下载了 facebook android sdk：[https](https://github.com/facebook/facebook-android-sdk) ://github.com/facebook/facebook-android-sdk 我也按照该教程完成了：[https://developers.facebook .com/docs/mobile/android/sso/](https://developers.facebook.com/docs/mobile/android/sso/) 但是在第 1 步中：当我创建一个 facebook sdk 项目时，它在 Facebook 类中部分显示错误：

```
 @Override
    public void onServiceConnected(ComponentName className, IBinder service) {
        messageSender = new Messenger(service);
        refreshToken();
    }

    @Override
    public void onServiceDisconnected(ComponentName arg) {
        serviceListener.onError(new Error("Service disconnected"));
        // We returned an error so there's no point in
        // keeping the binding open.
        applicationsContext.unbindService(TokenRefreshServiceConnection.this);
    } 
```

图片错误： http: [//nn7.upanh.com/b1.s28.d1/249400dcc8b86b740a9fab6679a809e3_45509157.project2.png](http://nn7.upanh.com/b1.s28.d1/249400dcc8b86b740a9fab6679a809e3_45509157.project2.png)

我没有解决这个问题，所以我不能做下一步。:(

你能帮助我吗。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T08:27:58.460

你需要做两件事：

1.  将 facebook sdk 链接到您的项目。
2.  将`com_facebook_android`库链接到您的项目。

您可能还需要清理您的项目，并且可能使用“自动修复项目属性”工具。如果仍然有错误，甚至可以重新启动 Eclipse。

# java - 重新格式化日期对象 (Java)

> ID：10829785
> 
> 赞同：2
> 
> 时间：2012-05-31T08:17:09.583
> 
> 标签：java, date, calendar, date-format

我目前正在开发一个基本的 RSS Feed 程序，该程序在给定可解析的 Twitter 源的情况下显示推文。我目前正在做的是重新格式化日期。当我检索 pubDate 时，它​​以“EEE，d MMM yyyy HH:mm:ss Z”的形式解析。我想要做的是重新格式化它，这样当我在我的 GUI 上显示它时，它会显示为“MM/dd/yyyy HH:mm”。我该怎么做呢？这是必要的代码块：

```
try {
    builder = factory.newDocumentBuilder();
    Document feedDocument = builder.parse(sourceListItem);
    XPathFactory xpfactory = XPathFactory.newInstance();
    XPath xpath = xpfactory.newXPath();
    String countStr = xpath.evaluate("count(/rss/channel/item)", feedDocument);
    int itemCount = Integer.parseInt(countStr);
    for(j=1; j<=itemCount; j++) {
        try {
            String title = xpath.evaluate("/rss/channel/item[" + j + "]/title", feedDocument);
            String link = xpath.evaluate("/rss/channel/item[" + j + "]/link", feedDocument);
            String date = xpath.evaluate("/rss/channel/item[" + j + "]/pubDate", feedDocument);
            DateFormat df = new SimpleDateFormat("EEE, d MMM yyyy HH:mm:ss Z");
            Calendar c = Calendar.getInstance();
            Date d = df.parse(date);
            DateFormat df2 = new SimpleDateFormat("MM/dd/yyyy HH:mm");
            String dateFormat = df2.format(d);
            c.setTime(d);
            RSSItemClass rssItem = new RSSItemClass(title, link, c);
            rssList.add(rssItem);
        } catch (ParseException e) {
            badSourceList.add(sourceListItem);
        }
    }
} catch (ParserConfigurationException e) {
    badSourceList.add(sourceListItem);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T09:41:37.233

由于您似乎在 GUI 中“显示”了`Calendar`对象的值，因此您不必在发布的方法中格式化日期，而只需在 GUI 中将日期转换为字符串时。

这如何完成取决于您使用的 GUI 框架，但很可能您在某处需要此代码：

```
DateFormat df2 = new SimpleDateFormat("MM/dd/yyyy HH:mm");
String formattedDate = df2.format(calendar.getTime()); 
```

`calendar`你`c`传到哪里 `new RSSItemClass(title, link, c);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T08:22:32.640

您的代码中有该行`String dateFormat = df2.format(d);`，但您没有在`dateFormat`任何地方使用该变量。

# c# - 如何在 .net 4.0 中获取正在运行的任务列表

> ID：10829793
> 
> 赞同：9
> 
> 时间：2012-05-31T08:17:43.870
> 
> 标签：c#, task-parallel-library

我正在尝试获取所有当前正在运行的任务的列表。.net 4.0 tasks api 是否提供这样的功能？或者唯一的选择是明确地将任务存储在单独的集合中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T12:52:47.053

我想你需要[TaskScheduler.GetScheduledTasks](http://msdn.microsoft.com/en-us/library/system.threading.tasks.taskscheduler.getscheduledtasks.aspx)方法，但是：

1.  它受到保护
2.  MSDN 说它应该只用于调试
3.  据我所知，此方法仅由 ThreadPoolTask​​Scheduler 实现，SynchronizationContextTaskScheduler 始终返回 null

所以我认为你应该尝试实现[自己的 TaskScheduler](http://msdn.microsoft.com/en-us/library/ee789351.aspx)来实现你的目标。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T09:54:52.870

创建任务时，默认情况下该任务被安排在[线程池](http://msdn.microsoft.com/en-us/library/y5htx827%28v=vs.100%29.aspx)线程上运行。因此，您可以使用[ThreadPool.GetMaxThreads](http://msdn.microsoft.com/en-us/library/system.threading.threadpool.getmaxthreads%28v=vs.100%29.aspx)和[ThreadPool.GetAvailableThreads](http://msdn.microsoft.com/en-us/library/system.threading.threadpool.getavailablethreads%28v=vs.100%29.aspx)方法获取正在运行的任务数。

```
 private static int GetWorkingThreads() {
        int maxThreads;
        int completionPortThreads;
        ThreadPool.GetMaxThreads(out maxThreads, out completionPortThreads);

        int availableThreads;
        ThreadPool.GetAvailableThreads(out availableThreads, out completionPortThreads);

        return maxThreads - availableThreads;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T08:09:10.117

为什么要查找正在运行的任务列表？除了调试之外，您不必使用此信息。在任何情况下，计划执行的任务列表与实际执行的任务之间都存在差异。

正如 Rusted 所写，您可以从 TaskScheduler.GetScheduledTasks 方法中获取*计划任务的数量。*该方法是抽象的，因此它必须由所有 TaskScheduler 实现。

实际*执行*的任务数量取决于 TaskScheduler 的实现。默认任务调度程序使用线程池，在这种情况下，您应该检查[ThreadPool.GetAvailableThreads](http://msdn.microsoft.com/en-us/library/system.threading.threadpool.getavailablethreads)和[ThreadPool.GetMaxThreads](http://msdn.microsoft.com/en-us/library/system.threading.threadpool.getavailablethreads)来估计正在执行的任务数。

即使您使用默认的 TaskScheduler，也没有实际的正在运行的任务列表。调度器本质上是把一个任务分配给一个 ThreadPool 并将实际执行留给池（实际上，它调用了 Task.ExecuteEntry 私有方法）。它不需要保留正在运行的任务列表。

如果您希望运行任务信息用于调试目的，您可以利用[TPL 中的 Windows 事件的事件跟踪](http://msdn.microsoft.com/en-us/library/ee517329%28VS.100%29.aspx)。不幸的是，没有记录 Task Started 和 Task Finished 事件。我在使用 dotPeek 浏览 Task.ExecuteEntry 的定义时发现了它们。

我找到了一篇[探索 TPL 事件的](http://naveensrinivasan.com/2010/03/30/exploring-event-tracing-for-windows-etw-within-task-parallel-library-tpl-using-perfmonitor/)文章，但我不确定这是否值得。除非你自己写调试器，否则似乎太麻烦了。

如果只需要获取正在运行的任务列表，也许您应该编写自己的 TaskScheduler 并覆盖 TryExecute 和 TryExecuteInternal 以拦截每个任务的执行并将每个任务放在一个列表中。不过，这可能会变得昂贵，并且您必须定期进行一些清理以从列表中删除已完成的任务，而无需使用延续（最终会出现在列表中）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-31T08:23:19.940

MSDN 上有一篇很好的文章[http://msdn.microsoft.com/en-us/library/ms997649.aspx](http://msdn.microsoft.com/en-us/library/ms997649.aspx) 你需要的一切都描述得很好。

编辑：也许这会有所帮助：

```
using System;
using System.Diagnostics;

class MainClass
{
   public static void Main()
   {
      Process[] allProcs = Process.GetProcesses();

      foreach(Process proc in allProcs)
      {
         ProcessThreadCollection myThreads = proc.Threads;
         Console.WriteLine("process: {0},  id: {1}", proc.ProcessName, proc.Id);

         foreach(ProcessThread pt in myThreads)
         {
            Console.WriteLine("  thread:  {0}", pt.Id);
            Console.WriteLine("    started: {0}", pt.StartTime.ToString());
            Console.WriteLine("    CPU time: {0}", pt.TotalProcessorTime);
            Console.WriteLine("    priority: {0}", pt.BasePriority);
            Console.WriteLine("    thread state: {0}", pt.ThreadState.ToString()); 
         }
      }
   }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-22T10:04:50.723

@HelgeJensen 提出了一个可行的解决方案： [如何监控 .NET TaskSchedulers 中的任务队列（跨 AppDomain）](https://stackoverflow.com/questions/29549854/how-can-i-monitor-the-task-queues-in-the-net-taskschedulers-across-appdomain)

Microsoft 不鼓励使用[GetScheduledTasksForDebugger 方法](https://docs.microsoft.com/en-us/visualstudio/extensibility/debugger/getscheduledtasksfordebugger-method?view=vs-2019) ：

> 此方法不是线程安全的，您不应将它与其他 TaskScheduler 实例同时使用。**仅**当调试器已挂起所有其他线程时，才**从** 调试器调用此方法。

 **我测试了提议的解决方案并且它有效，即使我们可能会在生产代码中使用它遇到崩溃：

```
public static class ScheduledTaskAccess
{
    public static Task[] GetScheduledTasksForDebugger(TaskScheduler ts)
    {
        var mi = ts.GetType().GetMethod("GetScheduledTasksForDebugger", BindingFlags.NonPublic | BindingFlags.Instance);
        if (mi == null)
            return null;
        return (Task[])mi.Invoke(ts, new object[0]);
    }      
} 
```

用法：

```
 Task[] tasks = GetScheduledTasksForDebugger(TaskScheduler.Current);
    int count = tasks.Length; 
```

我们可以看到每个任务的状态： [![获得的任务列表](../Images/534d3c7562b201c6925c9bb36d3e7e90.png)](https://i.stack.imgur.com/7qIS0.png)**

# git - cat-file 标记对象报告致命

> ID：10829797
> 
> 赞同：1
> 
> 时间：2012-05-31T08:17:52.770
> 
> 标签：git

我创建了一个对象标签

```
git tag -a tag_1 -m "test tag" 
```

但是下面的命令报告了一个致命错误：

```
git cat-file -t tag_1^{tag}
fatal: Not a valid object name tag_1^{tag} 
```

但是，以下一个工作正常：

```
git cat-file -t master^{commit}
commit 
```

为什么它报告致命？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T08:32:25.337

用于指定对象的语法[`git cat-file`](http://schacon.github.com/git/git-cat-file.html)是[gitrevisions](http://schacon.github.com/git/gitrevisions.html)中指定的语法。

```
<object> 
```

> 要显示的对象的名称。
> 有关拼写对象名称的更完整列表，请参阅`SPECIFYING REVISIONS`gitrevisions(7) 中的“”部分。

它适用于`<rev>`.

```
<rev>^{<type>}, e.g. v0.99.8^{commit} 
```

> 后缀`^`后跟括在大括号对中的对象类型名称意味着该对象可以是一个标签，并且递归地取消引用该标签，直到找到该类型的对象或该对象不能再被取消引用（在这种情况下，barf）。
> `<rev>^0`是 的简写`<rev>^{commit}`。

在这种情况下，我不确定它是否可以取消引用`tag_1`“直到找到该类型的对象”（因为它已经是一个标签）。

# jquery - jquery mobile 修复了 iOS 4 上的导航栏位置

> ID：10829801
> 
> 赞同：0
> 
> 时间：2012-05-31T08:18:03.870
> 
> 标签：jquery, css, xcode, html, jquery-mobile

我正在使用 jquery mobile 开发一个应用程序，最后要解决的问题是 iOS4 和 iOS5 之间的兼容性。导航栏可以在 iOS5 上使用 position:fixed 轻松修复。但是，在 iOS4 上不起作用！我一直在尝试不同的方法，但没有一个足够可靠。如何像 iOS5 一样在 iOS4 上固定导航栏？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T10:07:29.240

试试这个..

```
<div data-role="navbar" data-position="fixed"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T08:46:59.840

scrollView 插件可以解决问题。没有其他人为我工作

# php - PHP中的“意外'['”错误

> ID：10829803
> 
> 赞同：-1
> 
> 时间：2012-05-31T08:18:07.753
> 
> 标签：php

我有以下 process.php 文件：

```
<html>
<head>
<title> Form Processing  </title>
</head>
<body>
<?php
  //  print _r($_POST)
  $arr=array
  (
  "ana" => "ana123",
  "gogi"=>"2345",
  "vano"=>"3at4"
  );

  $username=$_POST['username'];
  $password=$_POST['password'];
  if(arr[$username] == $password){
  echo " you entered  correct input  for ana ";
  }
  else
  {
  echo " try again "; 

  }

  ?>
  </body>
  </html> 
```

当我运行这段代码时，它写道：

```
Parse error: syntax error, unexpected '[' in C:\xampp\htdocs\datuna\process.php
on line 17 
```

但是错过了哪里[我不明白，我正在尝试检查用户是否输入了正确的用户名和密码，如果您需要，这也是这个文件：

```
<html>
<head>
<title>FORMS</title>
</head>     
<body>
<form action="process.php" method="post">
Username : <input type=text  name=username  value="" /> <br/>
Password : <input type=password   name=password value="" /><br/>
<input type="submit" name=submit value=submit />
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T08:19:21.023

你忘了一个`$`：

```
if( $arr[$username] == $password){
    ^
    |- here 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T08:20:45.023

改变这一行：

```
if(arr[$username] == $password){ 
```

对此：

```
if($arr[$username] == $password){ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-31T08:20:20.883

```
if($arr[$username] == $password){ 
```

错误信息为您提供发生错误的行，只需检查该行。

# java - 使用标题复选框时无法在下一行引入文本

> ID：10829806
> 
> 赞同：0
> 
> 时间：2012-05-31T08:18:20.090
> 
> 标签：java, swing, jtable, jtableheader

我绝对不是最擅长解释问题的人，但让我试试。

我有一个小程序。在`JTabel`我有一列作为复选框。

我只想在标题中添加文本，以便我有一些文本，而不是在下一行中我有复选框。

使用`headerRenderer`setText 对我的事业没有帮助，因为它将测试附加到复选框而不是引入新行。此外，我想避免使用`JPanel`，因为我认为它会给我带来更多问题。

谁能建议我如何完成这项工作？

如果`JPanel`是唯一的选择，有人可以告诉我如何使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T13:29:37.710

Q&A[*如何在 a 中放置`JTableHeader`控件`JTable`？*](https://stackoverflow.com/q/7137786/230513)包括几个重要的注意事项，并展示了一个使用`JToggleButton`. 在这种情况下，您需要一条两行 `JCheckBox`，而没有封闭的复杂性`JPanel`。

您可能会考虑实现接口，`Icon`如此处所示[的](https://stackoverflow.com/a/2834484/230513). `TableCellRenderer`这将允许您利用组件的水平和垂直对齐方式提供的控制。为保持一致性，请使用文本的 UI 属性`JCheckBox`，如 中所示[`SelectAllHeader`](https://stackoverflow.com/a/7137801/230513)。我会尝试渲染一个`JLabel`in `paintIcon ()`，但是`TextLayout`，如图所示[，](https://stackoverflow.com/a/8282330/230513)是获取正确指标的另一种方法。

# ruby-on-rails - Rails：访问时Twitter Bootstrap Buttons获得黑色文本颜色

> ID：10829808
> 
> 赞同：9
> 
> 时间：2012-05-31T08:18:24.337
> 
> 标签：ruby-on-rails, ruby-on-rails-3, twitter-bootstrap, simple-form

我有一个通过 gem ' **twitter-bootstrap-rails** ' 使用 Twitter Bootstrap 的 rails 3.2 应用程序。此外，表单是使用**SimpleForm** gem 创建的。对于一些页面，我使用表单上的 twitter 按钮通过

```
<%= link_to "Back", :back, :class => 'btn btn-warning'%>
<%= form.button :submit, :class => 'btn btn-primary' %> 
```

按钮呈现正常。问题是，在您选择访问链接的按钮之一后，在返回页面时，文本卡在灰色版本上，如下所示的“**返回**”按钮：

![推特按钮](../Images/0095d942a09de7dfddb17d5d41519f12.png)

这会导致问题，尤其是在带有“btn-primary”样式的按钮上，因为文本难以阅读。下面是一个例子：

![编辑按钮](../Images/fb7eb4bc137b5321918f97fb5758be45.png)

想知道什么设置需要更改以及在哪里更改。我预计它应该在**bootstrap_and_overrides.css.less**文件中，但不确定要尝试什么设置。**@linkColorHover**上的测试不起作用。

有什么想法吗 ？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-06-17T07:43:11.227

我为这个问题找到的最佳解决方案是按照上面评论中[@tonymarschall](https://stackoverflow.com/users/1151535/tonymarschall)`scaffolds.css.scss`的建议在`app/assets/stylesheets`目录中删除。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-31T08:25:28.427

您始终可以为项目设置样式`a.btn`，以删除伪类上的装饰，例如`:visited`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-07T14:26:29.647

作为替代方案，您可以使用`button_to`而不是`link_to`在模板中。

因为这会创建一个新表单，所以如果要模拟链接行为，则需要使用`:method => :get`参数。[你可以在这里](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-button_to)找到更多信息。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-11-13T23:44:44.043

几种答案的组合，但只需替换：

```
color: #666; 
```

和：

```
color: white; 
```

在脚手架.css.scss

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-31T08:24:34.047

您应该使用 Firebug 或 Chrome 的开发人员工具来找出您必须在 bootstrap_and_overrides.css.less 中覆盖的 CSS 属性。

看图片有点难判断。

# qt - Qt中线程之间的通信

> ID：10829811
> 
> 赞同：3
> 
> 时间：2012-05-31T08:18:37.670
> 
> 标签：qt, signals-slots, qthread

我正在使用 C++/Qt 中的线程，每个线程都建立和维护一个 QTcpSocket 连接。

问题是当与网络断开连接时，这些线程必须以特定顺序重新连接。这已经可以了，但是我还有另一个问题：我需要知道每个线程是否只有当前线程已断开连接，或者所有线程都已断开连接。

我的第一个想法是向每个线程传递一个对类的引用，我可以在其中存储每个线程的状态并检查其他人的状态。

但后来我有了一个更简单的想法，我想知道它是否可行或不可能：使用 Qt 的插槽和信号。

因此，我拥有的每个线程都来自同一个类，但将不同的数据传递给了 Ctor。所以想法是在该类中创建一个插槽和一个信号，将它们连接起来并发出传递一个 ID 的信号。然后，每个线程的插槽都会被启动......或者我可能完全错了，唯一启动的插槽将是来自发出信号的同一个线程的插槽。

这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T19:10:31.170

首先，信号槽连接是在 QObjects 中的信号和槽之间完成的，而不是在线程之间。好吧，QThread 是一个 QObject，但你真的不应该从 QThread 派生。不要从 QThread 派生，你会没事的。

你要做的是：

1.  *启动*一个或多个 QThreads （不仅仅是构造）。那些 QThreads 只是 Qt 的基类，不要从它们派生。一个启动的原始 QThread 被阻塞，等待一个事件被发布到它的事件队列中。`QThread::run()`调用的默认实现`QEventLoop::exec()`（或等效的）。因此，这些线程在启动后不会消耗任何 CPU 周期。

2.  实例化一堆 QObject。根据需要进行所有信号/插槽连接。

3.  通过调用这些对象将它们移动到一个或多个 QThread `moveToThread(QThread*)`。

如您所见，设置信号槽连接以通常的方式完成，不需要任何特别注意。Qt 为您做所有事情，包括在您在线程之间移动 QObject 时`Qt::DirectConnection`更改连接类型。`Qt::QueuedConnection`

请注意，您不能直接在这些 QObjects 上调用任何方法，因为您可能会从不同的线程这样做，因此由于访问未序列化，会发生各种不好的事情。您必须按照从最快到最慢的顺序执行以下任何一项操作，并且仅此一项。请注意，虽然 #3 总是比 #4 快，但您需要在 #2 和 #3 之间进行基准测试，因为它会有所不同。

1.  将自定义事件发布到 QObject，并在派生的 QObject 的`customEvent(QEvent*)`方法中处理它。

2.  使用信号槽连接，并发出连接到 QObjects 槽的信号。

3.  用于`QMetaMethod::invoke`先前查找的方法。比 #4 更快，因为方法查找只提前完成一次。

4.  使用`QMetaObject::invokeMethod`.

将 QEvents 发布到 QObjects 比使用信号槽调用更快，因为没有调用复制构造函数，并且除了在构造 QEvent 时直接由您完成之外没有编组。

仅当分析/基准测试显示事件发布太慢时，您才想使用`QSharedMemory`. 拥有过多数量的 QThreads 会适得其反，您应该拥有的 CPU 核心数量可能不超过系统上的数量。天真地使用诸如互斥锁或信号量之类的同步原语需要您提交太多线程。您绝对*不*希望每个连接有一个线程！通过使用您已经使用的事件队列，Qt 已经为每个 QObject 提供了一个事件队列互斥锁。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T11:37:14.330

信号和槽连接是在运行时完成的，即您正在连接一个类的特定实例。您不能发出信号并将其“广播”到您班级的每个实例。不同线程之间的信号是可能的，但维护它们可能有点麻烦（[文档](http://doc.qt.io/qt-5/threads-qobject.html#signals-and-slots-across-threads)中对此进行了很好的解释）。

如果我是你，我可能会研究[QSemaphore](http://doc.qt.io/qt-5/qsemaphore.html)或[QSharedMemory](http://doc.qt.io/qt-5/qsharedmemory.html)。

# sql - SQL 查询，where = 另一个表的值

> ID：10829812
> 
> 赞同：13
> 
> 时间：2012-05-31T08:18:38.220
> 
> 标签：sql, sqlite

我想做一个简单的查询，这听起来可能很愚蠢，但我做了很多研究，什么也不懂。

想象一下，我有两个表（table1 和 table2）和两列（table1.column1 和 table2.column2）。

我想做的基本上是这样的：

```
SELECT column1 FROM table1 where table2.column2 = '0' 
```

我不知道这是否可能。

提前致谢，

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-05-31T08:21:16.503

您需要在两个 talbes 之间应用连接，然后您可以应用 where 子句将为您工作

```
select column1 from table1 
   inner join table2 on table1.column = table2.column
   where table2.columne=0 
```

对于加入信息，你可以看到这个

阅读关于**The Code Project 的**这篇原创文章会对您有很大帮助：[SQL 连接的可视化表示](http://www.codeproject.com/KB/database/Visual_SQL_Joins.aspx)。

![替代文字](../Images/586156c0333e66f98351bf8f3807c5d3.png)

在以下位置找到原始版本：[MySQL 中的 JOIN 和 OUTER JOIN 之间的区别](https://stackoverflow.com/questions/5706437/whats-the-difference-between-inner-join-left-join-right-join-full-join-in-mys/6188334#6188334)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-31T08:29:09.020

```
SELECT column1 FROM table1 t1
where exists (select 1 from table2 t2 
    where t1.id = t2.table1_id and t2.column2 = '0') 
```

假设 table2 中的 table1_id 是一个外键，引用 table1 的 id 是主键

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-31T08:24:06.313

两个表之间没有任何自然连接。

你要求

```
Select Houses.DoorColour from Houses, Cars where Cars.AreFourWheelDrive = '1' 
```

您需要考虑为什么要从第一个表中选择任何内容，表 1 和表 2 之间必须有共享的信息，否则连接毫无意义并且可能很危险。

# android - Android Ant 构建——如何针对 JAR 进行编译但将其从 classes.dex 中排除？

> ID：10829815
> 
> 赞同：6
> 
> 时间：2012-05-31T08:18:52.793
> 
> 标签：android, ant

我正在使用 Ant 编译一个 Android APK。APK 将安装在具有 jar 文件（称为 foo.jar）的环境中。因此，APK 在编译期间需要了解 foo.jar，但我不希望它包含在 classes.dex 中（因为它已经可用）。

请注意，这不仅仅是将 jar 放在“libs”目录中的问题。虽然这解决了问题的“编译”部分，但它并没有解决将 jar 排除在 classes.dex 之外的问题。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-05-17T15:09:26.900

-compile 使用了两个路径作为编译的 classpathref，但其中一个不用于 dexing。

```
<target name="-compile" depends="-build-setup, -pre-build, -code-gen, -pre-compile">
    <do-only-if-manifest-hasCode elseText="hasCode = false. Skipping...">
        <!-- merge the project's own classpath and the tested project's classpath -->
        <path id="project.javac.classpath">
            <path refid="project.all.jars.path" />
            <path refid="tested.project.classpath" />
        </path>
        <javac encoding="${java.encoding}"
                source="${java.source}" target="${java.target}"
                debug="true" extdirs="" includeantruntime="false"
                destdir="${out.classes.absolute.dir}"
                bootclasspathref="project.target.class.path"
                verbose="${verbose}"
                classpathref="project.javac.classpath"
                fork="${need.javac.fork}">
            <src path="${source.absolute.dir}" />
            <src path="${gen.absolute.dir}" />
            <compilerarg line="${java.compilerargs}" />
        </javac>
        …
</target> 
```

这些路径是“project.all.jars.path”和“tested.project.classpath”，但路径“tested.project.classpath”在dexing中不使用，所以你可以在预编译目标中修改它，如下所示：

```
<target name="-pre-compile" >
    <path id="tmp">
        <pathelement path="${toString:tested.project.classpath}"/>
        <fileset dir=“${exported.jars.dir}” >
            <include name="*.jar" />
        </fileset>
    </path>
    <path id="tested.project.classpath"><pathelement path="${toString:tmp}"/></path>
    <path id="tmp"/>        
</target> 
```

在这里，您在编译开始之前将导出的 jar 的路径附加到“tested.project.classpath”。您可以将“exported.jars.dir”放入您的 ant.properties 文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T09:03:47.337

将 jar 放在其他目录（例如，`foo/`）并将其添加到编译类路径中怎么样？这样 JAR 就不会“导出”，因此 dex 工具不会对其进行操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-17T07:39:25.167

对我有用的是在编译之前将排除 jar 复制到我的“libs”目录中，在目标“-pre-compile”中，然后在编译后再次从“libs”中删除这些文件，在 taget“-post-compile”中。

笔记：

*   如果我将文件复制到目标“-pre-build”中，它不起作用，它必须是目标“预编译”
*   复制后我必须设置路径“project.all.jars.path”以避免错误

在我粘贴的代码示例中，我需要属性“libs.ads.dir”引用的目录中的 jar 进行编译，但不希望它们包含在我的 jar 中：

```
<target name="-pre-compile">
    <copy todir="${jar.libs.dir}">
        <fileset dir="${libs.ads.dir}"/>
    </copy>

    <path id="project.all.jars.path">
        <fileset dir="${jar.libs.dir}">
            <include name="**/*.jar"/>
        </fileset>
    </path>
</target>

<target name="-post-compile" > 
    <delete>
        <fileset dir="${jar.libs.dir}" casesensitive="yes">
            <present present="both" targetdir="${libs.ads.dir}"/>
        </fileset>
    </delete>  
</target> 
```

# php - 使用 MySQLi 设置字符集

> ID：10829816
> 
> 赞同：19
> 
> 时间：2012-05-31T08:19:04.647
> 
> 标签：php, mysqli

我正在使用 MySQLi 从 MySQL 表中获取阿拉伯语数据。所以我通常以程序风格使用它：

```
mysql_query("SET NAMES 'utf8'"); 
mysql_query('SET CHARACTER SET utf8'); 
```

现在我使用的是 OOP 风格，所以我想看看是否有一些我可以设置的东西而不是上面的？

我只在 PHP 手册中找到了这个，所以我做到了，但是将名称设置为 UTF8 呢？

```
$mysqli->set_charset("utf8"); 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-31T08:24:12.783

~~一样的：~~

~~$mysqli->query("SET NAMES 'utf8'");~~

***从手册：***

> 这是更改字符集的首选方法。不推荐使用 mysqli::query() 来执行 SET NAMES ..。

`$mysqli->set_charset("utf8");`就够了，让mysqli db驱动为你做这件事。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-05-02T13:12:07.503

你应该使用

```
$mysqli->set_charset("utf8"); 
```

*使用 MySQLi 时不要*使用`SET NAMES`或`SET CHARACTER SET`显式使用。当然也不要像这里最初的提问者那样使用两者。这是一个坏主意的原因：

*   调用`SET CHARACTER SET utf8` after`SET NAMES utf8`实际上只是[*撤消*`SET NAMES`了所做的一些工作](https://stackoverflow.com/a/1566908/1709587)。
*   PHP 手册[明确警告我们](http://php.net/manual/en/mysqli.set-charset.php#refsect1-mysqli.set-charset-notes)使用`mysqli_set_charset`，而不是`SET NAMES`：

    > 这是更改字符集的首选方法。不推荐使用 mysqli_query() 设置（如 SET NAMES utf8）。有关更多信息，请参阅 MySQL 字符集概念部分。

*   在引擎盖下，`mysqli_set_charset`它[只是`mysql_set_character_set`](https://github.com/php/php-src/blob/php-7.0.6/ext/mysqli/mysqli_nonapi.c#L956)MySQL C API（或其 mysqlnd 等价物）的包装器。[查看该函数的文档](http://dev.mysql.com/doc/refman/5.7/en/mysql-set-character-set.html)，我们可以看到它和之间的区别`SET NAMES`：

    > 此函数的作用类似于`SET NAMES`语句，但也设置 的值`mysql->charset`，从而影响 使用的字符集`mysql_real_escape_string()`

    换句话说，*将*`$mysqli->set_charset('foo')`尽一切努力`SET NAMES foo`并确保尊重新的编码。诚然，如果您只使用严格扩展 ASCII 的拉丁 1 和 UTF 8 之类的编码（也就是说，它们对所有 ASCII 字符串的编码与它们在 ASCII 中的编码完全相同），那么使用而不是不会破坏任何东西。但是，如果您使用更多不寻常的编码，例如 GBK，那么您最终可能会弄乱您的字符串，甚至引入[绕过](https://stackoverflow.com/a/12118602/1709587).*`mysqli_real_escape_string``SET NAMES``set_charset`[`mysqli_real_escape_string`](https://stackoverflow.com/a/12118602/1709587)*

 *因此，只使用`set_charset`而不是使用是一种好习惯`SET NAMES`。没有什么可以`SET NAMES`做到这`set_charset`一点，并且`set_charset`避免了`mysqli_real_escape_string`行为不正确（甚至不安全）的风险。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2017-10-24T15:39:55.260

你可以使用这个。它非常适合 mysqli 字符集

```
$dbhost     = "localhost";
$dbuser     = "root";
$dbpass     = "dbpass";
$dbname     = "dbname";

$conn = mysqli_connect($dbhost,$dbuser,$dbpass,$dbname);
mysqli_query($conn,"SET CHARACTER SET 'utf8'");
mysqli_query($conn,"SET SESSION collation_connection ='utf8_unicode_ci'"); 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2017-11-21T09:56:09.213

对于程序风格爱好者。

```
// Create connection
$conn = mysqli_connect($servername, $username, $password, $dbname);

/* change character set to utf8 */
mysqli_set_charset($conn,"utf8"); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-05-02T10:43:23.633

```
mysqli_query($conn,"SET NAMES 'latin5'");
```

$conn = 连接字符串*

# php - 从性能的角度来看，注册表模式更有效还是自动加载器用于类实例化？

> ID：10829818
> 
> 赞同：2
> 
> 时间：2012-05-31T08:19:14.350
> 
> 标签：php, design-patterns

在注册表模式中，我们只创建我们需要的对象，例如：

```
public function createAndStoreObject( $object, $key )
    {
        require_once( $object . '.class.php' );
        $this->objects[ $key ] = new $object( $this );
    } 
```

然后通过它的密钥访问它。
在自动加载器中，我们执行以下操作：

```
<?php

class autoloader {

        public static function moduleautoloader($class) {
                $path = $_SERVER['DOCUMENT_ROOT'] . "/modules/{$class}.php";
                if (is_readable($path)) {
                        require $path;
                }
        }

        public static function daoautoloader($class) {
                $path = $_SERVER['DOCUMENT_ROOT'] . "/dataobjects/{$class}.php";
                if (is_readable($path))
                        require $path;
        }

        public static function includesautoloader($class) {
                $path = $_SERVER['DOCUMENT_ROOT'] . "/includes/{$class}.php";
                if (is_readable($path))
                        require $path;
        }

}
spl_autoload_register('autoloader::includesautoloader');
spl_autoload_register('autoloader::daoautoloader');
spl_autoload_register('autoloader::moduleautoloader');
?> 
```

然后它的使用如下：

当我们要创建一个对象时，它应该通过包含、模块或数据对象文件夹来找到类，然后如果它存在，则应该创建对象。
对于一个巨大的应用程序，我们必须通过注册表方法还是在这里使用自动加载器有一些好处？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T08:26:34.667

使用`require_once`可以说比自动加载要快，尤其是当它只被调用一次时。

但是拥有一个自动加载器可以让你从显式加载你需要的所有类中解放出来，它就在那里。而且它是按需提供的，因此如果您决定更改代码并且不再需要特定类，您不必记住停止包含类定义文件。

顺便说一句，根据您的代码，我建议将它们放入一个自动加载器功能中：

```
function my_autoload($class) {
    static $docroot = $_SERVER['DOCUMENT_ROOT'];

    // alternative to goto block
    do {
        $path = "$docroot/modules/$class.php";
        if (file_exists($path)) {
            break;
        }
        $path = "$docroot/dataobjects/$class.php";
        if (file_exists($path)) {
            break;
        }
        $path = "$docroot/daoobjects/$class.php";
        if (file_exists($path)) {
            break;
        }
        // we can't find the file, so return
        return;
    } while (false);
    // a path exists, so load it
    require_once($path);
}

spl_autoload_register('my_autoload'); 
```

这将比具有三个单独的函数执行得更好。

为了提高效率，您可以考虑使用命名空间；它们形成了一个逻辑目录结构，使自动加载器更容易制作。

# java - Java 日期解析：区分 28/10/2012 2:00 CET 和 28/10/2012 2:00 CEST

> ID：10829820
> 
> 赞同：2
> 
> 时间：2012-05-31T08:19:17.627
> 
> 标签：java, parsing, date

我有一个日期列表作为字符串，即：

```
28/10/2012 00:00
28/10/2012 01:00
28/10/2012 02:00
28/10/2012 02:00
28/10/2012 03:00 
```

（同一小时两次是因为 DST）

我需要确保每个日期之间正好有一个小时。

这里的问题是第一个 28/10/2012 02:00 是 CEST，而第二个是 CET。区分它们很容易，因为第一个是 CEST，而第二个是 CET。困难的部分是如何指定`SimpleDateFormat`（或另一个日期解析类）该字符串表示 CEST/CET 时间，以便我可以获得正确的`Date`对象？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T08:31:38.587

考虑下面的例子，我认为它有你的答案

**`convert String to Date with SimpleDateFormat considering CET CEST`**

```
public class DatesAndTimesStackOverflow {

final static SimpleDateFormat sdf;
final static TimeZone tz;
static {
    tz = TimeZone.getTimeZone( "Europe/Paris" );
    sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss zzz");
    sdf.setTimeZone(tz);
}

public static void main(String[] args) {

    // october clock change should be the following:
    outputDateInfo("2012-10-28 02:00:00 CEST");
    outputDateInfo("2012-10-28 02:30:00 CEST");
    outputDateInfo("2012-10-28 02:00:00 CET");
    outputDateInfo("2012-10-28 02:30:00 CET");
    outputDateInfo("2012-10-28 03:00:00 CET");
    outputDateInfo("2012-10-28 03:30:00 CET");
    outputDateInfo("2012-10-28 04:00:00 CET");
}

private static void outputDateInfo(String theDate) {
    try {
        output("------------------------------------------------------------------------------");
        Date d = sdf.parse(theDate);
        Calendar c = GregorianCalendar.getInstance(tz);
        c.setTimeInMillis(d.getTime());
        TimeZone tzCal = c.getTimeZone();

        output("String:                       " + theDate);
        output("");
        output("Date:                         " + d);                   // toString uses current system TimeZone
        output("Date Millis:                  " + d.getTime());
        output("Cal Millis:                   " + c.getTimeInMillis());
        output("Cal To Date Millis:           " + c.getTime().getTime());
        output("Cal TimeZone Name:            " + tzCal.getDisplayName());
        output("Cal TimeZone ID:              " + tzCal.getID());
        output("Cal TimeZone DST Name:        " + tzCal.getDisplayName(true, TimeZone.SHORT));
        output("Cal TimeZone Standard Name:   " + tzCal.getDisplayName(false, TimeZone.SHORT));
        output("In DayLight:                  " + tzCal.inDaylightTime(d));

        output("");
        output("Day Of Month:                 " + c.get(Calendar.DAY_OF_MONTH));
        output("Month Of Year:                " + c.get(Calendar.MONTH));
        output("Year:                         " + c.get(Calendar.YEAR));

        output("Hour Of Day:                  " + c.get(Calendar.HOUR_OF_DAY));
        output("Minute:                       " + c.get(Calendar.MINUTE));
        output("Second:                       " + c.get(Calendar.SECOND));

        // check to see if this converts back to correct string
        String reformat = sdf.format(c.getTime());
        if( reformat.equals(theDate) ) {
            output("ReConvert:                    " + reformat + " OK");
        } else {
            output("ReConvert:                    " + reformat + " <-------- Error.  The converted date is different");
        }

    } catch (ParseException ex) {
        output("Cannot parse this date");
    }
}

private static void output(String message) {
    System.out.println(message);
}
} 
```

# android - 将视频从 Android 流式传输到 pc，并在具有实时传感器数据的应用程序中使用它

> ID：10829822
> 
> 赞同：0
> 
> 时间：2012-05-31T08:19:30.017
> 
> 标签：android, flash, video, stream, flash-media-server

对于这个项目，我应该制作一个将视频流式传输到我的 PC 的 android 应用程序。在我的电脑上，我必须显示此视频流并根据传感器数据编辑视频的大小（高度和宽度）（当玻璃杯已满时，视频必须以全尺寸显示，当玻璃杯空时视频必须以小比例显示）。我正在寻找闪存选项（使用 FMS），但由于这是一个学校项目，我们没有太多预算。我应该使用 Flash 来解决这个问题吗？是否有从 android 流式传输到 pc 的演示（flash 或替代品）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T08:47:13.983

从 android 流式传输到 pc 的演示可以在这里看到：http:
[//tech2.in.com/how-to/android/how-to-stream-video-from-your-android-device-to-a-pc -反之亦然/239532](http://tech2.in.com/how-to/android/how-to-stream-video-from-your-android-device-to-a-pc-and-vice-versa/239532)

它使用 VLC 进行流式传输，并且可以使用源代码。

另请查看以下帖子以获取相关信息：
[https :](https://stackoverflow.com/a/6933684/200272)
[//stackoverflow.com/a/6933684/200272 将视频从 Android 相机流式传输到服务器](https://stackoverflow.com/questions/2550847/streaming-video-from-android-camera-to-server)

亲切的问候，
博

# c# - 实体框架数据库优先与 SQL Server

> ID：10829829
> 
> 赞同：1
> 
> 时间：2012-05-31T08:19:55.383
> 
> 标签：c#, sql-server, entity-framework

我会尝试解释我的问题，尽管说实话我什至无法理解。在我的数据库中的几个表中进行了许多更改之后，现在我尝试创建一个外键，并且在更新 EDMX 时出现此错误。

> gHOP.msl(410,10)：错误 3007：从第 410、1511 行开始映射片段时出现问题
> ：非主键列 [UserGUID] 在两个片段中被映射到不同的概念侧属性 - 数据不一致是可能是因为可以独立修改相应的概念性侧面属性。
> 
> gHOP.msl(1511,6)：错误 3012：从第 410、1511 行开始映射片段时出现问题：Itinerary.UserGUID 中可能存在数据丢失。在以下情况下，具有密钥 (PK) 的实体将不会往返：（PK 不在 AssociationSet 'FK_Itinerary_Users' 中扮演角色 'Itinerary' 并且 PK 在 'Itinerary' EntitySet 中）
> 
> gHOP.msl(410,10)：错误 3012：从第 410、1511 行开始映射片段时出现问题：Itinerary.UserGUID 中可能存在数据丢失。在以下情况下，具有密钥 (PK) 的实体将不会往返：（PK 在“行程”EntitySet 中并且 PK 在 AssociationSet“FK_Itinerary_Users”中不扮演角色“行程”并且 Entity.UserGUID 不为 NULL）

老实说，这是一场噩梦，因为我无法理解发生了什么。虽然我已经放弃了，如果有人至少能给我一个提示，我不会创建 FK，我会非常感激。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T09:11:56.813

不确定您对模型有多少访问/控制权，但在更新数据库中的实体然后尝试更新模型之前，我遇到了类似的问题。我通常只是从您在数据库中编辑的模型中删除实体！没有他们重建。然后在构建后重新添加它们。我发现在数据库中进行结构/关系更改时，Visual Studio 并不总是成功更新模型。

# jakarta-ee - servlet 中的持久性

> ID：10829834
> 
> 赞同：0
> 
> 时间：2012-05-31T08:20:04.117
> 
> 标签：jakarta-ee, jpa, persistence, entitymanager, servlet-3.0

我们不能在 Servlet 中使用 EntityManager 吗？像这样 ：

```
@WebServlet(name = "ServletPrincipal", urlPatterns = { "/test" })
public class ServletPrincipal extends HttpServlet {

    public void doGet(HttpServletRequest request, HttpServletResponse response)
            throws ServletException, IOException {

EntityManagerFactory emf = Persistence.createEntityManagerFactory("todo");
EntityManager em = emf.createEntityManager();
em.getTransaction().begin();
for (int i = 0; i < 10; i++) {
Voiture car = new Voiture(0, "b", "c");
em.persist(car);
}

em.getTransaction().commit();

Query q1 = em.createQuery("SELECT COUNT(v) FROM Voiture v");
System.out.println("Le nombre d'enregistrement: "
+ q1.getSingleResult());

TypedQuery<Voiture> query = em.createQuery("SELECT v FROM Voiture v",
Voiture.class);
List<Voiture> results = query.getResultList();
for (Voiture p : results) {
System.out.println(p.getMatricule());

}
// Close the database connection:
em.close();
emf.close();

    }

} 
```

如果不能，那么如何在一个 servlet 中使用持久性？

为什么？

我使用 tomcate7、servlet3、jpa2 和 java EE 6 非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-01T01:26:34.743

使用@PersistenceContext 和@PersistenceUnit 来传递对EntityManager 和EntityManagerFactory 的引用也是一个好主意。还要考虑 EMFactory 是线程安全的，而 EM 不是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T16:24:45.877

在 Servlet 中使用 EntityManager 非常好。

因为您的 servlet 可以（并且可能会）同时服务多个请求，并且因为 EntityManager 不是线程安全的，所以您不应将 entityManager 的实例分配（也不注入）到 servlet 中的字段。

您可以并且可能应该做的是只创建一次 EntityManagerFactory 的实例并重用它。EntityManagerFactory 是创建成本高昂的对象，将其用于同时请求很好，因为它是线程安全的。

如果这个 servlet 只是你需要这个持久性单元的地方，你可以例如在 servlet 的 init-method 中打开 EntityManagerFactory 并在 destroy-method 中关闭它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T08:24:22.587

通常，将持久性代码保留在控制器 servlet 中并不是一个好主意。但是要回答您的问题，正如**@Mikko Maunu**正确所说，您可以在您的servlet 中使用实体管理器。

# android - 水平线性布局中的右对齐按钮

> ID：10829835
> 
> 赞同：139
> 
> 时间：2012-05-31T08:20:05.817
> 
> 标签：android, android-layout

如果您查看随附的图像。我需要我的按钮右对齐，但由于某种原因它不能与“重力：右”一起使用......

![取消 添加](../Images/f0b0f4fa7b9e8d6e05a4ef435870bb01.png)

这是我的该布局的代码：

```
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:layout_marginTop="35dp">

    <TextView
        android:id="@+id/lblExpenseCancel"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/cancel"
        android:textColor="#404040"
        android:layout_marginLeft="10dp"
        android:textSize="20sp"
        android:layout_marginTop="9dp" />

    <Button
        android:id="@+id/btnAddExpense"
        android:layout_width="wrap_content"
        android:layout_height="45dp"
        android:background="@drawable/stitch_button"
        android:layout_marginLeft="10dp"
        android:text="@string/add"
        android:layout_gravity="right"
        android:layout_marginRight="15dp" />

</LinearLayout> 
```

为什么没有工作？！

* * *

## 回答 #1

> 赞同：160
> 
> 时间：2015-03-23T11:57:09.593

单一`LinearLayout`解决方案。只添加了一个简单的间距视图：（
*似乎没有人提到这个，只有更复杂的多布局解决方案。）*

```
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:layout_marginTop="35dp">

    <TextView
        android:id="@+id/lblExpenseCancel"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/cancel"
        android:textColor="#404040"
        android:layout_marginLeft="10dp"
        android:textSize="20sp"
        android:layout_marginTop="9dp" />

    <!-------------------------  ADDED SPACER VIEW -------------------->
    <View
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:layout_weight="1"
        />
    <!------------------------- /ADDED SPACER VIEW -------------------->

    <Button
        android:id="@+id/btnAddExpense"
        android:layout_width="wrap_content"
        android:layout_height="45dp"
        android:background="@drawable/stitch_button"
        android:layout_marginLeft="10dp"
        android:text="@string/add"
        android:layout_gravity="right"
        android:layout_marginRight="15dp" />

</LinearLayout> 
```

注意“突出显示”视图，我没有修改任何其他内容。Height=0 确保它不可见。width=0 是因为宽度是`LinearLayout`基于 weight=1 确定的。这意味着间隔视图将尽可能沿`LinearLayout`.

*请注意，如果您的 API 级别和/或依赖项允许，**您应该使用`android.widget.Space`or`android.support.v4.widget.Space`代替。`View`**`Space`以更便宜的方式完成这项工作，因为它只测量而不尝试绘制任何类似的东西`View`；它也更能表达意图。*

* * *

## 回答 #2

> 赞同：142
> 
> 时间：2012-05-31T08:30:27.550

使用下面的代码

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginTop="35dp"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/lblExpenseCancel"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="10dp"
        android:layout_marginTop="9dp"
        android:text="@string/cancel"
        android:textColor="#404040"
        android:textSize="20sp" />

    <Button
        android:id="@+id/btnAddExpense"
        android:layout_width="wrap_content"
        android:layout_height="45dp"
        android:layout_alignParentRight="true"
        android:layout_marginLeft="10dp"
        android:layout_marginRight="15dp"
        android:background="@drawable/stitch_button"
        android:text="@string/add" />

</RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：43
> 
> 时间：2017-06-26T08:56:37.347

**它的真正解决方案：**

`android:layout_weight="1"`对于 TextView，您的按钮向右移动！

* * *

## 回答 #4

> 赞同：30
> 
> 时间：2013-08-14T20:36:38.217

我知道这个问题是不久前提出的，但我以前做过这个，它允许在对齐项目时进行更多控制。如果你像 Web 编程一样看待它，它会有所帮助。您只需嵌套另一个`LinearLayout`将在其中包含您的按钮的按钮。然后，您可以更改按钮布局的重力并使其向右移动，而`TextView`仍然在左侧。

试试这个代码：

```
<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"             
android:orientation="horizontal" 
android:layout_marginTop="35dp">

<TextView
    android:id="@+id/lblExpenseCancel"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/cancel" 
    android:textColor="#404040"         
    android:layout_marginLeft="10dp" 
    android:textSize="20sp" 
    android:layout_marginTop="9dp"/>

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="right"
    android:orientation="horizontal" >

    <Button
        android:id="@+id/btnAddExpense"
        android:layout_width="wrap_content"
        android:layout_height="45dp"
        android:background="@drawable/stitch_button"
        android:layout_marginLeft="10dp"                    
        android:text="@string/add" 
        android:layout_gravity="right" 
        android:layout_marginRight="15dp"/>

</LinearLayout> 
```

您可能必须使用嵌套布局上的填充，以便它按照您的意愿行事。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2012-05-31T08:49:24.273

试试这个

```
 <?xml version="1.0" encoding="utf-8"?>
 <LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_gravity="right" 
    android:layout_height="wrap_content"             
    android:orientation="horizontal"  >

  <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
   android:layout_height="wrap_content"   
   android:orientation="horizontal" >

<TextView
    android:id="@+id/lblExpenseCancel"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="10dp"
    android:layout_marginTop="9dp"
    android:text="cancel"
    android:textColor="#ffff0000"
    android:textSize="20sp" />

<Button
    android:id="@+id/btnAddExpense"
    android:layout_width="wrap_content"
    android:layout_height="45dp"
    android:layout_alignParentRight="true"
    android:layout_marginLeft="10dp"
    android:layout_marginRight="15dp"
     android:textColor="#ff0000ff"
    android:text="add" />

 </RelativeLayout>
  </LinearLayout> 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2017-05-23T12:39:56.960

正如之前多次提到的：从 LinearLayout 切换到 RelativeLayout 是可行的，但您也可以解决问题而不是避免它。使用 LinearLayout 提供的工具：给 TextView 赋予 weight=1（参见下面的代码），按钮的权重应保持为 0 或无。在这种情况下，TextView 将占用所有剩余空间，这些空间不用于显示 TextView 或 ButtonView 的内容并将您的按钮推到右侧。

```
<LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal"
        android:layout_marginTop="35dp">

        <TextView
            android:id="@+id/lblExpenseCancel"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/cancel"
            android:textColor="#404040"
            android:layout_marginLeft="10dp"
            android:textSize="20sp"
            android:layout_marginTop="9dp"

            **android:layout_weight="1"**

            />

        <Button
            android:id="@+id/btnAddExpense"
            android:layout_width="wrap_content"
            android:layout_height="45dp"
            android:background="@drawable/stitch_button"
            android:layout_marginLeft="10dp"
            android:text="@string/add"
            android:layout_gravity="right"
            android:layout_marginRight="15dp" />

    </LinearLayout> 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2012-05-31T08:22:59.403

您需要将重力添加到布局而不是按钮，按钮设置中的重力适用于按钮内的文本

```
<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_gravity="right" 
android:layout_height="wrap_content"             
android:orientation="horizontal" 
android:layout_marginTop="35dp"> 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2014-09-01T06:31:04.940

```
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"             
    android:orientation="horizontal" 
    android:layout_marginTop="35dp">

    <TextView
        android:id="@+id/lblExpenseCancel"
        android:layout_width="0dp"
        android:layout_weight="0.5"
        android:layout_height="wrap_content"
        android:text="@string/cancel" 
        android:textColor="#404040"         
        android:layout_marginLeft="10dp" 
        android:textSize="20sp" 
        android:layout_marginTop="9dp"/>              

    <Button
        android:id="@+id/btnAddExpense"
        android:layout_width="0dp"
        android:layout_weight="0.5"
        android:layout_height="wrap_content"
        android:background="@drawable/stitch_button"
        android:layout_marginLeft="10dp"                    
        android:text="@string/add" 
        android:layout_gravity="right" 
        android:layout_marginRight="15dp"/>

</LinearLayout> 
```

这将解决您的问题

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2017-11-07T09:53:59.367

只需添加**android:gravity="right"**这一行父布局就可以了。

```
<LinearLayout
        android:id="@+id/withdrawbuttonContainer"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:background="@color/colorPrimary"
        android:orientation="horizontal"
        **android:gravity="right"**
        android:weightSum="5"
        android:visibility="visible">

        <Button
            android:id="@+id/bt_withDraw"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="@string/BTN_ADD"
            app:delay="1500" />

        <Button
            android:id="@+id/btn_orderdetail_amend"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="@string/BTN_CANCEL"
            app:delay="1500" />
</LinearLayout> 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2017-12-15T23:25:30.050

如果您不想或不能使用RelativeLayout，您可以将按钮包装在LinearLayout 中，方向为“vertical”，宽度为“fill_parent”。

```
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
  android:orientation="horizontal"
  android:layout_marginTop="35dp">

  <TextView
      android:id="@+id/lblExpenseCancel"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:text="@string/cancel"
      android:textColor="#404040"
      android:layout_marginLeft="10dp"
      android:textSize="20sp"
      android:layout_marginTop="9dp" />

  <LinearLayout
     android:layout_width="fill_parent"
     android:layout_height="wrap_content"
     android:orientation="vertical">
     <Button
        android:id="@+id/btnAddExpense"
        android:layout_width="wrap_content"
        android:layout_height="45dp"
        android:background="@drawable/stitch_button"
        android:layout_marginLeft="10dp"
        android:text="@string/add"
        android:layout_gravity="right"
        android:layout_marginRight="15dp" />
  </LinearLayout>
</LinearLayout> 
```

这是因为如果 LinearLayout 的方向是水平的，重力只会垂直影响视图。如果方向是“垂直的”，重力只会影响水平方向的视图。有关 LinearLayout 方向/重力解释的更多详细信息，请参见[此处](http://sandipchitale.blogspot.co.uk/2010/05/linearlayout-gravity-and-layoutgravity.html)。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2021-05-22T21:04:08.107

加入聚会很晚，但标准方法是使用 <Space>，它就是为此目的而创建的。

因此，在您的代码中，只需在 TextView 和 Button 之间插入以下内容：

```
<Space
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_weight="1" 
/> 
```

或者从调色板中，只需选择布局 > 空间。它会像上面的代码一样转储它，您只需要指定权重。

[![在此处输入图像描述](../Images/7068f4a0c206c057a33b4903896f5ba9.png)](https://i.stack.imgur.com/XLP7n.png)

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-02-23T06:35:54.937

我使用了类似的 4 `TextView`s 布局。两个`TextView`s 应该左对齐，两个`TextView`s 应该右对齐。所以，如果你想`LinearLayouts`单独使用，这是我的解决方案。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:baselineAligned="false"
    android:padding="10dp" >

    <LinearLayout
        android:layout_width="0dip"
        android:layout_weight="0.50"
        android:layout_height="match_parent"
        android:gravity="left"
        android:orientation="horizontal" >

        <TextView
            android:id="@+id/textview_fragment_mtfstatus_level"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/level"
            android:textAppearance="?android:attr/textAppearanceMedium" />

        <TextView
            android:id="@+id/textview_fragment_mtfstatus_level_count"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text=""
            android:textAppearance="?android:attr/textAppearanceMedium" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="0dip"
        android:layout_weight="0.50"
        android:layout_height="match_parent"
        android:gravity="right"
        android:orientation="horizontal" >

        <TextView
            android:id="@+id/textview_fragment_mtfstatus_time"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/time"
            android:textAppearance="?android:attr/textAppearanceMedium"
             />

        <TextView
            android:id="@+id/textview_fragment_mtfstatus_time_count"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text=""
            android:textAppearance="?android:attr/textAppearanceMedium" 
            />
    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-04-24T10:22:21.497

您可以在 Button 的父布局上使用 RelativeLayout 或设置gravity="right"。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2015-08-31T23:15:12.250

我知道这很旧，但线性布局中的另一个是：

```
<LinearLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="horizontal"
android:layout_marginTop="35dp">

<TextView
    android:id="@+id/lblExpenseCancel"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/cancel"
    android:textColor="#404040"
    android:layout_marginLeft="10dp"
    android:textSize="20sp"
    android:layout_marginTop="9dp" />

<Button
    android:id="@+id/btnAddExpense"
    android:layout_width="wrap_content"
    android:layout_height="45dp"
    android:background="@drawable/stitch_button"
    android:layout_marginLeft="10dp"
    android:text="@string/add"
    android:layout_gravity="center_vertical|bottom|right|top"
    android:layout_marginRight="15dp" /> 
```

请注意 layout_gravity 而不是重力。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-07-10T10:33:30.657

您应该使用 Relativelayout 而不是 Linearlayout 作为主布局。如果您使用Relativelayout 作为main，那么可以轻松处理右侧的按钮，因为相对布局为我们提供了alignParent right、left、top 和bottom。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-12-08T07:17:58.293

```
 Adding Spacing as View , makes the Last textview to right in 
    LinearLayout

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="horizontal">
     <!-- ADD SPACER VIEW -->
        <View
            android:layout_width="0dp"
            android:layout_height="0dp"
            android:layout_weight="1"
            />
    <!-- /ADD SPACER VIEW -->
</LinearLayout> 
```

* * *

## 回答 #17

> 赞同：-2
> 
> 时间：2014-07-18T21:43:59.583

在按钮中使用布局宽度，如 android:layout_width="75dp"

# https - 在一个站点而不是另一个站点的服务器上启用 https

> ID：10829848
> 
> 赞同：0
> 
> 时间：2012-05-31T08:21:05.323
> 
> 标签：https

在托管许多站点的服务器上启用 https 时遇到问题。我只为一个站点（site1.com）启用了 https，但是当用户尝试浏览未启用 https 的 site2.com 时，如果他们尝试访问[https://www.site2.com](https://www.site2.com)，它重定向到[https://www.site1.com](https://www.site1.com)。我可以防止这种情况发生吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T08:27:02.143

为此，您将需要两个 IP，并使用不同的 IP 托管一个站点。

“问题”是在 HTTP 服务器收到请求之前通过 TCP 基于 IP 建立 SSL 连接，然后已经加密。由于您的 SSL 端口已链接到 site1，因此将提供此站点。

如果您的 DNS A 记录指向相同的 IP，那么我认为您可以这样做的唯一方法是使用两个 IP 或使用[http://site2.com](http://site2.com)输入 site2 的 URL （明确没有 HTTPS）。在这种情况下，连接将在端口 80 上以未加密方式打开。

设置两个 IP 一个使用 HTTPS，另一个不使用。

# objective-c - 我在我的应用程序中使用了 NSJSONSerialization，这个应用程序在 IOS 3.x 下可以正常运行吗？

> ID：10829850
> 
> 赞同：0
> 
> 时间：2012-05-31T08:21:10.573
> 
> 标签：objective-c, ios, json

我是 IOS 开发的新手，我的应用程序使用 NSJSONSerialization 类来解析配置文件中的 JSON 数据。

现在我的问题是，这个应用程序在 IOS 3.x 版本下可以正常运行吗？顺便说一下，NSJSONSerialization 是 IOS 5.0 中的一个新类。

因为我的 iphone3GS 坏了，我现在不能测试它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T08:42:36.650

这是一个仅在 iOS 5+ 中可用的 API。所以，不，它会在 iOS 0、1、2、3、4 上中断。

# symfony - 重叠形式

> ID：10829854
> 
> 赞同：0
> 
> 时间：2012-05-31T08:21:41.773
> 
> 标签：symfony, symfony-forms

我在 Symfony 2 中遇到了重叠表单的问题。我正在尝试创建一个带有相册的应用程序。为此，我需要在此过程中创建一个相册并添加他的照片。照片仅与一张专辑链接。

我认为我的代码在后端是正确的，但照片的形式从未显示在相册的形式中。我认为问题出在形式上。

一张照片必须属性：一个文件和一个名称。

这是我的表格。

```
<script type="text/javascript">
$(document).ready(function() {
    var $container = $('#thelink_albumbundle_albumtype_photos');

    function add_photo() {
        index = $container.children().length;

        $container.append(
                $($container.attr('data-prototype').replace(/\$\$picture\$\$/g, index))
        );
    }

    if($container.children().length == 0)
        add_tag();

    $('#add_photo').click(function() {
        add_photo();
    });
}); 
```

```
<form method="post" enctype="multipart/form-data">
{{ form_widget(form) }}

<div id="thelink_albumbundle_albumtype_photos" data-prototype="&lt;div&gt;
    &lt;label class=&quot; required&quot;&gt;$$photo$$&lt;/label&gt;
    &lt;div id=&quot;thelink_albumbundle_albumtype_photos$$photo$$&quot;&gt;
    &lt;div&gt;&lt;label for=&quot;thelink_albumbundle_albumtype_photos$$photo$$_photo&quot;
    class=&quot; required&quot;&gt;Photo&lt;/label&gt;
    &lt;input type=&quot;file&quot; id=&quot;thelink_albumbundle_albumtype_photos$$photo$$_photo&quot;
    name=&quot;thelink_albumbundle_albumtype[photos][$$photo$$][picture]&quot; required=&quot;required&quot;
    maxlength=&quot;255&quot; value=&quot;&quot; /&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;">
</div>

<br />

<a href="{{ path('TheLinkAlbumBundle_index') }}" title="Retourner sur la liste des Albums">
    Annuler la {% if news is defined %}Modification{% else %}Création{% endif %}
</a>

<input type="submit" value="{% if album is defined %}Modifier{% else %}Créer{% endif %} l'Album" /> 
```

你有什么主意吗 ？或者问题出在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T18:08:01.087

看起来您正在手动输入数据原型？假设“照片”是一个集合类型。确保将“allow_add”、“allow_delete”和“prototype”选项设置为 true：

```
 ->add('photos', 'collection', array(
        'type'              => new PhotoType(),
        'allow_add'         => true,
        'allow_delete'      => true,
        'prototype'         => true
    )) 
```

然后你可以做 {{ form_row(form.photos) }} 它应该自动渲染原型。

如果您也可以发布您的表单类型，那将更有帮助。

# vim - 如何将 vim 导航键绑定到与 emacs 中相同的键？

> ID：10829859
> 
> 赞同：1
> 
> 时间：2012-05-31T08:21:54.000
> 
> 标签：vim

我想绑定这些：

*   `CTRL``F`一位前锋
*   `CTRL``B`向后一个字符
*   `CTRL``N`转到当前行下方的行（不在插入模式下）
*   `CTRL``P`转到当前行上方的行（不在插入模式下）

我应该绑定哪些功能？我怎么能找到他们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T10:08:02.927

在 vim.org 你可以找到一个名为[Vimacs](http://www.vim.org/scripts/script.php?script_id=300)的脚本：Vim-Improved eMACS: Emacs emulation for Vim

简短的描述说：

> Vimacs (Vim-Improved eMACS) 为 Vim 世界带来了 Emacs 丰富的键绑定和无模式编辑功能，同时完全保留了 Vim 强大的模式编辑风格。

所以我想这就是你所需要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T15:45:29.913

如果你只想要这四个映射而不是完整的 Vimacs，你可以这样做：

```
nmap <c-f> l
nmap <c-b> h
nmap <c-n> j
nmap <c-p> k 
```

要让 ctrl-f 和 ctrl-b 在插入模式下工作，请添加以下内容：

```
imap <c-f> <right>
imap <c-b> <left> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T08:51:57.880

查看地图命令。

```
:h :map 
```

您可能需要考虑学习 vim 映射。（h/l 和 j/k 比 ctrl-f/ctrl-b 和 ctrl-n/ctrl-p 短）。还有，看看..

```
:h index 
```

.. 获取映射列表。

# jodatime - 将 JodaTime 持续时间转换为字符串

> ID：10829870
> 
> 赞同：27
> 
> 时间：2012-05-31T08:22:39.523
> 
> 标签：jodatime, duration

我有持续时间为 127 秒的电影。我想将其显示为`02:07`. 实现这一点的最佳方法是什么？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-01T17:14:23.333

```
Duration yourDuration = //...
Period period = yourDuration.toPeriod();
PeriodFormatter minutesAndSeconds = new PeriodFormatterBuilder()
     .printZeroAlways()
     .appendMinutes()
     .appendSeparator(":")
     .appendSeconds()
     .toFormatter();
String result = minutesAndSeconds.print(period); 
```

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2015-02-24T08:47:52.817

我自己想要这个，但我没有发现 llyas 的答案是准确的。我想要一个计数器，当我有 0 小时 1 分钟时，我得到`0:1`了他的答案——但这很容易用一行代码解决！

```
Period p = time.toPeriod();
PeriodFormatter hm = new PeriodFormatterBuilder()
    .printZeroAlways()
    .minimumPrintedDigits(2) // gives the '01'
    .appendHours()
    .appendSeparator(":")
    .appendMinutes()
    .toFormatter();
String result = hm.print(p); 
```

这会给你`02:07`！

# java - JNI 的意义何在？

> ID：10829874
> 
> 赞同：6
> 
> 时间：2012-05-31T08:22:59.170
> 
> 标签：java, java-native-interface

我是 Java 新手，有人告诉我使用 Java Native Interface 来运行我用 C 编写的一些代码。

现在，这可能是一个愚蠢的问题，但是 JNI 的意义何在？我不能简单地从 Java UI 程序执行我的进程并让它的标准输出解析吗？

另外，我读到使用 JNI 可能会导致安全问题。这些问题是否直接取决于调用代码的质量？或者这是更深层次的东西？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T08:25:31.987

> JNI 有什么意义？

它使您能够*在同一进程*中混合使用 C 和 Java 代码。

> 我不能简单地从 Java UI 程序执行我的进程并让它的标准输出解析吗？

很多使用JNI可以实现的事情，也可以通过使用进程间通信（IPC）来实现。但是，您必须将所有输入数据发送到其他进程，然后将所有结果发送回。这可能非常昂贵，这使得 IPC 在许多可以使用 JNI 的情况下不切实际（例如，包装现有的 C 库）。

> 另外，我读到使用 JNI 可能会导致安全问题。这些问题是否直接取决于调用代码的质量？或者这是更深层次的东西？

这里的重点是 JVM 做了很多工作来确保无论向其抛出什么 Java 代码，诸如缓冲区溢出、堆栈粉碎攻击等事情都不会发生。例如，它对所有数组访问执行边界检查（C 没有）。

另一方面，JNI 代码是 JVM 的黑匣子。如果 C 代码有问题（例如缓冲区溢出），那么所有的赌注都会被取消。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T08:25:47.963

> 我不能简单地从 Java UI 程序执行我的进程并让它的标准输出解析吗？

您是否认为每次要执行任何本机代码时都启动一个新进程总是合适的？您真的想在进程之间传输潜在的大量数据吗？（想象一下原生图像转换。）

> 另外，我读到使用 JNI 可能会导致安全问题。这些问题是否直接取决于调用代码的质量？

是的。基本上，与在 JVM 中运行的 Java 相比，本机代码具有更少的安全沙盒。如果代码存在安全漏洞（例如缓冲区溢出），那么显然这会影响整个应用程序的安全性。

我应该说，Java 开发人员需要担心 JNI 的情况*相对*较少——在我的职业生涯中，我当然只接触过几次。如果需要，您可能还想查看[SWIG](http://www.swig.org/Doc1.3/Java.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T08:25:55.847

> 我不能简单地从 Java UI 程序执行我的进程并让它的标准输出解析吗？

这将取决于你在打电话。

请注意，您不能只通过 JNI调用*程序，而是通过**库代码*调用程序。

除此之外，产生新进程的成本相对较高，管理多个进程也很复杂。

# xslt - xsl:variable 元素不能同时具有内容和选择属性

> ID：10829883
> 
> 赞同：0
> 
> 时间：2012-05-31T08:23:36.253
> 
> 标签：xslt, xslt-1.0, xslt-2.0

我想知道这个文档是什么：

> 如果存在 select 属性，则元素不能包含任何内容

关于 xsl:variable 元素：

[1]：[http](http://www.w3schools.com/xsl/el_variable.asp%20w3%20schools) ://www.w3schools.com/xsl/el_variable.asp%20w3%20schools是什么意思？

我问的原因是因为我遇到了这个错误：

`JAXPSAXProcessorInvoker - java.lang.RuntimeException: ElemTemplateElement error: The xsl:variable element must not have both content and a select attribute.`在转型期间。奇怪的是它使用 eclipse 默认处理器而不是 xalan “运行”。

当它使用 eclipse 默认处理器运行时，我发现我正在转换的原始文档中的一些元素没有显示在结果文档中，我很好奇它是否与此有关。当 xalan 处理器出现故障时，eclipse 处理器只是掩盖了这个问题。

我相信这是有问题的线：

```
 <xsl:variable name="vSections" select="//*[local-name()='ItemDef']/*/*/*[local-name()='SectionLabel'][generate-id() = generate-id(key('kLabelsInForm', concat($vFormOID, '+', .))[1])]">
                <xsl:value-of select="concat(., ' ')" />
            </xsl:variable> 
```

感谢您的解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T09:24:51.543

此规则在 XSLT 1.0 和 2.0 中都存在。如果您有一个包含此错误的样式表，并且您发现一个处理器没有报告该错误，那么这就是处理器中的一个错误（不合格）。这不是您需要担心的错误，只需修复样式表中的错误即可。

# cocos2d-iphone - 子弹轨迹

> ID：10829888
> 
> 赞同：0
> 
> 时间：2012-05-31T08:23:57.663
> 
> 标签：cocos2d-iphone

我需要一些帮助。我正在玩游戏，但子弹弹道有问题。我有敌人，也有玩家。敌人和玩家可以定位在屏幕上的随机位置。所以当敌人在玩家中射击时，我需要一些公式来知道子弹的轨迹。子弹必须从敌人移动到玩家并移出屏幕边界，在相同的轨迹上，就像在其他射击游戏中一样。有人可以帮我弄这个吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T08:35:25.923

虽然我不能给你你正在寻找的语言的代码（没有它手 atm），但我可以解释这个过程。这需要一点三角函数。本质上，这里要做的最基本的事情是计算子弹的正确 X 和 Y 速度来模拟“锁定”。这可以通过计算出玩家和敌人之间的 x 和 y 距离、计算（最有可能使用 trig）开火的角度，然后根据该角度确定子弹的 xSpeed 和 ySpeed 来实现。

当我第一次学会如何做到这一点时，我在敌人的顶部覆盖了一个三角形，通过直接指向玩家来指示我的三角函数是否正确。

希望理解这个过程会给你一种方法来接近它！

还有很多关于此的 actionscript 3 教程，您可以从中翻译逻辑。

祝你好运！

# c# - asp.net webapi：如何传递可选参数？

> ID：10829897
> 
> 赞同：7
> 
> 时间：2012-05-31T08:24:35.900
> 
> 标签：c#, asp.net, asp.net-web-api, asp.net-web-api-routing

我正在使用新的 asp.net web api，并希望传递可选参数。需要填充属性以便允许使用`?`符号传递参数是否正确？

我相信在使用 uri 模板完成此操作之前。

有人有例子吗？

我目前正在传递 url 中的 id，它作为 int 到达我的控制器。但我需要通过一些日期。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T09:07:09.117

您可以使用可为空的类型使参数成为可选：

```
public class OptionalParamsController : ApiController
{
    // GET /api/optionalparams?id=5&optionalDateTime=2012-05-31
    public string Get(int id, DateTime? optionalDateTime)
    {
        return optionalDateTime.HasValue ? optionalDateTime.Value.ToLongDateString() : "No dateTime provided";
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-31T13:38:28.093

除了 Ian 提供的正确答案之外，您还可以提供默认值，我认为这是一个更简洁的选项，可以避免检查是否通过了某些内容。只是另一种选择。

```
public class OptionalParamsController : ApiController
{
    // GET /api/optionalparams?id=5&optionalDateTime=2012-05-31
    public string Get(int id, DateTime optionalDateTime = DateTime.UtcNow.Date)
    {...}
} 
```

# android - Android手机上的HTTP响应代码-1-使用appinventor

> ID：10829899
> 
> 赞同：0
> 
> 时间：2012-05-31T08:24:49.887
> 
> 标签：android, http, app-inventor

我正在通过 MIT AppInventor 构建一个简单的搜索应用程序。我在查询我在云上公开共享的电子表格时没有任何问题。

突然，我对 HTTP 的 GET 请求无缘无故地失败，响应代码为 -1。我到处找，但找不到这个 -1 代码的解释。

让我重复一遍，在发生这种情况之前，相同的代码块工作得很好。现在我不知道出了什么问题。任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T14:24:46.277

当我发现以前以 http:// 开头的目标电子表格链接更改为 https:// 时，我解决了这个问题。当我尝试直接在网络上运行查询时，我发现我的浏览器将我重定向到 https://。所以在我的代码中改变它解决了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T12:35:36.723

我最近遇到了一个类似的问题。它曾经工作，我发现我的获取请求被重定向到登录页面，因为会话已过期。

我建议您使用 webviewer 组件（或 activitystarter）打开 get 请求，以便更好地了解错误的来源。

# jquery - history.js + 有没有人得到 HTML4 支持工作 - 任何人？

> ID：10829900
> 
> 赞同：3
> 
> 时间：2012-05-31T08:24:52.093
> 
> 标签：jquery, history.js

我花了几天时间试图让 history.js 在 HTML4 浏览器上工作。

我已经浏览了所有的 doco 几次，但我无法绕过 IE 抛出的错误消息 - 你可以在这里看到：http: [//www.salesmelbourne.com](http://www.salesmelbourne.com)（page1、page2 等）

我还浏览了一些**展示网站**的列表，这些网站需要让 history.js 正常工作，其中**绝大多数甚至不使用该插件**，也没有一个支持 html4 工作：

[https://github.com/browserstate/history.js/wiki/Showcase](https://github.com/browserstate/history.js/wiki/Showcase)

最后，我没有任何运气就写信给书面/所有者。

因此，我想最后问一下是否有人支持 history.js HTML4 工作，或者这只是一个很好的想法，但实际上并没有工作......我假设是后者，但想问一下。

如果你有它的工作，请在此处发布一个 URL，以便我可以查看源代码。

谢谢

# amazon-web-services - 没有 config.inc.php 文件 + 未找到类“MarketplaceWebService_Model_SubmitFeedRequest”

> ID：10829901
> 
> 赞同：0
> 
> 时间：2012-05-31T08:24:52.563
> 
> 标签：amazon-web-services, amazon, amazon-mws

我下载了 php 的 Feeds API 部分客户端库，但没有 config.inc.php 文件。我什至在其他 api 库中搜索了配置文件。谁能指导我解决问题？？？为了解决这个问题，我创建了自己的 config.inc.php 文件并包含了必要的凭据，并在 SubmitFeedSample.php 中进行了必要的更改。但我收到“找不到类'MarketplaceWebService_Model_SubmitFeedRequest'”错误。帮助！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T15:16:51.227

config.inc.php 有一个前导 '.' (.config.inc.php)，它应该在 Samples 目录中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-29T15:36:48.157

是的，`config.inc.php`实际上`.config.inc.php`它也是隐藏的。对于`MarketplaceWebService_Model_SubmitFeedRequest`您需要`include`或`require_once`如下

```
require_once 'FeedsAPIClass/src/MarketplaceWebService/Client.php';
require_once 'FeedsAPIClass/src/MarketplaceWebService/Model/SubmitFeedRequest.php'; 
```

# php - 一个卷号不能再添加

> ID：10829903
> 
> 赞同：0
> 
> 时间：2012-05-31T08:25:04.667
> 
> 标签：php, cakephp-1.3

> **可能重复：**
> [不能添加相同的卷号](https://stackoverflow.com/questions/10829001/same-roll-number-can-not-be-added)

我希望我的代码以这种方式运行，如果我添加了一个卷号，就不能在注册中再次添加它............就像一旦注册了一个电子邮件地址，错误就会显示电子邮件地址已被占用....

我正在创建一个函数。roll numbr 值为 1 应显示错误，如果不是 1 则不应显示错误

```
function selectroll($studentname,$rollnumber)
    {
        $sql = "SELECT * FROM tblstuden WHERE studentname = 'studentname' and rollnumber = '$rollnumber';";
        $obj_db = new DB();
        $obj_db->query($sql);

        $row = $obj_db->rsset();
        if{
            $val = 1;
        }
        else{
            $val = 0;
        }
        $obj_db->db_close();
        return $val;
    }

        $this->_id($row[id]);
        $this->_studentname($row[studentname]);
        $this->_rollnumber($row[rollnumber]);
        $this->_classname($row[classname]);
        $obj_db->db_close();
    }

}
 ?> 
```

并通过此方法在页面调用该函数

```
<?php

if(isset($_POST['btnSubmit']) and $_GET['action'] == "Add")
{

    $val = $Tblstuden->selectroll($_POST['studentname'],$_POST['rollnumber']);
    if ($val =='1')
    {
    $Tblstuden->copyPostData();
    $Tblstuden->insert();   
    echo"asdf";
    }

    redirect("index.php?page=studentlist"); 

}

else
{
    echo"abc";

    }

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T08:59:12.050

你可能想要

```
function selectroll($studentname,$rollnumber)     
    {     
        $sql = "SELECT * FROM tblstuden WHERE studentname = 'studentname' and rollnumber = '$rollnumber';";     
        $obj_db = new DB();     
        $obj_db->query($sql);     

        $row = $obj_db->rsset();     
        if ($row){     
            $val = 1;
            $this->_id($row[id]);     
            $this->_studentname($row[studentname]);     
            $this->_rollnumber($row[rollnumber]);     
            $this->_classname($row[classname]);     

        }     
        else{     
            $val = 0;     
        }     
        $obj_db->db_close();     
        return $val;     
    }     
}     
?> 
```

在顶部函数的第 8 行 - 否则代码将无法编译。

* * *

子注意，您的代码受到 mysql 注入的影响，在您习惯旧方法之前，您应该考虑使用 PDO（http://php.net/manual/en/book.pdo.php）作为数据库功能。请。现在做 ;）

# mysql - 重新更新sql麻烦

> ID：10829909
> 
> 赞同：0
> 
> 时间：2012-05-31T08:25:22.303
> 
> 标签：mysql, sql

我只是在更新数据库时出现这个错误，并且我没有更改表单中的任何值并提交。我想知道纠正这个错误的原因和建议。

样本

```
SELECT * FROM `table` WHERE `id` = 1

  id    =  1,
 name   = John,
 city   = New York;

UPDATE `table` SET name = 'John', city = 'New York' WHERE id = 1 
```

当使用您从数据库中选择的相同值更新数据库并使用受影响的行时，我得到 0

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T08:27:41.507

用引号 (') 将字符串值括起来

```
UPDATE `table` SET name = 'John', city = 'New York' WHERE id = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T08:44:42.983

如[手册](http://dev.mysql.com/doc/en/mysql-affected-rows.html)所述：

> 对于[`UPDATE`](http://dev.mysql.com/doc/en/update.html)语句，affected-rows 默认值是实际更改的行数。如果在连接到时指定`CLIENT_FOUND_ROWS`标志 to ，则受影响的行值是“找到”的行数；即由子句匹配。[`mysql_real_connect()`](http://dev.mysql.com/doc/en/mysql-real-connect.html)[*`mysqld`*](http://dev.mysql.com/doc/en/mysqld.html)`WHERE`

因此，由于您`UPDATE`实际上并未更改任何行，因此默认的受影响行值为 0。

# php - 工作 PHP 5.2 代码会产生非常令人沮丧的 PHP 5.3 解析错误，我无法解释，需要帮助

> ID：10829913
> 
> 赞同：0
> 
> 时间：2012-05-31T08:25:32.787
> 
> 标签：php, parse-error

以下代码

```
<?php
try
{
    $var=0;
}
    catch(Exception $e)
{
    $var=1;
}
?> 
```

在 index.php 中产生

> 解析错误：语法错误，第 3 行 /home/site/public_html/index.php 中出现意外的“{”

该代码在 PHP 5.2.8、Zend Engine 2.2.0、Apache 2.2.21（测试服务器）上运行，但在 PHP 5.3.3、Apache 1.3.42（生产机器！）上抛出解析错误。当然，实际的代码更复杂，但我将它减少到上面的最低限度，这也会引发解析错误。

正如您可以想象的那样，这非常令人沮丧，它应该是一件直截了当的事情。

我尝试在源代码中寻找隐藏的特殊字符，但没有。代码中还有其他奇怪的解析错误，如果我注释掉上面的内容，我可以看到。这真的很奇怪。

请提出一些建议，我无能为力，我不知道该怎么办。让我知道您还需要什么其他信息。

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T08:38:09.647

也许您忘记在开始的花括号之前附加一个分号。或者您正在运行 < 5.0 的 php 版本

# android - json android中的转义字符串

> ID：10829915
> 
> 赞同：0
> 
> 时间：2012-05-31T08:25:46.163
> 
> 标签：android, json

当我将一个放在 objectJson 中时，它会自动添加转义字符。

把原来的

```
j.put("paif_start", "01/05/2012"); 
```

因为它保存了看跌期权

```
{"paif_start":"01\/05\/2012"} 
```

如何删除这些转义字符？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T11:29:25.747

在接收端，如果你真的想，你可以这样做

```
 `myJsonString = myJsonString.replaceAll("\\","");` 
```

但请注意，这些转义字符绝不会使 JSON 无效或在语义上有所不同——“/”字符可以选择在 JSON 中使用“\”进行转义。

# special-characters - Powershell：替换特殊字符

> ID：10829919
> 
> 赞同：1
> 
> 时间：2012-05-31T08:25:52.920
> 
> 标签：special-characters, powershell-2.0

有没有一种简单的方法可以从 Powershell 脚本中的字符串中替换特殊字符，例如 æøåéü 等？

使字符串网络安全。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T11:33:22.543

好的，加上额外的解释，我想解决方案将取决于规模。如果那是用户输入并且在“正常”使用中它会很短，那可能是这样的：

```
$Replacer = @{
    Å = 'aa'
    é = 'e'
}

$string_to_fix = 'æøåéüÅ'

$pattern = "[$(-join $Replacer.Keys)]"

[regex]::Replace($string_to_fix, $pattern, { $Replacer[$args[0].value] }) 
```

显然，您必须填写 $Replacer 的空白；) HTH Bartek

# assembly - 汇编 x86 使用堆栈的值作为指针？

> ID：10829921
> 
> 赞同：2
> 
> 时间：2012-05-31T08:25:55.567
> 
> 标签：assembly, x86, x86-16

我想知道如何将指针参数传递给过程？

我必须创建具有 2 个参数的函数：

1.  单词数组
2.  数组的大小

该函数获取数组的大小并对列求和。

这就是我编码的内容：

```
.MODEL 小
.堆栈 64

; +=================================+
; | 数据 |
; +=================================+

。数据
array1 dw 1,2,3,4
array1size dw 4
结果 dw ?
地址 dw ?
; 打印
TMP dw 0 ; 一般临时变量..
。代码

addNumbers 过程
; 重置结果
    LEDI，结果
; 使用堆栈
    移动 bp,sp
; 获取 num 数组
    mov bx,[bp+2]
; 获取数字的数量
    mov cx,[bp+4]
; 加法
添加：
    添加 [di],bx
    公司 bx; 去下一个bx
循环添加
    保留 2
结束

; 开始
开始：
    移动斧头，@DATA
    mov ds,ax
; 设置字符串
    推数组1大小
    推送偏移数组1
    调用 addNumbers
; 打印
    mov dx:ax,结果
    调用 printNumber
    mov ah,4ch
    移动,0
    整数 21H
结束开始

```

问题 - 它增加了偏移指针（这里是`cs:0000`, `cs:0001`, `cs:0002`, `cs:0003`）而不是偏移值（这里是：`1`, `2`, `3`, `4`）。

因此，结果将是 6 而不是 10。

有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T16:52:05.800

```
INC BX 
```

当然会在 BX 中的指针上加 1（字节）。如果你需要移动一个 WORD，你必须添加单词的大小。说是2个字节，那么你需要

```
ADD BX, 2 
```

而不是`INC`.

您的另一个问题是您不添加指向的值`[BX]`，而是添加指针本身`BX`。您可以使用备用寄存器，例如`AX`计算总和。

```
 MOV  AX,0
adding:
    ADD  AX,[BX]
    ADD  BX,2
    LOOP adding
    MOV  [result],AX

    RET  4 
```

# visual-studio-2010 - 为什么 Azure Add > Worker role project in solution … 在 VS2010 中显示为灰色？

> ID：10829923
> 
> 赞同：17
> 
> 时间：2012-05-31T08:26:08.277
> 
> 标签：visual-studio-2010, azure, azure-worker-roles

我有一个 C# .Net 4 类库，我认为我已将其设置为 Azure Worker Role，即该类实现 Microsoft.WindowsAzure.ServiceRuntime.RoleEntryPoint 并具有 Run() 和 OnStart() 方法。但是，当我右键单击我的空 Windows Azure 项目中的角色文件夹并单击添加选项以添加“解决方案中的工作人员角色项目...”时，它是灰色的。我需要为 VS2010 做些什么才能意识到解决方案中有一个潜在的工人角色项目？

![在此处输入图像描述](../Images/c9f9dd44afbbdec0d76cdda28e1c7747.png)

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-31T09:44:05.540

“**解决方案中的添加 > 工作人员角色项目...** ”仅显示工作人员角色项目而不是类库。尽管它们看起来一样，但它们并非如此。

您可以使用以下命令创建工作者角色项目：

*   创建新的云项目时

![在此处输入图像描述](../Images/989e20ede03e647eba2fd0125b6c0bdc.png)

*   通过右键单击云项目

![在此处输入图像描述](../Images/49c5d73c2fcb28c8e70b2c127c454eb4.png)

然后，如果您愿意，您将能够将该工作人员角色项目添加到其他云项目中。在这种情况下，“**解决方案中的添加 > 工作者角色项目...** ”菜单选项将被启用。

现在，您还可以将类库“转换”为辅助角色项目。右键单击类库并选择**Unload Project** .. 然后（一旦卸载）， **编辑项目文件**并在第一个属性组中添加**RoleType元素：**

```
<PropertyGroup>
   <Configuration Condition=" '$(Configuration)' == '' ">Debug</Configuration>
   <Platform Condition=" '$(Platform)' == '' ">AnyCPU</Platform>
   <ProductVersion>8.0.30703</ProductVersion>
   <SchemaVersion>2.0</SchemaVersion>
   <ProjectGuid>{7E9F972F-BE92-4CF7-998D-E76B61B21C37}</ProjectGuid>
   <OutputType>Library</OutputType>
   <AppDesignerFolder>Properties</AppDesignerFolder>
   <RootNamespace>ClassLibrary1</RootNamespace>
   <AssemblyName>ClassLibrary1</AssemblyName>
   <TargetFrameworkVersion>v4.0</TargetFrameworkVersion>
   <FileAlignment>512</FileAlignment>
   <RoleType>Worker</RoleType>  <-------------------- HERE
 </PropertyGroup> 
```

最后 - 将项目重新加载到解决方案中 -> 右键单击**​​ Reload Project**。（注意：如果 Xml 文件仍然打开，您会被要求关闭它。这是完美的。说是并关闭它）。.. 现在您的*类库*已重新添加回来，但它是一个*工人角色类库*。

如果执行此操作，Visual Studio 会将项目识别为辅助角色，并且您将能够将其添加到云项目中：

![在此处输入图像描述](../Images/39265608e6ec02355edf80fd4da22b53.png)

**注意：**您的类库将需要派生自**RoleEntryPoint**的类。更多信息：http: [//blogs.msdn.com/b/jnak/archive/2010/02/11/windows-azure-roleentrypoint-method-call-order.aspx](http://blogs.msdn.com/b/jnak/archive/2010/02/11/windows-azure-roleentrypoint-method-call-order.aspx)

# powershell - 删除除一个以外的所有 SMTP 地址

> ID：10829927
> 
> 赞同：0
> 
> 时间：2012-05-31T08:26:20.587
> 
> 标签：powershell, exchange-server

我的 Exchange 2010 用户有许多 smtp 地址，我想删除除其中两个之外的所有地址。尝试以下没有运气：

```
get-mailbox test_2 | foreach { $a = $_.emailaddresses; $b = $_.emailaddresses; foreach($e in $a) { if (($e.tostring() -match "donotdelete") -and ($e.tostring() -notmatch "donotdelete2")) { $b -= $e; } } ; $_ | set-mailbox -emailaddresses $b } 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T10:52:50.977

尝试这个：

```
$mbx = get-mailbox test_2 
$emailAddresses = $mbx.emailaddresses | where { "put your your filter code here  }
set-mailbox $mbx -emailaddresses $emailAddresses 
```

# c# - 谷歌日历身份验证错误

> ID：10829929
> 
> 赞同：0
> 
> 时间：2012-05-31T08:26:34.003
> 
> 标签：c#, .net, authentication, google-calendar-api

我正在尝试通过最新的 Google Data API SDK 更新 Google Calendar。

我的示例代码如下：

```
 string sGoogleUserName = "xxxx@gmail.com";
            string sGooglePassword = "xxxxxxxx";
            Uri oCalendarUri = new Uri("http://www.google.com/calendar/feeds/" +
                                       sGoogleUserName + "/private/full");

            //Initialize Calendar Service
            CalendarService oCalendarService = new CalendarService("CalendarSampleApp");
            oCalendarService.setUserCredentials(sGoogleUserName, sGooglePassword);

            //Use Proxy 
            GDataRequestFactory oRequestFactory =
                (GDataRequestFactory)oCalendarService.RequestFactory;
            WebProxy oWebProxy = new WebProxy(
                 WebRequest.DefaultWebProxy.GetProxy(oCalendarUri));
            oWebProxy.Credentials = CredentialCache.DefaultCredentials;
            oWebProxy.UseDefaultCredentials = true;
            oRequestFactory.Proxy = oWebProxy;

            //Set Event Entry 
            EventEntry oEventEntry = new EventEntry();
            oEventEntry.Title.Text = "Test Calendar Entry From .Net";
            oEventEntry.Content.Content =
              "Hurrah!!! I posted my first Google calendar event through .Net";

            //Set Event Location 
            Where oEventLocation = new Where();
            oEventLocation.ValueString = "New Zealand";
            oEventEntry.Locations.Add(oEventLocation);

            //Set Event Time
            When oEventTime = new When(new DateTime(2011, 5, 31, 9, 0, 0),
                 new DateTime(2011, 5, 31, 9, 0, 0).AddHours(1));
            oEventEntry.Times.Add(oEventTime);

            //Set Additional Properties
            ExtendedProperty oExtendedProperty = new ExtendedProperty();
            oExtendedProperty.Name = "SynchronizationID";
            oExtendedProperty.Value = Guid.NewGuid().ToString();
            oEventEntry.ExtensionElements.Add(oExtendedProperty);

            // CalendarService oCalendarService = GAuthenticate();

            //Prevents This Error
            //{"The remote server returned an error: (417) Expectation failed."}
            System.Net.ServicePointManager.Expect100Continue = false;

            //Save Event
            oCalendarService.Insert(oCalendarUri, oEventEntry);
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.ToString());
        } 
```

这是下面的错误

> Google.GData.Client.GDataRequestException：身份验证请求的执行返回了意外结果：Google.GData.Client.Utilities.getAuthException（TokenCollection 令牌，HttpWebResponse 响应）在 Google.GData.Client.Utilities.QueryClientLoginToken（GDataCredentials gc，String serviceName）的 405 , 字符串 applicationName, Boolean fUseKeepAlive, IWebProxy proxyServer, Uri clientLoginHandler) 在 Google.GData.Client.GDataGAuthRequest.QueryAuthToken(GDataCredentials gc) 在 Google.GData.Client.GDataGAuthRequest.EnsureCredentials() 在 Google.GData.Client.GDataRequest.EnsureWebRequest( ) 在 Google.GData.Client.GDataGAuthRequest.EnsureWebRequest() 在 Google.GData.Client.GDataGAuthRequest.CopyRequestData() 在 Google.GData.Client.GDataGAuthRequest.Execute(Int32 retryCounter) 在 Google.GData.Client.GDataGAuthRequest。Execute() 在 Google.GData.Client.Service.Insert(Uri feedUri, AtomEntry newEntry, AsyncSendData 数据) 在 Google.GData 的 Google.GData.Client.Service.EntrySend(Uri feedUri, AtomBase baseEntry, GDataRequestType 类型, AsyncSendData 数据) .Client.Service.Insert[TEntry](Uri feedUri, TEntry entry)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T18:30:48.433

我今天打了这个，使用与我在网上某处找到的相同的示例代码。

通过一些测试，我发现如果我设置 HTTP 代理（我使用的是 Charles，但其他常见的是 Fiddler 等）它会起作用，但如果我尝试不使用代理则不会。

凭直觉，我在//像这样使用代理下注释掉了这些东西，它起作用了：

```
string googleUserName = "falagard@gmail.com";
string googlePassword = "winnie";
Uri calendarUri = GetGoogleCalendarUri();

//Initialize Calendar Service
CalendarService service = new CalendarService("AIConsole");
service.setUserCredentials(googleUserName, googlePassword);

//Use Proxy - NOTE COMMENTED THIS PART OUT
//GDataRequestFactory requestFactory = (GDataRequestFactory)service.RequestFactory;
//WebProxy proxy = new WebProxy(WebRequest.DefaultWebProxy.GetProxy(calendarUri));
//proxy.Credentials = CredentialCache.DefaultCredentials;
//proxy.UseDefaultCredentials = true;
//requestFactory.Proxy = proxy; 
```

在那之后，它就像一个魅力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T08:32:40.163

使用 3.5.12 版再试一次。也许您在代理后面，需要先设置正确的代理设置

# c# - 如何使用 SharpSSH 以编程方式从 SFTP 服务器运行命令？

> ID：10829931
> 
> 赞同：0
> 
> 时间：2012-05-31T08:26:34.763
> 
> 标签：c#, .net, sharpssh

我使用 Tamir SharpSSH 一切正常，但我需要使用 c# 代码运行命令，我放置文件服务器，但我需要运行命令，有人知道吗？

```
SshTransferProtocolBase sshCp;
const string sftp_host = "xxx";
const string sftp_user = "xxx";
const string sftp_pass = "xxx";
const int sftp_port = 22;
var sftp = new Sftp(sftp_host, sftp_user, sftp_pass);
sftp.Connect(sftp_port);
sftp.Put(@"D:\\" + Teslim + ".txt", "../");
sftp.Close(); 
```

此代码工作我需要将命令运行到 root 中？？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T18:45:03.603

您不能通过 (S)FTP 在远程服务器上执行代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T05:15:07.713

您不能使用 Sftp 执行命令 - 您必须使用 SSH 控制台会话来运行命令。Tamir SharpSSH 通过`SshExec`对象支持这一点。

有关使用它的示例，请参阅[SshExeText.cs](http://sharpssh.cvs.sourceforge.net/viewvc/sharpssh/SharpSSH/Examples/sharpssh_samples/SshExeTest.cs?view=markup)示例。

# configuration - 在 smb.config 中配置 samba 权限

> ID：10829940
> 
> 赞同：0
> 
> 时间：2012-05-31T08:27:17.130
> 
> 标签：configuration, configuration-files, config, samba, smb

如何编辑文件 smb.conf 来解决这个问题：

每个 samba 用户都可以读取和写入文件夹 /myfolder 但只有在文件夹中创建文件的人才能删除他的文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T06:59:59.763

我将通过在目录上设置（所谓的）粘性位来继续，例如

chmod 2755 /路径/到/目录

使用粘滞位意味着其他用户不能删除或重命名文件。有关粘性位的更多信息，请访问[http://en.wikipedia.org/wiki/Sticky_bit](http://en.wikipedia.org/wiki/Sticky_bit)（或通过 Google 搜索）。

谢谢，

帕特里克

# symfony - 在 symfony2 树枝资产函数中添加参数

> ID：10829941
> 
> 赞同：0
> 
> 时间：2012-05-31T08:27:17.647
> 
> 标签：symfony, twig, templating, assets

我一直想知道是否可以像这样为资产树枝函数添加一个参数

```
#config.yml
...
framework:
   templating:
      parameters: 
         key: value
OR
twig:
   parameters:
      key: value
... 
```

在树枝文件中使用这样的资产

```
# twig file
<script src="{{ asset('/file/path', key) }}"></script> 
```

并且会再生

```
<script src="/file/path?key=value"></script> 
```

我知道我可以创建一个宏来执行此操作，但我想知道是否还有其他方法。

感谢您的回复

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T13:51:35.847

资产通常是静态文件而不是动态脚本，你确定你做对了吗？如果您有一个接受参数的资产，它可能应该在一个控制器中，并定义了一个路由，这样您就可以在代码中对其进行操作，并且`{{ path('...', {key: value}) }}`

[否则，assetic 让您做的唯一一件事就是使用assets_version](http://symfony.com/doc/2.0/reference/configuration/framework.html#ref-framework-assets-version)自动将版本号附加到资产

# java - 将 GregorianCalendar 与 SimpleDateFormat 一起使用

> ID：10829942
> 
> 赞同：34
> 
> 时间：2012-05-31T08:27:18.893
> 
> 标签：java, simpledateformat, illegalargumentexception, gregorian-calendar

因此，我一直在为这个（应该）简单的练习绞尽脑汁，让程序将日期字符串转换为`GregorianCalendar`对象，对其进行格式化，并在完成后再次将其作为字符串返回。

这是程序的最后一点，它从文件中获取一小段文本，将其分解为单独的记录，然后将记录分解为单独的数据片段并将它们分配给人员对象。

我已经在多个地方检查了代码，并且代码完全按照它应该做的事情，直到我调用格式函数，它抛出一个`IllegalArgumentException`. 该`GergorianCalendar`对象被分配了它应该被分配的值（尽管打印它又是一个完全不同的故事，如下所示......），但格式不会接受该对象进行格式化。

不幸的是，讲师不太确定如何使用`GregorianCalendar`and `SimpleDateFormat`（但已分配我们与他们一起工作）并说：“只需谷歌一下……”我试过了，但我发现没有任何帮助。

我到目前为止的代码是：

```
public class DateUtil {

    public static GregorianCalendar convertFromDMY(String dd_mm_yy) throws ParseException{

        // this actually works, got rid of the original code idea
        String[] splitDate = dd_mm_yy.split("-");
        int days = Integer.parseInt(splitDate[0]);
        int month = Integer.parseInt(splitDate[1]);
        int year = Integer.parseInt(splitDate[2]);

        // Dates are going in right, checked in print statement,
        // but the object is not getting formatted…
        GregorianCalendar dateConverted = new GregorianCalendar(year, month, days);
        format(dateConverted);
        return dateConverted;
    }

    public static String format(GregorianCalendar date){

        SimpleDateFormat fmt = new SimpleDateFormat("dd-MMM-yyyy");
        String dateFormatted = fmt.format(date);
        return dateFormatted;
    }
} 
```

我得到的错误是：

```
线程“主”java.lang.IllegalArgumentException 中的异常：无法将给定对象格式化为日期

    在 java.text.DateFormat.format(DateFormat.java:281)
    在 java.text.Format.format(Format.java:140)
    在 lab2.DateUtil.format(DateUtil.java:26)
    在 lab2.DateUtil.convertFromDMY(DateUtil.java:19)
    在 lab2.Lab2.createStudent(Lab2.java:75)
    在 lab2.Lab2.main(Lab2.java:34)

```

还有一件事，我什至使用`GregorianCalendar`正确的？当我打印出该对象的值时（应该得到一个日期，对吗？）我得到这个：

> java.util.GregorianCalendar[time=?,areFieldsSet=false,areAllFieldsSet=false,lenient=true,zone=sun.util.calendar.ZoneInfo[id="America/Vancouver",offset=-28800000,dstSavings=3600000,useDaylight =true,transitions=189,lastRule=java.util.SimpleTimeZone[id=America/Vancouver,offset=-28800000,dstSavings=3600000,useDaylight=true,startYear=0,startMode=3,startMonth=2,startDay=8, startDayOfWeek=1,startTime=7200000,startTimeMode=0,endMode=3,endMonth=10,endDay=1,endDayOfWeek=1,endTime=7200000,endTimeMode=0]],firstDayOfWeek=1,minimalDaysInFirstWeek=1,ERA=?, YEAR=1985,MONTH=4,WEEK_OF_YEAR=?,WEEK_OF_MONTH=?,DAY_OF_MONTH=22,DAY_OF_YEAR=?,DAY_OF_WEEK=?,DAY_OF_WEEK_IN_MONTH=?,AM_PM=0,HOUR=0,HOUR_OF_DAY=0,MINUTE=0,SECOND= 0,MILLISECOND=?,ZONE_OFFSET=?,DST_OFFSET=?]

year、month 和 day_of_month 值都是正确的，因为它们是我在创建它时传递的数字。

想法，建议，我什至接近吗？

**编辑**

原始问题已解决（谢谢 assylias！），但我仍然无法正确打印，因为这两个函数没有链接，并且要求`GregorianCalendar`从 person 对象中打印出日期值（因为birthdate 是 a `GregorianCalendar`）。

更新代码：

```
public class DateUtil {

    static SimpleDateFormat fmt = new SimpleDateFormat("dd-MMM-yyyy");

    public static GregorianCalendar convertFromDMY(String dd_mm_yy) throws ParseException{

        // this actually works, got rid of the original code idea
        String[] splitDate = dd_mm_yy.split("-");
        int days = Integer.parseInt(splitDate[0]);
        int month = (Integer.parseInt(splitDate[1]) - 1);
        int year = Integer.parseInt(splitDate[2]);

        // dates go in properly
        GregorianCalendar dateConverted = new GregorianCalendar(year, month, days);
        String finalDate = format(dateConverted);
        return ;
    }

    public static String format(GregorianCalendar date) throws ParseException{

       fmt.setCalendar(date);
        String dateFormatted = fmt.format(date.getTime());
        System.out.println(dateFormatted);
        return dateFormatted;
    }

} 
```

**上次编辑**

好的，看来我是个白痴，不需要将这两个`DateUtil`功能链接在一起，而是串联使用它们。首先，将生日转换为 a`GregorianCalendar`并将其存储在 person 对象中。然后，在打印语句中，只需告诉程序在打印日期时格式化该日期。问题解决了。现在所有的工作都按照规范进行，我觉得自己更愚蠢了，因为我在课堂的最后一天左右像一条出水的鱼一样挥舞着`DateUtil`，试图让他们同时工作。

感谢大家在正确安排日期方面的帮助！

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-05-31T08:33:10.537

`SimpleDateFormat.format()`方法以 a`Date`作为参数。您可以通过调用 a 的方法`Date`从 a中获取 a ：`Calendar``getTime()`

```
public static String format(GregorianCalendar calendar) {
    SimpleDateFormat fmt = new SimpleDateFormat("dd-MMM-yyyy");
    fmt.setCalendar(calendar);
    String dateFormatted = fmt.format(calendar.getTime());

    return dateFormatted;
} 
```

另请注意，月份从 0 开始，因此您可能的意思是：

```
int month = Integer.parseInt(splitDate[1]) - 1; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-31T08:34:18.283

为什么会有这样的并发症？

```
public static GregorianCalendar convertFromDMY(String dd_mm_yy) throws ParseException 
{
    SimpleDateFormat fmt = new SimpleDateFormat("dd-MMM-yyyy");
    Date date = fmt.parse(dd_mm_yy);
    GregorianCalendar cal = GregorianCalendar.getInstance();
    cal.setTime(date);
    return cal;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-31T08:38:57.463

A `SimpleDateFormat`，顾名思义，格式化`Date`s。不是一个`Calendar`。因此，如果要`GregorianCalendar`使用 a格式化 a `SimpleDateFormat`，则必须先将`Calendar`a转换为`Date`：

```
dateFormat.format(calendar.getTime()); 
```

你看到打印的是`toString()`日历的表示。它的预期用途是调试。它不打算用于在 GUI 中显示日期。为此，请使用 ( `Simple`) `DateFormat`。

最后，要将 a 转换`String`为 a `Date`，您还应该使用 a ( `Simple`) `DateFormat`（它的`parse()`方法），而不是`String`像您正在做的那样拆分 a 。这将为您提供一个`Date`对象，您可以通过实例化它 ( ) 并设置它的时间 ( )`Calendar`从中创建一个。`Date``Calendar.getInstance()``calendar.setTime()`

我的建议是：谷歌搜索不是这里的解决方案。阅读[API 文档](http://docs.oracle.com/javase/6/docs/api/)是您需要做的。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-31T09:21:04.837

1.  你把一个两位数的年份放在那里。第一世纪。而公历始于 16 世纪。我认为您应该在一年中增加2000。

2.  函数中的月份`new GregorianCalendar(year, month, days)`是从 0 开始的。从那里的月份减去 1。

3.  更改第二个函数的主体如下：

    ```
     String dateFormatted = null;
        SimpleDateFormat fmt = new SimpleDateFormat("dd-MMM-yyyy");
        try {
            dateFormatted = fmt.format(date);
        }
        catch ( IllegalArgumentException e){
            System.out.println(e.getMessage());
        }
        return dateFormatted; 
    ```

调试后，您会发现根本`GregorianCalendar`不能作为`fmt.format();`.

真的，没有人需要`GregorianCalendar`作为输出，即使你被告知要返回“一个字符串”。

将格式函数的标题更改为

```
public static String format(final Date date) 
```

并进行适当的更改。`fmt.format()`会`Date`很高兴地接受这个对象。

4.  总是在出现意外异常之后，自己去捕捉它，不要让 Java 机器去做。这样，你就会明白问题所在。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-05-13T02:53:56.820

# mysql - MySQL插入未知ID

> ID：10829943
> 
> 赞同：0
> 
> 时间：2012-05-31T08:27:20.657
> 
> 标签：mysql, insert, subquery

是否可以插入具有未知的特定 id 的数据，而对该 id 的引用是已知的？

例子：

我有一个车型，我知道它的名字，但我不知道它的 ID。

在数据库中它被称为：FooBarCar 13

现在我想在一些参考表中插入 FooBarCar 但我还不知道 id。是否可以将其写入一个查询/子查询，或者我必须先在单独的查询中选择它？如果可以使用一个查询/子查询，是否可以使用多个未知的“汽车”来完成？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T08:34:29.720

```
INSERT INTO table_a(`Name`,`cID`,`another_field`) 
VALUES('Something',
(SELECT id FROM table_b tb WHERE tb.cat = '5'),
'somethingelse') 
```

来源：[http ://www.webdeveloper.com/forum/showthread.php?t=76538](http://www.webdeveloper.com/forum/showthread.php?t=76538)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T08:37:02.123

您可以使用一个查询`INSERT INTO`

```
INSERT INTO CARTBL (carname, cartype ) 
VALUES (
    'mycar',
    (select cartypeid from CARTYPETBL where typename='cartype')
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T08:42:13.513

```
INSERT INTO table_ref (id, value)
SELECT id, 'give_value'
FROM table_car
WHERE type = 'given_type' 
```

这也可以在一个查询中处理多个插入。

# database - CouchDB 多重约束

> ID：10829945
> 
> 赞同：0
> 
> 时间：2012-05-31T08:27:40.550
> 
> 标签：database, nosql, couchdb

我在 CouchDB 中有一组地理定位的文档 - 也就是说，它们的结构类似于

```
{
  _id: ...,
  ...
  coords: {
    lat: 45.204149214,
    long: 40.284712972
  }
} 
```

我希望能够在地图上显示它们。这需要我在给定的方格中获取所有文件。在给定的时间间隔内很容易获得所有经度的文档：

```
// map function
function(doc) {
  emit(doc.coords.long, doc.other_stuff);
} 
```

使用类似的查询

```
// query
/path/to/view/?startkey=40&endkey=50 
```

问题是我看不到如何做多维约束。如何获取纬度在 20**到**30 之间以及经度在 40 到 50 之间的所有文档？我看到我可以指定多个键，但这会**或**结果。

一种选择是在客户端上进行进一步过滤，但考虑到数据的大小，这可能是不可行的。

**免责声明**：关于 SO 有几个[类似](https://stackoverflow.com/questions/1036828/does-couchdb-support-multiple-range-queries)的问题，基本上说明这是不可能的。由于它们看起来都过时了，我想知道最新版本的 CouchDB 是否发生了变化。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T17:39:27.567

你是对的，你不能做多维查询。但是有[GeoCouch](https://github.com/couchbase/geocouch)。通过[build-couchdb](https://github.com/iriscouch/build-couchdb#couchdb-plugins)添加到沙发数据库非常容易，或者您可以使用默认情况下已烘焙的 iriscouch 托管。

如您所见，[使用 Geocouch](https://github.com/couchbase/geocouch#using-geocouch)相当简单，并且查询采用如下边界框：

`http://localhost:5984/places/_design/main/_spatial/points?bbox=0,0,180,90`

如果您不想使用 geocouch（出于某种原因），我已经成功使用了[GeoHash](https://en.wikipedia.org/wiki/Geohash)，它将两个维度映射到一维空间。 [这](https://github.com/ryanramage/eckoit/blob/master/app.js#L187)是查看代码，[这里](https://github.com/ryanramage/eckoit/blob/master/html/js/app.js#L361)是查询。如您所见，它没有那么优雅，但它可以跨 couchdb 版本移植，而且它也可以工作。

# c - uriparser：如何构建它？

> ID：10829949
> 
> 赞同：0
> 
> 时间：2012-05-31T08:27:55.717
> 
> 标签：c, uri

对于我的新项目，我决定使用[uriparser](http://uriparser.sourceforge.net/)进行查询字符串解析，因为在很多页面上都推荐它。下载了它，但现在我卡住了。我应该如何构建它？这不会是第一次构建，但是，make 说没有可用的 makefile。这让我想到可能还有其他东西，也许不应该建造？任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T08:40:10.573

我快速浏览了一下发行版，它似乎是基于自动工具的。

所以`./configure`在根目录下运行，这将生成一个你可以执行的makefile `make`。

# objective-c - 如何在 MKAnnotation 中发送对象？

> ID：10829951
> 
> 赞同：0
> 
> 时间：2012-05-31T08:28:16.237
> 
> 标签：objective-c, xcode, mkannotation

我想在用户点击 pin 时发送对象。我只知道如何发送标题，但这还不够，因为有些标题是相同的。

这是我的代码：

```
...
- (void)viewDidLoad {
    [super viewDidLoad];

    if (context == nil) 
    { 
        context = [(AppDelegate *)[[UIApplication sharedApplication] delegate] managedObjectContext]; 
    }

    /* ********************************************** */
NSEntityDescription *entity = [NSEntityDescription entityForName:@"Offers" inManagedObjectContext:context];

NSFetchRequest *request = [[NSFetchRequest alloc] init];

//[request setFetchBatchSize:20];

[request setEntity:entity];

NSPredicate *predicate = [NSPredicate predicateWithFormat:@"subOffer == %@", self.subItem];
[request setPredicate:predicate];

NSSortDescriptor *sort = [[NSSortDescriptor alloc] initWithKey:@"offerOrder" ascending:YES];

NSArray *newArray = [NSArray arrayWithObject:sort];

[request setSortDescriptors:newArray];

NSError *error;

NSMutableArray *results = [[context executeFetchRequest:request error:&error] mutableCopy];

//NSLog(@"%@", results);

/* **************************************************** */

    mapView.delegate=self;

    NSMutableArray* annotations=[[NSMutableArray alloc] init];

    CLLocationCoordinate2D theCoordinate1;
    theCoordinate1.latitude = 43.82078;
    theCoordinate1.longitude = 15.307265;

    for (Offers *offer in results){

        CLLocationCoordinate2D theCoordinate1;

        MyAnnotation* myAnnotation1=[[MyAnnotation alloc] init];

        theCoordinate1.latitude = [offer.lat doubleValue];
        theCoordinate1.longitude = [offer.lon doubleValue];

        myAnnotation1.coordinate=theCoordinate1;
        myAnnotation1.title = offer.offerName;
        myAnnotation1.subtitle = offer.offerLocation;

        [mapView addAnnotation:myAnnotation1];
        [annotations addObject:myAnnotation1];

    }//end for

    //NSLog(@"%d",[annotations count]);

    //[self gotoLocation];//to catch perticular area on screen
    // Uncomment the following line to display an Edit button in the navigation bar for this view controller.
    // self.navigationItem.rightBarButtonItem = self.editButtonItem;

    // Walk the list of overlays and annotations and create a MKMapRect that
    // bounds all of them and store it into flyTo.
    MKMapRect flyTo = MKMapRectNull;
    for (id <MKAnnotation> annotation in annotations) {

        //NSLog(@"fly to on");

        MKMapPoint annotationPoint = MKMapPointForCoordinate(annotation.coordinate);
        MKMapRect pointRect = MKMapRectMake(annotationPoint.x, annotationPoint.y, 0, 0);
        if (MKMapRectIsNull(flyTo)) {
            flyTo = pointRect;
        } else {
            flyTo = MKMapRectUnion(flyTo, pointRect);
            //NSLog(@"else-%@",annotationPoint.x);
            //NSLog(@"else");
        }
    }

    // Position the map so that all overlays and annotations are visible on screen.
    mapView.visibleMapRect = flyTo;

    UIBarButtonItem* temp=[[UIBarButtonItem alloc] init];
    temp.title=@"Back";
    self.navigationItem.backBarButtonItem=temp;
    //[temp release];
}

- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation
{

    // if it's the user location, just return nil.
    if ([annotation isKindOfClass:[MKUserLocation class]])
        return nil;

    // try to dequeue an existing pin view first
    static NSString* AnnotationIdentifier = @"AnnotationIdentifier";
    MKPinAnnotationView* pinView = [[MKPinAnnotationView alloc]
                                    initWithAnnotation:annotation reuseIdentifier:AnnotationIdentifier];
    pinView.animatesDrop=YES;
    pinView.canShowCallout=YES;
    pinView.pinColor=MKPinAnnotationColorRed;

    UIButton* rightButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
    [rightButton setTitle:annotation.title forState:UIControlStateNormal];
    [rightButton addTarget:self
                    action:@selector(showDetails:)
          forControlEvents:UIControlEventTouchUpInside];
    pinView.rightCalloutAccessoryView = rightButton;

    return pinView;
}

-(IBAction)showDetails:(id)sender{

    //NSLog(@"Annotation Click");

    DetailViewController *detail = [[DetailViewController alloc] init];

    detail.title = ((UIButton*)sender).currentTitle;

    [self.navigationController pushViewController:detail animated:YES];

}
... 
```

# php - Codeigniter：清理我的 URL（删除 index.php）后，我无法将访问我网站的用户重定向到新的干净 URL

> ID：10829954
> 
> 赞同：0
> 
> 时间：2012-05-31T08:28:21.857
> 
> 标签：php, .htaccess, codeigniter, url, mod-rewrite

在完成之后，我努力（因为托管公司，godaddy）`index.php?`从我的网站的 URL 中删除。
之后，我注意到一些用户正在使用旧 URL（带有 的 URL `index.php?/`）访问我的网站所以，我尝试使用**301**
重定向重定向 来自`index.php?`页面的用户，但没有运气。 我在互联网上搜索了一下， 但我认为问题背后的原因是我需要它从 包含或指向同一页面请求但没有（首选）的**所有**URL重定向。 ****`index.php?/``example.com``index.php?/`****

 ****例如：请求`example.com/index.php?/site/category/etc`将导致`example.com`或`example.com/site/category/etc`（首选方法）。
并且任何其他 URL 都将被视为相同。

这是我当前的`.htaccess`文件（与此问题无关）：

```
RewriteEngine On
RewriteBase /

RewriteCond %{REQUEST_URI} ^system.*
RewriteRule ^(.*)$ /index.php?/$1 [L]
RewriteCond %{REQUEST_URI} ^application.*
RewriteRule ^(.*)$ /index.php?/$1 [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?/$1 [L] 
```

**更新**：
尝试 php 解决方案：（Robin Castlin 的学分）
我尝试使用钩子（基于答案），但没有奏效！`hooks`我从配置启用，`URL`助手是自动加载的。
这个函数在里面`application/hooks/MY_hooks.php`：

```
function redirectToNewURL(){

    if(preg_match('~/index.php?/~', $_SERVER['REQUEST_URI'])) {//check if the URL has index.php 
        header('Location: '.current_url(), true, 301); //redirect
        exit;
    }
} 
```

这就是我设置钩子的方式：
从`application/config/hooks.php`
我放这个简单的数组开始：

```
$hook['pre_controller'] = array(
    'class' => '',
    'function' => 'redirectToNewURL',
    'filename' => 'MY_hooks.php',
    'filepath' => 'hooks'
); 
```

最后，我没有得到任何结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T08:35:21.580

```
$CI =& get_instance();

$CI->load->helper('url');

if (preg_match("~/index\.php\?/~", $_SERVER['REQUEST_URI'])) {
    header('Location: '.current_url());
    exit;
} 
```

将其添加到钩子或自动加载的助手中应该可以做到。****

# sql - 下一个和上一个记录

> ID：10829956
> 
> 赞同：1
> 
> 时间：2012-05-31T08:28:28.820
> 
> 标签：sql, database, oracle10g

如果我只需要排序，如何从表中获取`previous`或product_id？例如，如果我有和，我想获得下一条记录并且我有和，我想获得上一条记录 我怎样才能做到这一点？`next``varchar``PRODUCT_NO='20120033'``PRODUCT_REGISTRATION_NO='yellow'``PRODUCT_ID which is 4``PRODUCT_NO='20120033'``PRODUCT_REGISTRATION_NO='green'``PRODUCT_ID which is 3`

谢谢

表结构和数据贴在下面

```
CREATE TABLE MYTAB
(
  PRODUCT_ID               NUMBER,
  PRODUCT_NO               VARCHAR2(),
  PRODUCT_REGISTRATION_NO  VARCHAR2(32)
);

SET DEFINE OFF;
Insert into MYTAB
   (PRODUCT_ID, PRODUCT_NO, PRODUCT_REGISTRATION_NO)
 Values
   (3, '20120033', 'yellow');
Insert into MYTAB
   (PRODUCT_ID, PRODUCT_NO, PRODUCT_REGISTRATION_NO)
 Values
   (4, '20120033', 'green');
Insert into MYTAB
   (PRODUCT_ID, PRODUCT_NO, PRODUCT_REGISTRATION_NO)
 Values
   (5, '20120034', 'wine');
Insert into MYTAB
   (PRODUCT_ID, PRODUCT_NO, PRODUCT_REGISTRATION_NO)
 Values
   (6, '20120034', 'soda');
COMMIT; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T09:15:39.800

使用 lag() 和 lead() 函数：

```
select *
from (
    select product_id,
           product_no,
           product_registration_no, 
           lag(product_id) over (partition by product_no order by product_id) as prev_id,
           lead(product_id) over (partition by product_no order by product_id) as next_id
    from mytab
) 
where product_no='20120033' 
and product_registration_no='green' 
```

请注意，“上一个”和“下一个”的概念只有在您可以指定要排序的条件时才有意义。这就是`order by product_id`窗口定义中的作用。

# facebook - 我有一个有效的 Facebook access_token 并授予了电子邮件权限，但用户图表中仍然没有电子邮件信息

> ID：10829957
> 
> 赞同：3
> 
> 时间：2012-05-31T08:28:41.610
> 
> 标签：facebook, facebook-graph-api, facebook-php-sdk, user-permissions

我正在使用 Facebook 的 PHP SDK 在我的网站中通过 Facebook 注册用户，有时我注意到用户图表中缺少电子邮件信息，但是，我有一个具有电子邮件权限的有效访问令牌。

这是我发送用户进行身份验证的 URL：

`https://www.facebook.com/dialog/oauth?client_id=[FACEBOOK_APP_ID]&redirect_uri=[REDIR_URL]&**scope=email**,publish_stream,publish_actions,user_about_me,user_birthday,user_hometown,user_location,user_website`

如果我检查`https://graph.facebook.com/[USER_ID]/permissions?access_token=[ACCESS_TOKEN]`，我可以看到以下内容：

```
"data": [{
     "installed": 1,
     "status_update": 1,
     "photo_upload": 1,
     "video_upload": 1,
     **"email": 1,**
     "create_note": 1,
     "share_item": 1,
     "publish_stream": 1,
     "publish_actions": 1,
     "user_birthday": 1,
     "user_hometown": 1,
     "user_location": 1,
     "user_website": 1,
     "user_about_me": 1
}] 
```

检查用户的详细信息会`https://graph.facebook.com/[USER_ID]/?access_token=[ACCESS_TOKEN]`显示所有内容，但缺少电子邮件字段。

问题可能出在哪里？请让我知道是否有一些有用的细节可以对此进行调查。

提前感谢您的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T08:44:26.077

这很奇怪。通常，电子邮件地址总是`email`被授予权限返回 - 即使隐私设置将电子邮件地址隐藏给其他人。

可能是最初授予您的应用程序的电子邮件地址已被删除/更新。但是，我自己对此进行了测试，更新后的电子邮件地址仍然通过 API 提供。

Facebook 提交了一个关于此的[错误。](http://developers.facebook.com/bugs/365297990174802)订阅该错误，希望它很快得到解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T08:47:46.087

当用户授予权限时，他/她可以选择不与您的应用程序共享电子邮件信息。如果他/她没有授予权限，您必须检查它，您必须再次将用户重定向到权限链接，直到获得邮件地址。

# jquery - 对多个具有相同 id 的文本框使用 dataticket

> ID：10829964
> 
> 赞同：1
> 
> 时间：2012-05-31T08:29:12.640
> 
> 标签：jquery, datepicker

我在同一页面中的多个位置使用文本框。我已经分配了`datepicker`，`textbox`但`textbox`没有在其中一个中显示日期`textbox`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T08:31:18.167

试试这个方法

**html:**

```
 <input type="text" class="datepicker" id="date_1" />
    <input type="text" class="datepicker" id="date_2" />
    <input type="text" class="datepicker" id="date_3" /> 
```

**脚本：**

```
 $('.datepicker').each(function(){
        $(this).datepicker();
    }); 
```

# java - 显示键/值数据的更好方法是什么

> ID：10829966
> 
> 赞同：2
> 
> 时间：2012-05-31T08:29:30.193
> 
> 标签：java, sql, hibernate, caching

我的问题背景是这样的：

一个名为*“User”*的数据库表，“User”有一个“State”列，其值可能是“0”（禁用）、“1”（正常）、“2”（其他）。

我需要向不同国家的用户显示不同的“状态”文本，这意味着应该显示“禁用”或“禁止”（中文字符）而不是“0”。

现在，我设计了一个名为*“Code”*的“映射”表，其列：“Code”、“Value”、“Locale(Country)”、“Type”。我应该加入两个表（“用户”和“代码”）以显示区域设置可靠值，还是使用另一个查询来获取它（我认为可以使用查询缓存）。

注：“代码”表中的“类型”栏为类别代码。例如：“用户”有一个“状态”，“菜单”有一个“状态”。

你的选择是什么？和理由。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T06:59:57.100

伙计们，我找到了正确的方法！属性文件。首先，为什么不使用数据库？因为“状态”不是字典列，所以它是具有有限 biz 相关值的 biz 列。因此，开发人员而不是系统管理员应该负责维护它们。属性文件是开发人员执行此操作的正确方法之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T13:47:56.760

如果“状态”并不总是改变，我将使用[ENUM 列](http://dev.mysql.com/doc/refman/5.5/en/enum.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T10:43:17.130

您是说您的带有代码、值、区域设置和类型的表是状态的查找表吗？如果是，那听起来不错。但是，由于您没有提到这些列的含义，因此很难说这是否是正确的方法。

此外，这在很大程度上取决于您如何访问数据。

如果您试图在 SQL 查询中获得完整的输出，那么我将这样做的方式是有一个专门用于 State 的查找表，其中只有两列，State 和 StateDescription。在 State 上加入该查找表并拉回 StateDescription 以显示给用户。

如果您在 SSRS 或类似文件中显示数据，那么根据 State 的值对其中的描述进行硬编码可能是一个不错的举措。这将避免查询连接的成本。

# eclipse - 嵌入式 Jetty 挂在 join() 上

> ID：10829967
> 
> 赞同：1
> 
> 时间：2012-05-31T08:29:31.560
> 
> 标签：eclipse, web-services, jetty

我正在尝试使用 Junit 4 已经有一段时间了。我的部分单元测试需要部署一个暴露一些 Web 服务的战争应用程序。我正在使用 Eclipse Helios，我在项目的构建路径中添加了两个不同的 jar，它们是： 1- jetty-all-8.1.3.v20120416.jar 2- servlet-api-3.0.jar

现在在我的测试类中，我正在运行以下代码来启动码头并部署包含我公开的 Web 服务的axis2.war webapp：

```
System.out.println("Initializing server");
       Server server = new Server(8181);
       System.out.println("Server initialized");

        WebAppContext webapp = new WebAppContext();
        webapp.setContextPath("/");
        webapp.setParentLoaderPriority(true);
        webapp.setWar("C:\\axis2.war")

        server.setHandler(webapp);

        System.out.println("Starting server");
        server.start();

        System.out.println("Joining server");

        server.join();
        System.out.println("Finished starting Jetty..."); 
```

上述代码的输出如下：

```
Server initialized
Starting server
Joining server 
```

尝试加入服务器会无限期地运行，并且不会引发任何异常。

在另一次尝试中，我在我的机器上下载了 jetty 8.1.3 web 服务器，并将axis.war 放在 webapps 目录下，然后从命令行使用 start.jar 启动 jetty。它从那里完美运行，我能够访问我公开的 Web 服务方法。

但是，我需要能够以编程方式启动和停止码头，并以编程方式部署我的 Web 应用程序。谁能告诉我可能是什么问题？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-31T13:44:20.050

不要加入线程。

请参阅：[http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Thread.html#join()](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Thread.html#join())

# php - 匹配除换行符、空格和制表符之外的所有内容

> ID：10829968
> 
> 赞同：1
> 
> 时间：2012-05-31T08:29:37.233
> 
> 标签：php, regex, regex-negation

我想匹配除换行符、空格和制表符之外的所有内容。我知道有`\S`，但它说不要在 char 类中使用它，所以我怎么能说我想要除了 char 之外的所有东西`\S`？我要检查的是我拥有的字符串至少有任何可见的字符。

```
Test 1234      --> should be found
____ (spaces)  --> should not be found 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T08:34:41.780

`\S`就足够了，它匹配除了空格之外的任何东西。

```
preg_match('/\S/', $subject); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T08:36:30.343

```
preg_match_all('/([^\n\s]+)/', $str, $m);

print_r($m); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T08:32:58.977

字符类是这些：`[]`所有内容的东西，根据[教程](http://www.regular-expressions.info/charclass.html)，所以在方括号之外，这应该很好地匹配并且完全按照你想要的方式做。

# asp.net - ASP.Net 自定义删除功能

> ID：10829969
> 
> 赞同：0
> 
> 时间：2012-05-31T08:29:44.290
> 
> 标签：asp.net, sql

我有一个数据库，我想当我最初生成它时，我并没有费心选择“生成删除函数”选项，现在我发现自己想要添加它。

目前，我有一个绑定到数据库的gridview，每行都有一个删除按钮。看来我应该能够使用以下代码运行自定义删除功能；

```
protected void gvUsers_RowDeleting(object sender, GridViewDeleteEventArgs e)
{
    using (SqlConnection conn = new SqlConnection(database.ConnectionString))
    {
        SqlCommand command = conn.CreateCommand();
        command.CommandText = "DELETE FROM userlist WHERE Username='@insUsername'";
        command.CommandType = System.Data.CommandType.Text;

        command.Parameters.Add(new SqlParameter("insUsername", gvUsers.Rows[e.RowIndex].Cells[1].Text));

        conn.Open();
        command.ExecuteNonQuery();
    }
} 
```

将上面的代码用作插入函数时我没有任何问题...我认为这与按钮是 GridView 的一部分这一事实有关吗？此刻我得到了；除非指定了 DeleteCommand，否则数据源“数据库”不支持删除。

对此的任何帮助都会很棒，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T08:36:36.747

您可以将 SQL 放入 DeleteCommand 而不仅仅是过程名称...

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.sqldatasource.deletecommand.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.sqldatasource.deletecommand.aspx)显示了这是如何完成的，但关键是：

```
DeleteCommand="DELETE FROM [Order Details] WHERE OrderID=@OrderID;DELETE FROM Orders WHERE OrderID=@OrderID;" 
```

这应该可以解决它不允许在没有删除命令的情况下进行删除的问题。:)

**编辑添加：**

我发现的另一种选择建议在传递删除时在运行该函数后引发该错误。您可以`e.Cancel=true`在自己完成删除后取消删除事件。[资源](http://forums.asp.net/t/1762690.aspx/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T08:32:23.997

*不是完整的答案*

您的查询文本应为：

`"DELETE FROM userlist WHERE Username=@insUsername"`

由于您使用的是参数，因此不需要单引号。

# json - Dojo JsonRest 商店和 dijit.Tree

> ID：10829972
> 
> 赞同：3
> 
> 时间：2012-05-31T08:30:05.850
> 
> 标签：json, rest, dojo, lazy-loading, dijit.tree

我在使用 ForestModel 制作 JSonRest 存储和 dijit.Tree 时遇到了一些问题。我按照网上的许多提示尝试了 JsonRestStore 和 json 数据格式的某种组合，但没有成功。

最后，以这里的例子 [http://blog.respondify.se/2011/09/using-dijit-tree-with-the-new-dojo-object-store/](http://blog.respondify.se/2011/09/using-dijit-tree-with-the-new-dojo-object-store/)

我已经制作了这个简单的页面（我使用的是 dojotolkit 1.7.2）

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Tree Model Explorer</title>

<script type="text/javascript">
djConfig = {
parseOnLoad : true,
isDebug : true,
}
</script>
<script type="text/javascript" djConfig="parseOnLoad: true"
src="lib/dojo/dojo.js"></script>
<script type="text/javascript">
dojo.require("dojo.parser");
dojo.require("dijit.Tree");
dojo.require("dojo.store.JsonRest");
dojo.require("dojo.data.ObjectStore");
dojo.require("dijit.tree.ForestStoreModel");

dojo.addOnLoad(function() {

var objectStore = new dojo.store.JsonRest({
target : "test.json",
labelAttribute : "name",
idAttribute: "id"
});

var dataStore = new dojo.data.ObjectStore({

objectStore : objectStore
});

var treeModel = new dijit.tree.ForestStoreModel({
store : dataStore,
deferItemLoadingUntilExpand : true,
rootLabel : "Subjects",
query : {
"id" : "*"
},
childrenAttrs : [ "children" ]
});

var tree = new dijit.Tree({
model : treeModel
}, 'treeNode');
tree.startup();
});
</script>
</head>
<body>

<div id="treeNode"></div>
</body>
</html> 
```

我的休息服务响应以下 json

```
{
data: [
{
"id": "PippoId",
"name": "Pippo",
"children": []
},
{
"id": "PlutoId",
"name": "Pluto",
"children": []
},
{
"id": "PaperinoId",
"name": "Paperino",
"children": []
}
]} 
```

我也尝试过以下响应（实际上我的最终意图是对树使用延迟加载）

```
{ data: [
 {
  "id": "PippoId",
  "name": "Pippo",
  "$ref": "author0",
  "children": true
 },
 {
  "id": "PlutoId",
  "name": "Pluto",
  "$ref": "author1",
  "children": true
 },
 {
  "id": "PaperinoId",
  "name": "Paperino",
  "$ref": "author2",
  "children": true
 }
]} 
```

两者都不起作用。我在萤火虫中没有看到错误消息。我只是在页面上看到了根“主题”。感谢任何人都可以以某种方式提供帮助。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-31T10:37:47.957

### 一眼看去；

您的服务器端返回错误的数据。这是 dojo 参考指南中的[快速入门](http://dojotoolkit.org/reference-guide/1.7/quickstart/rest.html)jsonrest，请遵循 GET 部分。

有一个区别，因为您的 REST 请求的外观方式（从浏览器获取），服务器端应该 1）返回一个项目数组或 2）返回一个项目。

尝试像这样删除*数据*键：

```
[
  {
    "id": "PippoId",
    "name": "Pippo",
    "children": []
  }, {
    "id": "PlutoId",
    "name": "Pluto",
    "children": []
  }, {
    "id": "PaperinoId",
    "name": "Paperino",
    "children": []
  }
] 
```

所以这不会带来延迟加载功能吗？这一定是因为模型在您的代码示例中具有相当复杂的设置，首先是 REST ，`store`然后是 OBJECT `another store`，然后是 ForestTree `model`，最后是 Tree `view`。实现模型必须为我们的商店提供的东西相当简单，让我们跳过双商店的定义。否则 objectstore.query 将调用 reststore.query - 我不完全确定它会起作用。

### 中缺少逻辑`RestStore`

树需要五种**模型方法**来将数据呈现为树：

1.  `getIdentity(object)`- 已经由商店提供，通常不需要重新实现。
2.  `mayHaveChildren(object)`- 指示对象是否可能有子对象（在实际加载子对象之前）。在此示例中，我们将“children”属性的存在视为有孩子的指示。
3.  `getChildren(parent, onComplete, onError)`- 打电话来找回孩子。这可能会异步执行，并应在完成时调用 onComplete 回调。在此示例中，我们将执行 get() 来检索父对象的完整表示以获取子对象。一旦父级完全加载，我们从父级返回“children”数组。
4.  `getRoot(onItem)`- 调用以检索根节点。应使用根对象调用 onItem 回调。在此示例中，我们获取（）根对象的 id/URL 为“root”的对象。
5.  `getLabel(object)`- 返回对象的标签（这是显示在树中节点旁边的文本）。在此示例中，标签只是对象的“名称”属性。

那怎么可能做到呢？让我们做几个定义：
*1）* 'base'的服务器集， ID'root `jsonrest.target`'和 *2）*服务器总是返回'children'键，如果有则为真

```
var reststore = JsonRest({
    target:"data/",         // << adapt URL
    mayHaveChildren: function(object){
        // if true, we might be missing the data, false and nothing should be done
        return "children" in object;
    },
    getChildren: function(object, onComplete, onError){
        // this.get calls 'mayHaveChildren' and if this returns true, it will load whats needed, overwriting the 'true' into '{ item }'
        this.get(object.id).then(function(fullObject){
            // copy to the original object so it has the children array as well.
            object.children = fullObject.children;
            // now that full object, we should have an array of children
            onComplete(fullObject.children);
        }, function(error){
            // an error occurred, log it, and indicate no children
            console.error(error);
            onComplete([]);
        });
    },
    getRoot: function(onItem, onError){
        // get the root object, we will do a get() and callback the result
        this.get("root").then(onItem, onError);
    },
    getLabel: function(object){
        // just get the name (note some models makes use of 'labelAttr' as opposed to simply returning the key 'name')
        return object.name;
    }
}); 
```

### 使用自定义的 RestStore 作为模型创建树

我们使用上面定义的变量 reststore - 并简单地将其设置为树构造参数的模型

```
var tree = new dijit.Tree({
  model : treeModel
}, 'treeNode');
tree.startup(); 
```

### 服务器端延迟加载 JSON 数据设置

省略子数组中的大部分数据，可以减少发送的有效负载，并且可以利用延迟加载。对于收到的每个 One 项目（例如 /data/parents/number1parent），必须填写项目本身的完整表示。如果他/她有孩子，我们需要 1）命名这些以进入`labels`-`view`我们使用“名称”键，见 getLabel 方法，2）提供一个唯一的 ID 和 3）指示他们是否有孩子。

### 根 JSON

```
{
    "name": "Papparazis",
    "id": "root",
    "children": [
  {
    "id": "PippoId",
    "name": "Pippo",
    // may have children - makes dijit.Tree create expandoNode and events
    "children": true
  }, {
    // example leaf, children == undefined
    "id": "PlutoId",
    "name": "Pluto" 
  }, {
    "id": "PaperinoId",
    "name": "Paperino",
    "children": true
  }
]
} 
```

有了这个，我们将展示
ROOT
+ Pippo
* Pluto
+ Paperino

### 任何项目 JSON

我们是否想点击 Pippo 来查看他的子对象，让我们回归；树请求目标`treeNode.item.children`，根据设计，RestStore 将其转换为对 object.id==PippoId 的请求 - 并且将使用`this.target/object.parent-relations/object.id`shcema 编译 URL。`data/PippoID`在这种情况下，服务器将通过 GET以最终 URL 的完整表示进行响应。

```
{
    "name": "Pippo",
    "id": "PippoId",
    "surname" : "foo",
    "shoosize" : "bar",
    "children": [
        {
            "name": "Baz",
            "id": "BazId"
        }, {
            "name": "Godfather",
            "id": "GodfatherId",
            "children": true
        }
    ]
} 
```

请注意，“完整表示对象”（顶层）具有额外的实体，例如 shoosize 和 surname。然而，孩子们仍然是一个“简短的表示对象”。

## 服务器端 PHP Rest 实现

因此，为了争论，这里介绍了如何使用 PHP 实现其余功能。我们将假设 papparazies 是 sql-db 中的一个表，并且实现了一个`getPaparazi($id)`with`getPapasKids($id)`函数来检索数据列。

首先，我们需要告诉 apache 如何通过 .htaccess 修改来处理这个问题。如果您是新手，请查看以下一些资源：

*   [mod_rewrite：URL 重写初学者指南](http://www.sitepoint.com/article/guide-url-rewriting/)
*   [模块 mod_rewrite](http://httpd.apache.org/docs/1.3/mod/mod_rewrite.html)
*   [URL重写指南](http://httpd.apache.org/docs/2.0/misc/rewriteguide.html)

把它放在 /.htaccess 中，其中 '/' 是你的 DocumentRoot - 并根据需要修改 RewriteBase

```
<IfModule mod_rewrite.c>
  RewriteEngine on
  # If your site is running in a VirtualDocumentRoot at http://example.com/,
  # uncomment the following line:
  # RewriteBase /
  # If no file nor a directory exists for the request url,
  # rewrite URLs of the form 'data/object' to the form 'index.php?rest=data/object'.

  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond %{REQUEST_URI} !=/favicon.ico
  RewriteRule ^(.*)$ index.php?rest=$1 [L,QSA]

</IfModule> 
```

从 index.php（所有不存在的文件请求的重写处理程序）中的 PHP 角度来看，我们可以简单地创建以下内容：

```
<?php

 if(isset($_REQUEST['rest'])) {

   // IMPORTANT; validate the request, e.g. check for referrer or similar

   $ids = explode("/", $_REQUEST['rest']);
   $pathCount = count($ids);
   $table = array_shift($ids); // as string, 'data/' by example
   if(!$table || $table == "") exit; //  ... validate more
   if($pathCount > 1) {
      $objectRequested = array_pop($ids); // as string '' for root
   }
   if($pathCount > 2) {
      $mid = $ids; // an array, holding rest of the path (middle relatives)
   }
   // with this in hand, we should be able to get the object. 
   // by example we're serving store data for paparazies which 
   // has the 'target' parameter set to 'data/'
   if($table == "data") {
      $fields = getPaparazi($objectRequested);
      $obj = new stdobject();
      $obj->name = $fields['name'];
      $obj->id = $objectRequested;
      $obj->shoosize = $fields['shoosize'];
      $obj->children = array();
      if( ( $children = getPapasKids($objectRequested) ) ) {
          foreach($children as $child) {
             $c_obj = new stdobject();
             $c_obj->name = $child['name'];
             $c_obj->id = $child['id'];
             if($child['hasChildren']) 
                $c_obj->children = true;
             $obj->children[] = $c_obj;
          }
      }
      header("Content-Type: application/x-json; charset=XXXXX");
      print json_encode($obj);
      flush();
      exit;
   }
 }
?> 
```

有关reststore 和树的编译信息，请参阅[SitePen 博客](http://dojotoolkit.org/documentation/tutorials/1.7/store_driven_tree/)

# c# - Windows中的等效任务集

> ID：10829974
> 
> 赞同：5
> 
> 时间：2012-05-31T08:30:11.200
> 
> 标签：c#, windows, performance

在 Linux 中，有一个[任务集](http://www.oreillynet.com/linux/cmd/cmd.csp?path=t/taskset)实用程序，它允许您为某个进程设置 CPU 亲和性。

在 Windows 环境中是否有等价物？
我想为我的产品设置最大 CPU 阈值，Windows 中是否存在提供此功能的现有机制？

如果有任何帮助，我的产品是在 .Net 中开发的

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-31T09:22:37.213

就在这里：

```
Starts a separate window to run a specified program or command.

START ["title"] [/D path] [/I] [/MIN] [/MAX] [/SEPARATE | /SHARED]
  [/LOW | /NORMAL | /HIGH | /REALTIME | /ABOVENORMAL | /BELOWNORMAL]
  [/NODE <NUMA node>] [/AFFINITY <hex affinity mask>] [/WAIT] [/B]
  [command/program] [parameters] 
```

尤其是选项`/AFFINITY <hex affinity mask>`。

```
AFFINITY    Specifies the processor affinity mask as a hexadecimal number.
            The process is restricted to running on these processors.

            The affinity mask is interpreted differently when /AFFINITY and
            /NODE are combined.  Specify the affinity mask as if the NUMA
            node's processor mask is right shifted to begin at bit zero.
            The process is restricted to running on those processors in
            common between the specified affinity mask and the NUMA node.
            If no processors are in common, the process is restricted to
            running on the specified NUMA node. 
```

如果您只想绑定到 CPU 0，请指定`0x1`. 要绑定到 CPU 1，掩码应该是`0x2`. 要绑定到 CPU 0 和 CPU 1，掩码应该是`0x3`，依此类推。

您还可以通过将相同的十六进制掩码值分配给`ProcessorAffinity`可通过调用获得的当前进程实例的属性，在代码中设置 CPU 亲和性`System.Diagnostics.Process.GetCurrentProcess()`：

```
using System.Diagnostics;

Process.GetCurrentProcess().ProcessorAffinity = (IntPtr)0x3; 
```

# ms-access - MS Access：WHERE 子句中的条件（如果参数为 null，则默认使用）

> ID：10829976
> 
> 赞同：1
> 
> 时间：2012-05-31T08:30:20.830
> 
> 标签：ms-access, parameters, where-clause

我需要一个参数化的交叉表查询。除了参数部分，我大部分时间都解决了。我有四个要应用的参数：ChangeID 和variant1、variant2 和variant3。ChangeID 为必填项，需要用户填写。Variant1..3 是可选的：用户可以填写一到三个变体，或者（如果 variant1 为空）应使用默认值。

默认是预定义变体的替代，实际填写的变体也应作为替代应用。

我想到了这样的事情：

```
PARAMETERS ChangeID Text (7), variant1 Text (10), variant2 Text (10), variant3 Text (10);
TRANSFORM Sum([Qty]*[inout]) AS QtyInOut
SELECT MatByOrder.CHpoint, MatByOrder.PN, MatByOrder.Description, MatByOrder.Price, MatByOrder.UoM
FROM Variants INNER JOIN MatByOrder ON Variants.BO = MatByOrder.BO

WHERE 
    (MatByOrder.CHpoint=ChangeID) AND 
    (IIF(isNull([variant1]); 
        (Variants.Variant="B100") OR (Variants.Variant="B200") OR (Variants.Variant="B300") OR (Variants.Variant="B400") OR (Variants.Variant="B500");
        (Variants.Variant=[variant1]) OR (Variants.Variant=[variant2]) OR (Variants.Variant=[variant3])
       )
    )

GROUP BY MatByOrder.CHpoint, MatByOrder.PN, MatByOrder.Description, MatByOrder.Price, MatByOrder.UoM 
```

但它不起作用。问题当然出在 WHERE 子句中的 IIF 中。

实现此目的的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T10:39:55.870

这应该有效：

```
WHERE 
    (MatByOrder.CHpoint=ChangeID) AND 
    (
       ( ([variant1] IS NULL) AND (Variants.Variant IN ('B200', 'B300', 'B400', 'B500')) )
       OR    
       ( ([variant1] IS NOT NULL) AND (Variants.Variant IN ([variant1], [variant2], [variant3])) )
    ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T09:34:09.423

我已经在我的语言环境中测试了 Instr 的想法，其中逗号是参数分隔符，它对我有用。我认为你应该用简单的查询来尝试这个想法，看看它是否适合。

这个想法是：

```
Instr(Nz(Var,String) & ",",Field & ",")>0 
```

在字段中添加逗号或其他分隔符对于避免错误匹配很重要。

```
PARAMETERS ChangeID Text (7), variant1 Text (10), variant2 Text (10), variant3 Text (10);
TRANSFORM Sum([Qty]*[inout]) AS QtyInOut
SELECT MatByOrder.CHpoint, MatByOrder.PN, MatByOrder.Description, MatByOrder.Price, MatByOrder.UoM
FROM Variants INNER JOIN MatByOrder ON Variants.BO = MatByOrder.BO

WHERE 
    (MatByOrder.CHpoint=ChangeID) AND 
    (Instr(Nz([variant1],"B100,B200,B300,B400,B500" 
               & [variant1] & "," & [variant2] & "," 
               & [variant3]) & ",", MatByOrder.CHpoint) > 0
    )

GROUP BY MatByOrder.CHpoint, MatByOrder.PN, MatByOrder.Description, MatByOrder.Price, MatByOrder.UoM 
```

# c# - 发送通知客户端

> ID：10829979
> 
> 赞同：0
> 
> 时间：2012-05-31T08:30:32.590
> 
> 标签：c#, .net, web-services, webmethod

我想通过调用另一种方法向订阅者（订阅者 ip 地址在服务器端的数据库中）发送通知（比如字符串）。每当我调用该方法时，输出都会出错。

```
[WebMethod]
public string GetGroupPath(string emailAddress, string password, string ipAddress)
{
    //SqlDataAdapter dbadapter = null;
    DataSet returnDS = new DataSet();
    string groupName = null;
    string groupPath = null;

    SqlConnection dbconn = new SqlConnection("Server = localhost;Database=server;User ID = admin;Password = password;Trusted_Connection=false;");

    dbconn.Open();

    SqlCommand cmd = new SqlCommand();
    string getGroupName = "select users.groupname from users where emailaddress = "+"'"+ emailAddress+"'"+ " and "+ "users.password = " + "'" +password+"'";
    cmd.CommandText = getGroupName;
    cmd.Connection = dbconn;
    SqlDataReader reader = null;
    try
    {
        reader = cmd.ExecuteReader();
        while (reader.Read())
        {
            groupName = reader["groupname"].ToString();
        }
    }
    catch (Exception)
    {
        groupPath = "Invalied";
    }

    dbconn.Close();
    dbconn.Open();

    if (groupName != null)
    {
        string getPath = "select groups.grouppath from groups where groupname = " + "'" + groupName + "'";
        cmd.CommandText = getPath;
        cmd.Connection = dbconn;

        try
        {
            reader = cmd.ExecuteReader();
            while (reader.Read())
            {
                groupPath = reader["grouppath"].ToString();
            }
        }
        catch
        {
            groupPath = "Invalied";
        }
    }
    else
        groupPath = "Invalied";
    dbconn.Close();

    if (groupPath != "Invalied") 
    {
        dbconn.Open();
        string getPath = "update users set users.ipaddress = "+"'"+ipAddress+"'"+" where users.emailaddress = " + "'" + emailAddress + "'";
        cmd.CommandText = getPath;
        cmd.Connection = dbconn; 
        cmd.ExecuteNonQuery();
        dbconn.Close();

    }

    NotifyUsers();
    //NotifyUsers nu = new NotifyUsers();
    //List<string> ipList = new List<string>();
    //ipList.Add("192.168.56.1");

    //nu.Notify();

    return groupPath;
}

private void NotifyUsers() 
{
    Socket sock = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp);
    byte[] ipb = Encoding.ASCII.GetBytes("255.255.255.255");
    IPAddress ipAddress = new IPAddress(ipb);

    IPEndPoint endPoint = new IPEndPoint(ipAddress, 15000);
    string notification = "new_update";
    byte[] sendBuffer = Encoding.ASCII.GetBytes(notification);
    sock.SendTo(sendBuffer, endPoint);
    sock.Close();  
} 
```

这是基本上必须要做的。在服务器端，我有一个监听线程，当服务器发送数据时它会收到通知（假设现在数据库包含客户端 IP 地址）。然后我调用 web 方法，它给出了一个错误“invalid IPAddress”atline

```
byte[] ipb = Encoding.ASCII.GetBytes("255.255.255.255"); 
```

谢谢 :) 因为这是我的第一篇文章，请善意地给我一个更好的反馈 :) 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T10:32:40.977

在通知中尝试以下代码，然后禁用防火墙设置...

```
try
{
    // Establish the remote endpoint for the socket.

    // This example uses port 11000 on the local computer.
    IPHostEntry ipHostInfo = Dns.Resolve(Dns.GetHostName())

    Socket sock = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp);

    IPAddress ipAddress = ipHostInfo.AddressList[0];
    IPEndPoint remoteEP = new IPEndPoint(ipAddress,15000);
    string notification = "new_update";
    byte[] sendBuffer = Encoding.ASCII.GetBytes(notification);
    sock.SendTo(sendBuffer, remoteEP );
    sock.Close();  
}
catch() {} 
```

希望这能解决问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T10:47:20.187

只是想补充一下

```
byte[] ipb = Encoding.ASCII.GetBytes("255.255.255.255");
IPAddress ipAddress = new IPAddress(ipb); 
```

可以简化为

```
IPAddress.Broadcast 
```

或者，如果你想使用另一个 IP 地址，你也可以使用 .Parse()

```
var ip = IPAddress.Parse("192.168.1.1"); 
```

**更新：**

实际上`Encoding.ASCII.GetBytes("255.255.255.255");`会给你一个完全不同的结果。

```
var bytes = Encoding.ASCII.GetBytes("255.255.255.255");

// bytes returns something like
// new byte[] { 50, 53, 53, 46... }

// what you want is
var bytes = new byte[] { 255, 255, 255, 255 }; 
```

# jquery - 使用 Ajax 上传文件时如何在控制器中获取提交值。导轨 3.2

> ID：10829981
> 
> 赞同：0
> 
> 时间：2012-05-31T08:30:37.580
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3

我的环境

*   导轨 3.2.1
*   ruby 1.9.3p194（2012-04-20 修订版 35410）[x86_64-darwin11.4.0]
*   jquery-rails (2.0.2)
*   回形针 (3.0.4)

我想在控制器中获得“提交”的价值。

```
<%= form_for @foo, :url => '/foo/edit/',:remote => true, :html => {:multipart => true}, :id => "peroform" do |f| %>
  <%= f.file_field :logo %>
  <%= f.submit "logo" %>
<% end %> 
```

当我不选择任何文件时，我可以获得提交值。

```
Parameters: {"utf8"=>"✓", "authenticity_token"=>"****", "commit"=>"logo"} 
```

但是我选择了一个文件，参数中的值被删除了。

```
 Parameters: 
    {"foo"=>{"logo"=>#<ActionDispatch::Http::UploadedFile:0x007fd2c0277e88 @original_filename="bar.png", @content_type="image/png", @headers="Content-Disposition: form-data; name=\"foo[logo]\"; filename=\"bar.png\"\r\nContent-Type: image/png\r\n", @tempfile=#<File:/tmp/RackMultipart20120531-44915-r5kb52>>}, "utf8"=>"✓", "authenticity_token"=>"*", "remotipart_submitted"=>"true", "X-Requested-With"=>"IFrame", "X-Http-Accept"=>"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript, */*; q=0.01"} 
```

我怎样才能获得提交价值？

然后我想像这样用户多次提交。我想在推送“徽标提交”时只保存“徽标”，但我想在推送“全部提交”时保存“名称”和“徽标”。

```
<%= form_for @foo, :url => '/foo/edit/',:remote => true, :html => {:multipart => true}, :id => "peroform" do |f| %>
  <%= f.file_field :logo %>
  <%= f.submit "logo" %>

  <%= f.text_field :name %>
  <%= f.submit "all" %>
<% end %> 
```

你对这个多重提交按钮有什么想法吗？

提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T10:22:58.680

嗯...我认为这是一个错误，但您可以绑定事件处理程序以提交按钮，并在提交之前插入额外的参数（提交名称）。然后在基于提交参数的控制器中决定你想要保存的内容。

# oracle - 如何在 SQL 语句中进行排序，同时赋予数字低于字符的值？

> ID：10829989
> 
> 赞同：1
> 
> 时间：2012-05-31T08:31:50.013
> 
> 标签：oracle, sorting, plsql

如何在 SQL 语句中进行排序，同时赋予数字低于字符的值？

例如：

*   “iPad Wi-Fi”应该出现在“iPad 2 Wi-Fi”之前
*   “iPad 2 Wi-Fi”应该出现在“iPad 3 Wi-Fi”之前
*   “iPad 3 Wi-Fi”应该出现在“iPhone”之前
*   “iPhone”应该出现在“iPhone 2”之前

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T08:35:42.277

可能最简单的方法是有一个单独的列，您可以按照您想要的排序方式填充该列。

然后通过确保它由插入/更新触发器设置来确保它保持一致。

通过在插入/更新时使用单独的列集，您可以保证仅在需要时才计算此订单的成本，而不是每次您`select`. DBA 通常会牺牲空间来获得更多时间。

并且触发器的使用保持了 ACID 属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T08:38:19.727

```
select *
from your_table
order by 
replace(replace(replace(replace(replace(name, '9', '0'), '8', '1'), '7', '2'), '6', '3'), '5', '4') asc 
```

# c# - 在模型中使用 LINQ 查询 (MVC)

> ID：10829992
> 
> 赞同：0
> 
> 时间：2012-05-31T08:32:03.707
> 
> 标签：c#, asp.net, asp.net-mvc, linq, controller

我正在创建一个 Web 应用程序，是否可以在模型中使用 LINQ 查询，而不是在控制器中使用它？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T09:14:11.827

我建议您在存储库类中使用您的 LINQ 查询。

然后你在你的控制器中使用你的 Repository 方法。

假设我有一个名为“CreateRepository”的存储库类，这是我的 Createcontroller：

```
 public class CreateController : Controller
    {
        CreateRepository CreateRepository = new CreateRepository();

        public ActionResult Index()
        {
            var ListOfAllUserNames = CreateRepository.GetAllUserNames();

            // etc etc 
            return View();
        } 
```

这是我的 CreateRepository 类：

```
public class CreateRepository
 {   

   public List<User> GetAllUserNames()
       {
          return db.User.OrderBy(f => f.Username).ToList();
       }
 } 
```

这是我上面提到的一个例子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T08:34:36.013

是的，您可以在模型中使用 LINQ 查询。

这是一个例子：

```
using System.Linq;
using System.Linq.Expressions;
.
.
.
public class PostRepository
{
    DataClassesDataContext db = new DataClassesDataContext();

    public IQueryable<Post> FindByParentId(int parentId)
    {
        return from post in db.Posts
               where post.ParentID == parentId
               select post;
    } 
```

# c# - C# 公共评论中的特殊字符

> ID：10829995
> 
> 赞同：2
> 
> 时间：2012-05-31T08:32:14.263
> 
> 标签：c#, visual-studio-2010, xml-comments

我有一个库，我必须为其创建 XML 文档。因此，对于所有公共方法和属性，我插入了 XML 注释。不幸的是，对于某些注释，我必须插入特殊字符 < 或 > 来描述返回类型（列表）。编译器继续发出无效字符警告并指示该字符`<`。
我如何说服编译器在没有警告的情况下接受这个字符？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-31T08:34:52.947

> 我如何说服编译器在没有警告的情况下接受这个字符？

你没有。您必须使用等效的 XML 实体 ( `&lt;`)

请注意，如果您使用该`<see cref="..." />`元素，则可以像这样指定类型：

```
<see cref="List{T}"/> 
```

# javascript - Jquery resizable插件，也Resize选项问题

> ID：10829996
> 
> 赞同：0
> 
> 时间：2012-05-31T08:32:16.480
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-resizable

当处理：“全部”选项时，我遇到了问题。总是会调整第二个元素的大小，以使该元素的左上角保持在同一位置。

如果我拖动第一个元素的左上角怎么办？然后我得到这个：http: [//jsfiddle.net/gcDYq/embedded/result/](http://jsfiddle.net/gcDYq/embedded/result/)

由于某种原因，与您正在调整大小的元素一起调整大小的元素是相对于左上角的。因此，这种逻辑导致了这个问题。

我该如何解决？

我希望这对问题是什么已经足够清楚了，你们可以帮助我:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T10:06:23.417

# silverlight - Linq to Entities 中的延迟查询迭代

> ID：10829997
> 
> 赞同：0
> 
> 时间：2012-05-31T08:32:20.803
> 
> 标签：silverlight, linq, mvvm

我在理解 LINQ to Entites 查询时遇到问题，它没有给我想要的结果。我有以下代码，它应该执行延迟查询并在 Silverlight Datagrid 中显示结果。

```
 public List<DispIRTSiteReports> DisplayIRTSiteReportsFilOn(List<IssueTypes> issueType, DateTime fDate, DateTime tDate)
  {

  try
        {

            var resultSet = from items in DataContext.IRT_Limited_View
                            select items;

            var iType = issueType.Select(i=>i.IssueName); //contains multiple selected issue type Names

            if (issueType.Count != 0)
            {
                foreach (var type in iType)
                {
                    var copy = type;
                    resultSet = resultSet.Where(items => items.Type_Text.Equals(copy));                       
                }                    
            }

            var newResultSet = (from q in resultSet
                                where q.Date_Time > fDate && q.Date_Time < tDate
                                select new DispIRTSiteReports
                                {                                        
                                    PhExt = q.Phone_Extension,
                                    IssueType = q.Type_Text,
                                    IssueSubType = q.Subtype_Text,
                                    IssueDes = q.Issue_Description
                                }).ToList();

            return newResultSet;

        }
        catch (Exception ex)
        {
            throw ex;
        } 
```

}

我选择了多个问题类型名称并将它们存储在 var iType 中，但是当我执行代码时，结果集包含 null，因为第一个“foreach”迭代使用第一个问题类型名称更改了结果集，当第二次迭代完成时，结果集无法匹配第二个问题类型名称，因此结果集变为空。

我想知道如何在不改变原来的resultSet的情况下查询resultSet，使resultSet包含选择的多个IssueType Names的对应数据。非常感谢您在这方面的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T11:54:09.143

您应该声明`DispIRTSiteReports`为`DataContract`：

```
[Serializable]
[DataContract]
public class DispIRTSiteReports
{                                             
   [Key]
   [DataMember]
   public long Id { get; set; }

   [DataMember]
   public string PhExt { get; set; }

   [DataMember]
   public string IssueType { get; set; }

   [DataMember]
   public string IssueSubType { get; set; }

   [DataMember]
   public string IssueDes { get; set; }
} 
```

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-31T18:02:32.527

问题是您添加了谓词，它转换为`AND`. 如果您使用`Contains`，您将获得与以下相同的语义`OR`：

```
resultSet = resultSet.Where(items => iType.Contains(items.Type_Text)); 
```

（注：无`foreach`循环）