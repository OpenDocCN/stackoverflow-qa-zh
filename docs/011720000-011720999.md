# StackOverflow 问答 11720000-11720999

# css - CSS - 调整窗口大小后背景丢失

> ID：11720000
> 
> 赞同：2
> 
> 时间：2012-07-30T10:51:50.007
> 
> 标签：css

我正在以下网站上工作：`http://91.146.110.84/~pacspeop/`

我即将完成，但注意到如果您使浏览器窗口小于容器的定义宽度（960px），则会出现滚动条（应该如此）。但是，当您向右滚动时，页眉和页脚会丢失任何内容。

任何人都知道我该如何解决这个问题？

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T10:58:39.997

嘿，现在像这样做身体最小宽度

```
body{
min-width:960px;
} 
```

# html - HTML5 localStorage 和 Dojo

> ID：11720003
> 
> 赞同：0
> 
> 时间：2012-07-30T10:52:01.560
> 
> 标签：html, dojo

我在 DOJO 工作，我的任务是我有一个 JSON 文件，数据来自 JSON url。所以现在我必须读取 JSON url 并使用 HTML5 localStorage 将数据保存到浏览器，保存后我必须从浏览器读取数据并且我必须在 DOJO 中显示。任何知道这件事的人请帮助我..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T11:11:37.460

**获取json数据的函数**

```
function accessDomain(dom_sclapi, handle) {
        var apiResponse;
        //accessSameDomain
        if(!handle) {
            handle = "json";
        }
        dojo.xhrGet({
            url : dom_sclapi,
            handleAs: handle,
            sync: true,
            headers: { "Accept": "application/json" },
            //Success
            load: function(Response) { 
                apiResponse = Response;
            },
            // Ooops!  Error!
            error: function(Error, ioArgs) {
                //apiResponse = Error;
                //console.log(ioArgs.xhr.status);
            }
        });
        //apiResponse
        return apiResponse;
        }
where dom_sclapi = <json url> 
```

**称呼**

`var data = accessDomain(<jsonurl>,'json');`

**然后**

```
console.log(data); 
```

您可以在控制台窗口中看到 json o/p。现在您可以使用显示到 html 页面，

```
dojo.forEach(data, function(eachData){
  //script for each json element eg: eachData.displayName;                                
}); 
```

# jquery - Jquery 兼容性问题 1.4 - 1.6

> ID：11720004
> 
> 赞同：0
> 
> 时间：2012-07-30T10:52:02.940
> 
> 标签：jquery

我正在运行两个脚本，一个只能使用 jQuery 1.4，另一个需要 1.6 才能正常工作。我确定版本之间存在一些明显的（对于知道的人）语法更改或某些内容，但我无法弄清楚。

这是 1.4 脚本：[http](http://demo.marcofolio.net/slot_machine/) ://demo.marcofolio.net/slot_machine/如果您查看演示，源代码中有两个位 JS 文件。另一个需要 1.6 的脚本是 jQuery isotope 插件：http: [//isotope.metafizzy.co](http://isotope.metafizzy.co)。所以我想我在问如何使 1.4 脚本与 1.6 兼容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T11:02:11.010

在使用多个 jQuery 库时了解[**jQuery.noConflict() 。**](http://api.jquery.com/jQuery.noConflict/)

许多 JavaScript 库使用 $ 作为函数或变量名，就像 jQuery 一样。在 jQuery 的例子中，$ 只是 jQuery 的别名，所以所有功能都可以在不使用 $ 的情况下使用。如果我们需要在 jQuery 旁边使用另一个 JavaScript 库，我们可以通过调用 $.noConflict() 将 $ 的控制权返回给另一个库：

```
<script type="text/javascript" src="other_lib.js"></script>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
  $.noConflict();
  // Code that uses other library's $ can follow here.
</script> 
```

另见这篇文章[**我可以在同一页面上使用多个版本的 jQuery 吗？**](https://stackoverflow.com/questions/1566595/can-i-use-multiple-versions-of-jquery-on-the-same-page)

# ruby-on-rails - kgio/独角兽失败

> ID：11720005
> 
> 赞同：4
> 
> 时间：2012-07-30T10:52:13.457
> 
> 标签：ruby-on-rails, nginx, unicorn

我有 unicorn/kgio/rails 的问题。当我使用 nginx 启动独角兽服务器并尝试通过 Web 界面访问网站时，我在 unicorn.stderr.log 收到以下错误

```
unicorn worker[1] -c config/unicorn.rb -E production -D: symbol lookup error: /var/www/project/shared/bundle/ruby/1.9.1/gems/kgio-2.7.4/lib/kgio_ext.so: undefined symbol: rb_thread_io_blocking_region
E, [2012-07-30T13:43:46.580856 #17326] ERROR -- : reaped #<Process::Status: pid 3863 exit 127> worker=1 
```

有谁能够帮我？

随时询问任何信息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T18:37:47.477

您是否尝试过使用 unicorn_rails 来启动它？

直接通过 Rack 启动它可能存在问题，这将是您键入时发生的情况

```
unicorn blah blah blah 
```

代替

```
unicorn_rails blah blah blah 
```

我记得这是我们一个较旧的独角兽应用程序中的一个问题。有关更多信息，请参阅此链接[Unicorn Usage](http://unicorn.bogomips.org/index.html)。查看“使用”部分。

# c# - C#：方法类型之间的区别

> ID：11720010
> 
> 赞同：4
> 
> 时间：2012-07-30T10:52:24.063
> 
> 标签：c#, methods, static-methods, public-method

> **可能重复：**
> [Public、Private、Protected 和 Nothing 之间有什么区别？](https://stackoverflow.com/questions/614818/what-is-the-difference-between-public-private-protected-and-nothing)

我有一个问题：这些方法类型有什么区别？

```
Static , Public , Internal , Protected , const , void 
```

抱歉，我的问题对专业人士来说可能看起来很尴尬，但我真的很想了解其中的区别，顺便说一下，我搜索并阅读了有关它们的文章，但它们都很大而且没有很好的描述，我只需要一个很好的例子，这样我就可以做每次我做一个函数时都会做出决定，因为我总是从私有 void 开始......

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-07-30T11:03:34.320

您的基本方法如下：

```
[access modifier?] [static?] [return type or void] [name] ([parameters?]) 
```

有一些额外的点点滴滴，但这是你的开始。

**访问修饰符**

其中一些是访问修饰符，它们控制哪些类可以访问（可以调用）您放置修饰符的任何内容。

```
// Anyone can call me
public int SomeMethod() { return 1; } 

// Only classes in the same assembly (project) can call me
internal int SomeMethod() { return 1; } 

// I can only be called from within the same class
private int SomeMethod() { return 1; }

// I can only be called from within the same class, or child classes
protected int SomeMethod() { return 1; } 
```

**静止的**

`Static`表示方法/变量由类的所有实例共享。它可以与上面的访问修饰符结合使用。

```
public class Test
{
  static int a = 0;
  public int SomeMethod() { a = a + 1; return a; }
}

Test t1 = new Test();
t1.SomeMethod(); // a is now 1
Test t2 = new Test();
t2.SomeMethod(); // a is now 2

// If 'a' wasn't static, each Test instance would have its own 'a' 
```

**空白**

`void`只是意味着你有一个不返回任何东西的方法：

```
public void SomeMethod() 
{ 
  /* I don't need to return anything */ 
} 
```

**常量**

`const`表示不能修改变量：

```
const int LIFE = 42;
// You can't go LIFE = 43 now 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-30T10:53:58.010

关键字`public`、`private`和`protected`( `protected`)`internal`被称为[访问修饰符](http://msdn.microsoft.com/en-us/library/ms173121.aspx)，它们确定谁可以访问给定的类和/或其成员，这有助于[封装](http://en.wikipedia.org/wiki/Encapsulation_%28object-oriented_programming%29)和[抽象](http://en.wikipedia.org/wiki/Abstraction_%28computer_science%29)。

存储修饰符（感谢 AVD）`static`定义了一个[静态](http://msdn.microsoft.com/en-us/library/98f28cdx%28v=vs.100%29.aspx)方法、属性或类，[`const`](http://msdn.microsoft.com/en-us/library/e6w8fe1b)创建一个常量并[`void`](http://msdn.microsoft.com/en-us/library/yah0tteb%28v=vs.100%29.aspx)指示返回类型为“无”。

在开发过程中，通常以 开头`private void DoSomething()`，并且只有当您可以并且需要从外部访问该方法时，才能增加可访问性。如果您希望它在同一个命名空间中被覆盖，您可以使用`protected`. 如果您正在编写一个库以供另一个应用程序（在不同的命名空间中）使用，则标记它`public`，依此类推。

如果您希望它在某个时候返回某些内容，请更改`void`为适当的类型。所有这些（包括决定何时使某些东西成为静态或恒定的）在大多数基本的 OO 书籍和教程中都有解决，尝试选择一个。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-30T10:55:22.307

这些被称为`Access Modifiers`

> **上市**
> 
> 类型或成员可以由同一程序集或引用它的另一个程序集中的任何其他代码访问。
> 
> **私人的**
> 
> 类型或成员只能由同一类或结构中的代码访问。
> 
> **受保护**
> 
> 类型或成员只能由同一类或结构中的代码或派生类中的代码访问。
> 
> **内部的**
> 
> 类型或成员可以由同一程序集中的任何代码访问，但不能从另一个程序集中访问。
> 
> **受保护的内部**
> 
> 同一程序集中的任何代码或另一个程序集中的任何派生类都可以访问该类型或成员。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-30T10:56:03.910

除了 CodeCaster 所说的...

void 在声明返回值类型的地方。void 表示给定方法中没有返回类型。

const 表示该类型是一个[常量](http://msdn.microsoft.com/en-us/library/ms173119.aspx)，将被定义一次，然后不会被修改。

# ruby-on-rails-3 - 在 Rails 中检索子列表 3 级

> ID：11720015
> 
> 赞同：2
> 
> 时间：2012-07-30T10:52:42.300
> 
> 标签：ruby-on-rails-3, mongoid

我有一个包含一个项目的数据模型，其中包含一个建议列表，每个建议都是由用户创建的。有没有办法可以创建在项目中提出建议的所有不同用户的列表？

我正在使用 Mongoid 3。我在想这样的事情，但它不起作用：

```
@project = Project.find(params[:id])
@users = Array.new
@users.push(@project.suggestions.user)  <-- this doesn't work 
```

有任何想法吗？这是我的模型结构：

```
class Project
  include Mongoid::Document
  has_many :suggestions, :dependent => :destroy
  ...
end

class Suggestion
  include Mongoid::Document
  belongs_to :author, class_name: "User", :inverse_of => :suggestions
  belongs_to :project
  ...
end

class User
  include Mongoid::Document
  has_many :suggestions, :inverse_of => :author
  ...
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T15:19:26.393

虽然 Mongoid 可以为 MongoDB 提供关系的外观，并且 MongoDB 可以保存外键字段，但这些关系没有底层支持。以下是一些可能会帮助您获得所需解决方案的选项：

**选项 1：非规范化与您的访问模式相关的数据**

换句话说，复制一些数据以帮助您提高频繁类型的查询效率。您可以通过以下几种方式之一来做到这一点。

一种方法是将一个新的数组字段添加到`User`可能称为`suggested_project_ids`. 您也可以将一个新的数组字段添加到`Project`被调用`suggesting_user_ids`的 . 无论哪种情况，您都必须确保在提出建议时更新此 ObjectIds 数组。MongoDB 通过[`$addToSet`](http://www.mongodb.org/display/DOCS/Updating/#Updating-%24addToSetand%24each). 然后从 Mongoid 查询看起来像这样：

```
User.where(suggested_project_ids: some_project_id) 
```

**选项 2：非规范化数据（类似于选项 1），但让 Mongoid 管理关系**

```
class Project
  has_and_belongs_to_many :suggesting_users, class_name: "User", inverse_of: :suggested_projects
end

class User
  has_and_belongs_to_many :suggested_projects, class_name: "Project", inverse_of: :suggesting_users
end 
```

从这里开始，您仍然需要在提出新建议时管理向项目添加建议用户，但您可以使用对象本身来执行此操作。Mongoid 将在后台处理设置的逻辑。之后，找到对项目提出建议的唯一用户集如下所示：

```
some_project.suggesting_users 
```

**选项 3：执行两个查询以获得结果**

根据对每个项目提出建议的用户数量，您可能无需执行任何非规范化即可逃脱，而只需进行两次查询。

首先，获取对项目提出建议的用户 ID 列表。

```
author_ids = some_project.suggestions.map(&:author_id)
users = User.find(author_ids) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T14:33:33.867

In your `Project` class add this :

```
has_many :users, :through => :suggestions 
```

You'll then be able to do :

```
@users.push(@project.users) 
```

More info on `:through` here :

[http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-has_many](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-has_many)

For mongoid, take a look at this answer : [How to implement has_many :through relationships with Mongoid and mongodb?](https://stackoverflow.com/questions/7000605/how-to-implement-has-many-through-relationships-with-mongoid-and-mongodb)

# zend-framework - 在magento货币符号后添加空格

> ID：11720019
> 
> 赞同：1
> 
> 时间：2012-07-30T10:52:52.057
> 
> 标签：zend-framework, magento, magento-1.7

如何在magento1.7货币符号后添加空格。

我已将默认货币更改为玻利维亚玻利维亚诺。它的值为 BOB。

在产品列表页面中，它像 VEB12.98 一样显示，我需要像 VEB 一样。12.98

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T13:23:20.547

从 1.7 开始，您实际上可以直接在管理区域中更改/编辑货币符号：

系统 > 管理货币 > 符号

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-18T08:58:57.767

相应地在符号 ¤ 附近编辑语言文件**lib/Zend/Locale/Data/en.xml** 或 **lib/Zend/Locale/Data/en_US.xml 。**

`<currencyFormat> <pattern>¤ #,##0.00;(¤ #,##0.00)</pattern> </currencyFormat>`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-30T14:34:36.867

如果您使用的是 Magento Community Version < 1.7，您可以自己添加空间。

```
$_price = Mage::helper('core')->currency($_product->getPrice()); 
```

从上面的代码中获取价格 html，然后你可以使用 php 函数插入点和空格：

```
$_price = str_replace('VEB', 'VEB. ', $_price); 
```

如果您已经使用过 Magento 1.7，Drew Hunter 的回答可能对您有所帮助。

# php - PHP - 包含和所需文件的相对路径

> ID：11720026
> 
> 赞同：0
> 
> 时间：2012-07-30T10:53:37.327
> 
> 标签：php

好吧，我正在使用一个由一些复杂的文件和目录结构组成的框架。在我的应用程序中，我只需要一个文件，如下所示：

```
require "framework/mainfile.php"; 
```

在 mainfile 中，它包括其他文件，例如：

```
include "framework/classes/class1.php";
.... 
```

在某些类文件中，它以相同的方式包含其他文件；

我需要的是更改框架文件的位置，从而更改框架文件的相对路径，以便拥有类似的东西

```
include "lib/framework/mainfile.php"; 
```

但我不想查看所有文件并更改每个文件的路径，因为当我更改为新版本的框架时，我总是不得不再次这样做。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T10:55:47.497

您可以使用`__DIR__`获取当前脚本所在目录的绝对路径。然后您可以使用：

```
include __DIR__ . '/classes/class1.php'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T11:08:26.997

使用 `set_include_path(implode(PATH_SEPARATOR, array( realpath('Your/updated/path'), get_include_path(), ));` ，因此您当前的包含路径不会受到影响，并且您无需更改所有文件

# sql-server-2008 - 具有日期字段的多列上唯一的自定义复合

> ID：11720027
> 
> 赞同：-1
> 
> 时间：2012-07-30T10:53:40.943
> 
> 标签：sql-server-2008, database-design

我有一张表 voucher_master。我想制作满足以下条件的复合唯一键

```
voucher_type    voucher_sub_type     date        Abbreviation
 INV                DOM              1/1/2000       ID            allowed
 INV                DOM              15/1/2000      ID            allowed

 INV                INT              1/1/2000       ID            not allowed
 INV                INT              15/3/2012      ID            not allowed 
```

`abbreviation`如果为 和 的任何组合创建特定的，则`voucher_type`无法创建`voucher_sub_type`相同的。`abbreviation``voucher_type``voucher_sub_type`

但是，如果为凭证类型和凭证子类型创建缩写，则可以为最初创建的相同组合创建相同的缩写，但日期不同。不能为任何其他组合创建相同的缩写。

如何在 sql server 中执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T15:36:25.857

我认为您的要求意味着该表应规范化为 2 个表：

**优惠券**
，其中`Abbreviation`和`(voucher_type, voucher_sub_type)`是`UNIQUE`：

```
voucher_type   voucher_sub_type   Abbreviation
  INV            DOM                ID          allowed
  INV            INT                ID     not allowed (if the above row exists) 
```

**Voucher_Dates**
where `Abbreviation`is a `FOREIGN KEY`to `Voucher(Abbreviation)`and
`(date, Abbreviation)`is either `PRIMARY`or `UNIQUE`:

```
 date        Abbreviation
1/1/2000       ID           
15/1/2000      ID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T12:57:56.703

我不擅长服务器 2008 中的 SQL 语法，所以我将编写伪代码，希望您可以编写代码..

if (date!=@newDate where invoice_type=@newVoucher AND coupon_SubType=@newSubVoucher) THEN { 插入记录 }

上面要做的是比较是否存在与您尝试插入的凭证类型相同的日期，如果没有，则可以输入记录。可能有很大的改进空间，但我希望有人可以编辑和添加更多来帮助你。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-31T07:08:20.523

谢谢大家，

我解决了存储过程的问题，并在插入和更新期间检查了所需的条件

# excel - 计算日期出现的次数并用它制作图表

> ID：11720031
> 
> 赞同：57
> 
> 时间：2012-07-30T10:53:51.927
> 
> 标签：excel, date, graph, excel-2010, unique

我有一个日期列表，其中的每个日期都可以出现不止一次。我想计算每个日期出现的次数（直方图）并将其显示在图表中（Y 轴是日期出现的次数，X 轴是日期本身）？

样品清单：

```
19/05/2012
19/05/2012
19/05/2012
17/05/2012
17/05/2012
16/05/2012
16/05/2012
16/05/2012
16/05/2012
15/05/2012
15/05/2012
15/05/2012
15/05/2012
12/05/2012
12/05/2012
12/05/2012
7/05/2012 
```

在过去的几年里，我点击了每个菜单选项，但我从来没有找到任何具体的内容。这是以某种方式使用数据透视表的情况吗？

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-07-30T11:07:37.277

最简单的是做一个数据透视图。选择日期数组（带有标题）并创建一个新的数据透视图（插入/数据透视图/确定）然后在字段列表窗口中，首先将日期列拖放到轴列表中，然后首先拖放到值列表中。

**第1步：**

![第1步](../Images/a6471863a0fec62659f2028b9a623ecf.png)

**第2步：**

![第2步](../Images/cf6677e7cc935b2c161ab8f44674a059.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-30T11:19:19.033

如果您有 Excel 2010，则可以将数据复制到另一列，然后选择它并选择数据 -> 删除重复项。然后，您可以`=COUNTIF($A$1:$A$100,B1)`在它旁边写下并将公式复制下来。这假设您的值在范围内`A1:A100`，并且去重的值在 B 列中。

# android - 在android中打开默认文件管理器？

> ID：11720032
> 
> 赞同：4
> 
> 时间：2012-07-30T10:53:53.593
> 
> 标签：android, file-manager

我的 Android 设备包含默认文件管理器和一个按钮（打开）。单击按钮时如何打开文件管理器？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-30T11:17:45.523

在你的按钮监听器中尝试这样的事情：

```
openButton.setOnClickListener(new OnClickListener() {

   @Override
   public void onClick(View v) {
      Intent intent = new Intent();
      intent.setAction(Intent.ACTION_GET_CONTENT);
      intent.setType("file/*");
      startActivity(intent);
   }
} 
```

# eclipse - 如何将结果保存到eclipse搜索的文本中？

> ID：11720035
> 
> 赞同：0
> 
> 时间：2012-07-30T10:54:14.380
> 
> 标签：eclipse, search

我想搜索特定的正则表达式并将搜索到的行保存到文件中。

有没有可用的解决方案来实现这一目标？

# c++ - 原型模式

> ID：11720037
> 
> 赞同：4
> 
> 时间：2012-07-30T10:54:25.500
> 
> 标签：c++, design-patterns, prototype-pattern

根据维基百科原型模式是：原型模式是在软件开发中使用的创建设计模式，当要创建的对象类型由原型实例确定时，原型实例被克隆以产生新对象。此模式用于：

1.  避免在客户端应用程序中使用对象创建者的子类，就像抽象工厂模式一样。

2.  避免以标准方式（例如，使用关键字）创建新对象的内在成本，`new`因为它对于给定的应用程序来说过于昂贵。

* * *

我在 C++ 中看到了这种模式的某些演示代码，它们都使用复制构造函数。任何人都可以解释第二点是如何应用的（通常以及在 C++ 的上下文中），因为我们无论如何都在克隆函数中使用复制构造函数。如果可以在没有复制构造函数的情况下完成，那么示例代码片段会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T10:58:05.153

您可以复制而无需动态分配。例如，这是一个只发生在本地范围内的克隆：

```
Foo prototype;

void local()
{
    Foo x = prototype; // first copy
    x.mutate();
    Foo y = x;         // another copy
} 
```

从来没有使用过动态分配。

确实，它`return new Foo(*this);` *也会*创建一个副本，但更重要的是*该*对象是动态分配的。*这*就是你的文章所暗示的成本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T09:19:28.233

在我用 Java 制作的一个游戏中，我遇到了一个非常符合原型模式的有趣情况。你看，我有这个 Animation 对象，它存储了一个图像容器来翻阅，以及一些其他数据，这些数据跟踪自上一帧渲染以来的时间、它在哪一帧上、动画是否正在运行等.

我发现多个角色使用同一个动画对象会导致问题。如果两个角色共享一个动画，他们会在相互冲突的时间打开和关闭动画。我会让人们用行走动画静止不动，或者用站立动画移动。动画对象的创建既昂贵又耗时，比如创建精灵、设置它们要显示的时间量、创建图像的间隔队列等。

相反，我将 Animation 对象设为原型对象。如果一个动画克隆自己，它会与所有其他动画共享原始帧集合，因为这些动画是不可变的，但构建起来也很昂贵。相反，新对象将共享这个不可变的基础，但拥有自己的关于绘制哪个帧以及何时绘制的信息。

把它想象成投影仪。当它被克隆时，新投影机可能有它自己的信息，比如它是否在运行，它在哪个帧上，等等，但它可能使用与原始投影机相同的胶片。他们不互相绊倒的原因是这部电影是不变的。（而且创建成本很高）

老实说，以这种方式使用原型是实现享元模式的好方法。共享对象的创建成本很高。如果你“克隆”它们，它们将被实例化为新的瞬态，但仍然与它的创建者共享那些昂贵的基础对象。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-30T11:00:18.467

调用内部不使用动态内存的对象的复制构造函数比通过在动态内存中执行任何分配要快得多`new`。因为动态内存中的分配是一种系统调用。

# windows-phone-7 - 在 Metro 应用程序中使用 Web 服务？

> ID：11720043
> 
> 赞同：2
> 
> 时间：2012-07-30T10:54:48.453
> 
> 标签：windows-phone-7, microsoft-metro, windows-runtime, winrt-async

我是 Windows 8 Metro 应用程序开发的新手，请让我帮助解决这个问题。

我想在我的 Metro 应用程序中使用 Web 服务，但服务参考 url 是动态的。

在我的应用程序中，将为用户提供在文本框中指定 url 的规定，因此我需要连接到该 Web 服务，这意味着服务参考 url 将发生变化。

到目前为止，我正在以传统方式连接到 Web 服务，例如通过添加服务引用并创建实例并使用该实例调用该 Web 服务中的所有方法来提供特定的服务引用。

但是，1）如果服务参考网址发生变化，我应该如何使用 Web 服务。2）访问该服务内的各个服务方法（通过传递一些参数作为输入来调用该方法）。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T19:19:26.283

如果您有不同位置的相同服务，只需使用“添加服务引用...”添加它并在服务客户端构造函数中添加指定的 URL：

```
var svc = new DataServiceClient("BasicHttpBinding_DataService", 
    "http://url.com/DataService.svc"); 
```

`BasicHttpBinding_DataService`是来自客户端配置的（生成的）绑定名称（在执行“添加新的 Web 引用...”时自动生成）：

例子`ServiceReferences.ClientConfig`

```
<configuration>
    <system.serviceModel>
        <bindings>
            <basicHttpBinding>
                <binding name="BasicHttpBinding_DataService" maxBufferSize="2147483647"
                    maxReceivedMessageSize="2147483647">
                    <security mode="TransportWithMessageCredential" />
                </binding>
            </basicHttpBinding>
        </bindings>
        <client>
            <endpoint address="https://localhost:44300/Services/DataService.svc"
                binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_DataService"
                contract="DataService.DataService" name="BasicHttpBinding_DataService" />
        </client>
    </system.serviceModel>
</configuration> 
```

上面的代码可用于将地址（例如`https://localhost:44300/Services/DataService.svc`）更改为运行时生成的地址...

看看这个：[http ://blog.rsuter.com/?p=281](http://blog.rsuter.com/?p=281)

# php - Jquery，AJAX 和 PHP，表单提交不起作用

> ID：11720046
> 
> 赞同：0
> 
> 时间：2012-07-30T10:55:07.200
> 
> 标签：php, javascript, jquery, ajax, forms

基本上我正在尝试为表单创建验证。我希望它检查它是否可以连接到数据库，如果为真则继续到另一个页面，如果为假则返回错误。

我输入了错误的详细信息以使其仅显示错误，但不知何故它总是在页面加载时返回“TRUE”……而且每次我点击提交时，无论我的输入如何，它都不会做任何事情……

谢谢

```
 <script>
      $(document).ready(function(){
    var u = $('#username');
    var s = $('#server');
    var p = $('#password');

    $('#iValForm').submit(
    $.post("connect.php", {u: u.val(),p: p.val(),s: s.val()}, function(fd){
        if (fd == "true"){
        alert("Is: " + fd);
        return false;
                        } // if1
        if (fd == "false"){
        alert("Is2: " + fd);
        return false;
                        } // if2
    } //post function

    ) //Post    
    ) //submit
  }) //document

      </script>

    <form class="iValForm" id="iValForm" method="post">
    <fieldset>
    <legend id="error"> </legend>
    <p>
        <label for="username">Username </label>
        <input id="username" name="username" class="required" /> </input>
    </p>
    <p> 
        <label for="password">Password</label>
        <input id="password" name="password" class="required"/> </input>
    </p>

    <p> 
        <label for="server">Server</label>
        <input id="server" name="server" class="required"/> </input>

    </p>
    <p>
         <input class="submit" type="submit" value="Submit"/>
    </p>
    </fieldset>
    </form> 
```

连接.php

```
<?php
$user = $_POST['u'];
$password = $_POST['p'];
$server = $_POST['s'];

@$con = mysql_connect ($server, $user, $password);

if (!$con) { 
    $response = "false";
    echo $response;

    } else { 
        $response = "true";
        echo $response;
    }

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T10:58:17.920

更改您的 php 脚本

```
if (!$con) { 
    $response = 'false';
    echo $response;

    } else { 
        $response = 'true';
        echo $response;
    } 
```

在javascript中

```
if (data == 'false') 
```

# c++ - 指针立即变为 NULL

> ID：11720048
> 
> 赞同：2
> 
> 时间：2012-07-30T10:55:14.547
> 
> 标签：c++

我有以下 LLVM 代码。奇怪的是，`si`类型变量`StoreInst`在 if 块外部分配新指令后立即变为 null(0)，而我已在外部范围内声明它。这里发生了什么？

```
 Value *OldVal = NULL;
        StoreInst* si = NULL;

        if ( ... )
        {
            if ( ... )
            {
                ....

                if ( ... )
                {
                    ...
                    StoreInst* si = new StoreInst(...);
                    errs() << "si = " << si << "\n"; // Get some address here
                }
                errs() << "-->SI = " << si << "\n"; // Here I get NULL, why?
            }
            ...
        } 
```

我得到这样的输出，

```
si = 0x1822ba0
-->SI = 0x0 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-30T10:56:39.437

`StoreInst* si = new StoreInst(...);``si`- 你在这里隐藏了之前的名字

当范围结束时`}`- 您会看到另一个指针的值

这是您所做的示例：

```
int val = 0; //first val
{
    int val = 10; //other val (let's call it second)
    cout << val; //second val
} // second val is destroyed here
cout << val; //first val 
```

为了简单起见，我`int`在示例中使用了它。实际上它可以是任何类型

# sql - oracle sql developer tool - 提交后数据不可用

> ID：11720049
> 
> 赞同：2
> 
> 时间：2012-07-30T10:55:14.023
> 
> 标签：sql, database, oracle, insert

在表中插入数据。如果我执行选择查询，我可以看到插入的数据。但是一旦我执行提交，然后在同一个窗口上执行选择查询，没有找到记录。

它看起来很奇怪。不知道是什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T05:51:29.727

我找到了原因。它是一个**全局临时表**，其中该表被创建为 **ON COMMIT DELETE ROWS**。

# php - 当在页面下方查询路径时，如何在 php 生成的 pdf 文件上放置徽标？

> ID：11720055
> 
> 赞同：0
> 
> 时间：2012-07-30T10:55:25.780
> 
> 标签：php, image, pdf, fpdf

我的第一个 php 问题...

我正在使用 fpdf 生成 pdf 文件。我正在做的网站的原始版本在打印输出上使用了通用图像。我想将其更改为基于 id 的图像。

我的问题是在检索 ID 的查询运行之前声明了带有图像的标题。这可能很容易解决，但不是零 php-exp...

这是我的代码：

```
<?php
require('fpdf.php');
import_request_variables("GP", "rvar_");

$prn_con = mysql_connect('localhost', 'root', '');
mysql_select_db('db');

class PDF extends FPDF{
    function Header(){
        $this->Image('../../images/logo_generic.gif',170,8,30);
        }
    }

$pdf=new PDF();
$pdf->Open();
$tok = strtok($rvar_bestellkeys,",");

while ($tok){
    $result = mysql_query('SELECT * FROM bk WHERE bestellkey = "'.$tok.'"');
    $i = 0; 
    $fCount = mysql_num_fields($result);
    while($row=mysql_fetch_row($result)){
        while ($i < $fCount){
            $fName = mysql_field_name($result, $i); 
            $$fName = trim($row[$i]);
            $i++; 
            $strcont = strlen ($$fName);
            }
            $i=0; 
    } 
```

查询结果之一是我要包含在 header() 徽标路径中的 ID。

**问题**：
如何从我的内部设置 header() 路径`while-loop`？循环打印出文档（单页/多页），每个页面的右上角都应该有徽标。

感谢帮助！

**编辑：**
这是整个 php 脚本：

```
<?php
require('fpdf.php');
import_request_variables("GP", "rvar_");

$prn_con = mysql_connect('localhost', 'root', '');
mysql_select_db('db');

$resultsprache = mysql_query("SELECT * FROM sprachen WHERE sprache = '".$rvar_sprache."'");
while($row=mysql_fetch_row($resultsprache)){
    $fName = trim($row[2]);
    $$fName = trim($row[3]);
    }

$FileN = $tx_bestellung. '_'.date("YmdHis").'.pdf';
$title = $tx_bestellung;

class PDF extends FPDF{
    function Header(){
        $this->Image('../../images/logo_klein.gif',170,8,30);
        }
    }

 $pdf=new PDF();
 $pdf->Open();
 $pdf->AliasNbPages();
 $pdf->AddPage();
 $pdf->SetTitle($title);
 $pdf->SetFont('Arial','',8);

 $tok = strtok($rvar_bestellkeys,",");

 while ($tok){
    $result = mysql_query('SELECT * FROM bK WHERE bestellkey = "'.$tok.'"');
    $i = 0; 
    $fCount = mysql_num_fields($result);
    while($row=mysql_fetch_row($result)){
        while ($i < $fCount){
            $fName = mysql_field_name($result, $i); 
            $$fName = trim($row[$i]);
            $i++; 
            $strcont = strlen ($$fName);
            }
        $i=0; 
    }
$pdf->Cell(190,7,$tx_bestellung. " " .$tx_nr. " " .$bestellkey,0,1,'L');
    $pdf->Ln(8);
$pdf->Cell(190,5,$tx_verkaeufer,0,1);
$pdf->Cell(30,4,'ILN/GLN:',0,0);
$pdf->Cell(65,4,$vk_iln,0,1);
$pdf->Cell(30,4,$tx_firma. ':',0,0);
$pdf->Cell(65,4,$vk_firma,0,0);
$pdf->Cell(30,4,$tx_bestellnummer. ':',0,0);
$pdf->Cell(65,4,$bestellkey,0,1);
$pdf->Cell(30,4,$tx_adresse. ':',0,0);
$pdf->Cell(65,4,$vk_adresse,0,0);
$pdf->Cell(30,4,$bestelldatum. ':',0,0);
    $bestelldatum = (substr($bestelldatum, 8,2)).'.'.(substr($bestelldatum, 5, -3)).'.'.(substr($bestelldatum, 0, -6));
$pdf->Cell(65,4,$bestelldatum,0,1);
$pdf->Cell(30,4,$tx_plz. ', ' .$tx_ort. ':',0,0);
$pdf->Cell(65,4,$vk_plz.' '.$vk_ort,0,0);
.... 
$i=0; 
$result = mysql_query('SELECT * FROM bP WHERE bestellkey = "'.$tok.'"');
$fCount = mysql_num_fields($result);
$pdf->Cell(9,8,$tx_pos,1,0,'C');
$pdf->Cell(23,8,"EAN/GTIN",1,0,'C');
$pdf->Cell(43,8,$tx_bezeichnung,1,0,'C');
$pdf->Cell(10,8,$tx_groesse,1,0,'C');
$pdf->Cell(10,8,$tx_farbe,1,0,'C');
$pdf->Cell(15,8,$tx_preis,1,0,'C');
$pdf->Cell(12,8,$tx_einheit,1,0,'C');
$pdf->Cell(15,8,$tx_menge,1,0,'C');
$pdf->Cell(15,8,$tx_menge. "\n" .$tx_bestaetigt,1,0,'C');
$pdf->Cell(18,8,$tx_summe,1,1,'C');
...

$tok = strtok(",");
if($tok != ""){
    $pdf->AddPage();
}
}

mysql_close($prn_con);
$pdf->Output($FileN, 'D');

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T11:24:22.720

快速且很脏，但应该可以：

```
 <?php
    require('fpdf.php');
    import_request_variables("GP", "rvar_");

    $prn_con = mysql_connect('localhost', 'root', '');
    mysql_select_db('db');

    $resultsprache = mysql_query("SELECT * FROM sprachen WHERE sprache = '".$rvar_sprache."'");
    while($row=mysql_fetch_row($resultsprache)){
        $fName = trim($row[2]);
        $$fName = trim($row[3]);
        }

    $FileN = $tx_bestellung. '_'.date("YmdHis").'.pdf';
    $title = $tx_bestellung;

    $tok = strtok($rvar_bestellkeys,",");

    while ($tok){
        $result = mysql_query('SELECT * FROM bK WHERE bestellkey = "'.$tok.'"');
        $i = 0; 
        $fCount = mysql_num_fields($result);
        while($row=mysql_fetch_row($result)){

            if ($something === true) {
                $my_magic_id = $row['my_magic_id_column'];
            }

            if (isset($my_magic_id) && !class_exists('PDF')) {
                class PDF extends FPDF{
                    function Header(){
                        global $my_magic_id;
                        $this->Image('../../images/logo_klein.gif',170,8,30);
                        }
                    }

                $pdf=new PDF();
                $pdf->Open();
                $pdf->AliasNbPages();
                $pdf->AddPage();
                $pdf->SetTitle($title);
                $pdf->SetFont('Arial','',8);

            }

            while ($i < $fCount){
                $fName = mysql_field_name($result, $i); 
                $$fName = trim($row[$i]);
                $i++; 
                $strcont = strlen ($$fName);
                }
            $i=0; 
        }
    $pdf->Cell(190,7,$tx_bestellung. " " .$tx_nr. " " .$bestellkey,0,1,'L');
        $pdf->Ln(8);
    $pdf->Cell(190,5,$tx_verkaeufer,0,1);
    $pdf->Cell(30,4,'ILN/GLN:',0,0);
    $pdf->Cell(65,4,$vk_iln,0,1);
    $pdf->Cell(30,4,$tx_firma. ':',0,0);
    $pdf->Cell(65,4,$vk_firma,0,0);
    $pdf->Cell(30,4,$tx_bestellnummer. ':',0,0);
    $pdf->Cell(65,4,$bestellkey,0,1);
    $pdf->Cell(30,4,$tx_adresse. ':',0,0);
    $pdf->Cell(65,4,$vk_adresse,0,0);
    $pdf->Cell(30,4,$bestelldatum. ':',0,0);
        $bestelldatum = (substr($bestelldatum, 8,2)).'.'.(substr($bestelldatum, 5, -3)).'.'.(substr($bestelldatum, 0, -6));
    $pdf->Cell(65,4,$bestelldatum,0,1);
    $pdf->Cell(30,4,$tx_plz. ', ' .$tx_ort. ':',0,0);
    $pdf->Cell(65,4,$vk_plz.' '.$vk_ort,0,0);
    .... 
    $i=0; 
    $result = mysql_query('SELECT * FROM bP WHERE bestellkey = "'.$tok.'"');
    $fCount = mysql_num_fields($result);
    $pdf->Cell(9,8,$tx_pos,1,0,'C');
    $pdf->Cell(23,8,"EAN/GTIN",1,0,'C');
    $pdf->Cell(43,8,$tx_bezeichnung,1,0,'C');
    $pdf->Cell(10,8,$tx_groesse,1,0,'C');
    $pdf->Cell(10,8,$tx_farbe,1,0,'C');
    $pdf->Cell(15,8,$tx_preis,1,0,'C');
    $pdf->Cell(12,8,$tx_einheit,1,0,'C');
    $pdf->Cell(15,8,$tx_menge,1,0,'C');
    $pdf->Cell(15,8,$tx_menge. "\n" .$tx_bestaetigt,1,0,'C');
    $pdf->Cell(18,8,$tx_summe,1,1,'C');
    ...

    $tok = strtok(",");
    if($tok != ""){
        $pdf->AddPage();
    }
    }

    mysql_close($prn_con);
    $pdf->Output($FileN, 'D');

    ?> 
```

# java - 如何使用其键和值属于某个层次结构的通用映射？

> ID：11720065
> 
> 赞同：3
> 
> 时间：2012-07-30T10:56:30.943
> 
> 标签：java, generics, map

我的目标是创建一个 Map，其键是 Class 实例，其值是相应 Class 的实例。意义，

映射（层次结构中的某个类 --> 其对应的实例）

为此，我将 Map 声明为

```
Map<Class<? extends BaseService>, ? extends BaseService> serviceMap = 
    new HashMap<Class<? extends BaseService>, BaseService>();
//Assume BaseService is at the root of hierarchy. 
```

以上编译。

为了填充地图，我使用了

```
public <T extends BaseService> void register(T service) {   
    serviceMap.put(service.getClass(), service);    
} 
```

这不编译。

我如何使这项工作？为什么不编译？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T11:04:15.533

您对通配符的使用与您的英语定义不完全一致。当你定义：

```
Map<Class<? extends BaseService>, ? extends BaseService> serviceMap; 
```

这可能被描述为“`serviceMap`是从扩展类`BaseService`到*某种类型*的值（它是`BaseService`或子类）的映射”。

`register`编译器在这种情况下 拒绝您的方法是正确的。`serviceMap`的值类型被声明为简单的“某物”——因此您可以轻松地为它分配一个值类型为`ServiceImplOne`. 并且您的 register 方法可以使用 class 的参数调用`ServiceImplTwo`。您不能将它插入到地图中，因为它与通用参数不一致！

很明显，由于您希望能够插入任何类型的服务，因此地图必须接受**所有实例`BaseService`**作为值，而不是BaseService 的*某些*（未知）子类型。因此，您可以通过使用具体值类型声明映射来解决此问题：

```
Map<Class<? extends BaseService>, BaseService> serviceMap; 
```

# jquery - jquery中的选择器-获取rel属性

> ID：11720069
> 
> 赞同：1
> 
> 时间：2012-07-30T10:56:39.810
> 
> 标签：jquery, jquery-selectors

我有这样的html代码：

```
<li id="vol" rel="1">
    // something here
</li>
<li id="vol" rel="2">
    // something here
</li>
<li id="vol" rel="3">
    // something here
</li> 
```

我正在尝试通过此代码获取 rel 属性：

```
$('#vol').click(function(){
  var rel = $(this).attr('rel');
}); 
```

但它不起作用。我也改成`this`，`#vol`但没有用。我该怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T10:58:39.697

通过不工作，我假设`li`您单击的任何内容都会返回`1`，这是由于页面中有多个 ID 造成的。ID 应该是唯一的，请改用 class。

尝试

```
<li class="vol" rel="1">
    // something here
</li>
<li class="vol" rel="2">
    // something here
</li>
<li class="vol" rel="3">
    // something here
</li>

JS:

$('.vol').click(function(){
  var rel = $(this).prop('rel');
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-30T11:00:39.620

你们都是`id`一样的，所以让他们与众不同。假设你`li`在`ul`哪个班级里面`clsTest`

```
$('.clsTest li').click(function(){
  var rel = $(this).attr('rel');
  alert(rel);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T10:59:11.753

Selector by "id" (#id) 只选择一个元素，使用 "class" (.class) 代替

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-30T11:02:19.557

将您的代码更改为

```
<li class="vol" rel="1">
    // something here
</li>
<li class="vol" rel="2">
    // something here
</li>
<li class="vol" rel="3">
    // something here
</li>

<script>
$('body').delegate('li.vol','click',function(){
  var rel = $(this).attr('rel');
});
</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-12-13T12:55:39.373

```
$('.li').on('click', function(){
  var target = $(this).attr('rel');
}); 
```

> 我认为如果您使用 li，我们会直接尝试使用 element

# linux - linux命令获取特定文件夹中存在的文件和目录的大小？

> ID：11720079
> 
> 赞同：487
> 
> 时间：2012-07-30T10:57:06.793
> 
> 标签：linux, file

如何在 Linux 中查看文件和目录的大小？如果使用`df -m`，那么它会在顶层显示所有目录的大小，但是对于目录中的目录和文件，我如何检查大小？

* * *

## 回答 #1

> 赞同：726
> 
> 时间：2012-07-30T10:59:47.947

`ls`对文件使用命令，`du`对目录使用命令。

**检查文件大小**

```
ls -l filename   #Displays Size of the specified file
ls -l *          #Displays Size of All the files in the current directory
ls -al *         #Displays Size of All the files including hidden files in the current directory
ls -al dir/      #Displays Size of All the files including hidden files in the 'dir' directory 
```

`ls`命令不会列出目录的实际大小（[为什么？](https://unix.stackexchange.com/questions/55/what-does-size-of-a-directory-mean-in-output-of-ls-l-command)）。因此，我们`du`用于此目的。

**检查目录大小**

```
du -sh directory_name    #Gives you the summarized(-s) size of the directory in human readable(-h) format
du -bsh *                #Gives you the apparent(-b) summarized(-s) size of all the files and directories in the current directory in human readable(-h) format 
```

在上述任何命令中包含`-h`选项（例如：`ls -lh *`或`du -sh`）将为您提供人类可读格式的大小（`kb`, `mb`, `gb`, ...）

有关更多信息，请参阅`man ls`和`man du`

* * *

## 回答 #2

> 赞同：194
> 
> 时间：2012-07-30T10:59:34.837

有`du`命令。

目录和/或文件的大小，以人性化的方式：

```
$ du -sh .bashrc /tmp 
```

我把它记为一个不存在的英文单词*dush*。

* * *

`--apparent-size`命令行开关使其测量表观大小（`ls`显示的内容）而不是实际的磁盘使用情况。

* * *

## 回答 #3

> 赞同：136
> 
> 时间：2012-07-30T11:46:04.697

用于`ls -s`列出文件大小，或者如果您更喜欢`ls -sh`人类可读的大小。

对于目录，使用`du`, 并再次`du -h`用于人类可读的大小。

* * *

## 回答 #4

> 赞同：51
> 
> 时间：2016-02-16T17:58:30.553

您可以使用：

`ls -lh`

使用此命令，您将看到目录的表观空间和文件的真实空间，以及显示的文件的详细名称，以及每个文件的大小和创建日期。

* * *

## 回答 #5

> 赞同：43
> 
> 时间：2015-09-14T10:12:54.520

还有一个很棒的`ncdu`实用程序 - 它可以显示目录大小以及有关子文件夹和文件的详细信息。

## 安装

Ubuntu：

```
$ sudo apt-get install ncdu 
```

## 用法

只需`ncdu [path]`在命令行中输入。分析路径几秒钟后，您将看到如下内容：

```
$ ncdu 1.11 ~ Use the arrow keys to navigate, press ? for help
--- / ---------------------------------------------------------
.  96,1 GiB [##########] /home
.  17,7 GiB [#         ] /usr
.   4,5 GiB [          ] /var
    1,1 GiB [          ] /lib
  732,1 MiB [          ] /opt
. 275,6 MiB [          ] /boot
  198,0 MiB [          ] /storage
. 153,5 MiB [          ] /run
.  16,6 MiB [          ] /etc
   13,5 MiB [          ] /bin
   11,3 MiB [          ] /sbin
.   8,8 MiB [          ] /tmp
.   2,2 MiB [          ] /dev
!  16,0 KiB [          ] /lost+found
    8,0 KiB [          ] /media
    8,0 KiB [          ] /snap
    4,0 KiB [          ] /lib64
e   4,0 KiB [          ] /srv
!   4,0 KiB [          ] /root
e   4,0 KiB [          ] /mnt
e   4,0 KiB [          ] /cdrom
.   0,0   B [          ] /proc
.   0,0   B [          ] /sys
@   0,0   B [          ]  initrd.img.old
@   0,0   B [          ]  initrd.img
@   0,0   B [          ]  vmlinuz.old
@   0,0   B [          ]  vmlinuz 
```

用 删除当前突出显示的元素，用+`d`退出`CTRL``c`

* * *

## 回答 #6

> 赞同：32
> 
> 时间：2015-09-16T07:22:36.147

文件大小 (MB)

```
ls -l --b=M  filename | cut -d " " -f5 
```

文件大小 (GB)

```
ls -l --b=G  filename | cut -d " " -f5 
```

* * *

## 回答 #7

> 赞同：27
> 
> 时间：2019-04-17T16:03:42.720

转到所选目录并执行：

```
$ du -d 1 -h 
```

在哪里：

```
-d 1 is the depth of the directories

-h is the human-readable option 
```

你会看到这样的：

```
0   ./proc
8.5M    ./run
0   ./sys
56M ./etc
12G ./root
33G ./var
23M ./tmp
3.2G    ./usr
154M    ./boot
26G ./home
0   ./media
0   ./mnt
421M    ./opt
0   ./srv
2.6G    ./backups
80G . 
```

* * *

## 回答 #8

> 赞同：19
> 
> 时间：2015-07-15T18:58:53.507

ls -l --block-size=M 将为您提供一个长格式列表（需要实际查看文件大小）并将文件大小四舍五入到最接近的 MiB。

如果您想要 MB（10^6 字节）而不是 MiB（2^20 字节）单位，请改用 --block-size=MB。

如果您不想将 M 后缀附加到文件大小，则可以使用 --block-size=1M 之类的东西。感谢 Stéphane Chazelas 提出这个建议。

这在 ls 的手册页中有描述；man ls 并搜索 SIZE。它也允许 MB/MiB 以外的单位，并且从外观上看（我没有尝试过）也可以使用任意块大小（因此，如果需要，您可以将文件大小视为 412 字节块的数量到）。

请注意，--block-size 参数是 Open Group ls 之上的 GNU 扩展，因此如果您没有 GNU 用户空间（大多数 Linux 安装都有），这可能不起作用。GNU coreutils 8.5 中的 ls 确实支持 --block-size ，如上所述。

* * *

## 回答 #9

> 赞同：14
> 
> 时间：2020-03-18T14:40:42.147

所有你需要的是`-l`和`--block-size`标志

**工作目录下所有文件和目录的大小（以 MB 为单位）**

```
ls -l --block-size=M 
```

* * *

**工作目录下所有文件和目录的大小（以 GB 为单位）**

```
ls -l --block-size=G 
```

* * *

**特定文件或目录的大小**

```
ls -l --block-size=M my_file.txt
ls -l --block-size=M my_dir/ 
```

* * *

> ```
> ls --help 
> ```
> 
> `-l` 使用长列表格式
> 
> `--block-size=SIZE``SIZE`：在打印之前按比例缩放尺寸；例如， `'--block-size=M'`以 1,048,576 字节为单位打印大小；见`SIZE`下面的格式
> 
> `SIZE`是整数和可选单位（例如：10M 是 10*1024*1024）。单位是 K、M、G、T、P、E、Z、Y（1024 的幂）或 KB、MB、...（1000 的幂）。

* * *

* * *

## 回答 #10

> 赞同：11
> 
> 时间：2018-11-20T03:39:16.160

如果您在脚本中使用它，请使用`stat`.

```
$ date | tee /tmp/foo
Wed Mar 13 05:36:31 UTC 2019

$ stat -c %s /tmp/foo
29

$ ls -l /tmp/foo
-rw-r--r--  1 bruno  wheel  29 Mar 13 05:36 /tmp/foo 
```

这将为您提供以字节为单位的大小。有关[`man stat`](https://www.freebsd.org/cgi/man.cgi?query=stat&apropos=0&sektion=0&manpath=Debian+8.1.0&arch=default&format=html)更多输出格式选项，请参阅。

[OSX/BSD 等价物](https://www.freebsd.org/cgi/man.cgi?query=stat&apropos=0&sektion=0&manpath=OpenBSD%206.3&arch=default&format=html)是：

```
$ date | tee /tmp/foo
Wed Mar 13 00:54:16 EDT 2019

$ stat -f %z /tmp/foo
29

$ ls -l /tmp/foo
-rw-r--r--  1 bruno  wheel  29 Mar 13 00:54 /tmp/foo 
```

* * *

## 回答 #11

> 赞同：10
> 
> 时间：2017-12-20T02:32:02.550

您可以使用以下命令以易于人类阅读的格式获取文件列表。

> ls -lrtsh

* * *

## 回答 #12

> 赞同：7
> 
> 时间：2017-05-02T11:39:14.460

我一直在做以下事情：

```
$ du -sh backup-lr-May-02-2017-1493723588.tar.gz 
```

注意：

```
-s, --summarize
            display only a total for each argument
-h, --human-readable
            print sizes in human readable format (e.g., 1K 234M 2G) 
```

* * *

## 回答 #13

> 赞同：6
> 
> 时间：2019-03-13T09:28:55.023

使用带有 -h 参数的**ls**命令：[root@hots19 等]# `ls -lh`
h ：用于人类可读。

```
Exemple: 
    [root@CIEYY1Z3 etc]# ls -lh
    total 1.4M
    -rw-r--r--.  1 root   root      44M Sep 15  2015 adjtime
    -rw-r--r--.  1 root   root     1.5K Jun  7  2013 aliases
    -rw-r--r--   1 root   root      12K Nov 25  2015 aliases.db
    drwxr-xr-x.  2 root   root     4.0K Jan 11  2018 alternatives
    -rw-------.  1 root   root      541 Jul  8  2014 anacrontab
    -rw-r--r--.  1 root   root      55M Sep 16  2014 asound.conf
    -rw-r--r--.  1 root   root       1G Oct  6  2014 at.deny 
```

* * *

## 回答 #14

> 赞同：6
> 
> 时间：2019-10-21T22:17:41.647

> du -sh [文件名]

完美地获取特定文件的大小。

* * *

## 回答 #15

> 赞同：5
> 
> 时间：2019-02-20T09:52:35.973

要获取目录的总大小或文件使用的总大小，

```
du -csh <directory or filename*> | grep total 
```

* * *

## 回答 #16

> 赞同：5
> 
> 时间：2020-04-26T08:44:15.880

您可以`ncdu`在此处使用磁盘使用分析器。它在 ncurses 界面中显示文件和目录的大小。您可以导航到每个目录并从同一界面查看文件大小。

安装

```
$ sudo apt-get install ncdu 
```

分析

```
$ ncdu <directory> 
```

[![在此处输入图像描述](../Images/d007b0ef026089535331eb5d0e06842d.png)](https://i.stack.imgur.com/gzclU.jpg)

* * *

## 回答 #17

> 赞同：4
> 
> 时间：2018-02-05T11:46:49.930

我自己是 Ubuntu 16.04 用户，我发现该`ll`命令是迄今为止查看目录内容的最简单方法。我注意到并非所有 Linux 发行版都支持此命令，但可能有针对每个发行版的解决方法/安装。

例子：

```
user@user-XPS-15-9560:/$ ll
total 188
drwxr-xr-x  27 root root  4096 Jan 26 09:13 ./
drwxr-xr-x  27 root root  4096 Jan 26 09:13 ../
drwxr-xr-x   2 root root  4096 Jan 22 15:13 bin/
drwxr-xr-x   4 root root 12288 Jan 29 11:35 boot/
drwxr-xr-x   2 root root  4096 Sep  3 18:14 cdrom/
drwxr-xr-x  20 root root  4440 Feb  5 08:43 dev/
drwxr-xr-x 153 root root 12288 Feb  2 15:17 etc/
drwxr-xr-x   4 root root  4096 Sep  3 18:15 home/
... 
```

对我来说最大的优势是它使用起来快速且非常直观。

更新：我不知道在 Ubuntu 上它是一个预配置的别名。您可以通过`alias ll="ls -la"`在命令行上执行或在 .bashrc 配置文件中添加此条目来轻松设置它：

```
sudo nano ~/.bashrc
...add line described above and save file by pressing Ctrl+X and Y...
source ~/.bashrc 
```

* * *

## 回答 #18

> 赞同：3
> 
> 时间：2020-07-22T12:45:52.057

```
ls -sh video.mp4 | sed s/video.mp4//g 
```

**输出，** 5.6M

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2018-05-03T09:27:54.900

您必须区分*文件大小*和*磁盘使用情况*。两者的主要区别在于文件被“切成碎片”并存储在块中。

现代块大小为 4KiB，因此文件将使用 4KiB 的磁盘空间倍数，无论它们有多小。

如果您使用该命令`stat`，您可以并排看到两个图形。

```
stat file.c 
```

如果您想要一个更紧凑的目录视图，您可以使用`ls -ls`，这将为您提供 1KiB 单位的使用量。

```
ls -ls dir 
```

`du`还将为您提供真实的磁盘使用情况，以 1KiB 为单位，或[带有](https://ownyourbits.com/2018/03/25/analize-disk-usage-with-dutree/)标志的dutree `-u`。

示例：使用 1 字节文件

```
$ echo "" > file.c

$ ls -l file.c
-rw-r--r-- 1 nacho nacho 1 Apr 30 20:42 file.c

$ ls -ls file.c
4 -rw-r--r-- 1 nacho nacho 1 Apr 30 20:42 file.c

$ du file.c
4 file.c

$ dutree file.c
[ file.c 1 B ]

$ dutree -u file.c
[ file.c 4.00 KiB ]

$ stat file.c
 File: file.c
 Size: 1 Blocks: 8 IO Block: 4096 regular file
Device: 2fh/47d Inode: 2185244 Links: 1
Access: (0644/-rw-r--r--) Uid: ( 1000/ nacho) Gid: ( 1000/ nacho)
Access: 2018-04-30 20:41:58.002124411 +0200
Modify: 2018-04-30 20:42:24.835458383 +0200
Change: 2018-04-30 20:42:24.835458383 +0200
 Birth: - 
```

此外，在现代文件系统中，我们可以有快照、稀疏文件（其中有*漏洞*的文件），这会使情况进一步复杂化。

您可以在本文中查看更多详细信息：[了解 Linux 中的文件大小](https://ownyourbits.com/2018/05/02/understanding-disk-usage-in-linux/)

* * *

## 回答 #20

> 赞同：2
> 
> 时间：2020-08-30T05:23:32.000

我更喜欢这个命令`ll -sha`。

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2017-03-17T16:32:23.977

您可以在 linux 中使用 ls -sh 您可以进行排序还需要转到要检查文件大小的目录

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2019-01-07T07:23:32.680

转到**特定目录**然后运行以下命令

```
# du -sh * 

4.0K    1
4.0K    anadb.sh --> Shell file
4.0K    db.sh/    --> shell file
24K     backup4/  --> Directory
8.0K    backup6/  --> Directory 
1.9G    backup.sql.gz  --> sql file 
```

# jquery - 通过 html 元素 id/class 查找 xml 元素

> ID：11720084
> 
> 赞同：0
> 
> 时间：2012-07-30T10:57:23.583
> 
> 标签：jquery, xml, parsing

我有一个小问题。我如何检测 xml 标签名称与 html 元素类的比较？我的代码如下：

```
 var class_main_content = $('.main_content ul').find(this.class);
   var xml_element_name = $(xml).find(class_main_content).text(); 
```

谢谢帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T11:28:21.920

如果您的问题真的是“如何从 html 元素中获取类名？” 然后尝试这样的事情：

```
var class_main_content = $('.main_content ul').attr("class"); 
```

Using`$('.main_content ul')`将返回一个 jQuery 对象，其中包含所有 ul 元素，这些 ul 元素是类“main_content”的元素的后代。调用`.attr("class")`该 jQuery 对象将检索第一个此类元素的类。

然后，您可以在下一条语句中使用该类名：

```
var xml_element_name = $(xml).find(class_main_content).text(); 
```

如果您`xml`有一个标签名称与 html 元素的类相同的元素，则将返回该 xml 元素的文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T12:32:42.490

thx，我设置 s.like 是这样的：

```
var class_main_content = $('.main_content ul').attr('class');
var xml_element_name = $(xml).find(class_main_content)[0].nodeName.toLowerCase();
if ((class_main_content) == xml_element_name){
} 
```

结束它的工作...

# ios5 - 通过iphone应用更新linkedin的状态

> ID：11720087
> 
> 赞同：0
> 
> 时间：2012-07-30T10:57:44.500
> 
> 标签：ios5, linkedin

到目前为止，这是我的代码：

```
-(IBAction)postToLinkedin{   
   rdEngine = [RDLinkedInEngine engineWithConsumerKey:LI_kOAuthConsumerKey consumerSecret:LI_kOAuthConsumerSecret delegate:self] ; 
   RDLinkedInAuthorizationController* controller = [RDLinkedInAuthorizationController authorizationControllerWithEngine:rdEngine delegate:self];
   if( controller) { 
        [self presentModalViewController:controller animated:YES];
        }
   else   
       {
       NSLog(@"alreadyy authenticated");       
       }
 }

-(void)linkedInEngineAccessToken:(RDLinkedInEngine *)engine setAccessToken:(OAToken *)token {
    NSLog(@"1111111");
    [token storeInUserDefaultsWithServiceProviderName:@"LinkedIn" prefix:@"Demo"];    
    }

- (void)linkedInEngineAccessToken:(RDLinkedInEngine *)engine removeAccessToken:(OAToken *)token {
    [token removeAccessTokenUsingServiceProviderName:@"LinkedIn" prefix:@"Demo"];
    }

- (OAToken *)linkedInEngineAccessToken:(RDLinkedInEngine *)engine {    
    return [[OAToken alloc] initWithUserDefaultsUsingServiceProviderName:@"LinkedIn" prefix:@"Demo"] ;
    NSLog(@"3333");
    }

- (void)linkedInEngine:(RDLinkedInEngine *)engine requestSucceeded:(RDLinkedInConnectionID *)identifier withResults:(id)results {
    NSLog(@"++ LinkedIn engine reports success for connection %@\n%@", identifier, results);
   UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"Success" message:@"Successfully Tweeted" delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles:nil];
    [alert show];
    }

- (void)linkedInEngine:(RDLinkedInEngine *)engine requestFailed:(RDLinkedInConnectionID *)identifier withError:(NSError *)error {
    NSLog(@"++ LinkedIn engine reports failure for connection %@\n%@", identifier, [error localizedDescription]);
    }

//#pragma mark -
//#pragma mark RDLinkedInAuthorizationControllerDelegate

- (void)linkedInAuthorizationControllerSucceeded:(RDLinkedInAuthorizationController *)controller {
    NSLog(@"Authentication succeeded.");
    NSLog(@"Fetching current user's profile on connection %@", [controller.engine profileForCurrentUser]); 
    [rdEngine updateStatus:@"hello"];
    }

- (void)linkedInAuthorizationControllerFailed:(RDLinkedInAuthorizationController *)controller {
    NSLog(@"Authentication failed!");
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error" message:@"Error occurred while updating Linkedin status." delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles:nil];
    [alert show]; 
    }

- (void)linkedInAuthorizationControllerCanceled:(RDLinkedInAuthorizationController *)controller {
    NSLog(@"Authentication was cancelled.");
    } 
```

该代码不起作用，因为状态没有得到更新。你能告诉我哪里出错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T10:33:30.033

为什么要显示授权控制器`postToLinkedIn`？您可能想在这里查看共享 API [https://developer.linkedin.com/documents/share-api](https://developer.linkedin.com/documents/share-api)

# python - HTTPResponse 实例在 python/django 中没有属性“status_code”

> ID：11720090
> 
> 赞同：0
> 
> 时间：2012-07-30T10:57:50.910
> 
> 标签：python, django, rest, tastypie, httplib

我已经使用 python httplib 来实现 REST api 来连接 Django sweetpie。但是每当我尝试获取状态代码时，它都会显示以下错误

```
AttributeError at /actions/login
HTTPResponse instance has no attribute 'status_code' 
```

我的代码在下面

```
import hashlib
import hmac
from django.shortcuts import render_to_response
from django.template import RequestContext

def loginAction(request):
    username=request.POST['email']
    password=request.POST['password']
    import httplib, urllib
    params = urllib.urlencode({'username': username})
    #hash username here to authenticate
    digest=hmac.new("qnscAdgRlkIhAUPY44oiexBKtQbGY0orf7OV1I50", str(request.POST['password']),hashlib.sha1).hexdigest()
    auth=username+":"+digest
    headers = {"Content-type": "application/json","Accept": "text/plain","Authorization":auth}
    conn = httplib.HTTPConnection("localhost",8000)
    conn.request("POST", "/api/ecp/profile/", params, headers)
    conn.set_debuglevel(1)
    response = conn.getresponse()
    return response 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T11:42:14.670

您必须返回 django.http.HttpResponse，而不是 httplib.HttpResponse

请参阅：（httplib）[http://docs.python.org/library/httplib.html#httplib.HTTPResponse](http://docs.python.org/library/httplib.html#httplib.HTTPResponse)

和：（django）[https://docs.djangoproject.com/en/dev/ref/request-response/](https://docs.djangoproject.com/en/dev/ref/request-response/)

# django - 用“通过”定义的搜索模型

> ID：11720091
> 
> 赞同：0
> 
> 时间：2012-07-30T10:57:55.263
> 
> 标签：django, models, m2m

我有以下型号（细节省略）：

```
class Author(models.Model):
    name = models.CharField('name', max_length=200, blank=False)    

class Book(models.Model):
    title = models.CharField('title', max_length=200, blank=False)
    author = models.ManyToManyField(Author, blank=False, through='Book_Author')

class Book_Author(models.Model):
    book = models.ForeignKey(Book)
    author = models.ForeignKey(Author) 
```

我想获取标题包含给定查询且作者姓名包含相同查询的所有书籍。

现在我正在做以下事情：

要获取标题包含该单词的所有书籍，我使用以下代码：

```
for word in words:          
        books = books.filter(Q(title__icontains=word) 
```

要获取作者姓名中包含该词的所有书籍，我使用以下代码：

```
for word in words:        
        authors = authors.filter(Q(name__icontains=word))        
        for author in authors:      
          for book_author in author.book_author_set.all():
             book = Book.objects.get(id=book_author.book_id)
             results.append(book) 
```

有没有办法改进第二部分？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T11:16:36.647

这是简单的方法：

```
for word in words:          
    books = books.filter(Q(title__icontains=word) )
    books = books.filter(Q(author__name__icontains=word) )

my_books = books.distinct() 
```

***已编辑***

如果您正在查找 title 包含单词或 author 包含单词的书籍，那么查询是：

```
q_books = None
q_authors = None
for word in words:          
    q_aux = Q(title__icontains=word)
    q_books = (q_books & q_aux ) if bool( q_books) else q_aux
    q_aux = Q(author__name__icontains=word)
    q_authors = (q_authors & q_aux ) if bool( q_authors) else q_aux

my_books = Book.objects.filter( q_books | q_authors ).distinct() 
```

欢迎任何关于更多代码可读性的评论。

# google-apps-script - HtmlService doPost

> ID：11720092
> 
> 赞同：0
> 
> 时间：2012-07-30T10:57:58.410
> 
> 标签：google-apps-script

我正在尝试使用 doPost 提交表单，但我不断收到“未知宏 doPost”错误。

模板化的 HTML：

```
<?var url = ScriptApp.getService().getUrl().replace("exec","dev");?>

...

<form action='<?=url?>' method="post">
  <fieldset>
    ...
    <input type="submit" value="Submit"/>
  </fieldset>
</form> 
```

剧本：

```
function doPost(requestInfo){
  Logger.log("Entering doPost()\n");
  return HtmlService.createHtmlOutput("<h1>404</h1>");

} 
```

任何想法为什么会这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T11:25:30.190

您收到错误是因为您将数据发布到错误的 URL。Developer 和 Execution URL 不仅在 dev/exec 上有所不同。这两个 URL 完全不同。要进行测试，只需硬编码开发者 URL

# android - Paint.setTextSize(float) 使用哪种测量单位？

> ID：11720093
> 
> 赞同：14
> 
> 时间：2012-07-30T10:57:59.980
> 
> 标签：android, units-of-measurement

我想使用在视图上绘制具有特定高度（以像素为单位）的文本`Canvas`。您可以简单地使用`Paint.setTextSize(float)`像素数还是使用`dp`or `sp`？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-30T11:02:18.200

它使用像素，但您可以使用以下代码将其转换为 dp：

```
double getDPFromPixels(double pixels) {
    DisplayMetrics metrics = new DisplayMetrics();
    getWindowManager().getDefaultDisplay().getMetrics(metrics);
    switch(metrics.densityDpi){
     case DisplayMetrics.DENSITY_LOW:
                pixels = pixels * 0.75;
                break;
     case DisplayMetrics.DENSITY_MEDIUM:
                 //pixels = pixels * 1;
                 break;
     case DisplayMetrics.DENSITY_HIGH:
                 pixels = pixels * 1.5;
                 break;
    }
    return pixels;
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-03-08T01:56:31.230

获取此类方法的 px 值的最简单方法是在 dimens.xml 文件中简单地定义适当的 dp 或 sp 值，然后像这样检索它：

```
int sizeInPx = context.getResources().getDimensionPixelSize(R.dimen.sizeInSp); 
```

根据您的需要，您实际上可以使用 3 种方法：

*   `getDimension()`返回以像素为单位的浮点数。

*   `getDimensionPixelSize()`返回一个以像素为单位的整数。这与 getDimension() 相同，除了返回值被四舍五入到最接近的整数值并确保非零输入值导致非零输出值（例如，0.1 返回为 1，而不是 0）。

*   `getDimensionPixelOffset()`返回一个以像素为单位的整数。这与 getDimension() 相同，只是返回的值是 TRUNCATED（即向下舍入）。结果可能为零。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-23T16:52:33.587

这些方法包括`DisplayMetrics`可以添加到未来的 Android SDK 中。

要下降的像素：

```
public static float getDipFromPixels(float px) {
        return TypedValue.applyDimension(
                TypedValue.COMPLEX_UNIT_PX,
                px,
                Resources.getSystem().getDisplayMetrics()
        );
} 
```

下降到像素：

```
public static float getPixelsFromDip(float dip) {
        return TypedValue.applyDimension(
                TypedValue.COMPLEX_UNIT_DIP, 
                dip,
                Resources.getSystem().getDisplayMetrics()
        );
} 
```

# iphone - CGPoints、NSValues、NSMutableArray 和 ID 类型

> ID：11720096
> 
> 赞同：1
> 
> 时间：2012-07-30T10:58:05.780
> 
> 标签：iphone, objective-c, ios, nsmutablearray, core-graphics

我正在尝试将 UITouches 中的 CGPoints 存储在一个数组中。通过阅读其他线程，我意识到使用 NSValue 似乎是最好的方法。目前我有：

```
NSMutableArray *dotsArray;
NSValue *pointObj;
UITouch *touch = obj;
CGPoint touchPoint = [touch locationInView:self.view];
// Need to store the CGPoints, can't store directly into an array // as it is a C struct           // so we use NSValue
// CGPoint converted to NSValue
CGPoint point = touchPoint;
pointObj = [NSValue valueWithCGPoint:point];
dotsArray = [NSArray arrayWithObjects:pointObj,nil];
// Print to console the objects in the collection
NSLog(@"array content: %@", dotsArray);
NSLog(@"[dotsArray count] = %i",[dotsArray count]);
// Restore from NSValue to C structures
CGPoint pointRestored = [pointObj CGPointValue]; 
```

我希望能够使用：

```
[dotsArray insertObject:pointObj atIndex:0]; 
```

代替

```
dotsArray = [NSArray arrayWithObjects:pointObj,nil]; 
```

这样我就可以在回忆存储多个点的方法时增加放置。

从阅读中我认为这与“insertObject”所需的 ID 类型有关，但我并不完全理解它，也无法在线找到解决方案。

编辑：当我使用

```
[dotsArray insertObject:pointObj atIndex:0]; 
```

然后

```
NSLog(@"array content: %@", dotsArray); 
```

输出 NULL

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T11:07:22.030

您要使用的方法`[dotsArray insertObject:pointObj atIndex:0];`是指数组的id，即数组位置。这意味着`atIndex:0`是数组中的第一个位置，因为数组从第零位开始。所以现在如果你把它放在你的**DotsArray**中，你想要调用的索引或 ID 类型就是你想要显示的点的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T11:18:28.283

使用`addObject:`方法。

```
[dotsArray addObject:pointObj]; 
```

我想这会对你有所帮助。

# android - Android SimpleCursorAdapter 到 CursorAdapter

> ID：11720100
> 
> 赞同：1
> 
> 时间：2012-07-30T10:58:15.603
> 
> 标签：android, simplecursoradapter, android-cursorloader

我`SimpleCursorAdapter`用来管理对数据库的查询，然后在`ListView`.

这是我的代码：

```
database.open();
ListView listContent = (ListView)findViewById(android.R.id.list);
Cursor c = database.getData();
startManagingCursor(c);

String[] from = new String[]{Database._GROUP_NAME};
int[] to = new int[]{android.R.id.text1};

SimpleCursorAdapter adapter = new SimpleCursorAdapter(this, android.R.layout.simple_list_item_1, query, from, to);

listContent.setAdapter(adapter);

database.close(); 
```

虽然乍一看，它按预期工作，但我相信这不应该是继续的方式，因为有`CursorAdapter`.

我知道这是一个菜鸟问题，但是自从现在开始在 Android 中编程以来，我仍然不太了解。

我怎样才能将它从使用传递`SimpleCursorAdapter`到`CursorAdapter`？已经在互联网上搜索，但无法理解如何做到这一点。

不问代码只是一些方向。

谢谢

收藏夹

**更新以下主要评论**

```
database.open();
ListView listContent = (ListView)findViewById(android.R.id.list);
Cursor c = database.getData();
MyAdapt cursorAdapter = new MyAdapt(this, query);

listContent.setAdapter(adapter);

database.close(); 
```

MyAdapt 类：

```
public class MyAdapt extends CursorAdapter {

    private final LayoutInflater mInflater;

    public MyAdapt(Context context, Cursor c) {
        super(context, c);
        mInflater = LayoutInflater.from(context);
        mContext = context;
    }

    @Override
    public void bindView(View view, Context context, Cursor cursor) {

        TextView groupName = (TextView) view.findViewById(android.R.id.text1);
        groupName.setText(cursor.getString(cursor
                .getColumnIndex(Database._GROUP_NAME)));
    }

    @Override
    public View newView(Context context, Cursor cursor, ViewGroup parent) {
        final View view = mInflater.inflate(
                android.R.layout.simple_list_item_1, parent, false);
        return view;
    }
} 
```

这是正确的方法吗？

收藏夹

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T11:00:53.313

SimpleCursorAdapter 是可用于自定义适配器的最简单的适配器形式。当您不需要任何自定义时，您应该只使用 SimpleCursorAdapter。

# javascript - jquery颜色框底部

> ID：11720102
> 
> 赞同：1
> 
> 时间：2012-07-30T10:58:35.920
> 
> 标签：javascript, jquery, colorbox

我已经搜索了 3 天，但找不到答案
我尝试删除**COLORBOX 弹出窗口**底部的**灰色区域**，那里是关闭按钮的位置，但我找不到解决方法。我尝试添加删除导航，它仍然在**弹出窗口**的底部我有灰色的区域

 ****我使用此代码

```
<script language="JavaScript">
jQuery(document).ready(function(){
       // $.fn.colorbox({scrolling:false, overlayClose:false, opacity:0.7, escKey:false, href:"#subscribe", 'open':true, 'inline':true, 'width':'auto', 'height':'auto'});
        //$('#cboxClose').remove();
          $.fn.colorbox({scrolling:false, overlayClose:false, opacity:0.7, escKey:false, href:"#subscribe", 'open':true, 'inline':true, 'width':'auto', 'height':'auto'});
          $('#cboxClose').remove();

        }
);
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-03T03:41:52.413

```
#cboxLoadedContent{} //remove the margin-bottom:20px; 
```

它对我有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T11:17:32.887

Do you have a demo site that I can look at? I've removed the close button from colorbox in a site I'm working on (using the same $('#cboxClose').remove() jQuery snippet as you) and there's no grey area besides the normal shaded border around the colorbox content.

[EDIT] Ah! @Sudhir's answer prompted me to examine your code more closely - you haven't passed the .remove() code in as the onLoad function, so there may be no close button to remove when that line runs - it might not have been created yet!

Unfortunately, I don't have enough rep to add a comment to @sudhir's correct answer so I'll have to put it here instead.

The important part of @Sudhir's answer is the

```
onLoad: function(){
    $('#cboxClose').remove()
} 
```

part. This will only run after the colorbox has fully loaded, at which point you should have a close button to remove.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-18T17:19:48.260

我不了解其他任何人，但仅删除关闭按钮（您可以使用颜色框构造函数中的“closeButton：false”参数/值来完成）对我不起作用。我试图摆脱沿着颜色框底部运行的灰色/银色矩形框（控件容器）。关闭按钮被移除，但灰色的容器区域仍然存在。

最后，我必须创建 2 个新的 png 图像（用于边框的左侧和右侧），修改一个现有的 png 图像（colorbox-border.png）并修改 colorbox CSS 文件中的 3 行。所以，这就是你需要的：

保存这 3 个 png 并将它们添加到您的图像目录（或任何地方）：

![colorbox-border-bottom-left.png](../Images/255536a6335f7d659d611f13152f8472.png) **<<** colorbox-border-bottom-left.png

![colorbox-border-bottom-middle.png](../Images/9c55bdcfe8ff8d70c4920f50a12f4c62.png) **<<** colorbox-border-bottom-middle.png （那里有一张图片！它只有 1x9 像素）

![colorbox-border-bottom-right.png](../Images/eb67d775b228630093a1ebab065c16a4.png) **<<** colorbox-border-bottom-right.png

您还需要更新彩盒 CSS 文件。替换这 3 行：

```
#cboxBottomLeft{width:14px; height:43px; background:url([WHEREVER_UR_IMAGES_ARE]/colorbox-controls.png) no-repeat 0 -32px;}
#cboxBottomCenter{height:43px; background:url([WHEREVER_UR_IMAGES_ARE]/colorbox-border.png) repeat-x bottom left;}
#cboxBottomRight{width:14px; height:43px; background:url([WHEREVER_UR_IMAGES_ARE]/colorbox-controls.png) no-repeat -36px -32px;} 
```

...用这 3 行：

```
#cboxBottomLeft{width:14px; height:9px; background:url([WHEREVER_UR_IMAGES_ARE]/colorbox-border-bottom-left.png) no-repeat}
#cboxBottomCenter{width:1px; height:9px; background:url([WHEREVER_UR_IMAGES_ARE]/colorbox-border-bottom-middle.png) repeat-x bottom left;}
#cboxBottomRight{width:14px; height:9px; background:url([WHEREVER_UR_IMAGES_ARE]/colorbox-border-bottom-right.png) no-repeat} 
```

如果您不使用这些名称保存它们，请不要忘记更改 CSS 文件中的 png 的名称，例如 colorbox-border-bottom-...。

这是一个结果示例：

![在此处输入图像描述](../Images/44dc1a5972b023d6f0716cf5286b94ee.png)****

# android - Findbugs for Android 项目与 ant build 中的库

> ID：11720103
> 
> 赞同：4
> 
> 时间：2012-07-30T10:58:35.697
> 
> 标签：android, ant, findbugs

[Findbugs](http://findbugs.sourceforge.net/)是一款很棒的软件，我的团队在处理我们的 Android 项目时使用它。在 Eclipse 中，一切都很好而且很闪亮，但是现在我们正在尝试自动化我们的构建，`ant`并为每个构建自动生成 Findbugs 结果。

好像没那么难。我遵循了本教程：
[https](https://wiki.jenkins-ci.org/display/JENKINS/Building+an+Android+app+and+test+project#BuildinganAndroidappandtestproject-FindBugs)
://wiki.jenkins-ci.org/display/JENKINS/Building+an+Android+app+and+test+project#BuildinganAndroidappandtestproject-FindBugs 一个小问题是我必须更改`${android.jar}`为`${project.target.android.jar}`.

更糟糕的部分是`The following classes needed for analysis were missing:`来自我们使用的库项目的类的警告。其中一些是我们自己的，我们也想用 Findbugs 扫描它们。更复杂的是，其中一个库使用了另一个库（也是我们自己的，需要扫描），所以它看起来像这样：
`Project A --uses--> Library B --uses--> Library C`

在这里，我认为由于 Android SDK 可以处理所有这些依赖项（当我`ant debug`为项目 A 发布库 C 时已编译），我可以以某种方式利用它，获取我的项目所依赖的库列表并将其提供给 findbugs 任务。不幸的是，我没有做到这一点。

现在我手动输入所有库，一些进入`class`findbugs 任务的属性，一些进入`auxClasspath`，这有一个好处，我只能分析项目所依赖的一些库。我仍然希望我最初尝试做的事情是可能的。谁能告诉我如何提取路径元素

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-01T10:45:55.160

我终于找到了 SDK 构建脚本的一部分，它将所有 jar 的“类路径”（`classes.jar`所有库的 -s，包括“图表”中的库 C 和`libs/`项目文件夹中的 jar 和所有库）放在一起）。

我的 findbugs 目标的最终`custom-rules.xml`结果如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="Project_custom" default="findbugs">

    <taskdef name="findbugs" classname="edu.umd.cs.findbugs.anttask.FindBugsTask"/>

    <target name="findbugs">
        <gettarget
                androidJarFileOut="project.target.android.jar"
                androidAidlFileOut="project.target.framework.aidl"
                bootClassPathOut="project.target.class.path"
                targetApiOut="project.target.apilevel"
                minSdkVersionOut="project.minSdkVersion" />
        <dependency
                libraryFolderPathOut="project.library.folder.path"
                libraryPackagesOut="project.library.packages"
                libraryManifestFilePathOut="project.library.manifest.file.path"
                libraryResFolderPathOut="project.library.res.folder.path"
                libraryBinAidlFolderPathOut="project.library.bin.aidl.folder.path"
                libraryNativeFolderPathOut="project.library.native.folder.path"
                jarLibraryPathOut="project.all.jars.path"
                targetApi="${project.target.apilevel}"
                verbose="${verbose}" />

        <findbugs home="${findbugs.home}" output="xml" outputFile="findbugs-results.xml">
            <auxClasspath>
                <pathelement location="${project.target.android.jar}" />
                <path refid="project.all.jars.path" />
            </auxClasspath>
            <class location="${out.dir}" />

        </findbugs>
    </target>

</project> 
```

编辑：我已经将目标升级为独立于构建目标运行，即现在你可以运行`ant findbugs`not `ant debug findbugs`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-18T13:16:47.653

我添加了一些额外的定义并工作。谢谢

```
<target name="findbugs">
    <mkdir dir="reports" />
    <gettarget
            androidJarFileOut="project.target.android.jar"
            androidAidlFileOut="project.target.framework.aidl"
            bootClassPathOut="project.target.class.path"
            targetApiOut="project.target.apilevel"
            minSdkVersionOut="project.minSdkVersion" />
    <dependency
            libraryFolderPathOut="project.library.folder.path"
            libraryPackagesOut="project.library.packages"
            libraryManifestFilePathOut="project.library.manifest.file.path"
            libraryResFolderPathOut="project.library.res.folder.path"
            libraryBinAidlFolderPathOut="project.library.bin.aidl.folder.path"
            libraryNativeFolderPathOut="project.library.native.folder.path"
            jarLibraryPathOut="project.all.jars.path"
            libraryRFilePathOut="project.library.rfile.path"
            buildToolsFolder="${sdk.dir}/build-tools"
            renderscriptSupportLibsOut="project.rs.support.libs.path"
            renderscriptSupportMode="${renderscript.support.mode}"
            targetApi="${project.target.apilevel}"
            verbose="${verbose}" />
    <findbugs home="${findbugs.home}" output="xml:withMessages" outputFile="reports/findbugs.xml" excludeFilter="findbugs-exclude.xml" maxRank="9">
        <!-- auxClasspath path="${project.target.android.jar}" / -->
        <auxClasspath>
            <pathelement location="${project.target.android.jar}" />
            <path refid="project.all.jars.path" />
        </auxClasspath>
        <sourcePath path="${basedir}/src/" />
        <class location="${basedir}/bin/classes/" />
    </findbugs>
</target> 
```

# mysql - mysql php排序结果，包括SUM

> ID：11720106
> 
> 赞同：0
> 
> 时间：2012-07-30T10:58:43.543
> 
> 标签：mysql, sum

我正在制作一个浏览器黑手党游戏，并对列出所有家庭/帮派的页面进行编码。

每个家庭都有一个积分等级，由其所有成员现金、子弹、经验等的总和组成。

这是我循环显示家庭列表的代码：

```
SELECT 
 (SELECT COUNT(*) FROM players WHERE status='alive' AND family=f.id) as member_count,
 (SELECT SUM(bullets) FROM players WHERE status='alive' AND family=f.id) as sum_bullets,
 (SELECT SUM(cash) FROM players WHERE status='alive' AND family=f.id) as sum_cash,
 (SELECT SUM(exp) FROM players WHERE status='alive' AND family=f.id) as sum_exp,
 (SELECT SUM(killscore) FROM players WHERE status='alive' AND family=f.id) as sum_ks,
 name, id FROM familys f 
```

然后在使用 PHP 的循环中，我计算出总分：

```
$points = $rs[sum_bullets]/500;
$points = $points + $rs[sum_cash]/10000;
$points = $points + $rs[sum_exp]/1000;
$points = $points + $rs[sum_ks]; 
```

现在谈这个问题。我想使用`ORDER BY points DESC`. 我怎样才能调整我的查询来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T11:06:45.520

您使用 php 计算的点在您的 mysql 代码中尚不存在，因此我建议通过 php 添加排序。类似于将所有点添加到数组中并使用默认的[php 数组排序](http://php.net/manual/en/array.sorting.php)方法，或者如果您使用的是多级数组，请尝试[Alecander Minkovskys 多排序库](http://www.phpclasses.org/package/1594-PHP-Sort-arrays-considering-multiple-values.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T11:07:48.613

尝试将逻辑从应用程序转移到 MySQL，以通过单个查询使其更快：

```
SELECT
    (SELECT COUNT(*) FROM players WHERE status='alive' AND family=f.id) as member_count,
    (SELECT SUM(bullets) FROM players WHERE status='alive' AND family=f.id) as sum_bullets,
    (SELECT SUM(cash) FROM players WHERE status='alive' AND family=f.id) as sum_cash,
    (SELECT SUM(exp) FROM players WHERE status='alive' AND family=f.id) as sum_exp,
    (SELECT SUM(killscore) FROM players WHERE status='alive' AND family=f.id) as sum_ks,
    name, id
FROM familys f
ORDER BY (sum_bullets/500 + sum_cash/10000 + sum_exp/1000 + sum_ks); 
```

编辑：用于 total_points 的输出

```
SELECT a.*, (sum_bullets/500 + sum_cash/10000 + sum_exp/1000 + sum_ks) AS total_points
FROM
    (
     SELECT
        (SELECT COUNT(*) FROM players WHERE status='alive' AND family=f.id) as member_count,
        (SELECT SUM(bullets) FROM players WHERE status='alive' AND family=f.id) as sum_bullets,
        (SELECT SUM(cash) FROM players WHERE status='alive' AND family=f.id) as sum_cash,
        (SELECT SUM(exp) FROM players WHERE status='alive' AND family=f.id) as sum_exp,
        (SELECT SUM(killscore) FROM players WHERE status='alive' AND family=f.id) as sum_ks,
        name, id
     FROM familys f
    ) a
ORDER BY (sum_bullets/500 + sum_cash/10000 + sum_exp/1000 + sum_ks) ASC; 
```

# php - 如何在magento的主页上显示特价（产品销售）产品？

> ID：11720110
> 
> 赞同：0
> 
> 时间：2012-07-30T10:58:54.533
> 
> 标签：php, xml, magento, product

我没有如何在magento主页上显示特价（销售）产品。我尝试了很多，但它不能......

```
{{block type="catalog/product_list" name="home.catalog.product.list" alias="products_homepage" template="catalog/product/list.phtml"}} 
```

这也行不通。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T07:45:44.920

写 ：
`app/code/local/Mage/Catalog/Block/Product/Special.php`

```
<?php
    class Mage_Catalog_Block_Product_Special extends Mage_Catalog_Block_Product_List
    {
       function get_prod_count()
       {
          //unset any saved limits
          Mage::getSingleton('catalog/session')->unsLimitPage();
          return (isset($_REQUEST['limit'])) ? intval($_REQUEST['limit']) : 9;
       }// get_prod_count
       function get_cur_page()
       {
          return (isset($_REQUEST['p'])) ? intval($_REQUEST['p']) : 1;
       }// get_cur_page
       /**
        * Retrieve loaded category collection
        *
        * @return Mage_Eav_Model_Entity_Collection_Abstract
       **/
       protected function _getProductCollection()
       {
            $todayDate  = Mage::app()->getLocale()->date()->toString(Varien_Date::DATETIME_INTERNAL_FORMAT);
            $tomorrow = mktime(0, 0, 0, date('m'), date('d')+1, date('y'));
            $dateTomorrow = date('m/d/y', $tomorrow);
            $collection = Mage::getResourceModel('catalog/product_collection');
            $collection->setVisibility(Mage::getSingleton('catalog/product_visibility')->getVisibleInCatalogIds());
            $collection = $this->_addProductAttributesAndPrices($collection)
             ->addStoreFilter()
             ->addAttributeToSort('entity_id', 'desc') //<b>THIS WILL SHOW THE LATEST PRODUCTS FIRST</b>
             ->addAttributeToFilter('special_from_date', array('date' => true, 'to' => $todayDate))
             ->addAttributeToFilter('special_to_date', array('or'=> array(0 => array('date' => true, 'from' => $dateTomorrow), 1 => array('is' => new Zend_Db_Expr('null')))), 'left')
             ->setPageSize($this->get_prod_count())
             ->setCurPage($this->get_cur_page());
            $this->setProductCollection($collection);
            return $collection;
       }// _getProductCollection
    }// Mage_Catalog_Block_Product_New
    ?> 
```

在 CMS 页面----> 主页（管理面板）中，单击设计选项卡，然后在页面布局 --> 布局更新 xml 中输入此代码..

```
<reference name="content">
   <block type="catalog/product_special" name="product_special" template="catalog/product/list.phtml">
       <block type="catalog/product_list_toolbar" name="product_list_toolbar" template="catalog/product/list/toolbar.phtml">
              <action method="setDefaultDirection"><dir>desc</dir></action>
              <action method="setDefaultOrder"><field>entity_id</field></action>
              <block type="page/html_pager" name="product_list_toolbar_pager" />
       </block>
      <action method="addColumnCountLayoutDepend"><layout>three_columns</layout><count>3</count></action>
      <action method="setToolbarBlockName"><name>product_list_toolbar</name></action>
   </block>
</reference> 
```

希望这对你有帮助：P

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T19:31:38.403

您还应该从集合中检索“special_price”属性，这很容易，只需添加以下代码：

```
 ->addAttributeToSelect(array('name', 'price', 'small_image', 'status','special_price'), 'inner') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-16T12:32:29.487

您可以使用免费的扩展 URL： http: [//www.magentocommerce.com/magento-connect/top-seller-new-feature-most-viewed-catalog-sale-recently-ordered-all-products-7 -in-one-catalog-by-etatvasoft.html](http://www.magentocommerce.com/magento-connect/top-seller-new-feature-most-viewed-catalog-sale-recently-ordered-all-products-7-in-one-catalog-by-etatvasoft.html)。转到系统>>配置>> Tatvasoft>>目录扩展配置>>您想要的功能>>启用>>是它将在特色产品中显示销售产品，在促销中显示类别销售。也不要忘记在 cms>pages>home 中添加这些行

```
To see Bestsellers products
{{block type="catalogextensions/bestsellers_home_list" name="bestsellers_list" template="catalogextensions/home_bestsellers.phtml"}}
To see Featured products
{{block type="catalogextensions/featured_home_list" name="featured_list" template="catalogextensions/home_featured.phtml"}}
In Default attribute set >> 'Is Featured' attributes is added. You need to select “yes” value to show product as feature product
To see Mostviewed products
{{block type="catalogextensions/mostviewed_home_list" name="mostviewed_list" template="catalogextensions/home_mostviewed.phtml"}}
To see Newproduct products
{{block type="catalogextensions/newproduct_home_list" name="newproduct_list" template="catalogextensions/home_newproduct.phtml"}}
To see catalog Sale products
{{block type="catalogextensions/promotional_home_list" name="promotional_list" template="catalogextensions/home_promotional.phtml"}}
For showing the products in promotional rule, One catalog rule needs to be setup.
To see RecentlyOrdered products
{{block type="catalogextensions/lastordered_home_list" name="lastordered_home_list" template="catalogextensions/home_lastordered.phtml"}}
To see All products without any category filter
href=" echo $this->getUrl('catalogextensions/index/allproduct');" for All Products link 
```

也不要忘记提及产品和启用的特价>是的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T19:15:55.787

这取决于您希望如何为产品提供服务。如果您的所有销售产品都已在销售类别中，您可以在`Layout Update XML`您的类别字段中执行以下操作（请参阅`Design`选项卡）：

```
<reference name="content">
    <block type="catalog/product_list" template="catalog/product/list.phtml">
        <action method="setCategoryId"><category_id>[your_category_id]</category_id></action>
    </block>
</reference> 
```

虽然如果您想从所有类别中检索所有销售产品，您需要创建一个新的块类型。`Mage_Catalog_Block_Product_New`块类型就是一个很好的例子。此块用于从您的商店中检索所有新产品。您几乎需要块的精确副本，只是加载产品集合的方式`_beforeToHtml()`不同。

您要在其中加载的集合`_beforeToHtml()`是：

```
 $collection = Mage::getResourceModel('catalog/product_collection');

    $dateToday = date('m/d/y');
    $tomorrow = mktime(0, 0, 0, date('m'), date('d')+1, date('y'));
    $dateTomorrow = date('m/d/y', $tomorrow);

    $collection
        ->addAttributeToFilter('special_price', array('gt' => 0))
     ->addAttributeToFilter('special_from_date', array('date' => true, 'to' => $dateToday))
     ->addAttributeToFilter('special_to_date', array('or'=> array(
            0 => array('date' => true, 'from' => $dateTomorrow),
            1 => array('is' => new Zend_Db_Expr('null')))
     ), 'left'); 
```

这将检索所有特价大于零的产品，并且该特殊日期与当前日期匹配。

# java - 线程安全的布隆过滤器

> ID：11720111
> 
> 赞同：3
> 
> 时间：2012-07-30T10:58:57.930
> 
> 标签：java, guava

我正在寻找一个线程安全的 BloomFilter 实现，即，如果将值按顺序或同时并行放入过滤器，则该实现的行为将完全相同。番石榴的 BloomFilter 的 javadoc 对线程安全保持沉默。它是线程安全的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T12:00:16.063

番石榴`BloomFilter`不是线程安全的。

也就是说，我并不是 100% 清楚你期望线程安全的语义是什么`BloomFilter`——`put`是原子的？我在想象`long[]`用 an替换的效果`AtomicLongArray`，我很确定你最终得到的语义是“如果`put(x)`发生在之前`mightContain(x)`，则`mightContain(x)`返回`true`”，我认为这些语义很有用，但我并不积极。

这可能值得[提出](https://code.google.com/p/guava-libraries/issues/entry)一个特定用例的问题，但是会有一些细节来弄清楚线程安全在这里究竟意味着什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T12:16:27.540

正如其他人所指出的，最好的解决方案是修补现有框架以使其成为线程安全的。但是对于更直接的需求，考虑将非线程安全版本包装在线程安全外观中：

```
public class ThreadSafeBloomFilter {
  private BloomFilter filter;

  public ThreadSafeBloomFilter(BloomFilter filter) {
    this.filter = filter;
  }

  public synchronized void add(Object obj) {
    filter.add(obj);
  }
} 
```

以类似的方式实现您需要的其他方法。您可能还想让它变得漂亮和通用（例如 ThreadSafeBloomFilter，但这是您的决定）。

在性能方面，这将序列化所有请求，因此您不会通过并行访问它来体验任何性能提升（并且可能会造成瓶颈）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-25T15:42:38.943

我上周遇到了这个问题。

最终为番石榴布隆过滤器创建了一个包装类，我在其中创建了许多过滤器。然后根据要插入的键，我选择了一个过滤器并单独同步。使用 256 个过滤器和 8 个并发线程运行，即使添加了同步，我的 CPU 利用率也达到了 90%。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-03T12:34:53.500

我采用了 Apache Cassandra 版本来支持并发更新，因为我们在内部需要这个属性。你可以在这里查看：[https ://github.com/ifesdjeen/blomstre](https://github.com/ifesdjeen/blomstre)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-06T08:16:59.130

我用不同的布隆过滤器制作了 java 库，它们都是**线程安全的**。看看这个。[ponkin/布卢姆](https://github.com/ponkin/bloom)

# ssh - 使用他们的 rsa 密钥登录到客户端服务器

> ID：11720114
> 
> 赞同：0
> 
> 时间：2012-07-30T10:59:08.667
> 
> 标签：ssh, openssh

一个客户给了我一个 rsa 和 ppk 文件，所以我可以登录到他们的服务器。我正在使用 OSX Lion，并且我的 id_rsa 文件中有我当前的所有服务器连接。如何添加他们的密钥以便我可以使用它登录？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T11:58:32.650

如果他们给你的 RSA 文件存储在，比如说`~/client/foo_rsa.key`，你可以：

```
$ ssh -i ~/client/foo_rsa.key username@theirhost.example.com 
```

如果您想要一个更持久的解决方案，存储这种配置`~/.ssh/config`也是一个非常好的主意。

在`~/.ssh/config`中，添加：

```
host clienthost
    identityfile  client/foo_rsa.key
    hostname      theirhost.example.com
    user          usernameonhost 
```

然后，您只需连接：

```
$ ssh clienthost 
```

配置文件中的设置控制您的会话。

上面的间距并不重要，只是为了便于阅读。阅读`man ssh_config`有关可以放入此配置文件的其他内容的详细信息。您可以做很多事情，包括通过其他主机代理您的连接，在任意端口上创建加密隧道（用于 HTTP 或 SOCKS 等其他协议）等。

# vb.net - 在 VB.NET 中动态分组控件

> ID：11720118
> 
> 赞同：0
> 
> 时间：2012-07-30T10:59:20.307
> 
> 标签：vb.net, controls, grouping

我有一个结构列表，并根据该列表中的信息创建控件（标签、文本框……）。我可以对控件进行分组，以便我可以遍历所有控件并再次建立列表吗？关于如何做到最好的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T11:06:05.450

您可以创建`List<Control>`.

```
Dim sampleControls as new List(Of Control)
sampleControls.Add(new Label()) 
```

# objective-c - 在 Objective-c 中多线程下载单个文件

> ID：11720120
> 
> 赞同：0
> 
> 时间：2012-07-30T10:59:40.623
> 
> 标签：objective-c, multithreading, cocoa

我有一个带有对象“块”的数组，如下所示：

```
typedef enum
{
Connecting = 0,
Downloading,
Finished,
Error
} State;

@interface Chunk : NSObject

@property (atomic) uint64_t startingByte;
@property (atomic) uint64_t endingByte;
@property (atomic) NSString *md5;
@property (atomic) State *chunkState;

@end 
```

还有一个下载对象，它保存文件的链接、文件的大小和下载的字节数。下载对象有一个数组作为属性（包含块）。

在例如 6 个线程中下载文件的最佳方法是什么？每个线程一次下载一个块（最后合并它们的想法）。我应该使用 gdc 还是某种队列系统？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T12:28:27.407

鉴于网络通常是瓶颈，从单个服务器同时下载多个块不会更快。事实上，由于争用，它可能会更慢。野生动物园等。al.，将开始多次下载到*不同*的服务器，因为很多网页内容可以在下载完成之前很好地呈现，并且每个不同的服务器都有协商成本，在这种情况下可能都不适用。

如果您确实需要这样做，最好的办法是使用内置类使用多个异步 URL 连接，并让系统自己处理并发。

# android - 更改 android 手机的设备启动时间徽标

> ID：11720122
> 
> 赞同：-2
> 
> 时间：2012-07-30T10:59:46.673
> 
> 标签：android, time, boot, graphical-logo

我想更改我手机的徽标。

如何更改启动标志或我的安卓手机？例如，开机时出现的三星标志。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T11:06:34.077

简短的回答：没有。

稍微长一点的答案：应用程序没有业务更改系统范围的设置，如启动徽标，所以即使你可以，你真的不应该。

更长的答案：虽然从技术上讲，在手机的正常使用中无法更改启动徽标/动画，但如果您有一部已植根的手机并且不介意安装自定义 ROM ，*则可以这样做。*取决于很多因素，它可能仅通过 root 访问是可行的。有关如何执行此操作的详细信息，请访问：http: [//forum.xda-developers.com/showthread.php?t=1745297](http://forum.xda-developers.com/showthread.php?t=1745297)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-06T16:28:44.990

我相信最初的问题与启动时首先弹出的三星（或您的制造商）徽标有关，**而不是**随后运行的启动动画。启动动画可以更改，但最初的标志（可能有两个或更多）似乎有些回避。

在某些手机上，可以通过在 logo.bin 上进行搜索来找到它……在其他手机上，它可能被命名为 boot.img……在其他手机上，你什么也找不到。

有些设备可能有一个名为 param.ifs 的文件——我的没有。如果你找到它......这是在初始制造商徽标之后立即弹出的第二个飞溅。这可以修改，以及启动动画。如果你想改变它们，就知道你在做什么。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-09-30T11:29:45.630

是的，您可以更改三星的启动徽标位于目录 mmt/.lfs/logo.jpg

# jquery - 克隆表单行的最推荐解决方案是什么？

> ID：11720124
> 
> 赞同：0
> 
> 时间：2012-07-30T10:59:47.697
> 
> 标签：jquery

![我打算实现的示例模型](../Images/da91f9e12bbf1ff766576cef508ae607.png)

我正在尝试实现图像中所示的功能。

这些是我的一些问题，希望您能提出意见：

*   我应该在 div 中有一行输入然后克隆它吗？
*   表单元素的名称应该是匹配的数组（name="firselement[]"）吗？
*   如果未选择 Select，它会作为空传递还是跳过？我需要将行作为记录维护在数据库中，并且不希望丢失的输入弄乱数组顺序

非常感谢任何实现这一目标的技巧。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T11:03:38.400

`<select>`将始终传递值。如果没有选择，它将选择默认的。第一个，即在某些情况下可能具有 value `''`。

`name="field[]"`如上所述使用。然后可以简单地克隆每个字段的 HTML，您的系统会将它们识别为一个数组，输入的键和选择的每行都有相关的键。

基本上在您的系统中验证的是 select-name 为每个数组键获取了一个值。例如，您可以将数组键基于发送的文本输入的数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T11:09:08.687

> *“我应该在 div 中有一行输入然后克隆它吗？”*

好吧，那会奏效。我可能会将每个项目（行）设为 ul 中的 li 元素或表格中的 tr。我将使用委托的事件处理程序来管理“删除”处理以及字段的任何其他事件管理。

> *“表单元素的名称应该是匹配的数组（name="firselement[]"）吗？”*

重复字段不必`[]`在其名称中包含方括号即可工作。我相信 put`[]`是 PHP 的事情，但并非所有服务器端语言都这样做（例如，如果您的服务器端是 Java，则可以将重复的请求参数名称作为数组访问，而无需`[]`名称中的 ）。浏览器不在乎一种或另一种方式。

> *“如果未选择 Select，它是作为空传递还是被跳过？我需要将行作为记录保留在 DB 中，并且不希望丢失的输入弄乱数组顺序”*

如果您正在谈论一个下拉选择元素，那么首先在列表中包含一个默认/空选项 - 它的值（可以是空字符串）将包含在请求中。第一个选项实际显示给用户的文本可能是一个空字符串，或者类似“--select a value--”之类的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T13:13:57.603

在这里，我为上述查询完成了完整的解决方案箱。您可以查看演示链接，如下所示：

**演示：** [http ://codebins.com/bin/4ldqp99](http://codebins.com/bin/4ldqp99)

**HTML：**

```
<div id="panel">
  <form id="frm1">
    <div id="table1">
      <div class="row">
        <div class="input">
          <input type="text" size="18" name="frmtext[]"/>
        </div>
        <div class="input">
          <select name="selop1[]">
            <option value="0">
              --select--
            </option>
            <option value="1">
              option1
            </option>
            <option value="2">
              option2
            </option>
            <option value="3">
              option3
            </option>
          </select>
        </div>
        <div class="input">
          <select name="firselement[]">
            <option value="0">
              --select--
            </option>
            <option value="firselement1">
              firselement1
            </option>
            <option value="firselement2">
              firselement2
            </option>
            <option value="firselement3">
              firselement3
            </option>
          </select>
        </div>
        <div class="input">
          <a href="javascript:void(0);" class="delete">
            Delete
          </a>
        </div>

      </div>

      <div class="action">
        <a  href="javascript:void(0);" id="addrow">
          Add Row
        </a>
      </div>
    </div>
  </form>
</div> 
```

**CSS：**

```
#table1{
  background:#22559d;
  width:500px;
  padding:10px;
}
.row{
  width:450px;
  padding:5px;
  margin-top:2px;
  border:1px solid #dcada9;
}
.input{
  display:inline-block;
  margin: 0 10px 0 10px;
}
input, select{
  border:1px solid #adada9;
}
#table1 a{
  color:#fdddda;
  text-decoration:none;
}
#table1 a:hover{
  text-decoration:underline;
} 
```

**查询：**

```
 $(function() {
    $("#addrow").click(function() {
        $('.row:last').clone().insertAfter(".row:last");
        $('.row:last').find("a.delete").live('click', delRow);

        //Bind Delete Link Shows on Newly Added Row
        $("a.delete").live('click', delRow);

        /*--Here You can remove following scripts If you dont want to keep selected drop down option as on previous row ---  */
        $('.row:last').find("select:eq(0)").val($('.row:last').prev(".row").find("select:eq(0)").val());

        $('.row:last').find("select:eq(1)").val($('.row:last').prev(".row").find("select:eq(1)").val());
        /* --End of script for Selecting Drop down values --*/

    });

});

function delRow() {
    $(this).parents(".row").remove();
    if ($(".row").length <= 0) {
        $(".action").hide();
    }
} 
```

**演示：** [http ://codebins.com/bin/4ldqp99](http://codebins.com/bin/4ldqp99)

# selenium - 将 Internet Explorer 与 WebDriverBackedSelenium 一起使用时出现 JavascriptError

> ID：11720126
> 
> 赞同：1
> 
> 时间：2012-07-30T11:00:11.493
> 
> 标签：selenium, screenshotexception

我正在使用 WebDriverBackedSelenium 对网站进行自动化测试，但我的代码在 chrome 和 firefox 上运行良好，但在 IE 中出现问题

代码是

```
WebDriver driver = new ChromeDriver();
String baseUrl = "https://mywebsite.com/";
selenium = new WebDriverBackedSelenium(driver, baseUrl);
selenium.fireEvent("//td[@id='skin_container_logoff']/a/table/tbody/tr/td[2]", "click"); 
```

此行给出以下错误

```
 com.thoughtworks.selenium.SeleniumException: JavaScript error (WARNING: The server did not   
  provide any stacktrace information) Command duration or timeout: 125 milliseconds Build info: 
  version: '2.18.0', revision: '15704', time: '2012-01-27 15:48:16' System info: os.name:   '    
  Windows 7', os.arch: 'x86', os.version: '6.1', java.version: '1.6.0_24' Driver info: 
  driver.version: EventFiringWebDriver Command duration or timeout: 735 milliseconds Build info: 
  version: '2.18.0', revision: '15704', time: '2012-01-27 15:49:22' System info: os.name: 
  'Linux', os.arch: 'amd64', os.version: '2.6.32-131.2.1.el6.x86_64', java.version: '1.6.0_26-
   rev' Driver info: driver.version: RemoteWebDriver at     
   org.openqa.selenium.internal.seleniumemulation.SeleneseCommand.apply(SeleneseCommand.java:42) 
  at org.openqa.selenium.internal.seleniumemulation.Timer.run(Timer.java:39) at 
  org.openqa.selenium.WebDriverCommandProcessor.execute(WebDriverCommandProcessor.java:145) at 
  org.openqa.selenium.WebDriverCommandProcessor.doCommand(WebDriverCommandProcessor.java:75) at 
  com.thoughtworks.selenium.DefaultSelenium.fireEvent(DefaultSelenium.java:210) at 
   com.example.tests.WebDriverBackedSeleniumEx.fireEvent(WebDriverBackedSeleniumEx.java:103) at 
  com.example.tests.LoginAdvanceIE.testLoginIE(LoginAdvanceIE.java:48) at 
 com.thoughtworks.selenium.SeleneseTestCase.runBare(SeleneseTestCase.java:230) Caused by: 
 org.openqa.selenium.WebDriverException: JavaScript error (WARNING: The server did not provide 
 any stacktrace information) Command duration or timeout: 125 milliseconds Build info: version: 
 '2.18.0', revision: '15704', time: '2012-01-27 15:48:16' System info: os.name: 'Windows 7', 
 os.arch: 'x86', os.version: '6.1', java.version: '1.6.0_24' Driver info: driver.version: 
 EventFiringWebDriver Command duration or timeout: 735 milliseconds Build info: version: 
'2.18.0', revision: '15704', time: '2012-01-27 15:49:22' System info: os.name: 'Linux', os.arch: 
'amd64', os.version: '2.6.32-131.2.1.el6.x86_64', java.version: '1.6.0_26-rev' Driver info: 
driver.version: RemoteWebDriver at 
java.lang.reflect.Constructor.newInstance(Constructor.java:513) at 
org.openqa.selenium.remote.ErrorHandler.createThrowable(ErrorHandler.java:147) at 
org.openqa.selenium.remote.ErrorHandler.throwIfResponseFailed(ErrorHandler.java:113) at 
org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:439) at 
org.openqa.selenium.remote.RemoteWebDriver.executeScript(RemoteWebDriver.java:353) at 

org.openqa.selenium.internal.seleniumemulation.JavascriptLibrary.executeScript(JavascriptLibrary.java
    :88) at 
    org.openqa.selenium.internal.seleniumemulation.FireEvent.handleSeleneseCommand(FireEvent.java:38)   
    at  
    org.openqa.selenium.internal.seleniumemulation.FireEvent.handleSeleneseCommand(FireEvent.java:1) 
    at org.openqa.selenium.internal.seleniumemulation.SeleneseCommand.apply(SeleneseCommand.java:36) 
   Caused by: org.openqa.selenium.remote.ScreenshotException: Screen shot has been taken Build info: 
   version: '2.18.0', revision: '15704', time: '2012-01-27 15:49:22' System info: os.name: 'Linux', 
    os.arch: 'amd64', os.version: '2.6.32-131.2.1.el6.x86_64', java.version: '1.6.0_26-rev' Driver 
    info: driver.version: RemoteWebDriver at 
    org.openqa.selenium.remote.ErrorHandler.throwIfResponseFailed(ErrorHandler.java:101) Caused by: 
    org.openqa.selenium.WebDriverException: JavaScript error (WARNING: The server did not provide any 
    stacktrace information) Command duration or timeout: 125 milliseconds Build info: version: 
    '2.18.0', revision: '15704', time: '2012-01-27 15:48:16' System info: os.name: 'Windows 7', 
    os.arch: 'x86', os.version: '6.1', java.version: '1.6.0_24' Driver info: driver.version: Even
   tFiringWebDriver Build info: version: '2.18.0', revision: '15704', time: '2012-01-27 15:49:22'   
   System info: os.name: 'Linux', os.arch: 'amd64', os.version: '2.6.32-131.2.1.el6.x86_64', 
java.version: '1.6.0_26-rev' Driver info: driver.version: EventFiringWebDriver at 
java.lang.reflect.Constructor.newInstance(Unknown Source) at 
org.openqa.selenium.remote.ErrorHandler.createThrowable(ErrorHandler.java:147) at 
org.openqa.selenium.remote.ErrorHandler.throwIfResponseFailed(ErrorHandler.java:113) at 
org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:439) at 
org.openqa.selenium.remote.RemoteWebDriver.executeScript(RemoteWebDriver.java:353) at 
org.openqa.selenium.support.events.EventFiringWebDriver$2.invoke(EventFiringWebDriver.java:100) at 
$Proxy2.executeScript(Unknown Source) at 

   org.openqa.selenium.support.events.EventFiringWebDriver.executeScript(EventFiringWebDriver.java:208) 
    at org.openqa.selenium.remote.server.handler.ExecuteScript.call(ExecuteScript.java:54) at 
    org.openqa.selenium.remote.server.handler.ExecuteScript.call(ExecuteScript.java:1) at 
    java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source) at 
    java.util.concurrent.FutureTask.run(Unknown Source) at 
    java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source) at 
    java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source) at java.lang.Thread.run(Unknown 
    Source) 
```

我尝试了 WebDriverWait 但我仍然收到错误消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T14:42:46.377

我不确定这是否是问题所在，但请尝试手动指定 javascript 超时：

```
driver.manage().timeouts().setScriptTimeout(30, TimeUnit.SECONDS); 
```

# perl - ParseExcel 工作表 get_name()

> ID：11720130
> 
> 赞同：1
> 
> 时间：2012-07-30T11:00:27.823
> 
> 标签：perl, parseexcel

使用某些旧版本的 ActivePerl，读取电子表格：

```
use Spreadsheet::ParseExcel;
$excel = Spreadsheet::ParseExcel::Workbook->Parse("some file");
foreach $sheet (@{$excel->{Worksheet}}){
  print $sheet->get_name(); 
} 
```

错误：`Can't locate object method get_name() spreadsheet::parseexcel::worksheet`

也不`$sheet->{name}`给什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T13:36:51.520

[0.43（2009 年 1 月）之前的Spreadsheet::ParseExcel](http://search.cpan.org/dist/Spreadsheet-ParseExcel/)版本没有`get_name()`方法。

如果您升级到最新版本的 Spreadsheet::ParseExcel，那么您的代码将起作用。我测试了它。

但是，`Spreadsheet::ParseExcel::Workbook->Parse()`现在已弃用，因为它不进行错误检查。改为使用`Spreadsheet::ParseExcel->Parse()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T13:19:58.567

```
foreach my $sheet ($excel->worksheets) {
    print $sheet->get_name;
} 
```

作品。您应该调用该[`worksheets`方法](http://p3rl.org/Spreadsheet%3a%3aParseExcel#worksheets-)来获取 Worksheets 对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T11:00:27.823

**$sheet->{Name}**（大写）给出了 ParseExcel v0.49 中的名称

# html - 窗口缩小时缩小 div

> ID：11720138
> 
> 赞同：2
> 
> 时间：2012-07-30T11:01:02.113
> 
> 标签：html, css

我每个旁边有 2 个水平 div。当窗口变小时，我都试图让右侧的 div 缩小，但它会下降到下一行。此外，我希望右侧的 div 能够到达其容器 div 的外边界。

我唯一的成功是如果在右侧 div 上放置一个百分比宽度，但它确实触及容器边框。

[JS小提琴](http://jsfiddle.net/MdJBP/3/)

这是代码HTML

```
<div id="container">
<div id="rsfeed">
                            <div class="rsfeedlabel">RSS Stream</div>
                            <div class="rsfeedinfo ofh">
                                <table class="rsfeedtbl">
                                    <tr>
                                        <td>otam rem aperiam, eaque ipsa quae ab - Illo inventore veritatis et quasi rem aperiam, eaque ipsa inventore veritatis et quasi rem </td>
                                    </tr>
                                </table>
                            </div>
</div>

</div> 
```

CSS

```
#container {
    width: 90%;
    border:1px solid black;
    height:100px;
}

#rsfeed {font-family: Arial;position: relative;overflow: hidden;}

#rsfeed .rsfeedlabel {
    float: left;
    border: 1px solid #727272;
    height: 24px;
    line-height: 24px;
    background: grey;
    margin-top: 20px;
    color:  white;
    font-family: Arial;
    vertical-align: middle;
    padding-left: 6px;
    padding-right: 6px;
    font-size: 75%;
    text-shadow: 1px 1px 1px #000;

}

#rsfeed .rsfeedinfo {
    float: left;
    height: 24px;
    line-height: 24px;
    border-right: 1px solid #b9b8b8; border-top: 1px solid #b9b8b8; border-bottom: 1px solid #b9b8b8;
    margin-top: 20px; 
    font-size: 75%;
    vertical-align: middle;
    font-family: Arial;
    white-space: nowrap;
    overflow: hidden;
    /*width:80%;*/ 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T11:05:26.530

嘿现在**删除** `float left`这个**类**

```
#rsfeed .rsfeedinfo 
```

**和** `add white-space nowrap`你的**身份证** `#rsfeed` **一样**

```
 #rsfeed .rsfeedinfo {
    float:left;  // remove this line
    }

#rsfeed {
white-space:nowrap; //add this line
} 
```

**现场演示**

[http://jsfiddle.net/MdJBP/4/](http://jsfiddle.net/MdJBP/4/)

# colors - Photoshop 将颜色更改为蓝白色

> ID：11720139
> 
> 赞同：0
> 
> 时间：2012-07-30T11:01:04.617
> 
> 标签：colors, photoshop, alter

我正在尝试在 Photoshop 中制作标题，但我希望我使用的图像只有两种基色。

就像：

![在此处输入图像描述](../Images/defc96b93b9878236fbfd5e8d52f45b8.png)

我该如何做到这一点？是否可以只调整一层？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T11:06:55.857

基础是在图像>调整>色相/饱和度中使用色相/饱和度勾选底部的着色并享受着色

# javascript - 使用脚本设置 onclick 事件

> ID：11720141
> 
> 赞同：24
> 
> 时间：2012-07-30T11:01:11.893
> 
> 标签：javascript, html, dom, events, dom-events

我想让我的`script`集合成为`onclick`a 的属性`<div>`。

我使用这个 Html 代码：

```
<div id="forgotpass">Forgot Password?</div> 
```

我希望当用户单击要运行`<div>`的`forgotpass()`函数时，但我不想使用它：

```
<div id="forgotpass" onclick="forgotpass();">Forgot Password?</div> 
```

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-07-30T11:04:40.987

或者，如果您不使用 jQuery：

```
document.getElementById('forgotpass').onclick = forgotpass; 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-07-30T11:05:32.197

**纯 JavaScript：**

```
function addListener(element, eventName, handler) {
  if (element.addEventListener) {
    element.addEventListener(eventName, handler, false);
  }
  else if (element.attachEvent) {
    element.attachEvent('on' + eventName, handler);
  }
  else {
    element['on' + eventName] = handler;
  }
}

function removeListener(element, eventName, handler) {
  if (element.addEventListener) {
    element.removeEventListener(eventName, handler, false);
  }
  else if (element.detachEvent) {
    element.detachEvent('on' + eventName, handler);
  }
  else {
    element['on' + eventName] = null;
  }
}

addListener(document.getElementById('forgotpass'), 'click', forgotpass); 
```

**jQuery：**

```
$(document).ready(function() {
  $("#forgotpass").click(forgotPass);
}); 
```

**或者：**

```
$(document).ready(function() {
  $("#forgotpass").click(function() {
    forgotPass();
  });
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-11-26T07:39:36.813

像这样的东西可能会起作用..

```
var div = document.getElementById("forgotpass");
div.onclick=function(){ /*do something here */ }; 
```

如果您不添加该功能，则 javascript 将在运行脚本后运行 onclick。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-30T11:02:33.673

你可以用 jQuery 来做到这一点

```
$("#forgotpass").click(function() {
  alert("Handler for .click() called.");
}); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-30T11:05:54.207

在纯 JavaScript 中，您可以执行以下操作：

```
function forgotpass() {
 //..code
}

var el = document.getElementById("forgotpass");
el.onclick = forgotpass; 
```

但这非常幼稚，不灵活，可能是一种不好的做法。

如果你使用 jQuery，你可以这样做：

```
function forgotpass() {
 //..code
}

$(document).ready(function() {
  $("#forgotpass").click(function() {
    forgotPass();
  });
}); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-04-03T23:02:43.857

如果只需要支持 IE 9+（[源码](https://developer.mozilla.org/en-US/docs/Web/API/EventTarget.addEventListener#Browser_compatibility)），可以[`EventTarget.addEventListener`](https://developer.mozilla.org/en-US/docs/Web/API/EventTarget.addEventListener)在纯 JavaScript 中使用。

```
function forgotpass() {
  alert("Hello, world!");
}

var element = document.getElementById("forgotpass");
element.addEventListener("click", forgotpass, false);
```

```
<button id="forgotpass">Forgot Password?</button>
```

如果您需要支持较旧的浏览器，我推荐[Speransky Daniel's answer](https://stackoverflow.com/a/11720198/406249)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-08-03T07:04:43.453

# 直接在 HTML 中添加事件列表器：

```
...
<div>
    <input type="button" value="Set Cookie" onclick="setCookie();" />
</div>
<script>
    function setCookie() {
        console.log('ready to set cookie?');
    }
</script>
... 
```

## 参考：[W3CSchools](https://www.w3schools.com/tags/tryit.asp?filename=tryhtml5_ev_onclick)

祝你好运！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-09-18T21:11:53.693

如果您使用的是 jQuery，最好按照以下方式完成。如果多次执行函数调用，将注册多个事件句柄。以下方法可确保删除以前的处理程序

```
$("#forgotpass").off().on('click', function () { 
    forgotPass(); 
}); 
```

# android - android中图像的交叉幻灯片

> ID：11720144
> 
> 赞同：0
> 
> 时间：2012-07-30T11:01:18.710
> 
> 标签：android, android-animation

我正在开发一个应用程序，其中有五个图像，并且它们之间的转换应该以一种交叉滑动另一个的方式发生。我已经实现了一些技术，但那些不符合我的期望。如果你有任何想法请与我分享。

提前致谢。PK

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T11:04:23.147

下载示例应用程序，它可以帮助您

[https://github.com/nostra13/Android-Universal-Image-Loader](https://github.com/nostra13/Android-Universal-Image-Loader)

# sql - 存储过程返回一个空值

> ID：11720146
> 
> 赞同：0
> 
> 时间：2012-07-30T11:01:32.323
> 
> 标签：sql, tsql, stored-procedures

我创建了以下存储过程：

订单详细信息 -`Id(int), OrderId(int), AnniID(int), Quantity(int), UnitCost(money)`

周年纪念日 -`AnniID (int), Title( varchar(50) )`

AnniID 将成为连接 2 个表的外键。

当我执行存储过程时，尽管它实际上在数据库中有 1 个项目，但它什么也不返回。

代码有问题吗？还是我没有正确地进行内部连接？

```
ALTER PROCEDURE dbo.Selectpurchasedwithproducts @AnniID INT
AS
    SELECT TOP 5 OrderDetails.AnniID,
                 Anniversary.Title,
                 Sum(OrderDetails.Quantity) AS TotalNum
    FROM   OrderDetails
           INNER JOIN Anniversary
             ON OrderDetails.AnniID = Anniversary.AnniID
    WHERE  OrderId IN (
                      /* This inner query should retrieve all orders that have contained the anniID */
                      SELECT DISTINCT OrderId
                       FROM   OrderDetails
                       WHERE  AnniID = @AnniID)
           AND OrderDetails.AnniID != @AnniID
    GROUP  BY OrderDetails.AnniID,
              Anniversary.Title
    ORDER  BY TotalNum DESC

    RETURN 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T11:25:30.307

您的查询与您的编写方式略有混淆；

首先，您在 AnniId 上加入了两个表：

```
FROM   OrderDetails
INNER JOIN Anniversary
   ON OrderDetails.AnniID = Anniversary.AnniID 
```

其次，您需要 OrderDetails 表中的 OrderIds`AnniId = @AnniId`

```
WHERE OrderId IN 
(
   /* This inner query should retrieve all orders that have contained the anniID */
   SELECT DISTINCT OrderId 
   FROM OrderDetails
   WHERE AnniID = @AnniID
) 
```

但是你想要 AnniID 不等于 @AnniId 的 OrderDetails：

```
AND OrderDetails.AnniID != @AnniID 
```

您的查询中有几个相互冲突的语句。你到底想完成什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T11:22:19.140

看起来像你对我的陈述

```
WHERE   OrderId IN  
(     
    /* This inner query should retrieve all orders
       that have contained the anniID   */
    SELECT DISTINCT OrderId      
        FROM OrderDetails     
        WHERE AnniID = @AnniID 
) 
AND OrderDetails.AnniID != @AnniID 
```

等于`@AnniID`不等于的OrderDetails 怎么可能`@AnniID`？

# c++ - 用于搜索位数组以查找连续设置/清除位的快速代码？

> ID：11720147
> 
> 赞同：7
> 
> 时间：2012-07-30T11:01:32.507
> 
> 标签：c++, c, bitarray, bitvector

是否有一些相当快的代码可以帮助我快速搜索大位图（几兆字节）以查找连续的零位或一位的运行？

我所说的“相当快”是指可以利用机器字长并一次比较整个字的东西，而不是进行非常慢的逐位分析（例如使用`vector<bool>`）。

例如，在卷的位图中搜索可用空间（用于碎片整理等）非常有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T11:01:32.507

Windows 有[`RTL_BITMAP`](http://msdn.microsoft.com/en-us/library/windows/hardware/ff563614.aspx)一种可以与 API 一起使用的数据结构。

但是我前一段时间需要这个代码，所以我在这里写了它（警告，它有点难看）：
[https ://gist.github.com/3206128](https://gist.github.com/3206128)

我**只对其进行了部分**测试，因此它可能仍然存在错误（尤其是在 上`reverse`）。但是最近的一个版本（与这个版本略有不同）似乎对我有用，所以值得一试。

整个事情的基本操作是能够 - 快速 - 找到一系列位的长度：

```
long long GetRunLength(
    const void *const pBitmap, unsigned long long nBitmapBits,
    long long startInclusive, long long endExclusive,
    const bool reverse, /*out*/ bool *pBit); 
```

鉴于其多功能性，其他一切都应该很容易建立在此之上。

我试图包含一些 SSE 代码，但它并没有显着提高性能。但是，总的来说，代码比逐位分析快很多倍，所以我认为它可能有用。

如果你能以某种方式获得 ' 缓冲区应该很容易测试`vector<bool>`——如果你使用的是 Visual C++，那么我包含的一个函数可以为你做这件事。如果您发现错误，请随时告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T13:46:42.517

我不知道如何直接在记忆词上做得很好，所以我制定了一个快速解决方案，它适用于字节；为方便起见，让我们画出计算连续数的算法：

构建两个大小为 256 的表，您将在其中为 0 到 255 之间的每个数字写入字节开头和结尾的尾随 1 的数量。例如，对于数字 167（二进制为 10100111），将 1 放在第一个表中，将 3 放在第二个表中。我们称第一个表为 BBeg，第二个表为 BEnd。然后，对于每个字节 b，有两种情况：如果它是 255，则将 8 加到当前连续的集合的当前总和中，并且您处于一个区域中。否则，您以 BBeg[b] 位结束一个区域，并以 BEnd[b] 位开始一个新区域。根据你想要的信息，你可以调整这个算法（这是我没有放任何代码的原因，我不知道你想要什么输出）。

一个缺陷是它不计算一个字节内的（小）连续的集合......

除了这个算法，有朋友告诉我，如果是做磁盘压缩，只需要寻找不同于0（空盘区）和255（满盘区）的字节即可。构建必须压缩的块的地图是一种快速的启发式方法。也许它超出了这个话题的范围......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T10:27:33.313

听起来像这样可能有用：

[http://www.aggregate.org/MAGIC/#Population%20Count%20%28Ones%20Count%29](http://www.aggregate.org/MAGIC/#Population%20Count%20%28Ones%20Count%29) 和 [http://www.aggregate.org/MAGIC/#Leading%20Zero%20Count](http://www.aggregate.org/MAGIC/#Leading%20Zero%20Count)

您没有说您是否想做某种 RLE 或简单地计算字节内的零和一位（如 0b1001 应该返回 1x1 2x0 1x1）。

用于快速检查的查找表和 SWAR 算法可能会轻松地为您提供该信息。有点像这样：

```
byte lut[0x10000] = { /* see below */ };
for (uint * word = words; word < words + bitmapSize; word++) {
   if (word == 0 || word == (uint)-1) // Fast bailout
   {
       // Do what you want if all 0 or all 1
   }
   byte hiVal = lut[*word >> 16], loVal = lut[*word & 0xFFFF];
   // Do what you want with hiVal and loVal 
```

LUT 必须根据您的预期算法构建。如果你想计算单词中连续的 0 和 1 的数量，你可以这样构建它：

```
 for (int i = 0; i < sizeof(lut); i++) 
     lut[i] = countContiguousZero(i); // Or countContiguousOne(i)
  // The implementation of countContiguousZero can be slow, you don't care
  // The result of the function should return the largest number of contiguous zero (0 to 15, using the 4 low bits of the byte, and might return the position of the run in the 4 high bits of the byte
  // Since you've already dismissed word = 0, you don't need the 16 contiguous zero case. 
```

# xcode - 为 osx 10.5 编译应用程序

> ID：11720149
> 
> 赞同：0
> 
> 时间：2012-07-30T11:01:40.227
> 
> 标签：xcode, macos, compilation, xcode4.4

**从osx 10.7 (xcode 4.4)**编译时，有没有办法确保应用程序将在**osx 10.5**上运行？

 **或者至少，它已成功编译为 10.5？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T11:10:00.053

您应该将部署目标设置为 OS X 10.5。确保您不使用任何在 10.5 上不可用的 API（或者，如果您这样做，您使用它的能力较弱，并且有一个在 API 不可用时将使用的后备代码路径）。在 10.5 上测试您的应用程序。

后备编码选项：

*   测试 API 对象是否响应自 10.5 以来引入的选择器
*   通过获取引用来测试自 10.5 以来引入的类是否存在`NSClassFromString()`
*   针对 SDK 框架的弱链接，在运行时发现这些框架中的符号是否是`NULL`
*   动态加载共享库`dlopen()`，如果它们不存在则回退**

# ruby - 使用 class_eval 覆盖关联

> ID：11720152
> 
> 赞同：1
> 
> 时间：2012-07-30T11:01:52.397
> 
> 标签：ruby, ruby-on-rails-3, metaprogramming

我有一个具有以下关系的消息模型：

```
belongs_to :sender, Class: "User"
belongs_to :recipient, Class: "User" 
```

在某些情况下，我正在尝试使用 class_eval 覆盖接收者方法。

这有效：

```
def update_recipient(message, recipient_addition = nil)
  message.class_eval <<-EVAL
    def recipient
      "test"
    end
  EVAL
end 
```

message.recipient => "测试"

但是，这不会：

```
def update_recipient(message, recipient_addition = nil)
  message.class_eval <<-EVAL
    def recipient
      [#{message.recipient}, #{recipient_addition}]
    end
  EVAL
end

(eval):3: syntax error, unexpected keyword_end, expecting ']' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T11:33:57.867

第一个`#`被误解为注释字符，丢弃了该行的其余部分。预计`#{}`将在双引号内插入，尽管现在似乎没有理由将它们放入，`#{}`因为它们只是简单的字符串值。

```
["#{message.recipient}", "#{recipient_addition}"] 
```

...除非您计划类似：

```
["To: #{message.recipient}", "CC: #{recipient_addition}"] 
```

# mysql - MySQL 通过 REGEXP 匹配的计数增加字段

> ID：11720153
> 
> 赞同：0
> 
> 时间：2012-07-30T11:02:00.717
> 
> 标签：mysql, regex, count, match

我正在尝试构建一个复杂的查询。我有一个表，在那个表中，我想添加一个人工字段`match_count`，使用`SELECT *,match_count FROM`. 那不是问题。问题是这样的：我有几个正则表达式，我想用找到的每个正则表达式来增加 match_count。这些表达式将应用于表格的多个字段，例如`param1 REGEXP "reg1"`和`param2 REGEXP "reg2"`、 和`param1 REGEXP "reg3"`。列可以重复使用，表达式也可以重复使用，但是 match_count 字段应该对应于匹配的数量。

如果可能的话，如果一个列多次匹配一个正则表达式，匹配计数不是增加一，而是增加这些匹配的数量，这也将是很酷的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T11:07:28.700

您可以对 REGEXP 表达式的结果求和：

```
SELECT *,
    param1 REGEXP "reg1" +
    param2 REGEXP "reg2" +
    param1 REGEXP "reg3" AS match_count
FROM 
```

* * *

> 如果可能的话，如果一个列多次匹配一个正则表达式，匹配计数不是增加一，而是增加这些匹配的数量，这也将是很酷的。

我认为这在 MySQL 中是不可能的。然而，它在许多通用语言中是可能的。

# python - IDLE 中的 Unicode 字符

> ID：11720155
> 
> 赞同：-1
> 
> 时间：2012-07-30T11:02:12.130
> 
> 标签：python, unicode, python-idle

我只是在学习python。我阅读了有关 Unicode 字符和字符串的信息，并试图打印出此处提到的最近引入的符号 - [http://www.fileformat.info/info/unicode/char/20b9/index.htm](http://www.fileformat.info/info/unicode/char/20b9/index.htm)

但是我在 IDLE 提示符下的尝试：

```
u"\u20b9" 
```

只是回显相同的表达式而不是产生字符。我不确定这是否是字体或 Unicode 版本的问题，或者我做错了什么。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T11:05:47.573

它应该工作得很好：`print u"\u20b9"`

我猜你只是`u"\u20b9"`在没有打印功能的情况下打字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T11:06:29.040

试试这个：

```
>>> s=u"\u20b9"
>>> print s
₹ 
```

或这个：

```
>>> print u'rupee: {}'.format(u"\u20b9")
rupee: ₹ 
```

# objective-c - 如何将 UIPicker 与多个文本字段一起使用

> ID：11720159
> 
> 赞同：0
> 
> 时间：2012-07-30T11:02:26.577
> 
> 标签：objective-c, ios, xcode, textbox, uipickerview

我可以从选择器获取文本框值到一个文本框。如何获得更多文本框的不同值。目前，即使我只填写一个文本框并且只显示来自第一个 NSArray 的值，所有文本字段都会被填充。我试过一个`if`说法，Apple 文档没有太大帮助。

我不知道标记是如何工作的，但注意到在研究这个时提到了它。抱歉，如果我没有正确解释这一点，如果我没有很好地解释它，请下载一个测试应用程序

[应用示例](http://cl.ly/0R2m2q3Q463T)

。H

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController <UIPickerViewDataSource,    UIPickerViewDelegate,UITextFieldDelegate>

{
//decalre picker
UIPickerView *select;

//declare NSArrray
NSArray *arrStatus;
NSArray *arrStatus2;

 }

@property (strong, nonatomic) IBOutlet UITextField *text1;
 - (IBAction)Value:(id)sender;
@property (strong, nonatomic) IBOutlet UITextField *text2;
@end 
```

.m

```
 - (void)viewDidLoad
 {

///create picker//////////////////////////////////////////////////////////////////////////

select = [[UIPickerView alloc] initWithFrame:CGRectZero];
select.delegate = self;
select.dataSource = self;
[select setShowsSelectionIndicator:YES];
text1.inputView = select;
text2.inputView = select;

////arrays & objects
arrStatus = [[NSArray alloc] initWithObjects:@"1",@"2",@"3",@"4",nil];
arrStatus2 = [[NSArray alloc] initWithObjects:@"A",@"B",@"C",@"D",nil];

//number of colums and rows etc of picker    
}
-(NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView
{
//One column
return 1;
}

 -(NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent: (NSInteger)component
{
//set number of rows
return arrStatus.count;
 return arrStatus2.count;

  }

  -(NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component
 {
//set item per row
return [arrStatus objectAtIndex:row];
return [arrStatus2 objectAtIndex:row];

- (IBAction)Value:(id)sender {

///get picker values to text field
NSInteger selectedRow = [select selectedRowInComponent:0];

text1.text = [arrStatus objectAtIndex: selectedRow];
[text1 resignFirstResponder];

text2.text = [arrStatus2 objectAtIndex: selectedRow];
[text2 resignFirstResponder];

 }

 @end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T11:33:57.680

在 didselectrow 的方法中，我让 if 语句查看哪个文本字段是第一响应者。然后使用以下代码。它将 uipicker 值放置在每个文本字段中。

```
-(void) pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component
{
if ([_input1 isFirstResponder])
{
    NSString *resultString1 = [[NSString alloc] initWithFormat:[gradeArray objectAtIndex:[pickerView selectedRowInComponent:0]]];
    NSString *resultString2 = [[NSString alloc] initWithFormat:[plusMinusArray objectAtIndex:[pickerView selectedRowInComponent:1]]];
    NSString *gradeResult = [resultString1 stringByAppendingString:resultString2];
    _input1.text = gradeResult;
}else if ([_input2 isFirstResponder])
{
    NSString *resultString1 = [[NSString alloc] initWithFormat:[gradeArray objectAtIndex:[pickerView selectedRowInComponent:0]]];
    NSString *resultString2 = [[NSString alloc] initWithFormat:[plusMinusArray objectAtIndex:[pickerView selectedRowInComponent:1]]];
    NSString *gradeResult = [resultString1 stringByAppendingString:resultString2];
    _input2.text = gradeResult; 
}else if ([_inputM isFirstResponder])
{
    NSString *resultString1 = [[NSString alloc] initWithFormat:[gradeArray objectAtIndex:[pickerView selectedRowInComponent:0]]];
    NSString *resultString2 = [[NSString alloc] initWithFormat:[plusMinusArray objectAtIndex:[pickerView selectedRowInComponent:1]]];
    NSString *gradeResult = [resultString1 stringByAppendingString:resultString2];
    _inputM.text = gradeResult;
}else if ([_input3 isFirstResponder])
{
    NSString *resultString1 = [[NSString alloc] initWithFormat:[gradeArray objectAtIndex:[pickerView selectedRowInComponent:0]]];
    NSString *resultString2 = [[NSString alloc] initWithFormat:[plusMinusArray objectAtIndex:[pickerView selectedRowInComponent:1]]];
    NSString *gradeResult = [resultString1 stringByAppendingString:resultString2];
    _input3.text = gradeResult;
}else if ([_input4 isFirstResponder])
{
    NSString *resultString1 = [[NSString alloc] initWithFormat:[gradeArray objectAtIndex:[pickerView selectedRowInComponent:0]]];
    NSString *resultString2 = [[NSString alloc] initWithFormat:[plusMinusArray objectAtIndex:[pickerView selectedRowInComponent:1]]];
    NSString *gradeResult = [resultString1 stringByAppendingString:resultString2];
    _input4.text = gradeResult;
}
} 
```

希望这可以帮助。

编辑

如果要在选择器中获取两个数组，则需要将列设为 2。这将显示两个数组。我使用以下代码在选择器视图中显示我的两个数组。

```
-(NSInteger) numberOfComponentsInPickerView:(UIPickerView *)pickerView
{
return 2;
}

-(NSInteger) pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component
{
if (component == 0)
{
    return [gradeArray count];
}
return [plusMinusArray  count];
}

- (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component
{
if (component == 0)
{
    return  [gradeArray objectAtIndex:row];
}
return [plusMinusArray objectAtIndex:row];
} 
```

# java - 在java中使用枚举作为类

> ID：11720166
> 
> 赞同：3
> 
> 时间：2012-07-30T11:03:01.880
> 
> 标签：java

我有一个包含**枚举**的类和包含该对象**列表的类**

```
public enum State {
    ACTIVE,NOT_ACTIVE;
}

public class SomeObject {
    State state;        
    public SomeObject(State state) {
        this.state = state;
    }
}    

public class SomeObjects{
    State state;
    ArrayList<SomeObject> objects = new ArrayList<Main.SomeObject>();       
    public SomeObjects(int count) {
        state = State.ACTIVE;
        for (int i = 0; i < count; i++) {
            objects.add(new SomeObject(state));
        }
    }       
    public void changeState(State state) {
        this.state = state;
    }
} 
```

现在如果我使用`changeState(State.NOT_ACTIVE)`它会改变**SomeObjects和****列表**中所有对象的状态还是只在 SomeObjects 中？

如果仅在**SomeObjects**中，我应该怎么做才能**更改**列表中所有对象的状态`changeState()`？

在这种情况下，创建包含该枚举的类是**唯一的方法吗？**

**更新：**谢谢，但在我的情况下，我需要更改所有对象的状态

```
this.state = state; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T11:12:24.350

> 现在，如果我使用 changeState(State.NOT_ACTIVE) 它将更改 SomeObjects 和列表中的所有对象中的状态还是仅在 SomeObjects 中？

我不完全确定你的想法是什么。

如果您调用`changeState(NOT_ACTIVE)`的某个实例`SomeObjects`，则根据方法的定义，它将将该对象的`state`字段设置为`NOT_ACTIVE`。这个单一的方法调用不可能改变多个对象，因为它对单个变量执行单个赋值。

> 如果仅在 SomeObjects 中，我应该如何使用 changeState() 更改列表中所有对象的状态？

如果您希望该`changeState`方法将状态应用于该`objects`字段中包含的所有对象，那么您可以通过一个简单的循环使其执行此操作：

```
public void changeState(State state) {
    this.state = state;
    for (SomeObject obj : objects) {
        obj.state = state;
    }
} 
```

> 在这种情况下，创建包含该枚举的类是唯一的方法吗？

再说一次，我不清楚你在想什么。你不想设置一个实例中包含`state`的所有实例的值吗？也就是说，为已经定义的类的已经存在的实例设置值？`SomeObject``SomeObjects`

如果是这样，那么这可以通过在循环中设置值来完成。该字段是枚举的事实没有区别；任何原始类型或引用类型在此处的行为都相同。

* * *

编辑回答评论：啊，听起来根本问题首先是使用一个字段。

鉴于您希望`objects`集合的所有内容始终具有完全相同的状态，因此它们都具有单独的`state`字段可能是错误的。这是一个建模错误，因为`SomeObject`实例并没有*真正*独立地保持/控制自己的状态。

我之前要建议的是，您应该实现*方法*而不是直接访问字段 - 这就是现在出现的问题。它应该有一个*方法*，而不是`SomeObject`一个`state` *字段*。对于给定的实例，您有办法获取其当前状态 - 但这不一定是作为直接对象引用实现的。`getState()`

 *并且这个方法的实现应该只是获取包装`SomeObjects`实例的状态（这不是一个特别有用的类名）。所以它可能实现如下：

```
public class SomeObject {
    private final SomeObjects parent;

    public SomeObject(SomeObjects parent) {
        this.parent = parent;
    }

    public State getState() {
        return parent.state; // Ideally accessed via method too
    }
} 
```

这与我对您的设计的理解一致 - 每个都`SomeObject`具有与其包装相同的状态`SomeObjects`（因此隐含地必须`SomeObjects`始终定义一个父实例）。上面的代码几乎是该设计的精确表示。

（而且这里的枚举仍然没有什么特别之处；如果你返回`int`or`String`或，事情的工作原理是一样的`Map<MyFoo, Set<Future<ResultSet>>`。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T11:13:24.523

您的代码不会更改对象字段中所有 SameObjects 的状态。

但是您可以通过将 State 枚举包装在另一个对象中来做到这一点：

```
public enum State
{
    ACTIVE, NOT_ACTIVE;
}

public class CurrentState
{
    private State state;

    public State getState()
    {
        return state;
    }

    public void setState(State state)
    {
        this.state = state;
    }
}

public class SomeObject {
    private CurrentState state;

    public SomeObject(CurrentState state) {
        this.state = state;
    }
}

public class SomeObjects{
    CurrentState state;
    ArrayList<SomeObject> objects = new ArrayList<SomeObject>();

    public SomeObjects(int count) {
        state = new CurrentState();
        state.setState(State.ACTIVE);
        for (int i = 0; i < count; i++) {
            objects.add(new SomeObject(state));
        }
    }

    public void changeState(State state) {
        this.state.setState(state);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T11:21:42.167

要更改所有对象的状态，您需要显式更改每个对象的状态：

```
public enum State {
        ACTIVE,NOT_ACTIVE;
    }

    public class SomeObject {
        State state;

        public SomeObject(State state) {
            this.state = state;
        }

        public void changeState(State state) {
            this.state = state;
        }
    }

    public class SomeObjects{
        State state;
        ArrayList<SomeObject> objects = new ArrayList<Main.SomeObject>();

        public SomeObjects(int count) {
            state = State.ACTIVE;
            for (int i = 0; i < count; i++) {
                objects.add(new SomeObject(state));
            }
        }

        public void changeState(State state) {
            for (int i = 0; i < objects.size(); i++) {
                objects.get(i).changeState(state);
            }
        }

    } 
```

您可以在数组列表中保存枚举类型，而不是为枚举创建包装类：

```
public enum State {
            ACTIVE,NOT_ACTIVE;
        }

        public class SomeObjects{
            State state;
            ArrayList<State> objects = new ArrayList<State>();

            public SomeObjects(int count) {
                state = State.ACTIVE;
                for (int i = 0; i < count; i++) {
                    objects.add(state);
                }
            }

            public void changeState(State state) {
                for (int i = 0; i < objects.size(); i++) {
                    objects.set(i, state);
                }
                this.state = state;
            }

        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T11:08:38.587

这将是您的 SomeObjects 类的一种方法，用于更改定义的数组列表中对象的所有状态。（请使用不那么相似的类名......非常令人困惑！）

```
public void changeAllStates(State changingState) {
    for (SomeObject yourObject : this.objects) {
         yourObject.state = changingState;
    }
} 
```

SomeObjects 类的 changeState 方法只会引用您的 SomeObjects.state-variable，而不是 SomeObjects.objects.state-variable。（没有使用任何约定来显示该层次结构..对不起！）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-30T11:20:02.840

只看了一眼，我认为它不会改变类`state`中的类变量以外的任何东西`SomeObjects`。我不是

如果要更改所有对象的状态，我认为您必须再次遍历列表。在 -class 中添加一个设置状态的方法`SomeObject`，然后执行以下操作：

```
private void changeState(State givenState) {
    for(SomeObject o: objects)
    {
        o.SetState(givenState);
    }
} 
```*

# c# - 我们如何在 asp.net 应用程序中单击按钮清除服务器端缓存？

> ID：11720167
> 
> 赞同：1
> 
> 时间：2012-07-30T11:03:14.627
> 
> 标签：c#, asp.net, .net, server-side

我这里有一个典型的要求。

我有一个用 asp.net 4.0 开发的 Web 应用程序。在此应用程序中，我想向其中一个 Web 表单添加一个按钮，它将执行以下任务：

1.  它应该清除服务器端缓存，我的意思是它应该清除托管应用程序的同一 IIS 服务器的缓存。

现在，我知道我们可以通过删除此处存在的文件来手动实现它，

```
%systemroot%\Microsoft.NET\Framework\v2.0.50727\Temporary ASP.NET Files
%systemroot%\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files 
```

我们需要在删除临时文件之前关闭 IIS，然后再重新启动它。为了避免对缓存文件的任何依赖。

但我想知道如何在 web 表单的按钮单击事件中实现它。请帮我解决这个要求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T11:08:59.257

我目前在我的应用程序中使用以下内容：

```
 public static void ClearAspNetCache(HttpContext context) {
        foreach (DictionaryEntry entry in context.Cache) {
            context.Cache.Remove((string)entry.Key);
        }
    } 
```

这是一个可能非常有用的源参考：

[http://aspadvice.com/blogs/ssmith/archive/2005/11/14/Extending-the-ASPNET-Cache-Object-Cache-Clear.aspx#33197](http://aspadvice.com/blogs/ssmith/archive/2005/11/14/Extending-the-ASPNET-Cache-Object-Cache-Clear.aspx#33197)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T11:11:42.110

如果您想从缓存中删除所有项目，请尝试此操作：

```
IDictionaryEnumerator enumerator = HttpContext.Current.Cache.GetEnumerator();    
while (enumerator.MoveNext())
{    
    HttpContext.Current.Cache.Remove(enumerator.Key);    
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T11:40:43.343

从 HttpContext.Current.Cache 中删除项目不会清除您的 IIS 缓存。它是服务器端缓存（由 ASP.NET 运行时管理），而不是 Web 服务器缓存。

看看这个链接。 [http://blogs.msdn.com/b/dougste/archive/2008/08/11/clearing-out-temporary-asp-net-files.aspx](http://blogs.msdn.com/b/dougste/archive/2008/08/11/clearing-out-temporary-asp-net-files.aspx)

# clearcase - 在 ClearCase 中访问一个黯淡的元素

> ID：11720176
> 
> 赞同：1
> 
> 时间：2012-07-30T11:04:03.530
> 
> 标签：clearcase

在我目前的工作环境中，我广泛使用 eclipsed 文件进行测试。当需要正式化事情时，我有一个脚本，它通过将文件与我的 eclipse 脚本保存的备份进行比较来生成差异。

我希望能够在没有原始文件备份的情况下工作；有什么方法可以检索可以传递给 diff 的文件的当前版本？尽管该文件是私有的，但我看到我可以输入 foo@@/ 并查看版本列表，但我不确定如何找到哪个版本是最新的。我尝试使用 cleartool ls 或使用文件名描述的所有内容都告诉我它不是 VOB 对象（这是真的，尽管 cleartool ls 确实将其显示为黯然失色，所以它必须以某种方式知道那里有一个元素）

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T11:17:52.573

Eclipsed 文件意味着动态视图。

最简单的解决方案是根据相同的配置规范制作*第二个动态视图。*
考虑到这些视图的廉价和快速，这不是问题。

在第二个动态视图上，您​​可以执行

```
cleartool descr -fmt "%Xn" /path/to/element 
```

为了获得文件的[扩展路径名](https://stackoverflow.com/questions/987427/why-cant-perl-find-my-file-that-is-in-clearcase/988904#988904)（有关语法的更多信息，请参见[fmt_ccase](http://publib.boulder.ibm.com/infocenter/cchelp/v7r1m2/index.jsp?topic=/com.ibm.rational.clearcase.cc_ref.doc/topics/fmt_ccase.htm)`%Xn`）。

# javascript - 我想使用 jquery 将类添加到 td 中的锚标记

> ID：11720178
> 
> 赞同：0
> 
> 时间：2012-07-30T11:04:09.803
> 
> 标签：javascript, jquery

这是我的 td：

```
<td width="64%" valign="top" class="addtocart_vak">
<a href="/ShoppingCart.asp?ProductCode=QH1225264">
<img border="0" align="absmiddle" src="btn_addtocart_small.gif">
</a>
</td> 
```

我尝试了下一个 jquery 代码：

```
$('.addtocart_vak' 'a').addClass("anchor"); 
```

接下来我也尝试了：

```
$(".addtocart_vak a[href$=/ShoppingCart.asp]").addClass("anchor"); 
```

请给我正确的解决方案。

**更新：**

我得到以下 JavaScript 异常：

> [异常...“'JavaScript 组件没有名为：“onStatusChange”'的方法，调用方法时：[nsIWebProgressListener::onStatusChange]”nsresult:“0x80570030 (NS_ERROR_XPC_JSOBJECT_HAS_NO_FUNCTION_NAMED)”位置：“”数据：无]

你能给我解决方案如何解决这个错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T11:05:50.323

您只能提供一个字符串作为选择器，但您会在类选择器之后立即破坏您的字符串。您可能会在那里遇到语法错误，对吧？

如果你不在类选择器和标签选择器之间结束你的选择器，你会没事的。

试试这个：

```
$('.addtocart_vak a').addClass("anchor"); 
```

使用此选择器（您的第二次尝试）：

```
$(".addtocart_vak a[href$=/ShoppingCart.asp]") 
```

你所说的是给我所有`a`具有以 . 结尾的 href 属性的元素`/ShoppingCart.asp`。*（不过，您应该在值周围加上引号。）*但是，由于您的 href 属性有一个查询字符串，因此 href 值不以`/ShoppingCart.asp`. 但是它确实具有该值，因此您可以使用[以选择器开头的属性](http://api.jquery.com/attribute-starts-with-selector/)。

```
$(".addtocart_vak a[href^='/ShoppingCart.asp']") 
```

**更新：**

显示的错误与 jQuery 或您的选择器无关，但它可能会中断脚本的执行，因此您的 jQuery 代码不会运行。您对可能导致该异常的原因有任何想法吗？如果你解决了这个问题，你的 jQuery 代码可能也会运行良好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T11:05:41.470

```
$('.addtocart_vak a').addClass("anchor"); 
```

或者你想要直接孩子的规格

```
$('.addtocart_vak > a').addClass("anchor"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T11:06:59.287

您可以将 id 添加到您的锚点并通过 id 找到它，或者只使用

```
$('.addtocart_vak a').addClass("anchor"); 
```

# android - Android NFC 在 4.0.3 上的 API 仍然很弱

> ID：11720184
> 
> 赞同：0
> 
> 时间：2012-07-30T11:04:36.033
> 
> 标签：android, nfc, ndef, android-beam

我发现了 Android NFC 的许多弱点：

```
 ndef.connect() 
```

不适用于 NFC 手机本身，仅适用于标签。当其他手机靠近背面时，无法检查连接状态。

NDEF 不能以两种方式交互发送/接收。在设备上，点击屏幕发起消息发送，然后断开连接，无法立即取回数据。

NFC api 不支持卡片模式。这就是弱点。有很多情况需要手机充当 RFID 卡。其中，有时不需要安全元件。一旦 UID 可用，服务器端就可以进行身份​​验证和其他操作。

我在问如何在 NDEF 消息发送或接收完成后检查连接状态？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T22:27:30.337

当通过 Android Beam 完成 NDEF 推送时，您可以注册应用程序的活动以接收回调[`NfcAdapter.setOnNdefPushCompleteCallback()`](http://developer.android.com/reference/android/nfc/NfcAdapter.html#setOnNdefPushCompleteCallback%28android.nfc.NfcAdapter.OnNdefPushCompleteCallback,%20android.app.Activity,%20android.app.Activity...%29)。

# internet-explorer-7 - Prime Faces IE7 Z-index 问题

> ID：11720186
> 
> 赞同：0
> 
> 时间：2012-07-30T11:04:47.467
> 
> 标签：internet-explorer-7, primefaces

我在 Prime Faces 论坛上对我关于 IE7 的问题没有任何兴趣，希望这里的人能够提供帮助。

基本上有两个问题：

1.  显示在网站徽标顶部的模式弹出窗口的 IE7 Z-index 问题。（徽标具有绝对位置，使其位于设计之上）
2.  模态窗口没有打开到正确的大小，它在 IE8 中更小，更大。

这里的问题是我无法完全控制该站点。我基本上是在尝试让开发人员工具栏中的东西正常工作，然后将更改发送回开发人员。

这是一个视频，显示了上述两个问题。

[http://screencast.com/t/aW1ecqIuNi](http://screencast.com/t/aW1ecqIuNi)

非常感谢

# python - urllib2：HTTP 错误 415：不支持的媒体类型：Google App Engine Python、XML

> ID：11720188
> 
> 赞同：0
> 
> 时间：2012-07-30T11:04:50.753
> 
> 标签：python, xml, google-app-engine, urllib2

伙计们，我对以下代码有疑问，

```
import urllib2

url = 'http://192.0.0.1.1/GVSignOn/ExecutePortType?WSDL'
data = '''
    <?xml version="1.0" encoding="UTF-8"?>
    <gv:SignOnReq xmlns:gv="http://abc.com/gv" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <gv:TerminalId>1</gv:TerminalId>
    <gv:StoreCode>1234</gv:StoreCode>
    <gv:TimeStamp>01-01-2011 01:01:00</gv:TimeStamp>
    </gv:SignOnReq>

    '''
req = urllib2.Request(url)
req.add_header('Content-Type', 'application/xml; charset=utf-8')
req.add_header('Content-Length', len(data))
response = urllib2.urlopen(req, data) ## Here it raising an error 
                                      ## 'HTTP Error 415: Unsupported Media Type' 
```

注意：m 在这里使用 python2.5 & Google app engine sdk 1.6.1v

请帮助我获得回复..

此致..

尼克斯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-06T03:45:43.437

正如@Blacknight 所发布的，内容类型必须是“text/xml”。

# javascript - 在 getJSON 之后构造 HTML 在 Safari 中有效，但在 Chrome 或 Firefox 中无效

> ID：11720189
> 
> 赞同：3
> 
> 时间：2012-07-30T11:04:53.953
> 
> 标签：javascript, jquery

嗨，我实际上是使用 javascript 和 html/css 的新手。

我不明白为什么我的脚本适用于 safari，但不适用于 chrome 和 firefox ......有什么想法吗？

编辑：在 chrome 和 firefox 中，ul 和 li 元素都不会显示......而且之前的警报也不起作用。我将在控制台中检查错误并再次编辑帖子

```
<!DOCTYPE html>
<html>
    <head>
        <script src="http://code.jquery.com/jquery-latest.js"></script>
    </head>
    <body>
        <div id="patients" style="text-align:center">

        </div>
        <script type="text/javascript">
            $.getJSON("http://www.url.com/json",
                      function(data) {

                      var items = [];
                      alert(data[1].patient);
                      alert(data[1].hr);

                      $.each(data, function(index, val) {
                             items.push('<li id="' + index + '">' + val.patient + '<div style="display: none" id="'+val.patient+'"></div></li>');
                             });

                      $('<ul/>', {
                        'class': 'my-new-list',
                        html: items.join('')
                        }).appendTo('#patients');

                      });
            </script>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T11:15:42.600

The first thing you have to understand is when javascript executes on the page.

So in the code you have posted, the browser first loads the jquery library. When it encounters your `<script>` tag, it then attempts to execute the `$.getJSON()` function.

In your script, on the successful completion of the json request, its attempting to modify the DOM by adding generated html to `#patients`. This won't work 100% of the time because you can't guarantee the browser has rendered #patients yet.

You should start by wrapping your javascript code inside a wrapper that only executes after page load.

This can be done in a few ways. These are the jQuery specific methods here, since that's what you're using.

```
$(document).ready(function(){
    //your code
}); 
```

Or:

```
$(function(){
    //your code
}); 
```

The native javascript code would look something like:

```
document.addEventListener('load', function(){
    //your code
}, false); 
```

I would recommend using one of the jQuery methods.

As an added tip, you don't need to put `type="text/javascript"` in your script tag. All browsers understand that a script tag means javascript. Luckily we are well past the old days of various broken versions of Internet Explorer.

# nginx - 使用 Nginx 和 UWSGI 为多个 Django 站点提供服务

> ID：11720190
> 
> 赞同：5
> 
> 时间：2012-07-30T11:05:00.100
> 
> 标签：nginx, uwsgi

我正在尝试使用 Nginx 为两个 Django 站点提供服务。

我可以提供任何一个都没有问题，但是如果我同时激活这两个，它会将两个 url 发送到一个站点。这是我第一次使用 Nginx，我通常使用 Apache，所以请多多包涵。

我在启用的站点中有两个站点，如下所示：

网站 1.com：

```
server{
    server_name www.site1.com;
    listen 69.164.211.85:80;
    access_log /var/www/site1.env/logs/access.log;
    error_log /var/www/site1.env/logs/error.log;

    location /static/ {
            # Point this wherever the static files for your django app are $
            autoindex on;
            alias /var/www/site1.env/Site1/static/;
    }

    location / {
        uwsgi_pass    127.0.0.1:3031;
        include       uwsgi_params;
        uwsgi_param   UWSGI_APPID site1;
        uwsgi_param UWSGI-FILE /var/www/site1.env/Site1/wsgi/site1_wsgi.py;
     }
} 
```

网站2.net

```
server{
        server_name www.site2.net;
        listen 69.164.211.85:80;
        access_log /var/www/site2.env/logs/access.log;
        error_log /var/www/site2.env/logs/error.log;

        location /static/ {
                # Point this wherever the static files for your django app are $
                autoindex on;
                alias /var/www/site2.env/Site2/static/;
        }

        location / {
            uwsgi_pass    127.0.0.1:3032;
            include       uwsgi_params;
            uwsgi_param   UWSGI_APPID site2;
            uwsgi_param UWSGI-FILE /var/www/site2.env/Site2/wsgi/site2.py;
         }

} 
```

我还运行了两个 UWSGI 实例，它们开始使用此脚本：

站点 1：

```
description "uWSGI server"

start on runlevel [2345]
stop on runlevel [!2345]

respawn
exec /usr/local/bin/uwsgi \
--home /var/www/site1.env/Site1/ \
--socket 127.0.0.1:3031 \
--chmod-socket \
--module site1_wsgi \
--pythonpath /var/www/site1.env/Site1/wsgi \
-H /var/www/site1.env 
```

站点 2：

```
description "uWSGI server"

start on runlevel [2345]
stop on runlevel [!2345]

respawn
exec /usr/local/bin/uwsgi \
--home /var/www/site2.env/Site2/ \
--socket 127.0.0.1:3032 \
--chmod-socket \
--module site2 \
--pythonpath /var/www/site2.env/Site2/wsgi \
-H /var/www/sit2.env 
```

这是我的 nginx.conf 文件的样子：

```
user www-data;
worker_processes 4;
pid /var/run/nginx.pid;

events {
        worker_connections 768;
        # multi_accept on;
}

http {

    ##
    # Basic Settings
    ##

    sendfile on;
    tcp_nopush on;
    tcp_nodelay on;
    keepalive_timeout 65;
    types_hash_max_size 2048;
    # server_tokens off;

    # server_names_hash_bucket_size 64;
    # server_name_in_redirect off;

    include /etc/nginx/mime.types;
    default_type application/octet-stream;

   ##
    # Logging Settings
    ##

    access_log /var/log/nginx/access.log;
    error_log /var/log/nginx/error.log;

    ##
    # Gzip Settings
    ##

    gzip on;
    gzip_disable "msie6";

    # gzip_vary on;
    # gzip_proxied any;
    # gzip_comp_level 6;
    # gzip_buffers 16 8k;
    # gzip_http_version 1.1;
    # gzip_types text/plain text/css application/json application/x-javascript text/xml application/xml application/$

    ##
    # Virtual Host Configs
    ##

    include /etc/nginx/conf.d/*.conf;
    include /etc/nginx/sites-enabled/*;
}

   ##
# Logging Settings
    ##
    access_log /var/log/nginx/access.log;
    error_log /var/log/nginx/error.log;

    ##
    # Gzip Settings
    ##

    gzip on;
    gzip_disable "msie6";

    # gzip_vary on;
    # gzip_proxied any;
    # gzip_comp_level 6;
    # gzip_buffers 16 8k;
    # gzip_http_version 1.1;
    # gzip_types text/plain text/css application/json application/x-javascript text/xml application/xml application/$

    ##
    # Virtual Host Configs
    ##

    include /etc/nginx/conf.d/*.conf;
    include /etc/nginx/sites-enabled/*;
} 
```

我原以为将 uwsgi_pass 设置为不同的端口会阻止它们进入同一个端口，但显然我错过了其他东西。我会很感激任何帮助，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T12:45:40.170

啊，可能是因为我没有包含没有www的服务器名称。当我这样做时，它似乎起作用了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T11:44:15.703

nginx 配置对我来说似乎很好。我用相同的代码进行了测试（两个不同的站点指向不同的端口），并在端口上启动了一个侦听器 - 每个站点都转到指定的端口。

我对 uwsgi 配置有一些疑问，尤其是环境/路径设置。尝试以下操作 - 创建一个`uwsgi1.conf`文件，然后将以下内容粘贴到那里：

```
[uwsgi]
socket = 127.0.0.1:3031
master = true
processes = 8
env = DJANGO_SETTINGS_MODULE=site1.settings
chdir = /var/www/site1.env/Site1/
pythonpath = /var/www/site1.env/
module = django.core.handlers.wsgi:WSGIHandler()
-H /var/www/site1.env 
```

第二个`uwsgi2.conf`包含以下内容：

```
[uwsgi]
socket = 127.0.0.1:3032
master = true
processes = 8
env = DJANGO_SETTINGS_MODULE=site2.settings
chdir = /var/www/site2.env/Site2/
pythonpath = /var/www/site2.env/
module = django.core.handlers.wsgi:WSGIHandler()
-H /var/www/site2.env 
```

并根据需要更改 env/、chdir、pythonpath 的值。然后将站点启动为：

```
respawn
exec /usr/local/bin/uwsgi --ini /path/to/uwsgi1.conf 
```

`uwsgi2.conf`第二个。

# jquery - 在 mvc4 中显示下拉列表的选定索引更改的弹出窗口

> ID：11720192
> 
> 赞同：0
> 
> 时间：2012-07-30T11:05:10.387
> 
> 标签：jquery, asp.net-mvc-4

我需要在下拉列表的选定索引更改上显示一个弹出窗口。弹出窗口应包含 3 个按钮，即是、否和取消。在弹出窗口中单击是/否按钮时，我需要根据下拉列表中的选定项目进行一些数据库更改，然后单击取消按钮，弹出窗口应该消失。请帮我。我的观点如下：

```
@model FND.Models.ViewLender

    @{
        ViewBag.Title = "Change Lender";
     }

    @using (Html.BeginForm())
    {
        @Html.Label("Change Lender : ")
        @Html.DropDownList("Ddl_Lender", Model.ShowLenderTypes, new { id = "lenderType" })
        @Html.DisplayFor(model => model.Description)
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T08:27:52.283

您将需要一个绑定到下拉列表中所选索引更改的函数，其内容将类似于以下内容：

```
 private void Ddl_Lender_SelectedIndexChanged(object sender, EventArgs e)
    {
        DialogResult dialogResult = MessageBox.Show("Sure", "Some Title", MessageBoxButtons.YesNoCancel);

        if(dialogResult == DialogResult.Yes)
        {
            //do something
        }
        else if (dialogResult == DialogResult.No)
        {
             //do something else
        }
        else if (dialogResult == DialogResult.Cancel)
        {
             //do something else
        }

    } 
```

您也可以将 if 语句换成 switch，但这应该可以满足您的所有需求。

希望这可以帮助。

**编辑** 只记得这是 MVC 而不是 Windows 应用程序，所以上面的方法不起作用，但你可以使用一些逻辑。

# android - invalidate() 不记得 OnDraw 方法

> ID：11720199
> 
> 赞同：0
> 
> 时间：2012-07-30T11:05:33.600
> 
> 标签：android, ondraw, invalidation

`invalidate()`不记得我的`OnDraw()`方法。我`invalidate()`在同一个类中的 setter 方法中使用`OnDraw()`。

```
public class PuzzleDraw extends View {

    // defining some variables //

    protected void onDraw(Canvas canvas) {
        super.onDraw(canvas);
        // codes for painting puzzle //
    }

    public PuzzleDraw(Context context) {
        super(context);
    }

    // Method for giving cursor X/Y from MainActivity OnTouch() method and using it in OnDraw() method in some part of painting code //

    public void setCursor(int i, int j) {
        this.xx = i;
        this.yy = j;
        invalidate();
    } 
```

当我调试我的代码时，一切都很好，除了执行`OnDraw()`时`invalidate()`调用......事实上，`invalidate()`对我没有任何帮助！怎么了？我也使用了`postInvalidate()`, `this.invalidate()`，`this.postInvalidate()`但没有任何改变。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T11:18:33.213

调用`invalidate()`不会`onDraw`直接执行，它只会在类中设置适当的标志`View`。`onDraw`下次遍历视图层次结构时，框架将调用您的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-08T05:09:48.007

您可能会通过从活动中调用 setCursor(float, float) 方法仅调用一次，但如果您希望框架本身在内部调用 onDraw 方法，则必须一次又一次地调用 invalidate 方法。

希望这会奏效

# iphone - Cocos2d/Cocos2d-x 视网膜问题

> ID：11720202
> 
> 赞同：2
> 
> 时间：2012-07-30T11:05:40.503
> 
> 标签：iphone, cocos2d-iphone, resolution, cocos2d-x, retina-display

我有一个用 Cocos2d-x 编写的多平台 iOS/Android 游戏。我只有一组图像可供使用（我只在高分辨率设备之后）根据设备的分辨率进行缩放。例如，所有图像都适用于 iPad，但如果您使用的是 Galaxy S，则图像位置和缩放受 GalaxyS_screenWidth/iPadscreenWidth 的影响。

这适用于所有 Android 设备以及 iPad、iPad2 和旧 iPhone，但使用 Retina iPhone 时会出现问题。在 iPhone 4 上，我所有的图像看起来都非常像素化，这是因为图像被缩放到 iPhone 非视网膜分辨率，然后再放大以填满屏幕。

我尝试启用 Retina 模式，图像是预期大小的一半（可能是由于使用了使用点的 get winsize()），手动缩放会导致其他类型的问题。我尝试了很多选项和属性但无济于事，那我现在该怎么办？

编辑：这不仅仅是一个图形问题，因为文本会自动缩小然后放大并出现像素化。

编辑 2：字体是位图，所以我很糟糕。但我不想使用视网膜，因为默认情况下所有图像都已经是视网膜。我所有的图像都是为 iPad 设置的，所以对于 iPhone 4，我只是将它们缩小一点。这适用于安卓手机。

例如，我有一个图像，取决于通过以下方式获得的屏幕分辨率`getwinsize()`：

如果当前分辨率宽度为 1024，则图像保持不变。如果当前分辨率宽度为 900，则图像将缩放 900/1024，没问题。如果设备是 iPhone 4 分辨率宽度是 480，所以图像被缩放 480/1024，然后 cocos2d-x 自动将生成的图像缩放 2 从而像素化。我尝试使用`getwinsizeinpixels`，我尝试增加屏幕大小，我尝试了很多东西，但没有任何开箱即用的方法，除非我要重做我的许多代码。

那么问题来了，我怎么能让该死的引擎把 iPhone 4 当作一部分辨率为 960x640 的 Android 手机呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T11:20:36.917

如果您希望 Retina 分辨率图像看起来像 Retina 分辨率图像，那么这些图像需要采用 Retina 分辨率 (960x480)。

如果您先将图像缩小到 480x320，然后在设备上将其放大，它当然会显得模糊。您无法通过放大来神奇地使 Retina 像素从较低分辨率的图像中出现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-31T06:36:15.290

SI 无法深入了解它，所以我使用了一个 hack。我启用了 Retina Display，然后我通过代码将除文本之外的所有内容都缩放了 x2。听起来很愚蠢，但它奏效了，像素化消失了。感谢所有花时间帮助我的人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T11:18:59.733

> 我尝试启用 Retina 模式，图像是预期大小的一半

当您启用视网膜支持时，cocos2d 通过将@“-hd”附加到它们提供的文件名来获取图像。这样的图像意味着“视觉”大小的两倍（在 iOS 术语中，像素与点），以便它们可以按比例缩小以充分利用设备分辨率。

如果您查看 CCDirectorIOS 类，您会发现有几个方法可以处理这个问题，尤其是那些处理 scalingFactor 的方法。我不知道你应该做什么样的改变才能让它工作，但是如果你进入这些方法并查看各种对象的值，你可能会找到一种方法来修改 cocos2D 的默认行为以适应你的具体情况。

如果这看起来很复杂，您可以尝试的一件事是更改，`CC_RETINA_DISPLAY_FILENAME_SUFFIX`以便 cocos2d 不会为视网膜 iPhone 查找特别命名的文件，而只使用普通文件。

> 例如，所有图像都适用于 iPad，但如果您使用的是 Galaxy S，则图像位置和缩放受 GalaxyS_screenWidth/iPadscreenWidth 的影响。

您可能会尝试的另一件事是不使用`winSize`, 但是`winSizeInPixels`，因此当您缩小时，您会将其缩小到点分辨率，而只是到像素分辨率（这是点分辨率的两倍）。

希望这可以帮助。

# c++ - VS 2012 template errors

> ID：11720211
> 
> 赞同：1
> 
> 时间：2012-07-30T11:05:53.330
> 
> 标签：c++, string, templates, marshalling, visual-studio-2012

I've been using [this code](http://blog.nuclex-games.com/mono-dotnet/cxx-cli-string-marshaling/) to marshal strings in C++/CLI for a while now. Recently I've updated to VS 2012 RC to try it out. I really liked the simple design, but none of my projects containing clix.h could be compiled. It worked great in 2010... What could be the problem? Thank you for your answers!

Here is compiler output:

1.  Warning C4346: 'clix::detail::IsManagedString::Result'dependent name is not a type.
2.  Error C2988: unrecognizable template declaration/definition
3.  Error C2059: syntax error : '<'
4.  Error C2039: 'Result' : is not a member of '`global namespace''
5.  Error C2143: syntax error : missing ';' before '}'

The code block errors are in:

```
typename detail::Select<detail::IsManagedString<SourceType>::Result>::Type<
typename detail::StringTypeSelecter<encoding>::Type,
System::String ^>::Result marshalString(SourceType string) {
// Pass on the call to our nifty template routines
return detail::StringMarshaler<
  detail::IsManagedString<SourceType>::Result ? detail::CxxFromNet : detail::NetFromCxx
>::marshal<encoding, SourceType>(string);
} 
```

An example, source file:

```
#include "clix.h"
int main()
{
} 
```

Clix header file can be found on this [link](http://blog.nuclex-games.com/mono-dotnet/cxx-cli-string-marshaling/).

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T15:37:53.843

You could have just posted the issue on my blog, it's not abandoned or anything :)

I happen to have Visual Studio 2012 RC installed and fixed the issue. You can find a new version of the clix header at the location you linked.

Background: it appears Microsofts new compiler is a bit picky regarding typedefs in nested templates whose parent templates are specialized on integer types. In any case, I found a method that works in both Visual C++ 2010 and Visual C++ 2012 RC.

# java - Java 继承：被覆盖或隐藏的方法

> ID：11720216
> 
> 赞同：2
> 
> 时间：2012-07-30T11:06:11.127
> 
> 标签：java, inheritance, overwrite

当一个类扩展另一个类时，它会继承超类的所有方法和变量。如果您在具有相同签名的子类中以不同方式定义方法和变量，则可以在子类中以不同方式使用。现在 Oracle 区分了覆盖和隐藏 (http://docs.oracle.com/javase/tutorial/java/IandI/override.html)。它说实例方法覆盖其超类的方法，而类方法隐藏它。“隐藏和覆盖之间的区别具有重要意义。被调用的覆盖方法的版本是子类中的版本。被调用的隐藏方法的版本取决于它是从超类调用还是从子类调用。”

假设我有 2 门课 Yes 和 Maybe。Yes 扩展了 Maybe。也许有字符串 a。

```
class Maybe {
    String a;
    public static void printOut() {
        System.out.println("Maybe");
    }
    public void printAndSet() {
        a = "Maybe";
        System.out.println(a);
    }

}
class Yes extends Maybe {
    public static void printOut() {
        System.out.println("Yes");
    }
    pubilc void printAndSet() {
         a = "Yes";
    }
}
class Print{
    public static void mail(String[] args) {
        Maybe m = new Maybe();
        Yes y = new Yes();
        Maybe.printOut();
        Yes.printOut();
        m.printAndSet();
        y.printAndSet();
} 
```

我说：它会打印出来，也许是的，也许是的

但是在我阅读了 Oracle 文章后，我认为它必须打印出来：

```
yes
yes
maybe
yes 
```

因为实例方法覆盖了它的超类方法。

我很确定我的输出是正确的，但我也确信，Oracle 知道得更好，所以我想我只是不理解这篇文章。当我从超类的对象调用实例方法时，它使用被覆盖的方法是不可能的。所以我不明白为什么要区分覆盖和隐藏！有人可以帮忙吗？

编辑; 插入代码而不是描述类！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T11:13:18.063

静态方法根本不能被覆盖。它们不是多态调用的，因为它们不作用于类的实例，而是作用于类本身。

如果调用`Maybe.printOut()`，它会调用中定义的静态`printOut()`方法`Maybe`。`printOut()`中还定义了一个方法这一事实`Yes`是无关紧要的：这两个方法除了它们的名称之外没有任何共同之处。

请注意，您可以通过简单地编写程序并执行它来确认或证实您的疑问。

隐藏方法的问题仅在您开始在对象实例上调用静态方法时出现。这是非常糟糕的做法，永远不应该这样做。如果您不遵守此规则，并且有以下情况：

```
Maybe m = new Maybe();
Maybe y = new Yes();

m.printOut(); // DON'T DO THAT: it should be Maybe.printOut();
y.printOut(); // DON'T DO THAT: it should be Maybe.printOut() or Yes.printOut(); 
```

结果将是`maybe maybe`，因为在静态方法的情况下，重要的**不是**对象的具体类型（`Maybe`和`Yes`），而是它们**声明**的类型（`Maybe`和`Maybe`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T11:25:31.180

```
public class Parent {

    public String test(){
        return "p";
    }

    public static String testStatic(){
        return "sp";
    }
}

public class Child extends Parent {

    public String test(){
        return "c";
    }

    public static String testStatic(){
        return "sc";
    }
}

public class Demo{

    public static void main(String[] args) {

        Parent p =new Parent();
        Child c = new Child();
        Parent pc = new Child();

        System.out.println(p.test());
        System.out.println(c.test());
        System.out.println(pc.test());

            //Although this is not the correct way of calling static methods
        System.out.println(p.testStatic());
        System.out.println(c.testStatic());
        System.out.println(pc.testStatic());
    }
} 
```

输出将是：-（静态方法与实例方法）

p c c sp sc sp

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T11:19:09.197

根据您的示例，以以下示例为例：

```
public class SO11720216 {
    static class Maybe {
        public static void hidden() { System.out.println("static maybe"); }
        public void overwritten() { System.out.println("instance maybe"); }
        public void inherited() { hidden(); }
        public void called() { overwritten(); inherited(); }
    }
    static class Yes extends Maybe {
        public static void hidden() { System.out.println("static yes"); }
        public void overwritten() { System.out.println("instance yes"); }
    }
    public static void main(String[] args) {
        Maybe m = new Maybe();
        Yes y = new Yes();

        m.called(); /* prints:
                       instance maybe
                       static maybe
                    */

        y.called(); /* prints:
                       instance yes
                       static maybe
                    */
        Yes.hidden(); /* prints: static yes */
        y.hidden(); /* bad style! prints: static yes */
    }
} 
```

调用`overwritten`将被每个派生类覆盖。所以每个方法都会使用属于当前对象的实现。另一方面，调用`hidden`将始终使用定义类的实现。因此`Maybe.called`会一直打电话`Maybe.hidden`，而且永远不会`Yes.hidden`。要调用`Yes.hidden`，您必须在 中的方法内`Yes`或使用限定名称来调用。

换个说法：

*   **覆盖**方法意味着每当在派生类的对象上调用该方法时，都会调用新*的*实现。
*   **隐藏**方法意味着在此类的范围内（即在其任何方法的主体中，或者在使用此类的名称进行限定时）对该名称的非限定调用（如我上面示例`hidden()`中的方法中的调用） `inherited()`) 现在将调用一个完全不同的函数，需要一个资格才能从父类访问同名的静态方法。

也许您的困惑来自于您假设*覆盖*会影响对该方法的所有调用，即使对于基类的对象也是如此。

# javascript - I want to read an html tag which has formatted text. using javascript

> ID：11720221
> 
> 赞同：2
> 
> 时间：2012-07-30T11:06:42.113
> 
> 标签：javascript, dom

I want to read an html tag which has formatted text. For example

`<p id="strike" onMouseOver="getP()><b>Hello</b></p>` // paragraph Tag with formatted text

if i am calling a function,

```
 function getP()
 {  
       var val=document.getElementById('strike').value; 
    alert(val);
 } 
```

am getting undefined in alert, how to get the exact bold formatted text or bold tag with text....Please help me out in this

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T11:07:44.123

```
var val=document.getElementById('strike').innerHTML; 
    alert(val); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T11:08:58.683

Use `alert(document.getElementById('strike').innerHTML);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T11:09:30.267

I'd suggest using:

```
function getP() {  
   var el = document.getElementById('strike').getElementsByTagName('b')[0],
       text = el.textContent ? el.textContent : el.innerText;
   alert(text);
} 
```

[JS Fiddle demo](http://jsfiddle.net/davidThomas/8aqcR/1/).

Updated the above, and generalised some:

```
<script type="text/javascript">
function getP(el,tagtype) {
    if (!el || !tagtype) {
        return false;
    }
    else {
        var textFrom = el
    .getElementsByTagName(tagtype)[0],
            text = textFrom.textContent ? textFrom.textContent : textFrom.innerText;
   console.log(text);
    }
}
</script>

<p id="strike" onMouseOver="getP(this, 'b')"><b>Hello</b></p>​ 
```

[JS Fiddle demo](http://jsfiddle.net/davidThomas/8aqcR/2/).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T11:11:36.537

`p` does not have `value` property. You need to get the first childNode which is `b`, and access the `innerHTML` property.

```
 var val=document.getElementById('strike').childNodes[0].innerHTML; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-31T07:10:18.310

```
var val=document.getElementById('strike').innerHTML; 
```

# orm - CFWheels - 如何增加数据库列中的数字？

> ID：11720232
> 
> 赞同：1
> 
> 时间：2012-07-30T11:07:30.747
> 
> 标签：orm, coldfusion, railo, cfwheels

只是想知道，使用 CFWheels ORM，我如何在列中增加一个数字？

在直接的 SQL 中，我会执行以下操作：

```
UPDATE table 
SET field = field + 1 
WHERE ... 
```

我想避免从列中“获取”值并手动增加它。我将在我的应用程序中做很多这样的事情，所以这是我可以做到的开销（另外我还想让我的代码保持简单和优雅）。

像这样的东西可以吗？

```
<cfset post = model("post").findByKey(99) />
<cfset post.update( myColumn = myColumn + 1 ) /> 
```

感谢一些输入。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T14:30:03.063

cfwheels 中的 orm 不支持这一点。对于像直接 sql 这样的东西是要走的路。最好的办法是在您的模型上创建一个自定义方法来封装逻辑。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T15:21:25.887

`Model.cfc`如果您需要重复很多，您可以在基础中抽象它：

```
<cfcomponent extends="Wheels">
    <cffunction name="incrementColumn" returntype="boolean">
        <cfargument name="key" type="string" required="true">
        <cfargument name="property" type="string" required="true">

        <cfset local.record = this.findByKey(arguments.key)>
        <cfset local.record[arguments.property]++>

        <cfreturn local.record.update()>
    </cffunction>
</cfcomponent> 
```

然后你可以像这样从你的控制器调用它：

```
<cfif post = model("post").incrementColumn(params.key, "myColumn")>
    Success
<cfelse>
    Error
</cfif> 
```

# magento - Magento 1.7：在 PayPal Express Review 中默认禁用“下订单”

> ID：11720234
> 
> 赞同：5
> 
> 时间：2012-07-30T11:07:37.360
> 
> 标签：magento, paypal

从 Magento 1.7.0.1 开始，默认禁用 PayPal Express 评论页面上的“下订单”按钮。当用户勾选两个复选框时，它保持禁用状态。用户需要勾选复选框 *并*单击“更新订单数据”。网站重新加载后，“Place Order”/“Kaufen”被启用。

如何修复此错误？它也存在于 1.7.0.2 中。

![禁用流程订单按钮](../Images/966d215339fab55890dc991d6e4c09c4.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-10T16:22:04.250

对我来说，这更像是一个错误或意外行为，因为协议复选框与客户地址无关，并且与 PayPal express 没有任何业务:)

我找到了一个对我有用的解决方法，但我不能说它是最佳开发实践的一个例子。

**问题的简短解释**：问题来自这样一个事实，即在 PayPal Express 评论页面上，我们有 JavaScript 函数，这些函数会在所有表单元素更改时激活事件处理程序。此事件处理程序禁用“下订单”按钮。如果我们更改与客户地址相关的元素，这应该以这种方式工作......当然，协议复选框与客户地址无关，而且似乎 Magento 的人错过了，那一刻:)

**这是解决方案**：

1.  查找文件“template/paypal/review.phtml” ...如果您的主题中没有此文件，只需从基本主题中复制它即可
2.  添加在 //Workaround 之后添加代码行以取消绑定文件底部协议复选框的事件侦听器。从这里获取代码：[https ://gist.github.com/4503260](https://gist.github.com/4503260)

基本上，这会重新创建协议复选框，并且作为副作用的新复选框，没有事件侦听器，会禁用下订单按钮。

希望，它有帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T17:16:28.460

仅供参考，我不知道这是否有帮助，但 MageWorld 的 One Step Checkout Pro 扩展可能在他们的最新版本中修复了这个问题......

> v1.4.2.2
> 
> *修复了后端的“销售订单网格”和订单详细信息。
> *修复了IE上的“下单按钮被禁用”。

虽然我没有测试过，所以不能确定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T19:58:16.300

我认为这不是错误，这是一个功能。当客户更改任何数据（例如运输方式）时，价格也可以更改。并且要更新评论表，客户应按更新订单按钮。如果他同意价格，他将按下下订单按钮。其他技术是 AJAX 请求来验证数据和计算价格。但是您将收到来自一位客户的大量请求，并且客户每次更改数据时都会等待。

# ios - ipad 每次从主屏幕启动 sencha touch 2 Web 应用程序从头重新加载应用程序

> ID：11720240
> 
> 赞同：0
> 
> 时间：2012-07-30T11:07:57.247
> 
> 标签：ios, ipad, sencha-touch, sencha-touch-2

我有一个基于**sencha touch 2 框架**的 Web 应用程序。只需在 iPad 中添加主屏幕快捷方式**并**在每次应用程序***从头重新启动***时打开应用程序，iPad 并没有保存当前页面的状态。

我的应用程序的缓存大小约为 2MB。

我可以像**Safari 一样保存我的应用程序的状态吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T06:53:00.717

要离线，您应该配置应用缓存清单并指定在线或离线可用的资源。

阅读以下 [http://www.sencha.com/learn/taking-sencha-touch-apps-offline/](http://www.sencha.com/learn/taking-sencha-touch-apps-offline/) http://www.w3schools.com/html5/att_html_manifest.asp

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T02:09:29.310

尝试为您的控制器操作配置路由。这样，当您切换回来时，状态会通过 url 保持不变。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-30T11:45:29.837

尝试使用 cordova（以前称为 phonegap）包将 Web 应用程序包装到本机应用程序。

# orchardcms - Orchard：在内容创建时创建一个层

> ID：11720241
> 
> 赞同：0
> 
> 时间：2012-07-30T11:07:58.073
> 
> 标签：orchardcms

在我的 Orchard 网站中，我想快速创建博客，并且我希望能够为每个博客添加一个博客存档小部件到他们的页面。

为了实现这一点，我必须为每个博客创建一个新的 Windget 层。是否可以在不创建自定义模块的情况下使此过程自动化？我想我可以创建一个响应博客创建事件的规则，但是我可以让它为我执行一个脚本吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T17:47:43.340

您将不得不创建一个模块，但有几种方法可以实现它。您的规则想法很有趣，因为一旦您构建了它，它就可以应用于任何内容项。它应该很容易构建：您只需要创建一个自定义的“创建层”规则操作。您可以查看现有规则操作作为起点。

# azure - Microsoft Azure 上的异地冗余存储如何收费？

> ID：11720243
> 
> 赞同：4
> 
> 时间：2012-07-30T11:08:06.153
> 
> 标签：azure, azure-storage

所以我一直在使用 azure 3 个月的试用版来测试我是否想使用 Microsoft Azure 来托管我正在从事的项目，但是我一直很困惑，因为我已经用完了“地理冗余存储”一开始月，我真的不明白为什么。

我读过这个：[https](https://www.windowsazure.com/en-us/pricing/details/) ://www.windowsazure.com/en-us/pricing/details/我唯一能做的就是平均一个月使用多少存储空间，例如，只要我使用的平均存储空间少于 35gb（限制为 35gb），我就很清楚。

因此，在我的 Azure 订阅“存储（GB/月）-GEO REDUNDANT”下，它显示“35 GB/月的 101.027%”（所以我已经达到了上限）。

但我不明白为什么会发生这种情况，我所拥有的只是一个带有 nodejs Web 应用程序和一个 redis 数据库（目前几乎是空的）的简单服务器，所有这些都运行在一个 ubuntu VM 上，而且我可以' t 现在登录并检查存储，因为它已被禁用，但我很确定它***甚至没有接近***35gb 的总存储空间，而且从来没有？

我希望有人可以解释天蓝色存储是如何收费的，或者我是否错过了一些愚蠢的事情？

**编辑：**我突然想到它可能是 redis，用 IO 做疯狂的事情？不确定这是否可能，但如果是，我会更好地使用本地冗余存储并支付本地冗余存储交易吗？

**编辑 2：**在我的图表上显示我一直在使用 1.96gb / 天。所以这意味着它不是每月的总硬盘空间，是硬盘空间/天吗？（使用 2gb 的数据可能听起来与所包含的操作系统差不多，如果是这种情况，这意味着它们在试用时给你的空间少于 2gb，似乎很微小？？）

![Azure 磁盘使用情况图表](../Images/a1e0eabe9ab5c7d074dbb82fe8113c41.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T18:56:25.970

这是由于地理冗余存储的限制而导致的，我遇到了同样的问题来解决这个问题，只需从 Windows Azure 预览门户禁用地理冗余存储。

1.  打开 Windows Azure 预览门户。
2.  选择左侧存储。
3.  选择您的存储。
4.  单击顶部的配置。
5.  关闭异地复制。

我希望这将有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T11:17:58.933

这可能是由您的 Ubuntum 虚拟机的映像引起的。如果您阅读定价详细信息（问题中的链接），您会看到：

> 计算时间不包括与在 Windows Azure 虚拟机中运行的映像相关的任何 Windows Azure 存储成本。这些费用单独计费。

您创建的 VM 有多大？

# php - 在多维数组中搜索对象

> ID：11720244
> 
> 赞同：0
> 
> 时间：2012-07-30T11:08:07.913
> 
> 标签：php, arrays, object, recursion, multidimensional-array

我在 PHP 中有一个多维数组，希望能够搜索它并找到所有对象值。

我想这样做的原因是，当找到一个对象时，我可以通过调用其上的方法将其替换为数组`output()`。该`output()`方法用于`get_object_vars()`将自身变成一个数组，然后返回该数组。

这是一个手动实现我想要的示例（但只有 2 个深度级别）：

```
// First level search...
foreach($array as $k => $v) {

    // Check if it's an array.
    if (is_array($v)) {

        // Second level search...
        foreach($v as $k2 => $v2) {

            // If it's an object - convert it!
            if (is_object($v2)) {
                $array[$k][$k2] = $array[$k][$k2]->output();
            }

        }

    }

    // If it's an object - convert it!
    if (is_object($v)) {
        $array[$k] = $array[$k]->output();
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T11:11:18.427

你只需要一个递归函数：

```
function objects_to_arrays_recursive (&$array) {
  foreach ($array as &$member) {
    if (is_object($member)) {
      $member = $member->output();
    }
    if (is_array($member)) {
      objects_to_arrays_recursive($member);
    }
  }
} 
```

这将调用`output()`每个对象的方法并将结果存储在最初保存该对象的键中。

*注意事项*：

*   一旦对象被转换，这将循环对象并转换子对象。您可能不想这样做，特别是如果您有循环引用，因为这会导致无限循环。只需将 2 `if`s更改为 s 即可避免`if / elseif`。
*   这不会检查给定对象是否有`output()`要调用的方法。您可能应该添加`is_a()`/`instanceof`检查。
*   此函数通过引用获取其参数，这意味着将修改输入数组。如果您需要保持原始数组完好无损，则需要先复制它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T11:23:55.870

蒂姆库珀的回答是错误的，因为函数必须有一个通过引用而不是值传递的参数。

```
php > class Foo { public function output() { return "this was an object"; } }
php > $a = array( 1 => array( 2 => array( 'foo', 'red', 1, new Foo() ) ) );
php > array_walk_recursive( $a, function( $item, $key ) { 
    if ( is_object( $item ) ) { 
        $item = $item->output(); 
    }
} );
php > print_r( $a );
Array
(
    [1] => Array
        (
            [2] => Array
                (
                    [0] => foo
                    [1] => red
                    [2] => 1
                    [3] => Foo Object
                        (
                        )

                )

        )

) 
```

与通过引用传递：

```
php > array_walk_recursive( $a, function( &$item, $key ) { 
    if ( is_object( $item ) ) {             
        $item = $item->output();
    } 
} );
php > print_r( $a );
Array
(
    [1] => Array
        (
            [2] => Array
                (
                    [0] => foo
                    [1] => red
                    [2] => 1
                    [3] => this was an object
                )

        )
 ) 
```

# java - 为什么要从外部资源文件中引用字符串而不是将其硬编码到您的 Android XML 布局中？

> ID：11720246
> 
> 赞同：4
> 
> 时间：2012-07-30T11:08:09.280
> 
> 标签：java, android, xml, string

我一直在 Eclipse 中收到有关在我的 Android XML 布局中硬编码字符串的警告，但我认为这比将所有内容放在字符串资源文件中并从那里引用它更有意义。无论如何，我只会将所述字符串用于该活动，并且永远不会再使用。

这种做法是否存在我忽略的危险，例如初始化错误或性能问题？为什么 Android 鼓励使用单独的资源文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T11:10:47.740

主要原因是[国际化](http://developer.android.com/guide/topics/resources/localization.html)。将字符串放入资源文件可以更轻松地为不同语言提供每个字符串的单独翻译，而无需复制布局文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T11:13:40.753

这些文件为静态应用程序范围的数据提供了一个中心位置。将这些数据与主应用程序代码分离可以被视为有利于整个应用程序结构

将字符串内容作为资源包含有很多好处，例如：

1.  它将应用程序使用的字符串集中在一个易于管理的位置（由开发人员或非开发人员）。
2.  字符串可以一次性定义为资源，并在整个代码中使用。因此，它将具有一致的拼写、大小写和标点符号。
3.  字符串可以轻松国际化，允许您的应用程序通过单个应用程序包文件 (APK) 支持多种语言。
4.  字符串不会弄乱您的应用程序代码，使其清晰且易于维护。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T11:12:33.040

将字符串与代码和资源文件分开有很多优点，通常被认为是一种好的做法。

首先，它将所有字符串保存在一个位置，因此您可以通过一种快速方法将它们保存在一个文件中。

最重要的原因是国际化。如果您的应用程序需要支持`multiple languages`，那么将您的字符串（测试、按钮标签等）分离到不同语言的不同资源文件中有助于更好地管理此过程。

有关详细信息，请参阅[http://developer.android.com/guide/topics/resources/localization.html](http://developer.android.com/guide/topics/resources/localization.html)

# php - 内部回声和回声

> ID：11720247
> 
> 赞同：0
> 
> 时间：2012-07-30T11:08:13.030
> 
> 标签：php, echo

我正在使用 echo 来总结表格中的结果。在这个回声中，我放置了另一个回声以显示另一个表格的所有结果。在此页面上，我有一个数组，我希望检查该数组中的每个项目，也就是表的结果中的项目。我使用下面的代码（请记住：此代码在另一个 echo 中！），它不起作用，为什么不呢？

```
<?php

$query = "SELECT * FROM profilestemp"; 

$result = mysql_query($query) or die(mysql_error());

while($row = mysql_fetch_array($result)){

$merkenarray = unserialize($row[merken]);

echo "

A VERY BIG OTHER PART OF THE FORM....

<tr>
<td style=\width:150px;background-color:#a8c11f;padding:2px;\"><p style=\"color:White;font-weight:bold\"><b>Merken</b></p></td>
<td><div id=\"rubrieken\">

<?php

$sql = \"SELECT merknaam FROM merken\";
$result = mysql_query($sql);

while ($row2 = mysql_fetch_array($result)) {

    if (isset($merkenarray) && is_array($merkenarray) && in_array($row2[merknaam], $merkenarray)) {

      $checked = \"checked='checked'\";
    }

    else $checked = \"\";

    echo \"&nbsp;&nbsp;<input \".$checked.\"  type=\"checkbox\" name=\"merken[]\" value='\" . $row2[merknaam] . \"'>&nbsp;\" . $row2[merknaam] . \" <Br />  \";

}

?>

</div></td>
</tr>

}

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T11:10:34.297

不要`echo`在你的函数中使用，而是让它返回要输出的字符串。一个例子：

```
function functionName() {
    return 'Some content to be output';
}

echo functionName(); 
```

此外，这将为您的函数提供更大的灵活性，因为您可能不想每次都回显结果，例如：

```
function functionName() {
    return 'Some content to be output';
}

// Write the result of functionName to a file
file_put_contents('content.txt', functionName()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T11:54:56.990

您的代码应如下所示

```
 <?php

            $query = "SELECT * FROM profilestemp"; 

            $result = mysql_query($query) or die(mysql_error());

            while($row = mysql_fetch_array($result)){

            $merkenarray = unserialize($row[merken]);

         ?>

            A VERY BIG OTHER PART OF THE FORM....

            <tr>
            <td style="width:150px;background-color:#a8c11f;padding:2px;"><p style="color:White;font-weight:bold"><b>Merken</b></p></td>
            <td><div id="rubrieken">

            <?php

            $sql = "SELECT merknaam FROM merken";
            $result = mysql_query($sql);

            while ($row2 = mysql_fetch_array($result)) {

                if (isset($merkenarray) && is_array($merkenarray) && in_array($row2[merknaam], $merkenarray)) {

                  $checked = "checked='checked'";
                }

                else $checked = "";

                echo "&nbsp;&nbsp;<input ".$checked."  type="checkbox" name="merken[]" value='" . $row2[merknaam] . "'>&nbsp;" . $row2[merknaam] . " <Br />  ";

            }

            ?>

            </div></td>
            </tr>

<?php }?> 
```

# c# - 在 C# 中将字符串与整数进行比较

> ID：11720248
> 
> 赞同：4
> 
> 时间：2012-07-30T11:08:13.887
> 
> 标签：c#, string, performance, comparison, int

我正在使用 Umbraco CMS，它将大量数据作为字符串保存。

有时我需要将存储值字符串值（这是一个存储为字符串的 int）与枚举进行比较，但最好**将它们作为字符串进行比较：**

```
if ( stringValue == ( (int) Enum.Option ).ToString() ){
} 
```

**或者解析和比较为整数：**

```
if ( int.Parse(stringValue) == (int) Enum.Option ){
} 
```

还是这两种方式都无关紧要！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T11:11:09.693

您应该比较其本机/规范形式的数据。所以使用整数。在这种情况下，性能通常是次要问题。正确性是第一位的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T11:15:43.093

也许您想尝试使用[Enum.Parse](http://msdn.microsoft.com/en-us/library/essfb559)？

```
enum MyEnum
{ 
  Option,
  Option1 = 1, 
  Option2 = 2
}

string stringValue = "0";
if((MyEnum)Enum.Parse(typeof(MyEnum), stringValue) == MyEnum.Option)
{
   //Do what you need
} 
```

* * *

笔记：

> value 参数包含枚举成员的基础值或命名常量的字符串表示形式，或由逗号 (,) 分隔的命名常量列表。

所以`stringValue`可以是*"Option"*或*"0"*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T11:15:18.250

如果您将比较枚举，那就更好了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T11:16:06.337

为了代码的可读性，我会选择第二种方法：毫无疑问，您的字符串在该特定上下文中应该包含一个整数，并且您正在这样对待它。

第二种方法还可以让您更深入地处理错误情况（如果您的字符串*不是*整数怎么办？第二个块会抛出，第一个块会默默地行动，就像您的数据与枚举不同一样）。

此外，如前所述，比较整数在性能方面总是比比较字符串更好，但我相信在这种情况下不会有太大的实际差异。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-30T11:17:16.803

> 从`int`转换到一个`enum`非常便宜......它会比字典查找更快。基本上它是无操作的，只是将位复制到具有不同概念类型的位置。
> 
> 将字符串解析为枚举值会慢一些。

从[这个 SO 答案](https://stackoverflow.com/a/3256761/1495442.)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-30T11:17:28.143

如果要检查有效性，可以使用

```
int value;
Option option;

if (int.TryParse(stringValue, out value) &&
    Enum.IsDefined(typeof(Option), value)) { 
    option=(Option)value;
} 
```

# jquery - jQuery .html 和标题 attr(); 问题

> ID：11720252
> 
> 赞同：0
> 
> 时间：2012-07-30T11:08:45.120
> 
> 标签：jquery, dom

我有一个用 HTML/CSS 构建的简单状态/进度条，百分比是根据 span 标签中的 HTML 生成的。然后我试图根据百分比生成一个工具提示标题。问题是工具提示标题不起作用。希望下面的代码可以比我更好地解释它。

HTML

```
<span class="status">Open</span>
  <div class="prog-container">
    <a href="#" class="form-info" rel="tooltip" title="a">
      <div class="progress rounded clearfix">
        <div class="prog-quart fl">&nbsp;</div>
        <div class="prog-half fl">&nbsp;</div>
        <div class="prog-three-quart fl">&nbsp;</div>
        <div class="prog-perc"></div>
      </div>
    </a>
  </div> 
```

jQuery根据状态生成百分比

```
$('.status:contains("Open")').next().find('.prog-perc').html("25%");
$('.status:contains("Open")').next().find('.prog-quart').addClass('prog-fill'); 
```

jQuery 根据上面生成的百分比生成工具提示标题

```
$('.prog-perc:contains("25%")').parent().prev().attr("title", "25 percent tooltip"); 
```

另外我正在使用 HTML5，所以在任何人提出它之前，用锚标签包装 div 是有效的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T11:18:51.183

据我了解，您想更改锚的标题

```
<a href="#" class="form-info" rel="tooltip" title="a"> 
```

如果是这样，那么你应该改变

这行代码

```
$('.prog-perc:contains("25%")').parent().prev().attr("title", "25 percent tooltip"); 
```

到

```
$('.prog-perc:contains("25%")').parents('a').attr("title", "25 percent tooltip"); 
```

或者你可以试试

```
$('.prog-perc:contains("25%")').closest('a').attr("title", "25 percent tooltip"); 
```

# jquery - 我尝试将悬停功能更改为单击功能

> ID：11720253
> 
> 赞同：1
> 
> 时间：2012-07-30T11:08:48.110
> 
> 标签：jquery, click, hover

我是新手：/

我找到了这段代码，只是想将“悬停”更改为“点击”。不幸的是，这不起作用。然后我读到了一个类似的问题，有人建议插入`obj.on('click', [selector,] function()`而不是悬停。

这也行不通。

那么，我怎样才能让这个代码只在点击而不是悬停时工作？下面是原始代码。如果有人能帮忙就好了。

```
(function($) {
     $.fn.hoverexpand = function(options) {
     var defaults = {
       minHeight: '100px',           
       collapsedClass: 'expand-me',  
 event
       hoverTime: 250                /
     };
     var options = $.extend(defaults, options);

     return this.each(function() {
       var $obj = $(this);
       var origHeight = $obj.css('height');
       var timer = null;

       if( parseInt(origHeight) > parseInt(options.minHeight)) {
         $obj.css({
           height: options.minHeight,
           overflow: 'hidden'
         }).addClass(options.collapsedClass);

         $obj.hover(
           function() {  // click not mouseover
             if(!timer) {
               timer = window.setTimeout(function() { 
                 $obj.animate({height: origHeight }, 250).removeClass(options.collapsedClass);       //expand
                 timer = null;
               }, options.hoverTime);
             }
           },
           function() {  // mouseout
             if(timer) {
               window.clearTimeout(timer);
               timer = null;
             } else {
               $obj.animate({height: options.minHeight}, 250).addClass(options.collapsedClass);    //contract
             }
           }
         );
       }
     });   }; })(jQuery); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T11:12:35.777

而不是悬停（它需要 2 个函数作为参数 - mouseover 和 mouseout），您可以像这样分别监听`mouseout`和`click`事件：

```
$obj.on('mouseout', function(){
  //do things
});

$obj.on('click', function(){
  //do things
}); 
```

（有关详细信息，请参阅[http://api.jquery.com/on/ ）](http://api.jquery.com/on/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T11:16:36.870

将`.hover()`（使用 mouseenter/mouseleave）函数替换为：

```
$obj.on({
    click : function() {  // click
        if(!timer) {
          timer = window.setTimeout(function() { 
            $obj.animate({height: origHeight }, 250).removeClass(options.collapsedClass);       //expand
            timer = null;
          }, options.hoverTime);
        }
     },
     mouseleave: function() {  // mouseout
        if(timer) {
          window.clearTimeout(timer);
          timer = null;
        } else {
          $obj.animate({height: options.minHeight}, 250).addClass(options.collapsedClass);    //contract
        }
     }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T11:26:21.690

使用 [`.toggle()`](http://api.jquery.com/toggle-event/)which 需要一个函数列表来调用交替点击..

所以而不是`$obj.hover`使用`$obj.toggle`

# facebook-apps - Facebook 应用国家限制

> ID：11720255
> 
> 赞同：1
> 
> 时间：2012-07-30T11:08:55.263
> 
> 标签：facebook-apps, restriction, country

在没有确认回复的情况下阅读两篇关于此的帖子。facebook如何检测国家？来自用户的注册个人资料或来自他们访问 facebook.com 的 IP

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T14:43:48.793

Facebook 以多种方式检测国家/地区（无特定顺序）：

*   浏览器语言
*   您在 Facebook 上选择的语言
*   IP地址
*   个人资料详情

这真的取决于你需要这些信息来做什么......

您应该使用[Facebook 的应用级别限制设置](http://developers.facebook.com/docs/opengraph/userrestrictions/)将您的应用限制在特定国家/地区。

# php - 遍历子类还是有更好的方法？

> ID：11720259
> 
> 赞同：2
> 
> 时间：2012-07-30T11:09:05.660
> 
> 标签：php, architecture

我为一家保险经纪人工作，我在这里实施的其中一件事是报价服务，该服务将客户的详细信息作为输入，并为许多保险公司提供报价列表作为响应。

它目前的工作方式如下：

*   索引页面接收 JSON 字符串中的报价数据
*   报价数据依次发送到每个保险公司的计算脚本 - 这些脚本在索引页面的数组中列出
    *   每个保险公司的计算都参考数据库表，以查看在保险开始日期的情况下应该使用哪组费率
    *   数据被发送到特定脚本并生成一个速率并返回给索引
*   索引按升序对结果进行排序，并将它们作为 JSON 字符串返回给发送者

这个解决方案的问题是：

*   难以测试 - 每组速率都是一个单一的代码块，因此不能单独测试各个部分
*   难以维护 - 为保险公司添加一组新费率涉及将当前费率复制到新脚本，进行必要的更改，并在数据库表中使用新费率的开始日期创建新条目。这反过来导致：
*   费率之间有很多代码重复

我新的部分形成的解决方案是有一个主`Quoteservice`类，它包含所有报价通用的功能，无论是保险公司还是产品`Insurer1`，`Insurer2`等等。从索引页面调用的子类以获取报价率。这些反过来将具有每组费率（等）的子`Insurer1May2012`类`Insurer1July2012`。我的问题在于试图摆脱对数据库表的需要来为开始日期选择正确的费率。

我想能够说

```
$quoteresults=array();
$quoteresults=array_merge(Insurer1->getQuote($quotedata), $quoteresults);
$quoteresults=array_merge(Insurer2->getQuote($quotedata), $quoteresults); 
```

并让每个`InsurerX`对象根据开始日期使用正确的子类（ 等） - 可能通过在其每个子类上调用一个函数`InsurerXMay2012`，该函数返回子类的费率生效时的日期（或时间戳）。不幸的是，在寻找循环遍历类的子类的最佳方法之后，这似乎不是最好的方法。`InsurerXJuly2012``getStartdate()`

最终目标是能够只添加该类型`Insurer1Sept2012`的一个子类来更改速率，而不必更改多个文件和/或数据库表。（覆盖以前的费率不是一种选择 - 调整过程需要能够在它们被取代后长达 12 个月内获得费率）

**我如何看待新版本的示例**

```
abstract class Quoteservice
{
    // Various common functionality here...
}

class Insurer1 extends Quoteservice
{
    public function getQuote($quotedata)
    {
        $subclass=null;
        // This is the bit I'm not sure of...
        // Maybe something like:
        foreach($subclasses as $thissubclass)
        {
            $subclassstart=$thissubclass->getStartdate();
            // Ignore all start dates greater than proposed start date
            if($subclassstart < $quotedata['startdate'])
            {
                $subclasses[$subclassstart]=$thissubclass;
            }
        }
        ksort($subclasses);
        $subclass=array_pop($subclasses);
        return $subclass->getQuote()
    }
}

class Insurer1May2012 extends Insurer1
{
    public function getStartdate()
    {
        return 1335830400; // unix time stamp for 1st May 2012
    }

    public function getQuote($quotedata)
    {
        // Calculate May's rate here...

        return $quoteinfo;
    }
}

class Insurer1July2012 extends Insurer1
{
    public function getStartdate()
    {
        return 1341100800; // unix time stamp for 1st July 2012
    }

    public function getQuote($quotedata)
    {
        // Calculate July's rate here...

        return $quoteinfo;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T12:25:25.693

尝试将其实现为单个 PHP 页面/脚本是行不通的。一旦你开始分离逻辑，其他一切都会变得简单得多。

> 报价数据依次发送到每个保险公司的计算脚本

我敢打赌，表演也很糟糕。

> 每组速率都是一个整体的代码块，因此不能单独测试各个部分

然后，作为最低限度，每个保险公司应该有一个 URL，这可以反过来实现到特定于该保险公司的其他 URL 的路由。当然，您将脚本实现为用于聚合 Web 服务的前端控制器。

> 似乎在寻找循环遍历类的子类的最佳方法之后

您似乎错过了面向对象编程的一个关键点 - 封装。

> 使用正确的子类（InsurerXMay2012 ....

天哪，不！

您混淆了代码和数据。难怪`each set of rates is a monolithic block of code`

> 可能通过在其每个子类上调用函数 getStartdate()

当您检查您的电子邮件时，您是否认为 POP 服务器会读取它保存的每封电子邮件，只是为了找到发给您的电子邮件？

虽然我相信最佳解决方案会将功能拆分为多个聚合 URL（即 HTTP 级别架构），并且路由应该由数据构造（即数据库）驱动，但很可能仅使用对象就可以在合理的系统中实现预期的结果面向 PHP。但是，除非您能够分离关注点、分层代码架构、分离代码和数据并锻炼如何正确地通过代码路由执行线程，否则您只会弄得一团糟的意大利面条代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T11:18:58.377

虽然可以，但在类名中存储变量数据不是我推荐的方法。PHP 语言中已经有用于这种数据存储的内置结构。

我不会为每种报价类型的每个日期都设置一个子类，而是使用该类的**构造函数**来获取一个日期变量，它可以使用它来计算所需的报价。

例如：

```
class Insurer1 extends Quoteservice {
    public function __construct(DateTime $date) {
        // Do something with the data.
    }
}

// ... would be initialised like this:

$quoteResults = array();
$quoteResults[] = new Insurer1("2012-07-30");
$quoteResults[] = new Insurer2("2012-07-21"); 
```

该类`Quoteservice`可以实现诸如 的方法`getStartDate()`，这些方法可用于 的所有实例`Quoteservice`。

您甚至可以完全消除对`Insurer1`, `Insurer2`... 类的需求，并将保险公司的名称作为另一个参数传递给构造函数。

```
$someQuote = new Quoteservice("2012-07-30", "Insurer1"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T12:52:10.607

我认为不`Insurer`应该延长`QuoteService`。它们具有不同的（如果偶尔重叠）功能。`QuoteService`是 的聚合器`InsuranceQuotes`。`Insurer`是一个提供者`InsuranceQuote`。`InsuranceQuote`取决于谁是谁，`Insurer`谁`Insuree`可能是谁。所以它可能会是这样的：

```
$client= new Insuree;
$quoter= new QuoteService;
$quoter->calculate($client);
$quoter->show_quotes(); 
```

像这样的类：

```
class Insuree {

  protected $age;
  protected $gender;
  protected $marital_status;
  protected $drivers_license;
  protected $address;
  //etc. with constructor and getters/setters
}

class Insurer {

  function get_quote(Insuree $client, $args=null) {
    //do stuff
   return $quote; //InsuranceQuote obj.
  }
}

class InsuranceQuote {
  protected $period;
  protected $total;
  //etc. with constructor, getters, setters

  function out(){
    //echo something
  }
}

class QuoteService {

  protected $insurers; //SplObjectStorage containing Insurer objects
  protected $quotes; //SplObjectStorage containing InsuranceQuote objects

  function __construct($args=null){
     $this->get_insurers($args);  //limit the list with $args if you like
     $this->quotes=new SPLObjectStorage;
  }

  protected function get_insurers($args){
    $this->insurers=new SPLObjectStorage;
    //access list of insurers from db(?)
    while($row = $list->fetch_assoc()){
       $i=new Insurer($list);
       $this->insurers->attach($i);
    }
  }

  function calculate(Insuree $client, $args=null) {
    foreach($this->insurers as $quoter){
      $this->quotes->attach($quoter->get_quote($client, $args));
    }
  }

  function show quotes(){
    foreach($this->quotes as $quote) $quote->out();
  }

} 
```

关于如何子类`Insurer`化：每个特定的数据`Insurer`必须存储在某个地方。如果它可以以标准格式存储，那么您只需要一个`Insurer`类。设计表格来保存这些数据将是设计过程中最困难的部分。在不了解您的数据形状的情况下，我不想建议一种结构。

# android - 更改 Android Activity 的标签？

> ID：11720268
> 
> 赞同：0
> 
> 时间：2012-07-30T11:09:31.850
> 
> 标签：android

我正在尝试更改 android 活动的标签：

```
<activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main"> 
```

以上是有效的，但是当我将其更改为以下内容时：

```
<activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main_test"> 
```

它不起作用，我收到错误：

```
Error in an XML file: aborting build. 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T11:10:53.033

(title_activity_main_test) 的值应在 res/values 的 strings.xml 文件中声明。

![在此处输入图像描述](../Images/a2bd881d28f5d654f9aae35976f8bd34.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T11:16:13.043

属性值“@string/title_activity_main”和“@string/title_activity_main_test”是对您的 Android 应用程序使用的资源的引用。

第一部分 - @string，指的是您的 Android 项目中的文件 res\values\strings.xml。（例如，如果您想引用图像，则值的第一部分将以“@drawable”开头。）

strings.xml 文件应该包含您要在应用程序中使用的所有面向用户的字符串。如果要添加新字符串，则需要该文件中的新元素。如果您只想更改现有字符串的值，请不要更改其名称。只是改变它的价值。

# jquery - 在这些演示中，我如何利用外部导航来创建任何内容滑块来创建上一个下一个外部控件

> ID：11720269
> 
> 赞同：0
> 
> 时间：2012-07-30T11:09:35.077
> 
> 标签：jquery, anythingslider

这是 AnySlider 的两个资源示例

[http://jsfiddle.net/Mottie/Cm479/4398/](http://jsfiddle.net/Mottie/Cm479/4398/)

[http://jsfiddle.net/Mottie/Cm479/4401/](http://jsfiddle.net/Mottie/Cm479/4401/)

我需要简单的上一个/下一个和暂停播放导航，但对于任何滑块来说都是外部的。谁能帮我解决这个问题？

最亲切的问候，

朱奈德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T18:58:29.163

看看这个例子：http: [//jsfiddle.net/ycUB6/982/](http://jsfiddle.net/ycUB6/982/)

我认为您可以将`onInitialized`参数/函数更改为以下内容：

```
onInitialized: function(e, slider) {
    $("a.next-slide").click(function(){
        slider.goForward();
    });
    $("a.prev-slide").click(function(){
        slider.goBack();
    });
} 
```

当然，您可以使用下一个/上一个链接上的任何类/ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T01:29:55.033

这是一个非常基本的示例（[演示](http://jsfiddle.net/Mottie/Cm479/5106/)），但试试这个 HTML

```
<div id="externalNav">
Goto <a href="#1">One</a> |
    <a href="#2">Two</a> |
    <a href="#3">Three</a> |
    <a href="#4">Four</a> |

    <a class="play" href="#play">Play</a>
</div> 
```

和这个脚本

```
var $s = $('#slider');

$s.anythingSlider({
    // If true, builds a list of anchor links to link to each panel
    buildNavigation: false,
    buildStartStop: false
});

// set up external links
$('#externalNav a').click(function(){
    // get slide number (ignore the #)
    var slide = $(this).attr('href').substring(1),
        // get AnythingSlider data object
        slider = $s.data('AnythingSlider');
    if (slide === "play") {
        // toggle slideshow
        slider.startStop( !slider.playing );
        // change link text
        $('a.play').text( slider.playing ? 'Pause' : 'Play' );
    } else {
        // go to selected slide
        $s.anythingSlider(slide);
    }
    // prevent link from changing the hash
    return false;
}); 
```

# ruby-on-rails - 如何更改 Rails 中的邮件内容传输编码设置？

> ID：11720270
> 
> 赞同：8
> 
> 时间：2012-07-30T11:09:36.180
> 
> 标签：ruby-on-rails, actionmailer, postfix-mta

“Content-Transfer-Encoding”设置默认设置为“7bit”。邮件服务器 Postfix 将电子邮件标题分解为 1000 个字符，这意味着如果您的电子邮件很长（例如使用 HTML），您最终会在文本或链接中间有空格。（有关更多信息，请参阅此线程：http: [//tech.groups.yahoo.com/group/postfix-users/message/273296](http://tech.groups.yahoo.com/group/postfix-users/message/273296)）

按照 Rails ActionMailer 文档 (http://api.rubyonrails.org/classes/ActionMailer/Base.html)，将以下代码添加到我的应用程序文件中应该可以，但它不起作用：

`ActionMailer::Base.default 'Content-Transfer-Encoding' => 'quoted-printable'`

我仍然以默认值结束：

```
Mime-Version: 1.0
Content-Type: multipart/alternative;
 boundary="--==_mimepart_50166adf1e043_1b9810829142282d";
 charset=UTF-8
Content-Transfer-Encoding: 7bit 
```

我的电子邮件是这样的：

```
def new_registered_user(user_id) 
    @user = User.find(user_id)

    set_locale @user.locale

    mail(
      :subject => i18n_subject,
      :to => @user.email_with_name
    ) do |format|
      format.text { render :layout => 'text_email' }
      format.html
    end
  end 
```

关于我还应该改变什么的任何想法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-23T23:29:19.193

我发现在 Mail 对象上设置（未记录的）transport_encoding 有效：

```
m = mail(...)
m.transport_encoding = "quoted-printable"
m.deliver 
```

我无法获得通过 ActionMailer 设置 Content-Transfer-Encoding 工作的记录方法。

我的环境：rails (3.1), mail (~> 2.3.3)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-08-23T13:51:30.603

如果您使用自定义邮件程序类，则可以将其设置为邮件程序类中的默认选项，如[ActionMailer::Base 文档中所述](http://apidock.com/rails/ActionMailer/Base)

```
class Notifier < ApplicationMailer
  default 'Content-Transfer-Encoding' => '7bit'
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-05T18:43:56.927

我最近也遇到了这个问题。Rails 默认为`quoted-printable`，但这导致我在 webmail 客户端中出现渲染问题。新行呈现为`=0D`，webmail 客户端呈现不正确。

我对此的解决方案是仅更改 html 部分的内容编码，因为我还发送了单独的文本部分并且不想更改其编码。该`html`方法接受一个`content_transfer_encoding`参数，避免需要一个临时变量：

```
mail do |format|
  format.text { ... }
  format.html(content_transfer_encoding: '7bit') { ... }
end 
```

文档引用 using`default 'Content-Transfer-Encoding' ...`但仅在不`mail`直接调用该方法时才有效。

# android - 当用户触发活动开始（按下按钮）时显示 ProgressDialog

> ID：11720271
> 
> 赞同：0
> 
> 时间：2012-07-30T11:09:39.340
> 
> 标签：android

我有一个扩展`Activity`这个类的类，工作是从手机上的数据库中获取一些数据`SQLite`，然后初始化。a`ListView`包含数据库中的所有数据。

这是从数据库中获取信息的方法：

```
public ArrayList<Case> getFromDatabase() {

    ArrayList<Case> c = db1.getAllContacts();    
    return c; 
} 
```

如前所述，该方法在一个扩展类内部，`Activity`该方法在该方法中被调用`onCreate`。如果数据库包含大约 15 条记录，则此操作大约需要 2 秒。当用户按下按钮启动此活动时，如何显示 ProgressDialog，只是为了显示正在发生的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T11:15:17.270

我建议您将数据库包装在 ContentProvider 中，然后使用 CursorLoader 为 ListActivity 提供动力。这将避免占用您的 UI 线程，避免需要进度条，在数据库内容更改时更新列表等等。（如果您只想要设备中的联系人，那么已经有一个[联系人内容提供程序](http://developer.android.com/guide/topics/providers/contacts-provider.html)。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T11:18:03.757

通过在 onCreate 方法之外声明 ProgressDialog 变量来创建 ProgressDialog 作为活动的字段：

```
ProgressDialog pd=null; 
```

通过在 onCreate 方法之外编写以下块，在 Activty 中创建一个 Handler 作为字段。

```
Handler handler=new Handler()
{
   public void handleMessage(Message msg)
   {
      pd.dismiss();
      //do other operations on EventThread.
      ArrayList<Case> c= (ArrayList<Case>)msg.obj;
      //Process c
   }
} 
```

现在在 onCreate 方法中用以下代码替换您的代码：

```
pd=ProgressDialog.show(YourActivity.this, "title", "subtitle");
Thread thread=new Thread()
{
   public void run()
   {
       ArrayList<Case> c = db1.getAllContacts();
       Message msg=handler.obtainMessage();
       msg.obj=c;
       handler.sendMessage(msg);
   }
};
thread.start(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T11:15:21.247

使用 AsyncTask 显示 ProgressDialog 并在后台获取数据。

```
new FetchRSSFeeds().execute(); 
```

然后创建类

```
private class FetchRSSFeeds extends AsyncTask<String, Void, Boolean> {

 private ProgressDialog dialog = new ProgressDialog(HomeActivity.this);

    /** progress dialog to show user that the backup is processing. */
    /** application context. */

    protected void onPreExecute() {
        this.dialog.setMessage("Please wait");
        this.dialog.show();
    }

    protected Boolean doInBackground(final String... args) {
        try {

            /**
             * Fetch the data
             */
            Utilities.arrayRSS = objRSSFeed.FetchRSSFeeds(Constants.Feed_URL);
            return true;
        } catch (Exception e) {
            Log.e("tag", "error", e);
            return false;
        }
    }

    @Override
    protected void onPostExecute(final Boolean success) {

        if (dialog.isShowing()) {
            dialog.dismiss();
        }

          // Setting data to list adaptar
          setListData();
          txtTitle.setText(Utilities.RSSTitle);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T11:17:26.413

这是一个如何做到这一点的例子。基本上查找和使用 AsyncTask

[http://www.vogella.com/articles/AndroidPerformance/article.html](http://www.vogella.com/articles/AndroidPerformance/article.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-30T11:17:39.517

使用[`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html). 此类提供了解决您面临的问题的方法。

首先，在`onPreExecute()`方法中你可以启动一个`ProgressDialog`（你在这里写的代码，将在你创建`AsyncTask`对象的线程上执行，即你的情况下的UI线程）

然后，在`doInBackground()`您从数据库加载所有数据的方法中。

最后，在`onPostExecute()`您从后台线程获得结果的方法中，您可以在此处关闭`ProgressDialog`，因为您再次位于 UI 线程上。

可以在[此处](http://www.vogella.com/articles/AndroidPerformance/article.html)找到其他信息。

# .net - 改进 FrameworkElementAdapters.ViewToContractAdapter

> ID：11720274
> 
> 赞同：1
> 
> 时间：2012-07-30T11:09:53.700
> 
> 标签：.net, c#-4.0, maf, system.addin

我在 Host 和 AddIn 之间使用 MAF(System.addin) 和 FrameworkElements。

我在适配器中使用 FrameworkElementAdapters.ViewToContractAdapter 和 FrameworkElementAdapters.ContractToViewAdapter。

我将 FrameworkElementAdapters.ViewToContractAdapter 与 stopwatcher 一起使用，结果以秒为 1,3 s 。

```
 public INativeHandleContract GetToolBox()
    {

        FrameworkElement e=view.GetControl();
        Stopwatch w = new Stopwatch();
        w.Start();
        INativeHandleContract c= FrameworkElementAdapters.ViewToContractAdapter(e);
        w.Stop();
        System.Console.WriteLine(w.Elapsed.TotalSeconds); ///Results is 1,3

        return c;
    } 
```

是否可以改进 FrameworkElementAdapters.ViewToContractAdapter 的时间？

谢谢

# php - 选中 HTML 复选框

> ID：11720275
> 
> 赞同：0
> 
> 时间：2012-07-30T11:09:55.467
> 
> 标签：php, html

这是我的问题：我有一个带有复选框的 html 模板。当 php 脚本运行时，它会将一个值传递给复选框的“checked”属性，如下所示：

```
<input type="checkbox" name="form_data[show_products]" {SHOW_PRODUCTS} /> 
```

where`{SHOW_PRODUCTS}`可以是`'checked="true"'`或`''`，具体取决于数据库列中的数据是 1 还是 0。因此，换句话说，根据从数据库传递的数据，复选框是选中还是未选中。

现在，由于这是编辑表单的模板，我需要收集“checked”属性的值并将其传递给数据库。但是，如果我取消选中在页面加载时自动选中的复选框并尝试保存更改，脚本仍会将 1 而不是 0 写入数据库。我该如何更改？

*编辑*

这些是处理数据的 php 部分：

```
else if (isset($_POST['edit']))
{   
    $form_data = $_POST['form_data'];
    $present_id = $form_data['present_id']; 
    $present=new Present();
    $present->load($present_id); 

    if (isValidForm())
        {       
        $present->set($form_data);
        $present->update();
        }
    else
        {
        $errors=$formValidator->getErrors();
        $page_content_HTML=edit_form_HTML($form_data, $errors);
        }
}

function set($data){
    $keys=array_keys($data);
    foreach($keys as $key)
    {
        $this->$key=$data[$key];
    }   
}

function update(){
        global $db;
        $date_from = format_datetime($this->date_from, "%Y.%m.%d. %H:%M:%S");
        $date_to = format_datetime($this->date_to, "%Y.%m.%d. %H:%M:%S");
        $sql="UPDATE presents SET present_name='".$this->present_name."', description='".$this->description."', present_image='".$this->present_image."', date_from='".$date_from."', date_to='".$date_to."', short_description='".$this->short_description."', show_products='".$this->show_products."' WHERE present_id='$this->present_id'";
        $db->query($sql);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T11:13:54.170

根据[W3C](http://www.w3.org/TR/html401/interact/forms.html#adef-checked)，检查的值是一个`boolean`值。因此，如果未选中它，请将其设置为`false`而不是 ''。

> 选中 [CI]（CI 表示不区分大小写）
> 
> 当 type 属性的值为“radio”或“checkbox”时，此布尔属性指定按钮处于打开状态。对于其他控件类型，用户代理必须忽略此属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T11:24:39.323

检查复选框的另一种方法是使用[isset](http://php.net/manual/en/function.isset.php)

```
if(isset($_POST['checkboxname'])){
$status=1;
}else {
$status=0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T11:40:42.983

这是一个模型-视图-控制器范式吗？我想您的问题是您只更新查询中发布的字段。因此该复选框未选中，未发送，因此也未更新。

尝试设置类似

```
$_POST['theCheckbox'] = isset($_POST['theCheckbox']); 
```

如果已设置，则将其设置为 true，如果未设置，则设置为 false。所以现在你的输入总是有一个真或假的值，所以它会被你的模型更新。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-30T11:50:18.467

问题不在于表单/复选框，而在于您如何处理 PHP 脚本中的请求数据。正如我之前评论过的：未选中的复选框不是 POST 或 GET 请求的一部分（它不仅是空的，而且不存在）。

因此，`$this->show_products`未选中该框时不存在。

尝试以下操作：添加行

```
$present->show_products = 0; 
```

就在之前

```
$present->set($form_data); 
```

这使得`show_products`默认为“关闭”（“0”），并且只有在选中复选框时才会被覆盖。

（顺便说一句：我也认为，如果检查 CB，该值将是“on”而不是“1”。将属性添加`value="1"`到复选框标记以使其改为“1”）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-30T11:12:27.400

尝试`checked="checked"`对 unchecked 使用或根本不使用属性`check-box`。

# python - 如何将列表列表中的字符串转换为元组？

> ID：11720278
> 
> 赞同：0
> 
> 时间：2012-07-30T11:10:03.703
> 
> 标签：python

```
list1 = [['a', (1, 1)], ['a', (1, 2)], ['a', (1, 3)]] 
```

假设我需要将第一个 'a' 替换为`(0,1)`，那么结果应该是：

```
[[(0,1), (1, 1)], ['a', (1, 2)], ['a', (1, 3)]] 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T11:11:08.883

只需解决内部列表：

```
list1[0][0] = (0, 1) 
```

第一个索引操作`[0]`检索外部列表中的第一个元素，然后您对其应用*另一个*索引操作以获取包含列表的第一个元素。

```
>>> list1 = [['a', (1, 1)], ['a', (1, 2)], ['a', (1, 3)]]
>>> list1[0][0] = (0, 1)
>>> list1
[[(0, 1), (1, 1)], ['a', (1, 2)], ['a', (1, 3)]] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T11:13:21.860

```
>>> my_list = [['a', (1, 1)], ['a', (1, 2)], ['a', (1, 3)]]
>>> for sublist in my_list:
        if sublist[0] == 'a':
            sublist[0] = (0, 1)
            break

>>> my_list
[[(0, 1), (1, 1)], ['a', (1, 2)], ['a', (1, 3)]] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T11:14:11.670

编辑：为了回答这个问题（只有第一个'a'），并满足不满意的缩进客户 - 这是一些好的代码：

```
for inner_list in list1:
    for idx, elem in enumerate(inner_list):
        if elem=='a':
            inner_list[idx] = (0,1)
            break 
```

# wpf - 使用事件触发器的按钮控制动画

> ID：11720280
> 
> 赞同：0
> 
> 时间：2012-07-30T11:10:12.977
> 
> 标签：wpf, xaml, animation, triggers, storyboard

我想在 XAML 中使用事件触发器来实现，当触发鼠标输入时，按钮的样式（按钮和文本变大）会发生变化。然后当鼠标离开事件被触发时，它会恢复到以前的样式。

我已经解决了这个问题，但是我的问题是单击按钮时，必须保留鼠标输入的样式，除非单击其他按钮。

```
<Style.Triggers>
  <EventTrigger RoutedEvent="Button.MouseEnter">
    <EventTrigger.Actions>
      <BeginStoryboard>
        <Storyboard>
          <DoubleAnimation Storyboard.TargetProperty="LayoutTransform.ScaleX"
            To="2" Duration="0:0:0.25"/>
          <DoubleAnimation Storyboard.TargetProperty="LayoutTransform.ScaleY"
            To="2" Duration="0:0:0.25"/>
        </Storyboard>
      </BeginStoryboard>
    </EventTrigger.Actions>
  </EventTrigger>
  <EventTrigger RoutedEvent="Button.MouseLeave">
    <EventTrigger.Actions>
      <BeginStoryboard>
        <Storyboard>
          <DoubleAnimation Storyboard.TargetProperty="LayoutTransform.ScaleX"
            To="1" Duration="0:0:0.25"/>
          <DoubleAnimation Storyboard.TargetProperty="LayoutTransform.ScaleY"
            To="1" Duration="0:0:0.25"/>
        </Storyboard>
      </BeginStoryboard>
    </EventTrigger.Actions>
  </EventTrigger>
</Style.Triggers> 
```

任何帮助表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T11:55:58.080

首先，感谢您的所有评论。它们很棒而且正确，但我必须找到一种使用标准按钮（不是单选按钮或切换按钮）来实现它的方法。

我能够弄清楚这一点。所以，我想扩展 Control 按钮以添加类似标志的东西，以确定按钮是否已被单击，然后处理 OnMouseLeave 事件。

# php - 正则表达式中的前瞻、后视条件

> ID：11720285
> 
> 赞同：0
> 
> 时间：2012-07-30T11:10:32.463
> 
> 标签：php, regex, pcre, regex-lookarounds

以下示例是关于使用前瞻断言作为条件的。我在 PHP 手册中找到它：[http ://www.php.net/manual/en/regexp.reference.conditional.php](http://www.php.net/manual/en/regexp.reference.conditional.php)

```
(?(?=[^a-z]*[a-z])
\d{2}-[a-z]{3}-\d{2}  |  \d{2}-\d{2}-\d{2} ) 
```

这是关于这个正则表达式的描述：

> 条件是一个肯定的前瞻断言，它匹配一个可选的非字母序列，后跟一个字母。换句话说，它测试主题中是否存在至少一个字母。如果找到一个字母，则将主题与第一个选项进行匹配；否则它与第二个匹配。此模式匹配 dd-aaa-dd 或 dd-dd-dd 两种形式之一的字符串，其中 aaa 是字母，dd 是数字。

谁能告诉我为什么我们在这个例子中使用前瞻断言作为条件？为什么我们不使用lookbehind assertion？当它们被用作这样的条件时，我会感到困惑，因为我不知道它们如何匹配主题字符串。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T11:19:58.470

在这种情况下，我们使用前瞻断言来决定使用哪个正则表达式。看起来它正在决定表单的匹配日期`01-Jan-12`和`01-01-12`. 前瞻断言查看我们尝试匹配的内容中是否有任何字母，如果有，则使用`\d{2}-[a-z]{3}-\d{2}`来尝试和匹配`01-Jan-12`，如果没有，则使用`\d{2}-\d{2}-\d{2}`来尝试和匹配`01-01-12`。

# java - 接口是类吗？

> ID：11720288
> 
> 赞同：27
> 
> 时间：2012-07-30T11:10:37.033
> 
> 标签：java, interface

接口是一种特殊的类，还是说接口根本不是类？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-07-30T11:15:11.823

接口不是类，但您可以说接口和类都是*类型*。

从[Java规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.12.6)：

> 在 Java 编程语言中，每个变量和每个表达式都有一个可以在编译时确定的类型。该类型可以是原始类型或引用类型。引用类型包括类类型和接口类型。

请注意，虽然有一个特殊的类[`Class<T>`](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html)可以表示类和接口：

> Class 类的实例表示正在运行的 Java 应用程序中的类和接口。

`Class`接口由实例表示[`isInterface`](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#isInterface())的事实`true`可能会给您一种接口只是一种特殊类型的类的印象。然而，这种情况并非如此。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-30T11:16:43.010

No, an interface is not a class in Java.

An interface is a type and all reference types (i.e. non-primitive types) handle quite similarly in Java. Often when people say "class" they are *actually* referring to a "reference type".

What *might* be confusing you is that an interface definition is stored in a `.class` file, but that's just a technical artifact of Java. In fact all reference type definitions (classes, interfaces, annotations, enums) are stored in `.class` files in Java.

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-30T11:34:52.177

接口的概念来自抽象类，其中抽象类包含方法（或抽象方法）的原型，并且*也可以定义很少的方法*，而接口**仅**包含方法或抽象方法的原型（或签名），其定义由实现类提供。因此，从上面的陈述可以清楚地看出，接口就像 100% 的抽象类，其中 *没有定义任何方法。再次提到它，接口就像 100% 的抽象类，但不是类。*

“接口是类可以做什么的契约”

引入接口的一个原因是，我们`extend`只能单个类，但是接口在java中带来***了一个新的东西*** `implement`，所以我们可以实现数千个接口。所以我们不能说它是一个类。

[你可以在这里](http://www.java2s.com/Tutorial/SCJP/0120__Object-Oriented/Interface.htm)获得更多信息！

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-07-30T11:16:41.047

Interface is just a contract which all implementing classes should follow. An interface is something like a template which cannot make an impact until a class implements it.

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-07-30T11:16:56.300

Yes, an interface is an instance of `java.lang.Class`. If you have a `Class` you can interrogate it to see if it is an interface: [http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#isInterface()](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#isInterface())

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-30T11:17:55.760

接口（是一组具有空主体的相关方法。）只是一个接口。它不是一个类（一个类是创建单个对象的蓝图）。

请注意，您定义了这样的接口

```
interface Bicycle {....} 
```

一个类是这样定义的

```
class MyBMX implements Bicycle{...} 
```

所以接口是接口而不是类

* * *

## 回答 #7

> 赞同：-4
> 
> 时间：2020-12-25T14:50:40.640

**是的，接口是一种类。简单地说，类方法和数据也存在于接口方法（仅抽象方法）和数据（仅静态和最终）中。**

更多观看 [https://www.youtube.com/watch?v=qgBv1_Plldo&list=PLbRMhDVUMngcx5xHChJ-f7ofxZI4JzuQR&index=21&t=13:52](https://www.youtube.com/watch?v=qgBv1_Plldo&list=PLbRMhDVUMngcx5xHChJ-f7ofxZI4JzuQR&index=21&t=13:52)

# cakephp-2.1 - CakePHP 和可重用的方法

> ID：11720289
> 
> 赞同：1
> 
> 时间：2012-07-30T11:10:39.227
> 
> 标签：cakephp-2.1

我会以最可重用的方式开发我的 CakePHP 应用程序。我想把它当作网络服务，所以我不想严格绑定控制器和视图。我的想法是：控制器只返回 json 信息，视图调用控制器并获取 json 并进行 html 输出。

我怎么能意识到这一点？可能是一个很好的方法，开发页面而不是视图，并且在页面内部调用之前开发的 web 服务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-31T09:38:50.960

你甚至可以忘记创建视图文件，使用 $this->set('_serialize', array('people')); 在你的 PeopleController::show()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T09:11:00.500

好吧，蛋糕有点像这样“开箱即用”的作品。您可以使用它`Router::parseExtensions();`来定义您想要提供的数据类型。例如在`app/Config/routes.php`：

```
Router::parseExtensions('xml','json'); 
```

这将使检测传入的请求类型成为可能。例如，如果有人请求： `www.example.com/people/list.json`或`www.example.com/people/list.xml`，在您的 PeopleController 的 list() 方法中，您将能够检测到正在请求的资源类型 - json 或 xml，当然还有您定义的任何其他扩展。这就是[RequestHandlerComponent](http://book.cakephp.org/2.0/en/core-libraries/components/request-handling.html)的用途。您可以检查它是否是 xml，例如：

```
if($this->RequestHandler->isXml()) {
//Some code
} 
```

不同的扩展只是数据的不同表示，所以你提供的究竟是什么并不重要。从 v2.1 开始，Cake 会在看到 JSON 或 XML 请求时自动切换视图类，这会将我们带到新的[JSON 和 XML 视图](http://book.cakephp.org/2.0/en/views/json-and-xml-views.html)。

您所要做的就是在适当的位置提供视图。
在`View/People`（对于此示例）中，您将拥有：

```
..View/People/
      list.ctp
      xml/
         list.ctp - XML view
      json/
         list.ctp - JSON view 
```

# java - 在乒乓球比赛中需要更好的打球角度的方法

> ID：11720293
> 
> 赞同：0
> 
> 时间：2012-07-30T11:10:57.173
> 
> 标签：java, pong

我正在制作一个乒乓克隆来练习我的编码，并且我一直坚持让球在被球拍击中时能够改变角度。

我当前的实现有一个球的 deltaX 和 deltaY，它们随着游戏循环移动以移动球。我这样做的方式是，如果您在球拍移动时击球，deltaY 会根据球拍的方向增加或减少，但这对于游戏来说一点也不自然。

有谁知道这样做的更好方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T11:32:20.573

我要做的第一件事是将 deltaX 和 deltaY 更改为 ballAngle 和 deltaSpeed。这样，您将从直角坐标系移动到极坐标系。由于球运动的性质（直线运动并在每次击球时改变直线的角度），这将使您的工作更轻松。从现在开始，您只需更改 ballAngle 即可更新球的方向。

但是，您必须更新绘制球的函数，使其从极坐标回到直角坐标，以便您可以在屏幕上显示它。一点高中三角学可以让你根据你的角度和速度计算屏幕位置增量：

```
newPosition = oldPosition + movementVector 
```

和：

```
movementVector.x = deltaSpeed*cos(ballAngle)
movementVector.y = deltaSpeed*sin(ballAngle) 
```

当然，这些方程式可能需要根据您测量球的角度进行一些修改。

现在要在每次与球拍碰撞时修改球的角度，您只需要根据球拍接触球拍的哪个部分来增加或减少球的角度，并且绘图函数中的数学应该负责更新 x 和 y现实的立场。

我希望这有帮助。

# terminology - 什么是潜在错误 - 一个例子？

> ID：11720301
> 
> 赞同：3
> 
> 时间：2012-07-30T11:11:22.533
> 
> 标签：terminology

引用处理威胁分类等的文件：

> 如果错误消息或错误信号指示其存在，则检测到错误。存在但未检测到的错误是潜在错误。

请注意，这与休眠故障不同，休眠故障是由某些事件激活的代码中的缺陷，并在激活时产生错误。

同样，潜在错误是由故障引起但不引起故障的错误。我想这在多层应用程序中很常见，但我想不出任何例子。但是我不明白还有一件事——最终它必须导致失败，否则根本不会被发现，你不觉得吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-14T09:06:55.473

潜在错误的好例子

2005 年，一架注册号为 9M-MRG、序列号 28414 的波音 777-2H6ER 飞机作为马来西亚航空公司 124 航班从珀斯飞往吉隆坡，经历了 ADIRU（空气数据惯性参考单元）故障，导致飞机执行非指令机动关于错误的迹象。

在那次事件中，当飞机爬升通过 38,000 英尺（11,600 米）时，不正确的数据影响了所有移动飞机。飞机俯仰并爬升到大约 41,000 英尺（12,500 米），失速警告被激活。飞行员在自动驾驶仪脱离的情况下收回了飞机，并要求返回珀斯。在返回珀斯期间，机组人员短暂启动了左右自动驾驶仪，但在这两种情况下，飞机都向下倾斜并向右倾斜。

这架飞机在剩余的飞行中手动飞行，并安全降落在珀斯。飞机没有人员受伤，也没有损坏。**ATSB（澳大利亚运输安全局）发现此事件的主要原因可能是潜在的软件错误，导致 ADIRU 使用来自故障加速度计的数据**。美国联邦航空管理局发布了紧急适航指令 (AD) 2005-18-51，要求所有 777 运营商安装升级软件以解决错误。

资料来源：[https ://en.wikipedia.org/wiki/Malaysia_Airlines_Flight_370#Aircraft](https://en.wikipedia.org/wiki/Malaysia_Airlines_Flight_370#Aircraft)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T12:46:30.520

我做了一些[阅读](http://www.safety-s2s.eu/modules.php?name=s2s_wp4&idpart=4&idp=1404)：

> 应用于错误的术语“主动”和“潜在”是由 James Reason 创造的。(1,2) 潜在错误（或潜在条件）是指组织或设计的不太明显的失败，这些失败导致错误发生或允许错误发生对工人造成伤害。例如，虽然特定不利事件中的主动故障可能是逻辑控制器编程错误，但潜在错误可能是该机构使用了多个不同的软件代码，从而更容易出现编程错误。因此，潜在错误实际上是“等待发生的事故”。
> 
> 潜在错误有时被称为“钝端”错误，指的是影响执行任务的人员的安全管理系统的多个层次。相反，主动故障有时被称为“尖锐端”的错误，？或参与执行任务的人员。

因此，将上述内容应用于软件，对我来说意味着：

*   错误信号——缺陷表现为某种故障
*   潜在错误——有副作用的根本原因；副作用被认为是检测到的错误

我猜你的例子（如果我的应用程序中的搜索不区分大小写但应该是）很适合被命名为“潜在错误”。它的主动失败可能类似于“搜索结果被不相关的东西破坏”

# javascript - 覆盖图像属性

> ID：11720303
> 
> 赞同：0
> 
> 时间：2012-07-30T11:11:25.837
> 
> 标签：javascript, html, css, vb.net, image

我有一个包含图像的用户控件。我无法从我的 UI 页面修改图像的样式属性。

```
 <td class="innerDiv">
       <div style="width: 100%;">
             <uc:ImgControl ID="imgC1" runat="server" />
       </div>
  </td> 
```

我希望高度和宽度与当前加载的内容不同。有没有办法可以在上面显示的代码中修改/覆盖图像的宽度属性？

我不能在 UserControl 页面中执行此操作，因为该控件也已在其他地方使用。

任何指针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T11:15:40.143

也许你可以改变css：

```
.innerDiv img {
  width: ...;
  haight: ...;
} 
```

*如果它不是我们设置它的唯一地方，那么您可以使用`important`指令*

或者在js中添加这样的东西：

```
var elements = document.getElementsByClassName('innerDiv');

for (var i in elements) {
  elements[i].style.width = '...';
  elements[i].style.height = '...';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T11:18:29.010

```
.innerDiv img {
  width: xx !important;
  haight: xx !important;
} 
```

# opa - Opa 程序中的“顶级”到底是什么意思？

> ID：11720304
> 
> 赞同：0
> 
> 时间：2012-07-30T11:11:27.423
> 
> 标签：opa

我正在浏览[OpaDo 程序](https://github.com/tsloughter/OpaDo)的源代码，并注意到在[Todo 模块](https://github.com/tsloughter/OpaDo/blob/master/src/todo.opa#L103)中调用了一个名为的函数`mypage`。此函数[在文件 'ui'](https://github.com/tsloughter/OpaDo/blob/master/src/ui.opa)中声明，但文件中的任何地方都`todo.opa`没有`ui.opa`导入文件。

这就是“顶级”的意思吗？所有在模块之外声明的函数都可以自由访问吗？`types`或者怎么样`records`？

编译器是否识别这种依赖关系并且`ui.opa`在被要求编译时会自动编译`todo.opa`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T11:02:10.183

默认情况下，所有 opa 源文件都属于同一个默认包。

这就是为什么在编译 todo.opa 和 ui.opa 时，所有函数、类型和记录都可用于同一包中的其他文件。

“顶级”是指源文件第一级的声明，而不是函数内部的声明。

当您使用多个包时，编译器应该只编译必要的文件。

# android - Android webview 问题 Android WebView 不接受为表格指定宽度/高度的 html，如下所示：  

| This is column 1 | This is column 2 |

在我的 PC 浏览器上完美运行。WebView 设置为layout_width="match_parent"和layout_height="wrap_content"，并使用以下方式加载数据： webView.loadData(data, "text/html; charset=utf-8", "UTF-8"); 如果您想从缓存中删除所有项目，请尝试此操作： IDictionaryEnumerator enumerator = HttpContext.Current.Cache.GetEnumerator(); while (enumerator.MoveNext()) { HttpContext.Current.Cache.Remove(enumerator.Key); } androidwebviewhtml-tableandroid-webview 4 1 回答 1 This answer is useful 1 已解决，需要替换为 width='100%25'。 于 2012-07-30T11:36:26.530 回答 Related 1 css - Twitter Bootstrap 全屏轮播 4 java - 在java中使用reg ex匹配大文本中的内容 1 php - 如何设置 PHP 控制器 4 c++ - 如果语句条件 1 .net - 与 mdf 文件的多个连接 1 c# - 带有 viewModel 的嵌套局部视图 1 arrays - 在 cakephp 中检索 url 路径 1 jquery - 如果路由器与外界断开连接，网页选项卡未正确加载？ 1 html - 9Gagtv 如何去除嵌入的 Youtube 视频的标题？ 0 python - 使用 arduino 客户端/python 服务器通过以太网转储数据 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：11720310
> 
> 赞同：0
> 
> 时间：
> 
> 标签：android, webview, html-table, android-webview

Android WebView 不接受为表格指定宽度/高度的 html，如下所示：

```
<html>
<head>
<meta http-equiv='Content-Type' content='text/html; charset=utf-8'>
</head>
<body>

    <table width='100%' height='100%'>
    <tr>
        <td>
            This is column 1
        </td>
        <td>
            This is column 2
        </td>
    </tr>
    </table>

</body>
</html> 
```

在我的 PC 浏览器上完美运行。WebView 设置为`layout_width="match_parent"`和`layout_height="wrap_content"`，并使用以下方式加载数据：

```
webView.loadData(data, "text/html; charset=utf-8", "UTF-8"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T11:36:26.530

已解决，需要替换为 width='100%25'。

# android - 如何获取行的索引

> ID：11720323
> 
> 赞同：0
> 
> 时间：2012-07-30T11:12:51.707
> 
> 标签：android

```
Image[i] = new ImageView(this);
Image[i].setImageResource(R.drawable.book);
Image[i].setPadding(200, 22, 0, 0);
Image[i].setOnClickListener(one); 
```

1.我在数组中有一个按钮，我`onclicklistener`为那个按钮设置了。不知道单击时如何获取行索引
2.im 对如何做感到困惑？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T11:14:10.670

将 id 设置为 Images like ，`view.setId(i);`并使用`getId()`您可以获得索引...

```
public void onClick(View view){
  int index = view.getId();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T11:19:13.050

如果您没有将索引值设置为视图的 ID，那么您可以调用`Image[i].setTag(i)`设置索引值并在**onClick**方法调用`int index = (Integer) view.getTag()`中获取该值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T11:34:02.460

ru 使用 listView？如果是，则在 getview() 方法中，将标签设置为

```
image.setTag(position); 
```

然后在 onclick 事件中你可以这样做::

```
 @Override
    public void onClick(View v) {
    switch(v.getTag()){
    case R.id.image:
       // do your work
    break;
    default:

  }
} 
```

查一下。。

# html - div 不延伸到其他 div

> ID：11720325
> 
> 赞同：0
> 
> 时间：2012-07-30T11:13:06.987
> 
> 标签：html

我对这段代码有一个小的 HTML 问题：

```
 <div id="primary">
    <div id="content" role="main">
        <div class="astro"><img class="astro" src="<?php echo get_template_directory_uri() . '/images/astro.png'; ?>" alt="Astro" />
        </div>

        <div class="planet"><img class="planet" src="<?php echo get_template_directory_uri() . '/images/planet.png'; ?>" alt="Planet" />
        </div>          
        <article id="post-<?php the_ID(); ?>" <?php post_class(); ?>>
            <h1 class="entry-title"><a href="/learcenter/?page_id=13"><?php echo $page_data->post_title; ?></a></h1>
                <div class="entry-content"><?php echo $page_data->post_excerpt; ?>
                    <a href="/learcenter/?page_id=13">Read More...</a>
                </div>                  
        </article>  
            <div id="tour-center">
                <h1 class="entry-title">Tour Our Center</h1>

            </div>  

        <div id="news-section-title">           
            <h1 class="entry-title"><a href="<?php echo esc_url( get_permalink( get_page_by_title( 'Challenger News' ) ) ); ?>"><?php echo get_the_title(75); ?></a></h1>
            <div class="hr"></div>
        </div>

        <div class="news">  
            <div class="rss-news">
                <a href="#"><img src="<?php echo get_template_directory_uri() . '/images/rss.png'; ?>" alt="RSS" />
                </a>
            </div>  
        </div>  

        <div class="news">          
            <div class="rss-news">
                <a href="#"><img src="<?php echo get_template_directory_uri() . '/images/rss.png'; ?>" alt="RSS" />
                </a>
            </div>
        </div>

        <div class="news">

                    <div class="rss-news">
                        <a href="#"><img src="<?php echo get_template_directory_uri() . '/images/rss.png'; ?>" alt="RSS" />
                        </a>
                    </div>
        </div>          

    </div><!-- #content -->
</div><!-- #primary --> 
```

我已经删除了 div 之间的一些 PHP 代码，以便 HTML 更加可见。问题是内容 div 在 news-section-title div 之后立即停止，我不知道为什么。它应该一直延伸到文档的结尾，也就是结束 div 所在的位置。[您可以在此网站](http://nelsonandco.pro/learncenter/)上实时查看代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T11:28:15.810

只需将此样式添加到您的内容 div

```
#content {
    float:left;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T11:33:41.500

`div`'s 不会包装`float`ed 元素，除非您使用某种 clearfix 解决方案。尝试添加`overflow: hidden`到您的`content` `div`.

# iphone - 默认键盘出现在 iPhone 中，而不是我的自定义键盘

> ID：11720329
> 
> 赞同：0
> 
> 时间：2012-07-30T11:13:16.073
> 
> 标签：iphone, ios, uitextfield, custom-controls

我正在我的 iPhone 应用程序中制作自定义键盘。但是当我点击 UITextField 时，默认键盘也会出现。我只希望我的键盘在屏幕上弹出。如何阻止默认键盘出现在屏幕上？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T11:19:52.463

您可以尝试以下代码行

```
your_TextField.inputView = your_CustomKeyboard; 
```

我不确定它是否适用于您的自定义键盘

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T07:52:42.503

我得到了我的问题的答案。由于我是新来的，所以我会在我自己的问题发布后 8 小时发布答案 b4。是的 Tejeshwar Gill，感谢您的回复，我的解决方案与您的方法相匹配。再次感谢。

当键盘出现时，我使用 NSNotificationCenter 通知我。当键盘出现时，我曾使用这种方法来调整我的 tableview 的大小，但那是很久以前的事了。所以它没有立即点击我。

[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(hideKeyboard:) name:UIKeyboardWillShowNotification object:nil];

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-30T12:09:13.063

您需要隐藏默认键盘才能显示您的自定义键盘。所以使用这个： -

`[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardDidHide:) name:UIKeyboardDidHideNotification object:nil];`并在方法`keyboardDidHide:`中添加`[keyboard resignFirstResponder]`.

# pandas - 使用 MultiIndex 从 pandas 面板中选择数据

> ID：11720334
> 
> 赞同：4
> 
> 时间：2012-07-30T11:13:37.477
> 
> 标签：pandas, multi-index

我有一个`DataFrame`MultiIndex，例如：

```
In [1]: arrays = [['one','one','one','two','two','two'],[1,2,3,1,2,3]]
In [2]: df = DataFrame(randn(6,2),index=MultiIndex.from_tuples(zip(*arrays)),columns=['A','B'])
In [3]: df
Out [3]:
          A         B
one 1 -2.028736 -0.466668
    2 -1.877478  0.179211
    3  0.886038  0.679528
two 1  1.101735  0.169177
    2  0.756676 -1.043739
    3  1.189944  1.342415 
```

现在我想为每一行（索引级别 0）和每一列计算元素 2 和 3（索引级别 1）的平均值。所以我需要一个看起来像的 DataFrame

```
 A                            B
one 1 mean(df['A'].ix['one'][1:3])  mean(df['B'].ix['one'][1:3])
two 1 mean(df['A'].ix['two'][1:3])  mean(df['B'].ix['two'][1:3]) 
```

如何在不使用原始数据帧的行（索引级别 0）的循环的情况下做到这一点？如果我想为面板做同样的事情怎么办？groupby 一定有一个简单的解决方案，但我还在学习它，想不出答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-12T20:42:45.830

我知道这是一个老问题，但作为参考谁搜索并找到此页面，我认为更简单的解决方案是`level`关键字 in `mean`：

```
In [4]: arrays = [['one','one','one','two','two','two'],[1,2,3,1,2,3]]

In [5]: df = pd.DataFrame(np.random.randn(6,2),index=pd.MultiIndex.from_tuples(z
ip(*arrays)),columns=['A','B'])

In [6]: df
Out[6]:
              A         B
one 1 -0.472890  2.297778
    2 -2.002773 -0.114489
    3 -1.337794 -1.464213
two 1  1.964838 -0.623666
    2  0.838388  0.229361
    3  1.735198  0.170260

In [7]: df.mean(level=0)
Out[7]:
            A         B
one -1.271152  0.239692
two  1.512808 -0.074682 
```

在这种情况下，这意味着 0 级保持在轴 0 上（行，默认值`mean`）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T13:20:59.177

您可以使用 xs 函数来选择级别。

从...开始：

```
 A         B
one 1 -2.712137 -0.131805
    2 -0.390227 -1.333230
    3  0.047128  0.438284
two 1  0.055254 -1.434262
    2  2.392265 -1.474072
    3 -1.058256 -0.572943 
```

然后，您可以使用以下方法创建一个新数据框：

```
DataFrame({'one':df.xs('one',level=0)[1:3].apply(np.mean), 'two':df.xs('two',level=0)[1:3].apply(np.mean)}).transpose() 
```

结果是：

```
 A         B
one -0.171549 -0.447473
two  0.667005 -1.023508 
```

要在不指定关卡中的项目的情况下执行相同操作，您可以使用 groupby：

```
grouped = df.groupby(level=0)
d = {}

for g in grouped:
    d[g[0]] = g[1][1:3].apply(np.mean)

DataFrame(d).transpose() 
```

我不确定面板 - 它没有很好的记录，但类似的东西应该是可能的

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T19:27:40.920

请执行下列操作：

```
# Specify the indices you want to work with.
idxs = [("one", elem) for elem in [2,3]] + [("two", elem) for elem in [2,3]]

# Compute grouped mean over only those indices.
df.ix[idxs].mean(level=0) 
```

# hibernate - 从表中获取所有名称的 HQL 查询

> ID：11720336
> 
> 赞同：2
> 
> 时间：2012-07-30T11:13:40.560
> 
> 标签：hibernate, hql

我有一个**StudentInfo**表，我需要获取表中**name**列下的所有**名称。**

 **谁能帮我在以下功能中纠正我

```
 @Override
 public List<StudentRecord> getAllStudentNames(){

        Session session = HibernateUtil.getSessionFactory().openSession();

     try {

        List<StudentRecord> smrList = new ArrayList<StudentRecord>();

            String SQL_QUERY = "select smr.studentName from StudentRecord as smr";
        Query query = session.createQuery(SQL_QUERY)  

         smrList  = query.list();

        } catch (Exception e) {
            e.printStackTrace();

        } finally {
            session.flush();
            session.close();
            HibernateUtil.getSessionFactory().close();
        }

        return smrList  
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T11:45:35.967

你想要名字，而名字是字符串，所以你不想要 a `List<StudentRecord>`，而是 a `List<String>`。

该`query.list()`方法返回一个List，因此无需创建新的ArrayList，只需将其替换为该方法返回的列表即可。

因此，您只需要以下内容（尊重 Java 命名约定）：

```
String hql = "select smr.studentName from StudentRecord as smr";
Query query = session.createQuery(hql);  
List<String> result = query.list();
return result; 
```

请注意，我将变量命名为`hql`，而不是`sql`，因为 HQL 和 SQL 不是同一种语言，而您在这里使用的是 HQL。`StudentRecord`如果类的持久属性是命名的，则上述查询将起作用`studentName`。表的名称和列的名称无关紧要，因为 HQL 使用实体进行查询，而不是表。

最后，你不应该捕获异常：它只会隐藏错误。让异常传播给调用者。

看来您缺乏基本的 Java 知识。在使用 Hibernate（一个复杂的框架）之前，我会先从简单的问题开始学习 Java。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T11:50:19.557

您的查询是正确的，您正在使用`select query and select query always return list of object array if more than one column is define in the query` `or list of a selected column type` ，因此您只需要使用您的代码执行以下操作即可正常工作。

```
List<Object[]> objList = query.list();    
return objList ; 
```

现在您将获得所有名称，迭代`objList`并将它们设置到您的 smrList

或者

```
List<String> nameList = query.list();
return nameList; 
```**

# c - 分析 ELF 部分和符号大小的工具

> ID：11720340
> 
> 赞同：39
> 
> 时间：2012-07-30T11:13:51.947
> 
> 标签：c, parsing, gcc, cross-compiling, objdump

我需要一种方法来分析 ARM 的 GCC 编译器的输出文件。我正在为裸机编译，我非常关心大小。我可以使用`arm-none-eabi-objdump`交叉编译器提供的工具，但如果存在用于此任务的工具，我不会急于解析输出。你知道这样的工具存在吗？我的搜索结果没有结果。

还有一件事，我自己代码中的每个函数都在自己的部分中。

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-07-30T11:39:41.237

您可以使用`nm`and`size`来获取函数和 ELF 部分的大小。

要获取函数的大小（以及具有静态存储持续时间的对象）：

```
$ nm --print-size --size-sort --radix=d tst.o 
```

第二列显示函数和对象的十进制大小。

要获取部分的大小：

```
$ size -A -d tst.o 
```

第二列显示部分的十进制大小。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-07-30T14:18:53.773

readelf[实用](http://linux.die.net/man/1/readelf)程序可方便地显示各种节信息，包括节大小，例如：

```
arm-none-eabi-readelf -e foo.o 
```

如果您对运行时内存占用感兴趣，可以忽略未设置“A”（分配）标志的部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-07T19:22:09.280

[`puncover`](https://github.com/HBehrens/puncover)使用`objdump`和其他一些 gcc 工具来生成 html 页面，您可以轻松浏览以找出您的代码和数据空间的去向。

它比 gcc 工具的文本输出要好得多。

# algorithm - 投票算法避免作弊

> ID：11720343
> 
> 赞同：0
> 
> 时间：2012-07-30T11:14:01.510
> 
> 标签：algorithm, vote

我想建立一个投票网站，比如 Facebook 的 +1。

是否有一些对付作弊的最佳做法？

最好的方法是使用 facebook、twitter 和/或 google 来拥有唯一用户，但我想让匿名用户投票。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T12:45:21.620

[您可以使用某种形式的工作量证明系统](http://en.wikipedia.org/wiki/Proof-of-work_system)来防范大规模的自动作弊。这将要求浏览器在投票中投入一些计算。单次投票不应该花费太长时间，但批量投票需要认真的计算工作。使用 JavaScript 进行投票也意味着任何批量投票机制都必须来自支持 JavaScript 的浏览器（或浏览器仿真），因此生成 HTTP 请求的简单脚本也会被挫败。

但是，通过这种方法，单个用户手动单击多次不会显着延迟。因此，将此要求与 IP 地址、用户代理字符串、cookie 的日志结合起来，也许还有 flash cookie。cookie 将有助于识别尝试使用一系列连接重复投票的单个拨入用户。尽管刚刚列出的措施很容易被大规模的自动作弊攻击规避，但它们应该很好地（尽管不完美）处理手动投票。所以我相信这两种解决方案应该很好地相互补充。

您可能想要阻止匿名网络，例如[tor](http://en.wikipedia.org/wiki/Tor_%28anonymity_network%29)。但是，该块应该只影响投票，因为您希望允许匿名用户查看您的网站，对吗？

您还可以考虑要求未经身份验证的用户解决[CAPTCHA](http://en.wikipedia.org/wiki/CAPTCHA)问题。根据投票的重要性以及有多少用户未经身份验证，您的用户可能会或可能不会被此措施阻止投票。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T11:26:08.767

根据我有限的经验，如果您不需要身份验证，系统很可能会以某种方式被欺骗：没有真正的防弹方法可以分辨谁是谁，除非您记录了大量与客户端有关的数据，这可能在统计上被认为是唯一的整体（但你不能用这种方法达到 100% 的确定性）。

当然，如果您预计有 10 个用户，这比处理数百万用户要容易得多。IP + 用户代理检查在第一种情况下很可能没问题，但在第二种情况下就不是很好（想到 NAT）。

最后，您必须考虑作弊的可能性，或者换句话说：您的用户是否*真的*会尝试欺骗系统，或者您可以检查很容易伪造的信息而侥幸？

# extjs - 在 extjs 网格中选中复选框时如何取消突出显示该行

> ID：11720348
> 
> 赞同：-1
> 
> 时间：2012-07-30T11:14:18.953
> 
> 标签：extjs, extjs4.1, extjs-mvc

我在 aspnet mvc3 应用程序中使用 extjs4.1 网格。我使用了 checkboxrowselection 模型。问题是：选中复选框后，该行不应在 extjs 网格中突出显示。我怎样才能做到这一点。

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T20:43:45.937

复选框选择模型的目的是选择行。在 extjs 中，选择一行意味着专门突出显示它，你想要的只是一个逻辑选择。您应该使用核心库附带的用户扩展：Ext.ux.CheckColumn。要收集行，您需要在模型属性设置为 true 的商店中查询您在 checkcolumn 上定义的数据索引。

# html - 图像堆叠为列而不是行

> ID：11720349
> 
> 赞同：0
> 
> 时间：2012-07-30T11:14:28.507
> 
> 标签：html, css

我有以下 CSS 规则：

```
.list_meta {
font-size: 10px;
line-height: 18px;
margin-bottom: -1px;
color: 
#999;
text-transform: uppercase;
display: block;
} 
```

我有一组明星图像，我想显示为`*****` 相反，它们显示为：

```
*
*
*
*
* 
```

我正在尝试的代码是：

```
<span class="list_meta">
   <span style="float:left; padding-right:10px; display: inline;">
      <img src="small_star.png" alt="Star" height="9" width="10">
      <img src="small_star.png" alt="Star" height="9" width="10">
   </span>
5 Star Rating</span> 
```

我想实现`***** 5 Star Rating` 任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T11:17:19.813

用这个

```
.list_meta img{
    float:left;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T11:16:04.217

将图像放入一个`<ul>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T11:17:13.333

就个人而言，我会使用列表而不是`<div>`'s / `<span>`'s - [http://jsfiddle.net/spacebeers/fk2zL/](http://jsfiddle.net/spacebeers/fk2zL/)

**CSS代码：**

```
li {
   float: left;
   list-style: none;
   padding-right:10px; 
} 
```

**html代码：**

```
<ul>
    <li>*</li>
    <li>*</li>
    <li>*</li>
    <li>*</li>
    <li>*</li>
</ul> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T11:17:50.077

在每个图像上应用这些`style="float:left; padding-right:10px; display: inline;"`样式，而不是使用它`span`

**CSS：**

```
span img {float:left; padding-right:10px; display: inline;}​ 
```

**HTML：**

```
<span class="list_meta">
   <span>
      <img src="http://cdn1.iconfinder.com/data/icons/diagona/icon/16/031.png" alt="Star" height="9" width="10">
      <img src="http://cdn1.iconfinder.com/data/icons/diagona/icon/16/031.png" alt="Star" height="9" width="10">
   </span>
5 Star Rating
</span>​ 
```

[**见小提琴**](http://jsfiddle.net/akhurshid/h6qCF/)

# javascript - 在特定类或 div 上获得弹跳效果的棘手问题

> ID：11720353
> 
> 赞同：-1
> 
> 时间：2012-07-30T11:14:44.117
> 
> 标签：javascript, jquery, html, css

我需要帮助，因为我正试图让我的左控制弹跳。

在我的网站上，我有一个音乐播放器，它链接到两个控件，上一个和下一个。我希望两个控件在用户单击它时弹跳。现在我将 Jquery 和 Jquery Yui 应用到了网站上，还有一个简单的 javascript 函数似乎可以工作，但是当我指定控件时不知何故。

这是代码：

```
$(function(){

    //Add bounce effect on Click of the DIV
    $('.jp-prev').click(function () {
          $(this).effect("bounce", { times:5 }, 300);
    });

    $('#bouncy2').click(function () {
          $(this).effect("bounce", { direction:'left', times:5 }, 300);
    });

    $('#bouncy3').click(function () {
          $(this).effect("bounce", { direction:'right', times:5 }, 300);
    });

    $('#bouncy4').click(function () {
          $(this).effect("bounce", { direction:'down', times:5 }, 300);
    });

    //Bounce all DIVs on click of button
    $("#bounceAll").click(function(){
        $("div").click();
    });
}); 
```

html:

```
<div class="jp-audio">
    <div class="jp-type-single">
        <div id="jp_interface_1" class="jp-interface">
    .       <ul class="jp-controls">
                   <li><a href="#" class="jp-play"></a></li>
                   <li><a href="#" class="jp-pause"></a></li>
                          <li><a href="#" class="jp-prev"></a></li>
                <li><a href="#" class="jp-next"></a></li>
                <li><a href="audio_samples.php" class="jp-more-songs">Listen to more Audio Samples</a></li>
            </ul>
            <div class="jp-progress">
                 <div class="jp-seek-bar">
                 <div class="jp-play-bar"></div>
                  </div>
             </div>
             <div class="jp-title"></div>
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-08T20:28:43.350

将 jquery 放在您的代码之前，它可能会起作用

# python - python 2.3 如何运行管道命令

> ID：11720354
> 
> 赞同：0
> 
> 时间：2012-07-30T11:14:49.607
> 
> 标签：python, python-2.3

我想运行这样的命令

```
grep -w 1 pattern <(tail -f mylogfile.log) 
```

基本上从python脚本我想监视特定字符串的日志文件，并在我发现后立即继续使用python脚本。
我正在使用`os.system()`，但那是挂起的。bash 中的相同命令效果很好。

我有一个非常旧版本的 python (v2.3)，所以没有子流程模块。

我们有办法实现这个吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T11:24:56.063

在 Python 2.3 中，需要使用[`subprocess`from SVN](http://svn.python.org/view/%2acheckout%2a/python/tags/r255/Lib/subprocess.py)

```
import subprocess
import shlex
subprocess.call(shlex.split("/bin/bash -c 'grep -w 1 pattern <(tail -f mylogfile.log)'")) 
```

明确地说，您需要从上面的 SVN 链接安装它。

`/bin/bash -c`由于您使用的 shell 重定向，您需要调用它

* * *

**编辑**

如果你想用 解决这个问题`os.system()`，只需将命令包装进去，`/bin/bash -c`因为你使用的是 shell 重定向......

```
os.system("/bin/bash -c 'grep -w 1 pattern <(tail -f mylogfile.log)'") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T11:24:43.787

首先，我认为你应该使用的命令是`grep -w -m 1 'pattern' <(tail -f in)`

要在 python 中执行命令，请使用子进程模块中的 Popen 构造函数。[在http://docs.python.org/library/subprocess.html](http://docs.python.org/library/subprocess.html)阅读更多内容

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-30T11:23:48.373

如果我理解正确，您想像这样将输出发送到 python -

```
tail -f mylogfile.log | grep -w 1 pattern | python yourscript.py 
```

即，读取日志文件的所有更新，并将匹配的行发送到您的脚本。

要从标准输入中读取，您可以使用类似文件的对象：sys.stdin。

所以你的脚本看起来像

```
import sys

for line in sys.stdin.readlines():
    #process each line here. 
```

# c++ - C ++我如何检查我是否与某个站点建立了活动连接

> ID：11720356
> 
> 赞同：0
> 
> 时间：2012-07-30T11:14:59.217
> 
> 标签：c++

C ++我如何检查我是否与某个站点建立了活动连接

基本上我的迷你项目需要连接到网站 somesite.com

我想在启动我的应用程序时进行测试，看看我是否可以从 somesite.com 获取数据，如果 fetch.fail()，它将回显无法建立与 somesite.com 的连接

我怎样才能做到这一点。

感谢所有的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T11:20:40.937

C++ 在标准库中没有网络支持。所以你应该使用so第三方库来做到这一点。或者您可以通过操作系统函数调用来实现。

我认为最简单的方法是使用[libcurl](http://curl.haxx.se/libcurl/)。 [有](http://curl.haxx.se/libcurl/c/simple.html)你需要的例子。

# c++ - 虚拟机/解释器的性能提升策略？

> ID：11720357
> 
> 赞同：3
> 
> 时间：2012-07-30T11:15:03.810
> 
> 标签：c++, c, performance, interpreter, vm-implementation

我用 C 编写了一个简单的 VM，使用简单的指令切换，没有任何指令解码，但性能很糟糕。

对于简单的算术运算，对于相同的操作，VM 比本地 C 代码慢大约 4000 倍。我测试了一组长度为 1000 万的数组，第一个由程序指令组成，随机 + - * / 操作，2 个保存随机整数的数组，第三个数组是操作目标存储。

我原以为算术性能会下降 3-4 倍，所以 `4000x 真的让我大吃一惊。即使是最慢的解释语言似乎也能提供更高的性能。那么我的方法哪里出了问题，如何在不将 JIT 编译为机器代码的情况下提高性能？

实现是......基本上是我能想到的最简单的：

```
begin:
    {
        switch (*(op+(c++)))
        {
        case 0:
            add(in1+c, in2+c, out+c); goto begin;

        case 1:
            sub(in1+c, in2+c, out+c); goto begin;

        case 2:
            mul(in1+c, in2+c, out+c); goto begin;

        case 3:
            div(in1+c, in2+c, out+c); goto begin;

        case 4:
            cout << "end of program" << endl;
            goto end;

        default:
            cout << "ERROR!!!" << endl;

        }
    }

end: 
```

更新：当我注意到我用来分析的 QElapsedTimer 实际上被破坏时，我正在玩弄程序的长度。现在我正在使用 clock() 函数，根据它计算出的 goto 实际上与本机代码运行相当，可能会低一点。这个结果合法吗？？？这是完整的源代码（我知道它很丑，毕竟它只是为了测试）：

```
#include <QtGlobal>
#include <iostream>
#include <stdio.h>
#include <ctime>

using namespace std;

#define LENGTH 70000000

void add(int & a, int & b, int & r) {r = a * b;}
void sub(int & a, int & b, int & r) {r = a - b;}
void mul(int & a, int & b, int & r) {r = a * b;}
void div(int & a, int & b, int & r) {r = a / b;}

int main()
{
    char * op = new char[LENGTH];
    int * in1 = new int[LENGTH];
    int * in2 = new int[LENGTH];
    int * out = new int[LENGTH];

    for (int i = 0; i < LENGTH; ++i)
    {
        *(op+i) = i % 4;
        *(in1+i) = qrand();
        *(in2+i) = qrand()+1;
    }

    *(op+LENGTH-1) = 4; // end of program

    long long  sClock, fClock;

    unsigned int c = 0;
    sClock = clock();

    cout << "Program begins" << endl;

    static void* table[] = {
        &&do_add,
        &&do_sub,
        &&do_mul,
        &&do_div,
        &&do_end,
        &&do_err,
        &&do_fin};

#define jump() goto *table[op[c++]]

    jump();
do_add:
    add(in1[c], in2[c], out[c]); jump();
do_sub:
    sub(in1[c], in2[c], out[c]); jump();
do_mul:
    mul(in1[c], in2[c], out[c]); jump();
do_div:
    div(in1[c], in2[c], out[c]); jump();
do_end:
    cout << "end of program" << endl; goto *table[6];
do_err:
    cout << "ERROR!!!" << endl; goto *table[6];
do_fin:

    fClock = clock();
    cout << fClock - sClock << endl;

    delete [] op;
    delete [] in1;
    delete [] in2;
    delete [] out;

    in1 = new int[LENGTH];
    in2 = new int[LENGTH];
    out = new int[LENGTH];

    for (int i = 0; i < LENGTH; ++i)
    {
        *(in1+i) = qrand();
        *(in2+i) = qrand()+1;
    }

    cout << "Native begins" << endl;

    sClock = clock();

    for (int i = 0; i < LENGTH; i += 4)
    {

        *(out+i) = *(in1+i) + *(in2+i);
        *(out+i+1) = *(in1+i+1) - *(in2+i+1);
        *(out+i+2) = *(in1+i+2) * *(in2+i+2);
        *(out+i+3) = *(in1+i+3) / *(in2+i+3);
    }

    fClock = clock();
    cout << fClock - sClock << endl;

    delete [] in1;
    delete [] in2;
    delete [] out;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T12:41:16.747

Darek Mihocka 有一篇关于在便携式 C 中创建快速解释器的优秀而深入的文章：[http ://www.emulators.com/docs/nx25_nostradamus.htm](http://www.emulators.com/docs/nx25_nostradamus.htm)

# mysql - Mysql 语句选择以特定字符范围开头的名称

> ID：11720361
> 
> 赞同：0
> 
> 时间：2012-07-30T11:15:12.447
> 
> 标签：mysql, regex

我正在编写以下语句来选择以一系列字符开头的名称。

```
select name from db.table where name like '[c-e]%'; 
```

该声明没有给我任何回报。但是当我将其更改为：

```
select name from db.table where name like 'c%'; 
```

它返回记录。

问题是什么 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T11:19:00.093

而不是`LIKE`使用`REGEXP`

```
select name from db.table where name REGEXP '[c-e].+'; 
```

请参阅[MySQL 模式匹配](http://dev.mysql.com/doc/refman/5.0/en/pattern-matching.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T11:35:20.540

@juergen d 是对的，但是需要进行一些更改，因为您想检查从范围 [cd] 开始的所有名称，所以

```
select name from db.table where name REGEXP '^[c-e].+'; 
```

“^”表示开始时匹配必须匹配范围[ce]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T11:18:52.773

您应该`REGEXP`用作：

```
SELECT name FROM db.table where name REGEXP '[c-e].+'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T11:30:48.917

正如其他人所说，您可以使用`REGEXP`; 但是当你想要*一系列*起始字符时，你也可以这样做：

```
SELECT name FROM db.table WHERE name >= 'c' AND name < 'f'; 
```

这可能会更快，因为它可以利用`name`字段中的索引来避免完全扫描。

# ios - Masking a CALayer with another CALayer

> ID：11720362
> 
> 赞同：16
> 
> 时间：2012-07-30T11:15:13.853
> 
> 标签：ios, uiview, core-animation, calayer

I'm trying to make a donut shape with CALayers. One CALayer will be a large circle, the other one will be a smaller circle positioned in its center, masking it.

The large circle displays fine, but whenever I call `circle.mask = circleMask;` then the view appears empty.

Here's my code:

**AriDonut.h**

```
#import <UIKit/UIKit.h>

@interface AriDonut : UIView
-(id)initWithRadius:(float)radius;
@end 
```

**AriDonut.m**

```
#import "AriDonut.h"
#import <QuartzCore/QuartzCore.h>

@implementation AriDonut

-(id)initWithRadius:(float)radius{
    self = [super initWithFrame:CGRectMake(0, 0, radius, radius)];
    if(self){

        //LARGE CIRCLE
        CALayer *circle = [CALayer layer];
        circle.bounds = CGRectMake(0, 0, radius, radius);
        circle.backgroundColor = [UIColor redColor].CGColor;
        circle.cornerRadius = radius/2;
        circle.position = CGPointMake(radius/2, radius/2);

        //SMALL CIRLCE
        CALayer *circleMask = [CALayer layer];
        circleMask.bounds = CGRectMake(0, 0, 10, 10);
        circleMask.cornerRadius = radius/2;
        circleMask.position = circle.position;

        //circle.mask = circleMask;

        [self.layer addSublayer:circle];

    }

    return self;
} 
```

I've tried setting the large circle's superlayer nil like this:

```
CALayer *theSuper = circle.superlayer;
theSuper = nil; 
```

But it didin't make a difference.

I also tried setting Circle's `masksToBounds` property to YES and NO, but it didn't make a difference.

Any thoughts?

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-07-31T15:44:58.470

实际上，正如@David 指出的当前（iOS 5.1）CALayer 蒙版无法反转，如果您想使用它们将透明孔制作成简单的圆形 CALayer，这会带来问题。

获得甜甜圈的方法是使圆形 CALayer`backgroundColor`透明，但给它 a`borderColor`和 wide `borderWidth`。这是邓肯的代码：

```
 CALayer *theDonut = [CALayer layer];
    theDonut.bounds = CGRectMake(0,0, radius, radius);
    theDonut.cornerRadius = radius/2;
    theDonut.backgroundColor = [UIColor clearColor].CGColor;

    theDonut.borderWidth = radius/5;
    theDonut.borderColor = [UIColor orangeColor].CGColor;

    [self.layer addSublayer:theDonut]; 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-12-06T03:56:41.720

使用 UIBezierPath 和 CAShapeLayer 作为遮罩层非常容易。就像在 UIView 子类中一样编写的代码示例。

目标-C：

```
CGRect outerRect = self.bounds;
CGFloat inset = 0.2 * outerRect.size.width; // adjust as necessary for more or less meaty donuts
CGFloat innerDiameter = outerRect.size.width - 2.0 * inset;
CGRect innerRect = CGRectMake(inset, inset, innerDiameter, innerDiameter);
UIBezierPath *outerCircle = [UIBezierPath bezierPathWithRoundedRect:outerRect cornerRadius:outerRect.size.width * 0.5];
UIBezierPath *innerCircle = [UIBezierPath bezierPathWithRoundedRect:innerRect cornerRadius:innerRect.size.width * 0.5];
[outerCircle appendPath:innerCircle];
CAShapeLayer *maskLayer = [CAShapeLayer new];
maskLayer.fillRule = kCAFillRuleEvenOdd; // Going from the outside of the layer, each time a path is crossed, add one. Each time the count is odd, we are "inside" the path.
maskLayer.path = outerCircle.CGPath;
self.layer.mask = maskLayer; 
```

迅速：

```
let outerRect = self.bounds
let inset: CGFloat = 0.2 * outerRect.width // adjust as necessary for more or less meaty donuts
let innerDiameter = outerRect.width - 2.0 * inset
let innerRect = CGRect(x: inset, y: inset, width: innerDiameter, height: innerDiameter)
let outerCircle = UIBezierPath(roundedRect: outerRect, cornerRadius: outerRect.width * 0.5)
let innerCircle = UIBezierPath(roundedRect: innerRect, cornerRadius: innerRect.width * 0.5)
outerCircle.appendPath(innerCircle)
let mask = CAShapeLayer()
mask.fillRule = kCAFillRuleEvenOdd
mask.path = outerCircle.CGPath
self.layer.mask = mask 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-30T11:21:20.053

它是用作遮罩的遮罩层内容的 alpha 值。（如果您将蒙版添加为子图层而不是将其用作蒙版。当用作蒙版时，子图层覆盖的所有内容都将可见。当用作蒙版时，子图层未覆盖的所有内容都将隐藏.)

由于你的小圆圈是完全透明的，所以一切都被掩盖了（被隐藏了）。如果将`backgroundColor`其设置为任何完全不透明的颜色（仅 alpha 值用于遮罩），那么它将让这些像素通过。

请注意，这与您想要的相反。这将使您只看到“甜甜圈的洞”。没有内置的方法来做一个反向掩码相反，你必须以其他方式绘制掩码的内容，比如使用 a`CAShapeLayer`或 using `drawInContext:`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-08T14:25:50.443

我成功`CAShapeLayer`屏蔽了一个`CALayer`. `CAShapeLayer`要指定我使用的遮罩的形状`UIBezierPath`。

我在对这个问题的回答中发布了代码：[如何获取 UIBezierPath 的反向路径](https://stackoverflow.com/questions/11191353/how-to-get-the-reverse-path-of-a-uibezierpath/15271118#15271118)。对于甜甜圈形状，取消注释注释行。

# openstreetmap - How to use download openstreetmap file to serve a local map app?

> ID：11720363
> 
> 赞同：1
> 
> 时间：2012-07-30T11:15:13.647
> 
> 标签：openstreetmap

I have download a partial area data file (OSM format) to local. I have a local server which not connect to internet. So I want to build a local map app only with local OSM file (I use OpenLayer js).

I searched openstreetmap.org wiki, but find no solution.

Is there any way or documentaton to solve this?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T16:29:53.127

“本地”是指机器上的本地还是本地 Web 服务器？

首先，您需要生成地图图块。然后准备地图 HTML，包括 OpenLayers 代码。磁贴 URL 应该指向你的磁贴（如果是本地计算机，只需对 URL 使用“file://”协议）。

这是生成图块的一种方法（您可以跳过一些步骤）：[http ://braincrunch.tumblr.com/post/9921938947/maperitive-tutorial-a-hiking-web-map-in-ten-easy-脚步](http://braincrunch.tumblr.com/post/9921938947/maperitive-tutorial-a-hiking-web-map-in-ten-easy-steps)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T10:06:43.033

1）我必须创建一个连接到本地下载的openstreet地图的API并执行以下操作：2）给定GPS位置，在地图上显示位置。3) 能够显示到该位置的路线并在个人移动时进行更新。

数字 2) 和 3) 还不是我的问题。1）是我现在的问题。我什至不知道从哪里开始。我一直在寻找，但仍然没有看到任何我能理解的东西。

我想知道的是：在哪里下载我可以在本地使用的 OSM？关于连接到本地地图并能够显示它（并且可能能够放大、缩小）的 API 的示例或教程？

API 可以是 java、c# 或 c++。但任何其他语言都是受欢迎的，因为我别无选择。

# java - "Incompatible data types in combination" leading to "Could not initialize a collection" in JPA with an inherited bidirectional relation

> ID：11720368
> 
> 赞同：5
> 
> 时间：2012-07-30T11:15:25.333
> 
> 标签：java, hibernate, inheritance, jpa

I am trying to implement the following diagram in Hibernate, JPA.

![enter image description here](../Images/65efb09a1af4f57a85cd0a03569492c4.png)

I tried to implement it this way.

For the farm

```
@Entity
public class Farm implements Serializable{

    @OneToMany(mappedBy = "farm", cascade = { CascadeType.ALL }, targetEntity=AbstractAnimals.class, fetch=FetchType.LAZY)
    private List<AbstractAnimal> animals = new ArrayList<AbstractAnimals>();

} 
```

For the Abstract Annimal

```
@Entity
@Inheritance(strategy = InheritanceType.TABLE_PER_CLASS)
public abstract class AbstractAnimal implements Serializable{
    @Id
    private int id;

    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "farmId", nullable = false)
    private Farm farm;

    ... other attributes and getter and setter
} 
```

For the Abstract Mammalian

```
@MappedSuperClass
public abstract class AbstractMammalian extends AbstractAnimal implements Serializable{
    ... other attributes and getter and setter
} 
```

For all the annimals

```
@Entity
public abstract class 'Animal' extends 'supertype' implements Serializable{

    ... other attributes and getter and setter
} 
```

When I tried to get all the farm animals I get the following error

```
org.hibernate.exception.SQLGrammarException: could not initialize a collection: [my.example.Farm.animals#24]
    at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:92)
    at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:66)
    at org.hibernate.loader.Loader.loadCollection(Loader.java:2173)
    at org.hibernate.loader.collection.CollectionLoader.initialize(CollectionLoader.java:62)
    at org.hibernate.persister.collection.AbstractCollectionPersister.initialize(AbstractCollectionPersister.java:627)
    at org.hibernate.event.def.DefaultInitializeCollectionEventListener.onInitializeCollection(DefaultInitializeCollectionEventListener.java:83)
    at org.hibernate.impl.SessionImpl.initializeCollection(SessionImpl.java:1863)
    at org.hibernate.collection.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:369)
    at org.hibernate.collection.AbstractPersistentCollection.read(AbstractPersistentCollection.java:111)
    at org.hibernate.collection.PersistentBag.iterator(PersistentBag.java:272)
    at my.example.persistence.Farm.getAnnimals(Farm.java:132)
    at my.example.DTOFactory.updateFarmDTO(DTOFactory.java:269)
    at my.example.DTOFactory.createFarmDTO(DTOFactory.java:250)
    at my.example.DTOFactory.createChickenDTO(DTOFactory.java:183)
    at my.example.ChickenServiceImpl.createChicken(ChickenServiceImpl.java:62)
    at my.example.ChickenServiceTest.createChickenWithHome(ChickenServiceTest.java:243)
    at my.example.ChickenServiceTest.testRejectChickenHome(ChickenServiceTest.java:186)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)
    at org.junit.runners.BlockJUnit4ClassRunner.runNotIgnored(BlockJUnit4ClassRunner.java:79)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:71)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: java.sql.SQLSyntaxErrorException: incompatible data types in combination
    at org.hsqldb.jdbc.Util.sqlException(Unknown Source)
    at org.hsqldb.jdbc.Util.sqlException(Unknown Source)
    at org.hsqldb.jdbc.JDBCPreparedStatement.<init>(Unknown Source)
    at org.hsqldb.jdbc.JDBCConnection.prepareStatement(Unknown Source)
    at org.hibernate.jdbc.AbstractBatcher.getPreparedStatement(AbstractBatcher.java:534)
    at org.hibernate.jdbc.AbstractBatcher.getPreparedStatement(AbstractBatcher.java:452)
    at org.hibernate.jdbc.AbstractBatcher.prepareQueryStatement(AbstractBatcher.java:161)
    at org.hibernate.loader.Loader.prepareQueryStatement(Loader.java:1700)
    at org.hibernate.loader.Loader.doQuery(Loader.java:801)
    at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:274)
    at org.hibernate.loader.Loader.loadCollection(Loader.java:2166)
    ... 40 more
Caused by: org.hsqldb.HsqlException: incompatible data types in combination
    at org.hsqldb.error.Error.error(Unknown Source)
    at org.hsqldb.error.Error.error(Unknown Source)
    at org.hsqldb.types.BitType.getAggregateType(Unknown Source)
    at org.hsqldb.types.Type.getAggregateType(Unknown Source)
    at org.hsqldb.QuerySpecification.resolveTypesPartOne(Unknown Source)
    at org.hsqldb.QueryExpression.resolveTypesPartOne(Unknown Source)
    at org.hsqldb.QueryExpression.resolveTypes(Unknown Source)
    at org.hsqldb.ParserDQL.XreadTableSubqueryOrNull(Unknown Source)
    at org.hsqldb.ParserDQL.readTableOrSubquery(Unknown Source)
    at org.hsqldb.ParserDQL.XreadTableReference(Unknown Source)
    at org.hsqldb.ParserDQL.XreadFromClause(Unknown Source)
    at org.hsqldb.ParserDQL.XreadTableExpression(Unknown Source)
    at org.hsqldb.ParserDQL.XreadQuerySpecification(Unknown Source)
    at org.hsqldb.ParserDQL.XreadSimpleTable(Unknown Source)
    at org.hsqldb.ParserDQL.XreadQueryPrimary(Unknown Source)
    at org.hsqldb.ParserDQL.XreadQueryTerm(Unknown Source)
    at org.hsqldb.ParserDQL.XreadQueryExpressionBody(Unknown Source)
    at org.hsqldb.ParserDQL.XreadQueryExpression(Unknown Source)
    at org.hsqldb.ParserDQL.compileCursorSpecification(Unknown Source)
    at org.hsqldb.ParserCommand.compilePart(Unknown Source)
    at org.hsqldb.ParserCommand.compileStatement(Unknown Source)
    at org.hsqldb.Session.compileStatement(Unknown Source)
    at org.hsqldb.StatementManager.compile(Unknown Source)
    at org.hsqldb.Session.execute(Unknown Source)
    ... 49 more 
```

**Edit**

```
EntityManager manager = null;
EntityTransaction tx = null;
TaskDTO result = null;

try {
    manager = PersistenceUtils.getEntityManager();
    try
    {
       tx = manager.getTransaction();
       tx.begin();
       Farm farm = manager.find(Farm.class, 
       Farmer farmer = manager.find(farmer.class, farmerDtoID);
       int status = AnimalService.IDLE;

       if (birth.before(new Date())){
           status = TaskService.UNBORN;
       }
       Chicken newChicken = new Chicken(name, farm, user, birth, death, status);
       manager.persist(newChicken);
       tx.commit();
       result = DTOFactory.createChickenDTO(newChicken, true);
   }
   finally
   {
       if (tx.isActive())
       {
           tx.rollback();
       }
   }
}
finally
{
    if (manager != null)
    {
        manager.close();
    }
 }
 return result; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T23:20:21.133

我不知道你做错了什么。您只是没有向我们展示足够的代码来检测问题。

以下是如何正确执行此操作：

*   [https://bitbucket.org/twic/farm/src](https://bitbucket.org/twic/farm/src)

那是相同对象模型的实现，但工作正常。有一个 Gradle 脚本将生成并应用相关的 SQL；然后您可以运行 Main 类来插入和查询一些数据，包括调用`Farm.getAnimals()`.

我的代码和你的代码有一些不同。我的更简单；我省略了各种不必要的东西，例如指定列名、明确说明集合是惰性的、使实体类可序列化等。我还选择注释`AbstractMammal`为`@Entity`，而不是`@MappedSuperclass`. 我没有理由不这样做。我尝试了两种方式，两种方式都有效。

因此，无论对您来说是什么问题，这都是您的代码和我的代码之间的差异。这可能是您的 JPA 实现中的错误。它更有可能是您的注释中的错误。我建议你克隆我的代码，让它运行，然后开始一点一点地修改它，让它更像你的代码，看看它什么时候坏了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T10:28:59.357

好的，感谢汤姆安德森，我设法解决了我的问题。解决方案是使用 Hibernate 4.1 而不是 3.6，并将持久性助手中的方法从更改`'Session'.connection()` 为

```
'Session'.doWork(new Work() {
    @Override
    public void execute(Connection c) throws SQLException {

    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T12:07:01.363

我在这里使用的是相同的，但有一些不同。
还要检查这些事情： 1\. 在您的班级

中将 Fetch Type of farm 设置为 EAGER 。`AbstractAnimal`

```
@ManyToOne(fetch = FetchType.EAGER)
@JoinColumn(name = "farmId", nullable = false)
private Farm farm; 
```

2\. 将此注释放在您的 getter 上方。`@XmlTransient`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T12:00:11.943

**免责声明：**这只是一个猜测。

尽量不要强制收集初始化。像这样的东西：

```
@Entity
public class Farm implements Serializable{

    @OneToMany(mappedBy = "farm", cascade = { CascadeType.ALL }, targetEntity=AbstractAnimals.class, fetch=FetchType.LAZY)
    private List<AbstractAnimal> animals;

} 
```

# html - How populate select box in edit page using rails?

> ID：11720371
> 
> 赞同：1
> 
> 时间：2012-07-30T11:15:32.993
> 
> 标签：html, ruby-on-rails, ruby, erb

I have this in my form:

```
<%= f.select :status, options_for_select(Article::STATUS), :include_blank => true, :selected => @article.status, :class => 'select_field' %> 
```

Model:

```
class Article < ActiveRecord::Base
  attr_accessible :author, :content, :publication_date, :status, :title, :tag_tokens
  attr_reader :tag_tokens

  STATUS = ['Rascunho', 'Em Revisão', 'Publicado']

end 
```

Why does not populate the field?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T11:32:12.223

我相信您可以简单地将数组传入`[#select][1]`. 您不需要调用选项来收集。如果这是一个模型表单，我也认为你可以省略该`:selected`选项，Rails 将使用属性值来计算它。

尝试这个：

```
<%= f.select :status, Article::STATUS, :include_blank => true, :class => 'select_field' %> 
```

# javascript - 无法在 Jquery mobile 中自定义单选按钮

> ID：11720375
> 
> 赞同：1
> 
> 时间：2012-07-30T11:15:40.483
> 
> 标签：javascript, jquery, jquery-mobile

我在这里有一个小提琴[http://jsfiddle.net/coderslay/ZYKxc/2/](http://jsfiddle.net/coderslay/ZYKxc/2/)

在此我需要将详细信息按钮放在右侧。但我不能把它放在右边。怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T11:54:40.573

如果您想强制样式，您可以将两个元素分开并浮动它们。

```
<label for="radio-choice-1">
    <div style="float: left; margin-top: 10px;">Cat</div>
    <div style="float: right;">
        <a href="index.html" data-role="button" class="ui-btn-right" data-inline="true">Details</a>
    </div>
</label> 
```

[http://jsfiddle.net/d3NuT/](http://jsfiddle.net/d3NuT/)

# javascript - IE9 security error when reading from canvas (non cross-domain)

> ID：11720380
> 
> 赞同：5
> 
> 时间：2012-07-30T11:15:57.343
> 
> 标签：javascript, html, security, canvas, internet-explorer-9

I'm playing a video in a `video` tag. The video file is in the same directory as the index.html. I am then putting the video pixels on a `canvas`, doing some logic on them, reading them and putting on another `canvas`. All this works fine in firefox and chrome, but not in IE9\. IE gives a security error when I'm trying to read the pixels from canvas. Which would be understandable if the video originated from some other domain, but it doesn't. What is even more curious, the error occurs when I put the relevant code in setTimeout or trigger it from the console, but not when it is called directly in the script. Here's the relevant javascript:

```
$(document).ready(function(){
fun = function(){
    var main= $("#main");
    var video = $('<video autoplay="autoplay">
                <source src="orange.mp4" type="video/mp4" />
                <source src="orange.ogv" type="video/ogg" /></video>');
    video.css({"width" : 100, "height" : 200});
    var canvas1 = $('<canvas></canvas>');
    canvas1.css({"position" : "relative", "top" :0, 
                "width" : 100, "height" : 200, "background-color":"red"});
    canvas1.attr({"width" : 100, "height" : 200});
    var context1=canvas1[0].getContext("2d");

    var canvas2 = $('<canvas></canvas>');
    canvas2.css({"position" : "relative", "top" :0, 
                 "width" : 100, "height" : 200, "background-color":"purple", 
                 "margin" : "5px"});
    canvas2.attr({"width" : 100, "height" : 200});
    var context2=canvas2[0].getContext("2d");

    main.append(video);
    main.append(canvas1);
    main.append(canvas2);

    var drawFrame = function(){
            context1.drawImage(video[0],0,0,100,200);
            var data = context1.getImageData(0,0,100,200);
            context2.putImageData(data, 0, 0);
            setTimeout(drawFrame, 50);
    }

    drawFrame();
}
fun();                  // <--- this one works
var wurst = setTimeout(fun,50);     // <--- this one doesn't
}); 
```

What is happening here, and what can be done to get around it?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T00:19:07.230

嗯..这似乎很奇怪！您是否尝试过使用 requestAnimationFrame 而不是 setTimeout？

```
// Polyfill for HTML5's requestAnimationFrame API.
window.requestAnimFrame = (function(){
  return  window.requestAnimationFrame       || 
          window.webkitRequestAnimationFrame || 
          window.mozRequestAnimationFrame    || 
          window.oRequestAnimationFrame      || 
          window.msRequestAnimationFrame     || 
          function( callback ){
            window.setTimeout(callback, 1000 / 60);
          };
})();

requestAnimFrame(fun); 
```

# .htaccess - htaccess 重定向从 url 中删除类别 slug

> ID：11720386
> 
> 赞同：0
> 
> 时间：2012-07-30T11:16:26.597
> 
> 标签：.htaccess, redirect

在 apache 服务器中使用 .htaccess 文件，我怎样才能得到

```
http://mysite/[category]/[post-title] 
```

重定向到

```
http://mysite/[post-title] 
```

其中 [category] ​​和 [post-title] 可以分别是任何类别名称和帖子标题。

请帮忙。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T14:18:44.973

尝试：

```
RedirectMatch 301 ^/[^/]+/([^/]+)/?$ /$1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-10T14:25:58.947

如果您使用的是 wordpress，我推荐该插件

[WP 无类别库](http://wordpress.org/plugins/wp-no-category-base/)

它对我的博客很有吸引力

# asp.net-mvc - asp.net mvc does not receive the GET request with a period in it

> ID：11720387
> 
> 赞同：9
> 
> 时间：2012-07-30T11:16:28.470
> 
> 标签：asp.net-mvc, iis, iis-7.5, asp.net-mvc-routing, asp.net-web-api

I'm using .net4.5rc with MVC4.0rc

The code below is taken from a MVC webapi application but I the same behaviour is there for reular asp.net mvc

My registerroutes code looks like this

```
 routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

            routes.MapHttpRoute(
                name: "R1",
                routeTemplate: "product/{id}",
                defaults: new { 
                                controller="Product",
                                id = RouteParameter.Optional 

                              }
            ); 
```

This works well with Ids that doesn't have a period in them. However when I ask for a product with a period in it, the call does not seem to get to ASP.NET

when I use the setting below as suggested on similar posts it works when there is a trailing / But it doesn't work without it

in summary

```
http://mysite.com/product/AZ0     //works
http://mysite.com/product/AZ.0/   //work with relaxedUrlToFileSystemMapping
http://mysite.com/product/AZ.0    //does not work 
```

The response is 404 and I guess this is returned by IIS without involving ASP.NET. When I run routedebugger with a URL like the last one above, I don't even get the routedebugger stuff

How do I make IIS to pass the control to ASP.NET when there is a URL with a pattern: mysite.com/product/{id} regardless of whether there is a period in the id or not.

thanks.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-31T09:25:34.167

让我自己回答这个问题。添加 URL 重写解决了这个问题。下面添加到 web.config 中的代码告诉如果 URL 的格式为 (product/ )，则用结尾的“/”重写 Url *。*然后它不再作为文件处理，而是作为常规 MVC 处理。

```
 <system.webServer>
   ....   
    <rewrite>
      <rules>
        <rule name="Add trailing slash" stopProcessing="true">
          <match url="(product/.*\..*[^/])$" />
          <action type="Rewrite" url="{R:1}/" />
        </rule>
      </rules>
    </rewrite>
  </system.webServer> 
```

# powershell - Powershell 远程处理错误 - 找不到网络路径

> ID：11720392
> 
> 赞同：8
> 
> 时间：2012-07-30T11:16:42.247
> 
> 标签：powershell, powershell-remoting

我无法使用`enter-pssession -computername serverA`. 我的场景：

*   我在同一个域中有 2 台 Win 2003 R2 服务器。ServerA 是 WSUS 服务器，serverB 是域控制器
*   两台服务器都启用了 powershell 远程处理
*   两台服务器都配置了 winrm ( `winrm quickconfig`)
*   两台服务器都将 TrustedHosts 设置为 *
*   setspn.exe 设置正确（http、https、wsman 等）
*   两台服务器都关闭了防火墙
*   两台服务器都有 PowerShell 2.0

我试图`enter-pssession -computername serverA`在从 serverB 到 serverA 的域管理员凭据下，它会引发以下错误：

"""Enter-PSSession : 与远程服务器的连接失败，并显示以下错误消息：WinRM 无法处理请求。使用 Kerberos 身份验证时出现以下错误：找不到网络路径。"""

当我尝试使用`enter-pssession -computername serverB`serverA 的域管理员凭据时，它工作正常！如果我使用 localhost，它也可以工作：`enter-pssession -computername localhost`在域管理员凭据下（在 serverA 上）也可以工作，但是当我在 serverA 上尝试主机名（而不是 localhost）`enter-pssession -computername serverA`时，它会引发相同的错误。

我还尝试使用`get-credential`和提供不同类型的凭据，但没有帮助。唯一有帮助的是使用本地（非域）管理员帐户并运行`enter-pssession -computername serverA -credentials $cred`它并且它工作，但仅在本地，我能够从本地机器（从服务器A到它自己）而不是从服务器B到服务器A下的服务器A \管理员凭据。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T12:55:09.617

首先，我使用我的域管理员帐户创建了凭据变量：

`$cred = get-credential`- 我输入了我的域\用户名和密码

然后我在 -ComputerName 参数中使用 IP 地址而不是主机名，所以 enter-pssession 看起来像：

`Enter-Pssession -ComputerName 192.168.1.111 -Credential $cred`

这种方法也适用于调用命令

`invoke-command -ComputerName 192.168.1.111 -Credential $cred -ScriptBlock {hostname}`

我仍然不知道为什么它不适用于主机名以及为什么我必须创建 $cred，但由于我需要一个快速的解决方案，这对我来说很好。

感谢帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-29T19:35:37.493

**我有完全相同的问题。使用*FQDN*对我有用。**

克里斯 N 是对的：

```
The network path was not found. 
```

这显然是 DNS 解析错误；特别是如果 IP 地址正常工作。我敢说存在名称后缀路由问题。

[ComputerName 描述](http://technet.microsoft.com/en-us/library/hh849719.aspx)说*NETBIOS 名称*应该可以工作，但它在我的环境中的测试中不起作用。FQDN 是*-ComputerName*属性的另一个选项，它为我修复了这个错误。

尝试使用（当然使用您的 FQDN）：

```
Invoke-Command -ComputerName servera.vertigion.com 
```

**注意：** *请注意它是全小写的。* 使用骆驼案例（serverA.vertigion.com）失败并出现相同的错误。我意识到通常 nslookups 不区分大小写。

**注意：** 我没有遇到*Enter-PSSession*命令的问题。*我相信Invoke-Command*存在错误（或至少是明显的不一致）。

更多信息： http: [//go.vertigion.com/PowerShell_Invoke-Command](http://go.vertigion.com/PowerShell_Invoke-Command)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T12:16:53.937

听起来问题出在名称解析上。您可以通过从 ServerB ping ServerA 来确认这一点。如果它失败了，你可以从那里开始工作。尝试通过 FQDN (servera.mydomain.com) 或 IP 进行 ping。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-26T20:08:41.020

[在此处](https://stackoverflow.com/questions/14727036/powershell-executing-a-script-on-a-remote-machine-giving-error/39711491#39711491 "这里")查看更多信息。我在一对一直在工作但随后自发停止并开始发出 OP 错误消息的服务器中遇到了这个问题。我重新启动了目标服务器，这让事情再次正常运行。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-02-03T03:21:45.170

将 TCP/IP NETBIOS 服务设置为自动启动，并启用服务。如果需要，还允许在适配器属性中使用 NETBIOS。

# jquery - CSS 未在更新面板中更新

> ID：11720399
> 
> 赞同：0
> 
> 时间：2012-07-30T11:17:02.777
> 
> 标签：jquery, ajax, updatepanel

我有链接按钮，它保存在更新面板中。当我将其保存在更新面板中时。通过 Jquery 调用的悬停函数没有正确执行，我看不到悬停 css appliied。当我删除更新面板时，它显示正确。以下是应用的 jquery。

```
 $(document).ready(function () {

            $("#MainContent_LinkGeneral").hover(
            function () { $(this).addClass("TabGeneralHover"); },
            function () { $(this).removeClass("TabGeneralHover"); }
            );

        }); 
```

为什么 css 没有在 updatepanel 中更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T13:40:40.450

我只在这里找到了答案。我只是把

```
$(document).ready(function() {
// bind your jQuery events here initially
});

var prm = Sys.WebForms.PageRequestManager.getInstance();

prm.add_endRequest(function() {
// re-bind your jQuery events here
}); 
```

用于维护回发。我把上面的代码放在 scriptmanager 之后，并将这个脚本保存在表单和正文标记之间。请[在此处参考线程](https://stackoverflow.com/questions/256195/jquery-document-ready-and-updatepanels)

# php - Echoing details of repeating column values

> ID：11720402
> 
> 赞同：0
> 
> 时间：2012-07-30T11:17:09.760
> 
> 标签：php, mysql

In my MySQL table I have a column `name`, and there are various repeating names within the table. If I want to display all other column formation for all the people with name `chris` I can use:

```
$sql = mysql_query("SELECT * FROM favorites WHERE name='$name'")
if($info = mysql_fetch_assoc($sql))
echo {$info['name']}
echo {$info['age']}
echo {$info['address']} 
```

But then I want to echo the details of the second `chris`, in the table who could be in any random row within the table I can't specify that information. Is there a way to accomplish this? Thank you.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T11:20:11.560

尝试这个：

```
while($row = mysql_fetch_assoc($sql)) {
    echo $row['name'];
    echo $info['age'];
    echo $row['address'];
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-07-30T11:22:41.440

```
while ($row = mysql_fetch_assoc($sql)) 
{
            echo $row['name'];
            echo $row['age'];
            echo $row['address'];
} 
```

# ruby-on-rails - how to call a method in a controller from the view and then iterate the values returned from the method in the same view

> ID：11720406
> 
> 赞同：0
> 
> 时间：2012-07-30T11:17:20.063
> 
> 标签：ruby-on-rails

I have a scenario where i am calling a Controller method from the view,that returns an array of pages,which can be either nil or must be having values.i need to iterate that array in a for loop to generate a dynamic list in my view.pls help

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T11:44:23.687

在控制器中实现逻辑通常不是一个好主意，您应该[将逻辑移动到相应的模型](http://rails-bestpractices.com/posts/7-move-model-logic-into-the-model)中。

但是，如果您真的想要，您可以使用`controller`变量从您的视图中访问实际的控制器。

例子：

```
<p>
Now we're printing out the result of the some_method:
<%= controller.some_method.inspect %>
</p> 
```

遍历返回值很容易：

```
<ul>
<% controller.some_method.each do |item| -%>
  <li>item.inspect</li>
<% end -%>
</ul> 
```

可能控制器中方法的可见性不是公开的，因此您可能需要使用该[`Object#send`](http://ruby-doc.org/core-1.9.3/Object.html#method-i-send)方法。

```
<%= controller.send(:my_protected_method).inspect %> 
```

### 更新

为了处理`nil`响应，我会在`ApplicationHelper`类中创建一个辅助方法：

```
def my_method
  (controller.my_method || [])
end 
```

然后在视图中：

```
<% my_method.each do |item| -%>
  <%= item.inspect %>
<% end %-> 
```

# android - Android NDK：函数 va_start / va_end 无法解析

> ID：11720411
> 
> 赞同：4
> 
> 时间：2012-07-30T11:17:32.650
> 
> 标签：android, android-ndk

我试图在我的项目中使用 va_start 和 va_end 函数，但 eclipse 不想将其解析为函数。gcc 编译整个项目没有错误...

[我的文件.cpp]

```
#include <stdio.h>
#include <stdarg.h>
[...]
inline void ShowDbgMsg( const char* str, ... )
{
    va_list argptr;
    va_start(argptr, str);
    vprintf(str, argptr);
    va_end(argptr);
}
[...] 
```

[安卓.mk]

```
[...]
LOCAL_C_INCLUDES := jni/pvrTools/ jni/igel/ $(STLPORT_BASE)/stlport
[...] 
```

日食 说：

```
[...]
Description Resource    Path    Location    Type
Function 'va_start' could not be resolved   igel.comdef.h   /NativeProject/jni/igel    line 195 Semantic Error
Function 'va_end' could not be resolved igel.comdef.h   /NativeProject/jni/igel  line 203   Semantic Error
Function 'va_start' could not be resolved   igel.string.h   /NativeProject/jni/igel line 341    Semantic Error
Function 'va_end' could not be resolved igel.string.h   /NativeProject/jni/igel line 351    Semantic Error
[...] 
```

所以，看起来 Eclipse 无法找到某些东西......如何解决这个问题？提前致谢！

PS> Project->Index->​​Rebuild 没有帮助。:(

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-15T21:45:41.223

我的解决方案也不漂亮。但是在您删除错误标记 100 次之后，请尝试将此代码放在包含 stdlib.h 之前的某个位置。然后在 Project::Properties::C++ General::Paths and Symbols 中定义 ECLIPSEBUILD=1。

```

    #if ECLIPSEBUILD // this part is just to fix spurious Eclipse errors
    typedef __builtin_va_list va_list;
    #define va_start(v,l)   __builtin_va_start(v,l)
    #define va_end(v)   __builtin_va_end(v)
    #define va_arg(v,l) __builtin_va_arg(v,l)
    #if !defined(__STRICT_ANSI__) || __STDC_VERSION__ + 0 >= 199900L || defined(__GXX_EXPERIMENTAL_CXX0X__)
    #define va_copy(d,s)    __builtin_va_copy(d,s)
    #endif
    #define __va_copy(d,s)  __builtin_va_copy(d,s)
    typedef __builtin_va_list __gnuc_va_list;
    typedef __gnuc_va_list va_list;
    typedef va_list __va_list;
    #endif

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T02:13:17.737

我通过用嵌入式编译器功能替换我的 va_* 代码来解决这个问题：

```
#ifdef IGEL_PLATFORM_ANDROID
#   define ShowDbgMsg(...)  ((void)__android_log_print(ANDROID_LOG_INFO, "igel-debug", __VA_ARGS__))
#else
inline void ShowDbgMsg( const char* str, ... )
{
    va_list argptr;
    va_start(argptr, str);
    vprintf(str, argptr);
    va_end(argptr);
}
#endif // IGEL_PLATFORM_ANDROID 
```

我知道这不是一个好的解决方案，但它确实有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-19T20:19:55.450

```
#include <stdarg.h> // includes va_list

inline void ShowDbgMsg(char* format, ...)
{
  va_list ap;      
  va_start( ap, format ); 
```

**// 将 vfprintf( stderr, format, ap ) 替换为：**

```
 __android_log_vprint(0, __FILE__, format, ap);
  va_end( ap );
} 
```

# java - Findbugs vs Google CodePro AnalytiX (Eclipse plugins)

> ID：11720413
> 
> 赞同：9
> 
> 时间：2012-07-30T11:17:35.333
> 
> 标签：java, eclipse-plugin, findbugs, codepro

I already have used the Google CodePro AnalytiX but I never used Findbugs.

My first impression with Findbugs is that it is harder to configure. After that, I believe that both are similar.

What's your opinion?

Just one more question related: None of these plugins sent our code to the servers, right? (for example, if we use CodePro our code isn't sent to Google Servers).

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-07-31T19:08:35.340

**2016 年更新：CodePro Analytix 不再可用，所以请使用 Findbugs。**

* * *

*原始答案*

CodePro Analytix 更好：

*   可以为每个项目更改问题级别（错误、警告、信息）。Findbugs 只能启用/禁用问题。
*   许多问题可以详细配置（如黑名单脏话列表）。
*   可以向您显示*当前打开*的编辑器中的所有问题（并在打开或关闭编辑器时进行调整），这比选择包、项目或其他任何内容然后手动触发扫描要方便得多
*   可以自动修复几个问题（例如将所有参数声明为最终参数）。在 Findbugs 中，一切都必须手动完成。

Findbugs 更好：

*   更专注于*典型的*Java 编程错误（但没有 CodePro 等丰富的问题​​选择）
*   进行更多需要大量上下文信息的分析
*   可以在 Eclipse 中本地使用，也可以在 Hudson/Jenkins 等集成服务器上使用
*   可以共享 Hudson/Jenkins 和本地 IDE 上的配置，因此您可以在 IDE 和服务器上看到完全相同的结果
*   具有“云模式”，分布式团队可以共享他们的发现（以及对发现的评估），这样他们就不会再次检查相同的问题

以上所有内容都与您如何使用该工具有关。错误的实际发现可能在很大程度上取决于要检查的项目。过去我经常建议同时**使用两者，首先是 Findbugs，然后是 CodePro**：

使用 Findbugs 进行第一次检查，因为它会发现更严重的问题。但是在这些问题得到解决之后，您可能会发现自己陷入了很多嘈杂的问题（甚至是错误的发现）。因此，在解决了 Findbugs 最严重的问题之后，我建议切换到 CodePro Analytix，因为它的错误发现更少并且可以更详细地控制。

# javascript - How to parse an Excel file using javascript code in html

> ID：11720416
> 
> 赞同：0
> 
> 时间：2012-07-30T11:17:44.573
> 
> 标签：javascript, excel, cross-browser

I want to parse an excel file in javascript function module that can be invoked from html. I have used ActiveXobject for opening the excel sheet, but not all browsers allow opening of activexobject and alert message is not shown in all of the browsers. I need to know if there exists any other method of opening excel sheet from javascript code and is supported by all the browsers

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T11:28:50.603

我使用的方法类似于[本网站](http://www.ajaxf1.com/tutorial/ajax-file-upload-tutorial.html)上概述的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T11:22:01.497

并非没有浏览器插件，您的用户必须先安装这些插件。

专有格式等于缺乏第 3 方支持。

# dojo - 在 BorderContainer 中调用 Dojo ContentPane Children 的问题

> ID：11720424
> 
> 赞同：1
> 
> 时间：2012-07-30T11:18:01.970
> 
> 标签：dojo, border-container, contentpane

我正在尝试使用 BorderContainer 并在内部使用它们的区域样式调用几个 ContentPanes。但是，我遇到了如下代码的问题：

```
function getWindowContent(graphic) {
        var bc = new dijit.layout.BorderContainer({
            style: "width:600px;height:600px;background-color:lightblue;"
        }, dojo.create("div"));

    //display attribute information1
    var german = new dijit.layout.ContentPane({
      region: "leading",
      content: "<p>Hallo Welt!</p><p>info</p><p>info</p><p>info</p>"
    }, dojo.create("div"));

    //display attribute information2
    var french = new dijit.layout.ContentPane({
      region: "center",
      content: "<p>Bonjour tout le monde!</p><p>info</p><p>info</p><p>info</p>"
    }, dojo.create("div"));

    //display attribute information3
    var english = new dijit.layout.ContentPane({
      region: "trailing",
      content: "<p>Hello World!</p><p>info</p><p>info</p><p>info</p>"
    }, dojo.create("div"));

    bc.startup();

    bc.addChild(german);
    bc.addChild(french);
    bc.addChild(english);

    return bc.domNode;
  } 
```

唯一正确出现的孩子是“英国”孩子，而“德国”孩子根本没有出现，“法国”孩子被严重压缩。有人对我如何解决这个问题有想法吗？

# ios - 如何动态创建kml文件

> ID：11720440
> 
> 赞同：0
> 
> 时间：2012-07-30T11:19:01.153
> 
> 标签：ios, sqlite, mkmapview, kml

在我的`iOS`应用程序中，我在数据库中有 20000 条记录，`SQLite`其中包含位置数据城市、纬度、经度、国家、州、邮编等。如何`KML`使用这些数据创建文件以将视觉效果应用于地图视图中的地图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T12:40:13.157

我使用这个库进行 KML 解析：[https](https://github.com/FLCLjp/iOS-KML-Framework) ://github.com/FLCLjp/iOS-KML-Framework 。它功能非常全面，并且易于扩展。

它还可以根据您的需要生成 KML 文件，尽管我还不需要使用它。KMLPlacemark 类是您为数据创建地标所需的类。

有关 KML 标准的详细信息，请参阅 Google KML 参考：[https ://developers.google.com/kml/documentation/kmlreference](https://developers.google.com/kml/documentation/kmlreference)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-07T11:42:57.647

您可以创建一个方法来读取您拥有的位置数据，然后使用 KML 标签包装这些数据。例如，这是制作地标的代码：

```
<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2">
  <Placemark>
    <name>Simple placemark</name>
    <description>Attached to the ground. Intelligently places itself 
       at the height of the underlying terrain.</description>
    <Point>
      <coordinates>-122.0822035425683,37.42228990140251,0</coordinates>
    </Point>`
  </Placemark>
</kml> 
```

以同样的方式，您可以将数据包装成显示线或曲面。在这里您可以找到更多[https://developers.google.com/kml/documentation/kml_tut](https://developers.google.com/kml/documentation/kml_tut)

# jquery - 与 $(this) 相对的 jquery

> ID：11720441
> 
> 赞同：4
> 
> 时间：2012-07-30T11:19:03.680
> 
> 标签：jquery

是否可以执行相反的操作`$(this)`？

因此`this`，它不是获取元素，而是获取所有匹配`.sb-popular-thumb a`但不包括`$(this)`?

请参阅下面的示例代码。我已经标记`$(this)`了，`$(reverse)`所以你可以看到我想要实现的目标。

```
$('.sb-popular-thumb a').hover(
  function () {

    $('.sb-popular').stop().animate({
        height : '168px'                    
    }, 200);

    $(this).siblings('.sb-popular-thumb-title').show();

    $(reverse).siblings('.sb-popular-thumb-overlay').stop().fadeIn(200);

  },
  function () {

    $('.sb-popular').stop().animate({
        height : '140px'                    
    }, 200);

    $(this).siblings('.sb-popular-thumb-title').hide();

    $(reverse).siblings('.sb-popular-thumb-overlay').stop().fadeOut(200);

}); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-30T11:20:12.907

只需使用：

```
$('.sb-popular-thumb a').not(this)
                        .siblings('.sb-popular-thumb-overlay')
                        .stop()
                        .fadeIn(200); 
```

它将获取`<a>`该类中的所有元素，除了`this`.

`siblings()`会做几乎相同的事情，但只会得到兄弟元素（duh）？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-30T11:20:55.107

这将模仿你的“反向”

```
$('.sb-popular-thumb a').not($(this)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-30T11:21:24.443

`.not()`从搜索中排除您指定的任何内容。

所以`.not(this)`排除这个。

# sql - 重叠记录

> ID：11720443
> 
> 赞同：1
> 
> 时间：2012-07-30T11:19:04.633
> 
> 标签：sql, database, oracle10g

我有一个名为的表`PRODUCTS`，每个表`PRODUCT_NO_REGISTRATION_NO`只允许使用一次，即产品开始日期和退货日期不应冲突。

我们退回产品并输入退货日期`ACTUAL_RETURN_DATE`，如果`ACTUAL_RETURN_DATE`为空，我们将`END_DATE`其作为退货日期。

[你可以在这里](http://sqlfiddle.com/#!4/427e6/1)看到记录

例如`PRODUCT_NO_REGISTRATION_NO is clashing, as HP_2014 is returned on 18-Jun-2001, however HP_2012 same PRODUCT_NO_REGISTRATION_NO is allotted on 18-Jun-2001.`

如何使用 sql 找出记录是否重叠？

***更新 1***

表中进行了修改`PRODUCTS`以包含`PRODUCT_EXTENSION_NO`. 的组合`PRODUCT_NO,PRODUCT_NO_REGISTRATION_NO and PRODUCT_EXTENSION_NO`成为唯一的行（复合主键）。

规则如下 每个`PRODUCT_NO_REGISTRATION_NO`只允许使用一次，即产品开始日期和退货日期不应冲突。

我们退回产品并输入退货日期`ACTUAL_RETURN_DATE`，如果`ACTUAL_RETURN_DATE`为空，我们将`END_DATE`其作为退货日期。

`PRODUCT_NO`有扩展，所以`END_DATE`是扩展的。

[Sql 小提琴](http://sqlfiddle.com/#!4/b71f5/1)

例如，如果您看到记录 `PRODUCT_NO`- `ORP76`with `PRODUCT_EXTENSION_NO`-与- with -`1`发生冲突。`PRODUCT_NO``ORP100``PRODUCT_EXTENSION_NO``0`

如何使用 sql 找出记录是否重叠，`PRODUCT_NO`但是否允许扩展。ie `PRODUCT_NO` `ORP76`with extension`0`和extension 1基本上都是扩展的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T11:53:16.213

假设这`product_no`是唯一的，您可以自连接 products 表并检查[重叠日期](https://stackoverflow.com/questions/325933/determine-whether-two-date-ranges-overlap)：

```
select *
  from PRODUCTS
 inner join products products_test
    on products.PRODUCT_NO_REGISTRATION_NO 
     = products_test.PRODUCT_NO_REGISTRATION_NO
   and products.start_date 
    <= nvl (products_test.ACTUAL_RETURN_DATE, products_test.end_date)
   and nvl (products.ACTUAL_RETURN_DATE, products.end_date) 
    >= products_test.start_date
   and products.product_no 
    <> products_test.product_no 
```

[这是 Sql Fiddle](http://sqlfiddle.com/#!4/291f1/1)。

**编辑：**使用 rowid 的版本：

```
select *
  from PRODUCTS
 inner join products products_test
    on products.PRODUCT_NO_REGISTRATION_NO 
     = products_test.PRODUCT_NO_REGISTRATION_NO
   and products.start_date 
    <= nvl (products_test.ACTUAL_RETURN_DATE, products_test.end_date)
   and nvl (products.ACTUAL_RETURN_DATE, products.end_date) 
    >= products_test.start_date
   and products.rowid
    <> products_test.rowid 
```

[第二个 Sql 小提琴](http://sqlfiddle.com/#!4/291f1/2)

**澄清后更新**：想法是在记录中获取产品开始和结束日期计数的最小和最大范围`extended`，然后通过测试 product_no 和 product_no_registration_no 比较两个流的范围重叠消除自我引用。

```
with extended as
(
  select PRODUCT_NO, 
         PRODUCT_NO_REGISTRATION_NO, 
         min (START_DATE) as start_date,
         max (nvl (ACTUAL_RETURN_DATE, END_DATE)) as end_date
    from products
   group by PRODUCT_NO, PRODUCT_NO_REGISTRATION_NO
)
select e1.PRODUCT_NO_REGISTRATION_NO,
       e1.PRODUCT_NO,
       e1.start_date,
       e1.end_date,
       e2.PRODUCT_NO "PRODUCT_NO - CLASH",
       e2.start_date "START_DATE - CLASH",
       e2.end_date "END_DATE - CLASH"
  from extended e1
 inner join extended e2
    on e1.PRODUCT_NO_REGISTRATION_NO
     = e2.PRODUCT_NO_REGISTRATION_NO
   and e1.start_date <= e2.end_date
   and e1.end_date >= e2.start_date
-- Remove self-references
   and not
   (
           e1.PRODUCT_NO = e2.PRODUCT_NO
       and e1.PRODUCT_NO_REGISTRATION_NO 
         = e2.PRODUCT_NO_REGISTRATION_NO
   ) 
```

[第三个 Sql Fiddle](http://sqlfiddle.com/#!4/b71f5/19)。

# java - Java找不到方法main

> ID：11720447
> 
> 赞同：3
> 
> 时间：2012-07-30T11:19:14.113
> 
> 标签：java

我在使用一个简单的 hello world 程序时遇到了麻烦，哈哈！我希望有人可以对此有所了解。

所以我收到的错误如下：

```
$ javac Hello.java
$ java Hello
Exception in thread "main" java.lang.NoSuchMethodError: main 
```

因此，通过错误，我可以看到它*显然*缺少 main，但它就在那里：

```
class Hello
{
  public static void main(String argv)
  {
    System.out.println("hello world");
  }
} 
```

如果有帮助，我在 Mac OS/X 上。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-30T11:20:11.397

问题是您的方法没有将 String 数组作为参数。请改用以下签名：

```
public static void main(String[] argv) 
```

或者

```
public static void main(String argv[]) 
```

其他有效选项是：

```
public static void main(String ... argv) 
```

在 Java 语言规范中是这样描述的：

> 方法 main 必须声明为 public、static 和 void。它必须指定一个声明类型为字符串数组的形式参数（第 8.4.1 节）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-30T11:23:35.960

您忘记输入数组语法，您甚至可以按照 JAVA 1.5 使用可变参数

```
public static void main(String... argv) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-07-30T11:20:16.773

你忘了`[]`in`String[] argv`或`...`in `String... argv`。该数组用于存储在为您的类创建 JVM 的命令中使用的参数，例如

```
java Hello argument0 argument1 argument2` 
```

等等。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-07-30T11:20:22.607

Main 方法具有接受的签名，`String[]`而您写`String`的是错误的，

做了

```
public static void main(String[] argv) 
```

或[可变参数](https://stackoverflow.com/questions/4618930/what-does-mean-in-java/4618944#4618944)

```
public static void main(String... argv) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-07-30T11:23:39.483

问题在于`main`签名，应该是

```
public static void main(String[] argv) 
```

或者可能是

```
public static void main(String ... argv) // known as varargs 
```

而不是`public static void main(String argv)`你的情况

看看[这个](http://docs.oracle.com/javase/tutorial/getStarted/application/index.html#MAIN)

对于可变参数[外观](http://docs.oracle.com/javase/1.5.0/docs/guide/language/varargs.html)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-07-30T12:08:12.957

```
public static void main(String[] args)
public static void main(String... args)
public static void main(String args[]) 
```

Java 程序从 main 方法开始执行，该方法具有上述方法原型

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-07-30T11:35:43.287

您的主要方法签名是错误`String`的，而不是`String []`

利用

```
public static void main(String[] argv) 
```

或者

```
public static void main(String... argv) 
```

[在这里](http://docs.oracle.com/javase/tutorial/getStarted/application/index.html)阅读

# python - 应该使用链式调用来支持更明确的分配吗？

> ID：11720449
> 
> 赞同：3
> 
> 时间：2012-07-30T11:19:22.887
> 
> 标签：python, python-2.7, stringio

我们的团队必须像下面这样摘录：

这个：

```
buf = StringIO.StringIO()
gzip.GzipFile(fileobj=buf, mode='wb').write(foo)
... 
```

和这个：

```
buf = StringIO.StringIO()
tmp = gzip.GzipFile(fileobj=buf, mode='wb')
tmp.write(foo)
... 
```

哪个更pythonic？

编辑：我有 try/catch 来做错误处理工作，但哪一个更 Pythonic？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-30T11:26:08.473

完成后需要关闭`GzipFile`对象，这样一行就行不通了。相反，使用上下文管理器表达式：

```
buf = StringIO.StringIO()
with gzip.GzipFile(fileobj=buf, mode='wb') as tmp:
    tmp.write(foo) 
```

单行`gzip.GzipFile(fileobj=buf, mode='wb').write(foo)`是*非常危险*的，因为它依赖于在`GzipFile`表达式末尾进行垃圾收集，以便刷新流。如果这未能发生（例如使用 Jython），那么`buf`将不包含预期的结果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T11:22:43.483

哪一个都好。选择你认为最易读的一个。

就个人而言，我会选择第一个，额外变量的使用不会*为我*添加任何东西。

也就是说，在这种情况下，ecatmur 是正确的，您需要`GZipFile`在将所有数据写入实例后关闭实例，因为这会将压缩数据刷新到`buf`并添加 gzip CRC 和大小信息。没有这个，您的数据可能不完整！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T12:12:44.570

例如，

```
Man.eat.work.sleep() 
```

方法链在 ruby​​/javascript 中很常见，我认为`ruby/javascript style`不是`pythonic`.

# php - 如何在 PDO（或 MySQLi）查询中正确处理关联数组？

> ID：11720450
> 
> 赞同：3
> 
> 时间：2012-07-30T11:19:30.030
> 
> 标签：php, pdo, mysqli, prepared-statement

我正在将 MySQLi 用于一个项目（但可以轻松切换到 PDO，请阅读底部的编辑）。我想要的是能够将关联数组处理成 mysql 查询，而无需手动键入每个键/值对。我知道这可能很简单，但是当涉及到 MySQLi/PDO 时，我仍然处于学习过程中。为了清楚我的意思是一个例子：

假设我有这个关联数组：

```
$data = array(
    'name' => 'Objective',
    'short_name' => 'OB',
    'generation' => 1
); 
```

我想要的是创建一个这样的查询：

```
UPDATE signals SET ? = ? WHERE sid = '1' 
```

它变成这样的查询（或者代替 UPDATE、INSERT、SELECT 等）：

```
UPDATE signals SET
    name = 'Objective', 
    short_name = 'OB', 
    generation = 1 
WHERE sid = '1' 
```

所以基本上我的问题是：这可能与 MySQLi 或 PDO 本身有关吗？如果可能的话，我该怎么做？我已经阅读了在执行之前准备语句的内容，但它还没有让我明白。希望有人可以帮助我。

编辑：我仍然很早就进入该项目，所以我也可以使用 PDO，但同样的问题仍然存在。我确实研究了 PDO 和 mysqli，但我也不知道如何用 PDO 来做。因此，为了这个问题，我将 PDO 作为标签添加到问题中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T12:15:26.210

这是一个函数，它将接受一个输入数组并产生一些你可以直接放入查询中的东西，只要你只更新一个表：

```
function array_to_pdo_params($array) {
  $temp = array();
  foreach (array_keys($array) as $name) {
    $temp[] = "`$name` = ?";
  }
  return implode(', ', $temp);
} 
```

现在您可以像这样执行您的 PDO 查询：

```
// The data
$data = array(
  'name' => 'Objective',
  'short_name' => 'OB',
  'generation' => 1
);

// The parameter for the WHERE clause
$sid = 1;

// Build the query string
$query = "
  UPDATE `signals`
  SET ".array_to_pdo_params($data)."
  WHERE `sid` = ?
";

// Convert the data array to indexed and append the WHERE parameter(s) to it
$queryData = array_values($data);
$queryData[] = $sid;

$stmt = $db->prepare($query); // Obviously add the appropriate error handling

$stmt->execute($queryData); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T11:41:36.923

您可以通过传递一组输入值来使用 PDO 的执行语句，以进行准备好的查询。供参考： http: [//php.net/manual/en/pdostatement.execute.php](http://php.net/manual/en/pdostatement.execute.php)

例子：

```
<?php
/* Execute a prepared statement by passing an array of insert values */
$calories = 150;
$colour = 'red';
$sth = $dbh->prepare('SELECT name, colour, calories
    FROM fruit
    WHERE calories < :calories AND colour = :colour');
$sth->execute(array(':calories' => $calories, ':colour' => $colour));
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T11:30:34.703

Zend_DB 会让你做到这一点。

尽管我们为我的工作创建了一个包装器以使其更简单，但我真的认为它就像你能得到的一样简单，它为你做了所有神奇的事情。

你真的应该试一试；学习后可以节省大量时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T11:47:32.463

如何构建查询[`http_build_query`](http://uk3.php.net/manual/en/function.http-build-query.php)如下：

```
$columns = array(
  'name',
  'short_name',
  'generation', ...
);

$data = array(
  'name' => 'Objective',
  'short_name' => 'OB',
  'generation' => 1
);

$to_update = array_intersect_key($data, array_flip($columns));
$update_string = urldecode(http_build_query(array_combine(array_keys($columns), array_fill(0, count($columns), '?')), '', ', '));

try {
 $stmt = $db->prepare(sprintf('UPDATE table SET %s WHERE condition=?', $update_string));
 $result = $stmt->execute(array_values($data));

 ...

} catch (\PDOException $ex) { 

} 
```

确保在数组`WHERE`末尾有条件参数。`$data`

# java - 实体类中的属性有一个 mappedBy 值，该值确实存在于其拥有的实体中

> ID：11720451
> 
> 赞同：0
> 
> 时间：2012-07-30T11:19:31.547
> 
> 标签：java, jpa, entity, entity-relationship, jpql

有什么问题`Article.foo`导致：`Exception Description: The attribute [foos] in entity class [class net.bounceme.dur.usenet.model.Article] has a mappedBy value of [foos] which does not exist in its owning entity class [class net.bounceme.dur.usenet.model.Foo].`？

`Foo`没有 foos 的 mappedBy 值，这是正确的读数吗？那是因为`Foo`有一个 mappedBy 值为： `@ManyToMany(mappedBy = "articles")`。

我怎样才能修复这些实体，使它们是多对多的？

我试图遵循[文档](http://docs.oracle.com/javaee/6/api/javax/persistence/ManyToMany.html)：

```
Example 1:

// In Customer class:

@ManyToMany
@JoinTable(name="CUST_PHONES")
public Set<PhoneNumber> getPhones() { return phones; }

// In PhoneNumber class:

@ManyToMany(mappedBy="phones")
public Set<Customer> getCustomers() { return customers; } 
```

为什么注释是方法而不是字段的关系？这似乎让我很困惑，因为我不确定我的代码应该在哪个实体中包含哪些字段。

如上所述尝试后，我按照 IDE 的建议进行了一些更改，最终得到：

堆：

```
Jul 30, 2012 3:49:47 AM net.bounceme.dur.usenet.driver.Main main
SEVERE: null
Local Exception Stack: 
Exception [EclipseLink-30005] (Eclipse Persistence Services - 2.3.0.v20110604-r9504): org.eclipse.persistence.exceptions.PersistenceUnitLoadingException
Exception Description: An exception was thrown while searching for persistence archives with ClassLoader: sun.misc.Launcher$AppClassLoader@18ad9a0
Internal Exception: javax.persistence.PersistenceException: Exception [EclipseLink-28018] (Eclipse Persistence Services - 2.3.0.v20110604-r9504): org.eclipse.persistence.exceptions.EntityManagerSetupException
Exception Description: Predeployment of PersistenceUnit [USENETPU] failed.
Internal Exception: Exception [EclipseLink-7154] (Eclipse Persistence Services - 2.3.0.v20110604-r9504): org.eclipse.persistence.exceptions.ValidationException
Exception Description: The attribute [foos] in entity class [class net.bounceme.dur.usenet.model.Article] has a mappedBy value of [foos] which does not exist in its owning entity class [class net.bounceme.dur.usenet.model.Foo]. If the owning entity class is a @MappedSuperclass, this is invalid, and your attribute should reference the correct subclass.
    at org.eclipse.persistence.exceptions.PersistenceUnitLoadingException.exceptionSearchingForPersistenceResources(PersistenceUnitLoadingException.java:126)
    at org.eclipse.persistence.jpa.PersistenceProvider.createEntityManagerFactory(PersistenceProvider.java:115)
    at javax.persistence.Persistence.createEntityManagerFactory(Unknown Source)
    at javax.persistence.Persistence.createEntityManagerFactory(Unknown Source)
    at net.bounceme.dur.usenet.driver.Main.<init>(Main.java:34)
    at net.bounceme.dur.usenet.driver.Main.main(Main.java:24)
Caused by: javax.persistence.PersistenceException: Exception [EclipseLink-28018] (Eclipse Persistence Services - 2.3.0.v20110604-r9504): org.eclipse.persistence.exceptions.EntityManagerSetupException
Exception Description: Predeployment of PersistenceUnit [USENETPU] failed.
Internal Exception: Exception [EclipseLink-7154] (Eclipse Persistence Services - 2.3.0.v20110604-r9504): org.eclipse.persistence.exceptions.ValidationException
Exception Description: The attribute [foos] in entity class [class net.bounceme.dur.usenet.model.Article] has a mappedBy value of [foos] which does not exist in its owning entity class [class net.bounceme.dur.usenet.model.Foo]. If the owning entity class is a @MappedSuperclass, this is invalid, and your attribute should reference the correct subclass.
    at org.eclipse.persistence.internal.jpa.EntityManagerSetupImpl.predeploy(EntityManagerSetupImpl.java:1385)
    at org.eclipse.persistence.internal.jpa.deployment.JPAInitializer.callPredeploy(JPAInitializer.java:98)
    at org.eclipse.persistence.jpa.PersistenceProvider.createEntityManagerFactory(PersistenceProvider.java:105)
    ... 4 more 
```

文章实体：

```
package net.bounceme.dur.usenet.model;

import java.io.Serializable;
import java.util.Set;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.mail.Message;
import javax.mail.MessagingException;
import javax.persistence.*;

@Entity
public class Article implements Serializable {

    private static final long serialVersionUID = 1L;
    private static final Logger LOG = Logger.getLogger(Article.class.getName());
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;
    @Column
    private String subject;
    @ManyToMany(mappedBy = "foos")
    private Set<Foo> foos;

    public Article() {
    }

    public Article(Message message) {
        try {
            subject = message.getSubject();
        } catch (MessagingException ex) {
            Logger.getLogger(Article.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

        public Set<Foo> getFoos() {
        return foos;
    }

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    @Override
    public int hashCode() {
        int hash = 0;
        hash += (id != null ? id.hashCode() : 0);
        return hash;
    }

    @Override
    public boolean equals(Object object) {
        // TODO: Warning - this method won't work in the case the id fields are not set
        if (!(object instanceof Article)) {
            return false;
        }
        Article other = (Article) object;
        if ((this.id == null && other.id != null) || (this.id != null && !this.id.equals(other.id))) {
            return false;
        }
        return true;
    }

    @Override
    public String toString() {
        return subject;
    }

    public String getSubject() {
        return subject;
    }

    public void setSubject(String subject) {
        this.subject = subject;
    }
} 
```

富实体：

```
package net.bounceme.dur.usenet.model;

import java.io.Serializable;
import java.util.Set;
import javax.persistence.*;

@Entity
public class Foo implements Serializable {

    private static final long serialVersionUID = 1L;
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;
    @ManyToMany(mappedBy = "articles")
    private Set<Article> articles;

    public Foo() {
    }

        public Set<Article> getArticles() {
        return articles;
    }

        public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    @Override
    public int hashCode() {
        int hash = 0;
        hash += (id != null ? id.hashCode() : 0);
        return hash;
    }

    @Override
    public boolean equals(Object object) {
        // TODO: Warning - this method won't work in the case the id fields are not set
        if (!(object instanceof Foo)) {
            return false;
        }
        Foo other = (Foo) object;
        if ((this.id == null && other.id != null) || (this.id != null && !this.id.equals(other.id))) {
            return false;
        }
        return true;
    }

    @Override
    public String toString() {
        return "net.bounceme.dur.usenet.model.Foos[ id=" + id + " ]";
    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-30T11:31:44.090

`mappedBy = "foos"`意思是：去看看这个双向关联的另一边，看看它是如何映射的。另一边是`foos`目标实体中的属性。

所以，既然你有一个领域

```
@ManyToMany(mappedBy = "foos")
private Set<Foo> foos; 
```

您的 JPA 引擎在类中查找名为`foos`(因为 mappedBy = "foos") 的属性`Foo`（因为它是 a `Set<Foo>`）。它没有找到任何这样的属性，因此抱怨。

双向关联的一侧（反侧）必须具有该`mappedBy`属性。没有`mappedBy`属性的一方是所有者方。因此，如果您希望 Article 成为关联的所有者，您必须具有：

```
public class Article {
    @ManyToMany
    @JoinTable(...)
    private Set<Foo> foos;
}

public class Foo {
    @ManyToMany(mappedBy = "foos")
    private Set<Article> articles;
} 
```

如果你想让 Foo 成为协会的所有者，你必须有

```
public class Article {
    @ManyToMany(mappedBy = "articles")
    private Set<Foo> foos;
}

public class Foo {
    @ManyToMany
    @JoinTable(...)
    private Set<Article> articles;
} 
```

# iphone - UISearchBar 在添加多个空格后放置句号

> ID：11720452
> 
> 赞同：1
> 
> 时间：2012-07-30T11:19:38.890
> 
> 标签：iphone, ios, uitextfield, uisearchbar

我从 UISearchBar 得到奇怪的行为。当我在 UISearchBar 中按下多个空格时，它会自动放置句号“。” 在搜索栏文本中。我不明白为什么会这样。这是我的代码，

```
 NSString *str = [searchBar.text stringByTrimmingCharactersInSet:
                 [NSCharacterSet whitespaceAndNewlineCharacterSet]];

NSLog(@"%@",searchBar.text ); 
```

我按空格，然后按 f，然后按 2 次空格，它会完全停止。请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T11:23:23.540

这是 iOS 的属性，而不是 UISearchBar 元素。

它可配置为“'。' iOS 设置部分的通用 -> 键盘中的快捷方式”。它的描述：“双击空格键将插入一个句点，然后是一个空格。”

至于以编程方式删除句点/句号，我想你可以使用正则表达式来做到这一点，但我不推荐它。因为该功能是键盘用户偏好的一部分，所以无论您使用什么应用程序，它的作用都是一样的。这有点像将用户键入的所有文本都更改为大写，他们可能不希望这样（或者他们可能习惯于双击 shift），因此您的应用程序变得混乱且难以使用。

我会说保持原样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-17T00:17:10.600

如果真的要去掉句号的自动加法，

对于 UISearchBar 你可以覆盖，

```
- (BOOL)searchBar:(UISearchBar *)searchBar shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text {

    if ([text isEqualToString:@". "]) {
        return NO;
    }
} 
```

对于 UITextField 您可以执行相同的操作，但改写以下内容，

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string; 
```

# .net - VB.NET 中有没有一种方法可以使用初始化列表将项目添加到成员集合中？

> ID：11720458
> 
> 赞同：1
> 
> 时间：2012-07-30T11:19:54.267
> 
> 标签：.net, vb.net, collections, initializer-list

假设我有这个类：

```
class Foo
 Public Property a() As Integer
 Private _l As List(Of Integer) = New List(Of Integer)
 Public Property l() As List(Of Integer)
    Get
     Return _l
    End Get
    Set(value As List(Of Integer))
     _l = value
    End Set
 End Property    
end class 
```

我正在尝试使用初始化列表来初始化属性：

```
Dim f as Foo = New Foo With {.a = 1, .l.Add(1)} 
```

以上不起作用。我在这里有点困惑。现在，在我理解的初始化列表中，我可以像这样初始化集合：

```
Dim f as Foo = New Foo With {.a = 1, .l = New List(Of Integer){1}} 
```

但是我需要做的，因为`_l`当我说的时候已经指向一个对象`New Foo`，所以只添加元素而不说`..., .l = New List(Of Integer){1}}` 。为什么它不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T11:55:05.633

可以使用[集合初始化语法](http://msdn.microsoft.com/en-us/magazine/ee358704.aspx)，即`Dim f As New Foo From {1, 2, 3}`（见下文）。但是，这有一些缺点：

*   您不能同时使用集合初始值设定项语法和[对象初始值](http://msdn.microsoft.com/en-us/library/bb385125.aspx)设定项（例如`With {.a = 1}`）。因此，您必须将属性`a`的初始化移至构造函数。
*   你的类必须实现`IEnumerable`并且有一个`Add`方法。

也就是说，这是一个工作示例：

```
Class Foo
    Implements IEnumerable

    Public Property a() As Integer
    Private _l As List(Of Integer) = New List(Of Integer)
    Public Property l() As List(Of Integer)
        Get
            Return _l
        End Get
        Set(value As List(Of Integer))
            _l = value
        End Set
    End Property

    Public Sub New(ByVal a As Integer)
        Me.a = a
    End Sub

    Public Sub Add(ByVal item As Integer)
        _l.Add(item)
    End Sub

    Public Function GetEnumerator() As IEnumerator Implements IEnumerable.GetEnumerator
        Return _l.GetEnumerator()
    End Function
End Class 
```

它可以按如下方式使用：

```
Dim f As New Foo(1) From {1, 2, 3}   ' sets a to 1 and adds 1, 2 and 3 to the list 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T11:43:44.890

我认为这是因为你不能同时初始化和添加一个元素到列表中。

作为一种解决方案，您可以向您的类添加一个构造函数：

```
Public Sub New(ByVal lValue As Integer)
    l.Add(lValue)
End Sub 
```

然后你可以在一行中完成这一切：

```
Dim f As Foo = New Foo(1) With {.a = 1} 
```

# sql-server - 使用子查询在sql中插入多行

> ID：11720461
> 
> 赞同：1
> 
> 时间：2012-07-30T11:20:03.510
> 
> 标签：sql-server, subquery

我想使用一个插入 sql 查询插入多行。我知道可以在一个 sql 查询中插入多行。

我写了一些查询
`insert into test values ((select loan_id from loan_transaction_mcg))`

但我收到了错误
`Subquery returned more than 1 value. This is not permitted when the subquery follows =, !=, <, <= , >, >= or when the subquery is used as an expression.`

反正有没有像这样插入数据。`test`我在表中有单列。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T11:21:31.603

假设您的测试表已经创建并且只包含一个`loan_id`，您所要做的就是删除`values`并删除现在多余的括号。

```
INSERT INTO test SELECT loan_id FROM loan_transaction_mcg 
```

# openlaszlo - Openlaszlo 迁移问题

> ID：11720462
> 
> 赞同：1
> 
> 时间：2012-07-30T11:20:09.720
> 
> 标签：openlaszlo

当我尝试将代码从 OL 3.3 迁移到 4.9 时，出现此错误。我已按照此处提到的步骤进行操作。 [http://wiki.openlaszlo.org/Runtime_Differences](http://wiki.openlaszlo.org/Runtime_Differences) 但我仍然收到此错误。

```
 [exec] Exception in thread "main" java.lang.NullPointerException
     [exec]     at org.openlaszlo.compiler.ClassModel.sortKey(ClassModel.java:235)
     [exec]     at org.openlaszlo.compiler.ClassModel.compareTo(ClassModel.java:244)
     [exec]     at java.util.TreeMap.put(TreeMap.java:560)
     [exec]     at java.util.TreeSet.add(TreeSet.java:255)
     [exec]     at java.util.AbstractCollection.addAll(AbstractCollection.java:334)
     [exec]     at java.util.TreeSet.addAll(TreeSet.java:312)
     [exec]     at java.util.TreeSet.<init>(TreeSet.java:160)
     [exec]     at org.openlaszlo.compiler.ViewSchema.resolveClassModels(ViewSchema.java:362)
     [exec]     at org.openlaszlo.compiler.Compiler.updateRootSchema(Compiler.java:809)
     [exec]     at org.openlaszlo.compiler.Compiler.compile(Compiler.java:452)
     [exec]     at org.openlaszlo.compiler.Compiler.compile(Compiler.java:199)
     [exec]     at org.openlaszlo.compiler.Main.compile(Main.java:463)
     [exec]     at org.openlaszlo.compiler.Main.lzc(Main.java:402)
     [exec]     at org.openlaszlo.compiler.Main.main(Main.java:105) 
```

有没有人遇到过同类型的。请让我知道解决方案是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T12:47:50.750

即使在 5.0 版本中也存在该问题，但后来通过一一删除依赖项，我发现当我删除约束并给出正确名称时，该类的默认放置值之一是约束。错误已解决。

# asp.net - 如何在 ASP.NET 的服务器端获取输入（文本类型）的值？

> ID：11720465
> 
> 赞同：4
> 
> 时间：2012-07-30T11:20:11.653
> 
> 标签：asp.net, html

使用 HTML 标记

```
<form id="form" runat="server">
  <input id="donkey" type="text" placeholder="monkey" runat="server" />
</form> 
```

我希望通过后面的代码获得输入的值

```
String s = Request.Form["donkey"]; 
```

但它只产生空值。当我调查数据结构时，我得到了类似的东西，`$ctl00$main$donkey`所以我知道它就在那里。过了一会儿，我简单地切换到

```
<form id="form" runat="server">
  <asp:TextBox id="donkey" type="text" runat="server"></asp:TextBox>
</form> 
```

但是我仍然想知道如果由于某种原因我不会切换到 ASP 组件，如何从服务器端引用该对象。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-30T11:30:31.507

如果要使用 request.form 访问该值，请将 name 属性添加到 input 标签并删除 runat 属性。

```
<input id="donkey" name="donkey" type="text" /> 
```

否则使用

```
<asp:TextBox ID="donkey" type="text" runat="server"></asp:TextBox> 
```

在cs上

```
string s = donkey.Text; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-30T11:26:50.510

如果你想像这样获得输入使用的价值

```
 String s = donkey.value; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-30T11:26:13.113

只是`donkey.Value`会从文本输入中返回应该有的值`runat="server"`。它将创建一个对象`System.Web.UI.HtmlControls.HtmlInputText`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-30T11:26:41.527

我不确定 ASP.net 但要正确提交常规表单字段，它应该有一个`name`属性。这将是您可以查找表单值的关键。

# android - Android 设置 CID/LAC

> ID：11720470
> 
> 赞同：0
> 
> 时间：2012-07-30T11:20:25.710
> 
> 标签：android, telephony, telephonymanager

是否有任何实施的解决方案可以手动**设置**LAC/SAC 或 CID？从 Telephony api 我看到获得 LAC CID (TelephonyManager getLAC(), getCID()) 是可能的，但看不到设置它们。我检查了可能在 RIL 层上是否可行，但找不到任何示例，因为供应商 RIL 似乎可以完成这项工作。

感谢回应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T14:14:58.613

你为什么要这个？CID/LAC 来自网络，即它是一种环境属性。设置它们的唯一原因是出于测试目的，在这种情况下，您应该查看模拟而不是将值注入真实的电话层。

# c# - .NET 中是否有公开可用的素数表

> ID：11720474
> 
> 赞同：7
> 
> 时间：2012-07-30T11:20:42.510
> 
> 标签：c#, .net, vb.net, primes

我知道有一个用于所有类型的 .NET 字典和哈希表中：

`internal static class HashHelpers`

*   其他地方也有公共的吗？
*   如果不是，为什么它保留在内部不是很常用的东西吗？
*   如果我的代码中需要素数，复制和粘贴是否可行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T11:26:16.110

1.  据我所知，.NET 中没有该表的公共版本
2.  因为这个表不是一个范围内所有素数的表，而是一个任意选择的适合特定目的的素数子集的表（基于散列的容器的大小）
3.  不，您应该即时生成自己的表格，或者从许多*完整*来源之一复制粘贴表格。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T11:25:57.117

我无法回答您关于 HashHelpers 可用性的问题，但这里有一些您自己实现它的方法。

这里有一些关于生成素数的命令式实现的帖子： [最优雅的生成素数的方法](https://stackoverflow.com/questions/1042902/most-elegant-way-to-generate-prime-numbers)

此外，您可以在 LINQ 中执行此操作：

```
var odds =
    from n in Enumerable.Range(0, int.MaxValue)
    select 3 + (long) n * 2;

var primes = (new[] { 2L }).Concat(
    from p in odds
    where ! odds.TakeWhile(odd => odd * odd <= p).Any(odd => p % odd == 0)
    select p); 
```

资料来源：http: [//jacobcarpenter.wordpress.com/2008/03/26/linq-to-prime-numbers/](http://jacobcarpenter.wordpress.com/2008/03/26/linq-to-prime-numbers/)

编辑：不要在初始范围内使用 int.MaxValue 。将此限制在适当的范围内。

# java - 使用 jackcess 从 MS Access DB 获取查询数据？

> ID：11720477
> 
> 赞同：1
> 
> 时间：2012-07-30T11:20:58.030
> 
> 标签：java, ms-access, jdbc, jackcess

我可以使用 Jackcess 库在 MS Access 数据库中获取查询数据吗？有什么方法可以在不使用 odbc 网桥的情况下进行查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T14:26:08.447

抱歉，Jackcess[无法执行 sql 查询](http://jackcess.sourceforge.net/faq.html#query)。

# qt - 如何在 qt 设计器中使用我的树视图子类？

> ID：11720479
> 
> 赞同：4
> 
> 时间：2012-07-30T11:21:00.857
> 
> 标签：qt, qt-designer

我有一个 myTreeView 类，它是 QTreeView 的子类，我在其他小部件中使用它并手动进行布局。现在我想使用设计器将 myTreeView 包含在新的小部件中，这样我就可以避免布局代码。任何建议/参考，如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T12:50:55.903

将 a`QTreeView`放入 Qt Designer 中的布局中。右键单击`QTreeView`，单击**提升到...**使用对话框底部的表单添加一个**新的提升类定义。**

即，将派生类的基类指定为`QTreeView`，为小部件命名，并指定 Qt Design 可以在何处找到派生类的头文件。

这至少应该允许您在布局时将小部件放置在表单上。它很可能在布局上显示为一个灰色的空框（很像 QWidget），但是当您使用 .ui 文件编译和构建项目时，您的小部件将出现。

# performance - 我们如何为任何网页手动运行性能测试？

> ID：11720481
> 
> 赞同：1
> 
> 时间：2012-07-30T11:21:18.360
> 
> 标签：performance, testing

我无法在任何地方找到我们如何手动进行性能测试。请帮我解决这个问题。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T11:24:10.957

也许您正在寻找[JMeter](http://jmeter.apache.org/)或类似的工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-31T13:59:45.060

什么浏览器？当前大多数浏览器都支持[W3C Navigation Timing 规范](http://www.w3.org/TR/navigation-timing/)，并直接在 DOM 上公开性能数据。您可以从控制台、页面上的 javascript 或显示信息的浏览器扩展访问它。

如果您想要更多详细信息，例如资源加载瀑布，那么您通常可以直接从各种浏览器提供的开发工具中访问它。

您需要真正小心的一件事是确保您在与用户相似的配置中进行测试。如果您在本地运行服务器并从同一台机器甚至同一网络上的浏览器进行测试，那么您的性能数据将毫无价值（除非它是一个 Intranet 应用程序）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-20T13:05:38.373

您可以通过优化您的 css、Javascript 和图像（大小）对任何网页执行手动测试（性能测试）。

我认为 JMeter 是检查网页测试的最佳工具，如果你想添加一些你也可以添加的脚本。

您还可以检查 Firefox 的 Yslow 插件。此插件为您提供过滤数据以优化您的页面性能。还有一些在线链接可用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-25T09:28:24.940

> 我们如何为任何网页手动运行性能测试？

您可以简单地使用 GTMatrix 工具，该工具将详细响应您网站的整体性能。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-12-08T06:46:48.767

在没有任何工具的情况下进行性能测试的最佳方法是根据经验知识为每个页面提供标准加载时间。否则要求客户为每个页面提供一个理想的时间。可以验证加载时间。但是在同时有多个用户的情况下，JMeter 是最好的方法。它的开源。容易理解。你也会得到报告。

但是，当然有多种因素会阻碍性能。他们是 ：

1.  你的网速
2.  托管应用程序的服务器速度
3.  同时使用的用户数
4.  页面中的沉重图像
5.  最后但并非最不重要的链接，代码，总之代码中的内存消耗，可能是不需要的循环。开发者团队的所有礼物！

# css - 让 minify（css/js 压缩）在专用服务器上工作

> ID：11720487
> 
> 赞同：0
> 
> 时间：2012-07-30T11:21:29.593
> 
> 标签：css, webserver, gzip, minify

我正在使用缩小[http://code.google.com/p/minify/](http://code.google.com/p/minify/) 或[https://github.com/mrclay/minify/](https://github.com/mrclay/minify/)

我让 min 在我的本地环境中工作没有问题，并且 localhost:8888/min/f=min/quick-test.css 工作正常。

我试图在我的服务器的“开发”环境中运行它......所以我在 dev.example.com 上设置了一个子域，并在 /dev_html/ 而不是 /public_html/ 上创建了一个新的 Web 根目录。这一切似乎都在工作，因为当我运行 echo $_SERVER['DOCUMENT_ROOT'] 时，它按预期工作。所以我不认为子域与为什么这不起作用有关。

我正在我的服务器上直接在我的子域的文档根目录中使用未修改版本的 min 进行测试，但是当我测试 dev.mydomain.com/min/f=min/quick-test.css 时，我在要求。

感谢您的帮助，尼克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T12:29:53.733

您是否尝试过使用群组功能？

我实际上并没有尝试使用 f 参数，但就像您刚刚尝试过它一样，它仅适用于我本地。奇怪的！不过，这些小组工作得很好。

通过修改 /min/groupsConfig.php 来尝试一个组。

```
'css' => array('../css/stye_1.css', '../css/style_2.css'), 
```

路径是相对于 min 目录的。

使用 g 参数通过浏览器访问它：

```
/min/g=css 
```

# android - 按下菜单按钮时不会出现android选项菜单

> ID：11720491
> 
> 赞同：2
> 
> 时间：2012-07-30T11:21:48.070
> 
> 标签：android, android-optionsmenu

我想在我的 android 应用程序中添加一个选项菜单。我创建了 my_menu.xml 文件，如下所示。

```
 <?xml version="1.0" encoding="utf-8"?>
 <menu xmlns:android="http://schemas.android.com/apk/res/android">
 <item android:id="@+id/play" android:title="Play" android:icon="@android:drawable/ic_media_play"/>
 <item android:id="@+id/comments" android:title="Comments" android:icon="@android:drawable/ic_menu_edit"/>
</menu> 
```

然后我在我的 java 文件中覆盖了 onCreateOptionsMenu() 方法，如下所示。

```
 public boolean onCreateOptionsMenu(Menu menu) {
   MenuInflater inflater = getMenuInflater();
   inflater.inflate(R.menu.my_menu, menu);
   return true;
  } 
```

当我运行应用程序并单击菜单按钮时，它不会出现任何内容。任何人都可以给我一个解决这个问题的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T13:02:12.543

您必须删除第一行：

```
 <?xml version="1.0" encoding="utf-8"?> 
```

这个：

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/play" android:title="Play" android:icon="@android:drawable/ic_media_play"/>
    <item android:id="@+id/comments" android:title="Comments" android:icon="@android:drawable/ic_menu_edit"/>
</menu> 
```

结合：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.my_menu, menu);
    return true;
} 
```

在我的设备上工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T11:38:03.970

你用过这个代码片段吗？？

```
@Override
    public void onCreateContextMenu(ContextMenu menu, View v,
            ContextMenuInfo menuInfo) {
        // TODO Auto-generated method stub
        super.onCreateContextMenu(menu, v, menuInfo);
    } 
```

我认为添加这可能会有所帮助。

# ruby-on-rails-3 - Rails 3.2.7 的 RSpec 测试失败

> ID：11720494
> 
> 赞同：1
> 
> 时间：2012-07-30T11:21:55.223
> 
> 标签：ruby-on-rails-3, rspec2

将 Rails 从 3.2.6 更新到 3.2.7 时，我的项目[https://github.com/phoet/on_ruby](https://github.com/phoet/on_ruby)的 RSpec 测试套件失败。

```
rake spec
  1) Authorization should create an auth and a user from an auth-hash
     Failure/Error: Authorization.create_from_hash(auth)
     ActiveRecord::RecordNotUnique:
       SQLite3::ConstraintException: column nickname is not unique: INSERT INTO "users" ("admin", "available", "created_at", "description", "freelancer", "github", "hide_jobs", "image", "location", "name", "nickname", "slug", "updated_at", "url") VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
     # ./app/models/user.rb:74:in `create_from_hash!'
     # ./app/models/authorization.rb:15:in `create_from_hash'
     # ./spec/models/authorization_spec.rb:23:in `block (3 levels) in <top (required)>'
     # ./spec/models/authorization_spec.rb:22:in `block (2 levels) in <top (required)>'

Google Geocoding API error: over query limit.                  | ETA:  00:00:03
  2) Location finder should find users within the default scope
     Failure/Error: Location.unscoped.all.size.should be(2)

       expected #<Fixnum:5> => 2
            got #<Fixnum:21> => 10

       Compared using equal?, which compares object identity,
       but expected and actual are not the same object. Use
       'actual.should eq(expected)' if you don't care about
       object identity in this example.
     # ./spec/models/location_spec.rb:16:in `block (3 levels) in <top (required)>' 
```

直接运行RSpec不会出现这个问题，travis上也不会出现：[http ://travis-ci.org/#!/phoet/on_ruby/builds/1989858](http://travis-ci.org/#!/phoet/on_ruby/builds/1989858)

看起来好像事务没有正确回滚。有人经历过类似的行为吗？

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T22:05:25.767

我也一样。据我所知，rails 现在设置了 ENV['RAILS_ENV']=development，因此您的测试正在针对您的开发数据库运行。尝试`rake spec RAILS_ENV=test`

看起来是这个问题：[https ://github.com/rails/rails/issues/7175](https://github.com/rails/rails/issues/7175)

# android - 如何在 Android 游戏中使用特定尺寸的图像到所有屏幕分辨率？

> ID：11720497
> 
> 赞同：-4
> 
> 时间：2012-07-30T11:22:12.317
> 
> 标签：android, android-emulator

如何通过在自定义视图中编码来设置所有屏幕分辨率的图像？不是通过创建 xml

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T11:25:38.253

如果您`LinearLayout`使用`fill_parent`参数制作并在其中放置图像，则可以完成此操作。检查[此问题](https://stackoverflow.com/questions/6169927/set-size-of-imageview-in-px-at-runtime)以获取代码示例。

就“所有屏幕分辨率”而言，Android 主要负责这一点。如果您希望图像填充屏幕宽度的一部分（也许您所说的“条带”是什么意思？），请使用`fill_parent`宽度和`wrap_content`高度属性。或者，如果您希望图像仅填充该“条”宽度的一半，请获取设备的宽度（以像素为单位）并除以 2，即 `getWindowManager().getDefaultDisplay().getWidth(); / 2`，然后以`ImageView`这种方式设置 的尺寸。这将适用于任何 Android 设备，因为您根据设备为图像设置不同的值，而不是硬编码任意尺寸值，例如 100 像素。

这是否涵盖了您要问的内容？你的问题不是太具体。

# javascript - 使用正则表达式对象的 Javascript 字符串验证

> ID：11720498
> 
> 赞同：1
> 
> 时间：2012-07-30T11:22:17.113
> 
> 标签：javascript, regex, validation

我是正则表达式和 Javascript 的新手。我有以下问题：需要检查文本字段是否存在一 (1) 或多个 (n) 连续`*`（星号）字符/字符，例如。`*`或`**`或`***`或 无限 (n) `*`。允许使用字符串，例如。`*tomato`或`tomato*`或`**tomato`或`tomato**`或 作为`many(n)*tomato many(n)*`。所以，到目前为止，我已经尝试了以下方法：

```
var str = 'a string'
var value = encodeURIComponent(str);
var reg = /([^\s]\*)|(\*[^\s])/;

if (reg.test(value) == true ) {
    alert ('Watch out your asterisks!!!')
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T11:40:14.793

通过你的问题很难破译你所追求的......但让我试试：

## 只允许在开头或结尾使用星号

如果您只在开头或结尾（但不能在两边）允许任意数量（至少一个）星号，例如：

*   `*****tomato`
*   `tomato******`
*   **但不是** `**tomato*****`

然后使用这个正则表达式：

```
reg = /^(?:\*+[^*]+|[^*]+\*+)$/; 
```

## 匹配星号的前后数量

如果您要求 biginning 处的星号数量与末尾的星号数量相匹配，例如

*   `*****tomato*****`
*   `*tomato*`
*   **但不是** `**tomato*****`

然后使用这个正则表达式：

```
reg = /^(\*+)[^*]+\1$/; 
```

## 结果？

从您的问题中不清楚当这些正则表达式中的每一个匹配时结果应该是什么？对上述正则表达式测试为阳性的字符串是好是坏取决于您和您的要求。只要您有正确的正则表达式，您就可以提供所需的功能。

我还编写了正则表达式来排除字符串中的星号。如果您还需要拒绝空格或其他任何内容，只需调整`[^...]`上述表达式的部分即可。

> ***注意**：这两个正则表达式都未经测试，但应该可以让您开始构建您实际需要并在代码中要求的表达式。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T11:30:08.663

如果我理解正确，您正在寻找这样的模式：

```
var pattern = /\**[^\s*]+\**/; 
```

这不会匹配像`*****`or之类的字符串`** ***`，但会匹配`***d*** *d`或您所说的所有示例都是有效的（`***tomatos`等）。
如果我误解了，请告诉我，我会看看我能做些什么来提供帮助。PS：我们都是从某个时候开始的新手，没什么好羞愧的，更不用说道歉了：）

在对您的问题进行编辑后，我收集到需要在输入的开头或结尾使用星号，但字符串还必须包含至少 1 个其他字符，因此我提出以下解决方案：

```
var pattern = /^\*+[^\s*]+|[^\s*]+\*+$/;
'****'.match(pattern);//false
' ***tomato**'.match(pattern);//true 
```

但是，如果`*tomato*`不允许，则必须将正则表达式更改为：

```
var pattern = /^\*+[^\s*]+$|^[^\s*]+\*+$/; 
```

[这是](http://www.regular-expressions.info/)一个方便的站点，可帮助您在正则表达式的神奇世界中找到自己的方式。

# php - 使用AJAX完整模板或JSON数据进行数据展示哪个更好更高效

> ID：11720505
> 
> 赞同：0
> 
> 时间：2012-07-30T11:22:42.273
> 
> 标签：php, jquery, json

我是 jquery 和 JSON 的新手，我对什么是最好的和专业的方法感到有些困惑。

假设我有一长串数据，如歌曲名称、艺术家、作者等。

现在我想动态地显示数据库中的记录。

我有两个选择

1.  在这里，我返回完整的 html 并使用目标元素更新它
2.  其次是检索包含歌曲信息的 JSON 数据，然后使用 javascript 构建该 html 并填充它。

我想知道哪种方法更好并被高流量网站使用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T11:25:49.257

第二个更好，因为通过网络发送的数据大小。减少它会提高性能。编写一个将使用 JSON 数据生成 HTML 元素的函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T11:26:06.953

如果您正在运行一个包含大量数据的高流量站点，那么使用 JSON 的第二种解决方案确实具有只为您提供原始数据并依靠浏览器生成 HTML 来显示数据的优势。

就我个人而言，我需要听到一些真正令人信服的论点才能完全使用第一个选项。

# sql - Oracle CASE 表达式混淆

> ID：11720509
> 
> 赞同：3
> 
> 时间：2012-07-30T11:22:44.843
> 
> 标签：sql, oracle

谁能告诉我以下查询中有什么问题？

```
select case 
         when ANALYSISCODE is null and
              studydomainmdata.studydomainmetadataid > 0
           then 'CD'  
         when ANALYSISCODE is null and
              studydomainmdata.studydomainmetadataid < 0
           then 'CD1'  
         when analysiscode is not null
           then ANALYSISCODE
         else 'N/A'
       end as ANALYSISCODE
from studyanalysis
inner join (slmetadata
              inner join studydomainmdata 
                on slmetadata.slmetadataid = studydomainmdata.slmetadataid and
                   studydomainmdata.studydomainmetadataid=-9)
  on studyanalysis.analysisid = slmetadata.analysisid; 
```

我的预期结果是：

*   CD1 如果 studydomainmetadataid 小于 0
*   CD 如果 studydomainmetadataid > 0 (i,e 85)
*   'xxx' 如果 ANALYSISCODE 不为空

我得到空的 ANALYSISCODE。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T08:53:55.697

我猜你的查询根本没有返回任何东西，因此`CASE`没有被测试，你也没有得到任何返回的结果（甚至没有你的`ELSE`默认值）。

为了测试这个猜测，用`SELECT COUNT(*) FROM`这样的包装你的查询：

```
SELECT count(*) FROM 
(
select case           
       when ANALYSISCODE is null and studydomainmdata.studydomainmetadataid > 0
       then 'CD'
       when ANALYSISCODE is null and studydomainmdata.studydomainmetadataid < 0
       then 'CD1'
       when analysiscode is not null
       then ANALYSISCODE
       else 'N/A'
       end as ANALYSISCODE 
  from studyanalysis 
 inner join (slmetadata 
             inner join studydomainmdata 
                     on slmetadata.slmetadataid = studydomainmdata.slmetadataid 
                    and studydomainmdata.studydomainmetadataid=-9)
    on studyanalysis.analysisid = slmetadata.analysisid
) 
```

如果`count(*)`返回`0`，那么我的猜测是正确的，并且您的查询根本没有返回任何数据，因此是 null 值。

该`CASE`语句只能对查询返回的记录起作用，如果没有重新调整的记录，`CASE`则不会执行。

希望能帮助到你...

# css - 显示 LI 内联并溢出包含的 DIV

> ID：11720510
> 
> 赞同：0
> 
> 时间：2012-07-30T11:22:49.670
> 
> 标签：css

我有一个包含横幅图像无序列表的包装器，这些将是一个 jQuery 滑块。但是，与其隐藏非活动图像，不如`overflow:hidden`让图像显示内联并溢出包含`<div>`，我该怎么做呢？

```
#slide-wrapper{
    width:760px;
    float:left;
    position:relative;
ul{
    margin:0;
    padding:0;
    position:absolute;
li{
    list-style-type:none;
    margin:0;
    padding:0;
    width:760px;
    height:340px;
    display:inline;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T11:27:37.533

嘿，现在根据这个更改您的代码：

```
#slide-wrapper {
    width:760px;
    float:left;
    position:relative;
}
ul {
    margin:0;
    left:0;
    top:0;
    overflow:hidden;
    padding:0;
    position:absolute;
}
li {
    list-style-type:none;
    margin:0;
    padding:0;
    width:760px;
    height:340px;
    float:left;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T11:32:49.713

编辑：没有看到您关于使用 LESS CSS 的消息，已修改。

```
#slide-wrapper {
   width:760px;
   float:left;
   position:relative;
   overflow:hidden; 
ul {
   margin:0;
   padding:0;
   position:absolute;
   top: 0;
   left: 0;
li{
   list-style-type:none;
   margin:0;
   padding:0;
   width:760px;
   height:340px;
    float:left;
} 
```

# javascript - jQuery：滚动时更改页码的css

> ID：11720511
> 
> 赞同：2
> 
> 时间：2012-07-30T11:22:59.813
> 
> 标签：javascript, jquery

我试图弄清楚当用户滚动到#bx2 时如何将#pg2 的css 类更改为“活动”，当用户滚动到#bx3 时如何将#pg3 更改为“活动”等等......

```
<ul id="navi" style="position:fixed;top:0">
<li><a href="#bx1" id="pg1" class="active">1</a></li>
<li><a href="#bx2" id="pg2" class="">2</a></li>
<li><a href="#bx3" id="pg3" class="">3</a></li>
...
<li><a href="#bx00" id="pg100" class="">100</a></li>
</ul>

<div class="tallbigblock" id="bx1">...</div>
<div class="tallbigblock" id="bx2">...</div>
<div class="tallbigblock" id="bx3">...</div>
...
<div class="tallbigblock" id="bx100">...</div> 
```

这是我的jQuery：

```
$( window ).scroll( function() {

var t = $( "#bx1" ).offset().top;
if( $(this).scrollTop() > t )
{
    $( "#navi li a" ).removeClass( "active" ).hasClass( "active" );
    $( "#pg1" ).addClass( "active" );
}

var t = $( "#bx2" ).offset().top;
if( $(this).scrollTop() > t )
{
    $( "#navi li a" ).removeClass( "active" ).hasClass( "active" );
    $( "#pg2" ).addClass( "active" );
}

var t = $( "#bx3" ).offset().top;
if( $(this).scrollTop() > t )
{
    $( "#navi li a" ).removeClass( "active" ).hasClass( "active" );
    $( "#pg3" ).addClass( "active" );
}

}); 
```

问题是，如果我有 50 个“.tallbigblock” div... 或动态生成的“.tallbigblock” div...

我一直在尝试弄清楚如何使 jquery 为*n*个“.tallbigblock” div 工作，而无需手动为每个 div 编写 jquery ...希望你们能帮助我...

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T11:29:10.710

这是未经测试的，但与原始代码的唯一区别是它不是硬编码的，并且一次只允许一个框处于活动状态。

```
$(window).scroll(function() {
    var scrollTop = $(this).scrollTop();

    $('#navi li a').removeClass('active');

    $('.tallbigblock').each(function()
    {
        if(scrollTop > $(this).offset().top)
        {
            $('#pg'+this.id.split('x')[1]).addClass('active');

            return false; // this breaks the each loop
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T15:51:22.543

根据@summoner 发布的代码，我修改并测试了以下代码：

```
$(window).scroll(function() {

  var scrollTop = $(this).scrollTop();
  $(".tallbigblock").each(function() {
    if(scrollTop > $(this).offset().top)
    {
      var i = $(this).attr('id');
      var nid = "#pg" + i.replace("bx", "");
      $("#navi li a").removeClass("active").hasClass("active");
      $(nid).addClass("active");        
    }
  });
}); 
```

# ruby-on-rails - 根据创建日期列出对象

> ID：11720513
> 
> 赞同：0
> 
> 时间：2012-07-30T11:23:13.770
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1

很抱歉这个业余问题，但我对 Rails 还是很陌生。我目前有一个创建工作的应用程序，我想在创建日期下方显示工作，就像在[Dribble上一样](http://www.dribbble.com/jobs)

目前显示我的工作如下：

```
 <% @jobs.each do |job| %>
   <div class="job-wrapper"><%= link_to user_job_path(job.user_id ,job) do %>
    <div class="job">
     <div class="job-desc"><strong><%= job.company %></strong> are looking for a <strong><%= job.job_title %></strong>
      <div class="job-sal"><%= job.job_salary %></div>
     </div>
    </div>
   </div>
  <% end %>
  <% end %> 
```

我确定我需要创建某种循环来完成这项工作，但不确定如何合并它，以便日期仅在作业顶部显示一次，然后显示在该日期创建的所有作业？

任何帮助将非常感激！谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T11:31:14.887

试试下面的模式——

```
<% @job.group_by{|x| x.created_at.to_date }.each do |date,jobs_on_that_date| %>
  <%= date %>
  <% jobs_on_that_date.each do |job| %>
    # render the job
  <% end %>
<% end %> 
```

基本上，您需要按日期（或您想要分组的任何内容）对您的工作进行分组，然后在您分组的内容上获得一个哈希键。然后渲染键（日期），后跟与该键相关的对象列表。

# java - AspectJ：来自 joinPoint 的线程名称

> ID：11720516
> 
> 赞同：0
> 
> 时间：2012-07-30T11:23:22.320
> 
> 标签：java, aspectj

是否可以从 joinPoint 获取/设置线程名称？

```
@Around("call(void methodA())")  
public Object conditionB(ProceedingJoinPoint joinPoint) throws Throwable 
{   
    Object res = joinPoint.proceed();
    System.out.println(Thread.currentThread().getName());  
    return res;
} 
```

`Thread.currentThread().getName()``main`从 AspectJ 类中获取线程的名称。是否可以获得（可能来自joinPoit）执行methodA的线程名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T11:33:08.323

你试过这样做吗？尝试`methodA()`从另一个线程调用该方法。

我想这真的有可能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T12:05:42.707

实际上`Thread.currentThread().getName()`工作正常。它是在methodA中设置的名称。请注意相同的线程名称。

# windows-phone-7.1 - Windows Phone 7中的TaskViewer？

> ID：11720519
> 
> 赞同：0
> 
> 时间：2012-07-30T11:23:31.447
> 
> 标签：windows-phone-7.1

> **可能重复：**
> [如何在 Windows Phone 7 中获取任务管理器详细信息？](https://stackoverflow.com/questions/11721322/how-to-get-task-manager-details-in-windows-phone-7)

请给我关于 Windows Phone 7 中 TaskViewer 的想法？通过使用它我们可以获得正在运行的进程列表吗？

# git - Github 文件类

> ID：11720524
> 
> 赞同：1
> 
> 时间：2012-07-30T11:23:48.980
> 
> 标签：git, version-control, github

git handel 怎么会出现这样的情况。

一个由 git 管理并托管在 Github 上的项目有许多合作者。两个从事一个项目的人在本地计算机上对同一个文件进行了更改。例如，他们都在处理样式表。然后他们都提交最新的更改并将它们发送到 Github。

这不会引起问题吗，如果他们都在样式表中更改了不同的内容，那么只有一个人的工作会成为最新的版本，而其他人的工作将成为历史。

我不太明白如何处理这种情况以防止在多人处理同一个文件时丢失新的更改。

谁能解释它是如何工作的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T11:31:41.080

补充 Charlie Rudenstal 的回答：第一个合作者的推动会成功。第二个协作者的推送将失败，并显示“拒绝，非快进”消息。然后第二个协作者获取最后的更改，将它们与他的更改合并（可能解决合并冲突）并再次推送，然后它将成功。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T11:26:28.037

如果第一个协作者已经进行了推送，则来自第二个协作者的推送将被拒绝。然后，第二个协作者必须先完成第一个协作者的更改，`git fetch`然后`git merge`他或她才能再次尝试推送提交。（或者`git pull`但要注意怪癖[http://longair.net/blog/2009/04/16/git-fetch-and-merge/](http://longair.net/blog/2009/04/16/git-fetch-and-merge/)）

`git merge`会尽量自动合并。无法自动合并的文件将显示为冲突。这些必须手动解决，通过手动编辑冲突文件或使用`git mergetool`.

冲突文件的内容可能如下所示：

```
<<<<<<< HEAD:file.txt
Hello world
=======
Goodbye
>>>>>>> 77976da35a11db4580b80ae27e8d65caf5208086:file.txt 
```

已解决的文件被标记为已解决并使用`git add`. 如果在合并期间出现任何冲突，则协作者现在必须`git commit`在推送更改之前进行。

还。另一种使用方法`git pull --rebase`： [我什么时候应该使用 git pull --rebase？](https://stackoverflow.com/questions/2472254/when-should-i-use-git-pull-rebase/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T11:30:15.820

第一个推送到 github 上服务器的人获胜。这是通过 解决的`git`，而不是 Github。下一个人会收到一条消息，说他们的推送被拒绝了。

```
! [rejected]        master -> master (non-fast-forward)
error: failed to push some refs to 'ssh://<url>'
To prevent you from losing history, non-fast-forward updates were rejected
Merge the remote changes (e.g. 'git pull') before pushing again.  See the
'Note about fast-forwards' section of 'git push --help' for details. 
```

见[http://gitref.org/remotes/#push](http://gitref.org/remotes/#push)

# c# - IRC 机器人中的消息队列

> ID：11720525
> 
> 赞同：0
> 
> 时间：2012-07-30T11:23:54.210
> 
> 标签：c#, hashtable, bots, irc, concurrent-collections

我目前正在编写一个 IRC 机器人。我想避免过多的洪水，所以我决定创建一个消息队列，每隔 X 毫秒发送下一条消息，但我的[尝试](https://github.com/HaxtonFale/HuxBot/blob/master/HuxBot/SendQueue.cs)失败了。第 43 行：

```
unset.Add((string)de.Key); 
```

引发 OutOfMemory 异常。我完全不知道我做错了什么。

也许我还应该解释这种（可能很复杂）排队方式背后的一般想法。

首先，主要`Hashtable queueht`存储`ConcurrentQueue<string>`类型，其中消息的目标用作键。我希望机器人遍历哈希表，从每个队列发送一条消息（如果队列被清空，则删除密钥）。我想不出一个合适的方法来处理哈希表本身，所以我决定创建另一个队列，`ConcurrentQueue<string> queue`它会在清空队列时存储键和它们的使用顺序。

假设一个队列中有数百个项目的假设情况（这是可能的），任何新请求都会被天知道延迟多长时间（消息之间的内置延迟加上延迟），所以我有方法 Add() rebuild `queue`。我创建了一个深层副本`queueht`（或者我希望如此）并`queue`基于这个一次性副本生成一个新副本，并在此过程中摆脱它。

我认为我的思路和/或代码是非常错误的，因为我几乎没有线程经验，集合比简单数组和 OOP 习惯/约定更复杂。我非常感谢通过解释解决我的问题。提前致谢！

编辑：发布整个班级。

```
class SendQueue
{
    Hashtable queueht;
    ConcurrentQueue<string> queue;
    Timer tim;
    IRCBot host;
    public SendQueue(IRCBot host)
    {
        this.host = host;
        this.tim = new Timer();
        this.tim.Elapsed += new ElapsedEventHandler(this.SendNewMsg);
        this.queueht = new Hashtable();
        this.queue = new ConcurrentQueue<string>();
    }
    public void Add(string target, string msg)
    {
        try
        {
            this.queueht.Add(target, new ConcurrentQueue<string>());
        }
        finally
        {
            ((ConcurrentQueue<string>)this.queueht[target]).Enqueue(msg);
        }
        Hashtable ht = new Hashtable(queueht);
        List<string> unset = new List<string>();
        while (ht.Count > 0)
        {
            foreach (DictionaryEntry de in ht)
            {
                ConcurrentQueue<string> cq = (ConcurrentQueue<string>)de.Value;
                string res;
                if (cq.TryDequeue(out res))
                    this.queue.Enqueue((string)de.Key);
                else
                    unset.Add((string)de.Key);
            }
        }
        if (unset.Count > 0)
            foreach (string item in unset)
                ht.Remove(item);
    }
    private void SendNewMsg(object sender, ElapsedEventArgs e)
    {
        string target;
        if (queue.TryDequeue(out target))
        {
            string message;
            if (((ConcurrentQueue<string>)queueht[target]).TryDequeue(out message))
                this.host.Say(target, message);
        }
    }
} 
```

EDIT2：我知道这`while (ht.Count > 0)`将无限期执行。它只是以前版本的一部分，看起来像这样：

```
while (ht.Count > 0)
{
    foreach (DictionaryEntry de in ht)
    {
        ConcurrentQueue<string> cq = (ConcurrentQueue<string>)de.Value;
        string res;
        if (cq.TryDequeue(out res))
            this.queue.Enqueue((string)de.Key);
        else
            ht.Remove((string)de.Key);
    }
} 
```

但是集合在评估时不能被修改（我发现很难），所以它不再那样了。我只是忘了更改条件`while`。

我冒昧地尝试了 TheThing 的解决方案。虽然它似乎实现了它的目的，但它并没有发送任何消息......这是它的最终形式：

```
class User
{
    public User(string username)
    {
        this.Username = username;
        this.RequestQueue = new Queue<string>();
    }
    public User(string username, string message)
        : this(username)
    {
        this.RequestQueue.Enqueue(message);
    }
    public string Username { get; set; }
    public Queue<string> RequestQueue { get; private set; }
}
class SendQueue
{
    Timer tim;
    IRCBot host;
    public bool shouldRun = false;
    public Dictionary<string, User> Users;  //Dictionary of users currently being processed
    public ConcurrentQueue<User> UserQueue; //List of order for which users should be processed
    public SendQueue(IRCBot launcher)
    {
        this.Users = new Dictionary<string, User>();
        this.UserQueue = new ConcurrentQueue<User>();
        this.tim = new Timer(WorkerTick, null, Timeout.Infinite, 450);
        this.host = launcher;
    }
    public void Add(string username, string request)
    {
        lock (this.UserQueue) //For threadsafety
        {
            if (this.Users.ContainsKey(username))
            {
                //The user is in the user list. That means he has previously sent request that are awaiting to be processed.
                //As such, we can safely add his new message at the end of HIS request list.

                this.Users[username].RequestQueue.Enqueue(request); //Add users new message at the end of the list
                return;
            }
            //User is not in the user list. Means it's his first request. Create him in the user list and add his message
            var user = new User(username, request);
            this.Users.Add(username, user); //Create the user and his message
            this.UserQueue.Enqueue(user); //Add the user to the last of the precessing users.
        }
    }
    public void WorkerTick(object sender)
    {
        if (shouldRun)
        {
            //This tick runs every 400ms and processes next message to be sent.
            lock (this.UserQueue) //For threadsafety
            {
                User user;
                if (this.UserQueue.TryDequeue(out user))            //Pop the next user to be processed.
                {
                    string message = user.RequestQueue.Dequeue();   //Pop his request
                    this.host.Say(user.Username, message);
                    if (user.RequestQueue.Count > 0)                //If user has more messages waiting to be processed
                    {
                        this.UserQueue.Enqueue(user);               //Add him at the end of the userqueue
                    }
                    else
                    {
                        this.Users.Remove(user.Username);           //User has no more messages, we can safely remove him from the user list
                    }
                }
            }
        }
    }
} 
```

我尝试切换到`ConcurrentQueue`，它应该也可以工作（尽管以更线程安全的方式，并不是说我对线程安全一无所知）。我也尝试切换到`System.Threading.Timer`，但这也无济于事。我很久以前就没有想法了。

编辑：作为一个彻头彻尾的白痴，我没有设置 Timer 启动的时间。将 bool 部分更改为更改计时器的到期时间和间隔的 Start() 方法使其工作。问题解决了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T12:09:15.917

据我所知，您希望能够按顺序排列用户以及他们的每个请求。

这意味着，如果一个用户请求像 1000 个请求，其他人仍然可以发送他们的请求，并且机器人以 FIFO 方式为每个用户提供 1 个请求。

如果是这样，那么您需要的是一种类似于此功能的方式：

```
class User
{
    public User(string username)
    {
        this.Username = username;
        this.RequestQueue = new Queue<string>();
    }

    public User(string username, string message)
        : this(username)
    {
        this.RequestQueue.Enqueue(message);
    }

    public string Username { get; set; }
    public Queue<string> RequestQueue { get; private set; }
}

///......................

public class MyClass
{
    public MyClass()
    {
        this.Users = new Dictionary<string, User>();
        this.UserQueue = new Queue<User>();
    }

    public Dictionary<string, User> Users; //Dictionary of users currently being processed
    public Queue<User> UserQueue; //List of order for which users should be processed

    public void OnMessageRecievedFromIrcChannel(string username, string request)
    {
        lock (this.UserQueue) //For threadsafety
        {
            if (this.Users.ContainsKey(username))
            {
                //The user is in the user list. That means he has previously sent request that are awaiting to be processed.
                //As such, we can safely add his new message at the end of HIS request list.

                this.Users[username].RequestQueue.Enqueue(request); //Add users new message at the end of the list
                return;
            }

            //User is not in the user list. Means it's his first request. Create him in the user list and add his message
            var user = new User(username, request);
            this.Users.Add(username, user); //Create the user and his message
            this.UserQueue.Enqueue(user); //Add the user to the last of the precessing users.
        }
    }

    //**********************************

    public void WorkerTick()
    {
        //This tick runs every 400ms and processes next message to be sent.
        lock (this.UserQueue) //For threadsafety
        {
            var user = this.UserQueue.Dequeue(); //Pop the next user to be processed.
            var message = user.RequestQueue.Dequeue(); //Pop his request

            /////PROCESSING MESSAGE GOES HERE

            if (user.RequestQueue.Count > 0) //If user has more messages waiting to be processed
            {
                this.UserQueue.Enqueue(user); //Add him at the end of the userqueue
            }
            else
            {
                this.Users.Remove(user.Username); //User has no more messages, we can safely remove him from the user list
            }
        }
    }
} 
```

基本上，我们有一个用户队列。我们弹出下一个用户，处理他的第一个请求，如果他有更多请求等待处理，则将他添加到用户列表的末尾。

希望这能清除一些功能。作为记录，上面的代码更像是伪代码而不是功能代码 xD

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T12:30:23.990

据我所知，您永远不会逃脱，`while`因为您永远不会从临时哈希表中删除项目，`ht`直到它之外。因此，计数将始终为`> 0`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-03T19:04:29.033

试试这个：

```
class User
{
    public User(string username)
    {
        this.Username = username;
        this.RequestQueue = new Queue<string>();
    }

    private static readonly TimeSpan _minPostThreshold = new TimeSpan(0,0,5); //five seconds

    public void PostMessage(string message)
    {
        var lastMsgTime = _lastMessageTime;
        _lastMessageTime = DateTime.Now;
        if (lastMsgTime != default(DateTime))
        {
            if ((_lastMessageTime - lastMsgTime) < _minPostThreshold)
            {
                return;
            }
        }

        _requestQueue.Enqueue(message);     
    }

    public string NextMessage
    {
        get
        {
            if (!HasMessages)
            {
                return null;
            }

            return _requestQueue.Dequeue();
        }
    }

    public bool HasMessages
    {
        get{return _requestQueue.Count > 0;}
    }

    public string Username { get; set; }
    private Queue<string> _requestQueue { get; private set; }
    private DateTime _lastMessageTime;
}

class SendQueue
{
    Timer tim;
    IRCBot host;
    public bool shouldRun = false;
    public Dictionary<string, User> Users;  //Dictionary of users currently being processed
    private Queue<User> _postQueue = new Queue<User>();

    public SendQueue(IRCBot launcher)
    {
        this.Users = new Dictionary<string, User>();
        this.tim = new Timer(WorkerTick, null, Timeout.Infinite, 450);
        this.host = launcher;
    }

    public void Add(string username, string request)
    {
        User targetUser;
        lock (Users) //For threadsafety
        {
            if (!Users.TryGetValue(username, out targetUser))
            {
                //User is not in the user list. Means it's his first request. Create him in the user list and add his message
                targetUser = new User(username);
                Users.Add(username, targetUser); //Create the user and his message
            }

            targetUser.PostMessage(request);
        }

        lock(_postQueue)
        {
            _postQueue.Enqueue(targetUser);
        }
    }

    public void WorkerTick(object sender)
    {
        if (shouldRun)
        {
            User nextUser = null;

            lock(_postQueue)
            {
                if (_postQueue.Count > 0)
                {
                    nextUser = _PostQueue.Dequeue();
                }
            }

            if (nextUser != null)
            {                
                host.Say(nextUser.Username, nextUser.NextMessage);
            }
        }
    }
} 
```

更新：在更好地理解要求后更改。

这提供了每个用户的洪水控制和整体节流。它也简单得多。

请注意，这是动态编写的，甚至还没有编译，并且可能需要考虑一些围绕用户实例的线程问题，但它应该可以工作。

# php - 用于 csv 文件操作的 php 的 Ajax 调用挂起

> ID：11720532
> 
> 赞同：0
> 
> 时间：2012-07-30T11:24:24.607
> 
> 标签：php, ajax, optimization

好的，所以我有一个按钮。按下时它会这样做：

**Javascript**

```
$("#csv_dedupe").live("click", function(e) {
    file_name = 'C:\\server\\xampp\\htdocs\\Gene\\IMEXporter\\include\\files\\' + $("#IMEXp_import_var-uploadFile-file").val();
    $.post($_CFG_PROCESSORFILE, {"task": "csv_dupe", "file_name": file_name}, function(data) {
        alert(data);
    }, "json")
}); 
```

这个 ajax 调用被发送到这个：

**PHP**

```
class ColumnCompare {
    function __construct($column) {
        $this->column = $column;
    }

    function compare($a, $b) {
        if ($a[$this->column] == $b[$this->column]) {
            return 0;
        }
        return ($a[$this->column] < $b[$this->column]) ? -1 : 1;
    }
}

if ($task == "csv_dupe") {
    $file_name = $_REQUEST["file_name"];

    // Hard-coded input
    $array_var = array();
    $sort_by_col = 9999;
    //Open csv file and dump contents
    if(($handler = fopen($file_name, "r")) !== FALSE) {
        while(($csv_handler = fgetcsv($handler, 0, ",")) !== FALSE) {
            $array_var[] = $csv_handler;
        }
    }
    fclose($handler);

    //copy original csv data array to be compared later
    $array_var2 = $array_var;

    //Find email column
    $new = array();
    $new = $array_var[0];
    $findme = 'email';
    $counter = 0;
    foreach($new as $key) {
        $pos = strpos($key, $findme);
        if($pos === false) {
            $counter++;
        }
        else {
            $sort_by_col = $counter;
        }
    }
    if($sort_by_col === 999) {
        echo 'COULD NOT FIND EMAIL COLUMN';
        return;
    }

    //Temporarily remove headers from array
    $headers = array_shift($array_var);
    // Create object for sorting by a particular column
    $obj = new ColumnCompare($sort_by_col);
    usort($array_var, array($obj, 'compare'));

    // Remove Duplicates from a coulmn
    array_unshift($array_var, $headers);
    $newArr = array();
    foreach ($array_var as $val) {
        $newArr[$val[$sort_by_col]] = $val;
    }
    $array_var = array_values($newArr);

    //Write CSV to standard output
    $sout = fopen($file_name, 'w');
    foreach ($array_var as $fields) {
        fputcsv($sout, $fields);
    }
    fclose($sout);

    //How many dupes were there?
    $number = count($array_var2) - count($array_var);    
    echo json_encode($number);
} 
```

这个 php 从 csv 文件中获取所有数据。列和行，并使用 fgetcsv 函数将所有数据分配给一个数组。现在我在那里有代码，它还通过单个列对 csv 文件进行重复数据删除（查找并删除副本的副本）。保持整个数组的行列结构不变。

唯一的问题是，即使它适用于我测试过的有 10 行左右的小文件，它也不适用于 25,000 行的文件。

现在在你说它之前，我已经进入了我的 php.ini 文件并将 max_input、文件大小、最大运行时间等更改为天文值，以确保 php 可以接受高达 999999999999999MB 的文件大小和运行几个脚本的时间一百年。

我使用了一个包含 25,000 条记录的文件并执行了脚本。两个小时过去了，fiddler 仍然显示尚未发回 http 请求。有人可以给我一些优化服务器和代码的方法吗？

我能够使用来自帮助我解决另一个问题的用户的代码，我最初发布了如何做到这一点。我现在担心的是，即使我对其进行了测试，但我想知道如何在不到一分钟的时间内使其工作。Excel 可以在几秒钟内对一列一百万条记录进行重复数据删除 为什么 php 不能这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T21:00:59.440

Sophie，我假设您在编写此类应用程序方面没有经验，因为 IMO 这不是解决此问题的方法。所以我会相应地推销这个。

当您遇到这样的性能问题时，您确实需要对问题进行二进制切分以了解发生了什么。所以第 1 步是将 PHP 计时问题与 AJAX 分离，并简单了解您的方法为何如此迟钝。使用本地安装的 PHP-cgi 执行此操作，甚至使用您的 Web 安装并发出标头（'Context-Type: text/plain'）并转储每个步骤的微定时。读取 CSV 需要多长时间，同上排序，然后是 nodup，然后是写入？对一系列 CSV 文件大小执行此操作，每次行数增加 10 倍。

还要在每个步骤中执行 memory_get_usage() 以查看您是如何占用内存的。因为你的方法是一个真正的猪，你可能会因为达到配置的内存限制而出错——一个 phpinfo() 会告诉你这些。

读取、nodup 和写入都是 o(N)，但排序最多为 o(NlogN)，最坏为 o(N ² )。您的排序也每次比较调用一个 PHP 方法，所以会很*慢*。

我不明白你为什么要进行排序，因为你的 nodup 算法没有利用行已排序的事实。

（顺便说一句，排序也会对标题行进行内联排序，所以如果你仍然想这样做，你需要在排序*之前取消它。）*

您还需要考虑其他问题，例如

*   使用原始参数作为文件名会使您容易受到攻击。最好修复相对于 DOCROOT/Gene/IMEXporter/include 的补丁，并对文件名强制执行一些语法。

*   您需要考虑读取和重写大文件的原子性作为对 Web 请求的响应——如果两个客户端同时发出请求会发生什么。

*   最后，您将其与 Excel 进行比较，加载和保存 Excel 文件可能需要时间，而且 Excel 不必扩展以同时响应 10 或 100 或用户。在事务系统中，您通常使用 D/B 后端来处理此类事情，如果您使用 Web 界面来计算繁重的任务，您需要接受 Apache（或等效的服务器）硬内存和时间限制并砍掉您的算法和相应的方法。

# java - 如何从 Eclipse 在 jetty 8 上运行 Web 服务 maven 项目？

> ID：11720537
> 
> 赞同：2
> 
> 时间：2012-07-30T11:24:47.327
> 
> 标签：java, eclipse, web-services, jetty, maven-3

我有一个之前创建并部署在 Tomcat7 中的 REST Web 服务。我想将它部署在 Jetty 上，如上[一个问题中所述](https://stackoverflow.com/questions/11691036/is-it-possible-to-define-jetty-server-in-eclipse-runtime-environment)，我创建了一个 Maven 项目并在那里复制了我的文件并配置了依赖项，我可以成功地从 Eclipse 运行 Maven 安装。

这是我`build`在 POM.xml 中的一部分：

```
 <build>
    <plugins>
        <plugin>
             <groupId>org.mortbay.jetty</groupId>
             <artifactId>maven-jetty-plugin</artifactId>
        </plugin>

        <plugin>
            <artifactId>maven-war-plugin</artifactId>
            <version>2.2</version>
            <configuration>
                <dependentWarExcludes></dependentWarExcludes>
                <webappDirectory>
                    WebContent
                </webappDirectory>

            </configuration>
        </plugin>
    </plugins>
</build> 
```

我按照[此处](https://cwiki.apache.org/WICKET/maven-jetty-plugin.html#MavenJettyplugin-UsingtheMavenJettyplugin)的说明使用 maven jetty 插件（我不确定这是否需要）。这里的问题是如何从 Eclipse 中部署我的 maven 项目，以便我可以访问 http:localhost:8080/myproject 并查看我的项目是否正常工作？

编辑：

我过去在Tomcat上运行服务的方式是右键单击项目并单击Run As -> Run on server（在eclipse服务器中配置）

我正在使用 eclipse Indigo、Maven 3 和 jetty 8。我还使用 jersey 作为 Web 服务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T11:45:56.530

在这里，您混合了两种不同的东西：

1.  使用 Eclipse 服务器插件作为 Eclipse 的 Tomcat 插件运行您的 Web 应用程序。
2.  使用 Maven 插件作为 Jetty Maven 插件运行您的 Web 应用程序。Tomcat 也有 Maven 插件。

话虽如此，看看这个[答案](https://stackoverflow.com/a/6124189/980472)，它描述了如何配置 Eclipse 来运行 Maven 插件（它可能会根据 Eclipse 版本而改变，但想法会相似）

**编辑：**

如果您只想从 Maven 运行 jetty，只需使用以下命令行：

```
mvn jetty:run 
```

但是，无论如何，我建议您在 pom 文件中指明 Maven jetty 插件版本（如果您不这样做，Maven 会警告您）。

**已编辑 2**

首先，更新你的 jetty maven 插件版本：

```
<plugin>
    <groupId>org.mortbay.jetty</groupId>
    <artifactId>jetty-maven-plugin</artifactId>
    <version>8.0.0.M2</version>
</plugin> 
```

第二。您正在使用两个插件，一个用于构建战争文件（maven-war-plugin），另一个用于在码头上运行您的应用程序（jetty-maven-plugin）。请记住，jetty 认为您的项目具有标准的 maven 项目结构，这意味着，它将在 /src/main/webapp 中查找您的 Web 应用程序内容，但看起来不在这里。在你的 war 插件配置中，你指定你的 web 内容在 WebContent 中，所以告诉 jetty 插件那个目录在那里，以及你告诉它给 war 插件：

```
<plugin>
    <groupId>org.mortbay.jetty</groupId>
    <artifactId>jetty-maven-plugin</artifactId>
    <version>8.0.0.M2</version>
    <configuration>
        <webAppSourceDirectory>/WebContent</webAppSourceDirectory>             
        <webXml>/over/here/web.xml</webXml>
        <jettyEnvXml>/src/over/here/jetty-env.xml</jettyEnvXml>
        <classesDirectory>/somewhere/else</classesDirectory>
    <configuration>
</plugin> 
```

请参阅[文档](http://docs.codehaus.org/display/JETTY/Maven+Jetty+Plugin/)。当然，最好使用标准的 maven 项目结构，这样您就不需要告诉 jetty 东西在哪里。

# c# - 如何在 LINQ 中按月汇总数据？

> ID：11720539
> 
> 赞同：-2
> 
> 时间：2012-07-30T11:25:01.810
> 
> 标签：c#, sql, linq

> **可能重复：**
> [如何在 LINQ 中以不同格式呈现数据](https://stackoverflow.com/questions/11720175/how-to-present-data-in-different-format-in-linq)

我在数据表中有以下格式的数据

**表中数据：**

```
 DEVICEID   PRODUCTCODE  MONTH NO      QTY      VENDAMT
----------- ----------- ----------- ------------------- ---- -------
    2032     100            06           9        270
    2032     101            06           4        120
    2032     102            06           1         30
    2032     100            07          10        300
    2032     101            07           8        240
    2032     102            07           9        270 
```

我想在 C# 中使用 LINQ 查询以下列格式显示它

```
 DEVICEID    PRODUCTCODE JUN_QTY JUN_AMT JUL_QTY JUL_AMT
----------- ----------- ----------- ------------------- ---- -------
2032          100             9  270       10      300
2032          101             4  120       8       240
2032          102             1  30        9       270 
```

我试过这个查询：

```
var query2 = from p in tempDt222.AsEnumerable()
             select new {
                 DEVICEID= p.Field<Int32>("DEVICEID"), 
                 PRODUCTCODE = p.Field<String>("PRODUCTCODE"),
                 JAN_QTY = (p.Field<String>("MONTH_NO") == "01" ? p.Field<Int32>("QTY") : 0),
                 JAN_AMT = (p.Field<String>("MONTH_NO") == "01" ? p.Field<Int32>("VENDAMT") : 0),
                 ...
                 DEC_AMT = (p.Field<String>("MONTH_NO") == "12" ? p.Field<Int32>("VENDAMT") : 0)
              }; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T11:32:53.050

您需要在没有月份的列上应用 GroupBy。

然后，您需要编写一些代码来格式化输出，以便将行中的月份数值显示为文本列标题。

# android - Android：广播接收器第一次没有收听

> ID：11720540
> 
> 赞同：0
> 
> 时间：2012-07-30T11:25:14.503
> 
> 标签：android, broadcastreceiver

我是安卓新手。我创建了一个应用程序（AgentApp），它有一个活动和一个广播接收器。接收器的意图过滤**器**是**android.intent.action.PACKAGE_ADDED**。启动应用程序后，如果安装了任何其他应用程序，则接收器工作正常。

但我的疑问是当我的应用程序（AgentApp）被安装时，接收器没有在听它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T11:37:13.920

请参阅[ACTION_PACKAGE_ADDED 文档](http://developer.android.com/reference/android/content/Intent.html#ACTION_PACKAGE_ADDED)。

> 广播动作：设备上已安装新的应用程序包。数据包含包的名称。**注意新安装的包*没有*收到这个广播。**

# iphone - 从 Ivar 创建 id

> ID：11720544
> 
> 赞同：0
> 
> 时间：2012-07-30T11:25:30.640
> 
> 标签：iphone, objective-c, ios

我正在使用以下内容获取所有 ivar 的列表：

```
 Ivar *vars = class_copyIvarList([property class], &varCount); 
```

我的问题是如何从 Ivar 创建一个 id？即恢复一个 NSString 或 NSDictionary 等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T12:30:11.347

这种方法可以简化您的转换代码：

```
id obj = [p valueForKey:[NSString stringWithUTF8String:ivar_getName(anIvar)]];
... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T12:17:53.193

您只需使用`object_getIvar()`功能。像这样的东西：

```
uint varCount;
Ivar *vars = class_copyIvarList([property class], &varCount);

// Get the first one (out of an instance of this class)
// Of course you could just iterate and get each one
id var = object_getIvar(property, vars[0]);

// Free the array when you're done
free(vars); 
```

# crystal-reports - 水晶报表无法在 Visual Studio Ultimate 2010 中运行

> ID：11720545
> 
> 赞同：0
> 
> 时间：2012-07-30T11:25:33.763
> 
> 标签：crystal-reports

我已经在计算机上安装了 Visual Studio Ultimate 2010，但没有显示水晶报告。消息显示 Crystal.mht 未安装。我已经安装了正确的版本，但问题没有解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T13:39:12.707

尝试文章[在 Visual Studio 2010 中安装水晶报表以解决获取 CrystalReport.mht 文件的问题的链接](http://www.aspdotnet-suresh.com/2012/01/install-crystal-reports-in-visual.html)

# android - jquery动画在android中不起作用

> ID：11720550
> 
> 赞同：1
> 
> 时间：2012-07-30T11:25:51.430
> 
> 标签：android, jquery, ios, html

我有带有 jquery 动画的 html 文档，看起来非常相似：[http ://tympanus.net/Tutorials/LittleBoxesMenu/](http://tympanus.net/Tutorials/LittleBoxesMenu/)

它在浏览器上运行良好，但不适用于 android `WebView`。为什么不？jquery和android有什么问题吗？

编辑：在 iPhone 上做了一些测试，一切正常，仍然不知道为什么不能在 android 上工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T08:48:17.100

好的，问题解决了，最后很简单，在android app中导入apache.cordova包，扩展PhoneGap类并简单加载URL。就是这样。

```
package voi.tii.yu;
import org.apache.cordova.*;

import android.os.Bundle;

public class PhonegapActivity extends DroidGap {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        super.loadUrl("file:///android_asset/www/page2/index.html");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T14:31:20.753

WebView的[文档](http://developer.android.com/reference/android/webkit/WebView.html)明确指出 Android 的 WebView 不使用 JavaScript：

> 默认情况下，WebView 不提供类似浏览器的小部件，不启用 JavaScript 并且忽略网页错误。如果您的目标只是将一些 HTML 显示为 UI 的一部分，这可能没问题；除了阅读网页之外，用户不需要与网页进行交互，并且网页也不需要与用户进行交互。如果您确实想要一个成熟的 Web 浏览器，那么您可能希望使用 URL Intent 调用 Browser 应用程序，而不是使用 WebView 显示它。

# android - 在android中使用GPS获取当前地址？

> ID：11720552
> 
> 赞同：-3
> 
> 时间：2012-07-30T11:25:52.890
> 
> 标签：android, geolocation

> **可能重复：**
> [如何在 Android 中以编程方式获取当前 GPS 位置？](https://stackoverflow.com/questions/1513485/how-do-i-get-the-current-gps-location-programmatically-in-android)

嗨，我想知道我可以得到位置地址或经度或纬度.. 只是一次，然后它会关闭 GPS..该活动将不是地图活动..解释代码工作将不胜感激。 ..谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T11:28:59.727

使用 GeoCoder api，从位置获取位置，请参见以下链接

[http://android-er.blogspot.in/2011/02/get-address-from-location-using.html](http://android-er.blogspot.in/2011/02/get-address-from-location-using.html)

# iphone - Webview 内容未调整大小

> ID：11720553
> 
> 赞同：0
> 
> 时间：2012-07-30T11:25:53.940
> 
> 标签：iphone, objective-c, uiwebview

我有一个 webview .. 具有以下属性：

1.scalesPageToFit

2.Autoresizing遮罩

3.contentmode = aspectFit

加载后它很明显适合页面。但是一旦我放大然后缩小到正常；旋转设备不完全适合。

作为调整，我检查了方向模式是否为横向重新加载网页。我阅读了这方面的各种帖子，但找不到任何解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T17:41:05.810

花了2天多的时间才找出导致此问题的原因。实际上，webview 工作正常，除了如果您尝试使用 PinchGesture 进一步缩小.. webview 将以同样的方式进行操作。

为了克服这个问题，我们需要在 webview 的 willRotate 方法下设置滚动视图的缩放比例。然而，它的动画很奇怪，但人们可以猜测问题出在哪里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T11:33:16.930

您有 2 个以下选项：

将此添加到您的 html 文件的 head 部分：

```
 <meta name="viewport" content="width=device-width" /> 
```

或者在方向改变时调用 [myWebView reload]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T11:45:22.767

您可以使用此代码

```
NSString *website =@"http://www.google.com";
NSURL *url = [NSURL URLWithString:website];
NSURLRequest *requestURL =[NSURLRequest requestWithURL:url];

mywebview.scalesPageToFit = YES;
mywebview.autoresizesSubviews = YES;    

[mywebview loadRequest:requestURL]; 
```

# asp.net-mvc - 将 ASP.NET MVC 属性和操作过滤器注释组合在一起

> ID：11720556
> 
> 赞同：0
> 
> 时间：2012-07-30T11:26:04.737
> 
> 标签：asp.net-mvc

我的一些控制器操作需要对用户进行身份验证。这些操作使用自定义`[Authorize]`属性进行标记。在幕后，一个自定义会员提供者做了一些魔术，其中将一些临时数据设置到公共线程中。

在需要身份验证的每个操作结束时，都需要调用`OnActionExecuted()`过滤器来清理线程。这是通过另一个名为`[CleanupContext]`.

所以我的动作是这样的：

```
[Authorize]
[CleanupContext]
public ViewResult Action()
{
   ...
} 
```

因为这两个总是一起使用，因为我很懒，因为我担心有一天某个开发人员可能会忘记放置一个或另一个，我们最终会出现一些奇怪的行为：**有没有办法将它们组合成一个属性？**

```
[AuthorizeAndCleanup]
public ViewResult Action()
{
   // Aaah, if only it could look like this :D
} 
```

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T11:54:52.110

您可以从中派生[`AuthorizeAttribute`](http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute.aspx)以执行您的自定义授权内容并实施[`IActionFilter`](http://msdn.microsoft.com/en-us/library/system.web.mvc.iactionfilter.aspx)以访问[`OnActionExecuting`](http://msdn.microsoft.com/en-us/library/system.web.mvc.iactionfilter.onactionexecuting.aspx)和[`OnActionExecuted`](http://msdn.microsoft.com/en-us/library/system.web.mvc.iactionfilter.onactionexecuted.aspx)事件（执行您的自定义清理代码）：

```
public class AuthorizeAndCleanupAttribute : AuthorizeAttribute, IActionFilter
{
    protected override bool AuthorizeCore(HttpContextBase httpContext)
    {
        // TODO: your custom authorization logic
        return base.AuthorizeCore(httpContext);
    }

    public void OnActionExecuted(ActionExecutedContext filterContext)
    {
        // TODO: your custom cleanup code
    }

    public void OnActionExecuting(ActionExecutingContext filterContext)
    {
    }
} 
```

显然，您应该知道，如果授权失败（也就是方法返回 false），则不会执行`OnActionExecuting`或事件，因此如果您要返回 false，请确保在此方法中进行清理。`OnActionExecuted``AuthorizeCore`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T11:49:59.957

一个快。我能想到的肮脏和（可能）缓慢的解决方案是跳过清理属性并检查 OnActionExecuted() 中是否存在自定义 Authorize 属性，如果找到它，则执行任何清理代码（因为你说它们总是一起出现）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T11:56:11.577

您应该实现自己的过滤器提供程序 (http://bradwilson.typepad.com/blog/2010/07/service-location-pt4-filters.html)，它将自动将`Cleanup`属性添加到任何标记为`Authorize`.

# javascript - 动态添加到 Highcharts

> ID：11720558
> 
> 赞同：2
> 
> 时间：2012-07-30T11:26:06.733
> 
> 标签：javascript, json, api, highcharts

我有一个 json 对象，我正在尝试将其添加到我的 highcharts 选项中。

我能够通过 API 接收对象，并将其传递给我的 highcharts 函数，但我无法将我的数据添加到它周围的静态数据中。

```
 var datas;
        datas = getData();
        //getdata();

        alert('2datass'+datas);
        console.log(datas);
        createChart(datas);

        function createChart(data){

            alert('createChart'+data); // works - outputs createChart[object Object][object Object][object Object][object Object][object Object]
            var dynamicData;

                    for(var i =0;i <= data.length-1;i++)
                    {
                        var item = data[i];

                        dynamicData = dynamicData + {
                            type: 'column',
                            name: item.name,
                            data: [item.difference]
                        };

                    }

            alert('dynamic' +dynamicData); // works, but says undefined before - outputs dynamic undefined[object Object][object Object][object Object][object Object][object Object]

            var series = [data /*This is where my data should sit*/,{
                    type: 'column',
                    name: 'Jane',
                    data: [300, 30]
                }, {
                    type: 'column',
                    name: 'John',
                    data: [-200, 50]
                }, {
                    type: 'column',
                    name: 'Joe',
                    data: [444, -25]
                }, {
                    type: 'column',
                    name: 'Jobe',
                    data: [444, -25]
                }, {
                    type: 'column',
                    name: 'Jooe',
                    data: [444, -25]
                },{
                    type: 'column',
                    name: 'Jane',
                    data: [300, 30]
                }
                , {
                    type: 'pie',
                    name: 'Total consumption',
                    data: [{
                            name: 'Jane',
                            y: 13
                            //color: '#4572A7' // Jane's color
                        }, {
                            name: 'John',
                            y: 23
                            //color: '#AA4643' // John's color
                        }, {
                            name: 'Joe',
                            y: 19
                            //color: '#89A54E' // Joe's color
                        }],
                    center: [30, 80],
                    size: 100,
                    showInLegend: false,
                    dataLabels: {
                        enabled: false
                    }
                }];

            var options = {
                chart: {
                    renderTo: 'container'
                },
                title: {
                    text: 'Account Managers Leaderboard'
                },
                xAxis: {
                    categories: ['Month on Month', 'Day on Day']
                },
                tooltip: {
                    formatter: function() {
                        var s;
                        if (this.point.name) { // the pie chart
                            s = ''+
                                this.point.name +': '+ this.y +' sales';
                        } else {
                            s = ''+
                                this.x  +': '+ this.y;
                        }
                        return s;
                    }
                },
                labels: {
                    items: [{
                            html: 'Total proportion of sales <br />this month',
                            style: {
                                left: '40px',
                                top: '-5px',
                                color: 'black'
                            }
                        }]
                },
                series: series
            };

            $(document).ready(function() {
                var chart;
                chart = new Highcharts.Chart(options);
            });

        }

       function getData(){
            //alert('ajax');

            var receivedData; // store your value here
            $.ajax({
                type: "GET",
                dataType: "json",
                url: "API URL",
                async: false,
                success: function(data){
                    alert('data'+data); //works
                    receivedData = data;
                }
            }); 

            return receivedData;
        }; 
```

我的解决方案似乎是错误的，因为没有添加动态数据。任何帮助将不胜感激。

更新代码：

```
 var dynamicData = {
                    type: 'column',
                    name: 'FIRST',
                    data: [300, 30]
                };

            //Without the following loop, my chart will display the above entry "FIRST"
            //With the loop, the chart omits everything in dynamicData
                    for(var i =0;i <= data.length-1;i++)
                    {
                        var item = data[i];

                        dynamicData = dynamicData + {
                            type: 'column',
                            name: item.name,
                            data: [item.difference]
                        };

                    }

            alert('dynamic' +dynamicData); // works, but says undefined before - outputs dynamic undefined[object Object][object Object][object Object][object Object][object Object]

                //dynamicData should be 'FIRST' and then 5 other returned rows
            var series = [dynamicData, {
                    type: 'column',
                    name: 'John',
                    data: [-200, 50]
                }, {
                    type: 'column',
                    name: 'Joe',
                    data: [444, -25]
                }, {
                    type: 'column',
                    name: 'Jobe',
                    data: [444, -25]
                }, {
                    type: 'column',
                    name: 'Jooe',
                    data: [444, -25]
                },{
                    type: 'column',
                    name: 'Jane',
                    data: [300, 30]
                }
                , {
                    type: 'pie',
                    name: 'Total consumption',
                    data: [{
                            name: 'Jane',
                            y: 13
                            //color: '#4572A7' // Jane's color
                        }, {
                            name: 'John',
                            y: 23
                            //color: '#AA4643' // John's color
                        }, {
                            name: 'Joe',
                            y: 19
                            //color: '#89A54E' // Joe's color
                        }],
                    center: [30, 80],
                    size: 100,
                    showInLegend: false,
                    dataLabels: {
                        enabled: false
                    }
                }]; 
```

修改后的代码，使用 .push：

```
 // series has been moved straight into the options variable
                var options = {
                chart: {
                    renderTo: 'container'
                },
                title: {
                    text: 'Account Managers Leaderboard'
                },
                xAxis: {
                    categories: ['Month on Month', 'Day on Day']
                },
                tooltip: {
                    formatter: function() {
                        var s;
                        if (this.point.name) { // the pie chart
                            s = ''+
                                this.point.name +': '+ this.y +' sales';
                        } else {
                            s = ''+
                                this.x  +': '+ this.y;
                        }
                        return s;
                    }
                },
                labels: {
                    items: [{
                            html: 'Total proportion of sales <br />this month',
                            style: {
                                left: '40px',
                                top: '-5px',
                                color: 'black'
                            }
                        }]
                },
                series: [{
                        type: 'pie',
                        name: 'Total consumption',
                        data: [{
                                name: 'Jane',
                                y: 13
                                //color: '#4572A7' // Jane's color
                            }, {
                                name: 'John',
                                y: 23
                                //color: '#AA4643' // John's color
                            }, {
                                name: 'Joe',
                                y: 19
                                //color: '#89A54E' // Joe's color
                            }],
                        center: [30, 80],
                        size: 100,
                        showInLegend: false,
                        dataLabels: {
                            enabled: false
                        }
                    }]
            };

            //I can now push data straight to seriese (although item.difference doesn't       
            // work .. perhaps because it's an array)

            for(var i =0;i <= data.length-1;i++)
            {
                var item = data[i];

                options.series.push({
                    "type": "column",
                    "name": item.name,
                    "data": item.data
                });
                alert('datavalue' +item.data);       
            }

               $(document).ready(function() {
                var chart;
                chart = new Highcharts.Chart(options);
            }); 
```

回答！

这似乎可以解决问题。感谢 Speransky Danil 与我一起奋斗 - 非常感谢。

```
 var datas;
        datas = getData();
        createChart(datas);

        function createChart(data){

            var options = {
                chart: {
                    renderTo: 'container'
                },
                title: {
                    text: 'Account Managers Leaderboard'
                },
                xAxis: {
                    categories: ['Month on Month', 'Day on Day']
                },
                tooltip: {
                    formatter: function() {
                        var s;
                        if (this.point.name) { // the pie chart
                            s = ''+
                                this.point.name +': '+ this.y +' sales';
                        } else {
                            s = ''+
                                this.x  +': '+ this.y;
                        }
                        return s;
                    }
                },
                labels: {
                    items: [{
                            html: 'Total proportion of sales <br />this month',
                            style: {
                                left: '40px',
                                top: '-5px',
                                color: 'black'
                            }
                        }]
                },
                series: [{
                        type: 'pie',
                        name: 'Total consumption',
                        data: [{
                                name: 'Jane',
                                y: 13
                                //color: '#4572A7' // Jane's color
                            }, {
                                name: 'John',
                                y: 23
                                //color: '#AA4643' // John's color
                            }, {
                                name: 'Joe',
                                y: 19
                                //color: '#89A54E' // Joe's color
                            }],
                        center: [30, 80],
                        size: 100,
                        showInLegend: false,
                        dataLabels: {
                            enabled: false
                        }
                    }]
            };

            for(var i =0;i <= data.length-1;i++)
            {
                var item = data[i];

                options.series.push({
                    "type": "column",
                    "name": item.name,
                    "data": [item.data]
                });

            }

            $(document).ready(function() {
                var chart;
                chart = new Highcharts.Chart(options);
            });

        }

        function getData(){
            //alert('ajax');

            var receivedData; // store your value here
            $.ajax({
                type: "GET",
                dataType: "json",
                url: "API URL",
                async: false,
                success: function(data){
                    alert('data'+data); //works
                    receivedData = data;
                }
            }); 

            return receivedData;
        }; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T11:30:51.393

问题出在循环中，其中包含：

```
dynamicData = dynamicData + {
   type: 'column',
   name: item.name,
   data: [item.difference]
}; 
```

第一次`dynamicData`是`undefined`。当我们求和`undefined`并将 `Object`它们都转换为`string`并连接它时，您会得到 string `'undefined'[object Object]'`，然后`'undefined[object Object][object Object]'`依此类推*（转换为`string`object is `'[object Object]'`）*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-31T17:18:43.690

这似乎可以解决问题。感谢 Speransky Danil 与我一起奋斗 - 非常感谢。

```
 var datas;
        datas = getData();
        createChart(datas);

        function createChart(data){

            var options = {
                chart: {
                    renderTo: 'container'
                },
                title: {
                    text: 'Account Managers Leaderboard'
                },
                xAxis: {
                    categories: ['Month on Month', 'Day on Day']
                },
                tooltip: {
                    formatter: function() {
                        var s;
                        if (this.point.name) { // the pie chart
                            s = ''+
                                this.point.name +': '+ this.y +' sales';
                        } else {
                            s = ''+
                                this.x  +': '+ this.y;
                        }
                        return s;
                    }
                },
                labels: {
                    items: [{
                            html: 'Total proportion of sales <br />this month',
                            style: {
                                left: '40px',
                                top: '-5px',
                                color: 'black'
                            }
                        }]
                },
                series: [{
                        type: 'pie',
                        name: 'Total consumption',
                        data: [{
                                name: 'Jane',
                                y: 13
                                //color: '#4572A7' // Jane's color
                            }, {
                                name: 'John',
                                y: 23
                                //color: '#AA4643' // John's color
                            }, {
                                name: 'Joe',
                                y: 19
                                //color: '#89A54E' // Joe's color
                            }],
                        center: [30, 80],
                        size: 100,
                        showInLegend: false,
                        dataLabels: {
                            enabled: false
                        }
                    }]
            };

            for(var i =0;i <= data.length-1;i++)
            {
                var item = data[i];

                options.series.push({
                    "type": "column",
                    "name": item.name,
                    "data": [item.data]
                });

            }

            $(document).ready(function() {
                var chart;
                chart = new Highcharts.Chart(options);
            });

        }

        function getData(){
            //alert('ajax');

            var receivedData; // store your value here
            $.ajax({
                type: "GET",
                dataType: "json",
                url: "http://a-website.com/apiv1/summery/get/authKey/1/range/day/",
                async: false,
                success: function(data){
                    alert('data'+data); //works
                    receivedData = data;
                }
            }); 

            return receivedData;
        }; 
```

# jquery - 添加 textarea (int) 值

> ID：11720566
> 
> 赞同：0
> 
> 时间：2012-07-30T11:26:37.600
> 
> 标签：jquery

我的 jQuery / Javascript 代码遇到了一个小问题。

我在一个页面上有几个值，例如：

```
checkbox EXAMPLE EXAMPLE 150
checkbox EXAMPLE EXAMPLE 300
checkbox EXAMPLE EXAMPLE 300 
```

我有这个小代码，它基本上只是将数值（150、300、300）添加到一个数组中，然后在“total”变量中对数组求和。（嗯，至少这是我想要做的......）

这是代码：

```
 $('.pack_check').click(function() {
        var cout = [];
        total = 0;
        $('#services_pack input:checked').each(function() {
            cout.push(this.cout);
            $.each(cout,function() {
                total += parseInt(this);
                });
            });
        });
    }); 
```

我的问题是，当我点击我的第一个复选框时，没关系，total = 150 但是，如果我点击第二个复选框，total = (150 + 150 + 300) 这有点烦人......

任何人 ？

提前致谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T11:33:28.150

您有全局“总计”，仅由选中/未选中复选框计数的值更改。

```
var total = 0;

$('.pack_check').click(function() {
  if ($(this).is(':checked')) {
    total += parseInt(this_count);
  } else {
    total -= parseInt(this_count);
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T11:36:28.273

拆分你的`.each()`函数，发生的事情是你的代码将 150 添加到 cout 然后添加到总数，然后在第二次通过时它再次将 150 和 300 添加到当前总数，因此是 150 + 150 +300。它应该如下：

```
$('.pack_check').click(function() {
    //adds to array
    var cout = [];
    $('#services_pack input:checked').each(function() {
        cout.push(this.cout);
        });

    //totals all within the array
    total = 0;
    $.each(cout,function() {
         total += parseInt(this);
        });
    }); // end of click function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T11:38:11.377

问题很可能是您的总数中有一个嵌套循环。因此，对于每个选中的复选框，您首先将其添加`.cout`到数组中，然后将数组中的每个元素再次添加到总数中。另外你有太多的关闭`});`。试试这个：

```
$('.pack_check').click(function() {
    var cout = [];
    total = 0;
    $('#services_pack input:checked').each(function() {
        cout.push(this.cout);
    });
    $.each(cout,function() {
        total += parseInt(this, 10);
    });
    // do something with total
}); 
```

或者，如果您只需要完全消除`cout`数组：

```
$('.pack_check').click(function() {
    var total = 0;
    $('#services_pack input:checked').each(function() {
        total += parseInt(this.cout, 10);
    });
    // use total here
}); 
```

请注意，它`parseInt()`需要第二个参数来指定基数，因此如果您想在基数 10 中工作： - 如果字符串以前导或前导`parseInt(stringToParse,10)`开头，则避免出现问题，否则将被解释为基数 8 和基数 16（分别）。`0``0x`

话虽如此，我推荐一元加号运算符将字符串转换为数字：

```
total += +this; 
```

# c# - OpenWebKitSharp 和 WebKit.NET：访问内部 iframe HTML 内容

> ID：11720568
> 
> 赞同：1
> 
> 时间：2012-07-30T11:26:41.770
> 
> 标签：c#, webkit.net

一段时间以来，我一直在使用**WebKit.NET**和**OpenWebKitSharp**库，结果都不错。但是，似乎有一个我无法克服的任务：我需要访问主 HTML 文档的内部 iframe 的 HTML 内容/DocumentText。

我可以正确到达

```
frameLoadDelegate_DidFinishLoadForFrame 
```

每个特定 IFrame 的事件，但该委托接收的*IWebFrame*接口似乎不包含任何有用的信息，以便检索框架 HTML 内容。

有没有人想出如何做到这一点？

# ios - 应用未运行时无法接收推送通知

> ID：11720569
> 
> 赞同：4
> 
> 时间：2012-07-30T11:26:43.300
> 
> 标签：ios, push-notification, apple-push-notifications

我创建了一个具有推送通知功能的 iphone 应用程序。服务器运行良好，当应用程序在前台运行时我可以收到通知。功能

```
- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo 
```

被调用然后通知到达。但是，当我按下主页键时，将应用程序置于后台或在任务栏中将其终止。我无法在通知区域或任何弹出窗口中收到任何通知。

有人知道原因吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-20T08:57:34.463

您可以使用...

```
-(BOOL)application:(UIApplication*)application didFinishLaunchingWithOptions:(NSDictionary*)launchOptions
{
    if (launchOptions != nil) {
        NSMutableDictionary *dic = [launchOptions objectForKey:@"UIApplicationLaunchOptionsRemoteNotificationKey"];
        NSMutableDictionary *dicItem = [dic objectForKey:@"aps"];
        NSString *itemNotification = [dicItem objectForKey:@"alert"];
    }else if (launchOptions == nil){
        NSLog(@"launch ,,, nil");
    }
...//code something
} 
```

itemNotification 是 Notification barge 中的一个 item。玩得开心！！

# jquery - 使 jquery.anythinglider 响应

> ID：11720570
> 
> 赞同：0
> 
> 时间：2012-07-30T11:26:45.407
> 
> 标签：jquery, css, responsive-design, anythingslider

我正在使用anythingslider，并且在尝试使其与移动响应视图兼容时遇到了重大问题。

基本上我正在做的是当窗口调整大小时我改变了这些变量：

```
var lists = jQuery('.page-home .featured-rotator ul li');
var slider = jQuery('div.anythingSlider');
var shadow = jQuery('div.region-home-featured') 
```

匹配在调整大小时更新的此变量：

```
var slider_width = jQuery('.home-featured').width(); 
```

就整个视图容器而言，有些东西看起来更好，但幻灯片仍以其原始宽度过渡，从而使多个幻灯片出现在一个视图中。

其他人试图改变宽度？我在另一个答案中读到了如何设置一个变量，使其在一行代码中响应，但我没有运气尝试实现它。我做错了还是不适用于此滑块？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T11:35:43.557

> 调整大小
> 
> 例如，如果您想让幻灯片宽 580 像素而不是 680 像素，您只需要更改一些 CSS。将.anythingSlider ul li 的宽度更改为580px，将.anythingSlider .wrapper 的宽度更改为580px，将.anythingSlider 100px 的宽度减小为660px。

[http://css-tricks.com/anythingslider-jquery-plugin/](http://css-tricks.com/anythingslider-jquery-plugin/)

您不仅需要调整包装器的大小，还需要调整 li 元素的大小。即，在你的情况下`.featured-rotator ul li`

# c# - C# XSLT 转换中的 XPath 问题

> ID：11720572
> 
> 赞同：-2
> 
> 时间：2012-07-30T11:26:53.013
> 
> 标签：c#, xslt, xpath

我正在尝试通过 XSLT 转换将 XML 文档解析为网站。

但是，要使其工作，我必须使用以下 XPath：

```
/*[name()='standards']/*[name() = 'standard'] 
```

为什么以下 XPath 表达式不起作用？

```
/standards/standard 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T11:59:45.343

您的问题是 XPath 中最常见的问题——搜索 XPath 和默认命名空间，您会找到很多好的答案。

**总结问题**：XPath 将任何无前缀的名称解释为属于“无命名空间”。

因此，不会选择任何 XPath 表达式中属于某个默认命名空间（不是“无命名空间”）的任何无前缀名称。

在定位步骤中继续使用名称的一种方法是向 XPath 处理器指示特定前缀（例如“x”）与默认名称空间相关联。然后发出：

```
/x:standards/x:standard 
```

**在 .NET**中，此类命名空间绑定（称为“命名空间注册”）是使用`XmlNamespaceManager`类完成的。请参阅此**[完整示例](http://msdn.microsoft.com/en-us/library/4bektfx9.aspx)**。

**在 XSLT**中，只需在全局级别定义名称空间，然后指定 XPath 表达式，其中每个元素名称都以这样定义的前缀作为前缀。

**这是一个小例子：**

```
<nums xmlns="some:nums">
  <num>01</num>
  <num>02</num>
  <num>03</num>
  <num>04</num>
  <num>05</num>
  <num>06</num>
  <num>07</num>
  <num>08</num>
  <num>09</num>
  <num>10</num>
</nums> 
```

**为了处理上面的 XML 文档，我们有这个**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:x="some:nums">
 <xsl:output method="text"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/">
     <xsl:value-of select="/x:nums/x:num[. = 3]"/>
 </xsl:template>
</xsl:stylesheet> 
```

**将此转换应用于上述 XML 文档可以正确选择所需元素并输出其字符串值**：

```
03 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T11:50:27.367

我不知道你的问题是什么。随便一刀，也许这就是你想要的……

```
<xsl:stylesheet version="1.0"
  xmlns:msxsl="urn:schemas-microsoft-com:xslt"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:ikas="http://www.ikas.dk"
  exclude-result-prefixes="msxsl ikas">
<xsl:output method="xml" indent="yes"/>

<xsl:template match="/">
 <div xmlns="http://www.ikas.dk">
  <textarea>
   <xsl:copy-of select="/ikas:standards/ikas:standard"/>
  </textarea>
 </div>
</xsl:template>

</xsl:stylesheet> 
```

# javascript - 全日历 addEventSource 数组

> ID：11720573
> 
> 赞同：0
> 
> 时间：2012-07-30T11:26:55.847
> 
> 标签：javascript, jquery, vb.net, fullcalendar

我想添加一个数组的事件源。我通过 ajax 调用创建了一个字符串，如下所示：

```
Public Shared Function Test() As String
        Dim EventArray As New ArrayList

        Dim EventSource As String = "[{"
        EventSource += "title:  'All Day Event',"
        EventSource += "start: '2012-07-01'"
        EventSource += "},"
        EventSource += "{"
        EventSource += "title: 'Long Event',"
        EventSource += "start: '2012-07-25',"
        EventSource += "end: '2012-07-28'"
        EventSource += "},"
        EventSource += "{"
        EventSource += "id: 999,"
        EventSource += "title:  'Repeating Event',"
        EventSource += "start: '2012-07-27 16:00:00',"
        EventSource += "allDay: false"
        EventSource += "},"
        EventSource += "{"
        EventSource += "id: 999,"
        EventSource += "title: 'Repeating Event',"
        EventSource += "start: '2012-08-04 16:00:00',"
        EventSource += "allDay: false"
        EventSource += "},"
        EventSource += "{"
        EventSource += "title: 'Meeting',"
        EventSource += "start: '2012-07-30 10:30:00',"
        EventSource += "allDay: false"
        EventSource += "},"
        EventSource += "{"
        EventSource += "title: 'Lunch',"
        EventSource += "start: '2012-07-30 12:00:00',"
        EventSource += "end: '2012-07-30 14:00:00',"
        EventSource += "allDay: false"
        EventSource += "},"
        EventSource += "{"
        EventSource += "title: 'Birthday Party',"
        EventSource += "start: '2012-07-31 19:00:00',"
        EventSource += "end: '2012-07-31 22:30:00',"
        EventSource += "allDay: false"
        EventSource += "},"
        EventSource += "{"
        EventSource += "title: 'Click for Google',"
        EventSource += "start: '2012-07-28',"
        EventSource += "end: '2012-07-29',"
        EventSource += "url: 'http://google.com/'"
        EventSource += "}]"

        Return EventSource
    End Function 
```

我尝试像这样添加数组：

```
$(document).ready(function() {

    $('#calendar').fullCalendar({
        dayClick: function(date) {
        alert(date);
    },
    editable: true

    });
    $.ajax({
                    type: 'POST',
                    url: 'KalenderEvents.aspx/Test',
                    data: '{}',
                    contentType: 'application/json; charset=utf-8',
                    dataType: 'json',
                    success: function (msg) {
                    var events = msg.d || []
                    $('#calendar').fullCalendar('addEventSource','events:' + events);
                    $('#calendar').fullCalendar('rerenderEvents');
                    }
                });
   }); 
```

如果我删除“事件：”代码尝试执行 JSON 提要......否则他只是不显示任何内容。ajax 调用正常执行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T13:29:19.347

您不需要`events:`在`addEventSource`. FullCalendar 应该正确地接受 JSON 数组。

# asp.net - 在带有母版页的 Aspx 页面中引用 CSS 表

> ID：11720576
> 
> 赞同：3
> 
> 时间：2012-07-30T11:27:04.900
> 
> 标签：asp.net, css

标题中的问题很好地说明了。通常我会`<link... />`用来引用我的 CSS 表，但由于我使用的是母版页，所以我无法访问`Head`标签，所以如何在我的 ASPX 页面上引用特定的 CSS 表。我尝试使用`<%@ Import Namespace="Style.css"`但没有运气。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-30T11:30:59.050

只需添加一个带有默认值的 CSS ContentPlaceHolder。

基本上，将包含您指定为默认的 CSS 文件，除非您使用子页面中的标记覆盖该占位符。

**您的母版页应该看起来像这样。**

```
<head>
    <asp:ContentPlaceHolder ID="Stylesheets" runat="server">
        <link rel="stylesheet" href="/css/master.css" type="text/css" />
    </asp:ContentPlaceHolder>
</head> 
```

然后从使用该母版页的任何页面中，您可以简单地用不同的样式表覆盖它。

**关于（示例）AboutUs.aspx**

```
<asp:Content ID="Content1" ContentPlaceHolderID="Stylesheets" runat="server">
    <link rel="stylesheet" href="/css/Style.css" type="text/css" />
</asp:Content> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T11:33:43.547

如果您想将 CSS 样式表添加到任何 ASPX 页面，您应该使用 PlaceHolders。

母版页：（在该部分）

```
<asp:ContentPlaceHolder ID="HeadContent" runat="server">
</asp:ContentPlaceHolder> 
```

ASPX 页面：

```
<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
// add your link here
</asp:Content> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T11:30:58.293

只需将您的样式表拖到您的 master page.aspx 即可，它适用于您的所有其他表单

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T11:43:18.450

您有 3 种可能的解决方案：

1.  将链接添加到母版页标记的 head 标记。如果这样做，所有使用给定母版页的页面将自动使用您的 css 文件。

2.  在母版页的 head 标记中使用 ContentPlaceHolder。您可以在引用给定母版页的页面上使用 ContentPlaceHolder，并且可以在标记中的 ContentPlaceHolder 标记内添加链接标记。

3.  您可以使用 Javascrip/jQuery 函数添加链接标签。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-30T11:57:52.397

尽管我在我的 Page_Load 事件 (VB) 中使用了下面路由后面的代码，但我会给 AK 提供正确的答案，因为它似乎更好地回答了这个问题，但不适合我的具体情况。

```
Dim link As New HtmlLink()
link.Attributes.Add("href", Page.ResolveClientUrl("../Css/Generic-Form2.css"))
link.Attributes.Add("Type", "text/css")
link.Attributes.Add("rel", "stylesheet")
Page.Header.Controls.Add(link) 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-07-30T11:29:58.223

`link`将标记附加到`head`using DOM 操作。

# c# - 如何读取文本文件中的 XML 并将其附加到 RichTextBox

> ID：11720577
> 
> 赞同：1
> 
> 时间：2012-07-30T11:27:05.380
> 
> 标签：c#

我有一个文本文件中的 xml 是

```
<text font='Bamini' color='#ffff80ff' font-size='8'>the </text>
<text font='Microsoft Sans Serif' color='#ff804000' font-size='8'>test </text>
<text font='Microsoft Sans Serif' color='#ff8000ff' font-size='8'>text </text>
<text font='Kal-72' color='#ff0080c0' font-size='8'>sample</text> 
```

我想将文本标签的内容附加到`RichTextBox`. 即，第一个文本标签（`the`）的内容将设置字体类型“Bamini”，颜色为“#ffff80ff”，大小为“8”，其他标签也一样

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T11:30:11.567

您可以使用[`RichTextBox.Rtf`](http://msdn.microsoft.com/en-us/library/system.windows.forms.richtextbox.rtf.aspx)将`RTF`格式化的文本放置到控件中以进行显示，或者使用控件文本中`RTF`定义的指定格式提取控件的文本。

`RTF`编码不同于`HTML`. 你不能马上这样做。我建议`WebBrowser`控制。

*或从codeproject*尝试这种方式：

*   [XHTML2RTF](http://www.codeproject.com/KB/HTML/XHTML2RTF.aspx)
*   [An-extended-RichTextBox-to-save-and-load-quot-HTML](http://www.codeproject.com/KB/edit/htmlrichtextbox.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T13:01:12.913

请尝试以下代码：

```
private void button1_Click(object sender, EventArgs e)
    {
        var textConfiguration = XDocument.Load(Path.Combine(AppDomain.CurrentDomain.BaseDirectory, "Config.xml"));
        if (textConfiguration != null)
        {
            textConfiguration.Descendants("Configuration").Descendants("text").ToList().ForEach(text =>
            {
                font = text.Attribute("font").Value;
                color = text.Attribute("color").Value;
                fontsize = text.Attribute("font-size").Value;
                textToAppend = text.Value;

            });
        }
        richTextBox1.SelectionColor = Color.FromName(color);   
        richTextBox1.SelectionFont = new Font(font, int.Parse(fontsize), FontStyle.Regular);
        richTextBox1.AppendText(textToAppend);
    } 
```

XML 文件是这样的：

```
<?xml version="1.0" encoding="utf-8" ?>
<Configuration>
  <text font='Verdana' color='Green' font-size='8'>The Formatted Text</text>
</Configuration> 
```

我希望这会给你一个想法。

如果你有多个文本块，你可以修改代码如下：

```
private void button1_Click(object sender, EventArgs e)
    {
        var textConfiguration = XDocument.Load(Path.Combine(AppDomain.CurrentDomain.BaseDirectory, "Config.xml"));
        if (textConfiguration != null)
        {
            textConfiguration.Descendants("Configuration").Descendants("text").ToList().ForEach(text =>
            {
                font = text.Attribute("font").Value;
                color = text.Attribute("color").Value;
                fontsize = text.Attribute("font-size").Value;
                textToAppend = text.Value;
                richTextBox1.SelectionColor = Color.FromName(color);
                richTextBox1.SelectionFont = new Font(font, int.Parse(fontsize), FontStyle.Regular);
                richTextBox1.AppendText(textToAppend);
            });
        }

    } 
```

XML将是这样的

```
<?xml version="1.0" encoding="utf-8" ?>
<Configuration>
  <text font='Verdana' color='Green' font-size='8'>The </text>
  <text font='Verdana' color='Red' font-size='8'>Formatted </text>
  <text font='Verdana' color='Blue' font-size='8'>Text</text>
</Configuration> 
```

我再次修改了代码，现在您可以在 XML 文件中包含 Hex coloe 代码。
代替

```
richTextBox1.SelectionColor = Color.FromName(color); 
```

经过

```
System.Drawing.Color col = System.Drawing.ColorTranslator.FromHtml(color); 
richTextBox1.SelectionColor = col; 
```

并更换

```
color='Green' 
```

经过

```
color='#ffff80ff' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T11:34:22.893

您应该使用两者之一

1.  创建一个有效的 xml 文档文件，您可以在其中存储您的`text`元素（您当前的格式不是有效的 xml）。有关 C# 中 xml 操作的更多信息，请[转到此处](http://msdn.microsoft.com/en-us/library/system.xml.xmldocument.aspx)。
2.  创建一个`app.config`文件并从该文件中保存/选择值。有关此的更多信息，请[点击此处](http://geekswithblogs.net/MarkPearl/archive/2012/04/04/getting-app.config-to-be-configuration-specific-in-vs2010.aspx)。

# c# - System.Type.FullName 的意外值

> ID：11720579
> 
> 赞同：20
> 
> 时间：2012-07-30T11:27:06.897
> 
> 标签：c#, .net, multidimensional-array, typeof, gettype

我最近需要为任意类型构建 C# 特定名称（必须始终包含 global:: 说明符）并且遇到以下问题：

```
// 1 - value: System.String[,,,][,,][,]
string unexpectedFullName = typeof( string[,][,,][,,,] ).FullName;      

// 2 - value: System.String[,][,,][,,,]
string expectedFullName = Type.GetType( "System.String[,][,,][,,,]" ).FullName; 
```

我期望在这两种情况下返回的值是相同的。但是，由于某种原因，值的与数组相关的部分似乎被颠倒了（案例 1）。这是逆转预期的行为吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-30T12:50:34.447

虽然返回的值[`Type.FullName`](http://msdn.microsoft.com/en-us/library/system.type.fullname.aspx)和 C# 类型标识符有时碰巧是相同的，但这并不能保证。请记住，`Type.FullName`无论从什么 CLI 语言调用它，无论是 C#、VB.NET、Oxygene 还是其他任何语言，它都会返回相同的值。

对于多维和锯齿状数组，C# 语法按照它们稍后编写的顺序列出索引，而反射语法返回与数组逻辑结构匹配的内容。并且a(C#)`string[,][,,][,,,]`毕竟是类型的值`string`，其为4维数组(即`string[,,,]`)，其为3维数组(即`string[,,,][,,]`)且其为二维数组(即`string[,,,][,,][,]`)。

`FullName`您可能希望`Type`在分析类型时检查类的属性，而不是依赖于返回的反射语法名称。可以从那里检索诸如[维数](http://msdn.microsoft.com/en-us/library/system.type.getarrayrank.aspx)或[通用参数之类的信息。](http://msdn.microsoft.com/en-us/library/system.type.getgenericarguments.aspx)

在构造类型时，您还可以使用[`MakeArrayType`](http://msdn.microsoft.com/en-us/library/w0ykk2sw.aspx)或等方法[`MakeGenericType`](http://msdn.microsoft.com/en-us/library/system.type.makegenerictype.aspx)在运行时创建复杂类型，而无需构造包含新类型成分的字符串。

*[Marc Gravell](https://stackoverflow.com/users/23354/marc-gravell)指出了这个答案的一些内容- 谢谢！*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-09T13:27:46.247

注意：这并不能直接解决您的问题

> 这是逆转预期的行为吗？

但我觉得它*增加*了它。

* * *

您可以使用[`GenerateCodeFromExpression`](http://msdn.microsoft.com/en-us/library/system.codedom.compiler.codedomprovider.generatecodefromexpression)返回一个字符串，该字符串可用于生成为您生成类型的代码，例如使用此代码（由[hvd从此](https://stackoverflow.com/users/743382/hvd)[SO 答案](https://stackoverflow.com/a/16466858/1364007)修改）：

```
/// <summary>
/// <para>Returns a readable name for this type.</para>
/// <para>e.g. for type = typeof(IEnumerable&lt;IComparable&lt;int&gt;&gt;),</para>
/// <para>type.FriendlyName() returns System.Collections.Generic.IEnumerable&lt;System.IComparable&lt;int&gt;&gt;</para>
/// <para>type.Name returns IEnumerable`1</para>
/// <para>type.FullName() returns System.Collections.Generic.IEnumerable`1[[System.IComparable`1[[System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089]], mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089]]</para>
/// </summary>
public static string FriendlyName(this Type type)
{
    string result;

    using ( var codeDomProvider = CodeDomProvider.CreateProvider("C#") )
    {
        var typeReferenceExpression = new CodeTypeReferenceExpression(new CodeTypeReference(type));
        using ( var writer = new StringWriter() )
        {
            codeDomProvider.GenerateCodeFromExpression(typeReferenceExpression, writer, new CodeGeneratorOptions());
            result = writer.GetStringBuilder().ToString();
        }
    }

    return result;
} 
```

* * *

通过让[`codeDomProvider`](http://msdn.microsoft.com/en-us/library/system.codedom.compiler.codedomprovider)处理字符串表示，**您可以确保**生成的内容与您定义类型的方式相匹配。

**结果[`FullName`](http://msdn.microsoft.com/en-us/library/system.type.fullname)：**

```
// returns "System.String[,,,][,,][,]"
typeof(string[,][, ,][, , ,]).FullName; 

// returns "System.String[,][,,][,,,]"
typeof(string[, , ,][, ,][,]).FullName;

// returns "System.Collections.Generic.List`1[[System.Int32, mscorlib, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089]]"
typeof(List<int>).FullName; 
```

**结果与`FriendlyName`**

```
// returns "string[,][,,][,,,]"
typeof(string[,][, ,][, , ,]).FriendlyName(); 

// returns "string[,,,][,,][,]"
typeof(string[, , ,][, ,][,]).FriendlyName(); 

// returns "System.Collections.Generic.List<int>"
typeof(List<int>).FriendlyName(); 
```

# regex - AQL 的正则表达式

> ID：11720585
> 
> 赞同：0
> 
> 时间：2012-07-30T11:27:44.927
> 
> 标签：regex, pattern-matching

```
2011-12-01T00:43:51.251871+05:18 Dec 01 2011 00:41:32 KOC-TEJ-AMEX-ASA-5510-6 : %ASA-4-106023: Deny icmp src TCS:172.26.40.1 dst AMEX:172.26.40.187 (type 5, code 0) by access-group "TCS_access_in" [0x953d065b, 0x0] 
```

需要提取`2011-12-01T00:43:51.251871+05:18`

我的代码

```
create view  standardLogTime as
extract regex /(\d{4}\-\d{2}\-\d+\w+\:\d{2}\:\d+\.\d+\+\d+\:\d+)/ on D.text as testValue
from Document D; 
```

-- 提取标准日志生成时间。

```
create view  standardLogTime as
extract regex /\d{4}(-\d{2}){2}T(\d{2}:){2}\d{2}\.\d+?\+\d{2}:\d{2}/ on D.text as      testValue
from Document D;

output view standardLogTime; 
```

-- 提取传入请求日期。

```
create view dateView as
extract regex /(\s+\w+\s\d+\s\d{4})/ on Date.text as testDate from Document Date; 
```

--输出视图日期视图；

-- 提取传入请求时间。

```
create view timeView as
extract regex /\s+(\d{1,2}\:\d{1,2}\:\d{1,2})/ on Time.text
as requestTime from Document Time; 
```

--输出视图时间视图；

-- 提取防火墙设备名称。

```
 create view deviceName as
 extract regex /(\w+\-\w+\-\w+\-\w+\-\d+\-\d+)/ on Device.text
 as deviceName from Document Device; 
```

--输出查看设备名称；

```
create view combinedView as
extract pattern (<S.testValue>) (<D.testDate>) (<T.requestTime>) (<Div.deviceName>)
return group 0 as logTime and
   group 1 as date and
   group 2 as time and
  group 3 as deviceName 
from standardLogTime S,dateView D ,timeView T,deviceName Div; 

 output view combinedView;*/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T11:31:17.633

我不知道那是什么语言，但在 Python 中我会这样做

```
date = line.split()[0] 
```

或者，如果我被迫使用 RE，那就是

```
^(\S+)\s 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T11:34:44.480

`\d{4}(-\d{2}){2}T(\d{2}:){2}\d{2}\.\d+?\+\d{2}:\d{2}`

# single-sign-on - 使用 adfs 强制重新验证

> ID：11720586
> 
> 赞同：3
> 
> 时间：2012-07-30T11:27:45.540
> 
> 标签：single-sign-on, saml, claims-based-identity, adfs

我看过一个[类似的帖子](https://stackoverflow.com/questions/4938927/reauthenticate-using-adfs)，但它与 ASP 更相关。我将在下面解释我的情况。

我正在开发一个 SP（依赖方）并与 ADFS（IDP）集成。由于我处于集成阶段，我希望 ADFS 忘记我之前已经过身份验证，以便每次使用 AuthnRequest 访问 ADFS 端点 (/adfs/ls) 时，我希望它询问我的凭据。

我相信默认情况下 ADFS 会通过远程 IP/主机名记住客户端，因此清除客户端计算机上的 cookie 无济于事。有一篇帖子提供了从 IDP 注销的链接 (https:///adfs/ls/?wa=wsignout1.0&wreply=https:///adfs/ls/?wa=wsignoutcleanup1.0)。ADFS 说我已注销，但当我点击 ADFS 端点时，ADFS 会通过成功的 AuthResponse 重定向回 SP。

你能告诉我如何在 ADFS 上强制重新验证/注销或指向正确的文章吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T19:26:39.833

[FederatedPassiveSignInStatus](http://msdn.microsoft.com/en-us/library/microsoft.identitymodel.web.controls.federatedpassivesigninstatus.aspx)控件（如果您已经安装了所有 WIF 东西，它应该是 VS 的一部分）将为您提供帮助。将其添加到您的应用程序中。并单击它将使您退出所有内容。

AD [FS：如何调用 WS-Federation 注销](http://social.technet.microsoft.com/wiki/contents/articles/1439.ad-fs-how-to-invoke-a-ws-federation-sign-out.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-09-05T12:29:02.333

添加`wfresh=0`为 URL 参数。

该参数表示“新鲜度要求”。

根据[规范](http://docs.oasis-open.org/wsfed/federation/v1.2/os/ws-federation-1.2-spec-os.html#_Toc42337312)：

> 如果指定，这表示以分钟为单位指定的所需最大身份验证年龄。

# c# - 为什么 System.AppDomain.CurrentDomain.BaseDirectory 返回不同的结果？

> ID：11720587
> 
> 赞同：4
> 
> 时间：2012-07-30T11:27:47.797
> 
> 标签：c#, wpf, path, directory

我将数据库的路径（包含一些 xml 文件的文件夹）存储在 app.config 中。在启动时，我检查路径是否存在。如果它不存在，我想将路径设置为默认路径。代码如下所示：

```
public void CheckAndRepairSettings()
{
        /* Check Paths */
        if(GetDatabasePath() == null)
             SetDatabasePath(System.AppDomain.CurrentDomain.BaseDirectory + "DataBase");
} 
```

`GetDatabasePath()`从 app.config 读取路径并将路径`SetDatabasePath()`写入 app.config。这些方法工作正常。

我的问题是`System.AppDomain.CurrentDomain.BaseDirectory`. 如果我在我的应用程序调试模式下运行它，我会得到：“F:\Office\Projekte_Software\ServiceTool\_Work\ServiceSoftware\ServiceSoftware\bin\Debug\”

我还使用 NUnit 进行一些单元测试。如果我在调试模式下运行 NUnit，我会得到：“F:\Office\Projekte_Software\ServiceTool\_Work\ServiceSoftware\ServiceSoftware.UnitTests\bin\Debug”

NUnit 调试模式下的路径中没有尾随反斜杠“\”，因此当我在`CheckAndRepairSettings()`.

为什么这种行为如此不同？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T11:34:44.783

您应该使用 Path.Combine 连接路径，它处理有关现有/不存在（除其他外）路径分隔符的问题

为什么一个包含结束斜线而另一个不包含斜线可能与 nUnit 如何创建运行测试的 appdomain 有关

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-30T11:40:21.973

更好的选择是使用`IsolatedStorage`!

例如，您可以使用以下方式编写设置：

```
using(IsolatedStorageFile f=IsolatedStorageFile.GetUserStoreForDomain())
{

using(var s=new IsolatedStorageFileStream("Myapp.config",FileMode.Create,f))
using(var writer=new StreamWriter(s))
writer.WriteLine("My Settings");
} 
```

# android - 无法在android中的活动之间传递位图

> ID：11720589
> 
> 赞同：3
> 
> 时间：2012-07-30T11:28:01.790
> 
> 标签：android, bitmap, drawable

我需要通过从其他活动中选择图像来动态更改活动的背景。并将所选图像传递回调用活动，但是当我尝试获取图像时，它为空。这是我的代码。

```
 public class SelectGoalBackground extends OrmLiteBaseActivity<DatabaseHelper> {// implements{

GridView gridview ;
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.select_goal_background);
   final String from = getIntent().getExtras().getString("from");
    goalsList = new ArrayList<Goal>();

    try {
        goalsList = getTop3Goals();
    } catch (SQLException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    } catch (java.sql.SQLException e1) {
        // TODO Auto-generated catch block
        e1.printStackTrace();
    }

     gridview = (GridView) findViewById(R.id.gridview);
    gridview.setAdapter(new ImageAdapter(this));

    gridview.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View v, int position, long id) {

           ImageView l = (ImageView)gridview.getChildAt(position);
              Drawable path= l.getDrawable();

            Bitmap bitmap = ((BitmapDrawable)path).getBitmap();

            Intent intent = new Intent(SelectGoalBackground.this, AlarmAppActivity.class);

            intent.putExtra("Bitmap", bitmap);
            startActivity(intent);
            SelectGoalBackground.this.finish();
            return;

    });

}

public class ImageAdapter extends BaseAdapter {
    private Context mContext;

    public ImageAdapter(Context c) {
        mContext = c;
    }

    public int getCount() {
        return mThumbIds.length;
    }

    public Object getItem(int position) {
        return null;
    }

    public long getItemId(int position) {
        return 0;
    }

    // create a new ImageView for each item referenced by the Adapter
    public View getView(int position, View convertView, ViewGroup parent) {
        ImageView imageView;
        if (convertView == null) {  // if it's not recycled, initialize some attributes
            imageView = new ImageView(mContext);
            imageView.setLayoutParams(new GridView.LayoutParams(85, 85));
            imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
            imageView.setPadding(8, 8, 8, 8);
        } else {
            imageView = (ImageView) convertView;
        }
       Bitmap bm = BitmapFactory.decodeResource(getResources(), mThumbIds[position]);
        imageView.setImageBitmap(bm);
        return imageView;
    }

    // references to our images
    private Integer[] mThumbIds = {
            R.drawable.sample_0, R.drawable.sample_1

    };
} 
```

在调用活动时，我得到这样的位图

```
 RelativeLayout rel_lay = (RelativeLayout) findViewById(R.id.main_lay);
    Bitmap bitmap = (Bitmap)this.getIntent().getParcelableExtra("Bitmap");

    if (bitmap != null) {

        Log.v("bitmap", "not null");
        Drawable drawable = new BitmapDrawable(getResources(), bitmap);
        rel_lay.setBackgroundDrawable(drawable);
    } 
```

但这里的位图为空，并且没有设置此活动的背景。任何形式的帮助表示赞赏，请帮助

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-30T11:30:37.850

有 3 个解决方案可以解决此问题。

1）首先将图像转换为字节数组，然后传递到意图，并在下一个活动中从捆绑中获取字节数组并转换为图像（位图）并设置为ImageView。

将位图转换为字节数组：-

```
Bitmap bmp = BitmapFactory.decodeResource(getResources(), R.drawable.ic_launcher);
ByteArrayOutputStream stream = new ByteArrayOutputStream();
bmp.compress(Bitmap.CompressFormat.PNG, 100, stream);
byte[] byteArray = stream.toByteArray(); 
```

将字节数组传递给意图：-

```
Intent intent = new Intent(this, NextActivity.class);
intent.putExtra("picture", byteArray);
startActivity(intent); 
```

从 Bundle 中获取字节数组并转换为位图图像：-

```
Bundle extras = getIntent().getExtras();
byte[] byteArray = extras.getByteArray("picture");

Bitmap bmp = BitmapFactory.decodeByteArray(byteArray, 0, byteArray.length);
ImageView image = (ImageView) findViewById(R.id.imageView1);

image.setImageBitmap(bmp); 
```

2）首先将图像保存到 SDCard 中，然后在下一个活动中将此图像设置为 ImageView。

3）将位图传递到意图并从捆绑包中获取下一个活动中的位图，但问题是您的位图/图像大小当时是否很大，图像未在下一个活动中加载。

# android - Phonegap 联系人 API 问题

> ID：11720599
> 
> 赞同：0
> 
> 时间：2012-07-30T11:28:26.063
> 
> 标签：android, cordova, phonegap-plugins

我需要使用 phonegap 从 android 设备获取联系人列表.....我已经关注了这个

[电话联系 API](http://docs.phonegap.com/en/2.0.0/cordova_contacts_contacts.md.html#Contacts)

并写了这段代码

```
<!DOCTYPE html> 
```

PhoneGap 设备就绪示例

```
<script type="text/javascript" charset="utf-8" src="phonegap-1.4.1.js"></script>
<script type="text/javascript" charset="utf-8">

// Call onDeviceReady when PhoneGap is loaded.
//
// At this point, the document has loaded but phonegap-1.0.0.js has not.
// When PhoneGap is loaded and talking with the native device,
// it will call the event 'deviceready'.
// 
document.addEventListener("deviceready", onDeviceReady, false);

// PhoneGap is loaded and it is now safe to make calls PhoneGap methods
//
function onDeviceReady() {
    var options = new ContactFindOptions();
    options.filter="Bob"; 
    var fields = ["displayName", "name"];
    navigator.contacts.find(fields, onSuccess, onError, options);
}
 function onSuccess(contacts) {
    alert('OnSucess!');
    for (var i=0; i<contacts.length; i++) {
        console.log("Display Name = " + contacts[i].displayName);
    }
}

// onError: Failed to get the contacts
//
function onError(contactError) {
    alert('onError!');
}

</script> 
```

我已在我的清单中给予此许可

*   **android.permission.GET_ACCOUNTS**
*   **android.permission.READ_CONTACTS**
*   **android.permission.WRITE_CONTACTS**

&这个插件

```
<plugin name="Contacts" value="com.phonegap.ContactManager"/> 
```

我正在使用 phonegap 1.4.1 版，当我运行我的应用程序时，我总是收到警报（'OnError'）；背后的原因应该是什么？是版本控制问题吗？感谢任何指南谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T12:40:30.007

您使用的是哪个 ADT 版本？
如果您使用 ADT 20，则必须在 libs 文件夹中手动添加 phonegap jar 才能正常工作。
请尝试并告诉我。
你也可以参考我的问题，我问的和你有点相似。

[Phonegap 应用程序在运行 Android ADT 20 的 Indigo 上意外停止](https://stackoverflow.com/questions/11685657/phonegap-application-stops-unexpectedly-on-indigo-running-android-adt-20)

# java - 带有 netbeans 的 SQLite 不工作

> ID：11720607
> 
> 赞同：1
> 
> 时间：2012-07-30T11:29:04.303
> 
> 标签：java, sqlite, netbeans, database-connection

我正在尝试将 SQLite 驱动程序添加`sqlitejdbc-v056.jar`到我的 netbeans 7.1.2 项目中，我已经创建了数据库和所有内容，但没有任何问题，但是当我尝试使用以下代码（我上网）连接到数据库时，它不起作用

```
public static void main(String args[]) throws Exception {
    Class.forName("org.sqlite.JDBC");

    Connection conn = DriverManager.getConnection("jdbc:sqlite:Vinit");

    Statement stat = (Statement) conn.createStatement();
    stat.executeUpdate("drop table if exists school;");
    stat.executeUpdate("create table school (name, state);");
    PreparedStatement prep = conn.prepareStatement(
                             "insert into school values (?, ?);");

    prep.setString(1, "UTD");
    prep.setString(2, "texas");
    prep.addBatch();
    prep.setString(1, "USC");
    prep.setString(2, "california");
    prep.addBatch();
    prep.setString(1, "MIT");
    prep.setString(2, "massachusetts");
    prep.addBatch();

    conn.setAutoCommit(false);
    prep.executeBatch();
    conn.setAutoCommit(true);

    ResultSet rs = stat.executeQuery("select * from school;");

    while (rs.next()) {
        System.out.print("Name of School = " + rs.getString("name") + " ");
        System.out.println("state = " + rs.getString("state"));
    }

    rs.close();
    conn.close(); 
```

`stat.executeQuery`给出以下错误给我一个问题

```
cannot find symbol
symbol:   method executeQuery(java.lang.String)
location: variable stat of type java.beans.Statement 
```

有谁知道为什么会这样？

编辑：进口

```
import java.beans.Statement;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet; 
```

当我添加`import java.sql.Statement;`它给它一个错误并说要删除未使用的导入

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T11:39:31.613

检查`Statement` **接口**是否是正确的**包**，即。 `java.sql.Statement;`

在您的代码中，将`import java.beans.Statement;`其**错误地**更改为`import java.sql.Statement;`

# c# - 如何从 Dapper 查询返回 null 而不是 default(T)？

> ID：11720611
> 
> 赞同：8
> 
> 时间：2012-07-30T11:29:24.220
> 
> 标签：c#, stored-procedures, null, dapper

我正在通过存储过程将[Dapper](http://code.google.com/p/dapper-dot-net/)用于一些只读数据库调用。我有一个查询，要么返回 1 行，要么什么都不返回。

我正在像这样使用 Dapper：

```
using (var conn = new SqlConnection(ConnectionString))
{
    conn.Open();

    return conn.Query<CaseOfficer>("API.GetCaseOfficer", 
        new { Reference = reference }, 
        commandType: CommandType.StoredProcedure).FirstOrDefault();
} 
```

返回的 CaseOfficer 对象如下所示：

```
public class CaseOfficer
{
    public string Title { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string Email { get; set; }
    public string Telephone { get; set; }
} 
```

然后通过 ASP.NET Web API 应用程序将其作为 JSON 返回。

当存储过程返回结果时，我得到以下信息：

```
{
    title: "Mr",
    firstName: "Case",
    lastName: "Officer",
    email: "test@example.com",
    telephone: "01234 567890"
} 
```

但是当它什么也没返回时，我得到：

```
{
    title: null,
    firstName: null,
    lastName: null,
    email: null,
    telephone: null
} 
```

我怎样才能让 Dapper 返回 null （所以我可以检查并用 404 响应），而不是默认值（CaseOfficer）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-30T11:37:36.257

如果你的 SP 没有返回一行，那么 dapper 就不会返回一行；所以首先要检查：你的 SP 是否可能返回一个空行？一排所有`null`的 s ? 还是返回 0 行？

现在，假设没有返回任何行，`FirstOrDefault`（标准 LINQ-to-Objects 事物）将返回`null`if`CaseOfficer`是 a `class`，或者返回一个默认实例 if`CaseOfficer`是 a `struct`。所以接下来： check`CaseOfficer`是 a `class`（我想不出任何理智的理由是 a `struct`）。

但是：dapper with`FirstOrDefault`通常会*做*你想做的事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-04T07:46:00.920

您可以设置默认属性。

例如：

```
public class BaseEntity
{
    public BaseEntity()
    {
        if (GetType().IsSubclassOf(typeof(BaseEntity)))
        {
            var properties = GetType().GetProperties(BindingFlags.Public | BindingFlags.Instance);

            foreach (var property in properties)
            {
                // Get only string properties
                if (property.PropertyType != typeof (string))
                {
                    continue;
                }

                if (!property.CanWrite || !property.CanRead)
                {
                    continue;
                }

                if (property.GetGetMethod(false) == null)
                {
                    continue;
                }
                if (property.GetSetMethod(false) == null)
                {
                    continue;
                }

                if (string.IsNullOrEmpty((string) property.GetValue(this, null)))
                {
                    property.SetValue(this, string.Empty, null);
                }
            }
        }
    }
}

public class CaseOfficer : BaseEntity
{
    public string Title { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public string Email { get; set; }
    public string Telephone { get; set; }
} 
```

现在，CaseOfficer 获得了自动属性

# android - Android 如何判断ClientConnectionManager是打开了新连接还是使用了现有连接？

> ID：11720612
> 
> 赞同：0
> 
> 时间：2012-07-30T11:29:30.417
> 
> 标签：android

我们创建了一个派生自`DefaultHttpClient`并使用`ConnectionKeepAliveStrategy`. 现在我想知道在运行时是`ClientConnectionManager`重用了一个连接还是创建了一个新的连接（例如，因为与服务器的连接超时）。

我怎么知道？

```
public class MyHttpClient extends DefaultHttpClient
{
    // some code setting constants

        public MyHttpClient()
        {
            super();

            // some code setting http connection params

            setKeepAliveStrategy(new ConnectionKeepAliveStrategy()
            {
                @Override
                public long getKeepAliveDuration(final HttpResponse response, final HttpContext context)
                {
                    return KEEP_ALIVE_TIMEOUT * MS_PER_SECOND;
                }
            });

        }

    @Override
    protected ClientConnectionManager createClientConnectionManager()
    {

        // some code registering HTTP and HTTPS 

        return new ThreadSafeClientConnManager(getParams(), registry);
    }       

    // some code for the socketfactory
}

// At some other class:

public class SomeClass
{
   private static final HttpClient HTTP_CLIENT = new MyHttpClient();

   public void someMethod()
   {
    /* some code */

    HttpGet get = new HttpGet(some url);
    HttpResponse getResponse = HTTP_CLIENT.execute(get);

    /* more code */
   }
} 
```

当我们打电话时`HTTP_CLIENT.execute()`，我如何才能看到新连接是由创建的`ClientConnectionManager`还是现有的连接被重用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T06:16:33.267

好的，我通过搜索互联网并测量使用 https 连接获取大量数据所需的时间来弄清楚：

1.  默认情况下，clientConnectionManager 将尝试重用连接，无论您是否定义了保持活动策略。setKeepAlive 策略会给你一些修补的东西，但我找不到获取数据所需的时间有多大差异。

2.  使用 setReuseStrategy 您可以确保在数据获取时始终建立一个新连接，然后我发现获取大量数据的时间通常会加倍！这是因为建立 https 连接的开销。

# android - 使用相机的位图尺寸（自定义视图）

> ID：11720613
> 
> 赞同：1
> 
> 时间：2012-07-30T11:29:33.237
> 
> 标签：android, camera, landscape-portrait

我正在为 API 7 (2.1) 开发。我实现了这样的相机视图：

```
public class CameraView extends SurfaceView implements SurfaceHolder.Callback {
SurfaceHolder mHolder;

int width;
int height;

Camera mCamera;

public CameraView(Context context, AttributeSet attrs) {
    super(context, attrs);
    initHolder();
}

public CameraView(Context context) {
    super(context);
    initHolder();
}

private void initHolder() {
    // Install a SurfaceHolder.Callback so we get notified when the
    // underlying surface is created and destroyed.
    mHolder = getHolder();
    mHolder.addCallback(this);
    mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
}

public void surfaceCreated(SurfaceHolder holder) {
    // The Surface has been created, acquire the camera and tell it where to
    // draw.
    mCamera = Camera.open();

//      Parameters params = mCamera.getParameters();
//      // If we aren't landscape (the default), tell the camera we want
//      // portrait mode
//      if (this.getResources().getConfiguration().orientation != Configuration.ORIENTATION_LANDSCAPE) {
//          params.set("orientation", "portrait"); // "landscape"
//          // And Rotate the final picture if possible
//          // This works on 2.0 and higher only
//          // params.setRotation(90);
//          // Use reflection to see if it exists and to call it so you can
//          // support older versions
//          try {
//              Method rotateSet = Camera.Parameters.class.getMethod("setRotation", new Class[] { Integer.TYPE });
//              Object arguments[] = new Object[] { new Integer(90) };
//              rotateSet.invoke(params, arguments);
//          } catch (NoSuchMethodException nsme) {
//              // Older Device
//              Log.v("CAMERAVIEW", "No Set Rotation");
//          } catch (IllegalArgumentException e) {
//              Log.v("CAMERAVIEW", "Exception IllegalArgument");
//          } catch (IllegalAccessException e) {
//              Log.v("CAMERAVIEW", "Illegal Access Exception");
//          } catch (InvocationTargetException e) {
//              Log.v("CAMERAVIEW", "Invocation Target Exception");
//          }
//      }
//      mCamera.setParameters(params);
    setDisplayOrientation(mCamera, 90);

    try {
        mCamera.setPreviewDisplay(holder);
    } catch (IOException exception) {
        mCamera.release();
        mCamera = null;
    }
}

public void surfaceDestroyed(SurfaceHolder holder) {
    // Surface will be destroyed when we return, so stop the preview.
    // Because the CameraDevice object is not a shared resource, it's very
    // important to release it when the activity is paused.
    mCamera.stopPreview();
    mCamera.release();
    mCamera = null;
}

public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {
    width = w;
    height = h;
    // Now that the size is known, set up the camera parameters and begin the preview.
    Camera.Parameters parameters = mCamera.getParameters();
    //parameters.setPreviewSize(w, h);
    mCamera.setParameters(parameters);

    mCamera.startPreview();
}

public void takePicture(Camera.ShutterCallback shutter, Camera.PictureCallback raw, Camera.PictureCallback jpeg) {
    mCamera.takePicture(shutter, raw, jpeg);
}

protected void setDisplayOrientation(Camera camera, int angle){
    Method downPolymorphic;
    try {
        downPolymorphic = camera.getClass().getMethod("setDisplayOrientation", new Class[] { int.class });
        if (downPolymorphic != null) {
            downPolymorphic.invoke(camera, new Object[] { angle });
        }

    } catch (Exception e1) {}
}
} 
```

只有使用反射的方法（取自 Williew 在[Android camera rotate](https://stackoverflow.com/questions/5309029/android-camera-rotate)中的回答）才能在我的设备上显示正确旋转的预览，否则，预览总是旋转 -90°

到目前为止一切顺利，但现在我遇到了另一个问题。当我得到带有活动回调的位图时：

```
public void onPictureTaken(byte[] data, Camera camera) {
    Bitmap b = BitmapFactory.decodeByteArray(data, 0, data.length);

    Log.d("test", "---width: "  + b.getWidth() + " height: " + b.getHeight());
} 
```

它始终处于横向模式！（在本例中为 2560 x 1920）。因此，如果用户在纵向模式下手持设备拍摄照片，我会得到一张 2560 x 1920 的位图，无论如何，当我放入图像视图时，由于某种原因，它看起来与我拍摄的纵向照片一模一样。当用户在横向模式下拿着设备的照片时出现问题，我想旋转它，以便以纵向模式（按比例缩小）显示结果 - 或者对横向图片执行一些其他特殊操作。

但我无法将它们与肖像照片区分开来，因为位图的尺寸是相同的：/

如何识别纵向/横向图片？

任何想法...？我是相机新手，有点迷路了……提前谢谢。

**编辑** 好吧，我认为没有问题，尺寸总是相同的，因为无论我如何拿着设备，图片实际上总是相同的尺寸。唯一我不明白的是为什么当预览和图片明显处于纵向模式时我总是得到宽度>高度。

# java - @Scheduled 注解 Spring

> ID：11720616
> 
> 赞同：2
> 
> 时间：2012-07-30T11:29:39.147
> 
> 标签：java, spring, scheduled-tasks, spring-annotations

我正在使用 Spring 3 注释**@Scheduled**在服务器上创建计划作业。但我对 @Scheduled 注释的参数（ **cron**、**fixedDelay**、**fixedRate ）感到困惑。**请解释这些参数和我可以使用这些参数的**情况**之间的**区别。**

 *** * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T11:35:34.110

我相信不同选项之间的区别在这里已经很清楚[了](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/scheduling/annotation/Scheduled.html)。这取决于您需要如何执行任务：

1.  `fixedRate`使 Spring*定期*运行任务，即使最后一次调用可能仍在运行。
2.  `fixedDelay`专门控制最后一次执行完成时的下一次执行时间。
3.  `cron`是源自 Unix cron 实用程序的一项功能，可根据您的要求提供各种选项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T11:34:03.717

cron ：类似 cron 的表达式，扩展了通常的 UN*X 定义以包括秒以及分钟、小时、月中的某天、月和周中的某天的触发器。

fixedDelay ：在最后一次调用结束和下一次调用开始之间的固定时间段内执行带注释的方法。

fixedRate ：在调用之间以固定的时间间隔执行带注释的方法。

[http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/scheduling/annotation/Scheduled.html](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/scheduling/annotation/Scheduled.html)**

# java - 跨越 JTable 的特定列的所有行（以呈现 JTextPane）

> ID：11720617
> 
> 赞同：2
> 
> 时间：2012-07-30T11:29:44.330
> 
> 标签：java, swing, jtable, jtextpane, renderer

我想构建一个标准的 JTable，但所有行都跨越一个特定的列。因此，该列必须只包含一个以 JTextPane 作为其渲染器的单元格。你知道有什么简单的方法吗？

注意：不需要第三方软件。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T15:09:08.040

由@MvG 的某种*覆盖*的想法触发，这里是使用 JLayer 的概念验证（添加到 jdk7 的核心，对于早期版本，[在 SwingLabs](http://jxlayer.java.net)中使用非常相似的 JXLayer）

基本成分：

*   一个 LayerUI，它在其 glassPane 中管理一个 textArea
*   一个自定义布局管理器，它在列上调整/定位 textArea
*   一些强制重新布局 glassPane 的听众

至少让它工作起来非常简单。但是，有一些粗糙的边缘：

*   与往常一样，在表格中导航：当表格获得焦点时，其单元格选择移动到 textArea 下。可能需要自定义 selectionModel
*   在移动列的过程中，列下的表格行是可见的
*   ?? 可能是另一群恶魔，毕竟我们混淆了用户界面 :-)

一些代码：

```
public static class RowSpanUI extends LayerUI<JTable> {
    public static String COLUMN_TO_SPAN_KEY = "Table.columnToSpan";
    private JLayer layer;
    private JTextArea area;

    @Override
    public void installUI(JComponent c) {
        super.installUI(c);
        this.layer = (JLayer) c;
        installTextArea();
        installListeners();
    }

    @Override
    public void doLayout(JLayer<? extends JTable> l) {
        super.doLayout(l);
        l.getGlassPane().doLayout();
    }

     private void installTextArea() {
        area = new JTextArea(10, 20);
        layer.getGlassPane().setBorder(BorderFactory.createLineBorder(Color.RED));
        layer.getGlassPane().setLayout(new ColumnLayoutManager(this));
        layer.getGlassPane().add(area);
        layer.getGlassPane().setVisible(true);
    }

    public JTable getView() {
        return (JTable) layer.getView();
    }

    public int getViewColumnToSpan() {
        Object clientProperty = getView().getClientProperty(COLUMN_TO_SPAN_KEY);
        if (clientProperty instanceof Integer) {
            return getView().convertColumnIndexToView((int) clientProperty);
        }   
        return -1;
    }

    /**
     * Install listeners to manually trigger a layout of the glassPane.
     * This is incomplete, just the minimum for demonstration!
     */
    protected void installListeners() {
        ComponentListener compL = new ComponentListener() {

            @Override
            public void componentShown(ComponentEvent e) {
                doLayout(layer);
            }

            @Override
            public void componentResized(ComponentEvent e) {
                doLayout(layer);
            }

            @Override
            public void componentMoved(ComponentEvent e) {
                doLayout(layer);
            }

            @Override
            public void componentHidden(ComponentEvent e) {
                // TODO Auto-generated method stub

            }
        };
        layer.addComponentListener(compL);

        TableColumnModelListener columnL = new TableColumnModelListener() {

            @Override
            public void columnRemoved(TableColumnModelEvent e) {
                doLayout(layer);
            }

            @Override
            public void columnMoved(TableColumnModelEvent e) {
                doLayout(layer);
            }

            @Override
            public void columnMarginChanged(ChangeEvent e) {
                doLayout(layer);
            }

            @Override
            public void columnAdded(TableColumnModelEvent e) {
                doLayout(layer);
            }

            @Override
            public void columnSelectionChanged(ListSelectionEvent e) {
            }

        };
        getView().getColumnModel().addColumnModelListener(columnL);
    }

}

public static class ColumnLayoutManager implements LayoutManager {

    private RowSpanUI ui;

    public ColumnLayoutManager(RowSpanUI ui) {
        this.ui = ui;
    }

    @Override
    public void layoutContainer(Container parent) {
        Component child = parent.getComponent(0);
        child.setBounds(getColumnBounds());
    }

    @Override
    public Dimension preferredLayoutSize(Container parent) {
        return ui.getView().getSize();
    }

    protected Rectangle getColumnBounds() {
        int viewColumn = ui.getViewColumnToSpan();
        if (viewColumn < 0) {
            return new Rectangle();
        }
        Rectangle r = ui.getView().getCellRect(0, viewColumn, false);
        r.height = ui.getView().getHeight();
        return r;
    }

    @Override
    public Dimension minimumLayoutSize(Container parent) {
        return preferredLayoutSize(parent);
    }
    @Override
    public void addLayoutComponent(String name, Component comp) {
    }

    @Override
    public void removeLayoutComponent(Component comp) {
    }
}

// usage
JTable table = new JTable(myModel);
table.putClientProperty(RowSpanUI.COLUMN_TO_SPAN_KEY, 2);
JLayer layer = new JLayer(table, new RowSpanUI()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T12:28:23.820

a 的呈现`JTable`，包括对单元格矩形的剪裁，深埋在所讨论的可插拔外观的[用户界面实现中。](http://hg.openjdk.java.net/jdk7/jdk7/jdk/file/9b8c96f96a0f/src/share/classes/javax/swing/plaf/basic/BasicTableUI.java)改变那里的东西将会是一团糟，并且高度依赖于实际的 JFC 实施。

因此，我建议以您喜欢的任何方式绘制这些 roes 的单元格，并在表格顶部放置另一个透明窗格，以使用您描述的跨区内容覆盖这些区域。仍然很乱，可能需要做很多工作，但更可能是便携的。

# three.js - 网格不可见时的网格不透明度问题

> ID：11720625
> 
> 赞同：0
> 
> 时间：2012-07-30T11:29:59.583
> 
> 标签：three.js

我创建了一个 jsfiddle [ [http://jsfiddle.net/georgeneil/cfrsj/5/](http://jsfiddle.net/georgeneil/cfrsj/5/) ] 来演示这个问题。

场景中有一个红色立方体和该立方体内的许多粒子。这里是重现问题的步骤。

1）通过取消选中控制面板中的可见复选框将多维数据集设置为不可见。

2）旋转立方体

3）通过面板中的不透明度控制增加不透明度

4) 将立方体设置为可见。

现在立方体将变得完全不透明。我观察到这个问题并不一致，但对我来说大部分时间都会发生。

这是 API 中的错误还是我的代码中有任何问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T14:00:03.773

透明度在 webGL 中屡试不爽。在您的情况下，您的透明对象正在相互竞争。一种解决方案是将粒子的透明度设置为`false`，`shaderMaterial`因此只有一个透明立方体。在这种情况下一切正常。

小提琴：http: [//jsfiddle.net/cfrsj/6/](http://jsfiddle.net/cfrsj/6/)

# android - 同时播放两个视频

> ID：11720628
> 
> 赞同：0
> 
> 时间：2012-07-30T11:30:08.807
> 
> 标签：android, android-videoview

我有一个应用程序可以在 VideoView 中全屏显示跳舞玩具。有时另一个视频会在玩具的视频上执行，在这种情况下，我的视图有问题，因为顶部的视频显示为透明。

如果我设置 vid1.stopPlayback(); 在调用第二个视频之前，它可以工作，但我无法重现第一个。

有没有办法同时播放两个视频？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T11:38:00.867

我不完全确定，但我有一种感觉，我读过可能无法同时播放视频，因为它在屏幕上呈现的方式。我找不到我在哪里读到的，但你可以尝试用这种方式搜索。

# apache-flex - 在 Flex 中的宿主组件和渲染器之间传递数据和调用函数

> ID：11720633
> 
> 赞同：0
> 
> 时间：2012-07-30T11:30:27.273
> 
> 标签：apache-flex, actionscript, renderer

有没有更好的方法在组件及其渲染器（也调用方法）之间传递数据？
我正在使用`dispatchEvent(new CustomEvent(CustomEvent.SOME_EVENT, data));`或`owner.dispatchEvent(new CustomEvent(CustomEvent.SOME_EVENT, data));`或冒泡（取决于情况）。然后在那个组件中监听我的事件。

为了将数据传递给渲染器，我正在使用：
`(myList.dataGroup.getElementAt(myList.selectedIndex) as MyRenderer).doSomething(data);`或修改`dataProvider`，但无论如何我都必须 callLater 并调用渲染器内部的方法。

这很糟糕，我必须一直`callLater`等待渲染器`set data`函数执行，否则渲染器尚未回收并且为空。

有没有更高效、更漂亮的方式在渲染器和组件之间传输数据和调用函数？

PS 是的，我已经将数据传递给渲染器。我的渲染器处理相当复杂的逻辑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T13:53:01.880

我以这种方式解决了与您类似的问题：

```
var goalPropDLRenderer:ClassFactory = 
         new ClassFactory(GoalPropagationDataListRenderer);

goalPropDLRenderer.properties = { isPropagationMode : isPropagationMode };

list.itemRenderer = goalPropDLRenderer; 
```

其中：“list”是我必须设置项目渲染器的女巫的列表对象；而不是设置项目渲染器内联（通过 mxml 在“列表”声明中），我使用了这种语法。此代码在“列表”父亲的 creationComplete 上调用（我认为有更好的地方）这样可以将“属性”/“值”传递给渲染器。

在 GoalPropagationDataListRenderer 我有：

```
[Bindable]
public var isPropagationMode : Boolean; 
```

由goalPropDLRenderer.properties = { isPropagationMode : isPropagationMode } 填充；所以在渲染器内部我可以毫无问题地访问 isPropagationMode 的值。

我希望它可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-01T09:54:27.523

有一些方法，取决于你到底想做什么（如果数据依赖于每一行，或者数据网格中的全局），但就个人而言，我会避免 callLater 和你写的这个：(myList.dataGroup.getElementAt(myList. selectedIndex) 作为 MyRenderer).doSomething(data)

您可以使用冒泡事件，然后在datagird（或任何时候）中捕获它，然后通过myRenderer（event.target）获取渲染器，不需要使用getElementAt！，但questin是您何时调度事件（我不知道细节)

如果您使用全局（在数据网格中）逻辑：

*   我会制作一些通用对象（称为逻辑），这些对象将在数据网格和渲染器中设置（在我看来，将逻辑与视图分离是一种很好的做法）

*   然后我将使用 Claudio 编写的解决方案（将属性设置为 itemRenderer ClassFactory）将逻辑设置为渲染器

*   或者你可以使用 listData 对象（但它不是那么简单）
*   或者，如果您在 datagdid 中的 mxml 中编写项目渲染器，则可以使用 externalDocument 轻松绑定它，例如 logic="{outerDocument.logic}"
*   或者你可以只使用 itemRenderer 的 owner 属性，所以每当你想要一些方法时，调用 MyDataGrid(owner).doSomeDataGridCalculationsForData(data)，如果你不想创建逻辑对象，则不需要

# asp.net - 使用 webService 下载文件

> ID：11720637
> 
> 赞同：0
> 
> 时间：2012-07-30T11:30:33.243
> 
> 标签：asp.net, web-services

```
[WebMethod()]
    public void GetFileByDocumentNumber(string DocumentNumber)
    {
        string FilePath = GetFile(DocumentNumber);
        string FullPath = ConfigurationManager.AppSettings["FilePath"]  + FilePath;

        DownloadToBrowser(FullPath);

    }

    private void DownloadToBrowser(string filePath)
    {
        FileInfo file = new FileInfo(filePath);
        Context.Response.Clear();

        Context.Response.ClearHeaders();

        Context.Response.ClearContent();

        Context.Response.AddHeader("Content-Disposition", "attachment; filename=" + file.Name);

        Context.Response.AddHeader("Content-Length", file.Length.ToString());

        Context.Response.ContentType = "text/plain";

        Context.Response.Flush();

        Context.Response.TransmitFile(file.FullName);

        Context.Response.End();
    } 
```

我将上面的代码用于我的 Web 服务，以便从服务器下载文件。它在本地机器上工作正常，但是当我在服务器上托管我的 Web 服务并尝试使用该服务时，它会出现以下错误

```
Client found response content type of 'text/plain', but expected 'text/xml'. 
```

这个错误的原因是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T11:41:11.690

尝试替换`ContentType`为`application/octet-stream`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T12:02:09.637

您应该必须通过`WebMethod`.

```
[WebMethod()]
public string GetFileByDocumentNumber(string DocumentNumber)
{
   string FilePath = GetFile(DocumentNumber);
   string FullPath = ConfigurationManager.AppSettings["FilePath"]  + FilePath;
   return File.ReadAllText(FullPath);
} 
```

# javascript - Javascript 表单隐藏可见动作

> ID：11720642
> 
> 赞同：-1
> 
> 时间：2012-07-30T11:30:41.183
> 
> 标签：javascript, forms, hidden, visible

我正在尝试制作“优惠券”表格。因此，当我的用户进入文本字段并输入“你好”时，它会依次打开与代码对应的表单。我将制作各种用于优惠券的单词/代码。我想做到这一点，这样他们就无法绕过这个，并且如果他们单击查看源文件，他们就看不到这个 javascript。有人能帮我吗。我相信这似乎很简单，尽管我对javascript一无所知。所以 //comments 将被优先考虑，以便我了解每个命令和语句发生以供进一步使用。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T11:35:36.063

您不能隐藏 javascript，因为浏览器必须可以访问 javascript 才能执行它。如果浏览器可以访问它，那么任何人都可以通过 URL 手动访问它。

如果您不希望用户看到处理优惠券值的代码，则需要在服务器端进行，而不是在 javascript 中进行。

您可以使用 javascript 进行 ajax 调用，将输入的优惠券值发送到服务器。服务器端可以使用该值来选择并返回与优惠券值对应的HTML。但是如果你想隐藏它，检查优惠券价值的代码必须在服务器端。

# colors - 自定义 FeedCount。FeedBurner 根据哪个规则转换颜色？

> ID：11720650
> 
> 赞同：0
> 
> 时间：2012-07-30T11:31:02.750
> 
> 标签：colors, rss, feedburner

我正在为我自己的订阅服务准备自己的动态生成的 FeedCount。我认为这将是一个好主意，以支持通过 URL 设置颜色的约定，这在 FeedBurner 中是众所周知的，

```
http://feeds.feedburner.com/~fc/Ekundelekpl?bg=99CCFF&fg=000000&anim=0 
```

这个 URL 会产生这样的图像。

![饲料计数](../Images/c752b305f33de36a5660a8fc7634670c.png)

`fg`is 表示文本颜色，`bg`在此表示深蓝色。然而，这里根据某些规则生成浅蓝色（ccffff）。

这是一种流行的转换颜色约定，在 web 开发人员/设计师世界中是众所周知的吗？

我检查了其他几对颜色，但我数了数，弄清楚规则是什么。**我不想硬编码 FeedBurner 支持的所有颜色。**

**[编辑]**

有 216 种可用颜色。这是我提取的十二对：

```
000000,7e7e7e
000033,8a8a8a
000066,909090
000099,9999CC
0000CC,9999FF
0000FF,9999FF

006600,909090
006633,99CC99
006666,A2A2A2
006699,99CCCC
0066CC,99CCFF
0066FF,99CCFF 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T16:14:31.557

我以另一种方式做到了。

我决定使用 feedburner 作为模板。我下载正确的图像并覆盖我感兴趣的部分。

[https://github.com/noisy/eGazeciarzFeedCount](https://github.com/noisy/eGazeciarzFeedCount)

# objective-c - Sparrow - 如何修复 SIGABRT 错误，游戏 initwithwitdth

> ID：11720651
> 
> 赞同：0
> 
> 时间：2012-07-30T11:31:03.070
> 
> 标签：objective-c, ios5, xcode4, sparrow-framework

我刚刚开始使用 sparrow 框架，并且一直在关注 Gamua 自己的“The Big Sparrow Tutorial”。我在教程的第一部分，使用 AppScaffold 1.3，但是当我尝试编译我的基本代码时，它挂在加载屏幕上并给我一个 SIGABRT 错误。

我在 AppScaffold 的 GameController.m（见底部）中放置了一个异常断点，并在此处停止：

mGame = [[游戏分配] initWithWidth:gameWidth height:gameHeight];

这也是我唯一的输出：

```
2012-07-30 07:19:54.787 AppScaffold[1682:10a03] -[Game initWithWidth:height:]: unrecognized selector sent to instance 0x7553980
(lldb) 
```

我正在使用股票 AppScaffold，我唯一改变的是 Game.m。

这是我的 Game.m：

```
@interface Game : SPSprite
@end

@implementation Game
{
@private
    SPImage *mBackground;
    SPImage *mBasket;
    NSMutableArray *mEggs;
}

- (id)init
{
    if((self = [super init]))
    {
        //load the background image first, add it to the display tree
        //and keep it for later use
        mBackground = [[SPImage alloc] initWithContentsOfFile:@"background.png"];
        [self addChild:mBackground];

        //load the image of the basket, add it to the display tree
        //and keep it for later use
        mBasket = [[SPImage alloc] initWithContentsOfFile:@"basket.png"];
        [self addChild:mBasket];

        //create a list that will hold the eggs,
        //which we will add and remove repeatedly during the game
        mEggs = [[NSMutableArray alloc] init];
    }
    return self;
}

- (void)dealloc
{
    [mBackground release];
    [mBasket release];
    [mEggs release];
    [super dealloc];
}

@end 
```

我已经尽力使用我的基本故障排除策略，但我对 Obj-C 和 Sparrow 很陌生，可以用手:)

谢谢

编辑：为清楚起见，我在此处添加了 GameController.m 内容：

```
//
//  GameController.m
//  AppScaffold
//

#import <OpenGLES/ES1/gl.h>
#import "GameController.h"

@interface GameController ()

- (UIInterfaceOrientation)initialInterfaceOrientation;

@end

@implementation GameController

- (id)initWithWidth:(float)width height:(float)height
{
    if ((self = [super initWithWidth:width height:height]))
    {
        float gameWidth  = width;
        float gameHeight = height;

        // if we start up in landscape mode, width and height are swapped.
        UIInterfaceOrientation orientation = [self initialInterfaceOrientation];
        if (UIInterfaceOrientationIsLandscape(orientation)) SP_SWAP(gameWidth, gameHeight, float);

        mGame = [[Game alloc] initWithWidth:gameWidth height:gameHeight];

        mGame.pivotX = gameWidth  / 2;
        mGame.pivotY = gameHeight / 2;

        mGame.x = width  / 2;
        mGame.y = height / 2;

        [self rotateToInterfaceOrientation:orientation animationTime:0];
        [self addChild:mGame];
    }

    return self;
}

- (void)dealloc
{
    [mGame release];
    [super dealloc];
}

- (UIInterfaceOrientation)initialInterfaceOrientation
{
    // In an iPhone app, the 'statusBarOrientation' has the correct value on Startup; 
    // unfortunately, that's not the case for an iPad app (for whatever reason). Thus, we read the
    // value from the app's plist file.

    NSDictionary *bundleInfo = [[NSBundle mainBundle] infoDictionary];
    NSString *initialOrientation = [bundleInfo objectForKey:@"UIInterfaceOrientation"];
    if (initialOrientation)
    {
        if ([initialOrientation isEqualToString:@"UIInterfaceOrientationPortrait"])
            return UIInterfaceOrientationPortrait;
        else if ([initialOrientation isEqualToString:@"UIInterfaceOrientationPortraitUpsideDown"])
            return UIInterfaceOrientationPortraitUpsideDown;
        else if ([initialOrientation isEqualToString:@"UIInterfaceOrientationLandscapeLeft"])
            return UIInterfaceOrientationLandscapeLeft;
        else
            return UIInterfaceOrientationLandscapeRight;
    }
    else 
    {
        return [[UIApplication sharedApplication] statusBarOrientation];
    }
}

- (void)rotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
                       animationTime:(double)animationTime
{
    float angles[] = {0.0f, 0.0f, -PI, PI_HALF, -PI_HALF};

    float oldAngle = mGame.rotation;
    float newAngle = angles[(int)interfaceOrientation];

    // make sure that rotation is always carried out via the minimal angle
    while (oldAngle - newAngle >  PI) newAngle += TWO_PI;
    while (oldAngle - newAngle < -PI) newAngle -= TWO_PI;

    // rotate game
    if (animationTime)
    {
        SPTween *tween = [SPTween tweenWithTarget:mGame time:animationTime
                                       transition:SP_TRANSITION_EASE_IN_OUT];
        [tween animateProperty:@"rotation" targetValue:newAngle];
        [[SPStage mainStage].juggler removeObjectsWithTarget:mGame];
        [[SPStage mainStage].juggler addObject:tween];
    }
    else 
    {
        mGame.rotation = newAngle;
    }

    // inform all display objects about the new game size
    BOOL isPortrait = UIInterfaceOrientationIsPortrait(interfaceOrientation);
    float newWidth  = isPortrait ? MIN(mGame.gameWidth, mGame.gameHeight) : 
                                   MAX(mGame.gameWidth, mGame.gameHeight);
    float newHeight = isPortrait ? MAX(mGame.gameWidth, mGame.gameHeight) :
                                   MIN(mGame.gameWidth, mGame.gameHeight);

    if (newWidth != mGame.gameWidth)
    {
        mGame.gameWidth  = newWidth;
        mGame.gameHeight = newHeight;

        SPEvent *resizeEvent = [[SPResizeEvent alloc] initWithType:SP_EVENT_TYPE_RESIZE
                                width:newWidth height:newHeight animationTime:animationTime];
        [mGame broadcastEvent:resizeEvent];
        [resizeEvent release];
    }
}

// Enable this method for the simplest possible universal app support: it will display a black
// border around the iPhone (640x960) game when it is started on the iPad (768x1024); no need to 
// modify any coordinates. 
/*
- (void)render:(SPRenderSupport *)support
{
    if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad)
    {
        glEnable(GL_SCISSOR_TEST);
        glScissor(64, 32, 640, 960);
        [super render:support];
        glDisable(GL_SCISSOR_TEST);
    }
    else 
        [super render:support];
}
*/

@end 
```

这是我的 Xcode 项目：[http ://cl.ly/2e3g02260N47](http://cl.ly/2e3g02260N47)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T11:34:35.967

你打电话给

```
initWithWidth:height: 
```

方法，而您的类中没有定义。

从您的编辑来看，该`initWithWidth`方法似乎是在 class 中声明的`GameController`，而不是在`Game`.

所以，似乎

您在哪个上下文中调用`initWithWidth:height:`方法是在其中声明的，`Game.h`但您在`GameController.m`.

这解释了为什么你会得到 SIGABRT 和编译时的错误。

修复正在调用

```
mGame = [[GameController alloc] init]; 
```

来自 GameController initWithWidth...

```
- (id)initWithWidth:(float)width height:(float)height
{
if ((self = [super initWithWidth:width height:height]))
{
    float gameWidth  = width;
    float gameHeight = height;

    // if we start up in landscape mode, width and height are swapped.
    UIInterfaceOrientation orientation = [self initialInterfaceOrientation];
    if (UIInterfaceOrientationIsLandscape(orientation)) SP_SWAP(gameWidth, gameHeight, float);

    mGame = [[Game alloc] init];

    mGame.pivotX = gameWidth  / 2;
    mGame.pivotY = gameHeight / 2;

    mGame.x = width  / 2;
    mGame.y = height / 2;

    [self rotateToInterfaceOrientation:orientation animationTime:0];
    [self addChild:mGame];
}

return self;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T15:02:54.750

教程很老，和最新的脚手架不兼容；

我这样做了：

```
- (id)init
{
    if((self = [super init]))
    { 
```

当我应该这样做时：

```
- (id)initWithWidth:(float)width height:(float)height
{
    if ((self = [super initWithWidth:width height:height]))
    { 
```

谢谢，虽然塞尔吉奥！

（有更好的麻雀教程，我什至正在制作自己的视频教程：P）

# java - 在 Java 中使用 10.8 通知中心

> ID：11720652
> 
> 赞同：19
> 
> 时间：2012-07-30T11:31:05.917
> 
> 标签：java, macos, notifications, osx-mountain-lion

这只是一个普遍的问题。我没有实际的项目或其他我想做的事情。是否可以用 Java 构建应用程序并添加一些框架内容或其他内容并使用通知中心？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-12T14:30:00.433

我写了一个简单的`C`-> `Objective-C`shim .dylib，它导出了`showNotification`一个立即发送通知的函数。

[`JNA`](https://github.com/twall/jna)然后我为dylib中导出的函数编写了一个包装器。我相信您可以结合使用[Rococoa](https://code.google.com/p/rococoa/)和[JNAerator](http://code.google.com/p/jnaerator/)来完全消除这个 dylib。

然后我写了一个简单的 java 应用程序，我把它变成了一个[app bundle](http://docs.oracle.com/javase/7/docs/technotes/guides/jweb/packagingAppsForMac.html)。这是重要的一点。如果您的 java 应用程序不在应用程序包中，则不会传递通知。

发送到通知中心的消息。

![已送达通知截图](../Images/d37b0e63c1e8d278e2e9baff5db267ca.png)

这是非常可行的，你只需要按照规则玩`NSUserNotificationCenter`-**它必须在一个应用程序包**中。

我为此使用了 java 7，更新 9。[另一个问题似乎取得了更大的成功](https://stackoverflow.com/questions/13638092/using-os-x-10-8-notification-center-nsusernotification-with-java)。

用于构建这个简单应用程序的代码[可在 github 上找到](https://github.com/petesh/OSxNotificationCenter)。它包含一个用于创建 的 xcode 项目`.dylib`和一个使用`.dylib`来传递通知的 netbeans 项目。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-12-11T14:30:59.607

我找到了一个可能对你有用的解决方案，你可以用来`Apple script`在 osx 上显示通知，试试这个：

```
Runtime.getRuntime().exec(new String[] { "osascript", "-e", "display notification "This is a message" with title "Title" subtitle "Subtitle" sound name "Funk"" }); 
```

[您可以在此处](https://developer.apple.com/library/mac/documentation/AppleScript/Conceptual/AppleScriptLangGuide/reference/ASLR_cmds.html#//apple_ref/doc/uid/TP40000983-CH216-SW224)阅读有关`Apple script`的通知

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-20T09:27:00.853

当应用程序更新到 Growl 2.0 时，一种可能的解决方案是 Growl，这会将 Growl 通知转发到通知中心。

[咆哮2](http://growl.posterous.com/growl-2-and-hardwaregrowler-2-both-in-beta)的相关资料

使用[MoutainGrowl可以使用当前版本转发 Growl 消息](https://github.com/stigi/MountainGrowl/)

在 Java 下可以通过[libgrowl](http://sourceforge.net/projects/libgrowl/)或[jgntp使用 Growl](http://code.google.com/p/jgntp/)

也许它不是最干净的解决方案，它对用户有一些要求，但它绝对是一个有效的解决方案

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-18T18:35:34.010

我建议你看看 IntelliJ IDEA 如何处理[MountainLionNotifications](https://github.com/JetBrains/intellij-community/blob/master/platform/platform-impl/src/com/intellij/ui/MountainLionNotifications.java)和[GrowlNotifications](https://github.com/JetBrains/intellij-community/blob/master/platform/platform-impl/src/com/intellij/ui/GrowlNotifications.java)中的通知。

正如其他答案中所建议的，它使用 JNA 来操作 NSObjects。

# c - 负数的模运算

> ID：11720656
> 
> 赞同：259
> 
> 时间：2012-07-30T11:31:22.290
> 
> 标签：c, gcc, modulo, negative-number

在 C 程序中，我尝试了以下操作（只是为了检查行为）

```
 x = 5 % (-3);
 y = (-5) % (3);
 z = (-5) % (-3); 

printf("%d ,%d ,%d", x, y, z); 
```

它给了我`(2, -2 , -2)`在 gcc 中的输出。我每次都期待一个积极的结果。模数可以是负数吗？任何人都可以解释这种行为吗？

* * *

## 回答 #1

> 赞同：217
> 
> 时间：2012-07-30T11:43:34.550

C99*要求*when`a/b`是可表示的：

`(a/b) * b` **+** `a%b`应等于`a`

*从逻辑上讲，这是有道理的。*正确的？

让我们看看这会导致什么：

* * *

*示例 A.`5/(-3)`是`-1`*

=> `(-1) * (-3)` **+** `5%(-3)` =`5`

仅当`5%(-3)`为 2 时才会发生这种情况。

* * *

*示例 B.`(-5)/3`是`-1`*

=> `(-1) * 3` **+** `(-5)%3` =`-5`

这只能发生`(-5)%3`在`-2`

* * *

## 回答 #2

> 赞同：204
> 
> 时间：2012-07-30T11:50:50.140

C 中的`%`运算符不是取*模*运算符，而是*余数*运算符。

模数和余数运算符在负值方面有所不同。

对于余数运算符，结果的符号与被除数（分子）的符号相同，而对于模运算符，结果的符号与除数（分母）相同。

C 将`%`操作定义`a % b`为：

```
 a == (a / b * b) + a % b 
```

整数除法与`/`截断朝向`0`。这是针对`0`（而不是针对负无穷大）进行的截断，将 定义`%`为余数运算符而不是模运算符。

* * *

## 回答 #3

> 赞同：88
> 
> 时间：2013-10-10T06:08:19.423

基于 C99 规范：`a == (a / b) * b + a % b`

我们可以写一个函数来计算`(a % b) == a - (a / b) * b`！

```
int remainder(int a, int b)
{
    return a - (a / b) * b;
} 
```

对于模运算，我们可以有以下函数（假设`b > 0`）

```
int mod(int a, int b)
{
    int r = a % b;
    return r < 0 ? r + b : r;
} 
```

我的结论是，`a % b`在 C 中是余数运算而不是模运算。

* * *

## 回答 #4

> 赞同：79
> 
> 时间：2017-02-09T08:30:55.777

我认为没有必要检查该数字是否为负数。

找到正模的一个简单函数是 -

*编辑：*假设`N > 0`和`N + N - 1 <= INT_MAX`

```
int modulo(int x,int N){
    return (x % N + N) %N;
} 
```

这适用于x 的**正值和负值**。

*原始 PS：*也正如@chux 所指出的，如果您的 x 和 N 可能分别达到 INT_MAX-1 和 INT_MAX 之类的值，只需替换`int`为`long long int`.

如果它们也超过了 long long 的限制（即接近 LLONG_MAX），那么您应该按照此处其他答案中的描述分别处理正面和负面情况。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2015-06-17T07:02:26.890

其他答案已在**C99**或更高版本中解释，涉及负操作数的整数除法总是**截断为零**。

请注意，在**C89**中，无论结果是否向上还是向下，都定义了。因为在所有标准中都`(a/b) * b + a%b`等于，所以涉及负操作数的结果也在 C89 中实现定义。`a``%`

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2018-09-27T04:26:32.223

> 模数可以是负数吗？

`%`可以是负数，因为它是[余数运算符](https://stackoverflow.com/a/20638659/2410359)，除法后的余数，而不是[Euclidean_division](https://en.wikipedia.org/wiki/Euclidean_division)后的余数。由于 C99，结果可能为 0、负数或正数。

```
 // a % b
 7 %  3 -->  1  
 7 % -3 -->  1  
-7 %  3 --> -1  
-7 % -3 --> -1 
```

所需的*模*OP 是经典的[欧几里得模](https://en.wikipedia.org/wiki/Modulo_operation)，而不是`%`.

> 我每次都期待一个积极的结果。

要执行无论何时`a/b`定义都明确定义的欧几里得模，是`a,b`任何符号并且结果永远不会是负数：

```
int modulo_Euclidean(int a, int b) {
  int m = a % b;
  if (m < 0) {
    // m += (b < 0) ? -b : b; // avoid this form: it is UB when b == INT_MIN
    m = (b < 0) ? m - b : m + b;
  }
  return m;
}

modulo_Euclidean( 7,  3) -->  1  
modulo_Euclidean( 7, -3) -->  1  
modulo_Euclidean(-7,  3) -->  2  
modulo_Euclidean(-7, -3) -->  2 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2018-08-16T14:57:14.113

根据[C99 标准](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1124.pdf)，第**6.5.5 节乘法运算符**，需要以下内容：

```
(a / b) * b + a % b = a 
```

# 结论

根据 C99，余数运算结果的符号与被除数的符号相同。

让我们看一些例子（`dividend / divisor`）：

## 当只有股息为负时

```
(-3 / 2) * 2  +  -3 % 2 = -3

(-3 / 2) * 2 = -2

(-3 % 2) must be -1 
```

## 只有除数为负时

```
(3 / -2) * -2  +  3 % -2 = 3

(3 / -2) * -2 = 2

(3 % -2) must be 1 
```

## 当除数和被除数都是负数时

```
(-3 / -2) * -2  +  -3 % -2 = -3

(-3 / -2) * -2 = -2

(-3 % -2) must be -1 
```

* * *

> # 6.5.5 乘法运算符
> 
> ## 句法
> 
> 1.  乘法表达式：
>     *   `cast-expression`
>     *   `multiplicative-expression * cast-expression`
>     *   `multiplicative-expression / cast-expression`
>     *   `multiplicative-expression % cast-expression`
> 
> ## 约束
> 
> 2.  每个操作数都应具有算术类型。**%**运算符的操作数应为整数类型。
> 
> ## 语义
> 
> 3.  通常的算术转换是在操作数上执行的。
>     
>     
> 4.  二元*****运算符的结果是操作数的乘积。
>     
>     
> 5.  **/**运算符的结果是第一个操作数除以第二个操作数的商；**%**运算符的结果是余数。在这两种操作中，如果第二个操作数的值为零，则行为未定义。
>     
>     
> 6.  当整数相除时，**/**运算符的结果是代数商，其中任何小数部分都被丢弃 [1]。如果商`a/b`是可表示的，则表达式`(a/b)*b + a%b`应等于`a`。
>     
>     
> 
> [1]：这通常被称为“向零截断”。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-07-30T11:42:40.230

模运算的结果取决于分子的符号，因此**y**和**z得到 -2**

这是参考

[http://www.chemie.fu-berlin.de/chemnet/use/info/libc/libc_14.html](http://www.chemie.fu-berlin.de/chemnet/use/info/libc/libc_14.html)

> **整数除法**
> 
> 本节介绍执行整数除法的函数。这些函数在 GNU C 库中是多余的，因为在 GNU C 中，'/' 运算符总是向零舍入。但在其他 C 实现中，'/' 可能会以不同的方式舍入负参数。div 和 ldiv 很有用，因为它们指定如何将商：向零舍入。余数与分子的符号相同。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2017-04-09T22:46:23.813

在数学中，这些约定源于数学，没有断言模算术应该产生积极的结果。

例如。

1 mod 5 = 1，但也可以等于 -4。也就是说，1/5 从 0 中产生余数 1 或从 5 中产生 -4。（两个因数均为 5）

类似地，-1 mod 5 = -1，但它也可以等于 4。也就是说，-1/5 从 0 产生余数 -1 或从 -5 产生余数 4。（两个因数都是 5）

如需进一步阅读，请查看数学中的[等价类](https://en.wikipedia.org/wiki/Equivalence_class)。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-08-26T11:55:57.140

模运算符给出余数。c中的模运算符通常采用分子的符号

1.  x = 5 % (-3) - 这里的分子是正数，因此结果为 2
2.  y = (-5) % (3) - 这里的分子是负数，因此它的结果是 -2
3.  z = (-5) % (-3) - 这里的分子是负数，因此它的结果是 -2

此外，模数（余数）运算符只能用于整数类型，不能用于浮点数。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2019-06-05T08:02:33.063

`mod`我相信按照抽象算术的定义来思考它会更有用。不是作为一种运算，而是作为一个完全不同的算术类，具有不同的元素和不同的运算符。这意味着添加`mod 3`与“正常”添加不同；那是; 整数加法。

所以当你这样做时：

```
5 % -3 
```

您正在尝试将**整数**5 映射到集合中的一个元素`mod -3`。这些是 的元素`mod -3`：

```
{ 0, -2, -1 } 
```

所以：

```
0 => 0, 1 => -2, 2 => -1, 3 => 0, 4 => -2, 5 => -1 
```

假设你因为某种原因必须熬夜 30 个小时，那一天你还剩下多少个小时？`30 mod -24`.

但是 C 实现的不是`mod`，而是余数。无论如何，关键是返回底片确实有意义。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2020-07-20T12:51:21.907

看来问题是`/`不是*地板*操作。

```
int mod(int m, float n)
{  
  return m - floor(m/n)*n;
} 
```

# android - 带有长文本的微调器无法正常工作

> ID：11720665
> 
> 赞同：6
> 
> 时间：2012-07-30T11:32:12.140
> 
> 标签：android, spinner, tablerow

我的微调器有一些问题。根据我的日期，我必须将 a 添加到a`TableRow`或a 。我必须在 Spinner 中显示的数组有点长。我用一个带有短文本的数组测试了我的代码，它看起来像这样：`TextView``EditText``Spinner`

![在此处输入图像描述](../Images/881148ed5007e9aa481e5c79cd6dce08.png)

这里唯一的问题是 spinner 不是`fill_parent`.

如果我把我的数组放到微调器上，它看起来像这样：

![在此处输入图像描述](../Images/92175096a0740cd77a23c7db7e4c8404.png)

在这种情况下，微调器看起来不像微调器，并且 EditText 不再可见。当我选择微调器时，它会出现这个视图：

![在此处输入图像描述](../Images/6463941f28f59cf2f431f610f70f77d4.png)

这里我需要显示数组的所有文本。这是我的代码：

```
TableRow.LayoutParams lp = new TableRow.LayoutParams(
            TableRow.LayoutParams.FILL_PARENT , TableRow.LayoutParams.WRAP_CONTENT);
tablerow_product[i] = new TableRow(viewToLoad.getContext());
tablerow_product[i].setLayoutParams(lp);

product_spinner[i] = new Spinner(viewToLoad.getContext());
product_spinner[i].setLayoutParams(lp);   product_spinner[i].setBackgroundResource(R.drawable.spinner_selector);
String[] proba={"red","blue"};  //first image is with this test array
ArrayAdapter spinnerArrayAdapter = new ArrayAdapter(viewToLoad.getContext(),  com.Orange.R.layout.my_spinner_textview,spinnerArray);                                     spinnerArrayAdapter.setDropDownViewResource(android.R.layout.simple_spinner_item);
product_spinner[i].setAdapter(spinnerArrayAdapter);
tablerow_product[i].addView(product_spinner[i]);                                            Themes_TableLayout.addView(tablerow_product[i],new TableLayout.LayoutParams(TableRow.LayoutParams.FILL_PARENT,                  TableRow.LayoutParams.WRAP_CONTENT)); 
```

和 my_spinner_textview.xml ：

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    style="?android:attr/spinnerItemStyle"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:textColor="@drawable/textorange_selected"
    android:gravity="left"
    android:singleLine="false"
    android:ellipsize="end"/> 
```

谁能帮我解决它？欢迎任何想法。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T07:16:38.887

对于我的问题，我找到了这个解决方案：

```
Spinner language = (Spinner) findViewById(com.Orange.R.id.current_language_text);

ArrayAdapter adapter = new ArrayAdapter(this,
                com.Orange.R.layout.my_spinner_textview, languages);
adapter.setDropDownViewResource(com.Orange.R.layout.multiline_spinner_dropdown_item);
language.setAdapter(adapter); 
```

其中语言是 a`String[]`并且`my_spinner_textview.xml`是：

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/textview_spinner"
    style="?android:attr/spinnerItemStyle"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:textColor="@drawable/textorange_selected" 
    android:paddingLeft="5dp"
    android:singleLine="true"
    android:ellipsize="end"
 /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-03-21T10:54:14.363

我只是用自定义文本视图做的，比如：

```
ArrayAdapter myAdapter = new ArrayAdapter(context, R.layout.text_view, reasonTypesList);
myAdapter.setDropDownViewResource(R.layout.text_view);
mySpinner.setAdapter(myAdapter); 
```

这是`text_view`布局：

```
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/spinnerTextView"
    style="?android:attr/spinnerItemStyle"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:padding="@dimen/padding"
    android:text="Custom Text with multi lines" /> 
```

# android - 从 C++ 文件调用 Android 软键盘

> ID：11720669
> 
> 赞同：6
> 
> 时间：2012-07-30T11:32:31.657
> 
> 标签：android, android-ndk

我在从 C++ 文件调用 Android 软键盘时遇到了一些问题。我有一个 C++ 项目，我需要在某些屏幕中显示和使用本机软键盘。我正在用 NDK 编译所有代码。任何人都可以提供有关如何在本机/C++ 应用程序中使用软键盘的建议吗？在此先感谢您的帮助。问候，梅杜尔

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-20T19:41:48.360

1）在Java中创建一个方法来显示这样的虚拟键盘：[How to show virtual keypad in an android activity](https://stackoverflow.com/questions/2722896/how-to-show-virtual-keypad-in-an-android-activity)

2) 使用以下技术编写从 C++ 到 Java 的回调： [JNI - 如何从 C++ 或 C 回调到 Java？](https://stackoverflow.com/questions/9630134/jni-how-to-callback-from-c-or-c-to-java)

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-07-30T11:52:16.360

您不能仅将 C++ 用于 Android 应用程序，您可以使用 C++ 或 C 通过 JNI 和 Java 构建应用程序。为 Android 提供的所有 API 都是针对 Java 语言的。

# .net - 在 ASP.NET MVC 中，我可以专门检查用户的本地角色成员身份吗？

> ID：11720670
> 
> 赞同：1
> 
> 时间：2012-07-30T11:32:34.457
> 
> 标签：.net, asp.net-mvc, authorization, windows-authentication

在我的 ASP.NET MVC 3 应用程序中，我想针对本地角色（例如，Builtin\Administrators）授权用户。我特别不想向 AD 服务器查询用户的角色成员身份，因为这可能非常慢。有没有办法只查询用户的本地角色成员资格？我在 .NET 4.5、Windows Server 2008 R2 上。

# codeigniter - 树的输出到字符串

> ID：11720671
> 
> 赞同：0
> 
> 时间：2012-07-30T11:32:38.333
> 
> 标签：codeigniter, recursion, tree

我的桌子`[cat_id,title,pid]`。我需要按以下格式获取所有子子类别 ID：

```
[1] =>Array ( [cat_id] => 2 [title] => TEST [pid] => 1 ),

[2] =>Array ( [cat_id] => 3 [title] => TEST [pid] => 1 ),

[3] =>Array ( [cat_id] => 4 [title] => TEST [pid] => 2 ), 

[4] =>Array ( [cat_id] => 5 [title] => TEST [pid] => 3 ) 
```

目的 - 使用孩子的 ID 来获取所有这些项目。

我尝试按照以下代码执行操作，但它不起作用：

```
public function get_ids($tree,$cid = 0)
{

    $data = $this->db->select('cat_id, title, pid')
                     ->where('pid',$cid)
                     ->get('catalog');

    $result = array_push($tree,$data->result_array());

    if($data->num_rows() > 0){

        foreach ($data->result_array() as $r) {

            return $this->get_ids($result,$r['cat_id']);

        }   
    }
    else{
        return $result;
    }
} 
```

也许有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T11:42:31.380

尝试以下代码通过给定的父 ID 获取所有子 ID。

```
function fnGetChildCatelogs($id) {

    $qry = "SELECT cat_id FROM catalog WHERE pid = $id";

    $rs = mysql_query($qry);    

    $arrResult = array();    

    if(mysql_num_rows($rs) > 0) {

        # It has children, let's get them.

        while($row = mysql_fetch_array($rs)) {

            # Add the child to the list of children, and get its subchildren

            $arrResult[$row['cat_id']] = fnGetChildCatelogs($row['cat_id']);

        }

    }

    return $arrResult;

} 
```

# windows - Windows 将文件从子文件夹批量复制到一个文件夹

> ID：11720681
> 
> 赞同：16
> 
> 时间：2012-07-30T11:33:21.197
> 
> 标签：windows, batch-file, copy, xcopy

我曾尝试制作将位于 D:\images（此处为随机命名的子文件夹）中的所有 *.tif 文件复制到 d:\all 的批处理脚本。

```
xcopy D:\Downloads\*.TIF D:\temp\ /s 
```

有效，但它与所有文件夹树一起复制。我尝试使用其他键，但它不起作用。感谢帮助！

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-07-30T11:54:49.840

`FOR`是你的朋友。阅读选项和变量替换`HELP FOR`；然后试试这个非常简单的代码。`/R``%~nx`

```
 pushd d:\downloads
   for /r %%a in (*.tif) do (
     echo COPY "%%a" "d:\temp\%%~nxa"
   )
   popd 
```

仔细观察结果，然后删除`ECHO`命令。

您将不得不改进代码以应对错误、重复名称、边缘情况、带有保留字符的名称、竞争条件、宇宙事件......

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-04-22T09:55:02.757

使用 windows 文件资源管理器搜索文件，例如 *.gif ，我在搜索窗口中找到文件，使用 Edit=>Select All ，复制然后粘贴到所需的文件夹。这将所有子目录中的所有 gif 文件复制到单个文件夹。对于大量文件，它有时会挂起/没有响应，但其他工作正常。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-12-27T18:18:57.490

```
pushd D:\Source
   for /r %%a in (*.?*) do (
       MOVE "%%a" "D:\Destination folder\%%~nxa"
   )
popd 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-06-15T16:08:42.363

您还可以使用 XXCOPY 免费软件。像 XCOPY 一样工作，但是当您使用 /SG 参数时，它会展平子目录。[在这里](http://www.xxcopy.com/xxcopy16.htm)查看如何使用它。

# c# - 痣和 AppSettingsReader？

> ID：11720687
> 
> 赞同：1
> 
> 时间：2012-07-30T11:33:37.130
> 
> 标签：c#, moles

我正在与 Moles 一起编写一些单元测试。我在网上搜索过，但没有看到任何关于如何使用 Moles 拦截对 AppSettingsReader.GetValue 的调用的回复。

有没有人能够使用 Moles 做到这一点？或者我是否被迫隔离自己班级中可以注入或模拟的调用？理想情况下，有一种方法可以直接使用 Moles 来拦截调用，因为我们真的不想修改要测试的代码。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T20:13:22.950

首先，我强烈建议迁移到 .NET 4.5 / C# 5 / Visual Studio 2012 中的 Moles 发布版本，称为“Fakes and Stubs”。

System.Configurations 命名空间与 Mole/Fake 类型不兼容，必须被存根。要使用 Moles 框架创建存根，只需为 System.Configuration.AppSettingsReader 类型创建一个接口。Moles 编译器会自动将接口转换为 Stub 类型。

这是您可以添加到项目中的界面：

```
using System;

namespace YOUR_NAMESPACE_HERE
{
  /// <summary>
  /// IOC object for stubbing System.Configuration.AppSettingsReader.
  /// Provides a method for reading values of a particular type from
  /// the configuration.
  /// </summary>
  interface IAppSettingsReader
  {
    /// <summary>
    /// Gets the value for a specified key from the
    /// System.Configuration.ConfigurationSettings.AppSettings property
    /// and returns an object of the specified type containing the
    /// value from the configuration.
    /// </summary>
    /// <param name="key">The key for which to get the value.</param>
    /// <param name="type">The type of the object to return.</param>
    /// <returns>The value of the specified key</returns>
    /// <exception cref="System.ArgumentNullException">key is null.
    /// - or -
    /// type is null.</exception>
    /// <exception cref="System.InvalidOperationException">key does
    /// not exist in the &lt;appSettings&gt; configuration section.
    /// - or -
    /// The value in the &lt;appSettings&gt; configuration section
    /// for key is not of type type.</exception>
    public object GetValue(string key, Type type);
  }
} 
```

这也是一个存根类：

```
using System;
using System.Configuration;

namespace YOUR_NAMESPACE_HERE
{
  /// <summary>
  /// Production stub for System.Configuration.AppSettingsReader.
  /// Provides a method for reading values of a particular type from
  /// the configuration.
  /// </summary>
  public class AppSettingsReaderStub : IAppSettingsReader
  {
    /// <summary>
    /// Gets the value for a specified key from the
    /// System.Configuration.ConfigurationSettings.AppSettings property
    /// and returns an object of the specified type containing the value
    /// from the configuration.
    /// </summary>
    /// <param name="key">The key for which to get the value.</param>
    /// <param name="type">The type of the object to return.</param>
    /// <returns>The value of the specified key</returns>
    /// <exception cref="System.ArgumentNullException">key is null.
    /// - or -
    /// type is null.</exception>
    /// <exception cref="System.InvalidOperationException">key does not
    /// exist in the &lt;appSettings&gt; configuration section.
    /// - or -
    /// The value in the &lt;appSettings&gt; configuration section for
    /// key is not of type type.</exception>
    public object GetValue(string key, Type type)
    {
      var reader = new AppSettingsReader();
      object result = reader.GetValue(key, type);
      return result;
    }
  }
} 
```

# architecture - Dynamics AX 2009 :: 互斥 GLS 层的含义

> ID：11720689
> 
> 赞同：1
> 
> 时间：2012-07-30T11:33:43.067
> 
> 标签：architecture, internationalization, standards, axapta, dynamics-ax-2009

据我了解，AX 2009 的构建方式使得巴西、中国和/或印度不能与俄罗斯和/或波兰位于同一 AX 实例上，因为它们具有互斥的 GLS 层。我们正在接近解决这场冲突的阶段，因此正在研究如何解决这个问题。

任何人都可以向我指出有关此问题的任何文档/博客吗？我希望了解更多有关功能和技术含义以及可能的解决方案的信息。我了解 AX 2012 没有这个问题，但想在做出这个决定之前看看我们在 2009 年有哪些选择。

提前致谢，

JB

如果您想了解更多关于我正在调查的内容，请参阅以下内容：

*   功能影响是什么（因此我们可以决定 GLS 层引入的功能是否与我们的要求相关/如果我们的要求不受此影响，可以在没有 GLS 层的情况下实施一些国家）？
*   是否可以为两个实例维护一个自定义代码库（即在 VAR 层中），但在每个实例中使用不同的 GLS 层？
*   如果上述不简单，是否可以通过在 VAR 层中放置更多代码以将两个 GLS 层的功能映射到一个公共层（即，它的行为就像两个 GLS 层中的类实现相同的接口），也许然后使用用于自定义代码的 VAP 层和用于补丁的 USR 层（因为所有代码都将由我们的合作伙伴开发，因此我们不需要此层用于我们自己的目的）？
*   是否有关于具有多个 GLS 层的代码管理的任何信息？
*   有没有描述为什么这个问题存在（从技术角度），所以我可以更好地了解这个问题的确切原因是什么（即架构的哪一点导致多个国家/地区的冲突/这是怎么回事AX 2009 中的 MS 无法解决）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T16:52:46.883

*   功能影响是什么（因此我们可以决定 GLS 层引入的功能是否与我们的要求相关/如果我们的要求不受此影响，可以在没有 GLS 层的情况下实施一些国家）？

您基本上是在问，“每个国家/地区的自定义 GLS 图层中有什么？” 我不知道这个答案，但获得答案的一种方法是在一个清晰的环境中，您可以启用每个 GLS 层，通过（工具>开发工具>版本更新>比较层）创建一个层比较项目GLS 图层，然后仅将 GLS 图层项目导出到 XPO 并针对这两个 XPO 使用 WinDiff。这就是我能想到的快速找出差异的全部。在这个问题上向微软开一张票可能是值得的，在实际层上工作的工程师可以为您提供更好的答案。

*   是否可以为两个实例维护一个自定义代码库（即在 VAR 层中），但在每个实例中使用不同的 GLS 层？

不。例如，如果你有两个 AOS，每个都有不同的 GLS 层，它们与同一个数据库通信，它基本上是两个独立的代码库。根据发布的环境，发布的内容可能会有所不同。这将是一条糟糕的道路。

*   如果上述不简单，是否可以通过在 VAR 层中放置更多代码以将两个 GLS 层的功能映射到一个公共层（即，它的行为就像两个 GLS 层中的类实现相同的接口），也许然后使用用于自定义代码的 VAP 层和用于补丁的 USR 层（因为所有代码都将由我们的合作伙伴开发，因此我们不需要此层用于我们自己的目的）？

**我在想，在这种情况下，您首先需要做的**是通过代码比较准确确定 GLS 层之间的差异。

与您的大部分业务相关的 GLS 层，我们将其称为**A**。我们将称为**B**的另一个辅助 GLS 层。

为此，请使用 GLS **B**获取您的环境，然后执行（工具> 开发工具>版本更新>比较层）并将您的项目命名为 GLS_B，选择您的源 GLS 层，然后引用 sys 层，然后单击确定。创建私有项目后，将整个项目导出到名为 GLS_B.xpo 的 XPO。

对于此示例，我们将在 VAR 层中工作，我将假设您的环境层仅是 SYS、SYP、GLS、VAR、VAP、USR。

切换到您的 GLS **A**环境，删除GLS 上方的**所有层**。打开导入XPO工具（Ctrl+Shift+I from AOT），选择GLS_B.xpo，保留所有默认，然后勾选“Show details”，繁琐的工作就进来了，但是点击每个对象，做一个比较。如果有任何差异，请导入对象。如果没有差异，请不要导入。完成所有对象的检查后，创建另一个 VAR 层的比较项目，您将知道要仔细查看的对象。浏览每个项目，看看代码差异是什么。

GLS 层对于不同国家/地区是分开的这一事实使我认为差异可能很大或相互冲突……因此简单的合并可能无法解决潜在的逻辑差异。这是您需要确定下一步要做什么的地方。如果更改不是那么重要，您可以合并到 VAR 层，将其设为您合并的 GLS 层，然后在上层进行修改。

*   是否有关于具有多个 GLS 层的代码管理的任何信息？

没有把握。我认为只是我上面的 TFS 方法。

*   有没有描述为什么这个问题存在（从技术角度），所以我可以更好地了解这个问题的确切原因是什么（即架构的哪一点导致多个国家/地区的冲突/这是怎么回事AX 2009 中的 MS 无法解决）？

不确定，这个问题值得联系微软。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T00:33:59.203

我刚刚在一个 AX 2009 实例中安装了相同的两个 GLS 层。我已将第二个 GLS 层导入 VAR/VAP 并合并 CUS 层中的差异。合并图层是一项艰巨的工作，特别是如果您安装了很多自定义和附加模块。

MS 建议每个 AX 安装只安装一个 GLS 层，正如您提到的，在您的情况下这将需要 2 个实时安装（AX 2009 有 4 个 GLS 层）。

我仍然认为最好的方法是将两个 GLS 层放在同一个实例中，因为它使部署更容易，并且您仍然可以在部署时复制层。

# facebook - 来自 connect.facebook.net/en_US/all.js 的 IE 8 错误由 credits 回调引起

> ID：11720694
> 
> 赞同：1
> 
> 时间：2012-07-30T11:33:54.067
> 
> 标签：facebook, internet-explorer-8, callback, facebook-javascript-sdk, facebook-credits

**设置：**
有一个正常工作的 facebook 应用程序，并且正确设置了 facebook 积分交易（即服务器端的一切工作正常）。
在 Firefox 和 chrome 中，交易完成没有问题，但是在 IE8 中，完成/关闭购买对话框时的回调会引发以下错误：

**错误一：**

```
Line: 52 Error: Object doesn't support this property or method  
Object doesn't support this property or method  JScript - script block, line 52 character 37 
```

它指向的功能是：

```
ui: function( params )
{
obj = FB.JSON.parse( params );
method = obj.method;
cb = function( response ) { FBAS.getSwf().uiResponse( FB.JSON.stringify( response ),     method ); }
FB.ui( obj, cb );
}, 
```

特别强调这一点：

```
FBAS.getSwf().uiResponse( FB.JSON.stringify( response ), method ) 
```

在[http://connect.facebook.net/en_US/all.js](http://connect.facebook.net/en_US/all.js)文件中

**错误 2：**
行：65 错误：对象不支持此操作
对象不支持此操作 all.js，第 65 行字符 2198

[它指向的行是一个愚蠢的长无格式不可读的混乱，所以除非要求，否则我将省略它]

特别强调这一点：

```
delete d._old_visibility 
```

再次在[http://connect.facebook.net/en_US/all.js](http://connect.facebook.net/en_US/all.js)文件中

我正在使用的html（删除了应用程序识别的东西）如下：

```
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:fb="https://www.facebook.com/2008/fbml">
<head>
    <meta charset="utf-8" />

    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
    <meta http-equiv="Expires" content ="0" />
    <meta http-equiv="Pragma" content ="no-cache" />
    <meta http-equiv="Cache-Control" content ="no-cache" />
    <title>[ APP NAME ]</title>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/swfobject/2.2/swfobject.js"></script> 
</head>
<body>
    <div id="fb-root"></div> 
    <script type="text/javascript">
        $(document).ready
        (
            function()
            {
                var appId = [ APP ID ];
                var host = [ APP HOST ];

                // If the user did not grant the app authorization go ahead and
                // tell them that. Stop code execution.
                if (0 <= window.location.href.indexOf ("error_reason"))
                {
                    $(document.body).append ("<p>Authorization denied!</p>");
                    return;
                }

                // Loads the Facebook SDK script.
                (function(d)
                {
                    var js, id = 'facebook-jssdk'; if (d.getElementById(id)) {return;}
                    js = d.createElement('script'); js.id = id; js.async = true;
                    js.src = "//connect.facebook.net/en_US/all.js";
                    d.getElementsByTagName('head')[0].appendChild(js);
                }(document));

                // When the Facebook SDK script has finished loading init the
                // SDK and then get the login status of the user. The status is
                // reported in the handler.
                window.fbAsyncInit = function()
                {
                    //debugger;

                    FB.init(
                    {
                        appId : appId,
                        status : true,
                        cookie : true,
                        oauth : true,
                    });

                    FB.getLoginStatus (onCheckLoginStatus);
                };

                // Handles the response from getting the user's login status.
                // If the user is logged in and the app is authorized go ahead
                // and start running the application. If they are not logged in
                // then redirect to the auth dialog.
                function onCheckLoginStatus (response)
                {
                    if (response.status != "connected")
                    {
                        top.location.href = "https://www.facebook.com/dialog/oauth?client_id=" + appId + "&redirect_uri=" + encodeURIComponent (host+"[ RELATIVE APP  PATH ]") + "&scope=publish_stream,user_about_me,read_friendlists,user_photos";
                    }
                    else
                    {
                        // Start the application
                        loadGame();
                    }
                }
            }
        );

        function loadGame()
        {
            var flashvars = {};  
            var params = {};  
            var attributes = {};  
            params.allowscriptaccess = "always";
            attributes.id = 'flashContent';
            attributes.name = 'flashContent';
            swfobject.embedSWF("[ APP SWF ]?"+Math.floor(Math.random()*10000), "flashContent", "100%", "99%", "10.0", null, flashvars, params, attributes);
        }
    </script>

    <div id="flashContent" > 
        Loading...
    </div>
</body> 
```

这只是 IE 8 的一个问题，但由于大量用户事务将失败（或者更确切地说，由于回调失败而将完成、收费并且不生效），因此导致应用程序停止运行。
在过去的几天里，我一直在寻找其他有此或类似问题的人，但无济于事。
我已经看到一些类似的问题，人们被警告关于全局创建的 javascript 变量并导致干扰或变量是使用 IE 中保留的关键字的名称，但据我所知，这里都不是这种情况。facebook javascript 代码是从 facebook 开发页面和可靠来源中提取的相当样板的东西。它可能是 JQuery（我对此几乎没有经验），但是，这又是从工作示例中提取的，如果有问题我看不到它。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T16:52:15.843

## 解决了

我不会接受这个答案，因为老实说，我认为所提供的信息不能回答/解决这个问题，并且觉得这将是不好的形式。但我想把这个留给任何可能正在寻找解决方案的人。

**错误原因**
问题是facebook在“正常”facebook操作期间隐藏应用程序（在这种情况下，显示支付提示）和外部接口调用在应用程序隐藏/不可见时在Internet Explorer中不起作用的结果.

**解决方案**
在[http://flassari.is/2012/02/external-interface-error-object-expected/#comment-1743](http://flassari.is/2012/02/external-interface-error-object-expected/#comment-1743)
找到 所有这些步骤可能不是必需的，但最后我所做的是：

通过使用覆盖可见性来停止 facebook 隐藏应用程序

```
<style>
#[ ID OF THE FLASH OBJECT]
{
    visibility: visible !important;
}
</style> 
```

添加 wmode = "不透明"; 到 swfobject 参数
使用可选的[flash_hide_callback](http://developers.facebook.com/docs/reference/javascript/#flash_hide_callback)通过将 hideFlashCallback:"OnHideFlash" 添加到 actionscript 中的 FB.init 选项来移动/隐藏应用程序，其中 OnHideFlash 是一个 javascript 函数：

```
function OnHideFlash(params)
{
    if (params.state == 'opened')
    {
        getSwf().style.top = '-10000px';
    } else
    {
        getSwf().style.top = '';
    }
} 
```

getSwf() 是您获取 Flash 应用程序对象的首选方法。

希望这将避免一些人在我最后几天遇到的无休止的“XYXY 在 IE 中不起作用的原因”问题和解决方案中的痛苦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T14:58:15.773

我建议通过 JavaScript Lint 工具放置您的代码并纠正您发现的任何错误。IE8 对 JavaScript 的编码方式非常挑剔，而 Firefox 和 Chrome 则可以接受一些小错误。如果您的代码没有错误（在 linting 之后），它应该可以正常工作。

# asp.net-mvc - 使用控制台应用程序修改 MVC 项目文件

> ID：11720695
> 
> 赞同：0
> 
> 时间：2012-07-30T11:33:55.300
> 
> 标签：asp.net-mvc, console-application

为了修改 mvc 项目的 csproject 文件，我使用了如下代码片段，但未能实现。请你帮助我好吗？

```
 var newReference = @"System.Web.Mvc, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=MSIL";

var profiles = Directory.GetFiles(path, "*.csproj", SearchOption.AllDirectories);

        foreach (var profile in profiles)
        {
            var doc = XDocument.Load(profile);
            var parentElement = doc.Descendants("ItemGroup").FirstOrDefault();
            if (parentElement != null)
            {
                var newNode = new XElement("Reference", new XAttribute("Include", newReference));
                parentElement.Add(newNode);
            }
            doc.Save(profile);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T12:09:07.623

“天真的”答案是您必须包含 xml 的命名空间

```
var newReference = @"System.Web.Mvc, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35, processorArchitecture=MSIL";

var profiles = Directory.GetFiles(path, "*.csproj", SearchOption.AllDirectories);
var ns = XNamespace.Get("http://schemas.microsoft.com/developer/msbuild/2003");

foreach (var profile in profiles)
{
    var doc = XDocument.Load(profile);
    var parentElement = doc.Descendants(ns + "ItemGroup").FirstOrDefault();
    if (parentElement != null)
    {
        var newNode = new XElement("Reference", new XAttribute("Include", newReference));
        parentElement.Add(newNode);
    }
    doc.Save(profile);
} 
```

这将完成您尝试实现的目标（在第一个 ItemGroup 元素中添加新引用），但是如果您查看 csproj 文件，您会发现不仅有一个 ItemGroup “组”！

# ruby-on-rails - 如何从 Rails 中的 link_to 中剥离索引操作部分？

> ID：11720698
> 
> 赞同：1
> 
> 时间：2012-07-30T11:33:57.697
> 
> 标签：ruby-on-rails, ruby, link-to

当我使用：

```
link_to "Title", {:controller => 'my', :id=>1, :param=>2} 
```

它产生：

```
<a href="/my/index?id=1&param=2"> 
```

但我想要以下内容：

```
<a href="/my?id=1&param=2"> 
```

实现这一目标的最佳方法是什么？

**我使用 Rails 3.1.0**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T11:39:49.583

通常，最好使用命名路由，您可以稍后将其作为方法调用。例子：

在 routes.rb 中：

```
match '/my/:id/:param' => 'my#index', :as => :my 
```

在一个视图中：

```
link_to 'anchor', my_url(:id => 2, :param => 3) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T11:41:32.687

除了`Achilles`回答您还可以将字符串参数提供给 link_to 函数

```
<%= link_to "Title", "/my/index?id=1&param=2" %> 
```

您还可以将字符串参数提供给 link_to 函数

```
<% id, param = 1,2 %>
<%= link_to "Title", "/my/index?id=#{id}&param=#{param}" %> 
```

# android - 画布部分放大

> ID：11720702
> 
> 赞同：4
> 
> 时间：2012-07-30T11:34:14.983
> 
> 标签：android

我想部分放大画布板，因为字母托盘按钮将被固定并且板将被缩放，
部分编码如下所述，屏幕完全绘制在画布中，可以在底部看到..请帮助并感谢您的关注。

```
 public class BoardView extends SurfaceView implements SurfaceHolder.Callback
                {
        class DrawingThread extends Thread implements OnTouchListener {

        public DrawingThread(SurfaceHolder holder, Handler handler) {
                    mSurfaceHolder = holder;

        public void setRunning(boolean b) {
                    mRun = b;
                }

                @Override
                public void run() {
                    while (mRun) {
                        Canvas c = null;
                        try {
                            c = mSurfaceHolder.lockCanvas(null);

        synchronized (mSurfaceHolder) {
                                // System.gc();
                                // c.scale(canvasScaleX, canvasScaleY);
                                // c.save();
                                // c.translate(canvasTranslateX, canvasTranslateY);
                                doDraw(c);
                            }

                            updateGame();
                        } finally {
                            if (c != null) {
                                mSurfaceHolder.unlockCanvasAndPost(c);
                            }
                        }
        }

        private void doDraw(Canvas canvas) {
                    if (ge == null)
                        return;

                        Rect bRect = new Rect(0, 0, dims.getTotalWidth(),
                        dims.getScoreHeight() + dims.getBoardheight());
                Drawable drawable = getResources().getDrawable(R.drawable.board);
                drawable.setBounds(bRect);

                drawable.draw(canvas);

                Rect tRect = new Rect(0, dims.getScoreHeight()
                        + dims.getBoardheight(), dims.getTotalWidth(),
                        dims.getTotalHeight());
                canvas.drawRect(tRect, fillTrayPaint);

                int topHeight = dims.getScoreHeight() + dims.getBoardheight();
                int bottom = (dims.getTotalHeight() + 5)
                        - (dims.getTotalWidth() / Tray.TRAY_SIZE);
                Rect rect = new Rect(0, topHeight, dims.getTotalWidth(), bottom - 7);
                Drawable drawableTray = getResources()
                        .getDrawable(R.drawable.strip);
                drawableTray.setBounds(rect);
                drawableTray.draw(canvas);
                        drawTray(canvas);
                drawBoard(canvas);

                // drawScore(canvas);
                drawMovingTile(canvas);
            }

public BoardView(Context context, AttributeSet attrs) {
        super(context, attrs);

        SurfaceHolder holder = getHolder();
        holder.addCallback(this);

        // endTurn=(ImageButton)findViewById(R.id.endturn_button_horizontal);
        thread = new DrawingThread(holder, handler);
    }
@Override
    public void surfaceChanged(SurfaceHolder holder, int format, int width,
            int height) {
    }

    @Override
    public void surfaceCreated(SurfaceHolder holder) {
        final float scale1 = getResources().getDisplayMetrics().density;
        defaultFontSize = (int) (MIN_FONT_DIPS * scale1 + 0.5f);
        thread.setDefaultFontSize(defaultFontSize);
        dimensions = calculateDimensions(getWidth(), getHeight());
        thread.setDimensions(dimensions);

        thread.setRunning(true);

        // if (thread != null && !thread.isAlive())
        thread.start();
    }

    @Override
    public void surfaceDestroyed(SurfaceHolder holder) {
        boolean retry = true;
        thread.setRunning(false);
        while (retry) {
            try {
                thread.join();
                retry = false;
            } catch (InterruptedException e) {

            }
        }
    } 
```

![屏幕完全绘制在画布中，如下所述：-](../Images/442f643c5e92c522f97031f7246f7ebf.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T13:30:32.987

我们可以简单地通过 canvas.clipRect(rectangle) 来完成，此时我们要做的是保存画布 canvas.save() 并在 canvas.clipRect(rectangle) 之后调用 canvas.restore()。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T13:51:50.643

考虑尝试这样的事情：

*   从要放大的画布创建位图。
*   当将该位图渲染到屏幕上时，您可以更改 scr rect（它将“放大”到位图）。

我希望这有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T12:06:07.367

我认为你需要将你的游戏板渲染成屏幕外位图，然后在画布上使用 绘制这个位图`Matrix`，这样你就可以改变它的位置和比例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T14:01:29.587

我相信最简单的方法是使用`Canvas#scale(float scale, int pivotx, int pivoty)`方法。它基本上均匀地增长了整个画布，这实际上是从 2D 角度来看的缩放。

`canvas.scale(2.0f, getWidth()/2, getHeight()/2)`将从中心按 2 缩放图像。 `canvas.scale(1.0f, getWidth()/2, getHeight()/2)`会把它缩回去。

我从来没有在这种情况下尝试过，所以如果你决定尝试它，请报告结果！我想知道以供将来参考。

# c# - 如何使用 c# 2010 更新 access 数据库中的数据

> ID：11720706
> 
> 赞同：-3
> 
> 时间：2012-07-30T11:34:25.230
> 
> 标签：c#, visual-studio-2010

```
 OleDbConnection vcon = new OleDbConnection(@"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=D:\SummerJob\DataBase.accdb");
        string cmdtxt = "UPDATE Students SET S_Name = ?, S_Surname = ?, S_E-Mail = ? WHERE ID = ?";
        OleDbCommand cmd = new OleDbCommand(cmdtxt, vcon);
        cmd.CommandType = CommandType.Text;
        cmd.Parameters.AddWithValue("S_Name", EditName.Text);
        cmd.Parameters.AddWithValue("S_Surname", editSurname.Text);
        cmd.Parameters.AddWithValue("S_E-Mail", editMail.Text);
        vcon.Open();
        cmd.ExecuteNonQuery();
        vcon.Close(); 
```

//我使用此代码，但它在更新语句中显示语法错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T11:36:25.157

最后一个参数在哪里？？？

```
ID=? 
```

不确定，但我敢打赌，如果没有该参数，您的查询对于解析器来说看起来不正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T11:42:05.700

需要通过身份证吗？通过 SqlParameter 像这样 cmd.Parameters.AddWithValue("ID", Id.Text);

还要确保参数的添加顺序与它们出现的顺序相同

# jquery - 使用 jquery 将 html 和 css 导出到文件

> ID：11720707
> 
> 赞同：1
> 
> 时间：2012-07-30T11:34:26.523
> 
> 标签：jquery

想象一下，我有一个 3 列布局。**左、中和右 div**。我只想导出中心 div。到目前为止，这是我的导出方法：

```
function getHtml() {
    var htmlStartTag = function(){
        var attrs = $('html')[0].attributes;  
        var result = '<html';
        $.each(attrs, function() { 
            result += ' ' + this.name + '="' + this.value + '"';
        });                                               
        result += '>';
        return result;
    }    

return htmlStartTag() + $('html').html() + '</html>';
} 
```

我的问题是，如何将 DOM 保存到 html 文件中，比如 template.html？当用户点击导出时，整个 DOM 应该被保存或下载为 html 文件。这可能吗，你能举个例子吗？我的应用程序只使用 jquery 和 html。它不是服务器端应用程序！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T11:41:19.980

您可以使用`data:URI`，如[使用 HTML5/Javascript 生成和保存文件](https://stackoverflow.com/questions/2897619/using-html5-javascript-to-generate-and-save-a-file)中所见（第二个答案，获得 50 多票的答案）

像[http://jsfiddle.net/gBxrB/](http://jsfiddle.net/gBxrB/)这样的东西应该可以解决您的问题。

**HTML**

```
<div class="left">leftleftleft</div>
<div class="center">center</div>
<div class="right">rightrightright</div>
<a href="#" class="export">export</a>​ 
```

**JS**

```
$('a.export').on('click',function(){
   uriContent = "data:application/octet-stream," + encodeURIComponent( $('.center').html() );
   window.open(uriContent, 'myDocument');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T11:36:14.597

你不能用javascript保存文件

# linux - 从内核模块读取 dmesg

> ID：11720713
> 
> 赞同：2
> 
> 时间：2012-07-30T11:34:47.467
> 
> 标签：linux, module, kernel

我试图从内核模块中简单地读取内核环形缓冲区。也称为 /proc/kmsg 和 dmesg 输出。

环顾四周，似乎对此的调用是 sys_syslog(); 从我读过的内容来看，dmesg 使用 syslog()，它使用位于 printk.c 中的 do_syslog()。

我四处寻找，发现 do_syslog() 是在 linux/syslog.h 中定义的，所以我包含了这个文件。

测试模块中对 do_syslog() 的实际调用如下所示：

```
read_bytes = do_syslog(2, temp_buffer, 1024, 0); 
```

其中 temp_buffer 只是一个用于测试目的的 char temp_buffer[1024]。

该程序可以编译，但是当我尝试加载模块时它失败了：

insmod：插入'testing.ko'时出错：模块中的-1未知符号

从 dmesg 我看到：“未知符号 do_syslog (err 0)”

为什么这是一个未知符号？我需要链接一些东西吗？

生成文件如下：

```
obj-m += testing.o

all:
    make -C /lib/modules/$(shell uname -r)/build M=$(PWD) modules 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T12:15:24.093

您需要使用导出的符号重新编译内核。

```
EXPORT_SYMBOL (do_syslog); 
```

# javascript - 100% 高度 div 但如果内容更大相应调整

> ID：11720714
> 
> 赞同：0
> 
> 时间：2012-07-30T11:34:49.093
> 
> 标签：javascript, jquery, fullscreen

我的网站是一个单页网站，有 5 个 DIV 充当面板（类名为 .panel），适合拉伸浏览器窗口的整个高度和宽度。我下面的代码已经做到了这一点并且可以使用，但是，我的内容可能大于 .panel/browser 窗口的高度。目前，此内容被隐藏。即 .panel DIV 实际上是窗口的高度，仅此而已。如果其中的内容大于浏览器窗口的高度，我需要它来扩展。

如何在下面编辑此代码以添加此功能？也许在这个调整后的 DIV 中添加一个类名，以便我可以相应地设置它的样式？

```
// In my plugins.js file
function fitElements(){
var height=$(window).height();
var width=$(window).width();

$('.panel').css('height',height);
$('.panel').css('width',width)
};

// At the bottom of my HTML file (to call the function)
jQuery(document).ready(function($) {
    fitElements();
});

// My current code also adjusts on browser resize - so would need this answer to do the same
 $(window).resize(fitElements); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T11:37:54.420

更改部分

```
$('.panel').css('height',height); 
```

至

```
if (height > $('.panel').height) {
   $('.panel').css('height',height);
} 
```

对于重新调整大小功能添加

```
$('.panel').css('height','auto'); 
```

在函数的开头

# sql - 如何遍历“父”行和“子”行在同一个表中的 SQL 表

> ID：11720717
> 
> 赞同：5
> 
> 时间：2012-07-30T11:34:54.093
> 
> 标签：sql, sql-server, sql-server-2008-r2

在一个表中有 ID、Title 和 ParentID 列。ParentID 用于同一表中被视为其父项的条目的 ID - 因此 ParentID 为 NULL 的任何条目本身就是父项。

我需要一个查询，它将遍历每个父级并列出它下面的任何子级（最好用连字符或其他东西表示它的从属）有人知道如何做到这一点或如何为我指明正确的方向吗？

（我研究了 T-SQL 并阅读了许多类似的在线问题，但是我的 SQL 不够清晰，无法理解它，所以我非常感谢一些指针！）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T12:33:43.143

这个给你！

```
WITH n(ID, Title) AS 
                    (SELECT ID, Title
                    FROM YourTable
                    WHERE ID = (SELECT TOP 1 ID FROM YourTable WHERE ParentID IS NULL)
                    UNION ALL 
                    SELECT nplus1.ID, nplus1.Title
                    FROM YourTable as nplus1, n 
                    WHERE n.ID = nplus1.ParentID) 
                    SELECT ID, Title FROM n 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T11:38:55.903

要从自引用表中获取层次结构数据，可以在 sql 2008 中使用 WITH 语法

```
 WITH n(ID) AS 
   (SELECT ID FROM YourTable 
   UNION ALL 
   SELECT nplus1.ID
   FROM YourTable as nplus1, n 
   WHERE n.ID = nplus1.ParentID) 
   SELECT ID FROM n 
```

# java - 由于@ConstraintvalidateBy，如何避免层之间的交叉依赖？

> ID：11720726
> 
> 赞同：11
> 
> 时间：2012-07-30T11:35:30.410
> 
> 标签：java, maven, bean-validation

在我们的项目中，我们在单独的 Maven 模块中有服务和 DAO 层。服务模块依赖于 DAO 模块并与它的实体一起工作。问题是我们不能放置自定义 jsr 303 约束，它使用 DAO 实体中服务层的一些服务，因为这会创建从 DAO 层到服务层的反向引用，因为验证器类需要在自定义的验证属性中引用@约束。

有没有办法（使用标准 jsr 303 api）在运行时指定一些自定义约束的验证器类（或以任何其他方式解决我们的问题）？内置约束有空的validateBy属性，但我不知道是否有一些API。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-08-21T08:43:34.277

我们在基于 Spring 的项目中遇到了同样的问题。为了以最好的 Spring 方式解决它，我们拆分了 ConstraintValidator 接口和实现。例如在领域层我们只有接口：

```
public interface UniqueValidator extends ConstraintValidator<Unique, String> {
} 
```

在服务层中，我们实现了该接口：

```
public class UniqueValidatorJpaImpl implements UniqueValidator {
    private EntityManager entityManager;
    ...
} 
```

接下来我们在 Spring Context 中为 UniqueValidatorJpaImpl 声明一个 bean。

最后，为了让所有员工都能正常工作，我们扩展了 SpringConstraintValidatorFactory。默认情况下，它只创建在validateBy中指定的类的新实例。我们通过首先在 spring 上下文中查找相应类型的 bean 来扩展它：

```
public class SpringConstraintValidatorFactoryEx implements ConstraintValidatorFactory {

    private final Logger logger = LoggerFactory.getLogger(SpringConstraintValidatorFactoryEx.class);

    @Autowired
    private AutowireCapableBeanFactory beanFactory;

    public <T extends ConstraintValidator<?, ?>> T getInstance(Class<T> key) {
        T bean = null;

        try {
            logger.info("Trying to find a validator bean of class " + key.getSimpleName());
            bean = this.beanFactory.getBean(key);
        } catch (BeansException exc) {
            logger.info("Failed to find a bean of class " + key.getSimpleName());
        }

        if (bean == null) {
            try {
                logger.info("Creating a new validator bean of class " + key.getSimpleName());
                bean = this.beanFactory.createBean(key);
            } catch (BeansException exc) {
                logger.info("Failed to create a validator of class " + key.getSimpleName());
            }
        }

        if (bean == null) {
            logger.warn("Failed to get validator of class " + key.getSimpleName());
        }

        return bean;
    }

} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-30T19:00:17.937

您可以使用基于[XML 的约束映射](https://docs.jboss.org/hibernate/stable/validator/reference/en-US/html_single/#chapter-xml-configuration)来为您的约束分配验证器，以避免从注释引用到验证器实现。

[BV 1.1 EG](http://www.beanvalidation.org)也在[讨论](https://hibernate.onjira.com/browse/BVAL-252)该领域的一些改进。随意权衡[邮件列表](https://lists.jboss.org/mailman/listinfo/beanvalidation-dev)上的问题。

# install4j - 使用自定义代理设置调用 install4j 更新程序

> ID：11720727
> 
> 赞同：0
> 
> 时间：2012-07-30T11:35:31.367
> 
> 标签：install4j

我想对 Install4J 包装的应用程序执行以下操作：

*   从包装的 Java 应用程序的代码中调用 Install4J 更新程序
*   如果有可用更新，则向用户显示在 Install4J IDE 中配置的 GUI 对话框
*   如果需要，将自定义代理参数传递给更新程序

据我所知，Install4J 我应该能够通过以下方式做到这一点：

```
List<String> args = new ArrayList<String>();
args.add("-DproxySet=true");
args.add("-DproxyHost="+MY_PROXY_SERVER);
args.add("-DproxyPort="+MY_PROXY_PORT););
args.add("-DproxyAuth=true");
args.add("-DproxyAuthUser="+MY_PROXY_USERNAME);)
args.add("-DproxyAuthPassword="+MY_PROXY_PASSWORD);

ApplicationLauncher.launchApplicationInProcess(
    MY_UPDATER_ID.toString(), 
    args.toArray(new String[args.size()]),
    null, 
    ApplicationLauncher.WindowMode.FRAME, 
    null); 
```

但我不断收到用于输入代理详细信息的弹出窗口。

我尝试将参数更改为没有前缀“-D”，尝试将 Updater 切换到控制台模式或无人值守模式，不传递参数，而是使用 System.setProperty() 直接将它们放入 JVM ......但没有成功。我总是以代理弹出窗口或消息“无法从***_* __ *_***下载更新信息请检查您的网络设置”结束。

另外：如果我重复调用 Updater 但使用不同的参数，弹出窗口总是显示我用于第一次调用的一次。

有什么帮助吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T15:13:44.763

Thanks to the support from EJ-tehnologies (developers of Install4J) we got the proxy thing working. In the moment of asking the question we were using v5.0.11, and they instructed us to use v5.1.2 (latest stable build in that moment). And finally we ended using the beta release v5.1.3 (not publicly available at the moment).

Details on how to have proxy working, without popup and with using dynamic parameters:

*   to the code above add additional argument that will prevent Install4J to detect system wide proxy settings:

    ```
    args.add("-Dinstall4j.noProxyAutoDetect=true"); 
    ```

*   use method `ApplicationLauncher.launchApplication()` for invoking the Install4J wrapper as it will start it in the new JVM. starting like this is required due to JVM's handling of existing env variables, so if you start Install4J in the same JVM and append arguments in that JVM the Install4J might not pick the latest values (this is if you want to dynamically change proxy params)

*   wait for v5.1.3 to become stable and download it as it will support "not showing" of proxy popup dialog when proxy parameters are explicitly given to Install4J (this is my guess, I'm not speaking in the name of people from EJ-technologies)

# c# - 两个 timer_tick 事件是否不可能在读取相同数据但执行不同任务时并行工作？

> ID：11720737
> 
> 赞同：2
> 
> 时间：2012-07-30T11:36:19.817
> 
> 标签：c#, regex, timer, progress-bar, modem

我开发了一个 C# 应用程序来读取来自 GSM 调制解调器的呼叫。我使用**计时器**定期读取端口并在有来电时通知我。

现在我正在尝试使用另一个将写入**AT+CSQ**的计时器 - 要了解端口上的信号质量，并读取端口以获取质量值。在这两个计时器中，我都使用正则表达式来匹配和分离我需要的数据。现在的问题是，只有我正在读取信号质量的**timer2**才能正常工作，但不能读取来电的计时器。

**定时器读取信号强度：**

```
private void tmr_sig_quality_Tick(object sender, EventArgs e)
    {
        if (port.IsOpen)
        {
            port.WriteLine("AT+CSQ");
            string s= port.ReadExisting();
            var match= Regex.Match(s,@"\+CSQ: (\d+),(\d+)");
            if (match.Success)
            {
                progressBar1.Value = int.Parse(match.Groups[1].Value);
            }

        }
    } 
```

**计时器读取来电：**

```
 private void timer1_Tick(object sender, EventArgs e)
       {
                s = port.ReadExisting();

                var match = Regex.Match(s, "RING[^\\+]*\\+CLIP:\\s*\"(?<phone>[^\"]*)\",(\\d+),\"([^\"]*)\",(\\w*),\"(\\w*)\",(\\w*)");

                if (match.Success && s.Contains("RING"))
                {
                    incall_status.Text = "Incoming Call...." + match.Groups["phone"].Value;
                    incall_status.Visible = true;
                }
        } 
```

为什么会发生这种情况和解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T12:57:50.183

两个主要问题。首先是 ReadExisting()，它总是返回一个空字符串。除非您逐行调试和单步执行代码。这给了调制解调器足够的时间来发送响应。但是当您全速运行时，这将不起作用，您需要进行阻塞调用，以确保您的程序等待足够长的时间以获取所有返回的字符。请改用 ReadLine()。

第二个杀手问题是您正在混合命令。您的 tmr_sig_quality_Tick() 方法可能会读取 timer1_Tick() 应该读取的任何内容。您需要重新考虑这种方法。类似于命令队列，在收到对命令的响应之前不会前进。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T12:55:30.580

不是您问题的实际答案，而是与 GSM 调制解调器通信的一般建议：

请记住，您只有一个串行端口，因此只有一个通信通道。GSM 调制解调器可以发送自发事件，例如 RING、FAX、VOICE 事件，因此无法保证当您编写 AT+CSQ 时，第一个回复是您所期望的，即信号质量。

像您打算的那样拥有两个计时器并不是一个好主意，因为您最终会在计时器 A 中得到一个命令的响应，而在 B 中是预期的，因为 A 读取了其中一个自发事件……等等。

一个更好和更健壮的方法是有一个工作线程来读取和解释传入的数据，然后根据需要将其分发到您的应用程序中。它还可以处理传出数据。使用并发队列和一些信号机制（即 AutoResetEvent）与该线程交换数据，这样您就可以获得与硬件设备的更清晰的接口，并且无需担心应用程序中的时间等问题。

# css - CSS 绝对定位 100% height less padding without JS

> ID：11720739
> 
> 赞同：0
> 
> 时间：2012-07-30T11:36:25.500
> 
> 标签：css, height, absolute

下面的代码有一个 DIV 需要定位在容器的顶部，另一个在底部，然后内容需要从中间通过。

```
<div style="position:absolute; top:0; width:100%; height:40px"></div>

<div class="howto"></div>

<div style="position:absolute; bottom:0; width:100%; height:40px"></div> 
```

所以我们不知道包含 DIV 的高度。如果没有 JS，带类的 div 怎么能让`howto`容器 DIV 的高度减去顶部和底部绝对定位的 div 的高度，从而包含这 2 个 DIV 之间的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T13:18:35.093

对于您希望完成的任务，这是一种可能的解决方案：

@tinkerbin：[http ://tinkerbin.com/QsaCPgR6](http://tinkerbin.com/QsaCPgR6)

HTML：

```
<div class="container">
    <div class="header"></div>

    <div class="howto">
      Has height set to auto. You may change that if you want to.
    </div>

    <div class="footer"></div>
</div> 
```

CSS：

```
.container {
  position: relative;
  padding: 40px 0; /* top and bottom padding = .header and .footer padding*/
}

.header,
.footer {
  position: absolute;
  height: 40px;
  width: 100%;
}

.header {
  top: 0;
}

.footer {
  bottom: 0;
}

.howto {
  height: /*specifiy one if you wish to*/;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T11:41:07.230

据我所知，没有一种纯粹的 CSS 方式可以在没有 JS 的情况下完成您想做的事情。

请参阅之前关于 SA 的帖子：

[使一个 div 填充剩余屏幕空间的高度](https://stackoverflow.com/questions/90178/make-a-div-fill-the-remaining-screen-space)

# automation - Drupal openid 解决方案

> ID：11720744
> 
> 赞同：0
> 
> 时间：2012-07-30T11:36:48.393
> 
> 标签：automation, drupal-7, openid

我正在尝试找到一个类似于 StackOverflow 使用的社交登录解决方案。

目前，我正在尝试使用[OneAll 社交登录](https://app.oneall.com/signin/)，它的效果很好，但我的新用户必须手动创建自己的帐户、等待电子邮件然后将自己登录到网站 - 我希望自动处理该过程。

**谁能建议 Oneall 的替代方案，它允许我的用户选择他们的社交网络登录选项，然后在我的网站上自动注册和登录，*或者*我如何扩展 Oneall 来做到这一点？**

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T06:52:28.527

[Facebook connect](http://drupal.org/project/fbconnect)正是为 FB 做的。

# php - IT 支持 mySQL 数据库结构

> ID：11720745
> 
> 赞同：0
> 
> 时间：2012-07-30T11:36:52.313
> 
> 标签：php, mysql

我正在为有关 IT 的问题创建一个票证系统。我有下表：

```
id                          
userID                                  
priority                                        
details                              
rank                                
conversation                                
order                                   
status                                  
ts 
```

我需要的是能够将 IT 部门和用户之间的来回显示为对话。所以我想我有两列`conversation`和`order`。该列`conversation`将是一个唯一标识符（数字或文本），并且顺序将显示该行在转换中播放的顺序（1、2、3 等）。

我的问题是这样的：

1.  这是最好的方法吗？
2.  我该如何识别每个对话？

我可以生成随机的 PHP 5 字符文本或其他内容，或者给出一个数字，每个用户都有对话编号 1、编号 2 等。但是如果我这样做了，我将如何找出下一个供用户使用的数字MYSQL？

任何想法和建议都会有所帮助，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T11:40:13.420

我可能会将对话存储在具有唯一 ID 的不同表中，并将该 ID 链接到票证表中。

这个另一个表可能包含“来回”序列的自动增量 ID、全局对话密钥（存储在您的票证表中）和对话（行）本身。

我还建议您存储支持技术的用户名以及受支持者，以便清楚谁说了什么。

为了清楚起见，您也可以添加时间戳。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T11:48:21.617

我会去一个单独的表格，比如提到的@Debock。不过，我的结构会有所不同：

```
create table ticket_conversation (
    id                     int not null auto_increment primary key
,   ticket_id              int not null
,   user_id                int not null
,   conversation_text      text
,   conversation_timestamp timestamp default current_timestamp
,   foreign key ticket_id references ticket(id) 
,   foreign key user_id references user(id)
,   key(ticked_id, conversation_timestamp)
) 
```

时间戳可让您跟踪评论的发表时间，并且按其排序将为您提供评论的顺序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T11:44:37.357

SQL 表通常有一列存储称为主键的唯一标识符。主键可以是自动生成的整数。因此，您无需为尝试在 PHP 中创建唯一标识符而大惊小怪。

我建议您在不久的将来对数据库及其工作方式进行一些深入的阅读。尝试[为普通人设计数据库](http://www.amazon.ca/Database-Design-Mere-Mortals-Relational/dp/0201694719)。它将为您提供一个良好的基础，了解什么是可能的，以及如何从数据库设计的角度解决问题。

# html - 阻止边界线进入浮动图像下方？

> ID：11720748
> 
> 赞同：1
> 
> 时间：2012-07-30T11:36:57.467
> 
> 标签：html, css

嗨，有一个图像向左浮动，然后是其右侧的文本段落。我想在第一段下有一条灰线，但它跨越了浮动图像下方的父 div 的整个长度有没有办法让第一段下的边框线？

[http://jsfiddle.net/9GkZf/1/](http://jsfiddle.net/9GkZf/1/)

HTML

```
 <div id = landpgcontent class="margintop20 ofh">
                            <div id="landpgtext" class="txtblack ofh">
                                <img id="landpgpic" src="Images/Shared/BlankImage.gif" alt="No Image" class="floatleft">
                                <p class="phdr bold greyline marginbot10">Sed ut perspiciatis unde omnis iste natus error</p>
                                <p>Totam rem aperiam, eaque quae ab illo quas lorem ipsum dolor sit.Totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo itatis et quasi architecto.</p>
                                <p></br> Nemo enim ipsam voluptatem quia oluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni itatis et quasi architecto quia non numquam eius modi tempora incidunt ut la xercitationem ullam corporis suscipit laboriosam, nis iure reprehenderit qui in ea voluptate velit esse quam nihil molestiae conseq ntur magni itatis et quasi architecto quia non numquam eius modi tempora incidunt ut la xercitationem ullam.</p>
                            </div>
                        </div> 
```

CSS

```
.floatleft {float: left;}
.floatright {float: right;}
.ofh{overflow: hidden;}

/*Content*/
img#landpgpic {width: 226px; height: 172px; margin-right: 20px;}
div#landpgtext {line-height: 1.3em;}
.greyline {border-bottom: 1px solid #b9b8b8;  display:block}​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T11:44:11.177

```
Overflow:hidden 
```

在段落 .greyline

[http://jsfiddle.net/9GkZf/4/](http://jsfiddle.net/9GkZf/4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T11:44:34.650

`display`将样式更改为`.greyline`to`inline-block`而不是`block`：

```
.greyline {border-bottom: 1px solid #b9b8b8;  display:inline-block} 
```

看到这个[jsFiddle](http://jsfiddle.net/ZQ4Cb/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T11:41:50.753

`.greyLine`是的 - 将段落向左浮动。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T11:42:55.013

[http://jsfiddle.net/9GkZf/3/](http://jsfiddle.net/9GkZf/3/)

将 .greyLine`<p>`向左浮动

# c - 循环有什么问题

> ID：11720749
> 
> 赞同：3
> 
> 时间：2012-07-30T11:36:59.150
> 
> 标签：c, performance, optimization, while-loop, infinite-loop

我正在解决添加位于范围之间的数字的最后一位的问题（例如，在“m”和“n”之间，其中 m < n）。我已经编写了这个

```
 #include <stdio.h>

 int main()
 {
 int t=0;
 long int m=0,n=0,num=0,sum=0,lsum=0,i=0;
 scanf("%d",&t);
 while(t--){
    scanf("%ld%ld",&m,&n);
    i=m;
    while(i<=n){
       while(i!=0){
          num=i%10;
          i/=10;
       }
       lsum=lsum+(sum%10);
       i++;
    }
}
printf("\n%ld",lsum);
return 0;
} 
```

这里 t = 测试用例数。m 和 n 是范围。我不知道为什么它在终端中无限运行。我正在使用 gcc(4.3.2) 编译器。如何优化它以提高速度，或者是 while 条件永远不会终止的情况，但为什么呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T11:42:08.100

代码中有一个无限循环：

```
 while(i<=n)
 {       
     while(i!=0)
   {        
      num=i%10;        
      i/=10; 
   }       
   lsum=lsum+(sum%10);       
   i++;    
 } 
```

第一个 while(1<= n) 始终为真：第二个循环使 i = 0 或 i = 1 ！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-30T11:39:31.470

您正在划分`i`: `i/=10`。这意味着`i`总是`1`在循环结束时设置回。您应该使用临时变量进行划分。像这样：

```
 while(i<=n){
       int temp = i;
       while(temp !=0){
          num=temp %10;
          temp /=10;
       }
       lsum=lsum+(sum%10);
       i++;
    } 
```

PS您的代码中还有许多其他错误。但它们与无限循环无关。

# java - 如何在Java中发送只有发件人和收件人以及主题和消息的邮件？

> ID：11720750
> 
> 赞同：2
> 
> 时间：2012-07-30T11:36:59.910
> 
> 标签：java, jakarta-mail

我正在使用以下代码发送邮件：

```
protected void mailSettings() {
    Object lookedUp = null;
    String mailSettingValues[] = null;
    try {
        InitialContext initialContext = new InitialContext();
        lookedUp = initialContext.lookup("java:/comp/env/mailsettings");
        mailSettingValues = lookedUp.toString().split(",");
        smtphost = mailSettingValues[0];
        port = mailSettingValues[1];
        username = mailSettingValues[2];
        password = mailSettingValues[3];
    } catch (NamingException e) {
        e.printStackTrace();
    }

    m_properties = new Properties();
    m_properties.put("mail.smtp.host", smtphost);
    m_properties.put("mail.smtp.auth", "true");
    m_properties.put("mail.smtp.starttls.enable", "true");
    m_properties.put("mail.smtp.port", port);

    m_Session = Session.getDefaultInstance(m_properties,
            new Authenticator() {
                protected PasswordAuthentication getPasswordAuthentication() {
                    return new PasswordAuthentication(username, password);
                }
            });

}

public void sendMail(String mail_from, String mail_to, String mail_subject,
        String m_body) {
    try {
        m_simpleMessage = new MimeMessage(m_Session);
        m_fromAddress = new InternetAddress(mail_from);
        m_toAddress = new InternetAddress(mail_to);

        m_simpleMessage.setFrom(m_fromAddress);
        m_simpleMessage.setRecipient(RecipientType.TO, m_toAddress);
        m_simpleMessage.setSubject(mail_subject);

        m_simpleMessage.setContent(m_body, "text/plain");

        Transport.send(m_simpleMessage);
    } catch (MessagingException ex) {
        ex.printStackTrace();
    }
} 
```

在这段代码中，我们需要来自地址的电子邮件和相同的密码，但我想在`to_email`没有身份验证的情况下将邮件发送到地址（获取用户密码）。

如何才能做到这一点？

我需要做以下事情：

1.  从属性或上下文文件中获取来自地址
2.  从属性或上下文文件中获取目标地址
3.  `to_address`在不验证发件人地址的情况下发送邮件

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T12:25:44.100

```
import java.util.*;
import javax.mail.*;
import javax.mail.internet.*;
import javax.activation.*;

public class SimpleSendEmail {
    public static void main(String[] args) {

        String host = "your smtp host";
        String to = "bbbb@ddddd.com";
        String from = "xxxx@yyy.com";
        String subject = "My First Email";
        String messageText = "I am sending a message using the"
                + " JavaMail API.\n" + "Here type your message.";
        boolean sessionDebug = false;
        Properties props = System.getProperties();
        props.put("mail.host", host);
        props.put("mail.transport.protocol", "smtp");
        Session session = Session.getDefaultInstance(props, null);
        // Set debug on the Session so we can see what is going on
        // Passing false will not echo debug info, and passing true
        // will.
        session.setDebug(sessionDebug);
        try {
            Message msg = new MimeMessage(session);
            msg.setFrom(new InternetAddress(from));
            InternetAddress[] address = { new InternetAddress(to) };
            msg.setRecipients(Message.RecipientType.TO, address);
            msg.setSubject(subject);
            msg.setSentDate(new Date());
            msg.setText(messageText);

            Transport.send(msg);
        } catch (MessagingException mex) {
            mex.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T11:49:06.810

在一般意义上，这是不可能的。

您**需要**一个 SMTP 服务器才能发送电子邮件。因此，您需要知道该服务器的详细信息以建立 SMTP 连接——至少，主机名（和端口，尽管通常可以假定为默认值 25）。

然后 SMTP 服务器本身*可能*需要身份验证。在这种情况下，您需要有足够的信息来保持它的快乐——可能是委托人（/用户名）和信用（/密码）。

如果您找到一个允许匿名中继的 SMTP 服务器，即允许您通过它发送邮件而无需先进行身份验证，那么您当然可以跳过身份验证步骤，并且不需要密码。

但是您仍然需要一个 SMTP 服务器来进行发送 - 所以您不能以某种方式发送带有“仅”一对地址的电子邮件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T17:23:33.443

您可能希望使用 SMTP 身份验证，因为任何允许公共匿名中继的 SMTP 服务器都将被列为垃圾邮件的黑名单。

您可以运行自己的允许中继的本地 SMTP 服务器，或者根据您使用的应用程序服务器，您可以将服务器配置为在 JNDI 中放置身份验证会话并查找它们。您不必对用户名和密码进行编码，但仍必须将它们提供给应用服务器。

# android - 自定义 Android Rating Bar 拉伸图像

> ID：11720754
> 
> 赞同：6
> 
> 时间：2012-07-30T11:37:18.340
> 
> 标签：android, layout, rating, ratingbar

我在使用自定义评分栏样式时遇到了一点问题。我已经阅读了有关此的其他主题，但建议的解决方案/答案并没有解决问题。

Android 似乎在拉伸星形图像的一部分，产生了这种奇怪的效果：![流血的](../Images/3b1a8a001893e39c5873dd0e5a35927c.png)

这种奇怪的效果甚至在 eclipse 的图形布局预览工具中也能看到：![流血2](../Images/fc68794643231f0eb55e5d6426e2ae96.png)

明星“精灵”是：![空星](../Images/296d159d5fc7d8f8ca9534db88bdb148.png)和![满星](../Images/6bdee3183556e5277f71b52a8a9ee1ef.png)

这是自定义样式：

```
<style name="ratingBar" parent="@android:style/Widget.RatingBar">
    <item name="android:progressDrawable">@drawable/rating_bar</item>
    <item name="android:minHeight">@dimen/ratingBarHeight</item>
    <item name="android:maxHeight">@dimen/ratingBarHeight</item>
</style> 
```

这是布局中的 xml 代码：

```
<RatingBar
    android:layout_width="wrap_content"
    android:layout_height="@dimen/ratingBarHeight"
    android:layout_alignParentRight="true"
    android:layout_centerVertical="true"
    android:numStars="5"
    android:stepSize="1.0"
    style="@style/ratingBar" /> 
```

高度定义如下：

```
<dimen name="ratingBarHeight">32dip</dimen> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-17T18:52:17.690

我有同样的问题。原因是我的可绘制对象小于`@dimen/ratingBarHeight`22 像素。改成`@dimen/ratingBarHeight`给`22dip`我修好了，奇怪的效果就消失了。

# objective-c - 如何在网站上播放 .ima4 音频文件

> ID：11720755
> 
> 赞同：0
> 
> 时间：2012-07-30T11:37:30.653
> 
> 标签：objective-c, audio, ima4

我最近创建了一个 iPhone 应用程序，我在其中以 .ima4 格式录制语音。此应用程序将这些录音上传到我的网络服务器，用户可以在其中播放这些录制的文件。但我不知道如何在网站中解码或播放 .ima4 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T11:52:14.067

最好使用[html5](http://developer.apple.com/library/safari/#documentation/AudioVideo/Conceptual/Using_HTML5_Audio_Video/AudioandVideoTagBasics/AudioandVideoTagBasics.html)进行音频播放

考虑[此](http://www.wooji-juice.com/blog/iphone-openal-ima4-adpcm.html)链接以获取 ima4 格式的解决方法

请参阅[soundmanager](http://www.schillmania.com/projects/soundmanager2/doc/getstarted/#intro)链接以在 html 中播放音频

# makefile - 使用 GNU Make 查找 Unix 以自动更新文件

> ID：11720757
> 
> 赞同：5
> 
> 时间：2012-07-30T11:37:35.907
> 
> 标签：makefile, find, haml, unix

我有`.haml`文件并希望将它们自动转换为文件并在更改`.html`时更新后者。`.haml`

通用的 makefile 规则是没有问题的：

```
%.html: %.haml
    hamlpy $< $@ 
```

但现在我需要一个规则或命令来执行以下操作：

*   找到所有`X.haml`文件`templates/`
*   执行`make X.html`命令，其中 X 是相同的文件名（`haml`替换为`html`）。

我找不到如何使用 GNU Make 或 Unix find 来做到这一点。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-30T12:18:11.310

如果你所有的`*.haml`文件都是好名字（即没有空格或其他有趣的字符），你可以通过调用来做到这一点`find(1)`：

```
HAML_FILES = $(shell find templates/ -type f -name '*.haml')
HTML_FILES = $(HAML_FILES:.haml=.html)

all: $(HTML_FILES)

%.html : %.haml
        hamlpy $< $@ 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-30T11:52:03.967

您可以使用 GNU make`wildcard`函数在某个目录中查找文件：

```
INDIR := templates
OUTDIR := ${CURDIR}

haml_files := $(wildcard ${INDIR}/*.haml)
html_files := $(subst ${INDIR}/,${OUTDIR}/,${haml_files:.haml=.html})

all : ${html_files}

clean :
    rm -f ${html_files}

${OUTDIR}/%.html : ${INDIR}/%.haml
    hamlpy $< $@

.PHONY : all clean 
```

`INDIR`并且`OUTDIR`可以在命令行上自定义，例如，使用当前目录作为输入和输入输出：

```
$ make INDIR=. OUTDIR=. 
```

# ruby-on-rails - Thor 中的跨类调用

> ID：11720758
> 
> 赞同：1
> 
> 时间：2012-07-30T11:37:36.213
> 
> 标签：ruby-on-rails, ruby, rubygems, thor

我正在尝试从另一个雷神类调用雷神类。

```
class Foo < Thor
  desc "hello", "some description"
  def hello
    puts "Hello from Foo class"
  end
end

class Bar < Thor
desc "hello", "some description"
  def hello
    puts "Hello from Bar class"
    # ==> HERE I WANT TO CALL HELLO FROM FOO CLASS <==
  end
end 
```

有调用方法，但在同一个类中调用方法。有没有办法做这个跨类？我假设正确的方法是使用 Thor 框架。

**编辑**

我试图让一个班级将任务委托给其他班级。例如，您调用`foo bar list`, 主类 Foo 使用方法列表委托给 Bar 类，或者`foo module find 1`, 并使用方法 find 和参数 1 委托给 Module 类。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T12:33:03.790

我从未使用过雷神，但我认为通过查看这里的规范[https://github.com/wycats/thor/blob/master/spec/invocation_spec.rb](https://github.com/wycats/thor/blob/master/spec/invocation_spec.rb)

这将是

```
Foo.new.invoke(:hello) 
```

# python - python valuetype 哈希混合

> ID：11720768
> 
> 赞同：0
> 
> 时间：2012-07-30T11:38:38.323
> 
> 标签：python, equality, mixins

在 Python 中，我经常发现自己必须为相等性应该基于特定数据的类覆盖相等性和散列。我通常最终将它抽象为这样的超类，但我想知道 Python 是否内置了类似的东西。这似乎是一项常见的任务。

```
class ValueType(object):
    def __init__(self, *args, **kwargs): super(ValueType, self).__init__(*args, **kwargs)
    def __eq__(self, other): return self._key() == other._key()
    def __ne__(self, other): return self._key() != other._key()
    def __hash__(self): return hash(self._key()) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T18:55:08.630

据我所知，答案是否定的（基于使用 Python 的两年），但这很难证明。

但实际上，我不确定我会使用你那里的 ABC。将它用作 mixin 可能更有意义，让您清楚地删除**init**。Python 没有明确支持 mixins，但它支持多重继承，因此实现起来很简单。假设已达成一致，您将需要查找 Python 方法解析顺序 (MRO) 并确保您对类进行了正确排序。（在这种情况下，`ValueType`应该在之前`object`。）

# magento - 使用 Magento 的原始可下载产品 URL 而不是自定义链接

> ID：11720769
> 
> 赞同：1
> 
> 时间：2012-07-30T11:38:40.670
> 
> 标签：magento, download, product

我上传了 4GB 完整的 DVD 文件并将其放在可下载产品 --> URL 中。问题是 Magento 会自动创建自定义下载链接。它不是直接从服务器下载，而是使用 php 来处理下载。为此，我需要 php.ini 中的巨大内存限制（至少 5 GB）我希望用户获得原始完整 URL，这样我就不必每次下载都使用空间。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T11:47:03.090

您可以为适当的任务选择适当的工具。如果您不想直接通过管道下载并验证用户是否有权下载文件，请使用 x-sendfile mod for apache（或您的 Web 服务器）

[https://tn123.org/mod_xsendfile/](https://tn123.org/mod_xsendfile/)

[在 Apache/PHP 中使用 X-Sendfile](https://stackoverflow.com/questions/80186/using-x-sendfile-with-apache-php)

[http://codeutopia.net/blog/2009/03/06/sending-files-better-apache-mod_xsendfile-and-php/](http://codeutopia.net/blog/2009/03/06/sending-files-better-apache-mod_xsendfile-and-php/)

您将需要覆盖可下载的类，该类设置下载的标头以使用正确的标头和路径，然后它将在不消耗大量内存的情况下工作。

# object - cocos2d中的捏手势，怎么做？

> ID：11720770
> 
> 赞同：0
> 
> 时间：2012-07-30T11:38:52.703
> 
> 标签：object, cocos2d-iphone, pinch

我需要在我的 cocos2d 项目中使用两个或更多精灵实现一个简单的捏合手势。你能告诉我，我该如何处理俯仰手势？

我需要这样的东西：

```
-(void)handlePinchGesture:(UIPinchGestureRecognizer *)recognizer 
{
    if (recognizer.state != UIGestureRecognizerStateCancelled) 
    {
         if (recognizer.numberOfTouches == 3) 
         {
             CGPoint firstPoint = [recognizer locationOfTouch:0 inView:recognizer.view];
             CGPoint secondPoint = [recognizer locationOfTouch:1 inView:recognizer.view];
             CGPoint thirdPoint = [recognizer locationOfTouch:2 inView:recognizer.view];
             CGPoint fourthPoint = [recognizer locationOfTouch:3 inView:recognizer.view];

             ball1.position=firstPoint;
             ball2.position=secondPoint;
             ball3.position=thirdPoint;
             ball4.position=fourthPoint;
         }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T10:15:45.923

这是我所做的（我花了很多时间搜索）

**在实现文件中**

```
-(id)init
{
    self = [super init];
    self.isTouchEnabled=YES;

    if (self != nil) 
    {        

    }
    return self;   
}
//pinch recognising
-(void)ccTouchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    NSSet *allUserTouches=[event allTouches];

    if(allUserTouches.count==2)
    {
        UITouch* touch1=[[allUserTouches allObjects] objectAtIndex:0];
        UITouch* touch2=[[allUserTouches allObjects] objectAtIndex:1];

        CGPoint touch1location=[touch1 locationInView:[touch1 view]];
        CGPoint touch2location=[touch2 locationInView:[touch2 view]];

        touch1location=[[CCDirector sharedDirector] convertToGL:touch1location];
        touch2location=[[CCDirector sharedDirector] convertToGL:touch2location];

        ball.position=touch1location;
        newBall.position=touch2location;

        float currentdist=ccpDistance(touch1location, touch2location);
        oldDist=currentdist;
    }
}

-(void)ccTouchesMoved:(UITouch *)touch withEvent:(UIEvent *)event
{
    NSSet *allUserTouches=[event allTouches];

    if(allUserTouches.count==2)
    {
        UITouch* touch1=[[allUserTouches allObjects] objectAtIndex:0];
        UITouch* touch2=[[allUserTouches allObjects] objectAtIndex:1];

        CGPoint touch1location=[touch1 locationInView:[touch1 view]];
        CGPoint touch2location=[touch2 locationInView:[touch2 view]];

        touch1location=[[CCDirector sharedDirector] convertToGL:touch1location];
        touch2location=[[CCDirector sharedDirector] convertToGL:touch2location];

        float currentdist=ccpDistance(touch1location, touch2location);

        if (oldDist>=currentdist) 
        {
            //[spriteToZoom setScale:spriteToZoom.scale-fabs((oldDist-currentdist)/100)];
            [ball setPosition:touch1location];
            [newBall setPosition:touch2location];
            NSLog(@"pinch out");
        }
        else 
        {
            //[spriteToZoom setScale:spriteToZoom.scale+fabs((oldDist-currentdist)/100)];
            [ball setPosition:touch1location];
            [newBall setPosition:touch2location];

            NSLog(@"pinch in");
        }
    }
} 
```

# sql - 根据年龄选择男女座位

> ID：11720774
> 
> 赞同：0
> 
> 时间：2012-07-30T11:39:11.533
> 
> 标签：sql, oracle, oracle-sqldeveloper

我有一个passenger_information 表，其中的列是这样的`booking_id, gender_id, passenger_name and passenger_age`。我需要选择预订的男性和女性成人座位数量以及男性和女性儿童座位的数量。

该`gender_id`表将 24 定义为男性，将 25 定义为女性。为了区分儿童座椅和成人座椅，我们使用`passenger_age`的儿童年龄不应超过 11 岁。

我正在尝试编写一个查询以获取基于`booking_id`但失败的详细信息。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T12:03:58.557

尝试使用 Group by AND UNION。

```
 Select
    booking_id, 
    CASE gender_id WHEN 24 then 'Adult - Male'
    ELSE 'Adult - Female' END as 'Gender',
    count(booking_id)
FROM passenger_information
    WHERE passenger_age>11
    Group by booking_id,gender_id
UNION 
Select
    booking_id,  
    CASE gender_id WHEN 24 then 'Child - Male'
    ELSE 'Child - Female' END as 'Gender',
    count(booking_id)
FROM passenger_information
    WHERE passenger_age<=11
    Group by booking_id,gender_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T11:49:55.720

像这样的东西：

```
select 
      booking_id
      , sum(case when gender_id = 24 and passenger_age > 11 then 1 else 0 end) adult_male
      , sum(case when gender_id = 25 and passenger_age > 11 then 1 else 0 end) adult_female
      , sum(case when gender_id = 24 and passenger_age <= 11 then 1 else 0 end) child_male
      , sum(case when gender_id = 24 and passenger_age <= 11 then 1 else 0 end) child_female
from passenger_information
group by booking_id 
```

# android - sqlite 更新一个元组

> ID：11720775
> 
> 赞同：1
> 
> 时间：2012-07-30T11:39:23.857
> 
> 标签：android, sqlite

我试图更新 sqlite db 中的一行，但它给出了语法错误。我想我错过了一些东西，但我看不到它。也许你可以帮助我。

更新代码：

```
 public void updateEntry(String oldname,String name,String mail, String phone,String adres)
     {
     ContentValues args = new ContentValues();
     args.put(COLUMN_NAME, name);
     args.put(COLUMN_EMAIL, mail);
     args.put(COLUMN_PHONE, phone);
     args.put(COLUMN_ADDRESS, adres);
     sqLiteDatabase.update(MYDATABASE_TABLE, args,COLUMN_NAME + "=" + oldname, null);
     } 
```

调用更新（顺便说一下 t,t2,t3,t4 是 EditTexts）

```
 mySQLiteAdapter.updateEntry(isim, t.getText().toString(), t2.getText().toString(), t3.getText().toString(), t4.getText().toString()); 
```

错误

```
07-30 11:34:56.487: E/AndroidRuntime(1990): android.database.sqlite.SQLiteException: near "smith": syntax error: , while compiling: UPDATE MY_TABLE SET Name=?, Phone=?, Email=?, Address=? WHERE Name=john smith 
```

首先我想，我没有提供任何地址或电话作为字符串，但我打印了它们并且我看到了正确的值。知道我的错在哪里吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T11:48:47.817

这是因为您没有转义`oldname`包含`john smith`.

利用`sqLiteDatabase.update(MYDATABASE_TABLE, args,COLUMN_NAME + "='" + oldname + "'", null);`

或使用

```
String whereClause = COLUMN_NAME + "=?";
String[] whereArgs = new String[] {oldname};
sqLiteDatabase.update(MYDATABASE_TABLE, args, whereClause, whereArgs, null); 
```

# android - 将文本放入图表

> ID：11720778
> 
> 赞同：0
> 
> 时间：2012-07-30T11:39:37.383
> 
> 标签：android, canvas

目前使用的 DrawText 和 drawRect 放在相同的 (x,y) 中，如重叠来实现

现在我想问是否可以直接在图形中插入文字？

或者如何让文本适合矩形？

例如：canvas.drawRect(20, 205, 200, 280, 油漆); 然后我想把文字放在这个矩形中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T13:49:38.983

要将文本“放入”矩形中，您只需在矩形之后绘制文本。如果 rect 的坐标是 (0,0)，那么文本的坐标可能是 (2,2)。如果您的文本太长而无法放入矩形，则必须在绘制对象上设置文本大小。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T13:05:26.890

使用画布插入文本绘制矩形或使用对齐属性的任何图像，您可以将其放入中心

# sql - Oracle SQL 查询检查活动的有效日期范围？

> ID：11720781
> 
> 赞同：0
> 
> 时间：2012-07-30T11:39:45.130
> 
> 标签：sql, oracle

我有一个名为 as 的表，其中包含和`Activity`等列。`activity_id``activity_date`

考虑如下活动表中的数据，

```
activity_id    activity_date    
1              1st June
2              1st July
3              1st August
4              1st September
5              1st October 
```

现在我想更改活动 3 的日期，但我不能将日期更改为小于`1st July`或大于`1st September`这些日期已经有一些其他活动。

活动 3 的唯一有效日期介于`2nd July`至之间`30th August`。

同样，对于活动 1，有效的新日期可以是之前的任何日期`1st July`。

同样，对于活动 5，有效的新日期范围从`2nd September`作为其最后一个活动的未来任何日期。

**如果新日期不在范围内，我需要在前端向用户提供验证消息。** 查询的输入将是活动 ID 和新活动日期。

下面是 DDL 脚本

```
 CREATE TABLE "HEADCOUNT"."ACTIVITY" 
(   "ACTIVITY_ID" NUMBER(*,0) NOT NULL, 
    "ACTIVITY_DATE" DATE
); 

Insert into "HEADCOUNT"."ACTIVITY" (ACTIVITY_ID,ACTIVITY_DATE) values (1,'01-06-2012');
Insert into "HEADCOUNT"."ACTIVITY" (ACTIVITY_ID,ACTIVITY_DATE) values (2,'01-07-2012');
Insert into "HEADCOUNT"."ACTIVITY" (ACTIVITY_ID,ACTIVITY_DATE) values (3,'01-08-2012');
Insert into "HEADCOUNT"."ACTIVITY" (ACTIVITY_ID,ACTIVITY_DATE) values (4,'01-09-2012');
Insert into "HEADCOUNT"."ACTIVITY" (ACTIVITY_ID,ACTIVITY_DATE) values (5,'01-10-2012'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T14:00:20.763

这将找到每一行的日期范围：

```
SELECT activity_id, activity_date
      ,NVL( LAG(activity_date) OVER(ORDER BY activity_id) 
           ,TO_DATE('1900-01-01', 'YYYY-MM-DD')
          ) AS previous_date
      ,NVL( LEAD(activity_date) OVER(ORDER BY activity_id)
           ,TO_DATE('2100-01-01', 'YYYY-MM-DD')
          ) AS next_date
  FROM activity
  ORDER BY activity_id 
```

结果：

```
 ACTIVITY_ID ACTIVITY_DATE PREVIOUS_DATE NEXT_DATE
---------------------------------- ------------- ------------- ---------
                                 1 01-JUN-12     01-JAN-00     01-JUL-12 
                                 2 01-JUL-12     01-JUN-12     01-AUG-12 
                                 3 01-AUG-12     01-JUL-12     01-SEP-12 
                                 4 01-SEP-12     01-AUG-12     01-OCT-12 
                                 5 01-OCT-12     01-SEP-12     01-JAN-00 
```

然后验证将针对给定的 id：

“输入日期” > previous_date AND “输入日期” < next_date

当按activity_id 排序时，日期范围基于之前和之后的记录。不过，也许真正应该按活动日期排序。使用 LAG 和 LEAD 也将允许 activity_ids 中的间隙。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T13:44:49.017

使用如下查询查找日期限制（替换`@param_id`为更改活动 ID）：

```
SELECT activity_id, activity_date
FROM   activity
WHERE  activity_id = @param_id-1
   OR  activity_id = @param_id+1 
```

此查询最多会返回两个结果，但对于第一个和最后一个活动，只会返回一个。因此，您应该在前端阅读结果并决定要做什么：

1.  **指定开始限制：**带有 id 的结果`@param_id-1`指定开始日期限制。如果没有具有此 ID 的结果，则这是第一个活动，开始日期没有限制。

2.  **指定结束日期：**带有 id 的结果`@param_id+1`指定结束日期限制。如果没有具有此 ID 的结果，则这是最后一个活动，结束日期没有限制。

3.  **Do or warn**：如果新日期在范围内，则执行更改。否则警告用户。

# android - Android：何时停止 gps 侦听器强制关闭？

> ID：11720785
> 
> 赞同：1
> 
> 时间：2012-07-30T11:39:54.090
> 
> 标签：android, gps

当我试图停止我的 gsp 侦听器时，我被强制关闭
这是代码：

```
mlocManager.removeUpdates(mlocListener);
mlocManager = null; 
```

还有这个：

```
LocationManager mlocManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);  
LocationListener mlocListener = new MyLocationListener();
mlocManager.requestLocationUpdates(LocationManager.GPS_PROVIDER,
(long) update, 0, mlocListener); 
```

请帮助我，我不明白为什么它会强制关闭。

```
07-30 11:43:39.557: D/AndroidRuntime(1071): Shutting down VM
07-30 11:43:39.557: W/dalvikvm(1071): threadid=1: thread exiting with uncaught exception (group=0x40015560)
07-30 11:43:39.575: E/AndroidRuntime(1071): FATAL EXCEPTION: main
07-30 11:43:39.575: E/AndroidRuntime(1071): java.lang.NullPointerException
07-30 11:43:39.575: E/AndroidRuntime(1071):     at com.example.anotheractivity.Festivale$1.onClick(Festivale.java:109)
07-30 11:43:39.575: E/AndroidRuntime(1071):     at android.view.View.performClick(View.java:2485)
07-30 11:43:39.575: E/AndroidRuntime(1071):     at android.view.View$PerformClick.run(View.java:9080)
07-30 11:43:39.575: E/AndroidRuntime(1071):     at android.os.Handler.handleCallback(Handler.java:587)
07-30 11:43:39.575: E/AndroidRuntime(1071):     at android.os.Handler.dispatchMessage(Handler.java:92)
07-30 11:43:39.575: E/AndroidRuntime(1071):     at android.os.Looper.loop(Looper.java:123)
07-30 11:43:39.575: E/AndroidRuntime(1071):     at android.app.ActivityThread.main(ActivityThread.java:3683)
07-30 11:43:39.575: E/AndroidRuntime(1071):     at java.lang.reflect.Method.invokeNative(Native Method)
07-30 11:43:39.575: E/AndroidRuntime(1071):     at java.lang.reflect.Method.invoke(Method.java:507)
07-30 11:43:39.575: E/AndroidRuntime(1071):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
07-30 11:43:39.575: E/AndroidRuntime(1071):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
07-30 11:43:39.575: E/AndroidRuntime(1071):     at dalvik.system.NativeStart.main(Native Method)
07-30 11:43:41.565: I/Process(1071): Sending signal. PID: 1071 SIG: 9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T12:11:51.113

我为此做了一项服务。使用它很容易获得经度/纬度。

1.  将此类复制/粘贴到您的项目中。

包 com.sample；导入 com.sample.globalconstant；

```
import android.app.Service;
import android.content.Context;
import android.content.Intent;
import android.location.Location;
import android.location.LocationManager;
import android.os.Bundle;
import android.os.IBinder;
import android.util.Log;
import android.widget.Toast;

public class MyServiceGPS extends Service
{
    private static final String TAG = "BOOMBOOMTESTGPS";
    private LocationManager mLocationManager = null;
    private static final int LOCATION_INTERVAL = 1000;
    private static final float LOCATION_DISTANCE = 10f;

    private class LocationListener implements android.location.LocationListener{
        Location mLastLocation;
        public LocationListener(String provider)
        {
            Log.e(TAG, "LocationListener " + provider);
            mLastLocation = new Location(provider);
        }
        public void onLocationChanged(Location location)
        {
            Log.e(TAG, "onLocationChanged: " + location.getLatitude() +"....."+ location.getLongitude());
            globalconstant.lat  = location.getLatitude();
            globalconstant.lon  = location.getLongitude();
            Toast.makeText(getApplicationContext(), location.getLatitude() +"....."+ location.getLongitude(), 1000).show();
            mLastLocation.set(location);
        }
        public void onProviderDisabled(String provider)
        {
            Log.e(TAG, "onProviderDisabled: " + provider);           
        }
        public void onProviderEnabled(String provider)
        {
            Log.e(TAG, "onProviderEnabled: " + provider);
        }
        public void onStatusChanged(String provider, int status, Bundle extras)
        {
            Log.e(TAG, "onStatusChanged: " + provider);
        }
    }
    LocationListener[] mLocationListeners = new LocationListener[] {
            new LocationListener(LocationManager.GPS_PROVIDER),
            new LocationListener(LocationManager.NETWORK_PROVIDER)
    };
    @Override
    public IBinder onBind(Intent arg0)
    {
        return null;
    }
    @Override
    public int onStartCommand(Intent intent, int flags, int startId)
    {
        Log.e(TAG, "onStartCommand");
        super.onStartCommand(intent, flags, startId);      
        return START_STICKY;
    }
    @Override
    public void onCreate()
    {
        Log.e(TAG, "onCreate");
        initializeLocationManager();
        try {
            mLocationManager.requestLocationUpdates(
                    LocationManager.NETWORK_PROVIDER, LOCATION_INTERVAL, LOCATION_DISTANCE,
                    mLocationListeners[1]);

        } catch (java.lang.SecurityException ex) {
            Log.i(TAG, "fail to request location update, ignore", ex);
        } catch (IllegalArgumentException ex) {
            Log.d(TAG, "network provider does not exist, " + ex.getMessage());
        }
        try {
            mLocationManager.requestLocationUpdates(
                    LocationManager.GPS_PROVIDER, LOCATION_INTERVAL, LOCATION_DISTANCE,
                    mLocationListeners[0]);
        } catch (java.lang.SecurityException ex) {
            Log.i(TAG, "fail to request location update, ignore", ex);
        } catch (IllegalArgumentException ex) {
            Log.d(TAG, "gps provider does not exist " + ex.getMessage());
        }
    }
    @Override
    public void onDestroy()
    {
        Log.e(TAG, "onDestroy");
        super.onDestroy();
        if (mLocationManager != null) {
            for (int i = 0; i < mLocationListeners.length; i++) {
                try {
                    mLocationManager.removeUpdates(mLocationListeners[i]);
                } catch (Exception ex) {
                    Log.i(TAG, "fail to remove location listners, ignore", ex);
                }
            }
        }
    }
    private void initializeLocationManager() {
        Log.e(TAG, "initializeLocationManager");
        if (mLocationManager == null) {
            mLocationManager = (LocationManager) getApplicationContext().getSystemService(Context.LOCATION_SERVICE);
        }
    }
} 
```

1.  当你想开始时，将这段代码复制到你的活动中：

    startService(new Intent(this,MyServiceGPS.class));

2.  创建一类全局常量：

    **public class globalconstant { public static double lat, lon; }**

    当你想在你的项目中当前的纬度和经度时，只写这个 `globalconstant.lat ,globalconstant.lon`

3.  在 Manifest 中添加使用权限

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T12:03:02.940

**您需要将实现 LocationListener 的相同对象传递给您请求位置更新的 locationManager.removeUpdates() 方法。**

```
locationManager.removeUpdates(gpsl); 
```

# c# - 如何正确解析由空格分隔的文本文件

> ID：11720787
> 
> 赞同：5
> 
> 时间：2012-07-30T11:40:02.080
> 
> 标签：c#, odbc, text-files, text-driver

下面是我的示例文本文件

![在此处输入图像描述](../Images/fa61d1c029543cf31e51a04053387169.png) {

这是我的架构文件

```
[Sample File.txt]
ColNameHeader=True
Format=TabDelimited
CharacterSet=ANSI 
```

这是我迄今为止编写的代码，用于尝试读取上面的示例文件，从上面的文本文件中读取的数据行应该返回以在 dataGridView 控件中显示。问题是，它作为单列返回，但我想使用这些空格作为列分隔符。我尝试了不同的字符分隔符但没有成功。

```
public DataSet LoadCSV(int numberOfRows)
    {
        DataSet ds = new DataSet();
            // Creates and opens an ODBC connection
            string strConnString = "Driver={Microsoft Text Driver (*.txt; *.csv)};Dbq=" + this.dirCSV.Trim() + ";Extensions=asc,csv,tab,txt;Persist Security Info=False";

            string sql_select;
            OdbcConnection conn;
            conn = new OdbcConnection(strConnString.Trim());
            conn.Open();

            //Creates the select command text
            if (numberOfRows == -1)
            {
                sql_select = "select * from [" + this.FileNevCSV.Trim() + "]";
            }
            else
            {
                sql_select = "select top " + numberOfRows + " * from [" + this.FileNevCSV.Trim() + "]";
            }

            //Creates the data adapter
            OdbcDataAdapter obj_oledb_da = new OdbcDataAdapter(sql_select, conn);

            //Fills dataset with the records from CSV file
            obj_oledb_da.Fill(ds, "csv");

            //closes the connection
            conn.Close();

        return ds;
    } 
```

并将 dataGridView 的数据源设置为

```
 // loads the first 500 rows from CSV file
this.dataGridView_preView.DataSource = LoadCSV(500);
this.dataGridView_preView.DataMember = "csv"; 
```

我，在 datagridview 中得到这个，我得到一列，但我希望看到返回的数据为 7 列。

另外，我不知道 F2 和 F3 列来自哪里

![在此处输入图像描述](../Images/9efce8c8cf087ed2c8ba217890003200.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T14:38:13.777

我可能会以不同的方式做到这一点。我会使用 StreamReader，逐行读取文件，将字符串分解为对象属性，并将对象存储在列表中。然后将列表绑定到 datagridviews 数据源。我演示了两种快速的方法来做到这一点。

# 1 - 制表符分隔的数据

如果文件是制表符分隔的，就像看起来那样，将该行拆分为一个数组并将每个索引分配给一个属性，如下所示。

```
public partial class Form1 : Form
{
    private void Form1_Load(object sender, EventArgs e)
    {
        var rows = new List<Row>();
        var sr = new StreamReader(@"C:\so_test.txt");
        while (!sr.EndOfStream)
        {
            string s = sr.ReadLine();
            if (!String.IsNullOrEmpty(s.Trim()))
            {
                rows.Add(new Row(s));
            }
        }
        sr.Close();
        dataGridView1.DataSource = rows;
    }
}

public class Row
{
    public double Number1 { get; set; }
    public double Number2 { get; set; }
    public double Number3 { get; set; }
    public double Number4 { get; set; }
    public double Number5 { get; set; }
    public double Number6 { get; set; }
    public double Number7 { get; set; }
    public string Date1 { get; set; }

    public Row(string str)
    {
        string[] separator = { "\t" };
        var arr = str.Split(separator, StringSplitOptions.None);
        Number1 = Convert.ToDouble(arr[0]);
        Number2 = Convert.ToDouble(arr[1]);
        Number3 = Convert.ToDouble(arr[2]);
        Number4 = Convert.ToDouble(arr[3]);
        Number5 = Convert.ToDouble(arr[4]);
        Number6 = Convert.ToDouble(arr[5]);
        Number7 = Convert.ToDouble(arr[6]);
        Date1 = arr[7];
    }
} 
```

# 2 - 硬起点和长度

如果数据是制表符分隔的，但符合每列的严格起点和终点，您可以将每列的起点和长度声明为常量并通过子字符串获取它们。这只需要更改 Row 类中的代码，就像这样。我已经离开了简洁的常量，只是对它们进行了硬编码。

```
 public Row(string str)
    {
        Number1 = Convert.ToDouble(str.Substring(4, 6));
        Number2 = Convert.ToDouble(str.Substring(16, 6));
        Number3 = Convert.ToDouble(str.Substring(28, 7));
        Number4 = Convert.ToDouble(str.Substring(40, 7));
        Number5 = Convert.ToDouble(str.Substring(52, 6));
        Number6 = Convert.ToDouble(str.Substring(64, 6));
        Number7 = Convert.ToDouble(str.Substring(76, 6));
        Date1 = str.Substring(88, 24);
    } 
```

![截屏](../Images/d796f6d8b8ec9d5ead3461ef3d6e5bc9.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T12:35:01.757

这个修改后的 schema.ini 文件似乎确实解决了这个问题。

```
[Sample File.txt]
Format=FixedLength
Format=TabDelimited
MaxScanRows=25
CharacterSet=ANSI
Col1=Col1 Memo Width 10
Col2=Col2 Memo Width 15
Col3=Col3 Memo Width 11
Col4=Col4 Memo Width 12
Col5=Col5 Memo Width 10
Col6=Col6 Memo Width 11
Col7=Col7 Memo Width 150 
```

# ios - 警报视图内的警报视图

> ID：11720795
> 
> 赞同：0
> 
> 时间：2012-07-30T11:40:21.787
> 
> 标签：ios, objective-c, uialertview

第一个警报中的按钮执行第二个警报，这基本上是确认呼叫某人。我没有收到任何错误，但它不起作用。
当我按下第二个警报时，呼叫按钮崩溃了

```
-(void) alertView: (UIAlertView *) alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{

     NSString *buttonString = [alertView buttonTitleAtIndex:buttonIndex];
     if ([buttonString isEqualToString:@"Phone"]) 
     {    
          UIAlertView *alert2 = [[UIAlertView alloc] initWithTitle:@"Notice!" message:@"You are about to call .... Do you wish to continue?" delegate:nil cancelButtonTitle:@"Cancel" otherButtonTitles:@"Call", nil];    
          [alert2 show];

          if ([buttonString isEqualToString:@"Call"]){

              [[UIApplication sharedApplication] openURL:[NSURL URLWithString:[NSString stringWithFormat:@"tel://12345678"]]];

          }

          if([buttonString isEqualToString:@"Website"]){

              [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"website"]];
          }

          if ([buttonString isEqualToString:@"Facebook"]){

             [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"http://www.facebook.com/groups/..../"]];

          }
     }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T12:13:04.363

您在第二个警报视图中指定委托为 nil。这就是`alertView:clickedButtonAtIndex:`第二次不调用委托方法的原因。因此，您应该将委托分配为`self`.

```
 -(void) alertView: (UIAlertView *) alertView clickedButtonAtIndex:(NSInteger)buttonIndex {

                  NSString *buttonString = [alertView buttonTitleAtIndex:buttonIndex];

                  if([buttonString isEqualToString:@"Phone"]) {

                  UIAlertView *alert2 = [[UIAlertView alloc] initWithTitle:@"Notice!" message:@"You are about to call .... Do you wish to continue?" delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"Call", nil];
                  [alert2 show];
                  }

                  if([buttonString isEqualToString:@"Call"]){

                     [[UIApplication sharedApplication] openURL:[NSURL URLWithString:[NSString stringWithFormat:@"tel://12345678"]]];
                  } 

                  if([buttonString isEqualToString:@"Website"]){

                    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"website"]];
                  }

                  if([buttonString isEqualToString:@"Facebook"]){

                     [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"http://www.facebook.com/groups/..../"]];
                  }

 } 
```

我想这会对你有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-09T05:59:17.607

使用`alertView:didDismissWithButtonIndex:`委托方法而不是`alertView:clickedButtonAtIndex:`委托方法。警报消失后调用前者。当您想根据第一个警报视图的点击按钮显示第二个时，这更有意义。

还要给 UIAlertview 对象添加标签。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T11:47:09.357

延迟启动第二个警报。问题是 - 警报需要一些时间来隐藏自己，然后才能出现任何新警报，因此直接调用第二个警报将不起作用。

试试这个，例如：

```
- (void) alertView: (UIAlertView *) alertView clickedButtonAtIndex:(NSInteger)buttonIndex {

    NSString *buttonString = [alertView buttonTitleAtIndex:buttonIndex];
    if ([buttonString isEqualToString:@"Phone"]) 
    {
        [self performSelector:@selector(callSecondAlertView) withObject:nil afterDelay:1];
    }
}

- (void)callSecondAlertView
{
    //show new alert view
    UIAlertView *alert2 = [[UIAlertView alloc] initWithTitle:@"Notice!" message:@"You are about to call .... Do you wish to continue?" delegate:nil cancelButtonTitle:@"Cancel" otherButtonTitles:@"Call", nil];

    [alert2 show];

    [alert2 release];
} 
```

如果不工作，或延迟太久 - 玩`afterDelay:`价值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T05:40:30.090

知道了！出于某种原因，我第一个 alertView 按钮的 [[[alertView subviews] objectAtIndex:6] setBackgroundColor... 干扰了第二个 alertView 功能。在我将 xcode 更新到 4.4.1 之前，xcode 并没有直接引导我解决问题

# .net - 使用自动完成选项调用按键事件

> ID：11720796
> 
> 赞同：2
> 
> 时间：2012-07-30T11:40:28.213
> 
> 标签：.net, vb.net, winforms

我使用`KeyPress`Event 来改变`TextBox`. 在我使用选项之前它工作得很好`AutoComplete`，之后它就不起作用了。

代码`KeyPress`：

```
If Asc(e.KeyChar) = 13 Then
            txtQuantity.Focus()
            txtQuantity.SelectAll()
            lastTxtBox = "name"
End If 
```

代码`TextBox`：

```
txtProductCode.AutoCompleteMode = AutoCompleteMode.Suggest
txtProductCode.AutoCompleteSource = AutoCompleteSource.CustomSource 
```

我想同时使用这两个建议选项。我也尝试将按键更改为 keyDown ，但它仍然不起作用。有谁知道为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T13:05:53.873

改用`KeyDown`事件：

```
Private Sub TB_KeyDown(sender As Object, e As KeyEventArgs) Handles txtProductCode.KeyDown
    If e.KeyCode = Keys.Enter Then
        txtQuantity.Focus()
        txtQuantity.SelectAll()
    End If
End Sub 
```

它对我来说很完美（经过测试）。

# android - 在android中使用KSOAP解析XML

> ID：11720801
> 
> 赞同：0
> 
> 时间：2012-07-30T11:40:51.847
> 
> 标签：android, amazon-web-services, webservice-client, exchangewebservices

我与我的 web 服务 (SOAP) 建立连接，这是我从 web 服务收到的 xml 结果，我该如何解析这个结果，

```
<string>{"30_year_rate":4.250,"30_year_pi":196.78,"30_year_apr":4.375,"QuoteID":1434,"Licensed":"N"}</string> 
```

谁能告诉我怎么做？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T12:00:18.090

**使用下面的代码片段**

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    String readTwitterFeed = readTwitterFeed();
    try {
        JSONArray jsonArray = new JSONArray(readTwitterFeed);
        Log.i(ParseJSON.class.getName(),
                "Number of entries " + jsonArray.length());
        for (int i = 0; i < jsonArray.length(); i++) {
            JSONObject jsonObject = jsonArray.getJSONObject(i);
            Log.i(ParseJSON.class.getName(), jsonObject.getString("text"));
        }
    } catch (Exception e) {
        e.printStackTrace();
    }
}

public String readTwitterFeed() {
    StringBuilder builder = new StringBuilder();
    HttpClient client = new DefaultHttpClient();
    HttpGet httpGet = new HttpGet("http://twitter.com/statuses/user_timeline/vogella.json");
    try {
        HttpResponse response = client.execute(httpGet);
        StatusLine statusLine = response.getStatusLine();
        int statusCode = statusLine.getStatusCode();
        if (statusCode == 200) {
            HttpEntity entity = response.getEntity();
            InputStream content = entity.getContent();
            BufferedReader reader = new BufferedReader(new InputStreamReader(content));
            String line;
            while ((line = reader.readLine()) != null) {
                builder.append(line);
            }
        } else {
            Log.e(ParseJSON.class.toString(), "Failed to download file");
        }
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    return builder.toString();
} 
```

**将以下权限添加到您的清单文件**

```
android.permission.INTERNET 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T11:54:21.457

这尝起来像 JSON，对吧？如何使用 a`JSONObject`来解析它：

```
JSONObject jsonResponse = new JSONObject("..."); 
```

# android - LocationManager 在代码中生成错误

> ID：11720813
> 
> 赞同：-1
> 
> 时间：2012-07-30T11:41:55.607
> 
> 标签：android

这是我在 android 中的代码并且显示错误。我不知道出了什么问题，但我很确定它必须做一些事情，`LocationManager`因为直到那条线它工作正常。

```
 public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);
            Log.d("Exception", "Something gone wrong !! ");

/*after this line it shows error */

        LocationManager lm = (LocationManager)getSystemService(Context.LOCATION_SERVICE); 
        Location location = lm.getLastKnownLocation(LocationManager.GPS_PROVIDER);
        double longitude = location.getLongitude();
        double latitude = location.getLatitude(); 
```

我现在想要的只是显示经度和纬度的值，以便我可以确定代码到这里为止是好的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T12:06:31.817

**使用下面的代码片段**

```
public void onCreate(Bundle savedInstanceState)
{
  super.onCreate(savedInstanceState);
  setContentView(R.layout.main);

  /* Use the LocationManager class to obtain GPS locations */
  LocationManager mlocManager = (LocationManager)getSystemService(Context.LOCATION_SERVICE);

  LocationListener mlocListener = new MyLocationListener();
  mlocManager.requestLocationUpdates( LocationManager.GPS_PROVIDER, 0, 0, mlocListener);
}

/* Class My Location Listener */
public class MyLocationListener implements LocationListener
{

  @Override
  public void onLocationChanged(Location loc)
  {

    loc.getLatitude();
    loc.getLongitude();

    String Text = "My current location is: " +
    "Latitud = " + loc.getLatitude() +
    "Longitud = " + loc.getLongitude();

    Toast.makeText( getApplicationContext(), Text, Toast.LENGTH_SHORT).show();
  }

  @Override
  public void onProviderDisabled(String provider)
  {
    Toast.makeText( getApplicationContext(), "Gps Disabled", Toast.LENGTH_SHORT ).show();
  }

  @Override
  public void onProviderEnabled(String provider)
  {
    Toast.makeText( getApplicationContext(), "Gps Enabled", Toast.LENGTH_SHORT).show();
  }

  @Override
  public void onStatusChanged(String provider, int status, Bundle extras)
  {

  }
} 
```

**检查清单文件中的以下行**

```
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T12:59:48.047

**声明这个变量**

```
 Location loc; 
```

**在 Oncreate() 方法中编写此代码**

```
LocationManager mlocManager =(LocationManager)getSystemService(Context.LOCATION_SERVICE);

LocationListener mlocListener = new MyLocationListener();

mlocManager.requestLocationUpdates( LocationManager.GPS_PROVIDER, 0, 0, mlocListener); 
```

**然后写**

```
loc.getLatitude();
loc.getLongitude(); 
```

**现在您可以使用纬度和经度的值... :-)**

# php - 货币字段上的 parseInt 返回 NaN

> ID：11720814
> 
> 赞同：0
> 
> 时间：2012-07-30T11:42:01.630
> 
> 标签：php, javascript

我在 php/mysql 中有一个动态表，我通过复选框显示/隐藏列。下面的代码片段是隐藏和重新计算总列的单元格值的 javascript 的一部分。

```
function toggleVis(button) { 
// Toggle column 
cells = $$('.t'+button.name); 
cells.invoke(button.checked ? 'show' : 'hide'); 

// Recaulculate total 
$$('tr.row').each(function(row) { 
// Initialise to zero 
var total = 0; 
row.down('.total').textContent = total; 

// Sum all visible cells 
row.select('td').each(function(cell) { 
total += cell.visible() ? parseInt(cell.textContent, 10) : 0;
}); 

// Write the total in the total cell 
row.down('.total').textContent = total; 
}); 
} 
```

当表格内容只是数字时，这很有效，但我现在需要创建另一个包含货币值的表格。这可能导致总列返回`NaN`可能是由于 £ 符号。我使用以下代码在 php 中对其进行格式化：

```
 <tbody>
  <?php do { ?>
    <tr>
      <td><?php echo $row_rsMISource['Source']; ?></td>
      <td><?php echo "£".number_format($row_rsMISource['May'], 2, '.', ','); ?></td>
      <td><?php echo "£".number_format($row_rsMISource['Jun'], 2, '.', ','); ?></td>
      <td><?php echo "£".number_format($row_rsMISource['Jul'], 2, '.', ','); ?></td>
      <td><?php echo "£".number_format($row_rsMISource['Aug'], 2, '.', ','); ?></td>
      <td><?php echo "£".number_format($row_rsMISource['Total'], 2, '.', ','); ?></td>
      </tr>
    <?php } while ($row_rsMISource = mysql_fetch_assoc($rsMISource)); ?>
    </tbody> 
```

这会输出诸如 £10,169.62、£7,053.00 或 £.0.00 之类的值

在仍然使用上面发布的 js 的同时，是否可以用货币格式化单元格？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T11:44:37.757

```
4 + '£4'; //NaN
4 + parseFloat('£4.3'.replace(/[^\d\.]/g, '')); //8.3 
```

这会从字符串中删除非数字字符，并将字符串强制转换为数字（所以你得到`8.3`，而不是`"44.3"`）。

如果您居住的国家/地区使用逗号而不是句点作为小数分隔符，请替换`\.`为`,`

[编辑-对于您的具体示例：]

```
row.find('td').each(function() { 
    total += $(this).is(':visible') ? parseFloat($(this).text().replace(/[^\d\.]/g, '')) : 0;
}); 
```

那里有很多代码更改。

# java - 上传完成后重定向

> ID：11720815
> 
> 赞同：1
> 
> 时间：2012-07-30T11:42:02.517
> 
> 标签：java, google-app-engine, jakarta-ee, file-upload, blobstore

以下代码段将文件上传到 Blobstore ：

```
 <%!
       BlobstoreService blobstoreService = BlobstoreServiceFactory.getBlobstoreService();
    %>

    <form  action="<%= blobstoreService.createUploadUrl("/upload") %>" method="post" enctype="multipart/form-data">
        <input type="file" name="myFile"/>
        <input type="submit" value="submit"/>
    </form> 
```

上传文件后，我得到这种类型的 URL：

```
http://xyz.appspot.com/_ah/upload/AMmfu6bzg8RIpHAQlpT-pLNnuEanbll7R6o5l8DRn-6ZRgCBw-ws-ddXiCnBV6r12zNGPmPJeSkeCoa7Jap-iKHBn-G13y_JVa4N7fj1pewu9GdjDgDSGQg/ALBNUaYAAAAAUBZtgd0ddRLqquuPP8d7GHWOS3BGudTi/ 
```

但是我需要在上传完成后重定向到*上传页面*。*由于我无权访问操作表单*，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T12:11:36.637

这正是这样`createUploadUrl`做的。您传递要重定向到的 URL，上传完成后，它会重定向。

# php - Imagemagick Crop 命令没有给出完美的结果

> ID：11720817
> 
> 赞同：8
> 
> 时间：2012-07-30T11:42:06.870
> 
> 标签：php, imagemagick

我正在使用 Imagemagick 调整图像大小和裁剪图像。

测试图像：

![在此处输入图像描述](../Images/d659b08e9abc4676434b33e0f8c248ca.png)

我需要将其重新调整为 300 x 320 帧的大小，首先我正在调整图像大小然后裁剪它，我正在使用以下命令：

```
exec("convert /uploadImagePath -thumbnail  300  /newImagePath");

exec("convert /newImagePath -gravity Center -crop 290x310+0+0 /newImagePath"); 
```

但它给了我以下图像

![在此处输入图像描述](../Images/1e3a86aff38f317d2ce8e2937c7a4823.png)

如您所见，图像不完整。我错在哪里？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-07-30T12:14:23.217

**（答案已更新，现在为下面提供一个图解示例`-liquid-rescale`）**

* * *

您的原始图像尺寸为：

```
489 x 640 pixels 
```

您想要的尺寸似乎是：

```
290 x 310 pixels 
```

如果没有以下任何一项，这将无法扩展到这些维度：

1.  裁剪（不要保留初始图像的所有区域）
2.  保持所需的宽度（放弃所需的高度）
3.  保持所需的高度（放弃所需的宽度）
4.  失真（缩放时不要保持纵横比）
5.  填充（向一个或多个边缘添加更多像素）
6.  删除不明显的像素（“液体重新缩放”或“接缝雕刻” -[**参见维基百科**](http://en.wikipedia.org/wiki/Seam_carving)）

您的结果显示为“1”。（裁剪），你不喜欢。所以你有选项'2'。（保持宽度），'3。（保持高度），“4”。（失真），“5”。（填充）和“6”。（缝雕）留待测试。

## '2.'：保持所需的高度

```
convert WPTgp.jpg -resize x310 keep-height.jpg 
```

结果图像的尺寸为`237 x 310 pixels`. （自动确定宽度）
**`Keep Height....`** ![保持高度](../Images/dfa49835edad18510a9a04a2f6647732.png)

## '3.'：保持所需的宽度

```
convert WPTgp.jpg -resize 290x keep-width.jpg 
```

结果图像的尺寸为`290 x 380 pixels`. （自动确定高度）
**`Keep Width.....`** ![保持宽度](../Images/59d90bd07ff5c14747472fbd67c03b29.png)

## “4.”：失真

```
convert WPTgp.jpg -resize 290x310\! distorted.jpg 
```

结果图像的尺寸为`290 x 310 pixels`. （忽略纵横比——如果需要适合尺寸，则扭曲图像）
**`Distorted......`** ![扭曲的](../Images/3cf843f23b322e1381ed7432c5e84355.png)

## “5.”：填充

```
convert WPTgp.jpg \
   -resize 290x310 \
   -gravity center \
   -background orange \
   -extent 290x310 \
    padded.jpg 
```

结果图像的尺寸为`290 x 310 pixels`. （添加橙色背景只是为了证明图像的“扩展”确实有效。） （保持纵横比 - 将图像扩展为所需尺寸）
**`Padded.........`** ![软垫](../Images/1558aacc1a3f1898606e1f3e748818c3.png)

## '6.'：接缝雕刻

 ~~~~```
convert WPTgp.jpg -liquid-rescale 290x310\! liquid.jpg 
```~~ 

~~以上将是您从快速阅读 ImageMagick 命令选项参考中自发得出的命令。但是，它效果不佳，而是我使用了：~~

 ~~```
convert WPTgp.jpg -liquid-rescale 599x640\! -scale 290x310 liquid.jpg
convert WPTgp.jpg -liquid-rescale 599x640\! -scale 48.4%   liquid.jpg 
```

下面进一步解释了为什么我需要修改它....~~对不起 - 我现在无法提供示例图片；~~~~这需要安装额外的 ImageMagick 委托~~~~（液体重新缩放库），我目前没有）~~ 我现在有机会创建原始图像的“液体重新缩放”版本。
**`Liquid-rescaled`** !['流动'重新调整](../Images/fc9b50d2dc145ed5ab1befa0c4304dee.png)
~~`liblqr`~~

* * *

## 关于接缝雕刻的注意事项 / `'-liquid-rescale'`：

如上所述，最后一个图像**不是**我最初提出的命令的结果，而是以下两个修改版本之一的结果：

```
convert WPTgp.jpg -liquid-rescale 599x640\! -scale 290x310 liquid.jpg
convert WPTgp.jpg -liquid-rescale 599x640\! -scale 48.4%   liquid.jpg 
```

请记住，我们有一个 489x610 像素的原始图像，我们希望将其缩放到 290x310 像素。但`-liquid-rescale`不擅长同时在两个维度上重新缩放——它被设计为仅缩放到一个方向（水平或垂直）。如果你尝试同时做这两个，结果可能不是你所期望的。这是最初建议的命令的结果：

```
 convert WPTgp.jpg -liquid-rescale 290x310\! liquid.jpg 
```

**`LQR gone wrong`** ![液体重新调整出错了](../Images/12f5476992f5a267b2c7ff95d56079e1.png)

这就是为什么我想出了两个修改后的命令，它们分两步工作：

1.  首先，仅对水平尺寸应用液体缩放，将原件的宽度从 489 像素扩展到 599 像素。
2.  其次，对中间结果应用“正常”纵横比保持缩放以生成最终图像。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-30T11:54:57.983

尝试：

```
$inputFile = "WPTgp.jpg";
exec("convert {$inputFile} -resize 290x310^ -gravity Center -crop 290x310+0+0 picCropped.png"); 
```~~~~

# c# - 使用 LINQ 查询而不是 foreach 循环

> ID：11720822
> 
> 赞同：2
> 
> 时间：2012-07-30T11:42:15.087
> 
> 标签：c#, .net, linq

我想将这段代码转换为 LINQ 查询，因为 LINQ 比 foreach 快得多。我不知道该怎么做，基本上可以做简单的 LINQ 查询。

我想要做的是在字典中获取一个特定的字段。

```
Dictionary<string, object> fieldLayout = null;
foreach (Dictionary<string, object> dic in pageLayout)
{
    if (dic[ "FIELD" ].ToString() == "123")
    {
        fieldLayout = dic;
        break;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T11:44:23.173

`fieldLayout = pageLayout.FirstOrDefault(dic => dic["FIELD"].ToString() == "213");`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T11:45:11.740

LINQ 几乎不比 快`foreach`，但这超出了这里的范围。

```
var fieldLayout = pageLayout.FirstOrDefault(pl => pl["FIELD"].ToString() == "123"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-30T11:45:38.870

首先，LINQ 并不比 foreach 循环快。

这是实现：

```
Dictionary<string, object> fieldLayout = pageLayout.Where(x => x["FIELD"].ToString() == "123").FirstOrDefault(); 
```

甚至更好：

```
Dictionary<string, object> fieldLayout = pageLayout.FirstOrDefault(x => x["FIELD"].ToString() == "123"); 
```

# html - 如何在不使用表格的情况下设置这样的 HTML 边框？

> ID：11720827
> 
> 赞同：0
> 
> 时间：2012-07-30T11:42:23.293
> 
> 标签：html, border

我想在“条款和条件”标题上设置一个内部边框，如下所示[而且](http://www.teabungalow.in/termsconditions.htm) 我不想使用表格。有没有办法解决？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T11:46:55.493

尝试这个。您可以根据您的要求修改/修改样式，但我给了您一个基本的方法。

```
.header{background:#fff; padding:10px;}
.inner-header{border:1px solid grey;}

<div class="header">
     <div class="inner-header">
         This one will have the border
     </div>
</div> 
```

# android - 带有地图的片段 TabHost

> ID：11720831
> 
> 赞同：1
> 
> 时间：2012-07-30T11:42:43.227
> 
> 标签：android, google-maps, android-fragments

1.  我有一个扩展的 StartActivity `FragmentActivity`。布局包含对片段的调用，`<fragment class="bla.bla.bal.TabsFragment">`

2.  TabsFragment 包含片段之间的交互。所有这些都适用于不同的片段。

3.  现在我有另一个`Activity`扩展`MapActivity`。我想包括这张地图，并保持`TabHost`静止在视图的底部。有谁知道如何做到这一点？

我已经检查[了使用列表、片段和地图实现选项卡的最佳方式？](https://stackoverflow.com/questions/8566566/best-way-to-implement-tabs-with-lists-fragments-and-maps) 并且[需要在片段中为谷歌地图提供快速帮助，以兼容 android 支持 android 的库，](https://stackoverflow.com/questions/8781650/need-fast-help-for-google-maps-in-fragments-with-compatibility-android-support-l)但我仍然遇到麻烦......

# ruby - CarrierWave：当文件类型在 test:unit 中的黑名单上时不会触发错误

> ID：11720833
> 
> 赞同：1
> 
> 时间：2012-07-30T11:42:53.573
> 
> 标签：ruby, upload, carrierwave

```
def upload_fixture_file filename, content_type
    ActionDispatch::Http::UploadedFile.new({
      :filename => filename,
      :content_type => content_type,
      :tempfile => File.new("#{Rails.root}/test/fixtures/files/" + filename)
                                           })
end

test "should deny exe file upload" do
  file = upload_fixture_file 'SkypeSetup.exe', "application/exe"
  assert_no_difference 'Upload.count' do
    post :create, :upload => { :case_id=> cases(:fred_and_oliver_open).id, :file     => file, :reviewed => :false, :user_id =>   users(:fred).id }
  end
end 
```

运行上面的测试产生“Upload.count”没有改变0。在我的应用程序上我得到预期的“发生错误：文件您不允许上传“exe”文件，允许的类型：[“jpg”，“ jpeg"、"gif"、"png"、"pdf"、"doc"、"docs"、"rtf"、"ods"、"bmp"、"odt"]"

为什么会这样？谢谢

# python - 如何使用 python 制作带有单个 .exe 文件的应用程序？

> ID：11720835
> 
> 赞同：26
> 
> 时间：2012-07-30T11:42:54.057
> 
> 标签：python, pyinstaller

> **可能重复：**
> [py2exe - 生成单个可执行文件](https://stackoverflow.com/questions/112698/py2exe-generate-single-executable-file)

我使用“pyinstaller”从application.py制作了一个application.exe。在这个过程中生成了很多.dll文件。如何使用单个 .exe 文件制作应用程序

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-07-30T11:50:59.097

您是否尝试过`--onefile`PyInstaller 的选项？请参阅有关该主题的[文档](http://pythonhosted.org/PyInstaller/#what-to-generate)。

# php - PHP/MySQL - Mysqli - Prepared Statements - 在另一个select语句while循环中运行多个插入语句？

> ID：11720836
> 
> 赞同：0
> 
> 时间：2012-07-30T11:43:08.810
> 
> 标签：php, loops, mysqli, prepared-statement

我有一个问题，我认为我的逻辑是如何处理与电子商务系统中订购的行相关的存储数据。

我有两个数组。一个数组 ( `orderedItems`) 跟踪与订购产品相关的各种产品 ID。另一个数组 ( `orderedItemQuantity`) 跟踪各种产品 ID 以及订购产品的数量值。

所以现在我想开始将数据插入一个名为`order_items`. 此表有四列，`id`（订单 ID 号）`itemId`、`quantity`和`totalValue`。因此，每个已订购的商品，都会在此表中添加一行，并插入与其对应的信息。

这是我想到的代码：

```
// Loop through ordered items
if ($stmt = $link->prepare("
    SELECT name, price
    FROM items i
    IN (".join($_SESSION['orderedItems'], ',').")
"))
{   
    $stmt->execute();
    $stmt->bind_result($itemName, $itemPrice);
    while ($stmt->fetch())
    {
        $itemQuantity = sanitize($_SESSION['orderedItemQuantity']["$itemId"]);
        $lineTotal = number_format($itemPrice * $itemQuantity, 2);
        // Insert each item line to database \\
        $stmt2 = $link->prepare("
            INSERT INTO order_items SET
            id = ?,
            itemId = ?,
            itemQuantity = ?,
            lineValue = ?
        ");

        if (!$stmt2)
        {
            $error = "Error {$link->errno}  :  {$link->error}";
            include "$docRoot/html/main/error.html.php";
            exit();
        }
        if (!$stmt2->bind_param("iiis", $orderId, $itemId, $itemQuantity, $lineTotal))
        {
            $error = "Error {$link->errno}  :  {$link->error}";
            include "$docRoot/html/main/error.html.php";
            exit();
        }
        if (!$stmt2->execute())
        {
            $error = "Error {$link->errno}  :  {$link->error}";
            include "$docRoot/html/main/error.html.php";
            exit();
        }
        $stmt2->close();
    }
    $stmt->close();
} 
```

但是，当我尝试运行它时，我得到了 mysql 错误代码 2014：Commands out of sync; 您现在无法运行此命令。这是由`if (!stmt2)`子句触发的。

有人可能会告诉我我是否离开这里，这根本不是事情的运作方式。如果是这种情况，您能否为我正在尝试做的事情提出解决方案。

另一方面，如果这是可能的，请您向我解释为什么它对我不起作用。因为爱情和金钱......它只是不会，我认为这个想法从根本上是有缺陷的。

感谢您花时间阅读本文以及您可能愿意分享的任何建议、意见、建议或知识！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T13:20:49.437

抱歉，您看到的错误消息是您的最后一个问题。

> 我有两个数组

这是完全错误的——它应该是一个单一的数组。

> 另一个数组 (orderedItemQuantity) 跟踪各种产品 ID 以及订购产品的数量值

呃，看看代码，这似乎是一个嵌套数组。

```
if ($stmt = $link->prepare("
  SELECT name, price
  FROM items i
  IN (".join($_SESSION['orderedItems'], ',').")
")) 
```

当您在没有转义的情况下拼接文字值时，为什么要为准备好的语句而烦恼？

> while ($stmt->fetch()) ... $stmt2 = $link->prepare("

永远不要在循环内执行 SQL 语句。

解决错误消息是微不足道的 - 只需使用单独的数据库连接 - 但它不会解决您的代码更深层次的问题 - OTOH 整理其余代码也应该正确解决错误。

# asp.net-mvc - Ajax 调用从 ASP.NET MVC 控制器获取 GeoJson 数据

> ID：11720843
> 
> 赞同：9
> 
> 时间：2012-07-30T11:43:48.607
> 
> 标签：asp.net-mvc, jquery, geojson, leaflet

使用带有 C# 的 ASP.NET MVC 3 我有一个网页来显示一个地图，我想在该地图上添加一条由多个纬度和经度坐标组成的折线。使用**Leaflet** JavaScript 库，您可以添加**GeoJson**层。我想从 C# 中的数据库中获取经度和纬度坐标，并将坐标列表传递给 JavaScript 以创建**GeoJson**或作为**GeoJson**。

这是我希望创建的 GeoJson 示例：

```
var polyline = {
      "type": "Feature",
      "geometry": {
      "type": "LineString",
                    "coordinates": [
                        [-105.00341892242432, 39.75383843460583],
                        [-105.0008225440979, 39.751891803969535] …
                    ]
                },
      "properties": {
      "popupContent": "This is a polyline of many coordinates.",
      "underConstruction": false
      }
}; 
```

如何创建类似于上面显示的 GeoJson 并将位置数据从 C# 或 JavaScript 添加到“<em>coordinates”部分，然后在 JavaScript 中使用它来添加这样的层：

```
var myLayer = L.geoJson().addTo(map);
myLayer.addData(polyline); 
```

我已经开始使用 GeoJSON.net 并提出了以下代码：

```
foreach (Position point in Positions)
{
    coordinates.Add(point);
}

GeoJSON.Net.Geometry.LineString line = new GeoJSON.Net.Geometry.LineString(coordinates);

JavaScriptSerializer serializer = new JavaScriptSerializer();

var data = serializer.Serialize(lineString); 
```

但我不知道如何将这个 GeoJSON LinseString 对象从 C# 传递给 JavaScript。我无法像这样使用 Json 传递它：

```
return Json(data, JsonRequestBehavior.AllowGet); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-01T09:31:51.943

只是简单地看了一下 GeoJSON.NET ，它使用[JSON.NET](http://james.newtonking.com/projects/json-net.aspx)，所以你需要在返回结果时使用 JSON.NET 序列化器（.NET 中的 JSON 序列化器不知道 JSON.NET 属性。）要做到这一点您可以像这样序列化并返回 ContentResult （尚未对此进行测试）：

```
var line = new GeoJSON.Net.Geometry.LineString(coordinates);
string json = JsonConvert.SerializeObject(line);
return Content(json, "application/json"); 
```

或者更好的是，您可以使用[自定义 JSON.NET ActionResult](http://james.newtonking.com/archive/2008/10/16/asp-net-mvc-and-json-net.aspx)。

附带说明一下，多边形的序列化似乎存在[不符合 GeoJSON 规范的问题](http://geojsondotnet.codeplex.com/workitem/8239)——不确定这是否也会影响折线。但这一问题一年后仍未得到解决，这对 GeoJSON 库来说并不好。该项目似乎被放弃了。

[我们选择在nettopologysuite](http://code.google.com/p/nettopologysuite/)中使用 GeoJSON 序列化，我记得它直接开箱即用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T21:44:11.333

我真的没有灵丹妙药，但我相信我至少可以为您指明正确的方向。

如果您碰巧使用 PostGres/PostGIS，则可以使用[ST_AsGeoJson](http://postgis.org/docs/ST_AsGeoJSON.html)函数直接从数据库中返回 GeoJson，这很方便。否则，您将需要从查看[JSON.NET](http://json.codeplex.com/)开始，它是 ASP MVC 的事实上的标准 JSON 序列化库。我发现它有点全面，而且我还没有深入研究它，以建议你如何在仅仅获得一点熟悉的情况下继续前进。

此外，似乎有一个适用于 JSON.NET 的 GeoJson 插件，它有一个[Nuget 包](http://nuget.org/packages/GeoJSON.Net)和相应的[GitHub](https://github.com/jbattermann/GeoJSON.Net)存储库。我没有亲自使用过它，所以我不能完全保证它的稳定性/功能集等，但无论如何它可能是一个很好的起点。

希望这会有所帮助，我很想听听你最终会做什么！

# windows - 从 windows 中的所有子文件夹中删除 CVS 文件夹

> ID：11720844
> 
> 赞同：6
> 
> 时间：2012-07-30T11:43:51.797
> 
> 标签：windows, batch-file

我是 bat 文件的新手。我有文件夹假设“A”，这个文件夹有子文件夹“B”，“C”，“D”这些文件夹又有自己的子文件夹。我的问题是每个子文件夹和父文件夹都有 CVS 文件夹，我想从每个目录中删除该文件夹。如何在bat文件中做到这一点。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-05-30T20:56:09.887

转到要删除所有 CVS 文件夹的位置。在资源管理器的窗口中，在搜索框中键入“CVS”。并点击进入。全选，然后删除。现在它完成了。:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T11:53:35.147

这应该做的工作：

```
FOR /F "tokens=*" %%G IN ('DIR /B /AD /S cvs') DO RMDIR /S /Q %%G 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-24T21:49:22.837

试着做

```
cvs export -DNOW module_name 
```

代替

```
cvs co module_name 
```

然后你不需要删除任何东西。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-30T11:57:52.807

通常你应该用它`cvs export`来获得没有工作副本文件夹的课程的干净副本。

但是您也可以使用`for`循环来删除这些文件夹：

```
for /r /d %%f in (*) do if "%%f"=="CSV" rd /s /q "%%f" 
```

# php - PHP加起来两个时间变量

> ID：11720845
> 
> 赞同：9
> 
> 时间：2012-07-30T11:43:52.520
> 
> 标签：php, mysql

在我的 PHP 应用程序中，我想计算两个时间变量的总和。我正在寻找类似这个例子的东西。

```
$time1 = 15:20:00;
$time2 = 00:30:00;
$time = $time1+$time2; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-08-27T18:00:45.200

如果您期望的答案是`15:50:00`并且您想要使用`strtotime`和`date`函数，则需要在将它们转换为 unix 时间戳时减去秒`$time1`并共享：`$time2`

```
$time1 = '15:20:00';
$time2 = '00:30:00';
$time = strtotime($time1) + strtotime($time2) - strtotime('00:00:00');
$time = date('H:i:s', $time); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-30T11:46:42.957

最好的方法是最有可能使用 strtotime 将它们转换为时间戳，然后将它们加在一起：

`$o = strtotime($time1)+strtotime($time2);`

如果我没记错的话`strtotime`确实支持这种格式。

否则，您将需要自己过滤掉它。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-06-03T08:05:14.917

以下答案没有返回正确的值。它正在对整数求和，但没有返回正确的时间。

$o = strtotime($time1)+strtotime($time2);

我创建了一个函数来获取计算时间，如下所示。

```
public function addTwoTimes($time1 = "00:00:00", $time2 = "00:00:00"){
        $time2_arr = [];
        $time1 = $time1;
        $time2_arr = explode(":", $time2);
        //Hour
        if(isset($time2_arr[0]) && $time2_arr[0] != ""){
            $time1 = $time1." +".$time2_arr[0]." hours";
            $time1 = date("H:i:s", strtotime($time1));
        }
        //Minutes
        if(isset($time2_arr[1]) && $time2_arr[1] != ""){
            $time1 = $time1." +".$time2_arr[1]." minutes";
            $time1 = date("H:i:s", strtotime($time1));
        }
        //Seconds
        if(isset($time2_arr[2]) && $time2_arr[2] != ""){
            $time1 = $time1." +".$time2_arr[2]." seconds";
            $time1 = date("H:i:s", strtotime($time1));
        }

        return date("H:i:s", strtotime($time1));
    } 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-30T11:58:38.817

您可以使用 PHP 5.3 [`DateInterval`](http://php.net/class.dateinterval.php)：

```
$timeInterval = DateInterval::createFromDateString( '15 hours + 20 minutes' );
$timeInterval2 = DateInterval::createFromDateString( '30 minutes' );

foreach( str_split( 'ymdhis' ) as $prop )
{
    $timeInterval->$prop += $timeInterval2->$prop;
}
var_dump( $timeInterval->format( '%H:%i:%s' ) ); 
```

（这里解释了如何添加到 DateInterval 对象：[我们如何在 PHP 中添加两个日期间隔](https://stackoverflow.com/questions/11556731/how-we-can-add-two-date-intervals-in-php)）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-15T17:28:50.667

请务必查阅神秘文档[http://us1.php.net/strtotime](http://us1.php.net/strtotime)以获取可以输入到函数中的其他内容 :)

```
$today = time();
$tommorrow = strtotime("+1 days", $today);
$day_after_tomorrow = strtotime("+1 days", $tomorrow); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-12T12:09:02.947

据我所知，Sammaye 的回答并不适合我。

我需要从 UNIX 时间戳的开头开始我想添加的时间。这样，`strtotime`返回第一次需要添加的秒数。

```
$time1 = "15:20:00";
$time2 = "1970-01-01 00:30:00";
$time = strtotime($time1) + (strtotime($time2) + 3600);
echo $time . "<br />";
echo date("H:i:s", $time); 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-07-30T11:51:20.980

**代码：**

```
$time1 = '15:20:00';
$time2 = '00:30:00';
$time = strtotime($time1)+strtotime($time2);
$sumtime = date("H:i:s",$time); 
```

# iphone - 在哪里初始化我的 TableView DataController？

> ID：11720847
> 
> 赞同：-1
> 
> 时间：2012-07-30T11:43:58.883
> 
> 标签：iphone, objective-c, ios, cocoa-touch

我想要一个 UITableViewController 来控制我的 TableView。

我应该在哪里（以及如何）在 UITableViewController 上调用 init？

* * *

**编辑** 这是我`prepareForSegue`方法中的当前代码：

```
 UINavigationController *navigationController = (UINavigationController *)self.window.rootViewController;
    ReccyTableViewController *tableViewController = (ReccyTableViewController *)[[navigationController viewControllers] objectAtIndex:0];

    ProjectDataController *aDataController = [[ProjectDataController alloc] init];

    [tableViewController setDataController:aDataController];

    [self presentViewController:tableViewController animated:YES completion:nil]; //Fails here 
```

* * *

**编辑＃2** 这是我最后所做的：

我放弃了在 prepareForSegue 方法中初始化数据控制器的尝试，而是在 viewDidLoad 方法中进行了操作：

```
 - (void)viewDidLoad
  {
      [super viewDidLoad];
      _dataController = [[ProjectDataController alloc] init];
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T11:45:47.520

您应该从您想要添加/推送此 tableViewController 的前一个控制器的位置调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T11:57:04.860

[这](http://www.yetanotherchris.me/home/2010/10/18/uitableviewcontroller-by-example.html)可能会帮助你

阅读苹果[官方文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewController_Class/Reference/Reference.html)

# javascript - 如何根据其中一列中的值隐藏表格行

> ID：11720848
> 
> 赞同：0
> 
> 时间：2012-07-30T11:44:00.173
> 
> 标签：javascript, jquery

我有一张如下表。

```
<table id="subtask_table" style="width: 80%">
    <tr>
        <th>ID</th>
        <th>Titel</th>
        <th>Beschreibung</th>
        <th>Gemeldet von</th>
        <th>Erstellt am</th>
        <th>Geändert am</th>
        <th>Erledigt</th>

    </tr>

    <tr>
        <td>11</td>
        <td><a href="/taskExplorer/subtasks/edit/11">Termine verschieben</a></td>
        <td></td>
        <td></td>
        <td>2012-07-26 14:34:36</td>
        <td>2012-07-30 08:37:40</td>
        <td>1</td>
        <td><a href="/taskExplorer/subtasks/delete/11">löschen</a></td>
      </tr>
</table> 
```

我想要做的是隐藏该表的一行，如果列 erledigt（已完成）为 0 或空。

这就是我到目前为止得到的：

```
$(document).ready(function() {
    $('#cbHideCompleted').click(function() {
        if($(this).prop('checked')) {

            $('#subtask_table td').each(function() {
                //if td is 'completed' column
                    //if value is 0 or null
                        //hide

            });
        } else {
            $('#subtask_table td').each(function() {
                $(this).show();
            });
        }
    });
}); 
```

有没有办法使用 jquery 选择器直接访问元素。如果没有，我该如何实现“//如果 td 是'完成'列”？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T11:53:45.050

假设您的`erledigt`列始终是倒数第二列，那么它应该非常简单。

遍历行而不是单元格，并在每行中找到倒数第二个单元格并根据需要显示/隐藏该行。

```
$('#subtask_table tr').each(function() {
    var $erledigtCell = $(this).find("td").last().prev();
    var $row = $erledigtCell.parent();

    if($erledigtCell.text() == '1'){
        $row.hide();
    } else {
        $row.show();
    }
}); 
```

如果您对网格的生成方式有任何影响，那么如果您可以将自定义属性添加到`tr`. `data-erledigt=...`比你没有遍历要做，并且显示在哪个列 erledigt 并不重要。

使用这样的HTML：

```
<tr data-erledigt=0>....
.....
<tr data-erledigt=1> 
```

您可以编写一个简单的 jQuery：

```
$("tr[data-erledigt='0']").hide(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T11:49:05.023

```
$('#subtask_table tr td:eq(6)').each(function() { // eq(6) selects the 7-th td, which is the "completed" column
    if(this.innerHTML === '0' || this.innerHTML === '')
    {
        $(this).parent().hide(); // td.parent returns the tr
    }
}); 
```

此外，这是多余的（虽然我不确定这会完成什么，也许你想显示行（tr not td）代替）：

```
$('#subtask_table td').each(function() {
    $(this).show();
}); 
```

只需使用：

```
$('#subtask_table td').show(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T11:52:33.643

我可能会这样做：

```
$(document).ready(function() {
    $('#cbHideCompleted').click(function() {
        if($(this).prop('checked')) {    
            $('#subtask_table td:nth-child(7)').each(function() {
                //if td is 'completed' column
                var val = $(this).text();
                if (val === "" || val === "0")
                    $(this).parent().hide();    
            });
        } else {
            $('#subtask_table tr').show();
        }
    });
}); 
```

选择[`:nth-child()`器](http://api.jquery.com/nth-child-selector/)“选择所有父元素的第 n 个子元素”，因此`$('#subtask_table td:nth-child(7)')`选择第 7 列中的所有 td 元素。因此，遍历这些单元格，如果文本内容是空字符串或“0”，则隐藏其父 tr 元素。

在您的 else 分支中，您不需要`.each()`循环：您可以`.show()`直接调用包含多个元素的 jQuery 对象，所有元素都会显示出来。

# upgrade - 升级后无法登录管理员

> ID：11720852
> 
> 赞同：1
> 
> 时间：2012-07-30T11:44:05.530
> 
> 标签：upgrade, pyrocms

我需要一些帮助进行故障排除。

我刚刚将我的 1.3 站点升级到 2.0（打算继续升级到 2.1）。我运行实际页面，从数据库等读取内容，但我无法登录管理面板！

只是为了确保我没有忘记我所做的密码

```
<?php echo sha1('password' . 'salt'); ?> 
```

从数据库中取出盐，输出与存储在数据库中的相同。但是我仍然无法登录。登录提示只是重新加载，没有错误消息或任何内容。有任何想法吗？

我也试过清除缓存/会话/等，甚至是不同的浏览器都没有影响。

从 PyroCMS 论坛交叉发布：[https ://www.pyrocms.com/forums/topics/view/19323](https://www.pyrocms.com/forums/topics/view/19323)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T11:15:15.307

好的，因为在这里或 PyroCMS 论坛上似乎没有找到任何好的建议，而且我的网站内容非常少，所以我决定擦除所有内容并全新安装最新版本。

不是一个很好的解决方案供将来参考，但它必须这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T21:39:52.300

从我的清单中（我已经有一段时间没有遇到这种情况了）：

*   如果您没有收到不正确的密码错误，则很可能您只是在检查详细信息之前被重定向回登录页面。在 .htaccess 中启用“从 URL 中删除 index.php”可能会遇到问题 -`/system/cms/config/config.php`尝试更改
    `$config['index_page'] = 'index.php';`
    为`$config['index_page'] = '';`

或（正如您所暗示的）：

*   清除 default_ci_sessions 表的内容
*   清除域的 cookie（更快的方法是打开一个新的 Google 隐身窗口，它不会有任何 cookie）。

此外 - 如果您或其他人*确实*忘记了它（不要忘记），您可以使用普通用户登录表单启动管理员密码的密码重置。

# ibatis - mybatis- 3.1.1\. 如何覆盖mybatis返回的resultmap

> ID：11720856
> 
> 赞同：1
> 
> 时间：2012-07-30T11:44:12.247
> 
> 标签：ibatis, mybatis

我们使用 mybatis 3.1.1。

我们发现对于 oracle，返回的结果映射包含大写字母的列名，而在 mySql 的情况下，返回的结果映射包含小写字母的列名。

我的问题是：有什么方法可以编写某种拦截器，以便我可以修改结果映射返回的结果。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-31T03:30:13.697

恐怕答案是 MyBatis 没有提供任何直接的方法来控制结果映射中键的大小写。我最近在 MyBatis Google Group 上问了这个问题： [https ://groups.google.com/forum/?fromgroups#!topic/mybatis-user/tETs_JiugNE](https://groups.google.com/forum/?fromgroups#!topic/mybatis-user/tETs_JiugNE)

结果取决于 JBDC 驱动程序的行为。

事实证明，@jddsantaella 建议的列别名并非在所有情况下都有效。我过去用三个数据库测试过 MyBatis-3.1.1：MySQL、PostgreSQL 和 H2，得到了不同的答案。对于 MySQL，列别名的大小写决定了 hashmap 中键的大小写。但是对于 PostgreSQL，它总是小写，而对于 H2，它总是大写。我没有测试列别名是否适用于 Oracle，但默认情况下它似乎返回大写字母。

*我看到两个选项*：

**选项 1**：创建一些帮助方法，您的代码将始终使用该方法将数据从返回的地图中提取出来。例如：

```
private Object getFromMap(Map<String, Object> map, String key) {
  if (map.containsKey(key.toLowerCase())) {
    return map.get(key.toLowerCase());
  } else {
    return map.get(key.toUpperCase());
  }
} 
```

**选项 2：**`java.util.AbstractMap`编写一个从or扩展的 LowerCaseMap 类，`java.util.HashMap`并包装所有对 和/或 的调用`put`，`putAll`并且/或`get`始终为小写。然后指定 MyBatis 在从查询中填充数据时应该使用您特定的 LowerCaseMap 而不是标准的 HashMap。

如果你喜欢这个想法并想知道如何告诉 MyBatis 如何使用不同的具体集合类，请参阅我对这个 StackOverflow 问题的回答：[https ://stackoverflow.com/a/11596014/871012](https://stackoverflow.com/a/11596014/871012)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T11:49:01.303

如果您修改查询以获得所需的确切列名怎么办？例如：

```
select my_column as MY_COLUMN from ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-13T19:31:41.387

将 LowerCaseMap 作为 ResultType 的想法是合理的，但您可以避免自己编写。就我而言，我使用的是[org.apache.commons.collections4.map.CaseInsensitiveMap](http://commons.apache.org/proper/commons-collections/javadocs/api-4.4/org/apache/commons/collections4/map/CaseInsensitiveMap.html)：

```
<select id="getTableValues" 
        resultType="org.apache.commons.collections.map.CaseInsensitiveMap">
      SELECT *
        FROM my_table
       WHERE seq_val=#{seq_val}
</select> 
```

# reporting-services - Reporting Services 中的 TFS 建议值

> ID：11720866
> 
> 赞同：0
> 
> 时间：2012-07-30T11:44:46.200
> 
> 标签：reporting-services, tfs

我正在使用 Microsoft.VSTS.Common.Activity 来表示自定义工作项中的活动；对于这些工作项中的每一个，我都有一组不同的活动字段建议值。

现在的问题是，当我尝试使用 SSRS 创建带有活动过滤器的报告时，缺少一些建议的值。

例如：在 TFS 中我有：SSRS 中的 Activity-1、Activity-2 和 Activity-3 我只有：Activity-1 和 Activity-3

我试图重建仓库数据库，但仍然存在缺失值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T13:38:02.023

我在 MSDN 论坛上发布了同样的问题，[这是他们的答案](http://social.msdn.microsoft.com/Forums/en-US/tfsreporting/thread/d7058d27-3765-4f9f-93be-8db80a13265f#770bdc43-963c-4267-a1ca-a286b99a90bc)

# linux - 如何成为一名linux设备驱动程序员？

> ID：11720872
> 
> 赞同：2
> 
> 时间：2012-07-30T11:45:03.407
> 
> 标签：linux, linux-device-driver

任何人都可以建议我如何成为一名 linux 设备驱动程序程序员。我在一家公司担任软件工程师（1 年以上经验）时有很多疑问。我们的项目是在 linux 和 windows 中使用 C、c++ 完成的，我正在使用 C、C++ 并使用 Visual Studio 和 Linux GCC我的项目。我们的项目主要是远程管理服务器和系统。

我对 linux 内核设备驱动程序编程非常感兴趣。谁能告诉我什么对我有好处，以及如何开始我有一些书（LDD 3ed 等）但只有阅读书就足够了，否则我必须接受一些培训。

这个驱动程序编程的未来和范围呢？请告诉一些建议。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T12:31:33.113

LDD O'Reilly 的书非常好（Rubini 等人），还可以看看 LXR 项目：

[http://lxr.linux.no/](http://lxr.linux.no/)

它是内核源代码的一个很好的交叉链接参考。阅读当前的驱动程序代码可能是熟悉的最好方法。

学习任何语言或编码风格的最佳方法是尽可能多地阅读代码。编译它，修改它，使内核崩溃，然后随便玩玩。内核驱动程序是我个人最喜欢写的东西，你有很多令人兴奋的东西要看！

祝你好运！

# java - Hibernate saveOrUpdate，更新需要原行的所有字段

> ID：11720876
> 
> 赞同：3
> 
> 时间：2012-07-30T11:45:14.513
> 
> 标签：java, mysql, hibernate

我正在使用 mysql 和 hibernate 在表中插入和更新行。我使用 saveOrUpdate 调用。现在，当我尝试更新表中的一行时，出现异常。异常指出我的列 requestTime 不能为空。显然这是真的，因为我已将列属性设置为 NotNull。

我可以添加行。但是当用另外 2 列的值更新它时，我得到了这个异常。

我假设当我更新时，我需要从表中读取行，并更新整行。真的吗 ？我有点希望hibernate saveOrUpdate 能为我做这件事。因此，当我插入新行时，我有一个对象，该对象具有所有列的 getter。但是当我更新时，我有一个只有主键和新列的 getter 的对象。

```
Transaction txD;
Session session;
session = currentSession();
txD = session.beginTransaction();
session.saveOrUpdate(dataStore);
txD.commit(); 
```

例外

```
749368 [Thread-2] DEBUG org.hibernate.internal.util.EntityPrinter  - com.mcruiseon.carpool.concrete.SubscribeProviderConcrete{acceptedTime=Mon Jul 30 03:39:23 UTC 2012, requestTime=null, subscriberIdentityHash=1218553253, requestIdentity=167093126, subscribedProviderHash=-284086361, isAccepted=true}
749375 [Thread-2] DEBUG org.hibernate.SQL  - update carPoolSubscribedProvider set subscriberIdentityHash=?, requestTime=?, subscribedProviderHash=?, isAccepted=?, acceptedTime=? where requestIdentity=?
749398 [Thread-2] DEBUG org.hibernate.engine.jdbc.spi.SqlExceptionHelper  - Column 'requestTime' cannot be null [n/a]
com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException: Column 'requestTime' cannot be null 
```

从 carPoolSubscribedProvider 中选择 *

```
+-----------------+------------------------+---------------------+------------------------+------------+--------------+
| requestIdentity | subscriberIdentityHash | requestTime         | subscribedProviderHash | isAccepted | acceptedTime |
+-----------------+------------------------+---------------------+------------------------+------------+--------------+
| 167093126       | -284086361             | 2012-07-27 16:13:19 | 1218553253             |          0 | NULL         |
+-----------------+------------------------+---------------------+------------------------+------------+--------------+ 
```

编辑 ：

```
| carPoolSubscribedProvider | CREATE TABLE `carPoolSubscribedProvider` (
  `requestIdentity` varchar(50) NOT NULL DEFAULT '',
  `subscriberIdentityHash` varchar(100) NOT NULL,
  `requestTime` datetime NOT NULL,
  `subscribedProviderHash` varchar(100) DEFAULT NULL,
  `isAccepted` tinyint(1) DEFAULT '0',
  `acceptedTime` datetime DEFAULT NULL,
  PRIMARY KEY (`requestIdentity`), 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T11:51:26.237

Hibernate 无法弄清楚您希望如何处理具有空值的属性。它无法区分以下情况：

1.  某些属性为空 -> 应在数据库中设置为空
2.  某些属性为空 -> 不应更新此类属性。

将以前非 null 的属性值设置为 null 意味着应该更改属性的值。

如果您想让列永远不会成为更新语句的一部分，您可以在[@Column](http://docs.oracle.com/javaee/6/api/javax/persistence/Column.html#updatable%28%29)注释中将可更新属性设置为 false。根据它定义的文档：*该列是否包含在持久性提供程序生成的 SQL UPDATE 语句中*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T13:51:06.927

如果你写你的表定义会更容易。

您的非空列有两种情况：

1.  你有一个“默认值”。

```

    创建表 t1
    (
        id 整数不为空，
        column1 char 不为空，默认为 'Y'，
        column2 日期不为空默认 sysdate，
        column3 varchar2(30) 不为空默认用户，
        intcol 整数 不为空 默认 12
    );

```

如果您未在 INSERT 或 UPDATE 中指定此列，oracle 会自动将默认值放入表中。

1.  您**没有**“默认值”。

```
    创建表 t1
    (
        id 整数不为空，
        column1 char 不为空，
        column2 日期不为空，
        column3 varchar2(30) 不为空，
        intcol 整数 默认 12
    );

```

如果您未在 INSERT 或 UPDATE 中指定此列，oracle 会自动向您抛出错误消息。

这是关于数据库中不为空的理论，让我们去 Hibernate：

您可以在列注释中添加如下内容：

```
 insert="false", update="false" 
```

然后数据库将使用默认值，但如果在您的表定义中未指定默认值，则该字段的值应始终不为空。

编辑：

所以我现在看到你有 3 列“NOT NULL”。对于定义了默认“requestIdentity”的列，您可以使用动态更新或动态插入：[http ://www.mkyong.com/hibernate/hibernate-dynamic-update-attribute-example/](http://www.mkyong.com/hibernate/hibernate-dynamic-update-attribute-example/)

但是对于其余的人，您必须将值放入变量中：

```
private Date requestTime = new Date();

private String subscriberIdentityHash = "someDefaultHashHere"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-22T13:00:38.577

oUp = 带有空字段的更新行 & oDb = 更新时从数据库中获取的行

```
public static <T> T updateChanges(T oDb, T oUp) {
    try {
        java.lang.reflect.Field[] fields = oDb.getClass().getDeclaredFields();
        for (Field field : fields) {
            field.setAccessible(true);
            if (field.get(oUp) != null) {
                field.set(oDb, field.get(oUp));
            }
        }
    } catch (IllegalAccessException e) {
        e.printStackTrace();
    }
    return oDb;
} 
```

# c# - 如何获取特定的注册表项子项

> ID：11720877
> 
> 赞同：1
> 
> 时间：2012-07-30T11:45:17.443
> 
> 标签：c#, registry, nic

任何人都知道，如何以编程方式获取 0001 、 0002 或 0005 等子键？从

```
HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Class\{4D36E972-E325-11CE-BFC1-08002BE10318} 
```

在这些键 0001, 0002 ...gas 中存储了有关 NIC 卡的信息！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T13:21:37.820

使用`Microsoft.Win32.Registry`/`.RegistryKey`类。
例子：

```
using Microsoft.Win32;
...
//Where CardInformation is some data structure to hold the information.

public static IEnumerable<CardInformation> GetCardInformation()
{
    string cardsKeyAddress =  "\SYSTEM\CurrentControlSet\Control\Class\{4D36E972-E325-11CE-BFC1-08002BE10318}";
    RegistryKey cardsKey = Registry.LocalMachine.OpenSubKey(cardsKeyAddress);
    string[] cardNumbers = cardsKey.GetSubKeyNames();

    foreach(string n in cardNumbers)
        yield return LoadCardInformation(cardsKeyAddress+"\\"+n);
}
static CardInformation LoadCardInformation(string key)
{
    //Get whatever values from the key to return
    CardInfomation info = new CardInformation();
    info.Name = Registry.GetValue(key, "Name", "Unnamed");
    return info;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T11:57:37.407

你可以使用`Microsoft.Win32.Registry`和相同的类来做到这一点。[在这里](http://msdn.microsoft.com/en-us/library/b2hs0tae%28v=vs.71%29)阅读更多

# c++ - ifstream::read 不告诉它真正读取了多少字节？

> ID：11720880
> 
> 赞同：15
> 
> 时间：2012-07-30T11:45:25.000
> 
> 标签：c++, ifstream, readfile

我`ifstream::read`用来读取文件，

```
ifstream ifs("a.txt");
char buf[1024];
ifs.read(buf, 1024); 
```

但是 a.txt 的大小可能小于`1000 bytes`，那么我应该如何知道从中读取了多少字节`ifs`？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-30T11:47:01.210

您可以使用以下命令获取最后一次操作提取的字符数量[`std::ifstream::gcount`](http://en.cppreference.com/w/cpp/io/basic_istream/gcount)：

```
ifstream ifs("a.txt");
char buf[1024];
ifs.read(buf, 1024);
size_t extracted = ifs.gcount(); 
```

或者

```
ifstream ifs("a.txt");
char buf[1024];
size_t extracted = ifs.read(buf, 1024).gcount(); 
```

因为[`read(...)`](http://en.cppreference.com/w/cpp/io/basic_istream/read)回报`*this`。

# c# - 我们如何在 C# 中删除多个文件？

> ID：11720883
> 
> 赞同：1
> 
> 时间：2012-07-30T11:45:31.217
> 
> 标签：c#

```
File.Delete(path); 
```

我正在使用上面的功能。我有多个文件。如何在不多次调用`File.Delete()`函数的情况下删除多个文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T11:48:51.193

没有任何解决方案可以让您通过`File.Delete`一次调用删除多个文件。如果您担心性能，您可以将代码放入后台线程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T11:51:58.363

除了删除整个目录之外，您别无选择，只能`File.Delete`多次调用。根据[文档](http://msdn.microsoft.com/en-us/library/system.io.file.delete.aspx)，路径参数是：

> 要删除的文件的名称。不支持通配符

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T11:48:48.510

您拥有多个文件的文件必须具有不同的扩展名，并且在路径中您必须指定要删除哪个文件，因此，如果经常在多个文件是相同的几个扩展名（.exe 等）然后运行循环获取文件名并添加每个扩展名以删除它们。

# javascript - 玉中的点击事件

> ID：11720884
> 
> 赞同：1
> 
> 时间：2012-07-30T11:45:33.890
> 
> 标签：javascript, jquery, web, click, pug

我正在尝试在jade中制作一个简单的警报事件，但它无法正常工作，真的不知道是什么问题，也许你们能找到它？

代码：PS：可以忽略socket.io代码

```
html
head
script(src='jquery-1.7.1.js')
  script(src='/socket.io/socket.io.js')
script
  var socket = io.connect('http://localhost:3002/add_users');
  socket.on("update", function(message) {
  console.log("update: ", message)
  });
  $(function() {
  $("button").click(function() {
    alert("hej");
  });
  });   
body
.container
.content
    header.page-header
       h1 Welcome
    .row

            form(action='/', method='post')
                fieldset
                        label(for="name") Namn
                            input(type="text", size="30", name="name", required="required")
                            button Save
            ul
                li <a href="/users">User list</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T14:57:10.773

我认为您的`$("button").click()`代码在加载 DOM 之前执行。您应该明确地将您的函数传递给`$.ready()`.

PS：我知道将函数传递给jQuery（你所做的）应该和做的一样，`$.ready()`但我之前遇到过同样的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T11:52:31.340

我自己对 Jade 没有太多经验，但你的`script(src='/socket.io/socket.io.js')`缩进不是错误的吗？

如果是，我认为这会导致`socket.io.js`无法正确加载。如果它没有正确加载，那么`io.connect`在绑定 jQuery DOMReady 侦听器之前，您的 javascript 执行将中断。

# android - 手机中的 Google Play 商店应用程序未检测到我在 Play 上发布的应用程序的可用应用程序更新

> ID：11720887
> 
> 赞同：1
> 
> 时间：2012-07-30T11:45:38.977
> 
> 标签：android, publish

我在 Google Play 商店上发布了我的应用程序的新版本，几个小时后用户就可以下载它了。但问题在于已经拥有旧版本应用程序的用户。Google Play 不会为所有这些用户显示更新选项。任何建议可能是什么原因？顺便提一下 versionCode（1170 之前是 1095）和 versionName（1.6.1 之前是 1.5）都高于之前发布的版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T15:46:25.163

所以这是 Google Play 中的一个错误，现在他们已经修复了它，现在我的应用程序的用户可以看到有新的更新版本可用。

# javascript - 上传前查看图像在 IE 中不起作用

> ID：11720888
> 
> 赞同：0
> 
> 时间：2012-07-30T11:45:41.110
> 
> 标签：javascript, html, image, file-upload

我从通过单击按钮打开的窗口中选择图像。然后我显示选定的图像。我正在创建一个 div，然后创建一个图像元素。我从上传的文件源中获取图像的源，然后将其附加到 div 中。它在没有任何服务器的情况下工作正常，但窗口提示输入被阻止的内容，我允许它。但是当我在服务器上运行它时，图像没有显示出来！甚至没有请求许可！在 chrome 和 firefox 中一切正常！

这是一些代码，

```
if(document.all) {
        var image = document.createElement("img");
        image.src = document.getElementById('fileElem').value;
        }
thumbnail.appendChild(image); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T12:08:28.020

这在较旧的浏览器中可以工作，因为传统上`<input type="file" />`具有`value`返回本地文件系统中指定文件的完整路径的属性。然而，自 2006 年左右（想想 IE7+、Firefox 2+、Chrome 等）浏览器不再提供完整的文件路径，它们只提供文件名而不提供目录信息。这是为了保护用户的隐私（例如，因为上传的“我的文档”文件可能包含用户的真实姓名）。

这会影响上传的文件（浏览器不再在 POST 请求中发送完整的文件路径，因此服务器端代码只获取文件名和文件数据）以及本地脚本（就像您自己体验的那样）。

# .net - FsCheck 和 NUnit 集成

> ID：11720890
> 
> 赞同：5
> 
> 时间：2012-07-30T11:45:47.177
> 
> 标签：.net, unit-testing, f#, nunit, fscheck

我想将 FsCheck 测试与 NUnit 测试集成。具体来说，当我声明几个 FsCheck 属性时，我希望它们在 VS 运行程序中是可见和可运行的。我在 FsCheck 旁边找到[了以下](http://fscheck.codeplex.com/wikipage?title=Usage%20Tips)关于 xUnit 使用的描述（在“实现 IRunner 以将 FsCheck 与 mb|x|N|cs|Unit 集成”下），但这不是我想要的。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-08-06T11:27:38.817

仅供参考，现在有一个 FsCheck.Nunit 集成[nuget 包](https://www.nuget.org/packages/FsCheck.Nunit/) 它仅适用于 F# 3.1（目前）

用法：

添加 nuget 包（它还会将一个文件添加到预期的项目中）

```
[<Property>]
let maxLe (x:float) y = 
    (x <= y) ==> (lazy (max  x y = y)) 
```

如果您想要详细输出，可以将 Verbose = true 添加到 Property 属性

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-10T14:10:04.960

你能详细说明为什么使用它不是你想要的吗？这就是将 FsCheck 测试的结果反馈给 NUnit 的方法。您可以像普通的 NUnit 测试一样编写 FsCheck 测试，并使用 Test 属性（或 NUnit 中的任何名称）来赋予它们属性。

如果您想与 NUnit 更紧密地集成，您必须熟悉 NUnit 插件模型。NUnit 集成是我的待办事项列表中的下一个。有关如何与 XUnit.NET 集成的示例，请查看源代码中的 FsCheck.Xunit 项目。从 FsCheck 方面来看，它应该非常相似，但 NUnit 的插件模型与 XUnit 的完全不同。

# mysql - 在 MySQL 中查询 YAML

> ID：11720894
> 
> 赞同：4
> 
> 时间：2012-07-30T11:45:58.290
> 
> 标签：mysql, sql, yaml

假设我有一个表“Customers”，它有一个 TEXT 列“preferences”，我在其中存储 YAML。`show_email`YAML 是具有,`likes_to_party`和等属性的 Hash/Dictionary/Map `last_changed_prefs_at`。MySQL 中是否有任何方法可以查询此 YAML 数据以返回所有拥有的客户`customers.preferences["likes_to_party"] == true`？

但它变得更加复杂，因为我实际上有一个序列化的日期字段，我想知道它是否属于某个日期间隔：`customers.preferences["last_changed_prefs_at"].between(some_date, some_other_date) == true`

我最初在想正则表达式..但这很hacky。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T15:02:38.583

通过使用`SUBSTRING()`,我能够构建一个相当丑陋的 hack `LOCATE()`：`UNIX_TIMESTAMP()`

```
UNIX_TIMESTAMP(
  SUBSTRING(customers.preferences, 
    LOCATE(\"last_changed_prefs_at\", cusstomers.preferences) + 22, 29)
) BETWEEN UNIX_TIMESTAMP(:period_start) AND UNIX_TIMESTAMP(:period_end) 
```

# c# - Exchange Web 服务托管 API：如何从电子邮件中获取任务？

> ID：11720896
> 
> 赞同：0
> 
> 时间：2012-07-30T11:45:59.097
> 
> 标签：c#, exchange-server, exchangewebservices

我正在使用 EWS 获取一些电子邮件，一切正常，但现在我必须实现“CompleteDate”，当有人在 Outlook 中使用此红旗将其设置为任务时设置。

我搜索了所有内容，但找不到从电子邮件中获取任务的方法。我尝试将邮件绑定为任务，但 id 没有工作：

```
Task task = Task.Bind(service, item.Id); 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T11:22:30.743

可以帮助的是利用 IlSpy 查看 DLL。另一个很棒的工具是 EWSEditor。它是免费的，您可以使用它来阅读基于 EWS 的项目。电子邮件不能是任务，您没有任务的属性。要获得您需要按主题搜索的任务。

请参阅示例：[http](http://code.msdn.microsoft.com/Exchange-2013-Find-tasks-0d2633ec) ://code.msdn.microsoft.com/Exchange-2013-Find-tasks-0d2633ec （带有编码示例）

# python - Flask Sqlalchemy：不同模块之间的关系

> ID：11720898
> 
> 赞同：6
> 
> 时间：2012-07-30T11:46:00.563
> 
> 标签：python, sqlalchemy, flask, relationship, flask-sqlalchemy

我正在关注 Flask-SQLAlchemy 教程。我在 python 2.6 上有 Flask 0.9、sqlalchemy 0.7.8 和 flask-sqlalchemy 0.16。

我正在尝试创建“一对多”关系，就像他们的教程中一样。

```
class Person(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    name = db.Column(db.String(50))
    addresses = db.relationship('Address', backref='person',
                                lazy='dynamic')

class Address(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    email = db.Column(db.String(50))
    person_id = db.Column(db.Integer, db.ForeignKey('person.id')) 
```

之后，我可以创建数据库：

```
from DataBase.Tables.MyClass import db
db.create_all() 
```

当两个类都在同一个文件上创建时，它工作得很好。

当我想通过 2 个不同的文件（2 个不同的模块）创建它时，它不再起作用。

这只是一个**例子**（我正在尝试用大量的类做一些更复杂的事情，我需要两个不同的模块之间存在关系，但我会简化它，以便我的问题更容易理解。）

我有 2 个模块：人员和地址，它们都有：

```
app = Flask(__name__)
app.config['SQLALCHEMY_DATABASE_URI'] = 'sqlite:///C:\\MyBase\\Base.sqlite'
db = SQLAlchemy(app) 
```

他们每个人都有之前写的类的声明。

我的主要功能在第三个模块中：

```
from DataBase.Tables.Person import db as person_db
from DataBase.Tables.Address import db as address_db

if __name__ == "__main__":
    import DataBase.Tables.Person
    import DataBase.Tables.Address
    person_db.create_all()
    address_db.create_all() 
```

我仍然在 Eclipse 中遇到错误：

*sqlalchemy.exc.NoReferencedTableError：与列'Address.person_id'关联的外键找不到表'person'，用于生成目标列'sid'的外键*

我可以找到另一个帖子，有人建议使用“元数据”，但我找不到合适的方法来使用它。

有没有人有解决这个问题的想法？

谢谢 ！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-30T12:46:15.587

您只需要以下一组，而不是每个模型的单独副本：

```
app = Flask(my_app_name)
app.config['SQLALCHEMY_DATABASE_URI'] = 'sqlite:///C:\\MyBase\\Base.sqlite'
db = SQLAlchemy(app) 
```

这可以在一个单独的模块中定义（让我们称之为`shared`），并导入到每个模型定义文件中。
在这种情况下，主模块看起来更像：

```
from DataBase.Tables.shared import db

if __name__ == "__main__":
    import DataBase.Tables.Person   # will load Person model into the db
    import DataBase.Tables.Address  # will load Address model into the db
    db.create_all() # will create all models 
```

# javascript - 基于选择选项显示和隐藏 div 的 Javascript

> ID：11720899
> 
> 赞同：1
> 
> 时间：2012-07-30T11:46:02.000
> 
> 标签：javascript

我需要一些 JavaScript 代码来验证页面。这是html，

```
<select id="sel">
<option value="0" selected="selected">Please select</option>
<option value="first">Link 1</option>
<option value="second">Link 2</option>
<option value="third">Link 3</option>
<option value="last">No Link</option>
</select>

<div class="sample" style="display:none;">Sample Text</div>
<input type="button" value="submit" class="inputclass" /> 
```

需要一些 JavaScript 代码，

1.  当用户单击第一个或最后一个选项时，显示 div 并隐藏按钮
2.  当用户单击任何链接时，隐藏 div 并显示按钮

PS：

Select 中的选项将从数据库中动态生成。我的页面只能在 JavaScript 中运行，因此不需要 Jquery。

请帮忙...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-30T14:02:51.013

我认为这是您需要的代码：

**JS部分：**

```
function getSelection(e) {   
    var selection = document.getElementsByTagName("option");
    var index=document.getElementById("sel").selectedIndex;
    var text = document.getElementById("sample");
    var button = document.getElementById("input");
    var option=document.getElementById("sel").options;

    if (option[index].value == "first" || option[index].value == "last") {
        text.style.display = "block";
        button.style.display = "none";
    } else {
        if (text.style.display != "none") {
            text.style.display = "block";
            button.style.display = "none";
        }
        else {
            text.style.display = "none";
            button.style.display = "block";
        }        
    }

    return false;    

}

document.getElementById("input").onclick = function() { getSelection() }; 
```

还有**HTML**（我稍微修改了原来的 HTML 以便更有效地访问 html 元素）：

```
<select id="sel">
<option value="0" selected="selected">Please select</option>
<option value="first">Link 1</option>
<option value="second">Link 2</option>
<option value="third">Link 3</option>
<option value="last">No Link</option>
</select>

<div id="sample" style="display:none;">Sample Text</div>
<input type="button" value="submit" id="input"/>​ 
```

...和**小提琴**： http: [//jsfiddle.net/eaRwa/2/](http://jsfiddle.net/eaRwa/2/) ​</p>

# c# - 将字段添加到特定位置的内容类型

> ID：11720901
> 
> 赞同：2
> 
> 时间：2012-07-30T11:46:04.947
> 
> 标签：c#, .net, sharepoint

下面的代码运行完美，但是我需要新字段位于第 5 位，而不是表单的末尾。

知道怎么做吗？

```
private void UpdateDossierContentType(SPWeb parentWeb)
{
    SPList productList = parentWeb.Site.RootWeb.Lists["Product"];
    SPFieldLookup lookup = CreateLookupField("ProductNameLookup", "CustomGroup",
            false, false, parentWeb.Site.RootWeb,
            parentWeb.Site.RootWeb.Lists["Product"],
           productList.Fields["Product Name"].InternalName);
   LinkFieldToContentType(parentWeb.Site.RootWeb, "Dossier", (SPField)lookup);

    //SPContentType dossierCT = productList.ContentTypes["Dossier"];
    //dossierCT.DeleteFieldRefFromContentType(parentWeb.Fields["Product"]);
    //dossierCT.Update();
}

public static void LinkFieldToContentType(SPWeb web, string contentType, SPField field)
{
    SPContentType ct = web.ContentTypes[contentType];
    ct.FieldLinks.Add(new SPFieldLink(field));
    ct.Update(true);
}

public static SPFieldLookup CreateLookupField(string fieldName, string group, bool required, bool allowMultipleValues, SPWeb w, SPList lookupList, string lookupField)
{
    w.Fields.AddLookup(fieldName, lookupList.ID, lookupList.ParentWeb.Site.RootWeb.ID, required);
    SPFieldLookup lookup = (SPFieldLookup)w.Fields[fieldName];
    lookup.AllowMultipleValues = allowMultipleValues;
    lookup.LookupField = lookupField;
    lookup.Group = group;
    lookup.Update(true);
    return lookup;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:40:02.477

使用`ct.FieldLinks.Reorder(stringArrayOfInternalFieldNames)`见[MSDN SPFieldLinkCollection.Reorder](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.spfieldlinkcollection.reorder)

# c# - 如何从 C# 中 ListView 中的数据库中删除选定项

> ID：11720902
> 
> 赞同：0
> 
> 时间：2012-07-30T11:46:04.043
> 
> 标签：c#, sql-server, listview, select

我正在使用 Microsoft SQL Server 和 Visual Studio-C# 2010 Ultimate。我有一个 ListView 和其中的一些项目。当我选择一个项目并单击按钮时，我想删除它，但我无法编写 SqlCommandtext，也找不到 ListView 的选择事件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-05T13:58:58.770

使用listview c#从数据库中删除选定的数据

```
private void btnlvdeleterow_Click(object sender, EventArgs e)
{
      foreach (int i in Listview2.SelectedIndices)
        {
            string test = Listview2.Items[i].Text;
            Listview2.Items.Remove(Listview2.Items[i]);
            SQLiteCommand conn = new SQLiteCommand();
            conn.Connection = DbClass1.GetConnection();
            string del = "delete from UserData where UserName='" + test + "'";
            int result=dbclass1.ExecuteAndReturn(del);
        }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T12:35:08.950

```
 protected void listview1_ItemDeleting(object sender, ListViewDeleteEventArgs e)
    {
     //This retrieves the selected row 
     ListViewItem  item= listview1.Items [e.ItemIndex];

     //  Fetch the control for ProductId using findControl
      int productId=int.Parse((item.Findcontrol("ProductID") as TextBox).Text);

     //then use this column value in your sqlcommand

   using( SqlCommand cmd = new SqlCommand
        ("delete from Products where ProductID=@ProductId", connection  ))
    {
    command.Parameters.Add(new SqlParameter("ProductId", productId));
     //Then execute the query
    }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T12:31:03.170

ListView 有一个可用的 SelectedIndex 属性。当您单击按钮时，传递此索引，然后您的 Sql 查询将类似于 delete from Products where ProductID = 'obj.ID' 其中 obj 是从 listView.SelectedIndex 获得的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-02T09:03:30.337

```
try
            {
                for (int j = 0; j <= listView2.Items.Count - 1; j++)
                {
                    string test = listView2.SelectedItems[j].SubItems[1].Text;
                    string MyConnection2 = "datasource=localhost;port=3306;username=root;password=root";
                    string Query = "delete from TABLE_NAME where COL_NAME='" + test + "'";
                    MySqlConnection MyConn2 = new MySqlConnection(MyConnection2);
                    MySqlCommand MyCommand2 = new MySqlCommand(Query, MyConn2);
                    MySqlDataReader MyReader2;
                    MyConn2.Open();
                    MyReader2 = MyCommand2.ExecuteReader();

                    while (MyReader2.Read())
                    {
                    }
                    MyConn2.Close();
                    MessageBox.Show("Data Deleted");
                   // txtCustomerName.Text = test;
                    //listView2.Items.Remove(listView2.Items[i]);
                }
            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message);
            } 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-30T12:27:41.970

您正在寻找的事件应该是 ListView.ItemSelectionChanged 其中 eventArgs 包含选定的项目

# jquery - jQuery：自动触发悬停

> ID：11720903
> 
> 赞同：5
> 
> 时间：2012-07-30T11:46:06.430
> 
> 标签：jquery, html, css

对于列表项，我有一个悬停 mousein mouseout 设置，如下所示：

```
$("#main-nav li a").hover(function() {
                $el = $(this);
                leftPos = $el.position().left;
                newWidth = $el.parent().width();
                $magicNav.stop().animate({
                    left: leftPos,
                    width: newWidth
                });
            }, function() {
                t1 = $(".current-menu-item a").position().left;
                t2 = $(".current-menu-item a").parent().width();
                $magicNav.stop().animate({
                    left: t1,
                    width: t2
                });    
            }); 
```

我想在有人进入网站或页面加载后立即自动触发“.current-menu-item a”上的悬停。

目前，我使用`$(".current-menu-item a").trigger('hover');`它并不起作用。

帮助？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-30T11:50:38.850

用这个

```
$(document).ready(function(){
    $(".current-menu-item a").mouseover();
}); 
```

或者

```
$(window).load(function(){
    $(".current-menu-item a").mouseover();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-30T11:50:31.200

```
$(".current-menu-item a").trigger('mouseenter'); 
```

悬停不是真正的事件（它是 jQuery 人为设计的，由`mouseenter`和组成`mouseleave`）。无论如何，这是一个两阶段的过程，因此在逻辑上是不可触发的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T11:50:45.733

你需要使用鼠标悬停而不是像这样悬停

`$(".current-menu-item a").trigger('mouseover');`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-27T06:23:42.747

```
$('selector').trigger('eventName'); 
```

# javascript - 每当我尝试将简单图像源转换为数据 URL 时，就会发生安全错误异常

> ID：11720904
> 
> 赞同：1
> 
> 时间：2012-07-30T11:46:24.043
> 
> 标签：javascript, html, canvas, security

我正在做一个移动应用程序广告项目，所以我需要制作应用程序图像的横幅或缩略图。应用程序列表来自 google play 和 apple store。所以我的网站正在使用其他出站域而不是本地域。

我正在使用 HTML 5 画布元素来管理运行时功能并将整个画布保存为图像。我需要做的是根据用户的颜色偏好和字体颜色等制作默认横幅（保存画布后）。

我的画布编码如下：

```
<canvas id="myCanvas" name="myCanvas" width="300" height="100" style="border:1px solid;margin-top: 25px;margin-left: 73px;margin-bottom: 12px;background: -moz-linear-gradient(top,  #4c4e54,  #4c4e54);"></canvas> 
```

我用来将简单 URL 转换为数据 URL 的 js 是：

```
 var myCanvas = document.getElementById("myCanvas");
 var canvasData = myCanvas.toDataURL("image/png"); 
```

这里发生的事情是，每当我尝试使用 data:URL 保存整个画布元素时，mozilla fiefox 都会给我以下错误：

```
Security error
[Break On This Error]   
var canvasData = myCanvas.toDataURL("image/png"); 
```

我已经搜索了许多帖子和论坛，但没有人为此提供适当的解决方案。

花了很多时间，但给我造成了很大的破坏。

任何建议都会被接受

提前谢谢....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T12:27:30.403

我已阅读您的帖子，发现与我面临的问题相同。

您收到此错误是因为您的应用程序获取的图像来自实时​​ google.play 服务器或苹果商店服务器。

每当我们使用画布时，安全性都是必不可少的。安全性是画布的好特性。

您所做的只是获取图像并在画布上调整大小并实现它。由于安全功能，它不允许您操作出站服务器的图像并将其保存在数据库中。

您可以在控制台中使用 allow-file-access-from-files 以及 firefox.exe 命令并检查它。

# c# - 最佳实践 - 隐藏数据网格列的安全问题

> ID：11720910
> 
> 赞同：3
> 
> 时间：2012-07-30T11:46:40.577
> 
> 标签：c#, .net, winforms, datagrid

假设我有一个包含以下列的数据网格；

```
DataTable dataTable66 = new DataTable();

        DataColumn colDescription = new DataColumn("userID");
        dataTable66.Columns.Add(colDescription);
        DataColumn colActive = new DataColumn("Username");
        dataTable66.Columns.Add(colActive);
        DataColumn colPass = new DataColumn("Password");
        dataTable66.Columns.Add(colPass);
        DataColumn colRole = new DataColumn("Role");
        dataTable66.Columns.Add(colRole); 
```

我创建了一个数据网格，为了便于使用，我选择为密码和用户 ID 设置一列，但知道因为我想对最终用户隐藏这些详细信息，并且仅在我的程序中使用它们作为参考（例如更新到数据库），我选择通过隐藏这些列；

```
 datagrid.Columns[0].Visible = false;
   datagrid.Columns[2].Visible = false; 
```

就开发人员/数据库而言，这是否会产生任何安全风险？显然，密码本身只是密码的哈希值，使用我选择的任何加密方式，但用户能否找到一种方法来获取现在存储在 DataTable / DataGrid 中的这些详细信息？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-30T12:01:49.167

如果用户在您的应用程序中附加了诸如 WinDbg 之类的工具，或者如果他们转储了该进程，则可以轻松浏览 DataTable（或任何其他数据结构）。这是否代表您的应用程序存在风险？我想你是评估这一点的最佳人选。用户可以用这些信息做什么？

# xaml - WinRt WebView“后退按钮”

> ID：11720913
> 
> 赞同：0
> 
> 时间：2012-07-30T11:46:54.560
> 
> 标签：xaml, webview, windows-8, microsoft-metro, windows-runtime

我在 Metro 应用程序中使用 WebView 控件。我想实现一个“返回”按钮功能，但似乎无法找到一个内置的。谁能告诉我是否有，或者我需要自己动手（诚然不是最复杂的编码任务，但我不想重新发明轮子）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T11:04:31.100

这对我有用：

```
webView.InvokeScript("eval", new[] { "history.go(-1)" }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-21T16:40:28.223

建议的代码有效。这里更完整：

在xml中

```
 <Button Content="Back" HorizontalAlignment="Left" Margin="580,98,0,0"   VerticalAlignment="Top" Click="Button_Click_1"/> 
```

在 xaml.cs

```
 private void Button_Click_1(object sender, RoutedEventArgs e)
    {
        webView.InvokeScript("eval", new[] { "history.go(-1)" }); 
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-30T18:48:35.607

不幸的是，您将不得不自己动手。你应该能够使用类似的东西：

```
webView.InvokeScript("history.back();"); 
```

或者可能

```
webView.InvokeScript("history.go(-1);"); 
```

# php - 常量、isset 和空求值

> ID：11720923
> 
> 赞同：2
> 
> 时间：2012-07-30T11:47:49.907
> 
> 标签：php, variables, undefined, isset

有谁知道 isset 和 empty 是如何被翻译器解释的，或者翻译器如何处理未定义的变量？

为了扩展我的问题，我的包含文件中有以下代码：

```
define('USER_AUTH', !empty($_SESSION['username']) && !empty($_SESSION['status'])); //user is verified
define('ACC_IS_PENDING', $_SESSION['status'] == '0');//checks to see if user status is pending which has a status of 0 
```

USER_AUTH 用于快速检查用户是否已通过身份验证。ACC_IS_PENDING 用作帐户状态未决时的快速手。但是，PHP 通知我第二行代码中的 $_SESSION['status'] 未定义。我知道它是未定义的，但我还没有使用它！你怎么敢把我已经知道的告诉我。哈哈

但是，当我使用以下代码欺骗代码时：

```
define('USER_AUTH', !isempty($_SESSION['username']) && !isempty($_SESSION['status']));
define('ACC_IS_PENDING', $_SESSION['status'] == '0'); 
```

其中 isempty() 是一个自定义函数，它将始终返回 FALSE。然后没通知！或者，如果我使用以下代码：

```
define('USER_AUTH', notempty($_SESSION['username']) && notempty($_SESSION['status']));
define('ACC_IS_PENDING', $_SESSION['status'] == '0'); 
```

notempty() 总是返回 TRUE，然后再没有通知。

我是否说翻译器检查了变量是否已经测试过一次，如果测试结果为真，那么翻译器会认为这是变量已定义？

如果是这样的话，那么isset和empty呢？无论评估是真是假，他们似乎都会给我通知。

```
define('USER_AUTH', isset($_SESSION['username']) && isset($_SESSION['status']));
define('ACC_IS_PENDING', $_SESSION['status'] == '0'); 
```

和

```
define('USER_AUTH', empty($_SESSION['username']) && empty($_SESSION['status']));
define('ACC_IS_PENDING', $_SESSION['status'] == '0'); 
```

为冗长的问题道歉。这似乎微不足道，但如果不需要通知就可以快速定义常量！对于此类琐碎任务的任何解释或更好的解决方案将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T12:14:46.263

PHP 抱怨是因为数组中未定义索引“状态”。你需要写

```
!isset($_SESSION['status']) || empty($_SESSION['status'] 
```

当您按照所述“欺骗”代码时，PHP 将永远不会尝试访问不存在的数组索引，这就是您没有得到任何通知的原因。

在第四个代码示例（使用 isset）中，您仍在访问第二行代码中不存在的数组索引，所以我怀疑这就是为什么仍然有通知的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T12:15:13.977

a) 如果您想使用 $_SESSION['status']，您必须首先检查变量是否为空（有关详细信息，请参阅[http://www.php.net/manual/fr/function.isset.php](http://www.php.net/manual/fr/function.isset.php) ) :

```
if (isset($_SESSION['status'])) {
     // here the value exists and can be used
     Do something...
} else {
     // here the value does not exist and cannot be used
} 
```

b) 我相信

```
empty($_SESSION['username']) && !empty($_SESSION['status']) 
```

不是恒定的：它从一个运行到另一个变化。您可能想使用

```
$user_is_logged = empty($_SESSION['username']) && !empty($_SESSION['status']); 
```

并使用变量 $user_is_logged 而不是常量。请参阅本节[http://www.php.net/manual/fr/language.constants.php](http://www.php.net/manual/fr/language.constants.php)了解有关常量的信息。

# android - Android应用程序开发：更改设备密码？

> ID：11720924
> 
> 赞同：0
> 
> 时间：2012-07-30T11:47:53.650
> 
> 标签：android

有没有办法在应用程序中更改安卓设备的密码或添加密码。

我正在制作的应用程序是设备管理员。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T12:07:20.583

不可以。您可以提示用户提供密码，并且可以对有效密码的构成进行限制（例如，最小长度）。但是，您不能直接自己添加或更改密码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T19:35:09.227

这是完全可能的。在您的应用被授予设备管理员权限后，您可以执行：

```
mDPM.resetPassword("<new code>", 0);
mDPM.lockNow(); 
```

mDPM 是您的`DevicePolicyManager`对象。

# c# - ASP.NET 在浏览器中显示默认页面的完整 URL

> ID：11720925
> 
> 赞同：1
> 
> 时间：2012-07-30T11:47:54.180
> 
> 标签：c#, asp.net, iis, default-document

当我在 IIS 中设置默认文档以显示我的默认页面 ( `default.aspx`) 并使用我实现的主机头访问它时；它只显示主机头地址，而不是浏览器中的完整页面地址。

例如：

主机头：`http://mysite` IIS 默认文档：`/PageContainer/default.aspx`

当我`http://mysite`通过浏览器进入时；它会打开`http://mysite/PageContainer/default.aspx`但仅`http://mysite`在浏览器地址栏中显示地址。

如何更改它以`http://mysite/PageContainer/default.aspx`在浏览器地址栏中显示完整的 url。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T12:06:26.590

您可以为

```
http://mysite --> http://mysite/PageContainer/default.aspx 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T13:09:54.733

您可以使用以下代码在根目录（即`http://mysite/default.aspx`）中添加一个 default.aspx 页面，并使“default.aspx”成为默认文档：

```
<html>
<head>
<meta http-equiv="refresh" content="0;URL=/PageContainer/default.aspx" />
</head>
<body></body>
</html> 
```

# jquery - 在 JQuery 中选择元素

> ID：11720930
> 
> 赞同：0
> 
> 时间：2012-07-30T11:48:22.520
> 
> 标签：jquery

嗨，你能帮我在这种情况下如何提取“Men”文本吗？

```
<div class="comwebstore-LeftNavBrowse-2">
    <ul class="linkList browseLadder">
       <li>
           <a href="example.com"> Men </a>
       </li>
       <ul class="linkList browseLadder">
         <li>
            <a href="example.com"> Full Logo T-Shirt </a>
         </li>
         <li>
            <a href="example.com"> Short Logo T-Shirt </a>
         </li>
         <li>
            <a href="example.com"> Grey Hoodie 1 Full Logo </a>
         </li>
         <li>
           <a href="example.com"> Grey Hoodie 2 Short Logo </a>
         </li>
         <li>
            <a href="example.com"> Women </a>
         </li>
         <li>
            <a href="example.com"> Accessories </a>
         </li>
       </ul>
     </ul>
  </div>
</div> 
```

我试过了

> jQuery('#mainContentWrapper #leftColumn #A #A-1 .com-amazon-webstore-LeftNavBrowse-2 > :first-child a').text();

但没有成功。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T11:51:44.693

从您的html：

```
alert($('.linkList > li:first a').text()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T11:57:05.517

检查你的选择器......`<div class="comwebstore-LeftNavBrowse-2">`你有`comwebstore-LeftNavBrowse-2`课并且你正在使用`.com-amazon-webstore-LeftNavBrowse-2`

请不要使用这么长的选择器。这会降低你的选择器性能，而且看起来很丑。只需查看**Alex Ball**的建议即可。

```
jQuery('#mainContentWrapper #leftColumn #A #A-1 .comwebstore-LeftNavBrowse-2 > :first-child a').text(); 
```

# objective-c - 具有共享 UIAccelerometer 的多个实例不适用于所有实例

> ID：11720934
> 
> 赞同：0
> 
> 时间：2012-07-30T11:48:50.123
> 
> 标签：objective-c, xcode, delegates, uiimageview, uiaccelerometer

我有一个自定义 UIImageView 类，我想用它来控制我的 UIImageViews。

在自定义初始化方法中，我有以下关于 UIAccelerometer 的内容：

```
 UIAccelerometer *accelerometer = [UIAccelerometer sharedAccelerometer];
    accelerometer.updateInterval = 0.5f;
    accelerometer.delegate = self; 
```

我的问题是我有这个类的多个实例，加速度计只将信息发送到我创建的最后一个实例。我知道这样做的原因是因为委托被设置为最后一个实例，所以我的问题是：

有没有办法将委托设置为所有这些实例，以便它们都收到“didAccelerate”调用？如果是这样，那么我将如何去做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T11:51:42.873

免责声明：您尝试使用的方法已被弃用。改为使用`CMMotionManager`。然而：

设置一个委托（它应该是一个单独的类），然后使用 NSNotificationCenter 将信息分发给其他侦听器。例子：

```
@interface SharedAccelerometerListener: NSObject <UIAccelerometerDelegate>
@end

@implementation SharedAccelerometerListener

- (id)init
{
    if ((self = [super init]))
    {
        [UIAccelerometer sharedAccelerometer].delegate = self;
        [UIAccelerometer sharedAccelerometer].updateInterval = 0.05f;
    }
}

- (void)accelerometer:(UIAccelerometer *)acc didAccelerate:(UIAcceleration *)acceleration
{
    NSDictionary *info = [NSDictionary dictionaryWithObject:acceleration forKey:@"acceleration"];
    [[NSNotificationCenter defaultCenter] postNotificationName:@"AccelerometerDidAccelerate" sender:nil userInfo:info];
}

@end 
```

然后在您的侦听器类中：

```
id accelerationListener = [[SharedAccelerometerListener alloc] init];

[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(didAccelerate:) name:@"AccelerometerDidAccelerate" object:nil];

- (void)didAccelerate:(NSNotification *)notif
{
    UIAcceleration *acc = [[notif userInfo] objectForKey:@"acceleration"];
    // do whatever you want with the acceleration
} 
```

# android - 已安装 Android SDK 和 ADT，但命令提示不起作用

> ID：11720936
> 
> 赞同：1
> 
> 时间：2012-07-30T11:48:55.617
> 
> 标签：android, sdk, command-prompt, samsung-mobile

我已经下载了该软件并为 Android SDK 安装了它然后我将此命令添加到命令提示符中`C:\Program Files\Android\android-sdk\platform-tools`，它不会找到路径。

我不知道该怎么做，我不知道平台工具在我的电脑上的什么位置，我就快到了，但完全卡住了。

我也尝试了大多数这些命令，但它们也不起作用

[如何使用 Android ADB 命令行工具](http://www.londatiga.net/it/how-to-use-android-adb-command-line-tool/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-26T21:53:39.287

要在运行时设置环境变量，您可以使用以下步骤。

```
set ANDROID_HOME=C:\<installation location>\android-sdk-windows
set PATH=%PATH%;%ANDROID_HOME%\tools;%ANDROID_HOME%\platform-tools 
```

# javascript - 使用按钮使项目可见

> ID：11720937
> 
> 赞同：2
> 
> 时间：2012-07-30T11:48:57.370
> 
> 标签：javascript, jquery, list, preventdefault

我有这个 javascript 代码：

```
function newsOverview() {
    $(".list-news li:gt(3)").hide();
    $(".box-news .btn-1").on('click', function(e){
        e.preventDefault;
        $(".list-news li:visible:last").nextAll(":lt(4)").fadeIn(600);
    });
}; 
```

我有一个包含 li 项目的大清单。该脚本每次显示 4 li 项目。当您单击 btn-1 按钮时。但现在我对这个脚本有疑问。

*   为什么 e.preventDefault 不起作用？当我单击按钮时。我滚动回到页面顶部。为什么这不起作用？
*   还有，有没有可能。当所有项目都可见时。那个按钮消失了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T11:56:11.120

1) preventDefault 不起作用，因为它是一个函数。它应该如下所示：

```
e.preventDefault(); 
```

2）要查看是否所有项目都可见，请尝试使用以下代码：

```
if ($(".list-news li:hidden").lehgth == 0) {
   $(".box-news .btn-1").hide();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T11:54:12.583

> 为什么 e.preventDefault 不起作用？

为了实际*调用* `preventDefault`，您缺少括号：

```
function newsOverview() {
    $(".list-news li:gt(3)").hide();
    $(".box-news .btn-1").on('click', function(e){
        e.preventDefault(); // don't forget those
        $(".list-news li:visible:last").nextAll(":lt(4)").fadeIn(600);
    });
}; 
```

> 还有，有没有可能。当所有项目都可见时。那个按钮消失了。

我的 jQuery 有点生疏，但这样的东西应该可以工作：

```
function newsOverview() {
    $(".list-news li:gt(3)").hide();
    $(".box-news .btn-1").on('click', function(e){
        e.preventDefault();
        if($(".list-news li:hidden").length === 0)
            $(this).hide();
        else
            $(".list-news li:visible:last").nextAll(":lt(4)").fadeIn(600);
    });
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T11:56:25.763

[e.preventdefault(); 不工作](https://stackoverflow.com/questions/3362481/e-preventdefault-not-working)

而且，你总是可以使用“return false;” 在按钮上，我想。

# wcf - 如何使用 RestSharp for windows phone 7.5 实现身份验证

> ID：11720940
> 
> 赞同：1
> 
> 时间：2012-07-30T11:49:02.630
> 
> 标签：wcf, windows-phone-7.1, oauth-2.0, restsharp

我需要使用 Google、Facebook 帐户登录应用程序。我刚刚看到了 RestSharp，但我找不到如何为 WP7.5 实现它。我在 github 和 restsharp.org 上看到了一些可用的示例，但我仍然没有得到它的确切用法。可以请帮助我了解restsharp以及如何为windows phone 7.5实现它...因为我是这个概念的新手...

谢谢

# php - 如何使 php 标头永不过期？

> ID：11720944
> 
> 赞同：0
> 
> 时间：2012-07-30T11:49:13.773
> 
> 标签：php

我想使用以下方法使 PHP 标头永不过期：

```
header("Expires: ") 
```

是否可以？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T11:50:08.720

```
$now = time( );
$then = gmstrftime("%a, %d %b %Y %H:%M:%S GMT", $now + 365*86440);
header("Expires: $then"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T11:56:33.760

从[文档](http://www.faqs.org/rfcs/rfc2616.html)第 14.21 节：

要将响应标记为“永不过期”，源服务器会在响应发送后大约一年发送 Expires 日期。HTTP/1.1 服务器不应该在未来一年以上发送 Expires 日期。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-15T18:18:13.693

PHP 5 版本

```
$expires = new DateTime("now + 11 months");
header("Expires:" . $expires->format(DateTime::RFC1123)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-30T11:49:54.447

不，这是不可能的。只需在遥远的将来设置一个日期时间（一两年就足够了）。

# windows - 无法从命令行运行 git

> ID：11720945
> 
> 赞同：18
> 
> 时间：2012-07-30T11:49:21.570
> 
> 标签：windows, git, symfony

我现在已经为 Windows 安装了 GIT。当我将它运行到我的 symfony 项目中以通过以下方式重新安装供应商时

```
php bin/vendors install --reinstall 
```

然后我收到一个错误

```
git' is not recognized as internal or external command 
```

我也将环境变量设置为

```
c:/programme files/git/cmd 
```

现在我该怎么办？我也尝试过环境变量

```
c:/program files/git/bin 
```

但我遇到了同样的错误

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-30T12:11:59.443

两种可能的解决方案：

*   我的`PATH`有反斜杠而不是正斜杠。
*   你的第一行包含一个错字，应该是`c:\program files\git\cmd`

还有一个：如果您的路径包含空格，请将其括在引号中：

```
set PATH=%PATH%;"C:\Program Files\Git\cmd" 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-01-29T22:53:12.367

在安装Git的过程中，在路径环境设置中选择了以下一项。即使我遇到了同样的问题，git 没有在我的正常命令行上执行，但我只是使用“从 Windows 命令提示符运行 Git”设置重新安装了它

![在此处输入图像描述](../Images/2abc531be2d11e7559b6551aee50b490.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-03-02T03:25:27.270

只需打开 cmd 并运行以下命令：

```
set PATH=%PATH%;"C:\Program Files\Git\cmd" 
```

# performance - 忽略lua中代码的最有效方法是什么？

> ID：11720948
> 
> 赞同：3
> 
> 时间：2012-07-30T11:49:33.283
> 
> 标签：performance, lua

我有一大段我希望能够（有选择地）忽略的 lua 代码。我没有不读它的选项，有时我希望它被处理，有时不是，所以我不能把它注释掉（也就是说，有一大堆代码块，我要么可以选择不阅读*或*全部阅读*）*。我想出了两种方法来实现它（可能还有更多——我是个初学者）：要么将代码包含在一个函数中，然后调用或不调用该函数（一旦我确定我是通过了我将调用该函数的点，我可以将其设置`nil`为释放内存）或将代码包含在`if ... end`堵塞。前者有一些优势，因为有几个这样的块，并且使用前一种方法可以使一个块更容易加载另一个块，即使主程序没有请求它，但后者似乎更有效。但是，了解不多，不知道效率节省是否值得。

那么有多少效率是：

```
if false then
    -- a few hundred lines
end 
```

比

```
throwaway = function ()
    -- a few hundred lines
end
throwaway = nil  -- to ensure that both methods leave me in the same state after garbage collection 
```

?

如果它很大程度上取决于 lua 实现，那么“几百行”需要多大才能可靠地发现差异，以及它应该包括什么样的东西才能最好地测试（块的主要用途是定义一个加载可能有用的功能）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T16:44:16.973

Lua 不够聪明，无法转储函数的代码，因此您不会节省任何内存。

就速度而言，您谈论的是不同的纳秒，每次程序执行都会发生*一次。*[担心这一点会损害*您的*效率，这与实际性能几乎无关。](http://c2.com/cgi/wiki?PrematureOptimization)编写您认为最清楚地表达您的*意图*的代码，而不是试图变得[聪明](http://c2.com/cgi/wiki?DoSimpleThings)。如果您遇到性能问题，那么距离这个决定还有一百万英里。

如果您想节省内存，这在移动平台上是可以理解的，您可以将条件代码放在它自己的模块中，并且根本不需要加载它（如果您的框架支持它；例如 MOAI 支持，Corona 不支持） .

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-21T14:36:08.390

如果确实***有很多***未使用的代码，您可以将其定义为字符串的集合，并`loadstring()`在需要时使用它。将函数存储为字符串将减少初始编译时间，但是在大多数函数中，字符串表示可能比其编译形式占用更多内存，并且编译时保存的内容在几千行之前可能并不重要......只是说。

如果将此代码放在一个表中，则可以通过元表透明地编译它，以便对*重复*调用的性能影响最小。

示例代码

```
local code_uncompiled = {
   f = [=[
      local x, y = ...;
      return x+y;
   ]=]
}
code = setmetatable({}, {
   __index = function(self, k)
      self[k] = assert(loadstring(code_uncompiled[k]));
      return self[k];
   end
});

local ff = code.f; -- code of x gets compiled here
ff = code.f; -- no compilation here
for i=1, 1000 do
   print( ff(2*i, -i) ); -- no compilation here either
   print( code.f(2*i, -i) ); -- no compile either, but table access (slower)
end 
```

它的美妙之处在于它可以根据需要进行编译，您不必再浪费其他想法，就像将函数存储在表中一样，并且具有很大的灵活性。

此解决方案的另一个优点是，当动态加载的代码量失控时，您可以透明地更改它以通过元表的 __index 函数按需从外部文件加载代码。此外，您可以通过使用“真实”函数填充“代码”表来混合编译和未编译的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T16:43:21.887

首先尝试使代码对您更易读的那个。如果它在您的目标机器上运行得足够快，请使用它。

如果它的运行速度不够快，请尝试另一个。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-03-30T11:34:31.007

lua 可以通过以下方式忽略多行：

```
function dostuff()
   blabla
   faaaaa

   --[[
   ignore this
   and this
   maybe this
   this as well
   ]]--
end 
```

# sql - 哪些代码在数据库中有对应关系

> ID：11720950
> 
> 赞同：1
> 
> 时间：2012-07-30T11:49:37.123
> 
> 标签：sql, database, oracle, csv, plsql

我面临着必须查看具有数百万条记录的数据库的任务，一组大约 1500 条记录中的哪些代码具有相应的记录，其中哪些存在于数据库中。例如，我在 csv 文件中有 1500 个 ID。我想知道数据库中存在哪些 ID，因此是正确的，哪些不存在。

没有“...”有没有更好的方法`WHERE id IN (1, 2, 3, ..., 1500);`？有问题的数据库/语言是 ORACLE PL/SQL。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T11:56:10.443

在您的 CSV 文件上构建一个外部表。这些都是非常简洁的东西，允许我们在 SQL 中查询 OS 文件的内容。 [了解更多](http://docs.oracle.com/cd/E11882_01/server.112/e22490/et_concepts.htm#i1009391)。

然后发出一个查询就很简单了：

```
select csv.id
       , case ( when tgt.id is null then 'invalid' else 'valid') end as valid_id
from your_external_tab csv
       left join target_table tgt on (csv.id = tgt.id) 
```

* * *

> “从性能的角度来看，CSV 表并不理想”

性能是一个上下文问题。在这种情况下，这取决于 CSV 中数据的更改频率以及我们需要查询它的频率。如果文件每天生成一次，并且我们只需要在交付后检查值，那么外部表是最有效的解决方案。但是如果这个数据集是一个需要经常查询的永久存储库，那么写入堆表的开销显然是合理的。

对我来说，一个由一堆 ID 组成的 CSV 文件听起来像瞬态数据，因此适合外部表的用例。但是 OP 可能有他们没有提到的其他要求。

* * *

这是一种不需要创建任何永久数据库对象的替代方法。因此，它不太优雅，并且可能会表现得更差。

它使用 UTL_FILE 费力地读取 CSV 文件并填充基于 SYSTEM.NUMBER_TBL_TYPE 的集合，这是一个预定义的集合（NUMBER 的嵌套表），应该在您的 Oracle 数据库中可用。

```
declare
    ids system.number_tbl_type;
    fh utl_file.file_handle;
    idx pls_integer := 0;
    n pls_integer;
 begin
    fh := utl_file.fopen('your_data_directory', 'your_data.csv', 'r');
    begin
        utl_file.get_line(fh, n);
        loop  
            idx := idx + 1;
            ids.extend();
            ids(idx) := n;
            utl_file.get_line(fh, n);
        end loop;
   exception
      when no_data_found then
          if utl_file.is_open(fh) then
             utl_file.fclose(fh);
          end if;
     when others then
          raise;
  end;
  for id_recs in  in  ( select csv.column_value 
              , case ( when tgt.id is null then 'invalid' else 'valid') end as valid_id
                from (select * from table(ids)) csv
            left join target_table tgt on (csv.column_value = tgt.id)
  ) loop
  dbms_output.put_line '(ID '||id_recs.column_value || ' is '||id_recs.valid_id);
  end loop;
end; 
```

注意：我没有测试过这段代码。原理是合理的，但细节可能需要调试；）

# jquery - 滚动到页面底部

> ID：11720951
> 
> 赞同：0
> 
> 时间：2012-07-30T11:49:41.610
> 
> 标签：jquery

我面临的问题是，我的调查中有一组问题。如果他不是会员，第一个问题要求用户单击复选框。如果用户选中该复选框，则光标应自动滚动到页面底部，跳过其后的所有问题。

我使用 jquery 尝试了不同的功能，但没有一个起作用。这是我之前尝试过的代码（PS也没有这个工作）

```
 <?php
    if(!stristr($_SERVER['PHP_SELF'],"printSummary")) {
        require_once("../lib/include/common.inc.php");
    } else {
        require_once("../../lib/include/common.inc.php");
    }
    ob_start();

    $node_id = $parentnode?$parentnode:getDataFromSession("data,node_id");
    $node_name = get_node_name( $node_id,$_SESSION["survey"],$_SESSION['idLink']);
    $surveyForText = getText2("This survey is for:")." ".$node_name;

    if(strlen($node_name)>0) {
        echo "<script type='text/javascript'>";
        echo "$(document).ready(function(){";
        echo "$('.generalErrorMsg').first().addClass('generalErrorMsgWithMargin').text(\"$surveyForText\");";
        echo "});";
        echo "</script>";
    }
 //code that I am talking about starts here
    $currentPageNum = currentPageNumber();
    if($currentPageNum==4)
    {
        echo "<script type=\"text/javascript\">
        $(document).ready(function(){
            $('input[type=checkbox]').click(function() {
                alert('here');
                setTimeout(function() { 
                    window.scrollTo(0, 1) },100);
            }); 

            //window.scrollBy(100,100); // horizontal and vertical scroll increments
            //scrolldelay = setTimeout('pageScroll()',80); // scrolls every 80 milliseconds
        });";
        echo "</script>";
    }
    ?> 
```

请帮助我解决问题的代码。在此先感谢-Jathin

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T11:56:38.000

你应该试试

```
scrollTop. 
```

`scrollTop`是 的一个属性`DOM Object`。

但是在 jQuery 中有一个函数 scrollTop() ，所以你可以在 jquery 中使用。

喜欢`$(window).scrollTop(100);`

```
$('input[type=checkbox]').click(function() {
   alert('here');
   setTimeout(function() { 
      window.scrollTo(0, 1) },100);
}); 
```

改成

```
$('input[type=checkbox]').click(function() {
   //alert('here');
   setTimeout(function() { 
      $(window).scrollTop(100);},100);
}); 
```

如果你有一个可以滚动的元素，你可以尝试

```
$(window.)scrollTop($('#elemenet-id').offset().top); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T12:01:48.847

由于 php、html 和 javascript 的混合，您的代码很难阅读，您最好只显示最终的 html+javascript。无论如何，如果您需要将窗口滚动到文档的页脚 -`$(document).scrollTop($(document).height())`

# ios - OpenGL ES 到 iOS 中的视频（使用 iOS 5 纹理缓存渲染到纹理）

> ID：11720954
> 
> 赞同：4
> 
> 时间：2012-07-30T11:49:51.853
> 
> 标签：ios, opengl-es-2.0, fbo, glreadpixels

你知道 Apple 的带有[CameraRipple](http://developer.apple.com/library/ios/#samplecode/GLCameraRipple/Introduction/Intro.html)效果的示例代码吗？好吧，在openGL完成了水的所有凉爽效果之后，我正试图将相机输出记录在一个文件中。

我已经用 glReadPixels 完成了，我在其中读取了 void * buffer 中的所有像素，创建 CVPixelBufferRef 并将其附加到 AVAssetWriterInputPixelBufferAdaptor，但它太慢了，因为 readPixels 需要大量时间。我发现使用 FBO 和纹理现金你可以做同样的事情，但速度更快。这是我在 Apple 使用的 drawInRect 方法中的代码：

```
CVReturn err = CVOpenGLESTextureCacheCreate(kCFAllocatorDefault, NULL, (__bridge void *)_context, NULL, &coreVideoTextureCashe);
if (err) 
{
    NSAssert(NO, @"Error at CVOpenGLESTextureCacheCreate %d");
}

CFDictionaryRef empty; // empty value for attr value.
CFMutableDictionaryRef attrs2;
empty = CFDictionaryCreate(kCFAllocatorDefault, // our empty IOSurface properties dictionary
                           NULL,
                           NULL,
                           0,
                           &kCFTypeDictionaryKeyCallBacks,
                           &kCFTypeDictionaryValueCallBacks);
attrs2 = CFDictionaryCreateMutable(kCFAllocatorDefault,
                                  1,
                                  &kCFTypeDictionaryKeyCallBacks,
                                  &kCFTypeDictionaryValueCallBacks);

CFDictionarySetValue(attrs2,
                     kCVPixelBufferIOSurfacePropertiesKey,
                     empty);

//CVPixelBufferPoolCreatePixelBuffer (NULL, [assetWriterPixelBufferInput pixelBufferPool], &renderTarget);
CVPixelBufferRef pixiel_bufer4e = NULL;

CVPixelBufferCreate(kCFAllocatorDefault, 
                    (int)_screenWidth, 
                    (int)_screenHeight,
                    kCVPixelFormatType_32BGRA,
                    attrs2,
                    &pixiel_bufer4e);
CVOpenGLESTextureRef renderTexture;
CVOpenGLESTextureCacheCreateTextureFromImage (kCFAllocatorDefault,
                                              coreVideoTextureCashe, pixiel_bufer4e,
                                              NULL, // texture attributes
                                              GL_TEXTURE_2D,
                                              GL_RGBA, // opengl format
                                              (int)_screenWidth, 
                                              (int)_screenHeight,
                                              GL_BGRA, // native iOS format
                                              GL_UNSIGNED_BYTE,
                                              0,
                                              &renderTexture);
CFRelease(attrs2);
CFRelease(empty);
glBindTexture(CVOpenGLESTextureGetTarget(renderTexture), CVOpenGLESTextureGetName(renderTexture));
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);

glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_2D, CVOpenGLESTextureGetName(renderTexture), 0);

CVPixelBufferLockBaseAddress(pixiel_bufer4e, 0);

if([pixelAdapter appendPixelBuffer:pixiel_bufer4e withPresentationTime:currentTime]) {
                float result = currentTime.value;
            NSLog(@"\n\n\4eta danni i current time e : %f \n\n",result);
                currentTime = CMTimeAdd(currentTime, frameLength);
        }

CVPixelBufferUnlockBaseAddress(pixiel_bufer4e, 0);
CVPixelBufferRelease(pixiel_bufer4e);
CFRelease(renderTexture);
CFRelease(coreVideoTextureCashe); 
```

它录制了一段视频，而且速度很快，但视频只是黑色的，我认为 textureCashRef 不是正确的，还是我填错了。

作为更新，这是我尝试过的另一种方式。我肯定错过了什么。在 viewDidLoad 中，设置 openGL 上下文后，我执行以下操作：

```
CVOpenGLESTextureCacheCreate(kCFAllocatorDefault, NULL, (__bridge   void *)_context, NULL, &coreVideoTextureCashe);

    if (err) 
    {
        NSAssert(NO, @"Error at CVOpenGLESTextureCacheCreate %d");
    }

    //creats the pixel buffer

    pixel_buffer = NULL;
    CVPixelBufferPoolCreatePixelBuffer (NULL, [pixelAdapter pixelBufferPool], &pixel_buffer);

    CVOpenGLESTextureRef renderTexture;
    CVOpenGLESTextureCacheCreateTextureFromImage (kCFAllocatorDefault, coreVideoTextureCashe, pixel_buffer,
                                                  NULL, // texture attributes
                                                  GL_TEXTURE_2D,
                                                  GL_RGBA, //  opengl format
                                                   (int)screenWidth,
                                                  (int)screenHeight,
                                                  GL_BGRA, // native iOS format
                                                  GL_UNSIGNED_BYTE,
                                                  0,
                                                  &renderTexture);

    glBindTexture(CVOpenGLESTextureGetTarget(renderTexture), CVOpenGLESTextureGetName(renderTexture));
    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);

    glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_2D, CVOpenGLESTextureGetName(renderTexture), 0); 
```

然后在 drawInRect: 我这样做：

```
 if(isRecording&&writerInput.readyForMoreMediaData) {
    CVPixelBufferLockBaseAddress(pixel_buffer, 0);

    if([pixelAdapter appendPixelBuffer:pixel_buffer withPresentationTime:currentTime]) {
        currentTime = CMTimeAdd(currentTime, frameLength);
    }
    CVPixelBufferLockBaseAddress(pixel_buffer, 0);
    CVPixelBufferRelease(pixel_buffer);
} 
```

然而它在渲染纹理上因 bad_acsess 而崩溃，它不是零，而是 0x000000001。

***更新***

使用下面的代码，我实际上设法提取了视频文件，但有一些绿色和红色闪烁。我使用 BGRA pixelFormatType。

这里我创建了纹理缓存：

```
CVReturn err2 = CVOpenGLESTextureCacheCreate(kCFAllocatorDefault, NULL, (__bridge void *)_context, NULL, &coreVideoTextureCashe);
if (err2) 
{
    NSLog(@"Error at CVOpenGLESTextureCacheCreate %d", err);
    return;
} 
```

然后在 drawInRect 我称之为：

```
if(isRecording&&writerInput.readyForMoreMediaData) {
    [self cleanUpTextures];

    CFDictionaryRef empty; // empty value for attr value.
    CFMutableDictionaryRef attrs2;
    empty = CFDictionaryCreate(kCFAllocatorDefault, // our empty IOSurface properties dictionary
                           NULL,
                           NULL,
                           0,
                           &kCFTypeDictionaryKeyCallBacks,
                           &kCFTypeDictionaryValueCallBacks);
    attrs2 = CFDictionaryCreateMutable(kCFAllocatorDefault,
                                   1,
                                   &kCFTypeDictionaryKeyCallBacks,
                                   &kCFTypeDictionaryValueCallBacks);

    CFDictionarySetValue(attrs2,
                     kCVPixelBufferIOSurfacePropertiesKey,
                     empty);

//CVPixelBufferPoolCreatePixelBuffer (NULL, [assetWriterPixelBufferInput pixelBufferPool], &renderTarget);
    CVPixelBufferRef pixiel_bufer4e = NULL;

    CVPixelBufferCreate(kCFAllocatorDefault, 
                    (int)_screenWidth, 
                    (int)_screenHeight,
                    kCVPixelFormatType_32BGRA,
                    attrs2,
                    &pixiel_bufer4e);
    CVOpenGLESTextureRef renderTexture;
    CVOpenGLESTextureCacheCreateTextureFromImage (kCFAllocatorDefault,
                                              coreVideoTextureCashe, pixiel_bufer4e,
                                              NULL, // texture attributes
                                              GL_TEXTURE_2D,
                                              GL_RGBA, // opengl format
                                              (int)_screenWidth, 
                                              (int)_screenHeight,
                                              GL_BGRA, // native iOS format
                                              GL_UNSIGNED_BYTE,
                                              0,
                                              &renderTexture);
    CFRelease(attrs2);
    CFRelease(empty);
    glBindTexture(CVOpenGLESTextureGetTarget(renderTexture), CVOpenGLESTextureGetName(renderTexture));
    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
    glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);

    glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_2D, CVOpenGLESTextureGetName(renderTexture), 0);

    CVPixelBufferLockBaseAddress(pixiel_bufer4e, 0);

    if([pixelAdapter appendPixelBuffer:pixiel_bufer4e withPresentationTime:currentTime]) {
        float result = currentTime.value;
        NSLog(@"\n\n\4eta danni i current time e : %f \n\n",result);
        currentTime = CMTimeAdd(currentTime, frameLength);
    }

    CVPixelBufferUnlockBaseAddress(pixiel_bufer4e, 0);
    CVPixelBufferRelease(pixiel_bufer4e);
    CFRelease(renderTexture);
  //  CFRelease(coreVideoTextureCashe);
} 
```

我知道我可以通过不在这里做所有这些事情来优化它，但我一直想让它工作。在 cleanUpTextures 中，我使用以下命令刷新 textureCache：

```
 CVOpenGLESTextureCacheFlush(coreVideoTextureCashe, 0); 
```

RGBA 的东西可能有问题，或者我不知道，但它似乎仍然有点错误的缓存。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-30T14:25:07.387

对于录制视频，这不是我会使用的方法。您正在为每个渲染帧创建一个新的像素缓冲区，这会很慢，而且您永远不会释放它，因此收到内存警告也就不足为奇了。

相反，请遵循我在[此答案](https://stackoverflow.com/a/9704392/19679)中描述的内容。我为缓存的纹理创建了一个像素缓冲区，将该纹理分配给我要渲染到的 FBO，然后在每一帧上使用 AVAssetWriter 的像素缓冲区输入附加该像素缓冲区。使用单个像素缓冲区比每帧重新创建一个像素缓冲区要快得多。您还希望保留与 FBO 的纹理目标关联的像素缓冲区，而不是在每一帧上关联它。

如果你想看看它在实践中是如何工作的，我将这个录制代码封装在我的开源[GPUImage框架中的 GPUImageMovieWriter 中。](https://github.com/BradLarson/GPUImage)正如我在上面链接的答案中指出的那样，以这种方式进行录制会导致极快的编码。

# php - 通过db中的form提交数据

> ID：11720955
> 
> 赞同：0
> 
> 时间：2012-07-30T11:49:52.473
> 
> 标签：php, database, forms

我的 php 脚本有问题，我需要通过该脚本将数据发送到 db。当我发送数据时，我得到空白屏幕，无论我写什么，选择和其他一切。

```
<?php
 $con = mysql_connect("localhost","root","");
 if (!$con)
   {
   die('Could not connect: ' . mysql_error());
   }
 mysql_select_db("gagq", $con);
 $result = mysql_query("SELECT * FROM gagq.user WHERE id=1;");
 echo $result;
 mysql_close($con);
 ?> 
```

基本上，我从中得到了空白屏幕。我通过表单访问文件，提交按钮。方法发布，文件的动作名称。现在，我已经在 id=1 上填充了数据库，但无论我写什么，在 php 上都没有任何效果。任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T12:16:51.373

当您处于测试阶段时，您应该包括：

```
/* Turns Error Reporting ON */
ini_set('display_errors',1); 
error_reporting(E_ALL); 
```

为了查看和纠正任何 php 错误，而不是到处添加模具检查。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-30T11:56:46.303

尝试这个

```
$result = mysql_query("SELECT * FROM gagq.user WHERE id=1;");

$array = mysql_fetch_assoc($result);

var_dump($array); 
```

# python - Python后端无法获取AJAX POST数据

> ID：11720961
> 
> 赞同：1
> 
> 时间：2012-07-30T11:50:03.003
> 
> 标签：python, ajax

我在 HTML 文件中有一个 JS 脚本，它收集用户提供的输入。使用输入的值，我形成一个字符串并通过 AJAX 调用将其发送到后端 Python 脚本：

```
$.ajax({
                type: "POST",
                url:  "/cgi-bin/backend.py",
  });              data: { 'form_data' : datastring} 
```

数据字符串的值如下：

```
age=9&country=US&buyer=Sample 
```

我在 FireBug 中看到发布的内容与以下内容相同：

```
form_data=age%3D9%26country%3DUS%26.... 
```

在我的 Python 后端代码中，我有一个检查来验证并获取 CGI 'form_data' 变量值：

```
 if self.cgi.has_key ("form_data"): 
```

但令人惊讶的是，代码没有输入这个“if”代码？此外，数据字符串中的值如何更改为“age%3D9%26”？如果我用 '&' 拆分 CGI 变量并用 '=' 解析拆分后的值，我能得到 CGI 名称值对吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T13:24:31.453

首先，您发送的数据正在被 urlencoded 编码，这就是它看起来如此的原因。

如果您在这个问题上需要更多帮助，您还需要发布您的 python 代码。除此之外，我建议您使用 Python Web 框架，例如 Flask 或 Bottle，而不是使用 cgi。

# objective-c - 按钮上的进度条

> ID：11720962
> 
> 赞同：0
> 
> 时间：2012-07-30T11:50:04.637
> 
> 标签：objective-c, ios, uibutton, progress-bar

我需要在按钮上方添加一个进度条。当我单击该按钮时，我需要在下载完成后停止该进度条。

我是目标 C 的新手。这可能吗？请给我一些示例代码或任何参考。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T12:48:16.240

使用 UIActivityIndi​​catorView

[教程：](http://www.edumobile.org/iphone/iphone-programming-tutorials/use-activityindicator-in-iphone/)

[移动 Tuts 教程](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk_uiactivityindicatorview_mbprogresshud/)

祝你好运

# php - 如何处理巨大的表格

> ID：11720964
> 
> 赞同：6
> 
> 时间：2012-07-30T11:50:11.510
> 
> 标签：php, mysql, forms

我有一个问题，您如何使用 php 和 mysql 处理来自表单的大量数据？

我有下一个：~ 50 个字段（输入文本、复选框、选择、文本区域）

之后，我需要将它保存到 MySQL 数据库中，并且我需要选择和过滤这些数据。你有实践吗？你在项目中使用什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-30T12:21:07.327

要以此类表单组织数据，您可以使用 HTML 表单数组。假设我们提交了大量关于某个房子的数据。我会将数据拆分为多个部分，例如：`general`、`geo`、`features`，`descriptions`并像这样组合表单。

```
<form>
  <fieldset>
    <legend>General information</legend>
    <input type="number" name="general[pax]"  value="" placeholder="Pax"  />
    <input type="number" name="general[pets]" value="" placeholder="Pets" />
    <input type="text"   name="general[type]" value="" placeholder="Type" />
  </fieldset>

  <fieldset>
    <legend>GEO data</legend>
    <input type="text" name="geo[longitude]" value="" placeholder="Longitude" />
    <input type="text" name="geo[latitude]"  value="" placeholder="Latitude" />
  </fieldset>

  <fieldset>
    <legend>Features</legend>
    <input type="checkbox" name="features[internet]" value="1" title="Internet" />
    <input type="checkbox" name="features[pool]" value="1" title="Pool" />
    <input type="checkbox" name="features[conditioner]" value="1" title="A/C" />
  </fieldset>
</form>
```

**更新：**使用`<fieldset>`和`<legend>`标签和一些`jQuery`（*未演示*）您可以轻松地显示/隐藏不同的组并根据您的喜好命名它们。

提交此类表单后，您将能够访问以下值：

```
$pets = (int)$_POST['general']['pets'];
$features = $_POST['features'];

$lon = (float)$_POST['geo']['longitude'];
$lat = (float)$_POST['geo']['latitude']; 
```

它将简化您的开发并减少控制/解析/枚举不同数据组的工作。

**更新：**或另一种可能的变体是

```
<input type="text" name="params[param1]" value="" />
<input type="text" name="params[param2]" value="" />
<input type="text" name="params[param3]" value="" /> 
```

同时在`PHP`

```
$params = $_POST['params']; // getting our isolated array of parameters
$names = array_keys($params); // extracting names from array
$values = array_values($params); // extracting values from array

$mysql->insert($names, $values) // and trying to implement desired solution 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T11:59:44.883

我会将信息分成几个部分，并且每个部分只显示/询问一个子集。每个部分都有一个保存/下一步按钮，数据在每个部分提交时保存。

# php - PHP 会话变量不适用于具有重写 URL 的页面

> ID：11720970
> 
> 赞同：0
> 
> 时间：2012-07-30T11:50:28.180
> 
> 标签：php, session

我有变量 $_SESSION['logged_in'] 在用户登录时设置并在注销过程中取消设置。我在所有页面上都包含一个导航菜单，其中包含以下代码：

```
<?php
    if(isset($_SESSION['logged_in'])){
    ?>
    <li><a href="http://absoluteurl/mylists.php">My Lists</a></li>
        <li><a href="http://absoluteurl/list/logout.php">Sign Out</a></li>
    <?php
    }
    else{
    ?>
        <li><a href="http://absoluteurl/list/register.php">Sign Up</a></li>
    <?php
    }
    ?> 
```

现在，在大多数页面上这工作正常 - 它根据用户是否登录显示正确的导航项。但是我有一些页面为 SEO 重写了 URL，在这些页面上它不起作用 - 它总是显示'注册”选项，就像用户未登录一样。

请注意，导航菜单位于一个单独的文件中，该文件使用“包含”包含在页面中。如果我在页面的其他地方回显会话变量，它工作正常 - 它只是在包含的文件中不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T11:52:44.773

你确定你[`session_start()`](http://php.net/manual/en/function.session-start.php)在包括菜单之前打电话吗？（当然，在 include 中进行该调用会是击球手）

# java - 通过 API 将 eBay 订单标记为托运人返回“GetSellerTransactionsResponseType 与 CompleteSaleResponseType 不兼容”错误

> ID：11720976
> 
> 赞同：1
> 
> 时间：2012-07-30T11:50:54.353
> 
> 标签：java, ebay-api

我需要将 eBay 订单标记为通过 eBay API 发货。

有一个方法：

```
public void ShippEbayOrder(EbayOrder ebayOrder)
{
    string Developer = WebConfigurationManager.AppSettings["EbayProductionDevID"];
    string Application = WebConfigurationManager.AppSettings["EbayProductionAppID"];
    string Certificate = WebConfigurationManager.AppSettings["EbayProductionCertID"];
    string eBayToken = WebConfigurationManager.AppSettings["EbayProductionUserToken"];
    string SoapApiServerUrl = WebConfigurationManager.AppSettings["EbayProductionApiServerUrl"];
    string SignInUrl = WebConfigurationManager.AppSettings["EbayProductionSignInUrl"];
    string EPSServerUrl = WebConfigurationManager.AppSettings["EbayProductionEPSUrl"];

    var ebayService = GetebayService();

    CompleteSaleRequestType completeSaleRequestType = new CompleteSaleRequestType();
    completeSaleRequestType.Version = version;

    if (ebayOrder.ContainsOrderType == EbayOrder.OrderType.Transaction)
    {
        completeSaleRequestType.TransactionID = ebayOrder.SourceOrderId;
        completeSaleRequestType.ItemID = ebayOrder.ItemsInfo[0].SourceItemId;
    }
    else
        completeSaleRequestType.OrderID = ebayOrder.SourceOrderId;

    completeSaleRequestType.Shipped = true;
    completeSaleRequestType.ShippedSpecified = true;
    CompleteSaleResponseType completeSaleResponseType = ebayService.CompleteSale(completeSaleRequestType); 
```

但是当代码调用 CompleteSale 方法时，它会抛出一个异常：

```
java.lang.ClassCastException: com.ebay.domain.apisoap.pres.service.hosting.soap.basecomponents.GetSellerTransactionsResponseType incompatible with com.ebay.domain.apisoap.pres.service.hosting.soap.basecomponents.CompleteSaleResponseType 
```

谁能帮我？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-31T11:27:19.993

正确的代码和方法应该是：

```
public void ShippEbayOrder(EbayOrder ebayOrder)
    {
        string Developer = WebConfigurationManager.AppSettings["EbayProductionDevID"];
        string Application = WebConfigurationManager.AppSettings["EbayProductionAppID"];
        string Certificate = WebConfigurationManager.AppSettings["EbayProductionCertID"];
        string eBayToken = WebConfigurationManager.AppSettings["EbayProductionUserToken"];
        string SoapApiServerUrl = WebConfigurationManager.AppSettings["EbayProductionApiServerUrl"];
        string SignInUrl = WebConfigurationManager.AppSettings["EbayProductionSignInUrl"];
        string EPSServerUrl = WebConfigurationManager.AppSettings["EbayProductionEPSUrl"];

        var ebayService = new eBayAPIInterfaceService();

        string version = "551";
        string requestUrl = SoapApiServerUrl + "?callname=CompleteSale&siteid=0"
                            + "&appid=" + Application + "&version=" + version + "&routing=default";
        ebayService.Url = requestUrl;
        ebayService.RequesterCredentials = new CustomSecurityHeaderType();
        ebayService.RequesterCredentials.Credentials = new UserIdPasswordType();
        ebayService.RequesterCredentials.Credentials.AppId = Application;
        ebayService.RequesterCredentials.Credentials.DevId = Developer;
        ebayService.RequesterCredentials.Credentials.AuthCert = Certificate;
        ebayService.RequesterCredentials.eBayAuthToken = eBayToken;

        CompleteSaleRequestType completeSaleRequestType = new CompleteSaleRequestType();
        completeSaleRequestType.Version = version;

        if (ebayOrder.ContainsOrderType == EbayOrder.OrderType.Transaction)
        {
            completeSaleRequestType.TransactionID = ebayOrder.SourceOrderId;
            completeSaleRequestType.ItemID = ebayOrder.ItemsInfo[0].SourceItemId;
        }
        else
            completeSaleRequestType.OrderID = ebayOrder.SourceOrderId;

        completeSaleRequestType.Shipped = true;
        completeSaleRequestType.ShippedSpecified = true;
        CompleteSaleResponseType completeSaleResponseType = ebayService.CompleteSale(completeSaleRequestType);
    } 
```

# asp.net-mvc - 使用 webapi 和 E-tag 渲染图像

> ID：11720979
> 
> 赞同：0
> 
> 时间：2012-07-30T11:51:13.177
> 
> 标签：asp.net-mvc, asp.net-web-api

如何将缓存与 HTML 中的 Image 标签之类的资源一起使用，它将通过 Web api 呈现，我想使用 E-tag 缓存来实现它。

如何对来自 Html 的 IMG 标签进行 E-tag 缓存。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T12:16:38.490

渲染的 HTML 是一种**组合资源**，因此不适合缓存。例如，即使您在 HTML 上有一个当前日期时间，它也不适合缓存。此外，一些资源具有特定于用户的要求，管理这些缓存的任务确实很痛苦。

对于简单的资源，您可以使用[CacheCow](https://github.com/aliostad/CacheCow)。该库正在开发中，v0.1 已经在 NuGet 上发布。更多关于它[的信息](http://byterot.blogspot.co.uk/2012/07/introducing-cachecow-http-caching.html)。

# android - 在 C2DM 消息上启动应用程序

> ID：11720980
> 
> 赞同：0
> 
> 时间：2012-07-30T11:51:13.337
> 
> 标签：android, android-c2dm, google-cloud-messaging

我有一个将 c2dm 消息发送到另一台设备的应用程序，我想知道在收到 c2dm 消息时如何启动某个活动或应用程序？我可以在 c2dm 消息中发送执行此操作的意图，还是有更好的方法来执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T07:05:37.273

将此代码放在您处理来自 C2DM 的传入消息的位置。

```
Intent myActivity = new Intent(context, MainActivity.class);
myActivity.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
context.startActivity(myActivity); 
```

请确保，您已在清单中声明您的活动。

# php - 使用 Implode 将 HTML 表单 $_POST 数组插入 MySQL

> ID：11720981
> 
> 赞同：1
> 
> 时间：2012-07-30T11:51:18.533
> 
> 标签：php, mysql, html, arrays, implode

我有以下 html 提交表单。该表单是一个 PHP_SELF，并将输入数据作为数组存储在 $_POST 中。

```
<html>
<body>
<form method="post" action="<?php echo htmlentities($PHP_SELF); ?>">
<fieldset>
<legend>Direct Bill Information:</legend>
DB #: <input type="int" name="db_num[]" /> DB Amount: <input type="int" name="db_amnt[]" /> </br>
DB #: <input type="int" name="db_num[]" /> DB Amount: <input type="int" name="db_amnt[]" /> </br>
DB #: <input type="int" name="db_num[]" /> DB Amount: <input type="int" name="db_amnt[]" /> </br>
DB #: <input type="int" name="db_num[]" /> DB Amount: <input type="int" name="db_amnt[]" /> </br>
DB #: <input type="int" name="db_num[]" /> DB Amount: <input type="int" name="db_amnt[]" /> </br>
DB #: <input type="int" name="db_num[]" /> DB Amount: <input type="int" name="db_amnt[]" /> </br>
DB #: <input type="int" name="db_num[]" /> DB Amount: <input type="int" name="db_amnt[]" /> </br>
DB #: <input type="int" name="db_num[]" /> DB Amount: <input type="int" name="db_amnt[]" /> </br>
DB #: <input type="int" name="db_num[]" /> DB Amount: <input type="int" name="db_amnt[]" /> </br>
DB #: <input type="int" name="db_num[]" /> DB Amount: <input type="int" name="db_amnt[]" />
</fieldset>
<input type="submit" value="submit" name="submit" />
</form>
</body>
</html> 
```

我有一个包含“db_num”和“db_amnt”字段的 MySQL 表，我想将数组中的所有输入数据插入到表中。我环顾四周，“内爆”似乎是最好的方法，但经过大量研究，我仍然无法让它发挥作用。整个 PHP 执行并没有错误地完成，但是，它没有显示两列的所有 10 行，它只显示两列的 2 行，所有条目的值 = 0。这是我正在使用的代码：

```
$sql2 = array();
foreach($_POST as key=>$value)
{
    if(key != 'submit')
    {   
        if($value != '')
        {   
            $sql2[] = '("'.mysql_real_escape_string($value['db_num']).'", "'.$value['db_amnt'].'")';
        }   
    }
}
mysql_query('INSERT INTO ' .$tablename_db. '(db_num, db_amnt) VALUES '.implode(',', $sql2)); 
```

我做了一些调试，并在 foreach 循环中回显了 $value，结果它只显示了三个术语；“数组”、“数组”和“提交”。进一步的检查表明，我可以从提交表单中获取要显示的值的唯一方法是，如果我通过 $_POST[db_num] 和 $_POST[db_amnt] 而不仅仅是 $_POST 执行 foreach 循环。我不确定它为什么会这样做以及如何解决它。这是我在 PHP 中的第一个代码，我正在学习。我真的很感激我能得到的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T12:00:40.963

试试这个

```
$db_num = $_POST['db_num'];
$db_amnt = $_POST['db_amnt'];

$items = array_combine($db_num,$db_amnt);

$pairs = array();

foreach($items as $key=>$value){
  $pairs[] = '('.intval($key).','.intval($value).')';
}

mysql_query('INSERT INTO ' .$tablename_db. '(db_num, db_amnt) VALUES '.implode(',',$pairs)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-02T05:32:50.783

提交后，您的 html 表单将生成以下`$_POST`数组（我将制作一些示例值）。

```
$_POST = [
    'db_num' => ['1', '2',  '3',  '4',  '5',  '6', '7', '8', '9', '10'],
    'db_amnt' => ['100', '125', '150', '175', '200', '225', '250', '275', '300', '325']
]; 
```

换句话说，通过holding`$_POST['db_num']`会有一路的holding 。同样，将持有，将持有，等等。即使用户没有填写其中一个字段，仍然会提交空字段，并且值将是一个零宽度的字符串（空字符串）。`$_POST['db_num'][0]``1``$_POST['db_num'][9]``10``$_POST['db_amnt'][0]``100``$_POST['db_amnt'][1]``125`

通过构建表单数据以提供如此干净且即时可用/可遍历的数据集，您为自己做了一项很棒的服务。

无需重组传入数据（尽管 voodoo 建议使用`array_combine()`）。如果需要任何额外的努力，您可能需要验证表单每一行中的“配对”值。例如，我假设您只想在给定行`db_num`和`db_amnt`给定行都非空的情况下存储数据——所以我会将该检查构建到我建议的代码段中。

```
$conn = new mysqli($server, $user, $password, $database);
$stmt = $conn->prepare("INSERT INTO {$tablename_db} (db_num, db_amnt) VALUES (?,?)");
$stmt->bind_param("ii", $num, $amnt);  // name the two variables which will pass integer values where the ?'s are located
foreach ($_POST['db_num'] as $index => $num) {
    $amnt = $_POST['db_amnt'][$index];
    if (strlen($num) && strlen($amnt)) {
        $stmt->execute();  // only INSERT qualifying rows
    }
} 
```

请注意，如果您的`db_amnt`值有小数位（它们是浮点数），那么您可以`i`将`bind_param()`调用中的`d`. 有些人更喜欢将所有值声明为`s`(string) 的最简单方法，但我喜欢在处理可预测的用户输入时控制它。

这是[迭代技术的演示](https://3v4l.org/cHdli)。

如果您要进行其他验证检查，只需将它们添加到我的`if`表达式中即可。

如果你想享受个人成功检查，你可以在下面写一些东西`execute()`来引用受影响的行。

重新使用准备好的语句是使用 mysqli 完成此过程*的两种方法之一。*另一个涉及构建一个包含所有行的包罗万象的 INSERT 查询，但这涉及更多的准备工作。这两种mysqli技术注入安全、稳定、高效。

最后，一些开发人员会说，在尝试访问子数组之前，您应该检查每个索引是否*确实存在于子数组中；*其他开发人员坚持认为，没有必要处理故意入侵您的 html 的用户生成的通知。我将把它留给各个研究人员来确定他们是否希望`isset()`在迭代之前和迭代期间进行调用。

# css - 我想在某个地方有一个固定的背景附件

> ID：11720983
> 
> 赞同：-1
> 
> 时间：2012-07-30T11:51:19.893
> 
> 标签：css, background, attachment

我是新来的，也是编码方面的新手。我希望将背景附件放置在一个非常确定的位置顶部，左上角，右上角等不会完成这项工作，我想要一个最准确的位置，例如。附件左上角要放置100200

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T11:59:20.340

如果你想完成它，`CSS`那就去做吧

```
div
{
    background-image:url('your-img-url');
    background-repeat:no-repeat;
    background-position:100px 200px;
    background-attachment:fixed;
} 
```

# c++ - 使用 opengl 和 opencv 加载纹理

> ID：11720985
> 
> 赞同：-3
> 
> 时间：2012-07-30T11:51:22.090
> 
> 标签：c++, opengl, opencv

我在尝试让我的纹理在某些几何图形上正确显示时遇到问题。基本上，我有一些描述人脸形状的三角形，然后有一个我必须用 opencv 加载的 png。我有以下代码

```
void Geometry::loadTex(const char* fileName){

    RenderUtils * u = new RenderUtils();

    IplImage* img = u->getImg(fileName);

    GLuint texture;

    // allocate a texture name
    glGenTextures( 1, &texture );

    // select our current texture
    glBindTexture( GL_TEXTURE_2D, texture );

    // select modulate to mix texture with color for shading
    glTexEnvf( GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_MODULATE );

    glPixelStorei(GL_UNPACK_ALIGNMENT, 1);

    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_REPEAT);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_REPEAT);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST);

    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, texWidth, texHeight, 0, GL_RGBA, GL_UNSIGNED_BYTE, img->imageData);

    glEnable(GL_TEXTURE_2D);
    glTexEnvi(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_REPLACE);

    //delete [] t;
}

IplImage* RenderUtils::getImg(const char *fileName){
    IplImage* img = 0;
    img = cvLoadImage(fileName, CV_LOAD_IMAGE_COLOR);
    if(!img) cout << "Couldn't load image " << fileName << endl;
    return img;
}

void Geometry::display(){

    glPushMatrix();
    glTranslatef(20.0f, 20.0f, -40.f);
    glRotatef(180.f, 0.0, 0.0, 1.0);
    for(int i = 0; i < numTris; i+=3){
        glBegin(GL_TRIANGLES);
        glTexCoord3f(mean[tri[i]] / texWidth, ((mean[meanLength/2 + tri[i]] - maximumMu) * -1) / texHeight, 0 ); 
        glVertex3f(mean[tri[i]], (mean[meanLength/2 + tri[i]] - maximumMu) * -1, 0);
        glTexCoord3f(mean[tri[i+1]] / texWidth, ((mean[meanLength/2 + tri[i+1]] - maximumMu) * -1) / texHeight, 0 );
        glVertex3f(mean[tri[i+1]], (mean[meanLength/2 + tri[i+1]] - maximumMu) * -1, 0);
        glTexCoord3f(mean[tri[i+2]] / texWidth, ((mean[meanLength/2 + tri[i+2]] - maximumMu) * -1) / texHeight, 0 );
        glVertex3f(mean[tri[i+2]], (mean[meanLength/2 + tri[i+2]] - maximumMu) * -1, 0);
        glEnd();
    }

    glPopMatrix();
    glutSwapBuffers();
    glFlush();

} 
```

所以先调用loadTex，它调用load getImg，然后从Glut调用display方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T12:29:39.267

你可能想看看[这个](http://www.barbato.us/2010/11/11/load-an-iplimage-into-an-opengl-texture-and-create-webcam-and-video-textures-using-the-blimageapi/)。它完全符合您的要求。

# asp.net - 截断饼图工具提示中的百分比

> ID：11720986
> 
> 赞同：1
> 
> 时间：2012-07-30T11:51:23.477
> 
> 标签：asp.net, pie-chart, fusioncharts

如何在融合饼图中设置计算百分比的精度。
我的饼图属性为

```
xmlData.Append("<chart showValues='1' formatNumber='1' showBorder='0' bgColor='FFFFFF' manageLabelOverflow='1' formatNumberScale='0'>");
  foreach (DataRow drRecord in dataResult.Tables[0].Rows)
                {
                    xmlData.Append("<set label='" + drRecord["Analyze"].ToString() + "' value='" + drRecord["BSLN_RVN"].ToString() + "' />");
                } 
```

我尝试添加 decimalPrecision = '1'。它将百分比值和图表中的值更改为单个小数精度。是否有任何属性可以将精度仅设置为饼图中计算的百分比..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T12:24:46.943

`toolText='text_here'`您可以在属性中提供原始值。

[FusionCharts 文档](http://docs.fusioncharts.com/charts/contents/?ChartSS/Column2D.html#Anchor20)中对此进行了很好的解释。

# java - ZeroMQ with android: NoClassDefFoundError: org.zeromq.ZMQ

> ID：11720987
> 
> 赞同：3
> 
> 时间：2012-07-30T11:51:23.523
> 
> 标签：java, android, noclassdeffounderror, zeromq

我在让 ZeroMQ 在 android 上工作时遇到问题。我将所有内容编译到我需要的 .jar 和 .so 文件中。然后我添加`zmq.jar`到`/libs/`和`libjzmq.so`to`/libs/armeabi/`并添加`.jar`到构建路径。( `right-click -> build path -> Configure build path ... -> Libraries -> Add JARs...`)

我还在“ `Order and Export`”选项卡中标记了要导出的 .jar，并将其移至列表顶部，但我仍然得到“ `java.lang.NoClassDefFoundError: org.zeromq.ZMQ`”。

我还能尝试什么？

顺便说一句，我正在使用 Eclipse。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T01:46:17.597

This is not a proper answer to your direct question as I was unable to solve the same problem. Recently I came across JeroMQ on the mailing list and am now using it in an internal application for instant messaging. It is working very well but requires ZeroMQ 3.x. ZeroMQ is very easy to install so that should not be a blocking issue.

Take a look at the GitHub repo here: [https://github.com/miniway/jeromq](https://github.com/miniway/jeromq)

If you are using Git, you can add that as a submodule or you can simply pull the code and add it into your main app. I would highly recommend the former, but I ended up doing the latter simply to get my test app up and running easier.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-27T09:17:00.140

我也遇到了问题！它对我有用的方式是在 Preferences->Java Build Path->Orders and Export 中设置包顺序。选中zmq.jar的复选框，然后点击'up'按钮使其在列表的第一行，然后错误愉快地消失了，希望这对你有帮助:)

# ios - Cocos2d 从另一层调用显示层

> ID：11720988
> 
> 赞同：1
> 
> 时间：2012-07-30T11:51:25.520
> 
> 标签：ios, cocos2d-iphone

我有一个名为的场景`AchievmentScene`，我在其中添加了一个名为`AchievmentsLayer`. 该层显示了一个`CCMenu`以选择器参数构造的成就列表，该方法调用`itemPressed`的方法是用户按下特定项目时调用的方法。

现在这个菜单是从一个包含标题、描述、解锁等信息的 xml 文件动态创建的。当`itemPressed`在单击项目后调用该方法时，我可以传递所选成就的名称和描述。

因此，如果有错误，请纠正以下想法。
我的目标是，当调用此方法以在列表顶部和屏幕中央显示具有适当 z 值的场景中的另一层时，显示标题和成就描述，并且一旦按下关闭按钮即可删除这一层。

那么当我说在场景中添加另一层时是否正确？而且该`itemPressed`方法在另一个层类中，是否可以从一个方法中`AchievmentsLayer`添加另一个层？

如果我在这里完全偏离轨道，任何建议将不胜感激。

下面是用户从列表中选择成就后我希望发生的基本示例图像。

[http://www.ezsite.gr/Layout_Design_Ideas.png](http://www.ezsite.gr/Layout_Design_Ideas.png)

任何建议、提示或澄清将不胜感激。如果您希望我详细说明以防我的问题不清楚，请告诉我。

提前致谢

# ruby-on-rails - 无法创建相同的 id 另一个模型

> ID：11720991
> 
> 赞同：0
> 
> 时间：2012-07-30T11:51:35.723
> 
> 标签：ruby-on-rails, ruby

我正在开发 Ruby 1.8.7 和 Rails 2.3.8。我正在尝试在操作中创建相同的 id 另一个模型。

```
def create
  id = params[:id]
  item_master = ItemMaster.new(params[:item_master)
  item_master.id = id
  item_master.save
  item_master_child = ItemMaster.new(params[:item_master_child])
  item_master_child.id = id
  item_master_child.save
  p item_master
  # => ItemMaster id: 654, style: 6, icon: 7
  p item_master_child
  # => ItemMasterChild id: 654, sub_style: 4, roll: 5
end 
```

看起来保存成功，但实际上 item_master 参数变成了 id: 654, style: 0, icon :0。除 id 之外的所有参数都变为 0。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T12:08:22.023

你可以这样做：

```
item_master_child.id = item_master.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T12:21:39.503

AFAIK Rails 不允许您将内容分配给数据库对象的 id 字段。如果您需要以某种方式连接它们，则添加具有“has_one”关系的外键，或belongs_to

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T02:08:18.623

问题是不能批量分配 ID 属性，因为它是受保护的属性。我已经这样解决了。

制作新的 ItemMaster 并仅设置 id 属性并保存。使用 post 参数创建新的 ItemMasterChild 并设置 id 属性并保存。然后，通过 post 属性更新 ItemMaster 属性，这工作正常。

更新属性应该在保存 item_master_child 之后。如果放在item_master.save之后，属性设置为0。不知道为什么....

```
def create
  id = params[:id]
  item_master = ItemMaster.new
  item_master.id = id
  item_master.save
  item_master_child = ItemMaster.new(params[:item_master_child])
  item_master_child.id = id
  item_master_child.save
  item_master.update_attributes(params[:item_master])
end 
```

感谢大家的支持和回复。

# jquery - jquery如何在可编辑的iframe中操作用户选择中的img属性

> ID：11720993
> 
> 赞同：0
> 
> 时间：2012-07-30T11:51:36.360
> 
> 标签：jquery

我需要在可编辑的 iframe 中使用 imgs 进行一些操作。我可以使用所有图像（例如，这里是代码）， `$(iframe).contents().find('img').attr('alt', 'new alt')`但我只需要用户选择中的 img。请帮帮我。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-30T11:58:03.753

当用户选择获取您的代码以向用户选择中的图像添加选择类时，使用

```
//inserted within your selection method 
$(iframe).contents().find('img').removeClass('selectionClass');
//this removes all previously selected images
//unless you have a deselection method in which case you don't need this,
//you would need to add $(this).removeClass('selectionClass') to the deselection

$(this).addClass('selectionClass');
//adds it to currently selected images 
```

然后在选择要编辑的图像时使用：

```
$(iframe).contents().find('img.selectedClass').attr('alt', 'new alt'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-30T12:01:10.477

为什么不给你的标签一个 id，然后使用 jQuery 调用它，然后设置 alt 属性。例如：

```
<img id="myImageId"/>

$("#myImageId").attr("alt","This is an image!"); 
```

# android - CheckboxPreference 未取消选中或变为 false

> ID：11720996
> 
> 赞同：1
> 
> 时间：2012-07-30T11:51:43.163
> 
> 标签：android, checkbox, preference

我目前正在做一个 android 安全应用程序，并且在某些条件已经完成后我试图取消选中 CheckboxPreferences 所以我试图通过这样做来取消选中复选框

活动：

```
 SharedPreferences sp = getSharedPreferences("isPhysicalTheftEnabled", MODE_WORLD_READABLE);
            SharedPreferences.Editor ed = sp.edit();
            ed.putBoolean("isPhysicalTheftEnabled", false);
            ed.commit(); 
```

首选项.xml

```
<CheckBoxPreference
            android:id="@+id/isPhysicalTheftEnabled"
            android:key="isPhysicalTheftEnabled"
            android:title="Enable Physical Theft Protection"
            android:summary="Select to enable the Physical Theft Protection"
            android:defaultValue="false"/>
<Preference android:key="physicaltheft" android:title="Set Physical Theft Protection Password" android:dependency="isPhysicalTheftEnabled"></Preference> 
```

但是即使在我执行 ed.commit(); 之后 CheckBoxPreference 也不会被取消选中。知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-17T16:33:08.337

你应该使用

```
 SharedPreferences sp = getDefaultSharedPreferences(this); 
```

或者

```
 SharedPreferences sp = getDefaultSharedPreferences(getActivity()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-28T12:11:13.860

您可以执行以下操作：

```
cbxxx.setOnCheckedChangeListener(new OnCheckedChangeListener() {

            @Override
            public void onCheckedChanged(CompoundButton buttonView,
                    boolean isChecked) {
                Editor edit = PreferenceManager.getDefaultSharedPreferences(
                        youractivity.this).edit();
                if (isChecked) {
                    edit.putBoolean("isPhysicalTheftEnabled", true);
                } else {
                    edit.putBoolean("isPhysicalTheftEnabled", false);
                }
                edit.commit();
            }
        }); 
```

如果您想获得上述值：

```
SharedPreferences prefs = preferenceManager.getDefaultSharedPreferences(getApplicationContext());
if(prefs.getBoolean("isPhysicalTheftEnabled", false)){
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T12:02:15.110

首先，打开名为“isPhysicalTheftEnabled”的首选项文件，然后将 false 写入此文件。您不更新用户可见的设置，只将名为“isPhysicalTheftEnabled”的值保存到同名文件中。要更新布局，您需要在 PreferenceActivity 或 Fragment 中实现[onPreferenceChange ，例如。](http://developer.android.com/reference/android/preference/Preference.OnPreferenceChangeListener.html)

```
public boolean onPreferenceChange(Preference preference, Object newValue) {
    Toast.makeText( getApplicationContext(), "NewValue: " + newValue.toString(), Toast.LENGTH_SHORT).show();    
    return true;
} 
```

# android - Android 如何以分钟为单位获取特定的视频文件持续时间？

> ID：11720998
> 
> 赞同：0
> 
> 时间：2012-07-30T11:51:45.707
> 
> 标签：android, video, duration

我正在寻找以下问题的解决方案。

我正在将特定文件夹中可用的视频文件绑定到列表视图。在那我找到了名字，大小，但我没有得到持续时间。

# java - 用 Java 解析这个 XML 的最简单方法是什么？

> ID：11720999
> 
> 赞同：1
> 
> 时间：2012-07-30T11:51:47.777
> 
> 标签：java, xml, dom, xml-parsing, sax

我有以下 XML：

```
 <ConfigGroup Name="Replication">
        <ValueInteger Name="ResponseTimeout">10</ValueInteger>
        <ValueInteger Name="PingTimeout">2</ValueInteger>
        <ValueInteger Name="ConnectionTimeout">10</ValueInteger>
        <ConfigGroup Name="Pool">
            <ConfigGroup Name="1">
                <ValueString Encrypted="false" Name="Host">10.20.30.40</ValueString>
                <ValueInteger Name="CacheReplicationPort">8899</ValueInteger>
                <ValueInteger Name="RadiusPort">12050</ValueInteger>
                <ValueInteger Name="OtherPort">4868</ValueInteger>
            </ConfigGroup>
            <ConfigGroup Name="2">
                <ValueString Encrypted="false" Name="Host">10.20.30.50</ValueString>
                <ValueInteger Name="CacheReplicationPort">8899</ValueInteger>
                <ValueInteger Name="RadiusPort">12050</ValueInteger>
                <ValueInteger Name="OtherPort">4868</ValueInteger>
            </ConfigGroup>
        </ConfigGroup>
     </ConfigGroup> 
```

我只是想知道在 Java 中解析这个 XML 的最简单方法是什么——我想要来自两个主机元素（例如 10.20.30.40 和 10.20.30.50）的值。请注意，可能有两个以上的池条目（或根本没有）。

我很难找到一个简单的例子来说明如何为 Java 使用各种 XML 解析器。

任何帮助深表感谢。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-30T12:19:27.623

Java XPath API 可以很容易地做到这一点。以下 xpath 表达式

```
//ValueString[@Name='Host'] 
```

应该匹配你想要的。以下是如何将其与 API 一起使用：

```
Document doc = DocumentBuilderFactory.newInstance().newDocumentBuilder().parse(yourXml.getBytes());
XPath xpath = XPathFactory.newInstance().newXPath();
NodeList nodeList = (NodeList) xpath.compile("//ValueString[@Name='Host']").evaluate(doc, XPathConstants.NODESET);
for (int i = 0; i < nodeList.getLength(); i++) {
  String ip = ((Element) nodeList.item(i)).getTextContent();
  // do something with your ip
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-30T12:23:33.843

搜索您要查找的内容的最简单方法是 XPath。

```
try {

    //Load the XML File
    DocumentBuilderFactory domFactory = DocumentBuilderFactory.newInstance();
    domFactory.setNamespaceAware(true);
    DocumentBuilder builder = domFactory.newDocumentBuilder();
    Document configuration = builder.parse("configs.xml");

    //Create an XPath expression
    XPathFactory xpathFactory = XPathFactory.newInstance();
    XPath xpath = xpathFactory.newXPath();
    XPathExpression expr = xpath.compile("//ConfigGroup/ValueString[@Name='Host']/text()");

    //Execute the XPath query
    Object result = expr.evaluate(configuration, XPathConstants.NODESET);
    NodeList nodes = (NodeList) result;

    //Parse the results
    for (int i = 0; i < nodes.getLength(); i++) {
        System.out.println(nodes.item(i).getNodeValue()); 
    }
} catch (ParserConfigurationException e) {
    System.out.println("Bad parser configuration");
    e.printStackTrace();
} catch (SAXException e) {
    System.out.println("SAX error loading the file.");
    e.printStackTrace();
} catch (XPathExpressionException e) {
    System.out.println("Bad XPath Expression");
    e.printStackTrace();
} catch (IOException e) {
    System.out.println("IO Error reading the file.");
    e.printStackTrace();
} 
```

XPath 表达式

```
"//ConfigGroup/ValueString[@Name='Host']/text()" 
```

在 XML 中的任意位置查找 ConfigGroup 元素，然后在 ConfigGroup 元素中查找 ValueString 元素，这些元素的 Name 属性的值为“Host”。@Name=Host 类似于名称为 ValueString 的元素的过滤器。最后的 text() 返回所选元素的文本节点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-30T11:58:26.877

```
File file = new File("some/path");
DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
DocumentBuilder db = dbf.newDocumentBuilder();
Document document = db.parse(file);
NodeList list = document.getElementsByTagName("name/of /your/ element");
// its return NodeList of all descendant Elements with a given tag name, in document order.  
for (int i = 0; i < list .getLength(); i++) {
     System.out.println(list.item(i).getNodeName()+" = "+list.item(i).getNodeValue());
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-27T07:25:14.837

你可以使用 SAXON

```
String vs_source = "Z:/Code_JavaDOCX/1.xml";
Processor proc = new Processor(false);
net.sf.saxon.s9api.DocumentBuilder builder = proc.newDocumentBuilder();
XPathCompiler xpc = proc.newXPathCompiler();
try{
            XPathSelector selector = xpc.compile("//output").load();
            selector.setContextItem(builder.build(new File(vs_source)));
            for (XdmItem item: selector) 
                {
                    System.out.println(item.getStringValue());
                }
        }   
catch(Exception e)
        {
            e.printStackTrace();
        } 
```