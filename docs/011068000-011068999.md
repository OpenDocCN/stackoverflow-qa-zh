# StackOverflow 问答 11068000-11068999

# cakephp - CAKEPHP：过滤器问题

> ID：11068003
> 
> 赞同：0
> 
> 时间：2012-06-17T00:21:35.647
> 
> 标签：cakephp, filter

我正在尝试对员工应用过滤器，以便仅在时间表表上显示它们。如果需要其他代码来帮助您帮助我，我将开始发布。代码是 filter.ctp

[http://webdesign4.georgianc.on.ca/~100141468/comp2084/todo/employees](http://webdesign4.georgianc.on.ca/~100141468/comp2084/todo/employees)

**问题：** [http ://webdesign4.georgianc.on.ca/~100141468/comp2084/todo/timesheets/filter/19](http://webdesign4.georgianc.on.ca/~100141468/comp2084/todo/timesheets/filter/19)

```
 <table>
<tr>
<th>ID</th><th>name</th><th>Hours</th><th>Employees</th><th>Edit</th>
</tr>

<? foreach($timesheets as $row): ?>
     <tr><td>
<?=$row['Timesheet']['id']?>
</td><td>
<?=$row['Timesheet']['hours']?>
</td><td>
<a href="../../employees/view/<?=$row['employee']['name']?>"><?=$row['employee']['name']?></a>
</td><td>
<a href="edit/<?=$row['Timesheet']['id']?>">Edit</a>
    </td></tr>
<? endforeach; ?>
</table>

<?
class TimesheetsController extends AppController {
    var $name = 'Timesheets';
    var $scaffold;  
    var $helpers = array('Number');

    function add() {

        //check if user loaded form for first time or had already loaded & is now posting
        if ($this->request->is('post')) {

            //save the data to the db
            if ($this->Timesheet->save($this->request->data)) {

                //Build message & add to session
                $this->Session->setFlash('Timesheet has been saved');

                //take user back to the index page
                $this->redirect(array('action'=>'index'));
            }
            //else save did not work
            else {
                $this->Session->setFlash('Unable to add Timesheet');            
            }
        }

        //populate the Employee list
        $this->loadModel('Employee');
        $this->set('Employees',$this->Employee->find('list',array('order'=> array('Employee.name'))));
        $this->set(compact('Employees'));       

        //populate the Employee list
        $this->loadModel('Client');
        $this->set('Clients',$this->Client->find('list',array('order'=> array('Client.name'))));
        $this->set(compact('Clients')); 
    }

        //create function to filter Timesheet list by selected Employee
        function filter($Employee_id) {
            $this->set('Timesheets',$this->Timesheet->findAllByEmployeeId($Employee_id));
        }
            //create function to filter Timesheet list by selected Employee
        function filter2($Client_id) {
            $this->set('Timesheets',$this->Timesheet->findAllByClientId($Client_id));
        }

}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T02:21:37.527

您可能需要在控制器上设置变量 $timesheets 使用`$this->set('timesheets', $timesheets)`

# f# - 是否可以通过反射传递 F# 函数？

> ID：11068006
> 
> 赞同：1
> 
> 时间：2012-06-17T00:22:35.553
> 
> 标签：f#

是否可以通过反射传递 F# 函数？

```
(*in module A*)
type Foo() =
    static member bar n = {1..n}

let functionUsingFoobar (x:(int -> #('a seq)) n =
    let z = BarFoo.ofSeq (x n)
    z.count

(* in module B
here is where I want to pass Foo.bar by reflection*)
let y = functionUsingFoobar Foo.bar 1000 
```

我无法在没有 args 参数的情况下调用成员，因此通过 InvokeMember 的部分功能应用程序无法工作。

```
let foo = new Foo()
let z = foo.GetType().InvokeMember("bar", System.Reflection.BindingFlags.InvokeMethod, null, foo, [|1000|])
(*tried null, [||], [|null|] for args parameter*) 
```

我不知道如何通过反射传递函数

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T17:00:48.290

问题是`GetMethod`返回 a `MethodInfo`，但您需要一个 F# 函数值。克服这种不匹配的最简单方法可能是使用`CreateDelegate`从该方法创建一个 .NET 委托，然后将该`Invoke`方法视为正确类型的函数值：

```
let d = 
    typeof<Foo>.GetMethod("bar").CreateDelegate(typeof<System.Func<int,seq<int>>>) 
    :?> System.Func<int,seq<int>>
functionUsingFooBar d.Invoke 1000 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T07:35:15.957

如果这是我认为你想要的，它工作得很好

```
type Foo() =
    static member bar n = {1..n}

let functionUsingFoobar (x:(int -> #('a seq))) n =
    (x n) |> Seq.length

let y = functionUsingFoobar Foo.bar 1000
let foo = new Foo()
let z = fun t -> foo.GetType().InvokeMember("bar", System.Reflection.BindingFlags.InvokeMethod, null, foo, [|t|]) 
```

# php - PyroCMS - Pyrostreams 在一个条目上上传多个文件

> ID：11068012
> 
> 赞同：1
> 
> 时间：2012-06-17T00:23:16.973
> 
> 标签：php, pyrocms

我有 PyroCMS 的 PyroStreams 模块，并制作了一个名为投资组合的流。一切都按预期工作，但是它只允许为我的文件字段上传一张图片。这很明显，但我想知道是否有一种方法可以为一个流条目上传多个图像，而无需添加 x 个额外的文件字段。还是我需要自己编写一个额外的字段类型来支持这一点？也许有人已经得到它？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T12:18:25.703

根据我的说法，您必须创建一个单独的数据库表，该表将保存与特定投资组合相关的所有图像，以及通过 id 获取投资组合 ID 的图像，您可以通过它获取特定记录的图像，然后使用任何多图像上传库，如[http： //www.plupload.com/example_queuewidget.php](http://www.plupload.com/example_queuewidget.php)上传组合图片表中的多张图片。希望这将帮助您实现您想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-16T21:39:53.387

pyrostore 上有一个 [多上传文件字段类型。](https://codeigniter.pyrocms.com/store/details/multi_upload_files_field_type)

# flash - 沿点的方向移动符号

> ID：11068015
> 
> 赞同：1
> 
> 时间：2012-06-17T00:24:14.273
> 
> 标签：flash, actionscript

我的舞台上有一个`Bullet`符号，但我想将它移向 a`Point`在给定的`speed`. 有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T23:18:04.270

您无需指定正在使用的 ActionScript 版本，但如果是 ActionScript 2.0，您可以移动符号，只要它是一种`MovieClip`类型并为其指定实例名称即可。在 ActionScript 3.0 中，我认为您还可以移动`Button`符号，

将符号移动到新点的最简单方法是使用补间库，例如[Greensock 的 TweenLite](http://www.greensock.com/tweenlite/)，它几乎是 Flash 中移动的标准。如果您使用的是 ActionScript 3.0，则可以使用内置[`Tween`](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/fl/transitions/Tween.html)类。这些中的任何一个都允许您在可以以秒或帧为单位指定的持续时间内移动对象。

# java - OpenGL矩阵没有正确旋转

> ID：11068020
> 
> 赞同：0
> 
> 时间：2012-06-17T00:25:13.577
> 
> 标签：java, opengl, rotation, glu

好的，所以我得到了 gluLookAt 的代码：

```
lookAt = new Vector3f(-player.pos.x, -player.pos.y, -player.pos.z);
       lookAt.x += (float)Math.cos(Math.toRadians(player.yaw)) * Math.cos(Math.toRadians(player.pitch));
       lookAt.y += (float)Math.sin(Math.toRadians(player.pitch));
       lookAt.z += (float) Math.sin(Math.toRadians(player.yaw)) * Math.cos(Math.toRadians(player.pitch));

       GLU.gluLookAt(-player.pos.x, -player.pos.y, -player.pos.z, 
               lookAt.x, lookAt.y, lookAt.z, 
               0, 1, 0); 
```

当我尝试绘制一个旋转的立方体时，它不能正确旋转。

```
GL11.glPushMatrix();
GL11.glLoadIdentity();
GL11.glTranslatef(-cube.pos.x, -cube.pos.y, -cube.pos.z);
GL11.glRotatef(cube.yaw, 0, 1, 0);
GL11.glTranslatef(cube.pos.x, cube.pos.y, cube.pos.z);
/*draw the cube normally*/
GL11.glPopMatrix(); 
```

所以我的问题是我是否正确处理了 glulookat 对矩阵所做的更改？还是我做错了什么？我正在寻找的结果是将立方体返回到 0,0,0 并旋转它，然后将其放回原处。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T00:38:36.770

问题在这里：

```
GL11.glTranslatef(-cube.pos.x, -cube.pos.y, -cube.pos.z);
GL11.glRotatef(cube.yaw, 0, 1, 0);
GL11.glTranslatef(cube.pos.x, cube.pos.y, cube.pos.z); 
```

立方体已经在 0,0,0 处。这是因为 Medel 矩阵是恒等的（如您所说的 glLoadIdentity()）。

所以你应该这样做：

```
 GL11.glRotatef(cube.yaw, 0, 1, 0);
 GL11.glTranslatef(cube.pos.x, cube.pos.y, cube.pos.z); 
```

这应该有预期的效果。如果不是，请使用固定摄像头尝试，看看您在 glulookat() 之前添加的代码是否导致查看目标距离 0,0,0（您的立方体所在的位置）太远

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T00:36:41.550

在绘制立方体之前调用 glLoadIdentity 将清除 gluLookAt 在您的视图矩阵中设置的任何内容，我认为它不应该存在。

# debugging - 逐行调试 CoffeeScript

> ID：11068023
> 
> 赞同：52
> 
> 时间：2012-06-17T00:25:50.583
> 
> 标签：debugging, coffeescript

有没有办法逐行调试 CoffeeScript？

我知道它可以编译成 Javascript。但这听起来可能会让调试变得很痛苦。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-10-23T11:10:29.060

**更新**：目前[重新设计](https://github.com/michaelficarra/CoffeeScriptRedux)了生成[源映射](http://www.html5rocks.com/en/tutorials/developertools/sourcemaps/)的咖啡脚本编译器，这应该使您能够在最新版本的谷歌浏览器（我认为是 18 及更高版本）中调试咖啡脚本。

我认为它还没有准备好生产，但值得一提。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-07-17T11:50:54.560

[如果您从终端运行coffeescript，您可以使用node-inspector](https://github.com/dannycoates/node-inspector/)逐行调试它，以这种方式启动您的脚本：

```
coffee --nodejs --debug-brk yourscript.coffee 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-06-17T00:33:39.543

目前调试 CoffeeScript 相当痛苦。大多数人使用大量的单元测试。

在调试 CoffeeScript 方面有一些工作正在进行，但在我们拥有一个非常好的调试器之前可能还需要一段时间。一个例子是[http://www.infoq.com/news/2011/08/debug-languages-on-javascript-vm](http://www.infoq.com/news/2011/08/debug-languages-on-javascript-vm)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2014-07-14T09:53:38.887

是的，使用[node-inspector](http://strongloop.com/strongblog/debug-coffeescript-node-js-inspector/)：

```
npm install -g node-inspector 
```

通过将语句`debugger`放入脚本的源代码中，您将启用断点。然后在控制台中输入：

```
coffee -c -m myscript.coffee
node-debug myscript.js 
```

Node Inspector 支持开箱即用的源映射，因此不需要额外的配置。

有关更多信息，[请参阅这篇文章](http://strongloop.com/strongblog/debug-coffeescript-node-js-inspector/)。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-03-12T18:51:20.187

Coffeescript 现在支持源映射： [http ://coffeescript.org/](http://coffeescript.org/)

例如 Jetbrains 支持此功能：[https ://blog.jetbrains.com/ruby/2013/01/whats-mining-coffeescript-debugger/](https://blog.jetbrains.com/ruby/2013/01/whats-mining-coffeescript-debugger/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-11-19T18:54:19.250

现在是2020年，找到这个问题，然后找到vscode支持sourcemap，所以我们可以直接用vscode调试coffee。

顺便说一句，我认为咖啡需要很大的改进。就像静态数据一样。无论如何，这是我的launch.json：

```
{
    "version": "0.2.0",
    "configurations": [{
        "type": "node",
        "request": "launch",
        "name": "Launch Program",
        "skipFiles": [
            "<node_internals>/**"
        ],
        "program": "${file}", //important, make sure debug current file
        "outFiles": [
            "${workspaceFolder}/dist/api/api.js" //important, where to find sourcemap js file
        ]
    }]
} 
```

# php - 2种情况后如何跳出循环？

> ID：11068025
> 
> 赞同：0
> 
> 时间：2012-06-17T00:26:11.690
> 
> 标签：php, foreach

我要修改的函数中有一个循环：

```
foreach ( $form_fields as $key => $val ) {
        if ( 'menu_order' == $key ) {
            if ( $gallery )
                $order = "<div class='menu_order'> <input class='menu_order_input' type='text' id='attachments[$attachment_id][menu_order]' name='attachments[$attachment_id][menu_order]' value='" . esc_attr( $val['value'] ). "' /></div>";
            else
                $order = "<input type='hidden' name='attachments[$attachment_id][menu_order]' value='" . esc_attr( $val['value'] ) . "' />";

            unset( $form_fields['menu_order'] );
            break;
        }
    } 
```

此循环循环通过 $form_fields 数组。如果“menu_order”是关键，那么，做一些事情并打破。现在我想再添加一个键来完成上述操作。所以，我修改如下：

```
foreach ( $form_fields as $key => $val ) {
    if ( 'menu_order' == $key ) {
        if ( $gallery )
            $order = "<div class='menu_order'> <input class='menu_order_input' type='text' id='attachments[$attachment_id][menu_order]' name='attachments[$attachment_id][menu_order]' value='" . esc_attr( $val['value'] ). "' /></div>";
        else
            $order = "<input type='hidden' name='attachments[$attachment_id][menu_order]' value='" . esc_attr( $val['value'] ) . "' />";

        unset( $form_fields['menu_order'] );

    }

    if ( 'post_status' == $key ) {
    if ( $gallery )
        $status = "<div class='post_status'> <input class='post_status_input' type='text' id='attachments[$attachment_id][post_status]' name='attachments[$attachment_id][post_status]' value='" . esc_attr( $val['value'] ). "' /></div>";
    else
        $status = "<input type='hidden' name='attachments[$attachment_id][post_status]' value='" . esc_attr( $val['value'] ) . "' />";

    unset( $form_fields['post_status'] );
    break;
}

} 
```

请注意，我删除了原始代码中的中断，在循环末尾添加了中断。我认为这应该使循环直到完成我新添加的块。但是这段代码没有按预期打印 post_status 输入框。我在循环中哪里出错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T00:38:50.963

这是一个简单的解决方法：摆脱循环。由于您知道键，因此不需要它，只需执行此操作即可直接访问数组元素：

```
if ( $gallery )
    $order = "<div class='menu_order'> <input class='menu_order_input' type='text' id='attachments[$attachment_id][menu_order]' name='attachments[$attachment_id][menu_order]' value='" . esc_attr( $form_fields['menu_order']['value'] ). "' /></div>";
else
    $order = "<input type='hidden' name='attachments[$attachment_id][menu_order]' value='" . esc_attr( $form_fields['menu_order']['value'] ) . "' />";

unset( $form_fields['menu_order']); 
```

对领域做同样的事情`'post_status'`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T00:35:06.117

看起来你想在两者之后打破循环`$order`并被`$status`发现。`$order`如果是这样，您希望在两种情况之后都有一个额外的 if 语句来检查并确保两者`$status`都已设置，并且只有在这种情况下才中断。

就像是：

```
if (isset($order) && isset($status)) {
    break;
} 
```

也就是说，还要检查功能。它可能只检查 的值`$order`，而忽略 的值`$status`。

# wpf - 如何从 WPF 程序集中删除 baml？

> ID：11068026
> 
> 赞同：-1
> 
> 时间：2012-06-17T00:26:28.057
> 
> 标签：wpf, reflection, .net-assembly, mono.cecil, baml

使用合并的资源字典会降低应用程序的性能。在我的程序集中，我经常需要使用合并的资源字典。我想将资源合并到一个字典中，并删除原始的baml。我不能将 Build Action 设置为 None（而不是 Page），因为在这种情况下我失去了一些功能（例如，resharper 没有语法突出显示）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T09:45:12.573

在*运行时，*您的应用程序仍需要读取链接的 BAML 资源文件，因此您无法从程序集中删除 BAML。

例如：

您合并以下资源字典

*   `dictionary1.xaml`
*   `dictionary2.xaml`

在`merged.xaml`.

您不能简单地删除已编译的 XAML（BAML -`dictionary1.baml`和`dictionary2.baml`），因为正如我所写，在*运行时*您仍然需要这些资源。

但是，无论如何，您可以从字面上复制您的 XAML 资源的内容`merged.xaml`，这样您只会拥有`merged.baml`（在编译器在您的程序集资源部分生成它之后）。

# ruby-on-rails - 使用 mixpanel 为用户构建自定义分析仪表板

> ID：11068027
> 
> 赞同：8
> 
> 时间：2012-06-17T00:27:15.363
> 
> 标签：ruby-on-rails, api, analytics, mixpanel

*我喜欢图表*。

我很想得到一些数据并让它看起来很漂亮。但是，唉，我对什么被认为是最佳实践有点迷茫。

我选择了 mixpanel（仅作为示例），因为我似乎非常容易跟踪自定义事件，并且没有像 Google Analytics 那样的任何子域限制。

假设我有 100-1000 多个拥有帐户（面向公众）的用户，我目前正在跟踪他们的页面获得的公共互动。使用mixpanel，我可以看到很漂亮的数据，我已经将它细分到个人账户。到目前为止，一切都很好！

但是，我想向我的用户展示这些信息。在这里，我的头开始受伤。我是否安排了一个 cron 作业，从 mixpanel 中提取数据并将其写入各自的帐户？或者，还有更好的方法？我查看了 mixpanel 的 api（我正在使用 Ruby），但他们一直告诉我应该使用 javascript api。但是在使用 JS 时，如何防止其他人获取数据（即，是什么阻止了有人在控制台中伪造 mixpanel api-posts，或者查看我的私钥？）。

在这种情况下，您会考虑什么实用的解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-01T09:05:20.533

您可以通过使用附加的 $bucket 属性存储每个用户的用户特定事件来实现此目的，该属性具有每个用户唯一的值，如[Mixpanel 文档](https://mixpanel.com/docs/api-documentation/displaying-mixpanel-data-to-your-users)中所述。如果您仍想使用 ruby​​ 来服务事件，请查看 Mixpanel 推荐的[ruby​​ 客户端库](https://mixpanel.com/docs/api-documentation/data-export-api#libs-ruby) [mixpanel_client](https://github.com/keolo/mixpanel_client)看起来像是提到的 2 中维护得很好的选项。如果您这样做，那么您可以提供用户特定的事件，如下例所示（也在 gem 的自述文件中）：

```
data = client.request do
  # Available options
  resource  'events/properties'
  event     '["test-event"]'
  name      'hello'
  values    '["uno", "dos"]'
  timezone  '-8'
  type      'general'
  unit      'hour'
  interval   24
  limit      5
  bucket    'contents'
  from_date '2011-08-11'
  to_date   '2011-08-12'
  on        'properties["product_id"]'
  where     '1 in properties["product_id"]'
  buckets   '5'
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-26T00:16:11.363

您可以尝试像 Keen IO 这样的服务，它允许您生成加密范围的写入和读取 API 密钥。Keen IO 是为可定制和程序化的分析功能而构建的，例如向您的客户公开分析，而 MixPanel 则更多地用于在他们的 UI 中探索您的数据。使用加密范围密钥的想法是他们永远无法访问您的帐户，只能访问您希望他们看到的数据。您可以轻松地使用客户 ID 标记您的事件，然后使用 Scoped Keys 确保您只向客户显示他们自己的数据。

[https://keen.io/docs/security/#scoped-key](https://keen.io/docs/security/#scoped-key)

此外，Keen IO 有一个[“导入器”](https://keen.io/blog/63745143832/introducing-keen-importer)，它允许您将混音面板事件导出到您的 Keen IO 数据库中。

# java - 如何使用java从二进制文件中读取dword？

> ID：11068029
> 
> 赞同：1
> 
> 时间：2012-06-17T00:27:55.460
> 
> 标签：java, file-io, dword

我有一个像这样的二进制文件：

```
offset | size/type | Description
-------+-----------+-----------------------------------------------------------
0x0000 | 28 chars  | zero terminated string
0x001c |  1 dword  | fileoffset of first compressed data block (header size)
0x0020 |  1 dword  | overall size of compressed file 
```

我可以将 28 个字符读取为字符串。但我不知道如何读取 dword 并将其存储为 int。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T00:35:33.730

DataInputStream.readFully() 和 .readInt()。不过，您可能必须对（未指定的）字节顺序做一些事情。如果这是一个问题，ByteBuffer.getInt()，在设置适当的字节顺序之后。

# c# - 如何使用三元运算符将代码隐藏方法替换为 aspx 方法

> ID：11068031
> 
> 赞同：1
> 
> 时间：2012-06-17T00:28:55.837
> 
> 标签：c#, asp.net

我有一个 asp:hyperlink 控件作为 gridview 模板的一部分。aspx页面中的代码如下：

```
asp:HyperLink runat="server" ID="lnkEdit" ToolTip="Edit article" NavigateUrl='<%# GetUrl(Eval("ID").ToString(), Eval("CategoryID").ToString()) %>' ImageUrl="~/Images/Edit.gif" 
```

NavigateUrl 值是从代码隐藏方法 GetUrl(string, string) 中获得的。该代码工作正常，如下所示：

```
protected string GetUrl(string id, string categoryID)
{
    var CategoryID = string.Empty;
    if (!String.IsNullOrEmpty(Request.QueryString["CatID"]))
    {
        CategoryID = Request.QueryString["CatID"].ToString();
    }
    else if (!String.IsNullOrEmpty(categoryID))
    {
        CategoryID = categoryID;
    }
    return "~/TBSArticles/WriteOrEditArticle.aspx?ID=" + id + "&CatID=" + CategoryID;
} 
```

我想通过在 aspx 页面中使用三元运算符来替换方法背后的代码。我尝试了类似下面的方法，但没有奏效：

```
asp:HyperLink runat="server" ID="lnkEdit" ToolTip="Edit article" NavigateUrl='<%# "~/TBSArticles/WriteOrEditArticle.aspx?ID=" + Eval("ID")  + "&CatID=" + Eval(this.Request.QueryString["CatID"].ToString()) != ""? this.Request.QueryString["CatID"] : Eval("CategoryID")) %>' ImageUrl="~/Images/Edit.gif" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T14:23:05.480

The approach you used was cleaner and I prefer that.

I replicated your issue and I think you just have an extra closing bracket

```
NavigateUrl='<%# "~/TBSArticles/WriteOrEditArticle.aspx?ID=" + Eval("ID")  + "&CatID=" + Eval(this.Request.QueryString["CatID"].ToString()) != ""? this.Request.QueryString["CatID"] : Eval("CategoryID")) %>' 
```

CORRECTION: removed the last Eval("CategoryID") bracket

```
NavigateUrl='<%# "~/TBSArticles/WriteOrEditArticle.aspx?ID=" + Eval("ID")  + "&CatID=" + Eval(this.Request.QueryString["CatID"].ToString()) != ""? this.Request.QueryString["CatID"] : Eval("CategoryID") %>' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T09:44:56.540

当你有很多想法时，最好在后面的代码上使用一个函数来调用，并避免因一行代码的困难而产生的问题和错误。因此，您将函数称为：

```
asp:HyperLink runat="server" NavigateUrl='<%#GetHyperLinkUrl(Container.DataItem)%>' ID="lnkEdit" ToolTip="Edit article" 
```

并将其写在后面的代码上

```
protected string GetHyperLinkUrl(object oItem)
{
    StringBuilder cbRet = new StringBuilder();

    cbRet.Append( Page.ResolveUrl("~/TBSArticles/WriteOrEditArticle.aspx?ID=") );
    cbRet.Append( DataBinder.Eval(oItem, "ID") );
    cbRet.Append(  "&CatID=" );

    if(string.IsNullOrEmpty(Request.QueryString["CatID"]))  
        cbRet.Append( DataBinder.Eval(oItem, "CategoryID") );
    else
        cbRet.Append( DataBinder.Eval(oItem, Request.QueryString["CatID"].ToString()) );

    return cbRet.ToString();
} 
```

# ios - 如何从具有 imageNamed 行为的 NSURL 加载图像（@2x、~ipad 等变体）

> ID：11068032
> 
> 赞同：1
> 
> 时间：2012-06-17T00:29:03.233
> 
> 标签：ios, uiimage, nsurl

`[UIImage imageNamed:]`从包中加载文件时会做很多聪明的事情，比如缓存以防止`UIImage`同一图像的多个实例，查找@2x 和 ~ipad 后缀，以及`scale`正确设置属性。从文档目录（用 a 指定）加载图像时，我希望能够做同样的事情`NSURL`。我环顾四周，但在文档中找不到任何内容，我错过了什么吗？

我目前正在自己​​实现这个（整个shebang，带有缓存等），但我讨厌复制框架代码。我希望在完成之前得到答案，但如果没有，我会发布代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T02:58:19.270

这是我想出的最好的东西。这并不理想，因为它在框架中复制了行为（可能存在细微的不一致），但它可以实现我们想要的`imageNamed:`.

```
+ (UIImage*)imageNamed:(NSString*)name relativeToURL:(NSURL*)rootURL
{
    // Make sure the URL is a file URL
    if(![rootURL isFileURL])
    {
        NSString* reason = [NSString stringWithFormat:@"%@ only supports file URLs at this time.", NSStringFromSelector(_cmd)];
        @throw [NSException exceptionWithName:NSInvalidArgumentException reason:reason userInfo:nil];
    }

    // Check the cache first, using the raw url/name as the key
    NSCache*    cache = objc_getAssociatedObject([UIApplication sharedApplication].delegate, @"imageCache");
    // If cache doesn't exist image will be nil - cache is created later only if everything else goes ok
    NSURL*      cacheKey = [rootURL URLByAppendingPathComponent:name];
    UIImage*    image = [cache objectForKey:cacheKey];
    if(image != nil)
    {
        // Return the cached image
        return image;
    }

    // Various suffixes to try in preference order
    NSString*   scaleSuffix[] =
    {
        @"@2x",
        @""
    };
    CGFloat     scaleValues[] =
    {
        2.0f,
        1.0f
    };
    NSString*   deviceSuffix[] =
    {
        ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad) ? @"~ipad" : @"~iphone",
        @""
    };
    NSString*   formatSuffix[] =
    {
        @"png"
    };
    NSURL*      imageURL = nil;
    CGFloat     imageScale = 0.0f;

    // Iterate through scale suffixes...
    NSInteger   ss, ssStart, ssEnd, ssInc;
    if([UIScreen mainScreen].scale == 2.0f)
    {
        // ...forwards
        ssStart = 0;
        ssInc = 1;
    }
    else
    {
        // ...backwards
        ssStart = (sizeof(scaleSuffix) / sizeof(NSString*)) - 1;
        ssInc = -1;
    }
    ssEnd = ssStart + (ssInc * (sizeof(scaleSuffix) / sizeof(NSString*)));
    for(ss = ssStart; (imageURL == nil) && (ss != ssEnd); ss += ssInc)
    {
        // Iterate through devices suffixes
        NSInteger ds;
        for(ds = 0; (imageURL == nil) && (ds < (sizeof(deviceSuffix) / sizeof(NSString*))); ds++)
        {
            // Iterate through format suffixes
            NSInteger fs;
            for(fs = 0; fs < (sizeof(formatSuffix) / sizeof(NSString*)); fs++)
            {
                // Add all of the suffixes to the URL and test if it exists
                NSString*   nameXX = [name stringByAppendingFormat:@"%@%@.%@", scaleSuffix[ss], deviceSuffix[ds], formatSuffix[fs]];
                NSURL*      testURL = [rootURL URLByAppendingPathComponent:nameXX];
                NSLog(@"testing if image exists: %@", testURL);
                if([testURL checkResourceIsReachableAndReturnError:nil])
                {
                    imageURL = testURL;
                    imageScale = scaleValues[ss];
                    break;
                }
            }
        }
    }

    // If a suitable file was found...
    if(imageURL != nil)
    {
        // ...load and cache the image
        image = [[UIImage alloc] initWithData:[NSData dataWithContentsOfURL:imageURL]];
        image = [UIImage imageWithCGImage:image.CGImage scale:imageScale orientation:UIImageOrientationUp];
        NSLog(@"Image loaded, with scale: %f", image.scale);
        if(cache == nil)
        {
            cache = [NSCache new];
            objc_setAssociatedObject([UIApplication sharedApplication].delegate, @"imageCache", cache, OBJC_ASSOCIATION_RETAIN);
        }
        [cache setObject:image forKey:cacheKey];
    }
    return image;
} 
```

如果您发现任何问题，请告诉我。据我所知，语义是这样的`imageNamed:`——至少对于最常见的情况。也许有很多不同的图像格式和一些我不知道的其他修饰符 - 代码应该很容易修改以支持它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T01:32:31.790

我认为这应该可以解决问题，这是检查屏幕比例的简单测试。

```
UIImage *image;
if ([[UIScreen mainScreen] respondsToSelector:@selector(scale)] && [[UIScreen mainScreen] scale] == 2){
  // @2x
  NSURL *imageURL = [NSURL URLWithString:@"http://www.example.com/images/yourImage@2x.png"];
  NSData * imageData = [NSData dataWithContentsOfURL:imageURL];
  image = [UIImage imageWithData:imageData];
} else {
  // @1x
  NSURL *imageURL = [NSURL URLWithString:@"http://www.example.com/images/yourImage.png"];
  NSData * imageData = [NSData dataWithContentsOfURL:imageURL];
  image = [UIImage imageWithData:imageData];
}
UIImageView *yourImageView = [[UIImageView alloc] initWithImage:image]; 
```

这里已经回答了 [从 URL 加载时应该如何处理视网膜/普通图像？](https://stackoverflow.com/questions/6404410/how-should-retina-normal-images-be-handled-when-loading-from-url)

希望能帮助到你

# wpf - WPF中的光泽闪亮方形按钮 - XAML

> ID：11068034
> 
> 赞同：0
> 
> 时间：2012-06-17T00:29:13.203
> 
> 标签：wpf, xaml, button, aero-glass

我正在尝试找到具有光泽效果的矩形按钮。所有示例都与圆形按钮相关。（并且在编辑代码时，光泽效果不适合矩形。

有人知道下图中按钮的 xaml 示例吗？ ![有光泽的方形按钮](../Images/84b434999bd542afaf235b2c30434a48.png)

![在此处输入图像描述](../Images/473874c58de05726b7080f01d8162890.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T07:06:45.810

使用 XAML 可以做到这一点。有一个很棒的 XAML 资源页面用于此类内容，称为 xamalot.com。我以一个按钮作为参考： http: [//xamalot.com/asset/0fc669c8-35f8-49c0-bceb-0d07f1d63691](http://xamalot.com/asset/0fc669c8-35f8-49c0-bceb-0d07f1d63691)：

![akiross 音频按钮](../Images/ecb47db756b01c776bc97cdd6ab7262c.png)

使用 XAML 绘制的整个过程并不是那么容易，但是有一些工具可以让您像[Microsoft 的 Expression Design](http://www.microsoft.com/expression/products/Design_Overview.aspx)一样绘制和导出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T05:07:32.547

完成此操作的最佳方法是使用图像作为按钮的内容。

```
<Button BorderThickness="0">
    <Image Source="http://i.stack.imgur.com/XAgzU.jpg"/>
</Button> 
```

您可以使用阴影来获得第二张图像中的效果，或者使用反射来获得第一张图像中的效果

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-27T14:46:55.973

您可以使用 Illustrator 轻松创建此类图形，Expression Blend 具有将 Illustrator 矢量文件转换为 XAML 的功能。

这个选项在质量方面是最好的，当然，因为你的图形。

作为替代方案，Expression Blend 也可以做到这一点，甚至可能更快。
我确实做过一次这种类型的事情，我只是用颜色绘制了基本形状，然后在那里绘制了另一个形状，更改了比例+将形状转换为 Blend 中的路径，这样我就可以移动点，然后只应用白色具有较低的alpha，就是这样。

我没有在这个答案中提供太多细节，所以如果想了解更多信息，请给我留言。

**重要提示：将您的 XAML 图形放在 Viewbox 中！**

# c - 我的代码中是否存在内存泄漏？（使用指针存储字符串）

> ID：11068037
> 
> 赞同：0
> 
> 时间：2012-06-17T00:29:39.387
> 
> 标签：c, string, pointers, memory-leaks

```
#include <stdio.h>
#include <stdlib.h>

int main(void) {
    int x;
    int *in, *begin;
    in = (int *)malloc(sizeof(int));
    begin = in;
    while ((x = getchar()) != EOF) {
        *in = x;
        in++;
        in = (int *)malloc(sizeof(int));
    }
    *in = EOF;
    while ((x = *begin) != EOF) {
        putchar(x);
        begin++;
    }
    free(in);
    return 0;
} 
```

我有一个偷偷摸摸的怀疑，它确实如此。

使用这个程序，我试图使用指针将不确定大小的用户输入存储到内存中，而不是使用`char string[255]; fgets(string, sizeof(string));`等。

编辑：当我运行它时，该程序不会崩溃或任何事情，我只是觉得分配的内存没有被释放。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T00:34:45.097

是的，程序有内存泄漏。

```
int *in, *begin;
in = (int *)malloc(sizeof(int));  /* allocate space for 1 int, at location "X" */
begin = in;
while ((x = getchar()) != EOF) {
    *in = x; 
    in++;    /* "in" increments address (to location) "X+1" */
    in = (int *)malloc(sizeof(int)); /* address "X+1" is lost as malloc returns  
                                        a different memory location, *not*
                                        necessarily at "X+2". Access to 
                                        previous data other than pointed to by 
                                        "begin" is lost */
}

*in = '\0';  /* this makes probably more senese than assigining EOF here */ 
```

`free()`分配内存时需要有相应的调用。

另外，我认为输入的存储不正确。

`in`*从来没有*给一个***连续***的内存块来存储数据。取而代之的是，一个存储 an 大小的内存位置`int`被重复分配并分配给`in`，但我们并不真正知道该内存在哪里，因此所有这些分配都丢失了，因为只有一个指针`in`在跟踪它们。

换句话说，泄漏包括重复为 a 的大小分配内存`int`，将其分配给`in`，然后在下一次循环中丢失对该位置的任何引用。

变量`begin`最初指向输入的第一个项目，但随后由于其指针值在输出循环中重复递增 1 而陷入未知内存。

更好的方法是在开始时分配一个更大的*连续*缓冲区，然后在增加指针时使用它`in`，或者从较小的数量开始，然后`realloc()`根据需要监视内存使用和更多（但要节省更多开销几句记忆）。

此外，在第一个循环结束时，而不是分配`EOF`to `in`，放入空字符会更有意义。

最后，`free(in)`程序底部的调用只释放了一个内存位置，没有释放其他先前分配的内存。

这是一个有效的快速组合版本，我尝试对*原始代码进行最小的更改*并*保持您的代码结构完整*（我相信您有理由首先使用两个循环以这种方式编写它）尽管这可能只需一个循环就可以更紧凑地编写。

请注意，我最初为 100 个字符分配空间，根据您的需要进行调整，或者最初分配更少，但随后根据需要跟踪内存消耗和`realloc()`更多内存（我认为这是您的最初意图，但只是没有完全正确地实现）。

```
int main(void) {
    int x;
    int *in, *begin;
    int *start_loc;
    in = (int *)malloc(sizeof(int) * 100); /* continious space */
    begin = in;
    start_loc = in; /* keep track of start location for final free() call */

    while ((x = getchar()) != EOF) {
        *in = x;
        in++;
    }
    *in = 0;  /* terminator for the input string/data */

    while (*begin != 0) {   /* simplified */
        putchar(*begin);
        begin++;
    }

    free(start_loc);  /* free allocated memory */
    return 0;
} 
```

这可以在不使用新变量的情况下编写`start_loc`（例如通过重用`in`），但我选择这样编写它是为了强调跟踪内存分配开始的重要性以及正确释放分配的内存的能力，因此解决您的内存泄漏问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T00:33:43.557

当然存在内存泄漏，因为每次调用都会在您的程序中`malloc`进行相应的调用。`free`

在您的程序`malloc`中多次调用但只有一次调用`free`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T00:38:11.333

列文的回答是正确的。你增加`in`这里的值：

```
in++; 
```

...但随后您将其重新分配给此处任意的地址：

```
in = (int *)malloc(sizeof(int)); 
```

要实现您想要做的事情，您需要：

*   一次性分配一大块连续内存，并在需要扩展时使用 realloc() （这是您要实现的目标），或者；
*   使用链表在不连续的内存地址列表中导航（这是您实际设法编写的）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-17T00:43:30.770

是的，你有。`Free`将为一个整数释放内存。你必须打电话给你打过`free`的每一个`malloc`电话。

此外，要将字符存储在连续缓冲区中，您必须`malloc`在开始时使用一定量的内存，并`realloc`在您读取的字符变得超过最初分配的内存时使用。

也不要忘记`\0`在字符串末尾再分配一个字符。

完成后，您可以致电`free(buffer)`并... 成功！没有内存泄漏！

以及它的代码：

```
/* Start with an initial size */
int size = 128;
char *buffer = (char *)malloc(size + 1);
int i = 0;
while ((x = getchar()) != EOF) {
        buffer[i] = x;
        i++;
        if(i == size){
           /*Do realloc and increase size */
        }
}
buffer[i] = '\0';
/* Do what you want with buffer */
free(buffer); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-17T06:33:28.187

使用malloc分配内存时，应确保指向内存的指针不为NULL，释放内存后，最好将指针设为NULL

# ruby-on-rails - Ruby on Rails 使用视图助手中的变量在视图中动态生成字段名称

> ID：11068039
> 
> 赞同：2
> 
> 时间：2012-06-17T00:30:08.210
> 
> 标签：ruby-on-rails, view, view-helpers

在我看来，假设我有这样的事情：

```
<%= f.text_field :name_first %> 
```

还有一次：

```
<%= f.text_field :name_last %> 
```

我不想对字段名称进行硬编码，而是想使用视图辅助方法动态生成它们。

```
def category_name
    @contact_info.category.name
end

def return_field_name
  category_lower = category_name.downcase
  ":name"+category_lower  
end 
```

所以现在我的观点应该是这样的：

```
 <%= f.text_field return_field_name %> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T00:36:20.710

写：

```
def return_field_name
  category_lower = category_name.downcase
  "name#{category_lower}".to_sym
  # but I'm sure that without #to_sym it should work as well
end 
```

但是，如果它对您有帮助，您应该只编写纯方法。恕我直言，这是非常好的做法。

# mongodb - 地理空间查询多边形（doctrine2）

> ID：11068041
> 
> 赞同：1
> 
> 时间：2012-06-17T00:30:23.853
> 
> 标签：mongodb, doctrine-orm, geospatial, polygons

我想知道是否有一种方法可以使用doctrine2和mongodb在PHP中执行多边形查询。（如文档中所示：[http](http://www.mongodb.org/display/DOCS/Geospatial+Indexing#GeospatialIndexing-BoundsQueries) ://www.mongodb.org/display/DOCS/Geospatial+Indexing#GeospatialIndexing-BoundsQueries ）

我知道在 Doctrine2 中实现了 near、insideCenter 和 insideBox 是可能的并且工作正常，但是多边形呢？ [http://docs.doctrine-project.org/projects/doctrine-mongodb-odm/en/latest/reference/geospatial-queries.html](http://docs.doctrine-project.org/projects/doctrine-mongodb-odm/en/latest/reference/geospatial-queries.html)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T09:24:00.647

现在可以了:)

```
$queryBuilder
    ->field('loc')
    ->withinPolygon(array(0, 0), array(2, 0), array(0, 2)); 
```

请参阅[60a99e5](https://github.com/doctrine/mongodb/commit/60a99e5ce36aa34a5ae9f5fe9623e84bfddc99c4)和相应的单元测试。如果提供的点少于三个，则会引发异常，因为这不能表示多边形。

# gwt - 如何在 GWT 日志记录中配置特定于类的日志级别？

> ID：11068043
> 
> 赞同：5
> 
> 时间：2012-06-17T00:31:15.970
> 
> 标签：gwt, logging

使用 java.util.logging 时，可以在 logging.properties 文件中配置特定类（即具有类名的子记录器）的日志级别，如下所示：

```
com.foobar.MyClass.level = FINE 
```

我使用类名在 MyClass 中创建子记录器，如下所示：

```
private static Logger log = Logger.getLogger(MyClass.class.getName()); 
```

父记录器的日志级别设置为 SEVERE。这会导致仅记录 MyClass 的 FINE 级别日志记录，而在其他任何地方都发生 SEVERE 级别的日志记录。

有没有办法在 Google Web Toolkit gwt.xml 文件中进行类似的配置？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T15:11:51.080

很不幸的是，不行。GWT Logging 支持有限，您只能在模块级别设置日志级别。我希望在未来的版本中看到对日志记录的更好控制，但是 AFAIK，没有任何认真的计划来扩展此类支持。

# security - 如何确保用户在 Yii 中只能查看和访问自己的数据

> ID：11068048
> 
> 赞同：3
> 
> 时间：2012-06-17T00:32:40.133
> 
> 标签：security, yii, authorization

在 Yii 中，有没有一种最好的方法来确保用户只能在 Yii 中查看和访问他们自己的数据？

我认为管理员应该能够看到任何东西，但现在，我稍后会越过那座桥。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-17T04:28:46.263

查看范围。默认范围将是您的朋友： [http ://www.yiiframework.com/doc/guide/1.1/en/database.ar#named-scopes](http://www.yiiframework.com/doc/guide/1.1/en/database.ar#named-scopes)

因为 defaultScopes 数组在函数内部，你也可以做有条件的默认作用域：

```
public function defaultScope()
{
    $t=$this->getTableAlias(false,false);

    if(Yii::app()->user->notAdmin()) {
        return array(
            'condition'=>"$t.<column_name> = :<columnName>",
            'params'=>array(':<columnName>'=>Yii::app()->user->notAdmin),
        );
    }
    else return array();
} 
```

**编辑：**请注意，如果您不小心，这可能会给您带来麻烦。有关更多信息，请参阅[Yii 网站上的这个问题](https://github.com/yiisoft/yii/issues/1642)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T06:52:39.437

Yii 不可能为你做这件事，你会自己做，但这很简单。

您可以考虑范围，或查看关系并将它们全部基于当前用户。例如，要获取用户的所有帖子，您可以执行以下操作：

```
$posts = Post::model()->findAll();    //WRONG

$posts = Yii::app()->user->posts();   //RIGHT (Should define the relation in the User model) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-05T08:13:55.787

查看我写的解决方案：

[http://www.yiiframework.com/forum/index.php/topic/42735-restrict-users-to-only-editingdeleting-their-own-entries/page_gopid_237608#entry237608 *_* _](http://www.yiiframework.com/forum/index.php/topic/42735-restrict-users-to-only-editingdeleting-their-own-entries/page__gopid__237608#entry237608)

# javascript - 带 HTML5 输出的四舍五入小数点

> ID：11068050
> 
> 赞同：3
> 
> 时间：2012-06-17T00:33:26.343
> 
> 标签：javascript, html

我正在构建一个看起来像的 html5 计算器

```
<form onsubmit="return false" oninput="o.value = a.valueAsNumber + b.valueAsNumber"<br>
    <input name="a" id="a" type="number" step="any"> +<br>
    <input name="b" id="b" type="number" step="any"> =<br>
    <output name="o" for="a b"></output><br>
</form> 
```

并希望将结果四舍五入到小数点后 2 位。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T00:43:37.370

[toFixed](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Number/toFixed)是另一种实现您正在寻找的方法，并且将始终显示小数位，无论它们是否为 0。

```
<form onsubmit="return false" oninput="o.value = (a.valueAsNumber + b.valueAsNumber).toFixed(2)"<br>
    <input name="a" id="a" type="number" step="any"> +<br>
    <input name="b" id="b" type="number" step="any"> =<br>
    <output name="o" for="a b"></output><br>
</form>​ 
```

**[现场演示](http://jsfiddle.net/loktar/NRtwh/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T00:41:44.340

这将四舍五入到小数点后两位。

```
Math.round(num * 100)/100 
```

这是一个更通用的版本，四舍五入到一定数量的位置。

```
function roundNumber(num, places) {
    return Math.round(num * Math.pow(10, places)) / Math.pow(10, places);
}

roundNumber(24.2424, 2)
24.24 
```

# backbone.js - 无法在咖啡脚本中扩展骨干网事件

> ID：11068059
> 
> 赞同：15
> 
> 时间：2012-06-17T00:34:42.350
> 
> 标签：backbone.js, coffeescript, extends

我收到错误：

```
Uncaught TypeError: Cannot read property 'constructor' of undefined 
```

声明以下类时：

```
 class ViewHelpers extends Backbone.Events 
```

我可以使用相同的语法来扩展 Backbone.Router、视图、模型等。这是我在快速日志中编写的已编译 javascript，以确保 Backbone.Events 存在

```
__t('views').ViewHelpers = (function(_super) {

 #how i know it is definied here
 console.log(_super.trigger)

 __extends(ViewHelpers, _super);

 function ViewHelpers() {
   return ViewHelpers.__super__.constructor.apply(this, arguments);
 }

 return ViewHelpers;

})(Backbone.Events); 
```

所以导致错误的行是

```
ViewHelpers.__super__.constructor.apply(this, arguments); 
```

__extends() 方法适用于 Backbone.View 而不是 Backbone.Events 有什么不同？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-06-17T01:16:21.690

那是因为`Backbone.Events`它不是一个“类”，所以它不能被扩展，它是一个可以混入其他对象的“模块”（参见[此处](http://backbonejs.org/#Events)的文档）。在 JavaScript 术语中，这意味着它不是一个`Function`，可以作为构造函数调用（即`new Backbone.Events`会抛出错误），它只是一个普通的 JS 对象，其属性（方法）可以分配给其他对象以使其成为事件调度程序。

在 CoffeeScript 中，您可以在`Backbone.Events`创建对象时将其混入：

```
class ViewHelpers
  constructor: ->
    _.extend @, Backbone.Events 
```

或者您可以扩展类的原型并避免将这些方法作为所有`ViewHelpers`实例的（自己的）属性：

```
class ViewHelpers
  _.extend @prototype, Backbone.Events 
```

这两种方法应该可以工作，并让您实例化 ViewHelpers 并将其用作事件调度程序：

```
vh = new ViewHelpers
vh.on 'foo', -> alert 'bar'
vh.trigger 'foo'​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-10T06:23:49.240

还有另一种方法（来自@epidemian 的回答），它不涉及复制`Backbone.Events`到一个新对象中以用作您的原型 - 相反，用于`Object.create`创建一个新对象以用作您的原型，`Backbone.Events`用作*其*原型。

```
class ViewHelpers
  @prototype = Object.create(Backbone.Events) 
```

现在`ViewHelpers`' 原型是一个新的空对象，其原型是`Backbone.Events`。`ViewHelpers`您可以在' 原型上定义方法而不会影响`Backbone.Events`，但所有`Backbone.Events`方法仍然可用于`ViewHelpers`，而无需将它们复制到新对象中。这不仅节省了（微不足道的）内存，而且如果你最终添加到`Backbone.Events`以后，所有`ViewHelpers`的 s 都会看到变化。

为此，您需要[具有 ES5`Object.create`功能的](http://kangax.github.io/es5-compat-table/)[浏览](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/create#Polyfill)器或[polyfill`Object.create`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/create#Polyfill)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-02T16:19:47.863

为了建立在@epidemian 的出色答案的基础上，我要补充一点，这有点小技巧，但它允许您使用`extends`问题中指定的语句编写您的类（它允许您调用`super`所有`Backbone.Events`方法）：

```
class Events
_.extend Events.prototype, Backbone.Events

class CustomEvents extends Events

    trigger: (event, etc...) ->
        # You can add overrides before
        super "custom:#{event}", etc...
        # or after the super class methods 
```

`_.extend`将调用工作到函数中会很整洁，`Events.constructor`但我无法让它工作......

# c# - 来自 MassTransit/RabbitMQ 中负载平衡应用程序的竞争消费者

> ID：11068066
> 
> 赞同：1
> 
> 时间：2012-06-17T00:35:21.543
> 
> 标签：c#, load-balancing, rabbitmq, high-availability, masstransit

我刚刚创建了一个 API，其中来自 API 的请求使用请求/响应模式通过 MassTransit/RabbitMQ 转发到后端服务。我们现在正在考虑将其推向生产，并希望在不同的服务上运行应用程序的多个实例（API 和服务），并使用负载均衡器在它们之间分配请求。

这使我们处于一个位置，如果其中一台服务器出于任何原因从池中取出，我们可能会丢失所有消息。我正在考虑在服务器之间创建一个 RabbitMQ 集群（每个服务器都有一个本地安装），并且想知道在这种情况下我将如何设置竞争消费者。

RabbitMQ 或 MassTransit 是否会处理此问题，以便只有一个消费者会收到请求，还是所有消费者都会收到并尝试响应？此外，对于 RabbitMQ 集群，MassTransit/RabbitMQ 如何处理节点故障？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T18:45:13.740

你应该看看这个文件。 [http://www.rabbitmq.com/distributed.html](http://www.rabbitmq.com/distributed.html)

很好地解释了常见的分布式场景。对于您的情况，我认为联合比集群更适合。如果您选择集群，您应该查看镜像队列。

如果您只需要性能，那么最好让一个服务器来处理您的消息队列，而另一台服务器将连接到它并产生/使用消息。

我不知道 Mass Transit 是如何工作的，但是，如果使用请求/响应，您应该将单次消息传递给单个消费者，如果消息没有被确认（消费者崩溃），则其他消费者应该接收它.

# height - 当父级的高度是动态的时，子级 div 为 100% | HTML/CSS

> ID：11068067
> 
> 赞同：0
> 
> 时间：2012-06-17T00:35:23.097
> 
> 标签：height, parent-child

![问题](../Images/cea6f10bcd76e4bb404dd67c0c7f499d.png)

我希望图像在文本旁边居中。每个框中的文本数量会有所不同，所以我无法设置高度。因为我研究人们主要使用两种垂直居中方式。使用 line-height 我可以'不使用，因为我没有固定高度。第二个是使用我不能使用的绝对定位，因为里面有图像的左 div 会覆盖文本。如果我将填充设置为文本，当图像不存在时不会好看。

我能想到的最好的方法是使用jQuery来获取和设置容器高度，然后根据高度设置边距。

```
<div class="container">
        <div class="image_holder">
            <img src="http://blog.oxforddictionaries.com/wpcms/wp-content/uploads/cat-160x160.jpg" alt="cat" />
        </div>

        <p>text</p>
    </div>

    <style type="text/css">
        .container {
            width:600px;
            overflow:hidden; }
        .image_holder {
            width:100px;
            height:100%;
            float:left;
            background:#eaf0ff; }
        p {
            width:500px;
            float:left; }
    </style>

    <script>

        $('.container').css('height', $('.container').height() );

        $('.image_holder').css('margin-top', ( $('.container').height() - $('.image_holder img').height() ) / 2 );

    </script> 
```

有没有办法用纯 CSS 干净地做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T13:30:44.367

我想出的最佳解决方案是将图片绝对定位在框中，然后如果框中没有图像，则使用 javascript 删除填充。

# cookies - Google Apps 脚本和 cookie

> ID：11068076
> 
> 赞同：1
> 
> 时间：2012-06-17T00:36:53.373
> 
> 标签：cookies, google-apps-script

我正在尝试发布并获取 cookie。我是新手，这对我来说是一个学习项目。我的印象是，如果您使用“set-cookie”，应该能够在 .toSource 中看到额外的“set-cookie”。（如果这会有所不同，我会尝试在 Google Apps 网站上完成此操作。）我错过了什么吗？这是我的代码：

```
 function setGetCookies() {

  var payload = {'set-cookie' : 'test'};
  var opt2 = {'headers':payload, "method":"post"};

  UrlFetchApp.fetch("https://sites.google.com/a/example.com/blacksmith", opt2);
  var response = UrlFetchApp.fetch("https://sites.google.com/a/example.com/blacksmith")

  var openId = response.getAllHeaders().toSource();
  Logger.log(openId)      

  var AllHeaders =  response.getAllHeaders();
  for (var prop in AllHeaders) {
    if (prop.toLowerCase() == "set-cookie") {
      // if there's only one cookie, convert it into an array:
      var myArray = [];
      if ( Array.isArray(AllHeaders[prop]) ) {
        myArray=AllHeaders[prop];
      } else {
        myArray[0]=AllHeaders[prop];
      }
      // now process the cookies
      myArray.forEach(function(cookie) {  
         Logger.log(cookie);
      });
      break;
    }
  }

} 
```

提前致谢！我引用它来开发代码：[Google Apps 脚本中的 Cookie 处理 - 如何在标头中发送 cookie？](https://stackoverflow.com/questions/10869932/cookie-handling-in-google-apps-script-how-to-send-cookies-in-header)

接受任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T18:44:14.497

当您未登录时，Google 协作平台不会在响应中设置任何 cookie。UrlFetchApp 不会传递您的 Google cookie，因此它的行为就像您已注销一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T08:29:00.367

首先，您要发送的名称为“test”的 cookie 没有值。你应该发送'test=somevalue'。

其次，我想知道您是否正在尝试将 cookie 发送到 googlesite 服务器并要求它使用您之前发送的相同 cookie 进行回复...？

我认为您正在尝试充当 HTTP 服务器，而您是 HTTP 客户端。作为 HTTP 客户端，您的角色只是发回 HTTP 服务器之前发送给您的任何 cookie（尊重域、到期...参数）。

# php - 为什么像这样的动态框架不可扩展？

> ID：11068077
> 
> 赞同：0
> 
> 时间：2012-06-17T00:37:24.093
> 
> 标签：php, dynamic, frameworks, scalability, scaling

我一直喜欢动态代码。很容易添加很酷的新功能的代码，无需做太多工作。出于这个原因，我构建了许多动态框架并在我的项目中使用它们。有些很小，有些很大。

举个例子，我构建了一个小的自定义错误报告框架，我现在几乎所有的项目都在使用它。

这是它如何工作的一个简单示例：

**error_reportLibrary.php** - 这是所有魔法发生的地方。类和所有方法都在这里。这是需要框架时包含的文件。

**error_reportConfig.php** - 这是我的配置所在（错误类型等）。这是这个文件的一个例子，它可以很好地解释这个小框架是如何工作的：

（**代码中的注释应该解释每个元素作为设置的作用**）

```
# ------ Main Settings ---------

$error_handlingSettings['errorStat']=true;//set this to false, and I wont display any errors. I don't care what the other errorTypes have to say.
$error_handlingSettings['default_highlight_color']="red";//this is the default highlight color that will be used if no color is defined for a specific errorType

# ------ Open API -------
$error_handlingSettings['open_api']['status']=true;//set this to true and I'll show errors for the Open API
$error_handlingSettings['open_api']['highlight_color']="#0ff";//shall I highlight any errors that occur for this specific type? if so, set this to a color.
$error_handlingSettings['open_api']['onRemoteAddr']=true;//shall I display errors to specific IP addresses?
$error_handlingSettings['open_api']['remote_addr'][]="86.8.168.228";//so I will show to this IP
$error_handlingSettings['open_api']['remote_addr'][]="127.0.0.1";//and this IP

# ------ SQL Core -------
$error_handlingSettings['sql_core']['status']=true;//set this to true and I'll show errors for the SQL Core
$error_handlingSettings['sql_core']['highlight_color']="orange";//shall I highlight any errors that occur for this specific type? if so, set this to a color.
$error_handlingSettings['sql_core']['onRemoteAddr']=true;//shall I display errors to specific IP addresses?
$error_handlingSettings['sql_core']['remote_addr'][]="86.8.168.228";//so I will show to this IP
$error_handlingSettings['sql_core']['remote_addr'][]="127.0.0.1";//and this IP 
```

所以你可能会说，每个错误类型只是我正在使用框架的项目的不同部分（例如，SQL Core 是我使用的数据库框架。所以如果发生任何数据库查询问题，这个 errorType 将是打印错误时查看）。

所以对于打印错误，这是语法：

```
errorModule::doError("errorType","error messege"); 
```

如您所见，我还可以做一些额外的小事。就像显示到某些 IP 地址并突出显示错误文本，我可以自信地说：不会影响框架的可扩展性。

请记住，以上只是我在项目中创建/使用的动态框架的一个示例。

现在，问题（几乎）：我的几所大学告诉我，像上面这样的动态框架在可扩展性方面很糟糕。尽管它们非常易于维护。因此，如果我在一个每天收到 100 万次以上请求的 Web 应用程序上使用上述框架，它会完全搞砸……

现在我并不反对他们的意见（实际上......）但我想知道这是为什么？为什么像上面这样的动态框架被认为不利于可扩展性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T01:12:57.387

我认为您在创建“动态框架”时没有抓住重点。

我早期的许多 PHP 代码的功能都是这样的；一个有一堆方法的类，也许还有一个构造方法来设置状态，使用全局变量来跟踪数组中的配置。与完全面向对象的方法相比，这些都使用了大量内存；虽然是比“现成”解决方案更少的内存和更快的速度；与我现在设计框架的方式相比，没什么。

您似乎没有利用接口、抽象类、类和接口继承等东西。这些类型的框架确实可以扩展，因为原始代码库非常小并且利用了特定的 OOP 功能（如 PHP 5.x 的魔术方法）。

将一个您认为在服务器上运行速度足够快的脚本乘以 100，并且您遇到了问题；并且您的内存不足，打出页面；事情会爬到你被迫重新启动/在服务器上投入更多资源的地步。

为什么？写得很糟糕的程序代码试图表现 OOP，甚至试图看起来像它，只是将旧习惯包装在一个新包中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T01:36:20.963

一般来说，PHP 既慢又笨重。它是高级别的，这意味着每条线路都携带“行李”。单行 PHP 代码将转换为大量低级指令是很常见的。

您仍然可以扩展严重依赖 PHP 底层系统的“动态”框架，并且不会在高级抽象上浪费大量时间或内存。

在我看来，一旦在生产环境中大吃一惊，大型、“方便”的框架往往会导致比它们解决的问题更多的问题。我最喜欢的老师总是提醒我 KISS - Keep It Simple Stupid。

当然，如果您想要真正可扩展的性能，您可能希望使用[hiphop](https://github.com/facebook/hiphop-php)编译您的 php，或者使用 C++ 或 D 等编译语言编写您的应用程序。

# ruby-on-rails - Rails 3.1 到 3.2.6 升级-asset_sync 错误

> ID：11068083
> 
> 赞同：2
> 
> 时间：2012-06-17T00:38:57.880
> 
> 标签：ruby-on-rails, heroku, amazon-s3, assets

Heroku 应用程序的 rails 3.1 到 3.2.6 升级取得了很大进展。

我使用asset_sync 并将资产预编译到S3 上。我使用asset_sync.rb 初始化程序来配置我的S3 连接详细信息。

当我尝试运行时出现错误

```
RAILS_ENV=production bundle exec rake assets:precompile

AssetSync: using /Users/bob/work/myapp/config/initializers/asset_sync.rb
rake aborted!
could not connect to server: Permission denied
    Is the server running locally and accepting
    connections on Unix domain socket "/var/pgsql_socket/.s.PGSQL.5432"?

Tasks: TOP => environment
(See full trace by running task with --trace)
rake aborted!
Command failed with status (1): [/Users/bob/.rvm/rubies/ruby-1.9.3-p...] 
```

这很奇怪。我检查了它*是否*按照[在 MAC OS X 上被拒绝的 Postgres 权限](https://stackoverflow.com/questions/10791904/postgres-permission-denied-on-mac-os-x)来监听该问题和相关评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T15:19:32.867

这不是asset_sync的错误，而是资产预编译过程本身（特别是在heroku上）`config.assets.initialize_on_precompile = false`在您的生产或application.rb中尝试

这将确保您的应用程序代码不会被不必要地初始化，这在预编译时，您的 heroku 数据库可能不可用。

此外，我相信 Rails 3.2.6 但 3.2.x 也不是问题。

# java - getWidth 不更新

> ID：11068086
> 
> 赞同：3
> 
> 时间：2012-06-17T00:39:43.610
> 
> 标签：java, android

为什么两个出局都打印84？第一个应该是 84，第二个应该是 220。如果我第二次点击，两个输出都是 220。

```
public void btnClick(View v) {
    System.out.println(textView1.getWidth());
    textView1.setTextSize(TypedValue.COMPLEX_UNIT_PX, 55);
    System.out.println(textView1.getWidth());
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T01:02:06.973

如果已经测量过，更改文本大小不会改变视图的大小。SetTextSize() 将触发一个 invalidate()，但这只会在未来触发一个 onDraw()。视图将不再被测量，其宽度和高度将保持不变。您可以在视图上调用 requestLayout() 以重新计算宽度和高度。

如果您只想在更改大小后查看文本的大小（就其尺寸而言），您可以尝试[http://developer.android.com/reference/android/graphics/Paint.html#getTextBounds(char[] , 整数, 整数, android.graphics.Rect)](http://developer.android.com/reference/android/graphics/Paint.html#getTextBounds%28char%5B%5D,%20int,%20int,%20android.graphics.Rect%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T00:58:07.160

调用后`TextView`大小不会立即更新。`setTextSize()`它只是使视图无效，稍后将更新。计算 View 的大小很昂贵，因为它取决于整个布局，因此不会立即完成。

稍后尝试获取宽度，您将获得正确的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T00:54:10.000

我认为第二个 getWidth() 在 setTextSize 完成之前正在运行。因此得到相同的结果。Java 在运行下一行之前不会等待每一行代码完成。

如果 setTextSize 行需要 5 毫秒才能完成，并且下一行在 setTextLine 运行后 2 毫秒运行，那么结果将是相同的。您可以将它们分成不同的方法。或添加等待。

此代码仅用于调试吗？

# silverlight - 是否建议将 Silverlight 用于新开发？

> ID：11068087
> 
> 赞同：2
> 
> 时间：2012-06-17T00:40:17.387
> 
> 标签：silverlight

在我的工作中，我们正在开发一个将使用 Silverlight + .NET 开发的 GIS 应用程序

但是，我听说微软不会支持 Silverlight，因为他们也停止了 Silverlight，是真的吗？

如果可以的话，是否建议使用 Silverlight 与我们可以使用哪个版本的 silverlight。?

谢谢。，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T00:59:03.460

About silver light support, you can find these answers from [Microsoft Silverlight Support Lifecycle Policy](http://support.microsoft.com/gp/lifean45).

Keeping in mind that MS would support [these browsers](http://www.microsoft.com/getsilverlight/locale/en-us/html/installation-win-SL5.html) till 2021, I would recommend using Silverlight5 if you really have to use Silverlight.

However for new developments I would recommend you to evaluate Html5 as well.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-17T02:59:53.933

使用 Silverlight 5。当前版本有 10 年的支持，它比 Flash、java 或该死的 html 更好。将来，您可以通过轻松移植代码迁移到另一个基于 .NET 的框架。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-17T07:31:52.573

是的！Silverlight 仍然是用于基于 Web 的业务线应用程序的最佳技术。Silverlight 将再获得 10 年的支持，并将在 Windows 8 桌面版中提供。Silverlight +[Arc]GIS 是一个很好的组合。创建功能齐全的应用程序非常容易，而且不费吹灰之力。银光[没有死](http://www.youtube.com/watch?v=dGFXGwHsD_A)。它仍然是一项很棒的技术，可以在（几乎）每个平台上使用。

最终归结为：

1) 你知道什么：你是 HTML/JavaScript 忍者吗？然后使用它，你比你自己的孩子更了解 Flex 吗？还是您是熟练的 .Net 刺客？

2）你有多少时间？你想学习新的东西并有大量的时间吗？然后去寻找那个新的闪亮对象（HTML5）并让自己获得一些街头信誉。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-17T02:35:13.257

这可能属于programmers.stackexchange.com。然而：

Silverlight 将继续得到*支持*一段时间，但所有迹象都表明它不再被积极开发。

如果您想要一种正在积极开发的技术，我建议将 HTML 5 用于基于 Web 的应用程序，而将 WinRT 用于 Windows 8+ 本机应用程序。

但是，最终，您应该选择最适合您的情况的方法。毕竟，WinForms 仍在许多成功的新建项目中使用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-24T10:57:42.740

Silverlight 基于[NPAPI](https://en.wikipedia.org/wiki/NPAPI)架构，虽然您仍然可以在 IE 和 Firefox 上运行它，但 Google Chrome（从浏览器版本 42 起）不再支持该架构。所有浏览器都支持 HTML5。

从职业的角度来看，使用 Silverlight（使用 XAML）可以让您更轻松地为 Metro/Windows Store/[通用 Windows 应用程序](https://en.wikipedia.org/wiki/Windows_universal_app_platform)开发应用程序（这些应用程序也可以使用 HTML5/JS 开发，但您会发现使用 C# 的开发人员基础更大/XAML)。

最后，如果您已经是 WPF 开发人员，那么为 Silverlight 开发是最快的。请参阅[Silverlight 与 Flash 与 HTML5](https://stackoverflow.com/questions/4059450/silverlight-vs-flash-vs-html5-should-i-care)。

# javascript - .hide 任何与子元素无关的点击动作

> ID：11068088
> 
> 赞同：0
> 
> 时间：2012-06-17T00:40:20.313
> 
> 标签：javascript, jquery

```
<div id="example" style="background:yellow;height:200px;width:200px;">
 <button>Some text</button>
</div>​ 
```

当它被点击时我`#example`想要它，但当它的子元素被点击时`.hide`我不希望它。`.hide`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T00:44:41.217

添加一个处理程序`<div>`，然后检查它是否是目标。

在[这个例子](http://jsfiddle.net/3fqkG/1/)中，`event.target`是实际被点击`this`的元素，但是是附加了处理程序的元素。

```
$('#example').on('click', function(event) {
    if (event.target === this) {
        alert('div, not button');
        $(this).hide();
    }
}); 
```

# ruby-on-rails - Rails 模型关联

> ID：11068092
> 
> 赞同：0
> 
> 时间：2012-06-17T00:40:51.520
> 
> 标签：ruby-on-rails, ruby

我正在尝试在包含以下 3 种类型的导轨中设计模型关联：

评论员、博文和评论

--> 它是“评论者”而不是“用户”，这意味着他们不是创建博客文章的用户......相反，他们只创建评论。

而 Commentator 和 Comment 之间的基本关系是显而易见的：

```
class Commentator < ActiveRecord::Base
    has_many :comments

class Comment < ActiveRecord::Base
    belongs_to: comments 
```

我不确定如何将“博客帖子”与此联系起来... --> 我希望能够询问评论员留下的所有博客帖子以及特定博客帖子的所有评论员。

由于这是一个多对多的关系，我会使用：

```
class Commentator < ActiveRecord::Base
    has_many :comments
    has_many :blogposts, :through => :comments

class Blogpost < ActiveRecord::Base
    "has_many :commentators, :through => :comments 
```

评论员创建博文时，我必须将评论中的commenentator_id和blogpost_id自己写到评论表的对应字段中吗？

我认为将博客帖子作为贯穿元素会更好，因为当评论员创建评论时，可以自动建立关系。（除了评论员不能对不存在的博客帖子创建评论......）但是，评论员到评论将不是多对多的关系，我不能再使用“has_many ... through”了。

将这 3 种模型关联起来的好方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T05:35:52.690

**所述问题的解决方案**

```
class Commentator < ActiveRecord::Base
  has_many :comments
  has_many :blogposts, :through => :comments
end

class Comment < ActiveRecord::Base
  belongs_to  :commentator 
  belongs_to  :blogpost  
end

class Blogpost < ActiveRecord::Base
  has_many :comments
  has_many :commentators, :through => :comments
  belongs_to :user

class User
  has_many :blogposts
end 
```

向现有博客文章添加评论（假设我们有 a`blog`和`commentator`变量）

```
blog.comments.create(:commentator => commentator, :comment => "foo bar") 
```

或者

```
commentator.comments.create(:blog => blog, :comment => "foo bar") 
```

**笔记**

我不会为用户使用两个模型（即用户和评论者），而是使用一个模型并分配权限来区分评论者和博客文章作者。

```
class User
  has_many :blogs
  has_many :comments
  has_many :commented_blogs, :through => :comments, :source => :blog
end

class Blog
  has_many :comments
  belongs_to :user
  has_many :commenters, :through => :comments, :source => :user
end

class Comment
  belongs_to :user
  belongs_to :blog
end 
```

*   创建博客条目：

    ```
    if current_user.has_role?(:blog_writer)
      current_user.blogs.create(params[:blog])
    end 
    ```

*   添加评论：

    ```
    current_user.comments.create(:blog => blog, :content => "foor bar") 
    ```

    **或者**

    ```
    blog.comments.create(:user => current_user, :content => "foor bar") 
    ```

# php - 用php重命名文件夹中的重复文件

> ID：11068093
> 
> 赞同：0
> 
> 时间：2012-06-17T00:40:55.483
> 
> 标签：php

谁能帮我解决以下问题？这是问题所在：我以 POST 的形式让人们可以上传文件。下面的代码检查“上传”文件夹中是否有另一个同名文件。如果是这样，文件将重命名为以下示例：

```
hallo.txt
1_hallo.txt
2_hallo.txt 
```

... 等等。

这是使用的代码：

```
$OriginalFilename = $FinalFilename = $_FILES['uploaded']['name'];
// rename file if it already exists by prefixing an incrementing number
$FileCounter = 1;
while (file_exists( 'uploads/'.$FinalFilename ))
$FinalFilename = $FileCounter++.'_'.$OriginalFilename; 
```

我想以不同的方式重命名文件。渐进式数字应该在文件之后，当然，在扩展之前。这是以前的相同示例，但以我想要的方式：

```
hallo.txt
hallo_1.txt
hallo_2.txt 
```

... 等等。

如何修改代码以达到该结果？提前感谢您，并对我的新手式问题感到抱歉。我真的是新手！:)

垫

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-17T00:45:49.613

只需更改`$FinalFilename`：

```
$FinalFilename = pathinfo($OriginalFilename, PATHINFO_FILENAME) . '_' . $FileCounter++ . '.' . pathinfo($OriginalFilename, PATHINFO_EXTENSION); 
```

或者（如果你有很多同名的文件并且经常迭代不止一次，那就更好了）：

```
$filename = pathinfo($OriginalFilename, PATHINFO_FILENAME);
$extension =  pathinfo($OriginalFilename, PATHINFO_EXTENSION);
while (file_exists( 'uploads/'.$FinalFilename ))
    $FinalFilename = $filename . '_' . $FileCounter++ . '.' . $extension; 
```

# wordpress - Wordpress：GD 库无法处理文件

> ID：11068094
> 
> 赞同：0
> 
> 时间：2012-06-17T00:41:30.163
> 
> 标签：wordpress, gd

当我将 4 个 2MB 的文件上传到我托管的 wordpress 帐户时发生了这种情况。它无法上传这些文件，我选择使用 FastStone 照片调整器来逃避它们，但是当我上传这些文件时出现错误。我还尝试在 WP 中上传我常用的文件，它有时会起作用，有时会不起作用。

我已经停用了我的 S3 插件，该插件将我上传到我的 Amazon S3 帐户的图像发送到我的 Amazon S3 帐户，并禁用了当我在配置选项中打开 WP_debug 时出现错误的插件。我还尝试在同一托管服务器中的其他 wordpress 安装上上传文件，但它失败或有时不稳定。我尝试从同一托管服务提供商上传到另一台服务器，它可以工作。

这是我遇到的错误：

> 注意： wp_register_script 被错误调用。在 wp_enqueue_scripts、admin_enqueue_scripts 或 init 挂钩之前，不应注册或排队脚本和样式。有关更多信息，请参阅 WordPress 中的调试。（此消息是在版本 3.3 中添加的。）在 /home/deremoec/public_html/deremoeWP/wp-includes/functions.php 的第 2825 行
> 
> 注意：未定义的变量： attr 在 /home/deremoec/public_html/deremoeWP/wp-content/themes/sandbox/functions.php 在第 500 行
> 
> 注意： unregister_widget_control 自 2.8 版起已弃用！请改用 wp_unregister_widget_control()。在 /home/deremoec/public_html/deremoeWP/wp-includes/functions.php 第 2705 行
> 
> 注意： unregister_widget_control 自 2.8 版起已弃用！请改用 wp_unregister_widget_control()。在 /home/deremoec/public_html/deremoeWP/wp-includes/functions.php 第 2705 行
> 
> 注意： has_cap 是使用自 2.0 版以来已弃用的参数调用的！插件和主题对用户级别的使用已被弃用。改用角色和能力。在 /home/deremoec/public_html/deremoeWP/wp-includes/functions.php 第 2789 行
> 
> 注意： has_cap 是使用自 2.0 版以来已弃用的参数调用的！插件和主题对用户级别的使用已被弃用。改用角色和能力。在 /home/deremoec/public_html/deremoeWP/wp-includes/functions.php 第 2789 行
> 
> 注意： has_cap 是使用自 2.0 版以来已弃用的参数调用的！插件和主题对用户级别的使用已被弃用。改用角色和能力。在 /home/deremoec/public_html/deremoeWP/wp-includes/functions.php 第 2789 行
> 
> 注意： has_cap 是使用自 2.0 版以来已弃用的参数调用的！插件和主题对用户级别的使用已被弃用。改用角色和能力。在 /home/deremoec/public_html/deremoeWP/wp-includes/functions.php 第 2789 行

这也是错误的屏幕截图。

![在此处输入图像描述](../Images/d1e9530a0f952f056427881ef41f3144.png)

我在想它是一个 GD 库问题，我只需要重置 apache 就可以让事情正常工作。但是我的虚拟主机 (HawkHost) 需要有确凿的证据证明情况确实如此。

这个错误的原因可能是什么。我已经刷新了我的 cookie 和缓存。我还尝试了隐身模式以确保错误仍然存​​在。我还将我的 WP-includes 的权限更改为 777 只是为了检查，但它仍然存在。

帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T02:13:32.627

图像加载和处理对系统来说可能很繁重。

首先-您发布的**通知**完全是-通知，*而不是错误*。（我说的是“注意：unregister_widget_control 自 2.8 版以来已弃用！使用。”类型通知）

关闭`wp_debug`会使它们消失。

第二 - 就像说的那样，图像处理对内存非常重要。您可以尝试增加为 PHP 分配的内存使用量，如下所示：

```
// in wp-config.php

define('WP_MEMORY_LIMIT', '64M');//Increase PHP Memory to 64MB

define('WP_MEMORY_LIMIT', '96M'); //Increase PHP Memory to 96MB 
```

（注意：由于您的主机设置，它可能不起作用，但在 95% 的情况下，它会起作用）

如果这没有帮助 - 尝试一张一张或两张上传图片，看看会发生什么。你必须明白，2mb 的图像是相当大的，并且将其中的 12 个一起上传在内存使用方面可不是开玩笑的。

它还取决于您的自定义大小功能（例如，它们是否需要裁剪？？）

您可以尝试的最后一件事是根本不处理图像（强烈不建议这样做 - 因为它会导致向用户提供非常大量的图像 - 并且会占用大量带宽）

# mysql - MySql Impass - 无法前进

> ID：11068098
> 
> 赞同：0
> 
> 时间：2012-06-17T00:42:05.710
> 
> 标签：mysql

我目前有我写的这个 sql 语句，它可以工作，但这不是我想要的。我已经为此工作了几个小时，但似乎无法更进一步。

`select parent.id as parent_id, parent.subject as parent,s.id,s.subject from (select s.id, s.subject from subjects s where parent_id = 0) parent join subjects s on parent.id = s.parent_id order by parent.subject, s.subject`

它抓取了所有主题并正确排序，但我还想在每个分组的顶部返回父主题（parent_id = 0）。这是因为有些父母可能没有下面的科目，但我仍然需要将它们归还。当我尝试这样做时，排序也关闭了，因为我首先想要父母，然后是子科目。希望这是有道理的，但如果不只是问的话。

任何帮助，将不胜感激。

谢谢

史蒂夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T01:28:56.113

您正在谈论按父行对行集进行分组。

我知道如何在 MySQL 中执行此操作的唯一方法是使用`GROUP_CONCAT()`不会按行对主题进行分组的函数，而是创建一个分组字符串。

以下是您可以执行的操作：

```
SELECT
    a.id,
    a.subject,
    GROUP_CONCAT(CONCAT(b.id, ':::', b.subject) ORDER BY b.subject SEPARATOR '|||') AS subjectlist
FROM
    subjects a
LEFT JOIN
    subjects b ON a.id = b.parent_id
WHERE
    a.parent_id = 0
GROUP BY
    a.id,
    a.subject
ORDER BY 
    a.subject 
```

所以这会给你一个结果集，比如：

```
id            |     subject     |     subjectlist
---------------------------------------------------------------------
2             |     subj1       |     23:::childsubj1|||28:::childsubj4
3             |     subj2       |     18:::childsubj8|||55:::childsubj16
4             |     subj3       |     NULL 
```

根据您在应用程序中使用的语言，您可以将字符串“分解”成数组，这些数组首先*分隔*每个主题，然后分隔该主题的 ID 和名称。`subjects``|||``:::`

显然，这样做的缺点是您必须确保您的子主题名称不包含您决定使用的分隔符或任何分隔符`|||`。`:::`

**编辑：**实验上，我想出了这个替代解决方案，它可能更接近你正在寻找的东西：

尝试：

```
SELECT
    c.subj,
    c.id
FROM
    (
        SELECT
            CONCAT('---> ', b.subject) AS subj,
            b.id,
            CONCAT(a.subject, b.subject) AS orderfactor
        FROM
            subjects a
        INNER JOIN
            subjects b ON a.id = b.parent_id
        WHERE
            a.parent_id = 0

        UNION ALL

        SELECT
            subject AS subj, 
            id, 
            subject AS orderfactor
        FROM
            subjects
        WHERE 
            parent_id = 0
    ) c
ORDER BY
    c.orderfactor 
```

此查询应为您提供以下结果：

```
subject                                 |       id       |
----------------------------------------------------------
subj1                                   |       2        |
---> childsubj1                         |       23       |
---> childsubj4                         |       28       |
subj2                                   |       3        |
---> childsubj8                         |       18       |
---> childsubj16                        |       55       |
subj3                                   |       4        |
subj4                                   |       5        |
---> childsubj10                        |       79       | 
```

# javascript - safari 5.1.7 中的慢动画（），但在 Firefox 和 chrome 中很好

> ID：11068102
> 
> 赞同：0
> 
> 时间：2012-06-17T00:42:52.330
> 
> 标签：javascript, jquery, css

我在这里所做的是将 div 容器从一侧动画到中心，当再次单击箭头时，它将再次移出屏幕。div 还包含两个图像，模糊版本和普通图像，它们在移动过程中切换以呈现运动模糊的外观。在最新的 Chrome 和 firefox 浏览器中一切看起来都不错，但在 safari 中却相当不稳定。

我知道 javascript 动画是一种成功或失败的努力，但我很想知道是否有任何方法可以优化我现在拥有的东西。此外，我想要实现的目标是否可以使用 css3 动画来完成？我被引导相信 css3 使用硬件 gpu，因此消除了任何主要的减速。

```
var cupcakeArray = new Array(new Array("Cupcake_01_blur.png","Cupcake_01.png"));

function loadCupCake(ini,direction){
    /*Set directional variables*/
    var dir = direction;
    var start;
    var end;

    var stageWidth = $('div#cupcakeStage').width(); //gets the current stage width 
    var centrepos = (stageWidth/2) - (743/2);

    if(dir == "left"){
        start = stageWidth;
        end = 0-743;
    }else if(dir == "right"){
        start = 0-743;
        end = stageWidth;
    }

    /*Remove the current cupcake in the centre*/
                    $('div.current-cupcake').removeClass('current-cupcake').addClass('remove-cupcake');

    $("div.remove-cupcake").animate({"left": end+'px'},{duration:500,easing:"easeOutQuart",complete: function() {
      $(this).remove();
    }});
    $("div.remove-cupcake img#img_blur").animate({opacity:1},{duration:100,easing:"easeOutQuart"});
    $("div.remove-cupcake img#img_normal").animate({opacity:0},{duration:300,easing:"easeOutQuart"});

    //preload images
    var num_loaded = 0;

    var $fragment;
    var $innerfrag;
    var img=[];

    $fragment = $('<div class="preload-cupcake" style="position: relative; left:'+start+'px;"/>');

    for(var i=0;i<2;i++){
        img[i] = new Image();

        img[i].onload = function(){
            num_loaded++;

            if(num_loaded == 1){
                $innerfrag = $('<img id="img_blur" src="'+this.src+'" alt=""/>');
                $fragment.append($innerfrag);
            }

            if(num_loaded == 2){
                $innerfrag = $('<img id="img_normal" src="'+this.src+'" alt=""/>');
                $fragment.append($innerfrag);

                $('div#cupcakeStage').append($fragment);

                $('div.preload-cupcake').removeClass('preload-cupcake').addClass('current-cupcake');

                $("div.current-cupcake").animate({"left": centrepos+"px"},{duration:400,easing:"easeOutQuart"});
                $("div.current-cupcake img#img_blur").animate({opacity:0},{duration:700,easing:"easeOutQuart"});
                $("div.current-cupcake img#img_normal").animate({opacity:1},{duration:700,easing:"easeOutQuart",complete: function() {

                }});

            }

        }

        img[i].src = cupcakeArray[ini][i];

    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T14:01:21.830

我会下载免费的 jquery CSS3 动画插件 Transit。它使用 CSS3 制作动画，并在不支持它们的浏览器上回退到动画。

[http://ricostacruz.com/jquery.transit/](http://ricostacruz.com/jquery.transit/)

它还支持动画排队和完整的功能。

# wpf - 在 WPF 应用程序中做广告？

> ID：11068103
> 
> 赞同：10
> 
> 时间：2012-06-17T00:43:03.517
> 
> 标签：wpf, desktop-application, desktop, ads

那可能吗？我知道像 Google Ads 这样的服务禁止在桌面应用程序中投放广告。是否有支持 WPF/.NET 的服务？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T10:58:37.747

首先，adsense 不允许在桌面应用程序中使用，您可以寻找其他广告网络。还有其他广告网络，如 amazon associates 等。您可以根据域搜索它们，例如：银行、零售。您可以查找/联系他们，了解他们在桌面使用方面的条款和条件。

并非所有人都会为您提供 .Net 的 API。如果亚马逊允许桌面使用：查看此 [API](http://aws.amazon.com/code/Product-Advertising-API/3941)

其次，wrt WPF的技术方面。您可以建立一个网站来从您的网络中注入广告。将 URL 嵌入到 WPF 应用程序的 Web 浏览器控件中。这将在桌面始终连接到互联网的情况下工作。

如果所有的门都关上了，而你仍然想从你的 wpf 应用程序中赚钱，你可以考虑在你的应用程序中使用不同供应商提供的工具栏。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-04-21T15:50:18.513

这是您在营销丛林中开始研究时可能遇到的一些术语。你可以想象像华尔街这样的广告市场，它与投标一起工作。

公开市场：您可能会收到 X 个广告。锁定用户导航的广告，否则......这是一团糟。

私人市场：精英，你最好有好的论据！

* * *

发布者：可能是您，您的网站，您的应用程序

广告商：一般品牌

SSP：供应方平台（面向出版商）

DSP：需求方平台（针对广告商）

RTB：实时竞价（所有公开市场都使用）

PMP：私人市场

程序化直接：主要由 PMP 用于简化广告商<>发布商定位和出价

库存：广告需求/供应

印象：发布商在网页/应用程序上展示的广告

* * *

Ad Exchange：SSP、DSP、Ad Network 和其他 Ad Exchange 购买/出售广告资源的市场

例如：Google Ad Manager (Google DoubleClick Ad Exchange) < 这个是 PMP

* * *

广告网络：（可选中介/PMP）

例如：Google AdSense、Facebook Audience Network、Microsoft Advertising、Amazon Associates、openX 等...

* * *

广告中介（与多个广告网络合作的可选中介）

## -------------------------------------------------- -------------------------------------------------- ----

说了这么多，您可能仍然想知道为什么桌面应用程序不被 PMP 接受？有很多原因，但这里有一些：

*   您不知道，品牌不想冒险与黑客工具或其他非法物品相关联
*   手机应用程序被接受，因为它们在“blabla 商店”发布之前都经过人工审核验证。所以，广告主不必太担心发布者的质量。

我的建议是，如果您想与 PMP 开展业务，那么您将必须证明自己。建立一个网站（并在其中放置广告），发布您的应用程序，建立声誉，写邮件，打电话，谈判。

我真诚地祝愿你成功！

# iphone - 时间戳和计算滑动速度

> ID：11068106
> 
> 赞同：5
> 
> 时间：2012-06-17T00:43:38.597
> 
> 标签：iphone, ios, timestamp, swipe, uitouch

嘿，我知道已经有一些关于此的帖子 - 但我仍然无法为我遇到的问题找到足够的答案。

刚接触 cocoa 和 iOS，我正在开发我的第一个 iOS 游戏。在这个游戏中，我希望能够计算用户滑动的速度。我很容易找到滑动动作中连续触摸之间的距离，但很难确定触摸之间经过的时间

*   在`touchesMoved:`我使用当前触摸进行计算以及跟踪上次记录的触摸作为 UITouch

*   在`touchesEnded:`我现在想计算滑动的速度，但是当我做类似的事情时：

    双倍timeDelay = event.timestamp - self.previousTouch.timestamp;

这总是返回 0。

但是，使用 gcc 我可以看到这两个时间戳实际上并不相同。此外，经过检查，我发现这些事件的 NSTimeInterval 值的大小约为 10^(-300)。这似乎很奇怪，因为 NSTimeInterval 应该报告自系统启动以来的秒数，不是吗？

我还尝试跟踪上一次触摸的 NSDate 并将其与 [NSDate timeIntervalSinceNow] 结合使用。这产生了更奇怪的结果，每次都返回一个大约 6 的值。同样，由于 timerIntervalSinceNow 返回 a `NSTimeInterval`，这个值很奇怪。

我对时间戳有什么不了解的地方？事件？对此的任何帮助将不胜感激！谢谢你的时间

一些支持代码：

在 sampleController.h 中：

```
@property(nonatomic) UITouch* previousTouch
@property(nonatomic) UITouch* currentTouch 
```

在 sampleController.m 中：

```
@synthesize previousTouch = _previousTouch, currentTouch = _currentTouch;
...
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
       self.currentTouch = [[event allTouches] anyObject];
       // do stuff with currentTouch
}
...
- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
       self.previousTouch = self.currentTouch;
       self.currentTouch = [[event allTouches] anyObject];
       // do stuff with currentTouch
}
...
- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
       float distanceMoved = [self.touch locationInView:self.playView].x - 
              [self.touch previousLocationInView:self.playView].x;
       // attempt 1
       double timeElapsed = self.currentTouch.timestamp - self.previousTouch.timestamp;

       // attempt 2
       double timeElapsed = event.timestamp - self.previousTouch.timestamp;

       // do stuff with distanceMoved and timeDelay
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T01:17:51.847

它`UIPanGestureRecognizer`具有`velocityInView`您可能会发现使用的特性。文档在[这里](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPanGestureRecognizer_Class/Reference/Reference.html)

此外，您可能会发现这个 ray wenderlich[教程](http://www.raywenderlich.com/6567/uigesturerecognizer-tutorial-in-ios-5-pinches-pans-and-more)内容丰富。

（这不是一个小问题 - 但是一些谷歌搜索会发现大量关于这类事情的材料。为更大的生活问题节省了所有的头发拉扯;-)

# c# - 类设计：隐藏“替换”的内部成员还是不隐藏？

> ID：11068107
> 
> 赞同：1
> 
> 时间：2012-06-17T00:43:40.990
> 
> 标签：c#, .net, class-design

我将对数据库的访问封装在连接类中，这些连接类都继承自同一个基本实现。这个基本实现有一个`protected`用于数据库访问的 LINQ 提供程序，许多子类将使用它——但不是所有子类。有些人可能需要他们自己的提供者，然后通常不会使用“默认”提供者。

这个“其他”提供者不会从默认提供者派生（但共享一个共同的准抽象祖先，它本身在任何地方都没有用），但在相应的类中具有完全相同的角色，所以看起来不错能够以完全相同的方式使用它，即使用相同的语法。我可以通过使用关键字隐藏相应的成员来实现这一点`new`，但我不确定这是否是好的做法。

一方面，这样做有助于避免意外使用错误的，因为只有一个。另一方面，习惯于对默认和特定提供者使用相同的名称可能会导致实际上忘记实现特定的提供者并使用此处不正确使用的提供者。因此，适当地命名默认值可能是有意义的；任何将开发特定连接类的人都会知道他们何时需要使用特定的提供者，并被提醒他们需要创建代码来实现这一点。

哪种推理更合理？我现在有点倾向于后者。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T01:55:41.973

`new`关键字*几乎*总是一个坏主意。对于您没有其他选择的情况，这是“最后的手段”功能之一，在这种情况下，您肯定有其他选择。

这两个提供者是否具有不同的语义/API，或者用法完全相同？如果是后者，您可能想要查看[适配器模式](http://en.wikipedia.org/wiki/Adapter_pattern)，并将该属性实现为类型的简单虚拟属性`ILinqProviderAdapter`（您将定义和实现），并在适当的地方覆盖。

# javascript - iOS JavaScript 安全错误

> ID：11068108
> 
> 赞同：0
> 
> 时间：2012-06-17T00:43:45.933
> 
> 标签：javascript, ios, security

有谁知道导致此错误出现的原因以及如何解决？我只是想弄清楚它的含义，因为我以前从未见过此消息。

![JavaScript 错误](../Images/0192d546c980c39dd0a4da5112e1e630.png)

编辑：页面上使用的唯一 javascript 在网站其他地方没有使用是这样的：

`<script type="text/javascript"><!-- function refreshURL(form) {         if(form.refresh.value != "0") {             form.action += ";refresh=" + form.refresh.value;         }         return true;     }     //--></script>`

您不允许更改表单操作属性吗？

# php - 我希望页面在到达页面底部时自动包含更多帖子

> ID：11068110
> 
> 赞同：1
> 
> 时间：2012-06-17T00:44:23.527
> 
> 标签：php, javascript, css, infinite-scroll

如标题所述，我希望在到达页面底部时显示更多帖子，现在有一个按钮，用户可以单击并显示更多帖子，但是当发生这种情况时，页面会刷新并返回顶部.

我已经包含了它目前的样子的图像：

![加载](../Images/d168d665d5b7b91ea46f3dbd551f5b39.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T01:07:48.923

我使用[jQuery 出现插件](http://code.google.com/p/jquery-appear/)来做到这一点。假设您将用户单击“加载更多”按钮时运行的代码放入名为 loadMore() 的函数中。然后你会创建一个 DOM 元素（我使用一个空的 div），说一个 id 为“foo”，输入一些代码：

```
$('#foo').appear(function() {
  loadMore();
}); 
```

那应该做你需要的。

# c - 相当于 stdint.h 中的双倍？

> ID：11068115
> 
> 赞同：3
> 
> 时间：2012-06-17T00:45:36.913
> 
> 标签：c, stdint

我试图找出通过 c89 的方法，现在我遇到了这个问题。`stdint.h`双数据类型是否有任何等价物？如果是，我们如何打印？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T00:48:33.337

`stdint.h`适用于整数类型，C 中没有固定大小的浮点类型。

顺便说一句，您提到了 C89，请注意`stdint.h`标准标题是 C99 的补充。

# c++ - C++ - 无法设置方法友谊

> ID：11068118
> 
> 赞同：-1
> 
> 时间：2012-06-17T00:47:37.820
> 
> 标签：c++, friend, circular-dependency, access-control

我尝试将友谊设置为课堂`GameSimulator`上的方法`Player`。

由于某种原因，我得到了错误。

### 游戏模拟器.h：

```
#ifndef GAMESIMULATOR_H_
#define GAMESIMULATOR_H_

#define NULL 0

#include "Player.h"

class GameSimulator {
public:
    void runSimulation();
    static GameSimulator* createGame();
    bool saveSession(string); // returns failure or successful
    bool loadSession(string); // returns failure or successful
    friend ostream& operator <<(ostream& out,GameSimulator& gs);
private:
    ~GameSimulator();
    GameSimulator();
    static GameSimulator* game;
    Player* *Population;
    unsigned numOfPlayers[4];
    int scores[4];
    unsigned numGeneration;
    unsigned numRounds;
};

#endif /* GAMESIMULATOR_H_ */ 
```

### 播放器.h

```
#ifndef PLAYER_H_
#define PLAYER_H_
// includes

#include <iostream>
using namespace std;
enum PlayerType {row,col}; // player type
enum Strategy {TrustingFool,nasty,rnd,winStayLooseShift,titForTwoTats}; // strategy type
enum Move {Cooparate , Defect}; // move type

//#include "GameSimulator.h"

class GameSimulator;

class Player {
protected:
    int *myPayoffs;
    int *otherPayoffs;
    PlayerType playerType;// row or col player
    Strategy myStrategy; // what strategy to play
    unsigned roundID;   // #id iteration
public:
    friend bool GameSimulator::saveSession(string filename);
    friend bool GameSimulator::loadSession(string filename);
    virtual ~Player() = 0;
    virtual Move getMove() = 0;
    virtual string getStartegy() = 0;
    Player();
};

#endif /* PLAYER_H_ */ 
```

问题是：

```
../Player.h:30:56: error: invalid use of incomplete type ‘struct GameSimulator’
../Player.h:20:7: error: forward declaration of ‘struct GameSimulator’
../Player.h:31:56: error: invalid use of incomplete type ‘struct GameSimulator’
../Player.h:20:7: error: forward declaration of ‘struct GameSimulator’
../Player.h: In member function ‘bool GameSimulator::saveSession(std::string)’:
../Player.h:28:11: error: ‘unsigned int Player::roundID’ is protected
../GameSimulator.cpp:43:54: error: within this context
../Player.h:24:7: error: ‘int* Player::myPayoffs’ is protected
../GameSimulator.cpp:44:34: error: within this context
../Player.h:28:11: error: ‘unsigned int Player::roundID’ is protected
../GameSimulator.cpp:51:54: error: within this context
../Player.h:25:7: error: ‘int* Player::otherPayoffs’ is protected
../GameSimulator.cpp:52:34: error: within this context
../Player.h:28:11: error: ‘unsigned int Player::roundID’ is protected
../GameSimulator.cpp:58:33: error: within this context
../Player.h:26:13: error: ‘PlayerType Player::playerType’ is protected
../GameSimulator.cpp:71:34: error: within this context
make: *** [GameSimulator.o] Error 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T00:55:31.243

您的 GameSimulator 类定义引用指向 的指针`Player`，但不需要完整类型。但是，您的`Player`类定义确实需要完整的`GameSimulator`.

`#include "Player.h"`从 GameSimulator.h 中删除并取消注释 Player.h中的注释`#include "GameSimulator.h"`。然后，`class Player;`在 GameSimulator.h 中前向声明。

请注意，这些类（.cpp 文件）中的每一个的实现都需要为另一个包含 .h 文件。

# javascript - javascript 可以从 MVC 中获取价值吗？

> ID：11068119
> 
> 赞同：0
> 
> 时间：2012-06-17T00:47:58.550
> 
> 标签：javascript, jquery, ajax, asp.net-mvc-3

我在我的一页中使用 asp.net mvc 3。我需要从列表对象中获取字符串列表。所以我这样做：

```
@{
    var orderIds  = from s in Model.Orders
                    select s.id;

} 
```

从我的一个ajax调用中，我需要“orderIds”

```
$("#renderBtn").click(function () {
            var inputData = {
                'orderIds':  need to get the order ids here 
            }; 

            $.ajax({
                url: '/Order/ExtraData',
                data: inputData,
                type: 'POST',
                contentType: 'application/json; charset=utf-8',
                dataType: 'json',
                success: function (result) {
                    ....
                },
                error: function () {
                    ...
                }
            });
        }); 
```

知道如何获取 orderIds 并在 javascripts 中使用吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T00:56:19.843

您的代码定义`orderIds`是服务器端变量；你需要我们一个客户端变量。您需要在创建视图时在`script`页面底部附近的块中定义该变量。

```
@{ 
  var orderIds = string.Join(",", Model.Orders.Select(s => s.id).ToArray());
}
<script>
       var orderIds  = [@orderIds]
</script> 
```

*警告：代码可能不完美，也可能无法编译，但这应该让您知道如何继续。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T03:32:43.200

如果您不（或不想）使用内联 javascript 并将其全部分开，您可以执行以下操作：

```
@{ 
  var orderIds = string.Join(",", Model.Orders.Select(s => s.id).ToArray());
}

<input type="hidden" id="orderIds" value="@orderIds" /> 
```

然后在你的 javascript/jQuery 中：

```
orderIds = $('#orderIds').val(); 
```

# html - 如何将所有屏幕尺寸的缩略图居中？

> ID：11068120
> 
> 赞同：0
> 
> 时间：2012-06-16T18:57:07.610
> 
> 标签：html, css, screen-size

```
body{
    width:auto;
    color:white;
    font-size:15px;
    width:100%;
    max-width:1980px;
    min-width:334px;    
    margin:0px auto;
} 
```

这是我的代码。我需要缩略图位于所有屏幕分辨率的中心。但我做不到。我什至尝试过标签。它也没有用。我该怎么办？

[http://www.kursatkarabulut.com/galeriler/kopya.php](http://www.kursatkarabulut.com/galeriler/kopya.php) 示例页面

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T00:54:33.693

```
#gallery { width: 980px; margin: 0 auto; } 
```

像 a 这样的块级元素水平居中`div`只需要指定宽度并将水平边距设置为 auto。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T01:07:05.800

有一篇关于使用 css 将任何东西居中的非常好的文章：

[http://designshack.net/articles/css/how-to-center-anything-with-css/](http://designshack.net/articles/css/how-to-center-anything-with-css/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T01:01:28.673

这应该用于使整个网页居中

```
 body {
      position: relative;
      font-family: Helvetica, Arial, sans-serif;
      font-size: 14px;
      width: 800px;
      margin: 0 auto;
      padding: 10px;
      color: #333;
   } 
```

# vim - 如何禁用纯文本文件的vim自动完成弹出窗口？

> ID：11068128
> 
> 赞同：1
> 
> 时间：2012-06-17T00:50:37.770
> 
> 标签：vim, plugins

经过几天的调整，我想我得到了 vim 的自动完成功能（omnicomplete + [Acp 插件](http://www.vim.org/scripts/script.php?script_id=1879)）可以正常工作。但令人讨厌的是它仍然对纯文本文件启用，所以我必须为 README 或纯文本文件键入 :DisableAcp。如何向我的 vimrc 添加逻辑，以便在它检测到空文件类型时在启动时禁用 Acp？

这是我写的：

```
if &filetype == ""
     let g:acp_enableStartup = 0
endif 
```

但这会在所有文件的启动时禁用 Acp。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T01:00:56.707

Add this to your vimrc:

```
autocmd WinEnter README,*.txt :DisableAcp
autocmd WinLeave README,*.txt :EnableAcp 
```

* * *

### Update:

```
autocmd WinEnter * :if &ft=='text' | DisableAcp | else | EnableAcp | endif 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T23:39:25.597

功能/方法是`:AcpDisable`，不是`:DisableAcp`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T17:57:35.520

在不知道为什么 vim 不尊重我之后，我决定改变逻辑

```
autocmd Filetype * | if &omnifunc=="" | call acp#disable() | endif 
```

所以我这样做了：

```
let g:acp_EnableAtStartup = 0
autocmd FileType python call acp#enable()
autocmd FileType ncl call acp#enable()
autocmd FileType javascript call acp#enable()
autocmd FileType html call acp#enable()
autocmd FileType css call acp#enable()
autocmd FileType xml call acp#enable()
autocmd FileType php call acp#enable()
autocmd FileType c call acp#enable() 
```

这有效。谢谢你的帮助。

# android - 重新创建 Activity 后，我用什么来恢复它的状态？

> ID：11068132
> 
> 赞同：2
> 
> 时间：2012-06-17T00:51:23.977
> 
> 标签：android, android-asynctask, android-activity, android-lifecycle

我一直在查看许多论坛讨论，但没有一个正确回答如何处理迫使实际活动重新启动的运行时更改。

例如，在我的情况下，我的活动使用 AsyncTask 在从服务器获取数据时显示 ProgressBar。但是，如果用户只是旋转屏幕，活动将重新启动并重复对服务器的请求。

如果在 AsyncTask 仍在 doInBackground() 中时完成屏幕旋转，等待服务器响应，我会收到 android.view.WindowLeaked 错误。

我只是想，每当屏幕旋转或发生其他中断时，我的活动从停止的地方继续工作，这会很难吗？

建议使用 onSaveInsanceState() 吗？如何将部分接收的 JSON 保存在 Bundle 中？或者也许我应该使用 onRetainNonConfigurationInstance()...

会送一瓶巴西人的饮料“caipirinha”给帮助我的好灵魂...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T01:15:33.390

您需要使用不同的架构。

将后台操作从 AsyncTask 移到服务中。服务在后台独立于任何 Activity 运行，并且在您更改设备的方向时不会重新启动。

后台 Service 可以通过广播与前台 Activity 进行通信。在服务中，您可以使用 sendBroadcast() 发送带有进度信息的广播。您可以使用 BroadcastReceiver 在 Activity 中接收广播。

编辑：对于根据您的情况可能适合的不太激烈的方法，请参阅：http: [//developer.android.com/guide/topics/resources/runtime-changes.html](http://developer.android.com/guide/topics/resources/runtime-changes.html)。特别是，如果横向和纵向不使用不同的资源，那么第二种方法（自己处理配置更改）可能会很好。

EDIT2：这里的一些附加信息： [Activity restart on rotation Android](https://stackoverflow.com/questions/456211/activity-restart-on-rotation-android)

# c# - 使用 Interlocked.CompareExchange

> ID：11068135
> 
> 赞同：1
> 
> 时间：2012-06-17T00:51:53.930
> 
> 标签：c#, asp.net, .net, multithreading, interlocked

伙计们，

我希望您评估下面的下一个代码。如您所见，我使用 Interlocked.CompareExchange，在这种情况下有意义吗？（我不确定，它是否正确）。

我会很高兴任何笔记、评论等。

```
private static T GetItem<T>(string cacheKey, Func<T> getItemCallback) where T : class
{
    var item = (HttpRuntime.Cache.Get(cacheKey) as T);

    if (item != null)
    {
        return item;
    }

    item = getItemCallback.Invoke();

    if (item != null)
    {
        HttpContext.Current.Cache.Insert(cacheKey, item);
    }

    return item;
}

public T Get<T>(string cacheKey, Func<T> getItemCallback) where T : class
{
    var item = (HttpRuntime.Cache.Get(cacheKey) as T);

    if (item != null)
    {
        return item;
    }

    Interlocked.CompareExchange(ref item, GetItem(cacheKey, getItemCallback), null);

    return item;
} 
```

谢谢你提前。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T00:57:02.400

不，在这种特殊情况下使用 CompareExchange 没有意义 - 局部变量只能从当前线程中访问。该行可以替换为：

```
 item =  GetItem(cacheKey, getItemCallback); 
```

我会考虑使用 CompareExchange() 来访问类中的字段。

# c# - 如何从 App.xaml 设置绑定到子属性

> ID：11068136
> 
> 赞同：0
> 
> 时间：2012-06-17T00:52:21.017
> 
> 标签：c#, wpf, binding, telerik, inotifypropertychanged

我在绑定到 ListBox 控件时遇到问题。实际上我在 App.xaml.cs 中有一个属性：

```
public partial class App : Application, INotifyPropertyChanged
{
    ObservableCollection<Panier> _panier = new ObservableCollection<Panier>();

    public ObservableCollection<Panier> PanierProperty
    {
        get { return _panier; }
        set
        {
            if (this._panier != value)
            {
                this._panier = value;
                NotifyPropertyChanged("PanierProperty");
            }
        }
    }
    public event PropertyChangedEventHandler PropertyChanged;

    protected void NotifyPropertyChanged(String property)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(property));
        }
    }
} 
```

此属性在此处的“Panier 类”中有一个子属性：

```
public class Panier : INotifyPropertyChanged
{
    private string _nom;
    private string _category;
    private int _prix;

    public string Nom
    {
        get { return _nom; }
        set
        {
            if (this._nom != value)
            {
                this._nom = value;
                NotifyPropertyChanged("Nom");
            }
        }
    }

    public string Category
    {
        get { return _category; }
        set
        {
            if (this._category != value)
            {
                this._category = value;
                NotifyPropertyChanged("Category");
            }
        }
    }

    public int Prix
    {
        get { return _prix; }
        set
        {
            if (this._prix != value)
            {
                this._prix = value;
                NotifyPropertyChanged("Prix");
            }
        }
    }
    public event PropertyChangedEventHandler PropertyChanged;

    protected void NotifyPropertyChanged(String property)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(property));
        }
    }
} 
```

在我的 MainWindow.xaml 页面中，我将 ListBox 绑定到 PanierProperty(parent property) ：

```
<telerik:RadListBox x:Name="PanierLB" Grid.Row="1" Height="200" Width="350" Margin="0 300 0 0"
    ItemsSource="{Binding PanierProperty, Source={x:Static Application.Current}}"
    DisplayMemberPath="{Binding Path=PanierProperty.Nom, Source={x:Static Application.Current}}">
</telerik:RadListBox> 
```

我的问题是 PanierProperty 绑定到我的列表框我看到列表框中的项目，如 Design.Panier Design.Panier Design.Panier 等...我不知道如何让 PanierProperty.Nom（Nom 是子属性）显示列表框。

有人可以帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T01:53:53.690

在`DisplayMemberPath`使用您只想显示的属性名称：

```
<telerik:RadListBox
    ...
    DisplayMemberPath="Nom" 
```

# c# - 如何更改默认 COM 对象名称 Microsoft Web 浏览器

> ID：11068137
> 
> 赞同：0
> 
> 时间：2012-06-17T00:52:33.510
> 
> 标签：c#, winforms, com, webbrowser-control

我在 winform 中使用 Microsoft Web Browser COM，但它的`Name`属性是灰色的，我无法更改它。默认名称是`axWebBrowser1`，老实说，它看起来不像一个好名字！知道如何更改此名称吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T01:30:25.460

如果您查看 Designer.cs 文件，您将看到：

```
 private AxSHDocVw.AxWebBrowser axWebBrowser1; 
```

您可以将名称更改为您想要的名称，我会确保您使用重命名选项，以便更改所有引用。

```
private AxSHDocVw.AxWebBrowser WebBrowser; 
```

# filesystems - 文件系统理论书籍

> ID：11068139
> 
> 赞同：10
> 
> 时间：2012-06-17T00:53:15.493
> 
> 标签：filesystems

有没有一本书解释FAT32、NTFS、ReiserFS、ext2、ext3、ext4、ZFS、XFS、btrfs、...

大多数书籍都按原样描述文件系统，但没有回答为什么要这样设计它的问题。我想要一本书，解释为什么每个文件系统的设计方式与其他文件系统相比的理论，解释性能与语义的各种权衡。这就像理论计算机科学遇到文件系统一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T09:21:06.537

没有一本书可以满足您的所有要求。Dominic Giampaolo 所著的《实用文件系统设计》是一本特别涵盖一个文件系统并简要回顾了其他文件系统的书。ext2 文件系统的在线描述可在[http://e2fsprogs.sourceforge.net/ext2intro.html](http://e2fsprogs.sourceforge.net/ext2intro.html)获得。ext2 的一些实现特定部分在 Mauerer 的“Linux Kernel Architecture”中进行了解释。

# ios - Loading Indicator in Status Bar iOS

> ID：11068143
> 
> 赞同：38
> 
> 时间：2012-06-17T00:53:49.360
> 
> 标签：ios, uistatusbar, indicator

I'm trying to figure out what the loading circle animation in the status bar is. A lot of apps, when they load data, have a spinner in the status bar to indicate that the app is loading data, but I can't figure out what its called to implement it. Can someone tell me what it is called?

If you don't know what I'm talking about, but have an iOS device, try loading a web page in Safari and look at the spinner in the status bar. Thats what I'm talking about.

Here is an screenshot I took ![Its the spinner in the statusbar](../Images/2ccf1f740de6df10b97ec5a1c2d5db22.png).

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-06-17T01:10:42.290

我认为您正在寻找的是：

```
[UIApplication sharedApplication].networkActivityIndicatorVisible = YES; 
```

斯威夫特 3

```
UIApplication.shared.isNetworkActivityIndicatorVisible = true 
```

如此处的文档： [https ://developer.apple.com/documentation/uikit/uiapplication/1623102-isnetworkactivityindicatorvisibl](https://developer.apple.com/documentation/uikit/uiapplication/1623102-isnetworkactivityindicatorvisibl)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-01-26T12:00:46.920

与上面在 Swift 中的相同：

```
UIApplication.sharedApplication().networkActivityIndicatorVisible = true 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-19T14:59:20.677

对于任何寻找答案的人来说，Swift 3，您只需将属性设置`isNetworkActivityIndicatorVisible`为`UIApplication`true。

例如在`didFinishLaunchingWithOptons`应用程序委托的函数中：

```
func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplicationLaunchOptionsKey: Any]?) -> Bool {        // Override point for customization after application launch.
    application.isNetworkActivityIndicatorVisible = true

    return true
} 
```

这基本上意味着：

```
UIApplication.sharedApplication().isNetworkActivityIndicatorVisible = true 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-04-14T21:44:56.243

**斯威夫特 4**

```
UIApplication.shared.isNetworkActivityIndicatorVisible = true 
```

* * *

## 回答 #5

> 赞同：-5
> 
> 时间：2012-06-17T00:55:56.427

It is `UIActivityIndicatorView`. You can check out its documentation and learn more here: [UIActivityIndicatorView](https://developer.apple.com/documentation/uikit/uiactivityindicatorview)

Also, to put it on the status bar, check out this link: [Activity Monitor Status Bar](http://www.iphonedevsdk.com/forum/iphone-sdk-development/1972-activitymonitor-status-bar.html)

# git - Git搜索所有差异

> ID：11068145
> 
> 赞同：31
> 
> 时间：2012-06-17T00:53:59.237
> 
> 标签：git, search, grep, diff

我正在尝试在我的 git 历史记录中搜索与一个非常具体的变量名相关的更改。

我试过这样做：

```
git diff HEAD~25000 | grep -in mydistinctvariablename 
```

结果并没有告诉我结果行来自哪个提交，并且需要相当长的时间（大约 5-7 分钟）。

有没有人有更好的解决方案，时间和结果明智？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-06-17T06:53:09.333

[git log](http://www.kernel.org/pub/software/scm/git/docs/git-log.html)通常是检查提交历史时使用的命令。`git log --grep`可用于在提交消息中搜索正则表达式。

您所追求的是`git log -S`简单地搜索提交内容或`git log -G`使用正则表达式搜索它：

> -S 查找引入或删除 . 请注意，这与仅出现在 diff 输出中的字符串不同；有关更多详细信息，请参阅 gitdiffcore(7) 中的镐条目。

因此，例如，在 msysGit 存储库中，我可以使用以下任一方法找到引入 Tcl 8.5.8 的提交：

```
C:\src\msysgit\src>git log --oneline --grep "8\.5\.8"
d938476 Make `NO_SFX=1 portable-release.sh` work
ef1dc94 Update tk to version 8.5.8
a910049 Update tcl to version 8.5.8
a702d7f tcltk: update to 8.5.8 and exclude release.sh from the cleanup list 
```

它只是在提交消息中查找 8.5.8 ，或者您想要查看仅在提交的差异中出现的字符串：

```
C:\src\msysgit\src>git log --oneline -S"version=8.5.8"
7be8622 tcltk: update release.sh script for tcl/tk 8.5.9
a702d7f tcltk: update to 8.5.8 and exclude release.sh from the cleanup list 
```

您在示例中的范围限制仍然可以在此处用于限制要检查的提交。仔细阅读 git log 手册，以了解它可以做的所有事情。

请注意，这`-S`只是寻找简单的字符串差异 - 如果您真的想使用类似于您的示例的正则表达式搜索内容，那么您应该使用该`-G`选项而不是，`-S`但这会明显变慢。

# android - To Parse or not to parse the content of the EditText field if the textInput attribute set to "Time"

> ID：11068160
> 
> 赞同：1
> 
> 时间：2012-06-17T00:56:36.613
> 
> 标签：android, datetime, android-edittext, textinput

I don't know if I should parse the content of the EditText field called "startTime" if the textInput attribute is set to "Time."

The input keyboard offers the "Phone Number" set of keys which doesn't quite work for entering time (i.e. I wasn't able to add a period [is present in the keyboard] or a semicolon [is missing] as in 10.55 or 10:55)

Plus, I want to know what format (12-hour vs. 24-hour) is used by default. It's important because then the question of handeling am/pm distinction comes into the picture.

Please include how to "set/fix it" snippets of code with your answer.

# java - How to offset Date to adjust to DST in Java

> ID：11068170
> 
> 赞同：2
> 
> 时间：2012-06-17T01:00:05.117
> 
> 标签：java, timezone, jodatime, dst

I have a job written in Java which runs on a specified time every day on that timezone. For example if I started the job for the first time at 0800 hrs it must alwas run the job on the same time everyday. This works fine if the timezone does not follow DST. But it breaks if it follows DST.

For example if I started my job for the first time in 0800 PST, it must always run in 0000 hrs in UTC as long as DST is not in effect but should move to 2300 hrs UTC the previous day if DST is in effect. How do I adjust my job start time programatically for these DST changes.

My input looks like this:

```
String startdate = "2012-06-16T08:00:00"
String timeZone = "PST"; 
```

These will be constants located in a config file, and once set cannot be modified. The input will PST regardless of whether DST is in effect or not.

So if the current timezone is in PST it will run on 0000 hrs UTC 2012-06-16 or else it will run on 2300 hrs UTC 2012-06-15.

How do I achieve this.

Note: This is not a homework question and I come from a region that does not follow DST, so it is a bit confusing for me.

Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T11:27:00.383

我不知道你是如何安排你的工作的，但如果你手动计算下一个执行日期，你可以使用`java.util.Calendar`如下：

```
TimeZone tz = TimeZone.getTimeZone( timeZone );
SimpleDateFormat dateFormat = new SimpleDateFormat( "yyyy-MM-dd'T'HH:mm:ss" );
dateFormat.setTimeZone( tz );
Calendar cal = Calendar.getInstance();
cal.setTimeZone( tz );
cal.setTime( dateFormat.parse( startdate ) ); 
```

然后在每次执行作业后，您可以计算作业的下一次运行时间：

```
cal.add( Calendar.DAY_OF_YEAR, 1 ); 
```

这增加了一个日历日，而不是 24 小时。因此，如果开始日期是当地时间上午 8 点，那么即使在 DST 期间，它将继续在当地时间上午 8 点运行。日历将为您处理 DST 转换。

# facebook - Facebook likes with multiple third-level domains or switching domains

> ID：11068171
> 
> 赞同：0
> 
> 时间：2012-06-17T01:00:13.650
> 
> 标签：facebook, facebook-like, dns, switching

Is it possible to configure a Facebook app to have FB likes on a website "aggregated" on different third-level domains? So, for instance, all the likes on [http://example.com/page-to-like](http://example.com/page-to-like) are the same of [http://www.example.com/page-to-like](http://www.example.com/page-to-like) and [https://secure.example.com/page-to-like](https://secure.example.com/page-to-like) ?

This could be very important also in case of switching to a new domain (third or second level). It's really incredible that with a domain switch all the likes will be erased...isn't it?

I already searched about on Google, Facebook and here without success, so I think that it's not possible to to this but this is the last try.

Thank you.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T02:34:42.800

这些中的任何一个都可以工作：

1.  在所有三个页面上，将点赞按钮指向其中一个页面，所有点赞都会累积在您点赞按钮指向的页面上。

2.  在三个 URL 上，将您的`og:url`元标记设置为指向该内容的规范 URL（即选择该内容的“主”URL）

# android - Extra detail for images that will be scaled on mobile devices

> ID：11068172
> 
> 赞同：2
> 
> 时间：2012-06-17T01:00:17.937
> 
> 标签：android, ios, html, mobile

I have a web game that has images for characters that I let the browser scale because I show them in multiple sizes on different pages, so I just want to cache them once. So, lets say an image is 500 pixels on a character page, but scaled down to 48 pixels on the map.

I have everything working on mobile browsers great, even drag and drop. But when you pinch zoom, the 48 pixels are scaled up. Since the images have additional resolution, is there any way to get the browser to use the additional resolution? Maybe using some crazy viewport setting?

And if so, will it screw up the positions on drag and drop?

# .htaccess - .htaccess 以 root 身份映射子目录

> ID：11068173
> 
> 赞同：0
> 
> 时间：2012-06-17T01:00:18.530
> 
> 标签：.htaccess, mod-rewrite, url-mapping

我发现了一个与此类似的问题，但似乎对我不起作用（[Make web root folder a sub-folder with .htaccess?](https://stackoverflow.com/questions/10364951/make-web-root-folder-a-sub-folder-with-htaccess)）。因此，在找不到任何问题的答案后，我寻求帮助——我花了 2 个小时在 stackoverflow 上浏览了 200 多页的结果，然后才放弃。无论如何...

我正在创建一个小型 CMS，并且我的目录结构设置如下：

```
application
-- html
-- -- public
-- -- -- theme
-- -- -- -- css
-- -- -- -- images
-- -- -- -- js
-- -- -- forum
-- -- -- -- index.php
-- -- -- -- viewforum.php
-- -- -- -- viewthread.php
-- -- -- -- comment.php
-- -- -- index.php
-- -- -- login.php
-- -- -- profile.php
-- -- admincp
-- -- -- theme
-- -- -- -- css
-- -- -- -- images
-- -- -- -- js
-- -- -- index.php
-- -- -- manage.php
-- -- -- users.php
-- -- -- settings.php
-- plugins
library 
```

我想要完成的是将 mydomain.com/application/html/public/index.php 映射到 mydomain.com/index.php 并使用 admincp 映射其 mydomain.com/admincp/index.php。这样看起来公共目录中的所有内容都位于根目录中。

目前，当我查看 mydomain.com 时，它显示来自 ../public/ 的 index.php 文件，但是当我尝试 mydomain.com/index.php 时，我得到一个未找到的错误。当我转到 mydomain.com/admincp 或 mydomain.com/admincp/manage.php 时，它可以工作——如果你知道一种使它更好的方法，请告诉我。:)

```
RewriteEngine on
RewriteRule ^$ application/html/public/
#RewriteRule ^(.*)$ application/html/public/$1 # Breaks site

RewriteCond  %{DOCUMENT_ROOT}/admincp  !-f
RewriteRule ^admincp/(.*)? application/html/admincp/$1
RewriteRule ^admincp$ admincp/ [L] 
```

如果我能在这个问题上得到任何帮助、建议和讽刺，我将不胜感激。

**- 编辑 -**

@Michael 为我提供了一个符合我目的的答案结果如下：

```
RewriteEngine on
# Don't need this...
#RewriteRule ^$ application/html/public/

# Need [L] and a RewriteCond
# Don't do the rewrite if this is an actual existing file
# such as what is rewritten into application/html/public
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
# And don't write admincp into public
RewriteCond %{REQUEST_FILENAME} !admincp
# With the above conditions met, write anything else into the public dir
RewriteRule ^(.*)$ application/html/public/$1 [L]

# Then just write admincp into application/html/admincp
RewriteRule ^admincp/(.*) application/html/admincp/$1 [L] 
```

现在我只需要修复查看根目录时显示我的目录索引的问题--mydomain.com/

**- 编辑 -**

当我重新添加时 `RewriteRule ^$ application/html/public/` 它并没有中断，所以它看起来像它应该的那样工作！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T02:33:41.317

匹配时缺少`[L]`标志和重写循环`public/`可能是您的站点中断的原因。如果第二条正确完成，则不需要公共区域的两条规则中的第一条：

```
RewriteEngine on
# Don't need this...
#RewriteRule ^$ application/html/public/

# Need [L] and a RewriteCond
# Don't do the rewrite if this is an actual existing file
# such as what is rewritten into application/html/public
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
# And don't write admincp or others into public

# Add each area you need to exclude into the () below
RewriteCond %{REQUEST_FILENAME} !(admincp|formus|otherarea1|otherarea2)

# With the above conditions met, write anything else into the public dir
RewriteRule ^(.*)$ application/html/public/$1 [L]

# Then just write admincp into application/html/admincp
#RewriteRule ^admincp/(.*) application/html/admincp/$1 [L]
# Update: Instead of the above rule, if you need additional rules like forums
# make the final rule generic to capture the directory in ([^/]+):
RewriteRule ^([^/]+)/(.*) application/html/$1/$2 [L] 
```

# android - 获取JSON，反序列化

> ID：11068176
> 
> 赞同：0
> 
> 时间：2012-06-17T01:01:01.793
> 
> 标签：android

我刚开始研究 android 应用程序开发。对于我的第一个测试应用程序，我想从公共休息 api 中获取一个 json 对象，例如 Twitter。

有没有办法将 JSON 反序列化为匿名对象？还是我必须手动解析它并使用键值对或类似的东西创建一个字典？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T04:36:17.693

```
import org.json.JSONException;
import org.json.JSONObject;
import org.json.JSONArray;

...

final String string = getWebString(webHelper, ctx, args);

try {
    return new JSONArray(string);
} catch (JSONException e) {
    Log.e(TAG, "Malformated JSON string: " + string + ", e = " + e);
    Utils.where(e);
    return null;
} 
```

# java - Switching from WebView to other views in Android

> ID：11068179
> 
> 赞同：2
> 
> 时间：2012-06-17T01:01:29.453
> 
> 标签：java, android, webview

I am developing a photo sharing app for Android. I have a web site that I want the Android to get `WebViews` for most of it, but I want the android to have a native home screen rather than the web site homescreen.

As of right now, I open a `WebView` for login (this is needed because i must login with twitter) but after that I want the android to go to its own native home screen rather that the web site home screen.

I have tried using the `shouldOverrideUrl()` method to no avail. Is it even possible to program and android app to switch from the `WebView` at a given url?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T02:20:57.323

只需创建一个方法来检查要捕获的 URL。然后让它不调用 URL 并打开主屏幕。

# django - 芹菜和亚马逊 ec2

> ID：11068182
> 
> 赞同：0
> 
> 时间：2012-06-17T01:03:32.007
> 
> 标签：django, amazon-ec2, rabbitmq, celery

您如何设置 celery（和 rabbit）以便它们可以通过 EC2 实例进行通信？

Rabbit 在用户 rabbitmq 上的实例上运行。我需要从实例之外的其他计算机向实例发送消息，在这种情况下，我正在使用计算机进行测试。

我已经将 celery 配置为在本地安装 rabbit 的计算机上工作。

此外，我遵循这些设置来生成咒语：

[http://docs.celeryq.org/en/latest/configuration.html#broker-settings](http://docs.celeryq.org/en/latest/configuration.html#broker-settings)

这是一个红帽实例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T16:18:35.683

这里的问题是兔子不接受 EC2 实例上的消息。

要确定这是否是您的错误，请在 rabbit@rabbit.log（位于 /var/log/rabbbitmq）启动/重新启动 rabbit 后查看日志，您应该会看到类似以下的错误：

```
=INFO REPORT==== 18-Jun-2012::21:41:05 ===
Disk free space limit now exceeded. Free bytes:5404372992 Limit:7836254208 
```

要更正此问题，您需要将 /etc/rabbitmq/rabbitmq.config 中的值更改为：

```
[{rabbit, [{disk_free_limit, {mem_relative, 0.5}}]}]. 
```

请注意，句号最后很重要。

mem_relative 的实际值需要根据您的需要和实际拥有的内存量进行调整。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T14:33:06.233

确保您的 EC2 安全组规则包含正确的端口，例如：

22 tcp 0.0.0.0/0
5672 tcp 0.0.0.0/0
11211 tcp 0.0.0.0/0
55672 tcp 0.0.0.0/0

# jquery - 使用带有 zClip (Flash) 的 jQuery 淡入/淡出

> ID：11068183
> 
> 赞同：3
> 
> 时间：2012-06-17T01:03:45.487
> 
> 标签：jquery, flash, fadein, zclip

我们一直在构建一个 CSS 生成器，并希望能够复制代码。我在淡入后调用 Flash 代码，所以 display:none; 应该没有问题。Flash 的东西。

在我一直在开发的网站上，如果您进入[Firebug](http://en.wikipedia.org/wiki/Firebug) ，那么您实际上可以看到代码下方的[zClip](http://www.steamdev.com/zclip/) `div`，如果您在 Firebug 中按下它，它会突然无缘无故地激活。

我已经把它放到了[jsFiddle](http://jsfiddle.net/)上，我在上一段中提到的活动根本没有发生。zClip`div`只是不显示。jsFiddle 链接是[http://jsfiddle.net/VFQDg/](http://jsfiddle.net/VFQDg/)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T23:40:17.723

只是为了关闭。经过几周的尝试，我最终解决了这个问题。仍然不是 100% 确定我做了什么！

请注意，我的 jsfiddle 链接错过了 zclip jQuery 文件并且可以正常工作。感谢安德鲁指出这一点！

# haskell - ubuntu haskell ghci 7.4.1 找不到模块“System.Random”

> ID：11068185
> 
> 赞同：34
> 
> 时间：2012-06-17T01:04:42.803
> 
> 标签：haskell

当我尝试在 ghci 中加载 .hs 时，它失败了：

```
import System.Random 
```

信息：

```
Could not find module `System.Random'
Use -v to see a list of the files searched for. 
```

我记得昨天它起作用了，今天突然它不起作用了。这个问题只发生在 Ubuntu 12.04 LTS、GHCi 7.4.1 上，当我在 windows haskell 平台和我工作的其他 linux 机器上尝试这个时。

我试着用

```
 sudo apt-get remove ghc
 sudo apt-get install ghc 
```

删除并重新安装 ghc，但问题仍然存在。

有人可以帮助我吗？谢谢

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-06-17T03:22:35.300

您必须安装[随机](http://hackage.haskell.org/package/random)包。你可能可以从你的包管理器（类似`libghc-random-dev`或类似的东西）那里得到它，或者你可以`cabal install random`.

**在 2021 年编辑**这些天，`cabal install`不是这样。相反，用于在您的字段`cabal init`中创建一个包和列表。编译可以用（just build）或（to execute the result）来执行；交互式使用可通过.`random``build-depends``cabal build``cabal run``cabal repl`

# php - Accessing Dynamically created variables inside function

> ID：11068186
> 
> 赞同：0
> 
> 时间：2012-06-17T01:05:20.623
> 
> 标签：php, mysql

Hi I've been trying to solve this for days so hopefully someone knows the answer.

At the top of my script I dynamically set a variable like so: `$p_id = $_GET['p_id'];`

I have then attempted to pass this variable to the following function in three different ways without any luck.

1)

```
public function Insert_Update($uid,$update,$uploads,**$p_id**) 
{
.....        

$query = mysql_query("INSERT INTO `messages` (message, uid_fk, poster_id,ip,created,uploads) VALUES ('$update', '$uid',
**'$p_id'**, '$ip','$time','$uploads')") or die(mysql_error());.... 
```

Interestingly, this approach works for the variable if I change the order of the arguments to `($p_id,$uid,$update,$uploads)`, however the other three variables become invisible to the function.

2)

```
public function Insert_Update($uid,$update,$uploads) 
{...

     // ... global **$p_id**;

        $query = mysql_query("INSERT INTO `messages` (message, uid_fk, poster_id,ip,created,uploads) VALUES ('$update', '$uid',
        **'$p_id'**, '$ip','$time','$uploads')") or die(mysql_error());.... 
```

3)

```
public function Insert_Update($uid,$update,$uploads) 
{
     ....
      //  $query = mysql_query("INSERT INTO `messages` (message, uid_fk, poster_id,ip,created,uploads) VALUES ('$update', '$uid',
     '".$_REQUEST[**'p_id'**]."', '$ip','$time','$uploads')") or die(mysql_error());... 
```

No matter what approach I try the function never sees the variable. Any ideas? Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T01:17:13.403

而不是仅仅使用`$p_id = $_GET['p_id'];`，首先确保它`$_GET['p_id']`有一个值。试试下面的代码：

```
$p_id = isset($_GET['p_id'])? $_GET['p_id'] : "some default value"; 
```

或者，如果您想在未设置变量的情况下引发错误，请尝试以下操作：

```
if(isset($_GET['p_id']))
{
    $p_id = $_GET['p_id'];
}
else
{
    echo "Please set 'p_id' and try again.";
    exit();
} 
```

此外，作为一般经验法则，如果可能，请避免在函数中使用与外部定义相同的变量名。例如，在您的函数中尝试命名它`$pid`而不是`$p_id`，因为这也是在您的函数之外使用的变量。

**编辑** 而不是定义`$p_id`为常量，然后将其添加到`$GLOBALS`数组中，然后将其传入，只需确保`$p_id`已设置，然后将其传入。例如：

```
$p_id = isset($_GET['p_id'])? $_GET['p_id'] : 2;

public function Insert_Update($uid,$update,$uploads,$pid) 
{
.....        

$query = mysql_query("INSERT INTO `messages` (message, uid_fk, poster_id,ip,created,uploads) VALUES ('$update', '$uid',
'$pid', '$ip','$time','$uploads')") or die(mysql_error());....
}

Insert_Update(1, "some text", "some file", $p_id); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T01:09:48.027

您只是通过创建一个新变量来浪费内存。

`$_GET['p_id']`可以在任何范围内访问，因此无论您在何处访问它都会自动可见。这比尝试将常规变量传递给它要容易得多。

# java - 为用户创建一个唯一编号的最佳方法是什么，该编号将在多次重新启动时保持不变

> ID：11068187
> 
> 赞同：1
> 
> 时间：2012-06-17T01:05:25.377
> 
> 标签：java, performance

我正在构建一个应用程序（在 java 中），我想为自己提供一些对其性能的测量。我正在计时多个长时间运行的进程，并且我有一个用于接收指标的 Web 服务器，但是我想为特定用户创建一个唯一的数字（我的程序不需要登录）在计算机上。

因此，如果 Joe 登录到计算机 A 并运行我的应用程序，它将给他一个唯一的号码，例如 1234。然后如果 Jane 登录到同一台计算机，它将使用不同的号码，例如 4321。但是，如果 Joe 登录到计算机B，它将完全创建一个单独的数字，例如 5678。另外（只是为了澄清）如果乔重新登录到计算机 A，它仍然会产生数字 1234。

另外，为了让它更具挑战性，如果同一台计算机在不同的网络上，那么我最好想要一个不同的 ID。

这些数字是任意的，并且会比这更长。到目前为止，我的代码**`8akb7d3n7lp1i1jo6apfhegp593kja5hg38b6o1a5godm38g97omm7bmc3jekc6apopgjhf9g`**从以下位置生成为我的 UID：

```
try {
    byte[] mac = NetworkInterface.getByInetAddress(InetAddress.getLocalHost()).getHardwareAddress();
    String names = new BigInteger(mac).toString(16) + InetAddress.getLocalHost().getHostAddress() + get("user.name") + get("os.version") + get("java.vendor");
    BigInteger uid = new BigInteger(names.getBytes());
    thisUsersUid = uid.toString(26);
} catch (SocketException ex) {
    Logger.getLogger(TimingLogger.class.getName()).log(Level.SEVERE, null, ex);
} catch (UnknownHostException ex) {
    Logger.getLogger(TimingLogger.class.getName()).log(Level.SEVERE, null, ex);
} 
```

我不希望这些信息容易阅读（如您所见`names="-f4b86eb8ee1192.168.0.20lee10.6.8Apple Inc."`），因此我将为其添加一个散列函数。

所以我的问题，毕竟这些宣传是：这是一个好方法吗？有没有比这更好的图书馆？还是我只是想要太多？

在此先感谢（即使是那些说：为什么？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T01:07:48.877

你可以使用[UUIDs](http://en.wikipedia.org/wiki/Universally_unique_identifier)。

在 Java 中：`UUID id = UUID.randomUUID();`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-17T01:29:15.443

你的问题并不完全清楚，所以我将陈述一些假设。

*   您的应用程序安装在用户的 PC 上。（它不是受沙盒限制访问的小程序或类似的东西。）
*   UID 由运行在用户计算机上的应用程序生成，而不是由服务器生成。
*   您不需要能够从 UID 中恢复用户名和机器身份；即它*只是*一个不透明的标识符。
*   您的解决方案不需要是安全的。（如果用户决定在同一台机器上搞乱并生成不同的 UID，那并不重要。）

如果是这样，这里有几个选项。

*   第一次运行应用程序时，生成一个随机的 UUID 并将其存储在用户的主目录或首选项中。随后，在应用程序存储它的位置查找现有 UUID。

*   生成 UID 作为用户帐户名和机器 MAC 地址的 MD5（或类似）哈希。这应该在重新启动后保持稳定……除非用户 PC 的实现方式有什么奇怪的地方。

（如果安全是主要问题，那么第一种方法不适用 - 您必须假设用户可以找到并删除保存的 UUID。在第二种情况下，您遇到的问题是用户可能会欺骗他的帐户名和/或更改PC 的 MAC 地址。对于任何方案，您都会遇到更大的问题，即在用户 PC 上安装或运行的任何软件都可能被黑客入侵，以用用户想要的东西替换 UID。简而言之，您正在与失败作斗争如果你的用户有黑客技能和动机，那就战斗吧。）

* * *

> 有没有比这更好的图书馆？还是我只是想要太多？

我不知道现有的图书馆会这样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T01:24:43.180

这是一个很好的加密哈希函数的应用程序。最先进的是 SHA-2。正如你所做的那样，连接所有独立的数量以某种可重复的方式构建一个字符串，并通过哈希运行它以获得一个 256 位（32 字节）的值。

您选择包括 OS 和 Java 供应商似乎很奇怪，因为这意味着例行升级或更改可能会产生新的 ID。根据您给出的标准，MAC、IP 和用户名对我来说似乎是最佳组合。

# ruby-on-rails - ActionView::Template::Error ( isn't precompiled):

> ID：11068190
> 
> 赞同：20
> 
> 时间：2012-06-17T01:06:21.663
> 
> 标签：ruby-on-rails, asset-pipeline

In production (Heroku), I'm getting the following error:

```
Started GET "/articles/1" for 50.134.181.231 at 2012-06-17 00:37:35 +0000
2012-06-17T00:37:35+00:00 app[web.1]: ActionView::Template::Error ( isn't precompiled):
2012-06-17T00:37:35+00:00 heroku[router]: GET wandr.com/articles/1 dyno=web.1 queue=0 wait=0ms service=497ms status=500 bytes=728
2012-06-17T00:37:35+00:00 app[web.1]: 
2012-06-17T00:37:35+00:00 app[web.1]:     74:   = image_tag @article.featured_photo_url(:sm).to_s
2012-06-17T00:37:35+00:00 app[web.1]:     75: 
2012-06-17T00:37:35+00:00 app[web.1]:     77:   = image_tag @article.background_photo_url(:md).to_s
2012-06-17T00:37:35+00:00 app[web.1]:     76: %p
2012-06-17T00:37:35+00:00 app[web.1]:     78: %p
2012-06-17T00:37:35+00:00 app[web.1]:     79:   = image_tag @article.cover_photo_url(:md).to_s
2012-06-17T00:37:35+00:00 app[web.1]:     80: 
2012-06-17T00:37:35+00:00 app[web.1]:   app/views/articles/show.html.haml:77:in `_app_views_articles_show_html_haml__1847247375488199378_48105500'
2012-06-17T00:37:35+00:00 app[web.1]: 
2012-06-17T00:37:35+00:00 app[web.1]:   app/controllers/articles_controller.rb:21:in `show'
2012-06-17T00:37:35+00:00 app[web.1]: 
2012-06-17T00:37:35+00:00 app[web.1]: Processing by ArticlesController#show as HTML
2012-06-17T00:37:35+00:00 app[web.1]:   Rendered articles/show.html.haml within layouts/admin (420.5ms)
2012-06-17T00:37:35+00:00 app[web.1]:   Parameters: {"id"=>"1"}
2012-06-17T00:37:35+00:00 app[web.1]: Completed 500 Internal Server Error in 486ms 
```

I'm running Rails 3.2.6, including actionpack 3.2.6 which I thought had this fix for this issue: [https://github.com/rails/rails/commit/6bb86e1f3f7f9e11ee1c056d8742125173ecbce1](https://github.com/rails/rails/commit/6bb86e1f3f7f9e11ee1c056d8742125173ecbce1)

I also tried this: ["ActionView::Template::Error ( isn't precompiled)" raised on "image_tag nil"](https://stackoverflow.com/questions/10070880/actionviewtemplateerror-isnt-precompiled-raised-on-image-tag-nil)

Basically, as long as one of the images on this page don't exist, it's throwing this error. If I upload the images, it works fine. Any ideas?

Thanks, --Mark

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-07-03T16:33:24.337

我假设您正在使用 CarrierWave 之类的东西来处理文件上传？您可以在上传器类中指定默认图像处理程序：

[https://github.com/jnicklas/carrierwave#providing-a-default-url](https://github.com/jnicklas/carrierwave#providing-a-default-url)

```
class MyUploader < CarrierWave::Uploader::Base
  def default_url
    "/images/fallback/" + [version_name, "default.png"].compact.join('_')
  end
end 
```

这将输出默认图像，而不是尝试访问资产管道中名为“”的不存在文件。

# javascript - 使用 jQuery 为 div 设置动画并将其下推的内容

> ID：11068191
> 
> 赞同：0
> 
> 时间：2012-06-17T01:06:48.873
> 
> 标签：javascript, jquery

我正在按特定顺序在 div 中制作动画。我以绝对定位将它们全部从顶部开始，`display: none`因此它们在同一空间中彼此重叠且不可见。按照由其他东西确定的特定顺序，我想将它们单独淡入并滑下已经淡入的那些。

我正在使用循环浏览评论的代码并检查一个是否准备好（通过另一个不重要的指标）。如果是这样，那就是我想做这个淡入/滑下其他东西的时候。这是我（不成功）尝试这样做的方式：

```
$('#item' + i).fadeIn("slow");
$('#item_' + i).animate({   
    top: '0px'
}, 500);
$('#item_' + i).css('position', 'relative'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T01:28:47.690

如果有，绝对定位有什么意义`display: none`？您可以使所有 div 相对定位或完全删除位置样式。然后只需抓住 div 并将其添加到所需的容器 - [http://jsfiddle.net/zvc76/1/](http://jsfiddle.net/zvc76/1/)

```
$("#item" + i).prependTo("#container").show(400); 
```

# javascript - IE8 & IE7 onchange 事件只有在重复选择后才会触发

> ID：11068196
> 
> 赞同：9
> 
> 时间：2012-06-17T01:08:31.123
> 
> 标签：javascript, html, radio-button, internet-explorer-8, dom-events

我有一组带有 onchange 处理程序的收音机：

```
<input type="radio" name="Q12" value="radio" id="Q12_0"  onchange="nextPnl('Q12');">
<br/>
<input type="radio" name="Q12" value="radio" id="Q12_1"  onchange="nextPnl('Q12');">
         ​

function nextPnl(did)
{
document.write(did);

}​ 
```

问题是在IE8&IE7中，onchange事件只有在反复选择后才会触发。

请在 IE 的开发者工具 [浏览器模式] IE8 中查看此演示：http: [//jsfiddle.net/3zwur/2/](http://jsfiddle.net/3zwur/2/)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-17T01:14:14.367

这是由于 IE7 和 IE8 的更改事件的错误。您应该改为收听该`click`事件。

如这张[关于 quirks mode 的表格](http://www.quirksmode.org/dom/events/change.html)所示，单选按钮和复选框上的更改事件在 IE7 和 IE8 中存在很大缺陷。

您可以像这样收听点击事件：

```
<input type="radio" name="Q12" value="radio" id="Q12_0"  onclick="nextPnl('Q12');">
<br>
<input type="radio" name="Q12" value="radio" id="Q12_1"   onclick="nextPnl('Q12');"> 
```

还有你小提琴的一个叉子：http: [//jsfiddle.net/T7VYL/](http://jsfiddle.net/T7VYL/)

通常，使用诸如[JQuery](http://jquery.com/)和[YUI](http://yuilibrary.com/)之类的 javascript 库会使您的生活更轻松，尽管根据我的测试，它们并没有修复旧版本 IE 中的这个错误。

如果您仍想收听更改事件，可以部署此修复程序：[http](http://www.ridgesolutions.ie/index.php/2011/03/02/ie8-chage-jquery-event-not-firing/) ://www.ridgesolutions.ie/index.php/2011/03/02/ie8-chage-jquery-event-not-firing/ . 基本上，它会侦听 click 事件，然后使元素触发 change 事件。

正如提问者的小提琴所示：http: [//jsfiddle.net/3zwur/3](http://jsfiddle.net/3zwur/3)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-19T16:10:52.703

另一种选择是像你一样拥有一个 onchange 事件，并添加一个从单选按钮移除焦点的 onclick 事件：

```
<input type="radio" name="Q12" value="radio" id="Q12_0" onclick="this.blur()" onchange="nextPnl('Q12');"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-04T07:16:17.757

另一种解决方案是`onchange`通过 jQuery 将事件放在封闭的表单上。

```
$('#form').on('change', function() {
    $(this).submit();
}); 
```

# python - 没有名为 Fitness python 导入错误的模块

> ID：11068198
> 
> 赞同：0
> 
> 时间：2012-06-17T01:09:08.830
> 
> 标签：python, django

我在导入 python 时遇到问题。这是我的结构。

```
 fitness/
    __init__.py
    authentication/ 
       __init__.py
       views.py
       urls.py 
    views.py 
    urls.py 
```

从 authentication.views 我正在尝试导入 Fitness.views

我一直在尝试使用

```
from fitness import views 
```

哪个日食读得很好，但是当我运行它时它说

```
No module named fitness 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T02:32:20.953

您需要将包含您尝试导入的模块的目录 (fitness.views) 添加到 PYTHONPATH。将其放在模块的开头。它将“../../”添加到 PYTHONPATH。那是包含健身文件夹的目录，因此您可以毫无问题地导入模块。

```
import sys, os
sys.path.append(os.path.abspath(os.path.join(os.path.dirname(__file__), '..', '..')))
from fitness import views 
```

# java - 创建/更新序列 - MongoDB

> ID：11068201
> 
> 赞同：3
> 
> 时间：2012-06-17T01:10:19.510
> 
> 标签：java, mongodb, spring-data, database

我创建了一个“序列”集合。它有“名称”和“计数器”字段。“name”字段设置为“Tag”，“counter”字段设置为 0。以下是返回“counter”字段下一个值的方法中的代码。

```
final Sequence tagSequence = mongoTemplate.findAndModify(
  new Query(Criteria.where("name").is("Tag")), 
  new Update().inc("counter", 1), 
  new FindAndModifyOptions().returnNew(true), Sequence.class); 
```

但是，这段代码不起作用。有什么输入吗？

我在这里找到了一个实现，[http://dev.bubblemix.net/blog/2011/04/auto-increment-for-mongodb-with-the-java-driver/](http://dev.bubblemix.net/blog/2011/04/auto-increment-for-mongodb-with-the-java-driver/)，但是，我想知道有什么问题用这段代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-13T01:52:58.963

如果您首先在 MongoDB 中保存了带有“Tag”名称的 Sequence 对象，则您的代码可以正常工作。我建议您使用注释对`name`字段进行`@Id`注释。前任。：

```
public class Sequence {
    @Id
    protected final String name;
    protected Long counter;

    public Sequence(String name, Long counter) {
        this.name = name;
        this.counter = counter;
    }
    public String getName() {
        return name;
    }
    public Long getCounter() {
        return counter;
    }
    public void setCounter(Long counter) {
        this.counter = counter;
    }

} 
```

在 MongoDB 中保存对象：

```
template.save(new Sequence("Tag",0L)) 
```

# php - PHP：从大文本文件的末尾检索行

> ID：11068203
> 
> 赞同：3
> 
> 时间：2012-06-17T01:10:48.750
> 
> 标签：php

我已经搜索了很长一段时间的答案，但没有找到任何可以正常工作的东西。

我有一些日志文件，其中一些`100MB`大小达到`140,000`文本行。使用`PHP`，我正在尝试获取`500`文件的最后几行。

我将如何获得`500`线路？对于大多数功能，文件被读入内存，这不是一个合理的情况。我最好远离执行系统命令。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-17T01:13:10.450

如果您使用的是“nix 机器”，您应该能够使用 shell 转义和工具“tail”。已经有一段时间了，但是是这样的：

```
$lastLines = `tail -n 500`; 
```

请注意刻度线的使用，它以 BASH 或类似方式执行字符串并返回结果。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-17T01:42:42.083

我编写了这个函数，它对我来说似乎工作得很好。它返回一个行数组，就像[file](http://php.net/file)一样。如果您希望它返回类似[file_get_contents](http://php.net/file_get_contents)的字符串，则只需将`return`语句更改为`return implode('', array_reverse($lines));`：

```
function file_get_tail($filename, $num_lines = 10){

    $file = fopen($filename, "r");

    fseek($file, -1, SEEK_END);

    for ($line = 0, $lines = array(); $line < $num_lines && false !== ($char = fgetc($file));) {
        if($char === "\n"){
            if(isset($lines[$line])){
                $lines[$line][] = $char;
                $lines[$line] = implode('', array_reverse($lines[$line]));
                $line++;
            }
        }else
            $lines[$line][] = $char;
        fseek($file, -2, SEEK_CUR);
    }
    fclose($file);

    if($line < $num_lines)
        $lines[$line] = implode('', array_reverse($lines[$line]));

    return array_reverse($lines);
} 
```

例子：

```
file_get_tail('filename.txt', 500); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-17T01:45:12.707

如果您想在 PHP 中执行此操作：

```
<?php
/**
  Read last N lines from file.

  @param $filename string  path to file. must support seeking
  @param $n        int     number of lines to get.

  @return array            up to $n lines of text
*/
function tail($filename, $n)
{
  $buffer_size = 1024;

  $fp = fopen($filename, 'r');
  if (!$fp) return array();

  fseek($fp, 0, SEEK_END);
  $pos = ftell($fp);

  $input = '';
  $line_count = 0;

  while ($line_count < $n + 1)
  {
    // read the previous block of input
    $read_size = $pos >= $buffer_size ? $buffer_size : $pos;
    fseek($fp, $pos - $read_size, SEEK_SET);

    // prepend the current block, and count the new lines
    $input = fread($fp, $read_size).$input;
    $line_count = substr_count(ltrim($input), "\n");

    // if $pos is == 0 we are at start of file
    $pos -= $read_size;
    if (!$pos) break;
  }

  fclose($fp);

  // return the last 50 lines found  

  return array_slice(explode("\n", rtrim($input)), -$n);
}

var_dump(tail('/var/log/syslog', 50)); 
```

这在很大程度上未经测试，但应该足以让您获得一个完全有效的解决方案。

缓冲区大小为 1024，但可以更改为更大或更大。（您甚至可以根据 $n * 估计的行长动态设置它。）这应该比逐个字符地查找要好，尽管这确实意味着我们需要`substr_count()`寻找新的行。

# c++ - 是否可以在 C++ 中将 bitset<8> 转换为 char？

> ID：11068204
> 
> 赞同：9
> 
> 时间：2012-06-17T01:10:57.470
> 
> 标签：c++, char, bitset

我有 bitset<8> v8，它的值类似于“11001101”，如何将其转换为 char？我需要一封信。比如字母“f”=01100110。

PS感谢您的帮助。我需要这个来说明位中的随机错误。例如，没有错误 f，有错误，比如 ♥，等等，所有文本都在文件中。在文本中，您可以清楚地看到此类错误。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-17T01:44:25.673

```
unsigned long i = mybits.to_ulong(); 
unsigned char c = static_cast<unsigned char>( i ); // simplest -- no checks for 8 bit bitsets 
```

类似于上述内容的东西应该可以工作。请注意，位字段可能包含一个无法使用纯文本表示的值`char`（它是由实现定义的，是否已签名）——因此您应该在转换之前始终检查。

```
char c;
if (i <= CHAR_MAX) 
c = static_cast<char>( i ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-28T11:19:31.840

提供的解决方案对我不起作用。我在 g++ 9 中使用 C++14。但是，我能够通过以下方式获得它：

```
char lower = 'a';
bitset<8> upper(lower);
upper.reset(5);
cout << (char)upper.to_ulong() << endl; 
```

我敢肯定，这可能不是最好的方法，但它对我有用！

# spring - long 类型的字段没有被 spring-data-neo4j 索引

> ID：11068207
> 
> 赞同：1
> 
> 时间：2012-06-17T01:11:50.800
> 
> 标签：spring, indexing, neo4j, spring-data-neo4j

正如标题所说。我创建了一个带`@NodeEntity`注释的 POJO，在其中我有一个字段，我想用作标识符，`long`我想索引和搜索它。

当我使用它保存我的 POJO时，`neo4jTemplate`它可以保存，并且我可以看到 neo4j 为我的类创建索引名称，但是当我尝试查询索引时，我什么也没得到。

我已经尝试过使用`int`和的领域`long`，但似乎都不起作用。查询时，我都尝试了`1`, `1l`，`"1"`但都没有返回我的节点。

我可以确认可以使用值为 an`int`或 a的键/值创建索引，`long`并且它们可以正常工作。

有人遇到过这种情况么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T15:43:41.520

可能是在 SDN 中，原语被索引为数字，这在 Lucene（neo4j 选择的默认索引）中具有特殊含义，并且它们需要以类似的方式进行查询......即使用数字范围查询。我不知道这在 SDN 中会是什么样子，但是通过使用 org.apache.lucene.search.NumericRangeQuery 创建查询对象来搜索可以查询的基元范围（例如 int 或 long）。

# css - 使用 CSS 将固定宽度的 div 居中，使用 margin:0 auto; 无效

> ID：11068210
> 
> 赞同：0
> 
> 时间：2012-06-17T01:12:32.003
> 
> 标签：css, html, centering

我之前能够弄清楚这一点，我记得基本上是这样做的，但由于某种原因它现在不起作用。我有一个需要居中的网站的中间列（[像这样](http://h.dropcanvas.com/yzebt/Screen%20Shot%202011-12-25%20at%207.09.30%20PM.png)），但正常的 margin:0 auto; 不起作用，而是产生了[这个](http://h.dropcanvas.com/yzebt/Screen%20Shot%202012-06-16%20at%208.33.31%20PM.png)（导航栏的链接项的 CSS 格式也不起作用，但这完全是一个不同的问题）。我的主列和父列的 CSS 是：

```
body {
    margin:0;
    padding:0;
    height:100%;
    background:url(images/BGTop.png) repeat-x;
}
div#main {
    margin:0 auto;
    padding:0 1px;
    size:auto 730px;
    background:url(images/mainbg.png) repeat-y;
} 
```

您会注意到 BG 也不起作用。这是同样的问题吗？为什么没有任何 CSS 工作（除了，我想，填充`#main`）？HTML似乎不是问题：

```
<body>
<div id="main">
    <ul class="navbar">
        <li class="navbar"><a class="navbar" href="#">home</a></li>
        <li class="navbar"><a class="navbar" href="#">bingo</a></li>
        ...
        <li class="navbar"><a class="navbar" href="#">music</a></li>
    </ul>
</div>
</body> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T01:17:38.350

你从哪里得到的`size`财产？你应该使用`width: 730px`. 该`size`行被丢弃，因为它无效。宽度仍在计算中`auto`。

[请参阅 jsFiddle。](http://jsfiddle.net/Lb6pU/)（您必须调整框的大小以使其居中。）

* * *

如果您好奇，该`size`属性用于分页媒体。我对它了解不多，但它并没有像你想象的那样做。它旨在设置页面的实际（现实生活）尺寸，最常见的是英寸，例如`size: 8.5" 11"`（一张纸的默认尺寸）。

# python - 如何去除前导或尾随空格 、、空 ， 空的 或者在Python中很容易？

> ID：11068217
> 
> 赞同：0
> 
> 时间：2012-06-17T01:14:15.617
> 
> 标签：python, html-parsing, strip

我有来自用户的段落输入。但是，总是有前导或尾随`<br>`、空`<p>`或空`<div>`，它们根本没有意义，它们会影响输出的格式。如何在 Python 中很好地正确地剥离它们？

用户输入的示例如下：

```
<br><div></div>
<div>Hello <a href="world.html">World!</a>.</div>
<br><br>
<div>Image below:<br>
<img src="abc.jpg" /><br><br></div><p></p> 
```

我想要的理想结果是：

```
<div>Hello <a href="world.html">World!</a>.</div>
<br /><br />
<div>Image below:<br />
<img src="abc.jpg" /></div> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T01:21:30.207

如果这次我对您的理解正确，您可以尝试删除空标签 - 即没有文本的标签：

```
>>> from BeautifulSoup import BeautifulSoup as bs
>>> tags = bs('<div></div><p></p><div>Test text.</div><p></p>').findAll()
>>> [ tag for tag in tags if tag.text ]
[<div>Test text.</div>] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-22T03:41:07.647

试试这个功能：

```
get_text('', '<br/>') 
```

我有同样的问题，通过标签将文本分成多行

```
'<br/>' 
```

这个函数至少可以将这些行合并成一行，这样可以去掉这个标签的影响。希望有效！

# android - AdView 无法实例化

> ID：11068218
> 
> 赞同：1
> 
> 时间：2012-06-17T01:14:52.597
> 
> 标签：android, admob, adview

我想在我的应用程序中包含一个 admob 横幅，但我收到了这个奇怪的错误。任何帮助都深表感谢。

这是xml代码

```
<com.google.ads.AdView android:id="@+id/adView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:gravity="bottom"
    ads:adUnitId="..."
    ads:adSize="BANNER"
/> 
```

在活动中，我写了以下代码

```
adview = (AdView)findViewById(R.id.adView);
adview.setVisibility(View.VISIBLE);
AdRequest re = new AdRequest();
adview.loadAd(re); 
```

在 Logcat 中，我收到以下错误

```
Not enough space to show ad! Wants: <480, 75>, Has: <0, 800> 
```

我怀疑肯定还有其他问题，因为我将 AdView 的宽度设置为“wrap_content”

在 xml 文件的图形视图中有这个警告

![在此处输入图像描述](../Images/84f4d511ac9bf093beb06803e3274ae8.png)

当我点击这个错误时，我看到有一个 java.lang.UnsupportedOperationException

如果您想进一步调查这里是完整的异常堆栈跟踪

```
java.lang.UnsupportedOperationException
at com.android.layoutlib.bridge.android.BridgeContext.getApplicationContext(BridgeContext.java:1272)
at com.google.ads.AdView.a(SourceFile:155)
at com.google.ads.AdView.a(SourceFile:329)
at com.google.ads.AdView.<init>(SourceFile:115)
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
at com.android.ide.eclipse.adt.internal.editors.layout.ProjectCallback.instantiateClass(ProjectCallback.java:397)
at com.android.ide.eclipse.adt.internal.editors.layout.ProjectCallback.loadView(ProjectCallback.java:165)
at com.android.layoutlib.bridge.android.BridgeInflater.loadCustomView(BridgeInflater.java:205)
at com.android.layoutlib.bridge.android.BridgeInflater.createViewFromTag(BridgeInflater.java:133)
at android.view.LayoutInflater_Delegate.rInflate(LayoutInflater_Delegate.java:83)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:702)
at android.view.LayoutInflater_Delegate.rInflate(LayoutInflater_Delegate.java:86)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:702)
at android.view.LayoutInflater.inflate(LayoutInflater.java:454)
at android.view.LayoutInflater.inflate(LayoutInflater.java:367)
at com.android.layoutlib.bridge.impl.RenderSessionImpl.inflate(RenderSessionImpl.java:324)
at com.android.layoutlib.bridge.Bridge.createSession(Bridge.java:321)
at com.android.ide.common.rendering.LayoutLibrary.createSession(LayoutLibrary.java:325)
at com.android.ide.eclipse.adt.internal.editors.layout.gle2.RenderService.createRenderSession(RenderService.java:372)
at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.renderWithBridge(GraphicalEditorPart.java:1323)
at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.recomputeLayout(GraphicalEditorPart.java:1077)
at com.android.ide.eclipse.adt.internal.editors.layout.gle2.GraphicalEditorPart.activated(GraphicalEditorPart.java:903)
at com.android.ide.eclipse.adt.internal.editors.layout.LayoutEditor.pageChange(LayoutEditor.java:399)
at org.eclipse.ui.part.MultiPageEditorPart$2.widgetSelected(MultiPageEditorPart.java:290)
at org.eclipse.swt.widgets.TypedListener.handleEvent(TypedListener.java:234)
at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
at org.eclipse.swt.widgets.Display.sendEvent(Display.java:3783)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1375)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1398)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1383)
at org.eclipse.swt.widgets.Widget.notifyListeners(Widget.java:1195)
at org.eclipse.swt.custom.CTabFolder.setSelection(CTabFolder.java:2743)
at org.eclipse.swt.custom.CTabFolder.onMouse(CTabFolder.java:1429)
at org.eclipse.swt.custom.CTabFolder$1.handleEvent(CTabFolder.java:257)
at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84)
at org.eclipse.swt.widgets.Display.sendEvent(Display.java:3783)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1375)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1398)
at org.eclipse.swt.widgets.Widget.sendEvent(Widget.java:1383)
at org.eclipse.swt.widgets.Widget.notifyListeners(Widget.java:1195)
at org.eclipse.swt.widgets.Display.runDeferredEvents(Display.java:3629)
at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3284)
at org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2640)
at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2604)
at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2438)
at org.eclipse.ui.internal.Workbench$7.run(Workbench.java:671)
at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:664)
at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:115)
at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:369)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:620)
at org.eclipse.equinox.launcher.Main.basicRun(Main.java:575)
at org.eclipse.equinox.launcher.Main.run(Main.java:1408) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T05:59:31.447

Adview 请求在布局创建后开始。所以你必须为布局提供特定的高度和宽度，以便给布局一些权重。为您提供了 wrap_content 布局的高度和宽度，因此它最初采用 0dp 的宽度，并且所有视图元素都基于该宽度加载到页面中。试试这样的固定布局大小，

```
<com.google.ads.AdView android:id="@+id/adView"
    android:layout_width="480dp"
    android:layout_height="75dp"
    android:gravity="bottom"
    ads:adUnitId="..."
    ads:adSize="BANNER"
/> 
```

而且您还必须在布局 xml 中的 xmlns 中提及 admob

```
xmlns:ads="http://schemas.android.com/apk/lib/com.google.ads" 
```

在资源中，您必须像这样声明 admob 包

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <declare-styleable name="com.admob.android.ads.AdView">
    </declare-styleable>
</resources> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T11:32:02.903

我有同样的问题，我解决了。您只需制作正确的 admob 尺寸，它需要 480、75。

# javascript - 在 keyup 上计算 javascript 事件

> ID：11068224
> 
> 赞同：0
> 
> 时间：2012-06-17T01:16:42.610
> 
> 标签：javascript

以下在 Jfiddle 中有效 - 但是当我以原始形式使用它时，total_full 和 total_half 字段是从其他字段自动计算的，因此没有 keyup 或 keydown 事件？因此，当“total_full”和total_half 字段更新时，“sub_total”字段不计算？

HTML

```
<td>Total Cost Full Day</td>
<input type="text" name="total_full" id="total_full"  />

<td>&nbsp;</td>
    <td>&nbsp;</td>

 <td>Total Cost Half Day</td>
<input type="text" name="total_half" id="total_half"  />

<td>&nbsp;</td>
    <td>&nbsp;</td> 
```

JAVASCRIPT

```
//Calculate Sub Total

function calculateSubTotal() {

    var SubTotal = +document.getElementById("total_full").value + +document.getElementById("total_half").value + +document.getElementById("add_on").value;

    document.getElementById("sub_total").value = isNaN(SubTotal) ? 0 : SubTotal;
}

document.getElementById("add_on").onchange = calculateSubTotal;
document.getElementById("add_on").onkeyup = calculateSubTotal;
document.getElementById("total_full").onchange = calculateSubTotal;
document.getElementById("total_full").onkeyup = calculateSubTotal;
document.getElementById("total_half").onchange = calculateSubTotal;
document.getElementById("total_half").onkeyup = calculateSubTotal;
calculateSubTotal;
document.getElementById("total_half").onchange = calculateSubTotal;
document.getElementById("total_half").onkeyup = calculateSubTotal; 
```

​</p>

[http://jsfiddle.net/newbie123/ue62p/5/](http://jsfiddle.net/newbie123/ue62p/5/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T01:31:06.630

onChange 仅在用户更新值时触发。如果您想要该功能，则必须将 calculateSubTotal 添加到更新 total_full 和 total_half 的事件中。

# php - 在类函数中包含 $_GET 或 $_POST 是一种好习惯吗？

> ID：11068225
> 
> 赞同：1
> 
> 时间：2012-06-17T01:17:04.437
> 
> 标签：php, web-services

我有一个 php 类，RegistrationController，

```
<?php
 class RegistrationController  extends ParentController {

    function __construct() {
        parent::__construct();
        echo 'We are inside RegistrationController';
    }

    public function register() {
        $name = $_GET['name'];
        echo "<li> We will register soon, $name </li>";
    }
 }
?> 
```

我正在通过这样的 URL 访问注册方法，[仅供参考，我在 .htaccess 中使用 RewriteEngine]

```
http://localhost:8888/Service/RegistrationController/register?name=Owl 
```

* * *

### 问题

现在，一切正常，我只需要确保我的查询`?name=Owl`在我请求一些计算时设置了这些变量。

Web 服务将**无法**从 Web 浏览器访问，这只是我想为我的移动应用程序制作的一项微不足道的服务。应用程序将按原样调用此 URL，除了详细信息 (var) 之外没有任何更改。

那么，在类的函数中可以使用 $_GET 或 $_POST 吗？它是可扩展的还是可维护的？

* * *

### 附加信息

我以非常通用的方式调用不同控制器的方法，所以在我的 Bottstrap 中，我只是调用这个函数，它让我可以用几行代码调用任何控制器的方法。

```
private function handleMethodCallOn($controller, $url) {
        //check if the URL has specified any method to call
        if(isset($url[1])) {//URL has been exploded earlier to get content
            if(method_exists($controller, $url[1])) {
                $controller->{$url[1]}();//HERE I am calling any function
            } else {
                $error = new error_404();
            }   
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T01:21:38.170

使用 post 并进入类方法是完全可行的。经验丰富的开发人员对您的代码的反应更可能是两件事：1\. 缺乏输入验证 2\. 将用户输入直接转储到页面的输出中（只能希望您在进入页面的过程中没有做类似的事情数据库）。

如果您对使用框架不感兴趣，您可以手动执行这些操作。但是，有无数可靠的 PHP 框架可以为您引导 RESTful 请求，将其抽象为一个对象，丰富的输入验证等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T01:23:50.690

这是“好的”，从某种意义上说它会起作用，但不应该这样做。

这是一个简单的修复。而是将名称作为参数添加到 register 方法。

简化版...

```
class RegistrationController  extends ParentController {

    function __construct() {
        parent::__construct();
        echo 'We are inside RegistrationController';
    }

    public function register( $name ) {
        echo "<li> We will register soon, $name </li>";
    }
}

$registration_controller->register( $_GET['name'] ) 
```

这使得代码 100% 透明。幕后没有秘密发生。

# javascript - Extjs 点击事件，双火

> ID：11068228
> 
> 赞同：0
> 
> 时间：2012-06-17T01:17:45.450
> 
> 标签：javascript, events, extjs, casperjs

我在玩 Casperjs 和 ExtJS

这是我的游乐场：http: [//jsfiddle.net/charlesbourasseau/fEDCu/](http://jsfiddle.net/charlesbourasseau/fEDCu/)

这是我的 test.coffee： casper = require('casper').create logLevel: 'debug' verbose: true

```
url = 'http://fiddle.jshell.net/charlesbourasseau/fEDCu/show/'

casper.start url, ->

  @click '.x-btn'

casper.run -> @test.renderResults true 
```

这是输出：

```
[info] [phantom] Starting...
[info] [phantom] Running suite: 2 steps
[debug] [phantom] opening url: http://fiddle.jshell.net/charlesbourasseau/fEDCu/show/, HTTP GET
[debug] [phantom] Successfully injected Casper client-side utilities
[info] [phantom] Step 2/2 http://fiddle.jshell.net/charlesbourasseau/fEDCu/show/ (HTTP 200)
[debug] [phantom] Mouse event 'click' on selector: .x-btn
[info] [remote] Click!
[info] [remote] Click!
[info] [phantom] Step 2/2: done in 4146ms.
[info] [phantom] Done 2 steps in 4233ms
FAIL Looks like you didn't run any test. 
```

有人知道我为什么得到 2`[info] [remote] Click!`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T01:57:31.103

我不确定 casperjs 但你的小提琴看起来不错。如果您单击一个按钮 - 您将获得一个日志条目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-17T10:16:39.303

这实际上是一个 CasperJS 问题，它已在 master 分支中修复。

# php - 在 bindParam 中使用 LIKE 进行 MySQL PDO 查询

> ID：11068230
> 
> 赞同：20
> 
> 时间：2012-06-17T01:18:06.213
> 
> 标签：php, mysql, database, pdo

我已经阅读了多个关于如何编写这些查询的示例，但我正在努力让这个特定的喜欢在使用时运行`bindParam`

这是匹配以a开头的用户名的正确方法吗？

```
$term = "a";
$term = "'$term%'";

$sql = "SELECT username 
        FROM `user` 
        WHERE username LIKE :term 
        LIMIT 10";      

$core = Connect::getInstance();

$stmt = $core->dbh->prepare($sql);
$stmt->bindParam(':term', $term, PDO::PARAM_STR);
$stmt->execute();
$data = $stmt->fetchAll(); 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-17T01:35:33.633

不，您不需要内部单引号，所以只需`$term = "$term%";`

您现在正在运行的语句将尝试匹配`'a%'`而不是`a%`

bindParam 将确保在将所有字符串数据提供给 SQL 语句时自动正确引用。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2019-04-15T01:24:53.237

您可以使用 bindValue ，假设您有一个**$query = "search string"**

```
$stmt->bindValue(':term', $query.'%'); // this will do like search for "search term XXXXX" 
```

相似地

```
$stmt->bindValue(':term', '%'.$query.'%'); 
```

或者

```
$stmt->bindValue(':term', '%'.$query); 
```

# android - Android 游戏开发：碰撞检测失败

> ID：11068232
> 
> 赞同：5
> 
> 时间：2012-06-17T01:18:27.553
> 
> 标签：android, collision-detection

我目前正在开发一款适用于 Android 的游戏，我希望您能就我遇到的问题提供专业知识。

**背景：**

1.  我的游戏包含独立于帧速率的运动，它在执行必要的速度计算之前考虑了增量时间值。

2.  该游戏是传统的2D平台游戏。

**问题：**

这是我的问题（简化）。让我们假设我的角色是一个站在平台顶部的正方形（“重力”是 characterVelocityDown 的恒定向下速度）。

我已将**碰撞检测**定义如下（假设 Y 轴指向下方）：

给定**characterFootY**是我的方形字符底部的 y 坐标，**platformSurfaceY**是我的平台的上 y 坐标，而**platformBaseY**是我的平台的下 y 坐标：

```
 if (characterFootY + characterVelocityDown > platformSurfaceY && characterFootY + characterDy < platformBaseY) {

                    //Collision Is True
                    characterFootY = platformSurfaceY;
                    characterVelocityDown = 0;

                } else{ 
                    characterVelocityDown = deltaTime * 6; 
```

当游戏以正常速度运行时，这种方法非常有效；但是，如果游戏速度变慢，**deltaTime**（即前一帧和当前帧之间经过的时间）会变大，并且**characterFootY** + **characterVelocityDown**超出定义碰撞检测的边界，并且角色会直接跌落（就像传送）。

我应该如何处理这个问题以防止这种情况发生？

提前感谢您的帮助，我期待向您学习！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T08:33:18.577

我想这里的问题是放缓是不可避免的。您可以尝试优化代码，但总会有用户使用慢速设备或游戏中繁忙的部分，这些部分需要比平时更长的时间来处理所有内容。与其假设一致的增量，不如假设相反。在意识到有人可以尝试将其安装在算盘上的情况下编写代码。

所以基本上，正如 SeveN 所说，让你的游戏循环处理减速。唯一真正做到这一点的方法（在我公认的有限经验中）是对 delta 的大小设置一个上限。这将导致您的时钟无法准确准时运行，但仔细想想，这就是大多数游戏处理减速的方式。您不会在奔腾 66 上启动 StarCraft 并让它以 5 FPS 但全速运行，它会减慢并正常处理它，尽管是在幻灯片放映中。

如果你做了这样的事情，在你的游戏减速期间，它会明显减速……但计算仍然应该是正确的。

编辑：刚刚意识到你是SeveN。做得好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T10:23:56.977

您需要做的是以恒定的增量时间运行您的物理循环，并在当前滴答声中根据需要对其进行多次迭代。

```
const float PHYSICS_TICK = 1/60.f; // 60 FPS
void Update( float dt )
{
    m_dt += dt;
    while( m_dt > PHYSICS_TICK )
    {
        UpdatePhysics( PHYSICS_TICK );
        m_dt -= PHYSICS_TICK;
    }
} 
```

有多种技术用于处理左刻度 ( m_dt )
最小刻度和最大刻度的上限也是必须的。

# objective-c - “预期类型”错误目标 C

> ID：11068235
> 
> 赞同：3
> 
> 时间：2012-06-17T01:20:29.847
> 
> 标签：objective-c, circular-reference

关于我正在尝试制作的这款红润游戏，我已经在这里问了很多次问题。我正在开发基于文本的冒险游戏。首先，我用 Java 制作它，因为这就是我正在学习的游戏课程。现在我正在尝试学习需要objective-c的iOS开发。参加完 Lynda Essentials 课程后，我对 Objective c 感觉很舒服（当然，以前的 Java 经验有帮助）。无论如何，我正在开发这款游戏，但我遇到了一个对目标 c 来说似乎非常独特的问题。

在 Java 中，当我有多个类时，它们只需要在同一个目录中，以便我在其他类中使用它们。在 Objective-C 中不是这种情况...如果我想在 B 类中使用 A 类，我必须导入头文件。对于这个游戏，我有两个自定义类，一个 Location 类和一个 Exit 类。Location 类需要知道它有什么出口（所以如果我想使用它们，我必须导入 Exit.h）并且出口需要知道它连接到哪个位置（所以我必须导入 Location.h）。由于称为循环引用（或类似的东西）的东西，我似乎不能这样做。但是，如果我不这样做，则会收到“预期类型”错误。所以我不知道该怎么做。我将在下面显示代码。

退出.h

```
#import <Foundation/Foundation.h>
#import "Location.h"

#define NORTH 0
#define SOUTH 1
#define EAST  2
#define WEST  3

@interface Exit : NSObject

@property NSString * dirName;
@property NSString * dirShortName;
@property int direction;
@property Location * connection;
-(id)initWithConnection:(Location *) loc andDirection:(int) dir;

@end 
```

退出.m

```
#import "Exit.h"

@implementation Exit

@synthesize dirName;
@synthesize dirShortName;
@synthesize direction;
@synthesize connection;

-(id)initWithConnection:(Location *)loc andDirection:(int)dir {
  self = [super init];
  if(self) {
    direction = dir;
    switch(direction) {
      case 0:
        dirName = @"North";
        dirShortName = @"N";
        break;
      case 1:
        dirName = @"South";
        dirShortName = @"S";
        break;
      case 2:
        dirName = @"East";
        dirShortName = @"E";
        break;
      case 3:
        dirName = @"West";
        dirShortName = @"W";
        break;
    }
    connection = loc;
  }
  return self;
}

@end 
```

位置.h

```
#import <Foundation/Foundation.h>

@interface Location : NSObject

@property NSString * title;
@property NSString * desc;
@property NSMutableDictionary * exits;
@property BOOL final;

-(id) initWithTitle:(NSString *) _title;
-(id) initWithDescription:(NSString *) _desc;
-(id) initWithTitle:(NSString *) _title andDescription:(NSString *) _desc;
-(void) addExit:(Exit *) _exit;

@end 
```

位置.m

```
#import "Location.h"

@implementation Location

@synthesize title;
@synthesize desc;
@synthesize exits;
@synthesize final;

-(void) addExit:(Exit *) _exit {

  NSString * tmpName = [_exit dirName];
  NSString * tmpShortName = [_exit dirShortName];
  [exits setObject:tmpName forKey:tmpShortName];

}

-(NSString *)description {
  NSString * tmp = [[NSString alloc] initWithFormat:@"%@\n%@\n",self.title,self.desc];
  for(NSString * s in exits) {
    [tmp stringByAppendingFormat:@"\n%@",s];
  }
  return tmp;
}

// Initialization Methods
-(id) init {
  self = [super init];
  if(self) {
    title = @"";
    desc = @"";
  }
  return self;
}

-(id) initWithTitle:(NSString *) _title {
  self = [super init];
  if(self) {
    title = title;
    desc = @"";
    exits = [[NSMutableDictionary alloc] initWithObjectsAndKeys:nil];
  }
  return self;
}

-(id) initWithDescription:(NSString *) _desc {
  self = [super init];
  if(self) {
    title = @"";
    desc = desc;
    exits = [[NSMutableDictionary alloc] initWithObjectsAndKeys:nil];
  }
  return self;
}

-(id)initWithTitle:(NSString *) _title andDescription:(NSString *)_desc {
  self = [super init];
  if(self) {
    title = title;
    desc = desc;
    exits = [[NSMutableDictionary alloc] initWithObjectsAndKeys:nil];
  }
  return self;
}

@end 
```

我真的希望我不会尝试做一些不可能的事情。我也希望我的代码可以被理解，并且我不会在这里自欺欺人；）感谢您的任何建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T01:27:05.707

编辑：只需重新阅读并现在更好地理解，您需要`@class Exit;`在 Location 标头中定义 Exit 类，然后您可以`@class Location;`在 Exit 标头中执行相同操作，以告诉编译器已定义类。然后，如果您要在实现文件 (.m) 中引用这些类，那么您将分别导入`Exit.h`文件和`Location.h`文件

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-17T01:26:45.813

我开始遵循的经验法则，起初对我来说似乎是违反直觉的：

在你的头文件中，大量使用**“前向声明”**，只有两个例外：你正在扩展的类的头文件，以及你所遵循的协议的头文件；并且只在您的文件中执行`#import`指令。`.m`

这应该解决循环引用错误；它确实是我的。

看[这里，并为](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocDefiningClasses.html)**“前进”**这个词做一个“查找” 。

# java - 如何使用 Tapestry 3 对 IMarkupWriter 的内容进行单元测试？

> ID：11068236
> 
> 赞同：0
> 
> 时间：2012-06-17T01:20:48.117
> 
> 标签：java, html, unit-testing, tapestry

我正在处理一个使用 Tapestry 3 的旧项目，我想为自定义组件编写测试。有没有办法测试已经写入的内容`IMarkupWriter`？

Tapestry 似乎使这个接口的实现类非常难以测试。调用`toString()`它只会返回`Object.toString()`.

创建一个创建新的子类`toString()`是不可能的，因为它们将所有成员都设为其超类中的私有成员。

我是否需要`IMarkupWriter`从头开始编写一个实现？

我将不胜感激任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T19:16:26.793

好吧，我倾向于使用[EasyMock](http://www.easymock.org/)来模拟界面。

但是，在测试组件时，认为您可以单独对它们进行单元测试并有任何有意义的保证它们将在生产中运行，这有点冒昧，因为这些组件完全存在以与其他组件协同运行，并且应用程序作为一个整体：根据定义，这意味着有意义的测试是集成测试。我建议使用[Geb](http://gebish.org)进行集成测试。

# mongoose - Mongoose.js Doc Refs - 如何安全删除

> ID：11068237
> 
> 赞同：3
> 
> 时间：2012-06-17T01:21:15.107
> 
> 标签：mongoose

“调用填充返回的文档成为功能齐全、可删除、可保存的文档。不要将它们与嵌入式文档混淆。调用它的 remove 方法时要小心，因为您将从数据库中删除它，而不仅仅是从数组中删除。”

我觉得这有点可怕——如何在不删除该文档的情况下安全地取消对 mongoose 文档中文档的引用的链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T02:54:06.993

不太确定您要做什么。您可以调用`toObject()`Mongoose 文档来生成文档的纯 JavaScript 对象表示，该文档可以安全地传递和修改，而不必担心意外更改数据库。

# javascript - 在 JavaScript 中解析 CSS 颜色的最有效方法是什么？

> ID：11068240
> 
> 赞同：29
> 
> 时间：2012-06-17T01:21:45.973
> 
> 标签：javascript, css, performance, parsing, colors

给定一个有效 CSS 颜色值的字符串：

*   #fff
*   #ffffff
*   白色的
*   RGB(255, 255, 255)

需要得到如下格式的数字数组：[R, G, B]

在 JavaScript 中执行此操作的最有效方法是什么（假设是主流浏览器）？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-17T01:32:45.830

```
function parseColor(input) {
    var m; 
```

显然，数值比名称更容易解析。所以我们先做这些。

```
 m = input.match(/^#([0-9a-f]{3})$/i)[1];
    if( m) {
        // in three-character format, each value is multiplied by 0x11 to give an
        // even scale from 0x00 to 0xff
        return [
            parseInt(m.charAt(0),16)*0x11,
            parseInt(m.charAt(1),16)*0x11,
            parseInt(m.charAt(2),16)*0x11
        ];
    } 
```

那是一个。现在对于完整的六位数格式：

```
 m = input.match(/^#([0-9a-f]{6})$/i)[1];
    if( m) {
        return [
            parseInt(m.substr(0,2),16),
            parseInt(m.substr(2,2),16),
            parseInt(m.substr(4,2),16)
        ];
    } 
```

现在对于`rgb()`格式：

```
 m = input.match(/^rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i);
    if( m) {
        return [m[1],m[2],m[3]];
    } 
```

可选地，您还可以添加对`rgba`格式的支持，甚至`hsl`/`hsla`如果您添加 HSL2RGB 转换功能。

最后，命名颜色。

```
 return ({
        "red":[255,0,0],
        "yellow":[255,255,0],
        // ... and so on. Yes, you have to define ALL the colour codes.
    })[input]; 
```

并关闭功能：

```
} 
```

* * *

实际上，我不知道我为什么要费心写这些。我刚刚注意到您指定了“假设主要浏览器”，我假设这也意味着“最新”？如果是这样的话...

```
function parseColor(input) {
    var div = document.createElement('div'), m;
    div.style.color = input;
    m = getComputedStyle(div).color.match(/^rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i);
    if( m) return [m[1],m[2],m[3]];
    else throw new Error("Colour "+input+" could not be parsed.");
} 
```

最新的浏览器会将任何给定的颜色转换`rgb()`为其计算样式的格式。把它拿回来，读出来。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-10-14T18:08:30.613

对于 HTML5 兼容的浏览器，我使用指定的值将单个像素写入 a `<canvas>`，然后读回`rgba`四边形。

为了性能，我记住了这个函数，这样对相同颜色字符串的重复调用就不必执行画布操作。

**为 ES6 更新编辑**并删除 jQuery 依赖项

**EDIT (1j01)**添加了无效颜色检测，以及支持传递后备颜色的功能

```
let memoize = function(factory, ctx) {
    var cache = {};
    return function(key) {
        if (!(key in cache)) {
            cache[key] = factory.call(ctx, key);
        }
        return cache[key];
    };
};

let colorToRGBA = (function() {
    var canvas = document.createElement('canvas');
    canvas.width = canvas.height = 1;
    var ctx = canvas.getContext('2d');

    return memoize(function(col) {
        ctx.clearRect(0, 0, 1, 1);
        // In order to detect invalid values,
        // we can't rely on col being in the same format as what fillStyle is computed as,
        // but we can ask it to implicitly compute a normalized value twice and compare.
        ctx.fillStyle = '#000';
        ctx.fillStyle = col;
        var computed = ctx.fillStyle;
        ctx.fillStyle = '#fff';
        ctx.fillStyle = col;
        if (computed !== ctx.fillStyle) {
            return; // invalid color
        }
        ctx.fillRect(0, 0, 1, 1);
        return [ ... ctx.getImageData(0, 0, 1, 1).data ];
    });
})();

colorToRGBA('white') // [255, 255, 255, 255]
colorToRGBA('blah') // undefined

let colorOrFallbackColorToRGBA = (color, fallbackColor)=> {
    // Don't short-circuit getting the fallback RGBA -
    // it's already memoized, and we want to show an error
    // if the fallback color is invalid even if the main color is valid
    var fallbackRGBA = colorToRGBA(fallbackColor);
    if (!fallbackRGBA) {
        throw new Error(`Invalid fallbackColor ${
            fallbackColor != null ? JSON.stringify(fallbackColor) : fallbackColor
        }`);
    }
    return colorToRGBA(color) || fallbackRGBA;
};

colorOrFallbackColorToRGBA('white', 'transparent') // [255, 255, 255, 255]
colorOrFallbackColorToRGBA('blah', 'transparent') // [0, 0, 0, 0] 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2014-02-23T08:48:32.270

### 更快更有效的方式

除了@NiettheDarkAbsol 的正确答案，还有一些方面：

*   backgroundColor 可以是`rgb( 3 values )`或`rgba( 4 values)`

*   `match`函数很好，但使用正则表达式很昂贵！只要有可能，宁愿`split`代替。

这个函数更简单更快捷：

```
function parseColor(input) {
    return input.split("(")[1].split(")")[0].split(",");
} 
```

好的返回值仍然是字符串，它们包含不需要的空格，但如果在数学表达式中使用，它们会正常工作！

无论如何，我更喜欢这个：它们可能按原样包含：

```
var bgColors = document.getElementById('myDiv').
                 backgroundColor.split("(")[1].split(")")[0].split(","); 
```

### [Emile Bergeron 的评论](https://stackoverflow.com/posts/comments/69911831?noredirect=1)所建议的支持`#RnGnBn`表格 (IEx)

有一个小而快速的功能，可以使用`rgb(r,g,b)`、`rgba(r,g,b,a)`、和：`#RGB``#RRGGBB``#RRRGGGBBB`

```
function parseColor(input) {
    if (input.substr(0,1)=="#") {
    var collen=(input.length-1)/3;
    var fact=[17,1,0.062272][collen-1];
    return [
        Math.round(parseInt(input.substr(1,collen),16)*fact),
        Math.round(parseInt(input.substr(1+collen,collen),16)*fact),
        Math.round(parseInt(input.substr(1+2*collen,collen),16)*fact)
    ];
    }
    else return input.split("(")[1].split(")")[0].split(",").map(x=>+x);
} 
```

### 演示

```
function parseColor(input) {
    if (input.substr(0,1)=="#") {
    var collen=(input.length-1)/3;
    var fact=[17,1,0.062272][collen-1];
    return [
        Math.round(parseInt(input.substr(1,collen),16)*fact),
        Math.round(parseInt(input.substr(1+collen,collen),16)*fact),
        Math.round(parseInt(input.substr(1+2*collen,collen),16)*fact)
    ];
    }
    else return input.split("(")[1].split(")")[0].split(",").map(x=>+x);
}

[ "rgb(123,45,67)", "rgb( 123, 45 , 67 )", "rgba(123,45,67,0.5)", "#F70",
  "#FF7700", "#FFF777000", "#FF8000", "#FFF800000", "#F80" ].forEach(
    function(color){
        colors=parseColor(color);
        if (colors.length<4) colors.push('1.0');
        document.getElementById('out').innerHTML+=
          '<tr><td style="background:'+color+';" />'+
          '<td>'+ colors.join('</td><td>')+'</td>'+
          '<td>parseColor("'+color+'");</td></tr>';
    }
);
```

```
th { width: 3em; }
```

```
<table id="out" style="font-family: mono;background:SlateGrey">
<tr><th></th><th>Red</th><th>Green</th><th>Blue</th><th>Alpha</th><th>Code</th></tr>
</table>
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-10-14T17:57:17.450

虽然 kennebec 已经基本完成了 Kolink 的回答，但仍有一些改进需要改进。首先，我们可以支持 hsla 和 rgba，这样做最好总是返回一个 alpha 值。另一个小的改进是通过将 trim 方法应用于传入的参数字符串。

```
function parseColor(color) {
    color = color.trim().toLowerCase();
    color = _colorsByName[color] || color;
    var hex3 = color.match(/^#([0-9a-f]{3})$/i);
    if (hex3) {
        hex3 = hex3[1];
        return [
            parseInt(hex3.charAt(0),16)*0x11,
            parseInt(hex3.charAt(1),16)*0x11,
            parseInt(hex3.charAt(2),16)*0x11, 1
        ];
    }
    var hex6 = color.match(/^#([0-9a-f]{6})$/i);
    if (hex6) {
        hex6 = hex6[1];
        return [
            parseInt(hex6.substr(0,2),16),
            parseInt(hex6.substr(2,2),16),
            parseInt(hex6.substr(4,2),16), 1
        ];
    }
    var rgba = color.match(/^rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+.*\d*)\s*\)$/i) || color.match(/^rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i);
    if( rgba ) {
        return [rgba[1],rgba[2],rgba[3], rgba[4]===undefined?1:rgba[4]];
    }
    var rgb = color.match(/^rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i);
    if( rgb ) {
        return [rgb[1],rgb[2],rgb[3],1];
    }
    if(color.indexOf('hsl')== 0)
        return _hslToRgb(color);
}

function _hslToRgb(hsl){
    if(typeof hsl== 'string'){
        hsl= hsl.match(/(\d+(\.\d+)?)/g);
    }
    var sub, h= hsl[0]/360, s= hsl[1]/100, l= hsl[2]/100, a = hsl[3]===undefined?1:hsl[3], t1, t2, t3, rgb, val;
    if(s== 0){
        val= Math.round(l*255);
        rgb= [val, val, val, a];
    }
    else{
        if(l<0.5)
            t2= l*(1 + s);
        else
            t2= l + s - l*s;
        t1 = 2*l - t2;
        rgb = [0, 0, 0];
        for(var i=0; i<3; i++){
            t3 = h + 1/3 * -(i - 1);
            t3 < 0 && t3++;
            t3 > 1 && t3--;
            if (6 * t3 < 1)
                val= t1 + (t2 - t1) * 6 * t3;
            else if (2 * t3 < 1)
                val= t2;
            else if (3*t3<2)
                val = t1 + (t2 - t1) * (2 / 3 - t3) * 6;
            else
                val= t1;
            rgb[i] = Math.round(val*255);
        }
    }
    rgb.push(a);
    return rgb;
}
var _colorsByName = {aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",
    black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",
    chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",
    darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",
    darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",
    darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",
    deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",
    fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",
    greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred :"#cd5c5c",indigo :"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",
    lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",
    lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",
    lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",
    limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",
    mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",
    mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",
    navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",
    orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",
    peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",
    royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",
    silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",
    tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",
    whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"
}; 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-06-17T02:24:47.693

// 这将为您发布的样本返回一个 [red.green,blue] 十进制数组，以及 rgb 百分比。

// 它忽略透明度、hsl 和大多数浏览器支持的扩展颜色名称集：

```
function getRgb(c){
    c= c.toLowerCase();
    if (/^[a-z]+$/.test(c)){
        var colornames={
            aqua:'#00ffff', black:'#000000', blue:'#0000ff', fuchsia:'#ff00ff',
            gray:'#808080', green:'#008000', lime:'#00ff00', maroon:'#800000',
            navy:'#000080', olive:'#808000', orange:'#ffa500', purple:'#800080',
            red:'#ff0000', silver:'#c0c0c0', teal:'#008080', white:'#ffffff',
            yellow:'#ffff00'
        }
        c= colornames[c];
    }
    if(/^#([a-f0-9]{3}){1,2}$/.test(c)){
        if(c.length== 4){
            c= '#'+[c[1], c[1], c[2], c[2], c[3], c[3]].join('');
        }
        c= '0x'+c.substring(1);
        return [(c>>16)&255, (c>>8)&255, c&255];
    }
    else if(c.indexOf('rgb')== 0){
        c= c.match(/\d+(\.\d+)?%?/g);
        if(c){
            for(var i= 0;i<3;i++){
                if(c[i].indexOf('%')!= -1){
                         c[i]= Math.round(parseFloat(c[i])*2.55);
                    }
                if(c[i]<0) c[i]= 0;
                if(c[i]>255) c[i]= 255;
            }
            return c;
        }
    }
} 
```

//此版本将为大多数颜色字符串返回一个 [red.green,blue] 十进制数组，忽略透明度。

```
function getRgb2(c){
    c= c.toLowerCase();
    var colornames={
        aliceblue:'#f0f8ff', antiquewhite:'#faebd7', aqua:'#00ffff',
        aquamarine:'#7fffd4', azure:'#f0ffff', beige:'#f5f5dc',
        bisque:'#ffe4c4', black:'#000000', blanchedalmond:'#ffebcd',
        blue:'#0000ff', blueviolet:'#8a2be2', brown:'#a52a2a',
        burlywood:'#deb887', cadetblue:'#5f9ea0', chartreuse:'#7fff00',
        chocolate:'#d2691e', coral:'#ff7f50', cornflowerblue:'#6495ed',
        cornsilk:'#fff8dc', crimson:'#dc143c', cyan:'#00ffff',
        darkblue:'#00008b', darkcyan:'#008b8b', darkgoldenrod:'#b8860b',
        darkgray:'#a9a9a9', darkgreen:'#006400', darkkhaki:'#bdb76b',
        darkmagenta:'#8b008b', darkolivegreen:'#556b2f', darkorange:'#ff8c00',
        darkorchid:'#9932cc', darkred:'#8b0000', darksalmon:'#e9967a',
        darkseagreen:'#8fbc8f', darkslateblue:'#483d8b', darkslategray:'#2f4f4f',
        darkturquoise:'#00ced1', darkviolet:'#9400d3', deeppink:'#ff1493',
        deepskyblue:'#00bfff', dimgray:'#696969', dodgerblue:'#1e90ff',
        firebrick:'#b22222', floralwhite:'#fffaf0',
        forestgreen:'#228b22', fuchsia:'#ff00ff', gainsboro:'#dcdcdc',
        ghostwhite:'#f8f8ff', gold:'#ffd700', goldenrod:'#daa520', gray:'#808080',
        green:'#008000', greenyellow:'#adff2f', honeydew:'#f0fff0',
        hotpink:'#ff69b4', indianred:'#cd5c5c', indigo:'#4b0082',
        ivory:'#fffff0', khaki:'#f0e68c', lavender:'#e6e6fa',
        lavenderblush:'#fff0f5', lawngreen:'#7cfc00', lemonchiffon:'#fffacd',
        lightblue:'#add8e6', lightcoral:'#f08080', lightcyan:'#e0ffff',
        lightgoldenrodyellow:'#fafad2', lightgray:'#d3d3d3', lightgreen:'#90ee90',
        lightpink:'#ffb6c1', lightsalmon:'#ffa07a', lightseagreen:'#20b2aa',
        lightskyblue:'#87cefa', lightslategray:'#778899', lightsteelblue:'#b0c4de',
        lightyellow:'#ffffe0', lime:'#00ff00', limegreen:'#32cd32', linen:'#faf0e6',
        magenta:'#ff00ff', maroon:'#800000', mediumaquamarine:'#66cdaa',
        mediumblue:'#0000cd', mediumorchid:'#ba55d3', mediumpurple:'#9370db',
        mediumseagreen:'#3cb371', mediumslateblue:'#7b68ee',
        mediumspringgreen:'#00fa9a', mediumturquoise:'#48d1cc',
        mediumvioletred:'#c71585', midnightblue:'#191970', mintcream:'#f5fffa',
        mistyrose:'#ffe4e1', moccasin:'#ffe4b5', navajowhite:'#ffdead',
        navy:'#000080', oldlace:'#fdf5e6', olive:'#808000', olivedrab:'#6b8e23',
        orange:'#ffa500', orangered:'#ff4500', orchid:'#da70d6',
        alegoldenrod:'#eee8aa', palegreen:'#98fb98', paleturquoise:'#afeeee',
        palevioletred:'#db7093', papayawhip:'#ffefd5', peachpuff:'#ffdab9',
        peru:'#cd853f', pink:'#ffc0cb', plum:'#dda0dd', powderblue:'#b0e0e6',
        purple:'#800080', red:'#ff0000', rosybrown:'#bc8f8f', royalblue:'#4169e1',
        saddlebrown:'#8b4513', salmon:'#fa8072', sandybrown:'#f4a460',
        seagreen:'#2e8b57', seashell:'#fff5ee', sienna:'#a0522d',
        silver:'#c0c0c0', skyblue:'#87ceeb', slateblue:'#6a5acd',
        slategray:'#708090', snow:'#fffafa', springgreen:'#00ff7f',
        steelblue:'#4682b4', tan:'#d2b48c', teal:'#008080', thistle:'#d8bfd8',
        tomato:'#ff6347', turquoise:'#40e0d0', violet:'#ee82ee', wheat:'#f5deb3',
        white:'#ffffff', whitesmoke:'#f5f5f5', yellow:'#ffff00', yellowgreen:'#9acd32'
    }
    if (/^[a-z]+$/.test(c)){
        c= colornames[c];
    }
    if(/^#([a-f0-9]{3}){1,2}$/.test(c)){
        if(c.length== 4){
            c= '#'+[c[1], c[1], c[2], c[2], c[3], c[3]].join('');
        }
        c= '0x'+c.substring(1);
        return [(c>>16)&255, (c>>8)&255, c&255];
    }
    if(c.indexOf('hsl')== 0) return hslToRgb(c);
    else{
        c= c.match(/\d+(\.\d+)?%?/g);
        if(c){
            for(var i= 0;i<3;i++){
                if(c[i].indexOf('%')!= -1) c[i]= parseFloat(c[i])*2.55;
                c[i]= Math.round(c[i]);
                if(c[i]<0) c[i]= 0;
                if(c[i]>255) c[i]= 255;
            }
            return c;
        }
    }
    function hslToRgb(hsl){
        if(typeof hsl== 'string'){
            hsl= hsl.match(/(\d+(\.\d+)?)/g);
        }
        var sub, h= hsl[0]/360, s= hsl[1]/100, l= hsl[2]/100,
        t1, t2, t3, rgb, val;
        if(s== 0){
            val= Math.round(l*255);
            rgb= [val, val, val];
        }
        else{
            if(l<0.5)   t2= l*(1 + s);
            else t2= l + s - l*s;
            t1= 2*l - t2;
            rgb= [0, 0, 0];
            for(var i= 0;i<3;i++){
                t3= h + 1/3*-(i - 1);
                t3<0 && t3++;
                t3>1 && t3--;
                if(6*t3<1) val= t1 +(t2 - t1)*6*t3;
                else if(2*t3<1) val= t2;
                else if(3*t3<2) val= t1 +(t2 - t1)*(2/3 - t3)*6;
                else val= t1;
                rgb[i]= Math.round(val*255);
            }
        }
        return rgb;
    }
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-05-30T10:19:38.053

死灵术。
对于任何真正需要它的人，这里有完整的工作和功能完整的代码。
将其视为对“Niet the Dark Absol”
干杯的答案的补充。

```
function parseColor(input) {
    var mm;
    var m;
    // Obviously, the numeric values will be easier to parse than names.So we do those first.
    mm = input.match(/^#?([0-9a-f]{3})$/i);
    if (mm) {
        m = mm[1];
        // in three-character format, each value is multiplied by 0x11 to give an
        // even scale from 0x00 to 0xff
        return [
            parseInt(m.charAt(0), 16) * 0x11,
            parseInt(m.charAt(1), 16) * 0x11,
            parseInt(m.charAt(2), 16) * 0x11
        ];
    }
    // That's one. Now for the full six-digit format: 
    mm = input.match(/^#?([0-9a-f]{6})$/i);
    if (mm) {
        m = mm[1];
        return [
            parseInt(m.substr(0, 2), 16),
            parseInt(m.substr(2, 2), 16),
            parseInt(m.substr(4, 2), 16)
        ];
    }
    // And now for rgb() format:
    var mm = input.match(/^rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i);
    if (mm) {
        return [mm[1], mm[2], mm[3]];
    }
    // https://www.w3schools.com/colors/colors_names.asp
    // https://en.wikipedia.org/wiki/Web_colors
    // http://www.colors.commutercreative.com/grid/
    var webColors = {
        "AliceBlue": "#F0F8FF",
        "AntiqueWhite": "#FAEBD7",
        "Aqua": "#00FFFF",
        "Aquamarine": "#7FFFD4",
        "Azure": "#F0FFFF",
        "Beige": "#F5F5DC",
        "Bisque": "#FFE4C4",
        "Black": "#000000",
        "BlanchedAlmond": "#FFEBCD",
        "Blue": "#0000FF",
        "BlueViolet": "#8A2BE2",
        "Brown": "#A52A2A",
        "BurlyWood": "#DEB887",
        "CadetBlue": "#5F9EA0",
        "Chartreuse": "#7FFF00",
        "Chocolate": "#D2691E",
        "Coral": "#FF7F50",
        "CornflowerBlue": "#6495ED",
        "Cornsilk": "#FFF8DC",
        "Crimson": "#DC143C",
        "Cyan": "#00FFFF",
        "DarkBlue": "#00008B",
        "DarkCyan": "#008B8B",
        "DarkGoldenRod": "#B8860B",
        "DarkGray": "#A9A9A9",
        "DarkGrey": "#A9A9A9",
        "DarkGreen": "#006400",
        "DarkKhaki": "#BDB76B",
        "DarkMagenta": "#8B008B",
        "DarkOliveGreen": "#556B2F",
        "DarkOrange": "#FF8C00",
        "DarkOrchid": "#9932CC",
        "DarkRed": "#8B0000",
        "DarkSalmon": "#E9967A",
        "DarkSeaGreen": "#8FBC8F",
        "DarkSlateBlue": "#483D8B",
        "DarkSlateGray": "#2F4F4F",
        "DarkSlateGrey": "#2F4F4F",
        "DarkTurquoise": "#00CED1",
        "DarkViolet": "#9400D3",
        "DeepPink": "#FF1493",
        "DeepSkyBlue": "#00BFFF",
        "DimGray": "#696969",
        "DimGrey": "#696969",
        "DodgerBlue": "#1E90FF",
        "FireBrick": "#B22222",
        "FloralWhite": "#FFFAF0",
        "ForestGreen": "#228B22",
        "Fuchsia": "#FF00FF",
        "Gainsboro": "#DCDCDC",
        "GhostWhite": "#F8F8FF",
        "Gold": "#FFD700",
        "GoldenRod": "#DAA520",
        "Gray": "#808080",
        "Grey": "#808080",
        "Green": "#008000",
        "GreenYellow": "#ADFF2F",
        "HoneyDew": "#F0FFF0",
        "HotPink": "#FF69B4",
        "IndianRed ": "#CD5C5C",
        "Indigo ": "#4B0082",
        "Ivory": "#FFFFF0",
        "Khaki": "#F0E68C",
        "Lavender": "#E6E6FA",
        "LavenderBlush": "#FFF0F5",
        "LawnGreen": "#7CFC00",
        "LemonChiffon": "#FFFACD",
        "LightBlue": "#ADD8E6",
        "LightCoral": "#F08080",
        "LightCyan": "#E0FFFF",
        "LightGoldenRodYellow": "#FAFAD2",
        "LightGray": "#D3D3D3",
        "LightGrey": "#D3D3D3",
        "LightGreen": "#90EE90",
        "LightPink": "#FFB6C1",
        "LightSalmon": "#FFA07A",
        "LightSeaGreen": "#20B2AA",
        "LightSkyBlue": "#87CEFA",
        "LightSlateGray": "#778899",
        "LightSlateGrey": "#778899",
        "LightSteelBlue": "#B0C4DE",
        "LightYellow": "#FFFFE0",
        "Lime": "#00FF00",
        "LimeGreen": "#32CD32",
        "Linen": "#FAF0E6",
        "Magenta": "#FF00FF",
        "Maroon": "#800000",
        "MediumAquaMarine": "#66CDAA",
        "MediumBlue": "#0000CD",
        "MediumOrchid": "#BA55D3",
        "MediumPurple": "#9370DB",
        "MediumSeaGreen": "#3CB371",
        "MediumSlateBlue": "#7B68EE",
        "MediumSpringGreen": "#00FA9A",
        "MediumTurquoise": "#48D1CC",
        "MediumVioletRed": "#C71585",
        "MidnightBlue": "#191970",
        "MintCream": "#F5FFFA",
        "MistyRose": "#FFE4E1",
        "Moccasin": "#FFE4B5",
        "NavajoWhite": "#FFDEAD",
        "Navy": "#000080",
        "OldLace": "#FDF5E6",
        "Olive": "#808000",
        "OliveDrab": "#6B8E23",
        "Orange": "#FFA500",
        "OrangeRed": "#FF4500",
        "Orchid": "#DA70D6",
        "PaleGoldenRod": "#EEE8AA",
        "PaleGreen": "#98FB98",
        "PaleTurquoise": "#AFEEEE",
        "PaleVioletRed": "#DB7093",
        "PapayaWhip": "#FFEFD5",
        "PeachPuff": "#FFDAB9",
        "Peru": "#CD853F",
        "Pink": "#FFC0CB",
        "Plum": "#DDA0DD",
        "PowderBlue": "#B0E0E6",
        "Purple": "#800080",
        "RebeccaPurple": "#663399",
        "Red": "#FF0000",
        "RosyBrown": "#BC8F8F",
        "RoyalBlue": "#4169E1",
        "SaddleBrown": "#8B4513",
        "Salmon": "#FA8072",
        "SandyBrown": "#F4A460",
        "SeaGreen": "#2E8B57",
        "SeaShell": "#FFF5EE",
        "Sienna": "#A0522D",
        "Silver": "#C0C0C0",
        "SkyBlue": "#87CEEB",
        "SlateBlue": "#6A5ACD",
        "SlateGray": "#708090",
        "SlateGrey": "#708090",
        "Snow": "#FFFAFA",
        "SpringGreen": "#00FF7F",
        "SteelBlue": "#4682B4",
        "Tan": "#D2B48C",
        "Teal": "#008080",
        "Thistle": "#D8BFD8",
        "Tomato": "#FF6347",
        "Turquoise": "#40E0D0",
        "Violet": "#EE82EE",
        "Wheat": "#F5DEB3",
        "White": "#FFFFFF",
        "WhiteSmoke": "#F5F5F5",
        "Yellow": "#FFFF00",
        "YellowGreen": "#9ACD32"
    };
    for (var p in webColors) {
        webColors[p.toLowerCase()] = webColors[p];
    }
    var wc = webColors[input.toLowerCase()];
    if (wc != null)
        return parseColor(wc);
    console.log(input);
    throw Error("'" + input + "' is not a valid color...");
}
// parseColor("steelblue");
parseColor("SteelBlue");
// JSON.stringify(webColors, null, 2);
// JSON.stringify(lcWebColors, null, 2);
//# sourceMappingURL=colorInfluence.js.map 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-07-29T17:13:31.160

简化@NicolasL 的答案（这反过来又受到@Niet_the_Dark_Absol 的启发）

我得到了这个简单而简短的基于浏览器的解决方案：

```
function parseCssColor(str) {
    const div = document.createElement("div");
    document.body.appendChild(div);
    div.style.color = str;
    const res = getComputedStyle(div).color.match(/[\.\d]+/g).map(Number);
    div.remove();
    return res;
}

parseCssColor("lightblue")  // [173, 216, 230]
parseCssColor("#663399")    // [102, 51, 153]
parseCssColor("#aa11bb22")  // [170, 17, 187, 0.133] 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-05-03T07:49:12.863

对于 hsl 和 rgb 这两种颜色都有效：

```
input.replace(/[a-z%\s\(\)]/g,'').split(',') 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-05-03T21:39:40.980

用这个漂亮的 hack 尝试@Niet_the_Dark_Absol 的答案，`getComputedStyle`直到将创建的元素（Chrome 69 和 Firefox 75）附加到 DOM 之前，我一直无法使其工作。

因为我还希望能够处理 alpha 通道值（透明度），所以我修改了正则表达式并返回了结果。

这是我的功能，如果它可以对任何人有任何帮助：

```
function colorToRgbParser(cssColor) {
  const div = document.createElement('div');
  div.id = 'for-computed-style';

  div.style.color = cssColor;

  // appending the created element to the DOM
  document.querySelector('body').appendChild(div);

  const match = getComputedStyle(div).color.match(/^rgba?\s*\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d\.\d)\s*)?\)$/i);

  // removing element from the DOM
  document.querySelector('#for-computed-style').remove();

  if (match) {
    // match[0] is regex complete match (e.g. "rgb(0,0,0)"), not a regex capturing group
    let parsedColor = {
      r: match[1],
      g: match[2],
      b: match[3]
    };
    if (match[4]) { // if alpha channel is present
      parsedColor.a = match[4];
    }
    return parsedColor;
  } else {
    throw new Error(`Color ${cssColor} could not be parsed.`);
  }
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-01-21T17:56:48.413

我来这里是为了同样的问题。但是在阅读了所有这些方法（以及它们在所有情况下错误或不起作用的地方）之后，我决定去图书馆。

除了在大多数情况下解析颜色之外，您还想对它做一些事情。

如果像我一样，您对“高效”的定义是“错误更少且开箱即用”，我建议使用**[chroma.js](https://gka.github.io/chroma.js/)**。

安装它`npm install chroma-js`（不是chrome-js，不是色度）

```
chroma('pink').darken().saturate(2).rgb() 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2012-06-17T01:32:54.567

```
var input = '#FFF';
var color = input.toLowerCase();
var hex = ['0','1','2','3','4','5','6','7','8','9','a','b','c','d','e','f'];
var rgb = [];
if(/#/.test(color))
    if(color.length==4){
        var parsed = color.match(/\w/g);
        rgb = [
            hex.indexOf(parsed[0])*16+hex.indexOf(parsed[0]),
            hex.indexOf(parsed[1])*16+hex.indexOf(parsed[1]),
            hex.indexOf(parsed[2])*16+hex.indexOf(parsed[2])
        ]
    }else{
        var parsed = color.match(/\w{2}/g);
        rgb = [
            hex.indexOf(parsed[0][0])*16+hex.indexOf(parsed[0][1]),
            hex.indexOf(parsed[1][0])*16+hex.indexOf(parsed[1][1]),
            hex.indexOf(parsed[2][0])*16+hex.indexOf(parsed[2][1])
        ]
    }
else if(/(rgb)/.test(color))
    rgb = color.match(/\d+/g);
else{
    //Here you define all the colors, like 'blue': [0,0,255]
} 
```

例如，如果您尝试获取元素的背景颜色，则可以使用以下命令：

```
var bg = getComputedStyle(myElem,null).getPropertyValue('background-color');
var rgb = match(/\d+/g).slice(0,3); 
```

# windows - Windows 7 因内存过多而杀死程序

> ID：11068241
> 
> 赞同：-3
> 
> 时间：2012-06-17T01:21:49.483
> 
> 标签：windows, memory, ram

我正在尝试在 8Gb Windows 7 64 位机器上写入 RAM。

```
int main(int argc, char *argv[])
{
    for (__int64* i; ; i = new __int64(0))
        continue;

    return 0;
} 
```

在它占用大约 2-3gigs 之后，它会抛出一个异常： `Microsoft C++ exception: std::bad_alloc at memory location 0x0039f634.` 我可以说任务管理器中仍然有足够的 RAM。我曾尝试使用 Visual Studio 2010 和 Qt Creator。

抛出的异常中断`mlock.c`：

```
void __cdecl _unlock (
        int locknum
        )
{
        /*
         * leave the critical section.
         */
        LeaveCriticalSection( _locktable[locknum].lock );
} 
```

有任何想法吗？我希望它用 0 写入所有非活动 RAM。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T15:43:20.440

在构建选项中编译为 x64 而不是 win32

# r - 如何在条形图中将日期格式从值更改为日期

> ID：11068242
> 
> 赞同：2
> 
> 时间：2012-06-17T01:21:55.363
> 
> 标签：r, xts

我想使用 barplot() 绘制时间序列 xts 对象。但是，x 轴上显示的日期格式是数值而不是日期格式。如何将数值更改为日期格式，如“2012-06-12”？这是一个示例代码：

```
x<-rnorm(100);
y <- xts(x, Sys.Date()+1:100);
barplot(y); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T02:03:21.170

通用解决方案是使用`names.arg`参数，但正如我在评论中所说，我无法使用您提供的代码重现您的问题。

```
barplot(y, names.arg=format(index(y), "%Y-%m-%d")) 
```

# iphone - 使用 video.js 的 html 5 视频无法在 iphone/ipad 上播放，并且在 ie 中显示为要播放的缩略图

> ID：11068244
> 
> 赞同：1
> 
> 时间：2012-06-17T01:22:09.950
> 
> 标签：iphone, html, internet-explorer, video, jquery-jscrollpane

我将 html5 视频与 video.js 一起使用，并将 js 和 css 托管在我的服务器上，而不是链接到他们的网站。视频重新调整为两种不同的尺寸，一种用于 >1500 像素的屏幕，一种用于 <1500 像素的屏幕。这在 safari 和 firefox、chrome for mac 和 firefox for pc 中运行良好。我还在 .htaccess 文件中设置了视频格式。

我有2个问题。1\. 无法在 iphone/ipad 上播放。我已经在我的 iphone 上输入了视频的直接路径，它可以正常播放，所以我认为它的编码方式不是问题。但以防万一我从闪存中导出了一个 mov 文件，然后使用 miro 将其转换为 mp4。我也尝试过在我阅读时定义和不定义海报，这可能会导致问题。刚刚发现如果我删除了 jscrollpane jquery，视频将在 iphone/ipad 上播放，但这确实会导致网站上的水平滚动出现问题。我已经将 kevin lucky 的引用留在了 jscrollpane 中，以防有人因此希望它可以更容易地弄清楚发生了什么。

1.  在使用 IE 的电脑上，视频可以工作，但大小是缩略图，不会填满空间。

现在已经解决了我的问题 - 只是在宽度之后添加了重要内容，并修复了视频大小的 IE 问题。

# php - 使用 eval 解析表单输入的方程的最安全方法

> ID：11068246
> 
> 赞同：4
> 
> 时间：2012-06-17T01:22:35.820
> 
> 标签：php, security, eval, formula, equation

我想知道在 PHP 中使用**eval()**来解析用户填写表单时输入的公式时应该检查哪些内容。我看过很多关于 eval() 的答案，但似乎并非所有人都同意。

这是我收集的内容：

*   不要对字符串使用 eval（这可能是个问题，因为它*是*我需要解析的公式）
*   删除来自表单的输入（我不完全确定我需要删除哪些内容）
*   Eval 可能是邪恶的，也可能不是邪恶的，并且存在安全风险（是否有其他方法可以解析字符串中的方程式？）

大家觉得我应该怎么做？

**编辑：**我尝试了 eval 方法，虽然它确实有效，但我使用的卫生设施不支持两个以上的操作数。由于我真的不想编写自己的（可能不安全的）卫生正则表达式，所以我只想找到并使用预先编写的数学课。感谢大家的建议！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T01:30:16.877

在用户输入上使用 EVAL 是让您的服务器受到攻击的好方法。不。

可接受的方法是解析表达式，因此您了解它的每个元素，然后评估您解析的表达式。对于数学表达式，您可能会找到一个可以做到这一点的可信包。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-17T01:34:36.110

如果您必须使用`eval`，其[`eval`文档](http://www.php.net/manual/en/function.eval.php#107377)页面上有一些代码可以让您过滤数学公式。但正如其他人以及 PHP 文档页面所说，`eval`除非没有其他选择，否则使用它不是一个好主意。

```
<?php

$test = '2+3*pi';

// Remove whitespaces
$test = preg_replace('/\s+/', '', $test);

$number = '(?:\d+(?:[,.]\d+)?|pi|π)'; // What is a number
$functions = '(?:sinh?|cosh?|tanh?|abs|acosh?|asinh?|atanh?|exp|log10|deg2rad|rad2deg|sqrt|ceil|floor|round)'; // Allowed PHP functions
$operators = '[+\/*\^%-]'; // Allowed math operators
$regexp = '/^(('.$number.'|'.$functions.'\s*\((?1)+\)|\((?1)+\))(?:'.$operators.'(?2))?)+$/'; // Final regexp, heavily using recursive patterns

if (preg_match($regexp, $q))
{
    $test = preg_replace('!pi|π!', 'pi()', $test); // Replace pi with pi function
    eval('$result = '.$test.';');
}
else
{
    $result = false;
}

?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T15:38:52.697

`eval`总是危险的。一旦您开始列入黑名单（过滤），人们就会想方设法绕过您在过滤逻辑中所做的假设。将有效表达式列入白名单是一种更安全的方法。

但是防止有人滥用该功能的最有效方法可能是为数学表达式编写适当的解析器。如果您想要支持的公式不太复杂，那么如果您使用简单的自上而下递归下降解析器方法，这甚至不是什么大问题。这个[答案](https://stackoverflow.com/questions/2405623/looking-for-a-tutorial-on-recursive-descent-parsing)有一些参考资料可以帮助您入门。还有[这篇文章](http://knuth.luther.edu/~leekent/tutorials/ll1.html)为一个简单的计算器开发了一个递归下降解析器（不幸的是，它是用 Java 编写的）。

# javascript - 在 Javascript 中，字典理解或 Object `map`

> ID：11068247
> 
> 赞同：79
> 
> 时间：2012-06-17T01:22:41.653
> 
> 标签：javascript, jquery, python

我需要从 Javascript 列表中生成几个对象。在 Python 中，我会这样写：

```
{key_maker(x): val_maker(x) for x in a_list} 
```

另一种方法是问是否存在诸如`jQuery.map()`which 聚合对象之类的东西？这是我的猜测（不起作用）：

```
var result = {}
$.map(a_list, function(x) {
    $.extend(result, {key_maker(x): val_maker(x)})
}) 
```

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-06-17T01:29:00.950

假设`a_list`是一个数组，最接近的可能是使用`.reduce()`.

```
var result = a_list.reduce(function(obj, x) {
    obj[key_maker(x)] = val_maker(x);
    return obj;
}, {}); 
```

数组推导可能会出现在 JavaScript 的未来版本中。

* * *

[您可以使用MDN](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/Reduce#Compatibility)的兼容性补丁来修补不符合 ES5 的实现。

* * *

如果`a_list`不是一个数组，而是一个普通对象，你可以使用它`Object.keys()`来执行相同的操作。

```
var result = Object.keys(a_list).reduce(function(obj, x) {
    obj[key_maker(a_list[x])] = val_maker(a_list[x]);
    return obj;
}, {}); 
```

* * *

## 回答 #2

> 赞同：52
> 
> 时间：2018-11-27T21:13:17.390

这是一个不使用reduce的版本：

```
Object.fromEntries( a_list.map( x => [key_maker(x), value_maker(x)]) ); 
```

[Object.fromEntries与](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/fromEntries)[Lodash](https://lodash.com/docs/4.17.5#fromPairs)中的 _.fromPairs基本相同。这对我来说最像 Python dict 理解。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-10-11T10:30:58.753

老问题，但答案在新版本的 Javascript 中略有变化。使用 ES2015 (ES6)，您可以像这样实现单行对象理解：

```
a_list.reduce((obj, x) => Object.assign(obj, { [key_maker(x)]: value_maker(x) }), {}) 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-12-09T03:53:33.723

[ES5](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf)`Map`为*OrderedDict*引入。地图理解可能如下所示：

```
Map( Array.map(function(o){return[ key_maker(o), val_maker(o) ]})) 
```

例子：

```
> a_list = [ {x:1}, {x:2}, {x:3} ]
< [ Object, Object, Object ]
>
> let dict = new Map(a_list.map(function(o){return[ o.x, o.x**2 ]}))
< Map[3]
< 0 : {1 => 1}
< 1 : {2 => 4}
< 2 : {3 => 9}
>
> dict.get(2)
< 4 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2018-04-17T04:24:04.673

也许像这样，使用[Lodash](https://lodash.com/docs/4.17.5#fromPairs)： `var result = _.fromPairs(a_list.map(x => [key_maker(x), value_maker(x)]));`

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2018-08-29T15:04:11.170

更短的 ES6 版本是：

```
a_list.reduce((obj, x) => (obj[key_maker(x)] = val_maker(x), obj),{}) 
```

# wpf - ContentPresenter 触发器不起作用

> ID：11068249
> 
> 赞同：4
> 
> 时间：2012-06-17T01:23:53.497
> 
> 标签：wpf, controltemplate, contentpresenter

我在 ControlTemplate 中有一个 ContentPresenter，试图布局 TabItem。我希望标题内 TextBlock 的前景色在选择选项卡时更改颜色。我的模板如下：

```
<TabControl.Resources>
    <Style TargetType="TabPanel">
        <Setter Property="HorizontalAlignment" Value="Right" />
    </Style>
    <Style TargetType="TabControl">
        <Setter Property="BorderThickness" Value="0,0,0,0"></Setter>
    </Style>
    <Style TargetType="TabItem">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type TabItem}">
                    <ContentPresenter x:Name="ContentSite"
                                         VerticalAlignment="Center"
                                         HorizontalAlignment="Center"
                                         ContentSource="Header"
                                         Margin="30,10,30,10"/>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsSelected" Value="True">
                            <Setter TargetName="ContentSite" Property="TextBlock.Foreground" Value="DarkGoldenrod"></Setter>
                        </Trigger>    
                        <Trigger Property="IsSelected" Value="False">
                            <Setter TargetName="ContentSite" Property="TextBlock.Foreground" Value="Black"></Setter>
                        </Trigger>    
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</TabControl.Resources> 
```

不幸的是，触发器什么也没做。SO 上的其他几篇文章显示了一个`Setter`与我的完全一样的标签，`TargetName`用于确保我们只更改标题而不是整个选项卡。该属性被识别并编译，但没有任何反应。

到底发生了什么，我做错了什么？这让我发疯了好几个小时！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T02:43:55.330

知道了！

我有这样的标题：

```
<TabItem.Header>
    <TextBlock>My Header</TextBlock>
</TabItem.Header> 
```

问题是，标题内*已经*有一个 TextBlock，您不需要再次包装文本。

```
<TabItem.Header>
    My Header
</TabItem.Header> 
```

它有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T02:10:22.303

对我来说完全符合预期，您的问题可能出在其他地方......

# iphone - 由于内存问题 / MBProgressHUD 指示器导致应用程序崩溃

> ID：11068254
> 
> 赞同：2
> 
> 时间：2012-06-17T01:26:22.560
> 
> 标签：iphone, ios, xcode, memory-management, mbprogresshud

我有一个奇怪的问题。我目前正在开发一个邮件应用程序，它曾经随机崩溃而没有错误或登录到我的控制台。我检查了我的崩溃日志，它向我显示了内存不足的警告，并在我的应用程序旁边写了抛弃。![崩溃报告](../Images/1ea16235a9bdfe343f3a66526ab5fe44.png)

所以我怀疑这是一个内存问题，并回去跟踪我的应用程序的内存使用情况。我使用分配工具来检测整体使用情况，当它的堆大小仅为 4.59 MB 时，我的应用程序崩溃了。![仪器快照](../Images/cc5068406a3a2127876a7c8bf3a07e72.png)

Instruments 指向我正在使用 MBProgressHUD 指标的函数。罪魁祸首是这一行：

```
[appDelegate showHUDActivityIndicatorOnView:self.parentViewController.view whileExecuting:@selector(refreshInBackground) onTarget:self withObject:nil withText:@"Loading"]; 
```

如果我将其替换为 `[self refreshInBackground]`一切正常，则没有问题..

这是代码：

```
 -(void) showHUDActivityIndicatorOnView:(UIView*)view whileExecuting:(SEL)method 
                                   onTarget:(id)target withObject:(id)object withText:(NSString*)label{
    self.HUD = [[MBProgressHUD alloc] initWithView:view] ;
        self.navigationController.navigationItem.hidesBackButton = YES;
        [view addSubview:self.HUD];
    self.HUD.delegate = nil;
    self.HUD.labelText = label;
    [self.HUD showWhileExecuting:method onTarget:target withObject:object animated:YES];    
} 
```

`self.HUD`是被保留的财产。

稍作修改，`showWhileExecuting`方法如下：

```
- (void)showWhileExecuting:(SEL)method onTarget:(id)target withObject:(id)object animated:(BOOL)animated {

    MyAppdelegate *appDelegate = (MyAppdelegate *)[UIApplication sharedApplication].delegate;
    if(!appDelegate.isRequestActive)
    {
    methodForExecution = method;
    targetForExecution = [target retain];
    objectForExecution = [object retain];

    // Launch execution in new thread
    taskInProgress = YES;
    [NSThread detachNewThreadSelector:@selector(launchExecution) toTarget:self withObject:nil];

    // Show HUD view
    [self show:animated];
    }
    else {
        [self done];
    }
} 
```

目前我已经从我的应用程序中删除了它，它现在工作正常，即使使用 20-30 MB 堆内存它也不会崩溃。

我不是在这里寻找具体的答案或解决方案。我正在寻找调试方法/技术来调试问题，以便我可以了解导致我的应用程序崩溃的原因。

是不是内存溢出。如果是这种情况，那么我现在如何使用 20-30 MB。如果这不是内存问题，为什么我的崩溃记者会在我的 App name 旁边显示被抛弃。

罪魁祸首`([appDelegate showHUDActivityIndicatorOnView:self.parentViewController.view whileExecuting:@selector(refreshInBackground) onTarget:self withObject:nil withText:@"Loading"])`

每次我调用此函数时，都会增加一些内存，因为某些元素被缓存。但是当内存达到 4.5 MB ...这条线导致它崩溃

如何找到此问题的根本原因。我如何弄清楚为什么 iOS 正在杀死我的应用程序被抛弃的原因写在我的应用程序旁边

任何帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-18T16:32:23.370

行。问题是我在我的视图上添加了HUD进度条 `[view addSubview:self.HUD]`；

我忘记在其委托方法中将其从超级视图中删除：

```
- (void)hudWasHidden:(MBProgressHUD *)hud 
{
    // Remove HUD from screen when the HUD was hidded
    [HUD removeFromSuperview]; //  app crashes at 4.59 MB if you comment this
    [HUD release];
    HUD = nil;
} 
```

因此，每次在一个 UIView 上都添加了几个视图......我想每个 UIView 顶部的子子视图的数量都有一个上限......苹果应该在他们的文档中提到这一点......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T11:22:04.320

如果您不使用 ARC，则每次分配属性时肯定会发生泄漏：

```
self.HUD = [[MBProgressHUD alloc] initWithView:view] ; 
```

以这种方式更改您的代码：

```
MBProgressHUD *progressHUD = [[MBProgressHUD alloc] initWithView:view] ;
self.HUD = progressHUD;
[progressHUD release]; 
```

# java - 如何在 Android 上暂停/延迟？

> ID：11068257
> 
> 赞同：1
> 
> 时间：2012-06-17T01:26:48.517
> 
> 标签：java, android

我目前正在学习如何为 Android 移动设备开发应用程序。

我编写了一个测试应用程序来在设备屏幕上显示数字 0-9。我创建了一个简单的函数来延迟数字更改。

但是，在运行应用程序时，只显示最终数字。在这个最终数字显示之前也有延迟。我假设暂停的长度是我定义的延迟乘以要显示的位数。

如何创建一个延迟更改数字的应用程序？

```
public class AndroidProjectActivity extends Activity {
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        Main();
    }

void Delay(int Seconds){
    long Time = 0;
    Time = System.currentTimeMillis();
    while(System.currentTimeMillis() < Time+(Seconds*1000));
}

void Main() {
    String ConvertedInt;
    TextView tv = new TextView(this);
    setContentView(tv);

    for(int NewInt = 0; NewInt!= 9; NewInt++){
        ConvertedInt = Character.toString((char)(NewInt+48));
        tv.setText(ConvertedInt);
        Delay(5);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T03:26:47.280

尝试创建`thread`, `which sleeps for certain interval of time`，然后将值递增 1 直到 9。然后使用`Handler to update the UI`.

你也可以使用`AsyncTask`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T14:36:57.940

一种方法是创建一个可更新视图的可运行文件。这仍将在 UI 线程上更新，但在后台等待。下面的代码中可能有错误，但它应该运行与小的调整..

阻止对您的活动的任何系统调用都不好，因为您正在阻止 UI 线程。您的应用程序将被强制关闭，并显示应用程序无响应消息。这是另一个很好的[例子](http://developer.android.com/resources/articles/timed-ui-updates.html)。

```
public class AndroidProjectActivity extends Activity {
    private Handler mHandler;
    private TextView mTextView;
    private Runnable mCountUpdater = new Runnable() {
        private int mCount = 0;
        run() {
           if(mCount > 9)
               return;
           mTextView.setText(String.valueOF(mCount+48));
           mCount++;
           // Reschedule ourselves.
           mHandler.postDelayed(this, 5000);
        }
    }
    public void onCreate(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);
        // Cleaner to load a view from a layout..
        TextView tv = new TextView(this);
        setContentView(tv);
        mTextView = tv;
        // Create handler on UI thread.
        mHandler = new Handler();
        mHandler.post(mCountUpdater);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T06:36:16.607

对 main() 的调用阻止了 UI，因此在调用完成之前它不能显示任何数字。

# ruby-on-rails - 更新 Gemfile.lock，heroku 预编译资产基于 compass-rails 中断？

> ID：11068259
> 
> 赞同：2
> 
> 时间：2012-06-17T01:27:25.100
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku, asset-pipeline, compass-sass

更新：忘记发布错误本身：[https ://github.com/Compass/compass-rails/issues/19](https://github.com/Compass/compass-rails/issues/19)

在 heroku 部署期间资产 Precomp 失败（特别是在 css 上） - 查看站点时，我在日志中收到如下消息：

```
ActionView::Template::Error (File to import not found or unreadable: compass.) 
```

所以我现在恢复到我的旧 gemfile.lock 来解决这个问题，但我想在这里发布它，以防有人对可能导致它的原因有任何想法。

这是我的 Gemfile：

```
source 'http://rubygems.org'
gem 'rails', '3.1.4'
gem 'thin'
gem 'mysql2', '0.3.11'
gem "devise", '2.1'
gem 'rails_admin', :git => 'git://github.com/sferik/rails_admin.git'
gem 'omniauth'
gem 'omniauth-facebook'
gem 'omniauth-twitter'

#For Heroku
group :production do
  gem 'pg'
end

group :assets do
  gem 'sass-rails'
  gem 'coffee-rails'
  gem 'uglifier'
  gem 'yui-compressor'
  gem 'compass-rails'
end
gem 'newrelic_rpm'

#Stripe
gem 'stripe'
gem 'sendgrid'
gem 'cancan'
gem 'jquery-rails', '>= 1.0.12'
gem 'rails3-jquery-autocomplete'
gem 'mail'
gem 'fastercsv'
gem 'redcarpet'
gem 'albino'
gem 'nokogiri'

#Amazon
gem 'aws-sdk'

#Paperclip
gem 'paperclip', '~> 2.5'

#RedCloth Text
gem 'RedCloth'

# In place editing
gem 'best_in_place'

# Use unicorn as the web server
gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'ruby-debug'

# Use Pusher
gem "pusher", "~> 0.8.1"

#Memcached
gem 'dalli' 

group :test do
  gem 'cucumber-rails'
  gem 'rspec-rails'
  gem 'capybara'
  # database_cleaner is not required, but highly recommended
  gem 'database_cleaner'
end 
```

这是我的旧 Gemfile.lock：

```
 GIT
  remote: git://github.com/sferik/rails_admin.git
  revision: 0ed7ef9ac500e3eff861df4baa0b103fea32cf6e
  specs:
    rails_admin (0.0.1)
      bbenezech-nested_form (~> 0.0)
      bootstrap-sass (~> 1.4, >= 1.4.1)
      builder (~> 3.0)
      coffee-rails (~> 3.1)
      haml (~> 3.1)
      jquery-rails (~> 1.0)
      kaminari (~> 0.12)
      rack-pjax (~> 0.5)
      rails (~> 3.1)
      remotipart (~> 1.0)

GEM
  remote: http://rubygems.org/
  specs:
    POpen4 (0.1.4)
      Platform (>= 0.4.0)
      open4
    Platform (0.4.0)
    RedCloth (4.2.9)
    actionmailer (3.1.4)
      actionpack (= 3.1.4)
      mail (~> 2.3.0)
    actionpack (3.1.4)
      activemodel (= 3.1.4)
      activesupport (= 3.1.4)
      builder (~> 3.0.0)
      erubis (~> 2.7.0)
      i18n (~> 0.6)
      rack (~> 1.3.6)
      rack-cache (~> 1.1)
      rack-mount (~> 0.8.2)
      rack-test (~> 0.6.1)
      sprockets (~> 2.0.3)
    activemodel (3.1.4)
      activesupport (= 3.1.4)
      builder (~> 3.0.0)
      i18n (~> 0.6)
    activerecord (3.1.4)
      activemodel (= 3.1.4)
      activesupport (= 3.1.4)
      arel (~> 2.2.3)
      tzinfo (~> 0.3.29)
    activeresource (3.1.4)
      activemodel (= 3.1.4)
      activesupport (= 3.1.4)
    activesupport (3.1.4)
      multi_json (~> 1.0)
    addressable (2.2.7)
    albino (1.3.3)
      posix-spawn (>= 0.3.6)
    arel (2.2.3)
    aws-sdk (1.3.4)
      httparty (~> 0.7)
      json (~> 1.4)
      nokogiri (>= 1.4.4)
      uuidtools (~> 2.1)
    bbenezech-nested_form (0.0.2)
    bcrypt-ruby (3.0.1)
      jquery-rails
      rails (~> 3.1.0)
    best_in_place (1.1.2)
      jquery-rails
      rails (~> 3.1)
    bootstrap-sass (1.4.3)
      sass-rails (~> 3.1)
    builder (3.0.0)
    cancan (1.6.7)
    capybara (1.1.2)
      mime-types (>= 1.16)
      nokogiri (>= 1.3.3)
      rack (>= 1.0.0)
      rack-test (>= 0.5.4)
      selenium-webdriver (~> 2.0)
      xpath (~> 0.1.4)
    childprocess (0.2.3)
      ffi (~> 1.0.6)
    chunky_png (1.2.5)
    cocaine (0.2.1)
    coffee-rails (3.1.1)
      coffee-script (>= 2.2.0)
      railties (~> 3.1.0)
    coffee-script (2.2.0)
      coffee-script-source
      execjs
    coffee-script-source (1.2.0)
    compass (0.12.1)
      chunky_png (~> 1.2)
      fssm (>= 0.2.7)
      sass (~> 3.1)
    compass-rails (1.0.1)
      compass (~> 0.12.0)
    cucumber (1.1.4)
      builder (>= 2.1.2)
      diff-lcs (>= 1.1.2)
      gherkin (~> 2.7.1)
      json (>= 1.4.6)
      term-ansicolor (>= 1.0.6)
    cucumber-rails (1.2.1)
      capybara (>= 1.1.2)
      cucumber (>= 1.1.3)
      nokogiri (>= 1.5.0)
    daemons (1.1.8)
    dalli (1.1.4)
    database_cleaner (0.7.0)
    devise (2.1.0)
      bcrypt-ruby (~> 3.0)
      orm_adapter (~> 0.0.7)
      railties (~> 3.1)
      warden (~> 1.1.1)
    diff-lcs (1.1.3)
    erubis (2.7.0)
    eventmachine (1.0.0.beta.4)
    execjs (1.2.13)
      multi_json (~> 1.0)
    faraday (0.7.6)
      addressable (~> 2.2)
      multipart-post (~> 1.1)
      rack (~> 1.1)
    fastercsv (1.5.4)
    ffi (1.0.11)
    fssm (0.2.9)
    gherkin (2.7.1)
      json (>= 1.4.6)
    haml (3.1.4)
    hashie (1.2.0)
    hike (1.2.1)
    hpricot (0.8.5)
    httparty (0.8.1)
      multi_json
      multi_xml
    i18n (0.6.0)
    jquery-rails (1.0.19)
      railties (~> 3.0)
      thor (~> 0.14)
    json (1.7.3)
    kaminari (0.13.0)
      actionpack (>= 3.0.0)
      activesupport (>= 3.0.0)
      railties (>= 3.0.0)
    kgio (2.7.4)
    mail (2.3.3)
      i18n (>= 0.4.0)
      mime-types (~> 1.16)
      treetop (~> 1.4.8)
    mime-types (1.18)
    multi_json (1.0.4)
    multi_xml (0.4.1)
    multipart-post (1.1.5)
    mysql2 (0.3.11)
    newrelic_rpm (3.3.4.1)
    nokogiri (1.5.0)
    oauth (0.4.5)
    oauth2 (0.5.2)
      faraday (~> 0.7)
      multi_json (~> 1.0)
    omniauth (1.0.3)
      hashie (~> 1.2)
      rack
    omniauth-facebook (1.2.0)
      omniauth-oauth2 (~> 1.0.0)
    omniauth-oauth (1.0.1)
      oauth
      omniauth (~> 1.0)
    omniauth-oauth2 (1.0.0)
      oauth2 (~> 0.5.0)
      omniauth (~> 1.0)
    omniauth-twitter (0.0.8)
      omniauth-oauth (~> 1.0)
    open4 (1.3.0)
    orm_adapter (0.0.7)
    paperclip (2.6.0)
      activerecord (>= 2.3.0)
      activesupport (>= 2.3.2)
      cocaine (>= 0.0.2)
      mime-types
    pg (0.12.0)
      rake-compiler (~> 0.7)
    polyglot (0.3.3)
    posix-spawn (0.3.6)
    pusher (0.8.5)
      multi_json (~> 1.0)
      ruby-hmac (~> 0.4.0)
      signature (~> 0.1.2)
    rack (1.3.6)
    rack-cache (1.2)
      rack (>= 0.4)
    rack-mount (0.8.3)
      rack (>= 1.0.0)
    rack-pjax (0.5.5)
      hpricot (~> 0.8.4)
      rack (~> 1.3)
    rack-ssl (1.3.2)
      rack
    rack-test (0.6.1)
      rack (>= 1.0)
    rails (3.1.4)
      actionmailer (= 3.1.4)
      actionpack (= 3.1.4)
      activerecord (= 3.1.4)
      activeresource (= 3.1.4)
      activesupport (= 3.1.4)
      bundler (~> 1.0)
      railties (= 3.1.4)
    rails3-jquery-autocomplete (1.0.5)
      rails (~> 3.0)
    railties (3.1.4)
      actionpack (= 3.1.4)
      activesupport (= 3.1.4)
      rack-ssl (~> 1.3.2)
      rake (>= 0.8.7)
      rdoc (~> 3.4)
      thor (~> 0.14.6)
    raindrops (0.8.0)
    rake (0.9.2.2)
    rake-compiler (0.7.9)
      rake
    rdoc (3.12)
      json (~> 1.4)
    redcarpet (2.0.1)
    remotipart (1.0.1)
    rest-client (1.6.7)
      mime-types (>= 1.16)
    rspec (2.7.0)
      rspec-core (~> 2.7.0)
      rspec-expectations (~> 2.7.0)
      rspec-mocks (~> 2.7.0)
    rspec-core (2.7.1)
    rspec-expectations (2.7.0)
      diff-lcs (~> 1.1.2)
    rspec-mocks (2.7.0)
    rspec-rails (2.7.0)
      actionpack (~> 3.0)
      activesupport (~> 3.0)
      railties (~> 3.0)
      rspec (~> 2.7.0)
    ruby-hmac (0.4.0)
    rubyzip (0.9.5)
    sass (3.1.12)
    sass-rails (3.1.5)
      actionpack (~> 3.1.0)
      railties (~> 3.1.0)
      sass (~> 3.1.10)
      tilt (~> 1.3.2)
    selenium-webdriver (2.15.0)
      childprocess (>= 0.2.1)
      ffi (~> 1.0.9)
      multi_json (~> 1.0.4)
      rubyzip
    sendgrid (1.0.1)
      json
      json
    signature (0.1.2)
      ruby-hmac
    sprockets (2.0.4)
      hike (~> 1.2)
      rack (~> 1.0)
      tilt (~> 1.1, != 1.3.0)
    stripe (1.6.0)
      rest-client (~> 1.4)
    term-ansicolor (1.0.7)
    thin (1.3.1)
      daemons (>= 1.0.9)
      eventmachine (>= 0.12.6)
      rack (>= 1.0.0)
    thor (0.14.6)
    tilt (1.3.3)
    treetop (1.4.10)
      polyglot
      polyglot (>= 0.3.1)
    tzinfo (0.3.33)
    uglifier (1.2.4)
      execjs (>= 0.3.0)
      multi_json (>= 1.0.2)
    unicorn (4.3.1)
      kgio (~> 2.6)
      rack
      raindrops (~> 0.7)
    uuidtools (2.1.2)
    warden (1.1.1)
      rack (>= 1.0)
    xpath (0.1.4)
      nokogiri (~> 1.3)
    yui-compressor (0.9.6)
      POpen4 (>= 0.1.4)

PLATFORMS
  ruby

DEPENDENCIES
  RedCloth
  albino
  aws-sdk
  best_in_place
  cancan
  capybara
  coffee-rails
  compass-rails
  cucumber-rails
  dalli
  database_cleaner
  devise (= 2.1)
  fastercsv
  jquery-rails (>= 1.0.12)
  mail
  mysql2 (= 0.3.11)
  newrelic_rpm
  nokogiri
  omniauth
  omniauth-facebook
  omniauth-twitter
  paperclip (~> 2.5)
  pg
  pusher (~> 0.8.1)
  rails (= 3.1.4)
  rails3-jquery-autocomplete
  rails_admin!
  redcarpet
  rspec-rails
  sass-rails
  sendgrid
  stripe
  thin
  uglifier
  unicorn
  yui-compressor 
```

这是新的（并在 heroku 中导致错误）Gemfile.lock：

```
GIT
  remote: git://github.com/sferik/rails_admin.git
  revision: 7e607efb2c5f446e36622a8b6553d1df3fb4245f
  specs:
    rails_admin (0.0.4)
      bbenezech-nested_form (~> 0.0.6)
      bootstrap-sass (~> 2.0, >= 2.0.3)
      builder (~> 3.0)
      coffee-rails (~> 3.1)
      haml (~> 3.1)
      jquery-rails (>= 1.0.17)
      jquery-ui-rails (>= 0.5, < 2)
      kaminari (~> 0.12)
      rack-pjax (~> 0.5)
      rails (~> 3.1)
      remotipart (~> 1.0)
      sass-rails (~> 3.1)

GEM
  remote: http://rubygems.org/
  specs:
    POpen4 (0.1.4)
      Platform (>= 0.4.0)
      open4
    Platform (0.4.0)
    RedCloth (4.2.9)
    actionmailer (3.1.4)
      actionpack (= 3.1.4)
      mail (~> 2.3.0)
    actionpack (3.1.4)
      activemodel (= 3.1.4)
      activesupport (= 3.1.4)
      builder (~> 3.0.0)
      erubis (~> 2.7.0)
      i18n (~> 0.6)
      rack (~> 1.3.6)
      rack-cache (~> 1.1)
      rack-mount (~> 0.8.2)
      rack-test (~> 0.6.1)
      sprockets (~> 2.0.3)
    activemodel (3.1.4)
      activesupport (= 3.1.4)
      builder (~> 3.0.0)
      i18n (~> 0.6)
    activerecord (3.1.4)
      activemodel (= 3.1.4)
      activesupport (= 3.1.4)
      arel (~> 2.2.3)
      tzinfo (~> 0.3.29)
    activeresource (3.1.4)
      activemodel (= 3.1.4)
      activesupport (= 3.1.4)
    activesupport (3.1.4)
      multi_json (~> 1.0)
    addressable (2.2.8)
    albino (1.3.3)
      posix-spawn (>= 0.3.6)
    arel (2.2.3)
    aws-sdk (1.5.4)
      httparty (~> 0.7)
      json (~> 1.4)
      nokogiri (>= 1.4.4)
      uuidtools (~> 2.1)
    bbenezech-nested_form (0.0.6)
    bcrypt-ruby (3.0.1)
    best_in_place (1.1.2)
      jquery-rails
      rails (~> 3.1)
    bootstrap-sass (2.0.3.1)
    builder (3.0.0)
    cancan (1.6.7)
    capybara (1.1.2)
      mime-types (>= 1.16)
      nokogiri (>= 1.3.3)
      rack (>= 1.0.0)
      rack-test (>= 0.5.4)
      selenium-webdriver (~> 2.0)
      xpath (~> 0.1.4)
    childprocess (0.3.2)
      ffi (~> 1.0.6)
    chunky_png (1.2.5)
    cocaine (0.2.1)
    coffee-rails (3.1.1)
      coffee-script (>= 2.2.0)
      railties (~> 3.1.0)
    coffee-script (2.2.0)
      coffee-script-source
      execjs
    coffee-script-source (1.3.3)
    compass (0.12.1)
      chunky_png (~> 1.2)
      fssm (>= 0.2.7)
      sass (~> 3.1)
    compass-rails (1.0.2)
      compass (>= 0.12.0, < 0.14)
    cucumber (1.2.1)
      builder (>= 2.1.2)
      diff-lcs (>= 1.1.3)
      gherkin (~> 2.11.0)
      json (>= 1.4.6)
    cucumber-rails (1.3.0)
      capybara (>= 1.1.2)
      cucumber (>= 1.1.8)
      nokogiri (>= 1.5.0)
    daemons (1.1.8)
    dalli (2.0.5)
    database_cleaner (0.8.0)
    devise (2.1.0)
      bcrypt-ruby (~> 3.0)
      orm_adapter (~> 0.0.7)
      railties (~> 3.1)
      warden (~> 1.1.1)
    diff-lcs (1.1.3)
    erubis (2.7.0)
    eventmachine (0.12.10)
    execjs (1.4.0)
      multi_json (~> 1.0)
    faraday (0.8.1)
      multipart-post (~> 1.1)
    fastercsv (1.5.5)
    ffi (1.0.11)
    fssm (0.2.9)
    gherkin (2.11.0)
      json (>= 1.4.6)
    haml (3.1.6)
    hashie (1.2.0)
    hike (1.2.1)
    hpricot (0.8.6)
    httparty (0.8.3)
      multi_json (~> 1.0)
      multi_xml
    httpauth (0.1)
    i18n (0.6.0)
    jquery-rails (1.0.19)
      railties (~> 3.0)
      thor (~> 0.14)
    jquery-ui-rails (1.0.0)
      jquery-rails
      railties (>= 3.1.0)
    json (1.7.3)
    kaminari (0.13.0)
      actionpack (>= 3.0.0)
      activesupport (>= 3.0.0)
      railties (>= 3.0.0)
    kgio (2.7.4)
    libwebsocket (0.1.3)
      addressable
    mail (2.3.3)
      i18n (>= 0.4.0)
      mime-types (~> 1.16)
      treetop (~> 1.4.8)
    mime-types (1.18)
    multi_json (1.3.6)
    multi_xml (0.5.1)
    multipart-post (1.1.5)
    mysql2 (0.3.11)
    newrelic_rpm (3.4.0)
    nokogiri (1.5.4)
    oauth (0.4.6)
    oauth2 (0.6.1)
      faraday (~> 0.7)
      httpauth (~> 0.1)
      multi_json (~> 1.3)
    omniauth (1.1.0)
      hashie (~> 1.2)
      rack
    omniauth-facebook (1.3.0)
      omniauth-oauth2 (~> 1.0.2)
    omniauth-oauth (1.0.1)
      oauth
      omniauth (~> 1.0)
    omniauth-oauth2 (1.0.2)
      oauth2 (~> 0.6.0)
      omniauth (~> 1.0)
    omniauth-twitter (0.0.11)
      multi_json (~> 1.3)
      omniauth-oauth (~> 1.0)
    open4 (1.3.0)
    orm_adapter (0.0.7)
    paperclip (2.7.0)
      activerecord (>= 2.3.0)
      activesupport (>= 2.3.2)
      cocaine (>= 0.0.2)
      mime-types
    pg (0.13.2)
    polyglot (0.3.3)
    posix-spawn (0.3.6)
    pusher (0.8.5)
      multi_json (~> 1.0)
      ruby-hmac (~> 0.4.0)
      signature (~> 0.1.2)
    rack (1.3.6)
    rack-cache (1.2)
      rack (>= 0.4)
    rack-mount (0.8.3)
      rack (>= 1.0.0)
    rack-pjax (0.5.9)
      hpricot (~> 0.8.6)
      rack (~> 1.3)
    rack-ssl (1.3.2)
      rack
    rack-test (0.6.1)
      rack (>= 1.0)
    rails (3.1.4)
      actionmailer (= 3.1.4)
      actionpack (= 3.1.4)
      activerecord (= 3.1.4)
      activeresource (= 3.1.4)
      activesupport (= 3.1.4)
      bundler (~> 1.0)
      railties (= 3.1.4)
    rails3-jquery-autocomplete (1.0.7)
      rails (~> 3.0)
    railties (3.1.4)
      actionpack (= 3.1.4)
      activesupport (= 3.1.4)
      rack-ssl (~> 1.3.2)
      rake (>= 0.8.7)
      rdoc (~> 3.4)
      thor (~> 0.14.6)
    raindrops (0.9.0)
    rake (0.9.2.2)
    rdoc (3.12)
      json (~> 1.4)
    redcarpet (2.1.1)
    remotipart (1.0.2)
    rest-client (1.6.7)
      mime-types (>= 1.16)
    rspec (2.10.0)
      rspec-core (~> 2.10.0)
      rspec-expectations (~> 2.10.0)
      rspec-mocks (~> 2.10.0)
    rspec-core (2.10.1)
    rspec-expectations (2.10.0)
      diff-lcs (~> 1.1.3)
    rspec-mocks (2.10.1)
    rspec-rails (2.10.1)
      actionpack (>= 3.0)
      activesupport (>= 3.0)
      railties (>= 3.0)
      rspec (~> 2.10.0)
    ruby-hmac (0.4.0)
    rubyzip (0.9.8)
    sass (3.1.19)
    sass-rails (3.1.6)
      actionpack (~> 3.1.0)
      railties (~> 3.1.0)
      sass (>= 3.1.10)
      tilt (~> 1.3.2)
    selenium-webdriver (2.22.2)
      childprocess (>= 0.2.5)
      ffi (~> 1.0)
      libwebsocket (~> 0.1.3)
      multi_json (~> 1.0)
      rubyzip
    sendgrid (1.0.1)
      json
      json
    signature (0.1.3)
    sprockets (2.0.4)
      hike (~> 1.2)
      rack (~> 1.0)
      tilt (~> 1.1, != 1.3.0)
    stripe (1.7.0)
      multi_json (~> 1.1)
      rest-client (~> 1.4)
    thin (1.3.1)
      daemons (>= 1.0.9)
      eventmachine (>= 0.12.6)
      rack (>= 1.0.0)
    thor (0.14.6)
    tilt (1.3.3)
    treetop (1.4.10)
      polyglot
      polyglot (>= 0.3.1)
    tzinfo (0.3.33)
    uglifier (1.2.4)
      execjs (>= 0.3.0)
      multi_json (>= 1.0.2)
    unicorn (4.3.1)
      kgio (~> 2.6)
      rack
      raindrops (~> 0.7)
    uuidtools (2.1.2)
    warden (1.1.1)
      rack (>= 1.0)
    xpath (0.1.4)
      nokogiri (~> 1.3)
    yui-compressor (0.9.6)
      POpen4 (>= 0.1.4)

PLATFORMS
  ruby

DEPENDENCIES
  RedCloth
  albino
  aws-sdk
  best_in_place
  cancan
  capybara
  coffee-rails
  compass-rails
  cucumber-rails
  dalli
  database_cleaner
  devise (= 2.1)
  fastercsv
  jquery-rails (>= 1.0.12)
  mail
  mysql2 (= 0.3.11)
  newrelic_rpm
  nokogiri
  omniauth
  omniauth-facebook
  omniauth-twitter
  paperclip (~> 2.5)
  pg
  pusher (~> 0.8.1)
  rails (= 3.1.4)
  rails3-jquery-autocomplete
  rails_admin!
  redcarpet
  rspec-rails
  sass-rails
  sendgrid
  stripe
  thin
  uglifier
  unicorn
  yui-compressor 
```

任何想法可能导致这些问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T16:20:29.027

尝试移出`gem 'compass-rails'`:assets 组。

# mysql - 计算没有小数的平均值

> ID：11068266
> 
> 赞同：2
> 
> 时间：2012-06-17T01:29:13.740
> 
> 标签：mysql, sql

我希望我能弄清楚这一点。我需要生成一个平均称为 AVG_AMT（整数）并且没有小数的表。它可以舍入或截断。这张桌子真的没关系。

这是我试图写的：

```
SELECT `TC Code`, AVG(ALW_AMT) as int(8,0) AS AVG_AMT
FROM OFFICE_Claims_Physicians
GROUP BY `TC Code`
ORDER BY `TC Code`; 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-17T01:36:16.843

```
SELECT 
    `TC Code`, 
    round(AVG(ALW_AMT),0) AS AVG_AMT
FROM 
    OFFICE_Claims_Physicians
GROUP BY 
    `TC Code`
ORDER BY 
    `TC Code`; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T01:35:41.897

您想使用[ROUND()](http://dev.mysql.com/doc/refman/5.1/en/mathematical-functions.html#function_round)函数

```
SELECT `TC Code`, ROUND(AVG(ALW_AMT)) as int(8,0) AS AVG_AMT
FROM OFFICE_Claims_Physicians
GROUP BY `TC Code`
ORDER BY `TC Code`; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-07T11:37:49.060

使用圆函数

```
SELECT `TC Code`, ROUND(AVG(ALW_AMT)) as int(8,0) AS AVG_AMT
FROM OFFICE_Claims_Physicians
GROUP BY `TC Code`
ORDER BY `TC Code`; 
```

如果您只想要一位或两位小数

```
 SELECT `TC Code`, ROUND(AVG(ALW_AMT),1/2) as int(8,0) AS AVG_AMT
 FROM OFFICE_Claims_Physicians
 GROUP BY `TC Code`
 ORDER BY `TC Code`; 
```

# php - php 用 DateTime 类替换旧代码

> ID：11068268
> 
> 赞同：1
> 
> 时间：2012-06-17T01:29:25.893
> 
> 标签：php, class, datetime, time

我有一个函数可以在两个时间标记之间创建时间间隔。该功能有效，但我正在努力升级`strtotime()`和使用该`DateTime`课程。

下面是我写的一段代码没有出错

```
$timestart = new DateTime("14:00:00");
$timestop = new DateTime("20:00:00");
$date_diff = $timestop->diff($timestart);
$time_diff = $date_diff->format('%H'); 
```

接下来是原封不动的整个代码。我`DateInterval could not be converted to int`使用上面的代码出错了。请告知如何正确实施课程。

现场示例：[http ://codepad.org/jSFUxAnp](http://codepad.org/jSFUxAnp)

```
function timemarks() 
    {       

        //times are actually retrieved from db
        $timestart = strtotime("14:00:00");
        $timestop = strtotime("20:00:00");

        $time_diff = $timestop - $timestart; //time difference

        //if time difference equals negative value, it means that $timestop ends second day 
        if ($time_diff <= 0) 
        {
            $timestop = strtotime( '+1 day' , strtotime( $row->timestop ) ); //add 1 day and change the timetsamp
            $time_diff = $timestop - $timestart;
        }

        //create interval
        $split = 3;
        $interval = $time_diff/$split;

        //get all timemarks
        $half_interval = $interval / 2;
        $mid = $timestart + $half_interval;     
        for ( $i = 1; $i < $split; $i ++) {
            //round intervals   
            $round_mid = round($mid / (15 * 60)) * (15 * 60);
            $result .= date('H:i:s', $round_mid) . ", ";
            $mid += $interval;
        }       
        $round_mid = round($mid / (15 * 60)) * (15 * 60);
        $result .= date('H:i:s', $round_mid);

        return $result;
    } 
```

输出`15:00:00, 17:00:00, 19:00:00`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T01:37:46.953

实际上你正在使用 DateTime，这些只是创建 DateTime 实例的别名

等效项如下所示：

```
$timestart = new DateTime("14:00:00");
$timestop = new DateTime("20:00:00");
$date_diff = $timestop->diff($timestart);
$time_diff = $date_diff->format('%H'); 
```

所以这必须工作，我测试了它，我得到了正确的结果！

# haskell - Acid-state：更新的 MonadState 实例

> ID：11068272
> 
> 赞同：5
> 
> 时间：2012-06-17T01:30:38.110
> 
> 标签：haskell, ghc, acid-state

我在努力`acid-state`。[文档](http://hackage.haskell.org/packages/archive/acid-state/0.6.4/doc/html/Data-Acid.html#t%3aUpdate)指出这`Update st`是`MonadState st`. 我尝试了不同的东西，但我的编译器不想看到 :( 我尝试了`HelloWorld.hs`from [examples](http://mirror.seize.it/acid-state/examples/)，但遇到了同样的问题：

```
HelloWorld.hs:26:7:
    No instance for (MonadState
                       HelloWorldState (Update HelloWorldState))
      arising from a use of `put'
    Possible fix:
      add an instance declaration for
      (MonadState HelloWorldState (Update HelloWorldState))
    In the expression: put (HelloWorldState newValue)
    In an equation for `writeState':
        writeState newValue = put (HelloWorldState newValue)

HelloWorld.hs:29:43:
    No instance for (MonadReader
                       HelloWorldState (Query HelloWorldState))
      arising from a use of `ask'
    Possible fix:
      add an instance declaration for
      (MonadReader HelloWorldState (Query HelloWorldState))
    In a stmt of a 'do' block: HelloWorldState string <- ask
    In the expression:
      do { HelloWorldState string <- ask;
           return string }
    In an equation for `queryState':
        queryState
          = do { HelloWorldState string <- ask;
                 return string } 
```

我做错了什么？如何让它发挥作用？

我正在使用 `acid-state-0.6.4`, `ghc-7.4.2`, `debian-6.0.5`(amd64)

谢谢，尤拉斯

**添加：** 看起来它在 ghc-7.4.1 中有效，在 ghc-7.4.2 中无效。任何人都可以编译器吗？

我尝试重新安装酸状态，但没有帮助。ghc-7.4.2 中的错误或我的环境 ID 损坏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T14:55:00.193

好的，我终于解决了。

问题在于安装了两个不同的`mtl`版本。隐藏错误的人可以解决所有问题。

有趣的部分是我是如何得到它的:)

```
Prelude Data.Acid Control.Monad.State> :i Update
newtype Update st a
  = acid-state-0.6.4:Data.Acid.Common.Update {acid-state-0.6.4:Data.Acid.Common.unUpdate :: transformers-0.2.2.0:Control.Monad.Trans.State.Lazy.State
                                                                                              st a}
    -- Defined in `acid-state-0.6.4:Data.Acid.Common'
instance Monad (Update st)
  -- Defined in `acid-state-0.6.4:Data.Acid.Common'
instance Functor (Update st)
  -- Defined in `acid-state-0.6.4:Data.Acid.Common'
Prelude Data.Acid Control.Monad.State> 
```

`Control.Monad.State`reexports `State`，但您可以看到 ghci 仍然显示`transformers-0.2.2.0:Control.Monad.Trans.State.Lazy.State`完全合格。

# algorithm - 最大化相邻数字的乘积之和

> ID：11068275
> 
> 赞同：2
> 
> 时间：2012-06-17T01:31:06.253
> 
> 标签：algorithm, mathematical-optimization

这是我在[Interviewstreet](http://interviewstreet.com) [代码打印](https://zulily.interviewstreet.com/)期间遇到的一个问题。我无法找到解决方案，甚至无法思考其方向。如果有人可以帮助我找到灵魂，或者向我解释需要如何处理问题，我将不胜感激。

> 给定数字 1, 2, 3, .., N，按顺序排列它们，使相邻数字的乘积之和最大化。
> 
> 例如：如果 N = 3，我们将它们排序为 (1, 2, 3)，则产品的总和为 1*2 + 2*3 = 8，如果我们将它们排序为 (1, 3,2)，则总和产品数量为 1*3 + 3*2 = 9。
> 
> **输入格式：**
> 
> 输入的第一行包含 T，即测试用例的数量。然后按照 T 行，每行包含一个整数 N。
> 
> **输出格式 ：**
> 
> 对于每个测试用例，打印相邻数字乘积的最大总和。
> 
> **样本输入：**
> 
> 2 2 4
> 
> **样本输出：**
> 
> 2 23
> 
> **解释 ：**
> 
> 在第一个测试用例中，给定的排列是 (1, 2)。所以乘积的最大总和是 1*2。在第二个测试用例中，数字是 (1,2,3,4)。排列 1,3,4,2 的相邻数字的乘积之和为 1*3+3*4+4*2 = 23。没有其他排列的相邻数字的乘积之和超过 23。
> 
> **约束：**
> 
> 1 <= T <= 10 1 <= N <= 200000

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-17T01:56:25.813

当最大值位于序列的中间时，最大的相邻乘积和出现，并且连续较低的值在其左右交替。也就是说，给定值 n 的序列将是 [..., n-3, n-1, n, n-2, n-4, ...] （或与此相反，它将具有相同的产品总和）。

因此，省略输入解析位，这是算法的核心（在 Python 中，但很容易翻译成其他语言）：

```
def maximumSumOfAdjacentProducts(n):
    if n == 1: # special case needed for a one element sequence
        return 1

    sumOfProducts = n * (n-1) # this pair is the "center" of the sequence

    for i in range(n-2, 0, -1): # iterate downward from n-2 to 1
        sumOfProducts += i*(i+2) # each adjacent pair is separated by 2

    return sumOfProducts 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T01:51:59.957

1.  对数组进行排序，`sortedArray`按升序调用。

2.  删除`max1`，`max2`并将它们放在一个`result`列表中。

3.  删除下一个元素并将其添加到`MAX(max1, max2)`.

4.  更新`max1`和`max2`. 即在列表`max1`的左侧和`max2`右侧。

5.  重复步骤 3 和 4，直到排序后的输入数组包含元素。

**例子：**

```
inputArray: 1,3,4,2,5

sortedArray: 1,2,3,4,5

Add 5 and 4 to the list first.

result = [5, 4]

Remove 3 and add it to MAX(5,4)

result = [3, 5, 4]

Remove 2 and add it to MAX(3,4)

result = [3, 5, 4, 2]

Remove 1 and add it to MAX(3,2)

result = [1, 3, 5, 4, 2] 
```

# c - arctan(x) 函数给出错误答案

> ID：11068277
> 
> 赞同：-1
> 
> 时间：2012-06-17T01:31:17.983
> 
> 标签：c, algorithm, math, trigonometry

我正在为 arctan(x) 使用 Maclaurin 系列，但我没有得到正确的答案。我正在以弧度进行计算。这是到目前为止的功能：

```
fp32 t32rArcTangent(fp32 number)
{
fp32 a, b, c, d;    /* Temp Variables */
fp32 t;             /* Number Temp */
uint32 i;           /* Loop Counter */

/* Time Savers */
if (b32fpcomp(number, MM_FP8INFINITY)) return((fp32)MM_PI / 2);
if (b32fpcomp(number, -MM_FP8INFINITY)) return(-(fp32)MM_PI / 2);

/* Setup */
a = 0;
b = 0;
c = 1;
d = number;
t = number * number;

/* Calculation Loop */
for (i = 0; i < MMPRVT_FP32_TRIG_LIMIT; i++)
  {
    b += d;
    if (b32fpcomp(a, b)) break;
    a = b;
    c += 2;
    d *= -1 * t / c;
  }
#ifdef DEBUG
printf("Loops: %lu\n", i);
#endif

/* Result */
return(a); 
```

fp32 = typedef'd float

uint32 = typedef'd unsigned long int

MM_FP8INFINITY 是 fp32 数据类型可以包含的最大数字。

MM_PI 只是大约 50 位的 PI。

MMPRVT_FP32_TRIG_LIMIT 是可用于计算结果的最大循环数。这是为了防止级数展开进入无限循环，如果由于某种原因级数未能收敛。

这些是我得到的结果：

```
Testing arctangent(x) function.
Loops: 0
arctan(0):      0
Loops: 8
arctan(1):      0.724778414
Loops: 13
arctan(R3):     0.709577262
Loops: 6
arctan(1/R3):   0.517280579 
```

R3 只是 3 的平方根，即 1.732050808....

现在我知道arctan级数的收敛半径是|x| <= 1，所以我想我必须以某种方式减少输入。问题是对于 arctan，函数的域是 (-INF, +INF)。那么如何减少呢？这是按弧度角计算的。

* * *

感谢您指出了这一点。问题已得到纠正，我也完成了输入减少。这是已完成且已更正的函数，它现在给出了正确的答案：

```
fp32 t32rArcTangent(fp32 number)
{
fp32 a, b, c, d;    /* Temp Variables */
fp32 t;             /* Number Temp */
uint32 i;           /* Loop Counter */
uint8 fr;           /* Reduction Flag */

/* Time Savers */
if (b32isInf(number) == -1) return(-(fp32)MM_PI / 2);
if (b32isInf(number) == 1) return((fp32)MM_PI / 2);
if (b32isNaN(number)) return(number);
if (b32fpcomp(number, MM_FP8INFINITY)) return((fp32)MM_PI / 2);
if (b32fpcomp(number, -MM_FP8INFINITY)) return(-(fp32)MM_PI / 2);
if (b32fpcomp(number, ONE)) return((fp32)MM_PI / 4);
if (b32fpcomp(number, -ONE)) return(-(fp32)MM_PI / 4);

/* Reduce Input */
if (number > ONE)
    {
      number = 1 / number;
      fr = 1;
    }
  else fr = 0;

/* Setup */
a = 0;
b = 0;
c = 1;
d = number;
t = number * number;

/* Calculation Loop */
for (i = 0; i < MMPRVT_FP32_TRIG_LIMIT; i++)
  {
    b += d / c;
    if (b32fpcomp(a, b)) break;
    a = b;
    c += 2;
    d *= -1 * t;
    #ifdef DEBUG
    printf("a=%g b=%g, c=%g d=%g\n", a, b, c, d);
    #endif
  }
#ifdef DEBUG
printf("Loops: %lu\n", i);
#endif

/* Result */
if (fr != 0) a = ((fp32)MM_PI / 2) - a;
return(a);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T01:46:06.903

考虑除以 后每个循环中的项会发生什么变化`c`：

```
c += 2;
d *= -1 * t / c; 
```

首先你要除以 1 [隐含地，在此之前]，然后除以 3，然后再除以 5，这听起来不错，但是因为你将 d 乘以这个术语，所以你实际上是除以每个除数。IOW，而不是

```
x - 1/3*x^3 + 1/5*x^5 - 1/7*x^7 + 1/9*x^9 
```

你想要的，你正在计算

```
x - 1/(1*3)*x^3 + 1/(1*3*5)*x^5 - 1/(1*3*5*7)*x^7 + 1/(1*3*5*7*9)*x^9 
```

你仍然可以使用你的`d *= -t`技巧，但你应该移动分区。

# c# - 如何确定该月的第一个或第三个星期三是否尚未到来，如果是，哪个最接近当前日期？

> ID：11068278
> 
> 赞同：0
> 
> 时间：2012-06-17T01:31:24.973
> 
> 标签：c#, asp.net

> **可能重复：**
> [获取一个月中的特定日期](https://stackoverflow.com/questions/11061174/getting-specific-days-in-a-month)

我之前曾在[如何使用 C# 找到一个月中的第三个星期五？](https://stackoverflow.com/questions/5421972/how-to-find-the-3rd-friday-in-a-month-with-c)但由于我当时没有很好地解释我的问题，我必须再试一次：

我的目标很简单：按下按钮（此处称为“Button1”）后，我必须确定今天的日期是在*该*月的第一个星期三还是第三个星期三之前。如果是这种情况，我必须将标签的文本（此处称为“lblDate”）设置为这些未来星期三中最接近当前日期的日期。

到目前为止，我已经写了这个：

```
protected void Button1_Click(object sender, EventArgs e)
{

    DateTime Now = DateTime.Today;
    DateTime TempDate = new DateTime(Now.Year, Now.Month, 1);

    if (TempDate.DayOfWeek != DayOfWeek.Wednesday)
    {
        TempDate = TempDate.AddDays(1);
        string date = TempDate.ToString();
        lblDate.Text = date;
    }
    if (TempDate == TempDate.AddDays(1))
    {
        TempDate = TempDate.AddDays(14);
        string date = TempDate.ToString();
        lblDate.Text = date;
    }

} 
```

如您所见，缺少一些东西。我将不胜感激任何帮助填写...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T01:44:43.610

好吧，我不完全确定这会回答你的问题，但它可能会让你走上正轨。您可以从 DateTime 功能中找出星期几。只需使用类似的东西：

```
DateTime dateValue = new DateTime(2008, 6, 11);
Console.WriteLine((int) dateValue.DayOfWeek);      // Displays 3 
```

将其与实际日期结合使用，例如：

```
if((int) dateValue.DayOfWeek == 3) //which is Wednesday
  if(date < 7 && date > 1) 
     week == 1st Weds of month
  else(date < 21 && date > 14)
     week == 3rd Weds of month 
```

这显然不是确切的代码，但也许这些方面的一些东西会有所帮助。你必须稍微调整一下参数，以便调整第一个不完全在星期一下降的情况。由于一周只有 7 天，即使第一天是在星期二，它也只是在 1 和 7 的范围内，同样适用于 14 和 21。但只要玩弄它，你应该很快就能找到答案.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T01:51:58.707

你也可以这样尝试：

```
protected DateTime getFirstWednesdayOfMonth(DateTime seedDate)
{
    DateTime wed1 = new DateTime(seedDate.Year, seedDate.Month, 1); //1st Wednesday can start on the 1st of the month
    while (wed1.DayOfWeek != DayOfWeek.Wednesday)
    {
        wed1 = wed1.AddDays(1);
    }
    return wed1;
}

protected DateTime getThirdWednesdayOfMonth(DateTime seedDate)
{
    DateTime wed3 = new DateTime(seedDate.Year, seedDate.Month, 15); //3rd Wednesday cannot start prior to the 15th of the month
    while (wed3.DayOfWeek != DayOfWeek.Wednesday)
    {
        wed3 = wed3.AddDays(1);
    }
    return wed3;
}
protected void Button1_Click(object sender, EventArgs e)
{
    DateTime Now = DateTime.Today;
    DateTime wed1 = getFirstWednesdayOfMonth(Now);
    DateTime wed3 = getThirdWednesdayOfMonth(Now);

    if (Now < wed1)
    {
        lblDate.Text = wed1.ToString();
    }
    else if (Now < wed3)
    {
        lblDate.Text = wed3.ToString();
    }
} 
```

# python - 聪明的基于流的python程序不会遇到无限递归

> ID：11068279
> 
> 赞同：5
> 
> 时间：2012-06-17T01:31:36.563
> 
> 标签：python, recursion, stream, infinite, lazy-sequences

我正在玩一些聪明的方法来为序列[A003602创建一个 python 生成器](http://oeis.org/A003602)

这似乎有效，但我不知道为什么。在我看来，它应该达到无限递归。python 是否在我不认识的地方进行了一些惰性评估？

```
def N():
    i=1
    while True:
        yield i
        i+=1

def interleave(a,b):
    def result():
        x=a()
        y=b()
        while True:
            yield next(x)
            yield next(y)
    return result

def RZ():
    return interleave(N,RZ)()

gen=RZ() 
```

对我来说，似乎因为 RZ 立即调用 interleave 返回的方法，而后者又调用了 RZ 的 b（在第一次调用 yield 之前），这应该是无限递归。但这实际上似乎有效。谁能解释为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T01:32:36.283

生成器（任何带有`yield`语句的函数）都是惰性的。这意味着`result()`在您向它请求第一个值之前不会开始处理，而您不会这样做。

这里的根本原因是您从`x`一开始就要求一个值。这意味着生成器永远不会询问它的子生成器，直到至少要求第二个值。考虑一个更简单的例子：

```
def test():
    yield 1
    a = test()
    while True:
        yield next(a)

a = test()
for i in range(10):
    print(next(a)) 
```

这和你的一样有效。它有无限递归的潜力，但如果你要求那么多值，它只会走得那么远。您所要做的就是删除`yield 1`以获得预期的行为。在您的情况下，只需切换`N`并`RZ`询问下一个值 - 您将获得预期的递归。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-17T04:26:32.570

其他答案已经解释了为什么没有立即无限递归问题（因为生成器被懒惰地解释）。但是，我认为考虑何时可能达到 Python 解释器中存在的递归有限限制也很有趣。

首先，我注意到您的代码可以简化一点（您的功能比实际需要的要多，并且您的`N`生成器与 相同`itertools.count(1)`）。所以这里有一个更简单的生成器版本：

```
from itertools import count

def RZ():
    x=count(1)
    y=RZ()
    while True:
        yield next(x)
        yield next(y) 
```

样本输出：

```
>>> gen = RZ()
>>> for i in range(1, 21):
    print i, next(gen)

1 1
2 1
3 2
4 1
5 3
6 2
7 4
8 1
9 5
10 3
11 6
12 2
13 7
14 4
15 8
16 1
17 9
18 5
19 10
20 3 
```

接下来，我编写了一个函数，用于内省嵌套生成器并计算它们被评估的深度。我不确定这段代码是否可以在 python 版本之间移植（我使用的是 2.7）：

```
def getDepth(gen):
    depth = 0
    while gen:
        depth += 1
        gen = gen.gi_frame.f_locals.get("y")
    return depth 
```

输出（索引，深度，值）：

```
>>> for i in range(1, 21):
    print i, getDepth(gen), next(gen)

1 1 1
2 2 1
3 3 2
4 3 1
5 4 3
6 4 2
7 4 4
8 4 1
9 5 5
10 5 3
11 5 6
12 5 2
13 5 7
14 5 4
15 5 8
16 5 1
17 6 9
18 6 5
19 6 10
20 6 3 
```

这些深度值呈对数增长。具体来说，产生序列的第 N 个值所需的嵌套生成器的深度是`ceil(log(N, 2)) + 1`。

在我的 Python 副本中，允许递归（默认情况下）达到 100 级深度。只有在生产了 2^99 + 1 (=633,825,300,114,114,700,748,351,602,689) 个项目后，生成器才会达到该限制。我不会屏住呼吸等待的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T01:57:16.070

`To me it seems like since RZ instantly calls the method returned by interleave which in turn calls b which is RZ (before the first call to yield),`调用包含的函数`yield`返回一个迭代器对象，直到你开始迭代它才会被评估，因为 RZ 也返回一个迭代器，因为它调用具有 yield 的结果，因此它最初返回一个迭代器，即 RZ 返回一个迭代器.

`yield next(x)`将调用`yield i`并停止，再次调用迭代器`yield next(y)`将调用`x = a(); y = b(); while True: yield next(x)`并停止，依此类推，它似乎在不断地创建生成器，虽然不是很快，这可能好也可能不好......

```
count = 0
def N():
    i=1
    global count
    count += 1
    while True:
        yield i
        i+=1

def interleave(a,b):
    def result():
        global count
        count += 1
        x=a()
        y=b()
        while True:
            yield next(x)
            yield next(y)
    return result

def RZ():
    return interleave(N,RZ)()

gen = RZ() # 1) call RZ

gen = RZ()
r = [next(gen) for index in xrange(100)]
print count 
```

它生成了 14 个迭代器对象，经过 100 次迭代，1000 次后 20 个，10000 次后 28 个，100000 次后 34 个，所以很慢......

# c# - 如何制作选项卡式多个文本框窗口

> ID：11068285
> 
> 赞同：0
> 
> 时间：2012-06-17T01:32:39.527
> 
> 标签：c#, tabbed-interface

我正在制作一个文本编辑器并尝试将选项卡式窗口功能添加到文本框中。我一直在到处寻找信息。也许我没有以正确的方式提出问题，因为我不断收到“接受标签”帖子等。有人知道我可以使用的代码或帖子吗？如果您想查看我的文本编辑器，它位于 johnverber.com/dir，它是一个 .exe 文件，以便您了解情况。但我已经包含了我的新版本的屏幕截图：

![在此处输入图像描述](../Images/925899a13aaefa3ffd4a9dfc3eb46bea.png)

# html - 我希望我的容器 div 垂直扩展以容纳其内容...？

> ID：11068291
> 
> 赞同：0
> 
> 时间：2012-06-17T01:34:06.800
> 
> 标签：html, containers, expand

我正在创建一个具有背景图像的页面，并且内容位于垂直向下运行的居中容器内。类似于雅虎！答案布局：[http ://uk.answers.yahoo.com/](http://uk.answers.yahoo.com/)

如果您在使用 Yahoo! 时最小化浏览器 回答垂直滚动只是变得“更长”并且内容都停留在白色容器上。

但是，在我最小化浏览器时，容器底部的内容会溢出并出现在背景图像上。我希望容器扩大..

我不想使用溢出：自动或任何其他溢出属性，我不喜欢滚动条。

请参阅下文并提前致谢：

```
body {
background-image: url('images/ppback.jpg');
padding: 0;
margin: 0;
width:100%;
height:100%;
}

#container {
position: relative;
background: #440077;
width: 770px;
margin:0 auto;
top: 0px;
height: 100%; 
opacity: .7;
filter:alpha(opacity=70);
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T01:39:20.630

只需从#container 中删除值 height: 100%。这是将容器的最大高度设置为与浏览器窗口相同的高度，从而防止显示比窗口更长的任何内容。

我猜你添加了这个属性，以便当页面内容很少时整个背景将显示在页面上。要获得您正在寻找的效果，您可能必须在固定位置和定位中心创建一个单独的 div，其中 az 索引小于您的主#container。

# ruby-on-rails - 经常更新很多记录

> ID：11068298
> 
> 赞同：0
> 
> 时间：2012-06-17T01:36:26.623
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我有一个 Rails 3 应用程序，它在 mySQL-DB 中有数百条记录，需要每小时更新多次。实际更新是通过`delayed_job`在控制器逻辑中触发的（检查自上次更新以来是否经过了足够的时间，然后才发生某事）。

每次更新都很慢，在某些情况下可能需要一秒钟（尽管平均为 3 - 5 次更新/秒）。代码如下所示：

```
class Thing < ActiveRecord::Base

...

  def self.scheduled_update
    Thing.all.each do |t|
      ...
      t.some_property = new_value
      t.save
    end
  end 

end 
```

我观察到执行在 300 - 400 条记录后停止，然后延迟的作业似乎最终挂起并超时（条目`delayed_job.log`）。过了一会儿，下一个开始，也失败了，依此类推，所以并不是所有的记录都得到更新。

这样做的正确方法是什么？

当这样使用时，Rails 如何处理数据库连接？可能是一些未正确检测/处理的超时问题吗？

必须有一个默认的方法来做到这一点，但到目前为止找不到任何东西..

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T01:53:44.690

另一个选项是[update_all](http://apidock.com/rails/ActiveRecord/Relation/update_all)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T01:47:40.070

对于海量数据记录，Rails 是一个糟糕的选择。看看你是否可以创建一个 sql 存储过程或其他一些可以避免活动记录的方式。

*   `object.save_with_validation(false)`如果您可以完全跳过验证，请使用。

*   查找记录时，使用`:select => 'a,b,c,other_fields'`限制您想要的字段（本例中为“a”、“b”、“c”和“其他”）。

*   `:include`当您最初跨多个表选择和加入时，用于预加载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T13:49:56.560

所以我解决了我的问题。

我使用的 rails 版本（3.0.3）存在一些问题，超时是由我怀疑的一些错误引起的。更新到更高版本的 3.0.x 分支解决了这个问题，现在一切运行良好。

# html - 在 html 中嵌入 .exe

> ID：11068302
> 
> 赞同：0
> 
> 时间：2012-06-17T01:37:38.187
> 
> 标签：html, executable, exe

我需要帮助将游戏嵌入到 HTML 中，如果我确实在 html 中复制了游戏，这很复杂，所以有什么代码可以做到吗？

PS：它必须是站点中的一个元素，而不是在新窗口中打开

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T01:40:14.483

您不能在 html 中嵌入 exe。您可以使用对网络友好的语言（如 javascript、flash 或 java）重写游戏，也可以将其制作为下载游戏。如果允许 exe 从网页运行，病毒将比现在更加普遍。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T01:42:41.317

在这里非常疯狂的猜测，但如果您使用 Game Maker 制作游戏，则有可用的[GameMaker:HTML5](http://yoyogames.com/)，它允许您采用与为 Windows EXE 编写的代码相同的代码并将其导出为有效的 HTML5/JavaScript。

除此之外，没有办法将 EXE 嵌入网页。

# class - 无法为 Google Maps v3 中的信息框分配课程

> ID：11068304
> 
> 赞同：1
> 
> 时间：2012-06-17T01:38:15.297
> 
> 标签：class, google-maps, google-maps-api-3, infowindow

[其他人对InfoBox](http://google-maps-utility-library-v3.googlecode.com/svn/trunk/infobox/docs/examples.html)有问题吗？

有没有更好的方法来创建信息框并为其分配类？我不能设置班级！

```
var myOptions = {
  content: boxText,
  disableAutoPan: false,
  boxClass: "CLASS", <----
  pixelOffset: new google.maps.Size(-140, 0),
  zIndex: null,
  boxStyle: {
    background: "url('tipbox.gif') no-repeat",
    opacity: 0.75,
    width: "280px"
  },
  closeBoxMargin: "10px 2px 2px 2px",
  closeBoxURL: "http://www.google.com/intl/en_us/mapfiles/close.gif",
  infoBoxClearance: new google.maps.Size(1, 1),
  isHidden: false,
  pane: "floatPane",
  enableEventPropagation: false
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T01:52:13.170

似乎对我有用：

[JsFiddle 示例](http://jsfiddle.net/456hH/)

元素属性：

![在此处输入图像描述](../Images/d3945b76819b1d1540a7ecaebc2d666a.png)

# c# - 同一页面上的两个集合

> ID：11068309
> 
> 赞同：0
> 
> 时间：2012-06-17T01:39:30.057
> 
> 标签：c#, .net, windows-phone-7

我有一个已经有 DataContext 的页面。

当我更改数据透视项目时，我需要将另一个列表绑定到另一个集合。

如何做到这一点？

这是显示第一个数据透视项信息的第一个 DataContext。

```
protected override void OnNavigatedTo(NavigationEventArgs e)
    {
        base.OnNavigatedTo(e);

        if (NavigationContext.QueryString.TryGetValue("id", out _embarqueId))
        {
            String json = JsonConvert.SerializeObject(_embarqueId);

            using (IntrepService service = new IntrepService())
            {
                String retornojson = service.ObterDetalhesEmbarque(json);

                EmbarqueAtual = JsonConvert.DeserializeObject<EmbarqueViewModel>(retornojson);

                DataContext = EmbarqueAtual;
            }

            VerificaConclusao();
        }
    } 
```

然后我尝试将第二个集合加载到列表框，但不起作用：

```
private void Pivot_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        if (!_itemsareloaded && ((PivotItem)pivot.SelectedItem).Header.Equals("itens"))
        {
            using (IntrepService service = new IntrepService())
            {
                String json = JsonConvert.SerializeObject(_embarqueId);

                var retorno = service.ObterItensEmbarque(json);

                ItensDoEmbarque = JsonConvert.DeserializeObject<ObservableCollection<ItemDeEmbarqueViewModel>>(retorno);
                lstItens.DataContext = ItensDoEmbarque;
            }

        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T05:03:41.457

你应该有一个 ViewModel 来保存你想要绑定的所有数据。将此 ViewModel 设置为您的数据上下文。

```
public class ViewModel : INotifyPropertyChanged
{
    private ObservableCollection<ItemDeEmbarqueViewModel> _itensDoEmbarque;
    private EmbarqueViewModel _embarqueAtual;

    public ViewModel()
    {
        ItensDoEmbarque = new ObservableCollection<ItemDeEmbarqueViewModel>();
    }

    public event PropertyChangedEventHandler PropertyChanged;

    public ObservableCollection<ItemDeEmbarqueViewModel> ItensDoEmbarque
    {
        get { return _itensDoEmbarque; }
        set
        {
            _itensDoEmbarque= value;
            OnPropertyChanged("ItensDoEmbarque");
        }
    }

    public EmbarqueViewModel EmbarqueAtual
    {
        get { return _embarqueAtual; }
        set
        {
            _embarqueAtual = value;
            OnPropertyChanged("EmbarqueAtual");
        }
    }

    protected virtual void OnPropertyChanged(string propertyName)
    {
        var handler = PropertyChanged;
        if (handler != null)
        {
            handler(this, new PropertyChangedEventArgs(propertyName));
        }
    }
} 
```

在您的 OnNavigatedTo 方法中设置这两个属性并将 DataContext 设置为此对象。您需要更改 xaml 以绑定到这些项目的属性，而不是 {Binding}

您可以提前设置 PivotItem 将绑定到的集合，而无需担心呈现延迟。PivotItems 延迟渲染，直到它们被显示。

# objective-c - 如何在Objective-C（iOS）中获取2个字符串之间的第一个不同字符？

> ID：11068315
> 
> 赞同：1
> 
> 时间：2012-06-17T01:40:26.920
> 
> 标签：objective-c, ios, nsstring, character, loops

我知道我可以使用 characterAtIndex: 遍历两个 NSString 对象的每个字符并比较它们，但是如果我经常使用这个函数，这种方法会非常昂贵。

有没有为此内置的东西，或者更有效的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T01:46:24.373

我能想到的最快方法是从中获取一个 C 字符串，然后遍历这些字符串。

只是一个简单的例子（根据你的喜好修复它）：

```
const char* myCString = [myNSStringInstance UTF8String];
const char* string2 = [nsstring2 UTF8String];

// Assume same length. You can fix this
for(i = 0; i < strlen(myCString); i++) {
    if(myCString[i] != string2[i]) {
        // Do something here...
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T01:51:24.877

这有点骇人听闻，但是您可以为每个获取 c 字符串，然后使用指针索引。与您提到的想法相同的基本算法，但理论上与您合理期望的解决方案一样有效（只需查看两个内存地址并比较它们的内容。

伪代码：

```
char *stringA = [stringA cStringUsingEncoding:NSUTF8StringEncoding];
char *stringB = [stringB cStringUsingEncoding:NSUTF8StringEncoding];
int mismatchIndex = -1;
for(int i = 0; i<shorterStringLength; i++) {
    if (stringA[i] != stringB[i]) {
        mismatchIndex = i;
        break;
    } 
} 
```

# windows - 有什么方法可以在 Windows 上使用 Apache2 调试 php4.3 或 php4.4？

> ID：11068316
> 
> 赞同：1
> 
> 时间：2012-06-17T01:40:40.867
> 
> 标签：windows, debugging, apache2, php4, dbg

我相信我已经尝试了所有可能的方法来使用 apache2 和 php4 在 Windows 中设置调试环境，但都失败了。我有几个用于 php4.3 和 php4.4 的 apache 实例。我在 4.4 版本上安装了 xdebug（找不到 php4.3 的工作模块），但似乎没有适用于旧 xdebug 版本的 IDE/客户端。然后我切换到 DBG 方法。它根本不会在任何一个版本上加载。尝试了最后 2 个 DBG windows 二进制版本，但它们都不会加载 php。phpinfo() 的输出没有显示 DBG 模块的迹象，命令行“php -m”也没有。我似乎也找不到在 Windows 下的 apache 2 上以快速 cgi 运行 php4 的方法。只有一个可执行文件（php. exe) 与 windows 的 php4 二进制文件一起使用 (没有 php-cgi.exe)。我的 apache/php 设置是：Apache/2.0.64 (Win32) PHP/4.4.1（phpinfo 不会提及任何关于线程安全的内容，“php -i”会显示线程安全已启用“服务器 API：Apache 2.0 处理程序

php.ini DBG 部分：尝试了以下所有方法来加载扩展（均无效） zend_extension_ts="C:\PHP\php4.4.1\extensions\php_dbg.dll" 或 zend_extension_ts=php_dbg.dll 或 extension="C:\ PHP\php4.4.1\extensions\php_dbg.dll" 或 extension=php_dbg.dll

```
[debugger]
debugger.enabled = true
debugger.profiler_enabled = true
debugger.JIT_host = clienthost
debugger.JIT_port = 7869 
```

尝试了 php DBG 包：dbg-2.13.1-win32.zip dbg-2.15.5-win32.zip 使用 php_dbg.dll-4.4.x（我刚刚将其重命名为 php_dbg.dll）然后复制到 php 扩展目录.

使用 Windows 7 x64

# c++ - 什么是 C++ 中 const 和 virtual 关键字位置的良好约定（或要求）？

> ID：11068319
> 
> 赞同：0
> 
> 时间：2012-06-17T01:41:25.917
> 
> 标签：c++, virtual

我知道如果 virtual 关键字覆盖了虚拟基函数，则不需要在派生类成员函数声明中重新使用它，但是这样做是为了明确它是虚拟的吗？另外，声明和/或定义中是否存在 const 关键字呢？我认为 Alexandrescu 提到了一些关于此的内容，但我不记得它是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-17T02:01:53.857

你的问题似乎很困惑。`virtual`覆盖基类方法时是可选的。如果您需要，它`const`永远*不是可选的。*这不会像您认为的那样做：

```
struct A
{
  virtual void Func() const;
};

struct B : public A
{
  virtual void Func();
}; 
```

该结构`B`有*两个*名为`Func`. 其中一个将在调用它的对象时调用`const`，而另一个将在它不是时调用`const`。此代码中的任何内容都没有被*覆盖*；这是两个*独立*的虚函数。

您不能只是忽略`const`并期望一切正常。

事实上，这个例子也说明了为什么`virtual`在派生类中重写时应该使用。在这种情况下，很明显您打算重写基类函数，但函数签名错误。如果没有`virtual`那里，就不会立即表明您打算覆盖某些东西。

这不是一个巨大的帮助，但它是一些东西。

`override`C++11 使用伪关键字提供了更好的解决方案（因为它实际上解决了问题） 。

```
struct A
{
  virtual void Func() const;
};

struct B : public A
{
  virtual void Func() override; //Gives a compiler error, since it is not overriding a base class function.
}; 
```

# linux - 只读安装中的多用户环境中的 RCP P2 更新

> ID：11068322
> 
> 赞同：2
> 
> 时间：2012-06-17T01:41:45.577
> 
> 标签：linux, eclipse-rcp, p2

我创建了一个 Ubuntu 包来安装我的 RCP 应用程序。安装的文件归根用户所有。用户是否可以随后通过 P2 安装更新？[关于Eclipse 多用户安装的](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/misc/multi_user_installs.html)文档表明它是可能的，以及对[这个问题](https://stackoverflow.com/questions/8743803/error-when-updating-p2-enabled-rcp-application-in-multiuser-environment)的答案。

但是，当我启动应用程序时，它不会像往常一样自动检查更新，并且我指定的更新站点`p2.inf`没有列在“安装新软件...”对话框中。

使用`-configuration`或`-data`运行时选项没有帮助。

我可以通过运行`sudo chown -R <my_username> /opt/<my_app_installation>`. 当我随后启动该应用程序时，它会在启动时正确检查更新，并且我的更新站点正确列在“安装新软件...”对话框中。当然，我希望将写入该安装目录的任何数据改为写入用户的主目录。

* * *

**补充资料：**

**这是一个文件和文件夹的列表，这些文件和文件夹仅在**目录被授予所有权`<my_username>`并且程序运行后才显示在我的安装目录中。

```
/opt/<my_app_installation>/configuration/org.eclipse.core.runtime
/opt/<my_app_installation>/configuration/org.eclipse.equinox.app
/opt/<my_app_installation>/configuration/org.eclipse.osgi
/opt/<my_app_installation>/p2/org.eclipse.equinox.p2.engine/profileRegistry/profile.profile/1339896994308.profile.gz
/opt/<my_app_installation>/p2/org.eclipse.equinox.p2.engine/profileRegistry/profile.profile/.data/.settings/org.eclipse.equinox.p2.ui.sdk.prefs
/opt/<my_app_installation>/p2/org.eclipse.equinox.p2.engine/profileRegistry/profile.profile/.data/.settings/org.eclipse.equinox.p2.ui.sdk.scheduler.prefs
/opt/<my_app_installation>/p2/org.eclipse.equinox.p2.repository 
```

* * *

**更多实验结果：**

`-configuration $HOME/.my_app_files`即使使用可写（chown'd）安装目录，在提供运行时选项时也不会放置任何文件 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T06:57:02.263

p2 本身对于共享安装有很多限制。AFAIK 最新版本的 Juno 也没有显着改进。

但是一位来自 Redhat 的人正在使用 RPM 包进行 p2 安装，您可以在他的[博客文章](http://eclipseandlinux.blogspot.com/2012/05/making-p2-working-with-rpm-last.html)中阅读他的进度。工作和想法可以与 Debian 软件包共享。

# wpf - windows8 Metro平台代码中如何使用获取SolidBrush参考等资源

> ID：11068327
> 
> 赞同：0
> 
> 时间：2012-06-17T01:43:20.540
> 
> 标签：wpf, c#-4.0, windows-8, brush, microsoft-metro

我们可以使用此代码 `(Brush)this.FindResource("key")`在 wpf 中获取 Brush 引用，如何在 windows8 Metro 中执行相同操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T17:08:08.877

尝试这个...

```
Resource.tryGetValue(out object,key); 
```

应该管用。

# c - 谁能解释什么是 Windows HAL 以及它的用途？

> ID：11068328
> 
> 赞同：3
> 
> 时间：2012-06-17T01:43:54.170
> 
> 标签：c, device, drivers, hal

干杯...

我知道它代表硬件抽象层，但它到底是做什么的？它是为 VB 等高级语言设计的与硬件通信吗？IN/OUT 指令是调用 HAL 例程还是直接通过 I/O 管理器与硬件的设备驱动程序通信？

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T02:17:16.840

> 我知道它代表硬件抽象层，但它到底是做什么的？

它本质上是 NT 内核的“不可移植”部分，作为单独的模块提供，以便 NT 可以移植到多个处理器架构。示例：中断路由。

> 它是为 VB 等高级语言设计的与硬件通信吗？

不，它是作为 NT 内核的支持例程。如果您在用户模式下编码（就像在 VB 等高级语言中一样），您无需知道它的存在。

> IN/OUT 指令是调用 HAL 例程还是直接通过 I/O 管理器与硬件的设备驱动程序通信？

当您使用`in`and`out`指令时，这是直接与 CPU 对话。这与您正在讨论的 NT 内核主题完全无关。那里没有 HAL。没有 NT I/O 管理器。这些指令是 x86 指令集提供的用于通过 I/O 地址与设备通信的指令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T02:03:29.187

HAL 旨在从操作系统中“抽象”出硬件的细节（它是一个内核组件）。

它为内核提供了处理机器特定指令的例程（afaik 包括通过上下文切换处理诸如 AVX 状态保存之类的事情）以及诸如中断之类的其他细节（Google 'Interrupts IDT'（无引号））

请注意，HAL 并不完全位于内核之下，因为内核在某些地方仍然直接与硬件通信，但是 HAL 的许多功能也依赖于内核（因此它们通常以匹配的“集合”出现）

[http://support.microsoft.com/kb/99588](http://support.microsoft.com/kb/99588)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T02:22:22.517

HAL 就像一个隔离层，这意味着该层任一侧的事物都可以改变，并且（理论上）它不会对另一侧产生影响。

这意味着各种不同类型的硬件可以在 HAL 之下，而通过 HAL 调用的软件并不关心。

# javascript - 我正在尝试在 JS 中创建这个随机名称生成器。数组返回未定义？

> ID：11068330
> 
> 赞同：3
> 
> 时间：2012-06-17T01:44:15.190
> 
> 标签：javascript, arrays, random

我正在尝试制作一个简单的生成器，它从用户那里获取一些音节，并从中随机形成一个组成词。

我已经设法制作了一个不错的输入系统。它将音节放入一个二维数组。我已经对其进行了测试，并且可以正常工作。

当我尝试警告数组的随机部分时，它对我大喊：“未捕获的类型错误：无法读取未定义的属性 '0'”

```
<html>
<head>
    <script type = "text/javascript">
        var sounds = [[],[],[]];

        function makeName(x){
            alert(x[0][random(x[0].length)] + x[1][random(x[1].length)] + x[2][random(x[2].length)]); //Something is wrong here
        }

        function random(x){ //Random number between 0 and x-1
            return Math.floor(Math.random()*x); //The problem might be here too
        }

        var Count0 = 0;
        var Count1 = 0;
        var Count2 = 0;

        function add(type, fooNum) {

            //Create an input type
            var element = document.createElement("input");

            //Add to index of user supplied data
            if(fooNum == 1){
                Count0++;
                element.setAttribute("id","0:" + Count0);
            }else if(fooNum == 2){
                Count1++;
                element.setAttribute("id","1:" + Count1);
            }else if(fooNum == 3){
                Count2++;
                element.setAttribute("id","2:" + Count2);
            }else{
                alert("Somethin' went wrong, man!");
            }

            console.log(element.id);

            //Assign different attributes to the element.
            element.setAttribute("type", type);
            element.setAttribute("value", "");
            var foo = document.getElementById("fooBar"+fooNum);

            //Append the element in page (in <span>).
            foo.appendChild(element);

        }

        function generate(){ //Assign the inputs to a 2D array
            var counts = [Count0, Count1, Count2];
            hello=counts;
            for(k=0; k<=2; k++){
                for(i=0; i<=counts[k]; i++){
                        sounds[k][i] = document.getElementById(k + ":" + i).value;
                        alert(sounds[k][i]);
                }
                i = 0;
            }
        }

    </script>
</head>
<body>
    <FORM>

        <INPUT type="button" value="Add" onclick="add(document.forms[0].element.value, 1)"/><INPUT type="text" name="element" id="0:0"/><span id="fooBar1">&nbsp;</span><P>
        <INPUT type="button" value="Add" onclick="add(document.forms[0].element.value, 2)"/><INPUT type="text" name="element" id="1:0"/><span id="fooBar2">&nbsp;</span><P>
        <INPUT type="button" value="Add" onclick="add(document.forms[0].element.value, 3)"/><INPUT type="text" name="element" id="2:0"/><span id="fooBar3">&nbsp;</span><P>

        <INPUT type="button" value="Generate" onclick="generate()"/><P>
        <INPUT type="button" value="Make Name" onclick="makeName()"/><P>
    </FORM>
</body> 
```

我的猜测是问题出在 random() 或 makeName() 中。

请帮忙！先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T01:50:19.123

您的`makeName`函数需要参数`x`：

```
 function makeName(x) { 
```

但你这样称呼它：

```
<INPUT type="button" value="Make Name" onclick="makeName()"/> 
```

这就是为什么`x`在`makeName`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T01:51:26.453

在您的 html 中，您调用了`makeName`没有任何参数的函数

```
<INPUT type="button" value="Make Name" onclick="makeName()"/><P> 
```

但是你的函数需要一个参数

```
function makeName(x){
    alert(x[0][random(x[0].length)] + x[1][random(x[1].length)] + x[2][random(x[2].length)]);
} 
```

所以在你的函数`x`中是未定义的。`makeName`

# google-maps-api-3 - 将 Google Maps v3 中的标记放在所有其他标记的前面

> ID：11068332
> 
> 赞同：11
> 
> 时间：2012-06-17T01:44:37.077
> 
> 标签：google-maps-api-3, google-maps-markers

有人可以帮我把当前位置放在所有其他人的前面吗？我已经阅读了有关 MAX_ZINDEX 和 setZindex() 的信息，但我无法理解。这是我的代码：

```
var latlng = new google.maps.LatLng(lat,lng);
var image = "";
var currentplace = "Ohla Hotel";
var zInd = "";
if( name == currentplace ) {
    image = "../img/hotel_icon.png";
}
else {
    image = "../img/home_icon.png";
}
//alert();
var maxZindex = google.maps.Marker.MAX_ZINDEX;
if( name == currentplace ) {
    zInd = (maxZindex + 1);
}
var locationDescription = this.locationDescription;
var marker = new google.maps.Marker({
    map: map,
    position: latlng,
    title:'pk:'+name,
    MAX_ZINDEX: zInd,
    icon: image
});
bounds.extend(latlng);
setMarker(map, marker, name, locationDescription); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-17T23:20:28.787

`MAX_ZINDEX`是一个常数，而不是标记的属性。

相关的 MarkerOption 是`zIndex`：

```
var marker = new google.maps.Marker({
    map: map,
    position: latlng,
    title:'pk:'+name,
    zIndex: zInd,
    icon: image
}); 
```

这会将标记的`zIndex`属性设置为您计算的值，该值比 API 的最大值大一。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-17T23:19:50.427

您的大部分代码都有意义，但您对`MarkerOptions`[^(api-doc)](https://developers.google.com/maps/documentation/javascript/reference#MarkerOptions)对象的定义没有意义。尝试将您的标记创建代码更改为：

```
var marker = new google.maps.Marker({
    map: map,
    position: latlng,
    title:'pk:'+name,
    zIndex: zInd,
    icon: image
}); 
```

由于您已经设置了`zInd`高于的值`google.maps.Marker.MAX_ZINDEX`，因此进行此更改应该将标记放在 zIndex 中更高的位置，从而位于地图上其他标记的上方。

# java - 从数据库和动态选定项中检索到的 Android Spinner 值

> ID：11068334
> 
> 赞同：1
> 
> 时间：2012-06-17T01:45:03.523
> 
> 标签：java, android, sqlite, android-spinner

大家好，我需要你的帮助。我目前遇到有关 Android 微调器的问题。好吧，我有两个微调器，一个用于源语言，另一个用于目标语言。这两个微调器值包含从数据库中检索到的语言列表。例如在数据库中，我有语言列表：language_code(en,kr,jp,chinese), description (English,Korean,Japanese,Chinese)。第一个微调器将包含所有语言描述，而第二个将包含除第一个微调器中所选语言之外的所有语言描述。如果第一个微调器中的选定项目是英语，那么第二个微调器中的值必须是其余的，不包括英语。我想要的是用户可以随时更改语言，因此当微调器值更改时，用户必须单击一个按钮来触发更改，然后使用意图传递给同一类但具有不同的微调器值。我想要的是源和目标的微调器选择项来自先前的选择。

我已经完成了微调器，但我对动态变化有所了解。任何想法？

谢谢

# c# - 使用复合 c1 创建详细的用户配置文件

> ID：11068338
> 
> 赞同：1
> 
> 时间：2012-06-17T01:45:54.203
> 
> 标签：c#, c1-cms

如何使用复合 c1 创建详细的用户配置文件？在配置文件中将包括：

*   用户名、年龄、喜欢的文章、投票数、写的文章
*   真实姓名、用户评论等

这可以在复合 c1 中做到吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-15T12:13:22.303

C1 在复合数据存储中保存用户名和用户组：

~\App_Data\Composite\DataStores\Composite.Data.Types.IUser_Published.xml

C1 的开发继续以极快的速度进行，因此不建议更改 C1 的任何核心工作，因为未来升级的可能性可能会覆盖您的更改或至少使升级变得困难。

我通过创建一个名为“MyData.Users”的新全局数据类型来解决详细的用户配置文件要求，其中包含用户的名字和姓氏以及更多不同的配置文件详细信息。我确保我的新*用户*数据类型具有唯一标识符 GUID 字段，以记录来自 Composite.Data.Types.IUser_Published.xml 存储的 IUser unqiue id 的 GUID。

使用 C1 文档中推荐的命名约定在 C1 的控制台/仪表板中创建自己的单独数据类型，确保您可以轻松识别自己的数据存储，而且这些数据存储在 C1 中随处可用，以便您可以轻松附加功能等进行设置；获取; 您的自定义数据。

通过以下方式调用 C1 内置类 UserValidationFacade： **var userName = UserValidationFacade.GetUsername();** 在您的代码隐藏中，您可以识别当前登录用户的用户名和 GUID。

然后从 MyData.Users 数据类型中与用户名/GUID 匹配的正确行中提取配置文件数据，以在您的网站中以您喜欢的任何方式显示。;)

C1 自己的论坛也有很多很棒的答案，很多人互相帮助： [http ://compositec1.codeplex.com/discussions](http://compositec1.codeplex.com/discussions)

我已经使用这种方法创建了一个复杂的配置文件，您可以自由注册，然后在这个[MyRentals 网站上查看](http://myrentals-tenerife.com)

# java - 读取实例时出错

> ID：11068342
> 
> 赞同：0
> 
> 时间：2012-06-17T01:46:28.227
> 
> 标签：java

我一直在研究这种 ATM（最多有 50 个客户），我在其中读取一个 .txt 文件，然后创建多个实例，将它们存储在一个数组中，以便其他类可以调用它们。当我阅读文件时，只有最后一个客户的信息输入正确——我永远无法让前几个客户的输出正确。

每个“Set”都有多种方法，以防万一该字段显示“none”，以便我可以将其保留为

```
 Double.NaN or null, for example. 
```

我在几个网站上进行了研究，关于将实例存储在数组中的内容并不多，尽管在一个网站上，它说我应该像普通数组一样声明它。

```
 private static String firstname = "";
  private static String lastname = "";
  private static int sin = 0;
  private static int year = 0;
  private static int month = 0;
  private static int day = 0;
  private static double sbalance = 0.0;
  private static double cbalance = 0.0;
  private static double cardbal = 0.0;
  private static boolean confirm = false;

  public int customernumber;
  public static customer [] customerarray = new customer [50];

  public static void readfile(){
     String sb = "";
     String cb = "";
     String ca = "";

     int counter = 0;
     String thisLine;

     try {
        BufferedReader br = new BufferedReader(new FileReader("bankinfo.txt"));
        while ((thisLine = br.readLine()) != null) {
           customerarray[counter].setLastName(thisLine);
           System.out.print (customerarray[counter].getLastName());
           customerarray[counter].setFirstName(br.readLine());
           System.out.print (customerarray[counter].getFirstName());
           customerarray[counter].setSin(Integer.parseInt(br.readLine()));
           System.out.print (customerarray[counter].getSin());
           customerarray[counter].setYear(Integer.parseInt(br.readLine()));
           System.out.print (customerarray[counter].getYear());
           customerarray[counter].setMonth(Integer.parseInt(br.readLine()));
           System.out.print (customerarray[counter].getMonth());
           customerarray[counter].setDay(Integer.parseInt(br.readLine()));
           System.out.print (customerarray[counter].getDay());
           sb = br.readLine();
           if (sb.equals("none")){
              customerarray[counter].setSBalance("none") ;
              System.out.print (customerarray[counter].getSBalance());
           }
           else {
              customerarray[counter].setSBalance(Double.parseDouble(sb));
              System.out.print (customerarray[counter].getSBalance());
           }
           cb = br.readLine();

           if (cb.equals ("none")){
              customerarray[counter].setCBalance ("none");
           }
           else if (cb != "none"){
              customerarray[counter].setCBalance(Double.parseDouble(cb));
           }
           else{
              System.out.print ("error CBalance");
           }

           ca = br.readLine();
           if (ca.equals("none")){
              customerarray[counter].setSBalance("none") ;
           }
           else {
              customerarray[counter].setCardbal(Double.parseDouble(ca));
           }

           counter = counter + 1;

        }  
        br.close();
     }

        catch (IOException e) {
           System.err.println("Error: " + e);
        }

  } 
```

文本文件相当简单——它由每个客户的 9 个字段组成。如果他们没有某个帐户，则列为'none'，当读者阅读它们时，它使用带有String输入的变体方法，并设置double = Double.NaN();

以下是文本文件的示例。每个客户有 9 个字段。

```
Tam
Christian
984635684
1996
6
12
none
10233.52
none
Yang
Wesley
324917400
1996
8
1
3233.36
none
none
Lin
Sophia
1984
1985
5
6
912.12
58.96
95.63 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T01:54:10.143

我看不到您在哪里`customer[]`用实际`customer`对象实例化每个单独的位置。

`while`在循环开始之后添加此行：

```
customerarray[counter] = new customer(); 
```

创建对象数组时，其中的所有元素默认为空。你不能取消引用 null，所以你遇到了问题。

# jquery - jquery - 使用 tablesorter 时，datepicker 停止工作

> ID：11068344
> 
> 赞同：0
> 
> 时间：2012-06-17T01:46:49.917
> 
> 标签：jquery, datepicker, tablesorter

我需要在同一页面上使用 datepicker 和 tablesorter 的帮助。如果页面上有一个或另一个，我可以让这个 jquery 函数工作，但不能同时工作。下面是我的代码。任何帮助表示赞赏。

删除 tablesorter 的 javascript 时，datepicker 工作。添加回 tablesort 的代码时，datepicker 不起作用。

```
Code for TableSorter
<script type="text/javascript">  
$(document).ready(
function() 
{     
$("table")
.tablesorter(
{         
        // pass the headers argument and assing a object         
        headers: {             
            // assign the third column (we start counting zero)
            6: {                 
                // disable it by setting the property sorter to false
                  sorter: false             
               }
        }  
     });
 }); 
```

日期选择器代码：
$(function(){

```
 // Datepicker
    $('.datepicker').datepicker({
            inline: true
    }); 
```

});

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T01:57:01.390

每当在 DOM 中替换 html 时，绑定到它的事件都会丢失（深度克隆除外）。这意味着所有日期选择器事件都消失了。

排序结束时，插件 API 会触发自定义事件。

```
$('table').on("sortEnd",function() { 
    $('.datepicker').datepicker({
        inline: true
    });

}); 
```

# java - 011010 PS1 模拟器的操作码

> ID：11068349
> 
> 赞同：3
> 
> 时间：2012-06-17T01:49:12.427
> 
> 标签：java, emulation, opcode, playstation

我正在尝试制作一个 ps1 模拟器。我浏览了许多网站，寻找播放站使用的 r3000a 处理器的操作码。但是，当我从我的 ps1 bios 运行操作码时，我会得到多个以“011010”为前缀的操作码，这在任何文档中都没有。我在任何地方都找不到这条指令是什么，它是我的模拟器唯一无法识别的指令。

以下是我正在使用的一些网站：
[http :](http://www.mrc.uidaho.edu/mrc/people/jff/digital/MIPSir.html)
[//www.mrc.uidaho.edu/mrc/people/jff/digital/MIPSir.html http://hitmen.c02.at/files/docs/psx/psx.pdf](http://hitmen.c02.at/files/docs/psx/psx.pdf)

谢谢你的帮助！

# java - CompareTo 覆盖排序

> ID：11068350
> 
> 赞同：0
> 
> 时间：2012-06-17T01:49:17.463
> 
> 标签：java, compareto

我在覆盖 compareTo 方法时遇到问题。该程序模拟了不同的员工类型，我完美地按员工类型排序，但不能让它按总工资进行二次排序。一旦它按类名/员工类型排序，它就需要按 GrossPay 排序，我可以通过辅助方法获得它。下面是代码：

```
 public int compareTo(Object o) {

    Employee other = (Employee) o;

    if(other instanceof Salaried)
        return -1;

    else if(other instanceof Daily)
         return 1; 

    else
        return 0;
} 
```

我正在将 Collection.sort() 与雇员的数组列表一起使用。当我打印出来时，我会得到一个按员工类型排序的很好的列表，但它应该按 GrossPay 排序。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-17T02:13:36.880

`compareTo` *必须*返回与总订单一致的结果。否则无法以任何方式保证排序结果。全序意味着 if `A<B`, then`B>A`和 if `A==B`, then `B==A`。换句话说，你可以切换`this`并且`other`和结果是一致的。即使对于员工类型，您提供的代码也不会这样做。

如果`compareTo`与总顺序不一致，`sort`可能会产生错误的答案或永远不会终止。

目前尚不清楚您的系统是否有 3 种类型的员工或 2 种类型的员工。让我们假设它是 2：受薪和每日。然后我们需要解决以下可能性：

```
this     other    result
------------------------
salaried salaried equal
daily    salaried <
salaried daily    >
daily    daily    equal 
```

只有在我们确定 this 和 other 在员工类型上相等之后，我们才采用辅助排序键，即总工资。

所以编码的一种方法是：

```
// Assume this and o have type Daily or Salaried.
public int compareTo(Object o) {
  if (this instanceof Daily && o instanceof Salaried) return -1;
  if (this instanceof Salaried && o instanceof Daily) return +1;
  // The employee types must be equal, so make decision on pay.
  Employee e = (Employee)o;
  return grossPay() < e.grossPay() ? -1 :
         grossPay() > e.grossPay() ? +1 : 0;
} 
```

我假设这是在`Employee`.

最后，使用`Comparator`. 该`compareTo`方法应保留用于“自然”排序顺序，例如用作主键的唯一 ID 号的数字顺序。这种排序标准似乎不是“自然的”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-17T02:00:13.290

您可以在比较类型之后比较 GrossPay。假设`grossPay`是一个数字。

```
public int compareTo(Object o) {

    Employee other = (Employee) o;
    if(this instanceof Daily && other instanceof Salaried)
        return -1;

    else if(this instanceof Salaried && other instanceof Daily)
        return 1; 

    else
        return this.getGrossPay() - other.getGrossPay();
} 
```

# android - Android - 在移植的 BB Playbook 应用程序中显示广告？

> ID：11068351
> 
> 赞同：1
> 
> 时间：2012-06-17T01:50:04.893
> 
> 标签：android, blackberry-playbook

我想将我的 Android 应用程序移植到 BB PB，但后来我注意到我的 AdMob 广告都没有显示。所以我认为这可能是因为大多数 AdMob 广告都引用了 Playstore 上的 Android 应用程序。因此这些无法显示，因为 PB 没有 Play 商店。我的问题：如何在我的 Android-PB 应用中展示广告？是否有针对 AdMob 广告的解决方案，或者我应该使用其他服务吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T02:56:25.543

您目前无法在 Playbook 中显示任何 Admob 广告，目前的解决方法是我使用它来使用 Google 移动 AdSense 并将其显示在 webview 或 alertdialog 中，效果很好，但这不是一个好习惯

你的日志显示了 `01-22 18:24:37.290: I/Ads(29835418): onFailedToReceiveAd(Ad request successful, but no ad returned due to lack of ad inventory.)`吗？

也检查这个链接[http://supportforums.blackberry.com/t5/Android-Runtime-Development/No-Admob-in-Android-app/td-p/1373097](http://supportforums.blackberry.com/t5/Android-Runtime-Development/No-Admob-in-Android-app/td-p/1373097)

# flash - 如何让它与类而不是嵌入图像一起使用？

> ID：11068357
> 
> 赞同：0
> 
> 时间：2012-06-17T01:50:56.313
> 
> 标签：flash, apache-flex, flixel

我正在尝试创建一个游戏，在其中单击对象后，对象会发光。当我嵌入图像并通过位图传递它时，它可以正常工作，如下所示：

```
 package  
    {
    import org.flixel.*;    

    public class HelloWorld extends FlxState

{

    [Embed(source = "pics/Cancer.png")] private var cancerIMG:Class;
    private var cancer:FlxSprite; 

    private var title_text:FlxText;     

    public function HelloWorld() 
    {
    }       

    override public function create():void
    {           

        /**
         * Glow method test
         */  
        //Start Test
        var bigbitmap:BitmapData = new BitmapData(320, 288, true, 0x00000000);
        bigbitmap.copyPixels(Bitmap(new cancerIMG).bitmapData, new Rectangle(0, 0, 160, 288), new Point(16, 16), null, null, true);

        cancer = new FlxSprite;
        cancer.pixels = bigbitmap;

        add(cancer);        
        //End Test

    }

    override public function update():void
    {

        super.update();          
    }       

}   
} 
```

但是，每当我尝试使用相同的方法传递类精灵时，如下所示：

```
 _bx = new box(120, 120);            

        var bigbitmap:BitmapData = new BitmapData(320, 288, true, 0x00000000);
        bigbitmap.copyPixels(Bitmap(_bx.pixels).bitmapData, new Rectangle(0, 0, 160, 288), new Point(16, 16), null, null, true);

        _bx.pixels = bigbitmap;         
        add(_bx); 
```

我这样称呼这个盒子：

```
 public var _bx:box; 
```

其中，它本身就是一个 FlxExtendedSprite（尽管为了测试将其恢复为常规 FlxSprite）。当我尝试这样做时，我收到以下错误：

错误 #1034：类型强制失败：无法将 flash.display::BitmapData@3960701 转换为 flash.display.Bitmap。

有没有办法可以修复这种效果并让它与这样的类一起使用？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T08:37:05.783

_bx.pixels 是一个 BitmapData，所以我认为它就这么简单。至少在我的测试设置中工作。

```
bigbitmap.copyPixels(_bx.pixels, new Rectangle(0, 0, 160, 288), new Point(16, 16), null, null, true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T09:32:34.817

**[真的没那么难找。。](http://help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WS5b3ccc516d4fbf351e63e3d118a9b90204-7da8.html)**

```
//This goes in the package, at the top of your .as
import flash.filters.GlowFilter;

//This goes in your class
var myFilter:GlowFilter = new GlowFilter(0xffffff, 1, 1.5, 1.5, 30, 4); //(color, alpha, blurX, blurY, strength, quality);

//This goes wherever you want to apply this method
myMC.filters = [myFilter]; 
```

# php - 我如何处理这个 ajax 数据？

> ID：11068364
> 
> 赞同：0
> 
> 时间：2012-06-17T01:52:10.707
> 
> 标签：php, javascript, jquery, html, ajax

我将如何在 php.ini 中处理这个 Ajax。我想要做的是将数据发送到 process.php，如果 mode=loadlinks 它将执行 mysql 查询

```
function PresentLinks(div_id){

        $("#loading-status").fadeIn(900,0);
        $("#loading-status").html("<img src='img/bigLoader.gif' />");           

$.ajax({

            type: "POST",
            url: "process.php",
            data: "mode=loadlinks",

            success: function(msg){

                $("#loading-status").fadeOut(900,0);
                $("#"+div_id).html(msg);

            }

        });} 
```

我要处理的是

```
if($_POST['mode'] == loadlinks){  // this is what i want to ask
$query = "SELECT * FROM site ORDER BY link_id DESC";
$result = MYSQL_QUERY($query) or die (mysql_error());
while($data = mysql_fetch_row($result)){
echo ("$data[1]");
}}
else {
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T02:02:21.903

您需要在 PHP 中引用字符串。否则，它们将被假定为常数。您还应该使用[PDO](http://php.net/pdo)。

```
if($_POST['mode'] == 'loadlinks'){
    $pdo = new PDO('mysql:host=HOST;dbname=DATABASE'), 'username', 'password');
    $stmt = $pdo->execute('SELECT * FROM site ORDER BY link_id DESC');

    $sites = $stmt->fetchAll();
    foreach($sites as $site) {
        echo "<div>" . $site['name'] . "</div>"; // Or whatever info you want to output
    }
} 
```

为了提高性能，您应该指定要检索的表列名称，而不是使用`*`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T02:01:00.797

你需要引用字符串值

```
 if($_POST['mode'] == 'loadlinks'){..... 
```

# scala - StringOps 和 WrappedString 实例之间的相等性

> ID：11068367
> 
> 赞同：4
> 
> 时间：2012-06-17T01:52:41.203
> 
> 标签：scala

我只是在学习 Scala，所以如果已经讨论过这个问题，我深表歉意，但以下内容对我来说似乎有点奇怪：

```
scala> import scala.collection.immutable._
import scala.collection.immutable._

scala> val st1 = new WrappedString("Hello")
st1: scala.collection.immutable.WrappedString = Hello

scala> val st2 = new StringOps("Hello")
st2: scala.collection.immutable.StringOps = Hello

scala> st2 == st1
res0: Boolean = true

scala> st1 == st2
res1: Boolean = false 
```

谁能解释一下？我正在使用 Scala 版本 2.10.0-M4。我没有用其他任何版本尝试过这个。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-17T10:11:46.610

出现差异的原因记录在 ScalaDoc 中。

包裹字符串：

> 此类 和 之间的区别在于`StringOps`调用转换器方法（例如`filter`和）`map`将产生一个类型的对象`WrappedString`而不是`String`.

字符串操作：

> 此类 和 之间的区别在于`WrappedString`调用转换器方法（例如`filter`和）`map`将产生一个`String` 对象，而 a`WrappedString`将保持为 a `WrappedString`。

两者都派生自`collection.GenSeqLike`which 定义了一个 equals 方法：

```
override def equals(that: Any): Boolean = that match {
  case that: GenSeq[_] => (that canEqual this) && (this sameElements that)
  case _ => false
} 
```

两者都实现了`canEqual`（派生自`collection.IterableLike`），它[总是返回 true](https://github.com/scala/scala/blob/v2.10.0-M4/src/library/scala/collection/IterableLike.scala#L292)。但`StringOps`不是`collection.GenIterable`：

```
scala> st1 sameElements st2
<console>:13: error: type mismatch;
 found   : scala.collection.immutable.StringOps
 required: scala.collection.GenIterable[?]
              st1 sameElements st2
                               ^ 
```

鉴于`WrappedString`：

```
scala> st2 sameElements st1
res13: Boolean = true 
```

所以很明显为什么第一种情况会返回`true`，而另一种情况会返回`false`。

但为什么两者都存在？我不完全确定为什么要这样设计，但我认为这是因为 String 不是 Scala 中的集合。当我们对一个字符串进行一些操作时，`"abc" flatMap (_+"z")`我们想要取回另一个字符串，即使它并不总是可能的，如`"abc" map (_+1)`. 这就是这样`StringOps`做的。但是当我们有一些方法时，我们应该`def x[A](s: Seq[A]) = s.getClass`如何用一个字符串来调用它呢？在这种情况下，我们需要`WrappedString`：

```
scala> x("a")
res9: Class[_ <: Seq[Char]] = class scala.collection.immutable.WrappedString 
```

所以，`StringOps`更轻量级`WrappedString`。它允许我们在简单的旧方法上调用一些方法，`java.lang.String`而不会产生太多开销。在 2.10中`StringOps`扩展`AnyVal`。这意味着它是一个值类，它的存在可以通过 scalac 进行优化（通过包装字符串不再有运行时开销）。相比之下`WrappedString`，我们可以将 String 作为真正的集合处理 - 作为`IndexedSeq[Char]`.

# php - 上传成功后使用文件 url 更新数据库

> ID：11068368
> 
> 赞同：0
> 
> 时间：2012-06-17T01:53:05.860
> 
> 标签：php, mysql

我已经尝试了本节中的所有内容，并且我知道这是我忘记的东西。无论我添加什么都会停止上传，但目前正在努力在服务器上获取图像。

```
 protected function handle_file_upload($uploaded_file, $name, $size, $type, $error, $index) {
    $file = new stdClass();
    $file->name = $this->trim_file_name($name, $type, $index);
    $file->size = intval($size);
    $file->type = $type;
    if ($this->validate($uploaded_file, $file, $error, $index)) {
        $this->handle_form_data($file, $index);
        $file_path = $this->options['upload_dir'].$file->name;
        $append_file = !$this->options['discard_aborted_uploads'] &&
            is_file($file_path) && $file->size > filesize($file_path);
        clearstatcache();
        if ($uploaded_file && is_uploaded_file($uploaded_file)) {
            // multipart/formdata uploads (POST method uploads)
            if ($append_file) {
                file_put_contents(
                    $file_path,
                    fopen($uploaded_file, 'r'),
                    FILE_APPEND
                );              

            } else {
                move_uploaded_file($uploaded_file, $file_path);
            }
        } else {
            // Non-multipart uploads (PUT method support)
            file_put_contents(
                $file_path,
                fopen('php://input', 'r'),
                $append_file ? FILE_APPEND : 0
            );

        }
        $file_size = filesize($file_path);
        if ($file_size === $file->size) {
            if ($this->options['orient_image']) {
                $this->orient_image($file_path);
            }
            $file->url = $this->options['upload_url'].rawurlencode($file->name);
            foreach($this->options['image_versions'] as $version => $options) {
                if ($this->create_scaled_image($file->name, $options)) {
                    if ($this->options['upload_dir'] !== $options['upload_dir']) {
                        $file->{$version.'_url'} = $options['upload_url']
                            .rawurlencode($file->name);
                    } else {
                        clearstatcache();
                        $file_size = filesize($file_path);
                    }
                }
            }
        } else if ($this->options['discard_aborted_uploads']) {
            unlink($file_path);
            $file->error = 'abort';
        }
        $file->size = $file_size;
        $this->set_file_delete_url($file);
    }
    return $file;

} 
```

在它上传它连接到数据库并将文件 url 发布到我需要的字段后，我将如何做到这一点。

我一直在上面插入它，它只是导致它不起作用：

```
$con = mysql_connect("localhost","----","----");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }

mysql_select_db("----", $con);

 mysql_query("INSERT INTO posts (postid, post_content)
VALUES ('', 'test_upload_file_name')");

mysql_close($con);

header("Location: http://-----.com/index.php"); 
```

提前谢谢。

# regex - 正则表达式删除所有非键盘字符

> ID：11068370
> 
> 赞同：3
> 
> 时间：2012-06-17T01:53:33.690
> 
> 标签：regex, perl, latex

我已阅读[Remove Non-Alphanumeric Characters from a String](http://mundeep.wordpress.com/2008/03/07/remove-non-alphanumeric-characters-from-a-string/)并且不相信它可以解决我的问题。

我有一个包含单个正则表达式的 Perl 脚本。这旨在用空格替换文本文件中的每个非键盘字符。

```
#!/opt/local/bin/perl
#   Delete any character (replace it with a space) that is not a visible keyboard
#   character.
if($#ARGV!=0) {
        print "usage: pass a *single* filename as argument. Filename is a text file ...\n";
        exit;
}
$infile=$ARGV[0];
#print "\$infile is $infile\n";
open(SOMEFILE, $infile)||die("can't open $infile for reading");
while(<SOMEFILE>) {
    $oldStr = $_;
    $newStr=$oldStr;
    $newStr=~s/[^\w\s`~!@#\$\%^&*()-_=+[\]{}\\|;:'",<.>\/?àèìòùáéíóúäëïöüâêîôûÿøÀÈÌÒÙÁÉÍÓÚÄËÏÖÜÂÊÎÔÛŸØçÇß¿“”‘’æÆ£¢]/ /g;
    print "$newStr";
}
close SOMEFILE;
exit; 
```

这应该删除*所有*有趣的隐形字符。但它似乎不起作用。示例文件：

```
$ hex 1bad
0000  43 61 74 68 65 72 69 6e  65 c2 a0 0a              Catherin e... 
```

该文件`1bad`包含从电子邮件复制和粘贴的文本。此文本在插入 LaTeX 文件中的“逐字”环境时，会返回错误。

为什么这个正则表达式不起作用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T15:03:25.070

您的过滤器可以更简单地编写：

```
perl -C -Mutf8 -lpe's/[^\w\s`~!@#\$\%^&*()-_=+[\]{}\\|;:\x{27}",<.>\/?àèìòùáéíóúäëïöüâêîôûÿøÀÈÌÒÙÁÉÍÓÚÄËÏÖÜÂÊÎÔÛŸØçÇß¿“”‘’æÆ£¢]/ /g' 1bad 
```

它按设计工作，`"\N{NO-BREAK SPACE}"`示例文件中单词末尾的字符匹配`\s`，因此*不会*被替换。您需要将该字符类分开以更具体。在 Perl 5.16 中，`\s`匹配以下字符：

```
U+0009 CHARACTER TABULATION
U+000A LINE FEED
U+000C FORM FEED
U+000D CARRIAGE RETURN
U+0020 SPACE
U+0085 NEXT LINE
U+00A0 NO-BREAK SPACE
U+1680 OGHAM SPACE MARK
U+180E MONGOLIAN VOWEL SEPARATOR
U+2000 EN QUAD
U+2001 EM QUAD
U+2002 EN SPACE
U+2003 EM SPACE
U+2004 THREE-PER-EM SPACE
U+2005 FOUR-PER-EM SPACE
U+2006 SIX-PER-EM SPACE
U+2007 FIGURE SPACE
U+2008 PUNCTUATION SPACE
U+2009 THIN SPACE
U+200A HAIR SPACE
U+2028 LINE SEPARATOR
U+2029 PARAGRAPH SEPARATOR
U+202F NARROW NO-BREAK SPACE
U+205F MEDIUM MATHEMATICAL SPACE
U+3000 IDEOGRAPHIC SPACE 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T01:58:08.907

我假设您的意思是删除任何标点符号对吗？如果是这样尝试：

```
$string =~ s/[[:punct:]]//g; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-01T16:25:54.187

我通过使其成为 LaTeX 问题而不是 perl 正则表达式问题来“解决”了这个问题。

我放弃了 pdflatex 并改用 xelatex 。前者跑得更快，但会“窒息”不熟悉的角色，甚至是看不见的角色。后者运行速度较慢，但​​似乎不介意任何角色。它根本不会渲染它不知道如何处理的字符。例如，我当前的 LaTeX 代码可以很好地呈现多调希腊语（现在写古希腊作者的字符），但它为任何中文字符留下了空白。

# java - 读取服务器上的文件

> ID：11068377
> 
> 赞同：0
> 
> 时间：2012-06-17T01:54:44.533
> 
> 标签：java, applet, file-permissions

我有一个小程序，它部分设计为（仅）读取文本文件并基于它制作东西。在我的小程序中，这就是我所拥有的读取文件的“读取”方法：

```
public void read (String file1) throws IOException
{
    str.removeAllElements (); // str is a global vector
    BufferedReader dia = new BufferedReader (new FileReader (file1));

    for (;;)
    {
        strc = dia.readLine ();
        if (strc == null)
            break;
        str.add (strc);
    }
} 
```

当我通过 JVM 运行它时，这可以正常工作，但是当我将它联机时，即使它们托管在同一服务器和文件夹上，我想要访问的文件也无法访问。

我的小程序的 HTML 如下所示：

```
<applet
codebase = "[the url that hosts my class and text files]"
code = "[my class file].class"
width = ###
height = ###>
</applet> 
```

我得到的具体错误是：

```
AccessControlException
access denied ("java.io.FilePermission" "dial1.txt" "read") 
```

因此，如果有人可以提供帮助，那就太棒了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T06:04:54.050

我怀疑这里真正的问题是使用`java.io.File`. 暂时将服务器/客户端放在一边，沙盒小程序根本无法建立`File`- 。但是为了稍微扩展一下，一个受信任的小程序可以建立一个`File`- 但只能是一个指向***客户端机器本地驱动器上的文件的小程序。*** A`File`永远**不能**指向服务器，它们只是不那样工作。

所以导致。小程序访问资源的正确方法是通过`URL`. Java 大量使用 URL，甚至用于访问 Jars 中的类。

沙盒小程序**可以**建立一个 URL 指向部署它的服务器。

至于如何形成该 URL。URL 可以相对于[代码库](http://docs.oracle.com/javase/7/docs/api/java/applet/Applet.html#getCodeBase%28%29)（Jars/类的位置）或[文档库](http://docs.oracle.com/javase/7/docs/api/java/applet/Applet.html#getDocumentBase%28%29)（HTML 的位置）形成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T02:29:13.760

小程序在 Web 浏览器中运行。因此，在下载您的小程序的用户的计算机上。因此，即使您要查找的文件存在于用户的计算机上，您也无法阅读它们，因为您没有文件系统访问互联网用户的权限。在服务器端读取本地文件。因此，在您的情况下，您可能需要一个 servlet 而不是 applet。

# php - Facebook 图形 API 发布到用户的墙上

> ID：11068380
> 
> 赞同：-1
> 
> 时间：2012-06-17T01:55:08.067
> 
> 标签：php, facebook, facebook-graph-api

我正在使用 FB graph api 将内容发布到用户的墙上。我最初尝试使用这种方法：

```
$wall_post = array(array('message' => 'predicted the',  'name' => 'predicted the'), 
                array('message' => $winning_team, 'name' => $winning_team, 'link' => 'http://www.sportannica.com/teams.php?team='.$winning_team.'&amp;year=2012'),
                array('message' => 'to beat the', 'name' => 'to beat the',),
                array('message' => $losing_team, 'name' => $losing_team, 'link' => 'http://www.sportannica.com/teams.php?team='.$losing_team.'&amp;year=2012'),
                array('message' => 'on '.$game_date.'', 'name' => 'on '.$game_date.''),
                array('picture' => 'http://www.sportannica.com/img/team_icons/current_season_logos/large/'.$winning_team.'.png'));

        $res = $facebook->api('/me/feed/', 'post', '$wall_post'); 
```

但是，令我惊讶的是，您不能将多个链接发布到用户墙。

所以，现在我正在使用图形 api 将内容发布到用户的墙上，就像 spotify 所做的那样。所以，现在我发现我需要使用打开的图形仪表板创建自定义操作和对象。因此，我创建了“预测”动作并授予它编辑对象“游戏”的权限。

所以，现在我有了代码：

```
$facebook = new Facebook(array(
    'appId' => 'appID',
    'secret' => 'SECRET',
    'cookie' => true
));

$access_token = $facebook->getAccessToken();
$user = $facebook->getUser();

if($user != 0) 
{
    curl -F 'access_token='$.access_token.'' \
     -F 'away_team=New York Yankees' \
     -F 'home_team=New York Mets' \
     -F 'match=http://samples.ogp.me/413385652011237' \
        'https://graph.facebook.com/me/predict-edit-add:predict'
} 
```

我不断收到错误阅读：

> 解析错误：语法错误，意外的 T_CONSTANT_ENCAPSED_STRING

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T09:14:38.640

PHP 不是 shell 脚本语言。你不能简单地输入一个 shell 命令并期望它工作。

您可以简单地使用[curl PHP 扩展](http://php.net/curl)或 Facebook API 中的适当函数，而不是尝试调用`curl`程序（例如，使用[`system()`](http://php.net/system)or来调用）。[`exec()`](http://php.net/exec)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T09:16:20.103

您混合 PHP 代码和执行`curl`命令，您应该从 shell 调用它：

```
curl -F 'access_token='$.access_token.'' \
 -F 'away_team=New York Yankees' \
 -F 'home_team=New York Mets' \
 -F 'match=http://samples.ogp.me/413385652011237' \
    'https://graph.facebook.com/me/predict-edit-add:predict' 
```

或者使用 PHP-SDK 实现相同的目的：

```
$facebook->api('/me/predict-edit-add:predict', 'post', array(
  'away_team'=>'New York Yankees',
  'home_team'=>'New York Mets',
  'match'=>'http://samples.ogp.me/413385652011237'
)); 
```

# ruby-on-rails - Rails 应用程序：链接到设计视图路由到主页。

> ID：11068381
> 
> 赞同：2
> 
> 时间：2012-06-17T01:55:36.000
> 
> 标签：ruby-on-rails, authentication, devise, authorization

我在我的应用程序中使用 Devise + CanCan + Rolify 作为授权和身份验证解决方案。

管理员正在我的应用程序中从他们的仪表板进行所有用户访问管理。所以我试图从我的“admin_dashboard.index.html”文件中访问所有的设计视图链接

我在这个应用程序中创建了一个用户控制器

这是 admin_dashboard_index.html.erb 文件

```
<table id="users_index_table" %>
  <tr>
 <th>id</th>
     <th>user name</th>
 <th>user email</th>
 <th>user role</th>
     <th>reset password</th> 
 <th></th> 
 <th></th> 
 <th></th>  

  </tr>
<% @users.each do |user| %>
  <tr>
 <td><%= user.name %></td>
 <td><%= user.email %></td>
     <td><%= user.roles  %></td>
 <th><%= link_to 'reset password', edit_user_password_path %></th> 
 <td><%= link_to  %></td>
     <td><%= link_to 'Show', user %></td>
     <td><%= link_to 'Edit', edit_user_path(user) %></td>
     <td><%= link_to 'Destroy', user, confirm: 'Are you sure?', method: :delete %></td>
  </tr>
 <% end %>
 </table>
 <%= link_to 'New User', new_user_registration_path %> 
```

现在的问题是当我点击这些“用户”链接时，除了“new_user_registration_path”之外的所有工作。当我单击它时，它会引导我进入应用程序的主页，并且 rails 服务器会显示以下跟踪：

```
 Started GET "/users/sign_up" for 127.0.0.1 at 2012-06-16 18:24:49 -0700
 Processing by Devise::RegistrationsController#new as HTML
 User Load (0.5ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 1 LIMIT 1
Redirected to http://localhost:3000/
Filter chain halted as :require_no_authentication rendered or redirected
Completed 302 Found in 2ms (ActiveRecord: 0.5ms) 
```

我怎样才能让新用户链接和“edit_user_password_path”工作并将我路由到适当的字段而不是主页。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T02:34:48.267

根据服务器输出，似乎有一个过滤器不允许您在已登录时创建新用户（：require_no_authentication）。在研究了设计的设置方式之后，他们的注册控制器上确实有一个前置过滤器，该过滤器需要未经身份验证的会话才能创建新的用户注册。

```
prepend_before_filter :require_no_authentication, :only => [ :new, :create, :cancel ] 
```

如果您的用户控制器是从 Devise::RegistrationsController 继承的，那么您可以完全跳过过滤器：

```
skip_before_filter :require_no_authentication, :only => [:new, :create] 
```

或者您可以编写自己的 :require_no_authentication 方法来检查登录用户是管理员还是普通用户。您可以将此方法放在用户控制器的底部：

```
protected

def require_no_authentication
    if current_user.is_admin?
        return true
    else
        return super
    end
end 
```

如果您的控制器不是从 Devise::RegistrationsController 继承的，那么您需要在设置路由时指定您的自定义控制器。

```
devise_for :users, :controllers => { :registration => "my/controller" } 
```

然后显然实现您自己的“新”方法。

我发现了一些与此问题相关的现有堆栈溢出问题：

[rails:3 设计注册过滤器链停止为 :require_no_authentication 呈现或重定向](https://stackoverflow.com/questions/9631432/rails3-devise-signup-filter-chain-halted-as-require-no-authentication-rendered)

[使用自定义注册控制器设置设备](https://stackoverflow.com/questions/7315012/setup-devise-with-custom-registration-controller)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-19T12:52:26.557

当我创建用户时，我覆盖了一个注册控制器，并注释了 sign_up 行，而其他用户已经登录

```
class RegistrationsController < Devise::RegistrationsController            
  skip_before_filter :require_no_authentication                            
  def create                                        

    build_resource

    if resource.save
      if resource.active_for_authentication?
        set_flash_message :notice, :signed_up if is_navigational_format?
        # sign_up(resource_name, resource)
        respond_with resource, :location => after_sign_up_path_for(resource)
      else
        set_flash_message :notice, :"signed_up_but_#{resource.inactive_message}" if is_navigational_format?
        expire_session_data_after_sign_in!
        respond_with resource, :location => after_inactive_sign_up_path_for(resource)
      end
    else
      clean_up_passwords resource
      respond_with resource
    end
  end
end 
```

并改变路线

```
devise_for :users, :controllers => { :registrations => "registrations" } 
```

# http - 当我们指定分块的http响应时，它是什么意思？

> ID：11068383
> 
> 赞同：0
> 
> 时间：2012-06-17T01:55:58.727
> 
> 标签：http

当我们指定响应如果分块时，这意味着什么？

http 响应中检查的确切含义是什么？

# python - 扭曲的文档字符串中这些格式的含义是什么？

> ID：11068385
> 
> 赞同：9
> 
> 时间：2012-06-17T01:56:34.907
> 
> 标签：python, format, twisted, docstring

在 twisted 的源代码中，许多文档字符串包含这样的格式：L{xxx} 或 C{xxx} 或以“@”开头的行，它们的含义是什么？

例如，在 twisted/internet/interfaces.py 中：

```
def registerProducer(producer, streaming):
    """
    Register to receive data from a producer.
    ...
    For L{IPullProducer} providers, C{resumeProducing} will be called once
    each time data is required.
    ...
    @type producer: L{IProducer} provider
    ...
    @return: C{None}
    """ 
```

**L{IPullProducer}、C{resumeProducing}、@type 生产者？**

顺便说一句，这些格式是标准 python 文档字符串格式的一部分吗？如果是这样，我应该参考哪里？谢谢 ：）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-17T08:09:09.480

Twisted 使用的文档格式是[Epytext，记录在`epydoc.sourceforge.net`](http://epydoc.sourceforge.net/manual-epytext.html).

`L{}`表示“链接”（即“这是一个 Python 标识符，请链接到它”）`C{}`表示“代码”（即`hello C{foo} bar`应该格式化为“hello `foo`bar”）。 `I{}`只是意味着“斜体”。您可以在 epytext 文档中看到更多字段。

[Twisted 项目使用pydoctor](https://launchpad.net/pydoctor)生成其文档，使用类似`pydoctor --add-package twisted`. 它还有更多内容，可以生成指向 Twisted 所依赖的其他几个项目的链接，但如果你想向 Twisted 贡献文档字符串，你可以使用它来获得一个想法。您也可以使用 epydoc 本身生成文档`epydoc twisted`，但是 epydoc 不了解 Zope 接口，因此不会自动将类链接到它们实现的接口。

[每个版本生成的 API 文档都发布在 twistedmatrix.com 上](http://twistedmatrix.com/documents/current/api/)，您可以在那里浏览。

# hibernate - 休眠多对一删除：org.hibernate.exception.ConstraintViolationException：无法执行 JDBC 批量更新

> ID：11068387
> 
> 赞同：0
> 
> 时间：2012-06-17T01:56:46.037
> 
> 标签：hibernate, jdbc, mapping

在执行此休眠多对一删除查询时，继续收到 ConstraintViolationException ...

这是程序...

[http://www.java4s.com/hibernate/hibernate-many-to-one-mapping-delete-query-example/](http://www.java4s.com/hibernate/hibernate-many-to-one-mapping-delete-query-example/)

不知道在哪里做错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T10:24:39.437

您尝试从这样的孩子级联删除到父母，其他孩子引用了父母。这当然会失败，正如您提供的链接后面所解释的那样：

> .. 如果该父对象没有其他子对象，则意味着如果父对象只有一个子对象，在这种情况下，如果我们删除子对象，父对象也会被删除，但在所有其他情况下，它都会抛出异常

# gcc - 编译器-RT CLANG LLVM

> ID：11068393
> 
> 赞同：4
> 
> 时间：2012-06-17T01:58:27.450
> 
> 标签：gcc, llvm, clang, llvm-gcc, llvm-clang

我有 GCC 4.1.2 并且喜欢使用这个 GCC 编译器版本来构建 CLANG / LLVM。我需要源到源翻译库，以便我可以根据某些要求修改现有的源代码。

最初我遇到了有关 usr/lib64/libstdc++.so.6 的问题：在 LLVM / CLANG 制作期间找不到版本“GLIBCXX_3.4.9”。所以在下载并构建 GCC 4.5.0 并安装在本地路径中。我发现 GCC 4.5.0 的 libstdc++.so.6 有 GLIBCXX_3.4.9 版本。由于我想使用 GCC 4.1.2 进行编译，因此我将动态库路径设置为：

```
setenv LD_LIBRARY_PATH /local/gcc-4.5.0/lib64:$LD_LIBRARY_PATH 
```

并在“make clean”之后再次说明make。现在该错误没有发生。

但是，我在编译“Compiler-RT”模块时遇到了问题。我不确定需要 Compiler-RT 模块的目的是什么，但 LLVM 和 CLANG 似乎编译得很好。

我是否可以从下载、构建和安装中排除 Compiler-RT：

```
svn co http://llvm.org/svn/llvm-project/llvm/trunk llvm
svn co http://llvm.org/svn/llvm-project/cfe/trunk clang 
```

仅构建 LLVM 和 Clang

将我的共享库路径设置为使用 GCC 4.5.0 的 libstdc++.so.6 是否正确，并且 Compiler-RT 是使用 CLANG / LLVM 下载和构建它的强制步骤

我在这里找到了这个[示例代码](http://eli.thegreenplace.net/2012/06/08/basic-source-to-source-transformation-with-clang/) - 我需要 Compiler-RT - 我没有看到相同的引用，但只是想确认一下？

# python - Beautifulsoup 在文件中找不到存在的 href

> ID：11068400
> 
> 赞同：0
> 
> 时间：2012-06-17T01:59:41.497
> 
> 标签：python, beautifulsoup

我有一个 html 文件，如下所示：

```
<form action="/2811457/follow?gsid=3_5bce9b871484d3af90c89f37" method="post">
<div>
<a href="/2811457/follow?page=2&amp;gsid=3_5bce9b871484d3af90c89f37">next_page</a>
&nbsp;<input name="mp" type="hidden" value="3" />
<input type="text" name="page" size="2" style='-wap-input-format: "*N"' />
<input type="submit" value="jump" />&nbsp;1/3
</div>
</form> 
```

如何从文件中提取“1/3”？

它是html的一部分，我打算说清楚。当我使用beautifulsoup时，

我是beautifulsoup的新手，我看过文档，但仍然很困惑。

如何从 html 文件中提取“1/3”？

```
total_urls_num = re.findall('\d+/\d+',response) 
```

工作代码：

```
from BeautifulSoup import BeautifulSoup
import re

with open("html.txt","r") as f:
    response = f.read()
    print response
    soup = BeautifulSoup(response)
    delete_urls = soup.findAll('a', href=re.compile('follow\?page'))   #works,should escape ?
    print delete_urls
    #total_urls_num = re.findall('\d+/\d+',response)   
    total_urls_num = soup.find('input',type='submit')   
    print total_urls_num 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T03:08:07.940

我认为问题在于您要搜索的文本不是某个标签的属性，而是在之后。您可以使用以下方式访问它`.next`：

```
In [144]: soup.find("input", type="submit")
Out[144]: <input type="submit" value="jump" />

In [145]: soup.find("input", type="submit").next
Out[145]: u'&nbsp;1/3\n' 
```

然后你可以从中得到 1/3，但是你喜欢：

```
In [146]: re.findall('\d+/\d+', _)
Out[146]: [u'1/3'] 
```

或者只是类似的东西：

```
In [153]: soup.findAll("input", type="submit", text=re.compile("\d+/\d+"))
Out[153]: [u'&nbsp;1/3\n'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T03:12:51.540

阅读这份[文件](http://www.crummy.com/software/BeautifulSoup/bs3/documentation.html)

不是

```
total_urls_num = soup.find('input',style='submit')   #can't work 
```

你应该使用`type`而不是`style`

```
>>>temp = soup.find('input',type='submit').next
'&nbsp;1/3\n'
>>>re.findall('\d+/\d+', temp)
[u'1/3']
>>>re.findall('\d+/\d+', temp).[0]
u'1/3' 
```

# javascript - 在 CakePHP 中使用 focus() 和 onload()

> ID：11068405
> 
> 赞同：2
> 
> 时间：2012-06-17T02:00:53.913
> 
> 标签：javascript, cakephp-1.3

有没有一种方法可以将焦点设置到 CakePHP 中的特定文本框。类似于我们在谷歌主页上的文本框。我们加载页面并开始输入。是否有可能在 Cake 中实现相同的功能。

cake 是否支持 javascript 的 onload 函数。我只需要它来查看我的视图，不想为此包含外部文件。我有一个用户定义的函数可以正常工作，但 onload 不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T02:08:32.523

您可以在任何网页或应用程序上使用 Javascript，因此使用 CakePHP 不受限制。Cake 与其他技术的区别之一是您的布局始终与您的视图一起加载，并且您通常会在其中导入所有脚本（您也可以在视图上导入脚本）。

那么，你可以在 Cake 上为你的页面使用 onload 函数，没有任何问题。在这种情况下，您可能希望在`<script>`标签内的视图中添加该功能

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T02:12:36.763

只需在您的 head 标签之间使用 javascript，如下所示

```
<script type="text/javascript">
    window.onload=function(){
        document.getElementsByName('txt1')[0].focus(); // txt1 is the name of textbox
    } ​ 
</script> 
```

**更新：**如果您只想将其用于特定页面，则可以将其保留在该视图中，在这种情况下，您只需将其粘贴到`HTML`代码之后，如下所示

```
<script type="text/javascript">
        document.getElementsByName('txt1')[0].focus(); // txt1 is the name of textbox
</script> 
```

# jquery - jQuery 一页滚动网站 - 动画深度链接

> ID：11068407
> 
> 赞同：2
> 
> 时间：2012-06-17T02:01:14.083
> 
> 标签：jquery, scroll, animated, deep-linking

我正在开发一个单页滚动网站（带有粘性标题），并希望添加动画深度链接。

您可以在此处查看演示：
[http ://www.creativecontroller.com/demo/onepage/](http://www.creativecontroller.com/demo/onepage/)

这是我要实现的目标：
-单击导航链接，动画到 div-在这种情况下，我使用的是 html5 部分（完成）
-在 url 中显示主题标签，例如 ...demo/onepage/#about
-如果用户单击另一个链接，它会动画，更新 url 主题标签并动画到正确的 div
- 如果用户单击后退按钮，它会动画回到前一个 div 而不是仅仅捕捉到它
- 尝试在不使用任何插件的情况下执行此操作（只是 jQuery）

这是我用于页面滚动和粘性标题的 jQuery：

```
// Page scrolling
$(function() {
    $('a').bind('click',function(event){
        var $anchor = $(this);

        $('html, body').stop().animate({
            scrollTop: $($anchor.attr('href')).offset().top - 60
        }, 1500,'easeInOutExpo');

        event.preventDefault();
    });
});

// Sticky Nav
$(window).scroll(function(e) {
    var nav_anchor = $(".nav_anchor").offset().top;

    if ($(this).scrollTop() >= nav_anchor && $('.nav').css('position') != 'fixed') 
    {    
        $('.nav').css({
            'position': 'fixed',
            'top': '0px'
        });

        $('.nav_anchor').css('height', '60px');
    } 
    else if ($(this).scrollTop() < nav_anchor && $('.nav').css('position') != 'relative') 
    {   

        $('.nav_anchor').css('height', '0px');

        $('.nav').css({
            'position': 'relative'
        });
    }
}); 
```

任何帮助将不胜感激，谢谢！

更新：
我找到了一个执行上述操作的网站：http:
[//www.maddim.com/demos/spark-r6/](http://www.maddim.com/demos/spark-r6/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T02:17:37.717

首先，将您的锚标记从绝对 URL 更改为相对 URL（`href="#about"`而不是`href="http://blahfdsjkld.com#about"`）。然后像这样更新你的函数：

```
// Page scrolling
$(function() {
    $('a').bind('click',function(event){

        // Do this first
        event.preventDefault();

        var $anchor = $(this);
        $('html, body').stop().animate({
            scrollTop: $($anchor.attr('href')).offset().top - 60
        }, 1500,'easeInOutExpo');

        // Use an id that isn't on the page, hence the capitalization of the first letter
        window.location.hash = $anchor.html().charAt(0).toUpperCase() + $anchor.html().slice(1);
    });
}); 
```

# python - PyGame MP3 无法播放

> ID：11068414
> 
> 赞同：1
> 
> 时间：2012-06-17T02:02:58.283
> 
> 标签：python, mp3, pygame

我正在使用代码：

```
import pygame, sys, datetime
from pygame.locals import *
pygame.init()
screen = pygame.display.set_mode((640, 480))
screen.fill((0, 0, 0, 255))
pygame.display.set_caption("TESTIFICATE")
if datetime.date.today().month == 12 and datetime.date.today().day == 25:
    pygame.mixer.music.load("8bit-jingle-twist.mp3")
    print("Merry Christmas!")
else:
    pygame.mixer.music.load("timeless-mountains.mp3")
print("Loading Music...")
pygame.mixer.music.play(-1, 0.0)
print("Playing Background Music...")
while True:
    for event in pygame.event.get():
        if event.type == pygame.QUIT:
            pygame.quit()
            sys.exit()
    pygame.display.update() 
```

两者都`8bit-jingle-twist.mp3`存在`timeless-mountains.mp3`并且可以由 VLC 播放。我的音量*开着*，我的困惑也开着。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T14:10:56.573

很奇怪，我只是复制了您的代码并将音频文件更改为我拥有的文件，并且效果很好。

因此，我认为这与文件本身有关。

可能正如 Hugh Bothwell 指出的那样，文件路径。在这种情况下，您可以做三件事：

使用整个文件路径：

`pygame.mixer.music.load("C:/blah/blah/blah/8bit-jingle-twist.mp3")`

不使用文件路径**（该文件必须与程序位于同一文件夹中）**

`pygame.mixer.music.load("8bit-jingle-twist.mp3")`

或者使用一个文件夹跳转，您在与您的程序相同的文件夹内有一个文件夹。因此，例如，您将程序放在“我的文档”中，然后在“我的文档”中创建另一个名为“Music for Pygame”的文件夹。那么代码将是：

`pygame.mixer.music.load("Music for Pygame/8bit-jingle-twist.mp3")`

我主要使用最后一个选项，这样你就可以通过音乐文件夹、图像文件夹等来组织文件，如果你移动它所在的文件夹，程序仍然可以工作。

当然也可以是音频文件本身。确保它确实是 a`.mp3`并且播放良好（VLC 太棒了，可以播放任何东西，尝试在 Windows 媒体或其他东西上播放以防万一）

此外，如果使用 Windows 7 操作系统，请尝试以管理员身份运行它，它可能会解决问题。

（我在 Windows XP 上运行了代码，现在运行良好）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-21T03:24:16.787

**新答案：**

如果您将 mp3 文件保存为“filename.mp3”，并且您自己写下了 .mp3 文件扩展名，那么 pygame 的 pygame.mixer.music.load() 函数中的文件名必须写为“filename.mp3.mp3” ，因为 python 希望您添加 .mp3。如果您手动将其保存为文件名，则有时 .mp3 已包含在文件名中。

因此，试试这个： `pygame.mixer.music.load('filename.mp3.mp3')`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T02:06:01.993

您确定要在正确的目录中查找它们吗？

尝试指定完整路径，即 `"c:/programs/mygame/music/8bit-jingle-twist.mp3"`

# hbase - 在 HBase 中获取过滤的行

> ID：11068418
> 
> 赞同：7
> 
> 时间：2012-06-17T02:03:53.973
> 
> 标签：hbase

应用一些过滤器后，我试图从 HBase 中获取行中的选定列。考虑如下表：

> 姓名：fname 姓名：lname 工资：总工资：da 工资：ta

我想获取总工资> 1500的所有员工的列表。为此，我编写了以下代码。我面临的问题是，当我过滤列时，我只在输出中得到那个过滤器，这是有道理的，因为这是它们的创建目的，但是如果我想获得所需的列，但只想基于特定列进行过滤怎么办，就像我刚才提到的那样 - 所有工资 > 1500 的员工名单。

输出应该是以下一组列：

> lname,fname,salary:gross,salary:ta

# 到目前为止的代码

```
import org.apache.hadoop.conf.Configuration;
import org.apache.hadoop.hbase.HBaseConfiguration;
import org.apache.hadoop.hbase.KeyValue;
import org.apache.hadoop.hbase.client.Get;
import org.apache.hadoop.hbase.client.HTable;
import org.apache.hadoop.hbase.client.Result;
import org.apache.hadoop.hbase.client.ResultScanner;
import org.apache.hadoop.hbase.client.Scan;
import org.apache.hadoop.hbase.filter.BinaryComparator;
import org.apache.hadoop.hbase.filter.RegexStringComparator;
import org.apache.hadoop.hbase.filter.SubstringComparator;
import org.apache.hadoop.hbase.filter.CompareFilter;
import org.apache.hadoop.hbase.filter.Filter;
import org.apache.hadoop.hbase.filter.QualifierFilter;
import org.apache.hadoop.hbase.filter.FamilyFilter;
import org.apache.hadoop.hbase.filter.FilterList;
import org.apache.hadoop.hbase.filter.ValueFilter;
import org.apache.hadoop.hbase.util.Bytes;

import java.io.IOException;
import java.util.ArrayList;
import java.util.List;

public class MyQualifierFilterExample {

  public static void main(String[] args) throws IOException {
    Configuration conf = HBaseConfiguration.create();

    HTable table = new HTable(conf, "emp");

    List<Filter> filters = new ArrayList<Filter>();

    Filter famFilter = new FamilyFilter(CompareFilter.CompareOp.EQUAL,
              new BinaryComparator(Bytes.toBytes("salary")));
    filters.add(famFilter);

    Filter colFilter = new QualifierFilter(CompareFilter.CompareOp.EQUAL,
      new BinaryComparator(Bytes.toBytes("gross")));

    filters.add(colFilter);

    Filter valFilter = new ValueFilter(CompareFilter.CompareOp.GREATER_OR_EQUAL,
              new BinaryComparator(Bytes.toBytes("1500")));

    filters.add(valFilter);

    FilterList fl = new FilterList( FilterList.Operator.MUST_PASS_ALL, filters);

    Scan scan = new Scan();
    scan.setFilter(fl);
    ResultScanner scanner = table.getScanner(scan);
    System.out.println("Scanning table... ");
    for (Result result : scanner) {
        //System.out.println("getRow:"+Bytes.toString(result.getRow()));
        for (KeyValue kv : result.raw()) {
            //System.out.println("Family - "+Bytes.toString(kv.getFamily()));
            //System.out.println("Qualifier - "+Bytes.toString(kv.getQualifier() ));
            System.out.println("kv:"+kv +", Key: " + Bytes.toString(kv.getRow())  + ", Value: " +Bytes.toString(kv.getValue()));
        }
    }   

    scanner.close();
    System.out.println("Completed ");
  }
} 
```

# 输出

```
Scanning table... 
kv:101/salary:gross/1339876269770/Put/vlen=4, Key: 101, Value: 2000
kv:102/salary:gross/1339876277659/Put/vlen=4, Key: 102, Value: 2400
kv:105/salary:gross/1339876300585/Put/vlen=4, Key: 105, Value: 2300
kv:106/salary:gross/1339876310004/Put/vlen=4, Key: 106, Value: 2900
Completed 
```

# 解决方案 1

```
import org.apache.hadoop.conf.Configuration;
import org.apache.hadoop.hbase.HBaseConfiguration;
import org.apache.hadoop.hbase.KeyValue;
import org.apache.hadoop.hbase.client.Get;
import org.apache.hadoop.hbase.client.HTable;
import org.apache.hadoop.hbase.client.Result;
import org.apache.hadoop.hbase.client.ResultScanner;
import org.apache.hadoop.hbase.client.Scan;
import org.apache.hadoop.hbase.filter.BinaryComparator;
import org.apache.hadoop.hbase.filter.RegexStringComparator;
import org.apache.hadoop.hbase.filter.SubstringComparator;
import org.apache.hadoop.hbase.filter.CompareFilter;
import org.apache.hadoop.hbase.filter.Filter;
import org.apache.hadoop.hbase.filter.QualifierFilter;
import org.apache.hadoop.hbase.filter.SingleColumnValueFilter;
import org.apache.hadoop.hbase.filter.FamilyFilter;
import org.apache.hadoop.hbase.filter.FilterList;
import org.apache.hadoop.hbase.filter.ValueFilter;
import org.apache.hadoop.hbase.util.Bytes;

import java.io.IOException;
import java.util.ArrayList;
import java.util.List;

public class MyQualifierFilterExample {

  public static void main(String[] args) throws IOException {
    Configuration conf = HBaseConfiguration.create();

    HTable table = new HTable(conf, "emp");

    List<Filter> filters = new ArrayList<Filter>();

    SingleColumnValueFilter colValFilter = new SingleColumnValueFilter(Bytes.toBytes("salary"), Bytes.toBytes("gross")
            , CompareFilter.CompareOp.GREATER_OR_EQUAL, new BinaryComparator(Bytes.toBytes("1300")));
    colValFilter.setFilterIfMissing(false);
    filters.add(colValFilter);          

    Filter colValFilter2 = new SingleColumnValueFilter(Bytes.toBytes("salary"), Bytes.toBytes("da")
            , CompareFilter.CompareOp.GREATER_OR_EQUAL, new BinaryComparator(Bytes.toBytes("150")));
    filters.add(colValFilter2);

    //Filter colValFilter3 = new SingleColumnValueFilter(Bytes.toBytes("ename"), Bytes.toBytes("fname")
    //      , CompareFilter.CompareOp.GREATER_OR_EQUAL, new SubstringComparator("jack"));
    //filters.add(colValFilter3);

    FilterList fl = new FilterList( FilterList.Operator.MUST_PASS_ALL, filters);

    Scan scan = new Scan();
    scan.setFilter(fl);
    scan.addColumn(Bytes.toBytes("ename"), Bytes.toBytes("fname"));
    scan.addColumn(Bytes.toBytes("ename"), Bytes.toBytes("lname"));
    scan.addColumn(Bytes.toBytes("salary"), Bytes.toBytes("gross"));
    scan.addColumn(Bytes.toBytes("salary"), Bytes.toBytes("da"));

    ResultScanner scanner = table.getScanner(scan);
    String key = new String("~");
    String keyFlag = new String("~");
    System.out.println("Scanning table... ");
    for (Result result : scanner) {
        //System.out.println("getRow:"+Bytes.toString(result.getRow()));
        key = "~";
        for (KeyValue kv : result.raw()) {

            if (key.compareTo(keyFlag)==0)
            {
                key = Bytes.toString(kv.getRow());
                System.out.print("Key: " + key);
            }
            //System.out.print("Family - "+Bytes.toString(kv.getFamily()));

            //System.out.print(", Buffer - "+Bytes.toString(kv.getBuffer() ));
            //System.out.print(", FamilyOffset - " + kv.getFamilyOffset() );
            System.out.print(", "+Bytes.toString(kv.getFamily())+"."+Bytes.toString(kv.getQualifier()));
            System.out.print("=" +Bytes.toString(kv.getValue()));
        }
        System.out.println("");
        System.out.println("-------------------");
    }   

    scanner.close();
    System.out.println("Completed ");
  }
} 
```

# 输出：

```
Scanning table... 
Key: 103, ename.fname=peter, ename.lname=parker, salary.da=190, salary.gross=1400
-------------------
Key: 105, ename.fname=harry, ename.lname=potter, salary.da=154, salary.gross=2300
-------------------
Completed 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-10-04T15:19:17.620

您应该使用[SingleColumnValueFilter](http://hbase.apache.org/apidocs/org/apache/hadoop/hbase/filter/SingleColumnValueFilter.html)和[addFamily](https://hbase.apache.org/apidocs/org/apache/hadoop/hbase/client/Scan.html#addFamily-byte:A-)（或 addColumn）的组合

见下文（我目前无法对其进行测试）：

```
SingleColumnValueFilter filter = new SingleColumnValueFilter(
    Bytes.toBytes("salary"),
    Bytes.toBytes("gross"),
    CompareOp.GREATER,
    Bytes.toBytes("1500")
);
//To prevent the entire row from being emitted
//if the column is not found on a row
scan.setFilterIfMissing(true)
scan.setFilter(filter);

scan.addFamily(Bytes.toBytes("ename"))
scan.addColumn(Bytes.toBytes("salary"), Bytes.toBytes("da"))
scan.addColumn(Bytes.toBytes("salary"), Bytes.toBytes("gross")) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-28T13:43:21.257

Your requirement is relational. So, I suggest you use a wrapper over HBase to make life easy.

Consider using: [Apache Phoenix](http://phoenix.apache.org). It's a high performance SQL wrapper for HBase, using which you can run a query like: `select * from emp where salary>1500`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T20:00:02.503

**ValueFilter** 此过滤器可以仅包含具有特定值的列

这就是为什么您只获取您在过滤器中指定的列的原因。

如果我错了，请告诉我，但你想做的是在薪水 > 1500 时检索所有列，不是吗？

# python - 如何检查文件是否是Python中的符号链接？

> ID：11068419
> 
> 赞同：114
> 
> 时间：2012-06-17T02:03:57.357
> 
> 标签：python, operating-system

在 Python 中，是否有一个函数可以检查给定的文件/目录是否是符号链接？例如，对于以下文件，我的包装函数应该返回`True`.

```
# ls -l
total 0
lrwxrwxrwx 1 root root 8 2012-06-16 18:58 dir -> ../temp/
lrwxrwxrwx 1 root root 6 2012-06-16 18:55 link -> ../log 
```

* * *

## 回答 #1

> 赞同：165
> 
> 时间：2012-06-17T02:08:25.707

要确定目录条目是否是符号链接，请使用以下命令：

> [os.path.islink(路径)](http://docs.python.org/library/os.path.html?highlight=islink#os.path.islink)
> 
> 如果 path 引用作为符号链接的目录条目，则返回 True。如果不支持符号链接，则始终为 False。

例如，给定：

```
drwxr-xr-x   2 root root  4096 2011-11-10 08:14 bin/
drwxrwxrwx   1 root root    57 2011-07-10 05:11 initrd.img -> boot/initrd.img-2..

>>> import os.path
>>> os.path.islink('initrd.img')
True
>>> os.path.islink('bin')
False 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2016-09-04T04:39:00.080

对于 python 3.4 及更高版本，您可以使用 Path 类

```
from pathlib import Path

# rpd is a symbolic link
>>> Path('rdp').is_symlink()
True
>>> Path('README').is_symlink()
False 
```

使用 is_symlink() 方法时必须小心。只要命名对象是符号链接，即使链接的目标不存在，它也会返回 True。例如（Linux/Unix）：

```
ln -s ../nonexistentfile flnk 
```

然后，在当前目录中启动 python

```
>>> from pathlib import Path
>>> Path('flnk').is_symlink()
True
>>> Path('flnk').exists()
False 
```

程序员必须决定他/她真正想要什么。Python 3 似乎重命名了很多类。阅读 Path 类的手册页可能是值得的：[https ://docs.python.org/3/library/pathlib.html](https://docs.python.org/3/library/pathlib.html)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-11-19T08:36:24.263

无意膨胀这个话题，但我被重定向到这个页面，因为我正在寻找符号链接来找到它们并将它们转换为真实文件，并在 python 工具库中找到了这个脚本。

```
#Source https://github.com/python/cpython/blob/master/Tools/scripts/mkreal.py

import sys
import os
from stat import *

BUFSIZE = 32*1024

def mkrealfile(name):
    st = os.stat(name) # Get the mode
    mode = S_IMODE(st[ST_MODE])
    linkto = os.readlink(name) # Make sure again it's a symlink
    f_in = open(name, 'r') # This ensures it's a file
    os.unlink(name)
    f_out = open(name, 'w')
    while 1:
        buf = f_in.read(BUFSIZE)
        if not buf: break
        f_out.write(buf)
    del f_out # Flush data to disk before changing mode
    os.chmod(name, mode)

    mkrealfile("/Users/test/mysymlink") 
```

# javascript - getElementById(element).innerHTML 缓存？

> ID：11068421
> 
> 赞同：1
> 
> 时间：2012-06-17T02:05:07.390
> 
> 标签：javascript, html, dom, javascript-events

这是我的页面代码：

```
<!DOCTYPE HTML>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Marketing Tracking</title>
    </head>
    <body>
        <form action="#" id="form" method="post">
            <div id="namevalues">
                <span id="span:1">
                    <input type="text" id="name:1" onchange="changed(this)" style="width:300px;"/>
                    <input id="value:1" type="number" min="0" value="0" /><br /></span>
            </div>
            <input type="button" id="add" value="Add 1" />
            <br />
            <textarea name="talk" style="width:500px;height:175px;"></textarea>
            <br />
            <input type="button" id="update" value="Update"/>
        </form>
        <script>
function get(a){return document.getElementById(a);}
    up=get("update");
    up.onclick = function(){
    get("form").submit();
}
get("name:1").onchange = function(){changed(this)};
get("add").onclick = function(){add()};<% z=2 %>
function changed(ele){
    id=ele.id;
    val=ele.value;
    id=id.split(":")[1];
    get("value:"+id).name=get("name:"+id).value;
}
function add(){
    document.getElementById("namevalues").innerHTML+='<span id="span:'+z+'"><input type="text" id="name:'+z+'" onchange="changed(this)" style="width:300px;"/><input id="value:'+z+'" type="number" min="0" value="0" /><br /></span>';
}
        </script>
    </body>
</html> 
```

我很困惑为什么当我按下“添加 1”按钮输入一些文本然后再次按下“添加 1”按钮时，我刚刚输入的文本消失了！

如果有人可以对此提供一些见解，将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T02:13:52.753

您的其他值消失的原因是，当您这样做时`something.innerHTML += something`，它将重写该区域的 HTML（这意味着以前存在的内容已经消失，将被新的 HTML 替换）。你可能想要做的是这样的事情：

```
function add(){
    var div = document.createElement("div");
    div.innerHTML = '<span id="span [... the rest of the code ...]<br /></span>';
    document.getElementById("namevalues").appendChild(div);
} 
```

使用`appendChild`不会改变 div 中已经存在的其他元素`namevalues`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T02:11:04.377

只是一件小事，但尝试使用

```
<script type="text/javascript"> 
```

当我使用 inner.document 的东西时，我遇到了各种各样的问题，直到我添加了那个代码。

# php - 在 PHP 中使用按钮计算值

> ID：11068425
> 
> 赞同：0
> 
> 时间：2012-06-17T02:05:30.720
> 
> 标签：php, forms, button

我正在用 PHP 创建一个计算器，我的 HTML 应该有这种结构，其中我的数字是可点击的按钮，第一次点击的数字将是第一个值，我点击的第二个数字将是第二个值. 我不知道它会如何工作，这可能吗？如果是这样，这是我的代码

```
<html>
    <head>
        <title>Calculator</title>
    </head>
        <body>
            <div id = "structure">
            <?php
                if(isset($_GET)){
                    $value += $_GET;
                }
            ?>
                <form method = "GET " action = "calculator.php">
                    <input type = "submit" name = "one" value = 1>
                    <input type = "submit" name = "two" value = 2>
                    <input type = "submit" name = "three" value = 3>
                    <input type = "submit" name = "operand" value = "+">
                    </br>
                    <input type = "submit" name = "four" value = 4>
                    <input type = "submit" name = "five" value = 5>
                    <input type = "submit" name = "six" value = 6>
                    <input type = "submit" name = "operand" value = "-">
                    </br>
                </form>
            </div>
        </body>
</html> 
```

我没有将所有数字都放在计算器中以用于发布目的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T02:13:39.620

正如其他人提到的，最好的方法是使用客户端编码（Javascript）。但是，如果您必须编写 PHP 代码，则需要提交两次表单。第一次，将输入变量（第一个数字）放在表单的隐藏输入元素中，这次使用额外的隐藏输入元素再次打印 html。第二次，寻找隐藏的输入值：如果存在，则意味着新输入是第二个数字，隐藏输入是第一个数字。获取隐藏输入的值，获取新的数字，将它们相加并显示结果。确保重置隐藏的输入值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T02:14:02.210

因为这是一个书本练习，重点是让你编写代码，所以我不会给你任何代码。但是，我可以为您指明正确的方向（或至少其中一个方向）。

考虑使用可以随每个请求发送的某种值，该值存储所有操作的当前累积值。这可能应该显示在某个地方，也应该放在 PHP 能够在表单提交时读取的字段中（提示：你听说过隐藏输入类型吗？）。您将如何跟踪最后一次操作？也许您可以使用这些字段中的另一个来存储操作，直到按下另一个按钮。

您可以使用什么代码来检查表单是否已提交？您如何检查按下了哪个按钮。`+`如果被推送，将设置哪些值？如果一个号码被推送怎么办？如果连续推送多个数字怎么办？

更多需要考虑的事情：尝试使用真正的计算器。什么时候显示结果？使用什么操作顺序？每个操作都有左手边和右手边。当您连续推动多个数字时会发生什么。小数呢？应该有一个清除按钮吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T02:18:45.620

您需要一种方法来跟踪以前的输入。每次单击按钮时，都会向服务器发送一个带有该信息的请求（in `$_GET`），但旧的输入不再可用。几种方法：

**隐藏的表单元素**

每次用户单击时，您都会读取该值并将其以隐藏的表单元素的形式输出回页面。每次您必须使用现有方法读取隐藏元素的值时`$_GET`，请弄清楚您需要在数学上做什么，然后将旧的东西和新的东西再次保存到隐藏元素中以供下一次输入。

有关示例，请参[见此页面。](http://www.tizag.com/htmlT/htmlhidden.php)

**饼干**

您可以使用[`setcookie`](http://www.php.net/manual/en/function.setcookie.php)用户输入的值设置 cookie。每次用户单击按钮时，您都希望从 cookie 中加载值并附加当前输入。当用户单击`=`按钮时，您将加载 cookie 数据并解析表达式。您可以更轻松地将表达式的各个部分存储在 cookie 中的某种分隔字符串中，这样您就`operand,operator,operand`可以轻松地计算结果。点击清除按钮将清除 cookie 的值。

这个[tizag 教程](http://www.tizag.com/phpT/phpcookies.php)是一个很好的例子，说明你想用 cookie 做什么。

**Javascript**

显然是最简单的方法。由于将保持状态，因此您无需来回传递值。

# perl - perl：如何理解@$ref[0]？

> ID：11068428
> 
> 赞同：7
> 
> 时间：2012-06-17T02:06:38.093
> 
> 标签：perl, reference

perl 关于参考的问题。

```
$ref = [11, 22, 33, 44];
print "$$ref[0]" . "\n";
print "@$ref[0]" . "\n"; 
```

当我运行 perl -d。

```
DB<1> p @$ref
11223344
DB<2> p $ref
ARRAY(0x9dbf480)
DB<3> p \$$ref[0]
SCALAR(0x9dbf470)
DB<4> p \@$ref[0]
SCALAR(0x9dbf470) 
```

$$ref[0] 代表 ARRAY(0x9dbf480) 的第一个标量。

@$ref[0] 是什么意思？我无法理解。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-17T02:46:51.010

`$ref = [11, 22, 33, 44];`是对匿名数组的引用。

`$$ref[0]`or `${$ref}[0]`or`$ref->[0]`正在取消引用数组并检索第一个元素。

`@$ref[0]`或`@{$ref}[0]`取消引用数组并获取仅包含第一个元素的数组切片。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-17T02:32:40.683

首先，`@$ref[0]`不同于`\@$ref[0]`. 您的调试会话中有前者，脚本中有后者。

无论如何，`@$ref[0]`意思是一样的`@{$ref}[0]`。`@ref`如果你有一个名为,的数组`@ref[0]`将是等价的。它使用切片表示法来获取数组的第一个元素。

`@array[$x]`和之间的区别在于`$array[$x]`，在第一个中，您可以指定多个索引并从数组中取回一组元素，而不仅仅是一个。但是如果你只在括号之间放一个索引，你会得到相同的结果。

# c++ - nth_element 实现复杂性

> ID：11068429
> 
> 赞同：20
> 
> 时间：2012-06-17T02:06:44.037
> 
> 标签：c++, algorithm, stl, nth-element

有谁知道不同实现的预期运行时间和最坏情况下的运行时间`std::nth_element`？我几乎每天都使用这个算法。

我对最近的 Microsoft 编译器附带的 STL 版本特别感兴趣，但有关此主题的任何信息都是有帮助的。

[请注意，这不是这个问题的重复。](https://stackoverflow.com/q/2392485/677667)我了解存在哪些算法，但我对哪些实现使用哪些算法感兴趣。

作为背景，有众所周知的算法可以做到这一点。一种是 O(n) 平均情况和 O(n log n) 最坏情况，一种是 O(n) 最坏情况但在实践中很慢（中位数的中位数）。另请注意，[有一些有趣的实现策略可以在实践中快速获得最坏情况的 O(n) 运行时间](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=35968)。标准说这必须是更糟糕的 O(n) 平均时间。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-04T12:54:39.060

预期的运行时间是 O(N) 大多数实现的最坏情况的运行时间是 O(N * N)，因为大多数实现都使用 QuickSelect 并且可能是 QuickSelect 运行到错误的分区中。对于 Microsoft VS2008、VS2010 和 VS2012 来说也是如此。

现在有了新的 ISO C++ 2011 标准，std::sort 的复杂性得到了加强 - 它保证为 O(N * log N) 并且没有更坏的情况，因为使用了 David Musser 的 IntroSort： - 使用 QuickSort 并且如果阵列的一部分经历了糟糕的分区，交换到堆排序。

理想情况下，std::nth_element 应该完全相同，但 ISO C++ 2011 标准并未收紧复杂性要求。所以 std::nth_element 在最坏的情况下可能是 O(N * N) 。这可能是因为在 David Musser 的原始论文（请参阅[此处](http://www-home.fh-konstanz.de/~bittel/prog2/Praktikum/musser97introspective.pdf)）中，他没有提到如果 QuickSelect 出现问题应该换成什么算法。

在最坏的情况下，可以使用使用 5 组的中位数中位数（我看过一篇论文推荐的 7 组但找不到）。因此，如果分区出错，std::nth_element 的高质量实现可以使用 QuickSelect 并交换到中位数。这将保证 O(N) 行为。QuickSelect 可以通过使用抽样来改进，使最坏的情况不太可能发生但并非不可能。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-17T10:07:30.827

GCC 4.7 中的实现使用了 David Musser 的[*内省选择*](http://en.wikipedia.org/wiki/Introselect)（这里有他的[论文](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.14.5196)，详细介绍了 introsort 和 introselect）。根据这些文件，最坏情况的执行时间是 O(n)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T09:51:26.827

[cppreference](http://en.cppreference.com/w/cpp/algorithm/nth_element)说，首先它排序然后找到第 n 个元素，但是通过这种方式平均值应该是`O(n log n)`（通过基于比较的排序算法），但他们写的平均值是 O(n)，除了使用像基数排序这样的排序之外似乎不正确，...但是因为它具有基于通用比较的输入，似乎不可能使用基数排序或任何其他不基于比较的排序。无论如何，在实践中使用快速排序算法比使用普通选择算法更好（内存和平均时间）。

# c - OpenMP中线程的本地数组副本？

> ID：11068430
> 
> 赞同：1
> 
> 时间：2012-06-17T02:07:37.610
> 
> 标签：c, visual-studio-2010, openmp

我是 OpenMP 的新手，所以这可能是非常基本的。我有一个功能：

```
void do_calc(int input1[], int input2[], int results[]); 
```

现在，该函数`input1[]`在计算期间进行了修改，但仍然可以将其用于另一次迭代（它以各种方式对其进行排序），`input2[]`每次迭代都不同，并且该函数将结果存储在`results[]`.

在程序的一个线程版本中，我只是遍历了各种`input2[]`. 在并行版本中，我尝试这样做：

```
#pragma omp parallel for reduction (+:counter) schedule(static) private (i,j)
for (i = 0; i < NUMITER ; i++){
    int tempinput1[1000];
    int tempresults[1000];
    int tempinput2[5] = derive_input_from_i(i, input2[]);
    array_copy(input, tempinput);
    do_calc(tempinput, tempinput2, tempresults);
    for (j = 0; j < 1000; j++)
        counter += tempresults[i] //simplified 
} 
```

此代码有效，但效率非常低，因为我将输入复制到`tempinput`每次迭代，并且每个线程只需要一个副本。然后可以在后续`do_calc`调用中重用此副本。我想做的是：

```
#do this only once for every thread worker:
array_copy(input, tempinput); 
```

然后告诉线程存储`tempinput`它在未来进行的迭代。如何在 OpenMP 中进行处理？

其他性能问题：

a) 我想要在双核/四核/八核处理器上工作的代码，让 OpenMP 确定线程工作人员的数量，并为每个工作人员复制一次输入；

b）我的算法受益`input[]`于在前一次迭代中排序（因为然后下一次排序更快，因为键对于相似的 i 仅略有变化）所以我想确保迭代次数在线程之间平均分配，并且线程 1 得到`0 ... NUMITER/n`部分迭代，线程 2 得到`NUMITER/n ... 2*NUMITER/n`等。

b) 没那么重要，但拥有它会很酷:)

（我使用的是 Visual Studio 2010，我有 OpenMP 2.0 版本）

# python - 尝试创建一组按钮精灵

> ID：11068436
> 
> 赞同：0
> 
> 时间：2012-06-17T02:09:03.083
> 
> 标签：python, pygame

再会，

我有 15 张图片需要作为按钮。我有使用 Box() 的按钮（Box - 看起来像这样）

```
class Box(pygame.sprite.Sprite):
    def __init__(self):
        pygame.sprite.Sprite.__init__(self)
        self.image = pygame.Surface((35, 30))
        self.image = self.image.convert()
        self.image.fill((255, 0, 0))
        self.rect = self.image.get_rect()
        self.rect.centerx = 25
        self.rect.centery = 505
        self.dx = 10
        self.dy = 10 
```

我正在尝试使按钮与图像精灵一起使用。所以我试图复制盒子的类样式并对我的图标做同样的事情..代码看起来像这样......

```
class Icons(pygame.sprite.Sprite):
    def __init__(self):
        pygame.sprite.Sprite.__init__(self)
        self.image = pygame.image.load("images/airbrushIC.gif").convert()
        self.rect = self.image.get_rect()
        self.rect.x = 25
        self.rect.y = 550 
```

main() 中的代码

```
rect = image.get_rect()
rect.x = 25
rect.y = 550
ic1 = Icons((screen.get_rect().x, screen.get_rect().y))
screen.blit(ic1.image, ic1.rect)
pygame.display.update() 
```

此代码产生位置错误（接受 1 个参数，但有 2 个）错误或图像未引用错误（在 Icon 类内）。

我不确定这是否是正确的方法。我确定我需要加载所有图像（作为精灵）...将它们存储在一个数组中...然后让我的鼠标检查如果它使用 for 循环单击数组中的一项。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T02:18:06.103

您正在尝试将参数传递给`Icons()`，但您的`__init__()`方法不接受任何参数。如果你想将它们传递给`Sprite()`构造函数，那么你可能想要类似的东西：

```
class Icons(pygame.sprite.Sprite):
    def __init__(self, *args):
        pygame.sprite.Sprite.__init__(self, *args)
        ... 
```

它使用星号运算符接受任意数量的额外参数 ( `*args`)，然后将它们传递给 sprite 构造函数。

# php - 用户单击提交后显示警报，并在另一个 php 页面处理后返回

> ID：11068441
> 
> 赞同：1
> 
> 时间：2012-06-17T02:11:26.297
> 
> 标签：php

用户单击表单中的提交按钮后，如何显示警报或消息？

我希望在单击提交按钮后页面加载时显示警报。

单击提交表单时，它会转到另一个 php 页面，更新数据库并重定向到表单页面本身。我正在用 PHP 做。无论如何我可以发布数据，检查表单页面并显示隐藏消息吗？

```
header('Location: http://www.xxxxxx.co.uk/NottTest/editqr.php'); 
```

这是更新数据库后的重定向链接，我可以在这里解析消息吗？

这是数据库更新的页面..

```
<body>

<p>
 <?php $sltdtpst= $_POST["qrtopic"]; ?>
 <?php $selctsm= $_POST["qrsubmenu"]; ?>
 <?php $selcttxt= $_POST["text12"]; ?>

 <?php
$link = mysql_connect('www.xxxxx.co.uk', 'xxxxxx', 'xxxx');
if (!$link) {
    die('Could not connect: ' . mysql_error());
}

mysql_select_db("web3fffasd", $link);

 $update = "UPDATE qr_table SET $selctsm = '$selcttxt' WHERE id_qr= $sltdtpst";

  mysql_query($update, $link);

mysql_close();

header('Location: http://www.xxxxxx.co.uk/NottTest/editqr.php');

?>

</p>

</body> 
```

因此，更新数据库后，应在表单页面中显示隐藏

```
<form name="updateqrnew" form action="edider1.php" onsubmit="return validateForm()" method="post">

    <div class="form_description">
            Update Contents for QR below
</div>                      
            <ul >

                    <li id="li_2" >
        <label class="description" for="element_2">Quick refresher topics </label>
        <div>
        <select class="element select medium" id="qrtopic" name="qrtopic"> 
            <option value="" selected="selected"></option>
<option value="1">Anxiety</option>

        </select>
        </div> 
        </li>       <li id="li_3" >
        <label class="description" for="element_3">Submenu </label>
        <div>
        <select class="element select medium" id="qrsubmenu" name="qrsubmenu"> 
            <option value="" selected="selected"></option>
<option value="start_of">Starting off</option>

        </select>
        </div> 
        </li>       <li id="li_4" >
        <label class="description" for="element_4">Enter the article below</label>
        <div>
            <textarea id="text12" name="text12" class="element textarea medium"></textarea> 
        </div> 
        </li>

                    <li class="buttons">
                <input type="hidden" name="form_id" value="431595" />

                <input id="saveForm" class="button_text" type="submit" name="submit" value="Update" />
        </li>
            </ul>
    </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T09:00:09.230

让我看看我是否明白这一点

1.  用户点击提交按钮，
2.  动作脚本处理它，然后
3.  重定向到新脚本，

并且您想通知用户他们的更新有效，是这样吗？

在这种情况下，您可能想要查看的是从操作脚本向重定向脚本传递结果代码。然后重定向脚本可以查找传递给用户的正确消息的结果代码。（不一定是弹出窗口，在这种情况下必须如此。）可以通过几种方式传递结果代码，包括使用查询字符串、使用 cookie 或使用会话。第一个很简单，但会使 URL 稍微混乱一些。第二个是相当弃用的。第三种是更普遍接受的方式，但如果这是您唯一需要会话的地方，则可能对您的应用程序来说太过分了。

使用查询字符串，您的重定向可能如下所示：

```
header('Location: http://www.xxxxxx.co.uk/NottTest/editqr.php?r=1'); 
```

例如，其中 1 可以是成功的代码，或者如果您想要显示错误等，您可以使用其他代码。如果您需要的信息不仅仅是代码，您也可以将其传递给查询字符串. 请注意，这确实会带来一些应用程序安全问题，因此如果有人直接使用表示您的应用程序中发生某些事情的查询字符串直接调用重定向脚本，您必须确保您的代码会做正确的事情。这就是为什么它不是最好的方法。

# c++ - 恢复磁盘支持哪个 Windows 子系统

> ID：11068442
> 
> 赞同：5
> 
> 时间：2012-06-17T02:11:46.950
> 
> 标签：c++, windows, subsystem

在恢复模式下运行标准 Windows 7 安装盘时，如果您打开命令行并运行自定义构建的应用程序，您将收到错误“不支持子系统”。我曾尝试与 /SUBSYSTEM:CONSOLE、WINDOWS 和 NATIVE 链接，但这些都不起作用。

我在使用分区表时遇到了一点困难（并且可能从 Windows 中包含的分区管理器中发现了一个错误，或者至少是“愚蠢”的行为），因此编写了一个实用程序来修复它。我的程序使用 'Windows.h' 来导入`CreateFile`，但是如果需要，我可以只使用标准 C++（甚至标准 C）而没有特定于 Windows 的标头。

我需要做什么才能让应用程序运行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T11:35:19.300

Windows 恢复环境是 Windows 预安装环境的超集。

Windows PE 是 Windows 的精简版，缺少许多子系统，包括 WoW（Windows 上的 Windows）。

这意味着 32 位可执行文件（或任何具有 32 位组件的东西）将不会在 64 位 Windows PE 磁盘上运行。（请注意，WinPE 32 无法安装/修复 64 位系统，反之亦然）。

我的问题的解决方案是编译为 64 位代码——一个描述性的错误消息会很好微软：|

经过大量搜索找到： [http ://technet.microsoft.com/en-us/library/cc766093(v=ws.10).aspx](http://technet.microsoft.com/en-us/library/cc766093(v=ws.10).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T08:43:02.630

您是否以任何方式使用 C++ CRT？我不认为这是支持的。我什至怀疑这`CreateFile`是否合适；`NtCreateFile`而是调查。

# php - Jquery Mobile：新的 Ajax 加载页面未加载新的 JS

> ID：11068444
> 
> 赞同：4
> 
> 时间：2012-06-17T02:12:09.790
> 
> 标签：php, jquery, jquery-mobile

这是我目前的设置。

我在 jquery 移动框架上运行了两个页面。

*   索引.php
*   文章.php

在麻烦的标题中，我有一个名为 rating.js 的 js 文件。

这是我的js `ratings.js`：

```
$(document).ready(function(){
    $("#rating_1").click(function () {
        $("#rating_2").css('backgroundPosition', '0px 0px');
        $(this).css('backgroundPosition', '-45px 0px');
    }); 
}); 
```

当我加载`index.php`然后去`article.php`我的触发器都没有`ratings.js`工作时。

如果我添加`rel="external"`或`data-ajax="false"`我的触发器工作。然而，我失去了让我的装载机轮子上来的能力。

有什么建议么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T05:01:07.947

> 重要提示：使用`$(document).bind('pageinit')`，而不是 `$(document).ready()`
> 
> 在 jQuery 中学习的第一件事是调用 `$(document).ready()`函数内部的代码，以便在加载 DOM 后立即执行所有内容。但是，在 jQuery Mobile 中，Ajax 用于在您导航时将每个页面的内容加载到 DOM 中，并且 DOM 就绪处理程序仅针对第一页执行。要在加载和创建新页面时执行代码，您可以绑定到 pageinit 事件。此事件在本页底部有详细说明。

*   [http://jquerymobile.com/demos/1.1.0/docs/api/events.html](http://jquerymobile.com/demos/1.1.0/docs/api/events.html)

尝试：

```
$(document).bind('pageinit', function() {
    $("#rating_1").click(function() {
        $("#rating_2").css('backgroundPosition', '0px 0px');
        $(this).css('backgroundPosition', '-45px 0px');
    }); 
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T03:28:35.277

你应该把所有东西都放在里面：

```
<div id="page" data-role="page">
<!--here-->
</div> 
```

`<head></head>`加载 ajax 时不会加载该部分中的脚本。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-17T04:08:53.340

问题是 jQuery 通过 Ajax 加载页面，因此它只加载

```
<div data-role="page"> </div> 
```

页面的一部分。

您可以做 3 件事来解决此类问题。

1.）您已经尝试过的那个（即制作 data-ajax=false ）使您的页面再次完全加载并且不显示加载轮。

2.) 您可以将活动设为现场活动：

```
$("#rating_1").live('click', function () {
$("#rating_2").css('backgroundPosition', '0px 0px');
$(this).css('backgroundPosition', '-45px 0px');
}); 
```

这将使它寻找任何新的#rating_1 并将点击事件添加到它。

3.)`$(document).ready`你可以使用`$( '#myPage' ).live( 'pageinit',function(event){};`函数而不是使用。

# java - 从Java derby中的表中获取所有行

> ID：11068445
> 
> 赞同：0
> 
> 时间：2012-06-17T02:12:18.320
> 
> 标签：java, sql, rows, derby

我正在尝试获取已创建并填充的表中的所有行。这是我目前正在尝试执行的功能，显然它不起作用。什么都不放出来。

```
 public static void getTable(String[] table) throws ClassNotFoundException, SQLException{
    DatabaseMetaData metadata = null;
    Class.forName(driver);
    conn = DriverManager.getConnection(connectionURL);  

    metadata = conn.getMetaData();
    ResultSet res = metadata.getTables(null, null, null, table);

    while(res.next()){
        System.out.println(res.toString());
    }
    res.close();
    conn.close();
} 
```

任何想法我做错了什么？

* * *

哇，在玩了几个小时的组合之后。我有一些东西。这会让我很生气，但对于那些可能有这种问题的人来说，这就是我想出的从整个表格中获取数据的方法。

编辑：现在返回一个 HashMap，其中行号和值由“，”分隔。

```
 /**
 * Gets all rows of a table. Returns a HashMap.
 * 
 * Returns a HashMap with each table row value separated by ','. 
 * Each row in a new count in the hashmap. Example:
 * 
 * Returns:
 * 
 * <1, "FirstName,LastName,Age">
 * 
 * 
 * @param table
 * @return HashMap<Int, String>
 * @throws ClassNotFoundException
 * @throws SQLException
 */
@SuppressWarnings("null")
public static HashMap<Integer, String> getTable(String table) throws ClassNotFoundException, SQLException{
    DatabaseMetaData metadata = null;
    Class.forName(driver);
    conn = DriverManager.getConnection(connectionURL);  

    String sql = "select * from " + table;  // use actual name of the table
    PreparedStatement statement = conn.prepareStatement(sql);
    ResultSet res = statement.executeQuery();
    ResultSetMetaData md = res.getMetaData();
    HashMap<Integer,String> hash = new HashMap();
    int count = md.getColumnCount();
    String done;
    int y = 1;
    while(res.next()){
        for(int x = 1; x < md.getColumnCount(); x = x+md.getColumnCount()){
            done = res.getObject(x).toString() + "," + res.getObject(x+1).toString();
        }
        hash.put(y, done);
        y++;
    }
    res.close();
    conn.close();
    if(!hash.isEmpty())
        return hash;
    else
        return null;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T03:05:32.640

您可以使用 sql 语句并执行它，例如：

```
String sql = "select * from <nameOfTable>";  // use actual name of the table
PreparedStatement statement = connection.prepareStatement(sql);
ResultSet rs = statement.execute(); 
```

这就是你要问的。

现在，尚不清楚您是否知道下一步要做什么。既然您说您试图避免知道列的名称，那么实际上您将不得不查询元数据以获取这些名称。您可以按列位置从结果集中获取数据，但您无法知道列的数据类型是什么（字符串、整数、blob）。

您可以遍历从元数据中获得的列以找出它们的名称，以及（也许更重要的是）它们的数据类型，这样您就可以对要获取的每一列的结果集调用 getInt 或 getString。

因此，尽管这可能是实际问题的答案，但对它做任何有用的事情都需要更多的逻辑。我们可以帮助你，但现在我只是猜测你想这样做......

# jquery - 当复选框被选中和关闭时，如何将类添加到复选框的容器 div 中？

> ID：11068446
> 
> 赞同：0
> 
> 时间：2012-06-17T02:12:30.697
> 
> 标签：jquery, checkbox

当使用 jquery 激活复选框（input.check-group）时，我想向容器（div.checkbox_db）添加背景颜色。我可以这样做吗..？这是我正在使用的html代码：

```
<div class="grid_3 checkbox_db off-check">

    <input type="checkbox" class="check-group" id="check-1" name="check-1">

    <label for="check-1" class="group">Checkbox</label>

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T02:16:53.860

```
$('.check-group').click(function(){
  if($(this).is(':checked')){
    $(this).parent().addClass('some_class');
  }else{
    $(this).parent().removeClass('some_class');
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T02:31:44.937

**我认为这是你想要的：**

**javascript**

```
$(".grid_3").removeClass('off-check');
    $('.check-group').click(function(){
    if($(this).is(':checked')){
        $(this).parent().addClass('off-check');
    }
    else {
        $(this).parent().removeClass('off-check');
    }
}); 
```

**样式表**

```
.off-check{
 background-color:yellow;  
} 
```

在这里演示：http: [//jsfiddle.net/kxFCd/](http://jsfiddle.net/kxFCd/ "http://jsfiddle.net/kxFCd/")

# ruby-on-rails - 将 Mailer 与生产中预编译的资产一起使用

> ID：11068449
> 
> 赞同：0
> 
> 时间：2012-06-17T02:12:58.493
> 
> 标签：ruby-on-rails, mailer, precompile

我在生产环境的命令提示符下使用 Mailer 时遇到问题。使用此命令

```
Mailer.function.deliver 
```

给出这个错误

```
Errno::ENOTDIR: Not a directory - /assets/
from /home/rails/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/open-uri.rb:35:in `initialize'
from /home/rails/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/open-uri.rb:35:in `open'
from /home/rails/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/open-uri.rb:35:in `open'
from /home/rails/.rvm/gems/ruby-1.9.3-p194/gems/premailer-rails3-1.2.0/lib/premailer-rails3/css_helper.rb:70:in `request_and_unzip'
from /home/rails/.rvm/gems/ruby-1.9.3-p194/gems/premailer-rails3-1.2.0/lib/premailer-rails3/css_helper.rb:45:in `load_css_at_path'
from /home/rails/.rvm/gems/ruby-1.9.3-p194/gems/premailer-rails3-1.2.0/lib/premailer-rails3/css_helper.rb:15:in `css_for_doc'
from /home/rails/.rvm/gems/ruby-1.9.3-p194/gems/premailer-rails3-1.2.0/lib/premailer-rails3/premailer.rb:14:in `initialize'
from /home/rails/.rvm/gems/ruby-1.9.3-p194/gems/premailer-rails3-1.2.0/lib/premailer-rails3/hook.rb:18:in `new'
from /home/rails/.rvm/gems/ruby-1.9.3-p194/gems/premailer-rails3-1.2.0/lib/premailer-rails3/hook.rb:18:in `delivering_email'
from /home/rails/.rvm/gems/ruby-1.9.3-p194/gems/mail-2.3.3/lib/mail/mail.rb:230:in `block in inform_interceptors'
from /home/rails/.rvm/gems/ruby-1.9.3-p194/gems/mail-2.3.3/lib/mail/mail.rb:229:in `each'
from /home/rails/.rvm/gems/ruby-1.9.3-p194/gems/mail-2.3.3/lib/mail/mail.rb:229:in `inform_interceptors'
from /home/rails/.rvm/gems/ruby-1.9.3-p194/gems/mail-2.3.3/lib/mail/message.rb:218:in `inform_interceptors'
from /home/rails/.rvm/gems/ruby-1.9.3-p194/gems/mail-2.3.3/lib/mail/message.rb:228:in `deliver'
from (irb):1
from /home/rails/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.1.1/lib/rails/commands/console.rb:45:in `start'
from /home/rails/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.1.1/lib/rails/commands/console.rb:8:in `start'
from /home/rails/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.1.1/lib/rails/commands.rb:40:in `<top (required)>'
from script/rails:6:in `require'
from script/rails:6:in `<main>'1.9.3-p194 :002 > 
```

如果我删除“public/assets”文件夹，我可以更正问题，但这会导致生产网站的其余部分无法加载图像/css 等。

我使用此命令预编译我的资产`rake assets:precompile`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T02:55:15.940

弄清楚了。`email.css`似乎在生产 rails 3.1 预编译资产管道，premailer 要求您在预编译资产之前至少有一个空白`app/assets/stylesheets`。

# c - Arduino（C语言）解析带分隔符的字符串（通过串行接口输入）

> ID：11068450
> 
> 赞同：14
> 
> 时间：2012-06-17T02:13:03.643
> 
> 标签：c, string, parsing, arduino, delimiter

Arduino（C语言）解析带分隔符的字符串（通过串行接口输入）

在这里没有找到答案：/

我想通过串行接口 (Serial.read()) 向我的 arduino 发送一个简单的由逗号分隔的三个数字的字符串。这三个数字的范围可以是 0-255。

例如。 `255,255,255` `0,0,0` `1,20,100` `90,200,3`

我需要做的是将这个发送到 arduino 的字符串解析为三个整数（比如说 r、g 和 b）。

所以当我发送 100,50,30 时，arduino 会将其翻译为

```
int r = 100
int g = 50
int b = 30 
```

我尝试了很多代码，但没有一个有效。主要问题是将字符串（一堆字符）转换为整数。我发现可能会有 strtok_r 用于分隔符，但仅此而已。

感谢您的任何建议:)

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-13T18:57:10.737

要回答您实际提出的问题，String 对象非常强大，它们可以完全按照您的要求进行操作。如果您直接从输入中限制解析规则，您的代码将变得不那么灵活、可重用性降低并且略微复杂。

字符串有一个名为 indexOf() 的方法，它允许您在字符串的字符数组中搜索特定字符的索引。如果未找到该字符，该方法应返回 -1。可以将第二个参数添加到函数调用以指示搜索的起点。在您的情况下，由于您的分隔符是逗号，您可以调用：

```
int commaIndex = myString.indexOf(',');
//  Search for the next comma just after the first
int secondCommaIndex = myString.indexOf(',', commaIndex + 1); 
```

然后，您可以使用该索引使用 String 类的 substring() 方法创建子字符串。这将返回一个从特定起始索引开始的新字符串，并在第二个索引之前结束（或者如果没有给出文件的结尾）。所以你会输入类似于：

```
String firstValue = myString.substring(0, commaIndex);
String secondValue = myString.substring(commaIndex + 1, secondCommaIndex);
String thirdValue = myString.substring(secondCommaIndex + 1); // To the end of the string 
```

最后，可以使用 String 类的未记录方法 toInt() 检索整数值：

```
int r = firstValue.toInt();
int g = secondValue.toInt();
int b = thirdValue.toInt(); 
```

[可以在Arduino 文档](http://arduino.cc/en/Reference/StringObject)中找到有关 String 对象及其各种方法的更多信息。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-02-03T04:41:27.120

使用`sscanf`；

```
const char *str = "1,20,100"; // assume this string is result read from serial
int r, g, b;

if (sscanf(str, "%d,%d,%d", &r, &g, &b) == 3) {
    // do something with r, g, b
} 
```

如果要解析字符串流，请在此处使用我的代码：`255,255,255 0,0,0 1,20,100 90,200,3`[解析逗号分隔字符串的函数](https://stackoverflow.com/questions/35150262/parsing-function-for-comma-delimited-string/35153813#35153813)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-11-12T03:10:00.793

我认为最简单的是`parseInt()`用来完成这项任务：

```
void loop(){
    if (Serial.available() > 0){
        int r = Serial.parseInt();
        int g = Serial.parseInt();
        int b = Serial.parseInt();
    }
} 
```

成功了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-17T06:35:07.747

我想你想做这样的事情来读入数据：

```
String serialDataIn;
String data[3];
int counter;

int inbyte;

void setup(){
  Serial.begin(9600);
  counter = 0;
  serialDataIn = String("");
}

void loop()
{
    if(serial.available){
        inbyte = Serial.read();
        if(inbyte >= '0' & inbyte <= '9')
            serialDataIn += inbyte;
        if (inbyte == ','){  // Handle delimiter
            data[counter] = String(serialDataIn);
            serialDataIn = String("");
            counter = counter + 1;
        }
        if(inbyte ==  '\r'){  // end of line
                handle end of line a do something with data
        }        
    }
} 
```

然后使用 atoi() 将数据转换为整数并使用它们。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-11-08T21:53:17.180

这很棒！

从@dsnettleton 最受好评的响应中给出的代码中，关于“thirdvalue = 0”的最后一条评论是正确的。但是，不要使用“lastIndexOf(',');” , 代码应该像@dsnettleton 正确地为 commaIndex+1 添加一个“+1”到“secondCommaIndex”（缺少 +1 可能只是那个人的错字）。

这是更新的代码

```
int commaIndex = myString.indexOf(',');
int secondCommaIndex = myString.indexOf(',', commaIndex+1);
String firstValue = myString.substring(0, commaIndex);
String secondValue = myString.substring(commaIndex+1, secondCommaIndex);
String thirdValue = myString.substring(secondCommaIndex+1); //To the end of the string 
```

例子）

对于 myString = "1,2,3"

*   commaIndex = 1（从索引 0（字符 1 的位置）搜索到第一个逗号的位置）
*   secondCommaIndex = 3（从索引 2（字符 2 所占据的位置）搜索到下一个逗号的位置）
*   firstValue 从索引 0-1 = "1" 读取
*   secondValue 从索引 2-3 = "2" 读取
*   第三个值从索引 4-4（字符串的最后一个索引点）读取 = "3"

注意：不要将 INDEX 与字符串的 LENGTH 混淆。字符串的长度为 5。由于 String indexOf 从 0 开始计数，所以最后一个索引为 4。

刚刚的原因

```
String thirdValue = myString.substring(secondCommaIndex); 
```

使用 .toInt() 时返回 0 是因为 thirdValue = ",3" 而不是 "3" 搞砸了 toInt()。

附言。很抱歉把所有的说明都写出来，但作为一名机械工程师，即使我有时也希望有人为我简化代码，尤其是在过去 7 年从事咨询工作的情况下。继续发布精彩的帖子！帮助像我这样的人很多！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-07-26T07:25:51.637

对于在字符串中分隔的 n 个数字

```
int end;
while((end=str.indexOf(","))!=-1){
  String num = str.substring(0,end);
  str= asc.substring(end+1,str.length());
  Serial.println(num);  
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-06-25T02:20:11.573

新的 SafeString Arduino 库（可通过库管理器获得）提供了一个 stoken() 方法和一个 toLong() 方法来处理这种情况并避免 String 类的堆碎片问题。

有关详细教程，请参见
[https://www.forward.com.au/pfod/ArduinoProgramming/SafeString/index.html](https://www.forward.com.au/pfod/ArduinoProgramming/SafeString/index.html)

```
#include "SafeString.h"

void setup() {
  Serial.begin(9600);

  createSafeString(appCmd, 50);  // large enough for the largest cmd
  createSafeString(token1, 10);
  createSafeString(token2, 10);
  createSafeString(token3, 10);
  long r; 
  long g;
  long b;

  appCmd = "1,20a,100"; 

  token1.clear();token2.clear();token3.clear(); // clear any old data
  size_t nextIdx = 0; 
  nextIdx = appCmd.stoken(token1, nextIdx, ",");
  nextIdx++; //step over delimiter
  nextIdx = appCmd.stoken(token2, nextIdx, ",");
  nextIdx++; //step over delimiter
  nextIdx = appCmd.stoken(token3, nextIdx, ",");
  nextIdx++; //step over delimiter
  // now parse the numbers
  bool have3ValidNumbers = true;
  if (!token1.toLong(r)) {
    have3ValidNumbers = false;
    Serial.print("Red number invalid:");Serial.println(token1);
  }
  if (!token2.toLong(g)) {
    have3ValidNumbers = false;
    Serial.print("Green number invalid:");Serial.println(token2);
  }
  if (!token3.toLong(b)) {
    have3ValidNumbers = false;
    Serial.print("Blue number invalid:");Serial.println(token3);
  }
  if (have3ValidNumbers) {
    Serial.print("The values are ");
    Serial.print(" r:");Serial.print(r);
    Serial.print(" g:");Serial.print(g);
    Serial.print(" b:");Serial.print(b);
    Serial.println();
  }
}

void loop() {
} 
```

此输入*“1,20a,100”*的输出是
**绿色数字无效：20a**

'标准' toInt() 方法将返回 1 20 100 作为结果。
对于像“1,a,50”这样的输入，“标准”toInt() 方法将返回 1 0 100
SafeString toLong() 方法在尝试将字符串转换为整数时会进行更多错误检查。

您还应该添加对 <0 和 >255 的检查，以确保输入是有效范围

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2013-04-02T03:27:51.930

@cstrutton - 关于使用 'indexOf' 的优秀建议。它为我的项目节省了大量时间。不过，一个小指针，

我注意到第三个值没有显示（返回为零）。在稍微玩了一下并浏览了[http://arduino.cc/en/Tutorial/StringIndexOf](http://arduino.cc/en/Tutorial/StringIndexOf)上的文档后， 我意识到，我可以使用 lastIndexOf 作为最后一个值。

这里有两行修改提供了正确的第三个值。

```
int lastCommaIndex = myString.lastIndexOf(',');

String thirdValue = myString.substring(lastCommaIndex+1); // To the end of the string 
```

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2016-05-19T06:09:13.700

```
 String myString = "dfsdfgsafhffgsdvbsdvdsvsdvsdsdfdfsdsff|date|recipt|weight|time|date|";

    // the setup routine runs once when you press reset:
    void setup() {                
        Serial.begin(9600); 
    }

// the loop routine runs over and over again forever:
void loop() {
 int Index1 = myString.indexOf('|');
int Index2 = myString.indexOf('|', Index1+1);
int Index3 = myString.indexOf('|', Index2+1);
int Index4 = myString.indexOf('|', Index3+1);
int Index5 = myString.indexOf('|', Index4+1);
int Index6 = myString.indexOf('|', Index5+1);
String secondValue = myString.substring(Index1+1, Index2);
String thirdValue = myString.substring(Index2+1, Index3);  
String fourthValue = myString.substring(Index3+1, Index4); 
String fifthValue = myString.substring(Index4+1, Index5); 
String firstValue = myString.substring(Index5+1, Index6); 
//Serial.println(Index1);
//
Serial.println(secondValue);
Serial.println(thirdValue);
Serial.println(fourthValue);
Serial.println(fifthValue);
Serial.println(firstValue);
delay(14000);
    } 
```

# git - 与 Chef 和 Vagrant 一起查看 Git

> ID：11068454
> 
> 赞同：1
> 
> 时间：2012-06-17T02:13:51.943
> 
> 标签：git, virtualization, provisioning, chef-infra, vagrant

我想使用 Vagrant 作为我正在从事的几个项目的生产机器。如果我可以使用 Chef Solo 配置 Vagrant 来检查我的代码的最新版本，那将是理想的。这将大大改善测试。

目前我有一个使用以下的食谱：

```
git "Checkout Code" do
    repository "git://github.com/opscode-cookbooks/git.git"
    reference "master" # or "HEAD" or "TAG_for_1.0" or (subversion) "1234"
    action :checkout
    destination "/home/vagrant/git"
end 
```

作为概念证明，我正在使用公共存储库。

我收到以下错误消息：

```
[default] Running provisioner: Vagrant::Provisioners::ChefSolo...
[default] Generating chef JSON and uploading...
[default] Running chef-solo...
stdin: is not a tty
[Sun, 17 Jun 2012 04:08:49 +0200] INFO: *** Chef 0.10.10 ***
[Sun, 17 Jun 2012 04:08:49 +0200] INFO: Setting the run_list to ["recipe[test_app::deploy]"] from JSON
[Sun, 17 Jun 2012 04:08:49 +0200] INFO: Run List is [recipe[test_app::deploy]]
[Sun, 17 Jun 2012 04:08:49 +0200] INFO: Run List expands to [test_app::deploy]
[Sun, 17 Jun 2012 04:08:49 +0200] INFO: Starting Chef Run for lucid32
[Sun, 17 Jun 2012 04:08:49 +0200] INFO: Running start handlers
[Sun, 17 Jun 2012 04:08:49 +0200] INFO: Start handlers complete.
[Sun, 17 Jun 2012 04:08:49 +0200] INFO: Processing git[Checkout Code] action checkout (test_app::deploy line 23)
[Sun, 17 Jun 2012 04:08:49 +0200] INFO: git[Checkout Code] cloning repo git://github.com/opscode-cookbooks/git.git to /home/vagrant/git
[Sun, 17 Jun 2012 04:08:49 +0200] ERROR: git[Checkout Code] (test_app::deploy line 23) has had an error
[Sun, 17 Jun 2012 04:08:49 +0200] ERROR: git[Checkout Code] (/tmp/vagrant-chef-1/chef-solo-1/cookbooks/test_app/recipes/deploy.rb:23:in `from_file') had an error:
git[Checkout Code] (test_app::deploy line 23) had an error: Errno::ENOENT: No such file or directory - git clone  git://github.com/opscode-cookbooks/git.git /home/vagrant/git
/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/mixlib-shellout-1.0.0.rc.1/lib/mixlib/shellout/unix.rb:213:in `exec'
/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/mixlib-shellout-1.0.0.rc.1/lib/mixlib/shellout/unix.rb:213:in `fork_subprocess'
/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/mixlib-shellout-1.0.0.rc.1/lib/mixlib/shellout/unix.rb:203:in `fork'
/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/mixlib-shellout-1.0.0.rc.1/lib/mixlib/shellout/unix.rb:203:in `fork_subprocess'
/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/mixlib-shellout-1.0.0.rc.1/lib/mixlib/shellout/unix.rb:35:in `run_command'
/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/mixlib-shellout-1.0.0.rc.1/lib/mixlib/shellout.rb:216:in `run_command'
/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-0.10.10/bin/../lib/chef/mixin/shell_out.rb:30:in `shell_out'
/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-0.10.10/bin/../lib/chef/mixin/shell_out.rb:35:in `shell_out!'
/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-0.10.10/bin/../lib/chef/provider/git.rb:125:in `clone'
/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-0.10.10/bin/../lib/chef/provider/git.rb:43:in `action_checkout'
/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-0.10.10/bin/../lib/chef/resource.rb:454:in `send'
/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-0.10.10/bin/../lib/chef/resource.rb:454:in `run_action'
/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-0.10.10/bin/../lib/chef/runner.rb:49:in `run_action'
/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-0.10.10/bin/../lib/chef/runner.rb:85:in `converge'
/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-0.10.10/bin/../lib/chef/runner.rb:85:in `each'
/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-0.10.10/bin/../lib/chef/runner.rb:85:in `converge'
/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-0.10.10/bin/../lib/chef/resource_collection.rb:94:in `execute_each_resource'
/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-0.10.10/bin/../lib/chef/resource_collection/stepable_iterator.rb:116:in `call'
/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-0.10.10/bin/../lib/chef/resource_collection/stepable_iterator.rb:116:in `call_iterator_block'
/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-0.10.10/bin/../lib/chef/resource_collection/stepable_iterator.rb:85:in `step'
/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-0.10.10/bin/../lib/chef/resource_collection/stepable_iterator.rb:104:in `iterate'
/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-0.10.10/bin/../lib/chef/resource_collection/stepable_iterator.rb:55:in `each_with_index'
/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-0.10.10/bin/../lib/chef/resource_collection.rb:92:in `execute_each_resource'
/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-0.10.10/bin/../lib/chef/runner.rb:80:in `converge'
/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-0.10.10/bin/../lib/chef/client.rb:330:in `converge'
/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-0.10.10/bin/../lib/chef/client.rb:163:in `run'
/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-0.10.10/bin/../lib/chef/application/solo.rb:207:in `run_application'
/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-0.10.10/bin/../lib/chef/application/solo.rb:195:in `loop'
/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-0.10.10/bin/../lib/chef/application/solo.rb:195:in `run_application'
/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-0.10.10/bin/../lib/chef/application.rb:70:in `run'
/opt/vagrant_ruby/lib/ruby/gems/1.8/gems/chef-0.10.10/bin/chef-solo:25
/opt/vagrant_ruby/bin/chef-solo:19:in `load'
/opt/vagrant_ruby/bin/chef-solo:19
[Sun, 17 Jun 2012 04:08:49 +0200] ERROR: Running exception handlers
[Sun, 17 Jun 2012 04:08:49 +0200] ERROR: Exception handlers complete
[Sun, 17 Jun 2012 04:08:49 +0200] FATAL: Stacktrace dumped to /tmp/vagrant-chef-1/chef-stacktrace.out
[Sun, 17 Jun 2012 04:08:49 +0200] FATAL: Errno::ENOENT: git[Checkout Code] (test_app::deploy line 23) had an error: Errno::ENOENT: No such file or directory - git clone  git://github.com/opscode-cookbooks/git.git /home/vagrant/git 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-17T02:24:05.777

我是一个傻瓜。我没有先将“git”配方添加到我的 Vagrantfile 中。结果？尝试在系统上安装 git 之前使用它。

# jquery - 如何将克隆的内容加载为 var

> ID：11068457
> 
> 赞同：0
> 
> 时间：2012-06-17T02:15:51.363
> 
> 标签：jquery

尝试将内容加载到 div 中，然后单击再次加载 div 中的先前内容。

这是我到目前为止的代码：

```
$(document).ready(function(){
   var mainClone = null;
   $('.project').click(function(e){
      var link = $(this).attr('rel');
      event.preventDefault();
      var mainClone = $('#main').clone();
      $('#main').load(link);
   });      

  $('.back').click(function(e){
  event.preventDefault();
  $('#main').load('mainClone *');
  });
}); 
```

我究竟做错了什么？这让我发疯！

顺便说一句，这是解决我问题的好方法吗？我正在尝试实现类似于以下工作部分的内容：[http](http://www.revolver-studio.com/) ://www.revolver-studio.com/ 您单击一个拇指，它会进入更多信息，然后您单击返回再次转到拇指。任何帮助将非常感激。多谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T02:27:15.137

几个问题。

首先是`var mainClone`项目内点击处理程序的第二次使用。这是声明一个名为的新变量`mainClone`，并且与您声明的原始变量不同。新的只在它声明的函数内有作用域，所以原来的更全局的永远不会改变。

`load()`当您想用存储的 html 替换 html 时，我们使用的下一个问题。它既不适合您想要做的事情，而且参数只是一个无效的字符串。

```
$(document).ready(function(){
   var mainClone = null;
   $('.project').click(function(e){
      var link = $(this).attr('rel');
      event.preventDefault();
      /*var mainClone = $('#main').clone();*/ 
      mainClone = $('#main').html();// now will update var declared above and only get the html within the element
      $('#main').load(link);
   });      

  $('.back').click(function(e){
  event.preventDefault();
  if( mainClone ){ // make sure it's not null still
    $('#main').html( mainClone);
  }
  });
}); 
```

总的来说，这段代码仍然会有点弱，但 SO 并不打算为您构建应用程序。它应该让你开始

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T02:54:29.950

保存 div 并隐藏它们可能会更好。在此示例中，它们被“缓存”并且不需要额外的负载（未测试）

```
$(document).ready(function(){
    $('.project[rel]').click(function(){
        var href = $(this).attr('rel');
        var $target = $('#main .pane[rel=' + href + ']');
        if ($target.length == 0) {
            $target = $('<div class="pane" rel="' + href + '">Loading...</div>').appendTo('#main').hide().load(href);
        }
        $('#main .pane').hide();
        $target.show()
        return false;
    });
});​ 
```

您可能希望使用该`$.ajax()`方法而不是`$.fn.load()`因为它可以让您优雅地处理 HTTP/连接错误。

以这种方式使用该属性通常也不是一个好主意`rel=""`，因为它具有特定目的和预期值列表[http://www.w3schools.com/html5/att_a_rel.asp](http://www.w3schools.com/html5/att_a_rel.asp)

对于 HTML5，我建议使用新的数据属性，例如`data-href=""`. John Resig 有一篇关于此[http://ejohn.org/blog/html-5-data-attributes/的优秀文章](http://ejohn.org/blog/html-5-data-attributes/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T02:28:30.087

```
$('#main').load('mainClone *'); 
```

这是不正确的语法和函数用法。您没有调用任何外部文件，因此您需要使用任何 DOM 操纵器，例如`html()`or `appendTo`，但不是`load()`

```
$('#main').html(mainClone); 
```

jsfiddle：http: [//jsfiddle.net/92h75/1/](http://jsfiddle.net/92h75/1/)

# haskell - Put 的 MonadFix 实例

> ID：11068461
> 
> 赞同：6
> 
> 时间：2012-06-17T02:16:49.353
> 
> 标签：haskell, typeclass, monadfix

一个简单的问题，我希望：`binary`包定义了两种类型，[`Get`和`Put`](http://hackage.haskell.org/packages/archive/binary/0.5.1.0/doc/html/Data-Binary.html#g:2). 前者本质上是一个状态单子，后者本质上是一个作家。state 和 writer 都有合理的`MonadFix`例子，所以我希望`Get`并且`Put`也会这样做。

`Get`做。`Put`没有。那么，是否可以为（真的为）定义一个合适的`MonadFix`实例？`Put`[`PutM`](http://hackage.haskell.org/packages/archive/binary/0.5.1.0/doc/html/Data-Binary-Put.html#t:PutM)

一个更普遍的问题是：通常如何验证类型类实例实际上满足该类型类的规则？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-17T03:03:29.143

正如您在二进制包 ( [Data.Binary.Put:71](http://hackage.haskell.org/packages/archive/binary/0.5.1.0/doc/html/src/Data-Binary-Put.html#line-71) ) 的源代码中看到的那样，用于一元值的数据结构在构建器中是严格的。由于从 monad 中提取值必须强制找到值所在的结构，如果构建器依赖于输入，这将导致无限循环。

```
data PairS a = PairS a !Builder
newtype PutM a = Put { unPut :: PairS a } 
```

所以你可以写一个`MonadFix`实例，但你不能用它做任何有用的事情。但我不认为你可以在`MonadFix`这里做任何有用的事情，至少你不能用普通的 old做任何事情`fix`，因为`PutM`monad 基本上是`Writer Builder`（但有一个专门的实现）。

**至于您的第二个问题，**它与第一个问题无关，因此您应该将其作为一个单独的问题提出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T15:40:59.900

这是您的第二个问题的答案以及丹尼尔评论的后续内容。您手动验证法律，我将使用`Functor`法律示例`Maybe`：

```
-- First law
fmap id = id

-- Proof
fmap id
= \x -> case x of
    Nothing -> Nothing
    Just a  -> Just (id a)
= \x -> case x of
    Nothing -> Nothing
    Just a -> Just a
= \x -> case x of
    Nothing -> x
    Just a  -> x
= \x -> case x of
    _ -> x
= \x -> x
= id

-- Second law
fmap f . fmap g = fmap (f . g)

-- Proof
fmap f . fmap g
= \x -> fmap f (fmap g x)
= \x -> fmap f (case x of
    Nothing -> Nothing
    Just a  -> Just (f a) )
= \x -> case x of
    Nothing -> fmap f  Nothing
    Just a  -> fmap f (Just (g a))
= \x -> case x of
    Nothing -> Nothing
    Just a  -> Just (f (g a))
= \x -> case x of
    Nothing -> Nothing
    Just a  -> Just ((f . g) a)
= \x -> case x of
    Nothing -> fmap (f . g) Nothing
    Just a  -> fmap (f . g) (Just a)
= \x -> fmap (f . g) (case x of
    Nothing -> Nothing
    Just a  -> Just a )
= \x -> fmap (f . g) (case x of
    Nothing -> x
    Just a  -> x )
= \x -> fmap (f . g) (case x of
    _ -> x )
= \x -> fmap (f . g) x
= fmap (f . g) 
```

显然我可以跳过很多这些步骤，但我只是想拼出完整的证明。一开始很难证明这些定律，直到你掌握它们的窍门，所以最好从缓慢和迂腐开始，然后一旦你变得更好，你就可以开始组合步骤，甚至在一段时间后在你的脑海中做一些更简单的事情那些。

# background-color - 如何在 MacO 的 NSImageView 中显示 .bmp 以使某种颜色透明？

> ID：11068467
> 
> 赞同：0
> 
> 时间：2012-06-17T02:17:43.130
> 
> 标签：background-color, transparent, nsimageview

我有一些 .bmp 文件有一些颜色（可能是黑色），当图形显示在表单顶部时应该显示为透明，因此表单颜色来自透明区域。但默认情况下，当我将这些图像放在图像视图中时，黑色/透明区域显示为黑色！

我想我需要： - 更改 NSImageView 显示图像的方式，以便某种颜色是透明的，或者 - 以某种方式修改 .bmp 文件以使该颜色适合 NSImageView 中的透明度

但我对图形文件、透明度（alpha）、NSImageView 和图像编辑工具都不太了解。我正在尝试使用 Gimp，但是……不确定我在做什么。当前的 .bmp 文件中似乎已经存在一种应该透明的颜色。

我确信设置 NSImageView、编辑我的文件或为图像制作蒙版很简单，但我还不知道怎么做。我在 IB 中查看了 NSImageView 的各种过滤器，但没有找到在哪里设置透明颜色，也没有找到如何从图像文件中获取该颜色以确​​保我使用正确的值。

提前感谢您的任何帮助。（我试图发布一些图片，但因为我是新人，所以我不能。）

博

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T02:24:00.790

我不是 Cocoa 开发人员，但在 Gimp 中尝试将 alpha 通道添加到您的图像（可能是图层蒙版），然后保存为 32 位 PNG 图像（带有 alpha 通道），然后将该 PNG 直接加载到您的 NSImageView . 如果要在 Gimp 中使黑色像素透明，请使用魔术棒工具选择它们（使用 0 容差的魔术棒），然后删除选择的内容，然后直接保存为 PNG。

# asp.net-mvc-4 - 无法访问 RavenDB Management Studio

> ID：11068470
> 
> 赞同：2
> 
> 时间：2012-06-17T02:18:23.173
> 
> 标签：asp.net-mvc-4, ravendb, ravendb-studio

尝试：

1.  我在VS2012中创建了一个新项目
2.  我通过 NuGet 包[RavenDB Embedded -Pre安装](http://nuget.org/packages/RavenDB.Embedded)
3.  我安装了[Ninject.MVC3](http://nuget.org/packages/Ninject.MVC3)
4.  为 ninject RavenDB 添加了一个模块：

    ```
    Public class RavenDBNinjectModule : NinjectModule
    {
        public override void Load()
        {
        Bind<IDocumentStore>().ToMethod(context =>
        {
            NonAdminHttp.EnsureCanListenToWhenInNonAdminContext(8080);
            var documentStore = new EmbeddableDocumentStore { Url="http://localhost:8080/", DataDirectory="~/App_Data", UseEmbeddedHttpServer = true };
            return documentStore.Initialize();
        }).InSingletonScope();

        Bind<IDocumentSession>().ToMethod(context => context.Kernel.Get<IDocumentStore>().OpenSession()).InRequestScope();
       }
    } 
    ```

5.  在我的课堂“NinjectWebCommon”中......

    ```
    private static void RegisterServices(IKernel kernel)
    {
        kernel.Load(new RavenDBNinjectModule());
    } 
    ```

运行应用程序时，生成了以下 url (" [http://localhost:1423](http://localhost:1423) ")

**验证文件“Raven.Studio.xap”是我的应用程序的根**

我尝试访问“ [http://localhost:8080](http://localhost:8080) ”，但显示以下屏幕：![在此处输入图像描述](../Images/42dc8d54fb56a399bafad21b3e105d0b.png)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T09:46:16.663

您正在设置 Url 属性，这意味着您不是在嵌入式模式下运行，而是在服务器模式下运行。删除 Url 属性，一切都会为您工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T11:25:06.283

我发现了问题！

由于他没有立即使用`IDocumentSession`，ninject 没有创建实例，`IDocumentStore`因此没有运行该`Initialize`方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T13:31:27.390

事实证明，问题是`documentStore.Initialize`永远不会被调用，因为没有人要求 Ninject 解决`IDocumentStore`。

# python - 在linux中运行python可执行文件

> ID：11068477
> 
> 赞同：3
> 
> 时间：2012-06-17T02:21:41.270
> 
> 标签：python, ubuntu

我发现其他一些人问这个问题，但他们的问题的答案对我没有帮助。我尝试学习 python 并尝试使文件可执行。

练习脚本在我键入时运行`python ./userPrompt.py`。但是当我尝试将它作为可执行文件运行时（只是`./userPrompt.py`）。

我已成功更改它`chmod +x` 这是我在文件的第一行中拥有的内容：

```
 #! /user/bin/env python 
```

这是我得到的错误

```
 bash: ./userPrompt.py: /user/bin/env: bad interpreter: No such file or directory 
```

但问题是如果我去`/user/bin`我能找到`env`。所以它肯定存在。为什么Ubuntu找不到它？

我很感激人们在这方面能给我的任何帮助。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-17T02:23:03.347

路径是`/usr`，不是`/user`。

# linux - 为什么不在 ARM Linux 内核上的 vmalloc 页面错误中填充 PTE 条目？

> ID：11068478
> 
> 赞同：1
> 
> 时间：2012-06-17T02:21:48.303
> 
> 标签：linux, linux-kernel, kernel, arm

当VMALLOC_START~VMALLOC_END发生page fault时，为什么do_translation_fault不填Page table entry，只填PG、PUD和PMD？

arch/arm/mm/fault.c中对应的源代码@do_translation_fault：

```
414 static int __kprobes
415 do_translation_fault(unsigned long addr, unsigned int fsr,
416                      struct pt_regs *regs)
417 {
418         unsigned int index;
419         pgd_t *pgd, *pgd_k;
420         pud_t *pud, *pud_k;
421         pmd_t *pmd, *pmd_k;
422
423         if (addr < TASK_SIZE)
424                 return do_page_fault(addr, fsr, regs);
425
426         if (user_mode(regs))
427                 goto bad_area;
428
429         index = pgd_index(addr);
430
431         /*
432          * FIXME: CP15 C1 is write only on ARMv3 architectures.
433          */
434         pgd = cpu_get_pgd() + index;
435         pgd_k = init_mm.pgd + index;
436
437         if (pgd_none(*pgd_k))
438                 goto bad_area;
439         if (!pgd_present(*pgd))
440                 set_pgd(pgd, *pgd_k);
441
442         pud = pud_offset(pgd, addr);
443         pud_k = pud_offset(pgd_k, addr);
444
445         if (pud_none(*pud_k))
446                 goto bad_area;
447         if (!pud_present(*pud)) 
448                 set_pud(pud, *pud_k);
449
450         pmd = pmd_offset(pud, addr);
451         pmd_k = pmd_offset(pud_k, addr);
452
453 #ifdef CONFIG_ARM_LPAE
454         /*
455          * Only one hardware entry per PMD with LPAE.
456          */
457         index = 0;
458 #else
459         /*
460          * On ARM one Linux PGD entry contains two hardware entries (see page
461          * tables layout in pgtable.h). We normally guarantee that we always
462          * fill both L1 entries. But create_mapping() doesn't follow the rule.
463          * It can create inidividual L1 entries, so here we have to call
464          * pmd_none() check for the entry really corresponded to address, not
465          * for the first of pair.
466          */
467         index = (addr >> SECTION_SHIFT) & 1;
468 #endif
469         if (pmd_none(pmd_k[index]))
470                 goto bad_area;
471
472         copy_pmd(pmd, pmd_k);
473         return 0;
474
475 bad_area:
476         do_bad_area(addr, fsr, regs);
477         return 0;
478 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T13:04:47.667

这个范围是为内核内存保留的，使用`vmalloc`.

通常在禁用 IRQ（软或硬）时访问内核内存，并且无法处理页面错误。
该`vmalloc`函数负责提前创建映射，因此访问不会出错。
如果出现故障，那是因为访问的是未分配（或已释放）的内存，因此无法处理。

# wpf - WPF 转换转换错误

> ID：11068480
> 
> 赞同：1
> 
> 时间：2012-06-17T02:22:29.203
> 
> 标签：wpf, storyboard

我有一个 StackPanel，我正在左右滑动以使用 TranslateTransform 模拟移动页面。

如果我调用幻灯片方法一次它运行良好。如果我快速连续调用我的幻灯片方法两次（在代码中），则第二次转换的起始位置错误并最终出现在错误的位置。

如何让我的第二个翻译“刷新”它的起始位置？

这是堆栈面板

```
 <StackPanel
        x:Name="MainPanel"
        Orientation="Horizontal">
        <StackPanel.RenderTransform>
            <TranslateTransform
                x:Name="MainPanelTransform"
                />
        </StackPanel.RenderTransform>
    </StackPanel> 
```

这是幻灯片代码：

```
 private void SlidePage(int pagesToMove)
    {
        Storyboard sb = SlideEffect(MainPanel, (-PageWidth * pagesToMove));
        sb.Completed += SlideCompleted;
        sb.Begin();
    }

    private Storyboard SlideEffect(UIElement controlToAnimate, double positionToMove)
    {
        //Get position of stackpanel
        var gt = controlToAnimate.TransformToVisual(MainGrid);
        var p = gt.Transform(new Point(0, 0));

        //add new storyboard and animation
        var sb = new Storyboard();
        var da = new DoubleAnimation { To = p.X + positionToMove };

        Storyboard.SetTarget(da, controlToAnimate);

        Storyboard.SetTargetProperty(da, new PropertyPath("RenderTransform.(TranslateTransform.X)"));
        //Storyboard.SetTargetProperty(da, new PropertyPath("RenderTransform.Children[0].X"));

        var ee = new ExponentialEase { Exponent = 6.0, EasingMode = EasingMode.EaseOut };
        da.EasingFunction = ee;

        sb.Children.Add(da);
        return sb;

    } 
```

有问题的代码行是这样的：

```
var p = gt.Transform(new Point(0, 0)); 
```

我第二次调用 SlideEffect 方法时，它的值与第一次相同。似乎动画正在缓冲并一起运行。有没有办法停止缓冲？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T07:01:26.160

您是否尝试更改 的[FillBehavior](http://msdn.microsoft.com/en-us/library/system.windows.media.animation.timeline.fillbehavior.aspx)属性`Storyboard`？

**更新：**

我[在 VS 中有一个错误](https://stackoverflow.com/questions/7874885/visual-studio-process-unable-to-copy-file)，所以我无法重现您的情况。但我可能会推荐你：

1.  尝试禁用`EasingFunction`. 可能在实际完成`Storyboard.Completed`之前触发；`Storyboard`

2.  你确定，变换会改变实际坐标吗？我认为这是解决方案，但不确定。

3.  在`Storyboard.Completed`您可以手动更新变换坐标：

    ```
    MainPanelTransform.BeginAnimation(TranslateTransform.XProperty, null);
    MainPanelTransform.X = -100; 
    ```

# pyqt - ABC 类在 Py2app 应用程序和系统库中都实现了。将使用两者之一

> ID：11068486
> 
> 赞同：0
> 
> 时间：2012-06-17T02:24:07.437
> 
> 标签：pyqt, py2app

我正在尝试通过 Py2app 在 Mac OS Lion 上打包使用 PyQt 的应用程序[Mnemosyne 。](http://mnemosyne-proj.org)

我收到如下几个错误：

> *   objc[2826]：类 QCocoaView 在 /Volumes/Bullfrog/patrick/m2/./dist/Mnemosyne.app/Contents/MacOS/../Frameworks/libQtGui.4.dylib 和 /opt/local/lib/ 中都实现了libQtGui.4.dylib。将使用两者之一。哪一个是未定义的。
> *   objc[2826]：类 QCocoaWindow 在 /Volumes/Bullfrog/patrick/m2/./dist/Mnemosyne.app/Contents/MacOS/../Frameworks/libQtGui.4.dylib 和 /opt/local/lib/ 中都实现了libQtGui.4.dylib。将使用两者之一。哪一个是未定义的。

该类的第一个版本是在 Py2App 中使用的，也是应该使用的（我试图使应用程序独立）。第二个是我通过 MacPorts 安装的系统 Qt。我必须向应用程序添加什么以使其使用捆绑的 Qt 而不是系统 Qt？

还有几个这样的陈述：

> 在 Mac OS X 上，您可能会将两组 Qt 二进制文件加载到同一个进程中。检查所有插件是否针对正确的 Qt 二进制文件进行编译。导出 DYLD_PRINT_LIBRARIES=1 并检查是否只加载了一组二进制文件。QObject::moveToThread: 当前线程 (0x10246c880) 不是对象的线程 (0x106985d00)。无法移动到目标线程 (0x10246c880)

老实说，仅基于此错误消息，我真的不明白如何在这里做我需要做的事情（我不是编码员；我只是在尽力打包软件）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T12:20:49.593

[本文](http://www.thetoryparty.com/2009/08/27/pyqt-and-py2app-seriously-i-dont-know-what-to-do-with-you-when-youre-like-this/)给出了一个解决方案：只需在应用程序的 Content/Resources 目录中添加一个空白的 qt.conf 文件。

# c# - 如何在 C# 中将动态字符串值插入到我的多维数组中

> ID：11068487
> 
> 赞同：0
> 
> 时间：2012-06-17T02:24:12.817
> 
> 标签：c#, arrays, multidimensional-array, dynamic-arrays

我正在尝试创建一个列的长度是动态的字符串的多维数组。

行数和列数各不相同，但我似乎无法将其存储在具有如下输出的变量中：

```
index[0] = {"string1", "string2", "string" and so on..}
index[1] = {"string1", "string2", "string" and so on..} 
```

这是我的代码：

```
int arrayRows = itemCollection.Count;
int arrayColumns = parsedColumns.Count;

 String[,] listDataArray = new String[arrayRows, arrayColumns];
 for (int i = 0; i != arrayRows; i++)
 {
   for (int j = 0; j != arrayColumns; j++)
     {
       listDataArray[i, j] = "" + itemCollection[i][parsedColumns[j]];           
     }
 } 
```

非常感谢您提前提供的帮助！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T02:38:15.693

```
// Init jagged array
String[][] list = new String[6][];

// Creating dynamic column lengths.
list[0] = new String[7];
list[1] = new String[3];
// etc...

// Acessing cell values.
list[0][4] = "test";
// etc... 
```

等等

# c# - Linq-To-SQL 未在 WP7 上更新

> ID：11068489
> 
> 赞同：0
> 
> 时间：2012-06-17T02:25:39.213
> 
> 标签：c#, windows-phone-7, linq-to-sql, updating

我是 Windows Phone 7 开发的新手，我在使用 Linq to SQL 时遇到了麻烦。我正在尝试更新一个对象，但它不起作用。我得到了我想要更新的对象并修改了我想要的属性，但是当我调用 SaveChanges 时，它没有在数据库中更新数据。

我已经使用 ISETool 下载了数据库，并检查了数据根本没有更新。

奇怪的是查询和插入方法工作正常，但我不知道为什么不能更新它。

这是实体和更新方法代码：

```
[Table]
public class Entrada : INotifyPropertyChanged, INotifyPropertyChanging
{
    private int _Id;
    [Column]
    private int _DiaId;
    [Column]
    private int _ProjetoId;

    private EntityRef<Dia> _Dia;
    private EntityRef<Projeto> _Projeto;

    private DateTime _Chegada;        
    private DateTime? _Saida;

    [Column(IsPrimaryKey = true, IsDbGenerated = true, CanBeNull = false, DbType = "INT NOT NULL Identity")]
    public int Id
    {
        get
        {
            return _Id;
        }
        set
        {
            if (value != _Id)
            {
                NotifyPropertyChanging("Id");
                _Id = value;
                NotifyPropertyChanged("Id");
            }
        }
    }

    [Column(CanBeNull=false)]
    public DateTime Chegada
    {
        get
        {
            return _Chegada;
        }
        set 
        {
            if (value != _Chegada)
            {
                _Chegada = value; 
                NotifyPropertyChanged("Chegada");
            }                    
        }
    }

    [Association(Storage = "_Dia", ThisKey = "_DiaId", OtherKey="Id", IsForeignKey=true)]
    public Dia Dia
    {
        get { return _Dia.Entity; }
        set
        {
            NotifyPropertyChanging("Dia");
            _Dia.Entity = value;

            if (value != null)
            {
                _DiaId= value.Id;
            }

            NotifyPropertyChanging("Dia");
        }
    }

    [Column(CanBeNull=true)]
    public DateTime? Saida 
    {
        get
        {
            return _Saida;
        }
        set
        {
            if (value != _Saida)
            {
                _Saida = value;
                NotifyPropertyChanged("Saida");
            }                    
        }
    }

    [Association(Storage = "_Projeto", ThisKey = "_ProjetoId", OtherKey = "Id", IsForeignKey = true)]
    public Projeto Projeto
    {
        get
        {
            return _Projeto.Entity;
        }
        set
        {
            NotifyPropertyChanging("Projeto");
            _Projeto.Entity = value;

            if (value != null)
            {
                _ProjetoId = value.Id;
            }

            NotifyPropertyChanging("Projeto");
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;
    public event PropertyChangingEventHandler PropertyChanging;

    private void NotifyPropertyChanged(String propertyName)
    {
        if (null != PropertyChanged)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
        }
    }

    private void NotifyPropertyChanging(string propertyName)
    {
        if (PropertyChanging != null)
        {
            PropertyChanging(this, new PropertyChangingEventArgs(propertyName));
        }
    }
}

//UPDATE CODE:
var query = (from e in timeSheetDB.Entradas where e.Dia.Id == this.Dia.Id && (!e.Saida.HasValue) select e);
var entrada = query.FirstOrDefault();
if (entrada != null)
{
     entrada.Saida = DateTime.Now;
}
timeSheetDB.SubmitChanges(); 
```

我还检查了 GetChangeSet().Updates.Count()，但它始终为 0。我希望你能帮助我 :-) 谢谢你们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T08:59:29.073

您似乎没有为该物业`PropertyChanging`举办活动；`Saida`此事件对于 LINQ-to-SQL 很重要，因此我建议更新所有代表列的成员以引发它（除了`PropertyChanged`事件）

# ios - IOS - 新手无法弄清楚如何按下按钮以显示新屏幕

> ID：11068494
> 
> 赞同：-1
> 
> 时间：2012-06-17T02:27:22.560
> 
> 标签：ios, ios5

我一直在做不同的教程，现在我可以渲染按钮并用它们做一些事情，但是我仍然不太了解如何让按钮进入新屏幕。

我有这个我渲染的主要视图：

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController

@property (weak, nonatomic) IBOutlet UIButton *homeToLearn;

- (IBAction)homeToPlanBusiness:(id)sender;
- (IBAction)homeToLearn:(id)sender;
- (IBAction)homeToMyPlans:(id)sender;
- (IBAction)homeToSettings:(id)sender;

//[homeToLearn addTarget:self action:@selector(saveButton:) forControlEvents:UIControlEventTouchUpInside];

[self.navController pushViewController:newLeanController animated:YES]

@end 
```

它呈现按钮，但我想要做的是按下“homeToLearn”按钮，我希望它转到我拥有的名为 LearningCenter 的视图

我怎样才能做到这一点？我似乎在兜圈子，不明白真正需要做什么。

非常感谢帮助:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T02:42:37.923

由于您提到您正在使用情节提要，实际上有一种 100% 无代码的方式来完成此操作（然后在未来使用适当的代码内回调来扩展应用程序）。

在情节提要中，选择“主”视图控制器，然后选择菜单项：“编辑器”>“嵌入”>“导航控制器”。

顺便说一句，你的 viewControllers 上*总是*有一个 self.navigationController 属性可用，如果你有一个，它将指向当前的 nab 控制器，不需要自定义代码。

现在，从您的按钮按住 ctrl 并拖动到情节提要中的另一个视图控制器，然后从弹出菜单中选择“推送”。

恭喜，你刚刚创建了你的第一个“segue”！

这些 segue 可以命名，并且可以在视图控制器中实现回调，以便在它们触发时添加自定义逻辑。

# php - 分组后从两个表中减去列（用于库存）

> ID：11068495
> 
> 赞同：2
> 
> 时间：2012-06-17T02:27:33.740
> 
> 标签：php, mysql

因此，对于我的库存系统，我有两个具有相同列名称的表（一个用于生产的库存，一个用于发货的库存）。我想出了如何按产品对列进行分组，然后对数量求和。所以我想在两个表上运行这个查询，然后从产品变量匹配的每个表中减去数量列。

我用它来添加组和总库存总额（in）：

```
 $query = "SELECT id, type, color, product, SUM(Quantity) AS TotalQuantity FROM inventory GROUP BY id, color, type"; 
```

我用它来分组和汇总库存货物（出）：

```
$query = "SELECT id, type, color, product, SUM(Quantity) AS TotalQuantity FROM shipped GROUP BY id, color, type"; 
```

那么如何减去每个的数量列呢？

**编辑：**

我用它来输出：（一个表）

```
 echo '<tr><td>'. $row['product'] . '</td><td id="replace">' . $row['type'] . '</td><td>' . $row['color']. '</td><td>'. $row['TotalQuantity'];
 echo "</td></tr>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T02:41:14.773

这可以完全在一个查询中完成。这些之间的一个`INNER JOIN`将允许您减去数量。`id, color, product`仅需要列表中的一个表中的列`SELECT`。

```
SELECT
  inv.id, 
  inv.color,
  inv.product,
  /* total inventory quantity */
  SUM(inv.Quantity) AS TotalInvQuantity,
  /* total shipped quantity */
  SUM(ship.Quantity) AS TotalShipQuantity,
  /* inventory quantity minus shipped quantity */
  SUM(inv.Quantity) - COALESCE(SUM(ship.Quantity), 0) AS SubtractedQuantity
FROM
  inventory inv
  LEFT JOIN shipped ship ON inv.id = ship.id AND inv.color = ship.color AND inv.product = ship.product
GROUP BY
  inv.id,
  inv.color,
  inv.product 
```

### 评论后更新

```
SELECT
  inv.id,
  inv.color,
  inv.product,
  inv.TotalInvQuantity, 
  COALESCE(ship.TotalShipQuantity, 0) AS TotalShipQuantity,
  inv.TotalQuantity - COALESCE(ship.TotalQuantity, 0) AS SubtractedQuantity
FROM (
    SELECT id, product, color, SUM(Quantity) AS TotalInvQuantity
    FROM inventory
    GROUP BY id, product, color
  ) inv
  LEFT JOIN (
    SELECT id, product, color, SUM(Quantity) AS TotalShipQuantity
    FROM inventory
    GROUP BY id, product, color
  ) ship ON 
      inv.id = ship.id 
      AND inv.product = ship.product 
      AND inv.color = ship.color 
```

# php - php 接收到的 UTF-8 数据未解码

> ID：11068496
> 
> 赞同：3
> 
> 时间：2012-06-17T02:27:45.173
> 
> 标签：php, ajax, encoding, utf-8

我的 $_POST/$_REQUEST 数据有一些问题，它们似乎仍然是 utf8_encoded。

在这些情况下，我正在发送传统的 ajax 发布请求：

*   `oXhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded; charset=utf-8");`
*   以utf8-nobom格式保存的js文件
*   html`<header>`标签设置中的元标签
*   php 文件也以 utf-8-nobom 格式保存
*   `encodeURIComponent`已使用但我尝试不使用它并给出相同的结果

好的，一切都很好：数据库也是utf8，并且以这种方式接收，页面显示良好。

但是当我收到字符“º”例如（通过`$_REQUEST`或`$_POST`）时，它的二进制表示是`11000010 10111010`，而在 php（utf8...）中硬编码的“º”二进制表示`10111010`只是。

什么？我只是不知道这是否是一件好事......例如，如果我使用“#º#”作为`explode`php 函数的分隔符，它不会被检测到，这实际上是导致我的问题这里。

任何帮助都将像往常一样非常感谢，非常感谢您的宝贵时间。最好的rgds。

EDIT1：检查`mb_check_encoding`

```
if (mb_check_encoding($_REQUEST[$i], 'UTF-8')) {
    raise("$_REQUEST is encoded properly in utf8 at index " . $i);
} else {
    raise(false);
} 
```

编码得到确认，我已经正确提出了消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T02:51:09.070

单字节 utf-8 字符没有设置第 7 位（八位），因此 10111010 不是 utf-8，您的文件可能以 ISO-8859-1 编码。

# objective-c - 将 UITableView DataSource/Delegate 连接到基本 UIViewController 类

> ID：11068498
> 
> 赞同：3
> 
> 时间：2012-06-17T02:28:22.240
> 
> 标签：objective-c, ios, xcode

我正在尝试通过情节提要将 UITableView 的 DataSource 和 Delegate 连接到 ViewController 的基类。我能够轻松连接我的 IBActions 和 IBOutlets，但事实证明这更棘手。

实例化委托/数据源方法然后在 super 上调用相同方法的正确方法是否正确？

TIA

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-17T02:37:41.090

Xcode 将对您尝试连接的对象进行类型检查。所以有两个前提：

1.  您的类的对象必须“存在”在情节提要中，这通常涉及在检查器中的 UIViewController 上设置自定义类
2.  在进行连接之前，对象的类必须声明它符合正确的协议。

如果满足这两个条件，您应该可以按住 ctrl 键单击 UITableViewController，然后从这些连接拖动到您的类的对象，无论是在情节提要中还是在左侧的对象列表中。

编辑：我添加了一张通过 ctrl 单击表格视图的两步方法设置代表的图片，然后从弹出窗口拖动到符合协议的视图控制器。此技术适用于左侧的列表视图以及工作区中的图形表示。

![设置表视图的委托](../Images/47d046e112cdb37855c0b2112b29e601.png)

# codeigniter - 应用程序包找不到配置文件

> ID：11068501
> 
> 赞同：1
> 
> 时间：2012-06-17T02:29:00.033
> 
> 标签：codeigniter

我的 CI 部署中有两个应用程序正在运行。我正在使用一个单独的文件夹来保存两个应用程序之间的共享资源。

然后在 autoload.php 我有：

```
$autoload['packages'] = array(SHARED_RESOURCES_PATH); 
```

我发现模型和助手可以从共享目录中正常加载，但是我已经添加了一个带有 database.php 的配置文件夹，但它没有被加载。

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T08:06:25.180

您创建的新*配置*目录很可能与您的其他共享目录没有相同的权限或所有权；比较权限/所有权并确保*配置*与其他配置匹配（*这通常是其他一切正常运行的罪魁祸首*）。

# rhino-etl - Rhino-ETL 条件运算

> ID：11068502
> 
> 赞同：1
> 
> 时间：2012-06-17T02:29:13.070
> 
> 标签：rhino-etl

我想检查行字段值的值，并根据值运行特定操作。这可以做到吗。部分代码如下

```
public override IEnumerable<Row> Execute(IEnumerable<Row> rows)
    {
        foreach (Row row in rows)
        {
            if (row["ProductAction"] == "Update")
            {
                _updateProductOperation.Execute(rows);
            }
            else
            {
                _addProductOperation.Execute(rows);
            }

            yield return row;
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T14:27:57.677

有人在另一个论坛上回答我，以防有人感兴趣。他们说你会用一个分支操作来做到这一点，一个分支会检查“更新”，另一个会检查！=“更新”。

# ruby-on-rails - 如何在 Github 上的 DocRails 存储库中找到 AJAX on Rails 的文档？

> ID：11068504
> 
> 赞同：0
> 
> 时间：2012-06-17T02:29:26.070
> 
> 标签：ruby-on-rails, documentation

[我在rails 的 AJAX 文档中](http://guides.rubyonrails.org/ajax_on_rails.html)发现了一些我想提交拉取请求的东西。

但是当我查看[DocRails repo](https://github.com/lifo/docrails)时，我似乎找不到该文档。

有谁熟悉吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T03:52:13.597

查看指南文件夹？

[https://github.com/lifo/docrails/blob/master/guides/source/ajax_on_rails.textile](https://github.com/lifo/docrails/blob/master/guides/source/ajax_on_rails.textile)

# ruby-on-rails - Ruby self 方法设置不正确

> ID：11068506
> 
> 赞同：0
> 
> 时间：2012-06-17T02:31:22.590
> 
> 标签：ruby-on-rails, ruby

所以我认为我已经接近在下面的方法中获得正确的语法，但我并不完全是这些。我总是对何时使用“自我”方法感到困惑。这是上下文：下面的方法旨在将保存到数据库的文件与当前网站上的文件进行比较。该方法本身是 rails 应用程序中模型类的成员。

但是当我在控制台中运行代码时，它会卡在“自我”上。它不能在 nil 类上调用版本方法。我对“自我”有什么误解？我需要做什么才能使这种方法起作用？

```
 def compare
      live_file = download_file
      archive_file = self.versions.last.changeset[:robots_file]
      if live_file != archive_file
        return mismatch
      end 
    end 
```

编辑：这是我在控制台中收到的错误消息。

```
NoMethodError: undefined method `versions' for nil:NilClass
from /Users/bendowney/sites/WatchApp/app/models/site.rb:14:in `compare'
from (irb):50
from /Users/bendowney/.rvm/gems/ruby-1.9.3-p194@WatchApp/gems/railties-3.2.5/lib/rails/commands/console.rb:47:in `start'
from /Users/bendowney/.rvm/gems/ruby-1.9.3-p194@WatchApp/gems/railties-3.2.5/lib/rails/commands/console.rb:8:in `start'
from /Users/bendowney/.rvm/gems/ruby-1.9.3-p194@WatchApp/gems/railties-3.2.5/lib/rails/commands.rb:41:in `<top (required)>'
from script/rails:6:in `require'
from script/rails:6:in `<main>' 
```

编辑：答案如下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T10:58:31.397

你们都问了正确的问题。他们让我思考。我对原始方法进行了两次更改，现在它可以工作了。我需要保存我下载的文件（下面的第 2 行），我忘记将我的“不匹配”状态用引号括起来。谢谢你的帮助！

```
def compare
  live_file = download_robots_file
  self.save
  archive_file = self.versions.last.changeset[:robots_file]
  if live_file != archive_file
    return "mismatch"
  end 
end 
```

# javascript - 为什么有时 scrollTop/scrollLeft 不可写？

> ID：11068507
> 
> 赞同：12
> 
> 时间：2012-06-17T02:31:29.267
> 
> 标签：javascript, html

我正在使用具有任务列表和图形图表的 dhtmlx 甘特图 UI 组件。任务列表和图形图表包含在两个独立的 div 元素中，它们同步用于并行滚动。通过滚动图表区域，任务列表会自动滚动，从而使任务行位置与甘特线位置匹配。

检查组件源代码，我发现同步是通过以下代码实现的：

```
this.oData.onscroll = function() {
    self.panelTime.scrollLeft = this.scrollLeft;
    self.panelNames.scrollTop = this.scrollTop;
}; 
```

UI 控件中的所有 HTML 标记都是由 JavaScript 动态生成的。一切都运行良好，除了渲染 800-ish 任务列表需要很长时间。

为了缩短渲染时间，我决定构建自己的服务器端渲染模块来生成与最初生成的客户端相同的 HTML 标记。此标记是使用普通 jquery $.get() 从客户端获取的，并使用 $(el).html() 注入到页面中。然后我将必要的事件处理程序作为原始客户端版本。

现在的问题是并行滚动不起作用。我可以在图表区域捕获滚动事件，但我无法设置任务列表区域的 scrollTop 属性。我在 firebug 中测试手动强制 scrollTop 属性，但值没有改变。似乎 scrollTop 属性是只读的。

对此有什么解释吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-17T06:02:48.460

您不能向下滚动到元素内容的底部（或右侧）下方。如果元素有`overflow: visible`（默认），或者至少与其内容一样大，那么两个滚动属性都将停留在 0。同样，即使有隐藏的东西可以滚动到视图中，你也不能滚动到最后；如果将 scrollTop 或 scrollLeft 设置为比有意义的值更大的值，它将减小到有意义的最大值。

我的猜测是在您的情况下，您试图在加载 div 的内容之前滚动它，并且它拒绝滚动，因为没有任何东西可以滚动到视图中。

# compiler-construction - SICP第5章词法寻址有什么好处？

> ID：11068508
> 
> 赞同：7
> 
> 时间：2012-06-17T02:31:30.227
> 
> 标签：compiler-construction, scheme, sicp, lexical

我现在正在阅读 SICP，并不太了解 5.5.6 SICP 的词法寻址中描述的词法寻址的必要性。

因为它说“因为我们的语言是词法​​范围的，所以任何表达式的运行时环境都将具有与出现表达式的程序的词法结构平行的结构”，我认为在运行中搜索变量的成本相同 -编译环境中搜索的时间环境。为什么我们要费心去实现一个编译环境？我认为编译环境将具有与程序的词法结构平行的相同结构，这与运行时环境相同，不是吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-17T03:52:17.150

词法寻址对于加速变量查找很有用。*如果没有词法寻址，查找变量需要在运行时*遍历当前环境的框架，或其封闭环境的框架等等——因为我们不知道变量绑定在哪里，如果有的话。这在书中提到：

> 到目前为止，我们的编译器已经实现了它，它生成使用评估器机器的查找变量值操作的代码。这通过将变量与当前绑定的每个变量进行比较来搜索变量，通过运行时环境逐帧向外工作。如果框架嵌套很深或变量很多，则此搜索可能会很昂贵。

相比之下，词法寻址查找的过程在*编译时**准确地*知道在哪里找到变量，从而大大减少了查找变量所需的时间：

 *> `lexical-address-lookup`将环境和由两个数字组成的词法地址作为参数：一个帧号，它指定要传递多少帧，以及一个位移号，它指定在该帧中要传递多少个变量。`Lexical-address-lookup`将产生存储在该词法地址相对于当前环境的变量的值。如果我们将`lexical-address-lookup`操作添加到我们的机器上，我们可以使编译器生成使用此操作引用变量的代码，而不是`lookup-variable-value`.*

# ruby-on-rails-3 - 使用 Devise 针对 current_user 检查资源

> ID：11068509
> 
> 赞同：0
> 
> 时间：2012-06-17T02:31:44.547
> 
> 标签：ruby-on-rails-3, devise

我正在使用 Rails 3 和 Devise 2.0

在 Posts 资源的索引视图中，我想显示一个投票按钮，除非 current_user 已经投票。

我只是将@posts = Post.all 传递到索引视图中。检查每个帖子以查看 current_user 是否已经投票并相应地呈现视图的最佳方法是什么？

我目前正在尝试通过`voted?`在我的 Post 模型中使用一个方法来做到这一点，但是 current_user 方法在那里不可用。

我看到的另一个解决方案是`if letter.votes.find_by_user_id(current_user.id)`在索引视图中，但我不确定这是否属于视图逻辑。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T02:43:21.947

一个好的解决方案是在您的模型或助手中实现一个方法，`Post`如下所示（假设 post has_many votes）：

```
def voted?(user)
  !votes.find_by_user_id(user.id).empty?
end 
```

然后，在你看来，你可以把`if post.voted?(current_user)`

你是对的，逻辑属于模型，模型不知道（也不应该）模型之外的任何东西，比如当前用户。您必须将其作为参数传递

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T07:49:23.883

你有一个`Post`，一个`Vote`和一个`User`模型

并且您想知道帖子何时获得特定用户的投票

一种方法可能是贾斯汀的方法，但这会产生过多的数据库查询而不是需要

更好的解决方案是使用这样的`has_many :through`关联：

```
class Post
  has_many :votes
  has_many :voted_users, through: :votes, source: :user
end 
```

现在你可以打电话`@posts = Post.includes(:voted_users)`

这将急切加载对每个帖子投票的所有用户

你可以说

```
if post.voted_users.include? current_user
  #do stuff
end 
```

# java - 将类从线程不安全迁移到线程安全

> ID：11068511
> 
> 赞同：2
> 
> 时间：2012-06-17T02:32:08.573
> 
> 标签：java, thread-safety, struts

## 背景

Apache [Action](http://struts.apache.org/1.x/struts-core/apidocs/org/apache/struts/action/Action.html)类不是线程安全的。然而，这只是在实现了一个基类之后才实现的，系统中的所有其他类都依赖于该基类。基类使用许多实例变量：

```
 private HttpServletRequest request;
  private ArrayList inputParams = new ArrayList();
  private Connection connection;
  private String outputParameter;
  private boolean exportEnabled; 
```

幸运的是，这些变量的所有使用都是通过访问器方法完成的。例如：

```
 public boolean getExportEnabled() {
    return this.exportEnabled;
  }

  public void setExportEnabled( boolean exportEnabled ) {
    this.exportEnabled = exportEnabled;
  } 
```

## 问题

基类在多线程 Servlet 环境中运行。

### 解决方案#1

为了解决这个问题，我正在考虑使用键控到会话的[HashMap 。](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/HashMap.html)但是，这需要重写所有方法和相关代码：

```
 private static HashMap sessionVariables = new HashMap();

  public boolean getExportEnabled( HttpSession session ) {
    return getSessionVariables().get( session.getId() + '.exportEnabled' );
  }

  public void setExportEnabled( boolean exportEnabled, HttpSession session ) {
    getSessionVariables().put( session.getId() + '.exportEnabled', exportEnabled );
  } 
```

这是很多工作，并且可能会引入错误。

### 解决方案#2

可以将基类更改为“空”类。这个空类只有一个方法：

```
 public ActionForward execute(
    ActionMapping mapping,
    ActionForm form,
    HttpServletRequest request,
    HttpServletResponse response )
    throws Exception {

    // Instantiate "this" and forward the request?
  } 
```

但它必须知道要实例化的适当基类，或者可能实例化自身的新版本来处理调用。

### 更新#1

我相信 Struts 架构可以做到以下几点：

1.  创建 Action 子类的实例。
2.  为每个请求重复使用相同的实例。
3.  接收新连接时获取线程（从线程池中）。
4.  `execute`从线程调用Action 子类。
5.  使用不同的线程处理多个新连接。

相同的`execute`方法将在对象的相同实例上调用，导致不安全的行为，因为子类具有实例变量。

### 更新#2

以下解决方案似乎可以解决问题：

```
 public ActionForward execute(
          ActionMapping mapping,
          ActionForm form,
          HttpServletRequest request,
          HttpServletResponse response ) throws Exception {
      ((MyClass)clone()).executeClone( mapping, form, request, response );
  }

  public ActionForward executeClone(
          ActionMapping mapping,
          ActionForm form,
          HttpServletRequest request,
          HttpServletResponse response ) throws Exception {

      // Former "execute" method code goes here.
      // ...
  } 
```

原来的`execute`方法被重命名为`executeClone`. 新的`execute`实现创建了当前类的克隆并随后调用`executeClone`. 这种微创技术避免了引入新的错误，同时使类线程安全。

## 问题

什么是使代码线程安全同时最小化引入错误的风险的最可靠方法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T02:53:29.287

> 什么是使代码线程安全同时最小化引入错误的风险的最可靠方法？

对此没有一般性的答案。使类线程安全需要做什么取决于该类的功能、它的 API 设计……以及您需要的线程安全级别。在某些情况下，使某些东西成为线程安全的东西甚至是不切实际的。例如，阅读 javadoc`Collections.synchonizedList`并了解它如何处理该`iterator()`方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T07:24:19.940

解决方案#1 是危险的，因为它假定会话是线程安全的，但情况并非如此。有人可能在同一个会话中同时发出两个请求。

解决方案 #2 可以通过让您的基类实现来轻松实现`Cloneable`。然后它可以克隆自己，设置克隆的实例变量，然后调用`super.execute()`. 如果您认为更改设计以使您的基类成为适当的线程安全太难了，那么这可能是一个简单的出路。

# jsf - 在 jsf 中实现动态面包屑

> ID：11068514
> 
> 赞同：1
> 
> 时间：2012-06-17T02:32:45.483
> 
> 标签：jsf, stack, breadcrumbs

我有几个 jsf 页面。我需要将动态面包屑添加到 header.xhtml。所以到目前为止，我能够获取当前页面的 url。在 header.xhtml 中，我将它们推入堆栈。因此，每当新页面出现时，header.xhtml 很常见，它会将当前 url 推送到堆栈变量。

我可以遍历堆栈并弹出 url 并显示它们。但我对其余的感到困惑。每当用户向后退时我必须弹出，我该如何实现呢？如果用户退后一步，我必须弹出两次。

我在正确的轨道上吗？还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T07:00:32.967

我只是添加了一个如果。如果重复，则只需弹出其余部分。现在面包屑工作。现在的问题是它只列出了所有链接。如果每次我去根，我希望树路径从那里开始..

# c++ - 改进 13 参数构造函数

> ID：11068521
> 
> 赞同：11
> 
> 时间：2012-06-17T02:34:41.043
> 
> 标签：c++, parameters, constructor

感谢 Microsoft 的 Intellisense 和 Atomineer 的 Atomineer Utils...所有这些参数都是*必需的和不可变*的。

有一个更好的方法吗？

```
/**************************************************************************************************
 * <summary>Initializes a new instance of the ADTBattleCharacter class.</summary>
 * <param name="name">         The name of the character.</param>
 * <param name="max_HP">       The maximum hit points.</param>
 * <param name="max_MP">       The maximum magic power.</param>
 * <param name="strength">     The strength.</param>
 * <param name="agility">      The agility.</param>
 * <param name="attack_power"> The attack power.</param>
 * <param name="defense_power">The defense power.</param>
 * <param name="gold">         The gold carried by the character.</param>
 * <param name="experience">   The experience the character is worth.</param>
 * <param name="stop_resist">  The character's resistance to stopspell.</param>
 * <param name="sleep_resist"> The character's resistance to sleep.</param>
 * <param name="hurt_resist">  The character's resistance to hurt/hurtmore.</param>
 * <param name="spell_list">   Available spells.</param>
 **************************************************************************************************/
ADTBattleCharacter(std::string name, unsigned char max_HP, unsigned char max_MP,
                   unsigned char strength, unsigned char agility,
                   unsigned char attack_power, unsigned char defense_power,
                   unsigned short gold, unsigned short experience,
                   double stop_resist, double sleep_resist, double hurt_resist,
                   std::bitset<SPELL_MAX> spell_list); 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-06-17T02:53:46.867

看看你的具体情况，在我看来你没有很好地解决问题。

从概念上讲，系统中的角色具有：

*   一个名字。
*   一个统计数据块，包含他们的基本统计数据（HP、防御等）。
*   角色的次要属性（经验）。
*   一个清单，其中可能包括他们当前的法术列表和他们的黄金，以及其他可能的东西。

那是 4 个参数，而不是 13 个。当你编写一个函数时，你看到它需要大量的参数，很可能其中一些参数在概念上是相互关联的。*其他*函数想要使用这些链接参数的可能性也很大。

例如，您可能想要显示一个角色的统计数据块。这样做的功能真的需要*字符*吗？不; 它只需要 stat 块。所以它应该需要一个统计块对象。

就像角色的构造函数一样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T02:46:40.230

更好的方法是使用[Builder 设计模式](http://en.wikipedia.org/wiki/Builder_pattern)。或者，更简单地说，您可以声明一个类，其中包含当前构造函数的所有参数的字段。参数类本身可以有一个构造函数（或多个构造函数），将字段初始化为合理的默认值，您可以通过直接访问字段来更改值。然后要么在参数类中实现一个函数来构造你的对象，要么定义一个接受参数类实例的对象构造函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T02:41:35.037

如果目标只是减少提供给构造函数的参数数量，有很多方法可以实现。真正的问题是，正如我从第一篇文章的评论中了解到的那样，是否有更简单的方法来管理参数。

使参数更易于管理的一种方法是使用通用数据结构来维护它们。地图之类的东西。

```
enum AttrTag { AT_Name, AT_Max_HP, AT_Max_MP, //...
               AT_Spells };

struct Attributes {
    typedef std::unique_ptr<AttrBase> AttrPtr;
    typedef std::map<AttrTag, AttrPtr> AttrMap;
    AttrMap attributes;

    template <AttrTag TAG>
    typename Attr<TAG>::value_type get_attr () const {
        AttrMap::const_iterator i = attributes.find(TAG);
        if (i != attributes.end()) return i->second->attr_cast<TAG>()->value;
        return Attr<TAG>::default_value;
    }

    template <AttrTag TAG>
    void set_attr (typename Attr<TAG>::value_type value) {
        attributes[TAG] = AttrPtr(new Attr<TAG>(value));
    }

    bool has_attr (AttrTag t) const {
        return attributes.find(t) != attributes.end();
    }

}; 
```

它会像这样使用：

```
Attributes attrs;
attrs->set_attr<AT_Gold>(100);
//...
ADTBattleCharacter(attrs);
//...
unsigned short g = attrs->get_attr<AT_Gold>(); 
```

`AttrBase`属性将从知道如何委派给实际属性的类中脱落。

```
template <AttrTag> struct Attr;

struct AttrBase {
    virtual ~AttrBase () {}
    template <AttrTag TAG> Attr<TAG> * attr_cast () {
        return dynamic_cast<Attr<TAG> *>(this);
    }
}; 
```

并且属性将通过专门`Attr`从`AttrBase`.

```
template <AttrTag TAG>
struct Attr : public AttrBase {
    typedef unsigned char value_type;
    enum { default_value = 0 };
    value_type value;
    Attr (value_type v) : value(v) {}
};

template <>
struct Attr<AT_Name> : public AttrBase {
    typedef std::string value_type;
    static std::string default_value;
    value_type value;
    Attr (value_type v) : value(v) {}
};

template <>
struct Attr<AT_Gold> : public AttrBase {
    typedef unsigned short value_type;
    enum { default_value = 1 };
    value_type value;
    Attr (value_type v) : value(v) {}
}; 
```

这允许在不增加构造函数的复杂性的情况下逐步添加新属性。此外，可以将相同的属性集合传递给不同的实体，每个实体只能对它们感兴趣的那些属性做出反应。只需要设置属性的子集。可以测试属性的存在，也可以使用默认值。如果要添加和删除动态属性，可以通过添加额外的地图来扩展容器来执行此操作。

# api - 使用 RESTful api 上传 OAuth 1.0 二进制数据

> ID：11068524
> 
> 赞同：1
> 
> 时间：2012-06-17T02:34:59.850
> 
> 标签：api, rest, oauth, binary, image

我有一个桌面应用程序，它通过他们的 RESTful api 和 OAuth 1.0 与 Web 服务交互。我可以很好地使用所有资源，身份验证，获取/发布调用来检索和发送简单的文本数据等，没有问题。

但是，我正在努力发送二进制数据。该服务允许发送图片。一方面，他们有一个非 OAuth api，您还可以通过它发送纯二进制文件，只需在 URL 中传递一些参数并将整个二进制文件放入帖子中。

现在通过 OAuth api 做到这一点，成为一个问题：

该服务指定帖子需要 2 个参数（不包含在 URL 中，因为这是 REST，但包含在 POST 参数中）：

```
image   A binary file, base64 data, or a URL
type    The type of file that's being sent in. Accepted values: file, base64, url 
```

所以我们有 2 个参数：图像包含文件本身，类型是“文件”来指定二进制文件。但是我应该如何通过 OAuth 将其包含在内？鉴于必须使用 -image- 和 -type- 参数（及其值）来生成签名的基本字符串，该字符串与 POST 中包含的参数相匹配。我不能将整个二进制文件包含在内图像参数的值；那么在这种情况下是如何完成的呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T02:47:36.383

nvm，他们的 OAuth api 期望文件作为 multipart/form-data 与变量存在，并且在签名的基本字符串中没有（他们的非 OAuth api 相反不需要多部分，所以我希望他们的 OAuth 也不会; 他们的文档在这方面有点缺乏）。

# f# - 使用 F# (Observable.StartWith) 中的“参数”调用泛型函数

> ID：11068527
> 
> 赞同：2
> 
> 时间：2012-06-17T02:35:42.520
> 
> 标签：f#

**编辑**：请注意，正如 Daniel 和 latkin 在下面的答案和评论中指出的那样，这个问题涉及 F# 中的一个错误，该错误似乎已在 2014 年初修复。

我正在尝试为 Observable.StartWith 编写一个咖喱包装器。我正在使用预发布的 Reactive Extensions 2.0 和 VS11 beta。我想要的结果是`startWith : 'a -> IObservable<'a> -> IObservable<'a>`. 显而易见的实现类似于：

```
let startWith 
        (value : 'a) 
        (observable : IObservable<'a>) 
        : IObservable<'a> =
    Observable.StartWith(observable, [| value |]) 
```

Observable.StartWith 的预期重载是`StartWith<'TSource>(source : IObservable<'TSource>, params values: 'TSource[]) : IObservable<'TSource>`.

编译器抛出一个令人困惑的错误：`This method expects a CLI 'params' parameter in this position. 'params' is a way of passing a variable number of arguments to a method in languages such as C#. Consider passing an array for this argument`.

我*正在*传递一个数组。我还尝试通过省略*不*传递数组，`[| |]`这会导致唯一重载解析失败。（大概是由于可能`'a`与`System.Reactive.Concurrency.IScheduler`其他重载匹配。）我还尝试使用 F# 2.0/VS2010，它给出了相同的结果。我找不到任何关于这种情况或编译器错误消息的在线讨论。

我想不出任何其他方式来实现这一点。请注意，在可以确定类型参数的情况下，这不是问题。例如，`let prependZero : int -> IObservable<int> -> IObservable<int> = fun n o -> o.StartWith(n)`工作正常。但是通用版本会很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T03:34:10.703

围绕泛型参数数组的类型推断似乎存在问题。即使是不涉及重载解析的简单案例也有问题：

```
type A() = 
  static member M<'T>([<ParamArray>] args: 'T[]) = args

//None of these work
let m1 arg = A.M([|arg|])
let m2 args = A.M(args)
let m3<'T> (args:'T[]) = A.M<'T>(args) 
```

非通用版本工作：

```
type B() = 
  static member M([<ParamArray>] args: obj[]) = args

//Both of these are okay
let m1 arg = B.M([|arg|])
let m2 args = B.M(args) 
```

### 编辑

我给 fsbugs 发了电子邮件，他们回复说这是一个错误。以下是他们建议的一些解决方法。

```
let m1 arg = A.M<obj>([|arg|])
let m2 args = A.M<obj>(args)
let m3 (args:obj[]) = A.M<obj>(args)
let m4 (arg:obj) = A.M<obj>(arg)
let m5 arg1 arg2 = A.M<obj>(arg1,arg2)
let m6 (arg1:'T) = A.M<'T>(arg1)
let m7 (arg1:'T) (arg2:'T) = A.M<'T>(arg1,arg2)
let m8 (arg1:'T) (arg2:'T) = A.M(arg1,arg2)
let m9 (arg1:'T) = A.M(arg1)
let m10<'T> arg1 arg2 = A.M<'T>(arg1,arg2)
let m11<'T> (arg1:'T) (arg2:'T) = A.M<'T>(arg1,arg2) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T04:35:56.983

您不需要将您的 single 包装`value`到单个元素数组中以使其匹配 的最后一个`ParamArray`参数`Observable.StartWith`，只需标量值即可（[这些示例](https://stackoverflow.com/q/11074227/917053)可能有助于理解原因）。

但是泛型类型`value`在两个可用的重载之间产生了歧义`Observable.StartWith`。可以通过强制[三个参数重载](http://msdn.microsoft.com/en-us/library/hh229372(v=vs.103).aspx)来实现消歧，方法是将两个参数重载中的隐式类型显式放置`IScheduler`到参数列表中，在 前面加上`value`，如下所示：

```
let startWith (value: 'a) observable =
    Observable.StartWith(observable, Scheduler.CurrentThread, value) 
```

现在您的代码应该可以编译并工作了。快速检查证实了这一点：

```
Observable.Range(1,2)
|> startWith 10
|> fun x -> x.Subscribe(printf "%d ") 
```

按预期输出`10 1 2`。

**更新**

对于 Rx 2.0 beta，`Scheduler`参考会略有不同，其余答案保持不变：

```
let startWith (value: 'a) (observable: IObservable<'a>) = 
    Observable.StartWith(observable, Concurrency.Scheduler.CurrentThread, value) 
```

# c# - 访问窗口资源内的命名元素

> ID：11068529
> 
> 赞同：3
> 
> 时间：2012-06-17T02:36:42.773
> 
> 标签：c#, wpf, xaml, resources

**问题：**

我正在尝试访问在窗口资源中定义的命名`Run`元素。`FlowDocument`为了澄清我的意思，请考虑以下代码：

```
<Window.Resources>
    <FlowDocument x:Key="doc">
        <Paragraph>
            <Run x:Name="run" />
        </Paragraph>
    </FlowDocument>
</Window.Resources> 
```

在这里，我将尝试访问`Run`名为“run”的元素。

**到目前为止我尝试过的：**

*   只需使用元素的名称即可访问它。但是，窗口资源中的命名元素显然不具有与窗口内容中定义的元素相同的默认可访问性，因为这种方法不起作用。

*   尝试向`Run`元素添加一个键，然后通过该`FindResource()`方法访问该元素。不幸的是，似乎无法将键添加到嵌套元素中。

*   下面的代码，它抛出一个`NullReferenceException`：

    ```
    FlowDocument doc = (FlowDocument)FindResource("doc");
    ((Run)doc.FindName("run")).Text = "example text"; 
    ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T04:16:25.753

您可以[`LogicalTreeHelper.FindLogicalNode`](http://msdn.microsoft.com/en-us/library/system.windows.logicaltreehelper.findlogicalnode.aspx)用作

```
 var doc = this.Resources["doc"] as FlowDocument;
 ((Run)LogicalTreeHelper.FindLogicalNode(doc, "run")).Text = "example text"; 
```

来自以上链接的备注：

> *   **FindLogicalNode**的搜索方向是朝向子对象（**树下**）；**FindName**方法的搜索方向是朝向父对象（**树上**）。
> *   FindName 方法受 XAML 名称范围的概念控制。使用 FindName 可以保证只有一个具有该名称的对象存在，因为 XAML 名称范围强制唯一性。相反，**FindLogicalNode 忽略 XAML 名称范围**，并且可能在搜索期间跨越 XAML 名称范围边界。

# jquery - jquery表单使用加载方法序列化

> ID：11068531
> 
> 赞同：1
> 
> 时间：2012-06-17T02:37:26.427
> 
> 标签：jquery

我想知道如何使用 jQuery LOAD 函数为表单提交 POST 数据，发送表单的序列化数据。

所以，举例来说，我该怎么做：

```
$('someElement').click(function(){
    var formData = $('formHere').serialize();
    $('anotherElement').load('somePage', formData);
)}; 
```

就目前而言，这不起作用 - 如果不会发布数据，而是发送 GET 请求。我不想开始使用 $.post 方法（因为我只是不想！），我在这里做错了吗？

解决方案：改用 serialiazeArray - 如

```
var formData = $('formHere').serializeArray() 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-07T06:05:46.710

**容易**：使用`serializeArray()`而不是`serialize()`。

`serialize()`返回一个字符串，而`serializeArray()`返回一个对象。`load()`如果数据是对象，则发送 POST。如果数据是字符串，则`load()`发送 GET。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-17T02:45:37.080

根据[jQuery 文档，`.load()`](http://api.jquery.com/load/#request-method)如果数据（在这种情况下`formData`是一个对象）似乎使用 POST 方法。否则它使用 GET。但是，[文档`.serialize()`](http://api.jquery.com/serialize/)表明它返回一个字符串。因此始终是 GET。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T02:55:22.407

如果您必须有一个帖子，请使用，`$.post`否则您需要使用 $.ajaxSettings 来配置全局 ajax。`$.load`, `$.get()`, `$.getJSON()`& `$.post`是一些方便的包装器，`$.ajax`其中一些选项已经考虑到以最小化所需的代码。

```
 $('someElement').click(function(){
    var formData = $('formHere').serialize();
    $.post('somePage', formData, function(data){
        $(selector).html(data);                                
    });
}); 
```

API 有使用`$(form).serialize()`with的示例`$.post`

[http://api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

# wpf - 为什么 WPF 中的许多属性都是“对象”而不是接口？

> ID：11068534
> 
> 赞同：10
> 
> 时间：2012-06-17T02:38:57.953
> 
> 标签：wpf

我可能遗漏了一些关于 WPF 设计基础的知识，但我想知道为什么 WPF 控件上的许多属性都暴露为“对象”类型？

例如，MenuItem.Icon 是一个对象，MenuItem.ToolTip 也是如此。作为一个几乎是第一次使用的用户，这让我非常困惑（感觉就像我在使用动态编程语言，不知道将 ToolTip 设置为 String 类型是否可行）。此外，我尝试将 Icon 设置为 'System.Drawing.Icon' 并得到“Argument 'picture' must be a picture that can be used as a Icon”的 ArgumentException。不应该键入属性，以便它至少可以描述你应该给它的世界吗？

老实说，我对原因的猜测是因为您无法在未创建的类型上实现接口（不创建包装器），但这只是猜测。

非常感谢您的回答和见解！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T03:32:33.700

我认为主要原因是因为[Object](http://msdn.microsoft.com/en-us/library/system.object.aspx)是“.Net Framework 中所有类的最终基类”。这为您提供了灵活性，在 WPF 中您不限于预定义的类型。Wpf 是不同的，并且有一个学习曲线，但它确实为您提供了更多选择来创建看起来不错的产品。

IE

您可以将 TextBox 分配给 ToolTip：

```
TextBox tb = new TextBox();
tb.Text = "Hello World";
this.ToolTip = tb; 
```

位图

```
BitmapImage myBitmapImage = new BitmapImage(new Uri((@"C:\Temp\20100706.jpg")));
Image image = new Image();
image.Source = myBitmapImage;
this.ToolTip = image; 
```

并将图像分配给 MenuItem

```
BitmapImage myBitmapImage = new BitmapImage(new Uri((@"C:\Temp\20100706.jpg")));
Image image = new Image();
image.Source = myBitmapImage;
menuItem1.Icon = image; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T10:16:22.893

考虑`ToolTip`例如。ToolTip 是一个[ContentControl](http://msdn.microsoft.com/en-us/library/system.windows.controls.contentcontrol.aspx)，它**可以包含任何类型的 CLR（公共语言运行时）对象**（例如字符串或 DateTime 对象）或`UIElement`对象（例如 Rectangle 或 Panel）。这使您可以向按钮和复选框等控件添加丰富的内容。

出于这个原因，诸如 的元素`ToolTip`被暴露为`Object`，这是类型层次结构的根（从而使代码易于使用、灵活和清晰）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T11:25:18.663

想象一下，这些属性被键入为*UIElements*（或其他一些 WPF 特定对象）。您将如何将对象添加到不是*UIElements*的控件？

您必须提供从 WPF 对象派生的包装器，以公开您需要的信息。大多数时候，包装器会简单地调用被包装对象的*ToString()*。鉴于您将使用的大多数类型都提供了足够好的*ToString()*的默认实现，因此只需调用它而不是让开发人员为所有内容编写包装器是有意义的。

其次，想象一下它们是否被键入为某个界面。如果您想传达此界面无法传达的内容怎么办？唯一的选择是 (a) 开发人员忍受框架的限制或 (b) 微软更新界面并破坏所有已经编写的现有代码。

还要考虑您是否使用像 MVVM 这样的模式。当前的设计意味着您的视图模型可以以任何方式公开与 WPF 无关的属性，这最终使您的代码在不同技术中更具可重用性。

最后，请记住，表示属性的对象与 WPF 呈现该信息的方式之间存在差异。例如，如果您使用诸如*System.String*之类的原始类型，WPF 将创建一个文本块并将 text 属性设置为*ToString()*的结果。这允许UI 显示的**数据与 UI****呈现**信息的方式之间非常清晰的分离。

以一个表示菜单项的简单类为例，例如：

```
public class MenuItem
{
    public string Text { get; set; }
    public bool IsChecked { get; set; }
    public bool IsEnabled { get; set; }
} 
```

此类型仅公开有关菜单项的数据，并且没有有关应如何呈现此信息的信息。实际上，除了类的名称 ( *MenuItem* ) 之外，这甚至不是特定于菜单项的，并且相同的数据可以在另一个 UI 控件中使用，例如选中的列表框，而无需进行任何更改。如果该类公开了 WPF 特定的用户界面元素，那么信息将需要由另一种类型来适应每个不同的用户界面控件。

# java - 刷新 JPanel-移动 JLabel

> ID：11068535
> 
> 赞同：1
> 
> 时间：2012-06-17T02:39:31.057
> 
> 标签：java, swing, layout, jlabel

我在跨此 JPanel 移动此 JLabel 时遇到问题？我把代码放在下面。基本上应该发生的是，名为“guy”的 JLabel 慢慢向右移动。唯一的问题是，JLabel 没有刷新它只是在我第一次移动它后消失了。

```
public class Window extends JFrame{

    JPanel panel = new JPanel();
    JLabel guy = new JLabel(new ImageIcon("guy.gif"));
    int counterVariable = 1;

    //Just the constructor that is called once to set up a frame.
    Window(){
        super("ThisIsAWindow");
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        add(panel);
        panel.setLayout(null);
    }

    //This method is called once and has a while loop to  exectue what is inside.
    //This is also where "counterVariable" starts at zero, then gradually
    //goes up. The variable that goes up is suposed to move the JLabel "guy"...
    public void drawWorld(){
        while(true){
            guy.setBounds(counterVariable,0,50,50);
            panel.add(guy);
            counterVarialbe++;
            setVisible(true);
            try{Thread.sleep(100)}catch(Exception e){}
        }

    } 
```

关于为什么在我更改变量“counterVariable”后 JLabel 只是消失而不是向右移动的任何想法。-谢谢！:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T02:51:04.780

您的代码导致在 Swing 事件线程上运行一个长时间运行的进程，这会阻止该线程执行其必要的操作：绘制 GUI 并响应用户输入。这将有效地使您的整个 GUI 进入睡眠状态。

问题与建议：

*   永远不要调用`Thread.sleep(...)`Swing Event Dispatch Thread 或 EDT。
*   永远不要`while (true)`在 EDT 上有一个。
*   而是使用[Swing Timer](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)来完成所有这些工作。
*   无需继续将 JLabel 添加到 JPanel。一旦添加到 JPanel，它就会保留在那里。
*   同样，无需继续调用`setVisible(true)`JLabel。一旦可见，它仍然可见。
*   `repaint()`在移动 JLabel 后调用容器，以请求重新绘制容器及其子项。

例如，

```
public void drawWorld(){
  guy.setBounds(counterVariable,0,50,50);
  int timerDelay = 100;
  new javax.swing.Timer(timerDelay, new ActionListener() {
    public void actionPerformed(ActionEvent evt) {
      countVariable++;
      guy.setBounds(counterVariable,0,50,50);
      panel.repaint();
    }
  }).start;
} 
```

警告：代码未以任何方式编译、运行或测试

# facebook - 如何使用其 C# SDK 更新 Facebook 访问令牌

> ID：11068538
> 
> 赞同：3
> 
> 时间：2012-06-17T02:41:30.667
> 
> 标签：facebook, facebook-c#-sdk

我正在使用 Facebook C# SDK 从 Facebook 获取尽可能多的数据，例如帖子、评论、用户信息，但是我的程序在我的访问令牌在一段时间后过期后停止，我必须重新启动程序。我从[Facebook 开发者工具](https://developers.facebook.com/tools/access_token/)中获得了访问令牌，但如何更新令牌？它是[http://csharpsdk.org/docs/web/handling-expired-access-tokens](http://csharpsdk.org/docs/web/handling-expired-access-tokens)中的 TOTO 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T04:40:43.280

这对我有用：

```
public static string RefreshAccessToken(string currentAccessToken)
{
        FacebookClient fbClient = new FacebookClient();
        Dictionary<string, object> fbParams = new Dictionary<string, object>();
        fbParams["client_id"] = "your app id";
        fbParams["grant_type"] = "fb_exchange_token";
        fbParams["client_secret"] = "your client secret";
        fbParams["fb_exchange_token"] = currentAccessToken;            
        JsonObject publishedResponse = fbClient.Get("/oauth/access_token", fbParams) as JsonObject;
        return publishedResponse["access_token"].ToString(); 
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T10:36:21.683

这是我用来获得更长过期令牌的方法

```
FacebookClient fbcl = new FacebookClient(atoken);
fbcl.AccessToken = //your short access token;
fbcl.AppId = //your app id;
fbcl.AppSecret = // your app secret;

//try to get longer token
try
{
    dynamic result= fbcl.Get("oauth/access_token?client_id=APP_ID&client_secret=APP_SECRET&grant_type=fb_exchange_token&fb_exchange_token=" + atoken);
    atoken = result.access_token;
}
catch
{
    dynamic result= fbcl.Get("oauth/access_token?client_id=APP_ID&client_secret=APP_SECRET&grant_type=fb_exchange_token&fb_exchange_token=" + atoken);
    atoken = result.access_token;
} 
```

有时这会发出诸如“无法与 FB 建立安全 SSL 连接”之类的错误。所以我再次尝试捕捉。也许你可以解决这个问题并帮助我:) 干杯

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-06-29T04:20:03.577

我终于通过offline_access权限破解了这个问题，你可以先参考这个：http: [//operatorerror.org/2011/07/get-a-facebook-api-access-token-that-never-expires/](http://operatorerror.org/2011/07/get-a-facebook-api-access-token-that-never-expires/) ，你将知道如何获取永不过期的 Facebook API 访问令牌。

接下来，如果您遇到无法检查offline_access权限的问题，您可以参考：[offline_access permission not present in Graph api explorer in facebook graph api](https://stackoverflow.com/questions/8988809/offline-access-permission-not-present-in-graph-api-explorer-in-facebook-graph-ap)

# macos - NSWindowController——在窗口显示之前得到通知？

> ID：11068540
> 
> 赞同：2
> 
> 时间：2012-06-17T02:41:41.880
> 
> 标签：macos, cocoa, nswindowcontroller

我有一个包含在 nib 文件中的窗口，该窗口由这样的自定义子类加载`NSWindowController`：

```
- (id)init
{
    self = [super initWithWindowNibName:@"MyWindow"];

    return self;
} 
```

我想在它变得可见之前初始化这个窗口中的视图。现在我正在阅读一些用户默认值并将窗口的视图设置为`windowDidLoad`. 但不幸的是，新初始化的值仅在窗口变得可见后才应用，导致未初始化的值非常短暂地闪烁。

`windowWillLoad`不起作用，因为此时尚未从 nib 文件加载窗口。

如何在窗口显示之前对其进行初始化？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T02:54:57.477

你可以做你自己的[“ `showWindow`”](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSWindowController_Class/Reference/Reference.html#//apple_ref/occ/instm/NSWindowController/showWindow%3a)方法。

```
- (IBAction)showWindow:(id)sender
{
    // do whatever initialization 
    // or window UI setup you 
    // need to do right here
    [super showWindow: sender];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T08:25:11.517

`- (void)awakeFromNib`是进行视图设置的好地方。在所有对象都已取消归档并已连接出口后调用它。

[文档中的](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Protocols/NSNibAwaking_Protocol/Reference/Reference.html)更多信息

# html - 删除 2px 灰色边框环绕边缘 IE9

> ID：11068543
> 
> 赞同：3
> 
> 时间：2012-06-17T02:42:52.243
> 
> 标签：html, css, internet-explorer, border

我正在尝试编写此站点的代码（尝试使用关键字），并且正在尝试弄清楚如何删除`2px`延伸到 IE9 窗口内部（至少是顶部、左侧和底部）的灰色阴影边框。我的页边距设置为零，所以我所有的页面元素都到了页面的最边缘，但是在 IE9 中，它们停在这个灰色边框上。我没有在我的 html 中包含任何代码，以便在浏览器边缘周围有一个 2px 的灰色边框。

我不知道为什么在 IE9 中会发生这种情况，而且似乎只有我的网页（其他网页似乎没有），但它弄乱了格式，我真的需要弄清楚如何删除它。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T04:00:26.993

您没有指定文档类型，正如第一行的注释所表明的那样：

```
<!-- Do NOT put any DOCTYPE here unless you want problems in IEs. --> 
```

因此，IE9 进入“怪癖模式”。添加正确的文档类型，它应该返回标准模式并删除烦人的灰色边框。您可以通过打开开发者工具 (F12) 来测试这个问题，并将文档模式从 Quirks 模式更改为 IE9 标准。

示例 HTML5 文档类型：

```
<!DOCTYPE html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T04:29:17.197

Charlie 在评论中问道：“你有没有尝试在你的 CSS 中将border:0 设置为 *？” 这实际上包括问题的替代答案。更具体地说，以下内容删除了边框：

```
html { border: 0; } 
```

# objective-c - XCode 中的文件命名约定

> ID：11068545
> 
> 赞同：2
> 
> 时间：2012-06-17T02:43:22.853
> 
> 标签：objective-c, xcode

在 WWDC 时，我注意到其中有一个文件命名约定。这是我以前从未见过的演示之一。该示例具有：

```
AppDelegate.h
AppDelegate.m
AppDelegate_animation.m 
```

_animation 文件似乎包含所有与动画相关的代码。

这个命名约定是否记录在任何地方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T02:51:09.763

我没有看到任何关于下划线的文档，但这是一个好的开始： [https ://developer.apple.com/library/iOS/#documentation/Cocoa/Conceptual/CodingGuidelines/Articles/NamingBasics.html](https://developer.apple.com/library/iOS/#documentation/Cocoa/Conceptual/CodingGuidelines/Articles/NamingBasics.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T02:53:29.413

我认为苹果在记录诸如命名目标代码文件之类的任意内容方面并没有很多..

这是一个有趣的想法，甚至不使用类别，只是将目标代码拆分出来并让相同的头文件负责它们。（我个人更喜欢分类，好像是一个更正式的界面）

IE：

```
AppDelegate+Animations.h
AppDelegate+Animations.m 
```

# html-parsing - 使用 JSoup 解析输入元素

> ID：11068546
> 
> 赞同：3
> 
> 时间：2012-06-17T02:43:47.103
> 
> 标签：html-parsing, jsoup

JSoup用于解析以下html

```
<input type="checkbox" id="id12" name="renewalCheckboxGroup" value="check1" class="wicket-id11" /> 
```

这是JSoup的代码

```
 Document document = Jsoup.parse("<input type=\"checkbox\" id=\"id12\" name=\"renewalCheckboxGroup\" value=\"check1\" class=\"wicket-id11\" />");
    System.out.println(document.id()); 
```

**预期结果应该是 id12，但是，返回的 id 是一个空字符串。** 我也尝试调用属性（“id”）函数，但仍然是徒劳的。如何解决？谢谢你

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-17T05:30:30.430

据我所知，您应该从中选择/查找/提取您想要`Element`的`document`，然后才能访问其属性（`id`例如）

你有几个选择：

```
Elements inputs = document.getElementsByTag("input"); //then access the one at 0 index 
```

或者

```
Element input = doc.getElementById("id12"); 
```

或者

```
Elements inputs = doc.select("input[name=renewalCheckboxGroup]"); //then access the one at 0 index 
```

查看文档以获取更多选项...

[使用选择器语法查找元素](http://jsoup.org/cookbook/extracting-data/selector-syntax)

[使用 DOM 方法导航文档](http://jsoup.org/cookbook/extracting-data/dom-navigation)

# iphone - iOS 应用程序在运行前崩溃

> ID：11068550
> 
> 赞同：0
> 
> 时间：2012-06-17T02:44:02.087
> 
> 标签：iphone, xcode, crash

我正在开发我的应用程序，它运行良好。我对代码做了一些小的改动（我已经撤消了这些改动以测试它们是否应该受到责备）并且它在运行时开始崩溃。它似乎在运行我的代码或在线程中加载视图之前就崩溃了`com.apple.main-thread`

调试器在这里中断

```
libsystem_kernel.dylib`__pthread_kill:
0x3619a324:  mov    r12, #328
0x3619a328:  svc    #128
0x3619a32c:  blo    0x3619a344               ; __pthread_kill + 32
0x3619a330:  ldr    r12, [pc, #4]
0x3619a334:  ldr    r12, [pc, r12]
0x3619a338:  b      0x3619a340               ; __pthread_kill + 28
0x3619a33c:  stceq  p12, c9, [lr, #896]
0x3619a340:  bx     r12                      
0x3619a344:  bx     lr 
```

在线上

```
0x3619a32c:  blo    0x3619a344               ; __pthread_kill + 32 
```

我认为这可能是我更改的代码中的某些内容我错过了，所以我从一个月前提取了一个在异地备份的版本，这是 App Store 上当前版本使用的 IDENTICAL 代码，但它在同一个地方崩溃.

这一定与 iPhone 本身有关，因为这两个版本的代码在 iPhone 模拟器中运行良好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T02:48:03.580

您是否尝试过重新启动 iPhone？我发现有时当你遇到奇怪的崩溃时你需要这样做。没有太多真正的答案，但您没有提到您是否重新启动了设备。

# py2app - py2app-“包含”和“包”变量有什么区别？

> ID：11068551
> 
> 赞同：7
> 
> 时间：2012-06-17T02:44:06.660
> 
> 标签：py2app

我正在尝试使用 py2app 为 Mac OS X 打包一个 Linux 程序。我的 setup.py 看起来像这样：

```
"includes": "sip,numpy,cherrypy,cPickle,md5,logging,shutil,xml.sax,PyQt4,PyQt4.QtCore",
"resources": "mnemosyne",
"iconfile": "pixmaps/mnemosyne.icns",
"packages": "mnemosyne,mnemosyne.pyqt_ui,mnemosyne.libmnemosyne,mnemosyne.libmnemosyne.translators,mnemosyne.libmnemosyne.card_types,mnemosyne.libmnemosyne.databases,mnemosyne.libmnemosyne.file_formats,mnemosyne.libmnemosyne.filters,mnemosyne.libmnemosyne.loggers,mnemosyne.libmnemosyne.plugins,mnemosyne.libmnemosyne.renderers,mnemosyne.libmnemosyne.render_chains,mnemosyne.libmnemosyne.schedulers,mnemosyne.libmnemosyne.controllers,mnemosyne.libmnemosyne.ui_components,mnemosyne.libmnemosyne.statistics_pages,mnemosyne.libmnemosyne.review_controllers,mnemosyne.libmnemosyne.criteria,mnemosyne.libmnemosyne.upgrades,mnemosyne.script,mnemosyne.webserver,openSM2sync,openSM2sync.binary_formats,openSM2sync.text_formats" 
```

但我意识到我也可以包含这样的模块：

```
"includes": "sip,numpy,cherrypy,cPickle,md5,logging,shutil,xml.sax,PyQt4,PyQt4.QtCore,mnemosyne.pyqt_ui.*,mnemosyne.libmnemosyne.*,mnemosyne.libmnemosyne.translators.*,mnemosyne.libmnemosyne.card_types.*,mnemosyne.libmnemosyne.databases.*,mnemosyne.libmnemosyne.file_formats.*,mnemosyne.libmnemosyne.filters.*,mnemosyne.libmnemosyne.loggers.*,mnemosyne.libmnemosyne.plugins.*,mnemosyne.libmnemosyne.renderers.*,mnemosyne.libmnemosyne.render_chains.*,mnemosyne.libmnemosyne.schedulers.*,mnemosyne.libmnemosyne.controllers.*,mnemosyne.libmnemosyne.ui_components.*,mnemosyne.libmnemosyne.statistics_pages.*,mnemosyne.libmnemosyne.review_controllers.*,mnemosyne.libmnemosyne.criteria.*,mnemosyne.libmnemosyne.upgrades.*,mnemosyne.script.*,mnemosyne.webserver.*,openSM2sync.*,openSM2sync.binary_formats.*,openSM2sync.text_format.*",
"resources": "mnemosyne",
"iconfile": "pixmaps/mnemosyne.icns", 
```

我不是编码员，所以我真的不明白这里发生了什么。什么时候应该使用“includes”，什么时候应该使用“packages”？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-18T11:06:41.627

您不需要明确命名您在该`include`字段中导入的所有内容。py2app 有一个依赖walker，它将能够告诉你使用了什么并自动为你捆绑它。它并不总是适用于每个模块，因此`include`可以`exclude`微调流程。`exclude`如果 py2app 捆绑了一些您不使用的额外位，则使用；您可以解压缩 Contents/Resources/lib/pythonX.X/site-packages.zip 以查看应用程序中包含的内容。

此外，我相信`include`包括额外的 python 模块，这些模块没有自动包含`packages`在该位置中的所有内容，而不仅仅是 python 位 - 所以这些位置中的任何和所有文件和文件类型。（我找不到链接或任何东西来确认这一点，但根据我的经验，这是我所理解的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-18T10:08:44.580

它们应该分别用于模块和包，它在`py2app`选项参考中这样说：

[https://pythonhosted.org/py2app/options.html](https://pythonhosted.org/py2app/options.html)

根据[http://www.network-theory.co.uk/docs/pytut/Packages.html](http://www.network-theory.co.uk/docs/pytut/Packages.html) ，包是“带点的模块名称” （在本主题中找到参考：[Python 模块和 Python 包有什么区别？](https://stackoverflow.com/questions/7948494/whats-the-difference-between-a-python-module-and-a-python-package)）。

# oracle - 从 DB 中检索变量名称

> ID：11068555
> 
> 赞同：0
> 
> 时间：2012-06-17T02:45:17.173
> 
> 标签：oracle, plsql, oracle10g

我有 Oracle DB 10g，我创建了一个设置表，其中包含我的应用程序函数和每个函数变量。

我需要在运行时将变量值插入到调试表中，因此我在第一个表中定义了我需要将它们插入调试表中的变量名称。

例如，我需要插入名为`L_sEmpSalary`.

问题是我正在从名为 example 的变量中的设置表中获取变量名`L_sVarName`。该变量`L_sVarName`现在包括`L_sEmpSalary`我想在数据库中插入它的值的变量

所以我需要获取一个`L_sEmpSalary`存储在 variable 中的变量值`L_sVarName`。

以下是示例代码：

```
declare
   L_sEmpSalary Number :=500; 
   Sql_Statment Varchar2(500); 
Begin 
   For Rec In GetVars Loop 
      L_sVarName:=Rec.Var_Name; 
      /* L_sVarname is Holding now variable 'L_sEmpSalary' which i need to get it's value which is 500*/ 
      Sql_Statment:= ' select :var from dual '; 
      EXECUTE IMMEDIATE Sql_Statment into L_sVarValue using L_sVarName; 
      DBMS_OUTPUT.PUT_LINE ( 'Var value = '||L_sVarValue); 
   End Loop;
end; 
```

我试过 DBMS_SQL 但没有运气，有什么想法吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T15:22:15.543

我想我理解你的问题，你不能`bind variable`在 select 子句中使用。
您可以使用连接：

```
 execute immediate 'select ' || l_svarname || ' from dual' into l_svarvalue; 
```

当然，您必须在查询的表中的 L_sEmpSalary 列中具有值 500（我假设在您的真实代码中它不是双重的）

例如：

```
Sql_Statment := 'with t as (select 500 L_sEmpSalary from dual) ' ||
                'select l_sVarName || ' from t' into l_sVarValue; 
```

虽然我可能仍然不太明白你想要做什么......

# z3 - 创建一个固定大小的数组并初始化它

> ID：11068561
> 
> 赞同：9
> 
> 时间：2012-06-17T02:47:00.310
> 
> 标签：z3

我将创建一个具有固定大小的数组并用一些值对其进行初始化。

例如，以下 C++ 代码：

```
a[0] = 10;
a[1] = 23;
a[2] = 27;
a[3] = 12;
a[4] = 19;
a[5] = 31;
a[6] = 41;
a[7] = 7; 
```

Z3 中是否有一些实用程序可以对其进行建模？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-17T06:37:07.993

Z3 支持数组理论，但通常用于编码无界数组或非常大的数组。大，我的意思是公式中的数组访问（即选择）的数量远小于数组的实际大小。我们应该问自己：“我们真的需要数组来建模/解决问题 X 吗？”。对于您示例中的固定大小数组，我们可以为每个数组位置使用不同的变量。示例：`a0`for `a[0]`，`a1`for`a[1]`等。当然，如果我们不使用理论，那么对数组访问进行编码，例如`a[i]`必须编码为一个大的 if-then-else 术语，例如

`(ite (= i 0) a0 (ite (= i 1) a1 ...))`

如果数组大小已知且很小，那么这通常是编码问题的最有效方法。

另一方面，如果您决定使用数组理论，则可以将问题中的初始化编码为：

```
(declare-const a (Array Int Int))
(assert (= (select a 0) 10))
...
(assert (= (select a 7) 7)) 
```

以下是以 SMT 2.0 格式编码的整个示例：

[http://rise4fun.com/Z3/iwo](http://rise4fun.com/Z3/iwo)

请注意，要对此数组的更新进行编码。比如 C 语句`a[3] = 5`，我们必须创建一个新的数组变量来表示这个赋值后的数组。最紧凑的方式使用`store`表达式：

```
(declare-const a1 (Array Int Int))
(assert (= a1 (store a 3 5))) 
```

这是更新的完整示例。

[http://rise4fun.com/Z3/Kpln](http://rise4fun.com/Z3/Kpln)

您也可以考虑 Python/C++/.Net API。它们使我们能够以更紧凑的方式对像您这样的示例进行编码。这个想法是实现对常用模式进行编码的函数，例如数组初始化。这是 Python 中的数组初始化示例：

[http://rise4fun.com/Z3Py/AAD](http://rise4fun.com/Z3Py/AAD)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-10-09T11:51:40.380

我同意莱昂纳多的[回答](https://stackoverflow.com/a/11069399)，尤其是数组旨在模拟大输入范围。没有真正的方法来定义固定大小的数组（除非您使用有限输入排序，例如`BitVecSort(3)`）。

由于 Z3Py (Python) 示例被删除，我想添加我自己的解决方案。此函数指定一系列数组条目，从起始地址开始。（断言存储在一个`Solver`对象中。）

```
def assert_array(solver, array, start_index, data):
    for offset in range(len(data)):
        solver.add(array[start_index + offset] == data[offset]) 
```

请注意，这是SMT 2.0 中`array[idx]`的 Z3Py 等效项。`(select array idx)`问题中的数组可以这样建模：

```
s = Solver()
a = Array('a', IntSort(), IntSort())
data = [10, 23, 27, 12, 19, 31, 41, 7]
assert_array(s, a, 0, data)

print s
#[a[0] == 10,
# a[1] == 23,
# a[2] == 27,
# a[3] == 12,
# a[4] == 19,
# a[5] == 31,
# a[6] == 41,
# a[7] == 7] 
```

# c++ - Printf 没有打印任何要输出的内容？C++ SDL

> ID：11068565
> 
> 赞同：17
> 
> 时间：2012-06-17T02:48:22.067
> 
> 标签：c++, visual-c++, sdl, printf

我试图在我的 Visual C++ 项目中使用“printf”，但它不起作用。使用 Lazy Foo 的教程，我在我的项目中设置了 SDL，但是当我玩它时， printf 没有做任何事情。

```
#include "SDL.h"
#include <stdio.h>

int main( int argc, char* args[] ) {
    printf("Testing");
    return 0;
} 
```

输出如下所示：

```
The program '[4664] SDL Testing.exe: Native' has exited with code 0 (0x0). 
```

就是这样。有什么问题？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-08T11:59:39.173

调出项目属性，转到链接器->系统->子系统并将其更改为第三个选项，CONSOLE。应该这样做

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-17T09:14:27.373

SDL 默认将标准输出重定向到一个文件，`stdout.txt`. 您应该在程序的工作目录中找到它。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-17T03:49:24.407

> 一切正常，我什至在屏幕上显示了一个图像，但是如果没有输出消息，我就无法编程

我认为这意味着您有一个可用的窗口，而不是控制台。

如果要将某些内容记录到输出窗口，请使用[`OutputDebugString`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363362%28v=vs.85%29.aspx)：

> 将字符串发送到调试器进行显示。
> 
> ```
> void WINAPI OutputDebugString(
>   __in_opt  LPCTSTR lpOutputString
> ); 
> ```
> 
> **标题** `WinBase.h`（包括`Windows.h`）

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-12-19T01:24:42.073

在`Linker -> System`项目的属性中，检查 SubSystem 是否为 `"Console (/SUBSYSTEM:CONSOLE)"`.

这会导致在您运行程序时弹出一个单独的控制台窗口。如果您当前的入口点不是主要的，那么如果您这样做，则需要将其更改为该入口点。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-06-18T13:13:23.073

尝试定义 NO_STDIO_REDIRECT。

```
#define NO_STDIO_REDIRECT 
```

如果这不起作用，请尝试此链接中的解决方案：[如何获取控制台输出而不是 stdout.txt 和 stderr.txt？](http://sdl.beuc.net/sdl.wiki/FAQ_Console).

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-06-17T03:00:57.643

Printf 通常需要换行符来更新控制台。在末尾添加一个 '\n' 字符并重新运行程序。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-17T02:54:45.903

您可能看不到输出，因为您是通过按 F5 从 Visual Studio 中运行程序，并且在程序退出后控制台窗口会关闭。

您可以做以下三件事之一 -
在 return 语句处设置断点。
在 return 语句之前放置一个 getchar() 语句。
通过按 Ctrl+F5 而不是 F5 来运行程序。

以上所有将导致控制台窗口保留在屏幕上。

您也可以直接从命令提示符 (cmd.exe) 运行 EXE。

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2012-06-17T07:03:13.370

当您运行/调试程序时，会有一个 Visual Studio 的输出窗口。您应该能够在该窗口中看到输出。

# php - PHP Crystal Reports，还是我应该放弃并使用其他东西

> ID：11068568
> 
> 赞同：0
> 
> 时间：2012-06-17T02:48:50.803
> 
> 标签：php, mysql, pdf-generation, crystal-reports-2008

我需要为我正在开发的 PHP\MySQL 站点创建 PDF 报告（按需和调度）。对于我办公室使用的其他一些软件，我对 Crystal Reports 2008 非常熟悉。但我从来不需要自己将它与任何东西整合在一起。

我在网上找到的文档很差，过去我对 com 对象从来没有过好运气。

有没有人在 PHP 和 Crystal Reports 上取得过任何成功（我已经连续 2 天搜索了一个不错的代码示例，看起来每个人都遇到了类似的问题），还是我应该放弃并寻找另一个解决方案？还有哪些其他解决方案保留了水晶的某些特性？（子报告、分组、公式等？）

# php - 查询返回 false 而不是资源

> ID：11068569
> 
> 赞同：0
> 
> 时间：2012-06-17T02:49:00.117
> 
> 标签：php, mysql

我有一个 mySQL 查询：

```
mysql_query("SELECT username_usr FROM user_usr WHERE username_usr=$name") 
```

我存储在变量中`$username_check`。然后我存储`mysql_fetch_array($username_check)`在一个变量中。

当我运行脚本时，我得到一个错误，mysql_fetch_array 需要一个资源，给定的布尔值；

我一定是犯了一些简单的错误，但通过 FSM 我找不到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T02:50:33.640

您的查询有语法错误，并且您得到一个布尔值 FALSE：

```
mysql_query("SELECT username_usr FROM user_usr WHERE username_usr='$name'")
                                                                  ^-----^--- missing 
```

永远不要假设查询成功。始终检查失败的返回值：

```
$result = mysql_query(...) or die(mysql_error()); 
```

是您应该始终拥有的最低限度。

# php - .htaccess RewriteCond，其中 URI 不包含域

> ID：11068570
> 
> 赞同：13
> 
> 时间：2012-06-17T02:49:04.063
> 
> 标签：php, regex, apache, .htaccess, mod-rewrite

我在 Google 和 StackOverflow 上四处寻找这个问题的答案，但我对 .htaccess 了解不多这一事实并不能帮助我确定适合我的情况的正确答案是什么，所以我在这里问。

我的情况是我有几个站点在服务器上使用相同的物理目录作为它们的根目录。

这一切都很好，但我想确保每个站点都无法从浏览器访问彼此的图像等，除非它们位于正确的域中。

目前我有一个这样的文件结构：

```
/resources/{resource}/{full_domain_name} 
```

因此，例如`www.domain.co.uk`会有这样的结构：

```
http://www.domain.co.uk/resources/images/www.domain.co.uk/some_image.jpg 
```

但是如果`www.domain_2.co.uk`存在使用相同的物理目录作为站点根目录，那么他们可以从自己的域中查看其他域的资源，如下所示：

```
http://www.domain_2.co.uk/resources/images/www.domain.co.uk/some_image.jpg 
```

这并不是一个真正的主要问题，因为这些目录中绝对没有存储任何敏感信息，但这更令人烦恼，我宁愿用户无法做到这一点（到目前为止，实际上没有人这样做）。

我尝试将 .htaccess 文件放入 /resources 目录，但我坚持使用正则表达式等。

我基本上想确保 URI 包含当前域名，否则重定向到 403 错误页面。

这就是我想出的：

```
RewriteCond %{REQUEST_URI} !^(/resources/[^/]*/%{HTTP_HOST})(.*)$
RewriteRule ^(.*)$ /error/403.php 
```

我放在`[^/]`位的原因是因为有几个文件夹，例如：

```
/resources/images/{full_domain_name}
/resources/scripts/{full_domain_name}
/resources/stylesheets/{full_domain_name} 
```

有人可以帮我解决这些条件吗？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-17T18:01:12.037

这是一个了不起的问题，如果可以的话，我会投票超过 10 次。即使您在这里有一个接受的答案，我也会发布我的答案，因为我真的必须挖掘我所有的 Apache 资源才能得出答案。这是解决此问题所需的规则：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST}:%{REQUEST_URI} !^([^:]+):/resources/[^/]+/\1/.+ [NC]
RewriteRule ^resources/[^/]+/[^/]+/.+ - [F,NC,NE] 
```

PS：由于我们不能使用`%`RHS 上的变量作为反向引用，我在这里使用特殊的正则表达式反向引用`\1`变量`RewriteCond`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-17T08:41:18.217

这个条件是不充分的：

```
RewriteCond %{REQUEUST_URI} !^(/resources/[^/]*/%{HTTP_HOST})(.*)$ 
```

因为如果我请求任何不以 开头的内容`/resources/`，我将得到 403.php 错误页面。你真正想要的是这样的：

```
RewriteCond %{REQUEST_URI} ^/resources/[^/]+/([^/]+)/
RewriteCond %{HTTP_HOST} !%1 
```

或者

```
RewriteCond %{REQUEST_URI} ^/resources/[^/]+/([^/]+)/
RewriteCond %{REQUEST_URI} !^/resources/[^/]+/%{HTTP_HOST}/ 
```

第一个条件是检查请求是否针对资源，然后第二个条件是检查主机。**但是**，这些都不起作用，因为 mod_rewrite 的`RewriteCond`指令不允许条件右侧的**%变量或反向引用，只有左侧。**同样，您也不能这样做：

```
RewriteCond %{REQUEST_URI} ^/resources/[^/]+/([^/]+)/
RewriteRule !^/resources/[^/]+/%{HTTP_HOST}/ /error/403.php 
```

因为 RewriteRule 的表达式中不能包含变量，因为它是一个正则表达式，并且它实际上期望 a`%{HTTP_HOST}`而不是用请求中给出的 Host 替换它。所以总而言之，不，你不能以这种方式使用 mod_rewrite 的条件来做到这一点。

如果您有权访问服务器配置或虚拟主机配置，您可以尝试创建一个[RewriteMap](http://httpd.apache.org/docs/current/rewrite/rewritemap.html)并同时传入`%{REQUEST_URI}`和`%{HTTP_HOST}`. 因此，如果您的地图被调用`check_host`，那么您的规则可能如下所示：

```
RewriteRule ^resources/[^/]+/([^/]+)/ ${check_host:%{HTTP_HOST}_%{REQUEST_URI}} 
```

您的脚本只需要解析输入，将其从第一个拆分`_`，解析请求 URI 并确保主机与 HTTP_HOST 相同。如果相同，则输出相同的请求URI，否则输出错误URI。如果您无权访问服务器或虚拟主机配置，我认为您不走运。不能在 htaccess 文件中定义 RewriteMap。

# android - 在 Android 中获取方向向量

> ID：11068571
> 
> 赞同：13
> 
> 时间：2012-06-17T02:49:28.103
> 
> 标签：android, vector, accelerometer, sensors, gyroscope

如何获得表示设备背面相对于地球坐标指向的方向的方向矢量？

例如，如果放在桌子上（屏幕朝上），它应该显示为 [0,0,-1]，如果垂直朝北放置，它应该显示为 [1,0,0]，等等。

我知道如何从航向、俯仰和滚动计算它，只要它们是相对于地球坐标的。在这里要清楚，我不是在寻找角速度，而是在寻找相对于与地球相切的平面的实际当前角度。因此，如果设备垂直并朝北，角度“alpha”应该是 0 或 360，角度“beta”应该是 90，而“gamma”应该是 0。我不知道如何获得这些值任何一个。

我整天都在阅读 API，但我仍然找不到如何获得这些东西。

```
public void onSensorChanged(SensorEvent event) {
    // ?    
} 
```

感谢您的任何见解。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-17T04:16:14.113

阅读此页面：http: [//developer.android.com/reference/android/hardware/Sensor.html](http://developer.android.com/reference/android/hardware/Sensor.html)

在 API 8 及更高版本中，存在“虚拟”传感器，它们是通过组合所有可用传感器和适当过滤器的输入而生成的。“TYPE_ORIENTATION”传感器为您提供设备的整体方向，但由于某些方向的故障状态，此界面已被弃用。新传感器是 TYPE_ROTATION_VECTOR（API 9 及更高版本），它将您的设备方向作为四元数。这确实是最好的传感器，但它背后的数学有点沉重。

如果做不到这一点，你要做的是调用 SensorManager.getRotationMatrix()，传递最新的重力和磁力计数据。这将返回一个旋转矩阵，可用于将向量从设备坐标转换为世界坐标，反之亦然（只需转置矩阵以反转它）。

getOrientation() 函数可以为您提供航向、俯仰和滚动，但这些具有与 TYPE_ORIENTATION 传感器相同的故障状态。

```
Examples:

  Device flat on a table, top facing north:
    1  0  0
    0  1  0
    0  0  1

  Tilted up 30 degrees (rotated about X axis)
    1   0      0
    0   0.86  -0.5
    0   0.5    0.86

  Device vertical (rotated about X axis), facing north:
    1  0  0
    0  0 -1
    0  1  0

  Device flat on a table, top facing west:
    0 -1  0
    1  0  0
    0  0  1

  Device rotated about its Y axis, onto its left side, top
  facing north:
    0  0 -1
    0  1  0
    1  0  0 
```

以下是一些您可能会觉得有用的示例代码：

```
public void onSensorChanged(SensorEvent event) {
    long now = event.timestamp;     // ns

    switch( event.sensor.getType() ) {
      case Sensor.TYPE_ACCELEROMETER:
        gData[0] = event.values[0];
        gData[1] = event.values[1];
        gData[2] = event.values[2];
        break;
      case Sensor.TYPE_MAGNETIC_FIELD:
        mData[0] = event.values[0];
        mData[1] = event.values[1];
        mData[2] = event.values[2];
        haveData = true;
        break;
    }

    if( haveData ) {
        double dt = (now - last_time) * .000000001;

        SensorManager.getRotationMatrix(R1, Imat, gData, mData);
        getOrientation(R1, orientation);
        pfdView.newOrientation(orientation[2], (float)dt);

        Log.d(TAG, "yaw: " + (int)(orientation[0]*DEG));
        Log.d(TAG, "pitch: " + (int)(orientation[1]*DEG));
        Log.d(TAG, "roll: " + (int)(orientation[2]*DEG));

        acft.compass = orientation[0];

        last_time = now;
    }
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-17T03:03:08.887

`SensorManager.getRotationMatrix()`做了下面概述的，在我发现之前写的。我会留下附加的解释，因为如果你想纠正磁北和真北之间的差异，你仍然需要它。

粗略的算法是获取旋转矩阵，将向量乘以`[0,0,-1]`它，然后将其调整到您的坐标系。为什么？Android 文档给出了设备和世界的坐标系

![设备](../Images/4c0d123603bf49223873c17a5c0b2b64.png)![世界](../Images/599d1201316ef2315bd3552755035f93.png)

注意`[0,0,-1]`Android 设备坐标点垂直向后远离屏幕。如果您将旋转矩阵 R 乘以该向量，`[0,0,-1]`则当设备按您希望的面朝上放在桌子上时，您将获得世界坐标。当它直立朝北时，你会得到`[0,-1,0]`，这表明你已经选择了一个坐标系，`x`并且`y`相对于 Android 系统进行了交换，但这只是约定的改变。

注意`R * [0,0,-1]^T`只是`R`否定的第三列。从这里我得到伪代码：

```
getRotationMatrix(R);
Let v = first three elements of third column of R.
swap v[0] and v[1] 
```

这应该得到你想要的。

以下是有关正在执行的操作的其他信息`getRotationMatrix()`。

* * *

您需要加速度计数据来确定“向下”方向，并且需要磁力计数据来确定“北”方向。您必须假设加速度计仅感应重力（设备静止或以稳定的速度移动）。然后您需要将磁力计矢量投影到垂直于重力矢量的平面上（因为磁场通常不与地球表面相切）。这为您提供了两个轴。第三个是正交的，因此可以通过叉积计算。这为您提供了设备系统中的地球坐标矢量。看起来你想要相反的：地球坐标中的设备坐标。为此，只需构建方向余弦矩阵并反转。

我将补充一点，上述讨论假设磁力计矢量指向北方。我认为（来自高中科学！）它实际上是朝着磁南方向，但手头没有设备所以不能尝试。当然，根据您在地球上的位置，磁北/南与真实的差异为零到 180 度。您可以检索 GPS 坐标并计算实际偏移量。

如果您不熟悉执行这些操作所需的数学，我可以进一步解释，但必须稍后再说。

# python - 使用python转义带有特殊字符的查询字符串

> ID：11068573
> 
> 赞同：0
> 
> 时间：2012-06-17T02:49:50.200
> 
> 标签：python, url, escaping, urllib2, urllib

我在这里通过抓取得到了一些非常混乱的 url，问题是它们在路径和查询字符串中包含空格或其他特殊字符，这是一些示例

```
http://www.example.com/some path/to the/file.html
http://www.example.com/some path/?file=path to/file name.png&name=name.me 
```

那么，是否有一种简单而可靠的方法来转义 url，以便我可以将它们传递给 urlopen？我尝试了 urlib.quote，但它似乎也逃避了查询字符串中的“？”、“&”和“=”，而且它似乎也逃避了协议，目前，我想做的是使用正则表达式分隔协议、路径名和查询字符串并将它们分别转义，但在某些情况下它们没有正确分隔任何建议都值得赞赏

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T03:10:28.090

urllib.quote 将引用除`/`默认值之外的所有内容。您可以将一个字符列表传递给它以单独作为第二个参数：

```
urllib.quote('http://www.example.com/some path/?file=path to/file name.png&name=name.me',
             '/:?&=')
'http://www.example.com/some%20path/?file=path%20to/file%20name.png&name=name.me' 
```

但这是半手动搞砸的相当棘手的事情。

# git - 为什么有些存储库 URL 以 .git 结尾，而另一些则没有？

> ID：11068576
> 
> 赞同：59
> 
> 时间：2012-06-17T02:50:36.653
> 
> 标签：git, url, github, git-clone

当我克隆存储库时，这两个 URL 之间有什么区别吗？

1.  没有 .git 扩展名：

    ```
    git clone http://foo/repo 
    ```

2.  使用 .git 扩展名：

    ```
    git clone http://foo/repo.git 
    ```

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-06-17T06:40:20.367

约定是*.git*扩展名应该用于裸存储库，并保留在具有工作树的目录中。Git 并不真正关心，但有一些方便的方法可以使这变得相当透明。

例如，如果您有一个名为**/tmp/foo.git**的存储库并且您调用`git clone file:///tmp/foo`，Git 将首先尝试查找**/tmp/foo**。如果它不存在，它将尝试**/tmp/foo.git**。

这反过来*不起作用*。如果您的目录名为**/tmp/foo**并且您尝试从**/tmp/foo.git**克隆，您将被告知：

> 致命：'/tmp/foo.git' 似乎不是 git 存储库

大多数 HTTP/HTTPS 功能来自您的 Web 服务器，而不是 Git。即使您使用的是[Smart HTTP transport](http://git-scm.com/2010/03/04/smart-http.html)，我怀疑大多数魔法都发生在服务器端 LocationMatch 指令中。抛开理论不谈，针对 GitHub 的一些快速测试表明它在这方面与 SSH 和 Git 协议的工作方式相同，但您的里程可能在其他 Web 服务器上有所不同。

# c# - 将 LINQ 添加到我的课程中

> ID：11068580
> 
> 赞同：12
> 
> 时间：2012-06-17T02:51:10.100
> 
> 标签：c#, linq

我想将 LINQ 支持添加到我的[Apple 属性列表](http://en.wikipedia.org/wiki/Property_list)（属性列表）解析器（二进制、JSON 和 XML）中，这样我就可以像使用`System.Xml`. 它通过完全解析文件并将其保存在堆上来工作。（喜欢`System.Xml`）。

我一直在谷歌搜索，似乎无法理解其中的任何内容（我得到了很多`Using LINQ to SQL Classes`页面）。[MSDN](http://msdn.microsoft.com/en-us/library/bb384470.aspx)上的指南，我也不明白。我需要做什么？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-17T03:23:27.167

实现 LINQ 仅仅意味着实现 LINQ 期望的方法，例如`Where`or `Select`，具有正确的签名。尽管有共同的看法，但您不必`IEnumerable`为您的类实现接口来支持 LINQ。但是，实现`IEnumerable`将*自动*为您提供类上的整套 LINQ 方法，`Enumerable`几乎​​是免费的——您只需要实现`GetEnumerator`一个`IEnumerator`类。

`IEnumerable`在我的博客上，有几个关于如何实现的示例，在这篇关于[迭代器模式的](http://blog.kutulu.org/2012/05/practical-patterns-2-iterators.html)文章中。

但是，如果您的类可枚举没有意义，则无需这样做。您只需要直接实现适当的 LINQ 方法。只要 C# 编译，LINQ 实际上并不关心方法是如何定义的。也就是说，如果你写：

```
from p in myPlist where p.Thing == "Thing" select p; 
```

C# 编译器将其转换为：

```
mpPlist.Where(p => p.Thing == "Thing").Select(p => p); 
```

只要编译成功，LINQ 就可以工作。要查看方法的正确签名，请查看 MSDN 文档的[LINQ 查询方法列表](http://msdn.microsoft.com/en-us/library/bb397896.aspx)。例如（假设您`PList`是`PListItem`s 的列表）：

```
public class PList
{
  public IEnumerable<PListItem> Where(Func<PListItem, bool> predicate)
  {
    foreach (var item in this.items)
    {
      if (predicate(item)) 
      {
        yield return item;
      }
    }
  }
} 
```

虽然以这种方式直接实现 LINQ 可以让您更好地控制它的行为方式，但要使其正确，还需*要做更多*的工作，并且您需要了解返回值的含义，以及链接 LINQ 调用等。一般来说，如果你可以让你的类实现`IEnumerable`并让 C# 为你完成所有工作，事情就会变得容易得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T03:04:34.913

您必须首先实现 IEnumerable。首先阅读 - [http://msdn.microsoft.com/en-us/library/9eekhta0.aspx](http://msdn.microsoft.com/en-us/library/9eekhta0.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T02:57:54.047

由于 LINQ to 对象适用于任何继承自 的类`IEnumerable<t>`，因此通过在您的类中继承该接口并定义 GetEnumerable 方法就足够了。

以下链接解释了如何实现 IEnumerable 接口（虽然它没有提到 LINQ，但它会起作用）： [http ://codebetter.com/davidhayden/2005/03/08/implementing-ienumerable-and-ienumerator-on-你的自定义对象/](http://codebetter.com/davidhayden/2005/03/08/implementing-ienumerable-and-ienumerator-on-your-custom-objects/)

# python - python raw_input 带有包含字符串的重音的奇怪行为

> ID：11068581
> 
> 赞同：3
> 
> 时间：2012-06-17T02:51:13.127
> 
> 标签：python, unicode, diacritics, raw-input

我正在编写一个程序，要求用户输入包含重音符号的输入。测试用户输入字符串以查看它是否与程序中声明的字符串匹配。如下所示，我的代码不起作用：

* * *

## 代码

```
# -*- coding: utf-8 -*-

testList = ['má']
myInput = raw_input('enter something here: ')

print myInput, repr(myInput)
print testList[0], repr(testList[0])
print myInput in testList 
```

* * *

## 用pydev在eclipse中输出

```
enter something here: má
m√° 'm\xe2\x88\x9a\xc2\xb0'
má 'm\xc3\xa1'
False 
```

* * *

## IDLE 输出

```
enter something here: má
má u'm\xe1'
má 'm\xc3\xa1'

Warning (from warnings module):
  File "/Users/ryanculkin/Desktop/delete.py", line 8
    print myInput in testList
UnicodeWarning: Unicode equal comparison failed to convert both arguments to Unicode - interpreting them as being unequal
False 
```

比较两个字符串时，如何让我的代码打印 True？

此外，我注意到在同一输入上运行此代码的结果会有所不同，具体取决于我使用的是 eclipse 还是 IDLE。为什么是这样？我的最终目标是将我的程序放到网上；有什么我需要注意的吗，因为结果似乎如此不稳定？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-17T04:06:36.350

您遇到的是`raw_input`给您一个字节字符串，但您要比较的字符串是一个 Unicode 字符串。Python 2 尝试将它们转换为通用类型以进行比较，但这失败了，因为它无法猜测字节字符串的编码 - 因此，您的解决方案是显式地进行转换。

通常，您应该将程序中的所有字符串作为 unicode 字符串保持浮动 - 您以字节形式读取的任何内容都会立即转换为 unicode；您在程序中作为文字的任何内容，都将其设为 unicode 文字，除非它出于某种原因明确需要成为字节串。这导致了[unicode 三明治](http://nedbatchelder.com/text/unipain/unipain.html#35)，这通常会让你的生活更轻松。

对于文字，您要么希望将字符串声明为`u'má'`，要么具有：

```
from __future__ import unicode_literals 
```

靠近脚本顶部以制作`'un-prefixed strings'`unicode。您得到的错误意味着您已经完成了这一点。

要读入一个 unicode 字符串，您需要意识到它`raw_input`会为您提供一个字节字符串 - 因此，您需要使用它的`.decode`方法对其进行转换。您需要传递`.decode`您的 STDIN 的编码 - 它可以作为`sys.stdin.encoding`（不要只是假设这是 UTF8 - 它通常会，但并非总是如此） - 所以，整行将是：

```
string = raw_input(...).decode(sys.stdin.encoding) 
```

但是到目前为止，最简单的解决方法是如果可以的话升级到 Python 3 - 那里`input()`（它的行为类似于 Py2`raw_input`否则）给你一个 unicode 字符串（它需要`.decode`你，所以你不必记住它），并且默认情况下，无前缀字符串是 unicode 字符串。这一切都使得处理重音字符变得更容易——它本质上意味着你尝试的逻辑*只能*在 Py3 中工作，因为它做了正确的事情。

但是请注意，您看到的错误仍然会出现在 Py3 中 - 但由于默认情况下它会做正确的事情，因此您必须努力工作才能遇到它。但如果你这样做了，比较只会是 False，没有警告 - Py3 不会尝试在字节字符串和 unicode 字符串之间进行隐式转换，因此任何字节字符串将始终与任何 unicode 字符串进行比较，并尝试对它们进行排序抛出异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T11:47:19.510

请注意，您与 IDLE 与 PyDev 有所不同，因为 PyDev 会将 PYTHONIOENCODING 设置为启动配置 > 通用 > 编码中的编码。并且还将使用该编码执行 sys.setdefaultencoding（它有一个自定义 sitecustomize.py）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T03:04:46.047

一种选择是像在 :: 中那样去除字符重音**[符号，在 python unicode 字符串中删除重音符号的最佳方法是什么？](https://stackoverflow.com/questions/517923/what-is-the-best-way-to-remove-accents-in-a-python-unicode-string?rq=1)**在**[其他位置](http://mail.python.org/pipermail/pythonmac-sig/2004-October/011883.html)**阅读后，我发现您可以在`# -*- coding: utf-8 -*-`之后设置选项`#!/usr/bin/python`以将所有字符串保留在 unicode 中，这可能会有所帮助。在这种情况下，您可能需要运行`s = raw_input().decode('utf8')`才能获得正确的 unicode。

# objective-c - 当我执行SegueWithIdentifier 时出错

> ID：11068582
> 
> 赞同：1
> 
> 时间：2012-06-17T02:51:33.063
> 
> 标签：objective-c, xcode, storyboard

```
@implementation loadingViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // send request
}

-(void)connectionDidFinishLoading:(NSURLConnection *)connection{

//inserting the response Data in database

[self performSegueWithIdentifier:@"loadingMenuSegue" sender:self];

}

@end 
```

我有这个错误

***断言失败 -[UIWindowController transition:fromViewController:toViewController:target:didEndSelector:], /SourceCache/UIKit_Sim/UIKit-1914.84/UIWindowController.m:188

***由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“尝试在转换已经在进行时从 to 开始模态转换。等待 viewDidAppear/viewDidDisappear 知道当前转换已经完成'

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T15:51:49.220

```
@implementation loadingViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // send request
}

-(void)connectionDidFinishLoading:(NSURLConnection *)connection{

//inserting the response Data in database

//remove perform Segue from her, because the process is not finish yet
// [self performSegueWithIdentifier:@"loadingMenuSegue" sender:self];

}

-(void)viewDidAppear:(BOOL)animated{
    [super viewDidAppear:animated];
    [self performSegueWithIdentifier:@"loadingMenuSegue" sender:self];
}

@end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T05:52:31.650

该错误可能表明您的`connectionDidFinishLoading:`方法之前被调用过`viewDidAppear:`。由于此时您无法执行转场，因此您可能希望在 ivar 或属性中保持某种状态（以便您知道连接已完成），然后在您的`viewDidAppear:`实现中，您可以测试该状态并在以下情况下执行转场需要。

# java - 无法使用 JNA 找出本机类型的映射

> ID：11068585
> 
> 赞同：1
> 
> 时间：2012-06-17T02:51:53.093
> 
> 标签：java, macos, jna

我正在尝试使用 JNA 从 Mac 上的 ApplicationServices 框架调用本机函数。但是，据我所知，我想使用的函数的返回类型及其参数与 Java 中的任何东西都不相似，而且我不知道如何映射它们。

我想使用的功能：

```
CFArrayRef CGWindowListCopyWindowInfo(
CGWindowListOption option,
CGWindowID relativeToWindow); 
```

我不知道如何映射这些。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T02:59:18.580

查看 rococoa 项目 (http://rococoa.java.net)，它解决了特定于 OSX 的各种类型的映射问题。

# objective-c - 试图将 UIActivityIndi catorView 添加到视图中，但不起作用

> ID：11068586
> 
> 赞同：0
> 
> 时间：2012-06-17T02:52:45.090
> 
> 标签：objective-c, ios

我正在使用 iOS 食谱 PragProg 书中的食谱，这是我正在使用的代码的原始部分：

```
- (void)addActivityIndicatorView {

    activityIndicatorView = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];
    activityIndicatorView.autoresizingMask = UIViewAutoresizingFlexibleTopMargin |
    UIViewAutoresizingFlexibleRightMargin |
    UIViewAutoresizingFlexibleBottomMargin |
    UIViewAutoresizingFlexibleLeftMargin;                       
    CGRect aiFrame = activityIndicatorView.frame;
    CGFloat originX = (self.view.bounds.size.width - aiFrame.size.width) / 2;
    CGFloat originY = (self.view.bounds.size.height - aiFrame.size.height) / 2;
    aiFrame.origin.x = floorl(originX);
    aiFrame.origin.y = floorl(originY);
    activityIndicatorView.frame = aiFrame;
    [self.view addSubview:activityIndicatorView];
} 
```

我意识到我想要这个activityindicator代码用于我的其他控件上的多个activityIndi​​catorViews，这些控件通过Web加载数据，所以这是我制作可重用代码的实现，它没有像上面的代码对一个视图控制器那样在控件上显示activityIndi​​cator视图它在里面。是的，我确实为使用它的每个控件单步执行此代码，我调用 [activityIndi​​cator startAnimating]; 对于我传递给这个函数的activityIndi​​cator。猜猜我要问的是我应该在代码的其他地方查看哪里？

```
- (void)addActivityIndicatorView:(UIActivityIndicatorView *)acitivityIndicator toView:(UIView *)view {

    acitivityIndicator = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];
    acitivityIndicator.autoresizingMask = UIViewAutoresizingFlexibleTopMargin |
    UIViewAutoresizingFlexibleRightMargin |
    UIViewAutoresizingFlexibleBottomMargin |
    UIViewAutoresizingFlexibleLeftMargin;                       
    CGRect aiFrame = acitivityIndicator.frame;
    CGFloat originX = (view.bounds.size.width - aiFrame.size.width) / 2;
    CGFloat originY = (view.bounds.size.height - aiFrame.size.height) / 2;
    aiFrame.origin.x = floorl(originX);
    aiFrame.origin.y = floorl(originY);
    acitivityIndicator.frame = aiFrame;
    [view addSubview:acitivityIndicator];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T04:44:41.750

像这样写你的方法：

```
- (void)addActivityIndicatorView:(UIActivityIndicatorView **)activityIndicator toView:(UIView *)view {

    UIActivityIndicatorView * activeInd = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge];
    activeInd.autoresizingMask = UIViewAutoresizingFlexibleTopMargin |
    UIViewAutoresizingFlexibleRightMargin |
    UIViewAutoresizingFlexibleBottomMargin |
    UIViewAutoresizingFlexibleLeftMargin;                       
    CGRect aiFrame = activeInd.frame;
    CGFloat originX = (view.bounds.size.width - aiFrame.size.width) / 2;
    CGFloat originY = (view.bounds.size.height - aiFrame.size.height) / 2;
    aiFrame.origin.x = floorl(originX);
    aiFrame.origin.y = floorl(originY);
    activeInd.frame = aiFrame;

    *activityIndicator = activeInd;
    [view addSubview:*activityIndicator];
} 
```

当您想使用上述方法时，请将对 a 的引用传递`UIActivityIndicatorView *`给该方法，例如：

```
-(void) viewDidLoad
{
  [super viewDidLoad];

  UIActivityIndicatorView * ai;
  [self addActivityIndicatorView: &ai toView: self.view];

  activityIndicator = ai;
} 
```

现在，每当您希望它开始动画时：

```
[activityIndicator startAnimating]; 
```

# wordpress - 尝试将 Wordpress 标题添加到 SMF 的顶部，但样式表混淆了

> ID：11068592
> 
> 赞同：0
> 
> 时间：2012-06-17T02:53:48.593
> 
> 标签：wordpress, web, stylesheet, smf

我有一个 Wordpress 站点（安装在根目录中）和一个简单机器论坛（在 /forums 中）。我花了几个小时试图在 SMF 上添加 Wordpress 标题，但运气不佳。我可能也看过 50 多个关于该主题的指南，但唯一可以远程工作的是 iframe（它以某种方式搞乱了会话或论坛的某些东西）。所以在问你们之前，不要以为我自己没有尝试过。

无论如何，通常发生的情况似乎是样式表混合：我可以显示部分标题，但似乎 SMF 主题样式表搞砸了。例如，看这张图：

[http://gyazo.com/62551a8b45b7e50c2a41684da7b261f8.png](http://gyazo.com/62551a8b45b7e50c2a41684da7b261f8.png)

我试过了：

*   在包含 wp-blog-header.php 后使用简单的 Wordpress get_header() 函数
*   本指南：[http ://www.nutt.net/2009/08/16/how-to-wrap-a-smf-forum-in-wordpress/](http://www.nutt.net/2009/08/16/how-to-wrap-a-smf-forum-in-wordpress/)
*   使用更多唯一的 id 等费力地重新创建标题，以避免 CSS 重叠。
*   使用 JQuery 的 .load。
*   使用 iframe。是的，对于古代 iframe；只有它接近了。

我基本上只是希望我的 Wordpress 标题显示在 SMF 上，然后隐藏 SMF（可能带有 display:none 或其他东西）。

请指教......我的眼睛因这种方式工作太多而受伤。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T12:53:26.953

我想我找到了一个可行的答案。我基本上使用 CSS 后代选择器将 Wordpress 样式仅应用于标题。所以，我取了标题周围的 div 的 id（例如，“wp-header”），然后添加`#wp-header`到 Wordpress 样式表中每个 CSS 选择器的开头（当然，使用标题的副本；我也删除了很多不相关的样式）。Notepad++ 的宏非常有用。

我不确定是否有更优雅的解决方案，但这要坚持下去。

# php - URL以奇怪的格式存储？

> ID：11068598
> 
> 赞同：0
> 
> 时间：2012-06-17T02:55:05.513
> 
> 标签：php, mysql

在我的 mysql 列 varchar(266) 中，我的数据是这样存储的

www.torcache.（哈希）

（哈希继续）

。激流

这是发回错误标头可能不包含多个标头，检测到新行。

我如何将网址存储在一行中

这是更新数据库的代码

```
$sql_select = "UPDATE `database1`.`media` SET `media_url` =('" . $url . "') WHERE media_type= '4' AND media_url LIKE '%".$fname."%' "; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T02:57:12.030

数据库不会在您背后随机插入换行符。你投入的就是你应该得到的，所以在你运行查询`$url` **之前看看。**并且不要在基于 Web 的视图中查看它。请记住，浏览器将换行符视为空格，因此除非您查看页面源代码、通过 nl2br() 运行文本、将其输出到`<pre>`块内等，否则您不会看到其中是否有任何中断...

# java - 捕捉 throwrable 是最佳做法吗？

> ID：11068599
> 
> 赞同：-1
> 
> 时间：2012-06-17T02:55:20.190
> 
> 标签：java

> **可能重复：**
> [捕捉 Throwable 是一种不好的做法吗？](https://stackoverflow.com/questions/6083248/is-it-a-bad-practice-to-catch-the-throwable)

捕捉可投掷物是最佳做法吗？如果捕获 throwable，它会捕获内存不足等异常吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T03:04:08.523

捕获异常的唯一方法与捕获`Throwable`异常相同。它的工作原理是，它通过层次结构树捕获异常/错误。

所以如果你想捕捉`OutOfMemory`错误，你有一些选择：

```
try{
}catch(java.lang.OutOfMemoryError t){
}

try{
}catch(java.lang.Error t){
}

try{
}catch(java.lang.Throwable t){
} 
```

只需检查文档中的类树以获取您想要捕获的异常。 [http://docs.oracle.com/javase/6/docs/api/java/lang/OutOfMemoryError.html](http://docs.oracle.com/javase/6/docs/api/java/lang/OutOfMemoryError.html)

还有一个很好的做法是在你的 catch 块中总是从树底部的那些开始，例如：

```
try{
//
}catch(java.lang.OutOfMemoryError t){
// handle out of memory error
}catch(java.lang.Throwable t){
// handle other throwable
} 
```

还要记住，Error 和 Exception 它们都扩展 Throwable，但它们不相互扩展，因此它们都是类树中的兄弟姐妹。

# r - 什么命令将 knitr R Markdown 转换为 Stack-Exchange-friendly Markdown？

> ID：11068603
> 
> 赞同：17
> 
> 时间：2012-06-17T02:56:56.197
> 
> 标签：r, knitr

**动机**：我经常想将使用 R Markdown 快速分析的结果粘贴到 StackExchange 站点中。这包括Stack Overflow 、[Cross Validated](https://stats.stackexchange.com/)[上的 R-tag](https://stackoverflow.com/questions/tagged/r)，甚至是[Cognitive Sciences Stack Exchange等网站上的特定领域分析（例如，对](https://cogsci.stackexchange.com/)[OECD 生命指数数据](https://cogsci.stackexchange.com/questions/922/what-is-the-correlation-between-objective-indexes-and-aggregated-self-report-mea/1067#1067)的快速分析）。

**默认转换的问题：** 的**默认**降价输出`knitr`不适合包含在 StackExchange 中。我能看到的主要问题是

*   图像参考本地硬盘
*   代码块没有制表符或空格缩进；而是他们使用 github 风格的 Markdown（即没有缩进）

即，块看起来像这样：

```
```r
some code
``` 
```

和输出看起来像这样

```
```
## some output
## ...
``` 
```

可能还有其他具体问题需要考虑，例如

*   确保正确包含表格
*   确保为支持 MathJax 的站点（如交叉验证和认知科学堆栈交换）正确传递方程。

### 问题

**将 R Markdown 转换为适合简单包含到 Stack Exchange 站点中的 Markdown（或 HTML）的好命令是什么？**

我认为一个理想的命令是一个单行命令，它采用 R Markdown 文件并生成一个文件，其中整个内容可以直接粘贴到 Stack Exchange 中，以产生格式良好的问题或答案。

我将[这个简单的 rmd 文件](https://github.com/downloads/jeromyanglim/assorted-files/non-sig-r.rmd)与几个代码块、一个图形和一个方程式作为测试示例共享。

**初步想法**：在 imgur 上托管图像可能会解决图像问题。这可以通过在 R Markdown 文件中包含以下内容来完成，但如果将此指令合并到某个单行命令中可能会更简单。

```
``` {r }
opts_knit$set(upload.fun = imgur_upload) 
```` 
```

可能值得考虑 HTML 或 Markdown 是否是粘贴到 StackExchange 的更好格式。该`markdown`软件包提供了很大的灵活性。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-17T03:44:30.590

这是一个可以帮助您入门的实用程序功能。它设置自动上传到 imgur，以及使用选项卡而不是围栏块对源代码进行降价渲染。您可以增强此功能以添加其他有用的选项。

```
stackify <- function(rmd_file, ...){
  require(knitr)
  opts_knit$set(upload.fun = imgur_upload) 
  render_markdown(strict = TRUE)
  out <- knit(rmd_file, ...)
  return(invisible(out))
} 
```

更新：我在您的测试文件上测试了这个功能，它在启用的 stats.stackexchange.com 上表现良好`mathjax`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-17T12:01:24.410

尽管我仍然想阅读其他建议，但我还是以@Ramnath 的回答为起点，将这个脚本组合在一起。它输出一个 HTML 片段而不是 Markdown。

```
Rscript -e 'rmd_file <- dir(pattern="rmd"); md_file <- sub("rmd", "md", rmd_file); html_file <- sub("rmd", "html", rmd_file); require(methods); require(knitr); require(markdown); opts_knit$set(upload.fun = imgur_upload); knit(rmd_file); markdownToHTML(md_file, html_file, options="fragment_only") ' 
```

*   它假定工作目录中有一个`rmd`文件。我想可以以更复杂的方式选择 rmd 文件。
*   它要求安装`knitr`和`markdown`包。
*   我认为因为我们使用的是“Rscript”，所以`methods`需要加载包。
*   它将图像上传到 imgur
*   markdownToHTML 仅将代码片段导出为 html 文件。然后可以将此文件的内容复制到 Stack Exchange 答案中。

结果看起来还不错。它克服了过多的空白行的问题。但是，输出不是降价，这使得结果更难编辑。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-27T18:58:46.257

RStudio 使用 pandoc，因此您可以指定适合您需要的降价变体。在 .Rmd 文件的开头：

```
---
output:
  md_document:
    variant: markdown_strict+autolink_bare_uris
--- 
```

然后，您应该能够将生成的文件内容复制/粘贴到 StackExchange。

请参阅：[http ://rmarkdown.rstudio.com/markdown_document_format.html#markdown-variants](http://rmarkdown.rstudio.com/markdown_document_format.html#markdown-variants)

# c# - WCF 服务 maxReceivedMessageSize basicHttpBinding 问题

> ID：11068612
> 
> 赞同：36
> 
> 时间：2012-06-17T02:58:40.127
> 
> 标签：c#, wcf, wcf-binding

我似乎无法让我的 WCF 服务接受发送给它的大量数据。

我为客户端配置了 maxReceivedMessageSize 并且可以很好地接收大数据，这不是问题。它正在向服务发送数据。

我尝试配置服务，但没有任何运气。这是我的 web.config：

```
<?xml version="1.0"?>
<configuration>
  <system.web>
    <compilation debug="true"/>
  </system.web>
  <system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <serviceMetadata httpGetEnabled="true"/>
          <serviceDebug includeExceptionDetailInFaults="false" />
          <serviceDiscovery />
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <services>
      <service name="Service.IService">
        <clear />
        <endpoint binding="basicHttpBinding" bindingConfiguration="MessageSizeBasic" contract="Service.IService" />
      </service>
    </services>
    <bindings>
      <basicHttpBinding>
        <binding name="MessageSizeBasic" maxBufferSize="2147483647" maxReceivedMessageSize="2147483647">
          <readerQuotas maxDepth="32" maxStringContentLength="2147483647"
            maxArrayLength="16348" maxBytesPerRead="4096" maxNameTableCharCount="16384" />
        </binding>
      </basicHttpBinding>
      <webHttpBinding>
        <binding name="MessageSizeWeb" maxBufferSize="2147483647" maxReceivedMessageSize="2147483647" />
      </webHttpBinding>
    </bindings>
  </system.serviceModel>
 <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>
</configuration> 
```

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-06-17T03:18:18.733

从绑定中删除名称将使其适用于所有端点，并且应该产生所需的结果。如此：

```
<services>
  <service name="Service.IService">
    <clear />
    <endpoint binding="basicHttpBinding" contract="Service.IService" />
  </service>
</services>
<bindings>
  <basicHttpBinding>
    <binding maxBufferSize="2147483647" maxReceivedMessageSize="2147483647">
      <readerQuotas maxDepth="32" maxStringContentLength="2147483647"
        maxArrayLength="16348" maxBytesPerRead="4096" maxNameTableCharCount="16384" />
    </binding>
  </basicHttpBinding>
  <webHttpBinding>
    <binding maxBufferSize="2147483647" maxReceivedMessageSize="2147483647" />
  </webHttpBinding>
</bindings> 
```

另请注意，我`bindingConfiguration`从端点节点中删除了该属性。否则你会得到一个例外。

在这里找到了相同的解决方案：[WCF 中的大请求问题](https://stackoverflow.com/questions/7470530/problem-with-large-requests-in-wcf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-17T16:06:46.193

当使用 HTTPS 而不是 ON 绑定时，将其放入带有`httpsTransport`标签的绑定中：

```
 <binding name="MyServiceBinding">
      <security defaultAlgorithmSuite="Basic256Rsa15" 
                authenticationMode="MutualCertificate" requireDerivedKeys="true" 
                securityHeaderLayout="Lax" includeTimestamp="true" 
                messageProtectionOrder="SignBeforeEncrypt" 
                messageSecurityVersion="WSSecurity10WSTrust13WSSecureConversation13WSSecurityPolicy12BasicSecurityProfile10"
                requireSignatureConfirmation="false">
        <localClientSettings detectReplays="true" />
        <localServiceSettings detectReplays="true" />
        <secureConversationBootstrap keyEntropyMode="CombinedEntropy" />
      </security>
      <textMessageEncoding messageVersion="Soap11WSAddressing10">
        <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647" 
                      maxArrayLength="2147483647" maxBytesPerRead="4096" 
                      maxNameTableCharCount="16384"/>
      </textMessageEncoding>
      <httpsTransport maxReceivedMessageSize="2147483647" 
                      maxBufferSize="2147483647" maxBufferPoolSize="2147483647" 
                      requireClientCertificate="false" />
    </binding> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T04:09:53.323

您的服务类的名称真的是**IService**（在 Service 命名空间上）吗？您最初可能遇到的是元素`name`属性中的服务类名称不匹配。`<service>`

# vb.net - 如何使用 Visual Basic 将 VGA 数据发送到监视器

> ID：11068614
> 
> 赞同：0
> 
> 时间：2012-06-17T02:58:53.367
> 
> 标签：vb.net, vga

有没有办法通过 VB 应用程序将 vga（或任何视频数据）发送到显示设备。

例如，我有一个运行我的程序的桌面设置我单击一个播放按钮，它将视频数据发送到一个单独的屏幕。

我在网上搜索过，我能找到的最好的方法是获取显示信息或更改分辨率，这两个我都不需要。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2016-09-20T12:27:52.493

```
'for secondary screen 
'frmplayer contain your videoplayer
if system.windows.form.screen.allscreen.count>1 then
    frmplayer.left=system.windows.form.screen.allscreen(1).bound.left
end if 
```

# ios - ios 上 OpenAL 中的消音和立体声延迟？

> ID：11068616
> 
> 赞同：2
> 
> 时间：2012-06-17T02:59:52.517
> 
> 标签：ios, core-audio, openal, audiounit

所以这是一个关于 ios 上的 openAl 实现的相当具体的问题。有2个部分。

1.) 当人类听到声音时，我们通常可以分辨出声音是从我们身后还是从我们前面传来，因为从后面传来的声音更加沉闷，并且以不同的方式到达我们的内耳。

这在 OpenAL 实施中是否考虑在内？我真的不知道玩弄它。

2.) 当人类听到声音时，声音到达我们的左耳和右耳的时间之间会有轻微的延迟，具体取决于声源的位置。

这在 OpenAL 实施中是否考虑在内？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T21:13:37.060

1.) 要达到这种效果，您需要对声音应用 efx 扩展来消音，或者在这种情况下手动降低音量。

2.) 不支持声源较远时的延迟声音。设置 speedofsound 只影响频率衰减。

# air - Adobe CS5 错误 1046

> ID：11068620
> 
> 赞同：0
> 
> 时间：2012-06-17T03:01:18.880
> 
> 标签：air, adobe, audio

我正在 Air Debug Launcher（移动）或（桌面）中测试我的程序。我已经在 Flash Professional 调试中运行了我的程序，它运行良好。

我的问题是我在库中有音频文件，可以在 Flash 调试中正常使用。但是给我一个错误 1046

C:\Main.as，第 23 行 1046：找不到类型或不是编译时常量：FootBallSound。

我一直在网上寻找，我真正看到的最好的是该人在包中进行了不正确的导入。我有：

```
 import flash.media.Sound;
import flash.media.SoundChannel;
import flash.media.SoundMixer;
import flash.media.SoundTransform; 
```

Air Debug Launcher 是否存在已知问题或我缺少的东西？

谢谢，

# java - junit 测试错误 - ClassCastException

> ID：11068622
> 
> 赞同：-1
> 
> 时间：2012-06-17T03:02:36.550
> 
> 标签：java, junit

尝试运行 junit 测试时，出现以下错误 -

```
java.lang.ClassCastException: business.Factory cannot be cast to services.itemservice.IItemsService
at business.ItemManager.get(ItemManager.java:56)
at business.ItemMgrTest.testGet(ItemMgrTest.java:49) 
```

导致问题的具体测试是

```
@Test
public void testGet() {
        Assert.assertTrue(itemmgr.get(items));
} 
```

它正在测试的代码是...

```
public boolean get(Items item)  { 

        boolean gotItems = false;       

        Factory factory = Factory.getInstance();

        @SuppressWarnings("static-access")
        IItemsService getItem = (IItemsService)factory.getInstance();

        try {
            getItem.getItems("pens", 15, "red", "gel");
            gotItems = true;
        } catch (ItemNotFoundException e) {
            // catch
            e.printStackTrace();
            System.out.println("Error - Item Not Found");
        }
        return gotItems;
    } 
```

存储项目的测试几乎相同，效果很好......

工厂类是..

```
public class Factory {

    private Factory() {}
    private static Factory Factory = new Factory();
    public static Factory getInstance() {return Factory;}

    public static IService getService(String serviceName) throws ServiceLoadException {
        try {
            Class<?> c = Class.forName(getImplName(serviceName));
            return (IService)c.newInstance();
        } catch (Exception e) {
            throw new ServiceLoadException(serviceName + "not loaded");
        }
    }

    private static String getImplName (String serviceName) throws Exception {
        java.util.Properties props = new java.util.Properties();
            java.io.FileInputStream fis = new java.io.FileInputStream("config\\application.properties");
                props.load(fis);
                    fis.close();
                    return props.getProperty(serviceName);
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T03:17:42.843

您的 Factory.getInstance 方法返回一个 Factory 对象，而 Factory 不是 IItemsService。也许您需要更改以下内容：

```
@SuppressWarnings("static-access")
IItemsService getItem = (IItemsService)factory.getInstance(); 
```

至：

```
@SuppressWarnings("static-access")
IItemsService getItem = (IItemsService)factory.getService(serviceName); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T05:11:45.540

你调用了错误的方法。该方法`Factory.getInstance()`返回一个实例（根据您的实现它是单例的），因此`ClassCastException`当您`Factory`转换为`IItemService`.

我在你的`Factory`那个 return中没有看到任何方法`IItemService`。这里唯一有意义的方法是`getService`返回一个`IService`. 但是，`ClassCastException`如果您尝试强制`IService`转换`IItemService`并且 IItemService 没有扩展 IService，它可能会抛出。

# c - 使用 Recursion 的层次结构树太大，导致文件搜索崩溃

> ID：11068623
> 
> 赞同：3
> 
> 时间：2012-06-17T03:02:44.213
> 
> 标签：c, linux, file, ubuntu, recursion

我编写了一个用于搜索特定文件的代码，用户在其中输入起始路径和文件名，然后程序在文件存在时打印其详细信息，否则打印未找到。

正如我所怀疑的那样，当层次结构树太大时，使用递归会使代码崩溃，我尝试了 400 个目录但它失败了，所以我猜想在`50`一个内部到另一个文件夹之类的东西之后，递归的开销使代码崩溃。

有什么建议可以解决这个问题吗？基本上代码对于低级树层次结构是可以的，但我需要为健康的树设计它（500-600 个文件夹，一个在另一个文件夹中，一个文件存储在最后一个文件夹中），谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T07:18:03.727

最肮脏的方法是[增加堆栈大小](https://stackoverflow.com/questions/2275550/change-stack-size-for-a-c-application-in-linux-during-compilation-with-gnu-com)。

第二个是 在递归调用后替换`char full_name[_POSIX_PATH_MAX + 1]`为`char *fullname=malloc((_POSIX_PATH_MAX + 1)*sizeof(char))`并且不要忘记它。`free()`

可能最好的方法是废弃该代码并使用无所不在的强大[`find`](http://linux.die.net/man/1/find)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-17T07:36:40.183

您可以删除递归（即转换为迭代解决方案），方法是存储您看到的目录（而不是立即处理它们），然后在稍后的迭代中返回它们。但是，您可能无法获得完全相同的输出（事物的排序可能不同）。

此方法的工作方式是拥有一个要处理的目录列表，然后您浏览此列表（随时向其中添加任何子目录）。

在伪代码/Python 中：

```
def print_dirs(path, recursive, filename):
   dir_stack = empty stack
   dir_stack.push(path)

   while dir_stack is not empty:
      dir = dir_stack.pop() # returns the head element (and removes it)

      for file in children(dir):

         # ...do stuff with names...

         if recursive and file is a directory:
             dir_stack.push(file) # process the directory later 
```

堆栈可以很容易地实现为单链表。请注意，如果`path`不是目录，则需要进行特殊处理，并且这*不是*递归的。

# python - 如何在 OpenShift 上配置 webpy 和 MySQL

> ID：11068625
> 
> 赞同：4
> 
> 时间：2012-06-17T03:03:16.877
> 
> 标签：python, mysql, web.py, openshift

我想知道如何在 openshift 上部署[webpy to-do 示例。](http://webpy.org/src/todo-list/0.3 "webpy 待办事项示例")这是一个[官方的 webpy 示例](https://github.com/openshift/OpenShift-webpy-example "webpy 待办事项示例")，展示了如何在 openshift 上部署 webpy 应用程序，但此示例不处理 mysql。任何人都可以向我展示在 openshift 上部署 webpy 待办事项示例的演示吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-22T12:49:26.287

创建一个python应用程序：

```
rhc app create -a webpy -t python-2.7 
```

添加此上游 webpy 存储库

```
cd webpy
git remote add upstream -m master https://github.com/openshift/webpy-example.git
git pull -s recursive -X theirs upstream master 
```

然后将 repo 推送到上游

```
git push 
```

[看这里更多](https://github.com/openshift/flask-example)

# javascript - requirejs 优化器无法在 jquery 中加载

> ID：11068626
> 
> 赞同：4
> 
> 时间：2012-06-17T03:03:27.317
> 
> 标签：javascript, jquery, node.js, requirejs

我正在优化我的 requirejs 应用程序以及主干和 jquerymobile，以下是我的文件结构：

```
/application
    /app
       /models
       /views
       /collections
    /scripts
       main.js
       text.js
       /assets
            backbone.js
       /libs
            /jquery
                /jquery.js
                /jquery-mobile.js
 app.js
 r.js
/public
    /css
        /style.css 
```

在控制台中，我尝试运行 ff 命令：

```
node ../r.js -o name=main out=../build.js baseUrl=. paths.models=../app/models paths.app=../app 
```

我确保路径定义良好并且正常工作，除了这个错误（这是我在运行命令时得到的）：

```
Tracing dependencies for: main
Error: Module loading did not complete for: jquery
    at Function.traceDependencies (/home/dunhak/public_html/my_path/etc/application/r.js:15117:19) 
```

太感谢了！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-30T17:54:50.237

其中一些将取决于您加载脚本的顺序。jQuery 是在 require.js 之前加载还是相反？

jQuery 的最后几行可能提供解决方案的线索：

```
if ( typeof define === "function" && define.amd && define.amd.jQuery ) {
    define( "jquery", [], function () { return jQuery; } );
} 
```

我的猜测是你正在做类似的事情：

```
var $ = require('jquery'); //lower-case Q 
```

就个人而言，我一直在做：

```
var $ = require('jQuery'); //upper-case Q 
```

这一切都可能取决于您的 require.config - 我使用类似的东西：

```
require.config({
    baseUrl: "/js",

    paths : {
        jQuery: 'lib/jquery-1.7.1.min'
        //, etc...
    }
}) 
```

另一件需要考虑的事情：您可能不希望将 jQuery 作为优化输出的一部分包含在内——相反，从 CDN（等）加载预先缩小的版本。在这种情况下，您需要排除 jquery 模块，如下所述：[http ://requirejs.org/docs/jquery.html](http://requirejs.org/docs/jquery.html)

```
modules: [
    {
        name: "main",
        exclude: ["jquery"]
    }
] 
```

# iphone - 在 UIScrollView 掩码中动画 CAGradientLayer 的位置属性在完成后重置

> ID：11068631
> 
> 赞同：4
> 
> 时间：2012-06-17T03:04:05.663
> 
> 标签：iphone, objective-c, ios, core-animation

我正在尝试为 a 的位置设置动画以在 a到达某个位置`CAGradientLayer`时缩小。`UIScrollView`我将渐变设置为 的遮罩`UIScrollView`，并调整渐变的`locations`属性以在滚动视图滚动时稍微扩展。这对我来说很好，除非我尝试对位置的更改进行动画处理。当我执行动画时 - 无论是显式`CABasicAnimation`还是隐式 - 动画都会正确执行，但无论出于何种原因，一旦动画完成，它就会将我的渐变（没有动画）的位置更改为其他一些非零开始和结束点。它每次都使用相同的值来执行此操作，并且这些值未在我的代码中的任何地方指定。

我对 Core Animation 很陌生，所以也许我遗漏了一些东西，但据我所知，我的代码是正确的。我也尝试过等待执行动画，以解决滚动的任何时间问题，但这也无济于事。

这是我的代码（无论如何，相关部分）：

```
- (void) scrollViewDidEndDecelerating:(UIScrollView *)scrollView {
    [CATransaction begin];
    [CATransaction setDisableActions:YES];
    gradientMask.position = CGPointMake(currentPageOffset, 0.0f);
    gradientMask.bounds = self.scrollView.bounds;
    [CATransaction commit];

    _animateGradientShrinkOnScroll = YES;

    // Reset scrollView contentOffset (I'm doing infinite paging)
    ...
}

- (void) scrollViewDidScroll:(UIScrollView *)scrollView {
    CGFloat offset = self.scrollView.contentOffset.x;
    CGFloat relativeOffset = offset - currentPageOffset;

    [CATransaction begin];
    [CATransaction setDisableActions:YES];
    gradientMask.position = self.scrollView.contentOffset;
    if (_animateGradientShrinkOnScroll)
        [CATransaction commit]; // if animating, set position w/o animation first

    CGFloat leftLength = ABS(relativeOffset);
    CGFloat rightLength = ABS(relativeOffset);

    CGFloat maxLength = [self maxGradientLength];
    leftLength = MIN((leftLength / 2), maxLength);
    rightLength = MIN((rightLength / 2), maxLength);

    // When animating, this effectively always goes from non-zero lengths to zero lengths,
    // and I've verified this by logging the values used.
    [self setGradientLeftLength:leftLength rightLength:rightLength animated:_animateGradientShrinkOnScroll];

    if (!_animateGradientShrinkOnScroll)
        [CATransaction commit];
    _animateGradientShrinkOnScroll = NO;
}

- (void) setGradientLeftLength:(CGFloat)leftLength rightLength:(CGFloat)rightLength animated:(BOOL)animated {
    CGFloat startRatio = MAX((leftLength / gradientMask.bounds.size.width), 0);
    CGFloat endRatio = 1.0f - MAX((rightLength / gradientMask.bounds.size.width), 0);

    NSArray *locations = [NSArray arrayWithObjects:
                          [NSNumber numberWithFloat:0.0f],
                          [NSNumber numberWithFloat:startRatio],
                          [NSNumber numberWithFloat:endRatio],
                          [NSNumber numberWithFloat:1.0f], nil];

    if (animated) {
        CABasicAnimation *animation = [CABasicAnimation animationWithKeyPath:@"locations"];
        animation.toValue = locations;
        [gradientMask addAnimation:animation forKey:kGradientMaskAnimationShrink];
    }
    else
        gradientMask.locations = locations;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-17T03:30:25.103

向图层添加动画永远不会更改图层的属性。它只是动画层在屏幕上的外观。从图层中删除动画后，将根据其属性重新绘制图层。所以你需要改变图层的属性，然后应用动画。在您的`if`声明中，请执行以下操作：

```
CABasicAnimation *animation = [CABasicAnimation animationWithKeyPath:@"locations"];
animation.fromValue = gradientMask.locations;
animation.toValue = locations;
gradientMask.locations = locations;
[gradientMask addAnimation:animation forKey:animation.keyPath]; 
```

为了更好地理解，请观看[WWDC 2011](https://developer.apple.com/videos/wwdc/2011/)的“Core Animation Essentials”视频。这是非常有帮助的。

# objective-c - 核心数据：保存结束时冻结

> ID：11068634
> 
> 赞同：0
> 
> 时间：2012-06-17T03:04:42.683
> 
> 标签：objective-c, ios, multithreading, core-data, ios5

我目前有一个带有标签栏的 iPhone 项目。在标签栏上有两个视图。两个视图都将数据加载或保存到 Core Data 数据库（这两个视图都启动了一个从 Web 服务收集数据并将其保存在数据库中的方法）。加载视图时，它会从填充视图中的表的数据库中加载数据。如果我运行应用程序并单击选项卡栏中的第二个视图，则第一个视图仍在从 Web 服务加载数据并将其插入到单独线程上的数据库中。这很好，但是一旦第一个视图完成将所有数据从 web 服务加载到数据库中，只有当第二个视图控制器从数据库加载数据时，它才会冻结两个视图控制器。

控制台没有错误，xcode 也没有指示有任何错误。我所有的进程都在不同的线程上工作，所以主线程冻结没有问题。从 web 服务中提取数据并将其保存到数据库是一种方法，并且在我提出的方法的末尾`NSLog(@"View Controller 1 Save Complete")`。一旦调用它并且第二个视图控制器仍在加载数据，它就会冻结。整个应用程序没有响应（没有任何效果）。

我查看了有关其他 SO 问题的信息，它建议我在`NSManagedObjectContext`每次提取或插入时声明一个新的，我已经这样做了，但它并没有解决问题。

如果有人知道发生了什么或者您想了解更多信息，请告诉我。

编辑：我正在使用 Xcode 4.5 和 IOS 6 模拟器。这是一周前发布的新IOS的beta版本。我知道这不是错误，因为在我开始使用 beta 版本之前我遇到了这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T07:34:42.497

我过去遇到的一种可能性是尝试在与创建它的线程不同的线程上与 MOC 交互。如果您尝试进行并发，则可能会发生这种事情，并且在与 MOC 交谈时，您必须非常小心地知道您始终处于哪个线程上。例如，对于异步事物，您的回调可能在与您想象的不同的线程上执行（即 viewDidLoad 发生在主线程上，因此如果您在那里创建 MOC，则以后不能从不同的线程使用它）。

# java - 类似的子类

> ID：11068637
> 
> 赞同：2
> 
> 时间：2012-06-17T03:05:20.327
> 
> 标签：java, class, inheritance

假设我有一个像这样相当简单的 A 类 -

```
public class A{
  private int randomField = 0;
  protected int key;
  protected double dmg;
} 
```

现在我想编写一些继承受保护字段的子类，并且仅根据分配给这些字段的初始值而有所不同——例如，如果我编写了两个子类 B 和 C，那么这两个子类之间的唯一区别-classes 将是值 key 和 dmg 将具有不同的值。他们将共享一个完全相同的方法 set，因为它会影响相同的变量。

我发现当我编写这些子类时，我在重复自己，因为我只是更改构造函数以将不同的初始值设置为 key 和 dmg，然后简单地复制并粘贴 set 方法。

有没有“好”的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T03:08:04.133

这不是您应该进行子类化的地方，实际上是对继承的严重过度使用。如果“子类”之间的唯一区别是对象的初始状态，那么只对所有类使用一个类，而是简单地在构造函数或工厂中设置状态以创建所需状态的实例。

例如，

```
public class A{
  private int randomField = 0;
  private int key;
  private double dmg;

  public A(int key, double dmg) {
    this.key = key;
    this.dmg = dmg;
  }

  // getters and possibly setters...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T03:09:56.533

您不需要子类，而是实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T03:14:19.743

绝对没有理由在这里进行子类化，只需在构造函数中初始化不同的值，当您需要具有不同功能的相同行为时，子类化很重要。

例子：

```
 Animal <--  Carnivores <-- Dog 
```

这里的动物类将具有动物中的重要特征，然后食肉动物类会更具体，而狗是一种特定的动物。

最好为 A 类提供一个具有 2 个参数的构造函数

```
public class A{
  private int randomField = 0;
  protected int key;
  protected double dmg;

 public A(int key, double dmg)
  {

     this.key = key;
     this.dmg = dmg;
  }
} 
```

# android - 文本边缘和按钮边缘之间的距离？

> ID：11068642
> 
> 赞同：1
> 
> 时间：2012-06-17T03:07:52.510
> 
> 标签：android

有没有办法获得按钮上文本的左边缘与按钮的实际边缘之间的距离？

# javascript - 如何为 jvectormap jquery 插件生成新地图？

> ID：11068645
> 
> 赞同：15
> 
> 时间：2012-06-17T03:08:54.680
> 
> 标签：javascript, jquery, python, jvectormap

我想知道如何为 jquery 插件 jvectormap [http://jvectormap.com/创建或生成地图](http://jvectormap.com/)

该项目有几个地图：http: [//jvectormap.com/maps/](http://jvectormap.com/maps/)

但我需要按州划分澳大利亚和新西兰的地图。在 github [https://github.com/bjornd/jvectormap](https://github.com/bjornd/jvectormap)的文档中，它说任何人都可以使用以下命令生成地图：

```
python \
    path/to/converter.py \
    path/to/geo-data.shp \
    path/to/resulting-map.js \
    --width 900 \
    --country_name_index 4 \
    --where "ISO = 'USA'" \
    --codes_file path/to/codes-en.tsv \
    --insets '[{"codes": ["US-AK"], "width": 200, "left": 10, "top": 370}, {"codes": ["US-HI"], "width": 100, "left": 220, "top": 400}]' \
    --minimal_area 4000000 \
    --buffer_distance -3000 \
    --simplify_tolerance 1000 \
    --longtitude0 10w \
    --name us 
```

但我认为这是过时的，因为我下载了[http://www.naturalearthdata.com/downloads/10m-culture-vectors/10m-admin-1-states-provinces/](http://www.naturalearthdata.com/downloads/10m-cultural-vectors/10m-admin-1-states-provinces/)作为文档所述，但当然没有工作。

谁能告诉我如何为jvectormap生成澳大利亚和新西兰按州划分的地图？

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-22T21:37:01.327

以防万一有人需要同样的东西。要运行转换器，您需要（此指令适用于 Windows 环境）：

*   下载并安装[OSGeo4W](http://trac.osgeo.org/osgeo4w/)（使用 Express Desktop Install）
*   下载所需的形状文件（[这个](http://www.naturalearthdata.com/downloads/10m-cultural-vectors/10m-admin-1-states-provinces/)自然数据文件工作正常）。
*   将[anyjson](http://pypi.python.org/pypi/anyjson/0.2.0)放入转换器目录
*   在转换器目录中创建**makemap.bat**，如下所示：

`python ^
   converter.py ^
   ../../ne_10m_admin_1_states_provinces_shp.shp ^
   test-map.js ^
   --width 400 ^
   --where "ISO_3166_2 = 'RU-' and code_hasc!=''" ^
   --country_name_index 12 ^
   --country_code_index 18 ^
   --minimal_area 4000000 ^
   --buffer_distance -0.5 ^
   --simplify_tolerance 10000 ^
   --longitude0 54.8270 ^
   --name russia`

*   运行 OSGeo4W shell（它将被添加到开始菜单）
*   运行 makemap.bat
*   享受生成的地图

作为使用上述步骤生成的俄罗斯地图的示例输出[http://jsfiddle.net/dyP4c/3/](http://jsfiddle.net/dyP4c/3/)

关于参数（我所知道的）

**where** **condition**用于使用 shapefile 属性**从**shapefile中

**过滤**形状如果使用**代码**文件，则分隔文件代码文件是制表符分隔文件（如果您想使用不是来自 shapefile 的名称/代码）**longitude0**是区域的经度（[使用此](http://www.google.com/search?q=russian%20longitude)）**名称**是地图名称

 ******PS：OSGeo4W 包有很好的 Quantium [GIS Browser](https://www.qgis.org/en/docs/user_manual/qgis_browser/qgis_browser.html)来浏览 shapefile 属性。您可以尝试在网络上搜索其他 shapefile（不仅是自然数据）以转换为 jvectormap

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T19:44:01.743

看看你写的命令。看起来它只适用于美国地图：

```
--insets '[{"codes": ["US-AK"], "width": 200, "left": 10, "top": 370}, {"codes": ["US-HI"], "width": 100, "left": 220, "top": 400}]' \ 
```

我不知道答案，但这就是我要开始解决问题的地方******

# java - 有人知道如何在 java rts 游戏中进行多人游戏吗？

> ID：11068646
> 
> 赞同：-4
> 
> 时间：2012-06-17T03:09:11.667
> 
> 标签：java, multiplayer

最近我开始用 java 制作自己的多人 rts 游戏，需要多人部分的帮助。我希望它有一个服务器列表，人们从他们自己的计算机托管，如果他们说没问题，它就会显示在主列表中。对于游戏，我有一个工作游戏，如果在代码中将布尔值更改为 false，您将扮演蓝队，如果为真，您将成为红队。我希望这样你可以选择自己的团队颜色，并且根据主持人的喜好，一次可以有超过 2 人玩。我需要所有玩家都看到其他人移动角色，并且角色需要能够互相攻击。我相信，如果我错了，请纠正我，我需要使用数据包来做到这一点。

即使您自己情不自禁，但您知道一个很好的参考资料，我会很感激的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T03:15:58.670

我建议检查一下[http://code.google.com/p/lucu/](http://code.google.com/p/lucu/)

> 在这里，您将找到有关如何创建自己的视频游戏的信息。我希望你喜欢这个指南。快乐游戏！
> 
> 这里托管的文件是：
> 
> 一个 java 2D 多人游戏（带有源代码） 一个 java 3D 多人游戏（带有源代码） 关于如何创建这些游戏的教程

# android - 启动文件和 MIME 类型的意图？

> ID：11068648
> 
> 赞同：20
> 
> 时间：2012-06-17T03:09:25.060
> 
> 标签：android, android-intent, file-browser

我已经在这里查看了所有类似的问题，但我一生都无法弄清楚我做错了什么。

我编写了一个尝试启动各种文件的应用程序，类似于文件浏览器。单击文件时，它会尝试根据其关联的 MIME 类型启动程序，或者显示“选择要启动的应用程序”对话框。

这是我用来启动的代码：

```
 File file = new File(app.mediaPath() + "/" +_mediaFiles.get(position));

    Intent myIntent = new Intent(android.content.Intent.ACTION_VIEW);

    String extension = android.webkit.MimeTypeMap.getFileExtensionFromUrl(Uri.fromFile(file).toString());
    String mimetype = android.webkit.MimeTypeMap.getSingleton().getMimeTypeFromExtension(extension);
    myIntent.setDataAndType(Uri.fromFile(file),mimetype);
    startActivity(myIntent); 
```

这失败并生成错误：

```
android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.intent.action.VIEW dat=file:///file:/mnt/sdcard/roms/nes/Baseball_simulator.nes } 
```

现在，例如，如果我安装 OI 文件管理器，它会打开而不是引发此错误，然后如果我从其中单击同一文件，它会启动相应的对话框。

我注意到该特定文件的 MIME 类型失败，但其他 mime 类型如`.zip`返回值。

当 MIME 类型为 null 以调用允许用户选择的对话框时，我是否遗漏了一些东西？

我尝试了启动应用程序的其他变体，包括不设置 MIME 类型并且仅使用`.setData`但没有成功。

我想要发生的操作是，用户单击文件，如果它与应用程序启动的应用程序相关联，如果没有，用户将获得带有应用程序列表的“使用完成操作”对话框。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-06-18T18:39:36.827

好吧，感谢 Open Intent 的家伙，我第一次通过他们的文件管理器中的代码错过了答案，这就是我最终得到的结果：

```
 File file = new File(filePath);
    MimeTypeMap map = MimeTypeMap.getSingleton();
    String ext = MimeTypeMap.getFileExtensionFromUrl(file.getName());
    String type = map.getMimeTypeFromExtension(ext);

    if (type == null)
        type = "*/*";

    Intent intent = new Intent(Intent.ACTION_VIEW);
    Uri data = Uri.fromFile(file);

    intent.setDataAndType(data, type);

    startActivity(intent); 
```

如果您使用`"* / *"`无法从系统中确定它的 mime 类型（它是`null`），它会触发相应的选择应用程序对话框。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T05:25:06.870

[您可以使用通用意图打开文件，例如此处](http://www.anddev.org/building_an_android_filebrowser_list-based_-t67.html)提出的此代码段：

```
private void openFile(File aFile){
    try {
        Intent myIntent = new Intent(android.content.Intent.VIEW_ACTION,
        new ContentURI("file://" + aFile.getAbsolutePath()));
        startActivity(myIntent);
    } catch (URISyntaxException e) {
        e.printStackTrace();
    }
} 
```

但我通常会看到 Applications 在嵌套的 if 中检查文件的扩展名，最后尝试使用“ **text/plain** ”类型打开文件：

```
Intent generic = new Intent();
generic.setAction(android.content.Intent.ACTION_VIEW);
generic.setDataAndType(Uri.fromFile(file), "text/plain");     
try {
    startActivity(generic);
    } catch(ActivityNotFoundException e) {
    ...
} 
```

[您可以在这个问题](https://stackoverflow.com/questions/10005083/launching-a-file-using-action-view-intent-action)或这个[开源项目](https://github.com/nexes/Android-File-Manager/tree/master/src/com/nexes)中看到完整的代码。我希望这对你有帮助。

# gcc - gcc 将共享库与依赖库链接

> ID：11068652
> 
> 赞同：1
> 
> 时间：2012-06-17T03:10:19.407
> 
> 标签：gcc, linker

我有一个包含多个可执行目标和多个共享库的复杂项目。共享库目前没有链接它们的依赖共享库，结果是用于构建可执行文件的链接器参数非常长且难以维护。我想添加依赖项，以便 Makefile 变得更干净。

我想添加以下（示例）：

```
gcc -shared -o libshared.so -lshared_dependent1 -lshared_dependent2 objfile1.o objfile2.o 
```

有没有办法测试 libshared.so 中的所有符号是否会根据该行解析？如果指定的任何 shared_dependent 库是不必要的，有没有办法打印出来？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T14:31:58.863

我知道如何强制没有未定义的符号：

```
-Wl,--no-undefined 
```

由于 autotools 经常抱怨 Windows 上缺少这种情况。

我不知道是否可以检查是否有任何未使用的库，除了将它们一一排除。

# maven - Maven 覆盖战争不是由 Maven 生成的

> ID：11068654
> 
> 赞同：1
> 
> 时间：2012-06-17T03:10:35.550
> 
> 标签：maven, integration, war

我对 Maven 很陌生，所以如果这是一个新手问题，我深表歉意。我们正在尝试将第 3 方应用程序集成到我们的应用程序中。此第 3 方功能作为战争文件提供给我们。作为此集成的一部分，我想添加一些额外的 jar 和一个属性文件。谷歌搜索，我发现了[overlays](http://maven.apache.org/plugins/maven-war-plugin/overlays.html)。但是，在我看到的所有示例中，看起来被覆盖的战争本身是由 Maven 生成的，因此 Maven 可以找出两者之间的依赖关系、冲突等。我只是想知道是否有办法让我用我想要的这些额外的东西来覆盖这场第三方战争。如果是这样，在 pom.xml 中会是什么样子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T06:15:24.650

为此，您要覆盖的 WAR 文件必须在 Maven 存储库中提供。可以是公共的，如中央 Maven 或 JBoss 的，也可以是您或您的公司托管的私有的。在后一种情况下，您可以自己将其上传到那里，即使它不是由 Maven 生成的。

如果 WAR 有合适的 POM 文件，依赖关系会更好地工作，但没有它也能工作。如果没有 POM，WAR 文件基本上会被解压缩，并且您的更改会通过复制内容应用到它。您可以使用`dependentWarExcludes`and`warSourceExcludes`标记对其进行一些自定义。

如果您需要更多帮助，请从您的 POM发布*战争插件配置。*

# javascript - 获取 twitter bootstrap btn-group 以像带有下拉菜单的分组导航栏一样操作

> ID：11068657
> 
> 赞同：5
> 
> 时间：2012-06-17T03:10:51.703
> 
> 标签：javascript, css, twitter-bootstrap

我一直在尝试让带有下拉菜单的 Twitter Bootstrap`btn-group`用于具有下拉菜单的多个按钮。

例子：

```
 <div class="btn-group">
      <a href="#" class="btn">1</a>
      <a href="#" class="btn">2</a>
      <a href="#" class="btn">3</a>
      <a href="#" class="btn">4</a>
      <a href="#" class="btn">5</a>
  </div> 
```

还有我的尝试：http: [//jsfiddle.net/x2BGB/](http://jsfiddle.net/x2BGB/)

这将显示一个按钮组。我希望该组中的某些按钮具有下拉菜单。

我想要实现的一个例子是： ![在此处输入图像描述](../Images/4823fbe6c71ebfe7234ffd8d99ff3aef.png)

注意：当一个按钮靠近另一个按钮时，分组按钮“栏”不应有圆角。（右边）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-18T21:36:25.827

我创建了一个类 btn-toolbar2 以避免冲突并覆盖 btn-toolbar 默认行为。

下拉菜单必须在它们自己的 btn 组中。

```
<div class="btn-toolbar btn-toolbar2">
  <div class="btn-group">
    <button class="btn">Dashboard</button>
  </div>
  <div class="btn-group">
    <button class="btn">Button 1</button>
    <button class="btn dropdown-toggle" data-toggle="dropdown">
      <span class="caret"></span>
    </button>
    <ul class="dropdown-menu">
      <li><a href="#">Action</a></li>
      <li><a href="#">Another action</a></li>
      <li><a href="#">Something else here</a></li>
      <li class="divider"></li><li><a href="#">Separated link</a></li>
    </ul>
  </div>
  <div class="btn-group">
    <button class="btn">Item 3</button>
    <button class="btn dropdown-toggle" data-toggle="dropdown">
      <span class="caret"></span>
    </button>
    <ul class="dropdown-menu">
      <li><a href="#">Action</a></li>
      <li><a href="#">Another action</a></li>
      <li><a href="#">Something else here</a></li>
      <li class="divider"></li>
      <li><a href="#">Separated link</a></li>
    </ul>
  </div>
</div> 
```

与CSS

```
@import url('http://twitter.github.com/bootstrap/assets/css/bootstrap.css');

.btn-toolbar2 >.btn-group + .btn-group {
margin-left: -5px;
}

.btn-toolbar2 > .btn-group > .btn, .btn-toolbar2 > .btn-group > .dropdown-toggle
{
    -webkit-border-radius: 0px;
    border-radius: 0px;
    -moz-border-radius: 0px;
}

.btn-toolbar2 > .btn-group:first-child > .btn, .btn-toolbar2 > .btn-group:first-child > .dropdown-toggle{
    -webkit-border-bottom-left-radius: 4px;
    border-bottom-left-radius: 4px;
    -webkit-border-top-left-radius: 4px;
    border-top-left-radius: 4px;
    -moz-border-radius-bottomleft: 4px;
    -moz-border-radius-topleft: 4px;    
}

.btn-toolbar2 > .btn-group:last-child > .btn:last-child, .btn-toolbar2 > .btn-group:last-child > .dropdown-toggle:nth-last-child(2){
    -webkit-border-bottom-right-radius: 4px;
    border-bottom-right-radius: 4px;
    -webkit-border-top-right-radius: 4px;
    border-top-right-radius: 4px;
    -moz-border-radius-bottomright: 4px;
    -moz-border-radius-topright: 4px;    
} 
```

[http://jsfiddle.net/baptme/x2BGB/4/](http://jsfiddle.net/baptme/x2BGB/4/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T11:26:42.457

按钮组的[引导文档说明了这一点：](http://twitter.github.com/bootstrap/components.html#buttonGroups "按钮组")

> 带有下拉菜单的按钮必须单独包装在 .btn-toolbar 内自己的 .btn-group 中，以便正确呈现。

显然，如果你这样做，那么每个按钮都是分开的，即你失去了工具栏的效果。所以看起来你不能在同一个工具栏中有多个下拉菜单 - 我想这是 Bootstrap 如何实现下拉菜单的限制。

[您可以在nav-bar](http://twitter.github.com/bootstrap/components.html#navbar "导航栏")中有多个下拉菜单，因此您可以改用它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-08T00:08:12.610

只需使用：

```
 <div class="btn-group">
      <button class="btn" onclick="window.location.href='http://whatever.location';">
       ...
       ...
  </div> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-31T17:31:21.090

添加这个 CSS 来修复它：

```
.btn-group > .btn-group {
  float: left;
}
.btn-group > .btn-group > .dropdown-toggle {
  .border-radius(0);
}
.btn-group > .btn-group > .dropdown-toggle:first-child {
     -webkit-border-top-left-radius: 4px;
         -moz-border-radius-topleft: 4px;
             border-top-left-radius: 4px;
  -webkit-border-bottom-left-radius: 4px;
      -moz-border-radius-bottomleft: 4px;
          border-bottom-left-radius: 4px;  
}
.btn-group > .btn-group > .dropdown-toggle:last-child {
     -webkit-border-top-right-radius: 4px;
         -moz-border-radius-topright: 4px;
             border-top-right-radius: 4px;
  -webkit-border-bottom-right-radius: 4px;
      -moz-border-radius-bottomright: 4px;
          border-bottom-right-radius: 4px;
} 
```

它看起来如何

![在此处输入图像描述](../Images/0aa79abfd7e46ccc6a8afb395ac760f2.png)

# git - IntelliJ IDEA 中的变更列表是什么？

> ID：11068659
> 
> 赞同：83
> 
> 时间：2012-06-17T03:11:30.597
> 
> 标签：git, intellij-idea

IntelliJ IDEA 中的变更列表是什么？它类似于提交吗？添加一个时，我有以下选项：

*   名称（文本字段）
*   评论（文本字段）
*   激活此更改列表（复选框）
*   跟踪上下文（复选框）

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-06-17T10:42:45.413

[Changelists](http://www.jetbrains.com/idea/webhelp/changelist.html)与 Git 一起使用时，是一种将索引（即您添加到 git 的文件）拆分为逻辑文件集的方法。请参阅[通过 IntelliJ IDEA 在本地使用 Git](http://wiki.jetbrains.net/intellij/Using_Git_Locally_with_IntelliJ_IDEA#Committing_Changes_to_Master_.28Revision_1.29)

这些变更列表可以代表您想要的任何内容（任务、修复、合并等），但它们不是 git 提交。

您可以提交一个或多个更改列表。

![默认更改列表](../Images/ac4d77cf37f7ae9026bb8d9a7d09fb88.png)

当您将文件添加到 Git 索引时，IntelliJ IDEA 会将您的文件添加到默认更改列表中，命名为...“default”。

# c++ - 如何将 void 指针转换为类数组

> ID：11068660
> 
> 赞同：3
> 
> 时间：2012-06-17T03:11:51.690
> 
> 标签：c++, class, pointers, callback

我正在尝试将 void 指针转换为回调函数中的类数组，该函数仅支持将 void 指针作为将参数传递给回调的一种方式。

```
class person
{
    std::string name, age;
};
void callback (void *val)
{
    for (int i = 0; i < 9; i++)
    {
        std::cout << (person [])val[i].name;
    }
}
int main()
{
    person p[10];
    callback((void*)p);
} 
```

我的目标是能够将类的数组传递`person`给回调，然后打印出他们的姓名和年龄等数据。但是，编译器不喜欢我正在做的事情并抱怨`error: request for member 'name' in 'val', which is of non-class type 'void*'`我该怎么做呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T04:27:35.950

如果您希望能够恢复大小，则需要使用一个在运行时跟踪大小的容器。我建议使用 std::vector 而不是原始数组。

```
std::vector<person> p(10);
static_cast<std::vector<Person>*>(val); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T03:18:10.557

您需要将其转换为`person *`. 数组衰减为指针，因此将 void 指针转换为`person`指针可以按预期工作。更清晰、更 C++ 和更好的方法是：

```
std::cout << static_cast<person *>(val) [i].name; 
```

C 方式也有效，但需要额外的括号，并且当您有适当的演员表可用时非常不安全/邪恶：

```
std::cout << ((person *)val) [i].name; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T03:25:23.403

下面的代码有效。但是你怎么知道数组的大小？

```
void callback(void* p)
{

    Person* person = static_cast<Person*>(p);
    for ( int i = 0; i < 10; ++i)
        std::cout << person[i].age_m << "\n";
} 
```

# javascript - JavaScript文本幻灯片不起作用？

> ID：11068661
> 
> 赞同：0
> 
> 时间：2012-06-17T03:12:25.287
> 
> 标签：javascript, html

我正在为我的博客制作 Javascript 幻灯片，但该数组似乎无法正常工作。有人可以说我做错了什么吗

```
 <SCRIPT type="text/javascript">
    var blog = new Array()

    blog[0]= "<h4>Sunday 17 of June 2012</h4><p title='Blog'>Donec tempus risus eget ligula viverra eget placerat odio tincidunt. Duis nisl sem, scelerisque faucibus congue vitae, accumsan at lectus. Cras vestibulum arcu ut lorem luctus eu pharetra tortor ultricies. Nam iaculis orci mauris. Etiam luctus, mauris sed adipiscing ullamcorper, augue enim volutpat sem, ut sagittis ipsum nibh ac nulla. Nam ultrices, quam eget sollicitudin porta, sapien mauris pulvinar augue, posuere hendrerit erat ligula ut magna. Maecenas laoreet nisi vitae magna consectetur a mollis purus tristique. Pellentesque elementum arcu non urna convallis eleifend. Aliquam eu lorem sed risus tempus tempor. Donec malesuada velit in odio vulputate iaculis. In tristique neque quis velit posuere adipiscing. Nullam dui neque, scelerisque non egestas feugiat, pellentesque vitae mauris.</p><hr>" 
```

所以数组一直持续到

```
 function display1()
    {
        document.getElementById(blogShow).innerHTML( blog[0])
    }
    function display2()
    {
        document.getElementById(blogShow).innerHTML(blog[1])
    }
    function display3()
    {
        document.getElementById(blogShow).innerHTML(blog[2])
    }
    function display4()
    {
        document.getElementById(blogShow).innerHTML(blog[3])
    }
    function display5()
    {
        document.getElementById(blogShow).innerHTML(blog[4])
    }
 </SCRIPT>

 <div id="blogShow">
    <SCRIPT type="text/javascript">display1()</SCRIPT>
 </div>

<div id="blogNav">
        <input type="button" onClick="display2()" value="1" class="button">
        <input type="button" onClick="display3()" value="2" class="button">
        <input type="button" onClick="display4()" value="3" class="button">
        <input type="button" onClick="display5()" value="4" class="button">
    </div> 
```

我知道这都是内联的，我会在它工作后清理

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T03:53:15.023

当你通过 id 抓取 div 元素时，你需要传入一个 id 的字符串：

```
document.getElementById('blogShow') 
```

当您分配 innerHTML 时，您需要使用`.innerHTML = value`而不是`.innerHTML(value)`：

```
document.getElementById('blogShow').innerHTML = blog[0] 
```

您应该以分号结束您的语句`;`（由于 JavaScript 分号插入，这部分不是绝对必要的，但您应该插入自己的分号以避免将来出现意外行为）：

```
document.getElementById('blogShow').innerHTML = blog[0]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T04:00:54.293

您的初始脚本存在一些问题。这是一个可以玩的小提琴[http://jsfiddle.net/KXLSb/](http://jsfiddle.net/KXLSb/)

亮点是：

*   您在`getElementById`参数周围缺少引号。
*   `innerHTML`不是一个需要参数的函数，它需要一个字符串来分配给它。

以下是相关代码：

```
<script type="text/javascript">
//Declare array
var blog = [];

//Add elements
blog[0] = "<h4>Sunday 17 of June 2012</h4><p title='Blog'>Donec &hellip; vitae mauris.</p><hr>";
blog[1] = "<h4>Monday 18 of June 2012</h4><p title='Blog'>Donec &hellip; vitae mauris.</p><hr>";
blog[2] = "<h4>Tuesday 19 of June 2012</h4><p title='Blog'>Donec &hellip; vitae mauris.</p><hr>";
blog[3] = "<h4>Wednesday 20 of June 2012</h4><p title='Blog'>Donec &hellip; vitae mauris.</p><hr>";
blog[4] = "<h4>Thursday 21 of June 2012</h4><p title='Blog'>Donec &hellip; vitae mauris.</p><hr>";
blog[5] = "<h4>Friday 22 of June 2012</h4><p title='Blog'>Donec &hellip; vitae mauris.</p><hr>";
blog[6] = "<h4>Saturday 23 of June 2012</h4><p title='Blog'>Donec &hellip; vitae mauris.</p><hr>";

//Use one function instead of multiple, just pass in the array index to use
function displayBlogEntry(index) {
    //Wrap the div id in quotes as getElementById expects a string.
    var div = document.getElementById("blogShow");
    //innerHTML is not a function expecting a parameter, it is a property expecting a string.
    //use lefthand assignment instead.
    div.innerHTML = blog[index];
}

//Load first entry on DOM ready
window.onload = function() {
    displayBlogEntry(0);
}​
</script>

<div id="blogShow"></div>

<div id="blogNav">
    <input type="button" onClick="displayBlogEntry(0)" value="0" class="button">
    <input type="button" onClick="displayBlogEntry(1)" value="1" class="button">
    <input type="button" onClick="displayBlogEntry(2)" value="2" class="button">
    <input type="button" onClick="displayBlogEntry(3)" value="3" class="button">
    <input type="button" onClick="displayBlogEntry(4)" value="4" class="button">
    <input type="button" onClick="displayBlogEntry(5)" value="5" class="button">
    <input type="button" onClick="displayBlogEntry(6)" value="6" class="button">
</div>​ 
```

# php - 如何在下拉列表中过滤所选值的文本

> ID：11068667
> 
> 赞同：0
> 
> 时间：2012-06-17T03:13:41.967
> 
> 标签：php, jquery, arrays, forms, filter

我有一个下拉菜单。有产品类型。产品类型具有与机器组相对应的关联值（从下拉列表中）。

所以每个选项应该有三个变量——机器名、值、机器组。

我可以获得机器名称，并且可以获得机器值（并将它们显示在不同的字段中）......我无法弄清楚的是如何将值更改为机器组。

```
jQuery('#MachineName').bind('change', function()
    {

      //get selected value from drop down;
        var selectedValue = jQuery("#MachineName").val();

      //populate a text field with the selected drop down value
        jQuery("#MachineValue").val(selectedValue); 
```

我想做的是保留那个 MachineValue，然后用排序过的 MachineGroup 填充另一个文本字段

我一直试图通过类似的东西来运行它

```
 switch(jQuery(this).val()){
    case "236" : newVal = "8";
    break; 
```

但我不想“改变”我只想做一个“if then”类型过滤器的值，所以可能是这样的：

```
 '236' => "8", '237' => "5", 
```

我只是不知道如何正确地说“根据 MachineValue 分配 MachineGroup”（然后让它填充不同的文本字段）

最后，我将拥有三个领域。下拉列表、MachineValue 和 MachineGroup。下拉和值都完成了，我只需要做Group。（而且我可以根据 MachineName 对 Group 进行排序......只是不确定哪个更容易）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T03:36:09.313

客户端最简单的方法是让服务器`data-`为标记添加一些额外的属性。`jQuery.data()`使检索这些变得非常容易。

html:

```
<option value="5" data-group="foo" data-name="Bar">Bar</option> 
```

JS：

```
$('select').change(function(){
    var $sel=$(this).find('option:selected');
    var machineGroup=$sel.data('group');
    var machineName=$sel.data('name');
    var value= $sel.val()// or $(this).val();
}); 
```

API（请阅读下面的第一系列示例，原始 API 中没有该功能）

[http://api.jquery.com/data/](http://api.jquery.com/data/)

# actionscript-3 - 无法从 AS3 中的文档类访问静态变量

> ID：11068668
> 
> 赞同：0
> 
> 时间：2012-06-17T03:14:01.803
> 
> 标签：actionscript-3, static, document, root

我有一个名为“CityModule”的文档类，以及一个名为“City”的资产。下面是每个的coe。出于某种原因，我无法从 CityModule 访问 City 类的静态变量：

CityModule.as:

```
package {

  public class CityModule extends MovieClip {

      public function CityModule() {

          var buildings:Array = City.getBuildings(); //gives error

      }
    }
  }
} 
```

城市.as:

```
package {

import flash.display.MovieClip;

public class City extends MovieClip {

    private static var _buildings:Array = [
        {className:'City.Generic1', type:'generic'},
        {className:'City.Generic2', type:'generic'},
        {className:'City.Generic3', type:'generic'}
    ];

    public function City(){
        //empty
    }

    public static function getBuildings():Array{
        return _buildings;
    }
  }
} 
```

这样做会给我一个“调用可能未定义的方法 getBuildings”错误。如果我实例化一个 City 实例，我可以完美地看到任何 public/getter/setter。但是静态不起作用...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T03:33:29.533

您在 CityModule 中缺少 MovieClip 的导入。

以下代码在 Flash Develop 中为我编译。

```
//CityModule.as
package  
{
    import flash.display.MovieClip;
    public class CityModule extends MovieClip
    {
        public function CityModule() 
        {
            var buildings:Array = City.getBuildings(); //gives error
        }
    }
}

//City.as
package {

import flash.display.MovieClip;

public class City extends MovieClip {

    private static var _buildings:Array = [
        {className:'City.Generic1', type:'generic'},
        {className:'City.Generic2', type:'generic'},
        {className:'City.Generic3', type:'generic'}
    ];

    public function City(){
        //empty
    }

    public static function getBuildings():Array{
        return _buildings;
    }
  }
}

//Main.as
package 
{
    import flash.display.Sprite;
    import flash.events.Event;

    public class Main extends Sprite 
    {

        public function Main():void 
        {
            if (stage) init();
            else addEventListener(Event.ADDED_TO_STAGE, init);
        }

        private function init(e:Event = null):void 
        {
            removeEventListener(Event.ADDED_TO_STAGE, init);
            // entry point

            var c:CityModule = new CityModule();
        }

    }

} 
```

# android - 使用加速度计读取 android 手机的 xyz 坐标

> ID：11068671
> 
> 赞同：16
> 
> 时间：2012-06-17T03:16:00.447
> 
> 标签：android, accelerometer, android-2.3-gingerbread

我将开发需要**在 3D 空间上读取手机的 x,y,z 坐标的**Android 应用程序。

我想写一个简单的代码并在设备上测试..

我在设备和模拟器上都使用姜饼。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-27T15:44:33.653

要从加速度中获取位置，您需要对其进行两次积分。

积分加速度为您提供速度，积分速度为您提供位置。

请记住，集成噪声会产生漂移，而集成漂移会产生大量漂移，Android 传感器往往会产生大量噪声。

在我的 Galaxy S3 上，我已经能够使用 Google 的线性加速度计复合传感器在 5 秒内将位置漂移降低到 0.02 m。

我不确定您是否可以在姜饼上使用线性加速度计传感器。如果不能，则必须在积分之前消除重力。

如果您还没有，请在此处阅读所有内容 [http://developer.android.com/guide/topics/sensors/sensors_motion.html](http://developer.android.com/guide/topics/sensors/sensors_motion.html)

一场关于 android 中运动传感器的精彩演讲

[http://www.youtube.com/watch?v=C7JQ7Rpwn2k](http://www.youtube.com/watch?v=C7JQ7Rpwn2k)

代码：

```
static final float NS2S = 1.0f / 1000000000.0f;
float[] last_values = null;
float[] velocity = null;
float[] position = null;
long last_timestamp = 0;

@Override
public void onSensorChanged(SensorEvent event) {
    if(last_values != null){
        float dt = (event.timestamp - last_timestamp) * NS2S;

        for(int index = 0; index < 3;++index){
            velocity[index] += (event.values[index] + last_values[index])/2 * dt;
            position[index] += velocity[index] * dt;
        }
    }
    else{
        last_values = new float[3];
        velocity = new float[3];
        position = new float[3];
        velocity[0] = velocity[1] = velocity[2] = 0f;
        position[0] = position[1] = position[2] = 0f;
    }
    System.arraycopy(event.values, 0, last_values, 0, 3);
    last_timestamp = event.timestamp;
} 
```

现在您有了 3d 空间中的位置，请记住它假定手机在开始采样时是静止的。

如果你不消除重力，它很快就会很远。

这根本不会过滤数据，并且会产生很多漂移。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-17T03:37:10.443

阅读[本教程](http://www.techrepublic.com/blog/app-builder/a-quick-tutorial-on-coding-androids-accelerometer/472)。

上面给出的教程的简要总结::

首先获取[SensorManager](http://developer.android.com/reference/android/hardware/SensorManager.html)和[Sensor](http://developer.android.com/reference/android/hardware/Sensor.html)的实例。
里面`onCreate()`::

```
mSensorManager = (SensorManager) getSystemService(Context.SENSOR_SERVICE);
mAccelerometer = mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER);
mSensorManager.registerListener(this, mAccelerometer, SensorManager.SENSOR_DELAY_NORMAL); 
```

在此之后，覆盖`onSensorChanged(SensorEvent event)`并使用`event.values[]`来获取坐标。

```
@Override
public void onSensorChanged(SensorEvent event) {
    float x = event.values[0];
    float y = event.values[1];
    float z = event.values[2];
} 
```

# c# - 取消特定安装的 ClickOnce 更新

> ID：11068673
> 
> 赞同：0
> 
> 时间：2012-06-17T03:16:34.667
> 
> 标签：c#, .net, winforms, .net-4.0, clickonce

我正在使用 ClickOnce，并将其设置为在应用程序启动后自动检查更新。一些用户不想被更新提示所困扰，因为这个应用程序可以从命令行运行。

我想知道是否有可能，因为更新检查是在应用程序启动后进行的，所以从代码中取消这个检查。

我知道可以处理代码的整个更新，但这对我不起作用，因为我很久以前遇到的一些错误与我的应用程序具有文件/图标关联这一事实有关。我不是 100% 这是错误，但我很确定有一些错误阻止我自己处理更新。

有什么办法可以实现我想要做的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T04:31:42.057

如果您想要与 Visual Studio 中的两个预定义选项不同的行为，则需要覆盖整个内容并取消选中该选项以检查 Visual Studio 中的所有更新。

不过，这实际上只是几个函数调用，所以它不应该那么糟糕。

无论您在文件关联方面遇到什么问题，都不应与此相关。这是相同的机制。

您可以实现它，使其在启动时仍检查并应用更新，但不会向用户呈现任何 UI。这将确保您的应用程序为所有用户保持更新，但会避免用户在从命令行使用它时反对的中断。

# iphone - NSURLConnection 响应

> ID：11068674
> 
> 赞同：0
> 
> 时间：2012-06-17T03:16:42.250
> 
> 标签：iphone, ios5, nsurlconnection

嗨，我有这个代码。

```
NSString *urlToAuthPage = [[NSString alloc] initWithFormat:@"&name=%@&street=%@&city=%@&state=%@&zip=%@&lat=%@&lon=%@&hash=%@", name, street, city, state, zip, str1, str2, hash];

        NSData *postData = [urlToAuthPage dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:NO];
        NSString *postLength = [NSString stringWithFormat:@"%d",[urlToAuthPage length]];
        NSMutableURLRequest *request = [[NSMutableURLRequest alloc] init];
        [request setURL:[NSURL URLWithString:[NSString stringWithFormat:@"http://oo.mu/partyapp/post-party.php"]]];
        [request setHTTPMethod:@"POST"];
        [request setValue:postLength forHTTPHeaderField:@"Content-Length"];
        [request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"Content-Type"];
        [request setHTTPBody:postData];        

        NSString *infoString = [NSString stringWithFormat:@"http://oo.mu/partyapp/post-party.php?name=%@&street=%@&city=%@&state=%@&zip=%@&lat=%@&lon=%@&hash=%@", name, street, city, state, zip, str1, str2, hash];
        NSURL *infoUrl = [NSURL URLWithString:infoString];
        NSData *infoData = [NSData dataWithContentsOfURL:infoUrl];
        NSError *error;
        responseDict = [NSJSONSerialization JSONObjectWithData:infoData options:0 error:&error];
        NSLog(@"%@", responseDict); 
```

您可能注意到我有一些我知道的不需要的代码，但我对其他东西却得到了错误的响应。如何清理一些代码并从带有 urlToAuthPage 的请求中获取响应？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T05:44:27.653

我想我明白你在说什么：你知道如何使用 NSData 方法和 URL 来调用请求，但这不支持你想要提供请求正文的 POST。

另一个问题是，即使你让它工作，它也是同步的。NSURLConnection 类中有一个很好的解决方案。像在代码的前半部分中所做的那样构建您的请求（在正文中使用发布数据）。然后这样做：

```
[NSURLConnection sendAsynchronousRequest:request
    queue:[NSOperationQueue mainQueue]
    completionHandler:^(NSURLResponse *response, NSData *data, NSError *error) {

    // your data or an error will be ready here
}]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T06:01:53.410

正如上面@danh 强调的那样，您可以使用 NSURLConnection 在同步和异步请求之间进行选择。我想提一下，你可以通过委托而不是块来实现异步，如果这对你来说似乎更平易近人的话。

基本上，您可以实现 NSURLConnectionDelegate 和 NSURLConnectionDataDelegate 中的方法，然后将自己指定为连接的委托，并在这些协议中定义的回调期间做出适当的响应。

```
[NSURLConnection connectionWithRequest:yourNSMutableURLRequest delegate:self]; 
```

如果你经常这样做，你可以像我一样，将所有异步的东西抽象到一个连接管理器中，它可以处理同步和异步请求（对于异步，它存储一个指向感兴趣方的指针并执行回调当请求完成时）。这是一个简单的接口，我在所有地方都使用它来处理这两种请求，并且它与进一步的抽象配合得很好（比如制作一个 webRequest 类来封装一个带有正文的 POST 请求）。

# vb.net - 有没有办法查找网站上是否有文字？

> ID：11068675
> 
> 赞同：-1
> 
> 时间：2012-06-17T03:16:52.490
> 
> 标签：vb.net, web

所以说我想找到“你好，世界！”这个词。在网页上。它的 ID 为“文本”。使用名为 WebBrowser1 的 WebBrowser，如果该文本存在于网页上，是否有方法返回 true，或者如果它不存在，它将返回 false？无论哪种方式，URL 都将完全相同。

编辑：到达它的 HTML 路径很长，所以我需要在页面上找到文本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T03:38:16.007

第一的：

```
Dim wb as new WebClient
Dim html as string = wb.DownloadString("http://stackoverflow.com") 
```

然后，您搜索该字符串，为此您可以使用[IndexOf](http://msdn.microsoft.com/en-us/library/k8b1470s.aspx#Y575)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T09:49:07.000

我支持 Luxspes 的回答。

更多代码只是为了更有帮助。尚未对此进行测试，我希望这可行：

```
Dim wb As New WebClient
Dim html As String = wb.DownloadString("http://stackoverflow.com")
'To know if there are YOUR STRING inside
Dim BooleanAnswer As Boolean = html.Contains("YOUR STRING")
'To know how many instances
Dim HowMany As Integer = FindIndexes("YOUR STRING", html).Count
'To output them all through Console.Write or your preferred output(the indexes)
Dim FoundList As List(Of Integer) = FindIndexes("YOUR STRING", html)
For i As Integer = 0 to FoundList.Count - 1
            Console.Write(i & "-index: " & FoundList(i).toString)
Next i

'Function
Private Function FindIndexes(ByVal searchWord As String, ByVal src As String) as List(Of Integer)
            Dim searchSRC As String = src
            Dim toFind As String = searchWord
            Dim lastIndex As Integer = 0
            Dim listOfIndexes As New List(Of Integer)
            Do Until lastIndex < 0
                lastIndex = searchSRC.IndexOf(toFind, lastIndex + toFind.Length)
                If lastIndex >= 0 Then
                    listOfIndexes.Add(lastIndex)
                End If
            Loop
            Return listOfIndexes
End Function 
```

# c++ - 特化非模板类的可变参数模板成员函数

> ID：11068682
> 
> 赞同：4
> 
> 时间：2012-06-17T03:18:21.750
> 
> 标签：c++, templates, c++11, variadic-templates

我对这段代码有问题：

```
#include <iostream>

using namespace std;

class A {
public:
        template<typename T, typename... Args>
        void stuff(Args... args);
};

template<typename T, typename... Args>
void A::stuff(Args... args) {
        cout << sizeof...(args) << endl;
}

template<>
void A::stuff<int>() {
        cout << "int" << endl;
}

int main() {
        A a;
        A b;

        a.stuff<char>();
        b.stuff<int>();
} 
```

[试图编译它](http://ideone.com/cuTtK)，我得到这个错误：

```
template-id 'stuff<int>' for 'void A::stuff()' does not match any template declaration 
```

我究竟做错了什么？我在没有可变参数的情况下尝试了它并且它有效，但是我如何专门化可变参数模板成员函数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T05:25:41.900

这看起来像一个错误。问题不仅限于完全专业化的成员函数模板。即使使用自由功能模板也可以复制它，如下所示：

```
template<typename T, typename... Args>
void stuff2(Args... args);

template<typename T, typename... Args>
void stuff2(Args... args) {
    cout << sizeof...(args) << endl;
}

template<>
void stuff2<int>() {
    cout << "int" << endl;
}
int main() {} 
```

虽然 clang 3.2 编译得很好，但 gcc 抱怨：

> spec.cpp:31:6: 错误：'void stuff2()' 的模板 ID 'stuff2' 与任何模板声明都不匹配

有一个相关的[SO question](https://stackoverflow.com/questions/7767202/template-specialization-with-variadic-templates)。

一条[消息](http://gcc.gnu.org/ml/gcc/2008-11/msg00240.html)似乎确认这确实是一个错误。

# javascript - 如何创建“浮动”框？

> ID：11068684
> 
> 赞同：2
> 
> 时间：2012-06-17T03:19:12.147
> 
> 标签：javascript, html

假设我有一个链接，或者只是一个简单的词。当“onmouseover”时，如何在鼠标上方弹出一个小的“信息框”来显示信息？（必须查询信息..但这是第 2 步）在处理第 2 步之前，我需要学习如何执行第 1 步。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T03:25:08.847

如果您的意思是工具提示，请使用该`title`属性。

```
<a href="#" title="Does nothing">Link</a> 
```

*编辑：*它适用于任何元素。您需要做的就是将鼠标悬停在元素上一段时间。

# android - 此版本的应用程序未配置为通过 Google Play 计费

> ID：11068686
> 
> 赞同：309
> 
> 时间：2012-06-17T03:20:22.833
> 
> 标签：android, apk, in-app-billing, google-play

当我尝试使用应用内计费运行我的应用程序时，我收到错误消息：“此版本的应用程序未配置为通过 Google Play 计费。有关更多信息，请查看帮助中心”。

我已经在 Manifest 文件中获得了计费权限，并且我有一个已签名的 .apk 作为草稿上传到 Google Play，并且我还在我的手机上安装了相同的签名 apk。

有关如何解决此问题的任何帮助？

* * *

## 回答 #1

> 赞同：368
> 
> 时间：2014-03-18T02:24:02.840

此错误可能是由多种原因引起的。

以下是 Google IAB 测试的要求列表。

先决条件：

1.  AndroidManifest 必须包含**“com.android.vending.BILLING”权限**。
2.  APK 内置于**发布模式**。
3.  APK使用**发布证书进行****签名**。（重要提示：“App Signing by Google Play”只有在您直接从 GooglePlayStore 下载时才有效！）
***   APK至少一次上传到**alpha/beta 分发渠道（以前 - 作为草稿）到开发者控制台。**（需要一些时间**~2h-24h**）。*   IAB**产品已发布**且其状态设置为**active**。*   **测试帐户已添加**到开发者控制台中。**

 **测试要求：

1.  测试 APK与上传到开发者控制台的**版本代码相同。**
2.  测试 APK使用与上传到 dev.console 的**证书相同的证书进行****签名。**
***   **测试帐户**（不是开发人员）- 是设备上的**主帐户**。（可能不需要主帐户 - 根据[@MinosL](https://stackoverflow.com/users/4571949/minosl)评论）*   **测试帐户被选为**测试人员，并且**与有效的付款方式相关联**。（[@Kyone](https://stackoverflow.com/users/223102/kyone)）**

 **PS：**使用发布证书进行调试**：[https](https://stackoverflow.com/a/15754187/1321401) ://stackoverflow.com/a/15754187/1321401 （链接为Thnx [@dipp](https://stackoverflow.com/users/940038/dipp)）

PPS：想列这个名单很久了。

Thnx [@zlgdev](https://stackoverflow.com/users/3008340/zlgdev)，[@Kyone](https://stackoverflow.com/users/223102/kyone)，[@MinosL](https://stackoverflow.com/users/4571949/minosl)更新

* * *

## 回答 #2

> 赞同：199
> 
> 时间：2012-06-18T01:19:24.623

Ahh 在尝试了几个小时后找到了解决方案。

1.  谷歌需要一段时间来处理应用程序并将它们更新到他们的服务器，对我来说大约需要半天时间。因此，在将 apk 保存为 Google Play 上的草稿后，您必须等待几个小时，应用内产品才能正常响应并允许定期购买。
2.  导出并签署 APK。尝试进行购买的未签名 APK 会出错。

* * *

## 回答 #3

> 赞同：141
> 
> 时间：2012-07-09T12:31:11.263

如果您发布的版本与您在手机上测试的版本不同，也会发生同样的情况。

比如上传`android:versionCode="1"`的版本是 ，你在手机上测试的版本是`android:versionCode="2"`

* * *

## 回答 #4

> 赞同：73
> 
> 时间：2018-07-11T12:21:11.990

在旧的开发者控制台中：

`Settings`-> `Account details`-> `License Testing`-> 具有测试访问权限的 Gmail 帐户并在此处输入您的帐户

在新的开发者控制台中：

`Setup`-> `License Testing`-> 输入您的 Gmail 帐户，点击“Enter”并点击“保存”。

[![Google Play 许可证测试](../Images/08d0bba1aadef44205665b27a606e1e6.png)](https://i.stack.imgur.com/sskgA.png)

* * *

## 回答 #5

> 赞同：48
> 
> 时间：2013-02-06T12:08:46.427

您需要使用您的实时证书签署您的 APK。然后将其安装到您的测试设备上。然后您可以测试 InAppBilling。如果您通过 eclipse 直接运行到设备（在调试模式下）来测试您的应用程序，那么您将收到此错误。

如果您`android.test.purchased`作为 SKU 使用，它将一直有效，但您的最终响应中不会包含 developerPayload。

如果您在应用程序项目中使用自己的草稿，您可以一路测试，但您需要付费，因此之后必须自己退款。

您不能使用与 google play 开发控制台相同的 gmail 帐户购买商品。

* * *

## 回答 #6

> 赞同：28
> 
> 时间：2021-02-03T07:28:41.150

**2021年的结论**

对于所有关心调试的人 - 您可以在**调试**模式下运行、调试和测试代码

以下是您可以如何测试该过程：

（这当然取决于您已经添加并激活了您的产品，并且您的代码已准备好与这些产品集成）

1.  将**com.android.vending.BILLING**添加到清单中
2.  **将签名的 apk**上传到内部测试
3.  添加**许可证测试人员**（**Play 控制台 -> 设置 -> 许可证测试**） - 如果您在设备上使用多个帐户并且不确定要使用哪一个，只需将所有帐户都添加为测试人员。
4.  像往常一样从 Android Studio 运行应用程序（* 应用程序的版本代码应与您刚刚上传到内部测试的版本代码相同）

我做了上述，它工作得很好。

* * *

## 回答 #7

> 赞同：19
> 
> 时间：2018-05-11T00:36:48.753

如果您从 2018 年开始在这里，您需要直接从 Play 商店下载 APK 并安装“派生”APK。可能是因为 Google 的 Play Store 有一个功能“App Signing by Google Play”。

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2013-11-25T07:49:13.203

如果您使用的 apk 版本与 google play 中的版本不同，则会发生这种情况。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2014-07-23T00:20:36.113

与 SO 和其他网站上的许多答案和评论相反，您不必使用已从 Google Play 下载到您的测试设备的产品的 alpha/beta 版本执行初步测试（alpha/beta 发布过程通常会吃光半天）。您也不必从开发人员工作室加载和重新加载签名的发布 apk 到您的测试设备。

您可以使用调试应用程序在应用程序计费服务中调试初步的 Google Play，该调试应用程序通过 ADB 从您的开发人员工作室直接加载到您的测试设备。如果您遇到阻止这种情况的错误，则可能是您在代码中做错了什么。请特别注意您的 SKU（产品 ID）的 CASE 及其格式（例如，如果您将 APK 加载为 com.mydomain.my_product_id，请务必尝试以这种方式购买 - 提供相同的案例和域） . 此外，请特别注意您的 itemType - 这应该是“inapp”或“subs”，分别用于应用程序购买或订阅中的托管/非托管。

根据 Chirag Patel 的建议，只要您正确建立了计费代码，请在初步测试期间使用 android.test.purchased Sku（产品 ID）执行所有测试。在您的计费操作中检查此 ID 以通过签名、令牌和有效负载检查，因为 Google 测试系统不提供此数据。此外，为您的测试产品之一提供此 ID 以测试其购买、解锁/加载和通过您的模式进行的演示。要清除购买，只需使用它，传递相同的 Sku 和以这种方式格式化的令牌字符串 - 没有其他字段相关：

```
 "inapp:"+appContext.getAppContext().getPackageName()+":android.test.purchased"; 
```

完成此阶段的测试后，请使用您的 alpha/beta 产品进行半实时测试。创建一个 Google 群组（本质上是一个邮件列表），将您的测试用户电子邮件添加到其中，然后添加/邀请该群组在此阶段测试您的设备（在您应用的 Google 开发者列表的“APK”部分执行）。购买将是模拟的，但不会实际收费 - 但是为了清除和重新测试购买，Google 表示您必须从您的 Google 钱包中退款。这是唯一需要使用 alpha/beta 负载和测试用户的耗时过程的测试阶段。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2016-01-02T15:48:24.263

让我补充一下发生在我身上的事情，可能会对某人有所帮助。

主要是因为签约。

由于我在项目结构中添加了签名详细信息，我在想每次运行时，都会安装预期的签名 apk。但是选择了构建类型“调试”。

下面的修复为我解决了这个问题。

*   生成构建类型“发布”的签名 apk。
*   手动安装apk。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2013-11-06T22:37:24.020

就我而言，由于已安装的 apk 和上传到市场的 apk 的签名不同，我看到了相同的消息。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2017-03-31T06:50:20.570

有同样的问题，在我阅读 DZDomi 的帖子之前没有解决。突然想到谷歌开发者控制台中有一个设置需要启用。在“应用内购买”部分，您的产品有一行，最右边有一个状态。它应该是活跃的！

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2014-12-31T12:21:45.790

如果您想调试 IAB，您需要做的是：

1.  向 google 提交对清单具有 IAB 权限的应用版本：

2.  在 google play 上向您的应用添加产品：[管理应用内结算](http://developer.android.com/google/play/billing/billing_admin.html)

3.  设置签名的自定义调试密钥库：将[Eclipse 配置为使用签名的密钥库](https://stackoverflow.com/questions/10886814/configure-eclipse-to-use-signed-keystore)

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2018-03-28T06:42:24.840

*最近 google 对其系统进行了更改，由于您已将至少一个 APK 上传到您的控制台，您可以使用任何版本代码/编号的应用程序测试您的应用程序内请求。*

交叉参考[链接](https://github.com/googlesamples/android-play-billing/issues/51)

> 配置[`gradle`](https://developer.android.com/studio/publish/app-signing.html#gradle-sign)为对调试版本进行签名以进行调试。

```
android {
    ...
    defaultConfig { ... }
    signingConfigs {
        release {
            storeFile file("my-release-key.jks")
            storePassword "password"
            keyAlias "my-alias"
            keyPassword "password"
        }
    }
    buildTypes {
        debug {
            signingConfig signingConfigs.release
            ...
        }
    }
} 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2022-01-10T09:15:13.610

**2022 答案：**

这是针对调试/发布版本进行测试的，或者如果应用程序由 Play 签名签名（这意味着从 Google Play 交付的应用程序的签名证书与使用 Android Studio 从您的机器安装应用程序时的证书不同）。

**检查以下步骤：**

1.  在 Google Play Console 上创建您的产品并激活它。
2.  添加许可证测试人员（打开**Google Play 控制台 -> 设置 -> 许可证测试**）。添加您的 android 设备上列出的所有 Google 帐户。
3.  将签名的应用上传到内部测试轨道（必须处于发布模式）。
4.  使用测试链接检查应用程序是否可供下载（确保上传到内部轨道的应用程序版本与您在调试模式下测试的版本匹配）。在那里看到最新上传的版本需要一些时间，所以我建议清除 Play Store 应用程序的缓存。
5.  从 Android Studio 以调试模式运行您的应用。（同样，应用程序版本和内部版本号必须与已发布版本上的值匹配到内部轨道）。

我在两个不同的 Google Play 控制台帐户（两个不同的应用程序）上进行了测试，并且可以正常工作。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2014-09-28T10:04:55.727

我的问题是我试图用 debug.keystore 检查它，我的意思是通过 eclipse 运行它。我用我以 alpha 模式发布的密钥库导出它（它必须在你测试它之前发布）。安装它我的手机，比我可以正常测试它。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2016-08-22T13:54:36.050

如果您在上传 apk 后添加了应用内购买，但尚未在 play 商店（alpha、beta 和生产）中发布应用程序，也会出现此问题。

这基本上意味着，您必须在 Play 商店（alpha、beta 和生产）中发布 apk 之后添加应用内购买。否则您将无法购买或查询应用内购买。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2018-01-22T15:58:02.293

这里没有提到的另一个原因是您需要在真实设备上进行测试。随着模拟器变得非常好，这是一个容易犯的错误。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2018-06-04T09:46:47.163

**解决方案**

将您的应用上传到 Play 商店后稍等片刻，因为谷歌需要一些时间来更新应用版本。它会起作用的！

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2021-08-17T12:02:25.660

如果您想与另一个未发布但具有相同 id、版本代码和已部署版本名称的应用程序集成，请不要忘记在 Flutter 应用程序中编辑 appname.iml 文件版本，因为我坚持使用同样的错误。

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2021-12-07T10:59:10.450

如果所有设置都正常但您仍然收到错误消息`This version of the application is not configured for billing through Google Play. Check the help center for more information.`

在 Play 商店中编辑您的应用内产品定价或停用和激活应用内产品。这将解决问题。****

# ruby - Heroku Post 钩子处理器如何工作，以及如何了解有关构建此类动物的更多信息

> ID：11068687
> 
> 赞同：1
> 
> 时间：2012-06-17T03:20:34.640
> 
> 标签：ruby, heroku, github, git-post-receive

我最近部署了一个 ruby​​ 应用程序，它利用一些本地 heroku 功能通过 github 运行提交后挂钩。

[https://github.com/ajlai/github-heroku-pusher](https://github.com/ajlai/github-heroku-pusher)。

现在我很好奇它是如何工作的，以及我如何构建一个与 heroku 类似的低级插件，可能是另一种语言。

**程序功能的简要总结：**

基本上，这个红宝石程序：

*   每次推送到 github 时自动部署我的 heroku

*   仅由 4 个参数配置（主要参数是 heroku API 密钥）。

*   开箱即用完美：不需要对heroku进行特定的处理。我只是将这个应用程序部署为一个新的 heroku 应用程序，并将 post recieve 挂钩添加到 github，然后发现每次我将它提交到 github 时，heroku 都会自动为我构建我的应用程序。

**我关于这个 ruby​​ 脚本（https://github.com/ajlai/github-heroku-pusher/blob/master/web.rb）如何将这个 github 驱动到 heroku 自动部署服务的问题**

*   它似乎运行一个shell命令。这在 heroku 中是否允许？

*   来自 github 的实际“git pull”在哪里发生？我看到一个“GitPusher”对象，但不清楚该对象的定义位置（我怀疑它是静态导入到类中的 ruby​​ gem 对象，但我看不出它可能来自什么 gem）。

*   我想知道构建这个项目的勇敢的灵魂在哪里找到了为 Heroku 构建这样一个低级挂钩所需的文档。任何关于我如何构建相同同类的自定义工作者钩子（最好是使用 Ruby 以外的语言）的提示都将不胜感激。

# java - 如果我知道其中包含的字符串，如何在 jArray 中找到另一个元素？

> ID：11068693
> 
> 赞同：1
> 
> 时间：2012-06-17T03:23:14.030
> 
> 标签：java, android, json

我有一个 jArray 和来自该 jArray 的字符串“message2”：

```
[{"date":"2012","count":"1","message" : "message1"}, {"date":"2011","count":"2","message":"message2"}} 
```

我如何确定来自哪个 JSONObject“message2”，然后确定与该消息相关的“计数”？

伪代码：

```
x = count of jArray element that contains the string "message2" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T03:44:01.983

如果 JSONArray 未排序，这是基本方法：

```
try {
    //JSONArray jArray = new JSONArray();
    JSONObject item;
    boolean found = false;
    int length = jArray.length();
    String key = "message";
    String orphan = "message2"; // Let's find where you belong

    for(int index = 0; index < length; index++) {
        item = jArray.getJSONObject(index);
        if(item.getString(key).equals(orphan)) {
            found = true;
            break;
        }
    }

    if(found) {
        // item references the JSONObject that you want
    }
    else {
        // No match found
    }
}
catch(JSONException e) {
    // Try to handle the error gracefully
} 
```

# javascript - Galleria.io 和backbone.js CPU 使用率100%

> ID：11068698
> 
> 赞同：1
> 
> 时间：2012-06-17T03:25:11.343
> 
> 标签：javascript, backbone.js, galleria

我对图片库 Galleria.js 和主干有一个奇怪的问题。

此视图有时会被隐藏，然后使用不同的模型重新渲染。发生的情况是，在重新渲染 2 或 3 次后，浏览器的 CPU 使用率飙升至 100%。我确认`Galleria`是这个原因，因为我从视图中删除了它并且 CPU 是正常的。

我在想我可能需要在隐藏时破坏视图或其他什么？不完全确定如何解决这个问题。

```
App.HouseDetailView = Backbone.View.extend({
    el: '.house-details-area', 
    initialize: function() {
        this.template = _.template($('#house-details-template').html());
        App.Events.on('show_house', this.render, this);
        App.Events.on('show_main_view', this.hide, this);
    },
    events: {
        'click .btn-close': 'hide',
        'shown a[data-toggle="tab"][href=".detail-map"]' : 'show_map',
        'shown a[data-toggle="tab"][href=".detail-street-view"]' : 'show_street_view',
        'change .calculate-price': 'calculate_price',
    },
    render: function(model) {
          this.model = model;
          var html = this.template({model:model.toJSON()});
          $(this.el).html(html);
          Galleria.loadTheme('/static/js/libs/galleria.classic.min.js');
          Galleria.run('#galleria', {wait: true});
          $(this.el).show();
          return this;

    },
    hide: function() {
        $(this.el).hide();
        App.detailsRouter.navigate('/', true);
    },
    show_map: function() {
        // check if map already rendered
        if (this.$('.detail-map').html() === '') {
          var map = new App.DetailMapView({model:this.model});
          this.$('.detail-map').html(map.el);
          map.refresh();  
        }         
    },
    show_street_view: function() {
        if (this.$('.detail-street-view').html() === '') {
            var street_view = new App.DetailStreetView({model:this.model});
            this.$('.detail-street-view').append(street_view.el);
            street_view.render();
        }   
    },
    calculate_price: function (e) {
        var price_element = this.$('.price');
        var total_price = parseFloat(price_element.attr('data-total-price'));
        var people = parseFloat(price_element.attr('data-people'));
        // if selected is 1st option: Total price
        if (e.srcElement.selectedIndex === 0) {
            // show total price
            price_element.html('$' + total_price.toFixed(2));
        } else {
            // show per person price
            price_element.html('$' + (total_price/people).toFixed(2));
        }
    },
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T00:53:24.547

我能够通过`Galleria.loadTheme('/static/js/libs/galleria.classic.min.js');`从视图的`render()`方法中删除来解决这个问题。

我只在应用程序初始化时加载一次 Galleria 主题。

# html - 删除css中复选框的“框”

> ID：11068699
> 
> 赞同：9
> 
> 时间：2012-06-17T03:25:14.840
> 
> 标签：html, css

我正在尝试删除复选框字段的实际框，并使文本可点击。我怎样才能用 JS 和 css 做到这一点？我开始使用按钮，但我切换到复选框，因为框的“状态”比按钮更容易找到。但是现在我正在使用 css 润色页面以获得更好的格式和布局，这些框妨碍了我，我更希望文本可以在没有框的情况下单击。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-17T03:28:39.957

您可以使用 CSS 隐藏它`display: none;`

HTML

```
<input type="checkbox" name="a" id="a" value="a" /><label for="a">asdf</label>​ 
```

CSS

```
/* for all inputs of type checkbox */
input[type="checkbox"]  {
   display: none;
}

/* for just the single element by id */ 
#a {
    display: none; 
    /* visibility: hidden      works too */
}​ 
```

请参阅此处了解[和之间的](https://stackoverflow.com/a/133064/219118)[区别`visibility:hidden``display:none`](https://stackoverflow.com/a/133064/219118)。

[演示](http://jsfiddle.net/Lerdx/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T03:36:31.890

如果您想出于 JS 效果的目的将一段文本视为按钮，您可能希望将文本包装在一个跨度中，并将您尝试触发的函数分配给该跨度的 onclick 处理程序。如果您使用的是 jQuery，那可能看起来像

```
<script type="text/javascript">
// Your function:
function doSomething() {
    alert('Hello!');
}

// jQuery's on-document-ready function, to assign the
// function doSomething to the click handler of the span.
$(document).ready(function() {
    $("span#myButtonText").click(function() {
        doSomething();
    });
});
</script>

<p><span id="myButtonText">Click Me for an Alert!</span></p> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-10T10:07:22.577

利用`appearance: none;`

注意：与所有浏览器不兼容或一致，请参阅[MDN 文档](https://developer.mozilla.org/en-US/docs/Web/CSS/appearance)

# linux - 以 root 身份更改 /etc/ld.conf.so.d 的替代方法？

> ID：11068705
> 
> 赞同：1
> 
> 时间：2012-06-17T03:27:05.683
> 
> 标签：linux, unix

我正在用 fortran 编写一个需要特定的非标准库的应用程序。我已经下载了库的源代码并对其进行了编译以获取 $HOME 子目录中的 .so 文件。现在，为了让我编写的应用程序可以使用这个库，我遇到了一种流行的方法：将文件添加到包含库路径的 /etc/ld.conf.so.d 中。其次是ldconfig。

问题是我没有root访问权限。即使我有，我也不确定是否有必要（或安全）对一个只有我需要使用的库进行管理更改。有没有一种不需要root访问权限的方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-17T05:14:52.090

最好的方法是`-Wl,-rpath=/home/you/yourlibrary/dir`在链接使用该库的应用程序时添加。

这比设置要好`LD_LIBRARY_PATH`，因为它只影响您构建的应用程序（并且只影响使用库的应用程序），而不是您运行的每个应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T03:31:13.760

绝对最好的选择是设置环境变量 LD_LIBRARY_PATH：

*   [如何正确使用 LD_LIBRARY_PATH](http://www.wiredrevolution.com/system-administration/how-to-correctly-use-ld_library_path)

*   [共享库 Howto](http://tldp.org/HOWTO/Program-Library-HOWTO/shared-libraries.html)

*   [人 ld.so](http://www.unix.com/man-page/linux/8/ld.so/)

*   使用“ [ldd](http://www.kernel.org/doc/man-pages/online/pages/man1/ldd.1.html) ”查看正在使用哪些库

# ruby-on-rails-3 - 黄瓜测试，我可以编辑用户的关联记录

> ID：11068706
> 
> 赞同：1
> 
> 时间：2012-06-17T03:27:47.277
> 
> 标签：ruby-on-rails-3, cucumber, associations

我有两个模型：具有以下关联的**用户**和**汽车：**

```
User has_many Car
Car belongs to User 
```

我正在创建一个用于编辑汽车的功能，这是我目前所拥有的：

```
Feature: Edit car for a user 
  In order to edit cars of my user
  As a user
  I should be able to edit existing users related to my account

Scenario: User is signed in and edits an education with valid attributes 
  Given I am logged in as a user
  And I have the following cars related to my account
  Then I want to edit a car... 
```

我实施的唯一步骤是这一步：

```
Given /^I am logged in as a user$/ do
  @user = FactoryGirl.create(:user)
  user_sign_in
end

def user_sign_in
 visit '/users/sign_in'
 fill_in "Email", :with => @user[:email]
 fill_in "Password", :with => @user[:password]
 click_button "Go"
end 
```

我基本上看不到如何创建与该用户关联的汽车，以及如何测试我是否能够编辑其中一辆汽车？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T03:35:33.073

然后应该只对 Cucumber 的 wiki 进行输出测试。您应该将其转换为何时。

我是黄瓜的新手，但我认为你应该做这样的事情（黄瓜喜欢精确的例子）：

```
Given I am logged in
And I have "Ferrari" related to my account
When I edit "Ferrari"
Then "Ferrari" should be modified. 
```

或任何其他车型。

在您的给定中，您设置了变量。由于您没有测试您网站的身份验证功能，您可以简单地使用您的 User 类方法登录用户。它会加快你的测试。步骤应如下所示：

鉴于我已登录 - >登录用户

我有...... - > @car = Car.create！（你的参数）

当... -> 这应该修改@car

```
visit car_edit_path(your car id)
Fill....
Sumbmit 
```

然后 -> 验证 @car 是否被修改

在此期间，您使用模型方法修改汽车，然后验证汽车是否已更改。

# jquery - 未捕获的类型错误：对象 [对象数组] 没有方法“文本”

> ID：11068712
> 
> 赞同：1
> 
> 时间：2012-06-17T03:29:57.387
> 
> 标签：jquery, jqtouch, typeerror, zepto

我使用 jQtouch 的自动标题扩展，当我更新到 Zepto 1 时它停止工作。扩展帮助将点击的内容复制到顶部的 H1 工具栏。

错误消息：Uncaught TypeError: Object [object Array] has no method 'text'

这里的代码

```
(function($) {
if ($.jQTouch)
{
    $.jQTouch.addExtension(function AutoTitles(jQT){

        var titleSelector='.toolbar h1';

        $(function(){
            $('#jqt').bind('pageAnimationStart', function(e, data){
                if (data.direction === 'in'){
                    var $title = $(titleSelector, $(e.target));
                    var $ref = $(e.target).data('referrer');
                    if ($title.length && $ref && $title.text() === ''){
                        $title.html($ref.text()); 
```

未捕获的类型错误：对象 [对象数组] 没有方法“文本”

```
 function setTitleSelector(ts){
            titleSelector=ts;
        }

        return {
            setTitleSelector: setTitleSelector
        };

    });
}
})($); 
```

知道为什么它不再起作用了吗？

# java - 你如何直接从子类调用重写的超类方法

> ID：11068725
> 
> 赞同：-3
> 
> 时间：2012-06-17T03:34:20.943
> 
> 标签：java, oop

```
class a{
  public void foo(int a){
     System.out.println("super");
  }
}
class b extends a{
  public void foo(int a){
     System.out.println("sub");
  }
} 
```

这就是我编写代码来调用它的方式

```
a ob = new b(); 
ob.foo(7); 
```

但它调用子类方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T03:45:46.970

> ...但它调用子类方法

这就是覆盖的全部意义......因此，当您在子类上调用实例的方法时，您将获得该方法的子类覆盖！

另一方面，*子类本身*可以在其超类中调用方法的覆盖版本：

```
class A {
    public void foo() {
        System.out.println("super");
    }
}

class B extends A {
    public void foo() {
        super.foo();  // call the overridden method
        System.out.println("sub");
    }
} 
```

...这将打印

```
super
sub 
```

如果你调用`foo`一个`B`实例。

* * *

> 你们真的确定没有其他方法可以解决这个问题吗？

1.  是的
2.  我不明白你为什么认为这是一个“问题”。

# javascript - CSS3获取动画的动态值

> ID：11068726
> 
> 赞同：1
> 
> 时间：2012-06-17T03:34:22.980
> 
> 标签：javascript, css

我有以下代码可以简单地在屏幕上移动我的图像：

```
 /* This is the animation code. */
        @-webkit-keyframes example {
   from { -webkit-transform: translateX(0px); }
   to   { -webkit-transform: translateX(1900px) }
}

        /* This is the element that we apply the animation to. */
        img#container {
            -webkit-animation: example 1s ease 0s 1 normal;
        } 
```

我无法解决的问题是将 translateX 动画值设置为用 javascript 计算的值，例如屏幕中心的 x 位置。有没有办法在javascript中设置“to”属性然后应用id名称？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T04:25:28.903

要设置**CSS3**转换值，请考虑使用**jQuery**和[**.transit**](http://ricostacruz.com/jquery.transit/)插件。该网页有解释不同 CSS3 动画效果的演示。

**例子：**

```
$('#container').transition({ x: '1900px' }); 
```

查看他们的[**源代码**](http://ricostacruz.com/jquery.transit/jquery.transit.js)，您会发现在 jQuery 中做各种效果很乏味，因为需要大量相关的样式信息来创建所需的输出。然后将该 jQuery 转换为纯 JavaScript 等价物是值得一看的。

**使用translate X**测试**.transit**插件：[**jsFiddle**](http://jsfiddle.net/v3PrJ/)**[](http://jsfiddle.net/v3PrJ/)**

 ***** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T04:39:18.377

例如，您可以使用 CSS 表达式将 JS 值设置到您的 CSS 类中

```
height:expression(document.body.clientHeight + "px"); 
```

这就是我们编写 CSS 表达式的方式。****

# ruby-on-rails - 使用acts_as_taggable_on 获取特定所有者的标签计数列表

> ID：11068729
> 
> 赞同：3
> 
> 时间：2012-06-17T03:35:04.150
> 
> 标签：ruby-on-rails, acts-as-taggable-on

我有一个用户是一组帖子的所有者。我想为用户标记的帖子获取一组标记*计数*，但该方法似乎不可用。

我想要类似的东西：@user.tag_counts_on(:context) 类似于`@post.tag_counts(:context)`

对于独立的帖子，我可以使用`@post.tag_counts_on(:thoughts)`来获取“想法”上下文的标签云

但标签所有者唯一可用的方法是：`@user.owned_taggings`和`@userowned_tags`。有没有办法访问这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-04T14:04:37.270

你看过这里的[方法](https://github.com/mbleigh/acts-as-taggable-on/blob/98aecdd86ddf447a88ae6351cc02ab420a78d0ec/lib/acts_as_taggable_on/acts_as_taggable_on/collection.rb)`all_tag_counts`吗？这是什么调用，它接受一个选项哈希，“添加到查询中的一条 SQL 条件”在哪里，所以我认为这可能有效，但不完全确定？`tag_counts_on``conditions`

`@post.tag_counts_on(:context, { conditions: "posts.user_id IS #{@user.id}" })`

# ruby - 使用 ruby 创建动态数组/哈希的有效方法？

> ID：11068733
> 
> 赞同：0
> 
> 时间：2012-06-17T03:35:55.883
> 
> 标签：ruby

我想做的是这样的：

```
arr = %w(good bad great dull)
"Today was a #{arr.sample} day" 
```

假设我想循环这 100 次并计算每个采样元素，并将计数器收集在单独的哈希或数组中，我该怎么做？使用散列或数组会更好吗？

就像是：

```
counter = []
arr.each { |el| counter << [el => 0] }

100.times do 
  el = arr.sample
  # lost here..
end 
```

我想要的输出（数组或哈希）：

```
["good" => 20, "bad" => 20, "great" => 40, "dull" => 20] 
```

我还认为我的第一种思维方式有一个更优雅的解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T03:44:56.657

我认为你很接近。哈希非常有意义：

```
counter = Hash.new
arr.each { |el| counter[el] = 0  }

100.times do 
  counter[arr.sample] += 1
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T03:45:53.637

也许这就是你想要的？

```
arr = %w(good bad great dull)
counter = Hash.new(0)
100.times { counter[arr.sample] += 1 }
counter #=> {"great"=>22, "good"=>29, "bad"=>21, "dull"=>28} 
```

你也可以这样做：

```
arr = %w(good bad great dull)
(1..100).each_with_object(Hash.new(0)) { |_, h| h[arr.sample] += 1 }
#=> {"great"=>22, "good"=>29, "bad"=>21, "dull"=>28} 
```

这有点“自包含”，并返回哈希本身而不是`100`像`times`这样（尽管您也可以使用它[`tap`](http://ruby-doc.org/core-1.9.3/Object.html#method-i-tap)来获得这种效果）。

# c - 交叉编译Linux wifi驱动

> ID：11068736
> 
> 赞同：1
> 
> 时间：2012-06-17T03:36:13.060
> 
> 标签：c, linux, arm, cross-compiling, openembedded

我正在尝试为 Airlink AWLL6075 无线 n usb 适配器交叉编译 Realtek wifi 驱动程序。该芯片组显然是 RTL8191SU，我已经从 Realtek 下载站点获得了适用于 Linux 的驱动器。使用 OpenEmbedded 为 ARM Linux 进行交叉编译时，编译失败并显示以下消息：

```
os_dep/linux/mlme_linux.c: In function 'rtw_os_indicate_scan_done':
os_dep/linux/mlme_linux.c:222:34: error: implicit declaration of function 'wdev_priv' 
```

mlme_linux.c 中的违规部分是：

```
extern void indicate_wx_scan_complete_event(_adapter *padapter);
void rtw_os_indicate_scan_done( _adapter *padapter, bool aborted)
{
#ifdef CONFIG_IOCTL_CFG80211
    rtw_cfg80211_indicate_scan_done(wdev_to_priv(padapter->rtw_wdev), aborted);
#endif //CONFIG_IOCTL_CFG80211
    indicate_wx_scan_complete_event(padapter);
} 
```

对于如何解决这个问题，有任何的建议吗？

问候， 马特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T07:49:09.977

函数的隐式声明意味着编译器在头文件中找不到函数声明。

尝试追踪包含此人的头文件。也许缺少依赖。

一个快速的谷歌给出了 cfg80211.h 作为罪魁祸首。在[http://www.takatan.net/lxr/ident?i=wdev_priv中找到](http://www.takatan.net/lxr/ident?i=wdev_priv)

搜索 cfg80211 给出 [http://www.linuxwireless.org/en/developers/Documentation/cfg80211](http://www.linuxwireless.org/en/developers/Documentation/cfg80211)

据我所知，您需要做的就是从第一个链接下载 cfg80211.h 文件并将其包含在您的项目中。

# jquery - 如何计算使用 jQuery 或 st 连接到我的网站的在线人数？

> ID：11068739
> 
> 赞同：0
> 
> 时间：2012-06-17T03:37:19.633
> 
> 标签：jquery, asp.net

我用 asp.net 4.0 创建了一个网站，现在我需要计算连接到我网站的在线人数。我如何用 JQuery 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T03:40:42.963

也许改用谷歌分析？它是免费的，您不必编写任何代码，而且您从中获得的不仅仅是计数器——您将获得按浏览器、屏幕分辨率、地理位置等各种因素的细分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T03:41:54.757

基本上，您需要在您的页面上创建一个“心跳”，每隔 x 秒使用一个 ajax 调用和一个唯一的会话 ID 对服务器进行一次 ping 操作。在服务器上，您可以记录/计算这些 pings/id 并粗略估计（基于最后 x 秒），在任何给定时间有多少人在您的站点上。不要忘记在每次计数后重置您的计数器。

由于您使用的是 ASP.NET，因此您有几个不同的服务器端选项。有些人喜欢创建一个独立的 .aspx 页面，该页面读取通过查询字符串传递的参数并通过 ajax 调用它。就我个人而言，我会[创建一个 Web 处理程序](http://www.dotnetperls.com/ashx)(.ashx)，因为它们对于这样的东西特别有用。其他人会说“正确”的方式是[使用简单的 ajax 调用来调用页面 webmethods](http://encosia.com/using-jquery-to-directly-call-aspnet-ajax-page-methods/)。如果您使用的是 MVC，那就更容易了。只需[设置一个控制器方法](http://msdn.microsoft.com/en-us/library/dd410269.aspx)来读取一些查询字符串参数并向其发送请求。最终由您决定哪种方式最适合您的应用程序——它们都做同样的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T05:26:23.270

我会亲自制作一个处理程序（.ashx），但那是因为我对它们很满意。使用@ajax81 概述的心跳代码，但您将返回（在同一次调用中）活跃用户数。

1.  为访问您页面的每个用户分配一个唯一的会话 ID。如果您使用的是 aspx 页面和会话状态，那么您几乎已经掌握了这一点。在 session_start 中，您将创建一个会话变量并为其分配一个唯一标识符（我将使用动态创建的 guid），将其存储在 Session["userguid"] 和一些持久存储中。最简单的方法是数据库中的一个简单表。

2.  客户端脚本 (jquery ajax) 将向 foo.ashx 发送请求。它甚至可以是一个空请求。使用 jQuery setTimeOut 类型函数在每个页面上每分钟调用它。

3.  在您的处理程序中，它会收到一个请求，找出它来自谁，并更新该特定用户的“最后更新”日期（您可以从 Session["userguid"].

4.  浏览所有“活跃用户”表并删除 5 分钟左右未更新的表。

5.  获取“活跃用户”的新计数并将其返回到客户端页面。然后，客户端页面可以以它选择的任何方式显示该数字。

这一切都未经检验，但理论应该是合理的。我只是没有时间为您编写完整的应用程序。;)

```
 void Session_Start(object sender, EventArgs e)
    {
        // Code that runs when a new session is started

        Guid sessionId = Guid.NewGuid();
        Session["sessionGuid"] = sessionId;
        // Write code to store this in a table -- "INSERT INTO myTable (sessionGuid, dateCreated, dateUpdated) VALUES (@sessionGuid, getdate(), getdate()) ; "

    } 
```

在您的页面中：

```
$.ajax({
  url: "foo.ashx",
  context: document.body
}).done(function( data ) { 
  $(someobject).html(data);
}); 
```

foo.ashx 的代码：

```
 public void ProcessRequest(HttpContext context)
    {
        Guid sessionGuid = (Guid)context.Session["sessionGuid"];

        // Write code to update table "UPDATE myTable SET dateUpdated = getdate() where sessionId = @sessionGuid ; "

        // Write statement to delete all items older than x minutes "DELETE from myTable WHERE dateUpdated < dateadd(minute, -10, getdate()) ; "

        // Get cound of existing real users: "SELECT count(*) FROM myTable ;"

        // Return that value.

        context.Response.ContentType = "text/plain";
        context.Response.Write(YourValue);
    } 
```

# php - 从php中的字符串（简历）中提取电话号码

> ID：11068740
> 
> 赞同：-6
> 
> 时间：2012-06-17T03:37:31.717
> 
> 标签：php, string, extract

需要从简历中提取电话号码。它可以以多种方式嵌入，可以在自己的行中：

```
714-555-1212 
```

或排长队

```
1212 main st fullerton ca 92835  949.555.1212 
```

想将其提取到数组中 - 区号，3位，4位

这是我到目前为止所拥有的，但是当同一线路上除了电话号码之外还有其他号码时，它不起作用：

```
function get_phone_number ($string){
    $lines = explode("\n",trim($string));
    foreach ($lines as $value){ 
        //echo "Line: ".$value."<BR>";

        preg_match_all('!\d+!', $value, $matches);
        if (strlen($matches[0][0])=='3' && strlen($matches[0][1])=='3' && strlen($matches[0][2])=='4') { 
            $area_code = $matches[0][0];

        }
    }
    return $area_code;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T03:45:06.543

```
<?php
$areaCodes = array();
$threeDigits = array();
$fourDigits = array();

preg_match_all('/(\d{3})-(\d{3})-(\d{4})/',$content,$matches);

if(count($matches[1])>0)
{
    for($i=0; $i<count($matches[1]); $i++)
    {
        array_push($areaCodes,$matches[1][$i]); 
        array_push($threeDigits,$matches[2][$i]);   
        array_push($fourDigits,$matches[3][$i]);    
    }
}

preg_match_all('/\((\d{3})\)-(\d{3})-(\d{4})/',$content,$matches);

if(count($matches[1])>0)
{
    for($i=0; $i<count($matches[1]); $i++)
    {
        array_push($areaCodes,$matches[1][$i]); 
        array_push($threeDigits,$matches[2][$i]);   
        array_push($fourDigits,$matches[3][$i]);    
    }
}
preg_match_all('/(\d{3}).(\d{3}).(\d{4})/',$content,$matches);

if(count($matches[1])>0)
{
    for($i=0; $i<count($matches[1]); $i++)
    {
        array_push($areaCodes,$matches[1][$i]); 
        array_push($threeDigits,$matches[2][$i]);   
        array_push($fourDigits,$matches[3][$i]);    
    }
}

preg_match_all('\((\d{3})\).(\d{3}).(\d{4})/',$content,$matches);

if(count($matches[1])>0)
{
    for($i=0; $i<count($matches[1]); $i++)
    {
        array_push($areaCodes,$matches[1][$i]); 
        array_push($threeDigits,$matches[2][$i]);   
        array_push($fourDigits,$matches[3][$i]);    
    }
}
print_r($areaCodes);
print_r($threeDigits);
print_r($fourDigits); 
```

# bash - Bash，使用文件描述符覆盖？

> ID：11068741
> 
> 赞同：2
> 
> 时间：2012-06-17T03:37:39.530
> 
> 标签：bash, file-descriptor, io-redirection

如果你想用 Bash 覆盖一个文件，这很容易

```
echo "Hello world" > hosts 
```

这似乎不适用于**文件描述符**

```
$ exec 3<> hosts

$ echo "Hello world" >&3
$ cat hosts
Hello world

$ echo "Hello world" >&3
$ cat hosts
Hello world
Hello world 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T04:32:33.360

这是正确的。当 shell 调用`open(2)`. 当您`DUP2`使用 FD（任何语言）时，打开文件时设置的标志在打开的 FD[之间共享](http://www.gnu.org/software/libc/manual/html_node/File-Status-Flags.html)。在您的情况下，`O_TRUNC`只能在实际打开文件时指定。

`<file`要知道的重要一点是，模式和各种标志仅在使用、`>file`或类似命令打开文件时才确定。复制带有`&`修饰符的 FD 实质上会创建一个指向原始 FD 的“别名”，并保留与原始 FD 相同的所有状态。截断文件需要重新打开它。

如果您想轻松使用文件描述符，这是我的调试功能：

```
lsfd() {
    local ofd=${ofd:-2} target=${target:-$BASHPID}

    while [[ $1 == -* ]]; do
        if [[ -z $2 || $2 == *[![:digit:]]* ]]; then
            cat
            return 1
        fi
        case ${1##+(-)} in
            u)
                shift
                ofd=$1
                shift
                ;;
            t)
                shift
                target=$1
                shift
                ;;
            h|\?|help)
                cat
                return
        esac
    done <<EOF
USAGE: ${FUNCNAME} [-h|-?|--help] [-u <fd>] [ -t <PID> ] [<fd1> <fd2> <fd3>...]

This is a small lsof wrapper which displays the open
file descriptors of the current BASHPID. If no FDs are given,
the default FDs to display are {0..20}. ofd can also be set in the
environment.

    -u <fd>: Use fd for output. Defaults to stderr. Overrides ofd set in the environment.
    -t <PID>: Use PID instead of BASHPID. Overrides "target" set in the environment.
EOF

    IFS=, local -a 'fds=('"${*:-{0..20\}}"')' 'fds=("${fds[*]}")'
    lsof -a -p $target -d "$fds" +f g -- >&${ofd}
} 
```

我喜欢不关闭标准输入，因为这有时会导致问题，所以首先保存它。

```
 $ ( { lsfd 3; cat <&3; } {savefd}<&0 <<<'hi' 3>&0- <&"${savefd}" )
COMMAND PID  USER   FD   TYPE FILE-FLAG DEVICE SIZE/OFF     NODE NAME
bash    920 ormaaj   3r   REG        LG   0,22        3 59975426 /tmp/sh-thd-8305926351 (deleted)
hi 
```

如您所见，即使使用`3>&0-`运算符将​​ FD 0 移动到 3，文件仍保持打开状态`O_RDONLY`。复制描述符的选择`>`or`<`是任意的，并且仅在省略运算符左侧的 FD 时才用于确定默认值。

如果您确实想打开一个新的独立 FD，可以这样做：

```
$ ( {
cat <&4 >/dev/null; lsfd 3 4; echo there >&4; cat </dev/fd/3
} {savefd}<&0 <<<'hi' 3>&0- 4<>/dev/fd/3 <&"${savefd}"
)
COMMAND  PID  USER   FD   TYPE FILE-FLAG DEVICE SIZE/OFF     NODE NAME
bash    2410 ormaaj   3r   REG        LG   0,22        3 59996561 /tmp/sh-thd-8305914274 (deleted)
bash    2410 ormaaj   4u   REG     RW,LG   0,22        3 59996561 /tmp/sh-thd-8305914274 (deleted)
hi
there 
```

现在 FD 4 真正“重新打开”到指向 FD 3 的文件，而不仅仅是复制（即使该文件已经被`unlink(2)`'d，如上所述）。首先打开 FD 4 并使用 搜索到末尾`cat`，然后将附加行写入文件。同时 FD 3 的查找位置仍然在开头，所以整个生成的文件可以cated 到终端。

同样的原则也适用于你的情况。

```
$ { echo 'Hello world'; echo 'hi' >/dev/fd/1; } >hosts; cat hosts
hi 
```

或者可能更好的是使用两个单独的命令打开和关闭文件两次，而不使用`exec`.

除非绝对必要，否则我宁愿避免`exec`仅使用打开文件描述符。您必须记住明确关闭文件。如果您改用命令分组，文件将自动关闭，实际上给它们一个“范围”。这在原理上类似于 Python 的`with`声明。这可能避免了一些混乱。

**另见**：

*   [http://wiki.bash-hackers.org/howto/redirection_tutorial](http://wiki.bash-hackers.org/howto/redirection_tutorial)
*   [http://wiki.bash-hackers.org/syntax/redirection](http://wiki.bash-hackers.org/syntax/redirection)

# c - 构建失败：./configure 和 make 后未创建 libxml2.a 文件

> ID：11068744
> 
> 赞同：0
> 
> 时间：2012-06-17T03:38:23.173
> 
> 标签：c, build, libxml2

我正在关注[本](http://www.pokorra.de/coding/compile_libxml_mingw.html)教程以`libxml2`在 Windows 上构建。经过大量努力，我运行 ./configure 并制作文件。但是在 make 之后，`libxml2.a`文件并没有在 ./libs 文件夹中创建。我不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T06:26:11.713

你可以关注[http://xmlsoft.org/FAQ.html]

你只需执行 ./configure make

如果要在 /libs 文件夹中创建 libxml2.a，则需要执行

```
./configure
make
make install 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T05:23:36.403

解决方案：

而不是`MYSY`; 我通过使用[Cygwin](http://www.cygwin.com/)快速快速的方式做到了这一点。

# php - 对一个准备好的语句对象的多个查询

> ID：11068749
> 
> 赞同：0
> 
> 时间：2012-06-17T03:40:14.587
> 
> 标签：php, mysql, prepared-statement

我正在尝试使用 php 中的准备语句对 mysql 数据库执行 2 个完全不相关的查询。是否可以使用一个准备好的语句对象来做到这一点，还是我需要更多？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T03:57:14.000

它们是相同的陈述但具有不同的条件吗？IE：

```
UPDATE users SET email=? WHERE user_id=? 
```

然后，您将使用各种电子邮件和 user_id 多次调用它。

这基本上就是准备好的语句的用途。然后查询计划器可以计划一次并执行多次。

如果您有两个不同的查询，那么您可以覆盖您准备好的语句对象的语句，并且您可以通过不证明新对象来节省微不足道的时间，但您实际上并没有提高准备好的语句的效率。

# api - 开发没有重定向域的 Live Connect 应用程序

> ID：11068751
> 
> 赞同：2
> 
> 时间：2012-06-17T03:40:45.310
> 
> 标签：api, google-chrome, redirect, live, onedrive

我正在开发一个 Chrome 扩展，它需要使用 Microsoft 的 Live Connect API 来访问 Skydrive。问题是注册应用程序时需要重定向域，但我没有任何重定向域，这是否意味着我不能使用 Live Connect API？或者有解决方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T18:31:42.397

我认为您应该选择“移动客户端应用程序”选项。

# php - 根据数组值对数组进行排序

> ID：11068752
> 
> 赞同：0
> 
> 时间：2012-06-17T03:40:50.733
> 
> 标签：php, arrays, sorting

例如，您有一个数组：

```
$unsorted = array(
    'desert' => array(
        'time' => '1339902235',
        'name' => 'desert.jpg'
    ),
    'sea' => array(
        'time' => '1339900801',
        'name' => 'sea.jpg'
    ),
    'mountain' => array(
        'time' => '1339902285',
        'name' => 'mountain.jpg'
    ),
); 
```

是否可以按 的值对数组进行排序`$unsorted[$a]['time']`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T03:44:54.053

您可以使用类似`usort`和的东西`strnatcasecmp`。

例如：

```
function sort_2d_asc($array, $key) {
    usort($array, function($a, $b) use ($key) {
        return strnatcasecmp($a[$key], $b[$key]);
    });

    return $array;
}

function sort_2d_desc($array, $key) {
    usort($array, function($a, $b) use ($key) {
        return strnatcasecmp($b[$key], $a[$key]);
    });

    return $array;
}

$unsorted = array(
    'desert' => array(
        'time' => '1339902235',
        'name' => 'desert.jpg'
    ),
    'sea' => array(
        'time' => '1339900801',
        'name' => 'sea.jpg'
    ),
    'mountain' => array(
        'time' => '1339902285',
        'name' => 'mountain.jpg'
    ),
);

$sorted = sort_2d_asc($unsorted, 'time'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-20T20:02:17.270

请注意，`usort`它不会保留密钥。
如果您需要原始密钥，您应该使用`uasort`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T03:48:53.970

您可以使用`usort`. `usort`将回调作为参数。还将时间转换为整数，因为它们就是这样。

```
function compare($a,$b) {
     if( $a['time'] == $b['time'] ) {
         return 0;
     }

     return (intval($a['time']) < intval($b['time'])) ? -1 : 1;
}

usort( $unsorted, 'compare' );

// $unsorted is now sorted by time 
```

# php - Codeigniter Insert with Select for insert_batch

> ID：11068753
> 
> 赞同：1
> 
> 时间：2012-06-17T03:41:26.560
> 
> 标签：php, mysql, codeigniter

是否可以将 insert_batch 与带有 codeigniter 的选择一起使用？例如，我需要插入一批：

```
INSERT INTO a (a_id, b_id, c_id)
    SELECT {$a}, {$b}, c.id
    FROM elci c
    WHERE c.name = {$cName} 
```

还是我应该手动构建查询字符串并作为常规查询执行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-10T14:42:14.853

您可以使用`$this->db->query()`或`$this->db->simple_query()`执行此操作，`insert_batch()`仅用于以其他方式生成的输入。

# javascript - 获取表单中当前选择的选项

> ID：11068755
> 
> 赞同：2
> 
> 时间：2012-06-17T03:41:48.103
> 
> 标签：javascript, jquery, html

我正在尝试使用 javascript 在下拉菜单中获取当前选择的选项。但我似乎无法让它工作

我现在的js：

```
var itemqual = $("select#itemqual option:selected").text();
var type = "hat";
$('select#itemtype').change(function() {
if(itemtype == type) {
    $('#graphic').show();
} else {
    $('#graphic').hide();
}
}); 
```

但是，当我更改选择时它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T03:42:34.787

这个 Javascript 应该适合你。

```
var type = "hat";
$('select#itemtype').change(function() {
    if($("select#itemtype option:selected").text() == type) {
        $('#graphic').show();
    } else {
        $('#graphic').hide();
    }
}); 
```

# android - 来自 Android 的 Reddit api/friend JSON 请求

> ID：11068758
> 
> 赞同：1
> 
> 时间：2012-06-17T03:42:20.110
> 
> 标签：android, json, api, reddit

我正在尝试`api/friend`通过从 Android 手机发布 JSON 请求来添加朋友。

在我的代码中，post 请求返回 html 代码并且无法添加朋友。
编辑：更改为对 HttpPost 使用 UrlEncodedFormEntity。

```
List<NameValuePair> qparams = new ArrayList<NameValuePair>();
    qparams.add(new BasicNameValuePair(Common.KEY_NAME, name));
    qparams.add(new BasicNameValuePair(Common.KEY_CONTAINER, "t2_"
            + container));
    qparams.add(new BasicNameValuePair(Common.KEY_TYPE, "friend"));
    qparams.add(new BasicNameValuePair(Common.KEY_USER, uh));
    try {
        return new UrlEncodedFormEntity(qparams);
    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
        return null;
    } 
```

# math - 使对象平滑地旋转进出

> ID：11068760
> 
> 赞同：0
> 
> 时间：2012-06-17T03:42:32.473
> 
> 标签：math, rotation

我遇到了麻烦，我已经搜索和研究过，但我就是想不通。

我正在制作一个太空游戏，并希望让玩家确定飞船的方向并让飞船平稳地进出。所以船的旋转速度会增加然后减少，所以它不会超过它的目标。

我查过 SUVAT 之类的，但我就是搞不定。

我必须使用的价值观是

*   船的角度
*   船舶所需的角度
*   船的转速
*   船的旋转速度可以增加的速率

因此，如果船处于角度 0 并且想要定向到角度 90，它将增加它的旋转速度，直到角度 45，它会开始降低它的旋转速度，所以当它达到角度 90 时，旋转速度将停止。

我应该注意，旋转速度可以是正数或负数，具体取决于船需要旋转的方式（顺时针/逆时针）

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T20:48:28.520

如果船舶旋转速度可以减少/增加的最大值达到最大值，那么如果玩家在移动目标的同时改变目标，您将无法防止超过玩家设定的目标。但是，您*可以*做的是确保以这样一种方式调整您当前的速度，以尽可能快地以零速度（即没有超调）达到最终目标。*有关解决最优控制*问题的一般方法，请参见[http://en.wikipedia.org/wiki/Optimal_control 。](http://en.wikipedia.org/wiki/Optimal_control)最佳控制通常包括始终以全推力加速/减速（直到达到目标）。

 *为解决这个问题，用C表示新命令发出时刻的当前角度，用T表示目标角度。收到新目标时的角速度用V'表示，最大加速度用M表示. 正V对应顺时针旋转，负V对应逆时针移动。

假设你的初始角速度大于 0（V'>0），那么有两种可能达到 T：

1) 将 V 增加一段时间 U，然后将其减小直到为零。然后您的最终角度将是（绘制速度与时间的关系图，并确定要验证的区域）：

```
C+ V'^2/(2 M) + 2U*V' + M U^2 
```

哪个应该等同于 T 以找到 U（ABC 公式），除非它没有给出解决方案（负判别式），其中选项 2）应该给出一个解决方案。

2) 降低 V 一段时间，最终*改变 V 的符号*，然后增加 V 直到为零。绘制图片给出：

```
C+ V^2/(2 M) - M U^2\. 
```

等于 T 给出 U。

你会发现它们是一个非常简单的条件，它决定了选项 1) 或 2) 是否给出了解决方案。

初速度 V'<0 的情况类似（1 和 2，可能还有一些符号，翻转）。再次，画一幅画，以防你感到困惑。

* * *

这里有一些微妙的东西，因为如果你想在 T'，那么 T'+K 360 度（/2 pi 弧度）也可以（前提是你可以全天候）。因此，您实际上可以*选择*最容易访问的 T的*别名。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T04:02:06.650

船的旋转速度会增加一半时间，而减少另一半时间。您可以先确定中点：`half = abs(desiredAngle - startAngle)`. （绝对值允许这对正值和负值都有效）在开始旋转之前计算它。然后，在你的更新循环中，计算你旋转了多少：`currentChange = abs(currentAngle - startAngle);`计算旋转速度，`rotationSpeed += (currentChange > half) ? -rate : rate;`但是，使用这种方法，你可能会稍微低于或超过所需的角度。要解决此问题，请检查您是否在最终角度的某个（小）阈值内，然后将当前角度设置为所需角度，并将旋转速度设置为零。*

# jquery - 如何使用jQuery更改悬停时的背景颜色

> ID：11068763
> 
> 赞同：0
> 
> 时间：2012-06-17T03:43:17.577
> 
> 标签：jquery

```
<div>
  <div id="nav">
    <ul>
      <li><a class="active" href="#">Home</a></li>
      <li><a href="#">About</a></li>
      <li><a href="#">Contact</a></li>
    </ul>
  </div>
  <script type="text/javascript">
    $(document).ready(function () {
      $("#nav li a").hover(  
        function () { $(this).parent('ul').parent('li').find('a.active').css('background-color', 'Red'); }
      );
    });
  </script>
</div> 
```

当用户将鼠标悬停在任何其他项目上时，我只是试图用类名“活动”更改菜单项的背景颜色。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T03:45:00.047

试试这个：

```
$(this)
      .parent()  // jump to li
      .parent()  // jump to ul
      .find('li a.active')  // find a.active
      .css('background-color', 'Red'); // apply css 
```

但我认为你可以简单地完成：

```
$(document).ready(function() {
    $("#nav li a").hover(function() {
        $('li a.active').css('background-color', 'Red');
    }, function() {
        // if you want to remove background
        // on mouse out then uncomment below line
        //$('li a.active').css('background-color', 'transparent');
    })
}); 
```

**[演示](http://jsfiddle.net/yQxG9/17/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T03:49:53.310

这是一种使用 .hover() 的方法

[http://jsfiddle.net/nickadeemus2002/ePDZH/](http://jsfiddle.net/nickadeemus2002/ePDZH/)

我还添加了处理 hoverOut 的代码，因为我假设您只想在用户通过链接时显示红色背景。以您希望的方式编辑演示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T04:13:15.927

由于您已经将此功能范围限定为 #nav div，因此您可以通过将 .active 锚标记的搜索范围限定为该容器来简化所有内容。

```
// cache the jquery object
var $navDiv = $("#nav");

$("#nav li a").hover( function () {
    $navDiv.find("a.active").css("background-color", "red");
}); 
```

一旦您将鼠标悬停在任何菜单项上，这将设置背景颜色，但是当您的鼠标离开菜单项（不再悬停）时，背景将保持红色。我建议在悬停处理函数内的 .active 锚标记上切换类名。

```
//cache the jquery object
var $navDiv = $("#navDiv");

$("#nav li a").hover(function (){
    $navDiv.find("a.active").toggleClass("redBackground");
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-17T03:46:37.220

问题是`UL`不是`<a>`. 使用`parents()`或`closest()`。直系父母是`LI`

[http://api.jquery.com/parents/](http://api.jquery.com/parents/)

[http://api.jquery.com/closest/](http://api.jquery.com/closest/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-17T04:37:49.033

我的想法是在悬停子元素时添加一个`over`to类，然后相应地使用 CSS 进行样式设置。`#nav``a`

**JavaScript：（**需要 jQuery）

```
(function($){

  $nav = $("#nav");
  $nav.on("mouseenter", "a", function(){
    $nav.toggleClass("over");
  }).on("mouseleave", "a", function(){
    $nav.toggleClass("over");
  });

})(jQuery); 
```

**演示：[jsfiddle.net/Marcel/m8jQv/1](http://jsfiddle.net/Marcel/m8jQv/1/)**

# javascript - jQuery UI Progressbar 方向改变

> ID：11068768
> 
> 赞同：4
> 
> 时间：2012-06-17T03:44:38.683
> 
> 标签：javascript, jquery, jquery-ui, jquery-ui-progressbar

jQuery UI Progressbar 的默认方向是从左到右。如何更改它以使其在完成时从右向左移动？下面是我想要实现的一个例子。

![右到左](../Images/afd7ff6feab58c0fed51157c9f896e01.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T03:50:28.580

仅限 CSS，尝试将其添加到您的页面：

```
.ui-progressbar .ui-progressbar-value {
  float: right;
} 
```

这不是一个完整的答案，而是一个测试，看看这是否是你想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T04:05:07.350

您也可以使用 CSS3 将进度条旋转 180 度：

```
#progressbar {
    transform:rotate(180deg);
    -ms-transform:rotate(180deg); /* IE 9 */
    -moz-transform:rotate(180deg); /* Firefox */
    -webkit-transform:rotate(180deg); /* Safari and Chrome */
    -o-transform:rotate(180deg); /* Opera */
} 
```

[**小提琴**](http://jsfiddle.net/ult_combo/cP5SY/)

未在旧版本的 IE 上测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-18T23:51:19.650

今天我不得不用 angular ui 的进度条解决同样的问题。其他答案很接近，但在 bootstrap 3 中没有改变我不接受的所有实例。

这有效...选择器获取第一个子 div，然后应用浮动

```
.progress-reverse div:nth-of-type(1) {
    float: right;
} 
```

和

```
<progressbar class="progress-striped progress-reverse active" value="progress" type="{{progressType}}"></progressbar> 
```

希望这可以帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-08-04T11:34:18.057

```
$( "#progressbar-2" ).progressbar({
           isRTL: true,
           value: 30,
           max:300
        }); 
```

# android - Android New Activity UI 仅在代码完成后加载

> ID：11068775
> 
> 赞同：1
> 
> 时间：2012-06-17T03:45:30.807
> 
> 标签：android, sockets

我的主要活动开始一个新活动，并为其提供文件路径的字符串数组。像这样：

```
Intent i = new Intent(getBaseContext(), upScreen.class);
i.putExtra("paths", selPhotos);
startActivity(i); 
```

在新活动中，我通过套接字一次将其中一个文件发送到服务器，同时更新进度条。问题是：新活动的 UI 仅在文件发送后加载！所以我只能看到进度条完成。如何等到 UI 完全初始化后再开始执行任何事务？

我异步执行套接字命令，并且我已经尝试将启动执行套接字命令的线程的代码放在 onWindowFocusChanged 下，但没有成功。

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T04:30:25.243

听起来您的上传阻塞了 UI 线程。您需要使用`AsyncTask`新线程或其他形式的新线程进行上传，而 UI 线程中正在进行的唯一工作是显示`Activity`GUI 并更新进度条。

使用下载器示例的文档`AsyncTask`，可以轻松扩展到您的上传器要求：http: [//developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

# ios - 在 iOS 应用程序中登录和注销

> ID：11068781
> 
> 赞同：0
> 
> 时间：2012-06-17T03:47:49.863
> 
> 标签：ios, xcode, nsurlconnection, nsurlcredential

新开发者在这里。. .

在我的 iOS 应用程序中，我想实现一个简单的登录屏幕，允许用户连接到需要身份验证的 Web 服务。我的计划是创建一个 NSURLCredential，并将其提供给 Web 服务。这部分似乎很简单，但我不确定如何注销。谁能指出我正确的方向？

我不确定这是否是凭据的工作方式，但我正在考虑从 NSURLCredentialStorage 中删除凭据。这可以作为注销工作吗？

我也很好奇是否有某种方法可以检查 Web 服务会话是否仍在持续（好像不是，我希望用户必须重新输入他们的登录信息）。

任何帮助/起点/教程将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T04:13:25.207

如果它是一个基于 REST 原则的构建良好的 API，就像现在许多人都在努力的那样，那么 API 将根本不会跟踪任何会话，因此没有必要注销。在这种情况下，会话管理将完全由您的应用程序来处理。您的应用只需要“忘记”用户本地存储的凭据并在适当的地方显示登录对话框。

但是，如果您使用的服务管理它自己的会话，那么我首先要查找的是我需要调用的 URL（例如使用 NSURLConnection）以注销。

# java - Java-正确使用嵌套类？

> ID：11068785
> 
> 赞同：0
> 
> 时间：2012-06-17T03:49:37.387
> 
> 标签：java, class, nested

我有一个叫做火焰喷射器的类，它自然有自己的弹药，与其他武器不同。这种弹药应该是火焰喷射器中的一个嵌套类，因为只有火焰喷射器才会使用这个类？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T04:11:21.763

我将删除我的评论并将其作为答案：

> 这种弹药是否应该是火焰喷射器中的嵌套类

我不这么认为，原因是弹药也会与目标相互作用，因此它的效果超出了宿主武器的感觉。我通常为仅在外部类内部使用的“帮助”类保留内部类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T04:18:50.650

你可能根本不应该上课。通常，您希望这样的东西可以编写脚本，以便于开发和修改。您应该将其替换为从数据文件中读取值的通用弹药类，以自定义行为，除非您有充分的理由不这样做。一般来说，Java 初学者的一个常见错误是为所有东西创建类，无论他们是否需要。

# javascript - 如何确定 span 元素的实际位置（左角）？

> ID：11068786
> 
> 赞同：2
> 
> 时间：2012-06-17T03:49:38.350
> 
> 标签：javascript, jquery, html, offset

> **可能重复：**
> [使用 jQuery 的内联元素的左偏移](https://stackoverflow.com/questions/995838/left-offset-of-an-inline-element-using-jquery)

我有这个 HTML：

```
<div>hello <span>world<br/>
hello world</span></div> 
```

显然，span 元素不是从第一行的开头开始，因此它的形状并不完全是矩形。但是，如果我使用 jQuery 来获取位置

```
$("div").offset().left === $("span").offset().left // is true 
```

如何确定跨度的实际左角？

# .net - proejct模板中的“ProjectTemplate.csproj”和“ProjectTemplate1.vstemplate”有什么意义？

> ID：11068788
> 
> 赞同：0
> 
> 时间：2012-06-17T03:50:01.680
> 
> 标签：.net, templates

标题就是问题。我很想知道这些的重要性。根据我的理解，.csproject 包含将被编译的条目（例如类、引用）

```
<ItemGroup>
        <Reference Include="System"/>
        $if$ ($targetframeworkversion$ >= 3.5)
        <Reference Include="System.Core"/>
        <Reference Include="System.Xml.Linq"/>
        <Reference Include="System.Data.DataSetExtensions"/>
        $endif$
        $if$ ($targetframeworkversion$ >= 4.0)
        <Reference Include="Microsoft.CSharp"/>
        $endif$
        <Reference Include="System.Data"/>
        <Reference Include="System.Xml"/>
    </ItemGroup>
    <ItemGroup>
        <Compile Include="Class1.cs" />

        <Compile Include="Properties\AssemblyInfo.cs" />
    </ItemGroup> 
```

ProjectTemplate1.vstemplate 是那些链接。这是正确的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T04:18:11.447

.vstemplate 定义项目模板。它通常包含一个 .csproj（或多个）的模板定义，当您从该模板实例化项目时将创建该定义。

因此，在您给出的示例中，您的 .vstemplate 可能包含类似

```
<VSTemplate Type="Project" Version="3.0.0" xmlns="http://schemas.microsoft.com/developer/vstemplate/2005">
    <TemplateContent>
        <Project File="ProjectTemplate.csproj">
            <ProjectItem>Class1.cs</ProjectItem>
            <ProjectItem>Properties\AssemblyInfo.cs</ProjectItem>
        </Project>
    </TemplateContent>
</VSTemplate> 
```

# java - 侧卷云

> ID：11068789
> 
> 赞同：2
> 
> 时间：2012-06-17T03:50:16.623
> 
> 标签：java, android, android-emulator, libgdx

我有从左到右滚动的云。我正在使用 OrthographicCamera 这样做。我想知道，我将如何调整这些云以使它们朝向屏幕移动，而不是从左到右？我还可以使用正交相机吗？我该怎么做？

我的代码如下：

```
public void create() {  

        sky = new SkyFlux();

        //getting the height and width for setup purposes
        float w = Gdx.graphics.getWidth();
        float h = Gdx.graphics.getHeight();

        //setting up camera and batch
        camera = new OrthographicCamera(1, h/w);

        //setting up sky
        for(Texture texture:sky.getTexture())
            textures.add(texture);

        //Adding the sky related sprites
        for(Sprite sprite:sky.getSprite())
            skySprites.add(sprite);
}

public void render() {

        //clearing everything out
        Gdx.gl.glClearColor(1, 1, 1, 1);
        Gdx.gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);
        time += Gdx.graphics.getDeltaTime();
        if(time > 1.0f)
            time = 0.0f;

        float speed = 1.0f;

        //Adjusting the speed of the sprites except the first sprite which is the base image.
        for(int i=1;i<skySprites.size();i++) {
            skySprites.get(i).setV(time+speed);
            skySprites.get(i).setV2(time);
            speed = speed+1.0f;
        }

        //setting up
        batch.setProjectionMatrix(camera.combined);

        //begging draw
        batch.begin();

        //items to be drawn
        //TODO: add other items to be drawn here
        for(Sprite sprite:skySprites)
            sprite.draw(batch);

        //ending draw 
        batch.end();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T03:54:21.053

根据定义，正交投影不存储深度信息。使云朵出现在屏幕上的唯一方法是增加精灵大小 - 但我建议不要这样做。

您应该使用非正交投影并仅使用 z 轴。

# php - Wordpress - 根据元字段内容获取帖子

> ID：11068795
> 
> 赞同：28
> 
> 时间：2012-06-17T03:52:24.187
> 
> 标签：php, wordpress

我正在开发一个 wordpress 插件。我正在使用两种不同的自定义帖子类型，**玩家**和**团队**。

*   **玩家**有相关的元字段：名字、姓氏和团队。
*   **Teams**具有团队名称的相关元字段。

在编辑特定**团队**帖子时，我试图将当前拥有该**团队名称的所有****玩家**的数组发布到他们的团队名称元字段中。我不知道该怎么做。任何帮助或文章都会非常有帮助。谢谢

 *** * *

## 回答 #1

> 赞同：64
> 
> 时间：2013-09-13T05:10:12.860

或使用`get_posts`：

```
$args = array(
    'meta_key' => 'player_team',
    'meta_value' => $teamname,
    'post_type' => 'player',
    'post_status' => 'any',
    'posts_per_page' => -1
);
$posts = get_posts($args); 
```

`meta_query`另一个使用代替`meta_key`and的等效查询`meta_value`：

```
$args = array(
    'meta_query' => array(
        array(
            'key' => 'player_team',
            'value' => $teamname
        )
    ),
    'post_type' => 'player',
    'posts_per_page' => -1
);
$posts = get_posts($args); 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-06-17T06:20:01.723

重要的是，您至少要使用帖子类型、元键和元值这三个条件来查询帖子。

例如，假设您的自定义帖子类型只是称为“玩家”并且每个“玩家”帖子都有一个附加的元字段，称为“player_team”

然后，您可以使用以下内容查询这些帖子：

```
$teamname = ""; // the player's team that you're querying for

$myquery = new WP_Query( "post_type=player&meta_key=player_team&meta_value=$teamname&order=ASC" ); 
```**

# ruby-on-rails - Rails 自动分配已经存在的 id

> ID：11068800
> 
> 赞同：98
> 
> 时间：2012-06-17T03:54:05.623
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql

我像这样创建一个新记录：

`truck = Truck.create(:name=>name, :user_id=>2)`

我的数据库目前有数千个卡车实体，但我将 id 分配给了其中几个实体，以某种方式留下了一些可用的 id。所以发生的事情是 rails 创建了 id = 150 的项目，它工作正常。但随后它尝试创建一个项目并将其分配 id = 151，但该 id 可能已经存在，所以我看到了这个错误：

`ActiveRecord::RecordNotUnique (PG::Error: ERROR: duplicate key value violates unique constraint "companies_pkey" DETAIL: Key (id)=(151) already exists.`

下次我运行该操作时，它会简单地分配 id 152，如果尚未采用该值，它将正常工作。如何让 rails 在分配 ID 之前检查它是否已经存在？

谢谢！

编辑

Truck id 是被复制的内容。用户已经存在并且在这种情况下是一个常量。这实际上是我必须处理的遗留问题。一种选择是，这次在 let rails auto assign each id 时重新创建表。我开始认为这可能是最好的选择，因为我还有其他一些问题，但是这样做的迁移会非常复杂，因为 Truck 是许多其他表中的外键。是否有一种简单的方法可以让 rails 创建一个新表，其中包含已存储在 Truck 下的相同数据、自动分配的 ID 并维护所有现有关系？

* * *

## 回答 #1

> 赞同：210
> 
> 时间：2013-02-27T09:40:48.637

我这样做为我解决了这个问题。

```
ActiveRecord::Base.connection.tables.each do |t|
  ActiveRecord::Base.connection.reset_pk_sequence!(t)
end 
```

我找到了reset_pk_sequence！从这个线程。[http://www.ruby-forum.com/topic/64428](http://www.ruby-forum.com/topic/64428)

* * *

## 回答 #2

> 赞同：89
> 
> 时间：2012-06-17T04:43:40.890

Rails 可能正在使用内置的 PostgreSQL 序列。序列的想法是它只使用一次。

最简单的解决方案是使用如下查询将 company.id 列的序列设置为表中的最大值：

```
SELECT setval('company_id_seq', (SELECT max(id) FROM company)); 
```

我猜你的序列名“company_id_seq”、表名“company”和列名“id”……请用正确的替换它们。您可以使用 获取序列名称`SELECT pg_get_serial_sequence('tablename', 'columname');`或查看表定义`\d tablename`。

另一种解决方案是覆盖公司类中的 save() 方法，以便在保存之前手动设置新行的公司 ID。

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2015-09-09T16:34:36.407

基于@Apie[答案](https://stackoverflow.com/a/15108735/2144445)。

您可以创建一个任务并在需要时运行：

```
rake database:correction_seq_id 
```

你创建这样的任务：

```
rails g task database correction_seq_id 
```

并在生成的文件中 ( `lib/tasks/database.rake`) 放入：

```
namespace :database do
    desc "Correction of sequences id"
    task correction_seq_id: :environment do
        ActiveRecord::Base.connection.tables.each do |t|
            ActiveRecord::Base.connection.reset_pk_sequence!(t)
        end
    end
end 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2019-07-03T06:08:24.183

我通过以下命令解决了这个问题。

在你的 Rails 控制台中运行它

```
ActiveRecord::Base.connection.reset_pk_sequence!('table_name') 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-06-17T04:12:35.787

对我来说听起来像是数据库问题而不是 Rails 问题。您的数据库是否可能在您的`id`列上有不正确的身份种子？要进行测试，请尝试直接在您的数据库中插入几次，看看是否存在相同的行为。

# ios5 - Apple Mach-O 链接器错误

> ID：11068804
> 
> 赞同：4
> 
> 时间：2012-06-17T03:54:51.660
> 
> 标签：ios5, twitter, linker-errors

我正在尝试将 Twitter 集成到我的应用程序中，并不断收到以下错误。谢谢你的帮助。

“_OBJC_CLASS_$_TWTweetComposeViewController”，引用自：PreviewViewController.o ld 中的 objc-class-ref：未找到架构 armv7 clang 的符号：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-17T04:06:32.043

你添加了 Twitter.framework 吗？

# html - 是否可以移动复选框的“框”？

> ID：11068806
> 
> 赞同：0
> 
> 时间：2012-06-17T03:55:33.103
> 
> 标签：html, css

目前，当您制作复选框时，“框”位于文本的左侧。是否可以调整方向：

1：垂直（上）：

2：垂直（下）：

3：水平（文本右侧）：

?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T03:58:10.783

你的意思是这样的？

```
<label>This is a checkbox: <input type="checkbox" /></label> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T04:00:32.937

输入复选框与文本无关。

左边的盒子：

```
<input type="checkbox" name="v[]" value="1"> 1
<input type="checkbox" name="v[]" value="2"> 2
<input type="checkbox" name="v[]" value="3"> 3 
```

右边的盒子：

```
1 <input type="checkbox" name="v[]" value="1">
2 <input type="checkbox" name="v[]" value="2">
3 <input type="checkbox" name="v[]" value="3"> 
```

如果你打算把它放在下面或上面，也许你可以创建一个像这样的表：

```
<table>
    <tr>
        <td>ONE</td>
        <td>II</td>
        <td>3</td>
    </tr>
    <tr>
        <td><input type="checkbox" name="v[]" value="1"></td>
        <td><input type="checkbox" name="v[]" value="2"></td>
        <td><input type="checkbox" name="v[]" value="3"></td>
    </tr>
</table> 
```

# java - 异常不会命中方法声明？

> ID：11068808
> 
> 赞同：0
> 
> 时间：2012-06-17T03:56:32.133
> 
> 标签：java

在使用 Eclispe 时，我发现在方法声明上设置断点时，断点永远不会被命中。这是真的？

断点 public void handleRequest(final Buffer buffer) { blah blah blah }

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T04:24:13.067

是的，它不会在方法声明的行上中断。如果您在方法的第一行放置断点，它将停止。

# html - 如何在一个容器中底部对齐多个内联块 div 而不会丢失它们的流？

> ID：11068809
> 
> 赞同：10
> 
> 时间：2012-06-17T03:56:47.447
> 
> 标签：html, css, position, css-position, vertical-alignment

这是我正在处理的一个非常简单的条形图，

```
<div id="container">
  <div style="display:inline-block;">
  </div>
  <div style="display:inline-block;">
  </div>
  <div style="display:inline-block;">
  </div>
</div> 
```

如果我将容器设置为相对，内部 div 设置为绝对和底部：0，那么它们都会重叠。它们在没有绝对定位的情况下很好地流动，但条形图是颠倒的。

**注意：**我的目的是保留条的内联流，而不必明确指定水平位置。

这是一个更好的问题示例。

[http://jsfiddle.net/benstenson/NvvV6/1/](http://jsfiddle.net/benstenson/NvvV6/1/)

![](../Images/17f3543f6477bab71bfe8e640c7f3b3d.png)

```
1) correct orientation but vertical alignment is top
<div id="no-content" class="container">
    <div class="a"></div>
    <div class="b"></div>
    <div class="c"></div>
</div>

2) wrong orientation, vertical alignment top
<div id="has-content" class="container">
    <div class="a">a</div>
    <div class="b">b</div>
    <div class="c">c</div>
</div>

3) mixed orientation, alignment is crazy
<div id="mixed" class="container">
    <div class="a">a</div>
    <div class="b">b</div>
    <div class="c"></div>
</div>

4) correct orientation and correct alignment but<br/>
flow has been lost and horizontal position must be explicit
<div id="absolute" class="container">
    <div class="a">a</div>
    <div class="b">b</div>
    <div class="c"></div>
</div>

5) here we go!
<table class="container">
    <tr>
        <td><div class="a">a</div></td>
        <td><div class="b">b</div></td>
        <td><div class="c"></div></td>
    </tr>
</table>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​ 
```

**css**

```
body {padding:1em;font-family:sans-serif;font-size:small;}
.container {
    height:2.5em;width:50%;margin-bottom:1em;
    background-color:lightgray;
    font-size:larger;
    font-weight:bold;
    text-transform:Uppercase;
}
div.container > div {
    width:32%;
    display:inline-block;
    background-color:black;
    color:cyan;
}

#absolute { position:relative;}
#absolute > div {position:absolute;bottom:0px;opacity:.3;}

.a {height:50%;}
.b {height:60%}
.c {height:80%;}

td{width:33.333%;vertical-align:bottom;}
td > div{​background-color:black;​color:cyan;}​ 
```

那么有没有更好的方法来做到这一点，比如使用 webkit flexbox 之类的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T01:15:18.653

这适用于我的浏览器（Chrome 19）

![在此处输入图像描述](../Images/a2d73bcfcf50a6518483ac766fe38639.png)

**html**

```
<div id="container">
    <div id="a">a</div>
    <div id="b">b</div>
    <div id="c">c</div>
</div> 
```

**css**

```
#container {
    height:10em;
    width:90%;
    border:1px solid black;

    display:-moz-box; /* Firefox */
    display:-webkit-box; /* Safari and Chrome */
    display:box;

    -webkit-box-align:end;
}

#container > div {
    width:34%;
    border:1px solid red;

    -moz-box-flex:1.0; /* Firefox */
    -webkit-box-flex:1.0; /* Safari and Chrome */
    box-flex:1.0;
}

#a {height:20%}
#b {height:50%}
#b {height:70%} 
```

[http://jsfiddle.net/benstenson/m6vR7/](http://jsfiddle.net/benstenson/m6vR7/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T04:07:19.737

绝对定位时对我有用：

```
<style type='text/css'>
#container{
 position  :relative;
 border    :1px solid #000;
 height    :60px;
 width     :100px;
}
 .b{
   position:absolute;
   width   :20px;
   bottom  :0
  }
 .b1{background:blue  ;height:10px; left:0px}
 .b2{background:red   ;height:30px; left:30px;}
 .b3{background:yellow;height:50px; left:60px}
</style>

<div id="container">
  <div class='b b1'></div>
  <div class='b b2'></div>
  <div class='b b3'></div>
</div>​​​​​​​​​​​​ 
```

[在这里拉小提琴。](http://jsfiddle.net/WwXr6/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T02:11:12.353

这是另一种方法。每个条都需要一个额外的包装。这个想法是制作几列`.bar-container`跨越条形的正确宽度和整个高度`#graph`。

```
<!DOCTYPE html>
<html>
    <head>
        <title>Testing</title>
        <style type="text/css">
            .bar-container{
                float:left;
                height:100%;
                margin-right:10px;
                position:relative;
                width:30%;
            }
            .bar {
                border:1px solid black;
                bottom:0;
                position:absolute;
                width:98%;
            }

            .bar-1 {
                height:50px;
            }

            .bar-2 {
                height:100px;
            }

            .bar-3 {
                height:75px;
            }

            #graph {
                height:500px;
                margin:20px auto;
                position:relative;
                width:500px;
            }
        </style>
    </head>
    <body>
        <div id="graph">
            <div class="bar-container">
                <div class="bar bar-1">
                </div>
            </div>
            <div class="bar-container">
                <div class="bar bar-2">
                </div>
            </div>
            <div class="bar-container">
                <div class="bar bar-3">
                </div>
            </div>
        </div>      
    </body>
</html> 
```

# objective-c - Objective-c 使用 CharacterAtIndex

> ID：11068815
> 
> 赞同：2
> 
> 时间：2012-06-17T03:58:44.937
> 
> 标签：objective-c, nsstring, indexing, character

我想`characterAtIndex`在Objective-C中使用来比较某个位置的字符和一个字符（例如'v'）。问题是它`characterAtIndex`似乎发送了一个 int 而不是一个字符。我试图做这样的事情：

```
if ([string characterAtIndex:i] = @"v") 
```

或者也：

```
if (string[[string characterAtIndex:i]] .... ) 
```

我知道在某些语言中，您可以直接转到字符串中的某个位置（如数组）以查看字符，但在 Objective-C 中似乎不是这样。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-17T04:03:06.993

`characterAtIndex`返回一个字符，而不是 NSString 对象，所以请改为执行此类操作，

```
if ([a characterAtIndex:i] == 'v') 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-17T04:15:28.553

我更喜欢@X-Slash 的答案（+1），但为了彻底，我将展示如何仅使用 OOP 可可（即使用 NSString 而不是 c-strings）来做到这一点。

```
if([[a substringWithRange:(NSRange){0,1}] isEqualToString:@"v"]) { ... 
```

其中 {0,1} 是第一个字符，{1,1} 是第二个字符，依此类推。

# apache - 将 https 请求重定向到不同的端口

> ID：11068817
> 
> 赞同：1
> 
> 时间：2012-06-17T03:59:12.813
> 
> 标签：apache, mod-rewrite, mod-proxy

我在一个 Magento 安装上有多个网站。其中三个站点具有不同的 SSL 证书。SNI 不是一个选项，因此我们决定使用不同的端口来处理请求。

在虚拟主机配置中，每个使用 SSL 的站点都分配了一个不同的端口。

“https://domain1.com”-> 标准 443

“https://domain2.com:444”

“https://domain3.com:445”

如果您直接去找这些请求，它们就可以正常工作。Magento 正确处理其所有请求。

这是摩擦：

如果您在没有端口号的情况下访问“https://domain2.com”，则会触发 domain1.com 的虚拟主机配置。

[我需要一种方法来捕获对https://domain2.com](https://domain2.com)的所有请求并将它们重定向到[https://domain2.com:444](https://domain2.com:444)。

必须有一种方法可以使用 mod_rewrite 或 mod_proxy 来做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T07:23:11.650

您可以使用 mod_rewrite 来完成，但这里的问题是您的证书不适用于 domain2.com 并且浏览器会抱怨（除非这些实际上是子域并且您有通配符证书）

将这些规则添加到 domain1 配置中：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} domain2.com$ [NC]
RewriteRule ^(.*)$ https://domain2.com:444/$1 [R=301]

RewriteCond %{HTTP_HOST} domain3.com$ [NC]
RewriteRule ^(.*)$ https://domain3.com:445/$1 [R=301] 
```

# asp.net - 如何用键确认列表视图编辑？

> ID：11068824
> 
> 赞同：0
> 
> 时间：2012-06-17T04:01:07.430
> 
> 标签：asp.net, listview

我在列表视图中有以下布局：

```
 <EditItemTemplate>
                <tr class="<%# If(Container.DisplayIndex Mod 2 = 0, "", "a") %>">
                    <td style="text-align: center;width:50px;">
                        <asp:ImageButton ID="btnConfirmar" runat="server" CommandName="Update" ImageUrl="../images/Aceptar.ico">
                        </asp:ImageButton>
                    </td>
                    <td style="text-align: center;width:50px;">
                        <asp:ImageButton ID="btnCancelar" runat="server" CommandName="Cancel" ImageUrl="../images/Cancelar.ico">
                        </asp:ImageButton>
                    </td>
                    <td style="text-align: left;">
                        <asp:TextBox ID="txtZonaNombre" Text='<%#Convert.ToString(CType(Container.DataItem, KeyValuePair(Of Long, Mercurio.clsZonas)).Value.ZonaNombre)%>'
                            runat="server" Width="100%" />
                        <asp:RequiredFieldValidator ID="ZonaNombreValidador" ControlToValidate="txtZonaNombre"
                            Display="Dynamic" Text="La zona debe tener nombre" runat="server" />
                    </td>
                </tr>
            </EditItemTemplate> 
```

我想要的是通过点击返回键（intro、enter、chr(13)，无论你如何命名）来确认编辑，并在焦点位于 txtZonaNombre 文本框时通过点击 esc 键取消编辑。

我尝试使用 jquery 模拟“点击”，使用以下代码：

```
$("#txtZonaNombre").keypress(function (e) {
    if (e.which === 13) {
        $("#btnConfirmar").trigger('click');
        return false;
    }
}); 
```

但代码甚至没有被触发（我已经通过警报调用对其进行了检查）。

整个列表视图是用户控件的一部分（它位于 ascx 文件中），并且该控件位于母版页布局内（我指的是母版页中的 jquery 库），而列表视图位于更新面板内。

我感谢您的帮助！问候！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T18:13:25.510

您在控件上设置的 id 与在 html 中呈现的 id 不同（因为 ASP.NET 在它前面加上了父 NamingContainers 的 id）。

如果您使用的是 ASP.NET 2010，您可以将 ControlIDMode 设置为 Static 以确保 html 中的 id 相同。

或者，您可以检查 html 中的 id （在浏览器中查看源代码）并更改您的 JavaScript 以使用它。

# jquery - 如何动态唯一地标识单个页面上的多个提交表单 元素？

> ID：11068825
> 
> 赞同：0
> 
> 时间：2012-06-17T04:01:56.383
> 
> 标签：jquery, ruby-on-rails-3, devise

我要做的是在用户提交表单时`hide`对`form`元素进行处理，并通过 AJAX 显示“谢谢”消息。

我遇到的问题是该页面至少有 3 个看起来相同的表单。

它也是一个`Devise`注册表单，所以我如何隐藏用户提交的特定表单而不是页面上的其他 2 - 使用 jQuery？

这是我的表单代码：

```
<%= form_for(resource, :as => resource_name, :class => "send-with-ajax", :url => user_registration_path(resource), :validate => true, :html => { :id => 'user_new' }, :remote => true) do |f| %>
    <div class="six columns alpha"> 
       <%= f.text_field :email, :placeholder => "your-email@address.com", :input_html => {:autofocus => true}, :validate => true %>
    </div>              
    <div class="three columns sign-up alpha">
          <%= f.submit :label => "Submit", :value => "Sign Me Up!"  %>
      <div class="ajax-response"><%= devise_error_messages! %></div>
          </div>
<% end %> 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T04:11:56.613

不

`$('#user_new').submit(function() { $(this).hide(); });`

做这份工作？那应该隐藏提交时的表单。虽然表单看起来相同，但它们应该有不同的 id 或至少有不同的类，您可以在 jQuery 中轻松引用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T04:20:24.033

这是我制作的一个演示，它将为您提供满足您要求的可能方法。

[在此处查看演示](http://jsfiddle.net/nickadeemus2002/f8x3D/)

正如 MBHNYC 所说，您需要为每个表单提供唯一的 ID，以便它正常工作。

# php - 在 4.2.1 中更改了表单类

> ID：11068826
> 
> 赞同：1
> 
> 时间：2012-06-17T04:02:00.907
> 
> 标签：php, user-interface, frameworks, atk4

使用此处记录的 2 列 [http://agiletoolkit.org/doc/form/styling](http://agiletoolkit.org/doc/form/styling) 在 4.2.1 中不起作用

```
$f->setFormClass('basic atk-form-basic-2col'); 
```

做事的方式有改变吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T08:24:22.510

是的，表单现在只支持“堆叠”类，它将变量放在标签之上。表单不再有自己的布局，但它们使用默认的网格系统。例如，如果您将“atk-grid”列分配给表单，然后在您的字段集上使用“span3”，您将获得垂直表单块。

如果您将 atk-row 类分配给 fieldset 并在 field 上使用 span3，您将获得水平表单块。

设置表单类：`$form->setClass('atk-row')`

第一个字段集已包含在模板中，因此要更改它：`$form->template->trySet('fieldset', 'span4');`

后续字段集可以设置为`$form->addSeparator('span5');`

个别领域类是通过`$field->setAttr('class','...');`

示例（具有水平布局的基于模型的表单）：

```
$form=$this->add('Form')->setClass('stacked');
$form->template->trySet('fieldset','atk-row');
$form->setModel('User');

foreach($form->elements as $field){
    if($field instanceof Form_Field){
        $field->setAttr('class','span3');
    }
}

// If you want to separate fields into 2 rows:
$sep=$form->addSeparator('atk-row');
$form->add('Order')->move($sep,'middle')->now(); 
```

为了简化这一切，您可以使用自定义表单模板。在最新的 Github master 中查找[`form.html`](https://github.com/atk4/atk4/blob/master/templates/shared/form.html)并比较它。[`form_horizontal.html`](https://github.com/atk4/atk4/blob/master/templates/shared/form_horizontal.html)这应该让您很好地了解如何创建自己的表单布局。不像 Agile Toolkit 只有一种构建表单的方法。

ps 我已更新文档页面以显示不兼容警告。

# salesforce - 如何获取失败的批次记录？

> ID：11068830
> 
> 赞同：1
> 
> 时间：2012-06-17T04:03:14.907
> 
> 标签：salesforce, apex-code

有没有办法获取失败批次中的记录？AsyncApexJob 只给了我失败的次数——但仅此而已......

[http://www.salesforce.com/us/developer/docs/object_reference/index_Left.htm#CSHID=sforce_api_objects_asyncapexjob.htm|StartTopic=Content%2Fsforce_api_objects_asyncapexjob.htm|SkinName=webhelp](http://www.salesforce.com/us/developer/docs/object_reference/index_Left.htm#CSHID=sforce_api_objects_asyncapexjob.htm|StartTopic=Content%2Fsforce_api_objects_asyncapexjob.htm|SkinName=webhelp)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-18T15:52:25.167

我认为没有办法使用默认功能获得所有所需的详细信息。我通过创建一个批处理状态对象来解决这个问题，我可以在其中记录批处理中发生的错误。本质上，我将批处理执行代码包装在 try/catch 块中，在 catch 中，我添加了一个包含错误详细信息的新批处理状态记录。

```
global void execute(Database.BatchableContext BC, List<sObject> scope) { 

    List<Batch_Status__c> BatchStatuses = new List<Batch_Status__c>();

    try {
        // ... batch execute code ...
    }
    catch(Exception e) {
        // exception logging
        Batch_Status__c BatchStatus = new Batch_Status__c();

        // ... add exception detail to BatchStatus ...
        BatchStatuses.add(BatchStatus);
    }

    insert BatchStatuses;
} 
```

# iphone - 在表格视图的编辑模式下添加左栏按钮项

> ID：11068831
> 
> 赞同：-1
> 
> 时间：2012-06-17T04:03:18.740
> 
> 标签：iphone, objective-c, uitableview, uibarbuttonitem

在表格视图控制器的编辑模式下，如何施加其他行为。我想实现一个行为，就像电话应用程序的“最近”部分一样，一旦按下编辑，左侧就会出现一个清除按钮。我怎样才能做到这一点？

在 viewDidLoad 我有

```
self.navigationItem.rightBarButtonItem = self.editButtonItem; 
```

因此，当按下编辑按钮时，我得到了红色圆圈，它给了我删除功能，它工作正常，然后

```
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath 
```

被自动调用，因此 tableview 和基础数据被更新。他们都工作正常。但是如果我像下面这样修改 viewDidLoad 的内容

```
self.navigationItem.rightBarButtonItem = self.editButtonItem;
self.navigationItem.rightBarButtonItem.action = @selector(editPressed:); 
```

并实施

```
- (IBAction)editPressed:(UIButton *)sender
{
    NSLog(@"In Edit Pressed");
} 
```

按下 Edit 按钮将带我进入 editPressed：但现在 Tableview 的 Edit 的正常行为丢失了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T04:13:15.163

使用默认视图控制器编辑按钮时，您可以覆盖`- (void)setEditing:(BOOL)editing animated:(BOOL)animated`. `UITableViewController`所以，你可以把代码放在这个方法中，然后`super`就可以了。因此，您的代码可能如下所示：

```
- (void)setEditing:(BOOL)editing animated:(BOOL)animated
{
    [super setEditing:editing animated:animated];

    if (myTable.editing)
        self.navigationItem.leftBarButtonItem = additionalButtonItem;
    else
        self.navigationItem.leftBarButtonItem = nil;
} 
```

# javascript - 使用 jquery 更改 html 表单元素占位符

> ID：11068832
> 
> 赞同：3
> 
> 时间：2012-06-17T04:03:26.447
> 
> 标签：javascript, jquery, html

我需要帮助使用 javascript 更改`placeholder`输入字段的值，最好是 JQuery。

`<input id="someinput" value="" placeholder="Change This With JS" type="text">`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T04:06:19.097

**像这样的**演示：http:** [//jsfiddle.net/qcNFF/](http://jsfiddle.net/qcNFF/)？**

 **好读：[http ://api.jquery.com/prop/](http://api.jquery.com/prop/)

**代码**

```
$(function() {
    alert(' Before change => ' + $('#someinput').prop('placeholder'));
    $('#someinput').prop('placeholder', "text changed- hulk");
    alert(' After change => ' + $('#someinput').prop('placeholder'));
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T04:07:33.700

这是一个快速演示：

小提琴代码 [http://jsfiddle.net/nickadeemus2002/H7MG7/](http://jsfiddle.net/nickadeemus2002/H7MG7/)

只需使用 jquery 的 .attr() 方法来更改字符串。**

# jquery - 将 onclick 函数从 href 更改为 div

> ID：11068833
> 
> 赞同：0
> 
> 时间：2012-06-17T04:04:04.857
> 
> 标签：jquery

我正在尝试更改此处发布的此脚本，以便我可以放弃对 jQuery 的垃圾尝试，但我需要该脚本来响应对 div id 或类的点击，而不是对 href 链接的点击

使用 .class 或 #id 更新所有代码不起作用

```
<div class="top_menu_menub">
    <ul id="menu">
        <li class="sub">
        <ul>
            <li><a href="">Control Center</a></li>
            <li><a href="">APEC Trinity</a></li>
            <li><a href="">APEC Living</a></li>
            <li><a href="">APEC Energy</a></li>
        </ul>
        </li>
    </ul>
    </div>

$(function(){
    $(document).ready(function () {
        $('a.menu_button').click(function (e) {
            e.preventDefault();
            var $this = $(this);
            var ulId = $this.attr("href");
            var clicked_menu_is_visible = $this.parent().find("ul" + ulId).filter(':visible').length > 0;
            var visible_uls = $this.parent().find("ul").filter(':visible');
            if (visible_uls.length === 0) { //no menus showing - just show clicked menu 
                $ul = $this.parent().find("ul" + ulId);
                $ul.slideToggle('medium');
            } else { //close open menus (should only be one open) then open clicked menu
            //via callback 
            $this.parent().find("ul").filter(':visible').slideUp("medium", function() {
                $ul = $this.parent().find("ul" + ulId);
                //open clicked menu - unless menu was already open when clicked
                if (!clicked_menu_is_visible) {
                    $ul.slideToggle('medium');
                }
            });
        }  
    });
 });
 });

.top_menu_menub {
    padding: 3px 0px 0px 0px;
    width: 200px;
    float: left;
    height: 20px;
    text-align: left;
    font-family: Helvetica, sans-serif;
    font-size: 10px;
    font-weight: bold;
    color: #aaa;
    background-image: url(../images/apecbuttona.jpg); background-repeat: no-repeat; background-position: 8px 4px;
    cursor: pointer;}
#menu {list-style-type:none; width:200px; padding:0; margin:0 auto; height: 24px;}
#menu ul {list-style-type:none; padding:0; margin:0; border: solid 1px #eee; border-radius: 5px; }
#menu li {float:left; margin:1px 1px 0 0;position:relative; z-index: 9999}
#menu li.sub {width: 200px; height: 16px; padding: 1px 0px 0px 0px;}
#menu li.sub:hover { color:#00CCFF; background-image: url(../images/apecbutton.jpg); background-repeat: no-repeat;background-position: 8px 0px; height: 24px;}
#menu li a {display:block; color:#999; font-family:arial, sans-serif; font-size:11px; line-height:23px; width:107px; text-decoration:none; text-align:left; cursor:pointer; font-weight:100; border-bottom: 1px solid #eee; padding-left: 8px;}
#menu li a:hover {background:#fff; color:#4FA4F9;}
#menu ul {position:absolute;left:-9800px;width:115px; }
#menu li.click {}
#menu li.click ul{left: 12px; top:22px; background: #fff; } /* the background image is for IE7 */ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T04:33:19.637

我用

```
$(function() {
 $('.classname').click(function() {
... 
```

（假设您的类名是在引用的 css 文件中定义的）

或者

```
$(function() {
 $('#idname').click(function() {
... 
```

它会做你想要的。

# mysql - MySQL 服务器磁盘空间不足？

> ID：11068834
> 
> 赞同：1
> 
> 时间：2012-06-17T04:04:33.903
> 
> 标签：mysql

我们公司的 Web 应用程序每天存储数千名访问者的大量数据点，我们预计硬盘很快就会被填满。我们的服务器无法支持更多的硬盘驱动器，我们对腾出一些空间来为我们购买几个小时的空间的小技巧不感兴趣。

我们如何解决这个问题？数据库很大，超过 200GB，而且我们的网站*需要*可用，所以我不认为复制它并将其移动到新的、更大的服务器对我们来说是一个不错的选择。此外，当那台服务器的磁盘空间不足时会发生什么？

大型网站通常会做什么来解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T04:28:52.103

您可能想研究将多个数据库服务器分离为“[碎片](http://en.wikipedia.org/wiki/Shard_%28database_architecture%29)” 。您可能必须向应用程序添加一些逻辑，以了解在哪里可以找到一组数据以及如何将查询与源自多个碎片的数据连接起来。还有[第三个](http://www.dbshards.com/)-可以帮助您完成此过程的[应用程序。](http://www.dbshards.com/)

# asp.net - asp.net(vb) 读取 xml 中的元素值

> ID：11068838
> 
> 赞同：1
> 
> 时间：2012-06-17T04:05:39.677
> 
> 标签：asp.net, xml, xml-parsing

如果我在字符串中有一些 xml，我该如何阅读并挑选出每个元素的值？什么是最快最简单的方法？

```
 Dim strXml As String = "<subscription>"
    strXml = strXml & "<reference>abc123</reference>"
    strXml = strXml & "<status>active</status>"
    strXml = strXml & "<customer>"
    strXml = strXml & "<fname>Joe</fname>"
    strXml = strXml & "<lname>bloggs</lname>"
    strXml = strXml & "<company>Bloggs inc</company>"
    strXml = strXml & "<phone>1234567890</phone>"
    strXml = strXml & "<email>joebloggs@hotmail.com</email>"
    strXml = strXml & "</customer>"
    strXml = strXml & "</subscription>" 
```

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T12:38:26.450

您可以使用 Linq to xml，如下代码：

```
 Dim xmlE As XElement = XElement.Parse(strXml)

    Dim str As String = (From el In xmlE.Elements("customer").Elements("fname")
                        Select el.Value).Single() 
```

# c++ - 如何同时等待 I/O 完成端口和事件？

> ID：11068839
> 
> 赞同：5
> 
> 时间：2012-06-17T04:06:05.413
> 
> 标签：c++, c, multithreading, winapi, iocp

有没有可能的方法来实现这一目标？

例如，我有一个 I/O 完成端口，有 10 个工作线程从中拉出任务。每个任务都与一个对象相关联。有些对象不能同时处理，所以如果一个线程正在处理其中一个对象，而第二个线程拉出需要这个对象的任务，则第二个线程必须等待第一个线程完成。

作为一种变通方法，对象可能有一个在释放时发出信号的事件。如果一个线程因为接收到的任务需要一个锁定的对象而被“卡住”，它可以**等待锁定的对象被释放，或者等待新任务排队。**如果它选择了一个新任务，它将把它无法处理的任务推回队列中。

我知道替代方法，但这似乎是应该存在的功能。这可以通过 Windows API 实现吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T17:13:11.140

改变你的设计。

向对象添加内部任务队列。然后，当一个任务发布到 IOCP 时，让 IOCP 线程将该任务放入对象的任务队列中，如果没有其他线程正在“处理”该对象的任务，则让该 IOCP 线程将该对象标记为正在处理并开始处理该任务; （锁定每个对象队列，添加任务，检查我们是否应该成为处理线程，解锁队列）然后处理对象中的任务或返回 IOCP。

当另一个线程有相同对象的任务时，它也会经历相同的进程。请注意，处理对象的线程不会在对象的任务队列上持有锁，因此新的 IOCP 线程可以将任务添加到对象的队列中，然后看到线程已经在处理并简单地返回到 IOCP。

一旦线程完成当前任务，它会再次检查对象的任务队列并继续处理下一个任务，或者，如果队列为空，则将对象标记为未处理并返回到 IOCP。

这可以防止您在尚未运行的任务上阻塞 IOCP 线程，并维护当时恰好正在处理的线程的数据局部性。

一个潜在的问题是，您可以让一些总是忙碌的对象饿死其他对象，但您可以通过简单地检查您已处理的任务数量以及它是否超过可调整的最大值然后将下一个要处理的任务推回 IOCP 来避免这种情况，以便其他对象有机会。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T04:28:29.337

想法解决方案是让一个线程等待事件并在事件发生时发布到完成端口。或者，让一个线程等待事件并处理它。如果您需要做两件根本不同的事情，请使用两个线程来完成它们。

# deployment - 如何挂钩到正在运行的 Heroku Clojure repl

> ID：11068840
> 
> 赞同：1
> 
> 时间：2012-06-17T04:06:06.323
> 
> 标签：deployment, heroku, clojure

有没有办法连接到 heroku dyno 正在运行的 Clojure repl？有两种情况我想看看发生了什么。

*   一世。我想初始化我的 MongoLab 数据库。但是当我到达我的[heroku repl](https://devcenter.heroku.com/articles/clojure#console)时，如果我尝试进行数据库调用，我会收到一个错误。
*   ii. 在 Heroku 上运行 Clojure 应用程序时，我收到 NullPointerException。但是日志没有显示足够的信息让我知道去哪里找。因此，深入研究 dyno 的运行 repl 会很好。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T03:51:06.310

heroku 的文件系统是只读的，不支持 MongoLab DB，来源：[https](https://devcenter.heroku.com/articles/read-only-filesystem) ://devcenter.heroku.com/articles/read-only-filesystem，heroku的 clojure 文档：[https ://devcenter.heroku.com/categories/clojure](https://devcenter.heroku.com/categories/clojure)

# iphone - iOS - 删除存储在主 NSDictionary 内的所有 NSDictionaries 上包含键的所有条目

> ID：11068842
> 
> 赞同：4
> 
> 时间：2012-06-17T04:06:13.840
> 
> 标签：iphone, ios, cocoa-touch, ipad

我有一个主要的 NSMutableDictionary，其中包含其他 NSMutableDictionary 的集合。

事情是这样的：

```
NSMutableDictionary *subDict1 = [NSMutableDictionary dictionaryWithObjectsAndKeys:
     obj1, @"name",
     obj2, @"color",
    nil];

NSMutableDictionary *subDict2 = [NSMutableDictionary dictionaryWithObjectsAndKeys:
     obj3, @"name",
     obj4, @"color",
     obj5, @"address",
     obj6, @"phone",
     obj7, @"color",
     obj8, @"parent",
    nil];

NSMutableDictionary *subDict3 = [NSMutableDictionary dictionaryWithObjectsAndKeys:
     obj0, @"name",
     obj9, @"parent",
     objA, @"site",
     objB, @"surname",
     objC, @"label",
    nil]; 
```

这些子词典可能有不同数量的条目，并且键可能会有所不同。有些可能有同名的键。

它们存储在一个主字典中，如下所示：

```
NSMutableDictionary *mainDict = [NSMutableDictionary dictionaryWithObjectsAndKeys:
    subDict1, @"1",
    subDict3, @"3",
    subDict2, @"2",
    nil]; 
```

我想一次性删除所有子词典中具有特定键的所有条目。

我知道我可以遍历字典和子字典，但我也知道字典有聪明的方法可以使用谓词和其他东西来做到这一点，但我不知道如何。我试图找到这一点，因为这将运行的方法有点棘手，并且必须尽可能快地完成它，我不确定循环的正常迭代是否足够快......

有什么线索吗？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-17T05:12:27.590

这是一种递归方法，它不关心目标键的深度。（没试过）...

```
- (void)removeKey:(NSString *)keyToRemove fromDictionary:(NSMutableDictionary *)dictionary {

    NSArray *keys = [dictionary allKeys];

    if ([keys containsObject:keyToRemove]) {
        [dictionary removeObjectForKey:keyToRemove];
    } else {
        for (NSString *key in keys) {
            id value = [dictionary valueForKey:key];
            if ([value isKindOfClass:[NSMutableDictionary self]]) {
                [self removeKey:keyToRemove fromDictionary:(NSMutableDictionary *)value];
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-17T04:12:17.910

您只需遍历所有子目录并手动删除适当的键值对。你不应该担心它是否足够快。相反，创建一个有效的实现并测试/测量它。如果它太慢，那么您可以对其进行分析并提出提高性能的方法。过早的优化是一件坏事。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-17T04:25:42.367

```
NSArray* keys = [NSArray arrayWithObjects:@"name", @"address", nil]; 
[dics removeObjectsForKeys:keys];  //Or sub dics 
```

# php - 我需要做 modrewrite 才能让它工作吗？

> ID：11068855
> 
> 赞同：0
> 
> 时间：2012-06-17T04:09:53.850
> 
> 标签：php, facebook-graph-api, mod-rewrite

我正在使用 facebook api。[在这里查看](https://developers.facebook.com/docs/opengraph/actions/#read)网站上的文档。

查看您需要通过 http post 连接的示例：

```
https://graph.facebook.com/me/recipebox:cook?
recipe=http://www.example.com/pumpkinpie.html&access_token=YOUR_ACCESS_TOKEN 
```

但是，就我而言，“食谱”（实际上是 MLB 游戏）有一个链接：

```
http://www.sportannica.com/team.php?team=New York Yankees&year=2012 
```

我是否需要使用 modrewrite 使我的链接与其在 facebook 图表 url 中的位置兼容？在 URL 中有另一个问号有点搞砸了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T06:54:49.010

可能不是，尝试在您为参数传递的 URL 上使用[urlencode 。](http://php.net/urlencode)`recipe`

```
$recipeurl = 'http://www.sportannica.com/team.php?team=New York Yankees&year=2012';

$url = 'https://graph.facebook.com/me/recipebox:cook?recipe=' .
       urlencode($recipeurl) . '&access_token=1234'; 
```

# ruby-on-rails - 将条带与设计集成

> ID：11068856
> 
> 赞同：3
> 
> 时间：2012-06-17T04:09:55.217
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise, payment-processing, stripe-payments

我正在关注条纹上的 railscast #288，但我在设置条纹隐藏令牌时遇到了一些困难。我正在使用具有简单表单集成的最新版本设计。

这是我的注册控制器：

```
class RegistrationsController < Devise::RegistrationsController

  def create
    build_resource 
    if resource.save_with_payment
      if resource.active_for_authentication?
        set_flash_message :notice, :signed_up if is_navigational_format?
        sign_in(resource_name, resource)
        respond_with resource, :location => after_sign_up_path_for(resource)
      else
        set_flash_message :notice, :"signed_up_but_#{resource.inactive_message}" if is_navigational_format?
        expire_session_data_after_sign_in!
        respond_with resource, :location => after_inactive_sign_up_path_for(resource)
      end
    else
      clean_up_passwords resource
      respond_with resource
    end
  end 
```

我的新用户注册表格：

```
<%= simple_form_for(resource, :as => resource_name, :url => registration_path(resource_name), :html => {:class => 'well'} ) do |f| %>
  <%= f.error_notification %>
  <%= f.error_messages %>
  <h3 class="center">Create your credentials for logging in:</h3><hr>
  <div class="inputs">
    <%= f.input :email, :required => true  %>
    <%= f.input :password, :required => true %>
    <%= f.input :password_confirmation, :required => true %>
  <h3 class="center">Are you a Shipper or a Carrier?</h3><hr>
    <%= f.input :role, :collection => User::ROLES, :as => :radio_buttons %>
    <%= f.input :stripe_card_token, :as => :hidden %>
  </div>
  <h3 class="center">Your Credit Card Information:</h3><hr>
  <fieldset>
    <div class="field">
      <%= label_tag :card_number, "Credit Card Number" %>
      <div class="input-prepend inline-block">
      <span class="add-on"><strong>#</strong></span>
      <%= text_field_tag :card_number, nil, name: nil %>
    </div>
    <div class="field">
      <%= label_tag :card_code, "Security Code on Back of Card (CVV)" %>
      <div class="input-prepend inline-block">
      <span class="add-on icon-credit-card"></span>
      <%= text_field_tag :card_code, nil, name: nil, :size => 4  %>
    </div>
    <div class="field">
      <%= label_tag :card_month, "Card Expiration" %>
      <%= select_month nil, { add_month_numbers: true }, { name: nil, id: "card_month" } %>
      <%= select_year nil, { start_year: Date.today.year, end_year: Date.today.year+15 },
  { name: nil, id: "card_year" } %>
    </div>
    <div id="stripe_error">
      <noscript>JavaScript is not enabled and is required for this form. First enable it in your web browser settings.</noscript>
    </div>
  </fieldset>
  <hr>
  <%= f.input :terms, :as => :boolean, label: "* I have read and agreed to the terms of service" %>
  <div class="actions">
    <%= f.button :submit, "Sign up", class: "btn-large icon-thumbs-up" %>
  </div>
<% end %> 
```

我有一个具有以下属性的用户模型：

```
attr_accessible :email, :password, :password_confirmation, :remember_me, :role, :terms, :stripe_token, :stripe_card_token 
```

最后是让这一切正常工作的咖啡脚本：

```
jQuery ->
Stripe.setPublishableKey($('meta[name="stripe-key"]').attr('content'))
subscription.setupForm()

subscription = 
  setupForm: ->
    $('#new_user').submit ->
        $('input[type=submit]').attr('disabled', true)
        if $('#card_number').length
            subsciption.processCard()
            false
        else
            true

processCard: ->
    card =
        number: $('#card_number').val()
        cvc: $('#card_code').val()
        expMonth: $('#card_month').val()
        expYear: $('#card_year').val()
    Stripe.createToken(card, subscription.handleStripeResponse)

handleStripeResponse: (status, response) ->
    if status == 200
        $('#user_stripe_card_token').val(response.id)
        $('#new_user')[0].submit()
    else 
        $('#stripe_error').text(response.error.message)
        $('input[type=submit]').attr('disabled', false) 
```

当我去创建一个新用户时，我的动作控制器给了我以下错误消息：

```
undefined method `stripe_card_token' for #<User:0x00000103fe7b90> 
```

但是我不认为这应该是可能的，因为我已经在我的 user.rb 模型的 attr_accessible 调用中定义了这个方法。任何解释都会非常有帮助，因为我认为我已经完成了设置的 90%。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-20T12:41:43.003

除非`stripe_card_token`是用户表中的字段，否则您需要将其`attr_accessor`设为（以及`attr_accessible`）。

# html - 标签是可选的吗？

> ID：11068862
> 
> 赞同：6
> 
> 时间：2012-06-17T04:11:49.513
> 
> 标签：html, html-table

```
<table>
  <td>cell1</td>
  <td>cell2</td>
</table> 
```

我发现这个标签适用于 ie8、firefox 11 和 chrome，但不确定这是否符合标准并适用于所有主要浏览器。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-17T04:15:11.667

所有浏览器都接受 HTML 布局中的“怪癖”，并将根据他们发现的内容呈现“最佳猜测”。但是在 HTML 规范中，一个`<tr>`标签是绝对[需要](http://www.w3.org/TR/1999/REC-html401-19991224/struct/tables.html#h-11.2.1)的——不管它是否有效，你应该总是使用有效的 HTML！

早检查，经常检查！

[http://validator.w3.org/](http://validator.w3.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T04:24:00.847

`<tr>`tag 当然是必需的`<table>`，它指定了特定行的开始和结束，所以它不能被忽略。

# sql-server-2008 - sql查找不匹配的记录

> ID：11068866
> 
> 赞同：0
> 
> 时间：2012-06-17T04:12:40.480
> 
> 标签：sql-server-2008

两张桌子。我在两个表中都有 a 列（日期时间类型）和 b 列（数字类型）。我想在两个表中搜索列 a 并只获取不匹配的列。然后仅显示没有匹配日期时间列 a 的列 a 和 b。

```
 Select Column b from Table 1 
    left join Table 2
    where Table1.Column a <> Table2.Column a 
```

它是否正确？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T04:34:09.527

`NOT IN`您可以使用@drjay 或子句指示的左连接。我个人更喜欢 NOT in 因为它更容易阅读。

```
SELECT [Column b] 
FROM [Table 1]
WHERE [Column a] NOT IN (
    SELECT [Column a]
    FROM [Table 2]
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T04:30:44.537

你很亲密。不确定确切的语法，因为我没有 SQL Server。但在 MySQL 中是：

```
SELECT * 
FROM table_1 t1 
LEFT OUTER JOIN table_2 t2 ON t1.date = t2.date 
WHERE t1.date <> t2.date; 
```

你的问题的逻辑应该是相似的。如有必要，只需更改语法。

# python - Python 3.x 中的 PIL ImageTk 等效项

> ID：11068872
> 
> 赞同：10
> 
> 时间：2012-06-17T04:13:33.867
> 
> 标签：python, png, tkinter, python-imaging-library

我正在使用 Tkinter 开发一个应用程序，该应用程序使用`png`图像文件数据库作为图标。为了在应用程序中使用所述图像，我使用 PIL 打开它们`Image.open`，通过函数运行它`ImageTk.PhotoImage`，然后将其传递给小部件构造函数。

问题是，我正在尝试将我的整个项目移植到 Python 3.x，并且由于 PIL 缺乏对 Python 3 的支持，我不知道如何将图标加载到应用程序中。

如果有人知道一个解决方案，可以让我使用这些图标而不必将它们全部转换为`.gif`位图，我将非常感激！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-08-03T06:13:58.450

PNG 文件，即使具有透明度，也可以在 Linux 上的 python 3.4.1 中的 tkinter 和 ttk 中正确显示，即使只[记录](https://docs.python.org/3/library/tkinter.html)了 GIF 和 PPM/PGM 支持。

> ![具有透明度和 Alpha 的示例 PNG 文件](../Images/0ea7c8412d2ffadeb37ccc333ae97c76.png)

上面的 PNG 图像包含透明度。

```
from tkinter import *          

root = Tk()                    

photo = PhotoImage(file="example.png")
photo_label = Label(image=photo)
photo_label.grid()             
photo_label.image = photo      

text = Label(text="Text") # included to show background color
text.grid()    

root.mainloop() 
```

上面的代码以透明度正确渲染图像，如下所示：

> [![Python 3.4.1 tkinter 中的 PNG 测试图像和文本](../Images/285eb249aaeb43f367158b43a73ec5c4.png)](https://www.flickr.com/photos/qubodup/14628626739 "Python 3.4.1 tkinter 中的 PNG 测试图像，带有 Iwan Gabovitch 的文字，在 Flickr 上")

请注意，屏幕截图是在没有窗口装饰和深色 GUI 配色方案的设置上制作的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-04T20:24:46.537

您可以在 Python 3.3 或更早版本中使用[Pillow](https://github.com/python-pillow/Pillow)处理图像。`png`

取自[这里](https://pypi.python.org/pypi/Pillow/2.0.0)：

> Pillow >= 2.0.0 支持 Python 版本：2.6、2.7、3.2、3.3。Pillow < 2.0.0 支持 Python 版本：2.4、2.5、2.6、2.7。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-10-14T03:25:56.653

**该示例在画布上显示图像。**

```
from PIL import Image, ImageTk
# From the PIL (Python Imaging Library) module, we import the Image and ImageTk modules.

self.img = Image.open("tatras.jpg")
self.tatras = ImageTk.PhotoImage(self.img)

# Tkinter does not support JPG images internally. As a workaround, we
# use the Image and ImageTk modules.

canvas = Canvas(self, width=self.img.size[0]+20,  height=self.img.size[1]+20)

# We create the Canvas widget. It takes the size of the image into account. It is 20px wider and 20px higher than the actual image size.

canvas.create_image(10, 10, anchor=NW, image=self.tatras) 
```

# java - 在 Objective C 中调用方法的语法？

> ID：11068874
> 
> 赞同：6
> 
> 时间：2012-06-17T04:14:40.137
> 
> 标签：java, iphone, objective-c, ios

我来自 Java 世界，所以对我来说就是这样`object.foo()`，但是在 Objective C 中，对象消息传递是调用方法的唯一方法吗？

```
[object foo]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T05:56:13.577

您可以使用 KVC：

```
 [label setValue:@"Some text" forKey:@"text"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T04:19:55.160

是的。您可以使用点语法来获取或设置 Objective C 属性。因此，例如在 UILabel *label 上设置文本可以通过`[label setText:@"some text"];`或者`label.text = @"some text";`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-17T04:21:37.977

首先想到的是使用@property 和点符号。一个名为 'foo' 的 @property 类允许你这样做：

```
anInstance.foo = @"bar"; 
```

在编译时字面上*翻译为*

```
[anInstance setFoo:@"bar"]; 
```

（类似于“吸气剂”）

其他方式更高级，比如使用NSObject的performSelector:方法，或者其他系统比如NSInvocation等。再深入一点，在运行时有调用方法的方法，用c函数（所有这些语法最终归结为调用无论如何都是c函数）；但我敢肯定这不是你所追求的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-17T05:13:47.003

为了迂腐，为什么不低级：

```
objc_msgSend(object, sel_getUid("foo"), errVar); 
```

# javascript - 使用 javascript 运行本地服务器

> ID：11068882
> 
> 赞同：4
> 
> 时间：2012-06-17T04:18:36.937
> 
> 标签：javascript, html, node.js, localhost, arduino

我想创建一个带有 HTML 界面的简单 Javascript 程序。该程序将在 Chrome 中运行。我还将使用 node-serialport 和 Node.js 与 Arduino 通信。我已经完成了一个 HTML 和 JavaScript 文件，但我不知道如何运行它，或者如何实现 Node.js 或 node-serialport，也不知道如何“启动”服务器。最初它*只会*在本地运行，但最终它可能会成为真正的服务器。现在，我如何在本地运行所有这些？

编辑：我正在使用来自[http://brandontilley.com/2012/03/02/controlling-an-arduino-from-nodejs.html](http://brandontilley.com/2012/03/02/controlling-an-arduino-from-nodejs.html)的示例代码，并将 CoffeeScript 转换为 JavaScript。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T08:36:18.077

卢卡斯，很高兴你发现这篇博文很有用；也许我应该将这些信息添加到其中。

**将草图放入您的 Arduino**

只需启动 Arduino 应用程序，粘贴草图代码，然后点击“上传”。应该是您在这里需要做的所有事情。

**启动 Node.js 服务器**

你在什么操作系统上使用这个？了解如何通过节点串行端口访问您的 Arduino 微控制器将因您的操作系统而异。

在源代码中，将字符串值更改`port`为您的 Arduino 设备（一旦您知道）。此外，该脚本依赖于 Express 和（当然）来自 NPM 的 node-serialport，因此`npm install express serialport`请在保存 JavaScript 文件的目录中运行。最后，运行文件`node server.js`（假设`server.js`是你的文件名）。然后就可以访问服务器了`http://localhost:8080`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T07:49:23.190

您可以使用 node.js 通过[Express](http://expressjs.com/)提供 HTML 。如果您的主要 Javascript 文件名为 server.js，则通过键入以下内容运行它：

> 节点服务器.js

在命令行。

# java - 简单数据类型的 TableView (FX 2)

> ID：11068884
> 
> 赞同：0
> 
> 时间：2012-06-17T04:18:53.320
> 
> 标签：java, tableview, javafx, javafx-2

我想制作一个 tableView 而不像[官方教程](http://docs.oracle.com/javafx/2/ui_controls/table-view.htm)那样制作一个对象 Row 我只是希望它反映一个简单的二维数组，如 double[][] ，如果可能的话，它可以是可编辑的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T15:15:24.477

构建一个包含双精度值的自定义控件，呈现它，提供编辑模式（通过单击等操作），并将这些自定义控件放置在某些布局（GridPane、TilePane、FlowPane）中应该更适合您的情况。

# c++ - “set_unexpected”在 VC2010 中不起作用？

> ID：11068888
> 
> 赞同：2
> 
> 时间：2012-06-17T04:20:18.823
> 
> 标签：c++, visual-studio-2010, visual-c++, exception, exception-specification

我正在使用 VC2010，并编写以下代码来测试“set_unexpected”功能。

```
#include <iostream>
#include <exception>

void my_unexpected_handler()
{
    std::cout << "unexpected handler" << std::endl;
}

int _tmain(int argc, _TCHAR* argv[])
{
    set_unexpected(my_unexpected_handler);

    throw 1;

    return 0;
} 
```

但是，从未调用过“my_unexpected_handler”（该字符串未打印到控制台，我试图在 my_unexpected_handler 中设置断点，但没有遇到）。

我的代码有什么问题？

谢谢

* * *

抱歉，我误解了意外异常。但是，即使我将代码更改为以下

```
#include <iostream>
#include <exception>

void my_unexpected_handler()
{
    std::cout << "unexpected handler" << std::endl;
}

void func() throw(int)
{
    throw 'h';
}

int _tmain(int argc, _TCHAR* argv[])
{
    std::set_unexpected(my_unexpected_handler);

    func();

    return 0;
} 
```

还是不行？也就是说，没有调用“my_unexpected_handler”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T07:47:28.347

你很可能没有做错任何事。您正在使用 Visual Studio 2010，并且该编译器不支持异常规范。好吧，它会使用它们对代码进行语法检查，但不会在运行时检查异常类型。

见[http://msdn.microsoft.com/en-us/library/wfa0edys(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/wfa0edys%28v=vs.100%29.aspx)

这通常不被认为是一个问题，因为异常规范通常被认为没有用，实际上在当时的 c++11 标准中已被弃用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T04:35:26.853

由于抛出异常的函数没有`throw`规范，因此异常是预期的。从逻辑上讲，意外异常处理程序只处理[意外异常](http://www.cplusplus.com/reference/std/exception/set_unexpected/)。没有什么能让这个异常出乎意料。

# http - OAuth 2.0 授权标头

> ID：11068892
> 
> 赞同：100
> 
> 时间：2012-06-17T04:20:52.907
> 
> 标签：http, oauth-2.0

我想开发一个封装 OAuth 2.0 功能的 SDK。我检查了 OAuth 1.0 和 2.0 之间的差异，我对授权标头（[1.0](https://www.rfc-editor.org/rfc/rfc5849#section-3.5.1)和 [2.0](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-27#page-8)）有些混淆，OAuth 1.0 协议参数可以使用 HTTP“授权”标头传输，但我在当前找不到此描述OAuth 2.0 草案。

OAuth 2.0 是否支持授权标头？

在 OAuth 1.0 中，您的标头看起来像：

```
Authorization: OAuth realm="Example",
    oauth_consumer_key="0685bd9184jfhq22",
    oauth_token="ad180jjd733klru7",
    oauth_signature_method="HMAC-SHA1",
    oauth_signature="wOJIO9A2W5mFwDgiDvZbTSMK%2FPY%3D",
    oauth_timestamp="137131200",
    oauth_nonce="4572616e48616d6d65724c61686176",
    oauth_version="1.0" 
```

* * *

## 回答 #1

> 赞同：218
> 
> 时间：2013-09-11T23:18:27.823

对于那些正在寻找如何在标头中传递 OAuth2 授权（访问令牌）的示例（而不是使用请求或正文参数）的人，这是如何完成的：

```
Authorization: Bearer 0b79bab50daca910b000d4f1a2b675d604257e42 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2012-06-17T22:31:53.783

您仍然可以将 Authorization 标头与 OAuth 2.0 一起使用。在 Authorization 标头中指定了一个 Bearer 类型，用于与 OAuth 不记名令牌一起使用（这意味着客户端应用程序只需提供（“bear”）令牌）。标头的值是客户端从授权服务器接收到的访问令牌。

它记录在本规范中：[https ://www.rfc-editor.org/rfc/rfc6750#section-2.1](https://www.rfc-editor.org/rfc/rfc6750#section-2.1)

例如：

```
 GET /resource HTTP/1.1
   Host: server.example.com
   Authorization: Bearer mF_9.B5f-4.1JqM 
```

其中**mF_9.B5f-4.1JqM**是您的 OAuth 访问令牌。

# java - 如何在执行此 f:event 侦听器之前设置 bean 属性

> ID：11068893
> 
> 赞同：1
> 
> 时间：2012-06-17T04:20:59.540
> 
> 标签：java, jsf

如何在执行此 f:event 侦听器之前从 jsf 页面设置 bean 属性：

```
 <f:event type="preRenderComponent" listener="bean.method}"/> 
```

我尝试了下面的代码，但它没有将值设置为 bean 属性。

```
 <f:event type="preRenderComponent" listener="bean.method}">
        <f:setPropertyActionListener target="#{bean.howMany}" value="2"/>
    </f:event> 
```

* * *

JSF2.1.6 与 PF 3.3

* * *

## 编辑

下面的代码有什么问题吗？（这行得通！但我只是想确认这是否有任何问题！？）

> ```
> <f:event type="preRenderComponent" listener="#{bean.setHowMany(15)}"/> 
> <f:event type="preRenderComponent" listener="#{bean.method}"/> 
> ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T05:37:28.697

尝试

```
<f:event type="preRenderComponent" listener="#{bean.method('2')}"/> 
```

如果那行不通，试试

```
<f:event type="preRenderComponent" listener="#{bean.method}">
    <f:attribute name="howMany" value="2" />
</f:event> 
```

并在您托管的 bean 中添加以下内容

```
public void method(ComponentSystemEvent event) {
    String howMany = (String) event.getComponent().getAttributes().get("howMany");
} 
```

我认为你最好避免两个后续`<f:event>`调用，当你真的不需要它们时，虽然我想我在某处看到声明的顺序将是执行的顺序，它仍然可能在不同的 JSF 实现之间有所不同，你永远不可能是 100 %确定你可以指望它......

所以在这种情况下，INMO 只使用一个会更好

```
<f:event type="preRenderComponent" listener="#{bean.method(15)}"/> 
```

# windows - 使用 cygwin 的 ssh 连接

> ID：11068895
> 
> 赞同：1
> 
> 时间：2012-06-17T04:21:19.433
> 
> 标签：windows, ssh, cygwin

我正在尝试使用 cygwin+ssh 连接我的远程 linux 服务器，但身份验证失败，没有明显的原因。我已经成功地设置了另一个到 github 的连接，并且我遵循了相同的过程，这就是我在这里停下来的原因

```
$ ssh -v finxxx@xxx.79.xxx.29
OpenSSH_6.0p1, OpenSSL 1.0.1c 10 May 2012
debug1: Connecting to xxx.79.xxx.29 [xxx.79.xxx.29] port 22.
debug1: Connection established.
debug1: identity file /home/xxxtta/.ssh/id_rsa type -1
debug1: identity file /home/xxxtta/.ssh/id_rsa-cert type -1
debug1: identity file /home/xxxtta/.ssh/id_dsa type 2
debug1: identity file /home/xxxtta/.ssh/id_dsa-cert type -1
debug1: identity file /home/xxxtta/.ssh/id_ecdsa type -1
debug1: identity file /home/xxxtta/.ssh/id_ecdsa-cert type -1
debug1: Remote protocol version 2.0, remote software version OpenSSH_5.3p1 Debian-3ubuntu7
debug1: match: OpenSSH_5.3p1 Debian-3ubuntu7 pat OpenSSH_5*
debug1: Enabling compatibility mode for protocol 2.0
debug1: Local version string SSH-2.0-OpenSSH_6.0
debug1: SSH2_MSG_KEXINIT sent
debug1: SSH2_MSG_KEXINIT received
debug1: kex: server->client aes128-ctr hmac-md5 none
debug1: kex: client->server aes128-ctr hmac-md5 none
debug1: SSH2_MSG_KEX_DH_GEX_REQUEST(1024<1024<8192) sent
debug1: expecting SSH2_MSG_KEX_DH_GEX_GROUP
debug1: SSH2_MSG_KEX_DH_GEX_INIT sent
debug1: expecting SSH2_MSG_KEX_DH_GEX_REPLY
debug1: Server host key: RSA c7:b2:f1:f9:76:cd:24:5a:80:91:4b:e5:ac:7e:e1:ee
debug1: Host 'xxx.79.xxx.29' is known and matches the RSA host key.
debug1: Found key in /home/xxxtta/.ssh/known_hosts:1
debug1: ssh_rsa_verify: signature correct
debug1: SSH2_MSG_NEWKEYS sent
debug1: expecting SSH2_MSG_NEWKEYS
debug1: SSH2_MSG_NEWKEYS received
debug1: Roaming not allowed by server
debug1: SSH2_MSG_SERVICE_REQUEST sent
debug1: SSH2_MSG_SERVICE_ACCEPT received
debug1: Authentications that can continue: publickey
debug1: Next authentication method: publickey
debug1: Trying private key: /home/xxxtta/.ssh/id_rsa
debug1: Offering DSA public key: /home/xxxtta/.ssh/id_dsa
debug1: Authentications that can continue: publickey
debug1: Trying private key: /home/xxxtta/.ssh/id_ecdsa
debug1: No more authentication methods to try.
Permission denied (publickey). 
```

我已经做了标准的东西，但我无法解决问题。这些是我用来生成私钥/公钥的命令。然后我将公钥复制到服务器

```
$ ssh-keygen -t dsa
Generating public/private dsa key pair.
Enter file in which to save the key (/home/xxxtta/.ssh/id_dsa):
Enter passphrase (empty for no passphrase):
Enter same passphrase again:
Your identification has been saved in /home/xxxtta/.ssh/id_dsa.
Your public key has been saved in /home/xxxtta/.ssh/id_dsa.pub 
```

谢谢您的帮助

**编辑：** 我使用 MINGW 进行了相同的程序并且它有效（我能够连接）。我的系统中的 cygwin 肯定有问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-07-30T07:01:26.253

问题可能出在用户名上。如果您远程登录，用户名区分大小写。您必须完全按照 Windows 中的定义编写用户名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-15T00:15:05.430

您可以尝试使用 -vvv 而不是 -v 来增加详细程度。
此外，请检查文件权限是否设置正确。请参阅[将公钥添加到 ~/.ssh/authorized_keys 不会让我自动登录](https://stackoverflow.com/questions/6377009/adding-public-key-to-ssh-authorized-keys-does-not-log-me-in-automatically)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T04:50:06.913

将 id_dsa.pub 复制到您的远程服务器。

```
# scp .ssh/id_dsa.pub dude@remotemachine 
```

在远程服务器上：

```
# cat id_dsa.pub >> ~/.ssh/authorized_keys 
```

# apache-flex - 用户上传内容

> ID：11068900
> 
> 赞同：-1
> 
> 时间：2012-06-17T04:22:51.813
> 
> 标签：apache-flex, flex4, flex4.5, flex-mobile

我想创建一个移动应用程序（使用 Flex），让用户将一些用户生成的内容（例如文本、图片）上传到我的网站，并且还能够在网站上显示/查看它。

我在后端（网络编程、网站数据库、云）方面没有太多工作。

做到这一点的最佳方法是什么，或者是否有任何现成的构建解决方案？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T15:44:24.767

查看用户上传的 httpService 并使用 POST 或 GET 参数将其绑定到后端 Web 服务。就个人而言，我推荐 PHP，但任何支持 Web 的服务都可以。然后，绑定该服务以将您的图像存储在您的网络服务器或数据库中。反转该过程以将其取出。这一切都可以在 Flex 中完成吗？不。你能轻松地将它与网络服务绑定吗？是的。祝你好运。

# ruby - Resque 与 Sidekiq

> ID：11068901
> 
> 赞同：14
> 
> 时间：2012-06-17T04:23:04.897
> 
> 标签：ruby, resque, job-queue, sidekiq

我正在和一个朋友一起做一个项目，我们一直在使用 Resque 来处理来自我们的 rails 应用程序中数据输入的各种命令。

我们一直在搞乱使用 Sidekiq 的想法，因为它是多线程的，不会占用内存，也不需要为每个工作人员启动 ruby​​ 环境。

我希望实时收集使用 Resque 和 Sidekiq 的人们的一些想法和意见，并解释它们之间的差异。

那么，Sidekiq 对 Resque 的优缺点是什么？

# php - 赞成/反对系统

> ID：11068905
> 
> 赞同：1
> 
> 时间：2012-06-17T04:24:05.020
> 
> 标签：php, mysql

我有以下 PHP 脚本：

```
<?php
$vote_type = $_GET['type'];
$book = $_GET['book'];
$id = $_GET['id'];

include 'pagehead.php';

$tracker_table = $book.'VoteTrack';
$username = $_SESSION['username'];

session_start();
if ($_SESSION['username'] == null) {
echo 'You must be logged in to vote';
echo '<br>';
echo '<a href="lesson.php?book='.$book.'&id='.$id.'">';
echo 'Return to lesson';
echo '</a>';
die();
}

include 'mysqlserver.php';
$con = mysql_connect($mysql_host, $mysql_username, $mysql_password);
if (!$con){
die ('Failed to connect to the database');
}

mysql_select_db("a6595899_s", $con);

$data_query = "SELECT * FROM $book WHERE id=$id";
$lesson_data = mysql_query($data_query);
$lesson_array = mysql_fetch_assoc($lesson_data);

$vote_cop_query = "SELECT * FROM $tracker_table WHERE user='$username' AND id=$id";
$vote_cop_data = mysql_query($vote_cop_query);
$vote_cop = mysql_fetch_assoc($vote_cop_data);

if (mysql_num_rows($vote_cop_data) != 0 && $vote_type == 'up' && $vote_cop['has'] == 1) {
echo 'You have already upvoted this lesson.';
echo '<br>';
echo '<a href="lesson.php?book='.$book.'&id='.$id.'">';
echo 'Return to lesson';
echo '</a>';
die();
} elseif (mysql_num_rows($vote_cop_data) != 0 && $vote_type == 'down' && $vote_cop['has'] == 2) {
echo 'You have already downvoted this lesson.';
echo '<br>';
echo '<a href="lesson.php?book='.$book.'&id='.$id.'">';
echo 'Return to lesson';
echo '</a>';
die();
}

$vote_count = $lesson_array['votes'];
if ($vote_type == 'up') {
$vote_count++;
$has_type = 1;
} elseif ($vote_type == 'down') {
$vote_count--;
$has_type = 2;
} else {
die('Vote type not specified.');
}

$new_or = mysql_num_rows($vote_cop_data);

if ($new_or == 0) {
$track_query = "INSERT INTO $tracker_table (user, id, has)
VALUES ('$username', $id, $has_type)";
} else {
$track_query = "UPDATE $tracker_table SET has=$has_type WHERE user='$username' AND id=$id";
}
mysql_query($track_query);

//actually cast vote..
$update_query = "UPDATE $book SET votes=$vote_count WHERE id=$id";
mysql_query($update_query);

echo 'Your vote has been submitted!';
echo '<br>';
echo '<a href="lesson.php?book='.$book.'&id='.$id.'">';
echo 'Return to lesson';
echo'</a>';

?> 
```

这是一个非常简单的投票赞成/反对票系统。不幸的是，它在某些情况下会崩溃。假设我正在阅读我认为很好的课程，所以我投了赞成票。后来，我意识到这堂课实际上很糟糕，所以我投了反对票。在我第一次投票之后，这节课有了一点。在我投反对票后，它又变成了 0。逻辑表明我应该能够再次否决这节课，给它-1分。我的代码不允许这样做，因为我的脚本只是说不允许连续 2 次执行相同的操作。我用什么数学来解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-17T04:28:29.317

问题出在您在对他们自己的赞成票投反对票后更新用户的活动。

```
$track_query = "UPDATE $tracker_table SET has=$has_type WHERE user='$username' AND id=$id"; 
```

你应该做的是从表中删除记录而不是更新它，然后继续修改你已经存在的分数。这样，您进行的下一次投票将是您完成的“第一次”投票。

或者，您可以使用第三个 vote_cop 类型，称为“nullify”或“revoke”或其他东西，然后相应地修改 vote cop。

请参阅下面的我的建议：

```
$hasVotedBefore = mysql_num_rows($vote_cop_data) != 0;

if ($hasVotedBefore) {

  switch ($vote_cop_data['has']) {
  case 0:
    $vote_cop_type = 'revoked'; // Not really neccessary to do this, but just here for show.
    break;    
  case 1:
    $vote_cop_type = 'up';
    break;
  case 2:
    $vote_cop_type = 'down';
    break;    
  default:
    break;

  if ($vote_type == $vote_cop_type) { // We're here because we voted before and our new vote is the same as the old one.

    if ($vote_type == 'up') {

      echo 'You have already upvoted this lesson.';
      echo '<br>';
      echo '<a href="lesson.php?book='.$book.'&id='.$id.'">';
      echo 'Return to lesson';
      echo '</a>';
      die();

    } elseif ($vote_type == 'down') {

      echo 'You have already downvoted this lesson.';
      echo '<br>';
      echo '<a href="lesson.php?book='.$book.'&id='.$id.'">';
      echo 'Return to lesson';
      echo '</a>';
      die(); 
    }

  } else { // Were here because we've voted before, and our new vote is the opposite of the old vote.

     // Update vote_cop row in the database so the 'has' column is 0 (value of a revoked vote)
     // This way, for future votes, we know the user has voted before, but revoked their vote.
     $track_query = "UPDATE $tracker_table SET has=0 WHERE user='$username' AND id=$id";
     mysql_query($track_query);
  }
} else { // We're here because we never voted before.

  $track_query = "INSERT INTO $tracker_table (user, id, has) VALUES ('$username', $id, $vote_type)";
  mysql_query($track_query);
}

// TODO: actually cast vote.. 
```

# javascript - HTML5 History.pushState 破坏包含百分比编码的非 Ascii (Unicode) 字符的 URL

> ID：11068907
> 
> 赞同：12
> 
> 时间：2012-06-17T04:24:46.477
> 
> 标签：javascript, html, urlencode, browser-history, history.js

在 OSS Web 应用程序中，我们有执行一些 Ajax 更新的 JS 代码（使用 jQuery，不相关）。页面更新后，调用 html5 历史接口`History.pushState`，代码如下：

```
var updateHistory = function(url) {
    var context = { state:1, rand:Math.random() };
    /* -----> bedfore the problem call <------- */
    History.pushState( context, "Questions", url );
    /* -----> after the problem call <------- */
    setTimeout(function (){
        /* HACK: For some weird reson, sometimes something overrides the above pushState so we re-aplly it
                 This might be caused by some other JS plugin.
                 The delay of 10msec allows the other plugin to override the URL.
        */
        History.replaceState( context, "Questions", url );
    }, 10);
}; 
```

[**请注意**：为上下文提供了完整的代码段，HACK 部分不是这个问题的问题]

该应用程序是 i18n'ed 并且在 URL 中使用 URL 编码的 Unicode 段，因此就在上述代码中**标记的问题调用之前，URL 参数包含（在 Firebug 中检查）：**

```
"/%D8%A7%D9%84%D8%A3%D8%B3%D8%A6%D9%84%D8%A9/scope:all/sort:activity-desc/page:1/" 
```

编码段是 utf-8 百分比编码。浏览器窗口中的 URL 是：（只是为了完整性，并不重要）

```
http://<base-url>/%D8%A7%D9%84%D8%A3%D8%B3%D8%A6%D9%84%D8%A9/ 
```

**调用后**，浏览器窗口中显示的 URL 变为：

```
http://<base-url>/%C3%98%C2%A7%C3%99%C2%84%C3%98%C2%A3%C3%98%C2%B3%C3%98%C2%A6%C3%99%C2%84%C3%98%C2%A9/scope:all/sort:activity-desc/page:1/ 
```

URL 编码段只是 mojibake，在某种程度上使用错误编码的结果。正确的 URL 应该是：

```
http://<base-url>/%D8%A7%D9%84%D8%A3%D8%B3%D8%A6%D9%84%D8%A9/scope:all/sort:activity-desc/page:1/ 
```

此行为已在 FF 和 Chrome 上进行了测试。

历史接口[规范](http://www.whatwg.org/specs/web-apps/current-work/multipage/history.html#dom-history-pushstate)没有提到任何关于编码 URL 的内容，但我假设 URL 形成的默认标准（utf-8 和百分比编码等）在使用接口的函数调用中的 URL 时将适用。

关于这里发生的事情的任何想法。

**编辑**：

我没有注意 History 中的大写 H - 此代码实际上使用[History.js](https://github.com/balupton/History.js)包装器作为历史接口。我替换为直接调用`history.pushState`（注意小写的 h）而不通过包装器，据我所知，代码按预期工作。原始代码的问题仍然存在 - 所以 History.js 库似乎存在问题。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-16T11:57:07.970

## 更新

正如[Doug S](https://stackoverflow.com/users/1145177/doug-s)在下面的评论中所解释的那样，**最新版本的 History.js 包含对此行为的修复。**他还发现我的解决方案在需要哈希回退的浏览器（例如 IE 9 及以下版本）中使用时会导致双重编码，因此**我建议不要使用下面详述的修复程序，而只需[下载最新版本](https://github.com/browserstate/history.js/archive/master.zip)**即可。

我在下面保留了我的原始答案，因为它确实更详细地解释了正在发生的事情。

* * *

巴塞尔找到了某种解决方案，但对于幕后发生的事情仍然有些困惑。该答案详细介绍了该问题并提出了更好的解决方案。（如果需要，您可以直接跳到修复程序。）

## 问题

首先，打开浏览器的 JS 控制台并运行：

```
window.encodeURI(window.unescape('%D8%A7%D9%84%D8%A3%D8%B3%D8%A6%D9%84%D8%A9')) 
```

是不是很眼熟？它应该——这就是你的 URL 被破坏的内容。问题在于 的实现`History.unescapeString`，特别是这一行：

```
tmp = window.unescape(result); 
```

`window.unescape`是一个[DOM Level 0](http://www.quirksmode.org/js/dom0.html)函数——也就是说，从 Netscape 2 的古老时代开始的非标准化遗物。它使用[RFC 2396](http://www.apps.ietf.org/rfc/rfc2396.html#sec-2)中定义的转义规则，根据未保留范围之外的字符（字母数字和一小部分标点符号）符号）被编码为八位字节。

这适用于 US-ASCII 范围，但并非 UTF-8 中的所有（实际上是绝大多数）字符都可以用单个字节表示。由于 URI 没有内置的方式来表示正在使用的字符集，因此`window.unescape`只需假设每个字符都映射到单个八位字节并愉快地破坏任何没有的字符。

在此示例中，您的 URL 中的第一个字母是[阿拉伯字母 alef (ا)](http://www.fileformat.info/info/unicode/char/0627/index.htm)，由两个字节表示：`0xD8 0xA7`。`window.unescape`将它们解释为两个单独的字符：[`0x00 0xD8`(Ø- 大写 O 带笔划)](http://www.fileformat.info/info/unicode/char/00d8/index.htm)和[`0x00 0xA7`(§- 节符号)](http://www.fileformat.info/info/unicode/char/00a7/index.htm)。

这是 History.js 的一个[已知问题](https://github.com/browserstate/history.js/issues/245)。

## 修复

正如提问者在上面提到的，可以通过使用 History API 的本机实现而不是 History.js 包装器来回避这个问题，即，`*h*istory.pushState`而不是`*H*istory.pushState`.

这适用于支持 History API 的浏览器，但失去了为不支持的浏览器提供 polyfill 的好处。幸运的是，有一个更好的解决方法。打开您引用的 History.js 源代码并找到这一行（在我的副本中约为 1059）：

```
tmp = window.unescape(result); 
```

将其替换为：

```
tmp = window.unescape(encodeURIComponent(result)); 
```

或者，如果您使用的是压缩源，请替换`a.unescape(c)`为`a.unescape(encodeURIComponent(c))`.

为了测试这种变化，我在本地 Web 服务器上以阿拉伯​​语命名的目录中运行 History.js HTML5 jQuery 测试套件。在进行更改之前，测试 14 失败；更改后，所有测试都通过了。

## 信用

尽管我独立地找到了问题和解决方案，但[Damien Antipa](http://damien.antipa.at/)值得称赞的是首先找到它并[使用 fix 提出拉取请求](https://github.com/browserstate/history.js/pull/251)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-09T09:05:55.057

在以下情况下，我仍然可以重现此情况：

```
History.pushState(null, null, "?" + some_Unicode_String_Or_A_String_With_Whitespace);
document.location.hash += "&someStuff"; 
```

在这种情况下，_suid 参数和 &someStuff 也被删除。如果字符串不是 unicode 或没有空格（所以没有 % 字符） - 这不会发生。

这种解决方法对我有用：

```
History.pushState(null, null, "?" + some_Unicode_String_Or_A_String_With_Whitespace + "&someStuff"); 
```

# php - 如何在 atk 4.2.1 中为网格中的偶数行分配不同的颜色

> ID：11068915
> 
> 赞同：0
> 
> 时间：2012-06-17T04:27:05.280
> 
> 标签：php, user-interface, frameworks, atk4

甚至 css 类似乎在 4.2.1 中无法为偶数行分配不同的颜色，有没有新方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T08:05:33.680

`tr:even`是一个 CSS 属性，你可以使用它。如果您需要 HTML 支持，您可以提交具有该功能的补丁。

# javascript - 如何将 CSV 数据转换为 使用 Javascript 进入 HTML 表？

> ID：11068916
> 
> 赞同：0
> 
> 时间：2012-06-17T04:27:29.190
> 
> 标签：javascript, html, csv, html-table, pre

我有一个 HTML 文件。它具有**预先格式化的文本**，其中包含 CSV 数据。

```
<pre>1,2,3,4
5,6,7,8
9,0,1,2
3,4,5,6
</pre> 
```

如何提取这些数据并使用 Javascript 将其转换为 HTML 表格？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T04:51:32.850

如果您知道数据将采用您提供的确切格式，那么像这样简单的事情就可以了：

**标记**：

```
<pre id="data">1,2,3,4
5,6,7,8
9,0,1,2
3,4,5,6</pre>
<div id="table"></div> 
```

**JavaScript**：

```
var table = '';
var rows = new Array();

rows = document.getElementById('data').innerHTML.split('\n');
table += '<table>'

for(var i = 0; i < rows.length; i++) {
    var columns = rows[i].split(',');
    table += '<tr>';

    for(var j = 0; j < columns.length; j++) {
        table += '<td>' + columns[j] + '</td>';
    }

    table += '</tr>';
}

table += '</table>';
document.getElementById('table').innerHTML = table; 
```

**[演示](http://jsfiddle.net/SxAHe/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-17T04:32:25.963

使用[此答案](https://stackoverflow.com/a/1293163/377628)中描述的功能。如果你给它 CSV 数据，它会返回一个数组。所以给定数据：

```
<pre id="CSV_DATA">1,2,3,4
5,6,7,8
9,0,1,2
3,4,5,6
</pre> 
```

您可以将 CSV 转换为 Javascript 字符串：

```
var csv_data = document.getElementById("CSV_DATA").innerHTML; 
```

然后使用该函数`CSVToArray`获取数据数组：

```
var array_data = CSVToArray(csv_data, ","); 
```

然后制作一个 HTML 表格：

```
var table=document.createElement('table');
table.border='1';
document.body.appendChild(table);
for(var i=0; i<array_data.length; i++){
    var line = array_data[i];
    var tr=document.createElement('tr');
    for(var j=0; j<line.length; j++){
        var td=document.createElement('td');
        td.innerHTML = line[j];
        tr.appendChild(td);
        table.appendChild(tr);
    }
} 
```

我没有测试过这段代码。请查看并制定详细信息。但它应该做的是遍历由返回的数组并将该数组的`CSVToArray`每个元素添加到表行，然后将每个生成的行添加到表中。该表格已添加到文档的正文中，但您可以随意添加它。

这[也是我的一个演示](http://jsfiddle.net/E52gj/)。

# ios - 从 Uipopovercontroller 列表视图内容调用多个视图

> ID：11068917
> 
> 赞同：0
> 
> 时间：2012-06-17T04:27:34.500
> 
> 标签：ios, uiview, uipopovercontroller

当我以最有效的方式点击弹出列表视图中的每一行时，如何调用单个视图控制器？这意味着，我不必重新编码以在每个单独的视图控制器中构建 Pop Over List View 组件，它们可以像导航工具一样共享它。

**我建造了什么**

我在主视图控制器上构建了弹出视图控制器列表。这是执行 appDidFinishLaunching 时加载的第一个视图。因此，当我们运行应用程序时，我们会得到：

弹出列表视图的屏幕截图链接：http: [//s14.postimage.org/63k567vtd/image.png](http://s14.postimage.org/63k567vtd/image.png)

对于上面 Pop Over 列表中的每一行，我有一个方法可以在其中输入代码： 1\. 确定选择了哪一行 2\. 根据选择的行，执行任何操作，例如 NSLog 和东西 3\. 所有这些代码位于主视图控制器中

**要求**

我正在构建一个演示应用程序，因此目前所有数据都是虚拟数据。

1.  当点击弹出列表中的每一行时，我需要调用单个视图控制器。
2.  每个视图控制器都有自己的数据集、自己的 UI 对象集、自己的 XIB 文件。
3.  因此，如果用户点击应用程序，它必须调出应用程序 XIB 文件及其功能，然后从此处进行任何导航。如果应用程序 xib 有一个启动另一个视图的按钮，那么这个功能也应该到位。
4.  但是，它们都必须具有相同的顶部导航栏和弹出列表按钮，因此用户可以点击该按钮并随时在应用程序中查看弹出列表。

请分享你的看法。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T05:47:41.773

我建议查看`UISplitViewController`. 它是 Apple 构建的一个组件，用于管理您正在尝试完成的任务。本质上，您使用 2 个视图控制器设置它；第一个（称为“主人”）将是您的表格视图。第二个（称为“细节”）将是被切换出来的视图控制器。

一旦您对其进行了一些探索并且对术语感到满意，以下是一般建议：

在主表视图控制器的`didSelectRowAtIndexPath:`方法中，实例化适当的视图控制器（基于 indexPath），并将其设置为详细视图控制器，如下所示：

```
- (void)tableView:tableView didSelectRowAtIndexPath:indexPath {
    UIViewController *newDetailVC = // make and configure a new VC based on indexPath
    self.splitViewController.viewControllers = [NSArray arrayWithObjects: self, newDetailVC, nil]];

} 
```

以下是相应的链接：http: [//developer.apple.com/library/ios/#documentation/UIKit/Reference/UISplitViewController_class/Reference/Reference.html#//apple_ref/occ/cl/UISplitViewController](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UISplitViewController_class/Reference/Reference.html#//apple_ref/occ/cl/UISplitViewController)

以及进一步（后面的部分）：http: [//developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/Introduction/Introduction.html%23](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/Introduction/Introduction.html%23)

# android - 涉及 Android Spinner 的 switch 语句存在问题

> ID：11068920
> 
> 赞同：0
> 
> 时间：2012-06-17T04:28:22.613
> 
> 标签：android, spinner, switch-statement

我正在尝试在我的视图上使用 2 个微调器，目前正在实施“OnItemSelected”方法。我设置了一个 switch 语句来区分微调器，但由于某种原因它似乎不起作用。

这是我的代码：

```
 import android.os.Bundle;
    import android.app.Activity;
    import android.content.Intent;
    import android.view.View;
    import android.widget.AdapterView;
    import android.widget.AdapterView.OnItemClickListener;
    import android.widget.ArrayAdapter;
    import android.widget.Button;
    import android.widget.EditText;
    import android.widget.ListView;
    import android.widget.Spinner;
    import android.widget.TextView;
    import android.widget.Toast;
    import java.util.List;
    import java.util.ArrayList;
    import android.widget.AdapterView.OnItemSelectedListener;
    /**
     * This is the activity for feature 1 in the dashboard application.
     * It displays some text and provides a way to get back to the home activity.
     *
     */

    public class F1Activity extends DashboardActivity implements OnItemSelectedListener
    {

    /**
     * onCreate
     *
     * Called when the activity is first created. 
     * This is where you should do all of your normal static set up: create views, bind data to lists, etc. 
     * This method also provides you with a Bundle containing the activity's previously frozen state, if there was one.
     * 
     * Always followed by onStart().
     *
     * @param savedInstanceState Bundle
     */

    protected void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView (R.layout.activity_f1);
        setTitleFromActivityLabel (R.id.title_text);

        //declaring variables

        Button submitButton = (Button) findViewById(R.id.button1);
        Button cancelButton = (Button) findViewById(R.id.button2);

        //getting arrays from strings file
        String[] regions = getResources().getStringArray(R.array.regions_array);
        String[] grids = getResources().getStringArray(R.array.grids_array);

        Spinner gridSpinner = (Spinner) findViewById(R.id.gridSpinner);
        Spinner regionSpinner = (Spinner) findViewById(R.id.regionSpinner);

        //creating adapters for both spinners

        ArrayAdapter<String> dataAdapter = 
            new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, grids);
        ArrayAdapter<String> regionAdapter = 
                new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item, regions);

        // drop down layout style with radio button type.

        dataAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        regionAdapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

        // attaching data adapters to spinners
        gridSpinner.setAdapter(dataAdapter);
        regionSpinner.setAdapter(regionAdapter);
        gridSpinner.setOnItemSelectedListener(this);
        regionSpinner.setOnItemSelectedListener(this);

        submitButton.setOnClickListener(new View.OnClickListener() {
               public void onClick(View view){
                   Intent changeAdd = new Intent();
                   setResult(RESULT_OK, changeAdd);

                   EditText nameText = (EditText) findViewById(R.id.nameTextBox);
                   EditText passText = (EditText) findViewById(R.id.passwordTextBox);

                   if(nameText.getText().toString().length() > 0 && 
                           passText.getText().toString().length() > 0) //TAKE CARE OF LISRVIEW/DROPDOWN
                   {
                         Toast.makeText(getApplicationContext(), 
                           "Loading...", Toast.LENGTH_LONG).show();
                            // make an intent to start the virtual world activity..................like in addGridActivity/screen switch!
                            finish();

                   }
                   else
                   {
                       Toast.makeText(getApplicationContext(), "Sorry, you have to complete all the fields", 
                               Toast.LENGTH_SHORT).show();

                   }

               }
        });

        cancelButton.setOnClickListener(new View.OnClickListener() {
               public void onClick(View view){
                   Intent changeAdd = new Intent();
                   setResult(RESULT_OK, changeAdd);
                   // cancelled and went back to home screen

                   finish();

               }
        });

    }

    @Override
    public void onItemSelected(AdapterView<?> parent, View view, int pos, long arg3) {
        // to handle the selection of the gridSpinner or the regionSpinner
        int id = parent.getId();

        switch(id)
        {
        case R.id.gridSpinner:
            Toast.makeText(parent.getContext(), "you selected" +
            parent.getItemAtPosition(pos).toString() + "from the grid spinner", Toast.LENGTH_LONG);
            break;
        case R.id.regionSpinner:
            Toast.makeText(parent.getContext(), "you selected" + 
            parent.getItemAtPosition(pos).toString() + "from the region spinner", Toast.LENGTH_LONG);
            break;
        default:
            break;
        }

    }

    @Override
    public void onNothingSelected(AdapterView<?> arg0) {
        // TODO Auto-generated method stub

    }

} // end class

<code> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T04:49:45.227

替换 `int id = parent.getId();`为 `int id = view.getId();`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T12:01:14.343

你的开关工作正常。它似乎不起作用的原因是因为您显示的代码`Toast`缺少`show()`调用。

代替：

```
 Toast.makeText(parent.getContext(), ..., Toast.LENGTH_LONG); 
```

做这个：

```
 Toast.makeText(parent.getContext(), ..., Toast.LENGTH_LONG).show(); 
```

我自己一直犯同样的错误:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T04:46:14.443

您需要根据视图的 id 而不是视图适配器进行切换。尝试更改`int id = parent.getId();`为`int id = view.getId();`.

# copy - 如何确保 jstree 自定义上下文菜单的以下逻辑正常工作？

> ID：11068921
> 
> 赞同：0
> 
> 时间：2012-06-17T04:28:26.833
> 
> 标签：copy, contextmenu, jstree, paste, cut

我希望它像 Windows 中的 explorer.exe 一样工作，只有当我们剪切或复制了粘贴项目才会出现的元素时。这有时有效，但也许我缺少一些东西。如果有一种改进它的方法总是我很高兴知道你对它的想法。

```
 jQuery.noConflict();

        jQuery(document).ready(function ($) {
        // This is for the context menu to bind with operations on the right clicked node
                function customMenu(node) {
            // The default set of all items

        var control;

            var items = {

                      createItem: { 
                    label: "Create",
                    action: function (node) {   return {createItem: this.create(node) }; }
                },

                        renameItem: { 
                    label: "Rename",
                    action: function (node) {  return {renameItem: this.rename(node) }; }
                },

                    deleteItem: { 
                    label: "Delete",
                    action: function (node) {     return {deleteItem: this.remove(node) }; },
                    "separator_after": true

                },
                        copyItem: { 
                                label: "Copy",
                                action: function (node) {  $(node).addClass("copy");  return {copyItem: this.copy(node)  }; }
                },
                                cutItem: { 
                                label: "Cut",
                                action: function (node) { $(node).addClass("cut");  return {cutItem: this.cut(node)  }; }
                },
                        pasteItem: { 
                                label: "Paste",
                                action: function (node) {  $(node).addClass("paste");    return {pasteItem: this.paste(node) }; }
                }

            };

            // We go over all the selected items as the context menu only takes action on the one that is right clicked
                $.jstree._reference("#{$id_arr[$k]}").get_selected(false, true).each(function(index,element){   

                        if ( $(element).attr("id") != $(node).attr("id") )
                        {
                            // Let's deselect all nodes that are unrelated to the context menu -- selected but are not the one right clicked

                            $("#{$id_arr[$k]}").jstree("deselect_node", '#'+$(element).attr("id") );  
                        }
                    });

            // Let's loop through all elements and try to find if the paste operation was done already      
            $("#{$id_arr[$k]}").find("li").each(function(index,element){        

             if($(node).hasClass("paste") )
             { 
                //We are asumming that the current event is pasted so remove the Paste from the context menu
                 control =0; 
                // and from any node that has the class for cut or copy.. there is no other way as dnd, move and copy, cut are a move operation for jstree
                    if( $(element).hasClass("copy") ) $(element).removeClass("copy");   
                    if ( $(element).hasClass("cut") ) $(element).removeClass("cut");
             }  
           if( ($(element).hasClass("copy") || $(element).hasClass("cut") )  )
           { 
            control =1;
           }

           //we already pasted the node
           if( $(element).hasClass("paste") )
           { 
           $(this).removeClass("paste");
             }

            });

               switch (control)
               {
                case 1:
                                    switch ($(node).attr("rel"))
                                                {

                                                        case "drive":
                                                            delete items.renameItem;
                                                            delete items.deleteItem;
                                                            delete items.cutItem;
                                                            delete items.copyItem;
                                                        break;

                                                }
                    break;

                case 0:
                                                switch ($(node).attr("rel"))
                                                        {

                                                                case "drive":
                                                                    delete items.renameItem;
                                                                    delete items.deleteItem;
                                                                    delete items.cutItem;
                                                                    delete items.copyItem;
                                                                delete items.pasteItem;
                                                                break;

                                                                case "default":
                                                              delete items.pasteItem;
                                                                break;

                                                        }   
                break;

                default:                switch ($(node).attr("rel"))
                                                        {

                                                                case "drive":
                                                                    delete items.renameItem;
                                                                    delete items.deleteItem;
                                                                    delete items.cutItem;
                                                                    delete items.copyItem;
                                                                delete items.pasteItem;
                                                                break;

                                                                case "default":
                                                              delete items.pasteItem;
                                                                break;

                                                        }   

                break;

                    }

            return items;

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T16:52:52.803

显然这样做了，但它可以适用于所有情况吗？如果剪切或粘贴是当前节点，那么我不想在其上显示粘贴选项，而仅在其他节点上显示。希望任何人都可以看一下，或者它可以帮助试图实现无需查看绑定的相同功能：

```
 <div id="$id_arr[$k]" class="jstree_container"></div>
        </div>
        </li>

        <!-- JavaScript neccessary for this tree : {$value} -->
        <script type="text/javascript" >
           jQuery.noConflict();

        jQuery(function ($) {

        // This is for the context menu to bind with operations on the right clicked node
                function customMenu(node) {
            // The default set of all items

        var control;

            var items = {

                      createItem: { 
                    label: "Create",
                    action: function (node) {   return {createItem: this.create(node) }; }
                },

                        renameItem: { 
                    label: "Rename",
                    action: function (node) {  return {renameItem: this.rename(node) }; }
                },

                    deleteItem: { 
                    label: "Delete",
                    action: function (node) {     return {deleteItem: this.remove(node) }; },
                    "separator_after": true

                },
                        copyItem: { 
                                label: "Copy",
                                action: function (node) {  $(node).addClass("copy");  return {copyItem: this.copy(node)  }; }
                },
                                cutItem: { 
                                label: "Cut",
                                action: function (node) { $(node).addClass("cut");  return {cutItem: this.cut(node)  }; }
                },
                        pasteItem: { 
                                label: "Paste",
                                action: function (node) {  $(node).addClass("paste");    return {pasteItem: this.paste(node) }; }
                }

            };

            // We go over all the selected items as the context menu only takes action on the one that is right clicked
                $.jstree._reference("#{$id_arr[$k]}").get_selected(false, true).each(function(index,element)
                {   

                        if ( $(element).attr("id") != $(node).attr("id") )
                        {
                            // Let's deselect all nodes that are unrelated to the context menu -- selected but are not the one right clicked

                            $("#{$id_arr[$k]}").jstree("deselect_node", '#'+$(element).attr("id") );  
                        }
                    });

        //if any previous click has the class for copy or cut
             $("#{$id_arr[$k]}").find("li").each(function(index,element)        
             {  
                        if ($(element) != $(node) )
                    {   
                        if(  $(element).hasClass("copy") || $(element).hasClass("cut") ) control=1;
                    }
                    else if(  $(node).hasClass("cut") || $(node).hasClass("copy"))
                        {
                        control=0;
                        }
            });

            //only remove the class for cut or copy if the current operation is to paste
        if($(node).hasClass("paste") )
        {   
            control=0;   
            // Let's loop through all elements and try to find if the paste operation was done already      
            $("#{$id_arr[$k]}").find("li").each(function(index,element)
            {       
                if( $(element).hasClass("copy") ) $(this).removeClass("copy");  
                    if ( $(element).hasClass("cut") ) $(this).removeClass("cut"); 
                  if ( $(element).hasClass("paste") ) $(this).removeClass("paste");  
                });
        }

               switch (control)
               {
                //Remove the paste item from the context menu
                case 0:
                                switch ($(node).attr("rel"))
                                    {

                                            case "drive":
                                                delete items.renameItem;
                                                delete items.deleteItem;
                                                delete items.cutItem;
                                                delete items.copyItem;
                                            delete items.pasteItem;
                                            break;

                                            case "default":
                                          delete items.pasteItem;
                                            break;

                                    }   
                break;

               //Remove the paste item from the context menu only on the node that has either copy or cut added class
                        case 1:
                        if( $(node).hasClass("cut") || $(node).hasClass("copy") )
                        {
                                                switch ($(node).attr("rel"))
                                                {

                                                                case "drive":
                                                                    delete items.renameItem;
                                                                    delete items.deleteItem;
                                                                    delete items.cutItem;
                                                                    delete items.copyItem;
                                                                delete items.pasteItem;
                                                                break;

                                                                case "default":
                                                              delete items.pasteItem;
                                                                break;

                                                }
                                        }   
                                            else //Re-enable it on the clicked node that does not have the cut or copy class
                                                {
                                    switch ($(node).attr("rel"))
                                                {

                                                        case "drive":
                                                            delete items.renameItem;
                                                            delete items.deleteItem;
                                                            delete items.cutItem;
                                                            delete items.copyItem;
                                                        break;

                                                }       
                                            }   

                    break;

                //initial state don't show the paste option on any node
                default:                switch ($(node).attr("rel"))
                                                        {

                                                                case "drive":
                                                                    delete items.renameItem;
                                                                    delete items.deleteItem;
                                                                    delete items.cutItem;
                                                                    delete items.copyItem;
                                                                    delete items.pasteItem;
                                                                break;

                                                                case "default":
                                                              delete items.pasteItem;
                                                                break;

                                                        }   

                break;

                    }

            return items;

        }

        $("#{$id_arr[$k]}").jstree({

                // List of active plugins used
                "plugins" : [ "themes","json_data", "ui", "crrm" , "hotkeys" , "types" , "dnd", "contextmenu"],  

                "contextmenu" : { "items" : customMenu  , "select_node": true}, 
```

# objective-c - Facebook 邀请请求未送达

> ID：11068931
> 
> 赞同：0
> 
> 时间：2012-06-17T04:30:51.220
> 
> 标签：objective-c, facebook, dialog, apprequests

我在 iOS 应用程序中显示一个对话框，以允许用户选择一些向其发送应用程序邀请的朋友。显示对话框，您可以选择一些朋友并按发送。

成功调用对话框委托方法回调。到目前为止一切顺利，但朋友没有收到任何邀请，是因为该应用仍在开发中吗？

这是我用来显示对话框的代码，是否缺少任何参数？（访问令牌很好，因为该应用程序有效）。

```
// Show the UI Dialog
NSMutableDictionary *params = [NSMutableDictionary dictionaryWithObjectsAndKeys:
   kFacebookAppID,@"access_token", @"Invitation message", @"message",nil];

[facebook dialog:@"apprequests"andParams:params andDelegate:self]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T07:57:41.927

只有当用户可以合理地接受请求时，才会发送请求；如果您的应用程序只是一个 iOS 应用程序（即没有画布实现/apps.facebook.com URL），那么它们只会显示在 iOS 的 Facebook 应用程序中。

如果这没有发生，可能是因为您的应用程序的 SSO 设置不正确，因此 Facebook 的应用程序在用户接受请求时不知道如何将用户带到您的应用程序，请先检查这些 - 确保 URL 处理程序在您的应用程序等中正确设置。

也可能是因为该应用程序处于沙盒模式，但我不确定那个。

# wordpress - MVC3 + WordPress IIS URL 重写规则

> ID：11068932
> 
> 赞同：3
> 
> 时间：2012-06-17T04:31:32.680
> 
> 标签：wordpress, iis-7, url-rewriting, asp.net-mvc-routing

我有一个位于[http://mydomain.com/mymvcapp/](http://mydomain.com/mymvcapp/)的 ASP.NET MVC3 网站。但是，网站 (mydomain.com) 的根目录包含一个运行 PHP 的 WordPress 站点。因此，我设置了以下 IIS URL 重写规则，以允许 WordPress 通过其重写机制正常运行：

```
 <rewrite>
        <rules>
            <rule name="wordpress" patternSyntax="Wildcard">
                <match url="*" />
                <conditions>
                    <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
                    <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
                </conditions>
                <action type="Rewrite" url="index.php"/>
            </rule>     
        </rules>
    </rewrite> 
```

因此，有了这条规则，我的 WordPress 功能完美，但是，我的 MVC 重写不起作用。我将如何更改此规则以允许 WordPress 和 MVC（在 /mymvcapp/ 文件夹下）很好地共存？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T03:31:31.080

我自己想出来的。正则表达式可能是最强大的 YET 复杂/令人困惑的技术之一。但是在这种情况下，patternSyntax 标志设置为通配符，而不是正则表达式，这引起了我的困惑。希望这对其他人有帮助！=]

```
 <rewrite>
        <rules>
            <rule name="wordpress" patternSyntax="Wildcard">
                <match url="*" />
                <conditions logicalGrouping="MatchAll">
                    <add input="{PATH_INFO}" pattern="/mymvcapp/*" negate="true" />
                    <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
                    <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
                </conditions>
                <action type="Rewrite" url="index.php" />
            </rule>     
        </rules>
    </rewrite> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-18T19:45:57.020

**这是极少数讨论使 WordPress 和 ASP.NET 在 IIS 设置中良好共存的帖子之一。因此，对此表示敬意。**

我想将此作为对您的原始问题或答案的评论发布，但我选择写一个“答案”只是因为这是一个诚实的问题，我需要一些格式化功能。

我有多个按站点运行的 ASP.NET 应用程序。特别是根网站正在运行 MVC4 应用程序。

由于我不能在根目录安装 WordPress，我的计划是将它放在自己的应用程序文件夹[http://mydomain.com/wordpress/](http://mydomain.com/wordpress/)上，然后有一个 URL 重写规则来执行以下操作（使用 peudo-code） ：

```
blog.mydomain.com/{path} --> mydomain.com/wordpress/{path} 
```

我只是用这种方法造成了混乱，并且没有成功使用漂亮的永久链接，有时会进入重定向循环，有时会破坏指向 .css 文件、管理页面等的链接......

你有没有想过这个问题，例如，将 wordpress 作为一个子应用程序并进行子域 URL 重写？！？！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-03T08:27:07.680

我有类似的情况，但我不需要编辑我的 web.config 文件。相反，我按照[https://wordpress.org/support/article/giving-wordpress-its-own-directory/](https://wordpress.org/support/article/giving-wordpress-its-own-directory/)的说明进行操作，并在此进行了记录。

在将 WordPress 进程移动到子文件夹方法 II（通过 URL 更改）中的第 7 点处，您可以找到 IIS 安装选项。

# php - URL 中的处理 ID

> ID：11068935
> 
> 赞同：0
> 
> 时间：2012-06-17T04:32:17.510
> 
> 标签：php, javascript, jquery, ajax, html

我的网站必须由一组 jQueries 提供支持；使用一组菜单按钮动态加载内容。

现在，我想知道的是：

你在博主上见过吗？网址就像

```
blogger.com/blogger.g?blogID=abcd#id 
```

对于#id，如果您输入#overview，它会显示统计信息。如果您放置#allposts，它会显示所有帖子，同样内容仅取决于url中的#id。我见过很多网站也使用这种方法来提供 PermaLinks。

***我***该怎么做？对于每个菜单按钮，我提供了一个#id，如果在 url 中传递，我需要切换到该特定菜单。

注意：我使用 PHP、js、jQuery 和 HTML5 +/- Ajax

PS：拜托，不要说可以用这个那个那个！我是一个知识的中间人，即我不是专业人士。所以请给我一些算法或代码。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T04:35:22.133

`window.location.hash`将包含 URL 中的哈希值（`#id`、`#overview`等...）。然后，您可以使用在您的页面加载时运行的 javascript 检查 window.location.hash 的值，并根据它包含的内容，如果需要从服务器检索数据，您可以使用 ajax 调用修改您的页面。

哈希值不会发送到服务器，因此它必须是处理它的客户端代码。

至于具体的代码，你会使用这样的东西；

```
$(document).ready(function() {
    switch(window.location.hash) {
        case "#id":
            // code here
            break;
        case "#overview":
            // code here
            break;
        default:
            // code here
            break;
    }
}); 
```

那里的具体代码显然取决于您要做什么。如果您需要从服务器获取数据，那么您将发出 ajax 调用来检索该数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T04:36:58.433

这称为哈希值，浏览器不会将其发送到服务器，它们只能通过 javascript 访问。它们可以通过以下方式检索

```
var hash_val = window.location.hash; 
```

Javascript 还提供哈希更改的事件

```
window.onhashchange = function(){
} 
```

如果你想让它修改内容然后

```
window.onload=function()
  {
   var hash_val = window.location.hash;    
    //do more ajax stuff here
  } 
```

# ruby-on-rails - 让 Rails 在继续之前等待表单提交

> ID：11068936
> 
> 赞同：1
> 
> 时间：2012-06-17T04:32:24.670
> 
> 标签：ruby-on-rails, forms, redirect, controller, passwords

我有以下表格和控制器。

```
<%= form_tag do %>
    <div>
        <%= label_tag :Old %>
        <%= password_field_tag :old_password %>
    </div>

    <div>
        <%= label_tag :New %>
        <%= password_field_tag :new_password %>
    </div>

    <div>
        <%= label_tag :Confirm %>
        <%= password_field_tag :confirm_password %>
    </div>

    <div>
        <%= submit_tag "Update" %>
    </div>
<% end %> 
```

和控制器：

```
def change
    @user = current_user
    @op = params[:old_password]
    @np = params[:new_password]
    @cp = params[:confirm_password]

    if @np == @cp
        @user.update_with_password(:password => @np, :current_password=>@op)

        if @user.save
            flash[:notice] = "Password Successfully Changed"
            redirect_to home_path
        end 
    else
        @user.errors.add("Incorrect confirmation")
    end
end 
```

这都与 config/routes.rb 中的“密码/更改”相关联

问题是，当我转到 /password/change 时，我立即重定向到家并收到“密码已成功更改”的闪烁通知。我从中得到的是，它不需要我单击提交按钮来传递参数。如何使它在继续通过控制器之前等待表单的提交？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T04:45:32.287

最佳实践是将这两件事分开到不同的控制器方法中。一个应该用于简单地显示视图，而另一个应该用于处理 POST 请求。但是，如果您一心想要这样做，我相信这样的解决方案会奏效：

```
def change
    @user = current_user
    @op = params[:old_password]
    @np = params[:new_password]
    @cp = params[:confirm_password]

    if @np && @np == @cp # This checks to see if params[:new_password] is nil
        @user.update_with_password(:password => @np, :current_password=>@op) 
```

我强烈建议你把它分开。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T04:49:49.343

问题是您需要两种不同的方法。一个用于显示视图，一个用于处理表单发布。

现在你的密码控制器中的“更改”方法正在处理表单发布，所以你需要一个像“索引”这样的方法来显示表单

```
def index
    #move your form to /views/password/index.html.erb or specifically render your 'change' view
end 
```

然后在您的标记中将操作添加到您的表单

```
<%= form_tag('/password/change') do %>
… 
```

然后在您的控制器中，您可以仅为更改方法指定 POST

```
class PasswordController < ApplicationController
    verify :method => :post, :only => :change
… 
```

**更新**

而不是使用 verify 方法（在 rails 3 中删除），您应该将您的路由设置为 restful（[Rails Routing from the Outside In](http://guides.rubyonrails.org/routing.html "RoR 路由")），或者您可以创建一个特定的路由来更改密码，如下所示：

```
match 'password/change' => 'password#change', :via => :post 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T04:45:12.357

当您从浏览器呈现密码/更改时，**params 为 nil**，因此`@np == @cp`始终评估为 TRUE，执行更新、保存并执行重定向 - 事实上，如果您检查我会打赌用户的密码被设置为 nil。

在尝试更新之前，您需要确保参数不为空。

这是否有助于为您指明正确的方向？

*旁注：从代码可读性的角度来看，我可能建议只使用内联变量，而不是实例变量，但这只是我的意见:)*

# c# - 以秒为单位的 LINQ to Entity（DiffSeconds 用法）

> ID：11068939
> 
> 赞同：1
> 
> 时间：2012-06-17T04:33:11.033
> 
> 标签：c#, linq, datetime, linq-to-entities

我正在编写一个简单的 LINQ 查询，它将表的行与其自身进行比较。简单地说，一个表单上有两个数据网格，第一个显示一些行，第二个在第一个网格中选择一行时填充，条件如下：

找到与所选行具有相同代码且接收时间相差小于 30 秒的行（我的意思是第二个网格中显示的行的接收时间必须早于所选行的接收时间）。

我写了以下代码：

```
Call_Log selected = (Call_Log)dataGrid1.SelectedItem;
                var subData = from cLog in callLog
                              where cLog.Check_Create == 1 &&
                              EntityFunctions.DiffSeconds(selected.ReceptionTime,cLog.ReceptionTime) < 30 &&
                              selected.CustomerCode == cLog.CustomerCode &&
                              selected.CalledID == cLog.CalledID &&
                              selected.ID != cLog.ID
                              select cLog; 
```

但它会返回一些与所选行相差超过 30 秒的行。我怎样才能解决这个问题？

**评论：**

在上面的代码中，我需要那些与所选行相差不到 30 秒的行 (cLog)。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T05:23:14.367

如果[`DiffSeconds`](http://msdn.microsoft.com/en-us/library/dd412615.aspx)返回负值超过 30 秒，您的验证返回 true。

[`Math.abs`](http://msdn.microsoft.com/en-us/library/system.math.abs.aspx)取as后尝试比较

```
Math.Abs(EntityFunctions.DiffSeconds(selected.ReceptionTime,cLog.ReceptionTime)‌​) < 30 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T06:08:13.267

试试这个。

```
var subData = from cLog in callLog 
              let diffInTicks = selected.ReceptionTime.Ticks - cLog.ReceptionTime.Ticks
              let thirtySecTicks = new TimeSpan(0, 0, 0, 30, 0).Ticks
              where cLog.Check_Create == 1 && 
                diffInTicks < thirtySecTicks && 
                selected.CustomerCode == cLog.CustomerCode && 
                selected.CalledID == cLog.CalledID && 
                selected.ID != cLog.ID 
              select cLog; 
```

# sockets - unable to use IPAddress or similar type in windows 8 metro style apps

> ID：11068940
> 
> 赞同：3
> 
> 时间：2012-06-17T04:33:12.690
> 
> 标签：sockets, windows-8

I am finding difficulty in using `System.Net.IPAddress` or any similar types in Windows 8 Metro Apps. I am creating an application that will run in an intranet environment and the users will connect to remote servers using IPAddress.

But somehow I am not able to use it. Also, in `Windows.Networking.EndpointPair` class, I cant find any option to pass IPAddress specifically

Kindly help with this. Thanx of help in advance

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-17T07:51:57.963

You can use the [HostName class](http://msdn.microsoft.com/en-us/library/windows/apps/windows.networking.hostname.aspx) to represent an IP Address. When you create the [EndpointPair](http://msdn.microsoft.com/en-us/library/windows/apps/windows.networking.endpointpair.aspx), you have a remote and a local host. Check out the [StreamSocket sample](http://code.msdn.microsoft.com/windowsapps/StreamSocket-Sample-8c573931). System.Net.IPAddress is not part of the .NET Core Profile and is thus not available from Metro style apps.

# c# - 数据网格视图错误

> ID：11068948
> 
> 赞同：0
> 
> 时间：2012-06-17T04:35:36.593
> 
> 标签：c#, datagridview

我在使用数据网格视图时遇到问题。我附上了带有代码和错误消息的图像。我想知道这个错误的原因。谢谢。![在此处输入图像描述](../Images/2061c6a59a24d7db9f4e305ecb50c54b.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T05:01:36.023

而不是设置`DataMember`简单地调用绑定方法`dataGridView1.DataBind()`。正如[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.datamember.aspx)所述，`DataMember`它用于以下用途：

> 获取或设置 DataGridView 正在为其显示数据的数据源中的列表或表的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T06:18:02.317

您不需要 LINQ 查询。只需将列表设置为数据源。在这种情况下无需设置 DataMember。

```
 private void Form4_Load(object sender, EventArgs e)
    {
        List<Products> productList = new List<Products>()
        {
            new Products{ProductName = "P1", ProductPrice = 56, Category = "c1"},
            new Products{ProductName = "P2", ProductPrice = 36, Category = "c1"}    
        };

        //var p = from s in productList select s;

        dataGridView1.DataSource = productList;
        //dataGridView1.DataMember = p.ToString();
    } 
```

**编辑**

LINQ 查询正在返回`IEnumerable`；但是 DataGridView 类支持标准的 Windows 窗体数据绑定模型。这意味着数据源可以是实现以下接口之一的任何类型：IList、IListSource、IBindingList 和 IBindingListView。所以你需要调用`ToList()`你的 LINQ 结果。[在此MSDN 链接](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.datasource.aspx)上阅读有关此内容的更多信息

但是，在您的情况下，这样做与设置`productList`为 DataSource 相同（我的意思是结果将是相同的，因为 LINQ 查询中不涉及排序或分组）。

如果你想玩 LINQ，试试这个（你的列表将按`ProductPrice`升序排列）

```
 var p = from s in productList orderby s.ProductPrice select s;
   dataGridView1.DataSource = p.ToList(); 
```

# c# - 如何将 PrintDocument 保存到文件中？

> ID：11068949
> 
> 赞同：3
> 
> 时间：2012-06-17T04:35:44.247
> 
> 标签：c#, .net, printdocument

我在 C# 中创建了一个 PrintDocument，我可以打印它，但现在我想将它保存到一个文件中。是否可以保存为word文档？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T18:55:42.920

根据您的意图，这可能很有用：

如果您的目标是在以后重新打印它，这将起作用：

```
print_doc.PrinterSettings.PrintToFile = true;
print_doc.PrinterSettings.PrintFileName = "backup.prn"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T04:41:12.983

查看以下参考：[Microsoft.Office.Tools.Word 命名空间](http://msdn.microsoft.com/en-us/library/cehya1ss%28v=vs.80%29)

另一个指向 msdn 文档的链接[如何：保存文档](http://msdn.microsoft.com/en-us/library/63w57f4b.aspx)

# class - python 3 新的类

> ID：11068950
> 
> 赞同：0
> 
> 时间：2012-06-17T04:35:48.677
> 
> 标签：class, function, python-3.x

我是在 python 中自学的，需要一些我正在尝试编写的非常简单的课程的帮助。我想在各种模块中使用 InitLog 类之外的所有内容，而无需在每次使用它时声明一个新的类变量（例如，我不想在我希望使用该类的每个（众多）模块中声明 betty = Initlog .. . 有什么办法可以做到这一点吗？在此先感谢

```
import os
import sys
import pdb
import fileinput
import Tools

class InitLog:
    def __init__(self):
        pass
    def Update(self):
        self.sound = sound
        self.engine = engine

    def save(self):

        self.summery = 'sound: ' + self.sound + '\n'
        self.summery += 'engine: ' + self.engine + '\n'

        #lock for use within threads
        Tools.Locked.State.LogAddress = False
        while Tools.Locked.State.LogAddress == True: pass
        Tools.Locked.State.LogAddress = True

        try: os.remove(path + '/' + self.dest + '/init.log')
        except: pass

        path = os.getcwd()
        if not os.path.exists(self.dest): os.makedirs(self.dest)
        if os.path.isfile(path + '/' + self.dest + '/init.log') == True: os.remove(path + '/' + self.dest + '/init.log')
        with open (path + '/' + self.dest + '/init.log', mode='a', encoding='utf-8') as a_file:
            a_file.write(self.summery)
        Tools.Locked.State.LogAddress = False

InitLog.Update.sound = 'on'
InitLog.Update.engine = 'google.txt'
InitLog.save() 
```

错误：`TypeError: save() takes exactly 1 positional argument (0 given)`

**编辑：**

我已经缩短了上面的示例以减少冗余。

这是我以前使用的工作代码（在尝试使用 InitLog 而不声明新的类变量的原始请求之前）

```
import os
import sys
import pdb
import fileinput
import Tools

class InitLog:
    def __init__(self):
        pass
    def setLaws(self):
        self.sound = 'off'
        self.engine = 'google.txt'

    def Update(self):
        while Tools.Locked.State.LogAddress == True: pass
        Tools.Locked.State.LogAddress = True
        try: os.remove(path + '/' + self.dest + '/init.log')
        except: pass

        summery = 'sound: ' + self.sound + '\n'
        summery += 'engine: ' + self.engine + '\n'

        path = os.getcwd()
        if not os.path.exists(self.dest): os.makedirs(self.dest)
        if os.path.isfile(path + '/' + self.dest + '/init.log') == True: os.remove(path + '/' + self.dest + '/init.log')
        with open (path + '/' + self.dest + '/init.log', mode='a', encoding='utf-8') as a_file:
            a_file.write(summery)
        Tools.Locked.State.LogAddress = False

Tools.Locked.State.LogAddress = False
log = InitLog()
log.setLaws()
log.sound = 'on'
log.Update() 
```

我不想`log = InitLog()`为我需要使用这个类的每个模块说

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T04:57:34.440

您没有正确使用课程。

以下代码：

```
InitLog.Update.sound = 'on'
InitLog.Update.engine = 'google.txt'
InitLog.Update.countryspec = '.com'
InitLog.Update.limit = '10'
.... 
```

正在访问 InitLog 类的 Update 方法对象，并动态添加属性。此属性被附加到函数对象而不是类或该类的对象。

`error: TypeError: save() takes exactly 1 positional argument (0 given)`save 是一种方法，它需要一个参数 self ，该参数在 InitLog 对象的实例调用它时隐式设置。

如果您希望通过代码实现单个实例，那么您可以遵循单例设计模式。

首先我建议你通过[http://docs.python.org/tutorial/classes.html](http://docs.python.org/tutorial/classes.html)

也许你想要实现这样的目标：

```
class InitLog:
    sound = None
    engine = None
    summary = ""
    @classmethod
    def save(cls):
        cls.summary = 'sound: ' + cls.sound + '\n'
        cls.summary += 'engine: ' + cls.engine + '\n'

InitLog.sound = 'On'
InitLog.engine = 'google.txt'
InitLog.save()
print InitLog.summary 
```

这是一个不同的设计，以后可能会更可重用。

```
class InitLog:
    custom_instance = None
    def __init__(self):
        self.sound = None
        self.engine = None
        self.summary = ''
    @property
    def sound(self):
        return self.sound
    @sound.setter
    def set_sound(self, sound):
        self.sound = sound
    @property
    def engine(self):
        return self.engine
    @engine.setter
    def set_engine(self, engine):
        self.engine = engine
    @property
    def summary(self):
        return self.summary
    @summary.setter
    def set_summary(self, summary):
        self.summary = summary
    def update(self, **kwargs):
        if 'sound' in kwargs:
            self.sound = kwargs['sound']
        if 'engine' in kwargs:
            self.engine = kwargs['engine']
    def save(self):
        self.summary = 'sound: ' + self.sound + '\n'
        self.summary += 'engine: ' + self.engine + '\n'
    @classmethod
    def get_custom_instance(cls):
        if not cls.custom_instance:
            cls.custom_instance = InitLoc()
            cls.custom_instance.engine = 'google.txt'
            cls.custom_instance.sound = 'on'
        return cls.custom_instance

obj = InitLog.get_custom_instance()
obj.save()
print obj.summary  #ouput => 'sound: on\nengine: google.txt\n'
print obj.update(sound = 'Off')
obj.save()
print obj.summary  #output =>'sound: Off\nengine: google.txt\n' 
```

有很多方法可以设计 Python 类或一般类，这只是 2，请仔细阅读指南并找到适合您需求的最佳设计。

# android - 移动到 SD 卡触发 EXTERNAL_APPLICATIONS_AVAILABLE 广播接收器？

> ID：11068954
> 
> 赞同：3
> 
> 时间：2012-06-17T04:36:32.060
> 
> 标签：android, android-intent, broadcastreceiver

当我去管理应用程序并尝试将任何应用程序移动到 SD 卡时，它会为 EXTERNAL_APPLICATIONS_AVAILABLE 和 BOOT_COMPLETED 触发我的广播接收器。

这是我的广播接收器：

```
 import android.app.AlarmManager;
    import android.app.PendingIntent;
    import android.content.BroadcastReceiver;
    import android.content.Context;
    import android.content.Intent;
    import android.content.SharedPreferences;
    import android.preference.PreferenceManager;

    import java.util.Timer;
    import java.util.TimerTask;

    public class AutoStart extends BroadcastReceiver {
        @Override
        public void onReceive(Context context, Intent intent) {
            SharedPreferences preferences = PreferenceManager.getDefaultSharedPreferences(context.getApplicationContext());
            if(preferences.getBoolean(context.getString(R.string.autoStartKey), false))
            {
                AlarmManager alarmManager = (AlarmManager) context.getSystemService(Context.ALARM_SERVICE);
                PendingIntent pendingIntent = PendingIntent.getService(context, 0, new Intent(context, MainActivity.class), PendingIntent.FLAG_UPDATE_CURRENT);
                alarmManager.setInexactRepeating(AlarmManager.RTC_WAKEUP, System.currentTimeMillis() + 2, 2, pendingIntent);
                boolean showNotification = preferences.getBoolean(context.getString(R.string.showNotificationKey), false);
                if(showNotification)
                    Preferences.setNotification(context);
            }
            Timer timer = new Timer();
            final Context contextTimer = context;
            timer.schedule(new TimerTask() {
                @Override
                public void run() {
                    Intent i = new Intent(contextTimer, StartupCleaner.class);
                    i.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                    contextTimer.startActivity(i);
                }
            }, 10000);
        }

} 
```

这是我的清单：

```
<receiver android:enabled="true" android:name=".AutoStart"
                  android:permission="android.permission.RECEIVE_BOOT_COMPLETED">
            <intent-filter>
                <action android:name="android.intent.action.BOOT_COMPLETED" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </receiver>
        <receiver android:enabled="true" android:name=".AutoStart"
                  android:permission="android.permission.EXTERNAL_APPLICATIONS_AVAILABLE">
            <intent-filter>
                <action android:name="android.intent.action.EXTERNAL_APPLICATIONS_AVAILABLE" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </receiver> 
```

# ado.net - 用于 Web 开发的 Ado.NET “断开连接的架构”

> ID：11068955
> 
> 赞同：0
> 
> 时间：2012-06-17T04:36:37.477
> 
> 标签：ado.net, dataset, disconnected

我是 asp.net 和 ado.net 的新手。我必须用 .net 开发一个内容管理系统，我想知道哪个选项适合我，网络的断开或连接架构？我不明白为什么我应该在在线应用程序上使用数据集。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T04:46:06.320

听起来您正在开始使用 ASP.NET，因此取决于您喜欢哪种技术（MVC 或 Web 窗体），Microsoft 提供的这两个教程中的任何一个都将对一般数据访问有很大帮助。

MVC：[http](http://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc) ://www.asp.net/mvc/tutorials/getting-started-with-ef-using-mvc Web 表单：[http ://www.asp.net/web-forms/tutorials/data-access](http://www.asp.net/web-forms/tutorials/data-access)

# blackberry - 在 4.6.1 上获取 BlackBerry 连接的后缀字符串？

> ID：11068959
> 
> 赞同：0
> 
> 时间：2012-06-17T04:37:59.410
> 
> 标签：blackberry, connection, httpconnection

我正在尝试开发一个`HttpRequest`用于请求网页的应用程序。问题是我仍然找不到正确的方法来获取 OS 4.6.1 的连接字符串中的后缀。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T05:15:46.643

我相信我用来创建我的连接字符串的链接，在 OS 5.0 之前，是这两个：

[http://supportforums.blackberry.com/t5/Java-Development/Different-ways-to-make-an-HTTP-or-socket-connection/ta-p/445879](http://supportforums.blackberry.com/t5/Java-Development/Different-ways-to-make-an-HTTP-or-socket-connection/ta-p/445879)

[http://docs.blackberry.com/en/developers/deliverables/34480/Network_transport_options_1293321_11.jsp](http://docs.blackberry.com/en/developers/deliverables/34480/Network_transport_options_1293321_11.jsp)

黑莓当然支持几种不同的传输方式（Wifi、WAP、BIS 等）。您可能想要决定要使用哪种传输方式，并根据在任何时候*可用的传输方式以及您的优先级来创建连接字符串。*

下面是一些[可从 blackberry.com 下载的示例代码](http://supportforums.blackberry.com/t5/Java-Development/What-Is-Network-API-alternative-for-legacy-OS/ta-p/614822)，可帮助构建连接字符串后缀。有关实际下载，请参阅底部附近的**附件链接。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T05:28:40.857

此外，如果您时间紧迫，并且没有时间阅读我在其他答案中列出的资源，并且只想要一些快速代码，我记得 BlackBerry 的原始 Facebook SDK 中有一个实现看起来接近我自己写的（对不起，我不能发布我写的代码，因为它是我客户的）。但是，Facebook SDK 实现似乎可以免费发布。我再也找不到它的链接了，但我会把它贴在下面供您欣赏：

```
/**
 * Copyright (c) E.Y. Baskoro, Research In Motion Limited.
 * 
 * Permission is hereby granted, free of charge, to any person
 * obtaining a copy of this software and associated documentation
 * files (the "Software"), to deal in the Software without 
 * restriction, including without limitation the rights to use, 
 * copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the 
 * Software is furnished to do so, subject to the following 
 * conditions:
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, 
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES 
 * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND 
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT 
 * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, 
 * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING 
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR 
 * OTHER DEALINGS IN THE SOFTWARE.
 * 
 * This License shall be included in all copies or substantial 
 * portions of the Software.
 * 
 * The name(s) of the above copyright holders shall not be used 
 * in advertising or otherwise to promote the sale, use or other 
 * dealings in this Software without prior written authorization.
 * 
 */
package com.blackberry.util.network;

import java.io.IOException;
import java.io.OutputStream;
import java.util.Vector;

import javax.microedition.io.Connector;
import javax.microedition.io.HttpConnection;

import com.blackberry.util.log.Logger;

import net.rim.device.api.io.http.HttpHeaders;
import net.rim.device.api.io.http.HttpProtocolConstants;
import net.rim.device.api.servicebook.ServiceBook;
import net.rim.device.api.servicebook.ServiceRecord;
import net.rim.device.api.system.Branding;
import net.rim.device.api.system.CoverageInfo;
import net.rim.device.api.system.DeviceInfo;
import net.rim.device.api.system.WLANInfo;

public class HttpConnectionFactory {

   public static final int TRANSPORT_WIFI = 1;
   public static final int TRANSPORT_BES = 2;
   public static final int TRANSPORT_BIS = 4;
   public static final int TRANSPORT_DIRECT_TCP = 8;
   public static final int TRANSPORT_WAP2 = 16;
   public static final int TRANSPORT_SIM = 32;

   public static final int TRANSPORTS_ANY = TRANSPORT_WIFI | TRANSPORT_BES | TRANSPORT_BIS | TRANSPORT_DIRECT_TCP | TRANSPORT_WAP2 | TRANSPORT_SIM;
   public static final int TRANSPORTS_AVOID_CARRIER = TRANSPORT_WIFI | TRANSPORT_BES | TRANSPORT_BIS | TRANSPORT_SIM;
   public static final int TRANSPORTS_CARRIER_ONLY = TRANSPORT_DIRECT_TCP | TRANSPORT_WAP2 | TRANSPORT_SIM;

   public static final int DEFAULT_TRANSPORT_ORDER[] = { TRANSPORT_SIM, TRANSPORT_WIFI, TRANSPORT_BIS, TRANSPORT_BES, TRANSPORT_WAP2, TRANSPORT_DIRECT_TCP };

   private static final int TRANSPORT_COUNT = DEFAULT_TRANSPORT_ORDER.length;

   // private static ServiceRecord srMDS[], srBIS[], srWAP2[], srWiFi[];
   private static ServiceRecord srWAP2[];
   private static boolean serviceRecordsLoaded = false;

   private int transports[];
   private int lastTransport = -1;

   protected Logger log = Logger.getLogger(getClass());

   public HttpConnectionFactory() {
      this(0);
   }

   public HttpConnectionFactory(int allowedTransports) {
      this(transportMaskToArray(allowedTransports));
   }

   public HttpConnectionFactory(int transportPriority[]) {
      if (!serviceRecordsLoaded) {
         loadServiceBooks(false);
      }
      transports = transportPriority;
   }

   public static String getUserAgent() {
      StringBuffer sb = new StringBuffer();
      sb.append("BlackBerry");
      sb.append(DeviceInfo.getDeviceName());
      sb.append("/");
      sb.append(DeviceInfo.getSoftwareVersion());
      sb.append(" Profile/");
      sb.append(System.getProperty("microedition.profiles"));
      sb.append(" Configuration/");
      sb.append(System.getProperty("microedition.configuration"));
      sb.append(" VendorID/");
      sb.append(Branding.getVendorId());

      return sb.toString();
   }

   public static String getProfile() {
      StringBuffer sb = new StringBuffer();
      sb.append("http://www.blackberry.net/go/mobile/profiles/uaprof/");
      sb.append(DeviceInfo.getDeviceName());
      sb.append("/");
      sb.append(DeviceInfo.getSoftwareVersion().substring(0, 3)); //RDF file format is 4.5.0.rdf (does not include build version)
      sb.append(".rdf");

      return sb.toString();
   }

   public HttpConnection getHttpConnection(String pURL) {
      return getHttpConnection(pURL, null, null);
   }

   public HttpConnection getHttpConnection(String pURL, HttpHeaders headers) {
      return getHttpConnection(pURL, headers, null);
   }

   public HttpConnection getHttpConnection(String pURL, byte[] data) {
      return getHttpConnection(pURL, null, data);
   }

   public HttpConnection getHttpConnection(String pURL, HttpHeaders headers, byte[] data) {

      if ((pURL.length() > 5) && pURL.startsWith("cod://")) {
         return new LocalHttpConnection(pURL);
      }

      int curIndex = 0;
      HttpConnection con = null;

      while ((con = tryHttpConnection(pURL, curIndex, headers, data)) == null) {
         try {
            curIndex = nextTransport(curIndex);
         } catch (HttpConnectionFactoryException e) {
            e.printStackTrace();
            break;
         } finally {
         }
      }

      if (con != null) {
         setLastTransport(transports[curIndex]);
      }

      return con;
   }

   private int nextTransport(int curIndex) throws HttpConnectionFactoryException {
      if ((curIndex >= 0) && (curIndex < transports.length - 1)) {
         return curIndex + 1;
      } else {
         throw new HttpConnectionFactoryException("No more transport available.");
      }
   }

   private HttpConnection tryHttpConnection(String pURL, int tIndex, HttpHeaders headers, byte[] data) {

      HttpConnection con = null;
      OutputStream os = null;

      log.debug("Trying " + getTransportName(transports[tIndex]) + "... ");
      switch (transports[tIndex]) {
      case TRANSPORT_SIM:
         try {
            con = getSimConnection(pURL, false);
         } catch (IOException e) {
            log.debug(e.getMessage());
         } finally {
            break;
         }
      case TRANSPORT_WIFI:
         try {
            con = getWifiConnection(pURL);
         } catch (IOException e) {
            log.debug(e.getMessage());
         } finally {
            break;
         }
      case TRANSPORT_BES:
         try {
            con = getBesConnection(pURL);
         } catch (IOException e) {
            log.debug(e.getMessage());
         } finally {
            break;
         }
      case TRANSPORT_BIS:
         try {
            con = getBisConnection(pURL);
         } catch (IOException e) {
            log.debug(e.getMessage());
         } finally {
            break;
         }
      case TRANSPORT_DIRECT_TCP:
         try {
            con = getTcpConnection(pURL);
         } catch (IOException e) {
         } finally {
            break;
         }
      case TRANSPORT_WAP2:
         try {
            con = getWap2Connection(pURL);
         } catch (IOException e) {
            log.debug(e.getMessage());
         } finally {
            break;
         }
      }

      log.debug("con = " + con);

      if (con != null) {
         try {
            log.debug("url = " + con.getURL());
            //add headers to connection
            if (headers != null) {
               int size = headers.size();

               for (int i = 0; i < size;) {
                  String header = headers.getPropertyKey(i);
                  String value = headers.getPropertyValue(i++);

                  if (value != null) {
                     con.setRequestProperty(header, value);

                  }
               }
            }
            // post data
            if (data != null) {
               con.setRequestMethod(HttpConnection.POST);
               con.setRequestProperty(HttpProtocolConstants.HEADER_CONTENT_TYPE, HttpProtocolConstants.CONTENT_TYPE_APPLICATION_X_WWW_FORM_URLENCODED);
               con.setRequestProperty(HttpProtocolConstants.HEADER_CONTENT_LENGTH, String.valueOf(data.length));

               os = con.openOutputStream();
               os.write(data);
            } else {
               con.setRequestMethod(HttpConnection.GET);
            }

         } catch (IOException e) {
            e.printStackTrace();
         }
      }

      return con;
   }

   public int getLastTransport() {
      return lastTransport;
   }

   public String getLastTransportName() {
      return getTransportName(getLastTransport());
   }

   private void setLastTransport(int pLastTransport) {
      lastTransport = pLastTransport;
   }

   private HttpConnection getSimConnection(String pURL, boolean mdsSimulatorRunning) throws IOException {
      if (DeviceInfo.isSimulator()) {
         if (mdsSimulatorRunning) {
            return getConnection(pURL, ";deviceside=false", null);
         } else {
            return getConnection(pURL, ";deviceside=true", null);
         }
      }
      return null;
   }

   private HttpConnection getBisConnection(String pURL) throws IOException {
      if (CoverageInfo.isCoverageSufficient(4 /* CoverageInfo.COVERAGE_BIS_B */)) {
         return getConnection(pURL, ";deviceside=false;ConnectionType=mds-public", null);
      }
      return null;
   }

   private HttpConnection getBesConnection(String pURL) throws IOException {
      if (CoverageInfo.isCoverageSufficient(2 /* CoverageInfo.COVERAGE_MDS */)) {
         return getConnection(pURL, ";deviceside=false", null);
      }
      return null;
   }

   private HttpConnection getWifiConnection(String pURL) throws IOException {
      if (WLANInfo.getWLANState() == WLANInfo.WLAN_STATE_CONNECTED) {
         return getConnection(pURL, ";interface=wifi", null);
      }
      return null;
   }

   private HttpConnection getWap2Connection(String pURL) throws IOException {
      if (CoverageInfo.isCoverageSufficient(1 /* CoverageInfo.COVERAGE_DIRECT */) && (srWAP2 != null) && (srWAP2.length != 0)) {
         return getConnection(pURL, ";deviceside=true;ConnectionUID=", srWAP2[0].getUid());
      }
      return null;
   }

   private HttpConnection getTcpConnection(String pURL) throws IOException {
      if (CoverageInfo.isCoverageSufficient(1 /* CoverageInfo.COVERAGE_DIRECT */)) {
         return getConnection(pURL, ";deviceside=true", null);
      }
      return null;
   }

   private HttpConnection getConnection(String pURL, String transportExtras1, String transportExtras2) throws IOException {
      StringBuffer fullUrl = new StringBuffer();
      fullUrl.append(pURL);
      if (transportExtras1 != null) {
         fullUrl.append(transportExtras1);
      }
      if (transportExtras2 != null) {
         fullUrl.append(transportExtras2);
      }
      return (HttpConnection) Connector.open(fullUrl.toString());
   }

   public static void reloadServiceBooks() {
      loadServiceBooks(true);
   }

   private static synchronized void loadServiceBooks(boolean reload) {
      if (serviceRecordsLoaded && !reload) {
         return;
      }
      ServiceBook sb = ServiceBook.getSB();
      ServiceRecord[] records = sb.getRecords();
      Vector mdsVec = new Vector();
      Vector bisVec = new Vector();
      Vector wap2Vec = new Vector();
      Vector wifiVec = new Vector();

      if (!serviceRecordsLoaded) {
         for (int i = 0; i < records.length; i++) {
            ServiceRecord myRecord = records[i];
            String cid, uid;

            if (myRecord.isValid() && !myRecord.isDisabled()) {
               cid = myRecord.getCid().toLowerCase();
               uid = myRecord.getUid().toLowerCase();
               if ((cid.indexOf("wptcp") != -1) && (uid.indexOf("wap2") != -1) && (uid.indexOf("wifi") == -1) && (uid.indexOf("mms") == -1)) {
                  wap2Vec.addElement(myRecord);
               }
            }
         }

         srWAP2 = new ServiceRecord[wap2Vec.size()];
         wap2Vec.copyInto(srWAP2);
         wap2Vec.removeAllElements();
         wap2Vec = null;

         serviceRecordsLoaded = true;
      }
   }

   public static int[] transportMaskToArray(int mask) {
      if (mask == 0) {
         mask = TRANSPORTS_ANY;
      }
      int numTransports = 0;
      for (int i = 0; i < TRANSPORT_COUNT; i++) {
         if ((DEFAULT_TRANSPORT_ORDER[i] & mask) != 0) {
            numTransports++;
         }
      }
      int transports[] = new int[numTransports];
      int index = 0;
      for (int i = 0; i < TRANSPORT_COUNT; i++) {
         if ((DEFAULT_TRANSPORT_ORDER[i] & mask) != 0) {
            transports[index++] = DEFAULT_TRANSPORT_ORDER[i];
         }
      }
      return transports;
   }

   private static String getTransportName(int transport) {
      String tName;
      switch (transport) {
      case TRANSPORT_WIFI:
         tName = "WIFI";
         break;
      case TRANSPORT_BES:
         tName = "BES";
         break;
      case TRANSPORT_BIS:
         tName = "BIS";
         break;
      case TRANSPORT_DIRECT_TCP:
         tName = "TCP";
         break;
      case TRANSPORT_WAP2:
         tName = "WAP2";
         break;
      case TRANSPORT_SIM:
         tName = "SIM";
         break;
      default:
         tName = "UNKNOWN";
         break;
      }
      return tName;
   }

} 
```

# jpa - 如何在 ejb 方法中编写“从广告中选择 max(AdvID)”查询？

> ID：11068960
> 
> 赞同：0
> 
> 时间：2012-06-17T04:38:13.433
> 
> 标签：jpa, ejb-3.0, jpql

当它返回最大 ID 时，我不知道该怎么写。请给我答案。

我在 sessionbean 中写了这个，但它返回-1。

```
@Override
    public int searchMaxAdvID() {
        int adid=em.createNativeQuery("select max(AdvID) from Advertisement").getMaxResults();
        return adid;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T16:28:07.463

您可以尝试以下常规 JPQL 查询，而不是使用本机查询。

```
Integer maxAdvId = (Integer) em.createQuery("SELECT MAX(a.advID) from Advertisement a").getSingleResult(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T17:06:23.977

问题是您误解了 getMaxResults 方法。它与函数没有任何联系`MAX`。如[文档](http://docs.oracle.com/javaee/6/api/javax/persistence/Query.html#getMaxResults%28%29)中所述，它的行为方式应如下：

> 查询对象设置为检索的最大结果数。如果 setMaxResults 未应用于查询对象，则返回 Integer.MAX_VALUE。

在您的情况下，它似乎返回 -1 而不是 Integer.MAX_VALUE。这显然是不正确的。例如 Hibernate 3.6.8.Final 按照指定返回 Integer.MAX_VALUE (2147483647)。方法 setMaxResults 限制查询返回的最大行数。

在您的情况下[， getSingleResult](http://docs.oracle.com/javaee/6/api/javax/persistence/Query.html#getSingleResult%28%29)是正确的使用方法。如果表中没有任何行，则结果将为空。

```
Integer x = (Integer) em.createNativeQuery(
      "select max(AdvID) from Advertisement").getSingleResult(); 
```

如果没有使用本机查询的具体原因，请按照 Nayan Wadekar 的回答中的建议使用 JPQL 查询。

# c++ - 根据给定的年份和周数计算开始和结束日期/时间

> ID：11068961
> 
> 赞同：1
> 
> 时间：2012-06-17T04:38:44.307
> 
> 标签：c++, datetime

如何计算给定年份和 ISO 年份周数的开始和结束日期/时间 (YYYY-mm-DD HH:MM::SS)？

在再次提出此类问题之前，我进行了搜索。当然，有一些关于 SO 上从 (year, weeknumber) 到 (datetime) 的转换的线索。但他们的回答是说 Perl、PHP、JAVA、SQL、C#、.NET、Excel 和除 C/C++ 之外的其他编程语言。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T06:33:30.883

您可以从下面的代码开始并稍微调整一下（您对第一周的定义是：第一周或第一周）。您还必须处理第一周和上周的特殊情况。

```
 int const year = 2012;
  int const week = 24;
  boost::gregorian::greg_weekday const firstDayOfWeek = boost::gregorian::Monday;

  boost::gregorian::date const jan1st(year, boost::gregorian::Jan, 1);
  boost::gregorian::first_day_of_the_week_after const firstDay2ndWeek(firstDayOfWeek);
  boost::gregorian::date const begin2ndWeek = firstDay2ndWeek.get_date(jan1st);
  boost::gregorian::date const end2ndWeek = begin2ndWeek + boost::gregorian::days(6);

  boost::gregorian::date const beginNthWeek = begin2ndWeek + boost::gregorian::weeks(week - 2);
  boost::gregorian::date const endNthWeek = end2ndWeek + boost::gregorian::weeks(week - 2);

  std::cout << boost::gregorian::to_iso_extended_string(jan1st) << std::endl;
  std::cout << boost::gregorian::to_iso_extended_string(begin2ndWeek) << std::endl;
  std::cout << boost::gregorian::to_iso_extended_string(end2ndWeek) << std::endl;
  std::cout << boost::gregorian::to_iso_extended_string(beginNthWeek) << std::endl;
  std::cout << boost::gregorian::to_iso_extended_string(endNthWeek) << std::endl; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T05:36:16.550

恐怕使用简单的 C++ 没有解决这个问题的捷径。但是，编写解决方案应该不是一项艰巨的工作。您只需要处理特殊情况（例如第一周和最后一周、二月、闰年）。一种方法可以是

1.  从一年的周数，获取该年的`day numbers`（即开始和结束日期）。（在这里照顾第一周和最后一周）
2.  现在很容易找到`day numbers`谎言中的月份和日期。（在这里照顾二月）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T10:55:22.473

为了帮助其他人，我想回答我自己的问题如下：

```
COleDateTime YearWeekDayToCalendarDate(int nYear, int nWeekNumber, int nWeekDay)
{   
// This method requires that one know the weekday of 4 January of the year in question
int nFirstWeekDay = WeekDay(nYear, 1, 4);

// Add 3 to the number of this weekday, giving a correction to be used for dates within this year
int nDaysOffset = nFirstWeekDay + 3;

// Multiply the week number by 7, then add the weekday. 
int nOrdinalDayNumber = (nWeekNumber * 7) + nWeekDay;

// From this sum subtract the correction for the year.
nOrdinalDayNumber = nOrdinalDayNumber - nDaysOffset;

// If the ordinal date thus obtained is zero or negative, the date belongs to the previous calendar year; 
if (nOrdinalDayNumber <= 0)
   nYear--;

int nTotalDaysInTheYear = 365;

if ( LeapYear(nYear) )
   nTotalDaysInTheYear++;

// If greater than the number of days in the year, to the following year.
if (nOrdinalDayNumber > nTotalDaysInTheYear)
   nYear++;

// The result is the ordinal date, which can be converted into a calendar date using the following function
unsigned int nMonth, nDay;
YearDayToMonthDay(nOrdinalDayNumber, nYear, nDay, nMonth);

COleDateTime dtCalendar(nYear, nMonth, nDay, 0, 0, 0);

return dtCalendar;
}

int WeekDay(int nYear, int nMonth, int nDay)
{   
// Find the DayOfYearNumber for the specified nYear, nMonth, and nDay
const int AccumulateDaysToMonth [] = {0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334};

// Set DayofYear Number for nYear, nMonth, and nDay
int nDayOfYearNumber = nDay + AccumulateDaysToMonth[nMonth - 1];

// Increase of Dayof Year Number by 1, if year is leapyear and month greater than February
//if ( LeapYear(nYear) && (nMonth == 2) )
if ( LeapYear(nYear) && (nMonth > 2) )
   nDayOfYearNumber += 1;

// Find the Jan1Weekday for nYear (Monday = 1, Sunday = 7)
int i, j, k, l, nJan1Weekday, nWeekday;

i = (nYear - 1) % 100;
j = (nYear - 1) - i;
k = i + i / 4;

nJan1Weekday = 1 + (((((j / 100) % 4) * 5) + k) % 7);

// Calcuate the WeekDay for the given date
l = nDayOfYearNumber + (nJan1Weekday - 1);
nWeekday = 1 + ((l - 1) % 7);

return nWeekday;
}

void YearDayToMonthDay(unsigned int nYearDay, unsigned int nYear, 
                       unsigned int& nMonthDay, unsigned int& nMonth)
{   
// Day is the day between 1 and 366
// Year is the year you wish
unsigned int nMonthTable[12] = {31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31};
unsigned int nMonthDays = 0;

if ((nYear % 4 == 0) && ((!(nYear % 100 == 0)) || (nYear % 400 == 0))) 
   nMonthTable[1] = 29;
else 
   nMonthTable[1] = 28;

nMonth = 0;

while (nYearDay > nMonthDays) 
   nMonthDays += nMonthTable[nMonth++];

nMonthDay = nYearDay - nMonthDays + nMonthTable[nMonth - 1];
}

inline bool LeapYear( int nYear )  
{  
// Find if nYear is LeapYear        
if ( (nYear % 4 == 0 && nYear % 100 != 0) || nYear % 400 == 0)
  return true;
else
  return false;
} 
```

# shell - 每当我开始一个新的 shell 会话时，如何使 TMUX 处于活动状态？

> ID：11068965
> 
> 赞同：64
> 
> 时间：2012-06-17T04:41:15.460
> 
> 标签：shell, session, terminal, tmux

不必`tmux`每次都打字，**我怎么能`tmux`一直用于新的会话窗口**？

因此，如果我没有打开终端窗口然后我打开一个，那么第一个会话如何进行`tmux`？

似乎是`.bashrc`某种东西？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-06-17T05:25:51.867

*警告* **这现在可能“损坏”（使其无法打开终端窗口 - 这不好！）您的 Ubuntu 登录。使用时要格外小心，并确保您在计算机上有第二个管理员帐户，如果您遇到与我相同的问题，您可以登录该帐户。有关更多详细信息和不同的方法，请参阅我的*其他*答案。**

鉴于该警告，最简单的解决方案是将`tmux`调用附加到您的末尾`.bashrc`，例如

```
alias g="grep"
alias ls="ls --color=auto"

# ...other stuff...

if [[ ! $TERM =~ screen ]]; then
    exec tmux
fi 
```

请注意，这`exec`意味着当您打开终端时启动的 bash 进程被*替换*为`tmux`，因此`Ctrl-B D`（即与 tmux 断开连接）实际上关闭了窗口，而不是返回到原始 bash 进程，这可能是您想要的行为？

此外，该`if`语句是必需的（它检测当前 bash 窗口是否已经在 tmux 进程中）否则每次启动 tmux 时，包含的 bash 进程将尝试启动自己的 tmux 会话，从而导致无限数量的嵌套 tmuxen可能，错误，很烦人（也就是说，它看起来很酷）。

* * *

但是，这可能会导致以其他程序不期望的方式运行的风险非常小`bash`，因为运行 bash 可能会导致它变成 tmux 进程，因此修改启动终端仿真器的方式可能会更好.

我使用了一个小的可执行 shell 脚本`~/bin/terminal`（带有`~/bin`in `$PATH`，因此会自动找到），它看起来有点像：

```
#!/bin/sh
exec gnome-terminal -e tmux 
```

（我不使用 gnome-terminal，所以你可能必须删除`exec`，我不确定。）

现在，每当您运行`terminal`scipt 时，您都有一个带有 tmux 的终端。您可以将其添加到您的菜单/桌面/键盘快捷方式以替换默认终端。

（如果您愿意，这种方法还允许您稍后更轻松地自定义有关终端仿真器的其他内容。）

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2015-04-22T10:24:27.713

我最初接受的答案在最近升级后停止在我的 Ubuntu14 系统上工作。

使用任一

```
[ -z "$TMUX" ] && command -v tmux > /dev/null && TERM=xterm-256color && exec tmux 
```

或者

```
[ $TERM != "screen" ] && TERM=xterm-256color && exec tmux 
```

会阻止我甚至无法登录。由于在计算机上进行了第二次管理员登录，我只能解决此问题。

在 Ubuntu（以及在 osx 中）对我的修复是将我的终端程序更改为实际运行 tmux，即

![在此处输入图像描述](../Images/ef7909865541b8cfc37c9c31f65a07a6.png)

我还有

```
[ `uname -s` != Linux ] && exec tmux 
```

作为我的最后`.bashrc`一行，但他现在只适用于我的 Mac OSX 系统。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2014-04-02T19:21:24.800

如果您想要一个 tmux 会话，请将以下内容放入您的 ~/.bashrc for **bash**或 ~/.zshrc for **zsh**：

```
tmux attach &> /dev/null

if [[ ! $TERM =~ screen ]]; then
    exec tmux
fi 
```

这*`tmux attach`条线*是为了确保它是否附加了一个会话，如果没有会话，您将不会收到有关“*无会话*”的警告。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2016-08-28T04:50:26.123

对我来说，我希望每次在远程机器上启动我的 tmux，当我从 tmux 分离或退出时，连接应该自动关闭。在深入研究了这个问题一段时间后，以下代码完全符合我的要求，并且据我所知，它被认为是最优化的。

```
[ -z "$TMUX"  ] && { tmux attach || exec tmux new-session && exit;} 
```

请注意，此行应该是 bashrc 文件中的第一行，以确保首先加载它。我们不能在“tmux attach”前面放置“exec”调用，因为在 exec 用 tmux 替换 bash 进程后，即使没有要附加的会话，连接也会关闭。因此，在我们分离或退出附加会话后，我们需要一个“退出”调用来终止连接。但是在 new-session 命令前面放一个“exec”就可以了，因为这是要执行的最后一个命令。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-01-08T17:48:29.370

**将以下代码行**追加到末尾`.bashrc`，

```
[[ $TERM != "screen" ]] && exec tmux 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2015-06-07T09:23:04.077

我只是把它做成了键盘快捷键（在 Linux Mint 而不是 Ubuntu 中；所以我不确定它是否这么简单）......

* * *

![tmux 终端的自定义快捷方式](../Images/a379b683cf598e09b8fc5a8cea85930e.png)

* * *

可能很难看到，但*自定义快捷方式*是`gnome-terminal --window --maximize -e tmux`. 这将启动一个`gnome-terminal`最大化的新窗口，然后`exec`为`tmux`您使用。

我还有另一个*自定义快捷方式*，可以启动“正常”`gnome-terminal`最大化（没有`-e tmux`.

我觉得这是最好的方式，因为您可以随心所欲地启动任何终端，并且是最可定制的方式。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-02-20T18:18:58.173

我从这个[https://wiki.archlinux.org/index.php/Tmux#Bash](https://wiki.archlinux.org/index.php/Tmux#Bash)开始并对其进行了增强以回收分离的会话并在所有会话都已附加的情况下创建新的会话

```
# .bashrc

case $- in
    *i*)
    if command -v tmux>/dev/null; then
        if [[ ! $TERM =~ screen ]] && [[ -z $TMUX ]]; then
          if tmux ls 2> /dev/null | grep -q -v attached; then
            exec tmux attach -t $(tmux ls 2> /dev/null | grep -v attached | head -1 | cut -d : -f 1)
          else
            exec tmux
          fi
        fi
    fi
    ;;
esac 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-02-01T21:13:15.010

要为登录和 ssh 会话启用 tmux，您可以将其添加到 .bashrc 的末尾：

```
# enable tmux at login
PNAME="$(ps -o comm= $PPID)";
if [ $PNAME == "login" ] || [ $PNAME == "sshd" ] ; then
  exec tmux
fi 
```

该脚本查找 bash shell 的父进程。如果 bash 是从登录或从 ssh 启动的，它将执行 tmux。如果您希望它与 GUI 终端一起使用，您也可以在其中添加它。例如，如果你想在启动 Ubuntu 的 standard 时自动启动 tmux `gnome-terminal`，你可以这样使用：

```
PNAME="$(ps -o comm= $PPID)";
if [ $PNAME == "login" ] || [ $PNAME == "sshd" ] || [ $PNAME == "gnome-terminal" ] ; then
  exec tmux
fi 
```

我已经在 Live Ubuntu Desktop 上测试了上述内容，之后我就可以登录了。这不应该破坏 GUI 登录，除非它调用 login 命令来登录。我不知道有一个 linux GUI 可以做到这一点。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-10-29T15:29:57.340

在 xfce4 中（我正在运行 Fedora 24 XFCE spin，这很棒），我发现最简单的解决方案是编辑面板快捷方式以便它们运行：

xfce4-terminal -e tmux

相同的命令可用于替换键盘应用程序快捷方式。

我之前在我的 .bashrc 中插入了一个 if 语句，但它导致登录失败（只要输入了正确的密码，就会返回登录框）。

Thunar 的 Open Terminal Here 命令的命令略有不同。要更改该转到：

Thunar > 编辑 > 配置自定义操作... > 在此处打开终端 > 编辑按钮，然后替换：

exo-open --working-directory %f --launch TerminalEmulator

使用：xfce4-terminal --working-directory %f -e tmux

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2014-06-12T11:47:23.613

一个单线，还可以确保为 256 色正确设置终端类型：

```
[ -z "$TMUX" ] && export TERM=xterm-256color && exec tmux 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-05-02T09:14:57.477

怎么加

```
# If not running interactively, do not do anything
[[ $- != *i* ]] && return
[[ -z "$TMUX" ]] && exec tmux 
```

到你的 .bashrc。它也适用于 zsh。

取自[https://wiki.archlinux.org/index.php/Tmux#Start_tmux_with_default_session_layout](https://wiki.archlinux.org/index.php/Tmux#Start_tmux_with_default_session_layout)

# jquery - JQuery .load 有效，但 .resize 无效

> ID：11068967
> 
> 赞同：0
> 
> 时间：2012-06-17T04:41:22.247
> 
> 标签：jquery, load, resize

所以这个函数的 onLoad 部分效果很好，但是当我调整窗口大小时，它不会调整高度。仅使用 onLoad ，每次调整窗口大小以使 div 高度均衡时，我都需要刷新页面，不确定为什么 .resize 不起作用。

我犯错了吗？

```
//equalize funciton
function equalHeight(group) {
    tallest = 0;
    group.each(function() {
        thisHeight = $(this).height();
        if(thisHeight > tallest) {
            tallest = thisHeight;
        }
    });
    group.height(tallest);
} 
```

* * *

```
<script type="text/javascript"> 
$(window).load(function() { 
    equalHeight($("#div_right, #div_left, #div_bottom, .border")); 
}); 
</script>
<script type="text/javascript"> 
$(window).resize(function() { 
    equalHeight($("#div_right, #div_left, #div_bottom, .border")); 
});

$(document).ready(function() { 
    equalHeight($("#div_right, #div_left, #div_bottom, .border")); 
}); 
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T05:39:23.283

```
//equalize funciton
function equalHeight(group) {
    tallest = 0;
    group.each(function() {
        thisHeight = $(this).css({'height':'auto'}).height();
        if(thisHeight > tallest) {
            tallest = thisHeight;
        }
    });
    group.height(tallest);
}

$(window).on('load resize',function() { 
    equalHeight($("#div_right, #div_left, #div_bottom, .border")); 
}); 
```

//'on' 函数需要 jQuery 1.7，我猜。

示例FIDDLE：http: [//jsfiddle.net/sabithpocker/xgYBZ/](http://jsfiddle.net/sabithpocker/xgYBZ/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T04:54:18.980

一旦您通过脚本使用内联 css 设置了高度，它们在调整大小之前、期间和之后都将是相同的固定高度……与页面加载时设置的值相同。那个高度仍然是内联的！

如果不存在其他内联 css ，您要么需要使用，要么将`removeAttr('style')`每个元素的内容包装在另一个元素中并检查内部包装的高度并使用该值来设置主要元素。

编辑：试试这个包裹内裤并使用内裤来测试高度的版本

```
//equalize funciton
function equalHeight(group) {
    tallest = 0;
    group.each(function() {
        thisHeight = $(this).find('.inner_wrap').height();
        if(thisHeight > tallest) {
            tallest = thisHeight;
        }
    });
    group.height(tallest);
}
$(document).ready(function() { 
    var $group=$("#div_right, #div_left, #div_bottom, .border")
    $group.wrapInner('<div class="inner_wrap">');   
    equalHeight($group); 
}); 
```

编辑：如果组中各个类的填充不同，则陷阱将是。如果是这种情况，要么需要更改 css，以便填充在内部而不是外部，要么需要在函数中添加额外的数学。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-17T04:47:26.877

将上面所有的 JavaScript 替换为以下内容：

```
<!-- Include jQuery somewhere up here -->
<script type="text/javascript">
  // Equalize function
  function equalHeight(group) {
    tallest = 0;
    group.each(function() {
      thisHeight = $(this).height();
      if(thisHeight > tallest) { tallest = thisHeight; }
    });
    group.height(tallest);
  }

  (function($){

    $(window).resize(function() { 
      equalHeight($("#div_right, #div_left, #div_bottom, .border")); 
    }).resize();

  })(jQuery);
</script> 
```

这行得通吗？

# android - 如何在 Android 的 viewpager 中填充 GridView

> ID：11068968
> 
> 赞同：1
> 
> 时间：2012-06-17T04:43:07.723
> 
> 标签：android

总的来说，我对android开发和开发有点陌生。我有一个自定义布局，它有一个视图寻呼机，它有两个可以水平翻转的页面（它们工作得很好）。在第一页中，我有一个填充页面的网格视图。但是，我尝试了无数不同的方法来让它工作，但网格视图不会填充图像，并且我收到一个空指针异常。

我有一个包含视图寻呼机的布局文件，视图寻呼机的 id 是 fontsviewpager。然后，我有两个页面的两个独立布局，第一个有 gridview。网格视图的 id 是斜体网格。

这是活动：

```
public class CalligraphyFontsActivity extends Activity implements
    View.OnClickListener {
public Typeface calligraphyfont;
public TextView italiclowercase;

@Override
public void onCreate(Bundle savedInstanceState) {
    SharedPreferences getPrefs = PreferenceManager
            .getDefaultSharedPreferences(getBaseContext());
    boolean fullscreen = getPrefs.getBoolean("fullscreen", true);
    if (fullscreen) {
        setTheme(android.R.style.Theme_NoTitleBar_Fullscreen);
    } else {
        setTheme(android.R.style.Theme_NoTitleBar);
    }
    super.onCreate(savedInstanceState);
    setContentView(R.layout.calligraphyfonts2);
    MyPagerAdapter adapter = new MyPagerAdapter();
    ViewPager myPager = (ViewPager) findViewById(R.id.fontsviewpager);
    myPager.setAdapter(adapter);
    myPager.setCurrentItem(0);
    ImageView backhomebutton = (ImageView) findViewById(R.id.backhomebutton);
    ImageView settingspic = (ImageView) findViewById(R.id.settingspic);
    calligraphyfont = Typeface.createFromAsset(getAssets(),
            "fonts/MTCORSVA.TTF");
    settingspic.setOnClickListener(this);
    backhomebutton.setOnClickListener(this);
    GridView gridview = (GridView) findViewById(R.id.italiclcgrid);
    gridview.setAdapter(new ImageAdapter(this));

}

public class ImageAdapter extends BaseAdapter {
    private Context mContext;

    public ImageAdapter(Context c) {
        mContext = c;
    }

    public int getCount() {
        return mThumbIds.length;
    }

    public Object getItem(int position) {
        return null;
    }

    public long getItemId(int position) {
        return 0;
    }

    // create a new ImageView for each item referenced by the Adapter
    public View getView(int position, View convertView, ViewGroup parent) {
        ImageView imageView;
        if (convertView == null) { // if it's not recycled, initialize some
                                    // attributes
            imageView = new ImageView(mContext);
            imageView.setLayoutParams(new GridView.LayoutParams(85,     85));
            imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
            imageView.setPadding(8, 8, 8, 8);
        } else {
            imageView = (ImageView) convertView;
        }

        imageView.setImageResource(mThumbIds[position]);
        return imageView;
    }

    // references to our images
    private Integer[] mThumbIds = { R.drawable.capitalagray,
            R.drawable.capitalbgray, R.drawable.capitalcgray };

}

public void onClick(View v) {
    Intent launchsettings = new Intent(CalligraphyFontsActivity.this,
            Settings.class);
    switch (v.getId()) {
    case R.id.backhomebutton:
        finish();
        break;
    case R.id.settingspic:
        startActivity(launchsettings);
        break;

    }
}

public class MyPagerAdapter extends PagerAdapter {

    public int getCount() {
        return 2;
    }

    public Object instantiateItem(View collection, int position) {
        LayoutInflater inflater = (LayoutInflater) collection.getContext()
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        int resId = 0;
        switch (position) {
        case 0:
            resId = R.layout.italiclc;

            break;
        case 1:
            resId = R.layout.italicuc;
            break;
        }

        View view = inflater.inflate(resId, null);
        if (resId == R.layout.italiclc) {
            TextView italiclowercase = (TextView) view
                    .findViewById(R.id.italiclowercase);
            italiclowercase.setTypeface(calligraphyfont);
        }
        if (resId == R.layout.italicuc) {
            TextView italicuppercase = (TextView) view
                    .findViewById(R.id.italicuppercase);
            italicuppercase.setTypeface(calligraphyfont);

        }
        ((ViewPager) collection).addView(view, 0);

        return view;
    }

    @Override
    public void destroyItem(View arg0, int arg1, Object arg2) {
        ((ViewPager) arg0).removeView((View) arg2);

    }

    @Override
    public void finishUpdate(View arg0) {
        // TODO Auto-generated method stub

    }

    @Override
    public boolean isViewFromObject(View arg0, Object arg1) {
        return arg0 == ((View) arg1);

    }

    @Override
    public void restoreState(Parcelable arg0, ClassLoader arg1) {
        // TODO Auto-generated method stub

    }

    @Override
    public Parcelable saveState() {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public void startUpdate(View arg0) {
        // TODO Auto-generated method stub

    }

    public void onClick(View v) {
        // TODO Auto-generated method stub

    }

}

} 
```

正如我之前所说，我尝试了许多不同的方法来使其工作无济于事。异常来自将图像适配器设置为网格视图的行（第 29 行）。任何可以提供的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T05:04:02.480

> 我有两个页面的两个单独的布局，第一个有gridview。

所以你在以下陈述中有问题：

```
GridView gridview = (GridView) findViewById(R.id.italiclcgrid); 
```

在这里，您尝试`GridView`从`main.xml`. 相反，您应该从定义它的布局文件中引用它。

你的代码是这样的：

```
setContentView(R.layout.calligraphyfonts2);
GridView gridview = (GridView) findViewById(R.id.italiclcgrid); 
```

因此，您要确保您`GridView`在`calligraphyfonts2`布局中定义或尝试使用充气机从另一个布局中引用它。

如果您已`GridView`在 italiclc 布局中定义，则在代码中添加以下更改：

```
settingspic.setOnClickListener(this);
backhomebutton.setOnClickListener(this);
GridView gridview = (GridView) findViewById(R.id.italiclcgrid); // <- Remove this
gridview.setAdapter(new ImageAdapter(this)); // <-- Remove this 
```

并在此处添加：

```
if (resId == R.layout.italiclc) {
  GridView gridview = (GridView) view.findViewById(R.id.italiclcgrid);
  gridview.setAdapter(new ImageAdapter(mContext));

  TextView italiclowercase = (TextView) view.findViewById(R.id.italiclowercase);
  italiclowercase.setTypeface(calligraphyfont);
} 
```

# wpf - WPF将行从一个数据网格拖放到另一个具有相同列的数据网格

> ID：11068970
> 
> 赞同：0
> 
> 时间：2012-06-17T04:43:36.273
> 
> 标签：wpf, datagrid, drag-and-drop

我有要求使用 WPF 应用程序将行从数据网格拖放到另一个数据网格。

任何人都可以帮助提供示例代码或任何链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T06:38:18.243

您可以尝试以下这些教程......互联网上有更多示例。

[http://msdn.microsoft.com/en-us/library/ms996459.aspx](http://msdn.microsoft.com/en-us/library/ms996459.aspx)

[将一个 silverlight Datagrid 的 selectedItems 拖放到另一个中](https://stackoverflow.com/questions/3882458/draganddrop-selecteditems-of-one-silverlight-datagrid-into-another)

[http://www.dotnetcurry.com/ShowArticle.aspx?ID=677](http://www.dotnetcurry.com/ShowArticle.aspx?ID=677)

[http://www.blog.ingenuitynow.net/Silverlight+4+Drag+And+Drop+DataGrids+With+Access+To+The+Data+Being+Dropped.aspx](http://www.blog.ingenuitynow.net/Silverlight+4+Drag+And+Drop+DataGrids+With+Access+To+The+Data+Being+Dropped.aspx)

[http://social.msdn.microsoft.com/Forums/en/wpf/thread/36c1160f-c63b-41ca-91f9-a38c934ee83b](http://social.msdn.microsoft.com/Forums/en/wpf/thread/36c1160f-c63b-41ca-91f9-a38c934ee83b)

# ruby-on-rails - Rails 3.2 更新条件

> ID：11068972
> 
> 赞同：0
> 
> 时间：2012-06-17T04:43:52.980
> 
> 标签：ruby-on-rails, ruby, activerecord, ruby-on-rails-3.2

我有一个 rails 模型，我想通过计算该属性的当前值加上我作为参数发送的值来更新属性。以下将更新记录并覆盖属性的现有值

```
def self.mark_receipt(qty_received,client_id,product_code)
  Product.where(:client_id => client_id, :product_code => product_code)
         .update_all(:qty_on_hand => :qty_received,
                     :qty_received => qty_received)
end 
```

我想要更像这样的东西，但下面的语法不起作用。

```
def self.mark_receipt(qty_received,client_id,product_code)
  Product.where(:client_id => client_id, :product_code => product_code)
         .update_all(:qty_on_hand => :qty_on_hand + qty_received,
                     :qty_received => :qty_received + qty_received)
end 
```

编辑

与以下答案非常接近，但这是 sql 在后台运行的内容

```
Product Load (0.5ms)  SELECT `products`.* FROM `products` 
                      WHERE `products`.`client_id` = 1 AND `products`.`product_code` = '88-89c'
  SQL (0.6ms)         UPDATE `products` 
                      SET `qty_on_hand` = 165, `qty_received` = 165 
```

代替

```
 UPDATE `products`
 SET `qty_on_hand` = 165, `qty_received` = 165
 WHERE `products`.`client_id` = 1 AND `products`.`product_code` = '88-89c' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-17T05:08:27.410

我相信这将基于文档 [http://apidock.com/rails/ActiveRecord/Relation/update_all](http://apidock.com/rails/ActiveRecord/Relation/update_all)

```
Product.update_all(['qty_on_hand = qty_on_hand + ? , qty_received = qty_received + ?', qty_received, qty_received],
                    {:client_id => client_id, :product_code => product_code)}) 
```

请注意，这将在数据库中进行添加操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T04:52:10.463

由于您正在更新所有并且手头的数量可能会发生变化，因此您应该循环查看 where 子句的结果：

```
def self.mark_receipt(qty_received,client_id,product_code)
  Product.where(:client_id => client_id, :product_code => product_code).each do |p|
    p.update_attributes(:qty_on_hand=> p.qty_on_hand + qty_received, :qty_received => p.qty_received + qty_received)
  end
end 
```

我没有对此进行测试，但这应该为您指明正确的方向。

# windows - vs 2010: 错误 LNK2028: 未解析的令牌 (0A000342) "extern "C" int __stdcall

> ID：11068973
> 
> 赞同：8
> 
> 时间：2012-06-17T04:44:40.870
> 
> 标签：windows, winforms, visual-studio-2010

以下代码取自[此处](http://simplesamples.info/Windows/EnumWindows.php)。当我在 Windows 7 上工作时，我删除了所有 Windows NT 部分。

我复制了这段代码并在 Visual Studio 2010 中运行（新项目-> VC++->CLR->CLR 控制台...）。但它给出了许多未解决的 extern 'c' 错误，如下所示。我犯了什么错？

```
#define STRICT  1 

#include <windows.h>
#include <iostream>
using namespace std;

BOOL CALLBACK EnumWindowsProc(HWND hWnd, LPARAM lParam) {
DWORD dwThreadId, dwProcessId;
HINSTANCE hInstance;
char String[255];
HANDLE hProcess;
if (!hWnd)
return TRUE;        // Not a window
if (!::IsWindowVisible(hWnd))
return TRUE;        // Not visible
if (!SendMessage(hWnd, WM_GETTEXT, sizeof(String), (LPARAM)String))
return TRUE;        // No window title
hInstance = (HINSTANCE)GetWindowLong(hWnd, GWL_HINSTANCE);
dwThreadId = GetWindowThreadProcessId(hWnd, &dwProcessId);
hProcess = OpenProcess(PROCESS_ALL_ACCESS, FALSE, dwProcessId);
cout << hWnd << ' ' << dwProcessId << '\t' << String << '\t';
cout << "(None)\n";
CloseHandle(hProcess);
return TRUE;
}

int main(int argc, char *argv[], char *envp[]) {
EnumWindows(EnumWindowsProc, NULL);
return 0;
} 
```

**这给出了以下错误（以及其他类似的未解决的外部 C 错误）**

```
 1>wndowfind.obj : error LNK2028: unresolved token (0A000342) "extern "C" int __stdcall       
 EnumWindows(int (__stdcall*)(struct HWND__ *,long),long)"     3
 (?EnumWindows@@$$J18YGHP6GHPAUHWND__@@J@ZJ@Z) referenced in function "int __cdecl 
 main(int,char * * const,char * * const)" (?main@@$$HYAHHQAPAD0@Z)

 1>wndowfind.obj : error LNK2028: unresolved token (0A000346) "extern "C" unsigned long  
 __stdcall GetWindowThreadProcessId(struct HWND__ *,unsigned long *)"    
 (?GetWindowThreadProcessId@@$$J18YGKPAUHWND__@@PAK@Z) referenced in function "int __stdcall 
 EnumWindowsProc(struct HWND__ *,long)" (?EnumWindowsProc@@$$FYGHPAUHWND__@@J@Z)

 1>wndowfind.obj : error LNK2028: unresolved token (0A000347) "extern "C" long __stdcall 
 GetWindowLongW(struct HWND__ *,int)" (?GetWindowLongW@@$$J18YGJPAUHWND__@@H@Z) referenced in 
 function "int __stdcall EnumWindowsProc(struct HWND__ *,long)" 
 (?EnumWindowsProc@@$$FYGHPAUHWND__@@J@Z)

 1>wndowfind.obj : error LNK2019: unresolved external symbol "extern "C" int __stdcall  
 EnumWindows(int (__stdcall*)(struct HWND__ *,long),long)" 
 (?EnumWindows@@$$J18YGHP6GHPAUHWND__@@J@ZJ@Z) referenced in function "int __cdecl 
 main(int,char * * const,char * * const)" (?main@@$$HYAHHQAPAD0@Z)

 1>c:\users\afnan\documents\visual studio 2010\Projects\wndowfind\Debug\wndowfind.exe : fatal 
 error LNK1120: 10 unresolved externals
 1>
 1>Build FAILED. 
```

**更新**

通过包含库（如答案中所建议的那样），我能够成功运行该程序。但我无法理解为什么只有字符串的第一个字符打印不是完整的，如输出所示：

```
00010060 2652   S       (None)
002502B2 5820   C       (None)
00090402 5160   w       (None)
00050392 5160   w       (None)
00060292 3520   F       (None)
000C02BA 3520   M       (None)
0001021A 3736   E       (None)
00040018 896    I       (None)
00010170 3580   A       (None)
0002003E 2684   D       (None)
00030316 4956   N       (None)
000202DE 3736   D       (None)
0001031E 2652   S       (None)
000100EA 2652   P       (None) 
```

在上面的输出中，S 实际上是“开始”，C 是“控制台”等我通过 spy++ 工具确认。如何打印完整的字符串而不是第一个字符？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-17T05:40:33.467

默认情况下，CLR 项目不包括标准 Windows 库，例如`user32.lib`.

编辑您的项目属性，找到 Linker Inputs 选项，然后添加`kernel32.lib user32.lib advapi32.lib`Win32 代码所需的常用库。

# jquery - 关于默认值的 Jquery

> ID：11068981
> 
> 赞同：0
> 
> 时间：2012-06-17T04:46:07.910
> 
> 标签：jquery

使用 jquery，如果文本框包含默认值并且“isrequired”值为“是”，如何将这些元素的颜色更改为红色？

```
<input type="text" value="Name" isrequired="Yes">
<input type="text" value="Address" isrequired="No">
<input type="text" value="Age" isrequired="Yes"> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-17T04:52:11.087

更改您的输入 html 以添加一个额外的 data-* 属性来存储默认值

```
<input type="text" value="Name" data-default="Name" isrequired="Yes">
<input type="text" value="Address" data-default="Address" isrequired="No">
<input type="text" value="Age" data-default="Age" isrequired="Yes"> 
```

jQuery

```
$('input[isrequired=Yes]').each(function(){
if($(this).val()==$(this).data("default"))
{$(this).css('color', 'red');}
}) 
```

* * *

**更新**：使用对我来说很新的 defaultvalue 属性

```
$('input[isrequired=Yes]').each(function(){
  if (this.value == this.defaultValue) {$(this).css('color', 'red'); }

}); 
```

更好，更干净。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-17T04:57:53.063

如果值是用户键入的默认值，则以下将文本字段文本更改为红色。

**JavaScript：（**需要 jQuery）

```
$('input[type=text][isrequired=Yes]').on("change", function(){
  if ($(this).val() == this.defaultValue) { $(this).addClass("req"); }
  else { $(this).removeClass("req"); }
}); 
```

**CSS：**

```
.req { color:red } 
```

# assembly - 关于ret的汇编代码

> ID：11068985
> 
> 赞同：2
> 
> 时间：2012-06-17T04:47:38.637
> 
> 标签：assembly

我在使用gdb调试我的代码时，遇到了这个问题。gdb显示如下：

```
(gdb) ni
0x08048ca5 in getbufn ()
(gdb) disas 0x08048c98
Dump of assembler code for function getbufn:
0x08048c89 <+0>:     push   %ebp
0x08048c8a <+1>:     mov    %esp,%ebp
0x08048c8c <+3>:     sub    $0x208,%esp
0x08048c92 <+9>:     lea    -0x200(%ebp),%eax
0x08048c98 <+15>:    mov    %eax,(%esp)
0x08048c9b <+18>:    call   0x8048bf4 <Gets>
0x08048ca0 <+23>:    mov    $0x1,%eax
=> 0x08048ca5 <+28>:    leave  
0x08048ca6 <+29>:    ret    
End of assembler dump.
(gdb) p /x $ebp
$1 = 0x55683950
(gdb) p /x $esp
$2 = 0x55683748
(gdb) ni
0x08048ca6 in getbufn ()
(gdb) p /x $ebp
$3 = 0x4030201
(gdb) p /x $esp
$4 = 0x55683954
(gdb) x /1xw $esp
0x55683954:     0x55683750
(gdb) si
Cannot access memory at address 0x4030205
(gdb) 
```

0x08048ca6中的代码是“ret”，意思是jmp(%esp), addl 0x4,%esp 所以我想知道为什么gdb的最后一句是“Cannot access memory at address 0x4030205” 是不是应该执行地址0x55683750的指令代码?

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T05:03:17.653

你好 -

```
 ; Enter subroutine: build stack frame
0x08048c89 <+0>:     push   %ebp            ; Save the old buffer pointer
0x08048c8a <+1>:     mov    %esp,%ebp       ; Save the current stack pointer
0x08048c8c <+3>:     sub    $0x208,%esp     ; Allocate space for local variables

0x08048c92 <+9>:     lea    -0x200(%ebp),%eax ; call "gets()" subroutine
0x08048c98 <+15>:    mov    %eax,(%esp)
0x08048c9b <+18>:    call   0x8048bf4 <Gets>

0x08048ca0 <+23>:    mov    $0x1,%eax       ; eax <= 1

=> 0x08048ca5 <+28>:    leave  ; we *think* we're leaving the subroutine...but
0x08048ca6 <+29>:    ret       ; in fact we crash at this point 
```

结论：

“gets()”中的某些东西破坏了你的堆栈，所以你*不能*从你的子程序中返回。

建议：

不要使用“gets()”。这不安全。大多数编译器实际上会*警告*您它不安全。改用“fgets()”（或任何数量的其他替代方法来输入字符串）：

[http://cboard.cprogramming.com/c-programming/137352-gets-unsafe-method-alternatives.html](http://cboard.cprogramming.com/c-programming/137352-gets-unsafe-method-alternatives.html)

恕我直言...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T23:20:46.670

“=>”指向*即将*执行的指令，在这种情况下是“离开”。并且“leave”被定义为首先设置`esp`为`ebp`，然后是 pop `ebp`。一旦`esp`设置为`ebp`（即`0x4030201`，一个错误的地址，并且看起来可疑地像是从字节 1、2、3、4 生成的），弹出失败。

您可能想查看`ebp`调用 . 之前和之后的值`Gets()`。我的猜测是调用会`Gets()`导致该寄存器被修改，这不应该像`ebp`通常被调用者保存那样发生。

请注意，虽然`Gets()`使用 512 字节的堆栈缓冲区调用可能是不可取的，但在这种情况下，缓冲区溢出不会导致崩溃。缓冲区溢出可能会`ret`跳转到其他地方，但不会导致`ebp`被修改。

# python - 如何将 Counter 对象转换为 dict？

> ID：11068986
> 
> 赞同：54
> 
> 时间：2012-06-17T04:47:59.463
> 
> 标签：python, dictionary

数据框：

```
pair = collections.defaultdict(collections.Counter) 
```

例如

```
pair = {'doc1':  {'word1':4, 'word2':3}, 
        'doc2':  {'word1':2, 'word3':4},
        'doc3':  {'word2':2, 'word4':1},
         ...} 
```

我想保留数据框但改变这部分的类型`{'word1':4, 'word2':3}` `{'word1':2, 'word3':4}``...`它现在是 a`Counter`我需要一个`dict`.

我试过这个来获取数据`pair`，但我不知道如何`dict`为每个文档创建一个：

```
new_pair = collections.defaultdict(collections.Counter)
for doc, tab in testing.form.items():
    for word, freq in tab.items():
        new_pair[doc][word] = freq 
```

我不想改变输出。我只需要**在每个文档中，数据类型是`dict`，而不是`Counter`。**

* * *

## 回答 #1

> 赞同：85
> 
> 时间：2012-06-17T05:00:18.447

A`Counter`已经是一个`dict`- 或者它的一个子类。但是，如果您出于某种原因确实需要一个`dict`，那么它是一个单行：

```
>>> c = Counter(word1=4, word2=3)
>>> c
Counter({'word1': 4, 'word2': 3})
>>> dict(c)
{'word1': 4, 'word2': 3} 
```

任何映射（任何表现得像字典的东西）都可以传递给`dict`，您将获得`dict`具有相同内容的 a 。无需迭代它来自己构建它。

这为您提供了一个循环，主体中有一行而不是嵌套循环。但任何形式的代码：

```
 thing = a new empty collection
 for elem in old_thing:
    Add something to do with elem to thing 
```

通常可以使用生成器表达式或列表、集合或字典理解在一行中完成。我们正在构建一个`dict`，所以一个[dict 理解](http://www.python.org/dev/peps/pep-0274/)（示例部分是您最感兴趣的部分）似乎很可能。我将把它作为练习留给读者。;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-17T05:00:29.343

也许您正在寻找：

```
>>> from collections import defaultdict
>>> pair = defaultdict(dict)
>>> pair[3][2]='hello'
>>>
>>> pair
defaultdict(<type 'dict'>, {3: {2: 'hello'}})
>>>
>>> pair[3]
{2: 'hello'}
>>> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-17T05:10:45.227

```
new_pair = {} # simple dict at the top level
for doc, tab in testing.form.items():
    for word, freq in tab.items():
        # top-level values is word counters
        new_pair[doc].setdefault(word, Counter()) += freq 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-17T05:15:55.443

`Counter`也是`dict`一个。但取决于你的需要，也许下面的代码是你想要的。

```
new_pair ={}
for doc, tab in pari.items():
    new_pair[doc] = {}
    for word, freq in tab.items():
        new_pair[doc][word] = freq 
```

`new_pair`dict是你想要的。祝你好运！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-28T05:28:34.900

由于 Counter 已经是一个字典。
除了@lvc answer之外，我还想提出这个建议。

```
>>> c = Counter(word1=4, word2=3)
>>> c
Counter({'word1': 4, 'word2': 3})
>>> isinstance(c,dict)
True
>>> {**c}
{'word1': 4, 'word2': 3} 
```

这允许您添加更多键并组合多个字典或计数器

```
>>> {**c, 'total': sum(c.values())}
{'word1': 4, 'word2': 3, 'total': 7} 
```

# c# - 线程或游标 c# 加载 CSV 文件

> ID：11068987
> 
> 赞同：-2
> 
> 时间：2012-06-17T04:48:25.660
> 
> 标签：c#

我有一个代码。但是，由于我的知识有限。我研究并意识到我可以在等待项目加载时使用等待光标和后台线程。在这个例子中如何实现使用游标或线程？

[http://imageshack.us/photo/my-images/703/screenshot20120617at243.png/](http://imageshack.us/photo/my-images/703/screenshot20120617at243.png/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T04:54:42.490

在处理 CSV 文件时，我强烈建议使用 3rd 方库 - [FileHelpers](http://filehelpers.sourceforge.net/)是我以前使用过的库，并且认为它在解析 Excel 文件方面非常出色。在执行工作/解析方面，它将取决于您使用的 .NET 框架的版本以及它是 Web 应用程序还是胖客户端应用程序。

假设您的应用程序是 .NET 2.0+ 和 Winforms / WPF 应用程序，您最好使用`BackgroundWorker`该类。Google 上有大量使用它的示例，可以在此处找到 MSDN 文档：http: [//msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)

# javascript - Backbone.js - 使用 parse 而不调用 fetch

> ID：11068989
> 
> 赞同：16
> 
> 时间：2012-06-17T04:48:54.427
> 
> 标签：javascript, backbone.js

[在页面加载时，我通过这种技术](http://backbonejs.org/#FAQ-bootstrap)将我的数据引导到我的集合中。这很好用，但我遇到了一个问题，我有子模型也需要转换。

例如，我返回一个名为 Book 的 JSON 集合，每个 book 数组包含 10-20 个模型，这些模型本身称为 Pages。如果我尝试直接访问 Pages，则会收到`[object][object]`错误消息，因为 Backbone 无法确定它是什么类型的对象。

以前当我使用 时`fetch`，我会通过使用包含`parse`操作的集合来解决这个问题。在`parse`我会做类似的事情：

```
Collection_Books = Backbone.Collection.extend({
    model: Model_Book,
    parse: function (response) {
        response.Pages = new Collection_Pages(response.Pages);
        return response;
    }
}); 
```

现在我直接访问数据而不是使用`fetch`，文档暗示我不再有权访问该`parse`方法。

如果我`fetch`在页面加载时没有使用或调用服务器，如何使用 Books > Pages 示例转换子模型？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-02-19T05:32:03.320

不确定这是否是新的，但看起来您也可以`parse`将构造函数的 options 参数的属性设置为 true，从而告诉构造函数使用您的 parse 方法：

```
modelInstance = new MyModel(obj, {parse: true}); 
```

[http://backbonejs.org/#Model-constructor](http://backbonejs.org/#Model-constructor)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-17T05:24:38.033

**更新**：这个答案现在已经过时了，有关更多最新信息，请参阅[uglymunky 的答案。](https://stackoverflow.com/a/14950519/479863)

* * *

您是对的，`parse`仅[指定在期间调用，`fetch`](http://backbonejs.org/#Collection-parse)因此当您从原始数据构建集合时不会调用它。

但是，由于您控制用于引导集合的原始数据，因此您可以`parse`自己调用集合：

```
var c = new YourCollection(
    YourCollection.prototype.parse([
        // attribute data goes here...
    ])
); 
```

演示：http: [//jsfiddle.net/ambiguous/kdaZ3/](http://jsfiddle.net/ambiguous/kdaZ3/)

您的`parse`方法（集合和模型）不应该关心它们的调用上下文，因此直接从原型调用它们应该没问题。

# http - 玩！框架的 WS 函数似乎正在删除我的 GET 变量

> ID：11068995
> 
> 赞同：0
> 
> 时间：2012-06-17T04:50:24.537
> 
> 标签：http, scala, playframework

我对 Play 很陌生！框架（和 Scala 本身，真的），但我似乎在实现一个（常见的？）函数时碰壁了。我的代码如下：

```
package controllers

import play.api._
import play.libs._
import play.api.mvc._

object Application extends Controller {
     def jsonStringMap(str: String) =
      util.parsing.json.JSON.parseFull(str) match {
         case Some(m: Map[_,_]) => m collect {
               // If this doesn't match, we'll just ignore the value
               case (k: String, v: String) => (k,v)
            } toMap
         case _ => Map[String,String]()
      }

  def index = Action {
    Ok(views.html.index("Your new application is ready."));
  }

  def view_mix(id: Int) = Action {
    Ok("")
  }

  def view_popular = Action {
    val whydoyouhateme: F.Promise[play.libs.WS.Response] = WS.url("http://8tracks.com/mixes/1002?format=json&api_key=10889794345788a1eee1110e06b5aa5405d76170").get()
    Ok(whydoyouhateme.get().getBody())
  }
} 
```

我关心的行 (val whydoyouhateme....) 应该，如果逻辑可以服务，返回与我将浏览器指向[http://8tracks.com/mixes/1002?format=json&api_key=10889794345788a1eee1110e06b5aa5405d76170](http://8tracks.com/mixes/1002?format=json&api_key=10889794345788a1eee1110e06b5aa5405d76170)相同。不幸的是，情况并非如此。如果我去[http://8tracks.com/mixes/1002](http://8tracks.com/mixes/1002)（这只是一个重定向），它给了我我会看到的东西。

我在这里错过了什么吗？我必须在其他地方指定 GET 变量吗？这真的让我发疯了，Eclipse IDE 在提供帮助方面做得并不多（代码完成再次让我失望）。

对所有解决方案开放，如有必要，我很乐意引入一个新库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T04:53:35.110

FML！去搞清楚。我缺少一个相当重要的规范（setQueryParameter(string, string)）。

固定的线：

```
val whydoyouhateme: F.Promise[play.libs.WS.Response] = WS.url("http://8tracks.com/mixes/1002").setQueryParameter("format", "json").setQueryParameter("api_key", "10889794345788a1eee1110e06b5aa5405d76170").get() 
```

希望其他人可能会发现这很有用。

# android - 如何使用加速度计了解我的 Android 设备的移动速度？

> ID：11068996
> 
> 赞同：3
> 
> 时间：2012-06-17T04:50:39.160
> 
> 标签：android, performance, math, accelerometer, rate

我是在 Android 上使用加速度计编程的新手。

我想知道我的设备在我的 Android 上使用加速度计向任何方向移动的速度有多快。我在谷歌上搜索并找到了根据设备移动的方向做不同事情的代码，但是没有什么可以谈论根据我的设备移动的速度做不同的事情。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-17T04:58:36.223

加速度计仅测量速度的变化率。（这是加速度的定义。）因此，用它来判断速度的唯一方法是知道某个时间 t_0 的实际速度 V_0，然后连续记录 dV_i = A_i*(t_i - t_(i-1)) 时间 t_1 ,t_2,... 其中 A_i 是 t_i 处的加速度。那么 t_n 处的速度为 V_0 + sum_(i=1,n)(dV_i)。

这被称为整合，这就是艾萨克牛顿（以及其他人）出名的原因。

这种计算很容易出错。我会说这甚至不值得为了好玩而尝试。

测量速度的更有用的方法是位置变化（来自位置传感器）除以时间。

# spring - Spring3 @PostConstruct 在tomcat启动后变为空，并在尝试在服务类上使用时获取空对象

> ID：11068997
> 
> 赞同：0
> 
> 时间：2012-06-17T04:50:49.550
> 
> 标签：spring, tomcat, spring-mvc, null, postconstruct

大家好，我想做的是在@Value和@PostConstruct的帮助下用一些属性预填充一个CustomDetail对象，然后在服务上使用这个预填充的对象，但是当对象到达服务类时，它已经为空了......

更新！！！！这是正确的代码

```
@Service
public Class CustomDetail(){

 ProxyObject prx; 
 ...
 @Value("#{myProperties.proxy.address}")
 String propertyPrx;

 @PostConstruct
 private void setProperty(){
  prx= new ProxyObject(propertyPrx);
 }
 .....
 ....
} 
```

现在 setProperty() 方法有效地正确完成了它的工作，如果我在调试时启动 Tomcat，我可以看到 propertyPrx 很好，并且 Object prx 不为空......所以 new ProxyObject(propertyPrx) 被调用没有任何问题，此时一切美好的。现在当我移动到服务部分并尝试使用它时

```
public Class ServiceClient(){

 ....
 ...
 @Autowired
 CustomDetail cDetail;

 ....
 ...more code
  cDetail.someMethod(a,n,y);   //<---cDetail Object is null so I get a NullPointerException

} 
```

任何想法为什么会发生这种情况以及为什么 @PostConstruct 仅在 Tomcat 首次启动以及我尝试注入服务类时才被初始化，就像它从未被初始化一样，感谢您的帮助......我是使用 SpringMVC 3.1 Tomcat

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-17T06:56:27.017

尝试在 CustomDetail 上使用 @Component，然后使用

`<context:component-scan base-package=”your.package” />`