# StackOverflow 问答 12110000-12110999

# ajax - 确定ActionMethod内部发生错误后，如何使Ajax.BeginForm的OnFailure方法运行？

> ID：12110000
> 
> 赞同：0
> 
> 时间：2012-08-24T13:06:20.697
> 
> 标签：ajax, asp.net-mvc-3

我有一个`ajax.beginform()`这样的：

```
@using (Ajax.BeginForm("Create_Product", "Admin", new AjaxOptions() { OnFailure = "alert(\"Error !!!\")", HttpMethod = "post"}))
{
//blah blah
} 
```

它将表单数据发送到一个`ActionMethod`名为 Create_Product... 在此内部`ActionMethod`，在我将数据作为新的“产品”保存到数据库之前 - 在 try/catch 内部 - 我检查插入的产品是否已经存在。如果已经存在，我需要返回视图**并**触发/运行`OnFailure`ajax 表单的方法:)

可能吗 ？它是怎么做的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T13:19:51.497

去掉 Ajax Beginform 并使用正常形式

```
@using(Html.Beginform("Create_Product","Admin"))
{
  <input type="text" name="productName" />
  <input type="submit" id="saveNewProduct" />
} 
```

现在还有一些 javascript 来处理我们的 Ajax Saving

```
<script type="text/javascript">
  $(function(){

       $("#saveNewProduct").click(function(e){
          var item=$(this);
          e.preventDefault();

          $.post("@url.Action("Create_Product","Admin")",
                                item.closest("form").serialize(),function(data){
                if(data.Status=="Exist")
                { 
                   alert("The Product already exist");
                }
                else if(data.Status=="Success")
                {
                  alert("Saved Successfully");   
                }

           });  

       });    
  });

</script> 
```

假设您的 Action 方法`JSON`如果成功插入，则返回以下格式的返回

```
{   "Status": "Success"   } 
```

如果产品已经存在，它返回这个

```
{  "Status": "Exist"  } 
```

所以你的 Action 方法看起来像这样

```
[HttpPost]
public ActionResult Create_Product(YourViewModel model)
{
  try
  {
     //check product exist, if yes return the below commented JSON 
     // return Json(new { Status="Exist" });
    //else , Insert the data and Return Succes in JSON
     // return Json(new { Status="Success" });
  }
  catch(Exception ex)
  {
     // log error
    return Json(new { Status="Error" });
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-13T03:48:11.963

您可以在操作方法中引发异常，也可以设置 HTTP 响应的 StatusCode。必须使用将处理或显示错误消息的 javascript 函数名称设置 OnFailure 属性。

# python - 如何摆脱大量的函数调用？

> ID：12110004
> 
> 赞同：0
> 
> 时间：2012-08-24T13:06:28.733
> 
> 标签：python, recursion, decorator

如何摆脱大量的函数调用？下面是递归函数的一个例子：

```
def factorial(n):
    if n <= 1:
      return 1
    else:
      return n * factorial(n - 1) 
```

我听说你可以很容易地用装饰器做到这一点，但我不知道如何使用它们

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T13:07:10.847

假设您已经仔细检查了您的算法并消除了任何冗余调用，您可以尝试以*迭代*方式重写您的函数（即使用循环而不是递归）。

递归通常可以以一种很好的方式表达对问题的解决方案，但是它相当消耗内存（在堆栈上反复保存状态）并且由于所有函数调用而不那么快。我看到它的主要好处在于它的表现力。

[记忆化](http://en.wikipedia.org/wiki/Memoization)是另一种选择，因此您无需重新计算（调用函数），而是首先查看您之前是否已经计算（并存储）了一个值，然后使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T16:52:25.180

您正在寻找[尾调用](http://en.wikipedia.org/wiki/Tail-recursive_function)优化，这基本上是一种将递归程序转换为迭代而不重写它们的技术。例如，如果您使用 n = 1000 调用阶乘函数，Python 将无法抱怨“超出最大递归深度”。但是，当您将函数重写为尾递归时：

```
def tail_factorial(n, result=1):
    if n <= 1:
        return result
    else:
        return fac(n - 1, result * n) 
```

然后用“蹦床”来称呼它：

```
def trampoline_factorial(n):

    def fac(n, result=1):
        if n <= 1:
            return result
        else:
            return lambda: fac(n - 1, result * n)

    f = fac(n)
    while callable(f):
        f = f()
    return f 
```

你可以评价1000！没有任何问题。

尾调用优化确实可以在 Python 中使用装饰器实现自动化，参见例如[这里](http://code.activestate.com/recipes/496691-new-tail-recursion-decorator/)

# ios - 如何将方向数据写入 UIImage iOS SDK

> ID：12110006
> 
> 赞同：4
> 
> 时间：2012-08-24T13:06:29.130
> 
> 标签：ios, camera, uiimage, orientation, uiimagepickercontroller

我有一个问题，我从 imagePicker（相机不是库）获得了 UIImage，但是当我使用 [UIImageJPEGRepresentation writeToFile: atomically:] 将其写入文件时，我丢失了方向数据（所有图像都是横向的），我使用了一些带有图像的代码转换，但每张图像大约需要 1,5 - 2 秒，我的问题是如何不松动方向？也许我可以将它写入 EXIF 数据？谢谢帮助。

**编辑：** 感谢 Jonathan Cichon，现在我得到了 UIImagePickerControllerMediaMetadata 的图像方向（方向 = 6），但如何将其存储到 jpg 文件？（我再次用 [UIImageJPEGRepresentation writeToFile: atomically:] proc 保存了文件）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T13:31:40.457

查看[这篇文章](https://stackoverflow.com/questions/5125323/problem-setting-exif-data-for-an-image)以获取有关如何存储 EXIF 数据的信息。如果我没记错的话，您可以按原样使用 UIImagePickerControllerMediaMetadata。至少你应该在这本词典中找到所有必要的方向信息来创建你的 EXIF 数据。

查看[链接帖子](https://stackoverflow.com/questions/5125323/problem-setting-exif-data-for-an-image)的评分最高的答案，并将第一行替换为

```
NSData * jpeg = UIImageJPEGRepresentation(yourImage, 1); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T13:30:08.653

好的，我在简单的谷歌搜索中发现[如下](http://blog.logichigh.com/2008/06/05/uiimage-fix/)链接

```
UIImage *scaleAndRotateImage(UIImage *image)
{
    int kMaxResolution = 320; // Or whatever

    CGImageRef imgRef = image.CGImage;

    CGFloat width = CGImageGetWidth(imgRef);
    CGFloat height = CGImageGetHeight(imgRef);

    CGAffineTransform transform = CGAffineTransformIdentity;
    CGRect bounds = CGRectMake(0, 0, width, height);
    if (width > kMaxResolution || height > kMaxResolution) {
        CGFloat ratio = width/height;
        if (ratio > 1) {
            bounds.size.width = kMaxResolution;
            bounds.size.height = bounds.size.width / ratio;
        }
        else {
            bounds.size.height = kMaxResolution;
            bounds.size.width = bounds.size.height * ratio;
        }
    }

    CGFloat scaleRatio = bounds.size.width / width;
    CGSize imageSize = CGSizeMake(CGImageGetWidth(imgRef), CGImageGetHeight(imgRef));
    CGFloat boundHeight;
    UIImageOrientation orient = image.imageOrientation;
    switch(orient) {

        case UIImageOrientationUp: //EXIF = 1
            transform = CGAffineTransformIdentity;
            break;

        case UIImageOrientationUpMirrored: //EXIF = 2
            transform = CGAffineTransformMakeTranslation(imageSize.width, 0.0);
            transform = CGAffineTransformScale(transform, -1.0, 1.0);
            break;

        case UIImageOrientationDown: //EXIF = 3
            transform = CGAffineTransformMakeTranslation(imageSize.width, imageSize.height);
            transform = CGAffineTransformRotate(transform, M_PI);
            break;

        case UIImageOrientationDownMirrored: //EXIF = 4
            transform = CGAffineTransformMakeTranslation(0.0, imageSize.height);
            transform = CGAffineTransformScale(transform, 1.0, -1.0);
            break;

        case UIImageOrientationLeftMirrored: //EXIF = 5
            boundHeight = bounds.size.height;
            bounds.size.height = bounds.size.width;
            bounds.size.width = boundHeight;
            transform = CGAffineTransformMakeTranslation(imageSize.height, imageSize.width);
            transform = CGAffineTransformScale(transform, -1.0, 1.0);
            transform = CGAffineTransformRotate(transform, 3.0 * M_PI / 2.0);
            break;

        case UIImageOrientationLeft: //EXIF = 6
            boundHeight = bounds.size.height;
            bounds.size.height = bounds.size.width;
            bounds.size.width = boundHeight;
            transform = CGAffineTransformMakeTranslation(0.0, imageSize.width);
            transform = CGAffineTransformRotate(transform, 3.0 * M_PI / 2.0);
            break;

        case UIImageOrientationRightMirrored: //EXIF = 7
            boundHeight = bounds.size.height;
            bounds.size.height = bounds.size.width;
            bounds.size.width = boundHeight;
            transform = CGAffineTransformMakeScale(-1.0, 1.0);
            transform = CGAffineTransformRotate(transform, M_PI / 2.0);
            break;

        case UIImageOrientationRight: //EXIF = 8
            boundHeight = bounds.size.height;
            bounds.size.height = bounds.size.width;
            bounds.size.width = boundHeight;
            transform = CGAffineTransformMakeTranslation(imageSize.height, 0.0);
            transform = CGAffineTransformRotate(transform, M_PI / 2.0);
            break;

        default:
            [NSException raise:NSInternalInconsistencyException format:@"Invalid image orientation"];

    }

    UIGraphicsBeginImageContext(bounds.size);

    CGContextRef context = UIGraphicsGetCurrentContext();

    if (orient == UIImageOrientationRight || orient == UIImageOrientationLeft) {
        CGContextScaleCTM(context, -scaleRatio, scaleRatio);
        CGContextTranslateCTM(context, -height, 0);
    }
    else {
        CGContextScaleCTM(context, scaleRatio, -scaleRatio);
        CGContextTranslateCTM(context, 0, -height);
    }

    CGContextConcatCTM(context, transform);

    CGContextDrawImage(UIGraphicsGetCurrentContext(), CGRectMake(0, 0, width, height), imgRef);
    UIImage *imageCopy = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return imageCopy;
} 
```

# c# - 在 .NET 中设置打印机的“KeepPrintedDocuments”属性

> ID：12110010
> 
> 赞同：8
> 
> 时间：2012-08-24T13:06:56.463
> 
> 标签：c#, .net, printing, wmi

这是我们正在尝试做的事情：

我们想要一种不显眼的方式来获取客户在他们的计算机上打印的所有内容（我们所有的客户都运行 POS 系统并专门使用 Windows XP）并将其发送给我们，我们已经决定最好的方法是创建 ac # 向我们发送他们的假脱机文件的应用程序，我们已经可以轻松解析这些文件。

但是，这需要将“保留所有打印的文档”设置为 true。我们希望在我们的应用程序中而不是手动执行此操作，原因如下：我们的一些（数百）客户，因为没有更好的词，是愚蠢的。我们不想强迫他们在控制面板里乱来……我们的技术支持人员已经够忙了。

这是我遇到问题的地方：

```
string searchQuery = "SELECT * FROM Win32_Printer";
ManagementObjectSearcher searchPrinters = new ManagementObjectSearcher(searchQuery);
ManagementObjectCollection printerCollection = searchPrinters.Get();

foreach (ManagementObject printer in printerCollection)
{
    PropertyDataCollection printerProperties = printer.Properties;
    foreach (PropertyData property in printerProperties)
    {
        if (property.Name == "KeepPrintedJobs")
        {
            printerProperties[property.Name].Value = true;
        }
    }
} 
```

据我从几个小时的 WMI 研究中可以看出，这应该将每台打印机的 KeepPrintedJobs 属性设置为 true ......但它不起作用。一旦 foreach 循环结束，KeepPrintedJobs 就会被设置回 false。我们更喜欢使用 WMI 而不是在注册表中乱七八糟，但我不能永远花时间尝试使这项工作。关于缺少什么的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-06T17:04:41.603

`Put()`尝试在 上添加调用以`ManagementObject`显式保留更改，如下所示：

```
foreach (ManagementObject printer in printerCollection)
{
    PropertyDataCollection printerProperties = printer.Properties;
    foreach (PropertyData property in printerProperties)
    {
        if (property.Name == "KeepPrintedJobs")
        {
            printerProperties[property.Name].Value = true;
        }
    }
    printer.Put();
} 
```

希望有帮助。

# extjs4 - 在 ExtJS 4 TreePanel 中锁定列？

> ID：12110015
> 
> 赞同：2
> 
> 时间：2012-08-24T13:07:12.923
> 
> 标签：extjs4

有谁知道如何在 ExtJS 4.1.1 中启用对 TreePanel 列的锁定？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-15T10:44:54.053

对于要锁定的特定列，您可以在列配置中添加locked：true，对于整个网格使用enableLocking：在网格配置中

# c - 读取已保存笔记的 FILEOBJECT

> ID：12110016
> 
> 赞同：0
> 
> 时间：2012-08-24T13:07:28.220
> 
> 标签：c, lotus-domino, lotus

我参与使用 C API 与 Lotus Notes 和 Lotus Domino 交互。从 NSF 中读取现有注释时，我遇到了问题。具体来说，读取 TYPE_OBJECT 字段，更具体地说，读取 $FILE 字段（尽管我确信如果我有其他字段，所有 TYPE_OBJECT 字段都会失败）。

我正在使用 NSFItemInfo 获取 $FILE 字段上的摘要数据（所以我不需要保存的文件，我需要有关它的信息，例如它的大小、名称等......）。

如果我在内存中创建注释，提交它，然后读取 $FILE 字段，一切正常。如果我更改单元测试以读取现有注释（而不是在内存中创建它），Lotus PANICS 会出现 Invalid Handle Lookup 消息。

因此，当我从头开始创建笔记与打开已经创建的笔记时，我感觉加载这些字段有些不同。即使阅读已经创建的注释，我自己创建的代码也会给我同样的错误，所以我认为我正确地创建了注释。

我已经探索了 NSFNoteOpenExt 的标志选项，并尝试使用 OPEN_xxx 中描述的每个可能的标志打开 Note，但我总是会出现恐慌，除非我使用 OPEN_ABSTRACT 或 OPEN_NOOBJECTS 打开 Note。不过，那些没有出错的原因是因为他们打开 Note 时根本没有 $FILE 字段，所以当我看到该字段是否存在时，我得到一个 false 并且在 TYPE_OBJECT 字段中读取的代码永远不会执行。

有什么我想念的想法吗？

我会提供代码，但我实际上是使用 .NET 互操作来完成所有这些，并且代码分布在多个文件等中......如果您有任何问题，请提出，我会提供尽可能多的详细信息我可以。

*   克雷格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T18:03:54.253

我弄清楚了这个问题。这是因为在 C# 中使用互操作时，不能调用 C 宏。 `OSLockBlock`被定义为一个宏到另一个宏到一个函数。本质上，它锁定`BlockId.Pool`指针，然后将指针递增`BlockId.BlockHandle`. 我错误地将宏逻辑解释为首先递增`BlockId.Pool`，`BlockId.BlockHandle`然后锁定。

本质上：

```
Lock(BlockId.Pool)+BlockId.BlockHandle Vs Lock(BlockId.Pool+BlockId.BlockHandle) 
```

有趣的是，后者在创建带有新附件的新笔记时会起作用。我终于也弄清楚了，`BlockId.BlockHandle`这样做时总是为零。所以这就是为什么它总是有效的。

# android - 用于大数据的 Android ListView 分页

> ID：12110026
> 
> 赞同：1
> 
> 时间：2012-08-24T13:08:23.483
> 
> 标签：android, pagination, android-listview

我正在做一个从服务器加载大量数据的项目。我必须获取该数据并将其与图像一起排列在列表视图中。我正面临大数据的问题，随着值数量的增加，我的应用程序需要花费太多时间来加载。

我该如何为此进行分页。我试过[这个](http://benjii.me/2010/08/endless-scrolling-listview-in-android/)，但我不知道该怎么做。任何人都请帮我做这件事。

提前致谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T13:54:41.207

有几种解决方案可用于所谓的“无尽”列表。你链接到一个。这是我的：[https](https://github.com/commonsguy/cwac-endless) ://github.com/commonsguy/cwac-endless 。IIRC，还有一些漂浮在周围。

# sql-server - TSQL - 选择内的While循环？

> ID：12110029
> 
> 赞同：9
> 
> 时间：2012-08-24T13:08:29.343
> 
> 标签：sql-server, sql-server-2008, tsql, while-loop

在 SQL 服务器中

好的，所以我正在使用一个数据库表，其中行可以有父行，然后可以有自己的父行。我需要选择根“行”。我不知道做到这一点的最佳方法。

有一个名为 ParentId 的字段，它将行链接到具有该 ID 的行。当 ParentId = 0 时，它是根行。

这是我现在的查询：

```
SELECT Releases.Name,WorkLog.WorkLogId 

FROM WorkLog,Releases
WHERE
Releases.ReleaseId = WorkLog.ReleaseId
and WorkLogDateTime >= @StartDate
and WorkLogDateTime <= @end 
```

* * *

我真的不需要子版本的版本名称，我只想要根版本名称，所以我想选择这样的 While 循环的结果：

```
WHILE (ParentReleaseId != 0)
BEGIN
@ReleaseId = ParentReleaseId
END

Select Release.Name
where Release.RealeaseId = @ReleaseId 
```

我知道语法很糟糕，但希望我能让您了解我想要实现的目标。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-24T13:20:11.420

这是一个示例，可能很有用：

此查询正在获取树的较低元素，并搜索到父​​母的父母。就像我的表中有 4 个级别 -> 类别 7->5、5->3、3-> 1。如果我将其分配给 5，它将找到 1，因为这是三个级别中的最高级别。

（更改最后一个选择，您可以让所有的父母都在路上。）

```
DECLARE @ID int

SET @ID = 5;

WITH CTE_Table_1
(
  ID,
  Name,
  ParentID
)
AS(
  SELECT 
   ID,
   Name,
   ParentID
  FROM Table_1
  WHERE ID = @ID

 UNION ALL

 SELECT 
  T.ID,
  T.Name,
  T.ParentID
 FROM Table_1 T
 INNER JOIN CTE_Table_1 ON CTE_Table_1.ParentID = T.ID
)

SELECT * FROM CTE_Table_1 WHERE ParentID = 0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T13:23:40.253

像这样的东西

```
with cte as
(
  select id,parent_id from t where t.id=@myStartingValue
  union all
  select t.id,t.parent_id
  from cte
  join t on cte.parent_id = t.id where cte.parent_id<>0
 )
select * 
from cte
join t on cte.id=t.id where cte.parent_id = 0 
```

和小提琴：[http ://sqlfiddle.com/#!3/a5fa1/1/0](http://sqlfiddle.com/#!3/a5fa1/1/0)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T14:30:33.530

使用 Andras 方法，我编辑了最终选择以直接给我根版本的 ID

```
WITH cte_Releases
( 
  ReleaseId, 
  ParentReleaseID 
) 
AS( 
  SELECT  
   ReleaseId, 
   ParentReleaseID 
  FROM Releases
  Where ReleaseId = 905

 UNION ALL 

 SELECT  
  R.ReleaseId, 
  R.ParentReleaseID 
 FROM Releases R
 INNER JOIN cte_Releases ON cte_Releases.ParentReleaseID = R.ReleaseId
) 

SELECT max(ReleaseId) as ReleaseId, min(ReleaseId) as RootReleaseId FROM cte_Releases 
```

我现在的问题是我想遍历所有@ID（该代码中的 905）并将每条记录加入结果

# java - 从 Maven 构建中排除测试

> ID：12110032
> 
> 赞同：29
> 
> 时间：2012-08-24T13:08:44.397
> 
> 标签：java, maven, junit, maven-3

当我运行`maven clean install`它时，它总是执行所有测试，`src/test/java`有没有办法跳过所有测试，只是运行简单的构建而不进行任何测试。

我希望我的测试在，`src/test/java`但我想告诉 maven 不要执行它们。我一直在互联网上寻找类似的东西，但我没有找到答案。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-08-24T13:13:25.470

尝试：

```
mvn clean install -DskipTests 
```

来源[在这里](https://maven.apache.org/surefire/maven-surefire-plugin/examples/skipping-tests.html)。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-08-24T13:19:46.473

你也可以选择使用

```
mvn install -Dmaven.test.skip 
```

来自[Maven](http://maven.apache.org/plugins/maven-surefire-plugin/examples/skipping-test.html)网站：

> 如果你绝对必须，你也可以使用 maven.test.skip 属性来跳过编译测试。maven.test.skip 受到 Surefire、Failsafe 和 Compiler Plugin 的认可。

如前所述，您甚至不会编译测试源。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-24T13:12:55.917

从[http://maven.apache.org/plugins/maven-surefire-plugin/examples/skipping-test.html](http://maven.apache.org/plugins/maven-surefire-plugin/examples/skipping-test.html)：

```
<project>
  [...]
  <build>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-surefire-plugin</artifactId>
        <version>2.12.2</version>
        <configuration>
          <skipTests>true</skipTests>
        </configuration>
      </plugin>
    </plugins>
  </build>
  [...]
</project> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-24T13:19:55.803

我最喜欢的管理测试运行时间的方法是创建一个名为的 Maven 变量`skip-tests`并将其默认为`true`. 然后您可以像这样使用该变量：

```
 <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-surefire-plugin</artifactId>
    <version>2.12.2</version>
    <configuration>
      <skipTests>${skip-tests}</skipTests>
    </configuration>
  </plugin> 
```

这样`-Dskip-tests=false`，当您不希望它们运行时，您可以在构建时传入变量。*当您进行集成和*单元测试，并且希望仅使用一个变量运行或禁用两组测试时，这非常有用。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-24T13:12:21.237

用这个

> mvn clean install -DskipTests

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-15T10:41:50.113

我们使用 Surefire 进行单元测试，使用[Failsafe](http://maven.apache.org/plugins/maven-failsafe-plugin/)进行集成测试。

跳过所有测试：

```
mvn clean package -DskipTests 
```

要跳过故障安全测试：

```
mvn clean package -DskipIT 
```

要跳过 Surefire，您当然需要在编译测试类之后显式调用 Failsafe 插件的集成测试目标：

```
mvn clean test-compile failsafe:integration-test 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-01-06T11:44:33.400

这里的所有答案都是正确的。准确地说，

**-DskipTests** - 编译测试类，但跳过运行它们，
**-Dmaven.test.skip=true** - 跳过编译测试文件，也不运行它们

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-08-24T13:42:07.463

我认为最简单的是：`mvn clean package -Dmaven.skip.tests=true`

我认为这是使用的方法，因为它不会让您更改 pom，因此不必对项目进行更改。

# java - Hibernate ConstraintViolationException 可能是由于循环方案

> ID：12110037
> 
> 赞同：1
> 
> 时间：2012-08-24T13:09:05.417
> 
> 标签：java, mysql, hibernate, annotations

我有三个实体A，B，C。

A有很多B和C，B有很多C。我想有双向关系。

我在 Hibernate 中映射了所有这些：

```
@Entity
    @Table(name="TABLE_A")
    class A{

        @Id
        @GeneratedValue
        private Integer a_id;

        @ManyToOne
        C c; 

        @OneToMany
        List<B> bs;
    }

    @Entity
    @Table(name="TABLE_B")
    class B{

        @Id
        @GeneratedValue
        private Integer b_id;

        @ManyToOne
        A a; // inverse

        @ManyToOne
        C c;
    }

    @Entity
    @Table(name="TABLE_C")
    class C{

        @Id
        @GeneratedValue
        private Integer c_id;

        @ManyToMany(mappedBy="c")
        List<B> b; // inverse

        @ManyToMany(mappedBy="c")
        List<A> a; //inverse

    } 
```

我使用 SchemaUpdate 来获取在 MySQL 中生成的表。问题如下：

```
2012-08-24 14:57:15,437 [main] DEBUG org.hibernate.tool.hbm2ddl.SchemaUpdate - alter table TABLE_A add index FKCE3C1BF0B8CF4F47 (a_id), add constraint FKCE3C1BF0B8CF4F47 foreign key (a_id) references TABLE_A (a_id) 
```

将约束添加到 A 到自身 - 这可能是由于 C->A 关系。映射有什么问题？

我创建了一个简单的测试文件：

```
 @Test
        public void tests() throws Exception {
            Logger l = Logger.getLogger("org.hibernate.tool.hbm2ddl");
            l.

setLevel(Level.DEBUG);

        //Hibernate.enableCreationDebug();
        A a = new A();

        SessionFactory sf = configureSessionFactory();
        Session session = sf.openSession();
        Transaction tx = session.beginTransaction();
        try{

            session.save(a);
            tx.commit();
        }catch(Exception e){
            tx.rollback();
            throw e;
        }finally{
            session.close();
        }

        session = sf.openSession();
        tx = session.beginTransaction();
        try{

            session.delete(a);
            tx.commit();
        }catch(Exception e){
            tx.rollback();
            throw e;
        }finally{
            session.close();
        }

    }

private static SessionFactory configureSessionFactory() throws HibernateException {
        Configuration configuration = new Configuration();

        String DB_USER_NAME = "kiri";
        String DB_USER_PWD = "kiri";
        String JDBC_CONNECTION_STRING = "jdbc:mysql://localhost/kiri";

        configuration
                .addAnnotatedClass(HibernateCyclicTest.A.class)
                .addAnnotatedClass(HibernateCyclicTest.B.class)
                .addAnnotatedClass(HibernateCyclicTest.C.class)

                .setProperty("hibernate.dialect", "org.hibernate.dialect.MySQL5InnoDBDialect")
                .setProperty("hibernate.connection.driver_class", "com.mysql.jdbc.Driver")
                .setProperty("hibernate.connection.url", JDBC_CONNECTION_STRING)
                .setProperty("hibernate.connection.username", DB_USER_NAME)
                .setProperty("hibernate.connection.password", DB_USER_PWD);

        // Create or update the schema to match our objects
        org.hibernate.tool.hbm2ddl.SchemaUpdate schemaUpdate = new SchemaUpdate(configuration);
        schemaUpdate.execute(false,/* update schema */true);
        ServiceRegistry serviceRegistry = new ServiceRegistryBuilder().applySettings(configuration.getProperties())
                .buildServiceRegistry();
        SessionFactory sessionFactory = configuration.buildSessionFactory(serviceRegistry);
        return sessionFactory;
    } 
```

这是输出：

```
 2012-08-24 15:03:01,719 [main] INFO  org.hibernate.tool.hbm2ddl.SchemaUpdate - HHH000228: Running hbm2ddl schema update
2012-08-24 15:03:01,719 [main] INFO  org.hibernate.tool.hbm2ddl.SchemaUpdate - HHH000102: Fetching database metadata
2012-08-24 15:03:01,923 [main] INFO  org.hibernate.tool.hbm2ddl.SchemaUpdate - HHH000396: Updating schema
2012-08-24 15:03:02,025 [main] INFO  java.sql.DatabaseMetaData - HHH000262: Table not found: TABLE_A
2012-08-24 15:03:02,025 [main] INFO  java.sql.DatabaseMetaData - HHH000262: Table not found: TABLE_A_TABLE_B
2012-08-24 15:03:02,026 [main] INFO  java.sql.DatabaseMetaData - HHH000262: Table not found: TABLE_B
2012-08-24 15:03:02,026 [main] INFO  java.sql.DatabaseMetaData - HHH000262: Table not found: TABLE_C
2012-08-24 15:03:02,027 [main] INFO  java.sql.DatabaseMetaData - HHH000262: Table not found: TABLE_A
2012-08-24 15:03:02,027 [main] INFO  java.sql.DatabaseMetaData - HHH000262: Table not found: TABLE_A_TABLE_B
2012-08-24 15:03:02,028 [main] INFO  java.sql.DatabaseMetaData - HHH000262: Table not found: TABLE_B
2012-08-24 15:03:02,029 [main] INFO  java.sql.DatabaseMetaData - HHH000262: Table not found: TABLE_C
2012-08-24 15:03:02,030 [main] DEBUG org.hibernate.tool.hbm2ddl.SchemaUpdate - create table TABLE_A (a_id integer not null auto_increment, c_c_id integer, primary key (a_id)) ENGINE=InnoDB
2012-08-24 15:03:02,051 [main] DEBUG org.hibernate.tool.hbm2ddl.SchemaUpdate - create table TABLE_A_TABLE_B (TABLE_A_a_id integer not null, bs_b_id integer not null, unique (bs_b_id)) ENGINE=InnoDB
2012-08-24 15:03:02,062 [main] DEBUG org.hibernate.tool.hbm2ddl.SchemaUpdate - create table TABLE_B (b_id integer not null auto_increment, a_a_id integer, c_c_id integer, primary key (b_id)) ENGINE=InnoDB
2012-08-24 15:03:02,070 [main] DEBUG org.hibernate.tool.hbm2ddl.SchemaUpdate - create table TABLE_C (c_id integer not null auto_increment, primary key (c_id)) ENGINE=InnoDB
2012-08-24 15:03:02,078 [main] DEBUG org.hibernate.tool.hbm2ddl.SchemaUpdate - alter table TABLE_A add index FKCE3C1BF0B8CF4F47 (a_id), add constraint FKCE3C1BF0B8CF4F47 foreign key (a_id) references TABLE_A (a_id)
2012-08-24 15:03:02,087 [main] DEBUG org.hibernate.tool.hbm2ddl.SchemaUpdate - alter table TABLE_A add index FKCE3C1BF066FAB663 (c_c_id), add constraint FKCE3C1BF066FAB663 foreign key (c_c_id) references TABLE_C (c_id)
2012-08-24 15:03:02,097 [main] DEBUG org.hibernate.tool.hbm2ddl.SchemaUpdate - alter table TABLE_A_TABLE_B add index FK64E4EEA2F8F999F6 (TABLE_A_a_id), add constraint FK64E4EEA2F8F999F6 foreign key (TABLE_A_a_id) references TABLE_A (a_id)
2012-08-24 15:03:02,107 [main] DEBUG org.hibernate.tool.hbm2ddl.SchemaUpdate - alter table TABLE_A_TABLE_B add index FK64E4EEA2C26A7AD5 (bs_b_id), add constraint FK64E4EEA2C26A7AD5 foreign key (bs_b_id) references TABLE_B (b_id)
2012-08-24 15:03:02,123 [main] DEBUG org.hibernate.tool.hbm2ddl.SchemaUpdate - alter table TABLE_B add index FKCE3C1BF1B8CFC3A7 (b_id), add constraint FKCE3C1BF1B8CFC3A7 foreign key (b_id) references TABLE_B (b_id)
2012-08-24 15:03:02,141 [main] DEBUG org.hibernate.tool.hbm2ddl.SchemaUpdate - alter table TABLE_B add index FKCE3C1BF163901C65 (a_a_id), add constraint FKCE3C1BF163901C65 foreign key (a_a_id) references TABLE_A (a_id)
2012-08-24 15:03:02,151 [main] DEBUG org.hibernate.tool.hbm2ddl.SchemaUpdate - alter table TABLE_B add index FKCE3C1BF166FAB663 (c_c_id), add constraint FKCE3C1BF166FAB663 foreign key (c_c_id) references TABLE_C (c_id)
2012-08-24 15:03:02,161 [main] INFO  org.hibernate.tool.hbm2ddl.SchemaUpdate - HHH000232: Schema update complete
2012-08-24 15:03:02,583 [main] WARN  org.hibernate.engine.jdbc.spi.SqlExceptionHelper - SQL Error: 1451, SQLState: 23000
2012-08-24 15:03:02,583 [main] ERROR org.hibernate.engine.jdbc.spi.SqlExceptionHelper - Cannot delete or update a parent row: a foreign key constraint fails (`kiri`.`table_a`, CONSTRAINT `FKCE3C1BF0B8CF4F47` FOREIGN KEY (`a_id`) REFERENCES `TABLE_A` (`a_id`)) 
```

这是堆栈：

```
 org.hibernate.exception.ConstraintViolationException: Cannot delete or update a parent row: a foreign key constraint fails (`kiri`.`table_a`, CONSTRAINT `FKCE3C1BF0B8CF4F47` FOREIGN KEY (`a_id`) REFERENCES `TABLE_A` (`a_id`))
    at org.hibernate.exception.internal.SQLExceptionTypeDelegate.convert(SQLExceptionTypeDelegate.java:74)
    at org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:49)
    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:125)
    at org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:110)
    at org.hibernate.engine.jdbc.internal.proxy.AbstractStatementProxyHandler.continueInvocation(AbstractStatementProxyHandler.java:129)
    at org.hibernate.engine.jdbc.internal.proxy.AbstractProxyHandler.invoke(AbstractProxyHandler.java:81)
    at $Proxy13.executeUpdate(Unknown Source)
    at org.hibernate.engine.jdbc.batch.internal.NonBatchingBatch.addToBatch(NonBatchingBatch.java:56)
    at org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:3134)
    at org.hibernate.persister.entity.AbstractEntityPersister.delete(AbstractEntityPersister.java:3337)
    at org.hibernate.action.internal.EntityDeleteAction.execute(EntityDeleteAction.java:100)
    at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:362)
    at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:354)
    at org.hibernate.engine.spi.ActionQueue.executeActions(ActionQueue.java:280)
    at org.hibernate.event.internal.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:326)
    at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:52)
    at org.hibernate.internal.SessionImpl.flush(SessionImpl.java:1214)
    at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:403)
    at org.hibernate.engine.transaction.internal.jdbc.JdbcTransaction.beforeTransactionCommit(JdbcTransaction.java:101)
    at org.hibernate.engine.transaction.spi.AbstractTransactionImpl.commit(AbstractTransactionImpl.java:175)
    at com.kireego.tests.HibernateCyclicTest.tests(HibernateCyclicTest.java:59)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at org.junit.runners.BlockJUnit4ClassRunner.runNotIgnored(BlockJUnit4ClassRunner.java:79)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:71)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException: Cannot delete or update a parent row: a foreign key constraint fails (`kiri`.`table_a`, CONSTRAINT `FKCE3C1BF0B8CF4F47` FOREIGN KEY (`a_id`) REFERENCES `TABLE_A` (`a_id`))
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:39)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:27)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:513)
    at com.mysql.jdbc.Util.handleNewInstance(Util.java:411)
    at com.mysql.jdbc.Util.getInstance(Util.java:386)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1040)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4074)
    at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4006)
    at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2468)
    at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2629)
    at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2719)
    at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:2155)
    at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:2450)
    at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:2371)
    at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:2355)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.hibernate.engine.jdbc.internal.proxy.AbstractStatementProxyHandler.continueInvocation(AbstractStatementProxyHandler.java:122)
    ... 39 more 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T12:18:56.493

我只是删除了`mappedBy`创建额外表但解决了问题的属性。

# c# - 如何隐藏 Dock 面板名称我需要 Dock 面板名称在顶部，但在停靠时它也显示在底部.. 我必须从底部隐藏它

> ID：12110049
> 
> 赞同：0
> 
> 时间：2012-08-24T13:09:50.090
> 
> 标签：c#, winforms

我有 3 个 Dock 面板

前任

```
 |pn1 O |  pn2 O | pn3 O| 
```

pn1 pn2 pn3 是面板名称和 O - 这些面板的图标...我只想显示图标而不是图像..我可以使用哪个属性...

我在运行时有面板文本，名称图像我必须隐藏名称并仅显示图标..是否有任何属性可以在运行时隐藏名称...在 Dockpannel 或 DockManager 中如何在停靠时隐藏 DockPannel 窗口的名称。 .?

我需要顶部的 Dock 面板名称，但在停靠时它也显示在底部.. 我必须将它隐藏在底部

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T13:15:39.103

您可以尝试使用此代码

```
panel1.BackgroundImage = Image.FromFile(pathIcon1);
panel2.BackgroundImage = Image.FromFile(pathIcon2);
panel3.BackgroundImage = Image.FromFile(pathIcon3); 
```

# python - 在 Django ManyToMany 关系中存储同一项目的多个实例

> ID：12110053
> 
> 赞同：0
> 
> 时间：2012-08-24T13:09:58.967
> 
> 标签：python, django, orm, django-models

我有一个代表简单购物清单的 Django 模型，如下所示（为简洁起见截断）

```
class Meal(models.Model):
    name = models.CharField(max_length = 200)
    ingredients = models.ManyToManyField(Ingredient)

class GroceryList(models.Model):
    name = models.CharField(max_length = 200)
    meals = models.ManyToManyField(Meal)
    ingredients = models.ManyToManyField(Ingredient) 
```

这允许 a`GroceryList`包含`Meal`对象和`Ingredient`对象。（这样，当一顿饭需要时，列表可以将成分组合在一起。）

**问题是**，我希望 a`GroceryList`能够包含`Meal`两次或更多相同的内容。什么是最有效的解决方案？

我曾考虑将类包装`Meal`在一个对象 (' `MealContainer`') 中，该对象同时维护基础`Meal`和数量，但这似乎有点笨拙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T13:16:01.740

也许考虑一个带有字段的[`through`模型。](https://docs.djangoproject.com/en/1.4/topics/db/models/#intermediary-manytomany)`quantity`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T14:19:03.083

我不知道这是否是最有效的方式，但您可以将您的膳食清单分解为每日菜单。这通常是我妻子计划我们的购物清单的方式。

```
class Meal(models.Model):
    MEAL_TYPE = (
        (u'B','Breakfast'),
        (u'2','Second Breakfast'),
        (u'E','Elevenses'),
        (u'L','Luncheon'),
        (u'A','Afternoon Tea'),
        (u'D','Dinner'),
        (u'S','Supper'),
    )
    name = models.CharField(max_length = 200)
    ingredients = models.ManyToManyField(Ingredient)
    meal_type = models.CharField(max_length=2, choices=MEAL_TYPE)

class DailyMenu(models.Model):
    date = models.DateField()
    meal = models.ManyToManyField(Meal)

class GroceryList(models.Model):
    name = models.CharField(max_length = 200)
    meal_menus = models.ManyToManyField(DailyMenu)
    ingredients = models.ManyToManyField(Ingredient) 
```

# postgresql - 如何在 postgresql 视图中获取两个日期时间字段的天数和小时数差异？

> ID：12110055
> 
> 赞同：3
> 
> 时间：2012-08-24T13:09:59.427
> 
> 标签：postgresql, datetime

我有如下表中的数据：

```
 **start_date**                         **end_date**
---------------                      -----------------
2011-06-27 13:24:45.137417          2011-06-28 05:34:26.54939
2011-09-30 09:09:00.501381          2011-10-03 23:38:46.479824 
```

预期结果如下：

```
Diff
-------
0.16
3.14 
```

其中小数点前为“天”，小数点后为“小时”

我尝试使用 extract('epoch' from (end_date-start_date))/(3600*24)

但它以 100 的格式给出“小时”值，即第一条记录为 0.673395971909722，第二条记录为 3.60400438012731

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T13:21:10.687

[请参阅文档](http://www.postgresql.org/docs/9.1/static/functions-formatting.html)中的格式化函数。

```
SELECT to_char(end_date - start_date, 'D.HH24') AS diff FROM your_table; 
```

```
0.16
3.14

```

希望能帮助到你。

# extjs4.1 - 在 ExtJS 4 TreePanel 列上使用 qtip？

> ID：12110061
> 
> 赞同：0
> 
> 时间：2012-08-24T13:10:43.077
> 
> 标签：extjs4.1

在我使用的列定义中`tooltip: 'some text'`，但没有显示出来。只有在我切换到之后，`tooltipType: 'title'`这是特定于浏览器的错误还是 ExtJS 4.1.1 中的错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T16:35:35.083

[默认](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.column.Column-cfg-tooltipType) `tooltipType`值为`qtip`. _ 要显示您需要致电

```
Ext.QuickTips.init(); 
```

很可能在`application.launch()`方法中。

# mysql - Mediawiki 更新脚本

> ID：12110064
> 
> 赞同：0
> 
> 时间：2012-08-24T13:10:56.827
> 
> 标签：mysql, mediawiki

我继承了旧的（1.4 版）Mediawiki 安装。我想更新它，但这样做有很多麻烦。

我下载了 Mediawiki 1.19 并将其放在一个新目录中。我将旧的 LocalSettings.php 文件放在这个新目录中，仅更改 $wgScriptPath 变量以反映新目录名称。我没有更改数据库名称、用户或密码。

当我尝试运行**`update.php`**脚本时，我得到了这个：

数据库连接错误：无法通过套接字连接到本地 MySQL 服务器`'/var/lib/mysql/mysql.sock' (2) (localhost)`。

我已经广泛搜索了这个。这是一个很常见的错误，但大多数解决方案都涉及 MySQL 没有运行的情况，或者需要在全局级别（即整个站点）更改有关套接字的某些内容。这两种情况都不适用，因为网站上还有很多其他的 MySQL 东西运行良好。

如果用户凭据有问题，我尝试创建一个全新的用户并将该用户添加到 LocalSettings.php，但我仍然遇到同样的错误。

任何提示将非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T17:53:21.973

看来我最初下载的 Mediawiki 1.19 不知何故损坏或不完整。我重新下载了软件，一切正常。

# asp.net-mvc - 提交时不返回值的文本框

> ID：12110065
> 
> 赞同：2
> 
> 时间：2012-08-24T13:10:59.513
> 
> 标签：asp.net-mvc, razor, html.textboxfor

我在 asp.net mvc 4 中工作。我有一个包含 2 个必填字段的登录模型：电子邮件和密码。我正在使用 @Html.TextboxFor 来获取正确的值。这适用于我的密码，但我似乎无法让它适用于该帐户。

这是我的代码：

.cshtml

```
@model IntraNoviUserLoginModel
@using (Html.BeginForm("Login", "Home"))
{
    @Html.TextBoxFor(m => m.Email)
    @Html.TextBoxFor(m => m.Password, new { id = "password", type = "password" })
} 
```

控制器：

```
[HttpPost]
public ActionResult Login(IntraNoviUserLoginModel model)
{
    if (ModelState.IsValid)
    {
        //Code
    }
} 
```

模型：

```
public class IntraNoviUserLoginModel
{
    [Required]
    public string Email { get; set; }

    [Required]
    [DataType(DataType.Password)]
    public string Password { get; set; }    
} 
```

我没有将电子邮件文本框设置为 enabled=false。它应该始终保持启用状态。

我希望我们能一起解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T13:33:37.600

我通过使用 EditorFor 而不是 TextboxFor 解决了这个问题。我不知道为什么它突然起作用，也许有人可以在评论中启发我？

# html - 滚动后HTML背景重复被切断

> ID：12110066
> 
> 赞同：0
> 
> 时间：2012-08-24T13:11:01.977
> 
> 标签：html, css

我试图制作一个菜单，但它运行良好，但是当我缩小窗口并滚动时，背景不会扩展。例子：

![全屏视图](../Images/8340e8ea2461d965d6ead50b49ae3290.png) ![在此处输入图像描述](../Images/634f58beb588fa49229807e5cb7ae5f2.png)

第一个图像是全屏的，第二个图像是在我滚动页面之后。如您所见，背景没有延伸。下面是我的CSS：

```
body{
padding: 0px;
margin: 0px;
font-family:Arial, Helvetica, sans-serif;
background-color: #717070;
 }
.header{
background-image: url("img/bgsmall.png");
height: 100px;
background-repeat: repeat-x;
min-width: 1000px;

}
.logo{
margin-left:320px;
float:left;
 }
#menu{
position: relative;
height: 100px;
text-align: center;
width:auto;
margin-left:600px;
min-width:1000px;
}
#menu ul{
list-style: none;
padding: 0;
margin: 0;
position:relative;
}
#menu li{
float: left;
display: inline;
padding-top:35px;
position:relative;
text-transform:uppercase;
}

#menu li a{
text-decoration: none;
padding-left: 32px;
padding-right: 32px;
font-size: 15px;
font-family: arial;
color: #ffffff;
text-align:center;
}
#menu li a:visited{
color: #ffffff;
}
#menu li a:hover{
color: #D86C00;
} 
```

代码

```
 <html>
  <head>

  <link href="stylesheet.css" rel="stylesheet" type="text/css" />
  </head>
 <body>
  <div class="header">

<div id="menu">
    <ul>
        <li><a href="#">page1</a></li>
        <li><a href="#">page2</a></li>
        <li><a href="#">page3</a></li>
        <li><a href="#">page4</a></li>
    </ul>
    </div></div>

 </body>
 </html> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T13:26:19.427

添加`position:absolute;`到您的`.header`班级。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T13:32:18.200

您可以通过两种方式解决此问题：

1-

```
body{
padding: 0px;
margin: 0px;
font-family:Arial, Helvetica, sans-serif;
background-image: url("img/bgsmall.png");
background-repeat: repeat-x;
background-color: #717070;
 }
.header{
height: 100px;
} 
```

2-

删除“最小宽度：1000px；” 从标题样式

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T13:28:11.030

这是你的最小宽度：1000px；在导致此问题的#menu 上。在不知道你想要实现什么布局的情况下，很难说你应该做什么来替换它，但是解决这个问题可以解决这个问题

# mysql - 插入多个表：mysql

> ID：12110067
> 
> 赞同：1
> 
> 时间：2012-08-24T13:11:02.790
> 
> 标签：mysql, sql

假设我们有 v1、v2、v3 和 v4 值，其中 v1 和 v2 将被插入到表 t1 中；v3 和 v4 放入表 t2。
我们通常可以使用：

```
INSERT INTO t1 VALUES(v1,v2)
INSERT INTO t2 VALUES(v3,v4) 
```

但是，如果我们想在单个语句中做到这一点？

就像是`INSERT INTO t1 VALUES(v1,v2), t2 VALUES(v3,v4)`

有人让我使用事务来实现这一点，但我不知道这是否适用于 MyISAM。

我正在使用 MySql 数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T13:56:05.930

抱歉，每个 INSERT 语句只有一个表：http: [//dev.mysql.com/doc/refman/5.5/en/insert.html](http://dev.mysql.com/doc/refman/5.5/en/insert.html)

您可以使用[ALTER TABLE](http://dev.mysql.com/doc/refman/5.1/en/alter-table.html)将引擎更改为 InnoDB ，但请确保它不会破坏任何内容：

```
ALTER TABLE t1 ENGINE = InnoDB; 
```

最后一种可能性（如果您真的不想使用事务）是对数据进行*非规范化*——将 t1 和 t2 合并到同一个表中。但我首先推荐 InnoDB。

# html - IE8 没有概述文本框

> ID：12110069
> 
> 赞同：0
> 
> 时间：2012-08-24T13:11:09.573
> 
> 标签：html, css

在 IE8 中，当我像这样设置输入字段的边框时：

```
input {
  border: 0;
} 
```

输入字段周围没有所需的边框，但是只要焦点位于输入上，我就想要像 Chrome 或 Safari 中的标准轮廓。现在，我可以通过伪类添加边框`:focus`，但我不希望伪类应用于已经有标准轮廓的浏览器。

**我怎样才能做到这一点？**

编辑：我刚刚发现`:focus`在 IE8 中不起作用。我必须添加一个 DOCTYPE 才能让它工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T13:15:21.227

要专门针对 ie8，您可以使用[此方法](http://paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/)

将 ie8 类添加到您的 html 标记并从中继承。

在你的 html 标签上

```
<!--[if IE 8]>     <html class="ie ie8 lte9 lte8"> <![endif]--> 
```

你的 CSS

```
.ie8 input:focus {
  //your styles
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T13:15:36.233

您可以在条件 CSS 样式表中包含该样式：

```
<!--[if IE]>
<link rel="stylesheet" type="text/css" href="all-ie-only.css" />
<![endif]--> 
```

然后在该外部样式表中，包含您的 CSS，例如：

```
input:focus { border: 1px solid golden; } 
```

`focus`应该在IE8中工作。添加`doctype`并查看。

# iphone - 检查图像是否已经在上下文中绘制 [iPhone]

> ID：12110074
> 
> 赞同：0
> 
> 时间：2012-08-24T13:11:19.957
> 
> 标签：iphone, objective-c, ios5, uiimage, drawrect

我在用

```
UIImage *image = @"some image" 
```

[图像 drawInRect:CGRectMake(50,50, 100, 100)];

我如何只检查绘制图像

```
if(cgrect(50, 50, 100, 100) doesn't have an image){
        // only then draw the image

  } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T13:23:03.190

Quartz（iOS 上的 2D 图形系统）使用*画家的*图形合成模型，并且在大多数情况下绘制到单层缓冲区。

这意味着一旦内容被绘制到图形上下文中，它就会被展平到上下文中，并且它的像素成为场景的一部分。把它想象成画一幅画：一旦你把颜料放在画布上，它就会覆盖下面的任何东西，并且与那里已经存在的颜料密不可分。

为了确定图像之前是否在图形上下文中绘制，您必须在上下文之外维护一些状态（例如 a `BOOL didDrawImage`。）您需要做什么取决于您的目标。如果您告诉我们您要达到的目标，我们或许可以为该问题提供替代解决方案。

# objective-c - 静态关键字在内部如何工作？

> ID：12110079
> 
> 赞同：0
> 
> 时间：2012-08-24T13:11:31.003
> 
> 标签：objective-c, c

`static`关键字在内部如何工作？考虑基本定义，或时间`static variable is initialized only once`如何根据执行流程解释它？考虑代码片段：`run-time``compile`

```
void function()
   {
      static int count=0;
      count++;
   }
main()
    {
       for(int i=0;i<=10;i++)
          function();
    } 
```

该行 `static int count=0;`仅执行一次，并且迭代`i=0`中是我能想到的最佳解释。它是正确的还是以其他方式起作用？

静态变量存储在内存中的哪个`stack`位置`heap`？

还有什么叫`static object`in`Objective-C`吗？如果有它与普通物体有什么不同？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T13:16:56.567

您的最后一个问题表明您在询问`static`局部变量声明中使用的情况。

> static 关键字在内部是如何工作的？

这是特定于实现的。

> 这与分配的内存有什么关系吗？

是的，用声明的本地人`static`驻留在静态存储中。

> 编译器/运行时是否在第一次遇到后跳过它？

它是只*执行一次初始化*的运行时。`static`除非另有说明，否则局部变量是值初始化的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T13:18:56.103

它对编译器和内存分配方式（取决于它的位置）意味着什么。在函数内部，变量在堆栈上分配并在函数的生命周期内持续存在，并且在调用之间不保留值。通过`static`声明，变量分配在分配全局变量的位置（通常是 .bss），并且值在函数调用之间保持不变，但变量的范围仅适用于该函数。

当`static`用于函数外部的全局声明时，该变量仅在该模块中具有作用域。也就是说，如果您在 module1.cpp 中声明了一个静态变量，那么 module2.cpp 就无法使用 extern 访问它。

# android - 使布局 xml 文件与平板电脑和手机兼容

> ID：12110082
> 
> 赞同：0
> 
> 时间：2012-08-24T13:11:47.187
> 
> 标签：android, android-layout

我已经构建了一个 android 应用程序。我希望我的布局 xml 文件根据 GUI 的观点与平板电脑和手机兼容。我引用了链接“http://developer.android.com/training/multiscreen/screensizes。 html”供参考。谁能告诉我我的 xml 文件是否兼容。这是我的两个 xml 文件。选择.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" 
     android:background="@drawable/img7">
    <TextView
        android:id="@+id/textView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:textColor="#32cd32"
        android:text="Select Command"
        android:textStyle="bold"
       android:textSize="50sp"
        android:textAppearance="?android:attr/textAppearanceLarge" />
    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/textView1"
        android:layout_marginTop="5dp"
        android:drawableLeft="@drawable/unix"
        android:text="UNIX" 
        android:textSize="25sp"
        android:textColor="#FF0000"
        android:background="#8b8989"/>

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/button1"
        android:layout_marginTop="10dp"
        android:drawableLeft="@drawable/aix1"
        android:background="#8b8989"
        android:textSize="25sp"
        android:textColor="#FF0000"/>
    <Button
        android:id="@+id/button3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/button2"
        android:layout_marginTop="10dp"
        android:drawableLeft="@drawable/san1"
        android:background="#8b8989"
        android:textSize="25sp"
        android:textColor="#FF0000"/>
    <Button
        android:id="@+id/button4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/button3"
        android:layout_marginTop="10dp"
        android:drawableLeft="@drawable/database1"
        android:background="#8b8989"
        android:textSize="25sp"
        android:textColor="#FF0000"/>
    <Button
        android:id="@+id/button5"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/button4"
        android:layout_marginTop="10dp"
        android:drawableLeft="@drawable/tsmlogo"
        android:text="TSM" 
        android:background="#8b8989"
        android:textSize="25sp"
        android:textColor="#FF0000"/>
    <TextView
        android:id="@+id/textView3"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:text="Cympac Software Solutions Pvt Ltd"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textColor="#228b22"
        android:background="#FFFFFF" 
        android:textStyle="bold"
        android:textSize="16sp"
        android:drawableLeft="@drawable/smallicon"/>

</RelativeLayout> 
```

和 unixxml.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:background="@drawable/img7" >
     <Button
        android:id="@+id/button1"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:text=""
        android:background="@drawable/house1" />
     <TextView
        android:id="@+id/textView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"

        android:layout_alignBottom="@+id/button1"
        android:layout_alignParentLeft="true"
        android:text="Enter UNIX Command"
        android:textColor="#FF0000" 
        android:textSize="25sp"
        />

    <AutoCompleteTextView
        android:id="@+id/autoCompleteTextView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/textView1"
        android:layout_marginTop="14dp"
        android:ems="10"
        android:hint="Start Typing Here........"
        android:textColor="#FF0000" >

        <requestFocus />
    </AutoCompleteTextView>

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/autoCompleteTextView1"
        android:text="Get Meaning"

        android:drawableLeft="@drawable/searchpic1"
        android:textColor="#FF0000"
        android:textSize="20sp" />
    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/button2"

        android:src="@drawable/book1" />

    <TextView
        android:id="@+id/textView2"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/imageView1"
        android:text=""
        android:textColor="#FF0000"
         />

    <TextView
        android:id="@+id/textView3"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:text="Cympac Software Solutions Pvt Ltd"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textColor="#228b22"
        android:background="#FFFFFF" 
        android:textStyle="bold"
        android:textSize="16sp"
        android:drawableLeft="@drawable/smallicon"/>

</RelativeLayout> 
```

# c++ - 为什么使用这个已删除的功能有效？

> ID：12110083
> 
> 赞同：4
> 
> 时间：2012-08-24T13:11:50.987
> 
> 标签：c++

```
struct S {
    S() {}
    S (const S &) = delete;
};

void f1 (S s) {}
void f2 (S &s) {}

int main() {
    S s;

    f2(s);
} 
```

既然`S(S &s)`被删除了，为什么 using`f2`不抛出错误，因为它被声明时它传递了参数`S &s`？当我使用`f1(s)`它时会引发错误。我查看了已删除函数的定义，我认为这会引发错误，但事实并非如此。为什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-24T13:13:15.800

因为通过引用传递不会创建副本（这是`f2`使用的）。

`f1`另一方面，它接受一个按值传递的参数，该参数会生成一个副本。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-24T13:27:10.567

让我们看看`S`：

```
struct S {
    S() {}                   // default constructor
    S (const S &) = delete;  // copy-constructor
}; 
```

您在这里拥有的是一种可以构造但不能复制的类型。

现在让我们看看你的函数：

```
void f1 (S s1) {}    // creates a local copy of its parameter
void f2 (S &s2) {}   // takes a reference to the parameter 
```

当您调用 时`f1(s)`，该函数会尝试创建一个副本`s`- 但您的类型`S`禁止复制 - 这就是它不起作用的原因。

当您调用时`f2(s)`，该函数会创建对其参数的引用——因此您在内部执行的任何`f2`操作`s2`都会直接针对原始对象执行`s`。类无法阻止任何人获取对象的引用。

# gwt - 在 GWT 中从服务器向客户端发送文件

> ID：12110090
> 
> 赞同：2
> 
> 时间：2012-08-24T13:12:13.077
> 
> 标签：gwt, servlets, gwt-rpc, gwt2, formpanel

我正在使用 GWT。

我必须将文件文件从*服务器*下载到*客户端*。

文档位于外部存储库中。

客户端通过 Servlet 发送文档的 ID。

在*服务器端*：使用此 ID 文档检索：

```
Document document = (Document)session.getObject(docId);
ContentStream contentStream = document.getContentStream();

ByteArrayInputStream inputStream = (ByteArrayInputStream) contentStream.getStream();

int c;
while ((c = inputStream.read()) != -1) {
    System.out.print((char) c); 
}
String mime = contentStream.getMimeType();
String name = contentStream.getFileName();
InputStream strm = contentStream.getStream(); 
```

在这里我可以阅读文档。

我想把这个发给客户。如何将其制作为文件并将其发送回客户端？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T14:18:16.867

在您的 Servlet 中：

```
Document document =(Document)session.getObject(docId);
ContentStream contentStream = document.getContentStream();
String name = contentStream.getFileName();
response.setHeader("Content-Type", "application/octet-stream;");
response.setHeader("Content-Disposition", "attachment;filename=\"" + name + "\"");
OutputStream os = response.getOutputStream();
InputStream is = 
  (ByteArrayInputStream) contentStream.getStream();
BufferedInputStream buf = new BufferedInputStream(is);
int readBytes=0;
while((readBytes=buf.read())!=-1) {
      os.write(readBytes);
}   
os.flush();
os.close();// *important*
return; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T14:20:58.567

您可以在服务器端创建一个标准 servlet（扩展`HttpServlet`而不是扩展`RemoteServiceServlet`），并有机会在客户端将 id 作为 servlet 参数提交。

现在您需要在收到请求后创建 excel 文件并将其发送给客户端。浏览器会自动弹出下载对话框。但是您应该确保设置正确的内容类型响应标头。此标头将指示浏览器它是哪种类型的文件。

```
protected void doGet(HttpServletRequest request, HttpServletResponse response) 
                                              throws ServletException, IOException { 

String fileId = reguest.getParameter("fileId"); // value of file id from request
File file = CreatorExel.getFile(fileId); // your method to create file from helper class

// setting response headers
response.setHeader("Content-Type", getServletContext().getMimeType(file.getName())); 
response.setHeader("Content-Length", file.length()); 
response.setHeader("Content-Disposition", "inline; filename=\"" + file.getName() + "\""); 

BufferedInputStream input = null; 
BufferedOutputStream output = null; 

try { 
    InputStream inputStream = new FileInputStream(file);
    ServletOutputStream outputStream = response.getOutputStream();

    input = new BufferedInputStream(fileInput); 
    output = new BufferedOutputStream(outputStream); 

    int count;
    byte[] buffer = new byte[8192]; //  buffer size is 512*16
    while ((count = input.read(buffer)) > 0) {
         output.write(buffer, 0, count);
    }

} finally { 
    if (output != null) {
       try { 
          output.close(); 
       } catch (IOException ex) {
       } 
    }
    if (input != null) {
       try { 
          input.close(); 
       } catch (IOException ex) {
       } 
    } 
} 
```

# c - 如何从 getword 处理的文件中省略一个单词

> ID：12110095
> 
> 赞同：0
> 
> 时间：2012-08-24T13:12:25.547
> 
> 标签：c, word

我的任务是编写一个程序，它应该在前面的特定序列之后省略一个单词。我已经准备了一个有效的 getword 过程（返回`char *`），现在我只有在 main 有以下代码片段的问题，它允许我检测应该在哪里删除这个词。但我不知道如何从 outfile 中实际省略/删除该单词。

```
int main(int argc, char **argv)
{
    FILE *infile = NULL, *outfile = NULL;
    char *word = NULL;
    int c;
    int yes = 0;
    int counter = 0;

    /* completely irrelevant - opening, writing to files, error messages etc. */
    while (1) {
        c = fgetc(infile);

        word = getword(infile);
        if (counter == 2) {
            counter = 0;
            yes = 0;
                    /* here it should somehow omit the word */
            continue;
        }
        if (choose(word, strlen(word))) {
            fputs(word, outfile);
            counter++;
            yes = 1;
        } else {
            fputs(word, outfile);
            if (yes == 1) {
                counter--;
            }   
        }
        free(word); 
    }
    /* completely irrelevant */
} 
```

**编辑：**添加以澄清

“getword 只是读取一个单词，它不会执行任何检查它是否是我正在寻找的单词。main() 会进行检查。当 if (choose) 满足时，这意味着该单词包含字母序列 I '正在寻找，并且应该省略该特定单词之后的第二个单词。变量“counter”和“yes”可能不是完美的算法，但起初我希望它工作，然后我会尝试简化它。 “计数器”最多计数 2 以确定要省略哪个单词，而“是”有助于在我们移动到不满足`if (choose)`条件的单词后递增计数器。”

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T13:27:37.717

您不应该从 outfile 中删除该单词。您需要从输入文件中省略它。

```
word = getword(infile); 
```

我想在这里你得到了你需要省略的词。不是吗？你可以得到这个词的长度并做下一个循环

```
int len = strlen(word); 
for (int i=0; i<=len; i++) 
   fgetc(infile); //we also omit the special char 
```

从这一刻起你就可以**继续**了。

**编辑：**我认为检查

```
if(!isalpha(c)) 
```

不好，因为空格不是字母。可能这个变种更好

```
if (c!='\\') 
```

在这种情况下，字符**'\'**是一个特殊字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-26T15:26:18.690

我明白了，代替

`/* here it should somehow omit the word */`

应该有`free(word);`

一切都像魅力一样。我早点得到它，但忘记发布我自己的问题的答案：D

# jquery - jQuery Datatable fnGetnodes 不选择隐藏行

> ID：12110096
> 
> 赞同：1
> 
> 时间：2012-08-24T13:12:27.873
> 
> 标签：jquery, jquery-datatables

好的，伙计们，这是我的情况，我有一个空表，用户将在其中填充 DataTable 中的行，此 DT 在 Dialog 内，并且可以根据过滤器随时重建此 DT。数据表中的每一行都有一个复选框，其中指示他将选择哪一行来填充另一个表，当他点击“添加”按钮时，它会正常添加（包括隐藏行），并且该复选框将被禁用。我的问题是，当我从另一个表中删除播放器时，我需要分别从复选框中禁用 removeAttr ，但是它不起作用。另外，DT中的每个tr都有一个名为“jogador##”的类，其中##是一个id，所以当我移除播放器时，我只能选择tr，找到它的复选框并再次启用。

这些函数仅适用于可见行，隐藏行不会发生任何事情。

这是我使用的功能：

```
function addPlayer(){
    $('input:checkbox:checked', oTable.fnGetNodes()).each(function(){
        tr = $(this).parent().parent().clone();
        tr.removeClass('odd');
        tr.removeClass('even');
        tr.find('.hide').removeClass('hide');
        tr.find('.removable').remove();
        c = $('#camisa').val();
        cid = $('#categoria').val();
        tr.find('#camisa_').val(c);
        $('#c'+c+'_categoria'+cid).find('table tbody').append(tr);
        $(this).attr('disabled', 'disabled');
    });
    reactiveSortable();
    sortPlayers();
    $('.dialog-players').dialog('close');
}
function removePlayer(el, id){
    if(confirm("Deseja realmente excluir este jogador?")){
        $(el).parent().parent().fadeOut(300, function(){
            $(this).remove();
            $('tr.jogador'+id, oTable.fnGetNodes()).find(':checkbox').removeAttr('disabled');
            reactiveSortable();
            sortPlayers();
        });
    }
} 
```

# facebook - 自定义 Facebook 按钮问题

> ID：12110098
> 
> 赞同：0
> 
> 时间：2012-08-24T13:12:30.127
> 
> 标签：facebook, facebook-like

我的自定义 facebook like 按钮工作正常，但几周前它坏了。它具有透明的 png 背景，但现在透明度不起作用。见这里（页脚）：frissbuzafu.hu

请帮我看看，是什么问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T13:16:53.800

看起来您的按钮对于图像来说是两个大的，因为当您滚动到白色部分时，您仍然可以单击按钮，因为它应该只在图像部分上方。

# ios5 - iOS5：如何 viewWillAppear/viewDidAppear/viewDidAppear/ect。创建方法？

> ID：12110102
> 
> 赞同：0
> 
> 时间：2012-08-24T13:12:44.003
> 
> 标签：ios5, viewwillappear

我正在做一些 iOS 5 教程，在几个教程中，它说 MasterViewController.m 中的“在 viewWillAppear 末尾添加”或“修改 viewWillDisappear”之类的内容，但在我的项目中，MasterViewController.m 没有任何这些方法。

由于它没有说“创建这些方法”，我猜它们是由某些东西自动创建的，但我不知道我需要做什么才能让它们出现在 MasterViewController.m 中。

请有人帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T13:21:32.123

这些方法通常继承自父类（例如，`UIViewController`）。你可能应该做的是添加类似

```
- (void)viewWillAppear:(BOOL)animated {
   [super viewWillAppear:animated];
   // Your new stuff here
} 
```

方法原型取自 Apple 的文档`UIViewController`；根据您要子类化的类（`.h`文件中冒号后面的东西，`@interface`在行中），您可能需要不同的方法原型。

# vhdl - 如何在 VHDL 中将 32 位有符号 std_logic_vector 乘以 2

> ID：12110106
> 
> 赞同：1
> 
> 时间：2012-08-24T13:12:57.967
> 
> 标签：vhdl

我们有一个类型，它是一个大小为 3 的 32 位“std_logic_vector”数组，其定义如下：

```
subtype scalar is std_logic_vector(31 downto 0);
type vector_nd is array (natural range <>) of scalar;
subtype vector_3d is vector_nd(2 downto 0); 
```

我们有一个“vector_3d”类型的信号，我们想将其乘以 2，并将结果放入“scalar”类型的信号中：

```
signal v_normal_out_sig := vector_3d;
signal mult1_in1_sig    := scalar;
--...
mult1_in1_sig <= 2*signed(v_normal_out_sig(0)) when cau_state = st_cycle18; 
```

当我们编译它时，我们得到错误：

```
No feasible entries for infix operator "*". 
```

什么是实现我们想要的正确方法？我们正在使用以下库：

*   ieee.std_logic_1164.all
*   ieee.std_logic_arith.all
*   ieee.std_logic_unsigned.all

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T13:30:23.247

我们最终做的是休耕：

```
mult1_in1_sig <= v_normal_out_sig(0)(31) & v_normal_out_sig(0)(29 downto 0) & '0' when cau_state = st_cycle18; 
```

并且测试对正数和负数都给出了正确的结果。

# xcode - 属性实现必须在接口“AppDelegate”中声明

> ID：12110107
> 
> 赞同：1
> 
> 时间：2012-08-24T13:13:01.773
> 
> 标签：xcode, xcode4, xcodebuild

我收到此错误

```
Property implementation must have its declaration in interface "AppDelegate" 
```

当我宣布

```
@implementation AppDelegate

@synthesize window, viewController;
@synthesize token; 
```

我正在使用 Xcode 4.4。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T13:17:03.253

这意味着您需要转到您的`AppDelegate.h`文件，并为`token`. 假设它是`NSString*`; 那么您应该将以下行添加到您的 .h 文件中：

```
@property (nonatomic, readwrite) NSString *token; 
```

替换您的财产`NSString*`的正确类型。`token`可以在[此处](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocProperties.html)找到有关属性的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T13:17:51.693

看起来您没有在 .h 文件中将**widow**、**viewController**或**token**设置为属性。

你输入了吗`@property (nonatomic, strong) NSString *token;`

# asp.net-mvc - MVC 4 - 注销后的后退按钮问题

> ID：12110127
> 
> 赞同：3
> 
> 时间：2012-08-24T13:14:23.800
> 
> 标签：asp.net-mvc, asp.net-mvc-4, browser-cache, back-button

我读过很多帖子，人们遇到过类似的问题，但还没有找到可行的解决方案。我有一个 MVC 4 站点，我不想从整个网站中删除缓存，因为我想缓存页面。当用户单击注销按钮时，它会成功注销并重定向到登录页面，但是当用户单击后退按钮时，它会显示以前查看过的“受限页面”，您应该只能在登录后才能看到。我知道这是因为浏览器已经缓存了页面客户端。我尝试了许多解决方案，如前所述，它们都不起作用。目前我的注销有以下代码：

```
 public ActionResult LogOff()
    {

        FormsAuthentication.SignOut();
        Session.Abandon();
        Session.Clear();

        // clear authentication cookie 
        HttpCookie cookie1 = new HttpCookie(FormsAuthentication.FormsCookieName, "");
        cookie1.Expires = DateTime.Now.AddYears(-1);
        Response.Cookies.Add(cookie1);

        // clear session cookie (not necessary for your current problem but i would recommend you do it anyway) 
        HttpCookie cookie2 = new HttpCookie("ASP.NET_SessionId", "");
        cookie2.Expires = DateTime.Now.AddYears(-1);
        Response.Cookies.Add(cookie2); 

        // Invalidate the Cache on the Client Side 
        Response.Cache.SetCacheability(HttpCacheability.NoCache);
        Response.Cache.SetExpires(DateTime.UtcNow.AddMinutes(-1));
        Response.Cache.SetNoStore();

        Response.AppendHeader("Pragma", "no-cache");

        // send an expired cookie back to the browser 
        var ticketExpiration = DateTime.Now.AddDays(-7);
        var ticket = new FormsAuthenticationTicket(
            1,
            // replace with username if this is the wrong cookie name 
            FormsAuthentication.FormsCookieName,
            DateTime.Now,
            ticketExpiration,
            false,
            String.Empty);
        var cookie = new System.Web.HttpCookie("user")
        {
            Expires = ticketExpiration,
            Value = FormsAuthentication.Encrypt(ticket),
            HttpOnly = true
        };

        Response.Cookies.Add(cookie); 

        return RedirectToAction("Login", "Account");
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-26T09:06:46.023

如果您想在所有页面上应用“浏览器背面无缓存”行为，那么您应该将以下内容放在 global.asax 中。

```
protected void Application_BeginRequest()
{
    Response.Cache.SetCacheability(HttpCacheability.NoCache);
    Response.Cache.SetExpires(DateTime.UtcNow.AddHours(-1));
    Response.Cache.SetNoStore();
} 
```

希望它可以帮助某人！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T14:41:32.083

您可以使用浏览器窗口上的哈希更改事件，在回发时触发 ajax 请求，这显然会在您注销时失败。从那里你可以触发浏览器做任何你喜欢的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-03T05:16:53.753

将以下代码行添加到*Global.asax.cs*文件中。

```
protected void Application_BeginRequest()
{
    Response.Cache.SetCacheability(HttpCacheability.NoCache);
    Response.Cache.SetExpires(DateTime.UtcNow.AddHours(-1));
    Response.Cache.SetNoStore();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-17T10:04:58.907

```
 Response.ClearHeaders();
    Response.AddHeader("Cache-Control", "no-cache, no-store, max-age=0, 
    must-revalidate");
    Response.AddHeader("Pragma", "no-cache");

    Response.Cache.SetCacheability(HttpCacheability.NoCache);
    Response.Buffer = true;
    Response.ExpiresAbsolute = DateTime.Now.AddDays(-1);
    Response.Expires = 0; 
```

# c# - 等待 WebBrowser 在计时器中加载

> ID：12110131
> 
> 赞同：0
> 
> 时间：2012-08-24T13:14:31.940
> 
> 标签：c#, winforms, browser

我正在创建一个简单的自动冲浪应用程序来学习 WebBrowser 对象。

我有一个包含 23 个 URL 的列表，我每隔几秒就会浏览一次。

该应用程序很简单，转到论坛并打开表格以添加新消息（不发送）并继续前进，直到您到达列表末尾。

我的问题是代码`forumAction.FillOutFormIn(webBrowser1.Document);`在错误的站点中执行。

我认为这是因为文件还没有准备好。

那么有没有办法在文档准备好之前停止计时器执行代码？

这是`TIMER TICK`功能：

```
//I start is in 21 for faster testing.
int timesToRun = 21;
    private void Time_Tick(object sender, EventArgs e)
    {

            Console.WriteLine(timesToRun.ToString());
            string currentSite = siteList.GetSiteFromIndex(timesToRun);

            webBrowser1.Document.Window.Navigate(currentSite);

            //I think I need to wait here until the document is ready

            //this line of code doesn't run on timeToRun = 22
            forumAction.FillOutFormIn(webBrowser1.Document);

            Console.WriteLine(webBrowser1.Url);
            timerLabel1.Text = siteList.SiteLists.Count + ">" + timesToRun + "";

            if (timesToRun >= siteList.SiteLists.Count - 1)
            {
                enableControls(true);
                timesToRun = 0;
                timer.Stop();
                Console.WriteLine("done");

            }

            timesToRun++;          
    } 
```

（对不起我的英语不好）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T13:20:00.177

添加这样的事件

```
You could disable your timer in your Time_tick function, 

timer1.Enabled = false; 
```

然后在文档完成事件中重新启用它：

```
private void webBrowser1_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
{
    if(timesToRun > 0) 
    { 
        timer1.Enabled = true;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T13:20:48.570

您可以简单地编写控件的[DocumentCompleted](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.documentcompleted)事件。

这将允许您在加载页面时重新启动计时器。

```
webBrowser1.Navigated += WebBrowser_DocumentCompleted;
timesToRun = 22;

private void Time_Tick(object sender, EventArgs e)
{
    timer.stop();
    webBrowser1.Document.Window.Navigate(url);
}

void WebBrowser_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
{
    timesToRun--;
    if(timesToRun > 0)
    {
        timer.Start();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-21T05:13:44.650

//我开始是在 21 进行更快的测试。int timesToRun = 21; 私有 void Time_Tick（对象发送者，EventArgs e）{

```
 Console.WriteLine(timesToRun.ToString());
        string currentSite = siteList.GetSiteFromIndex(timesToRun);

        webBrowser1.Document.Window.Navigate(currentSite);

        //I think I need to wait here until the document is ready

        //this line of code doesn't run on timeToRun = 22
        forumAction.FillOutFormIn(webBrowser1.Document);

        Console.WriteLine(webBrowser1.Url);
        timerLabel1.Text = siteList.SiteLists.Count + ">" + timesToRun + "";

        if (timesToRun >= siteList.SiteLists.Count - 1)
        {
            enableControls(true);
            timesToRun = 0;
            timer.Stop();
            Console.WriteLine("done");

        }

        timesToRun++;          
} 
```

timmer coad isthis

# android - onConfigurationChanged 每两次调用一次

> ID：12110132
> 
> 赞同：0
> 
> 时间：2012-08-24T13:14:55.750
> 
> 标签：android, android-layout, landscape-portrait

我有两个活动 AB，用户可以通过将手机从纵向旋转到横向来在它们之间切换

我重写了 OnConfigurationChanged 并像这样开始新的活动：

```
 @Override
    public void onConfigurationChanged(Configuration newConfig) {

      super.onConfigurationChanged(newConfig);

      if (newConfig.orientation==ActivityInfo.SCREEN_ORIENTATION_USER || newConfig.orientation==ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE || newConfig.orientation==ActivityInfo.SCREEN_ORIENTATION_REVERSE_LANDSCAPE)
      {
            final TabGroupActivity tabGroupActivity = (TabGroupActivity) this.getParent();
            final Intent arIntent = new Intent(tabGroupActivity, ARActivity.class);
            tabGroupActivity.startActivity(arIntent);
      }

    } 
```

它第一次运行良好，但第二次，第三次都可以等等。它每两次运行一次

每次失败时，活动 A 都会旋转到横向，我注意到我的覆盖 OnConfigurationChanged 没有被调用。

有什么建议么 ？

这是 Activity B 中 ConfigurationChanged 的​​代码

```
 @Override
 public void onConfigurationChanged(Configuration newConfig) {

     super.onConfigurationChanged(newConfig);

     Log.i(TAG,"onConfigurationChanged orientation  : " + newConfig.orientation);

      if (!mProgressDialog.isShowing() && (newConfig.orientation==ActivityInfo.SCREEN_ORIENTATION_PORTRAIT|| newConfig.orientation==ActivityInfo.SCREEN_ORIENTATION_REVERSE_PORTRAIT))
      {
            mOrientationTimer.cancel();

            this.finish();

      }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T13:23:27.860

您需要`onConfigurationChanged`在这两个活动中实施。可能你忘记了。或者您可能忘记为这两个活动设置清单`android:configChanges="keyboardHidden|orientation"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T13:20:32.853

```
android:configChanges="keyboardHidden|orientation" 
```

将其添加到清单文件中的 Activity 中。

# java - 设置 LDAP SecurityPrincipal 值

> ID：12110134
> 
> 赞同：0
> 
> 时间：2012-08-24T13:15:17.060
> 
> 标签：java, ldap, ldapconnection

我能够在 openldap 命令行工具上成功运行以下搜索查询：

```
ldapsearch -h 1.11.1.1 -b "DC=ff2,DC=in" -s subtree -D "CN=Ldap Bind,OU=Service Accounts,OU=BA,DC=ff2,DC=in" -w G00Pass# sBAAccountName=testAccount 
```

现在我必须在 java 类中执行它。我做了以下事情：

哈希表环境 = 新哈希表（）；

```
 env = new Hashtable<String, String>();
    env.put(Context.INITIAL_CONTEXT_FACTORY, "com.sun.jndi.ldap.LdapCtxFactory");
    env.put(Context.SECURITY_AUTHENTICATION, "simple");
    env.put(Context.PROVIDER_URL, "ldap://1.11.1.1:389");
    env.put(Context.SECURITY_PRINCIPAL, "CN=Ldap Bind,OU=Service Accounts,OU=TECH,DC=ff2,DC=in");
    env.put(Context.SECURITY_CREDENTIALS, "H00Pass#");

    LdapContext context = new InitialLdapContext(env, null);
    // To get only 1000 results at a time.
    context.setRequestControls(
        new Control[]{new PagedResultsControl(1000, Control.CRITICAL)});

    String[] attrs={"CN=Ldap Bind,OU=Service Accounts,OU=TECH,DC=ff2,DC=in"};

    String base = "DC=ff2,DC=in";
    String filter = "(&(objectClass=user)(sAMAccountName=testAccount))";
    SearchControls controls = new SearchControls();
    controls.setSearchScope(SearchControls.SUBTREE_SCOPE);
    controls.setReturningAttributes(attrs);
    SearchResult searchResults;
        NamingEnumeration<SearchResult> results =  context.search(base, filter, controls);
        if (results.hasMoreElements()) {
            SearchResult searchResult = (SearchResult) results.nextElement();
            if(results.hasMoreElements()){
                System.err.println("Matched multiple groups for the group with SID: ");
        }else{

            System.out.println( (String)searchResult.getAttributes().get("sAMAccountName").get());
        }
       } 
```

这给了我空指针异常`searchResult.getAttributes()`。在这里我不确定如何包含`sBAAccountName`过滤器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T13:25:33.997

您必须使用该条件进行搜索，如下所示：

```
env = new Hashtable<String, String>();
env.put(Context.INITIAL_CONTEXT_FACTORY, "com.sun.jndi.ldap.LdapCtxFactory");
env.put(Context.SECURITY_AUTHENTICATION, "simple");
env.put(Context.PROVIDER_URL, "<LDAP HOST>");
env.put(Context.SECURITY_PRINCIPAL, "<LDAP USER LOGIN>");
env.put(Context.SECURITY_CREDENTIALS, "<LDAP USER PASSWORD>");

LdapContext context = new InitialLdapContext(env);
// To get only 1000 results at a time.
context.setRequestControls(
    new Control[]{new PagedResultsControl(1000, Control.CRITICAL))});

String attrs = "<List of attrs to be retrieved for each matching LDAP entry>";
String base = "<Base of the search tree>";
String filter = "<Your filter>";
SearchControls controls = new SearchControls();
controls.setSearchScope(SearchControls.SUBTREE_SCOPE);
controls.setReturningAttributes(attrs);
SearchResults searchResults;
do {
    searchResults = ctx.search(base, filter, controls);
    while (searchResults.hasMoreElements()) {
        // Process result.
    }
    // Process response controls to get the cookie 
    // and keep searching until it is null.
}
while (cookie is not null); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T04:14:36.903

您必须在`searchResult`其他地方声明为成员变量。删除它。然后，您将通过编译错误发现您正在使用它的地方甚至没有声明它，因此没有任何价值。也删除它。

# visual-studio-2010 - VSIX 包不包含引用项目的依赖项

> ID：12110135
> 
> 赞同：6
> 
> 时间：2012-08-24T13:15:19.290
> 
> 标签：visual-studio-2010, vsx, vsix, vspackage

我们有一个引用类库项目（项目 A）的 Visual Studio 包（VS 包）。项目 A 又引用另一个类库项目（项目 B）。

所以依赖结构看起来像这样：VS Package > Project A > Project B

所有项目都存在于同一个解决方案中，并且依赖项已设置为正确的项目引用。

如果我在 Visual Studio 中构建包并查看 bin/Debug 文件夹，所有必要的程序集都在那里，包括项目 B。但是，在部署包时，只有项目 A 的程序集存在，而项目 B 的程序集丢失。如何告诉 Visual Studio 在包中包含项目 B 的间接依赖项？

[此 MSDN](http://msdn.microsoft.com/en-us/library/ff363239%28v=vs.100%29.aspx)文档建议“默认情况下，在多项目解决方案中，如果输出到 VSIX 包的项目包含对同一解决方案中另一个项目的引用，则它包含该项目的依赖项。”

但是我发现事实并非如此。

[我的问题与这个](https://stackoverflow.com/questions/6974244/vsix-package-doesnt-include-localized-resources-of-referenced-assembly)问题非常相似，只是我在主项目程序集而不是本地化附属程序集上遇到了问题。这篇其他帖子中的答案对我不起作用，因为它似乎只适用于附属程序集。

我可以指定其他一些输出组来指导包也包含间接依赖项吗？

感谢您的关注。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T18:10:29.867

在这种特殊情况下，最简单的做法是从 VSPackage 项目中引用项目 B，并将“引用输出程序集”属性设置为 False，以避免引入编译时依赖项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-17T07:08:42.513

我有一个类似的问题：我的*VS 包*项目引用了另一个 VS 包项目（~ *Project A*），该项目又引用了一堆包含我们扩展 内容的其他项目（~ *Project B ）。*

受此答案的启发：[VSIX package 不包括引用的程序集的本地化资源](https://stackoverflow.com/questions/6974244/vsix-package-doesnt-include-localized-resources-of-referenced-assembly)，我将 ' `BuiltProjectOutputGroup;BuiltProjectOutputGroupDependencies;GetCopyToOutputDirectoryItems;SatelliteDllsProjectOutputGroup`' 添加到从*VS Package*到*Project A*`Output Groups Included in VSIX`的引用属性中。

 ***这具有将我的VS Project*`...\Debug\`文件夹中的所有依赖 DLL 删除的效果，但它们仍然没有包含在 VSIX 中。

 *最后，我将`BuiltProjectOutputGroup;BuiltProjectOutputGroupDependencies;GetCopyToOutputDirectoryItems;SatelliteDllsProjectOutputGroup`标志添加到从我的*项目 A*到我的每个*项目 B*的所有引用中- 然后它们都包含在 VSIX 中。

（顺便说一句，这与 Visual Studio 2013 一起使用，但自 2010 年以来似乎没有太大变化）***

# jquery - qtip2 动态改变内容

> ID：12110138
> 
> 赞同：0
> 
> 时间：2012-08-24T13:15:23.103
> 
> 标签：jquery, qtip2

我无法动态更改内容，我尝试了 .selector.qtip('api').set('content.text', new content) 但它什么也没做，我尝试了 .selector.qtip('option', content. text'，新内容）

```
("[ID*='lnkLogIn']").live("click", function (event) {
            $(this).qtip("destroy");
            $(this).qtip({
                id: 'modal', 
                content: {

                    text: "Loading...",
                    ajax: "/DesignerUtils/Component/Other/Login.aspx",
                    title: {
                        button: true
                    }
                },
                position: {
                    my: 'center', // ...at the center of the viewport
                    at: 'center',
                    target: $(window)
                },
                show: {
                    event: false,
                    ready: true,
                    solo: true, // ...and hide all other tooltips...
                    modal: true // ...and make it modal
                },
                hide: false,
                style: 'ui-tooltip-light ui-tooltip-rounded modal1',
                events: {

                    render: function (event, api) {
                        api.set('content.text', event);
                        $(this).qtip('api').set('content.text', 'new content');
                        function errorHandler(jqXHR, message) {
                            // Set the error and show/hide it
                            $('.error', api.elements.tooltip).html(message || '').toggle(!!message);

                        }
                        $(this).find('#register').live('click', function () {
                            $.ajax({
                                type: "POST",
                                url: "../log.asmx/GetRegisterForm",
                                data: "{}",
                                contentType: "application/json; charset=utf-8",
                                dataType: "json",
                                success: function (msg) {
                                    $("[ID*='lnkLogIn']").qtip('api').set('content.text', msg); // <---- HERE I WANT DINAMICALY CHANGE CONTENT
                                },
                                error: function (xhr, status, error) {
                                    // Show the error

                                    alert(xhr.responseText);
                                }
                            });

                        });

                        $(this).find('#Login').live('click', function (event) {

                            var username = $(this).parent().find('.username').val();
                            var password = $(this).parent().find('.password').val();
                            $.ajax({
                                type: "POST",
                                url: "../log.asmx/GetRSSReader",
                                data: "{username: '" + username + "', password: '" + password + "'}",
                                contentType: "application/json; charset=utf-8",
                                dataType: "json",
                                success: function (msg) {
                                    if (msg) {
                                        setTimeout(function () { window.location.reload() }, 200);
                                    }
                                },
                                error: function (xhr, status, error) {
                                    // Show the error

                                    alert(xhr.responseText);
                                }
                            });
                        });
                    }
                }

            });

        });
    }); 
```

我选择了它必须改变的地方。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-30T18:38:00.943

您是否尝试过仅使用没有“api”段的“set”方法？

```
 $("[ID*='lnkLogIn']").set('content.text', msg); 
```

# c# - 将 C# 代码转换为 PowerShell

> ID：12110140
> 
> 赞同：4
> 
> 时间：2012-08-24T13:15:31.600
> 
> 标签：c#, .net, powershell

鉴于这段代码：

```
someobject.ProgressChanged += (sender, args) => Console.WriteLine(args.ProgressPercentage); 
```

我怎么能在powershell中写同样的东西，我使用了Register-Event但是当我在对象上调用execute方法时它只是阻塞了线程并且你只看到事件在动作完成后触发了，我也尝试使用开始工作。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T13:32:25.157

[Register-ObjectEvent](http://technet.microsoft.com/en-us/library/hh849929.aspx)应该可以工作：

```
Register-ObjectEvent -InputObject $someobject -EventName ProgressChanged `
    -Action { Write-Host $EventArgs.ProgressPercentage } 
```

有关PowerShell 中的异步事件处理的详细信息，请参阅[此 TechNet 文章。](http://blogs.technet.com/b/heyscriptingguy/archive/2011/06/16/use-asynchronous-event-handling-in-powershell.aspx)

**编辑：**根据评论中的要求，这是我在测试中使用的代码：

```
$timer = New-Object System.Timers.Timer
$timer.Interval = 500
$timer.AutoReset = $true
Register-ObjectEvent -InputObject $timer -EventName Elapsed `
    -Action { Write-Host $EventArgs.SignalTime }
$timer.Start() 
```

从那时起，`Elapsed`事件的信号时间每半秒打印一次到控制台，直到我设法盲输入`$timer.Stop()`。

# codeigniter - Codeigniter 图像和源 URL

> ID：12110144
> 
> 赞同：3
> 
> 时间：2012-08-24T13:15:51.833
> 
> 标签：codeigniter

我对 Codeigniter URL 有疑问。我有一个控制器“welcome.php”：

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');
class Welcome extends CI_Controller {

    function __construct()
    {
        parent::__construct();
    }

    public function index()
    {
        $data['tiung'] = 'index';
        $this->load->view('welcome_message',$data);
    }

    public function dor($bus)
    {
        $data['tiung'] = $bus;
        $this->load->view('welcome_message',$data);
    }
} 
```

和一个视图“welcome_message.php”：

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Welcome to CodeIgniter</title>
</head>
<body>
    sesuatu <?php echo $tiung?>
    <img src="fragor.jpg" width="720" height="246" alt=""/>
    ladalah
</body>
</html> 
```

如果我想使用参数访问控制器功能“dor”，我使用了这个：

```
localhost/hostname/index.php/welcome/dor/something 
```

它可以工作，但问题是图像未加载。我试图将图像文件放在 webroot 文件夹、“应用程序”文件夹，甚至“视图”文件夹中。但是图像仍然无法加载。我应该把图像文件放在哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T13:22:41.950

最好的做法是在您的 webroot（带有 index.php 的文件夹）中创建一个 /images/ 目录，并使用该`base_url()`函数获取图像的链接，即 IE

```
<img src="<?php echo base_url('images/fragor.jpg'); ?>" width="720" height="246" alt=""/> 
```

`site_url()`在使用or之前，不要忘记使用自动加载器或手动加载 url 帮助程序`base_url()`。

此外，如果您使用 CodeIgniter 的重写规则从 URL 中删除 index.php（看起来不像您正在这样做），请不要忘记从重写中排除 /images/ 目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T07:33:50.463

在 CodeIgniter 中有一种特定的方式来指示图像......比如

```
echo img('images/gautam.gif'); 
```

把它放在你的视图文件中，你需要在你的根目录下创建“images”文件夹

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-10-20T02:17:19.653

尽管您必须在自动加载配置中添加 CI 助手“html”，但这很容易。

```
<?php
$image_properties = array(
    'src'   => 'images/picture.jpg',
    'alt'   => 'Me, demonstrating how to eat 4 slices of pizza at one time',
    'class' => 'post_images',
    'width' => '200',
    'height'=> '200',
    'title' => 'That was quite a night',
    'rel'   => 'lightbox'
);
img($image_properties);
?>
/* <img src="site.com/index.php/images/picture.jpg" alt="Me, demonstrating how to eat 4 slices of pizza at one time" class="post_images" width="200" height="200" title="That was quite a nigh`enter code here`t" rel="lightbox" />*/ 
```

或者很简单：

```
<?php
echo img('images/picture.jpg'); ?>
// gives <img src="site.com/images/picture.jpg" /> 
```

# c# - 异步/等待任务和 WaitHandle

> ID：12110145
> 
> 赞同：7
> 
> 时间：2012-08-24T13:15:53.160
> 
> 标签：c#, asynchronous, task, waithandle, async-await

假设我有 10N 个项目（我需要通过 http 协议获取它们），在代码中启动 N 个任务来获取数据，每个任务依次获取 10 个项目。我把物品放在一个`ConcurrentQueue<Item>`. 之后，这些项目以线程不安全的方法逐个处理。

```
async Task<Item> GetItemAsync()
{
    //fetch one item from the internet
}

async Task DoWork()
{
    var tasks = new List<Task>();
    var items = new ConcurrentQueue<Item>();
    var handles = new List<ManualResetEvent>();

    for i 1 -> N
    {
        var handle = new ManualResetEvent(false);
        handles.Add(handle);

        tasks.Add(Task.Factory.StartNew(async delegate
        {
            for j 1 -> 10
            {
                var item = await GetItemAsync();
                items.Enqueue(item);
            }
            handle.Set();
        });
    }

    //begin to process the items when any handle is set
    WaitHandle.WaitAny(handles);

    while(true)
    {
         if (all handles are set && items collection is empty) //***
           break; 
         //in another word: all tasks are really completed

         while(items.TryDequeue(out item))          
         {
              AThreadUnsafeMethod(item);    //process items one by one
         }
    }
} 
```

我不知道 if 条件可以放在标记的语句中`***`。我这里不能使用`Task.IsCompleted`属性，因为我`await`在任务中使用，所以任务很快就完成了。而一个`bool[]`表示任务是否执行到最后的a看起来真的很难看，因为我认为ManualResetEvent可以做同样的工作。谁能给我一个建议？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T14:26:01.533

好吧，您*可以*自己构建它，但我认为使用[TPL Dataflow](http://msdn.microsoft.com/en-us/devlabs/gg585582.aspx)更容易。

就像是：

```
static async Task DoWork()
{
  // By default, ActionBlock uses MaxDegreeOfParallelism == 1,
  //  so AThreadUnsafeMethod is not called in parallel.
  var block = new ActionBlock<Item>(AThreadUnsafeMethod);

  // Start off N tasks, each asynchronously acquiring 10 items.
  // Each item is sent to the block as it is received.
  var tasks = Enumerable.Range(0, N).Select(Task.Run(
      async () =>
      {
        for (int i = 0; i != 10; ++i)
          block.Post(await GetItemAsync());
      })).ToArray();

  // Complete the block when all tasks have completed.
  Task.WhenAll(tasks).ContinueWith(_ => { block.Complete(); });

  // Wait for the block to complete.
  await block.Completion;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T13:41:32.680

您可以执行一个超时为零的 WaitOne 来检查状态。像这样的东西应该工作：

```
if (handles.All(handle => handle.WaitOne(TimeSpan.Zero)) && !items.Any())
    break; 
```

[http://msdn.microsoft.com/en-us/library/cc190477.aspx](http://msdn.microsoft.com/en-us/library/cc190477.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T01:32:43.333

谢谢大家。最后我发现[CountDownEvent](http://msdn.microsoft.com/en-us/library/system.threading.countdownevent.countdownevent.aspx)非常适合这种场景。一般实现如下所示：（供他人参考）

```
for i 1 -> N
{
    //start N tasks
    //invoke CountDownEvent.Signal() at the end of each task
}

//see if CountDownEvent.IsSet here 
```

# filter - 在 Google Analytics 配置文件过滤器中排除/包括基于 URI 的流量

> ID：12110147
> 
> 赞同：2
> 
> 时间：2012-08-24T13:16:15.280
> 
> 标签：filter, google-analytics

您如何从整个 Google Analytics（分析）配置文件中排除来自某个目录（及其下的所有内容）的流量？

示例：
www.thesite.com - 应该被跟踪
www.thesite.com/directory/ - 不应该被跟踪，以及它下面的任何东西

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T08:34:00.567

经过大量的实验，我找到了一种方法来做到这一点。我希望这可以帮助以后的其他人。

在 Profile >> Filters 下，有预定义的过滤器和自定义过滤器。无论我如何编写，预定义的排除对我都不起作用，但我没有设法让自定义过滤器工作。

我使用过：
过滤器类型：自定义过滤器 - 排除
过滤器字段：请求 URL
过滤器模式：(^/directory/)

这适用于排除和“仅包含”，即创建仅跟踪访问 www.thesite.com/directory/ 的内容的配置文件

# smartcard - 我找不到 SLE5542 的 APDU 命令

> ID：12110148
> 
> 赞同：1
> 
> 时间：2012-08-24T13:16:31.497
> 
> 标签：smartcard, apdu

我在任何地方都找不到 SLE5542 智能卡的有效 APDU 列表。实际上我发现了这个： [http](http://www.acs.com.hk/drivers/eng/PMA_ACR38x(CCID)_v6.01.pdf) ://www.acs.com.hk/drivers/eng/PMA_ACR38x(CCID)_v6.01.pdf 但它不起作用。

我还搜索了兼容的 SLE4442，我搜索了一些标准化，但没有。（我找到了一些关于 SLE4442 的综​​合数据表，但它们不包含 APDU 数据）

我是这个领域的新手，所以也许我错过了一些东西。

最后我希望能够读/写一些数据到卡上。（包括可编程安全码 PSC 验证）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T14:41:21.570

如果我没记错的话，SLE5528 和 4428 不是智能卡，只是支持 3 线协议的哑（同步）内存芯片。所以他们不发送 ATR 并且不理解 APDU。相反，他们只理解三个硬连线命令：读取、写入（均使用偏移量操作）和 PIN 验证。可以配置从写入开始需要先前 PIN 输入的偏移量。不幸的是，PCSC 不支持解决此类问题。有一个名为 CT-API 的独立于读卡器的接口（在 90 年代中期在德国有点流行，用于处理健康保险卡，但此后可能几乎消失），但它依赖于读卡器，必须由读卡器制造商提供。令人困惑的是，它也有一个类似 APDU 的命令/响应结构，但这是由驱动程序/阅读器转换为低级硬件操作的。这也说明了，为什么APDU列表那么难得到：芯片本身没有。这个[问题](https://stackoverflow.com/questions/6572979/how-to-write-smart-card-with-pyscard/)有一个很好的答案，这可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T06:59:24.673

你在黑暗中，我在 5528/4428 上遇到过类似的问题，文件并不总是与现实世界相匹配。有时您会发现同一张卡有两个或三个版本，而每个版本都建议不同的 APDU 集，并且在其中的几个中每个都正确或错误。这不会是一个有趣的进入这个领域。其他时候，文件不会向您透露连接过程中缺少的一些细节。这意味着您可能有一半的时间无法建立连接。但是，如果您查看 SDK 中的代码示例，您会突然发现您迫切需要做的事情......

至于 SDK……您可以为您计划学习的 ACS 读卡器/卡购买 SDK。不要误会，也不是SDK写得很好。事实上，通常你甚至无法编译一些代码示例，除非你修复了一些语法错误。即使在你经历了这些之后，有时代码示例中也会出现错误。

还有一件事，我不会打赌他们的技术支持，你会得到几乎自动化的响应，这通常根本没有意义。虽然他们现在换了联系人，但也许你的运气会比我好。

好消息是，一旦你让它工作起来，它可能会在生产中发挥作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-05T14:13:25.120

我刚刚发现了一些可能有用的信息：http: [//flylogic.net/docs/sle4442.pdf](http://flylogic.net/docs/sle4442.pdf)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-13T21:22:23.453

您提供的链接有效，APDU 命令也有效，可能是您在实现中遗漏了某些内容，请注意，在继续执行任何命令之前，您必须先使用以下命令选择卡：
`FF A4 00 00 01 06`
这应该返回`90 00`如果选择成功。
那么您可以使用命令从卡中读取数据
`FF B0 00 XX YY`
**XX**表示位置应该 > 32 和 <256
**YY**表示要读取的数据的长度，这应该返回数据以及 `90 00`读取过程是否成功。

向卡写入数据需要提交密码，默认密码是`FF FF FF`使用此命令
`FF 20 00 00 03`，因此提交密码的命令将是`FF 20 00 00 03 FF FF FF`
然后您可以使用此命令写入数据：
`FF D0 00 XX YY data`
其中**XX**是地址的位置在要写入数据的卡中，**YY**是数据的长度，**data**是要写入的数据

您可以根据需要以相同的方式使用文档中的其他命令

**注意**：所有代码命令都应该是`Hex`格式，数据，内存位置..等

# html - 基本 EventSource 和 SSE 示例

> ID：12110162
> 
> 赞同：1
> 
> 时间：2012-08-24T13:17:11.333
> 
> 标签：html, jquery, tomcat, jquery-events

关于服务端事件和事件源的问题。这是我的简单页面（listener.html）

```
<!DOCTYPE html>
<html>
<head>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
<title>SSE test page</title>

<script type="text/javascript">
$(document).ready(function() {
      var guid = "1234567890";
      var source = new EventSource('servlet/push-event');
      source.onmessage = function (e) {
          alert(e.origin);
      };    
});
</script> 
</head>
<body>Listener!</body>
</html> 
```

并且部署在 Tomcat 之外，所以我使用 ( [http://127.0.0.1:8080/html/listener.html](http://127.0.0.1:8080/html/listener.html) )访问它

我用Java实现了服务器端：

```
resp.setContentType("text/event-stream");
resp.setHeader("Cache-Control", "no-cache");
PrintWriter out;
try {
    out = resp.getWriter();
    out.write("data: wowowowowowo");
    out.flush();
    out.close();
} catch (IOException e) {
    e.printStackTrace();
} 
```

当我在 Firefox 和 Android 4 本机浏览器中调用 listener.html 时，我会连续看到警报，好像事件是从其他地方触发的，但我不知道在哪里。

其他浏览器如 IE9 或 Chrome 没有响应。

问题出在哪里？我，Tomcat 还是浏览器？

# actionscript-3 - Flash 是否渲染超出舞台边界的项目？

> ID：12110163
> 
> 赞同：0
> 
> 时间：2012-08-24T13:17:13.967
> 
> 标签：actionscript-3, flash

闪存是否足够智能以“隐藏”不在舞台上的 PIXELS，以减少内存使用？或者我必须手动完成，如果它完全减少了内存使用量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T13:33:32.763

Flash 不会渲染不在舞台上的对象（根据[http://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118a9b90204-7e3e.html](http://help.adobe.com/en_US/as3/dev/WS5b3ccc516d4fbf351e63e3d118a9b90204-7e3e.html)）。

但是，我认为您可能混淆了两个不同的问题。

一个问题是 CPU/GPU 性能 - 为此无需担心舞台外对象，因为 Flash 不会浪费时间渲染舞台边界之外的显示对象。

另一个问题是内存使用。您创建的每个对象都会占用一些内存，无论它是否在屏幕上可见。Flash 有一个垃圾收集器，它会定期处理未使用的对象，但是“未使用的对象”是指未被任何其他对象引用的对象，因此如果您遇到内存问题，您将不得不通过删除事件侦听器来手动清理对象，归零引用等

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T13:19:21.083

没有类似的方法可以减少内存使用量。如果它在您的显示器上可见，则需要由 Flash 渲染并在内存中存储像素颜色。

尽管 Flash 现在非常快，尤其是在硬件加速方面。因此，您不必太担心性能，AS3 为您的虚拟降压带来了很多好处。我会赌上我所有的虚拟美元。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T13:34:07.690

Flash 将按预期将所有位图、movieclip 实际上所有对象存储在内存中。如果你有一个比舞台大的位图，它仍然会占用内存，不管你只显示它的一部分。

如果您有多个位图或影片剪辑可能会移出舞台并且其中没有一部分是可见的，那么恢复内存的唯一方法是确保取消引用对象并将其设置为 null。

```
myMovieClip = null; 
```

在设置为 null 之前，您还必须确保没有其他对象引用该对象，例如它不能存储在数组中或附加任何事件侦听器，因此：

```
myMovieClip.removeEventListener(Event.WHATEVER, eventHandler); 
```

对于 bitmapdata 对象，您需要在设置为 null 之前先调用 dispose：

```
myBitmapdata.dispose();
myBitmapdata = null; 
```

然后，这允许 GC 在选择时恢复内存，除非您使用的是 AIR，这意味着您可以自己请求 gc 调用：

```
System.gc(); 
```

如果您在 Flash Builder 中进行开发，最佳做法是定期分析您的应用程序并点击按钮强制执行 gc 调用。然后，您可以查看哪些对象在内存中持久存在并找到导致内存泄漏的引用。

# ruby-on-rails - Ruby 中的布尔值

> ID：12110164
> 
> 赞同：1
> 
> 时间：2012-08-24T13:17:14.513
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2

我有一个以布尔值作为参数的方法。我知道最好避免使用布尔值。无论如何，就我而言，这是最有效的方式。

好吧，这里有一个方法：

```
 def some_method(include_some_values = false)
          #do some workcountries = []
          if include_some_values 
             #do some additional work  
           end
           #return value
    end 
```

呼叫 (haml)

```
= form_for @address do |f|
  = f.select :fied1, MyModel.some_method(true) #it's okay 
```

但是，如果我称它为

```
= f.select :fied1, MyModel.some_method true 
```

或者

```
= f.select :fied1, MyModel.some_method :true 
```

或者

```
= f.select :fied1, MyModel.some_method false 
```

或者

```
= f.select :fied1, MyModel.some_method :false 
```

那么它就行不通了。为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T13:31:25.493

如果您的问题涉及不使用括号时的问题，则它与布尔值无关，而与 Ruby 解析器有关。

在某些情况下，将方法作为参数传递给另一个方法需要括号：

```
def a_method(value)
   puts value
end

def one_argument(value)
   puts value
end

def two_arguments(value1, value2)
   puts value1 + value2
end

# These snippets work fine
one_argument a_method 15
one_argument a_method(15)
two_arguments 999, a_method(15)
# ... etc ...

# This one doesn't
two_arguments 999, a_method 15 
```

最后一个示例（就像您在问题中所做的那样）对于 Ruby 解析器来说是模棱两可的，因此您会收到错误消息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-24T13:28:59.737

大概

```
= f.select :fied1, MyModel.some_method true 
```

被解释为：

```
= f.select(:fied1, MyModel.some_method) true 
```

因此，只需使用括号来避免歧义。

PS：`:true`是一个符号，所以如果你处理布尔值，就没有理由摆弄符号。

# css - Firefox 和 IE 中的 CSS 工具提示错误定位

> ID：12110166
> 
> 赞同：0
> 
> 时间：2012-08-24T13:17:24.343
> 
> 标签：css

为什么工具提示（悬停）在 Firefox 和 IE 中出现错误，Chrome 很好

示例[http://dabblet.com/gist/3450459](http://dabblet.com/gist/3450459)

**CSS**

```
 .hiq-checkin img { float: left;display: block;margin-right: -2px;}
.visited-profile {float: left;}
.visited-profile a {color: #333 !important;text-decoration:none;position: relative;}
.green-badge {position: relative;z-index: 601;background: url('http://png-3.findicons.com/files//icons/1689/splashy/16/check.png') no-repeat;width: 10px;height: 15px;display: inline-block;float: none;}
.idea-ttip-wrapper {position: absolute;width: 156px;z-index: 602;margin-top: -8px;display: none;margin-left: -53px;}
.ttip-arrow {background: url('http://www.splitbrain.org/_static/ico/semlabs/ico/arrow_up.png');height: 7px;width: 11px;position: absolute;left: 23px;top: -5px;}
.idea-ttip-content {background: #ffffcc;border: 2px solid #cccc99;display: inline-block;text-decoration: none;color: #666;padding: 6px;font-size: 10px;}
.visited-profile a:hover .idea-ttip-wrapper, .visited-profile a:focus .idea-ttip-wrapper {  display: block;} 
```

**HTML**

```
<div class="hiq-checkin row-id">
<div class="visited-profile without-photo">
  <a href="#">
  <span class="green-badge"></span> XXXXX,
   <div class="idea-ttip-wrapper">
    <div class="ttip-arrow"></div>
      <div class="idea-ttip-content">
          xxxxx xxxxx<br>
      lorem for ipsum xxx
      </div>
  </div>
  </a>
   <a href="#">
  ZZZZZ,
  </a>
    <a href="#">
  <span class="green-badge"></span> ACSCS
    <div class="idea-ttip-wrapper">
    <div class="ttip-arrow"></div>
      <div class="idea-ttip-content">
          xxxxx xxxxx<br>
      lorem for ipsum xxx
      </div>
  </div>
  </a>
  <span style="line-height: 2.5;"> edfsfsfsdn sdfdsf fsdsdfdfs </span>
</div>

</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T13:36:57.300

添加

```
 .idea-ttip-wrapper {
      //your existant css rules
      left:0;
      margin-left:0;
      top:10px; //tweak this to whatever you need
  } 
```

和

```
visited-profile a {
    color: #333 !important;
    text-decoration: none;
    position: relative;
    display: inline-block;
} 
```

[http://dabblet.com/gist/3451092](http://dabblet.com/gist/3451092)

# mysql - 在 MySQL 选择查询的结果中增加一行

> ID：12110167
> 
> 赞同：8
> 
> 时间：2012-08-24T13:17:25.497
> 
> 标签：mysql

我有一个这样的 MySQL 表

```
id   Name   count
1    ABC    1
2    CDF    3
3    FGH    4 
```

使用简单的选择查询我得到的值是

```
1    ABC    1
2    CDF    3
3    FGH    4 
```

我怎样才能得到这样的结果

```
1    ABC    1
2    CDF    3
3    FGH    4
4    NULL   0 
```

您可以看到最后一行。`last_id+1, Null ,0`记录完成后，应添加此格式的额外行 。你可以在上面看到。即使我的原始表格中也没有这样的行。可能有 N 行不固定 3,4

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2016-02-17T11:46:26.247

答案很简单

```
select (select max(id) from mytable)+1 as id, NULL as Name, 0 as count union all select id,Name,count from mytable; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T13:21:53.703

这看起来有点乱，但它应该可以工作。

```
SELECT a.id, b.name, coalesce(b.`count`) as `count`
FROM
    (
    SELECT 1 as ID
    UNION
    SELECT 2 as ID
    UNION
    SELECT 3 as ID
    UNION
    SELECT 4 as ID
    ) a LEFT JOIN table1 b
        ON a.id = b.id
WHERE a.ID IN (1,2,3,4) 
```

**更新 1**

您可以简单地生成一个具有 1 列的表，最好具有名称 ( *ID* )，其记录可能多达 10,000 条或更多。然后，您可以简单地将其与具有原始记录的表连接起来。例如，**假设您有一个名为`DummyRecord`1 列的表并且上面有 10,000 行**

```
SELECT a.id, b.name, coalesce(b.`count`) as `count`
FROM   DummyRecord a LEFT JOIN table1 b
        ON a.id = b.id
WHERE a.ID >= 1 AND 
      a.ID <= 4 
```

而已。或者如果你想从 10 到 100，那么你可以使用这个条件

```
...
WHERE a.ID >= 10 AND 
      a.ID <= 100 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-02T12:00:43.350

只需使用 mysql [ROLLUP](http://dev.mysql.com/doc/refman/5.0/en/group-by-modifiers.html)。

```
SELECT * FROM your_table
      GROUP BY Name WITH ROLLUP; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T13:27:46.540

```
select
  x.id,
  t.name,
  ifnull(t.count, 0) as count
from
  (SELECT 1 AS id
    -- Part of the query below, you will need to generate dynamically,
    -- just as you would otherwise need to generate 'in (1,2,3,4)'
    UNION ALL SELECT 2
    UNION ALL SELECT 3
    UNION ALL SELECT 4
    UNION ALL SELECT 5
  ) x
  LEFT JOIN YourTable t 
    ON t.id = x.id 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-24T13:29:08.020

如果`id`您要从中选择的表中不存在 ，则需要`LEFT JOIN`针对要返回的每个列表`id`- 这样，它将返回`null`不存在的值和那些不存在的值的真实值做。

我建议创建一个`numbers`包含数字的单列表表：

```
CREATE TABLE `numbers` (
    id int(11) unsigned NOT NULL
); 
```

然后插入大量数字，从`1`你认为`id`你所见过的最高数字开始，一直上升到一千左右。也许从`1`到`1000000`安全起见。无论如何，您只需要确保它足够高以涵盖`id`您可能遇到的任何可能。

之后，您的查询可能如下所示：

```
SELECT n.id, a.*
FROM
    `numbers` n
    LEFT JOIN table t
        ON t.id = n.id
WHERE n.id IN (1,2,3,4); 
```

该解决方案将允许动态增长的列表，`ids`而不需要带有联合列表的子查询；但是，提供的其他解决方案同样适用于一个小的已知列表（并且也可以动态生成）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-11-12T21:08:46.953

为了澄清这一点，可以将额外的行附加到结果集中

```
select * from table union select 123 as id,'abc' as name 
```

结果

```
 id  | name
------------
***  |  ***
***  |  ***
123  |  abc 
```

# phpunit - PHPUnit 只运行目录中的第一个文件

> ID：12110170
> 
> 赞同：2
> 
> 时间：2012-08-24T13:17:56.623
> 
> 标签：phpunit

在一个目录中，我有两个文件

oneTest.php

```
<?php

class oneTest extends PHPUnit_Framework_TestCase {

    public function testSomethingOne()
    {
        echo 'ONE TEST';
        $this->assertEquals(1, 1);
    }

} 
```

twoTest.php

```
<?php

class twoTest extends PHPUnit_Framework_TestCase {

    public function testSomethingTwo()
    {
        echo 'TWO TEST';
        $this->assertEquals(2, 2);
    }

} 
```

从目录中我可以很好地运行两个测试

```
phpunit oneTest.php
phpunit twoTest.php 
```

我得到了两者的预期输出。

如果我尝试运行所有测试

```
phpunit * 
```

它只运行第一个测试。

我在 Ubuntu 12.04 上运行 phpunit 3.6.12。

任何想法为什么会发生这种情况？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T13:24:37.477

这只是 phpunit 的一个限制，它没有被编程为支持命令行上的多个文件。但是，您可以[将目录名称传递给 phpunit](http://www.phpunit.de/manual/current/en/organizing-tests.html)。如果要在当前目录中运行测试，请使用

```
phpunit . 
```

[编辑：或者，您可以在XML 配置文件](http://www.phpunit.de/manual/current/en/appendixes.configuration.html)中指定一个测试套件。

# sql - 从联合声明中删除默认顺序

> ID：12110171
> 
> 赞同：4
> 
> 时间：2012-08-24T13:17:57.307
> 
> 标签：sql, sql-server, sql-server-2008, sql-order-by

我想显示这样的数据：

```
Column1        Column2
-----------------------
TotalAvg         60%

A1               50%

B1               70%

Z1               60% 
```

我的 sql 脚本类似于：

```
select 'Total Avg' as Column1,'60%' as Column2

union

select Column1,Column2 from tblAvg 
```

我得到的结果是这样的：

```
Column1        Column2
------------------------

A1               50%

B1               70%

TotalAvg         60%

Z1               60% 
```

问题：我想删除默认排序并希望得到我们正在执行联合表的顺序。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-24T13:21:00.053

您可以添加一个指定结果顺序的列：

```
select 'Total Avg' as Column1,'60%' as Column2, 1 as OrderCol
union
select Column1,Column2, 2 from tblAvg
order by OrderCol 
```

如果没有`order by`，数据库可以自由地以任何顺序返回行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T13:21:21.763

```
SELECT
  *
FROM
(
  select 0 as pos, 'Total Avg' as Column1, '60%' as Column2
  union
  select 1 as pos,                Column1,          Column2 from tblAvg 
)
  AS data
ORDER BY
  pos, column1, column2 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T13:21:29.627

你可以做这样的事情

```
select * From
(
select 'Total Avg' as Column1,'60%' as Column2, 1 as ItemOrder

union

select Column1,Column2,2 from tblAvg
) innertable
Order By ItemOrder 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T13:20:50.767

尝试使用

```
select 'Total Avg' as Column1,'60%' as Column2

union all

select Column1,Column2 from tblAvg 
```

# file - 根据另一个过滤一个文本文件

> ID：12110173
> 
> 赞同：0
> 
> 时间：2012-08-24T13:18:03.703
> 
> 标签：file, shell, filter

星期五下午，我正在努力根据另一个文件的内容过滤一个文件。我有一个包含制表符分隔值列表的文件，例如

```
1   H   3   0.3937180424
1   H   4   0.3594894329
1   H   5   0.3501040944
1   H   6   0.2699868938
1   H   7   0.3200876953
1   H   8   0.3047540533
1   H   9   0.3088543852
1   H   10  0.305982215
1   H   11  0.2798568174 
```

和另一个带有制表符分隔值的文件，例如

```
chr1    1   74440
chr1    2   90281
chr1    3   136529
chr1    4   484700
chr1    5   294898
chr1    6   284812
chr1    7   432322
chr1    8   458256
chr1    9   290078
chr1    10  366518
chr1    11  342903 
```

我想过滤第二个文件以仅包含第一个文件中的位置。目前第二个文件有多余的行，有些需要删除。位置信息来自组合的第一个文件的第一列和第三列。所以示例第一行中的位置信息是 1 3。表示染色体 1 位置 3。这对应于第二个文件（第三行）中的 chr1 3。有谁知道按文件 1 过滤文件 2 的简单方法。如果这样更简单，我可以删除文件 2 中的“chr”字符串。我可以在 shell 或 python（学习该语言）中使用的任何快速解决方案都会非常棒。需要解决这个问题，然后在分析中使用输出。

在此先感谢您的帮助，

鲁巴尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T13:24:08.643

假设您`bash`用作外壳，这可能会起作用。我不确定如果 file1.txt 很大，性能会如何。

```
grep -f <( awk '{print "chr"$1"\t"$3}' file1.txt ) file2.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T13:44:08.770

你问python：

```
#!/usr/bin/env python

F = {}

with open("f1") as fd:
    for line in fd:
        key="chr%s%s" % (line.split()[0], line.split()[2])
        F[key]=True

with open("f2") as fd:
    for line in fd:
        key="%s%s" % (line.split()[0], line.split()[1])

        if key in F:
            print line.strip() 
```

输出：

```
chr1    3   136529
chr1    4   484700
chr1    5   294898
chr1    6   284812
chr1    7   432322
chr1    8   458256
chr1    9   290078
chr1    10  366518
chr1    11  342903 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T13:44:50.583

只需使用 awk：

```
awk -F '\t' '
  FILENAME == ARGV[1] { pair["chr" $1 FS $3] = 1; next }
  ($1 FS $2) in pair
' file1 file2 
```

# javascript - 如何将 IMG 从动态属性插入 DOM？

> ID：12110174
> 
> 赞同：1
> 
> 时间：2012-08-24T13:18:17.277
> 
> 标签：javascript, ember.js

在我看来，我有以下属性：

```
avatar: function()
{
    var image = new Image();
    image.setAttribute('src', 'img/people/%@'.fmt('Finck_Brian.jpg'));
    return image;
}
.property(), 
```

基本上我要做的就是使用标准`{{ person.avatar }}`标记将返回的元素插入到 DOM 中。但是，我得到的只是以下内容：

> [对象 HTMLImageElement]

我确信在 EmberJS 中有一种方法可以取消*转义*返回的字符，因为它将 HTML 转换为*安全*字符串。类似于 unescape 的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T13:25:34.083

我认为最简单的 ember 是使用 {{bindAttr}} 帮助器。在您的模板中，尝试以下操作：

```
<img {{bindAttr src="person.avatar"}}></img> 
```

和你的头像属性是这样的：

```
avatar: function () {
  return 'img/people/%@'.fmt('Finck_Brian.jpg');
}.property() 
```

这是一个小的 jsfiddle 来说明：http: [//jsfiddle.net/Sly7/dWr8T/](http://jsfiddle.net/Sly7/dWr8T/)

现在回答你的问题，你有一个帮助器来返回一个安全的 html 字符串。我认为这应该像 'your string'.htmlSafe() 一样简单（实际上 Ember 使用此函数丰富了 String 原型，请参阅[http://docs.emberjs.com/#doc=packages_ember-handlebars_lib_string.js&src=true](http://docs.emberjs.com/#doc=packages_ember-handlebars_lib_string.js&src=true)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T13:21:29.553

您使用的模板语言需要一个 HTML 字符串，而不是 HTML 元素对象。

您可以使用以下命令将 HTML 元素对象转换为 HTML 字符串：

```
 var container = document.createElement('div');
 container.appendChild(desired_element);
 return container.innerHTML; 
```

# c - C - 在 Mac OSX Lion 上编译时架构 x86_64 的未定义符号

> ID：12110184
> 
> 赞同：13
> 
> 时间：2012-08-24T13:19:02.237
> 
> 标签：c, macos, osx-lion, x86-64, cs50

我在 Mac OSX Lion 上编译一个非常简单的 name.c 文件时遇到了一些问题。

现在，我开始在 cs50.net 上学习哈佛 CS50 课程。我对编程并不完全陌生，但我很好奇这门课程是如何教授的。

这是name.c的来源：

```
#include <stdio.h>
#include <cs50.h>

int
main(void)
{
    printf("State your name:\n");
    string name = GetString();
    printf("O hai, %s!\n", name);
    return 0;
} 
```

如您所见，它需要这个库：[https](https://manual.cs50.net/CS50_Library) ://manual.cs50.net/CS50_Library 。

现在，当我编译它时，会发生这种情况：

```
Undefined symbols for architecture x86_64:
  "_GetString", referenced from:
      _main in name-vAxcar.o
ld: symbol(s) not found for architecture x86_64
clang: error: linker command failed with exit code 1 (use -v to see invocation)
make: *** [name] Error 1 
```

如果我在源文件中使用相同的 GetString() cs50.c 函数，它会完美运行：

```
#include <stdio.h>
#include <string.h>
#include <float.h>
#include <limits.h>
#include <stdbool.h>
#include <stdlib.h>

typedef char *string;

string GetString(void);

int
main(void)
{
    printf("State your name:\n");
    string name = GetString();
    printf("O hai, %s!\n", name);
 }

string
GetString(void)
{
    // CODE
} 
```

为什么会这样？我按照上面链接中的说明安装了库；我查了一下，cs50.h和libcs​​50.a分别在/usr/local/include和/usr/local/lib中。

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-24T14:44:12.847

您遇到的问题是在链接阶段，而不是编译。你没有提供 的实现`GetString`，只有它的声明（通过`.h`你的文件`#include`）。

要提供实现本身，您通常需要链接到包含它的库；这通常由`-l`标志来完成`g++`。例如，

```
g++ file.cpp -lcs50 
```

您的第二个示例代码确实链接，因为您手动（并明确）提供了一个实现`GetString`，尽管是一个空的。

# java - 我需要声明一个可绘制变量吗？

> ID：12110187
> 
> 赞同：0
> 
> 时间：2012-08-24T13:19:10.210
> 
> 标签：java, android, image, variables, loading

我正在制作我的第一个应用程序，我对它非常满意，但我需要一件事的帮助：为 ImageView 设置图像时，我应该这样做吗？

```
if (blah > 0 && blah < 10) {
    Drawable question_night = res.getDrawable(R.drawable.wt_you_should_wear_2);
    questionImg.setImageDrawable(question_night);
} 
```

或这个？

```
if (blah > 0 && blah < 10){
    questionImg.setImageDrawable(res.getDrawable(R.drawable.wt_you_should_wear_2));
} 
```

我需要知道哪个更好，它使用了多少 VM 堆，是否影响应用程序的速度，是否有问题（泄漏等）。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T13:22:30.867

它不会对性能或内存使用产生影响。不过，您可能会发现第一个选项更易于阅读和调试。

（另一方面，我对变量的命名会有所不同。完全不清楚为什么`question_night`会引用 a `Drawable`，而传统的名称`questionNight`无论如何都是。）

编辑：此答案*仅从*Java 语言的角度比较给出的两个选项。Siliconeagle 直接传递资源而不是通过 a 的答案`Drawable`对我来说听起来确实是一种更清洁的方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-24T13:22:55.437

你可以使用：

```
questionImg.setImageResource(R.drawable.wt_you_should_wear_2) 
```

# java - 使用递归打印单链表的向后方法

> ID：12110190
> 
> 赞同：0
> 
> 时间：2012-08-24T13:19:22.597
> 
> 标签：java, algorithm, recursion, iterator, linked-list

我正在尝试过去一年的问题以进行重考，并被以下问题所困扰。问题 1

在下文中，您可以假设存在 ListIterator 接口和 LinkedList 类，并使用以下方法

```
public interface ListIterator<E>
{
  E next();
  boolean hasNext();

}

public class LinkedList<E>
{

  public void addLast(E obj){..}
  public int size(){..}
  public ListIterator<E> listIterator(){...}

} 
```

使用上面列出的 ListIterator 接口和 LinkedList 类中的方法完成了下面给出的 printBackward 方法的设计。您不应该在方法中引入任何新变量。在您的回答中，不要复制整个方法。写入 Initialisation 1, Initialisation 2, Block 1, Block 2, Block 3 的内容。printBackward 方法应该递归地写在一个向后的单个列表中。参数 n 指定列表的大小。

```
public class MyLinkedList<E> extends LinkedList<E>
{

           public void printBackward(int n)
           {

             if(n > 0){

              ListIterator<E> itr = /**Initialisation 1**/   list1.listIterator();

              int count = /**Initialisation 2**/  0;

              E item;

              while(itr.hasNext())
              {
                /**Block 1**/  addLast(list1); printBackward(); count --;

              }

                /**Block 2**/ E.next;
             }else

             /**Block 3**/ return;
           }
         }
 } 
```

我已在 /** ..**/ 旁边插入我的答案，但不确定它们是否正确。如果有人可以帮助我纠正我的错误，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T13:32:09.657

获取列表的长度并创建一个 for 循环以向后遍历它们，例如

```
for(int i = *sizeOfList*; i > 0; i--)
{

System.out.println(currentItem[i]);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T16:02:16.920

```
public void printBackward(int n) {

if (n > 0) {
    ListIterator<E> itr = listIterator(); /** Initialisation 1 **/          
    int count = 0; /** Initialisation 2 **/

    E item;
    while (itr.hasNext()) {
        /** Block 1 **/             
        item = itr.next();
        if (count == n-1) {
            System.out.println(item); //prints here
           count++;
        }               
    }
    /** Block 2 **/
     printBackward(n-1);
} else {            
    /** Block 3 **/
    // nothing
} 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T16:23:08.603

printBackward方法的设计很奇怪，似乎他们希望你在每次递归中无论如何都使用迭代器到达最后一个位置，这必须是性能/有效性不是这里关心的问题或者他们想**看到**你多么机智。在下面找到解决方案：

```
public void printBackward(int n) {

    if (n > 0) {
        ListIterator<E> itr = listIterator(); /** Initialisation 1 **/          
        int count = 0; /** Initialisation 2 **/

        E item;
        while (itr.hasNext()) {
            /** Block 1 **/             
            item = itr.next();
            if (++count == n) {
                System.out.println(item); //prints here
                printBackward(n-1);
            }               
        }
        /** Block 2 **/
        // nothing
    } else {            
        /** Block 3 **/
        // nothing
    }
} 
```

您可以使用以下方式对其进行`java.util.LinkedList`测试`java.util.ListIterator`：

```
public static void main(String[] args) {
    MyLinkedList<String> list = new MyLinkedList<String>();
    list.add("1");
    list.add("2");
    list.add("3");
    list.printBackward(list.size());
} 
```

# ios - iOS 5 Json 和 utf8 问题

> ID：12110192
> 
> 赞同：2
> 
> 时间：2012-08-24T13:19:28.993
> 
> 标签：ios, json, utf-8

我使用 iOS 5 JSON 功能从 Web 加载数据。我的目标是获取一些推特数据 - 数据通过网络过滤，我通过以下网址获取： [http ://botpwn.org/ios/getfollowers.json?uid=63964843](http://botpwn.org/ios/getfollowers.json?uid=63964843)

那行得通，我在那里没有问题 - 但我的问题始于解析我的应用程序中的数据。

我在这里加载数据

```
 dispatch_async(kBgQueue, ^{
                  NSData* data = [NSData dataWithContentsOfURL:[NSURL URLWithString:[NSString stringWithFormat:@"http://botpwn.org/ios/getfollowers.json?uid=%@", my_uid]]];
          [self performSelectorOnMainThread:@selector(fetchedData:) 
                                 withObject:data waitUntilDone:YES];
      });

  -(void)fetchedData:(NSData *)responseData {
      NSError* error;
      NSDictionary* json = [NSJSONSerialization 
                            JSONObjectWithData:responseData                        
                            options:kNilOptions 
                            error:&error];

      latestFollower = [json objectForKey:@"followers"]; //2    

      for (int i = 0; i < [latestFollower count]; i++){
          [temp addObject:[latestFollower objectAtIndex:i]];

      }

      if (latestFollower == nil || latestFollower.count == 0){
          NSLog(@"No followers");
      }
  } 
```

现在我总是得到答案，我有一个空的 latestFollower 数组——我知道问题是，twitter 用户的某些名称（不是屏幕名称）包含特殊字符，iOS 无法解析它。

我搜索了解决方案（将 php 标头设置为 utf8 等），但没有任何帮助。

也许您知道如何正确解析它，或者我做错了什么但我不明白。

编辑：我自己修复了它 - 最后我使用了一个工具（http://jsonlint.com/）来检查 json 输出中是否有错误，是的 - 是的。谢谢你的想法！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T09:37:45.730

自己修好了——最后我使用了一个工具（[http://jsonlint.com/](http://jsonlint.com/)）来检查 json 输出中是否有错误，是的——确实如此。谢谢你的想法！:)

# javascript - 从自执行函数返回函数会影响 Javascript 性能吗？

> ID：12110205
> 
> 赞同：11
> 
> 时间：2012-08-24T13:20:22.310
> 
> 标签：javascript, performance, scope

在 Firefox 中，以下两个函数之间似乎存在很大的性能差异：

```
var n1 = 12;

var add1 = function(n2){
    return n1 + n2;
}

var add2 = (function(){
    return function(n2){
            return n1 + n2;
    }
})(); 
```

我认为这一定是由于引入了另一个级别的范围，因此创建了第三个示例，其中变量缓存了一个级别。但这显示了更大的减少（80％！）

```
var add3 = (function(){
    var cn1 = n1;
    return function(n2){
            return cn1 + n2;
    }
})(); 
```

我原以为这里的关闭会缩小性能差距，而不是扩大它。有人知道这里发生了什么吗？

jsPerf 测试页面：http: [//jsperf.com/variable-scope-speed](http://jsperf.com/variable-scope-speed)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T14:40:30.343

这很有趣，但我在这里的小测试似乎证实了我之前的假设，即*jsPerf*环境会影响作用域和作用域链查找本身。我没有深入研究“如何”和“为什么”，但这是我的小测试脚本：

```
var n1 = 12;

var add1 = function(n2){
        return n1 + n2;
}

var add2 = (function(){
        return function(n2){
                return n1 + n2;
        }
})();

var add3 = (function(){
        var cn1 = n1;
        return function(n2){
                return cn1 + n2;
        }
})();

var add4 = function( n2, n1 ) {
    return n2 + n1;
}.bind(null, n1);

var tests = [add1, add2, add3, add4],
    start, stop, loops;

tests.forEach(function( fnc ) {
    loops = 100000;

    start = Date.now();
    while( loops-- ) {
        fnc( 2 );
    }
    stop = Date.now();

    console.info('Method ', fnc.name || fnc.toString(), ': ', stop - start, ' ms.');
}); 
```

我的 FireFox 14 上的结果如下所示：

> 方法add1：570ms。
> 方法add2：566ms。
> 方法add3：414ms。
> 方法add4：479ms。

最新的 Chrome 结果：

> 方法add1：199ms。
> 方法add2：136ms。
> 方法add3：85ms。
> 方法add4：144ms。

这肯定看起来更合理。封闭的作用域链查找必须总是更快，这仅仅是因为存在较短的查找链。即使所有现代浏览器通常不进行*经典*的范围链查找，我也知道这一点。无论如何，由于浏览器为自由（或超出范围）变量创建了非常聪明的查找表，所有结果至少应该是相同的。过度优化全局对象访问 IMO 没有任何意义。

正如您所注意到的，我为绑定方法创建了一个额外的测试用例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T14:36:59.637

```
var n1 = 12;

// "add1" is superfast in Firefox, but not in Chrome. Why?
// it seems Firefox is smarter in retrieving n1 value from global scope
var add1 = function(n2){
        return n1 + n2;
}

// "add2" is much slower in Firefox, but in Chrome the speed is almost equal to "add2"
// it seems that Firefox's smart retrieving from global scope is not applied in this case
// it is understandable that "add2" is slower, because the interpreter needs to go back two levels in the scope chain to find the "n1" variable value
var add2 = (function(){
        return function(n2){
                return n1 + n2;
        }
})();

// If JavaScript works as PHP, then it won't copy "n1" value in "cn1".
// If this is the case, then it is understandle why it is slower.
// The interpreter first needs to search and find "cn1" value;
// when it finally finds it in the previous scope level,
// then it needs to start a second "search and find travel", looking for the value.
// This means "cn1" does not contain "12", but a reference to it in the memory.
// While I don't know if this is how JavaScript engine works,
// I know that PHP does not create a copy of the value -
// both variables share the same content in the memory.
// Short story being: it is slower because it must perform two "searches" instead of one.
var add3 = (function(){
        var cn1 = n1;
        return function(n2){
                return cn1 + n2;
        }
})(); 
```

# jquery - Why would I want a jQuery UI Widget to inherit from itself?

> ID：12110206
> 
> 赞同：6
> 
> 时间：2012-08-24T13:20:25.297
> 
> 标签：jquery, jquery-ui

As of jQuery 1.9, [a widget can inherit from itself](http://ajpiano.com/widgetfactory/#slide20). I couldn't find a real-world example of why this would be useful, and frankly the idea of inheriting from oneself breaks my brain. What is the purpose of this feature? What can I do using this feature that I couldn't do previously, or would've been much harder previously?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T13:23:47.650

The reason is to redefine the same widget. So, you add new capabilities to it, don't needing to extend it in another object.

In the example presented in the link that you sent:

```
$.widget("ui.dialog", $.ui.dialog, {
    close: function() {
        if (confirm( "Is it closing time?" )) {
            this._super("close");
        }
    }
}); 
```

After the execution of the code above, every dialog that is created will pop a confirm message when the user clicks in the close button and if s/he accepts it, it will close.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T13:26:15.033

As it is said [in the slide you linked us](http://ajpiano.com/widgetfactory/#slide20), "**this is the ideal way to extend widgets**".

Now you can extend a widget without creating a new, "different" widget object ("different" meaning "another name"). You can add a functionality and still use the very same widget object name.

```
// An incredibly contrived example
$.widget("ui.dialog", $.ui.dialog, {
  close: function() {
    if (confirm( "Is it closing time?" )) {
      this._super("close");
    }
  }
}); 
```

As we can see in the example, we can add a feature to the dialog object, which will appear in the already existent dialogs, i.e., you don't need to create a new "extendedDialog" and then change existent code to use the "extendedDialog" object. Instead, the included functionality will be already available and working there.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T13:26:24.607

This gives you capabilities similar to categories in objective-c, you can add functionality to a class(widget) without having to change the class/widget code itself, or even have access to it's source.

# c - 如何用随机（十六进制）字符填充字符串？

> ID：12110209
> 
> 赞同：7
> 
> 时间：2012-08-24T13:20:38.337
> 
> 标签：c, linux

我有一个字符串（无符号字符），我想只用十六进制字符填充它。

我的代码是

```
unsigned char str[STR_LEN] = {0};
for(i = 0;i<STR_LEN;i++) {
    sprintf(str[i],"%x",rand()%16);
} 
```

当然，在运行时我会出现段错误

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-24T13:29:59.403

1.  字符串是`char`-s 不是`unsigned char`-s的数组
2.  您正在使用`str[i]`（类型`unsigned char`为 ）作为 的第一个参数`sprintf`，但它需要类型`char *`（指针）。

这应该会好一点：

```
char str[STR_LEN + 1];
for(i = 0; i < STR_LEN; i++) {
    sprintf(str + i, "%x", rand() % 16);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T13:22:28.323

第一个参数[`sprintf()`](http://en.cppreference.com/w/c/io/fprintf)应该是a `char*`，但是`str[i]`是a `char`：**这是导致分段错误的原因**。编译器应该对此发出警告。`gcc main.c`，未指定高警告级别，发出以下内容：

> 警告：传递 sprintf 的参数 1 使指针从整数而不进行强制转换

一个字符的十六进制表示可以是 1 个或 2 个字符（`9`或`AB`例如）。对于格式设置，将精度设置为`2`并将填充字符设置为`0`。还需要为终止 null 添加一个字符并将循环`str`的步骤设置为而不是（以防止覆盖先前的值）：`for``2``1`

```
unsigned char str[STR_LEN + 1] = {0};
int i;

for (i = 0; i < STR_LEN; i += 2)
{
    sprintf(&str[i], "%02X", rand() % 16);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T13:29:06.470

你可以尝试这样的事情：

```
#include <stdio.h>
#include <stdlib.h>

#define STR_LEN 20

int main(void)
{
   unsigned char str[STR_LEN + 1] = {0};
   const char *hex_digits = "0123456789ABCDEF";
   int i;

   for( i = 0 ; i < STR_LEN; i++ ) {
      str[i] = hex_digits[ ( rand() % 16 ) ];
   }

   printf( "%s\n", str );

   return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T13:33:37.133

您的代码中有几个不清楚的地方和问题。我将“十六进制字符”解释为“十六进制数字”，即来自 {0,1,2,3,4,5,6,7,8,9,a,b,c,d,e,f} 的符号，而不是“ascii 字符代码点的十六进制值”。这可能是也可能不是你的意思。

这应该这样做：

```
void hex_fill(char *buf, size_t max)
{
  static const char hexdigit[16] = "0123456789abcdef";
  if(max < 1)
    return;
  --max;
  for(i = 0; i < max; ++i)
    buf[i] = hexdigit[rand() % sizeof hexdigit];
  buf[max] = '\0';
} 
```

以上将始终以 0 结束字符串，因此不需要您提前这样做。它将正确处理所有缓冲区大小。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-01-04T01:03:50.620

我对以下一些答案的变体；请注意时间播种 rand 函数，而不是使用 const 大小的 char，我使用一个向量，然后将其转换为字符串数组。

[Boost 变量生成器文档](https://valelab4.ucsf.edu/svn/3rdpartypublic/boost/doc/html/boost/variate_generator.html)

```
std::string GetRandomHexString(unsigned int count)
{
    std::vector<char> charVect = std::vector<char>(count);
    //Rand generator
    typedef boost::random::mt19937 RNGType;
    RNGType rng(std::time(nullptr) + (unsigned int)clock()); 
    //seeding rng
    uniform_int<> range(0, 15); //Setting min max
    boost::variate_generator<RNGType, boost::uniform_int<> >generate(rng, range); //Creating our generator
    //Explicit chars to sample from
    const char hexChars[16] = { '0','1','2','3','4','5','6','7','8','9','A','B','C','D','E','F' };
    //
    for (int i = 0; i < count; i++)
    {
        charVect[i] = hexChars[generate()];
    }
    //
    return std::string(charVect.begin(), charVect.end());;
} 
```

示例（计数 = 32）：

*   1B62C49C416A623398B89A55EBD3E9AC
*   26CFD2D1C14B9F475BF99E4D537E2283
*   B8709C1E87F673957927A7F752D0B82A
*   DFED20E9C957C4EEBF4661E7F7A58460
*   4F86A631AE5A05467BA416C4854609F8

# linux - mmap'ed 文件 - 确定哪个页面是脏的

> ID：12110212
> 
> 赞同：2
> 
> 时间：2012-08-24T13:20:47.253
> 
> 标签：linux, x86-64, mmap

我有一个固定大小的文件。该文件已被 ftruncate()'ed 为 size = N * getpagesize()。该文件具有固定大小的记录。我有一个编写器进程，它通过 mmap(...MAP_SHARED...) 映射整个文件并随机修改记录（像数组一样访问）。我有一个读取器进程，它也执行 mmap(...MAP_SHARED...)。现在读取器进程需要确定由于写入器进程写入随机记录而在其映射中更改了哪个页面。有没有办法在用户空间中做到这一点？我在 Linux - x86_64 上。欢迎使用特定于平台的代码/黑客。感谢您的时间。

编辑：我无权修改编写器进程的代码以某种方式给我修改记录的指示。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-17T16:41:59.853

相关文件：

1.  [http://lwn.net/Articles/230975/](http://lwn.net/Articles/230975/)
2.  [https://www.kernel.org/doc/Documentation/vm/pagemap.txt](https://www.kernel.org/doc/Documentation/vm/pagemap.txt)

    *   确定您的虚拟页面的数量（即除以 4096），乘以 8，然后在`/proc/*/pagemap`
    *   读取8个字节，这是页帧号（PFN）
    *   打开`/proc/kpageflags`，并寻找到 PFN，读取 8 个字节
    *   如果`DIRTY`设置了标志，则页面是脏的（换句话说，作者已写入）
    *   对映射文件中的每一页重复

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T13:25:57.337

这将是非常非常丑陋的。最有可能的是，尝试这样做是不值得的，而且你最好把画你的东西改成这个角落。

您可以使用受锁保护的共享位图。作家保护每一页。如果它写入受保护的页面，它就会出错。您必须发现错误，取消保护页面，锁定位图，并在位图中设置与该位对应的位。这将告诉读者该页面已被修改。

读者操作如下（这是痛苦的部分）：

1.  锁定位图。

2.  列出修改过的页面。

3.  将该修改页面列表传达给作者。编写者必须再次保护这些页面并清除它们在位图​​中的位。写入者必须等待读取者完成此操作，然后才能开始读取，否则更改可能会丢失。

4.  读者现在可以阅读修改后的页面。

# asp.net-mvc - 我应该在哪里添加 [JsonIgnore] 以防止某些属性被序列化？

> ID：12110217
> 
> 赞同：6
> 
> 时间：2012-08-24T13:20:52.013
> 
> 标签：asp.net-mvc

这是一个非常简单的 Web API 项目。我有一个数据模型、生成的 DbContext 和一个控制器。

当我将`[JsonIgnore]`属性添加到模型类的某些属性中，然后对数据模型进行更改时，模型类会重新生成，并且我的`[JsonIgnore]`属性会被删除。我理解为什么会发生这种情况，并且我不应该向自动生成的类添加属性。我的问题是，我应该在哪里用属性注释类，比如`[JsonIgnore]`与 ASP.NET Web API 一起使用？

ASP.NET Web API 4，RTW

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T13:35:51.537

您应该使用视图模型。基本上定义只包含您需要公开的属性的类，然后从您的 Web API 操作中返回这些视图模型。这样您就不必担心使用`[JsonIgnore]`属性污染域模型，尤其是如果您不希望这些属性仅在某些操作中被忽略。为了简化域模型和视图模型之间的映射，您可以查看[AutoMapper](http://automapper.org/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-10T16:06:22.967

因为您明确表示您正在创建一个非常简单的 Web API 项目，所以您可能能够通过简单的全局替换而侥幸成功。当我将项目转换为使用 ASP.NET Web API 时，我遇到了同样的问题。因为我定期更改数据库模式，所以返回原始类型比动态或强类型视图模型更容易，因为被包装的数据的属性在不断变化。

序列化需要忽略的属性恰好是 EF 生成的所有导航属性。碰巧所有这些属性都是虚拟的。我在文件中进行了替换（仅限于我的数据库项目），将所有文件替换`public virtual`为`[Newtonsoft.Json.JsonIgnore] public virtual`.

一个快速简单的修复程序，允许在项目仍在开发中进行测试。我同意最后，您可能应该将 EF 模型包装到视图模型中，但是这种简单的方法可以让您在没有它们的情况下继续工作更长时间。

# javascript - 有条件地要求 commonJS AMD 模块中的代码

> ID：12110219
> 
> 赞同：0
> 
> 时间：2012-08-24T13:21:01.340
> 
> 标签：javascript, requirejs, commonjs, js-amd

我正在尝试为 Firefox 和 Chrome 编写跨浏览器扩展。Firefox 使用 commonJS 规范，而 Chrome 只是将所有内容都集中到全局命名空间中，就像网页一样。

为了能够编写可重用的代码，我正在尝试使用 requireJS 在 Chrome 扩展中加载代码，这样我就可以编写 commonJS 模块并让它们在两种环境中工作。

当我需要有条件地需要模块时，我遇到了问题。例如，Firefox 提供对`simple-storage`您应该用来访问本地存储的模块的访问。在 chrome 中，我需要使用他们提供的 localStorage API。所以，我一直在尝试这样做：

```
// storage.js
define(function(require, exports, module){
  var store;      

  try {
    // This module will only be available in the FF extension.
    store = require('simple-storage').storage
  } catch(error) {
    // If it's not available, we must be in Chrome and we
    // should use the localStorage object.
    store = localStorage
  }

  // Use the store object down here.
}); 
```

但是，这似乎不起作用。当我尝试加载 Chrome 扩展程序时，出现以下错误：

![铬错误](../Images/6ff48fab9289e68b3e1fb90289e71026.png)

有没有更好的方法来要求具有后备功能的模块？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T15:38:55.483

这里有两个警告：

1）检测chrome是否正在运行

```
// detects webKit (chrome, safari, etc..)
var isChrome = 'webKitTransform' in document.documentElement.style 
```

2) Requirejs 会解析`define()`函数并搜索`require('module')`调用。为了防止 chrome 上的错误，您以某种方式编写了`require`在`requirejs`解析函数体时它不会将调用识别为模块依赖项的方式：

```
if (isChrome)
   // use localStorage
else {
   // set the module name in a var does the trick,
   // so requirejs will not try to load this module on chrome.
   var ffStorageModule = 'simple-storage';
   return require(ffStorageModule);
} 
```

# c - K&R C 编程语言 1.5.1（文件复制）

> ID：12110224
> 
> 赞同：0
> 
> 时间：2012-08-24T13:21:14.743
> 
> 标签：c, types, kernighan-and-ritchie

好吧，几个月前我读过另一本“众所周知”的C书（用我的语言），我从来没有学到任何东西。K&R 在 20 页中写了 3 章的方式简直令人惊叹，当然我不能指望巨大的解释，但这也引发了问题。

我对这一点有疑问 1.5.1 这本书说（第 16 页）：

```
main(){
  int c;// <-- Here is the question
  c=getchar();
  while (c != EOF){
    putchar(c);
    c = getchar();
  }
} 
```

> [...] char 类型专门用于存储此类字符数据，但可以使用任何整数类型。我们使用 int 是出于一个微妙但重要的原因。问题在于将输入的结尾与有效数据区分开来。解决方案是 getchar 在没有更多输入时返回一个独特的值，该值不能与任何真实字符相结合。此值称为 EOF，表示“文件结束”。我们必须声明 c 是一个足够大的类型来保存 getchar 返回的任何值。我们不能使用 char，因为除了任何可能的 char 之外，c 必须足够大以容纳 EOF。因此我们使用 int.[...]

在谷歌搜索另一种解释后：

> EOF 是一个表示文件结束的特殊宏（Linux：使用键盘上的 CTRL+d 来创建它，Windows 命令：使用 CTRL+z（可能必须在新行的开头，后跟 RETURN））：通常 EOF = -1，但依赖于实现。必须是对于任何可能的字符都不是有效值的值。出于这个原因， c 是 int 类型（不是人们可能期望的 char ）。

所以我将源代码从 int 修改为 char 以查看有什么问题，关于取 EOF 值......但没有问题。以同样的方式工作。

我也没有破坏 getchar 如何获取我写的每个字符并打印所有内容。Int 类型是 4 字节长，因此它可以在一个变量中占用 4 个字符。但我可以输入任意数量的字符，它会以相同的方式读取和写入所有内容。而对于 char，也会发生同样的情况……真正发生了什么？超过 1-4 个字符时，值存储在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T13:26:06.713

> 所以我将源代码从 int 修改为 char 以查看有什么问题，关于取 EOF 值......但没有问题。以同样的方式工作

我*碰巧*也以同样的方式工作。这完全取决于 的真实类型`char`，即它是有符号的还是无符号的。还有一个关于这个主题的[C 常见问题解答。](http://c-faq.com/stdio/getcharc.html)如果您`char`的 s 未签名，您更有可能看到该错误。

> 但是，如果字符已签名并且输入全是 7 位字符，则该错误可能会在很长一段时间内未被检测到。

### 编辑

> 最后一个问题是：char类型是一个字节长，int是4个字节长。所以，char 只会占用一个 ascii 字符。但是如果我输入“堆栈溢出超过 1 个字节长”，输出将是“堆栈溢出超过 1 个字节长”。“tack overflow is over 1byte long”存储在哪里，putchar如何放置整个字符串

每个字符将被`c`依次存储。所以第一次，`getchar()`将返回`s`，并将`putchar`在途中发送。然后`t`会来等等。在任何时候都不会`c`存储一个以上的字符。因此，尽管您给它输入一个大字符串，但它通过一次吃一个字符来处理它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T13:34:26.567

分成两个答案：

**为什么`int`和不`char`**

*简短而正式的回答：*如果您希望能够表示所有真实字符和另一个非真实字符 (EOF)，则不能使用旨在仅保存真实字符的数据类型。

*可以理解但不完全准确的答案*：该函数`getchar()`返回它读取的字符的 ASCII 码，或 EOF。

因为`-1`cast to`char`等于 255，所以我们无法区分 255 字符和 EOF。那是，

```
char a = 255;
char b = EOF;
a == b // Evaluates to TRUE 
```

但，

```
int a = 255;
int b = EOF;
a == b // Evaluates to FALSE 
```

因此，使用`char`将不允许您区分 ASCII 码为 255 的字符（从文件读取时可能发生）和 EOF。

**你怎么能用`putchar()`一个int**

该函数`putchar()`查看它的参数，看到一个数字，然后转到 ASCII 表并绘制它看到的字形。当您将其传递给 时`int`，它会被隐式转换为`char`. 如果 中的数字`int`适合`char`，一切都很好，没有人注意到任何事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T13:38:10.647

如果您`char`用于存储 的结果`getchar()`，则存在两个潜在问题，您将遇到哪一个取决于`char`.

*   如果`char`是无符号的，`c == EOF`永远不会是真的，你会得到一个无限循环。

*   如果`char`已签名，`c == EOF`则当您输入一些字符时将为真。这取决于使用的字符集；在使用 ISO8859-1 或 CP852 的语言环境中，如果 EOF 为 -1（最常见的值），则为“ÿ”。某些字符集，例如 UTF-8，不使用`(char)EOF`有效代码中的值，但您很少能保证您的问题将停留在有符号字符实现上，并且仅在无问题的语言环境中使用。

# php - 我需要从 PHP 网页运行一些 bash

> ID：12110225
> 
> 赞同：1
> 
> 时间：2012-08-24T13:21:14.617
> 
> 标签：php, bash, variables

我有一个 bash 脚本如下：

```
#!/bin/bash
for i in `cat domains` ; do
tag=$(echo -n $i" -   "; whois $i | grep -o "Expir.*")
reg=$(echo -n -"     "; whois $i | grep "Registrar:")
echo $tag $reg

sleep .5s
done; 
```

我希望有一个 php 页面，用户可以在其中粘贴域列表，当他们点击发送时，它会调用 bash 脚本处理域并返回输出。这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T13:26:18.153

这是可能的，但在执行带有用户输入的命令时需要小心。您可以使用[`exec()`](http://php.net/manual/en/function.exec.php)或反引号从 PHP 在服务器上执行命令。

请注意确保用户输入的内容实际上是 URL，而不是用于在您的服务器上执行恶意命令的内容。

* * *

**例子：**

您的代码可能如下所示：

```
$output = array();
$urls = $_POST["urls"];
// perform necessary sanitation checks if needed
exec('/path/to/your/script '. implode(' ', $urls), $output);
echo $output; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T13:46:15.890

Do you really need to run the bash script? Here's the equivalent PHP code:

```
foreach ($domains as $domain) {
  $domain = addslashes($domain);
  exec("whois '$domain'", $results);
  foreach ($results as $line) {
    if (preg_match('/Expir.*/', $line, $matches)) $tag = $matches[0];
    if (preg_match('/Registrar:/', $line)) $reg = $line;
  }
  echo $domain.' - '.$tag.' - '$reg."\n";
  usleep(500000);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T13:28:10.447

是的，您可以使用`exec()`或`shell_exec()`命令

# javascript - phonegap上的Ajax调用不发送请求

> ID：12110233
> 
> 赞同：5
> 
> 时间：2012-08-24T13:21:37.057
> 
> 标签：javascript, jquery, cordova

我正在把头发拉出来。

我有一个对我的服务器的 jquery ajax 调用，该调用在我的浏览器上运行，当我将它连接到我的本地代理进行 http 嗅探时，它在我的设备上运行，但当它在 wifi 或蜂窝网络上关闭我的代理时，它就会挂起。

我已经设置了 phonegap config.xml 以允许我的域。该请求是服务器上的获取以及 ajax 调用。你会注意到它是 jsonP。

调用是直接的jquery，无论如何我都会发布代码。*api*对象是我为保存应用程序功能而制作的自定义对象。

```
var dfd = $.ajax({
    url: myurl, // I've confirmed the url, but prefer to keep it private
    data: {
        ApplicationID: api.applicationID,
        DeviceID: api.device.uuid(),
        OSVersion: api.device.version(),
        DeviceVersion: api.device.platform(),
        Lat: lat,
        Lng: lng,
        Bearing: bearing
    },
    dataType: "jsonp",
    timeout: 30000
})
.fail(function (event, jqXHR, ajaxSettings, thrownError) {
    console.error(jqXHR);
}); 
```

我已经尝试过这个答案，这是我能找到的最接近我的问题的答案，但它似乎不起作用。 [Phonegap jQuery ajax 请求不起作用](https://stackoverflow.com/questions/8924482/phonegap-jquery-ajax-request-does-not-work)

有什么我想念的吗？我究竟做错了什么？

**编辑：** 我忘了提，我在 ajax 调用上设置的超时什么也没做，它似乎只是忽略了它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T13:42:03.023

既然你拉一个json字符串，为什么不使用

```
$.getJSON("http://www.example.com?jsoncallback=?",
    function(data){ ... } 
```

注意 jsoncallback。这里发生的是 jquery 将一个额外的参数解析到代码中以验证结果是否来自实际请求。这发生在跨域请求上。

为了使您的“json-builder”兼容，只需将 jsoncallback 放在请求的前面：

```
$return =  $_GET["jsoncallback"].'({"title" : "test", "author" : "someone"}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T06:30:33.483

正如您所提到的，您的问题可能不是跨域的。您的服务器是否记录任何请求？从 index.html 链接第二个（相同的）请求后，我遇到了类似的问题，第一个请求工作正常。我发现了一个信息，它可能是一个 phonegap 错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T15:44:40.503

事实证明我的问题完全不同。由于移动浏览器如何添加 AMD 脚本，我的依赖项没有加载。我已经通过将所有脚本合并到一个文件中来解决这个问题，并且从那以后它就一直在工作。

# ruby-on-rails - 如何检查一个变量是否存在一个没有“未定义的局部变量或方法”的值？

> ID：12110235
> 
> 赞同：18
> 
> 时间：2012-08-24T13:21:41.293
> 
> 标签：ruby-on-rails, ruby, variables, undefined, exists

这是一种常见的模式：如果变量不存在，我会收到`undefined local variable or method`错误消息。

现有代码有`if variable_name.present?`，但这并没有说明变量不存在。

如何检查变量的值并说明它根本不存在？

我试过了：

```
if (defined? mmm) then
  if mmm.present? then
    puts "true"
  end
end 
```

但是 Ruby 仍然会检查内部`mmm.present?`并在它不存在时抛出“没有这样的变量”。

我确信对此有一个共同的模式/解决方案。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-24T13:27:52.520

更改`present?`to`!= ''`并使用 && 运算符，该运算符仅在第一个表达式为真时尝试评估第二个表达式：

```
if defined?(mmm) && (mmm != '') then puts "yes" end 
```

但实际上截至 2019 年，这不再需要，因为以下两项工作

```
irb(main):001:0> if (defined? mm) then
irb(main):002:1* if mm.present? then
irb(main):003:2* p true
irb(main):004:2> end
irb(main):005:1> end
=> nil
irb(main):006:0> if (defined? mm) then
irb(main):007:1* p mm
irb(main):008:1> end
=> nil 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-06-05T06:47:29.950

关于 Ruby on Rails

```
if defined?(mm) && mm.present?
  puts "acceptable variable"
end 
```

在 IRB 上

```
if defined?(mm) && !mm.blank? && !mm.nil?
  puts "acceptable variable"
end 
```

它可以确保您不会得到未定义的变量或 nil 或空值。

**了解如何`defined?`运作**

```
a = 1
defined?(a) # => "local-variable"

b = nil
defined?(b) # => "local-variable"

c = ""
defined?(c) # => "local-variable"

d = []
defined?(d) # => "local-variable"

$e = 'text'
defined?($e) # => "global-variable"

defined?(f) # => nil
defined?($g) # => nil 
```

请注意，`defined?`检查范围内的变量。

**为什么你需要`defined?`**

当可能存在未定义的变量时，您不能仅使用示例检查它`.nil?`，您将有机会获得 NameError。

```
a = nil
a.nil? # => true
b.nil? # => NameError: undefined local variable or method `b' 
```

# android - 在 TabHosts 子活动中未调用 onDestroy 或 onPause

> ID：12110236
> 
> 赞同：0
> 
> 时间：2012-08-24T13:21:48.847
> 
> 标签：android, android-tabhost

我有一个 Tabhost，在该 tabhost 中有 4 个选项卡，每个选项卡中都有一个活动。当一个活动失去焦点时，我想用 onDestroy 或 onPause 方法来捕捉它。

我试过什么？

1.  `intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP)`- 此方法在选项卡获得焦点时调用子活动的 onDestroy (?!*%>)，然后调用子活动的 onCreate。

2.  我已经覆盖了生命周期中几乎所有受保护的功能，而且`finish()`. 但是什么也没发生。

3.  我已经尝试过 TabHosts`onTabChanged`函数，但我无法从 tabhost 检索任何活动，也无法调用任何类似`finish()`函数，所以它也失败了。

请帮助我解决这种情况！提前致谢。

编辑：

顺便说一句，我正在扩展 Activity 而不是 TabActivity。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T13:39:32.097

```
tabHost.setOnTabChangedListener(new TabHost.OnTabChangeListener() {
    @Override
    public void onTabChanged(String tabId) {
        Activity currentActivity = getCurrentActivity();
        if (currentActivity instanceof TheActivity) {
            // do nothing, we are here!
        }
        else { 
            ((TheActivity) currentActivity).methodToStopTimer();
        }
    }
}); 
```

或最常见的方式

```
tabHost.setOnTabChangedListener(new TabHost.OnTabChangeListener() {
    @Override
    public void onTabChanged(String tabId) {
        Activity currentActivity = getCurrentActivity();
        if (!currentActivity instanceof TheActivity) {
            ((TheActivity) currentActivity).methodToStopTimer();
        }
    }
}); 
```

编辑：从我的头上，我认为该方法是 TabHost 的一部分，但没关系，只需检查 tabId 以便您知道您在哪个活动中：

```
if(!tabId.equals("idForYourActivity")){
    ActivityName.methodToStopTimer();
} 
```

您将需要`methodToStopTimer()`保持静态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T13:35:53.493

在 onStop() 中执行，而不是在销毁时执行；它适合您的情况:) 尝试和电话 :) 干杯

# sql - 计算指定范围的列值 - SQL

> ID：12110239
> 
> 赞同：-1
> 
> 时间：2012-08-24T13:22:00.787
> 
> 标签：sql, sql-server

在我的 SQL 查询中，我返回的列与 GetDate() 和名为“OriginalFaultOccuredOn”的列之间存在差异（数据类型为 DateTime）。我已经做了一些转换，以便它显示格式差异，如 5.56（5 小时 56 分钟）

结果就像

```
<Column Name>

3.45
5.55
1.23
10.65 
```

我想以进一步的方式修改它，使它像打印结果一样

```
More Than 6 Hours  More THan 12 Hours More than 24 Hours
3                  5                  6 
```

我的 SQL 查询看起来像：-

```
 Select Floor(Convert(Numeric(18,2),Convert(Numeric(18,2),DateDiff(MI, OriginalFaultOccurredOn, GetDate()))/60)) + 
Convert(Numeric(18,2),((Convert(Numeric(18,2),Convert(Numeric(18,2),DateDiff(MI, OriginalFaultOccurredOn, GetDate()))/60) -
Floor(Convert(Numeric(18,2),Convert(Numeric(18,2),DateDiff(MI, OriginalFaultOccurredOn, GetDate()))/60)))*0.6))[Time] 
From Ticket Where Closed=0 
```

数据库是 MS-SQL Server

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T13:32:11.860

您可以通过在每次找到匹配项时添加一个来计算落在指定范围内的出现次数：

```
select sum(case when [time] > 6 and [time] <= 12 then 1 end) [More than 6 hours],
       sum(case when [time] > 12 and [time] <= 24 then 1 end) [More than 12 hours],
       sum(case when [time] > 24 then 1 end) [More than 24 hours]
from
(
 { your-query-here }
) a 
```

# python - 在 tkinter 小部件中显示变量值

> ID：12110245
> 
> 赞同：0
> 
> 时间：2012-08-24T13:22:32.497
> 
> 标签：python, tkinter, widget

我正在使用 Tkinter 编写一个用于在 python 中进行交互式数据拟合的程序。我想：

1.  通过键盘手动更改拟合曲线的起始参数（即猜测参数）并在实验数据上绘制相应的曲线，以便从一个好的点开始拟合过程（ACHIEVED）

2.  当我通过键盘更改参数时，在小部件中显示参数的实际值（未实现）

我搜索了网络，发现我的问题与文本小部件或条目小部件之间存在一些联系。

有没有人有好的解决方案？

这是修改的代码，因为我们正在拟合一个简单的指数，复制/粘贴运行并尝试（使用'r'，'t'，'y'，'f'，'g'，'h'键来修改参数） ..

```
import Tkinter as Tkinter
from Tkinter import *
from matplotlib.backends.backend_tkagg import FigureCanvasTkAgg
from matplotlib.figure import Figure
from numpy import *  #exp,arange,sin,arctan,where
import sys
from scipy.optimize import leastsq

class App:

def __init__(self, master,slave,folnam,q_index,tab):
    # Create containers
    self.frame = Tkinter.Frame(master)
    self.frame2 = Tkinter.Text(slave,width=10,height=10)
    self.frame2.pack()

    self.q_index=q_index

    # Create buttons and bindings
    self.button_quit = Tkinter.Button(self.frame,text="QUIT", command=master.destroy)
    self.button_quit.pack(side="left")
    self.button_fit = Tkinter.Button(self.frame, text= 'fit!')
    self.button_fit.pack()

    self.frame.bind_all("<Key>", self.decrease_a,'+')    #################################

    # Fill with Data
    self.t = arange(1000)*.001
    self.data_to_fit = exp(-self.t)
    self.A=max(self.data_to_fit)-min(self.data_to_fit)
    self.B=min(self.data_to_fit)

    # Build Figure
    fig = Figure()
    self.ax = fig.add_subplot(111)
    self.ax.set_ylim( min(self.data_to_fit), max(self.data_to_fit) )      
    self.p = [self.A,self.B,.9,.5,10.,5.]
    self.line, = self.ax.plot(self.t[1:],abs(self.schultz(self.t[1:], 1., self.p)),'.-')   #tuple of a single element
    self.canvas = FigureCanvasTkAgg(fig,master=master)
    self.ax.plot(self.t[1:],self.data_to_fit[1:])
    self.canvas.show()
    self.canvas.get_tk_widget().pack(side='top', fill='both', expand=1)
    self.frame.pack()

def schultz(self, t, q, p):
    Z=.1
    A, B, alpha, D, vm, sigma = p
    Z = ((sigma/vm)**-2)-1.
    Lambda = q*vm*t/(Z+1)
    g = ((Z+1)/(Z*q*vm*t))*sin(Z*arctan(Lambda))/(1+Lambda**2)**(Z/2.)
    where( abs(t)>0., g, 1.)
    f = exp(-q**2*D*t)*((1.-alpha)+alpha*g)
    y = A*f+B
    return y

def decrease_a(self,event):

  # Raise/lower amplitude with 'a', 'q' keys
    if event.char=='a':
        self.ax.get_ylim()          
        self.p[0]-= 1e10
        self.line.set_ydata(self.schultz(self.t[1:], 1, self.p))
        self.line.set_xdata(self.t[1:])           
        self.canvas.draw()  
    if event.char=='q':
        self.ax.get_ylim()          
        self.p[0]+=1e10
        self.line.set_ydata(self.schultz(self.t[1:], 1, self.p))
        self.line.set_xdata(self.t[1:])           
        self.canvas.draw()  
    # Raise/lower baseline with 's', 'w' keys
    if event.char=='s':
        self.ax.get_ylim()          
        self.p[1]-= 1e10
        self.line.set_ydata(self.schultz(self.t[1:], 1, self.p))
        self.line.set_xdata(self.t[1:])           
        self.canvas.draw()      
    if event.char=='w':
        self.ax.get_ylim()          
        self.p[1]+= 1e10
        self.line.set_ydata(self.schultz(self.t[1:], 1, self.p))
        self.line.set_xdata(self.t[1:])           
        self.canvas.draw()
    # Raise/lower alpha with 'd', 'e' keys
    if event.char=='d':
        self.ax.get_ylim()          
        self.p[2]-= .05
        self.line.set_ydata(self.schultz(self.t[1:], 1, self.p))
        self.line.set_xdata(self.t[1:])           
        self.canvas.draw()
    if event.char=='e':
        self.ax.get_ylim()          
        self.p[2]+= .05
        self.line.set_ydata(self.schultz(self.t[1:], 1, self.p))
        self.line.set_xdata(self.t[1:])           
        self.canvas.draw()
    # Raise/lower diffusion coefficient with 'f', 'r' keys
    if event.char=='f':
        self.ax.get_ylim()          
        self.p[3]-= .05
        self.line.set_ydata(self.schultz(self.t[1:], 1, self.p))
        self.line.set_xdata(self.t[1:])           
        self.canvas.draw()
    if event.char=='r':
        self.ax.get_ylim()          
        self.p[3]+= .05
        self.line.set_ydata(self.schultz(self.t[1:], 1, self.p))
        self.line.set_xdata(self.t[1:])           
        self.canvas.draw()
    # Raise/lower average speed with 'g', 't' keys
    if event.char=='g':
        self.ax.get_ylim()          
        self.p[2]-= .05
        self.line.set_ydata(self.schultz(self.t[1:], 1, self.p))
        self.line.set_xdata(self.t[1:])           
        self.canvas.draw()

    if event.char=='t':
        self.ax.get_ylim()          
        self.p[2]+= .05
        self.line.set_ydata(self.schultz(self.t[1:], 1, self.p))
        self.line.set_xdata(self.t[1:])           
        self.canvas.draw()
    # Raise/lower variance of speed distribution with 'h', 'y' keys
    if event.char=='h':
        self.ax.get_ylim()          
        self.p[2]-= .01
        self.line.set_ydata(self.schultz(self.t[1:], 1, self.p))
        self.line.set_xdata(self.t[1:])           
        self.canvas.draw()
    if event.char=='y':
        self.ax.get_ylim()          
        self.p[2]+= .01
        self.line.set_ydata(self.schultz(self.t[1:], 1, self.p))
        self.line.set_xdata(self.t[1:])           
        self.canvas.draw()

root = Tkinter.Tk()
root2 = Tkinter.Tk()
app = App(root,root2,'/home/copo/Scrivania/correlazioni_da_fit',q_index=10, tab=False)

root.mainloop() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T17:10:22.253

我不确定我是否完全理解这个问题，但如果您只想显示 的值`self.p`，您可以通过多种方式做到这一点。例如，您可以在每次更改参数时更新一个标签。例如：

```
self.p0_label = Tkinter.Label(...)
self.p1_label = Tkinter.Label(...)
...
def decrease_a(self,event):
    if event.char=='a':
        self.ax.get_ylim()          
        self.p[0]-= 1e10
        self.line.set_ydata(self.schultz(self.t[1:], 1, self.p))
        self.line.set_xdata(self.t[1:])           
        self.canvas.draw()  
    ...
    self.update_display()

def update_display(self):
    self.p0_label.configure(text=str(self.p[0]))
    self.p1_label.configure(text=str(self.p[1]))
    ... 
```

# couchdb - 使用 V8 代替 SpiderMonkey 的 CouchDB

> ID：12110247
> 
> 赞同：2
> 
> 时间：2012-08-24T13:22:36.240
> 
> 标签：couchdb, v8

如何使用 V8 JavaScript 引擎而不是基于原生 JS 的 SpiderMonkey 运行 CouchDB？我找到了这个项目[https://github.com/dachev/couchv8](https://github.com/dachev/couchv8)，但它已经过时了。

# sql - 并发值修改会影响 PostgreSQL 9.1 中的单选吗？

> ID：12110248
> 
> 赞同：9
> 
> 时间：2012-08-24T13:22:35.880
> 
> 标签：sql, postgresql, transaction-isolation

考虑在 PostgreSQL 9.1（或 9.2）中执行的以下查询：

```
SELECT * FROM foo WHERE bar = true 
```

假设这是一个运行时间相当长的查询（例如，需要一分钟）。

如果在查询开始时有 500 万条记录`bar = true`保留，并且在另一个事务中的此查询期间，`foo`表中添加和删除了行，并且对于某些现有行，对`bar`字段进行了更新。

这会影响上面显示的选择查询的结果吗？

我知道单个事务中不同语句之间的事务隔离和可见性，但是正在运行的单个语句呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-24T13:38:27.653

不会。
由于 MVCC 模型，只有在*查询*开始时可见的元组才会在单个`SELECT`. [此处](http://www.postgresql.org/docs/current/interactive/transaction-iso.html#XACT-READ-COMMITTED)手册中的详细信息：

> Read Committed 是 PostgreSQL 中的默认隔离级别。当事务使用此隔离级别时，SELECT 查询（没有 FOR UPDATE/SHARE 子句）只能看到查询开始之前提交的数据； **它永远不会看到未提交的数据或并发事务在查询执行期间提交的更改**。实际上，SELECT 查询会在查询开始运行时看到数据库的快照。但是，SELECT 确实会看到在其自己的事务中执行的先前更新的影响，即使它们尚未提交。另请注意，如果其他事务在第一个 SELECT 执行期间提交更改，则两个连续的 SELECT 命令可以看到不同的数据，即使它们在单个事务中也是如此。

强调我的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-24T13:38:40.417

查询将是查询开始时数据的读取一致视图。在 Postgresql 中，关于多版本并发控制 (MVCC) 的文档解释了它是如何完成的（表中存在多个版本的记录）。在 Oracle 中，序列更改号 (SCN) 与修改数据的“前映像”一起使用。这是一个旧文档，[Postgresql](http://www.postgresql.org/files/developer/transactions.pdf)中的事务处理，其中包含“非覆盖存储管理”部分。但是看看 MVCC。

或者阅读Postgresql 文档中关于[MVCC](http://www.postgresql.org/docs/current/interactive/mvcc-intro.html)的章节

# oauth - 通过 OAuth 访问选定的资源

> ID：12110257
> 
> 赞同：0
> 
> 时间：2012-08-24T13:22:55.243
> 
> 标签：oauth, permissions

是否可以（并且有意义）使用 OAuth 来授予对选定资源的权限？到目前为止，我发现的任何示例和用例都关心如何授予对整个权限区域的访问权限（“访问用户配置文件数据”、“访问对象数据”）的问题。我需要的是“授予对象 XY 的读取权限”。OAuth 有能力做到这一点吗？如果没有，是否有任何替代方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T05:05:01.063

这实际上取决于服务提供商的规格。当您说“对象 XY”时，如果您指的是特定的 json 对象，那么答案是肯定的。许多服务提供商返回 json 或 xml 数据。oauth 最多可以返回：

*   服务提供商允许的数据，以及
*   您（应用程序）请求的数据，以及
*   用户允许您检索的数据

在您的应用从服务提供商处获取任何数据之前，必须满足所有这些条件。但是，如果服务提供商在其 oauth 范围内（用 oauth2 术语）拥有您需要的对象，那么您可以获得它。

我可能误解了你的问题。您对哪些服务提供商感兴趣，或者您正在考虑建立自己的服务提供商？

# c# - 重命名表单并做一些额外的工作后无法编译和运行

> ID：12110264
> 
> 赞同：0
> 
> 时间：2012-08-24T13:23:23.213
> 
> 标签：c#, .net-3.5, vb-power-pack

**注意：此问题已重命名。最初它的目标是从我的表单中删除 VB 电源包形状后出现编译错误，但事实证明，当错误发生时，错误的根源是由于表单被重命名并以2个resx文件。编译工作正常，直到由于某种原因删除了 VB 电源组形状。**

我有一个项目使用一些 Visual Basic Power Pack 形状（只是圆圈）来做一些事情。无论如何，我注意到我正在运行的其中一台服务器不支持它们，所以我想从项目中删除它们并使用其他东西。

最疯狂的事情正在发生。如果我按原样运行项目，它会很好用。但是，如果我删除形状和对它们的引用，并尝试再次运行，我会收到此错误：

> 错误 1 ​​在“Resources”参数中多次指定了“obj\Debug\WQASymbolComparisonUtility.FRMMessageBox.resources”项。“资源”参数不支持重复项。WQASymbolComparisonUtility

我完全迷失了 - 这个错误是什么意思，它可能与从我的表单中删除这些电源组组件有什么关系？

是的，删除这些形状是我所做的**唯一**改变:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T16:12:23.683

问题是我重命名了一个表单，它实际上以两个不同的 .resx 文件结束。当我删除较旧的 .resx 文件时，问题自行解决。

出于某种原因，编译工作正常，直到 VB 电源组形状被删除，此时 resx 冲突出现了。我猜这个变化只是导致受影响的代码区域的第一次重新编译。

重命名问题标题，以便对其他人更有帮助。

# haskell - 为什么把这个 liftIO 放在一个函数中可以工作，但直接调用却不行？

> ID：12110265
> 
> 赞同：5
> 
> 时间：2012-08-24T13:23:24.343
> 
> 标签：haskell

我看到一些涉及 monad 实例的奇怪行为。我正在编写一个快照应用程序，并且在我的一个处理程序中，除非我创建一个函数，否则它不会编译。

`withManager`像这样直接在我的处理程序中调用：

```
authenticateLanding :: Handler App App ()
authenticateLanding = do
    req <- getRequest
    oir <- liftIO $ withManager $ OpenId.authenticateClaimed (convertParams req)
    writeBS (fromString $ show oir) 
```

导致此编译时错误

```
openIDTrial.hs:120:25:
    No instance for (Control.Monad.Trans.Control.MonadBaseControl
                       IO m1)
      arising from a use of `withManager'
    Possible fix:
      add an instance declaration for
      (Control.Monad.Trans.Control.MonadBaseControl IO m1)
    In the expression: withManager
    In the second argument of `($)', namely
      `withManager $ OpenId.authenticateClaimed (convertParams req)'
    In a stmt of a 'do' block:
      oir <- liftIO
             $ withManager $ OpenId.authenticateClaimed (convertParams req) 
```

但是，如果我把它放在一个函数中，那么我不会得到那个错误

```
claim params = liftIO $ withManager $ OpenId.authenticateClaimed (params)

authenticateLanding :: Handler App App ()
authenticateLanding = do
    req <- getRequest
    oir <- claim (convertParams req)
    writeBS (fromString $ show oir) 
```

这一点没有任何意义，因为声明函数看起来不会为编译器添加任何额外信息。

# jquery - jQuery - 从 jQuery 函数中访问变量

> ID：12110267
> 
> 赞同：2
> 
> 时间：2012-08-24T13:23:31.433
> 
> 标签：jquery

伙计们。我有这样的事情：

```
myThing = {
    str:"my string",
    setClick: function(){
        $("button").click(function(){
            alert(this.str);
        });
    }
}

myThing.setClick(); 
```

问题是当我单击按钮时，该函数不知道 str 是什么。`alert(str)`给我一个错误（`str is not defined`）并且没有警报。`alert(this.str)`给我警报但包含`undefined`.

我可以看到它`this`引用了按钮，并且该按钮没有任何名为`str`. 那么如何访问超出 jQuery 函数的 str 呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T13:26:17.687

在事件处理程序之外保存对`this`in的引用：`setClick``click`

```
myThing = {
    str:"my string",
    setClick: function() {
        var self = this;
        $("button").click(function() {
            alert(self.str);
        });
    }
} 
```

**[演示](http://jsfiddle.net/PBPB4/)**。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T13:26:07.380

您始终可以按名称引用对象

```
myThing = {
    str:"my string",
    setClick: function(){
        $("button").click(function(){
            alert(myThing.str);
        });
    }
}

myThing.setClick(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T13:31:16.983

您可以使用 javascript 函数强制函数的上下文`bind`。我发现它在这种情况下很有用。`this`它允许您在被绑定的函数内定义 的值。

```
myThing = {
    str:"my string",
    setClick: function(){
        $("button").click(function(e){
            // 'this' is myThing
            // $(e.currentTarget) is the button on which the event handler was attached
        }.bind(this));
    }
}

myThing.setClick(); 
```

# php - 带有干预 html 页面的 php 会话

> ID：12110268
> 
> 赞同：0
> 
> 时间：2012-08-24T13:23:31.707
> 
> 标签：php

我有一个存储会话变量的 php 页面。其中一个链接是一个 .html 页面，其中包含一些 php 页面的链接。当我返回 php 页面时，会话变量是否仍然可以访问？

对不起，如果这个答案很明显，因为我不熟悉会话。也许会话记录在服务器中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T13:28:29.587

是的，会话将持续存在。会话是由服务器设置一次的 cookie 值，然后客户端在每次新请求时将其发送回服务器。客户端也会将 cookie 发送回 HTML 页面，但它不会对它做任何事情。cookie 和 session 都会持续到它们过期，而不管用户访问的页面是什么。

# iphone - 如何在 iPhone 中记录/跟踪用户操作.....？

> ID：12110269
> 
> 赞同：4
> 
> 时间：2012-08-24T13:23:32.080
> 
> 标签：iphone, ios

是否有任何简单有效的方法可以从我的 iPhone 应用程序中跟踪用户活动。我必须记录用户在我的应用程序中执行的所有操作，而不会出现任何性能/冻结问题。应该没有每秒点击次数等限制......应用程序是全球性的和跨平台的。如果我可以编写自己的自定义算法来实现这个功能，那就更好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T22:15:48.137

您还可以使用谷歌分析

[https://developers.google.com/analytics/devguides/collection/ios/](https://developers.google.com/analytics/devguides/collection/ios/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T22:08:05.320

我们使用名为 Flurry Analytics 的服务。它适用于所有移动平台，我们在这方面拥有丰富的经验。也免费！

[http://www.flurry.com/flurry-analytics.html](http://www.flurry.com/flurry-analytics.html)

该应用程序可以以非常通用的方式收集各种信息，并且在将数据发送回服务器时效率很高。我相信只有当应用程序终止时。

在设备方面，设置和开始跟踪用户事件非常容易。

# unity3d - 为什么我的树在背景中发出明亮的白色光芒？

> ID：12110274
> 
> 赞同：2
> 
> 时间：2012-08-24T13:23:56.213
> 
> 标签：unity3d

我正在 Unity 中制作一个位置，我所有的树都在背景中发光，然后当我足够靠近时恢复它们的正常颜色，。

![图片](../Images/2125ff4785d3151ee6ab6bbf663aeced.png)

它也不是天空盒，因为当我禁用它时它仍然会发生。我怎样才能解决这个问题？为什么会这样？提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T17:08:08.847

原来你只需要改变[着色器](http://docs.unity3d.com/Documentation/Manual/Shaders.html)来`Nature/Soft Occlusion Bark Shader`解决这个问题。我在[树](http://docs.unity3d.com/Documentation/Components/terrain-Trees.html)页面上找到了这个，上面写着：

> > 树木必须使用 Nature/Soft Occlusion Leaves 和 Nature/Soft Occlusion Bark 着色器。为了使用这些着色器，您还必须将树放在一个包含名称“环境光遮蔽”的特殊文件夹中。当您将模型放入该文件夹并重新导入时，Unity 将计算专门用于树木的软环境光遮蔽。“自然/软遮挡”着色器需要此信息。如果您不遵循命名约定，则树看起来很奇怪，部分完全是黑色的。

希望这可以帮助！

# c# - 在 .net 中选择 Soap XML 节点子节点

> ID：12110275
> 
> 赞同：0
> 
> 时间：2012-08-24T13:23:57.290
> 
> 标签：c#, .net, xml, soap

我有以下 SOAP 响应：

```
<?xml version="1.0"?>
<env:Envelope xmlns:env="http://schemas.xmlsoap.org/soap/envelope/">
<env:Header/>
<env:Body>  
<GetSalesResponse xmlns="http://api.dgm-uk.com/Publisher/schemas">
<status>ok</status>
-<sales>
     -<sale>
      <saleid>***</saleid>
      <campaignname>***</campaignname>
      <campaignid>***</campaignid>
      <advertisername>***</advertisername>
      </sale>
      -<sale>
      <saleid>***</saleid>
      <campaignname>***</campaignname>
      <campaignid>***</campaignid>
      <advertisername>***</advertisername>
      </sale> 
      ..............etc 
```

现在，我能够使用以下代码获取所有销售元素：

```
XmlNamespaceManager nsmgr = new XmlNamespaceManager(xmlFile.NameTable);
nsmgr.AddNamespace("soapenv", "http://schemas.xmlsoap.org/soap/envelope/");
nsmgr.AddNamespace("GSR", "http://api.dgm-uk.com/Publisher/schemas");
var items = xmlFile.DocumentElement.SelectSingleNode("/soapenv:Envelope/soapenv:Body/GSR:GetSalesResponse/GSR:sales", nsmgr); 
```

那么我如何在迭代销售元素时，选择它们的内在孩子，如 saleid 和 campaignid？我只是无法选择它们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T13:42:11.817

这有效...

```
XElement doc = XElement.Load("c:\\dd.xml");
XNamespace ns1 = "http://schemas.xmlsoap.org/soap/envelope/";
XNamespace ns2 = "http://api.dgm-uk.com/Publisher/schemas";

var items = doc.Descendants(ns1 + "Body").Descendants(ns2 + "GetSalesResponse").Descendants(ns2 + "sales").Descendants(ns2 + "sale")
.Select((x) => new
{
saleid = x.Element(ns2 + "saleid").Value,
campaignname = x.Element(ns2 + "campaignname").Value,
campaignid = x.Element(ns2 + "campaignid").Value,
advertisername = x.Element(ns2 + "advertisername").Value
});

foreach (var itm in items)
{
Console.WriteLine("saleid:" + itm.saleid);
Console.WriteLine("campaignid:" + itm.campaignid);
Console.WriteLine("campaignname:" + itm.campaignname);  
Console.WriteLine("advertisername:" + itm.advertisername);
} 
```

# java - Java File.renameTo（文件）不起作用

> ID：12110278
> 
> 赞同：2
> 
> 时间：2012-08-24T13:24:00.690
> 
> 标签：java, file-io, rename

我正在尝试列出目录的内容，并重命名某些文件。

```
public void run(String dirName) {
    try {
        File parDir = new File(dirName);
        File[] dirContents = parDir.listFiles();

        // Rename if necessary
        for(File f : dirContents) {
            System.out.println("f is:\n" + f.toString());
            String name = f.getName();
            String subbedName = name.replaceAll("\uFFFD", "_");

            System.out.println("\n" + "name = " + name + ", subbedName = " + subbedName + "\n");

            if(!name.equals(subbedName)) {
                File newFile = new File(f.getParentFile(), subbedName);
                System.out.println("newFile is:\n" + newFile.toString());
                if(!f.renameTo(newFile))
                    System.out.println("Tried to change file name but couldn't.");
            }
        }
    }
    catch(Exception exc1) {
        System.out.println("Something happened while listing and renaming directory contents: " + exc1.getMessage());
    }
} 
```

当我运行它时，我得到“ `Tried to change file name but couldn't.`”我不*相信*Java 认为这些文件是“打开的”，所以我认为这不是原因。我什至跑过传递给方法的字符串的值在`chmod 777 myDir`哪里。`myDir``dirName``run`

我在这里想念什么？为什么 Java 不重命名这些文件？这些是 CentOS 机器。

**编辑**`f`：为和都添加了打印输出，`newFile`如下所示：

```
f is:
/root/path/to/mydir/testï¿½.txt

newFile is:
/root/path/to/mydir/test_.txt 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T13:30:05.683

您需要使用这些文件的*完整*路径名创建新`File`对象。所以

 *```
String name = f.getName(); // gets the name without the directory 
```

应该是：

```
String name = f.getAbsolutePath(); 
```

（您的搜索/替换可能需要更改）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T13:30:42.950

问题是`f.getName()`返回由 表示的路径的姓氏部分`f`。然后你按摩这个字符串并将它变成一个`File`. 但是`File`now 表示相对于当前目录的路径，而不是包含原始路径的目录。

因此，您的代码实际上是在尝试将文件从`dirName`应用程序的当前目录重命名。这可能会失败，因为当前目录中已经存在具有这些名称的文件，或者因为`dirName`和当前目录位于不同的文件系统中。（您不能将文件从一个文件系统重命名到另一个文件系统……您必须*复制*它。）

请注意，`File`Java 中的 a 表示路径名，而不是文件或文件夹。在您的代码中，`f`对象是由 String 表示的目录中文件系统对象（文件或文件夹）的路径名`dirname`。这些`f`对象*中*的每一个都有一个目录部分。

* * *

修复代码的方法不止一种；例如

*   更改`name = f.getName()`为`name = f.toString()`
*   更改`new File(subbedName)`为`new File(f.getParentFile(), subbedName)`

* * *

我有一个替代/附加理论。

包含该`\uFFFD`字符的文件的路径名显示为“mojibake”；即当您使用错误的编码显示编码文本时得到的那种乱码文本。由于我们看到 3 个字符的乱码文本，我怀疑它试图将 UTF-8 渲染显示`\uFFFD`为 Latin-1。

`File.renameTo`所以我的理论是，当方法转换`f`为它将提供给系统调用的形式时，也会发生同样的想法。由于某种我不清楚的原因，Java 可能使用了错误的编码，因此为原始文件生成了一个与文件系统中的文件名不匹配的“名称”。这足以导致重命名失败。

可能相关的问题/链接：

*   [java中的文件名字符集问题](https://stackoverflow.com/questions/3832761/file-name-charset-problem-in-java)
*   [http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4733494](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=4733494) （请注意，Sun 认为这不是 Java 错误，并且大多数关于错误报告的“我也是”评论来自不这样做的人理解解释...）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T13:31:18.270

`f.getName();`只返回文件夹的名称，而不是完整路径。所以`subbedName`变成了相对路径文件。尝试一下`f.getCanonicalPath()`。*

# c - 删除尾随空格

> ID：12110282
> 
> 赞同：0
> 
> 时间：2012-08-24T13:24:12.813
> 
> 标签：c, if-statement, whitespace

我正在处理 k&r 并且正在处理问题 1-18。编写一个程序，从输入的每一行中删除 TRAILING 空格和制表符，并完全删除空白行。我的想法是阅读每一行并计算空格数。如果它是第一个空白打印它使用 putchar。如果有第二个空白，请不要打印并将空格重置为 0。然后继续阅读并删除空格。

目前我只需要打印它读取的任何其他内容，因为我正试图一点一点地做到这一点。一旦我运行这个程序，我就会在终端中得到其中两个 ��。我认为我在错误地嵌套 if 语句或 else 语句时遇到了问题，我之前在那里遇到了一些错误。我是否正在讨论以正确方式删除空白的逻辑？如果有人能指出我正确的方向来修复代码，我将不胜感激。

```
#include <stdio.h>

main()
{
    int c, i, spaces;             /*c for input, i for counting*/

    i = 0;
    c = 0;
    spaces = 0;
    while ((c = getchar())!=EOF)
            if(spaces = 0 && c == ' ')
                    ++spaces;
                    putchar(c);
                    if(spaces >= 1)
                            spaces = 0;
            else {
                    putchar(c);
            }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T13:27:43.027

尝试：

```
if(spaces == 0 && c == ' ')
{
   ++spaces;
   putchar(c);
   if(spaces >= 1)
      spaces = 0;
}
else 
{
   putchar(c);
} 
```

您的缩进表明您希望`else`分支与第一个 if 一起使用，但就像现在一样，它与 inner 相对应`if`。

还有，`spaces = 0`是赋值，`spaces == 0`是比较。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T14:10:30.577

*   读取一个字符串。
*   使用 strlen() 或类似方法查找字符串的结尾。
*   `for(i=string_length-i; i>=0; i--)` 如果您愿意，也可以使用指针。
*   在找到第一个非空间时中断循环。
*   在第一个非空格+1 处插入一个空终止符。

# javascript - Lotus Xpages Extension Library Number Spinner 防止提交

> ID：12110284
> 
> 赞同：0
> 
> 时间：2012-08-24T13:24:24.490
> 
> 标签：xpage ： - 客户端验证已关闭 - 我使用, dojo, lotus, domino, dijit.form.validation 文本框, numberspinner, javascript, validation, dojo, xpages, lotus

我使用以下设置开发了一个[xpage ： - 客户端验证已关闭 - 我使用](/questions/tagged/xpage "显示标记为“xpage”的问题")[dojo](/questions/tagged/dojo "显示标记为“道场”的问题") 1.6 和[lotus](/questions/tagged/lotus "显示标记为“莲花”的问题") [domino](/questions/tagged/domino "显示标记为“多米诺骨牌”的问题") 8.5.3

页面上只有两个[dijit.form.validation 文本框](/questions/tagged/dijit.form.validationtextboxes "显示标记为“dijit.form.validationtextboxes”的问题")，具有 required=true 属性。

`

```
<xp:this.resources>
    <xp:dojoModule name="dijit.form.ValidationTextBox"></xp:dojoModule>
</xp:this.resources>
<xp:this.data>
    <xp:dominoDocument var="document1" formName="form1"></xp:dominoDocument>
</xp:this.data>
<xp:inputText id="inputText1"
    dojoType="dijit.form.ValidationTextBox"
    value="#{applicationScope.test}">
    <xp:this.dojoAttributes>
        <xp:dojoAttribute name="required" value="true"></xp:dojoAttribute>
    </xp:this.dojoAttributes>
</xp:inputText>
<xp:button value="Label" id="button1">
    <xp:eventHandler event="onclick" submit="true"
        refreshMode="complete">
        <xp:this.action>
            <xp:saveDocument var="document1"></xp:saveDocument>
        </xp:this.action>
    </xp:eventHandler>
</xp:button>
<xp:br></xp:br>
<xp:inputText id="inputText2"
    dojoType="dijit.form.ValidationTextBox">
    <xp:this.dojoAttributes>
        <xp:dojoAttribute name="required" value="true"></xp:dojoAttribute>
    </xp:this.dojoAttributes>
</xp:inputText> 
</xp:view> 
```

`

通过单击提交，文档将保存到数据库中。

如果我从 [tag:extension library] 添加一个[numberspinner](/questions/tagged/numberspinner "显示标记为“numberspinner”的问题")，这会阻止提交，则应首先填写所需的输入。

`

```
<xp:this.resources>
    <xp:dojoModule name="dijit.form.ValidationTextBox"></xp:dojoModule>
</xp:this.resources>
<xp:this.data>
    <xp:dominoDocument var="document1" formName="form1"></xp:dominoDocument>
</xp:this.data>
<xp:inputText id="inputText1"
    dojoType="dijit.form.ValidationTextBox"
    value="#{applicationScope.test}">
    <xp:this.dojoAttributes>
        <xp:dojoAttribute name="required" value="true"></xp:dojoAttribute>
    </xp:this.dojoAttributes>
</xp:inputText>
<xp:button value="Label" id="button1">
    <xp:eventHandler event="onclick" submit="true"
        refreshMode="complete">
        <xp:this.action>
            <xp:saveDocument var="document1"></xp:saveDocument>
        </xp:this.action>
    </xp:eventHandler>
</xp:button>
<xp:br></xp:br>
<xp:inputText id="inputText2"
    dojoType="dijit.form.ValidationTextBox">
    <xp:this.dojoAttributes>
        <xp:dojoAttribute name="required" value="true"></xp:dojoAttribute>
    </xp:this.dojoAttributes>
</xp:inputText>
<xe:djNumberSpinner id="djNumberSpinner1"></xe:djNumberSpinner></xp:view> 
```

`

有人知道如何解决这个问题吗？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T21:07:08.623

您是否在 XPage 上将 dojoParseOnLoad 设置为“true”？听起来您可能还没有完成，在这种情况下 xp:inputTexts 不会转换为 Dojo Validation TextBoxes。

但是，只要您添加了 Extension Library Number Spinner，即使您没有指定它，该控件也会自动将 dojoParseOnload 添加到 XPage。因此，您的验证文本框也将立即起作用。

此外，因为您使用的是 Dojo 控件，所以关闭客户端验证是无关紧要的。Dojo 验证只能在客户端工作。您不能使用 Dojo 控件并运行验证服务器端。

# windows - Windows 程序的调用者是否负责将 \\?\ 添加到长文件名参数

> ID：12110285
> 
> 赞同：0
> 
> 时间：2012-08-24T13:24:24.227
> 
> 标签：windows, winapi, cmd, executable, command-line-arguments

在我的 Java 程序中，我使用命令行库来分叉 Java 进程。`java.exe -jar`当我在调用中传递的 JAR 文件的文件路径超过 Windows 的 260 个字符路径长度限制时，这将失败（取决于程序的使用方式） 。（错误消息`Error: Unable to access jarfile`后跟路径名。）我可以通过（手动）向`\\?\`JAR 文件名添加前缀来使 Java 调用工作。这解决了一个特定的问题实例，但这通常是正确的方法吗？

我是否应该期望 Windows 程序正确处理作为命令行参数传递的长路径，或者 - 检测长路径并添加`\\?\`前缀是调用者的责任吗？

或者不那么笼统：命令行库或命令行库中是否存在错误`java.exe`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T20:04:37.377

大多数程序将简单地获取文件名并将其按原样传递给 API 函数，例如`CreateFile()`. 因此，在这种情况下，调用者确实有责任检测长文件名并在传递之前相应地为其添加前缀。

# c# - 在 MSSQL SERVER 2008 R2 上创建动态存储过程

> ID：12110289
> 
> 赞同：0
> 
> 时间：2012-08-24T13:24:52.930
> 
> 标签：c#, asp.net, sql-server-2008

我有一个从同一服务器上的不同数据库获取数据的系统。这些数据库每年都会新附加到服务器上。例如，在 2013 年初，附加了一个名为 2012 的数据库。所以我想创建一个存储过程（SP）来获取用户的输入，它可以是 2005 年（年）的任何内容。因此，根据用户输入的年份，SP 应该转到该数据库（其名称将是用户输入的年份）并在数据库中搜索数据（其参数是用户输入的年份），该数据也将具有与 db 同名的表（即该表将与年份名称相同）。希望这是有道理的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T13:36:15.143

我不是 DBA，所以对此持保留态度，并了解可能有更好的方法来做到这一点，但您可能需要做的是这样的事情：

```
CREATE PROCEDURE usp_foo
@Year varchar(4)
AS

DECLARE @sql varchar(255)
@sql = 'SELECT * from [' + @Year + '].[owner].[table]'
sp_executesql @sql 
```

当然，调用此存储过程的用户必须 A) 有权调用系统存储过程 B) 有权访问年度数据库

此外，您可以创建一个动态连接字符串，而不是走 SQL 路由，您可以使用正确的目录填充该字符串，然后直接向数据库发出 SQL 查询。就我个人而言，我更喜欢使用动态 SQL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T13:47:03.723

您可以做的一件事是查看同义词，您可以为每年创建一个：

[http://sommarskog.se/dynamic_sql.html#Dyn_DB](http://sommarskog.se/dynamic_sql.html#Dyn_DB)

```
CREATE SYNONYM otherdbtbl FOR otherdb.dbo.tbl 
```

我会推荐他的网站，里面有很多好东西，读起来很棒：）

至于这是否适合您，我希望这取决于您在每个数据库中有多少表。如果是几个，这可能会起作用，如果是数百个，那么另一种方法可能会更好——比如 abszero 建议在应用层进行切换？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T13:57:44.493

将查询参数化是一个好主意。

例如

```
CREATE PROC usp_bar
(
@ID INT
)
AS
BEGIN
DECLARE @SQL NVARCHAR(100)
DECLARE @Params NVARCHAR(100)
SET @SQL = N'SELECT * FROM [Table] WHERE ID = @ID'
SET @Params = N'@ID INT'
EXEC sp_executesql @SQL, @Params, @ID = 5
END 
```

看看[这个](http://www.sommarskog.se/dynamic_sql.html)

# javascript - JavaScript - 从目录中选择一个随机页面

> ID：12110292
> 
> 赞同：1
> 
> 时间：2012-08-24T13:25:08.323
> 
> 标签：javascript, html, random, html-helper

我正在开发一个网页，但我需要一个从目录中选择随机页面的 JS 脚本。目前我有这个脚本；

```
 <!-- Hide this script from old browsers --

var links = new Array(10) 
links[0] = "anal.html" 
links[1] = "brr-fail.htm" 
links[2] = "anal.html" 
links[3] = "brr-fail.htm" 
links[4] = "anal.html" 
links[5] = "brr-fail.htm" 
links[6] = "anal.html" 
links[7] = "brr-fail.htm" 
links[8] = "anal.html" 
links[9] = "brr-fail.htm" 
links[10] = "anal.html" 
function go() { 
var a = 1+Math.round(Math.random()*10) 
var i = a 
location = links[i] 
} 
// -- End Hiding Here -->

</script> 
```

（别担心，这不是同性恋色情片 - 模因）

如您所见，它有点复杂，有时会引发“未定义”页面错误。有没有办法让它从整个目录中选择一个随机页面？说类似的东西；

www.urlhere.co.uk/memes/random/

多谢你们

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T13:28:54.547

你没有索引，你应该这样做：

```
var a = Math.round(Math.random()*10); 
```

因为链接数组的第 0 个元素不会触发，因为 1+random..

编辑：

```
var a = Math.floor(Math.random() * 11); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T13:29:05.837

数学随机产生一个介于`0`和之间的值`1`，如果乘以 10，则得到来自`0.0`to 的数字`9.9`，如果四舍五入，则得到来自`0`to 的数字`10`。所以你不需要给它加 1，这在某些情况下会导致 11，而你没有，因为`undefined`. 只需使用：

```
var a = Math.round(Math.random()*10); // {0-10} 
```

**编辑：**纠正我错误的第一个答案

**注意：**实际上不会产生随机数的标准分布，因为 0 和 10 只会`Math.random()`在 0.0 - 0.049... (0) 和 0.95 - 0.99... (10) 的情况下产生，您可以通过以下方式计算赔率：

```
var a = Math.floor(Math.random()*11); // {0-10} 
```

这样整个十进制范围（x.0-x.9）就会下降。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T13:29:41.937

你在行`;`尾缺少分隔符和

```
function randInt(max, min) {
    return (min || 0) + Math.floor(Math.random()*(max+1));
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-24T13:32:00.703

```
var links = new Array(10) 
links[0] = "anal.html" ;
links[1] = "brr-fail.htm" ;
links[2] = "anal.html" ;
links[3] = "brr-fail.htm" ;
links[4] = "anal.html" ;
links[5] = "brr-fail.htm" ;
links[6] = "anal.html" ;
links[7] = "brr-fail.htm" ;
links[8] = "anal.html" ;
links[9] = "brr-fail.htm" ;
links[10] = "anal.html" ;
function go() { 
var a= Math.floor(Math.random() * links.length);
var i = a;
location = links[i] ;
} 
```

# windows - 批量重命名

> ID：12110293
> 
> 赞同：0
> 
> 时间：2012-08-24T13:25:17.887
> 
> 标签：windows, command-line

我需要命令提示脚本的帮助，以使用它们各自的“文件夹名称”批量重命名其文件夹中的 AVI 和 JPG 文件，但是名为“文件夹”的 JPG 文件必须保持不变。

之前的例子：

C:\Temp\Videos\Terminator (1984ST)\Terminator (1984).avi

C:\Temp\Videos\终结者 (1984ST)\终结者 (1984).jpg

C:\Temp\Videos\Terminator\Folder.jpg

示例之后：

C:\Temp\Videos\终结者 (1984ST)\终结者 (1984ST).avi

C:\Temp\Videos\终结者 (1984ST)\终结者 (1984ST).jpg

C:\Temp\Videos\Terminator\Folder.jpg

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T17:06:43.750

尝试使用 Windows PowerShell：请参阅[此处](http://www.howtogeek.com/111859/how-to-batch-rename-files-in-windows-4-ways-to-rename-multiple-files/)如何打开 Windows PowerShell。并尝试这些命令行：

```
cd C:\Temp\Videos\"Terminator (1984ST)"
dir * | rename-item -NewName {$_.name -replace "1984","1984ST"} 
```

参考：[PowerShell](http://www.howtogeek.com/111859/how-to-batch-rename-files-in-windows-4-ways-to-rename-multiple-files/)，[命令](http://ss64.com/nt/)

# sql - 使用 oledb 参数在 access 数据库中插入多行

> ID：12110294
> 
> 赞同：1
> 
> 时间：2012-08-24T13:25:21.853
> 
> 标签：sql, vb.net, ms-access-2007, oledb, vb.net-2010

我正在尝试使用参数将列表项中的多行插入到数据库中。但它不会给我任何错误，也不会在表中插入任何数据。有人对此有任何想法吗？

```
 strSQL = "insert into tbltrans2 (transid,itemcode,itemname,qty,price,[total],btw) values ( ?,?,?,?,?,?,?)"
    Using cn As New OleDbConnection("Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + Application.StartupPath + "\\POS.mdb"), _
          cmd As New OleDbCommand(strSQL, cn)

        cmd.Parameters.Add("?", OleDbType.VarChar).Value = txtTransId.Text
        cmd.Parameters.Add("?", OleDbType.VarChar, 10)
        cmd.Parameters.Add("?", OleDbType.VarChar, 50)
        cmd.Parameters.Add("?", OleDbType.Integer)
        cmd.Parameters.Add("?", OleDbType.Decimal)
        cmd.Parameters.Add("?", OleDbType.Decimal)
        cmd.Parameters.Add("?", OleDbType.VarChar, 50)

        cn.Open()
        For Each ls As ListViewItem In ListItems.Items
            cmd.Parameters(1).Value = ls.Tag
            cmd.Parameters(2).Value = ls.SubItems(0).Text
            cmd.Parameters(3).Value = Integer.Parse(ls.SubItems(1).Text)
            cmd.Parameters(4).Value = Decimal.Parse(ls.SubItems(2).Text)
            cmd.Parameters(5).Value = Decimal.Parse(ls.SubItems(3).Text)
            cmd.Parameters(6).Value = ls.SubItems(5).Text
        Next ls

    End Using 
```

嘿史蒂夫，当我尝试这样做时，它给了我“更新语句中的语法错误”错误。这是我的代码：

```
 Try
        strSQL = "UPDATE set instock = ? where itemcode= ?"
        Using cn As New OleDbConnection("Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + Application.StartupPath + "\\POS.mdb"), _
               cmd As New OleDbCommand(strSQL, cn)
            cn.Open()
            For Each ls As ListViewItem In ListItems.Items
                cmd.Parameters.Add("?", OleDbType.Integer).Value = 100
                cmd.Parameters.Add("?", OleDbType.VarChar).Value = ls.Tag
                cmd.ExecuteNonQuery()
            Next ls
            cn.Close()
        End Using
    Catch ex As Exception
        MsgBox(ex.Message)
    End Try 
```

现在，我仍然需要帮助减少库存。这是我使用的代码，但它不起作用。

```
 strSQL = "UPDATE tblitem set instock ='instock'- ? where itemcode = ?"
            Using cn As New OleDbConnection("Provider=Microsoft.Jet.OLEDB.4.0;Data Source=" + Application.StartupPath + "\\POS.mdb"), _
                   cmd As New OleDbCommand(strSQL, cn)
                cn.Open()
                For Each ls As ListViewItem In SalesListItems.Items
                    If Not (ls.SubItems(1).Tag(0) = "n") Then
                        cmd.Parameters.Add("?", OleDbType.Integer).Value = ls.SubItems(1).Text
                        cmd.Parameters.Add("?", OleDbType.VarChar, 10).Value = ls.Tag
                        cmd.ExecuteNonQuery()
                    End If
                Next ls
                cn.Close()
            End Using 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T13:27:32.937

您缺少执行部分

```
For Each ls As ListViewItem In ListItems.Items 
   cmd.Parameters(1).Value = ls.Tag 
   cmd.Parameters(2).Value = ls.SubItems(0).Text 
   cmd.Parameters(3).Value = Integer.Parse(ls.SubItems(1).Text) 
   cmd.Parameters(4).Value = Decimal.Parse(ls.SubItems(2).Text) 
   cmd.Parameters(5).Value = Decimal.Parse(ls.SubItems(3).Text) 
   cmd.Parameters(6).Value = ls.SubItems(5).Text 
   cmd.ExecuteNonQuery()
Next ls 
```

另外，您确定来自子项的输入值吗？如果在将它们添加到 ListView 时没有对它们的有效数值进行控制，则当您尝试使用 Parse 转换假定的数值时，循环可能会失败并出现异常。

编辑：这不是更新

```
strSQL = "UPDATE tblitem set instock = ? where itemcode= ?"  
Using cn As New OleDbConnection("......")   
    cmd As New OleDbCommand(strSQL, cn)  
    cmd.Parameters.Add("?", OleDbType.Integer).Value = 100
    cmd.Parameters.Add("?", OleDbType.VarChar).Value = yourItemCodeValue    
    cmd.ExecuteNonQuery()
End Using 
```

请记住，我认为 instock 是整数数据类型，而 itemcode 是 varchar。

# c++ - c++ 中是否有一个包罗万象的失败钩子？

> ID：12110298
> 
> 赞同：1
> 
> 时间：2012-08-24T13:25:37.350
> 
> 标签：c++, error-handling

我希望程序何时以及是否会失败，而不是在此处理程序中捕获它以执行一些警卫通知。

是否有我需要注册的底部处理程序或处理程序列表，以确保程序在不通过我的处理程序的情况下不会崩溃？

在 ubuntu 上运行，只需要 ubuntu 的解决方案我需要各种失败，比如异常内存分配......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T13:29:15.167

C++ 不在虚拟沙箱中运行，因此该语言没有任何内置功能可以捕捉到这一点。您当然可以自己构建一个（例如使用异常），但由您的代码从基础构建它。

你运行的平​​台可能有一些你可以使用的东西。例如在 Windows 中有[`SetUnhandledExceptionFilter`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms680634%28v=vs.85%29.aspx).

当然，这一切仍然取决于“崩溃”是什么意思。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T13:33:10.297

在进程启动时，调用`fork`. 使用父母来监视孩子。如果遇到致命错误，该进程将消失。您可以检测到这一点，并在发生这种情况时做任何您需要做的事情。如果孩子希望正常终止，它可以在终止之前简单地杀死它的父母。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-24T13:33:37.987

对于正常的程序退出，您可以使用[`std::atexit()`](http://en.cppreference.com/w/cpp/utility/program/atexit).

对于由于[未捕获的异常而退出的程序/...](http://en.cppreference.com/w/cpp/error/terminate)您可以使用[`std::set_terminate`](http://en.cppreference.com/w/cpp/error/set_terminate). 如果“异常内存分配”是指`std::bad_alloc`异常，则应触发此处理程序。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-24T13:33:56.853

简单的答案是，**没有**一个点可以处理程序中的所有错误。您可以添加一个`try/catch (...)`at来处理在输入之后和完成之前`main`发生的异常。`main`您还可以`terminate`在 C++ 中添加处理程序。然后根据操作系统，您还需要以不同方式处理其他情况（可以通过处理 SIG_SEGV 在 unix/linux 中处理无效的内存引用，但这在 Windows 中不起作用——AFAIK；一些其他错误可能会触发不同的信号，这些信号可能或不被处理...）除此之外，可能仍然存在未被注意到的错误（例如碰巧命中有效内存地址的无效内存访问...程序将不正确，但错误可能未被检测到）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-24T13:29:45.797

在 Linux 中你需要响应`SIGABRT`Signal。每当您的应用收到 SIGABRT 信号时，您`callback`都会被调用

```
signal(SIGABRT, &callback); 
```

对于不同的场景有不同的信号，例如`SIGSEGV`，`SIGBUS`您需要挂钩。你最好将它们挂在不同的回调中并检查哪个错误进入了什么。因为一个错误可能是由于多个问题引起的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-24T13:27:11.453

不会。例如，如果进程`kill`带有，则不会运行任何处理程序。`SIGKILL`

[PS 仅供参考，这与SPOF](http://en.wikipedia.org/wiki/Single_point_of_failure)无关。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-24T13:30:02.013

您可以将`try`/`catch(...)`块放在顶层以捕获所有异常。但是还有其他方法可以终止程序，并且捕获这些方法的方法不可移植。在基于 Unix 的系统上，您必须创建信号处理程序，但即使是那些也不会停止`kill -9`。

# deployment - 检查系统上的 JRE

> ID：12110299
> 
> 赞同：2
> 
> 时间：2012-08-24T13:25:41.330
> 
> 标签：deployment, installation, java

我有一个现有的 Java 程序，我正在提供给一些.... 不是我的技术倾向的客户。他们使用 Linux、Windows 的组合，而且很少有苹果机器，这就是我选择 Java 来开发程序的原因。问题是他们在尝试启动程序时不断打电话给我，因为他们没有已安装 JRE。有没有办法：

1.  导入一个库，它会给我某种命令来检查。
2.  将一些东西添加到将检查 JRE 的程序中。或者（我真的不想这样做，因为我首先选择了java）
3.  用 C++ 编写一些东西来检查 JRE。

我的目标：

1.  检查机器上是否安装了 JRE
2.  如果是：启动程序
3.  如果否：弹出消息“未找到 Java 环境，从 Java 网站下载”。然后我会将他们直接带到他们点击“运行”并安装的链接。

// 我会做类似的事情

```
if (JRE.exists()) // maybe use a pathname that would only show up if a JRE is installed
{
    // launch program
}
else
{
    // launch Java installer
}
system.exit(0); 
```

我知道这在 Java 中真的很难（因为没有 JRE 就无法运行 Java 程序），但如果可能的话，我更愿意保持这种通用性。

如果没有简单的解决方法，我将制作一个自述文件，其中包含指向检查系统上 JRE 的 Java 网站的链接，但用户必须做的工作量越少越好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T13:46:41.243

> check for JRE on system

Use `deployJava.js` as mentioned in the [Java Web Start info.](https://stackoverflow.com/tags/java-web-start/info) page.

> ..designed to ensure a suitable minimum version of Java is installed before providing a link to a JWS app. or launching an applet.

If it is a rich client desktop app. (e.g. applet or frame), deploy it using Java Web Start.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T13:29:20.220

我建议您使用像 IzPack 这样的 Java 安装程序或其他此类免费工具。使用其中之一，您可以创建安装程序并生成本机启动器。这可以配置为搜索Java，如果没有找到，它可以帮助用户安装它。

有些开发人员也将 JSmooth 或 Launch4J 用于本机启动器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T18:19:35.020

如果您不能使用 Java Web Start，尽管我建议您使用它，但您可以编写简单的脚本来检测 Java。

**对于 Windows** (.bat)：

```
if not "%JAVA_HOME%" == "" (
    "%JAVA_HOME%\bin\javaw.exe" -jar YourApp.jar
) else (
    start http://java.com/download/
) 
```

如果`JAVA_HOME`定义了环境变量，那么`javaw.exe`将使用您的应用程序 jar 文件启动。`javaw.exe`可执行文件使用窗口子系统，因此它在没有控制台窗口的情况下运行。

如果`JAVA_HOME`未设置，它将在默认浏览器中打开 Java 下载页面。

如需更多选项，您可以使用[JScript](http://msdn.microsoft.com/en-us/library/72bd815a.aspx)；使用它，您可以向用户显示未安装 Java 的警告，然后打开浏览器进行下载。

**对于 Linux** (.sh)：

```
if [ "$JAVA_HOME" != "" ]; then
    $JAVA_HOME/bin/java -jar YourApp.jar &
else
    echo JAVA_HOME is not set: Java Runtime Environment (JRE)
    echo is not installed your system.
    echo Either install it from http://java.com/download/
    echo or set JAVA_HOME environment variable.
fi 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T13:33:04.307

如果 JRE 安装在系统上，则在 Windows 和 Linux 上都设置 JAVA_HOME 环境变量，它包含 JRE 的路径。您可以检查是否设置了此变量并相应地继续。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-24T13:28:33.950

您为什么不这样做只是创建批处理和 bash 文件并要求您的客户根据操作系统运行一个或另一个

# php - PHP Session + Memcached => 神秘的数据格式

> ID：12110301
> 
> 赞同：0
> 
> 时间：2012-08-24T13:25:44.507
> 
> 标签：php, memcached

我使用 memcached 作为 session.save_handler 已经有一段时间了，一切都 100% 正常。

然后我尝试：

```
echo $mycache->get('memc.sess.key.o8el2bgk4k9s1mr723j1blrgs3'); 
```

获取其中一个会话并且输出很奇怪（一个包含 108 个字符的字符串）：

```
MaiiA6iX7qlS0IZjTdr2I3w4axNTp7H2IYcH-SAficGw5ZKIcMQ0BE2kFnsm4xHMk3KAJo9kOwmRTSBOPdPAC-m5L9CkWnYPONqujt5m0c8. 
```

这个字符串是什么格式的？为了您的信息，这是 phpinfo() 中的 memcached 配置：

*   指令 本地价值 主价值
*   memcached.compression_factor 1.3 1.3
*   memcached.compression_threshold 2000 2000
*   memcached.compression_type fastlz fastlz
*   memcached.serializer php php
*   memcached.sess_binary 0 0
*   memcached.sess_lock_wait 150000 150000
*   memcached.sess_locking 1 1
*   memcached.sess_prefix memc.sess.key。memc.sess.key。

所以它应该是这种格式：

```
user_name|s:5:"guest";user_id|s:1:"3";user_level|s:2:"-1"; 
```

而不是奇怪的字符串。

注意：我使用的是 memcached + php-memcached。不是 memcache，也不是 php-memcache。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T02:44:03.813

我找到罪魁祸首了！suhosin.session.encrypt。

ps 我直接从 memcached 获取数据，因为我正在测试 WebSocket 并且必须手动使用 JS 传递会话 ID。然后我需要自己获取该 ID 的会话变量：D

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T13:31:24.433

PHP 会话使用自己的函数进行编码/解码 - 请参阅[session_decode](http://php.net/session_decode)。

# mysql - 在mysql中加载数据infile

> ID：12110303
> 
> 赞同：0
> 
> 时间：2012-08-24T13:25:49.780
> 
> 标签：mysql

![在此处输入图像描述](../Images/6f12b061541f5a67b35ef7f09754f208.png)我需要有关 mysql 查询的帮助，称为加载数据 infile

这是我实际使用的查询。

```
LOAD DATA LOCAL INFILE '/home/xyz/a.txt' IGNORE INTO TABLE TempMobile  FIELDS TERMINATED BY ' '  LINES TERMINATED BY '\r\n' SET Jobid='23'; 
```

我已经尝试过 /r 和 /n 但它只插入一行并将其他数字附加在同一行中。

如何在单独的行中插入数据

以下是文本文件内容

# c# - 动态 Linq 到数据表可为空的字段

> ID：12110307
> 
> 赞同：2
> 
> 时间：2012-08-24T13:25:58.153
> 
> 标签：c#, linq, dynamic, datatable, dbnull

我正在使用 c# Dynamic Linq 库来编写针对数据表的自定义查询。我遇到的问题是，当我尝试对具有空值的字段执行汇总操作时，我遇到了错误。

我正在尝试执行类似于以下的查询：

```
 var query = myDataTable.AsEnumerable().AsQueryable();

 var newquery = query.GroupBy("new (get_item(@0).ToString() AS Forename)", "it", groupList.ToArray());

 newquery = newquery.Select("new (it.Key.Tier.ToString() as Tier, @0(it) as SumTotal", funcs.ToArray()); 
```

如果我求和的列有 Null 值，那么我会收到错误消息“无法将 DBNull.Value 转换为类型‘System.Double’。请使用可为空的类型。”

funcs 数组包含一个用于执行 Sum 函数的 lambda 表达式。它是通过调用以下函数构建的。

```
public LambdaExpression GetGroupByLambdaExpression(Type groupByKeyType, string columnName, Type columnType, string expType)
    {
        ConstantExpression colParam = Expression.Constant(columnName, typeof(string));

        MethodInfo fieldMethod = typeof(DataRowExtensions).GetMethod("Field", new Type[] {typeof(DataRow), typeof(string)});
        fieldMethod = fieldMethod.MakeGenericMethod(columnType);
        ParameterExpression rowParam = Expression.Parameter(typeof(DataRow), "r");

        MethodCallExpression fieldMethodCall = Expression.Call(fieldMethod, rowParam, colParam);
        dynamic columnExpression = Expression.Lambda(fieldMethodCall, rowParam);

        MethodInfo sumMethod = null;
        if (expType == "Count")
        {
            //Count will return 2 methods, we only want the first one with 1 parameter
            sumMethod = typeof(Enumerable).GetMethods().Single(m => m.Name == expType & m.ReturnType.Equals(columnType) & m.IsGenericMethod & m.GetParameters().Count() == 1);
        }
        else if (expType == "Average")
        {
            //Average has multiple overrides so just use the first one                
            if (columnType == typeof(Int16) || columnType == typeof(Int32) || columnType == typeof(Int64))
            {
                sumMethod = typeof(Enumerable).GetMethods().First(m => m.Name == expType & m.ReturnType.Equals(typeof(double)) & m.IsGenericMethod);
            }
            else
            {
                sumMethod = typeof(Enumerable).GetMethods().First(m => m.Name == expType & m.ReturnType.Equals(columnType) & m.IsGenericMethod);
            }
        }
        else
        {
            sumMethod = typeof(Enumerable).GetMethods().Single(m => m.Name == expType & m.ReturnType.Equals(columnType) & m.IsGenericMethod);
        }

        sumMethod = sumMethod.MakeGenericMethod(typeof(DataRow));

        ParameterExpression groupParam = Expression.Parameter(groupByKeyType, "g");

        MethodCallExpression sumMethodCall = null;
        if (expType == "Count")
        {
            sumMethodCall = Expression.Call(sumMethod, groupParam);
        }
        else
        {
            sumMethodCall = Expression.Call(sumMethod, groupParam, columnExpression);            
        }

        dynamic sumALambda = Expression.Lambda(sumMethodCall, groupParam);

        return sumALambda;
    } 
```

有没有人知道如何处理数据表上的 DbNull 值？我完全被难住了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T13:34:11.040

有什么理由不能在开始查询之前过滤数据表吗？

```
var query = myDataTable.Where(val => !Convert.IsDbNull(val)).AsEnumerable().AsQueryable(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T15:36:49.360

Actually the answer was to replace the DataTable column data types with their nullable equivalents in the building of the lambda expression.

# python - 使用 cmd.exe 或 PowerShell 或 Python 从 Windows 命名管道读取

> ID：12110312
> 
> 赞同：1
> 
> 时间：2012-08-24T13:26:10.173
> 
> 标签：python, windows, powershell, command-line, named-pipes

我正在寻找一种快速方法来检查哪些数据进入命名管道（在 Windows 上）。有什么办法可以从 cmd.exe 或 powershell 或 python 中做到这一点？实际上，我只找到了创建命名管道而不是操纵它的方法。但是如何打开由另一个程序创建的命名管道？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T13:29:01.423

Powershell 允许您使用整个 .net api，因此您可以使用[框架中的管道功能](http://msdn.microsoft.com/en-us/library/system.io.pipes.namedpipeclientstream.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T13:48:30.133

The client can connect to a Windows named pipe as if it was any other file, provided it has been created by another program. The low-level API is `CreateFile` using `ALWAYS_EXISTING`, but the ordinary language routines, like Python's `open` should work. The filename will be \\ *server* \pipe\ *name*. Unlike disk files pipes are temporary, and when every handle to a pipe has been closed, the pipe and all the data it contains are deleted, so personally I maintain the pipe using a service where necessary.

# sql - oracle 中是否有可用的 stuff() 函数？

> ID：12110321
> 
> 赞同：0
> 
> 时间：2012-08-24T13:26:58.240
> 
> 标签：sql, oracle11g

oracle中是否有任何等效的东西功能？我使用 mssql 中的 stuff 函数将原始日期时间（字符串格式）转换为正确的日期时间 MSSQL 查询

```
select convert(datetime,
      '20'+substring(stuff(stuff(stuff(stuff(stuff(stuff(convert(varchar,'24051103084950') , 3,0,'-'), 6,0,'-'), 9,0,' '), 12,0,':'), 15,0,':'), 17,2,''),7,2)+'-' 
      +SUBSTRING(stuff(stuff(stuff(stuff(stuff(stuff(convert(varchar,'24051103084950'),3,0,'-'),   6,0,'-'),  9,0,' '), 12,0,':'), 15,0,':'), 17,2,''),4,2)+'-'
      +SUBSTRING (stuff(stuff(stuff(stuff(stuff(stuff(convert(varchar,'24051103084950'), 3,0,'-'), 6,0,'-'), 9,0,' '), 12,0,':'), 15,0,':'), 17,2,''),1,2)
      + SUBSTRING(stuff(stuff(stuff(stuff(stuff(stuff( convert(varchar,'24051103084950'),3,0,'-'),   6,0,'-'), 9,0,' '), 12,0,':'), 15,0,':'), 17,2,''),9,15)) 
```

在上述查询中，**“24051103084950”**是**ddmmyyhhmiss**格式的原始数据。上述查询的输出如下

```
(No column name)
2011-05-24 03:08:40.000 
```

我需要将相同的查询转换为 oracle。指导我去做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T13:41:46.750

您可以使用时间戳/字符串转换函数来简化这一点：

```
select to_char(
         to_timestamp('24051103084950', 'DDMMYYHH24MISSFF2'), 
         'YYYY-MM-DD HH24:MI:SS.FF3') 
  from dual 
```

NB FF2 是毫秒到 2 位，FF3 是毫秒到 3 位。

# php - 我如何只允许每个用户发布一个 POST？

> ID：12110322
> 
> 赞同：-4
> 
> 时间：2012-08-24T13:26:58.853
> 
> 标签：php, javascript, udid

这是添加到数据库的代码：

```
<?php 
/*Config*/ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T13:45:16.940

听起来应该可以使用[PHP 会话变量](http://www.php.net/manual/en/book.session.php)轻松完成。

只需使用会话并设置会话变量（称其为发布或其他），如果设置了该变量，则不允许用户发布（隐藏提交按钮或在您的 javascript 中使用 PHP if 语句仅执行操作当未设置该变量时）。

当用户关闭浏览器时，会话将被清除。

作为一个可能的示例，在您用于添加到数据库的 PHP 代码中，只需将其放在开头：

```
session_start();
if (isset($_SESSION['posted']))
    die("posted");
$_SESSION['posted'] = true; 
```

* * *

**编辑 ：**

您只需要添加另一个`else if`语句。它看起来像这样：

```
if(response == "knownudid"){
    document.getElementById('udid_message').innerHTML = '<br><i><font color="red">This UDID has already been inserted and it is valid.</font></i>' ;
}else if(response == "noudid"){
    document.getElementById('udid_message').innerHTML = '<br><i><font color="orange">Please, enter your UDID.</font></i>' ;
}else if(response == "errudid"){
    document.getElementById('udid_message').innerHTML = '<br><i><font color="red">It seems this UDID is not correct. Please check for typo.</font></i>' ;
}else if(response == "validatedudid"){
    document.getElementById('udid_message').innerHTML = '<br><i><font color="green">This UDID has been found as an invalid one. Now it is valid.</font></i>' ;
}else if(response == "posted"){    // Here is the new one
    document.getElementById('udid_message').innerHTML = '<br><i><font color="red">You have already posted a UDID for this session.</font></i>' ;
}else{
    document.getElementById('udid_message').innerHTML = '<br><i><font color="green">UDID <b>'+response+'</b> successfully inserted.</font></i>';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T13:31:22.303

使用一些不错的 jQuery 或 js，您可以在用户提交后隐藏表单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T13:49:16.500

*   在 HTML 元素中包含 javascript 是不好的，将其移动到 <script> 标记中，或者更好的是，将其移动到单独的 .js 文件中。

*   对于 HTML5 浏览器，`[placeholder](http://www.w3schools.com/html5/att_input_placeholder.asp)`这是一种为文本字段提供说明的更优雅的方式。

*   如果您使用 AJAX 提交表单，请在您的函数中`insert_udid()`添加：

.

```
document.getElementById('your_button_or_form').disabled = true;
// or document.getElementById('your_form').style.visibility = 'hidden'; 
```

...否则，您将需要 php 代码来禁用或忽略响应 HTML 中的表单。

# ajax - MVC + 控制器视图不显示

> ID：12110324
> 
> 赞同：1
> 
> 时间：2012-08-24T13:27:02.763
> 
> 标签：ajax, asp.net-mvc

我正在使用 ajax 将 2 个值发布到我的控制器，控制器得到了值但不会显示视图。请协助我在这里做错了什么。谢谢。

**Javascript：**

```
function grantPermission() {
        window.FB.login(function (response) {
            if (response.authResponse) {
                uid = response.authResponse.userID;
                accesstoken = response.authResponse.accessToken;
                var postData = { facebookUID: uid, facebookAccessTok: accesstoken };
                $.ajax({
                    url: '@Url.Action("SavePhoto")',
                    data: postData,
                    dataType: 'json',
                    success: function (response) {
                        // process the results from the controller action
                        //  window.location.href = response.Url;
                    }
                });
            } else {
                console.log('User cancelled login or did not fully authorize.');
                alert('User cancelled login');
            }
        }, { scope: 'publish_stream' });
    }; 
```

**按钮：**

```
 <input type="button" id="auth-loginlink" value="Proceed" onclick="grantPermission();"/> 
```

**控制器：**

```
public PartialViewResult SavePhoto(string facebookUID, string facebookAccessTok)
        {
            return PartialView("BlurredPhoto");
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T13:33:18.840

您需要将返回的 HTML 嵌入到您的文档中的某个位置。例如，如果您添加一个

```
<div id='MyDiv'> 
```

然后将您的ajax调用更改为

```
 success: function (responseText, textStatus, XMLHttpRequest) {
                $("#MyDiv").html(responseText);
            } 
```

正如 Slaks 所提到的，您还需要将您的[返回数据类型接受更改为 'html'](http://api.jquery.com/jQuery.ajax/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T13:29:12.553

您需要在`success`回调中使用来自服务器的 HTML 源代码。

您可能应该从不告诉 jQuery HTML 是`datatype: 'json'`.

# git - git commit 未更改的文件列表

> ID：12110329
> 
> 赞同：0
> 
> 时间：2012-08-24T13:27:14.533
> 
> 标签：git

我知道

```
git ls-tree -r --name-only --full-tree <sha1> 
```

会给我一个给定提交中包含的所有文件的列表，而像

```
git show --stat --name-only --pretty=format:'' <sha1> 
```

只会列出由 commit 更改的文件`<sha1>`。

如何获取给定`git`提交未更改的文件列表？我确信可以使用上面的命令加上一些`sort`and来完成`diff`，但如果可能的话，我宁愿这样做`git`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T14:49:13.103

不确定您是否可以纯粹使用`git`，至少不能仅使用瓷器命令。我会这样做：

```
git ls-tree -r --name-only --full-tree <sha1> | sort > /tmp/allfiles
git show --stat --name-only --pretty=format:'' <sha1> | sort > /tmp/changedfiles
comm -23 /tmp/allfiles /tmp/changedfiles 
```

# ruby-on-rails - 在同一 Apache 服务器上部署 2 个站点

> ID：12110334
> 
> 赞同：1
> 
> 时间：2012-08-24T13:27:23.670
> 
> 标签：ruby-on-rails, ruby-on-rails-3, apache, deployment

我需要将我的 Rails 应用程序部署到已经在其根目录服务 PHP 站点的服务器。我无法触及现有网站，我必须将我的应用程序部署在子 url 或子域，即`xx.xx.xx.xx/rails`或`rails.xx.xx.xx.xx`.

我通常用来部署我的应用程序的 Apache 配置：

```
 <VirtualHost *:80>

      ServerName localhost

      DocumentRoot "C:/RubyStack-3.2.5-0/projects/app_name/public"
      <Directory "C:/RubyStack-3.2.5-0/projects/app_name/public">
        Allow from all
        Options -MultiViews
      </Directory>

      RewriteEngine On

      RewriteCond %{DOCUMENT_ROOT}/%{REQUEST_FILENAME} !-f
      RewriteRule ^/(.*)$ balancer://app_balancers%{REQUEST_URI} [P,QSA,L]

      <Proxy balancer://app_balancers>
        BalancerMember http://localhost:3001/
        BalancerMember http://localhost:3002/
      </Proxy>

      # Support for far-futures expires header
      <LocationMatch "^/assets/.*$">
        Header unset ETag
        FileETag None
        # RFC says only cache for 1 year
        ExpiresActive On
        ExpiresDefault "access plus 1 year"
      </LocationMatch>
    </VirtualHost> 
```

如何更改此配置以从子 URL 或子域提供该文件夹？A`RedirectMatch`行不通，因为它还会将人们从现有的 PHP 站点中引导出来，对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T15:21:51.940

最简单的方法是使用您建议的子域进行基于名称的虚拟主机。所以你写的地方：

```
<VirtualHost *:80>
  ServerName localhost
</VirtualHost> 
```

只需输入您的子域：

```
<VirtualHost *:80>
  ServerName mysubdomain.mycompany.com
</VirtualHost> 
```

然后，Apache 应该自动将对该子域的任何请求与“主”虚拟主机分开。

**编辑：**

或者，也可以将您的 rails 应用程序安装到子目录（假设您使用的是 Passenger。）这是一个基于我自己的本地暂存环境的示例。我按照[Phusion 网站上的说明完成了这项工作](http://www.modrails.com/documentation/Users%20guide%20Apache.html#deploying_rails_to_sub_uri)

```
<VirtualHost *:80>
  ServerName localhost

  # We will mount our application under http://localhost/myapp
  RailsBaseURI /myapp

  # This can be anywhere on the system, I just happened to use /home/www
  <Directory /home/www/myapp>
    # Here you can add any directives necessary for your app, like for example..
    SetEnv GEM_HOME /home/user/.rvm/gems/ree-1.8.7-2012.02
  </Directory>
</VirtualHost> 
```

现在您必须再做一件事，那就是使 /home/www/myapp 成为指向实际应用程序的公共目录的链接。因此，假设您在自己的 homedir 中有应用程序，您必须输入以下内容：

```
cd /home/www
ln -s /home/myuser/myapp/public myapp 
```

如果您然后键入 ls -l 它应该显示：

```
lrwxrwxrwx 1 myuser myuser 18 Jun 10 16:41 devb -> /home/myuser/myapp/public 
```

我认为应该是这样。

# php - 把图片转成电影

> ID：12110336
> 
> 赞同：-2
> 
> 时间：2012-08-24T13:27:26.260
> 
> 标签：php, javascript, flash

如何使用`javascript`，`PHP`或其他将用户上传到服务器的照片变成电影？

例如，我想将照片转换成`1.jpg,2.jpg,3.jpg`或其他格式。`C:\htdocs\img\pic``1.avi``video`

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T13:29:32.627

最简单的解决方案是使用[ImageMagick](http://www.imagemagick.org/script/index.php)

```
convert *jpg mymovie.mpg 
```

# sql-server-2008 - 更新列数据类型并更新数据

> ID：12110337
> 
> 赞同：0
> 
> 时间：2012-08-24T13:27:26.407
> 
> 标签：sql-server-2008, type-conversion

我有一个 SQL 服务器数据库设计问题。

我有一个现有的数据库表，其中包含数百条记录。其中一列是 NVARCHAR 类型，但它应该是一个整数，包含查找表中的所有数据。

SQL Server 中是否有任何巧妙的方法可以将数据从列中取出并放入新的查找表中，更改列的数据类型并使用新查找表中的正确 ID 更新值？

提前致谢。

我正在使用 SQL Server 2008

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T13:30:49.410

不，您必须按照 3 个步骤进行操作：

1.  将值插入新的查找表
2.  更新当前行，以便该`nvarchar`列现在包含查找表中的适当 ID 值
3.  将列定义更改为`int`
4.  (4th of 3 :-)) 在该列和查找表的 ID 列之间创建外键约束。

值得庆幸的是，`int`值应该始终能够放入 中`nvarchar`，除非它特别小（在这种情况下，您必须先扩展它）。

# jquery - jquery/javascript：在事件发生后设置 z-index

> ID：12110346
> 
> 赞同：0
> 
> 时间：2012-08-24T13:27:59.783
> 
> 标签：jquery, css

我正在显示一堆图像，我需要做的是淡出顶部的图像，然后将其移动到堆栈的底部并将其不透明度恢复到 1.0。除了更改包含图像的对象（div）上的 z-index 之外，一切工作正常。我已经绝对定位了 div，虽然我正在动态创建它，但不确定这是否会有所作为。这是我的代码[注意：淡入和淡出现在被注释以用于调试目的]：

```
// JavaScript Document

var Summary = {};

Summary.hasTemplate = true;
Summary.template = {

    summaryID : 'pageName',
    itemCount : 5,
    speed : 2000,
    pause : 2000,
    imgDirectoryPath : 'css/images/summaryImages/',
    imgPrefix : '26_01_010_###',
    imgExtension : '.png',
    imgCountStart : 1,
    imgCountEnd : 5,
    imgStep : 1,
    imgSize : {width : 400, height : 400},
    imgFiles : {},
    containerPos : {x : 0, y : 0}
}

function buildSummary() { 

var summaryCode = "<div id='summaryWrapper'>"; 

//check to see if the summary is running off a template or unique files
if (Summary.hasTemplate == true) { 

    //set a number to start our img count from (one less than the start number in the object)
    var imgNum = Summary.template.imgCountStart-1;

    //build an array of the img prefix components
    var imgPrefixComponents = Summary.template.imgPrefix.split("_");

    //check to see if there is more than one underscore, then build out the image prefix
    var imgPrefix = "";
    if (imgPrefixComponents.length < 2) { 
        imgPrefix = imgPrefixComponents[0] + "_";
    } else {
        for(var p=0; p<imgPrefixComponents.length; p++) {
            if (p != imgPrefixComponents.length-1) {  
                imgPrefix += imgPrefixComponents[p] + "_";
            }
        }
    }

    var imgExtension = Summary.template.imgExtension;

    //get the count of the leading zeroes (use length-1 in case the image name contains other underscores)
    var zeroCount = imgPrefixComponents[imgPrefixComponents.length-1].match(/#/g).length;

    //build out the image prefix
    for(z=0; z<zeroCount; z++) { 
        imgPrefix += "0"
    }

    //loop through the image count
    for (i=0; i<Summary.template.itemCount; i++) { 

        //increment the image number
        imgNum++;

        //start building the image wrapper
        var imgWrapperCode = "<div class'summaryImg' pageID='" + Summary.template.summaryID + "' thisImg='summaryImg_" + imgNum + "'  style='z-index:" + (100+imgNum) + "; position: absolute; top: 100; left: 100; width:" + Summary.template.imgSize.width +"; height: " + Summary.template.imgSize.width + ";'>"; 

        //get the img directory path
        var imgDirectoryPath = Summary.template.imgDirectoryPath;

        //build the imgFilePath
        var imgFilePath = imgDirectoryPath + imgPrefix + imgNum + imgExtension

        imgWrapperCode += "<img src='" + imgFilePath + "'></div>";

        summaryCode += imgWrapperCode;

        Summary.template.imgFiles[i] = imgFilePath;

    }

}

Summary.summaryCode = summaryCode;
}

function setUpSummaryFade() { 

//check to see if we are working with a template or not
if (Summary.hasTemplate == true) { 

    //get an array of the image divs, the summaryID let's us target a page so we're not ligthing them all up at once
    var imgDivs = $('div[pageID="' + Summary.template.summaryID + '"]');

    //build an array of z-indexes
    var zIndexes = new Array();
    for (i=0; i<imgDivs.length; i++) { 

        var thisImgDiv = imgDivs[i];
        var thisZIndex = $(thisImgDiv).css('z-index');
        zIndexes.push(thisZIndex);
    }

    i = imgDivs.length;
    setInterval(function() { 
        i--; 
        if (i > -1) { 
            fadeDivs(imgDivs[i], zIndexes, imgDivs); 
        } else { 
            i = imgDivs.length;
        }

    }, Summary.template.pause);
}
}

function fadeDivs(thisDiv, zIndexes, imgDivs)  {

//$(thisDiv).fadeOut('slow');

//change it's z-index
var maxZIndex = zIndexes[zIndexes.length-1];
var minZIndex = zIndexes[0];

for(z=0; z<imgDivs.length; z++) { 

    var thisDiv = imgDivs[z];
    var thisZIndex = $(thisDiv).css('z-index');

            //EDITS: Works on the first element, but not on the others
    console.log("Start z: " + $(thisDiv).css('z-index'));
    if (thisZIndex == maxZIndex) { 
        $(thisDiv).css('z-index', minZIndex);
    } else { 
        $(thisDiv).css('z-index', thisZIndex+1);
    }
    console.log("End z: " + $(thisDiv).css('z-index'));
}

//bring it back to life
//$(thisDiv).fadeIn('fast'); 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T13:32:18.393

这一行是错误的：

```
if (thisZIndex = maxZIndex) { 
```

始终返回 true，您应该将其更改为

```
if (thisZIndex == maxZIndex) { 
```

# javascript - 在复选框悬停时，为不同的 div 设置动画

> ID：12110347
> 
> 赞同：1
> 
> 时间：2012-08-24T13:28:05.650
> 
> 标签：javascript, forms, checkbox, hover, jquery-animate

我希望复选框#video-checkbox 悬停在上方时，可以为图像#video 设置动画，如下所示。我究竟做错了什么？

```
$(document).ready(function () {
    $("#video-checkbox").hover(function () {
        $("#video").stop().animate({
            opacity: 0.75,
            marginTop: -10
        }, 400);
    }, function () {
        $("#video").stop().animate({
            opacity: 1.0,
            marginTop: 0
        }, 400);
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T13:35:29.907

您必须将**jQuery**源代码添加到您的页面。

你可以[在这里下载](http://docs.jquery.com/Downloading_jQuery)

[缩小版](http://code.jquery.com/jquery-1.8.0.min.js)

[完整版开发](http://code.jquery.com/jquery-1.8.0.js)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T13:35:53.480

从您提供的链接看来，您的页面中未包含 jQuery，$ 未定义。下载[jQuery](http://jquery.com)并在页面的 head 标签中链接到它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T13:37:12.180

1：您的页面中不包含 jQuery

2：您的页面上似乎没有带有视频 ID 的标签。

# iphone - 使用界面生成器设计视图

> ID：12110352
> 
> 赞同：0
> 
> 时间：2012-08-24T13:28:13.717
> 
> 标签：iphone, ios, view, interface-builder

我是界面生成器的新手。

我想在界面生成器中设计一个视图。
我知道我可以通过“loadNibNamed”加载视图。

现在，假设视图中有两个按钮（或两个点击手势识别器），当这些按钮被触摸时，一些功能需要触发。
如何连接（？）触摸到我称之为“loadNibNamed”的viewController的某些功能？

该视图将是一个带有两个按钮（或点击手势识别器）的弹出视图（[PopUp 视图](https://github.com/sonsongithub/PopupView)）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T13:33:42.217

您需要设置从界面构建器对象（按钮）到您的类的出口。

为此，您需要将调用“loadNibNamed”的类作为委托类。然后合成按钮，使其成为一个属性。

完成后添加选择器：

```
 [button addTarget:self action:@selector(buttonPressed) 
```

forControlEvents:UIControlEventTouchUpInside];

更好的方法是为该特定视图编写一个新类。然后，如果您想在名为“loadNibNamed”的类中捕获事件，您可以将目标设置为其他内容：

```
[button addTarget:(UIMyClass)sender action:@selector(buttonPressed)
   forControlEvents:UIControlEventTouchUpInside]; 
```

那里应该有很多教程:) - 顺便说一句，您是否考虑过升级您的 xcode 并使用故事板？

- 编辑： -

出现问题是因为您将编码与界面构建混合在一起。我认为您仍然需要为您的新视图创建一个视图控制器类，但您可以将选择器的目标更改为调用类。

在此处查看有关选择器的更多信息：[@selector 和其他类（Objective-C）](https://stackoverflow.com/questions/3206623/selector-and-other-class-objective-c)

这里有一个关于以编程方式将数据推送到新视图的类似问题：

[我们可以传递一个参数来查看是否加载或视图将出现在一个类中的其他类](https://stackoverflow.com/questions/6435193/can-we-pass-a-parameter-to-view-did-load-or-view-will-appear-of-other-class-from)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T20:04:59.043

如果您是 IB 新手，则需要三个步骤。

1.  在您的 .h（头文件）文件中添加方法名称，即

    -(IBAction)som​​eMethod:(id) 发件人；

2.  保存修改后的 .h 文件。

3.  打开界面生成器。

4.  在我相信的工具菜单下打开文件所有者窗口。

5.  Cntrl+单击文件所有者窗口下的文件所有者选项。应该会出现一个黑色窗口，下面有一堆界面选项。someMethod 旁边应该会出现一个黑色的小圆圈

6.  将那个黑色小圆圈（应该出现一条蓝线）拖到您希望方法连接到的按钮上。应该会出现另一个菜单。选择一个适当的动作（比如触摸或类似的东西）。重复第二个按钮。

7.  在 IB 中为每个按钮在 Properties 下的属性列表中给他们一个标签（我相信）。如果您需要“属性”窗口，请再次查看“工具”菜单。转到标签部分并为每个按钮指定一个不同的标签。（1、2、3 ...等）。

8.  实现 .m 文件中的方法。确保区分用户选择哪个按钮的操作，即 if (sender.tag == 1) {...} else if (sender.tag == 2) {...}

保存并运行。

结束。

# powershell - Powershell winrm 受信任主机不工作

> ID：12110355
> 
> 赞同：5
> 
> 时间：2012-08-24T13:28:22.883
> 
> 标签：powershell, winrm

我正在尝试在几台机器上设置远程管理。我可以从我的计算机成功地在远程机器上执行命令，但我不希望任何人能够这样做。

我尝试在远程计算机上设置受信任的主机，并重新启动服务，但它似乎没有做任何事情。

例如，在远程机器上：

```
 winrm set winrm/config/client '@{TrustedHosts="someIncorrectName"}' 
```

然后我重新启动 winrm 服务。

为什么我仍然可以从笔记本电脑运行远程命令？它不应该阻止命令被执行吗？

我正在按以下方式运行命令：

```
Invoke-Command -cn remoteMachine -Credential $cred -scriptblock {get-process} 
```

其中 $cred 是使用 get-credential 域/用户名生成的。

我读过一些关于 TrustedHosts 的文章，他们似乎给出了相互矛盾的报告，说明它的作用。有些人似乎说它可以防止在受信任主机列表中未列出的计算机上执行命令。其他人说这是可以在该机器上运行命令的计算机列表。

MSDN 说：“指定受信任的远程计算机的列表。” 这似乎暗示它是第二个选项（可以在机器上执行命令的计算机列表）。

我究竟做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T21:11:45.797

TrustedHosts 不会像您认为的那样做。与 Unix .rhosts 不同，此设置适用于 PowerShell*客户端*，而不是远程服务器端点。这就是它出现在以下位置的原因：

```
WSMan:\localhost\Client 
```

如果它与侦听器相关，它将位于`Service`节点下。

正如另一个答案所涉及的那样，这通常用于非域或混合环境中，以防止您的*客户端*向不受信任的远程计算机发送 NTLM 质询-响应或基本身份验证尝试。为什么？因为远程流氓服务器可能会捕获此信息并使用它来破坏您的网络。当您处于混合环境中时，唯一可用的保护是 SSL，许多人可能会选择通过`AllowUnencrypted = $false`再次在驱动器`Client`节点中禁用此功能。`WSMAN`

那么，如何限制传入连接？您现在应该已经建立连接并开始查看`WSMAN:\localhost\Service`远程服务器上的节点下。如果你这样做，你会看到：

```
 WSManConfig: Microsoft.WSMan.Management\WSMan::localhost\Service

Type            Name                           SourceOfValue   Value                                                                       
----            ----                           -------------   -----                                                                       
System.String   RootSDDL                                       ...    
System.String   MaxConcurrentOperations                        4294967295                                                                  
System.String   MaxConcurrentOperationsPerUser                 1500                                                                        
System.String   EnumerationTimeoutms                           240000                                                                      
System.String   MaxConnections                                 300                                                                         
System.String   MaxPacketRetrievalTimeSeconds                  120                                                                         
System.String   AllowUnencrypted                               false                                                                       
Container       Auth                                                                                                                       
Container       DefaultPorts                                                                                                               
System.String   IPv4Filter                                     *                                                                           
System.String   IPv6Filter                                     *                                                                           
System.String   EnableCompatibilityHttpList...                 false                                                                       
System.String   EnableCompatibilityHttpsLis...                 false                                                                       
System.String   CertificateThumbprint                                                                                                      
System.String   AllowRemoteAccess                              true 
```

现在，查看此列表，您会看到一些相关命名的属性，例如`IPv4Filter`和`IPv6Filter`。猜猜这些是做什么的;-)

# c# - 程序终止后 Excel 进程仍在运行

> ID：12110364
> 
> 赞同：1
> 
> 时间：2012-08-24T13:28:55.557
> 
> 标签：c#, excel, com, process, interop

我编写了一些从 Excel 文件读取并输出 Excel 文件的 C# 程序。但是，我注意到，在程序终止并且所有文件都已关闭后，我仍然有很多 Excel 进程仍在运行。这是我处理文件创建和关闭的方式：

```
Microsoft.Office.Interop.Excel.Application xlApp = new Microsoft.Office.Interop.Excel.Application();
Workbook wb = xlApp.Workbooks.Add(XlWBATemplate.xlWBATWorksheet);
Worksheet ws = (Worksheet)wb.Worksheets[1];
...
wb.Close(true, saveDirectory + "\\" + reportName, false);
xlApp.Quit();
Marshal.ReleaseComObject(wb);
Marshal.ReleaseComObject(xlApp);
this.Close(); 
```

我错过了什么吗？任何建议表示赞赏。

问候。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T13:42:42.430

您的代码并未释放所有 COM 引用（例如`xlApp.Workbooks.Add`，创建对`Workbooks`从未释放的对象的引用）。因此，Excel 实例不会关闭，如[本知识库文章](http://support.microsoft.com/kb/317109)中所述，并在许多 StackOverflow 问题中进行了详细讨论。

当您的进程终止后，当 COM 检测到一段时间没有来自客户端的 ping 时，Excel 实例最终将关闭。

# android - 如何跟踪在 ActionBar 上单击的 Share 按钮？

> ID：12110366
> 
> 赞同：0
> 
> 时间：2012-08-24T13:28:58.847
> 
> 标签：android, android-actionbar, actionbarsherlock

我以这种方式向我的 ActionBarSherlock 添加了共享选项：

```
public boolean onCreateOptionsMenu(final Menu menu) {

menu.add("Share")
    .setIcon(R.drawable.ic_title_share_default)
    .setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM | MenuItem.SHOW_AS_ACTION_WITH_TEXT);
} 
```

点击这个图标我想做点什么。如何跟踪此 ShareIcon 的点击？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T13:46:39.410

您应该创建一个 XML 文件来定义菜单项。例如`mymenu.xml`

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:id="@+id/share"
          android:icon="@drawable/ic_title_share_default"
          android:title="@string/share"
          android:showAsAction="ifRoom"/>
</menu> 
```

然后在`onCreateOptionsMenu`你会做：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getSupportMenuInflater();
    inflater.inflate(R.menu.mymenu, menu);
    return true;
} 
```

要处理项目选择：

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case R.id.share:
            //do something for share
            return true;
        default:
            return super.onOptionsItemSelected(item);
    }
} 
```

您可以在此处查看更多信息：

> [http://developer.android.com/guide/topics/ui/menus.html](http://developer.android.com/guide/topics/ui/menus.html)
> 
> [http://actionbarsherlock.com/usage.html](http://actionbarsherlock.com/usage.html)

# android - 如何使用 ArrayList 动态更新微调器？

> ID：12110370
> 
> 赞同：1
> 
> 时间：2012-08-24T13:29:06.180
> 
> 标签：android, dynamic, arraylist, nullpointerexception, spinner

我创建了一个`Spinner`填充有`ArrayList`. 我想动态地将值添加到`ArrayList`，因此`Spinner`动态填充。但是，当我尝试将值添加到 my`ArrayList`时，我得到一个`NullPointerException`.

我错过了什么？在修改之前我必须重置适配器`ArrayList`吗？

这是我的代码：

我的微调器、arraylist 和适配器：

```
deleteselection = (Spinner)view.findViewById(R.id.deletespinner);
portfoliosdelete = new ArrayList<String>();
portfoliosdelete.add("Select Portfolio");
adapterdeletetype = new ArrayAdapter<String>(this, android.R.layout.simple_spinner_item,portfoliosdelete){

    @Override
    public View getDropDownView(int position, View convertView, ViewGroup parent)
    {
        View v = null;

        // If this is the initial dummy entry, make it hidden
        if (position == 0) {
            TextView tv = new TextView(getContext());
            tv.setHeight(0);
            tv.setVisibility(View.GONE);
            v = tv;
        }
        else {
            // Pass convertView as null to prevent reuse of special case views
            v = super.getDropDownView(position, null, parent);
        }

        // Hide scroll bar because it appears sometimes unnecessarily, this does not prevent scrolling
        parent.setVerticalScrollBarEnabled(false);
        return v;
    }
};
adapterdeletetype.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
deleteselection.setAdapter(adapterdeletetype); 
```

我动态更新微调器的代码：

```
 else if(users.contains(usernull)){
    pn1 = enterportfolioname.getText().toString();
    user1 = new PortfolioRecord(pn1, "someemail@gmail.com");
    users.remove(usernull);
    users.add(user1);
    portfoliosdelete.add(pn1); // <-- This causes a null pointer exception
    adapterdeletetype.notifyDataSetChanged();
    portfoliolist.invalidateViews(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T13:52:17.053

使用下面的代码。当用户从微调器中选择并添加新项目时，此代码将添加一个新项目。

代码示例：

布局 main.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:weightSum="10" >

    <Spinner
        android:id="@+id/cmbNames"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />
</LinearLayout> 
```

布局 spinner_item.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/tvName"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />
</LinearLayout> 
```

活动类：

```
public class MainActivity extends Activity {
    private static final String NAME = "name";
    private static final String ADD_NEW_ITEM = "Add New Item";

    private SimpleAdapter adapter;
    private Spinner cmbNames;
    private List<HashMap<String, String>> lstNames;
    private int counter;

    private OnItemSelectedListener itemSelectedListener = new OnItemSelectedListener() {

        @Override
        public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2,
                long arg3) {
            HashMap<String, String> map = lstNames.get(arg2);
            String name = map.get(NAME);
            if (name.equalsIgnoreCase(ADD_NEW_ITEM)) {
                lstNames.remove(map);
                counter++;
                addNewName(String.valueOf(counter));
                addNewName(ADD_NEW_ITEM);
                adapter.notifyDataSetChanged();
            }
        }

        @Override
        public void onNothingSelected(AdapterView<?> arg0) {
            // TODO Auto-generated method stub
        }
    };

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        populateList();

        cmbNames = (Spinner) findViewById(R.id.cmbNames);
        adapter = new SimpleAdapter(this, lstNames, R.layout.spinner_item,
                new String[] { NAME }, new int[] { R.id.tvName });
        cmbNames.setAdapter(adapter);
        cmbNames.setOnItemSelectedListener(itemSelectedListener);
    }

    private void populateList() {
        lstNames = new ArrayList<HashMap<String, String>>();

        addNewName("abc");
        addNewName("pqr");
        addNewName("xyz");
        addNewName(ADD_NEW_ITEM);
    }

    private void addNewName(String name) {
        HashMap<String, String> map = new HashMap<String, String>();
        map.put(NAME, name);
        lstNames.add(map);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T13:52:03.260

尝试在 adapterdeletetype 而不是 arraylist 上调用 delete。如果失败，请发布您的 logcat 输出。

# jquery - jquery插件中ie 8和ie 7中的阴影问题

> ID：12110372
> 
> 赞同：4
> 
> 时间：2012-08-24T13:29:07.653
> 
> 标签：jquery, html

在我的网站上，页面顶部的滑块在 ie 7 和 ie8 中没有正确显示。阴影出现在第一个图像中，而不是仅在 ie 中的所有图像中。它工作正常，即 mozilla 和其他浏览器。

[http://maxrevamp.oliveebusiness.com/hospital-pitampura4.html](http://maxrevamp.oliveebusiness.com/hospital-pitampura4.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T13:33:10.753

这是因为 IE7 & IE8 不支持 css3。

试试css3pie [http://css3pie.com/](http://css3pie.com/)

# excel - 删除一行单元格，但不是整行

> ID：12110373
> 
> 赞同：-2
> 
> 时间：2012-08-24T13:29:09.190
> 
> 标签：excel, vba

我只需要删除单元格 7B:7G，而单独留下 7A。如何使用 excel VBA 执行此操作？

这是我现在拥有的代码：

```
Option Explicit

Sub Import()

    Dim lastrow As Long
    Dim wsIMP As Worksheet 'Import
    Dim wsTOT As Worksheet 'Total
    Dim wsSHI As Worksheet 'Shipped
    Dim wsEST As Worksheet 'Estimate
    Dim wsISS As Worksheet 'Issued
    Dim cel As Range

    Set wsIMP = Sheets("Import")
    Set wsTOT = Sheets("Total")
    Set wsSHI = Sheets("Shipped")
    Set wsEST = Sheets("Estimate")
    Set wsISS = Sheets("Issued")

    With wsIMP

        wsIMP.Range("E6").Cut wsIMP.Range("E5")
        wsIMP.Range("B7:G7").Delete (xlShiftUp)

    End With

End Sub 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T13:32:27.833

您需要做的是删除 range `B7:G7`，向左或向上移动单元格（取决于要求）：

```
range("B7:G7").delete(xlShiftToLeft) 
```

或者

```
range("B7:G7").delete(xlShiftUp) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T13:55:57.867

使用 With 时，不应在 2 条中间行中提及 wsIMP。将您的代码更改为：

```
With wsIMP

    .Range("E6").Cut .Range("E5")
    .Range("B7:G7").Delete (xlShiftUp)

End With 
```

还要注意第二范围符号。这是 B7:G7 不是 7B:7G

# php - 通过php调用url并检查是否登录

> ID：12110378
> 
> 赞同：0
> 
> 时间：2012-08-24T13:29:25.457
> 
> 标签：php, logging, jboss, file-get-contents

给定**URL**（*https://127.0.0.1:8443/example.html <- 是的，它是安全连接*）正在检查用户是否已登录（通过 jboss 服务器），如果是，则他有权访问某些内容。

当我登录并尝试在浏览器中运行此**url**时，一切正常，jboss logger 显示用户已登录，但是当我从 php 脚本（**http://127.0.0.1/test/check** *< - codeigniter url，下面的代码*）用户总是在 jboss 中注销。不知道为什么。

我试过**curl**库，也没有成功。

```
public function check(){
    echo 'begin';
//      $total_rows = file_get_contents('https://127.0.0.1:8443/example.html?shopId=121');
    $total_rows = $this->getUrl('https://127.0.0.1:8443/example.html', '121');
    print_r($total_rows);
    echo 'end';
}

function getUrl($url, $shopId ='') {
    $post = 'shopId=' . $shopId;

    $ch = curl_init();
//      curl_setopt($ch, CURLOPT_PORT, 8443);  
    curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_ANY);
//      curl_setopt ($ch, CURLOPT_CAINFO, dirname(__FILE__)."/../../files/cacert.pem");
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);     
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, FALSE);
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_POST, 1);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $post);
//        curl_setopt($ch, CURLOPT_HTTPHEADER, Array("Secure Content-Type: text/html; charset=UTF-8")); 
//        curl_setopt($ch, CURLOPT_HTTPHEADER, array('Host: 127.0.0.1:8443'));

    $ret = curl_exec($ch);
    curl_error ($ch );
    curl_close($ch);
    return $ret;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T14:26:28.203

简而言之：这不是网络的工作方式。

当您进入`https://example.com`浏览器并在那里登录时，您的浏览器会收到一个 cookie 并登录。

当你`https://example.com`从一个完全不相关的服务器（即使该服务器在同一台机器上）获取 URL 时，它是来自新客户端的完全不同的请求，你将相应地*不会*登录。就像你打开另一个浏览器一样（例如，Firefox 和 Chrome）；您不会自动登录两者。

# java - javax.net.ssl.trustStore 未更新

> ID：12110381
> 
> 赞同：1
> 
> 时间：2012-08-24T13:29:38.513
> 
> 标签：java, web-services, jakarta-ee, axis2

下面是使用 dev 密钥库调用第一个 Web 服务并使用阶段密钥库调用第二个 Web 服务的示例代码。

```
public static void main(String args[]) {

    System.setProperty("javax.net.ssl.trustStore",
            "C:\\Users\\shahire\\Desktop\\Keystores\\Keystores\\dev\\dev.keystore");
    System.out.println("1st web service call");
            // 1st axis2 web service call code

    System.setProperty("javax.net.ssl.trustStore",
        "C:\\Users\\shahire\\Desktop\\Keystores\\Keystores\\stage\\stage.keystore");
    System.out.println("2nd web service call");
            // 2nd axis2 web service call code

} 
```

我能够调用第一个 Web 服务调用但是我在访问第二个 Web 服务调用时遇到了错误

org.apache.axis2.AxisFault：sun.security.validator.ValidatorException：PKIX 路径构建失败：sun.security.provider.certpath.SunCertPathBuilderException：无法在 org.apache.axis2.AxisFault.makeFault 上找到请求目标的有效认证路径(AxisFault.java:417)

通过查看异常，我觉得它缓存了“javax.net.ssl.trustStore”位置。

当我评论第一个网络服务调用时，我可以访问第二个网络服务。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T15:09:51.580

只是要清楚。我不知道`Axis2`实际上是否由于某种原因“重用”或缓存了您所说的信任库系统属性；我最好的猜测是它初始化了一些读取属性的对象，并且在配置后不需要再次读取它。
**但是**您可以通过*将所有受信任的证书放在同一个信任库中*来解决这个问题。这将绝对解决您的问题，因为正如您所说，您实际上可以成功连接到第二个 Web 服务。
你为什么首先使用不同的信任库？
如果必须，由于某些安全要求（您有安全要求吗？），您应该查看是否有其他`Axis`专门用于您未使用的 ssl 属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T16:03:13.293

您可以尝试另一种方法，而无需修改 JVM 提供的属性。

这是一个示例：

```
package test.ssl;

import java.io.BufferedReader;
import java.io.FileInputStream;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.net.URL;
import java.security.KeyStore;

import javax.net.ssl.HttpsURLConnection;
import javax.net.ssl.KeyManagerFactory;
import javax.net.ssl.SSLContext;
import javax.net.ssl.SSLSocketFactory;
import javax.net.ssl.TrustManagerFactory;

public class SSLClient {

    public void provider() throws Exception {
        // first call
        invokeWebServiceSSL(".../.../.../name.keystore", "changeit",
                "https://../../");
        // second call
        // invokeWebServiceSSL(String keystorePath, String pass, String
        // endpointURL)
    }

    public static void invokeWebServiceSSL(String keystorePath, String pass, String endpointURL) {
        HttpsURLConnection conn = null;
        try {

            char[] password = pass.toCharArray();
            FileInputStream fis = new FileInputStream(keystorePath);
            KeyStore ks = KeyStore.getInstance(KeyStore.getDefaultType());
            ks.load(fis, password);

            KeyManagerFactory kmf = KeyManagerFactory.getInstance("SunX509");
            kmf.init(ks, password);

            TrustManagerFactory tmf = TrustManagerFactory.getInstance(TrustManagerFactory.getDefaultAlgorithm());
            tmf.init(ks);
            fis.close();

            SSLContext ctx = SSLContext.getInstance("SSL");
            ctx.init(kmf.getKeyManagers(), tmf.getTrustManagers(), null);
            SSLSocketFactory sf = ctx.getSocketFactory();

            URL url = new URL(endpointURL);
            conn = (HttpsURLConnection) url.openConnection();
            conn.setSSLSocketFactory(sf);

            InputStream inputstream = conn.getInputStream();
            InputStreamReader inputstreamreader = new InputStreamReader(inputstream);
            BufferedReader bufferedreader = new BufferedReader(inputstreamreader);

            String rs = null;
            while ((rs = bufferedreader.readLine()) != null) {
                System.out.println("Received: " + rs);
            }

        } catch (Exception e) {
            e.printStackTrace();
        } finally {
            try {
                conn.getInputStream().close();
            } catch (Exception e) {
            }
        }
    }
} 
```

我希望这有帮助。

# php - CSRF 保护和可用性

> ID：12110382
> 
> 赞同：-1
> 
> 时间：2012-08-24T13:29:41.563
> 
> 标签：php, security, usability, csrf, csrf-protection

在最强大的 CSRF 保护之间，还有表单令牌保护。我对这种方法的问题是关于可用性：如果用户打开多个包含表单的页面，使用令牌，会生成多个令牌，但只有最后打开的页面可以成功发送表单，所有其他页面都会出错.

我想了2个解决方案：

1.  在整个会话期间保留唯一令牌。
2.  将所有生成的令牌存储在会话中。

但：

1.  这是更现实的解决方案，但不太安全。
2.  这会产生很大的资源开销，因为用户可以打开许多页面，而我必须存储所有生成的令牌。

因此，您是如何解决这个问题的？

PS 我正在开发的网站实际上是 PHP 中的电子商务，虽然汇款将通过外部提供商（如贝宝）进行管理，但我认为正确地为我的服务提供了良好的安全性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T13:32:41.973

您不需要在数据库中存储令牌。

相反，您应该在 cookie 中包含相同的标记；跨站点攻击者无法读取或设置 cookie。
只要您在 cookie 中获得与 POSTed 表单相同的令牌，您就安全了。

为了提高安全性，您可以使用带密钥的 HMAC 散列对它们进行散列，并验证该散列以确保令牌来自您的服务器。
您还可以为每个用户制作令牌。

# php - “你不能用正则表达式解析 HTML” 为什么？

> ID：12110388
> 
> 赞同：0
> 
> 时间：2012-08-24T13:29:56.430
> 
> 标签：php, regex, html-parsing

我知道我的问题似乎是重复的（[重复](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags)）......但特别是我没有尝试解析“True/Valid”HTML，它是 javascript 变量/或 HTML 标签的一部分，请参阅我的示例：

```
 <td width="10"></td>
            <td ><div id="combo_rub" style="CURSOR:pointer"></div><input type="hidden" id="rech_cod_cat"  name="rech_cod_cat" value="1"/></td>
            <td ><div id="combo_typ" style="CURSOR:pointer"></div></td>
            <td ><div id="combo_sou_typ" style="CURSOR:pointer"></div></td>

            <script type="text/javascript">
            d_rech_cod_rub       = "101";
            d_rech_cod_typ       = "1";
            d_rech_cod_sou_typ   = "1020121";

            //ComboBox sous_type
            var z_sou_typ=new dhtmlXCombo("combo_sou_typ","rech_cod_sou_typ",160); 
```

所以我在我的代码 PHP 中想要的是从 Javascript 部分而不是从 HTML 中检索 ( `d_rech_cod_rub`, `d_rech_cod_typ`, `d_rech_cod_sou_typ`) 的值，如您所见...

第二种情况是：

```
<td><a href="AnnoncesImmobilier.asp?rech_cod_rub=101&amp;rech_cod_typ=1">
<font color="#2154eb">Location (6920)</font></a> </td></tr></table></td></tr>
<tr><td><table width="100%" cellpadding="0" cellspacing="0"><tr>   
<td><a href="AnnoncesImmobilier.asp?rech_cod_rub=101&amp;rech_cod_typ=5"></td> 
```

同样在这里我需要检索'101'值......

最后，完整的故事：我经常使用 PHP 的 Curl 扩展，然后遇到类似上述示例的内容......问题是当我使用 HTML 解析器（如[http://simplehtmldom.sourceforge .net/](http://simplehtmldom.sourceforge.net/)）我无法完成我的工作，因为它只适用于有效的 HTML ..:( 我的问题：有任何解决方案可以稳定地检索值吗？如果你遇到一个像我这样的情况？

多谢你们。

**编辑**：所以根据大多数答案，使用 RegX 可以解决问题......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T13:37:44.457

如果你想要的只是那个值，那么就很容易使用正则表达式：

```
d_rech_cod_rub\s*=\s*"([0-9]+)"; 
```

第一个捕获组是您的价值所在。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T13:38:17.313

以下正则表达式可以解决问题

```
d_rech_cod_[a-z_ ]*= "([0-9]*)";
rech_cod_rub=([0-9]*) 
```

不确定 PHP，但您可以使用以下代码对其进行评估：

```
preg_match($regex, $content, $matches);
print($matches[1]); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-24T13:40:26.777

在更具体的答案中，正则表达式无法处理嵌套信息。

例如 ...

```
<span>Hello <span>World</span></span> 
```

查找的正则表达式`<span>.*<\/span>`将返回：

```
<span>Hello <span>World</span> 
```

我们甚至不会提及尝试处理缺少标签的无效 HTML。

像[这样的 ( `loadHTML`)](http://php.net/manual/en/domdocument.loadhtml.php)可能是您想要的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-24T13:36:30.247

我不确定是否可以使用一个正则表达式来做你想做的事情，但肯定可以使用每个变量一个正则表达式。也可以使用`strpos`函数来解析字符串。这里第二种方法可能是更有效的方法。

# templates - magento 无效的模板文件 /page/1column.phtml

> ID：12110389
> 
> 赞同：1
> 
> 时间：2012-08-24T13:29:56.603
> 
> 标签：templates, magento, magento-1.7

我的网站在 devp 上运行良好。服务器。在我将应用程序迁移到我的生产服务器之后。一切正常，直到我添加了一个扩展并启用它。该网站仍然有效，但产品视图页面未显示。每次单击产品视图页面时，此错误都会附加到我的日志文件中...

```
CRIT (2): Not valid template file:frontend/base/default/template/page/1column.phtml 
```

我检查了文件没问题，就像在开发服务器上工作的文件一样。我尝试禁用我拥有的唯一插件（自定义菜单），但问题仍然存在。我试过增加 memory_limit 但它也无济于事。

请帮忙，我陷入了困境。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-24T19:28:12.477

此错误的一个常见原因是使用符号链接而未在管理区域中启用它...

```
System > configuration > developer > Template Settings 
```

该错误在 app\code\core\Mage\Core\Block\Template.php 第 243 行附近触发（[请参见此处](https://github.com/LokeyCoding/magento-mirror/blob/magento-1.7/app/code/core/Mage/Core/Block/Template.php#L243)） - 因此，如果符号链接没有问题，那么这将是开始调试的好地方。

如果您没有使用 xDebug，那么在第 250 行附近捕获异常时，您应该记录或 var_dump 的值：

```
$includeFilePath 
```

和

```
$this->_viewDir 
```

然后确保它们都存在（注意大小写）

失败，您可能想查看权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-22T14:48:18.693

`UPDATE core_config_data SET value = '1' WHERE path = 'dev/template/allow_symlink';`

或者

`INSERT INTO core_config_data (scope, scope_id, path, value) VALUES ('default', 0, 'dev/template/allow_symlink', '1');`

# wpf - 我怎样才能使这个弹出窗口

> ID：12110391
> 
> 赞同：-3
> 
> 时间：2012-08-24T13:29:59.183
> 
> 标签：wpf

我想知道。我怎样才能使这个弹出窗口？ [http://imageshack.us/photo/my-images/43/wizardpage31zoom84.jpg/](http://imageshack.us/photo/my-images/43/wizardpage31zoom84.jpg/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T13:33:23.667

有一个[`Popup`](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.popup.aspx)课程。

# excel - vba 代码在 2010 年有效 广告在 2007 年无效

> ID：12110398
> 
> 赞同：0
> 
> 时间：2012-08-24T13:30:05.680
> 
> 标签：excel, vba

这条线在 excel 2010 中正常工作，在 excel 2007 中不起作用 - 在另一个 comp 上。

```
For Each ws In ThisWorkbook.Sheets... 
```

编译错误：找不到属性或库
“ws”标记为黄色

请问可能是什么原因？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T13:34:40.113

原因可能是任何缺少的参考`Tools -> References`（由`MISSING:`它前面表示）。

修复任何缺失的引用，它就会消失。

# linux - 适用于 3.x 的 Linux 内核书籍

> ID：12110401
> 
> 赞同：2
> 
> 时间：2012-08-24T13:30:20.097
> 
> 标签：linux, operating-system, kernel

我浏览了许多有关 linux 内核书籍的堆栈溢出链接。

我发现“Linux 内核开发，第 3 版 (v2.6)”和“理解 Linux 内核，第三版”是最常推荐从该主题开始的书籍。

但是，所有这些书籍都是基于内核的 2.6。版本。

我还读到 3.x 与 2.6 没有太大区别。

我的问题是 - 如果我想学习并为 linux 内核（3.5.）做出贡献，我应该从 2.6 的书籍开始。或者买一本新书（我真的找不到）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T14:17:04.347

事实上，在即将到来的 3.0 内核中，确实没有什么与 2.6.40 有任何不同。

你还是想明白你去吧.. [http://voinici.ceata.org/~tct/resurse/utlk.pdf](http://voinici.ceata.org/~tct/resurse/utlk.pdf)

# build - 创建标签时Jenkins参数化构建

> ID：12110413
> 
> 赞同：0
> 
> 时间：2012-08-24T13:30:51.273
> 
> 标签：build, jenkins, parameterized

单击“标记此构建”链接后，有没有办法挂钩/触发构建？

我想做以下事情：1.手动单击“标记此构建”（当然是在成功构建时），然后输入标签名称/网址（即RELEASE-v1.0.0）2.使用正则表达式或其他东西获取版本号（1.0.0）并将其传递给构建。

如果可能的话，我想通过单击“标记构建”来完成这一切。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T13:37:15.193

它并不完全符合您的描述，但[Promoted Builds 插件](https://wiki.jenkins-ci.org/display/JENKINS/Promoted+Builds+Plugin)可能是您所需要的；它使您可以标记构建，然后运行其他构建步骤。

# django - 在我的网页中拆分静态文件 - 有哪些取舍？

> ID：12110415
> 
> 赞同：0
> 
> 时间：2012-08-24T13:31:07.257
> 
> 标签：django, performance, django-templates, twitter-bootstrap, styles

我目前正在参与一个 Django 项目，并且我肯定会使用 Twiter 引导程序进行布局。

虽然实际上并不精确，但我的问题很简单：Bootstrap 允许我选择要单独下载的样式/JS——表单、表格、响应式、按钮样式、导航等——也可以在一个单一的“全部-inclusive”文件....而且我没有在同一页面上一次使用所有资源。

除此之外，我们还有 Django 模板系统，它允许我在另一个模板上构建一个模板，因此我基本上可以将更通用的东西添加到我的基本模板中，并且根据我在子模板中的需要，包括其他静态文件。

所以，总结一下：**将这些风格分开是否值得？**我认为在组织方面可能不是那么干净，因为我将不得不导入和处理更多的 CSS 文件，但另一方面我不会加载不必要的东西。

这种选择的权衡是什么？

感谢您的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T13:36:55.350

> 是否值得，将这些风格分开

不它不是。如果您环顾四周，例如[visitmix](http://visitmix.com/opinions/to-minify-or-not-to-minify)，您会发现请求新文件的开销使差异可以忽略不计。

从无 cookie 的域中为您提供静态服务器，您的用户只需访问您的服务器两次：一次用于 CSS，一次用于 JavaScript。

# c++ - 指向成员的指针：指针值代表什么？

> ID：12110416
> 
> 赞同：9
> 
> 时间：2012-08-24T13:31:07.367
> 
> 标签：c++, pointers

我正在玩指向成员的指针，并决定实际打印指针的值。结果出乎我的意料。

```
#include <iostream>

struct ManyIntegers {

    int a,b,c,d;
};

int main () {

    int ManyIntegers::* p;

    p = &ManyIntegers::a;
    std::cout << "p = &ManyIntegers::a = " << p << std::endl; // prints 1

    p = &ManyIntegers::b;
    std::cout << "p = &ManyIntegers::b = " << p << std::endl; // prints 1

    p = &ManyIntegers::c;
    std::cout << "p = &ManyIntegers::c = " << p << std::endl; // prints 1

    p = &ManyIntegers::d;
    std::cout << "p = &ManyIntegers::d = " << p << std::endl; // prints 1

    return 0;
} 
```

为什么值`p`总是1？的值不应该`p`以某种方式反映它指向的类成员吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-24T13:48:19.093

正如*大家*所说，`ostream`没有适当的`operator<<`定义。

试试这个：

```
#include <cstddef>
#include <iostream>

struct Dumper {
  unsigned char *p;
  std::size_t size;
  template<class T>
  Dumper(const T& t) : p((unsigned char*)&t), size(sizeof t) { }
  friend std::ostream& operator<<(std::ostream& os, const Dumper& d) {
    for(std::size_t i = 0; i < d.size; i++) {
      os << "0x" << std::hex << (unsigned int)d.p[i] << " ";
    }
    return os;
  }
};

#include <iostream>

struct ManyIntegers {

    int a,b,c,d;
};

int main () {

    int ManyIntegers::* p;

    p = &ManyIntegers::a;
    std::cout << "p = &ManyIntegers::a = " << Dumper(p) << "\n"; 

    p = &ManyIntegers::b;
    std::cout << "p = &ManyIntegers::b = " << Dumper(p) << "\n"; 

    p = &ManyIntegers::c;
    std::cout << "p = &ManyIntegers::c = " << Dumper(p) << "\n"; 

    p = &ManyIntegers::d;
    std::cout << "p = &ManyIntegers::d = " << Dumper(p) << "\n"; 

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-24T13:35:48.117

标准 ostream`operator<<`对指向成员的指针没有重载，因此您的指针已隐式转换为`bool`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-24T13:36:51.650

`p`实际上包含对象中的偏移量。`bool`如果它们确实分别包含某些偏移量，则打印它们会打印隐式转换值 true 或 false。转换的发生是因为`ostream`'s 的插入成员对指向成员的指针没有任何重载。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-24T13:37:28.000

没有`operator<<`将指向成员的指针作为参数的重载。因此，如果您尝试打印指向成员的指针，它会*隐式*转换成`true`哪个被传递给`bool`作为参数的重载，并且它打印`1`对应于`true`.

如果您使用`std::boolalpha`流操纵器，它将打印`true`而不是`1`：

```
std::cout << std::boolalpha << "p = &ManyIntegers::a = " << p ;
           //^^^^^^^^^^^^^^ 
```

输出（见[ideone](http://ideone.com/FNZOp)）：

> p = &ManyIntegers::a = true

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-24T13:46:44.867

成员指针不一定是数值，通常它是结构或类似的东西。我认为没有办法从成员指针中获取值，但即使有，我也看不出这会有什么用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-24T14:44:23.347

这是一个完全符合标准的实现，用于显示指向成员的指针的内存表示：

```
#include <iostream>
#include <iomanip>

template<int... I> struct index_tuple { using succ = index_tuple<I..., sizeof...(I)>; };
template<int I> struct indexer { using type = typename indexer<I - 1>::type::succ; };
template<> struct indexer<0> { using type = index_tuple<>; };
template<typename T> typename indexer<sizeof(T)>::type index(const T &) { return {}; }

template<typename T> class dumper {
    unsigned char buf[sizeof(T)];
    friend std::ostream &operator<<(std::ostream &os, const dumper &o) {
        std::ios_base::fmtflags flags{os.flags()};
        std::copy_n(o.buf, sizeof(T),
            std::ostream_iterator<int>(os << std::hex << std::showbase, " "));
        return os << std::setiosflags(flags);
    }
    template<int... I> dumper (const T &t, index_tuple<I...>):
        buf{reinterpret_cast<const unsigned char *>(&t)[I]...} {}
public:
    dumper(const T &t): dumper(t, index(t)) {}
};
template<typename T> dumper<T> dump(const T &t) { return {t}; }

struct ManyIntegers {
    int a,b,c,d;
};

int main () {
    std::cout << "p = &ManyIntegers::a = " << dump(&ManyIntegers::a) << std::endl;
    std::cout << "p = &ManyIntegers::b = " << dump(&ManyIntegers::b) << std::endl;
    std::cout << "p = &ManyIntegers::c = " << dump(&ManyIntegers::c) << std::endl;
    std::cout << "p = &ManyIntegers::d = " << dump(&ManyIntegers::d) << std::endl;
} 
```

输出如预期：

```
p = &ManyIntegers::a = 0 0 0 0 
p = &ManyIntegers::b = 0x4 0 0 0 
p = &ManyIntegers::c = 0x8 0 0 0 
p = &ManyIntegers::d = 0xc 0 0 0 
```

# c++ - 提升::pool::free() 性能

> ID：12110428
> 
> 赞同：1
> 
> 时间：2012-08-24T13:31:45.003
> 
> 标签：c++, memory-management

有谁知道 Boost::pool::free() 的正确 Big O 性能？我正在编写一些性能 C++ 关键代码，它有很大的不同吗？以下来自 Boost 文档，但有点令人困惑。是 O(1) 还是 O(n)？

无效免费（无效*常量块）；与 malloc 相同，仅分配足够的连续块来覆盖 n * requested_size 个字节。摊销 O(n)。

释放一块内存。请注意，块可能不是 0\. O(1)。

块必须先前已由 t.malloc() 或 t.ordered_malloc() 返回。假设块实际上是指跨越 n * partition_sz 字节的块块。释放该块中的每个块。请注意，块可能不是 0\. O(n)。

# xcode - MPMoviePlayerController 不播放来自 GDataFeedYouTubeVideo 的 URL

> ID：12110429
> 
> 赞同：0
> 
> 时间：2012-08-24T13:31:51.430
> 
> 标签：xcode, mpmovieplayer

我正在使用 GDataFeedYouTubeVideo 用图像和标题填充表格视图。这行得通。我想在选择单元格后播放视频。我正在使用提要中的 url 传递给 MPMoviePlayer，它看起来像加载，因为屏幕变黑，调用了 moviePlaybackDidFinish 但不播放视频并返回显示 tableview？来自提要的示例 url 是：

[https://www.youtube.com/v/o7QAMH3qRvU?version=3&f=user_uploads&app=youtube_gdata](https://www.youtube.com/v/o7QAMH3qRvU?version=3&f=user_uploads&app=youtube_gdata)

这在浏览器中有效，但在 MPMoviePlayer 中无效？请帮我解决这个问题。我宁愿不必编写一些 hack 例程来替换或删除提要返回的 URLString。我正在使用 ARC 和故事板。我第二次选择一个单元格时，我得到：

AVPlayerItem 类的实例 0xce6a7b0 已被释放，而键值观察者仍向其注册...

是的，我确实尝试了以下建议： [iOS 5 AVPlayerItem 的实例被释放](https://stackoverflow.com/questions/8035481/ios-5-an-instance-of-avplayeritem-was-deallocated) ，这并没有解决它。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    YouTubeVideo *item = [searchList objectAtIndex:indexPath.row];

    if (item != nil) {
        NSURL *url = [NSURL URLWithString:item.URLString];
        moviePlayer = [[MPMoviePlayerController alloc] initWithContentURL:url];

        [[NSNotificationCenter defaultCenter] addObserver:self
                                                 selector:@selector(moviePlaybackDidFinish:)
                                                     name:MPMoviePlayerPlaybackDidFinishNotification
                                                   object:moviePlayer];
        moviePlayer.controlStyle = MPMovieControlStyleDefault;
        moviePlayer.shouldAutoplay = YES;
        [self.view addSubview:moviePlayer.view];
        [moviePlayer setFullscreen:YES animated:YES];
    }
}

- (void)moviePlaybackDidFinish:(NSNotification *)notification {
    MPMoviePlayerController *player = [notification object];
    [[NSNotificationCenter defaultCenter] removeObserver:self
                                                    name:MPMoviePlayerPlaybackDidFinishNotification
                                                  object:player];

    if ([player respondsToSelector:@selector(setFullscreen:animated:)])
        [player.view removeFromSuperview];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T17:37:27.863

试过这个，如果我稍微格式化网址，它就可以工作： [https ://github.com/hellozimi/HCYoutubeParser](https://github.com/hellozimi/HCYoutubeParser)

# perl - 在 Windows 中安装草莓 perl

> ID：12110432
> 
> 赞同：1
> 
> 时间：2012-08-24T13:32:03.387
> 
> 标签：perl

我已经在 Windows 7 中安装了 perl 并配置了代理（http 和 ftp），如[如何安装模块？Axeman 的Strawberry Perl 问题](https://stackoverflow.com/questions/6611382/how-to-install-module-strawberry-perl-issues)，分别用我的局域网代理 IP 和端口替换代理。但是，当我运行 cpanm App::cpanminus 时，它会返回一条失败的代理身份验证消息。它请求用户名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T14:43:25.037

您需要按以下形式设置 http_proxy 环境变量：

```
http_proxy=http://user:password@host:port/ 
```

否则，只需使用`cpan`客户端。

* * *

编辑：2012-08-29

如果您没有代理用户名和密码，则无论客户端软件如何，您都无法通过该代理退出。

# ruby - 如何授予对 S3 存储桶文件的批量权限？

> ID：12110436
> 
> 赞同：2
> 
> 时间：2012-08-24T13:32:10.640
> 
> 标签：ruby, amazon-s3

我有一个自定义 AMI，在上传中途失败，`ec2-upload-bundle`但其余项目是通过 AWS 控制面板上传的。但是，这意味着大约一半的存储桶捆绑部分缺少“za-team”受让人，这似乎是 AMI 成功启动所必需的。如何将“za-team”的相关“打开/下载”权限批量应用于存储桶中缺少的文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T13:53:30.567

由于我是 Ruby 新手，所以我花了一点时间才弄清楚；但是，以下循环遍历存储桶中的所有文件并附加文件上指示的权限。该[`acl.grant`命令](http://rubydoc.info/github/amazonwebservices/aws-sdk-for-ruby/master/AWS/S3/AccessControlList)的相关 SDK 文档提供了一些关于脚本正在做什么的信息。

```
#!/usr/bin/ruby

# -----------------------------------------------------------------------------
# This script provides a means of updating all of the files in an S3 bucket to
# have the correct permissions. As this script is effectively throwaway it 
# doesn't do much beyond making sure it runs at least once, however, is worth
# keeping around as a reference in the event the problem arises again.
# -----------------------------------------------------------------------------
require 'rubygems'
require 'aws-sdk'

# The following is the Amazon ID for the za-team group which is used for EC2
# operations in S3 buckets
za_team = '6aa5a366c34c1cbe25dc49211496e913e0351eb0e8c37aa3477e40942ec6b97c'

# Note the configuration points
AWS.config({
  :access_key_id => '[Access Key Here]',
  :secret_access_key => '[Secret Access Key Here]',
})
bucket_name = '[Bucket Name Here]'

# Get the bucket information
s3 = AWS::S3.new
bucket = s3.buckets[bucket_name]

# Update the ACL for each item in the bucket
bucket.objects.each do |object| 
  puts object.key
  acl = object.acl
  acl.grant(:read).
      to(:canonical_user_id => za_team)
  object.acl = acl.to_xml
end 
```

# php - 显示 WP 作者但未登录用户的 PHP 代码

> ID：12110441
> 
> 赞同：2
> 
> 时间：2012-08-24T13:32:25.603
> 
> 标签：php, wordpress, plugins, badge

我一直在修改一个长期废弃的插件项目，该项目为 Wordpress 提供了一个受 Stackoverflow 启发的徽章系统。我已经升级了它的代码，所以它可以在新的 Wordpress 版本中运行。

如果有兴趣，可以在这里查看整个代码：http: [//pastebin.com/kCWWLPL2](http://pastebin.com/kCWWLPL2)

我想在 author.php 页面中添加一个代码来列出作者获得的徽章。到目前为止，我只设法使用此工作代码显示登录用户的徽章：

```
<?php
$user_id = get_current_user_id();
if ($user_id != 0) {
  rhb_list_badges(array('user_ID' => $user_id));
}
?> 
```

我被告知使用此代码来显示作者的徽章：

```
<?php
$author = get_user_by( 'slug', get_query_var( 'author_name' ) ); 
if ($author->ID > 0) {
  rhb_list_badges(array('user_ID' => $author->ID));
}
?> 
```

但它不会在页面上返回任何内容。为什么？我在这里做错了什么？如何更改正在工作的 get_current_user_id 代码示例，以便它**显示作者的徽章而不是登录用户的徽章**？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T14:03:17.723

您可以在 author.php 页面上的 Loop 之前使用它。

```
<?php
$curauth = (isset($_GET['author_name'])) ? get_user_by('slug', $author_name) : get_userdata(intval($author));
rhb_list_badges(array('user_ID'=>$curauth->ID));
?> 
```

取自[WordPress Codex](http://codex.wordpress.org/Author_Templates)。

# java - Java - 简单网络

> ID：12110444
> 
> 赞同：4
> 
> 时间：2012-08-24T13:32:31.720
> 
> 标签：java, sockets, networking, client-server

在阅读了几个关于网络的网页后，试图理解基本的网络，（我以前从未做过网络）我做了一些旨在制作一些简单聊天室的课程。以下课程将在下面发布：

ChatServer：[http](http://paste.strictfp.com/32591) ://paste.strictfp.com/32591 （（最近编辑）创建等待人们连接到它的实际服务器，在这种情况下，通过端口 9045）

ChatSession：[http](http://paste.strictfp.com/32583) ://paste.strictfp.com/32583 （当找到客户端时，从上面的服务器代码中，它会创建一个新会话，它基本上只是读取客户端发送的消息）

ChatClient：[http://paste.strictfp.com/32584](http://paste.strictfp.com/32584)（允许客户端写入服务器）

ServerRunner：[http://paste.strictfp.com/32585](http://paste.strictfp.com/32585)（运行服务器的主要方法）

ClientRunner：[http](http://paste.strictfp.com/32586) ://paste.strictfp.com/32586 （运行客户端的主要方法，连接到服务器）

我知道上面的代码不是最好的，考虑到我没有添加任何检查来查看套接字/客户端是否断开连接或某些东西被中断。但话又说回来，这只是一种练习，以帮助我尝试掌握网络的概念。

因此，这 5 个类一起工作正常，但我有一个问题/疑虑，如果得到解答，将不胜感激：

如何从服务器向客户端发送消息？

我之所以问这个问题是因为我想制作一个简单的多人井字游戏，其中将有一个服务器和两个客户端（都代表玩家），基本上我的想法是无论何时客户点击按钮，我会向服务器发送一条消息。然后我会将消息发回给两个客户，以便修改他们的两个游戏。由于我缺乏网络知识，我对它的工作原理有点困惑。如果您不将我重定向到另一个 URL，我将不胜感激，除非非常非常简单，因为我更喜欢人们用最简单的术语向我解释它。如果有人可以帮助我，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T13:42:14.147

“服务器”一词有两种含义，可能会令人困惑：

1.  服务器是不在客户处的（即，它是每个客户/用户连接到的中心枢纽）
2.  服务器是接收请求的那个。服务器从不发起对话，它们只总是*响应*传入的消息。

因此，您尝试做的是将您的服务器变成客户端（并且`ChatClient`将成为服务器）。

这就解释了为什么这个看似简单的任务如此困难：服务器不应该突然与客户端对话。现实世界的例子：你银行的一个职员突然出现在你家门口，试图在你家卖给你一些东西。奇怪，不是吗？

解决方案：

1.  您可以让客户端每隔几分钟向服务器发送一条消息。消息将是“有什么新东西吗？”。这称为“轮询”。
2.  您可以让客户端发送消息并让它等待答复。服务器无需立即回复消息。但是，您需要处理超时。但是客户可以发送一个“有什么新东西吗？” 然后等到收到回复。如果你把它移到一个线程中，客户端在等待答案时可以做其他事情。这是轮询，但它是被动的。
3.  [您可以使用像WebSocket](https://en.wikipedia.org/wiki/WebSocket)这样的双向协议。
4.  您可以将您的客户端变成一个真正的服务器：打开一个服务器套接字，让中央集线器知道端口号并让它连接到那里以更新您的客户端。虽然这可行，但它需要两个连接，而且它们有点贵。这适用于少量客户，但随着数量的增长，它最终会成为一个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T13:49:21.683

在更进一步之前，您必须决定的一件事是如何在普通 TCP 套接字之上构建*应用程序级协议。*这是关于哪一方发起对话，你想来回传递什么样的消息，等等。

然后下一个经常遇到的问题是决定消息本身的布局——它们是文本还是二进制，以及接收方如何知道它是否收到了完整的消息。这里通常的困惑是关于不理解 TCP 连接为您提供了*双向字节流*，并且*您*必须弄清楚消息的开始和结束位置。这里的传统选项是：

*   分隔消息 - 最适合基于文本的协议。最简单的形式是 line-is-a-message 表示法，其中 new-line 是您的分隔符。
*   定长消息。最适合二进制。
*   以长度为前缀的消息 - 您有一个固定长度的标头，告诉您后面有多少字节。
*   自描述消息，如 s 表达式、XML 等。通常是文本。

希望这个对你有帮助。

# xml - 计算 xml-tree 的最大深度

> ID：12110445
> 
> 赞同：0
> 
> 时间：2012-08-24T13:32:37.250
> 
> 标签：xml, xslt, xpath

用于计算 xml 缩进深度的最简单的 xpath 2.0 是什么？我的变种还不聪明：

```
<xsl:param name="maxdepth" select="number(substring(concat(
'16'[count(current()/*/*/*/*/*/*/*/*/*/*/*/*/*/*/*/*/*)>0],
'15'[count(current()/*/*/*/*/*/*/*/*/*/*/*/*/*/*/*/*)>0],
'14'[count(current()/*/*/*/*/*/*/*/*/*/*/*/*/*/*/*)>0],
'13'[count(current()/*/*/*/*/*/*/*/*/*/*/*/*/*/*)>0],
'12'[count(current()/*/*/*/*/*/*/*/*/*/*/*/*/*)>0],
'11'[count(current()/*/*/*/*/*/*/*/*/*/*/*/*)>0],
'10'[count(current()/*/*/*/*/*/*/*/*/*/*)>0],
'09'[count(current()/*/*/*/*/*/*/*/*/*)>0],
'08'[count(current()/*/*/*/*/*/*/*/*)>0],
'07'[count(current()/*/*/*/*/*/*/*)>0],
'06'[count(current()/*/*/*/*/*/*)>0],
'05'[count(current()/*/*/*/*/*)>0],
'04'[count(current()/*/*/*/*)>0],
'03'[count(current()/*/*/*)>0],
'02'[count(current()/*/*)>0],
'01'[count(current()/*)>0])
,1,2)
)"/> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T14:28:24.060

**使用**：

```
max(//node()[not(node())]/count(ancestor-or-self::node())) 
```

这将产生 XML 文档中所有叶节点深度的最大深度，包括`/`级别 1 的文档节点 ( )。

**这是一个完整的例子**：

```
<xsl:stylesheet version="2.0"   xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="text"/>

 <xsl:template match="/">
     <xsl:sequence select=
      "max(//node()[not(node())]/count(ancestor-or-self::node()))"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时：**

```
<root>
   <x>This is:</x>
   <a>
      <b>
         <c>hello</c>
      </b>
   </a>
   <a>
      <b>
         <c1>world</c1>
      </b>
   </a>
   <a>
      <b>!</b>
   </a>
   <y>The End</y>
</root> 
```

**产生了想要的正确结果**：

```
6 
```

**更新**：

*如果需要任何元素*的最大深度，请使用几乎相同的 XPath 表达式：

```
max(//*[not(*)]/count(ancestor-or-self::*)) 
```

# android - 如何在 Android 上正确设置壁纸

> ID：12110448
> 
> 赞同：0
> 
> 时间：2012-08-24T13:32:59.847
> 
> 标签：android, image, resize, wallpaper

在 Android 上设置壁纸似乎没有任何用处。

*   如果您从手机中获取图像并将其设置为墙纸，则屏幕太大了
*   如果您调整它的大小（或者使用允许您指定大小的 createBitmap() 函数，或者使用荒谬无用的 createScaledBitmap()），它就会变得锯齿状并且失焦
*   如果您使用一些怪异的技巧来修复图像的质量，那就更好了，但无论如何都不能完全清晰。
*   如果您尝试获取当前壁纸并设置它，它似乎仍然太大。它似乎为您提供了原始图像文件，迫使您调整它的大小，这是行不通的。

现在，手机的内部软件完全能够在不降低质量的情况下将图像调整为更小。为什么它不共享此功能？

```
WallpaperManager wallpaperManager = WallpaperManager.getInstance(Spinnerz.this);

// gets the image from file, inexplicably upside down.
Bitmap bitmap = BitmapFactory.decodeFile(Environment.getExternalStorageDirectory().getAbsolutePath() + File.separator + "DCIM/Camera/Zedz.jpg");

// use some rotation to get it on an angle that matches the screen.
Matrix bitmapTransforms = new Matrix();
bitmapTransforms.setRotate(90); // flip back upright
bitmap = Bitmap.createBitmap(bitmap, 0, 0, bitmap.getWidth(), bitmap.getHeight(),bitmapTransforms, false); // create bitmap from bitmap from file, using the rotate matrix

// lets set it exactly to the resolution of my Samsung Galaxy S2: 480x800 pixels.
// This function appears to exist specifically to scale a bitmap object - should do a good job of it!
bitmap = Bitmap.createScaledBitmap(bitmap, 480, 800, false);
wallpaperManager.setBitmap(bitmap);

// result is quite a jaggy image - not suitable as a wallpaper. 
```

图片：

![](../Images/d290c14791e53bc0fe8d31c6bc7a7982.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T13:34:39.980

尝试这个 ，

```
 Display d = ((WindowManager)getSystemService(Context.WINDOW_SERVICE)).getDefaultDisplay();
                        int width = d.getWidth();
                        int height = d.getHeight(); 
```

# java - 在java中创建实例时为成员变量赋值

> ID：12110450
> 
> 赞同：2
> 
> 时间：2012-08-24T13:33:02.917
> 
> 标签：java

在浏览其中一个库时，我在 java 中发现了以下结构，这对我来说真的很新。假设中有一个类`Point`。`java`

```
class Point {
    int x;
    int y;
    public Point() {}
    public Point(int x, int y) {
    this.x = x;
    this.y = y;
    }
} 
```

在创建实例时`Point`，它们初始化变量`x`并`y`在实例创建本身中如下所示：

```
Point inst = new Point() {
            {
                this.x = 10;
                this.y = 20;
            }
        }; 
```

这与`instance block`java有关还是不同的东西？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T13:34:08.907

你的第二个例子：

1.  创建一个派生自 Point的*匿名类*
2.  使用初始化程序块来初始化值

语法：

```
new Object() { ... } 
```

看起来像一个`Object`，但实际上是创建一个派生自 的新对象`Object`。然后内部大括号声明初始化程序块。

这是一种偶尔用于初始化集合的做法，例如

```
new ArrayList<String>(){{
   add("1");
   add("2");
}}; 
```

等等。要注意的一件事是它是一个内部类，因此有一个对外部（周围）类的隐式引用。通常不是问题，除非（比如说）你来序列化这个。

# android - Android DES Decrypt badpaddingexception: pad block损坏

> ID：12110459
> 
> 赞同：2
> 
> 时间：2012-08-24T13:33:29.843
> 
> 标签：android, encryption, des

首先，我已经查看了论坛上的所有条目，但我仍然找不到解决问题的方法。我必须测量使用 DES 对文本进行编码和解码所需的时间，并与其他算法进行比较。

当我运行代码时，我有这个错误：**BadPaddingException: pad block corrupted**。当我调试时，代码在这一行失败：

  *字节 [] 明文 = cipher.doFinal (cipherBytes);*

我使用 Base64 类来编码/解码 String <--> byte[]

任何想法？

谢谢

```
private static final String CIPHER_ALGORITHM = "DES/ECB/PKCS5Padding";
private static int KEY_LENGTH = 64;

 public static SecretKey deriveKeyDES() {
        try {
            long start = System.currentTimeMillis();

            KeyGenerator kgen = KeyGenerator.getInstance("DES");
            kgen.init(KEY_LENGTH);
            SecretKey result = kgen.generateKey();

            long elapsed = System.currentTimeMillis() - start;
            return result;

        } catch (GeneralSecurityException e) {
            throw new RuntimeException(e);
        } 
    }

    public static String encrypt(String plaintext, SecretKey key) {
        try {

            long start = System.currentTimeMillis();
            Cipher cipher = Cipher.getInstance("DES/ECB/PKCS5Padding")

            cipher.init(Cipher.ENCRYPT_MODE, key);

            byte[] cipherText = cipher.doFinal(plaintext.getBytes("UTF-8"));

            long elapsed = System.currentTimeMillis() - start;

            return toBase64(cipherText);

        } catch (GeneralSecurityException e) {
            throw new RuntimeException(e);
        } catch (UnsupportedEncodingException e) {
            throw new RuntimeException(e);
        }
    }

    public static String toBase64(byte[] bytes) {
        return Base64.encodeToString(bytes, Base64.NO_WRAP).trim();
    }

    public static String decrypt(String ciphertext, SecretKey key) {
        try {
            byte[] cipherBytes = fromBase64(ciphertext);

                long start = System.currentTimeMillis();
            Cipher cipher = Cipher.getInstance(CIPHER_ALGORITHM);

            cipher.init(Cipher.DECRYPT_MODE, key);
            cipher.update(cipherBytes);

             // This is where I get exception
            byte[] plaintext = cipher.doFinal(cipherBytes);

            String plainrStr = new String(plaintext, "UTF-8").trim();
            long elapsed = System.currentTimeMillis() - start;

            return plainrStr;
        } catch (GeneralSecurityException e) {
            throw new RuntimeException(e);
        } catch (UnsupportedEncodingException e) {
            throw new RuntimeException(e);
        }
    }

    public static byte[] fromBase64(String base64) {
        return Base64.decode(base64, Base64.NO_WRAP);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T16:05:48.190

```
Cipher cipher = Cipher.getInstance(CIPHER_ALGORITHM);

cipher.init(Cipher.DECRYPT_MODE, key);
cipher.update(cipherBytes);

// byte[] plaintext = cipher.doFinal(cipherBytes);
//                                   ^-- You shouldn't pass cipherBytes twice.
//                                   v-- instead use the parameter-less method:
byte[] plaintext    = cipher.doFinal(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T11:08:05.273

当最后一个密文块没有计算为有效的纯文本时，会发生填充异常。如果最后一个密文块损坏或密钥不正确，就会发生这种情况。对于 CBC 模式，如果倒数第二个密文被更改（但您使用的是 ECB 模式加密），也会发生这种情况。

在您的情况下，`deriveKeyDES()`总是生成一个随机密钥。尽管我们没有得到对安全方法的实际调用，但我*认为*您使用不同的密钥进行加密和解密。在这种情况下，生成的纯文本很可能不包含有效的填充字节。

Rasmus 的回答肯定指向您的代码中的错误，它会搞砸您的时间并返回纯文本两次，但不会删除`BadPaddingException`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-26T23:45:03.910

我在一个源代码中遇到了同样的问题，在另一个源代码中遇到了 IllegalBlockSizeException。通过返回编码数据解决了这两个问题，例如：

```
 public String encrypt(String input) {
    try {
        byte[] inputBytes = input.getBytes("UTF-8");
        byte[] enc = encryptCipher.doFinal(inputBytes);
        // and problem was in return encoding. That's how i fixed it 
        return Base64.encodeToString(enc,Base64.DEFAULT);
        .....
          }
        } 
```

给 ua 解密代码：

```
 public String decrypt(String input) {
    try {
        byte[] dec = Base64.decode(input.getBytes(), Base64.DEFAULT);
        //here had exception
        byte[] utf8 = decryptCipher.doFinal(dec);
        return new String(utf8,"UTF8");
    } catch (IOException | BadPaddingException | IllegalBlockSizeException e) {
        e.printStackTrace();
    }
    return null;
} 
```

我应该提交，只有在*解密方法中才有 BadPaddingException 和 IllegalBlockSizeException* ***byte[] utf8 = decryptCipher.doFinal(dec);*** （你在同一个地方有例外：***byte[] plaintext = cipher.doFinal(cipherBytes);***），但真正的错误在于*加密方法（返回值）*

这就是为什么我建议你在*加密方法*中使用该代码：

```
return Base64.encodeToString(enc,Base64.DEFAULT); 
```

PS试图对您的问题给出完整的答案。

# jquery - Jquery 切换不适用于列表项中的列表项

> ID：12110462
> 
> 赞同：1
> 
> 时间：2012-08-24T13:33:36.233
> 
> 标签：jquery, toggle

我有一个列表项内的列表：

```
 <ul id="selected-list" class="droptrue sort-drop">
            <li class="sortedli" style="">Call list
                <ul id="select-navlist" style="float: right;">
                    <li class="sel-display">xx</li>
                    <li><a href="#">aa</a></li>
                    <li><a href="#">bb</a></li>
                    <li><a href="#">cc</a></li>
                    <li><a href="#">dd</a></li>
                    </ul>
               </li>
          </ul> 
```

我正在使用 jQuery 来切换具有类名“del-display”的列表项的颜色，以便将其颜色更改为橙​​色。但是，当我保存并运行我的切换代码时，它本身不会显示该项目：

```
$(".sel-display").toggle(function () {
            $(this).css("background", "#ffcc00");
            //$(this).css("background-position", "140px 5px");
    });​ 
```

我在这里做了一个小提琴：http: [//jsfiddle.net/noscirre/3fwZn/](http://jsfiddle.net/noscirre/3fwZn/)

任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T13:47:04.207

You could do it something like this:

```
$('.sel-display').click(function(){
    if($(this).hasClass("highlighted")){
        $(this).removeClass("highlighted");
        $(this).css({"background", "#ffffff"});
    }else{
        $(this).addClass("highlighted");
        $(this).css({"background", "#ffcc00"});
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T13:57:32.547

不是最好的解决方案，但它是什么？

[http://jsfiddle.net/3fwZn/7/](http://jsfiddle.net/3fwZn/7/)

**Javascript：**

```
$(".sel-display").click(function () {
    $(this).toggleClass('del');
}); 
```

**CSS：**

```
.del {
    background-color: #ffcc00 !important;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T13:40:12.197

我认为您需要对具有特定类名的所有列表项进行查找，如下所示：

```
$('.sel-display').find('li').hasClass('del-display'); 
```

我不确定那代码是否正确，因为我是徒手写的，但我认为你可能需要一些类似的东西。

# javascript - 未捕获的语法错误：意外的令牌非法？看起来不错

> ID：12110468
> 
> 赞同：1
> 
> 时间：2012-08-24T13:33:42.700
> 
> 标签：javascript, jquery, css

> **可能重复：**
> [webkit 中出现意外的令牌非法](https://stackoverflow.com/questions/4404526/unexpected-token-illegal-in-webkit)

我一直在看这个并且看不到问题，它在 jfiddle 中工作 - 只是不在网站上！

```
<script type="text/javascript">
var fixed = false;

$(document).scroll(function() {
    if( $(this).scrollTop() > 200 ) {
        if( !fixed ) {
            fixed = true;
            $('#menu-scroll').css({position:'fixed', display:'block'});
        }
    } else {
        if( fixed ) {
            fixed = false;
            $('#menu-scroll').css({display:'none'});
        }
    }
});​
</script> 
```

该网站的链接是[http://mtro.es/7](http://mtro.es/7)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-24T13:52:43.003

也许没有 id 为“menu-scroll”的 html 元素。你检查..

# iphone - 如果登录名或密码为空，则 UIAlertView

> ID：12110469
> 
> 赞同：-7
> 
> 时间：2012-08-24T13:33:50.197
> 
> 标签：iphone, ios, uialertview

我正在创建简单的登录页面，如果密码或登录字段为空，则需要显示 AlertView。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T13:50:01.833

```
-(void)login{
    if(username.text.length == 0 || password.text.length == 0){
    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Complete All Fields" message:@"You must complete all fields to login!" delegate:self cancelButtonTitle:@"Okay" otherButtonTitles:nil, nil];
    [alert show];
    [alert release]
    }
} 
```

这应该这样做。 `-(void)login`是附加到某些触摸事件的方法，例如当用户点击“登录”按钮或其他东西时。

`username`并且`password`是`UITextField`s。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T13:51:09.617

这个问题归结为两个主要的子问题；

**如何检查字符串是否为空**

`NSString`提供了一个方法`length`，该方法将返回该字符串实例中的字符数。

* * *

[NSString 参考](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)：

```
length 
```

返回接收器中的 Unicode 字符数。

```
- (NSUInteger)length 
```

*返回值*

接收器中的 Unicode 字符数。

*讨论*

返回的数字包括组合字符序列的单个字符，因此您无法使用此方法确定字符串在打印时是否可见或出现多长时间。

* * *

假设存在一个名为 name 类型的变量`NSString`。

```
if ([name length] == 0)
{
    NSLog(@"the given name is empty!");
} 
```

* * *

**如何显示警报**

```
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Login Error"
                                                message:@"The given name is empty."
                                               delegate:nil
                                      cancelButtonTitle:@"OK"
                                      otherButtonTitles:nil];
[alert show]; 
```

有关更多信息，请参阅[UIAlertView 参考](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIAlertView_Class/UIAlertView/UIAlertView.html)。

# visual-studio-2010 - Visual Studio 中的包目录是什么？我应该将它包含在 SVN 中吗？

> ID：12110471
> 
> 赞同：46
> 
> 时间：2012-08-24T13:33:56.163
> 
> 标签：visual-studio-2010, svn

我是第一次在 Visual Studio 2010 中使用 ASP.NET MVC 4，我使用 SVN 控制源代码。我曾经在 Visual Studio 2008 中使用 MVC 1，在那里我有自己的 svn:ignore 过滤器

```
*.pdb
*.exe
*.dll
debug/*
release/*
*.user
*.suo 
obj/*
bin/*
obj
bin
VSMacros80
Thumbs.db
_ReSharper.* 
```

但它现在不以同样的方式应用，因为该项目有一些新文件夹，作为*包*文件夹，我不知道其中哪些必须进行版本控制。

关于包文件夹，我应该将它包含在存储库中还是必须忽略此文件夹？我应该忽略哪些其他文件夹或文件？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-09-27T13:55:13.623

听起来您正在使用[NuGet](http://nuget.codeplex.com/)，并且包文件夹是 NuGet 包文件夹。如果您不介意添加几个大型但不经常更改的二进制文件，则可以将其提交给源代码管理。

或者，如果开发人员和构建机器要根据需要下载它，您可以从源代码控制中省略它并配置[NuGet 以在每个构建上下载包。](http://docs.nuget.org/docs/workflows/using-nuget-without-committing-packages)这也存在有人下载较新版本并引起冲突的危险。

至于要排除表单源代码管理的其他文件，请参阅[应从源代码管理中排除哪些 .net 文件？](https://stackoverflow.com/questions/992532/what-net-files-should-be-excluded-from-source-control)[对于 .Net 项目，我应该从源代码管理中排除哪些文件扩展名](https://stackoverflow.com/questions/1951644/for-a-net-project-what-file-extensions-should-i-exclude-from-source-control)？.

# xcode - MonoTouch [Outlet] 的作用域

> ID：12110473
> 
> 赞同：0
> 
> 时间：2012-08-24T13:34:06.060
> 
> 标签：xcode, xamarin.ios, monodevelop, iboutlet

当我在 Xcode 中创建插座时，MonoTouch 在 *.designer.cs 文件中为该特定视图创建相同的属性。

```
namespace MyApp
{
    [Register ("CustomCell")]
    partial class CustomCell
    {
        [Outlet]
        MonoTouch.UIKit.UISwitch Toggle { get; set; }

        void ReleaseDesignerOutlets ()
        {
            if (Toggle != null) {
                Toggle.Dispose ();
                Toggle = null;
            }
        }
    }
} 
```

但如您所见，将这些属性限定为私有。

有没有办法通过 XCode 或 MonoTouch 告诉系统这些应该生成为公共的、受保护的还是内部的？

当然，我可以在这个部分类的实现端公开属性，作为这些属性的代理，但我希望有一种更简洁的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T23:24:16.347

不要担心它们是属性，这是插座的实现细节。您可以将它们视为私有字段 - 因此可以通过非设计器类部分上更易于访问的属性来公开它们。

使它们更易于访问的另一种方法是将它们移动到非设计器类部分。插座不必在设计师类部分。

同步的工作原理：

设计器文件的工作方式是，当 MD 同步到 Xcode 时，它​​会在类的所有部分（包括设计器类）上找到所有出口，并将这些出口同步到 obj-c 头文件中。当它将 obj-c 头文件同步回 MD 时，它会尝试查找非设计器类部分中的每个插座，然后重新生成具有不匹配插座的设计器文件。

这意味着如果您在 obj-c 头文件中添加一个插座，它将被添加到设计器文件中。这也意味着，如果您在 obj-c 头文件中删除了一个出口，那么当重新生成设计器文件时，它将有效地从设计器文件中删除 - 除非它在某个其他类部分中，在这种情况下，删除将不会被同步.

obj-c 头文件中的 outlet 没有任何可访问性，因此 MD 在重新生成头文件时无法同步它，而 private 是一个很好的默认值，因为它促进封装，如果需要，您可以通过包装器属性轻松公开它们或通过移动它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T18:31:01.340

目前没有办法让 MonoDevelop 为暴露的 outlet 生成不同的可见性属性。

您想到的用例场景是什么？

# jquery - Flexslider IE8 字幕文本不褪色

> ID：12110476
> 
> 赞同：2
> 
> 时间：2012-08-24T13:34:08.970
> 
> 标签：jquery, css, internet-explorer-8, fade, flexslider

我有一个 FlexSlider（新版本），每张幻灯片之间都有淡入淡出效果。

滑块在除 IE<=8 之外的所有浏览器中都能正常工作。在 IE8 中，图像褪色很好，但标题中的文字没有褪色，导致幻灯片 1-2、2-3 等之间出现奇怪的即时变化……

我尝试寻找解决方案，但找不到任何有用且有效的方法，是否有解决方案？

提前谢谢你，再见。

这是一个在 IE8 [http://jsfiddle.net/VpD7L/3/中显示问题的小 JSFiddle](http://jsfiddle.net/VpD7L/3/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T15:22:39.467

在挣扎了几个小时以找出为什么文本没有褪色之后，我发现问题是 IE8 不喜欢位置：绝对（或相对）和弹性滑块文本容器上的 z-index。所以我使用填充来定位我的文本。

也许这将来对某人有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T13:58:46.400

我以前遇到过这个。可能是您正在使用的某个元素或另一个元素没有应用“布局”，或者一个元素在不需要布局时确实具有布局。

首先要做的是从所涉及的元素中开始应用/重置 haslayout。最可能的情况是文本本身需要将 hasLayout 应用于其包含元素。

从这里： http: [//www.satzansatz.de/cssd/onhavelayout.html](http://www.satzansatz.de/cssd/onhavinglayout.html)

> 如果应用以下 CSS 属性/值对，将允许元素获得布局。
> 
> 位置：绝对浮动：左|右显示：内联块宽度：“自动”以外的
> 任何值高度：“自动”以外的
> 任何值缩放：“正常”（MSDN）以外的任何值
> 写入模式：tb-rl （MSDN）
> 溢出：隐藏|滚动|自动
> 溢出-x|-y：隐藏|滚动|自动
> 位置：固定最小宽度：任何值
> 最大宽度：“无”以外的任何值最小高度：任何值
> 最大-高度：“无”以外的任何值
> 
> 如果没有其他提供 hasLayout 的属性仍然有效，则在单独的规则集中将以下属性重置为其默认值将重置（或撤消）hasLayout：
> 
> 宽度，高度（到“自动”）
> 
> 最大宽度，最大高度（到“无”）（在 IE 7 中）
> 
> 位置（到“静态”）
> 
> 浮动（到“无”）溢出（到“可见”）（在 IE 7 中）
> 
> 缩放（到“正常”）
> 
> 写作模式（从 'tb-rl' 到 'lr-tb'）

您可以使用 Microsoft 的 Web 开发人员工具栏检查您的元素是否具有布局（如果没有，hasLayout 在开发人员工具栏中将为 -1，如果有，则为 1）。

# asp.net - ASP.NET - 尝试将 SortParameterName 属性实现到 SqlDataSource

> ID：12110478
> 
> 赞同：0
> 
> 时间：2012-08-24T13:34:21.453
> 
> 标签：asp.net, sqldatasource

我有几个使用存储过程绑定到 SqlDataSources 的 Gridviews 和 Repeater。我正在尝试在其中一些中实现排序功能，但是很难找到具体的说明和/或 SqlDataSource 端生成所需的 ORDER BY 所需的示例。特别是，如果它所做的只是手动连接到存储过程中的 ORDER BY 子句，我不明白在 SqlDataSource 中有一个 SortParameterName 属性的意义。如果它只是 SelectParameters 列表中的另一个参数，为什么要这样定义它，但恰好连接到 ORDER BY 子句？当我运行下面的代码示例时，我被告知指定的参数太多（显然是额外的 SortParams 参数）。我真的需要改变我的存储过程并添加“

```
 SqlDataSourceInLine.SelectParameters.Clear()
    SqlDataSourceInLine.SelectCommandType = SqlDataSourceCommandType.StoredProcedure
    SqlDataSourceInLine.SelectCommand = "ApproverGetApproved"
    SqlDataSourceInLine.SelectParameters.Add("CompanyID", ConfigurationManager.AppSettings("Temp_CompanyID"))
    SqlDataSourceInLine.SelectParameters.Add("SortParams", "EmpName DESC")
    SqlDataSourceInLine.DataSourceMode = SqlDataSourceMode.DataSet
    SqlDataSourceInLine.SortParameterName = "SortParams"
    Dim dv As DataView = SqlDataSourceInLine.Select(DataSourceSelectArguments.Empty 
```

任何澄清将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-13T03:29:06.893

我只是想弄清楚如何使用 SortParameterName 并发现了这个问题。在做了更多搜索之后，我想我现在找到了正确的答案。

Microsofts page [Sorting Data with Data Source Controls](http://msdn.microsoft.com/en-us/library/sa88ktts%28v=vs.90%29.aspx)说如下（我的重点）：

> **由 SortParameterName 属性标识的参数**传递给 ObjectDataSource 控件的 SelectMethod 或**作为参数集合的一部分传递给 SqlDataSource 控件的 SelectCommand。**ObjectDataSource 控件可以使用在 sort 参数中传递给它的信息以排序顺序返回数据。**对于 SqlDataSource 控件，您必须提供可以采用排序参数并返回排序数据的存储过程的名称，**因为您不能将参数作为 ORDER BY 子句的一部分传递。

这表明伊卡洛斯给出的答案是不正确的。

我的结论是，当设置了 SortParameterName 属性（结合适当的存储过程）时，Gridview 不会自己进行排序，而是让数据源进行所谓的自定义排序，例如，这将是排序的必要方式如果使用自定义分页。

**更新：**
我现在已经在自己的编程中使用了它，并确认我的结论是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T14:40:37.457

我过去从未使用`SortParamter`过，但我[从文档中收集到的](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.sqldatasource.sortparametername.aspx)是，此参数的目的是允许您以您希望的方式对结果进行排序，**以防存储过程尚未执行此操作。**除此之外，您无需将其用于任何事情。其数据源类型为 SqlDataSource 的 GridView 已经实现了开箱即用的排序。您只需将 `AllowSorting`属性设置为`True`和`SortExpression`每一列。

例子：

```
 <asp:GridView ID=" productsGridView" Runat="server" 
     DataSourceID="SqlproductDataSource" AutoGenerateColumns="False"
        AllowSorting="True" >
        <Columns>
            <asp:BoundField HeaderText="Product" 
              DataField="ProductName" SortExpression="ProductName">
            </asp:BoundField>
  ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T18:36:40.903

SqlDataSource 不需要任何内容​​。您需要为 Gridview 实现 Sorting 事件，并为中继器实现其他操作，因为它们没有内置排序功能。您可以做的（如果您有小数据集返回）是使用 ViewState 并存储您的 DataTable 结果和然后利用 DataView 和它的排序功能，然后将 Repeaters/GridViews 绑定到排序的 DataView。无论如何，您仍然必须跟踪 ViewState 中的 SortDirection 和 SortParameter。

# java - 使用 Future 的 Java Rest 客户端 API

> ID：12110483
> 
> 赞同：1
> 
> 时间：2012-08-24T13:34:31.107
> 
> 标签：java, rest, asynchronous

我需要用 Java 开发一个客户端 Rest API，它使用一个带有异步 http 的库。更具体地说，我可以进行 Rest CRUD 操作，返回 http 响应的 Future。我的问题是，我的包装 API 应该如何处理这些 Future 对象？我应该只为 API 的用户提供 Future 并由他来处理它，还是应该开发一些线程机制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T14:01:22.587

恕我直言，如果我是您的 API 的使用者，我宁愿您不要执行我的多线程处理，除非：

*   你有自己的使用 NIO 或其他东西（又名 Netty/Grizzle）（例如[https://github.com/sonatype/async-http-client](https://github.com/sonatype/async-http-client)）的高度优化的事件 IO 循环。
*   有一种方法可以插入我自己的[ExecutorService](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html)

我的意思是我不认为你会通过返回 Future 来增加任何价值，事实上如果我想自己处理线程很烦人，但你提供的只是异步 API（返回`Future`）。

现在使您的 API 客户端[Threadsafe](http://en.wikipedia.org/wiki/Thread_safety)是首选并且我确实感兴趣（也就是说，我不想每次使用它时都必须实例化一个新客户端）。

**但是**，如果您使用的是[async-http-client (NIO)](https://github.com/sonatype/async-http-client)之类的东西，那么该死的返回`Future`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-18T09:36:14.620

为什么需要它？- 我觉得将它作为高负载系统的未来很重要。

*   作为一个 API，拥有这样的功能会很有帮助，因为你不知道消费者是谁。
*   对于一个网站来说，如果它需要支持高负载，那么仅仅等待http响应将是浪费cpu时间。而是让它异步，使 http worker 更有效地处理其他请求。

*   使用可以为您简化此操作的库。

# php - PHP：无法连接到主机。如何使用 OpenSSL 将外部证书添加到受信任的？

> ID：12110485
> 
> 赞同：1
> 
> 时间：2012-08-24T13:34:34.820
> 
> 标签：php, ssl, openssl, certificate, crt

我的大学从外部主机下载了 cert-name.crt 文件。现在我们需要连接到 Web 服务平台，显然是使用他们的 SSL 证书。我们对 OpenSSL 文档有点困惑。研究也没有帮助。我们得到的只是“无法连接到主机”PHP 异常。只是为了清除问题，界面在不安全的 HTTP 上运行得非常好。我们使用纯 Soap 库。作为一种绝望的行为，我们还尝试通过在 SoapClient 流上下文中禁用 verify_peer 变量来连接主机而无需验证。请帮忙，我们有压力。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T14:12:12.003

开始：

默认情况下，PHP 在 UNIX 系统中查找 CA 文件，确保它可以被 PHP 调用程序（通过 cli 的用户、Apache 用户等）读取，并将`.crt`文件放置在此处：

```
/etc/pki/CA 
```

# c# - 交互式 C# 控制台替代即时窗口

> ID：12110489
> 
> 赞同：3
> 
> 时间：2012-08-24T13:34:58.807
> 
> 标签：c#, visual-studio, visual-studio-debugging

是否有 CLI/GUI 工具来执行 C# 代码，即 Python ipython/Ruby irb 的替代品。Visual Studio 中的即时 Windows 仅在调试期间可用，在某些情况下无法执行代码

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-24T13:37:22.710

你的意思是执行 C# 的任意片段吗？

[LinqPad4](http://www.linqpad.net/)很不错。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T13:37:01.590

有来自 mono 的[CsharpRepl](http://www.mono-project.com/CsharpRepl)项目。

linqpad是一个非常受欢迎的选项（您不必[仅](http://www.linqpad.net/)*将*它用于 LINQ）。

另一种选择是使用Jon Skeet 的[snippy](http://csharpindepth.com/Downloads.aspx)。

# nhibernate - NHibernate Projections (QueryOver.SelectList) 限制

> ID：12110490
> 
> 赞同：4
> 
> 时间：2012-08-24T13:35:01.777
> 
> 标签：nhibernate, c#-4.0, projection, queryover, selectlist

我是stackoverflow的新手，我希望这个问题会受到赞赏。

简单地说：我从表 x 左外连接表 y 中选择所有内容。表 x 的列太多，所以我创建了新对象 x。该对象用于投影。我可以投影表 xi 想要的每一列。但是，当我尝试投影/选择一个集合（表 y 的集合）时，我得到了同样的错误：“索引超出了数组的范围”。

我的问题：NHibernate 是否支持选择/投影集合？因为我通过在谷歌（和stackoverflow）上搜索多次看到这个问题，但这些问题都没有得到回答。

代码示例：

```
public class X
{
    public virtual int ID { get; set; }
    public virtual int IDontNeedMoreInfoAboutClassXItTakesToMuchTimeToRetrieve { get; set; }
    public virtual IList<Y> YCollection { get; set; }
}

public class Y
{
    public virtual int YID { get; set; }
}

public class XRepository{
    public ISession Session {get; set;}
    public IList<X> Get()
    {

        X xAlias = null;
        Y yAlias = null;
        X resultAlias = null;
        return Session.QueryOver<X>()
            .JoinAlias(() => xAlias.YCollection, () => yAlias, JoinType.LeftOuterJoin)
            .SelectList(list => list
                .SelectGroup(() => xAlias.ID).WithAlias(() => resultAlias.ID)
                .SelectGroup(() => xAlias.YCollection).WithAlias(() => resultAlias.YCollection)) // Index was outside the bounds of the array
                .TransformUsing(Transformers.AliasToBean<X>()).List<X>();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T14:00:42.460

返回的结果必须与完整的内容进行分组（因此 sql 不可用，因为它只能聚合分组的项目）但 NHibernate 只能对 m,apped 实体执行此操作，因为它知道分组依据的身份。手动操作很简单

```
Y yAlias = null;
var tempResults = Session.QueryOver<X>()
     .JoinAlias(x => x.YCollection, () => yAlias, JoinType.LeftOuterJoin)
     .SelectList(list => list
         .Select(() => xAlias.Id)
         .Select(() => xAlias.Name)
         ...
         .Select(() => yAlias.Id)
         ...
     .ToList<object[]>()

List<X> results = new List<X>(100); // switch to Hashset if too slow and order does not matter
foreach(var row in tempResults)
{
    Y y = new Y { Id = (long)row[4], ... };
    X x = results.FirstOrDefault(x => x.Id == (long)row[0]));
    if (x != null)
        x.YCollection.Add(y);
    else
        results.Add(new X { Id = (long)row[0], ..., YCollection = { y } };
}

return results; 
```

# grails - Grails GORM 调用不应该在服务而不是控制器层中吗？

> ID：12110497
> 
> 赞同：8
> 
> 时间：2012-08-24T13:35:22.320
> 
> 标签：grails

根据 Grails 最佳实践和 MVC 模式，我正在尝试确定何时是引入服务而不是不断增加控制器的正确时间。我发现这有点矛盾，我读到的关于最佳实践的内容和似乎是常见的做法，所以很想听听其他人对此的看法。

考虑到 GORM 调用，我原以为与 GORM 相关的任何事情都应该真正进入服务。虽然我自己没有实践过这个，尤其是在编写非常基本的控制器方法时`show`，比如简单地`get()`在域类上执行 a ，然后渲染一个视图以显示检索到的对象的详细信息。

但是，在学习了诸如“清洁代码”之类的书籍和类似书籍之后，维护良好的代码应该具有凝聚力，并且方法应该理想地只执行单个任务。那么在完美的世界中，控制器中的 show 方法是否只负责在渲染视图之前确定要显示的对象？从数据库中检索可以进入数据库中的一个方法，该方法的唯一任务是从数据库中检索并在未找到时抛出异常等。

但是，是的，这似乎有点矫枉过正。

所以更进一步，`create()`or`update()`方法。同样，目前 Grails 生成的代码将所有内容都放入控制器中，根本不使用任何服务。

那么什么时候建议我们需要使用服务呢？是不是只有在事务必须发生时，例如，在`create()`通话中，我们可能还希望将记录写入日志文件以保留各种审计日志。这肯定需要服务吗？

我很想听听其他人认为引入服务的正确时间，我想这因人而异。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T13:41:04.170

我推荐你这篇文章： http: [//www.infoq.com/articles/grails-best-practices](http://www.infoq.com/articles/grails-best-practices)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T14:38:16.937

我们在 Domain 类中创建静态方法来封装查询。服务仅用于事务操作或具有多个域交互的非常复杂的查询。控制器只是调用域或服务方法。

# vb.net - 如何通过使用 LINQ TO SQL 将表名作为参数传递来获取表记录数

> ID：12110502
> 
> 赞同：1
> 
> 时间：2012-08-24T13:35:35.507
> 
> 标签：vb.net, linq, linq-to-sql

我有一个名为 getTableRecordCount 的方法。

```
 Public Function getTableRecordCount(ByVal strTableName As String, ByVal iParam1 As Integer, iParam2 As Integer) As Boolean

        Try
            Dim detailReturned = (From paramTableName In dc.<need to pass the strTableName here>
                                  Where paramTableName.col1 = iParam1 And paramTableName.col2 = iParam2 
                                  Select paramTableName).Count

            If (detailReturned > 0) Then
                Return True
            Else
                Return False
            End If

        Catch ex As Exception
            .....
        End Try

  End Function 
```

如果我可以传递表名并拥有 DataContext，我可以使用相同的方法来获取其他表的记录数。关于如何实现这一目标的任何意见？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T13:47:45.677

You could create a method where you pass a data context and expression. Then from data context (based on Linq2Sql as you did not specify framework) you can get table by using

```
GetTable<T>() 
```

method on your data context.

Expression would be your parameters.

Hope it helps.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T14:34:00.843

希望我的 VB 没问题；我在 C# 中更舒服。我不确定这是否适用于 LINQ to SQL，但底部附近的 GetTableRecordCount 测试确实通过了。我假设您在表中使用不同的数据类型，因此是通用方法。

```
Imports System.Text
Imports System.Linq.Expressions

Class Product
    Public Id As Integer
    Public Name As String
    Sub New(id As Integer, name As String)
        Me.Id = id
        Me.Name = name
    End Sub
End Class

Class Order
    Public Id As Integer
    Public NumberOfItems As Integer
    Sub New(id As Integer, numItems As String)
        Me.Id = id
        Me.NumberOfItems = numItems
    End Sub
End Class

Class DataContext
    Public Property Products As IEnumerable(Of Product)
    Public Property Orders As IEnumerable(Of Order)
    Sub New()
        Me.Products = New Product() {New Product(1, "Apple"), New Product(2, "Banana")}
        Me.Orders = New Order() {New Order(1, 20), New Order(2, 50)}
    End Sub
End Class

<TestClass()>
Public Class Main
    Dim MyDataContext As DataContext

    <TestMethod()>
    Public Sub GetTableRecordCount()
        Me.MyDataContext = New DataContext()
        Assert.IsTrue(Me.GetTableRecordCount(Of Product)("Products", Function(p) p.Id, 1, Function(p) p.Name.Length, 5))
        Assert.IsTrue(Me.GetTableRecordCount(Of Order)("Orders", Function(o) o.Id, 2, Function(o) o.NumberOfItems, 50))
    End Sub

    Private Function GetTableRecordCount(Of TRow)(tableName As String, getParam1 As Func(Of TRow, Integer), iParam1 As Integer, getParam2 As Func(Of TRow, Integer), iParam2 As Integer) As Boolean
        Try
            Dim propertyExpr = Expression.Property(Expression.Constant(Me.MyDataContext), tableName)
            Dim getTableData = Expression.Lambda(Of Func(Of IEnumerable(Of TRow)))(propertyExpr).Compile()

            Dim detailReturned =
             From row In getTableData()
             Where getParam1(row) = iParam1 And getParam2(row) = iParam2
             Select row

            Return detailReturned.Count() > 0

        Catch ex As Exception
            Return False
        End Try

    End Function
End Class 
```

# vba - VBA Excel 比较行

> ID：12110507
> 
> 赞同：1
> 
> 时间：2012-08-24T13:35:50.593
> 
> 标签：vba, excel, compare

我正在尝试为我的个人银行帐户执行基于 Excel 的工具。我在一张`Import`有 3 列 ( `Date`, `Information`, `Amount`) 的表格中导入了一些银行业务。我想将每一行与`Import`另一张表中已经建立的集合进行比较`Data`。

我创建了一个函数来测试每一行（根据日期然后是必要的信息，然后是必要的数量），如果数据集合中不存在操作并且数据集合中的行号不存在，则返回 0。

```
Function CompareRows(SingleRng As Range, CollectionRange As Range) As Integer
    'SingleRange : Date / Info / amount in on line
    'CollectionRange : Date / info / amount / ....(others) on many rows
    'Return 0 if SingleRng is not in CollectionRange, row number of data 
                                                  'collection if present.

    Dim row As Range
    For Each row In CollectionRange
        MsgBox row.Value

       ' If SingleRng(1, 1) = Rng_1(1, 1).Value Then
       '     CompareRows = irw
       ' Else
       '     irw = irw + 1
       ' End If
    Next
End Function 
```

此函数将针对工作`Import`表中的每一行循环，但我不能先循环每个日期元素。此循环在`CollectionRange`. 我试着做`For Each row In CollectionRange.Rows`，但`MsgBox`之后不起作用。如何在每一行上制作这个循环？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T05:10:09.003

对于在一系列行上循环`For Each row In CollectionRange.Rows`是正确的。

`MsgBox row.Value`然后不起作用的原因`row.Value`是数组。要查看数组中的一个值，请使用类似`row.Cells(1,1).Value`

也就是说，请注意，在这样的范围内循环可能会非常慢。如果您对代码的性能不满意，还有其他替代方法，例如`AutoFilter`,`Find`和`Variant Arrays`

# excel - 从符合 Excel VBA 条件的已关闭工作簿中获取值

> ID：12110512
> 
> 赞同：0
> 
> 时间：2012-08-24T13:36:08.230
> 
> 标签：excel, vba

![Data Set][1]我有一个**GetValues from a Closed Workbook**的宏。宏工作并为我获取数据，但我缺少如何使其仅获取帐户 P 15178 的任何数据。源数据包含 5 个帐户，但我只需要获取一个帐户。帐号列在源数据的“A”列中。

这是我到目前为止所拥有的：

```
Sub test()

GetValuesFromAClosedWorkbook "H:\VBA", "DNAV.xlsx", "DNAV", "A1:F250"

End Sub

Sub GetValuesFromAClosedWorkbook(fPath As String, _
fName As String, sName, cellRange As String)

With ActiveSheet.Range(cellRange)
    .FormulaArray = "='" & fPath & "\[" & fName & "]" _
    & sName & "'!" & cellRange
    .Value = .Value

End With

End Sub 
```

数据集：

![](../Images/934bd398c6111661229bd5af3315a869.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T15:23:25.783

该答案仅基于您的数据集的图像。如果有任何延迟，您将需要调整代码。

```
Sub test()

    GetValuesFromAClosedWorkbook "H:\VBA", "DNAV.xlsx", "DNAV", "A1:F7" 'since your product only goes to row 7, this should be good. If your data is not sorted this way all the time, you will need a whole other solution.

End Sub

Sub GetValuesFromAClosedWorkbook(fPath As String, _
fName As String, sName, cellRange As String)

With ActiveSheet.Range(cellRange).Offset(6) 'offsetting by 6 rows should get the formula starting on cell A7
    .FormulaArray = "='" & fPath & "\[" & fName & "]" _
    & sName & "'!" & cellRange
    .Value = .Value

End With

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-02T08:47:19.890

以下是您可以尝试的方法：

```
Sub GetValuesFromClosedWorkbook(fpath as string, fname as String, _
    sname as String, cellRange as String, criteria as String)

Activesheet.AutoFilterMode = False

With  Activesheet.Range(cellRange)
    .FormulaArray = "='" & fpath & "\[" & fname & "]" & sname & "'!" & cellRange
    .Value = .Value
    .AutoFilter  Field:=1, Criteria1:= "<>" & criteria
    .Offset(1,0).SpecialCells(xlCellTypeVisible).EntireRow.Delete
End With

Activesheet.AutoFilterMode = False

End Sub 
```

然后像这样调用你的子：

```
GetValuesFromClosedWorkbook "H:\VBA", "DNAV.xlsx", "DNAV", "A1:F250", "P 15178" 
```

未经测试，无法在我的手机中测试:) 所以我把它留给你。
完全基于您的屏幕截图。
编辑它以满足您的需要。

# php - 使用类名或 id 使用 php 获取完整的“div”内容

> ID：12110519
> 
> 赞同：1
> 
> 时间：2012-08-24T13:36:25.720
> 
> 标签：php, html

我使用 php 从文件中获取了页面源，其输出类似于

```
<div class="basic">

 <div class="math">

  <div class="winner">

   <div class="under">

        <div class="checker">

         <strong>check</strong>

        </div>

   </div>

  </div>

 </div>

</div> 
```

从此，当我将输入作为“下”（类名）输入时，我只需要一个特定的“div”，其中包含整个 div 和内部内容，如下所示。有人建议我如何使用 php 来做这个

```
<div class="under">

      <div class="checker">

         <strong>check</strong>

      </div>

 </div> 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-24T14:24:17.277

尝试这个：

```
$html = <<<HTML
<div class="basic">
    <div class="math">
        <div class="winner">
            <div class="under">
                <div class="checker">
                    <strong>check</strong>
                </div>
            </div>
        </div>
    </div>
</div>;
HTML;

$dom = new DOMDocument();

$dom->loadHTML($html);

$xpath = new DOMXPath($dom);

$div = $xpath->query('//div[@class="under"]');

$div = $div->item(0);

echo $dom->saveXML($div); 
```

这将输出：

```
<div class="under">
    <div class="checker">
        <strong>check</strong>
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-02-19T19:28:23.137

**从任何网页的特定 div id 中提取内容的函数**

下面的函数从指定的 div 中提取内容并返回它。如果没有找到具有 ID 的 div，则返回 false。

```
function getHTMLByID($id, $html) {
    $dom = new DOMDocument;
    libxml_use_internal_errors(true);
    $dom->loadHTML($html);
    $node = $dom->getElementById($id);
    if ($node) {
        return $dom->saveXML($node);
    }
    return FALSE;
} 
```

`$id``<div>`是您尝试提取其内容的 ID ，`$html`是您的 HTML 标记。

使用示例：

```
$html = file_get_contents('http://www.mysql.com/');
echo getHTMLByID('tagline', $html); 
```

输出：

```
The world's most popular open source database 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-24T13:42:36.323

我不确定你在问什么，但这可能是它

```
preg_match_all("<div class='under'>(.*?)</div>", $htmlsource, $output); 
```

$output 现在应该包含该 div 的内部内容

# xpath - 获取与 XPath 表达式匹配的 XML 节点

> ID：12110521
> 
> 赞同：2
> 
> 时间：2012-08-24T13:36:35.600
> 
> 标签：xpath, xml-parsing

我希望你能帮助解决这个问题。我在网上尝试了许多 XPath 测试人员，但都没有找到解决方案。

我正在尝试从此 XML 中获取具有“~tid”属性的第一个节点的值：

```
<Response status="ok" version="1.1">
                 <Action>
                    <Page>
                       <Params>
                          <Param name="~tid" value="1345811517165"/>
                          <Param name="~action-type" value="DATA"/>
                          <Param name="~from-page" value="login"/>
                          <Param name="~from-act" value="submitData"/>
                          <Param name="login_USERNAME" value="" type="0"/>
                          <Param name="login_PASSWORD" value="" type="0"/>
                       </Params>
                    </Page>
                    <Data name="clientData" method="POST">
                       <Params>
                          <Param name="timezoneoffset" value=""/>
                          <Param name="daylightsavings" value=""/>
                       </Params>
                    </Data>
                 </Action>
                 <Action>
                    <Page>
                       <Params>
                          <Param name="~tid" value="1345811517165"/>
                          <Param name="~action-type" value="NAV"/>
                          <Param name="~from-page" value="login"/>
                          <Param name="~from-act" value="resetPassword"/>
                          <Param name="~to-page" value="login_resetPassword"/>
                       </Params>
                    </Page>
                 </Action>
                 <Action>
                    <Page>
                       <Params>
                          <Param name="~tid" value="1345811517165"/>
                          <Param name="~action-type" value="NAV"/>
                          <Param name="~from-page" value="login"/>
                          <Param name="~from-act" value="newUser"/>
                          <Param name="~to-page" value="login_newUser"/>
                       </Params>
                    </Page>
                 </Action>
</Response> 
```

我使用的 XPath 是：

```
//Params[1]/Param[@name='~tid']/@value 
```

它获取所有三个值。我怎样才能得到第一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T13:42:50.853

尝试

```
/descendant::Params[1]/Param[@name='~tid']/@value 
```

来自[W3C XPath 规范](http://www.w3.org/TR/xpath/#path-abbrev)：

> **注意：**位置路径与位置路径`//para[1]`的含义不同`/descendant::para[1]`。后者选择第一个后代`para`元素；前者选择作为其父母`para`的第一个孩子的所有后代元素。`para`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T04:33:38.060

**这是 XPath 中第二多的常见问题解答**。

**使用**：

```
(//Params/Param[@name='~tid'])[1]/@value 
```

**甚至**：

```
(//Param[@name='~tid'])[1]/@value 
```

**说明**：

XPath 伪运算符`//`的优先级（优先级）低于`[]`运算符。

当需要覆盖默认优先级时，任何语言中通常的解决方案是使用明确指定新的、想要的优先级的括号。

# android - 如何记录来自网络摄像机的 http 直播流

> ID：12110522
> 
> 赞同：0
> 
> 时间：2012-08-24T13:36:37.187
> 
> 标签：android, android-ndk, ffmpeg, video-streaming, mjpeg

我创建了应用程序，客户端可以在其中查看 IP 摄像头，该摄像头使用此链接提供 MJPEG 的 http 实时流 [Android ICS 和 MJPEG using AsyncTask](https://stackoverflow.com/questions/10550139/android-ics-and-mjpeg-using-asynctask)

现在我希望用户将视频录制到其存储卡中。我已经用谷歌搜索了一段时间，我想到的只有两种方法：-

1.  要么我继续存储 jpeg 图像，当用户单击停止录制时，我以某种方式剪辑所有图像以提供 3GP 视频或其他文件格式。但我不知道如何从所有图像中创建视频，这是否是一种有效的方法。

2.  或者我做ffmpeg，在这种情况下我将不得不处理NDK，它似乎是一条更长的路径，可能会导致无处可去：P

那么FFMPEG是更好的选择吗？如果是，请分享一些链接或者是第一个选项更好。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T13:47:17.887

FFmpeg is the better option, but you'll probably get stuck with a pretty poor encoding resolution/compression. Maybe some low quality MPEG-4 like xvid will work, but even that might require too high of performance from the CPU.

Android doesn't have an API to access the video encoder logic in the SoC, so a native implementation is pretty much your only choice. If so, FFmpeg through NDK is probably the easiest.

# java - 如何读取同一 InputStream 上的不同数据组，为每个数据使用不同类型的 InputStream？

> ID：12110523
> 
> 赞同：0
> 
> 时间：2012-08-24T13:36:46.357
> 
> 标签：java, inputstream, outputstream, lookahead

我需要以各种方式在 Java 中保存一些数据，到 a `File`，到 a `String`，到`System.out`... 最后我用 3 种方法做几乎相同的事情。`OutputStream`因此，我将它们更改为以 an作为参数的单个方法。我在单个 OutputStream 中写了一些东西，例如一些文本、一个序列化对象、另一个序列化对象、一些数字数据......

但现在我被困住了。我忽略了一个事实，即我无法区分所写的不同内容。我为数据创建了一个`InputStream`。我`Scanner`首先在该流上使用 a 来读取文本，然后尝试使用 ObjectInputStream 来读取序列化对象，但我得到一个`EOFException`.

我猜扫描仪会提前读取。如何防止扫描仪提前读取。
或者更确切地说，我如何使用适当的 InputStream 为每组数据读取每组数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T15:46:51.023

你真的不想尝试使用不同的阅读器从同一个流中读取。即使你设法让它在你的机器上运行，当你在不同的操作系统或不同的 JVM 实现上运行它时，它也可能会中断。

您应该选择一种读取和写入数据的方法。由于您在流中使用序列化对象，因此最好将其用于所有内容。您已经在评论中指出，通过字符串读取二进制数据并正确解释它是非常困难的。然而，获取一个 String 对象并不难，将其写到输出流中，再读回并将其转换为 String。

现在存在解释数据的问题。我建议将所有内容都写成标签数据对。你先写出一个整数（也许是一个枚举的序数，以使它们更容易在你的程序中使用），然后你写出你的数据。整数表示流中接下来的数据类型（例如文本或对象），然后您读取的下一个对象是数据并且您知道它是什么类型。如果是文本，您可以将对象转换为字符串，并将其传递给扫描仪，如果它是对象，那么您只需对对象执行任何您需要做的事情。

为了使事情变得更简洁，您可以使用每种数据类型的方法围绕流构建一个包装器。也许你可以有一个`getNextObject()`方法和一个`getNextTextScanner()` 方法。每个都将首先检查流中的下一个 Integer 标记以确保它正在读取正确的数据（如果发现不匹配则抛出异常），然后将返回下一个 Object 或返回一个新的 Scanner 以处理数据字符串。

确实，如果您可以为两种不同类型的数据使用单独的流，那会更好。但是，如果你真的坚持使用相同的流，那么我就是这样做的。

# sql - 如何知道给定查询生成的数据量？

> ID：12110528
> 
> 赞同：0
> 
> 时间：2012-08-24T13:36:59.950
> 
> 标签：sql, sql-server, sqlperformance

通常，使用 COUNT(*) 可以知道查询返回的行数。

以同样的方式，有没有办法知道给定查询的输出是多少兆字节？

就像是

```
SELECT MEMORYUSE(*) FROM bla bla bla 
```

**编辑**：我喜欢 *exec sp_spaceused ... * 方法，因为它可以编写脚本！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T13:42:34.123

如果您使用的是**SQL Server**，请打开**客户端统计**信息，您会发现*“从客户端发送的字节数”*和*“从服务器接收的字节数”*

这是相关的问题

[SQL 查找查询结果的大小](https://stackoverflow.com/questions/4473023/sql-finding-the-size-of-query-result)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T16:30:13.350

为了完整起见，有几个选项可以为您提供有关执行/已执行查询的更多信息，您也可以使用 SSMS 查看/设置这些信息。如下图，查询的行数默认显示在SSMS的右下角。此外，我还突出显示了高级查询选项，您可以按此处所示进行全局设置。当然，您也可以通过将它们包含在查询中来为特定语句或批处理打开任何这些选项，即“set showplan_test on”等。

![SSMS 中的输出和配置选项](../Images/fac7e1319174f2ff08f166d0090f7893.png)

您也可以在 SSMS 中打开“显示客户端统计信息”，如下所示（带有示例输出）。

![在此处输入图像描述](../Images/40ac2f7d23b26ca729a224e68402be15.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T13:41:29.730

我认为这将是有用的：

[结果集的 SQL Server 查询大小](https://stackoverflow.com/questions/6450248/sql-server-query-size-of-results-set)

我认为无论如何都没有为结果创建临时表并检查大小。

# tcp - 通过 TCP 使用 RTSP 抓取视频

> ID：12110541
> 
> 赞同：1
> 
> 时间：2012-08-24T13:37:34.443
> 
> 标签：tcp, h.264, rtsp, rtp

我想从带有 RTSP 的设备中检索一些视频数据。

RTSP over UDP 运行良好，但我需要它通过 TCP。

发出 RTSP 命令后，我收到了 RTP，但我不知道如何在此处处理它们。有效载荷如下：$[channel - 1 byte][length - 2bytes][data]

问题是我收到了这样的数据包，有时还会收到更多的数据包，其中通道为 10 或 99 等。

那么任何人都可以提供一些关于如何处理有效载荷的输入吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T13:41:17.873

您可以在[RFC 2326 "Real Time Streaming Protocol (RTSP)"](http://www.ietf.org/rfc/rfc2326.txt)中找到所有内容。您需要“10.12 嵌入式（交错）二进制数据”：

> RTP 数据包等流数据由 ASCII 美元符号（24 位十六进制）封装，后跟一个字节的通道标识符，然后是封装的二进制数据的长度，以网络字节顺序表示的二进制、两字节整数。流数据紧随其后，没有 CRLF，但包括上层协议头。每个$块正好包含一个上层协议数据单元，例如一个RTP包。

还有一个小例子：

```
 S->C: $\000{2 byte length}{"length" bytes data, w/RTP header}
 S->C: $\000{2 byte length}{"length" bytes data, w/RTP header}
 S->C: $\001{2 byte length}{"length" bytes  RTCP packet} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T14:05:01.533

获取 PPS 很简单，不需要解析数据包。

我猜您对 SPS 的请求将需要进入数据包（我认为您无需担心 WS msg 'invalid packet'。

在 0x09 的 PT 处使用 Type 怎么样？

有关数据包说明，请参见[此处](http://www.networksorcery.com/enp/protocol/rtp.htm#PT,%20Payload%20Type)

[在此处](https://stackoverflow.com/questions/10171542/rtsp-rtp-client-streaming-timestamp-live555/10195274#10195274)的答案中解包 RTP 的示例实现

尝试在[此处](http://tools.ietf.org/id/draft-ietf-mmusic-sdp-tcpmedia-00.txt)查找有关 RTSP 控制和基于 TCP 的 SDP 的更多信息。如果您要检查 RTSP 会话/对话的详细信息以及有关视频中各个轨道的控制协议选择的消息传递详细信息。如果您可以在不转移到 SDP / RTCP 的情况下获得答案，那么显然，那会更快/更好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-01T09:41:57.297

这是 TCP/RTP 的数据包格式：

```
[$ - 1byte][Transport Channel - 1byte][RTP data length - 2bytes][RTP data] 
```

其余的就像 upd

有关更多信息，请阅读[处理原始 rtp 数据包](https://stackoverflow.com/questions/7665217/how-to-process-raw-udp-packets-so-that-they-can-be-decoded-by-a-decoder-filter-i)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-30T03:34:26.883

解释一下，我也在为此工作，如果你想通过 TCP 使用 RTSP，请注意你的套接字读取代码。合适的socket流程如下：

```
while (socket.connected) {
  char magic = socket.read a char;
  if (magic == '$') {  // is a RTP over TCP packet
     byte channel = socket.read 1 byte;
     unsigned short len = socket.read 2 byte; // len = ((byte1 & 0xFF) << 8) + (byte2 &0xFF);
     int readTotal = 0;
     byte rtpPacket[len];
     while (readTotal < len) {
         // read remaing bytes to rtpPacket from index readTotal
         int r = socket.read(rtpPacket, readTotal, len - readTotal); 
         if (r > 0)
            readTotal += r;
         else    // -1 means socket read error
            break;   
     }
     // now we get full RTP packet, process it!
     call back channel, rtpPacket;
  } else {  // is RTSP protocol response
     string array header;
     while (line = socket.readline() != null) {
        if (line == "") {
           int body_len = Parse header "Content-Length";
           byte body[body_len];
           int readBody = 0;
           while (readBody < body_len) {
              int r = socket.read(body, readBody, body_len - readBody);
              if (r>0)
                readBody += r;
              else
                break;
           }

           // Now we get full header, body of RTSP response, process it
           Callback header, body;   
        } else {
           header.add(line);
        }
     }
  }
} 
```

# android - 应用程序权限列表 (Android)

> ID：12110542
> 
> 赞同：-1
> 
> 时间：2012-08-24T13:37:41.230
> 
> 标签：android, user-permissions, android-permissions

我想要一个安装在 android 中的应用程序的权限列表，但正如其他提供隐私顾问的应用程序所见，他们已经解释或分组了权限。

在设备上安装新应用程序时也会看到。

1.  如何获得分组权限列表？

2.  有什么具体的分类方法吗？

3.  是否有特定的方法来获取组或权限组？

提前致谢 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T14:31:42.753

[系统权限在此处](http://developer.android.com/reference/android/Manifest.permission.html)列出，权限组[在此处](http://developer.android.com/reference/android/Manifest.permission_group.html)列出。您只需要使用 PackageManager 获取应用程序的权限，然后继续做您想做的事情。

# visual-studio-2010 - 将项目从 EF 4.1 更新到 EF 5.x

> ID：12110546
> 
> 赞同：1
> 
> 时间：2012-08-24T13:38:04.173
> 
> 标签：visual-studio-2010, entity-framework-4.1

有人可以解释我如何使用 EF 4.1 更新现有项目以在 Visual Studio 2010 中使用最新的 EF 5.x 吗？

我已经使用 NuGet 下载了 EF 5.x 代码。只是将“EntityFramework”的引用替换为 EF 5.x 中的引用吗？如果是这样，我的本地驱动器上存储的 EF 5.x 代码在哪里？对于 EF 4.1，有一个名为“Microsoft Entity Framework 4.1”的目录，但对于 EF 5.x，我没有看到类似的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T14:09:03.760

当你从 NuGet 下载包时，它会为你添加引用，如果你想找到二进制文件（虽然你不应该这样做），它们可以在解决方案根目录的 /packages 文件夹中找到。

您可以通过正常展开“参考”解决方案文件夹来仔细检查参考是否已添加。

# asp.net-mvc - MVC 动态格式化 td

> ID：12110548
> 
> 赞同：2
> 
> 时间：2012-08-24T13:38:13.190
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我是剃刀引擎语法的新手，并且在格式化添加视图中的逻辑时遇到问题。这是我想要完成的。我收集了来自模型的物品。我需要迭代该集合并连续对齐 6 个项目。

这是最终输出的样子：

```
 <table>
   <tr>   
     <td>checkbox comes here</td>
     <td>checkbox comes here</td>
     <td>checkbox comes here</td>
   </tr>   
   <tr>   
     <td>checkbox comes here</td>
     <td>checkbox comes here</td>
     <td>checkbox comes here</td>
   </tr>   
    ................. and so on
</table> 
```

这是我在视图中编写的代码

```
 <table>
     @for (int i = 0; i <= Model.checkItems.Count; i++)
     {
          if (i % 6 == 0)
          { <tr> }

               <td>
                 <input type="checkbox" 
                    id="chk_@(Model.checkItems[i].DisplayText)"
                    name="chk"
                    nameVal = "@Model.checkItems[i].DisplayText"
                    value="@Model.checkItems[i].Value"/>

                 <label for="chkGroup_@(Model.checkItems[i].DisplayText)">@Model.checkItems[i].DisplayText
               </td>                        

           if(i % 6 == 0) 
           { </tr> }

       }                    
</table> 
```

当页面最终被渲染时，第一个 if 条件被执行，而不是第二个。有人可以帮助弄清楚如何做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T14:08:04.470

试试这个

```
<table>
@{    int count = 0; } 
<tr>
@foreach (var item in Model.checkItems)
{
   <td>
       <input type="checkbox" 
                id="chk_@(item.DisplayText)"
                name="chk"
                nameVal = "@item.DisplayText"
                value="@item.Value"/>
       <label for="chkGroup_@(item.DisplayText)">@item.DisplayText</label>
   </td>
    if (++count % 6 == 0)
    {
        @:</tr><tr>
    }    
} 
</tr>
</table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T13:41:54.967

您的标签上缺少结束标签

```
<label for="chkGroup_@(Model.checkItems[i].DisplayText)">@Model.checkItems[i].DisplayText 
```

应该

```
<label for="chkGroup_@(Model.checkItems[i].DisplayText)">@Model.checkItems[i].DisplayText</label> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T14:08:51.183

这行得通吗：

```
<table>
     @for (int i = 0; i <= Model.checkItems.Count; i++)
     {
          if (i % 6 == 0)
          { 
            <tr> 
               <td>
                 <input type="checkbox" 
                    id="chk_@(Model.checkItems[i].DisplayText)"
                    name="chk"
                    nameVal = "@Model.checkItems[i].DisplayText"
                    value="@Model.checkItems[i].Value"/>

                 <label for="chkGroup_@(Model.checkItems[i].DisplayText)">@Model.checkItems[i].DisplayText
               </td>                        

           </tr> 
          }

       }                    
</table> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T15:18:50.940

这是另一个使用 2 个嵌套循环来表示行和列的解决方案。我不知道它是否一定更好（从表面上看确实看起来更复杂），但它至少可以让您轻松地看到行和单元格的嵌套性质：

```
<table>
@{
    const int cols = 3;
    int rows = (Model.checkItems.Count + cols - 1) / cols;
}
@for (int rowIndex = 0; rowIndex < rows; rowIndex++)
{
    <tr>
        @for (int colIndex = rowIndex * cols; colIndex < Math.Min(Model.checkItems.Count, cols * (rowIndex + 1)); colIndex++)
        {
           <td>
             <input type="checkbox" 
                id="chk_@(Model.checkItems[colIndex].DisplayText)"
                name="chk"
                nameVal="@Model.checkItems[colIndex].DisplayText"
                value="@Model.checkItems[colIndex].Value"/>

             <label for="chkGroup_@(Model.checkItems[colIndex].DisplayText)">@Model.checkItems[colIndex].DisplayText</label>
           </td>
        }
    </tr>
}
</table> 
```

# android - 如何检测 Android 平板电脑中充当 USB 主机的 USB 设备？

> ID：12110555
> 
> 赞同：2
> 
> 时间：2012-08-24T03:29:45.257
> 
> 标签：android, usb

我尝试在[Developers.android.com](http://developer.android.com/guide/topics/connectivity/usb/host.html)的代码帮助下开发示例应用程序。

我的代码看起来像这样

```
 public class MainActivity extends Activity {

   UsbManager manager;
   HashMap<String, UsbDevice> deviceList;
   Button scanButton;
   UsbDevice device;

   @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    scanButton = (Button)this.findViewById(R.id.button1);
    scanButton.setOnClickListener(new OnClickListener ()
    {
       public void onClick(View v) 
       {
         checkForDevices ();
       }
    });
 }

 @Override
  public void onResume () 
  {
    super.onResume();
    checkForDevices ();
  }

 @Override
  public boolean onCreateOptionsMenu(Menu menu) 
  {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
  }

  protected void checkForDevices ()
  {
    manager = (UsbManager) getSystemService(Context.USB_SERVICE);

    deviceList = manager.getDeviceList();
    device = deviceList.get("deviceName");
    //Collection<UsbDevice> devices = deviceList.values();

   if (device != null)
      Toast.makeText(this, "Device Found", Toast.LENGTH_LONG).show();
   else
      Toast.makeText(this, "Device NOT Found", Toast.LENGTH_LONG).show();
  }
 } 
```

当我在连接 USB 设备的情况下运行此代码时，我总是将 Toast 显示为“未找到设备”。

我希望我的应用程序能够检测 USB 设备并在 USB 主机模式下读取输入和写入输出。

有什么方法可以在我们的 App 中检测 USB 设备吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T08:32:06.607

我有同样的问题，我怀疑你的平板电脑上的主机功能可能被禁用了，所以我建议你检查一下。

以下帖子可能是最好的参考，因为它是简洁的 [Android USB 主机和隐藏设备](https://stackoverflow.com/questions/11183792/android-usb-host-and-hidden-devices)

您应该能够使用 adb shell检查文件**android.hardware.usb.host.xml是否存在**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-23T10:00:04.927

嗯……

device = deviceList.get("deviceName");

我认为您必须插入设备名称而不是“设备名称”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-26T08:31:59.840

在 android 中使用 USB 设备的最佳示例是[这里](http://www.java2s.com/Code/Android/Hardware/DetectUSBdevice.htm) 这是检测 USB 设备并使用该设备的一个很好的示例

# java - 如何从jbox2d中的身体获得一半宽度和一半高度

> ID：12110559
> 
> 赞同：2
> 
> 时间：2012-08-24T13:38:48.560
> 
> 标签：java, entity, rectangles, jbox2d

所以我的身体是一个矩形。我如何获得它的一半宽度和一半高度？（我在其他任何地方都找不到答案）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T20:28:40.403

不幸的是，它并不完全直截了当，因为 Box2D（因此 JBox2D）本身没有任何矩形概念。矩形是 a `PolygonShape`，其形状可能是使用 指定的`setAsBox(halfWidth, halfHeight)`。

要获得它`halfWidth`，`halfHeight`在创建 之后`Fixture`，请考虑以下事项（请根据需要对其进行重构）：

```
public void checkOutThisFixture(Fixture fixture) {
    Shape fixtureShape = fixture.getShape();
    if (fixtureShape instanceof PolygonShape) {
        PolygonShape polygonShape = (PolygonShape) fixtureShape;
        Float minX = null;
        Float maxX = null;
        Float minY = null;
        Float maxY = null;
        for (int i = 0; i < polygonShape.getVertexCount(); i++) {
            Vec2 nextVertex = polygonShape.getVertex(i);
            float x = nextVertex.x;
            float y = nextVertex.y;
            if (minX == null || x < minX) {
                minX = x;
            }
            if (maxX == null || x > maxX) {
                maxX = x;
            }
            if (minY == null || y < minY) {
                minY = y;
            }
            if (maxY == null || y > maxY) {
                maxY = y;
            }
        }
        float width = maxX - minX;
        float height = maxY - minY;
        float halfWidth = width / 2;
        float halfHeight = height / 2;
        System.out.println("The polygon has half width & height of: " + halfWidth + " & " + halfHeight);
    } else if (fixtureShape instanceof CircleShape) {
        float radius = ((CircleShape) fixtureShape).m_radius;
        System.out.println("The circle has a radius of : " + radius);
    } else {
        // TODO handle other shapes
    }
} 
```

要从`Body`使用中获取此信息：

```
public void checkOutTheseFixtures(Body body) {
    for (Fixture fixture = body.getFixtureList(); fixture != null; fixture = fixture.getNext()) {
        checkOutThisFixture(fixture);
    }
} 
```

还有一些测试：

```
World world = new World(new Vec2(0, 0), true);
Body body = world.createBody(new BodyDef());

// Add a circle
CircleShape circle = new CircleShape();
circle.m_radius = 20;
body.createFixture(circle, 5);

// Add a box
PolygonShape rectangle = new PolygonShape();
rectangle.setAsBox(137, 42);
body.createFixture(rectangle, 10);

// Add a more complex polygon
PolygonShape polygon = new PolygonShape();
Vec2[] vertices = new Vec2[5];
vertices[0] = new Vec2(-1, 2);
vertices[1] = new Vec2(-1, 0);
vertices[2] = new Vec2(0, -3);
vertices[3] = new Vec2(1, 0);
vertices[4] = new Vec2(1, 1);
polygon.set(vertices, 5);
body.createFixture(polygon, 10);

checkOutTheseFixtures(body); 
```

印刷：

> 多边形的半宽度和高度为：1.0 和 2.5
> 
> 多边形的半宽度和高度为：137.0 和 42.0
> 
> 圆的半径为：20.0

希望有帮助。

* * *

在类似的注释中，这是获取 a 尺寸的简洁方法`PolygonShape`：

```
 public static Vec2 getDimensions( final PolygonShape shape ) {
    float minX = Float.MAX_VALUE;
    float maxX = Float.MIN_VALUE;
    float minY = Float.MAX_VALUE;
    float maxY = Float.MIN_VALUE;

    final int vertices = shape.getVertexCount();

    for( int i = 0; i < vertices; i++ ) {
      final Vec2 v = shape.getVertex( i );

      minX = (v.x < minX) ? v.x : minX;
      maxX = (v.x > maxX) ? v.x : maxX;
      minY = (v.y < minY) ? v.y : minY;
      maxY = (v.y > maxY) ? v.y : maxY;
    }

    return new Vec2( maxX - minX, maxY - minY );
  } 
```

将返回`Vec2`的尺寸分成两半也将检索所需的值。

# c# - 检测终端服务器和环境变量的执行

> ID：12110561
> 
> 赞同：1
> 
> 时间：2012-08-24T13:38:49.747
> 
> 标签：c#, .net, environment-variables, terminal-services

我正在尝试使用环境变量 SESSIONNAME 来检测我们是否在 TerminalServer 会话中执行。该方法`Environment.GetEnvironmentVariable("SESSIONNAME");`正在返回`RDP-Tcp#0`，但是当我检查环境变量时，`SET`我看不到该环境变量。

请参阅以下屏幕截图：

![在此处输入图像描述](../Images/635f07f6ae10baa62a40e707d0ee6a4f.png)

有人知道发生了什么吗？或者也许我应该尝试以另一种方式检测 TerminalService 托管？

提前致谢。

# c# - 如何使用 C# 将列表项列绑定到共享点中的下拉列表

> ID：12110562
> 
> 赞同：4
> 
> 时间：2012-08-24T13:38:52.180
> 
> 标签：c#, sharepoint

我有两个列表，分别称为“课程”、“讲师”。“课程”列表包含以下列。

```
CourseName   Duration   
----------------------
 Sharepoint   60days 
  MSBI        45days 
  .Net        90days 
  Java        50days 
```

讲师列表包含以下列

```
 Instructor   Course   
---------------------
  John       Sharepoint 
  Mike       MSBI 
  Bob        Java 
```

我想将“CourseName”列添加到下拉列表中，这应该在 webpart 中实现。当我们从该下拉列表中选择任何课程时，我们应该在标签中显示讲师的姓名。最初，我尝试向 Web 部件添加一个下拉菜单，以使用以下代码显示**CourseName列。**但我未能创造。

```
DropDownList drpList;
        protected override void CreateChildControls()
        {
            drpList = new DropDownList();
            SPSite site = SPContext.Current.Site;
            SPWeb web = site.RootWeb;

            SPList list1 = web.Lists["Courses"];
            var listitems = list1.Fields["Course Name"];
            drpList.DataSource = listitems;
            drpList.DataTextField = "Course Name";
            drpList.DataValueField = "Course Name";
            drpList.DataBind();
            Controls.Add(drpList);
        } 
```

任何人都可以建议我正确的方法吗？

新实施。我尝试使用以下代码

```
DropDownList drpList;
        protected override void CreateChildControls()
        {
            drpList = new DropDownList();
            SPSite site = SPContext.Current.Site;
            SPWeb web = site.RootWeb;
            ArrayList myarr = new ArrayList();
            myarr.Add(1);
            myarr.Add(2);
            SPSiteDataQuery dataquery = new SPSiteDataQuery();
            dataquery.Lists = string.Format("<Lists><List ID={0} /></Lists>",web.Lists["Courses"].ID);
            dataquery.ViewFields = "<FieldRef Name=\"Course Name\"/>";
            DataTable dt = web.GetSiteData(dataquery);
            drpList.DataTextField = "Course Name";
            drpList.DataValueField = "Course Name";
            drpList.DataSource = dt;
            drpList.DataBind();
            Controls.Add(drpList);
        } 
```

下拉列表出现，但没有数据。我认为 CAML 查询中有错误。任何人都可以纠正我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T12:29:57.017

Lukasz M 所指的帖子是我自己写的。

首先，您*需要*有两个单独的列表吗？您不能只有一个名为**Courses**的列表，其中包含以下列：***CourseName, Duration, Instructor *** ?****** 然后您可以应用一个 CAML 查询，它基本上会执行以下操作：如果 CourseName = "SharePoint" ，然后显示来自 Instructor Column 的值 John？如果您按照我的描述进行了此列表设置（一个列表中的所有 3 列），那么代码将如下所示（放置在**Page_Load**事件中）：

```
 SPListItemCollection itemCol = null;
    SPSite site = new SPSite("http://yoursharepointsite");
    SPWeb web = site.OpenWeb();
    SPList list = web.Lists["Courses"]; //Name of your List with Courses
    SPQuery qryCourse = new SPQuery();
    //This checks what you have selected in the drop-down list (assuming it's called dropList)
    qryCourse.Query = "<Where><Eq><FieldRef Name='Title'/><Value Type='Text'>" + dropList.SelectedItem.Text + "</Value></Eq></Where>";
    qryCourse.ViewFields = "<FieldRef Name='Instructor'/>"; //You want the Instructor Column to display

    try
    {
        itemCol = list.GetItems(qryCourse);
        foreach (SPListItem item in itemCol)
        {
          //Display the Instructor value in your label 
          lblInstructorName.Text = item["Instructor"].ToString();
        }
    }
    catch (NullReferenceException)
    {
        lblInstructorName.Text = "Some Kind of Error!";
    } 
```

请注意，您仍然需要使用我之前发布的**[“检索 SharePoint 列表数据”中的代码并将其绑定到下拉列表](https://stackoverflow.com/questions/1999269/retrieve-sharepoint-list-data-and-bind-this-to-a-dropdownlist)**以绑定**dropList**字段，以便它从名为“**课程**”的 Sharepoint 列表中检索其值，正如 Lukasz M 所建议的那样。这也将出现在**Page_Load**事件中（在我上面写的代码之前）。希望对米希尔有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-21T09:06:47.610

尝试使用提供者和消费者 webpart。这可能是你的答案

[资源](http://msdn.microsoft.com/en-us/library/ms469765.aspx)

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T21:28:22.560

在 SO 上查看这个问题：[Retrieve SharePoint List Data and bind this to a dropdownlist](https://stackoverflow.com/questions/1999269/retrieve-sharepoint-list-data-and-bind-this-to-a-dropdownlist)。它似乎完全按照您的意愿工作。根据该代码，下拉列表的数据源应设置为：`drpList.DataSource = list1.Items;`. 另请注意，代码是在`Page_Load`方法中添加的。

# c# - 为什么重载方法的优先级低于实例方法

> ID：12110565
> 
> 赞同：11
> 
> 时间：2012-08-24T13:39:05.830
> 
> 标签：c#, .net, overloading, overriding

我有基类`A`

```
public class A
{
    public virtual void Method(A parameter)
    {
        Console.WriteLine(MethodBase.GetCurrentMethod());
    }
    public virtual void Method(B parameter)
    {
        Console.WriteLine(MethodBase.GetCurrentMethod());
    }
} 
```

继承的`B`

```
public class B : A
{
    public virtual void Method(object parameter)
    {
        Console.WriteLine(MethodBase.GetCurrentMethod());
    }

    public override void Method(A parameter)
    {
        Console.WriteLine(MethodBase.GetCurrentMethod());
    }

    public override void Method(B parameter)
    {
        Console.WriteLine(MethodBase.GetCurrentMethod());
    }
} 
```

`S`具有扩展方法的静态类

```
public static class S
{
    public static void Method(this B instance, B parameter)
    {
        Console.WriteLine(MethodBase.GetCurrentMethod());
    }
} 
```

示例我们创建类型的实例`B`并对其进行调用`Method`，我们希望它是`public override void Method(B parameter)`实际结果`public virtual void Method(object parameter)`。

```
var b = new B();
b.Method(new B()); // B.Method (Object parameter) Why??? 
```

为什么编译器不选择更合适的方法？？？ **UPD**为什么它不是扩展方法？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-24T13:41:38.060

> 为什么编译器不选择更合适的方法？

因为它遵循语言规范的规则，在找到候选方法时，*最初*在基类中声明的任何候选方法（如果它们在派生类中被覆盖）都会被忽略，除非派生类没有任何适用的方法，此时搜索向上移动到基类等。

这是[为了避免“脆弱的基类”问题](http://blogs.msdn.com/b/ericlippert/archive/2007/09/04/future-breaking-changes-part-three.aspx)而设计的，但是面对派生类中被覆盖的方法，我发现很难接受。

C# 4 规范的相关位是 7.4，其结尾是：

> 对于类型参数和接口以外的类型中的成员查找，以及严格单继承的接口中的成员查找（继承链中的每个接口恰好有零个或一个直接基接口），查找规则的效果只是派生的成员隐藏具有相同名称或签名的基本成员。

编辑：关于扩展方法...

> 为什么它不是扩展方法？

从规范的第 7.6.5.2 节：

> 在其中一种形式的方法调用（§7.5.5.1）中
> 
> ```
> expr . identifier ( )
> expr . identifier ( args )
> expr . identifier < typeargs > ( )
> expr . identifier < typeargs > ( args ) 
> ```
> 
> 如果调用的正常处理未找到适用的方法，则尝试将构造处理为扩展方法调用

所以扩展方法基本上*只是*作为最后的手段使用。

# entity-framework-4.1 - 使用电动工具的实体框架逆向工程师 - 无主键

> ID：12110569
> 
> 赞同：0
> 
> 时间：2012-08-24T13:39:14.483
> 
> 标签：entity-framework-4.1, t4

我使用 Entity Framework Power Tools Beta 2 对我的模型类进行逆向工程。但是，数据注释中没有声明主键。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T14:06:33.130

默认情况下，映射通过fluent完成。

如果你想改变它，你可以自定义用于生成模型的 TT 文件。您将从 mapping.tt 中删除它，然后将数据注释添加到 entity.tt。 [罗文米勒对此发表了一篇很棒的文章](http://romiller.com/2012/05/09/customizing-reverse-engineer-code-first-in-the-ef-power-tools/)。

# php - 如何在 preg_replace 中包含“#”？

> ID：12110571
> 
> 赞同：1
> 
> 时间：2012-08-24T13:39:24.833
> 
> 标签：php, function

> **可能重复：**
> [如果 ^/$ 已在 PHP 中用作正则表达式的分隔符，如何使用它？](https://stackoverflow.com/questions/2477801/how-to-use-if-its-already-used-as-a-delimiter-for-regex-in-php)

如果我在 preg_replace 上加上“#”，就会出错。如何在 preg_replace 中包含“#”？

```
$document = preg_replace('#[^A-Za-z 0-9,.?$@!&;]#i', '', $document); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T13:40:15.590

使用不同的分隔符。

```
/[^A-Za-z 0-9,.?$@!&;#]/ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T13:40:22.020

你逃避它

```
$document = preg_replace('#[^A-Za-z 0-9,.?$@!&;\#]#i', '', $document); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T13:41:33.670

通过像`\#`. 也看看[这个](http://www.addedbytes.com/cheat-sheets/download/regular-expressions-cheat-sheet-v2.png)

# facebook - Facebook 禁用增强的身份验证对话框

> ID：12110572
> 
> 赞同：-1
> 
> 时间：2012-08-24T13:39:28.477
> 
> 标签：facebook, facebook-graph-api, authentication

如何禁用增强的身份验证对话框？

我的高级应用程序设置中没有增强身份验证对话框设置。

所以，我必须做的。

谢谢，再见，

Ĵ

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T14:00:49.877

一段时间以来，增强的身份验证对话框一直是所有应用程序的标准。

不，你不能“禁用”它（不再）。

无论如何，你有什么问题？

# javascript - 从调用函数

> ID：12110578
> 
> 赞同：0
> 
> 时间：2012-08-24T13:39:43.953
> 
> 标签：javascript, html, tags

我知道您不能在`<form>`like中使用 onLoad 属性`<form id"form" onload="javascript:test()">`，您只能在`<body>`

我的问题是，是否有任何属性可以在表单加载时调用函数，或者是否有不同的方法来执行此操作？

编辑：

就像这样

```
<form jwcid="form">
<script>
function checkForChange() {
var approvalStatus = document.getElementById('licensingStatus').value;
if(approvalStatus == "Pass"){
    document.getElementById('licensingApprovalDate').setAttribute("validators", "validators:maxDateToday,required");
} else {
    document.getElementById('licensingApprovalDate').setAttribute("validators", "validators:maxDateToday");
}   
}
</script>
..... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T13:49:44.453

表单不使用外部数据来构建它们（主体可以加载图像，iframe 可以加载外部文档等）。

所以：

```
</form>
<script> /* The form has loaded. Do your stuff */ </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T13:45:47.903

What do you mean with "form is loaded"? I think you mean "when the form is submited". The attribute is "onsubmit": `<form id="form" onsubmit="javascript:test()">`

Your funktion has to return either true or false whether the form shall be submitted or not.

# ruby-on-rails - 在黄瓜 howto 中重定向以下内容

> ID：12110579
> 
> 赞同：0
> 
> 时间：2012-08-24T13:39:46.743
> 
> 标签：ruby-on-rails, ruby, cucumber

我有这样一个功能的场景

```
Scenario: can't find similar movies if we don't know director (sad path)
Given I am on the details page for "Alien"
Then  I should not see "Ridley Scott"
When  I follow "Find Movies With Same Director"
Then  I should be on the home page
Then   I should see "'Alien' has no director info" 
```

我有一个名为 find_by_same_director 的**“查找具有相同导演的电影”**的控制器操作，并且还有一个同名的视图模板，但是当电影没有导演时，类似的电影应该带到主页，我在控制器操作中执行这样..

```
def find_by_same_director
 m = Movie.find params[:id]
 @similar_movies = m.similar_movies
 if @similar_movies.count == 0
   flash[:notice] = "#{m.title} has no director info"
   render :index
 end
end 
```

而在paths.rb path_to 方法有'主页'的情况是这样的

```
when /^the home\s?page$/
  movies_path 
```

通过这一步*然后我应该在主页上我应*该做什么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T02:02:50.670

就个人而言，我会在主页路径 RE 中删除“^”和“$”，因为它们没有锚定在那里。

“那么我应该在主页上”应该在 web_steps.rb 中找到并在那里找到步骤。具体步骤：

```
Then /^(?:|I )should be on (.+)$/ do |page_name|
  current_path = URI.parse(current_url).path                                                                                                                                                                                               
  if current_path.respond_to? :should                                                                                                                                                                                                      
    current_path.should == path_to(page_name)                                                                                                                                                                                              
  else                                                                                                                                                                                                                                     
    assert_equal path_to(page_name), current_path                                                                                                                                                                                          
  end                                                                                                                                                                                                                                      
end 
```

此外，您必须注意字符串中或其后的空格。（Given/When/Then 和字符串开头之间的空格无关紧要。）

# c++ - 在 C++ 中解析字符串的特定部分

> ID：12110581
> 
> 赞同：2
> 
> 时间：2012-08-24T13:40:00.357
> 
> 标签：c++, linux

我有一个从命令输出中读取的字符串向量，输出格式为，其中包含键和 ip 值。

```
key:  0 165.123.34.12
key:  1 1.1.1.1
key1: 1 3.3.3.3 
```

我需要将键的值读取为 0,1,1 和每个键的 ips。我可以使用哪个字符串函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T13:45:32.677

Here is a simple solution for C++:

```
const char *data[] = {"key:  0 165.123.34.12", "key:  1 1.1.1.1", "key1: 1 3.3.3.3"};
vector<string> vstr(data, data+3);
for (vector<string>::const_iterator i=vstr.begin() ; i != vstr.end() ; ++i) {
    stringstream ss(*i);
    string ignore, ip;
    int n;
    ss >> ignore >> n >> ip;
    cout << "N=" << n << ", IP=" << ip << endl;
} 
```

On ideone: [link](http://ideone.com/6DIOn).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T13:49:34.400

[`sscanf()`](http://en.cppreference.com/w/c/io/fscanf)非常有用：

```
char* s = "key: 14 165.123.34.12";
int key_value;
char ip_address[16];

if (2 == sscanf(s, "%*[^:]: %d %15s", &key_value, ip_address))
{
    printf("key_value=%d ip_address=[%s]\n", key_value, ip_address);
} 
```

输出：

> key_value=14 ip_address=[165.123.34.12]

格式说明符`"%*[^:]"`意味着读取到第一个冒号但不分配给任何变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T13:42:59.023

使用`rfind`和`substr`。

`' '`首先从右边找到第一个的索引。那将是您的子字符串的结尾。接下来，找到上一个。

取两个索引之间的子字符串。

如果字符串有尾随空格，则需要事先修剪这些空格。

代码已删除

# android - 编程 windows phone 8 应用程序与 iOS 和 Android 的比较

> ID：12110589
> 
> 赞同：-3
> 
> 时间：2012-08-24T13:40:37.127
> 
> 标签：android, iphone, ios, windows

我已经为 iOS 和 Android 开发并移植了我的应用程序。根据我的经验，在大多数情况下，从 iOS 移植到 Android 或反之亦然。到目前为止，主要的额外努力总是来自某些专业，如 Android 小部件、通知、WIFI 与 BT 通信、服务器通信等......甚至 UI 也很容易移植。

现在我正在考虑 WP 8。根据您的经验，这与 iOS/Android 开发相比如何？我还没有任何真正的 Windows 8 洞察力。它更接近 iOS 还是 Android - 如果有人能分辨吗？学习体验和速度是否类似于来自 iOS <-> Android ？

我并不是要对比较的开发工作进行估计，因为这取决于太多的专业——我知道！（但是听到一些经验会很有趣）

如果有任何“更好”更有效的 Windows 8 应用程序开发方法 - 来自 iOS 或 Android，我更感兴趣？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T13:46:44.540

As SLaks said, you have to redesign the UI to respect the UI guidelines of the platform.

However, on Windows 8, you can create your app with HTML5/CSS/Javascript, or with XAML/C#

I think in your case the most interesting way to make the portage is using the second solution. Maybe you'll be able to port some of your Java code to C#

Also, keep in mind that Windows 8 is PC and tablet system. So it's very different from Android/IOS in many ways.

# android - 使用预装程序之一在我的应用程序中打开文件

> ID：12110590
> 
> 赞同：0
> 
> 时间：2012-08-24T13:40:41.293
> 
> 标签：android, android-dialog, android-file

我在这里搜索了不同的问题，但仍然不知道如何解决它。

所以，基本上，我的应用程序中有一个文件显示在文件资源管理器中，因此，当用户点击它时 - 我想使用预安装的程序打开它。比如说，我想用预装的 pdf 查看器打开一个 pdf 文件。我该如何处理？如果您只为android提供文件路径及其类型并为您提供可以打开的程序时有任何“自动”解决方案？

谢谢xx

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T13:49:45.273

如果可用，android 将适当地打开它

```
Intent contacts = new Intent();

 contacts.setAction(android.content.Intent.ACTION_VIEW);

contacts.setData(uri for what u want 2 do);

 startActivity(contacts); 
```

# java - 执行 cursor.getCount() 时崩溃（Android）

> ID：12110594
> 
> 赞同：0
> 
> 时间：2012-08-24T13:41:05.380
> 
> 标签：java, android, cursor, gallery

这并不总是发生，所以我无法正确理解发生了什么：我的应用程序拍摄并修改了一张图片，然后将其保存在外部存储中。如果我尝试在应用程序中打开一个来自文件管理器而不是来自画廊的新保存图片，它在执行 cursor.getCount() 时崩溃，在 DDMS 中我读到错误：“游标在最终之前没有关闭”这是一块问题出在哪里的代码，有需要我可以发更多，谢谢！ps此代码取自stackoverflow中的其他答案，正如您所料，我不是专家，所以请耐心等待我，谢谢pps，当它们出现在画廊中时，我在保存后无法立即在画廊中看到图片错误消失。

```
public static int getOrientation(Context context, Uri photoUri) {
        /* it's on the external media. */
        Cursor cursor = context.getContentResolver().query(photoUri,
                new String[] { MediaStore.Images.ImageColumns.ORIENTATION }, null, null, null);

        if (cursor.getCount() != 1) { //HERE IS THE PROBLEM
            return -1;
        }

        cursor.moveToFirst();
        return cursor.getInt(0);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T13:43:57.453

您可以使用

```
if(cursor.moveToFirst()) 
{
    //Your code here
} 
```

而是关闭

```
cursor.getCount() 
```

如果光标大小大于0，它将返回true，否则将返回false........所以你可以这样写............

```
if (!cursor.moveToFirst())
   return -1;

else 
   return 1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T13:43:03.787

使用 this 而不是 return 语句。光标正在泄漏，因为您没有关闭它

```
try{

    if (cursor.getCount() != 1) { //HERE IS THE PROBLEM
        return -1;
    }

    int i = 0;
    i++;
    cursor.moveToFirst();
   return cursor.getInt(0);

}finally{
if(cursor != null)
   cursor.close();
} 
```

编辑：
当您从文件管理器打开文件时，uri 的格式为 file:///sdcard/filename，但 Mediastore 只能理解格式 content://media/audio/1 的 uri。这就是您将光标设为空的原因。

一种方法是查询整个 Mediastore 并获取 MediaStore.Images.Media.DATA 列并与从 uri 获得的路径进行比较

# javascript - d3 数据恒常性

> ID：12110598
> 
> 赞同：1
> 
> 时间：2012-08-24T13:41:30.310
> 
> 标签：javascript, d3.js

[这是关于 SO： D3-issues on first transition after initialization](https://stackoverflow.com/questions/11738424/d3-issues-on-first-transition-after-initialization)的这个问题的后续。

我已经研究并实现了 Mike 和 Jason 在他们的回答中解释的关键功能。我还发现这篇博文很有用[http://knowledgestockpile.blogspot.com/2012/01/understanding-selectall-data-enter.html](http://knowledgestockpile.blogspot.com/2012/01/understanding-selectall-data-enter.html)

我用过像这样的钥匙

```
.data(svg.chartData, function(d) { return d.idSeries;}) 
```

映射一对一的数据和索引。

但是，重绘时我没有得到预期的结果和数据点交换。请查看[http://jsbin.com/avoced/8/edit](http://jsbin.com/avoced/8/edit)，具体到以下相关功能：

图表初始化：

```
 svg.series = svg.selectAll(".series").data(svg.chartData, function(d) { return d.idSer;})
    svg.series.enter().append("g").classed("series", true)

    svg.rects = svg.series.selectAll("rect").data(Object, function(d) { return d.x;})
    svg.rects.enter().append("rect") 
```

重绘：

```
 svg.series = svg.selectAll(".series").data(svg.chartData, function(d) { return d.idSer;})
    svg.series.enter().append("g").classed("series", true)
    svg.series.exit().remove()

    svg.rects = svg.series.selectAll("rect").data(Object, function(d) { return d.x;})
    svg.rects.enter().append("rect")
    svg.rects.exit().remove() 
```

秤：

```
x = d3.scale.ordinal()
      .domain(svg.pointsNames, function(d) { return d;}) 
        .rangeRoundBands([0,width], .1); 
```

我在这里想念什么？

非常感谢

# php - 解析 XML 时出现语法错误

> ID：12110601
> 
> 赞同：0
> 
> 时间：2012-08-24T13:41:34.980
> 
> 标签：php, rss

我正在尝试将站点的 rss 提要作为 XML 获取并尝试显示它，但出现语法错误，我的整个代码如下：

```
<?php 
   header('Content-type: text/xml');
   $feeds = file_get_contents('http://rss.news.yahoo.com/rss/topstories');
   $xml = simplexml_load_string($feeds);
   foreach ($xml->channel->item as $item) {
      print $item->title;   
   }
?> 
```

我得到的错误是

**XML 解析错误：语法错误位置：localhost/rssfeed.php**

谁能指导我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T14:11:58.140

您收到 XML Parsing Error 因为您没有输出正确的 XML，通过设置浏览器期望有效 xml 的标题内容类型。

尝试这个：

```
<?php 
header('Content-type: text/xml');

//Load your feed (input)
$feed = file_get_contents('http://rss.news.yahoo.com/rss/topstories');
$feed_xml = simplexml_load_string($feed);

//Create a new SimpleXMLElement object (for output)
$xml = new SimpleXMLElement('<?xml version="1.0" encoding="UTF-8"?><news/>');

//Loop each item from $feed_xml->channel->item
foreach ($feed_xml->channel->item as $item) {
    //Create a story node for each item
    $node = $xml->addChild('story');
    //Loop each items & add it to the node if its a title or description
    foreach($item as $key=>$value){
        if($key == 'title'){$node->addChild($key, $value);}
        if($key == 'description'){$node->addChild($key, $value);}
    }
}

//Use dom document to format the output nicly, not required
$dom = new DOMDocument('1.0');
$dom->formatOutput = true;
$dom->loadXML($xml->asXML());

echo $dom->saveXML();
/**Output
<?xml version="1.0" encoding="UTF-8"?>
<news>
  <story>
    <title>Ryan says Obama undercuts welfare reform law</title>
    <description>Republican vice presidential candidate Paul Ryan says President Barack Obama wants to ease work requirements for welfare recipients even though that claim has been largely debunked by independent fact checkers.</description>
  </story>
  <story>
    <title>Greenpeace activists storm Russian oil rig</title>
    <description>&lt;p&gt;&lt;a href="http://news.yahoo.com/greenpeace-activists-storm-russian-oil-rig-063813773.html"&gt;&lt;img src="http://l3.yimg.com/bt/api/res/1.2/mSCkTQFkrkzOGPzb3sGLVw--/YXBwaWQ9eW5ld3M7Zmk9ZmlsbDtoPTg2O3E9ODU7dz0xMzA-/http://media.zenfs.com/en_us/News/ap_webfeeds/2c763e62d83a2717190f6a7067003ab4.jpg" width="130" height="86" alt="Greenpeace activists including Executive Director of Greenpeace International, Kumi Naidoo, board energy giant Gazprom's Arctic oil platform Prirazlomnaya off the North-eastern coast of Russia in the Pechora Sea on Friday, Aug. 24, 2012\. Greenpeace activists have stormed a floating oil rig in Russia’s Pechora Sea to protest oil drilling in the Arctic, the environmental organization said on Friday. (AP Photo/ Denis Sinyakov, Greenpeace)" align="left" title="Greenpeace activists including Executive Director of Greenpeace International, Kumi Naidoo, board energy giant Gazprom's Arctic oil platform Prirazlomnaya off the North-eastern coast of Russia in the Pechora Sea on Friday, Aug. 24, 2012\. Greenpeace activists have stormed a floating oil rig in Russia’s Pechora Sea to protest oil drilling in the Arctic, the environmental organization said on Friday. (AP Photo/ Denis Sinyakov, Greenpeace)" border="0" /&gt;&lt;/a&gt;Greenpeace activists stormed a floating Russian oil rig early Friday in the open sea to protest oil drilling in the Arctic, the environmental organization said.&lt;/p&gt;&lt;br clear="all"/&gt;</description>
  </story>
  ...
  ...
</news>
 */
?> 
```

# wordpress - 无法获得评论数

> ID：12110604
> 
> 赞同：1
> 
> 时间：2012-08-24T13:41:53.500
> 
> 标签：wordpress, drupal, joomla, rss, feed

我正在使用从**WordPress 博客**生成的 RSS 源来获取一些信息。WordPress 在提供有关帖子的全面信息方面做得太好了，并且很容易在 RSS 源中提取帖子*的评论数。*现在的问题是我没有找到任何方法从**Drupal**和**Joomla 博客**生成的 RSS 源中获取*评论数*。

 ****有没有办法做到这一点？

任何帮助都会非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T05:23:48.587

这是一个很酷的 Drupal 模块，可以帮助你。如果您的 rss 字段不是由视图生成的。首先将其移动到视图中。然后使用此模块将评论计数作为字段输出

[http://drupal.org/project/views_rss](http://drupal.org/project/views_rss)

否则，您需要在模板层中进行一些主题覆盖。Drupal 不提供自定义核心 rss 提要的默认方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T16:41:57.953

你试过用谷歌的 feedburner 吗？feedburner.google.com/ 我过去也遇到过同样的问题，出于某种原因，首先通过 feedburner 运行它似乎有所帮助。****

# python - 我应该如何表明尚未用 Python 编写测试？

> ID：12110610
> 
> 赞同：5
> 
> 时间：2012-08-24T13:41:57.470
> 
> 标签：python, unit-testing, tdd

我正在使用 Python 和`unittest`模块进行 TDD。在 NUnit 中，您可以`Assert.Inconclusive("This test hasn't been written yet")`.

到目前为止，我还没有在 Python 中找到任何类似的东西来表明“这些测试只是占位符，我需要回来并将代码实际放入其中。”

有没有一个 Pythonic 模式呢？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-24T13:47:07.310

使用[新的和更新的 unittest 模块](http://www.voidspace.org.uk/python/articles/unittest2.shtml)，您可以跳过测试：

```
@skip("skip this test")
def testSomething(self):
    pass # TODO

def testBar(self):
    self.skipTest('We need a test here, really')

def testFoo(self):
    raise SkipTest('TODO: Write a test here too') 
```

当测试运行程序运行这些时，它们会单独计算（“跳过：（n）”）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-24T13:46:07.117

我不会让他们通过或显示 OK，因为您不会轻易找到他们。

也许只是让他们失败以及原因（尚未编写），这似乎合乎逻辑，因为您有一个尚未完成的测试。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-15T13:31:52.943

我经常使用 self.fail 作为待办事项列表

```
def test_some_edge_case(self):
    self.fail('Need to check for wibbles') 
```

当我在做 tdd 时，对我来说效果很好。

# linux - DNSclient 没有从 DNSserver 获取主机名，但它能够 ping 它

> ID：12110618
> 
> 赞同：-1
> 
> 时间：2012-08-24T13:42:26.533
> 
> 标签：linux

我有 Window 7 作为主机，我已经通过 Vmware Workstation 在 Window 7 下安装了 Redhat 5.3 和 Centos 5.4 作为 Vmware 机器。我在 Redhat 5.3(10.0.0.1) 中配置了 DNS 和 DHCP，并且能够在 this.I 中执行 nslookup 和 DIG我能够相互ping窗口7，redhat，centos。

我在 DNS 服务器 (10.0.0.1) 的正反向查找文件中为 ip 10.0.0.30 创建了一项 client30.example.com。

问题 ：-

**我制作 Redhat（10.0.0.1）的 dhcp 客户端的 Centos 能够从 dhcp 服务器获取 ip 并且它获取 ip 10.0.0.30 （因为我现在希望没有问题）但是 Centos 没有选择 hostanme client30.example.com因为我将 ip 10.0.0.30 的条目与 client30.example.com 绑定。它仍然在获取主机名 localhost.localdomain。我检查了 centos 的 /etc/resolve.conf 文件，我发现默认情况下它选择名称服务器 192.168.1.1（即使我没有在任何地方提供此 IP）。每次我再次手动更改此 IP 时，它都会在重新启动时显示相同的 IP。**

请帮助我如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T14:25:33.487

因为 VMware Workstation 本身就是 DHCP。请在 VMware Workstation 中禁用 DHCP，您不能在单个网络子网中运行两个 DHCP。

还要检查 /etc/sysconfig/network 文件，主机名来自那里。

# windows - 通过 UNC 使用模拟主机的身份验证问题

> ID：12110628
> 
> 赞同：2
> 
> 时间：2012-08-24T13:43:20.410
> 
> 标签：windows, networking, localhost, share, unc

修改我的“hosts”文件后，我已将“testunc”的位置附加到“127.0.0.1”。当我在“运行”中输入路径“\testunc\share”（我的 C:\ 驱动器上有一个名为“share”的共享文件夹）时，我会收到一个身份验证提示。我被要求提供本地计算机上“Guest”帐户的凭据。尽管“Guest”帐户没有密码，但它总是失败。

我正在本地编写应用程序以在独立网络上使用。我需要在本地模拟 UNC 路径，以便查看应用程序是否可以在实际网络上运行。

\127.0.0.1\share 效果很好，\localhost\share 产生以下警报：“您未连接，因为网络上存在重复名称。”

**编辑和回答**

由于我目前只有 9 个代表，因此我无法再回答 6 个小时。稍后我会自己回答。答案如下：

好的，想通了。如果您将使用的本地 PC 存在安全问题，我不建议您这样做。完成所需的操作后，IE 将撤消此操作。

在使用新主机名和 IP 修改 C:\windows\system32\drivers\etc\hosts 文件后执行所有这些操作。

**所需步骤概述**

1.  从 Microsoft 安装 Loopback 适配器（可能无关紧要）
2.  修改注册表以禁用环回身份验证
3.  修改注册表以禁用严格的名称检查。

**步骤分解**

[首先按照这些说明](http://support.microsoft.com/kb/839013)安装环回适配器（请注意这是在 Windows XP 上）。进入此适配器的属性并根据需要更改其静态 IP 地址和网关。它的工作方式与 Localhost 相同，但使用不同的 IP。

按照我上面评论中引用的 technet 帖子中的说明进行操作（如下列举）：

1.  单击开始，单击运行，键入 regedit，然后单击确定。
2.  找到并单击以下注册表子项：HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Lsa
3.  右键单击 Lsa，指向新建，然后单击 DWORD 值。接下来打开您的注册表（windows + r，运行提示中的“regedit”）。
4.  键入 DisableLoopbackCheck，然后按 Enter。
5.  右键单击 DisableLoopbackCheck，然后单击修改。
6.  在数值数据框中，键入 1，然后单击确定。
7.  退出注册表编辑器。
8.  重新启动计算机。

[重新启动后，您现在必须按照本文](http://www.wincert.net/tips/networking/1767-duplicate-name-exists-on-the-network-when-using-dns-alias)中的说明禁用严格的名称检查（列举如下）：

1.  单击开始，单击运行，键入 regedit，然后单击确定。
2.  在注册表中找到并单击以下项：HKEY_LOCAL_MACHINE\System\CurrentControlSet\Services\LanmanServer\Parameters
3.  在编辑菜单上，单击添加值，然后添加以下注册表 DWORD 值：DisableStrictNameChecking
4.  右键单击 DisableStrictNameChecking，然后单击修改。
5.  在数值数据框中，键入 1，然后单击确定。
6.  退出注册表编辑器。
7.  重新启动计算机。

最后一次重新启动后，您将能够在本地计算机上找到“模拟”的 unc 位置。这应该有助于在独立系统上测试网络部署的应用程序/脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T14:03:39.800

自己回答这个。答案也包含在原始问题文本中。

如果您将使用的本地 PC 存在安全问题，我不建议您这样做。完成所需的操作后，IE 将撤消此操作。

在使用新主机名和 IP 修改 C:\windows\system32\drivers\etc\hosts 文件后执行所有这些操作。

**所需步骤概述**

1.  从 Microsoft 安装 Loopback 适配器（可能无关紧要）
2.  修改注册表以禁用环回身份验证
3.  修改注册表以禁用严格的名称检查。

**步骤分解**

[首先按照这些说明](http://support.microsoft.com/kb/839013)安装环回适配器（请注意这是在 Windows XP 上）。进入此适配器的属性并根据需要更改其静态 IP 地址和网关。它的工作方式与 Localhost 相同，但使用不同的 IP。

按照我上面评论中引用的 technet 帖子中的说明进行操作（如下列举）：

1.  单击开始，单击运行，键入 regedit，然后单击确定。
2.  找到并单击以下注册表子项：HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Lsa
3.  右键单击 Lsa，指向新建，然后单击 DWORD 值。接下来打开您的注册表（windows + r，运行提示中的“regedit”）。
4.  键入 DisableLoopbackCheck，然后按 Enter。
5.  右键单击 DisableLoopbackCheck，然后单击修改。
6.  在数值数据框中，键入 1，然后单击确定。
7.  退出注册表编辑器。
8.  重新启动计算机。

[重新启动后，您现在必须按照本文](http://www.wincert.net/tips/networking/1767-duplicate-name-exists-on-the-network-when-using-dns-alias)中的说明禁用严格的名称检查（列举如下）：

1.  单击开始，单击运行，键入 regedit，然后单击确定。
2.  在注册表中找到并单击以下项：HKEY_LOCAL_MACHINE\System\CurrentControlSet\Services\LanmanServer\Parameters
3.  在编辑菜单上，单击添加值，然后添加以下注册表 DWORD 值：DisableStrictNameChecking
4.  右键单击 DisableStrictNameChecking，然后单击修改。
5.  在数值数据框中，键入 1，然后单击确定。
6.  退出注册表编辑器。
7.  重新启动计算机。

最后一次重新启动后，您将能够在本地计算机上找到“模拟”的 unc 位置。这应该有助于在独立系统上测试网络部署的应用程序/脚本。

# c# - 当前上下文问题中不存在名称“toW”

> ID：12110629
> 
> 赞同：-4
> 
> 时间：2012-08-24T13:43:22.690
> 
> 标签：c#, .net, wpf

我需要以某种方式传递 `double fromH, double toH, UIElement control`给 of 中的`AnimateH`方法，`sb.Completed`但我得到了错误

**当前上下文问题中不存在名称“toW”**

等等..

我该如何解决？

谢谢！

```
 void AnimateTop(double from, double to, double fromH, double toH, UIElement control)
        {
            Debug.WriteLine("EFM - AnimateTop - from: " + from.ToString() + " to: " + to.ToString());
            Storyboard sb = new Storyboard();
            DoubleAnimation da = new DoubleAnimation();
            da.From = from;
            da.To = to;
            da.Duration = new Duration(TimeSpan.FromSeconds(1));
            sb.Children.Add(da);
            Storyboard.SetTargetProperty(da, new PropertyPath("(Canvas.Top)"));
            Storyboard.SetTarget(da, control);
            sb.Completed += (w, r) => 
            { 
                AnimateH(fromW, toW, control); // Here is the error
                control.UpdateLayout(); 
            };
            sb.Begin();
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T13:44:59.083

您正在使用`toW`，但它没有在任何地方声明或作为参数传递

如果它是来自其他地方的值，则应作为参数传递。如果它是从那里的某个方法创建的值，您应该声明类型并获取它的值

```
TypeOftoW toW = MethodThatReturntoWValues(); 
```

在使用它之前。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T13:45:45.330

该方法接受名为`to`and的参数`toH`，但从不接受`toW`. 除非它是您类中的全局变量，否则不会在任何地方声明它（如果它是全局变量，您将不会收到错误）。

您还应该看到类似的错误`fromW`，因为它在当前上下文中也不存在（另外，除非它是全局的）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T13:50:04.527

只是一些注意事项：

1.  您正在使用一个名为 toW 的变量（顺便说一下，它本身的命名非常糟糕。如果您要使用首字母缩略词作为 var 名称，请在某些情况下使用全部小写或全部大写）。无论如何，toW 不存在。您可能正在寻找 toH.
2.  您应该始终命名变量，以便不知道代码的人可以阅读和理解它们。
3.  虽然它是一个合法名称，但我不会`from`用作变量名，因为它也是一个 LINQ 关键字。

# java - PDF确实有2层 - 图像层和文本层？

> ID：12110634
> 
> 赞同：1
> 
> 时间：2012-08-24T13:43:53.000
> 
> 标签：java, pdf

PDF确实有2层 - 图像层和文本层？

如果是真的，那么我如何从 PDF 中获取图像层来打印呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T13:56:41.360

不，这不是真的。pdf内容流是具有基本原语的二进制流：绘制共享，绘制图像，位置指针x，y，绘制文本..等

然而，PDF 也有层，它们就像几个相互堆叠的内容流。虽然在技术上可行，但我从未见过任何图像是单独图层的 PDF。

# c# - 如何记住gridview中单元格的格式选项

> ID：12110637
> 
> 赞同：1
> 
> 时间：2012-08-24T13:44:03.983
> 
> 标签：c#, .net, gridview, cell

我正在使用绑定到对象（实体）的 GridView。网格可以根据其显示的数据进行过滤和自定义。行、列和更具体的单元格将使用一些规则进行格式化，但也来自用户专门设置的格式化选项。

我的问题是关于为特定单元格调用所选格式的最佳方法。目前，我最好的方法是为每个单元格存储一个 id，以查找该单元格的所有格式（即 ForeColor、BackColor、FontWeight 等）。

另一种方法是创建一个新表（称为 Formatted_Cells），存储相关表的 id 和列名，然后是格式化选项。这将涉及每次处理单元格以检查格式时检查 Formatted_Cells 表。这是相当多的处理（类似于上面的方法）。如果我这样做了，我可以标记任何具有自定义格式的行，如果没有，我不需要检查 Formatted_Cells 表，它确实比记住每个单元格的格式更有优势，因为绝大多数人没有任何自定义格式化。

有没有更好的办法？我认为我不能使用序列化来提供帮助，因为网格是从数据库中加载的，可能会在其他地方进行修改。但也许我错过了一些明显的东西？

非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T14:16:17.610

我还建议增加一张桌子。

想到了两种可能的解决方案：

1- 分两次进行格式化。首先正常加载网格，然后从数据库中读取 Formatted_Cells 表，在网格中找到样式化的行并应用特殊样式。

2-当查询数据库的单元格时，添加带有左连接的 Formatted_Cells 表。加载网格时，检查可能来自左连接的其他列，应用这些列。如果没有额外的列，样式正常。

# asp.net-mvc - 更改服务器实体框架

> ID：12110638
> 
> 赞同：0
> 
> 时间：2012-08-24T13:44:05.870
> 
> 标签：asp.net-mvc, entity-framework, connection-string

我正在开发一个 mvc .net 应用程序，并且正在使用实体框架。我在不同的服务器上有相同的数据库，我想更改当前的服务器。我试图更改 web.config 文件中的连接字符串，但没有成功。如何安全地更换服务器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T13:47:23.493

您必须替换数据源

```
<connectionStrings>
<add 
name="AdventureWorksEntities"
connectionString="metadata=.\AdventureWorks.csdl|.\AdventureWorks.ssdl|.\AdventureWorks.msl;
provider=System.Data.SqlClient;
provider connection string='Data Source=.....;
Initial Catalog=....;
Integrated Security=True;
Connection Timeout=60;
multipleactiveresultsets=true'" 
providerName="System.Data.EntityClient" />
</connectionStrings> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T13:51:53.777

您只需更改 web.config 中的连接字符串。

确保您更改了正确的连接字符串（带有元数据的连接字符串）。首次创建模型时，Entity Framework 会自动在 web.config 中放置一个连接字符串。

正确的连接字符串如下所示：

```
<add name="AdventureWorksEntities"
connectionString="metadata=.\AdventureWorks.csdl|.\AdventureWorks.ssdl|.\AdventureWorks.msl;
provider=System.Data.SqlClient;provider connection string='Data Source=localhost;
Initial Catalog=AdventureWorks;Integrated Security=True;Connection Timeout=60;
multipleactiveresultsets=true'" providerName="System.Data.EntityClient" /> 
```

# ios - AudioUnit 输出流蓝牙

> ID：12110640
> 
> 赞同：1
> 
> 时间：2012-08-24T13:44:10.980
> 
> 标签：ios, audio, core-audio, audiounit

我正在尝试将我的音频（从 AudioUnit 回调输出）流式传输到蓝牙音频设备。我从 Apple 文档中找到[了这个。](http://developer.apple.com/library/ios/#documentation/Audio/Conceptual/AudioSessionProgrammingGuide/Cookbook/Cookbook.html)所以试试这段代码，但没有任何反应：

```
int audioCategory = kAudioSessionCategory_PlayAndRecord;
int audioRoute = kAudioSessionOverrideAudioRoute_Speaker;
AudioSessionSetProperty(kAudioSessionProperty_AudioCategory, sizeof(audioCategory, &audioCategory);
AudioSessionSetProperty(kAudioSessionProperty_OverrideAudioRoute, sizeof(audioRoute, &audioRoute);
AudioSessionSetActive(true); 
```

相关：[链接](https://stackoverflow.com/questions/10841065/playback-through-a-bluetooth-connected-speaker)

# loops - 将字段符号传递给 FORM

> ID：12110641
> 
> 赞同：0
> 
> 时间：2012-08-24T13:44:13.053
> 
> 标签：loops, reference, field, abap, assign

我需要在几个代码位置将数据字段（另一个字段符号的组件）分配给字段符号。为了可重用性，我决定将此代码封装在过程中，但我不明白如何将字段符号传递到此过程中。

```
LOOP bseg ASSIGNING <bseg>
...
PERFORM assigning USING <bseg>
                  CHANGING <wrbtr>.
...
ENDLOOP.

FORM assigning USING <bseg> TYPE bseg
               CHANGING <wrbtr> TYPE bseg-wrbtr
IF ...
  some logic here
  ASSIGN <bseg>-wrbtr TO <wrbtr>.
ELSE
  ASSIGN <bseg>-skfbt TO <wrbtr>.
ENDIF.

ENDFORM. 
```

此代码不起作用。

我应该怎么做才能更改字段符号引用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T14:10:39.797

这是不可能的，至少不是您尝试这样做的方式。字段符号不能作为它们真正的指针传递。如果您需要类似的东西，则必须使用真实的参考。

对其余代码一无所知 - 看起来有点奇怪。为什么要直接更改 BSEG 字段中的数据？我只能假设您“滥用”字段来在整个代码中传输一些自定义值，这通常是个坏主意。如果你需要这样做，我宁愿这样做：

```
LOOP bseg ASSIGNING <bseg>.
   IF foo.
    l_my_wrbtr = <bseg>-wrbtr.
  ELSE.
    l_my_wrbtr = <bseg>-skfbt.
  ENDIF.

  " ... pro'lly thousands of lines I don't even want to see...

  IF foo.
    <bseg>-wrbtr = l_my_wrbtr.
  ELSE.
    <bseg>-skfbt = l_my_wrbtr.
  ENDIF.
ENDLOOP. 
```

# jquery - 窗口滚动、if 语句和动画无法正常工作

> ID：12110643
> 
> 赞同：1
> 
> 时间：2012-08-24T13:44:20.103
> 
> 标签：jquery, if-statement, scroll, jquery-animate

看看[这个](http://jsfiddle.net/jYknP/2/)jsFiddle。

当您向下滚动一点时，导航栏应该出现在左侧。这可以正常工作。当您滚动回最顶部时会出现问题。它应该立即隐藏，但事实并非如此。有时它会在几秒钟的延迟后隐藏起来，有时它什么也不做。当您按下它应该的“到顶部”按钮时，它也不会隐藏。

有什么想法吗？

## HTML

```
<nav id="menu-float">
    <ul>
        <li>List item 1</li>
        <li>List item 2</li>
        <li>List item 3</li>
    </ul>
    <div id="toTop">to top</div>
</nav> 
```

## CSS

```
nav#menu-float {
    position: fixed;
    left: 50%;
    margin-left: -300px;
    width: 120px;
    background: white;
    padding: 0.2em 0.4em;
    padding-bottom: 10px;
    border-radius: 8px;
    box-shadow: 0 3px 0px rgba(0, 0, 0, 0.1);
    top: 0;
    opacity: 0;
}

nav#menu-float div#toTop {
    background: #ffffff;
    background: -moz-linear-gradient(top,  #ffffff 0%, #ededed 100%);
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#ffffff),   
color-stop(100%,#ededed));
    background: -webkit-linear-gradient(top,  #ffffff 0%,#ededed 100%);
    background: -o-linear-gradient(top,  #ffffff 0%,#ededed 100%);
    background: -ms-linear-gradient(top,  #ffffff 0%,#ededed 100%);
    background: linear-gradient(top,  #ffffff 0%,#ededed 100%);
    border: 1px #DDD solid;
    border-radius: 8px;
    box-shadow: 0 2px 2px rgba(0, 0, 0, 0.08);
    width: 50px;
    height: 20px;
    right: 5px;
    position: absolute;
    bottom: 5px;
    cursor: pointer;
    text-align: center;
} 
```

## JAVASCRIPT

```
// Only show side menu when x pixels from top and when window size allows it
function checkSize() {
    var floatMenu = $("nav#menu-float");

    if ($(window).width() > 560) {
            $(window).scroll(function() {
                if ($(document).scrollTop() > 100) {
                    floatMenu .animate({
                        opacity: 1,
                        top: "45px"
                    }, 800);
                }
                else {
                    floatMenu .animate({
                        opacity: 0,
                        top: "0px"
                    }, 800);
                }
            });
    }
    else {
        floatMenu .hide();
    }
}

checkSize();
$(window).resize(function() {
    checkSize();
});

// Back to top
$("div#toTop").click(function(e) {
    $("body,html").animate({
            scrollTop: 0
    }, 800);
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T14:01:14.730

这应该有效：

```
$(function() {
    "use strict";
    function checkSize() {
        if ( $(window).width() > 560 ) {
            $(window).scroll(function() {
                if ( $(document).scrollTop() > 100 ) {
                    if ( $("nav#menu-float").css("opacity") === "0" ) {
                        $("nav#menu-float").animate({
                            opacity: 1,
                            top    : "45px"
                        }, 800);
                    }

                }
                else {
                    if ( $("nav#menu-float").css("opacity") === "1" ) {
                        $("nav#menu-float").animate({
                            opacity: 0,
                            top    : "0px"
                        }, 800);
                    }
                }
            });
        }
        else {
            $("nav#menu-float").hide();
        }
    }

    $(window).resize(checkSize);
    checkSize();

    $("div#toTop").click(function() {
        $("body,html").animate({
            scrollTop: 0
        }, 800);
    });
}); 
```

您必须检查动画是否完成，否则您将一次又一次地为*元素设置动画。*`if ( $("nav#menu-float").css("opacity") === "0" ) {`检查不透明度动画是否完成。

### [演示](http://jsfiddle.net/sQVe/jYknP/6/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T14:06:54.097

每次滚动事件触发时，您都在排队等待大量动画，总时间又增加了 800 毫秒。您需要设置某种标志以在菜单显示时阻止滚动事件触发，并在滚动返回顶部时删除该标志以允许菜单再次隐藏。

以下只是添加一个检查以查看菜单是否具有“显示”类并相应地打开和关闭该类：

```
function checkSize() {
    var floatMenu = $("nav#menu-float");

    if ($(window).width() > 560) {
            $(window).scroll(function() {
                if ($(document).scrollTop() > 100 && !floatMenu.hasClass('showing')) {
                    floatMenu.addClass('showing').animate({
                        opacity: 1,
                        top: "45px"
                    }, 800);
                }
                else if ($(document).scrollTop() < 100 && floatMenu.hasClass('showing')) {
                    floatMenu.removeClass('showing').animate({
                        opacity: 0,
                        top: "0px"
                    }, 800);
                }
            });
    }
    else {
        floatMenu .hide();
    }
} 
```

[在这里查看我的叉子](http://jsfiddle.net/v9HHH/)

# javascript - 如何从 HTML 按钮调用一些 Javascript

> ID：12110645
> 
> 赞同：1
> 
> 时间：2012-08-24T13:44:22.373
> 
> 标签：javascript, html, javascript-events

我是 JavaScript 的新手，我有一个带有按钮的 HTML 文件，当单击按钮时我需要调用以下 JS ......知道怎么做`<input type="submit" value="Get Push Token" />`吗？

请提供代码示例，非常感谢！

```
PushToken.getToken(     
                     ["getToken"] ,           
                     function(token) {
                              global.token = token; 
                     },
                     function(error) {
                              console.log("Error : \r\n"+error);      
                     }
          ); 
```

* * *

```
 <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <meta name = "format-detection" content = "telephone=no"/>
        <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width;" />
        <link rel="stylesheet" type="text/css" href="css/index.css" />
        <title>Hello Cordova</title>
    </head>
    <body>
        <div class="app">
            <h1>Apache Cordova™&lt;/h1>
            <div id="deviceready">
                <p class="status pending blink">Connecting to Device</p>
                <p class="status complete blink hide">Device is Ready</p>
                <p>Click here to get the Token<input type="submit" value="Get Push Token" />
            </div>
        </div>
        <script type="text/javascript" src="cordova-2.0.0.js"></script>
        <script type="text/javascript" src="js/index.js"></script>
        <script type="text/javascript" src="js/PushToken.js"></script>
        <script type="text/javascript">
            app.initialize();
        </script>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T13:51:56.827

# 不使用 jQuery

在一个简单的组件或应用程序中，您不希望需要整个 jQuery 库，所以最简单的方法是这样的：

HTML：

```
<input type="submit" value="Get Push Token" id="getPushToken" /> 
```

JavaScript：

```
document.getElementById('getPushToken').onclick=function(){
      PushToken.getToken(     
                 ["getToken"] ,           
                 function(token) {
                          global.token = token; 
                 },
                 function(error) {
                          console.log("Error : \r\n"+error);      
                 }
      );
} 
```

# 使用 jQuery

如果您正在构建一个复杂的应用程序，那么您很有可能需要 jQuery 来做其他事情，在这种情况下，您不妨这样做：

HTML：

```
<input type="submit" value="Get Push Token" id="getPushToken" /> 
```

JavaScript：

```
$('#getPushToken').click(function(){
      PushToken.getToken(     
                 ["getToken"] ,           
                 function(token) {
                          global.token = token; 
                 },
                 function(error) {
                          console.log("Error : \r\n"+error);      
                 }
      );
}); 
```

# 了解正在发生的事情

无论哪种情况，关键是您将要执行的代码包装在一个函数中，并将其设置为该按钮的单击事件的处理程序。然后该按钮将导致调用该函数。

# 使用正确的 HTML

如果按钮不在表单中，您可能应该使用：

```
<button id="getPushToken">Get Push Token</button> 
```

相反，对于 html，JavaScript 将完全相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T13:48:07.240

HTML：

```
<input type="submit" value="Get Push Token" id="getPushToken" /> 
```

JavaScript：

```
document.getElementById('getPushToken').onclick=function(){
      PushToken.getToken(     
                 ["getToken"] ,           
                 function(token) {
                          global.token = token; 
                 },
                 function(error) {
                          console.log("Error : \r\n"+error);      
                 }
      );
} 
```

无论如何，你有一个输入`type="submit"`，但你没有任何形式，这有点胡说八道。

如果您只想要一个按钮，请使用`type="button"`. 如果要提交表单，请创建一个包含该输入的表单，`id`例如`myform`. 然后，

```
document.getElementById('myform').onsubmit=function(){
      PushToken.getToken(     
                 ["getToken"] ,           
                 function(token) {
                          global.token = token; 
                 },
                 function(error) {
                          console.log("Error : \r\n"+error);      
                 }
      );
} 
```

...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T13:47:51.093

将代码放入事件处理函数中，然后`onclick`在按钮中调用该函数。

HTML：

```
/* you probably want button, not submit, and it should have an ID */
<input type="button" id="someID" value="Get Push Token" /> 
```

JS：

```
document.getElementById('someID').onclick = function () {
    // whatever you want to do here
}; 
```

请注意，还有其他方法可以绑定事件处理程序，但这被认为是最佳实践（保持 javascript 和 HTML 分开）

相关问题：[JavaScript 事件处理最佳实践？](https://stackoverflow.com/questions/6268946/javasscript-event-handling-best-practice)

# oracle-apex - 我想知道使用 HTML DB（现称为 APEX）的优缺点

> ID：12110647
> 
> 赞同：1
> 
> 时间：2012-08-24T13:44:23.283
> 
> 标签：oracle-apex

我发现在另一个程序上使用 APEX 的大约 8 个优势和缺陷（http://en.wikipedia.org/wiki/Oracle_Application_Express），但我不确定我是否完全理解**何时**使用它。

据我了解，如果您想要一个与 Oracle 相关的**快速且易于使用的**开发工具，Apex 是您的首选。如果您需要**复杂的解决方案**，APEX 将不适合。

我想知道你们对此的看法。就我而言，我需要知道是否应该为壁球俱乐部推荐该产品。由于它不是一家大公司，我相信 HTML DB 将是最佳选择，因为我们希望在实现后尽可能减少操作。我们也不希望俱乐部的老板花很多钱来获得可以开发更新的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T12:45:05.933

Apex 是免费的，Oracle XE 数据库也是免费的。Apex正在快速发展。

但你要问的取决于更多。

> 据我了解，如果您想要一个与 Oracle 相关的快速且易于使用的开发工具，Apex 是您的首选。

是否已经在使用 oracle 数据库？易于使用的开发工具：是的，当然。但与任何事情一样，这取决于你是否有一些经验，规格和期望是什么，......

> 如果您需要复杂的解决方案，APEX 将不适合。

嗯，... 一个复杂的解决方案在另一个环境中会不会那么复杂？我们的想法到底有多复杂？在我看来，您可以在 apex 中走得很远，并根据您的需要进行调整。它可能涉及创建模板和插件来设置框架，但它是可行的。一个例子是已经与 ExtJS 完全集成的顶级项目。Apex 也不是所有问题的答案，但它很好。如果您留在 Oracle 堆栈中以获得更多参与/复杂性，我会说下一件事是 ADF。就个人而言，我不相信那个。它也有其优点和缺点（例如：需要Java知识。对于某些人来说是pro，对于其他人来说是con ...）

> 就我而言，我需要知道是否应该为壁球俱乐部推荐该产品。由于它不是一家大公司，我相信 HTML DB 将是最佳选择，因为我们希望在实现后尽可能减少操作。

这个俱乐部有多大？该网站的使用强度如何？已经有数据库了吗？是甲骨文吗？谁有 DBA 知识（甚至是基础知识）？谁来发展？如果您的规格符合规格，那么在发布后就不需要太多的摆弄。

> 我们也不希望俱乐部的老板花很多钱来获得可以开发更新的人

谁将托管服务器？谁来运行它？谁来管理它？您打算基于云计算吗？

如果这是一个小项目，我几乎敢于建议 PHP 可能是一个不错的选择。这些开发人员可能比 apex/oracle 开发人员更容易找到且成本更低。但是话又说回来，如果您打算外包，那么问题可能就不那么大了。如果您的 oracle 实例在某个地方的云中，我相信您甚至会非常安全......

真的，您要比较哪些选项？你问的是apex，你有经验吗？

老实说，您的问题与其说是一个问题，不如说是一个讨论的开场白。每种技术和数据库都有其优缺点、拥护者和不喜欢者。

就个人而言，我真的很喜欢apex。它有很多好处，尤其是当您已经投资于 Oracle 堆栈时。它还在不断增长，获得了良好的支持，并发布了具有许多新功能的出色版本。
我真的不能说它必须如何从头开始设置（可靠的）服务：服务器和数据库，无论多小，您都需要一些了解和知识。如果你只是用翅膀和手指交叉，你会在某个地方把它们烧掉。与发展相同。但就我而言，这适用于任何其他技术。当然，除非您将这些方面外包。
等等等等。有很多和更多的讨论这种方式。

出于这些原因，我在那里投了反对票：有很多要讨论的问题，这并不是一个有决定性答案的问题。如果你把更多的规范放在那里，让并发平台的人做出回应，它也许只能得到一个决定性的答案。

* * *

**编辑**
我想对丹尼尔的帖子做出反应。

> 首先我不得不说我本来就是一个PHP-Developer，我真的很喜欢这种语言和环境。尽管如此，我还是决定在今年夏天实习，目前我在 APEX 工作。我正在和另一个实习生一起开发一个更大的应用程序，希望能给你一些有用的意见。这仅涵盖应用程序的开发，因为我并没有真正参与诸如数据库管理之类的事情（尽管我不得不说带有 MySQL 数据库的 PHP Webspace 也不难管理，特别是如果有用户不多）。

我也是一名开发人员，我不做服务器和数据库管理（企业环境）。并不是说我在业余时间没有涉足这里和那里，但我离题了。

> 但我的经验是，解决超出此范围的任务变得非常非常困难。这并不意味着您不能在一个报表中获得多个表格，表格的一些连接也不是什么大问题，并且可以轻松实现。但是，如果您的应用程序需要更多，我不推荐 APEX，所以我完全同意您的规则，即应该以另一种方式创建复杂的应用程序。

那么作为一个 PHP 开发人员，你会推荐 PHP 来实现这一点吗？它会更简单还是一样复杂？
我也会争论复杂性。我处理过一些大型表单，对我来说，这意味着现在的项目数量超过了您的平均数量、一些动态操作、验证，也许还有一些自定义流程。我没有遇到过极其复杂的情况，老实说，我会质疑是谁创造了这些期望。跳出框框思考有时可能是一种美德，但这并不意味着框框总是不好的。复杂的机制或页面可以分解成更容易完成的部分。一个例子是使用模式页面来分解它。

> 我也认为编程经验有限的口号只是部分正确。正如您已经说过的，只有当您只有简单的应用程序时才适用。我个人也无法忍受 IDE 和“易于使用”形式之间的混合。

我同意有限的编程经验：您只会创建最基本的表单和报告，并且几乎没有经验，我认为您甚至会回避选项页面，因为害怕破坏某些东西。即使是基本的数据库和服务器管理也是如此：当没有经验丰富的备份时，我不希望依赖这样的人（但显然描述的一个非常小的项目可能是可以接受的）。
我也只投资于编程方面。

> 创建新模板和其他东西也不是很容易，至少在我看来，使用其他框架会容易得多。

我会说模板使事情变得非常灵活，当然也不难使用

> 甚至可能是最糟糕的事情：我认为这个应用程序有很多错误。我不知道有多少次简单的删除和新创建流程/页面/验证或任何解决问题的方法，而您根本没有想到这个解决方案。

哇。我强烈不同意这一点。在一年的时间里，我可能遇到过这样的事情和大量的表格。并不是说我在 OTN 论坛上没有听说过一些问题，但通常它们与升级有关。

> 总结：如果你有真正适合它的应用程序，我只会使用 APEX。这意味着只有报告和表格，所有更会导致痛苦的调试会话（因为这在这种环境中也不容易......）和糟糕的维护。

太糟糕了，没有那么多使用 apex 的大型公共网站。据我所知，有并且已经有涉及 apex 的大型项目，但这些通常是在公司环境中，因此永远不会炫耀（不可能）。我个人认为 apex 可以比您提到的基本表单+报告更进一步（我的意思是基本的，因为在这种情况下，事情通常会归结为表单+报告）。

不过，调试并不一定很痛苦。如果您在自己的代码中提供足够的调试消息和注释，那将有很大帮助。调试页面、javascript 控制台，以及是否需要在您的 plsql 包中使用自主错误记录程序，...在一些更复杂的材料上，我假设你有知识来实际处理你设置的复杂性）。

你最后提出的有趣的一点是维护。我想说，apex 应该改进很多的一点是版本控制，开箱即用。出口需要改进，以便更容易分解。

* * *

哇，看看那堵文字墙……我本可以猜到这会变成一场讨论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T20:42:58.533

首先我不得不说我本来就是一个PHP-Developer，我真的很喜欢这种语言和环境。尽管如此，我还是决定在今年夏天实习，目前我在 APEX 工作。我正在和另一个实习生一起开发一个更大的应用程序，希望能给你一些有用的意见。这仅涵盖应用程序的开发，因为我并没有真正参与诸如数据库管理之类的事情（尽管我不得不说带有 MySQL 数据库的 PHP Webspace 也不难管理，特别是如果有用户不多）。

首先，我们创建了一些应用程序，只是为了感受一下。之后，我们从应用程序的简单部分开始。如果您只需要构建一些报告和表单来编辑数据库的条目，那么 APEX 真的很棒。使用集成向导创建这些东西非常快。

但我的经验是，解决超出此范围的任务变得非常非常困难。这并不意味着您不能在一个报表中获得多个表格，表格的一些连接也不是什么大问题，并且可以轻松实现。但是，如果您的应用程序需要更多，我不推荐 APEX，所以我完全同意您的规则，即应该以另一种方式创建复杂的应用程序。

我也认为编程经验有限的口号只是部分正确。正如您已经说过的，只有当您只有简单的应用程序时才适用。我个人也无法忍受 IDE 和“易于使用”形式之间的混合。创建新模板和其他东西也不是很容易，至少在我看来，使用其他框架会容易得多。

甚至可能是最糟糕的事情：我认为这个应用程序有很多错误。我不知道有多少次简单的删除和新创建流程/页面/验证或任何解决问题的方法，而您根本没有想到这个解决方案。

总结：如果你有真正适合它的应用程序，我只会使用 APEX。这意味着只有报告和表格，所有更会导致痛苦的调试会话（因为这在这种环境中也不容易......）和糟糕的维护。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-30T11:21:06.103

我作为客人在这里发帖——希望我会创建一个帐户。我使用了早期版本的 O-HTML-DB。我们构建了非常好的应用程序。我最后一次使用它是在 2004 年，当时我已经转为非开发角色。

不过，自 2007 年以来，我决定重新访问该工具并了解 APEX。从那以后，我有了自己的测试应用程序。我不同意实习生所说的大部分内容。

如果您的目标有限（您的业务需求和相关要求），那么您对 ​​APEX 的使用将受到限制。这是一个非常强大的应用程序，具有复杂的安全功能（我自 2009 年以来一直在 InfoSec/Cyber​​ 工作。

是的，您是正确的，而不是关于不需要扎实的开发背景的 APEX 的说法是不准确的。您需要对 SQL/PL/SQL、JavaScript 有很好的掌握。但是您也可以充分利用 OTN，开发人员可以在其中慷慨地分享他们的专业知识。当我开始使用 O-HTML-DB 时，我之前从未在商业环境中构建过 DA。我有理论 SQL 技能。我是一名掌握 JavaScrip 的 Web 开发人员，在 Learning Tree International 接受过 Java 培训（除了学者）。但是我和我的同事（我们是两个开发人员）从 OTN 中学到了很多东西。我们构建了三个 Web 应用程序，其中一个支持 6,000 多个用户——仅 O-HTML-DB！

APEX 将 O-HTML-DB 带入了新的维度。您不需要像我们对 O-HTML-DB 所做的那样对验证进行硬编码。当然也可以修改，这需要对SQL/PL/SQL有扎实的把握。

也许模板对许多开发人员来说有些困惑，这是可以理解的。但随着您继续“玩” APEX，我相信您会喜欢的。它几乎可以做任何事情。只有你有限的视野会限制它。

埃里克

# dojo - 禁用 datagrid/enhancedgrid 中的特定行

> ID：12110648
> 
> 赞同：0
> 
> 时间：2012-08-24T13:44:38.567
> 
> 标签：dojo

我想以下列方式禁用数据网格中的一个特定行：

1）用不同的颜色突出显示一行

2）禁用该行的复选框/单选按钮选择

3) 禁用该行中存在的单元格的内联编辑，但允许其他行的内联编辑。

请。如果您有任何想法，请提供帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T17:43:40.763

您可以使用以下功能的组合来提取内容

```
// as example, one of youre items uses identifier:'id' and 'id:10'
var identifier = '10'; 
var item = store._arrayOfTopLevelItems[10]; // you probably have this allready
var index = grid.getItemIndex(item);   // find which index it has in grid
var rowNode = grid.getRowNode(index);  // find a DOM element at that index 
```

您将拥有`<div>`as `rowNode`，它包含一个带有单元格的表格（与您的列一样多）。设置它`background-color`

复选框的东西，你会知道它有哪个单元格索引

```
var cellNode = dojo.query('td[idx='+cellIndex+']', rowNode)[0];
// with cellType Bool, td contains an input
var checkbox = cellNode.firstChild; 
```

编辑真的是另一家商店……在焦点处理程序中工作。要覆盖它，您必须保留不希望可编辑的行数组（尽管是单元格。`editable == true`）。

```
function inarray(arr, testVal) {
    return dojo.some(arr, function(val) { return val == testVal }).length > 0
}
grid.setNonEditable = function (rowIndex) {
    if(! inarray(this.nonEditable,rowIndex) ) 
           this.nonEditable.push(rowIndex);
}
grid.setEditable = function (rowIndex) {
    this.nonEditable = dojo.filter(this.nonEditable, function(val) { return val != rowIndex; });
}
var originalApply = grid.onApplyEdit
grid.onApplyEdit = function(inValue, inRowIndex) {
   if(! inarray(this.nonEditable,inRowIndex) )
        originalApply.apply(this, arguments);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-30T09:04:48.070

如果您使用的是 dojox.grid.DataGrid 您可以使用 canEdit 函数来禁用行编辑或单元格编辑：

```
grid = new dojox.grid.DataGrid({
    canEdit: function(inCell, inRowIndex) {
        var item = this.getItem(inRowIndex);
        var value = this.store.getValue(item, "name");
        return value == null; // allow edit if value is null
    }
} 
```

# django - django set default value of a model field to a self attribute

> ID：12110654
> 
> 赞同：1
> 
> 时间：2012-08-24T13:45:05.473
> 
> 标签：django, model, field, default-value

I have a model called Fattura, and I would like to set the default value of the field "printable" to a string that includes the value of the field "numero".

But I have the error that link_fattura has less arguments, but if I add default=link_fattura(self) I have an error because self is not defined.

How can I solve this issue?

```
class Fattura(models.Model):
        def link_fattura(self, *args, **kwargs):
                return u"http://127.0.0.1:8000/fatture/%s/" % (self.numero)
        data = models.DateField()
        numero = models.CharField("Numero", max_length=3)
        fatturaProForma = models.ForeignKey(FatturaProForma)
        printable = models.CharField("Fattura stampabile", max_length=200, default=link_fattura)
        def __unicode__(self):
                return u"%s %s" % (self.data, self.numero)
        class Meta:
                verbose_name_plural = "Fatture"
                ordering = ['data'] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T13:53:20.757

您不能使用`default`参数执行此操作。最好的办法是覆盖该`save`方法：

```
def save(self, *args, **kwargs):
    if not self.id and not self.printable:
        self.printable = self.link_fattura()
    return super(Fattura, self).save(*args, **kwargs) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T13:49:18.370

Sorry I read you question wrong, that's not possible without javascript because your model hasn't been saved at that stage yet.

You could forecast the url by doing something like:

```
def link_facttura(self):
    if not self.id:
        return some_url/fattura/%d/ % Fattura.objects.latest().id+1
    return u"" 
```

But it's ugly and likely to cause erros once you start deleting records

# tfs - tfs机智中的用户定义字段

> ID：12110666
> 
> 赞同：0
> 
> 时间：2012-08-24T13:45:51.353
> 
> 标签：tfs

在工作项类型的 tfs 中：我可以定义集合中所有工作项类型共有的用户定义字段吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T21:13:59.803

是与否。

**是的**

例如，当您在 WIT 中定义一个字段时，`<FIELD name="My Field" refname="Company.MyField" ... />`您将该字段添加到集合中。

您可以通过运行以下命令查看集合中的字段：

```
witadmin listfieldfs /collection:http://tfs-server:8080/tfs/MyCollection 
```

您针对此集合编写或运行的任何查询或报告都可以看到此字段。它还针对您的集合出现在 Tfs_Warehouse 数据库中。

**不**

您必须将字段（上面的 XML 片段）添加到您希望能够存储数据的每个工作项类型。如果您通过 API、Excel 或工作项以外的其他方式访问它，那么这就是您所需要的。

**全球名单**

[您可以通过创建Global List](http://msdn.microsoft.com/en-us/library/ms404878%28v=VS.80%29.aspx)来共享字段列表（例如“团队检测者”字段的团队列表） 。

# php - php mongodb在查询后找到_id

> ID：12110668
> 
> 赞同：1
> 
> 时间：2012-08-24T13:45:55.903
> 
> 标签：php, mongodb

我正在转换`mysqli`并`mongodb`在基本任务方面遇到一些问题。
这是登录身份验证过程的一部分，如果电子邮件和密码与 dB 中的记录集匹配，我想获取`_id`并创建会话变量。

这是我到目前为止所拥有的，我所做的所有搜索似乎都有关于`_id`从不同步骤获取信息的信息，我无法根据我的情况对其进行修改。

另外，如果我的逻辑过于直译`mysqli`，请我愿意就最佳实践提出建议`noSql`

```
$collection = $db->members;
$query = array("email" => $email, "password" => $newpass);
  //$cursor = $collection->findOne($query);  // was told this is better but need deeper understanding
$cursor = $collection->find($query); 
$result = $cursor->count();

if($result==1){
    $_SESSION['email'] = $email;

    //having problems here
    $id = $cursor->findOne(array("_id" => $query['_id']));
    $_SESSION['id'] = $id;

    return true; 
}else 
    return false; 
```

**问题**`_id`在验证唯一的用户名和密码后如何获得？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T13:55:56.393

您不应该`findOne`在光标上运行。光标指向上一个查询的结果，您可以使用[iterator_to_array](http://php.net/manual/en/function.iterator-to-array.php)获取包含所有找到记录的数组。或者您可以首先使用 findOne() - 它返回实际行

```
$collection = $db->members;
$query = array("email" => $email, "password" => $newpass);
$result = $collection->findOne($query);

if(!empty($result)){
    $_SESSION['email'] = $email;

    //having problems here
    $id = "" . $result['_id']; // cast to string, as its a MongoId object
    $_SESSION['id'] = $id;

    return true; 
}else 
    return false; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-24T13:56:18.543

您可以确保查询的唯一性（这对于登录系统更好）。

所以使用`findOne()`. 它会给你一个**文件**。请记住，在 MongoDb 中，您会获得文档或文档游标。

检查文档，您只能退回部分文档。[官方文档](http://www.mongodb.org/display/DOCS/Retrieving+a+Subset+of+Fields)

```
$doc = $col->findOne(
       array('pass'=> $pass, 'email'=>$email),//select
       array('_id'=>1)//field selection
);
if ($doc){
   //do your session stuff
} 
```

# vmware - Programmatically executing a program in a VMware machine

> ID：12110669
> 
> 赞同：0
> 
> 时间：2012-08-24T13:46:06.207
> 
> 标签：vmware, vmware-workstation, vmware-server

I have multiple VMware machines; they're all running Windows server, and I would like to run a program in all these machines, not by copying and double-click executing, but by using some VMware API to do that, just like VirtualBox SDK.

Is there any function in the VMware API that allows me to say to a VMware machine to execute a program?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-26T16:40:36.593

如[VMware API 文档中所述](http://pubs.vmware.com/foundry1/wwhelp/wwhimpl/js/html/wwhelp.htm)，您需要的功能是`VixVM_RunProgramInGuest()`，它要求您在来宾操作系统（运行在虚拟机上的操作系统）上使用`VixVM_LoginInGuest()`.

该文档有一个关于如何在来宾操作系统中调用程序的示例；这是一个完整的示例，展示了如何连接到虚拟机服务器、打开定义虚拟机的文件并打开它的电源。基本代码如下；不过，您应该阅读完整的示例。

```
// Authenticate for guest operations.   
jobHandle = VixVM_LoginInGuest(vmHandle,
  "vixuser", // userName
  "secret",  // password 
  0,         // options
  NULL,      // callbackProc
  NULL       // clientData
); 

err = VixJob_Wait(jobHandle, VIX_PROPERTY_NONE);    

if (VIX_OK != err) {
  // Handle the error.
  goto abort;
}

Vix_ReleaseHandle(jobHandle);

// Run the target program.  
jobHandle = VixVM_RunProgramInGuest(vmHandle,
  "c:\\myProgram.exe",
  "/flag arg1 arg2",
  0,                  // options
  VIX_INVALID_HANDLE, // propertyListHandle
  NULL,               // callbackProc
  NULL                // clientData
); 

err = VixJob_Wait(jobHandle, VIX_PROPERTY_NONE);

if (VIX_OK != err) {
  // Handle the error.
  goto abort;
}

Vix_ReleaseHandle(jobHandle); 
```

连接虚拟机服务器的部分如下。

```
jobHandle = VixHost_Connect(VIX_API_VERSION,
  VIX_SERVICEPROVIDER_VMWARE_SERVER,
  NULL,               // hostName
  0,                  // hostPort
  NULL,               // userName
  NULL,               // password
  0,                  // options
  VIX_INVALID_HANDLE, // propertyListHandle
  NULL,               // callbackProc
  NULL                // clientData
); 

err = VixJob_Wait(jobHandle, VIX_PROPERTY_JOB_RESULT_HANDLE, &hostHandle, VIX_PROPERTY_NONE);

if (VIX_OK != err) {
  // Handle the error.
  goto abort;
}

Vix_ReleaseHandle(jobHandle); 
```

# jquery - 如何从下往上迭代

> ID：12110674
> 
> 赞同：2
> 
> 时间：2012-08-24T13:46:22.073
> 
> 标签：jquery, dom

> **可能重复：**
> [JQuery .each() 向后](https://stackoverflow.com/questions/1394020/jquery-each-backwards)

使用 Jquery，我如何从下到上迭代？

例如，我有这个列表：

```
<ul>
<li>Item 1</li>
<li>Item 2</li>
<li>Item 3</li>
</ul> 
```

我想获得第 3 项，然后是第 2 项，然后是第 1 项...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T13:48:50.913

你可以这样：

```
$($("li")
        .get()
        .reverse())
        .each(function() {
         // some code

         }); 
```

# sql-server-2005 - 始终使用相同的字符串消息进行交叉连接

> ID：12110683
> 
> 赞同：0
> 
> 时间：2012-08-24T13:46:46.773
> 
> 标签：sql-server-2005, duplicates, cross-join, having-clause

我正在使用 Microsoft SQL Server 2005。

我想在输出中有一个表，其中包含一个关于交叉连接中重复值的列，一个表只包含一个具有相同字符串消息的列。我认为使用“字符串消息”进行交叉连接应该是正确的方法。

为什么以下脚本不起作用？

```
DECLARE @IN_CodesTable TABLE
   (
        CodesValues           NVARCHAR(60)
   )
INSERT INTO @IN_CodesTable VALUES('CODE_BB^&')
INSERT INTO @IN_CodesTable VALUES('CODE_1234')
INSERT INTO @IN_CodesTable VALUES('CODE_BB^&')
INSERT INTO @IN_CodesTable VALUES('CODE_$%^&')
INSERT INTO @IN_CodesTable VALUES('CODE_BB^&')
INSERT INTO @IN_CodesTable VALUES('CODE_BB^&')
INSERT INTO @IN_CodesTable VALUES('CODE_1234')

SELECT *
FROM   
(
SELECT DISTINCT CodesTable
FROM @IN_CodesTable
WHERE CodesTable IN
                    ( SELECT  CodesValues
                    FROM     @IN_CodesTable
                    GROUP BY CodesTable
                    HAVING   COUNT(*) > 1
                    )
)
CROSS JOIN
( 
    SELECT 'You have duplicates!' AS DupMessage
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T13:58:39.423

在几个地方，您使用`CodesTable`的是`CodesValues`. 此外，虽然`CROSS JOIN`可行，但简单地选择 DupMessage 作为附加值会更清楚一些，例如：

```
SELECT *, 'You have duplicates!' AS DupMessage
FROM (
    SELECT DISTINCT CodesValues
    FROM IN_CodesTable
    WHERE CodesValues IN (
        SELECT  CodesValues
        FROM IN_CodesTable
        GROUP BY CodesValues
        HAVING COUNT(*) > 1
    )
 ) X 
```

SqlFiddle[在这里](http://sqlfiddle.com/#!3/30e85/10)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T14:06:50.730

```
DECLARE @IN_CodesTable TABLE ( CodesValues NVARCHAR(60) ) 
INSERT INTO @IN_CodesTable VALUES
  ('CODE_BB^&'), ('CODE_1234'), ('CODE_BB^&'), ('CODE_$%^&'),
  ('CODE_BB^&'), ('CODE_BB^&'), ('CODE_1234') 

-- Display only values with duplicate rows.
select distinct CodesValues
  from @IN_CodesTable as CT
  where ( select count(42) from @IN_CodesTable where CodesValues = CT.CodesValues ) > 1

select distinct CodesValues
  from @IN_CodesTable as CT
  group by CodesValues
  having count(42) > 1

-- Display all values with duplicates indicated.
select distinct CodesValues,
  case when ( select count(42) from @IN_CodesTable where CodesValues = CT.CodesValues ) > 1 then 'Duplicates' else '' end as Flag
  from @IN_CodesTable as CT

select distinct CodesValues,
  case when count(42) > 1 then 'Duplicates' else '' end as Flag
  from @IN_CodesTable as CT
  group by CodesValues 
```

# iphone - NSString 的阴影效果

> ID：12110691
> 
> 赞同：0
> 
> 时间：2012-08-24T13:47:10.580
> 
> 标签：iphone, ios, ipad, nsstring, shadow

我想对 NSString 类型的文本应用阴影效果。虽然我了解如何将阴影效果应用于 UILabel 和其他视图元素，但我无法找到一种为文本添加阴影效果的方法。

我目前正在绘制如下文本：

```
NSString *text = @"Hello";
[text drawAtPoint:point width withFont:font minFontSize:22.0f actualFontSize:&actualFontSize lineBreakMode:UILineBreakModeTailTruncation baselineAdjustment:UIBaselineAdjustmentAlignBaselines]; 
```

我真的很感激任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T13:51:14.617

尝试`CGContextSetShadow()`为文本添加阴影

```
- (void)drawRect:(CGRect)rect 
{
NSString *string = @"Hello World!";

CGContextRef context = UIGraphicsGetCurrentContext();
CGContextSetShadow(context, CGSizeMake(20.0f, 20.0f), 10.0f);

[string drawAtPoint:CGPointMake(100.0f, 100.0f) withFont:[UIFont boldSystemFontOfSize:36.0f]];
} 
```

# apache - 从 Apache 配置中删除 /var/www/icons 别名

> ID：12110693
> 
> 赞同：8
> 
> 时间：2012-08-24T13:47:13.237
> 
> 标签：apache, webserver, vhosts, apache-config, apache2.2

我的 Web 服务器上有一个名为的目录`/var/www/icons`，它在我的 Apache 配置中也被称为别名，如下所示：

```
Alias /icons/ "/var/www/icons/" 
```

该目录包含许多 AFAIK 未使用的小型 PNG 和 GIF，以及一个 README 文件。

我可以通过注释掉这个别名来安全地从我的 Apache 配置中删除它吗？如果没有，我的应用程序的哪个领域可能会影响删除？

这个目录上可用的文档很少，我必须承认直到现在我从未遇到过它。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-24T13:53:27.870

大多数图标用于在目录列表中显示文件类型。如果您不使用此类列表，则可以安全地删除 alias + 文件。我这样做了，不要错过他们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T14:02:04.603

删除它肯定是安全的。其他 conf 文件可以引用 /icons（例如 autoindex 模块），但除了一些未发现的错误之外，不会发生任何令人讨厌的事情。

我的建议：扫描 access.log 文件以查看是否访问了以 /icons 为根的 url。删除别名并监视 error.log 文件中的 404 错误。

# android - 如何在android的集中布局内制作textview选框

> ID：12110696
> 
> 赞同：2
> 
> 时间：2012-08-24T13:47:20.253
> 
> 标签：android, android-layout, scroll, textview, marquee

我正在做一个应用程序，其中我在 LinearLayout 中有一个文本视图和一个图像视图。触摸线性布局将我们带到另一个活动。由于文本不适合文本视图，我想使文本视图内容选取框。我尝试了可能的方法，但它不起作用。xml内容如下。

```
<LinearLayout
    android:id="@+id/profile_pic_Layout"
    android:layout_width="fill_parent"
    android:layout_height="100dip"
    android:layout_margin="10dip"
    android:background="@color/blue_background" >

    <ImageView
        android:id="@+id/profile_pic_menu"
        android:layout_width="100dip"
        android:layout_height="100dip"
        android:contentDescription="@string/image"
        android:scaleType="centerCrop" />

    <TextView
        android:id="@+id/profile_name_text"
        android:layout_width="fill_parent"
        android:layout_height="30dip"
        android:layout_gravity="bottom"
        android:gravity="center"
        android:marqueeRepeatLimit="1"
        android:inputType="text"
        android:lines="1"
        android:duplicateParentState="true"
        android:scrollHorizontally="true"
        android:fadingEdge="horizontal"
        android:focusable="true"
        android:textColor="@android:color/white"
        android:textSize="20sp">
        <requestFocus android:focusable="true" 
            android:focusableInTouchMode="true"
            android:duplicateParentState="true"  /> 
    </TextView>
</LinearLayout> 
```

我还尝试通过使用设置代码中选择的文本视图，

```
profileNameTextView.setEllipsize(TruncateAt.MARQUEE);
profileNameTextView.setSelected(true); 
```

我认为这是因为父线性布局具有焦点。请帮我解决这个问题..！

谢谢大家..！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T13:56:46.010

显然您缺少该`android:ellipsize="marquee"`属性

这是一个简约的工作示例：

```
 <TextView
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:marqueeRepeatLimit="1"
        android:singleLine="true"
        android:ellipsize="marquee"
        android:focusable="true"
        android:focusableInTouchMode="true"
        android:text="HELLO HOW ARE YOU WHAT ARE YOU DOING TEST ANDROID IS WRITING TO YOU." /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-10T04:06:21.457

```
public class TextViewMarquee extends Activity {
private TextView tv;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    tv = (TextView) this.findViewById(R.id.mywidget);  
    tv.setSelected(true);  // Set focus to the textview
}
} 
```

带有文本视图的 xml 文件：

```
<RelativeLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent">
<TextView
    android:id="@+id/mywidget"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:lines="1"
    android:ellipsize="marquee"
    android:fadingEdge="horizontal"
    android:marqueeRepeatLimit="marquee_forever"
    android:scrollHorizontally="true"
    android:textColor="#ff4500"
    android:text="Simple application that shows how to use marquee, with a long text" /> 
```

# jquery - Colorbox 无法打开或添加 cbox 类

> ID：12110704
> 
> 赞同：1
> 
> 时间：2012-08-24T13:47:52.613
> 
> 标签：jquery, colorbox, anythingslider

我有一个`<a href="">`针对隐藏的`<div>`. 我正在将隐藏的 HTML 内容加载到弹出模式窗口中，但我的链接总是通过主页 (baseurl)。

[http://coolicebox.petersenuploads.co.uk/product.php?xProd=2&xSec=5](http://coolicebox.petersenuploads.co.uk/product.php?xProd=2&xSec=5)

请参阅选项面板中的链接（查看更多颜色）

看起来 cbox 类没有被添加到链接中，但我一辈子都看不到它为什么没有运行？代码在那里并被调用，但没有添加任何类，因此链接转到站点的根目录。

有任何想法吗？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T14:12:16.470

我不认为

```
$('.modal-inline').unbind('click').colorbox({transition:'elastic', speed:500, width:'80%', height:'50%', inline:true}); 
```

正在执行。我在它上面放了一个断点，它并没有停止。

由于某种原因，`$('.model-inline')`选择器没有找到任何要制作成颜色框的元素。那么你是在选择器已经执行之后动态添加元素吗？

如果您进入 Chrome 控制台（Windows 上为 ++）`Ctrl`并`Shift`输入`j`

```
$('.modal-inline').unbind('click').colorbox({transition:'elastic', speed:500, width:'80%', height:'50%', inline:true}); 
```

然后点击链接，就可以了！

另一个因素*可能*是因为该页面[无效](http://validator.w3.org/check?uri=http://coolicebox.petersenuploads.co.uk/product.php?xProd=2&xSec=5&charset=%28detect%20automatically%29&doctype=Inline&group=0)，但由于标记无效，我以前从未见过这种事情发生。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T19:48:58.020

使用 Chrome 的 DevTools 查看您的网站证实了@andyb 的断言：**没有事件侦听器附加**到类“modal-inline”的标签上。

为什么要在该链接上执行“取消绑定”方法？ColorBox 为您处理它自己的点击事件绑定。

*   凯文·M。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T11:14:01.910

到 document.ready() 时，该元素已在 HTML 中，但前面对“anything-slider”的调用存在问题。此后，我对其进行了如下评论，以在执行其他任何操作之前检查滑块是否存在。现在工作。感谢您的帮助和建议安迪，即使这不是解决方案。

```
$(document).ready(function () {
if($('#slider').length > 0) {
    $('#slider')
        .anythingSlider({
            navigationFormatter : function(index, panel){
                return ['Slab', 'Parking Lot', 'Drive', 'Glorius Dawn', 'Bjork?', 'Traffic Circle'][index - 1];
            },
            buildStartStop: false,
            buildNavigation: true,
            autoPlay: true
        })
        .anythingSliderFx({
            '.caption-top'    : [ 'caption-Top', '50px' ],
        })
}
//Add modal functionality where class is set
$('.modal-inline').colorbox({transition:'elastic', speed:500, width:'80%', height:'50%', inline:true});
$('.modal-image').colorbox({transition:'elastic', speed:500, width:'80%', height:'50%', inline:false});
$('.modal-image-square').colorbox({transition:'elastic', speed:500, width:'1000', height:'1000', inline:false});
}); 
```

# asp.net-mvc - MVC Remote Validation - Clear or set additional field errors

> ID：12110706
> 
> 赞同：4
> 
> 时间：2012-08-24T13:48:00.330
> 
> 标签：asp.net-mvc, reset, remote-validation

We have 2 input textfields on the screen whose combination makes up a valid entry. We are doing remote validation on both of them.

Our ViewModel:

```
[Remote("IsExampleValid", "Validation", AdditionalFields = "Field2")]
public int Field1 { get; set; }

[Remote("IsExampleValid", "Validation", AdditionalFields = "Field1")]
public int Field2 { get; set; } 
```

The problem is these still fire separately and do not truly act together like we need. For example, if I enter bad data in both of them to make an invalid entry then they both will have an error. If I change Field2 to make a valid combination, the remote validation method will get called and mark Field2 as valid. However, Field1 will still be invalid. Field1 should be valid though because they are a combination. Is there a better way to do 2 fields that make up a valid combination?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-22T05:43:09.770

[您可以使用Kiff 提供的](https://stackoverflow.com/a/17747858/114029)这段很棒的代码：

```
function initializeRemotelyValidatingElementsWithAdditionalFields($form) {
    var remotelyValidatingElements = $form.find("[data-val-remote]");

    $.each(remotelyValidatingElements, function (i, element) {
        var $element = $(element);

        var additionalFields = $element.attr("data-val-remote-additionalfields");

        if (additionalFields.length == 0) return;

        var rawFieldNames = additionalFields.split(",");

        var fieldNames = $.map(rawFieldNames, function (fieldName) { return fieldName.replace("*.", ""); });

        $.each(fieldNames, function (i, fieldName) {
            $form.find("[id$="+fieldName+"]").change(function () {
                 if ($element.is(':enabled'))
                 {
                     // force re-validation to occur
                     $element.removeData("previousValue");

                     $element.valid();
                 }
            });
        });
    });
} 
```

调用函数：

```
$(document).ready(function() {
    initializeRemotelyValidatingElementsWithAdditionalFields($("form"));
}); 
```

注意：我调整了该`$form.find`部分，以便它在使用[编辑可变长度列表时工作，ASP.NET MVC 2 样式](http://blog.stevensanderson.com/2010/01/28/editing-a-variable-length-list-aspnet-mvc-2-style/)在这种情况下元素`IDs`是前缀。我还添加了`$element.is(':enabled')`检查，以便仅当页面上当前启用了该元素时才会触发验证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-25T07:25:52.467

MVC 远程验证 - 清除或设置其他字段错误

```
public int Field1 { get; set; }

    [Remote("IsExampleValid", "Validation", AdditionalFields = "Field1")]
    public int Field2 { get; set; } 
```

jquery代码在这里

```
$('#Field1').on('change', function () {
       //code
        $('#Field2').removeData('previousValue');
    }); 
```

远程验证检查是否有效后，它的工作附加字段值更改

# html - 将样式表限制为一个标签和后代

> ID：12110708
> 
> 赞同：7
> 
> 时间：2012-08-24T13:48:07.037
> 
> 标签：html, css, styles, stylesheet

我想在我正在开发的某个网站上使用 twitter 引导程序。该网站需要一个预设模板用于页面的某些部分。

如果我包含 twitter 引导样式表，它会弄乱原始模板。

我想包含外部 bootstrap.cc 样式表，但使其仅适用于 class="mycontent" 的后代标签

```
<html>
<link href="original stylsheet.css">
<link href="bootstrap.css">
...
...
<div class="header">
original stlesheet to be used here
</div>
<div class="mycontent">
bootstrap css to work for all descendents of my content
</div> 
```

我知道一种方法是编辑 css 并在每个标签之前添加 .mycontent 。但我想知道是否有更聪明的解决方案

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-23T15:30:41.973

# 作用域 CSS

如果`scope`存在属性，则`<style>`仅适用于其父元素。

```
<div>
  <style scoped>
  /* your css here */
  <style>
  <!-- content -->
</div> 
```

它缺乏浏览器支持，但有一个 polyfill：[jQuery Scoped CSS 插件](https://github.com/thingsinjars/jQuery-Scoped-CSS-plugin)。

补充阅读：[使用 Scoped CSS 拯救一天](http://css-tricks.com/saving-the-day-with-scoped-css/)。

* * *

当前浏览器支持：[http ://caniuse.com/#feat=style-scoped](http://caniuse.com/#feat=style-scoped)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-24T13:55:22.297

如您所见，我可以看到您的代码：

```
<html>
<link rel="original stylsheet.css">
<link rel="bootstrap.css">
...
...
<div class="header">
original stlesheet to be used here
</div>
<div class="mycontent">
bootstrap css to work for all descendents of my content
</div> 
```

您正在使用错误的路径。
你应该试试`<link href="bootstrap.css">`
我希望你的问题会得到解决

# ruby-on-rails - 深层嵌套资源轨道

> ID：12110711
> 
> 赞同：1
> 
> 时间：2012-08-24T13:48:12.210
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

我知道不应该采用深层嵌套资源，但是我不知道如何将其正确转换为 1 级嵌套资源。如果存在干净的教程，请向我展示教程，我将学习它。如果不是那么请帮助解决我的问题。这是我的 route.rb

```
resources :article do
  resources :picture
  resources :comments do
    resources :repcomments
  end
end
resources :reports 
```

我可以做文章、图片、评论，但不确定如何处理第三级报告。想法是一篇文章可以有评论，并且可以将评论报告给管理层。一切都在文章#show页面中播放，这里是控制器

```
 def show
    @art = Article.find(params[:id])
    @comments = @art.comments.find(:all, :order => 'created_at DESC')
    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @art }
    end
  end 
```

这里是文章中的视图形式#show

```
<%= @art.title %>
<%= @art.content %>
Comment
<%= form_for [@art, current_customer.comments.new] do |f| %>
  <%= f.text_area :description %><br />
  <%= f.submit "Add Comment" %>
<% end %>
# End of form comments
<% @comments.each do |comment| %>
  <%= comment.description %>
  <div>Report</div>
  <%= form_for [@art, comment, repcomments.new] do |f| %>
    <%= f.text_area :body %><br />
    <%= f.submit "Report it" %>
  <% end %> 
<% end %> 
```

我得到了一个没有定义的方法，不知道如何处理它。提前致谢

这里是路由文件

```
 article_comment_repcomments GET    /articles/:article_id/comments/:comment_id/repcomments(.:format)          repcomments#index
                              POST   /articles/:article_id/comments/:comment_id/repcomments(.:format)          repcomments#create
 new_article_comment_repcomment GET    /articles/:article_id/comments/:comment_id/repcomments/new(.:format)      repcomments#new
edit_article_comment_repcomment GET    /articles/:article_id/comments/:comment_id/repcomments/:id/edit(.:format) repcomments#edit
     article_comment_repcomment GET    /articles/:article_id/comments/:comment_id/repcomments/:id(.:format)      repcomments#show
                              PUT    /articles/:article_id/comments/:comment_id/repcomments/:id(.:format)      repcomments#update
                              DELETE /articles/:article_id/comments/:comment_id/repcomments/:id(.:format)      repcomments#destroy 
```

这里的模型

```
class Repcomments < ActiveRecord::Base
  belongs_to :customer
  belongs_to :article
  attr_accessible :acknowledged, :body, :completed, :customer_id, :article_id
end 
```

在这里我的控制器repcomments

```
class RepcommentsController < ApplicationController
  # GET /repcomments
  # GET /repcomments.json
  def index
    @article = Article.find(params[:article_id])
    @comments = @articles.comments.find(params[:comment_id])
    @repcomments = Repcomment.all

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @repcomments }
    end
  end

  # GET /repcomments/1
  # GET /repcomments/1.json
  def show
    @article = Article.find(params[:article_id])
    @comments = @articles.comments.find(params[:comment_id])
    @repcomment = Repcomment.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render json: @repcomment }
    end
  end

  # GET /repcomments/new
  # GET /repcomments/new.json
  def new
    @article = Article.find(params[:article_id])
    @comments = @articles.comments.find(params[:comment_id])
    @repcomment = Repcomment.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @repcomment }
    end
  end

  # GET /repcomments/1/edit
  def edit
    @article = Article.find(params[:article_id])
    @comments = @articles.comments.find(params[:comment_id])
    @repcomment = @comments.repcomments.find(params[:id])
  end

  # POST /repcomments
  # POST /repcomments.json
  def create
    @article = Article.find(params[:article_id])
    @comments = @articles.comments.find(params[:comment_id])
    @repcomment = @comments.repcomments.build(params[:repcomment])

    respond_to do |format|
      if @repcomment.save
        format.html { redirect_to @repcomment, notice: 'Repcomment was successfully created.' }
        format.json { render json: @repcomment, status: :created, location: @repcomment }
      else
        format.html { render action: "new" }
        format.json { render json: @repcomment.errors, status: :unprocessable_entity }
      end
    end
  end

  # PUT /repcomments/1
  # PUT /repcomments/1.json
  def update
    @article = Article.find(params[:article_id])
    @comments = @articles.comments.find(params[:comment_id])
    @repcomment = @comment.repcomments.find(params[:id])

    respond_to do |format|
      if @repcomment.update_attributes(params[:repcomment])
        format.html { redirect_to @repcomment, notice: 'Repcomment was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @repcomment.errors, status: :unprocessable_entity }
      end
    end
  end

  # DELETE /repcomments/1
  # DELETE /repcomments/1.json
  def destroy
    @article = Article.find(params[:article_id])
    @comments = @articles.comments.find(params[:comment_id])
    @repcomment = @comments.repcomments.find(params[:id])
    @repcomment.destroy

    respond_to do |format|
      format.html { redirect_to repcomments_url }
      format.json { head :no_content }
    end
  end
end

NameError in Article#show
Showing /home/jean/rail/voix/app/views/articles/show.html.erb where line #70 raised:
undefined local variable or method `repcomments' for #<#<Class:0xaf24860>:0xaafe934> 
```

所以几乎是参考

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T15:46:09.213

只需查看您的代码，我就可以在您的路线中看到一个问题：`:article`并且`:picture`需要是复数形式。

```
resources :articles do
    resources :pictures
    resources :comments do
        resources :repcomments
    end
end
resources :reports 
```

此外，您不需要嵌套`:repcomments`在`:articles`. 除了您的路线中已有的内容之外，您还可以添加：

```
resources :comments do
    resources :repcomments #and remove the other "resources :repcomments"
end 
```

* * *

是的，你会`resources :comments`定义两次，但这很好。

如果你从来没有对文章范围之外的评论做任何事情，那么你可以这样写你的路线：

```
resources :comments, only: [] do
    resources :repcomments
end 
```

这样 Rails 不会生成默认的休息路线（没有 /comments，没有 /comments/:id 等）

# javascript - 源代码不显示

> ID：12110716
> 
> 赞同：2
> 
> 时间：2012-08-24T13:48:46.020
> 
> 标签：javascript, html

基本上，如果我在任何浏览器中右键单击并选择查看源代码，即使我可以清楚地看到页面上的内容（在 IE、Firefox、Chrome 上尝试过），代码也不会显示

如果我使用 Chrome/Firefox 的“检查元素”功能，我可以查看代码

* * *

这是我的 index.html 的相应代码：

```
 <!-- [TABLE] -->    
            <div id="centercol" align="center">
                <table id="table">

                </table>
            </div> 
```

我正在使用 appendChild() 在我的 javascript 中添加 tr/td

检查元素：http : [//i.imgur.com/pZBb5.png](http://i.imgur.com/pZBb5.png)

查看来源：http: [//i.imgur.com/W7pXm.png](http://i.imgur.com/W7pXm.png)

* * *

为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T13:51:12.970

查看源代码会看到硬代码/静态代码，检查 DOM 会显示生成的动态代码。您可以使用`innerHTML`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T13:51:33.673

“源代码”是从服务器发送的原始响应正文。当您检查元素时，它以序列化形式表示页面的实时状态。

例如，实际上只是从服务器发送这个：

```
<script> 
```

由于上述内容已被解析和序列化，因此在检查器中可能会变成这样：

```
<html><head><script></script></head><body></body></html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T13:55:49.740

**源代码**是原始文档，未经 JavaScript 修改

**Inspect 元素**向您展示了 DOM 的序列化，这基本上是在屏幕上直观表示的标记。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-24T13:51:48.180

发生这种情况是因为“viewsource”不运行 JavaScript。如果您的整个页面都是 JS，那么您只会看到非 JS 元素。

# javascript - 在网页上呈现 Microsoft Word 文档

> ID：12110719
> 
> 赞同：9
> 
> 时间：2012-08-24T13:48:51.583
> 
> 标签：javascript, web-applications, ms-word, latex

我正在设计一个 Web 应用程序，其中大部分网站将显示用户生成的文档。现在，我已经在网站上实现了 LaTeX 源代码和 pdf 渲染，但我仍然无法在网站上渲染 Microsoft Word 文件（.doc 和 .docx）。我环顾四周，发现了一个类似的问题（[here](https://stackoverflow.com/questions/8510148/render-a-microsoft-word-document-in-a-web-browser)），但从未得到回答。我想知道是否使用像 Google Docs 这样的基于 Web 的解决方案或使用 OpenOffice 在服务器上以编程方式执行它是可行的解决方案。不过，纯 JavaScript 解决方案将是理想的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T14:10:15.437

根据 Vikram 的回答，您可以使用[Google Docs Viewer](https://docs.google.com/viewer)来呈现文件。这样它应该适用于所有浏览器。

代替

```
<a href="doc1.doc" target="awindow">Doc 1</a> 
```

采用

```
<a href="http://docs.google.com/viewer?url=[URLToDoc1.doc]" target="awindow">Doc 1</a> 
```

但是您必须对 URL 进行 urlencode。例如，

```
http://research.google.com/archive/bigtable-osdi06.pdf 
```

变成

```
http%3A%2F%2Fresearch.google.com%2Farchive%2Fbigtable-osdi06.pdf 
```

您可以访问[https://docs.google.com/viewer](https://docs.google.com/viewer)以轻松生成链接。

而且，维克拉姆的代码又旧又丑。你应该使用类似的东西：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<title>Open Doc</title>
<style type="text/css">
/*<![CDATA[*/
.clear{clear:both;}
#list{float:left;margin-right:50px;}
#wrapper{overflow:hidden;}
#awindow{width:100%;height:440px;}
/*]]>*/
</style>
</head>
<body>
<ul id="list">
    <li><a href="http://docs.google.com/viewer?url=[URLToDoc1.doc]" target="awindow">Doc 1</a></li>
    <li><a href="http://docs.google.com/viewer?url=[URLToDoc2.docx]" target="awindow">Doc 2</a></li>
    <li><a href="http://docs.google.com/viewer?url=[URLToDoc3.doc]" target="awindow">Doc 3</a></li>
</ul>
<div id="wrapper">
  <iframe id="awindow" name="awindow" src="title.html"></iframe>
</div>
<div class="clear"></div>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T13:58:04.777

您是否已经尝试过这样的事情？：

```
<html>
<head>
<title>Open Doc</title>
</head>
<body>
<DIV align="CENTER">
<TABLE BORDER="1" CELLSPACING="1" CELLPADDING="1" WIDTH="100%">
<TR>
<TD WIDTH="25%" ALIGN="left" VALIGN="TOP">
<a href="doc1.doc" target="awindow">Doc 1</A><br>
<a href="doc2.docx" target="awindow">Doc 2</A><br>
<a href="doc3.doc" target="awindow">Doc 3</A>
</TD>
<TD WIDTH="75%" ALIGN="CENTER" VALIGN="TOP">
<iframe name="awindow" frameborder=2 width=580 height=440 src="title.html"></iframe>
</TD></TR></TABLE></CENTER>
</DIV>
</body>
</html> 
```

将 href 属性修改为服务器上放置这些文档的路径

# c# - 有没有一种方法可以在 C++ 应用程序和 C# 应用程序之间进行通信？

> ID：12110720
> 
> 赞同：2
> 
> 时间：2012-08-24T13:48:56.233
> 
> 标签：c#, c++

有没有一种方法，而不是使用服务器/客户端方法或文件保存/加载方法，我可以使用它在两个单独的 C++ 和 C# 应用程序之间传输对象？

实际上我想要做的是我在 C# 中创建项目的 GUI 部分并在 C++ 中创建项目的某些部分，并通过在这两个应用程序之间进行通信，我继续前进。

出于某些原因，我只想使用 C++ 控制台应用程序（我不知道如何在 C++ 中创建 DLL 以及我想知道当前可能性而不使用 DLL 的形式）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T13:55:46.023

如果它们确实必须是单独的项目，您可以使用[IPC 。](http://en.wikipedia.org/wiki/Inter-process_communication)

否则，请查看托管 C++。您可以围绕您的 C++ 代码创建一个包装器并直接从 C# 调用它。[这是一个教程...](http://blogs.artinsoft.net/Mrojas/archive/2008/12/19/Use-C++-in-C.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T13:53:13.097

当然，一个很好的方法是使用 dll。此外，您可以在 c++ 中创建命令行程序并在 c# 中调用它们。如果要返回复杂数据，则必须实现通信协议。

另一种方法是使用控制台应用程序在另一个线程中处理数据时打开其输入，这样您就可以处理通信流数据（就像您打开控制台一样）。当然，您需要解析输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T13:57:24.170

有几种方法可以实现两个任务之间的通信（尽管它们是用不同的编程语言开发的；-)）。

一种简单的方法是在每个应用程序中实现一个客户端/服务器类。这样，您可以在任务之间双向发送复杂数据并让它们进行通信。

# php - 解析序列化数组（Wordpress）

> ID：12110725
> 
> 赞同：2
> 
> 时间：2012-08-24T13:49:20.507
> 
> 标签：php, wordpress

我正在使用 wordpress，我的元键值之一是这样存储的：

```
a:1:{i:0;s:8:"Religion";} 
```

我试图找出 PHP 中解析这个的最简单方法，以便我可以以干净的方式提取“宗教”或任何元素。

希望这是有道理的-谢谢！！！

罗兰

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-24T13:50:07.203

这是一个序列化数组，[使用 unserialize()](http://dk2.php.net/unserialize)

```
$array = unserialize('a:1:{i:0;s:8:"Religion";}');
echo $array[0]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T13:53:32.200

这适用于 PHP 5.2 及更高版本：

```
list($thatWord) = unserialize($metaKeyValue); 
```

然后，您将字符串`"Religion"`in `$thatWord`。

您拥有的字符串：

```
a:1:{i:0;s:8:"Religion";} 
```

是一个序列化的数组。如果你从 wordpress 中检索它，你会得到一个`Array`而不是一个字符串。我假设您直接从数据库中提取它，因此您需要自己[`unserialize`^(*编写文档*)](http://php.net/unserialize)。

# ruby - 默认情况下，有没有办法为所有 Capistrano 任务设置 :except => { :no_release => true } ？

> ID：12110735
> 
> 赞同：0
> 
> 时间：2012-08-24T13:49:43.917
> 
> 标签：ruby, capistrano

我有一个应用服务器和另一个弹性搜索。

我设置了一个搜索角色如下：

```
role :search, 'search.server.com', :no_release => true 
```

我有 3 个不同的阶段 - 产品、阶段、实验

我希望所有命令都在应用服务器上运行，除了弹性搜索服务器上的一对。

看来我必须添加`:except => { :no_release => true }`所有任务才能获得此功能。

有替代方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T10:18:07.953

您可以设置多个角色并在需要的角色上指定 no_release。只能为指定的角色运行任务，例如：

```
role :search, "ex.com", :no_release => true
role :app, "ex.com"

task :run_for_both, :roles => [:app, :search] do
  run "echo 'my command'"
end

task :run_on_app, :roles => :app, :search do
  run "echo 'my command on app role'"
end 
```

# checkbox - 剔除复选框绑定选定值

> ID：12110738
> 
> 赞同：1
> 
> 时间：2012-08-24T13:49:44.937
> 
> 标签：checkbox, knockout.js

我正在学习淘汰赛，并试图建立一个页面来建立一个可选择的用户列表。JSFiddle： http: [//jsfiddle.net/Just/XtzJk/3/](http://jsfiddle.net/Just/XtzJk/3/)（我无法正确分配数据）。

当我调用 Controller 时，数据分配正在我的页面中工作，如下所示，它按预期绑定到控件

```
$.getJSON("/Wizard/GetUsers",function(allData){
        var mappedUsers = $.map(allData.AllUsers, function(item){return new User(item)});
        self.AllUsers(mappedUsers);
        if(allData.SelectedUsers != null){
        var mappedSelectedUsers = $.map(allData.SelectedUsers, function(item){return new User(item)});
        self.SelectedUsers(mappedSelectedUsers);}
    }); 
```

问题：

~~a.) 我写的 JSFiddle 有什么问题？~~得到它的工作。

~~b.）在我的代码中，我能够获取调用的选定复选框的函数，但我无法获取存储在函数中收到的“用户”参数中的值。在 Chrome JS 控制台中，我可以看到用户对象存储了正确的值，但我无法检索它。~~通过执行 ko.toJS() 得到这个。

谢谢。

编辑：好的，我的 JSFiddle 工作了，我必须在框架中选择 Knockout.js。更新的小提琴：http: [//jsfiddle.net/Just/XtzJk/5/](http://jsfiddle.net/Just/XtzJk/5/)

另外，为了获得选中的复选框的值，我做了

```
ko.toJS(user).userName 
```

但我想我会采取从列表中选择值的方法，然后单击将它们移动到另一个“选定”列表并从以前的列表中删除值。从这篇文章中得到了这个想法：[KnockoutJS：如何将一个 observableArray 添加到另一个？](https://stackoverflow.com/questions/9758490/knockoutjs-how-to-add-one-observablearray-to-another)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-24T16:23:52.477

好的，我想我已经找到了您需要的解决方案...

我首先设置了一个可观察的数组`selectedUserNames`，然后将其应用于如下`<li>`元素：

```
<input type="checkbox" 
       name="checkedUser" 
       data-bind="value: userName, checked:$root.selectedUserNames" /> 
```

[注意：`value`在声明绑定之前声明很重要`checked`，这让我有点……你每天都学到新东西！]

为什么要将一组 userName 值绑定到已检查的绑定？好吧，当一个数组被传递给`checked`绑定时，KO 会将每个复选框的值与数组中的值进行比较，`checked`并检查其值在该数组中的任何复选框。[（可能在KO 文档](http://knockoutjs.com/documentation/checked-binding.html)中解释得更好）

然后，当我为 SelectedUsers 留下 observableArray 时，我设置了一个手动订阅来填充它，如下所示：

```
self.selectedUserNames.subscribe(function(newValue) {
    var newSelectedUserNames = newValue;
    var newSelectedUsers = [];
    ko.utils.arrayForEach(newSelectedUserNames, function(userName) {
        var selectedUser = ko.utils.arrayFirst(self.AllUsers(), function(user) {
            return (user.userName() === userName);
        });
        newSelectedUsers.push(selectedUser);
    });
    self.SelectedUsers(newSelectedUsers);
}); 
```

[我最初试图为 selectedUserNames 设置一个依赖的 observable (ko.computed)，具有读写功能，但复选框没有它。]

此订阅函数检查新`selectedUserNames`数组，查找与该数组中的值匹配的用户`AllUsers`，`userName`并将`selectedUserNames`匹配`User`的对象推送到`SelectedUsers`数组……实际上，它会将每个匹配项推`User`送到临时数组，然后将该临时数组分配给`SelectedUsers`，但是目标已实现。该`SelectedUsers`数组现在将始终包含我们希望它包含的内容。

哦，我差点忘了……这是我创建的小提琴，所以你有完整的解决方案：http: [//jsfiddle.net/jimmym715/G2hxP/](http://jsfiddle.net/jimmym715/G2hxP/)

希望这会有所帮助，但如果您有任何问题，请告诉我

# c# - 检查 Dispatcher.CurrentDispatcher.Thread.ManagedThreadId 后的 CollectionView NotSupportedException

> ID：12110740
> 
> 赞同：1
> 
> 时间：2012-08-24T13:49:47.293
> 
> 标签：c#, wpf, multithreading, .net-4.0, task-parallel-library

我正在尝试使用`Task.Factory.StartNew()`来运行后台操作。部分后台操作会更新 ObservableCollection 中保存的对象。我正在使用从 ObservableCollection 派生的自定义类`OnCollectionChanged()`在集合中某个对象的属性发生更改时触发（请参阅[https://stackoverflow.com/a/5256827/62072](https://stackoverflow.com/a/5256827/62072)）。如果有`CollectionView`绑定到 ObservableCollection 那么我得到一个异常：

> > System.NotSupportedException：这种类型的 CollectionView 不支持从不同于 Dispatcher 线程的线程更改其 SourceCollection。

我试图避免这个异常，所以我添加了一些代码，只有`OnCollectionChanged()`在 UI 线程上运行时才会触发。但不知何故我仍然得到例外..

这是我的`ItemPropertyChanged()`方法：

```
void ItemPropertyChanged(object sender, PropertyChangedEventArgs e)
{
    var a = new NotifyCollectionChangedEventArgs(
        NotifyCollectionChangedAction.Reset);

    if (Thread.CurrentThread.ManagedThreadId
         == Dispatcher.CurrentDispatcher.Thread.ManagedThreadId)
    {
        OnCollectionChanged(a);
    }
} 
```

这是完整的例外：

```
System.AggregateException was unhandled
  Message=A Task's exception(s) were not observed either by Waiting on the Task or accessing its Exception property. As a result, the unobserved exception was rethrown by the finalizer thread.
  Source=mscorlib
  StackTrace:
       at System.Threading.Tasks.TaskExceptionHolder.Finalize()
       Message=This type of CollectionView does not support changes to its SourceCollection from a thread different from the Dispatcher thread.
      InnerException: System.NotSupportedException
           Source=PresentationFramework
           StackTrace:
                at System.Windows.Data.CollectionView.OnCollectionChanged(Object sender, NotifyCollectionChangedEventArgs args)
                at System.Collections.Specialized.NotifyCollectionChangedEventHandler.Invoke(Object sender, NotifyCollectionChangedEventArgs e)
                at System.Collections.ObjectModel.ObservableCollection`1.OnCollectionChanged(NotifyCollectionChangedEventArgs e)
                at SourceLog.Model.TrulyObservableCollection`1.ItemPropertyChanged(Object sender, PropertyChangedEventArgs e) in C:\github.com\tomhunter-gh\SourceLog\SourceLog.Model\TrulyObservableCollection.cs:line 41
                at System.ComponentModel.PropertyChangedEventHandler.Invoke(Object sender, PropertyChangedEventArgs e)
                at SourceLog.Model.LogEntry.OnPropertyChanged(String property) in C:\github.com\tomhunter-gh\SourceLog\SourceLog.Model\LogEntry.cs:line 44
                at SourceLog.Model.LogEntry.set_Read(Boolean value) in C:\github.com\tomhunter-gh\SourceLog\SourceLog.Model\LogEntry.cs:line 28
                at SourceLog.Model.LogEntry.<MarkAsReadAndSave>b__0() in C:\github.com\tomhunter-gh\SourceLog\SourceLog.Model\LogEntry.cs:line 53
                at System.Threading.Tasks.Task.InnerInvoke()
                at System.Threading.Tasks.Task.Execute()
           InnerException: 
```

当我明确检查我是时，异常为什么会抱怨我不在 Dispatcher 线程上？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T13:56:35.090

`Dispatcher.CurrentDispatcher`与 UI 线程无关，因为该属性的名称表明它为您提供了当前线程的调度程序。因此，您创建了一个始终返回 true 的检查。使用`Application.Current.Dispatcher`, 而不是忽略更改，您可以在所述调度程序上调用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T13:53:17.140

当您访问可观察集合时，您需要将上下文切换回 UI 线程。尝试

```
Action del = () => {YourCodeHere()};
Dispatcher.Invoke(del); 
```

# java - Glassfish 重新启动后 jdbcRealm 停止工作

> ID：12110742
> 
> 赞同：0
> 
> 时间：2012-08-24T13:49:50.853
> 
> 标签：java, glassfish, glassfish-3, jdbcrealm

经过多次尝试，我设法用 MySQL 配置 jdbcRealm。不幸的是，一段时间后发生了数据库错误（每个用户的连接太多），我被迫重新启动 Glassfish 3.1.1

重新启动后，我无法再使用基于我的 jdbcRealm 的基本身份验证，尽管我可以成功 ping 数据库。

我收到以下错误：

```
[#|2012-08-24T15:17:53.472+0200|FINE|glassfish3.1.1|javax.enterprise.system.core.security.com.sun.enterprise.security.auth.login|_ThreadID=127;_ThreadName=Thread-2;ClassName=com.sun.enterprise.security.auth.login.LoginContextDriver;MethodName=doPasswordLogin;|Logging in user [myUser] into realm: ShibUserPassAuth using JAAS module: jdbcRealm|#]

    [#|2012-08-24T15:17:53.478+0200|FINEST|glassfish3.1.1|javax.enterprise.system.core.security.com.sun.enterprise.security.auth.login|_ThreadID=127;_ThreadName=Thread-2;ClassName=com.sun.enterprise.security.auth.login.LoginContextDriver;MethodName=doPasswordLogin;|doPasswordLogin fails
javax.security.auth.login.LoginException: No LoginModules configured for jdbcRealm
    at javax.security.auth.login.LoginContext.init(LoginContext.java:273)
    at javax.security.auth.login.LoginContext.<init>(LoginContext.java:382)
    at javax.security.auth.login.LoginContext.<init>(LoginContext.java:459)
    at com.sun.enterprise.security.auth.login.LoginContextDriver.doPasswordLogin(LoginContextDriver.java:381)
    at com.sun.enterprise.security.auth.login.LoginContextDriver.login(LoginContextDriver.java:240)
    at com.sun.enterprise.security.auth.login.LoginContextDriver.login(LoginContextDriver.java:153)
    at com.sun.web.security.RealmAdapter.authenticate(RealmAdapter.java:512)
    at com.sun.web.security.RealmAdapter.authenticate(RealmAdapter.java:453)
    at org.apache.catalina.authenticator.BasicAuthenticator.authenticate(BasicAuthenticator.java:168)
    at com.sun.web.security.RealmAdapter.invokeAuthenticateDelegate(RealmAdapter.java:1326)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:551)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:623)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at com.sun.enterprise.web.WebPipeline.invoke(WebPipeline.java:98)
    at com.sun.enterprise.web.PESessionLockingStandardPipeline.invoke(PESessionLockingStandardPipeline.java:91)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:162)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:330)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:174)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:828)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:725)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1019)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:225)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)
|#]

[#|2012-08-24T15:17:53.479+0200|WARNING|glassfish3.1.1|javax.enterprise.system.container.web.com.sun.web.security|_ThreadID=127;_ThreadName=Thread-2;|WEB9102: Web Login Failed: com.sun.enterprise.security.auth.login.common.LoginException: Login failed: No LoginModules configured for jdbcRealm|#]

[#|2012-08-24T15:17:53.480+0200|WARNING|glassfish3.1.1|javax.enterprise.system.container.web.com.sun.web.security|_ThreadID=127;_ThreadName=Thread-2;|Exception
com.sun.enterprise.security.auth.login.common.LoginException: Login failed: No LoginModules configured for jdbcRealm
    at com.sun.enterprise.security.auth.login.LoginContextDriver.doPasswordLogin(LoginContextDriver.java:394)
    at com.sun.enterprise.security.auth.login.LoginContextDriver.login(LoginContextDriver.java:240)
    at com.sun.enterprise.security.auth.login.LoginContextDriver.login(LoginContextDriver.java:153)
    at com.sun.web.security.RealmAdapter.authenticate(RealmAdapter.java:512)
    at com.sun.web.security.RealmAdapter.authenticate(RealmAdapter.java:453)
    at org.apache.catalina.authenticator.BasicAuthenticator.authenticate(BasicAuthenticator.java:168)
    at com.sun.web.security.RealmAdapter.invokeAuthenticateDelegate(RealmAdapter.java:1326)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:551)
    at org.apache.catalina.core.StandardPipeline.doInvoke(StandardPipeline.java:623)
    at org.apache.catalina.core.StandardPipeline.invoke(StandardPipeline.java:595)
    at com.sun.enterprise.web.WebPipeline.invoke(WebPipeline.java:98)
    at com.sun.enterprise.web.PESessionLockingStandardPipeline.invoke(PESessionLockingStandardPipeline.java:91)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:162)
    at org.apache.catalina.connector.CoyoteAdapter.doService(CoyoteAdapter.java:330)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:231)
    at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:174)
    at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:828)
    at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:725)
    at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1019)
    at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:225)
    at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
    at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
    at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
    at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
    at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
    at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
    at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
    at java.lang.Thread.run(Thread.java:722)
Caused by: javax.security.auth.login.LoginException: No LoginModules configured for jdbcRealm
    at javax.security.auth.login.LoginContext.init(LoginContext.java:273)
    at javax.security.auth.login.LoginContext.<init>(LoginContext.java:382)
    at javax.security.auth.login.LoginContext.<init>(LoginContext.java:459)
    at com.sun.enterprise.security.auth.login.LoginContextDriver.doPasswordLogin(LoginContextDriver.java:381)
    ... 29 more 
```

重启期间可能发生了什么变化？我阅读了所有与 jdbcRealm 相关的 Stack 文章，并且我相信我已经正确配置了所有 jdbc 连接器、安全领域和数据表。它在重新启动之前工作。

更新 1 @Nick Wilson

我的 {GLASS_HOME}/glassfish/domains/domain1/config/login.conf

```
/*
 * DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS HEADER.
 *
 * Copyright (c) 2004-2010 Oracle and/or its affiliates. All rights reserved.
 *
 * The contents of this file are subject to the terms of either the GNU
 * General Public License Version 2 only ("GPL") or the Common Development
 * and Distribution License("CDDL") (collectively, the "License").  You
 * may not use this file except in compliance with the License.  You can
 * obtain a copy of the License at
 * https://glassfish.dev.java.net/public/CDDL+GPL_1_1.html
 * or packager/legal/LICENSE.txt.  See the License for the specific
 * language governing permissions and limitations under the License.
 *
 * When distributing the software, include this License Header Notice in each
 * file and include the License file at packager/legal/LICENSE.txt.
 *
 * GPL Classpath Exception:
 * Oracle designates this particular file as subject to the "Classpath"
 * exception as provided by Oracle in the GPL Version 2 section of the License
 * file that accompanied this code.
 *
 * Modifications:
 * If applicable, add the following below the License Header, with the fields
 * enclosed by brackets [] replaced by your own identifying information:
 * "Portions Copyright [year] [name of copyright owner]"
 *
 * Contributor(s):
 * If you wish your version of this file to be governed by only the CDDL or
 * only the GPL Version 2, indicate your decision by adding "[Contributor]
 * elects to include this software in this distribution under the [CDDL or GPL
 * Version 2] license."  If you don't indicate a single choice of license, a
 * recipient has the option to distribute your version of this file under
 * either the CDDL, the GPL Version 2 or to extend the choice of license to
 * its licensees as provided above.  However, if you add GPL Version 2 code
 * and therefore, elected the GPL Version 2 license, then the option applies
 * only if the new code is made subject to such option by the copyright
 * holder.
 */

fileRealm {
    com.sun.enterprise.security.auth.login.FileLoginModule required;
};

ldapRealm {
    com.sun.enterprise.security.auth.login.LDAPLoginModule required;
};

solarisRealm {
    com.sun.enterprise.security.auth.login.SolarisLoginModule required;
};

jdbcRealm {
    com.sun.enterprise.security.auth.login.JDBCLoginModule required;
};

jdbcDigestRealm {
    com.sun.enterprise.security.auth.login.JDBCDigestLoginModule required;
};
pamRealm {
    com.sun.enterprise.security.auth.login.PamLoginModule required;
}; 
```

更新 2

我发现，我没有提到正在激活基本身份验证。用户像以前一样收到弹出登录窗口，但现在每次登录尝试都无法进行身份验证并接收上面列出的堆栈跟踪。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-04T13:38:41.640

前段时间，这个问题在[其他线程中已解决](https://stackoverflow.com/questions/12284583/all-glassfish-login-modules-stopped-working-after-container-reboot)

第三方应用程序之一正在加载它自己的 login.conf 文件，该文件是在部署和 glassfish 重新启动后加载的，因此破坏了以前的 JAAS 配置

# python - 在 Python 中，使用 win32api 不会设置正确的日期

> ID：12110748
> 
> 赞同：2
> 
> 时间：2012-08-24T13:50:32.340
> 
> 标签：python, windows, winapi, time

我正在尝试使用以下代码设置系统日期（而不是时间）。我想将当前时间设置为新日期。以下是示例代码，我发现更改后时间不正确。

```
day = 20
month = 3
year = 2010

timetuple = time.localtime()
print timetuple
print timetuple[3], timetuple[4], timetuple[5]
win32api.SetSystemTime(year, month, timetuple[6]+1, 
    day, timetuple[3], timetuple[4], timetuple[5], 1) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T14:03:24.177

您正在从`localtime`时间戳设置系统时间。后者针对本地时区进行了调整，同时`SetSystemTime` [要求您使用 UTC timezone](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724942%28v=vs.85%29.aspx)。

改用[`time.gmtime()`](http://docs.python.org/library/time.html#time.gmtime)：

```
tt = time.gmttime()
win32api.SetSystemTime(year, month, 0, day, 
    tt.tm_hour, tt.tt_min, tt.tt_sec, 0) 
```

然后，您还不必处理您现在是否处于夏令时 (DST)，而不是在 3 月时您将处于冬季。

或者，您可以使用[`datetime.datetime.utcnow()`调用](http://docs.python.org/library/datetime.html#datetime.datetime.utcnow)并获得毫秒参数作为奖励：

```
import datetime
tt = datetime.datetime.utcnow().time()
win32api.SetSystemTime(year, month, 0, day,
    tt.hour, tt.minute, tt.second, tt.microsecond//1000) 
```

请注意，我在两个示例中都将工作日项目设置为 0；调用时被忽略`SetSystemTime`。如果它*没有*被忽略，那么您的代码示例的值错误；Python 值的范围从周一到周日的 0 到 6，而 Win32 API 需要从*周日到周六*的 1 到 7 。您必须添加 2 并使用模 7：

```
win32_systemtime_weekday = (python_weekday + 2) % 7) 
```

# html - 使用 CSS 生成不间断的内容

> ID：12110749
> 
> 赞同：0
> 
> 时间：2012-08-24T13:50:36.927
> 
> 标签：html, css

即使宽度减小，我也想随时将字段和图标（问号）保持在同一行。（最好使用 CSS）

我尝试了各种选项，例如`white-space: nowrap`将它们放在相同的位置`<div/>`，但没有成功。

![在此处输入图像描述](../Images/753f271f9118822d1c2d4d86934668a8.png)

**编辑**

我的 HTML 标记类似于以下内容：

```
<ul data-role="listview" >
            <li data-role="fieldcontain">
                <div>
                    <label for="name">*Email</label>
                    <input type="text" name="name" id="name" />
                    <img src="help.png" title="title" alt="help"/>
                </div>
            </li>
        </ul> 
```

我在 jQuery Mobile 中使用 HTML5。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T14:12:53.757

`white-space: nowrap`对元素没有影响，它只是告诉浏览器不要拆分纯文本节点。

要实现您想要的，您需要使`div`包装所有内容足够宽以在一行中显示所有内容。在一般情况下，如果没有 JavaScript，这并不容易实现，因为 CSS 仅对对齐多个元素提供基本支持。

解决方案：

1.  使`div`宽度如此之大，以至于它始终能够包含三个元素。由于标签的原因，这很难，如果您希望输入字段增长（= 使用所有可用空间），这是不可能的。

2.  给出`div`一个足够宽以包含图像的右边距，然后将其绝对定位在空白空间中。缺点：很难垂直对齐图像。

3.  完美运行但没人愿意听到的解决方案：使用表格，因为表格行可以满足您的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T14:18:58.223

你实际上可以尝试几件事。最丑的版本是桌子。它也是最简单的一种。它看起来像这样。

```
 <table>
         <tr>
             <td><label for="name">*Email</label></td>
             <td><input type="text" name="name" id="name" /></td>
             <td><img src="help.png" title="title" alt="help"/></td>
         </tr>
     </table> 
```

您也可以尝试在问号样式属性中使用 CSS 中的属性内联块。它强制问号与前一个元素保持在同一行。

```
display: inline-block; 
```

希望这可以帮助你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T14:18:25.717

这并不漂亮，但是当您使用不间断空间时会发生什么？

```
<input type="text" name="name" id="name"
/>&nbsp;<img src="help.png" title="title" alt="help"/> 
```

请注意，我将右括号移到下一行以尝试保持代码的某种顺序。不过还是很丑。

好处是它是“语义的”，因为您正在指示浏览器这两个内联内容属于一起。

# java - Apache POI xls 文件错误

> ID：12110750
> 
> 赞同：0
> 
> 时间：2012-08-24T13:50:37.823
> 
> 标签：java, apache-poi, xls

我想同时阅读`xls`和`xlsx`文件格式。它适用于格式，但在上传文件`xlsx`时出现以下错误。`xls`

### 代码：

```
try {

    FileInputStream fileInputStream = new FileInputStream("/apps/" + fileName);
    //POIFSFileSystem fsFileSystem = new POIFSFileSystem(fileInputStream);

    Workbook workBook = WorkbookFactory.create(OPCPackage.open(fileInputStream));
    //XSSFWorkbook workBook1 = new XSSFWorkbook();
    Sheet ssSheet = workBook.getSheetAt(0); 

    Iterator rowIterator = ssSheet.rowIterator();

    while (rowIterator.hasNext()) {
        Row ssRow = (Row) rowIterator.next();
        Iterator iterator = ssRow.cellIterator();
        List cellTempList = new ArrayList();
        while (iterator.hasNext()) {
            Cell ssCell = (Cell) iterator.next();
            cellTempList.add(ssCell);
        }
        cellDataList.add(cellTempList);
    }
} catch (Exception e) {
    e.printStackTrace();
} 
```

### 错误：

```
org.apache.poi.openxml4j.exceptions.InvalidFormatException: Package should contain a content type part [M1.13]
      at org.apache.poi.openxml4j.opc.ZipPackage.getPartsImpl(ZipPackage.java:148)
      at org.apache.poi.openxml4j.opc.OPCPackage.getParts(OPCPackage.java:623)
      at org.apache.poi.openxml4j.opc.OPCPackage.open(OPCPackage.java:230) 
```

请帮忙。

-谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T14:53:21.343

我认为您的问题是由于您尝试使用 构建工作簿`OPCPackage`，即使您使用`WorkbookFactory`. `OPCPackage`“解压缩”您`.xlsx`的文件以便能够读取其中的 xml 文件，但这不适用于 HSSF，因为它是二进制文件。

我的建议是您使用另一个构造函数，例如

`WorkbookFactory.create(InputStream input)`

我想它应该可以正常工作。

# java - 有没有办法使用 Cucumber-JVM 开发 Java 1.5 应用程序？

> ID：12110751
> 
> 赞同：0
> 
> 时间：2012-08-24T13:50:43.027
> 
> 标签：java, java-6, java-5, cucumber-jvm

Cucumber-JVM 依赖于 Java 1.6

我的客户端应用程序在 Java 1.5 上运行，目前无法更改

有谁知道使用 Cucumber-JVM 来锻炼我客户的应用程序的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T07:37:34.403

我还在 Cukes 邮件列表 (https://groups.google.com/forum/#!topic/cukes) 上发布了这个问题，在那里我得到了 Aslak Hellesøy（CUcumber 的创建者）的回复：

我：有没有什么*合理*的方法可以使用 Java 1.6 下构建的 Cucumber-JVM 来开发必须在 JRE 1.5 上运行的 Java 应用程序？

Aslak Hellesøy：简短回答：否。 详细回答：尝试并分享您遇到的问题，然后我们可以讨论是否可以解决这些问题。

# linq - Entity 和 Linq 的转换错误

> ID：12110752
> 
> 赞同：0
> 
> 时间：2012-08-24T13:50:43.823
> 
> 标签：linq, entity-framework

我得到了错误

```
cannot implicity convert type 'System.Linq.IQueryable<EntityNetimoveis.San_Imovel>' to 'EntityNetimoveis.San_Imovel' An Explicit conversion exists (are you missing a cast ?) 
```

当我尝试以下代码时会发生这种情况

```
EntityNetimoveis.San2011Entities db = new EntityNetimoveis.San2011Entities();
EntityNetimoveis.San_Imovel im = db.San_Imovel.Where(a => a.Credenciada_Id == 10); 
```

我必须进行哪种类型的转换？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T13:54:02.097

```
EntityNetimoveis.San_Imovel im = db.San_Imovel.Where(a => a.Credenciada_Id == 10); 
```

im 的类型是 an，`IQueryable<EntityNetimoveis.San_Imovel>`因为您正在运行 where 查询并且可能有多个结果。如果您希望第一个结果与您的查询匹配，您应该使用 .FirstOrDefault()。尝试将您的代码更改为：

```
EntityNetimoveis.San_Imovel im = db.San_Imovel.FirstOrDefault(a => a.Credenciada_Id == 10); 
```

如果您想返回多个实体并处理它们，比如说使用 foreach 循环，那么您需要将返回值的类型更改为`IEnumerable<Netimoveis.San_Imovel>`. 请参见以下示例：

```
IEnumerable<EntityNetimoveis.San_Imovel> ims = db.San_Imovel.Where(a => a.Credenciada_Id == 10); 
```

您可以使用以下内容：

```
foreach(var im in ims) {
    // your code goes here
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T13:53:45.483

如果 lambda 可以返回多条记录：

```
var imList = db.San_Imovel.Where(a => a.Credenciada_Id == 10).ToList(); 
```

# php - if条件在php中动态添加条件

> ID：12110758
> 
> 赞同：5
> 
> 时间：2012-08-24T13:51:00.680
> 
> 标签：php

我正在尝试在 if 条件中动态添加条件。但它不起作用。请帮我解决问题。

我正在尝试这样的代码

```
 $day_difference = "some integer value";

  if(sheduled_time == 'evening'){
        $condition = '>';
    }else{
      $condition = '==';
    } 
```

然后

```
if($day_difference.$condition.  0){ 
  echo "something";       
 }else{
   echo "h";
 } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T13:59:19.223

杰拉德解决方案的替代方案；我建议您使用一个使用 switch-case 操作验证输入的函数：

```
function evaluate ($var1, $operator, $var2)
{
    switch $operator
    {
         case: '<': return ($var1 < $var2);
         case: '>': return ($var1 > $var2);
         case: '==': return ($var1 == $var2);
    }
    return null;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-24T13:53:32.093

你需要的是[`eval()`](http://tw2.php.net/manual/en/function.eval.php)方法。

IE

```
$var1 = 11;
$var2 = 110;
$cond1 = '$var1 > $var2';
$cond2 = '$var1 < $var2';

if(eval("return $cond1;")){
   echo $cond1;
}

if(eval("return $cond2;")){
   echo $cond2;
} 
```

**如下文所述，使用此方法时应采取必要的预防措施！**

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-24T14:00:17.423

这不是这样做的方法。
只需定义一个`true`在满足所需条件时返回的函数。
例如，我们可以定义`decide`接收两个参数的函数，`$day_difference`并且`$scheduled_time`：

```
function decide($day_difference, $scheduled_time)
{
    if($scheduled_time == 'evening')
    {
        return $day_difference > 0;
    }
    else
    {
        return $day_difference == 0;
    }
} 
```

并像这样使用它：

```
if( decide($day_difference, $scheduled_time) )
{ 
    echo "something";       
}
else
{
    echo "h";
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-24T14:09:20.943

根据您的要求，这可以使用 PHP`eval()`函数来完成，我不建议仅在必要时使用它。

你可以检查[eval 什么时候在 php 中是邪恶的？](https://stackoverflow.com/questions/951373/when-is-eval-evil-in-php)

您可以改用以下脚本：

```
if(  $sheduled_time == 'evening' && $diff > 0 )
{
    echo "This is the Evening and the Difference is Positive";
}
else if($diff == 0)
{
    echo "This is not evening";
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-25T11:12:07.130

谢谢你帮我解决我的问题

我用另一种方式解决了这个问题

```
 $day_difference = "some integer value";

 $var1 = false ;
if($sheduled_time == 'evening_before'){ 
    if($day_difference > 0 ){ 
        $var1  = true ;
    }
}else{
    if($day_difference == 0 ){ 
        $var1  = true ;
    }
}

if($var1 === true){ 
  echo "something";       
}else{
  echo "h";
} 
```

# c# - 将 T 转换为布尔值，反之亦然

> ID：12110759
> 
> 赞同：10
> 
> 时间：2012-08-24T13:51:01.093
> 
> 标签：c#, casting, type-conversion

我有以下字符串扩展方法能够做到这一点，`("true").As<bool>(false)` 特别是对于布尔值，它将用于`AsBool()`进行一些自定义转换。不知何故，我不能从 T 转换为 Bool ，反之亦然。我使用以下代码让它工作，但它似乎有点矫枉过正。

**这是关于这一行的：**
`(T)Convert.ChangeType(AsBool(value, Convert.ToBoolean(fallbackValue)), typeof(T))`
**我宁愿使用以下内容，但它不会编译：**
`(T)AsBool(value, (bool)fallbackValue), typeof(T))`

我错过了什么还是这是最短的路要走？

```
 public static T As<T>(this string value)
    {
        return As<T>(value, default(T));
    }
    public static T As<T>(this string value, T fallbackValue)
    {
        if (typeof(T) == typeof(bool))
        {
            return (T)Convert.ChangeType(AsBool(value,
                                                Convert.ToBoolean(fallbackValue)),
                                                typeof(T));
        }
        T result = default(T);
        if (String.IsNullOrEmpty(value))
            return fallbackValue;
        try
        {
            var underlyingType = Nullable.GetUnderlyingType(typeof(T));
            if (underlyingType == null)
                result = (T)Convert.ChangeType(value, typeof(T));
            else if (underlyingType == typeof(bool))
                result = (T)Convert.ChangeType(AsBool(value,
                                                Convert.ToBoolean(fallbackValue)),
                                                typeof(T));
            else
                result = (T)Convert.ChangeType(value, underlyingType);
        }
        finally { }
        return result;
    }
    public static bool AsBool(this string value)
    {
        return AsBool(value, false);
    }
    public static bool AsBool(this string value, bool fallbackValue)
    {
        if (String.IsNullOrEmpty(value))
            return fallbackValue;
        switch (value.ToLower())
        {
            case "1":
            case "t":
            case "true":
                return true;
            case "0":
            case "f":
            case "false":
                return false;
            default:
                return fallbackValue;
        }
    } 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-24T13:59:20.190

您可以将其转换为`object`然后转换为`T`：

```
if (typeof(T) == typeof(bool))
{
  return (T)(object)AsBool(value, Convert.ToBoolean(fallbackValue));
} 
```

# osx-mountain-lion - Mountain Lion，将 $PATH 导出到 .bash_profile，权限被拒绝？

> ID：12110761
> 
> 赞同：3
> 
> 时间：2012-08-24T13:51:09.023
> 
> 标签：osx-mountain-lion

我可以做这个：

```
sudo nano .bash_profile 
```

但是当我这样做时：

```
sudo echo 'export PATH="$HOME/.rbenv/bin:$PATH"' >> ~/.bash_profile 
```

我收到此错误消息：

```
-bash: /Users/mycomputer/.bash_profile: Permission denied 
```

当我执行 ls -al 时：

```
-rw-r--r--   1 root         staff     27 10 Aug 12:22 .bash_profile 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T13:56:18.160

快速修复：执行“sudo bash”，实际承担 root 权限，然后执行 echo。它会起作用的。sudo echo 仍然使用你的真实 uid，所以它失败了。

# php - 如何从字符串中删除所有 ASCII 码

> ID：12110771
> 
> 赞同：1
> 
> 时间：2012-08-24T13:51:33.550
> 
> 标签：php, character-encoding, ascii

我的句子包括[ASCII](http://en.wikipedia.org/wiki/ASCII)字符代码，例如

```
&#x0022;&#x0023;&#x0024;&#x0025; 
```

如何删除所有 ASCII 码？

我尝试了`strip_tags()`、`html_entity_decode()`和`htmlspecialchars()`，但它们不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T14:13:46.200

如果您不想要返回值，您可以运行它：

```
preg_replace('/(&#x[0-9]{4};)/', '', $text); 
```

但请注意。这基本上是一个 nuker 并且 HTML 实体的工作方式我相信这会干扰你的字符串的其他部分。我建议将它们留在个人中并将它们编码为@hakra 显示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T14:34:57.023

您是否尝试删除解析为非 ASCII 字符的实体？如果这是您想要的，您可以使用以下代码：

```
$str = '&#x0022; &#x0023; &#x0024; &#x0025; &#x7414;'; // " # $ % 琔
// decode entities
$str = html_entity_decode($str, ENT_QUOTES, 'UTF-8');
// remove non-ascii characters
$str = preg_replace('/[^\x{0000}-\x{007F}]/u', '', $str); 
```

或者

```
// decode only iso-8859-1 entities
$str = html_entity_decode($str, ENT_QUOTES, 'iso-8859-1');
// remove any entities that remain
$str = preg_replace('/&#(x[0-9]{4}|\d+);/', '', $str); 
```

如果这不是你想要的，你需要澄清这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T14:07:04.407

如果您手头有多字节字符串扩展名，则可以使用：

```
$string = '&#x0022;&#x0023;&#x0024;&#x0025;';
mb_convert_encoding($string, 'UTF-8', 'HTML-ENTITIES'); 
```

这确实给出了：

```
"#$% 
```

松散相关的是：

*   [PHP DomDocument 无法处理 utf-8 字符 (☆)](https://stackoverflow.com/a/11310258/367456)

* * *

使用 DOM 扩展，您可以加载它并将其转换为字符串，这可能有助于更好地处理 HTML 元素等：

```
echo simplexml_import_dom(@DomDocument::loadHTML('&#x0022;&#x0023;&#x0024;&#x0025;'))->xpath('//body/p')[0]; 
```

哪个输出：

```
"#$% 
```

如果它包含 HTML，您可能需要导出该元素的内部 html，这在其他答案中进行了解释：

*   [DOMDocument：如何将内部 HTML 作为由换行符分隔的字符串？](https://stackoverflow.com/questions/7222453/domdocument-how-to-get-innerhtml)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-24T18:01:08.840

要从字符串中删除日文字符，您可以使用以下代码：

```
// Decode the text to get correct UTF-8 text:
$text = html_entity_decode($text, ENT_QUOTES, 'UTF-8');

// Use the UTF-8 properties with `preg_replace` to remove all Japanese characters
$text = preg_replace('/\p{Katakana}|\p{Hiragana}|\p{Han}/u', '', $text); 
```

**文档**：

[Unicode 字符属性](http://fr.php.net/manual/en/regexp.reference.unicode.php)
[Unicode 脚本](http://www.regular-expressions.info/unicode.html)

> 有些语言由多个脚本组成。没有日语 Unicode 脚本。相反，Unicode 提供平假名、片假名、韩文和拉丁文脚本，这些脚本通常由日本文档组成。

[试试这里的代码](http://codepad.viper-7.com/gWkSSH)

# javascript - 数组类型被拾取为数组值

> ID：12110772
> 
> 赞同：4
> 
> 时间：2012-08-24T13:51:34.657
> 
> 标签：javascript, arrays, tridion, tridion-2011

我有一些简单的 Javascript 循环遍历一组项目（Tridion 用户组）来检查用户是否是特定组的成员。

我可以轻松地围绕下面显示的问题进行编码（请参阅`&& extensionGroup !== 'true'`），但我想了解为什么`isArray`=`true`被视为数组中的一个*值*- 有什么想法吗？

下面的屏幕截图表明该值`extensionGroups`已被设置

```
var extensionGroups = ["NotEvenARealGroup", "Author", "ExampleGroupAfterOneUserIsActuallyIn"]; 
```

但将`isArray`值作为第四个值返回？

*更新以显示更清晰的图像*

![Firebug - 对象](../Images/37f0f8c571030867cfd1e162c590f41f.png)

![萤火虫 - 代码](../Images/3489064d6f95794d586820d637cbba0f.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-24T13:55:32.033

您正在使用`for in`迭代数组；不要那样做。使用`for`（或`forEach`）：

```
for(var i = 0; i < extensionGroups.length; i++) {
    var extensionGroup = extensionGroups[i];
    // ...
} 
```

失败的原因`for in`是用于在 JavaScript 中迭代对象的属性。以这种方式迭代数组意味着您会获得分配给它的任何其他内容，例如此属性或`length`.

如果你能够使用`Array#forEach`，这里可能最合适：

```
extensionGroups.forEach(function(extensionGroup) {
    // ...
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T14:02:21.243

`For..in`，从技术上讲，不会遍历值。它遍历属性名称。在数组中，值是属性，在引擎盖下。因此，当您对它们进行迭代时，`for..in`您会得到类似的时髦东西。

这突出了我的下一点：**不要使用`for..in`**. 不要将它用于数组 - 真的不要将它用于任何事情。好的——也许这有点过分了。这个怎么样：如果你觉得有必要使用`for..in`，在你做之前仔细想想它是否合理。

# mysql - 本地 shell 中的 ssh 连接和远程输出

> ID：12110775
> 
> 赞同：0
> 
> 时间：2012-08-24T13:51:46.920
> 
> 标签：mysql, bash, shell, ssh

我想远程运行本地命令文件并在我的 shell 窗口中本地获取输出。

实际上该命令是远程执行的，但我在本地 shell/控制台窗口中看不到结果。

关于如何实现以下命令的任何想法？

```
ssh user@host 'bash -s' < /Users/daniel/bin/bash/fz_multiple_db_connections.sh 
```

其中 fz_multiple_db_connections.sh 包含：

```
#!/bin/bash
connections=(
             'mysql -u dbuser__name      --password=passw   dbname ' 
             'mysql -u dbuser__name1     --password=passw1  dbname1')

for f in "${connections[@]}"
do
    echo `${f}`
    echo `mysql show tables`
    echo `mysql exit`
done
exit 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T14:42:25.983

我认为您可能需要`ssh -t ....`分配一个 tty。严格写入`stdout`或在`std::cout`没有. _`-t``/dev/tty``-t``ssh`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T13:54:05.857

-v 详细输出

[http://docstore.mik.ua/orelly/networking_2ndEd/ssh/ch07_03.htm](http://docstore.mik.ua/orelly/networking_2ndEd/ssh/ch07_03.htm)

# objective-c - 一次显示一定数量的行，点击按钮，显示更多

> ID：12110781
> 
> 赞同：0
> 
> 时间：2012-08-24T13:52:13.050
> 
> 标签：objective-c, ios, uitableview, loaddata

我很坚持这个问题。我有一个 NSArray *list 包含来自 plist 文件的 70 个元素。现在我需要将它们填充到 UITableView。我想要的是一次显示 20 个项目，然后单击第 21 个单元格以显示另外 20 个 ..然后按第 41 个单元格以显示另外 20 个项目...等等，直到所有 72 个单元格显示..

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
self.tableView.separatorStyle = UITableViewCellSeparatorStyleNone;

    return 20;

}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath     *)indexPath
{
static NSString *CellIdentifier = @"cell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

static NSString *addCellID = @"addMoreCell";
UITableViewCell *addCell = [tableView dequeueReusableCellWithIdentifier:addCellID];

if (indexPath.row == 0) {
    static NSString *CellIdentifier = @"labelCell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    return cell;
} else if (indexPath.row < 25){
    NSDictionary *dic = [self.list objectAtIndex:indexPath.row];
    cell.textLabel.text = [dic objectForKey:@"Title"];
    cell.detailTextLabel.text = [dic objectForKey:@"Tips"];
    return cell;
} else {
    if (cell == nil) {
        addCell.textLabel.text = @"Load More...";
        return cell;
    }
}
}

- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath
{
if(indexPath.row == 20)
{
    [self.tableView reloadData];
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T15:20:33.377

取一个数组，您将在其中`add 20 elements from plist`, 和

设置`numberOfRowsInSection = [array count]`和

检查是否`numberOfRowsInSection < totalNumberOfRecords`在 plist 中，如果小于，则`increment numberOfRowsInSection by 1.`

并在 cellForRowAtIndexPath 检查`if (indexPath.row < totalNumberOfRecords -2 && indexPath.row < numberOfRowsInSection-1)`

然后添加`"LoadMore Cell"`其他不。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T14:01:01.180

所以我做了一些非常相似的事情。您有一个包含 70 个字符串（或字典）的数组要显示在表中。'numberOfRowsInSection:' 应该使用最初设置为 20 的 ivar。

当您的按钮被按下时，您将 ivar 增加 20（但不超过实际数据量！），您重新加载表格，然后您可以使用 tableView 方法将表格向上滚动到“新”单元格。

# .net - 如何拒绝仅访问.net MVC 中的一个区域？

> ID：12110786
> 
> 赞同：2
> 
> 时间：2012-08-24T13:52:37.270
> 
> 标签：.net, asp.net-mvc, forms-authentication, authorize-attribute

我试图仅使用 .Net MVC 4 否认一个领域，但我没有得到结果。当我`<authentication mode="Forms" />`输入 web.config 时会发生什么都被拒绝：所有网站都不是我想要的，我只想拒绝管理区域。

我把我`AuthorizeAttribute`的`BaseController`管理区域，仍然没有工作：

```
 public class AutenticarAdminAttribute : AuthorizeAttribute
    {
        public override void OnAuthorization(AuthorizationContext filterContext)
        {
            base.OnAuthorization(filterContext);

            if (!filterContext.HttpContext.User.Identity.IsAuthenticated)
            {
                filterContext.Result = new RedirectResult("~/admin/login");
            }
        }
    } 
```

全球.asax：`filters.Add(new AutenticarAdminAttribute());`

如果我`<authentication mode="Forms" />`从 web.config 中删除`AuthorizeAttribute`不做的工作，`IsAuthenticated`总是如此。

当我再次`<authentication mode="Forms" />`放入 web.config 时，一切都被拒绝了。

我不能只限制一个区域，怎么办？

管理区域中的 BaseController：

```
[AutenticarAdmin]
public class BaseController : Controller
{
    public BaseController()
    {
    }
} 
```

管理区域中的 DefaultAdminController：

```
public class DefaultController : BaseController
    {
        public ActionResult Index()
        {
            return View();
        }
    } 
```

公共控制器：

```
public class DefaultController : Controller
    {
        public ActionResult Index()
        {
            return View();
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T14:10:47.120

您正在覆盖 OnAuthorization 方法并在内部检查用户是否为 IsAuthenticated。

授权和身份验证是两件不同的事情！

关于身份验证，您可以在 .config 文件中（在身份验证标签中）设置默认重定向 url 和登录 url。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T17:50:19.700

`filters.Add(new AutenticarAdminAttribute());`从您的 global.asax 中删除。注册全局过滤器将与将属性放在应用程序的所有控制器中相同。

# asp.net-mvc - OnFailure / OnSuccess 未在 ajax 表单提交上调用

> ID：12110790
> 
> 赞同：0
> 
> 时间：2012-08-24T13:52:53.923
> 
> 标签：asp.net-mvc, jquery, ajax-forms

我正在尝试提交一个 ajax 表单，我想要的是在成功和/或失败时显示确认消息。

但是这两个函数从未调用过。

```
@using (Ajax.BeginForm("Transfer", "Location", null, new AjaxOptions
{
    UpdateTargetId = "update-message",
    InsertionMode = InsertionMode.Replace,
    HttpMethod = "POST",
    OnSuccess = "updateSuccess",
    OnFailure = "updateFailure"

}, new { @id = "transferForm" }))
{
  // html here
}
<div id="update-message"></div>
<div id="commonMessage"></div> 
```

这是脚本：

```
<script>
function updateSuccess() {
    if ($("#update-message").html() == "True") {
        $('#commonMessage').html("The ownership has been transfered.");
        $('#commonMessage').delay(400).slideDown(400).delay(4000).slideUp(400);
    }
    else {
        $("#update-message").show();
    }
}
function updateFailure() {
    if ($("#update-message").html() == "False") {
        $('#commonMessage').html("The ownership has NOT been transfered.Error     occured.");
        $('#commonMessage').delay(400).slideDown(400).delay(4000).slideUp(400);
    }
    else {

    }
}
</script> 
```

表单提交后，我可以看到它返回 True/False 并显示在“update-message”div 中。但确认从未出现。即使我在 onFailure/onSuccess 中使用“警报”，警报也不会出现。

有帮助吗？？

编辑：控制器返回的消息显示在 div 中。但是没有确认信息出现。 ![在此处输入图像描述](../Images/cce34287623fdbac9341814cfae424ae.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T16:38:23.970

你能试试这个：

```
function updateSuccess() {
        $('#commonMessage').html("The ownership has been transfered.");
        $('#commonMessage').delay(400).slideDown(400).delay(4000).slideUp(400);
}

function updateFailure() {
    $('#commonMessage').html("The ownership has NOT been transfered.Error     occured.");
    $('#commonMessage').delay(400).slideDown(400).delay(4000).slideUp(400);
} 
```

因为`div`在 ajax 操作之后更新。

**注意**：“OnSuccess”不意味着“动作返回真”吗？另外，“OnFailure”=“action return false”？为什么要使用“if 语句”？

# c# - 我将如何使用 c#/asp.net 进行 abouce decodeURI

> ID：12110791
> 
> 赞同：10
> 
> 时间：2012-08-24T13:52:55.560
> 
> 标签：c#, asp.net, uri

我有一个网络服务，它传递了一些编码材料。

Javascript：

```
var x = encodeURIComponent(data); 
```

但是当`X`被发送到服务器时，我无法对其进行解码。`HttpUtility.HtmlDecode()` 我正在查看名称空间 HTTP 和 URI，但在尝试时无法找到我想要的确切内容，但`Uri.EscapeUriString()`无济于事。

这是怎么做到的？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-24T13:55:28.303

尝试`HttpUtility.UrlDecode()`代替`HttpUtility.HtmlDecode()`.

# android - 处理 ImageButton 数组的点击？

> ID：12110793
> 
> 赞同：0
> 
> 时间：2012-08-24T13:53:05.670
> 
> 标签：android, onclick, imagebutton

我正在制作一个井字游戏应用程序，并且我有一组 3x3 ImageButtons。他们都有onClick方法，我希望能够获取点击的ID，例如，ImageButton标识符为ImageButton01的id，获取01。

我有一种方法可以获取按钮所在的行和列，因此我可以将 Button 本地化在数组中。然后我有一个名为 的方法`mark()`，它将 ImageButtons ImageResource 设置为十字形或圆形。我必须将数组中按钮的坐标传递给mark方法，所以我需要从Button ID中获取坐标。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T14:26:09.700

按钮的数字 id 可以在点击监听器中通过 获取`view.getId()`。但是如果你有 3x3 矩阵，我只需创建 3x3 数组并将按钮 id 放在那里，然后在需要时查找它（或者创建以按钮 id 为键的哈希映射并将所有附加信息存储在那里）。很多选择。

# windows-phone-7 - 在 WP7 上使用 WriteableBitmap 和 RotateTransform 渲染文本块

> ID：12110798
> 
> 赞同：4
> 
> 时间：2012-08-24T13:53:25.193
> 
> 标签：windows-phone-7, writeablebitmap, rotatetransform

似乎在适用于 Windows Phone 的 Silverlight 的 WriteableBitmap 中有一个非常烦人的错误。我有以下代码和 xaml：

```
public partial class MainPage : PhoneApplicationPage
{
    CompositeTransform rotate = new CompositeTransform();

    public MainPage()
    {
        InitializeComponent();
    }

    private void Button_Click(object sender, System.Windows.RoutedEventArgs e)
    {
        this.rotate.Rotation += 15;

        WriteableBitmap bmp = new WriteableBitmap(this.button, rotate);
        this.image.Source = bmp;

        Dispatcher.BeginInvoke(() => Debug.WriteLine("{0}, {1}", bmp.PixelWidth, bmp.PixelHeight));
    }
} 
```

这是xaml：

```
<Grid>
    <Button VerticalAlignment="Top"
            HorizontalAlignment="Center"
            Content="This is a textblock inside a layout"
            x:Name="button"/>

    <Image VerticalAlignment="Center"
           HorizontalAlignment="Center"
           x:Name="image"/>

    <Button VerticalAlignment="Bottom"
            Content="Rotate"
            Click="Button_Click"/>
</Grid> 
```

当您单击底部按钮时，顶部按钮将使用复合变换与可写位图一起呈现。每次渲染后，顶部按钮的结果图像都比前一个大。此外，可写位图的 PixelWith 和 PixelHeight 属性值与 Image 对象的 RenderSize 大不相同。有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-25T18:35:37.800

我不完全理解发生了什么，但我相信控件大小是由于水平和垂直对齐而调整的，并且不知何故会导致您提到的问题。

您可以通过将控件的`Stretch`属性设置为 来绕过它。这样，无论图像控件的大小如何，显示的图片都将始终保持其原始大小。`Image``None`

```
 <Image  VerticalAlignment="Center"
                HorizontalAlignment="Center"
                Stretch="None"
                x:Name="image"/> 
```

# c# - 无论如何将对象从 SilverLight 传递给 JavaScript 而不进行序列化？

> ID：12110803
> 
> 赞同：2
> 
> 时间：2012-08-24T13:53:32.627
> 
> 标签：c#, javascript, silverlight

假设我在 SilverLight 中有一堂课：

```
public class GenericClass {

    public string filedOne = "field one";

    public string filedTwo = "field two";

} 
```

我想将它的一个实例传递给 JavaScript 以通过以下方式访问：

```
function callback(obj) {
    console.log(obj.fieldOne);
} 
```

如果不序列化到 JSON 并返回，这可能吗？

**更新：**

我知道如何传递原始值——这不是问题。我需要传递一个包含多个字段的对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T14:01:49.007

```
public partial class TestPage: UserControl
{
    public TestPage()
    {
        InitializeComponent(); 
        MyClass myObject = new MyClass();
        myObject.SomeMember = "TEST";
        HtmlPage.Window.Invoke("JSFunction", myObject);
    }        
} 
```

更新：为了将非原始类型对象传递给 javascript；类定义应标有`ScriptableType`属性。该类的所有属性也应标有`ScriptableMember`属性。

```
[ScriptableType]
public class MyClass
{
    [ScriptableMember]
    public string SomeMember { get; set; }    
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T14:11:47.563

使用[ScriptableTypeAttribute](http://msdn.microsoft.com/en-us/library/system.windows.browser.scriptabletypeattribute%28v=vs.95%29.aspx)

```
[ScriptableType]                       
public class SMT_ScriptableManagedType
    {
    [ScriptableMember(EnableCreateableTypes = false)] // No access
     public string GetString1()
        { return "abcdefg"; }

     public string GetString2()            // Can be accessed.
        { return "123456"; }
} 
```

现在您可以像这样[传递对象](http://msdn.microsoft.com/en-us/library/cc645074%28v=vs.95%29)：

```
HtmlPage.Window.Invoke("ReceiveSMT", new SMT_ScriptableManagedType()); 
```

其中 ReceiveSMT 是一个 javascript 函数，它将接收对象作为参数。

# python - 在 Pandas DataFrame 列中处理多个值字符串

> ID：12110812
> 
> 赞同：0
> 
> 时间：2012-08-24T13:54:16.610
> 
> 标签：python, pandas

我有一个问卷数据集，其中一列（一个问题）有多个可能的答案。该列的数据是一个列表，有多个可能的值，从无到五个，即`'[1]'`或`'[1, 2, 3, 5]'`

我正在尝试处理该列以独立访问值，如下所示：

```
def f(x):
        if notnull(x):
            p = re.compile( '[\[\]\'\s]' )
            places = p.sub( '', x ).split( ',' )
            place_tally = {'1':0, '2':0, '3':0, '4':0, '5':0}
            for place in places:
                place_tally[place] += 1
            return place_tally

df['places'] = df.where_buy.map(f) 
```

这会在我的数据框“位置”中创建一个新列，其中包含来自值的字典，即：`{'1': 1, '3': 0, '2': 0, '5': 0, '4': 0}`或`{'1': 1, '3': 1, '2': 1, '5': 1, '4': 0}`

现在从新列中提取数据的最有效/最简洁的方法是什么？我试过遍历 DataFrame 没有好的结果，即

```
 for row_index, row in df.iterrows():
         r = row['places']
         if r is not None:
             df.ix[row_index]['large_super'] = r['1']
             df.ix[row_index]['small_super'] = r['2'] 
```

这似乎不起作用。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T10:44:34.893

这是你打算做的吗？

```
for i in range(1,6):
    df['super_'+str(i)] = df['place'].map(lambda x: x.count(str(i)) ) 
```

# android - 如何将名称：值对对齐为 ListView 项

> ID：12110815
> 
> 赞同：1
> 
> 时间：2012-08-24T13:54:30.670
> 
> 标签：android, android-layout, android-linearlayout

我需要在 ListView 中显示名称：值对的列表。我想将值与最长的名称宽度对齐。但是在接收到数据之前，名称的长度及其计数是未知的。

例如：

```
name1:          value1
name111:        value2
someOtherName:  value3
----------------------next ListView Item
name3:          value4
longestNameeee: value5
----------------------next ListView Item 
```

现在，我已经创建了带有 LinearLayout 作为项目布局的适配器，并且我正在添加内部 LinearLayouts，其名称-值对的权重为 0.5 - 0.5（意味着值显示在布局中间之后）。但是如何根据最长名称长度设置名称 - 值权重？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T14:26:40.057

也许您可以考虑在列表视图行布局中使用相对布局并将名称左对齐和值右对齐？

另一种选择可能是可以使用 Paint.measureText 来测量文本长度 - 但需要设置与 textview 显示属性相同的绘制属性（textSize、texyStyle、font...） [http://developer.android.com /reference/android/graphics/Paint.html#measureText(java.lang.String](http://developer.android.com/reference/android/graphics/Paint.html#measureText(java.lang.String) , int, int)

您应该能够使用它获得对文本长度的适当测量 - 它为您提供以像素为单位的 6 个像素，您可以使用它来设置列表行中所有名称 textViews 的布局参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T14:20:55.120

* * *

您是否需要在最长的名称之后精确地开始这些值？或者只是为了能够显示最长的名字？好吧，我建议（并且在类似问题中所做的）不是使用 LinearLayout，而是使用 RelativeLayout。

在那里，您将定义两个 TextView，其中一个将在右侧具有重力。从我从您的代码中可以看出，正确的字段总是相同的大小，对吗？所以，根据它进行调整，让剩余的空间自由填充。我的一个示例布局：

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/list_selector"
    android:orientation="horizontal"
    android:padding="3dip" >

<!-- Name-->
<TextView
    android:id="@+id/name"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:textColor="#040404"
    android:typeface="sans"
    android:textSize="20dip"
    android:text="Name"
    android:textStyle="bold"/>

<!-- Amount -->
<TextView
    android:id="@+id/amount"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:gravity="right"
    android:layout_marginRight="5dip"
    android:text="money"
    android:textSize="20dip"
    android:textColor="#FF8B1500"
    android:textStyle="bold"
    />
</RelativeLayout> 
```

右侧的 TextView 填充所需的空间，左侧用于名称。

希望我能帮助给出一个想法！

# wordpress - 一次查询 2 个 wordpress 数据库表

> ID：12110819
> 
> 赞同：0
> 
> 时间：2012-08-24T13:54:45.040
> 
> 标签：wordpress

我正在运行以下查询：

```
$query = "SELECT post_title, ID, post_date_gmt, post_author
        FROM wp_posts 
            WHERE post_type='course-manager' 
        AND post_status='publish' 
        AND SUBSTRING(post_date_gmt,1,4) = '$this->yearGet'
        AND SUBSTRING(post_date_gmt,6,2) = '$this->monthGet'
        AND post_author = '$userid'
        ORDER BY post_title"; 
        $query_result = mysql_query ($query);
        while ($info = mysql_fetch_array($query_result))
        { 
```

目前这只是查询 wordpress 帖子表。我还想从 wordpress postmeta 表中查询数据，一个例子是这样的，我在 postmeta 表中添加了“AND course_date：

```
 $query = "SELECT post_title, ID, post_date_gmt, post_author
        FROM wp_posts 
            WHERE post_type='course-manager' 
        AND post_status='publish' 
        AND SUBSTRING(post_date_gmt,1,4) = '$this->yearGet'
        AND SUBSTRING(post_date_gmt,6,2) = '$this->monthGet'
        AND post_author = '$userid'
            AND course_date = '$this->yearGet'
        ORDER BY post_title"; 
        $query_result = mysql_query ($query);
        while ($info = mysql_fetch_array($query_result))
        { 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T14:55:58.740

如果您需要查询来自多个表的组合数据集，则需要进行联接。基本上，您需要在 2 个表之间建立连接，在 post 和 postmeta 的情况下，该连接将是 post id。所以查询应该是这样的：

```
SELECT a.something, b.anotherthing
FROM wp_posts AS a JOIN wp_postmeta AS b
ON a.ID = b.post_id
//followed by all of your where clause... 
```

# ajax - selectBooleanCheckbox ajax 事件触发，但监听器从未执行

> ID：12110821
> 
> 赞同：0
> 
> 时间：2012-08-24T13:55:09.260
> 
> 标签：ajax, listener

selectBooleanCheckbox ajax 事件触发，但监听器从未执行。如果我删除 c:forEach 并只调用列表中的第一个它就可以了。

```
<p:selectBooleanCheckbox value="#{Controller.graphFilter.get(0).checked}" >
       <p:ajax listener="#{Controller.addMessage}" />  
</p:selectBooleanCheckbox> 
```

注意：graphFilter 是一个列表，其中容器具有用于检查和描述的集合/获取。控制器是一个视图范围的托管 bean。addMessage 公共函数，用于发出咆哮的消息。一切都是相同的形式。

```
<h:form id="form" prependId="false">
<p:growl id="growl" showDetail="true"/>

<c:forEach items="#{Controller.graphFilter}" var="Gc">
     <h:outputText value="#{Gc.description}" />  
         <p:selectBooleanCheckbox value="#{Gc.checked}"  >
            <p:ajax listener="#{Controller.addMessage}"/>
         </p:selectBooleanCheckbox>                                       
</c:forEach>
</h:form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T06:19:24.357

你应该用 ap:column 包装你的组件：

```
<p:column>
    <h:outputText value="#{Gc.description}" />  
        <p:selectBooleanCheckbox value="#{Gc.checked}"  >
            <p:ajax listener="#{Controller.addMessage}"/>
        </p:selectBooleanCheckbox>
</p:column> 
```

[但是用p:dataList](http://www.primefaces.org/showcase/ui/dataListHome.jsf)替换整个结构会更优雅。

# jquery - 为什么要将函数分配给 $.x 变量？

> ID：12110822
> 
> 赞同：2
> 
> 时间：2012-08-24T13:55:11.123
> 
> 标签：jquery

我有以下代码：

```
(function ($) {
    /**
    * Opens a new modal window
    * @param object options an object with any of the following options
    * @return object the jQuery object of the new window
    */
    $.modal = function (options) {
        var settings = $.extend({}, $.modal.defaults, options),
            root = getModalDiv(), 
```

有人可以解释为什么将函数赋予对象 $.modal 而不仅仅是模态？还有第一行的意义是什么：

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-24T13:58:53.497

因为它是一个 jQuery 插件，所以他们将其定义为使用`$`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T14:00:30.470

由于它在一个[闭包](https://stackoverflow.com/questions/111102/how-do-javascript-closures-work)（`(function(){})()`）之外的代码无法访问`modal`。或者，您可以这样做：

```
var holder = {};

(function($){
    holder.modal = function()
    };
})();

holder.modal(); 
```

# jquery - 表格单元格内的jQuery滚动（反弹）长文本

> ID：12110823
> 
> 赞同：2
> 
> 时间：2012-08-24T13:55:15.647
> 
> 标签：jquery

我有一个有 2 列的表格，一个具有设定宽度，第二个占据页面的其余部分。

在第一列中，我有另一个包含 2 个 tr 元素的表（这是由 asp 生成的）

像这里显示的表：http: [//jsfiddle.net/Misiu/y22Tk/2/](http://jsfiddle.net/Misiu/y22Tk/2/)

第一行包含简短的类别，但第二行包含带有长文本的子类别。

我想要实现的是添加一个 jQuery 滚动条，它将隐藏我的长文本（如`overflow: hidden`），并且在我将鼠标悬停在它上面之后会滚动它。

在我的示例中，我设法将这种滚动条添加到 div 中，但我希望有不同的效果。

我希望在开始时看到部分文本（如 normal `overflow: hidden`）。

现在整个文本是不可见的，只有在我滚动它之后才会显示。

除了它完全滚动到单元格之外，我希望它环绕该单元格，以便当部分文本隐藏在左侧时，它开始在右侧显示，或者它可以从左到右弹跳。

任何建议表示赞赏:)

* * *

我已经设法做到了：http: [//jsfiddle.net/Misiu/kGxm7/1/](http://jsfiddle.net/Misiu/kGxm7/1/)但这只是起点。我需要能够在现场的多个对象上调用它（在我的表中的一些 td 上）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T15:13:59.187

这是一个简单的示例，但可以扩展以提供更多选项等。

[http://jsfiddle.net/kGxm7/2/](http://jsfiddle.net/kGxm7/2/)

它基本上是两个 jquery 函数。一个开始重复“弹跳”效果，另一个停止弹跳并重置位置。在鼠标悬停时调用第一个函数，在鼠标移出时调用第二个函数。

# silverlight - 基于 Silverlight 版本加载 XAP

> ID：12110824
> 
> 赞同：1
> 
> 时间：2012-08-24T13:55:20.220
> 
> 标签：silverlight, silverlight-4.0, silverlight-5.0

我有一个跨许多不同位置运行的 Silverlight 应用程序。我想升级到 Silverlight 5，但不幸的是，我们的几个大型站点都有过时的 IT 部门，这些部门正在拖延升级。他们告诉我至少需要 4-6 个月才能运行 Silverlight 5。我想知道的是：我可以构建我的 XAP 的 Silverlight 4 版本和我的 XAP 的 Silverlight 5 版本吗？然后根据访问我的站点的计算机上运行的 Silverlight 客户端版本加载正确的版本。

这甚至可能吗？我四处搜寻，没有看到任何指向正确方向的东西，所以我来到了这里。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T21:27:29.553

根据用户拥有的 Silverlight 插件的版本，当然可以选择加载不同的 XAP。关键是使用[`Silverlight.isInstalled`](http://msdn.microsoft.com/en-us/library/cc838126(VS.95).aspx#isinstalled)JavaScript函数。

您需要对用于显示 Silverlight 应用程序的 HTML 进行一些小的修改：

*   添加一个 ID，例如`id="slObj"`您的 Silverlight`<object ...>`元素。
*   删除元素`<param name="source" value="...">`。此参数的值将在运行时由 JavaScript 确定。

完成后，您可以调用如下函数来加载正确的 Silverlight 应用程序。我假设您的 Silverlight HTML元素`<object>`具有`id`：`slObj`

```
 function loadCorrectSilverlightXAP() {
        var slObj = document.getElementById("slObj");
        if (Silverlight.isInstalled("5.0.0.0")) {
            slObj.source = "URLOfMySilverlight5App.xap";
        } else {
            slObj.source = "URLOfMySilverlight4App.xap";
        }
    } 
```

# sql - 使用 CTE 和行号作为序列进行更新，或者使用 ROW_NUMBER() 进行 TSQL 更新查询

> ID：12110836
> 
> 赞同：9
> 
> 时间：2012-08-24T13:56:14.950
> 
> 标签：sql, sql-server-2008, tsql

我有一个名为`Site`columns`Name`和`SiteId`的表`Sequence`。我想用行号填充该`Sequence`字段。我尝试了以下查询，但它只是不更新​​记录：

```
WITH RowNumbers AS 
(
    select   SiteId,
             RowNum = row_number() OVER ( order by SiteId )
    from     [Site] 
)
UPDATE  s
SET     s.[Sequence] = r.RowNum
FROM    [Site] as s INNER JOIN RowNumbers as r ON s.SiteId = r.Row 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-24T13:59:05.433

您可以直接更新 CTE...

```
WITH RowNumbers AS 
(
    select   *,
             RowNum = row_number() OVER ( order by SiteId )
    from     [Site] 
)
UPDATE  RowNumbers
SET     [Sequence] = RowNum 
```

这与可更新视图的工作方式相同。我添加`*`以确保更新的字段通过，然后直接更新。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T13:58:32.890

你应该加入`r.SiteID`，而不是`r.Row`

```
WITH RowNumbers AS  
( 
    select   SiteId, 
             RowNum = row_number() OVER ( order by SiteId ) 
    from     [Site]  
) 
UPDATE  s 
SET     s.[Sequence] = r.RowNum 
FROM    [Site] as s INNER JOIN RowNumbers as r ON s.SiteId = r.SiteID 
```

# android - 如何执行 mapsforge 地图 0.3.0 示例

> ID：12110851
> 
> 赞同：0
> 
> 时间：2012-08-24T13:57:32.657
> 
> 标签：android, map

它有以下**缺失**的进口

```
import org.mapsforge.android.maps.overlay.Polygon;
import org.mapsforge.android.maps.overlay.PolygonalChain;
import org.mapsforge.android.maps.overlay.Polyline;
import org.mapsforge.android.maps.overlay.ListOverlay;
import org.mapsforge.android.maps.overlay.Marker;
import org.mapsforge.core.BoundingBox;
import org.mapsforge.core.GeoPoint; 
```

我也只包含其他一些 jar，但它没有用 **mapsforge-map-0.3.1-SNAPSHOT-jar-with-dependencies**代码不再执行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T11:31:27.573

有很多丢失的文件，我们必须逐步添加 throw Maven。

*   步骤 0。

Source Checkout[页面将](http://mapsforge.googlecode.com/svn/trunk/)项目的源代码下载到您的计算机。

*   步骤1。

使用[免费的 Apache maven 工具](http://maven.apache.org/download.html)来自动化构建过程。 ![](../Images/14612fa3464c0e87381e0a15fb2efca4.png)

*   第2步。

你必须设置所有的变量

> 视窗 2000/XP
> 
> 1.  将分发包解压缩，即 apache-maven-3.0.4-bin.zip 到您希望安装 Maven 3.0.4 的目录。这些说明假设您选择了 C:\Program Files\Apache Software Foundation。将从存档中创建子目录 apache-maven-3.0.4。
> 2.  通过打开系统属性（WinKey + Pause）添加 M2_HOME 环境变量，选择“高级”选项卡和“环境变量”按钮，然后在用户变量中添加 M2_HOME 变量，值为 C:\Program Files\ Apache 软件基金会\apache-maven-3.0.4。确保省略路径周围的任何引号，即使它包含空格。注意：对于 Maven < 2.0.9，还要确保 M2_HOME 没有“\”作为最后一个字符。
> 3.  在同一个对话框中，在用户变量中添加 M2 环境变量，其值为 %M2_HOME%\bin。
> 4.  可选：在同一对话框中，在用户变量中添加 MAVEN_OPTS 环境变量以指定 JVM 属性，例如值 -Xms256m -Xmx512m。此环境变量可用于为 Maven 提供额外的选项。
> 5.  在同一个对话框中，在用户变量中更新/创建 Path 环境变量，并在前面添加值 %M2% 以添加命令行中可用的 Maven。
> 6.  在同一个对话框中，确保 JAVA_HOME 存在于您的用户变量或系统变量中，并将其设置为 JDK 的位置，例如 C:\Program Files\Java\jdk1.5.0_02 和 %JAVA_HOME%\bin在您的 Path 环境变量中。
> 7.  RESTART MACHINE 让 windows 了解路径变化
> 8.  打开一个新的命令提示符（Winkey + R 然后键入 cmd）并运行 mvn --version 以验证它是否已正确安装。

注意：您可能需要更改 %M2% 的完整路径 C:\Program Files\Apache...\bin

> 基于 Unix 的操作系统（Linux、Solaris 和 Mac OS X）
> 
> 将分发存档，即 apache-maven-3.0.4-bin.tar.gz 解压缩到您希望安装 Maven 3.0.4 的目录。这些说明假设您选择了 /usr/local/apache-maven。将从存档中创建子目录 apache-maven-3.0.4。在命令终端中，添加 M2_HOME 环境变量，例如 export M2_HOME=/usr/local/apache-maven/apache-maven-3.0.4。添加 M2 环境变量，例如 export M2=$M2_HOME/bin。可选：添加 MAVEN_OPTS 环境变量以指定 JVM 属性，例如 export MAVEN_OPTS="-Xms256m -Xmx512m"。此环境变量可用于为 Maven 提供额外的选项。将 M2 环境变量添加到您的路径，例如 export PATH=$M2:$PATH。确保将 JAVA_HOME 设置为 JDK 的位置，例如 export JAVA_HOME=/usr/java/jdk1.5。0_02 并且 $JAVA_HOME/bin 在您的 PATH 环境变量中。运行 mvn --version 以验证它是否已正确安装。

*   第 3 步

    打开命令提示符，进入签出的主干目录并执行以下命令：

> ```
> mvn clean install 
> ```

*   第4步

由于 Eclipse 需要知道本地 maven 存储库的路径，因此您必须添加一个名为 M2_REPO 的新类路径变量。这可以通过 Window > Preferences > Java > Build Path > Classpath Variables > New 手动完成，也可以通过 Maven [Eclipse 插件自动完成。](http://eclipse.org/m2e/)

# css - 如何自动为某个文本实例着色？

> ID：12110852
> 
> 赞同：2
> 
> 时间：2012-08-24T13:57:35.700
> 
> 标签：css, text, colors

我为一个篮球协会做了一个网站。它有许多团队，每个团队都有自己的日历。你可以[在这里](http://www.storylinedesign.be/sites/modu/ploegen/heren-c/)看到它，例如这是团队“Heren C”。正如您在下面的日历中看到的那样，有一些主场比赛和一些客场比赛。我们还有“Heren A”、“Heren B”、“Junioren”、“Cadetten”等等……

现在，这些日历都是表格，我想（在此示例中）为“Heren C”着色并使其变为粗体。我想为我们所有的团队执行此操作，因此无需实际检查每个表并更改这些文本实例。

只是为了确保我会提到它是一个 Wordpress 网站，并且每个团队都是不同的页面，因此每次都加载相同的模板。也许这对代码有帮助。

希望大家能帮忙！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T14:03:56.087

您可以使用[**CSS3 属性选择器**](http://reference.sitepoint.com/css/css3attributeselectors)

```
a[href*="heren-c"] {
  font-weight: bold;
} 
```

运算符`*=`使属性选择器匹配具有包含指定值的属性的元素：

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T14:02:32.913

纯粹在跨浏览器兼容的 CSS 中这是不可能的，因为没有什么可以挂钩的。您最好的选择是 Javascript 或 PHP 搜索和替换，搜索每个术语并替换为 a`<span class="aclass">term</span>`或类似的，这样您就有了 CSS 的钩子。

PHP 将是更简单的方法，但 Javascript 可能是更简单的实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-24T14:09:50.980

如果允许使用 jQuery（这可以真正简化你的工作），你可以尝试这样的事情：

```
$('table tr td:nth-child(4)').each(function() {
    if($.trim($(this).text()) === 'Heren C') {
        $(this).css('font-weight', 'bold');
    }
}); 
```

我从来没有使用过 Wordpress，但我猜 jQuery 必须已经加载了......

# sql - 我可以避免锁定行不必要的时间[在 Django 中]？

> ID：12110853
> 
> 赞同：3
> 
> 时间：2012-08-24T13:57:39.230
> 
> 标签：sql, django, select, transactions, transaction-isolation

以下面的代码为例（忽略它的功能缺乏用处，因为它只是一个简单的例子来包含我需要的东西）：

```
@transaction.commit_on_success
def test_for_success(username)
    person = Person.objects.select_for_update().get(username=username)
    response = urllib2.urlopen(URL_TO_SOME_SLOW_API, some_data)
    if '<YES>' in response.read():
        person.successes += 1
        person.save() 
```

我与该示例有关的问题与查询*何时*访问数据库有关。显然，第一个查询将锁定该`Person`行，然后我调用了一个缓慢的 API，这可能需要 3 秒才能响应，导致该行被锁定 3 秒。我是否正确理解这一点，并且在我的事务中发生缓慢的 API 命中的情况下，如果我移动查询的位置以便在所有缓慢的 API 请求*之后*`SELECT FOR UPDATE`才发生，这是否会产生看似明显的效果一次不锁定我的行几秒钟（我的应用程序中的情况是不可避免的）？或者，我是否误解了，不知何故，直到事务结束，SQL 才真正命中数据库？*`select_for_update`*

 ** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T16:36:38.893

您对代码的假设是正确的。如果您查看[`select_for_update()`](https://docs.djangoproject.com/en/1.4/ref/models/querysets/#django.db.models.query.QuerySet.select_for_update)文档，此操作会锁定数据库中的这些行，直到它们被解锁。这实际上会在您的 urllib 请求期间锁定。

如果您要在请求之后将数据库调用移动到条件中，那么您再次正确的是，数据库将被锁定更短的时间（尽管如果调用了很多仍然会有一些客户端阻塞调用到期争论）。*

# php - 敏捷工具包：密码更改表格和保存

> ID：12110855
> 
> 赞同：0
> 
> 时间：2012-08-24T13:57:43.337
> 
> 标签：php, frameworks, atk4

我一直在关注敏捷工具包“书”，并且已经达到：[http ://agiletoolkit.org/learn/app/auth](http://agiletoolkit.org/learn/app/auth)

我尝试使用提供的代码：

```
class page_account extends Page {
    function init(){
        parent::init();

        $this->api->auth->check();

        $model = $this->add('Model_Customer');
        $model->getField('email')->system(true);
        $this->add('FormAndSave')->setModel($model)->loadData($this->api->auth->get('id'));
    }
} 
```

但这只是给了我一个模型未设置错误，所以知道 FormAndSave 从哪里派生我将代码更改为：

```
class page_account extends Page {
    function init(){
        parent::init();

        $this->api->auth->check();

        $model = $this->add('Model_Customer');

        $saveForm=$this->add('Form');

        $saveForm->setModel($model)->loadData($this->api->auth->get('id'));

        $saveForm->addSubmit();

        $saveForm->onSubmit(function($saveForm) {

        try {
            $saveForm->update()->js()->univ()->successMessage('Saved changes.')->execute();
        } catch(Exception $e) {
            $saveForm->js()->univ()->alert('Failed to save.')->execute();
        }
});

    }
} 
```

这至少可以让我保存数据，但我无法显示密码字段。我可以通过以下方式将其添加到模型中：

```
$model = $this->add('Model_Customer');
$model->addField('password', 'password'); 
```

问题是显示散列密码（显然是呵呵）并添加 ->system(true) 只会使其不可见。这是 Model_Customer：

```
class Model_Customer extends Model_Table {
    public $table='customer';

    function init() {
        parent::init();

        $this->addField('name');
        $this->addField('email');
    }
} 
```

非常感谢您的帮助 - 有一些解释会很棒，我正在学习这个框架，我学得越多越好。

目前，表单没有显示密码字段供用户编辑他/她的密码 - 我该如何实现该功能？就像我说的那样，如果我再次将它添加到模型中，我可以显示该字段，但它显示的哈希密码确实不是你想要的。伙计们，我该如何正确地做到这一点？

谢谢！

**更新：我有它的工作，但不确定这是否是正确或安全的方式：**

```
 class page_account extends Page {
    function init(){
        parent::init();

        $this->api->auth->check();

        $auth=$this->api->auth;

        $model = $this->add('Model_Customer');

        $model->addField('password')->type('password');

        $saveForm=$this->add('MVCForm');

        $saveForm->setModel($model)->loadData($this->api->auth->get('id'));

        $saveForm->set('password', '');

        $saveForm->addSubmit();

        if($saveForm->isSubmitted()){

            // Short-cuts
            $auth=$this->api->auth;
            $l=$saveForm->get('email');
            $p=$saveForm->get('password');

            if ($p) {
                // Manually encrypt password
                $enc_p = $auth->encryptPassword($p,$l);
                $saveForm->set('password', $enc_p);
            } else {
                $saveForm->set('password', $model->get('password'));
            }

            $saveForm->update()->js()->univ()->successMessage('Saved user information. ')->execute();
        }
    }
} 
```

这会为密码创建一个空字段，仅当您在其中输入内容时才会更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T20:38:17.840

我认为这是正确的方法，尽管很难确定。它确实有效，我看不到任何安全问题。

```
class page_account extends Page {
    function init(){
        parent::init();

        $this->api->auth->check();

        $auth=$this->api->auth;

        $model = $this->add('Model_Customer');

        $model->addField('password')->type('password');

        $saveForm=$this->add('MVCForm');

        $saveForm->setModel($model)->loadData($this->api->auth->get('id'));

        $saveForm->set('password', '');

        $saveForm->addSubmit();

        if($saveForm->isSubmitted()){

            // Short-cuts
            $auth=$this->api->auth;
            $l=$saveForm->get('email');
            $p=$saveForm->get('password');

            if ($p) {
                // Manually encrypt password
                $enc_p = $auth->encryptPassword($p,$l);
                $saveForm->set('password', $enc_p);
            } else {
                $saveForm->set('password', $model->get('password'));
            }

            $saveForm->update()->js()->univ()->successMessage('Saved user information. ')->execute();
        }
    }
} 
```

# php - Preg_Replace 更改 URL

> ID：12110857
> 
> 赞同：0
> 
> 时间：2012-08-24T13:57:44.837
> 
> 标签：php, regex, preg-replace

我正在尝试从另一个运行良好的网站中获取内容，除了所有链接都不正确。

```
 include_once('../simple_html_dom.php');

    $page = file_get_html('http://www.website.com');

$ret = $page->find('div[id=header]');

echo $ret[0]; 
```

无论如何，不​​是所有链接都显示链接以获得完整链接吗？使用 preg 替换。

```
 $ret[0] = preg_replace('@(http://([\w-.]+)+(:\d+)?(/([\w/_.]*(\?\S+)?)?)?)@', 
       '<a href="$1">http://fullwebsitellink.com$1</a>', $ret[0]); 
```

我想它会像上面那样，但我不明白？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T14:49:28.193

你的问题并没有真正解释什么是“不正确”的链接，但我猜你有这样的事情：

```
<div id="header"><a href="/">Home</a> | <a href="/sitemap">Sitemap</a></div> 
```

并且您想将其嵌入到另一个站点中，这些链接需要使用域名完全限定，如下所示：

```
<div id="header"><a href="http://example.com/">Home</a> | <a href="http://example.com/sitemap">Sitemap</a></div> 
```

假设是这种情况，您想要的替换非常简单，您甚至不需要正则表达式：找到所有以“/”开头的 href 属性，并添加域部分（我将使用“http://example.com” ) 到他们的开始，使他们成为绝对：

```
$scraped_html = str_replace('href="/', 'href="http://example.com/', $scraped_html); 
```

# .net - Magento Paypal Express 附加信息字段

> ID：12110859
> 
> 赞同：1
> 
> 时间：2012-08-24T13:57:56.100
> 
> 标签：.net, magento, paypal, express

长期聆听者，第一次来电者...

我有一个 Magento 网站，目前正在重写为 .NET。我在 SalesFlatOrderPayment 表中遇到了一个名为 Additional Information 的字段，其中包含以下内容：

a:12:{s:39:"paypal_express_checkout_shipping_method";s:0:"";s:15:"paypal_payer_id";s:13:"";s:18:"paypal_payer_email";s:24:""; s:19:"paypal_payer_status";s:10:"未验证";s:21:"paypal_address_status";s:9:"已确认";s:21:"paypal_correlation_id";s:13:"";s:32 :"paypal_express_checkout_payer_id";s:13:"";s:29:"paypal_express_checkout_token";s:20:"";s:41:"paypal_express_checkout_redirect_required";b:0;s:29:"paypal_protection_eligibility";s:8 :"合格";s:21:"paypal_payment_status";s:9:"已完成";s:21:"paypal_pending_reason";s:4:"无";}

有人可以帮我确定这可能是什么，它来自哪里以及如何格式化/解析它？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-07T17:58:35.587

它是一个序列化的 PHP 数组。

试试这个：[http ://csphpserial.sourceforge.net/](http://csphpserial.sourceforge.net/)

# c++ - 有没有办法不警告 gcc 中的 switch 中缺少“COUNT”枚举常量？

> ID：12110861
> 
> 赞同：6
> 
> 时间：2012-08-24T13:58:00.080
> 
> 标签：c++, gcc-warning

如果带有枚举类型参数的开关错过了一些常量并且没有默认分支，则 gcc`-Wswitch`选项会导致类似的警告

```
warning: enumeration value 'WHATEVER' not handled in switch 
```

但是，我们的许多开关是这样的：

```
enum foo {
    FOO_ONE,
    FOO_TWO,
    FOO_COUNT
}; 
```

其中 FOO_COUNT 永远不会作为值出现，而是用于了解已定义并可能出现在变量中的值的数量。因为我们正在使用枚举值索引一个数组或对其进行位打包，并且需要检查它是否适合或其他东西。因此，处理所有值的枚举不应*包含*这个常量。有没有办法保留该警告，但避免使用这种特殊值？IE

```
switch(foo) {
    case FOO_ONE:
        anything;
}; 
```

应该发出警告，但是：

```
switch(foo) {
    case FOO_ONE:
        anything;
    case FOO_TWO:
        anything_else;
} 
```

**不**应该。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T14:36:30.743

我个人更喜欢另一种方法：`enum`通过宏生成来设置计数。

```
GENERATE_ENUM(foo, (FOO_ONE)(FOO_TWO)) 
```

将产生：

```
enum foo {
    FOO_ONE,
    FOO_TWO
};

inline size_t size(enum foo) { return 2; } 
```

因此我的枚举是免费的。

该宏还可以适应产生其他有用的值，例如（在不连续枚举的情况下）所有值的数组（按顺序），这可能对自动迭代或检查存在等有用......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-24T14:00:30.217

如果您已经知道哪个`switch`s 处理所有值，则可以将`default:`关键字添加到这些值，但同时它会捕获未在您的 s 中列出的所有其他值`switch-case`，因此即使您忘记了也不会收到警告例子`case FOO_ONE:`。

```
switch(value){
    case FOO_ONE:
        break;
    default:
        break;
} 
```

您还可以将其与宏结合使用，以便您可以从代码的某一点“启用”警告：

```
#define m_ignore_switch_case_warnings default: break
//and define it like this to enable the warnings again
#define m_ignore_switch_case_warnings

switch(value){
    case FOO_ONE:
        break;

    m_ignore_switch_case_warnings;
} 
```

您将能够“禁用”任何类型的警告，并且在您更改枚举或计数变量有不同名称的情况下`switch`，您不会被迫更新代码。`switch``FOO_COUNT`

否则，您将被转至[David Rodríguez - dribeas](https://stackoverflow.com/a/12110909/1548637)的帖子

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-24T14:01:00.393

如果您仍想对其余部分发出警告，我唯一能想到的就是实际创建案例：

```
switch (foo) {
...
case FOO_COUNT: //empty
} 
```

# mongoose - 无法在 Mongoose 中找出具有逻辑条件的正确查询

> ID：12110863
> 
> 赞同：0
> 
> 时间：2012-08-24T13:58:17.790
> 
> 标签：mongoose

我是 Mongoose 的新手，很抱歉提出一个可能很愚蠢的问题，但我真的需要有人帮助。

模型有两个字段：`major_rating`和`minor_rating`。我有一个成员：

```
example = {'major_rating': N1, 'minor_rating': N2} 
```

我需要找到满足这个条件的成员数量：

```
major_rating > N1 || (major_rating == N1 && minor_rating >= N2) 
```

请帮我弄清楚，必须有比进行两个查询更好的方法：

```
.where('major_rating').gt(N1).count(..)

.where('major_rating').equals(N1).where('minor_rating').gte(N2).count(..) 
```

并将结果相互添加。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T14:38:20.603

Mongoose 中有一个[or 运算符](http://mongoosejs.com/docs/2.7.x/docs/query.html)，可以让你做你想做的事。您需要回退到 MongoDB 条件以在 Mongoose 中执行更高级的查询。有关所有这些的信息，您可以使用[常规 MongoDB 文档](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%24or)。

下面的示例应该可以解决您的问题，或者至少可以帮助您入门：

```
.or([{major_rating: {$gt: N1}}, {major_rating: N1, minor_rating: {$gte: N2}}]).count() 
```

# rss - 我应该为 xml 站点地图使用哪种内容类型？哪一个用于 rss 和 atom 提要？

> ID：12110869
> 
> 赞同：-1
> 
> 时间：2012-08-24T13:58:41.587
> 
> 标签：rss, content-type, sitemap, atom-feed

我应该使用`application/xml`还是`text/xml`其他`content-type`？我试图弄清楚哪个必须用于`rss and atom feed`，哪个用于`xml sitemap`. 我已经用谷歌搜索了这个，但有些网站有一个，有些网站有另一个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-13T14:43:40.210

您应该查阅相应的规范。

对于[原子](https://www.rfc-editor.org/rfc/rfc4287#section-2)：`application/atom+xml`

对于非特定的 XML 文档，例如站点地图：（`application/xml`请参阅[我应该为我的 XML 站点地图发送什么 Content-Type 值？](https://stackoverflow.com/q/3272534/1591669)）

RSS 可能取决于您使用的版本。

# c - 检查结构是否为空

> ID：12110872
> 
> 赞同：0
> 
> 时间：2012-08-24T13:58:51.510
> 
> 标签：c, structure

我填充了一个结构（ORDER_EXPIRY_TP *OrderReqXml），现在我想检查结构是否包含任何值？这是我的代码：

```
OrderReqXml->fIntOrderNumbe =at_int_ord_req->fIntOrderNumber;

OrderReqXml->dLocationCode = 0;
OrderReqXml->dQzUser = at_int_ord_req->dUserId
OrderReqXml->dSuperUserId = 0; 
```

所以基本上我想要 2 检查 OrderReqXml 是否为空。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T14:05:21.747

真的取决于你想要达到的目标。

如果你像这样分配你的结构：

```
Order* OrderReqXml = malloc(...); 
```

那么，在将值分配给结构之前，您确实应该检查指针是否为 != NULL。一个好方法是：

```
Order* OrderReqXml = malloc(...);
if (OrderReqXml != NULL) {
  // fill data
} else { /* error handling */ } 
```

如果您从其他地方获取指针，例如从内存中的静态结构，并且您想检查结构是否已被填充，则需要检查单个结构元素：

```
bool structIsNotFilled(Order* o) {
  return ((o->fIntOrderNumber == 0) &&
          (o->dLocationCode == 0) &&
          (o->dQzUser == 0) &&
          (o->dSuperUserId == 0))
} 
```

然而，问题是，如果你想相信内存中的这个结构用零初始化。（你不能相信用 malloc() 分配的内存被初始化为零。）

# java - Java 到 C 对象的传递

> ID：12110876
> 
> 赞同：2
> 
> 时间：2012-08-24T13:59:11.080
> 
> 标签：java, android, struct, java-native-interface, ioctl

我有调用内核模块的 C 代码，我想将结构传递给它。这似乎是可行的前 [字符设备捕获多个（int）ioctl-arguments](https://stackoverflow.com/questions/8849445/char-device-catch-multiple-int-ioctl-arguments)

但是我正在通过 java JNI 调用 c 代码。据说 C 结构映射是到 Java 对象。所以我将一个对象传递给 C 本机函数。

这是我的 JNI c 函数

```
 JNIEXPORT jint JNICALL Java_com_context_test_ModCallLib_reNice
  (JNIEnv *env, jclass clazz, jobject obj){

     // convert objcet to struct  
     // call module through IOCTL passing struct as the parameter
  } 
```

我应该如何从 obj 获取结构？

编辑：这是我传递的对象，

```
class Nice{

    int[] pids;
    int niceVal;

    Nice(List<Integer> pID, int n){
        pids = new int[pID.size()];
        for (int i=0; i < pids.length; i++)
        {
            pids[i] = pID.get(i).intValue();
        }
        niceVal = n;
    }
} 
```

我想要的结构是这样的，

```
struct mesg {
     int pids[size_of_pids];
     int niceVal;
}; 
```

我应该如何接近？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T14:10:25.397

您将需要使用 JNI 方法来访问这些字段，例如：

```
//access field s in the object
jfieldID fid = (env)->GetFieldID(clazz, "s", "Ljava/lang/String;");
if (fid == NULL) {
    return; /* failed to find the field */
}

jstring jstr = (env)->GetObjectField(obj, fid);
jboolean iscopy;
const char *str = (env)->GetStringUTFChars(jstr, &iscopy);
if (str == NULL) {
    return; // usually this means out of memory
}

//use your string
...

(env)->ReleaseStringUTFChars(jstr, str);

...

//access integer field val in the object
jfieldID ifld = (env)->GetFieldID(clazz, "val", "I");
if (ifld == NULL) {
    return; /* failed to find the field */
}
jint ival = env->GetIntField(obj, ifld);
int value = (int)ival; 
```

类中有成员函数`JNIEnv`可以做任何你需要的事情：读取和修改类的成员变量，调用方法，甚至创建新类。查看[JNI 规范](http://docs.oracle.com/javase/6/docs/technotes/guides/jni/spec/jniTOC.html)以获取更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T14:01:55.207

您必须从对象中手动复制字段。您可以调用[JNI 方法](http://docs.oracle.com/javase/1.4.2/docs/guide/jni/spec/functions.html#wp16536)以按名称获取字段的值。将字段本身传递到方法中而不是传递对象可能更容易。

# java - java.awt.event 无法解析

> ID：12110887
> 
> 赞同：0
> 
> 时间：2012-08-24T13:59:57.750
> 
> 标签：java, android

我有错误java.awt.event在语句*中无法解决：*

```
import java.awt.event.ActionListener; 
```

我正在编写一个 android 应用程序，它在收到 SMS 时触发一个动作（通过扩展 AbstractAction 类）。我正在另一个类中实现 ActionListener 接口。

**编辑**

上述问题已解决。现在我应该使用哪些类，这会让我像在 java swing 中一样触发动作。还是我应该使用其他方式？我基本上需要在另一个线程上调用一个方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T14:02:50.533

> 我正在编写一个安卓应用程序

那么这就是问题所在...... Android 不支持整个 AWT；它有自己的 GUI 库。有关详细信息，请参阅[平台参考文档](http://developer.android.com/reference/packages.html)。也不清楚`AbstractAction`你在说哪个类——它是第三方的吗？如果是这样，请查看该第三方文档以了解类似 AWT 的类是否需要另一个库。

您是否查看过使用“普通”Android 平台 API 是否可以更好地实现您正在尝试做的事情？我希望这会更简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T17:45:25.737

```
Java Standard Edition - (AWT + SWING) = Android. 
```

上面的声明意味着**Android不支持** `Swing and AWT`Java SE。Android 提供了自己的 GUI 库，我认为在 android 中使用 GUI 更容易构建。

# jquery - 方法不允许 wcf rest with Type post

> ID：12110889
> 
> 赞同：0
> 
> 时间：2012-08-24T14:00:11.813
> 
> 标签：jquery, json, wcf, rest

我用 wcf 创建了一个应用程序并休息了我的 Type Post 操作有问题他不允许返回方法，这是我的操作

```
[WebInvoke(Method = "POST", UriTemplate = "newContact", ResponseFormat = WebMessageFormat.Json)]
        [AuthorizedMethod]
        bool CreateContact(string jsonstring); 
```

在此页面中，我将类型字符串转换为 json

```
public bool CreateContact(string jsonstring)
        {
            Dictionary<string, string> values = JsonConvert.DeserializeObject<Dictionary<string, string>>(jsonstring);

            log();
            return dispatcher.CreateContact(values); 
```

这是我的服务

```
<system.serviceModel>
    <services>
      <service behaviorConfiguration="Default" name="Mobility.SolutionService.AppService">
        <host>
          <baseAddresses>          
            <add baseAddress="https://localhost:443/B2M/"/>
          </baseAddresses>
        </host>
        <endpoint address="" binding="webHttpBinding" bindingConfiguration="crossDomain" 
                  contract="Mobility.SolutionService.IAppService" behaviorConfiguration="Web"/>
      </service>
    </services>
    <bindings>
      <webHttpBinding>
      <binding name="crossDomain">

          <security mode="Transport">
            <transport clientCredentialType="Basic" >
            </transport>
          </security>
        </binding> 
      </webHttpBinding>
      </bindings>
    <behaviors>
      <serviceBehaviors>
        <behavior name="Default">
         <serviceDebug includeExceptionDetailInFaults="true"/>
          <serviceMetadata httpsGetEnabled="true" />
         <serviceCredentials>

           <userNameAuthentication userNamePasswordValidationMode="Custom"
                                    customUserNamePasswordValidatorType="Mobility.SolutionService.CustomUserNamePasswordValidator, Mobility.SolutionService"/>
           <serviceCertificate findValue="CN=AuthorityName"/>
          </serviceCredentials>

          <serviceAuthorization principalPermissionMode="Custom">
             <authorizationPolicies>
              <add policyType="Mobility.SolutionService.CustomAuthorizationPolicy, Mobility.SolutionService"/>
            </authorizationPolicies> 
          </serviceAuthorization>

        </behavior>
      </serviceBehaviors>
      <endpointBehaviors>
        <behavior name="Web">
          <webHttp/>
        </behavior>
      </endpointBehaviors>
    </behaviors>
  </system.serviceModel> 
```

然后我用js发送数据

```
function CreateClient(button){
var strN = document.getElementById('nom').value;
        var str1 = document.getElementById('Phone').value;
        var str2 = document.getElementById('Address').value;
        var str10 = document.getElementById('Credit_Limit_LCY').value;
        var dict = []; 
dict.push(
{
       key:"nom",
       value: strN
},
{
        key:"Phone",
        value:str1
},
{
        key: "Address",
        value:str2
},
{
key:"Credit_Limit_LCY",
value:str10
}
);
var Mydata=JSON.stringify(dict);
$.mobile.showPageLoadingMsg();
var geturl;

  geturl =$.ajax({  
 url:"https://10.0.2.2:443/B2M/newContact/",
  data:Mydata,
  contentType:"application/json; charset=utf-8",
   dataType:"json",
   timeout:10000000,  
   cache:false,
   type:'POST',
  beforeSend : function(req) {
             req.setRequestHeader('Authorization', 
                   make_base_auth (val1,val2));
        },
   error:function(XMLHttpRequest,textStatus, errorThrown) { 
   $.mobile.hidePageLoadingMsg();   

    alert("Error status :"+textStatus);  
     alert("Error type :"+errorThrown);  
     alert("Error message :"+XMLHttpRequest.responseXML);  

   },   
success:function(data) {
   alert("success");
   $.mobile.hidePageLoadingMsg();
    $.mobile.changePage("contact.html", "fade");
   }
});
   } 
```

你能帮我吗谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T19:43:41.337

我会看看下面的 url [REST 指南](http://msdn.microsoft.com/en-us/library/dd203052.aspx)

缺少几个 REST 属性，您应该使用一个对象而不是表示您的 json 对象的字符串化字符串。在服务器上，框架负责处理。

# ios - AFNetworking AFHTTPClient 成功和失败的不同内容类型

> ID：12110891
> 
> 赞同：5
> 
> 时间：2012-08-24T14:00:27.100
> 
> 标签：ios, afnetworking

我正在尝试通过 AFHTTPClient 子类访问具有复杂性的 Web 服务

如果请求成功，则内容以 JSON 形式返回。如果由于某种原因失败，来自服务器的错误将以 XML 格式返回。

目前，我认为我可以处理的唯一方法是不尝试使用特定的 XML/JSON RequestOperations，纯粹将所有内容视为纯 HTTP 请求，然后尝试自己手动解析它，具体取决于反应看起来像。

可悲的是，我无法控制 Web 服务，否则我会确保它*全*是JSON。

有没有人有更好的建议来处理这个问题？

[编辑]

我猜想让它更简洁的一种方法是创建一个新的 AFHTTPRequestOperation 子类，它在内部处理内容类型的检测，然后根据从服务器返回的内容传回解析的 JSON 或 GDataXML 对象。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T18:42:54.553

这可能不是最干净或最佳的解决方案，但您可以使用现有的 JSON 库检查响应实际上是有效的 JSON。如果是，照常进行；如果不是，请使用您的手工解析解决方案对其进行处理。

# python - 查找范围二等分python内的数字

> ID：12110894
> 
> 赞同：4
> 
> 时间：2012-08-24T14:00:31.190
> 
> 标签：python, search, sorting, binary, bisect

我有一个整数列表，我想编写一个函数来返回一个范围内的数字子集。NumbersWithinRange(list, interval) 函数名之类的东西......

IE，

```
list = [4,2,1,7,9,4,3,6,8,97,7,65,3,2,2,78,23,1,3,4,5,67,8,100]
interval = [4,20]
results = NumbersWithinRange(list, interval)  # [4,4,6,8,7,8] 
```

也许我忘了在结果中再写一个数字，但这就是我的想法......

该列表的长度可以达到 10/20 百万，范围通常为几百个。

关于如何使用 python 有效地做到这一点的任何建议 - 我正在考虑使用 bisect。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T14:05:18.393

我会为此使用 numpy，特别是如果列表那么长。例如：

```
In [101]: list = np.array([4,2,1,7,9,4,3,6,8,97,7,65,3,2,2,78,23,1,3,4,5,67,8,100])
In [102]: list
Out[102]: 
array([  4,   2,   1,   7,   9,   4,   3,   6,   8,  97,   7,  65,   3,
         2,   2,  78,  23,   1,   3,   4,   5,  67,   8, 100])
In [103]: good = np.where((list > 4) & (list < 20)) 
In [104]: list[good]
Out[104]: array([7, 9, 6, 8, 7, 5, 8])

# %timeit says that numpy is MUCH faster than any list comprehension: 
# create an array 10**6 random ints b/w 0 and 100
In [129]: arr = np.random.randint(0,100,1000000)
In [130]: interval = xrange(4,21)
In [126]: %timeit r = [x for x in arr if x in interval]
1 loops, best of 3: 14.2 s per loop

In [136]: %timeit good = np.where((list > 4) & (list < 20)) ; new_list = list[good]
100 loops, best of 3: 10.8 ms per loop

In [134]: %timeit r = [x for x in arr if 4 < x < 20]
1 loops, best of 3: 2.22 s per loop 

In [142]: %timeit filtered = [i for i in ifilter(lambda x: 4 < x < 20, arr)]
1 loops, best of 3: 2.56 s per loop 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-04-10T23:46:24.007

纯 Python [Python sortedcontainers 模块](http://www.grantjenks.com/docs/sortedcontainers/)有一个可以帮助你的[SortedList类型。](http://www.grantjenks.com/docs/sortedcontainers/sortedlist.html)它按排序顺序自动维护列表，并已通过数千万个元素的测试。排序列表类型有一个可以使用的 bisect 函数。

```
from sortedcontainers import SortedList
data = SortedList(...)

def NumbersWithinRange(items, lower, upper):
    start = items.bisect(lower)
    end = items.bisect_right(upper)
    return items[start:end]

subset = NumbersWithinRange(data, 4, 20) 
```

这样一分为二和索引将比扫描整个列表快得多。排序容器模块非常快，并且有一个[性能比较](http://www.grantjenks.com/docs/sortedcontainers/performance.html)页面，其中包含针对替代实现的基准。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-24T14:08:59.063

如果列表未排序，则需要扫描整个列表：

```
lst = [ 4,2,1,...]
interval=[4,20]
results = [ x for x in lst if interval[0] <= x <= interval[1] ] 
```

如果列表*已*排序，您可以使用它`bisect`来查找限制您的范围的左右索引。

```
left = bisect.bisect_left(lst, interval[0])
right = bisect.bisect_right(lst, interval[1])

results = lst[left+1:right] 
```

由于扫描列表是 O( *n )**并且*排序是 O( *nlgn* )，因此可能不值得对列表进行排序只是为了使用，除非您计划进行大量范围提取。*`bisect`*

 ** * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-24T14:06:17.863

我认为这应该足够有效：

```
>>> nums = [4,2,1,7,9,4,3,6,8,97,7,65,3,2,2,78,23,1,3,4,5,67,8,100]
>>> r = [x for x in nums if 4 <= x <21]
>>> r
[4, 7, 9, 4, 6, 8, 7, 4, 5, 8] 
```

编辑：

经过 JF Sebastian 的出色观察，修改了代码。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-24T14:36:53.167

让我们创建一个类似于您描述的列表：

```
import random  
l = [random.randint(-100000,100000) for i in xrange(1000000)] 
```

现在测试一些可能的解决方案：

```
interval=range(400,800)

def v2():
    """ return a list """
    return [i for i in l if i in interval]

def v3():
    """ return a generator """
    return list((i for i in l if i in interval))

def v4():
    def te(x):
        return x in interval

    return filter(te,l)

def v5():
    return [i for i in ifilter(lambda x: x in interval, l)]    

print len(v2()),len(v3()), len(v4()), len(v5())
cmpthese.cmpthese([v2,v3,v4,v5],micro=True, c=2) 
```

打印这个：

```
 rate/sec   usec/pass   v5    v4    v2    v3
v5        0 6929225.922   -- -0.4% -1.0% -1.6%
v4        0 6903028.488 0.4%    -- -0.6% -1.2%
v2        0 6861472.487 1.0%  0.6%    -- -0.6%
v3        0 6817855.477 1.6%  1.2%  0.6%    -- 
```

**但是，请注意如果`interval`是集合而不是列表会发生什么：**

```
interval=set(range(400,800))
cmpthese.cmpthese([v2,v3,v4,v5],micro=True, c=2)

  rate/sec  usec/pass     v5     v4     v3     v2
v5        5 201332.569     -- -20.6% -62.9% -64.6%
v4        6 159871.578  25.9%     -- -53.2% -55.4%
v3       13  74769.974 169.3% 113.8%     --  -4.7%
v2       14  71270.943 182.5% 124.3%   4.9%     -- 
```

现在与 numpy 比较：

```
na=np.array(l)

def v7():
    """ assume you have to convert from list => numpy array and return a list """
    arr=np.array(l)
    tgt = np.where((arr >= 400) & (arr < 800)) 
    return [arr[x] for x in tgt][0].tolist()

def v8():
    """ start with a numpy list but return a python list """
    tgt = np.where((na >= 400) & (na < 800)) 
    return na[tgt].tolist()

def v9():
    """ numpy all the way through """
    tgt = np.where((na >= 400) & (na < 800)) 
    return [na[x] for x in tgt][0]  
    # or return na[tgt] if you prefer that syntax...    

cmpthese.cmpthese([v2,v3,v4,v5, v7, v8,v9],micro=True, c=2)  

   rate/sec  usec/pass      v5      v4      v7     v3     v2     v8     v9
v5        5 185431.957      --  -17.4%  -24.7% -63.3% -63.4% -93.6% -93.6%
v4        7 153095.007   21.1%      --   -8.8% -55.6% -55.7% -92.3% -92.3%
v7        7 139570.475   32.9%    9.7%      -- -51.3% -51.4% -91.5% -91.5%
v3       15  67983.985  172.8%  125.2%  105.3%     --  -0.2% -82.6% -82.6%
v2       15  67861.438  173.3%  125.6%  105.7%   0.2%     -- -82.5% -82.5%
v8       84  11850.476 1464.8% 1191.9% 1077.8% 473.7% 472.6%     --  -0.0%
v9       84  11847.973 1465.1% 1192.2% 1078.0% 473.8% 472.8%   0.0%     -- 
```

显然，只要您可以一直使用 numpy，numpy 就比纯 python 快。否则，使用一组间隔来加快速度......

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-24T14:16:25.173

使用迭代器

```
>>> from itertools import ifilter
>>> A = [4,2,1,7,9,4,3,6,8,97,7,65,3,2,2,78,23,1,3,4,5,67,8,100]
>>> [i for i in ifilter(lambda x: 4 < x < 20, A)]
[7, 9, 6, 8, 7, 5, 8] 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-17T12:53:10.900

我想你正在寻找这样的东西..

```
b=[i for i in a if 4<=i<90]
print sorted(set(b))
[4, 5, 6, 7, 8, 9, 23, 65, 67, 78] 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-05-07T14:37:41.387

如果您的数据集不是太稀疏，您可以使用[“bins”](https://en.wikipedia.org/wiki/Bin_(computational_geometry))来存储和检索数据。例如：

```
a = [4,2,1,7,9,4,3,6,8,97,7,65,3,2,2,78,23,1,3,4,5,67,8,100]

# Initalize a list of 0's [0, 0, ...]
# This is assuming that the minimum possible value is 0
bins = [0 for _ in range(max(a) + 1)]  

# Update the bins with the frequency of each number
for i in a:
    bins[i] += 1

def NumbersWithinRange(data, interval):
    result = []
    for i in range(interval[0], interval[1] + 1):
        freq = data[i]
        if freq > 0:
            result += [i] * freq
    return result 
```

这适用于这个测试用例：

```
print(NumbersWithinRange(bins, [4, 20]))
# [4, 4, 4, 5, 6, 7, 7, 8, 8, 9] 
```

为简单起见，我省略了函数中的一些边界检查。

重申一下，这在空间和时间使用方面可能会更好，但这在很大程度上取决于您的特定数据集。数据集越稀疏，效果就越好。*

# c++ - C++ 指向未知类成员函数的指针

> ID：12110895
> 
> 赞同：3
> 
> 时间：2012-08-24T14:00:32.883
> 
> 标签：c++, class, pointers, function-pointers, iunknown

**免责声明**我不使用`BOOST`或其他库

最后，我了解了*PointerToMemberFunction 的*工作原理。这是我的[示例代码](http://ideone.com/yjTXCT)。

```
#include <iostream>

using namespace std;

class Foo
{
        public:
                void foo ( )
                {
                        cout << "I'm a foo method\n";
                };
};

class Bar
{
        public:
                void bar ( Foo* fooPtr , void(Foo::*fooFnPtr)() )
                {
                        (fooPtr->*fooFnPtr)();
                };
};

int main()
{
        Foo* foo = new Foo();
        Bar* bar = new Bar();

        bar->bar ( foo , &Foo::foo );

        return 0;
} 
```

现在，问题是什么。`Bar::bar`必须以某种方式进行修改，因为在实际项目中它**不会知道，什么类`fooFnPtr`是指向**. 换句话说`Bar::bar`，必须与任何类一起工作，而不仅仅是`Foo`. 我不知道，一个指向传递给什么类的实例的指针`Bar::bar`。

可以帮助的一件事是，所有将与之合作`Bar::bar`的班级都是一个班级的孩子！

这可以实现吗？如何实现？如何修复我的代码？提前致谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-24T14:09:05.567

您可以制作`bar`一个模板功能：

```
template<class T>
void bar ( T* fooPtr , void(T::*fooFnPtr)() )
{
    (fooPtr->*fooFnPtr)();
} 
```

当然，如果你只想传递指向存在于公共基类中的成员的指针，你可以简单地这样做：

```
#include <iostream>

using namespace std;

class Foo
{
        public:
                virtual void foo ( )
                {
                        cout << "I'm a foo method\n";
                };
};

class Derived: public Foo
{
        public:
                virtual void foo ( )
                {
                        cout << "I'm a Derived method\n";
                };
};

class Bar
{
        public:
                void bar ( Foo* fooPtr , void(Foo::*fooFnPtr)() )
                {
                        (fooPtr->*fooFnPtr)();
                }
};

int main()
{
        Derived* derived = new Derived();
        Bar* bar = new Bar();

        bar->bar ( derived , &Foo::foo );

        return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T14:06:39.040

我猜你是在使用闭包和委托，或者 C++ 中的等价物。简而言之，它们是可以调用的实例，并且包含指向您的类实例（或实例本身）的指针和指向那里的方法的指针。

看看 std::bind。它们通常返回模板类的神秘实例，这些实例都可以转换为 std::function<...>，以防您需要使用统一类型的参数作为函数或方法的参数。

因此，您的代码将如下所示：

```
 void Bar::bar(std::function<void()> f)
    { 
       ....
    }

    Foo* foo = new Foo();
    Bar* bar = new Bar();
    auto f = std::bind( &Foo::foo, foo);
    bar->bar ( f ); 
```

当然，如果您决定不使用任何库，您仍然可以看看这些库以前是如何解决问题的，这样您就可以以最好的方式重新发明轮子。

# c# - Simple.Data - 如何双向连接同一张表两次

> ID：12110898
> 
> 赞同：1
> 
> 时间：2012-08-24T14:00:45.143
> 
> 标签：c#, asp.net-mvc, simple.data

我知道我和这个很接近......

我的结构是：

我有一些公司每个公司都有一个主要用户（帐户）和所有用户（帐户）的列表。

我已经在数据库中将其实现为一个公司表，该表具有“主要”作为 Accounts 表的外键，并且 Accounts 表有一个 CompanyId，它是 Companies 表的外键。

所以只有一个主要用户，每个用户都与一家公司相关联。

我想检索所有公司的列表，并将它们放入 ac# 对象中。到目前为止，我所拥有的是：

```
public IEnumerable<Company> GetAllCompaniesList()
    {
        var allData = database.Companies.All()
            .Join(database.Accounts).On(database.Accounts.Id == database.Companies.Primary)
            .Join(database.Accounts).On(database.Accounts.CompanyId == database.Companies.Id)
            .ToList<Company>();
        return allData;
    } 
```

它在我的测试中使用带有相关键设置的内存适配器，但不是在真实版本中，崩溃了

> FROM 子句中的对象“dbo.Accounts”和“dbo.Accounts”具有相同的公开名称。使用相关名称来区分它们。

我认为这意味着我需要命名每个连接（例如，使 sql 像“在 a = b 作为 c 上连接 a”），但我找不到这样做的语法。有人知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T15:58:08.467

您可以使用该`.As`方法为表名命名。除此之外，Join 方法还有一个可选的第二个`out`参数，它将对别名表的引用放入动态变量中；它只是使引用表格更容易。

所以试试这个：

```
public IEnumerable<Company> GetAllCompaniesList()
{
    dynamic primary;
    var allData = database.Companies.All()
        .Join(database.Accounts.As("PrimaryAccounts"), out primary)
            .On(primary.Id == database.Companies.Primary)
        .Join(database.Accounts)
            .On(database.Accounts.CompanyId == database.Companies.Id)
        .ToList<Company>();
    return allData;
} 
```

那应该可以正常工作。

# dynamic - SSAS如何建立动态范围维度

> ID：12110900
> 
> 赞同：0
> 
> 时间：2012-08-24T14:00:48.927
> 
> 标签：dynamic, range, ssas, dimension

在当前的多维数据集中，我计算了平均投资金额。现在我想根据每个部门的不同数量动态创建一个范围维度表。该表将如下所示：

Dim_DollarRange

```
ID    MinRange    MaxRange    Description
1        1         2            1-2             
2        3         5            3-5             
3        6         9            6-9            
4       10        14           10-14 
```

所以基本上有两个问题：

```
1) How to set up dimension table based on measures in cube dynamically?
2) How to look up in range dimension in SSAS? 
```

我是 SSAS 新手，感谢任何答案或教程！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T17:48:50.230

使用提供数据源视图的视图来检查源系统中的相关事实数据，并相应地过滤生成的维度列表。如果在源和多维数据集之间没有一组视图接口，则可以直接在查询中执行相同的操作，只是不够干净。

我使用这种技术将长维度列表限制为仅使用的值，从而为直接访问多维数据集（使用 Excel 等）的用户提供其过滤器/切片器中使用的选项的精确列表。它的缺点是在用户报告中屏蔽可能的选项，直到它们被使用，即在第一个取消订单触发创建之前，您不会看到 Canceled Orders = 0。

我假设您希望数据是动态的，而不是创建维度，即您知道您需要维度 A、B、C 并且它们与事实 Y 和 Z 相关。如果您真的想动态创建整个维度（维度名称、衡量群体关系等），我认为这是不可能的。

# python - 如何读取 Python 套接字 recv

> ID：12110903
> 
> 赞同：1
> 
> 时间：2012-08-24T14:00:51.873
> 
> 标签：python, sockets

我正在尝试向网站发送 HTTP 请求并读取它返回的数据。我尝试的第一个网站运行成功。它返回了大约 4 个数据包，然后返回了一个脚本捕获并终止的 0 个数据包。

但是，尝试加载[http://www.google.com/](http://www.google.com/)并不能以这种方式工作。相反，它返回大约 10 个相同长度的数据包，最后一个较小的数据包，然后继续超时。发生这种情况正常吗？这一切都取决于主机使用的服务器吗？

如果有人可以推荐一种使用 socket.recv() 读取的替代方法，该方法会考虑到并不总是发送最终的空数据包，我们将不胜感激。谢谢。

```
 try:
        data = s.recv(4096)

        while True:
            more = s.recv(4096)
            print len(more)
            if not more:
                break
            else:
                data += more
    except socket.timeout:
        errMsg = "Connection timed-out while connecting to %s. Request headers were as     follows: %s", (parsedUrl.netloc, rHeader.headerContent)
        self.logger.exception(errMsg)
        raise Exception 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T14:12:06.997

TCP 不会给你“数据包”，而是从另一端发送的连续*字节。***它是一个流**。`recv()`为您提供当前可用的流的块。您将它们缝合在一起并*解析*流内容。

[HTTP](http://en.wikipedia.org/wiki/HTTP)是一种相当复杂的协议，需要手动制定，因此您可能希望从一些现有的库（如[httplib](http://docs.python.org/library/httplib.html) ）开始。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-24T14:29:54.100

对于 HTTP，使用[请求](http://docs.python-requests.org/en/latest/index.html)而不是自己编写。

```
> ipython

In [1]: import requests

In [2]: r = requests.get('http://www.google.com')

In [3]: r.status_code
Out[3]: 200

In [4]: r.text[:80]
Out[4]: u'<!doctype html><html itemscope="itemscope" itemtype="http://schema.org/WebPage">'

In [5]: len(r.text)
Out[5]: 10969 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-24T14:28:09.160

可能是 Google 使用[Keep-Alive](http://en.wikipedia.org/wiki/HTTP_persistent_connection)来保持套接字打开，以便为进一步的请求提供服务。这将需要解析标头并读取确切的字节数。

根据您使用的 HTTP 版本，您必须添加`Connection: Keep-Alive`或不添加标头。（这可能是最简单的解决方案：只需使用 HTTP/1.0 而不是 1.1。）

如果您仍然使用该功能，您将不得不接收您的第一块数据，并且

1.  解析是否有`'\r\nContent-Length: '`内部，如果有，则获取该内部和下一个之间的字节`'\r\n'`并将它们转换为数字。那是你的尺寸。
2.  看看你`'\r\n\r\n'`的数据中是否有一个。如果是这样，那就是标题的结尾。从这里，您必须读取上面提到的确切字节数。

例子：

```
import socket
s = socket.create_connection(('www.google.com', 80))
s.send("GET / HTTP/1.1\r\n\r\n")
x = s.recv(10000)
poscl = x.lower().find('\r\ncontent-length: ')
poseoh = x.find('\r\n\r\n')
if poscl < poseoh and poscl >= 0 and poseoh >= 0:
    # found CL header
    poseocl = x.find('\r\n',poscl+17)
    cl = int(x[poscl+17:poseocl])
    realdata = x[poseoh+4:] 
```

现在，您在 中获得了内容长度`cl`和有效载荷数据的（开始）`realdata`。此请求丢失的字节数为`missing = cl - len(realdata)`。如果是`0`，你就拥有了一切；如果不是，则执行`s.read(missing)`并重新计算`missing`，直到为 0。

上面的代码是要完成的工作的简单开始；有些地方您可能需要`recv()`进一步了解才能继续。

这是相当复杂的。到目前为止，更简单的方法是

1.  `Connection: close`在请求中使用 HTTP 1.1 的标头，
2.  使用 HTTP 1.0，
3.  使用为此任务设计的库之一，而不是重新发明轮子。

# mathematical-optimization - 整数组合

> ID：12110905
> 
> 赞同：1
> 
> 时间：2012-08-24T14:00:53.950
> 
> 标签：mathematical-optimization

我想编写一个模块来查找多变量公式的整数组合。例如

```
 8x + 9y <= 124 
```

该模块将为 x 和 y 返回所有可能的正整数。例如。x=2，y=12。它不一定是 124，可以是小于或等于 124 的任何数字。如果找不到精确解，则必须尽可能接近 124。

我不想用蛮力解决，因为变量的数量可以是任何...（5,10,100，...n）

有什么算法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T20:55:29.837

您可以通过将问题重铸为*整数规划*问题来解决此问题。

将您的方程式重写为约束。

`8x + 9y < = 124` 作为

`8x + 9y + z = 124`

请注意，我们引入了一个 slack 变量`z`。我们希望`z`尽可能地小，因此使`objective function`to be `Minimize z`Any 求解器将在递增 z 之前尝试 x 和 y 的所有可能整数值。

您的完整 IP 将是：

```
最小z
8x + 9y + z = 124
x,y,z >=0 和整数

```

使用任何商业或开源 LP/IP 求解器求解。（R 的 optim 包是一种可能性，Excel Solver 也可以。）

如果出于任何原因，您想要更大或更小，您也可以`x`使用`y``objective function co-efficients.`

更一般地，`Min Cx x + Cy y + Cz z`控制成本参数 Cx Cy 和 Cz 的权重以满足您的需求。

希望有帮助。

# wix - 几个可选组件使用相同的注册表设置

> ID：12110906
> 
> 赞同：0
> 
> 时间：2012-08-24T14:00:57.703
> 
> 标签：wix, wix3.5

我们的安装程序有几个可选但互斥的组件，但每个组件都使用相同的注册表设置来存储路径。我们现在面临的问题是一些用户希望更改组件，取消选择一个并选择另一个。我们看到注册表设置被删除。

正如我们所料，已卸载的组件注册表设置被标记为“不存在”，但新组件首先按照我们的预期再次设置为“本地”，然后重置为“空”。在下面的日志提取中，`InDesignCS4RegistryKeys`应删除并`InDesignCS5RegistryKeys`应安装。

> MSI (s) (34:F0) [11:44:08:928]：组件：InDesignCS5RegistryKeys；已安装：不存在；请求：本地；行动：本地 MSI (s) (34:00) [11:44:36:200]：组件：InDesignCS4RegistryKeys；安装：本地；请求：缺席；行动：缺少 MSI (s) (34:00) [11:44:36:201]：组件：InDesignCS5RegistryKeys；已安装：不存在；请求：空；行动：空

删除了 InDesignCS4 的其他组件并添加了 InDesignCS5。

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T17:19:30.620

用户不选择和取消选择组件，他们选择和取消选择功能。

如果您现在有 3 个组件，请将注册表数据移动到第 4 个组件。将前 3 个组件与它们自己的特征相关联，并将第 4 个组件与所有三个特征相关联。

在您的 UI 和执行序列中进行检查以强制这些功能是互斥的。

如果您想拥有 1 个功能并根据组件条件驱动组件选择，请执行相同的操作，但在第 4 个组件上要么没有条件，要么具有 Component1 表达式或 Component2 表达式或 Component3 表达式。

# ios - UITableViewCell 背景颜色在附件类型 + 部分索引后面

> ID：12110916
> 
> 赞同：1
> 
> 时间：2012-08-24T14:01:10.753
> 
> 标签：ios, uitableview

希望它在这张图片中可见：

![](../Images/8d48d4b2d29160a4804577436113cf65.png)

我正在尝试在部分索引后面绘制背景，但不幸的是，部分索引后面的背景是白色的，并且在绘制 UIAccessoryType 的位置也是白色的（未图示）。

我正在使用 UITableViewCell 子类并设置背景：

```
[self.contentView setBackgroundColor:[UIColor colorWithPatternImage:[UIImage imageNamed:@"cellBackgroundPattern"]]]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T15:13:12.233

`self.contentView``accessory view`永远不要在and上绘制图像`thumbnail image`。

要使用单元格的背景颜色，请将图像绘制为`backgroundColor`或创建一个实例`UIImageView`并将其设置为`backgroundView`单元格

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T14:12:36.740

`self.contentView`顾名思义，我相信只有内容视图。尝试只做`self.backgroundColor`( 的属性`UIView`) 或`self.backgroundView`.

# ios - 使用 Facebook iOS SDK 3.x 将视频上传到 Facebook

> ID：12110922
> 
> 赞同：2
> 
> 时间：2012-08-24T14:01:27.740
> 
> 标签：ios, facebook-graph-api, video

我找到了一些使用 facebook SDK 上传视频的解决方案，但它们都不起作用（包括来自 facebook 开发人员博客的信息）。这是我用来上传视频的代码。“out_composed.mov”已成功创建，因为我可以将该视频保存在图库中或通过电子邮件发送。

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectoryPath = [paths objectAtIndex:0];
NSString* composedOutputPath = [documentsDirectoryPath stringByAppendingPathComponent:@"out_composed.mov"];
NSData *videoData = [NSData dataWithContentsOfFile:composedOutputPath];

NSMutableDictionary<FBGraphObject>* params = [FBGraphObject graphObject];
[params setDictionary:[NSMutableDictionary dictionaryWithObjectsAndKeys:
                       videoData, @"video.mov",
                       @"video/quicktime", @"contentType",
                       @"My awesome video", @"title", nil]];

if (!appDelegate.session.isOpen)
{
    [FBSession openActiveSessionWithPermissions:[NSArray arrayWithObjects:@"offline_access", @"publish_stream",@"user_videos",@"video_upload",nil] allowLoginUI:true completionHandler:^(FBSession *session, FBSessionState status, NSError *error)
                           {
                               FBRequest* uploadVideoRequest = [FBRequest requestForPostWithGraphPath:@"/me/videos" graphObject:params];
                               [uploadVideoRequest startWithCompletionHandler:^(FBRequestConnection *connection, id result, NSError *error)
                                {
                                    // The server returns "353 missing video file" here.
                                    if(error != nil) NSLog(@"%@",[error description]);
                                    else NSLog(@"Error: %@", error);
                                }];
                           }];
    appDelegate.session = [FBSession activeSession];
} else
{
    FBRequest* uploadVideoRequest = [FBRequest requestForPostWithGraphPath:@"/me/videos" graphObject:params];
    [uploadVideoRequest startWithCompletionHandler:^(FBRequestConnection *connection, id result, NSError *error)
     {
         if(error != nil) NSLog(@"%@",[error description]);
         else NSLog(@"Error: %@", error);
     }];
} 
```

我得到的错误是：

```
Error Domain=com.facebook.sdk Code=5 "The operation couldn’t be completed. (com.facebook.sdk error 5.)" UserInfo=0x1fdc94a0 {com.facebook.sdk:ParsedJSONResponseKey={
    body =     {
        error =         {
            code = 353;
            message = "(#353) Missing video file";
            type = OAuthException;
        };
    };
    code = 400;
}, com.facebook.sdk:HTTPStatusCode=400} 
```

我怎样才能解决这个问题？提前非常感谢！

平子

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T10:49:47.893

以下使用 3.0.8 SDK 对我有用（使用`-requestWithGraphPath:...`代替`-requestForPostWithGraphPath:...`）：

```
NSDictionary *parameters = [NSDictionary dictionaryWithObject:videoData forKey:@"sample.mov"];
FBRequest *request = [FBRequest requestWithGraphPath:@"me/videos" parameters:parameters HTTPMethod:@"POST"];
[request startWithCompletionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
    NSLog(@"result: %@, error: %@", result, error);
}]; 
```

似乎缺少的是一种显示上传进度的方法。

# python - Tkinter：将相同的键绑定到不同的小部件

> ID：12110923
> 
> 赞同：1
> 
> 时间：2012-08-24T14:01:30.107
> 
> 标签：python, widget, key, tkinter, bind

有没有办法将相同的键绑定到 Tkinter 中的两个不同的小部件？

问候，

雅各布

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T14:36:28.487

当然有。只需将其绑定到两个不同的小部件。

```
import Tkinter
root = Tkinter.Tk()

def keypress1(event):
    print event.keysym, " key pressed in root"

def keypress2(event):
    print event.keysym, " key pressed in text"

text = Tkinter.Text(root, width=20, height=20)
root.bind("<Return>", keypress1)
text.bind("<Return>", keypress2)
text.pack()

root.mainloop() 
```

当然，事件必须在两个小部件中实际发生。我不确定是否有办法将一个小部件捕获的事件传播到另一个没有捕获它的小部件。但是可能有比以这种方式传播事件更好的方法来解决您的问题；你可以随时赶上活动`root`并在那里做任何你想做的事情。

# openlaszlo - 打开 Laszlo onkeydown 事件问题

> ID：12110924
> 
> 赞同：1
> 
> 时间：2012-08-24T14:01:32.570
> 
> 标签：openlaszlo, lzx

我需要检查是否按下了任何键。

我正在使用此代码。当我运行它时，除非我单击 laszlo 屏幕，否则它什么也不做，为什么会发生这种情况？

```
<canvas height="250" debug="true">
     <debug height="90%" />
     <handler name="onkeydown" reference="lz.Keys" args="k">
       Debug.debug("key %w %s", k, "down");
     </handler>
    <handler name="onkeyup" reference="lz.Keys" args="k">
      Debug.debug("key %w %s", k, "up");
    </handler>
    <method name="pressA" args="ignore=null">
      Debug.debug("A pressed");
    </method>
     <handler name="oninit">
      var del = new LzDelegate(this, "pressA");
       lz.Keys.callOnKeyCombo(del, ["A"]);
    </handler>

 </canvas> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T14:39:41.993

现在假设您指的是 SWF 运行时，因为您提到的是 3.3。keydown 的处理由浏览器或浏览器中的 Flash 插件管理 - 它不是共享的。只要 Flash 组件没有焦点，所有事件都会发送到浏览器。一旦 Flash 获得焦点，它将尝试捕获所有事件，从而在 Flash 和浏览器之间创建屏障。

在我的操作系统上，Ctrl-o 映射为使用浏览器打开文件。在浏览器中加载 Flash 影片时，如果 Flash 具有焦点，则 Ctrl-O 命令将不起作用。当我点击地址栏时，它又开始工作了。SO上有很多关于SWF/浏览器焦点行为的问题。

# objective-c - 滚动时在uitableview单元格中崩溃

> ID：12110925
> 
> 赞同：-2
> 
> 时间：2012-08-24T14:01:33.730
> 
> 标签：objective-c, ios, uitableview

当我滚动 uitableview 然后尝试在 uitableview 的输入数组中添加新项目时，我面临崩溃

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];
    }

    if([selected_table_string isEqualToString:@"table_for_category"])
    {
       [cell.contentView addSubview:[self tab_label:[NSString stringWithFormat:@"%@",[AppDelegate.category_arr objectAtIndex:indexPath.row]] fram:CGRectMake(10, 3, 200, 25)]];

        if([AppDelegate.selected_category_arr_item containsObject:[AppDelegate.category_arr objectAtIndex:indexPath.row ]])
        {
           [cell.contentView addSubview:[self img_name:@"chk_box_chk.png" frm:CGRectMake(140, 3, 30, 25)]];
        }
        else
        {
           [cell.contentView addSubview:[self img_name:@"chk_box.png" frm:CGRectMake(140, 3, 30, 25)]];
        }
    }

    else if ([selected_table_string isEqualToString:@"table_for_shape"])
    {
        [cell.contentView addSubview:[self tab_label:[NSString stringWithFormat:@"%@",[AppDelegate.shapeNames_arr objectAtIndex:indexPath.row]] fram:CGRectMake(10, 3, 200, 25)]];

        if([AppDelegate.selected_shapeNames_arrr_item containsObject:[AppDelegate.shapeNames_arr objectAtIndex:indexPath.row ]])
        {
            [cell.contentView addSubview:[self img_name:@"chk_box_chk.png" frm:CGRectMake(140, 3, 30, 25)]];
        }
        else
        {
            [cell.contentView addSubview:[self img_name:@"chk_box.png" frm:CGRectMake(140, 3, 30, 25)]];
        }

    }
    else if ([selected_table_string isEqualToString:@"table_for_color"])
    {
        [cell.contentView addSubview:[self tab_label:[NSString stringWithFormat:@"%@",[AppDelegate.color_arr objectAtIndex:indexPath.row]] fram:CGRectMake(10, 3, 200, 25)]];

        if([AppDelegate.selected_color_arr_item containsObject:[AppDelegate.color_arr objectAtIndex:indexPath.row ]])
        {
            [cell.contentView addSubview:[self img_name:@"chk_box_chk.png" frm:CGRectMake(140, 3, 30, 25)]];
        }
        else
        {
            [cell.contentView addSubview:[self img_name:@"chk_box.png" frm:CGRectMake(140, 3, 30, 25)]];
        }

    }
    else if ([selected_table_string isEqualToString:@"table_for_purity"])
    {
       [cell.contentView addSubview:[self tab_label:[NSString stringWithFormat:@"%@",[AppDelegate.purity_arr objectAtIndex:indexPath.row]] fram:CGRectMake(10, 3, 200, 25)]];

        if([AppDelegate.selected_purity_arr_item containsObject:[AppDelegate.purity_arr objectAtIndex:indexPath.row ]])
        {
           [cell.contentView addSubview:[self img_name:@"chk_box_chk.png" frm:CGRectMake(140, 3, 30, 25)]];
        }
        else
        {
            [cell.contentView addSubview:[self img_name:@"chk_box.png" frm:CGRectMake(140, 3, 30, 25)]];
        }

    }
    else if ([selected_table_string isEqualToString:@"table_for_Fluo"])
    {
        [cell.contentView addSubview:[self tab_label:[NSString stringWithFormat:@"%@",[AppDelegate.Fluo_arr objectAtIndex:indexPath.row]] fram:CGRectMake(10, 3, 200, 25)]];

        if([AppDelegate.selected_Fluo_arr_item containsObject:[AppDelegate.Fluo_arr objectAtIndex:indexPath.row ]])
        {
            [cell.contentView addSubview:[self img_name:@"chk_box_chk.png" frm:CGRectMake(140, 3, 30, 25)]];
        }
        else
        {
            [cell.contentView addSubview:[self img_name:@"chk_box.png" frm:CGRectMake(140, 3, 30, 25)]];
        }
    }
    else if ([selected_table_string isEqualToString:@"table_for_Cut"])
    {
        [cell.contentView addSubview:[self tab_label:[NSString stringWithFormat:@"%@",[AppDelegate.cut_arr objectAtIndex:indexPath.row]] fram:CGRectMake(10, 3, 200, 25)]];

        if([AppDelegate.selected_cut_arr_item containsObject:[AppDelegate.cut_arr objectAtIndex:indexPath.row ]])
        {
            [cell.contentView addSubview:[self img_name:@"chk_box_chk.png" frm:CGRectMake(140, 3, 30, 25)]];
        }
        else
        {
            [cell.contentView addSubview:[self img_name:@"chk_box.png" frm:CGRectMake(140, 3, 30, 25)]];
        }

    }
    else if ([selected_table_string isEqualToString:@"table_for_myselection"])
    {/////IT'S RECIEVED FOR MYSELECTIONS......
        //ParcelDetails *obj_parcel_selected_for_mail;
        obj_parcel_details_for_mail = [AppDelegate.mySelected objectAtIndex:indexPath.row];
        //cell.textLabel.text = [AppDelegate.mySelected objectAtIndex:indexPath.row];
        cell.textLabel.text = [NSString stringWithFormat:@"%@",obj_parcel_details_for_mail.parcelId];
        cell.textLabel.font = [UIFont fontWithName:@"Tahoma" size:18.0];

        UIButton *mail_to_Button =  [UIButton buttonWithType:UIButtonTypeCustom];
        [mail_to_Button setImage:[UIImage imageNamed:@"mail_icon_9"] forState:UIControlStateNormal];
        mail_to_Button.layer.shadowColor = [UIColor grayColor].CGColor;
        mail_to_Button.layer.shadowOffset = CGSizeMake(0, 3);
        mail_to_Button.layer.shadowOpacity = 1.8;
        mail_to_Button.layer.shadowRadius = 10.0;
        [mail_to_Button addTarget:self action:@selector(send_mail_Action) forControlEvents:UIControlEventTouchUpInside];
        [mail_to_Button setFrame:CGRectMake(530,15,40,40)];

        [cell.contentView addSubview:mail_to_Button];
    }

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T14:27:27.803

每次显示单元格时，您都在向单元格添加子视图，并且最终内存不足（这可能是您没有收到错误消息或崩溃的原因）。为了解决这个问题，想到的解决方案是在你的`img_name:frm:`方法中标记你的子视图，就像这样。

```
subview.tag = 100; 
```

并在您的单元格自定义代码中；

```
 for(UIView *view in cell.subviews){
   if(view.tag = 100)[view removeFromSuperview];
 } 
```

编辑* 你的 UIButton 也应该这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-24T14:29:51.963

在更新 TableView 的数据源之前，只需调用`[yourTableView reloadData];`这应该可以解决您在滚动和更新数据源数组时的崩溃问题。

# ruby-on-rails-3 - Rails3 + Devise：更新时防止密码验证

> ID：12110931
> 
> 赞同：6
> 
> 时间：2012-08-24T14:01:55.323
> 
> 标签：ruby-on-rails-3, devise

我正在寻找一种方法来允许用户更改他们的设置（用户模型）而不必更改他们的密码（他们仍然必须输入他们当前的密码）。开箱即用的设计似乎允许这样做，但是当您删除可验证模块并设置自定义验证时，您似乎需要解决一些问题。

我在我的用户模型中设置了以下验证：

```
validates :password, length: { in: 6..128 } 
```

注册时，用户需要指定他的密码（这是我所期望的）。但是，在更新设置时，如果我将密码留空，则会向用户提出一个错误，提示密码必须至少为 6 个字符。

我怎样才能解决这个问题，而不必改变 Devise 的工作方式或实现某种自定义控制器？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-24T14:01:55.323

也许这对某些人来说看起来很明显，但我花了一段时间才把它放在一起。经过几个小时尝试不同的解决方案和变通方法并四处寻找之后，我深入研究了 Rails 验证，并发现了一些结构，当它们组合在一起时，这真的很容易。

我所要做的就是为创建操作设置一个验证，为更新操作设置一个验证，并在更新时允许空白。

```
 validates :password, length: { in: 6..128 }, on: :create
  validates :password, length: { in: 6..128 }, on: :update, allow_blank: true 
```

有了这个，我得到了我想要的行为，它只是两行短代码。

**附加说明：**

起初，我尝试过这种方式：

```
validates :password, length: { in: 6..128 }, on: :create 
```

这是错误的，因为它会在更新时完全跳过验证。然后，用户可以在更新设置时设置短/长（或空白？）密码。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-05-27T14:37:04.193

将此代码添加到您的用户模型中。

```
private
def password_required?
  new_record? ? super : false
end 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-01-27T20:29:49.180

我尝试了 Amal Kumar S 解决方案，但不幸的是它并没有帮助我解决同样的问题，所以这里是在实际项目中测试的解决方案的修改版本。

这是来自 devise/models/validatable.rb 模块的代码

```
protected

# Checks whether a password is needed or not. For validations only.
# Passwords are always required if it's a new record, or if the password
# or confirmation are being set somewhere.
def password_required?
  !persisted? || !password.nil? || !password_confirmation.nil?
end 
```

如果您在更新用户信息时留下空白密码和密码确认字段，则验证失败，因为此条件始终为假：

```
!password.nil? || !password_confirmation.nil? 
```

Password 和 password_confirmation 字段等于空白字符串 ''，它永远不等于 nil。所以你可以通过覆盖password_required来解决这个问题？用户模型中的方法并更改为零？检查空白？查看。

```
protected

def password_required?
 !persisted? || !password.blank? || !password_confirmation.blank?
end 
```

认为这是解决该问题的最简单方法，并且不会破坏原始逻辑。也许是设计的错误。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-11T17:40:41.990

Devise 有自己的方法来实现这一点，[`update_without_password`](http://rdoc.info/gems/devise/Devise/Models/DatabaseAuthenticatable#update_without_password-instance_method)它更新记录属性而不询问当前密码。从不允许更改当前密码。

**笔记。**如果您正在使用此方法，您可能应该重写此方法以保护您不希望在没有密码的情况下更新的其他属性。

例子：

```
def update_without_password(params={})
  params.delete(:email)
  super(params)
end 
```

这一切都在设计文档中。[http://rdoc.info/gems/devise/index](http://rdoc.info/gems/devise/index)

# php - 如何使用 PHP 构建一个显示专辑的 Facebook 应用程序？

> ID：12110934
> 
> 赞同：1
> 
> 时间：2012-08-24T14:02:06.197
> 
> 标签：php, facebook, facebook-graph-api, facebook-access-token

我想构建一个 Facebook Web 应用程序，它使用图形 API 仅显示特定用户的相册。该用户始终是相同的，我知道他的凭据。

到目前为止我的代码：

```
$this->facebook->api("username/albums?access_token=" . $this->access_token); 
```

但我得到以下异常：

```
[error] => Array
(
    [message] => A user access token is required to request this resource.
    [type] => OAuthException
    [code] => 102
) 
```

我需要生成一个`acces_token`永远存在并且能够检索此信息的信息，因为现在我只能访问公共数据。我必须从哪里开始？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T14:06:40.753

当您有一个注册的应用程序时，您可以生成一个始终有效的应用程序访问令牌。

使用此 URL 获取您的访问令牌：

```
https://graph.facebook.com/oauth/access_token?
    client_id=YOUR_APP_ID
   &client_secret=YOUR_APP_SECRET
   &grant_type=client_credentials 
```

您可以在您的应用程序页面上找到应用程序 ID 和应用程序密码。
请注意，您看到的相册和/或照片取决于相册/照片/的隐私设置

# php - 通过电子邮件发送包含多维数组的表单

> ID：12110938
> 
> 赞同：-1
> 
> 时间：2012-08-24T14:02:34.130
> 
> 标签：php, multidimensional-array

我创建了一个带有多维数组的表单，我正在尝试使用 PHPmailer 通过将数组的内容写入文本文件然后让它读取文件的内容来发送包含数组的电子邮件，但是当我发送 e -mail 它只显示为 "'; } fclose(); ?> "。我究竟做错了什么？

这是具有多维数组的表单的代码：

```
<form id="form" name="form" method="post" action="send_mail_tray.php" onsubmit='return packageValidator()'>
   <table width="100%">
      <tr>
        <td><input type="hidden" name="appetizer[]" value="Appetizer 1" />Appetizer 1</td>
        <td style="width: 75px" align="right">
            Med: <input type="text" name="appetizer[0][Med]" style="width: 30px" /><br />
            Lg: <input type="text" name="appetizer[0][Lg]" style="width: 30px" />
        </td>
        <td><input type="hidden" name="appetizer[]" value="Appetizer 2" />Appetizer 2</td>
        <td style="width: 75px" align="right">
            Med: <input type="text" name="appetizer[1][Med]" style="width: 30px" /><br />
        Lg: <input type="text" name="appetizer[1][Lg]" style="width: 30px" />
        </td>
        <td><input type="hidden" name="appetizer[]" value="Appetizer 3" />Appetizer 3</td>
        <td style="width: 75px" align="right">
            Med: <input type="text" name="appetizer[2][Med]" style="width: 30px" /><br />
            Lg: <input type="text" name="appetizer[2][Lg]" style="width: 30px" />
        </td>
      </tr>
      ...
   </table>
   <input type="Submit" value="Submit Order" />
</form> 
```

我的PHP代码：

```
foreach ($_POST['appetizer'] as $piece => $sizes){
    $medSize = $sizes['Med'];
    $lgSize = $sizes['Lg'];
    if(!empty($medSize) || !empty($lgSize)){
        $appetizer .= $_GET['appetizer'] . " - Med: " . $medSize . ", Lg: " . $lgSize;
    }
}

$message = ("<p>Thank you for your catering request!</p>
    <p><b>Name:</b> $name<br />
    <b>Phone #:</b> $phone<br />
    <b>Email:</b> $email</p>
    <p><b>Appetizers:</b><br />
    $appetizer
    </p>"); 
```

我也尝试过使用 andrewsi 的代码，但使用后，我不再收到电子邮件：

```
foreach ($_POST['appetizer'] as $piece => $sizes){
    $medSize = $sizes['Med'];
    $lgSize = $sizes['Lg'];
    if(!empty($medSize) || !empty($lgSize)){
        $message .= $_GET['appetizer'] . " - Med: " . $medSize . ", Lg: " . $lgSize;
    }
} 
```

下面是发送电子邮件的代码：

```
$email = $_REQUEST['email'];
$mail = new PHPMailer();
$mail->Host = //SMTP server
$mail->Sender = //Sender
$mail->From = //From
$mail->AddReplyTo("email@email.com");
$mail->FromName = //FromName;
$mail->AddAddress($email);
$mail->IsHTML(true);
$mail->Subject = //Subject;
$mail->Body=$message;
$mail->WordWrap = 50;
$mail->Send();
echo"<script>window.location='thankyou.html'</script>"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T14:05:08.083

您需要重新调整最后一段代码：

```
$message = "<p><b>Appetizers:</b><br />";

$fapp = fopen('appetizers.txt', 'r');
while(!feof($fapp)){
    $message .= fgets($fapp) . '<br />';
}
fclose($fapp); 
```

您将代码与电子邮件文本混合在一起 - 这样，您就可以将它们分开。

编辑添加：

您也可以`$message`直接生成`$_POST`：

```
foreach ($_POST['appetizer'] as $piece => $sizes){
    $medSize = $sizes['Med'];
    $lgSize = $sizes['Lg'];
    if(!empty($medSize) || !empty($lgSize)){
        $message .= $piece . " - Med: " . $medSize . ", Lg: " . $lgSize;
    }
} 
```

这将节省您写入然后读取文件的时间。

# c++ - 铸造和多态性

> ID：12110939
> 
> 赞同：1
> 
> 时间：2012-08-24T14:02:34.527
> 
> 标签：c++

请看下面的简单代码：

```
class A
{
public:
    A() {}
    virtual bool cmp(const A& a) const {cout << "cmp A" << endl; return true;}
};
class B : public A
{
public:
    B() {}
    ~B() {}
    bool cmp(const B& b) const {cout << "cmp B" << endl; return false;;}
};

int main()
{

    A a1;
    A a2;
    B b1;
    B b2;

    a1.cmp(a2); // as expected
    b1.cmp(b2); // as expected

    a1.cmp(b1); // upcasting
    // b2.cmp(a2); // conversion needed

    // Here is the problematic part:
    A* pa;
    pa = new B;

    pa -> cmp (b1); // Why why why the cmp of A runs?

    return 0;
} 
```

我只是无法理解它 - 有 vptr 和 vtbl 以及一个与调用完全匹配的函数，没有任何强制转换。那么为什么调用 A 类的 cmp 呢？

任何合乎逻辑的答案将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T14:06:20.060

因为您没有覆盖操作员。您的课程中有 2 个**不同的运算符。**

要覆盖方法或运算符，签名必须完美匹配。这意味着：

*   姓名
*   参数
*   cv 限定词

基类运算符采用 a`const A&`作为参数，派生类采用`const B&`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T14:07:01.910

因为`A::cmp`和`B::cmp`签名不匹配。

和`b1`首先转换为`const A &`并被`A::cmp`称为

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T14:07:14.233

你有两个覆盖

```
A::cmp(const A&)
B::cmp(const B&) 
```

因此，当您这样做时，`pa->cmp()`它会调用`A::cmp`，因为 pa 的类型在编译时是 A 。这里没有 vptr 的意义，因为你根本没有覆盖任何东西。

它将是压倒一切的，如果你有

```
bool B::cmp(const A& b) 
```

覆盖签名`A::cmp(const A& b)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T14:10:33.673

您在 B 上的方法是“隐藏”基类方法，因此您无法通过 B 看到它。有关更详细的说明，请参阅[C++ FAQ 。](http://www.parashift.com/c++-faq-lite/hiding-rule.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-24T14:07:45.047

嗯，这是意料之中的，因为`bool cmp(const B& b) const`不会覆盖基类的虚方法，因为它们具有不同的签名。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-24T14:08:13.943

因为`B::cmp()`签名不同于`A::cmp()`. 所以`B::cmp()`不是覆盖`A::cmp()`，而是隐藏它，它不是虚拟的，也不是通过调用知道的`A*`。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-24T14:17:49.527

请注意，虽然重载虚函数中允许使用协变返回类型，但不允许使用协变参数类型！所以你隐藏了基本的虚函数，而不是覆盖它。

# c# - 与 EF 实体同步排序和过滤支持的列表

> ID：12110943
> 
> 赞同：0
> 
> 时间：2012-08-24T14:02:50.800
> 
> 标签：c#, entity-framework, datagridview

我需要编写一个包装器，它允许我对 QueryObject 进行排序和过滤，而不会丢失对象的同步功能（它用于 DataGridView 数据绑定）。

[这](http://msdn.microsoft.com/en-us/library/gg696575%28VS.103%29.aspx)似乎是我需要的，但它在即将到来的（我认为是测试版？）EF 5 中，而我仍然只在 EF 3.5 上。我需要在旧版本中模仿该功能。

我找到了一个[包装器](http://www.timvw.be/2007/02/22/presenting-the-sortablebindinglistt/)，它使我能够排序，但不能过滤，我无法弄清楚在这个包装器中添加过滤器支持的路径。这个包装器也失去了与 QueryObject 的同步，但我认为这并不难修复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T13:51:18.460

您可以扩展 BindingSource 以将显示的数据和实际数据分开。之后，使用动态 LINQ，可以编写适用于任何类型数据的过滤器方法。

```
if (f.Value.type == AdvFilterTypes.Contains)
    tmpList = tmpList.AsQueryable().Where(f.Value.property + ".Contains(\"" + f.Value.condition.Replace(@"\", @"\\").Replace("\"", "\\\"") + "\")");
else
    tmpList = tmpList.AsQueryable().Where(f.Value.property + " " + f.Value.typeSymbole + " " + f.Value.condition); 
```

# jquery - 在 jQuery Tabs UI 中实现 Codeigniter 验证

> ID：12110950
> 
> 赞同：0
> 
> 时间：2012-08-24T14:03:24.153
> 
> 标签：jquery, jquery-ui, validation, codeigniter, jquery-ui-tabs

我不确定它是否已经完成，但我正在尝试实施 Codeigniter 验证规则以“挂钩”到我正在生产的后端的 jQuery Tabs UI。

有谁知道是否有人已经实现了这一点 - 表单验证表明特定选项卡在表单提交的选项卡上有错误会很好。

任何人都可以提出任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T10:17:21.250

这很容易实现，假设您有一个包含 3 个字段（字段 1、字段 2 和字段 3）的选项卡，您可以这样写：

```
 <div id="tabs">
  <ul>
    ...
    <li <?=form_error(field_1) || form_error(field_2) || form_error(field_3) ? 'class="error"' : ''?>><a href="#tab-n">Tab with errors</a></li>
    ...
  </ul>
  ...
  <div id="tab-n">
    <?=form_input('field_1')?><?=form_error(field_1)?>
    <?=form_input('field_2')?><?=form_error(field_2)?>
    <?=form_input('field_3')?><?=form_error(field_3)?>
  </div>
  ...
</div> 
```

然后使用 为选项卡设置样式，`.error`以提供包含错误的视觉线索。

# css - Safari 4 div:hover 支持

> ID：12110951
> 
> 赞同：0
> 
> 时间：2012-08-24T14:03:33.847
> 
> 标签：css, safari, css-selectors

我有以下代码用于显示使用纯 HTML 和 CSS 的翻转。当您将鼠标悬停在文本上时，它会更改左右图像。

在我测试的所有浏览器中都运行良好，除了 Safari 4。根据我收集的信息，Safari 4 支持 div:hover 和一般兄弟 (~)。我知道它有点老，但谁能告诉我为什么这在 Safari 4 中不起作用？如果我能修复它，我愿意。

```
<div id="rollover-wrapper">
  <div class="rollover-text" id="rollover-top1">Availability</div>
  <div class="rollover-text" id="rollover-middle1">Audience</div>
  <div class="rollover-text" id="rollover-bottom1">Aesthetics</div>

  <div class="rollover-left" id="rollover-left1"></div>
  <div class="rollover-right" id="rollover-right1"></div>
</div>

.rollover-text {position: relative; left: 200px; width: 200px; }

.rollover-left, .rollover-right { width: 193px; height: 277px; float: left; }
.rollover-left { position: relative; top: -190px; }
.rollover-right { position: relative; top: -190px; left: 210px; }

#rollover-left1 { background: url(imageurl) no-repeat; }
#rollover-right1 { background: url(imageurl) no-repeat; }

#rollover-top1:hover ~ #rollover-left1 { background: url(imageurl) no-repeat; }
#rollover-top1:hover ~ #rollover-right1 { background: url(imageurl) no-repeat; }

#rollover-middle1:hover ~ #rollover-left1 { background: url(imageurl) no-repeat; }
#rollover-middle1:hover ~ #rollover-right1 { background: url(imageurl) no-repeat; }

#rollover-bottom1:hover ~ #rollover-left1 { background: url(imageurl) no-repeat; }
#rollover-bottom1:hover ~ #rollover-right1 { background: url(imageurl) no-repeat; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T14:02:21.597

我对此进行了进一步研究，似乎[旧版本的 Webkit](http://css-tricks.com/webkit-sibling-bug/)和与伪类一起使用时的相邻/通用兄弟选择器存在错误。

# objective-c - FMDB 数据库和 xcode 插入数据库

> ID：12110954
> 
> 赞同：1
> 
> 时间：2012-08-24T14:03:46.173
> 
> 标签：objective-c, insert, fmdb, nsinteger

我正在尝试将数据插入数据库，但似乎它不会插入整数值，它正在输入字符串。该应用程序只是崩溃。

如果我按下将其保存到数据库中的按钮，文本字段为空，则这些方法会将数据插入数据库，但值为 0，因此该方法有效。

我使用的方法是：

```
-(BOOL) insertIntoDatabase: (NSInteger)day: (NSInteger)month:(NSInteger)year:(NSInteger)hours:(NSInteger)minutes:(NSInteger)salary:(NSString *)extra
{
    FMDatabase *dbHandler = [FMDatabase databaseWithPath: [Utility getDatabasePath]];
    BOOL success;
    @try {
        [dbHandler open];

        success =  [dbHandler executeUpdate:@"INSERT INTO inputs (day, month, year, hours, minutes, salary, extra) VALUES (?,?,?,?,?,?,?);",
                         day, month, year, hours, minutes, salary, extra];

        [dbHandler close];
    }
    @catch (NSException *exception) {
        NSLog(@"error..");
    }
    @finally {
        return success;
    }
} 
```

这是我从 viewController 类调用的方法

```
-(IBAction)enterToDatabase:(id)sender{

    InputClassDatabaseHandler *databaseMethods = [[InputClassDatabaseHandler alloc]init];
    BOOL accept;

    NSInteger day = [_day.text integerValue];
    NSInteger month= [_month.text integerValue];
    NSInteger year= [_year.text integerValue];
    NSInteger hours= [_hours.text integerValue];
    NSInteger minutes= [_minutes.text integerValue];
    NSInteger salary= [_salary.text integerValue];

    //hardcoded for testing...
    NSString *extraWork = @"No";

    accept = [databaseMethods insertIntoDatabase:day :month :year :hours :minutes :salary :extraWork ];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T12:48:48.710

永远记住将任何参数作为对象传递给 SQL 查询。NSInteger 不是一个对象，所以把它放在 NSNumber 对象中就可以了。

这应该适合你：

```
-(BOOL) insertIntoDatabase: (NSInteger)day: (NSInteger)month:(NSInteger)year:
(NSInteger)hours:(NSInteger)minutes:(NSInteger)salary:(NSString *)extra
{

 FMDatabase *dbHandler = [FMDatabase databaseWithPath: [Utility getDatabasePath]];
 BOOL success = NO;
 if(![db open])
 {
   NSLog(@"Error");
   return NO;
 }
 [dbHandler beginTransaction];
 success =  [dbHandler executeUpdate:@"INSERT INTO inputs (day, month, year, hours, minutes, salary, extra) VALUES (?,?,?,?,?,?,?);",
                     [NSNumber numberWithInt:day], [NSNumber numberWithInt:month], 
                     [NSNumber numberWithInt:year], [NSNumber numberWithInt:hours],  
                     [NSNumber numberWithInt:minutes], [NSNumber numberWithInt:salary],          
                     [NSNumber numberWithInt:extra] ];

    [dbHandler commit];
    [dbHandler close];

 return success;
} 
```

# .htaccess - 使用 htaccess 将所有部分页面重定向到一页

> ID：12110957
> 
> 赞同：0
> 
> 时间：2012-08-24T14:03:56.320
> 
> 标签：.htaccess, redirect

我想将所有部分页面重定向到部分首页。

例如：

```
www.mysite.com/section/3/article 
```

应该重定向到

```
www.mysite.com/section/ 
```

我怎么能用 htaccess 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T14:42:51.107

```
RedirectMatch permanent ^/section/3/ http://www.mysite.com/section/index.html 
```

这会将所有以 to 开头的内容重定向`/section/3/`到`http://www.mysite.com/section/index.html`

# javascript - DOJO 过滤选择 RegExp 查询

> ID：12110959
> 
> 赞同：1
> 
> 时间：2012-08-24T14:03:57.910
> 
> 标签：javascript, dojo

我想实现这样的目标：

```
filteringSelect.query = {id: "12|13"}; 
```

或者

```
filteringSelect.query = {id: new RegExp("12|13")}; 
```

是否可以？

我使用 ItemFileReadStore 作为该 FilteringSelect 的存储。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T20:06:05.750

如果您想更进一步，请参阅[dijit.form.ComboBox / dijit.form.FilteringSelect 子类上的模糊匹配。](https://stackoverflow.com/questions/11200142/fuzzy-matches-on-dijit-form-combobox-dijit-form-filteringselect-subclass)然而，这是为了过滤用户输入。

要在过滤选择中打开/输入任何内容之前过滤掉条目，请继续您正在做的事情。但是，一个简单的字符串不会接受 OR 运算符，请使用`RegExp`.

[ItemFileReadStore 查询文档](http://dojotoolkit.org/reference-guide/1.8/dojo/data/ItemFileReadStore.html#query-syntax)

```
var store = new ItemFileReadStore( {
    query: {
       id: new RegExp("/^(12|13)$/")
    }
} ); 
```

作为起点，所有商品都存在于商店中，使用查询引擎的方式是通过`fetch`

```
store.fetch({
        query: { 
          // yes, you can set the query property directly 
          // in the store and leave out this parameter
            id: new RegExp("^(1|12)$")
        },
        onComplete: function(items) {
            dojo.forEach(items, function(item) {
                console.log(store.getValue(item, 'name'))
            });
        }

    }) 
```

参见[http://jsfiddle.net/LuUbT/](http://jsfiddle.net/LuUbT/)示例用法

# c# - 是队列 .Enqueue(T) 方法单独使用时线程安全吗？

> ID：12110961
> 
> 赞同：5
> 
> 时间：2012-08-24T14:03:58.950
> 
> 标签：c#, asynchronous, thread-safety, queue

如果我只同时从多个线程调用并在调用或枚举队列`Enqueue(T)`之前等待这些线程完成，它会是线程安全的吗？`Dequeue()`

```
var queue = new Queue<int>();
Action enqueue = () =>
{
    for (int i = 0; i < 100000; i++)
        queue.Enqueue(i);
};

var tasks = new[]
{
    new Task(enqueue),
    new Task(enqueue),
    new Task(enqueue)
};
foreach (var task in tasks)
    task.Start();

Task.Factory.ContinueWhenAll(tasks, t =>
{
    while (queue.Count > 0)
        Console.WriteLine(queue.Dequeue());
}); 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-24T14:07:57.590

[该文档](http://msdn.microsoft.com/en-us/library/7977ey2c.aspx)还指出，这种类型的实例成员**不是**线程安全的（向下滚动到线程安全部分）。

该文档还指出：

> 只要集合不被修改，一个队列可以同时支持多个读取器。

然而，这只是并发读取不会改变列表这一事实的副产品。它不会**使**类型“线程安全”。最好将线程安全视为为定义该类型的*公共合约*的所有操作提供*真正*的支持（在这种情况下，也可以在改变列表时提供线程安全）。

 *开玩笑：Enqueue 的实现不包括任何线程同步或锁定原语：

```
public void Enqueue(T item)
{
    if (this._size == this._array.Length)
    {
        int num = (int)((long)this._array.Length * 200L / 100L);
        if (num < this._array.Length + 4)
        {
            num = this._array.Length + 4;
        }
        this.SetCapacity(num);
    }
    this._array[this._tail] = item;
    this._tail = (this._tail + 1) % this._array.Length;
    this._size++;
    this._version++;
} 
```

所以我会选择“不”。有[`ConcurrentQueue`](http://msdn.microsoft.com/en-us/library/dd267265.aspx)对多线程的支持。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-24T14:12:29.953

这很重要：如果文档没有说队列是线程安全的，那么它不是。（对于队列，他们说它不是线程安全的）。

查看内部是一个弱测试：内部可能随时更改为非线程安全版本。

除非在特殊情况下，否则不要依赖无证财产。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T14:10:44.170

我不认为这将是线程安全的，因为 Queue 不是线程安全的。您正在将相同的实例共享给不同的线程。

> 只要集合不被修改，一个队列可以同时支持多个读取器。即便如此，通过集合枚举本质上不是线程安全的过程。为了保证枚举过程中的线程安全，可以在整个枚举过程中锁定集合。要允许集合被多个线程访问以进行读写，您必须实现自己的同步。 [http://msdn.microsoft.com/en-us/library/7977ey2c.aspx](http://msdn.microsoft.com/en-us/library/7977ey2c.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-24T14:09:12.393

> 此类型的公共静态（在 Visual Basic 中为 Shared）成员是线程安全的。不保证任何实例成员都是线程安全的。

[http://msdn.microsoft.com/en-us/library/7977ey2c.aspx](http://msdn.microsoft.com/en-us/library/7977ey2c.aspx)

您需要实现自己的同步（即使用 lock()），或者使用 ConcurrentQueue (System.Collections.Concurrent)。*

# javascript - 替换正则表达式匹配的一部分

> ID：12110963
> 
> 赞同：1
> 
> 时间：2012-08-24T14:04:01.883
> 
> 标签：javascript, regex

如何在 javascript 中替换部分 regx 匹配项。

```
Ex: fn_eq("col","va  AND l") AND fn_gt("col","v AND a ") 
```

我需要用其他字符串替换由表达式分隔的字符串**，**比如**||** .

我可以用这个正则表达式匹配上面的表达式：
`(\w+\((".*?",".*?")\))\s+(AND)\s+(\w+\((".*?",".*?")\))`

如何替换 AND 由表达式（第二个捕获组）分隔，留下其余部分。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T14:16:57.077

一个简单的替换不是为你做的吗？

```
var string = 'fn_eq("col","va  AND l") AND fn_gt("col","v AND a ")',
    re = /(\w+\((".*?",".*?")\))\s+(AND)\s+(\w+\((".*?",".*?")\))/;
string = string.replace(re, "$1 || $4"); 
```

（顺便说一下，`||`通常表示“或”逻辑运算符，而不是“和”。）

专业提示：尽可能避免使用惰性量词。而不是`.*?`，使用`[^"]*`. 它**要**快得多。

# c++ - 如何检测可变参数函数的空参数列表（va_arg、va_end、va_start）

> ID：12110965
> 
> 赞同：3
> 
> 时间：2012-08-24T14:04:03.340
> 
> 标签：c++, function, visual-c++, argument-passing

我有一个封装[CString::FormatV](http://msdn.microsoft.com/en-us/library/ysfhy4h5%28v=vs.100%29.aspx)函数的函数，我需要能够检测是否将空参数列表传递给函数。最好的方法是什么？

我当前的代码是这样的

```
CString ADString::Format(CString csFormat, ...)
{
    //Code comes from CString::Format()
    CString csReturn;
    va_list argList;
    va_start(argList, csFormat);
    csReturn.FormatV(csFormat, argList);
    va_end( argList );
    return csReturn;
} 
```

我想要这样的东西

```
CString ADString::Format(CString csFormat, ...)
{
    //Code comes from CString::Format()
    CString csReturn;
    va_list argList;
    va_start(argList, csFormat);
    //If it's empty, don't send to FormatV
    if(!IsArgListEmpty(argList))
        csReturn.FormatV(csFormat, argList);

    va_end( argList );

    return csReturn;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-24T14:10:08.390

你不能。没有办法知道通过省略号传递了多少或什么类型的参数，因此您需要一些其他方式（例如`printf`格式字符串）来传递该信息。

在 C++11 中，您可以使用可变参数模板执行非常类似的操作：

```
template <typename... Args>
CString ADString::Format(CString csFormat, Args... argList)
{
    CString csReturn;

    //If it's empty, don't send to FormatV
    if(sizeof... argList != 0)
        csReturn.FormatV(csFormat, argList...);    

    return csReturn;
} 
```

# javascript - 清除选项而不清除对它们的引用

> ID：12110969
> 
> 赞同：1
> 
> 时间：2012-08-24T14:04:27.033
> 
> 标签：javascript, dom

我有一个包含选择元素选项的变量：

```
var allOptions = document.getElementById('ddl').options; 
```

当我删除选项时

```
var selector = document.getElementById('ddl');
selector.options.length = 0; 
```

中的选项`allOptions`也被删除。

我怎样才能避免这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T14:10:08.927

您可以使用[**cloneNode**](http://www.w3schools.com/dom/met_element_clonenode.asp)创建原始节点的精确*副本。*`select`这样，您可以安全地清理下拉列表，而不会影响包含原始选项的变量：

```
var originalOptions = document.getElementById('ddl').cloneNode(true).options; 
```

**[演示](http://jsfiddle.net/vvHzD/)**。

# objective-c - 类对象的快速枚举

> ID：12110974
> 
> 赞同：2
> 
> 时间：2012-08-24T14:05:08.840
> 
> 标签：objective-c, oop, class, foundation, fast-enumeration

我正在实现一个应用程序，其中一个类的实例以及类本身都有“孩子”（放置在 a 内`NSMutableArray`）。这是一个相当复杂的应用程序，但多亏了 Objective-C，它变得轻而易举：类本身就是对象，可以有方法和“变量”（借助静态变量等）。

为了让自己更容易，我在我的实例（使用`-`）和类（使用`+`）上实现了访问器/设置器方法来获取和操作“孩子”，而无需直接访问数组。我喜欢尽可能地关闭我的对象，并且这些方法会进行一些数据验证。

我还从协议中实现了一个快速枚举*实例方法。*`NSFastEnumeration`问题来了：我可以实现一个快速枚举*类*方法并将它与Objective-C的`for...in`构造一起使用吗？换句话说，我可以实现这个：

```
+ (NSUInteger)countByEnumeratingWithState: (NSFastEnumerationState *)state objects: (__unsafe_unretained id [])buffer count: (NSUInteger)len; 
```

然后在这样的地方使用它：

```
for (id child in [MyClass class]) {
    // Do magic stuff…
} 
```

我查看了将快速枚举实现为宏的 GNUStep 的`GSFastEnumeration.h`文件，它确认上述是可能的，但我不确定 Apple 是否也这样做。

即使我无法将`NSFastEnumeration`协议与我的类对象相关联，没有该协议的快速枚举是否可能（并且面向未来）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-24T14:23:54.323

该方法`-countByEnumeratingWithState:objects:count:`是快速枚举的全部——我相信，协议主要用于描述（实现协议比使用正确签名声明方法更容易）。我希望它可以正常工作，但我没有参考。不过，您可能想要循环`[MyClass class]`。

我可能*会*认为它是面向未来的。请注意，围绕您的类对象创建一个小型包装类真的很简单，它除了实现`NSFastEnumeration`实例方法并将其转发`-countByEnumeratingWithState:objects:count:`到您的类的方法之外什么都不做`+countByEnumeratingWithState:objects:count:`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T14:47:37.563

我建议使用与方法相同的类方法创建协议`NSFastEnumeration`。`[MyClass class]`然后，您可以遍历[John Calsbeek 提到](https://stackoverflow.com/a/12111261/418715)的。

```
//Protocol implementation
@protocol FastClassEnumeration <NSObject>
@required
+ (NSUInteger)countByEnumeratingWithState:(NSFastEnumerationState *)state objects:(id [])buffer count:(NSUInteger)len;
@end 
```

* * *

```
//Class implementation
@interface EnumeratedClass : NSObject<FastClassEnumeration>
@end
@implementation EnumeratedClass

+ (NSUInteger)countByEnumeratingWithState:(NSFastEnumerationState *)state objects:(id [])buffer count:(NSUInteger)len
{
    static const unsigned long items_length = 4;
    static NSString * items[items_length] = { @"item1", @"item2", @"item3", @"item4" };

    if(state->state >= items_length)
    {
        return 0;
    }

    state->itemsPtr = items;
    state->state = items_length;
    state->mutationsPtr = (unsigned long *)self;

    return items_length;
}

@end 
```

* * *

```
//Usage
...
    for(NSString *item in [EnumeratedClass class])
    {
        NSLog(@"%@", item);
    }
... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T22:54:07.900

> 我可以吗 ... ？

嗯，你试过了吗？它有效吗？如果您尝试过，您会注意到它确实可以编译和工作。

为什么不呢？类对象就像其他对象一样是对象。类方法只是碰巧在类对象上的方法。如果你向一个类对象发送消息，它会调用一个类方法；而如果您向非类对象发送消息，它将调用实例方法。非常多，您可以将类方法放在一个类上并使用类对象，就像您可以通过将实例方法放在其类上来使用普通对象一样。

唯一可能的区别是类对象不会显式地符合`NSFastEnumeration`协议，类似于循环一个普通对象，其类没有显式地指定它符合`NSFastEnumeration`协议。所以问题是，他们是否在使用对象之前检查它是否明确符合协议（而不是检查它是否响应选择器）？

以我的经验，对于几乎所有的 Cocoa，对于说它们需要一个符合协议的对象的 API，您可以提供一个不明确符合协议但实现所有协议方法的对象，它会工作正常。（无论如何他们将如何检查它？如果他们使用`conformsToProtocol:`，那将不适用于类对象，因为有 a `+conformsToProtocol:`，它具有不同的含义。他们可能不得不使用运行时函数或特殊情况的类对象。）例如，`NSDictionary`文档说它的键必须符合`NSCopying`，但是如果你有一个不符合`NSCopying`但确实实现的对象`copyWithZone:`，它可以正常工作。（其实有一个`+copyWithZone:`方法，其声明的目的是允许将类对象用作字典键，因此很明显，键不需要显式地符合`NSCopying`.)

# mysql - Mysql 5.0.91 BIGINT 列值与'1'比较

> ID：12110976
> 
> 赞同：0
> 
> 时间：2012-08-24T14:05:13.030
> 
> 标签：mysql

想知道将 BIGINT 列值与“1”进行比较有什么问题。确切地说，为什么这不会产生任何结果：

`SELECT * FROM table WHERE col = '1'`

虽然这很好用（即返回非空结果）。

`SELECT * FROM table WHERE col = 1`

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T14:06:25.803

如果您正在比较一个整数，则不需要在其周围加上引号。

这似乎是一个未解决的错误。

查看[MySQL 错误](http://bugs.mysql.com/bug.php?id=9088)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T14:12:06.517

`Int`在与or进行比较时，您不需要使用引号`BigInt`。

但即使我与报价进行比较，我也得到了结果。

[看到这个小提琴](http://sqlfiddle.com/#!2/3289e/1)

# java - 我怎样才能返回一个泛型对象，它也有一个泛型类型？

> ID：12110981
> 
> 赞同：4
> 
> 时间：2012-08-24T14:05:25.957
> 
> 标签：java, generics

假设我有一个任何泛型类型的集合（**请不要关注**Collection**接口**）对象。Set、TreeSet、ArrayList、SortedSet 等...

然后我想要一个类似于这个伪方法的方法（这是有缺陷的）：

```
private static <T,V> T<V> returnPlease(T<V> obj) {
    return obj;
} 
```

但现在我得到“类型 T 没有类型参数”

也就是说，我也想访问子泛型类型。

我知道更常见的方式：

```
private static <T> T returnPlease(T obj) {
    return obj;
} 
```

只有我希望该方法也可以访问 TreeSet 的类型。不仅是 TreeSet，还有它使用的通用版本，在本例中为 String。

我的语法怎么错了？这不可能吗？

**================== 编辑更清楚 ===================**

```
static interface AnInterface<Return, Param1> {
    public Return method(Param1 obj1);
}

private static <T,V> AnInterface<V, V> returnPlease(T<V> obj) {
    return new AnInterface<V, V>() {
        public V method(V v) {
            // Do something
            return null;
        }
    };
} 
```

我希望这有助于理解更多...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-24T15:09:37.303

这没有意义。所以你可以接受 a`Comparable<V>` *或*a`Set<V>` *或*a `ThreadLocal<V>`，即使它们唯一的共同点是它们都有*一些*类型参数？

您写了“请不要专注于 Collection 界面”，但我认为这确实是唯一的选择；您需要有某种特定的有意义的要求，例如“实现`Collection<V>`”，才能使类型参数有意义。例如，您可以编写：

```
static interface AnInterface<Return, Param1> {
    public Return method(Param1 obj1);
}

private static <V, T extends Collection<? extends V>> AnInterface<V, V> returnPlease(T obj) {
    return new AnInterface<V, V>() {
        public V method(V v) {
            // Do something
            return null;
        }
    };
} 
```

并且Java实际上会足够聪明，可以从您传递的参数类型中推断出两者，因此您可以编写例如`T`：`V`

```
AnInterface<String, String> x = returnPlease(new TreeSet<String>()); 
```

# c# - 将 JSON 发布到 WCF Rest 服务时出错

> ID：12110986
> 
> 赞同：0
> 
> 时间：2012-08-24T14:05:35.073
> 
> 标签：c#, wcf, rest

我有一个 WCF Rest 服务，我正在尝试使用 Firefox Rest Client 进行测试，

我正在调用的方法的签名是

```
 [WebInvoke(Method = "POST", UriTemplate = "UploadEvidenceData/{userName}/{password}/{cdb}")]
    public EvidenceData UploadEvidenceData(string userName, string password, string cdb, EvidenceData evidence) 
```

证据的数据合同是

```
 [DataContract(Name = "EvidenceData", Namespace = "http://StudentEvidence.com")]
public class EvidenceData
{
    [DataMember]
    public string LearnerID { get; set; }

    [DataMember]
    public string UnitID { get; set; }

    [DataMember]
    public string AssessorID { get; set; }

    [DataMember]
    public int MethodO { get; set; }  //int

    [DataMember]
    public int MethodEwt { get; set; }  //int

    [DataMember]
    public int MethodEp { get; set; }  //int

    [DataMember]
    public int MethodQc { get; set; }  //int

    [DataMember]
    public int MethodEps { get; set; }  //int

    [DataMember]
    public int MethodPd { get; set; }  //int

    [DataMember]
    public int MethodS { get; set; }  //int

    [DataMember]
    public int MethodEwa { get; set; }  //int

    [DataMember]
    public int MethodEch { get; set; }  //int

    [DataMember]
    public int MethodEwe { get; set; }  //int

    [DataMember]
    public int MethodApel { get; set; }  //int

    [DataMember]
    public int EvidenceID { get; set; }  //int

    [DataMember]
    public string EvidenceFileName { get; set; }

    [DataMember]
    public int EvidenceFileSize { get; set; }  //int

    [DataMember]
    public string EvidenceDescription { get; set; }

    [DataMember]
    public string AssessorFeedback { get; set; }

    [DataMember]
    public string Signature { get; set; }

    [DataMember]
    public int RequirementID { get; set; }  //int

    [DataMember]
    public int ModuleID { get; set; }  //int

    public EvidenceData()
    {
        this.LearnerID = string.Empty;
        this.UnitID = string.Empty;
        this.AssessorID = string.Empty;
        this.MethodO = 0;
        this.MethodEwt = 0;
        this.MethodEp = 0;
        this.MethodQc = 0;
        this.MethodEps = 0;
        this.MethodPd = 0;
        this.MethodS = 0;
        this.MethodEwa = 0;
        this.MethodEch = 0;
        this.MethodEwe = 0;
        this.MethodApel = 0;
        this.EvidenceID = 0;
        this.EvidenceFileName = string.Empty;
        this.EvidenceFileSize = 0;
        this.EvidenceDescription = string.Empty;
        this.AssessorFeedback = string.Empty;
        this.Signature = null;
        this.RequirementID = 0;
        this.ModuleID = 0;
    }
} 
```

当我使用客户端时，使用地址[http://something.com/Service/UploadEvidence/user/pass/mydb](http://something.com/Service/UploadEvidence/user/pass/mydb)

在我的身体里

```
{"AssessorFeedback":"Nothing to report","AssessorID":"32fac8c2-0f9b-4cad-a2e4-55b06e968da0","EvidenceDescription":"some evidence","EvidenceFileName":"Lighthouse.jpg","EvidenceFileSize":561276,"EvidenceID":0,"LearnerID":"61b9eca6-6c3e-4bd3-8963-69d9ad3e5eeb","MethodApel":0,"MethodEch":0,"MethodEp":0,"MethodEps":0,"MethodEwa":0,"MethodEwe":0,"MethodEwt":0,"MethodO":0,"MethodPd":0,"MethodQc":0,"MethodS":0,"ModuleID":1131,"RequirementID":30476,"Signature":null,"UnitID":"c33ea6e1-ac54-46dc-a512-3a2efafd5a0b"} 
```

我有应用程序/json的自定义标头

这一切都可以在 .net 客户端上正常工作，但不是每次都来自 firefox 400 的其余客户端插件。

很感谢任何形式的帮助

大学教师

我的网络配置文件

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <system.web>
    <httpRuntime maxRequestLength="2147483647"/>
    <compilation debug="true" targetFramework="4.0">
      <assemblies>
        <add assembly="System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
      </assemblies>
    </compilation>
  </system.web>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true">
      <add name="UrlRoutingModule" type="System.Web.Routing.UrlRoutingModule, System.Web, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b03f5f7f11d50a3a" />
    </modules>
  </system.webServer>
  <system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <dataContractSerializer maxItemsInObjectGraph="2147483647"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment aspNetCompatibilityEnabled="true" />
    <standardEndpoints>
      <webHttpEndpoint>
        <standardEndpoint name=""
                          helpEnabled="true"
                          automaticFormatSelectionEnabled="true"
                          defaultOutgoingResponseFormat="Json"
                          maxReceivedMessageSize="2147483647"
                          maxBufferSize="2147483647"
                          transferMode="Buffered" />

      </webHttpEndpoint>
    </standardEndpoints>
    <services></services>
  </system.serviceModel>
</configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T14:09:11.207

400 通常意味着错误的 Http 方法。Firefox 客户端是否使用 GET（这将需要您的方法具有不同的属性，并调整您的 web.config 以允许 Web 获取），或者您确定它是 POST？

此外，请检查此内容类型问题：[为什么我的 C# 客户端，POSTing to my WCF REST service，返回 (400) Bad Request？](https://stackoverflow.com/questions/575893/why-does-my-c-sharp-client-posting-to-my-wcf-rest-service-return-400-bad-req)

另请查看添加装饰您的服务方法`RequestFormat = WebMessageFormat.Json`的属性是否有帮助。`[WebInvoke]`我认为这默认为 xml，这可能是 .NET 客户端发送的内容。[http://msdn.microsoft.com/en-us/library/system.servicemodel.web.webinvokeattribute.requestformat.aspx](http://msdn.microsoft.com/en-us/library/system.servicemodel.web.webinvokeattribute.requestformat.aspx)

# windows-installer - windows Installer - 当版本安装策略不同时卸载以前的版本（每个用户，每台机器）

> ID：12110987
> 
> 赞同：5
> 
> 时间：2012-08-24T14:05:42.677
> 
> 标签：windows-installer

我们有一个 visio 插件（例如，版本 1），它由具有管理员权限的用户作为每个用户（'Just me' otpion）安装，并且 msi 安装程序是使用 Visual Studio 的设置和部署创建的。后来因为组织政策到位撤销所有用户的管理员权限被撤销。因此，新版本（版本 2）需要由 IT 管理员作为每台机器（每个人的选项）安装，以便该插件可供该机器上的所有用户使用，并卸载已安装的旧版本（版本 1）由其权限被撤销的用户。

我们正在尝试自动化卸载以避免人工干预。该实用程序通过查看该计算机上的注册表项并使用 msiexec 强制卸载来检测应用程序的所有已安装实例。但是 msiexec 无法卸载其他用户安装的版本，退出代码为 1605 - 此操作仅对当前安装的产品有效

如果用户（安装了版本 1 插件）被授予卸载应用程序的管理员权限，他可以手动卸载它，这证明应用程序没有被篡改并且处于可以毫无问题地卸载的状态。

有关如何以编程方式卸载安装在其他用户使用“仅我”选项安装的计算机上的应用程序的任何指示都会真正有帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T01:26:56.923

我找到了一些进一步的文档：

****如果您使用的是**Installshield ，***则可以使用以下方法来消除现有的****每个用户****安装并在****每台机器上***安装新包。如果您不使用 Installshield，那么您自己的“ISSetAllUsers”替换 CA 也应该可以这样做。以下假设为“主要升级”正确填充了升级表 - 搜索有关主要升级的信息：****

 ****1.  **在FindRelatedProducts**之前插入 Installshield 的**ISSetAllUsers**自定义操作。此操作将为现有安装读取 ALLUSERS 的值，并为新设置强制执行它。有关如何添加此操作的信息，请参见下文。
***   将**RemoveExistingProducts 移到**序列的早期，在**InstallInitialize**之前。*   在**RemoveExistingProducts**使用**设置属性 CA**将**ALLUSERS**设置回 1 之后。*   *上述两个操作都在**InstallInitialize**之前完成是**非常重要*****的。如果在**InstallInitialize之后****ALLUSERS**的值发生变化，所有组件在安装后都会处于无法识别的状态，一般会发生自修复。****

 ******为了插入 ISSetAllUsers 自定义操作，您需要执行以下操作：

1.  在 Installshield 中选择工具 -> 选项 -> 常规 -> 启用“自动创建 ISSetAllUsers 操作”。单击确定。
2.  转到升级视图并插入一个虚拟条目。
3.  转到直接编辑器，从升级表中删除虚拟条目。
4.  应该已插入 ISSetAllUsers 操作。转到 InstallExecuteSequence 视图并将操作移动到 FindRelatedProducts 之前。

**重要提示：**请注意，切勿将**ISSetAllUsers**自定义操作添加到任何项目，除非您需要执行每用户到每台机器的迁移。该操作将有效地确保新安装程序的安装值与旧安装程序相同，除非使用设置属性自定义操作来强制每台机器安装（正如我们在上述场景中所做的那样）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-25T18:38:40.540

这不仅仅是 Visual Studio 的问题。Windows Installer 不允许在升级期间更改安装上下文（用户/机器）。您必须以执行安装的用户配置文件身份执行登录，并在安装新的每台计算机安装之前将其删除。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-29T13:28:22.243

几年前我创建了一个包来做这件事，但我一生都找不到它（[见上面的答案](https://stackoverflow.com/a/12291807/129130)）。我记得它涉及使用**主要升级**和**升级表**在正确用户的上下文中卸载每个用户安装，然后使用**设置属性自定义操作**在新安装命中**InstallInitialize**之前更改**ALLUSERS**的值并执行每台机器新安装。这意味着您必须尽可能早地在**InstallExecuteSequence中移动****RemoveExistingProduct**，然后在其后立即执行 set 属性。

 ******听起来很疯狂，但据我回忆，它在经过一些认真的测试和调试后才起作用。关键部分是以最初安装每个用户安装的用户身份运行新安装程序。这在逻辑上并不总是容易做到的，因为 sccm 可能会在不同的上下文中运行安装。也可能是您必须在序列中更早地移动 RemoveExistingProducts，并在其后面移动一些标准操作以使其工作。我不记得确切 - 对不起。您可以使用**[ActiveSetup](http://www.ewall.org/tech/msi/self-healing)**安排安装“每个用户一次”运行。然后，您可能需要禁止设置 GUI，以避免在安装不存在时向每个用户发送错误消息。

请注意，上述操作在 Orca 中很难做到。在 Wise for Windows Installer 或 Installshield 中尝试。请注意，Installshield 软件包也有自己的方式来重新提取 ALLUSERS 的值，您可能需要禁用它们的变体才能使您的变体正常工作。这不应该是容易的:-)。****************

# zend-framework - 从 locahhost 工作时如何获取 OAuth 的使用者密钥

> ID：12110989
> 
> 赞同：0
> 
> 时间：2012-08-24T14:06:07.330
> 
> 标签：zend-framework, oauth, calendar

我试图将谷歌日历集成到我的 php 应用程序中。我设法使用 zend 框架执行诸如插入事件之类的操作。但是在进行身份验证和授权时，我首先选择了客户端登录方法，但后来我读到这个解决方案对于 Web 浏览器应用程序是不可能的。所以我将使用 Zend-OAuth。这是链接[http://framework.zend.com/manual/en/zend.oauth.introduction.html](http://framework.zend.com/manual/en/zend.oauth.introduction.html)。要进行此类身份验证，需要密钥和消费者密钥。我的问题是我使用[https://code.google.com/apis/console](https://code.google.com/apis/console)注册了应用程序，但我得到的只是密钥、客户端 ID 和 API 密钥。我不知道如何获得消费者密钥。此外，回调 URL 和站点 URL 是必需的，我不知道在从 localhost 工作时如何设置这些值。

有人可以帮我吗？我是新来的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T16:29:08.003

您的 Google Client ID 是您的 Consumer Key，Client Secret 是您的 Secret Key。如果您使用的是 localhost，那么只需将 localhost 作为站点 URL。它将默认回调 URL 为`https://localhost/oauth2callback`. 您可以更改回调 URL（或通过单击更多选项链接添加其他站点 URL）。

# sql-server - 哪些 Progress 数据类型对应于哪些 SQL Server 数据类型？

> ID：12110990
> 
> 赞同：2
> 
> 时间：2012-08-24T14:06:08.587
> 
> 标签：sql-server, sql-server-2008, types, openedge, progress-db

我需要将数据从 Progress 服务器导入到 SQL Server。作为中间步骤，我需要找出 Progress 服务器中字段的相应数据类型。我没有太多运气在网上找到这个。有人有等效数据类型的表吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-24T20:13:27.483

您可以在此处找到进度文档：http: [//communities.progress.com/pcom/docs/DOC-16074](http://communities.progress.com/pcom/docs/DOC-16074) “SQL 开发”文档具有以下 ABL/SQL 数据类型映射：

```
ABL Type    SQL Type

ARRAY       ARRAY, VARARRAY
BLOB        LVARBINARY, BLOB
CHARACTER   VARCHAR, CHAR
CLOB        CLOB, LVARCHAR
DATE        DATE
DATETIME    TIMESTAMP
DATETIME-TZ TIMESTAMP WITH TIME ZONE
DECIMAL     DECIMAL or NUMERIC
INTEGER     INTEGER
LOGICAL     BIT
RAW         VARBINARY
RECID       INTEGER 
```

# android - CursorWindowAllocationException：无法从活页夹创建光标窗口

> ID：12110994
> 
> 赞同：1
> 
> 时间：2012-08-24T14:06:30.030
> 
> 标签：android, sqlite, cursor

运行我的代码时，我得到了这个 CursorWindowAllocationException：

代码：

```
 try{
        Uri uri;
        uri = RawContactsEntity.CONTENT_URI;

        final String selection = Data.CONTACT_ID + "=?";
        final String[] selectionArgs = new String[] { contactId.id };
        cur = _resolver.query(uri, null, selection, selectionArgs, null);
        if (cur == null)
            return null;
        if (cur.moveToFirst() == false)
        {
            cur.close();
            return null;
        }
        entityIterator = RawContacts.newEntityIterator(cur);

        if (entityIterator == null)
        {
            Logger.error(TAG, "EntityIterator is null");
            return null;
        }

        while (entityIterator.hasNext())
        {
            Entity entity = entityIterator.next();
            for (NamedContentValues namedContentValues : entity
                    .getSubValues())
            {
                ContentValues contentValues = namedContentValues.values;
                String key = contentValues.getAsString(Data.MIMETYPE);
                if (key != null)
                {
                    contentValuesList.add(contentValues);
                }
            }
        }
    }
    finally
    {
        if (cur != null)
        {
            cur.close();
        }
        if (entityIterator != null)
        {
            entityIterator.close();
        }
    } 
```

但有时我会得到这个例外：

```
android.database.CursorWindowAllocationException: Cursor window could not be created from binder.
    at android.database.CursorWindow.<init>(CursorWindow.java:141)
    at android.database.CursorWindow.<init>(CursorWindow.java:41)
    at android.database.CursorWindow$1.createFromParcel(CursorWindow.java:697)
    at android.database.CursorWindow$1.createFromParcel(CursorWindow.java:695)
    at android.database.CursorWindow.newFromParcel(CursorWindow.java:706)
    at android.database.BulkCursorProxy.getWindow(BulkCursorNative.java:196)
    at android.database.BulkCursorToCursorAdaptor.onMove(BulkCursorToCursorAdaptor.java:94)
    at android.database.AbstractCursor.moveToPosition(AbstractCursor.java:178)
    at android.database.AbstractCursor.moveToFirst(AbstractCursor.java:201)
    at android.database.CursorWrapper.moveToFirst(CursorWrapper.java:65)
    at android.content.CursorEntityIterator.<init>(CursorEntityIterator.java:39)
    at android.provider.ContactsContract$RawContacts$EntityIteratorImpl.<init>(ContactsContract.java:2844)
    at android.provider.ContactsContract$RawContacts.newEntityIterator(ContactsContract.java:2818)
    at com.wangma.wubi.datasource.device.contact.ContactDeviceDataSource.loadOneContact(ContactDeviceDataSource.java:156)
    at com.wangma.wubi.services.upload.grammar.content.ContactList$1.getNext(ContactList.java:73)
    at com.wangma.wubi.services.upload.grammar.content.UriWordListBase$PlatformFullIterator.hasNext(UriWordListBase.java:60)
    at com.wangma.wubi.services.upload.grammar.content.WordListBase.findChangeList(WordListBase.java:530)
    at com.wangma.wubi.services.upload.grammar.content.WordListBase.platformFullUpdate(WordListBase.java:454)
    at com.wangma.wubi.services.upload.grammar.content.WordListBase.goPlatformFullUpdate(WordListBase.java:437)
    at com.wangma.wubi.services.upload.grammar.content.WordListBase.access$1200(WordListBase.java:38)
    at com.wangma.wubi.services.upload.grammar.content.WordListBase$1.update(WordListBase.java:422)
    at com.wangma.wubi.services.upload.grammar.content.WordListBase$PendingFullUpdate$1.run(WordListBase.java:174)
    at android.os.Handler.handleCallback(Handler.java:605)
    at android.os.Handler.dispatchMessage(Handler.java:92)
    at android.os.Looper.loop(Looper.java:137)
    at com.nuance.balerion.services.jobs.LooperJob$LooperStarter.run(LooperJob.java:74)
    at java.lang.Thread.run(Thread.java:856) 
```

虽然这种崩溃并不容易重现，但它确实偶尔会发生。有谁知道为什么会发生这种情况？