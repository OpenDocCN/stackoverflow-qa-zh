# StackOverflow 问答 12291000-12291999

# c - 此代码段中的“：”是什么意思？

> ID：12291001
> 
> 赞同：2
> 
> 时间：2012-09-05T23:12:09.883
> 
> 标签：c

```
struct file_operations memory_fops = {
  read: memory_read,
  write: memory_write,
  open: memory_open,
  release: memory_release
}; 
```

此代码段中的“：”是什么意思？谢谢你。这是来自linux驱动程序代码。更完整的代码在这里：

```
/* Necessary includes for device drivers */
#include <linux/init.h>
#include <linux/config.h>
#include <linux/module.h>
#include <linux/kernel.h> /* printk() */
#include <linux/slab.h> /* kmalloc() */
#include <linux/fs.h> /* everything... */
#include <linux/errno.h> /* error codes */
#include <linux/types.h> /* size_t */
#include <linux/proc_fs.h>
#include <linux/fcntl.h> /* O_ACCMODE */
#include <asm/system.h> /* cli(), *_flags */
#include <asm/uaccess.h> /* copy_from/to_user */

MODULE_LICENSE("Dual BSD/GPL");

/* Declaration of memory.c functions */
int memory_open(struct inode *inode, struct file *filp);
int memory_release(struct inode *inode, struct file *filp);
ssize_t memory_read(struct file *filp, char *buf, size_t count, loff_t *f_pos);
ssize_t memory_write(struct file *filp, char *buf, size_t count, loff_t *f_pos);
void memory_exit(void);
int memory_init(void);

/* Structure that declares the usual file */
/* access functions */
struct file_operations memory_fops = {
  read: memory_read,
  write: memory_write,
  open: memory_open,
  release: memory_release
};

/* Declaration of the init and exit functions */
module_init(memory_init);
module_exit(memory_exit);

/* Global variables of the driver */
/* Major number */
int memory_major = 60;
/* Buffer to store data */
char *memory_buffer; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T23:18:27.393

这是一个 Gnu C 扩展。基本上，它允许以任何顺序在初始化程序中指定元素。

[http://gcc.gnu.org/onlinedocs/gcc/Designated-Inits.html](http://gcc.gnu.org/onlinedocs/gcc/Designated-Inits.html)

UPD：执行相同操作的标准（C99）方法是`{ .field = value, .field2 = value2 }`

# javascript - 递归链接 Promise

> ID：12291003
> 
> 赞同：17
> 
> 时间：2012-09-05T23:12:32.323
> 
> 标签：javascript, windows-8, winjs

我正在开发一个简单的 Windows 8 应用程序，我需要在其中从网站获取一组数据。我正在使用 WinJS.xhr() 来检索此数据，该数据返回一个 Promise。然后我将一个回调传递给这个 Promise 的 .then() 方法，该方法为我的回调提供异步调用的返回值。.then() 方法返回另一个 Promise，给它我的回调返回的值。这种查询的基本结构如下：

```
WinJS.xhr({ url: "http://www.example.com/" }).then(
    function callback( result_from_xhr )
    {
        //do stuff
        return some_value;
    }).then(
    function secondcallback( some_value )
    {
        //do stuff
    }); 
```

但是，在我的情况下，我可能需要根据第一个查询返回的数据对数据进行额外的查询，并且可能需要根据该数据进行更多查询......等等，递归。

我需要一种方法对此进行编码，以便在所有递归完成之前不执行最终的 .then() ，类似于以下内容：

```
function recurse() {
    return WinJS.xhr({ url: "http://www.example.com/" }).then(
        function callback( result_from_xhr )
        {
            if( result_from_xhr == something )
            {
               recurse();
            }
        });
}

recurse().then(
function final()
{
    //finishing code
}); 
```

问题是，当然，一旦第一级递归完成，就会调用完成代码。我需要一些方法在回调中嵌套新的承诺和旧的承诺。

我希望我的问题足够清楚，我真的不知道如何解释它，坦率地说异步递归代码的想法让我很头疼。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-06T22:50:58.070

我在这里要做的是创建一个全新的、独立的 Promise，您可以手动完成它，并从 recurse() 函数中返回它。然后，当你知道你已经完成了异步工作时，完成那个承诺。

Promise.join 在你有一组已知的 Promise 时工作——你需要在调用 join 之前提供整个 Promise 数组。如果我按照最初的问题进行操作，那么您有不同数量的承诺，更有可能作为异步工作的一部分弹出。在这些情况下，加入不是正确的工具。

那么，这看起来像什么？像这样的东西：

```
function doSomethingAsync() {
  return new WinJS.Promise(function (resolve, reject) {
    function recurse() {
      WinJS.xhr({ url: "http://www.example.com/" })
        .then(function onResult(result_from_xhr) {
          if (result_from_xhr === something) {
            recurse();
          } else {
            // Done with processing, trigger the final promise
            resolve(whateverValue);
          },
          function onError(err) {
            // Fail everything if one of the requests fails, may not be
            // the right thing depending on your requirements
            reject(err);
          });
    }
    // Kick off the async work
    recurse();
  });
}

doSomethingAsync().then(
function final()
{
    //finishing code
}); 
```

我重新安排了递归发生的位置，这样我们就不会每次都重新创建一个新的 Promise，因此嵌套的 recurse() 函数而不是将它放在外部级别。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-07-04T16:54:06.520

在制作自己的 Windows 8 应用程序时，我可能以不同的方式解决了这个问题（我认为这是同一个问题）。

我遇到这个问题的原因是，默认情况下，对表的查询将分页，并且一次只返回 50 个结果，所以我创建了一个模式来获取前 50 个，然后是下一个 50，等等，直到响应返回少于 50 个结果，然后解决承诺。

这段代码不是真正的代码，只是为了说明：

```
function getAllRows() {
    return new WinJS.Promise(function(resolve, reject){

        var rows = [];

        var recursivelyGetRows = function(skipRows) {
            table.skip(skipRows).read()
                .then(function(results){
                    rows = rows.concat(results);

                    if (results.length < 50) {
                        resolve(rows);
                    } else {
                        recursivelyGetRows(skipRows + 50);
                    }
                })
        }

        recursivelyGetRows(0);

    });
} 
```

所以 getAllRows() 返回一个只有在我们得到少于 50 个结果的结果（这表明它是最后一页）后才会解析的承诺。

根据您的用例，您可能还想在其中抛出一个错误处理程序。

如果不清楚，“表”是移动服务表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T23:28:19.860

您将需要使用 Promise.join().done() 模式。将一组 Promises 传递给 join()，在您的情况下，这将是 xhr 调用的集合。join() 只会在所有 xhr Promise 完成后调用 done()。您将获得一个传递给 done() 的结果数组，然后您可以对其进行迭代并通过新的 Promise.join().done() 调用重新开始。使用这种方法时要避免的是，如果传递给 join() 的 Promise 之一失败，则整个操作将被视为错误条件。

抱歉，我现在没有时间尝试为您编写代码。如果有机会，我会在以后尝试。但是您应该能够将其插入到您的递归函数中并使事情正常工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T00:08:43.290

好吧，我解决了我的问题；我的递归函数误解了数据，因此从未停止递归。感谢您的帮助，我一定会观看这些截屏视频，因为我还没有完全掌握 Promise 链结构。

# javascript - Extjs 4：使用 ux.center

> ID：12291006
> 
> 赞同：0
> 
> 时间：2012-09-05T23:12:46.247
> 
> 标签：javascript, extjs, extjs4, javascript-framework

我在使用自定义布局 ux.center 时遇到问题。我做错了 Ext.Loader 或 Ext.require 吗？Center.js 文件位于 /var/www/application/ux/layout/Center.js 下，此文件 (app.js) 位于 /var/www/application/app.js 下

```
Ext.Loader.setPath('Ext.ux', '/var/www/application/ux');
Ext.require('Ext.ux.layout.Center');
Ext.application({
    name: 'AM',
    appFolder: 'app',
    controllers: ['Users'],
    launch: function(){
            Ext.state.Manager.setProvider(Ext.create('Ext.state.CookieProvider'));
            Ext.create('Ext.container.Viewport', {
                    width: 1150,
                    height: 'auto',
                    autoScroll: 'true',
                    layout: 'anchor',
                    items:[{xtype: 'userpanel'},
                    {
                            xtype: 'panel',
                            width: 1150,
                            layout:'ux.center',
                            items:[{ 
                                    xtype: 'panel',
                                    width: 1150,
                                    widthRatio: .75,
                                    items: [{
                                            xtype: 'userbutton',
                                            action: '',
                                            text: 'Print'
                                    },
                                    {
                                            xtype: 'userbutton',
                                            action: '',
                                            text: 'Download'
                                    },
                                    {
                                            xtype: 'userbutton',
                                            action: 'chart',
                                            text: 'Chart!'
                                    }]
                            }]}]
            });
}}); 
```

感谢您提供有关使此布局正常工作的任何提示

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T15:23:45.207

您应该在 extjs 加载 /var/www/application/ux/layout/Center.js 脚本后运行 Ext.application 方法。为此，只需使用 Ext.onReady 添加回调

```
Ext.Loader.setPath('Ext.ux', '/var/www/application/ux');
Ext.require('Ext.ux.layout.Center');

Ext.onReady(function () {
    Ext.application({ ... });
}); 
```

但正确的方法是使用“需要”配置属性

```
Ext.application({
    requires: ['Ext.ux.layout.Center'],
    name: 'AM',
    appFolder: 'app',        
    controllers: ['Users'],
    launch: function(){
            Ext.state.Manager.setProvider(Ext.create('Ext.state.CookieProvider'));
            Ext.create('Ext.container.Viewport', {
                    width: 1150,
                    height: 'auto',
                    autoScroll: 'true',
                    layout: 'anchor',
                    items:[{xtype: 'userpanel'},
                    {
                            xtype: 'panel',
                            width: 1150,
                            layout:'ux.center',
                            items:[{ 
                                    xtype: 'panel',
                                    width: 1150,
                                    widthRatio: .75,
                                    items: [{
                                            xtype: 'userbutton',
                                            action: '',
                                            text: 'Print'
                                    },
                                    {
                                            xtype: 'userbutton',
                                            action: '',
                                            text: 'Download'
                                    },
                                    {
                                            xtype: 'userbutton',
                                            action: 'chart',
                                            text: 'Chart!'
                                    }]
                            }]}]
            });
}}); 
```

您也可以阅读以下材料[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.app.Application](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.app.Application)

您还可以为视口创建自己的类并将其放在 [appFolder]/view/ 文件夹中

```
Ext.define('AM.view.Viewport', {
    extend: 'Ext.view.Viewport',

    requires: ['Ext.ux.layout.Center'],

    width: 1150,
    height: 'auto',
    autoScroll: 'true',
    layout: 'anchor',

    initComponent: function () {
        this.items = [{
            xtype: 'userpanel'
        }, {
            xtype: 'panel',
            width: 1150,
            layout:'ux.center',
            items:[{ 
                xtype: 'panel',
                width: 1150,
                widthRatio: .75,
                items: [{
                    xtype: 'userbutton',
                    action: '',
                    text: 'Print'
                }, {
                    xtype: 'userbutton',
                    action: '',
                    text: 'Download'
                }, {
                    xtype: 'userbutton',
                    action: 'chart',
                    text: 'Chart!'
                }]
            }]
        }];
        this.callParent();
    }
}); 
```

并使用 Ext.app.Application 配置属性**autoCreateViewport**。它将加载 [appFolder]/view/Viewport.js 脚本并将其用作视口

```
Ext.application({
    name: 'AM',
    appFolder: **insert you app folder path here**, // in you case it will be 'application'       
    controllers: ['Users'],
    autoCreateViewport: true
}); 
```

# c++ - Clang API解析析构函数

> ID：12291012
> 
> 赞同：1
> 
> 时间：2012-09-05T23:13:08.663
> 
> 标签：c++, api, clang

我正在使用 clang API（版本 3.1 - trunk 153913）编译一些非常简单的代码，如下所示：

```
class MyClass
{
   ~MyClass() ;

};

MyClass::~MyClass()
{

}

int main()
{
   return 0;
} 
```

我的问题是我收到错误消息：test.cpp:20:10: error: destructor cannot have a return type `MyClass::~MyClass()`

如果有人能指出我正确的方向，那就太好了。如果析构函数是内联定义的，它编译得很好。

请注意，我也可以使用 clang++ 进行编译：-bash-4.1$ clang++ test.cpp

因此，在我的 clang API 使用中必须有一个我缺少的设置。谁能指出那可能是什么。我一直在寻找缺少的选项/配置。

这是我的 clang API 用法：

```
// Include appropriate headers. 
int main()
{
    clang::DiagnosticOptions diagnosticOptions;
    diagnosticOptions.ShowColors=1;
    diagnosticOptions.ShowOptionNames=1;
    clang::TextDiagnosticPrinter *pTextDiagnosticPrinter =
       new clang::TextDiagnosticPrinter(
           llvm::outs(),
           diagnosticOptions);
    llvm::IntrusiveRefCntPtr<clang::DiagnosticIDs> pDiagIDs;
    clang::DiagnosticsEngine *pDiagnosticsEngine =
       new clang::DiagnosticsEngine(pDiagIDs, pTextDiagnosticPrinter);

    clang::LangOptions languageOptions;
    languageOptions.GNUMode = 1;
    languageOptions.CXXExceptions = 1;
    languageOptions.RTTI = 1;
    languageOptions.Bool = 1;
    languageOptions.CPlusPlus = 1;
    clang::FileSystemOptions fileSystemOptions;
    clang::FileManager fileManager(fileSystemOptions);

    clang::SourceManager sourceManager(
      *pDiagnosticsEngine,
      fileManager);

    clang::TargetOptions targetOptions;
     targetOptions.Triple = "x86_64-unknown-linux-gnu";
    targetOptions.CPU = "x86-64";

    clang::TargetInfo *pTargetInfo =
    clang::TargetInfo::CreateTargetInfo(
        *pDiagnosticsEngine,
        targetOptions);

    clang::HeaderSearch headerSearch(fileManager,
                                 *pDiagnosticsEngine,
                                 languageOptions,
                                 pTargetInfo);
    clang::CompilerInstance compInst;
    compInst.getTargetOpts() = targetOptions;
    compInst.getLangOpts().CPlusPlus = 1;
    compInst.getLangOpts().Bool = 1;

    clang::HeaderSearchOptions &headerSearchOpts = compInst.getHeaderSearchOpts();
    headerSearchOpts = headerSearchOptions;

    clang::CompilerInvocation &compInvocation = compInst.getInvocation();

    clang::FrontendOptions & frontendOpts = compInvocation.getFrontendOpts();
    frontendOpts.ProgramAction = clang::frontend::EmitObj;

    clang::CodeGenOptions & codeGenOpts = compInvocation.getCodeGenOpts ();

    codeGenOpts.RelaxAll = 1;
    codeGenOpts.DebugInfo = 1;
    codeGenOpts.RelocationModel = "static";
    codeGenOpts.DisableFPElim = 1;
    codeGenOpts.AsmVerbose = 1;
    codeGenOpts.CXXCtorDtorAliases= 1;
    codeGenOpts.UnwindTables = 1;
    codeGenOpts.OmitLeafFramePointer = 1;
    codeGenOpts.StackRealignment = 1;

    std::vector<std::string> res;
    compInvocation.toArgs (res);

    std::vector<std::string>::iterator it;

   std::cout << "Arguments: " << std::endl;
   for (it = res.begin(); it != res.end(); it++)
   {
      std::string arg = *it;
      std::cout << "Arg: " << arg << std::endl;
   }

   clang::Preprocessor preprocessor(
    *pDiagnosticsEngine,
    languageOptions,
    pTargetInfo,
    sourceManager,
    headerSearch,
    compInst);

   preprocessor.getBuiltinInfo().InitializeBuiltins
    (preprocessor.getIdentifierTable(),
     languageOptions);

   clang::PreprocessorOptions preprocessorOptions;

   clang::FrontendOptions frontendOptions;
   frontendOptions.DisableFree=1;
   clang::InitializePreprocessor(
    preprocessor,
    preprocessorOptions,
    headerSearchOptions,
    frontendOptions);

   const clang::FileEntry *pFile = fileManager.getFile(
    "test.cpp");
   sourceManager.createMainFileID(pFile);
   const clang::TargetInfo &targetInfo = *pTargetInfo;

   clang::IdentifierTable identifierTable(languageOptions);
   clang::SelectorTable selectorTable;

   clang::Builtin::Context builtinContext;
   builtinContext.InitializeTarget(targetInfo);
   builtinContext.InitializeBuiltins(identifierTable, languageOptions);

   clang::ASTContext astContext(
    languageOptions,
    sourceManager,
    pTargetInfo,
    identifierTable,
    selectorTable,
    builtinContext,
    0 /* size_reserve*/);
    MyASTConsumer astConsumer;

    clang::Sema sema(
    preprocessor,
    astContext,
    astConsumer);

    pTextDiagnosticPrinter->BeginSourceFile(languageOptions, &preprocessor);
    clang::ParseAST (preprocessor, &astConsumer, astContext);
    pTextDiagnosticPrinter->EndSourceFile();

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-20T07:49:10.750

你不见了

```
languageOptions.ImplicitInt = 0; 
```

如果没有此配置，任何没有显式返回类型的函数都将设置为 int 返回类型，并在检查析构函数返回类型时引发错误，从而引发错误。使用上述配置，Sema 阶段不会引发错误，因为析构函数返回类型将保持未定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-05T00:22:06.040

几乎可以肯定，您的原始代码（在您减少它之前）缺少分号。

```
class MyClass
{
   ~MyClass() ;

}  // right here

MyClass::~MyClass()
{

}

int main()
{
   return 0;
} 
```

这导致类类型定义被视为随后的函数定义的返回类型。

# java - Java - 处理监听器

> ID：12291013
> 
> 赞同：-1
> 
> 时间：2012-09-05T23:13:23.110
> 
> 标签：java, user-interface

我对图形用户界面比较陌生，我已经创建了一个实现基本计算器功能的界面。这些方法包括：add()、subtract()、multiply() 和 divide()。我的 actionPerformed 方法中出现错误，提示“Operate 类型中的方法 add(int, int) 不适用于参数 (int)。” 我已经尝试将我传递给我的公共类 Operate 的变量包括在内，但我仍然收到此错误。我该如何解决这个问题？

这是我的这种方法的代码：

```
JButton btnNewButton_10 = new JButton("+");
btnNewButton_10.setFont(new Font("Helvetica Neue", Font.PLAIN, 15));
btnNewButton_10.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent e) {

        int myFunction = calculate.add(Integer.parseInt(textDisplay.getText())); // The error is specifically underlining the keyword "add"
        textDisplay.setText(""); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T23:15:32.580

您正在尝试`add`1 `int`，显然您的 add 函数想要将`add`两个`int`s 放在一起。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T23:15:36.097

Ìt 似乎您的`add`方法需要 2 个 int 参数，但您只传入了一个。

你需要这样的东西：

```
int myFunction = calculate.add(Integer.parseInt(textDisplay.getText()), myOtherIntNumber); 
```

# c# - 取消操作/UI 通知和 UI 信息？

> ID：12291016
> 
> 赞同：0
> 
> 时间：2012-09-05T23:13:51.780
> 
> 标签：c#, winforms, .net-4.0, task-parallel-library, tpl-dataflow

我目前正在开发一个使用 Tasks.Dataflow 的小项目，我对 UI 通知有点困惑。我想在另一个名为 的类中将我的“管道”与 UI 分开`PipelineService`，但我无法通知 UI 已取消的操作或应显示在 UI 中的数据。如何以正确的方式处理？

代码：

```
 private void btnStartPipeline_Click(object sender, EventArgs e)
    {
        btnStartPipeline.Enabled = false;
        btnStopPipeline.Enabled = true;

        cancellationToken = new CancellationTokenSource();

        if (head == null)
        {
            head = pipeline.SearchPipeline();        
        }

        head.Post(AppDirectoryNames.STORE_PATH);
    }

    private void btnStopPipeline_Click(object sender, EventArgs e)
    {
        cancellationToken.Cancel();
    } 
```

此方法与`Form1.cs`. `head`是`ITargetBlock<string>`.

```
 public ITargetBlock<string> SearchPipeline()
    { 
        var search = new TransformBlock<string, IEnumerable<FileInfo>>(path =>
            {
                try
                {
                    return Search(path);
                }
                catch (OperationCanceledException)
                {
                    return Enumerable.Empty<FileInfo>();
                }
            });

        var move = new ActionBlock<IEnumerable<FileInfo>>(files =>
            {
                try
                {
                    Move(files);
                }
                catch (OperationCanceledException ex)
                {
                    throw ex;
                }
            });

        var operationCancelled = new ActionBlock<object>(delegate
            {

                form.Invoke(form._update);
            },
            new ExecutionDataflowBlockOptions
            {
                TaskScheduler = TaskScheduler.FromCurrentSynchronizationContext()
            });

        search.LinkTo(move);

        search.LinkTo(operationCancelled);

        return search;
    } 
```

`Invoke`不使用委托方法生效。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T00:08:03.553

起初，我不明白你为什么认为你的代码应该工作。您设置数据流网络的方式，块`IEnumerable<FileInfo>`生成的每个`search`首先发送到`move`块。如果`move`块不接受它（这里从未发生过），它将被发送到`operationCancelled`块。这似乎根本不是你想要的。

在查看[演练之后，您的代码似乎基于](http://msdn.microsoft.com/en-us/library/hh228605)，它的取消与您相似，但有一个显着区别：它`LinkTo()`与谓词一起使用，该谓词拒绝表示取消的消息。如果你想做同样的事情，你还需要使用`LinkTo()`谓词。而且由于我认为空序列不是表示取消的好选择，我认为您也应该切换到`null`。

此外，`form.Invoke()`如果您已经在使用`TaskScheduler.FromCurrentSynchronizationContext()`，则无需使用，它们的作用基本相同。

```
public ITargetBlock<string> SearchPipeline()
{ 
    var search = new TransformBlock<string, IEnumerable<FileInfo>>(path =>
        {
            try
            {
                return Search(path);
            }
            catch (OperationCanceledException)
            {
                return null;
            }
        });

    var move = new ActionBlock<IEnumerable<FileInfo>>(files =>
        {
            try
            {
                Move(files);
            }
            catch (OperationCanceledException)
            {
                // swallow the exception; we don't want to fault the block
            }
        });

    var operationCancelled = new ActionBlock<object>(_ => form._update(),
        new ExecutionDataflowBlockOptions
        {
            TaskScheduler = TaskScheduler.FromCurrentSynchronizationContext()
        });

    search.LinkTo(move, files => files != null);

    search.LinkTo(operationCancelled);

    return search;
} 
```

# jquery - Facebook Like 按钮在加载隐藏时不显示

> ID：12291017
> 
> 赞同：28
> 
> 时间：2012-09-05T23:13:52.137
> 
> 标签：jquery, html, css, facebook-like

我有点坚持这个。我有一个文章列表，其中包含链接到整篇文章的片段。当您将鼠标悬停在每个简介上时，简介底部会出现一个包含社交分享按钮（FB、Twitter 和 G+1）的栏。

[http://jsfiddle.net/6Ukmb/](http://jsfiddle.net/6Ukmb/)

请注意，jsfiddle 示例中的格式已被删除，并且 G+1 无法正常工作 - 对这个问题并不重要。

我的问题是 FB like 按钮未正确加载。在 Chrome 中，一切都按预期工作。在 FF 或 IE 中，FB 按钮加载“隐藏”，我无法让它们出现。

如果页面仍在加载时，您的鼠标悬停在某个文章按钮上，则该文章的 FB 按钮可以正常加载。如果FB加载完成时悬停效果隐藏，则不会出现爱情或金钱。

我把它拆开，发现如果我`display: none;`从中删除 css `content-box .story-hover`，它加载得很好。当然，这也意味着隐藏的面板加载可见，直到有人将鼠标悬停在它们上方以隐藏，这将不起作用。

我不知道如何解决这个问题。此外，由于类似 FB 的按钮数量较多，因此在我的开发版本中速度会稍慢一些，因此延迟`display:none`直到页面加载结束也不起作用。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-03T01:25:43.440

我使用的另一种方法是在显示容器之前不呈现类似 fb 的按钮，这可以通过使用来实现

```
window.fbAsyncInit = function () {
    FB.init({
        xfbml:false  // Will stop the fb like button from rendering automatically
    });
}; 
```

然后渲染你可以使用的like按钮

```
FB.XFBML.parse(); // This will render all tags on the page 
```

或以下是关于如何在元素内呈现所有 XFBML 的 Jquery 示例

```
FB.XFBML.parse($('#step2')[0]); 
```

或纯 javascript

```
FB.XFBML.parse(document.getElementById("step2")); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-08T18:57:49.980

在这里使用 CSS`opacity`是一个不错的选择.. 一些基本的东西是这样的：

HTML

```
<div class="div">
  <div class="social"></div>
</div> 
```

CSS

```
.div {
     opacity: 0;
     filter:alpha(opacity=0);
     }
.div:hover .social {
     opacity: 1.0;
     filter:alpha(opacity=100);
     } 
```

从那里您可以添加过渡以使其看起来不错！

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-20T22:04:55.260

我们遇到了同样的问题，并通过使用 CSS 将包含 div 的初始宽度和高度设置为零来解决它，然后，当触发器被激活时，使用 jQuery 来：

*   将不透明度设置为零（在展开时隐藏 div）
*   设置宽度和高度（展开 div）
*   将不透明度设置为 1（淡入 div）

淡出时，无需将宽度和高度重置为零。将不透明度设置为零后，只需设置为 display:none 即可。现在 Facebook 按钮已加载并设置了尺寸，它不会改变。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-10-15T23:36:34.957

opacity 方法有效，但是，按钮在页面上是活动的，只是不可见。

因此，如果您的不透明度为 0 的 div 与您需要单击的任何其他内容重叠，您将不小心单击隐藏的按钮。

我希望这种方法能奏效，可悲的是，对于我的网站来说，这不是由于这个原因。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-09-20T13:38:27.280

使用这个 CSS：

```
.fb_iframe_widget span,
iframe.fb_iframe_widget_lift,
.fb_iframe_widget iframe {
    width:80px !important;
    height:20px !important;
    position:relative;
} 
```

背后的技术：您使用“！important”用您的CSS覆盖来自facebook的数据

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-18T22:08:42.080

**这不是答案，这是评论！希望我会回来并努力解决它并将其变成答案。**

处理同样的问题。Firefox + 隐藏容器。唯一的区别是我使用 onclick slideDown/slideUp 来取消隐藏/隐藏，但我认为这无关紧要。

剥离下来，我的 html 看起来像这样：

```
<div id="fb_like_button" class="hide">
   <div class="fb-like" data-action="recommend" ...></div>
</div> 
```

我注意到隐藏容器和非隐藏容器之间的区别，即从 div#fb_like_button 中删除我的“隐藏”类，`<span>`并且`<iframe>`facebook 放置在 div.fb-like 中会更改样式属性的宽度和高度。

所以，当页面被渲染时（再次，大量剥离 html）

未隐藏：

```
<div id="fb_like_button" class="">
   <div class="fb-like" data-action="recommend" ...>
     <span style="height: 61px; width: 97px;">
       <iframe style="height: 61px; width: 97px;"> 
```

隐：

```
<div id="fb_like_button" class="hide">
  <div class="fb-like" data-action="recommend" ...>
    <span style="height: 0px; width: 0px;">
      <iframe style="height: 0px; width: 0px;"> 
```

在完成渲染后使用 Firefox 开发人员工具使用宽度和高度样式让我可以将点赞按钮恢复为可见状态。

还没有解决方案，但我会在找到更多信息时不断更新。我将非常努力地不添加额外的 javascript 来设置这些样式属性，而是解码 wtf facebook 正在做的事情。只是希望这可以帮助某人。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-19T15:27:36.300

而不是设置 display: none，尝试使用 margin-top 或 z-index 隐藏它。这两个都不会破坏 FB like 按钮。

```
.hide2 {
   margin-top: -1000px !important;
   position: relative ;
   z-index: -1 !important;
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-02-28T08:27:45.107

将 opacity 设置为 0 对我来说不是一个解决方案，因为它会隐藏和重叠您需要单击的任何内容，并且 jquery fadein 函数使用 css display 属性而不是 opacity。

所以我想出的解决方案是将容器显示为块但在窗口左侧：-9999px，然后我将计时器设置为 1s~2s（所有社交按钮渲染所需的时间）并将显示更改为无并回到原来的位置：

```
#bnts_container
{
  left:-9999px;
  display:block;
}

$(window).load(function () {

  setTimeout(function () {
     $('#bnts_container').css("display", "none");
     $('#bnts_container').css("left", "50%");
    } , 2000);

}); 
```

单击[此处](http://refork.com/new)的 +Share 按钮以测试此解决方案。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-09-06T22:25:35.817

每个浏览器在 jsfiddle 上的工作方式都不同。如果您尝试将代码加载到您可以制作的测试 html 文件中。它可能仍然有效。只是不在 js fiddle.. 有时 jquery 不会覆盖 css 文件或标签中的 css 代码.. 所以如果它这样做的话。它可能被隐藏起来。

当我在计算机/浏览器上使用小提琴时，我已经看到它随机发生。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-12-09T02:14:36.507

我更喜欢在容器中使其成为绝对

```
 iframe{
     position: absolute !important;
     height: 500px !important;
  } 
```

# javascript - jQuery事件处理/传播/冒泡？

> ID：12291018
> 
> 赞同：0
> 
> 时间：2012-09-05T23:14:11.993
> 
> 标签：javascript, jquery, html, event-bubbling, event-propagation

我正在尝试为网站创建一个菜单，为此我使用了 jQuery，但遇到了一个小问题。

我有这个结构

```
<div class="menuTitle menuDiv menuNode" id="menuNode_<?=$row_menu["id"]?>">
    <a href="<?=$rt?>" class="menuAnchor" onclick="return registerMenuClick($(this).parent())">
        <span><?=$nodeName?></span>
    </a>
</div>

<div class="menuSelect" id="menuSelect_<?=$row_menu["id"]?>" align="center"><?=$nodeName?></div> 
```

在 jQuery 中，我有

```
$(document).ready(function(){
    $(".menuNode, .menuSelect").live("mouseover",function(event){
    MenuBar.selectedID = $(this).attr("id").replace("menuNode_","").replace("menuSelect_","");
    MenuBar.showThisBranch();
  }).live("mouseout",function(event){
    MenuBar.selectedID = $(this).attr("id").replace("menuNode_","").replace("menuSelect_","");
    MenuBar.hideThisBranch();
  });
}) 
```

当用户将鼠标悬停在 menuNode 上时，应该显示 menuSelect（确实如此），但如果我将鼠标悬停在 menuAnchor 或 span 上，它会触发 mouseout 事件，然后触发 mouseover 事件。

因此，如果说，我将鼠标悬停在 menuNode 上，然后移到 span 然后再次移到 menuNode，它将触发 mouseover 事件 3 次。我之前在单击事件中遇到过这种行为，但似乎用于解决此问题的方法不适用于此问题。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T00:31:02.983

正如@Beetroot-Beetroot 建议的那样，mouseenter/mouseleave 有帮助，再加上 TimeOut 从 menuNode 更改为 menuSelect （进入时 300 毫秒，离开时 500 毫秒）。

# java - 聚合或组合

> ID：12291022
> 
> 赞同：2
> 
> 时间：2012-09-05T23:14:26.907
> 
> 标签：java, oop, design-patterns

我有点困惑，所以如果你能启发我。

1.  当我通过类中的 new 运算符或使用 Singleton 创建对象时，它是一个组合吗？
2.  当我调用工厂方法时，它也是组合吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T23:29:25.023

组合与聚合与组件对象的生命周期有关，而不是与组件对象的实例化方式有关。如果在处置包含对象时处置组件对象，则它是组合。如果组件对象可以继续存在，那就是聚合。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T23:29:40.280

术语“组合”在 UML 和 OOP 中的含义略有不同。

在 UML 中，组合是一种更强的聚合形式，有点像“拥有”关联。

GoF 设计模式一书建议，在 OOP 中，应该优先考虑组合而不是继承。在这种情况下，组合只是意味着通过引用一个类而不是从它继承来提供功能。

看来您混淆了某些术语。创建和对象或调用工厂方法本身并不是组合。

# objective-c - UITableView cellForRowAtIndexPath 复选标记附件设置行为怪异

> ID：12291025
> 
> 赞同：0
> 
> 时间：2012-09-05T23:14:54.470
> 
> 标签：objective-c, uitableview, didselectrowatindexpath, accessory, checkmark

**设置**：我有一个名为“_itemListArray(ivar)”的属性，它设置为“Item(NSString itemName, NSString itemPrice)”列表。我用这些项目填充 UITableView，用户可以选择多行，并在该行上显示一个复选标记。选中单元格的 indexPath 存储到 IVAR(_selectedItemRows)。如果用户再次选择该行，则复选标记附件设置为无，并且 indexPath 从 IVAR(_selectedItemRows) 中删除。在“cellForRowAtIndexPath”中，我根据 _selectedItemRows（已检查单元格的 indexPaths 数组）中的所有 indexPaths 检查当前排队的 indexPath。如果索引路径在数组中，我检查出队的单元格，如果不是，我取消选中它。

**问题**：复选标记附件设置正确（didSelectRowAtIndexPath），但是当我滚动时，它的行为很时髦。例如，如果我检查第一个单元格然后向下滚动，然后向上滚动回第一个单元格，nslogs 已验证我的程序知道检查该单元格，但它似乎没有。
此外，如果我检查 2 个或更多单元格，请向下滚动，然后向上滚动，通常最后一个单元格是唯一检查的。

**代码**：

```
 ```
@implementation  
@synthesize itemListArray = _itemListArray;  
@synthesize selectedItemRows = _selectedItemRows;  
-(void)setItemListArray:(NSArray *)itemListArray  
{  
    _itemListArray = itemListArray;  
    [_propTableView reloadData];  
}  
- (void)viewDidLoad  
{  
    [super viewDidLoad];  
    _selectedItemRows = [[NSMutableArray alloc] init];  
}  
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section  
{  
    // Return the number of rows in the section.  
    return [_itemListArray count];  
}
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath  
{  
    static NSString *CellIdentifier = @"Item Selected Reuse"; //Identifier of prototype cell  
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];     

    if (nil == cell) { //If somethong goes wrong, all hell breaks loose.  
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];  
         NSLog(@"%s", __PRETTY_FUNCTION__);  
    }  
    // Configure the cell...  
    Item *curItem = [_itemListArray objectAtIndex:indexPath.row]; //Get the model information at row location.  
    cell.textLabel.text = curItem.itemName; //Set the name of the item in title field  
    cell.detailTextLabel.text = curItem.itemPrice; //Set the price of the item in the detail field.  
    for(NSIndexPath * elem in _selectedItemRows)
    { //Enumerate through checked cells  
        //NSIndexPath *ip = [_selectedItemRows objectAtIndex:x];  
        if ([indexPath compare:elem] == NSOrderedSame) { //If the current cell index path ='s any index path in the array of checked cells, check this cell.  
            cell.accessoryType = UITableViewCellAccessoryCheckmark;   
        } else {  
            cell.accessoryType = UITableViewCellAccessoryNone;  
        }  
    }  
    return cell;  
}  
//pragma mark - Table view delegate  
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath  
{  
    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath]; //Get cell clicked on.   
    if(cell.accessoryType == UITableViewCellAccessoryNone){ //When selected, if the cell is checked, uncheck it.  
        cell.accessoryType = UITableViewCellAccessoryCheckmark;  
        [_selectedItemRows addObject:indexPath]; //Add the index path of checked cell into array to use later for comparisons  
    } else {  
        if(cell.accessoryType == UITableViewCellAccessoryCheckmark){ //If the cell is checked, uncheck it when clicked on  
            cell.accessoryType = UITableViewCellAccessoryNone;  
            [_selectedItemRows removeObject:indexPath]; //Remove that index path of unchecked cell from index array  
        }  
    }  
    [tableView deselectRowAtIndexPath:indexPath animated:YES];//Deselect row after done.  
}  
@end  
//Other code left out for brevity sake 
``` 
            回答 #1

赞同：1

时间：2012-09-06T01:56:13.470

您的代码中有逻辑错误。想想这段代码发生了什么：

```
for(NSIndexPath * elem in _selectedItemRows)
{ //Enumerate through checked cells  
    //NSIndexPath *ip = [_selectedItemRows objectAtIndex:x];  
    if ([indexPath compare:elem] == NSOrderedSame) { //If the current cell index path ='s any index path in the array of checked cells, check this cell.  
        cell.accessoryType = UITableViewCellAccessoryCheckmark;   
    } else {  
        cell.accessoryType = UITableViewCellAccessoryNone;  
    }  
} 
```

除非当前行的索引路径恰好是`_selectedItemRows`单元格中的最后一个，否则将清除复选标记。它会在找到它时设置复选标记，`_selectedItemRows`然后在继续搜索时取消设置它。相反，您想用以下内容替换它：

```
cell.accessoryType = UITableViewCellAccessoryNone; 
for(NSIndexPath * elem in _selectedItemRows)
{ //Enumerate through checked cells  
    //NSIndexPath *ip = [_selectedItemRows objectAtIndex:x];  
    if ([indexPath compare:elem] == NSOrderedSame) { //If the current cell index path ='s any index path in the array of checked cells, check this cell.  
        cell.accessoryType = UITableViewCellAccessoryCheckmark;
        break;
    }  
} 
```

```

# jquery - 使用 setInterval 自动旋转 jq.carousel，并在悬停时暂停

> ID：12291027
> 
> 赞同：1
> 
> 时间：2012-09-05T23:15:12.173
> 
> 标签：jquery, setinterval, carousel

我正在使用[jq.carousel](http://5509.github.com/jq.carousel/#sample)并且因为它没有内置的自动旋转功能，所以我使用 setInterval 通过调用每秒推进它`$carouselHome.carousel('next')`。

这可行，但我需要添加“悬停暂停”。到目前为止，这是我所拥有的，只有在鼠标进入并离开元素一次后才能按要求工作。我将如何“开始”第一页加载的时间间隔？（例如：http: [//jsfiddle.net/meredevelopment/hmUbd/](http://jsfiddle.net/meredevelopment/hmUbd/)）

```
var $carouselHome = $('#carousel-home').carousel();

$('#carousel-home_prev').on('click', function(ev) {
    $carouselHome.carousel('prev');
});

$('#carousel-home_next').on('click', function(ev) {
    $carouselHome.carousel('next');
});

/*setInterval(function() {
    $carouselHome.carousel('next');
}, 1000);*/

$("#carousel-home").mouseenter(function(){
    clearInterval($(this).data('timeoutId'));
}).mouseleave(function(){
    var someElement = $(this);
    var timeoutId = setInterval(function() {
        $carouselHome.carousel('next');
    }, 1000);
    console.log(timeoutId);
    someElement.data('timeoutId', timeoutId); 
}); 
```

谢谢！本

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T23:33:39.253

像这样的东西应该工作：

```
if ($("#carousel-home").length > 0) {
    var $carouselHome = $('#carousel-home').carousel();

    var timeoutId = setInterval(function() {
       $carouselHome.carousel('next');
    }, 1000);

    $('#carousel-home_prev').on('click', function(ev) {
        $carouselHome.carousel('prev');
    });
    $('#carousel-home_next').on('click', function(ev) {
        $carouselHome.carousel('next');
    });

    $("#carousel-home").mouseenter(function() {
        clearInterval(timeoutId);
    }).mouseleave(function() {
        var someElement = $(this);
        timeoutId = setInterval(function() {
            $carouselHome.carousel('next');
        }, 1000);
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T00:10:12.163

这就是我的结果！

```
if ($("#carousel-home").length > 0){
    var $carouselHome = $('#carousel-home').carousel();
    $('#carousel-home_prev').on('click', function(ev) {
    $carouselHome.carousel('prev');
    });
    $('#carousel-home_next').on('click', function(ev) {
        $carouselHome.carousel('next');
    });

    function rotateMe() {$carouselHome.carousel('next');}

    var timer = setInterval( rotateMe, 4000);

    $('#carousel-home, #carousel-home_next, #carousel-home_prev').hover(function(ev){
        clearInterval(timer);
    }, function(ev){
        timer = setInterval( rotateMe, 4000);
    });
} 
```

下一个和上一个按钮被添加到“悬停”暂停中，`.hover`当我看到它也可以切换“取消悬停”功能时，我也使用了它。我认为更简单。

# jquery - 从谷歌广告访问时激活fancybox

> ID：12291028
> 
> 赞同：0
> 
> 时间：2012-09-05T23:15:16.037
> 
> 标签：jquery, fancybox, google-ads-api

嗨，我想在每次有人通过点击谷歌广告访问我的网站时激活我网站上的 fancybox。Fancybox 通常是通过单击链接触发的。
这是否可行，最好的方法是什么？
非常感谢，迪诺。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T23:33:59.970

如果您的 AdWords 帐户与 Google Analytics（分析）相关联，那么您可以检查该`gclid`参数是否存在。

或者，您可以在目标 URL 中添加一个查询参数，然后在您的 JavaScript 中选择它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T23:18:43.457

我不知道 Google 广告背后的技术细节，以及您从服务器/浏览器中获得哪些信息来表明有人通过 Google 广告访问了您的网站；但是，使用 jQuery 和以下代码会在页面加载时加载 fancybox。

```
$(function(){
    $('#my-element').fancybox();
}); 
```

# java - java中的迭代

> ID：12291029
> 
> 赞同：4
> 
> 时间：2012-09-05T23:15:25.060
> 
> 标签：java, iterator

我必须制作一个自定义迭代器，它可以无休止地遍历数组。考虑到我以前从未在 java 中使用过迭代器，我不知道该怎么做。如果有人可以帮助我并向我解释，我将非常感激。

```
public class Numbers{   
private int[] array;

public Numbers(int[] array){ 
    this.array = array
}
    public static void main(String[] args) {

        Numbers n = new Numbers();
        Iterator num = n.sequence();
        for(int i = 0; i < 10; i++){
            if (num.hasNext()){
                System.out.print(num.next() + " ");
                System.out.println();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T23:27:05.293

见下文：

```
public class Numbers implements Iterable<Integer> {
    private int[] array;
    private int i;
    public Numbers(int[] array) { 
        this.array = array;
        i = 0; 
    }

    public Iterator<Integer> iterator() {
        return new Iterator<Integer>() {
            @Override
            public boolean hasNext() { return true; }

            @Override
            public Integer next() {
                int j = i;
                i = (i + 1) % array.length;
                return array[j];
            }

            @Override
            public void remove() {}
        };
    }
} 
```

然后你可以这样做：

```
Numbers n = new Numbers(new int[]{1,2,3});
for (int i : n)
    System.out.println(i);  // or anything else 
```

这将导致无限循环：

> 1
> 2
> 3
> 1
> 2
> 3
> 1
> 2
> ...

相关的javadocs：
- [Iterator](http://docs.oracle.com/javase/6/docs/api/java/util/Iterator.html)
- [Iterable](http://docs.oracle.com/javase/6/docs/api/java/lang/Iterable.html)

* * *

另一种方法是像这样有一个无限的while循环：

```
int[] array = new int[]{1, 2, 3};
int i = 0;
while (true) {
    System.out.println(array[i]);  // or anything else
    i = (i + 1) % array.length;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T23:26:44.590

这基本上是迭代器的工作方式。此示例使用`List`，但您可以针对任何实现了 的集合使用迭代器[`java.lang.Iterable`](http://docs.oracle.com/javase/7/docs/api/java/lang/Iterable.html)。

```
List<String> someList; // assume this has been instantiated and has values in it

ListIterator<String> it = someList.listIterator();
while (it.hasNext()) {
    String value = it.next();

    // do something with value
} 
```

几乎，你通过告诉集合给你一个对它的迭代器的引用来实例化迭代器。然后你通过调用循环`hasNext()`，这将使你继续前进，直到你没有更多的元素。调用`next()`从迭代器中提取下一项并将其位置增加一。调用`remove()`将从列表中删除由(或.)返回的*最后一项*`next()``previous()`

当然，请注意，我一直在使用[`java.util.ListIterator`](http://docs.oracle.com/javase/6/docs/api/java/util/ListIterator.html)而不是[`java.util.Iterator`](http://docs.oracle.com/javase/6/docs/api/java/util/Iterator.html)因为是针对列表进行优化`ListIterator`的特殊实现，就像我上面给出的示例一样。`Iterator`

您不能对数组使用迭代器。您需要使用香草 for 循环或将其转换为`List`实现`Iterable`.

要无休止地遍历上面的列表，你的循环看起来像这样：

```
while(it.hasNext()) {
    String value = it.next();

    // do processing

    if (!it.hasNext()) {
        it = someList.listIterator(); // reset the iterator
    }
} 
```

使用 for 循环无限循环遍历数组：

```
for (int i = 0; i < myArray.length; i++) {
    myArray[i];
    // do something

    if (i == myArray.length - 1) {
        i = 0; // reset the index
    }
} 
```

或者，您可以让您的`Numbers`类`Iterable`直接实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T23:24:38.183

使用迭代器基本上总是一样的。

首先从您的数组中获取迭代器：

```
Iterator iterator = yourArray.iterator(); 
```

在有项目时进行第二次迭代：

```
while(iterator.hasNext()) {
  Object element = iterator.next(); 
} 
```

# ios - - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 没有被调用

> ID：12291038
> 
> 赞同：3
> 
> 时间：2012-09-05T23:15:44.263
> 
> 标签：ios, uitableview

所以它真的很奇怪......我有一个名为 ListEventsViewController 的 ViewController

在头文件中：

```
@interface ListEventsViewController : UIViewController <UITableViewDelegate, UITableViewDataSource>
@property (weak, nonatomic) IBOutlet UITableView *eventsTable;
@property (strong, nonatomic) NSArray *events;

@end 
```

在实现中，我在下面调用了几乎强制性的函数：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
    return [events count];
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView{
    return 1;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    UITableViewCell *cell = nil;
    cell = [eventsTable dequeueReusableCellWithIdentifier:@"eventCell"];

    if(!cell){
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:@"eventCell"];
    }

    NSString *textLabelTitle = [[events objectAtIndex:indexPath.row] objectForKey:@"name"];
    NSString *textLabelDetail = [[events objectAtIndex:indexPath.row] objectForKey:@"date"];
    //cell.imageView.image = someimage;
    NSLog(@"Text Label Title: %@", textLabelTitle);
    NSLog(@"Text Label Detail: %@", textLabelDetail);
    cell.textLabel.text = textLabelTitle;
    cell.detailTextLabel.text = textLabelDetail;

    return cell;
} 
```

问题是函数 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{ 没有被调用，因此单元格没有被填充。也没有分配单元格的数量。这可能是什么原因造成的？

在我看来，这是一张 h 和 IB 的图片。![在此处输入图像描述](../Images/9eb3e0c9aaeff83b03043299c2c8e65e.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T00:48:37.287

您在屏幕截图中说明您已将表格链接到其 IBOutlet，但您尚未将表格视图的委托或数据源链接到您的控制器，因此您的表格委托方法`cellForRowAtIndex`不会被调用。链接这些应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-27T09:14:52.743

我有这个，这必须是你的解决方案

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

if (cell==nil) {
        cell=[[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];
         mysampleimage = [[UIImageView alloc]initWithFrame:CGRectMake(3,3, 40, 40)];
         mysampleimage.image=[UIImage imageNamed:@"a.png"];
         mysampleimage.tag=13;
         [cell.contentView addSubview:mysampleimage];

         myButton = [[UIButton alloc]init];
         myButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
         myButton.frame = CGRectMake(165, 10, 65, 30.);
         [myButton setTitle:@"Show" forState:UIControlStateNormal];
         myButton.tag = 14;
         [cell addSubview:myButton];

         lbl = [[UILabel alloc]initWithFrame:CGRectMake(50, 6, 200, 43)];
         lbl.tag=12;
         [cell.contentView addSubview:lbl];
     }
     else
     {
         lbl=(UILabel *)[cell.contentView viewWithTag:12];
         mysampleimage=(UIImageView *)[cell.contentView viewWithTag:13];
         myButton = (UIButton *)[cell.contentView viewWithTag:14];
     }

     myButton.accessibilityLabel = lbl.text;

     [myButton addTarget:self action:@selector(myShow:) forControlEvents:UIControlEventTouchUpInside];
     return cell;

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-03T12:58:08.383

您可以在编码中使用以下行：

```
tableview.delegate = self;
tableview.datasource = self; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-20T16:40:42.593

帮助我的是注释掉 numberofsectionsintableview

# mysql - 查询时间很长（包括说明）

> ID：12291039
> 
> 赞同：2
> 
> 时间：2012-09-05T23:15:50.717
> 
> 标签：mysql, performance

查询目标：

按地区显示种族。

询问：

```
SELECT school_data_schools_outer.district_id, 
       school_data_race_ethnicity_raw_outer.year,  
       school_data_race_ethnicity_raw_outer.race,
       ROUND( 
           SUM( school_data_race_ethnicity_raw_outer.count) /
                (SELECT SUM(count)
                   FROM school_data_race_ethnicity_raw as school_data_race_ethnicity_raw_inner
             INNER JOIN school_data_schools as school_data_schools_inner 
                  USING (school_id)
                  WHERE school_data_schools_outer.district_id = school_data_schools_inner.district_id 
                    AND school_data_race_ethnicity_raw_outer.year = school_data_race_ethnicity_raw_inner.year) * 100, 2)
      FROM school_data_race_ethnicity_raw as school_data_race_ethnicity_raw_outer
INNER JOIN school_data_schools as school_data_schools_outer USING (school_id)
  GROUP BY school_data_schools_outer.district_id, 
           school_data_race_ethnicity_raw_outer.year, 
           school_data_race_ethnicity_raw_outer.race

mysql> explain SELECT school_data_schools_outer.district_id, school_data_race_ethnicity_raw_outer.year, school_data_race_ethnicity_raw_outer.race,ROUND(SUM(school_data_race_ethnicity_raw_outer.count)/( SELECT SUM(count) FROM school_data_race_ethnicity_raw as school_data_race_ethnicity_raw_inner INNER JOIN school_data_schools as school_data_schools_inner USING (school_id) WHERE school_data_schools_outer.district_id = school_data_schools_inner.district_id and school_data_race_ethnicity_raw_outer.year = school_data_race_ethnicity_raw_inner.year ) * 100,2) FROM school_data_race_ethnicity_raw as school_data_race_ethnicity_raw_outer INNER JOIN school_data_schools as school_data_schools_outer USING (school_id) GROUP BY school_data_schools_outer.district_id, school_data_race_ethnicity_raw_outer.year, school_data_race_ethnicity_raw_outer.race;
+----+--------------------+--------------------------------------+--------+----------------------------+---------+---------+----------------------------------------------------------------------+-------+---------------------------------+
| id | select_type        | table                                | type   | possible_keys              | key     | key_len | ref                                                                  | rows  | Extra                           |
+----+--------------------+--------------------------------------+--------+----------------------------+---------+---------+----------------------------------------------------------------------+-------+---------------------------------+
|  1 | PRIMARY            | school_data_race_ethnicity_raw_outer | ALL    | school_id,school_id_2      | NULL    | NULL    | NULL                                                                 | 84012 | Using temporary; Using filesort |
|  1 | PRIMARY            | school_data_schools_outer            | eq_ref | PRIMARY                    | PRIMARY | 257     | rocdocs_main_drupal_7.school_data_race_ethnicity_raw_outer.school_id |     1 |                                 |
|  2 | DEPENDENT SUBQUERY | school_data_race_ethnicity_raw_inner | ref    | school_id,year,school_id_2 | year    | 4       | func                                                                 |  8402 |                                 |
|  2 | DEPENDENT SUBQUERY | school_data_schools_inner            | eq_ref | PRIMARY                    | PRIMARY | 257     | rocdocs_main_drupal_7.school_data_race_ethnicity_raw_inner.school_id |     1 | Using where                     |
+----+--------------------+--------------------------------------+--------+----------------------------+---------+---------+----------------------------------------------------------------------+-------+---------------------------------+
4 rows in set (0.00 sec)

mysql>

mysql> describe school_data_race_ethnicity_raw;
+-----------+--------------+------+-----+---------+----------------+
| Field     | Type         | Null | Key | Default | Extra          |
+-----------+--------------+------+-----+---------+----------------+
| id        | int(11)      | NO   | PRI | NULL    | auto_increment |
| school_id | varchar(255) | NO   | MUL | NULL    |                |
| year      | int(11)      | NO   | MUL | NULL    |                |
| race      | varchar(255) | NO   |     | NULL    |                |
| count     | int(11)      | NO   |     | NULL    |                |
+-----------+--------------+------+-----+---------+----------------+
5 rows in set (0.00 sec)

mysql> describe school_data_schools;
+-------------+----------------+------+-----+---------+-------+
| Field       | Type           | Null | Key | Default | Extra |
+-------------+----------------+------+-----+---------+-------+
| school_id   | varchar(255)   | NO   | PRI | NULL    |       |
| grade_level | varchar(255)   | NO   |     | NULL    |       |
| district_id | varchar(255)   | NO   |     | NULL    |       |
| school_name | varchar(255)   | NO   |     | NULL    |       |
| address     | varchar(255)   | NO   |     | NULL    |       |
| city        | varchar(255)   | NO   |     | NULL    |       |
| lat         | decimal(20,10) | NO   |     | NULL    |       |
| lon         | decimal(20,10) | NO   |     | NULL    |       |
+-------------+----------------+------+-----+---------+-------+
8 rows in set (0.00 sec) 
```

注意：我也尝试过：

```
select sds.school_id, 
  detail.year, 
  detail.race,
  ROUND((detail.count / summary.total) * 100 ,2) as percent 
FROM school_data_race_ethnicity_raw as detail
inner join school_data_schools as sds USING (school_id)
inner join (
  select sds2.district_id, year, sum(count) as total
  from school_data_race_ethnicity_raw
  inner join school_data_schools as sds2 USING (school_id)
  group by sds2.district_id, year
  ) as summary on summary.district_id = sds.district_id 
    and summary.year = detail.year 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T22:11:38.167

这很慢，因为：

1.  您在 school_data_race_ethnicity_raw_outer 上没有使用索引，因此它正在扫描约 84,000 行中的每一行
2.  您正在使用相关子查询，这意味着您的复杂计算必须每行运行一次，即 84,000 次。

最好的方法是不使用相关子查询，但如果不是，那么为了让它运行得更快，您需要使用[覆盖索引](http://dom.as/2007/01/26/mysql-covering-index-performance/)，以便整个内部查询（以及通过它们自己的索引的其他部分）可以闪电般运行仅使用索引快速。有关索引主题的精彩教程，请查看[此](http://use-the-index-luke.com/)内容。它教会了我很多！现在，您的内部查询仅使用 school_data_race_ethnicity_raw 上的年份索引，因此它必须通过为 84000 次计算中的每一次读取 8000 行来查找所需的其余内容。索引将使这更快，例如在 school_data_race_ethnicity_raw 上创建一个复合索引，您会发现它有帮助：

```
CREATE index inner_composite ON school_data_race_ethnicity_raw (year, district_id, schoolid, count) 
```

这将允许从索引中获取 WHERE 中使用的所有字段，然后是连接字段，然后是您想要用于选择的字段。您应该会看到它显示在解释结果的“关键”列中。此外，如果你做对了，你会在最右边的列中看到“使用索引”，表明没有发生表访问，这要快几个数量级。

您可以通过为查询提到的列添加大量索引来试验快速和肮脏的风格，并查看在关键列中获取的内容。如果出现问题，请阅读您的查询以查看该表中的其他列正在使用中，然后在右侧添加一个新索引，其中也添加了这些列，看看是否效果更好。一旦发现有效的索引，请记住删除未使用的索引。

MySQL 不允许您直接索引列的 SUM，这将是最快的方法，因此除非您想移动到另一个数据库（如果可以的话，这是个好主意），这总是有点慢。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-06T00:16:23.427

这应该是您汇总数据以按地区计算种族计数所需的全部内容，不确定为什么要在原始数据中进行如此多的数学运算，因为没有必要实现您的目标，并且会强制进行一些疯狂的子查询。

```
SELECT SUM(students.count) as studentCount, School.district_id, students.race
FROM school_data_schools schools, 
school_data_race_ethnicity_raw students
WHERE shools.school_id = students.school_id
GROUP BY district_id, race 
```

您可能还需要一个关于 school_data_race_ethnicity_raw.school_id 的索引（单独，而不是作为多列键的一部分）

**编辑**不知道 OP 正在寻找百分比细分，而不仅仅是总数

```
SELECT ((studentCount / districtTotal) * 100) as percentage, district_id, race

FROM(

SELECT SUM(students.count) as studentCount, Schools.district_id, students.race,
  (SELECT SUM(inStudents.count)
   FROM school_data_schools inSchools, 
    school_data_race_ethnicity_raw inStudents
   WHERE inSchools.school_id = inStudents.school_id
   AND inSchools.district_ID = Schools.district_id
   GROUP BY inSchools.district_id) as districtTotal

    FROM school_data_schools schools, 
    school_data_race_ethnicity_raw students

WHERE schools.school_id = students.school_id
GROUP BY district_id, race
) table1 
```

这将运行得很快，仍然需要确保 school_data_race_ethnicity_raw.school_id 上的索引不是多列索引的一部分。[你可以在这里](http://sqlfiddle.com/#!2/ae5c9/8)看到它的运行情况，虽然我的测试用例很小，但它似乎确实检查过了。

# .htaccess - 需要一种通用方法来创建 SEO 友好的 URL

> ID：12291040
> 
> 赞同：0
> 
> 时间：2012-09-05T23:16:00.780
> 
> 标签：.htaccess, url, mod-rewrite, url-routing, seo

我已经搜索了很多并在我的文件中实现了很多正则表达式，`.htaccess`但无法成功。如何找到使我的 URL SEO 友好的通用方法？

目前这是在我的`.htaccess`文件中：

```
 RewriteEngine On
   RewriteCond %{REQUEST_FILENAME} !-f
   RewriteCond %{REQUEST_FILENAME} !-d
   RewriteRule ^(.*)$ index.php?page=$1 [L,QSA] 
```

我需要做的是更改这样的 URL：

```
http://localhost/abc/index.php?page=boats_for_sale 
```

对此：

```
http://localhost/abc/boats_for_sale 
```

同样，我想隐藏我的 URL 中的所有查询字符串。

我将如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T13:24:58.367

有了类似的东西它可以工作：

# URL重写模块激活

```
# Avoids problems with mod_rewrite
    Options +FollowSymlinks
# Activate rewriting module
    RewriteEngine on
# Set base URL directory rewrites
    RewriteBase / 
```

# 重写url参数

```
RewriteRule ^abc/([a-zA-Z0-9_-]+)$ abc/index.php?page=$1 
```

请阅读重写 mod 圣经： [http ://httpd.apache.org/docs/2.0/mod/mod_rewrite.html](http://httpd.apache.org/docs/2.0/mod/mod_rewrite.html)

# ios - iOS 中自定义类的对象属性

> ID：12291041
> 
> 赞同：0
> 
> 时间：2012-09-05T23:16:12.800
> 
> 标签：ios, class, properties

这应该很容易——但我正在摸不着头脑。这是问题所在：

我有一个导入到 MainViewController.h 文件中的自定义类。该类包含一堆属性和一些方法。

我在 ViewDidLoad 部分中实例化了此类的一个对象，并且可以运行任何方法或随意更改此对象的属性……只要我留在 ViewDidLoad 部分中，它们就可以正常工作。

我创建了一个按钮，我希望用它来激活我在这个对象上的一个自定义类方法，但是 IBAction 部分似乎超出了范围，因为它根本看不到在 ViewDidLoad 中创建的对象。

有人可以指出我正确的方向以使这两个区域能够互相看到吗？

提前致谢！

# php - 奇怪的 PHP 浮点行为

> ID：12291042
> 
> 赞同：1
> 
> 时间：2012-09-05T23:16:42.230
> 
> 标签：php, floating-point

遇到奇怪的问题：

```
$testTotal = 0;
foreach($completeBankArray as $bank){
   var_dump($testTotal);
   echo  " + ";
   var_dump(floatval($bank["amount"]));
   echo " = ".(floatval($testTotal) + floatval($bank["amount"]))."</br>";
   $testTotal = floatval(floatval($testTotal) + floatval($bank["amount"])); 
```

这是我得到的输出：

```
------------------//--------------------
float(282486.09) + float(15) = 282501.09
float(282501.09) + float(3.49) = 282504.58
float(282504.58) + float(22.98) = 282527.55999999
float(282527.55999999) + float(5.2) = 282532.76
float(282532.76) + float(39.98) = 282572.73999999
float(282572.73999999) + float(2.6) = 282575.33999999
float(282575.33999999) + float(2.99) = 282578.32999999 
------------------//----------------------- 
```

这怎么可能，我在做什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-05T23:20:31.743

你没有做错什么。浮点数是出了名的不准确。来自[文档](http://php.net/manual/en/language.types.float.php)（在巨大的红色警告框中）：

> 浮点数的精度有限。尽管取决于系统，但 PHP 通常使用 IEEE 754 双精度格式，由于在 1.11e-16 的数量级四舍五入，这将给出最大的相对误差。非初等算术运算可能会产生更大的误差，当然，当多个运算复合时，必须考虑误差传播。
> 
> 此外，可以精确表示为以 10 为底的浮点数的有理数，如 0.1 或 0.7，没有精确表示为以 2 为底的浮点数，无论尾数大小如何，它都在内部使用。因此，它们不能被转换成它们内部的二进制对应物，而不会有小的精度损失。这可能会导致令人困惑的结果：例如， floor((0.1+0.7)*10) 通常会返回 7 而不是预期的 8，因为内部表示将类似于 7.9999999999999991118...。
> 
> 所以永远不要相信浮点数结果到最后一位，也不要直接比较浮点数是否相等。如果需要更高的精度，可以使用[任意精度的数学函数](http://www.php.net/manual/en/ref.bc.php)和[gmp](http://www.php.net/manual/en/ref.gmp.php)函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T23:20:45.180

浮点数从来都不是精确的，从长远来看会存在很大差异。如果您正在使用精确数学，请阅读有关该`bc` [库](http://se2.php.net/manual/en/book.bc.php)的信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T23:21:38.773

经典数值精度示例。计算机以二进制形式存储浮点数。

简短的回答是计算机无法准确地以二进制表示某些浮点数。

长答案涉及在数字基础之间移动。如果你有一个浮点数，你不能完全用二进制表示它，除非分母包含可以分解为 2 的幂的因子。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T23:57:09.343

其他答案已经让您深入了解为什么使用浮点数会出现这种行为。

如果您正在处理金钱，解决问题的一种方法是使用整数而不是浮点数，并使用美分而不是美元。然后你需要做的就是格式化你的输出以包含小数。

# javascript - 可以设置域 cookie 破坏跨域安全性的 javascript 小书签吗？

> ID：12291043
> 
> 赞同：2
> 
> 时间：2012-09-05T23:16:46.753
> 
> 标签：javascript, security, cookies, cross-domain, bookmarklet

我正在创建一个可在各种域中使用的小书签。我想设置一些 cookie 来存储这个小书签的临时设置，所以我假设从这个脚本设置一个 cookie 会将 cookie 分配给脚本源的域。

情况并非如此，小书签能够将 cookie 分配给当前正在查看的站点的域。这不适合我的需要（这会记住每个域的设置，而不是所有域的书签）。

我的问题是，这是否以某种方式破坏了跨域策略？还有一个后续问题，我如何存储小书签的 cookie 而不是它所使用的正确域。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T23:22:14.360

书签在当前页面的上下文中运行，因此这是它们运行的​​安全上下文，因此这不会破坏跨域策略。您只能在当前页面的域上设置 cookie。因此，您的小书签不能拥有自己的 cookie。

这与从各种域加载到给定页面中的脚本相同。重要的是页面的来源，而不是脚本的来源。

我所知道的为您的脚本在所有域中保存一次设置的唯一方法是使用跨域 JSONP 并将设置存储在您的服务器上，但您仍然可能难以识别唯一用户。

听起来您正在尝试做的事情将更适合具有插件本地存储的浏览器插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T23:21:55.463

它不会破坏跨域策略，因为它实际上是在单独的域上运行的（这是小书签背后的点）。

如果您想存储 cookie 信息，请使用第 3 方服务（例如，拥有您自己的服务器，其中包含接受 cookie 更改的代码）。请注意，这可能是一个安全问题，因为每个域都可以为您的用户获取 cookie，除非您将服务设为只写（我对此表示怀疑）。

然后还有另一种选择 - 不要将设置保存在 cookie 中。请改用其他存储介质。

# ruby-on-rails - Rails 友谊取消，拒绝

> ID：12291047
> 
> 赞同：0
> 
> 时间：2012-09-05T23:17:05.507
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1

我正在尝试按照以下链接构建一个友谊系统：如何在 Rails 3 中为社交网络应用程序实现友谊模型？不过有点欠缺。我能够建立关系，但我不确定如何执行以下操作：取消、拒绝、接受。

因此，假设我尝试取消我在未决中执行以下操作的关系，调用我执行以下操作的操作：

```
<% @customer.pending_friends.each do |pf| %>
  <%= link_to pf.incomplete_name, cancel_friendships_path(:friend_id => pf), :method => :post  %><br />
<% end %> 
```

这里是取消的控制器

```
 def cancel
    @customer = current_customer
    @friend = Customer.find(params[:friend_id])
    if @customer.pending_friends.include?(@friend)
      Friendship.breakup(@customer, @friend)
      flash[:notice] = "Friendship Canceled"
    else
      flash[:notice] = "No Friendship request"
    end
    redirect_to root_url
  end 
```

这里是我的分手功能

```
 # Delete a friendship or cancel a pending request.
  def self.breakup(customer, friend)
    transaction do
      destroy(find_by_customer_id_and_friend_id(customer, friend))
      destroy(find_by_customer_id_and_friend_id(friend, customer))
    end
  end 
```

但是，单击取消链接时，我没有收到路由错误。我做错了什么？？

在这里请求

路由.rb

```
resources :friendships do
    collection do
      get 'cancel'
      get 'decline'
    end
  end
  resources :friendships 
```

耙路线

```
 cancel_friendships GET    /friendships/cancel(.:format)                        friendships#cancel
         decline_friendships GET    /friendships/decline(.:format)                       friendships#decline
                             GET    /friendships(.:format)                               friendships#index
                             POST   /friendships(.:format)                               friendships#create
                             GET    /friendships/new(.:format)                           friendships#new
                             GET    /friendships/:id/edit(.:format)                      friendships#edit
                             GET    /friendships/:id(.:format)                           friendships#show
                             PUT    /friendships/:id(.:format)                           friendships#update
                             DELETE /friendships/:id(.:format)                           friendships#destroy

/********************************************************/

                 friendships GET    /friendships(.:format)                               friendships#index
                             POST   /friendships(.:format)                               friendships#create
              new_friendship GET    /friendships/new(.:format)                           friendships#new
             edit_friendship GET    /friendships/:id/edit(.:format)                      friendships#edit
                  friendship GET    /friendships/:id(.:format)                           friendships#show
                             PUT    /friendships/:id(.:format)                           friendships#update
                             DELETE /friendships/:id(.:format)                           friendships#destroy 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T23:31:08.343

问题是在您的路线中，您有：

```
get 'cancel' 
```

但是您的取消链接正在执行发布请求，而不是获取：

```
<%= link_to ..., ..., :method => :post %> 
```

个人认为应该是删除请求。

在您的路线中：

```
delete 'cancel' 
```

在您看来：

```
<%= link_to pf.incomplete_name, cancel_friendships_path(:friend_id => pf), :method => :delete %> 
```

您的代码可能还有其他问题，但这是您必须解决的一件事。

# c - 使用定时器进行套接字编程

> ID：12291049
> 
> 赞同：2
> 
> 时间：2012-09-05T23:17:31.323
> 
> 标签：c, sockets, select

我需要 C 中的套接字编程方面的帮助。我需要在 C 中编写一个服务器-客户端程序，其中两个 IP 在创建的套接字上相互通信。我成功地做到了这一点。但现在我想在套接字中添加计时器。我研究了一下，发现可以通过 select() 来实现，其中我们给出了超时值。我试过这样做，但徒劳无功。在下面显示的代码中，我尝试连接到客户端并读取创建了 10 秒的新套接字。如果客户端在这 10 秒内发送了一些消息，服务器应该接收该消息并发送回确认。如果不是，则必须发出一条错误消息，说明它已超时。

我的服务器代码如下：

```
 #include<stdio.h>
    #include<unistd.h>
    #include<sys/time.h>
    #include<sys/types.h>
    #include<sys/socket.h>
    #include<netinet/in.h>
    #include<stdlib.h>
    void error(char *msg)
    {
        perror(msg);
        exit(1);
    }

    int main(int argc, char *argv[])
    {
        int a=1;
        fd_set readfds,writefds;
        int ready_for_reading,reading;
        struct timeval time_out;
        FD_ZERO(&readfds);
  //    FD_ZERO(&writefds);
        FD_SET(a,&readfds);

        time_out.tv_sec = 10;    // 10 seconds
        time_out.tv_usec = 0;    // 0 milliseconds

  //    ready_for_reading=select(1,&readfds,NULL,NULL,&time_out);

        int sockfd, newsockfd, portno,n,clilen;;
        struct sockaddr_in serv_addr,cli_addr;
        char buffer[256];
        portno=atoi(argv[1]);
        sockfd=socket(AF_INET,SOCK_STREAM,0);
        if(sockfd==-1)
            error("\nError creating socket");
        serv_addr.sin_family=AF_INET;
        serv_addr.sin_port=htons(portno);
        serv_addr.sin_addr.s_addr=INADDR_ANY;

        n=bind(sockfd,(struct sockaddr *)&serv_addr,sizeof(serv_addr));
        if(n<0)
            error("\nError binding socket");
        listen(sockfd,5);
        clilen=sizeof(cli_addr);
        printf("\nAccept call reached");
        newsockfd=accept(sockfd,(struct sockaddr *)&cli_addr,&clilen);
        printf("\nnewSockfd=%d",newsockfd);
        printf("\ntesting value:%d",sizeof(readfds));
        if(newsockfd==-1)
            error("\nError on accept");
    //  FD_SET(a,&readfds);
        ready_for_reading=select(sizeof(readfds)*8,&readfds,NULL,NULL,&time_out);
        printf("\nready_for_reading=%d",ready_for_reading);
        if (ready_for_reading == -1) 
        {
            /* Some error has occured in input */
             printf("Unable to read your input\n");
             return -1;
        }
         else 
        {
                  if (ready_for_reading) 
              {
                     reading = read(newsockfd, buffer, 255);
                     printf("Read, %d bytes from input : %s \n", reading,buffer);
                  } 
              else 
              {
                     printf(" 10 Seconds are over - no data input \n");
             return 0;
                  }
            }

    /*  n=read(newsockfd,buffer,255);
        if(n<0)
            error("\nError in reading client's msg");
    */
        printf("\nClient's msg is:%s\n",buffer);
        n=write(newsockfd,"I got your message",25);
        if(n<0)
            error("\nError on writing");

        return 0;
    } 
```

select() 函数始终返回“0”。我需要这方面的帮助。在此先感谢，理查德。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T23:23:23.903

```
 int a=1;
      fd_set readfds,writefds;
      int ready_for_reading,reading;
      struct timeval time_out;
      FD_ZERO(&readfds);
//    FD_ZERO(&writefds);
      FD_SET(a,&readfds); // a?! 
```

您正在选择文件描述符 1，stdout。您应该选择从`accept`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T02:39:43.283

对于您的特定问题，您可以使用`SO_RCVTIMEO`socket 选项。

```
#include <assert.h>
#include <sys/time.h>
#include <sys/types.h>
#include <sys/socket.h>

ssize_t recv_with_timeout (int s, void *buf, size_t len, int flags,
                           struct timeval *timeout)
{
    if (timeout) {
        ssize_t bytes;
        int r;
        struct timeval last;
        socklen_t lastlen = sizeof(last);
        r = getsockopt(s, SOL_SOCKET, SO_RCVTIMEO, &last, &lastlen);
        if (r < 0) return r;
        r = setsockopt(s, SOL_SOCKET, SO_RCVTIMEO, timeout, sizeof(*timeout));
        if (r < 0) return r;
        bytes = recv(s, buf, len, flags);
        r = setsockopt(s, SOL_SOCKET, SO_RCVTIMEO, &last, lastlen);
        assert(r == 0);
        return bytes;
    }
    return recv(s, buf, len, flags);
} 
```

从[手册页](http://pubs.opengroup.org/onlinepubs/009695399/functions/setsockopt.html)：

> SO_RCVTIMEO
> 设置超时值，该值指定输入函数在完成之前等待的最长时间。它接受一个 timeval 结构，其中包含秒数和微秒数，指定等待输入操作完成的时间限制。如果接收操作阻塞了这么长时间而没有接收到额外的数据，如果没有接收到数据，它将返回部分计数或设置为 [EAGAIN] 或 [EWOULDBLOCK] 的 errno。此选项的默认值为零，表示接收操作不会超时。此选项采用 timeval 结构。请注意，并非所有实现都允许设置此选项。

# node.js - 在 Windows 上向 node.js 脚本传递一个带有空格的参数

> ID：12291052
> 
> 赞同：5
> 
> 时间：2012-09-05T23:17:50.510
> 
> 标签：node.js, arguments

我正在从 Windows 上的命令行运行节点脚本，并尝试传入包含空格的文件夹路径。当通过 require 模块或`process.argv`变量访问这个参数时，我似乎没有得到我所期望的。对于以下命令：

```
node script.js "C:\path\to\folder\with a space\" 
```

我似乎得到以下值：

> process.argv[2] = C:\path\to\folder\带空格\"

注意字符串中的尾随`"`。如果参数不带引号传递，它显然将其作为在空间上拆分的不同参数传递。

我做错了什么，还是这是一个错误？如果它是一个错误，是否有可能的解决方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T23:20:00.700

尾随反斜杠转义引号，然后再次由 shell 暗示（而不是由于缺少右引号而中止）。

修复只是用另一个反斜杠转义该反斜杠或完全省略它：

```
C:\Users\myself> python -c "import sys; print sys.argv[1]" "foo\bar\"
foo\bar"
C:\Users\myself> python -c "import sys; print sys.argv[1]" "foo\bar\\"
foo\bar\ 
```

请注意，您只能以这种方式转义*最后一个*反斜杠 - 字符串中的任何其他反斜杠都不会充当转义字符：

```
C:\Users\myself> python -c "import sys; print sys.argv[1]" "foo\\bar\\"
foo\\bar\ 
```

# php - Googlemail.com/gmail.com 电子邮件规范化

> ID：12291053
> 
> 赞同：0
> 
> 时间：2012-09-05T23:18:22.800
> 
> 标签：php, mysql

我正在为我的新项目创建一个注册系统。我唯一的问题是@googlemail.com 和@gmail.com 被识别为单独的电子邮件地址。有没有人知道如何将它们从“@googlemail.com”更改为“@gmail.com”。

```
**Some pseudocode to help you**
    $change = '@gmail.com'
   $email = swap($change,'@googlemail.com', $email); 
```

我的编程能力有限，所以不要判断伪代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T23:30:05.553

您可能想使用[stripos()](http://www.php.net/manual/en/function.stripos.php)查找字符串，然后使用[str_ireplace()](http://www.php.net/manual/en/function.str-ireplace.php)将 gmail 替换为 googlemail。

```
if(stripos($email,'@gmail.com')!== false){
    $email = str_ireplace('gmail.com','googlemail.com',$email);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T23:30:14.430

使用 str_replace()：

```
$email = 'example@gmail.com';
$email = str_replace('@gmail.com','@googlemail.com',$email); 
```

这将转变`example@gmail.com`为`example@googlemail.com`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-19T12:32:21.050

规范化 GMail 地址并不像看起来那么容易。GMail 具有以下更改地址的功能：

*   不同的域：gmail、googlemail
*   点仅用于装饰：my.address@gmail.com 和 myaddress@gmail.com 属于同一个邮箱
*   可以使用“+”号添加随机文本：my.addres+sometext@gmail.com

    ```
    /**
    * Normalize a GMail Address.
    *
    * Example:
    * my.name.1+ABC123@gmail.com => myname1@gmail.com
    * my.name@googlemail.com => myname@gmail.com
    *
    * @param string $email
    * @return string
    */
    public function normalize ($email)
    {
       foreach (array(
               'gmail.com',
               'googlemail.com'
           ) as $domain) {
           if (substr_count($email, $domain)) {
               $email = preg_replace('/\+.*(@)/i', '\\1', $email);     //removes +ABC123
               $email = explode('@', $email);
               $email[0] = str_replace('.', '', $email[0]);            //remove dots
               $email = implode('@', $email);
               $email = str_replace('@' . $domain, '@gmail.com', $email); //set default domain
           }
    }
    return $email;
    } 
    ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T23:27:04.223

使用[`substr()`](http://php.net/manual/en/function.substr.php)或[`str_replace()`](http://uk3.php.net/manual/en/function.str-replace.php)

`substr()`可能是更安全的选择。还有很多其他的方法。`swap()`您正在寻找的将是（`str_replace()`如果您只是更改`swap`为`str_replace`应该做的伎俩。

# javascript - knockoutjs foreach 在 IE 9 中不起作用

> ID：12291055
> 
> 赞同：1
> 
> 时间：2012-09-05T23:18:34.597
> 
> 标签：javascript, knockout.js

这是一个模拟聊天的简单应用程序。我提供jsfiddle：

[http://jsfiddle.net/LkqTU/2785/](http://jsfiddle.net/LkqTU/2785/)

一些来自服务器的消息，由按钮模拟，用户在绑定到 keypress 事件的 textarea 上键入以获取输入键并发送消息。

好吧，这在 Chrome 和 Firefox 中运行良好，但在 IE9 中失败。

有什么问题？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T21:57:48.243

好吧，找到错误相对容易：分配`this`给在模型函数开头命名的外部变量`self`看起来不正确。

然而，为什么它在 Chrome 和 Firefox 中运行良好，但在 IE 中失败的解释更有趣。显然 varless`self`指的是`window.self`，这实际上是`window`对象的特殊属性 - 对...`window`本身的引用（[MDN](https://developer.mozilla.org/en-US/docs/DOM/window.self)）。

Internet Explorer 实际上以其对该属性的特殊处理而闻名：而在其他浏览器中`window === window.self`计算为`true`，在 IE 中为`false`. 我不会说 IE 没有任何理由就这样做了。检查此[讨论](https://stackoverflow.com/questions/2725188/why-is-window-not-identical-to-window-self-in-internet-explorer)以获取一些详细信息。

具有讽刺意味的是，在这个特殊的例子中，IE 变成了一个半英雄。) 我说的是“英雄”，因为 IE 是唯一不让你覆盖的浏览器`window.self`。其他的都没有那么挑剔；添加`console.log(window.self)`到脚本的末尾以见证他们的耻辱。)

我说的是“一半”，因为 IE 可能会更加……英勇。) 而不是默默地忽略`window.self = ...`行（并以稍微不同的方式使用被忽略的赋值的那条遥远的行抛出错误），为什么 IE 不只是给出早期警告？该死的，即使是通知也可以。

反正。在这些事情上不要依赖 IE 的零星英雄主义是很容易的：只需`'use strict'`在脚本的开头添加一行，瞧！`self = this`Chrome 和 Firefox 都会在它所属的地方——在line处吐出一个“参考错误”警告。)

*是的，我知道“使用严格”使用不是一个简单的步骤，它可能会破坏一些脚本；但我完全支持 Nicholas Zakas关于该主题的[声明](http://www.nczonline.net/blog/2012/03/13/its-time-to-start-using-javascript-strict-mode/)*。

# c# - 单个 API 类加载其他类的设计模式

> ID：12291056
> 
> 赞同：3
> 
> 时间：2012-09-05T23:18:42.640
> 
> 标签：c#, .net, design-patterns, inheritance

我正在使用提供 API 的第三方产品。此 API 通过创建基类的实现来工作，然后在 app.config 中指示您要使用的实现。

这样做的问题是，在这个第三方应用程序中可能有多个项目。我想做的是创建一个实现基类的包装类。这将查看参数，然后查找配置以确定将处理传递给哪个其他类，具体取决于正在使用的项目。这样我们就可以在不修改任何现有代码的情况下将未来的项目添加到系统中。

```
public class MyImplementation : ThirdPartyBaseClass
{
    public override OnLoad(ThirdPartyType data)
    {
        //do stuff
    }

    public override Process(ThirdPartyType data)
    {
        //do stuff
    }
} 
```

大约有 15 种方法可以被覆盖。基类方法似乎是空的，因为如果你不重写一个方法，什么都不会发生，所以我需要我的包装器能够处理我需要用于这个项目的类型可能无法实现部分或全部的情况方法。

有人知道适合这种情况的设计模式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T11:34:56.857

正如罗伯特在评论中所说，抽象工厂似乎适合这个。查看此[wiki 链接](http://en.wikipedia.org/wiki/Abstract_factory_pattern#C.23)和此[dofactory 链接](http://www.dofactory.com/Patterns/PatternAbstract.aspx)以获取有关此链接的更多信息。

对于更具体的回应，我有一些疑问。有一个从第三方 API 获取的基类对象。现在，当您说这个工具中可以有多个项目时，我是否认为您需要使用这个基类来创建您定义的多个“项目”类？

然后，包装类可以具有接口的对象类型`IProject`。这应该有所有的定义，比如`OnLoad`and `Process`。每种类型的项目都有一个具体的类，最终实现取决于项目类型。

希望这有助于给你一个方向！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T00:43:38.303

我认为使用好的 DI 容器（如 Autofac）甚至是穷人的 DI 都可以很容易地实现这一点。您可以根据您选择的任何标准在运行时选择要提供的服务，并将其作为您通过构造函数注入实现第三方 API 类的具体实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T13:34:39.123

[*装饰器模式和*](http://www.dofactory.com/Patterns/PatternDecorator.aspx)[*抽象工厂*](http://www.dofactory.com/Patterns/PatternAbstract.aspx)模式可能会在这方面对您有所帮助。我建议`app.config`使用具体工厂（取决于当前配置）来获取装饰器的装饰器（您在其中配置的实现） `inner`。

如果您想一次使用多个实现，您还可以考虑使用[*复合模式*](http://www.dofactory.com/Patterns/PatternComposite.aspx)将调用委托给多个`inner`.

# java - Sublime Text 2 构建系统在新的终端/命令提示符窗口中编译和运行 Java？

> ID：12291058
> 
> 赞同：8
> 
> 时间：2012-09-05T23:18:55.183
> 
> 标签：java, terminal, command-prompt, sublimetext2, build-system

我想在 Sublime Text 2 中创建一个构建系统，它将编译一个 Java 文件，然后在**新**的终端（对于 OS X 或 Linux）或命令提示符（对于 Windows）窗口中运行它。

原因是因为 Sublime Text 2 不允许用户输入任何内容，所以任何需要输入的程序在 Sublime Text 2 中运行时都会报错，如下所示：

![](../Images/7e3c369de6204cd65f2b7fbd8c84fca6.png)

这是我目前拥有的（我也尝试了一个批处理文件），但它只是在 Sublime Text 2 中运行，而不是在新的 shell 中运行：

![](../Images/1535b4df140ebaf924efb6fd562ca795.png)

这可能吗？如果是这样，请逐步解释（我是 Sublime Text 2 的菜鸟），如何做到这一点；我已经尝试在 Sublime Text 2 论坛上发帖，但到目前为止还没有运气！我会感激不尽。谢谢你的时间！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-06T00:58:29.923

这是我为完成这项工作所做的“礼貌”（阅读：简短易读）版本。

*   这只是一个起点。Full impl 是一篇博文，而不是答案。
*   假设：OS X、xterm、没有包层次结构等。
*   包/项目的东西*相对*简单，但 IMO 很尴尬。
*   我没有跨操作系统或考虑到奇怪目录的*完整解决方案。*
*   我的真实版本做了一些假设，这些假设可能适用于世界其他地方，也可能不适用。
*   我的真实版本使用 Ant 或 Maven，它解决了很多问题，但不是全部。
*   其中一些可以包含在 sublime-build 文件中，但是……
*   …对我来说，这种方式更容易，因为这里没有显示其他内容。

**Nutshell**（简化）：编译并运行一个 shell 脚本以获得一个新窗口。

**脚本**

```
cd $1
/usr/bin/javac $2
/usr/X11/bin/xterm -e "/bin/bash -c \"/usr/bin/java $3; echo 'Press ENTER to quit...'; read line\"" 
```

**JavaC.sublime-build**

```
{
  "cmd": ["~/bin/run-java.sh $file_path $file $file_base_name"],
  "file_regex": "^(...*?):([0-9]*):?([0-9]*)",
  "path": "/usr/bin/java",
  "selector": "source.java",
  "shell": true
} 
```

在现实生活中，情况要复杂一些。

综上所述，我从来没有真正用 Java 中的控制台输入做任何事情；我通过 Groovy 或 JRuby REPL 来完成，或者允许输入/输出源/目标的存根，或者……但不是在 Java 中，也不是来自 Sublime Text 2——我使用 IDE 进行 Java 开发。其他任何事情都是浪费我的时间，即使是简短的实验性东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-13T00:06:38.383

我不必使用所有这些长方法。好吧，不适合大项目。一个示例构建系统是

```
{
    "cmd": ["javac '$realpath$file' && java $file_base_name && rm *.class"],
    "selector": "source.java",
    "shell": true,
    "variants": [

        {
            "name": "JavaDoc",
            "cmd": ["mkdir documentation && javadoc -d documentation *.java"]
        },

        {
            "name": "JAR",
            "cmd": ["javac '$realpath$file' && echo \"Main-Class: $file_base_name\" > Manifest.txt && jar cfm $file_base_name.jar Manifest.txt *.class && rm *.class && java -jar $file_base_name.jar"]
        },

    ]
} 
```

这适用于我在 Linux 上，可以在 Github 上的[Java、sublime-build下载](https://gist.github.com/tushortz/5fc717d4bddedf5b560b)

有趣的是它还将文件编译为 JAR。编译后删除类以使事情更整洁，它还支持生成 JavaDocs。

唯一的限制是它在编译时不能接受用户输入或参数。您必须在终端中手动执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-04T18:34:03.997

这可能对您有所帮助，但目前仅适用于 Linux，我仍在使用 Windows 版本。我制作了一个用于在 sublime text 2 和 3 中运行 java 的 bash 脚本。该脚本允许您使用包层次结构，但不是必需的。

可以使用此链接在 github 上下载它：[https ://github.com/dannyvantol/JPack](https://github.com/dannyvantol/JPack)

如果你想传递参数，你需要使用包管理为 sublime text 安装 GLUE。

我不知道 linux 版本是否适用于安装 Cygwin 的 windows，但你可以试试。

您需要知道如何使用它的所有信息也可以在 github 上找到。我希望这对你有帮助

# java - 在没有实体映射设置的情况下使用 Hibernate Criteria 从多个表中检索数据

> ID：12291060
> 
> 赞同：5
> 
> 时间：2012-09-05T23:18:57.877
> 
> 标签：java, hibernate

我的项目有问题。我正在尝试创建一个搜索功能来从用户表中搜索用户，但与此同时，我还想从另一个头像表中检索用户头像的相应“ **url ”。**我确实想在这两个表之间创建一个硬映射。如何使用 Hibernate Criteria 灵活地做到这一点？两个表都使用“ **loginID** ”的主键。

我有两节课：

```
public class User{
    private String loginID;
    private String screenname;
    ......
}
public class Avatar{
    private Integer id;
    private String loginID;
    private String url;
    .......
} 
```

我写的是：

```
 public List<Users> searchLogin(String keywords, int startFrom) {
        List<Users> userList = new ArrayList<Users>();
        try {
            Session session = HibernateUtil.beginTransaction();
            Criteria criteria = session.createCriteria(Users.class,"users");
            criteria.add(Restrictions.ilike("loginID", keywords, MatchMode.ANYWHERE));
            userList = criteria.list();
            if (session.isOpen()) {
                session.close();
            }
            return userList;
        } catch (Exception e) {
            e.printStackTrace();
            return null;
        }
    } 
```

多谢你们！！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-11-12T14:23:49.513

迟到了，但它可能对实际使用谷歌搜索并最终来到这里的其他人有用。无需映射或使用 HQL。

就是这样：

```
 CriteriaBuilder builder = em.getCriteriaBuilder();
    CriteriaQuery<Tuple> criteria = builder.createTupleQuery();
    Root<EntityA> entityARoot= criteria.from(EntityA.class);
    Root<EntityB> entityBRoot = criteria.from(EntityB.class);

    //Predicates
    List<Predicate> predicates = new ArrayList<>();
    //Add the predicates you need

    //And predicates
    List<Predicate> andPredicates = new ArrayList<>();
    andPredicates.add(builder.equal(entityARoot.get("id"), entityBRoot.get("id")));
    andPredicates.add(builder.and(predicates.toArray(new Predicate[0])));

    criteria.multiselect(entityARoot, entityBRoot);
    criteria.where(andPredicates.toArray(new Predicate[0]));

    TypedQuery<Tuple> query = em.createQuery(criteria);

    List<Tuple> result = query.getResultList(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T04:00:35.000

使用 HQL

```
from User u,Avatar a where where u.loginID = a.loginID and u.loginID = :loginID 
```

这将返回 [User,Avatar] 数组的列表。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-07T12:57:50.130

> 两个表都使用“loginID”的主键。

这个对吗？我看到`Avatar`类有一个名为“id”的字段，这不是 id/主键吗？

我还注意到您指的`Avatar`是`User`使用该`loginId`字段。链接实体的正确方法是通过它们的类。使用注解应该是这样的：

```
@Entity
public class User
{
    @Id
    private String loginId;
    private String screenName;
    @OneToOne(mappedBy = "user")
    private Avatar avatar;
}

@Entity
public class Avatar
{
    @Id
    private Integer id;
    @OneToOne
    private User user;
    private String url;
} 
```

然后，如果您想获取 a`User`和`Avatar`属于的 URL，那么`User`您可以做的最好的事情是获取 a`User`并且它正在`Avatar`使用连接，然后访问`Avatar`' 的 URL，因此不必从`Object`to 转换`User`并`Avatar`保持类型安全。

```
User user = fetchUserJoinAvatar("123");
String url = user.getAvatar().getUrl();

public User fetchUserJoinAvatar(String loginId)
{
    CriteriaBuilder cb = em.getCriteriaBuilder();
    CriteriaQuery<User> query = cb.createQuery(User.class);

    Root<User> user = query.from(User.class);
    user.fetch("avatar");
    query.select(user).where(cb.equal(user.get("loginId"), loginId));
    return em.createQuery(query).getSingleResult();
} 
```

# rss - RSS：在类别之间移动 CMS 内容

> ID：12291064
> 
> 赞同：0
> 
> 时间：2012-09-05T23:20:26.223
> 
> 标签：rss

我有一个使用 ExpressionEngine CMS 的客户端。直到最近，他们还拥有一个带有 RSS 提要的博客。然后他们创建了第二个博客，有自己的 RSS 提要。他们现在希望将原始博客中的一些较旧的帖子移至第二个博客，因为它们更适合第二个博客。

我的问题是：如果我们只是重新分类博客文章，这些旧文章是否会出现在第二个博客的 RSS 提要中，如果出现，它们会作为新文章出现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T15:17:56.677

旧帖子在提要阅读器中显示为新帖子的主要原因有以下三个：

1.  帖子的 GUID 或永久链接与以前相比已更改
2.  该帖子以前不在 RSS 中，无论其日期如何
3.  `pubDate`与现有缓存相比，已更改指示新项目

大多数聚合器首先查看 GUID 或永久链接以确定项目的唯一性以及是否将其显示为新项目。如果这些都不存在，它们可能会退回到`pubDate`元素。

仅仅更改帖子的文本或类别通常不会发出帖子是新的信号。

当然，除非更改类别也意味着它出现在另一个 RSS 提要中，就像您的情况一样，在这种情况下，无论您何时发布它，它都会显示为新的。

# java - 用于存储过程后端的 Java Web 框架前端

> ID：12291074
> 
> 赞同：2
> 
> 时间：2012-09-05T23:21:29.637
> 
> 标签：java, spring, twitter-bootstrap, spring-mvc

我需要将遗留的内部 Java EE 应用程序（JSP、EJB/存储过程、Weblogic）移植到更新的 Java Web 框架并大幅改进功能/UI。我有点受限，因为后端将保留 Oracle 存储过程（没有直接 SQL），因此排除了许多 ORM/JPA 技术。

在这一点上，我倾向于使用 Spring JDBC 来包装存储过程访问以及 Spring MVC、REST 和 Twitter Bootstrap 的组合作为前端。总的来说，我希望能够更好地支持迭代/敏捷功能开发等。

还有其他值得研究的（Java）网络技术吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T23:25:51.827

这只是我的拙见，我建议您研究 Grails。尽管听起来您将无法利用 GORM，但 Grails 仍然提供了出色的 MVC 框架方法，并且约定优于配置意味着您不需要处理 XML 配置文件和/或您所做的注释与许多其他框架。

这是关于 Grails without Gorm 的另一篇 Stackoverflow 帖子：[https ://stackoverflow.com/a/4600991/463196](https://stackoverflow.com/a/4600991/463196)

在 Grails 中，对 Taglib 的支持非常好（编写自定义 Taglib 从未如此简单）并且插件生态系统令人难以置信。

此外，Groovy 意味着不必编写大量样板的 getter/setter，旧的重载构造函数。最容易支持的代码行是从未编写过的代码行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T23:36:47.813

我知道这并不是您问题的真正答案，因为您已经给出了答案。但是根据类似设置（Java EE/Oracle 存储过程/函数）的个人经验，我不能推荐足够多的组合，您建议使用 Spring Core/MVC 和[SimpleJdbcCall](https://stackoverflow.com/questions/9361538/spring-jdbc-template-for-calling-stored-procedures)来链接到您现有的 Oracle 存储过程。我特别喜欢这种设置，因为它可以很好地扩展，并且您可以开始以非侵入方式逐位重构。

# winapi - Pascal：从 LPSYSTEMTIME 记录中获取字段

> ID：12291076
> 
> 赞同：1
> 
> 时间：2012-09-05T23:21:51.583
> 
> 标签：winapi, record, pascal

我正在使用 Win32 api 来获取文件的日期和时间。我有一个 LPSYSTEMTIME 结构，我正在尝试打印它的 wYear 变量。

我有一个函数（GetFileDate）：

```
function GetFileDate : LPSYSTEMTIME
var
    CheckFile: Long;
    FileTime: LPFILETIME;
    FileTimeReturn: LPFILETIME;
    SystemTimeReturn: LPSYSTEMTIME;
begin
    CheckFile := CreateFile(PChar('main.pas'), GENERIC_READ, FILE_SHARE_READ, NIL, OPEN_EXISTING, FILE_ATTRIBUTE_NORMAL, 0);
    GetFileTime(CheckFile, FileTime, NIL, NIL);
    FileTimeToLocalFileTime(FileTime, FileTimeReturn);
    FileTimeToSystemTime(FileTimeReturn, SystemTimeReturn);
    GetFileDate := SystemTimeReturn;
end; 
```

但是当我这样做时...

```
begin
    Write(GetFileDate.wYear);
end. 
```

它吐回来

> ```
> main.pas(22,20) Error: Illegal qualifier
> main.pas(22,20) Fatal: Syntax error, ")" expected but "identifier WYEAR" found
> Fatal: Compilation aborted 
> ```

对此有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T00:31:38.780

`LPSYSTEMTIME`是指向`SYSTEMTIME`结构的指针。尝试使用`^`运算符取消引用该指针，例如：

```
Write(GetFileDate^.wYear); 
```

或者：

```
Write(GetFileDate()^.wYear); 
```

话虽如此，除了您根本没有进行任何错误处理之外，您的`GetFileDate()`实现正在将错误的参数值传递给各种 API 函数。该代码甚至不应该编译，更不用说正确运行了。

试试这个：

```
function GetFileDate : SYSTEMTIME;
var 
  CheckFile: HANDLE; 
  FileTime: FILETIME; 
  FileTimeReturn: FILETIME; 
  SystemTimeReturn: SYSTEMTIME;
  GetFileDateResult: SYSTEMTIME;
begin 
  ZeroMemory(@GetFileDateResult, SizeOf(GetFileDateResult));
  CheckFile := CreateFile('FullPathTo\main.pas', GENERIC_READ, FILE_SHARE_READ, NIL, OPEN_EXISTING, FILE_ATTRIBUTE_NORMAL, 0); 
  if CheckFile <> INVALID_HANDLE_VALUE then
  begin
    if GetFileTime(CheckFile, @FileTime, nil, nil) then
    begin
      if FileTimeToLocalFileTime(@FileTime, @FileTimeReturn) then
      begin
        if FileTimeToSystemTime(@FileTimeReturn, @SystemTimeReturn) then
          GetFileDateResult := SystemTimeReturn;
      end;
    end;
    CloseHandle(CheckFile);
  end; 
  GetFileDate := GetFileDateResult;
end; 

begin   
  Write(GetFileDate.wYear);   
end. 
```

或者，我建议使用`FindFirstFile()`而不是`CreateFile()`这样您就不必打开文件来获取其日期。文件系统可以提供该信息，例如：

```
function GetFileDate : SYSTEMTIME;
var 
  CheckFile: HANDLE; 
  FindFileData: WIN32_FIND_DATA;
  FileTimeReturn: FILETIME; 
  SystemTimeReturn: SYSTEMTIME;
  GetFileDateResult: SYSTEMTIME;
begin 
  ZeroMemory(@GetFileDateResult, SizeOf(GetFileDateResult));
  CheckFile := FindFirstFile('FullPathTo\main.pas', @FindFileData);
  if CheckFile <> 0 then
  begin
    if FileTimeToLocalFileTime(@FindFileData.ftCreationTime, @FileTimeReturn) then
    begin
      if FileTimeToSystemTime(@FileTimeReturn, @SystemTimeReturn) then
        GetFileDateResult := SystemTimeReturn;
    end;
    FindClose(CheckFile);
  end; 
  GetFileDate := GetFileDateResult;
end; 
```

# apache - 正确使用 .htpasswd

> ID：12291080
> 
> 赞同：14
> 
> 时间：2012-09-05T23:22:21.070
> 
> 标签：apache, .htaccess, .htpasswd

假设一个小型（页面 < 5）站点，正确使用`.htaccess`和的方法是`.htpassword`什么？我最近观看[了来自 Nettuts+ 的教程，](http://www.youtube.com/watch?v=S-EYoLyVXWQ)其中给出了这个示例代码：

.htaccess

```
AuthName "Login title"
AuthType Basic
AuthUserFile /path/to/.htpasswd
require valid-user 
```

.htpasswd *（使用`htpasswd -c <file> <username>`命令创建）*

```
username:encrypted-version-of-password 
```

我也很好奇它提供的实际安全级别：可以轻松绕过它吗？如果 Apache 默认不允许用户直接访问这两个文件中的任何一个，他们是否需要在公共目录之外？是否有任何速度影响？

* * *

## 回答 #1

> 赞同：63
> 
> 时间：2012-09-15T08:54:07.830

**What level of security does this provide?**

.htpasswd does not provide much security by itself. That is, it provides a login mechanism, and Apache will not respond without the proper credentials, but unless separately configured, nothing about the exchange is encrypted (or even obfuscated). For example, listening to the `GET` request with [Wireshark](http://www.wireshark.org/) gives you a nice view of all the headers being sent by the client, including:

```
Authorization: Basic d3BhbG1lcjp0ZXN0dGVzdA== 
```

"`d3BhbG1lcjp0ZXN0dGVzdA==`" being just the base64 encoded form of "`wpalmer:testtest`". These days, a hacker (or more likely, a virus) can sit on a public WiFi connection and log any requests containing the `Authorization:` for later perusal. In general, sending any authentication information over an unencrypted HTTP connection is considered a bad idea, even if you're over a wire or secure WiFi end-to-end. It would not, for example, meet the requirements of [PCI Compliance](https://www.pcisecuritystandards.org/) if you were storing customer data, payment information, etc behind the `.htpasswd` lock.

Add https to the mix, and you completely eliminate that particular problem, however...

`.htpasswd` authentication as implemented by Apache httpd does not provide any form of rate-limiting or brute-force protection. You can make as many simultaneous attempts at a password guess as Apache is willing to serve simultaneous pages, and Apache will respond with success/failure as soon as it possibly can. You can use something like [Fail2Ban](http://www.fail2ban.org/) to limit the number of failed attempts can be made before the client is blocked from talking to the server, but that will not necessarily provide any useful protection against a botnet, which may automatically target your server from thousands of unique addresses. This can lead to the decision of *"do I leave myself vulnerable to password attempts from botnets, or do I leave myself vulnerable to denial-of-service attacks, when the entire account is locked-down due to failures from multiple clients?"*

These angles of attack can be limited by adding IP-based restrictions to your `.htaccess` file, allowing connections only from certain addresses. Depending on how you operate, this may be inconvenient, but it also severely limits the types of threats which you would be vulnerable to. You would still be at risk from someone specifically targeting your site, or an infection on part of the network infrastructure itself. Depending on the type of content you are protecting, this may be "good enough". An example of this type of restriction is:

```
Order deny,allow
Deny from all
Allow from 127.0.0.1 
```

This means, in short, "only allow connections from the local host". Line-by-line, it means:

*   `Order deny,allow` defines the order in which rules are processed, with the last match taking precedence.
*   `Deny from all` begin by assuming that all clients are denied
*   `Allow from 127.0.0.1` if the client has the IP `127.0.0.1`, then it is allowed

To some extent, IP-based restrictions will also protect you to the point where HTTPS may be considered optional. Attackers / viruses can still see your credentials, but it is harder for them to use those credentials on the page itself. Again, this would not be PCI compliant, and it would not be suitable for "important" information, but there are some situations for which this may be considered "good enough". Be aware that many people re-use credentials across multiple sites, so failing to protect login details is generally considered to be very dangerous to the user, even if the site itself is protected.

Finally, the `.htaccess` file itself is a bit of a liability. See the response to "do they need to be outside the public directory?" for more details on that.

**Can it be bypassed easily?**

No. There is no reason to expect that the server, when properly configured, would ever fail to require login details to access the protected content. While HTTP Basic authentication has its flaws, Apache httpd is very robust and is one of the most thoroughly tested pieces of software in the world. If you tell Apache that HTTP Basic authentication is required to access certain content, it will be required.

**If Apache by default does not allow users to access either of the two files directly, do they need to be outside the public directory?**

There are a couple of points to this. First, Apache does **not** default to preventing access to either of these files. Many distributions of Apache httpd include initial configuration which prevents access (using "Deny from all" rules) to, depending on the distribution, `.htaccess`/`.htpasswd` files, `.ht*` files, or `.*` files. It is very common, but there are plenty of reasons why this may not be the case. You can add a rule yourself to block these files, if they are not already blocked:

```
<FilesMatch "^.(htaccess|htpasswd)$">
    Order Allow,Deny
    Deny from all
</FilesMatch> 
```

Secondly, it should be pointed out that the way `.htaccess` files work, they are processed when the directory they are in is matched. That is to say: `.htpasswd` may be elsewhere, but `.htaccess` needs to be in the same directory. That said, see the "speed implications" section for a bit more detail.

So, as they can be blocked so easily, why keep `.htpasswd` outside of the public directory? Because mistakes happen, and the `.htpasswd` file is a big liability. Even if you're using HTTPS, exposure of your `.htpasswd` file means that your passwords can be easily cracked via brute-force attacks. These days, consumer-grade GPUs can make millions of password guesses per second. This can make even "strong" passwords fall in comparatively little time. Again, this argument generally only applies to a targeted attack, but the fact remains that if an attacker has your `.htpasswd` file and wants access to your system, these days, they may be able to do so easily. See [Speed Hashing](http://www.codinghorror.com/blog/2012/04/speed-hashing.html) on Coding Horror for a relatively-recent (April 2012) overview of the state of things.

With that in mind, the possibility of accidentally (temporarily) exposing your `.htaccess` file is worth moving it somewhere that should never be even looked at when httpd is looking for content to serve. Yes, there are still configuration changes which could expose it if it's "one level up" instead of "in the public directory", but those changes are much less likely to happen accidentally.

**Are there any speed implications?**

Some.

First off, the use of `.htaccess` files does slow down things somewhat. More specifically, the `AllowOverride all` directive causes a lot of potential slow-down. This causes Apache to look for .htaccess files in every directory, and every parent of a directory, that is accessed (up to and including the `DocumentRoot`). This means querying the filesystem for a file (or updates to the file), for every request. Compared to the alternative of potentially *never* hitting the filesystem, this is quite a difference.

So, why does `.htaccess` exist at all? There are many reasons which might make it "worth it":

*   depending on your server load, you may never notice the difference. Does your server really need to squeeze every last millisecond out of every request? If not, then don't worry about it. As always, don't worry about estimates and projections. Profile your real-world situations and see if it makes a difference.
*   `.htaccess` can be modified without restarting the server. In fact, this is what makes it so slow- Apache checks for changes or the presence of an `.htaccess` file on every request, so changes are applied immediately.
*   An error in `.htaccess` will take down the directory, not the server. This makes it much less of a liability than changing the `httpd.conf` file.
*   `.htaccess` can be modified even if you only have write-access to a single directory. This makes it ideal for shared hosting environments. No need to have access to `httpd.conf` at all, or access to restart the server.
*   `.htaccess` can keep the rules for access next to the files they are meant to effect. This can make them a lot easier to find, and just keeps things more-organised.

Don't want to use `.htaccess`, even considering all of the above? Any rule that applies to `.htaccess` can be added directly to `httpd.conf` or an included file.

What about `.htpasswd`? That depends on how many users you have. It is file-based, and the bare minimum in terms of implementation. From [The docs for httpd 2.2](http://httpd.apache.org/docs/2.2/howto/auth.html):

> Because of the way that Basic authentication is specified, your username and password must be verified every time you request a document from the server. This is even if you're reloading the same page, and for every image on the page (if they come from a protected directory). As you can imagine, this slows things down a little. The amount that it slows things down is proportional to the size of the password file, because it has to open up that file, and go down the list of users until it gets to your name. And it has to do this every time a page is loaded.
> 
> A consequence of this is that there's a practical limit to how many users you can put in one password file. This limit will vary depending on the performance of your particular server machine, but you can expect to see slowdowns once you get above a few hundred entries, and may wish to consider a different authentication method at that time.

In short, `.htpasswd` is slow. If you only have a handful of users who need to authenticate, you'll never notice, but it is yet another consideration.

**Summary**

Securing an admin section with `.htpasswd` is not ideal for all situations. Given its simplicity, it may be worth the risks and problems where security and performance are not the highest of priorities. For many situations, with a little bit of tweaking, it can be considered to be "good enough". What constitutes "good enough" is a judgement call for you to make.

# google-maps-api-3 - Google Maps V3--地图未在 IE 中加载--刷新时加载

> ID：12291082
> 
> 赞同：2
> 
> 时间：2012-09-05T23:22:31.880
> 
> 标签：google-maps-api-3

我非常接近完成这张地图，但它前进了 2 步，后退了 1 步。现在我基本上完成了，在这个论坛的帮助下，IE（8 或 9）在初次访问页面时没有加载地图：[http ://www.wrh.noaa.gov/mfr/rec/v2 /](http://www.wrh.noaa.gov/mfr/rec/v2/) 我要刷新页面，然后地图和侧边栏显示。我在第 599 行尝试了 settimeout，但已将其注释掉。settimeout 确实强制 IE 加载地图，但后来我得到一个*el* not defined 类型的错误。

有什么想法可以让这张地图加载到 IE 以及当前功能的 FF 和 Chrome 中吗？

谢谢你的帮助，沙德

# c++ - OpenCV IplImage AccessViolationException

> ID：12291083
> 
> 赞同：1
> 
> 时间：2012-09-05T23:22:37.343
> 
> 标签：c++, opencv, access-violation, iplimage

首先，我对 OpenCV 很陌生。我尝试了大约一周没有成功，似乎我永远不会成功。这就是为什么我不得不向面临同样问题的人寻求帮助。

我想在 VC# 2010 中构建非常简单的应用程序，它基本上会执行以下操作：

*   读取 JPEG 图像并将其存储到位图变量
*   将位图变量发送到封装在 VC++ dll 中的函数
*   在 VC++ dll 中对图像执行一个简单的操作（例如画一个圆圈）
*   将修改后的图像返回到 VC# 应用程序并显示在 PictureBox 中

**VC#中的代码：**

```
[DllImport("CppTestDll.dll", CallingConvention = CallingConvention.Cdecl)]
    public static extern Bitmap testImage(Bitmap img);

private void button1_Click(object sender, EventArgs e)
    {
        // read the source jpeg from disk via a PictureBox
        Bitmap bmpImage = new Bitmap(pictureBox1.Image);

       //call the function testImage from the VC++ dll
   //  and assign to another PictureBox the modified image returned by the dll
        pictureBox2.Image = (System.Drawing.Image)testImage(bmpImage);
    } 
```

**VC++ dll中的代码：**

```
#include <opencv2/highgui/highgui.hpp>
#include <opencv2/opencv.hpp>
#include <iostream>

#include <stdio.h>

using namespace cv;
using namespace std;

    __declspec(dllexport) char* testImage(char *image)
    {
        //the image is 640x480
        //read the jpeg image into a IplImage structure
       IplImage *inputImg= cvCreateImage(cvSize(640,480), IPL_DEPTH_8U, 3); 
       inputImg->imageData = (char *)image;

        // I also tried to copy the IplImage to a Mat structure
        // this way it is copying onl the header
        // if I call Mat imgMat(inputImg, true); to copy also the data, I receive an error for Memory read access
        Mat imgMat(inputImg);

        // no matter which circle drawing method I choose, I keep getting the error
        //  AccessViolationException was unhandled. Attempted to read or write protected memory. This is often an indication that other memory is corrupt.

        cvCircle(inputImg,Point(100,100),100,cvScalar(0, 0, 255, 0),1,8,0);
        circle(imgMat,Point(100,100),100,Scalar(0, 0, 255, 0),1,8,0);

        // I tried both ways to return the image
        // If I try to modify the image I receive the above described error
        // If I don't modify the input image, I can send back the original image, but it is useless

        //return (char *)imgMat.data;
        return (char *)inputImg->imageData;
    } 
```

请你好心让我知道我在哪里弄错了吗？或者也许提供一个小示例代码来告诉我如何做到这一点？

**更新** 如果我在 VC++ dll 中使用 cvImageLoad 从磁盘读取 jpeg 文件，则绘图操作正常，我可以返回修改后的图像。问题只是以正确的方式将图像发送到 dll。任何建议我该怎么做？

**我也** 像这样更改了VC++中的dll

```
__declspec(dllexport) char* testImage(uchar* image)
{
        uchar *pixels = image;
        Mat  img(480,640,CV_8UC3,pixels);

        if (!img.data)
        {
            ::MessageBox(NULL, L"no data", L"no data in imgMat mat", MB_OK);
        }

        line(img,Point(100,100),Point(200,200),Scalar(0, 0, 255, 0),1,8,0);
        return (char *)img.data;
    } 
```

画线操作失败，但是如果我注释线画，我可以得到返回的图像。

这是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T06:58:46.797

当您将位图图像提供给将其作为 char* 的 testImage 函数时，可能会出现转换问题。我认为是这样的原因是，当您没有图像数据并尝试访问它时，会出现这种错误。您可以调试它并查看图像中的数据是否可用或使用

```
if(!imgMat.data)
   //error. Print something or break 
```

**编辑**

我没有在 C# 中使用 Opencv，但通常人们使用**opencvsharp、emgu**或其他替代方案。但你的方式似乎不合适。在 C# 中使用 opencv dll ；他们说它需要包装器或类似的东西。他们建议将 Emgu 用于 C#。

你还编译你的 dll 并启用 COM 互操作吗？（要在 C# 中使用 c++ dll，他们说它应该编译为 COM）。但我认为它仍然行不通。**所有这些 Emgu、opencvdotnet、opencvsharp 等包装器背后一定有一个原因。正确的？**

# c# - Facebook Graph API：有应用访问令牌，需要用户访问令牌而无需交互

> ID：12291085
> 
> 赞同：1
> 
> 时间：2012-09-05T23:22:54.720
> 
> 标签：c#, facebook

我们有一个音频博客网站，可以将其配置为在用户创建新博客条目时发布指向用户 Facebook 时间线的链接。

为此，我们让用户在设置指向其 Facebook 帐户的链接时授权我们的应用程序。我们获得了**publish_stream**、**offline_access**和**manage_pages**权限（稍后会详细介绍）。

所有代码都在 C# 中，但原则适用于任何语言，因为它是我们关注的**Facebook API的工作原理。**我们正在使用**OAuth 2**和**Graph API**来实现所有这些。

因此，我们使用我们的**应用 ID**和**密钥**获取**应用访问令牌**，并使用该令牌发布到用户的时间线，这很好用（因为他们已经授权我们的应用执行此操作）。我们还可以查询 Graph API 并获取他们的**喜欢**、**朋友**和其他各种数据。

 ********现在问题来了：**

我们的一些用户希望将更新发布到他们自己的时间线以及他们管理的页面的时间线。理论上这很简单：您使用以下网址查询用户管理的页面的 API：[https://graph.facebook.com/{userid}/accounts?access_token={token}](https://graph.facebook.com/%7Buserid%7D/accounts?access_token=%7Btoken%7D)

从该调用返回的 JSON 据说包含页面 ID 和这些页面的页面访问令牌。然后，您使用页面访问令牌发布到页面的时间线。

但是，当我们尝试使用**应用访问令牌**调用此 URL 时，我们会收到 OAuthException **102** “请求此资源需要用户访问令牌”。

请注意，这与 OAuthException **104** “请求此资源需要访问令牌”（如果您忽略传递访问令牌，您会得到）以及 OAuthException **190** “无效的 OAuth 访问令牌签名”（您如果访问令牌不是有效的令牌，则会得到）。

所以我们的访问令牌是有效的，但对这个特定的 url 无效。因此，对于这个特定的提要，我们似乎需要一个**用户访问令牌**而不是**应用程序访问令牌**（我早就不在乎为什么会这样，它似乎就是这样）。

关于这个主题的所有 Facebook 文档（我现在一定已经阅读了所有文档）指向一个地方： http: [//developers.facebook.com/docs/authentication/server-side/](http://developers.facebook.com/docs/authentication/server-side/)，又名“服务器端身份验证”流”页面。此页面描述了如何通过将用户重定向到身份验证对话框并请求相关权限来获取难以捉摸的用户访问令牌，**但我们需要在没有用户交互的情况下实现这一点，并且用户已经为我们的应用程序提供了我们需要的所有权限**。所有这些自动发布都发生在音频后处理的服务器端，因此我们在这个阶段无论如何都无法与用户交互。

我不明白。为什么我们可以使用应用程序访问令牌从用户那里获取我们想要的几乎任何数据（好吧，无论他们授予我们获取什么权限），但是**/accounts**数据我们需要不同的（用户）访问令牌？

任何人都可以阐明我们如何获得用户访问令牌，这将允许我们在不与用户进行任何进一步交互的情况下为我们的用户获取 /accounts 数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T20:19:40.180

> So our access token is valid, but just not valid for this particular url. It seems therefore that we need a **user access token** and not an **app access token** for this particular feed

Due to the permissions per type of access token, you do need a valid user access token in this particular case. [Read all about access tokens and types](https://developers.facebook.com/docs/concepts/login/access-tokens-and-types/). That's just the way it is.

> This page describes how to get the elusive user access token by redirecting the user to the auth dialog and asking for the relevant permissions **but we need to achieve this without interaction from the user and the user has already given our app all the permissions we need**.

If your user already has given his/her permissions, why are you struggling then? I suggest you persist the user access token. From [this endpoint](https://developers.facebook.com/docs/reference/dialogs/oauth/):

```
https://www.facebook.com/dialog/oauth?client_id=..&redirect_uri=..&state=..&scope=..&response_type=..&display=.." 
```

you retrieve a code, like this:

```
YOUR_REDIRECT_URI?code=OAUTH_CODE_GENERATED_BY_FACEBOOK&state=YOUR_STATE_VALUE 
```

Use this code to generate your user access token, as explained [here](https://developers.facebook.com/docs/howtos/login/server-side-login/):

```
https://graph.facebook.com/oauth/access_token?client_id=..&redirect_uri=..&client_secret=..&code=.. 
```

This will result in a response like:

```
access_token=USER_ACCESS_TOKEN&expires=NUMBER_OF_SECONDS_UNTIL_TOKEN_EXPIRES 
```

There it is, your user access token. Persist it. As you can see it expires after the value indicated in the response. If you are using the new API, it should indicate 60 days (that brings me back to this: offline_access is deprecated and results in short-lived - valid for 2 hours - tokens), [link](https://developers.facebook.com/roadmap/offline-access-removal/). Whenever your user logs in to your app and uses the Facebook integration, the tokens gets refreshed to again, 60 days. This means, that IF your user should not login to your app and use it for 60 days, it will expire.

You can check whether the user access token is expired with:

```
https://graph.facebook.com/debug_token?input_token=INPUT_TOKEN&access_token=ACCESS_TOKEN 
```

If that does: renew the user access token **by using your app access token**, it is well documented [right over here](https://developers.facebook.com/docs/howtos/login/debugging-access-tokens/). But I'm quoting this part:

> **Server-side Login** To obtain a fresh [user] access token in this case you must pass the user through the full server-side Login flow again. However, assuming the user has not de-authorized your app, when you redirect the user to the OAuth Dialog, they will not be prompted to reauthorize your app, and will be immediately redirected to the redirect_uri. This means that the re-authentication process can appear reasonably transparent to the user.

Bottom-line: there are no user access tokens that are valid for ever, the app access token however is. Persist your user access token and check whether it is still valid before performing API calls with it. A normal user should use your app within 60 days and should not just de-authorize your app for fun. Hence the use case in which the user should re-authorize is fairly rare, however, you need to expect it.******

# javascript - 否则如果是 javascript

> ID：12291092
> 
> 赞同：4
> 
> 时间：2012-09-05T23:24:30.790
> 
> 标签：javascript, if-statement

我有一个简单的功能，应该提示用户输入公司名称，然后是一个确认消息框，询问用户“你今天想订购一个网页设计包吗？” 问题在于我的“if”和“else if”语句。当用户单击“确定”时，“if”语句应显示警告框“感谢您的订单”；和一个“else if”语句，当用户单击“取消”时，应该显示一个警告框“我们感谢您的时间”。该函数由 onClick 脚本调用。出现提示和确认框，但我无法弄清楚为什么我的 if 和 else if 框没有出现。我错过了什么？任何帮助表示赞赏。谢谢。

```
<SCRIPT language = "Javascript">

function submitOrder() {

var companyName = prompt("Please enter company name.", "")

var willOrderPackage = confirm("Would you like to order a Web Design package today?")

if (willOrderPackage == "true") {
   alert("Thank you for your order.")

}else if{
   alert("We appreciate your time.")
}
</SCRIPT> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-05T23:39:03.570

实际上有两种不同的 if..else 结构。第一个是一个简单的 if-else：

```
if ( condition ) {
   // Do stuff if condition is true
} else {
   // Do stuff if condition is not true
} 
```

接下来是 if-else-if：

```
if ( condition ) {
   // Do stuff if condition is true
} else if ( differentCondition ) {
   // Do stuff if differentCondition is true
} else {
   // Do stuff if neither condition nor differentCondition is true
} 
```

您还可以根据需要多次使用 else-if，例如：

```
if ( condition ) {
   // Do stuff
} else if ( condition2 ) {
   // etc
} else if ( condition3 ) {
   // etc
} else if ( condition4 ) {
   // etc
} else {
   // etc
} 
```

if..else 的每一部分都是可选的，除了最初的 if 块。所以如果你不想做任何事情如果`condition`不是真的，你可以完全省略 else 块：

```
if ( condition ) {
   // do stuff if condition is true
} 
```

高温高压

暂时超越您的问题，在您的 if 语句的条件中评估的表达式有点摇摆不定。

willOrderPackage 将始终是`true`or `false`，但重要的是要注意`true`and `"true"`or `false`and`"false"`是不同的。第一个是布尔值，第二个是字符串。

所以，你的 if 语句应该问：

```
if ( willOrderPackage == true ) { 
```

甚至更好的是，当您在 if 语句中评估表达式时`== true`，它的末尾有一个不可见的隐含。例如：

```
if ( willOrderPackage == true ) { 
```

将被解释为：

```
if ( (willOrderPackage == true) == true ) 
```

这样做的好处是您实际上可以`== true`从代码中省略整个部分，因此您可以编写：

```
if ( willOrderPackage ) { 
```

实际上，您仍在说“如果 willOrderPackage 为真”

希望这有助于为您澄清一些事情！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-05T23:26:19.243

你`else if`没有条件，使用`else`

就像声明的那样

```
if (willOrderPackage == "true") {
alert("Thank you for your order.") 
```

错了： willOrderPackage 是一个布尔值，所以它可以是

```
(willOrderPackage == true) 
```

甚至更好

```
(willOrderPackage) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-05T23:26:53.570

最好使用：

```
if (willOrderPackage) { 
```

代替 ：

```
if (willOrderPackage == "true") { 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-05T23:28:09.860

改成：

```
if (willOrderPackage) {
   alert("Thank you for your order.")

}else{
   alert("We appreciate your time.")
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T23:34:07.627

这是正确完成的方式：

```
<script type="text/javascript">

function submitOrder() {
    var companyName = prompt("Please enter company name.", "");
    var willOrderPackage = confirm("Would you like to order a Web Design package today?");

    if (willOrderPackage) {
        alert("Thank you for your order.");
    }else{
        alert("We appreciate your time.");
    }
}

</script> 
```

我做的事情：

*   现代化的编码风格
*   切换到类型属性而不是语言
*   在每个结束行添加分号
*   删除了多余的`if`关键字
*   添加了一个原本缺少的右大括号
*   删除了与字符串 true 的比较，与布尔值的比较不需要这个

# email - 无法使用来自主机的 mailx/mail 发送邮件

> ID：12291098
> 
> 赞同：0
> 
> 时间：2012-09-05T23:25:38.307
> 
> 标签：email, unix, sendmail, mailx

当我运行类似的东西时，在其他主机上：

```
echo 'foo' | mail -s 'bar' user 
```

它立即发送邮件，如果我输入，`mailq`我被告知它是空的。在这台主机上，上面的邮件命令运行，但从未收到邮件，如果我键入，`mailq`我会看到类似以下内容：

```
5B9B340884     4140 Sat Sep  1 04:33:02  root@timber.com
(connect to mailrelay.timber.com[10.33.16.200]:25: Connection timed out) 
```

这意味着什么？我不知道什么是失败的以及需要什么来解决这个问题..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T00:30:51.653

这意味着您发送它的主机无法连接到邮件中继，在您的情况下`mailrelay.timber.com`，很可能是防火墙或其他一些网络问题。

# java - Java TSP 置换点

> ID：12291100
> 
> 赞同：0
> 
> 时间：2012-09-05T23:26:17.183
> 
> 标签：java, permutation, points, traveling-salesman

为学校做一个项目，我们实现最近邻启发式（我已经做过），以及我们进行详尽搜索的旅行销售员问题（然后我们分析算法，它们的时间复杂度等）。我们的老师说要四处寻找用于详尽搜索部分的代码（或修改），而不是像在最近邻部分中那样对整个事物进行编程。我环顾四周，只找到了与我们被指示如何执行程序无关的内容。与使用整数的典型问题相反，我们使用点 (x, y)。我的目标是计算最短排列并能够知道该排列是什么。所以我想有一个数组数组（其中包含排列）。

如果有人可以帮助我进行详尽的搜索，那就太好了。

这是我的代码的一些摘录（成员变量、计算两点之间距离的函数以及所有点的存储位置）：

```
private int x;
private int y;
private boolean visited;

public double dist( point pt ){
    int xdist = this.getX() - pt.getX();
    int ydist = this.getY() - pt.getY();
    double xsr = xdist*xdist;
    double ysr = ydist*ydist;
    return Math.sqrt( xsr + ysr );
}

point[] points = new point[n]; 
```

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T06:42:09.203

单个 TSP 可能的解决方案本质上只是一组城市，代表访问它们的顺序，没有起始城市。

因此，假设 n（城市数量）= 5。那么一个可能的解决方案表示为长度为 4 的数组。现在，您可以通过多少种方式对城市 [B、C、D、E] 进行排序？BCDE, BCED, BDCE, BDEC, ... 那就是`4!`24 种组合。所以对于 n 个城市，你有`(n-1)!`组合。对于 10 个城市，有 362880 个组合。对于 20 个城市或 10^17 个组合，如果您想将它们全部保存在内存中，您将耗尽内存。

另一个问题是你需要 n 个嵌套的 for 循环，但不可能只写那些 for 循环，因为有 n 个。（您可以直接开始编写`for() for() for() ...`。因此，您的实现可能需要某种[walker](https://github.com/droolsjbpm/drools-planner/blob/master/drools-planner-core/src/main/java/org/drools/planner/core/bruteforce/BruteForceEntityWalker.java#L85) [方法](https://github.com/droolsjbpm/drools-planner/blob/master/drools-planner-core/src/main/java/org/drools/planner/core/heuristic/selector/variable/PlanningVariableWalker.java#L120)，其中您有一个循环遍历所有组合，就像一个数字时钟，每个数字代表数组中的 1 个索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-12T16:53:43.850

您不需要（额外的）内存来为给定实例生成所有排列/解决方案。你可以把它们写在屏幕上...

看看这个实现[https://github.com/stardog-union/pellet/blob/master/core/src/main/java/org/mindswap/pellet/utils/PermutationGenerator.java](https://github.com/stardog-union/pellet/blob/master/core/src/main/java/org/mindswap/pellet/utils/PermutationGenerator.java)。
它在每次调用`getNext()`新解决方案时生成。

```
public void PermGen() {
    int[] tour;
    PermutationGenerator x = new PermutationGenerator(N);
    System.out.println(x.getTotal());
    while (x.hasMore()) {
        tour = x.getNext();
        System.out.println(Arrays.toString(tour));
    }
} 
```

上面的 Java 代码打印了所有 TSP 实例解决方案……
但是您当然可以保存它们（例如在文件中），但是您需要数百 TB 才能做到这一点。

# node.js - 重新创建快速会话？

> ID：12291106
> 
> 赞同：0
> 
> 时间：2012-09-05T23:27:00.383
> 
> 标签：node.js, coffeescript, express, connect

给定一个 sessionId，我需要获取快速会话对象。之后，我希望能够编辑这个会话对象，并让它自动更新会话存储中的会话。

```
Session = require('express').session.Session;

_testSession: (sStore, sId) ->
  console.log 'called _testSession with session id: ' + sId

  sStore.get sId, (error, session) ->
    expressSession = new Session 
        sessionId: sId
        sessionStore: sStore
        , session
    expressSession.foo = 17

    console.log 'set expressSession.foo to: ' + expressSession.foo

    setTimeout (()->
        sStore.get sId, (error, session) ->
            console.log 'foo = ' + session.foo
        ), 1000 
```

但是，在运行此测试时，我得到以下输出：

```
called _testSession with session id: YaFLcq3eSvoNuwnLS1T1ntrC.3UJMuQ5So6lYRWLDgIRx4Vk/Ab1qH65zV9IwMqoMcR8
set expressSession.foo to: 17
foo = undefined 
```

有谁知道这里发生了什么？... :(

**==== 编辑 ====**

我也尝试调用 save() ，以便代码读取：

```
console.log 'set expressSession.foo to: ' + expressSession.foo

expressSession.save (error) ->
    console.log 'error: ' + error
    setTimeout (()->
        sStore.get sId, (error, session) ->
            console.log 'foo = ' + session.foo
        ), 1000 
```

并得到相同的输出:(

**==== 编辑 ====**

没关系， save() 有效。sessionId 应该是 sessionID... /facepalm.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T16:26:25.043

正如@robertj 所说，除非您告诉它保存，否则您可能不会看到保存的对象。

但更重要的是，除非您特别打算测试会话对象本身（即连接的会话中间件），否则您正在做的事情毫无意义。

没有更多上下文很难说，但我希望您在这里的目的是确保某些路由处理程序或中间件将某些东西放入会话中，是吗？如果是这样，请单独测试它。例如

```
var should = require('should');

var req = { session : {}, /*any other bits of req you expect your handler to need */};
var res = { /* whatever functions your handler needs off the response */ };

yourHandler(req, res);
req.session.foo.should.be.ok; // not null; alternatively test equality or whatever 
```

那是为了“单元测试”。如果你正在做一个集成测试（你想看到事情一起工作，例如 db 和 view 等），那么你仍然不需要检查会话，你应该检查它的效果

# asp.net - 无法使用 ASP.Net 1.1 版运行网站；虽然 4.0 有效

> ID：12291116
> 
> 赞同：1
> 
> 时间：2012-09-05T23:27:35.540
> 
> 标签：asp.net, iis, windows-server-2003, aspnet-regiis.exe

在实时环境中运行良好的 ASP.Net 应用程序（1.1 版）。

我突然遇到一个问题，一些功能停止工作。我尝试在测试环境中模拟问题。我发现它是 IIS -> 网站 -> Mywebsite -> 属性 -> asp.net 选项卡 -> asp.net 版本下的 ASP.Net 版本。将该版本从 4.0.xxxx 更改为 1.1.xxxx 有效。

但是当我在现场做同样的事情时，事实并非如此。
我尝试浏览该页面，但收到“找不到页面”的消息。
之后我先跑了“ `C:\Windows\Microsoft.Net\Framework\v1.1.xxxx\aspnet_regiis -u`” `C:\Windows\Microsoft.Net\Framework\v1.1.xxxx\aspnet_regiis -i`。

注册结束后，我在 iis for Mywebsite 中检查了 asp.net 版本，它变回了 4.0.xxxxx，我真的不知道为什么会这样。我可以使用 4.0.xxxx 访问页面，但我需要使用 1.1.xxxx 访问它们

请问有人可以点亮吗？

环境：Windows Server 2003

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T20:53:09.290

我得到了答案！

这是由于一些微软补丁更新而发生的。这使得 asp.net 1.1 的 Web 服务扩展被阻止。

我按照以下步骤让它工作！

1.  转到IIS（我使用的版本是6.0）
2.  展开机器名称
3.  单击 Web 服务扩展

在右侧，我可以看到可用的 .Net 框架。右键单击 ASP.Net v1.1.4322 > 允许。就是这样。问题解决了。

# php - MySQL从一列中选择所有数据

> ID：12291122
> 
> 赞同：2
> 
> 时间：2012-09-05T23:28:51.357
> 
> 标签：php, mysql, sql

我想选择所有的用户名。我试着做`SELECT username FROM members`然后`mysql_fetch_array`。所以我会这样做`$data["username"]`。但我也想单独选择每一行。任何有关如何执行此操作的帮助都会有所帮助，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T23:33:07.703

为此使用 PDO。使用 PDO 的**[示例](http://php.net/manual/en/book.pdo.php)**

```
<?php
$stmt = $dbh->prepare("SELECT username FROM members");
if ($stmt->execute(array($_GET['username']))) {
  while ($row = $stmt->fetch()) {
    print_r($row);
  }
}
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T23:31:45.647

遍历所有结果`while()`

```
$result = mysql_query('SELECT username FROM members');

while ($username = mysql_fetch_assoc($result)){
    echo $username['username']; //this will go for every result, so every row in the database
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T23:31:46.253

```
while($row = mysql_fetch_array($result))
  {
  echo $row['username'];
  } 
```

# javascript - 使用 Google API 的三星智能电视应用程序？

> ID：12291130
> 
> 赞同：2
> 
> 时间：2012-09-05T23:30:14.447
> 
> 标签：javascript, samsung-smart-tv

我刚刚开始研究三星智能电视平台。我正在编写一个代码应用程序，它利用 google api 来呈现数据。所以部分脚本在谷歌上。现在要运行我必须包含的依赖函数

```
<script lang="javascript" type="text/javascript" src="https://www.google.com/jsapi"></script> 
```

按钮控制事件在单独的 Main.js 文件中处理，如下所示

```
switch(keyCode)
{
    case tvKey.KEY_RETURN:

    case tvKey.KEY_PANEL_RETURN:
        alert("RETURN");
        widgetAPI.sendReturnEvent();
        break;
    case tvKey.KEY_LEFT:
        alert("LEFT");
        break;
    case tvKey.KEY_RIGHT:
        alert("RIGHT");
        break;
    case tvKey.KEY_UP:
        alert("UP");
        break;
    case tvKey.KEY_DOWN:
        alert("DOWN");
        break;
    case tvKey.KEY_ENTER:
    case tvKey.KEY_PANEL_ENTER:
        alert("ENTER");
        break;
    default:
        alert("Unhandled key");
        break;
}` 
```

现在我需要在按钮按下事件的情况下运行使用 Google API 的函数（在 Main.js 中）。尝试这样做会给我以下错误

```
##[JAVASCRIPT ERROR]
##File         : file://localhost/C:\Program%20Files\Samsung\Samsung%20TV%20SDK(3.5.1)\Apps/_temp_20100108_/app/javascript/gfdynamicfeedcontrol.js
##Line No      : 87
##Error Detail : TypeError: google.feeds is undefined 
```

这种情况的可能解决方法似乎找到了一种方法来包括

```
<script lang="javascript" type="text/javascript" src="https://www.google.com/jsapi"></script> 
```

在 Main.js 中

有没有办法这样做？

该问题的任何其他解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T22:01:39.203

如果加载外部资源，您可能必须阻止脚本执行，直到文件完全加载。您可以使用类似 $(document).ready 或设置超时并检查脚本中定义的常量是否存在。

# android - 安卓哈希键

> ID：12291134
> 
> 赞同：7
> 
> 时间：2012-09-05T23:30:26.037
> 
> 标签：android, facebook

我已经完成了开发一个使用 facebook sdk 与 Facebook 集成的 android 应用程序。在这一点上，我对应用程序没有任何问题或问题需要解决，因为它功能强大且运行良好 - 但话虽如此，我相信即使应用程序正在运行，我仍然不完全理解什么是 android 密钥哈希。

1) 我知道 facebook sdk 为开发人员提供了一个唯一的应用程序 ID，以了解他们与谁“交谈”，因此他们也可以控制谁是谁等，但是他们从拥有你的 android 密钥哈希中获得了什么？

2）我知道我在开发PC上的模拟器有一个密钥哈希（我得到了），三星Galaxy S1和S2（都有相同的密钥哈希）有一个不同的，现在我已经通过了apk给另一个具有不同密钥哈希（以及不同的手机品牌和 android 版本）的用户。所以 - 如果有一天我在 Google Play 上发布我的应用程序，我是否需要更新所有可能的哈希键的 facebook/开发人员？

3）哈希键对于模型或平台/android版本是否唯一且恒定，或者我可以从我的应用程序生成一个密钥哈希，这样我就可以添加它并使从不同手机运行的所有相同应用程序使用相同的一个?

4）再次一般 - 我不明白什么是密钥散列，谁生成它，最重要的是为什么 - 密钥散列的用途是什么，它对 facebook 有什么好处？

我试图搜索它，但在这里我发现了关于知道什么是模拟器密钥哈希的步骤或关于如何在 Google 上处理 Facebook/开发人员的方向的问题。我确定有涵盖此内容的文档，但找不到。

谢谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-06T18:41:01.227

> 1) 我知道 facebook sdk 为开发人员提供了一个唯一的应用程序 ID，以了解他们与谁“交谈”，因此他们也可以控制谁是谁等，但是他们从拥有你的 android 密钥哈希中获得了什么？

[正如您在文档](https://developers.facebook.com/docs/mobile/android/build/#sig)中看到的那样，它是用于验证应用程序身份的额外安全层。

> 2）我知道我在开发PC上的模拟器有一个密钥哈希（我得到了），三星Galaxy S1和S2（都有相同的密钥哈希）有一个不同的，现在我已经通过了apk给另一个具有不同密钥哈希（以及不同的手机品牌和 android 版本）的用户。所以 - 如果有一天我在 Google Play 上发布我的应用程序，我是否需要更新所有可能的哈希键的 facebook/开发人员？

密钥哈希基于您用于构建 APK 的计算机，它不依赖于运行它的手机。因此，如果您只在一台开发机器上处理您的应用程序，那么您只需为您的应用程序担心**一个密钥哈希。**目前，当您仍在开发应用程序时，您正在使用**android 调试**密钥，当您想发布到 Google Play 时，Google 要求您使用自己的密钥签署 APK，而**不是**android 调试密钥。当您创建自己的密钥来签署您的 APK 时，您还需要在 Facebook 的应用设置中复制并粘贴您自己的密钥的密钥哈希。

> 3）哈希键对于模型或平台/android版本是否唯一且恒定，或者我可以从我的应用程序生成一个密钥哈希，这样我就可以添加它并使从不同手机运行的所有相同应用程序使用相同的一个?

就像我上面所说的，密钥哈希与运行它的平台/设备无关，密钥哈希与您构建 APK 的机器相关联。因此，出于测试目的，您找到 android 调试密钥的密钥哈希并将其粘贴到应用程序设置中，所有运行该 APK 构建的手机都将正常工作。简而言之，哈希键 => 开发 PC，而**不是**哈希键 ==> 手机

> 4）再次一般 - 我不明白什么是密钥散列，谁生成它，最重要的是为什么 - 密钥散列的用途是什么，它对 facebook 有什么好处？我试图搜索它，但在这里我发现了关于知道什么是模拟器密钥哈希的步骤或关于如何在 Google 上处理 Facebook/开发人员的方向的问题。我确定有涵盖此内容的文档，但找不到。谢谢！

密钥哈希是在编译应用程序时用于签署 APK 的密钥的哈希值。Eclipse 会使用 android 调试密钥自动为您执行此操作，但是当您上传到 Google Play 时，您需要创建自己的密钥。这对您和 Facebook 都有好处，因为它是一个额外的安全层，可确保代表您调用 API 的应用程序实际上是您的应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T13:22:00.117

您可以使用一个密钥注册您的应用程序，并且您必须与您的 Facebook 开发人员资料相关联，[请参阅此](https://developers.facebook.com/docs/mobile/android/build/#sig)。为了让您在部署之前在各种设备上测试应用程序，您应该使用 Android 调试密钥，如[Android 文档中所述](http://developer.android.com/tools/publishing/app-signing.html)

# ios - 在自定义 UITableViewCell 上调用 deselectRowAtIndexPath 不是流畅的过渡

> ID：12291135
> 
> 赞同：2
> 
> 时间：2012-09-05T23:30:33.103
> 
> 标签：ios, uitableview

这是有问题的应用程序部分的设置。

MyTableViewController 是我的自定义 UITableViewController 类。

TableViewController1、2 和 3 都是 MyTableViewController 类型。1和2是由一个tabbarcontroller控制的viewcontrollers，3是在从1中选择一个单元格后压入栈中的。

BaseCell 是我的 UITableViewCell 子类。

MyCell1、2 和 3 都是 BaseCell 类型。

细胞是这样设置的

基本单元

```
- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
if (self) {
    // Initialization code
    UIView *myContentView = self.contentView;

    self.gradientView = [[UIView alloc] initWithFrame:myContentView.frame];
    CAGradientLayer *gradient = [CAGradientLayer layer];
    gradient.colors = [UIColor grayGradient];
    [self.gradientView.layer insertSublayer:gradient atIndex:0];
    self.gradientView.backgroundColor = [UIColor blueColor];
    [myContentView addSubview:self.gradientView];
}
return self;
}

- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{    
[super setSelected:selected animated:animated];

// Configure the view for the selected state
if (selected) {
    self.gradientView.layer.hidden = TRUE;
} else {
    self.gradientView.layer.hidden = FALSE;
}
}

- (void)setHighlighted:(BOOL)highlighted animated:(BOOL)animated
{
[super setHighlighted:highlighted animated:animated];

// Configure the view for the highlighted state
if (highlighted) {
    self.gradientView.layer.hidden = TRUE;
} else {
    self.gradientView.layer.hidden = FALSE;
}
}

-(UILabel *)newLabelWithColor:(UIColor *)incomingColor font:(UIFont *)incomingFont
{
UILabel *newLabel = [[UILabel alloc] initWithFrame:CGRectZero];
newLabel.backgroundColor = [UIColor clearColor];
newLabel.opaque = YES;
newLabel.textColor = incomingColor;
newLabel.highlightedTextColor = [UIColor whiteColor];
newLabel.font = incomingFont;
return newLabel;
} 
```

因此，扩展 BaseCell 的每个单元格都有渐变背景。Cell1、2 和 3 继续以类似的方式向 contentView 添加更多对象。每个单元格都针对不同的目的进行定制，都遵循相同的格式。

```
- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
if (self) {
    // Initialization code
    UIView *myContentView = self.contentView;

    self.someLabel = [self newLabelWithColor:[UIColor blueColor] font:[UIFont boldSystemFontOfSize:12]];
    [myContentView addSubview:self.someLabel];

    self.someView = [UIView] alloc] init];
    [myContentView addSubview:self.someView];
}
return self;
}

- (void)layoutSubviews
{
   //Layout any views necessary
}

- (void)setupCell
{
     self.someLabel = @"Placeholder Text";
     self.someView.backGroundColor = [UIColor redColor];
} 
```

想象一下标签只是单元格中的标题，视图是单元格左侧的一个小条，指示状态（实际代码具有确定不同颜色/状态的逻辑）。

最后一点信息是 MyTableViewController 似乎不想自行取消选择单元格。我在任何地方都没有 clearSelectionOnViewWillAppear = NO（默认状态为 YES），但是当我返回 TableViewController1、2 之一时，单元格仍保持选中状态。奇怪的是，3 没有这种行为，我不知道为什么。因此我实施

```
- (void)viewDidAppear:(BOOL)animated
{
[super viewDidAppear:animated];
[self.tableView deselectRowAtIndexPath:[self.tableView indexPathForSelectedRow] animated:YES];
} 
```

和取消选择的作品。如果我把它放在 viewWillAppear 中，它就不起作用。所以我的第一个问题是，有谁知道为什么会发生这种行为？UITableViewController 的标准行为是让一个单元格突出显示，然后在返回时取消选择它，以便提醒用户他们选择的内容，如联系人之类的。我想知道这个问题是否会导致我的下一个问题，这是帖子的主题。

当它们被取消选择时，这些单元格看起来很糟糕。流程是这样的 Return To TableView -> 单元格在选定状态下以蓝色突出显示 -> 单元格返回突出显示状态（所有文本均为白色，带有渐变背景，self.someView 仍然不可见）-> 单元格返回正常状态（文本是正常颜色和 self.someView 重新出现）。过渡根本不是流畅的，您可以清楚地看到单元格在这些状态中移动，其中与联系人一样，单元格平滑过渡，蓝色褪色并出现正常文本颜色。

这里有很多信息，实际上通过写这篇文章我已经了解了很多关于发生了什么的事情，但是我仍然很困惑这是取消选择的问题还是我的方式有问题'已经设置了单元格，或者这可能是我对 setSelected 和 setHighlighted 的覆盖中的问题。感谢您的帮助，考虑到这里的内容量，我真的很感激。

# javascript - 无法弄清楚这个功能是如何工作的

> ID：12291137
> 
> 赞同：-1
> 
> 时间：2012-09-05T23:30:51.153
> 
> 标签：javascript, jquery

我正在使用 jQuery 创建颜色选择器的 codecademy.com 课程，用户可以使用它来选择 div 的背景和边框颜色。你可以在这里看到它应该是什么样子（在练习 4-3 中）。 [http://www.codecademy.com/courses/basic-jquery/3#!/exercises/2](http://www.codecademy.com/courses/basic-jquery/3#!/exercises/2) 基本上有一排彩色框，您可以单击以选择主 div 的不同属性的颜色。总共有三行（每行有很多彩色框）来选择我们可以设置样式的 div 的三个属性的颜色。

我的问题涉及 makeColorOption 函数。它为颜色参数添加了一个类“colorOption”，但是，我从来没有看到这个函数调用了一个颜色传递给它。我假设必须为数组中的每种颜色调用一次，但我看不到任何地方发生这种情况。

谁能解释我是否遗漏了什么？

```
 $('document').ready(function(){

   //make the color pickers
   var colors = ['red','green','blue','yellow','black','white'];

   function makeColorOption(color) {
       return $('<div/>')
                    .addClass("colorOption")
                    .html(color)
                    .css('background-color',color);
   }

   $.each(colors,function(i,v) {
       $('div.colorPicker').append(
           $('<div/>')
                    .addClass("colorOption")
                    .html(v)
                    .css('background-color',v)
        );
   });

    $('div.colorPicker').append($('<div/>').addClass('clearfix'));

    $('div.colorOption').click(function(){

        var $this = $(this);

        var target = $this.closest('div.colorPicker').data('styleTarget');
        switch(target) {
            case 'background-color':
                setBackgroundColor($('#toy'),$this.html());
                break;
            case 'text-color':
                setTextColor($('#toy'),$this.html());
                break;
            case 'border-color':
                setBorderColor($('#toy'),$this.html());
                break;
            default:
                alert('hi');
        }

    });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T23:49:29.407

你没有遗漏任何东西，这个`makeColorOption`功能没有被使用。颜色选择器是由`$.each(colors,function(i,v)`循环创建的，它的主体复制了什么`makeColorOption`。

您可以将该循环更改为：

```
 $.each(colors,function(i,v) {
       $('div.colorPicker').append(makeColorOption(v));
   }); 
```

这将是等效的。

# google-chrome - 您如何检查 Chrome 中的网络检查器？

> ID：12291138
> 
> 赞同：77
> 
> 时间：2012-09-05T23:30:52.163
> 
> 标签：google-chrome, google-chrome-devtools

根据谷歌的说法，这可以通过在 Chrome 中访问“chrome-devtools://devtools/devtools.html”来完成，但现在在 Chrome（或 Canary）的稳定版本中访问该页面，只显示 99% 的检查器剥离版本.

重申我的“标题”，这是指“检查”检查员。不只是检查一个普通的网页。

虽然我认为没有必要知道解决这个问题，但我正在检查检查员，所以我可以按照 Paul Irish 和这里的讨论来设计它：[https ://darcyclarke.me/articles/development/skin-your -铬检查器/](https://darcyclarke.me/articles/development/skin-your-chrome-inspector/)

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2012-09-05T23:34:11.870

按照这些简单的步骤！

1.  按`Command`+ `Option`+ `i`（在 Windows 上为`Ctrl`+ `Shift`+ `i`）打开 DevTools。

2.  确保开发人员工具未停靠在新窗口中。您可能必须从菜单中取消停靠：[![从菜单中取消停靠](../Images/7c3bd52a40bab420d675ecffa1bf8de1.png)](https://i.stack.imgur.com/xjByz.png)

3.  **在这个新窗口上*再次*按`Command`+ `Option`+ 。`i`**

**   这将在 DevTools 上打开 DevTools。* 

 **   如果需要，您可以重新停靠页面的 DevTools。

1.  如果还没有，请选择**Elements** — 它是检查器顶部的第一个图标。

* * *

通过了解[Chrome 开发人员工具：远程调试](https://developers.google.com/chrome-developer-tools/docs/remote-debugging)的工作原理，可以找到超出您问题范围的部分，但在理解您遇到问题的原因方面仍然有效。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-11-26T16:24:39.073

1.  打开 chrome://inspect
2.  在该页面上打开检查器（cmd + alt + i）
3.  滚动到页面底部，在该`Other`部分下单击检查链接

该`Other`部分中的 URL 应如下所示： chrome-devtools://devtools/devtools.html?doked=true&dockSide=bottom&toolbarColor=rgba(230,230,230,1...

编辑：他们喜欢 chrome:inspect 页面，因此您必须单击左侧的 Other 标题才能使其立即工作。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-20T20:25:48.690

我刚刚得到这个工作。关键是您必须在“远程调试”模式下启动 chrome。

在 OSX 上，打开终端窗口并执行以下命令：

```
/Applications/Google\ Chrome.app/Contents/MacOS/Google\ Chrome --remote-debugging-port=9222 
```

在窗户上，它

```
chrome.exe --remote-debugging-port=9222 
```

（可以在此处找到更好的 Windows 说明：[https](https://developers.google.com/chrome-developer-tools/docs/remote-debugging#remote) ://developers.google.com/chrome-developer-tools/docs/remote-debugging#remote ）

这将启动一个 chrome 实例，它将调试消息发送到端口 9222 上的本地网络服务器。

如果您访问该 Web 服务，它将使您能够使用检查器检查正在运行的任何 chrome 窗口。由于我们要检查inspector，我们需要先启动一个inspector窗口（如上使用快捷键；对于Mac它是Command+option+i。）

现在，继续导航到

```
http://localhost:9222 
```

它将为您提供要在调试器中显示的窗口列表。选择以“开发人员工具”开头的窗口，您将能够检查检查器的 css。

在下图中很难看到，但在左侧，我的 chrome 窗口指向远程调试器，突出显示了工具栏标签之一。在右侧，您会看到工具提示亮起，就像我们在调试网页一样。

![检查检查员](../Images/cf3c908e7cca50173e5b1e3ef5e075cd.png)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-05T23:38:52.760

几周前，有人在 stackoverflow 的“javscript”聊天室中指出了这一点。首先，非常重要*的是，确保检查器从浏览器窗口中脱离*。然后只需打开检查器窗口，然后检查该窗口即可。在 Windows 中`Ctrl``Shift``I`（编辑：我说过，`Ctrl``Shift``I`但这会调出控制台来*检查*控制台......你应该能够来回导航。）用于键盘快捷键。[（此处](https://developers.google.com/chrome-developer-tools/docs/overview)和[此处](https://developers.google.com/chrome-developer-tools/docs/shortcuts)的其他选项和操作系统的其他键盘组合。）只需执行两次即可。

编辑：好的，您可能对取消停靠窗口感到困惑。如果它已停靠，这就是您要单击的内容..![在此处输入图像描述](../Images/8bfce85344edfcb55dd6d98b217ce3db.png)

编辑二：我不太确定你为什么不能检查。JDavis 的回答与 Apple 计算机的 Google Docs 一致。如果您使用的是 Linux，它似乎与 Windows 相同。您应该在焦点位于检查器窗口上方时按下检查器组合键。*

# sql-server-2008-r2 - 使用更新语句连接多行

> ID：12291139
> 
> 赞同：0
> 
> 时间：2012-09-05T23:31:04.927
> 
> 标签：sql-server-2008-r2, concatenation

我有一个临时表变量，我需要用类似逗号分隔的字符串来更新它。

```
declare @clients table (clientid int, hobbylist char(1000))
declare @hobbies table (clientid int, hobbynumber smallint)

insert into @clients values (3, '')
insert into @clients values (5, '')
insert into @clients values (12, '')

insert into @hobbies values (3, 4)
insert into @hobbies values (3, 5)
insert into @hobbies values (3, 7)
insert into @hobbies values (12, 3)
insert into @hobbies values (12, 7) 
```

所以@clients 包含：

```
clientid     hobbylist
---------------------------
3
5
12 
```

@hobbies 包含：

```
clientid     hobbylist
---------------------------
3            4
3            5
3            7
12           3
12           7 
```

我需要更新@clients 表，使其包含：

```
clientid     hobbylist
---------------------------
3            4;;5;;7
5
12           3;;7 
```

我发现最接近的是： [如何连接多行？](https://stackoverflow.com/questions/3121079/how-to-concatenate-multiple-rows) 但我不明白他是如何看到标记为正确答案的内容时得到“一、二、三”的。

我正在使用 SQL Server 2008 R2 64。我尝试使用游标，但速度很慢（并且在这个 sp 中会有很多这种类型的东西）。

最有效的方法是什么？

编辑：

根据 njk 的建议，我尝试了这个：

```
update c
set hobbylist=Stuff((
            Select  ';;' + cast(hobbynumber as char)
            From    @hobbies h
            Where   h.clientid = c.clientid
            For             XML Path('')
    ), 1, 1, '')
from @clients c 
```

它没有给我一个错误，但是结果太古怪了，我找不到在这里展示它的好方法。

例如，客户 3 的爱好列表如下所示：

```
;4                             ;;5                             ;;7 
```

几乎可以工作。不知道这些空间是从哪里来的。

编辑 2。

呃。我正在使用演员表。我需要修剪东西。该解决方案适用于我的服务器。我要看看我是否也能让 ClearLogic 正常工作，所以我可以将其标记为正确答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T00:08:22.653

干得好

```
 ;WITH CTE AS 
         (SELECT DISTINCT  clientid,hobbylist= STUFF((SELECT ';'+ LTRIM(STR(hobbynumber))
          FROM @hobbies yt
           WHERE yt.clientid = sc.clientid            
         FOR XML PATH(''), TYPE).value('.','VARCHAR(max)'), 1, 1, '')
         FROM @hobbies AS sc 
         )
         UPDATE a
         SET a.hobbylist=b.hobbylist 
         FROM @clients AS a
         INNER JOIN CTE AS b
         ON a.clientid = b.clientid 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T04:49:58.747

试试这个>

```
update c SET c.hobbylist = e.list  from @clients c inner join 
(select clientid,STUFF((select ';;'+cast(hobbynumber as varchar(10))from @hobbies h where h.clientid = c.clientid for xml path('')),1,2,'') as list
from @hobbies c
group by clientid) e
on c.clientid = e.clientid 

select * from @clients 
```

# apache - Apache mod_rewrite 删除空查询字符串参数？

> ID：12291141
> 
> 赞同：1
> 
> 时间：2012-09-05T23:31:34.503
> 
> 标签：apache, .htaccess, mod-rewrite, query-string

是否可以使用 Apache 的 mod_rewrite 从 URL 中删除空查询字符串参数？

一个简单的 PHP 脚本有一个 HTML 表单，它通过 GET 提交给自己。HTML 表单有许多输入字段，当通过 GET 提交时，生成的 URL 最终可能会非常长，例如......
`http://www.domain.org/script.php?var1=&var2=&var3=foo&var4= ... &var18=bar`

此 PHP 脚本仅处理长度大于 0 的查询字符串参数。空的查询字符串参数将被忽略。

有没有人知道可以清除查询字符串中的空变量以便 URL 变为的方法？
`http://www.domain.org/script.php?var3=foo&var18=bar`

我意识到我可以在我的 PHP 脚本中通过处理 GET 数组并基于带有值的 GET 数组元素构建一个新的查询字符串来执行此操作，然后执行 HTTP 标头重定向。但这听起来很垃圾。

有没有更好的方法从 URL 中删除空查询字符串参数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T23:38:31.807

这是可能的，但**非常不明智**。**空（null）对于任何变量来说都是完全合法的值**，你如何让处理器知道你想将一些变量设置为空/null？

# ruby-on-rails - will_paginate 默认显示最后一页（保持时间顺序）

> ID：12291143
> 
> 赞同：4
> 
> 时间：2012-09-05T23:31:41.590
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.1, will-paginate

我正在构建一个索引页面，我需要在其中显示具有日期的结果，按时间顺序排列（从最早的日期到最新的日期），但默认情况下我需要始终显示最后一页。

我不能对日期使用 DESC 顺序，因为它会破坏我需要这个 =(.

**TL;DR：我需要显示一个分页日志列表，按日期升序排序，但从最后一页开始。will_paginate 可以做到这一点吗？谢谢！**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T23:40:01.960

您可以构建查询，在第一遍获取总页数，然后在下一遍获取最后一页。

```
query = Log.some_scope
total_pages = query.paginate(:page => 1).total_pages
@logs = query.paginate(:page => total_pages) 
```

您也可以尝试使用[Kaminari](https://github.com/amatsuda/kaminari) gem 来代替 will_paginate，这样会更舒服一些。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T13:20:46.793

这是我最终得到的解决方案：

```
if params[:page]
    @collection = @q.result(distinct: true).paginate(:page => params[:page], :per_page => 30)
else
    last_page = @q.result(distinct: true).paginate(:page => params[:page], :per_page => 30).total_pages
    @collection = @q.result(distinct: true).paginate(:page => last_page, :per_page => 30)
end 
```

这并不花哨，它需要一些重构，也许可以使用 memoization 来避免调用该`paginate`方法两次，但是嘿它有效。如果您尝试直接访问一个页面，它会照常呈现，但如果您不指定页面，则默认情况下会将您带到最后一页。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-02T11:17:42.913

试试这个代码：

```
if params[:page]
    @collection = @q.result(distinct: true).paginate(:page => params[:page], :per_page => 30)
session[:lastpage] = params[:page]
else
    @collection = @q.result(distinct: true).paginate(:page => session[:lastpage] = params[:page], :per_page => 30)
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-10T02:22:33.720

```
if params[:page]
    @collection = ordered_query_results.paginate(page: params[:page], per_page: PER_PAGE)
else
    total_results = ordered_query_results.count
    last_page = total_results / PER_PAGE + (total_results % PER_PAGE == 0 ? 0 : 1)
    @collection = ordered_query_results.paginate(page: last_page, per_page: PER_PAGE)
end 
```

# c++ - 将 double 转换为 LSBF（小尾数）十六进制字符串

> ID：12291149
> 
> 赞同：1
> 
> 时间：2012-09-05T23:32:09.077
> 
> 标签：c++, visual-studio-2010, type-conversion

我正在尝试将 double 转换为 little-Endian 十六进制字符串或直接转换为特定类型的 long（见下文）。

以前，我将预定义的 little-Endian 十六进制字符串转换为 long，如下所示。

`string hcommand = "01AC"; char * p; long n = strtol(hcommand.c_str(), &p, 16);` 这按预期工作。

现在我正在尝试将 double 转换为 little-Endian（最低有效字节优先）形式的十六进制字符串（然后替换上面代码中的 hcommand）或直接从 double 转换为与上面看到的相同类型的 long。

我试过了，它的处理方式与上面不同。

`double myDouble = 44033; long hcommand = (long)_byteswap_ulong((int)myDouble);`

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T23:51:08.030

我发现将 _byteswap_ulong 转换为 _byteswap_ushort 后结果是相同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T23:51:18.763

我怀疑问题在于您只查看了四个字节中的两个。

在您的第一个示例中，您得到值 0xAC01 (428)。

在第二个示例中，您将`myDouble`0x01AC0000 转换为 0x0000AC01 (28049408)。

如果您只想要一个单词，请使用`_byteswap_ushort((unsigned short)myDouble)`.

# .htaccess - 网址中 SEO 控制器名称的 Codeigniter htaccess 和路由

> ID：12291157
> 
> 赞同：0
> 
> 时间：2012-09-05T23:33:23.897
> 
> 标签：.htaccess, codeigniter, routes, rewrite, codeigniter-2

我有一个名为：main_controller 的控制器，我的应用程序中的所有链接都使用 url 引用它，例如：`/main_controller/...`

现在我想在所有这些中插入一些**SEO**并将 url 更改为更 seo 的`/seo_name_for_controller/...`

**我希望我可以使用htaccess**来执行此操作，而不是对所有可能导致错误的事件进行完整的手动搜索和替换，例如：

```
RewriteRule ^/main_controller/(.*)$ /seo_name_for_controller/$1 [L,R=301] 
```

然后使用**routes.php**完成该过程，例如：

```
$route['seo_name_for_controller/(:any)'] = "main_controller/$1"; 
```

有可能还是会导致无限循环？有人有这方面的代码示例吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T23:50:57.110

它不应该引起问题。CI Route 在技术上不是重定向，它只是使用 URI 模式来调用特定的控制器。这应该有效。

你有没有试过看看会发生什么？你的问题建议不要审判。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T22:17:18.160

感谢您的回复，我听从了您的建议，并尝试通过以下方式确认：

**访问：**

```
RewriteRule ^main_controller/(.*)$ seo_controller/$1 [L,R=301] 
```

**路由.php**

```
$route['seo_controller/(:any)'] = "main_controller/$1"; 
```

**页面内网址是：**

```
http://local.com/main_controller 
```

单击它时它可以工作，并且在重定向+路由后它以：

```
http://local.com/seo_controller 
```

但我很遗憾它不是“完全隐形”。

因为它在重定向之前首先使用地址栏中的“普通 url”（/main_controller/）。它最终工作并执行 /main_controller/ 动作，而最后一个 url 是 /seo_controller/。

但这并不令人满意，我会有一个完全看不见的重定向。所以我想我正在手动搜索和替换的路上；）然后只使用路由。

# android - 如何将类的上下文获取到内部静态类中

> ID：12291162
> 
> 赞同：2
> 
> 时间：2012-09-05T23:34:09.807
> 
> 标签：android, static, google-cloud-messaging, inner-classes, android-context

我正在尝试获取`FragmentStackSupport`Activity 的上下文并在内部静态类中使用它。

我已经`FragmentStackSupport`在内部静态类中实例化，我正在使用`getBaseContext()`它来获取`FragmentStackSupport`.

将外部类上下文放入内部`GCMRegistar.checkDevice(thisContext)`不会在代码中产生错误，但会使应用程序崩溃。

我不能使用 'this' 或者`FragmentStackSupport.this` **因为内部类是 static**。如果课程是公开的，“这个”会起作用......

如何为`checkDevice()`方法获取正确的上下文？

```
public class FragmentStackSupport extends SherlockFragmentActivity  {
    int mStackLevel = 1;
//... 

 public static class CountingFragment extends SherlockFragment  implements OnClickListener{
   //...
FragmentStackSupport FSSContext;

        static CountingFragment newInstance(int num) {

            CountingFragment f = new CountingFragment();
            return f;

        }

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

        }

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {

FSSContext= new FragmentStackSupport();
            FSSContext.getBaseContext();
            Context thisContext;
//          
            // Make sure the device has the proper dependencies.
        GCMRegistrar.checkDevice(thisContext);

}
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T23:39:52.557

如果我理解正确并且您正在尝试获取 FSSContext，这应该可以

```
GCMRegistrar.checkDevice(CountingFragment.this.FSSContext); 
```

您可以使用 OuterClassName.this 访问匿名内部类的周围类（而简单的“this”指的是内部类）

**编辑：**抱歉，我错过了这个问题的要点。根据 checkDevice 的文档，它旨在获取应用程序上下文 - 在您的崩溃示例中，您正在向它传递一个 Activity 上下文（它可能与相关的 Activity 一起被销毁）。请改用 Context.getApplicationContext()。另请注意，如果设备不支持 GCM，则 checkDevice 会引发 UnsupportedOperationException，因此该调用应位于 try/catch 块中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T02:12:22.500

我找到了答案，但是我不确定它为什么会起作用。但是因为我使用的是sherlock action bar，所以不得不使用那个库的具体方法

```
GCMRegistrar.checkDevice(getSherlockActivity().getApplicationContext()); 
```

# android - requestPurchase RobotMedia 没有做任何事情

> ID：12291165
> 
> 赞同：3
> 
> 时间：2012-09-05T23:35:23.853
> 
> 标签：android, in-app-billing

大家好 :) 我正在尝试在我的应用程序中实现应用内计费，并在 GitHub 中观看 RobotMedia 的 README 我已经这样做了：

我正在尝试这个：

```
aba = new AbstractBillingActivity() {

        @Override
        public String getPublicKey() {
            // TODO Auto-generated method stub
            return null;
        }

        @Override
        public byte[] getObfuscationSalt() {
            // TODO Auto-generated method stub
            return null;
        }

        @Override
        public void onSubscriptionChecked(boolean supported) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onRequestPurchaseResponse(String itemId, ResponseCode response) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onPurchaseStateChanged(String itemId, PurchaseState state) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onBillingChecked(boolean supported) {
            // TODO Auto-generated method stub

        }
    }; 
```

当我尝试这样做时，字节：

```
aba.checkBillingSupported(); 
```

它给了我关于变量“aba”的**NullPointerException**

***编辑***

我已经这样做了：

```
public class Index extends AbstractBillingActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_index);

        checkBillingSupported();

        Button buy = (Button) findViewById(R.id.compra);
        buy.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

                requestPurchase("android.test.purchased");

            }
        });

    }

    @Override
    public byte[] getObfuscationSalt() {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public String getPublicKey() {
        // TODO Auto-generated method stub
        return null;
    }

    @Override
    public void onBillingChecked(boolean supported) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onSubscriptionChecked(boolean supported) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onPurchaseStateChanged(String itemId, PurchaseState state) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onRequestPurchaseResponse(String itemId, ResponseCode response) {
        // TODO Auto-generated method stub

    }

} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-06T08:01:20.590

如果您`BillingController`直接使用，则还需要实现[`IBillingObserver`](https://github.com/robotmedia/AndroidBillingLibrary/blob/master/AndroidBillingLibrary/src/net/robotmedia/billing/IBillingObserver.java)，`onPurchaseIntent`尤其是。

您可能想从查看[DungeonsRedux](https://github.com/robotmedia/AndroidBillingLibrary/tree/master/DungeonsRedux)（示例代码）开始，并可能[`AbstractBillingActivity`](https://github.com/robotmedia/AndroidBillingLibrary/blob/master/AndroidBillingLibrary/src/net/robotmedia/billing/helper/AbstractBillingActivity.java)首先使用来熟悉 IAB。

关于您的最新编辑，除非您真的是认真的，否则您不应该使用构造函数创建活动。看起来你得到一个空指针异常，因为你的变量是空的，它可能与`new`用于创建活动有关。

我强烈建议您从[IAB API 指南](http://developer.android.com/guide/google/play/billing/billing_integrate.html)开始，一旦您对 IAB 的核心概念感到满意，然后再继续学习该库。

# c - 带有检查未定义引用错误的 Eclipse C 单元测试

> ID：12291166
> 
> 赞同：3
> 
> 时间：2012-09-05T23:35:24.817
> 
> 标签：c, eclipse, unit-testing, linker-errors, check-framework

我对C非常陌生，遇到以下问题：我制作了一个非常小的程序filecopy.c，我想用Check对其进行单元测试，但是当我进行单元测试并构建它时，我得到大量未定义的参考错误，好像 Eclipse 找不到库 libcheck（我通过在项目 - 属性 - C++ 构建 - 设置 - 库中添加“检查”来指定）。

这是我文件中的相关代码：

文件复制.c

```
#include <stdio.h>

int fileCopy()
{
  int c;

  while ((c = getchar()) != EOF) {
    putchar(c);
  }
  return 0;
} 
```

文件复制.h

```
int fileCopy(); 
```

文件copyTest.c

```
#include <stdio.h>
#include <stdlib.h>
#include <check.h>
#include "filecopy.h"

START_TEST (test_fileCopy)
{
int i;
for (i = 0; i < 10; ++i) {
    putchar(i);
}
fileCopy();
//Fail if the last char put by fileCopy is not 9
fail_unless(getchar()==9);
}
END_TEST

Suite *
fileCopy_suite (void)
{
  Suite *s = suite_create ("fileCopy");

  /* Core test case */
  TCase *tc_core = tcase_create ("Core");
  tcase_add_test (tc_core, test_fileCopy);
  suite_add_tcase (s, tc_core);

  return s;
}

 int
 main (void)
 {
 int number_failed;
  Suite *s = fileCopy_suite ();
  SRunner *sr = srunner_create (s);
  srunner_run_all (sr, CK_NORMAL);
  number_failed = srunner_ntests_failed (sr);
  srunner_free (sr);
  return (number_failed == 0) ? EXIT_SUCCESS : EXIT_FAILURE;
 } 
```

测试代码完全符合[检查教程](http://check.sourceforge.net/doc/check_html/check_3.html#SEC4)的要求，并且文件复制程序可以自行运行。这是 Eclipse 使用此设置生成的 Makefile：

```
################################################################################
# Automatically-generated file. Do not edit!
################################################################################

-include ../makefile.init

RM := rm -rf

# All of the sources participating in the build are defined here
-include sources.mk
-include subdir.mk
-include objects.mk

ifneq ($(MAKECMDGOALS),clean)
ifneq ($(strip $(C_DEPS)),)
-include $(C_DEPS)
endif
endif

-include ../makefile.defs

# Add inputs and outputs from these tool invocations to the build variables 

# All Target
all: Homework1

# Tool invocations
Homework1: $(OBJS) $(USER_OBJS)
    @echo 'Building target: $@'
    @echo 'Invoking: GCC C Linker'
    gcc -o "Homework1" $(OBJS) $(USER_OBJS) $(LIBS)
    @echo 'Finished building target: $@'
    @echo ' '

# Other Targets
clean:
    -$(RM) $(OBJS)$(C_DEPS)$(EXECUTABLES) Homework1
    -@echo ' '

.PHONY: all clean dependents
.SECONDARY:

-include ../makefile.targets 
```

我告诉 Eclipse 构建 filecopy.c 文件，然后构建 filecopyTest.c 文件，它为我在 filecopyTest.c 内部调用的每个函数提供了一个“对 [function_name] 的未定义引用”（包括没有意义的 fileCopy，因为它包括该函数的标头，甚至不必导入库）。库文件实际上存在于 /usr/lib 中并正确安装（当手动运行 gcc 时，它编译得很好并且似乎可以运行（尽管可能有一些错误；很难说））。

如果您对在 Eclipse 中使用 C 进行单元测试有任何经验，请提供帮助。我非常喜欢 Eclipse 并希望将它用于我的新 C 项目，但我也喜欢测试优先编程，并且不打算在没有测试的情况下为 C 开发项目。我在使用 CUnit 时遇到了同样的问题，并认为 Check 可能会更好，但显然我做错了，作为一个 COMPLETE C 菜鸟，我不明白。我搜索了互联网，发现了多篇关于类似情况的“已解决”文章，但在 Eclipse 上实施他们的解决方案并没有帮助我。我不明白 Eclipse 对 make 文件做了什么，甚至完全不了解链接是什么以及它是如何失败的，但我只想在 Eclipse 中通过单元测试对 C 进行编程，经过数小时尝试解决这个问题，它似乎是一个无法完成的任务。如果您需要更多信息，请告诉我；我使用 Eclipse Indigo 作为参考，它使用 CDT 8.0.2。

提前感谢您为任何人提供的任何帮助。了解单元测试及其有用性，然后了解 C 及其性能，然后得知我无法将两者放在我最喜欢的 IDE 中，这真是令人沮丧。

# openstack - nova 客户端镜像创建

> ID：12291168
> 
> 赞同：0
> 
> 时间：2012-09-05T23:35:36.923
> 
> 标签：openstack, openstack-nova

有谁知道 nova 在创建快照时将运行实例的临时映像放在哪里？由于某种原因，我一目了然的快照图像保持在 SAVING 模式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T03:53:20.240

你运行的是什么版本的nova？什么管理程序？

假设 essex 带有 libvirt（大多数包中的默认值），然后它们被保存到 /tmp，它可以被 TMPDIR 环境变量覆盖。

如果您使用 folsom，但仍使用 libvirt，则使用 libvirt_snapshot_directory 标志的值。默认值是名为“snapshots”的实例路径的子目录。

这些快照可能非常大，这就是为什么将它们放在磁盘上的位置很重要。

# asp.net - 智能感知和强类型数据控件 - 不再有错别字...？

> ID：12291176
> 
> 赞同：4
> 
> 时间：2012-09-05T23:37:17.620
> 
> 标签：asp.net, gridview, webforms, visual-studio-2012

我正在阅读 ASP.NET 4.5 Web 窗体功能以了解新功能。我最近使用 GridView尝试了**强类型数据控件功能。**但是，据我所知，您只能在使用**asp:TemplateField** ..... 时使用强类型的好处，如下所示：

```
 <asp:TemplateField HeaderText="Name" >
                <ItemTemplate>
                    <%# Item.Name.ToString() %>
                </ItemTemplate>
            </asp:TemplateField> 
```

这是真的吗？您不能在 GridView 中对 asp:BoundField、asp:DynamicField 或任何其他可能的列控件使用强类型？
例如，当我放置一个标准的 asp:BoundField 时，它没有为我提供任何智能感知自动完成功能。我只能为 DataField 属性输入一个字符串。像这样：

```
<asp:BoundField DataField="JyooobTitle" HeaderText="Job Title" /> 
```

哎呀！看起来我在那里拼错了“JobTitle”，*但编译器没有抓住它*。因此，为了从强类型中受益，我似乎被迫使用 TemplateField 选项....对于每一列，无论我是否需要它！

此外，如果你想在你的 TemplateField 上放置一个 SortExpression 属性......你必须希望你也能正确地拼写那个，因为看起来你也没有得到强类型。希望我只是遗漏了一些明显的东西，因为这是一个很棒的新功能，但它肯定看起来**只是实现了一半**。

任何人都可以验证这是否属实......或者我是否遗漏了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T02:38:30.637

作为一个相对较新的 ASP.NET 开发人员，我可能没有洞察力或经验来知道这个问题的完整答案，但我会尽我所能理解这个问题。我也使用过 ASP.net 4.5“强类型模型绑定”。当我第一次通过 Scott Hanselman 的精彩[视频](http://www.asp.net/vnext/overview/aspnet-web-forms/aspnet-45-web-forms-strong-typed-data-controls)发现它时，它让我大吃一惊。您提到的问题绝对是该功能的不幸限制。但是，我认为我们应该感谢我们得到的帮助。

考虑您在`.aspx`页面中的其他工作。虽然 Intellisense 确实提供了一些填充控件属性的帮助（例如，true/false 下拉列表`Visible=`），但总体而言，声明性标记的验证非常少。这是它非常自然的一部分。它不是“编程”文档，而是语义文档。由于这个事实，它可以在不重新编译项目的情况下进行更改，这有时非常方便。

ASP.NET 确实提供了一种通过内联代码段（<%# %> 等）将实际编译代码放置在 aspx 标记中的方法。强类型绑定利用了这些。它们就像进入编程世界的后门，为您提供完整的 Intellisense 体验。

我希望有一天我们可能会在`DataField`属性中看到强类型，但我不会过早地寻找它。现在，我将`ItemType`随时利用它的便利并为之欢欣鼓舞。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-15T09:20:23.123

这是我解决排序表达式绑定问题的方法。

我没有设置`SortExpression`为真实的属性名称，而是将其设置为列的序号位置。

```
<Columns>
    <asp:TemplateField HeaderText="Name" SortExpression="1" >
        <ItemTemplate>
            <%# Item.Name %>
        </ItemTemplate>
    </asp:TemplateField>
    <asp:TemplateField HeaderText="Job Title" SortExpression="2" >
        <ItemTemplate>
            <%# Item.JobTitle %>
        </ItemTemplate>
    </asp:TemplateField>
</Columns> 
```

然后，将处理程序附加到 gridview 的`Sorting`事件。

```
<asp:GridView runat="server"
              OnSorting="Sorting"
              ... 
```

事件参数之一是您之前定义的排序表达式（即`"1"`or `"2"`）。您可以使用此值以编程方式将排序表达式重新绑定到实际属性名称。

**注意**：遵循这种方法意味着放弃升序/降序排序之间的自动切换。不过，重新实现它并不是特别困难。

**注意**：我使用基于反射的方法在执行时确定属性名称。

```
protected void Sorting(object sender, GridViewSortEventArgs e)
{
    int columnPosition;
    if (!int.TryParse(e.SortExpression, out columnPosition))
    {
        return;
    }

    switch (columnPosition)
    {
        case 1:
            e.SortExpression = Reflector.GetPropertyName<Employee>(o => o.Name);
            break;

        case 2:
            e.SortExpression = Reflector.GetPropertyName<Employee>(o => o.JobTitle);
            break;
    }

    var grid = (GridView)sender;
    if (grid.SortExpression == e.SortExpression)
    {
        if (grid.SortDirection == SortDirection.Ascending)
        {
            e.SortDirection = SortDirection.Descending;
        }
    }
} 
```

最后，这是我`Reflector`在上面示例中使用的类的代码。

```
/// <summary>Utility class. Provides static reflection-based utility methods.</summary>
public static class Reflector
{
    #region Public Methods and Operators

    /// <summary>Gets the name of the property that is accessed by the given expression. Usage: <c>Reflector.GetPropertyName&lt;MyClass&gt;(obj =&gt; obj.MyProperty);</c></summary>
    /// <param name="selectorExpression">The expression that selects the property of which the name should be returned.</param>
    /// <typeparam name="T">The type that defines the property.</typeparam>
    /// <returns>The name of the property.</returns>
    public static string GetPropertyName<T>(Expression<Func<T, object>> selectorExpression) where T : class
    {
        MemberExpression memberExpression;
        var unaryExpression = selectorExpression.Body as UnaryExpression;
        if (unaryExpression != null)
        {
            memberExpression = unaryExpression.Operand as MemberExpression;
        }
        else
        {
            memberExpression = selectorExpression.Body as MemberExpression;
        }

        if (memberExpression == null)
        {
            return null;
        }

        return memberExpression.Member.Name;
    }

    #endregion
} 
```

# email - 在 Symfony2 中没有请求对象的电子邮件中资产的绝对路径

> ID：12291178
> 
> 赞同：3
> 
> 时间：2012-09-05T23:38:17.953
> 
> 标签：email, symfony, twig, assets

我正在使用由 cron 作业定期触发的 Symfony2 命令发送电子邮件。在电子邮件的页脚中，我想显示公司的徽标。我知道在电子邮件的情况下，我必须对图像使用绝对路径，通常我会这样做：

```
{% set abs_url = app.request.scheme ~'://' ~ app.request.httpHost %}
<img src="{{ abs_url ~ asset('bundles/common/images/logo_mialarma.png') }}"> 
```

但是，当电子邮件的树枝模板被一个命令调用，而该命令又被一个 cron 作业调用时，就没有这样的请求对象。

在这种情况下如何创建资产的绝对路径？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T06:32:19.943

创建一个配置参数以将您的应用程序的域设置为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-12-13T15:49:17.510

如果有人使用较新的版本，请参见此处：

[https://symfony.com/doc/current/console/request_context.html](https://symfony.com/doc/current/console/request_context.html)

您可以设置上下文并使用全局配置。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-16T08:28:58.677

**在树枝文件中试试这个：**

`{{ 'http://' ~ app.request.host }}`

# perl - 如何在 Perl 中获取文件的确切完整路径

> ID：12291180
> 
> 赞同：26
> 
> 时间：2012-09-05T23:38:28.727
> 
> 标签：perl

我只有一个文件名，`myfile.txt`我不确定它保存在哪里。如何获得存储文件的确切完整路径？

我努力了

```
$string=`ls /abc/def/*/*/*/*/myfile.txt`; 
```

结果：完整路径是`/abc/def/ghi/jkl/mno/pqr/myfile.txt`

`shell command`我可以通过使用上面的 Perl 脚本运行来获得完整路径。然而，这需要很长时间才能返回路径。这是一种使用 Perl 查找文件完整路径的方法吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-05T23:48:07.863

好吧，如果`myfile.txt`实际上是该文件的相对路径，则有一个核心模块子 - [File::Spec->rel2abs()](http://perldoc.perl.org/File/Spec.html#rel2abs%28%29)：

```
 use File::Spec;
  ...
  my $rel_path = 'myfile.txt';
  my $abs_path = File::Spec->rel2abs( $rel_path ) ; 
```

...如果您确实需要在目录中搜索该文件，则可以使用 File::Find... 但我可能会使用 shell`find / -name myfile.txt -print`命令。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-09-05T23:59:42.677

您应该使用 Perl 模块[Cwd](http://perldoc.perl.org/Cwd.html)来完成此操作。该链接还有一个示例，如下所示。

```
#!/usr/bin/perl 
use Cwd;
my $dir = getcwd;
use Cwd 'abs_path';
my $abs_path = abs_path($file); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-01-24T09:36:12.017

我们可以从系统上的任何地方查看，但在这种情况下，我们是从“/abc/def”文件夹中查看。

```
$start_path = "/abc/def/";
@files = <$start_path*/myfile.txt>

foreach $file(@files) {
    print $file; # Prints the full path of the file.
} 
```

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2019-01-14T05:53:08.207

在Linux中使用`pwd`而不是`cd`获取当前目录的路径没有功能，

```
$path='cd';
$path =~ tr /\\/\//;
chomp($path);
print "$path"; 
```

# c# - 如何检查文件是否已经打开？

> ID：12291182
> 
> 赞同：1
> 
> 时间：2012-09-05T23:38:37.890
> 
> 标签：c#, file, process

```
private void btnViewErrorLogFile_Click(object sender, EventArgs e)
{
    errorLogFileProcess = Process.Start(AppVars.ErrorLogFilePath);
} 
```

以上在记事本中打开了一个文本文件。它包含我的应用程序的错误日志。

我不想让用户打开这个文件的倍数。所以我不想让他/她再次单击该按钮并打开同一文件的另一个窗口。

如何检查此文件是否已打开？注意：我不想关闭一个（或所有）notepad.exe 进程，因为用户可能会为我的应用程序文件（打开文件时使用 notepad.exe）以外的其他东西打开一个记事本进程。

再说一遍，我该如何检查我打开的进程是否已经打开？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T00:03:05.140

刚刚重新阅读了您的问题。

如果您想强制用户在允许他们再次打开之前关闭记事本的活动实例（您启动的），请保留该`errorLogFileProcess`实例，然后在允许该命令之前重新检查它。

```
Process errorLogFileProcess;

private void btnViewErrorLogFile_Click(object sender, EventArgs e)
{
    if (errorLogFileProcess != null)
    {
        // Process was launched previously; check if exited.
        if (!errorLogFileProcess.HasExited)
        {
            throw new Exception("Can't launch until first one closed.");
        }
    }

    errorLogFileProcess = Process.Start(AppVars.ErrorLogFilePath);
} 
```

也可以使用`errorLogFileProcess.HasExited`状态来禁用按钮，以便不引发 Click 事件。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-05T23:57:07.110

在此处查看如何检查文件是否已打开（通过使用 try、catch 块）： [检查文件是否已打开](https://stackoverflow.com/questions/2987559/check-if-a-file-is-open)

# css - 如何为屏幕阅读器标记晦涩的数据表布局？

> ID：12291183
> 
> 赞同：6
> 
> 时间：2012-09-05T23:38:47.157
> 
> 标签：css, html, accessibility, screen-readers

我需要标记以下设计，我**无法**修改其布局：

![复杂的表格布局，每个项目的数据点垂直排列](../Images/e547eba6ecf9ca66f39315741859bc3c.png) *请忽略填充文本，我知道这没有多大意义。*

我选择了一张桌子，因为它感觉 95% 像桌子。但是当涉及到每个项目下方数据点布局的适当语义标记时，我感到很困惑。每个点都是不同的，即这不是自由格式的文本，并且每次都放置在相同的相对位置 -*但它打破了传统的数据表布局*，因为没有为这些点呈现分配的标题或标签。我有兴趣标记这样的布局，以便它既是：

1.  **语义**
2.  **适用于现代屏幕阅读器**（我知道一些较旧的屏幕阅读器有各种错误，但很像较旧的浏览器，我认为限制已弃用软件的更好/更新技术是不公平的）。

这几年我遇到过无数次这个问题，最后破解并求助于社区。我试过了：

1.  为每个项目使用单独`tbody`的 s ，并在其中使用第二行作为额外的数据点，但是当我无法弄清楚如何将“子行”与项目相关联时放弃了。
2.  水平放置包含所有各种数据点和标题的表格，然后使用 CSS 定位。不幸的是，与我之前关于已弃用软件的声明相反，我需要支持 IE 7，但这种技术失败了。
3.  我曾考虑使用隐藏行`th`并`rowspans`创建更复杂的表格布局并尝试使用[ARIA](http://www.w3.org/TR/wai-aria/)来获得所需的屏幕阅读结果，但均无济于事。
4.  我也考虑过使用嵌套表，但这感觉非常非常错误。

任何帮助表示赞赏。

**注意：**渲染它以显示跨浏览器并不是那么难——我对如何使这种语义和可访问性感兴趣。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T10:50:16.877

是的，去一张桌子！我花了几次迭代才得到一个包含符合[Webrichtlijnen](http://www.webrichtlijnen.overheid.nl/english/guidelines)表的网站，但它最终通过了所有标准。您需要注意以下几点：

*   包括一个`summary`属性以提供您的表格的简短[摘要](http://versie1.webrichtlijnen.nl/english/manual/development/production/tables/relational-information/accessibility/#r-pd-11-7)。您可以添加`<caption/>`，但这不是必需的，在某些情况下，表格上方的标题也可以。
*   **在你的和**你的第一个上使用[`scope`](http://versie1.webrichtlijnen.nl/english/manual/development/production/tables/relational-information/accessibility/#r-pd-11-4)属性（在大多数情况下，其他列将与行的第一个表格单元格的标签相关联）。`th` **`td`**
***   从删除按钮的文本版本开始。*   我会为删除按钮使用描述性标题。*   确保[`<abbr/>`](http://versie1.webrichtlijnen.nl/english/manual/development/production/descriptive-markup/writing-it/typesetting/#r-pd-3-6)在缩写月份上使用标签。**

 **该表的一个示例可能是：

```
<table summary="summary">
  <thead>
    <tr>
      <th scope="col">Course</th>
      <th scope="col">Column 2</th>
      <th scope="col">Column 3</th>
      <th scope="col">Actions</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td scope="row">
        <div class="title">Title</div>
        <div class="sub-title">Subtitle</div>
        <div class="period">Period</div>
      </td>
      <td class="number">1.45</td>
      <td class="number">$1,047</td>
      <td><a href="">Delete</a></td>
    </tr>
  <tbody>
</table> 
```

如果您选择在删除链接上使用 Ajax，请首先在不使用任何 Javascript 的情况下实现它（只需指向删除相应项目的 URL），然后向其中添加 Ajax 功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T00:06:56.383

从广义上讲，我将有一个包含 1 个标题行和 6 个数据行的表格，奇数数据行有 3 个单元格，偶数数据行有一个单元格跨越三列。

在偶数行单元格内，我将有一个`<h?>`“lorem 102”行的元素和一个详细点列表。在`<td>`偶数行单元格的元素上，我有一个`headers`属性指向上面行的第一个单元格，以提供从子行到项目的关联。

我也可以在元素上包含一个`<caption>`元素或一个`summary`属性`<table>`来描述结构。

更新：看到 Jasper de Vries 的回答后，我意识到我忽略了删除列。只需听从他的建议即可。**

# tfs - 重新生成已完成 TFS 合并的冲突

> ID：12291184
> 
> 赞同：0
> 
> 时间：2012-09-05T23:38:49.697
> 
> 标签：tfs, merge

我最近发现在解决从主干合并到我的团队分支时遇到的冲突时，我错误地使用了我的第三方 diff/merge 工具。据我所知，只有在合并工具中合并的文件受到影响。我知道如何使用 tf merge /force 重新合并，但如果可以避免的话，我不想重新合并每个文件，只是那些我必须手动合并的文件。在签入合并变更集很久之后，现在有什么方法可以获取此类文件的列表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T02:22:12.753

不幸的是，TFS 不会跟踪有关使用合并工具解析了哪些文件的任何数据。无论文件是手动合并还是自动合并，它仍然只是在 TFS 中记录为“合并”。

# bash - 使用 Bash 显示过去 X 天的 /var/log/messages？

> ID：12291185
> 
> 赞同：0
> 
> 时间：2012-09-05T23:38:50.883
> 
> 标签：bash, sorting, message

在 BASH 中我想不出一个好的方法来做到这一点，但我只想查看过去 30 天在 /var/log/messages* 中的条目。对我来说，问题是如何仅使用月份和日期来做到这一点。例如：

```
Sep 2 14:26:13 <SOME ENTRY>
Sep 4 14:26:13 <SOME ENTRY> 
Sep 9 14:26:13 <SOME ENTRY>
Sep 14 14:26:13 <SOME ENTRY>
etc.. 
```

有任何想法吗 ？帮助！哈哈

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T01:39:07.193

我认为这很*接近*。这将为您提供截至 8 月初的条目排序列表（最近的第一个）。根据你运行它的时间，它会给你大约 60 天而不是 30 天。平均而言，我想它会给你大约 45 天。另一个缺点是你需要调整`grep`管道末端的语句随着日期的推进。

```
sort -k1Mr -k2nr <file> | grep -E "Aug|Sep" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-05T19:15:53.000

有点晚了，但是……

```
 egrep "^$(date '+%b %e' -2d)" /var/log/messages 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T23:00:53.507

# -- 这行得通 --- 但很丑 --

# -- 仅打印每次循环迭代中符合日期的搜索（即最近 X num 天）

```
for (( i=0; i<=${MAXSEARCHDAYS}; i++)) ;do 
egrep $(date --date "now -${i} days" +%b) ${USBFOUND} | grep $(date --date "now -${i} days" +%e) >> ${TEMPFILE} 
done 
sort -k1,1M -k2,2n ${TEMPFILE} | uniq >> ${LOGFILE} 
```

# wcf - 无法调用 WCF 服务操作

> ID：12291189
> 
> 赞同：0
> 
> 时间：2012-09-05T23:39:30.620
> 
> 标签：wcf

行，

我设置了一个服务并生成了一个 wsdl，但是在尝试访问它时我得到了 404。

```
http://localhost:51902/TestService/DoWork 
```

我的wsdl：

```
<wsdl:definitions xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap12="http://schemas.xmlsoap.org/wsdl/soap12/" xmlns:tns="http://tempuri.org/" xmlns:wsa="http://schemas.xmlsoap.org/ws/2004/08/addressing" xmlns:wsp="http://schemas.xmlsoap.org/ws/2004/09/policy" xmlns:wsap="http://schemas.xmlsoap.org/ws/2004/08/addressing/policy" xmlns:wsaw="http://www.w3.org/2006/05/addressing/wsdl" xmlns:msc="http://schemas.microsoft.com/ws/2005/12/wsdl/contract" xmlns:wsa10="http://www.w3.org/2005/08/addressing" xmlns:wsx="http://schemas.xmlsoap.org/ws/2004/09/mex" xmlns:wsam="http://www.w3.org/2007/05/addressing/metadata" name="TestService" targetNamespace="http://tempuri.org/">
<wsdl:types>
<xsd:schema targetNamespace="http://tempuri.org/Imports">
<xsd:import schemaLocation="http://localhost:51902/TestService.svc?xsd=xsd0" namespace="http://tempuri.org/"/>
<xsd:import schemaLocation="http://localhost:51902/TestService.svc?xsd=xsd1" namespace="http://schemas.microsoft.com/2003/10/Serialization/"/>
</xsd:schema>
</wsdl:types>
<wsdl:message name="TestService_DoWork_InputMessage">
<wsdl:part name="parameters" element="tns:DoWork"/>
</wsdl:message>
<wsdl:message name="TestService_DoWork_OutputMessage">
<wsdl:part name="parameters" element="tns:DoWorkResponse"/>
</wsdl:message>
<wsdl:message name="TestService_SayHello_InputMessage">
<wsdl:part name="parameters" element="tns:SayHello"/>
</wsdl:message>
<wsdl:message name="TestService_SayHello_OutputMessage">
<wsdl:part name="parameters" element="tns:SayHelloResponse"/>
</wsdl:message>
<wsdl:portType name="TestService">
<wsdl:operation name="DoWork">
<wsdl:input wsaw:Action="http://tempuri.org/TestService/DoWork" message="tns:TestService_DoWork_InputMessage"/>
<wsdl:output wsaw:Action="http://tempuri.org/TestService/DoWorkResponse" message="tns:TestService_DoWork_OutputMessage"/>
</wsdl:operation>
<wsdl:operation name="SayHello">
<wsdl:input wsaw:Action="http://tempuri.org/TestService/SayHello" message="tns:TestService_SayHello_InputMessage"/>
<wsdl:output wsaw:Action="http://tempuri.org/TestService/SayHelloResponse" message="tns:TestService_SayHello_OutputMessage"/>
</wsdl:operation>
</wsdl:portType>
<wsdl:service name="TestService"/>
</wsdl:definitions> 
```

代码：

```
 /// <summary>
    /// This is a very basic service
    /// </summary>
    [ServiceContract]
    [AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
    public class TestService
    {
        [OperationContract]
        [WebGet(ResponseFormat = WebMessageFormat.Json)]
        public void DoWork()
        {
            return;
        }

        [OperationContract]
        [WebGet(ResponseFormat = WebMessageFormat.Json)]
        public string SayHello()
        {
            return "Hello";
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T23:42:40.303

没关系，这成功了：

```
http://localhost:51902/TestService.svc/DoWork 
```

# php - 试图从秒转换为日期

> ID：12291195
> 
> 赞同：9
> 
> 时间：2012-09-05T23:40:15.690
> 
> 标签：php

好的，所以我有一个表格的结果数组，我们有一个我们正在检索的开始和结束时间。开始/结束时间看起来像这样：

```
1345497551 
```

现在我正在尝试将其转换为实时，例如`1345497551`可能会变成`2012/05/09 17:23:12` 什么。我发现了一些东西，但似乎没有一个能正常工作。根据有人在此处对另一个问题所说的话，我尝试过的一种解决方案是

```
$createdate = date('H:i:s',$numberofsecs); 
```

`$numberofsecs`从数组中提取的时间在哪里。但这只会在`17:00:00`我们每次可用于测试时重复输出。

我怎样才能使这项工作正常进行？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-05T23:43:38.080

假设这是一个标准的 unix 时间戳字符串（自 1970 年 1 月 1 日午夜以来的秒数），那么您应该能够使用您提到的[日期，但只需修改格式字符串：](http://php.net/manual/en/function.date.php)

```
echo date('Y/m/d H:i:s', $numberofsecs); 
```

您提到的始终获得 17:00:00 的示例可能是因为您的测试用例都只是日期戳，编码为时间戳，并且与 GMT 有偏移。. .

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-06T08:06:01.320

我试过下面的代码：

```
$ts = 1345497551;
$date = new DateTime("@$ts");
echo $date->format('U = Y-m-d H:i:s'); 
```

输出：1345497551 = 2012-08-20 21:19:11

# mercurial - 在 Hg 中，如何忽略包含一些已跟踪目录和文件的目录？

> ID：12291198
> 
> 赞同：0
> 
> 时间：2012-09-05T23:41:08.000
> 
> 标签：mercurial

在 Hg 中，如果已经跟踪了某些子目录和包含的文件，如何递归地忽略目录？我想将它们保存在我的文件系统中，但不要对它们进行版本控制。我不想从文件系统中删除目录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T00:22:48.833

您可以使用递归调用`hg forget dir_name/`来停止跟踪目录。`dir_name`

更多信息`hg forget`：

```
hg forget [OPTION]... FILE...

forget the specified files on the next commit

    Mark the specified files so they will no longer be tracked after the next
    commit.

    This only removes files from the current branch, not from the entire
    project history, and it does not delete them from the working directory.

    To undo a forget before the next commit, see "hg add".

    Examples:

    - forget newly-added binary files:

        hg forget "set:added() and binary()"

    - forget files that would be excluded by .hgignore:

        hg forget "set:hgignore()"

    Returns 0 on success.

options:

 -I --include PATTERN [+] include names matching the given patterns
 -X --exclude PATTERN [+] exclude names matching the given patterns
    --mq                  operate on patch repository 
```

# powershell - 显示如何在 Windows PowerShell 3.0 中覆盖 TabExpansion2 的示例

> ID：12291199
> 
> 赞同：17
> 
> 时间：2012-09-05T23:41:21.640
> 
> 标签：powershell, windows-8, powershell-3.0, tabexpansion

有没有人展示如何在 Windows PowerShell 3.0 中覆盖 TabExpansion2 函数的示例？我知道如何覆盖旧的 TabExpansion 函数，但我想为 PowerShell ISE 中的智能感知提供项目列表。我查看了 TabExpansion2 的定义，很难理解如何在选项卡扩展过程中注入自己的代码。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-10T21:33:34.753

我认为这个例子应该给你一个很好的起点：[Windows Powershell Cookbook：TabExpansion2 的示例实现](https://books.google.com/books?id=78w1953mptUC&lpg=PA56&ots=z0ssmJ1_RJ&dq=powershell%20cookbook%20tabexpansion2&pg=PA56#v=onepage&q=powershell%20cookbook%20tabexpansion2&f=false)。示例代码显示您可以在默认调用之前和之后添加代码`[CommandCompletion]::CompleteInput`。

例如，您可以向`$options`名为 CustomArgumentCompleters 的哈希表添加一个条目，以获取命令参数的自定义完成。该条目应该是一个哈希表，其中键是参数名称（例如“ComputerName”或“Get-ChildItem:Filter”），值是可用于完成该参数的值数组。Powertheshell.com 也有一篇关于此的文章：[动态参数完成](http://www.powertheshell.com/dynamicargumentcompletion/)。您还可以使用 NativeArgumentCompleters 选项为本机可执行文件指定自定义完成（同样，键是命令名称，值是可能完成的数组）。

`CompleteInput`返回后，您可以将结果存储起来以供`$result`进一步分析。结果是[`CommandCompletion`](http://msdn.microsoft.com/en-us/library/system.management.automation.commandcompletion%28v=vs.85%29.aspx)该类的一个实例。如果默认补全没有找到任何匹配项，您可以将自己的[`CompletionResult`](http://msdn.microsoft.com/en-us/library/system.management.automation.completionresult.completionresult%28v=vs.85%29.aspx)条目添加到匹配项列表中：

```
$result.CompletionMatches.Add(
   (New-Object Management.Automation.CompletionResult "my completion string") ) 
```

不要忘记`$result`从函数中返回，以便实际完成。

最后，关于故障排除的说明：调用的代码`TabCompletion2`似乎压制了所有基于控制台的输出（不足为奇），所以如果您想自己编写调试消息，您可以尝试将它们写入单独的文本文件。例如，您可以将`End`函数更改`TabCopmletion2`为如下所示：

```
$result = [System.Management.Automation.CommandCompletion]::CompleteInput(
    $inputScript, $cursorColumn, $options)
$result | Get-Member | Add-Content "c:\TabCompletionLog.txt"
$result 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-12-06T04:06:12.523

这是一个被覆盖的示例`TabExpansion2`- [TabExpansion2.ps1](https://github.com/nightroman/FarNet/wiki/TabExpansion2) 和几个在实践中使用的配置文件，并为其完成了：

*   [Invoke-Build.ArgumentCompleters.ps1](https://github.com/nightroman/Invoke-Build/blob/master/Invoke-Build.ArgumentCompleters.ps1) [Invoke-Build](https://github.com/nightroman/Invoke-Build)的 参数完成器
*   [Mdbc.ArgumentCompleters.ps1 Mdbc](https://github.com/nightroman/Mdbc/blob/master/Scripts/Mdbc.ArgumentCompleters.ps1)[的](https://github.com/nightroman/Mdbc) 参数完成器
*   [ArgumentCompleters.ps1](https://github.com/nightroman/FarNet/blob/master/PowerShellFar/Bench/ArgumentCompleters.ps1) 参数、输入和结果完成器

兴趣点：

*   *TabExpansion2.ps1*在加载时做最少的工作。当真正完成时执行一次潜在的昂贵初始化。
*   Overridden通过路径中的`TabExpansion2`一个或多个配置文件提供扩展机制。`*ArgumentCompleters.ps1`配置文件在第一次调用 时调用一次`TabExpansion2`。多个配置文件可能带有不同的独立模块、工具等并同时使用。
*   除了标准的自定义参数完成器和本机参数完成器之外，此自定义 `TabExpansion2`支持结果处理器，它调整来自内置完成的结果和输入处理器，可以拦截和替换内置完成。
*   在某些情况下，它可以解决只读空的内置结果。
*   [ArgumentCompleters.ps1](https://github.com/nightroman/FarNet/blob/master/PowerShellFar/Bench/ArgumentCompleters.ps1) 包含一个输入处理器的示例，该示例将类型和命名空间的内置完成替换为有时更有用的替代方法。
*   另一个完成者在注释中提供完成：帮助标签（*.Synopsis*、 *.Description*等）和注释掉的代码的完成，为什么不呢？

# iphone - 如何在 Xcode 中添加两个编译器标志

> ID：12291202
> 
> 赞同：14
> 
> 时间：2012-09-05T23:41:50.987
> 
> 标签：iphone, ios, xcode, xcode4

我想添加两个编译器标志，一个用于 ARC (-fno-objc-arc)，一个用于警告 (-w)。有人知道如何在 Xcode 构建阶段为特定文件添加两个编译器标志吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-09-05T23:45:38.957

在您的项目 -> 目标 -> 构建阶段下添加编译器标志，只需用空格分隔标志。

![伊姆古尔](../Images/ea932bf3c04f26987c66d63db3df7b16.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-05T23:48:23.857

在 Xcode 中，单击您的项目文件以查看包含您的目标的窗格，然后：

1.  选择“构建阶段”选项卡
2.  展开“编译源”
3.  搜索您的特定文件
4.  通过双击此列在此特定文件上设置编译器标志。

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T23:47:50.973

在左侧面板的项目导航器中选择您的项目，选择您的目标，然后选择*Build Phases*。展开*编译源*并双击要为其设置编译器标志的文件。对您希望应用更改的每个目标重复此操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-06T05:36:36.953

1.  选择蓝色项目文件
2.  选择“构建阶段”。
3.  披露“编译源”。
4.  双击要添加标志的文件。
5.  然后设置以空格分隔的标志。

# lua - Lua：如何在定义函数之前调用它？

> ID：12291203
> 
> 赞同：8
> 
> 时间：2012-09-05T23:41:57.840
> 
> 标签：lua

创建函数的语法是什么，然后在代码中进一步添加它的实现？

所以大致是这样的：

*   定义函数`doX`
*   调用`doX` （代码中的更下方）
*   `doX`实现（即文件底部的所有功能）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-05T23:49:24.143

你只需要有一个变量来引用。`local funcName`有一个警告就足以满足您的目的。这将起作用：

```
local funcName
function callIt()
  print(funcName())
end
function defineIt()
  funcName = function() return "My Function" end
end
defineIt()
callIt() 
```

只要`defineIt`在调用它 ( ) 之前定义它 ( `callIt`)，它就应该按预期工作。但是你不能做这样的事情（这是警告）：

```
local funcName
print(funcName())
funcName = function() return "My Function" end 
```

你会得到一个错误：`attempt to call local 'funcName' (a nil value)`。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-06T03:36:20.660

> 哦……那么在实际定义函数之前真的没有办法调用 funcName 吗？即您仍然需要确保在您第一次调用 funcName 之前调用了 defineIt 吗？

我想澄清这一点，我觉得答案比评论更好。

Lua 是一种比 C 或 C++ 简单得多的语言。它建立在一些简单的基础上，并带有一些语法糖以使其部分内容更容易吞咽。

Lua 中没有“函数定义”之类的东西。函数是一流的对象。它们是Lua 中的*值*，就像数字 28 或字符串文字`"foo"`是值一样。“函数定义”只是将值（即函数）设置为变量。变量可以包含任何类型的值，包括函数值。

所有“函数调用”都是从变量中获取值并尝试调用它。如果该值是一个函数，则使用给定参数调用该函数。如果该值不是函数（或带有`__call`元方法的表/用户数据），则会出现运行时错误。

您不能再调用尚未在变量中设置的函数，而不能这样做：

```
local number = nil
local addition = number + 5
number = 20 
```

并预计`addition`其中有 25 个。这不会发生。因此，出于同样的原因，您不能这样做：

```
local func = nil
func(50)
func = function() ... end 
```

正如保罗所指出的，您可以从您定义的另一个函数中调用一个函数。但是，在您用它需要包含的内容填充该变量之前，您无法*执行调用它的函数。*

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-09-06T10:39:18.587

正如其他人所写的那样，您不能在运行时调用在调用之前尚未分配的函数。你必须明白：

```
function myFunc() print('Something') end 
```

只是一个语法糖：

```
myFunc = function() print('Something') end 
```

现在，这种代码不会按照您希望的方式工作是有道理的：

```
print(greeter(io.read())) -- attempt to call global 'greeter' (a nil value)
function greeter(name) return 'Hello '..name end 
```

使用`greeter`变量时，它的值为`nil`，因为它的值仅在下一行设置。

但是如果你想让你的“主”程序在顶部，函数在底部，有一种简单的方法可以实现这一点：创建一个“主”函数并将其作为底部的最后一件事调用。到调用函数时，所有函数都将设置为相应的全局变量：

```
-- start of program, your main code at the top of source code
function main()
    local name = readName()
    local message = greeter(name)
    print(message)
end

-- define the functions below main, but main is not called yet,
-- so there will be no errors
function readName() io.write('Your name? '); return io.read() end
function greeter(name) return 'Hello, ' .. name end

-- call main here, all the functions have been assigned,
-- so this will run without any problems
main() 
```

# amazon-pay - 亚马逊支付动态按钮签名被忽略？

> ID：12291204
> 
> 赞同：0
> 
> 时间：2012-09-05T23:42:00.133
> 
> 标签：amazon-pay

我正在创建一个动态按钮并根据我在 Amazon 上找到的文档和示例代码（使用 C#）生成一个签名。一切正常，付款通过等等，但是当我尝试通过更改表单中的价格来打破常规时，它仍然可以通过。似乎签名完全被忽略了。

我的第一个问题是，亚马逊是否有任何理由忽略签名？

并不是说我认为它会有很大帮助，但这是生成的 html。

```
<input type="image" src="https://authorize.payments-sandbox.amazon.com/pba/images/SMSubscribeWithOutLogo.png" border="0">
<input type="hidden" name="immediateReturn" value="0" >
<input type="hidden" name="signature" value="myGeneratedSig" >
<input type="hidden" name="cobrandingStyle" value="logo" >
<input type="hidden" name="accessKey" value="MyAccessKey" >
<input type="hidden" name="subscriptionPeriod" value="" >
<input type="hidden" name="description" value="My Test Subscription" >
<input type="hidden" name="signatureMethod" value="HmacSHA256" >
<input type="hidden" name="referenceId" value="MyReferenceID" >
<input type="hidden" name="returnUrl" value="mydomain.com/mytesturl.html" >
<input type="hidden" name="ipnUrl" value="mydomain.com/ipn.html" >
<input type="hidden" name="signatureVersion" value="2" >
<input type="hidden" name="collectShippingAddress" value="0" >
<input type="hidden" name="amount" value="USD 299.00" >
<input type="hidden" name="amazonPaymentsAccountId" value="MyPaymentsID" >
<input type="hidden" name="processImmediate" value="1" >
<input type="hidden" name="recurringFrequency" value="1 year" >
<input type="hidden" name="abandonUrl" value="mydomain.com/abandonurl.html" > 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T01:59:58.413

I figured it out. Turns out, I didn't have "Sign The Buttons" checked under "Manage Developer and Seller Preferences".

# python - 如何在 python 中初始化 time() 对象

> ID：12291209
> 
> 赞同：36
> 
> 时间：2012-09-05T23:42:24.633
> 
> 标签：python, date, datetime, time, strptime

我正在尝试像这样初始化一个时间对象：

```
t = datetime.time(0,0,0) 
```

但我收到此错误：

```
descriptor 'time' requires a 'datetime.datetime' object but received a 'int' 
```

我有这些东西进口

```
import datetime
from datetime import datetime, date, time
import time 
```

它们似乎有点多余，所以我想知道这是否是导致问题的原因

我也在使用 strptime 方法和 combine 方法

```
 earliest = datetime.combine(earliest, t)
    value = datetime.strptime(value, format) 
```

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-09-05T23:44:48.550

您可以创建不带任何值的对象：

```
>>> import datetime
>>> datetime.time()
datetime.time(0, 0) 
```

但是，您从模块中导入了*类*datetime，替换了模块本身：

```
>>> from datetime import datetime
>>> datetime.time
<method 'time' of 'datetime.datetime' objects> 
```

并且具有*不同*的签名：

```
>>> datetime.time()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: descriptor 'time' of 'datetime.datetime' object needs an argument
>>> datetime.time(0)
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
TypeError: descriptor 'time' requires a 'datetime.datetime' object but received a 'int' 
```

要么导入整个模块，要么导入包含的类，但不要混搭。依照：

```
import datetime
import time 
```

如果您需要两个模块。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-09-05T23:47:39.160

时间的构造函数是：

```
class datetime.time(hour[, minute[, second[, microsecond[, tzinfo]]]]) 
```

（来自[http://docs.python.org/library/datetime.html#time-objects](http://docs.python.org/library/datetime.html#time-objects)）

这对我有用：

```
In [1]: import datetime

In [2]: t = datetime.time(0, 0, 0)

In [3]: print t
00:00:00 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-09-05T23:45:17.790

事实是，您`import`与`datetime`. `datetime`您可能的意思是`time`，除了您*还* `import`使用冲突的`time`. 那么怎么样：

```
import datetime as dt 
```

和

```
t = dt.time(0, 0, 0) 
```

# java - 处理数据表中的编辑操作

> ID：12291215
> 
> 赞同：-1
> 
> 时间：2012-09-05T23:43:26.350
> 
> 标签：java, jsf, jsf-2

我有一个带有 3 个输入字段和两个命令按钮（提交和取消）的表单。用户提交表单后，信息应填充到下面的数据表中，包含 3 列。还有一个操作列，其中包含插入的每一行的 EDIT 和 DELETE 命令链接。单击编辑时，需要将该记录的信息填充到上面的表单中，然后如果表单已提交，请检查该记录是否已存在。如果记录不存在，则将其添加到列表中。

XHTML1 名字：

```
 <h:outputLabel>LastName:</h:outputLabel>
                    <h:inputText id="lastName" value="#{form.lastName}"/>

                    <h:outputLabel>MiddleName:</h:outputLabel>
                    <h:inputText id="middleName" value="#{form.middleName}" />

                    <h:commandButton value="Cancel" action="#{formBacking.cancel}" immediate="true"></h:commandButton>
                    <h:commandButton value="Submit" action="#{formBacking.submit}"></h:commandButton>

                </h:panelGrid>

            </h:form> 
```

XHTML2

## 用户详情

```
 <h:column>
                <f:facet name="header">FirstName</f:facet>
                <h:outputText value="#{userDetails.fname}" />
            </h:column>

            <h:column>
                <f:facet name="header">LastName</f:facet>
                <h:outputText value="#{userDetails.lname}" />
            </h:column>

            <h:column>
                <f:facet name="header">MiddleName</f:facet>
                <h:outputText value="#{userDetails.mName}" />
            </h:column>

            <h:column>
                <f:facet name="header">Action</f:facet>
                <h:commandLink
                    action="#{formBacking.editUser(userDetails)}"
                    value="Edit" />
                <h:commandLink
                    action="#{formBacking.deleteUser(userDetails)}"
                    value="Delete" />
            </h:column>

        </h:dataTable>
    </h:form>

 Form.java
    @Managed Bean
    @ViewScoped
    private String firstName = "";
    private String lastName = "";
    private String middleName = "";
    //Setters and getters

    UserBacking.java

    @ManagedBean
    @ViewScoped

    private List<Form> userList = new ArrayList<Form>();
    \\setters and getters

    public void submit(){}
    public void cancel(){}
    public void editUser(){}
    public void deleteUser(){}

What would be the best way to handle the edit functionality? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T05:21:01.527

You can use `rich:modalpanel` for action of edit and delete. I guess You knows about that.
It will show you a popup which also has an `actionListener` method, by using that action listener method you can configure your checks like record exists or not.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T05:40:56.703

使用会话范围的托管 bean。

第一次在数据表中显示用户列表。使您的用户名字字段成为命令链接，以便在单击它时显示我们呈现的相应用户详细信息页面，在此页面中您可以添加您的 CRUD（编辑、删除...功能）。

```
<p:dataTable border="1" value="#{gestionUtilisateurMB.usersList}" 
                     var="userObj"
                     paginator="true" rows="10"  
                     paginatorTemplate="{CurrentPageReport}  {FirstPageLink}      
    {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}   
      {RowsPerPageDropdown}"  
                     rowsPerPageTemplate="5,10,15"
                     rowIndexVar="rowIndex"
                      binding="#{table}">
                        <p:column id="column1">
                            <f:facet name="header">
                                <h:outputText 
        value="Login"></h:outputText>
                            </f:facet>

                              <h:commandLink action="#
      {gestionUtilisateurMB.showUserDetails}" value="#{userObj.name}">  
                                 <f:setPropertyActionListener 
       target="#{gestionUtilisateurMB.selectedUserRow}" value="#{userObj}" />
                                 <f:setPropertyActionListener target="# 
         {gestionUtilisateurMB.selectedUserRow.dbRowIndex}" value="#{table.rowIndex}"/>

                              </h:commandLink>  

                        </p:column>
                        <p:column id="column2">
                            <f:facet name="header">
                                <h:outputText 
            value="Name"></h:outputText>
                            </f:facet>
                            <h:outputText value="#
            {userObj.lastName}"></h:outputText>
                        </p:column>

                         <p:column id="column3">
                            <f:facet name="header">
                                <h:outputText id="text3" 
            value="First Name"></h:outputText>
                            </f:facet>
                            <h:outputText value="#
              {userObj.firstName}"></h:outputText>
                         </p:column>

                          <p:column id="column4">
                              <f:facet name="header">
                         <f:facet name="footer">  
                          </f:facet> 

                </p:dataTable> 
```

用户详情：

```
 <h:panelGrid id="display" header="User Detail" columns="2" cellpadding="4">  

                           <f:facet name="header">  
                              <p:graphicImage value="/src/main/resources/images/users
   /user.png"/>  
                           </f:facet>   
                            <h:outputText value="rowIndex:" />  
                            <h:outputText value="#
        {gestionUtilisateurMB.selectedUserRow.dbRowIndex}" /> 

                            <h:outputText value="Login:" />  
                            <h:outputText value="#
        {gestionUtilisateurMB.selectedUserRow.name}" />  

                            <h:outputText value="Name:" />  
                            <h:outputText value="#
          {gestionUtilisateurMB.selectedUserRow.lastName}" />  

                            <h:outputText value="First Name:" />  
                            <h:outputText value="#
             {gestionUtilisateurMB.selectedUserRow.firstName}" />  

                            <h:outputText value="Email:" />  
                            <h:outputText value="#
            {gestionUtilisateurMB.selectedUserRow.email}" />  

                            <h:outputText value="Phone:" />  
                            <h:outputText value="#
                  {gestionUtilisateurMB.selectedUserRow.phoneNumber}" />  
                     </h:panelGrid> 
```

# google-maps - 在 Google 地图向导中加载样式

> ID：12291222
> 
> 赞同：5
> 
> 时间：2012-09-05T23:44:11.723
> 
> 标签：google-maps, wizard

我使用[谷歌地图向导](http://gmaps-samples-v3.googlecode.com/svn/trunk/styledmaps/wizard/index.html)来自定义我需要嵌入网站的一些地图的颜色。

我得到了一些可以正常加载的 JSON，但是如果我需要进行更改，我需要在每次更改值以查看结果时触摸代码并加载地图。

有什么方法可以将 .js 文件中已有的样式加载到 Google 地图向导中，或者是否有任何第三方工具可以让我这样做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-07-21T22:43:04.310

[http://www.mapstylr.com/](http://www.mapstylr.com/)是一个更好的解决方案。它有一个加载选项，因此您可以粘贴当前样式并继续使用它。

此外，它还可以让您保存地图并发布它。他们有一个展示来浏览和下载其他人所做的样式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-11-07T15:09:19.163

刚刚偶然发现了[这个 Github 项目，它是](https://github.com/Instrument/styled-maps-wizard)*具有*json 导入功能的原始[样式地图向导](http://gmaps-samples-v3.googlecode.com/svn/trunk/styledmaps/wizard/index.html) 的一个版本：

 *[http://instrument.github.io/styled-maps-wizard/](http://instrument.github.io/styled-maps-wizard/)*

# c# - InvalidCastException 试图从装箱的 int 转换为可为空的枚举

> ID：12291223
> 
> 赞同：5
> 
> 时间：2012-09-05T23:44:24.400
> 
> 标签：c#, generics, casting, enums, nullable

我有一个枚举，`Foo`：

```
public enum Foo { Alpha, Bravo, Charlie } 
```

如果我尝试从 boxed`int`到 a进行以下转换`Foo?`，我会得到`InvalidCastException`：

```
var x = (Foo?)(object)1; 
```

这让我做了一些实验......

```
var x = (Foo)(object)1; // succeeds
var x = (long)(object)1; // fails
var x = (long?)(object)1; // fails
var x = (long)1; // succeeds
var x = (long?)1; // succeeds
var x = (int)(object)1; // succeeds
var x = (int?)(object)1; // succeeds 
```

这告诉我的是，您可以从 boxed`int`转换为 enum 但不能转换为 a `long`，并且您*不能*从 boxed 转换为`int`除 an 之外的任何类型的可为空值`int?`。

顺便说一句，我将`int`to `object`first 转换为第一个的原因是我真的想从 an`int`转换为 generic parameter `TValue`，如下所示：

```
var x = (TValue)(object)1; 
```

如果我没有`(object)`，它将无法编译。（有关详细信息，请参阅[Eric Lippert](http://blogs.msdn.com/b/ericlippert/archive/2012/07/10/when-is-a-cast-not-a-cast.aspx)的这篇博文。）

**问题**

1.  为什么可以从盒装转换`int`为枚举，但不能转换为可为空的枚举（也不能转换为 a`long`或 a `long?`）？

2.  什么是最简单的重写方法，`var x = (TValue)(object)1;`以便它编译，在运行时工作，并且是高性能的（假设在运行时`TValue`被确定为 a `Foo?`）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T00:15:23.690

要回答第一个问题，只有当装箱值是枚举的基础类型时，才可以将装箱值转换为枚举。如果你宣布

```
enum Foo : byte { ... 
```

您将无法从 boxed int 转换为 Foo。

要回答第二个问题，请尝试

```
var x = (TValue)Enum.ToObject(typeof(TValue), 1); 
```

不过，这涉及拳击；如果您需要一个不会装箱的解决方案，它会更加复杂。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T23:51:09.530

Nullables 不是原子类型的某种特殊类别，而是 type 的简写`Nullable<T>`，这就是为什么您不能将装箱的 int 强制转换为可为空的枚举的原因。如果你想创建一个可为空的枚举，你可以这样做：

```
var x = new Nullable<Foo>((Foo)1); 
```

我想这回答了你的两个问题！

# node.js - 如何从 Express 路由映射中自动生成 API 文档？

> ID：12291224
> 
> 赞同：13
> 
> 时间：2012-09-05T23:44:36.817
> 
> 标签：node.js, rest, express, literate-programming, self-documenting-code

我正在 nodejs + Express 中开发一个 REST API，我同时在 README 文件中记录我的 API，我想知道是否可以自动化它。例如给定：

```
app.get('/path/to', dosomething);
app.post('/path/to/:somethingelse', scream); 
```

我希望它自动生成这个

```
GET: /path/to dosomething
POST: /path/to/:somethingelse scream 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T23:58:16.500

你可以靠近。

查看“res”对象。您将看到它引用了您的应用程序对象。因此， res.app._router.map 包含一组用于 http 方法（get、post 等）的数组。比如说在 GET 数组中，有一个路径和一个回调属性。path 将为您提供路由 url，而 callback 是一个路由处理程序数组。从这里您可以获取函数名称。

所以...

制作一条新路线，纯粹用于将您的 doco 输出到文件。在该路由处理程序中，解析 res.app._router.map.GET、res.app._router.map.POST 等。

不理想，但可行。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-22T13:29:52.930

这是 javascript，您可以轻松地修补原始方法以生成文档。

这是咖啡脚本中的示例代码：

```
express = require 'express'
methods = require 'express/node_modules/methods' # array of all HTTP methods

app = express()

methods.forEach (method) ->
  orig = app[method]
  app[method] = (path, handler) ->
    console.log "patched method ", method, " ", path
    # generate docs here
    orig.apply(this, arguments) 
```

您还可以使用`handler.toString()`. 添加一些 Regex-Fu，您可以从这样编写的函数中提取更多注释：

```
app.get "/foo", (req, res) ->
  "Lorem ipsum dolor sit amet, consectetuer adipiscing elit"
  more code here 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-03-17T10:03:46.643

我也在寻找一个模块来做到这一点，但我找不到一个能满足我需要的模块。所以我最近创建了这个模块来为基于 Express 和 Mongoose 的 API 自动生成 API 文档。作为 API 开发人员，它为我节省了很多时间，前端开发人员对此也很满意。

[https://www.npmjs.org/package/express-mongoose-docs](https://www.npmjs.org/package/express-mongoose-docs)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-04-05T22:38:56.957

我认为最好的方法是找到或开发一个`JSDoc`插件来添加新标签来解析自定义文档块，并结合原生 jsdoc 标签，如下所示：

> 注意：以下示例并不完整，无需赘述……

```
'use strict';

/**
 * @file defines all server routes for the Article resource
 * @name articles.server.routes.js
 * @author Rémi Becheras <rbecheras@sirap.fr>
 */

/**
 * @namespace articles.server.routes
 */

/**
 * @module articles/server/routes
 */

/**
 * Article policy object
 * @var {Policy}
 * @inner
 */
var articlesPolicy = __.require('articles.server.policy');

/**
 * Article controller
 * @var {Controller}
 * @inner
 */
var articles = __.require('articles.server.controller');

// NB: `__.require()` is a project-specific method working as an helper for the native `require()` method, `__` is an object binded to the global context

/**
 * Exports a function that defines all routes of the `articles` module, binding it to the express `app` instance.
 * @function
 * @param {object} app The express application instance
 * @return void
 */
module.exports = function (app) {
  /**
   * Articles REST API resource end-point
   * @endpoint /api/articles
   * @name apiArticles
   * @version v1
   * @since v1
   * @description Articles REST API resource end-point
   */
  app.route('/api/articles').all(articlesPolicy.isAllowed)
    .get(articles.list)
    /**
     * Create a new article
     * @route
     * @verb POST
     * @name postArticle
     * @description If the user is logged in and has the 'author' role, it can create an article w
     * @example
      POST http://example.com/api/articles \
      --data { title: "my title", body: "<h1>my content</h1>" }
     */
    .post(articles.create);

  // Single article routes
  app.route('/api/articles/:articleId').all(articlesPolicy.isAllowed)
    .get(articles.read)
    .put(articles.update)
    .delete(articles.delete);

  // Finish by binding the article middleware
  app.param('articleId', articles.articleByID);
}; 
```

> [这是](http://usejsdoc.org/about-plugins.html)关于 jsdoc 插件的 JSDoc 文档。

我将根据我公司的需要创建一个这样的插件，但它现在不会是开源的，因为它可能是公司特定的。但如果实际上它是标准的或抽象的，我将在此处链接 github 项目。

如果其他人知道或开发了此类组件，请在此答案的评论中发布链接；-)

# javascript - 使用水平滚动将标题固定到页面顶部

> ID：12291226
> 
> 赞同：0
> 
> 时间：2012-09-05T23:44:49.047
> 
> 标签：javascript, html, css, header, horizontal-scrolling

我在每个页面的顶部都有一个导航标题。我希望用户能够使用滚动条滚动水平溢出。我知道仅使用 CSS 是不可能的，但是有什么可以帮助我处理 JavaScript 部分吗？

如果这太笼统，我会发布我的项目代码，但它非常广泛。

前任：

| 示例标题 | 关于 | 联系方式 | 提单 | （隔断）

<----------------->（滚动条）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T23:56:05.947

使用 CSS 是可能的。将您的标题设置为使用`overflow: auto;`.

示例：http: [//jsbin.com/edopor/4/edit](http://jsbin.com/edopor/4/edit)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T23:58:46.167

您可以使用我的代码版本：

```
function reposition(){
    var el = document.getElementById('header');
    var ScrollLeft = document.body.scrollLeft;
    if (ScrollLeft == 0)
    {
        if (window.pageXOffset)
            ScrollLeft = window.pageXOffset;
        else
            ScrollLeft = (document.body.parentElement) ? document.body.parentElement.scrollLeft : 0;
    }
    el.style.left = "-" + ScrollLeft + "px";
} 
```

替换`'header'`为您的标头 ID。

希望这可以帮助！

# c - C typedef 名称冲突

> ID：12291228
> 
> 赞同：8
> 
> 时间：2012-09-05T23:45:07.563
> 
> 标签：c, typedef

我得到了 2 个包含的头文件，它们都具有相同名称的 typedef。

假设 aaa.h 和 bbb.h。它们来自 2 个不相关的 3rd 方包，我无法控制这 2 个文件，但必须使用它们。我没有直接包含这两个文件，但它们被子包含在顶级头文件中。（即我包括 ah 和 bh 分别包括它们）

由于名称冲突，当它们都包含在内时，我的程序将无法编译。

所以我的临时解决方案是我将 aaa.h 复制到我的源代码树中，只删除了 typedef，称为 myaaa.h。在文件的顶部，我保持“#ifndef AAA_H，#define AAA_H”包装完整，所以当我包含 myaaa.h 时，不会包含 aaa.h，因为 AAA_H 标志已经定义，间接删除了 typedef 冲突。

有没有更聪明的方法来做到这一点，而无需将此类文件（并且我必须对其进行版本控制）添加到我的源代码中？

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-05T23:56:34.690

```
#define conflicting_typedef aaa_conflicting_typedef
#include "aaa.h"
#undef  conflicting_typedef
#define conflicting_typedef bbb_conflicting_typedef
#include "bbb.h"
#undef  conflicting_typedef
#define conflicting_typedef ambiguous use aaa_conflicting_typedef or bbb_conflicting_typedef 
```

如果需要引用`typedef`from `aaa.h`，可以使用名称`aaa_conflicting_typedef`；要引用`typedef`from `bbb.h`，使用 name `bbb_conflicting_typedef`。如果（可能是这种情况）您不需要`typedef`在代码中引用任何一个，那么您就可以开始了。final`#define`确保您不使用普通名称；您必须使用正确的映射名称。

显然，这不应该重复；如果有多个文件需要此节，请将其放入您自己的标题“aaa_bbb.h”中，并将其包含在您需要该节的地方。您甚至可以检测是否包含`aaa.h`或`bbb.h`已经包含并拒绝编译（如果包含）（您无法检测它们是否在此之后被包含，但它们曾经在您的控制下被包含的事实意味着它们不应该被包含再次包括在内）。

如果这是 C++，由于类型安全的链接，你会遇到更大的问题。OTOH，图书馆供应商都犯了不当的名称空间控制罪。

# cordova - PhoneGap 2.0 Splash 始终使用默认值

> ID：12291233
> 
> 赞同：3
> 
> 时间：2012-09-05T23:45:15.233
> 
> 标签：cordova

我最近重新安装了PhoneGap 2.0，到目前为止，我已经设法让几乎所有东西都正常工作。（我没有尝试升级我的 PhoneGap 1.6 应用程序，而是刚刚开始）

我能够将应用程序图标设置为自定义图标，但到目前为止，每次设置自定义启动画面的尝试都失败了。出于完全的挫败感，我将 res/splash 中的所有图像设置为同一个图像，我更新了 config.xml 以指向我的自定义启动画面，我什至对 www/res/ 进行了核对。在这一点上，我不明白 Phonegap 是如何找到要显示的默认启动画面的，除非它被硬编码为默认值。

有没有其他人在 PhoneGap 2.0 中设置自定义启动时遇到问题？（不是 PhoneGap 构建）

编辑：

我还去了 .xcodeproj 对话框的摘要选项卡，并设置了 iPhone/iPod 的应用程序图标和启动图像。它们直观地反映了我的自定义初始屏幕和图标。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-06T03:41:07.473

我有类似的问题。当我从（模拟器或设备）删除应用程序，清理构建并再次运行时，它可以工作。

# c++ - C++ 程序在管道时执行得更好

> ID：12291236
> 
> 赞同：3
> 
> 时间：2012-09-05T23:45:24.657
> 
> 标签：c++, performance, time, random, clock

我已经十年没有做过任何编程了。我想重新开始，所以我做了这个毫无意义的小程序作为练习。描述它的作用的最简单方法是使用我的 --help 代码块的输出：

./prng_bench --help

```
./prng_bench: usage: ./prng_bench $N $B [$T]

   This program will generate an N digit base(B) random number until
all N digits are the same. 

Once a repeating N digit base(B) number is found, the following statistics are displayed:
  -Decimal value of all N digits.
  -Time & number of tries taken to randomly find.

Optionally, this process is repeated T times. 
   When running multiple repititions, averages for all N digit base(B)
numbers are displayed at the end, as well as total time and total tries. 
```

我的“问题”是，当问题“简单”时，比如说一个 3 位以 10 为基数的数字，并且我让它进行了大量的传递，当管道传输到 grep 时，“总时间”会更少。IE：

命令 ; 命令 |grep 占用：

```
./prng_bench 3 10 999999 ; ./prng_bench 3 10 999999|grep took

....
Pass# 999999: All 3 base(10) digits =  3 base(10).   Time:    0.00005 secs.   Tries: 23
It took 191.86701 secs & 99947208 tries to find 999999 repeating 3 digit base(10) numbers.
An average of 0.00019 secs & 99 tries was needed to find each one. 

It took 159.32355 secs & 99947208 tries to find 999999 repeating 3 digit base(10) numbers. 
```

如果我多次运行相同的命令而没有 grep 时间总是非常接近。我现在正在使用 srand(1234) 进行测试。我对clock_gettime() 的启动和停止调用之间的代码不涉及任何流操作，这显然会影响时间。我意识到这是徒劳的练习，但我想知道为什么它会这样。下面是程序的核心。如果有人想编译和测试，这里是 DB 上完整源代码的链接。[https://www.dropbox.com/s/bczggar2pqzp9g1/prng_bench.cpp](https://www.dropbox.com/s/bczggar2pqzp9g1/prng_bench.cpp) clock_gettime() 需要 -lrt。

```
for (int pass_num=1; pass_num<=passes; pass_num++) {   //Executes $passes # of times.
  clock_gettime(CLOCK_PROCESS_CPUTIME_ID, &temp_time);  //get time
  start_time = timetodouble(temp_time);                //convert time to double, store as start_time
  for(i=1, tries=0; i!=0; tries++) {    //loops until 'comparison for' fully completes. counts reps as 'tries'.  <------------
    for (i=0; i<Ndigits; i++)      //Move forward through array.                                                              |
      results[i]=(rand()%base);    //assign random num of base to element (digit).                                            |
    /*for (i=0; i<Ndigits; i++)     //---Debug Lines---------------                                                           |
      std::cout<<" "<<results[i];   //---a LOT of output.----------                                                           |
    std::cout << "\n";              //---Comment/decoment to disable/enable.*/   //                                           |
    for (i=Ndigits-1; i>0 && results[i]==results[0]; i--); //Move through array, != element breaks & i!=0, new digits drawn. -|
  }                                                        //If all are equal i will be 0, nested for condition satisfied.  -|
  clock_gettime(CLOCK_PROCESS_CPUTIME_ID, &temp_time);  //get time
  draw_time = (timetodouble(temp_time) - start_time);  //convert time to dbl, subtract start_time, set draw_time to diff.
  total_time += draw_time;    //add time for this pass to total.
  total_tries += tries;       //add tries for this pass to total.
  /*Formated output for each pass:
    Pass# ---: All -- base(--) digits = -- base(10)   Time:   ----.---- secs.    Tries: ----- (LINE) */
  std::cout<<"Pass# "<<std::setw(width_pass)<<pass_num<<": All "<<Ndigits<<" base("<<base<<") digits = "
           <<std::setw(width_base)<<results[0]<<" base(10).   Time: "<<std::setw(width_time)<<draw_time
           <<" secs.   Tries: "<<tries<<"\n";
}
if(passes==1) return 0;        //No need for totals and averages of 1 pass.
/* It took ----.---- secs & ------ tries to find --- repeating -- digit base(--) numbers. (LINE)
 An average of ---.---- secs & ---- tries was needed to find each one. (LINE)(LINE) */
 std::cout<<"It took "<<total_time<<" secs & "<<total_tries<<" tries to find "
          <<passes<<" repeating "<<Ndigits<<" digit base("<<base<<") numbers.\n"
          <<"An average of "<<total_time/passes<<" secs & "<<total_tries/passes
          <<" tries was needed to find each one. \n\n";
return 0; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T23:54:58.060

与管道或不打印运行相比，打印到屏幕非常慢。管道到 grep 使您无法执行此操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T03:36:06.487

这与打印到屏幕无关；它是关于输出是终端（tty）。

根据[POSIX 规范](http://pubs.opengroup.org/onlinepubs/9699919799/functions/stdout.html)：

> 打开时，标准错误流没有完全缓冲；当且仅当可以确定流不引用交互式设备时，标准输入和标准输出流才会被完全缓冲。

Linux 将其解释为在输出为 tty（例如您的终端窗口）时使`FILE *`（即 stdio）`stdout`行缓冲，否则为块缓冲（例如您的管道）。

之所以`sync_with_stdio`有所不同，是因为启用它时，C++`cout`流会继承此行为。当您将其设置为 时`false`，它不再受该行为的约束，因此成为块缓冲。

块缓冲更快，因为它避免了在每个换行符上刷新缓冲区的开销。

您可以通过管道来进一步验证这一点，`cat`而不是`grep`. 区别在于管道本身，而不是屏幕本身。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T02:22:35.493

谢谢科林和尼莫。我确信因为我没有在开始和停止时间之间调用 std::cout ，所以它不会产生影响。不是这样。我认为这是由于编译器即使使用 -O0 或“默认值”也会执行的优化。

我认为正在发生什么……？我认为正如 Collin 所建议的那样，编译器在写入 TTY 时试图变得聪明。而且，正如 Nemo 所指出的，cout 继承了 stdio 的行缓冲属性。

我可以通过使用以下方法来减少影响，但不能消除：

```
std::cout.sync_with_stdio(false); 
```

根据我对此的有限阅读，应该在完成任何输出操作之前调用它。这是 no_sync 版本的来源：[https ://www.dropbox.com/s/wugo7hxvu9ao8i3/prng_bench_no_sync.cpp](https://www.dropbox.com/s/wugo7hxvu9ao8i3/prng_bench_no_sync.cpp)

./no_sync 3 10 999999;./no_sync 3 10 999999|grep

用 -O0 编译

```
999999: All 3 base(10) digits =  3 base(10)  Time:    0.00004 secs.  Tries: 23
It took 166.30801 secs & 99947208 tries to find 999999 repeating 3 digit base(10) numbers.
An average of 0.00017 secs & 99 tries was needed to find each one. 

It took 163.72914 secs & 99947208 tries to find 999999 repeating 3 digit base(10) numbers. 
```

符合-O3

```
999999: All 3 base(10) digits =  3 base(10)  Time:    0.00003 secs.  Tries: 23
It took 143.23234 secs & 99947208 tries to find 999999 repeating 3 digit base(10) numbers.
An average of 0.00014 secs & 99 tries was needed to find each one. 

It took 140.36195 secs & 99947208 tries to find 999999 repeating 3 digit base(10) numbers. 
```

指定不与 stdio 同步将管道和非管道之间的增量**从超过 30 秒更改为小于 3**。请参阅原始增量的原始问题，它是 ~191 - ~160

为了进一步测试，我创建了另一个版本，使用一个结构来存储每次传递的统计信息。此方法在所有传递完成后执行所有输出。我想强调一下，这可能是一个**糟糕的想法**。我允许命令行参数确定动态分配的结构数组的大小，该数组包含 int、double 和 unsigned long。我什至不能用 999,999 次通行证运行这个版本。我得到一个分段错误。[https://www.dropbox.com/s/785ntsm622q9mwd/prng_bench_struct.cpp](https://www.dropbox.com/s/785ntsm622q9mwd/prng_bench_struct.cpp)

./struct_prng 3 10 99999;./struct_prng 3 10 99999|grep

```
Pass# 99999: All 3 base(10) digits =  6 base(10)  Time:    0.00025 secs.  Tries: 193
It took 13.10071 secs & 9970298 tries to find 99999 repeating 3 digit base(10) numbers.
An average of 0.00013 secs & 99 tries was needed to find each one. 

It took 13.12466 secs & 9970298 tries to find 99999 repeating 3 digit base(10) numbers. 
```

我从中学到的是，你不能指望你编码事物的顺序是它们执行的顺序。在未来的程序中，我可能会实现 getopt 而不是编写我自己的 parse_args 函数。这将允许我通过要求用户在想要查看时使用 -v 开关来抑制高重复循环上的无关输出。

我希望进一步的测试对任何想知道管道和循环输出的人有用。我发布的所有结果都是在 RasPi 上获得的。所有链接的源代码都是 GPL，只是因为这是我能想到的第一个许可证......我真的不需要 GPL 的 copyleft 条款来自我夸大，我只是想清楚它是免费的，但没有保证或责任。

请注意，所有链接的源都已注释掉对 srand(...) 的调用，因此您的所有伪随机结果都将完全相同。

# java - Java - 如何使图像消失

> ID：12291237
> 
> 赞同：0
> 
> 时间：2012-09-05T23:45:36.363
> 
> 标签：java, swing, awt, visibility, layout-manager

嗨，我想让我的 JPanel 消失，所以我写了这些代码行

```
removeAll();
updateUI();
revalidate(); 
```

这只会使 JComponents 和 JButtons 消失。我想让我用paint方法显示的图像也消失。如果我做 setVisible(false)，那么我不能在它后面添加另一个 JPanel。

这是我的课：

```
package screens;

import java.awt.*;
import java.awt.event.*;

import javax.swing.*;
public class menuScreen extends JPanel implements MouseListener{
    private static final long serialVersionUID = 1L;

//-------------VARIABLES---------------//
    Image wallpaper = (Image)Toolkit.getDefaultToolkit().getImage(getClass().getResource("images/wallpaper.jpg"));
    Image title_text = (Image)Toolkit.getDefaultToolkit().getImage(getClass().getResource("images/title-text.png"));
    ImageIcon startGameimg = new ImageIcon(Toolkit.getDefaultToolkit().getImage(getClass().getResource("images/startGame.png")));
    ImageIcon optionsimg = new ImageIcon(Toolkit.getDefaultToolkit().getImage(getClass().getResource("images/options.png")));
    //JButton start = new JButton(basketball);
    JLabel options = new JLabel(optionsimg);
    JLabel startGame =  new JLabel(startGameimg);
    gameScreen gS = new gameScreen();
    CardLayout scenechange = new CardLayout();
    JPanel scenechange1 = new JPanel (scenechange);

//-------------PAINT FUNCTION----------//
    public void paintComponent(Graphics g){
    g.drawImage(wallpaper,0,0,this);
    g.drawImage(title_text,0,0,this);
    //g.drawImage(basketball1,110,180,this);

    }

//-------------CONSTRUCTOR-------------//
    public menuScreen(){

    scenechange.addLayoutComponent(this,"menuScreen");
    scenechange.addLayoutComponent(gS,"gameScreen");
    //scenechange.show(this,"menuScreen");

    this.setLayout(null);
    this.add(options);
    this.add(startGame);
    startGame.setBounds(110,180,110,110);
    options.setBounds(110,300,110,110);
    startGame.addMouseListener(this);
    options.addMouseListener(this);

    }

    public void mouseClicked(MouseEvent e) {
    if(e.getSource() ==  (startGame)){

        removeAll();

        revalidate();
        add(gS);
    }

    if(e.getSource() == (options)){
        setVisible(false);
    }

    }

    public void mousePressed(MouseEvent e) {
    // TODO Auto-generated method stub

    }

    public void mouseReleased(MouseEvent e) {
    // TODO Auto-generated method stub

    }

    public void mouseEntered(MouseEvent e) {
    // TODO Auto-generated method stub

    }

    public void mouseExited(MouseEvent e) {
    // TODO Auto-generated method stub

    }

}//END OF CLASS startingScreen 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T23:47:49.977

首先，不要调用`updateUI`，它与外观和感觉有关，而不是（直接）更新您的组件。

如果您在面板中提供了自定义绘制例程，那么您需要阻止它绘制图像（而不阻止它绘制自己的内容）。 `removeXxx`将删除您之前添加到容器中的子组件。

多一点代码会很有用

**更新**

首先，您绘制的图像不是容器的组件，它们已被“标记”，您需要某种方式告诉组件不要绘制图像

```
public void paintComponent(Graphics g){
    super.paintComponent(g); // this is super important
    if (paintImages){ // you need to define and set this flag
        g.drawImage(wallpaper,0,0,this);
        g.drawImage(title_text,0,0,this);
    }
} 
```

现在，这将停止绘制图像。

但是，如果您不再想使用该组件（即，您想将其从屏幕上移除，以便在屏幕上放置一个新组件），则需要将该组件从其父组件中移除，该代码-大师建议（所以我不会窃取他的答案；））

**更新**

好的，你有一个想法的核心，但要么不太知道如何实现它，要么决定放弃它。

基本上，从您的代码的外观来看，您要么尝试或已经实现了 a `CardLayout`，不幸的是，您对它有错误的想法。

使用`CardLayout`，您需要“控制器”，一个负责切换屏幕的组件...

```
public class ScreenController extends JPanel {

    private static final long serialVersionUID = 1L;
//-------------VARIABLES---------------//
    MenuScreen ms = new MenuScreen();
    GameScreen gs = new GameScreen();
    CardLayout sceneChange;

//-------------CONSTRUCTOR-------------//
    public ScreenController() {

        sceneChange = new CardLayout();

        this.setLayout(sceneChange);
        add(ms, "menuScreen");
        add(gs, "gameScreen");

        sceneChange.show(this, "menuScreen");

        ms.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent e) {
                if (e.getActionCommand().equalsIgnoreCase("startgame")) {
                    sceneChange.show(ScreenController.this, "gameScreen");
                }
            }
        });
    }

}//END OF CLASS startingScreen 
```

然后你有你的菜单和游戏屏幕......

```
public class MenuScreen extends JPanel implements MouseListener {

    private static final long serialVersionUID = 1L;
//-------------VARIABLES---------------//
    //JButton start = new JButton(basketball);
    JLabel options = new JLabel("Options");
    JLabel startGame = new JLabel(" >> Start << ");
//    gameScreen gS = new gameScreen();
    BufferedImage wallpaper;

//-------------PAINT FUNCTION----------//
    @Override
    public void paintComponent(Graphics g) {
        System.out.println("paint");
        super.paintComponent(g);
        if (wallpaper != null) {
            g.drawImage(wallpaper, 0, 0, this);
        }
    }

//-------------CONSTRUCTOR-------------//
    public MenuScreen() {

        // Please handle your exceptions better
        try {
            wallpaper = ImageIO.read(getClass().getResource("/Menu.png"));
            setPreferredSize(new Dimension(wallpaper.getWidth(), wallpaper.getHeight()));
        } catch (IOException ex) {
            ex.printStackTrace();
        }

        setLayout(new GridBagLayout());

        Cursor cusor = Cursor.getPredefinedCursor(Cursor.HAND_CURSOR);
        options.setCursor(cusor);
        startGame.setCursor(cusor);

        Font font = UIManager.getFont("Label.font").deriveFont(Font.BOLD, 48);
        options.setFont(font);
        startGame.setFont(font);

        GridBagConstraints gbc = new GridBagConstraints();
        gbc.gridx = 0;
        gbc.gridy = 0;

        this.add(options, gbc);
        gbc.gridy++;
        this.add(startGame, gbc);
        startGame.addMouseListener(this);
        options.addMouseListener(this);
    }

    public void mouseClicked(MouseEvent e) {
        if (e.getSource() == (startGame)) {
            fireActionPerformed("startGame");
        }
        if (e.getSource() == (options)) {
            fireActionPerformed("gameOptions");
        }
    }

    public void mousePressed(MouseEvent e) {
    }

    public void mouseReleased(MouseEvent e) {
    }

    public void mouseEntered(MouseEvent e) {
    }

    public void mouseExited(MouseEvent e) {
    }

    public void addActionListener(ActionListener listener) {
        listenerList.add(ActionListener.class, listener);
    }

    public void removeActionListener(ActionListener listener) {
        listenerList.remove(ActionListener.class, listener);
    }

    protected void fireActionPerformed(String cmd) {
        ActionListener[] listeners = listenerList.getListeners(ActionListener.class);
        if (listeners != null && listeners.length > 0) {
            ActionEvent evt = new ActionEvent(this, ActionEvent.ACTION_PERFORMED, cmd);
            for (ActionListener listener : listeners) {
                listener.actionPerformed(evt);
            }
        }
    }
} 
```

菜单屏幕...

![菜单画面](../Images/e7daad420f0d35691f4f2f309f21a390.png)

当你点击开始时……游戏画面……

![在此处输入图像描述](../Images/696ed5066f2e04075f9e10fbbd5fee30.png)

现在这是一个示例。请尝试并花时间了解它在代码中发生的事情，然后再继续执行并实施它。我用自己的图像，你需要得到你自己的..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T00:03:40.177

有几种方法可以阻止您的 JPanel “出现”，具体取决于您想要完成的任务。一是打电话`setOpaque(false);`。不过，我不完全确定这会如何影响自定义绘画。

另一种可能是

```
Container parent = getParent().remove(this);
parent.validate(); 
```

第三种可能性是在您的类中添加一个标志，该标志在您单击 JLabel（或者更好的是 JButton - 请参见下面的评论）时设置。然后在您的`paintComponent()`方法中，您可以检查标志并相应地绘制。

笔记：

您错误地使用 JLabel 和鼠标事件来响应用户输入。通常在 Swing 应用程序中，我们使用 JButton 和 ActionListener 来完成您在此处尝试执行的操作。这样做的一个优点是您只需实现一个调用的方法`onActionPerformed()`，而无需担心添加所有您甚至不想响应的鼠标事件处理程序。

# php - 在 Symfony2 中为电子邮件模板动态生成内联 CSS 样式

> ID：12291242
> 
> 赞同：7
> 
> 时间：2012-09-05T23:47:20.683
> 
> 标签：php, css, symfony, twig

Symfony2 中是否有工具或捆绑包允许我使用 css 文件创建普通模板，然后将其动态转换为内联 css 规则，以便用作电子邮件的正文？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T08:10:13.503

我知道三个可以做到这一点的工具，你可以在 Symfony 中使用它们：

*   [Premailer](http://premailer.dialect.ca/api)是提供此服务的在线工具。它有一个 API 和该 API 的 php 包装器
*   [CssToInlineClass](http://classes.verkoyen.eu/css_to_inline_styles)是一个提供此功能的 php 类
*   Mailchimp[在他们的 api](http://apidocs.mailchimp.com/api/1.3/inlinecss.func.php)中提供了一个提供此功能的功能

前两个没有直接的 symfony 实现，尽管它们很容易使用。对于 mailchimp，有一个提供此功能的[mailchimp 包](https://github.com/jirafe/MailChimpBundle)，尽管该包没有很好的文档记录。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-16T16:20:38.590

今天我通过另一个问题发现存在这样一个适合您需求的 Symfony2 捆绑包（我没有测试它）。

您可以使用[ToInlineStyleEmailBundle](https://github.com/robertotru/ToInlineStyleEmailBundle)，它嵌入了[Carlos Granados](https://stackoverflow.com/users/1557651/carlos-granados)在他的回答中建议的[CSSToInline](http://classes.verkoyen.eu/css_to_inline_styles)库。

使用这个 Symfony2 包，您可以将转换器作为服务 ( `$this->get('css_to_inline_email_converter')`)，然后根据您的需要使用它。它还支持模板生成。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-06T04:08:59.810

通过在 CakePHP 中集成 Emogrifier PHP 类，我取得了很好的效果。内联所有样式非常好。不确定它是否有 Symfony 捆绑包，但应该不难集成。

[https://github.com/jjriv/emogrifier](https://github.com/jjriv/emogrifier)

# python - 带有openCV的特征脸

> ID：12291243
> 
> 赞同：0
> 
> 时间：2012-09-05T23:47:23.353
> 
> 标签：python, opencv, pca

我刚刚认出了一些面孔`cv2.createEigenFaceRecognizer`。但我想知道输入面与计算出的特征面有多少相似之处。这个想法是您可以重新识别不在数据库中的人。

编辑：

例如：我在模型上训练了 A、B 和 C 面，然后我看到 C 和 D 面。我希望能够区分 C 面和 D 面。

谢谢你！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T18:28:49.230

您可以在以下文档中找到有关设置阈值的部分`cv::FaceRecognizer`：

*   [http://docs.opencv.org/trunk/modules/contrib/doc/facerec/facerec_api.html#setting-the-thresholds](http://docs.opencv.org/trunk/modules/contrib/doc/facerec/facerec_api.html#setting-the-thresholds)

它对 OpenCV Python Wrapper 的工作方式相同，在 Python 中调用时可以轻松看到`help(cv2.createFaceRecognizer)`：

```
Help on built-in function createEigenFaceRecognizer in module cv2:

createEigenFaceRecognizer(...)
    createEigenFaceRecognizer([, num_components[, threshold]]) -> retval 
```

因此，在代码中，您将创建具有阈值的模型，我将其设置为`100.0`. 低于此值的任何内容都将`-1`在预测中产生，这意味着这张脸是`unknown`：

```
# Create the Eigenfaces model. We are going to use the default
# parameters for this simple example, please read the documentation
# for thresholding:
model = cv2.createEigenFaceRecognizer(threshold=100.0) 
```

如演示中所示，您可以通过以下方式获得预测和相关置信度（即到训练数据集中最近邻的距离）：

```
[predicted_label, predicted_confidence] = model.predict(image) 
```

因此，如果您在主题`A`、`B`、`C` **和**您使用阈值上训练您的模型，那么预测`D`应该会产生`-1`、而`A`、`B`或`C`应该被识别。鉴于您正在使用阈值这一事实。

至于在不重新估计整个模型的情况下迭代地添加新面孔。这对于 Eigenfaces 或 Fisherfaces 方法是不可能的。你总是需要调用`FaceRecognizer::train`这两种算法来学习模型。您可以使用 创建的局部二进制模式直方图 (LBPH) 模型`cv2.createLBPHFaceRecognizer`支持更新模型，而无需重新计算其他训练样本。请参阅 API 文档：

*   [http://docs.opencv.org/trunk/modules/contrib/doc/facerec/facerec_api.html#facerecognizer-update](http://docs.opencv.org/trunk/modules/contrib/doc/facerec/facerec_api.html#facerecognizer-update)

# perl - Perl ord 和 chr 使用 unicode

> ID：12291252
> 
> 赞同：7
> 
> 时间：2012-09-05T23:48:28.733
> 
> 标签：perl, unicode

令我惊恐的是，我刚刚发现它`chr`不适用于 Unicode，尽管它可以做*一些事情。*手册页很清楚

> 返回字符集中由该 NUMBER 表示的字符。例如，chr(65)" 是 ASCII 或 Unicode 中的 "A"，而 chr(0x263a) 是 Unicode 笑脸。

事实上，我可以使用打印笑脸

```
perl -e 'print chr(0x263a)' 
```

但是诸如此类的`chr(0x00C0)`事情不起作用。我看我的perl v5.10.1有点老了，但是当我在源代码中粘贴各种奇怪的字母时，一切都很好。

^(我尝试过类似 and 之类的有趣的东西`use utf8`，`use encoding 'utf8'`但我没有尝试过类似 and 之类的有趣的东西`use v5.12`，`use feature 'unicode_strings'`因为它们不适用于我的版本，所以我在胡闹`Encode::decode`发现我不需要解码，因为我没有要解码的字节数组。我阅读的文档比以往任何时候都多，发现了很多有趣的东西，但没有任何帮助。它看起来像是一种[Unicode Bug](http://perldoc.perl.org/perlunicode.html#The-%22Unicode-Bug%22)，但没有给出可用的解决方案。此外，我不关心整个字符串语义，我只需要一个微不足道的函数。)

那么如何将数字转换为由与其对应的单个字符组成的字符串，例如`real_chr(0xC0) eq 'À'`成立呢？

* * *

我得到的第一个答案解释了有关 IO 的所有内容，但我仍然不明白为什么

```
#!/usr/bin/perl -w
use strict;
use utf8;
use encoding 'utf8';

print chr(0x00C0) eq 'À' ? 'eq1' : 'ne1', " - ", chr(0x263a) eq '☺' ? 'eq1' : 'ne1', "\n";

print 'À' =~ /\w/ ? "match1" : "no_match1", " - ", chr(0x00C0) =~ /\w/ ? "match2" : "no_match2", "\n"; 
```

印刷

```
ne1 - eq1
match1 - no_match2 
```

这意味着手动输入的`'À'`不同于`chr(0x00C0)`。此外，前者是单词组成字符（正确！），而后者不是（但应该是！）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-06T00:15:15.640

第一的，

```
perl -le'print chr(0x263A);' 
```

是越野车。Perl 甚至会告诉你很多：

```
Wide character in print at -e line 1. 
```

这不符合“工作”的条件。因此，尽管它们在无法提供您想要的东西方面有所不同，但以下都没有给您想要的东西：

```
perl -le'print chr(0x263A);'

perl -le'print chr(0x00C0);' 
```

要正确输出这些 Unicode 代码点的 UTF-8 编码，您需要告诉 Perl 使用 UTF-8 对 Unicode 点进行编码。

```
$ perl -le'use open ":std", ":encoding(UTF-8)"; print chr(0x263A);'
☺

$ perl -le'use open ":std", ":encoding(UTF-8)"; print chr(0x00C0);'
À 
```

* * *

现在谈谈“为什么”。

文件句柄只能传输字节，所以除非你另有说明，否则 Perl 文件句柄需要字节。这意味着您提供的字符串`print`只能包含字节，或者换句话说，它不能包含超过 255 个字符。输出正是您提供的内容：

```
$ perl -e'print map chr, 0x00, 0x65, 0xC0, 0xF0' | od -t x1
0000000 00 65 c0 f0
0000004 
```

这很有用。这与您想要的不同，但这并没有错。如果你想要不同的东西，你只需要告诉 Perl 你想要什么。

通过添加一个`:encoding`层，句柄现在需要一串 Unicode 字符，或者我称之为“文本”。该层告诉 Perl 如何将文本转换为字节。

```
$ perl -e'
   use open ":std", ":encoding(UTF-8)";
   print map chr, 0x00, 0x65, 0xC0, 0xF0, 0x263a;
' | od -t x1
0000000 00 65 c3 80 c3 b0 e2 98 ba
0000011 
```

* * *

您`chr`不知道或不关心 Unicode 的权利。像`length`,和`substr`,实现了一个基本的字符串函数，而不是一个 Unicode 函数。这并不意味着它不能用于处理文本字符串。如您所见，问题不在于您在构建字符串后对字符串所做的操作。`ord``reverse``chr``chr`

字符是字符串的元素，字符是数字。这意味着字符串只是一个数字序列。是否将这些数字视为 Unicode 代码点（文本）、打包的 IP 地址或温度测量值完全取决于您和您将字符串传递给的函数。

以下是一些运算符的示例，它们确实为它们作为操作数接收的字符串分配了含义：

*   `m//`需要一串 Unicode 代码点。
*   `connect`需要表示`sockaddr_in`结构的字节序列。
*   `print`带有句柄而不`:encoding`期望字节序列。
*   `print`带有一个带有`:encoding`一系列 Unicode 代码点的句柄。
*   ETC

* * *

> 那么如何将数字转换为由与其对应的单个字符组成的字符串，以便例如 real_chr(0xC0) eq 'À' 成立？

`chr(0xC0) eq 'À'`确实成立。您是否记得告诉 Perl 您使用 UTF-8 对源代码进行了编码`use utf8;`？如果您没有告诉 Perl，Perl 实际上会在 RHS 上看到两个字符的字符串。

* * *

关于您添加的问题：

`encoding`编译指示存在问题。我建议不要使用它。相反，使用

```
use open ':std', ':encoding(UTF-8)'; 
```

这将解决其中一个问题。您遇到的另一个问题是

```
chr(0x00C0) =~ /\w/ 
```

这是一个已知的错误，出于向后兼容性的原因故意破坏。也就是说，除非您请求更新版本的语言，如下所示：

```
use 5.014;    # use 5.012; *might* suffice. 
```

一种可追溯到 5.8 的解决方法：

```
my $x = chr(0x00C0);
utf8::upgrade($x);
$x =~ /\w/ 
```

# c# - Graphics.DrawLine 的覆盖

> ID：12291253
> 
> 赞同：0
> 
> 时间：2012-09-05T23:48:30.350
> 
> 标签：c#

我寻求类`@override`的`DrawLine`方法`Graphics`，但我不确定这是否可能？

我试图在该方法中进行验证，以便它停止在我将提供的某个 Y 变量处绘制，从而有效地向该方法添加一个新参数。

有人对覆盖该特定方法有一些经验或建议吗？

我不确定这个问题，所以我不知道我是否可以简单地做`@Override`然后给它一个验证，因为它正在绘制单独的像素点。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T23:55:30.403

你只需要一个单独的方法。把它放在你想要的任何地方：

```
void CheckedDrawLine(Graphics g, int x1, int y1, int x2, int y2, int stopY) {
    // Do the validation, draw the line
} 
```

您可以通过将其粘贴在以下内容中来使其成为扩展方法`static class`：

```
void CheckedDrawLine(this Graphics g, int x1, int y1, int x2, int y2, int stopY) {
    // Do the validation, draw the line
} 
```

做 a`g.CheckedDrawLine(...)`而不是 a `CheckedDrawLine(g, ...)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T00:37:51.117

普通代码不可能替换不是设计为替换/覆盖的方法。

你可以

*   预处理（即 ILDASM/modify/ILASM）所有调用程序集以使用您的新方法
*   用您自己的替换 System.Drawing 程序集
*   如果您需要它进行单元测试，请使用一些允许覆盖 Moles 或[Fakes等方法的现有框架。](http://msdn.microsoft.com/en-us/library/hh549175%28v=vs.110%29.aspx)

# gnuplot - 运行脚本时 gnuplot 无效命令

> ID：12291254
> 
> 赞同：1
> 
> 时间：2012-09-05T23:48:34.117
> 
> 标签：gnuplot

我只是想用 gnuplot 运行一个脚本。我在 Windows 中使用 gnuplot。所以在 gnuplot 命令行上我输入这个

```
gnuplot histo.gp 
```

但是我收到这样的无效命令错误

```
gnuplot> gnuplot histo.gp
         ^
         invalid command 
```

如何在 gnuplot for windows 中运行脚本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T00:26:16.883

尝试

```
gnuplot> load histo.gp 
```

从 gnuplot 命令行。如果你想直接从 Windows 命令行运行脚本，你应该可以运行

```
# gnuplot.exe histo.gp 
```

（或类似的，我不使用 Windows。）

# wpf - 为什么 ExtentWidth 保持在 10.003？

> ID：12291256
> 
> 赞同：2
> 
> 时间：2012-09-05T23:48:43.853
> 
> 标签：wpf, listbox, richtextbox

所以我有一个`ListBox`有一个`DataTemplate`有一个 Grid 有一个`RichTextBox`. 出于某种原因，当您输入时，`RichTextBox`它会将每个字符放在单独的行上。深入研究，我发现`ExtentWidth`等于 10.003。为什么？我不知道。我希望有人可以向我解释原因并给出一个很好的解决方案来让它停止这样做。

我确实注意到，如果您在网格列上设置宽度，它会修复它，但我不希望在网格列上设置静态宽度。

下面是一个问题的例子。我正在使用 .Net 4 和 VS 2010。

```
<Window x:Class="WpfApplication1.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="clr-namespace:WpfApplication1"
    Title="MainWindow" Height="350" Width="525">
<ListBox 
    DockPanel.Dock="Top" 
    x:Name="TestListBox">
    <ListBox.ItemTemplate>
        <DataTemplate DataType="{x:Type local:Test}">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="50" />
                    <ColumnDefinition />
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition />
                    <RowDefinition />
                </Grid.RowDefinitions>
                <TextBox Grid.Column="0" Grid.Row="0" Text="{Binding Name}" />
                <TextBlock Grid.Column="1" Grid.Row="0" Text="Test" />
                <RichTextBox
                    Grid.Column="1" Grid.Row="1"/>
            </Grid>
        </DataTemplate>
    </ListBox.ItemTemplate>
    <local:Test Name="Test1" />
    <local:Test Name="Test2" />
</ListBox> 
```

```
using System.Windows;

namespace WpfApplication1
{
/// <summary>
/// Interaction logic for MainWindow.xaml
/// </summary>
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
    }
}

public class Test
{
    public string Name { get; set; }

    public Test()
    {
    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T18:37:20.633

所以我想出了一个解决方法。如果您将a 换成`ListBox`a`DataGrid`并`DataGridTemplateColumns`与`Width`TemplateColumn 设置为的一起使用，`"*"`那么它似乎可以工作。

```
<DataGrid
    x:Name="TestDataGrid"
    CanUserReorderColumns="False"
    CanUserResizeColumns="False"
    >
    <DataGrid.Columns >
        <DataGridTemplateColumn Width="*">
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <RichTextBox />
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>
    </DataGrid.Columns>

    <local:Test Name="Test1" />
    <local:Test Name="Test2" />
</DataGrid> 
```

请注意，我也将其设置为`CanUserResizeColumns`，`False`因为如果您不这样做并且他们调整了它们的大小，`ExtentWidth`则会重新回到 10。

# actionscript-3 - 在 as3 中，if 语句可以运行事件跟踪器或调用函数吗？

> ID：12291257
> 
> 赞同：0
> 
> 时间：2012-09-05T23:48:56.800
> 
> 标签：actionscript-3, flash

我遇到了一些我不熟悉的语法，并且无法在线找到任何参考。

在下面的 as3 函数中是调用“sendTrackingEvent”函数的 if 语句吗？而在'sendTrackingEvent'函数中是if语句发送跟踪事件吗？

```
function trackingHandler(page: String)
{
    if (! sendTrackingEvent(EID,"Document View",page))
    {
        fl_SavePreferences_5(EID + ",Document View," + page);
    }

}

function sendTrackingEvent(category:String, action:String, label:String):Boolean
{
    if (tracker.trackEvent(category,action,label))
    {

        return true;
    }
    else
    {

        return false;
    }
} 
```

提前感谢您的帮助。我还在学习。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T23:53:37.053

`sendTrackingEvent`是一个返回 true 或 false 的函数

第一个 if 语句正在评估该函数的响应（返回值）。因此，如果`sendTrackingEvent(EID,"Document View",page)`返回 false，那么您的 if 语句将运行（因为这`!`意味着 NOT true）。

中的第二个 if 语句相同`sendTrackingEvent`。

它正在评估`tracker.trackEvent(category,action,label)`.

* * *

该函数 ( `sendTrackingEvent`) 实际上可以简化为：

```
function sendTrackingEvent(category:String, action:String, label:String):Boolean
{
    return tracker.trackEvent(category,action,label);
} 
```

* * *

就此而言，您甚至不需要 sendTrackingEvent 函数，因为您可以这样做：

```
function trackingHandler(page: String)
{
    if (! tracker.trackEvent(EID,"Document View",page))
    {
        fl_SavePreferences_5(EID + ",Document View," + page);
    }

} 
```

# google-chrome - 无法识别的内容安全策略指令

> ID：12291258
> 
> 赞同：7
> 
> 时间：2012-09-05T23:49:04.707
> 
> 标签：google-chrome, phpmyadmin, content-security-policy

我注意到在更新到 Google Chrome (21.0.1180.89) 后，我在开发人员选项卡中收到了很多错误；特别是如果我访问我自己的 phpMyAdmin 站点。

这些都是相同的，并且是针对跨站点脚本的某种安全性；有什么我可以解决的吗？

```
Unrecognized Content-Security-Policy directive 'allow'. 
Unrecognized Content-Security-Policy directive 'options'. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T13:54:44.813

和指令都是 Mozilla 最初定义的内容安全策略的一部分`allow`。`options`Chrome 实现了[当前的 W3C 标准](http://w3.org/TR/CSP)，该标准对 Mozilla 的原始提案进行了一些更改。

*   `allow`已替换为`default-src`, 并为其他 CSP 指令设置默认源列表。
*   `options`已在or指令中替换为`'unsafe-inline'`and `'unsafe-eval'`（使用单引号）源。`script-src``style-src`

使用标头，这两个旧式指令在 Firefox 中仍然有效`X-Content-Security-Policy`。如果一个网站提供了一个以 WebKit 为前缀的标头 ( `X-WebKit-CSP`)，它应该使用当前的标准。

请注意，WebKit 已经`Content-Security-Policy`在主干中实现了不带前缀的标头 ( )，它应该会在接下来的几个月内推广到稳定的基于 WebKit 的浏览器。如果您尚未设置规范标头，那么现在是开始考虑它的好时机。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-03-05T08:40:27.483

在 Chrome v 48.0.2564.116 m "Unrecognized Content-Security-Policy directive 'frame-ancestors' 上出现类似错误。" 但在 IE 11、FF 和 safari 上工作得非常好。

这只是 chrome 上的警告消息，不会影响网站的功能。

# windows-installer - Programmatically uninstall an applicaton - even if custom uninstaller fails

> ID：12291264
> 
> 赞同：0
> 
> 时间：2012-09-05T23:49:58.397
> 
> 标签：windows-installer

I have a .NET application that installs a service using the custom installer/uninstaller.

This has been wrapped up into a Windows Installer, so that when it installs it registers the service, and when you deinstall it, it unregisters this service. But there are cases where the custom uninstaller can fail. (In my case, I had already manually uninstalled the service by calling `installutil`.)

Now, when I attempt to uninstall the product via the windows installer framework, the following error comes up:

> Error 1001\. An exception occurred while uninstalling. This exception will be ignored and the uninstall will continue. However, the application might not be fully uninstalled after the uninstall is complete. -> The specified service does not exist as an installed service.

This makes sense. Except that THEN, in spite of what the message said, the uninstallation is rolled back. (This problem is also described [here](https://stackoverflow.com/questions/4962097/msi-installer-fails-during-uninstall-when-serivce-was-already-removed)).

I know that if I manually reinstalled the services the uninstalltion might work.

But I want to know if there's some way I can force this out of the list of installed products.

* * *

My current programmatic way of uninstalling this is to call

```
 ::MsiConfigureProduct(productCode.c_str(), INSTALLLEVEL_DEFAULT, INSTALLSTATE_ABSENT); 
```

But this just has the same effect of uninstalling via the control panel, which fails.

What other approach can I take?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T00:25:08.373

This is why I tell people to not use Visual Studio Deployment Projects, InstallUtil custom actions and to only install on VM's and not on their own box.

So here's what you need to do:

Find the MSI that you used to install. Edit it with [Orca](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370557%28v=vs.85%29.aspx) and remove the custom actions from the InstallExecuteSequence (or put a no-op condition like GOTOHELL=666 on them ).

Run the command:

```
msiexec /i foo.msi REINSTALL=ALL REINSTALLMODE=vomus 
```

This will 'recache' the MSI. Now uninstall the program using Add/Remove programs.

Now switch to a better tool that actually exposes the ServiceInstall table. Reinventing the wheel never ends well as you just discovered. Don't let it happen to your customer.

Finally, use the SC command to stop and delete the orphaned service.

# php - $this->action 显示来自控制器的某个动作 - ZEND

> ID：12291265
> 
> 赞同：1
> 
> 时间：2012-09-05T23:50:44.427
> 
> 标签：php, zend-framework, zend-form, zend-db

我正在尝试为我正在使用 ZEND 构建的网站构建一个菜单。我是 ZEND 的新手。因此，我在名为 BlogCateogoriesController 的控制器中创建了一个动作 catmenuAction()。我也为它创建了一个 veiw 脚本。

现在在 master.phtml 文件中，我试图调用这个视图脚本来呈现我的菜单。实际上，我认为这就是我将最新消息、评论、推文带到我的页面的方式（就像 Joomla 中的 lika MODULES 那样）。

在我的 master.phtml 文件中，我声明了

```
<?php $this->layout()->categoriesList = $this->action('catmenu', 'Blog_BlogCategories'); ?> 
```

现在我收到这个可怕的错误，说它找不到 Blog_BlogCategoriesController：

```
Fatal error: Uncaught exception 'Zend_Controller_Dispatcher_Exception' with message 'Invalid controller specified (Blog_BlogCategories)' in D:\Server\xampp\htdocs\zendtest\library\Zend\Controller\Dispatcher\Standard.php:248 Stack trace: #0 D:\Server\xampp\htdocs\zendtest\library\Zend\View\Helper\Action.php(135): Zend_Controller_Dispatcher_Standard->dispatch(Object(Zend_Controller_Request_Http), Object(Zend_Controller_Response_Http)) #1 [internal function]: Zend_View_Helper_Action->action('catmenu', 'Blog_BlogCatego...') #2 D:\Server\xampp\htdocs\zendtest\library\Zend\View\Abstract.php(350): call_user_func_array(Array, Array) #3 [internal function]: Zend_View_Abstract->__call('action', Array) #4 D:\Server\xampp\htdocs\zendtest\application\layouts\master.phtml(20): Zend_View->action('catmenu', 'Blog_BlogCatego...') #5 D:\Server\xampp\htdocs\zendtest\library\Zend\View.php(108): include('D:\Server\xampp...') #6 D:\Server\xampp\htdocs\zendtest\library\Zend\View\Abstract.php(888): Zend_View->_run('D:\Server\xampp...') #7 D:\Ser in D:\Server\xampp\htdocs\zendtest\library\Zend\Controller\Plugin\Broker.php on line 336 
```

请帮帮我！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T01:10:13.850

Zend_View_Helper_Action 的语法是这样的：

`action( string $action, string $controller, string $module = null, array $params = array() ) : string`

所以你打电话的地方：

`$this->action('catmenu', 'Blog_BlogCategories');`

我假设您在“博客”模块中有一个类 Blog_BlogCategoriesController。您需要致电：

`$this->action('catmenu', 'BlogCategories', 'Blog');`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T00:55:59.100

我试图根据我的理解在下面制作一个脚本。您使用了 master.phtml 文件，您必须提到它的位置以及它与问题的关系。使用这些[http://framework.zend.com/manual/en/zend.tool.framework.clitool.html](http://framework.zend.com/manual/en/zend.tool.framework.clitool.html) 命令行来创建项目，然后是模块，然后是控制器和布局。

其余的在下面解释（希望这会有所帮助）

```
applicaiton
  -config
  -controller
    -IndexController.php
  -forms
  -layouts
    -scripts
      -layout.phtml
  -models
  -modules
    -Blog
      -contollers
        -IndexController.php
        -CateogoriesController.php
      -models
      -views
        -helpers
    -scripts
      -error
      -index
        -index.phtml
          -cateogories
            -index.php
  -views
    -helpers
    -scripts
      -error
      -index
        -index.phtml
      -partials
        -menu.phtml
  -Bootstrap.php 
```

**布局/脚本/layout.phtml**

```
<?php
$this->headMeta()->appendHttpEquiv('Content-Type', 'text/html;charset=utf-8');
$this->headTitle($this->headtitle);
echo $this->doctype(); 
?>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<?php echo $this->headMeta(); ?>
<?php echo $this->headTitle(); ?>
<body>
<!-- loading menu -->
<?php echo $this->partial('partials/menu.phtml', 'default'); ?>
<?php echo $this->layout()->content; ?>
</body>
</html> 
```

这是布局脚本，请注意 layout()->content 将加载您当前的视图文件，因此您不需要在这里更改任何内容，我称之为部分视图，它链接到默认模块的视图

**模块/博客/控制器/CateogoriesController.php**

```
<?php
class Blog_CateogoriesController extends Zend_Controller_Action
{
    public function init()
    {

    }
    //Default function
    public function indexAction()
    {
    }
} 
```

这是您的 Blog_CateogoriesController 类的基本结构

**模块/博客/视图/脚本/类别/index.phtml**

```
<div class="menu"></div>
<div class="contant"></div> 
```

你的基本页面布局

**视图/脚本/部分/menu.phtml**

```
<!-- menu -->
<ul> <li> </li> <ul> 
```

你的菜单 html 代码

# git - 将本地（现有）git repo 导入 Aptana 3

> ID：12291274
> 
> 赞同：3
> 
> 时间：2012-09-05T23:51:38.033
> 
> 标签：git, aptana

我已经安装了 Git，使用 Notepad++ 编辑了文件，并使用 GitBash 在一些本地存储库中提交了我的更改。其中一些发布到 GitHub，一些是从项目站点克隆的。但是现在，Notepad++ 已经不再令人满意了。

所以，我正试图让 Aptana 工作。当然，我想将现有的 git 存储库用作未来项目。*但是我该怎么做呢？*git 导入向导（File->Import->Git Repository as new Project）似乎将 repo 克隆到一个我不想要的新项目文件夹中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T14:39:23.940

您只需使用现有项目文件夹在 Aptana Studio 中创建一个新项目。假设您有一个驻留在`project_folder`.

1.  如果您不确定任何事情，请先备份您的项目。
2.  转至`File -> New -> Choose the type of project you wan`_
3.  在询问详细信息的弹出窗口中，`Location`将 指向现有项目，在这种情况下`/some_path/project_folder`
4.  创建一个新项目将`.project`在您的项目文件夹中生成一个文件，因此您可能希望将其放入其中，`.gitignore`以免它被推送到中央仓库。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-07-25T18:14:29.487

我被困了一分钟，但我找到了一个简单的解决方案，不需要额外的插件等。

在 Windows（可能还有其他操作系统）上：如果您要导入本地或映射驱动器上托管的存储库，请尝试`File -> Import -> Git -> Git Repository as New Project`. 单击`Next`并插入`URI`. 一个例子是`file:///O:/projects/sharedproject.git`。

这应该将 repo 克隆到您的工作区中，并且 Git 已经初始化。

* * *

发布后我意识到我发布了错误的问题，但也许有人会发现这很有用。希望这可以帮助。

# objective-c - NSKeyedArchiver 因 CLLocationCoordinate2D 结构而失败。为什么？

> ID：12291279
> 
> 赞同：9
> 
> 时间：2012-09-05T23:52:25.473
> 
> 标签：objective-c, ios, nskeyedarchiver

我不明白为什么我可以存档`CGPoint`结构而不是`CLLocationCoordinate2D`结构。归档器有什么区别？

平台是iOS。我在模拟器中运行，还没有在设备上尝试过。

```
// why does this work:
NSMutableArray *points = [[[NSMutableArray alloc] init] autorelease];
CGPoint p = CGPointMake(10, 11);
[points addObject:[NSValue valueWithBytes: &p objCType: @encode(CGPoint)]];
[NSKeyedArchiver archiveRootObject:points toFile: @"/Volumes/Macintosh HD 2/points.bin" ];

// and this doesnt work:
NSMutableArray *coords = [[[NSMutableArray alloc] init] autorelease];
CLLocationCoordinate2D c = CLLocationCoordinate2DMake(121, 41);
[coords addObject:[NSValue valueWithBytes: &c objCType: @encode(CLLocationCoordinate2D)]];
[NSKeyedArchiver archiveRootObject:coords toFile: @"/Volumes/Macintosh HD 2/coords.bin" ]; 
```

我在 2 日发生崩溃`archiveRootObject`，此消息被打印到控制台：

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** -[NSKeyedArchiver encodeValueOfObjCType:at:]: this archiver cannot encode structs' 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-06T02:04:17.310

好的，汤姆，你准备好迎接极客了吗？在这个年轻的whippersnappers世界里，我是一个“老”的人。然而，我记得一些关于 C 的事情，而且我只是一个内心的极客。

无论如何，这之间有一个微妙的区别：

```
typedef struct { double d1, d2; } Foo1; 
```

还有这个：

```
typedef struct Foo2 { double d1, d2; } Foo2; 
```

第一个是匿名结构的类型别名。第二个是 的类型别名`struct Foo2`。

现在，文档`@encode`说明如下：

```
typedef struct example {
    id   anObject;
    char *aString;
    int  anInt;
} Example; 
```

将导致`{example=@*i}`两者`@encode(example)`或`@encode(Example)`。因此，这意味着`@encode`正在使用实际的 struct 标签。对于为匿名结构创建别名的 typedef，它看起来`@encode`总是返回`?`'

看一下这个：

```
NSLog(@"Foo1: %s", @encode(Foo1));
NSLog(@"Foo2: %s", @encode(Foo2)); 
```

无论如何，你能猜到 CLLocationCoordinate2D 是如何定义的吗？是的。你猜到了。

```
typedef struct {
CLLocationDegrees latitude;
CLLocationDegrees longitude;
} CLLocationCoordinate2D; 
```

我认为您应该就此提交错误报告。要么`@encode`是因为它不使用匿名结构的别名类型定义而被破坏，要么是 CLLocationCoordinate2D 需要完全类型化，因此它不是匿名结构。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-25T10:26:16.793

要在修复错误之前绕过此限制，只需分解坐标并重建：

```
- (void)encodeWithCoder:(NSCoder *)coder
{
    NSNumber *latitude = [NSNumber numberWithDouble:self.coordinate.latitude];
    NSNumber *longitude = [NSNumber numberWithDouble:self.coordinate.longitude];
    [coder encodeObject:latitude forKey:@"latitude"];
    [coder encodeObject:longitude forKey:@"longitude"];
    ...

- (id)initWithCoder:(NSCoder *)decoder
{
    CLLocationDegrees latitude = (CLLocationDegrees)[(NSNumber*)[decoder decodeObjectForKey:@"latitude"] doubleValue];
    CLLocationDegrees longitude = (CLLocationDegrees)[(NSNumber*)[decoder decodeObjectForKey:@"longitude"] doubleValue];
    CLLocationCoordinate2D coordinate = (CLLocationCoordinate2D) { latitude, longitude };
    ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T00:09:06.927

这是因为`@encode`CLLocationCoordinate2D 阻塞

`NSLog(@"coords %@; type: %s", coords, @encode(CLLocationCoordinate2D));`产量`coords ( "<00000000 00405e40 00000000 00804440>" ); type: {?=dd}`

# asp.net - Storing large amounts of data locally

> ID：12291281
> 
> 赞同：3
> 
> 时间：2012-09-05T23:53:06.330
> 
> 标签：asp.net, memory-management

I'm experienced with ASP.NET but some of my knowledge is a little shaky. I'm creating an application that uses services to get large portions of data. I then want to filter it with LINQ to what I need. This data rarely changes, but I know there's too much of it to fit in Session.

How can I store rarely-changing , large amounts of data in memory? Would this be suitable for Application variables?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T00:02:55.540

You can store large amounts of fairly static data:

*   In the [HttpContext.Cache](http://msdn.microsoft.com/en-us/library/system.web.httpcontext.cache.aspx)
*   In a private static field of a C# class. Wrap the variable with an public get property that can initialize the static field. The static field will need to be initialized when the app first starts, and any time the app domain is recycled by IIS.

**HttpContext.Cache**

*Pro's*

*   Configurable cache expiration policy.
*   Designed specifically for the ASP.Net environment

*Con's*

*   Might be evoked from cache if ASP.Net determines [it is under-utilized](http://msdn.microsoft.com/en-us/library/system.web.caching.cacheitemremovedreason.aspx).

**Static Field**

*Pro's*

*   Complete user control over cache expiration.

*Con's*

*   Any cache expiration must be explicitly programmed. No built-in expiration support.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T02:00:05.570

Instead of caching the source data, consider using HTTP caching via ASP.NET Output Cache or memcached to store the rendered output itself. ASP.NET OutputCache can be tuned to work on specific ASP.NET resources and there are many ways to invalidate the cache explicitly if need be. See the following MSDN resources for more information.

[ASP.NET Caching Overview](http://msdn.microsoft.com/en-us/library/ms178597%28v=vs.100%29)

[Output Cache Configuration](http://msdn.microsoft.com/en-us/library/ms178606%28v=vs.100%29.aspx)

[OutputCache Attribute for ASP.NET MVC](http://msdn.microsoft.com/en-us/library/system.web.mvc.outputcacheattribute%28v=vs.108%29.aspx)

# php - 在html表中显示SQL表数据不起作用

> ID：12291283
> 
> 赞同：3
> 
> 时间：2012-09-05T23:53:23.857
> 
> 标签：php, html, sql, html-table

我正在尝试从 sql 表中查询和选择数据，然后在 html 中显示它。这是我的代码。

```
$result = mysqli_query($dbhandle, $query)
    or die(mysql_error().'<br>SQL:'.$query);
echo '<table style ="border:1px solid black;">';

while($row = mysqli_fetch_array($result)) {
    echo '<tr>';
    echo '<td style="border:1px solid black;">{$row['first_name']}</td>';
    echo '<td style="border:1px solid black;">{$row['last_name']}</td>';
    echo '<td style="border:1px solid black;">{$row['grade']}</td>';
    echo '<td style="border:1px solid black;">{$row['gpaP']}</td>';
    echo "<td style="border:1px solid black;">{$row['AGP']}</td>";
    echo "<td style="border:1px solid black;">{$row['awardP']}</td>";
    echo "<td style="border:1px solid black;">{$row['awardTP']}</td>";
    echo "<td style="border:1px solid black;">{$row['rigorP']}</td>";
    echo "<td style="border:1px solid black;">{$row['APP']}</td>";
    echo "<td style="border:1px solid black;">{$row['positionP']}</td>";
    echo "<td style="border:1px solid black;">{$row['hoursP']}</td>";
    echo "<td style="border:1px solid black;">{$row['selectionP']}</td>";
    echo "<td style="border:1px solid black;">{$row['activityTypeP']}</td>";
    echo "<td style="border:1px solid black;">{$row['activityYearsP']}</td>";
    echo "<td style="border:1px solid black;">{$row['date']}</td>";
    echo "<td style="border:1px solid black;">{$row['IP']}</td>";
    echo '</tr>';
}
echo '</table>'; 
```

它给了我一个错误，说 last_name 单元格中有一个意外的字符串。如果我从单元格中删除样式参数，它将起作用。有人指出我的错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T23:59:47.270

您的单双 quptes 在 PHP 和 HTML 之间混为一谈。修复它的最简单方法是使用 heredoc 语法：

```
echo <<<EOT
<tr>
<td style="border:1px solid black;">{$row['first_name']}</td>
<td style="border:1px solid black;">{$row['last_name']}</td>
<td style="border:1px solid black;">{$row['grade']}</td>
<td style="border:1px solid black;">{$row['gpaP']}</td>
<td style="border:1px solid black;">{$row['AGP']}</td>
<td style="border:1px solid black;">{$row['awardP']}</td>
<td style="border:1px solid black;">{$row['awardTP']}</td>
<td style="border:1px solid black;">{$row['rigorP']}</td>
<td style="border:1px solid black;">{$row['APP']}</td>
<td style="border:1px solid black;">{$row['positionP']}</td>
<td style="border:1px solid black;">{$row['hoursP']}</td>
<td style="border:1px solid black;">{$row['selectionP']}</td>
<td style="border:1px solid black;">{$row['activityTypeP']}</td>
<td style="border:1px solid black;">{$row['activityYearsP']}</td>
<td style="border:1px solid black;">{$row['date']}</td>
<td style="border:1px solid black;">{$row['IP']}</td>
</tr>
EOT; 
```

这种语法使它更容易，因为您可以同时使用单引号和双引号而不转义它们，并且将评估变量。此外，在您的原始代码中，不会对变量进行评估，因为它们位于单引号中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T23:57:29.910

您的代码混合了两种不同样式的引号，它们在 PHP 中都是有效的，并且都需要一些额外的转义。

您应该选择一种样式（用单引号括起来或用双引号括起来），然后确保在字符串中转义相同类型的引号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T23:55:28.937

您将单引号`'`与双引号混合在一起`""`。例如，如果您以 开始行，`"`然后在行尾*之前*再次使用它，则需要用 . 转义它`\"`。我的建议是让你坚持一种风格，并将其用于*所有*线条。例如，使用`""`：

```
 echo "<td style=\"border:1px solid black;\">{$row['first_name']}</td>";
  echo "<td style=\"border:1px solid black;\">{$row['IP']}</td>"; 
```

# jruby - Jruby rb 到 java 生成的类继承支持或变通方法

> ID：12291284
> 
> 赞同：4
> 
> 时间：2012-09-05T23:53:33.467
> 
> 标签：jruby

我正在试验 JRuby - 从 ruby​​ 文件生成 java。我在 ruby​​ 中有一个实现 Java 接口的抽象类，以及扩展它的子类。也在红宝石中。

我遇到了[http://jira.codehaus.org/browse/JRUBY-6342](http://jira.codehaus.org/browse/JRUBY-6342)中描述的问题，其中所有生成的 java 文件仅扩展 RubyObject。

我想知道是否有其他人遇到过这种情况并有解决方法？现在我在每个子类中都使用了 java_implement 接口，因为它们没有扩展抽象类。

我已经包含了 JRUBY-6342 中描述问题的片段：

> jrubyc --java 生成的 Java 代码似乎不支持 Ruby 类继承。给出以下简单示例：
> 
> A类定义my_class；self.class.name end end
> 
> B类<A结束
> 
> B.java 中生成的类继承自 RubyObject 而不是 A，使得 B 类在 Java 中完全被破坏。在一些相关的说明中，模块包含似乎也不起作用。包含 M 的类不会在生成的 Java 代码中获取 M 的方法。

我对 Ruby 或 JRuby 的理解是否遗漏了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T13:17:17.723

这仍然是一个问题，因为 jruby 编译器[仍然为类生成 RubyObject](https://github.com/jruby/jruby/blob/master/lib/ruby/shared/jruby/compiler/java_class.rb#L464)。

我知道的唯一解决方法是使用`ScriptEngine`Java 中的 JRuby 来评估您的 JRuby 代码。例如，下面是一些 JRuby 代码：

```
require 'java'

java_import 'javax.swing.JFrame'
java_import 'javax.swing.JButton'

class MyFrame < JFrame
  def initialize
    super('Test')
    content_pane.add(JButton.new("Hello"))
    pack()
  end
end 
```

然后可以从这样的 Java 类调用此代码：

```
import javax.swing.JFrame;

import javax.script.*;
import java.io.*;

public class Main {
    public static void main(String[] args) throws Exception {

    ScriptEngineManager manager = new ScriptEngineManager();
        ScriptEngine engine = manager.getEngineByName("jruby");
        Reader reader = new FileReader("myframe.rb");
        engine.eval(reader);

        // Instantiate the JRuby class, and cast the result of eval.
        JFrame frame = (JFrame) engine.eval("MyFrame.new");
        frame.setVisible(true);
    }
} 
```

在这里，由返回的对象`eval`可以转换为`JFrame`，正如您所期望的那样。有关该问题，另请参阅[此](https://stackoverflow.com/questions/5721134/is-it-possible-to-create-java-classes-from-jruby-and-use-them-in-java)问题。

# uinavigationcontroller - 奇怪的 UINavigationController 和 UIPopOverController 行为

> ID：12291286
> 
> 赞同：1
> 
> 时间：2012-09-05T23:54:09.903
> 
> 标签：uinavigationcontroller, uipopover

我正在用我的视图控制器呈现一个弹出框：

```
 UIBarButtonItem *barButton = (UIBarButtonItem*)sender;
     SettingsViewController *settingsViewController = [[SettingsViewController alloc]      initWithNibName:nil bundle:nil];
     [self presentPopoverFromBarButtonItem:barButton andController:settingsViewController andSize:CGSizeMake(RECT_POPOVER_SETTINGS.size.width, RECT_POPOVER_SETTINGS.size.height)]; 
```

在这个视图控制器内部，我有一个按钮可以推动另一个视图控制器。

```
AnotherViewController *anotherViewController = [[AnotherViewController alloc] initWithNibName:nil bundle:nil];
[self.navigationController pushViewController:anotherViewController animated:YES]; 
```

现在在这个视图控制器中我有一个动作，当它完成后我会这样做：

```
 [self.navigationController popViewControllerAnimated:YES]; 
```

现在奇怪的行为是，当我弹出视图控制器时，

```
viewWillAppear 
```

方法在 SettingsViewController 中被调用，然后断点返回到我的 anotherViewController 中的 pop 方法。

这是一个通用应用程序，所以我在 iPhone 上使用相同的设置，但没有初始 UIPopOverController。这在 iPhone 中运行正常（没有弹出框，首先调用 pop 方法，然后调用 viewWillAppear），但在 iPad 上，首先调用 viewWillAppear，然后调用 pop。

所以我的问题是，有人可以解释为什么会这样吗？

谢谢。

# r - 绘图命令无法识别列名

> ID：12291289
> 
> 赞同：0
> 
> 时间：2012-09-05T23:54:44.727
> 
> 标签：r

最近，当我尝试在 RI 中绘图时，不断收到此错误。谁能告诉我为什么我似乎不能做散点图？我在下面粘贴了终端屏幕。

```
tcmg2o4 <-read.table("~/Documents/research/metal.oxides/TcMg2O4.inverse/energydata.txt")

tcmg2o4
                 V1            V2
1  Lattice_constant  Total_energy
2               8.0 -371.63306746
3               8.1   -375.035492
4               8.2  -378.8669067
5               8.3 -380.34136459
6               8.4  -382.3921237
7               8.5 -383.60394736
8               8.6 -384.09517631
9               8.7 -383.77668067
10              8.8 -382.43806866
11              8.9 -381.42213458
12              9.0 -379.63327976

attach(tcmg2o4)
plot(Lattice_constant, Total_energy)

Error in plot(Lattice_constant, Total_energy) : 
object 'Lattice_constant' not found

plot(V1,V2) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T00:06:21.757

您的问题是您没有将列名作为列名读取。做这个使用 `header = T`

```
 tcmg2o4 <-read.table("~/Documents/research/metal.oxides/TcMg2O4.inverse/energydata.txt", header = T) 
```

在您的情况下，`read.table`调用创建了列名`V1`，`V2`并且这些列都将是因子变量。

您可以通过以下方式检查读入对象的结构

```
str(tcmg2o4)
## 'data.frame':    11 obs. of  2 variables:
##  $ Lattice_constant: num  8 8.1 8.2 8.3 8.4 8.5 8.6 8.7 8.8 8.9 ...
##  $ Total_energy    : num  -372 -375 -379 -380 -382 ... 
```

我也会避免使用`attach`

而是使用`with`或

```
with(tcmg2o4, plot(Lattice_constant, Total_energy)) 
```

或者它是一个 2 列 data.frame 的事实

```
plot(tcmg2o4) 
```

或使用 a`formula`指定您的 x 和 y 轴 ( `y~x`)

```
plot(Total_energy ~ Lattice_constant, data = tcmg2o4) 
```

这都会给出相同的结果，并且更清楚数据的存储位置

![在此处输入图像描述](../Images/05563bfa24f1c5b687cd3d4d0a5df504.png)

# bash - 启动可执行文件并在运行时向其发送信号

> ID：12291290
> 
> 赞同：0
> 
> 时间：2012-09-05T23:54:46.617
> 
> 标签：bash, signals

我需要一个运行'A'的脚本并向它发送一个应该终止它的信号，我需要用不同的信号对其进行迭代，所以我想要的基本上是

```
Launch A ->
send signal S to terminate A and check stuff ->
Relaunch A ->
send signal S1 ...... 
```

我的问题是，在 A 我有一个循环，如：

```
while(1){
    scanf()
    ...DO STUFF...
} 
```

所以使用像这样的脚本

```
./A arguments
kill -s QUIT A'sPid 
```

不会起作用，因为显然它不会在 A 结束之前到达杀戮线，而且它不会没有信号或用户输入。

你能给我任何提示吗？谢谢，如果这是一个平庸的问题，我很抱歉，但我刚刚开始学习这些东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T00:13:56.903

您需要将`A`实例置于后台（参见[this](http://en.wikipedia.org/wiki/Background_process)），以便在它运行时您可以执行其他操作，即使用`kill`.

后台进程放一个`&`在最后，即：

```
./A arguments & 
```

启动后台进程后，脚本将继续执行下一个命令。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T00:18:43.640

```
SIGNAL=yourSignal
while [ condition ] ; do
   ./a.out &
   PID=$!
   kill -s $SIGNAL $PID
done 
```

# python - Python 读取我的 Outlook 邮箱并解析邮件

> ID：12291294
> 
> 赞同：12
> 
> 时间：2012-09-05T23:55:11.687
> 
> 标签：python, outlook, mapi, win32com, imaplib

> **可能重复：**
> [通过 MAPI 使用 Python 从 Outlook 读取电子邮件](https://stackoverflow.com/questions/5077625/reading-e-mails-from-outlook-with-python-through-mapi)

我对 Python 完全陌生，并且被赋予了编写一个连接到我的 Microsoft Outlook 邮箱的程序的任务，通过所有电子邮件，如果主题有某个单词，那么电子邮件时间和主题的详细信息将被保存在变量中，以及电子邮件消息正文将被解析并将相关信息存储在变量中。然后此信息将存储在外部服务器/数据库中。它还需要能够监控进入我邮箱的任何新电子邮件，并重复检查主题行并采取适当措施的练习。

我之前使用 Interop 库在 C# 中编写了完全相同类型的程序，但现在需要在 Python 中执行此操作。我可以通过稍后阅读模块文档来弄清楚细节，但从高层次的角度来看，我应该使用哪些模块。我一直在做研究，其中提到的一些模块包括电子邮件、procmail 和 imaplib，但是这里的 Python 资深人士对我正在超越的那种项目有什么建议？

提前感谢您提供的任何帮助！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-09T19:33:17.803

在我工作的一家公司，我们有一个邮箱用于向包含“成人”材料的网站提供建议，还有一个邮箱用于发送应该被阻止的垃圾邮件。一旦我开始工作，我就“负责”这些“优雅”的工作。检查一下，有 2000 封未读邮件要阻止，还有 4000 封垃圾邮件要阻止。当然，这是一个需要自动化的功能，我为自己寻找了一个好的解决方案。我做了什么：

[1] 使用 python IMAP 连接到 Exchange 服务器 [2] 使用 beatifulsoup (python) 解析电子邮件中的 href 值 [3] 之后发送电子邮件“感谢”用户的协作（非常重要）

三天后，我的老板感谢了我的巨大努力，我回复了所有的电子邮件并得到了称赞。因为现在我们正在回复客户。（不是我的剧本）

好的。现在让我们做一个计划

1.  检查 imap python 模块 [1]，然后使用 ssl imap4 [4] 学习一个教程
2.  决定什么最适合您的问题？下载电子邮件 (pop3) 或在服务器 (IMAP) 上搜索和浏览。
3.  检查您是否可以使用 IMAP4 或 POP3 协议进行连接之前，交换在这部分有错误，请也检查此错误报告 [3]
4.  好的，您确定可以使用 IMAP4 或 POP3 进行连接，现在获取一条消息并使用 beatiful soup 或 lxml 解析它。（我的情况是我寻找 href 和 'mailto:'）
5.  使用字段“发件人：”发送一个很好的消息，使其成为个人的电子邮件
6.  利润

[1] google it imap python

[2] google it BeautifulSoup python

[3] [http://support.microsoft.com/kb/296387](http://support.microsoft.com/kb/296387)

[4] [http://yuji.wordpress.com/2011/06/22/python-imaplib-imap-example-with-gmail/](http://yuji.wordpress.com/2011/06/22/python-imaplib-imap-example-with-gmail/)

抱歉，由于我的分数低，我不得不提供谷歌网址。

我希望这个答案能为您的解决方案提供一些好的指导。当然，您可以使用 lxml 使其更 hax0r，将数据发送到数据库。但是在您连接并开始操作之后，您可以做任何事情:)

# jquery - 图像内的 JQuery 边框

> ID：12291295
> 
> 赞同：0
> 
> 时间：2012-09-05T23:55:21.557
> 
> 标签：jquery, css

我有一个像这样的图像滑块：

```
<div class="bx-wrapper" style="width:516px; position:relative;">
    <div class="bx-window" style="position:relative; overflow:hidden; width:516px;">
        <ul style="width: 999999px; position: relative; left: -516px;">
            <li style="width: 129px; float: left; list-style: none outside none; height:68px; margin-top:3px">
                <a href="javascript:void(0)" id="p_5">
                    <img src="question_pliki/5.png" alt="">
                </a>
            </li>
            <!--... many more <li> elements-->
        </ul>
    </div>
</div> 
```

我想要做的是在活动图像上做一个边框，我有这个 JQuery 脚本：

```
$('.bx-window ul li').click(function(){
    $(this).parent().find('li').css('border','none');
    $(this).css('border','5px solid #f28458');
}); 
```

它在图像之外创建了一个边框，并破坏了我的布局。

是否可以在图像内部制作边框？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T00:25:14.713

您可以`box-sizing`将元素上的 更改为`border-box`。这将允许边界在里面。

```
.bx-window ul li {
    -webkit-box-sizing: border-box; /* Safari/Chrome, other WebKit */
    -moz-box-sizing: border-box;    /* Firefox, other Gecko */
    box-sizing: border-box;         /* Opera/IE 8+ */
} 
```

# math - 绕 x,y,z 轴旋转模型，无万向节锁定，输入数据始终为 x,y,z 轴角度旋转

> ID：12291299
> 
> 赞同：4
> 
> 时间：2012-09-05T23:55:37.303
> 
> 标签：math, graphics, 3d, rotation, quaternions

我有一个输入设备，它给了我 3 个角度——围绕 x、y、z 轴旋转。

现在我需要使用这些角度来旋转 3D 空间，没有万向节锁定。我以为我可以转换为四元数，但[显然因为我以 3 个角度获取数据，这无济于事](https://stackoverflow.com/questions/6325689/rotate-3d-euler-point-using-quaternions-to-avoid-gimbal-lock)吗？

如果是这种情况，我该如何正确旋转空间，请记住我的输入数据只是 x、y、z 轴旋转角度，所以我不能只是“避免”它。同样，围绕轴旋转的顺序移动也无济于事——无论如何，所有轴都将被使用，因此改变顺序不会完成任何事情。但肯定有办法做到这一点吗？

如果有帮助，问题几乎可以归结为实现此功能：

```
void generateVectorsFromAngles(double &lastXRotation,
                                                      double &lastYRotation,
                                                      double &lastZRotation,
                                                      JD::Vector &up,
                                                      JD::Vector &viewing) {
    JD::Vector yaxis = JD::Vector(0,0,1);
    JD::Vector zaxis = JD::Vector(0,1,0);
    JD::Vector xaxis = JD::Vector(1,0,0);
    up.rotate(xaxis, lastXRotation);
    up.rotate(yaxis, lastYRotation);
    up.rotate(zaxis, lastZRotation);
    viewing.rotate(xaxis, lastXRotation);
    viewing.rotate(yaxis, lastYRotation);
    viewing.rotate(zaxis, lastZRotation);
} 
```

以一种避免万向节锁定的方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T20:25:38.877

如果您的设备为您提供绝对 X/Y/Z 角度（这意味着类似于实际的万向节），它将有一些特定的顺序来描述旋转发生的顺序。

既然您说“顺序无关紧要”，这表明您的设备类似于（几乎可以肯定？）一个 3 轴速率陀螺仪，并且您正在获得差分角度。在这种情况下，您希望将 3 个微分角度组合成一个旋转向量，并使用它来更新方向四元数，如下所示：

```
given differential angles (in radians):
  dXrot, dYrot, dZrot

and current orientation quaternion Q such that:
  {r=0, ijk=rot(v)} = Q {r=0, ijk=v} Q*

construct an update quaternion:
  dQ = {r=1, i=dXrot/2, j=dYrot/2, k=dZrot/2}

and update your orientation:
  Q' = normalize( quaternion_multiply(dQ, Q) ) 
```

请注意，dQ 只是单位四元数的粗略近似（这使得`normalize()`操作比平时更重要）。但是，如果您的微分角度不大，它实际上是一个*很好*的近似值。即使您的微分角度*很大*，这种简单的近似也比您可以做的许多其他事情少废话。如果您遇到大微分角度的问题，您可以尝试添加二次校正以提高您的准确性（如第三部分所述）。

然而，一个更可能的问题是，*任何*像这样的重复更新往往会漂移，如果没有别的，仅仅是因为累积的算术错误。此外，您的物理传感器会有偏差 - 例如，您的速率陀螺仪会有偏移，如果不进行校正，将导致您的方向估计`Q`缓慢进动。如果这种漂移对您的应用程序很重要，那么如果您想维护一个稳定的系统，您将需要一些方法来检测/纠正它。

* * *

如果您确实遇到了大微分角的问题，那么可以使用三角公式来计算精确的更新四元数`dQ`。假设是总旋转角度应该与输入向量的大小成线性比例；鉴于此，您可以计算一个精确的更新四元数，如下所示：

```
given differential half-angle vector (in radians):
  dV = (dXrot, dYrot, dZrot)/2

compute the magnitude of the half-angle vector:
  theta = |dV| = 0.5 * sqrt(dXrot^2 + dYrot^2 + dZrot^2)

then the update quaternion, as used above, is:
  dQ = {r=cos(theta), ijk=dV*sin(theta)/theta}
     = {r=cos(theta), ijk=normalize(dV)*sin(theta)} 
```

请注意，直接计算`sin(theta)/theta`or 或`normalize(dV)`is 是接近零的奇异值，但接近零的向量的极限值`ijk`很简单`ijk = dV = (dXrot,dYrot,dZrot)`，如第一节的近似值。如果你确实以这种方式计算你的更新四元数，直接的方法是检查这一点，并使用 small 的近似值`theta`（它是一个*非常*好的近似值！）。

* * *

`cos(theta)`最后，另一种方法是对和使用泰勒展开`sin(theta)/theta`。这是一种中间方法——一种改进的近似值，可以增加精度范围：

```
cos(x)    ~  1 - x^2/2 + x^4/24 - x^6/720 ...
sin(x)/x  ~  1 - x^2/6 + x^4/120 - x^6/5040 ... 
```

所以，第一节中提到的“二次校正”是：

```
dQ = {r=1-theta*theta*(1.0/2), ijk=dV*(1-theta*theta*(1.0/6))}
Q' = normalize( quaternion_multiply(dQ, Q) ) 
```

附加项将扩展近似值的精确范围，但如果每次更新需要超过 +/-90 度，您可能应该使用第二部分中描述的精确三角函数。您还可以将泰勒展开式与精确三角解结合使用——通过允许您在近似值和精确公式之间无缝切换可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T09:55:11.457

I think that the 'gimbal lock' is not a problem of computations/mathematics but rather a problem of some physical devices.

Given that you can represent **any** orientation with XYZ rotations, then even at the 'gimbal lock point' there **is** a XYZ representation for any imaginable orientation change. Your physical gimbal may be not able to rotate this way, but the mathematics still works :).

The only problem here is your input device - if it's gimbal then it can lock, but you didn't give any details on that.

* * *

EDIT: OK, so after you added a function I think I see what you need. The function is perfectly correct. But sadly, you just can't get a nice and easy, continuous way of orientation edition using XYZ axis rotations. I haven't seen such solution even in professional 3D packages.

The only thing that comes to my mind is to treat your input like a steering in aeroplane - you just have some initial orientation and you can rotate it around X, Y or Z axis by some amount. Then you store the new orientation and clear your inputs. Rotations in 3DMax/Maya/Blender are done the same way.

If you give us more info about real-world usage you want to achieve we may get some better ideas.

# java - 输出到Java中的文本文件

> ID：12291300
> 
> 赞同：0
> 
> 时间：2012-09-05T23:55:50.003
> 
> 标签：java, file

这是一个家庭作业，我必须编写一个程序来读取“input.txt”文件并查看打印称呼的次数（例如：Donald Duck, 4 所以它打印 Hello Donald Duck 四次） m 是将称呼输出到一个名为“output.txt”的文本文件中，由于某种原因，它只打印出 input.txt 中最后一行的称呼，而不是全部。这是我到目前为止所拥有的：

```
 import java.util.*;
   import java.io.*;

   public class Driver0 {

      public static void main (String [] args) {
         Scanner userInput = new Scanner(System.in);
         System.out.println("Would you like the output to be written to a file?");
         Scanner read;
         String input = userInput.nextLine(); //user input
         if(input.equals("yes")) {
            System.out.println("Writing to \"output.txt\" now..");
         }
         else {
            System.out.println("Printing to screen:"); 
         }        
            try {
            read = new Scanner(new File("input.txt")); //scanner reading file
            } 
            catch (FileNotFoundException e){
               System.out.println("File not found.");
               return;
            }
         while(read.hasNextLine()) {
            String newInput = read.nextLine();
            String [] inputArray = newInput.split(","); //spliting
            int num = 0;
            num = Integer.parseInt(inputArray[2].trim());
                for(int i = 0; i < num; i++) {
                if(input.equals("yes")) {  //writing to file 
                    Driver0.outputting(inputArray);
                  }
               else { //writing to screen
                  System.out.println("Hello" + inputArray[1] + inputArray[0]); 
               }
            } 
         }
      }
      public static void outputting (String [] inputArray) {
         PrintWriter output = null;
         String fileName = "output.txt";
            try {
            output = new PrintWriter(new FileWriter(fileName)); 
            } 
            catch(IOException error){
               System.out.println("Sorry, can't open for writing.");
               return;
            }
            output.println("Hello" + inputArray[1] + inputArray[0]);
                output.close();       
      } 
   } 
```

我的问题很可能在输出方法中，或者它有一条注释说写到它旁边的文件

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T00:07:25.237

每次通过`while`循环时，您都会创建一个新的[`PrintWriter`](http://docs.oracle.com/javase/6/docs/api/java/io/PrintWriter.html#print%28java.lang.String%29)，向其中写入一行，然后关闭它。这只是每次都覆盖文件。您可能应该只创建一个`PrintWriter`您保持打开*并附*加到它的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T00:09:37.483

该类`FileWriter`有[第二个构造函数](http://docs.oracle.com/javase/7/docs/api/java/io/FileWriter.html#FileWriter%28java.io.File,%20boolean%29)，它接受一个`boolean`参数来告诉它追加到现有文件的末尾，而不是从头开始覆盖它。

```
output = new PrintWriter(new FileWriter(fileName, true)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T00:08:51.260

这是因为您每次都在使用新的 PrintWriter 创建一个新文件。

对您的解决方案的最小更改，快速修复将是（**尽管您的代码中还存在许多设计问题**）：

```
import java.util.*;
import java.io.*;

public class Driver0 {

  public static void main (String [] args) {
     Scanner userInput = new Scanner(System.in);
     System.out.println("Would you like the output to be written to a file?");
     Scanner read;
     String input = userInput.nextLine(); //user input
     if(input.equals("yes")) {
        System.out.println("Writing to \"output.txt\" now..");
     }
     else {
        System.out.println("Printing to screen:"); 
     }        
        try {
        read = new Scanner(new File("input.txt")); //scanner reading file
        } 
        catch (FileNotFoundException e){
           System.out.println("File not found.");
           return;
        }
        ////////////////////////
        PrintWriter output;
        String fileName = "output.txt";
        try {
        output = new PrintWriter(new FileWriter(fileName)); 
        } 
        catch(IOException error){
           System.out.println("Sorry, can't open for writing.");
           return;
        }
        ////////////////////////
     while(read.hasNextLine()) {
        String newInput = read.nextLine();
        String [] inputArray = newInput.split(","); //spliting
        int num = 0;
        num = Integer.parseInt(inputArray[2].trim());
            for(int i = 0; i < num; i++) {
            if(input.equals("yes")) {  //writing to file 
                Driver0.outputting(output,inputArray);
              }
           else { //writing to screen
              System.out.println("Hello" + inputArray[1] + inputArray[0]); 
           }
        } 
     }
     ///////////////////////////////
     output.close();       
     ///////////////////////////////
  }
  public static void outputting (PrintWriter output,String [] inputArray) {
        output.println("Hello" + inputArray[1] + inputArray[0]);
  } 
} 
```

# java - TextArea - 有什么方法可以获取所有文本？

> ID：12291303
> 
> 赞同：0
> 
> 时间：2012-09-05T23:56:27.283
> 
> 标签：java, text, file-io, save, editor

所以我正在设计一个文本编辑器。对于打开/保存方法，我正在尝试使用 TextArea（它不必是一个，它只是我当前的方法）。现在，我现在有两个问题：

1）当我加载一个文件时，它当前不会删除文本编辑器中当前的内容。例如，如果我输入“Owl”，然后加载一个包含“Rat”的文件，它最终会变成“OwlRat”。为了解决这个问题，我计划使用 replaceRange 方法（然而，它不是绝对的，任何建议都会很棒！）。但是，我必须替换文本编辑器的所有内容，而不仅仅是选定的文本，而且我不知道该怎么做。有小费吗？

2) 目前，当我加载文件时，除非我在运行应用程序的同时保存该文件，否则什么都不会发生。因此，例如，运行程序、保存文件、关闭程序、再次运行程序，然后加载文件将一无所获。我知道这是因为 String x 没有结转，但无论如何我都想不出修复它。有人建议使用 Vectors，但我看不出它们有什么帮助...

以下是打开/保存方法的代码：

打开：

```
public void Open(String name){    
    File textFile = new File(name + ".txt.");
      BufferedReader reader = null;  
      try 
      {  
         textArea.append(x);
         reader = new BufferedReader( new FileReader( textFile));  
         reader.read();  
     }  
      catch ( IOException e)  
      {  
     }  
      finally 
     {  
         try 
          {  
             if (reader != null)  
                 reader.close();  
         }  
        catch (IOException e)  
         {                     
         }  
     }  
 } 
```

节省：

```
public void Save(String name){   
File textFile = new File(name + ".txt");
BufferedWriter writer = null;   
try  
{   
    writer = new BufferedWriter( new FileWriter(textFile));   
    writer.write(name);
    x = textArea.getText();

}   
catch ( IOException e)   
{   
}   
finally  
{   
   try  
  {   
           if ( writer != null)   
                    writer.close( );   
   }   
    catch ( IOException e)   
    {   
   }   
}  
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-01T02:28:09.580

我的男朋友也遇到了同样的问题，经过深思熟虑和研究，我什至找到了解决方案。

可以使用ArrayList把TextArea的所有内容都放上来，调用save作为参数发送，因为作者只是写了string行，那么我们用“for”一行一行的写我们的ArrayList，最后我们就可以了txt 文件中的内容 TextArea。如果有些事情没有意义，我很抱歉是谷歌翻译和我不会说英语。

观看Windows记事本，它不会总是跳行，并且显示在一行中，使用写字板可以。

* * *

私人无效SaveActionPerformed（java.awt.event.ActionEvent evt）{

```
 String NameFile = Name.getText();
    ArrayList< String > Text = new ArrayList< String >();

    Text.add(TextArea.getText());

    SaveFile(NameFile, Text);
} 
```

* * *

公共无效保存文件（字符串名称，ArrayList<字符串>消息）{

```
 path = "C:\\Users\\Paulo Brito\\Desktop\\" + name + ".txt";

    File file1 = new File(path);

    try {

        if (!file1.exists()) {

            file1.createNewFile();
        }

        File[] files = file1.listFiles();

        FileWriter fw = new FileWriter(file1, true);

        BufferedWriter bw = new BufferedWriter(fw);

        for (int i = 0; i < message.size(); i++) {

            bw.write(message.get(i));
            bw.newLine();
        }

        bw.close();
        fw.close();

        FileReader fr = new FileReader(file1);

        BufferedReader br = new BufferedReader(fr);

        fw = new FileWriter(file1, true);

        bw = new BufferedWriter(fw);

        while (br.ready()) {

            String line = br.readLine();

            System.out.println(line);

            bw.write(line);
            bw.newLine();

        }
        br.close();
        fr.close();

    } catch (IOException ex) {
        ex.printStackTrace();
        JOptionPane.showMessageDialog(null, "Error in" + ex);        
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T00:29:29.280

使用`textArea.setText(TEXT);`而不是附加；append 表示添加到，因此当您将文本附加到 TextArea 时，您将该文本添加到其中。另一方面，setText 将设置文本，用新文本替换旧文本（这是你想要的）。

至于为什么它无法阅读，你没有正确阅读。首先，`.read()`只读取一个字符（不是你想要的）。其次，您似乎没有对返回的结果做任何事情。去某个地方（比如[这里](https://stackoverflow.com/questions/4716503/best-way-to-read-a-text-file)）找出如何正确读取文件，然后获取返回的字符串并执行`textArea.setText(readString);`.

就像其他人说的那样，`e.printStackTrace();`在所有 catch 块中使用以使错误实际显示在控制台中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T00:26:00.767

这里发生了很多事情...

1.  什么是“x”（提示：它不是文件中的任何内容！），为什么要将它附加到文本区域？
2.  BufferedReader.read() 返回一个字符，这可能不是您所期望的。尝试遍历 readline()。
3.  遵循 Dave Newton 的建议来处理您的异常并为您的变量提供更好的名称。
4.  文本文件将在程序的多次调用中持续存在，因此缺少数据与此无关。

祝你好运。

# nginx - 如何在 Nginx 中找到 bytes_in？

> ID：12291310
> 
> 赞同：0
> 
> 时间：2012-09-05T23:57:26.183
> 
> 标签：nginx

我正在使用这个模块[https://github.com/Lax/ngx_http_accounting_module](https://github.com/Lax/ngx_http_accounting_module)来计算 nginx 请求计数和字节输出

我可以看到 bytes_out 在代码中使用并且工作正常。

代码片段：ngx_http_accounting_handler(ngx_http_request_t *r){ .. stats->bytes_out += r->connection->sent; }

但是如何计算bytes_in？任何线索？我检查了 ngx_http_request_s & ngx_connection_s 有“发送”数据但没有接收数据。任何建议都会非常有帮助

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T08:04:18.517

使用 r->request_length，就像在 nginx 核心中为[$request_length](http://nginx.org/r/log_format)日志模块变量所做的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-14T11:09:40.280

我已经更新`ngx_http_accounting_module`，添加`bytes_in support`。

的原始版本（v0.1）`ngx_http_accounting_module`没有实现`bytes_in`。

在 v0.2 中，此值被添加到 stats 变量中。

```
 stats->nr_requests += 1;
+    stats->bytes_in += r->request_length;
     stats->bytes_out += r->connection->sent; 
```

输出格式更改为以下代码，添加`bytes_in:`到输出缓冲区。

```
-    sprintf(output_buffer, "pid:%i|from:%ld|to:%ld|accounting_id:%s|requests:%ld|bytes_out:%ld",
+    sprintf(output_buffer, "pid:%i|from:%ld|to:%ld|accounting_id:%s|requests:%ld|bytes_in:%ld|bytes_out:%ld",
                 ngx_getpid(),
                 ngx_http_accounting_old_time,
                 ngx_http_accounting_new_time,
                 name,
                 stats->nr_requests,
+                stats->bytes_in,
                 stats->bytes_out
             ); 
```

有关更多详细信息，请参见此处：[https](https://github.com/Lax/ngx_http_accounting_module/tree/v0.2) ://github.com/Lax/ngx_http_accounting_module/tree/v0.2 。

谢谢马克西姆杜宁！

# c++ - 无法从 glGetShaderInfoLog 检索错误消息

> ID：12291314
> 
> 赞同：4
> 
> 时间：2012-09-05T23:58:04.587
> 
> 标签：c++, macos, opengl, shader, nsopenglview

我正在尝试构建一个由单个片段着色器组成的简单 OpenGL 3.2 程序，但我似乎无法实际编译着色器。我相当确定我的着色器语法是正确的，但即使不是，我也无法使用`glGetShaderInfoLog`.

我开发了一个简短的程序来展示这一点：

```
GLuint shader = glCreateShader(GL_FRAGMENT_SHADER);

const char *shaderData =
            "#version 120\n"
            "void main()\n"
            "{\n"
            "    gl_FragColor = gl_Color;\n"
            "}\n";
glShaderSource(shader, 1, &shaderData, NULL);

GLint status;
glGetShaderiv(shader, GL_COMPILE_STATUS, &status);

if (status == GL_FALSE)
{
    GLint infoLogLength;
    glGetShaderiv(shader, GL_INFO_LOG_LENGTH, &infoLogLength);

    GLchar* strInfoLog = new GLchar[infoLogLength + 1];
    glGetShaderInfoLog(shader, infoLogLength, NULL, strInfoLog);

    fprintf(stderr, "Compilation error in shader %s: %s\n", this->name, strInfoLog);
    delete[] strInfoLog;
} 
```

这会产生以下消息：

> 着色器片段着色器中的编译错误：

问题似乎是每次`getShaderiv`检索`GL_INFO_LOG_LENGTH`值的调用都返回 0，因此我分配了一个空字符串。我已经尝试将此值硬编码为 100，但我仍然没有从`getShaderInfoLog`.

我在这里关心的不是修复着色器（如果错误我可以自己修复），而是获取调试信息。我知道这是可以做到的，因为我曾经使用[Shader Maker](http://cg.in.tu-clausthal.de/teaching/shader_maker/index.shtml)简单地开发过着色器，并且能够得到非常详细的调试信息。例如：

> `ERROR: 0:11: 'undefined_variable' : syntax error syntax error`

除非 Shader Marker 在内部有自己的验证工具，否则我确信它必须使用我尝试使用的相同方法。我在互联网上看到了几个示例，其中人们以相同的方式检索着色器的错误消息，所以我相当确定我做得正确。

现在，我收到了一个编译时警告，它可能解释了这个问题：

> `#warning gl.h and gl3.h are both included. Compiler will not invoke errors if using removed OpenGL functionality.`

进行全文搜索后，我找不到任何我调用的地方`#include <OpenGL/gl.h>`，所以我猜测这个标题被其中一个`NSOpenGL*`类包含。我很确定我没有在这个短程序中使用任何已删除的功能，而且这个问题在 Google 上只有大约 5 次点击，但我想我还是最好提一下。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-06T00:30:18.673

正如之前的评论中所指出的，`glCompileShader`电话丢失了。

# android - Model-View-Presenter 和 Android 应用程序设计

> ID：12291316
> 
> 赞同：11
> 
> 时间：2012-09-05T23:58:17.037
> 
> 标签：android, design-patterns, android-layout

问题：非常大且复杂的 Activity 类。难以阅读/理解和修改。很难测试。

可能的解决方案：Model-View-Presenter（可能使用依赖注入）。和模拟测试对象！

我计划在我的 Android 应用程序中实现 Model-View-Presenter。这基本上是模型-视图-控制器的变体。本质上，让 Activity 成为一个美化的布局管理器，并将任何业务逻辑交给 Presenter。查看 Presenter 的另一种方式是，它就像在 Activity 中实例化的 Helper 类，通过提供 Presenter 可以使用的接口/回调的 Activity 来完成繁重的工作。

我想了解一些社区对此的看法。例如： this 隐含了哪些接口？
Model 和 View 与 Presenter 相比有什么责任。

对于 Presenter，我想 Activity 会实现 Presenter 所需的接口吗？
Presenter vs. Activity 应该包含哪些内容？

演示者会与活动一对一吗？如果一个 Activity 有多个显示不同小部件的片段，每个片段都有自己的适配器呢？我们现在需要多个演示者还是仍然只需要一个？

Presenter vs. Adapter 怎么样？

演示者应该如何关联说具有 ListView 和 ListViewAdapter 的 Activity？Presenter 与 Adapter 有什么关系？
Presenter 应该选择要使用的适配器吗？还是应该由 Activity 做出这个决定？Presenter 应该处理模型数据还是适配器？适配器和演示者之间是否存在冲突？适配器是演示者吗？或更少/更多的东西。通常适配器仅适用于 Activity 中的 ListViews 等小部件。我认为他们不会拨打获取数据本身的电话。

所以在模型-视图-展示器中，关键是真正决定展示器与其他类的内容以及展示器与活动、适配器和视图/包括片段之间的通信应该是什么。

Model-View-Presenter 对 Android 来说真的是个坏主意吗？或者它是否适合 Android 框架？

请记住，在 Android 之外还有许多非常成熟的 SDK 的示例，它们仍然需要像 MVP 这样的微架构。事实上例子比比皆是：例如。Flex 是非常成熟的 Flash SDK，但它仍然需要几乎所有主要应用程序的 MVP 和 MVC 框架。

EJB 需要 Spring 来简化和组织它。MFC/Struts 等，不胜枚举。为什么Android应该有所不同？为什么我们要假设 SDK 具备在没有像 MVP 这样的设计模式的情况下 Android 所需的一切？

很高兴在我花费数百小时之前知道，请随时评论/回答这个问题的任何部分。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-05-06T01:18:24.020

Android 对糟糕的 MV(P|C) 设计的惩罚比我遇到的任何平台都多。忘记它提供的用于在活动堆栈上下传递状态的笨拙方法。从您的活动中获取尽可能多的状态和逻辑。根据需要将其移动到 Services、ContentProviders 和 SharedPreferences 中。尽量让你的活动成为纯粹的观点。IMO，服务在 Android 教程中从未得到足够的重视。甚至 O'Reilly *Programming Android*的书也只给了他们四分之一页！

小心扩展应用程序。如果您曾经在自己的进程中启动服务（例如，允许它在活动崩溃时正常关闭），那么服务将拥有自己的应用程序副本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-17T01:31:26.460

只是为其他可能感兴趣的人提供参考。几年前我也在想同样的事情。当我们将 MVC/ [MVVM](http://en.wikipedia.org/wiki/Model_View_ViewModel) / [Presentation Model](http://martinfowler.com/eaaDev/PresentationModel.html)应用到 android 应用程序时，我们真正想要的是有一个清晰的结构化项目，更重要的是更容易进行单元测试。目前，在没有第三方框架的情况下，您通常会有很多代码（如 addXXListener()、findViewById()...），这些代码不会增加任何业务价值。更重要的是，您必须运行 android 单元测试而不是普通的 JUnit 测试，这需要很长时间才能运行并且使单元测试有些不切实际。由于这些原因，几年前我们启动了一个开源项目[RoboBinding](http://robobinding.org/)- 适用于 Android 平台的数据绑定表示模型框架。RoboBinding 可帮助您编写更易于阅读、测试和维护的 UI 代码。RoboBinding 消除了对 addXXListener 之**类的不必要代码**的需求，并将 UI 逻辑转移到 Presentation Model，这是一个 pojo，可以通过**正常的 JUnit 测试进行测试**。RoboBinding 本身带有 300 多个 JUnit 测试以确保其质量。其他替代方案：Android-Binding、Bindroid 和 MvvmCross。

# php - MySQL：查找相似的重复条目

> ID：12291317
> 
> 赞同：0
> 
> 时间：2012-09-05T23:58:27.947
> 
> 标签：php, mysql, sql

鉴于我的桌子

```
id | name
 01| Test Name
 02| Name Test
 03| Another name
 ...
 ...
 nn| Test string 
```

我想对每个条目执行以下操作，读取第一个单词，直到一个空格，所以在这个例子中，我会读取 Test，然后，在字符串的**任何位置**找到所有包含 Test 的类似条目，然后继续*Name*，*另一个*，以此类推。

我不想手动执行此操作，因为我必须进行**大量**查询，其想法是数据是从旧的 excel 电子表格中导入的，并且客户想要获得重复的名称，所以**Test Name**，**Test Something Name**和**Name Test**是潜在的相似名称。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T00:04:24.503

您想运行一个查询，选择所有名称，将其返回给 php，然后循环遍历它，将字符串解析为单独的单词，并使用全文索引运行查询。

这里有一些东西可以帮助您入门。 [http://www.databasejournal.com/sqletc/article.php/1578331/Using-Fulltext-Indexes-in-MySQL---Part-1.htm](http://www.databasejournal.com/sqletc/article.php/1578331/Using-Fulltext-Indexes-in-MySQL---Part-1.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T00:24:07.280

这是我的数据库解决方案：

```
SELECT * 
FROM princess a
INNER JOIN (SELECT 
        DISTINCT CASE
            WHEN name LIKE '% %' 
                THEN SUBSTR(name, 1, LOCATE(' ', name) - 1)
            ELSE name
        END AS 'name'
    FROM princess) b ON a.name LIKE CONCAT('%', b.name ,'%') 
```

这将找到`DISTINCT`名称（在空格之前），然后`JOIN`使用`LIKE`.

您也可以考虑使用`INSTR(a.name, b.name)`代替，`b.name LIKE CONCAT('%', a.name ,'%')`具体取决于您的`EXPLAIN`外观。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T00:15:53.707

在 MySQL 中有大量关于如何将字符串拆分为多行的示例，例如[this one](https://stackoverflow.com/questions/5342629/mysql-split-data-into-multiple-rows)。

之后，您可以轻松找到完全匹配的内容。如果您想要非精确匹配，请查看[`SOUNDEX()`](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_soundex)

# asp.net - MVC 4 Web API 区域 404 错误：“未找到路径 '/Jobs/Send' 的控制器或未实现 IController。”

> ID：12291328
> 
> 赞同：5
> 
> 时间：2012-09-06T00:00:02.553
> 
> 标签：asp.net, asp.net-mvc

我遇到了一个让我发疯的问题。

我有一个定义了多个区域的 MVC 4 WebAPI 应用程序。

我的工作区发送控制器 (SendController.cs) 定义如下：

```
namespace TargetAPI.Areas.Jobs.Controllers
{
    public class SendController : ApiController
    {
        [HttpPost]
        public HttpResponseMessage Index(SendRequest req)
        {
            try
            {
            //blah blah
            }
            catch (Exception ex)
            {
            //blah blah
            }
        }
    }
} 
```

我的工作区注册 (JobsAreaRegistration.cs) 定义如下：

```
namespace TargetAPI.Areas.Jobs
{
    public class JobsAreaRegistration : AreaRegistration
    {
        public override string AreaName
        {
            get
            {
                return "Jobs";
            }
        }

        public override void RegisterArea(AreaRegistrationContext context)
        {
            context.MapRoute(
                "Jobs_long",
                "Jobs/{controller}/{action}/{id}",
                new { action = "Index", id = UrlParameter.Optional },
                new[] { "TargetAPI.Areas.Jobs.Controllers" }
            );
        }
    }
} 
```

我的 RouteConfig.cs 说：

```
namespace TargetAPI
{
    public class RouteConfig
    {
        public static void RegisterRoutes(RouteCollection routes)
        {
            routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

            routes.MapRoute(
                 name: "Default",
                 url: "{controller}/{action}/{id}",
                 defaults: new { controller = "Home", 
                     action = "Index", id= UrlParameter.Optional },
                 namespaces: new string[] { "TargetAPI.Controllers" }
            );
        }
    }
} 
```

当我在其上运行路由调试器时，我得到：（ [来源：][[boomerang.com](http://imagestore2.boomerang.com/img/temp/routedebug.jpg)][）][![我的路线调试](../Images/73910f6a60ea6406d0f992531df5ff83.png)](https://i.stack.imgur.com/HPenO.jpg)

但是当我尝试发布到 URL “Jobs/Send”时，我得到：

找不到路径“/Jobs/Send”的控制器或未实现 IController。

我已经尝试了如此多的迭代和组合，我的头脑在旋转。有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-07T00:50:10.950

原来 WebAPI 不处理区域！想象一下我的惊喜。所以我找到了一篇很棒的帖子[http://blogs.infosupport.com/asp-net-mvc-4-rc-getting-webapi-and-areas-to-play-nicely/](http://blogs.infosupport.com/asp-net-mvc-4-rc-getting-webapi-and-areas-to-play-nicely/)。现在我正在前进。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-07T17:20:45.010

除了不支持区域（因为 MapHTTPRoute 没有命名空间支持）之外，API 控制器必须使用 MapHttpRoute，而不是本示例中的 MapRoute（删除区域后）：

```
 public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        );

        routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Home", action = "Index", id = UrlParameter.Optional }
            );

    } 
```

注意 {action} 的缺失，Method 不是 Action，put 取自 HTTP 请求：Get、Head 等...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-18T15:51:41.440

我有同样的问题，解决方法很简单：我忘了添加文件`_ViewStart.cshtml`和`_Layout.cshtml`，可以帮助你

# node.js - Calling a shell script from a makefile?

> ID：12291333
> 
> 赞同：1
> 
> 时间：2012-09-06T00:00:28.997
> 
> 标签：node.js, shell, permissions, makefile, executable

I have a custom shell script to make twitter bootstrap from source and then move the files to my node.js app's /lib file:

```
rm -r bootstrap
make bootstrap
mv -f bootstrap/css/* ../../lib/public/css
mv -f bootstrap/img/* ../../lib/public/img
mv -f bootstrap/js/* ../../lib/public/js 
```

Running this from the shell works just fine using ./make_bootstrap.sh

Now I've created a Makefile for my full app (mainly compiling coffeescript and easy test initialization) and want to have a command that executes this custom shell script to build bootstrap. Here is my makefile

```
REPORTER = spec

all: build

build:
    @./node_modules/coffee-script/bin/coffee \
        -c \
        -o lib src

bootstrap:
    @./src/bootstrap \
        ./make_bootstrap.sh

clean:
    rm -rf lib
    mkdir lib

watch:
    @./node_modules/coffee-script/bin/coffee \
        -o lib \
        -cw src

test:
    @./node_modules/mocha/bin/mocha \
        --reporter $(REPORTER) \
        test/*.coffee

.PHONY: build bootstrap clean watch test 
```

with the relevant command being 'make bootstrap'. However when I run make bootstrap from the command line all I get is this error:

```
make: ./src/bootstrap: Permission denied
make: *** [bootstrap] Error 1 
```

Originally I had assumed that it was a permission error but even setting all permissions on files (chmod 777) results in nothing. Files I have given full permissions at this point include the root Makefile, my custom shell script in the bootstrap folder and the makefile within the bootstrap folder itself.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T02:07:48.857

EDIT:

Based on the comments I have refactored to this

```
bootstrap:
    rm -r src/bootstrap/bootstrap
    $(MAKE) -C ./src/bootstrap bootstrap
    mv -f src/bootstrap/bootstrap/css/* lib/public/css
    mv -f src/bootstrap/bootstrap/img/* lib/public/img
    mv -f src/bootstrap/bootstrap/js/* lib/public/js 
```

This duplicates the functionality of the shell script I had before (moving files for my custom project) and still uses the standard makefile that Twitter Bootstrap ships with. Much cleaner... I'm going to live the original answer below so people can see the evolution and refactor.

OLD ANSWER

Ok thank you guys in the comments for pointing my in the right direction. This solution works:

```
bootstrap:
    cd ./src/bootstrap; \
        ./make_bootstrap.sh 
```

What happens is it executes the change directory (in a sub process so it doesn't affect where I run make from) and then executes the custom script. It seems as if I probably shouldn't be using something like this in a makefile since it feels 'dirty'; perhaps a more clean way to do it would be to invoke the LESS compiler myself and mimic the makefile provided by bootstrap. I'm using this for a tiny personal project though so it does the job.

# php - 从文件中删除图像，同时删除 mysql 行

> ID：12291337
> 
> 赞同：0
> 
> 时间：2012-09-06T00:01:51.010
> 
> 标签：php, mysql, mysqli, sql-delete, delete-file

我有一个管理面板，它有一个页面允许管理员从数据库中删除行。他们可以删除的每一行都有一个存储在服务器目录中的关联图像。图像路径也存储在数据库中。

我需要的是当用户从表中删除一行时，我希望它也删除图像。

这是我的 PHP 从表中删除行：

```
include('includes/temp.config.php'); 

    if (isset($_GET['id']) && is_numeric($_GET['id']))
    {
            // get the 'id' variable from the URL
            $id = $_GET['id'];

            // delete record from database
            if ($stmt = $link->prepare("DELETE FROM templates WHERE id = ? LIMIT 1"))
            {
                    $stmt->bind_param("i",$id);     
                    $stmt->execute();
                    $stmt->close();
            }
            else
            {
                    echo "ERROR: could not prepare SQL statement.";
            }
            $link->close();

            // redirect user after delete is successful
            header("Location: edit.php");
    }
    else
    // if the 'id' variable isn't set, redirect the user
    {
            header("Location: edit.php");
    } 
```

但我什至不知道从哪里开始删除相关图像......任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T00:06:28.500

功能怎么样[`unlink`](http://php.net/manual/en/function.unlink.php)？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T00:16:57.790

我会要求用户指定图像，从数据库中选择图像路径，使用我刚刚检索到的图像路径从文件系统中删除图像，然后从数据库中删除该行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-07T12:46:51.643

```
<?php
require __DIR__ . "/config.php";

if( isset($_GET['id'])){
    $id=$_GET['id'];
    $res=mysql_query("SELECT image FROM register  where id= '$id'");
    $row=mysql_fetch_array($res);
    $delete="delete  from register where id= '$id'";
    $de = mysql_query( $delete);
    unlink("upload/".$row['image']);
      if($de)
     {
        header("location:login.php");
     }
     else
    {
      echo "error";
    }
}
?> 
```

# javascript - DOMWindow 动态弹出维度

> ID：12291349
> 
> 赞同：0
> 
> 时间：2012-09-06T00:03:45.583
> 
> 标签：javascript, jquery

我正在使用[DOMWindow 示例 3](http://swip.codylindley.com/DOMWindowDemo.html)进行弹出窗口。
我有一个尺寸不同的图像列表，并希望打开一个窗口来反映这些差异。
为了捕获我使用的每个唯一属性，`click`然后分配一些变量。问题是`click`现在注册了 2x（意味着我必须点击两次），首先 `$(this).click(function ()`来自`DOMWindow`'s`eventType:'click',`

**问题**：如何修复此代码以便可以捕获变量然后将其应用于`DOMWindow`'s 方法？

```
$(".fixedAjaxDOMWindow").each(function () {

    $(this).click(function () {

        var c = $(this).find('img').attr('alt');
        //alert(c);
        var imgH = $(this).find(...)

        // click is registered again here
         $(this).openDOMWindow({
         //placing any code here breaks such as: var h = $(this).height();
            eventType:'click',
            width:800,
            height:imgH,
            positionType:'centered',
            positionTop:50,
            positionLeft:50,
            windowSource:'iframe',
            windowPadding:0,
            border:0,
        });

        return false;
    });

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T13:25:56.460

我似乎已经解决了这个问题。
如果有人有更好的主意，请告诉我。

```
$(".fixedAjaxDOMWindow").mouseenter(function () {

        var imgH = $(this).find('img')...//get img height

         $(this).openDOMWindow({
            eventType:'click',
            width:800,
            height:imgH,
            positionType:'centered',
            positionTop:50,
            positionLeft:50,
            windowSource:'iframe',
            windowPadding:0,
            border:0,
        });

        return false;
    }); 
```

# shell - 从特定位置在 Clojure 中运行 shell 命令

> ID：12291351
> 
> 赞同：22
> 
> 时间：2012-09-06T00:04:29.163
> 
> 标签：shell, clojure

我想阅读 shell 命令的输出。我要读取的 shell 命令必须从特定位置运行。（它是`git log`）。

`cd`除了进入位置，运行`(clojure.java.shell/sh "git log")`，然后`cd`返回工作目录之外，还有什么好方法吗？

我正在寻找某种`(shell-at directory command)`功能。此功能的简单实现也将不胜感激。我对 Clojure 的经验很少。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-09-06T04:26:01.173

`clojure.java.shell/sh`支持`:dir`设置子进程工作目录的选项：

```
(clojure.java.shell/sh "git" "log" :dir "/path/to/some/directory") 
```

见[这里](http://clojure.github.com/clojure/clojure.java.shell-api.html)。

# sql - SELECT 不返回数值

> ID：12291354
> 
> 赞同：3
> 
> 时间：2012-09-06T00:05:02.900
> 
> 标签：sql, ms-access, select, group-by

我有一张桌子“书”。为简单起见，这里有 3 列：

```
name(text) | new(boolean) | press(text) 
```

我需要选择新书最多的出版社（出版社）。我不明白为什么 Access 显示“语法错误”。

```
SELECT press, COUNT(new) AS [Number of new books]
FROM books
WHERE new = TRUE
GROUP BY press
HAVING COUNT(new) = 
  SELECT MAX(s) 
  FROM 
  (   SELECT COUNT(new) AS s, press 
      FROM books
      WHERE new = TRUE
      GROUP BY press
  ) 
```

如果我只写第二部分：

```
 SELECT MAX(s) 
  FROM 
  (   SELECT COUNT(new) AS s, press 
      FROM books
      WHERE new = TRUE
      GROUP BY press
  ) 
```

它返回正确的值 (5)

如果我只写有条件的第一部分`= 5`，那很好。

```
SELECT press, COUNT(new) AS [Number of new books]
FROM books
WHERE new = TRUE
GROUP BY press
HAVING COUNT(new) = 5 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-06T00:06:29.813

第二个查询应该用括号括起来

```
SELECT press, COUNT(new) AS [Number of new books]
FROM books
WHERE new = TRUE
GROUP BY press
HAVING COUNT(new) = 
(
  SELECT MAX(s) 
  FROM 
  (   SELECT COUNT(new) AS s, press 
      FROM books
      WHERE new = TRUE
      GROUP BY press
  )
) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T01:05:53.610

您已经有一个聚合 ( `GROUP BY`) 查询，它返回每`press`. 将其用作子查询并`TOP 1`在按计数降序排序后取行。

```
SELECT TOP 1
    sub.press,
    sub.CountOfNew AS [Number of new books]
FROM
    (
        SELECT
            press,
            COUNT(*) AS CountOfNew
        FROM books
        WHERE [new] = TRUE
        GROUP BY press
    ) AS sub
ORDER BY sub.CountOfNew DESC 
```

注意，如果多个`press`es 被绑定到 maximum `[Number of new books]`，这个查询将返回所有的关系。（但您的原始方法也是如此。）如果您只想要其中一个关系，请在`ORDER BY`.

# continuous-integration - 如何获取触发 TeamCity 中构建的更改的文本摘要？

> ID：12291359
> 
> 赞同：0
> 
> 时间：2012-09-06T00:06:35.737
> 
> 标签：continuous-integration, teamcity, teamcity-7.0

当您在 TeamCity 中设置构建触发器时，TeamCity 会显示触发构建的更改的精美文本摘要。我想在构建步骤中使用类似的摘要。

如何获得更改的文本摘要？

# html - 为什么这个元素在 Firefox 中没有浮动？

> ID：12291360
> 
> 赞同：0
> 
> 时间：2012-09-06T00:06:37.500
> 
> 标签：html, css, css-float

我在 Firefox 中没有浮动的复选框有问题。我究竟做错了什么？

现场示例：http: [//jsfiddle.net/3zhrD/](http://jsfiddle.net/3zhrD/)

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
        <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
        <title>Example</title>
        <style type="text/css">
body {
    font-family:"Lucida Grande", "Lucida Sans Unicode", Verdana, Arial, Helvetica, sans-serif;
    font-size:12px;
}
p, h1, form, button {
    border:0;
    margin:0;
    padding:0;
}
.spacer {
    clear:both;
    height:1px;
}
/* ----------- My Form ----------- */
.myform {
    margin:0 auto;
    width:400px;
    padding:14px;
}
/* ----------- stylized ----------- */
#stylized {
    border:solid 2px #b7ddf2;
    background:#ebf4fb;
}
#stylized h1 {
    font-size:14px;
    font-weight:bold;
    margin-bottom:8px;
}
#stylized p {
    font-size:11px;
    color:#666666;
    margin-bottom:20px;
    border-bottom:solid 1px #b7ddf2;
    padding-bottom:10px;
}
#stylized label {
    display:block;
    font-weight:bold;
    text-align:right;
    width:140px;
    float:left;
}
#stylized .small {
    color:#666666;
    display:block;
    font-size:11px;
    font-weight:normal;
    text-align:right;
    width:140px;
}
#stylized input { /*260*/
    float:left;
    font-size:12px;
    padding:4px 2px;
    border:solid 1px #aacfe4;
    width:200px;
    margin:2px 10px 2px 10px;
}
#stylized .checkbox {
    margin:2px 10px 28px 10px;

}
#stylized button {
    clear:both;
    margin-left:150px;
    width:125px;
    height:31px;
    background:#666666 url(img/button.png) no-repeat;
    text-align:center;
    line-height:31px;
    color:#FFFFFF;
    font-size:11px;
    font-weight:bold;
}
</style>
        <script type="text/javascript">
            function CredentialsReadonlyToggle() {
                if(document.getElementById("CredToggle").checked){
                    document.getElementById("username").disabled=true;
                    document.getElementById("password").disabled=true;
                }
                else
                {
                    document.getElementById("username").disabled=false;
                    document.getElementById("password").disabled=false;
                }
            }
        </script>
        </head>
        <body>
        <div id="stylized" class="myform">
          <form id="form" name="form" method="post" action="index.html">
            <h1>Select Source</h1>
            <p>This is the basic look of my form without table</p>

            <label>URL <span class="small">URL of Remote Adress</span> </label>
            <input type="text" name="url" id="url" />

            <label>Password? <span class="small">Source requieres password</span> </label>
            <input type="checkbox" onclick="CredentialsReadonlyToggle();" id="CredToggle" class="checkbox"/>

            <label>Username <span class="small">for remote source</span> </label>
            <input type="text" name="username" id="username"/>

            <label>Password <span class="small">for remote source</span> </label>
            <input type="password" name="password" id="password"/>
            <button type="submit">Weiter</button>
            <div class="spacer"></div>
          </form>
        </div>

</body>
</html>​ 
```

**根据G-Nugget**的建议，我在 css 中交替/添加了它，并在复选框周围放置了一个 div，但这给了我相同的结果。

```
#stylized .checkbox {
    float: left;
    margin-left: 0px;
}
#stylized div{
    margin:2px 10px 28px 10px;
    float:left;
    border:solid 1px #000;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T11:12:02.660

嗨替换标签和复选框的CSS如下。复选框的宽度需要重置，因为您已经输入了 200px 宽度。更改了 jsfiddle 并在 Firefox 15 和 chrome 上进行了测试。

```
#stylized label {
display:block;
font-weight:bold;
text-align:right;
width:145px;
clear:left;
float:left; }

#stylized .checkbox {
margin:2px 10px 28px 10px;
width:15px;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T00:20:42.237

我将您的文档类型更改为 html5，并得到了预期的结果。

由于过渡文档类型将其置于怪癖模式，因此最好避免使用它们，除非有充分的理由使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T01:28:48.037

添加此代码：`#stylized label {clear:both;}`

# entity-framework - 如何将 SimpleMembership 与 WebForm 4.5 和 EntityFramework 一起使用？

> ID：12291371
> 
> 赞同：3
> 
> 时间：2012-09-06T00:08:52.437
> 
> 标签：entity-framework, asp.net-membership, webforms, asp.net-4.5, simplemembership

我听说有 ASP.NET 4.5 的新提供者（这样的成员资格提供者），但似乎我找不到任何关于将 SimpleMembership 与 WebForm ASP.NET 4.5 和 EntityFramework 一起使用的好方法。关于如何使用指定的技术（sql shema 创建、配置项目）实现 SimpleMembership 是否有任何好的文档或解释？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T14:18:43.043

这是最近的一篇文章，提供了一个很好的概述：

[SimpleMembership、Membership Providers、Universal Providers 和新的 ASP.NET 4.5 Web 窗体和 ASP.NET MVC 4 模板](http://weblogs.asp.net/jgalloway/archive/2012/08/29/simplemembership-membership-providers-universal-providers-and-the-new-asp-net-4-5-web-forms-and-asp-net-mvc-4-templates.aspx?utm_source=twitterfeed&utm_medium=twitter)

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T20:47:53.070

您可以使用 webforms 实现简单的成员资格，但您将无法利用登录控件等，因为 simplemembership 提供程序没有实现成员资格提供程序的所有方法。建议使用网络表单的通用提供程序

# git - 在远程分支上运行 `git log`

> ID：12291373
> 
> 赞同：8
> 
> 时间：2012-09-06T00:08:56.357
> 
> 标签：git, github

我想要`git log`一个 git 存储库的输出，但我不想克隆整个存储库。

即我想要一些语义上的东西，如下所示

`git log git@github.com:username/reponame.git`

如果有办法做到这一点，我也想要同样的`git whatchanged`

如果 github 为此提供了一个简单的解决方案，我愿意将自己限制在仅托管在 github 上的 git 存储库中。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-10T17:13:35.047

您应该获取远程分支然后与之交互。`git fetch`会将远程分支拉到本地存储库的 FETCH_HEAD 中，但不会拉到您的工作目录中。

`git log FETCH_HEAD --decorate=full`将让您看到您的 HEAD 与远程分支 refs/origin/HEAD 相比在哪里。

`git whatchanged FETCH_HEAD --decorate=full`和上面一样，但也显示了已经改变的文件。

`git diff HEAD FETCH_HEAD`您的存储库的 HEAD 和您刚刚获取的远程分支的 HEAD 之间的差异

`git diff --stat HEAD FETCH_HEAD`更改的摘要预览，就像您在合并期间和 git pull 底部看到的一样。

请注意，如果您确实希望提取获取的更改，只需执行`git merge FETCH_HEAD`. （当您`git pull`基本上只是在进行提取然后合并时）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T00:42:34.417

你可以做一个浅克隆，如果你只需要最近的历史，这将限制你必须获取的东西的数量：

```
git clone --depth 100 ... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-11-20T12:51:25.997

我发现了两种使用 GitHub 执行此操作的方法：

1.  使用 web API 查询日志信息（不简单但可行）
2.  使用“svn log”，因为 GitHub 现在部分模拟了 Git 存储库上的 SVN 服务器

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-06T00:36:59.340

我认为您的解决方案是仅查看 github.com 网站上的历史记录。如果您需要`git log`从命令行工作，那么您需要自己的存储库克隆。

理论上，您可以编写一个命令行工具，从 github 的 API 中提取提交信息，但这仅限于显示提交消息/元数据，而不是实际的差异。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T00:47:54.183

Unix 方式是拥有一个 shell 帐户：

```
ssh user@otherserver cd reponame.git '&&' git log 
```

和

```
ssh user@otherserver cd reponame.git '&&' git whatchanged 
```

这种方法的优点是可以在远程服务器上运行您想要的任何东西。我怀疑这是否适用于 github。

# html - Cufon 文字不出现 IE8

> ID：12291374
> 
> 赞同：0
> 
> 时间：2012-09-06T00:09:04.910
> 
> 标签：html, css, internet-explorer-8, cufon

网址[http://www.sydneybeeandwaspremoval.com.au](http://www.sydneybeeandwaspremoval.com.au) 它在**IE9**和 Chrome 等中运行良好。但在**IE8**中它不能像预期的那样运行，在**IE7**中它也能正常运行。

但基本上顶部导航菜单都是使用 cufon 的自定义字体，第一级链接工作正常，但是第二级链接被 cufon canvas 和 cufontext 适当替换但是你看不到它，我检查了元素以找到位置是正确的，我也尝试删除所有背景图像并更改颜色以防万一，但这也没有帮助，就好像它隐藏了可见性但我找不到任何可能导致它的 CSS。任何想法建议或经验将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T23:57:21.440

这个错误在这里讨论：http: [//drupal.org/node/834636](http://drupal.org/node/834636)

`visibility: hidden`问题是， Cufon 在 IE8 中没有正确渲染隐藏元素。那么解决方案就是将属性替换`visibility`为`display`属性。

在您的`templates/theme484/css/template.css`文件中，将第 431 行替换为以下行：

```
.menu-nav li ul { position: absolute; top: 44px; left: -14px; z-index: 100; width: 300px; display: none; } 
```

并将第 433 行替换为：

```
.menu-nav li.parent:hover ul { display: block; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T00:32:23.727

基兰，

如果 ie7 一切正常，一种解决方案可能是强制 ie8 以兼容模式运行您的网站。在页面的<head>中：

```
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /> 
```

此外，您可以通过执行以下操作将 ie8 定位为仅在兼容模式下运行：

```
<!--[if IE 8]>
   <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<![endif]--> 
```

祝你好运。

# perforce - “p4 更改”如何在已删除的路径上工作

> ID：12291376
> 
> 赞同：1
> 
> 时间：2012-09-06T00:09:13.497
> 
> 标签：perforce, changelist

假设以下事件按编年顺序发生。

1.  在更改列表 123 中的路径**“//depot/Tool/Web/test.html”上删除了一个文件**
2.  仅包含该文件的文件夹与文件一起被删除，因此生成的目录结构为**“//depot/Tool/...”**
3.  这时候我们发出**'p4 changes //depot/Tool/Web/...'**会报错吗？
4.  然后在之前删除的路径中添加了一个文件：**'//depot/Tool/Web/verify.css'** in changelist 456
5.  这时候，当我们再次发出**'p4 changes //depot/Tool/Web/...'**时，changelist 123会出现在搜索结果中吗？

我问这个是因为我想知道 Perforce 如何记录更改列表/文件/路径信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T00:19:29.587

是的，更改列表 123 将出现在您运行“p4 更改”的两个点上；Perforce 保留所有文件和目录的完整历史记录。

更改信息存储在与文件本身分开的元数据中。

# jquery - 在 .mouseup 上执行 AJAX 调用

> ID：12291383
> 
> 赞同：1
> 
> 时间：2012-09-06T00:10:37.000
> 
> 标签：jquery

当用户从下拉列表中选择一个元素时，我正在尝试执行 AJAX 调用。一旦`.mouseup`发生事件，我希望 AJAX 请求触发并提交数据。

这是我所拥有的：

```
$('<select />')
    .attr('name', 'status')
    .append('<option>Open</option>', '<option>Full</option>', '<option>Canceled</option>')
    .appendTo(this);

$('select[name=status]').mouseup(function () {
    $.ajax({ 
        url: '/ajax/training-update.php',
        data: {status: $currentSelection},
        type: 'POST',
        success: function(output) {
            alert(output);
            }
    });
}); 
```

当我从下拉列表中选择一个项目时，这会创建一个无限循环。我做错什么了？

编辑：

正如@Kolink 下面建议的那样，我`.mouseup`改为`.change`. 这导致了无限循环和“非法调用”错误。

我尝试了下面的测试代码以确保我`.change`正确实现了：

```
$('select[name=status]').change(function() {
    alert('Handler for .change() called.');
}); 
```

这按预期工作。

我不能使用 AJAX 有什么原因`.change`吗？

编辑#2：添加了完整的脚本

```
<script>
    $(function() {
        var $rowStartDate = $("span[id^=rowStartDate]");
        var $rowEndDate = $("span[id^=rowEndDate]");
        var $location = $(".location");
        var $status = $('.status');
        var $ajaxSubmit = $('#ajaxSubmit');

        $($rowStartDate.add($rowEndDate)).click(function() {
            var $currentSelection = $(this);

            // if there is already an input-field in this TD, return...
            if($currentSelection.find('input').length > 0)
                return;

            $currentSelection.html('');

            $currentSelectionClass = $currentSelection.attr('class');

            //create new input-field-object
            if($currentSelectionClass == "rowStartDate"){
                $('<input type="text" />')
                .attr('name', 'editStartDate')
                .addClass('editStartDate')
                .appendTo(this)
                .datepicker();
            }

            if($currentSelectionClass == "rowEndDate"){
                $('<input type="text" />')
                .attr('name', 'editEndDate')
                .addClass('editEndDate')
                .appendTo(this)
                .datepicker();
            }

       });

        $($location).click(function () {
            var $currentSelection = $(this);

            // if there is already an input-field in this TD, return...
            if($currentSelection.find('select').length > 0)
                return;

            $currentSelection.html('');

            $('<select />')
                .attr('name', 'location')
                .append('<option>Location 1</option>', '<option>Location 2</option>', '<option>Location 3</option>')
                .appendTo(this);
        });

        $($status).click(function () {
            var $currentSelection = $(this);

            // if there is already an input-field in this TD, return...
            if($currentSelection.find('select').length > 0)
                return;

            $currentSelection.html('');

            $('<select />')
                .attr('name', 'status')
                .append('<option>Open</option>', '<option>Full</option>', '<option>Canceled</option>')
                .appendTo(this);

        });

        //AJAX call not working correctly
            $('select[name="status"]').change(function () {
                $.ajax({ 
                    url: '/ajax/training-update.php',
                    data: {status: $currentSelection},
                    type: 'POST',
                    success: function(output) {
                        alert(output);
                        }
                });
            });

       //Original AJAX implementation. Moved to above.
       // $($ajaxSubmit).click(function () {
            // $.ajax({ 
                // url: '/ajax/training-update.php',
                // //data: {action: 'test'},
                // type: 'POST',
                // success: function(output) {
                    // alert(output);
                    // }
            // });
       // });

    // $("#ajaxError").ajaxError(function(event, request, settings){
        // $(this).append("Error requesting page " + settings.url);
    // });

    });
</script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T00:12:46.420

您应该使用该`change`事件来检测 a 何时`<select>`被使用。`mouseup`在那个元素上不可靠。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T16:23:09.350

**关于无限循环**

由于其他人已经回答了有关更改`mouseup`为的部分，因此`change`我将仅讨论无限循环问题：

如果您的更改处理程序正在设置下拉列表的值，那将导致处理程序再次运行。您的处理程序必须足够聪明才能检测到这种情况，可能是通过检测下拉菜单已经处于您期望的状态并且在这种情况下不调用设置值

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T00:13:46.827

尝试将您的事件更改为`onchange()`仅在所选值更改时触发的方式。

# variables - 多个框 - 公式

> ID：12291385
> 
> 赞同：0
> 
> 时间：2012-09-06T00:10:47.403
> 
> 标签：variables, mapping

我需要在双 for 循环中访问这 9 个框和每个单独的值。这是我所拥有的一个例子：

```
1 2 3 | 10 11 12 | 19 20 21 
4 5 6 | 13 14 15 | 22 23 24 
7 8 9 | 16 17 18 | 25 26 27
______
28 29 30 | ...
31 32 33 | ...
34 35 36 | ...

I need to map each number like...
1 2 3 | 4 5 6 | 7 8 9
10 11 12 | ... 
```

有谁知道如何做到这一点？

# ios - 下载 PDF iOS

> ID：12291389
> 
> 赞同：0
> 
> 时间：2012-09-06T00:11:59.420
> 
> 标签：ios, pdf, nsurlconnection, nsdata, download

我在从网络链接下载多个 PDF 文件时遇到问题。我拥有的代码可以在 Web 服务器上找到文件，但它只下载大约 360 字节。每个文件大约 2-3 MB，读取时会生成 %PDF，据我了解，这是 PDF 的开始字节。

这段代码会发生什么情况，它传递了一个字符串，然后从一个 plist 文件访问字典，该文件刚刚从包含 PDF 文件的同一 Web 服务器下载。然后该字符串获取 Web 服务器上 PDF 的实际名称，并通过 NSURLConnection 下载到 NSData 对象。最后将其写入 Apps Documents 目录。

任何帮助都会很棒！

-(void)fileToDownload:(NSString *)stringToPDFName {

```
NSString *downloadfile = [[masterDictionary objectForKey:@"PDF Dictionary"] objectForKey:stringToPDFName];
NSLog(@"downloadFile: %@",downloadfile);

NSString *pathToFile = [NSString stringWithFormat:@"%@%@.pdf",staticURLToPDF,downloadfile];
NSLog(@"pathToFile: %@",pathToFile);
NSError *error;

if ([listOfPDFsAlreadyDownloaded containsObject:pathToFile]) {
    NSLog(@"File Already Downloaded From New List: %@", [pathToFile stringByReplacingOccurrencesOfString:staticURLToPDF withString:@""]);
} else {
    //download new file
    NSString *urlString = [[staticURLToPDF stringByAppendingPathComponent:downloadfile] stringByAppendingPathExtension:@".pdf"];

    NSData *pdfDownloading = [NSURLConnection sendSynchronousRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:urlString]] returningResponse:NULL error:&error];

    NSLog(@"pdfDownloading Data: %@, Error: %@", pdfDownloading,error);

    BOOL written = [pdfDownloading writeToFile:[NSString stringWithFormat:@"%@/POGs/%@.pdf",documentsDirectory,downloadfile] atomically:YES];

    NSLog(@"FileDownloading %@/POGs/%@.pdf",documentsDirectory,downloadfile);

    if (written) {
        NSLog(@"Success");
        downloadedDocuments++;
    } else {
        NSLog(@"File Didn't Save");
    }
    [listOfPDFsAlreadyDownloaded addObject:pathToFile];
    NSLog(@"File to Download: %@",[pathToFile stringByReplacingOccurrencesOfString:staticURLToPDF withString:@""]);
    NSLog(@"%i documentsDownloaded",downloadedDocuments);
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-26T08:47:08.090

您想使用`NSURLSession`，尤其是`NSURLSessionDownloadTask`下载文件。

我建议从苹果官方文档开始： [https ://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/URLLoadingSystem/Articles/UsingNSURLSession.html](https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/URLLoadingSystem/Articles/UsingNSURLSession.html)

请不要做同步请求。网络本来就很慢，所以任务应该总是异步发生。

# database - 开源 - ARIES 实施

> ID：12291397
> 
> 赞同：0
> 
> 时间：2012-09-06T00:13:37.310
> 
> 标签：database

有人知道用于事务恢复的 ARIES 方法的开源实现吗？似乎很容易实现，但很可能总是魔鬼在细节中，“稳定”的实现会很棒。

例如，所有事务操作/更新是否首先缓存，并且仅在缓存驱逐条目后才写入持久存储，或者它们是否立即写入持久存储。因此，如果某些条目尚未写入日志中的持久存储以提高性能（或者可能发出 NIO 调用），那么在电源故障时基本上通常可以吗？我读过一些文献，但对实现本身一无所知。尽管如此，在系统故障/崩溃的情况下，如果所有更新都保持不变，似乎没有什么可以控制的。那么基本上如何确保在崩溃后重新应用来自事务的所有更新？我认为这永远无法确保（只有日志中必须重新应用的那些）？回到最初的问题：有人知道“经过验证的”工作开源变体吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-30T03:02:35.990

ARIES 只是保证原子性和持久性的一个基本理念。你可以参考 PostgreSQL 和 MySQL innodb，但是这些代码包含很多细节，所以你会感到困惑。

# spring - @Predestroy 何时会在原型范围的 bean 上调用？

> ID：12291403
> 
> 赞同：9
> 
> 时间：2012-09-06T00:14:11.027
> 
> 标签：spring

我想知道 ApplicationContext 何时会在原型范围的 bean 上调用带有 @PreDestroy 注释的方法？

a) 每次 bean 实例变得无法访问时（例如，准备好进行 GC） b) 当 ApplicationContext 关闭时（例如，调用 close()、stop()、destroy()）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-06T01:09:40.073

与其他作用域不同，一旦 Spring 实例化并配置原型 bean， Spring 容器将不会调用`@PreDestroy`，其余部分完全取决于持有原型 bean 的客户端，此时 Spring 不会跟踪 bean - [http://static.springsource .org/spring/docs/3.1.x/spring-framework-reference/html/beans.html#beans-factory-scopes-prototype](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/beans.html#beans-factory-scopes-prototype)

# c++ - C++ CUDA 和 libpng 链接错误

> ID：12291404
> 
> 赞同：3
> 
> 时间：2012-09-06T00:14:13.940
> 
> 标签：c++, macos, makefile, cuda, libpng

**已解决：**请参阅下面的评论

我一直在研究 GPU 分形生成器，并且一直在使用 CUDA 来访问 GPU，并使用 libpng 来生成输出图像。我正在运行 OSX 10.7.4、Cuda 版本 4.2、V0.2.1221、libpng15（我认为是 1.5.11）

**代码的第一个版本**（非常混乱和hacky）只有一个源文件GPUkernel.cu，它具有使用CUDA库计算分形的函数，并且还使用libpng生成png。这用命令编译得很好

```
all:    src/GPUkernel.cu
        nvcc -o base src/GPUkernel.cu -lpng15 -lz 
```

它产生了可执行的基础，一切运行良好。

**新版本：**

现在，随着这个项目变得越来越大，为了尝试使代码更易于管理，我将源代码拆分为两个文件，GPUkernel.cu 和 GPUfractal.cpp。GPUkernel.cu 包含所有 CUDA GPU 函数，GPUfractal.cpp 包含 main() 和 libpng 函数。

当我尝试编译此代码时遇到一些问题，与 libpng 和 CUDA 使用的不同架构有关（我认为）。我的makefile是：

```
CUDA_INSTALL_PATH ?= /Developer/GPU\ Computing/CUDALibraries/common

ARCH=-arch i386 -arch x86_64

CXX := g++
CC := gcc
LINK := g++ -fPIC $(ARCH)
NVCC := nvcc -ccbin /usr/bin

# Includes
INCLUDES = -I. -I$(CUDA_INSTALL_PATH)/inc -I/usr/local/cuda/include 

# Common flags
COMMONFLAGS += $(INCLUDES)
NVCCFLAGS += $(COMMONFLAGS)
CXXFLAGS += $(COMMONFLAGS)
CFLAGS += $(COMMONFLAGS)

LIB_CUDA := -L$(CUDA_INSTALL_PATH)/lib `libpng-config --cflags --ldflags`

OBJS = GPUkernel.cu.o GPUfractal.cpp.o
TARGET = base
LINKLINE = $(LINK) -o $(TARGET) $(OBJS) $(LIB_CUDA)

.SUFFIXES: .c .cpp .cu .o

%.c.o: %.c
    $(CC) $(CFLAGS) -c $< -o $@

%.cu.o: %.cu
    $(NVCC) $(NVCCFLAGS) -c $< -o $@

%.cpp.o: %.cpp
    $(CXX) $(CXXFLAGS) -c $< -o $@

$(TARGET): $(OBJS) Makefile
    $(LINKLINE) 
```

这是我的终端输出：

```
pikachu:GPUfractal tom$ make
nvcc -ccbin /usr/bin -I. -I/Developer/GPU\ Computing/CUDALibraries/common/inc -I/usr/local/cuda/include  -c GPUkernel.cu -o GPUkernel.cu.o
ptxas /tmp/tmpxft_00000847_00000000-2_GPUkernel.ptx, line 105; warning : Double is not supported. Demoting to float
g++ -I. -I/Developer/GPU\ Computing/CUDALibraries/common/inc -I/usr/local/cuda/include  -c GPUfractal.cpp -o GPUfractal.cpp.o
GPUfractal.cpp: In function ‘int renderImage(int*, float*, int, int, std::string, bool, int)’:
GPUfractal.cpp:180: warning: deprecated conversion from string constant to ‘char*’
GPUfractal.cpp:232: warning: deprecated conversion from string constant to ‘char*’
g++ -fPIC -arch i386 -arch x86_64 -o base GPUkernel.cu.o GPUfractal.cpp.o -L/Developer/GPU\ Computing/CUDALibraries/common/lib `libpng-config --cflags --ldflags`
ld: warning: ignoring file GPUfractal.cpp.o, file was built for unsupported file format which is not the architecture being linked (i386)
Undefined symbols for architecture i386:
  "_main", referenced from:
      start in crt1.10.6.o
  "_cudaGetLastError", referenced from:
      calculateFractal(int*, float*, int, int, float, float, float, float, int, bool, float, float)in GPUkernel.cu.o
  "_cudaGetErrorString", referenced from:
      calculateFractal(int*, float*, int, int, float, float, float, float, int, bool, float, float)in GPUkernel.cu.o
  "_cudaMemset", referenced from:
      calculateFractal(int*, float*, int, int, float, float, float, float, int, bool, float, float)in GPUkernel.cu.o
  "_cudaConfigureCall", referenced from:
      calculateFractal(int*, float*, int, int, float, float, float, float, int, bool, float, float)in GPUkernel.cu.o
  "_cudaMemcpy", referenced from:
      calculateFractal(int*, float*, int, int, float, float, float, float, int, bool, float, float)in GPUkernel.cu.o
  "_cudaFree", referenced from:
      calculateFractal(int*, float*, int, int, float, float, float, float, int, bool, float, float)in GPUkernel.cu.o
  "___cudaRegisterFatBinary", referenced from:
      __sti____cudaRegisterAll_44_tmpxft_00000847_00000000_4_GPUkernel_cpp1_ii_ad246568()      in GPUkernel.cu.o
  "___cudaRegisterFunction", referenced from:
      __sti____cudaRegisterAll_44_tmpxft_00000847_00000000_4_GPUkernel_cpp1_ii_ad246568()      in GPUkernel.cu.o
  "___cudaUnregisterFatBinary", referenced from:
      __cudaUnregisterBinaryUtil()      in GPUkernel.cu.o
  "_cudaLaunch", referenced from:
      cudaError cudaLaunch<char>(char*)in GPUkernel.cu.o
  "_cudaSetupArgument", referenced from:
      __device_stub__Z19calculateMandlebrotPiPfffffibff(int*, float*, float, float, float, float, int, bool, float, float)in GPUkernel.cu.o
  "_cudaMalloc", referenced from:
      cudaError cudaMalloc<int>(int**, unsigned long)in GPUkernel.cu.o
      cudaError cudaMalloc<float>(float**, unsigned long)in GPUkernel.cu.o
ld: symbol(s) not found for architecture i386
collect2: ld returned 1 exit status
ld: warning: ignoring file GPUkernel.cu.o, file was built for i386 which is not the architecture being linked (x86_64)
ld: warning: ignoring file /usr/local/lib/libpng15.a, file was built for archive which is not the architecture being linked (x86_64)
Undefined symbols for architecture x86_64:
  "_png_create_write_struct", referenced from:
      renderImage(int*, float*, int, int, std::basic_string<char, std::char_traits<char>, std::allocator<char> >, bool, int)in GPUfractal.cpp.o
  "_png_create_info_struct", referenced from:
      renderImage(int*, float*, int, int, std::basic_string<char, std::char_traits<char>, std::allocator<char> >, bool, int)in GPUfractal.cpp.o
  "_png_set_longjmp_fn", referenced from:
      renderImage(int*, float*, int, int, std::basic_string<char, std::char_traits<char>, std::allocator<char> >, bool, int)in GPUfractal.cpp.o
  "_png_init_io", referenced from:
      renderImage(int*, float*, int, int, std::basic_string<char, std::char_traits<char>, std::allocator<char> >, bool, int)in GPUfractal.cpp.o
  "_png_set_IHDR", referenced from:
      renderImage(int*, float*, int, int, std::basic_string<char, std::char_traits<char>, std::allocator<char> >, bool, int)in GPUfractal.cpp.o
  "_png_set_text", referenced from:
      renderImage(int*, float*, int, int, std::basic_string<char, std::char_traits<char>, std::allocator<char> >, bool, int)in GPUfractal.cpp.o
  "_png_write_info", referenced from:
      renderImage(int*, float*, int, int, std::basic_string<char, std::char_traits<char>, std::allocator<char> >, bool, int)in GPUfractal.cpp.o
  "_png_write_row", referenced from:
      renderImage(int*, float*, int, int, std::basic_string<char, std::char_traits<char>, std::allocator<char> >, bool, int)in GPUfractal.cpp.o
  "_png_write_end", referenced from:
      renderImage(int*, float*, int, int, std::basic_string<char, std::char_traits<char>, std::allocator<char> >, bool, int)in GPUfractal.cpp.o
  "_png_free_data", referenced from:
      renderImage(int*, float*, int, int, std::basic_string<char, std::char_traits<char>, std::allocator<char> >, bool, int)in GPUfractal.cpp.o
  "_png_destroy_write_struct", referenced from:
      renderImage(int*, float*, int, int, std::basic_string<char, std::char_traits<char>, std::allocator<char> >, bool, int)in GPUfractal.cpp.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status
lipo: can't open input file: /var/folders/rw/344w_6js7d7dhg8pch7zws180000gn/T//ccZYSoRL.out (No such file or directory)
make: *** [base] Error 1 
```

我已将最新版本的代码上传到[github](https://github.com/tomnzed/GPUFractal)，您还可以在此处的存档文件夹中查看旧（工作）版本的代码（由于 noob 用户限制，链接已删除，但您可以在 github 上的“存档”中找到它/0.1'）。

更多信息：我在代码的第一个版本中遇到了与未定义符号类似的问题，但是通过大量谷歌搜索，发现[这篇文章](http://forums.macrumors.com/showthread.php?t=1253844)通过添加 `libpng-config --cflags --ldflags` 到 makefile解决了我的问题

感谢您阅读本文，希望第一篇文章不会太糟糕:)

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T03:13:57.777

您似乎正在为 32 位和 64 位构建主机代码。在 OS X 上，如果您想将主机代码 (.cpp) 编译为 64 位，则需要`-arch x86_64`，或者如果您想要 32 位，则需要`-arch i386`，但我认为您不应同时指定两者。

对于您的设备代码，如果您想要 64 位，那么您需要添加`-m64`到 nvcc 命令行。对于 32 位，使用`-m32`.

您还需要链接到适当的 CUDA 库（32 位或 64 位）。如果您查看 CUDA 安装路径，您会看到有 32 位和 64 位目录以及相应的库。*仅*包含这些链接路径之一（使用`-L`），具体取决于您构建的是 32 位还是 64 位。如果您正在使用 CUDA 运行时 API（可能），那么您还必须链接 libcuda ( `-lcuda`) 和 libcudart ( `-lcudart`)。

您还需要对您链接的任何其他库（libpng 或其他）执行相同的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T03:14:43.137

我相信您需要链接 cuda 库和 cuda 运行时库。链接器 (g++) 不了解 CUDA，因此您需要告诉它与 cuda 库链接。

我有一个混合的 C++ 和 CUDA 项目，我使用 g++ 编译 C++ 文件和 nvcc 编译我的 CUDA 文件。然后我调用

g++ -o exec_name *.o -lcuda -lcudart

# sql - 项目运营商甲骨文

> ID：12291405
> 
> 赞同：1
> 
> 时间：2012-09-06T00:14:26.763
> 
> 标签：sql, oracle, operators

我正在阅读一本关于数据库设计的书，他们要求显示一个项目操作的结果，该操作列出了 Customer 表中的 CustCity 和 CustState。好吧，我的 Customer 表在这些行中有一些重复项，其中 4 个来自 WA，2 个来自 CO，但两个条目与来自西雅图和 WA 的条目完全相同。

我的问题是项目运营商是如何工作的？这本书有一个片段说它会在必要时消除重复的行，但如果它的工作方式类似于下面的语句，那么它不会删除任何重复的行。

```
SELECT CustCity, CustState FROM Customer; 
```

任何澄清将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T00:19:09.243

您需要*明确*告诉数据库从结果集中删除重复项，使用[`DISTINCT`](http://psoug.org/definition/DISTINCT.htm)：

```
SELECT DISTINCT CustCity, CustState FROM Customer 
```

# mamp - 在系统启动时自动启动 MAMP Pro？

> ID：12291406
> 
> 赞同：3
> 
> 时间：2012-09-06T00:14:45.280
> 
> 标签：mamp

我有[MAMP Pro](https://www.mamp.info/en/mamp-pro/)。

如何启用 MAMP Pro 服务器在重新启动时自动启动？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2019-02-14T13:33:50.600

在 MAMP Pro 版本 4.5（仍然是 5.5.x）中，此选项位于端口下。

[![在此处输入图像描述](../Images/5f6f3ad14e215f39d8d1589353432dfd.png)](https://i.stack.imgur.com/43a4e.png)

[![在此处输入图像描述](../Images/50ce0950185ebed0978be89b6d425b9f.png)](https://i.stack.imgur.com/z6cPV.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-08T09:16:22.873

![mamp自动启动](../Images/bee773ceacce1f0f80dc4c3ad59f837a.png)

首先选中该框，然后转到系统首选项->用户和组->登录项->加号按钮从应用程序文件夹中添加您的mamp pro :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-15T23:45:27.813

![在此处输入图像描述](../Images/e2ab92dde263f4e422a1d7f966706e64.png)

在 MAMP PRO v3 上，此配置将自动启动它并确保 Apache 和 Mysql 始终处于打开状态。

# sql - Access中的SQL创建表问题

> ID：12291408
> 
> 赞同：0
> 
> 时间：2012-09-06T00:15:05.717
> 
> 标签：sql, database

所以我对 SQL 很陌生，我真的找不到问题所在。我在访问中这样做。

```
 CREATE TABLE BOAT_SLIP
(
SLIP_ID NUMBER (4) PRIMARY KEY,
MARINA_NUM CHAR (4),
SLIP_NUM CHAR (4),
LENGTH NUMBER (4),
RENTAL_FEE NUMBER (8),
BOAT_NAME CHAR (50),
BOAT_TYPE CHAR (50),
OWNER_NUM CHAR (4)
 ) ; 
```

我知道我会觉得自己像个彻头彻尾的白痴……但我想不通。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T00:22:06.810

NUMBER 没有字符长度。如果删除 SLIP_ID、LENGTH 和 RENTAL_FEE 右侧的 (4) 和 (8)，则表创建得很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T00:27:59.347

在旧版本的 Access 中（至少到 2002 年），您可以将标准 SQL`CREATE TABLE`语句粘贴到查询的 SQL 视图中，Access 会用它做正确的事情。它甚至以与标准 SQL 相同的方式处理 char(n) 声明。所以我希望这能奏效，尽管我不确定我是否正确翻译了你的数据类型。

```
CREATE TABLE BOAT_SLIP
(
  SLIP_ID integer PRIMARY KEY,
  MARINA_NUM CHAR (4),
  SLIP_NUM CHAR (4),
  LENGTH integer,
  RENTAL_FEE currency,
  BOAT_NAME varchar(50),
  BOAT_TYPE varchar(50),
  OWNER_NUM CHAR (4)
); 
```

考虑`NOT NULL`在大多数列上添加约束。

# jquery - jquery 循环 - 悬停事件，点击应该加载 url

> ID：12291410
> 
> 赞同：1
> 
> 时间：2012-09-06T00:15:17.387
> 
> 标签：jquery, jquery-plugins, jquery-cycle

我已经使用 jquery 循环设置了幻灯片，并且在导航中我使用的是 mouseover 事件而不是单击，这工作正常。唯一的事情是我希望用户能够单击链接并且单击行为正常并加载 url。目前，点击没有任何反应。这是我的代码：

```
$('#carousel').cycle({
        pager:      '.circle a', 
            pagerEvent: 'mouseover',
            pagerAnchorBuilder: function(idx, slide) { 
                // return selector string for existing anchor 
                return '.circle:eq(' + idx + ') a'; 
            } 
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T00:29:40.130

您可以为锚点执行单独的 JQuery 事件，与“循环”分开。

就像是：

```
$('#carousel').cycle({
    pager:      '.circle a', 
        pagerEvent: 'mouseover',
        pagerAnchorBuilder: function(idx, slide) { 
            // return selector string for existing anchor 
            return '.circle:eq(' + idx + ') a'; 
        } 
});

//assuming you use 'a' for anchors
$('.circle a').on('click', function(){
     //do your click event stuff.
); 
```

# linux - 如何让 R 读取我的环境变量？

> ID：12291418
> 
> 赞同：32
> 
> 时间：2012-09-06T00:16:46.153
> 
> 标签：linux, r, ubuntu, amazon-ec2, environment-variables

我在 EC2 Spot 实例上运行 R，我需要 R 来终止实例并在脚本运行后取消 Spot 请求。

为此，我已将“请求 ID”设置为环境变量`/.bashrc`，我的计划是在脚本准备好后将以下代码简单地调用到 R

```
system("ec2-cancel-spot-instance-requests $SIR") 
```

我遇到的问题是，当我`env`从外部 R 键入时，R 没有“看到”我看到的相同环境变量，因此该命令不起作用。

我已经检查过，如果我将环境变量设置为`/etc/environment`R 能够看到这些变量，但这是另一个问题。由于这些变量是动态的（每次创建 Spot 实例时，实例 ID 和请求 ID 都不同），我正在运行一个脚本来以以下形式创建它们：

```
export SIR=`cat /etc/ec2_instance_spot_id.txt` 
```

该文件包含动态 ID 的位置

那么，如何将“动态”环境变量插入`/etc/environment`？或者，我怎样才能让 R 读取环境变量`/.bashrc`？

任何正确方向的提示将不胜感激！

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-09-06T00:27:31.197

你想要`Sys.getenv()`的`Sys.getenv("PATH")`，说。

或者对于你的例子，试试

```
SIR <- Sys.getenv("SIR")   
system(paste("ec2-cancel-spot-instance-requests",  SIR)) 
```

至于在启动时设置变量，请参阅`help(Startup)`了解`~/.Renvironment`等

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2016-03-10T08:03:49.907

使用`Sys.getenv()`您可以看到当前环境中列出的所有变量。

但是，它们与当前 shell 中使用的不同，例如在 .profile 中指定的那些。

要为 R 设置变量，`.Renviron`请在您的主目录中创建一个文件并在那里写入

```
MYDIRECTORY="/home/wherever" 
```

重新启动 R 后，您将能够访问此变量

```
Sys.getenv("MYDIRECTORY") 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2019-05-22T18:16:10.350

我对 R 很陌生，但我的方法是：我将项目级环境变量存储在一个`.env`文件中。为了使其在 R 中可访问，我使用了

```
> readRenviron(".env") 
```

然后访问特定的变量

```
> Sys.getenv("RDS_UID") 
```

它工作得很好。

# android - Android，为 Spinner 设置适配器时出现口吃

> ID：12291420
> 
> 赞同：1
> 
> 时间：2012-09-06T00:17:07.107
> 
> 标签：android, android-listview, android-arrayadapter, android-spinner

我有一个列表视图，里面有几个列表项有微调器（其余的有复选框）。问题是，每次我打电话`spinner.setAdapter(ArrayAdapter);`时，列表视图都会结结巴巴。如果我在 getView() 中注释掉该行，则列表视图效果很好，如您所问的那样流畅。使用该行，listview 每次遇到新列表时都会卡顿。

我已经尝试了一些方法来帮助解决这个问题。起初，我认为这可能是从 中提取字符串数组的操作`R.array.somestringarray`，因此我将这些字符串数组加载到另一个数组中，以便在需要它们之前将它们放在内存中。那没有用。然后我假设这是适配器的实际创建，因为我当时的代码看起来像

```
 ArrayAdapter<String> spinAdapter = new ArrayAdapter<String>(ScoreCounter.this,android.R.layout.simple_spinner_dropdown_item, forAdapter);
    holder.spin.setAdapter(spinAdapter); 
```

所以我事先创建了所有创建的所有 ArrayAdapters 并将它们放在一个数组中，所以我的代码如下所示：

```
 holder.spin.setAdapter(masterSpinAdapter[position]); 
```

那还是结巴。似乎设置 ArrayAdapter 的简单行为会导致列表视图滞后。这是我的整个 getView()：

```
@Override
    public View getView(int position, View convertView, ViewGroup parent){
        if(convertView==null){
            LayoutInflater inflator = ScoreCounter.this.getLayoutInflater();
            convertView = inflator.inflate(R.layout.spinner_item , parent, false);

            ViewHolder holder = new ViewHolder();
            holder.cbox = (CheckBox)convertView.findViewById(R.id.scoreCheck);
            holder.spin = (Spinner)convertView.findViewById(R.id.scoreSpinner);
            holder.missionTitle = (TextView)convertView.findViewById(R.id.missionTitle);
            holder.missionDescription = (TextView) convertView.findViewById(R.id.missionDescription);
            holder.checkListen = new checkListener();
            holder.itemListen = new itemListener();

            convertView.setTag(holder);
        }

        ViewHolder holder = (ViewHolder)convertView.getTag();

        if(position==1||position==2||position==5||position==6||position==13||position==15){
            holder.spin.setVisibility(0x00000004);
            holder.spin.setEnabled(false);
            holder.cbox.setVisibility(0);
            holder.cbox.setEnabled(true);

            holder.cbox.setChecked(shouldBeChecked[position]);

            holder.checkListen.setRow(position);

            holder.cbox.setOnClickListener(holder.checkListen);
        }else{
            holder.spin.setVisibility(0);
            holder.spin.setEnabled(true);
            holder.cbox.setVisibility(0x00000004);
            holder.cbox.setEnabled(false);
            holder.spin.setAdapter((ArrayAdapter)masterSpinAdapter[position]);

            holder.itemListen.setRosPos(position);

            holder.spin.setOnItemSelectedListener(holder.itemListen);
            holder.spin.setSelection(spinnerPosition[position]);
        }
        holder.missionTitle.setText(missions[position]);
        holder.missionDescription.setText(descriptions[position]);

        return convertView;
    } 
```

我绝对不是listviews方面的专家，所以我原本以为我可能在getView中做了太多的逻辑。但是，如果我简单地注释掉 holder.spin.setAdapter(args)，列表视图会非常平滑，并带有一堆无用的微调器。我以前在列表视图中看到过微调器。我可以做些什么来防止滚动时出现口吃？我考虑过使用适配器预设预先创建每个微调器，但我不知道如何将预制微调器对象绑定到视图 ID。

我想对此提出一些建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T01:48:07.397

经过大量测试，我发现 android 设置具有一些长项的适配器比设置很多短项要慢得多。我有一个数字 -12 到 36 的微调器，它的加载速度比 3 个项目中总共 30 个字符的微调器快得多（不是我预期的）。我最终只是移动到每个项目有更多字符的短列表的按钮。不幸的是，我希望我知道为什么

# iphone - 如何将字符串附加到 csv 文件行的末尾？

> ID：12291422
> 
> 赞同：0
> 
> 时间：2012-09-06T00:17:35.747
> 
> 标签：iphone, ios

我在应用程序文件夹中有一个 csv 文件，我通过输入行号得到一个特定的行，现在我想在该行附加一个小字符串。

# jquery - 在 IE7 上使用 jquery css 设置边框需要很长时间

> ID：12291424
> 
> 赞同：0
> 
> 时间：2012-09-06T00:17:50.680
> 
> 标签：jquery, css, internet-explorer-7, border

我在 IE7 中使用 HTTPWatch 来确定为什么我的一个页面加载如此缓慢。这只发生在 IE7 中，不会发生在任何其他浏览器中。我把它缩小到一个 jquery 行，它在两个容器上设置了一个边框。

当我注释掉第二行时，页面在 IE7 中的加载速度明显更快 - 与 7 相比为 2 秒。

```
 $('.ccl, .ccr').css({'min-height':maxHeight});
  $('.ccl, .ccr').css({'border':'1px solid #ccc'}); 
```

我以前从未经历过这种情况，并想知道是否有其他人看到过这种情况以及为什么会发生这种情况。代码没有问题，它可以工作，只是慢慢地。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T00:19:51.410

尝试这个？

```
var cached = $('.ccl, .ccr');
cached.css({'min-height':maxHeight});
cached.css({'border':'1px solid #ccc'}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T00:35:17.937

如果您指定元素名称，则 IE7 可以丢弃任何不是 div 的内容（尽管这在现代浏览器中对性能的影响很小）。将您的 CSS 属性也放在一个对象中。

```
$('div.ccl, div.ccr').css({
    'min-height':maxHeight,
    'border':'1px solid #ccc'
}); 
```

更好的是，如果页面的元素是唯一的（看起来像`.ccl`并且`.ccr`是列名），您可以添加一个 id，这将是最快的解决方案：

```
$('#ccl, #ccr').css({
    'min-height':maxHeight,
    'border':'1px solid #ccc'
}); 
```

如果您已确定添加边框的问题，然后添加一个类并让您的样式表处理它：

```
/* styles.css */

.ccl.border, .ccr.border {
  border: 1px solid #ccc;
}

/* site.js */
$('div.ccl, div.ccr').css('min-height', maxHeight).addClass('border'); 
```

# java - 一个简单的windows批处理文件来运行java

> ID：12291432
> 
> 赞同：2
> 
> 时间：2012-09-06T00:19:40.570
> 
> 标签：java, batch-file

我是 java 新手。我想从 Windows 批处理文件运行 java。我在目录中有一个已编译的类 Main.class。我想使用放在同一目录中的批处理文件来运行它。我有一个系统变量设置为`JAVA_HOME=C:\Program Files\Java\jdk1.7.0_06\bin`

如果我想先用批处理文件编译类怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T00:28:40.653

执行：

```
@echo off
"%JAVA_HOME%\java.exe" Main
PAUSE 
```

编译将用

```
"%JAVA_HOME%\javac" Main.java 
```

**可选的东西：**

`echo off`关闭命令回显到 cmd

`pause`这样 cmd 窗口不会在执行结束时立即关闭（因此您可以读取命令的输出）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T00:30:07.083

使用以下代码编译您的代码：

```
javac Main.java 
```

使用以下命令运行您的代码：

```
java Main =>starts your code 
```

要获取有关 javac 工具的更多信息（输出名称、禁用警告等...），请[按此处](http://www.cis.upenn.edu/~bcpierce/courses/629/jdkdocs/tooldocs/solaris/javac.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T07:01:57.343

```
javac cfm jar Main.jar Main.class manifest.txt 
```

制作一个 manifest.txt，其中包含：

```
Main-Class: Main 
```

后跟一个换行符以正常工作（按 Enter 一次）。并在输出的同一文件夹中创建一个批处理文件，其中包含：

```
@echo off
 set jarpath="Main.jar"
 java -jar %jarpath% %CD%Config.txt
 PAUSE 
```

运行批处理！:)

# xml - 在 LibGDX 中使用 XML 布局

> ID：12291434
> 
> 赞同：2
> 
> 时间：2012-09-06T00:20:07.370
> 
> 标签：xml, user-interface, interface, libgdx

我正在为基于 LibGDX 构建的小型应用程序项目开发 GUI。我想知道，鉴于可以通过编程方式在 LibGDX 视图的顶部添加默认的 Android 界面组件和布局，是否也可以简单地使用完整的 XML 布局？在我的特殊情况下，这将是一种更快的方法，如果没有必要，几乎没有理由使用 Scene2d.ui 类。

我一直无法让它工作，如果我需要使用 LibGDX 的界面构建工具，也没有特别的问题，但这条路线对我来说似乎更愉快。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T11:31:14.523

当您说可以以编程方式在 LibGDX 视图上添加 Android 界面组件时，我看不出您不能在 Android 上使用 XML 布局的原因。

我认为你也可以使用 XML 布局，但是你的项目将失去 LibGDX 的巨大优势——跨平台和桌面开发。您的项目只能在 Android 上运行。所以我也推荐使用 Scene2D ui。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T09:24:48.000

不，您不能使用本机 GUI，但您可以尝试使用其默认的 scene2d ui。对我来说，自己搭建一个 UI 框架是一个不错的选择。

# objective-c - CGAffineTransformationMake 在 iOS 5 中表现异常

> ID：12291435
> 
> 赞同：1
> 
> 时间：2012-09-06T00:20:17.213
> 
> 标签：objective-c, ios, ios5, core-graphics, cgaffinetransform

**关于：** iOS 5 & 6\. CGAffineTransformationMake

**我有：**一个 UILabel 和一个 UIImage

**我想做的事：**我正在尝试创建一张翻转卡。当我点击 UIImage 时，它​​应该水平翻转并隐藏并且 UILabel 应该出现。几乎就像水平翻转棒球卡一样，正面有图像，背面有文字。当您点击 UILabel 时，它会以相同的方式翻转显示 UIImage。

**问题是什么：**我的代码在 iOS 6 上表现完美，但在 iOS 5 上转换看起来很奇怪。在 iOS 6 上，图像水平翻转以隐藏自身并显示文本。点击 uilabel 翻转文本以隐藏它并显示图像。奇迹般有效。但是当我在 iOS 5 上运行它时，点击图像时，文本会从屏幕底部以 180 度旋转出现，并带有螺旋运动。

我不想`UIView transitionFromView: toView: duration: options: completion:^(bool)`仅仅因为还有一些其他不相关的问题与之相关，这是另一个线程的讨论。

**代码片段的详细信息：** 我的 UILabel 最初具有以下转换：

```
self.myLabel.transform = CGAffineTransformMake(0, 0, 0, 1, 0, 0); 
```

点击 UIImage 或 UILabel 调用以下方法

```
- (IBAction)flipImage:(id)sender {

    if(flipped == 0) {
            [UIView animateWithDuration:0.5
                          delay:0.0
                        options: UIViewAnimationCurveEaseIn
                        animations:^{

                             self.myImage.transform = CGAffineTransformMake(0, 0, 0, 1, 0, 0);
                             self.myLabel.transform = CGAffineTransformMake(1, 0, 0, 1, 0, 0);

                             flipped = 1;
                          } 
                             completion:^(BOOL finished){
                                 NSLog(@"Flipped!");
                          }];
    } else {
        [UIView animateWithDuration:0.5
                              delay:0.0
                            options: UIViewAnimationCurveEaseOut
                         animations:^{
                             self.myLabel.transform = CGAffineTransformMake(0, 0, 0, 1, 0, 0);
                             self.myImage.transform = CGAffineTransformMake(1, 0, 0, 1, 0, 0);
                             flipped = 0;
                         }
                         completion:^(BOOL finished){
                             NSLog(@"Flipped!");
                         }];
      }
} 
```

有什么帮助吗？

# bash - *nix shell 使用饼图

> ID：12291436
> 
> 赞同：-1
> 
> 时间：2012-09-06T00:20:17.100
> 
> 标签：bash, shell, charts, statistics

我遇到过这样一种情况，按百分比了解 shell 使用的细分会非常有帮助。例如，我正在寻找类似的东西

```
bash: X%, sh: Y%, csh, tcsh, zsh, ksh, dash, etc.. 
```

显然，我知道有几个复杂性 - 多个外壳、“使用”的定义、不确定性等等，但我希望看到从实际数据得出的知情答案，并基于一些规定的指标，即使结果可能是大错特错。

如果有历史数据表明偏好发生了变化，则将获得奖励。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T00:26:04.520

TIOBE指数怎么样：

[http://www.tiobe.com/index.php/content/paperinfo/tpci/index.html](http://www.tiobe.com/index.php/content/paperinfo/tpci/index.html)

它包括脚本语言（包括 C-shell 和 bash）的流行和历史。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T03:35:08.103

我的猜测是 BASH 现在是首选的 shell，占 shell 用户的绝大部分。它是 Linux 上的默认 shell，Linux 几乎接管了 Unix 世界。（是的，Linux 并不是真正的 Unix，但它非常接近）。

Csh 是 BSD 集的域，其中包括 SunOS 和 Mac OS X。但是，Mac OS X 在 10.4 版中切换到 Bash，而 Solaris 切换到 POSIX shell（在语法上类似于 Bash）。

有点历史...

大多数 Unix 用户使用 Csh 作为他们的默认 shell，但在 Bourne shell 中编程。Csh 在 Bourne shell 中缺少很多功能，例如别名和命令行编辑，当您以交互方式使用它时，这些功能非常有用。然而，Csh 是一个糟糕的编程外壳。Tom Christiansen[关于 Csh 的开创性论文在某种程度上](http://www.ooblick.com/text/CshProgrammingConsideredHarmful.html)敲定了 Csh 编程的协议。事实上，即使是基于 BSD 的系统也在启动脚本等中使用了 Bourne shell。

当 Kornshell 出现时，我与许多其他用户进行了切换。Kornshell 具有熟悉的 Bourne shell 语法，但也具有 Csh 所具有的高级用户功能。事实上，Kornshell 的命令历史能力远胜于 Csh 的命令历史。Kornshell 最大的问题是它归 AT&T 所有，并且不是开源的。几乎所有的商业 Unix 平台（除了 SunOS）都有 Kornshell 可用。但是，开源平台不能使用 Kornshell。

Bash 是在 1980 年代后期开发的，它是一个真正的 OSS shell，具有 Kornshell 的许多特性。然而，Bash 试图更符合 POSIX 标准（它采用了 Kornshell 的许多特性）。

我仍然更喜欢 Kornshell（主要是由于习惯），但我发现它在更少的系统上。我告诉大多数 Unix 新手学习 BASH，因为它拥有最多的资源并且最容易获得。

我的建议是不要太担心 Bash 与 Kornshell 与 Bourne Shell 与 Posix。它们都非常相似。忘记Csh。[Turbo Csh](http://www.tcsh.org/Welcome)官方页面自 2004 年以来一直没有更新。

如果您编写 shell 脚本，请使用所有 Bourne 类型 shell 中通用的功能。使用`printf`代替`echo`或`print`（Kornshell 功能），使用`[`and`]`代替`[[`and，`]]`因为双方括号在所有 shell 之间并不完全兼容。也避免使用数组。Bash 4.0 支持它们，但不支持早期版本。Kornshell 支持数字和字符串数组，但它们的声明方式与 Bash 不同。这仍然留下了大约 90% 的 shell 脚本功能。

此外，你最好用 Python 或 Perl 编写，它们更强大、更快速的脚本语言。另外，两者都比各种 shell更*独立于平台。*我编写了 shell 脚本，但只有几十行，然后我切换到真正的脚本语言。

# modx - ModX Revo：getResources 不按菜单索引排序

> ID：12291441
> 
> 赞同：2
> 
> 时间：2012-09-06T00:21:26.697
> 
> 标签：modx, modx-revolution, getresource

我想按菜单索引订购我的资源并具有以下代码：

```
[[!getResources? &parents=`50` &sortdir=`ASC` &sortby=`menuindex` &limit=`100` &includeTVs=`1`  &processTVs=`1` &tpl=`temp` ]] 
```

但这`sortby`只是行不通。

有谁知道我做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T15:54:13.623

如果您阅读文档，您会看到`sortby`-field 必须编码为 JSON 字符串。[http://rtfm.modx.com/display/ADDON/getResources](http://rtfm.modx.com/display/ADDON/getResources)

如果您想通过 menuindex 订购，这应该可以：

```
[[!getResources? &parents=`50` &sortdir=`ASC` &sortby=`{"menuindex":"DESC"}` &limit=`100` &includeTVs=`1`  &processTVs=`1` &tpl=`temp` ]] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T20:45:54.207

也许尝试在同一个调用中放置排序方向和排序依据。摆脱代码段调用中的 $sortdir 。

```
[[!getResources? &parents=`50` &sortby=`{menuindex:ASC}` &limit=`100` &includeTVs=`1`  &processTVs=`1` &tpl=`temp` ]] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T05:43:49.523

@擎天柱犯罪，

Json 格式是*可选*的。它可以像往常一样是一个字符串：

> [要排序的任何资源字段](http://rtfm.modx.com/display/revolution20/Resources#Resources-ResourcesResourceFields)（不包括模板变量）。一些常用的排序字段是publishon、menuindex、pagetitle等，但请参阅所有字段的资源文档

请检查您的 menuindex，可能它们具有相同的数字（例如：0s（零）），这使它们无法排序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-16T10:51:02.950

我有一个类似的问题。解决方案：

```
[[!getResources? &parents=`50` &sortdir=`ASC` &sortby=`{"menuindex":"ASC"}` &limit=`100` &includeTVs=`1`  &processTVs=`1` &tpl=`temp` ]] 
```

.

```
&sortdir=`ASC` &sortby=`{"menuindex":"ASC"}` 
```

# c# - 构建表达式树来表示 if-else

> ID：12291443
> 
> 赞同：6
> 
> 时间：2012-09-06T00:21:48.913
> 
> 标签：c#, expression-trees

在完整条件表达式上使用 ExpressionSerialization 反序列化表达式树，即三元运算符给出错误。如果我使用三元运算符，则会导致 FullConditionExpression（系统不支持的异常）

使用以下链接中的代码：

[http://archive.msdn.microsoft.com/exprserialization](http://archive.msdn.microsoft.com/exprserialization)

上面的链接有最新版本吗？

[http://metalinq.codeplex.com/](http://metalinq.codeplex.com/)

后来试过这个

```
public Expression<Func<object, string>> LabelCriteria { get; set; }

LabelCriteria = x =>
    {
      if (true)
          return "Cash";
      else      
          return " ";
    } 
```

表达式不支持 if - else 块。它给出了错误“带有语句体的 lambda 表达式不能转换为表达式树。有没有其他方法可以做到这一点。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T00:24:05.430

您必须使用条件运算符：

```
LabelCriteria = x => true ? "Cash" : " "; 
```

但是，编译器可能会因为常量折叠而修改表达式，因为条件是常量表达式 ( `true`)。尝试在那里使用一个变量，看看会发生什么。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-06T00:55:41.130

您可以使用像这里这样的方法：

```
string myFunction(Object obj){
     //here your if-else...
} 
```

* * *

```
LabelCriteria = x => myFunction(x); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-02-10T01:09:54.110

您可以使用 Expression API 显式构建表达式树，请参阅[https://msdn.microsoft.com/en-us/library/bb397951.aspx](https://msdn.microsoft.com/en-us/library/bb397951.aspx)

这是您的问题的代码：

```
 ParameterExpression x = Expression.Parameter(typeof (object), "x");
        ConditionalExpression body = Expression.IfThenElse(
            Expression.Constant(true),
            Expression.Constant("Cash"),
            Expression.Constant(" ")
            );

        LabelCriteria = Expression.Lambda<Func<object, string>>(body, x); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T14:44:22.107

我找到了解决方案。

我正在使用这段特定的代码

使用以下链接中的代码：

[http://archive.msdn.microsoft.com/exprserialization](http://archive.msdn.microsoft.com/exprserialization)

它没有处理完整的条件表达式，但它处理条件表达式。我刚刚在反序列化的开关盒中添加了 FullConditionalExpression 并且它起作用了。它与 switch 中的 ConditionalExpression 相同。

# mysql - SQL Count 函数查询

> ID：12291444
> 
> 赞同：4
> 
> 时间：2012-09-06T00:21:53.613
> 
> 标签：mysql, sql

我在尝试使用 SQL 中的 count 函数时遇到了一些麻烦。

我正在尝试计算具有特定名称的人数

例如：

```
Name | Number
==============
Ivan | 9      
Brody| 8
Ray  | 7 
```

并且如果有相同的实例按字母顺序排序。

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T00:22:59.780

使用`COUNT()`which is an`AGGREGATE FUNCTION`时需要有`GROUP BY`子句。尝试这个，

```
SELECT Name, COUNT(name)
FROM tableName
GROUP BY Name
ORDER BY COUNT(name) DESC 
```

或者你可以添加`ALIAS`它

```
SELECT Name, COUNT(name) totalCount
FROM tableName
GROUP BY Name
ORDER BY totalCount DESC 
```

# java - Java 7u7 setLookAndFeel 不起作用？

> ID：12291447
> 
> 赞同：2
> 
> 时间：2012-09-06T00:22:12.830
> 
> 标签：java, swing, netbeans, compiler-errors

在 Netbeans 7.2 中，当我输入时`setLookAndFeel();`说找不到该方法。我做错了什么？

```
import javax.swing.*;

public class SalutonFrame extends JFrame  {

    public SalutonFrame() throws UnsupportedLookAndFeelException {
        super("Saluton Mondo!");

        setLookAndFeel();

        setSize(350, 100);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T00:32:30.060

要设置框架的外观，您必须在构造函数之前通过 UIManager 进行设置。你可以这样做：

```
 UIManager.setLookAndFeel(UIManager.getCrossPlatformLookAndFeelClassName());
    JFrame someFrame = new JFrame(); 
```

或者您想要使用的外观和感觉的任何类，而不是示例中显示的基本 Java 外观。请参阅[此处](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html)了解更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T02:15:34.417

> ..找不到方法。

方法很像`getPonyRide()`。如果我们编写了未在类或它扩展的任何类中定义的方法，编译器将告知它们不存在。

如果您键入类似的内容，IDE 通常会显示一个下拉菜单。

```
instanceOfObject. 
```

..或者..

```
this. 
```

在`.`输入的那一刻（或稍后，取决于开发框的速度），应该出现一个可能的方法和属性的列表。在选择一种之前，请仔细查看各种可能性。

## 建议

1.  不要扩展框架，只需引用一个。更喜欢[组合而不是继承](http://en.wikipedia.org/wiki/Composition_over_inheritance)。
2.  不要调用`setSize()`，而是`pack()`在添加所有组件后调用。
3.  用于`JFrame.DISPOSE_ON_CLOSE`退出操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-20T11:33:59.557

看起来您正在阅读《Sams 在 24 小时内自学 Java，第 6 版？

无论如何，你可以这样做：

```
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.swing.*;

public class SalutonFrame extends JFrame {

    public SalutonFrame() throws UnsupportedLookAndFeelException {
        super("Saluton Mondo!");

        try {
            UIManager.setLookAndFeel(UIManager.getCrossPlatformLookAndFeelClassName());
            JFrame someFrame = new JFrame();

            setSize(350, 100);
            setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        } 

        catch (Exception exc) {
            //  error handling
        }
    }
} 
```

或者你可以这样做：

```
import javax.swing.*;

public class SalutonFrame extends JFrame {

    public SalutonFrame() {

        super("Saluton Frame");
        setLookAndFeel();
        setSize(350, 100);
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setVisible(true);
    }

    private void setLookAndFeel() {

        try {        

            UIManager.setLookAndFeel(UIManager.getCrossPlatformLookAndFeelClassName());

        } catch (Exception exc) {
            //  error handling
        }
    }

    public static void main(String[] args) {
        SalutonFrame sal = new SalutonFrame();
    }
} 
```

# svn - 将代码从 svn 迁移到 google 代码

> ID：12291453
> 
> 赞同：0
> 
> 时间：2012-09-06T00:23:11.257
> 
> 标签：svn, google-code

我知道我们可以将存储库从 google 迁移到另一个存储库服务器并保留历史记录，如此处所述。[谷歌代码 svn 迁移](https://stackoverflow.com/questions/1846050/google-code-svn-migration)

我想知道我是否可以反过来做。我在私有 svn 存储库中有一些代码，我想将它们移动到谷歌代码而不丢失历史记录。我可以将 svn 转储图像导入谷歌代码网站吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T00:28:40.453

此处记录了程序：[http](http://code.google.com/p/support/wiki/SubversionFAQ#How_do_I_import_an_existing_Subversion_repository) ://code.google.com/p/support/wiki/SubversionFAQ#How_do_I_import_an_existing_Subversion_repository ？

我想这很好地涵盖了它:)

# c# - 编辑 Graphics.DrawLine

> ID：12291458
> 
> 赞同：0
> 
> 时间：2012-09-06T00:24:21.797
> 
> 标签：c#

> **可能重复：**
> [Graphics.DrawLine 的覆盖](https://stackoverflow.com/questions/12291253/override-of-graphics-drawline)

有没有办法直接编辑 Graphics.DrawLine 方法？

我希望对该方法进行一些更改，以包括额外的验证和可能的其他内容。

我只需要指出正确的方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T00:25:49.307

为什么你需要？您应该将调用包装到您自己的方法中。

```
void DrawLine(Graphics g, ...) 
{
   Validate(...);
   g.DrawLine(...);
} 
```

# javascript - 谷歌地图热图图层点半径

> ID：12291459
> 
> 赞同：12
> 
> 时间：2012-09-06T00:24:23.810
> 
> 标签：javascript, google-maps, google-maps-api-3, google-earth

我希望能够以米为单位有效地指定点的半径。API 配置为使`radius`属性对于像素保持不变，因此放大会导致热图腐蚀（我知道您可以使热图不随`dissipating`属性腐蚀，但这会引发其他问题，即必须手动弄乱半径以使我的热图正确显示。这是热图[参考](https://developers.google.com/maps/documentation/javascript/layers#JSHeatMaps)。

具体来说，我正在尝试在地图上显示概率分布。我有图像形式的分布，并希望将 0-1 权重映射到热图图层。（我可以而且不想覆盖图像）。

有什么建议么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-06T02:31:27.307

好的，我尝试了一些方法：

使用[墨卡托投影示例（检查源）](http://code.google.com/apis/maps/documentation/javascript/examples/map-coordinates.html)从 latLng 中提取任何点的 x,y 像素坐标，以便稍后使用[几何库，特别是 computeOffset 函数](https://developers.google.com/maps/documentation/javascript/geometry#Navigation)获取另一个 latLng 距离“DM”（以米为单位）到在前一个的右侧，将差值（以像素为单位）作为绝对值“DP”，然后从那里得到“pixelsPerMeter”比率 DP/DM。

因此，如果您希望半径为 100 米，只需将属性设置为`{radius:Math.floor(desiredRadiusPerPointInMeters*pixelsPerMeter)}`

并且要处理缩放的变化，只需使用监听器

```
 google.maps.event.addListener(map, 'zoom_changed', function () {
          heatmap.setOptions({radius:getNewRadius()});
      }); 
```

我上传了一个[小例子](http://jsbin.com/rorecuce/1/)（尝试缩放），您可以使用底部的按钮检查距离是否正确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-26T16:58:26.420

对于任何想要拥有@lccarrasco 的 jsbin 示例的精美包装的咖啡脚本版本的人，您可以查看我使用他的代码创建的[MercatorProjection 咖啡脚本类的要点。](https://gist.github.com/schenkman/222ea4e35f759cacb685)

加载类后，可以将其与以下内容一起使用：

```
map = new google.maps.Map(...)
heatmap = new google.maps.visualization.HeatmapLayer({map: map})
google.maps.event.addListener(map, 'zoom_changed', () ->
  projection = new MercatorProjection()
  heatmap.setOptions(radius: projection.getNewRadius(map, 15))
) 
```

其中“15”是以米为单位的半径，您可以使用它或通过其他方式以编程方式设置，以使您的热图看起来像您想要的那样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-05T03:21:51.807

我通过使用@lccarrasco 使用的侦听器解决了这个问题，但是在我的 getNewRadius() 函数中，我使半径相对于缩放发生了变化。

IE。var radius = (somemultiplicationfactor)/(Math.pow(2,(20-zoom)));

这是因为每个缩放的缩放比例为 2:1

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-01-25T05:37:43.497

基于谷歌论坛帖子和[这个 GIS 帖子](https://gis.stackexchange.com/questions/7430/what-ratio-scales-do-google-maps-zoom-levels-correspond-to)，我想出了一个简单而完整的解决方案。

首先，定义一个函数以获取给定缩放级别的半径（以米为单位）：因为不同纬度存在缩放差异，您需要输入`someLatValue`，例如您计划使用的地图中心。虽然是一个近似值，但对于一个小国家大小的准确结果来说已经足够了。您还需要以米为单位指定所需的半径大小。

如果您愿意，您可以更改函数以将这些值作为参数读取（例如，获取当前地图视图中心的纬度和/或基于数据属性的半径），但如果它们是静态的，这使得他们的全局变量更容易。

```
var someLatValue = 35.726332;
var desiredRadiusInMeters = 1500;

function getHeatmapRadius(){
  metersPerPx = 156543.03392 * Math.cos(someLatValue * Math.PI / 180) / Math.pow(2,theMap.getZoom());
  return desiredRadiusInMeters / metersPerPx;
}; 
```

这将返回所需米数和特定纬度周围缩放级别的（近似）半径（以像素为单位）。该值`156543.03392`基于谷歌实际用于谷歌地图的地球的近似半径。

所以，假设你有一个这样的热图：

```
fixedRadiusHeatmap = new google.maps.visualization.HeatmapLayer({
  data: myCoords,
  map: theMap
}); 
```

为了设置初始视图，只需在将热图添加到地图之前调用该函数。

```
fixedRadiusHeatmap.setOptions({radius: getHeatmapRadius()});
fixedRadiusHeatmap.setMap(theMap); 
```

然后每次缩放地图时都需要重新设置半径，可以这样完成：

```
google.maps.event.addListener(theMap, 'zoom_changed', function () {
  fixedRadiusHeatmap.setOptions({radius: getHeatmapRadius()});
}); 
```

在我的情况下，它有点滞后，所以它在固定半径出现之前显示（愚蠢地聚合和考虑不周）默认热图。也许有一种方法可以延迟渲染以使过渡更平滑，但这是一个不同的问题。

# node.js - ExpressJS：redis 宕机了怎么办？

> ID：12291460
> 
> 赞同：1
> 
> 时间：2012-09-06T00:24:25.260
> 
> 标签：node.js, express, node-redis

有问题的代码：[app.js](https://github.com/achan/didgomezscore/blob/master/app.js)

```
var redis = require('redis');
var redisClient = redis.createClient();
redisClient.on('error', function (err) {
  console.error('There was an Error ' + err);
});

// do stuff

redisClient.quit(function(err, res) {
  console.log('closing redis client.');
}); 
```

我正在尝试使用[node_redis](https://github.com/mranney/node_redis)从我的 node.js 应用程序连接到 Redis。但是，我不太确定如何处理 Redis 宕机的情况。

我有一堆`client.on('error', function(err) {})`'s 但他们似乎从未被调用过。这是处理它的正确方法吗？我叫错了吗？

我刚开始使用redis/node/express，所以请原谅我的无知。

**编辑**正如 Vadim 帮助我意识到的那样，似乎我实际上`client.on('error')`在 app.js 中正确地捕捉到了错误。但是，当 redis 关闭时，[**我的路由**](https://github.com/achan/didgomezscore/blob/master/routes/index.js)无法捕获错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T00:35:04.817

我认为这个[`end`](https://github.com/mranney/node_redis#end)事件是你需要的。

> 当已建立的 Redis 服务器连接关闭时，客户端将发出结束信号。

**更新：**

如果您使用的是 node.js >= 0.8.0，您可以使用[域模块](http://nodejs.org/api/domain.html)功能来捕获异步代码中的错误。

您可以将[connect-domain](https://github.com/baryshev/connect-domain)模块用于您的 express/connect 应用程序。它允许您在异步代码中抛出错误并使用错误处理程序捕获它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T04:24:20.790

由于 node_redis 是异步的，因此`redisClient.on('error')`在我开始向`redisClient`.

我解决此问题的方法是将“成功”代码放入`redisClient.on('connect')`处理程序中，该处理程序仅在 redisClient 成功连接后调用。我的后备代码在`redisClient.on('error')`.

[你可以在这个 github changeset](https://github.com/achan/didgomezscore/commit/0176fb3730d2bde04eb11b01ff0c6e82e5f25aed)中看到更多关于我如何解决这个问题的信息。

# windows - 签名的 INF 驱动程序在它被签名的计算机上工作，而不是在其他计算机上工作

> ID：12291461
> 
> 赞同：21
> 
> 时间：2012-09-06T00:24:49.113
> 
> 标签：windows, driver, authenticode, inf, driver-signing

我的公司从 Go Daddy购买了[司机签名证书。](http://www.godaddy.com/ssl/code-signing-certificate.aspx?ci=13314)我用它签署了一个简单的 INF 文件，该文件是我们使用 Microsoft 的 usbser.sys 的一些 USB 设备的驱动程序。一切似乎都在我签署它的 Windows 7 64 位计算机上运行：如果我右键单击 INF 文件并选择“安装”，那么我看到的第二个警告是这个显示正确发布者名称的好警告：

![发布者是正确的](../Images/211352cfc1e9ca0acb9f33b3c30f9cf8.png)

但是，如果我转到另一台计算机（Windows Vista 64 位），右键单击 INF 文件，然后选择“安装”，然后我会收到以下错误消息：

![无法验证发布者](../Images/34e403160b7ef1e78bf879b6ab807284.png)

这让我觉得我的驱动程序没有正确签名，它在我的计算机上看起来不错的唯一原因是因为我在 Go Daddy 的安装过程中安装了一些根/中间/交叉证书。我绝对希望我的用户能够看到我们是经过验证的发布者，而无需在他们的计算机上手动安装证书。

INF 文件和 .cat 文件在同一目录中。

有谁知道为什么会发生这种情况以及我该如何解决？

我怀疑主要问题是我在运行时收到此错误`signtool verify /v pololu.cat`（下面有更多详细信息），我还没有弄清楚原因：

> SignTool 错误：已处理证书链，但在信任提供者不信任的根证书中终止。

## 我的程序的详细信息

*司机签名证书*是 Go Daddy 几周前推出的新产品。我不完全确定它与*Code Signing Certificate*有何不同，但价格相同。我按照[Go Daddy 网站上的说明下载并安装了证书](http://support.godaddy.com/help/article/6973/downloading-and-installing-a-driver-signing-certificate)，但说明与实际情况并不完全相符。在步骤 1 中安装 Microsoft 交叉证书后，我看到一条红色警告消息，上面写着：

> 在安装证书之前，您必须使用 Windows 更新更新您的根证书或从我们的存储库手动下载并安装根证书。

我不知道该怎么办。我确实从他们的存储库中安装了一些 GoDaddy 根证书，但没有明显区别。

我安装了[Windows Driver Kit (WDK)](http://msdn.microsoft.com/en-us/library/windows/hardware/gg487428.aspx)的最新版本 (8.0)，然后安装了[适用于 Windows 8 的 Windows Software Development Kit (SDK)](http://msdn.microsoft.com/en-us/windows/hardware/hh852363.aspx)的最新版本 (8.0) 。这使我可以访问`inf2cat`和`signtool`实用程序。这两个工具包都是在上个月发布的，所以我们可能正在处理一些新的错误。

在一个新目录中，我放了三个文件：

1.  `pololu_usb_to_serial.inf`，我要签名的INF文件。它很长但很简单；[你可以在这里阅读](https://gist.github.com/3647208)。这个 INF 文件是一个独立的驱动程序；我们的驱动程序包中不需要其他文件。该文件与我们公司多年来成功分发（未签名）的版本基本相同，但我必须对 Inf2Cat 进行一些更改才能接受它。
2.  `mscvr-cross-gdroot-g2.crt`，我从[Go Daddy 证书存储库](https://certs.godaddy.com/anonymous/repository.seam)下载的。我相信这是证明“Go Daddy Root Certificate Authority - G2”受微软信任的交叉证书，但我不完全确定这是否是正确的证书。
3.  `sign_it.bat`，我运行的批处理文件进行签名。

批处理文件只包含：

```
"C:\Program Files (x86)\Windows Kits\8.0\bin\x86\inf2cat" /v /driver:%~dp0 /os:XP_X86,Vista_X86,Vista_X64,7_X86,7_X64,8_X86,8_X64

"C:\Program Files (x86)\Windows Kits\8.0\bin\x86\signtool" sign /v /ac "mscvr-cross-gdroot-g2.crt" /n "Pololu Corporation" /t http://tsa.starfieldtech.com pololu.cat 
```

第一个命令`inf2cat`从 Windows Driver Kit 调用。该`/v`选项使其变得冗长。该`/driver:%~dp0`选项将其指向包含批处理文件的目录；a`.`由于某种原因不起作用，这比对完整路径进行硬编码要好。该`/os`选项指定了我希望使用此驱动程序包支持的所有操作系统。此命令创建`pololu.cat`.

第二个命令`signtool`从 Windows 软件开发工具包调用以对目录文件进行签名。该`/v`选项使其变得冗长。该`/ac`选项指定使用哪个交叉证书（参见上面的#2）。该`/n`选项指定要使用的证书的名称（该证书根据 安装在我的计算机上`certmgr.msc`）。该`/t`选项指定 Go Daddy 时间戳服务器的 URL。

这是我运行批处理文件时命令提示符中的输出：

```
C:\Users\david.POLOLU\Desktop\sign_it>"C:\Program Files (x86)\Windows Kits\8.0\b
in\x86\inf2cat" /v /driver:C:\Users\david.POLOLU\Desktop\sign_it\ /os:XP_X86,Vis
ta_X86,Vista_X64,7_X86,7_X64,8_X86,8_X64
Processing directory (C:\Users\david.POLOLU\Desktop\sign_it\) file (mscvr-cross-
gdroot-g2.crt)
Processing directory (C:\Users\david.POLOLU\Desktop\sign_it\) file (pololu_usb_t
o_serial.inf)
Processing directory (C:\Users\david.POLOLU\Desktop\sign_it\) file (sign_it.bat)

Parsing INF: C:\Users\david.POLOLU\Desktop\sign_it\pololu_usb_to_serial.inf
Finished parsing INFs
Processing INF: C:\Users\david.POLOLU\Desktop\sign_it\pololu_usb_to_serial.inf
Finished processing INFs
Testing driver package...
Testing driver package...
Testing driver package...
Testing driver package...
Testing driver package...
Testing driver package...
Testing driver package...
Testing driver package...
Testing driver package...
Testing driver package...
Testing driver package...
Testing driver package...
Testing driver package...
Testing driver package...
Testing driver package...

Signability test complete.

Errors:
None

Warnings:
None

Catalog generation complete.
C:\Users\david.POLOLU\Desktop\sign_it\pololu.cat

C:\Users\david.POLOLU\Desktop\sign_it>"C:\Program Files (x86)\Windows Kits\8.0\b
in\x86\signtool" sign /v /ac "mscvr-cross-gdroot-g2.crt" /n "Pololu Corporation"
 /t http://tsa.starfieldtech.com pololu.cat
The following certificate was selected:
    Issued to: Pololu Corporation
    Issued by: Go Daddy Secure Certificate Authority - G2
    Expires:   Sat Aug 31 11:35:25 2013
    SHA1 hash: E2FE1275AD8DA85DEABA67ADE26BE42E0834B4C0

Cross certificate chain (using machine store):
    Issued to: Microsoft Code Verification Root
    Issued by: Microsoft Code Verification Root
    Expires:   Sat Nov 01 06:54:03 2025
    SHA1 hash: 8FBE4D070EF8AB1BCCAF2A9D5CCAE7282A2C66B3

        Issued to: Go Daddy Root Certificate Authority - G2
        Issued by: Microsoft Code Verification Root
        Expires:   Thu Apr 15 13:07:40 2021
        SHA1 hash: 842C5CB34B73BBC5ED8564BDEDA786967D7B42EF

            Issued to: Go Daddy Secure Certificate Authority - G2
            Issued by: Go Daddy Root Certificate Authority - G2
            Expires:   Sat May 03 00:00:00 2031
            SHA1 hash: 27AC9369FAF25207BB2627CEFACCBE4EF9C319B8

                Issued to: Pololu Corporation
                Issued by: Go Daddy Secure Certificate Authority - G2
                Expires:   Sat Aug 31 11:35:25 2013
                SHA1 hash: E2FE1275AD8DA85DEABA67ADE26BE42E0834B4C0

Done Adding Additional Store
Successfully signed: pololu.cat

Number of files successfully Signed: 1
Number of warnings: 0
Number of errors: 0 
```

正如我所说，我将 .cat 和 .inf 文件一起保存在同一个目录中，但它们只有在我签名后才能在计算机上正常工作。

## 使用 Signtool 进行验证

Microsoft的`signtool`实用程序还具有“验证”功能，可让您验证您的签名是否正确。验证时可以使用三种不同的策略，它们各自给出不同的结果：

*   **Windows 驱动程序验证策略**说我的签名链不会追溯到 Microsoft，并打印一条错误消息，说明我的 root 是如何不受信任的。这对我来说似乎是个问题。
*   **默认 Authenticode 验证策略**( ) 还说我的`/pa`签名链不会追溯到 Microsoft，但它没有给出错误。
*   **内核模式驱动程序签名策略**（可能不适用，`/kp`因为我没有签署内核模式驱动程序）说我的签名链确实可以追溯到 Microsoft，并且没有给出错误。

有谁知道 Windows 对 INF 文件使用哪种策略？这至少可以帮助我缩小问题的范围。

以下是来自的完整、详细的输出`signtool verify`：

```
C:\Users\david.POLOLU\Desktop\sign_it>"C:\Program Files (x86)\Windows Kits\8.0\b
in\x86\signtool" verify /v pololu.cat

Verifying: pololu.cat
Signature Index: 0 (Primary Signature)
Hash of file (sha1): 09A611ECC83E61646DB967D4C23EED725B903C1B

Signing Certificate Chain:
    Issued to: Go Daddy Root Certificate Authority - G2
    Issued by: Go Daddy Root Certificate Authority - G2
    Expires:   Thu Dec 31 16:59:59 2037
    SHA1 hash: 47BEABC922EAE80E78783462A79F45C254FDE68B

        Issued to: Go Daddy Secure Certificate Authority - G2
        Issued by: Go Daddy Root Certificate Authority - G2
        Expires:   Sat May 03 00:00:00 2031
        SHA1 hash: 27AC9369FAF25207BB2627CEFACCBE4EF9C319B8

            Issued to: Pololu Corporation
            Issued by: Go Daddy Secure Certificate Authority - G2
            Expires:   Sat Aug 31 11:35:25 2013
            SHA1 hash: E2FE1275AD8DA85DEABA67ADE26BE42E0834B4C0

The signature is timestamped: Wed Sep 05 16:22:34 2012
Timestamp Verified by:
    Issued to: Starfield Services Root Certificate Authority
    Issued by: Starfield Services Root Certificate Authority
    Expires:   Mon Dec 31 16:59:59 2029
    SHA1 hash: 5D003860F002ED829DEAA41868F788186D62127F

        Issued to: Starfield Services Timestamp Authority
        Issued by: Starfield Services Root Certificate Authority
        Expires:   Wed Apr 26 00:00:00 2017
        SHA1 hash: AEAC793CDD107ACFB314A2FE384A8F16840B7C26

SignTool Error: A certificate chain processed, but terminated in a root
        certificate which is not trusted by the trust provider.

Number of files successfully Verified: 0
Number of warnings: 0
Number of errors: 1

C:\Users\david.POLOLU\Desktop\sign_it>"C:\Program Files (x86)\Windows Kits\8.0\b
in\x86\signtool" verify /v /pa pololu.cat

Verifying: pololu.cat
Signature Index: 0 (Primary Signature)
Hash of file (sha1): 09A611ECC83E61646DB967D4C23EED725B903C1B

Signing Certificate Chain:
    Issued to: Go Daddy Root Certificate Authority - G2
    Issued by: Go Daddy Root Certificate Authority - G2
    Expires:   Thu Dec 31 16:59:59 2037
    SHA1 hash: 47BEABC922EAE80E78783462A79F45C254FDE68B

        Issued to: Go Daddy Secure Certificate Authority - G2
        Issued by: Go Daddy Root Certificate Authority - G2
        Expires:   Sat May 03 00:00:00 2031
        SHA1 hash: 27AC9369FAF25207BB2627CEFACCBE4EF9C319B8

            Issued to: Pololu Corporation
            Issued by: Go Daddy Secure Certificate Authority - G2
            Expires:   Sat Aug 31 11:35:25 2013
            SHA1 hash: E2FE1275AD8DA85DEABA67ADE26BE42E0834B4C0

The signature is timestamped: Wed Sep 05 16:22:34 2012
Timestamp Verified by:
    Issued to: Starfield Services Root Certificate Authority
    Issued by: Starfield Services Root Certificate Authority
    Expires:   Mon Dec 31 16:59:59 2029
    SHA1 hash: 5D003860F002ED829DEAA41868F788186D62127F

        Issued to: Starfield Services Timestamp Authority
        Issued by: Starfield Services Root Certificate Authority
        Expires:   Wed Apr 26 00:00:00 2017
        SHA1 hash: AEAC793CDD107ACFB314A2FE384A8F16840B7C26

Successfully verified: pololu.cat

Number of files successfully Verified: 1
Number of warnings: 0
Number of errors: 0

C:\Users\david.POLOLU\Desktop\sign_it>"C:\Program Files (x86)\Windows Kits\8.0\b
in\x86\signtool" verify /v /kp pololu.cat

Verifying: pololu.cat
Signature Index: 0 (Primary Signature)
Hash of file (sha1): 09A611ECC83E61646DB967D4C23EED725B903C1B

Signing Certificate Chain:
    Issued to: Go Daddy Root Certificate Authority - G2
    Issued by: Go Daddy Root Certificate Authority - G2
    Expires:   Thu Dec 31 16:59:59 2037
    SHA1 hash: 47BEABC922EAE80E78783462A79F45C254FDE68B

        Issued to: Go Daddy Secure Certificate Authority - G2
        Issued by: Go Daddy Root Certificate Authority - G2
        Expires:   Sat May 03 00:00:00 2031
        SHA1 hash: 27AC9369FAF25207BB2627CEFACCBE4EF9C319B8

            Issued to: Pololu Corporation
            Issued by: Go Daddy Secure Certificate Authority - G2
            Expires:   Sat Aug 31 11:35:25 2013
            SHA1 hash: E2FE1275AD8DA85DEABA67ADE26BE42E0834B4C0

The signature is timestamped: Wed Sep 05 16:22:34 2012
Timestamp Verified by:
    Issued to: Starfield Services Root Certificate Authority
    Issued by: Starfield Services Root Certificate Authority
    Expires:   Mon Dec 31 16:59:59 2029
    SHA1 hash: 5D003860F002ED829DEAA41868F788186D62127F

        Issued to: Starfield Services Timestamp Authority
        Issued by: Starfield Services Root Certificate Authority
        Expires:   Wed Apr 26 00:00:00 2017
        SHA1 hash: AEAC793CDD107ACFB314A2FE384A8F16840B7C26

Cross Certificate Chain:
    Issued to: Microsoft Code Verification Root
    Issued by: Microsoft Code Verification Root
    Expires:   Sat Nov 01 06:54:03 2025
    SHA1 hash: 8FBE4D070EF8AB1BCCAF2A9D5CCAE7282A2C66B3

        Issued to: Go Daddy Root Certificate Authority - G2
        Issued by: Microsoft Code Verification Root
        Expires:   Thu Apr 15 13:07:40 2021
        SHA1 hash: 842C5CB34B73BBC5ED8564BDEDA786967D7B42EF

            Issued to: Go Daddy Secure Certificate Authority - G2
            Issued by: Go Daddy Root Certificate Authority - G2
            Expires:   Sat May 03 00:00:00 2031
            SHA1 hash: 27AC9369FAF25207BB2627CEFACCBE4EF9C319B8

                Issued to: Pololu Corporation
                Issued by: Go Daddy Secure Certificate Authority - G2
                Expires:   Sat Aug 31 11:35:25 2013
                SHA1 hash: E2FE1275AD8DA85DEABA67ADE26BE42E0834B4C0

Successfully verified: pololu.cat

Number of files successfully Verified: 1
Number of warnings: 0
Number of errors: 0 
```

在我签署驱动程序的计算机（它正在工作的地方）和另一台计算机（它不工作的地方）上运行时，输出看起来相同。

## StackOverflow 上的类似问题

[Thawte 64 位 Windows 驱动程序签名](https://stackoverflow.com/questions/10433122/thawte-driver-signing-for-64-bit-windows)- 这个人的问题的解决方案是将 CatalogFile 指令添加到 INF 文件，但我已经有了。( `CatalogFile=pololu.cat`)。

## 编辑#1：签署可执行文件有效

我使用带有相同选项的 signtool 来签署可执行文件（NSIS 安装程序），它在两台计算机上的第一次尝试中都能正常工作。所以我认为 INF 驱动程序文件的签名策略有些不同，这就是让我搞砸的原因。

## 编辑 #2：GoDaddy 证书上的警告

如果我双击`mscvr-cross-gdroot-g2.crt`，在“常规”选项卡中会显示“Windows 没有足够的信息来验证此证书”。在“证书路径”选项卡的“证书状态：”下，显示“找不到此证书的颁发者。”。如果我双击`gd_ms_drv_sign_bundle.p7b`（来自 GoDaddy 的证书包）并打开第一个证书，我也会看到相同的警告。

这两个证书的颁发者应该是 Microsoft 代码验证根。我应该担心那个警告信息吗？

## 编辑#3：删除 GoDaddy 的证书

GoDaddy 高级支持团队的 Lindsay 回复了我。她[从 globalsign 链接到此页面](https://www.globalsign.com/support/code-signing/codesign_vista64.php)，该页面解释了如何在签署驱动程序的计算机上从 CA 卸载根证书和中间证书。Lindsay 说，如果您不执行此步骤，签名工具将假定这些证书存在于其他计算机上，因此不会将它们包含在签名中。

有谁知道如何检查哪些证书被“导入”到签名中？我可以使用哪些工具来查看 Lindsay 和 GlobalSign 是否正确？

顺便说一句，我们周围有 Windows XP 计算机，但微软很快就会停止支持该操作系统。尽管 GlobalSign 说了什么，但必须*有*一种方法可以在 Windows 7 上完成这项工作。

根据 Lindsay 的建议，我按照 Microsoft 的说明[关闭自动根证书更新](http://technet.microsoft.com/en-us/cc734054)，然后使用 UI`certmgr.msc`删除“受信任的根证书颁发机构”和“中级证书颁发机构”中的所有 GoDaddy 证书。然后我重新签署了我的 inf 文件。

不幸的是，那没有用！签名后，我仔细检查了所有 GoDaddy 证书是否仍被删除。

我没有收到来自 GoDaddy 的关于 的输出的反馈`signtool verify`，或者我在进行验证时应该检查的驱动程序签名策略的任何输入。我希望他们可以只查看验证输出并告诉我我做错了什么，或者告诉我正确的输出是什么样的。

`signtool verify`为了完整起见，以下是我删除这些证书并重新签署驱动程序后的三个输出：

```
C:\Users\david.POLOLU\Desktop\sign_inf>"C:\Program Files (x86)\Windows Kits\8.0\
bin\x86\signtool.exe" verify /v pololu.cat

Verifying: pololu.cat
Signature Index: 0 (Primary Signature)
Hash of file (sha1): 5AE4F370471009C8B0ED936C9AE19ED14ABD67D7

Signing Certificate Chain:
    Issued to: Go Daddy Root Certificate Authority - G2
    Issued by: Microsoft Code Verification Root
    Expires:   Thu Apr 15 13:07:40 2021
    SHA1 hash: 842C5CB34B73BBC5ED8564BDEDA786967D7B42EF

        Issued to: Go Daddy Secure Certificate Authority - G2
        Issued by: Go Daddy Root Certificate Authority - G2
        Expires:   Sat May 03 00:00:00 2031
        SHA1 hash: 27AC9369FAF25207BB2627CEFACCBE4EF9C319B8

            Issued to: Pololu Corporation
            Issued by: Go Daddy Secure Certificate Authority - G2
            Expires:   Sat Aug 31 11:35:25 2013
            SHA1 hash: E2FE1275AD8DA85DEABA67ADE26BE42E0834B4C0

The signature is timestamped: Wed Sep 12 14:52:19 2012
Timestamp Verified by:
    Issued to: Starfield Services Root Certificate Authority
    Issued by: Starfield Services Root Certificate Authority
    Expires:   Mon Dec 31 16:59:59 2029
    SHA1 hash: 5D003860F002ED829DEAA41868F788186D62127F

        Issued to: Starfield Services Timestamp Authority
        Issued by: Starfield Services Root Certificate Authority
        Expires:   Wed Apr 26 00:00:00 2017
        SHA1 hash: AEAC793CDD107ACFB314A2FE384A8F16840B7C26

SignTool Error: A certificate chain processed, but terminated in a root
        certificate which is not trusted by the trust provider.

Number of files successfully Verified: 0
Number of warnings: 0
Number of errors: 1

C:\Users\david.POLOLU\Desktop\sign_inf>"C:\Program Files (x86)\Windows Kits\8.0\
bin\x86\signtool.exe" verify /v /pa pololu.cat

Verifying: pololu.cat
Signature Index: 0 (Primary Signature)
Hash of file (sha1): 5AE4F370471009C8B0ED936C9AE19ED14ABD67D7

Signing Certificate Chain:
    Issued to: Go Daddy Root Certificate Authority - G2
    Issued by: Microsoft Code Verification Root
    Expires:   Thu Apr 15 13:07:40 2021
    SHA1 hash: 842C5CB34B73BBC5ED8564BDEDA786967D7B42EF

        Issued to: Go Daddy Secure Certificate Authority - G2
        Issued by: Go Daddy Root Certificate Authority - G2
        Expires:   Sat May 03 00:00:00 2031
        SHA1 hash: 27AC9369FAF25207BB2627CEFACCBE4EF9C319B8

            Issued to: Pololu Corporation
            Issued by: Go Daddy Secure Certificate Authority - G2
            Expires:   Sat Aug 31 11:35:25 2013
            SHA1 hash: E2FE1275AD8DA85DEABA67ADE26BE42E0834B4C0

The signature is timestamped: Wed Sep 12 14:52:19 2012
Timestamp Verified by:
    Issued to: Starfield Services Root Certificate Authority
    Issued by: Starfield Services Root Certificate Authority
    Expires:   Mon Dec 31 16:59:59 2029
    SHA1 hash: 5D003860F002ED829DEAA41868F788186D62127F

        Issued to: Starfield Services Timestamp Authority
        Issued by: Starfield Services Root Certificate Authority
        Expires:   Wed Apr 26 00:00:00 2017
        SHA1 hash: AEAC793CDD107ACFB314A2FE384A8F16840B7C26

SignTool Error: WinVerifyTrust returned error: 0x800B010A
        A certificate chain could not be built to a trusted root authority.

Number of files successfully Verified: 0
Number of warnings: 0
Number of errors: 1

C:\Users\david.POLOLU\Desktop\sign_inf>"C:\Program Files (x86)\Windows Kits\8.0\
bin\x86\signtool.exe" verify /v /kp pololu.cat

Verifying: pololu.cat
Signature Index: 0 (Primary Signature)
Hash of file (sha1): 5AE4F370471009C8B0ED936C9AE19ED14ABD67D7

Signing Certificate Chain:
    Issued to: Go Daddy Root Certificate Authority - G2
    Issued by: Microsoft Code Verification Root
    Expires:   Thu Apr 15 13:07:40 2021
    SHA1 hash: 842C5CB34B73BBC5ED8564BDEDA786967D7B42EF

        Issued to: Go Daddy Secure Certificate Authority - G2
        Issued by: Go Daddy Root Certificate Authority - G2
        Expires:   Sat May 03 00:00:00 2031
        SHA1 hash: 27AC9369FAF25207BB2627CEFACCBE4EF9C319B8

            Issued to: Pololu Corporation
            Issued by: Go Daddy Secure Certificate Authority - G2
            Expires:   Sat Aug 31 11:35:25 2013
            SHA1 hash: E2FE1275AD8DA85DEABA67ADE26BE42E0834B4C0

The signature is timestamped: Wed Sep 12 14:52:19 2012
Timestamp Verified by:
    Issued to: Starfield Services Root Certificate Authority
    Issued by: Starfield Services Root Certificate Authority
    Expires:   Mon Dec 31 16:59:59 2029
    SHA1 hash: 5D003860F002ED829DEAA41868F788186D62127F

        Issued to: Starfield Services Timestamp Authority
        Issued by: Starfield Services Root Certificate Authority
        Expires:   Wed Apr 26 00:00:00 2017
        SHA1 hash: AEAC793CDD107ACFB314A2FE384A8F16840B7C26

SignTool Error: WinVerifyTrust returned error: 0x800B010A
        A certificate chain could not be built to a trusted root authority.

Number of files successfully Verified: 0
Number of warnings: 0
Number of errors: 1 
```

## 编辑#4：DefaultInstall 部分是禁止的

在Microsoft[的 DefaultInstall 部分的文档中，我发现了这一点：](http://msdn.microsoft.com/en-us/library/windows/hardware/ff547356.aspx)

> **注意**如果要对驱动程序包进行数字签名，则驱动程序包 的 INF 文件不得包含 INF **DefaultInstall部分。**

有谁知道为什么这是真的？我找不到解释。

无论如何，我取出了我的 INF 文件的 DefaultInstall 部分，所以从现在开始我必须通过运行我编写的一个[名为 SetupCopyOemInf](http://msdn.microsoft.com/en-us/library/aa376990.aspx)的小 DLL 来测试它。

仍然没有运气；我不断在 Windows Vista 计算机上收到未经验证的发布者警告。

## 编辑 #5：JLink 驱动程序已正确签名

我在 C:\Windows\System32\DriverStore\FileRepository 中四处寻找，试图找到一些正确签名的驱动程序包。我发现的第一个有趣的是 JLinkCDC.cat/JLinkCDC.inf。Inf 文件的版本是`DriverVer=01/25/2012,6.0.2600.4`. 在 Windows Vista 机器上，如果我在 inf 文件上调用 SetupCopyOemInf（使用我的 DLL），那么我会收到一条正确的消息，告诉我发布者是谁（Segger GMBH 或类似的东西）。因此，可以正确签署像我这样的驱动程序包，但不知何故 GoDaddy 或我做错了什么。

JLinkCDC.inf 驱动程序和我的驱动程序非常相似，因为它只是一个文件并且使用了 usbser.sys。他们签名的信任链可以追溯到 VeriSign Class 3 Public Primary Certificate Authority - G5。

基本上，这个 JLinkCDC 驱动程序和我的很相似并且可以工作，所以我打算仔细研究一下，看看有什么不同。

[JLinkCDC.cat 的 signtool verify](https://gist.github.com/3647208#file_jlinkcdc_verify.txt)的输出看起来与我的非常相似，只是它追溯到 Verisign 而不是 GoDaddy。

## 编辑#6：微小的变化

为了使我的驱动程序更像 JLinkCDC.inf，我添加`DriverPackageType=PlugAndPlay`到 INF 文件并缩短了文件名：这些文件现在称为 polser.cat 和 polser.inf。还是没有运气！

## 编辑#7：一些成功！

我认为以下几点是正确的；如果我错了，请纠正我：

*   对于驱动程序包（.cat 文件），正确的选项`signtool verify`是`/pa`. 我从[KMCS_Walkthrough.doc](http://msdn.microsoft.com/en-us/library/windows/hardware/gg487328.aspx)推断出这一点。
*   对于驱动程序包，如果信任链返回到 certmgr.msc 中“受信任的根证书颁发机构”文件夹中的证书，Windows 只会考虑验证发布者。
*   对于驱动程序包，您可以使用交叉证书对其进行签名（将信任链从 gdroot-g2.crt 扩展到 Microsoft 代码验证根），但 Windows 似乎忽略了这一点。这是因为 Microsoft 代码验证根不是“受信任的根证书颁发机构”。
*   有当前用户的证书存储和本地计算机的证书。它们都很重要，因此您应该使用[MMC 证书管理单元](http://msdn.microsoft.com/en-us/library/ms788967.aspx)来查看两者。Certmgr.msc 仅显示当前用户的那些。
*   Windows[应该在](http://support.microsoft.com/kb/931125)需要时将“Go Daddy 根证书颁发机构 - G2”(gdroot-g2.crt) 无缝添加到“受信任的根证书颁发机构”文件夹中，从 Windows 更新下载它，但它没有。 [更多信息在这里。](http://technet.microsoft.com/en-us/library/cc749331%28WS.10%29.aspx)

我在测试机器上使用了 Windows 事件查看器来查看发生了什么。看起来 Windows 会自动获取“Go Daddy Root Certificate Authority - G2”，但只有在它显示不受欢迎的未经验证的发布者警告对话框之后。一旦用户关闭该对话框，就会从 Windows 更新中获取证书，因此下一次安装尝试应该会成功。有趣的是，它确实会及时自动下载 Starfield 证书（它是我的时间戳的信任链的根）。

通过双击 gdroot-g2.crt 并在尝试安装驱动程序之前将其导入，我已经获得了在 Windows 7 和 Windows Vista 计算机上工作的签名。我会看看这个过程是否可以自动化并添加到安装程序中。

我找到了来自另一家公司 (JLinkCDC.cat) 的驱动程序包，该驱动程序包使用 VeriSign 证书签名，该证书植根于“VeriSign Class 3 Public Primary Certification Authority - G5”。该证书在我查看过的所有计算机上，因此如果您使用 VeriSign 而不是 Go Daddy，我认为您可以使用 Windows Update 避免这个问题。

我确实注意到 VeriSign 证书使用 SHA1，而我的 Go Daddy 证书使用 SHA256 作为签名算法和签名哈希算法。不确定这是否重要。

**编辑#8：向微软寻求帮助**

请参阅 MSDN 论坛上的讨论和我的结论：http: [//social.msdn.microsoft.com/Forums/en-US/wdk/thread/1fede768-7925-4f30-8eef-ce5bd08b0b60](http://social.msdn.microsoft.com/Forums/en-US/wdk/thread/1fede768-7925-4f30-8eef-ce5bd08b0b60)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-28T20:10:23.890

自 2012 年 9 月 27 日起，GoDaddy 驱动程序签名证书将不适用于 Windows Vista 或 Windows 7。它仅适用于 Windows 8。GoDaddy 证书仅适用于 SHA256。

我们最终从 GlobalSign (MS Authenticode) 得到了一个。

来自[http://msdn.microsoft.com/en-us/library/windows/hardware/hh967734%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/hardware/hh967734%28v=vs.85%29.aspx)：

> 使用两个签名对驱动程序包进行签名
> 
> 在某些情况下，您可能希望使用两个不同的签名对驱动程序包进行签名。例如，假设您希望驱动程序在 Windows 7 和 Windows 8 上运行。Windows 8 支持使用 SHA256 散列算法创建的签名，但 Windows 7 不支持。对于 Windows 7，您需要使用 SHA1 哈希算法创建的签名。

2012-09-28 更新：GlobalSign 工作。我让 Firefox 15 下载 GlobalSign 提供的链接（受提取密码保护）。最后是 Firefox 持有签名证书，并下载了其他 3 个 GlobalSign 证书。签名证书从 Firefox 导出到 .p12 文件中。然后双击所有四个文件，以使用自动默认值将它们导入 MS 证书存储。驱动程序和程序包在 Windows 7 Ultimate x64 中进行了签名和测试，没有任何驱动程序签名错误。司机BSoD，但这是一个不同的问题。;)

GoDaddy 只会为您提供减去 15 美元的网站积分，并且只有在您在购买后 30 天内撤销的情况下。

2016 年 1 月 13 日更新： [https](https://technet.microsoft.com/en-us/library/security/3033929) : //technet.microsoft.com/en-us/library/security/3033929 Microsoft 安全公告 3033929 SHA-2 代码签名支持适用于 Windows 7 和 Windows Server 2008 R2 发布时间：3 月 10 日, 2015 ... 基本上，您需要在 Microsoft 提供的链接中安装安全更新，这通常由 Windows Update 自动完成。

我们现在使用 GlobalSign 的 EV 代码签名证书。警告：SafeSign 不适用于 Windows 服务（例如 buildbot slave）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-25T21:46:48.653

由于缺乏声誉，我无法对 rcpao 的答案进行投票，但我想发表同意。我最近经历了一个类似的过程，试图用 GoDaddy 的驱动程序签名证书对 Windows 7 驱动程序包进行签名。简而言之，Win7 x64 不会采用驱动程序——最肯定是由于 GoDaddy 证书中使用的 SHA-2 散列。

虽然有文章指出 Windows 7 与 SHA-2 签名兼容，但我认为这不适用于驱动程序签名。肯定有一些模棱两可的文本使问题变得不那么清楚。

我的公司最终购买了包含驱动程序内核模式签名的 DigiCert 代码签名证书。它按预期工作，成本与 GoDaddy 相当。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-29T01:02:04.290

回答我自己的问题：

我最终从 Go Daddy 获得了*代码签名证书*并将其键入为 SHA-2（另一个选项是 SHA-1），因为我希望有一天能够签署包含 .sys 文件和 GoDaddy 的 SHA-2 的驱动程序包选项让你做到这一点。现在我使用该证书以及*Go Daddy G1 到 G2 交叉证书*(gdroot-g2_cross.crt) 签署我们的 .cat 文件，因此信任链如下所示：

1.  Go Daddy Class 2 证书颁发机构（27 96 ba e6 3f 18 01 e2 77 26 1b a0 d7 77 70 02 8f 20 ee e4）（将是您用户计算机上的受信任根 CA）
2.  Go Daddy 根证书颁发机构 - G2 ( 84 1d 4a 9f c9 d3 b2 f0 ca 5f ab 95 52 5a b2 06 6a cf 83 22 ) （应该是受信任的根 CA，但它依赖于 Windows 更新的可靠工作）
3.  Go Daddy 安全证书颁发机构 - G2（27 ac 93 69 fa f2 52 07 bb 26 27 ce fa cc be 4e f9 c3 19 b8）
4.  我们公司

这对我们的需求**非常有效，但****不幸的是，该计划不允许我们签署包含内核模式 .sys 文件的驱动程序包**，因为信任链不植根于 Microsoft 代码验证根。根据我对 kmsigning.doc 的阅读，如果您有内核模式驱动程序文件，对 .cat 文件进行签名的正确方法是使用*Microsoft to Go Daddy G2 交叉证书*(mscvr-cross-gdroot-g2.crt)。我实际上还没有让它起作用，但这将是另一个讨论。

## 沙 2

我不得不恭敬地不同意 rcpao 和 kris。据我所知，Windows Vista 或 Windows 7 上的 SHA256 存在问题，**至少出于驱动程序包安装的目的**。对于将 .sys 文件加载到内核中，可能会有不同的故事，尤其是因为我现在在 .sys 签名方面遇到了问题，所以我必须研究一下。

## 默认安装

[INF DefaultInstall 部分](http://msdn.microsoft.com/en-us/library/windows/hardware/ff547356.aspx)的MSDN 文档是错误的。DefaultInstall 和驱动程序签名之间似乎没有不兼容，我现在明白了应该存在的原因。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-22T14:26:41.270

听起来您需要让您的驱动程序获得 Microsoft 的认证和签名，这可以通过使用[Hardware Certification Kit (HCK)](https://msdn.microsoft.com/en-us/library/windows/hardware/dn251523(v=vs.85).aspx)来实现。但对于 Windows 10 及更高版本，他们使用的是[Hardware Lab Kit (HLK)](https://msdn.microsoft.com/en-us/library/windows/hardware/hh801887(v=vs.85).aspx)。这就是我签署内核模式驱动程序的方式，这是在通过测试并让 Microsoft 认证和签署 .sys 文件和 .cat 文件后完成的。

# oracle - 与 Buffer Gets 的索引相关性

> ID：12291474
> 
> 赞同：0
> 
> 时间：2012-09-06T00:26:44.080
> 
> 标签：oracle, indexing, buffer, relation

关于 Oracle 上与缓冲区的索引关系，我一直在思考一个问题。

> 如果我放置一个索引并且缓冲区减少然后索引被认为运行良好，这是真的吗？
> 
> Index 是否也可以增加缓冲区获取，并且认为 Index 不适合该查询，这也是真的吗？

对于这个问题，我真的需要一个解释。提前致谢！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T03:16:36.490

添加索引以提供对表中数据的更好访问路径，和/或监管唯一约束。

缓冲区获取只是 Oracle 必须读取多少块才能为查询提供服务的度量。它可能会从缓冲区缓存中读取每个缓冲区，或者如果未找到，则从磁盘中读取。

由于查询所花费的大部分时间通常是在读取块（无论是从缓冲区缓存还是从磁盘），我希望通过提供更好的访问路径（例如通过添加索引）来改进查询应该*减少*所需的缓冲区数量，而不是增加它们。

# tcp-ip - recv() 函数不会在 python 中返回消息

> ID：12291476
> 
> 赞同：1
> 
> 时间：2012-09-06T00:27:02.710
> 
> 标签：tcp-ip

我是使用 python 连接 TCP/IP 的新手

我有这个简单的代码：

```
import socket
s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.connect(("www.google.com",80))
s.send("GET /\n")
while 1: 
 received = s.recv(1024) 
 if received: 
  print received 
```

但是当我运行它时，它只会永远运行并且不会给我任何结果！！！

请你帮助我好吗。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T00:33:32.730

**遵循[HTTP 协议](http://www.w3.org/Protocols/rfc2616/rfc2616.html)**

```
s.send("GET /\n") 
```

这是不正确的。您应该以正确的方式发送 http 数据。用这个

```
s.send("GET / HTTP/1.0\r\nHost: www.google.com\r\n\r\n"); 
```

事实上，您要发送[标准的 http 请求标头](http://en.wikipedia.org/wiki/List_of_HTTP_header_fields#Requests)。

```
GET / HTTP/1.0
Host: www.google.com 
```

注意：正如[大卫](https://stackoverflow.com/users/721269/david-schwartz)在评论中所说，您必须能够解码分块传输编码。所以最好`HTTP/1.0`在标题中说明。

# python - 更改多维列表中某一行的值会更改所有行吗？

> ID：12291489
> 
> 赞同：0
> 
> 时间：2012-09-06T00:29:27.950
> 
> 标签：python, python-3.x

我觉得我在这里做了一些非常愚蠢的事情。也许我只是太累了。

我正在尝试制作一个大小取决于“计数”的真值表 - 表的变量数。

```
 table = [[None] * int(pow(2, count))] * count
    in_a_row = pow(2, count) / 2
    iterator = 0
    for i in range(count):
        for j in range(int(pow(2, count))):
            print(str(i) + ' ' + str(j), end = '')
            if iterator < in_a_row:
                table[i][j] = 'T'
                print(' T')
            elif iterator == 2 * in_a_row:
                table[i][j] = 'T'
                iterator = 0
                print(' T')
            else:
                table[i][j] = 'F'
                print(' F')
            iterator += 1

        print(table)
        in_a_row /= 2
        iterator = 0 
```

哪个输出：

```
0 0 T
0 1 T
0 2 F
0 3 F
[['T', 'T', 'F', 'F'], ['T', 'T', 'F', 'F']]
1 0 T
1 1 F
1 2 T
1 3 F
[['T', 'F', 'T', 'F'], ['T', 'F', 'T', 'F']] 
```

您可以看到我在一次迭代中设置的任何内容都在所有“行”中回显。谁能告诉我这里有什么问题？

我当然期待这个：

```
[['T', 'T', 'F', 'F'], ['T', 'F', 'T', 'F']] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T00:31:36.757

将第一行更改为：

```
table = [[None] * int(pow(2, count)) for _ in range(count) ] 
```

毫无疑问，您已经注意到，在第一个版本中，每一行共享对同一个列表的引用，而在这个新版本中，我们为每一行创建一个新列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T00:34:27.020

由于`* count`. 您实际上是在存储对最初创建的数据`count`时间的引用。**mgilson**对此进行了修复。

# python - NLTK 中的小写停用词并将停用词存储在列表中

> ID：12291492
> 
> 赞同：0
> 
> 时间：2012-09-06T00:29:32.670
> 
> 标签：python, nltk, stop-words

亲爱的朋友们，我想知道如何在名为 tokens 的列表中小写 NLTK 中的停用词

```
import nltk
from nltk.corpus import stopwords
tokens= ['TOWING', 'VESSEL', 'XXXX', 'XXXX', 'XXXX', 'WAS', 'FACING', 'UP', 'TO', 'BARGES', 'IN', 'MON', 'VIEW', 'MININGS', 'FLEET', 'WHEN', 'WIRE', 'CABLE', 'AT', 'THE', 'CELL', 'PARTED', 'STRIKING', 'XXX', 'XXX', 'IN', 'THE', 'LEFT', 'FOREARM', 'LUNDY', 'WAS', 'TAKEN', 'TO', 'THE', 'HOSPITAL', 'VIA', 'AMBULANCE', 'AND', 'DIAGNOSED', 'WITH', 'XXX']

stop_list = ['all', 'just', 'being', 'over', 'both', 'through', 'yourselves', 'its', 'before', 'herself', 'had', 'should', 'to', 'only', 'under', 'ours', 'has', 'do', 'them', 'his', 'very', 'they',
         'not', 'during', 'now', 'him', 'nor', 'did', 'this', 'she', 'each', 'further', 'where', 'few', 'because', 'doing', 'some', 'are', 'our', 'ourselves', 'out', 'what', 'for', 'while', 'does', 'above', 'between', 't',
         'be', 'we', 'who', 'were', 'here', 'hers', 'by', 'on', 'about', 'of', 'against', 's', 'or', 'own', 'into', 'yourself', 'down', 'your', 'from', 'her', 'their', 'there', 'been', 'whom', 'too', 'themselves', 'was',
         'until', 'more', 'himself', 'that', 'but', 'don', 'with', 'than', 'those', 'he', 'me', 'myself', 'these', 'up', 'will', 'below', 'can', 'theirs', 'my', 'and', 'then', 'is', 'am', 'it', 'an', 'as', 'itself', 'at',
         'have', 'in', 'any', 'if', 'again', 'no', 'when', 'same', 'how', 'other', 'which', 'you', 'after', 'most', 'such', 'why', 'a', 'off', 'i', 'yours', 'so', 'the', 'having', 'once']

english_stops = set(stopwords.words('english'))
for coid in range(0,len(english_stops)):
for coidrec in range(0,len(tokens)):
    if tokens[coidrec].isupper():
        if tokens[coidrec].lower == stop_list[coid]:
            tokens[i].lower
        else:
            pass
tokens
['TOWING', 'VESSEL', 'XXXX', 'XXXX', 'XXXX', 'WAS', 'FACING', 'UP', 'TO', 'BARGES', 'IN', 'MON', 'VIEW', 'MININGS', 'FLEET', 'WHEN', 'WIRE', 'CABLE', 'AT', 'THE', 'CELL', 'PARTED', 'STRIKING', 'XXX', 'XXX', 'IN', 'THE', 'LEFT', 'FOREARM', 'LUNDY', 'WAS', 'TAKEN', 'TO', 'THE', 'HOSPITAL', 'VIA', 'AMBULANCE', 'AND', 'DIAGNOSED', 'WITH', 'XXX'] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T00:56:12.203

试试这个：

```
tokens = [token.lower() for token in tokens] 
```

# php - 如何加密表单数据？

> ID：12291495
> 
> 赞同：6
> 
> 时间：2012-09-06T00:30:10.377
> 
> 标签：php, html, forms, encryption, passwords

我有一个登录表单，它会将 id 和密码提交到一个 php 文件，然后该文件将根据 SQL 数据库中的数据检查该 id 和 pw。我如何加密传出的表单数据以确保在到达目的地之前没有人可以看到它？登录表单代码是

```
<html>
<head>
<title>
Login page
</title>
</head>
<body>
<form name="login" action="fetchalldata.php" method="post">
Username : <input type="text" name="userid"/>
Password : <input type="password" name="pswrd"/>
<input type="button" name="submit" value="Login"/>
</body>
</html> 
```

在数据库上预先散列密码并发送散列密码会更有效吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-06T00:40:35.230

SSL就是*答案*。唯一的答案。

但是，如果您必须尝试使用​​自制解决方案，请考虑以下想法：

*   让 PHP 代码为 Javascript 提供当前时间戳。
*   您获取用户输入的密码，附加时间戳，然后对其进行加密。
*   将加密的密码传回带有时间戳的服务器。
*   让服务器确保返回的数据是最新的，让它根据自己的数学检查加密密码。
*   如果时间戳太旧*或已用于登录已*拒绝它。

这仍然是一个糟糕的想法，但它并不像发送纯文本密码那样糟糕。

使用 SSL。真的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-06T00:32:52.637

使用安全的 SSL 连接是确保表单数据加密的唯一真正方法。但是，您可以在发送之前使用一些 JavaScript 以某种方式对密码进行编码。它不会提供太多的安全性（因为任何可以查看您网站的人都可以看到 JavaScript 并对其进行逆向工程），但它至少可以避免发送纯文本密码。

# objective-c - 按分隔符拆分字符串

> ID：12291505
> 
> 赞同：12
> 
> 时间：2012-09-06T00:31:38.567
> 
> 标签：objective-c, ios, xcode, nsstring, multiline

我真的找不到这个答案...

我在 XCode 中有名为 myString 的多行 NSString，它是一个 HTML 代码。我需要逐行导航字符串，例如：

```
myString = @"<html>"
            "<body>"
            "<head><title>My Page</title>"; 
```

如何访问每行？像：

```
LineOne = myString.Lines[0];
LineTwo = myString.Lines[1]; 
```

我怎么能在 XCode 中做这样的事情？？？

我需要像 Delphi 中的备忘录组件这样的东西......

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-09-30T13:17:00.087

大多数 html 字符串将具有（大部分不可见）用于分隔行的换行符分隔符

```
NSArray *lines = [myHtmlString componentsSeparatedByString: @"\n"];
NSString *lineOne = lines[0];
... 
```

# ruby - 如何提示用户输入整数相乘？

> ID：12291508
> 
> 赞同：0
> 
> 时间：2012-09-06T00:32:45.677
> 
> 标签：ruby, user-input

好的，所以我正在尝试用 ruby​​ 制作一个非常简单的程序，但我一直遇到错误。我不想要直接的答案，但我想要指导，因为它是针对学校的，我不喜欢作弊。我正在编写一个简单的程序，用户输入 iPhone 屏幕的长度和宽度，然后程序将面积乘以 326。326 是分辨率的每英寸像素 (PPI)，然后乘以该值by (length x width) 将给出屏幕上的总像素。

到目前为止我所拥有的：

```
l = gets.to_i

w = gets.to_i

print "What is the length of the screen?"
#(dont know how to get them to enter it)

print "What is the width?"
#(same as line before dont know how to get them to enter it)

result = 326(l*w) 
```

这就是我所拥有的一切，并希望得到任何帮助，只是不要给我整个程序，拜托！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T00:36:26.893

您应该在呼叫之前打印提示消息，`gets`以便在他们键入时提示消息出现在屏幕上。

此行不正确：

```
result = 326(l*w) 
```

与数学不同，在 Ruby 中，您不能只是将两个数字放在一起并期望它们相乘。您必须使用`*`（星号）来乘法。因此，该行总共需要两个星号。

您应该`puts`在最后使用打印结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T01:33:47.247

## 先提示，再收集数据价值

在尝试使用回复填充变量之前，您需要发出提示。例如：

```
PPI = 326

print 'Length: '
length = gets.to_i

print 'Width: '
width = gets.to_i

resolution = length * width * PPI
puts "Resolution: #{resolution}" 
```

您还需要使用正确的乘法[运算符](http://www.tutorialspoint.com/ruby/ruby_operators.htm)，即星号。然后，您可以使用该值做任何您喜欢的事情；在这种情况下，我选择用一个字符串插入它以输出给用户。

# jquery - jquery删除空元素及其空子元素

> ID：12291514
> 
> 赞同：2
> 
> 时间：2012-09-06T00:33:24.650
> 
> 标签：jquery

所以我有动态内容，想删除空元素和空子元素（如果有的话）。有几种情况发生：

HTML

```
<p> </p>

<p><img src="image.jpg" /></p>

<p><strong></strong></p> 
```

jQuery

```
$(".articleContent p").filter( function() {
    return !($.trim($(this).text()).length) && !($(this).children().length);
}).hide() 
```

问题是它没有考虑空子元素。我尝试过调整，它要么隐藏 img 要么隐藏空子元素。

建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T00:58:19.483

该[`.text()`](http://api.jquery.com/text)方法获取所选元素及其所有后代的文本，因此您无需测试子元素的文本。

```
$(".articleContent p").filter( function() {
            $this = $(this);
    return (!$.trim($this.text()).length && !$this.has('img').length);
}).hide() 
```

[演示](http://jsfiddle.net/mowglisanu/yTZh5/1/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T00:58:57.693

如果您删除 childen() 测试，它似乎可以工作， text() 会考虑选择器元素和所有后代的组合文本。

```
 $(".articleContent p").filter(function () {
        return !($.trim($(this).text()).length);
    }).hide(); // or replace hide() with remove() 
```

# javascript - Wordpress 中奇怪的滚动问题

> ID：12291516
> 
> 赞同：1
> 
> 时间：2012-09-06T00:33:42.117
> 
> 标签：javascript, html, css, wordpress

我有一个非常复杂的问题，虽然我怀疑有人会知道答案，但我想我会试一试，因为你是一群聪明的人。

在我的网站（下面的链接）上，我遇到了一个问题，当在移动浏览器中查看或将普通的网络浏览器缩小时，例如在 iPhone 上，必须滚动页面才能完全查看。但是，当在移动浏览器中查看“Tour”页面时，它不会滚动显示。

当 #tabs div 从 Tour 页面中移除时，显示在 iDevices 上有一个滚动 - 这很奇怪 - 当 #tabs div 在那里时，没有滚动。当浏览器变小时，网站上的所有页面（不包括“Tour”页面）在 iDevices 和 Firefox 上都会出现此滚动问题。

我基本上不希望用户在较小分辨率的屏幕上查看时必须滚动。

我创建的主题是 Wordpress 上的 211 的子主题。

[主页](http://odesk.n8geeks.com) [参观页面](http://odesk.n8geeks.com/tour)

在此先感谢，尼克。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T20:08:21.097

您现在对网站的设计方案有一个根本性的问题。下次您在创建/编辑下载的模板时应该牢记这一点。

对于手机和平板电脑用户，您需要从 3 个选项中选择 1 个：

1.  创建您网站的替代移动版本，*或*
2.  设计页面应该如何实际完成：使用 % 或 EM 进行“液体设计”（意味着网站和内容会根据内容进行适当调整）
3.  使用 CSS hack，例如“显示”或“溢出” 无

2 号绝对是您最好的选择。如果你得到水平滚动条，你需要检查你的宽度、填充、边距等，并确保没有任何内容等于 < 100%。还要考虑随着页面的自然进展而添加和修改哪些内容，这可能是您的问题。（如上所述，“游览页面”取决于#tabs

液体布局： http: [//www.maxdesign.com.au/articles/liquid/](http://www.maxdesign.com.au/articles/liquid/)

jQuery 手机：http: [//jquerymobile.com/](http://jquerymobile.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T23:36:26.333

就像上面 TheChristopher 回答的那样，您应该用 %、px 或 em 定义页面及其中的所有内容。我建议您使用萤火虫插件来弄清楚所有内容如何适应和工作。在重新添加这些部分之前，从页面中取出 div 或部分，看看是否可以让它工作。在尝试这种方法之前不要忘记保存备份文件。:)

# sql-server - 将对象保存到数据库的良好做法

> ID：12291517
> 
> 赞同：3
> 
> 时间：2012-09-06T00:33:45.117
> 
> 标签：sql-server, xml, stored-procedures, maintenance

最近我们一直想知道人们发现什么可以很好地将您的业务对象/实体保存到数据库中。出于讨论的目的，考虑一个包含一些项目（客户详细信息、名称、数量、价格等）的订单示例。我们正在使用 SQL Server 和 C#，并且有一些旧项目的旧版 ASP Classic/Jscript，并且没有机会转向 NoSQL 类型的解决方案等。

我知道的大概有三种方式

1.  在服务器端创建即席 SQL 查询（似乎更慢+更脆弱，如果您更改服务器端语言，则必须重新创建所有这些代码）

2.  使用接受订单的 XML 表示的存储过程，然后存储过程将读取文档并执行任何需要完成的操作。（这是我们目前使用的方法）

3.  使用某种 ORM 技术（我知道有些人对它发誓，但我们宁愿避免使用它，因为我们没有足够的经验来准确判断它是否是我们想要走的路，而且周围有足够的喋喋不休性能问题和复杂性，考虑到其他一切，我们在承诺它时有点紧张，采用 KISS 理念）

我想知道的是：

1.  是否有人有任何其他/更好的方法不在我们可以调查的上述列表中

2.  XML 方法是否是标准/良好实践。我们喜欢它，因为大多数语言都支持序列化为 XML，它对 Web 友好，在调试期间易于阅读且非常灵活（易于扩展，可以通过模式选择强弱等），但希望有机会考虑其他想法。

注意：[在 SQL Server 2008 存储过程中使用 OPENXML - INSERT 顺序与 XML 文档不同](https://stackoverflow.com/questions/9997520/using-openxml-in-sql-server-2008-stored-proc-insert-order-differs-from-xml-doc)似乎在某些方面是相关的；到目前为止，我们已经使用了 openxml()，所以我想要问的问题是 XML 方法是否是一种合理的方法，XQuery 是更好的方法吗？是否有人可以在灵活性、可读性等方面指出以这种方式做事的真正最佳方式的方便参考/帖子。

编辑：谢谢大家的回复。即使这已经关闭，我也会做出回应（仍然不清楚为什么在 StackOverflow 上禁止讨论）。抱歉花了一点时间。

我可能应该澄清一下；我们发现 XML 有用的地方是当我们有一个由几个较小的业务对象组成的“复杂”对象时。例如带有 "items" 的订单；可能有一个或多个项目。如果我们加载一个订单，然后用户将一个项目添加到他们的订单中，我们只需添加另一个项目，序列化为 XML，然后将其传递给存储过程，该存储过程可以确定它是插入还是更新，而我不是确定你会怎么做（除了我会避免的很多小存储过程/adhoc SQL。ORM：见下面的评论）。如果我们正在处理一些相当于插入/更新行的平面结构，那么具有强类型参数的常规存储过程效果很好。

至于其他关于 ORM 的评论；我发现 Martin Fowler 的文章的链接很有趣。我已经阅读了原版[http://blogs.tedneward.com/2006/06/26/The+Vietnam+Of+Computer+Science.aspx](http://blogs.tedneward.com/2006/06/26/The+Vietnam+Of+Computer+Science.aspx)，但总是很欣赏更多信息。目前，我对 ORM 的主要关注只是学习使用它的复杂性，并且很好地使用它（避免陷阱等），鉴于我们正在使用的当前环境看起来有点难以处理。

但是感谢您的回复；只是想看看是否还有其他我们可能错过的方法。看起来 ORM 是值得花一些时间在一边的。

再次感谢。

-马尔辛

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T14:34:30.133

听起来您可能希望将业务逻辑和相当多的应用程序保留在数据库中（即存储过程），以便您可以在多个编程环境中重用它？如果是这种情况，我想我可以开始将 XML 发送到存储过程。

我的正常偏见完全相反，我更喜欢在任何使用 .NET 2.0 或更高版本的项目中使用 NHibernate。使用 ORM 有一个学习曲线，但是开发人员的工作效率会大大提高，并且有很多强类型，而且在最近的 .NET 版本中，您还可以获得 Linq。

我确实认为 NoSQL（RavenDB 等）对于您的场景值得考虑。

就性能而言，动态 SQL 和 ORM 很可能使您非常接近存储过程的性能，并且通常有一种方法可以在必要时更接近金属。我会更关心解析 XML 的性能，这通常很慢。解析 XML 也很脆弱。

在您的情况下，我可能会主张将任何与数据库通信的应用程序移至最新版本的 .NET，并将业务逻辑移出数据库层。从长远来看，与继续处理您正在处理的分散环境相比，这可能具有更低的总维护成本。我知道要说服管理层对此有多么困难。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T15:42:09.070

我需要更多地说明您在对象方面保存到 SQL Server 的确切内容，但是如果您只是在谈论将 XML 作为业务对象的表示形式保存到数据库中，那么我建议您不要充分利用**关系**数据库。

一个设计良好的数据库可以通过约束帮助强制执行业务规则，通过外键实现引用完整性，并提供许多其他好处，如果您只是将 XML 存储在给定的表中，您可能会错过这些好处。

关于使用 XML 作为存储过程的参数，Erland Sommarskog 提供了一些关于如何处理这种情况的[重要材料，包括](http://www.sommarskog.se/arrays-in-sql.html)[XML](http://www.sommarskog.se/arrays-in-sql-2005.html#XML)。他在 OPENXML 上也有以下要说的

> 由于 OPENXML 函数，您已经可以在 SQL 2000 中使用 XML。OPENXML 在 SQL 2005 和 SQL 2008 中仍然存在，但使用它的唯一原因是您还需要支持 SQL 2000。OPENXML 使用起来比较笨重，而且性能远不及节点。事实上，在我的测试中，它比迭代方法慢 30-50%。不过，OPENXML 的一个可能优势是查询计划更简单。XQuery 的查询计划将 XML 运算符与关系运算符混合在一起，而 OPENXML 只产生一次远程扫描。这降低了您有​​时使用 XQuery 遇到的查询计划灾难的风险。

Martin Fowler 也有一篇关于[OrmHate](http://martinfowler.com/bliki/OrmHate.html)的精彩文章，对人们不愿使用 ORM 框架背后的一些原因进行了很好的讨论。他以建议结束他的文章；

> 所以 ORM 帮助我们处理大多数企业应用程序的一个非常现实的问题。确实，它们经常被滥用，有时可以避免潜在的问题。它们不是漂亮的工具，但它们解决的问题也不是很可爱。我认为他们应该得到更多的尊重和更多的理解。

我认为在您的情况下，这是非常合适的，因为它们确实需要相当多的时间才能掌握。

因此，我更倾向于选择选项 2 (XML)，并首先考虑将您想要的顺序整合到 XML 的构造方式中，或者看看结合节点和SQL Server 的 ROW_NUMBER 函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T15:15:29.410

我们在两个项目中非常成功地使用了以下内容：

每个业务对象在创建/更新/删除它的数据库中获得一个或多个存储过程。（有时称为“CRUD”）该过程将前端/Web 服务器与数据库结构完全隔离。

是的，您必须为每个对象编写这些（有一些工具可以生成它们的基本版本，例如用于 Management Studio[的 SSMS-Tools](http://www.ssmstoolspack.com/)），是的，您必须为每个新字段扩展这些。但是，如果您使用 XML 传输数据，您还必须更改当前的 XML 解析过程。使用 XML，您可以避免更改过程的签名，但这有点像作弊，因为您传输的数据结构 DID 发生了变化。您只是将它隐藏在 XML 中。

在前端/Webserver 端，您必须为所有业务对象提供一种方法来保存它们，而这又只是调用相关过程并将所有字段传递给它。如果您使用命名参数，您也独立于参数的顺序并且可以省略可选参数，这使您能够扩展过程而不必更改对它的每次调用。

CRUD 方法非常快，因为您不必创建或解析任何 XML，并且程序可以准确地处理手头的情况。数据库之类的。它还可以很容易地发现错误，因为程序往往很小。

在您的情况下，我认为序列化和反序列化 XML 没有用。无论如何，您都需要本机 DB-Client/Driver，它可以很好地处理传递不同类型的多个字段。您的 Web 服务器代码最终会干净地调用 DB，而 DB 不需要处理解析 XML，这不是它的主要工作。

# c# - 温莎城堡 FirstInterface().Configure(c=> c.LifeStyle.PerWebRequest)

> ID：12291518
> 
> 赞同：4
> 
> 时间：2012-09-06T00:34:09.540
> 
> 标签：c#, inversion-of-control, castle

我正在查看 ProDiner 示例 MVC 项目。我将温莎城堡的引用从 2 更新为 3。

```
public static void RegisterAllFromAssemblies(string a)
    {
        IoC.Container.Register(
            AllTypes.FromAssemblyNamed(a).Pick().WithService
            .FirstInterface().Configure(c=> c.LifeStyle.PerWebRequest));
    } 
```

c.LifeStyle.PerWebRequest 有一个红色波浪状的说法

```
Only assignment, call, increment, decrement, await, and new object expressions can be used as a statement 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-27T04:34:39.740

其中一些方法调用现在被标记为已过时。这是使用 api 的最新方式：

```
container.Register(
    Castle.MicroKernel.Registration.Classes.FromAssemblyNamed(a)
    .WithServiceFirstInterface()
    .LifestylePerWebRequest()
); 
```

# android - 在 Fragment.instantiate(...) 之后的新 Fragment 中通过 id 引用视图后出现 NullPointerException

> ID：12291522
> 
> 赞同：0
> 
> 时间：2012-09-06T00:34:47.607
> 
> 标签：android, android-viewpager, android-fragmentactivity, android-support-library

我是带有 Fragments 和 ViewPager (android.support.v4) 的 Android 兼容性库的新手，我在 Eclipse 中没有 JavaDocs 的情况下玩得很开心

我正在关注[ViewPager 和 Fragments 上的本教程](http://thepseudocoder.wordpress.com/2011/10/05/android-page-swiping-using-viewpager/)

我重用了一些代码来将片段添加到 ViewPager，同时在 foreach 循环中迭代自定义对象

```
private void initialisePaging() {

    List<Fragment> fragments = new Vector<Fragment>();

    for (CustomObjectClass object : getAllBalances()) {
        Fragment fragment = Fragment.instantiate(this,
                SomeCustomFragmentClass.class.getName());
        // Line below is where stacktrace points to with NullPointer
        ListView lv = ((ListView) fragment.getActivity().findViewById(
                R.id.someListView));
        // proceed setting a custom adapter to lv (ListView) then adding to list of fragments
        fragments.add(fragment);
    }
    this.mPagerAdapter = new PagerAdapter(
            super.getSupportFragmentManager(), fragments);

    ViewPager pager = (ViewPager) super.findViewById(R.id.viewpager);

    pager.setAdapter(this.mPagerAdapter);

} 
```

在阅读了其他答案和“google'n”一整天后，我得出的结论是，当我参考其中一个观点时，这可能与 Fragment 没有完全初始化有关。

或者我离得更远，不知道我在做什么。

我尝试将方法放在片段类中以设置适配器，并在`onViewCreated()`其中调用它们，但使用我的代码的当前布局会使这有点不切实际。

如果我正在做的事情不正确或效率低下，我愿意接受任何替代方案

我的目标是遍历包含数据的 CustomObject 以填充每个 Fragments ListView 并将每个 Fragment 放入 ViewPager

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T06:21:13.330

到目前为止，唯一可能的解决方案是做我不想做的事情。

在片段中`SomeCustomFragmentClass`

```
 private CustomObjectClass object; //with getters and setters
    @Override
    public void onViewCreated(View view, Bundle savedInstanceState){
        ListView lv = ((ListView) view.findViewById(R.id.somelistView)); 
        ((ViewPagerActivity) this.getActivity()).setAdapter(object, lv);
    } 
```

在我的 foreach 循环中`ViewPagerActivity`

```
private void initialisePaging() {

    List<Fragment> fragments = new Vector<Fragment>();

    for (CustomObjectClass object : getAllBalances()) {
        Fragment fragment = Fragment.instantiate(this,
                SomeCustomFragmentClass.class.getName());
        ((SomeCustomFragmentClass) fragment).setObject(object);
        fragments.add(fragment);
    }
    this.mPagerAdapter = new PagerAdapter(
            super.getSupportFragmentManager(), fragments);

    ViewPager pager = (ViewPager) super.findViewById(R.id.viewpager);

    pager.setAdapter(this.mPagerAdapter);

} 
```

# php - 表单提交结果后用php代码打开新窗口

> ID：12291523
> 
> 赞同：3
> 
> 时间：2012-09-06T00:34:50.137
> 
> 标签：php, forms, validation, popup, window

这是我一直在处理的脚本，它应该集成用户并在打开时通过

```
<?php

$name = $_POST['name']; // contain name of person
$pass = $_POST['pass']; // Email address of sender 
$link = window.open(https://secure.brosix.com/webclient/?nid=4444&user=$name&pass=$pass&hideparams=1 'width=710,height=555,left=160,top=170');

echo $link;

?> 
```

我这样做对吗，我想在用户将表单提交到 php 代码后打开一个弹出窗口，但我总是收到错误消息。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-06T00:38:01.507

将您的代码更改为此

```
<?php

$name = $_POST['name']; // contain name of person
$pass = $_POST['pass']; // Email address of sender 
$link = "<script>window.open('https://secure.brosix.com/webclient/?    nid=4510&user=$name&pass=$pass&hideparams=1', 'width=710,height=555,left=160,top=170')</script>";

echo $link;

?> 
```

**附加说明**

您应该考虑使用可以使用 iframe 在弹出窗口中整体加载网页的[fancybox 。](http://fancybox.net/)还有其他选择，请随意探索！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T00:38:23.107

您忘记在 $link 的值周围加上引号和标签。

```
$link = "<script>window.open(\"https://secure.brosix.com/webclient/?nid=4444&user=$name&pass=$pass&hideparams=1width=710,height=555,left=160,top=170'\")</script>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-11T13:13:39.007

您不必使用 php，您只需创建具有特定 ID 的提交按钮，然后告诉 jquery 在提交时触发新选项卡

```
<form id="itemreport_new" type="post" action="">
          <input id="submit2" type="submit" value="show"  target=_blank   />
</form>

    $(document).ready(function () {

        $('#submit2').click(function() {
                 $('#itemreport_new').attr('target','_blank');
        });
    }); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2014-09-16T12:47:51.027

```
<?php
echo "<h1>Hello, PHP!</h1>";
$name = $_POST['name']; // CONTAIN NAME OF PERSON
$pass = $_POST['pass']; // ANY DETAIL OF PERSON
$link = "<script>window.open('https://google.co.in')</script>";
echo $link; 
```

# ruby-on-rails - Ruby on Rails 在设计注册和登录时发送参数

> ID：12291527
> 
> 赞同：0
> 
> 时间：2012-09-06T00:35:56.770
> 
> 标签：ruby-on-rails, variables, devise

我需要在我的设计注册表单上发送用户选择的实际语言的参数，并将其作为参数 [:lang] 保留在路由中。

我有一个自定义控制器，因为我正在验证 reCaptcha（该部分有效）。

所以我有我的路线：

```
 devise_for :users, controllers: { registrations: 'registrations' }

    devise_for :users do
         root :to => "devise/registrations#new"
         get "/" => "devise/registrations#new"
         post '/' => 'registrations#new', :as => :new_user_registration 
         match '/', :to => 'devise/registrations#new'
         get "/logout", :to => "devise/sessions#destroy", :as => "logout"
    end

    #Sign
    match '/:lang/:sec/sign' => 'frontend#sign', :as => :sign 
```

在我的注册表中：

```
 <%= form_for(resource, :as => resource_name, :url => 
   registration_path(resource_name, :lang => params[:lang], :sec => params[:sec])) 
   do |f| %> 
```

我有两个控制器，一个用于用户，另一个用于管理员，成功登录后，Devise 转到用户控制器，调用者 Restringido 并想知道用户是验证为管理员还是仅是普通用户。

在我的 restringido 控制器中：

```
 class RestringidoController < ApplicationController

    before_filter :verify_is_user

    def verify_is_user
       if current_user.try(:admin?)
       #redireccionar a backend
       redirect_to :controller => "backend", :action => "index"
    elsif current_user
       #mantenerte en este controlador
    else
       redirect_to :controller => "frontend", :action => "sign"
    end 
```

我的管理员后端控制器：

```
 before_filter :verify_is_admin

    def verify_is_admin
       if current_user.admin?
    else
       redirect_to root_path
    end 
```

错误是：

```
 No route matches {:controller=>"frontend", :action=>"sign"} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T00:56:00.070

你的路线：

```
match '/:lang/:sec/sign' => 'frontend#sign', :as => :sign 
```

需要设置`:lang`变量，并且您没有提供默认值。所以控制器中的这个调用：

```
redirect_to :controller => "frontend", :action => "sign" 
```

将无法匹配路线，因为您没有提供`:lang`变量

要解决此问题，您可以`:lang`在控制器中提供值，例如：

```
redirect_to :controller => "frontend", :action => "sign", :lang => (params[:lang] || DEFAULT_LANG) 
```

或者在路由中有一个默认值。

# php - 在 CakePHP 2 的控制器的 beforeFilter 中发送标头

> ID：12291531
> 
> 赞同：1
> 
> 时间：2012-09-06T00:36:31.107
> 
> 标签：php, cakephp, http-headers, cakephp-2.0, http-status-codes

我有从 AppController 扩展的 myController。
在 myController::beforeFilter 里面我放了这行：

```
header('HTTP/1.0 401 Unauthorized', true, 401); 
```

但是我在响应标头中看不到这些数据。
我在这个类中没有任何空格，在 AppController 中也没有。
我应该在哪里查看或如何调试此问题？
谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T02:38:37.910

不使用 PHP 的 header 函数，你会想使用 Cake 的：

在`AppController::beforeFilter`：

```
$this->header('HTTP/1.0 401 Unauthorized'); 
```

使用 Cake 的内置`header`函数将标头排队，并在准备好时立即将它们全部发送。我认为您的问题很可能是因为您在错误的时间输出了标题。

# objective-c - 使用类将 NSString 传递给另一个 ViewController

> ID：12291533
> 
> 赞同：0
> 
> 时间：2012-09-06T00:37:04.207
> 
> 标签：objective-c, ios, class, nsstring

我知道这非常简单，但我正在重新自学基础知识并试图解决这个问题:-)

我有一个名为 MainVC 的 ViewController 和一个名为 ClassVC

在 ClassVC 中，我有以下代码：

```
@interface ClassVC : UIViewController
{
   NSString *mainLine;
}

@property (nonatomic, retain) NSString *mainLine;
@end 
```

我在实现文件中有这个：

```
@synthesize mainLine = _mainLine;

-(NSString *)_mainLine
{
    _mainLine = @"This a string from a Class";
    return _mainLine;
} 
```

现在我在想，如果我将 ClassVC #import 到 MainVC 中，我将能够像这样传输该字符串：

```
 This code is in the viewDidLoad

    _mainLabel.text = _secondClass.mainLine;

    NSLog(@"%@", _secondClass.mainLine); 
```

但这不起作用-所以我不能不通过这种方式传递字符串吗？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T00:47:32.667

您的属性是 mainLine，因此覆盖的 getter 应该是 -(NSString *)mainLine 而不是 -(NSString *)_mainLine。

```
-(NSString *)mainLine
{
    _mainLine = @"This a string from a Class";
    return _mainLine;
} 
```

这对我有用。在 ClassVC 中：

```
@interface ClassVC : UIViewController 

@property (nonatomic, retain) NSString *mainLine;

@end

#import "ClassVC.h"

@implementation ClassVC

-(NSString *)mainLine
{
    _mainLine = @"This a string from a Class";
    return _mainLine;
} 
```

这在 ViewController 中：

```
#import <UIKit/UIKit.h>
@class ClassVC;

@interface ViewController : UIViewController

@property (strong,nonatomic) ClassVC *secondClass;
@property (weak, nonatomic) IBOutlet UILabel *mainLabel;
@end

#import "ViewController.h"
#import "ClassVC.h"

@implementation ViewController

- (void)viewDidLoad {
    [super viewDidLoad];
    ClassVC *secondClass = [[ClassVC alloc] init];
    self.mainLabel.text = secondClass.mainLine;
     NSLog(@"%@", secondClass.mainLine);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T00:52:33.860

该行：

```
@synthesize mainLine = _mainLine; 
```

意味着创建一个 getter 和 setter 方法，分别称为`mainLine`和`setMainLine:`，它们包装一个名为 的实例变量`_mainLine`。（它为您创建实例变量，因此`mainLine`不需要您在标题中声明的实例变量）

（=之前的名字是属性名，等号之后的名字是它包裹的ivar的名字）

您已尝试覆盖 getter，但使用了实例变量的名称。getter 不以下划线开头，因此请从返回字符串的方法中删除下划线。

因此，在您的`viewDidLoad`方法中，您正在调用`mainLine`仅返回`_mainLine`实例变量的方法。你的`_mainLine`方法永远不会被调用

如果您只是返回一个常量字符串，那么您根本不需要属性和 ivar。

（你也不应该用下划线开始方法名称或变量，因为下划线意味着按照惯例它是私有的，Apple 基本上保留了所有以下划线开头的方法名称。但是通常让 ivars 以下划线开头）

# ruby-on-rails - Mongoid 更新查询设置其他属性为零？

> ID：12291534
> 
> 赞同：1
> 
> 时间：2012-09-06T00:37:08.870
> 
> 标签：ruby-on-rails, ruby, mongodb, mongoid

我正在尝试在 rails 控制台中对我的数据运行更新，出于某种原因，更新一个属性会导致 Mongoid 将其他属性设置为 null：

```
1.9.3p194 :044 > User.first().cart.cartitems
 => [#<Cartitem _id: 5047eef3c8bafa761100001a, _type: nil, quantity: 1000, scentid: 1>]
1.9.3p194 :047 > User.first().cart.cartitems.where(scentid:1).update(quantity:100)
=> nil
1.9.3p194 :048 > User.first().cart.cartitems
=> [#<Cartitem _id: 5047ef65c8bafa761100001c, _type: nil, quantity: 100, scentid: nil>] 
```

注意scentid 是如何设置为nil 的。我也尝试过使用 .set(:quantity, 100) ，但是当我再次查询 caritems 时，这种情况不会持续存在。

这是正常行为吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T02:08:27.380

您是否有可能运行纯 MongoDB rub​​y​​ 驱动程序 .update() 方法而不是 Mongoid 持久性方法？如果是这样，则可以预期观察到的行为。update() 重写完整文档，如下所述：http: [//api.mongodb.org/ruby/current/file.TUTORIAL.html#Updating_Documents_with_update](http://api.mongodb.org/ruby/current/file.TUTORIAL.html#Updating_Documents_with_update)

您可以将 $set 运算符用于：

```
.update({"scentid" => 1}, {"$set" => {"quantity" => 100}}) 
```

或者尝试 Mongoid 的`update_attributes()`替代方法或任何其他合适的持久性方法：[http ://mongoid.org/en/mongoid/docs/persistence.html#atomic](http://mongoid.org/en/mongoid/docs/persistence.html#atomic)

# mysql - 使用循环引用设计关系数据库

> ID：12291542
> 
> 赞同：3
> 
> 时间：2012-09-06T00:38:07.450
> 
> 标签：mysql, database, database-design

想象一家面包店。我有一张产品表，该表与配方表具有一对多关系，而配方表又与成分具有一对多关系。问题是我有一个蛋糕，但其中一种成分是糖霜，它本身就是一种产品（你不能把糖霜分成单独的部分，因为糖霜适用于很多东西，而且蛋糕上的糖霜量可能需要更改）。像这样的设置的桌子设计是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T01:10:12.743

成分表中的两列怎么样，一列用于实际成分，另一列指向其他食谱。对于任何给定的行，只会设置一个。

使用两列也可以强制执行参照完整性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T11:51:26.390

您正在寻找的实际上是一种常见的数据库设计模式，称为**材料清单**。

[这是一个关于物料清单的](http://sqlblog.com/blogs/john_paul_cook/archive/2009/11/06/bill-of-materials-the-basics.aspx)好博客。

为了更轻松地使用此类设计所涉及的非层次树结构，您可以使用一种称为访问数的物理实现技术，我在对[这个问题](https://stackoverflow.com/questions/7420885/how-do-i-design-a-database-to-store-properties-selecting-attributes-by-synonyms/7423459#7423459)的回答中对此进行了详细描述。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T01:14:31.363

看起来你只有两个对象：公式和东西。一个公式用其他东西来描述东西。一件东西可能是也可能不是产品。这是一个二元属性：第三个表。该方案将类似于：

```
Stuff
-----
id : integer
name : string

FormulaPairs
------------
stuff_described_id : integer
ingredient_id : integer
amount : float

Product
-------
stuff_id : integer 
```

示例查询：

获取 Apple Pie 的所有成分 ID：

```
select ingredient_id from Stuff s inner join FormulaPairs p
where s.id == p.stuff_described_id and s.name == 'Apple Pie' 
```

获取所有产品名称：

```
select name from Stuff s inner join Product p where s.id == p.stuff_id 
```

# xml - 在 WP7 中解析 REST 提要时忽略 XML 注释

> ID：12291546
> 
> 赞同：0
> 
> 时间：2012-09-06T00:38:43.083
> 
> 标签：xml, windows-phone-7

我正在为我的应用程序提供来自自动插入的私有 Web 服务器的 REST 提要

```
<?xml version="1.0" encoding="UTF-8"?> 
```

进入饲料。当在本地读取完全相同的 XML 文件而没有 XML 注释时，该应用程序可以正常工作。我尝试使用 XmlReader 以及将 IgnoreComments 设置为无济于事，以及弄乱 XmlNodeType.XmlDeclaration。我将如何忽略这条线？

我目前的代码是

```
var restFeed = from xe in xml.Elements("product")
                                select new SearchResult
                                {
                                    Name = xe.Attribute("name").Value,
                                    ID = xe.Attribute("id").Value                                        
                                };
            lb1.DataContext = restFeed;
        }
    } 
```

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T01:39:58.003

您是否尝试过解析返回的数据`XDocument`，然后获取文档元素。您还没有确切地显示`xml`是什么，所以我假设它是一个`XElement`.

# google-apps-script - 将范围从一个电子表格复制到另一个电子表格

> ID：12291549
> 
> 赞同：4
> 
> 时间：2012-09-06T00:39:59.697
> 
> 标签：google-apps-script, google-sheets

我正在尝试将数组的内容从一张表（其中数组是通过迭代并推送用户选择的列的选择项来创建的）复制到不同电子表格中的另一张表中。

我遇到了许多关于如何将范围从一个电子表格导入到另一个电子表格的问题和答案，但没有一个对我有用（都返回错误“我们很抱歉，发生服务器错误。请稍等然后再试一次。”）我也试过'copyTo'，但没有成功。

这是我目前正在使用的代码。我哪里错了？？

```
function copyToTrix(featureList) {

  featureList = featureList.getValues();

  var tss = SpreadsheetApp.openById("0AtX9IYFZ..."); //define active trix as target 

var ts = tss.getSheetByName("US");          //define sheet in target trix

var newRange = ts.getRange("DA12:DA25");    //define target range

 newRange.setValues(featureList);  //set values in target range to items in featureList

Browser.msgBox('copied');
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-08T07:49:42.997

您以一种非常危险的方式定义了目标范围，因为它仅取决于您的决定而不是数组内容......您可以使用这种一直有效的方法：

```
var beginning_row = 12;
var beginning_col = /*what ever corresponds to 'DA' */ ;
var newRange = ts.getRange(beginning_row, beginning_col, featureList.length, featureList[0].length);    //define target range 
```

它从数组长度中获取行数（实际上就是这样）和从第一个元素的长度中获取列数（相同的注释）......非常简单和可靠;-)

另外：您给自己的答案是错误的（很抱歉，没有人身攻击......）因为它导致与[文档](https://developers.google.com/apps-script/best_practices)“最佳实践”章节中描述的*完全相反*，我建议删除它的“回答标记”和赞成票。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-19T21:25:16.337

我在这里使用某人的某个部分，我这个代码对我有用。

```
function CopyRange() {
 var sss = SpreadsheetApp.openById('spreadsheetid'); //replace with source ID
 var ss = sss.getSheetByName('sheetname'); //replace with source Sheet tab name
 var range = ss.getRange('A2:G50'); //assign the range you want to copy
 var data = range.getValues();

 var tss = SpreadsheetApp.openById('SpreadsheetID'); //replace with destination ID
 var ts = tss.getSheetByName('sheetname2'); //replace with destination Sheet tab name

 ts.getRange(ts.getLastRow()+1, 1,49,7).setValues(data); //you will need to define the size of the copied data see getRange()

} 
```

此代码正在获取范围 A2:G50 并复制到可用的最后一行中的 sheetname2。例如，如果 sheet2 的第一行可用于第 11 行，则此代码会将信息粘贴到第 11 行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-05-06T08:16:28.753

我使用此功能在文档之间复制整个工作表（仅限值）：

```
 function updateSourceToTarget(sourceID,sourceName,targetID,targetname){
  Logger.log(sourceID + ' ' + sourceName + ' ' +targetname);
var source = SpreadsheetApp.openById(sourceID).getSheetByName(sourceName);
var destination = SpreadsheetApp.openById(targetID).getSheetByName(targetname);
var sourcelastRow = source.getLastRow();
var sourcelastCol = source.getLastColumn();
var sourcedata = source.getRange(1,1,sourcelastRow,sourcelastCol).getValues();
destination.getRange(1,1,sourcelastRow,sourcelastCol).setValues(sourcedata);
} 
```

然后我调用这个函数，例如：

```
updateSourceToTarget('sourceID','sourceSheetName','targetID','targetSheetName'); 
```

在不同文档中获取原始工作表中数据的副本。对于小型文档非常有用，如果格式和功能不重要，您必须保持原件不变和不共享。

另一个方向是`sheet.copyto()`创建工作表的新副本的功能，但是您需要一些各种垃圾处理功能。祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T05:14:05.233

copyTo 和 setValues 都有效 - 我在代码中使用它们。

我会找到产生错误的行 - 日志或尝试并捕获。

或添加类似的东西 - 看看它是否给你一些线索

```
// The code below will set the values for range A1:D2 to the values in an array.
var myTable = [[1, 2, 3, 4],[5, 6, 7, 8]];
var sheet = SpreadsheetApp.getActiveSheet();
sheet.getRange(1,1,2,4).setValues(myTable); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-12T15:34:05.850

非常快速和简短：

```
var ss = SpreadsheetApp.getActiveSpreadsheet();
var sourceData = ss.getRange('Sheet1' + '!A2:M2').getValues();
var targetSheetNextRow = ss.getSheetByName('Sheet2').getLastRow() + 1;
ss.getRange('Sheet2' + '!A' + targetSheetNextRow+':M' + targetSheetNextRow).setValues(sourceData); 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-09-08T01:37:37.903

事实证明 GAS 在使用 setValues() 函数时遇到了问题。它无法获取完整的范围，所以我最终不得不使用 setValue() 代替。（设置值只允许您一次在一个单元格中操作）：

```
var tss = SpreadsheetApp.openById("0AtX9IYFZ9KkbdHg4TUdqYVppTTU5OENpb04tWTdNbHc");
var ts = tss.getSheetByName("US");
for (var i = 0; i < featureList.length; i++) {
var position = i + 12;
ts.setActiveCell("B" + position).setValue(featureList[i]); 
```

# ios - 如何在 GLKit 中保存变换矩阵？

> ID：12291550
> 
> 赞同：1
> 
> 时间：2012-09-06T00:40:02.410
> 
> 标签：ios, opengl-es, glkit

在 iOS 5 中，使用 EAGLView，您可以：

```
glPushMatrix();
glTranslatef(x, y, 0.0f);
glDrawArrays(GL_TRIANGLE_STRIP, 0, 4);
glPopMatrix(); 
```

使用 GLKView，这是否被以下替换？

```
GLKMatrix4 t = self.effect.transform.modelviewMatrix;

self.effect.transform.modelviewMatrix = GLKMatrix4Translate(t, x, y, 0);
[self.effect prepareToDraw];

glDrawArrays(GL_TRIANGLE_STRIP, 0, 4);

self.effect.transform.modelviewMatrix = t; 
```

有点丑...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-30T07:57:42.917

查看[GLKMatrixStack](http://developer.apple.com/library/ios/documentation/GLkit/Reference/GLKMatrixStack/Reference/reference.html)。我用它在 GLKit 中构建分层模型。

# regex - 查找属性值包含特定字符的 XML 节点

> ID：12291551
> 
> 赞同：0
> 
> 时间：2012-09-06T00:40:06.590
> 
> 标签：regex, notepad++

我有一个 XML 文件（大小很多 MB），我使用 Notepad++ 查看。许多 XML 节点具有以下形式：

```
<ItemInfo ID="something" Name="some name1" /> 
```

ID 属性的值可以包含分号 (;) 等特殊字符。

例子：

```
<ItemInfo ID="something" Name="some name1" />
<ItemInfo ID="some;thing;" Name="some name2" />
<ItemInfo ID="some;thing" Name="some name3" /> 
```

现在，我想检查所有出现的 ID 属性值包含一个或多个分号 (;) 的事件（使用查找功能中的正则表达式）。

在网上看到一些例子后，我尝试了以下但没有成功。

`"<ItemInfo ID="".*";`

`"<ItemInfo ID=""(.*)";`

`"<ItemInfo ID=\"".*";""\""`

本质上，我想找到所有字符串：

包含特定字符，

从一些固定的文本开始，和

以一些固定的文本结尾。

谁能给我一个解决方案或指出我正确的方向？我想我以后必须经常做同样的手术。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T00:42:50.163

尝试以下操作以查找所有包含 a`;`的字符串`ID`：

```
<ItemInfo ID="[^"]*;[^"]* 
```

要查找`ID`以某些固定文本开头的字符串：

```
<ItemInfo ID="text[^"]*" 
```

并找到`ID`以某些固定文本结尾的字符串：

```
<ItemInfo ID="[^"]*text" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T00:55:00.660

试一试：

```
.*ID=.*[;].*Name=.* 
```

有关notepad ++如何执行正则表达式的更多信息是[here](http://markantoniou.blogspot.com/2008/06/notepad-how-to-use-regular-expressions.html)

# android - 可展开的 ListView 子项未显示

> ID：12291556
> 
> 赞同：0
> 
> 时间：2012-09-06T00:41:04.650
> 
> 标签：android, android-layout

就好像他们根本不存在一样。它可以编译，但在每个组中都没有可见或可选择的内容。这是一个屏幕截图：

![在此处输入图像描述](../Images/e7f17344d944f3a938718b38d9c56310.png)

这是我的活动课。孩子们的膨胀 xml 几乎没有。

```
package com.anthonyce.mcathomie;

import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseExpandableListAdapter;
import android.widget.ExpandableListView;
import android.widget.LinearLayout;
import android.widget.TextView;

public class PlayoptionsActivity extends Activity {
ExpandableListView Mtopics;
ExpandableAdapter MtopicsAdapter;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_playoptions);
    //set up adapter
    MtopicsAdapter = new ExpandableAdapter();
    Mtopics = (ExpandableListView) findViewById(R.id.mtopicsListView);
    Mtopics.setAdapter(MtopicsAdapter);
    //Mtopics.setGroupIndicator(null);
}

public class ExpandableAdapter extends BaseExpandableListAdapter {
        private String[] groups = { "People Names", "Dog Names", "Cat Names",
        "Fish Names" };
private String[][] children = { { "Arnold" }, { "Ace" }, { "Fluffy" },
        { "Goldy" } };

    public Object getChild(int groupPosition, int childPosition) {
            return children[groupPosition][childPosition];
    }

    public long getChildId(int groupPosition, int childPosition) {
            return childPosition;
    }

    public View getChildView(final int groupPosition, final int childPosition,
            boolean isLastChild, View convertView, ViewGroup parent) {

        final class ExpandChildRow extends LinearLayout {
            public ExpandChildRow(Context context) {
                super(context);
                LayoutInflater childInflate = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                LinearLayout childView = (LinearLayout) childInflate.inflate(R.layout.mtopics_childrow, this, true);

                TextView childtxt = (TextView)childView.findViewById(R.id.mtopicchildtext);
                childtxt.setText(getChild(groupPosition, childPosition).toString());
            }
        }

        ExpandChildRow ChildRow = new ExpandChildRow(getBaseContext());
        return ChildRow;
    }

    public int getChildrenCount(int groupPosition) {
        return children[groupPosition].length;
    }

    public Object getGroup(int groupPosition) {
        return groups[groupPosition];
    }

    public int getGroupCount() {
        return groups.length;
    }

    public long getGroupId(int groupPosition) {
        return groupPosition;
    }

    public View getGroupView(final int groupPosition, boolean isExpanded,
            View convertView, ViewGroup parent) {

        final class ExpandGroupRow extends LinearLayout {
            public ExpandGroupRow(Context context) {
                super(context);
                LayoutInflater groupInflate = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                LinearLayout groupView = (LinearLayout) groupInflate.inflate(R.layout.mtopics_grouprow, this, true);

                TextView grouptxt = (TextView)groupView.findViewById(R.id.mtopicgrouptext);
                grouptxt.setText(getGroup(groupPosition).toString());
            }
        }

        ExpandGroupRow GroupRow = new ExpandGroupRow(getBaseContext());
        return GroupRow;

    }

    public boolean hasStableIds() {
        return true;
    }

    public boolean isChildSelectable(int groupPosition, int childPosition) {
        return true;
    }

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T05:57:42.473

哦，我太菜鸟了。它起作用的原因是因为组行上任何位置的复选框与组分隔符或类似的东西冲突。也许组分隔符实际上是一个复选框。我只是删除了复选框，一切都恢复了。我想我的布局 xml 文件需要修改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T00:52:53.427

我认为问题在于：`class ExpandGroupRow extends LinearLayout` 您正在尝试将此类用作 UI 元素，但您没有`this`在构造函数中设置布局参数。仅使用充气器返回的 LinearLayout 而不是此类可能更容易。就像是：

```
public View getGroupView(final int groupPosition, boolean isExpanded,
        View convertView, ViewGroup parent) {

            LayoutInflater groupInflate = (LayoutInflater) getBaseContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            LinearLayout groupView = (LinearLayout) groupInflate.inflate(R.layout.mtopics_grouprow, parent, false);

            TextView grouptxt = (TextView)groupView.findViewById(R.id.mtopicgrouptext);
            grouptxt.setText(getGroup(groupPosition).toString());
            return groupView;

} 
```

# android - 安卓机械土耳其人

> ID：12291557
> 
> 赞同：1
> 
> 时间：2012-09-06T00:41:07.243
> 
> 标签：android, image-recognition, mechanicalturk

我最近听说了[亚马逊的 Mechanical Turk 服务](https://www.mturk.com/mturk/welcome)，我想将该服务整合到 Android 应用程序中。这可能吗？我听说[MealSnap](http://mealsnap.com/)等其他应用程序也使用了此功能。如果是，我在哪里可以找到关于如何使用它的文档，假设我已经支付了服务费用并且在亚马逊有一个账户？

此外，是否可以非常具体地说明我们希望服务返回什么？例如，如果我要发送带有笔记本电脑图片的图像，Mechanical Turk 会返回该项目是笔记本电脑还是会指定它是什么类型的笔记本电脑及其一些功能？

# iphone - Apple 的 APNS 交付有时很慢

> ID：12291558
> 
> 赞同：7
> 
> 时间：2012-09-06T00:41:17.197
> 
> 标签：iphone, push-notification, apple-push-notifications

使用我们自己的内置 APNS 推送系统（用 PHP 编写），我们在某些事件上推送到我们的设备。某些通知会在相当快的时间内被设备接收，而某些设备可能需要长达 15 分钟才能看到。

我们保持连接打开（根据 Apple 的要求）并在错误时重置连接（通常在它们关闭连接时）。

一切正常，我可以随时在我们的系统队列中向我的 ipod touch 发送一条消息，并在几秒钟内收到通知。

然而，有时，在其他设备（例如 3G iPhone 设备）上，APNS 通常会正确交付 - 但可能需要长达 15 分钟才能到达。

观察我的应用程序，我可以看到通知只推送一次，非常快，而且没有错误。但是，就交付速度而言，它们似乎无法预测。

我了解 APNS 更喜欢使用 3G，因此如果连接存在问题 - 这可能会导致设备上的 APNS 连接重新初始化时延迟长达 15 分钟。

在为我们提供成功（和快速）的 APNS 消息或使用 APNS 时的生活事实方面，还有什么可以做的吗？

看来我们正在测试的设备似乎有最多的问题是沃达丰（澳大利亚）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-06T01:13:27.077

在其他线程中查看一些先前的信息，如果发生延迟，似乎并不少见。

虽然在大多数情况下，您应该期望在几秒钟内交付，但显然可能长达 30 分钟，这只是由于移动网络中断等网络问题和其他因素。

来源：[ios推送通知延迟多少？](https://stackoverflow.com/questions/9204767/how-much-delay-of-ios-push-notification) 还有：[Apple 的 APNS Docs](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html "Apple 的 APNS 文档")

# php - 购物车中的 Magento 自定义选项标签

> ID：12291560
> 
> 赞同：0
> 
> 时间：2012-09-06T00:41:57.650
> 
> 标签：php, magento

我有带有自定义选项的简单产品（在这种情况下是颜色）。它们不是可配置的产品。如果您不确定自定义选项的含义，请参阅：http://vimeo.com/15475673

它们是自定义选项（不是属性）。

我希望在我的购物车中的 SKU 旁边显示所选选项的标签（即绿色或红色或蓝色）。我当前的代码（default/template/checkout/cart/item/default.phtml）如下所示：

```
<?php echo 'SKU:' ?>
<?php echo $_item->getSku() ?> 
```

如何调出并回显自定义选项标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T05:48:32.077

使用它，您可以获得产品自定义选项值在您的购物车页面中写入此代码，您将在您的购物车页面中获得自定义选项。

```
$productOptions= $item->getProduct()->getTypeInstance(true)->
getOrderOptions($item->getProduct()); 
```

希望对你有帮助

# xml - 在 Flash Builder 4 中从 XMLListCollection 打印

> ID：12291561
> 
> 赞同：0
> 
> 时间：2012-09-06T00:42:02.487
> 
> 标签：xml, apache-flex, printing, flashbuilder4

所以我有一个带有 XMLListCollection 作为 dataProvider 的火花列表控件

```
 <wordRecord>
            <word>duck</word>
            <syllables>1</syllables>
            <firstLetter>d</firstLetter>
            <!--other fields-->
        </wordRecord>
        <wordRecord>
            <word>machete</word>
            <syllables>3</syllables>
            <firstLetter>m</firstLetter>
            <!--other fields-->
        </wordRecord>
        <!--more wordRecords--> 
```

我想从`<word>`字段中打印一个单词列表（基本上是一列）。我尝试创建一个自定义 PrintDataGrid，但它打印出空白。知道该怎么做吗？

（编辑：2012 年 9 月 12 日）

抱歉，应该包含更多代码。

我有一个从网络上某处改编的外部文件（“MyPrintView.mxml”）：

```
<?xml version="1.0" encoding="utf-8"?>
    <s:VGroup xmlns:fx="http://ns.adobe.com/mxml/2009" 
        xmlns:s="library://ns.adobe.com/flex/spark" 
        xmlns:mx="library://ns.adobe.com/flex/mx" width="500" height="300">
        <fx:Declarations>
            <!-- Place non-visual elements (e.g., services, value objects) here -->
        </fx:Declarations>
        <mx:PrintDataGrid id="myDataGrid" width="100%">
            <mx:columns>
                <mx:DataGridColumn  />
            </mx:columns>
        </mx:PrintDataGrid>
    </s:VGroup> 
```

这里是应该执行打印的主 mxml 文件中的函数代码（外部文件和 FlexPrintJob 的必要库已被复制，“workingList”是我正在尝试的 spark 列表对象的 id打印自）：

```
var printJob:FlexPrintJob = new FlexPrintJob();
if(printJob.start() != true) return;
var listPrintView:MyPrintView = new MyPrintView();
addElement(listPrintView);
/*Error on the following line*/
listPrintView.myDataGrid.dataProvider = workingList.dataProvider::word;
printJob.addObject(listPrintView);
printJob.send();
removeElement(listPrintView); 
```

我得到的是一个空白的行列，没有打印的单词。Flash Builder 4 给我一个错误，内容如下：

```
"Multiple markers at this line:
-1120: Access of undefined property dataProvider.
-listPrintView" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-19T23:44:16.647

自己修好了。DataColumn 声明需要一个`dataField`带有 XML 字段名称的属性才能出现。ItemRenderer 简直是天方夜谭。

# node.js - 如何快速部署使用缓慢构建二进制模块的节点应用程序？

> ID：12291563
> 
> 赞同：0
> 
> 时间：2012-09-06T00:42:09.933
> 
> 标签：node.js, npm

我有一些应用程序使用了很棒的 node-sqlite3 模块。它的一个缺点是它在安装时从源代码构建 sqlite。我进行部署的方式使情况更加复杂。我正在使用 chef，它为每次部署提供了一个干净的源代码树。然后我`npm install`在每个应用程序根目录下做一个。这对大多数事情来说都不是问题，因为它只是命中本地缓存。但是对于 sqlite3，它会为每个引用模块的地方构建一个全新的副本；我的情况是4次！现在需要几秒钟的时间需要几分钟，这在测试暂存环境中的新更改时尤其糟糕。

原则上，我应该能够为给定版本的模块构建一次，缓存它，然后在部署时复制或链接二进制文件。有没有人做过类似的事情？这里有恶魔潜伏吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T05:47:40.020

我们在 Chef 上使用 Node.js 进行了类似的设置，并选择全局安装 sqlite3。Node.js 风格指南建议不要这样做，但似乎每次部署都要重新编译 sqlite3 几分钟：

在 chef 或你的 package.json 中，你有类似的东西

```
(sudo) npm install -g sqlite3@2.1.x 
```

确保将全局 NODE_PATH 添加到初始化脚本中。

```
node NODE_PATH=/usr/local/lib/node_modules app.js 
```

# sql - SQL - 组合一个值的结果（行）

> ID：12291564
> 
> 赞同：3
> 
> 时间：2012-09-06T00:42:14.520
> 
> 标签：sql

我认为这是一个新手问题，但我没有想出什么是我的搜索。

两张表：

表 1 名称：客户

```
Inactive    ClientID    Name
0           1001        Fred
0           1002        Cindy
0           1003        John
0           1004        Sherry 
```

表 2 名称：期刊

```
ClientID    RecordType  Date       Comments
1001        Note       01-01-2012   TXT1
1001        Note       01-01-2012   TXT2
1003        Note       01-01-2012   TXT3
1001        Note       01-02-2012   TXT4
1002        Note       01-06-2012   TXT5
1003        Note       01-22-2012   TXT6
1003        Note       01-23-2012   TXT7 
```

如果无法知道特定 ClientID 的 JOURNAL 中有多少行。可能没有也可能很多。

如果我使用以下内容，这给了我除了 1004 之外的所有内容，那么这是我的第一个问题。

```
SELECT FROM CLIENT.InActive, CLIENT.ClientID, CLIENT.Name, JOURNAL.Comments
LEFT OUTER JOIN JOURNAL ON CLIENT.ClientID = JOURNAL.ClientID
WHERE CLIENT.Inactive = 0 and JOURNAL.Date > '2011-01-01' 
```

我想做的是将 JOURNAL.Comments 的结果合并到一个记录中。

```
ClientID    Name    Comments
1001        Fred    TXT1, TXT2, TXT4
1002        Cindy   TXT5
1003        John    TXT3, TXT6, TXT7
1004        Sherry 
```

**更新**：我从 Faircom ODBC 源中提取数据，因此我受到限制并且无法将 CREATE 用于 TMP 表。我正在使用 Excel 或 MSQUERY，因为我无法通过 SMS 连接到 FairCom 驱动程序。

任何建议，将不胜感激。是的......我知道别名'。想要保持简单，因为我很难掌握这个。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T00:52:50.573

首先，`1004`由于放置`date`过滤器的位置，您没有获得记录，请将其移至`left join`：

```
select c.inactive,
  c.clientid,
  c.name,
  j.comments
from client c
left join journal j
  on c.clientid = j.clientid
  and j.dt > '2011-01-01'
where c.inactive = 0 
```

其次，您没有指定 RDBMS，所以这里有一些选项：

在 SQL Server 中，您可以使用`STUFF()`：

```
select c.inactive,
  c.clientid,
  c.name,
  STUFF((SELECT distinct ', ' + comments 
              from journal j
              where j.clientid = c.clientid
                 and j.dt > '2011-01-01'
            FOR XML PATH(''), TYPE

            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')
from client c
where c.inactive = 0 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/02747/4)

在 MySQL 中使用`GROUP_CONCAT()`：

```
select c.inactive,
  c.clientid,
  c.name,
  GROUP_CONCAT(COALESCE(j.comments, 'NULL'))
from client c
left join journal j
  on c.clientid = j.clientid
  and j.dt > '2011-01-01'
where c.inactive = 0
GROUP BY c.inactive,
  c.clientid,
  c.name 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/02747/19)

在 Oracle 中，您可以使用以下`listagg()`功能：

```
select c.inactive,
  c.clientid,
  c.name,
  LISTAGG(j.comments, ',') WITHIN GROUP (ORDER BY c.clientid) AS comments
from client c
left join journal j
  on c.clientid = j.clientid
  and j.dt > to_date('2011-01-01', 'yyyy-mm-dd')
where c.inactive = 0
GROUP BY c.inactive,
  c.clientid,
  c.name 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!4/b0f99/2)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T01:02:06.720

这是另一个使用的版本`CROSS APPLY`

```
SELECT a.inactive , 
       a.clientid,
       a.name,
       SUBSTRING(d.CommentsList,1, LEN(d.CommentsList) - 1) CommentsList
FROM   client a
       CROSS APPLY
       (
          SELECT comments + ', ' 
          FROM journal AS B 
          WHERE A.clientid = B.clientid 
          FOR XML PATH('')
        ) D (CommentsList) 
```

# [*SQLFiddle 演示*](http://sqlfiddle.com/#!3/02747/8)

特别感谢**bluefeet**`SQLFiddle DDL`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-06T00:51:08.013

对于 SQL Server 2008，这是解决方案，添加您的 where 子句

```
SELECT  ClientID   ,Name ,Comments= STUFF((SELECT ','+ yt.Comments
                                                    FROM JOURNAL yt
                                                    WHERE yt.ClientID = sc.ClientID            
                                                    FOR XML PATH(''), TYPE).value('.','VARCHAR(max)'), 1, 1, '')
         FROM CLIENT AS sc 
```

# scala - Scala：使用伴随对象的父对象的受保护方法

> ID：12291566
> 
> 赞同：3
> 
> 时间：2012-09-06T00:42:39.100
> 
> 标签：scala

我有一组在类层次结构中管理数据库存储的类，如下所述，并且希望案例类能够访问伴随对象的父类中的受保护方法：

```
class TableBase[T] { 
  protected def insert(...):T {...}
  protected def update(...) {...}
  // Other "raw" CRUD-methods that I don't want the 
  // world to have access to
}

object User extends TableBase[User] { 
}

case class User(id:Int, email:String) { 
  // But here it would be really useful to access the "raw" CRUD methods:
  def changeEmail(newEmail:String) = User.update(...)
} 
```

唯一的问题是 User.changeEmail 中对 User.update 的调用是非法的，因为 User（类）不在 TableBase 的继承链中：

```
method update in class TableBase cannot be accessed in object models.User 
Access to protected method update not permitted because enclosing class 
class User in package models is not a subclass of class TableBase in package 
models where target is defined 
```

有没有一种（方便的）方法来允许这种类型的调用？

现在我必须要么将 changeEmail 类型的函数移动到单例中，这使得调用代码相当冗长，要么复制方法签名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T16:02:27.107

我刚刚意识到一个可能的解决方案是将 User 和 TableBase 之间的“is-a”切换为“has-a”关系，如下所示：

```
class TableBase[T] { 
  def insert(...):T {...}
  def update(...) {...}
}

object User { 
  private val db = new TableBase[User]
}

case class User(id:Int, email:String) { 
  def changeEmail(newEmail:String) = User.db.update(...)
} 
```

我希望能够在 User 内部自定义 TableBase 的某些方面，但这实际上仍然是可能的，而且很容易做到：

```
object User { 
  private val db = new TableBase[User] { 
    // Override stuff here
  }
} 
```

实际上，这比我最初拥有的解决方案要好得多，并且避免了方法上的命名冲突（即，有理由在 User 上进行公共“插入”，最好不要让它导致部分受保护的重载）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T15:11:15.113

您可以将接口作为特征 CrudOps[T] 提供，从它派生另一个*受保护*的特征 TableBase[T] 并提供实现，并从 TableBase[T] 派生单例对象。这样 TableBase 在编译单元之外是不可见的，但客户端可以安全地使用 CrudOps[T]。

# php - 连接表上的 Mysql 查询排序

> ID：12291568
> 
> 赞同：0
> 
> 时间：2012-09-06T00:42:50.840
> 
> 标签：php, mysql, sql, zend-framework

我有一个 mysql 查询我在对发件人的最新消息进行排序时遇到问题这是我的以下查询：

```
 SELECT 
        `Mes`.`fromid`, 
        `Mes`.`is_read`, 
        `Mes`.`id` AS `mesid`, 
        `Mes`.`message`,
        max(Mes.date) AS `date`, 
        `User`.`username`, 
        `User`.`MemberID` AS `Uid` 
   FROM `messages` AS `Mes` 
   INNER JOIN `users` AS `User` ON User.MemberID = Mes.fromid 
   WHERE (Mes.toid = 5 AND Mes.fromid <> 5) 
   GROUP BY `Mes`.`fromid` 
   ORDER BY `date` DESC 
```

这是我数据库中的表：用户表

```
MemberID      UserName     Email             Password
1             User1       user1@gmail.com   123456
2             User2       user2@gmail.com   123456
3             User3       user3@gmail.com   123456
4             User4       user4@gmail.com   123456
5             User5       user5@gmail.com   123456 
```

消息表：

```
id      fromid     toid    message         is_read    date  
1       5          2       hello test 1    1          2012-08-24 01:00:00
2       2          5       hello test 2    1          2012-08-24 02:00:00
3       3          5       hello test 3    1          2012-08-24 03:00:00
4       4          5       hello test 4    1          2012-08-24 04:00:00
5       2          5       hello test 5    1          2012-08-25 05:00:00 
```

和我的查询的输出：

```
SELECT 
     `Mes`.`fromid`, 
     `Mes`.`is_read`, 
     `Mes`.`id` AS `mesid`,
     `Mes`.`message`, 
     max(Mes.date) AS `date`, 
     `User`.`username`, 
     `User`.`MemberID` AS `Uid` 
FROM `messages` AS `Mes` 
INNER JOIN `users` AS `User` ON User.MemberID = Mes.fromid 
WHERE (Mes.toid = 5 AND Mes.fromid <> 5) 
GROUP BY `Mes`.`fromid` 
ORDER BY `date` DESC 
```

是 ：

```
USERNAME     MESSAGE          DATE
user2        hello test 2     2012-08-25 05:00:00
user4        hello test 4     2012-08-25 04:00:00
user4        hello test 3     2012-08-25 03:00:00 
```

如果您注意到从日期排序是正确的，但最新消息是不正确的。我想要这样的输出。

```
USERNAME     MESSAGE          DATE
user2        hello test 5     2012-08-25 05:00:00
user4        hello test 4     2012-08-25 04:00:00
user4        hello test 3     2012-08-25 03:00:00 
```

而不是消息“ **hello test 2** ”，我想对最新消息“ **hello test 5** ”进行排序

任何人都可以帮助我的问题？

太感谢了...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T00:52:21.410

应该是这样的

```
SELECT  *                              // -- select the columns you want
FROM    Messages a
            INNER JOIN
            (
                SELECT  fromid, toid, MAX(`date`) maxDATE
                FROM    Messages
                GROUP BY fromid, toid
            ) b ON a.fromID = b.fromID AND
                   a.toid = b.toid AND
                   a.`date` = b.maxDATE
            INNER JOIN users c
                ON c.MemberID = a.fromID
WHERE   a.toid = 5 AND a.fromid <> 5
ORDER BY `date` DESC 
```

# android - 包括布局返回空格

> ID：12291570
> 
> 赞同：0
> 
> 时间：2012-09-06T00:43:03.333
> 
> 标签：android, layout, include

我在我的一个布局中使用了 include，它只返回一个空格。不知道发生了什么。

主.xml

```
<LinearLayout
    android:id="@+id/title1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >
    <RelativeLayout
        android:layout_width="fill_parent"
        android:layout_height="25dp"
        android:background="@drawable/section">
        <TextView
            android:id="@+id/titletext1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_centerVertical="true"
            android:text="List"
            android:layout_marginLeft="8dp"
            android:layout_marginTop="0dp"
            android:layout_marginBottom="0dp"
            android:textColor="#555555"
            android:textStyle="bold"
            android:textSize="13dp"/>
    </RelativeLayout>
    <include
        android:id="@+id/recent1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        layout="@layout/list"/>
    <include
        android:id="@+id/recent2"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        layout="@layout/list"/>
</LinearLayout> 
```

列表.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/relativeLayout1"
    android:background="@drawable/list_bg"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content">
    <LinearLayout
        android:id="@+id/list_content"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:paddingTop="10dp"
        android:paddingBottom="12dp"
        style="@style/list_button">
        <LinearLayout
            android:layout_gravity="center"
            android:orientation="vertical"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content">
            <TextView
                android:id="@+id/text1"
                android:duplicateParentState="true"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:textSize="17dp"
                android:textStyle="bold"
                android:textColor="#000000"
                android:text="Text1"/>
            <TextView
                android:id="@+id/text2"
                android:duplicateParentState="true"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginTop="-5.0dp"
                android:textSize="12dp"
            android:textColor="#666666"
                android:text="Text2"/>
        </LinearLayout>
    </LinearLayout>
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T01:10:42.683

`LinearLayout`将你的main 设置`orientation`为`Vertical`. 默认情况下，`orientation`a`LinearLayout`是`Horizontal`。

`LinearLayout`你的第一个孩子（顺便说一句现在已弃用，使用`RelativeLayout`它代替它）占据所有屏幕宽度，因此不会显示其他孩子。`layout_width="fill_parent"``"fill_parent"``"match_parent"``Views`

# mysql - MYSQL游标循环，多跑一圈，为什么？

> ID：12291573
> 
> 赞同：17
> 
> 时间：2012-09-06T00:43:26.937
> 
> 标签：mysql, loops, stored-procedures, database-cursor

我正在遍历 MYSQL 存储过程中的游标结果集。我面临一个问题，即循环总是通过最后一条记录运行两次。这是我的代码，

```
BEGIN
DECLARE not_found_creadit INT DEFAULT 0;

DECLARE cur_credit CURSOR FOR 
SELECT customer_id, amount, status, user_type, employee, note FROM credit WHERE status = 'approved' AND customer_id = int_cust_id;
DECLARE CONTINUE HANDLER FOR NOT FOUND SET not_found_creadit = 1;
OPEN cur_credit;
  SET not_found_creadit = 0;
  credit_loop : LOOP 
      IF not_found_creadit THEN
        CLOSE cur_credit;
        LEAVE credit_loop;
      END IF;
      FETCH cur_credit INTO vc_customer, dec_amount, vc_status, vc_user_type, vc_emp, vc_note;
      SELECT vc_customer, dec_amount, vc_status, vc_user_type, vc_emp, vc_note;
      ......
      ......
  END LOOP;
END; 
```

意味着如果我有 3 条记录，循环运行 4 次，如果是 10 条记录，循环运行 11 次，等等。知道这里发生了什么吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-06T01:11:27.157

设置的处理程序`not_found_creadit = 1`在没有返回行时被触发`FETCH`，但是您在执行*之前*`FETCH`检查它的值，因此循环的主体将在`FETCH`失败时执行一次额外的时间，然后循环循环*在下一次*开始时退出迭代。

重新排列您的代码以在*之后*立即检查变量的值`FETCH`：

```
credit_loop : LOOP 
    FETCH cur_credit INTO vc_customer, dec_amount, vc_status, vc_user_type, vc_emp, vc_note;
    IF not_found_creadit THEN
        CLOSE cur_credit;
        LEAVE credit_loop;
    END IF;
    SELECT vc_customer, dec_amount, vc_status, vc_user_type, vc_emp, vc_note;
    ......
    ......
END LOOP; 
```

另外，考虑将变量的拼写更正为`not_found_credit`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-06T12:00:42.490

你必须正确的类型，因为我写的是默认值（我不知道你在表信用中有什么）。End If U 创建表 TempTable 使用

```
TRUNCATE TempTable; 
```

请重写示例

```
CREATE CREATE TEMPORARY TABLE TempTable (`Id` int(11) NOT NULL auto_increment,
  `customer_id` int(11) NOT NULL,
  `amount` int(11) NOT NULL,
  `status` varchar(1000) NOT NULL,
  `user_type` int(11) NOT NULL default '0',
  `employee` varchar(1000) NOT NULL,
  PRIMARY KEY  (`customer_id`),
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_polish_ci AUTO_INCREMENT=1 ;"); 
```

当然类型不好:)

```
 DELIMITER $$
    DROP PROCEDURE IF EXISTS CursorX $$
    CREATE PROCEDURE `CursorX`()
    BEGIN    
            DECLARE xCustomerId int(11);  
            DECLARE xStatus   int(11);
            DECLARE xUserType  varchar(255);
            DECLARE xEmployee  varchar(255);
            DECLARE xNote varchar(255);  
            DECLARE i int(11);
            DECLARE recordNotFound INTEGER DEFAULT 0;
            DECLARE cur_credit CURSOR FOR SELECT customer_id, amount, status, user_type, employee, note FROM credit WHERE status = 'approved' AND customer_id = int_cust_id;
            DECLARE CONTINUE HANDLER FOR NOT FOUND SET recordNotFound = 1;

            DROP TEMPORARY TABLE IF EXISTS TempTable;
            CREATE TEMPORARY TABLE TempTable AS(SELECT * FROM credit);

            OPEN cur_credit;
            set not_found_creadit = 0;
            credit_loop: LOOP
            SET i = i +1;
                FETCH cur_credit INTO xCustomerId,xStatus,xUserType,xEmployee,xNote;
                IF not_found_creadit THEN
                    LEAVE credit_loop;
                 END IF;
            END LOOP credit_loop;
            CLOSE cur_credit;
    select * FROM TempTable;

    END $$ 
```

# java - SWT：隐藏组合内的一项

> ID：12291578
> 
> 赞同：1
> 
> 时间：2012-09-06T00:44:50.813
> 
> 标签：java, combobox, swt

我正在做 SWT 程序，我想知道如何从组合列表中隐藏一项。我知道有一种`combo.remove()`方法，但我不想删除整个数据，相反，我只想“隐藏”第一项。

例如，有一个 , , 的列表，`item[0]=1`以及用于显示这三个项目的组合的 UI，但现在我想隐藏第一个项目，所以组合在组合列表中只会显示“2,3”，但是在数据库中仍然是“1”，在此先感谢！`item[1]=2``item[2]=3``item[0]`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T00:52:46.390

您需要将逻辑从在 GUI ComboBox 类中存储重要数据中移开。

使用另一个存储类，如 ArrayList 来保存您的数据（可能使用另一个 ArrayList 来标记哪些元素应该在 GUI 中）。

# hadoop - 在 Hadoop Hive 中解码原始 URL，更喜欢非 Java 解决方案

> ID：12291580
> 
> 赞同：2
> 
> 时间：2012-09-06T00:45:55.687
> 
> 标签：hadoop, hive

我正在查询一个`out_url`具有原始 url 编码字段的配置单元表，例如：

`http%3A%2F%2Fwww.example.com%2Findex.php%3Fpage%3D260%26id%3D22`

我只想提取域，如果 url 不是原始编码的，则可以使用 `parse_url(out_url, 'HOST') 。

为了解决这个问题，我正在做这个丑陋的双正则表达式替换，比如：

`parse_url(regexp_replace(regexp_replace(out_url, '%3A', ':'), '%2F', '/'), 'HOST')`

将`%3A`to`:`和`%2F`to转换为`/`然后提取域。我知道我可以编写一个 Java UDF 来做到这一点，但这对我来说不是一个很好的选择，因为我目前主要不擅长编写 Java。

想法？是否可以编写 Python UDF？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-18T10:59:13.123

这里似乎有一种使用Java反射的简单方法：http: [//mail-archives.apache.org/mod_mbox/hive-user/201109.mbox/%3C15C962F3417BF94ABEAB2314AF92A16A1FF9CE@SVR-PR-MB2.cb.careerbuilder.com% 3E](http://mail-archives.apache.org/mod_mbox/hive-user/201109.mbox/%3C15C962F3417BF94ABEAB2314AF92A16A1FF9CE@SVR-PR-MB2.cb.careerbuilder.com%3E)

```
SELECT reflect("java.net.URLDecoder", "decode", field_name) FROM table; 
```

# android - 在 SMS inbox_sent 访问中未定义 getContentResolver

> ID：12291590
> 
> 赞同：2
> 
> 时间：2012-09-06T00:47:42.777
> 
> 标签：android, phonegap-plugins

我正在使用 PhoneGap 2 并尝试使用 [inbox_sent](https://github.com/phonegap/phonegap-plugins/tree/master/Android/SMS%20inbox_sent%20access)添加 SMS 功能。按照说明，我添加了 SMSRead.java 文件。

但我有未定义的错误

```
 private ContentResolver getContentResolver(){
       return this.ctx.getContentResolver();
    } 
```

这么说

> 对于 LegacyContext 类型，方法 getContentResolver() 未定义

请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T17:15:41.970

我发现[http://simonmacdonald.blogspot.co.uk/2012/07/phonegap-android-plugins-sometimes-we.html](http://simonmacdonald.blogspot.co.uk/2012/07/phonegap-android-plugins-sometimes-we.html)上的文章很有帮助。

此插件的 API 发生了一些更改，代码需要更新。

根据上面页面上的信息，您应该更新您的阅读方法。

```
private ContentResolver getContentResolver(){
    return cordova.getActivity().getContentResolver();
} 
```

我仍在将这个插件集成到我的项目中，并且我知道在这一点之外还有一些挑战（但 Java 代码现在至少可以编译了。）

# android - 片段通讯。我有一点疑惑

> ID：12291593
> 
> 赞同：2
> 
> 时间：2012-09-06T00:48:26.717
> 
> 标签：android, fragment

我有 2 个片段，FragA 和 FragB，我想将一个字符串从 FragA 传递给 FragB。我使用了这些参考资料， http: [//developer.android.com/guide/components/fragments.html#CommunicatingWithActivity](http://developer.android.com/guide/components/fragments.html#CommunicatingWithActivity) & [http://developer.android.com/training/basics/fragments/communicating.html](http://developer.android.com/training/basics/fragments/communicating.html)

我对下一步仍然有些困惑。我需要对这段代码做什么才能将 FragA 中的字符串传递给 FragB？请张贴代码。

我的 FragA 中有：

```
public class FragA extends ListFragment{

    OnDataPass dataPasser;

public interface OnDataPass{
    public void onDataPass(String data);
}

@Override
public void onAttach(Activity a) {
    super.onAttach(a);

    // This makes sure that the container activity has implemented
    // the callback interface. If not, it throws an exception
    try {
        dataPasser = (OnDataPass) a;
    } catch (ClassCastException e) {
        throw new ClassCastException(a.toString()
                + " must implement OnHeadlineSelectedListener");
    }
}

...
@Override
public void onListItemClick(ListView l, View v, int position, long id) {
    // TODO Auto-generated method stub
    super.onListItemClick(l, v, position, id);
    String libraryList;

    //Get the position the user clicked.
    Fragment newFragment = null;

    libraryList = l.getItemAtPosition(position).toString();

    dataPasser.onDataPass(libraryList);
 ...
} 
```

在我的主要活动中，我添加了：

```
public class MainActivity extends Activity implements OnDataPass{
...
    @Override
public void onDataPass(String data) {
    // TODO Auto-generated method stub

}
} 
```

片段B：

```
public class FragB extends ListFragment{

TestAdapter mDbHelper;

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onActivityCreated(savedInstanceState);

    mDbHelper = new TestAdapter(getActivity());     
    mDbHelper.createDatabase();
    mDbHelper.open();

    //Get info from FragA

    //Close the database.
    mDbHelper.close();

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T01:09:57.470

我认为你应该实现你的`OnDataPass`接口`FragB`，然后`Activity.onDataPass`你应该找到`FragB`实例并调用`FragB.onDataPass`。这是我认为最清晰的方式。

# mysql - 对 MySQL 查询结果感到非常困惑

> ID：12291597
> 
> 赞同：1
> 
> 时间：2012-09-06T00:49:06.340
> 
> 标签：mysql

所以我不是最擅长 SQL 我有这个复杂的 MySQL 查询，我迷路了。我不明白的部分是，来自 UNION 以上部分查询的所有结果都乘以 8。如何这可能吗？为什么它们被乘以 8，我该如何阻止它？我还有一些与此非常相似的其他查询，它们都有同样的问题。任何关于为什么会发生这种情况的想法将不胜感激。谢谢！

```
SELECT best_thrown
    FROM(
        SELECT CASE WHEN rageup_echelon.party_id IS NULL THEN 0 ELSE SUM(CASE WHEN rageup_echelon.echelon_vote = 1 THEN 5 ELSE 0 END) - SUM(CASE WHEN rageup_echelon.echelon_vote = 0 THEN 3 ELSE 0 END) END AS best_thrown
        FROM rageup_parties LEFT JOIN rageup_echelon ON rageup_parties.party_id = rageup_echelon.party_id
                            LEFT JOIN rageup_team_hosts ON rageup_parties.party_team_id = rageup_team_hosts.team_id
        WHERE rageup_team_hosts.team_id = 1 || rageup_team_hosts.team_id = 2 || rageup_team_hosts.team_id = 3
        AND rageup_parties.party_status = 'approved'
        AND rageup_parties.party_invites = 'public'
        AND rageup_team_hosts.user_id = 1
        GROUP BY rageup_parties.party_id
        UNION
        SELECT CASE WHEN rageup_echelon.party_id IS NULL THEN 0 ELSE SUM(CASE WHEN rageup_echelon.echelon_vote = 1 THEN 5 ELSE 0 END) - SUM(CASE WHEN rageup_echelon.echelon_vote = 0 THEN 3 ELSE 0 END) END AS best_thrown
        FROM rageup_parties LEFT JOIN rageup_echelon
        ON rageup_parties.party_id = rageup_echelon.party_id
        WHERE rageup_parties.party_host_id = 1
        AND rageup_parties.party_status = 'approved'
        AND rageup_parties.party_invites = 'public'
        AND rageup_parties.party_team_id = 'user'
        GROUP BY rageup_parties.party_id
        ORDER BY best_thrown DESC
        LIMIT 1
    ) AS T 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T01:00:27.537

对于调试，只运行第一个没有这些`GROUP BY`东西的查询并查看返回的底层行。

另请注意，您正在使用`LEFT JOIN from rageup_parties`to `rageup_team_hosts`- 使匹配`team_hosts`条目可选 - 但随后需要在子句`team_id`中设置为非 NULL 值。`WHERE`如果您知道数据脏到需要`LEFT JOIN`，请将这些条件移动到`ON`每个`LEFT JOIN`.

# ruby-on-rails - 从部分导轨中渲染 Bootstrap 模态

> ID：12291598
> 
> 赞同：4
> 
> 时间：2012-09-06T00:49:34.940
> 
> 标签：ruby-on-rails, twitter-bootstrap

我试图通过将模态代码放在部分中来稍微清理我的代码，但是在尝试调用模态时遇到了问题。

我尝试了[How to show twitter bootstrap modal via JS request in rails 提供的解决方案？](https://stackoverflow.com/questions/8529420/how-to-show-twitter-bootstrap-modal-via-js-request-in-rails)，但如果我理解正确，我必须将代码添加到特定控制器以显示模式。这很好，但是**我想显示模态，而不管它位于哪个控制器/视图**中。这可能吗？

我所拥有的（完全来自上述问题）：

当前链接（views/static_pages）

```
<%= link_to "ModalTest", 'shared/testmodal', {:remote => true, 'data-toggle' => 'modal', 'data-target' => "testmodal" }%> 
```

**显示.js.erb**

```
$('.modal-body').html('<%= escape_javascript(render :partial => 'shared/testmodal'%>');
$('.modal-header').remove(); 
```

之前的尝试：

```
<%= link_to "ModalTest", render(:partial => 'shared/testmodal') %> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-06T08:14:44.043

您可以在您需要的任何视图或您的部分中包含您放入的模态内容`application.html`：

```
<%= render "shared/testmodal" %> 
```

并切换它：

```
<%= link_to "ModalTest", "#testModal", "data-toggle" => "modal" %> 
```

`#testModal`你的模态在哪里`id`。

# javascript - 带有 JS 的请求 - 这是过时的吗？

> ID：12291599
> 
> 赞同：0
> 
> 时间：2012-09-06T00:49:36.130
> 
> 标签：javascript

我正在进行基本的实时聊天，想知道我是否正确地学习了这一点......

我有这样的呼叫功能：

```
function call_data(url,data)
{
  if (window.XMLHttpRequest) {              
    AJAX=new XMLHttpRequest();              
  } else {                                  
    AJAX=new ActiveXObject("Microsoft.XMLHTTP");
  }
  if (AJAX) {
  querystring = "?dta="+data;
     AJAX.open("GET", url + querystring, false);                             
     AJAX.send(null);
     return AJAX.responseText;                                         
  } else {
     return false;
  }                                             
}   

function checker(id){
        result = parseInt(call_data('check_chat.php',id)); //check new messages
        if(result){//if new message
        loadchat(id); //load the messages
        } else {
        setTimeout(function() { checker(id); }, 5000); //check for new message every 5 seconds
        }
} 
```

这是定期调用新消息的最佳方式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T00:56:20.833

您正在执行同步调用 `XMLHttpRequest`-- 这会导致浏览器冻结，直到返回数据。 `asynchronous`更好，只是稍微复杂一点。

我建议做更多的研究。

我快速浏览了这个链接，它可能会有所帮助：[http ://www.cristiandarie.ro/asp-ajax/Async.html](http://www.cristiandarie.ro/asp-ajax/Async.html)

# c++ - 带有 .Net 对话框应用程序的 ExeShield

> ID：12291600
> 
> 赞同：0
> 
> 时间：2012-09-06T00:49:49.307
> 
> 标签：c++, visual-studio-2010

有没有人使用带有 VS 2010 c++ winforms 应用程序的 ExeShield 的任何示例？我按照指示和教程视频和 ExeShield 启动屏幕显示，但是当我按下“尝试”按钮时，启动屏幕消失了，但我的应用程序没有运行。谢谢你的帮助/比尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T15:53:52.587

从 ExeShield 技术支持中找到答案，如下所示：

这里有几件事要看。

1.  确保为 x86 而不是 x64 编译

2.  使用 .NET 3.5 或更低版本。

C++ 应用程序需要这些设置

链接器随机基地址：禁用图像随机化 (/DYNAMICBASE:NO) 图像与 DEP 不兼容 (/NXCOMPAT:NO) 在“优化”下将“链接时间代码生成”设置为“使用链接时间代码生成 (/ltcg)

# c# - 根据用户选择显示摘要

> ID：12291601
> 
> 赞同：0
> 
> 时间：2012-09-06T00:50:00.240
> 
> 标签：c#, winforms

我正在使用带有标签页的标签控件来获取用户输入。最后在打印之前，我必须显示将要打印的用户摘要。

根据输入，可以显示 2 组数据。一次将更换一个。

我是 WinForm 的新手，但在 Asp.net 中有一个控制面板，请指导我是否有可以用于这种显示的控件。

我想使用面板或组框，但我不知道如何管理那里的位置和显示。我尝试将它们放在一起，然后单击尝试将所需的一个放在前面，使其可见并隐藏其他，但它无法正常工作。请提供任何建议，这是我的代码：

```
 private void button1_Click(object sender, EventArgs e)
    {

        groupBox2.Visible = false;
        groupBox1.BringToFront();

        groupBox1.Visible = true;

    }

    private void button2_Click(object sender, EventArgs e)
    {
        groupBox1.Visible = false;
        groupBox2.BringToFront();

        groupBox2.Visible = true ;
    } 
```

**编辑** 我已经注意到问题是当我将两个组框放在彼此顶部时，一个成为另一个的一部分。如果我尝试通过面板执行此操作，我还必须单独管理所有控件。请指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T23:33:02.820

我最终使用报告查看器来显示选择，因为稍后我还要打印报告

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T07:52:46.240

你可以这样做。

创建两个包含您在您的情况下需要的控件的用户控件，并将一个 GroupBox 添加到您的表单中。不要将您的用户控件添加到您的窗体。

将 UserControls 的两个实例变量添加到 Form，并在 FormLoad 事件中初始化它们（例如，您可以使用设计器将控件之一添加到 GroupBox，将初始化代码从 InitializeComponent 复制并粘贴到 Form_Load，删除控件并然后对另一个控件执行相同的操作）。小心避免将 UserControls 添加到 GroupBox 的 Control 集合中。

最后，当您知道要显示什么（或必须在可视化之间切换）时，只需清除 GroupBox 的 Control 集合并添加所需的 UserControl。

下面的代码为您提供了一个使用两个标签而不是真正的用户控件的示例。

```
 private System.Windows.Forms.Label label1;
    private System.Windows.Forms.Label label2;
    private bool sel1 = true; 
    private void Form1_Load(object sender, EventArgs e)
    {
        //
        this.label1 = new System.Windows.Forms.Label();
        this.label1.AutoSize = true;
        this.label1.Location = new System.Drawing.Point(31, 44);
        this.label1.Name = "label1";
        this.label1.Size = new System.Drawing.Size(27, 13);
        this.label1.TabIndex = 0;
        this.label1.Text = "One";
        this.label2 = new System.Windows.Forms.Label();
        this.label2.AutoSize = true;
        this.label2.Location = new System.Drawing.Point(31, 44);
        this.label2.Name = "label1";
        this.label2.Size = new System.Drawing.Size(27, 13);
        this.label2.TabIndex = 0;
        this.label2.Text = "Two";
        groupBox1.Controls.Add(label1);
    }

    private void button1_Click(object sender, EventArgs e)
    {
        groupBox1.Controls.Clear();
        sel1 = !sel1;
        if (sel1)
            groupBox1.Controls.Add(label1);
        else
            groupBox1.Controls.Add(label2);
    } 
```

# python - Python、.append() 和 AttributeError

> ID：12291604
> 
> 赞同：0
> 
> 时间：2012-09-06T00:50:18.853
> 
> 标签：python, append, attributeerror

我正在尝试编写二十一点程序，但是当我尝试将消息从我的牌组对象发送到另一个使用 .append() 的对象时，我不断收到 AttributeError: object has no 'append'

这是我认为相关的代码：

```
class Deck(Hand):

    def deal(self, players, per_hand= 1):
        for rounds in range(per_hand):
            for hand in players:
                if self.hand:
                    top_card = self.hand[0]
                    self.give(top_card,hand) 
```

玩家参数是我使用实例化的对象元组：

```
class Bj_player(Player,Hand):

    def __init__(self,name,score= 0,status= None):
        self.name = name
        self.score = score
        self.status = status
        self.hand = Hand() 
```

Player 基类中除了用户的一些输入之外什么都没有。以上是我弄错的地方吗？

```
class Hand(object):
"""a hand of cards"""

    def __init__(self):
        self.hand = []

    def add(self, card):
        self.hand.append(card)

    def give(self,card,other_hand):
        if self.hand:
            self.hand.remove(card)
            other_hand.add(card)
        else:
            print("EMPTY ALREADY. COULD NOT GIVE") 
```

我取出**str**部分将其剪掉。我得到的错误是：

```
 line 44, in add
    self.hand.append(card)
    AttributeError: 'Hand' object has no attribute 'append' 
```

我很新，所以解释得越简单越好。谢谢。

另外，以防万一它有帮助，这是我开始的方式：

```
deck = Deck() #populated and all that other stuff

total_players = Player.ask_number("How many players will there be? (1-6): ",1,6)
for player in range(total_players):
    name = input("What is the player's name? ")
    x = Bj_player(name)
    roster.append(x)

deck.deal(roster,2) #error =( 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T02:24:38.587

问题是这条线：

```
 self.hand = Hand() 
```

班内`Bj_player`。这使`self.hand`变量成为`Hand`实例，而不是应有的列表。`roster`是这些`BJ_player`实例的列表，因此当您调用 时`deck.deal(roster)`，在它所说的函数中`for hand in players`，每个`hand`对象都将是这些`Bj_player`实例之一。

解决这个问题的最好方法是`Bj_player` *不要*继承自`hand`. （确实，不清楚为什么要让它继承自，或者该类提供了`Player`哪些有用的功能）。`Player`取而代之的`Bj_player`是，拥有自己的类（也许命名为`Player`-不那么混乱）并更改行

```
 for hand in players:
        if self.hand:
            top_card = self.hand[0]
            self.give(top_card,hand) 
```

至

```
 for player in players:
        if self.hand:
            top_card = self.hand[0]
            self.give(top_card,player.hand) 
```

单独说明：如果您更改`self.hand`为`self.cards`，它会使事情变得*更加*清晰！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-16T09:48:04.987

例如，

```
a=[1,2,3]
a.append(4) 
```

将产生：

```
a=[1,2,3,4] 
```

但`a=a.append(4)`会返回**NonType**对象。无法处理此对象。

所以会得到**属性错误**

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-06T01:29:46.047

Make sure that your variables are all "hand" (lowercase) and not "Hand" (uppercase). If you look at the error, the error is saying that "Hand" (uppercase) has no attribute append. So at some point you either try to append something to the the Hand class, or you set the variable hand to the class Hand. (Note the upper and lowercase of each). Common mistake, it happens to all of us. Happy coding!

# c - 将参数传递给具有 const 参数的函数：它更快吗？

> ID：12291607
> 
> 赞同：23
> 
> 时间：2012-09-06T00:51:08.333
> 
> 标签：c, constants, function-parameter

例如，考虑：

```
int sum(int a, int b)
{
    return a + b;
} 
```

对比

```
int sum(const int a, const int b)
{
    return a + b;
} 
```

第二种方法通常更快吗？

C 中的函数参数被复制并发送到函数，因此函数内部的更改不会影响原始值。我的理由是，在`sum`上面的第二个中，编译器肯定知道`a`并且`b`没有在函数内部进行修改，因此它可以只传递原始值而无需先复制它们。这就是为什么我认为第二个`sum`比第一个快。但我真的不知道。在上面的特定简单示例中`sum`，差异（如果有的话）应该是最小的。

**编辑：**这个`sum`例子只是为了说明我的观点。我不认为在这个特定的例子中应该有很大的差异。但是我想知道在更复杂的情况下`const`，编译器是否可以利用函数参数中的修饰符来使函数更快。我怀疑编译器是否总能确定函数内部是否更改了参数（因此我在下面的第二个问题）；因此我希望当它找到一个`const`修饰符时，它会做一些与没有`const`修饰符时不同的事情。

**问题：**一般来说，当参数为 时，函数会比参数`const`不是时更快？

**问题2：**一般来说，C编译器（理论上）是否可以始终确定函数内部是否更改了函数参数？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-06T01:15:37.533

**简短的回答：没有**

**长答案，不，有证据。**

我在使用 clang 编译的 MacBook Pro 上运行了这个测试几次，并没有看到实时差异：

```
int add(int a, int b)
{
    return a + b;
}

const int cadd(const int a, const int b)
{
    return a + b;
}

int main (int argc, char * argv[])
{
#define ITERS 1000000000

    clock_t start = clock();
    int j = 0;
    for (int i = 0; i < ITERS; i++)
    {
        j += add(i, i + 1);
    }

    printf("add took %li ticks\n", clock() - start);

    start = clock();
    j = 0;
    for (int i = 0; i < ITERS; i++)
    {
        j += cadd(i, i + 1);
    }

    printf("cadd took %li ticks\n", clock() - start);

    return 0;
} 
```

输出

```
添加了 4875711 滴答
cadd 占用了 4885519 个刻度

```

然而，这些时间确实应该持保留态度，因为`clock`这不是最准确的计时功能，并且可能会受到其他正在运行的程序的影响。

因此，这是生成的比较程序集：

```
_add:
    .cfi_startproc
    pushq   %rbp
    .cfi_def_cfa_offset 16
    .cfi_offset %rbp, -16
    movq    %rsp, %rbp
    .cfi_def_cfa_register %rbp
    movl    %edi, -4(%rbp)
    movl    %esi, -8(%rbp)
    movl    -4(%rbp), %esi
    addl    -8(%rbp), %esi
    movl    %esi, %eax
    popq    %rbp
    ret

_cadd:                                 
    .cfi_startproc    
    pushq   %rbp
    .cfi_def_cfa_offset 16
    .cfi_offset %rbp, -16
    movq    %rsp, %rbp
    .cfi_def_cfa_register %rbp
    movl    %edi, -4(%rbp)
    movl    %esi, -8(%rbp)
    movl    -4(%rbp), %esi
    addl    -8(%rbp), %esi
    movl    %esi, %eax
    popq    %rb 
```

因此，如您所见，两者之间***没有区别***。传递参数`const`只是对调用者的提示，参数不会被更改，并且在像上面描述的简单场景中，不会导致编译任何不同的程序集。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-06T00:54:43.267

答案可能取决于您的编译器、优化级别以及编译器是否决定内联函数。如果您对这些东西感到好奇，只需查看编译器生成的实际程序集并找出答案就很容易了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T00:59:27.680

不，他们两个应该是相同的速度。出于您的原因，假设它将原始值传递给 sum 函数，那么 sum 函数中的某些代码如何修改原始值，例如另一个线程。

一般来说，const 对参数的性能没有影响。如果 const 是局部/全局变量，它确实会影响性能，因为某些计算可以像 const 一样移至编译时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-31T20:23:26.580

虽然晚了，但编译器可以将定义为 const 的变量放在只读内存段/块中，这样如果试图通过一些愚蠢的指针写入地址，写入内存将触发运行时异常。

——杰米

# ios - iOS Adhoc Distribution OTA：plist 中的捆绑版本

> ID：12291609
> 
> 赞同：0
> 
> 时间：2012-09-06T00:52:00.073
> 
> 标签：ios, plist, adhoc, ota

我正在通过 Xcode 4.5 归档机制将我的 .ipa 分发给我的测试人员。发现，早先自动生成的 plist 文件包含当前构建的捆绑版本。

在将存档导出到我的桌面时，我想自动将此捆绑版本放入我的 plist 中，因为这是我经常执行的主要操作。

有没有一种简单的方法可以自动将捆绑版本添加到 plist 中，还是我必须编写一个 shell 脚本来打开 .ipa 并读取信息以便稍后将其写入 plist？

当版本与安装的捆绑包版本不同时，我想使用它来向我的 beta 测试人员发送更新 beta 应用程序的提醒。

有什么想法或提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T13:02:26.200

我修好了它！

到目前为止，我使用`CFBundleVersion`了我的版本字符串，但`CFBundleShortVersionString`设置为 plist，它一直是空的。

谢谢您的支持。希望其他人从现在开始更快地解决这个问题。:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T12:44:20.023

> 捆绑包版本字符串指定捆绑包的构建版本号。该值是一个单调递增的字符串，**由一个或多个以句点分隔的整数组成**。

有你的问题。捆绑版本中不能有括号或字母，只能有数字和点。

# .htaccess - 当我通过编辑 .htaccess 文件得到 404 时，如何返回 200？

> ID：12291613
> 
> 赞同：1
> 
> 时间：2012-09-06T00:52:29.367
> 
> 标签：.htaccess, url-rewriting, http-status-code-404, http-status-codes, http-status-code-200

我在域的根目录中有一个 .htaccess 文件和一个 index.html 文件。我在这个 .htaccess 文件中有以下代码：

```
DirectorySlash Off

RewriteEngine on
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^(.*[^/])?$ /index.html [L] 
```

我希望用户在访问目录 URL 时能看到 index.html 中的内容，无论该目录 URL 是否带有斜杠。所以我有上面的代码。

但我有一个问题。当我访问一个不存在的目录时。我得到 404。这不是我想要的。我希望用户在访问目录 URL 时总是能得到 200 并看到 index.html 中的内容。如何通过在 .htaccess 文件中编辑上述代码来解决此问题？

顺便提一句。请不要将用户重定向到 index.html 文件。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-06T01:11:46.917

创建一个自定义 404 页面并将其命名为例如“404page.php”。确保此页面在向浏览器发送任何其他内容之前发送 200 状态，方法是将其放在顶部：

```
<?php
header("Status: 200 OK");
?> 
```

然后输入`ErrorDocument 404 /404page.php`你的htaccess。

# javascript - 摩托罗拉 RAZR 和其他一些设备上的文本未填充段落标签

> ID：12291615
> 
> 赞同：1
> 
> 时间：2012-09-06T00:52:38.810
> 
> 标签：javascript, android, html, css

我正在重建一个非常旧的网站，但遇到了障碍。我让它在 PC 浏览器、iPhone、iPad 和大多数 Android 手机上看起来正常，但在 RAZR 和其他一些移动设备上，有些段落的文本只填充了左半部分。这不是一个仅限移动设备的网页，但我通过适当的 HTML 和 CSS 计算，它应该可以在这些设备上按预期工作。我不是任何方面的专家，因此感谢任何帮助、建议或意见。是我的 CSS 造成了麻烦吗？

[http://www.sportsmansresource.com/flocalxnewyork_1a.htm](http://www.sportsmansresource.com/flocalxnewyork_1a.htm)

谢谢，

布鲁斯

# objective-c - iOS 内存问题

> ID：12291620
> 
> 赞同：-1
> 
> 时间：2012-09-06T00:53:19.710
> 
> 标签：objective-c, ios, memory-management

我一直在使用以下代码，几乎没有任何问题，但今天 Xcode 开始抱怨它 BIGTIME。在我发现错误/内存泄漏确实是之前，我几乎发疯了。Xcode 说“发送到已释放实例的消息”。我评论了几行（版本），它停止了崩溃。

问题是，我在这里完全迷失了......我不应该释放那些以避免内存泄漏吗？我为这个项目瞄准 iOS 4.0，所以手动内存管理是必须的。

```
+ (NSString*)reformatRule:(NSString*) ruleStr {
    NSString *bufRule = [[[NSString alloc] init] autorelease];
    NSString *buf = [[NSString alloc] init];
    char c = 0;
    NSString *value = [[NSString alloc] init];
    for(int i=0;i<[ruleStr length];i++){
        c = [ruleStr characterAtIndex:i];
        if([self isCharacterOrDigit:[NSString stringWithFormat:@"%c",c]]){
            buf = [buf stringByAppendingString:[NSString stringWithFormat:@"%c",c]];
        }else{
            DLog(@"says:%@",buf);
            value = [buf stringByReplacingOccurrencesOfString:@" " withString:@""];
            //[buf release];
            //buf = [[NSString alloc] init];
            buf = @"";
            if (![value isEqualToString:@""]) {
                if ([value isEqualToString:CONDITION_AND] || [value isEqualToString:CONDITION_OR]) {
                    bufRule = [bufRule stringByAppendingString:[NSString stringWithFormat:@"%@",value]];
                }else{
                    bufRule = [bufRule stringByAppendingString:[NSString stringWithFormat:@"(%@)",value]];
                }
            }

            if(c!=' '){
            bufRule = [bufRule stringByAppendingString:[NSString stringWithFormat:@"%c",c]];
            }
        }
    }

    // [value release]; COMMENTED THIS LINE
    // [buf release]; AND THIS ONE TOO
    return bufRule;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T00:58:18.503

此行将保留指针转换`buf`为自动保留指针：

```
buf = [buf stringByAppendingString:[NSString stringWithFormat:@"%c",c]]; 
```

同样的`value`线向下几行。

如果您不打算使用 ARC，那么您确实需要更好地了解存储*管理*。

# c# - 不可变设计：处理构造函数的疯狂

> ID：12291621
> 
> 赞同：17
> 
> 时间：2012-09-06T00:53:26.000
> 
> 标签：c#, immutability

由于各种原因，我想开始在设计中使用更多不可变类型。目前，我正在处理一个具有这样的现有类的项目：

```
public class IssueRecord
{
    // The real class has more readable names :)
    public string Foo { get; set; }
    public string Bar { get; set; }
    public int Baz { get; set; }
    public string Prop { get; set; }
    public string Prop2 { get; set; }
    public string Prop3 { get; set; }
    public string Prop4 { get; set; }
    public string Prop5 { get; set; }
    public string Prop6 { get; set; }
    public string Prop7 { get; set; } 
    public string Prop8 { get; set; } 
    public string Prop9 { get; set; }
    public string PropA { get; set; }
} 
```

这个类代表了一些确实具有这么多属性的磁盘格式，因此在这一点上将它重构为更小的位几乎是不可能的。

这是否意味着这个类的构造函数在不可变设计中真的需要有 13 个参数？如果不是，如果我要使这个设计不可变，我可以采取哪些步骤来减少构造函数中接受的参数数量？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-06T01:17:39.130

要减少参数的数量，您可以将它们分组到合理的集合中，但是要拥有真正不可变的对象，您必须在构造函数/工厂方法中对其进行初始化。

一些变化是创建“构建器”类，您可以使用流畅的界面进行配置，而不是请求最终对象。如果您实际上计划在代码的不同位置创建许多此类对象，这将是有意义的，否则在一个位置中的许多参数可能是可接受的权衡。

```
var immutable = new MyImmutableObjectBuilder()
  .SetProp1(1)
  .SetProp2(2)
  .Build(); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-06T01:05:41.373

> Does this mean that the constructor on this class really needs to have 13 parameters in an immutable design?

In general, yes. An immutable type with 13 properties will require some means of initializing all of those values.

If they are not all used, or if some properties can be determined based on the other properties, then you can perhaps have one or more overloaded constructors with fewer parameters. However, a constructor (whether or not the type is immutable) really *should* fully initialize the data for the type in a way that the type is logically "correct" and "complete."

> This class represents some on-disk format which really does have this many properties, so refactoring it into smaller bits is pretty much out of the question at this point.

If the "on-disk format" is something that's being determined at runtime, you could potentially have a factory method or constructor which takes the initialization data (ie: the filename? etc) and builds the fully-initialized type for you.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-06T01:03:16.967

也许保持你当前的课程不变，如果可能的话提供合理的默认值并重命名为 IssueRecordOptions。将其用作不可变 IssueRecord 的单个初始化参数。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-06T01:04:55.780

您可以在构造函数中使用命名参数和可选参数的组合。如果值总是不同，那么是的，你被一个疯狂的构造函数困住了。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-06T00:58:05.570

您可以创建一个结构，但是您仍然必须声明该结构。但是总是有数组之类的。如果它们都是相同的数据类型，您可以通过多种方式对它们进行分组，例如数组、列表或字符串。看来你是对的，你所有的不可变类型都必须以某种方式通过构造函数，通过 13 个参数，或者通过结构、数组、列表等...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-06T03:04:39.127

如果您的意图是在编译期间禁止分配，那么您必须坚持构造函数分配和私有设置器。但是它有很多缺点——你不能使用新成员初始化，也不能使用 xml 反序列化等。

我会建议这样的事情：

```
 public class IssuerRecord
    {
        public string PropA { get; set; }
        public IList<IssuerRecord> Subrecords { get; set; }
    }

    public class ImmutableIssuerRecord
    {
        public ImmutableIssuerRecord(IssuerRecord record)
        {
            PropA = record.PropA;
            Subrecords = record.Subrecords.Select(r => new ImmutableIssuerRecord(r));
        }

        public string PropA { get; private set; }
        // lacks Count and this[int] but it's IReadOnlyList<T> is coming in 4.5.
        public IEnumerable<ImmutableIssuerRecord> Subrecords { get; private set; }

        // you may want to get a mutable copy again at some point.
        public IssuerRecord GetMutableCopy()
        {
            var copy = new IssuerRecord
                           {
                               PropA = PropA,
                               Subrecords = new List<IssuerRecord>(Subrecords.Select(r => r.GetMutableCopy()))
                           };
            return copy;
        }
    } 
```

此处的 IssuerRecord 更具描述性和实用性。当您将它传递到其他地方时，您可以轻松创建不可变版本。在不可变对象上工作的代码应该具有只读逻辑，因此它不应该真正关心它是否与 IssuerRecord 类型相同。我创建每个字段的副本，而不是仅仅包装对象，因为它可能仍会在其他地方更改，但它可能不是必需的，尤其是对于顺序同步调用。但是，将完整的不可变副本存储到某个集合“供以后”使用会更安全。当您希望某些代码禁止修改但仍然能够接收对对象状态的更新时，它可能是应用程序的包装器。

```
var record = new IssuerRecord { PropA = "aa" };
if(!Verify(new ImmutableIssuerRecord(record))) return false; 
```

如果您用 C++ 术语思考，您可以将 ImmutableIssuerRecords 视为“IssuerRecord const”。您必须格外小心，以保护您的不可变对象拥有的对象，这就是为什么我建议为所有孩子创建一个副本（子记录示例）。

ImmutableIssuerRecord.Subrecors 在这里是 IEnumerable 并且缺少 Count 和 this[]，但是 IReadOnlyList 将在 4.5 中出现，如果需要，您可以从文档中复制它（并且便于以后迁移）。

还有其他方法，例如 Freezable：

```
public class IssuerRecord
{
    private bool isFrozen = false;

    private string propA;
    public string PropA
    { 
        get { return propA; }
        set
        {
            if( isFrozen ) throw new NotSupportedOperationException();
            propA = value;
        }
    }

    public void Freeze() { isFrozen = true; }
} 
```

这使代码的可读性再次降低，并且不提供编译时保护。但是您可以照常创建对象，然后在它们准备好后冻结它们。

构建器模式也是需要考虑的，但从我的角度来看，它添加了太多的“服务”代码。

# sql - 通过 Django ORM 中的自定义字段聚合查询结果

> ID：12291626
> 
> 赞同：0
> 
> 时间：2012-09-06T00:54:11.847
> 
> 标签：sql, django, django-models

我们有一个简单的模型：

```
class Post(models.Model):
    created = models.DateField()     
    title = models.CharField(max_length=210) 
    content = models.TextField() 
```

有没有办法用 Django ORM 实现 SQL 查询？

```
SELECT YEAR(created), COUNT(*)
FROM Post
GROUP BY YEAR(created) 
```

我可以编写原始 SQL，但我想避免它......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T05:46:40.803

Django 提供了它自己的查询集来进行你可以做的查询

```
 Post.objects.values('created').annotate(dcount=Count('created')) 
```

不要忘记导入

```
from django.db.models import Count 
```

无论如何，您也可以检查您的查询，例如

```
>>> queryset = MyModel.objects.all()
>>> print queryset.query
SELECT "myapp_mymodel"."id", ... FROM "myapp_mymodel" 
```

# ios - 如何使用git在多台电脑之间同步iOS项目

> ID：12291627
> 
> 赞同：4
> 
> 时间：2012-09-06T00:54:17.340
> 
> 标签：ios, git, version-control, xcode4, sync

这是我的第一篇文章，我会尽量提供尽可能详细的信息。只需让我知道您需要哪些信息来帮助我使我的问题更具体。

我目前的设置如下：

*   BitBucket 上的远程 git 存储库 ( [https://bitbucket.org/](https://bitbucket.org/) )
*   我的笔记本电脑上的项目源代码

我为我的项目设置了 git，可以在本地提交，也可以将更改推送到远程仓库。我可以将我的项目的副本克隆到我的笔记本电脑的同一文件夹中，它工作正常。

我遇到的问题是我现在有一台 iMac，我想用于开发，当我从 BitBucket 克隆我的项目时，我可以访问我的所有源代码，但无法访问第三方库（在这个案例三20）。

我试图重新链接桌面上的库，但无法正确链接和构建。

在我的两台计算机之间同步我的项目源代码并且仍然能够在每台计算机上使用外部库的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T01:24:22.667

查看 progit.org/book 的第 6 章第 6 节。如果您将 3rd 方库作为子模块包含在内，则在保留您正在使用的每个库的版本的同时，您不会膨胀您的存储库。

# javascript - 动态添加内容后如何计算div的高度？

> ID：12291628
> 
> 赞同：0
> 
> 时间：2012-09-06T00:54:32.750
> 
> 标签：javascript, jquery

我有一个包含动态内容（图像和文本）的 div。然后我需要计算 div 的高度并对它做一些事情。

但是，它当前在添加内容之前计算 div 的高度。

有人对此有解决方案吗？

```
$('#results').find('article').addClass(result); // add class to entire section
$('#results article').find('.details h1 span').html(title); // add title
$('#results article').find('.details p').html(message); // add message

var windowHeight = $('#results').find('article').innerHeight(); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-06T01:04:51.030

您的内容中可能包含图像。您必须等待它们加载：

```
var $results = $('#results'),
    $article = $results.find('article'),
    deferreds = [];

$article.addClass(result); // add class to entire section
$article.find('.details h1 span').html(title); // add title
$article.find('.details p').html(message); // add message

$results.find('img').each(function()
{
    var deferred = $.Deferred();

    deferreds.push(deferred);

    this.onload = function() { deferred.resolve(); }
});

$.when.apply($, deferreds).then(function()
{
    var windowHeight = $article.innerHeight();
}); 
```

此方法使用 jQuery 的[Deferreds](http://api.jquery.com/category/deferred-object/)`load` ，这使得跟踪所有事件变得非常容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T01:13:23.270

如果这不是尚未加载的图像的问题，那么您可能只需要自己触发布局，以便获得所需的尺寸。

在您的脚本完成之前，浏览器通常不会布局新内容（并且可以确定您已经完成了对 DOM 的更改）。您可以通过向 DOM 询问浏览器知道需要布局的相关维度来触发脚本中的布局。

有关将触发布局的那些属性的列表，请参阅这篇文章[http://gent.ilcore.com/2011/03/how-not-to-trigger-layout-in-webkit.html 。](http://gent.ilcore.com/2011/03/how-not-to-trigger-layout-in-webkit.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T08:42:53.973

您可以使用以下代码在所有动态数据加载后触发代码查找高度

```
$(window).load(function(){

   var divHeight = $('#yourDivId').height()
} 
```

希望它会有所帮助

# python - PyQt 4 - 如何在特定的模块化生成的小部件之间建立信号

> ID：12291630
> 
> 赞同：0
> 
> 时间：2012-09-06T00:54:43.530
> 
> 标签：python, pyqt4

所以我有 2 个 QCheckBoxes 列表，它们驱动彼此的状态变化。每个列表驻留在一个选项卡中，该选项卡属于一组选项卡，属于一个主选项卡。当我生成复选框时，我一次生成一个选项卡，每个选项卡都有一个唯一的名称。我想知道我是否可以选中列表 1 中的特定复选框并在列表 2 中更改特定复选框的状态？

前任。结构

```
mainTab1 > tab 1 > list 1 checkBox 1-9
         > tab 2 > list 1 checkBox 1-4
         > tab 3 > list 1 checkBox 1-6

mainTab2 > tab 1 > list 2 checkBox 1-3
         > tab 2 > list 2 checkBox 1-11
         > tab 3 > list 2 checkBox 1-8 
```

使用这种结构，如果我检查 mainTab1>tab2>list1checkBox3，我希望 mainTab2>tab1>list2checkBox1 检查该更改，我应该如何连接我的信号？

这是实际生成选项卡和复选框的代码

```
 global clusterNames
    global parseByPass
    totalPasses = parseByPass.keys()
    totalPasses.sort()
    cNames = reversed(clusterNames)
    assetCBList, assetNameList, assetPassList, assetROList = [],[],[],[]
    passCBList, passNameList, passPassList, passROList = [],[],[],[]        

    #Create the main window
    self.setFixedSize(900,600)
    self.setWindowTitle("Que Dispatcher")

    #Create all the layouts to be used by main window
    self.windowLayout = QtGui.QVBoxLayout()
    self.buttonShelf = QtGui.QHBoxLayout()

    #Create the tab widget
    self.tabGroupMain = QtGui.QTabWidget(self)
    self.tabGroupMain.setObjectName("tabGroupMain")
    self.tabGroupMain.setGeometry(QtCore.QRect(10,10,875,530))
    self.tabGroupSub = QtGui.QTabWidget(self)
    self.tabGroupSub.setObjectName("tabGroupSub")
    self.tabGroupSub.setGeometry(QtCore.QRect(10,10,865,520))
    self.tabGroupSub.setStyleSheet("border: 0px")
    self.tabGroupSub2 = QtGui.QTabWidget(self)
    self.tabGroupSub2.setObjectName("tabGroupSub2")
    self.tabGroupSub2.setGeometry(QtCore.QRect(10,10,865,520))
    self.tabGroupSub2.setStyleSheet("border: 0px")

    #Create all the tabs and add them to the tab widget
    #Asset tab      
    for index, item in enumerate(cNames):
        currentTab = item + "Tab"
        self.currentTab = QtGui.QWidget()
        self.currentTab.setObjectName(currentTab)

        #Create the top line, all control widgets
        self.tabV = QtGui.QVBoxLayout()
        self.tabScroll = QtGui.QScrollArea()
        self.tabLayout = QtGui.QGridLayout()
        self.tabLayout.setColumnMinimumWidth(1,175)
        self.tabLayout.setColumnMinimumWidth(2,125)
        self.tabLayout.setRowMinimumHeight(1,15)
        self.allCB = QtGui.QCheckBox()
        self.allCB.setObjectName("%sAllCB" % item)
        self.allNameLabel = QtGui.QLabel("Cluster Name")
        self.allNameLabel.setObjectName("%sAllNameLable" % item)
        self.allPassLabel = QtGui.QLabel("Pass Type")
        self.allPassLabel.setObjectName("%sAllPassLabel" % item)
        self.allRenderOpt = QtGui.QLineEdit("Render Options: Insert Commands")
        self.allRenderOpt.setObjectName("%sAllRenderOpt" % item)

        #Create modullar widgets based on parsed info
        for index, stat in enumerate(QParsed[item][1]):
            statedRO = ""
            assetCB = item  + stat + "CheckBox"
            assetNameLabel = item + stat + "NameLabel"
            assetPassLabel = item + stat + "PassLabel"
            assetRO = item + stat + "ROTF"
            for text in QParsed[item][2][index]:
                statedRO = statedRO + text + " "

            #Add modularly generated widgets with parsed info
            self.assetCB = QtGui.QCheckBox()
            self.assetCB.setObjectName(assetCB)
            self.assetNameLabel = QtGui.QLabel(item)
            self.assetNameLabel.setObjectName(assetNameLabel)
            self.assetPassLabel = QtGui.QLabel(stat)
            self.assetPassLabel.setObjectName(assetPassLabel)
            self.assetRenderOpt = QtGui.QLineEdit(statedRO)
            self.assetRenderOpt.setObjectName(assetRO)

            #Add the all control widgets to a horizontal layout
            self.tabLayout.addWidget(self.allCB,0,0)
            self.tabLayout.addWidget(self.allNameLabel,0,1)
            self.tabLayout.addWidget(self.allPassLabel,0,2)
            self.tabLayout.addWidget(self.allRenderOpt,0,3)

            #Add all modullar widgets
            self.tabLayout.addWidget(self.assetCB, (index+2), 0, QtCore.Qt.AlignTop)
            self.tabLayout.addWidget(self.assetNameLabel, (index +2), 1, QtCore.Qt.AlignTop)
            self.tabLayout.addWidget(self.assetPassLabel, (index +2), 2, QtCore.Qt.AlignTop)    
            self.tabLayout.addWidget(self.assetRenderOpt, (index +2), 3, QtCore.Qt.AlignTop)

        #Add layout to page of current tab widget
        self.tabV.addLayout(self.tabLayout)
        self.tabScroll.setLayout(self.tabV)
        self.tabScroll.setMinimumHeight(850)
        self.tabV.addStretch()
        self.tabGroupSub.addTab(self.tabScroll, item) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T02:56:23.660

同步两个复选框非常简单。您将`stateChanged`信号从一个连接到另一个`setCheckState`方法，反之亦然：

```
 checkbox1.stateChanged.connect(checkbox2.setCheckState)
 checkbox2.stateChanged.connect(checkbox1.setCheckState) 
```

现在您需要做的就是将您的复选框组织在一个合适的容器中，然后根据您的需要连接信号。由于您有唯一`objectName`的 s，a `dict`with `objectName`for key 和相应的`QCheckBox`实例作为 value 似乎足够好。然后，您可以获得同步对列表。循环它们并连接信号。

如果我正确理解您的代码，它应该是这样的（剪掉不相关的位以强调逻辑）：

```
# some code snipped here
# ...
self.checkBoxes = {}
# this is just an example
# your real syncPairs should include real names and full list of pairs of course
self.syncPairs = [('list2checkBox1', 'list1checkBox3')] 

for index, item in enumerate(cNames):
    # more code snipped here

    self.allCB = QtGui.QCheckBox()   # I'm not sure about 'self.' part
                                        # You are discarding the old one in the next iteration
                                        # So this will just store the last one in the iteration
                                        # Besides we are going to keep references to all in `self.checkBoxes`
    self.allCB.setObjectName("%sAllCB" % item)

    # here add it to the dict
    self.checkBoxes["%sAllCB" % item] = self.allCB

    # code snipped here

    # btw, you should add these ones to the layout _here_, not in the inner loop. So:
    self.tabLayout.addWidget(self.allCB,0,0)
    self.tabLayout.addWidget(self.allNameLabel,0,1)
    self.tabLayout.addWidget(self.allPassLabel,0,2)
    self.tabLayout.addWidget(self.allRenderOpt,0,3)

    #Create modullar widgets based on parsed info
    for index, stat in enumerate(QParsed[item][1]):
        # code snipped here

        #Add modularly generated widgets with parsed info
        self.assetCB = QtGui.QCheckBox()      # Again, same issue with 'self.'
        self.assetCB.setObjectName(assetCB)

        # add it to the dict
        self.checkBoxes[assetCB] = self.assetCB

        # rest of the code snipped

# after the setup done, we can connect the signals that will keep sync status:
for cb1, cb2 in self.syncPairs:
     self.checkBoxes[cb1].stateChanged.connect(self.checkBoxes[cb2].setCheckState)
     self.checkBoxes[cb2].stateChanged.connect(self.checkBoxes[cb1].setCheckState) 
```

**编辑**

两个同步复选框的简单演示：

```
import sys
from PyQt4 import QtGui

class Dialog(QtGui.QDialog):
    def __init__(self, parent=None):
        super(Dialog, self).__init__(parent)

        layout = QtGui.QVBoxLayout()
        self.setLayout(layout)

        self.cb1 = QtGui.QCheckBox('checkbox 1')
        self.cb2 = QtGui.QCheckBox('checkbox 2')

        #self.cb1.stateChanged.connect(self.cb2.setCheckState)
        #self.cb2.stateChanged.connect(self.cb1.setCheckState)

        # alternatively
        self.cb1.toggled.connect(self.cb2.setChecked)
        self.cb2.toggled.connect(self.cb1.setChecked)

        layout.addWidget(self.cb1)
        layout.addWidget(self.cb2)

        self.setWindowTitle('Synced checkboxes')

if __name__ == '__main__':
    app = QtGui.QApplication(sys.argv)

    main = Dialog()
    main.show()

    sys.exit(app.exec_()) 
```

# ruby-on-rails - 来自 ActiveRecord 限制的 Rails 输入文本最大长度

> ID：12291632
> 
> 赞同：1
> 
> 时间：2012-09-06T00:55:11.367
> 
> 标签：ruby-on-rails, activerecord, form-helpers

在我们的 Rails 应用程序中，我们希望防止用户在文本字段中实际输入的字符多于相应数据库字段中可记录的字符数。这似乎比让他/她打字太多然后被告知事后再试一次要友好得多。

换句话说，所有 View 输入文本字段都应具有与相应 ActiveRecord 模型字段`maxlength=`相同的属性集。`:limit``varchar()`

有没有办法让这种情况自动发生？

如果没有，是否有 DRY 习语、辅助函数或元编程技巧可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-07T18:46:50.730

## Rails 4 解决方案

以下是经过测试和工作的：

```
# config/initializers/text_field_extensions.rb
module ActionView
  module Helpers
    module Tags
      class TextField

        alias_method :render_old, :render

        def render
          prototype = @object.class
          unless prototype == NilClass
            maxlength = nil
            validator = prototype.validators.detect do |v|
              v.instance_of?(ActiveModel::Validations::LengthValidator) &&
              v.attributes.include?(@method_name.to_sym) &&
              v.options.include?(:maximum)
            end
            if !validator.nil?
              maxlength = validator.options[:maximum]
            else
              column = prototype.columns.detect do |c|
                c.name == @method_name &&
                c.respond_to?(:limit)
              end
              maxlength = column.limit unless column.nil?
            end
            @options.reverse_merge!(maxlength: maxlength) unless maxlength.nil?
          end
          render_old
        end

      end
    end
  end
end 
```

该解决方案借鉴了[Deefour 的答案](https://stackoverflow.com/a/12292026/2038227)，但将补丁应用于 ActionView 的`TextField`类。所有其他基于文本的输入类型（`password_field`、`email_field`、`search_field`等）都使用从 继承的标签`TextField`，这意味着此修复也将适用于它们。唯一的例外是该`text_area`方法，它使用不同的标记，除非此补丁单独应用于`ActionView::Helpers::Tags::TextArea`.

Deefour 的解决方案查看 ActiveRecord 数据库列来确定最大长度。虽然这完美地回答了 Gene 的问题，但我发现数据库列的限制通常与我们实际想要的字段限制无关（即高于）。最理想的最大长度通常来自`LengthValidator`我们在模型上设置的。因此，首先，此补丁`LengthValidator`在模型上查找 (a) 应用于该字段的属性，并且 (b) 提供最大长度。如果它没有从中得到任何东西，它将使用数据库列上指定的限制。

最后，就像 Deefour 的回答一样，使用 of`@options.reverse_merge!`意味着可以通过在参数中`maxlength`指定 a 来覆盖该字段的属性：`:maxlength``options`

```
<%= form_for @user do |f| %>
  <%= f.text_field :first_name, :maxlength => 25 %>
<% end %> 
```

设置`:maxlength`为`nil`将完全删除该属性。

最后，请记住，提供`maxlength`a 选项`TextField`会自动将`size`输入元素的属性设置为相同的值。就个人而言，我认为该`size`属性已经过时并且被 CSS 淘汰了，所以我选择删除它。为此，请将涉及`@options.reverse_merge!`以下内容的行替换为：

```
@options.reverse_merge!(maxlength: maxlength, size: nil) unless maxlength.nil? 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T02:02:54.803

类似以下*（未经测试）*的猴子补丁可能会有所帮助

```
module ActionView
  module Helpers

    old_text_field = instance_method(:text_field)                                                           # store a reference to the original text_field method

    define_method(:text_field) do |object_name, method, options = {}|                                       # completely redefine the text_field method
      klass     = InstanceTag.new(object_name, method, self, options.delete(:object)).retrieve_object.class # get the class for the object bound to the field
      column    = klass.columns.reject { |c| c.name != method.to_s }.first if klass.present?                # get the column from the class
      maxlength = column.limit if defined?(column) && column.respond_to?(:limit)                            # set the maxlength to the limit for the column if it exists

      options.reverse_merge!( maxlength: maxlength ) if defined?(maxlength)                                 # merge the maxlength option in with the rest

      old_text_field.bind(self).(object_name, method, options)                                              # pass it up to the original text_field method
    end
  end
end 
```

# svn - 使用 SVN "authz" 和 svnserve 进行访问控制

> ID：12291638
> 
> 赞同：2
> 
> 时间：2012-09-06T00:55:40.660
> 
> 标签：svn, tortoisesvn, svnserve, authz

我有一个在 Windows 上运行的 SVN 服务器

我为这样的项目创建了一个 repo：

E:\SVN\WEB\MYWEB-WWW

我在“passwd”文件中添加了用户：

```
[users]
admin      = qazwsx 
developer1 = 123456
developer2 = qwerty 
```

然后我编辑“authz”文件：

```
[groups]
Admins = admin
Developers = developer1, developer2

[/]
@Admins = rw
@Developers = r
* = 
```

我的“svnserve.conf”文件如下所示：

```
anon-access = none
auth-access = write
auth-access = read

password-db = passwd

authz-db = authz 
```

我检查了存储库，并使用管理员用户登录，一切都很好，但是当我尝试使用管理员用户进行提交时，它无法显示此消息“身份验证失败”

我也尝试过不使用“admin”用户的组，但同样的错误

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T02:45:59.310

我的直觉是你的 svnserver.conf 文件有多余的`auth-access = read`行，这给你带来了问题。

通常，如果您设置`auth-access = write`，它也意味着读取。您不会两次列出该行以获得读取和写入访问权限。

可以这样想：给予什么`svnserve.conf`，`authz`文件拿走。换句话说，您通过`auth-access = write`. 然后，您可以通过`authz`文件限制该访问。但是，如果您一开始不授予权限`svnserve.conf`，则无法授予该权限`authz`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-30T04:46:32.203

此外，“auth-access”不是默认权限，而是经过身份验证的用户拥有的最高权限。

# python - Python PIL ValueError：图像不匹配

> ID：12291641
> 
> 赞同：25
> 
> 时间：2012-09-06T00:56:02.550
> 
> 标签：python, python-imaging-library

我正在玩 PIL 并遇到了这个问题，我看不出我在文档中哪里出错了。这是我的简单代码

```
from PIL import Image
from PIL.ImageChops import difference

imageA = Image.open("image1.png")
imageB = Image.open("image2.png")

if imageA.size == imageB.size:
    diff = difference(imageA, imageB)
    diff.save("test.png") 
```

这给了我错误

```
Traceback (most recent call last):
  File "C:\[XXX]\box-test.py", line 8, in <module>
    diff = difference(imageA, imageB)
  File "C:\Python32\lib\site-packages\PIL\ImageChops.py", line 123, in difference
    return image1._new(image1.im.chop_difference(image2.im))
ValueError: images do not match 
```

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-01-25T16:59:13.520

事实上，这个函数的文档并没有说明太多。所以让我试着澄清一下。首先，图像的大小与函数是否工作无关，它在内部检查两个图像都适合的大小。

现在，您何时可以使用该函数实际比较图像`ImageChops.difference`？

首先，两个图像都必须具有可以存储在无符号字节中的像素。这是一种非常常见的图像类型，但这不包括图像之间的比较，即使它们是相同的模式。因此，您无法比较图像`x`，并且`y`当其中一个或/两个/具有以下模式时：`F`, `I`, `I;16`, `I;16L`, `I;16B`, `BGR;15`, `BGR;16`, `BGR;24`, 或`BGR;32`。只是为了明确一点：如果两个图像恰好处于上述模式之一，则它们是否处于相同模式并不重要，该功能将拒绝工作。

因此，可以在图像处于 , , , , , , , , , 模式时进行比较`1`，`P`或者`L`只要`LA`它们`RGB`具有`RGBA`相同`RGBX`数量`RGBa`的`CMYK`波段`YCbCr`。这意味着图像不必具有相同的模式来进行比较。例如，`difference(x.convert('CMYK'), x.convert('RGBA'))`或者`difference(x.convert('1'), x.convert('P'))`工作得很好。当然，这意味着`difference(x.convert('LA'), x.convert('L'))`，失败。最后，生成的图像将始终具有与传递给函数的第一张图像相同的模式。

这至少对 PIL 1.1.7 有效。

# javascript - 正文中的节点 HTML

> ID：12291642
> 
> 赞同：2
> 
> 时间：2012-09-06T00:56:04.137
> 
> 标签：javascript, html, http, node.js

我编写了一个简单的 HTTP 服务器来提供一些 HTML。这是代码：

```
var http = require('http');

http.createServer(function(req, res) {

  res.writeHeader(200, {"Content-Type": "text/html"});

  var html = '<DOCTYPE!>' +
    '  <html>' +
    '    <head>' +

    '      <title>' +
    '        Test page' +
    '      </title>' +

    '    </head>' +
    '  <body>' +

    '    <p>' +

    '      This is a test page !' +

    '    </p>' +

    '  </body>' +
    '  </html>';

  res.write(html);

  res.end();

}).listen(8080); 
```

生成的 HTML 页面如下：

```
<html>
<head>
</head>
<body>
<doctype!>
<title> Test page </title>
<p> This is a test page ! </p>
</doctype!>
</body>
</html> 
```

所以我的问题如下：

*   为什么 html “字符串” 包含在 HTML 的正文中？
*   除了使用模板引擎（jade）之外，是否可以在 HTML 中进行缩进？

最后一个问题有点不同：

*   如果我有一个名为`index.html`仅显示`img.jpg`. 我怎么知道用户请求与`img.jpg`相关`index.html`？我所说的“相关”是指：“这`img.jpg`是一个链接/依赖`index.html`”。

先感谢您 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T01:01:35.197

> 为什么 html “字符串” 包含在 HTML 的正文中？

那是因为`<DOCTYPE!>`无效。它应该是：

```
<!DOCTYPE html> 
```

就目前而言，它看起来更像是浏览器的一个元素，它试图规范化标记并将其放入`<body>`.

* * *

> 除了使用模板引擎（jade）之外，是否可以在 HTML 中进行缩进？

许多模板引擎，包括 Jade，实际上都会[缩小](http://en.wikipedia.org/wiki/Minification_%28programming%29)标记，删除所有不必要的空白以减少带宽消耗。

但是，您可以考虑使用“美化器”，例如[html](https://npmjs.org/package/html)。

* * *

> 如果我有一个名为 index.html 的页面，它只显示 img.jpg。我怎么知道用户对 img.jpg 的请求与 index.html 相关？我所说的“相关”是指：“img.jpg 是 index.html 的链接/依赖项”。

您可以在大多数浏览器内调试器中查看“资源”，其中将列出您的页面请求的图像、脚本、样式表等。

您也可以尝试使用[jsdom](https://npmjs.org/package/jsdom)[抓取](http://en.wikipedia.org/wiki/Web_scraping)您的应用程序：

```
jsdom.env('http://localhost:8080/', [
    'http://code.jquery.com/jquery.min.js'
],
function (err, window) {
    var $ = window.$;

    var hrefs = $('a[href]').map(function () {
        return $(this).attr('href');
    }).get();
    console.log(hrefs);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T01:01:44.407

这实际上不是生成的 HTML。您的服务器提供的 HTML 正是您认为它提供的内容……浏览器发现该 HTML 有问题。

`<DOCTYPE!>`

浏览器不知道是什么`<DOCTYPE!>`，所以它假定它是某种任意标签。当浏览器看到任意标签时，它会假定它应该在正文中。并且通过不平衡标签纠错，它会在正文的末尾关闭您的`<DOCTYPE!>`标签。`</DOCTYPE!>`

您打算使用的是`<!DOCTYPE>`或更可能是`<!DOCTYPE html>`.

# jquery - 遍历每个 h2 并将它们的值按顺序附加到另一组 div

> ID：12291649
> 
> 赞同：1
> 
> 时间：2012-09-06T00:57:16.993
> 
> 标签：jquery

我有个问题。

我将如何遍历其 div 中的每个 h2，获取其文本值并将其附加到另一组 div 中，以便它们出现在另一侧？

我可以使用 eq 或其他东西并遍历每一个，但这并不理想，因为任何给定时间的 div 数量可能或多或少，我只需要返回并调整 js 以调整数量分区。

在这个例子中我还没有完成任何 js，只是因为我不确定如何处理这个问题。

任何帮助表示赞赏。

[小提琴示例](http://jsfiddle.net/u2VY5/)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T01:05:38.120

我认为 using`.eq`是您唯一的选择，但它不会使您的代码不灵活：

```
var $divs = $('.wrap-two div.item');

$('.wrap h2').each(function(index) {
    $divs.eq(index).text($(this).text());
});

// or alternatively:

var $h2s = $('.wrap h2');

$('.wrap-two div.item').text(function(index) {
    return $h2s.eq(index).text();
}); 
```

[**演示**](http://jsfiddle.net/u2VY5/1/)

额外`div`的 s 将被留空，太少`div`的 s 也不是问题。`.eq`将始终返回一个 jQuery 对象，即使具有该索引的元素不存在。然后，对的调用`.text`将被默默地忽略。

或者你想总是有尽可能多`div`的`h2`s 吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T01:07:43.867

您也可以`clone()`从第一个列表到第二个，因为它们共享同一个`.item`类：

```
$('.wrap .item').clone().appendTo('.wrap-two');​ 
```

[http://jsfiddle.net/charlescarver/u2VY5/2/](http://jsfiddle.net/charlescarver/u2VY5/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T01:56:23.330

检查这个小提琴.. [http://jsfiddle.net/u2VY5/3/](http://jsfiddle.net/u2VY5/3/)

```
$(function(){
    $('#btn1').on('click' , function(){
        var data = $('.wrap div h2');
        var target = $('.wrap-two div');

        $.each(data, function(i){
           $(target[i]).append('h2').text($(this).text());
        });

    });
});​ 
```

# ruby - 使用与sideqik相同的redis连接的最佳方法是什么？

> ID：12291651
> 
> 赞同：1
> 
> 时间：2012-09-06T00:58:14.620
> 
> 标签：ruby, sidekiq

我希望能够使用和连接到与为 sidekiq 定义的实例相同的 redis 实例。

在resque中，它由以下方式检索`Resque.redis`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T01:09:14.350

Sidekiq 取一个块，等价的方法是：

`Sidekiq.redis { |x| x.redis }`

# php - Netflix 风格的工具提示，带有 AJAX、Jquery、PHP 和 MySQL

> ID：12291654
> 
> 赞同：3
> 
> 时间：2012-09-06T00:58:27.120
> 
> 标签：php, jquery, ajax, tooltip, netflix

我有一个大型 PHP/MySQL 驱动的网站，我想向其中添加 Netflix 风格的工具提示。

我想做的是：

1.  用户点击链接
2.  使用 AJAX 传递给外部文件的变量
3.  外部文件使用变量查询 MySQL 数据库
4.  查询结果出现在工具提示中

一个皱纹是页面有多种类型的链接。有些人会选择一张桌子，有些人会选择其他桌子。

有谁知道我可以用来学习如何创建它的在线教程？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-11T09:39:30.707

好的，你自己已经清楚地规划了你的步骤，我已经根据你的观点写了一篇博[文](http://www.jacobtomlinson.co.uk/2012/09/11/ajax-database-tooltip/)。以下是该帖子的内容，稍加补充以使其更具体地适用于您的“Netflix”工具提示。

## 用户点击链接

因此，您需要的第一件事是一些前端代码，它告诉链接发出 ajax 请求而不是实际链接。我建议您使用 jQuery 为您完成繁重的工作，因此您首先需要在您的页面中包含 jQuery 脚本（如果您还没有的话），为此将这一行添加到您的 HTML 文件的头部。

```
<script src="http://code.jquery.com/jquery-latest.min.js"></script> 
```

接下来你需要给链接一个类，例如你的链接可能看起来像

```
<a href="ajax.php?var=value" class="ajax_link">Link</a> 
```

您将看到链接将指向将提供数据的 ajax 页面，您正在通过 GET 将一个名为 var 的页面传递给该页面，我们稍后将介绍该变量，并且您还将类设置为“ajax_link”我们将使用它来引用来自 jQuery 的链接。

现在您需要编写一些 jQuery 来处理链接。为此，您需要`<script language="javascript">`在正文末尾打开一个标签，并按照以下行添加一些代码：

```
$(".ajax_link").click(function(e) {

    e.preventDefault(); //Stops link from changing the page

    var link = $(this).attr('href'); //Gets link url

    $.ajax({ //Make the ajax request
      url: link,
      cache: false
    }).done(function( html ) { //On complete run tooltip code

        //Display tooltip code goes here, returned text is variable html

    });
}); 
```

稍后我将回到工具提示代码。

## 使用 AJAX 传递给外部文件的变量

现在我们将需要创建 PHP 文件 ajax.php，该文件将需要连接到数据库并进行任何必要的查询。首先，我将启动文件并从 GET 中获取变量。请参阅下面的代码。

```
<?php

$var = $_GET['var']; 
```

这将创建变量 $var 并将包含在上述 HTML 链接中设置的值“值”。您可能想要逃避该值，进行一些验证以保护自己免受注入，但我不会在这里介绍。

## 外部文件使用变量查询 MySQL 数据库

接下来，您将要连接并查询数据库，然后回显您返回的内容。这是一些代码，用于从名为“data_table”的表中返回“信息”列的值，其中某个值等于您的 $var。

```
//connection to the database
$dbhandle = mysql_connect($hostname, $username, $password) 
  or die("Unable to connect to MySQL");

//select a database to work with
$selected = mysql_select_db("examples",$dbhandle) 
  or die("Could not select examples");

//execute the SQL query and return records
$result = mysql_query("SELECT information FROM data_table WHERE value='$var'");
//fetch tha data from the database
while ($row = mysql_fetch_array($result)) {
   echo $row{'information'};
}

//close the connection
mysql_close($dbhandle); 
```

有关查询数据库的更多信息，请参阅[本教程](http://webcheatsheet.com/php/connect_mysql_database.php)。

由于您将以 Netflix 的样式显示工具提示，因此我假设您将有许多不同的数据希望包含在工具提示中。希望您能够调整上面的代码并根据传递的“var”提取所有必需的信息。您当然可以传递多个 var，例如`ajax.php?var1=value1&var2=value2`。然后在 PHP`$var1 = $_GET['var1']; $var2 = $_GET['var2'];`等中检索它。

然后，您需要格式化将在此 PHP 页面的工具提示中显示的 HTML，以便 AJAX 请求返回将显示在您的工具提示中的有效 HTML，但我在这里不再赘述。

## 查询结果出现在工具提示中

一旦你设置了这两个页面，第一个页面将向 ajax 页面发送一些值，ajax 页面将从数据库中回显相应的信息，该信息将由 JavaScript 变量中的第一个页面接收`html`。

现在的最后阶段是将返回的文本显示为工具提示。首先，测试您的页面是否正常工作可能是一个好主意，一种简单的方法是显示带有返回信息的警报（您也可以登录到控制台）。您可以通过向 ajax .done 函数添加一些代码来做到这一点，如下所示：

```
.done(function( html ) { 

    alert("text: " + html);

}); 
```

完成此操作后，您应该能够打开页面，单击链接，您应该会看到一个警告框弹出显示所需的文本。如果警报中的“文本：”之后没有任何内容，则说明出现问题，您可能需要检查代码是否正确。如果成功，则继续显示工具提示。

有许多可用的 jQuery 工具提示插件，其中之一称为[qTip](http://craigsworks.com/projects/qtip2/)。这将允许您创建工具提示并在单击它们时显示它们。您需要下载工具提示的 JavaScript 文件和相关 CSS，然后将一些代码添加到 .done 函数中以创建和显示工具提示。

要将 qTip 添加到您的页面位置，请访问 qTip 站点并下载最新版本的 js 和 css。然后你必须像这样引用头部的文件：

```
<link type="text/css" rel="stylesheet" href="jquery.qtip.min.css" /> 
```

和这样的js：

```
<script type="text/javascript" src="jquery.qtip.min.js"></script> 
```

这假设 css 和 js 文件与您的索引页面位于同一文件夹中，如果它们不是，请修改这些链接以指向您放置这些文件的位置。

现在，您需要添加到 .done 函数中的内容如下：

```
$(this).qtip({
    content: {
        text: html
    }
});
$(this).qtip('toggle', true); 
```

此代码将创建一个 qTip，其中包含从您的 AJAX 请求返回的任何内容。当您使用类似于 Netflix 工具提示的工具提示时，您的页面应该返回一些 HTML，这些 HTML 将在工具提示中呈现。然后，一旦创建了工具提示，它将切换它以在单击后最初显示工具提示。然后，当您悬停开/关时，工具提示将显示/隐藏。

有关设置 qTip 样式的更多信息，请参阅他们的网站。

# flash - Flash：优化文件大小？

> ID：12291661
> 
> 赞同：1
> 
> 时间：2012-09-06T01:00:07.257
> 
> 标签：flash, filesize

只是想咨询一下FLA文件文件大小的优化。。目前我有一个600kb的.FLA文件，现阶段我的程序的音乐文件是3.2mb。但是，当我将音乐导入库时，我最终得到的文件大小为 22mb。

我想这不可能是对的。我知道您可以只从外部加载声音文件，但为了方便起见，我希望将所有数据都放在一个 FLA 中，因为我将把我的程序移植到 iPhone，因此小文件大小是理想的。

因此，我只是想问一下优化文件大小？我读到了“保存到压缩”，但是，我使用的是 Flash CS5，所以这样的选项不可用。

我想我只是不明白 3MB .mp3 如何为我的 FLA 文件贡献 21.x 兆字节？

有没有人有减少这个疯狂文件大小的提示？

谢谢！哈利。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T12:47:58.770

1.  与其拥有多个场景，不如拥有一个场景。
2.  练习在需要/不需要时添加/删除影片剪辑，而不是始终在舞台上放置影片剪辑
3.  舞台中不要有大量的movieclip，因为每个movieclip 只占用**4 字节**的内存
4.  **如果您有更多的小动画剪辑来装饰您的动画剪辑的过滤器按钮，请用图像替换它们。（仅供参考，您可以从闪存中导出图像）**
5.  如果可能的话尝试使用**FLASH CS6**，因为它利用 sprite sheet 概念来制作动画，它可以减少相当多的文件大小并简化动画。
6.  如果可能，请尝试从服务器加载声音文件以减小大小。这可能需要几秒钟/几分钟，并且可以忍受
7.  清理库以通过库删除未使用或不需要的图形或影片剪辑 -> 单击最右侧 -> 从该弹出窗口中选择未使用的项目
8.  选择未使用的项目并将其从库中删除。

希望这会减少相当大的尺寸。

# python - 使用 genfromtxt 拆分数据

> ID：12291665
> 
> 赞同：2
> 
> 时间：2012-09-06T01:00:46.013
> 
> 标签：python, numpy, genfromtxt

使用 Python，我正在使用`genfromtxt`（来自 numpy）将文本文件读入数组：

```
y = np.genfromtxt("1400list.txt", dtype=[('mystring','S20'),('myfloat','float')]) 
```

哪个工作正常，除了它似乎没有将我的 2 列读入 2D 数组。我正进入（状态：

`[('string001', 123.0),('string002', 456.0),('string002', 789.0)]`

但我*想*会：

`[['string001', 123.0],['string002', 456.0],['string002', 789.0]]`

我基本上希望每条信息都作为一个单独的元素，然后我可以对其进行操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T16:57:17.340

`genfromtxt`返回的称为结构化*数组*。它给出了一个**tuples 的一维数组**，每个 tuple 都有`dtype`你指定的。

一旦你学会了如何使用它们，它们实际上非常有用。你不能有一个带有浮点数和字符串的二维数组，但是有一个结构化数组，你可以！

例如：

```
import numpy as np
from StringIO import StringIO
s = """string001 123
       string002 456
       string002 789"""
f = StringIO(s)
y = np.genfromtxt(f, dtype=[('mystring', 'S20'), ('myfloat', float)]) 
```

这是你到目前为止所拥有的。现在您可以通过`y`以下方式访问。您可以使用*字段名称*将列作为一维数组获取：

```
>>> y['mystring']
array(['string001', 'string002', 'string002'], 
  dtype='|S20')

>>> y['myfloat']
array([ 123.,  456.,  789.]) 
```

请注意，由于参数而`y['myfloat']`给出s ，即使在文件中它们是s。`float``dtype``int`

或者，您可以使用一个整数来获得一行作为 a`tuple`给定的`dtype`：

```
>>> y[1]
('string002', 456.0) 
```

如果您正在对这样的数据结构进行大量操作，您可能需要研究[pandas](http://pandas.pydata.org/)

# delphi - 安全地存储应用程序帐户数据

> ID：12291667
> 
> 赞同：2
> 
> 时间：2012-09-06T01:01:13.330
> 
> 标签：delphi, aes

我将我的应用程序的帐户数据存储在“应用程序数据”本地目录中。我很想了解保护此文件的正确（或正确）方法。

就目前而言，它是一个简单的文本文件。我可以简单地使用 AES 256 位加密压缩它吗？这足够安全吗？当然，那么在我的程序中我需要存储密钥，那么这有风险吗？

最好的方法是什么？

干杯，阿德里安

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T06:55:21.367

您可能需要考虑[DPAPI](http://en.wikipedia.org/wiki/Data_Protection_API)（数据保护 API）。[这个 SO 答案](https://stackoverflow.com/a/166451/29290)解释了一些您可以使用它的场景（用户数据、程序数据）。

不要去发明你自己的加密算法，好好考虑一下你的加密密钥的存储：这通常是整个安全链中最薄弱的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T07:45:56.470

您可以在写入文件之前加密敏感数据（或整个流/字符串）。或者，您可以将整个数据流压缩/解压缩到内存中，然后将其写入/读取文件。在这种情况下，您只会使用更少的磁盘空间。

压缩文件不是一个好的解决方案。它假定您在写入/读取配置文件数据时将有一段时间未加密文件。这可能是一个很大的安全漏洞。

# node.js - HDEL，HSET 在 NodeJS 中不起作用

> ID：12291673
> 
> 赞同：6
> 
> 时间：2012-09-06T01:02:35.093
> 
> 标签：node.js, hash, redis

谁能告诉我这段代码有什么问题？

```
redis.hdel("hash:" + id + " key" function(err, success) {
    console.log("Hash Deleted");
}); 
```

还有其他方法吗？

我也在为 HSET 苦苦挣扎：

```
redis.hset("hash:" + id + " key", "true"); 
```

它告诉我“参数数量错误”。它还有什么期待？在 HSET 的 Redis 文档中，没有更多的参数。

所以我改用HMSET，它工作正常。:)

另外，如果有人可以告诉我，我可以在其中找到所有命令的示例或至少在 NodeJS 中找到所有哈希命令的示例。

谢谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-06T01:19:16.733

`HSET`接受三个参数，`key`, `field`, `value`. `HDEL`需要两个，`key`并且`field`. [根据自述文件](https://github.com/simplegeo/nodejs-redis#usage)，您是否尝试过：

```
client.hset("key", "field", "value", callback); 
```

相似地，

```
client.hdel("key", "field", callback); 
```

# jquery - 即时删除 H3 元素

> ID：12291674
> 
> 赞同：0
> 
> 时间：2012-09-06T01:02:43.030
> 
> 标签：jquery, html, dom

我需要动态删除一个 H3 元素（这意味着当页面开始加载 DOM 时）。所以 H3 是一个带有 ID="category_rss_widgets" 的 DIV，H3 看起来像：

```
<h3 class="widget-title"></h3> 
```

我认为做这样的事情：

```
$(document).ready(function(){
  $('#category_rss_widgets').remove('widget-title');
}); 
```

这段代码对吗？我没有测试它，所以我由负责人 Cheers 制作，并在此先感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T01:07:36.190

Why didn't you just try it out?

Having said that, your code won't work as is. Don't pass a selector to `.remove()`, because that filters the set of matched elements, it doesn't search for descendants of the matched elements. Instead you can do this:

```
$(document).ready(function(){
  $('#category_rss_widgets h3.widget-title').remove();
}); 
```

The selector `'#category_rss_widgets h3.widget-title'` will match any h3 elements with the "widget-title" class that are descendants of #category_rss_widgets. Note that to match on a class name you need a `.` before the class name.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T01:04:47.620

```
$('#category_rss_widgets').find('.widget-title').remove(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T01:44:28.723

尝试这个

```
$(document).ready(function(){
  $('.widget-title').remove();
}); 
```

您正在将选择器传递给 .remove() 方法，该方法将过滤匹配的元素。

# php - mysql_fetch_array while循环跳过查询中的第一行

> ID：12291676
> 
> 赞同：-1
> 
> 时间：2012-09-06T01:02:57.520
> 
> 标签：php, mysql, arrays, while-loop, fetch

在此先感谢您的帮助。

我的问题是，我有以下代码（减去数据库连接信息和表名已更改以确保安全）。我被困在这里，所以这不是成品。我正在为我的邮件服务器构建一个管理脚本，该脚本执行从数据库中提取的虚拟域、用户和别名。该服务器完美无缺。我在我的域详细信息页面上调用此功能，首先列出邮箱的数量，然后列出别名的数量，然后您可以进入并编辑、添加和删除它们。我一直在列出邮箱名称，它似乎跳过了第一条记录。我的功能如下：

```
function listdomaindetails() {
    $domain = $_GET['domain'];
    $domaindetails_query = mysql_query("SELECT id FROM virtual_domains WHERE name='$domain'"); //get domain id
    $domaindetails_results = mysql_fetch_array($domaindetails_query, MYSQL_ASSOC); //Set domain id
    $domain_boxes_query = mysql_query("SELECT email FROM virtual_users WHERE domain_id='$domaindetails_results[id]'"); //Get virtual users
    $domain_boxes_results = mysql_fetch_array($domain_boxes_query, MYSQL_ASSOC); //Set virtual users
    $domain_boxes_count = mysql_num_rows($domain_boxes_results); //Count Boxes
    $domain_aliases_query = mysql_query("SELECT 'source', 'destination' FROM virtual_aliases WHERE domain_id='$domaindetails_results[id]'"); //Get aliases
    $domain_aliases_results = mysql_fetch_array($domain_aliases_query, MYSQL_ASSOC); //Set aliases
    $domain_aliases_count = mysql_num_rows($domain_aliases_results); //Count Aliases
    if ($domain_boxes_count = 0) {
        echo "This domain has no Email boxes, please add some by clicking <a href='email_add.php?domain=$domain'>HERE</a>";
    } else {
        while ($domain_boxes_row = mysql_fetch_array($domain_boxes_query, MYSQL_ASSOC)) {
        echo "<a href='email_detail.php?box=".$domain_boxes_row['email']."&domain=".$domain."'>".$domain_boxes_row['email']."</a><br>";
        }
    }
} 
```

该页面显示以下内容：

```
postmaster@john-stapleton.com
john@john-stapleton.com 
```

当它应该这样说的时候：

```
info@john-stapleton.com
postmaster@john-stapleton.com
john@john-stapleton.com 
```

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T01:05:36.130

您在定义查询后立即进行第一次提取

```
$domain_boxes_results = mysql_fetch_array($domain_boxes_query, MYSQL_ASSOC); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T01:06:50.983

因为您在运行查询后调用 mysql_fetch_array 一次，因此在运行 while 循环之前拉出一行。

# php - php 将数组元素合并到同一数组中的新键中

> ID：12291678
> 
> 赞同：0
> 
> 时间：2012-09-06T01:03:13.667
> 
> 标签：php, arrays

我需要将数组中的一些键值合并到一个新的键 => 值中，但在同一个数组中，我不知道如何。

所以我有这个数组：

```
array(
[title] => something
[status] => something
[url_1] => http://someurl.com
[url_2] => http://someurl.com
[url_3] => http://someurl.com
[url_4] => http://someurl.com
) 
```

我需要一个这样的数组：

```
array(
[title] => something
[status] => something
[all_url] => http://someurl.com,http://someurl.com,http://someurl.com,http://someurl.com
) 
```

哦，如果 url_2、url_3、url_4 为空，则不要将分隔符放在 url_1 之后，当然如果 url_1 为空，则不要将分隔符放在 url_2 之前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T01:12:17.123

尝试这个

```
<?php
$param = array(
'title' => 'something',
'status' => 'something',
'url_1'=> 'http://someurl.com',
'url_2' => 'http://someurl.com',
'url_3' => 'http://someurl.com',
'url_4' => 'http://someurl.com',
);

$meta = array('title','status');

$metas = array_intersect_key(array_flip($meta),$param);
$metas['all_url'] = implode(',', array_diff_key($param, array_flip($meta)));

var_export($metas); 
```

演示[http://codepad.org/SwP87PyL](http://codepad.org/SwP87PyL)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T01:06:54.523

You can use the `implode` function. If you have the url parts as another array, you can easily create the string like this:

```
$all_url = implode(',', $url_parts); 
```

The implode funciton only adds the separator where needed. If the url parts are always going to be a part of the main array, you can do something like this:

```
$temp_arr = array();
$i = 1;
while($temp_url = $array[url_{$i}]){
    $temp_arr[] = $temp_url;
    unset($array[url_{$i}]);
    $i++;
}
$array[all_url] = implode(',', $temp_arr); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T01:14:53.583

也试试这个：

```
$data = array(
            'title' => 'something',
            'status' => 'something',
            'url_1' => 'http://someurl.com',
            'url_2' => 'http://someurl.com',
            'url_3' => 'http://someurl.com',
            'url_4' => 'http://someurl.com',
        );
        $array1 = array();
        $string = "";
        foreach ($data as $key => $value)
            if (substr($key, 0, 4) == "url_")
                $string = $string . $value . ",";
            else
                $array1[$key] = $value;

        $array1['all_url'] = substr($string, 0, strlen($string) - 1);
        print_r($array1); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-06T01:23:36.440

如果你确定你总是在数组的开头有这两个字段（标题，状态），你可以有类似..

```
<?php
// Consider you have an array similar to this
$yourArray = array(
    'title'  => 'something',
    'status' => 'something',
    'url_1'  => 'http://someurl.com',
    'url_2'  => 'http://someurl.com',
    'url_3'  => 'http://someurl.com'
);

$newArray['title']  = array_shift($yourArray);
$newArray['status'] = array_shift($yourArray);

// Now $yourArray should only contain the url_X fields so...

$newArray['all_url'] = implode(',', $yourArray); 
```

因此，[**array_shift**](http://www.php.net/manual/function.array-shift.php "array_shift() 的文档")将检索并删除数组的第一个元素，通过使用它两次，您将从数组中删除标题和状态，留下 url_X 字段，然后您可以使用[**implode**](http://www.php.net/manual/function.implode.php "implode() 的文档")合并剩余的数组项，使用第一个参数作为*胶水*（参见 php 文档）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T01:07:17.320

```
$yourArray['all_url'] = implode(',', array(
    $yourArray['url_1'],
    $yourArray['url_2'],
    $yourArray['url_3'],
    $yourArray['url_4'],
));
unset($yourArray['url_1'], $yourArray['url_2'], $yourArray['url_3'], $yourArray['url_4'])

var_dump($yourArray): 
```

Or if you want to make it more scalable:

```
function mergeUrls($inputArray, $filter = 'url_')
{
    $urls = array();
    foreach($inputArray as $key => $value) {
        if (strpos($value, $filter) !== 0) {
            continue;
        }

        $urls[] = $value;
        unset($inputArray[$key]);
    }

    $inputArray['all_urls'] = implode(',', $urls);
    return $inputArray;
} 
```

# html - 用于移动设备的 css 样式电子邮件相互滚动/堆叠

> ID：12291682
> 
> 赞同：0
> 
> 时间：2012-09-06T01:03:44.993
> 
> 标签：html, css, mobile, html-email

我一直在尝试像 Pinterest 那样设计我的电子邮件样式。所以在网络上他们展示了一种方式，但在移动设备上，他们将 td 堆叠在一起，看起来更大。我对样式化电子邮件非常陌生，知道如何实现吗？或者该做什么不该做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T17:53:29.220

我发现。我必须在我的样式表和元标记中使用@media

```
 %meta{ name: 'viewport', content: 'width=device-width, initial-scale=1.0, maximum-scale=1' } 
```

一些很好的教程：

[http://www.campaignmonitor.com/blog/post/3442/mobile-email-design-in-practice/](http://www.campaignmonitor.com/blog/post/3442/mobile-email-design-in-practice/) http://mobile.smashingmagazine.com/2011/08/18/from-monitor-to-mobile-使用 css 优化电子邮件时事通讯/

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T03:56:09.580

大多数电子邮件客户端不遵守与 Web 浏览器相同的标准。有关如何设置电子邮件样式的背景信息，请参阅此答案。[样式化 HTML 电子邮件的最佳实践](https://stackoverflow.com/questions/4829254/best-practices-for-styling-html-emails)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T19:39:38.377

Campaign Manager 有关于创建移动响应电子邮件的指南 - [http://www.campaignmonitor.com/guides/mobile/](http://www.campaignmonitor.com/guides/mobile/)

# asp.net - 在 Entity Framework 4.0 中插入事件

> ID：12291683
> 
> 赞同：1
> 
> 时间：2012-09-06T01:03:57.863
> 
> 标签：asp.net, entity-framework-4

我对实体框架比较陌生，如果之前有人问过这个问题，我深表歉意。我搜索了它，但没有找到任何东西。

我的情况是我有一个实体表，如下所示

## 实体

ID CreateDate ModifiedDate LastActionByUser

还有一些表格，例如主题

## 主题

ID、名称、EntityID

现在，每当我的代码在依赖表中插入任何东西（例如主题）时，我都想在父表（在本例中为实体）中创建一条记录，获取其 id 并将其传递给依赖表的 EntityID 字段。

我有近 50 张具有相同场景的桌子，所以我想以一种通用的方式来做。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T02:37:30.747

您不必这样做，如果您正确设置了关系，Entity Framework 会自动为您执行此操作。不是插入实体，而是将实体添加到主体持有的实体对象的集合中。然后，当您提交更改时，此密钥会自动更新。

# vb.net - Is it possible to compute total of subreport to main report?

> ID：12291692
> 
> 赞同：0
> 
> 时间：2012-09-06T01:06:00.310
> 
> 标签：vb.net, crystal-reports, subreport

This is the sample layout of my crystal report...

expenses and amount are from subreport while the project name is in the main report.

        Project Title:         Expenses        Amount

Name of Project1            Item1.1         0.00
                                       Item1.2         0.00
                                       Item1.3         0.00

Name of Project2            Item2.1         0.00
                                       Item2.2         0.00

**TOTAL:**                                               **0.00**

I tried using this solution: [Crystal Reports: How to pass a parameter from a subreport to the parent report?](https://stackoverflow.com/questions/5745810/crystal-reports-how-to-pass-a-parameter-from-a-subreport-to-the-parent-report) but the problem is, it only return the last group total (in this case total expenses of Name of Project2 only and expenses in Project1 is not included in the total).

Please help. Thanks! :) God bLess!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T01:26:14.827

您可以在主报表中使用全局变量来存储您通过共享变量从子报表传回的累计金额。

```
global numbervar mainTotal;
shared numbervar subReportAmount;
mainTotal := mainTotal + subReportAmount 
```

真的，如果可以的话，我建议完全取消子报告。这样做比在主报告中连接所有表或使用 SQL 表达式要复杂得多，容易出错，而且速度要慢得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T01:45:57.897

我必须同意 Ryan 的意见，丢掉子报告。使用组和运行总计来提供您需要的总计。布局将与此类似：

```
 Report Header: <subdued> 
 Page Header:    Project Title         
 Expenses        Amount Group Header 1: Name of Project1            
 Detail:                                Item1.1         0.00 
 Detail:                                Item1.2         0.00 
 Detail:                                Item1.3         0.00
 Group Footer: <use as space between groups or add a subtotal>
 Group Header 1: Name of Project2             
 Detail:                                 Item2.1         0.00 
 Detail:                                 Item2.2         0.00 
 Group Footer: <use as space between groups or add a subtotal>
 Report Footer:   TOTAL:                                 0.00 
 Page Footer:                                           Page x of y 
```

# android - Launch Spotify Search via adb for Android

> ID：12291694
> 
> 赞同：2
> 
> 时间：2012-09-06T01:06:20.500
> 
> 标签：android, adb, spotify

I am hacking my nexus q and setting up some tools to allow users to run apps and one of the things I am trying to do is launch a song on spotify over adb so that way it can be run from say a script or call from a webpage etc. I saw the post [Intents to launch song, search for user in spotify app?](https://stackoverflow.com/questions/7656720/intents-to-launch-song-search-for-user-in-spotify-app) but I am not sure how to launch this via the command prompt. I am currently at -

adb am start -a MediaStore.INTENT_ACTION_MEDIA_PLAY_FROM_SEARCH -e SearchManager.QUERY "michael jackson smooth criminal" -n com.spotify.mobile.android.ui/.Launcher

This though isn't returning anything so I wasn't sure what else I many need to add or change from the command itself. I know I am connected to the device properly and I see the start of the command called but after that nothing happens. In the log it does show 'Duplicate finish request for Activity Record 'com.spotify.mobile.android.ui/.Launcher' so I am guessing it is running just not finishing etc.

Thanks all, Joe

# php - 如何通过 PHP SDK 在 Amazon S3 存储桶下创建文件夹？

> ID：12291706
> 
> 赞同：14
> 
> 时间：2012-09-06T01:08:55.890
> 
> 标签：php, amazon-s3, amazon

我正在开发一个 iPhone 应用程序以允许用户上传照片和分享。我想使用 S3 来存储上传的图像以及处理过的图像（例如，缩略图、缩小尺寸的图像）。我已经在我的 EC2 实例上安装了 AWS PHP SDK，我的问题是： 1）从 iPhone 应用程序上传的照片应该先转到 EC2 目录，然后复制到 S3 存储桶，还是应该直接上传到 S3？2) 如何通过 PHP SDK 在 S3 存储桶下创建不同的文件夹以及如何从文件夹中读取文件？

提前致谢！

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2014-11-20T16:39:41.303

**是**的，可以使用`s3`sdk 创建新文件夹。

试试下面的代码

```
<?php

 /* abc is the folder name */

 $s3->putObject(array( 
                   'Bucket' => $bucket,
                   'Key'    => "abc/",
                   'Body'   => "",
                   'ACL'    => 'public-read'
                  )); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-06T09:34:03.470

1.  答案可以在这里找到： [Direct upload to s3 without using a production server](https://stackoverflow.com/questions/6712733/direct-upload-to-s3-without-the-use-of-a-production-server)

2.  我从未使用过 PHP 开发工具包，但我浏览了[适用于 PHP 1.5.14 的 AWS 开发工具包文档](http://docs.amazonwebservices.com/AWSSDKforPHP/latest/) 并遇到了您需要使用的以下 API：

    a) [create_object](http://docs.amazonwebservices.com/AWSSDKforPHP/latest/#m=AmazonS3/create_object)：您将使用它来将对象放入存储桶中。您将指定文件名。您询问如何创建不同的文件夹：您将在文件名中包含完整路径。例如，不要将文件命名为“photo1.jpg”，而是将其命名为“user1/vacation/photo1.jpg”。

    b) [get_object_list](http://docs.amazonwebservices.com/AWSSDKforPHP/latest/#m=AmazonS3/get_object_list)：此 API 将根据某些条件返回给您一个对象列表。如果要读取特定文件夹中的所有对象，请将前缀指定为文件夹的路径。例如，如果我想查找文件夹“user1/vacation/”中的所有文件，我会将前缀指定为“user1/vacation/”。

# git - 不确定 Git 拉取

> ID：12291707
> 
> 赞同：1
> 
> 时间：2012-09-06T01:09:09.407
> 
> 标签：git

我对 Git 还很陌生，所以请原谅我的白痴。

我遇到了从远程存储库中提取更改的问题。我之前对特定文件进行了很多更改，而一个团队成员推送了一些根本不起作用的更改。让我感到困惑的是，我将如何防止他的更改改变我所做的事情？是否像撤消最后一次提交并从那里开始一样简单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T01:17:53.147

由于 git 是一个分布式版本控制系统，它取决于您使用的信任模型。在这种情况下，您和他们可能都更改了 master 并且您（可能）都在做`git pull origin master`. 当您这样做（或`git fetch`它`git merge`实际上包含的）时，您基本上是在说您信任其他人所做的任何更改，即其他有权写入存储库的人。所以这可能就是你今天所处的位置。
我建议您考虑进行交互式变基（例如`git rebase -i HEAD~10`) 这也可以让你简单地删除历史的提交。我这样说而不是仅仅撤消最后一次提交，因为您需要提交您的更改，并拉出他现在将是较旧的提交并且更难达到的内容。但是要非常谨慎地使用 rebase 交互。我建议您在学习执行此类操作时将整个项目备份到另一个目录。在提交和推送之前仔细检查结果。

有很多选择可以避免再次发生，这里有一些：

*   在分支机构工作

*   在`git fetch`合并它们之前，首先检查被带入源跟踪分支的更改。

*   指定一人审核和批准变更

有关您的选项的更多信息，请参阅
[git branch、fork、fetch、merge、rebase 和 clone 中的 fetch merge 和 rebase 选项，有什么区别？](https://stackoverflow.com/questions/3329943/what-is-the-difference-between-branch-fork-fetch-merge-rebase-and-clone-in-g/9204499#9204499)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T06:24:27.403

你能做的是

*   在本地提交您的代码，然后拉取
*   更好的选择是执行 git fetch ，它将显示哪些文件将被合并
*   你们俩有可能共同处理过一些文件，但如果你们处理过不同的行，那么它们会递归合并而不会发生冲突。
*   如果存在冲突，请考虑哪个是正确的来解决它们，然后再次提交已解决的文件。然后最后推送代码，您的更改已成功推送。

# java - 创建类类型变量的实例

> ID：12291714
> 
> 赞同：4
> 
> 时间：2012-09-06T01:10:25.443
> 
> 标签：java, oop, constructor, instance-variables

我是 OOP 的新手，我想知道如何设置一些不像 int、string、double 等的东西。

我有两个类，Foo 和 Bar，以及一些实例变量 如何设置 Bar 类型的实例变量？

```
public class Foo
{
    //instance variables
    private String name;        
    Bar test1, test2;

    //default constructor
    public Foo()
    {
        name = "";
        //how would I set test1 and test 2?
    }
}

public class Bar
{
    private String nameTest; 

    //constructors
    public Bar()
    {
        nameTest = "";
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T01:13:07.060

与其他任何方法一样，创建 a 的实例`Bar`并将其设置在实例属性上。

您可以在构造函数中创建这些实例，将它们传递给构造函数，或使用 setter 进行设置：

```
public class Foo {

    private Bar test1;

    public Foo() {
        test1 = new Bar();
    }

    public Foo(Bar bar1) {
        test1 = bar1;
    }

    public void setTest1(Bar bar) {
        test1 = bar;
    }

    public static void main(String[] args) {
        Foo f1 = new Foo();
        Foo f2 = new Foo(new Bar());
        f2.setTest1(new Bar());
    }

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T01:13:07.733

您需要`Bar`使用`new`运算符创建一个新实例，并将它们分配给您的成员变量：

```
public Foo() {
  name = "";
  test1 = new Bar();
  test2 = new Bar();
} 
```

### 参考：

*   [类和对象](http://docs.oracle.com/javase/tutorial/java/javaOO/index.html)
*   [创建对象](http://docs.oracle.com/javase/tutorial/java/javaOO/objectcreation.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T01:41:02.730

如果要在默认构造函数中设置*Bar*，则必须实例化它。

这是使用[new 运算符](http://docs.oracle.com/javase/tutorial/java/javaOO/objectcreation.html)完成的。

`Bar someBar = new Bar();`

您还可以创建带参数的构造函数。

下面是如何创建一个将 String 作为参数的*Bar构造函数：*

```
class Bar {

    private String name;

    public Bar(String n) {
        name = n;
    }

} 
```

以下是如何在*Foo 的*默认构造函数中使用新的*Bar构造函数：*

 *```
class Foo {

    private String name;
    private Bar theBar;

    public Foo() {
        name = "Sam";
        theBar = new Bar("Cheers");
    }

} 
```

更聪明的是，您可以创建一个带有两个参数的新*Foo*构造函数：

```
class Foo {

    private String name;
    private Bar theBar;

    public Foo(String fooName, String barName) {
        name = fooName;
        theBar = new Bar(barName);
    }  

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-06T04:13:04.997

试试这个例子

```
public class Person {

    private String name;
    private int age;

    public Person(String name, int age) {
        this.name = name;
        this.age = age;
    }        
    //getters and setters        
}

public class Student {

    private String school;
    private Person person;

    public Student(Person person, String school) {
        this.person = person;
        this.school = school;
    }        
    //code here
}

class Main {

   public static void main(String args[]) {
      Person p = new Person("name", 10);
      Student s = new Student(p, "uwu");
   }

} 
```

String、Integer、Double 等还有 person 这样的类*

# java - 学习 Ruby 中的高级概念。解决方案？

> ID：12291716
> 
> 赞同：2
> 
> 时间：2012-09-06T01:10:52.170
> 
> 标签：java, ruby, algorithm, design-patterns, tdd

我是 ruby​​ 开发人员，没有 Java 的背景。最近我对学习计算机科学的高级概念（特别是 tdd、bdd、算法、设计模式）产生了兴趣。但是这些概念的材料（至少是好的材料）在 Java 中是可用的，或者至少他们使用 Java 来教授这些概念。我对如何处理这个问题感到困惑。有人通过这个问题并有解决方案吗？

示例书籍：

1.  Kent Beck 的测试驱动开发
2.  以测试为指导的不断发展的面向对象软件
3.  四人组的设计模式

Java 中的材料比 Ruby 多得多

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T01:55:20.953

我不确定您为什么认为该材料仅在 Java 中可用。

[Ruby 中的设计模式](https://rads.stackoverflow.com/amzn/click/com/0321490452)

此外，学习基于 Java 的设计模式可能会导致一些非常不必要的 Ruby 代码：不同的语言往往有不同的模式。至少，它们可能有非常不同的实现*。*

[RSpec 手册](https://rads.stackoverflow.com/amzn/click/com/1934356379)

Ruby 中的 TDD/BDD。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T01:16:49.943

我的建议：

1.  学习足够的 Java 以了解基本概念。
2.  对于每种设计模式（等），（a）学习设计模式概念，以便您了解正在发生的事情，并且（b）在 Internet 上查找有关 Ruby 方式的更多信息（如果需要），以及（c）在红宝石。
3.  通过学习一种语言、另一种语言以及最重要的是学习如何跨语言翻译你的知识来获利。

然后，您将在可预见的未来做好准备！

# html - 浏览器显示 javascript 代码而不是呈现页面

> ID：12291717
> 
> 赞同：1
> 
> 时间：2012-09-06T01:10:57.937
> 
> 标签：html, rendering

我有一个带有 Javascript 的网页，在我开发它的过程中一直显示良好。我一直在我的 Mac 上用 Coda 开发它；它旨在在 Chrome 中显示和使用。我的工作场所有个人电脑，我今天使用 Kompozer 对网页的正文进行了一些小改动。该文件事先显示良好，但在我将其保存在 Kompozer 中后，显示了 javascript 代码本身。所以我回到了原来的文件，在 Kompozer 中原封不动地保存了它——它渲染得很好。我做了一个小改动——只是页面正文中的一小部分文本——保存它，我遇到了同样的问题。当我在我的 PC 上使用 SeaMonkey 时也会发生同样的事情。

我不能发布整个 HTML 文件，因为某些信息是机密的。（而且我不想在 HTML 编辑器中编辑它，因为这可能会使问题进一步复杂化）。

以下是显示 ok 的文件开头的 HTML 代码链接：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"> 
<!-- saved from url=(0079)file:///Users/ddddddd/Dropbox/CCC%20Sept%202012/CCC_schedule_09_03_10.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">

<title>CCC_TEST_Generic_2</title>

<style type="text/css">
.timeClass {
font-family:'Century Gothic';
font-weight:normal;
font-size:10pt;
}
.timeClass2 {
font-family:'Century Gothic';
font-weight:bold;
font-size:14pt;
color:red;
}
.tableX{
display: block;
font-family:'Century Gothic';
text-align: left;
table-layout:fixed;
border-collapse:collapse;
}
.tableXhidden{
display: none;
font-family:'Century Gothic';
text-align: left;
table-layout:fixed;
border-collapse:collapse;
}
.tdhidden{
display: none; }
.tdunhidden{
display: block; }
.TDBOLD{
font-weight:bold;
font-size:large;
border-collapse:collapse;
}
.redbuttonhidden
{ background-color:#FF4500;
display: none;
}
.redbuttonunhidden
{ background-color:#FF4500;
display: block;
}
.int {
font-family:'Century Gothic';
text-align: left;
border-collapse:collapse;
border-style:solid;
border-width:1px;
}
.inttd
{
padding:15px;
}
.interests_hidden{
display: none;
font-family:'Century Gothic';
text-align: left;
}
.interests_visible{
display: block;
font-family:'Century Gothic';
text-align: left;
}
.bookedhidden{font-family:'Century Gothic';
text-align: left;
table-layout:fixed;
border-collapse:collapse;
display: none;
background-color:Silver;
}
.bookedunhidden{font-family:'Century Gothic';
text-align: left;
table-layout:fixed;
border-collapse:collapse;
display: block;
background-color:#FAEBD7;
}
.templ_1 {
border:thin;
border-collapse:collapse;
font-family:'Century Gothic';
}
.admincontrols{
margin-left:150px;
}
#templateDIV{
margin-top:30px;
margin-bottom:30px;
margin-right:50px;
margin-left:50px;
}
.crossref{ display: none; }
.hidden{ display: none; }
.unhidden{ display: block; }
.ptinfo_noview{ display: none; }
.ptinfo_view{ display: block; }
.samplenoview{ display: none; }
.break { page-break-before: always; }
p.apptcardheader{
font-size:large;
text-align:left;
}
.bigbold {
font-size:large;
text-aligh:center;
}
#whyreferred{
font-family:'Century Gothic';
font-size:small;
text-align: left;
}
@media print {
body{font-family:'Century Gothic';}
.tableX{
display: block;
font-family:'Century Gothic';
text-align: left;
table-layout:fixed;
border-collapse:collapse;
}
.TDBOLD{
font-weight:bold;
font-size:large;
border-collapse:collapse;
}
p.apptcardheader{
font-size:large;
text-align:left;
}
.noprint {display:none;}
.printme {display:block;}
}
@media screen {.noscreen {display: none;}}
</style>

<script type="text/javascript">
if (localStorage.CCC=="busy")
{ window.location="CCCbusy.html";}
else {localStorage.CCC="busy"; }
var docarray=new Array();
var time_expired=0;
var CSSwritten=0;
docarray[0]="ccccccc";
docarray[1]="cccccccc"; 
```

当我在文本（而不是 HTML）中进行更进一步的更改时，这就是“渲染”页面在浏览器窗口中开始的方式。

```
if (localStorage.CCC=="busy") { window.location="CCCbusy.html";} else {localStorage.CCC="busy"; } var docarray=new Array(); var time_expired=0; var CSSwritten=0; docarray[0]= 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-03-17T21:30:34.443

我遇到了这个问题，它最终成为我的 CSS。我有这样的事情：

```
html, body, body>* {
    display:block;
    margin:0;
    padding:0;
} 
```

在我的 HTML 中，我`<script>`小时候在 下`<body>`，这将符合上述选择器。

解决这个问题的方法是在我的 CSS 中添加：

```
script {display:none;} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T02:31:11.233

我不确定所有各种工具对您的问题的影响，但我注意到在 before.rtf 中您缺少一个结束脚本标记。这种缺失可能会导致 javascript 显示而不是执行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-26T17:08:30.423

您可以尝试将您的 javascript 放入此构造中：

```
<script type="text/javascript">
<!--
.....javascript here.....
-->
</script> 
```

# ios - iOS：通用 App 的 adMob？

> ID：12291723
> 
> 赞同：4
> 
> 时间：2012-09-06T01:11:55.267
> 
> 标签：ios, admob

我正在将 adMob 广告实施到我的通用应用程序中。在 www.admob.com 中，它有两种广告选项：一种用于 iPad 应用程序，一种用于 iPhone 应用程序。我的问题是，我是否必须为我的通用应用制作两个具有两个不同发布者 ID 的不同广告，或者只为我的应用制作一个具有一个发布者 ID 的广告，然后在代码中更改广告尺寸？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T20:42:13.177

我相信你可以做到。如果您想要更精细的级别跟踪以轻松查看 iPhone 版本与 iPad 版本相比的内容，您可能需要使用 2 个 ID，但仅使用您在代码中更改的通用 ID 应该可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-16T02:42:59.957

2 个独立的边/应用程序将为您提供更大的灵活性，例如中介设置。

提示：创建 2 个单独的边/应用程序。您现在将拥有 2 个发布者 ID。确保在网站和应用广告 > 网络中介 > 编辑：AdMob 网络中选择正确的发布商 ID

# php - jQuery 脚本在谷歌浏览器中不起作用

> ID：12291727
> 
> 赞同：0
> 
> 时间：2012-09-06T01:12:38.823
> 
> 标签：php, javascript, jquery, google-chrome

看起来很奇怪，我的脚本的一部分看起来像这样...... php 正在控制对我的 jQuery 函数的访问；请原谅这里可能有一些冗余代码，但请允许我在这里解释主要问题。

这是php的代码摘录：

```
<?php
        if($user_info['ACTIVE'] == 'Y')
            {
                require("jQuery/main_function.js");
                require("edit_profile.php");
            }elseif(!isset($_GET['resend']))
            {
                echo '<div id="profile_info"><p>In order to modify or setup your seller profile your account must be activated.<br />
                Check your email; if you did not receive an email, <a href="profile.php?resend">Click here</a> to have another one dispatched.</p>';
                echo '<p>You can however complete your contact information <a href="user_contact.php">here</a>';
            } 
```

正如您在 php 代码中看到的，如果用户是活动的，由数据库调用确定，它将需要 html 中的 main_function.js，因此删除：

```
<script type="text/javascript">
function option_click(elementId)
    {
        $(document).ready(function(){
            alert('testing1');
            var defaultString = "Upload";
            var elementNum = elementId.substr(elementId.length-1, 1);
            switch($('#'+elementId).val())
            {
                case 'Video':
                {
                    alert('testing in chrome');
                    $('.set_time'+elementNum).prop('type', 'hidden');
                    $('.product_upload'+elementNum).prop('type', 'file');
                    $('.content_upload'+elementNum).html(defaultString + ' a ' + 'video file:');
                    break;  
                }
                case 'Time':
                {
                    $('.content_upload'+elementNum).html('How much time?');
                    $('.product_upload'+elementNum).prop('type', 'hidden');
                    $('.set_time'+elementNum).prop('type', 'text');
                    break;
                }
                case 'Music/Audio':
                {
                    $('.set_time'+elementNum).prop('type', 'hidden');
                    $('.product_upload'+elementNum).prop('type', 'file');
                    $('.content_upload'+elementNum).html(defaultString + ' a ' + 'music file');
                    break;
                }
                case 'Ebook':
                {
                    $('.set_time'+elementNum).prop('type', 'hidden');
                    $('.product_upload'+elementNum).prop('type', 'file');
                    $('.content_upload'+elementNum).html(defaultString + ' an ' + 'ebook file');
                    break;  
                }
                case 'Tutorial/Docs':
                {
                    $('.set_time'+elementNum).prop('type', 'hidden');
                    $('.product_upload'+elementNum).prop('type', 'file');
                    $('.content_upload'+elementNum).html(defaultString + ' a ' + 'tutorial file');  
                    break;
                }
            }
        });
    }
</script> 
```

在我的代码中间......

在除谷歌浏览器之外的所有浏览器中都可以正常工作吗？为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T01:35:07.610

您正在切换选项的价值，例如

```
switch($('#'+elementId).val()) 
```

但是在您的元素（选项）中，我没有看到任何`value`分配（根据您提供的评论）

```
<option id="video0" onclick="option_click(this.id)">Video</option> 
```

**更新：**

您的方法（不适用于 Chrome）

```
<select>
   <optgroup label="Swedish Cars">
       <option id="volvo" onclick="option_click(this.id)">Volvo</option>
       <option id="saab" onclick="option_click(this.id)">Saab</option>
   </optgroup> 
```

[**演示**](http://jsfiddle.net/7V3pZ/4/)。

正确的方式（在所有浏览器中工作）

```
<select onchange="option_click(this.value)">
    <optgroup label="Swedish Cars">
        <option value="volvo" id="volvo">Volvo</option>
        <option value="saab" id="saab">Saab</option>
    </optgroup>
</select> 
```

[**演示**](http://jsfiddle.net/7V3pZ/3/)。

[这里有一个带有 switch 语句的示例](http://jsfiddle.net/7V3pZ/5/)。

# android - Android：来自 Fragment 的 startActivityForResult() 在回调 onActivityResult 时丢失数据

> ID：12291729
> 
> 赞同：2
> 
> 时间：2012-09-06T01:13:04.193
> 
> 标签：android, fragment

因为不推荐使用 showDialog()，所以我现在必须使用 DialogFragments 来修复我的图像选择器功能。

我从[这里](http://www.londatiga.net/it/how-to-create-android-image-picker/)得到了代码，到目前为止它就像一个魅力。

现在，为了简单起见，我将只显示必要的代码行。首先，单击**Activity A**上的按钮以选择带有此对话框的图像后：

```
ImagePickerFragment ip= new ImagePickerFragment(); 
ip.show(getSupportFragmentManager(), "imagePicker"); 
```

片段代码如下所示：

```
 public class ImagePickerFragment extends DialogFragment{

    public Dialog onCreateDialog(Bundle savedInstanceState){
        super.onCreate(savedInstanceState);

        //.. creating an adapter

        return new AlertDialog.Builder(getActivity())
        .setTitle("select Image")
        .setAdapter(adapter, new DialogInterface.OnClickListener(){

            public void onClick(DialogInterface dialog, int which){

              if (which == 0){ // from camera
                Intent intent    = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
                File file        = new File(Environment.getExternalStorageDirectory(),
                                    "picture_" + String.valueOf(System.currentTimeMillis()) + ".jpg");
                mImageCaptureUri = Uri.fromFile(file);

                intent.putExtra(MediaStore.EXTRA_OUTPUT, mImageCaptureUri);

                getActivity().startActivityForResult(intent, PICK_FROM_CAMERA);
              } 
              else{  // pick from file
                Intent intent = new Intent();

                intent.setType("image/*");
                intent.setAction(Intent.ACTION_GET_CONTENT);

                getActivity().startActivityForResult(Intent.createChooser(intent, "complete Action..."), PICK_FROM_FILE);
              }
           }

         }).create():
     }
} 
```

现在，回到我的**Activity A**中，onActivityResult() 代码如下所示：

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (resultCode != RESULT_OK) return;

    if (requestCode == PICK_FROM_FILE){
    mImageCaptureUri = data.getData();
    path = getRealPathFromURI(mImageCaptureUri); //from Gallery

    if (path == null)
    path = mImageCaptureUri.getPath(); //from File Manager
    } 
    else path = data.getData().getPath(); **// this is were the Code starts when picture was taken with camera and where the exceptions come from..**

    if(path != null){
        // do something with image
    }
} 
```

这实际上适用于从画廊中挑选的图像，但由于某种原因不适用于相机拍摄的照片。加载相机后，我可以拍照，当我接受该照片进行保存时，应用程序崩溃。

requestCodes 是正确的，但我发现从 Intent 的数据发回的 Uri 始终为空，即使我将它单独放在 Intent 中（即 putExtra、bundle）。不过，我真的很想知道为什么它适用于画廊：-/

也许你们中的一个人知道我做错了什么？

PS：我很抱歉我的英语不好。

**更新**：我被要求提供崩溃信息。

```
09-06 01:58:50.929: E/AndroidRuntime(6322): FATAL EXCEPTION: main
09-06 01:58:50.929: E/AndroidRuntime(6322): java.lang.RuntimeException: Failure delivering result ResultInfo{who=null, request=0, result=-1, data=null} to activity {android.pack.coding/android.myactivitys.MainActivity}: java.lang.NullPointerException
09-06 01:58:50.929: E/AndroidRuntime(6322):     at android.app.ActivityThread.deliverResults(ActivityThread.java:2980)
09-06 01:58:50.929: E/AndroidRuntime(6322):     at android.app.ActivityThread.handleSendResult(ActivityThread.java:3023)
09-06 01:58:50.929: E/AndroidRuntime(6322):     at android.app.ActivityThread.access$1100(ActivityThread.java:123)
09-06 01:58:50.929: E/AndroidRuntime(6322):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1177)
09-06 01:58:50.929: E/AndroidRuntime(6322):     at android.os.Handler.dispatchMessage(Handler.java:99)
09-06 01:58:50.929: E/AndroidRuntime(6322):     at android.os.Looper.loop(Looper.java:137)
09-06 01:58:50.929: E/AndroidRuntime(6322):     at android.app.ActivityThread.main(ActivityThread.java:4424)
09-06 01:58:50.929: E/AndroidRuntime(6322):     at java.lang.reflect.Method.invokeNative(Native Method)
09-06 01:58:50.929: E/AndroidRuntime(6322):     at java.lang.reflect.Method.invoke(Method.java:511)
09-06 01:58:50.929: E/AndroidRuntime(6322):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
09-06 01:58:50.929: E/AndroidRuntime(6322):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
09-06 01:58:50.929: E/AndroidRuntime(6322):     at dalvik.system.NativeStart.main(Native Method)
09-06 01:58:50.929: E/AndroidRuntime(6322): Caused by: java.lang.NullPointerException
09-06 01:58:50.929: E/AndroidRuntime(6322):     at android.myactivitys.MainActivity.onActivityResult(MainActivity.java:298)
09-06 01:58:50.929: E/AndroidRuntime(6322):     at android.app.Activity.dispatchActivityResult(Activity.java:4649)
09-06 01:58:50.929: E/AndroidRuntime(6322):     at android.app.ActivityThread.deliverResults(ActivityThread.java:2976)
09-06 01:58:50.929: E/AndroidRuntime(6322):     ... 11 more 
```

# batch-file - 使用批处理文件返回运行的可执行文件的数量？

> ID：12291739
> 
> 赞同：0
> 
> 时间：2012-09-06T01:15:01.383
> 
> 标签：batch-file

这里的问题的简短版本，

我从一个批处理文件运行一个可执行文件（它又运行一个模拟）。我一次最多可以运行四个。有什么方法可以检查（从批处理文件中）一次运行多少个这些可执行文件？

长版，

我有一个批处理文件，它允许我运行多个模型，但由于许可，我不能同时运行超过 4 个模型。但是，我可以将它们排队等待运行，但是我正在努力编写一个批处理文件，以确保始终有四个模型在运行。我的最大努力（通过搜索互联网拼凑而成）如下

```
 FOR %%a in (%A%) do (
                FOR %%b in (%B%) DO (
                    FOR %%c in (%C%) DO (
                         FOR %%d in (%D%) DO (
                            SET /A COUNT+=1
                            SET /A Result =!COUNT!%%4
                            :: set Result to the remainder of the Count divided by 4
                            if !Result! == 0 (
                                start "TUFLOW" /wait C:\Tuflow\TuflowExe\Build_2011_09_AF_64\TUFLOW_iSP_w64.exe -e1 %%a -s1 %%b -s2 %%c -s3 %%d C:\Tuflow\Model\Ohoka\runs\OH.tcf
                            ) else (
                                start "TUFLOW" C:\Tuflow\TuflowExe\Build_2011_09_AF_64\TUFLOW_iSP_w64.exe -e1 %%a -s1 %%b -s2 %%c -s3 %%d C:\Tuflow\Model\Ohoka\runs\OH.tcf
                            )
                         )
                    )
                )
            ) 
```

其中 A、B、C 和 D 是包含传递给可执行文件的变量组合的数组。然后我有一个记录迭代的计数，在每第四次迭代中，触发 if 语句的“真”条件，并且批处理等待模型运行完成，然后再继续。

这没关系，但是我的其他三个模型可能会更早完成，从而释放出未使用的宝贵 cpu 时间，因为批处理正在等待第四次迭代完成。或者更糟糕的是，第四次迭代在其他三个迭代之前完成并最终尝试运行四个以上的模型，这会导致许可弹出，需要用户关闭。

我一定会错过任何建议或其他解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T02:05:07.503

通过使用来统计运行的程序数量相对容易`tasklist.exe`

```
for /f "skip=3" %%x in ('tasklist /FI "IMAGENAME eq TUFLOW_iSP_w64.exe"') do set /a count=count+1
echo TUFLOW_iSP_w64.exe is running %count% times. 
```

只要记住每次运行它时清除`count`或设置它。`0`

或者，更慢一点：

```
for /f %%x in ('tasklist ^| find /c "TUFLOW_iSP_w64.exe"') set count=%%x
Echo TUFLOW_iSP_w64.exe is running %count% times. 
```

上面的代码比较慢，因为`find`必须处理整个任务列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T01:54:13.640

我会尝试每隔几秒钟运行一次的轮询循环，调用

```
tasklist | findstr "TUFLOW" 
```

获取输出中的行数，如果行数小于四，则开始新的运行。

你编写复杂的批处理文件似乎没有任何问题，所以我不会在这里尝试编码。计算命令输出的行数可以在`FOR /F`. 轮询延迟将采取`sleep`实施。如果你已经安装了例如 Cygwin，你就已经有了它。大多数 Windows 版本都有一个未记录的命令，这是我[在本文中](https://stackoverflow.com/questions/735285/how-to-wait-in-a-batch-script)`timeout NumberOfSeconds`了解到的。

# c++ - 使用大小初始化私有成员数组作为类初始化参数

> ID：12291742
> 
> 赞同：2
> 
> 时间：2012-09-06T01:15:43.350
> 
> 标签：c++

所以我有一个我正在编写的程序的“办公室”课程，每个“办公室”都有一定数量的柜员，他们要么忙要么闲。我想将这些柜员表示为 Office 类的私有 int 数组。我遇到的问题是出纳员的数量是办公室类的声明参数，所以我不能只去

```
private: 
    int tellers[num_tellers]; 
```

我用构造函数尝试了不同的东西，但似乎没有任何效果。我该如何正确地做到这一点？我在网上看到的一切都在使用 new 运算符，但我没有兴趣为此使用指针。

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T01:38:36.833

你有两个选择：第一个也是不安全的选择是

```
private:     
    int* tellers; 
```

在你的构造函数中：

```
tellers = new int[yourParamGoesHere]; 
```

第二个也是更安全的选择是使用向量，然后您将拥有

```
private:
    std::vector<int> tellers; 
```

在你的承包商中，你会这样做：

```
Office(int numberOfTellers):
    tellers(std::vector<int>(numberOfTellers)) 
```

然后，每当您想读取或写入任何整数时，您都可以像这样的数组一样索引向量：

```
tellers[0] = 42; 
```

# ruby - 从文件中提取列

> ID：12291744
> 
> 赞同：1
> 
> 时间：2012-09-06T01:16:13.483
> 
> 标签：ruby, file-io

我是 Ruby 的新程序员。我正在尝试从文件中获取两列并执行一些操作。我想我可以为此目的使用正则表达式？这是我的文件：

```
 MMU June 2002

  Dy MxT   MnT   AvT   HDDay  AvDP 1HrP TPcpn WxType PDir AvSp Dir MxS SkyC MxR MnR AvSLP

   1  88    59    74          53.8       0.00 F       280  9.6 270  17  1.6  93 23 1004.5
   2  79    63    71          46.5       0.00         330  8.7 340  23  3.3  70 28 1004.5
   3  77    55    66          39.6       0.00         350  5.0 350   9  2.8  59 24 1016.8
   4  77    59    68          51.1       0.00         110  9.1 130  12  8.6  62 40 1021.1
   5  90    66    78          68.3       0.00 TFH     220  8.3 260  12  6.9  84 55 1014.4
   6  81    61    71          63.7       0.00 RFH     030  6.2 030  13  9.7  93 60 1012.7
   7  73    57    65          53.0       0.00 RF      050  9.5 050  17  5.3  90 48 1021.8
   8  75    54    65          50.0       0.00 FH      160  4.2 150  10  2.6  93 41 1026.3
   9  86    32*   59       6  61.5       0.00         240  7.6 220  12  6.0  78 46 1018.6 
```

这就是我想要做的：

```
 result_arr = []
 File.open("filename") do |f|
    while (line = f.gets)
      ary = line.split
      day = ary[0]
      max = ary[1]
      min = ary[2]
      result = max.to_i - min.to_i
     result_arr << result unless result == 0
   end
   puts result_arr.min
 end
 ~ 
```

基本上我想打印第一列和 min(Mxt - Mnt) 的结果我正在使用一个数组，但我正在尝试使用 2D 可能不知道该怎么做

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T03:07:39.647

阅读您对第一个答案的评论，我认为这就是您想要做的：

```
results = [] #array to store the difference between the "Mxt" and "Mnt" fields

File.open("/path/to/file").each do |line|
  # skip header rows (there seem to be multiple in the file)
  # you might need to adjust the regex that checks for the presence of a data row
  # here I'm assuming that data rows start with a digit
  if line =~ /^\d/
    arr = line.split
    # you can use the column indices to get to the data you want
    results << arr[1] - arr[2]  
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T01:25:16.707

以下情况如何：

```
File.open("file.txt") do |f|
  while (line = f.gets)
    ary = line.split
    do_whatever_you_want_to(ary)
  end
end 
```

String#split 会将你的行变成一个数组，在空格和制表符处中断。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T04:36:07.707

通常，您希望像这样“解压”固定宽度的数据：

```
'   1  88    59 '.unpack('A6A6A6') 
```

# php - 如何使用 DATEDIFF 选择行？

> ID：12291746
> 
> 赞同：0
> 
> 时间：2012-09-06T01:17:20.240
> 
> 标签：php, mysql, sql

我正在使用[这个日历](http://arshaw.com/fullcalendar/docs/usage/)插件来使用 mySQL 数据库显示我的客户的议程。日历使用UNIX 时间戳向我的脚本发出请求，`start`如下所示：`end`

```
/getevents.php?start=1262332800&end=1265011200&_=1263178646
//That last piece of data is to prevent caching.. apparently 
```

在我的脚本中，我将 UNIX 时间戳转换为 mySQL`datetime`对象，如下所示：

```
$start = $_GET['start'];
$end = $_GET['end'];
$start = gmdate("Y-m-d H:i:s", $start);
$end = gmdate("Y-m-d H:i:s", $end);
printf($start.".....".$end); 
```

这会正确打印如下内容（当我导航到 2012 年 9 月时）：

```
2012-08-26 04:00:00.....2012-10-07 04:00:00 
```

现在我想从我的数据库中选择这些日期之间的所有事件。我的数据库只有 1 行，`start`字段是今天的日期：

```
 id     start                   end
 10     2012-09-05 20:27:00     0000-00-00 00:00:00 
```

但是使用下面的 SQL 语句，我没有得到结果。我已经尝试将其反转`>`为`<`只是为了它的地狱，但仍然没有。我根本没有收到任何错误，只是没有结果。

```
$sql = "SELECT * FROM all_events WHERE DATEDIFF('$start', 'start') > 0";
$result = mysql_query($sql, $link) or die(mysql_error());
echo "Rows:".mysql_num_rows($result); 
```

正如您所看到的，现在我只是检查`start`事件的 是否大于`start`日历的日期范围。即 8 月 26 日是`start`9 月份。

我没有看到任何问题...请帮助！我要扯头发了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T01:20:25.573

不要`single quotes`用于列名，而是使用`backticks`.try this

```
SELECT * FROM all_events WHERE DATEDIFF(`start`, '$start') > 0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T01:23:22.653

我建议使用`FROM_UNIXTIME`和准备这样的语句：

```
$stmt = $mysqli->prepare("SELECT * FROM all_events WHERE DATEDIFF(FROM_UNIXTIME(?), start) > 0"); 
$stmt->bind_param($_GET['start']); 
```

`mysql_`功能被[弃用](http://www.deprecatedphp.com/mysql)

# java - Web 服务协议（实时）

> ID：12291747
> 
> 赞同：0
> 
> 时间：2012-09-06T01:17:26.853
> 
> 标签：java, ruby-on-rails, web-services, real-time

在这种情况下，我对哪种方法最好感到有些困惑。因此，我正在使用 Ruby on Rails 构建 Web 服务。框架有点无关紧要，但我还是添加了那个细节。Web 服务基于实时模型

我目前依靠 Java 来处理实时数据，尤其是通知。所以这要么是彗星，要么是基于网络套接字的网络服务。（靠在彗星上）

我的问题是：我应该使用什么样的协议来访问 Java 服务器？

我读过 http 可能对于通知/实时设置来说太重了，有些人推荐使用纯 UDP 协议。它是否正确？

如果您需要我澄清任何事情，请告诉我！

编辑：

对于每个用户来说，通知的数量将非常重要。因为通知也将与有关他们帐户的提示相关（不能说更多）。我希望能够处理 5,000 - 10,000 个用户，他们每周都有数百个通知。通知的实时“可以”有一个滞后，但我试图尽可能少地得到。消息的大小不会很大。与典型通知的大小大致相同，因此几行文本、用户 ID 等......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T13:49:33.967

好吧，对于每周有 100 条消息的 10k 用户来说，这相当于每秒大约 1.5 条消息。不是网络崩溃。看到您控制两端的服务器，我不确定您为什么要考虑使用 http 或 web 服务。只需在服务器之间打开一个套接字连接并根据需要发送消息。

# infopath2010 - Infopath >> How to get user name for People/Group picker?

> ID：12291753
> 
> 赞同：0
> 
> 时间：2012-09-06T01:17:59.613
> 
> 标签：infopath2010

I have few people/group picker on a infopath form. It's working fine but it populates the field with username (without the domain and that's fine).

However, I need this to be "Display Name" or full name instead of user name. Now I know a long way to set this up based on hooking to userprofile web services.

If there is no out box way then I guess I can have c# code to get the name without calling the webservices. Basically, I want to minimize server/client communication.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T08:01:50.690

只需将 UserName() 作为 DisplayName 和 AccountId 的默认值。这对我行得通。

如果您仍然有问题，可以这样做： [http ://claytoncobb.wordpress.com/2009/06/21/userprofileservice-extended/](http://claytoncobb.wordpress.com/2009/06/21/userprofileservice-extended/)

# javascript - 如何在 JavaScript 中将数字表示为十六进制？

> ID：12291755
> 
> 赞同：5
> 
> 时间：2012-09-06T01:18:41.927
> 
> 标签：javascript

我正在尝试使用 JavaScript 将 DEC 数字转换为 HEX。

我要转换的数字是 28。

我试过使用：

```
function h2d(h) {return parseInt(h,16);} 
```

但是它返回 40

我也尝试过使用：

```
function d2h(d) {return d.toString(16);} 
```

但是它返回 28

最终结果应该返回 1C 但我似乎无法解决。

有谁知道我哪里出错了？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-09-06T01:30:21.207

听起来您遇到了麻烦，因为您在查找数字时输入的是字符串。尝试将您的 d2h() 代码更改为如下所示，您应该设置：

```
function d2h(d) { return (+d).toString(16); } 
```

加号 ( `+`) 是强制变量为数字的简写方法。只有 Number 的`toString()`方法会采用基数，String 的不会。此外，您的结果将是小写的，因此您可能希望使用以下命令将其强制为大写`toUpperCase()`：

```
function d2h(d) { return (+d).toString(16).toUpperCase(); } 
```

所以结果将是：

```
d2h("28") //is "1C" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T01:25:32.457

重复的问题

```
(28).toString(16) 
```

您正在制作的错误是“28”是一个字符串，而不是一个数字。你应该把它当作一个数字。人们通常不应该期望该语言能够在进行转换之前将字符串解析为整数（嗯......我想在javascript中期待另一种方式是合理的）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T01:27:41.977

所写的 d2h() 应该可以正常工作：

```
js> var d=28
js> print(d.toString(16))
1c 
```

你是怎么测试的？

此外，40 是 d2h(28) 的预期输出，因为十六进制“28”是十进制 40。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-09-07T11:08:11.433

```
let returnedHex = Number(var_value).toString(16); 
```

也有效

# deadlock - jvmti agent deadlock

> ID：12291756
> 
> 赞同：3
> 
> 时间：2012-09-06T01:18:46.227
> 
> 标签：deadlock, agent, jvmti

When I run my jvmti agent with a java program, it seems that jvm encounters a deadlock. In my jvmti agent, I create a single raw monitor in Agent_OnLoad() and enter that lock at the beginning of every callback function and exit that lock at the end of every callback functions. I don't know the reason of this deadlock. Is there any other possibilities of deadlocks in jvmti agents?

thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-01T21:45:14.783

是的，JVMTI 代理中存在死锁的可能性。[JVMTI 参考](http://docs.oracle.com/javase/1.5.0/docs/guide/jvmti/jvmti.html#RawMonitorEnter)指出：

> 同一个线程可能会多次进入监视器。线程退出监视器的次数必须与进入监视器的次数相同。如果在 OnLoad 期间（在附加线程存在之前）进入监视器并且在附加线程存在时尚未退出，则认为该进入发生在主线程上。

在这种情况下进行远程诊断可能很困难，但我建议您查看[演示 JVMTI 应用程序](http://localdoc.scusa.lsu.edu/java/5-jdk/demo/jvmti/)如何处理*原始锁*的使用。使用专用功能`enter_critical_section`和`exist_critical_section`. 也许这有帮助，否则尝试通过调试代理来找到导致死锁的回调。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-04T13:22:27.070

当多个线程同时调用 JVMTI 代理时，我遇到了同样的问题。一个线程成功调用 RawMonitorEnter 并继续。在此之后，许多其他线程调用 RawMonitorEnter 并按预期阻止。持有原始监视器的线程随后调用 RawMonitorExit，但该函数似乎没有返回，从而导致死锁。

一种解决方法是将 RawMonitorEnter/Exit 和它们之间的逻辑包装在互斥锁中。这确保了一次只有一个线程会尝试获取原始监视器。解决方法也可能完全不需要原始监视器。

# android - 如何在 createchooser 上自动选择电子邮件应用程序？

> ID：12291757
> 
> 赞同：3
> 
> 时间：2012-09-06T01:19:12.383
> 
> 标签：android, android-intent

如何自动获取/选择第一个处理指定 Intent 的应用程序，就好像用户在`createChooser()`对话框中选择了第一个选项一样。

在此示例中，选择发送电子邮件等数据的应用程序：

`final Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND); SendEmailActivity.this.startActivity(Intent.createChooser(1, "Send mail..."));`

请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T01:32:33.657

使用这个[问题的](https://stackoverflow.com/q/2695746/1443717)[答案](https://stackoverflow.com/a/2696617/1443717)，您可以获得所有有意图的应用程序的列表`android.content.Intent.ACTION_SEND`

这是我在下面编码的一个工作示例（最终在我的设备上选择了 gmail）

**公平警告 - 如果未设置电子邮件帐户，将抛出 NullPointerException 您应该对变量添加空检查`pkgAppsList`并告诉用户未找到或已设置电子邮件应用程序

```
 //set the main intent to ACTION_SEND for looking for applications that share information
    Intent intent = new Intent(Intent.ACTION_SEND, null);

    //intent.addCategory(Intent.CATEGORY_LAUNCHER); //if you want extra filters

    //filter out apps that are able to send plain text
    intent.setType("plain/text");

    //get a list of apps that meet your criteria above
    List<ResolveInfo> pkgAppsList = this.getPackageManager().queryIntentActivities( intent, PackageManager.MATCH_DEFAULT_ONLY | PackageManager.GET_RESOLVED_FILTER);

    //select the first one in the list
    ResolveInfo info = pkgAppsList.get(0);      
    String packageName = info.activityInfo.packageName;
    String className = info.activityInfo.name;

    //set the intent to luanch that specific app
    intent.setClassName(packageName, className);

    //some samples on adding more then one email address
    String aEmailList[] = { "user@fakehost.com","user2@fakehost.com" };
    String aEmailCCList[] = { "user3@fakehost.com","user4@fakehost.com"};
    String aEmailBCCList[] = { "user5@fakehost.com" };

    //all the extras that will be passed to the email app       
    intent.putExtra(android.content.Intent.EXTRA_EMAIL, aEmailList);
    intent.putExtra(android.content.Intent.EXTRA_CC, aEmailCCList);
    intent.putExtra(android.content.Intent.EXTRA_BCC, aEmailBCCList);
    intent.putExtra(android.content.Intent.EXTRA_SUBJECT, "My subject");
    intent.putExtra(android.content.Intent.EXTRA_TEXT, "My message body.");

    //start the app
    startActivity(intent); 
```

如果您想将正在调用的应用列入白名单，您可以遍历列表，检查特定包的每个包名称（例如：gmail 是“com.google.android.gm”）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-17T10:25:02.270

为了添加 StrikeForceZero 发布的内容，我更改了自动选择优先选择，以根据其包名称从列表中查找 Gmail 应用程序。为我工作，因为 Gmail 应用程序并不总是排在第一位。仍然归功于 StrikeFirstZero...我刚刚对他的代码做了一个小修改。

```
 //set the main intent to ACTION_SEND for looking for applications that share information
    Intent intent = new Intent(Intent.ACTION_SEND, null);

    //intent.addCategory(Intent.CATEGORY_LAUNCHER); //if you want extra filters

    //filter out apps that are able to send plain text
    intent.setType("plain/text");

    //get a list of apps that meet your criteria above
    List<ResolveInfo> pkgAppsList = activity.getPackageManager().queryIntentActivities( intent, PackageManager.MATCH_DEFAULT_ONLY | PackageManager.GET_RESOLVED_FILTER);

    //Cycle through list of apps in list and select the one that matches GMail's package name
    for (ResolveInfo resolveInfo : pkgAppsList) {
        String packageName = resolveInfo.activityInfo.packageName;
        String className = "";
        if(packageName.equals("com.google.android.gm")) {
            className = resolveInfo.activityInfo.name;
            intent.setClassName(packageName, className);
        }
    }

    //some samples on adding more then one email address
    String aEmailList[] = { "user@fakehost.com","user2@fakehost.com" };
    String aEmailCCList[] = { "user3@fakehost.com","user4@fakehost.com"};
    String aEmailBCCList[] = { "user5@fakehost.com" };

    //all the extras that will be passed to the email app
    intent.putExtra(android.content.Intent.EXTRA_EMAIL, aEmailList);
    intent.putExtra(android.content.Intent.EXTRA_CC, aEmailCCList);
    intent.putExtra(android.content.Intent.EXTRA_BCC, aEmailBCCList);
    intent.putExtra(android.content.Intent.EXTRA_SUBJECT, "My subject");
    intent.putExtra(android.content.Intent.EXTRA_TEXT, "My message body.");

    //start the app
    activity.startActivity(intent); 
```

# jquery - 将值传递给部分视图

> ID：12291758
> 
> 赞同：0
> 
> 时间：2012-09-06T01:19:13.527
> 
> 标签：jquery, asp.net-mvc-3, razor

我正在尝试将我的模型传递给局部视图。当它被传入时，我想设置参数的值。当我运行它时，我得到：

```
Object reference not set to an instance of the object 
```

怎么能这么说，因为我通过了这个模型？

```
@using passTextbox.Models
@model passTextbox.Models.MyViewModel

@Html.TextBoxFor(t=>t.someobject)

@{ Html.RenderAction("test", new MyViewModel() { someobject = "$('#somevalue')" });}

 public class MyViewModel
 {
        public string someobject { get; set; }
 } 
```

部分视图：

```
@model passTextbox.Models.MyViewModel
<h2>test</h2>
<script src="../../Scripts/jquery-1.5.1.min.js" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function () {
        var tb = @Model.somevalue;
        tb.val("new value");
    });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T01:50:14.547

尝试使用`Html.RenderPartial`instad of`Html.RenderAction`

```
public class MyViewModel
    {
        public string someObject { get; set; }
    } 
```

在视图中

```
@{Html.RenderPartial("partial", new MvcApplication1.Controllers.MyViewModel() { someObject = "test" });} 
```

最后在部分视图中

```
 @model MyViewModel

<h2>test</h2>
<script type="text/javascript">
    $(document).ready(function () {
        var tb ="@Model.someObject";
        alert(tb);
    });
</script> 
```

# php - 具有 size 属性的选择框是否适用于 $_POST？

> ID：12291760
> 
> 赞同：3
> 
> 时间：2012-09-06T01:19:31.710
> 
> 标签：php, html, size, forms

我相当直接地使用 SQL 和 PHP 来生成一个选择框。我最初有一个带有大小属性​​的选择框，但无法弄清楚为什么`$_POST`提交表单后总是出现未设置。最终我最终在没有`size`属性的情况下尝试了它，并且它起作用了。为了确认，我回到我最初打算的选择框，设置一个大小属性，注意到它未能设置`$_POST`变量，然后我唯一做的就是`size='10'`从标签中删除，它按预期工作。

这是具有适当属性的代码。

```
<select name='select_news' size='10'>
  <?php
    foreach($news_dates_list as $date)
    {
      echo ("<option value='".$date['month']."/".$date['day']."/".$date['year']."'>".$date['month']."/".$date['day']."/".$date['year']."</option>");
    }
  ?>
</select> 
```

提交表单并尝试访问`$_POST['select_news']`时，会生成以下错误：

> 注意：未定义的索引：第 310 行 C:\website\admin\index.php 中的 select_news。当我只删除“size='10'”部分时，它不会产生错误并按预期工作。

因此，我只是想确认选择框中的大小属性是否正确，当您尝试通过`$_POST`. 如果它不应该有这种效果，有谁知道可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T01:44:37.983

尝试将名称从 更改`select_news`为`select_news[]`，例如当您有多个具有相同名称的复选框时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T01:37:47.473

不是你的问题的答案，而是改变：

```
echo ("<option value='".$date['month']."/".$date['day']."/".$date['year']."'>".$date['month']."/".$date['day']."/".$date['year']."</option>"); 
```

至：

```
echo "<option value='{$date['month']}/{$date['day']}/{$date['year']}'>{$date['month']}/{$date['day']}/{$date['year']}</option>"; 
```

即不要将括号与echo 一起使用，并用于`{}`在带引号的字符串中插入变量，而不必不断地启动/停止字符串。

* * *

大小与返回的内容无关。别的东西正在改变。我建议两件事：

1.  看看生成的源代码——也许你以某种方式搞砸了你的引用。
2.  `print_r($_RESULT)`看看那里有什么

# windows - 适用于 x64 Windows 的 Stack Walker

> ID：12291764
> 
> 赞同：1
> 
> 时间：2012-09-06T01:19:47.850
> 
> 标签：windows, 64-bit, stack-trace

我正在尝试为我的应用程序打印堆栈跟踪。我不能使用`StackWalk64`，因为我的应用程序是随`optimization disabled`. 因为`x86`我们正在使用`strace`有人写的图书馆，`codeprex`但我没有找到类似的东西`x64`。以下是我在网上找到的`x86`.

```
#include <Windows.h>
#include <DbgHelp.h>
#include <stdio.h>

#define INVALID_FP_RET_ADDR_VALUE 0x00000000
BOOL g_fSymInit;
HANDLE g_hProcess;
BOOL DisplaySymbolDetails(DWORD dwAddress)
{
    DWORD64 displacement = 0;
    ULONG64 buffer[(sizeof(SYMBOL_INFO) +
        MAX_SYM_NAME*sizeof(TCHAR) +
        sizeof(ULONG64) - 1) /
        sizeof(ULONG64)];
    PSYMBOL_INFO pSymbol = (PSYMBOL_INFO)buffer;
    pSymbol->SizeOfStruct = sizeof(SYMBOL_INFO);
    pSymbol->MaxNameLen = MAX_SYM_NAME;
    if (SymFromAddr(g_hProcess,dwAddress,&displacement,pSymbol))
    {
        // Try to get the Module details
        IMAGEHLP_MODULE64 moduleinfo;
        moduleinfo.SizeOfStruct = sizeof(IMAGEHLP_MODULE64);
        if (SymGetModuleInfo64(g_hProcess,pSymbol->Address,&moduleinfo))
        {
            printf("%s!",moduleinfo.ModuleName);
        }
        else
        {
            printf("<ErrorModuleInfo_%d>!", GetLastError());
        }
        // now print the function name
        if (pSymbol->MaxNameLen > 0)
        {
            printf("%s",pSymbol->Name);
        }
        else
        {
            printf("<Unknown_Function>");
        }
    }
    else
    {
        printf(" <Unable to get symbol details_%d>", GetLastError());
    }
    return TRUE;
}
bool WalkTheStack()
{
    DWORD _ebp = INVALID_FP_RET_ADDR_VALUE;
    DWORD dwIPOfCurrentFunction = (DWORD)&WalkTheStack;
    // Get the current Frame pointer
    __asm
    {
        mov [_ebp], ebp
    }
    // We cannot walk the stack (yet!) without a frame pointer
    if (_ebp == INVALID_FP_RET_ADDR_VALUE)
        return false;
    printf("CurFP\t\t\tRetAddr\n");
    DWORD *pCurFP = (DWORD *)_ebp;
    BOOL fFirstFP = TRUE;
    while (pCurFP != INVALID_FP_RET_ADDR_VALUE)
    {
        // pointer arithmetic works in terms of type pointed to. Thus,
        // "+1" below is equivalent of 4 bytes since we are doing DWORD
        // math.
        DWORD pRetAddrInCaller = (*((DWORD *)(pCurFP + 1)));
        printf("%p\t\t%p ",pCurFP, (DWORD *)pRetAddrInCaller);
        if (g_fSymInit)
        {
            if (fFirstFP)
            {
                fFirstFP = FALSE;
            }
            DisplaySymbolDetails(dwIPOfCurrentFunction);
            // To get the name of the next function up the stack,
            // we use the return address of the current frame
            dwIPOfCurrentFunction = pRetAddrInCaller;
        }
        printf("\n");
        if (pRetAddrInCaller == INVALID_FP_RET_ADDR_VALUE)
        {
            // StackWalk is over now...
            break;
        }
        // move up the stack to our caller
        DWORD pCallerFP = *((DWORD *)pCurFP);
        pCurFP = (DWORD *)pCallerFP;
    }
    return true;
}

int main ( int argc, char **argv) {
    g_fSymInit = FALSE;
    g_hProcess = GetCurrentProcess();
    if (!SymInitialize(g_hProcess, NULL,TRUE)) {
        printf("Unable to initialize symbols!\n\n");    
    } else {
        g_fSymInit = TRUE;
    }
    SymSetOptions(SYMOPT_UNDNAME|SYMOPT_INCLUDE_32BIT_MODULES|SYMOPT_ALLOW_ABSOLUTE_SYMBOLS);
    WalkTheStack();
    return 0;
} 
```

需要进行哪些更改才能使其正常工作`x64`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T01:22:28.810

您要做的是展开堆栈。而不是解决这个丑陋的烂摊子，我只会告诉你所涉及的一般原则。在 x86 和 x86_64 上，ebp/rsp 和 esp/rsp 寄存器形成内存位置的隐式链接列表。每个 esp/rsp 指向当前栈帧的顶部，每个 ebp/rbp 指向前一个栈帧的底部。有了这些知识，遍历框架就相当简单了。

# calculator - quad.rb:8：语法错误，意外的 tIDENTIFIER，期待 ')'

> ID：12291770
> 
> 赞同：-1
> 
> 时间：2012-09-06T01:21:41.047
> 
> 标签：calculator, quadratic

当试图编写一个二次方程的代码来计算 x 时，我收到一个错误，说括号有问题 这是我为这个计算器输入的代码

```
puts "A"
a = gets.to_f
puts "B"
b = gets.to_f
puts "C"
c = gets.to_f

d = (-b+ ((b**2 - 4ac)**1/2))/2a
f = (-b- ((b**2 - 4ac)**1/2))/2a
puts d
puts f 
```

我在尝试运行它时出现了这个错误

```
quad.rb:8: syntax error, unexpected tIDENTIFIER, expecting ')'
d = (-b+ ((b**2 - 4ac)**1/2))/2a
                     ^
quad.rb:8: syntax error, unexpected tIDENTIFIER, expecting $end 
```

有什么帮助吗？非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T01:23:47.050

您在很多地方都缺少*。例如 4 * a * c 而不是 4ac

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-01T19:36:15.280

```
puts "I will solve a quadratic equation"
print "What is the value of a in ax^2+bx+c=0?"
a = gets.to_f;
print "What is the value of b in ax^2+bx+c=0?"
b = gets.to_f;
print "What is the value of c in ax^2+bx+c=0?"
c = gets.to_f;

d = b*b - 4*a*c
d = Math.sqrt(d)

e= -b/(2*a)

f= d/(2*a)

puts "The value of first root (x1) is #{e+f}"
puts "The value of second root (xe) is #{e-f}" 
```

# javascript - 独立的离线 html5 网络应用程序？

> ID：12291772
> 
> 赞同：2
> 
> 时间：2012-09-06T01:21:45.353
> 
> 标签：javascript, css, ipad, html

如果我为 iPad 编写一个 html5 网络应用程序，并计划在用户离线时使用本地存储......有没有办法可以将所有内容打包成一个 zip 文件并通过电子邮件发送然后自己部署它？

您可以在不在线和下载的情况下获得离线 iPad 网络应用程序吗？

像这样的东西...... [http://sixrevisions.com/web-development/html5-iphone-app/](http://sixrevisions.com/web-development/html5-iphone-app/) 然后将其作为一个包发送给其他人？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T01:26:44.090

不是默认的，没有。iOS（出于某种原因）在应用程序自己的沙箱之外没有“本地存储”的概念，这就是为什么 Mobile Safari 无法下载或上传文件（除了照片）。

解决方案是使用像 PhoneGap 这样的平台，它允许您使用 HTML5 平台来创建类似原生的应用程序（也适用于 Android 和 WinPho）。它很容易上手，所以我建议你试一试。

# c# - 设置和部署后调试？

> ID：12291773
> 
> 赞同：0
> 
> 时间：2012-09-06T01:21:47.590
> 
> 标签：c#, winforms, visual-studio-2010, setup-deployment

在项目上完成设置和部署后，我还可以添加到我的应用程序并对其进行调试吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T05:09:04.883

恕我直言，只有在模式下构建程序集时，您才能使用`Debug`您的应用程序。模式程序集将不包含调试所需的信息，因此您将无法对其进行调试。`Debug``Release`

此外，如果您尝试远程调试，您应该阅读[此](http://msdn.microsoft.com/en-us/library/bt727f1t.aspx)

还有一点：您应该可以使用已部署的代码（可能您已经“标记”了它）以便能够调试应用程序。如果您在部署后修改了代码，您可能无法重现/发现问题，您会在使用应用程序时看到这些问题。

希望我足够清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T01:28:39.707

yes you can just write this code `System.Diagnostics.Debugger.Launch();`

# python - 从 Django ImageField.file 制作缩略图并转换回图像

> ID：12291776
> 
> 赞同：4
> 
> 时间：2012-09-06T01:22:08.037
> 
> 标签：python, django, python-imaging-library

所以我在 Django 中有一个表单，用于将图像上传到 ImageField。这很好用。然后我将 request.FILES['image'] 传递给一个名为 MakeThumbnail 的函数以进行进一步处理。

MakeThumbnail 不能很好地工作。我从一系列 StackOverflow 线程中组装了这个，但我认为我缺少一些关键概念。这是我的代码。

```
 def MakeThumbnail(file):
        img = Image.open(file)
        thumbnail = img.thumbnail((128, 128), Image.ANTIALIAS)
        thumbnailString = StringIO.StringIO(thumbnail)
        newFile = ContentFile(thumbnailString)
        return newFile 
```

堆栈跟踪说我在这条线上失败了：newFile = ContentFile(thumbnailString)。它给了我以下错误：预期的读取缓冲区，找到实例

不过，在查看局部变量之后，我想我可能会在 thumbnail = img.thumbnail((128, 128), Image.ANTIALIAS) 失败：

```
thumbnailString : <StringIO.StringIO instance at 0x0000000003B39748>
file : <InMemoryUploadedFile: Desert.jpg (image/jpeg)>
thumbnail : None
img : <PIL.JpegImagePlugin.JpegImageFile image mode=RGB size=128x96 at 0x3B25C08> 
```

请注意，缩略图是无。它应该包含一些东西。有人对我有一些提示吗？

谢谢你！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-06T23:47:46.517

非常感谢您的帮助，Jan Spurny。在你的帮助下我想通了。因此，当将 img 保存到 thumbnailString 时，需要发生一些事情。上面的代码实际上会产生错误，因为我们将实例传递给 ContentFile 而不是缓冲区。没关系，我们只需要调用 thumbnailString.read()。但是 thumbnailString.read() 返回 ''。原来我们需要事先做 thumbnailString.seek(0) 。但这也不起作用！

最终，我能够使用 InMemoryUploadedFile 将图像文件恢复为 Django 文件。

这是代码的样子，从头到尾：

```
from django.core.files.uploadedfile import InMemoryUploadedFile
import StringIO
def MakeThumbnail(file):
    img = Image.open(file)
    img.thumbnail((128, 128), Image.ANTIALIAS)
    thumbnailString = StringIO.StringIO()
    img.save(thumbnailString, 'JPEG')
    newFile = InMemoryUploadedFile(thumbnailString, None, 'temp.jpg', 'image/jpeg', thumbnailString.len, None)
    return newFile 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T09:48:59.057

从 PIL 文档中关于`Image.thumbnail`：

> 修改图像以包含其自身的缩略图版本，不大于给定大小。此方法计算适当的缩略图大小以保留图像的方面，调用草稿方法来配置文件阅读器（如果适用），最后调整图像大小。

这意味着您的缩略图在 中`img`，而不是在`thumbnail`变量中，因为`Image.thumbnail`不返回任何内容（因此`None`）

另一个错误是`PIL.Image`把`StringIO`. 你最好把`save`它变成`StringIO`

所以你的代码应该看起来更像这样：

```
def MakeThumbnail(file):
    img = Image.open(file)
    img.thumbnail((128, 128), Image.ANTIALIAS)
    thumbnailString = StringIO.StringIO()
    img.save(thumbnailString, 'PNG')
    newFile = ContentFile(thumbnailString)
    return newFile 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T04:51:32.363

我认为您需要将图像的完整路径传递给您的函数，而不是路径的实例。

```
EX:
models.py
logo = models.ImageField(upload_to=os.path.join(MEDIA_ROOT, "logo"), null=True, default=None)

U need to pass
def MakeThumbnail(logo.path): 
```

# c++ - 通过引用传递的函数接受对带有 operator() 的类的引用

> ID：12291785
> 
> 赞同：2
> 
> 时间：2012-09-06T01:23:47.257
> 
> 标签：c++, pass-by-reference

所以，我想得越多，它的合法性就越奇怪。当我将 memoizer 仿函数的一个实例传递给它的构造函数时，编译器不会抱怨。在 memoizer 模板中应该如何读取“f”？似乎使用相同的类型声明`OutputT (&f) InputT`，它可以通过引用来引用函数，或者——我认为这是非法的——对成员函数的引用，即`operator()`类的实例`memoizer<int,int>`。是否应该将 f 解读为“对已`operator()`定义事物的引用”？

```
#include <map>
#include <iostream>

template<typename OutputT, typename InputT>
class memoizer
{
private:
    OutputT (&f) (InputT);
    std::map<InputT,OutputT> dat;

public:
    memoizer( OutputT (&f) ( InputT ) ) : f(f) { }

    OutputT operator()( InputT t )
    {
        if( dat.count(t)==0 )
            dat[t] = f(t);
        return dat[t];
    }
};

int fib( int n )
{
    if( n < 2 ) return 1;
    return fib( n-2 ) + fib( n-1 );
}

int main()
{
    memoizer<int,int> fib_memo( fib );
    memoizer<int,int> fib_memo_memo( fib_memo );    

    std::cout << fib( 12 ) << "\n";
    std::cout << fib_memo( 12 ) << "\n";
    std::cout << fib_memo_memo( 12 ) << "\n";
} 
```

我的意思是，不要误会我的意思：我很高兴它有效，只是看起来有点“神奇”。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T02:08:13.440

你在欺骗自己。`fib_memo_memo`不是`f`成员变量包含`fib_memo`. 您的初始化程序实际上使用了隐式复制构造函数，因此`fib_memo_memo`只是`fib_memo`. 您可以通过添加自己验证这一点

```
memoizer(const memoizer &m) = delete; 
```

你会开始收到类似的错误

```
error: call to deleted constructor of 'memoizer<int, int>'
    memoizer<int,int> fib_memo_memo( fib_memo ); 
```

# php - 如何在 echo statement.code 中插入 php 代码（substr）

> ID：12291787
> 
> 赞同：0
> 
> 时间：2012-09-06T01:24:20.640
> 
> 标签：php, mysql, phpmyadmin

`$title`我在phpmyadmin中有一个“文件名”列（等于）。是否可以插入`substr`...

这是我的代码：

```
echo "   
<tr>
<td><img src =\"$pic_id\" style =\"width:100%;\"></td>
<td width=\"20%\">".$rows['username']."</td>       
<TD width=\"40px\"><a href=\"$f\"><b>
<php substr($title, 0, 35); ?>
<br><font color=\"red\">$log</font></b></a></td>
</tr>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T01:26:48.943

只是因为我希望你离开那个可怕的代码：

```
echo "   
<tr>
<td><img src =\"$pic_id\" style =\"width:100%;\"></td>
<td width=\"20%\">".$rows['username']."</td>       
<TD width=\"40px\"><a href=\"$f\"><b>
".substr($title, 0, 35)."
<br><font color=\"red\">$log</font></b></a></td>
</tr>"; 
```

# python - 将特定信息从 python shell 保存到 txt

> ID：12291788
> 
> 赞同：0
> 
> 时间：2012-09-06T01:24:21.643
> 
> 标签：python

是否可以将输出到 python shell 的信息保存到 txt 文件中。

我正在运行 Python 2.7.2 版

这是外壳中显示的内容。

```
Enter numbers 1... 22,34,35,40,55
Enter numbers 2... 12,14,34,47,49
Enter numbers 3... 1,4,10,19,30
Section 1
The number seqeuce is # 0 0 1 2 1 1 # <-- 
Section 2                         
The number seqeuce is # 0 2 0 1 2 0 # <-- This is what I would like to save to txt.
Section 3                         
The number seqeuce is # 2 2 0 1 0 0 # <-- 
```

我环顾四周，了解如何读取、写入和附加文件，但不是直接从 shell 中读取。

我将不胜感激任何解决此问题的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T01:33:42.847

它在 shell 中是完全一样的，但是你基本上一次只运行一行代码，而不是一起运行一个文件。否则，您可以复制/粘贴结果...不太确定这是否是您要查找的内容，如果不是，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T02:37:01.907

```
 >> numbers = input("Enter numbers")
  >> with open('yourfile.txt', 'w') as f:
       f.write('The number sequence is {0}'.format(numbers.replace(',', ' ')) 
```

如果输入是`22,34,35,40,55`，输出到文件将是`The number sequence is 22 34 35 40 55`

您只需在 shell 中键入每个命令。当您运行`.py`脚本时，解释器只是逐行评估您的代码，就像您在其中键入命令时外壳所做的那样。

# android - 为 Eclipse 安装旧版本的 Google 插件

> ID：12291791
> 
> 赞同：0
> 
> 时间：2012-09-06T01:25:00.207
> 
> 标签：android, google-app-engine, eclipse-plugin

如何安装旧版本的 Google Plugin for Eclipse (2.6)。在 eclipse 中使用软件安装时，只有最新版本的插件可用。

我需要安装以前的版本，因为在最新版本的 GPE 中删除了一些功能，特别是 android 连接的应用程序引擎项目。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T01:59:23.680

Have you tried the sdk downloading page, marking the box to "All"? [http://code.google.com/p/googleappengine/downloads/list?can=1&q=&colspec=Filename+Summary+Uploaded+ReleaseDate+Size+DownloadCount](http://code.google.com/p/googleappengine/downloads/list?can=1&q=&colspec=Filename+Summary+Uploaded+ReleaseDate+Size+DownloadCount)

# php - 使用 php 和 javascript 从 kml 文件创建海拔图

> ID：12291792
> 
> 赞同：2
> 
> 时间：2012-09-06T01:25:03.180
> 
> 标签：php, javascript, google-maps-api-3, kml, elevation

我正在尝试使用谷歌海拔服务来创建一个海拔配置文件，就像这样：

[https://google-developers.appspot.com/maps/documentation/javascript/examples/elevation-paths](https://google-developers.appspot.com/maps/documentation/javascript/examples/elevation-paths)

这是Javascript：

```
var elevator;
var map;
var chart;
var infowindow = new google.maps.InfoWindow();
var polyline;

// The following path marks a general path from Mt.
// Whitney, the highest point in the continental United
// States to Badwater, Death Vallet, the lowest point.
var whitney = new google.maps.LatLng(36.578581, -118.291994);
var lonepine = new google.maps.LatLng(36.606111, -118.062778);
var owenslake = new google.maps.LatLng(36.433269, -117.950916);
var beattyjunction = new google.maps.LatLng(36.588056, -116.943056);
var panamintsprings = new google.maps.LatLng(36.339722, -117.467778);
var badwater = new google.maps.LatLng(36.23998, -116.83171);

// Load the Visualization API and the columnchart package.
google.load("visualization", "1", {packages: ["columnchart"]});

function initialize() {
  var mapOptions = {
    zoom: 8,
    center: lonepine,
    mapTypeId: 'terrain'
  }
  map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);

  // Create an ElevationService.
  elevator = new google.maps.ElevationService();

  // Draw the path, using the Visualization API and the Elevation service.
  drawPath();
}

function drawPath() {

  // Create a new chart in the elevation_chart DIV.
  chart = new google.visualization.ColumnChart(document.getElementById('elevation_chart'));

  var path = [ whitney, lonepine, owenslake, panamintsprings, beattyjunction, badwater];

  // Create a PathElevationRequest object using this array.
  // Ask for 256 samples along that path.
  var pathRequest = {
    'path': path,
    'samples': 256
  }

  // Initiate the path request.
  elevator.getElevationAlongPath(pathRequest, plotElevation);
}

// Takes an array of ElevationResult objects, draws the path on the map
// and plots the elevation profile on a Visualization API ColumnChart.
function plotElevation(results, status) {
  if (status == google.maps.ElevationStatus.OK) {
    elevations = results;

    // Extract the elevation samples from the returned results
    // and store them in an array of LatLngs.
    var elevationPath = [];
    for (var i = 0; i < results.length; i++) {
      elevationPath.push(elevations[i].location);
    }

    // Display a polyline of the elevation path.
    var pathOptions = {
      path: elevationPath,
      strokeColor: '#0000CC',
      opacity: 0.4,
      map: map
    }
    polyline = new google.maps.Polyline(pathOptions);

    // Extract the data from which to populate the chart.
    // Because the samples are equidistant, the 'Sample'
    // column here does double duty as distance along the
    // X axis.
    var data = new google.visualization.DataTable();
    data.addColumn('string', 'Sample');
    data.addColumn('number', 'Elevation');
    for (var i = 0; i < results.length; i++) {
      data.addRow(['', elevations[i].elevation]);
    }

    // Draw the chart using the data within its DIV.
    document.getElementById('elevation_chart').style.display = 'block';
    chart.draw(data, {
      width: 640,
      height: 200,
      legend: 'none',
      titleY: 'Elevation (m)'
    });
  }
} 
```

我有一个 KML 文件。它的内容是：

```
<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2" xmlns:gx="http://www.google.com/kml/ext/2.2" xmlns:kml="http://www.opengis.net/kml/2.2" xmlns:atom="http://www.w3.org/2005/Atom">
<Document>
    <name>test.kml</name>
    <Style id="inline10">
        <LineStyle>
            <color>ff0000ff</color>
            <width>2</width>
        </LineStyle>
        <PolyStyle>
            <fill>0</fill>
        </PolyStyle>
    </Style>
    <Style id="inline00">
        <LineStyle>
            <color>ff0000ff</color>
            <width>2</width>
        </LineStyle>
        <PolyStyle>
            <fill>0</fill>
        </PolyStyle>
    </Style>
    <StyleMap id="inline">
        <Pair>
            <key>normal</key>
            <styleUrl>#inline00</styleUrl>
        </Pair>
        <Pair>
            <key>highlight</key>
            <styleUrl>#inline10</styleUrl>
        </Pair>
    </StyleMap>
    <Placemark>
        <name>4.6m run</name>
        <styleUrl>#inline</styleUrl>
        <LineString>
            <tessellate>1</tessellate>
            <coordinates>
                -118.3701083851859,33.86613514741887,0 -118.3835891373556,33.86595745112309,0 -118.3837603618944,33.86620604860725,0 -118.3860197295395,33.865106678845,0 -118.3853630075581,33.86344608835453,0 -118.392210401906,33.86235962069966,0 -118.3930072160544,33.86482879105449,0 -118.3952920372758,33.86473719683653,0 -118.3955064755973,33.86544254118038,0 -118.3978346563853,33.87119781418026,0 -118.4006823491955,33.8746256060688,0 -118.395927369356,33.8729025811578,0 -118.3929679702478,33.87284041135064,0 -118.3912963149097,33.87280457074664,0 -118.3873145130551,33.86670833356382,0 -118.3845601044409,33.86794790820593,0 -118.3840431481755,33.86710880429249,0 -118.3704571100188,33.86705385780814,0 
            </coordinates>
        </LineString>
    </Placemark>
</Document>
</kml> 
```

google 开发者博客上的示例从特定的 lat 和 lon 值创建了一条路径。我已经在“坐标”下的 kml 文件中有这些值。我想创建一个显示海拔剖面的图表。

此外，我能够使用“simplexml_load_file”解析 kml 文件以获取坐标字符串：

```
-118.3701083851859,33.86613514741887,0 -118.3835891373556,33.86595745112309,0 -118.3837603618944,33.86620604860725,0 -118.3860197295395,33.865106678845,0 -118.3853630075581,33.86344608835453,0 -118.392210401906,33.86235962069966,0 -118.3930072160544,33.86482879105449,0 -118.3952920372758,33.86473719683653,0 -118.3955064755973,33.86544254118038,0 -118.3978346563853,33.87119781418026,0 -118.4006823491955,33.8746256060688,0 -118.395927369356,33.8729025811578,0 -118.3929679702478,33.87284041135064,0 -118.3912963149097,33.87280457074664,0 -118.3873145130551,33.86670833356382,0 -118.3845601044409,33.86794790820593,0 -118.3840431481755,33.86710880429249,0 -118.3704571100188,33.86705385780814,0 
```

我不知道我是否走在正确的道路上。

我想我需要更换这个

```
var path = [ whitney, lonepine, owenslake, panamintsprings, beattyjunction, badwater]; 
```

使用 KML 中的纬度、经度值。

我对谷歌 api 还很陌生。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T04:40:16.653

使用 geoxml3 解析 KML 文件，找到其中的第一个 LineString 并绘制该路径的高度：

[http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_elevation_linkto.html](http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_elevation_linkto.html)

使用 KML 文件中的路线：

[http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_elevation_linkto.html?filename=ShaunWright_kml.xml](http://www.geocodezip.com/geoxml3_test/v3_geoxml3_kmltest_elevation_linkto.html?filename=ShaunWright_kml.xml)

# php - 如何使用 API URL 并获取要显示的 XML 信息

> ID：12291793
> 
> 赞同：0
> 
> 时间：2012-09-06T01:25:03.227
> 
> 标签：php, xml, api, url, xml-parsing

我有一个网站，目前有一个可供收养的“可用宠物”列表。

这个网站最近开始在 petfinder.com 上列出他们的宠物 - petfinder 有一个 API，我可以使用它通过 URL 获取我想要的宠物。

我的问题是 - 我如何将这些结果整合到“可用宠物”页面中？

我试过这个：

```
<?php
$homepage = file_get_contents('http://api.petfinder.com/shelter.getPets?key=ourkey&id=ourid&status=A&output=full');
echo $homepage;
?> 
```

但它没有在页面上给我任何结果。结果是 XML 格式的——现在很好——我可以稍后再研究如何用 PHP 格式化这些东西。现在我只是想让结果显示在页面上。

有任何想法吗？我敢肯定这是一个简单的，我只是没有很多这方面的经验，我正在努力学习。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T01:35:40.093

在我的 php 中有一段不好的语法：

```
<?php
$homepage = file_get_contents('http://api.petfinder.com/shelter.getPets?key=ourkey&id=ourid&status=A&output=full');
echo $homepage;
?> 
```

一旦我纠正了我遇到的语法错误，就可以正常工作了。弄清楚如何在 PHP 中使用 XML :-D

# java - 将自动增量从默认值重置为大数字的问题

> ID：12291797
> 
> 赞同：2
> 
> 时间：2012-09-06T01:25:51.083
> 
> 标签：java, mysql, hibernate, spring-jdbc

我有一个 MySQL 表，为库存监控站点命名 Invoice，invoice_number 是 bigint(19) AUTO_INCREMENT 字段。

当前 AUTO_INCREMENT 值为 1。

客户希望它从 50000 开始 invoice_number。使用以下脚本重置 ALTER TABLE INVOICES AUTO_INCREMENT = 50000; 当我编写一个插入脚本在 SQLDBX 中插入数据时，它将 invoice_number 从 50000 开始。但是当我尝试使用应用程序（Web 应用程序）插入记录时，invoice_number 值从 1 开始。我们正在使用Spring-JDBC 模板将数据插入 mysql 数据库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T15:55:50.343

问题在于 Invoice 的 Hibernate HBM 映射。Invoice Number 的生成器类是 Increment。

```
<id name="invoiceNumber" column="INVOICE_NUMBER">
   <generator class="increment"/>
</id> 
```

通过将生成器类修改为身份，它可以工作。

```
<id name="invoiceNumber" column="INVOICE_NUMBER">
    <generator class="identity"/>
</id> 
```

有关更多详细信息，请检查 [Hibernate questions with Auto Increment ID MYSQL 5](https://stackoverflow.com/questions/1838520/hibernate-problems-with-auto-increment-id-mysql-5) 另请检查此 [Hibernate not respecting MySQL auto_increment primary key field](https://stackoverflow.com/questions/582526/hibernate-not-respecting-mysql-auto-increment-primary-key-field?rq=1)

# ruby-on-rails - Rails/Paperclip/S3 如何一次上传多张照片

> ID：12291798
> 
> 赞同：0
> 
> 时间：2012-09-06T01:25:52.463
> 
> 标签：ruby-on-rails, upload, amazon-s3, amazon-web-services, paperclip

过去几天我在谷歌上搜索了这方面的教程，但我完全迷路了/卡住了。

我的 rails 应用程序使用回形针和 S3。我有一个图像表，用户可以在其中上传单个图像，该图像将属于一个相册。

我怎样才能得到这个，以便用户可以一次上传多张照片？

这是我的代码：[https ://github.com/SirJustinWhite/PhotoCloud](https://github.com/SirJustinWhite/PhotoCloud)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T04:45:12.750

好消息是您已经将它用于一个项目。让它为多个项目工作就像一遍又一遍地打同一个工作点一样容易。有许多现有的解决方案可以实现这一点。我更喜欢使用的是[https://github.com/blueimp/jQuery-File-Upload](https://github.com/blueimp/jQuery-File-Upload)。它适用于 Rails，事实上，这是一个使用相同工具完成您想要的示例 - [https://github.com/tors/jquery-fileupload-rails-paperclip-example](https://github.com/tors/jquery-fileupload-rails-paperclip-example)。

# .net - .net 将 xml 反序列化为多个已知对象之一

> ID：12291801
> 
> 赞同：4
> 
> 时间：2012-09-06T01:26:10.033
> 
> 标签：.net, xml, object, serialization, types

尝试使用“.net 反序列化 xml 一种多种已知对象类型”的各种组合进行搜索......但没有找到任何有意义的东西，我现在在这里。

我得到了可能发送给我的 5 个不相关对象中的 1 个（每个对象的架构不同），我需要将该 xml 反序列化为正确的对象。当然，对象的数量/类型会增长；-) 有没有办法让反序列化器将 xml 内容与对象匹配，也许是反射（只是猜测）？除了 xml 内容本身之外，我没有得到围绕序列化对象的任何外部 xml 包装器告诉我它是什么。这些是来自不同系统的消息，通知我事件、状态更改、新订单……

此时我正在考虑蛮力，xml阅读器寻找与我的已知项目之一唯一匹配的识别属性，然后从那里切换到使用适当的类型进行反序列化。这似乎不太优雅。

任何指导表示赞赏，G

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T01:40:53.370

使用以下内容：

```
Stream xml; // Contains the XML to deserialize
XmlSerializer xmlSerializer = new XmlSerializer(
    typeof(MyClass1), 
    new []{ typeof(MyClass2), typeof(MyClass3) }); // Add additional classes here
object obj = xmlSerializer.Deserialize(xml);

if(obj Is MyClass1)
{
    // Do something
}
else if (obj is MyClass2)
{
    // Do something
}
else if (obj is MyClass3)
{
    // Do something
}
// And so on for other classes 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-25T00:07:40.757

如果每种类型的对象的 XML 根元素名称（和/或命名空间）不同，则可以使用[XmlSerializer.CanDeserialize](https://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.candeserialize(v=vs.110).aspx)对照架构检查根元素名称。

```
XmlSerializer appleSerializer = new XmlSerializer(typeof(Apple));
XmlSerializer bananaSerializer = new XmlSerializer(typeof(Banana));
XmlSerializer carrotSerializer = new XmlSerializer(typeof(Carrot));

XmlReader reader = XmlReader.Create(file);

if (appleSerializer.CanDeserialize(reader))
{
    Apple a = (Apple)appleSerializer.Deserialize(reader);
    // ...
}
else if (bananaSerializer.CanDeserialize(reader))
{
    Banana b = (Banana)bananaSerializer.Deserialize(reader);
    // ...
}
else if (carrotSerializer.CanDeserialize(reader))
{
    Carrot c = (Carrot)carrotSerializer.Deserialize(reader);
    // ...
} 
```

# install4j - 如何在 OS X 中更改用户和密码对话框文本？

> ID：12291803
> 
> 赞同：0
> 
> 时间：2012-09-06T01:26:21.043
> 
> 标签：install4j

OX S 中有“请求权限”对话框。

![在此处输入图像描述](../Images/8a9a6b78b6b2c245f956099ceee5d6fc.png)

有“install4j을(를)변경해야합니다。~~~~~~”

我想更改文本“产品名称”而不是“install4j”

如何在 OS X 中更改用户和密码对话框文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T01:30:12.297

I'm not an OS X developer, but I understand the text for the authentication dialog is retrieved from the installer app's metadata. I'm guessing that you're using install4j and want to customise the user's experience.

However I found a few pages when googling for "install4j os x installer name". Try checking this page out: [http://resources.ej-technologies.com/install4j/help/api/com/install4j/api/context/Context.html](http://resources.ej-technologies.com/install4j/help/api/com/install4j/api/context/Context.html)

# ms-access - MS Access 2007：如何计算查询中同一表中其他列的列？

> ID：12291811
> 
> 赞同：0
> 
> 时间：2012-09-06T01:27:47.757
> 
> 标签：ms-access, ms-access-2007

在`Orders`表中我有`Item Price`和`Item Count`字段。我需要一个带有额外列`Total Price`的查询：执行查询时保留：`Item Price`* `Item Count`。

我已经在查询生成器中创建了一个，但是当我打开它时，会出现一个对话框询问`Total Price`应该计算并自动显示的参数（我并不是要将它作为参数传递给查询）。也许下面的查询语法不正确，或者有更好的方法来完成这项工作：

```
SELECT Orders.[Item Price], Orders.[Item Count], [Item Count]*[Item Price] AS [Total Price]
FROM Orders; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T18:25:59.003

我看不出你的语法有什么问题。您要从中提取的表格中是否已经有一个名为“总价格”的列？

# c# - WPf cannot fully display my controls

> ID：12291813
> 
> 赞同：0
> 
> 时间：2012-09-06T01:28:09.527
> 
> 标签：c#, wpf, controls, tabcontrol, scrollviewer

I have relectively complex gui, but it cannot display my the whole controls(in the code, it cannot display "EMAIL", "FORWARD",...) on the bottom. what's wrong with this code? Is it because the "Window", "TabControl" or "ScrollViewer".

Thank you so much in advance!

## the code is as below:

```
<Window x:Class="WpfApplication1.Window1"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    ShowInTaskbar="False" WindowStartupLocation="CenterOwner" 
    SizeToContent="Height" Title="Window1">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition />
            <RowDefinition />
        </Grid.RowDefinitions>
        <TabControl Name="tabControl1" Grid.Row="0">
            <TabItem Header="A">
                <Grid Margin="5,5,5,5">
                    <StackPanel>
                        <Grid>
                            <TabControl>
                                <TabItem Header="A1">
                                    <Grid Margin="5,5,5,5">
                                        <Grid.RowDefinitions>
                                            <RowDefinition />
                                            <RowDefinition />
                                            <RowDefinition Height="10"  />
                                            <RowDefinition/>
                                        </Grid.RowDefinitions>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="auto" />
                                            <ColumnDefinition Width="auto" />
                                            <ColumnDefinition Width="auto" />
                                        </Grid.ColumnDefinitions>
                                        <StackPanel Name="spG11" Grid.Row="0" Grid.Column="0" Margin="5,5,5,5">
                                            <Grid>
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="25"/>
                                                    <RowDefinition Height="25" />
                                                    <RowDefinition Height="25" />
                                                    <RowDefinition Height="25" />
                                                    <RowDefinition Height="25" />
                                                </Grid.RowDefinitions>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="130"/>
                                                    <ColumnDefinition Width="150"/>
                                                </Grid.ColumnDefinitions>
                                                <TextBlock Grid.Row="0" Grid.Column="0" Text="A11" VerticalAlignment="Center" />
                                                <TextBox Grid.Row="0" Grid.Column="1" HorizontalAlignment="Stretch" VerticalAlignment="Center" />
                                                <TextBlock Grid.Row="1" Grid.Column="0" Text="A12" VerticalAlignment="Center" />
                                                <TextBox Grid.Row="1" Grid.Column="1"  HorizontalAlignment="Stretch" VerticalAlignment="Center" />
                                                <TextBlock Grid.Row="2" Grid.Column="0" Text="A13" VerticalAlignment="Center" />
                                                <TextBox Grid.Row="2" Grid.Column="1"  HorizontalAlignment="Stretch" VerticalAlignment="Center" />
                                                <TextBlock Grid.Row="3" Grid.Column="0" Text="A14" VerticalAlignment="Center" />
                                                <TextBox Grid.Row="3" Grid.Column="1" HorizontalAlignment="Stretch" VerticalAlignment="Center" />
                                                <TextBlock Grid.Row="4" Grid.Column="0" Text="A15" VerticalAlignment="Center" />
                                                <TextBox Grid.Row="4" Grid.Column="1" HorizontalAlignment="Stretch" VerticalAlignment="Center" />
                                            </Grid>
                                        </StackPanel>
                                        <StackPanel Grid.Row="0" Grid.Column="1" Grid.ColumnSpan="2" Margin="5,5,5,5">
                                            <Grid>
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="25" />
                                                    <RowDefinition Height="25" />
                                                    <RowDefinition Height="25" />
                                                    <RowDefinition Height="25" />
                                                    <RowDefinition Height="25" />
                                                </Grid.RowDefinitions>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="130"/>
                                                    <ColumnDefinition Width="150"/>
                                                </Grid.ColumnDefinitions>
                                                <TextBlock Grid.Row="0" Grid.Column="0" Text="A21" VerticalAlignment="Center" />
                                                <TextBox Grid.Row="0" Grid.Column="1"  HorizontalAlignment="Stretch" VerticalAlignment="Center" />
                                                <TextBlock Grid.Row="1" Grid.Column="0" Text="A22" VerticalAlignment="Center" />
                                                <TextBox Grid.Row="1" Grid.Column="1" HorizontalAlignment="Stretch" VerticalAlignment="Center" />
                                                <TextBlock Grid.Row="2" Grid.Column="0" Text="A23" VerticalAlignment="Center" />
                                                <TextBox Grid.Row="2" Grid.Column="1"  HorizontalAlignment="Stretch" VerticalAlignment="Center" />
                                                <TextBlock Grid.Row="3" Grid.Column="0" Text="A24" VerticalAlignment="Center" />
                                                <ComboBox Grid.Row="3" Grid.Column="1"  IsEnabled="False" HorizontalAlignment="Stretch" VerticalAlignment="Center">
                                                    <ComboBoxItem Content="False" IsSelected="True" IsEnabled="False"></ComboBoxItem>
                                                    <ComboBoxItem Content="True"></ComboBoxItem>
                                                </ComboBox>
                                                <TextBlock Grid.Row="4" Grid.Column="0" Text="A25" VerticalAlignment="Center" />
                                                <ComboBox Grid.Row="4" Grid.Column="1" IsEnabled="False" HorizontalAlignment="Stretch" VerticalAlignment="Center">
                                                    <ComboBoxItem Content="False" IsSelected="True" IsEnabled="False"></ComboBoxItem>
                                                    <ComboBoxItem Content="True"></ComboBoxItem>
                                                </ComboBox>
                                            </Grid>
                                        </StackPanel>
                                        <Border BorderThickness="1" BorderBrush="Gray" Grid.Row="1" Grid.Column="0">
                                            <StackPanel >
                                                <StackPanel>
                                                    <Grid>
                                                        <Grid.RowDefinitions>
                                                            <RowDefinition Height="*" />
                                                            <RowDefinition Height="*" />
                                                        </Grid.RowDefinitions>
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="40"/>
                                                            <ColumnDefinition Width="105"/>
                                                            <ColumnDefinition Width="120"/>
                                                        </Grid.ColumnDefinitions>
                                                        <TextBox Height="25" HorizontalAlignment="Stretch" IsReadOnly="True" Text="X1" TextAlignment="Center" Background="LightBlue" Grid.Row="0" Grid.Column="0"/>
                                                        <TextBox HorizontalAlignment="Stretch" Text="X2" IsReadOnly="True" TextAlignment="Center" Background="LightBlue" Grid.Row="0" Grid.Column="1"/>
                                                        <TextBox Height="25" HorizontalAlignment="Stretch" IsReadOnly="True" Text="X3" TextAlignment="Center" Background="LightBlue" Grid.Row="0" Grid.Column="2"/>
                                                    </Grid>
                                                </StackPanel>
                                                    <ScrollViewer HorizontalAlignment="Left" VerticalScrollBarVisibility="Visible"  Height="150">
                                                    <StackPanel>
                                                        <Grid >
                                                            <Grid.RowDefinitions>
                                                            </Grid.RowDefinitions>
                                                            <Grid.ColumnDefinitions>
                                                                <ColumnDefinition Width="40"/>
                                                                <ColumnDefinition Width="105"/>
                                                                <ColumnDefinition Width="120"/>
                                                            </Grid.ColumnDefinitions>
                                                        </Grid>
                                                    </StackPanel>
                                                </ScrollViewer>
                                            </StackPanel>
                                        </Border>
                                        <StackPanel Grid.Row="1" Grid.Column="1" VerticalAlignment="Center" >
                                            <Button  Margin="2,2,2,2" Content="ADD"  Width="50"/>
                                            <Button  Margin="2,2,2,2" Content="DEL"  Width="50" />
                                        </StackPanel>

                                        <Border BorderThickness="1" BorderBrush="Gray" Grid.Row="1" Grid.Column="2">
                                            <StackPanel HorizontalAlignment="Left">
                                                <StackPanel>
                                                    <Grid>
                                                        <Grid.RowDefinitions>
                                                            <RowDefinition Height="*" />
                                                            <RowDefinition Height="*" />
                                                        </Grid.RowDefinitions>
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="50"/>
                                                            <ColumnDefinition Width="50"/>
                                                            <ColumnDefinition Width="50"/>
                                                            <ColumnDefinition Width="50"/>
                                                        </Grid.ColumnDefinitions>
                                                        <TextBox Height="25" HorizontalAlignment="Stretch" IsReadOnly="True" Text="Y1" TextAlignment="Center" Background="LightBlue" Name="VaAmplitude" Grid.Row="0" Grid.Column="0"/>
                                                        <TextBox HorizontalAlignment="Stretch" Text="Y2" IsReadOnly="True" TextAlignment="Center" Background="LightBlue" Name="VaPhase" Grid.Row="0" Grid.Column="1"/>
                                                        <TextBox Height="25" HorizontalAlignment="Stretch" IsReadOnly="True" Text="Y3" TextAlignment="Center" Background="LightBlue" Name="VbAmplitude" Grid.Row="0" Grid.Column="2"/>
                                                        <TextBox HorizontalAlignment="Stretch" Text="Y4" IsReadOnly="True" TextAlignment="Center" Background="LightBlue" Name="VbPhase" Grid.Row="0" Grid.Column="3"/>
                                                    </Grid>
                                                </StackPanel>
                                                <ScrollViewer HorizontalAlignment="Left" VerticalScrollBarVisibility="Visible" Height="150">
                                                    <Grid >
                                                        <Grid.RowDefinitions>
                                                        </Grid.RowDefinitions>
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="50"/>
                                                            <ColumnDefinition Width="50"/>
                                                            <ColumnDefinition Width="50"/>
                                                            <ColumnDefinition Width="50"/>
                                                        </Grid.ColumnDefinitions>
                                                    </Grid>
                                                </ScrollViewer>
                                            </StackPanel>
                                        </Border>

                                        <StackPanel Grid.Row="3" Grid.Column="0" Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center">
                                            <CheckBox Content="SELECT" IsChecked="True"/>
                                            <TextBlock Width="12" />
                                            <CheckBox Content="FORWARD" IsChecked="False"/>
                                        </StackPanel>
                                        <StackPanel Grid.Row="3" Grid.Column="2" Orientation="Horizontal" HorizontalAlignment="Center">
                                            <Button Content="LIST" />
                                        </StackPanel>
                                    </Grid>
                                </TabItem>

                            </TabControl>
                        </Grid>
                    </StackPanel>
                </Grid>
            </TabItem>
            <!--  -->
            <TabItem Header="B">
                <Grid Margin="5,5,5,5">
                    <StackPanel>
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition />
                                <RowDefinition />
                            </Grid.RowDefinitions>
                            <TabControl Grid.Row="0">
                                <TabItem Header="B1">
                                    <Grid Margin="5,5,5,5">
                                        <Grid.RowDefinitions>
                                            <RowDefinition />
                                            <RowDefinition />
                                            <RowDefinition Height="10"  />
                                            <RowDefinition/>
                                        </Grid.RowDefinitions>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="auto" />
                                            <ColumnDefinition Width="auto" />
                                            <ColumnDefinition Width="auto" />
                                            <ColumnDefinition Width="auto" />
                                        </Grid.ColumnDefinitions>
                                        <StackPanel Name="spU11" Grid.Row="0" Grid.Column="0" Margin="5,5,5,5">
                                            <Grid>
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="25"/>
                                                    <RowDefinition Height="25" />
                                                    <RowDefinition Height="25" />
                                                    <RowDefinition Height="25" />
                                                    <RowDefinition Height="25" />
                                                    <RowDefinition Height="25" />
                                                </Grid.RowDefinitions>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="130"/>
                                                    <ColumnDefinition Width="150"/>
                                                </Grid.ColumnDefinitions>
                                                <TextBlock Grid.Row="0" Grid.Column="0" Text="B11" VerticalAlignment="Center" />
                                                <TextBox Grid.Row="0" Grid.Column="1" HorizontalAlignment="Stretch" VerticalAlignment="Center" />
                                                <TextBlock Grid.Row="1" Grid.Column="0" Text="B12" VerticalAlignment="Center" />
                                                <TextBox Grid.Row="1" Grid.Column="1" HorizontalAlignment="Stretch" VerticalAlignment="Center" />
                                                <TextBlock Grid.Row="2" Grid.Column="0" Text="B13" VerticalAlignment="Center" />
                                                <TextBox Grid.Row="2" Grid.Column="1"  HorizontalAlignment="Stretch" VerticalAlignment="Center" />
                                                <TextBlock Grid.Row="3" Grid.Column="0" Text="B14" VerticalAlignment="Center" />
                                                <TextBox Grid.Row="3" Grid.Column="1" HorizontalAlignment="Stretch" VerticalAlignment="Center" />
                                                <TextBlock Grid.Row="4" Grid.Column="0" Text="B15" VerticalAlignment="Center" />
                                                <TextBox Grid.Row="4" Grid.Column="1" HorizontalAlignment="Stretch" VerticalAlignment="Center" />
                                                <TextBlock Grid.Row="5" Grid.Column="0" Text="B16" VerticalAlignment="Center" />
                                                <TextBox Grid.Row="5" Grid.Column="1" HorizontalAlignment="Stretch" VerticalAlignment="Center" />
                                            </Grid>
                                        </StackPanel>
                                        <StackPanel Grid.Row="0" Grid.Column="1" Grid.ColumnSpan="2" Margin="5,5,5,5">
                                            <Grid>
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="25" />
                                                    <RowDefinition Height="25" />
                                                    <RowDefinition Height="25" />
                                                    <RowDefinition Height="25" />
                                                    <RowDefinition Height="25" />
                                                    <RowDefinition Height="25" />
                                                </Grid.RowDefinitions>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="130"/>
                                                    <ColumnDefinition Width="150"/>
                                                </Grid.ColumnDefinitions>
                                                <TextBlock Grid.Row="0" Grid.Column="0" Text="B21" VerticalAlignment="Center" />
                                                <TextBox Grid.Row="0" Grid.Column="1" HorizontalAlignment="Stretch" VerticalAlignment="Center" />
                                                <TextBlock Grid.Row="1" Grid.Column="0" Text="B22" VerticalAlignment="Center" />
                                                <TextBox Grid.Row="1" Grid.Column="1" HorizontalAlignment="Stretch" VerticalAlignment="Center" />
                                                <TextBlock Grid.Row="2" Grid.Column="0" Text="B23" VerticalAlignment="Center" />
                                                <TextBox Grid.Row="2" Grid.Column="1"  HorizontalAlignment="Stretch" VerticalAlignment="Center" />
                                                <TextBlock Grid.Row="4" Grid.Column="0" Text="B24" VerticalAlignment="Center" />
                                                <TextBox Grid.Row="4" Grid.Column="1" HorizontalAlignment="Stretch" VerticalAlignment="Center" />
                                                <TextBlock Grid.Row="5" Grid.Column="0" Text="B25" VerticalAlignment="Center" />
                                                <TextBox Grid.Row="5" Grid.Column="1" HorizontalAlignment="Stretch" VerticalAlignment="Center" />
                                            </Grid>
                                        </StackPanel>
                                        <Border BorderThickness="1" BorderBrush="Gray" Grid.Row="1" Grid.Column="0" Grid.ColumnSpan="2">
                                            <StackPanel>
                                                <StackPanel>
                                                    <Grid>
                                                        <Grid.RowDefinitions>
                                                            <RowDefinition Height="*" />
                                                            <RowDefinition Height="*" />
                                                        </Grid.RowDefinitions>
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="60"/>
                                                            <ColumnDefinition Width="172"/>
                                                            <ColumnDefinition Width="170"/>
                                                        </Grid.ColumnDefinitions>
                                                        <TextBox Height="25" HorizontalAlignment="Stretch" IsReadOnly="True" Text="Q1" TextAlignment="Center" Background="LightBlue" Grid.Row="0" Grid.Column="0"/>
                                                        <TextBox HorizontalAlignment="Stretch" Text="Q2" IsReadOnly="True" TextAlignment="Center" Background="LightBlue" Grid.Row="0" Grid.Column="1"/>
                                                        <TextBox Height="25" HorizontalAlignment="Stretch" IsReadOnly="True" Text="Q3" TextAlignment="Center" Background="LightBlue" Grid.Row="0" Grid.Column="2"/>
                                                    </Grid>
                                                </StackPanel>
                                                <ScrollViewer HorizontalAlignment="Left" VerticalScrollBarVisibility="Visible" Height="150">
                                                    <Grid>
                                                        <Grid.RowDefinitions>
                                                        </Grid.RowDefinitions>
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="60"/>
                                                            <ColumnDefinition Width="172"/>
                                                            <ColumnDefinition Width="170"/>
                                                        </Grid.ColumnDefinitions>
                                                    </Grid>
                                                </ScrollViewer>
                                            </StackPanel>
                                        </Border>
                                        <StackPanel Grid.Row="1" Grid.Column="2" VerticalAlignment="Center" >
                                            <Button Margin="2,2,2,2" Content="ADD"  Width="60"/>
                                            <Button  Margin="2,2,2,2" Content="DEL"  Width="60" />
                                        </StackPanel>
                                        <StackPanel Grid.Row="3" Grid.ColumnSpan="3">
                                            <CheckBox Content="FORWARD" IsChecked="True" />
                                        </StackPanel>

                                    </Grid>
                                </TabItem>

                            </TabControl>

                            <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Center">
                                <StackPanel Grid.Row="3" Grid.Column="0" Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center">
                                    <TextBlock Text="EMAIL" />
                                    <TextBox Width="80"/>
                                </StackPanel>
                                <TextBlock Width="30" />
                                <StackPanel Grid.Row="3" Grid.Column="0" Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center">
                                    <TextBlock Text="PAT NO" />
                                    <TextBox Width="80"/>
                                </StackPanel>
                            </StackPanel>
                        </Grid>
                    </StackPanel>
                </Grid>
            </TabItem>
        </TabControl>
        <StackPanel Grid.Row="1" HorizontalAlignment="Stretch" Name="testItemLabelValue" Visibility="Hidden">
            <TextBox Margin="0,1,0,1" HorizontalAlignment="Stretch" />
            <StackPanel x:Name="labelling"></StackPanel>
        </StackPanel>
        <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Center" VerticalAlignment="Center" Height="50">
            <Button Content="YES" Width="70" Height="25" HorizontalAlignment="Right" Margin="0,0,20,0" />
            <TextBox Margin="0,1,0,1" HorizontalAlignment="Stretch" Visibility="Hidden" />
            <Button Content="CANCEAL" Width="70" Height="25" HorizontalAlignment="Left"/>
        </StackPanel>
    </Grid>
</Window> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T01:37:15.493

您只需要指定顶部网格的高度，如下所示：

```
<Grid.RowDefinitions>
    <RowDefinition Height="Auto" />
    <RowDefinition Height="Auto" />
</Grid.RowDefinitions> 
```

我正在尝试你的用户界面，现在它可以工作了。

PS 虽然这可以让您的 UI 正常工作，但我会鼓励您阅读有关[用户控件](http://msdn.microsoft.com/en-us/library/system.windows.controls.usercontrol.aspx)的内容，并尝试通过使用它们（分而治之）来降低整个 UI 的复杂性。

# c++ - classes depend on each other

> ID：12291814
> 
> 赞同：3
> 
> 时间：2012-09-06T01:28:22.780
> 
> 标签：c++, oop, class

consider these c++ fragments:

foo.h:

```
class foo
{
bar myobj;
}; 
```

bar.h:

```
class bar
{
foo *yourobj;
}; 
```

other file:

```
#include "foo.h" //because foo.h is included first bar will not be defined in foo.h
#include "bar.h"

foo container;

bar blah; 
```

I know I didn't bother to write constructors and all that but you get the idea. Anyone know a way to remedy this situation?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-06T01:31:08.490

有几种常见的技术可以做到这一点。

首先，尽可能使用前向声明。其次，如果循环依赖的一部分依赖于类中的函数，则使该类继承自提供这些函数声明的“接口”类。最后，使用 PIMPL（指向实现细节的指针）。无需在类声明中列出所有字段，只需包含指向实际类数据的指针。

例如在`foo.h`

```
class foo_members;

class foo
{
    foo_members* opaque;
}; 
```

而在`foo.cpp`

```
#include "bar.h"
class foo_members{
    bar mybar;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T01:44:39.000

另一种方法是只制作一个声明所有类的标头。

[类.h]

```
class foo;
class bar;

class foo
{
    bar *FoosBar;
    int FooFunc(void);
};

class bar
{
    foo *BarsFoo;
    bool BarFunc(void);
} 
```

[foo.cpp]

```
#include "classes.h"

int foo::FooFunc(void)
{
    // Reference FoosBar somewhere here or something maybe
    return 7;
} 
```

[bar.cpp]

```
#include "classes.h"

bool bar::BarFunc(void)
{
    // Reference BarsFoo somewhere here or something maybe
    return true;
} 
```

# ruby - How do I rearrange specific characters in a string using regexp in ruby?

> ID：12291817
> 
> 赞同：0
> 
> 时间：2012-09-06T01:29:42.350
> 
> 标签：ruby, regex, replace, gsub

How do I rearrange the characters in '3 4 +' to '3 + 4' using regexp? I've written the following:

```
puts ('3 4 +').gsub(/\d \d \W/, '\1 \3 \2') 
```

But nothing is being printed. What am I doing wrong?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T01:36:50.687

您需要通过`()`.

```
'3 4 +'.gsub /(\d+) (\d+) (\W)/, '\1 \3 \2' 
```

# tcl - How long does a expect/tcl script execute

> ID：12291819
> 
> 赞同：1
> 
> 时间：2012-09-06T01:29:53.040
> 
> 标签：tcl, expect

I have written a telnet script to remote control a cisco switch, and it takes me about 2-3 minitus to get start, even though i write a short script with a single proc, it also take 2-3 minutes to start. The proc is as below.

```
    proc test_proc {} {
        puts "123"
    }
    test_proc

```

Is anybody who has faced this noisy problem?
Looking forward your helps...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T19:33:54.820

## 计时脚本

要计算执行某段 Tcl 代码需要多长时间，请使用该`time`命令。它的第一个参数是要测量的脚本。（它还需要一个可选的第二个参数，即要使用的迭代次数；它默认为 1，但更多的迭代次数对于测量快速运行的事物可能很有用。）

```
proc test_proc {} {
    puts "123"
}
puts [time {
    test_proc
}]
# I got "48 microseconds per iteration" when I tried it; YMMV... 
```

请注意，测量过程定义没有什么意义（除非您对其`proc`自身的行为非常感兴趣，但这相当书呆子）。

还有一个名为 的 Unix 系统命令`time`，它的工作方式类似（以概念方式），但测量程序运行的时间。它的输出在系统之间可能会有很大差异；毕竟它真的是为了人类可读的。

## 优化解释器启动时间

更令人担忧的是一个简单的脚本需要多长时间才能启动。2-3 分钟是计算术语的绝对*年龄*。您运行的机器是否内存不足？（大量的分页会大大降低程序速度。）或者您可能将所有库安装在一个奇怪的位置（`/usr/lib`由于目录结构的大小，当安装它的库时，Tcl 的包加载对问题特别敏感）。还有一些 Tcl 版本（尽管*没有当前版本*）在文件名解析和缓存中存在严重错误，这些错误往往会在启动时造成巨大的性能损失；您使用的是什么确切版本的 Tcl（以及 Expect）？使用命令获取确切的 Tcl 版本`info patchlevel`(`tcl version`仅从 Tcl 8.5 开始具有足够的精度）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-11T08:05:56.150

我意识到这是旧的，但我在寻找答案时偶然发现，所以我想我会在这里发布这个，以便下一个偶然发现它。

建议的时间函数确实有效，但不适用于完整的脚本，仅适用于函数。

我找到了一种使用毫秒时钟时间的方法，我用它来测量运行时间（秒数会不准确）

```
set start [clock clicks -milliseconds]

# all your code

set end [clock clicks -milliseconds]
set runtime [expr {$end - $start}]
puts "Runtime ${runtime}ms" 
```

# x509certificate - 如何使用 Web 应用程序的智能卡中包含的私钥对 XML 进行签名？

> ID：12291824
> 
> 赞同：0
> 
> 时间：2012-09-06T01:30:38.290
> 
> 标签：x509certificate, private-key, xml-signature, signedxml

我正在寻找一种解决方案，使用包含在 Web 应用程序的 USB 令牌（智能卡等）中的不可导出的私钥（这需要用户输入通知密码/秘密密码以使用它创建哈希）来签署 XML。我已经制作了 ac# 类库来做到这一点，但显然代码是在服务器端执行的，所以我无法通过互联网访问客户端的 usbtoken/智能卡，除非它插入服务器 pc（所以我的解决方案可能是安装在我客户的本地网络中，并且 usbtoken 插入服务器的 usb。它今天的工作方式就是这样，但我想更改它以便客户在他的机器上使用它的令牌）

我已经使用 SignedXml、X509Certificates 和其他类创建了一个代码来实现这一点，但我正在寻找 silverlight 类库中的等价物来封装所有这些东西并在客户端执行它，但不幸的是 SignedXml 不能在 Silverlight 中使用（不存在..）。

我已经成功地创建了一个 ActiveX，但我的解决方案现在只能在 Internet Explorer/Windows 中运行，并且由于我的业务逻辑，它不是很容易维护。

任何人都可以帮助我吗？任何建议都非常受欢迎。

如果我可以将我的 activex 解决方案移植到 silverlight，或者如果可以使用可以在其他浏览器/操作系统中执行的其他 MS 技术来做到这一点。

抱歉英语不好，不是母语人士。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T06:06:56.173

Java 小程序是比 ActiveX 更好的选择。

Silverlight 不会让您访问证书存储，并且它的开发已经停止（Silverlight 5 正式是最后一个版本）。

我们公司为分布式密码学提供即用型解决方案，其中包括用于客户端活动的 ActiveX、Java 小程序和 Flash 模块。[此答案](https://stackoverflow.com/questions/10656100/signing-pdfs-on-a-server-document-using-a-signature-from-the-user/10656679#10656679)中详细讨论了此解决方案。

# python - 为什么 Python 的 Decimal 函数默认为 54 位？

> ID：12291825
> 
> 赞同：6
> 
> 时间：2012-09-06T01:30:48.627
> 
> 标签：python, decimal

输入后

```
from decimal import *
getcontext().prec = 6
Decimal (1) / Decimal (7) 
```

我得到了价值

```
Decimal('0.142857') 
```

但是，如果我输入`Decimal (1.0/7)`，我会得到

```
Decimal('0.142857142857142849212692681248881854116916656494140625') 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-06T01:53:24.733

1.0 / 7 将二进制浮点数计算为 17 位精度。这发生在*Decimal**构造*函数看到它之前：

```
>>> d = 1.0 / 7
>>> type(d)
<type 'float'>
>>> d.as_integer_ratio()
(2573485501354569, 18014398509481984) 
```

二进制小数 2573485501354569 / 18014398509481984 与使用 53 位精度的二进制浮点数一样接近。它不完全是 1/7，但非常接近。

然后 Decimal 构造函数将二进制小数转换为所需的尽可能多的位置，以获得精确的十进制等效值。您看到的结果就是您在评估 2573485501354569 / 18014398509481984 时得到的结果：

```
>>> from decimal import Decimal, getcontext
>>> getcontext().prec = 100
>>> Decimal(2573485501354569) / Decimal(18014398509481984)
Decimal('0.142857142857142849212692681248881854116916656494140625') 
```

**学习点 1：** 二进制浮点将二进制分数计算到 53 位精度。必要时对结果进行四舍五入。

**学习点 2：** Decimal*构造*函数将二进制浮点数无损转换为小数（无舍入）。这往往会导致比您预期的更多位数的精度（请参阅[小数常见问题解答](http://docs.python.org/library/decimal.html#decimal-faq)中的第 6 个问题）。

**学习点3：**十进制模块旨在将所有数字视为*精确*。只有计算结果会被四舍五入到上下文精度。二进制浮点输入被精确地转换为十进制，并且在您使用数字进行计算之前不会应用上下文精度（有关详细信息，请参阅十进制常见问题解答中的最终问题和答案）。

**执行摘要：** 在将数字交给十进制模块之前不要进行二进制浮点除法。让它以您想要的精度完成工作。

希望这可以帮助 ：-）

# android - 我应该在钛中使用什么“字体大小”测量值？

> ID：12291826
> 
> 赞同：0
> 
> 时间：2012-09-06T01:31:03.793
> 
> 标签：android, ios, titanium

鉴于它适用于 android 和 ios 设备，并且我希望屏幕在不同的屏幕尺寸/分辨率上保持一致？

我现在正在使用字体大小，但是 android 模拟器显示的内容与实际的 android 设备显示的内容之间存在巨大差异。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T06:08:04.600

试试这个，你可以不用任何测量（dpi 或 px）。这是有效的。再见，您也可以根据您的要求使用（dpi 或 px）。

```
var name    =   Ti.UI.createLabel({
    backgroundColor : "#e3e3e3",
    text        : data_ary[z].name,
    height      : "40",
    left        : "70",
    width       : "auto",
    color       : "#2c2c2c",
    font        : {fontSize : 18,fontWeight: "bold"},
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T11:26:47.177

所以我的问题（现在已解决）有点……错了？我注意到我在使用`fontSize`时没有真正说明这意味着什么。

我真的应该注意到我没有使用`fontSize` *任何*大小单位。根据理查德的建议，我使用单位“sp”，例如：

字体：{fontSize：'14sp'}

# eclipse - Eclipse Juno/MyLyn 不在同步视图中显示更改集

> ID：12291834
> 
> 赞同：1
> 
> 时间：2012-09-06T01:32:52.593
> 
> 标签：eclipse, egit, mylyn

我是 MyLyn 的新手，我真的很想使用更改集自动管理功能。所以我所做的是我通过 git 共享一个项目，然后创建一个新任务，激活它，进行一些更改，打开同步视图并同步。现在我应该可以看到我的变更集了，对吧？但是假设允许我选择更改集模式的下拉按钮仅显示“所有模型”、“工作区”、“Java 工作区”、“Git 提交”。没有“更改集”选项。

顺便说一句，我确实在同步首选项/模型中切换了更改集。那么我在这里错过了什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T18:03:13.860

首先，尝试从项目的上下文菜单中使用*Team->Synchronize Workspace*，这样更容易确保您真正显示更改。

如果这不会导致任何差异，那么您可能缺少 git 的 Mylyn 连接器。Mylyn 本身会跟踪您的活动，但要使用 egit（或 subversion，或...），您还需要安装“Mylyn 版本连接器：git”，可能还需要安装“Mylyn 上下文连接器：团队支持”。

Mylyn (Juno) 更新站点是[http://download.eclipse.org/mylyn/releases/juno](http://download.eclipse.org/mylyn/releases/juno)。

# php - PHP $_SESSION 变量不会取消设置

> ID：12291835
> 
> 赞同：4
> 
> 时间：2012-09-06T01:33:01.377
> 
> 标签：php, session, variables, unset

抱歉重复了一个问题，我在这个论坛上看到了其中一些，但没有一个回复对我有用......

我正在使用 php 会话构建基本登录，我是新手...

login.php 验证 html 登录表单并开始一个会话，设置变量：`$_SESSION['login']`和`$_SESSION['id]`，

然后每个需要有效登录的页面都使用`require 'session.php';`它检查`$_SESSION['valid']`变量并在没有正确登录变量的情况下重定向用户。问题是当我注销时，我设置的会话变量都不会取消。

现在，我的 logout.php 文件使用了几乎所有方法来销毁我已经能够在网上找到的变量，但实际上没有人会这样做。

所以每当我注销时，我仍然可以访问“私人”页面。

另请注意：我已经尝试过使用 oa 会话名称 ex：`session_start();`那不起作用，所以现在我正在使用`session_start("user");`

另请注意：我没有使用 cookie。

以下是我提到的文件：

* * *

登录.php

* * *

```
$email=$_POST['email-log']; $pass=$_POST['password-log'];

$i=-1;

do
{$i++; $path="users/".$i.".json";
$file=  file_get_contents($path);
$x=json_decode($file,true);
} while($x['email']!=$email);
$id=$i;
$truepass=$x['pass'];

$errors=0;
$hash=hash('sha256',$pass);
if($hash != $truepass){$errors=$errors+1;}

if($errors==0){
        session_start("user");
        $_SESSION['login']="valid";
        $_SESSION['id']=$id;

    header('Location: loginlanding.php');}

else{header('Location: front.php?error=y');} 
```

* * *

会话.php

* * *

```
session_start("user"); if($_SESSION['login'] !== "valid") {header('Location: front.php?needto=login');} 
```

* * *

注销.php

* * *

```
unset($_SESSION); unset($_SESSION['login']); unset($_SESSION['id']); session_unset("user"); $_SESSION=array(); session_destroy("user"); header('Location: front.php?logged=out'); 
```

* * *

欢迎任何和所有的回复，我提前感谢你，还请注意，我是一般登录的新手，所以也欢迎任何关于加强安全性的建议。我计划让它更安全，但首先我需要启动并运行这个基本功能。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-06T01:34:44.213

你永远不应该`unset($_SESSION)`。

清除`$_SESSION`变量的最简单方法是`$_SESSION = Array();`

但是，您也可以使用以下方法进行迭代`unset`：

```
foreach(array_keys($_SESSION) as $k) unset($_SESSION[$k]); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-06T01:36:27.290

令人惊讶的是，在您首先取消设置对会话的**唯一**引用*之后，*您尝试做的事情有多少。直接来自手册：

 **> **警告**
> 
> 不要取消设置整体[*`$_SESSION`*](http://www.php.net/manual/en/reserved.variables.session.php)，**`unset($_SESSION)`**因为这将禁用通过[*`$_SESSION`*](http://www.php.net/manual/en/reserved.variables.session.php)超全局注册会话变量。
> 
> [http://php.net/manual/en/function.session-unset.php](http://php.net/manual/en/function.session-unset.php)

您正在取消`$_SESSION`设置，因此您对超级全局的其他数组的取消设置`$_SESSION`没有注册，将它们留在浏览器的临时 cookie 中。`session_unset()`如果您尝试删除**所有**会话变量，请改用。否则，不要**取消设置**会话全局，而是取消设置要删除的每个单独的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-12-12T17:27:59.693

我的工作示例（请注意，您必须开始通话）

```
<?php
    session_start();
    session_unset();
    session_destroy();
    header('location: ./');
?> 
```**

# hibernate - 在spring mvc和hibernate中将动态数据保存到数据库

> ID：12291838
> 
> 赞同：0
> 
> 时间：2012-09-06T01:33:27.287
> 
> 标签：hibernate, jstl, dynamic-data

我有一个只有一行的表。用户可以添加或删除行（使用 javascript 动态添加）..

如何将在行中输入的数据发送到数据库，并且当用户将来回来查看数据时也应该检索相同的数据..使用休眠进行映射..使用弹簧表单标签和模型属性..

只需要简要了解如何使用休眠将动态数据发送到数据库

任何建议表示赞赏...在此先感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T10:22:13.383

看看这篇关于 spring+hibernate 集成的帖子。有很多这些技术使用的例子。

[http://www.mkyong.com/spring/maven-spring-hibernate-mysql-example/](http://www.mkyong.com/spring/maven-spring-hibernate-mysql-example/)

**编辑：** 我认为简单的方法是：

1) 从表中检索数据并使用 JQuery 通过 Ajax 发送，看看[这个例子](https://stackoverflow.com/questions/5004233/jquery-ajax-post-example)。

2) 使用 Servlet 获取 JSON 数据，使用 json-lib 将其转换为对象，这里有一些来自官方页面的[片段。](http://json-lib.sourceforge.net/snippets.html)

3) 以 json 格式返回数据，并[确保](https://stackoverflow.com/questions/2010990/how-do-you-return-a-json-object-from-a-java-servlet)使用正确的“application/json”内容类型。

如果您计划在应用程序的各种场景中发送 ajax 数据，请考虑使用[Jersey](http://jersey.java.net/)或[Restlet](http://www.restlet.org/)之类的框架通过 RESTFUL 服务发送 JSON 数据来实现服务器端组件，而不仅仅是使用 servlet。

# xpath - XPath 中的未知错误

> ID：12291840
> 
> 赞同：1
> 
> 时间：2012-09-06T01:33:39.787
> 
> 标签：xpath, websphere-7

我们的一个 Web 应用程序已经在我们的生产环境中运行了很长时间，最近它在处理大量事务时遇到了一个奇怪的错误。我们无法弄清楚问题的根本原因是什么，但我们在之前的版本 WebSphere 6 中发现了一些类似的问题，这些问题与应用服务器使用的 Xalan 版本中的一个错误有关。我们的应用程序服务器实际上是 WebSphere 7，除了它不再使用 Xalan 之外，它应该已经修复了。我们的应用程序也没有嵌入 Xalan jar。要修复它，我们只需重新启动应用程序本身。一个重要的注意事项是文档正在被缓存 (docs.get(tableName)) 并被重用于执行 XPath 评估。我们这样做是为了避免每次解析文档的成本。

应用程序代码是

```
 Document doc = null;
        try {
            doc = docs.get(tableName);

            if (doc == null)
                return null;

            XPathFactory xFactory = XPathFactory.newInstance();
            XPath xpath = xFactory.newXPath();
            XPathExpression expr = xpath.compile(toUpper(xPathQuery));
            Object result = expr.evaluate(doc, XPathConstants.NODESET);

            return (NodeList) result;
        } catch (XPathExpressionException e) {
            logger.error("Error executing XPath", e);
        } 
```

错误堆栈在这里

```
javax.xml.transform.TransformerException: Unknown error in XPath.
at java.lang.Throwable.<init>(Throwable.java:67)
at javax.xml.transform.TransformerException.<init>(Unknown Source)
at org.apache.xpath.XPath.execute(Unknown Source)
at org.apache.xpath.jaxp.XPathExpressionImpl.evaluate(Unknown Source)
Caused by: java.lang.NullPointerException
at org.apache.xerces.dom.ElementNSImpl.getPrefix(Unknown Source)
at org.apache.xml.dtm.ref.dom2dtm.DOM2DTM.processNamespacesAndAttributes(Unknown Source)
at org.apache.xml.dtm.ref.dom2dtm.DOM2DTM.nextNode(Unknown Source)
at org.apache.xml.dtm.ref.DTMDefaultBase._nextsib(Unknown Source)
at org.apache.xml.dtm.ref.DTMDefaultBase.getNextSibling(Unknown Source)
at org.apache.xml.dtm.ref.DTMDefaultBaseTraversers$ChildTraverser.next(Unknown Source)
at org.apache.xpath.axes.AxesWalker.getNextNode(Unknown Source)
at org.apache.xpath.axes.AxesWalker.nextNode(Unknown Source)
at org.apache.xpath.axes.WalkingIterator.nextNode(Unknown Source)
at org.apache.xpath.axes.NodeSequence.nextNode(Unknown Source)
at org.apache.xpath.axes.NodeSequence.runTo(Unknown Source)
at org.apache.xpath.axes.NodeSequence.setRoot(Unknown Source)
at org.apache.xpath.axes.LocPathIterator.execute(Unknown Source)
... 16 more 
```

这是我提到的类似问题。 [http://www-01.ibm.com/support/docview.wss?uid=swg1PK42574](http://www-01.ibm.com/support/docview.wss?uid=swg1PK42574)

塔肯斯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T10:18:38.823

许多人没有意识到 DOM 不是线程安全的（即使您只是在进行读取）。如果要缓存 DOM 对象，请确保同步对它的所有访问。

坦率地说，这使得 DOM 不适合这种应用程序。我知道我有偏见，但我建议切换到 Saxon，它的原生树实现不仅比 DOM 快得多，而且是线程安全的。一位用户最近在推特上说，当他们进行此切换时，性能提高了 100 倍。

# sql - 将包含 XML 的 VARCHAR 列转换为表

> ID：12291844
> 
> 赞同：0
> 
> 时间：2012-09-06T01:33:49.987
> 
> 标签：sql, sql-server, sql-server-2008

我正在使用 VMware vCenter 5，并希望创建一个已创建的 DRS 规则的快速报告。以下是数据的摘录：

```
<obj xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="urn:vim25" versionId="5.0" xsi:type="ArrayOfClusterRuleInfo">
  <ClusterRuleInfo xsi:type="ClusterAffinityRuleSpec">
    <key>1</key>
    <enabled>true</enabled>
    <name>SQL Servers</name>
    <vm type="VirtualMachine" xsi:type="ManagedObjectReference">vm-100</vm>
    <vm type="VirtualMachine" xsi:type="ManagedObjectReference">vm-200</vm>
    <vm type="VirtualMachine" xsi:type="ManagedObjectReference">vm-300</vm>
  </ClusterRuleInfo>
  <ClusterRuleInfo xsi:type="ClusterAntiAffinityRuleSpec">
    <key>2</key>
    <enabled>true</enabled>
    <name>Oracle DBs</name>
    <vm type="VirtualMachine" xsi:type="ManagedObjectReference">vm-1000</vm>
    <vm type="VirtualMachine" xsi:type="ManagedObjectReference">vm-2000</vm>
  </ClusterRuleInfo>
</obj> 
```

请注意，每个规则的 VM 数量可能不同。

我无法将此 XML 数据转换为表，因此我尝试使用此查询仅定位名称（在标签内）：

```
SELECT ref.value('name[1]', 'varchar(200)') as [enabled]
FROM @data.nodes('/obj/ClusterRuleInfo') data( ref ) 
```

它不返回任何数据。我发现如果我删除 and 行，它可以工作，但我不知道为什么。我相信这是因为 SQL Server 不理解 XML 架构（或类似的东西 - 我不是 XML 专家）。

最后，我希望看到这样的表格：

```
Name           VM
-----------   ----
SQL Servers    100
SQL Servers    200
SQL Servers    300
Oracle DBs    1000
Oracle DBs    2000 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T01:59:00.140

Your XML uses a namespace, so you need the `WITH XMLNAMESPACES` clause:

```
declare @data xml;
set @data = '
<obj xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="urn:vim25" versionId="5.0" xsi:type="ArrayOfClusterRuleInfo">
  <ClusterRuleInfo xsi:type="ClusterAffinityRuleSpec">
    <key>1</key>
    <enabled>true</enabled>
    <name>SQL Servers</name>
    <vm type="VirtualMachine" xsi:type="ManagedObjectReference">vm-100</vm>
    <vm type="VirtualMachine" xsi:type="ManagedObjectReference">vm-200</vm>
    <vm type="VirtualMachine" xsi:type="ManagedObjectReference">vm-300</vm>
  </ClusterRuleInfo>
  <ClusterRuleInfo xsi:type="ClusterAntiAffinityRuleSpec">
    <key>2</key>
    <enabled>true</enabled>
    <name>Oracle DBs</name>
    <vm type="VirtualMachine" xsi:type="ManagedObjectReference">vm-1000</vm>
    <vm type="VirtualMachine" xsi:type="ManagedObjectReference">vm-2000</vm>
  </ClusterRuleInfo>
</obj>';

WITH XMLNAMESPACES('urn:vim25' AS ns)
SELECT 
  ref.value('../ns:name[1]','nvarchar(256)') AS Name, 
  STUFF(ref.value('.','nvarchar(256)'),1,3,'') AS VM
FROM @data.nodes('/ns:obj/ns:ClusterRuleInfo/ns:vm') data( ref ); 
```

# iphone - 在情节提要中更精确地更改元素的大小

> ID：12291845
> 
> 赞同：-2
> 
> 时间：2012-09-06T01:34:06.493
> 
> 标签：iphone, ios, xcode, storyboard

我正在开发 Xcode 4.4 版。在情节提要中找不到更精确地更改元素（UIView）大小的方法。我可以拖动元素的锚点，但是当元素很小时很难。有没有办法将元素的宽度和高度更改一个像素？

编辑：开发环境是 iOS（不是 Mac OS）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T02:58:36.137

您可以在尺寸检查器中编辑视图的位置和尺寸。选择要修改的视图，然后从菜单栏中选择“视图”>“实用工具”>“尺寸检查器”。

![尺寸检查员](../Images/e4cd07883c551c187cd1304903d112f9.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T02:53:16.693

在 Interface Builder 中，您应该能够使用检查器来编辑对象的属性。

查看此链接，特别是第 7 点：http: [//developer.apple.com/library/ios/#documentation/IDEs/Conceptual/xcode_quick_start/020-Tutorial_Designing_a_User_Interface_with_Interface_Builder/interface_builder_tutorial.html](http://developer.apple.com/library/ios/#documentation/IDEs/Conceptual/xcode_quick_start/020-Tutorial_Designing_a_User_Interface_with_Interface_Builder/interface_builder_tutorial.html)

# css - 如果页面上有嵌入/iframe 代码，则在 Chrome 中的悬停无法正常工作

> ID：12291846
> 
> 赞同：1
> 
> 时间：2012-09-06T01:34:13.433
> 
> 标签：css, google-chrome, iframe, webkit, hover

我知道这有点奇怪，但如果我的页面上有嵌入/iframe 代码，则在 Chrome 中悬停无法正常工作。

问题是当我将鼠标悬停在顶部的两个框 (li) 上时，它们会有一个幽灵悬停（意思是，即使我的鼠标不再悬停也有悬停效果）。仅当页面上有 iframe 时才会发生这种情况。我尝试删除 iframe（用于 YouTube 嵌入代码）并且问题消失了。

有什么联系吗？这是我的悬停代码：

CSS：

```
.boxes > li {
   background: none repeat scroll 0 0 transparent;
   border-image: none;
   border-style: none none dashed;
   border-width: medium medium 1px;
   box-shadow: none;
   display: block;
}

.boxes > li:hover {
   background-color: #E0EDFF;
   border-color: #E0EDFF;
   box-shadow: 2px 2px 4px #BBB;
} 
```

HTML：

```
<ul class="boxes">
  <li>
    <div class="detail">
        <h4>Some Title</h4>
        <div><p>Some paragraph. <a href="#">Read More »</a></p></div>
    </div>
  </li>
</ul> 
```

# javascript - JQuery 延迟更改“this”

> ID：12291850
> 
> 赞同：12
> 
> 时间：2012-09-06T01:35:03.593
> 
> 标签：javascript, jquery, jquery-deferred

我试图让一个 javascript 对象运行一个延迟方法，并且当它是 .done() 时调用同一个对象中的一个函数。我遇到了问题，因为“this”变成了延迟对象，而不是调用它的对象。

```
PageObject.prototype.successFunction = function() {
  console.log(arguments);
  return console.log(this.name + " Success function called");
};

PageObject.prototype.loadPage = function(url) {
  return $.when($.mobile.loadPage("pages/" + url))
    .done(this.successFunction);
};

var pg = new PageObject();
pg.loadPage("test.html"); 
```

如何将“this”发送到successFunction？这个 PageObject 也将被其他人扩展，因此在运行 successFunction 时知道“this”将非常方便。

这似乎很简单，并且可能有一个简单的答案。我正在研究 .apply() 但我不确定它是否有帮助。这篇关于堆栈溢出的帖子有点帮助，但在我将它放入 .done() 函数的那一刻，它就坏了。

[函数作为参数（带参数）——JavaScript](https://stackoverflow.com/questions/737802/functions-as-parameters-with-parameters-javasript)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-06T01:40:11.983

jQuery[`proxy`](http://api.jquery.com/jQuery.proxy/)将返回一个绑定到特定上下文的函数：

```
PageObject.prototype.loadPage = function(url) {
  return $.when($.mobile.loadPage("pages/" + url))
    .done($.proxy(this.successFunction, this));
}; 
```

还有 ES5 的[`bind`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)操作类似，但需要在旧浏览器中进行填充

```
PageObject.prototype.loadPage = function(url) {
  return $.when($.mobile.loadPage("pages/" + url))
    .done(this.successFunction.bind(this));
}; 
```

`apply`并且`call`可以使用指定的上下文立即执行一个函数，但是`proxy`并`bind`返回一个可以稍后使用或传递给其他函数的函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T03:06:58.217

JavaScript 中的`this`“变量”称为“调用对象”，在调用其封闭函数时确定（而不是在定义时）。它可以设置几种不同的方式：

1.  您可以使用`.`运算符进行设置（例如`myObject.myFunction()`）
2.  您可以使用函数`call()`或`apply()`方法来设置它
3.  您可以（在 ES5 下）使用函数的`bind()`方法永久绑定它
4.  如果上述方法均未将其设置为其他对象，它将默认为全局对象

要理解的重要一点是（除了上面的方法 3），这完全是关于函数在被调用时是如何被调用的，而不是它是如何被引用的，不是它是如何存储的，不是它是在哪里创建的。

在您的情况下，您将`this.successFunction`作为要由 jQuery 调用的函数引用传递，但它不会以这种方式调用它（因为它只是获得了对该函数的引用，而不是有关如何调用该函数的任何信息）。

您可以在 jQuery`$.proxy()`或 ES5 的`.bind()`方法中使用一些花哨的技巧，但归根结底，最直接的处理方法是`this`通过闭包范围的变量简单地保留并使用函数包装器：

```
PageObject.prototype.loadPage = function(url) {
    var self = this;
    return $.when($.mobile.loadPage("pages/" + url))
            .done(function () { self.successFunction(); });
}; 
```

请注意，我们使用方法 1 将 的调用对象显式绑定`successFunction`为与 loadPage 的调用对象相同。它简短、简单、清晰，在 ES3 下运行良好，并且不依赖于 jQuery。

# parsing - Mysqli Prepare 语句上的解析错误

> ID：12291856
> 
> 赞同：0
> 
> 时间：2012-09-06T01:36:07.097
> 
> 标签：parsing, mysqli, php

运行此代码时出现此错误。

```
Parse error: syntax error, unexpected 'users_kudos_to_posts' (T_STRING) 
```

编码。

```
if ($number > 0) {

$arr=explode(",",`$upvoted);
//If I comment out everything below I still get the error. But if I comment out
//the above code, then the error goes away.
if (in_array($primary_id, $arr)) {          
array_push($arr, $primary_id);  
$new_string = implode(",", $arr);
//the line below is where the parse error is pointing too.
   if ($stmt2 = $mysqli->prepare("UPDATE `users_kudos_to_posts` SET `upvoted` = ? 
       WHERE `user_id` = ?")) {
       $stmt2->bind_param('si', $new_string, $session_user_id);
       $stmt2->execute();
       $stmt2->close(); 
   }
}
    } 
```

疯狂的是，除了列的更改之外，我在同一页代码中使用相同的 sql 语句还有其他多个准备好的语句，但它们可以正常工作，但事实并非如此。

另外，我在 phpmyAdmin 中运行了 sql 语句，它可以工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T01:53:30.987

问题是这一行：

```
$arr=explode(",",`$upvoted); 
```

你有一个不属于那里的额外反引号。它应该是：

```
$arr=explode(",",$upvoted); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T01:54:05.247

由于 StackOverflow 的语法高亮突出显示（呵呵），您`explode`在前面的语句中有一个额外的反引号``$upvoted`：

```
$arr=explode(",",`$upvoted); 
```

# javascript - 无法让 setInterval 和 setTimeout 正常工作

> ID：12291857
> 
> 赞同：1
> 
> 时间：2012-09-06T01:36:15.227
> 
> 标签：javascript, jquery, raphael

这使用 Raphaeljs 从数组中绘制单个和弦：

```
function createChordStruct(key, string, shape) {
  var string = string.toUpperCase();
  var position = positions[string][key];
  var struct = chord_shapes[shape];

return {
  name: key + struct.name,
  chord: struct.chord,
  position: position,
  position_text: struct.position_text,
  bars: struct.bars
  }
}

function createChordElement(chord_struct) {
  var chordbox = $('<div>').addClass('chord');
  var chordcanvas = $('<div>');
  var chordname = $('<div>').addClass('chordname');

chordbox.append(chordcanvas);
chordbox.append(chordname);
chordname.append(chord_struct.name);

var paper = Raphael(chordcanvas[0], 150, 140);
var chord = new ChordBox(paper, 30, 30);

chord.setChord(
  chord_struct.chord,
  chord_struct.position,
  chord_struct.bars,
  chord_struct.position_text);
chord.draw();

return chordbox;

}

function createSectionElement(section_struct) {
  var section = $('<div>').addClass('section');
  var section_title = $('<div>').addClass('title');
  var section_desc = $('<div>').addClass('description');

  section.append(section_title); 
  section.append(section_desc);
  section_title.append(section_struct.section);
  section_desc.append(section_struct.description);

  return section;

} 
```

这需要从数组中创建的每个和弦，并将它们放入一个名为“chordscroller”的新 div 中：

```
function c_i() {

var randomholder = 'id_' + (Math.floor(Math.random() * 100005) + 1);
var randomId = 'id_' + (Math.floor(Math.random() * 100005) + 1);
$(function () {
  $('#sortable').append($('<li id ="' + randomholder + '" class="chordbox"><span id="i"       class="scale">C - I</span><span id="' + randomId + '" class=" even scrollpane chordscroller"></span></li>').sortable( "refresh" ))
  });

function c_one() {
  var container = $("#" + randomId + "");
  var column = null;
  var column = _.shuffle(c_1);

for (var i = 0; i < column.length; ++i) {
  var section_struct = column[i];
  var section = createSectionElement(section_struct);

  for (var j = 0; j < section_struct.chords.length; ++j)  {
    section.append(createChordElement(section_struct.chords[j]));

  }

container.append(section);
}

}

$(function() { c_one() });

} 
```

问题是它同时画出所有的和弦，而且需要很长时间。我已经尝试了我能想到的所有 setTimeout 和 setInterval 组合，但我一直遇到错误。

任何人都可以从这段代码中看出如何一次绘制一个和弦而不是一次绘制所有和弦吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T11:28:07.277

Finally figured it out (using a plugin called [doTimeout](http://benalman.com/projects/jquery-dotimeout-plugin/)):

```
$.doTimeout( 1, function() {
  chord.setChord(
  chord_struct.chord,
  chord_struct.position,
  chord_struct.bars,
  chord_struct.position_text);
  chord.draw();

}); 
```

# java - 在jsp中显示数据库中的数据 - MVC

> ID：12291866
> 
> 赞同：0
> 
> 时间：2012-09-06T01:37:23.630
> 
> 标签：java, oracle, model-view-controller, jsp, tomcat

我正在尝试提出一个符合mvc架构的代码并在jsp页面中显示数据库的内容。数据的连接和处理要在java文件中并且只有数据的显示会包含在jsp页面。
我正在使用tomcat服务器。我的 WEB-INF/lib 文件夹中有 ojdbc6.jar 和 jstl-1.2.jar。

（更新）将我的 web.xml 更改为指向索引后，我得到了 java.lang.StackOverflowError 错误。

代码有什么遗漏/错误吗？另外，如果我不遵守 MVC 设计，请告诉我。任何想法将不胜感激。谢谢你。

这是我要运行的代码。

**DBConn.java**

```
 public class DBConn extends HttpServlet{
      @Override
      public void doGet(HttpServletRequest request, 
                        HttpServletResponse response) 
                           throws IOException, ServletException {
        Connection connection = null;
        Statement stmt=null;
        ResultSet rs=null;
        List<Employee> dataList = new ArrayList<Employee>();
        try {
            // Load the JDBC driver
            String driverName = "oracle.jdbc.driver.OracleDriver";
            Class.forName(driverName);

            // Create a connection to the database
            String serverName = "localhost";
            String portNumber = "1521";
            String sid = "xe";
            String url = "jdbc:oracle:thin:@" + serverName + ":" + portNumber + ":" + sid;
            String username = "hr";
            String password = "hr";
            connection = DriverManager.getConnection(url, username, password);

            stmt = connection.createStatement();
            rs = stmt.executeQuery("select employee_id, first_name from employees");
            while (rs.next()) {
                dataList.add(new Employee(rs.getInt("employee_id"),
                                          rs.getString("first_name")));
            }
        } catch (ClassNotFoundException e) {
            // Could not find the database driver
            e.printStackTrace();
        } catch (SQLException e) {
            // Could not connect to the database
            e.printStackTrace();
        } finally{
            if(rs!=null){
                try{ 
                  rs.close();
                }catch(Exception ex) { /* */ ex.printStackTrace();}
            }
            if(stmt!=null){
                try{ 
                  stmt.close();
                }catch(Exception ex) { /* */ ex.printStackTrace();}
            }
            if(connection !=null){
                try{ 
                  connection.close();
                }catch(Exception ex) { /* */ ex.printStackTrace();}
            }
         }

         request.setAttribute("data", dataList);
         String strViewPage = "index.jsp";
         RequestDispatcher dispatcher = request.getRequestDispatcher(strViewPage);
          if (dispatcher != null) {
             dispatcher.forward(request, response);
          }
       }
    } 
```

**雇员.java**

```
public class Employee {

    private Integer id;
    private String name;
    //public constructors and
    //setter/getter

    public Employee(Integer id, String name) {
        this.id = id;
        this.name = name;
    }

    public Integer getId() {
        return id;
    }

    public void setId(Integer id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

} 
```

**索引.jsp**

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>JSP Page</title>
    </head>
    <body>
        <h1>Hello World!</h1>
        <table border="1" width="303">
            <tr>
                <td width="119"><b>Emp ID</b></td>
                <td width="168"><b>First Name</b></td>
            <tr
        <form action="post">
            <c:forEach var="employee" items="${data}">
                <br/> ${employee.id}  ${employee.name}
            </c:forEach>
        </form>
        </tr>    
    </table>
</body>
</html> 
```

**web.xml**

```
<servlet>
    <servlet-name>DBConn</servlet-name>
    <servlet-class>DB.DBConn</servlet-class>
</servlet>
<servlet-mapping>
    <servlet-name>DBConn</servlet-name>
    <url-pattern>/index</url-pattern>
</servlet-mapping> 
```

**错误**

```
 09 6, 12 10:09:00 AM org.apache.catalina.core.ApplicationDispatcher invoke
    SEVERE: Servlet.service() for servlet DBConn threw exception
    java.lang.StackOverflowError
        at java.util.HashMap$KeySet.<init>(HashMap.java:872)
        at java.util.HashMap$KeySet.<init>(HashMap.java:872)
        at java.util.HashMap.keySet(HashMap.java:869)
        at java.util.HashSet.iterator(HashSet.java:153)
        at java.util.Collections$1.<init>(Collections.java:3382)
        at java.util.Collections.enumeration(Collections.java:3381)
        at org.apache.catalina.connector.Request.getAttributeNames(Request.java:1027)
        at org.apache.catalina.connector.RequestFacade.getAttributeNames(RequestFacade.java:300)
        at org.apache.catalina.core.ApplicationHttpRequest$AttributeNamesEnumerator.<init>(ApplicationHttpRequest.java:927)
        at org.apache.catalina.core.ApplicationHttpRequest.getAttributeNames(ApplicationHttpRequest.java:243)
        at org.apache.catalina.core.ApplicationHttpRequest$AttributeNamesEnumerator.<init>(ApplicationHttpRequest.java:927)
        at org.apache.catalina.core.ApplicationHttpRequest.getAttributeNames(ApplicationHttpRequest.java:243) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T03:00:50.237

在配置 servlet 和 servlet-mappings 时，您可能还想在 jsp 中配置您在 servlet-mapping 中提到的 url-pattern。

**JSP**

```
<form action="post" action="/dbconn">
...

</form> 
```

**web.xml**

```
<servlet>
<servlet-name>dbconn</servlet-name>
<servlet-class>com.xx.xx.DBConn</servlet-class>
</servlet>
<servlet-mapping>
<servlet-name>dbconn</servlet-name>
<url-pattern>/dbconn</url-pattern>
</servlet-mapping> 
```

此外，您可能需要考虑使用数据访问对象模式。（如果您只是想了解 servlet，请忽略）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-02T10:12:18.427

使用 `dispatcher.include(request, response)`方法。

# python - Python：重新格式化文本文件中的多行

> ID：12291867
> 
> 赞同：2
> 
> 时间：2012-09-06T01:37:45.290
> 
> 标签：python, split, line

如果这篇文章很长，我深表歉意，但我试图尽可能详细。我已经对该主题进行了大量研究，并且认为自己是一个“中级”熟练的程序员。

我的问题：我有一个包含多行数据的文本文件。我想删除每行的某些部分以消除一些不相关的信息，然后使用新格式化的行保存文件。

这是我想要完成的一个例子。原行是这样的：

```
access-list inbound_outside1 line 165 extended permit tcp any host 209.143.156.200 eq www (hitcnt=10086645) 0x3eb90594 
```

我试图让代码读取文本文件，并输出：

```
permit tcp any 209.143.156.200 www 
```

以下代码有效，但前提是文本文件中有一行：

```
input_file = open("ConfigInput.txt", "r")
output_file = open("ConfigOutput.txt", "w")

for line in input_file:
    line = line.split("extended ", 1)[1]
    line = line.split("(", 1)[0]
    line = line.replace(" host", "")
    line = line.replace(" eq", "")
    output_file.write(line)

output_file.close()
input_file.close() 
```

但是，当我尝试使用包含多行数据的完整文件运行它时，我收到一个错误：

```
File "C:\Python27\asaReader", line 5, in <module>
    line = line.split("extended ", 1)[1]
IndexError: list index out of range 
```

我怀疑它没有移动到文本文件中的下一行数据，因此前一个字符串的 [1] 中没有任何内容。我会很感激我能得到的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T01:41:29.173

一些可能的原因：

*   您的文件中有空行（空白行显然不包含**extended**一词）
*   您有非空白行，但不包含**扩展字**

您可以尝试`print`单独检查您的线路以查看问题发生在哪里：

```
for line in input_file:
    print("Got line: %s" % (line))
    line = line.split("extended ", 1)[1] 
```

哦，*最后*一行可能是空白的并且它失败了。很容易错过。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T01:45:34.270

当您遇到无法处理的行时打印一些内容

```
for line in input_file:
    try:
        line = line.split("extended ", 1)[1]
        line = line.split("(", 1)[0]
        line = line.replace(" host", "")
        line = line.replace(" eq", "")
        output_file.write(line)
    except Exception, e:
        print "Choked on this line: %r"%line
        print e 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T02:26:19.197

另一种方法是缓存所有行（假设文件不是巨大的。）

```
>>> with open('/tmp/ConfigInput.txt', 'rU') as f:
...     lines = f.readlines()
...     
... 
>>> lines
['access-list inbound_outside1 line 165 extended permit tcp any host 209.143.156.200 eq www (hitcnt=10086645) 0x3eb90594\n']
>>> lines = [re.sub('(^.*extended |\(.*$)', '', line) for line in lines]
>>> lines
['permit tcp any host 209.143.156.200 eq www \n']
>>> with open('/tmp/ConfigOutput.txt', 'w') as f:
...     f.writelines(lines)
...     
... 
>>> 
```

# javascript - 在 URL 中传递变量

> ID：12291869
> 
> 赞同：0
> 
> 时间：2012-09-06T01:37:47.380
> 
> 标签：javascript

我有一个地址簿小部件，它显示是否有内容。如果没有内容，将显示一个添加按钮。按下添加按钮后，它将重定向到另一个显示表单的页面。

我的网站的初始设计如下：

1.  当用户单击添加按钮时，它将使用 javascript 函数定向到页面：

    ```
    document.location.href="address?addOnly=true"; 
    ```

2.  表格将显示。

3.  如果成功，则有 $.post 将更改 div 仅使用户能够在地址簿中执行 CRUD。

url 中的变量 address?addOnly=true 的问题是，当用户刷新它时，它总是会显示添加表单。

这就是为什么我决定使用 $.post 隐藏实现

```
$.post('address', {"listEmty":true}, function (data) {
  window.location = "address";
}); 
```

这样做的问题是它根本无法传递变量。

我的问题是：

1.  如果使用在 URL 中传递参数的 get 方法，如何处理页面刷新，
2.  javascript/jquery 中是否有使用 post 方法传递变量然后刷新页面的方法？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T02:32:26.393

```
<FORM method="post" action="address" id="refresh" style="display: none;">
  <DIV>
    <INPUT type="hidden" name="addOnly" value="true">
  </DIV>
</FORM>
<SCRIPT type="text/javascript">
  document.getElementById('refresh').submit();
</SCRIPT> 
```

这样做是创建一个不可见的表单，然后立即提交它。您当然可以从您的其他 javascript 代码中调用提交。

# git - 如何维护 git 中的私有更改？

> ID：12291871
> 
> 赞同：5
> 
> 时间：2012-09-06T01:38:19.393
> 
> 标签：git, project

我正在使用[Success Git branch](http://nvie.com/posts/a-successful-git-branching-model/)介绍的工作流程。我对如何管理更改感到困惑，例如开发分支中的配置。

当我从 master 合并时，为了保持工作树的清洁，我将更改存储起来。如果我提交更改，当我合并回 master 时我应该非常小心。

那么有没有更好的方法来管理 git 中的私有更改？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T08:01:50.463

有几种选择：

1.  不要将私有文件置于源代码控制之下。例如，如果您需要`config.ini`为每个开发人员进行私有更改，然后`config.ini.template`在存储库中创建一个包含示例设置的文件，那么每个开发人员都应该制作一个副本并使用私有设置修改该副本。`config.ini`应该添加`.gitignore`到.

2.  `config.ini`在 repo 中添加并使用`git update-index --assume-unchanged config.ini`，以便 git 忽略文件中的任何本地更改，而不是尝试提交文件。

3.  在 repo 中为每个环境添加几个配置文件，例如`config-robotment.ini`，`config-kan.ini`等等`config-produciton.ini`。然后使用命令行参数、环境变量或类似的东西来让您的应用程序选择要使用的文件。

关键是 - 不要使用分支进行配置，否则在开发过程中分支/合并总是很痛苦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T05:50:01.897

对于配置文件，选择在“ [Git:keep specific files unmerged](https://stackoverflow.com/a/12262171/6309) ”中恢复。

我更喜欢为每个环境（这里为每个分支）对不同的值文件进行版本控制，这样我就不必处理合并（值文件“ `dev.config`”永远不会在主分支中被修改，其中使用值文件“ `master.config`”）

我还对模板文件进行版本控制，以便内容[过滤器驱动程序](https://stackoverflow.com/questions/2316677/can-git-automatically-switch-between-spaces-and-tabs/2316728#2316728)在分支结帐时生成实际的配置文件（保持私有而不是版本）：

![涂抹清洁过滤器驱动程序](../Images/86f61d0cb448e6c7208dc065a12cdc9b.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T02:28:45.013

创建并切换到具有不同名称的本地分支，在需要时合并上游主分支。

# android - Android：如何在屏幕方向更改时保存活动实例？我使用对象，而不仅仅是简单的变量

> ID：12291874
> 
> 赞同：0
> 
> 时间：2012-09-06T01:38:28.083
> 
> 标签：android, screen, orientation, instance, save

我在屏幕方向更改时保存实例时遇到问题。我有一个具有特定结构的数组：

```
private ArrayList <MyObject> myArr; 
```

这个结构是：

```
public MyObject{
    public variable1;
    //..... many variables here and one array :)
} 
```

我需要保存“myArr”数组。我怎样才能保存这个“变量”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T02:48:06.997

[基本上，应该使用Android Activity API Ref](http://developer.android.com/reference/android/app/Activity.html#ConfigurationChanges)中描述的方式保存实例：您需要使用`onSaveInstanceState(Bundle)`. 此外，您可以 `android:configChanges="orientation"`在清单中设置活动以防止其重新创建（因此不需要任何状态保存）。

要将问题中的对象保存`onSaveInstanceState(Bundle)`到捆绑包中：

*   实施[Parcelable](http://developer.android.com/reference/android/os/Parcelable.html) by `MyObject`（例如，可以在[此处](https://stackoverflow.com/questions/5104508/parcelable-class?rq=1)找到示例等）
*   [通过putParcelableArrayList()](http://developer.android.com/reference/android/os/Bundle.html#putParcelableArrayList%28java.lang.String,%20java.util.ArrayList%3C?%20extends%20android.os.Parcelable%3E%29) in将 ArrayList 放入 bundle中，旋转`onSaveInstanceState()`后通过[getParcelableArrayList()](http://developer.android.com/reference/android/os/Bundle.html#getParcelableArrayList%28java.lang.String%29v) in取回`onCreate()`；

# performance - 整数 n 的除数列表（Haskell）

> ID：12291877
> 
> 赞同：3
> 
> 时间：2012-09-06T01:38:44.370
> 
> 标签：performance, haskell, primes, factors, factorization

我目前有以下函数来获取整数的除数：

```
-- All divisors of a number
divisors :: Integer -> [Integer]
divisors 1 = [1]
divisors n = firstHalf ++ secondHalf
    where firstHalf = filter (divides n) (candidates n)
          secondHalf = filter (\d -> n `div` d /= d) (map (n `div`) (reverse firstHalf))
          candidates n = takeWhile (\d -> d * d <= n) [1..n] 
```

我最终添加了`filter`to，`secondHalf`因为除数在`n`素数的平方时重复。这似乎是解决此问题的一种非常低效的方法。

所以我有两个问题：如何衡量这是否真的是我算法的瓶颈？`n`如果是的话，当素数的平方是多少时，我该如何寻找一种更好的方法来避免重复？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T02:28:26.320

要确定瓶颈在哪里，请将三个辅助定义（firstHalf、secondHalf、candidate）放在顶层，并使用探查器运行您的代码：`ghc -prof --make divisors.hs` `./divisors 100 +RTS -p -RTS`

另外，您知道最大的候选者是`sqrt n`，所以不要做那么多乘法`d*d`，只需考虑`[1..floor (sqrt n)]`

要获得更好的算法，您应该阅读数学书，因为这不是与 Haskell 相关的问题……您可以考虑的事情：如果“a 除数 b”，那么对于 a 的所有除数 d，d 也除以 b。如果给定的 d 除以 b，您将需要使用记忆化或动态编程来避免多次检查（例如，如果 15 和 27 除以 b，那么您只需在数学上检查一次 3 除以 b。其他时候，您看看 3 是否在你的 b) 的除数表中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T10:54:54.670

您无需测试反转后半部分的*所有元素。*你知道如果平方根存在，它就是那里的头元素：

```
 secondHalf = let (r:ds) = [n `div` d | d <- reverse firstHalf]
                       in [r | n `div` r /= r] ++ ds 
```

这假设`n`是积极的。

以不同方式处理数字的 sqrt 的一种更简单的方法是*单独*处理它：

```
divs n = 
  let 
    r = floor $ sqrt $ fromIntegral n 
    (a,b) = unzip $ (1,n) : [(d, q) | d<-[2..r-1], let (q,r)=quotRem n d, r==0]
  in
    if r*r==n
      then a ++ r : reverse b
      else a ++ reverse b 
```

这样我们就可以免费获得下半场，作为制作上半场的一部分。

但这几乎不会成为您应用程序的瓶颈，因为算法本身效率低下。[从一个数的素数分解中](https://stackoverflow.com/a/12052561/849891)[*生成*](https://stackoverflow.com/a/12052561/849891)除数通常要快得多。*通过试除法进行*素数分解可以更快，因为我们在找到每个除数时对其进行除法，从而减少被分解的数量，从而减少尝试的除数的数量（直到*减少*的数字的平方根）。例如，在因式分解过程中`12348 = 2*2*3*3*7*7*7`没有`7`尝试上述因子，而在`divs 12348`数字 12348 中除以从`2`到的所有数字`110`：

```
factorize n = go n (2:[3,5..])    -- or:  (go n primes)  where
   where                          --  primes = 2 :
     go n ds@(d:t)                --   filter (null.tail.factorize) [3,5..]
        | d*d > n    = [n]
        | r == 0     =  d : go q ds
        | otherwise  =      go n t
            where  (q,r) = quotRem n d 
```

# objective-c - 当浮点数不是时，浮点数计为零

> ID：12291878
> 
> 赞同：-1
> 
> 时间：2012-09-06T01:38:50.003
> 
> 标签：objective-c, ios, c

在我的游戏中，我有一个头文件，其中包含游戏中季节的属性和函数。这些属性都是静态的，包括一个表示当前季节的浮点数和另一个表示季节之间转换的当前点的浮点数，如果不转换则为零。

在我的游戏中，有几个功能依赖于过渡（此时有两个），其中一个运行良好。虽然，在另一种情况下，这根本不起作用。

在负责控制我的游戏背景的类中，每当引用“SeasonTransition”变量时，它就为零。但是在另一个类中，变量以完全相同的方式引用，它得到了真正的值。

这是游戏可以更新几帧后调用断点后的图片： ![在此处输入图像描述](../Images/c6819e852b315be4b00fd7c2e2efd59c.png)

这些变量再次在 ac 头文件中声明：

```
#import "somestuff.h"

static float SeasonTransition
etc... 
```

这不应该这样做吗？我该如何解决这个问题？

编辑：

Season.h 文件如下：

```
//GL.h contains different functions and global variables to be used anywhere in the project.
//This file, like Season.h is a singular header file with static declarations, and is setup
//the same way. I have been developing this from the start of the project and havent had any
//problems with it.
#import "GL.h"

static float currentSeason;

static float SeasonTransition;

static void UpdateSeason(){
    currentSeason += 0.0002f;

    float TransitionLength = 0.15f;
    float SeasonDepth = Clamp(currentSeason - floorf(currentSeason), 0, TransitionLength);
    float bigTL = TransitionLength / 4;
    float endTL = TransitionLength;
    float Speed2 = 0;
    float Speed1 = 1;
    float bRatio = SeasonDepth / bigTL;
    float eRatio = SeasonDepth / endTL;

    SeasonTransition = (SeasonDepth < TransitionLength) ?
    ((SeasonDepth < bigTL) ?
     (Speed1 * bRatio) + (Speed2 * (1.0f - bRatio)) :
     (Speed1 * (1.0f - eRatio)) + (Speed2 * eRatio))

    :

    Speed2;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T01:44:28.300

如果您放入`static float SeasonTransition;`两个单独的 C 文件（或两个单独的 C 文件*包含*的一个头文件），每个 C 文件将拥有自己*独立*的变量副本。

如果这些 C 文件之一随后修改了变量，它将修改其副本。它*不会*触及另一个 C 文件中的那个。这听起来像你所处的情况。

执行此操作的正常方法是在一个中定义变量并在另一个中将其声明为外部，例如：

```
file1.c:
    int myVar;           // it exists here.

file2.c:
    extern int myVar;    // it exists, but elsewhere. 
```

你不想`static`在第一个标记它，因为这实际上使它对第二个不可见。并且您在第二个中标记它`extern`，以便它知道变量存在于其他地方（在第一个中）。

如果它*不是*静态的，您实际上会看到效果。当链接器将这两个文件链接在一起时，它会抱怨有*两个*同名的变量。

如何做到这一点有很多变化，我展示了最简单的。最好有类似的东西：

```
file1.h:
    extern int myVar;   // so everyone knows about the variable
                        //   just by including this.
file1.c:
    #include "file1.h"  // or import for ObjC.
    int myVar;          // the actual variable.

file2.c:
    #include "file1.h"  // now we know about it, in the OTHER C file. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T03:46:32.340

我可能是错的，但我认为问题可能是你不明白包含/导入是如何工作的。这些不是退出语言功能，而是预处理器功能。当您在文件中包含某个位置时，您可以说在开始编译之前获取该文件的全部内容并将其粘贴到此处。因此，如果您在多个不同的其他文件中包含相同的头文件，您最终会得到该静态变量的多个版本，如果没有静态变量，您将收到编译器错误，因为您已经多次重新定义了相同的变量。import 的工作方式几乎相同，除非预处理器确定包含的文件已经包含到目标文件中（可以通过另一个包含间接包含），那么它将不再包含该文件。如果您理解这一点，您就会发现在您的标头中声明静态变量很奇怪，因为您最终会在包含该标头的任何地方得到该变量的多个版本。通常，您希望使变量成为全局变量，在这种情况下，您在 .c 或 .m 文件中定义它，然后在标头中将其声明为 extern ，或者您希望该变量是私有的，然后在 .c 或 .m 中将其声明为静态文件。

static 所做的就是对链接器隐藏变量声明，因此链接器无法识别所有同名的不同声明都应该被视为同一个变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T08:54:34.470

```
#ifndef Season_h
#define Season_h

... your header stuff

#endif 
```

此外，如果您不调用 updateSeason seasonTransition 将为零。

# objective-c - DigitalColor Meter 逻辑 - 它是如何做到的？

> ID：12291880
> 
> 赞同：5
> 
> 时间：2012-09-06T01:38:56.527
> 
> 标签：objective-c, cocoa

所以，这基本上是我很好奇的：

*   这个小工具如何获取鼠标下方的区域（和特定像素）？
*   然后它如何分析该选定点的 RGB 值？

有任何想法吗？也欢迎我指出正确的方向。

* * *

**提示**：*我会对原生的 Objective-C/Cocoa 方法更感兴趣。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T00:13:10.637

基本上，DigitalColor Meter 获取鼠标坐标，在该区域周围截取 CGImageRef 屏幕截图，然后访问原始像素数据以计算 RGB 值。

您可以使用该`nm`命令发现应用程序调用了哪些 API。在这种情况下：

`nm /Applications/Utilities/DigitalColor\ Meter.app/Contents/MacOS/DigitalColor\ Meter`

这揭示了一些有趣的电话：

```
U _CGDisplayBounds
U _CGGetDisplaysWithPoint
U _CGSCaptureWindowsContentsToRectWithOptions
U _CGSCurrentInputPointerPosition
U _CGSGetOnScreenWindowCount
U _CGSGetOnScreenWindowList 
```

CGS* 例程是私有 SPI - 好的一面是，有一个公共 API 等效项，称为`CGWindowListCreateImage()`

一旦有了 CGImageRef，就可以使用以下方法访问原始像素数据：

```
CGImageGetDataProvider
CGDataProviderCopyData 
```

# javascript - 如何扩展 jquery jqXHR 对象

> ID：12291882
> 
> 赞同：4
> 
> 时间：2012-09-06T01:39:21.623
> 
> 标签：javascript, ajax, jquery, xmlhttprequest

我们可以向 jqXHR 对象添加其他方法吗？我有一个使用prototype.js 构建的应用程序，它扩展了响应

```
Ajax.Response.addMethods({}); 
```

Jquery 的等价物是什么？

我想添加一些特定于我的应用程序的方法。比如我想添加一个方法

```
getMyHeader: function(name)
{
     return this.getResponseHeader('MY-'+name);
} 
```

它返回服务器发送的特定标头。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T02:54:21.217

看起来 jQuery 并不特别支持这一点。他们创建的 jqXHR 对象只是一个通用对象，其中添加了作为属性的方法，因此没有可以修改的原型，我也看不到任何 jQuery 方法可以修改它。

我能看到的唯一解决方法是为全局 ajax 事件注册一个处理程序，[`jQuery.ajaxSend()`](http://api.jquery.com/ajaxSend/)并将所需的方法添加到该全局处理程序中的每个特定 jqXHR 对象。然后，这些方法将在以后可用。

# ruby-on-rails - 在 Mongoid 中验证嵌入文档

> ID：12291883
> 
> 赞同：0
> 
> 时间：2012-09-06T01:39:23.027
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongodb, mongoid

我有一个文档 Design.rb，它有一个嵌入式文档 Attachment.rb，它做了一些验证。如果 Attachment.rb 失败，那么 Design.rb 也应该失败，但它没有。

如果嵌入式文档失败，关于如何让我的设计类失败的任何建议？

设计.rb：

```
class Design

    embeds_many :attachments, :as => :attachable

    validates_associated :attachments

    accepts_nested_attributes_for :attachments, :allow_destroy => true

    field :description
    field :title
    field :tags, type: Array
    field :featured, :type => Boolean, :default => false
    field :full_member, :type => Boolean, :default => false
    field :first_design, :type => Boolean, :default => false
    field :option, :type => String 
    field :app_store_url, :type => String 
    field :design_in_progress, :type => Boolean

    attr_accessible :design_in_progress, :tags, :description, :title, :featured, :project_number, :show, :option, :app_store_url, :temp_number, :option, :attachments_attributes

    validates :description, :tags, :title, :presence => true

end 
```

附件.rb

```
require 'carrierwave/mongoid'

class Attachment

    embedded_in :attachable, :polymorphic => true, :inverse_of => :attachments

    field :image
    field :width, :type => Integer
    field :height, :type => Integer
    field :option, :type => String

    attr_accessible :image, :width, :height, :option, :normal, :url

    mount_uploader :image, ImageUploader

    validate :validate_minimum_image_size

    def validate_minimum_image_size
        self.option = self.attachable.option

        case self.option
        when "iphone"
            width = 640
            height = 960
            type = "iPhone"
        when "ipad"
            width = 1536
            height = 2048
            type = "iPad"
        when "icon"
            width = 1024
            height = 1024
            type = "Icon"
        when "wp" 
            width = 480
            height = 800
            type = "Windows Phone"
        when "android"
            width = 480
            height = 800
            type = "Android"
        end

        geometry = self.image.geometry
        unless geometry.nil?
            self.width = geometry[0]
            self.height = geometry[1]
        end

        unless (self.width == width && self.height == height)
            puts "INSIDE ERROR STATEMENT" 
            errors.add :base, "Naughty you... "+type+" designs should be "+width.to_s+"px times "+height.to_s+"px. We want to see your awesome design in retina :-)." 
        end
    end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T01:58:47.867

你可以尝试添加

```
embeds_many :attachments, :as => :attachable, cascade_callbacks: true 
```

当通过设计模型进行更改时，它将调用验证。

# ios - 为什么 beginUpdates 没有在 UITableView 中调整我的单元格大小？

> ID：12291887
> 
> 赞同：3
> 
> 时间：2012-09-06T01:40:18.207
> 
> 标签：ios, uitableview, uitextview, reloaddata

是）我有的：

一个带有单元格的 UITableView。这个单元格有一个 UITextView 作为子视图。所有委托和数据源均已正确设置。单元格高度是从 heightForRow 等正确获取的。用户在 textView 中输入文本。

我正在尝试做的事情：

我希望单元格在用户键入时更新其高度，而不将 textView 作为第一响应者。stackOverflow 上的许多帖子都说空的 beginUpdates/endUpdates 对此有效。

我尝试了什么：

1- 我在 textViewDidChange 中调用了 beginUpdates 和 endUpdates（针对 tableView）。没啥事儿。（注意：所有代表都设置正确）。

2-我什至在 textViewDidEndEditing 中调用 beginUpdates 和 endUpdates 只是为了确保（以查看它在 textView 辞去第一响应者后是否有效）。它可以工作（当 textView 辞去 firstResponder 时，单元格会调整大小）。

3-然后我尝试在 textViewDidChange 中重新加载数据。它可以工作，除了它将 textView 作为第一响应者（键盘在每个键入的字符上消失）。

4-然后我尝试了 reloadData 然后直接告诉 textView 再次成为FirstResponder （以保持键盘向上）。它可以工作，但这会导致 textView 中的光标位置、自动更正和退格出现许多问题。

5-然后我尝试了 reloadData，然后在我希望键盘保持向上时在 textViewShouldEndEditing 中返回 NO，但由于某种原因，单元格不会更新其高度。

6- 最后，我尝试了 reloadRowsAtIndexPaths 等，然后在 textViewShouldEndEditing 中返回 NO，但它给了我一个错误，说它无法删除拒绝 resignFirstResponder 的对象。

我还尝试了 textViewDidChange 中的 reloadInputViews 和 setNeedsDisplay 和 setNeedsLayout 等方法，但没有任何反应。

我的问题：

在我看来，#2 表明一个单元格不能更新它的高度，而它的一个子视图是一个 firstResponder。是这样吗？有没有这方面的文件（我找不到）？

为什么 beginUpdates/EndUpdates 不起作用？是否存在不起作用的已知或常见情况？我设置的方式可能有问题吗？但是调整大小与#3 和#4 完美配合（表明我所有的委托方法等都设置正确）。

很抱歉这个很长的问题，但是除了我发布的那些之外，任何人都可以给出任何想法吗？我有一种感觉，我错过了一些非常愚蠢和明显的事情（像往常一样）......

顺便说一句，我同时使用 iOS 模拟器和 5.1 的实际 iPhone

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T11:32:25.210

它在我的小演示应用程序中完美运行。请注意，代码获取 textView 委托消息，设置应用于每个单元格的 ivar 高度，然后调用 begin/end - 每个字符按下时单元格都会变大：

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
NSLog(@"Asked for Height");
    return height;
}
- (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text
{
    NSLog(@"Text");
    height += 10;
    [self.tableView beginUpdates];
    [self.tableView endUpdates];
    return YES;
} 
```

# c# - 我可以在另一个网格上叠加一个网格吗？

> ID：12291889
> 
> 赞同：3
> 
> 时间：2012-09-06T01:40:44.837
> 
> 标签：c#, wpf, xaml, grid, overlay

您不能两次定义窗口的内容，但是有没有办法将一个网格覆盖在另一个网格之上？

在我的具体情况下，我正在创建一个国际象棋游戏，我想要一个网格来管理棋子及其 UI，而另一个网格来管理黑白方块。我想这样做（而不是使用具有不同 Z 索引的一个网格），因为在游戏期间我想在有效移动的正方形上添加不透明矩形。如果我使用单独的网格，我可以通过这样做来清除矩形`myGrid.Children.Clear()`以清理方形 UI，但将这些部分保持在原位。

另一种解决方案是清除特定 Z 索引的所有子项。那可能吗？

感谢您的帮助，如果需要，我可以发布代码！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-06T05:02:41.870

将一个网格覆盖在另一个网格之上：

```
<Grid>
<Grid x:Name="grid1" />
<Grid x:Name="grid2" />
</Grid> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T05:09:18.037

装饰者！装饰器呈现在与主窗口不同的层中，因此您可以将棋盘放在一个网格中，而将棋子放在网格中包含在装饰器层中。 [http://www.nbdtech.com/Blog/archive/2010/06/21/wpf-adorners-part-1-ndash-what-are-adorners.aspx](http://www.nbdtech.com/Blog/archive/2010/06/21/wpf-adorners-part-1-ndash-what-are-adorners.aspx)

# python - Django 1.4.1 未加载管理站点（Django Book 教程）

> ID：12291892
> 
> 赞同：2
> 
> 时间：2012-09-06T01:41:14.700
> 
> 标签：python, django, django-admin

我不知道为什么 Django 没有加载管理页面。似乎它甚至没有读取我正在编辑的 urls.py 文件 - 因为即使我注释掉 'urlpatterns' 语句，一旦我运行服务器，它仍然可以正常加载本地 hello 页面。

这是错误消息：

```
Page not found (404)
Request Method: GET
Request URL:    http://127.0.0.1:8000/admin
Using the URLconf defined in mysite.urls, Django tried these URL patterns, in this order:
^hello/$
^time/$
^time/plus/(\d{1,2})/$
The current URL, admin, didn't match any of these. 
```

这是我的 urlpatterns 代码：

```
from django.conf.urls import patterns, include, url
from mysite.views import *

# Uncomment the next two lines to enable the admin:
from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
    ('^hello/$', hello, ),
    ('^time/$', current_datetime, ),
    (r'^time/plus/(\d{1,2})/$', hours_ahead, ),
    # Examples:
    # url(r'^$', 'mysite.views.home', name='home'),
    # url(r'^mysite/', include('mysite.foo.urls')),

    # Uncomment the admin/doc line below to enable admin documentation:
    # url(r'^admin/doc/', include('django.contrib.admindocs.urls')),

    # Uncomment the next line to enable the admin:
    url(r'^admin/', include(admin.site.urls))
) 
```

这是我的 settings.py 文件的一个片段：

```
 MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    # 'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    # 'django.contrib.messages.middleware.MessageMiddleware'
    # Uncomment the next line for simple clickjacking protection:
    # 'django.middleware.clickjacking.XFrameOptionsMiddleware',
)

ROOT_URLCONF = 'mysite.urls'

# Python dotted path to the WSGI application used by Django's runserver.
WSGI_APPLICATION = 'mysite.wsgi.application'

TEMPLATE_DIRS = (
    '/Users/pavelfage/Desktop/Coding/mysite/Templates',
    # Put strings here, like "/home/html/django_templates" or "C:/www/django/templates".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
)

INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    # 'django.contrib.messages',
    # 'django.contrib.staticfiles',
    # Uncomment the next line to enable the admin:
    'django.contrib.admin',
    # Uncomment the next line to enable admin documentation:
    # 'django.contrib.admindocs',
    'mysite.books'
) 
```

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-05T10:30:15.480

我遇到了同样的问题。在 urls.py 中取消注释`from django.contrib import admin`解决了这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-20T12:32:41.143

我有同样的问题。你可以试试这个：

*   在您的 urls.py 中，将调用 include(admin.site.urls) 替换为： admin.site.urls

*   在您的 setting.py 中，如果没有任何 TEMPLATE_CONTEXT_PROCESSORS 属性（这是我的情况），请添加：

    TEMPLATE_CONTEXT_PROCESSORS = ("django.contrib.auth.context_processors.auth"、"django.core.context_processors.debug"、"django.core.context_processors.i18n"、"django.core.context_processors.media"、"django.core. context_processors.static”、“django.core.context_processors.tz”、“django.contrib.messages.context_processors.messages”）

它似乎是普通 django 1.4 配置中的默认属性。以下是谈论它的文档：[djangoproject-doc1](https://docs.djangoproject.com/en/dev/ref/templates/api/#subclassing-context-requestcontext) [djangoproject-doc2](https://docs.djangoproject.com/en/dev/ref/settings/#std%3asetting-TEMPLATE_CONTEXT_PROCESSORS)

您可能还必须取消注释字符串：

```
# 'django.contrib.messages',
# 'django.contrib.staticfiles', 
```

在 settings.py 的 INSTALLED_APPS 属性中，但我不确定。

很抱歉没有更好地解释这些变化的原因，但我是 django 初学者。我刚刚发现您的问题与我的问题相对应，然后是一个可能的遮阳篷。

我希望它可以帮助你。

编辑：如评论中所见，您可能会尝试删除有关管理站点 url 的行上的 url(...) 指令

本

# javascript - 通过 JS 打开“检查元素”窗口

> ID：12291893
> 
> 赞同：9
> 
> 时间：2012-09-06T01:41:18.097
> 
> 标签：javascript, google-chrome, google-chrome-extension, dom-events

有没有提示使用JavaScript打开开发者工具控制台的功能或方法？即点击页面上的某些东西，它会弹出。我假设“不”，因为我找不到它，但希望它是可能的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-19T12:03:02.983

不，不可能这样做，原因与无法在网页中使用 JavaScript 从本地计算机访问文件的原因相同。允许网页直接访问浏览器功能将是一个安全问题。

# c - 将 malloc 的 C 结构写入文件，并从中读取

> ID：12291895
> 
> 赞同：1
> 
> 时间：2012-09-06T01:41:35.230
> 
> 标签：c, file, struct, malloc

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

struct stCrimeArchive {
   char id_student[10];
   int id_document;
   char judgement[30];
   int id_crime;
   char date[12];
   char id_police[12];
};

int main()
{
   struct stCrimeArchive *regi;
   FILE *filea;
   filea = fopen("crimearchives.dat", "r+b");          
   if(!filea) 
 filea = fopen("crimearchives.dat", "w+b");

   int i;
   char num[6];

   regi = (struct stCrimeArchive*)malloc (sizeof(struct stCrimeArchive));

   printf("ID DOCUMENT: ");
   fgets(num, 6, stdin);
   regi->id_document= atoi(num);

   printf("ID STUDENT: ");
   fgets(regi->id_student, 30, stdin);
   for(i = strlen(regi->id_student)-1; i && regi->id_student[i] < ' '; i--)
    regi->id_student[i] = 0;

   printf("CRIME CODE: ");
   fgets(num, 6, stdin);
   regi->id_crime = atoi(num);

   printf("DATE OF THE CRIME: ");
   fgets(regi->date, 30, stdin);
   for(i = strlen(regi->date)-1; i && regi->date[i] < ' '; i--)
    regi->date[i] = 0;   

   printf("ID POLICE: ");
   fgets(regi->id_police, 30, stdin);
   for(i = strlen(regi->id_police)-1; i && regi->id_police[i] < ' '; i--)
    regi->id_police[i] = 0;  

   printf("JUDGEMENT: ");
   fgets(regi->judgement, 30, stdin);
   for(i = strlen(regi->judgement)-1; i && regi->judgement[i] < ' '; i--)
    regi->judgement[i] = 0;     

   fseek(filea, 0, SEEK_END);
   fwrite(&regi, sizeof(struct stCrimeArchive*), 1, filea);

   free(regi);
   fclose(filea);
} 
```

上下文如下：我正在制作一个可变长度文件，并在其上使用上面显示的结构编写许多犯罪档案。为此，我需要为所涉及的结构做一个 malloc。问题是当我将它写入文件时，它什么也没写，而且我不知道我在做什么错误。

我也想从同一个文件中读取犯罪档案，但我也不知道我做错了什么。这是我正在尝试做的代码：

```
int main()
{ 
   struct stCrimeArchive *regi;
   regi = (struct stCrimeArchive*)malloc (sizeof(struct stCrimeArchive));
   FILE *filea;
   filea = fopen("crimearchives.dat", "r+b");          
   if(!filea) 
    filea = fopen("crimearchives.dat", "w+b");
   rewind(filea);
   while  (fread(&regi, sizeof(struct stCrimeArchive), 1, filea))
    printf("%2d %-11s %-11s %8d %-13s %-14s\n", regi->id_document, regi->id_police, regi->date, regi->id_crime, regi->id_student, regi->judgement);
   fclose(filea);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T02:03:55.530

如果我是你，我会从你的例子中完全忘记使用`malloc`。您不需要为此进行动态内存分配。

```
struct CrimeArchive regi;
regi.id_student = 42;
/* do all your stuff here */

FILE* fp = fopen("crimearchives.dat", "wb");
if (fp != NULL) {
    if (fwrite(&regi, sizeof regi, 1, fp) != 1)
       { /* handle error */ }

    fclose(fp);
} 
```

当您从中阅读时也是如此：

```
struct CrimeArchive regi;

FILE* fp = fopen("crimearchives.dat", "rb");
if (fp != NULL) {
   if (fread(&regi, sizeof regi, 1, fp) != 1)
       { /* handle error */ }

   fclose(fp);
} 
```

请记住，如果文件是在一个系统上写入并从另一个系统上读取，则不能保证像这样的文件向/从文件写入和读取结构是可移植的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T01:55:39.447

您将要写入结构的大小，而不是指向结构的指针的大小。

```
 fwrite(regi, sizeof(struct stCrimeArchive), 1, filea); 
```

或者也许这会更清楚：

```
 fwrite(regi, sizeof(*regi), 1, filea); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T02:01:06.130

Your `fwrite` call is wrong:

```
fwrite(regi, sizeof(struct stCrimeArchive*), 1, filea); 
```

It's right that you're passing a pointer to the memory to be written, it's wrong that the size is that of a pointer and not the size of the actual `struct` you're intending to write. Chances are you'll only be writing 4 or 8 bytes of the start of the `struct` to file.

Change `sizeof(struct stCrimeArchive*)` to `sizeof(struct stCrimeArchive)`, the same size you pass to `malloc`.

However, your code still doesn't compile since there's no such type `stCrimeArchive` (should be `CrimeArchive`?) and another reason being that you you're trying to assign an `int` to `char[]` in the following line:

```
regi->id_student = atoi(num); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-13T12:13:59.960

很抱歉很晚才回答这个问题，但我想知道问题是如何解决的。答案之一是正确的，问题是写结构的大小。

对于写作过程：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

struct stCrimeArchive {
   char id_student[10];
   int id_document;
   char judgement[30];
   int id_crime;
   char date[12];
   char id_police[12];
};

int main()
{
   struct stCrimeArchive *regi;
   FILE *filea;
   filea = fopen("crimearchives.dat", "r+b");          
   if(!filea) 
 filea = fopen("crimearchives.dat", "w+b");

   int i;
   char num[6];

   regi = (struct stCrimeArchive*)malloc (sizeof(struct stCrimeArchive));

   printf("ID DOCUMENT: ");
   fgets(num, 6, stdin);
   regi->id_document= atoi(num);

   printf("ID STUDENT: ");
   fgets(regi->id_student, 30, stdin);
   for(i = strlen(regi->id_student)-1; i && regi->id_student[i] < ' '; i--)
    regi->id_student[i] = 0;

   printf("CRIME CODE: ");
   fgets(num, 6, stdin);
   regi->id_crime = atoi(num);

   printf("DATE OF THE CRIME: ");
   fgets(regi->date, 30, stdin);
   for(i = strlen(regi->date)-1; i && regi->date[i] < ' '; i--)
    regi->date[i] = 0;   

   printf("ID POLICE: ");
   fgets(regi->id_police, 30, stdin);
   for(i = strlen(regi->id_police)-1; i && regi->id_police[i] < ' '; i--)
    regi->id_police[i] = 0;  

   printf("JUDGEMENT: ");
   fgets(regi->judgement, 30, stdin);
   for(i = strlen(regi->judgement)-1; i && regi->judgement[i] < ' '; i--)
    regi->judgement[i] = 0;     

   fseek(filea, 0, SEEK_END);
   fwrite(regi, sizeof *regi, 1, filea);

   free(regi);
   fclose(filea);
} 
```

然后，对于阅读过程：

```
int main()
{ 
   struct stCrimeArchive *regi;
   regi = (struct stCrimeArchive*)malloc (sizeof(struct stCrimeArchive));
   FILE *filea;
   filea = fopen("crimearchives.dat", "r+b");          
   if(!filea) 
    filea = fopen("crimearchives.dat", "w+b");
   rewind(filea);
   while  (fread(regi, sizeof *regi, 1, filea))
    printf("%2d %-11s %-11s %8d %-13s %-14s\n", regi->id_document, regi->id_police, regi->date, regi->id_crime, regi->id_student, regi->judgement);
   fclose(filea);
} 
```

我无话可说，但谢谢=）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-06T02:46:01.830

```
while  (fread(&regi, sizeof(struct CrimeArchive), 1, filea)) 
```

我认为 fread 应该在这里接受 void* 但不是 void ** 。

# ruby-on-rails - { “错误”：{ “消息”：“缺少 client_id 参数。”，“类型”：“OAuthException”，“代码”：101 } }

> ID：12291897
> 
> 赞同：10
> 
> 时间：2012-09-06T01:41:50.250
> 
> 标签：ruby-on-rails, ruby

我正在关注 Ryan Bates Screen Cast #360 Facebook 身份验证...

当我到达部分时，我单击链接登录 facebook，我得到一个

```
{
   "error": {
      "message": "Missing client_id parameter.",
      "type": "OAuthException",
      "code": 101
   }
} 
```

我尝试像之前所说的那样重新启动服务器我拉着头发试图解决这个问题

我在 facebook 开发页面上的网站网址是正确的，我已经按照他的步骤进行了数百次

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-06T03:06:13.973

可能是你没有设置`env`for`FACEBOOK_KEY`和`FACEBOOK_SECRET`

在终端中（如果您使用的是 linux 或 mac）

```
$ export FACEBOOK_KEY=zzyzyzyzyzyzzy
$ export FACEBOOK_SECRET=zzyzyzyzyzyzzysbdbdsndnds

#now start rails from same terminal
$ rails s 
```

这现在会将 FACEBOOK_KEY 和 FACEBOOK_SECRET 的值传递给应用程序。

或第二种选择

```
provider :facebook, ENV['FACEBOOK_KEY'], ENV['FACEBOOK_SECRET'] 
```

对此

```
provider :facebook, 'FACEBOOK_KEY', 'FACEBOOK_SECRET' 
```

使用两种方法的区别。

第二种类型的缺点是，您需要将密钥保存在代码存储库中。这不是一个安全的方法。

# c# - 查询reportViewer从表单中取参数

> ID：12291898
> 
> 赞同：0
> 
> 时间：2012-09-06T01:42:02.700
> 
> 标签：c#, winforms, reporting, reportviewer

我对使用`ReportViewer`. 我有一个问题，我不知道如何解决。

我有一个 Date`TextBox`和一个 Location `TextBox`。我的问题是，当用户键入日期和位置时，如何在`ReportViewer`. 下面是一些截图，以便更好地理解。任何帮助将不胜感激。

如果需要更多详细信息，请告诉我。

![这是reportviewer 的report.rdlc。 下图中显示的 AllocationDate 和 LocationName 将在用户键入数据时显示日期和位置。](../Images/f70995b6fdf3b88260bc07e2347db40f.png)

![这是具有用于键入日期和位置的文本框的 Windows 窗体](../Images/b54988795007433609baaee48dc187ec.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T03:02:46.310

我假设您将`ShowButton`在表单中添加一个按钮。但是，您可以使用 TextBox 事件（例如 Focus Lost、Text Changed 等）而不是按钮单击事件。

```
 private void ShowButton_Click(object sender, EventArgs e)
    {
        DateTime allocationDate = Convert.ToDateTime(allocDateTextBox.Text);
        string   locationName   = locationTextBox.Text;

        //You can create as many datasources matching the name of DataSet in your report
        ReportDataSource rds = new ReportDataSource("DataSet1");
        rds.Value = getData(String.Format("Select * from myTable where theDate={0} AND Location={1}", allocationDate, locationName));

        reportViewer1.LocalReport.DataSources.Clear();

        //add as many datasources created above
        reportViewer1.LocalReport.DataSources.Add(rds);
        reportViewer1.RefreshReport();
    }

   private DataTable getData(string query)
   {
      //Select new record from database based on the new query with the new criteria
      //return the record as DataTable, DataSet or Collection of object
   } 
```

# perl - perl 查找和替换 ../ 和

> ID：12291901
> 
> 赞同：0
> 
> 时间：2012-09-06T01:42:36.807
> 
> 标签：perl

我正在使用 Perl 替换

`../../../../../../abc'`和`&#160;`

在一个字符串中

`/`和`&nbsp;`，分别。

我使用的方法如下所示：

```
sub encode
{
    my $result = $_[0];
    $result =~ s/..\/..\/..\/..\/..\/..\//\//g;
    $result =~ s/&#160;/&nbsp;/g;
    return $result;
} 
```

这个对吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T02:16:52.387

本质上，是的，尽管第一个正则表达式必须以不同的方式编写：因为`.`匹配任何字符，我们必须对其进行转义`\.`或将其放入自己的字符类`[.]`中。第一个正则表达式也可以写成更简洁

```
...;
$result =~ s{  (?: [.][.]/ ){6}  }
            {/}gx;
...; 
```

我们寻找`../`重复`6`多次的文字模式，然后替换它。因为我使用花括号作为分隔符，所以我不必转义斜线。因为我使用了`/x`修饰符，所以我可以在正则表达式中使用这些空格来提高可读性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T02:14:28.687

尝试这个。它将打印`/foo&nbsp;bar/baz`.

```
#!/usr/bin/perl -w
use strict;
my $result = "../../../../../../foo&#160;bar/baz";

#$result =~ s/(\.\.\/)+/\//g; #for any number of ../
$result =~ s/(\.\.\/){6}/\//g; #for 6 exactly

$result =~ s/&#160;/&nbsp;/g;
print $result . "\n"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T02:20:56.677

你忘了ABC，我想：

```
sub encode
{
    my $result = $_[0];
    $result =~ s/(?:..\/){6}abc/\//g;
    $result =~ s/&#160;/&nbsp;/g;
    return $result;
} 
```

# c# - 我对状态栏项目使用什么命名约定？

> ID：12291903
> 
> 赞同：0
> 
> 时间：2012-09-06T01:43:13.367
> 
> 标签：c#, .net, wpf, naming-conventions

使用 WPF 时总是让我感到困惑的一件事是命名约定。

所以这就是我为 XAML 所拥有的：

```
<StatusBar Grid.Row="2" MinHeight="20" Name="StatusBar">
        <StatusBarItem>
            <Border BorderBrush="Black" BorderThickness=".25,.25,0,0">
                <Border BorderBrush="White" BorderThickness="0,0,.25,.25">
                    <TextBlock Name="StatusBarText" Margin="2,2,2,2" >Ready</TextBlock>
                </Border>
            </Border>
        </StatusBarItem>

        <StatusBarItem>
            <Border BorderBrush="Black" BorderThickness=".25,.25,0,0">
                <Border BorderBrush="White" BorderThickness="0,0,.25,.25">
                    <TextBlock Name="FilePathText" Margin="2,2,2,2" >File Path</TextBlock>
                </Border>
            </Border>
        </StatusBarItem>
    </StatusBar> 
```

TextBlock 的内容将被数据绑定。我真的不确定如何命名我的 UI 元素和属性以避免任何潜在的歧义。

```
 public string StatusBarText 
   //Maybe StatusText instead of StatusBarText since this 
   //indicates the current status of the application (Ready,Running,Error etc)?
    {
        get { return statusBarText; }
        set
        {
            statusBarText = value;
            NotifyOfPropertyChange(() => StatusBarText);
        }
    }

    public string FilePathText
    {
        get { return filePathText; }
        set
        {
            filePathText = value;
            NotifyOfPropertyChange(() => filePathText);
        }
    } 
```

我的意思是这些属性的名称可以吗？我觉得如果另一个人要查看这些属性名称，他/她无法弄清楚这些字符串是否用于 StatusBar 文本块。我想匈牙利符号可能会解决这个问题，但现在没有多少人认为这是一个好主意。

你有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T03:47:47.857

如果您正确使用 MVVM，控件通常不需要名称，因为它们从未被引用。（仅限他们绑定的数据。）

唯一需要名称的控件是您绝对必须命名以在代码隐藏或类似内容中引用的控件，或者可能具有指向它们的相对绑定而不能依赖于按类型识别的控件。

就命名约定而言，我已经分别为视图/控件采用了 UI/ux 命名约定。命名线索只是暗示它是一个控件，而不是具体到控件的类型。这样，可以更改类型以反映业务需求或需求，而无需您重命名引用或留下误导性引用。

# magento - Magento 的模块创建者在看到它的管理页面时给了我一个空白页面

> ID：12291905
> 
> 赞同：0
> 
> 时间：2012-09-06T01:43:41.563
> 
> 标签：magento

我正在使用[Shell 的模块创建器](https://github.com/shell/Magento-Module-Creator)，当我将管理面板的块加载到 CRUD 我的模块的自定义数据库时，从“品牌”菜单中`Brands.php`单击时，我会得到一个空白页面。`Manage Items`你知道为什么吗？我检查了错误日志，那里什么也没有。

![空白模块页面](../Images/01755eb9b7eb0db5187b40dd85f55791.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T10:37:55.117

从图像看起来 Grid_Container 没有加载到您的布局中。尝试[启用模板/块提示](http://www.classyllama.com/development/magento-development/enable-templateblock-hints-in-admin-panel)并查看是否加载了任何内容。我猜你的布局配置错误/丢失。

# android - 内置联系人和数据库表不匹配时如何触发用户提示信息？[Android]

> ID：12291906
> 
> 赞同：0
> 
> 时间：2012-09-06T01:44:05.103
> 
> 标签：android, synchronization, alert, contactscontract, sqlite

我正在开发一个应用程序，其中我有一个从内置联系人列表中检索到的联系人姓名的 ListView。我使用 ContentProvider 从内置联系人列表中获取姓名。另外，我将 ListView 中的名称存储到我的数据库表中。

我需要将内置联系人列表与数据库表同步。因此，当内置的 ContactsContract 中的 DISPLAY_NAME 与我的表中的名称不匹配时，我需要为用户触发一条警报消息。而且，用户必须手动更改名称，而我必须更改表中的名称。
我怎么做？我需要帮助。

我感谢提供的任何帮助。任何示例和教程也将不胜感激。
谢谢。！

**更新**

ContactsList.java - 这是从 android 手机的联系人中检索到的联系人的 ListView。

```
BuddyDBAdapter buddyDB = new BuddyDBAdapter(this);

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.contacts_list);

        ListView list = getListView();

        setListAdapter(new ArrayAdapter<String> (this, R.layout.contacts_list, R.id.contactName, buddiesList));

        Uri allContacts = Uri.parse("content://contacts/people");

        Cursor c = managedQuery(allContacts, null, null, null, null);

        String[] columns = new String[] {ContactsContract.Contacts.DISPLAY_NAME};
        int[] views = new int[]  {R.id.contactName};

        startManagingCursor(c);

        SimpleCursorAdapter adapter = new SimpleCursorAdapter(this, R.layout.contacts_list, c, columns, views);
        this.setListAdapter(adapter);
    }

    @Override
    public void onListItemClick(ListView l, View v, int position, long id)
    {
        buddyDB.open();
        long name_id;
        super.onListItemClick(l, v, position, id);

        /*String action = getIntent().getAction();

        if(Intent.ACTION_VIEW.equals(action))
        {
            //startActivity(intent);
        }*/

        //startActivityForResult(new Intent(Intent.ACTION_PICK),PICK_CONTACT);

        Cursor c = ((SimpleCursorAdapter)l.getAdapter()).getCursor();

        TextView contactName = (TextView) v.findViewById(R.id.contactName);
        String NameValue = contactName.getText().toString();

        name_id = buddyDB.insertNames(NameValue);

        Toast.makeText(getBaseContext(),
                "Selected: " + buddiesList[position], Toast.LENGTH_SHORT).show();

        buddyDB.close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T05:25:00.900

当您向 sqlite 数据库或联系人表提供查询时，如果您的光标为**null**或**cursor.getCount() 不 > 0**，那么您可以向该联系人或数据库中不存在数据显示警报消息。

希望这会帮助你。

并 alertView 使用此代码：

```
final AlertDialog alertDialog = new AlertDialog.Builder(this).create();
alertDialog.setTitle("ALERT");
alertDialog.setMessage("NO DATA FOUND");
alertDialog.setIcon(R.drawable.warning);
alertDialog.setButton("OK",new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int which) {
        // DO YOUR STUFF ON CLICK OF OK
    }
});
alertDialog.show(); 
```

# javascript - Rails - 处理多态关联上的 Ajax 销毁调用

> ID：12291907
> 
> 赞同：0
> 
> 时间：2012-09-06T01:44:22.603
> 
> 标签：javascript, ruby-on-rails, ajax, ruby-on-rails-3, polymorphic-associations

我试图通过 Ajax 破坏评论。在我的应用程序中，我的评论模型使用了多态关联。使用下面的代码成功删除评论（在数据库中）。但是，当我调用 destroy.js.erb 时，它什么也没做，我认为问题在于 dom_id 与 HTML id 不匹配，因此它没有更新。我想我正在经历@mu_is_too_short 在[回答这个问题](https://stackoverflow.com/a/6965321/1276696)时所表达的同样的事情。不过，我需要有关如何解决此问题的帮助。我不知道解决方案是否涉及 a) 以某种方式将局部变量注释传递给 destory.js.erb 或 b) 另一个解决方案。

**路线.rb**

```
resources :feeds do
  resources :comments
end 
```

**销毁.js.erb**

```
 $('#<%= dom_id(@comment) %>')
   .fadeOut ->
   $(this).remove() 
```

**_comment.html.erb**

```
 <div id=<%= dom_id(comment) %> class="comment">
   <em>on <%= comment.created_at.strftime('%b %d, %Y at %I:%M %p') %></em>
   <%= link_to "Remove", [@commentable, comment], :method => :delete, :remote => true %>
   <%= simple_format comment.content %>
 </div> 
```

**提要/show.html.erb**

```
 <div id="comments">
    <%= render @comments %>
 </div> 
```

**评论控制器**

```
 class CommentsController < ApplicationController

   def create
     @comment = @commentable.comments.new(params[:comment])
     if @comment.save
        respond_to do |format|
           format.html { redirect_to @commentable }
           format.js
        end
     else
        render :new
     end
    end

    def destroy
      @comment = Comment.find(params[:id])
      @commentable = @comment.commentable
        if @comment.destroy
          respond_to do |format|
            format.html { redirect_to @commentable }
            format.js
          end
        end
     end
  end 
```

**饲料控制器**

```
 class FeedsController < ApplicationController
  def show
     @feed = Feed.find(params[:id])
     @commentable = @feed
     @comments = @commentable.comments
     @comment = Comment.new
   end
 end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T06:49:02.177

从外观上看，@comment 将在您到达 destroy.js.erb 时包含一条评论，因为您在此之前在控制器中设置了它，所以我认为它与引用的答案没有任何关系。我想知道这是否是由于您的 id 周围缺少引号引起的：`<div id=<%= dom_id(comment) %> class="comment">`...我怀疑如果您更正此问题以及任何其他相关的 HTML 验证错误，它将开始工作。

# php - 如何在终端中运行带有 post form 标签的 PHP 脚本？

> ID：12291913
> 
> 赞同：0
> 
> 时间：2012-09-06T01:45:01.000
> 
> 标签：php, javascript, jquery, html, linux

我正在尝试创建自己的方法来接收来自网站的警报文本。在这个脚本中，我使用 php，我获取另一个域上的站点的 html，然后将其 html 粘贴到当前页面，然后使用 jquery 从中提取信息，然后使用它的 click() 按钮提交带有textarea 标记中的数据，然后将其传递给 php 代码。在那里，我向我发送了一条带有信息的文本。到目前为止，这有效。但现在我正在尝试使用 cron 在腻子终端中自动执行此操作。但是使用命令`nohup php myscript.php`，它似乎运行了 php 文件，但我没有收到任何文本。我认为这与提交按钮有关。

有谁知道我可以用来解决这个问题的技术，以便上面的腻子代码可以工作？

谢谢。

```
<html>
    <head>
        <title>
            Test
        </title>

        <script type="text/javascript" src="Includes/jquery-1.8.1.min.js">
        </script>

    </head>

    <body>
        <?php

            $Fname = $_POST["new_movies"];
            if (isset($Fname)) {
                $formatted_number = "4163958750@msg.telus.com";
                $pieces = explode("\n", $Fname);

                $count = 0;
                $build = "";

                foreach ($pieces as &$value) {
                    $build = $build.$value."\n";

                    $count = $count + 1;
                    if ($count==2) {
                        $count = 0;
                        mail("$formatted_number", "", "$build");
                        $build = "";
                    }
                }
            }
            else {
                $contents = file_get_contents( "http://extratorrent.com/" );
                echo "$contents";
            }
        ?>

        <form method="post" action="<?php echo $PHP_SELF;?>" style="display:none">
            <textarea rows="5" cols="20" id="my_text_field" name="new_movies" wrap="physical"></textarea>
            <br />
            <input id="my_submit_button" type="submit" value="submit" name="submit"></input>
        </form>

        <script type="text/javascript">
                var build = "";

                var g = $('.tl').eq(0);
                g = $('.tlr, .tlz', $(g));

                for (var i=0; i<g.length; i+=1) {
                    val = $ ( 'a', $ ('td', g[i]) ).attr('title');
                    val = val.substr(9);
                    val = val.substring(0, val.length-8);
                    build += val;

                    if (i < g.length-1) {
                        build += '\n';
                    }
                }
                $('#my_text_field').val(build);
                if ($('#my_text_field').val().trim() != "") { 
                    $('#my_submit_button').click();
                }
        </script>

    </body>
</html> 
```

# java - Solr 搜索返回部分字符串匹配

> ID：12291917
> 
> 赞同：1
> 
> 时间：2012-09-06T01:46:12.780
> 
> 标签：java, solr, lucene

使用 Solr 3.6.1，我的 schema.xml 中有这个字段：

```
<field name="names" type="text_general" indexed="true" stored="false" multiValued="true"/>
<dynamicField name="names_*" type="text_general" indexed="true" stored="true"/> 
```

schema.xml 中的文档指出“text_general”应该：

*   使用 StandardTokenizer 进行标记
*   从不区分大小写的“stopwords.txt”（当前为空）中删除停用词
*   向下大小写字符串。
*   仅在查询时，它也应用同义词（此时也为空）

我在 Solr 中使用该字段的数据索引了两个文档：

```
<!-- doc 1 -->
<str name="names_data">Name ABC Dev Loc</str> 

<!-- doc 2 -->
<str name="names_data">Name ABC Dev Location</str> 
```

当我执行以下查询时：

```
id:(doc1 OR doc2) AND names:Dev+Location) 
```

两份文件都被退回。根据我对 Solr 的 StandardTokenizer 工作原理的理解，我预计只会返回 doc2。

为什么“Dev+Location”匹配“Dev Loc”和“Dev Location”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T02:58:39.427

该类型`text_general`可能被配置为使用一个[词干分析器](http://en.wikipedia.org/wiki/Stemming)，它被`Loc`视为`Location`.

您可以将类型配置为*不*使用词干分析器，或尝试使用搜索整个字符串`names:"Dev Location"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T22:48:15.373

这可能就是原因。

查询的这一部分`names:Dev+Location`仅搜索`names:Dev`由于该`Location`术语没有字段名称限定符而针对schema.xml 中设置的`Location`任何内容进行搜索的位置`<defaultSearchField>`

因此，您可以尝试引用该字段`names:"Dev Location"`或为其添加前缀`names:Dev AND names:Location`

# javascript - 从输入框、Javascript、getElementById 中获取值

> ID：12291918
> 
> 赞同：0
> 
> 时间：2012-09-06T01:46:23.897
> 
> 标签：javascript, html, textbox

所以我试图获取 HTML 文本框的值或内容。我尝试了各种类型的方法，但都没有奏效。根据调试器，代码在 getelementbyid 方法处停止。注释行是我已经尝试过的方法。它们中的一些返回 null 而其中一些返回 NaN 并且大多数只返回一个空白页。非常感谢您的帮助。

```
<html>
<head>
<script type="text/javascript" >
function calculateit(){
document.open();
var number = document.getElementsByName('xyz')[0].value

//var number = document.getElementsByName("xyz").value;
//var number = document.getElementsByName('xyz').value;
//var number = document.getElementsByName("xyz");
//var number = document.getElementsByName('xyz');

//var number = document.getElementsById("xyz").value;
//var number = document.getElementsById('xyz').value;
//var number = document.getElementsById("xyz");
//var number = document.getElementsById('xyz');

//var number = document.form1.xyz.value;  //form 1 was my form name and/or id 

document.writeln(number);

var newtemp = 0;

var newtemp = tempera *9/5+32;

document.write(newtemp);
}

</script>

</head>

<body>
<input type="text" id="xyz" name="xyz">
<button title="calculate" onclick="calculateit()">calculate </button>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T01:49:46.810

你使用了错误的方法。两种广泛支持的 javascript 方法是“getElementsByTagName”和“getElementById”。请注意“getElementById”的拼写方式。它旨在获取一个具有您指定的确切 ID 的元素。“getElementsByTagName”获取某个标签的所有元素......例如“div”。当使用“getElementById”时，你不需要索引它或任何东西——它要么返回 null（找不到），要么返回确切的元素引用。从那里，因为它是一个文本区域，你可以使用“.value”来获取当前值，就像你已经是一样。

还：

在页面呈现之后，您可能不应该使用“document.write”或其任何相关的写入方法。在你的例子中，这正是你正在做的，所以一旦你让“.value”的东西工作，我会改变它。关键是“document.write”更适用于页面呈现期间......所以如果你有 javascript 与 HTML 正文或其他内容内联。就像是：

```
<html>
<head>

</head>
<body>
    <script type="text/javascript">
        document.write("testing");
    </script>
</body>
</html> 
```

会很好，但仍然不是首选。事实上，您将它放在一个函数中，即在单击按钮时调用它，这意味着它不在页面呈现期间，不应该使用。一种更实用的方法是`<div>`在页面上添加一个并在必要时向其添加文本，使用类似“.innerHTML”的内容。这样，事情是动态的，不会在实际文档中被覆盖。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T01:50:13.037

它是 getElementById，而不是 getElementsById。

# sql - 是否可以在 Firebird 中重命名表？

> ID：12291919
> 
> 赞同：10
> 
> 时间：2012-09-06T01:46:26.050
> 
> 标签：sql, firebird

是否可以在 Firebird 中重命名表，或者我应该创建一个新表，然后使用插入移动数据？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-10-22T11:01:14.523

显然不是。

您必须创建一个新表，复制旧值或创建一个与原始表相同的预期名称的视图。

有关详细信息，请参阅[http://www.firebirdfaq.org/faq363/](http://www.firebirdfaq.org/faq363/)。

* * *

## 回答 #2

> 赞同：-8
> 
> 时间：2014-03-03T09:31:46.813

可以通过以下方式更改列名：

```
ALTER TABLE "tableName" ALTER "columnName" TO "NewColumnName"; 
```

# c# - .NET 应用程序中的多个 OAUTH 提供程序如何处理相同的查询字符串？

> ID：12291920
> 
> 赞同：0
> 
> 时间：2012-09-06T01:46:32.267
> 
> 标签：c#, .net, facebook-graph-api, oauth, instagram

我正在创建一个 .NET 应用程序，在我的一个屏幕上我有不同的服务可以连接到使用 OAUTH。

两个例子是 Facebook 和 Instagram。我允许用户授权我的应用访问这些应用。一切都很好，但是我无法找到一个好方法来了解用户在回调中选择了哪个提供商（我对每个服务都有一个简单的按钮单击），因为 Facebook 和 Instagram 都在查询字符串上返回“代码”。然后用于执行 OAUTH 授权的最后一步。

我尝试将每个服务的按钮点击存储在会话中，但是我的会话在重定向到提供者授权 URL 时被擦除，并且在回调中返回到我的应用程序时（是的，即使使用 Redirect(url, false) 我的会话仍然是被清除）。所以基本上我不知道用户使用授权返回的服务（Facebook 或 Instagram）单击了哪个按钮。

在用户对我的应用程序进行身份验证并进行回调之后要知道的任何想法或想法如何知道是哪个提供商在后面的代码中向我发送了该回调？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T05:02:22.463

你不能让他们去不同的回调网址吗？他们需要访问相同的 URL 是否有原因？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T12:58:33.157

您可以将此信息包含在 OAuth 2.0 授权请求的[`state`参数](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-31#section-4.1.1)中（您应该已经使用该参数来防止 CSRF 攻击），例如通过附加 a `_fb`or`_ig`到它。

但是，更方便的方法是使用不同的回调。

# perl - 创建在函数声明时使用变量值的动态 Perl 函数

> ID：12291923
> 
> 赞同：1
> 
> 时间：2012-09-06T01:47:06.367
> 
> 标签：perl

我想创建一个动态函数，该函数在声明函数时使用（评估？）变量的值。

下面的示例要求 $var 作为全局变量存在，以便在调用函数时可以使用它：

```
my $var = 'something';

someFunction(sub { return $_[0] eq $var; }); 
```

但我猜有一些方法可以创建动态函数，所以它是这样声明的：

```
someFunction(sub { return $_[0] eq 'something'; }); 
```

我怎样才能做到这一点！？:)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T01:55:16.723

有点草率，但它有效：

```
#!/usr/bin/env perl                                                             

use warnings;
use strict;

my $var = 'something';

my $f1 = sub { my $v = $_[0]; return sub { return $_[0] eq  $v } };

my $f2 = $f1->($var);

$var = 'other thing';

print $f2->('something'); 
```

有了 lambda，一切皆有可能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T23:02:27.307

旧的、简单的、直接的封闭有什么问题？

```
sub genf { my $v = shift; sub { shift eq $v } }

my $f = genf('something'); # Or genf($var)

print &$f('something');
print &$f('another thing'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-07T04:31:39.940

像其他人一样，我认为为此目的关闭是可以的。如果编译器可以将其优化到您期望的水平，我什至不会感到惊讶，尽管我没有专家来证明这一点。

不过，我可以尝试你的要求，但我不推荐它。

```
my $var = 'something';

my $sub = eval 'sub { return $_[0] eq \'' . $var .  '\'}';

someFunction( $sub ); 
```

您将代码引用构建为字符串，使用 的值，`$var`然后将`eval`其编译为 Perl 代码。请注意，您必须包含额外的引号，因为在评估代码时，内容`$var`将是一个裸字符串。

同样，不建议这样做。为什么？因为它很危险，尤其是如果内容`$var`来自外部世界。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-09T20:42:50.380

如何捕获它的本地副本？

```
someFunction( do { my $v = $var; sub { $_[0] eq $v } } ); 
```

这样，即使`$var`后来被修改，匿名子仍然使用其原始值的本地副本。

# python - 1366 mysql 对注音符号的字符串值不正确

> ID：12291926
> 
> 赞同：1
> 
> 时间：2012-09-06T01:47:57.123
> 
> 标签：python, mysql, utf-8, mysql-python

从 MySQLdb 引发“不正确的字符串值错误”。

```
_mysql_exceptions.OperationalError: (1366, "Incorrect string value: '\\xF0\\xA0\
\x84\\x8E\\xE2\\x8B...' for column 'from_url' at row 1") 
```

但是我已经将连接字符集和从 url 编码设置为 utf8。对于以前的数百万条记录，它可以毫无问题地工作。

会导致异常的值：我认为这个问题与特殊字符 u'\U0002010e'（中文特殊字符“ㄋ”）有关

```
u'http://www.ettoday.net/news/20120227/27879.htm?fb_action_ids=305328666231772&
fb_action_types=og.likes&fb_source=aggregation&fb_aggregation_id=288381481237582
 \u7c89\u53ef\u611b\U0002010e\u22ef http://www.ettoday.net/news/20120221/26254.h
tm?fb_action_ids=305330026231636&fb_action_types=og.likes&fb_source=aggregation&
fb_aggregation_id=288381481237582 \u597d\u840c\u53c8\u22ef' 
```

但是这个字符也可以在 python 中编码为 utf8。

```
>>> u'\U0002010e'.encode('utf8')
'\xf0\xa0\x84\x8e' 
```

那么为什么 MySQL 不能接受这个字符呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T02:30:06.277

您使用的字符在 BMP 之外，因此需要**4**个字节来存储。使用`utf8`字符集是不够的；您必须拥有 MySQL 5.5 或更高版本，并改用**`utf8mb4`**字符集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T02:29:06.260

检查您为 mysql 设置的字符集编码，并确保您使用的是接受 utf8 编码的字符集

# c# - 在 Windows 8 中以编程方式向 StackPanel 添加边框

> ID：12291927
> 
> 赞同：5
> 
> 时间：2012-09-06T01:48:01.657
> 
> 标签：c#, wpf, code-behind

我正在尝试在需要以编程方式添加的 StackPanel 后面的 C# 代码中设置以下属性：

```
BorderThickness
BorderBrush 
```

关于如何以编程方式设置这些的任何想法？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-09-05T13:23:12.623

我知道这是一年后的事，但我已经找到了答案，以防有人仍然需要它。

[这是一个完整的例子](http://msdn.microsoft.com/en-us/library/vstudio/ms743314%28v=vs.90%29.aspx)

```
// Create a StackPanel and Add children
StackPanel myStackPanel = new StackPanel();
Border myBorder1 = new Border();
myBorder1.Background = Brushes.SkyBlue;
myBorder1.BorderBrush = Brushes.Black;
myBorder1.BorderThickness = new Thickness(1);
TextBlock txt1 = new TextBlock();
txt1.Foreground = Brushes.Black;
txt1.FontSize = 12;
txt1.Text = "Stacked Item #1";
myBorder1.Child = txt1;

Border myBorder2 = new Border();
myBorder2.Background = Brushes.CadetBlue;
myBorder2.Width = 400;
myBorder2.BorderBrush = Brushes.Black;
myBorder2.BorderThickness = new Thickness(1);
TextBlock txt2 = new TextBlock();
txt2.Foreground = Brushes.Black;
txt2.FontSize = 14;
txt2.Text = "Stacked Item #2";
myBorder2.Child = txt2;

// Add the Borders to the StackPanel Children Collection
myStackPanel.Children.Add(myBorder1);
myStackPanel.Children.Add(myBorder2);
mainWindow.Content = myStackPanel; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T02:25:29.187

StackPanel 没有 BorderThickness 或 BorderBrush 属性。只有背景。如果要设置这些，则需要将 StackPanel 包装在边框控件中：

```
<Border  x:Name="StackBorder">
<StackPanel>
</Border> 
```

然后您可以致电：

```
StackBorder.BorderThickness = new Thickness(1);
StackBorder.BorderBrush = new Windows.UI.Xaml.Media.SolidColorBrush(Windows.UI.Colors.Red); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T02:21:35.130

您不能在[StackPanel](http://msdn.microsoft.com/en-us/library/system.windows.controls.stackpanel.aspx)对象本身上设置边框属性。您将 StackPanel 对象放置在[Border](http://msdn.microsoft.com/en-us/library/system.windows.controls.border.aspx)对象中，并使用以下内容在 Border 对象上设置`BorderThickness`和`BorderBrush`属性：

```
myBorder.BorderBrush = Brushes.Black;
myBorder.BorderThickness = new Thickness(1); 
```

# sql - 在 Grails 中使用 groovy.sql.Sql 或 JDBC 进行连接池和准备语句

> ID：12291930
> 
> 赞同：6
> 
> 时间：2012-09-06T01:49:17.373
> 
> 标签：sql, grails, jdbc, groovy

今天碰到这个问题：[Grails query not using GORM](https://stackoverflow.com/questions/4600729/grails-query-not-using-gorm/4600991#4600991)不知道使用groovy.sql.Sql还是JDBC有连接池的好处？

我可以看到在某些情况下使用 GORMless 可能是有益的，但缺乏 conn pooling 会消除它作为一种选择。

我们是否也能从准备好的语句中获益？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-06T02:40:34.277

a 的主要用途之一`DataSource`是提供[连接池。](http://docs.oracle.com/javase/6/docs/api/javax/sql/DataSource.html)如果您已设置`pooled = true`，`DataSource.groovy`则注入的 dataSource 将在您执行查询时为您提供来自池的连接。

Groovy SQL 还提供使用预准备语句的查询：

```
def sql = new Sql(dataSource)
def params = [10, 'Groovy', 'http://groovy.codehaus.org']
sql.execute 'insert into PROJECT (id, name, url) values (?, ?, ?)', params 
```

您还可以`PreparedStatement`在 Sql 对象上启用缓存以提高性能：

```
sql.cacheStatements = true 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-06T01:57:20.423

如果您的数据源配置为使用连接池，则 groovy sql 将从中受益。

使用服务示例：

```
class MyService {
  //inject dataSource
  def dataSource

  def myMethod() {
    Sql sql = new Sql(dataSource) 
    sql.execute("insert...") //this will get a connection from the pool
    sql.close() //this will release the connection back to pool
  }
} 
```

要为您的方法使用相同的连接，请检查[cacheConnection](http://groovy.codehaus.org/api/groovy/sql/Sql.html#cacheConnection%28groovy.lang.Closure%29)

# php - 当我在 jquery 中通过 ajax 提交表单时，为什么我在 firebug 控制台中看到许多帖子请求

> ID：12291931
> 
> 赞同：0
> 
> 时间：2012-09-06T01:49:17.310
> 
> 标签：php, javascript, jquery

我正在使用 jquery Form 插件来提交表单。一切正常。

但是当我打开萤火虫控制台并点击提交按钮时，我会看到 10 个具有相同数据的发布请求。

我什至尝试禁用提交按钮，但即便如此，我还是看到了 10 个具有相同帖子数据和响应的帖子请求。

问题是什么

编辑：这就是我正在使用的

```
$(".myform").ajaxForm(options);     
            $('.myform').submit(function() { 
            $(this).ajaxSubmit(); 
                return false; 
            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T02:06:33.193

什么时候

```
$('.myform').submit(function() { 
    $(this).ajaxSubmit(); 
        return false; 
}); 
```

叫你立即提交表格。对于您的应用程序，可能只需要

```
$(".myform").ajaxForm(); 
```

或者你可能需要包装

```
$('.myform').submit(function() { 
    $(this).ajaxSubmit(); 
        return false; 
}); 
```

在按下提交按钮时调用的函数中。我在这里有点猜测，因为我只看到了您发布的有限代码。

# javascript - 如何使用 jquery 循环浏览元素并显示/隐藏它们？

> ID：12291934
> 
> 赞同：0
> 
> 时间：2012-09-06T01:49:41.673
> 
> 标签：javascript, jquery

最后我的第一个-希望是-简单的问题。

我正在为我的客户编写一个工具，我计划在向他们提供访问信息时解释如何使用它，但以防万一，我会弹出“工具提示”来帮助他们。

我正在尝试编写一种教程，它将遍历页面上的元素，弹出它们的工具提示，然后在短暂延迟后转到下一个元素（显然首先隐藏元素）

这是我得到的：“#show-help”是我的按钮，“.hashelp”表示该类有一个工具提示，“.help”是实际的工具提示。现在它正在突出显示所有“.hashelp”元素，但没有显示我的工具提示。我正在使用“i”来逐步延迟每个步骤。

```
$("#showhelp").click(function(){
         var i = 0;
            $(".hashelp").each(function(){
                $(this).find(".help").eq(0).css("top",$(this).offset().top +10);
                $(this).find(".help").eq(0).css("left",$(this).offset().left +10);
                $(this).delay(i*5000).effect("highlight", {color: "yellow"},5000);
                $(this).find(".help").eq(0).delay(i*5000).show().delay((i+1)*5000).hide();
                i++;
         });
    }); 
```

任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T03:31:23.397

您的问题在于您使用`delay()`. 不幸的是，它只适用于 jQuery 的动画效果框架。这在`delay()`API 文档^([1](http://api.jquery.com/delay/))中有明确解释：

> 只有队列中的后续事件被延迟；例如，这不会延迟不使用效果队列的 .show() 或 .hide() 的无参数形式。

所以有一些关于如何处理它的选择。修复代码的最简单（如果可能有点性能要求高）的方法是“动画化”`show()`并`hide()`给它们 0 的持续时间：

```
$(this).find(".help").eq(0).delay(i*5000).show(0).delay((i+1)*5000).hide(0); 
```

但你也应该记住，你的第一次延迟可能不起作用，因为效果队列上可能没有任何东西（这是我的一个薄弱领域，所以试试看）。您可能需要在其中添加额外`hide(0)`的东西以确保效果队列中有一些东西：

```
$(this).find(".help").eq(0).hide(0).delay(i*5000).show(0).delay((i+1)*5000).hide(0); 
```

仅当您发现有必要使事情正常进行时才这样做。

或者，您可以使用一系列`setTimeout()`调用，但这对代码来说会很尴尬，所以只有在看到性能问题时才这样做。

# java - ViewPager：OutOfResourcesException 锁定面

> ID：12291941
> 
> 赞同：0
> 
> 时间：2012-09-06T01:50:31.943
> 
> 标签：java, android, android-viewpager, surfaceview, viewpagerindicator

```
E/Surface(11901): Surface (identity=16464) requestBuffer(1, 0, 0, 0, 00000033) 
    returned a buffer with a null handle
E/Surface(11901): getBufferLocked(1, 0, 0, 0, 00000033) failed (Out of memory)
E/Surface(11901): dequeueBuffer failed (Out of memory)
E/ViewRoot(11901): OutOfResourcesException locking surface
E/ViewRoot(11901): android.view.Surface$OutOfResourcesException
E/ViewRoot(11901):  at android.view.Surface.lockCanvasNative(Native Method)
E/ViewRoot(11901):  at android.view.Surface.lockCanvas(Surface.java:314)
E/ViewRoot(11901):  at android.view.ViewRoot.draw(ViewRoot.java:1467)
E/ViewRoot(11901):  at android.view.ViewRoot.performTraversals(ViewRoot.java:1260)
E/ViewRoot(11901):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1873)
E/ViewRoot(11901):  at android.os.Handler.dispatchMessage(Handler.java:99)
E/ViewRoot(11901):  at android.os.Looper.loop(Looper.java:130)
E/ViewRoot(11901):  at android.app.ActivityThread.main(ActivityThread.java:3703)
E/ViewRoot(11901):  at java.lang.reflect.Method.invokeNative(Native Method)
E/ViewRoot(11901):  at java.lang.reflect.Method.invoke(Method.java:507)
E/ViewRoot(11901):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller
    .run(ZygoteInit.java:841)
E/ViewRoot(11901):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
E/ViewRoot(11901):  at dalvik.system.NativeStart.main(Native Method)

E/Surface(11901): Surface (identity=16461) requestBuffer(1, 0, 0, 0, 00000033) 
    returned a buffer with a null handle
E/Surface(11901): getBufferLocked(1, 0, 0, 0, 00000033) failed (Out of memory)
E/Surface(11901): dequeueBuffer failed (Out of memory)
E/ViewRoot(11901): OutOfResourcesException locking surface
E/ViewRoot(11901): android.view.Surface$OutOfResourcesException
E/ViewRoot(11901):  at android.view.Surface.lockCanvasNative(Native Method)
E/ViewRoot(11901):  at android.view.Surface.lockCanvas(Surface.java:314)
E/ViewRoot(11901):  at android.view.ViewRoot.draw(ViewRoot.java:1467)
E/ViewRoot(11901):  at android.view.ViewRoot.performTraversals(ViewRoot.java:1260)
E/ViewRoot(11901):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1873)
E/ViewRoot(11901):  at android.os.Handler.dispatchMessage(Handler.java:99)
E/ViewRoot(11901):  at android.os.Looper.loop(Looper.java:130)
E/ViewRoot(11901):  at android.app.ActivityThread.main(ActivityThread.java:3703)
E/ViewRoot(11901):  at java.lang.reflect.Method.invokeNative(Native Method)
E/ViewRoot(11901):  at java.lang.reflect.Method.invoke(Method.java:507)
E/ViewRoot(11901):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller
    .run(ZygoteInit.java:841)
E/ViewRoot(11901):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
E/ViewRoot(11901):  at dalvik.system.NativeStart.main(Native Method)

E/Surface(11901): Surface (identity=16462) requestBuffer(1, 0, 0, 0, 00000033) 
    returned a buffer with a null handle
E/Surface(11901): getBufferLocked(1, 0, 0, 0, 00000033) failed (Out of memory)
E/Surface(11901): dequeueBuffer failed (Out of memory)
E/ViewRoot(11901): OutOfResourcesException locking surface
E/ViewRoot(11901): android.view.Surface$OutOfResourcesException
E/ViewRoot(11901):  at android.view.Surface.lockCanvasNative(Native Method)
E/ViewRoot(11901):  at android.view.Surface.lockCanvas(Surface.java:314)
E/ViewRoot(11901):  at android.view.ViewRoot.draw(ViewRoot.java:1467)
E/ViewRoot(11901):  at android.view.ViewRoot.performTraversals(ViewRoot.java:1260)
E/ViewRoot(11901):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1873)
E/ViewRoot(11901):  at android.os.Handler.dispatchMessage(Handler.java:99)
E/ViewRoot(11901):  at android.os.Looper.loop(Looper.java:130)
E/ViewRoot(11901):  at android.app.ActivityThread.main(ActivityThread.java:3703)
E/ViewRoot(11901):  at java.lang.reflect.Method.invokeNative(Native Method)
E/ViewRoot(11901):  at java.lang.reflect.Method.invoke(Method.java:507)
E/ViewRoot(11901):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller
    .run(ZygoteInit.java:841)
E/ViewRoot(11901):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
E/ViewRoot(11901):  at dalvik.system.NativeStart.main(Native Method)

E/Surface(11901): Surface (identity=16463) requestBuffer(1, 0, 0, 0, 00000033) 
    returned a buffer with a null handle
E/Surface(11901): getBufferLocked(1, 0, 0, 0, 00000033) failed (Out of memory)
E/Surface(11901): dequeueBuffer failed (Out of memory)
E/ViewRoot(11901): OutOfResourcesException locking surface
E/ViewRoot(11901): android.view.Surface$OutOfResourcesException
E/ViewRoot(11901):  at android.view.Surface.lockCanvasNative(Native Method)
E/ViewRoot(11901):  at android.view.Surface.lockCanvas(Surface.java:314)
E/ViewRoot(11901):  at android.view.ViewRoot.draw(ViewRoot.java:1467)
E/ViewRoot(11901):  at android.view.ViewRoot.performTraversals(ViewRoot.java:1260)
E/ViewRoot(11901):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1873)
E/ViewRoot(11901):  at android.os.Handler.dispatchMessage(Handler.java:99)
E/ViewRoot(11901):  at android.os.Looper.loop(Looper.java:130)
E/ViewRoot(11901):  at android.app.ActivityThread.main(ActivityThread.java:3703)
E/ViewRoot(11901):  at java.lang.reflect.Method.invokeNative(Native Method)
E/ViewRoot(11901):  at java.lang.reflect.Method.invoke(Method.java:507)
E/ViewRoot(11901):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller
    .run(ZygoteInit.java:841)
E/ViewRoot(11901):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
E/ViewRoot(11901):  at dalvik.system.NativeStart.main(Native Method) 
```

ViewPagerFragment.java

```
package nsixty.crew.app;

import java.util.List;
import java.util.Vector;

import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentPagerAdapter;
import android.support.v4.view.ViewPager;

import com.viewpagerindicator.TitlePageIndicator;
import com.viewpagerindicator.TitleProvider;

public class ViewPagerFragment extends FragmentActivity {

    private CustomFragmentAdapter mPagerAdapter;

    ViewPager pager;
    TitlePageIndicator titleIndicator;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        super.setContentView(R.layout.viewpager);

        this.initialisePaging();

    }

    private void initialisePaging() {

        List<Fragment> fragments = new Vector<Fragment>();

        fragments
                .add(Fragment.instantiate(this, LoginActivity.class.getName()));
        fragments.add(Fragment.instantiate(this, main.class.getName()));
        this.mPagerAdapter = new CustomFragmentAdapter(
                super.getSupportFragmentManager(), fragments);
        pager = (ViewPager) findViewById(R.id.viewpager);
        pager.setAdapter(this.mPagerAdapter);
//        titleIndicator = (TitlePageIndicator) findViewById(R.id.);
//        titleIndicator.setViewPager(pager);
    }

    public static class CustomFragmentAdapter extends FragmentPagerAdapter
            implements TitleProvider {
        public static final int POSITION_PAGE_1 = 0;
        public static final int POSITION_PAGE_2 = 1;
        public static final int POSITION_PAGE_3 = 2;
        private List<Fragment> fragments;
        private static final String[] TITLES = new String[] { "LOGIN", "HOME" };
        public static final int NUM_TITLES = TITLES.length;

        @Override
        public String getTitle(int position) {
            return TITLES[position];
        }

        public CustomFragmentAdapter(FragmentManager fm,
                List<Fragment> fragments) {
            super(fm);
            this.fragments = fragments;
        }

        @Override
        public int getCount() {
            // return this.fragments.size();
            return NUM_TITLES;
        }

        @Override
        public Fragment getItem(int position) {

            try {
                LoginActivity.class.newInstance();
            } catch (InstantiationException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IllegalAccessException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            return this.fragments.get(position);
        }
    }
} 
```

**类似问题**

[链接 1](https://stackoverflow.com/questions/11360534/android-view-surface-outofresourcesexception) ,[链接 2](https://stackoverflow.com/questions/6549725/android-view-surface-outofresourcesexception)

帮助，我需要帮助不知道这些是什么错误我已经研究过，我没有看到任何合理的答案......这很奇怪，我不知道这些是什么错误。我只是在做一个只有两张幻灯片的简单视图寻呼机。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T16:58:55.997

我从我的`main.java`. 我有菜单类（在选项创建）一半评论留下选项创建类和 xml 值在错误的 xml 文件中。对于那些面临这种问题的人，这是我为诊断这个问题所做的：

*   我创建了两个只有一个按钮属性的空类（轻量级片段）。
*   然后我测试它是否有效。
*   然后我尝试了我正在使用的每个片段中的一个（即登录活动和主要活动）......就像这样`LoginActivity`，样本 1 片段工作。
*   然后我尝试了 main 和 sample 1 或 2，但我发现它不起作用，问题出在 main 上，所以我跟踪它并发现它是什么。

我希望这会有所帮助..
无论如何，我使用这个[View pager extensions](https://github.com/astuetz/ViewPagerExtensions/)来完善我的项目。

# unit-testing - 如何在 Play Framework v2 中指定自定义数据库连接参数以进行测试？

> ID：12291942
> 
> 赞同：1
> 
> 时间：2012-09-06T01:50:31.020
> 
> 标签：unit-testing, postgresql, scala, playframework-2.0

我想针对不同的 PostgreSQL 数据库运行我的测试，而不是内存数据库选项或为本地应用程序设置配置的默认数据库（通过`db.default.url`配置变量）。我尝试使用`%test.db`和相关的配置变量（如此[处所示](https://stackoverflow.com/questions/7477330/playframework-evolutions-files-compatible-with-both-postgres-and-h2)），但这似乎不起作用；我认为这些说明适用于 Play Framework v1。

仅供参考，测试数据库将预先定义其架构，并且不需要在每次测试运行时创建和销毁。（虽然，我不介意它是否在每次测试运行时重新创建和销毁，但我不想使用“进化”来这样做；我现在正在使用一个 SQL 模式文件.)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T06:12:38.793

在本地开发时使用[替代配置文件](http://www.playframework.org/documentation/2.0.3/ProductionConfiguration)来覆盖数据库凭据（和其他设置），即。就像[另一个答案（更新1）](https://stackoverflow.com/questions/12284312/playframework-2-storing-your-credentials/12290415#12290415)中描述的那样。

提示：在开发和生产中使用不同类型的数据库会很快导致错误和错误，因此最好在本地安装相同的数据库进行开发和测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T04:51:22.903

我们能够在 Play 2.x 之上实现 Play 1.x 风格的配置——尽管我敢打赌 Play 的创建者听到这个消息会感到畏缩。

该代码不是完全可共享的，但基本上，您只需覆盖 GlobalSettings 中的“配置”方法：[http://www.playframework.org/documentation/api/2.0.3/scala/index.html#play。 api.GlobalSettings](http://www.playframework.org/documentation/api/2.0.3/scala/index.html#play.api.GlobalSettings)

您可以检查某些系统的 conf 设置，例如“environment.tag=%test”，然后将“%test.foo=bar”的所有配置覆盖为“foo=bar”。

# php - 有没有办法 json_encode 只到一定深度？

> ID：12291943
> 
> 赞同：0
> 
> 时间：2012-09-06T01:50:36.600
> 
> 标签：php, json

例如，我可能有一个数组，其中包含 json 元素的字符串。如果我想 json_encode 这个数组，我必须首先 json_decode json 字符串的元素，然后 json_encode 数组。否则，我将编码已经编码的 json。

# jsf - WELD-001410：注入点具有不可代理的依赖关系

> ID：12291945
> 
> 赞同：4
> 
> 时间：2012-09-06T01:50:52.600
> 
> 标签：jsf, proxy, cdi

我有两个托管 Bean：

会话豆：

```
@Named(value = "sessionBean")
@SessionScoped
public class SessionBean implements Serializable {

  private final Param param

  SessionBean(Param param) {
      this.param = param;
  }

} 
```

和 TypesBean：

```
@Named(value = "typesBean")
@RequestScoped
public class TypesBean {

  @Inject
  private SessionBean session;

} 
```

该项目构建，但不部署：

> 部署期间发生错误：加载应用程序时出现异常：WELD-001410 注入点 [field] @Inject private com.example.TypesBean.session 具有不可代理的依赖项。有关详细信息，请参阅 server.log。

有什么问题？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-12-19T21:24:36.303

问题是 SessionBean 类上缺少可访问的无参数构造函数。

OP指出的一种解决方案是：

> “问题出在`final`SessionBean 的方法中。删除`final` 和公开方法 - 解决问题。抱歉浪费您的时间。”

或者...

```
@Named(value = "sessionBean")
@SessionScoped
public class SessionBean implements Serializable {

  . . . //variables, setters, getters and other methods
  private final Param param

  public SessionBean(Param param) {
      this.param = param;
  }
  // no-args constructor used by CDI for proxying only 
  // but is subsequently replaced with an instance 
  // created using the above constructor. 
  protected SessionBean() {
     this(null);
  } 
```

# php - 类函数中的 PHP 函数包括

> ID：12291946
> 
> 赞同：0
> 
> 时间：2012-09-06T01:50:52.643
> 
> 标签：php, class, function

我正在使用柠檬水-php。我的代码位于[https://github.com/sofadesign/limonade](https://github.com/sofadesign/limonade)。

我遇到的问题是当我尝试运行时

```
class syscore {

    public function hello(){
        set('post_url',  params(0));
        include("./templates/{$this->temp}/fullwidth.tpl"); 
        return render('fullwidth');

    }

} 
```

然后加载 fullwidth.tpl 并运行函数 fullwidth

全宽.tpl

```
<?php

global $post;
function fullwidth($vars){ 
    extract($vars);
    $post = h($post_url);

}

    print_r($this->post($post));    

?> 
```

它似乎通过了，`$post_url`但我不能再次将它传递给`print_r($this->post($post));`

但是，当我尝试`print_r($this->post($post))`在全角函数中运行时，它说找不到该`post()`函数

我已经尝试了很多类似下面的东西

```
function fullwidth($vars){ 
        extract($vars);
        $post = h($post_url);
    print_r(post($post));
} 
```

我尝试通过重新连接到 syscore

```
$redi = new syscore();
$redi->connection() <-- this works
$redi->post($post) <-- this does not 
```

这是我的全班系统核心

```
class syscore {

    // connect
    public function connect($siteDBUserName,$siteDBPass,$siteDBURL,$siteDBPort, $siteDB,$siteTemp){
        for ($i=0; $i<1000; $i++) {
         $m = new Mongo("mongodb://{$siteDBUserName}:{$siteDBPass}@{$siteDBURL}:{$siteDBPort}", array("persist" => "x", "db"=>$siteDB));
        }

        // select a database
       $this->db = $m->$siteDB;
       $this->temp = $siteTemp;
    }

    public function hello(){
        set('post_url',  params(0));
        include("./templates/{$this->temp}/fullwidth.tpl"); 
        return render('fullwidth');

    }

    public function menu($data)
    {

        $this->data = $data;
        $collection = $this->db->redi_link;
        // find everything in the collection
        //print $PASSWORD;
        $cursor = $collection->find(array("link_active"=> "1"));

        if ($cursor->count() > 0)
        {
            $fetchmenu = array();
            // iterate through the results
            while( $cursor->hasNext() ) {   
                $fetchmenu[] = ($cursor->getNext());
            }
            return $fetchmenu;
        }
        else
        {
            var_dump($this->db->lastError());
        }
    }

    public function post($data)
    {

        $this->data = $data;
        $collection = $this->db->redi_posts;
        // find everything in the collection
        //print $PASSWORD;
        $cursor = $collection->find(array("post_link"=> $data));

        if ($cursor->count() > 0)
        {
            $posts = array();
            // iterate through the results
            while( $cursor->hasNext() ) {   
                $posts[] = ($cursor->getNext());
            }
            return $posts;
        }
        else
        {
            var_dump($this->db->lastError());
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T06:56:03.130

看起来您在理解 PHP 在尝试呈现模板时所采用的执行路径时遇到了一些问题。让我们更深入地看看，好吗？

```
// We're going to call "syscore::hello" which will include a template and try to render it
public function hello(){
    set('post_url',  params(0));  // set locals for template
    include("./templates/{$this->temp}/fullwidth.tpl");  // include the template
    return render('fullwidth'); // Call fullwidth(array('post_url' => 'http://example.com/path'))
} 
```

解决这个问题的诀窍是了解 PHP 包含是如何工作的。当你调用你`include("./templates/{$this->temp}/fullwidth.tpl")`的一些代码在 syscore 对象的范围内执行时，即：

```
global $post; 
```

和

```
print_r($this->post($post)); 
```

`fullwidth`此时在全局范围内创建，但尚未调用。当`render`调用`fullwidth`时你不再在`syscore`范围内，这就是为什么你不能`$this->post($post)`在不触发错误的情况下放入。

好的，那我们怎么解决呢？很高兴你问。

1.  我们可能会重构`syscore::post`为静态方法，但这需要`syscore::db`是静态的，并且总是返回相同的 mongodb 实例（单例模式）。您绝对不想`Mongo`为每个实例创建 1000 个`syscore`实例。

2.  我们可以滥用框架。一个更糟糕的解决方案，但它会完成工作。

全宽.tpl

```
<?php

function fullwidth($vars){ 
    $post_url = ''; // put the variables you expect into the symbol table
    extract($vars, EXTR_IF_EXISTS); // set EXTR_IF_EXISTS so you control what is added.
    $syscore_inst = new syscore; 
    $post = h($post_url);
    print_r($syscore->post($post)); // I think a puppy just died.    
} 
```

看第二种方式是一个完整的黑客，编写这样的代码可能意味着你不会得到提升。但它应该工作。

但是假设你想得到提升，你会写出好的、闪亮的代码。

```
// Note: Capitalized class name
class Syscore {
protected static $_db;

public static function db () {
    if (! static::$_db) {
        static::$_db = new Mongo(...);
    }
    return static::$_db;
}

// @FIXME rename to something more useful like "find_posts_with_link"
public static post($url) {
    $collection = static::db()->redi_posts;
    // find everything in the collection
    $cursor = $collection->find(array("post_link"=> $url));

    // Changed to a try-catch, since we shouldn't presume an empty find is
    // an error.
    try {
        $posts = array();
        // iterate through the results
        while( $cursor->hasNext() ) {   
            $posts[] = ($cursor->getNext());
        }
        return $posts;
    } catch (Exception $e) {
        var_dump($this->db->lastError());
    }
}

} 
```

然后在您的全角函数中，我们不必做任何愚蠢的废话，将实例方法视为静态方法。

```
function fullwidth($vars){ 
    $post_url = ''; // put the variables you expect into the symbol table
    extract($vars, EXTR_IF_EXISTS); // set EXTR_IF_EXISTS so you control what is added.
    $post = h($post_url);
    print_r(Syscore::post($post)); // static method. \O/ Rainbows and unicorns.   
} 
```

# java - 使用对称密钥加密纯文本文件并在 Java 中解密它们

> ID：12291947
> 
> 赞同：0
> 
> 时间：2012-09-06T01:51:17.550
> 
> 标签：java

我想使用对称密钥加密文件并使用 java 中的游戏密钥对其进行解密而不会丢失数据，我尝试对 56 字节文件进行加密，结果文件为 10 字节，这让我觉得我在某个地方出错了.

有没有关于如何使用对称密钥在java中加密和解密文件的教程？（以及如何获得所说的钥匙？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T02:04:16.313

这是一个简短的好教程：[http ://www.javamex.com/tutorials/cryptography/symmetric.shtml](http://www.javamex.com/tutorials/cryptography/symmetric.shtml)

这是一个相关的问题：[Java using AES 256 and 128 Symmetric-key encryption](https://stackoverflow.com/questions/6538485/java-using-aes-256-and-128-symmetric-key-encryption)

希望它会有所帮助。

# go - 为什么我的 golang 无锁队列总是卡在那里？

> ID：12291949
> 
> 赞同：2
> 
> 时间：2012-09-06T01:52:20.117
> 
> 标签：go

这是我的代码：

```
package main

import (
    "sync/atomic"
    "unsafe"
    "sync"
    "fmt"
    "time"
)

const (
    MAX_DATA_SIZE = 100
)

// lock free queue
type Queue struct {
    head unsafe.Pointer
    tail unsafe.Pointer
}
// one node in queue
type Node struct {
    val interface{}
    next unsafe.Pointer
}
// queue functions
func (self *Queue) enQueue(val interface{}) {
    newValue := unsafe.Pointer(&Node{val: val, next: nil})
    var tail,next unsafe.Pointer
    for {
        tail = self.tail
        next = ((*Node)(tail)).next
        if next != nil {
            atomic.CompareAndSwapPointer(&(self.tail), tail, next)
        }else if atomic.CompareAndSwapPointer(&((*Node)(tail).next), nil, newValue){
            break
        }
    }
}

func (self *Queue) deQueue() (val interface{}, success bool){
    var head,tail,next unsafe.Pointer
    for {
        head = self.head
        tail = self.tail
        next = ((*Node)(head)).next
        if head == tail {
            if next == nil {
                return nil, false
            }else {
                atomic.CompareAndSwapPointer(&(self.tail), tail, next)
            }
        }else {
            val = ((*Node)(next)).val
            if atomic.CompareAndSwapPointer(&(self.head), head, next) {
                return val, true
            }
        }
    }
    return
}

func main() {
    var wg sync.WaitGroup
    wg.Add(20)
    queue := new(Queue)
    queue.head = unsafe.Pointer(new(Node))
    queue.tail = queue.head

    for i := 0; i < 10; i++ {
        go func() {
            defer wg.Done()
            for j := 0; j < MAX_DATA_SIZE; j++ {
                t := time.Now()
                queue.enQueue(t)
                fmt.Println("enq = ", t)
            }
        }()
    }

    for i := 0; i < 10; i++ {
        go func() {
            ok := false
            var val interface{}
            defer wg.Done()
            for j := 0; j < MAX_DATA_SIZE; j++ {
                val,ok = queue.deQueue()
                for !ok {
                    val,ok = queue.deQueue()
                }
                fmt.Println("deq = ",val)
            }
        }()
    }

    wg.Wait()
} 
```

问题是，有时代码运行正常，但有时它会失败并且只是卡住没有响应。

我的代码有问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T13:52:25.053

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T18:23:11.247

这是上面用@mkb建议的频道重写的（禁止无限队列大小）。

它没有锁定。

我建议你使用通道，除非你有充分的理由不这样做，因为 Go 团队已经花费大量精力使它们可靠、高性能和易于使用。

```
package main

import (
    "fmt"
    "runtime"
    "sync"
    "time"
)

const (
    MAX_DATA_SIZE = 100
)

func main() {
    runtime.GOMAXPROCS(4)
    var wg sync.WaitGroup
    wg.Add(20)
    queue := make(chan time.Time, 10)

    for i := 0; i < 10; i++ {
        go func() {
            defer wg.Done()
            for j := 0; j < MAX_DATA_SIZE; j++ {
                t := time.Now()
                queue <- t
                fmt.Println("enq = ", t)
            }
        }()
    }

    for i := 0; i < 10; i++ {
        go func() {
            defer wg.Done()
            for j := 0; j < MAX_DATA_SIZE; j++ {
                val := <-queue
                fmt.Println("deq = ", val)
            }
        }()
    }

    wg.Wait()
} 
```

# javascript - 将文本附加到 Twitter 共享链接

> ID：12291950
> 
> 赞同：2
> 
> 时间：2012-09-06T01:52:23.063
> 
> 标签：javascript, twitter

我试图弄清楚如何`Try this recipe`在这个 twitter 共享功能的开头输出文本字符串。所以当你点击按钮分享它会说“试试这个食谱”然后有网址等。谢谢。

```
function load_twitter() {
    var load = window.open('http://twitter.com/share?url='+ window.location.href +'&via=atsbyvermouth','','scrollbars=no,menubar=no,height=450,width=650,resizable=yes,toolbar=no,location=no,status=no');
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T02:43:58.893

很简单，`text=Try this recipe&`先加上这个，即

```
function load_twitter() { 
    window.open('http://twitter.com/share?text=Try this recipe&url='+ window.location.href +'&via=atsbyvermouth','','scrollbars=no,menubar=no,height=450,width=650,resizable=yes,toolbar=no,location=no,status=no'); 
} 
```

[**演示**](http://jsfiddle.net/8nTk5/1/)。

# sql - 您可以通过查询更改数据库中的内容吗

> ID：12291951
> 
> 赞同：0
> 
> 时间：2012-09-06T01:52:52.363
> 
> 标签：sql, database

我有一个名为“URL”的列的数据库，我想将所有行从[http://site.com](http://site.com)更改为 www.site.com。我只想删除 http:// 并替换为 www。在每一行。这可以通过查询还是我需要手动更改它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T01:59:00.327

You don't specify the DBMS you're using, but I would think this sort of solution would work - most anything should have equivalent functions/operators (the below is Oracle SQL):

```
UPDATE table_name
   SET url = CONCAT( 'www.', SUBSTR(url, 8, LENGTH(url) - 7) )
 WHERE url LIKE 'http://%' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T01:54:19.493

这是你想要的吗？你能详细说明你的问题吗？

```
UPDATE tableName
SET `URL` = 'www.site.com'
WHERE `URL` = 'http://site.com' 
```

如何使用`REPLACE`？

```
UPDATE tableName
SET `URL` = REPLACE(LOWER(`URL`), 'http://','www') 
```

我添加了`LOWER()`功能，因为`REPLACE()`它区分大小写。

# asp.net-mvc - 通过在 Nhibernate 中附加现有实体属性来插入新对象

> ID：12291952
> 
> 赞同：0
> 
> 时间：2012-09-06T01:52:53.657
> 
> 标签：asp.net-mvc, nhibernate, fluent-nhibernate

我们为每个对象创建了带有重复选项的屏幕。例如：在创建新客户以及详细信息时，用户可以选择现有客户将关联的组从现有用户复制到新用户。所以我想知道如何为 1:n 和 m:n 场景分配新客户的属性。

1.  对于“客户”和“客户组”。以下方法可以正常工作吗？

    ```
    Customer existing = repo<Customer>(id);

    Customer newCust = new Customer();
    for(var group in existing.Groups)
    newCust.CustomerGroups.Add(new CustomerGroup(){ **AllpropertiesexceptID**, **Customer=newCust** } ); 
    ```

2.  对于 Order 和 OrderItems，由于其 m:n 关系，只需将现有项目附加到新订单。

    现有订单 = repo(id); 订单 newOrder = new Order();
    for(var item in existing.Items) newOrder.Items.Add(item);

是否需要为现有订单或客户执行 Session.Evict 以执行这些操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T21:45:12.787

你可能想太多了。:) 继续创建单独的相似对象，假装 NHibernate 甚至不存在。只要新实例具有不同的（未设置的）身份属性，NHibernate 甚至都不会意识到它们是“副本”。

# c# - 如何检查枚举是否包含数字？

> ID：12291953
> 
> 赞同：93
> 
> 时间：2012-09-06T01:53:14.493
> 
> 标签：c#, .net, enums

我有一个这样的枚举：

```
 public enum PromotionTypes
{
    Unspecified = 0, 
    InternalEvent = 1,
    ExternalEvent = 2,
    GeneralMailing = 3,  
    VisitBased = 4,
    PlayerIntroduction = 5,
    Hospitality = 6
} 
```

我想检查这个 Enum 是否包含我给出的数字。例如：当我给 4 时，Enum 包含那个，所以我想返回 True，如果我给 7，那么这个 Enum 中没有 7，所以它返回 False。我试过 Enum.IsDefine 但它只检查字符串值。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：214
> 
> 时间：2012-09-06T01:56:18.117

该`IsDefined`方法需要*两个参数*。第***一个参数是要检查的枚举类型***。此类型通常使用 typeof 表达式获得。第二***个参数被定义为基本对象***。它用于指定整数值或包含要查找的常量名称的字符串。返回值是一个布尔值，如果值存在则为 true，否则为 false。

```
enum Status
{
    OK = 0,
    Warning = 64,
    Error = 256
}

static void Main(string[] args)
{
    bool exists;

    // Testing for Integer Values
    exists = Enum.IsDefined(typeof(Status), 0);     // exists = true
    exists = Enum.IsDefined(typeof(Status), 1);     // exists = false

    // Testing for Constant Names
    exists = Enum.IsDefined(typeof(Status), "OK");      // exists = true
    exists = Enum.IsDefined(typeof(Status), "NotOK");   // exists = false
} 
```

**[资源](http://www.blackwasp.co.uk/EnumIsDefined.aspx)**

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-06T01:58:39.673

Try this:

```
IEnumerable<int> values = Enum.GetValues(typeof(PromotionTypes))
                              .OfType<PromotionTypes>()
                              .Select(s => (int)s);
if(values.Contains(yournumber))
{
      //...
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-09-06T01:59:27.583

You should use `Enum.IsDefined`.

> I tried Enum.IsDefine but it only check the String value.

I'm 100% sure it will check both string value and int(the underlying) value, at least on my machine.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-08-21T08:27:10.877

也许您想检查并使用字符串值的枚举：

```
string strType;
if(Enum.TryParse(strType, out MyEnum myEnum))
{
    // use myEnum
} 
```

# vb.net - VB.NET 多线程，阻塞线程直到收到通知

> ID：12291956
> 
> 赞同：2
> 
> 时间：2012-09-06T01:53:23.577
> 
> 标签：vb.net, multithreading, events

在开始之前，我必须为两件事道歉。一是我很难用简洁的方式解释事情。二是由于我工作的公司的性质，我需要有点模糊。

我正在努力增强我继承的应用程序的功能。这是一个非常密集的应用程序，运行着我公司日常业务的很大一部分。因此，我仅限于我可以更改的范围——否则我可能会从头开始重写它。无论如何，这是我需要做的：

我有几个线程都执行相同的任务，但在不同的数据输入流上。每个线程通过来自另一个软件系统的 API 进行交互，我们支付许可以写入所谓的通道。不幸的是，我们只许可了一定数量的同时运行的频道，所以这个应用程序应该根据需要将它们打开和关闭。

每个线程都应该等待，直到有可用的通道，为自己锁定通道并执行其处理，然后释放通道。不幸的是，我不知道如何做到这一点，尤其是跨多个线程。我也真的不知道要在 Google 或这个网站上搜索什么，否则我可能会得到我的答案。这是我的想法：

处理通道号分布的类。每个线程调用这个类的一个成员。当它这样做时，它会进入一个队列并阻塞，直到通道处理类识别出我们有一个通道，向等待线程发出一个通道可用的信号并将通道ID传递给它。我什至不知道从哪里开始查找这个。下面我有一些写得很糟糕的 PsuedoCode，我认为它会如何工作。

```
Public Class ChannelHandler

    Private Shared WaitQueue as New Queue(of Thread)
   '// calling thread adds itself to the queue
    Public Shared Sub WaitForChannel(byref t as thread) 
            WaitQueue.enqueue(t)
    End Sub

    Public Shared Sub ReleaseChannel(chanNum as integer)
        '// my own processing to make the chan num available again
    End Sub

    '// this would be running on a separate thread, polling my database
    '// for an available channel, when it finds one, somehow signal
    '// the first thread in the queue that its got a channel and here's the id
     Public Shared Sub ChannelLoop()
           while true
               if WaitQueue.length > 0 then 
                   if thereIsAChannelAvailable then '//i can figure this out my own
                        dim t as thread = ctype(WaitQueue.dequeue(), Thread)
                         lockTheChannel(TheAvailableChannelNumber) 'performed by me
                       '// signal the thread, passing it the channel number
                        t => SignalReady(theAvailableChannelNumber) '// how to signal?
                    end if
                end if
           end while

    End Sub

End Class 
```

进而

```
'// this inside the function that is doing the processing:
ChannelHandler.requestChannel(CurrentThread)
while (waitingForSignal) '// how?
    block                '// how?

dim channelNumber as int => getChannelNumberThatWasSignaledBack

'// perform processing with channelNumber

ChannelHandler.ReleaseChannel(channelNumber) 
```

我正在使用 VB.NET 中的 .NET Framework 3.5。我确信必须为此建立某种机制，但正如我所说，我不知道我应该搜索哪些关键字。任何将我指向正确方向的输入（即要使用的特定 .NET 框架类或代码示例）将不胜感激。如果我需要详细说明任何事情，请告诉我，我会尽我所能。

编辑：我遇到的另一个问题是，这些通道可以在此应用程序之外由用户手动打开/关闭（或作为用户启动事件的结果）。我不关心在线程使用通道时关闭通道（它会抛出异常，然后在下次通过时重新启动。但问题是没有恒定数量的线程争夺一个常数通道数（如果用户手动打开一个，则减少计数等）。这两项都是可变的，所以我不能依赖没有外力的事实（即，这组线程之外的东西，即为什么我通过我的数据库进行一些处理以确定可用的频道号）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T02:10:56.033

我会做什么：

*   `System.Threading.Thread`按`System.Threading.Tasks.Task`班级切换。
*   如果`Task`需要创建新的，但`List(Of Task)`（或在您的示例中`Queue(Of Task)`）计数大于允许的最大值，请使用[Task.WaitAny](http://msdn.microsoft.com/en-us/library/dd270672.aspx)方法。

**编辑：**

当我在手机上回答前一个问题时（这对于编写代码来说非常具有挑战性），现在让我写一个关于如何做到这一点的示例：

```
Imports System.Threading.Tasks
Imports System.Collections.Generic

Public Class Sample

    Private Const MAXIMUM_PERMITTED As Integer = 3
    Private _waitQueue As New Queue(Of Task)

    Public Sub AssignChannel()
        Static Dim queueManagerCreated As Boolean
        If Not queueManagerCreated Then
            Task.Factory.StartNew(Sub() ManageQueue())
            queueManagerCreated = True
        End If

        Dim newTask As New Task(Sub()
                                    ' Connect to 3rd Party software
                                End Sub)
        SyncLock (_waitQueue)
            _waitQueue.Enqueue(newTask)
        End SyncLock
    End Sub

    Private Sub ManageQueue()
        Dim tasksRunning As New List(Of Task)

        While True
            If _waitQueue.Count <= 0 Then
                Threading.Thread.Sleep(10)
                Continue While
            End If

            If tasksRunning.Count > MAXIMUM_PERMITTED Then
                Dim endedTaskPos As Integer = Task.WaitAny(tasksRunning.ToArray)

                If endedTaskPos > -1 AndAlso
                    endedTaskPos <= tasksRunning.Count Then
                    tasksRunning.RemoveAt(endedTaskPos)
                Else
                    Continue While
                End If
            End If

            Dim taskToStart As Task
            SyncLock (_waitQueue)
                taskToStart = _waitQueue.Dequeue()
            End SyncLock

            tasksRunning.Add(taskToStart)
            taskToStart.Start()
        End While
    End Sub

End Class 
```

# javascript - jquery滚动视图不显示滚动条

> ID：12291958
> 
> 赞同：0
> 
> 时间：2012-09-06T01:53:24.360
> 
> 标签：javascript, jquery

我希望创建像附加图像一样的滚动视图

![在此处输入图像描述](../Images/11f569c9d657ff9d548ec6f0da902b4e.png)

它不会显示水平滚动条，而是在顶部和底部显示箭头。当用户的鼠标移过它们时，它将滚动并显示更多项目

是否有任何库/jquery 扩展可以做到这一点？

欢迎任何评论

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T03:03:06.967

您可以选择一个库并轻松实现此目的。

[首先，这是有效的 jsFiddle 链接](http://jsfiddle.net/W3YCc/)

这是它的代码->

**结构**

```
<a href="#" class="prev"></a>
<div id="container">
    <div class="items">
        <div class="item"> Item 1 </div>
        <div class="item"> Item 2 </div>
        <div class="item"> Item 3 </div>
        <div class="item"> Item 4 </div>
        <div class="item"> Item 5 </div>
        <div class="item"> Item 6 </div>
        <div class="item"> Item 7 </div>
        <div class="item"> Item 8 </div>
        <div class="item"> Item 9 </div>
        <div class="item"> Item 10 </div>
        <div class="item"> Item 11 </div>
    </div>
</div>
<a href="#" class="next"></a> 
```

**CSS**

*注意：*任何标有**required**的东西都必须在那里，其他的都是可选的。

```
#container{
    position:relative; /* required */
    overflow:hidden; /* required */
    height:400px; /* required */
    width:180px; /* required */ 
    margin:0px auto;    
}
.items{
    height:10000em;/* required */
    width:180px; /* required */
    position:absolute; /* required */   
}
.item{
    height:55px; /* required */
    margin:10px 0;
    border:1px solid #ddd;    
} 
```

**jQuery**

```
$('#container').scrollable({'vertical' : 'true'}); 
```

[对于这个例子，我利用了 jQuery Tools 提供的可滚动小部件](http://www.jquerytools.org/demos/scrollable/)

# memory - 在磁盘上移动数据时，分形树索引如何执行？

> ID：12291959
> 
> 赞同：6
> 
> 时间：2012-09-06T01:53:26.070
> 
> 标签：memory, data-structures, indexing

我正在学习诸如[TokuDB](http://en.wikipedia.org/wiki/TokuDB)中的分形树索引。我对它用于通过大部分时间写入 CPU 缓存而很少写入速度较慢的 RAM 内存来加快写入速度的策略着迷。但是，分形树索引最终确实必须向 RAM 写入大量数据，然后向磁盘写入大量数据，然后在磁盘上完全写入大量数据。在这里我感到困惑。分形树索引可以有效地做到这一点吗？比 B-tree 在最坏情况下更新磁盘更有效吗？此外，巨大的磁盘重写对该数据的查找时间有什么影响？而且，反之亦然，对该数据进行多次查找对大规模重写的过程有什么影响？

作为回答这个问题的上下文，您应该知道：

*   [我在此幻灯片演示](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&cad=rja&ved=0CCwQFjAB&url=http%3A%2F%2Ftokutek.com%2Fdownloads%2Fmysqluc-2010-fractal-trees.pdf&ei=wPtHUJqDGYjo8gT054D4Dg&usg=AFQjCNFr-GeUd8rV6EmZyx3IPfojTKXMxw)中学到的关于分形树索引的所有知识
*   对于旋转中型硬盘的工作原理，我没有一个好的心智模型。
*   当我说“巨型重写”时，基本上发生的事情是你有两个相同长度（大小`2^largeNumber`）的排序数组，你将它们写入一个排序的（大小）数组`2^(largeNumber+1)`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T02:07:55.443

[我建议您在http://www.youtube.com/watch?v=88NaRUdoWZM](http://www.youtube.com/watch?v=88NaRUdoWZM)观看我的视频，这可能会让您更好地了解分形树索引的工作原理。当索引不适合主内存时，分形树索引能够缓冲大量消息，当缓冲区溢出时，这些消息会慢慢下推树。当他们最终到达叶子节点时，只有一个 IO 来检索叶子并应用所有消息。分形树索引执行的写入 IO 显着减少，因为它们在单个 IO 上聚合了许多操作，并且写入高度压缩。读取 IO 也显着减少，因为它正在读取高度压缩的数据。

我不确定这是否完全回答了您的问题，但希望它有所帮助。

# actionscript-3 - AS3 - 计时器 - 错误 #1009：无法访问空对象引用的属性或方法

> ID：12291962
> 
> 赞同：0
> 
> 时间：2012-09-06T01:53:30.987
> 
> 标签：actionscript-3, flash, flash-cs5.5

我使用 flash cs5.5 为学前班创建了一个简单的数学游戏。我的问题是：

当我第一次点击开始玩游戏时，一切正常，但是当我点击按钮选项或帮助，然后回到主屏幕再次玩时，我的计时器和我的分数被隐藏但它正在运行。我该如何解决？

这是我的计时器代码：

```
var count:Number = 5; // amount of time
var myTimer:Timer = new Timer(1000,count);

myTimer.addEventListener(TimerEvent.TIMER, countdown);
myTimer.start();

    function countdown(event:TimerEvent):void {

    timer_txt.text = String((count)-myTimer.currentCount); //dynamic txt box shows current count
if (((count)-myTimer.currentCount) == 0) {
    gotoAndStop(1, "Scene 8");

}
} 
```

和错误：

```
Error #1009: Cannot access a property or method of a null object reference.at FWM_MENU_fla::MainTimeline/countdown()[FWM_MENU_fla.MainTimeline::frame51:37]
at flash.utils::Timer/_timerDispatch()
at flash.utils::Timer/tick() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T02:16:59.580

在寻求帮助之前：

```
myTimer.stop();
myTimer.removeEventListener(TimerEvent.TIMER, countdown); 
```

如果您等到之后， myTimer 将超出范围并且可能永久无法访问。1009 可能是 timer_txt，当计时器触发时（可能在帮助中），无论您身在何处，它都可能不存在。

# unit-testing - 从解决方案中的其他程序访问类

> ID：12291963
> 
> 赞同：1
> 
> 时间：2012-09-06T01:53:41.207
> 
> 标签：unit-testing, class, multiple-projects

我已经阅读了有关使用程序顶部的“使用”语句来引用程序命名空间的帖子，[这里](https://stackoverflow.com/questions/3554658/how-to-use-a-class-from-one-c-sharp-project-with-another-c-sharp-project)和[这里](https://stackoverflow.com/questions/2306652/how-can-i-refer-to-a-project-from-another-one-in-c)和[这里](https://stackoverflow.com/questions/11383181/how-to-call-classes-from-one-project-in-another-project)。我添加了适当的引用，公开了类，并引用了适当的命名空间。我相信我的设置是正确的......老实说，在这里问这样一个基本问题我觉得有点傻，但我很难过。我一定是遗漏了一些东西，因为它仍然无法正常工作，而且我无法弄清楚。

我正在尝试学习如何使用 Nunit 运行单元测试，同时将测试与主程序分开。这是我到目前为止的代码：

Program.cs 和 Account.cs 在第一个项目中（NUnitTestProgramWithSeparation）

程序.cs --

```
 using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Text;

    namespace NUnitTestProgramWithSeparation
    {
        public class MyAccountingSoftware
        {
            public static void Main()
            {
                Account DemoAccount = new Account();
                DemoAccount.Deposit(1000.00F);
                DemoAccount.Withdraw(500.50F);
                Console.WriteLine("Our account balance is {0}", DemoAccount.Balance);
            }
        }
    } 
```

帐户.cs --

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace NUnitTestProgramWithSeparation
{
    public class Account
    {
        private float balance;
        public void Deposit(float amount)
        {
            balance += amount;
        }

        public void Withdraw(float amount)
        {
            balance -= amount;
        }

        public void TransferFunds(Account destination, float amount)
        {
        }

        public float Balance
        {
            get { return balance; }
        }
    }
} 
```

然后，在名为 UnitTests 的第二个项目中，我有 UnitTests.cs：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using NUnit.Framework;
using NUnitTestProgramWithSeparation;

namespace UnitTests
{
    [TestFixture]
    public class UnitTests
    {
        [Test]
        public void TransferFunds()
        {
            Account source = new Account();
            source.Deposit(200.00F);
            Account destination = new Account();
            destination.Deposit(150.00F);

            source.TransferFunds(destination, 100.00F);
            Assert.AreEqual(250.00F, destination.Balance);
            Assert.AreEqual(100.00F, source.Balance);
        }

        [Test]
        public void DepositFunds()
        {
            Account source = new Account();
            source.Deposit(200.00F);
            Assert.AreEqual(200.00F, source.Balance);
        }
    }
} 
```

当我去编译时，UnitTest.cs 中的所有帐户引用都出现错误，提示“找不到类型或命名空间名称'帐户'（您是否缺少 using 指令或程序集引用？）”

我真的不知道我在哪里出错了......任何帮助都将不胜感激。

# mysql - 以编程方式重新排序 SQL 列？

> ID：12291964
> 
> 赞同：0
> 
> 时间：2012-09-06T01:53:56.497
> 
> 标签：mysql, sql

我有一些 SQL 代码来创建我的表，其中所有列名按字母顺序排列。我需要使用 SQL DATA LOADINFILE 加载的数据格式完全不同。我可能有 1000 列需要重新排序以匹配我的 CSV。

我正在尝试找到一种自动执行此操作的方法。SQL 代码是：

```
CREATE TABLE rets_property_cnd (
`AgentCoListFirstName` VARCHAR(50) COMMENT 'Co-Listing Agent First Name',
`AgentCoListFullName` VARCHAR(75) COMMENT 'Co-Listing Agent Full Name',
`AgentCoListID` VARCHAR(8) COMMENT 'Co-Listing Agent ID ',
`AgentCoListLastName` VARCHAR(50) COMMENT 'Co-Listing Agent Last Name',
`AgentCoListPhone` VARCHAR(25) COMMENT 'Co-Listing Agent Phone',
`AgentListFirstName` VARCHAR(50) COMMENT 'Listing Agent First Name',
`AgentListFullName` VARCHAR(75) COMMENT 'Listing Agent Full Name',
`AgentListID` VARCHAR(8) COMMENT 'Listing Agent ID',
`AgentListLastName` VARCHAR(50) COMMENT 'Listing Agent Last Name',
`AgentListPhone` VARCHAR(25) COMMENT 'Listing Agent Phone',
`AppliancesOther` TEXT COMMENT 'Appliances Other',
`AreaID` VARCHAR(50) COMMENT 'Area',
`AssociationFee` INT(3) COMMENT 'Association Fee',
`AssociationFeeIncludes` TEXT COMMENT 'Association Fee Includes',
`BasementDesc` VARCHAR(50) COMMENT 'Basement Description',
`BasementType` VARCHAR(50) COMMENT 'Basement Type',
`BedroomFourDim` VARCHAR(5) COMMENT 'Bedroom 4 Dimensions',
`BedroomOneDesc` VARCHAR(50) COMMENT 'Bedroom 1 Description',
`BedroomOneDim` VARCHAR(5) COMMENT 'Bedroom 1 Dimensions',
`BedroomsBasement` INT(2) COMMENT 'Bedrooms Basement',
`BedroomsMain` INT(2) COMMENT 'Bedrooms Main',
`BedroomsOther` INT(2) COMMENT 'Bedrooms Other',
`BedroomsSecond` INT(2) COMMENT 'Bedrooms Second',
`BedroomsThird` INT(2) COMMENT 'Bedrooms Third',
`BedroomThreeDim` VARCHAR(5) COMMENT 'Bedroom 3 Dimensions',
`BedroomTwoDesc` VARCHAR(50) COMMENT 'Bedroom 2 Description',
`BedroomTwoDim` VARCHAR(5) COMMENT 'Bedroom 2 Dimensions',
`BuiltInfo` VARCHAR(50) COMMENT 'Built Information',
`City` VARCHAR(20) COMMENT 'City',
`CommunityAmenities` TEXT COMMENT 'Community Amenities',
`CompletionDate` DATE default '0000-00-00' not null COMMENT 'Completion Date',
`ConstructionType` VARCHAR(50) COMMENT 'Construction Type',
`ContingencyType` VARCHAR(50) COMMENT 'Contingency Type',
`CoolingSource` VARCHAR(50) COMMENT 'Cooling Source',
`CoolingSystem` VARCHAR(50) COMMENT 'Cooling System',
`CountyID` VARCHAR(50) COMMENT 'County',
`DenDesc` VARCHAR(50) COMMENT 'Den Description',
`DenDim` VARCHAR(5) COMMENT 'Den Dimensions',
`DiningRoomDesc` VARCHAR(50) COMMENT 'Dining Room Description',
`DiningRoomDim` VARCHAR(5) COMMENT 'Dining Room Dimensions',
`Directions` VARCHAR(255) COMMENT 'Directions',
`DrapesRemain` VARCHAR(50) COMMENT 'Drapes Remain',
`DrivewayType` VARCHAR(50) COMMENT 'Driveway Type',
`ElementarySchool` VARCHAR(50) COMMENT 'Elementary School',
`ElementarySchoolTwo` VARCHAR(50) COMMENT 'Elementary School 2',
`EnergyFeatures` TEXT COMMENT 'Green Features',
`ExteriorAlterations` CHAR(1) COMMENT 'Exterior Alterations',
`ExteriorTrim` VARCHAR(50) COMMENT 'Exterior Trim',
`FloorTypes` TEXT COMMENT 'Floor Types',
`FullBathsBasement` INT(2) COMMENT 'Full Baths Basement',
`FullBathsMain` INT(2) COMMENT 'Full Baths Main',
`FullBathsOther` INT(2) COMMENT 'Full Baths Other',
`FullBathsSecond` INT(2) COMMENT 'Full Baths Second',
`FullBathsThird` INT(2) COMMENT 'Full Baths Third',
`GarageCapacity` INT(1) COMMENT 'Garage Capacity',
`GarageDescription` VARCHAR(50) COMMENT 'Garage Description',
`GreenCertifyingBody` TEXT COMMENT 'Green Certifying Body',
`HalfBathsBasement` INT(2) COMMENT 'Half Baths Basement',
`HalfBathsMain` INT(2) COMMENT 'Half Baths Main',
`HalfBathsOther` INT(2) COMMENT 'Half Baths Other',
`HalfBathsSecond` INT(2) COMMENT 'Half Baths Second',
`HalfBathsThird` INT(2) COMMENT 'Half Baths Third',
`HandicapAccess` VARCHAR(50) COMMENT 'Handicap Accessible',
`HasPetRestriction` CHAR(1) COMMENT 'Has Pet Restriction',
`HeatingSource` VARCHAR(50) COMMENT 'Heating Source',
`HeatingSystem` VARCHAR(50) COMMENT 'Heating System',
`HighSchool` VARCHAR(50) COMMENT 'High School',
`HobbyRoomDesc` VARCHAR(50) COMMENT 'Hobby Room Description',
`HobbyRoomDim` VARCHAR(5) COMMENT 'Hobby Room Dimensions',
`InteriorOther` TEXT COMMENT 'Interior Other',
`IsCertifiedGreen` CHAR(1) COMMENT 'Certified Green Home',
`IsNewConstruction` CHAR(1) COMMENT 'New Construction',
`JuniorHighSchool` VARCHAR(50) COMMENT 'Junior High School',
`KitchenDesc` VARCHAR(50) COMMENT 'Kitchen Description',
`KitchenDim` VARCHAR(5) COMMENT 'Kitchen Dimensions',
`Latitude` DECIMAL(19,16) COMMENT 'Latitude',
`ListingStatusID` VARCHAR(50) COMMENT 'Listing Status',
`ListingType` VARCHAR(50) COMMENT 'Listing Type',
`ListPrice` INT(10) COMMENT 'List Price',
`LivingRoomDesc` VARCHAR(50) COMMENT 'Living Room Description',
`LivingRoomDim` VARCHAR(5) COMMENT 'Living Room Dimensions',
`Longitude` DECIMAL(19,16) COMMENT 'Longitude',
`MailboxType` VARCHAR(50) COMMENT 'Mailbox Type',
`MapNumber` VARCHAR(4) COMMENT 'Map Number',
`MediaUpdateDate` DATETIME default '0000-00-00 00:00:00' not null COMMENT 'Media Update Date',
`MiscOther` TEXT COMMENT 'Miscellaneous Other',
`MlsNum` VARCHAR(8) COMMENT 'MLS Number',
`ModDate` DATETIME default '0000-00-00 00:00:00' not null COMMENT 'Mod Date',
`NextOpenHouseDate` DATETIME default '0000-00-00 00:00:00' not null COMMENT 'NextOpenHouseDate',
`NumberOfFireplaces` INT(1) COMMENT 'Number Of Fireplaces',
`NumOfStories` DECIMAL(3,2) COMMENT 'Number Of Stories',
`OfficeCoListCode` VARCHAR(8) COMMENT 'Co-Listing Office Code',
`OfficeCoListCompanyID` VARCHAR(8) COMMENT 'Co-Listing Office Company ID',
`OfficeCoListID` VARCHAR(8) COMMENT 'Co-Listing Office ID',
`OfficeCoListOfficeName` VARCHAR(50) COMMENT 'Co-Listing Office Name',
`OfficeCoListPhone` VARCHAR(25) COMMENT 'Co-Listing Office Phone',
`OfficeListCode` VARCHAR(8) COMMENT 'Listing Office Code',
`OfficeListCompanyID` VARCHAR(8) COMMENT 'Listing Office Company ID',
`OfficeListID` VARCHAR(8) COMMENT 'Listing Office ID',
`OfficeListIsIDX` CHAR(1) COMMENT 'Listing Office Is IDX',
`OfficeListOfficeName` VARCHAR(50) COMMENT 'Listing Office Name',
`OfficeListPhone` VARCHAR(25) COMMENT 'Listing Office Phone',
`OpenHouseType` VARCHAR(50) COMMENT 'Open House',
`OtherRestrictions` TEXT COMMENT 'Other Restrictions',
`OtherRoomOneDesc` VARCHAR(50) COMMENT 'Other Room 1 Description',
`OtherRoomOneDim` VARCHAR(5) COMMENT 'Other Room 1 Dimensions',
`OtherRoomTwoDesc` VARCHAR(50) COMMENT 'Other Room 2 Description',
`OtherRoomTwoDim` VARCHAR(5) COMMENT 'Other Room 2 Dimensions',
`OvenDesc` VARCHAR(50) COMMENT 'Oven Description',
`OvenSource` VARCHAR(50) COMMENT 'Oven Source',
`PermitAvmUse` CHAR(1) COMMENT 'Permit AVM Use',
`PermitExternalComments` CHAR(1) COMMENT 'PermitExternalComments',
`PictureCount` INT(2) COMMENT 'Picture Count',
`PrimaryPictureURL` VARCHAR(65) COMMENT 'PrimaryPictureURL',
`PropertyClassID` VARCHAR(50) COMMENT 'Property Class',
`PropertySubType` VARCHAR(50) COMMENT 'Property Sub-Type',
`RangeDesc` VARCHAR(50) COMMENT 'Range Description',
`RangeSource` VARCHAR(50) COMMENT 'Range Source',
`RecRoomDesc` VARCHAR(50) COMMENT 'Rec Room Description',
`RecRoomDim` VARCHAR(5) COMMENT 'Rec Room Dimensions',
`Remarks` VARCHAR(255) COMMENT 'Public Remarks',
`RentingPermitted` CHAR(1) COMMENT 'Renting Permitted',
`RoofMaterial` VARCHAR(50) COMMENT 'Roofing Material',
`SecurityDesc` TEXT COMMENT 'Security Description',
`SewerSystem` VARCHAR(50) COMMENT 'Sewer System',
`SqFtBasement` INT(6) COMMENT 'Sq. Ft. Basement',
`SqFtMainFloor` INT(6) COMMENT 'Sq. Ft. Main Floor',
`SqFtMeasurementSource` VARCHAR(50) COMMENT 'Sq. Ft. Measurement Source',
`SqFtOther` INT(6) COMMENT 'Sq. Ft. Other',
`SqFtOtherDescription` VARCHAR(50) COMMENT 'Other Sq Ft Description',
`SqFtSecondFloor` INT(6) COMMENT 'Sq. Ft. Second Floor',
`SqFtThirdFloor` INT(6) COMMENT 'Sq. Ft. Third Floor',
`SqFtTotal` INT(6) COMMENT 'Sq. Ft. Total',
`State` VARCHAR(50) COMMENT 'State',
`StreetAddressDisplay` VARCHAR(75) COMMENT 'Street Address',
`StreetDirection` VARCHAR(50) COMMENT 'Street Direction',
`StreetLetter` VARCHAR(2) COMMENT 'Street Letter',
`StreetName` VARCHAR(26) COMMENT 'Street Name',
`StreetNumber` INT(10) COMMENT 'Street Number',
`Style` VARCHAR(50) COMMENT 'Style',
`Subdivision` VARCHAR(26) COMMENT 'Development',
`TaxAmount` INT(10) COMMENT 'Tax Amount',
`TotalBedrooms` INT(2) COMMENT 'Total Bedrooms',
`TotalFullBaths` INT(2) COMMENT 'Total Full Baths',
`TotalHalfBaths` INT(2) COMMENT 'Total Half Baths',
`TotalRooms` INT(2) COMMENT 'Total Rooms',
`TrailersPermitted` CHAR(1) COMMENT 'Trailers Permitted',
`UnitLocation` VARCHAR(50) COMMENT 'Unit Location',
`UnitNumber` VARCHAR(10) COMMENT 'Unit Number',
`VerticalLocation` VARCHAR(50) COMMENT 'Vertical Location',
`WaterfrontDesc` VARCHAR(50) COMMENT 'Waterfront Description',
`WaterfrontDock` VARCHAR(50) COMMENT 'Waterfront Dock',
`WaterSource` VARCHAR(50) COMMENT 'Water Source',
`WithdrawnDate` DATE default '0000-00-00' not null COMMENT 'Withdrawn Date',
`YearBuilt` INT(4) COMMENT 'Year Built',
`ZipCode` VARCHAR(5) COMMENT 'Zip Code',
PRIMARY KEY(`MlsNum`) ); 
```

我需要将上述 SQL 重新排序为的新订单：

```
BedroomsThird
OtherRoomOneDesc
KitchenDim
BedroomTwoDim
Subdivision
OfficeListOfficeName
DiningRoomDim
CoolingSystem
OvenSource
OtherRoomOneDim
AgentCoListFullName
FloorTypes
PictureCount
HobbyRoomDim
BedroomFourDim
OfficeListPhone
FullBathsOther
UnitLocation
OtherRestrictions
SqFtOtherDescription
OfficeCoListOfficeName
SqFtTotal
OfficeListCompanyID
OvenDesc
ListingType
TotalFullBaths
HalfBathsBasement
InteriorOther
OfficeCoListPhone
AppliancesOther
GreenCertifyingBody
ListPrice
CountyID
OfficeListCode
BasementType
BedroomsBasement
HalfBathsThird
HeatingSystem
StreetLetter
RangeDesc
TotalHalfBaths
RentingPermitted
AreaID
BuiltInfo
HighSchool
PermitExternalComments
OfficeCoListID
YearBuilt
AgentListFirstName
Directions
CoolingSource
OfficeListIsIDX
NextOpenHouseDate
ElementarySchool
AgentCoListFirstName
LivingRoomDim
WaterfrontDesc
WaterSource
Remarks
AgentCoListID
ExteriorAlterations
City
ConstructionType
DiningRoomDesc
CommunityAmenities
MapNumber
OfficeListID
TrailersPermitted
TotalBedrooms
PropertyClassID
LivingRoomDesc
DenDesc
MailboxType
HalfBathsMain
OfficeCoListCode
PropertySubType
DrapesRemain
SqFtBasement
FullBathsMain
AgentListLastName
AgentCoListPhone
BedroomTwoDesc
OpenHouseType
FullBathsSecond
RecRoomDesc
SqFtSecondFloor
SewerSystem
BedroomsOther
ModDate
BedroomsSecond
StreetDirection
MlsNum
ExteriorTrim
JuniorHighSchool
IsNewConstruction
State
GarageCapacity
SqFtMeasurementSource
VerticalLocation
HalfBathsSecond
KitchenDesc
ElementarySchoolTwo
WaterfrontDock
HasPetRestriction
StreetAddressDisplay
DenDim
UnitNumber
OfficeCoListCompanyID
AgentListID
ZipCode
EnergyFeatures
OtherRoomTwoDesc
RangeSource
FullBathsBasement
RecRoomDim
TotalRooms
AgentListFullName
WithdrawnDate
BedroomOneDesc
AssociationFeeIncludes
Style
DrivewayType
OtherRoomTwoDim
HobbyRoomDesc
BedroomsMain
SecurityDesc
HandicapAccess
SqFtMainFloor
AgentCoListLastName
ListingStatusID
BedroomOneDim
MiscOther
IsCertifiedGreen
PrimaryPictureURL
NumOfStories
TaxAmount
SqFtThirdFloor
ContingencyType
StreetNumber
NumberOfFireplaces
BasementDesc
Latitude
AssociationFee
CompletionDate
PermitAvmUse
MediaUpdateDate
HeatingSource
RoofMaterial
FullBathsThird
SqFtOther
Longitude
StreetName
GarageDescription
HalfBathsOther
AgentListPhone
BedroomThreeDim 
```

我最终使用命令行来执行此操作。这是我使用的：

```
mysqlimport -hHOSTNAMEm --user=USERNAME -pPASSWORD --ignore-lines=1 --fields-optionally-enclosed-by="\"" --fields-terminated-by=, --lines-terminated-by="\n" --local DBANAME rets_property_cnd.csv -c BedroomsThird,OtherRoomOneDesc,KitchenDim,BedroomTwoDim,Subdivision,OfficeListOfficeName,DiningRoomDim,CoolingSystem,OvenSource,OtherRoomOneDim,AgentCoListFullName,FloorTypes,PictureCount,HobbyRoomDim,BedroomFourDim,OfficeListPhone,FullBathsOther,UnitLocation,OtherRestrictions,SqFtOtherDescription,OfficeCoListOfficeName,SqFtTotal,OfficeListCompanyID,OvenDesc,ListingType,TotalFullBaths,HalfBathsBasement,InteriorOther,OfficeCoListPhone,AppliancesOther,GreenCertifyingBody,ListPrice,CountyID,OfficeListCode,BasementType,BedroomsBasement,HalfBathsThird,HeatingSystem,StreetLetter,RangeDesc,TotalHalfBaths,RentingPermitted,AreaID,BuiltInfo,HighSchool,PermitExternalComments,OfficeCoListID,YearBuilt,AgentListFirstName,Directions,CoolingSource,OfficeListIsIDX,NextOpenHouseDate,ElementarySchool,AgentCoListFirstName,LivingRoomDim,WaterfrontDesc,WaterSource,Remarks,AgentCoListID,ExteriorAlterations,City,ConstructionType,DiningRoomDesc,CommunityAmenities,MapNumber,OfficeListID,TrailersPermitted,TotalBedrooms,PropertyClassID,LivingRoomDesc,DenDesc,MailboxType,HalfBathsMain,OfficeCoListCode,PropertySubType,DrapesRemain,SqFtBasement,FullBathsMain,AgentListLastName,AgentCoListPhone,BedroomTwoDesc,OpenHouseType,FullBathsSecond,RecRoomDesc,SqFtSecondFloor,SewerSystem,BedroomsOther,ModDate,BedroomsSecond,StreetDirection,MlsNum,ExteriorTrim,JuniorHighSchool,IsNewConstruction,State,GarageCapacity,SqFtMeasurementSource,VerticalLocation,HalfBathsSecond,KitchenDesc,ElementarySchoolTwo,WaterfrontDock,HasPetRestriction,StreetAddressDisplay,DenDim,UnitNumber,OfficeCoListCompanyID,AgentListID,ZipCode,EnergyFeatures,OtherRoomTwoDesc,RangeSource,FullBathsBasement,RecRoomDim,TotalRooms,AgentListFullName,WithdrawnDate,BedroomOneDesc,AssociationFeeIncludes,Style,DrivewayType,OtherRoomTwoDim,HobbyRoomDesc,BedroomsMain,SecurityDesc,HandicapAccess,SqFtMainFloor,AgentCoListLastName,ListingStatusID,BedroomOneDim,MiscOther,IsCertifiedGreen,PrimaryPictureURL,NumOfStories,TaxAmount,SqFtThirdFloor,ContingencyType,StreetNumber,NumberOfFireplaces,BasementDesc,Latitude,AssociationFee,CompletionDate,PermitAvmUse,MediaUpdateDate,HeatingSource,RoofMaterial,FullBathsThird,SqFtOther,Longitude,StreetName,GarageDescription,HalfBathsOther,AgentListPhone,BedroomThreeDim 
```

我在 mysqlimport 的语法中一直缺少一个技巧。CSV 的名称必须与您的表格相同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T01:59:26.740

Can't you just specify the column order in your [LOAD DATA](http://dev.mysql.com/doc/refman/5.1/en/load-data.html) statement?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T02:32:18.967

另一种方法是更改​​您的 CSV 以匹配您的表格。这个[问题](https://stackoverflow.com/questions/6386793/how-to-use-powershell-to-reorder-csv-columns) 展示了如何使用 Powershell 来实现这一点。请参阅 Roman Kuzmin 对脚本的回答。

# php - 使用 php mysql 翻转图像 onmouseover

> ID：12291969
> 
> 赞同：1
> 
> 时间：2012-09-06T01:54:26.510
> 
> 标签：php, javascript, jquery, mysql, onmouseover

祝大家好运！

我有一些图像 (100x100) 。根据查询返回的结果数量，我可以有许多图像。

在鼠标悬停时，每个图像都应该翻转或消失并从数据库中出现一些文本。请注意，每张图片“在后面”都有不同的信息（文字如：描述）。

我使用 PHP、Javascript、Jquery，但我不是专家。我用谷歌搜索了一下，但只找到了将 image1 翻转到 image2 ，而不是我希望的那样。

我的大问题是我想显示 onflip 的信息来自查询，而 java 不能使用它。

你能指导我或给我一个教程吗？谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T04:04:40.383

这是一个看起来像你想要的东西的教程：http: [//tutorialzine.com/2010/03/sponsor-wall-flip-jquery-css/](http://tutorialzine.com/2010/03/sponsor-wall-flip-jquery-css/)

演示在这里：[http ://demo.tutorialzine.com/2010/03/sponsor-wall-flip-jquery-css/demo.php](http://demo.tutorialzine.com/2010/03/sponsor-wall-flip-jquery-css/demo.php)

我如何处理这样的新事物就是按照教程列出的方式编写。接下来，我获取数据并将硬编码的值替换为数据库中的值。

要将 SQL 查询中的数据获取到 JavaScript 中，请参阅： http: [//nicholaskreidberg.com/2011/using-php-data-in-javascript-functions/](http://nicholaskreidberg.com/2011/using-php-data-in-javascript-functions/)

这些是碎片，你只需要把它们放在一起。首先让图像翻转以使用硬编码值，然后切换到从 PHP 获取数据，你就完成了。

# javascript - 获取要添加到对象 javascript 的回调函数

> ID：12291970
> 
> 赞同：0
> 
> 时间：2012-09-06T01:54:27.040
> 
> 标签：javascript, ajax, object, methods, callback

我为我创建的对象创建的方法有问题。其中一个方法需要回调另一个方法。问题是我无法将数据添加到调用该方法的对象中。它一直以未定义的形式返回。否则，当我将数据发送到控制台时，它是正确的。我怎样才能将数据返回到方法中？

```
var blogObject = new Object();
var following = [...];

//get posts from those blogs

blogObject.getPosts = function () {
    var followersBlogArray = new Array();

    for (var i = 0; i < this.following.length;i++){
        var followersBlog = new Object();

   // get construct blog url

        var complete_blog_url = ...; 
```

我在这里调用 getAvatar 函数，将当前用户发送到以下数组中。

```
 followersBlog.avatar = blogObject.getAvatar(this.following[i]); 
```

那部分进展顺利

```
 followersBlogArray.push(followersBlog);
   }
   this.followersBlogArray = followersBlogArray;
 } 
```

这是在以下数组中与当前用户一起调用的函数此函数调用 ajax 函数

```
blogObject.getAvatar = function (data) {
console.log("get avatar");
     var url = "..." 
```

这个 ajax 函数完成它的工作并且有一个 showAvatar 的回调函数

```
 $(function() {
                         $.ajax({
                                type: "GET",
                                dataType: "jsonp",
                                cache: false,
                                url: url,
                                data: {
                                    jsonp:"blogObject.showAvatar"
                                }
                          });

});

} 
```

调用 getAvatar 时调用此函数没有问题。但是，我无法将数据添加到 followerBlog 对象。

```
blogObject.showAvatar = function (avatar) {

    return avatar

} 
```

这里的一切都很好，但我无法将 showAvatar 函数添加到我的 followersBlog 对象中。我试过了

```
blogObject.showAvatar = function (avatar) {
this.followersBlog.avatar = avatar; 
    return avatar

} 
```

那当然行不通。它显示为未定义。谁能帮忙？

所以像......

```
$(function() {
                         $.ajax({
                                type: "GET",
                                dataType: "jsonp",
                                cache: false,
                                url: url,
                                complete: function () {
 this.avatar = data;
 }

                                                            data: {
                                    jsonp:"blogObject.showAvatar"
                                }
                          });

});

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T02:14:20.740

欢迎来到异步编程的世界。

您需要考虑`$.ajax()`不会立即返回值的事实，并且 Javascript 引擎不会等待它完成，然后再继续执行下一行代码。

要解决此问题，您需要重构代码并为您的 AJAX 调用提供回调，该回调将在收到来自`$.ajax()`. 此回调应作为 的`complete`参数传入`$.ajax()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T03:07:40.693

设置 JSONP 回调的正确选项是`jsonpCallback`. [API`.ajax(...)`](http://api.jquery.com/jQuery.ajax/)的建议是将其设置为函数。

```
{
  // ...
  jsonpCallback: function (returnedData) {
    blogObject.showAvatar(returnedData);
  },
  // ...
} 
```

# javascript - Facebook登录Oauth对话框关闭事件？

> ID：12291971
> 
> 赞同：0
> 
> 时间：2012-09-06T01:54:43.843
> 
> 标签：javascript, facebook, facebook-javascript-sdk

在 Facebook JS SDK 上，我试图检测用户在单击登录按钮（接受或拒绝）后何时关闭 Oauth 对话框，因此有属性 onlogin ：

```
<div class='fb-login-button" onlogin="function...">FB login</div> 
```

**但是这个方法真的很糟糕！**而且我没有发现任何事件或迹象表明我可以在没有元素属性的情况下做到这一点......

如果用户已经连接到应用程序，则在启动时调用[其他相关事件：auth.authResponseChange 和 auth.statusChange。](https://developers.facebook.com/docs/reference/javascript/FB.Event.subscribe/)并且永远不会调用事件 auth.prompt （我正在尝试报告有关此的错误，但[错误报告页面](http://developers.facebook.com/bugs/create)被错误...）。

这个脚本也是如此：

```
$('.fb-login-button').each(function() {
    var oldLoginFn = this.onlogin || $.noop();
    this.onlogin = function () {
        //my instructions...
        return oldLoginFn.apply(this, arguments);
    }
}); 
```

我能做的最好的事情是检测 Oauth 对话框的返回吗？真的没有检测登录动作的事件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T12:21:09.803

您需要允许运行 Facebook JavaScript SDK 的 URL。为此，请在[http://developers.facebook.com/apps](http://developers.facebook.com/apps)的“settings-basic-basic info”下编辑您的 Facebook 应用，将所有 URL 放在“App Domains”字段中，例如 www.yourdomain.com、yourdomain .com。

并不是说您在此处放置的 URL 必须来自“基本信息”设置下方的“网站 URL”字段，在“选择您的应用如何与 Facebook 集成”-“使用 Facebook 登录的网站”下

Facebook 记录了当您在不允许 URL 时尝试运行应用程序时显示的错误。要查看此日志，请转到浏览器控制台并查看日志

享受

# android - SlidingDrawer 中的 ListView 在 onResume 后失去焦点

> ID：12291973
> 
> 赞同：5
> 
> 时间：2012-09-06T01:54:51.660
> 
> 标签：android, listview, focus, touch, slidingdrawer

我使用 SlidingDrawer 作为我的主要布局。在内容区域内，我有一个片段（其中包含一个 ListView） 当活动第一次加载一切都很好时，listview 正确滚动。

当我开始一个不同的活动然后回来时，我尝试的第一个滚动动作被 SlidinDrawer 拦截，然后打开或关闭它。只要您停止滚动并拿起手指，ListView 就可以再次滚动。

我希望 ListView 在活动恢复时能够滚动。并且通常能够控制 SlidingDrawer 是否是获得焦点的那个。

**更新：**

我已经把问题缩小了一点。我已扩展 SLidingDrawer 以允许使用以下代码单击句柄中的按钮。

```
Override
public boolean onInterceptTouchEvent(MotionEvent event) {
    super.onInterceptTouchEvent(event);

    if (mHandleLayout != null) {
        int clickX = (int) (event.getX() - mHandleLayout.getLeft());
        int clickY = (int) (event.getY() - mHandleLayout.getTop());

        if (isAnyClickableChildHit(mHandleLayout, clickX, clickY))
            return false;
    }
    return super.onInterceptTouchEvent(event);
}

private boolean isAnyClickableChildHit(ViewGroup viewGroup, int clickX, int clickY) {
    for (int i = 0; i < viewGroup.getChildCount(); i++) {
        View childView = viewGroup.getChildAt(i);

        if (TAG_CLICK_INTERCEPTED.equals(childView.getTag())) {
            childView.getHitRect(mHitRect);

            if (mHitRect.contains(clickX, clickY))
                return true;
        }

        if (childView instanceof ViewGroup && isAnyClickableChildHit((ViewGroup) childView, clickX, clickY))
            return true;
    }
    return false;
} 
```

如果我注释掉 onInterceptTouchEvent 函数，一切似乎都正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T15:17:57.363

我注意到你打`super.onInterceptTouchEvent(event)`了两次电话。为什么？这可能是问题的原因。

# asp.net-mvc - asp mvc 将模型数据源更改为 Web 服务

> ID：12291974
> 
> 赞同：1
> 
> 时间：2012-09-06T01:55:13.260
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我正在启动一个新应用程序并尝试使用 asp.net MVC 4。网络基础设施的设置方式意味着 MVC 应用程序无法直接访问数据库。相反，我将访问 WCF Web 服务来获取我的所有数据。这意味着我的用户名/用户详细信息列表是通过 WCF Web 服务访问的。我将使用 RSync 将数据推送到我的站点，因此我想使用内置的身份验证内容，因为 RSync 具有检查会话是否经过身份验证的命令：

```
if (Context.User.Identity.IsAuthenticated) 
```

所以我的主要问题是如何使用网络服务器而不是数据库设置身份验证信息？我注意到模板使用：

`WebSecurity.Login(model.UserName, model.Password, persistCookie: model.RememberMe)`

但这是因为它使用以下代码链接到数据库：

```
WebSecurity.InitializeDatabaseConnection("DefaultConnection", "UserProfile", "UserId", "UserName", autoCreateTables: true); 
```

所以我不认为我可以使用这种方法，除非我可以覆盖 WebSecurity.login 方法？所有其他网络安全方法？

我不认为这是正确的方法。相反，我认为我需要编写自己的安全类并让 Users 模型具有一个名为 Login(username, password) 的静态方法，该方法返回一个用户对象。但是后来我想以某种方式将 mvc（http 会话）用户设置为登录。这样当我使用 Authorize 属性时它就会起作用。如何将 http 会话用户设置为经过身份验证？

# postgresql - 为什么在结构调用 pg_ctl restart 后需要睡眠

> ID：12291978
> 
> 赞同：5
> 
> 时间：2012-09-06T01:55:23.780
> 
> 标签：postgresql, sleep, fabric

我正在使用 Fabric 来初始化 postgres 服务器。我必须在命令末尾添加“sleep 1”，否则 postgres 服务器进程会死掉而没有解释或日志中的条目：

```
sudo('%(pgbin)s/pg_ctl -D %(pgdata)s -l /tmp/pg.log restart && sleep 1' % env, user='postgres') 
```

也就是说，我在终端上看到了这个输出：

> [dbserv] 执行任务 'setup_postgres'
> [dbserv] 运行：/bin/bash -l -c "sudo -u postgres /usr/lib/postgresql/9.1/bin/pg_ctl -D /data/pg -l /tmp/pg .log restart && sleep 1"
> [dbserv] out：等待服务器关闭.... done
> [dbserv] out：服务器已停止
> [dbserv] out：服务器正在启动

没有`&& sleep 1`， /tmp/pg.log 中没有任何内容（尽管文件已创建），并且没有 postgres 进程正在运行。随着睡眠，一切正常。

（如果我直接在目标机器的命令行上执行相同的命令，它可以在没有睡眠的情况下正常工作。）

既然它正在工作，那并不重要，但*我*还是在问：有人知道睡眠允许发生什么以及为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T16:51:59.773

您也可以尝试使用[pty 选项](http://docs.fabfile.org/en/1.4.3/faq.html#init-scripts-don-t-work)将其设置为 false 并查看它是否与织物处理伪 tty 的方式有关。

# ruby - 如何在Ruby的正则表达式中匹配左右括号并用一个字符替换两者？

> ID：12291979
> 
> 赞同：0
> 
> 时间：2012-09-06T01:55:27.290
> 
> 标签：ruby, regex

我正在尝试对以下内容进行模式匹配并将“c”替换为左右括号。

示例：字符串 = "(a,b)"

所以我希望字符串在我调用`string.sub(//,"c")`它之后像“ca，cb”一样出来。我试过`string.sub(/[()]/,"c")`了，但这只会导致“ca，b）”。如何模式匹配左右括号？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T01:57:37.940

```
ruby-1.9.3-p125 :001 > string = "(a,b)"
 => "(a,b)" 
ruby-1.9.3-p125 :002 > string.gsub(/[()]/, "c")
 => "ca,bc" 
```

Note the `gsub`: `sub` makes a single substitution; `gsub` ("global sub") substitutes as many as it can.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T02:58:26.650

对于单个字符替换尝试 tr：

```
'(a,b)'.tr '()', 'c' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T09:52:45.007

如果您的预期输出确实是`"ca,cb"`而不是`"ca,bc"`，这是迄今为止给出的其他答案的结果，那么以下应该可以解决问题：

```
1.9.3-p194 :001 > "(a,b)".tr('(', 'c').gsub(/(.)\)/, 'c\1')
=> "ca,cb" 
```

您尚未指定如何处理空括号或多个级别，因此不考虑这些情况。

# php - 添加 1 每次显示查询

> ID：12291981
> 
> 赞同：0
> 
> 时间：2012-09-06T01:55:37.853
> 
> 标签：php, wordpress

我有一个查询，它在我的博客上获得了 5 个最高评价的内容，我如何才能将查询 1 显示的每个帖子添加到 $number 变量中？

基本上我想要的是给评分最高的内容一个介于 1-5 之间的数字，第一个得到 1，第二个得到 2，第三个得到 3，依此类推。

```
<?php ( query_posts('category_name=music&showposts=3&orderby=comment_count&order=desc&post_status=future,publish') ) ; ?>

<?php while ( have_posts() ) : the_post(); ?>

<?php endwhile; ?>

<?php wp_reset_query(); ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T02:34:08.623

试试这个 - 只需将 $number 设置为 0，然后使用 ++ 来增加数字，

```
<?php ( query_posts('category_name=music&showposts=3&orderby=comment_count&order=desc&post_status=future,publish') ) ; ?>

<?php $number=0; while ( have_posts() ) : the_post(); $number++; ?>

Rated #<?= $number ?>

<?php endwhile; ?>

<?php wp_reset_query(); ?> 
```

# php - 关闭弹窗并刷新父页面

> ID：12291983
> 
> 赞同：1
> 
> 时间：2012-09-06T01:55:42.310
> 
> 标签：php, javascript, jquery

## 主页.php

```
<a href='javascript:void(0);' onclick="pepz('<?php echo"ppc-mngt_transfer.php?id=$i->sm_id"; ?>', 'myPop1',400,400)"><?php print"$i->sm_jo<br>$i->sm_custo_name"; ?></a> 
```

## ppc-mngt_transfer.php

```
 <script type="text/javascript">
        function refreshAndClose() {
            window.close();
            window.opener.location.reload(true);
        }
    </script>
    <body onbeforeunload="refreshAndClose();">
    <form name='mainform' method='post' action='do.php?ppc/workload'>
    <?php
    print "<h1>COPY TO WORKLOAD</h1>";
    print "<table class='clean_form'>";
    print "<tr><td>J.O. Number</td><td><input name='ppc_jo' value='$i->sm_jo' style='width:250'></td></tr>";
    print "<tr><td>Customer Name</td><td><input name='ppc_custo_name' value='$i->sm_custo_name' style='width:250'></td></tr>";
    print "<tr><td>Description</td><td><input name='ppc_subject' value='$i->sm_subject' style='width:250'></td></tr>";
    print "<tr><td>Date Start</td><td><input name='ppc_dpdate' value='$i->sm_dpdate' style='width:250'></td></tr>";
    print "<tr><td>Duration</td><td><input name='ppc_proj_duration' value='$i->sm_proj_duration' style='width:250'></td></tr>";
    print "<input type='hidden' name='ppc_m_id' value='$id'>";
    print "</table>";
    print "<tr><input type='checkbox' name='ppc_mark' value='ok' checked/></tr>";
    ?>
    <input type="submit" value="submit">
    </form>
    </body> 
```

我认为我的代码执行此操作 > REFRESH 然后关闭 ...。我需要的是在单击弹出窗口中的提交按钮后关闭，然后刷新父页面。请帮助我，我对 Javascript 知之甚少。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T01:59:16.867

```
<form name='mainform' method='post' action='do.php?ppc/workload' onsubmit="refreshAndClose();">

function refreshAndClose() {
            window.opener.location.reload(true);
            window.close();
} 
```

Just make sure the form is really submitted, if not, we need to tweak it a bit.

I would actually to the `window.close()` in the `do.php` file. So u can also handle submission errors, if they occur.

# objective-c - 在 Snow Leopard 上运行时程序崩溃

> ID：12291989
> 
> 赞同：2
> 
> 时间：2012-09-06T01:56:32.767
> 
> 标签：objective-c, crash, osx-snow-leopard, sigabrt

所以我为 Mac 写了一个应用程序。在我的 Mac 笔记本电脑（Mountain Lion）上一切正常，但是当我尝试在另一台 Mac（Snow Leopard）上运行它时，我在尝试打开应用程序时收到以下崩溃报告：

```
Process:         App [20844]
Path:            /Volumes/USB/App.app/Contents/MacOS/App
Identifier:      com.mathnerdproductions.App
Version:         1.0 (1)
Code Type:       X86-64 (Native)
Parent Process:  launchd [103]

Date/Time:       2012-09-05 17:22:26.403 -0700
OS Version:      Mac OS X 10.6.8 (10K549)
Report Version:  6

Interval Since Last Report:          19110167 sec
Crashes Since Last Report:           142
Per-App Interval Since Last Report:  2 sec
Per-App Crashes Since Last Report:   1
Anonymous UUID:                      D1555D0E-E1BC-4FE0-AABD-D059BAC03233

Exception Type:  EXC_CRASH (SIGABRT)
Exception Codes: 0x0000000000000000, 0x0000000000000000
Crashed Thread:  0  Dispatch queue: com.apple.main-thread

Application Specific Information:
abort() called
*** Terminating app due to uncaught exception 'NSInvalidUnarchiveOperationException', reason: '*** -[NSKeyedUnarchiver decodeObjectForKey:]: cannot decode object of class (NSLayoutConstraint)'
*** Call stack at first throw:
(
0   CoreFoundation                      0x00007fff84cd8784 __exceptionPreprocess + 180
1   libobjc.A.dylib                     0x00007fff80b47f03 objc_exception_throw + 45
2   CoreFoundation                      0x00007fff84cd85a7 +[NSException raise:format:arguments:] + 103
3   CoreFoundation                      0x00007fff84cd8534 +[NSException raise:format:] + 148
4   Foundation                          0x00007fff83305d0a _decodeObjectBinary + 2427
5   Foundation                          0x00007fff83306a89 -[NSKeyedUnarchiver _decodeArrayOfObjectsForKey:] + 1229
6   Foundation                          0x00007fff83306fc9 -[NSArray(NSArray) initWithCoder:] + 462
7   Foundation                          0x00007fff83305d83 _decodeObjectBinary + 2548
8   Foundation                          0x00007fff833051fd _decodeObject + 208
9   AppKit                              0x00007fff83fb3389 -[NSIBObjectData initWithCoder:] + 2102
10  Foundation                          0x00007fff83305d83 _decodeObjectBinary + 2548
11  Foundation                          0x00007fff833051fd _decodeObject + 208
12  AppKit                              0x00007fff83fb2a41 loadNib + 146
13  AppKit                              0x00007fff83fb1fa1 +[NSBundle(NSNibLoading) _loadNibFile:nameTable:withZone:ownerBundle:] + 248
14  AppKit                              0x00007fff83fb1dd9 +[NSBundle(NSNibLoading) loadNibNamed:owner:] + 326
15  AppKit                              0x00007fff83faf35b NSApplicationMain + 279
16  App                    0x0000000100001662 main + 34
17  App                    0x0000000100001634 start + 52
)

Thread 0 Crashed:  Dispatch queue: com.apple.main-thread
0   libSystem.B.dylib               0x00007fff8144b0b6 __kill + 10
1   libSystem.B.dylib               0x00007fff814eb9f6 abort + 83
2   libstdc++.6.dylib               0x00007fff82a4f5d2 __tcf_0 + 0
3   libobjc.A.dylib                 0x00007fff80b4bb39 _objc_terminate + 100
4   libstdc++.6.dylib               0x00007fff82a4dae1 __cxxabiv1::__terminate(void (*)()) + 11
5   libstdc++.6.dylib               0x00007fff82a4db16 __cxxabiv1::__unexpected(void (*)()) + 0
6   libstdc++.6.dylib               0x00007fff82a4dbfc __gxx_exception_cleanup(_Unwind_Reason_Code, _Unwind_Exception*) + 0
7   libobjc.A.dylib                 0x00007fff80b47fa2 object_getIvar + 0
8   com.apple.CoreFoundation        0x00007fff84cd85a7 +[NSException raise:format:arguments:] + 103
9   com.apple.CoreFoundation        0x00007fff84cd8534 +[NSException raise:format:] + 148
10  com.apple.Foundation            0x00007fff83305d0a _decodeObjectBinary + 2427
11  com.apple.Foundation            0x00007fff83306a89 -[NSKeyedUnarchiver _decodeArrayOfObjectsForKey:] + 1229
12  com.apple.Foundation            0x00007fff83306fc9 -[NSArray(NSArray) initWithCoder:] + 462
13  com.apple.Foundation            0x00007fff83305d83 _decodeObjectBinary + 2548
14  com.apple.Foundation            0x00007fff833051fd _decodeObject + 208
15  com.apple.AppKit                0x00007fff83fb3389 -[NSIBObjectData initWithCoder:] + 2102
16  com.apple.Foundation            0x00007fff83305d83 _decodeObjectBinary + 2548
17  com.apple.Foundation            0x00007fff833051fd _decodeObject + 208
18  com.apple.AppKit                0x00007fff83fb2a41 loadNib + 146
19  com.apple.AppKit                0x00007fff83fb1fa1 +[NSBundle(NSNibLoading) _loadNibFile:nameTable:withZone:ownerBundle:] + 248
20  com.apple.AppKit                0x00007fff83fb1dd9 +[NSBundle(NSNibLoading) loadNibNamed:owner:] + 326
21  com.apple.AppKit                0x00007fff83faf35b NSApplicationMain + 279
22  ...roductions.App   0x0000000100001662 main + 34
23  ...roductions.App   0x0000000100001634 start + 52

Thread 1:  Dispatch queue: com.apple.libdispatch-manager
0   libSystem.B.dylib               0x00007fff81415c0a kevent + 10
1   libSystem.B.dylib               0x00007fff81417add _dispatch_mgr_invoke + 154
2   libSystem.B.dylib               0x00007fff814177b4 _dispatch_queue_invoke + 185
3   libSystem.B.dylib               0x00007fff814172de _dispatch_worker_thread2 + 252
4   libSystem.B.dylib               0x00007fff81416c08 _pthread_wqthread + 353
5   libSystem.B.dylib               0x00007fff81416aa5 start_wqthread + 13

Thread 2:
0   libSystem.B.dylib               0x00007fff81416a2a __workq_kernreturn + 10
1   libSystem.B.dylib               0x00007fff81416e3c _pthread_wqthread + 917
2   libSystem.B.dylib               0x00007fff81416aa5 start_wqthread + 13

Thread 3:
0   libSystem.B.dylib               0x00007fff813fcd7a mach_msg_trap + 10
1   libSystem.B.dylib               0x00007fff813fd3ed mach_msg + 59
2   com.unsanity.ape                0x0000000100485f8f __ape_agent + 201
3   libSystem.B.dylib               0x00007fff81435fd6 _pthread_start + 331
4   libSystem.B.dylib               0x00007fff81435e89 thread_start + 13

Thread 0 crashed with X86 Thread State (64-bit):
rax: 0x0000000000000000  rbx: 0x00007fff702922f8  rcx: 0x00007fff5fbfe5d8  rdx: 0x0000000000000000
rdi: 0x000000000000516c  rsi: 0x0000000000000006  rbp: 0x00007fff5fbfe5f0  rsp: 0x00007fff5fbfe5d8
r8: 0x00007fff70295a60   r9: 0x0000000000000063  r10: 0x00007fff814470fa  r11: 0x0000000000000202
r12: 0x00007fff84d5db09  r13: 0x0000000000000000  r14: 0x0000000000000000  r15: 0x0000000000000011
rip: 0x00007fff8144b0b6  rfl: 0x0000000000000202  cr2: 0x00007fff7054bfd0

Binary Images:
   0x100000000 -        0x100006ff7 +com.mathnerdproductions.App 1.0 (1) <377A60C8-832D-3A6E-8F6B-E20BDE899B66> /Volumes/USB/App.app/Contents/MacOS/App
   0x100483000 -        0x100498ff7 +com.unsanity.ape 2.6.1 (2.6.1) <751AA5E7-ED1A-3B2F-5845-799AFD585CC7> /Library/Frameworks/ApplicationEnhancer.framework/Versions/A/ApplicationEnhancer
   0x1004f0000 -        0x1004f3ff7 +com.insecurity.eSellHijack ??? (1.0) <0FE31FDB-AA3D-9C47-423E-8A5F2B6A337A> /Library/Application Enhancers/eSell Hijack.ape/Contents/MacOS/eSell Hijack
   0x100783000 -        0x10079afff +com.eSellerate.EWSMac67108872 4.0.0.8 (4.0.0.8) <7E414F1D-8098-6CB9-8D8D-F1FAFABC5937> /Library/Frameworks/EWSMac.framework/EWSMac67108872
0x7fff5fc00000 -     0x7fff5fc3bdef  dyld 132.1 (???) <DB8B8AB0-0C97-B51C-BE8B-B79895735A33> /usr/lib/dyld
0x7fff80003000 -     0x7fff80023ff7  com.apple.DirectoryService.Framework 3.6 (621.14) <15CF4C96-372D-C706-A237-47D20D2CAA6B> /System/Library/Frameworks/DirectoryService.framework/Versions/A/DirectoryService
0x7fff80213000 -     0x7fff80229fef  libbsm.0.dylib ??? (???) <0321D32C-9FE1-3919-E03E-2530A0C1191B> /usr/lib/libbsm.0.dylib
0x7fff8022a000 -     0x7fff80235fff  com.apple.CrashReporterSupport 10.6.7 (258) <A2CBB18C-BD1C-8650-9091-7687E780E689> /System/Library/PrivateFrameworks/CrashReporterSupport.framework/Versions/A/CrashReporterSupport
0x7fff80236000 -     0x7fff8073fff7  com.apple.RawCamera.bundle 3.14.0 (646) <75A96BFC-1832-808B-F430-C4C9379C5A98> /System/Library/CoreServices/RawCamera.bundle/Contents/MacOS/RawCamera
0x7fff80770000 -     0x7fff80795ff7  com.apple.CoreVideo 1.6.2 (45.6) <E138C8E7-3CB6-55A9-0A2C-B73FE63EA288> /System/Library/Frameworks/CoreVideo.framework/Versions/A/CoreVideo
0x7fff80796000 -     0x7fff80796ff7  com.apple.Accelerate 1.6 (Accelerate 1.6) <15DF8B4A-96B2-CB4E-368D-DEC7DF6B62BB> /System/Library/Frameworks/Accelerate.framework/Versions/A/Accelerate
0x7fff807cd000 -     0x7fff807defff  com.apple.DSObjCWrappers.Framework 10.6 (134) <CF1D9C05-8D77-0FFE-38E8-63D8A23E92E1> /System/Library/PrivateFrameworks/DSObjCWrappers.framework/Versions/A/DSObjCWrappers
0x7fff8081a000 -     0x7fff8081dff7  libCoreVMClient.dylib ??? (???) <75819794-3B7A-8944-D004-7EA6DD7CE836> /System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libCoreVMClient.dylib
0x7fff80844000 -     0x7fff80982fff  com.apple.CoreData 102.1 (251) <96C5E9A6-C28C-E9CC-A0DB-27801A22A49F> /System/Library/Frameworks/CoreData.framework/Versions/A/CoreData
0x7fff80983000 -     0x7fff80aa2fe7  libcrypto.0.9.8.dylib 0.9.8 (compatibility 0.9.8) <14115D29-432B-CF02-6B24-A60CC533A09E> /usr/lib/libcrypto.0.9.8.dylib
0x7fff80aa3000 -     0x7fff80b3dfff  com.apple.ApplicationServices.ATS 275.19 (???) <2DE8987F-4563-4D8E-45C3-2F6F786E120D> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ATS.framework/Versions/A/ATS
0x7fff80b3e000 -     0x7fff80bf4ff7  libobjc.A.dylib 227.0.0 (compatibility 1.0.0) <03140531-3B2D-1EBA-DA7F-E12CC8F63969> /usr/lib/libobjc.A.dylib
0x7fff80bf5000 -     0x7fff80bf5ff7  com.apple.vecLib 3.6 (vecLib 3.6) <96FB6BAD-5568-C4E0-6FA7-02791A58B584> /System/Library/Frameworks/vecLib.framework/Versions/A/vecLib
0x7fff80c40000 -     0x7fff80c88ff7  libvDSP.dylib 268.0.1 (compatibility 1.0.0) <98FC4457-F405-0262-00F7-56119CA107B6> /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libvDSP.dylib
0x7fff80cb9000 -     0x7fff80ccdff7  com.apple.speech.synthesis.framework 3.10.35 (3.10.35) <574C1BE0-5E5E-CCAF-06F8-92A69CB2892D> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/SpeechSynthesis.framework/Versions/A/SpeechSynthesis
0x7fff80d19000 -     0x7fff80d1fff7  com.apple.CommerceCore 1.0 (9.1) <3691E9BA-BCF4-98C7-EFEC-78DA6825004E> /System/Library/PrivateFrameworks/CommerceKit.framework/Versions/A/Frameworks/CommerceCore.framework/Versions/A/CommerceCore
0x7fff80d20000 -     0x7fff80d20ff7  com.apple.Accelerate.vecLib 3.6 (vecLib 3.6) <4CCE5D69-F1B3-8FD3-1483-E0271DB2CCF3> /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/vecLib
0x7fff80d21000 -     0x7fff80d36ff7  com.apple.LangAnalysis 1.6.6 (1.6.6) <DC999B32-BF41-94C8-0583-27D9AB463E8B> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/LangAnalysis.framework/Versions/A/LangAnalysis
0x7fff80d37000 -     0x7fff80dd7fff  com.apple.LaunchServices 362.3 (362.3) <B90B7C31-FEF8-3C26-BFB3-D8A48BD2C0DA> /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/LaunchServices.framework/Versions/A/LaunchServices
0x7fff80dd8000 -     0x7fff80f97fff  com.apple.ImageIO.framework 3.0.5 (3.0.5) <175E97F1-B1A7-655A-F154-5B6ACC5F3985> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ImageIO.framework/Versions/A/ImageIO
0x7fff811d3000 -     0x7fff8121dff7  com.apple.Metadata 10.6.3 (507.15) <DE238BE4-5E22-C4D5-CF5C-3D50FDEE4701> /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/Metadata.framework/Versions/A/Metadata
0x7fff81360000 -     0x7fff813dffe7  com.apple.audio.CoreAudio 3.2.6 (3.2.6) <79E256EB-43F1-C7AA-6436-124A4FFB02D0> /System/Library/Frameworks/CoreAudio.framework/Versions/A/CoreAudio
0x7fff813e0000 -     0x7fff813e6ff7  com.apple.DiskArbitration 2.3 (2.3) <AAB5CC56-334A-3C60-3C27-54E8F34D754E> /System/Library/Frameworks/DiskArbitration.framework/Versions/A/DiskArbitration
0x7fff813e7000 -     0x7fff813e8ff7  com.apple.TrustEvaluationAgent 1.1 (1) <A91CE5B9-3C63-5F8C-5052-95CCAB866F72> /System/Library/PrivateFrameworks/TrustEvaluationAgent.framework/Versions/A/TrustEvaluationAgent
0x7fff813e9000 -     0x7fff813fbfe7  libsasl2.2.dylib 3.15.0 (compatibility 3.0.0) <30FE378B-99FE-8C7C-06D0-A3AA0A0A70D4> /usr/lib/libsasl2.2.dylib
0x7fff813fc000 -     0x7fff815bdfef  libSystem.B.dylib 125.2.11 (compatibility 1.0.0) <9AB4F1D1-89DC-0E8A-DC8E-A4FE4D69DB69> /usr/lib/libSystem.B.dylib
0x7fff817bd000 -     0x7fff818d7fff  libGLProgrammability.dylib ??? (???) <D1650AED-02EF-EFB3-100E-064C7F018745> /System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libGLProgrammability.dylib
0x7fff818d8000 -     0x7fff818d8ff7  com.apple.CoreServices 44 (44) <DC7400FB-851E-7B8A-5BF6-6F50094302FB> /System/Library/Frameworks/CoreServices.framework/Versions/A/CoreServices
0x7fff818d9000 -     0x7fff81901fff  com.apple.DictionaryServices 1.1.2 (1.1.2) <E9269069-93FA-2B71-F9BA-FDDD23C4A65E> /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/DictionaryServices.framework/Versions/A/DictionaryServices
0x7fff81902000 -     0x7fff8193cfff  libcups.2.dylib 2.8.0 (compatibility 2.0.0) <7982734A-B66B-44AA-DEEC-364D2C10009B> /usr/lib/libcups.2.dylib
0x7fff8193d000 -     0x7fff819bafef  com.apple.backup.framework 1.2.2 (1.2.2) <BB72F0C7-20E2-76DC-6764-5B93A7AC0EB5> /System/Library/PrivateFrameworks/Backup.framework/Versions/A/Backup
0x7fff819bb000 -     0x7fff81a25fe7  libvMisc.dylib 268.0.1 (compatibility 1.0.0) <7BD7F19B-ACD4-186C-B42D-4DEBA6795628> /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libvMisc.dylib
0x7fff81bbe000 -     0x7fff81bcdfef  com.apple.opengl 1.6.14 (1.6.14) <ECAE2D12-5BE3-46E7-6EE5-563B80B32A3E> /System/Library/Frameworks/OpenGL.framework/Versions/A/OpenGL
0x7fff81bd8000 -     0x7fff81bd9fff  liblangid.dylib ??? (???) <D0666597-B331-C43C-67BB-F2E754079A7A> /usr/lib/liblangid.dylib
0x7fff81bda000 -     0x7fff81bdcfff  libRadiance.dylib ??? (???) <B422DA26-E0CF-F280-6EB4-3B8FEF59B665> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ImageIO.framework/Versions/A/Resources/libRadiance.dylib
0x7fff81bdd000 -     0x7fff81c9ffe7  libFontParser.dylib ??? (???) <EF06F16C-0CC9-B4CA-7BD9-0A97FA967340> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ATS.framework/Versions/A/Resources/libFontParser.dylib
0x7fff81ca0000 -     0x7fff81f29ff7  com.apple.security 6.1.2 (55002) <0D80504C-9A6D-C865-AF37-7C231ACF97CB> /System/Library/Frameworks/Security.framework/Versions/A/Security
0x7fff81f8b000 -     0x7fff82149fff  libicucore.A.dylib 40.0.0 (compatibility 1.0.0) <4274FC73-A257-3A56-4293-5968F3428854> /usr/lib/libicucore.A.dylib
0x7fff82153000 -     0x7fff82159ff7  IOSurface ??? (???) <04EDCEDE-E36F-15F8-DC67-E61E149D2C9A> /System/Library/Frameworks/IOSurface.framework/Versions/A/IOSurface
0x7fff8215a000 -     0x7fff8248efef  com.apple.CoreServices.CarbonCore 861.39 (861.39) <1386A24D-DD15-5903-057E-4A224FAF580B> /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/CarbonCore.framework/Versions/A/CarbonCore
0x7fff8248f000 -     0x7fff82500ff7  com.apple.AppleVAFramework 4.10.27 (4.10.27) <6CDBA3F5-6C7C-A069-4716-2B6C3AD5001F> /System/Library/PrivateFrameworks/AppleVA.framework/Versions/A/AppleVA
0x7fff8255f000 -     0x7fff825effff  com.apple.SearchKit 1.3.0 (1.3.0) <45BA1053-9196-3C2F-2421-AFF5E09627CC> /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/SearchKit.framework/Versions/A/SearchKit
0x7fff82656000 -     0x7fff82661ff7  com.apple.speech.recognition.framework 3.11.1 (3.11.1) <C359B93B-CC9B-FC0B-959E-FB10674103A7> /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/SpeechRecognition.framework/Versions/A/SpeechRecognition
0x7fff82662000 -     0x7fff8268dff7  libxslt.1.dylib 3.24.0 (compatibility 3.0.0) <3630A97F-55C1-3F34-CA63-3847653C9645> /usr/lib/libxslt.1.dylib
0x7fff8268e000 -     0x7fff82713ff7  com.apple.print.framework.PrintCore 6.3 (312.7) <CDFE82DD-D811-A091-179F-6E76069B432D> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/PrintCore.framework/Versions/A/PrintCore
0x7fff82714000 -     0x7fff82715ff7  com.apple.audio.units.AudioUnit 1.6.7 (1.6.7) <49B723D1-85F8-F86C-2331-F586C56D68AF> /System/Library/Frameworks/AudioUnit.framework/Versions/A/AudioUnit
0x7fff82785000 -     0x7fff8278afff  libGFXShared.dylib ??? (???) <6BBC351E-40B3-F4EB-2F35-05BDE52AF87E> /System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libGFXShared.dylib
0x7fff8278b000 -     0x7fff827a1fe7  com.apple.MultitouchSupport.framework 207.11 (207.11) <8233CE71-6F8D-8B3C-A0E1-E123F6406163> /System/Library/PrivateFrameworks/MultitouchSupport.framework/Versions/A/MultitouchSupport
0x7fff827a2000 -     0x7fff82852fff  edu.mit.Kerberos 6.5.11 (6.5.11) <085D80F5-C9DC-E252-C21B-03295E660C91> /System/Library/Frameworks/Kerberos.framework/Versions/A/Kerberos
0x7fff828ab000 -     0x7fff828afff7  libmathCommon.A.dylib 315.0.0 (compatibility 1.0.0) <95718673-FEEE-B6ED-B127-BCDBDB60D4E5> /usr/lib/system/libmathCommon.A.dylib
0x7fff828b0000 -     0x7fff828c9fff  com.apple.CFOpenDirectory 10.6 (10.6) <CCF79716-7CC6-2520-C6EB-A4F56AD0A207> /System/Library/Frameworks/OpenDirectory.framework/Versions/A/Frameworks/CFOpenDirectory.framework/Versions/A/CFOpenDirectory
0x7fff828ca000 -     0x7fff828edfff  com.apple.opencl 12.3.6 (12.3.6) <42FA5783-EB80-1168-4015-B8C68F55842F> /System/Library/Frameworks/OpenCL.framework/Versions/A/OpenCL
0x7fff828ee000 -     0x7fff8293dff7  com.apple.DirectoryService.PasswordServerFramework 6.1 (6.1) <01B370FB-D524-F660-3826-E85B7F0D85CD> /System/Library/PrivateFrameworks/PasswordServer.framework/Versions/A/PasswordServer
0x7fff8293e000 -     0x7fff829f3fe7  com.apple.ink.framework 1.3.3 (107) <A68339AA-909D-E46C-35C0-72808EE3D043> /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/Ink.framework/Versions/A/Ink
0x7fff82a03000 -     0x7fff82a80fef  libstdc++.6.dylib 7.9.0 (compatibility 7.0.0) <35ECA411-2C08-FD7D-11B1-1B7A04921A5C> /usr/lib/libstdc++.6.dylib
0x7fff82a81000 -     0x7fff82d7ffff  com.apple.HIToolbox 1.6.5 (???) <AD1C18F6-51CB-7E39-35DD-F16B1EB978A8> /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/HIToolbox.framework/Versions/A/HIToolbox
0x7fff82d80000 -     0x7fff82e39fff  libsqlite3.dylib 9.6.0 (compatibility 9.0.0) <2C5ED312-E646-9ADE-73A9-6199A2A43150> /usr/lib/libsqlite3.dylib
0x7fff82e6a000 -     0x7fff82eb6fff  libauto.dylib ??? (???) <F7221B46-DC4F-3153-CE61-7F52C8C293CF> /usr/lib/libauto.dylib
0x7fff82eb7000 -     0x7fff83254fe7  com.apple.QuartzCore 1.6.3 (227.37) <16DFF6CD-EA58-CE62-A1D7-5F6CE3D066DD> /System/Library/Frameworks/QuartzCore.framework/Versions/A/QuartzCore
0x7fff83255000 -     0x7fff83269fff  libGL.dylib ??? (???) <2ECE3B0F-39E1-3938-BF27-7205C6D0358B> /System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libGL.dylib
0x7fff832e1000 -     0x7fff832f8fff  com.apple.ImageCapture 6.1 (6.1) <79AB2131-2A6C-F351-38A9-ED58B25534FD> /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/ImageCapture.framework/Versions/A/ImageCapture
0x7fff832f9000 -     0x7fff8357bfff  com.apple.Foundation 6.6.8 (751.63) <E10E4DB4-9D5E-54A8-3FB6-2A82426066E4> /System/Library/Frameworks/Foundation.framework/Versions/C/Foundation
0x7fff837ec000 -     0x7fff8382dfef  com.apple.CoreMedia 0.484.60 (484.60) <6B73A514-C4D5-8DC7-982C-4E4F0231ED77> /System/Library/PrivateFrameworks/CoreMedia.framework/Versions/A/CoreMedia
0x7fff8386d000 -     0x7fff839a2fff  com.apple.audio.toolbox.AudioToolbox 1.6.7 (1.6.7) <F4814A13-E557-59AF-30FF-E62929367933> /System/Library/Frameworks/AudioToolbox.framework/Versions/A/AudioToolbox
0x7fff839a3000 -     0x7fff83a80fff  com.apple.vImage 4.1 (4.1) <C3F44AA9-6F71-0684-2686-D3BBC903F020> /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vImage.framework/Versions/A/vImage
0x7fff83a81000 -     0x7fff83ab2fff  libGLImage.dylib ??? (???) <562565E1-AA65-FE96-13FF-437410C886D0> /System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libGLImage.dylib
0x7fff83ab3000 -     0x7fff83ab6ff7  com.apple.securityhi 4.0 (36638) <0234B95B-A339-4576-BB0D-A568634B50F5> /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/SecurityHI.framework/Versions/A/SecurityHI
0x7fff83b84000 -     0x7fff83b84ff7  com.apple.Cocoa 6.6 (???) <C69E895A-1C66-3DA9-5F63-8BE85DB9C4E1> /System/Library/Frameworks/Cocoa.framework/Versions/A/Cocoa
0x7fff83bd0000 -     0x7fff83bf7ff7  libJPEG.dylib ??? (???) <32EDAB18-08ED-B31A-D2BD-12EFFE60D83C> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ImageIO.framework/Versions/A/Resources/libJPEG.dylib
0x7fff83c30000 -     0x7fff83c77ff7  com.apple.coreui 2 (114) <31118426-355F-206A-65AB-CCA2D2D3EBD7> /System/Library/PrivateFrameworks/CoreUI.framework/Versions/A/CoreUI
0x7fff83c88000 -     0x7fff83d6dfef  com.apple.DesktopServices 1.5.11 (1.5.11) <39FAA3D2-6863-B5AB-AED9-92D878EA2438> /System/Library/PrivateFrameworks/DesktopServicesPriv.framework/Versions/A/DesktopServicesPriv
0x7fff83e7b000 -     0x7fff83e8cff7  libz.1.dylib 1.2.3 (compatibility 1.0.0) <5BAFAE5C-2307-C27B-464D-582A10A6990B> /usr/lib/libz.1.dylib
0x7fff83f11000 -     0x7fff83f20fff  com.apple.NetFS 3.2.2 (3.2.2) <7CCBD70E-BF31-A7A7-DB98-230687773145> /System/Library/Frameworks/NetFS.framework/Versions/A/NetFS
0x7fff83f21000 -     0x7fff83f6aff7  com.apple.securityinterface 4.0.1 (40418.0.1) <9AF33A9F-2D8C-2AE6-868C-EA836C861031> /System/Library/Frameworks/SecurityInterface.framework/Versions/A/SecurityInterface
0x7fff83f6b000 -     0x7fff83facfff  com.apple.SystemConfiguration 1.10.8 (1.10.2) <78D48D27-A9C4-62CA-2803-D0BBED82855A> /System/Library/Frameworks/SystemConfiguration.framework/Versions/A/SystemConfiguration
0x7fff83fad000 -     0x7fff849a7ff7  com.apple.AppKit 6.6.8 (1038.36) <4CFBE04C-8FB3-B0EA-8DDB-7E7D10E9D251> /System/Library/Frameworks/AppKit.framework/Versions/C/AppKit
0x7fff84ae2000 -     0x7fff84b03fff  libresolv.9.dylib 41.1.0 (compatibility 1.0.0) <9410EC7F-4D24-6740-AFEE-90405750FAD7> /usr/lib/libresolv.9.dylib
0x7fff84b04000 -     0x7fff84b4dfef  libGLU.dylib ??? (???) <B0F4CA55-445F-E901-0FCF-47B3B4BAE6E2> /System/Library/Frameworks/OpenGL.framework/Versions/A/Libraries/libGLU.dylib
0x7fff84b4e000 -     0x7fff84b69ff7  com.apple.openscripting 1.3.1 (???) <DC329CD4-1159-A40A-A769-70CAA70F601A> /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/OpenScripting.framework/Versions/A/OpenScripting
0x7fff84c27000 -     0x7fff84d9efe7  com.apple.CoreFoundation 6.6.6 (550.44) <BB4E5158-E47A-39D3-2561-96CB49FA82D4> /System/Library/Frameworks/CoreFoundation.framework/Versions/A/CoreFoundation
0x7fff84e57000 -     0x7fff84e65ff7  libkxld.dylib ??? (???) <8145A534-95CC-9F3C-B78B-AC9898F38C6F> /usr/lib/system/libkxld.dylib
0x7fff84e66000 -     0x7fff84ef2fef  SecurityFoundation 36840.0.0 (compatibility 1.0.0) <105C82B6-A1C7-9082-ECA6-AEA08C1948C6> /System/Library/Frameworks/SecurityFoundation.framework/Versions/A/SecurityFoundation
0x7fff84ef3000 -     0x7fff84f34fef  com.apple.QD 3.36 (???) <5DC41E81-32C9-65B2-5528-B33E934D5BB4> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/QD.framework/Versions/A/QD
0x7fff8572b000 -     0x7fff85f35fe7  libBLAS.dylib 219.0.0 (compatibility 1.0.0) <2F26CDC7-DAE9-9ABE-6806-93BBBDA20DA0> /System/Library/Frameworks/Accelerate.framework/Versions/A/Frameworks/vecLib.framework/Versions/A/libBLAS.dylib
0x7fff85f36000 -     0x7fff85f73fff  com.apple.LDAPFramework 2.0 (120.1) <F3B7B267-D580-F287-6DE7-8AC91C92AB35> /System/Library/Frameworks/LDAP.framework/Versions/A/LDAP
0x7fff85f74000 -     0x7fff85faffff  com.apple.AE 496.5 (496.5) <208DF391-4DE6-81ED-C697-14A2930D1BC6> /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/AE.framework/Versions/A/AE
0x7fff85fb0000 -     0x7fff85fb5ff7  com.apple.CommonPanels 1.2.4 (91) <8B088D78-E508-6622-E477-E34C22CF2F67> /System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/CommonPanels.framework/Versions/A/CommonPanels
0x7fff85fcc000 -     0x7fff8601fff7  com.apple.HIServices 1.8.3 (???) <F6E0C7A7-C11D-0096-4DDA-2C77793AA6CD> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/HIServices.framework/Versions/A/HIServices
0x7fff860d2000 -     0x7fff86150ff7  com.apple.CoreText 151.12 (???) <5BE797B7-C903-B664-ADD9-7514B1A6EF9E> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/CoreText.framework/Versions/A/CoreText
0x7fff862f8000 -     0x7fff869f4ff7  com.apple.CoreGraphics 1.545.0 (???) <58D597B1-EB3B-710E-0B8C-EC114D54E11B> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/CoreGraphics.framework/Versions/A/CoreGraphics
0x7fff869f5000 -     0x7fff86a33fe7  libFontRegistry.dylib ??? (???) <395D7C0D-36B5-B353-0DC8-51ABC0B1C030> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ATS.framework/Versions/A/Resources/libFontRegistry.dylib
0x7fff86a34000 -     0x7fff86b4aff7  libxml2.2.dylib 10.3.0 (compatibility 10.0.0) <3814FCF9-92B9-A6AB-E76A-F7021894AA3F> /usr/lib/libxml2.2.dylib
0x7fff86b6c000 -     0x7fff86b6cff7  com.apple.Carbon 150 (152) <32BD355E-C7C7-B993-12F4-90E70C3F3B10> /System/Library/Frameworks/Carbon.framework/Versions/A/Carbon
0x7fff86eb1000 -     0x7fff86eeeff7  libssl.0.9.8.dylib 0.9.8 (compatibility 0.9.8) <F743389F-F25A-A77D-4FCA-D6B01AF2EE6D> /usr/lib/libssl.0.9.8.dylib
0x7fff86f72000 -     0x7fff86f93fe7  libPng.dylib ??? (???) <A6BF1360-1B23-78BD-12EF-E4A5753EEB76> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ImageIO.framework/Versions/A/Resources/libPng.dylib
0x7fff86f94000 -     0x7fff87051fff  com.apple.CoreServices.OSServices 359.2 (359.2) <BBB8888E-18DE-5D09-3C3A-F4C029EC7886> /System/Library/Frameworks/CoreServices.framework/Versions/A/Frameworks/OSServices.framework/Versions/A/OSServices
0x7fff873e4000 -     0x7fff874a5fef  com.apple.ColorSync 4.6.8 (4.6.8) <7DF1D175-6451-51A2-DBBF-40FCA78C0D2C> /System/Library/Frameworks/ApplicationServices.framework/Versions/A/Frameworks/ColorSync.framework/Versions/A/ColorSync
0x7fff87500000 -     0x7fff87670fff  com.apple.QTKit 7.7 (1790) <04FA6686-0570-78BC-7D24-9CFFC87CBE87> /System/Library/Frameworks/QTKit.framework/Versions/A/QTKit
0x7fff87671000 -     0x7fff876c6ff7  com.apple.framework.familycontrols 2.0.2 (2020) <F09541B6-5E28-1C01-C1AE-F6A2508670C7> /System/Library/PrivateFrameworks/FamilyControls.framework/Versions/A/FamilyControls

Model: iMac11,3, BootROM IM112.0057.B00, 4 processors, Intel Core i7, 2.93 GHz, 12 GB, SMC 1.59f2
Graphics: ATI Radeon HD 5750, ATI Radeon HD 5750, PCIe, 1024 MB
Memory Module: global_name
AirPort: spairport_wireless_card_type_airport_extreme (0x168C, 0x8F), Atheros 9280: 2.1.14.6
Bluetooth: Version 2.4.5f3, 2 service, 19 devices, 1 incoming serial ports
Network Service: AirPort, AirPort, en1
Serial ATA Device: WDC WD1001FALS-40Y6A0, 931.51 GB
Serial ATA Device: OPTIARC DVD RW AD-5680H
USB Device: Hub, 0x0424  (SMSC), 0x2514, 0xfa100000 / 2
USB Device: DataTraveler 2.0, 0x0951  (Kingston Technology Company), 0x1607, 0xfa130000 / 7
USB Device: FreeAgent GoFlex, 0x0bc2  (Seagate LLC), 0x5021, 0xfa140000 / 5
USB Device: Internal Memory Card Reader, 0x05ac  (Apple Inc.), 0x8403, 0xfa120000 / 4
USB Device: BRCM2046 Hub, 0x0a5c  (Broadcom Corp.), 0x4500, 0xfa110000 / 3
USB Device: Bluetooth USB Host Controller, 0x05ac  (Apple Inc.), 0x8215, 0xfa111000 / 6
USB Device: Hub, 0x0424  (SMSC), 0x2514, 0xfd100000 / 2
USB Device: IR Receiver, 0x05ac  (Apple Inc.), 0x8242, 0xfd120000 / 4
USB Device: Built-in iSight, 0x05ac  (Apple Inc.), 0x8502, 0xfd110000 / 3 
```

在 XCode 中，部署目标设置为 10.6，归档程序时不会出现错误。怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T02:09:53.360

接口文件可以有不同的部署目标，听起来你的可能设置为 10.8 或 10.7。在 File Inspector 中查找您的 .xib（您可以右键单击它并选择 Show File Inspector）并查看 Deployment。

具体来说，您尝试解压缩 10.7 中引入的 NSLayoutConstraint 失败。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-11T22:26:07.493

确保您没有使用`autolayout`，因为 OS X 版本 10.6 和更早版本不支持。

您可以通过打开您的 XIB 文件并检查文档属性来检查这一点。确保未选中“使用自动布局”框。

# php - 回显 SID 有什么危险

> ID：12291991
> 
> 赞同：3
> 
> 时间：2012-09-06T01:57:13.747
> 
> 标签：php, security, session, sessionid

在[**这个**](http://www.php.net/manual/en/session.idpassing.php)页面上它说

> `htmlspecialchars()`可以在打印 SID 时使用，以防止与 XSS 相关的攻击。

如果您在不使用的情况下打印 SID，那么有人会进行什么攻击`htmlspecialchars()`？

会话 ID 只能包含数字和字母。我错过了什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-06T02:03:52.490

会话 ID 通常**存储在客户端**（例如，在 cookie 或`GET`参数中），因此可以通过某些脚本甚至通过更改 URL 来更改它。

现在想象有人能够**更改 cookie 并更改`SID`为一些 JS 代码**将您重定向到其他地方。如果您将在页面上打印该值而不进行转义，则每次都会重定向用户，除非他清除 cookie 或禁用 JavaScript。

换句话说，**会话 ID 是从客户端获取的**并且是不安全的（除非您将使用其他机制来确保它不被更改，例如 cookie 签名，包括在某些 PHP 框架中），因此您不能相信它不包含某些内容有害。

这与构造 SQL 查询时不能安全使用此值的原因相同（因此 SID 也是可能进行 SQL 注入的地方）。

# php - Build 2D Array of Canvas RGB values

> ID：12291992
> 
> 赞同：2
> 
> 时间：2012-09-06T01:57:19.677
> 
> 标签：php, javascript, canvas, multidimensional-array, rgb

I'm trying to send a 2D array of RGB values to PHP from the array of values from the getImageData().data method:

```
for (var i=0;i<imgData.data.length;i+=4){

    // If you want to know the values of the pixel
    var r = imgData.data[i + 0];
    var g = imgData.data[i + 1];
    var b = imgData.data[i + 2];
    var a = imgData.data[i + 3];

    //[...] do what you want with these values
} 
```

From this, how would I create a 2D array of RGB values of an entire canvas?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T02:13:19.393

```
var rgb = [];
for (var i=0;i<imgData.data.length;i+=4){

    // If you want to know the values of the pixel
    var r = imgData.data[i + 0];
    var g = imgData.data[i + 1];
    var b = imgData.data[i + 2];
    var a = imgData.data[i + 3];

    var x = Math.floor((i/4) % imageData.width);  
    var y = Math.floor((i/4) / imageData.width);
    rgb[x] ? (rgb[x][y] = [r,b,g,a]) : (rgb[x] = [[r,b,g,a]]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T13:39:07.653

这可能不是您想要的，但如果您关心的是传输图像数据（不一定在客户端构建数组），则`toDataURL()`可能是传输图像数据的更简单方法......

HTML5`canvas.toDataURL('image/png')`方法将为您的图像数据生成一个[数据 URI——](http://en.wikipedia.org/wiki/Data_URI_scheme)即一个非常长的、文本编码的 PNG 版本。无需手动抓取图像数据。同样，如果需要，您可以使用 JPEG 编码。

如果您将此字符串发送到服务器，PHP 可以通过将其作为第一个参数传递给[file_get_contents()](http://php.net/manual/en/function.file-get-contents.php)（即）*直接*将其解码回二进制形式。然后，您可以将其保存到磁盘或对二进制 PNG 数据执行任何您想要的操作，就像使用刚刚从磁盘加载的文件一样。`$binary = file_get_contents($dataURL)`

# apache - 更改根目录时如何删除codeigniter中的index.php？

> ID：12291999
> 
> 赞同：0
> 
> 时间：2012-09-06T01:59:13.587
> 
> 标签：apache, .htaccess, codeigniter, mod-rewrite, url-rewriting

如此处所述，我已将应用程序和系统文件夹移动到根目录下。[http://codeigniter.com/user_guide/installation/index.html](http://codeigniter.com/user_guide/installation/index.html)但我不确定如何让 url 与新目录位置一起正常工作。

```
/root/var/
    `-- www
        |-- siteroot
        |       |-- .htaccess
        |       |-- index.php
        |       |-- style.css
        |       |-- script.js
        |-- application/
        |-- system/ 
```

目前这种方式 [http://example.com/index.php/about](http://example.com/index.php/about)

这是我想要的方式，但目前它显示 404 [http://example.com/about](http://example.com/about)

这是我当前的 .htaccess 文件。在我将文件夹移到根目录下之前，它删除了 index.php，现在它仍然会删除 index.php，但是没有 index.php，任何控制器都无法工作

```
################################################
#other hacks can be found at http://codeigniter.com/wiki/mod_rewrite/

<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteBase /

    #Removes access to the system folder by users.
    #Additionally this will allow you to create a System.php controller,
    #previously this would not have been possible.
    #'system' can be replaced if you have renamed your system folder.

    RewriteCond %{REQUEST_URI} ^../system.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    #When your application folder isn't in the system folder
    #This snippet prevents user access to the application folder
    #Submitted by: Fabdrol
    #Rename 'application' to your applications folder name.

    RewriteCond %{REQUEST_URI} ^../application.*
    RewriteRule ^(.*)$ /index.php?/$1 [L]

    #Checks to see if the user is attempting to access a valid file,
    #such as an image or css document, if this isn't true it sends the
    #request to index.php

    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php?/$1 [L]
</IfModule>
<IfModule !mod_rewrite.c>
    # If we don't have mod_rewrite installed, all 404's
    # can be sent to index.php, and everything works as normal.
    # Submitted by: ElliotHaughin

    ErrorDocument 404 /index.php
</IfModule>

################################################
#http://codeigniter.com/forums/viewthread/92609/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T04:02:01.537

放置 htaccess 文件后，只需转到 application/config/config.php 并更改

```
$config['index_page'] = 'index.php'; 
```

到

```
$config['index_page'] = ''; 
```

以及在 htaccess 文件中的以下行中的任一注释

```
#RewriteBase / 
```

或成功

```
RewriteBase /siteroot/ 
```