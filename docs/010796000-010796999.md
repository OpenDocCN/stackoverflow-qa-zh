# StackOverflow 问答 10796000-10796999

# database - 数据库：当外键在父项上时删除子记录

> ID：10796001
> 
> 赞同：0
> 
> 时间：2012-05-29T08:58:07.093
> 
> 标签：database, oracle

我在 Oracle 数据库中有一对具有一对一父子关系的表。不幸的是，外键是在父级中定义的，而不是在子级中：

```
-----------------        -----------------        
| messages      |        | payloads      |
-----------------        -----------------
| id            |        | id            |
| payload_id    |------->| content       |
| creation_date |        -----------------
----------------- 
```

`messages.payload_id`from to的关系`payloads.id`由不可延迟的外键强制执行。

我们有一个查询，它删除了消息创建日期在特定时间之后的所有消息和有效负载。不幸的是，由于反向外键，当前查询如下所示：

```
DELETE FROM messages WHERE creation_date < deletion_date;
DELETE FROM payloads WHERE id NOT IN (SELECT payload_id FROM messages); 
```

第二个讨厌的删除语句是问题所在，因为当我们在每个表中有大约 5000 万条记录时，它需要一个多小时。

*有没有更好的方法来删除所有消息和有效负载？*

请注意，不幸的是，架构超出了我们的控制范围......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T09:25:40.280

您可以将要删除的 id 记录到全局临时表中，然后发出删除，通过存储 rowid 来优化“消息”中的删除

```
insert into my_temp_table (messages_rowid, payload_id)
select rowid, payload_id
from   messages
where  creation_date < deletion_date;

delete from messages
where  rowid in (select messages_rowid from my_temp_table);

delete from payload
where  id in (select payload_id from my_temnp_table);

commit; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T09:11:41.673

怎么样

```
DELETE FROM payloads WHERE id IN 
  ( SELECT payload_id FROM messages WHERE creation_date < deletion_date) 
```

当然，这需要在从消息中删除之前运行。

# jquery - Jqplot 多行刻度/标签

> ID：10796007
> 
> 赞同：2
> 
> 时间：2012-05-29T08:58:36.140
> 
> 标签：jquery, jqplot

我正在尝试使用 ' '将`jqPlot`图表的长标签/刻度分成多行，但一切都是徒劳的。任何人都可以提出什么问题？`<br>``\n`

将标签分成多行的最佳方法是什么？

```
 <script language="javascript" type="text/javascript" src="jqPlot/jquery.jqplot.min.js"></script>
  <script language="javascript" type="text/javascript" src="jqPlot/jqplot.barRenderer.min.js"></script>
  <script language="javascript" type="text/javascript" src="jqPlot/jqplot.highlighter.min.js"></script>
  <script language="javascript" type="text/javascript" src="jqPlot/jqplot.cursor.min.js"></script>
  <script language="javascript" type="text/javascript" src="jqPlot/jqplot.categoryAxisRenderer.min.js"></script>
  <script language="javascript" type="text/javascript" src="jqPlot/jqplot.canvasAxisTickRenderer.min.js"></script>
  <script language="javascript" type="text/javascript" src="jqPlot/jqplot.canvasTextRenderer.min.js"></script>
  <script language="javascript" type="text/javascript" src="jqPlot/jqplot.pointLabels.min.js"></script>
  <script id="example_1" type="text/javascript">    
     $(document).ready(function () {
         var line1 = [5600, 3150, 18];
         var ticks = ['Hardware <br /> and <br /> Installtion', 'Labor', 'Electricity'];    

         plot1 = $.jqplot('chart1', [line1], {
            title: 'Breakout total Cost of Ownership : LFD vs existing solution',
            animate: true,
            seriesColors: ['#1F497D', '#C0504D', '#9BBB59'],

            seriesDefaults: {
                renderer: $.jqplot.BarRenderer,
                rendererOptions: {
                    waterfall: true,
                    barWidth: 50,
                    animation:
                    {
                        speed: 2500
                    },
                    useNegativeColors: false,
                    varyBarColor: true
                },
                pointLabels: {
                    hideZeros: false
                },
                yaxis: 'yaxis',
                xaxis: 'x2axis',
                pointLabels: { show: true }
            },
            axes: {
                x2axis: {
                    renderer: $.jqplot.CategoryAxisRenderer,
                    ticks:ticks,
                    tickRenderer: $.jqplot.CanvasAxisTickRenderer,

                    tickOptions: {
                        fontFamily: 'Georgia',
                        fontSize: '8pt',
                        showGridline: true
                    }
                },
                yaxis: {
                    min: 0,
                    tickInterval: 20000,
                    tickOptions: {
                        formatString: "$%'d"
                    }
                }
            },
            cursor: {
                show: true
            }
        });
    });
 </script> 
```

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T10:45:58.197

删除下面的行后，它工作正常。谢谢

```
<script language="javascript" type="text/javascript" src="jqPlot/jqplot.canvasAxisTickRenderer.min.js"></script> 
```

# c# - 如何从未键入的表达式返回到已键入的表达式？

> ID：10796009
> 
> 赞同：4
> 
> 时间：2012-05-29T08:58:43.567
> 
> 标签：c#, linq, casting, type-conversion, expression

我刚刚遇到了一个涉及[Expressions](http://msdn.microsoft.com/en-us/library/System.Linq.Expressions.Expression.aspx)的问题。

在我`class<T>`有一个领域

```
Dictionary<Expression, ProjectedCollection> mCache; 
```

其中`Expression`和`ProjectedCollection`不能被指定为`Expression<T, S>`and`ProjectedCollection<S>`因为`S`在运行时它们将是不同的东西：

```
void AddSomething<S>(Expression<Func<T, S>> projection)
{
  if (!mCache.ContainsKey(projection))
  {
    var runnable = projection.Compile();
    var allProjected = from elm in mList
                       select runnable(elm);

    mCache.Add(projection, new ProjectedCollection<S>(allProjected));
  }
} 
```

* * *

现在在某个我不知道的地方`S`，我想遍历缓存中的所有内容并将表达式应用于新事物。

```
foreach (KeyValuePair<Expression, ProjectedCollection> keyValuePair in mCache)
{
  // Want something like
  var func = keyValuePair.Key.Compile();
  keyValuePair.Value.SignalAdd(func(newThing));
} 
```

但是[Compile()](http://msdn.microsoft.com/en-us/library/bb345362)方法不适用于 un-typed `Expression`。并且铸造也是不可能的而不知道`S`。

有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T09:11:26.463

转换为 a`LambdaExpression`并在其上调用 Compile。它将返回一个无类型的委托。你可以...

*   ...将此委托转换为 Func/Action 类型之一
*   ...使用反射检查其结构
*   ...使用 Delegate.DynamicInvoke 调用它

# css - wordpress 网站上的 div 中的 60% heignt 不起作用？

> ID：10796015
> 
> 赞同：-1
> 
> 时间：2012-05-29T08:59:25.423
> 
> 标签：css, wordpress, html, height

我正在构建自己的 Wordpress 主题，但我无法让一个功能正常工作。

您可以在此处查看演示：[www.jonasolaussen.se/hairdesign/wordpress](http://www.jonasolaussen.se/hairdesign/wordpress)

当我将高度设置为 60%、80% 或 100% 时，大图可能会消失。它必须是 px 宽度。

问题是我希望将 div 设置为 60%，因此该网站在大小屏幕分辨率上都表现出色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T10:39:28.187

您需要`height: 100%`在主 CSS 中提供 html 和 body 。之后，您将能够以百分比为 DIV 元素设置高度。

演示 - [http://jsfiddle.net/yZV2m/1/](http://jsfiddle.net/yZV2m/1/)

检查更新的演示并尝试将“clearfix”类添加到高度为 0px 的 DIV。

# apache - 逃脱 ”？” 来自 httpd.conf 中的重写规则

> ID：10796018
> 
> 赞同：0
> 
> 时间：2012-05-29T08:59:31.320
> 
> 标签：apache, mod-rewrite

如何逃脱“？” 从以下重写规则：

```
^/pay/$ pay.com?$1 [PT] 
```

在这里动态地`pay/`被`?_requestid=34`附加。我需要逃避“？” 并且只追加`_requestid=34`

# android - 在后台服务中拍照

> ID：10796021
> 
> 赞同：0
> 
> 时间：2012-05-29T08:59:37.310
> 
> 标签：android, root

我正在寻找一种在不向用户显示预览的情况下使用手机相机拍照的方法。

我知道，这是为了不工作而设计的，因为它是一个安全问题，但我正在开发一个“找回我的手机”应用程序，它应该能够识别偷了我手机的小偷（将来^^） . 所以它必须是隐形的。

我的手机已经root了，所以我认为应该有办法做到这一点。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T09:09:15.983

只是一个想法：您可以按照文档中的描述启动相机，但将底层 SurfaceView 可见性设置为（View.GONE 或 View.INVISIBLE）。之后，你可以尝试拍照...

不是真的舒尔，如果这行得通，但我认为值得一试

# sitecore - 如何以编程方式更新 sitecore 中的引用？

> ID：10796024
> 
> 赞同：1
> 
> 时间：2012-05-29T08:59:57.590
> 
> 标签：sitecore, sitecore6

我有 2 个模板：ArticleItem 和 ArticlePageItem，ArticlePageItem 有一个链接到 ArticleItem 的 ReferenceField 'Content.Reference'。下面是创建文章的代码：

```
Item articlePageItem = articlePageParentItem.Add(articleItem.Name, new TemplateItem(master.GetItem(ConstantString.ArticlePageTemplateID)));
using (new UserSwitcher(Sitecore.Context.User))
{
    articlePageItem.Editing.BeginEdit();
    articlePageItem.Fields["Content.Reference"].Value = articleItem.ID.ToString();
    articlePageItem.Editing.EndEdit();
} 
```

但是在我执行上面的代码之后，我无法通过 获取 ArticleItem 引用`Globals.LinkDatabase.GetReferences(articlePageItem)`，即使我使用`Globals.LinkDatabase.UpdateReference(articlePageItem)`.

有谁知道如何实现这个？

**[更新]** 下面是我们的环境：我们有一个基于 Sitecore 的网站，我们正在开发另一个系统，旨在简化文章管理。我们使用 .NET 4 和 ASP.NET MVC 3 来实现这个系统，并将 Sitecore.Kernal.dll 和 Sitecore.Client.dll 引用到我们的项目中。但是我们的 sitecore 版本是 6.2，与 .NET 4 不兼容，所以我只是复制了部分配置。我认为这可能是由于 web.config 不完整造成的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T13:06:21.000

如果您正在执行上述代码，您还应该考虑发布项目更改。

这可以通过使用以下代码片段来完成：

```
// publish all changed content
Database webDatabase = Sitecore.Configuration.Factory.GetDatabase("web");
PublishOptions publishOptions = new PublishOptions(masterDatabase, webDatabase, PublishMode.Smart, Sitecore.Context.Language, DateTime.Now);

publishOptions.RootItem = vacatureRoot;

publishOptions.Deep = true;
Publisher publisher = new Publisher(publishOptions);
publisher.Publish(); 
```

其中 'vacatureRoot' 是根 -> 在您的情况下为 articlePageParentItem 发布后，引用应该自动设置，并且应该可以通过使用获取字段的正常方式来检索。

看起来您正在使用 ReferenceField，因此您的代码应如下所示：

```
ReferenceField rfRef = Sitecore.Context.Item.Fields["Content.Reference"];

if(rfRef != null && rfRef.TargetItem != null) 
{
 //Your logic here
} 
```

回复评论：

我认为您最好使用以下代码片段->

```
Sitecore.Globals.LinkDatabase.UpdateReferences(articlePageItem); 
```

我认为这会像名字所说的那样，更新这个项目的引用。希望这对你有用！

# javascript - 在表格顶部添加新行

> ID：10796031
> 
> 赞同：0
> 
> 时间：2012-05-29T09:00:14.440
> 
> 标签：javascript, html, css, javascript-events

我已经创建了表格，并且有一行带有标题版本应用程序编号，对于该列，我提供了一些链接以下载该版本应用程序。但是，如果有人在服务器上上传了应用程序的新版本，则在 HTML 页面中，该链接必须位于第一行，而旧版本应位于第二行。

如何实施？我们是否需要在 HTML 中实现任何东西，或者他们是否需要更改服务器端的东西。我没有对表中的行数进行任何限制。

我的代码如下：

```
<table border = "2" align= "center" cellpadding = "10">
<tr>
<th> Date </th>
  <th> Build No </th>
<th colspan="2">Production </th>
  <th colspan="2">Staging </th>
 </tr>
   <tr>
<td>date</td>
<td>1.5</td>
<td>Prod With Simulator</td>
<td>Prod WithOut Simulator</td>
<td>Stag With Simulator</td>
<td>Stag WithOut Simulator</td>
</tr>
<tr>
<td>date</td>
<td>1.5</td>
<td><a href= "http://some ur/">Download here</a></td>
<td><a href= "http://some ur/">Download here</a></td>
<td><a href= "http://some ur/">Download here</a></td>
<td><a href= "http://some ur/">Download here</a></td>
</tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T11:34:02.230

你应该使用数据库......如果有人上传新版本，它应该从你的数据库存储在数据库中，你应该迭代并动态显示表格

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T11:45:29.370

我们无法将html连接到数据库..在jsp中我们可以连接所以你在jsp中编写你的html并连接数据库......roseindia.com（见数据库连接）

# wcf - 远程服务器返回错误：(400) Bad Request

> ID：10796036
> 
> 赞同：0
> 
> 时间：2012-05-29T09:00:31.690
> 
> 标签：wcf

我正在尝试使用 WCF Restful 服务。服务配置如下

```
<system.serviceModel>
<bindings>
  <wsHttpBinding>
    <binding name="wsHttp" maxReceivedMessageSize ="50000000" maxBufferPoolSize="50000000" >
      <readerQuotas maxDepth="500000000" maxArrayLength="500000000" maxBytesPerRead="500000000" maxNameTableCharCount="500000000" maxStringContentLength="500000000"/>
      <security mode="None" />
    </binding>
  </wsHttpBinding>
</bindings>
    <services>
  <service behaviorConfiguration="ItemTracker.ItemTrackerServiceBehavior" name="ItemTracker.ItemTrackerService">
            <endpoint address="http://localhost:8003/ItemTracker/ItemTrackerService.svc" binding="wsHttpBinding" contract="ItemTracker.IItemTrackerService" bindingConfiguration="wsHttp">
                <identity>
                    <dns value="localhost"/>
                </identity>
            </endpoint>
            <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>
        </service>
    </services>
    <behaviors>
        <serviceBehaviors>
            <behavior name="ItemTracker.ItemTrackerServiceBehavior">
                <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
                <serviceMetadata httpGetEnabled="true"/>
                <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
                <serviceDebug includeExceptionDetailInFaults="true"/>
            </behavior>
        </serviceBehaviors>
    </behaviors>
</system.serviceModel> 
```

接口定义如下

```
Imports System.ServiceModel.Web
<ServiceContract([Namespace]:="http://localhost:8003/ItemTracker/")> _    
Public Interface IItemTrackerService

<OperationContract()> _
<WebInvoke(Method:="POST", RequestFormat:=WebMessageFormat.Xml, ResponseFormat:=WebMessageFormat.Xml, UriTemplate:="GetItemTrackingDetails")> _
Function GetItemTrackingDetails(ByVal TrackingNo As String) As String

End Interface 
```

客户端应用中Restful服务的调用如下

```
Dim req As HttpWebRequest = Nothing
    Dim res As HttpWebResponse = Nothing

    Dim url As String = "http://localhost:8003/ItemTracker/ItemTrackerService.svc?wsdl/GetItemTrackingDetails/"
    req = DirectCast(WebRequest.Create(url), HttpWebRequest)
    req.Method = "POST"
    req.ContentType = "application/soap+xml; charset=utf-8"
    req.Timeout = 30000
    req.Headers.Add("SOAPAction", url)
    Dim xmlDoc As New System.Xml.XmlDocument()
    xmlDoc.XmlResolver = Nothing
    xmlDoc.Load(AppDomain.CurrentDomain.BaseDirectory & "\test.xml")
    Dim sXML As String = xmlDoc.InnerXml
    req.ContentLength = sXML.Length
    Dim sw As New System.IO.StreamWriter(req.GetRequestStream())
    sw.Write(sXML)
    sw.Close()
    res = DirectCast(req.GetResponse(), HttpWebResponse) 
```

输入xml是这样的。

```
<GetItemTrackingDetails xmlns="http://localhost:8003/ItemTracker/"> 
<TrackingNo>A10001</TrackingNo> 
</GetItemTrackingDetails> 
```

代替 localhost 系统名称被使用

GetItemTrackingDetails 的输出是 xml。有了这个，我得到了错误的请求 400 而不是 xml

有没有人可以帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T09:08:50.133

这个网址看起来很奇怪：

```
Dim url As String = "http://localhost:8003/ItemTracker/ItemTrackerService.svc?wsdl/GetItemTrackingDetails/" 
```

如果你删除它会更好`?wsdl`吗？

```
Dim url As String = "http://localhost:8003/ItemTracker/ItemTrackerService.svc/GetItemTrackingDetails/" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T10:07:04.473

您不需要指定实际服务的 url，只需 url 掩码：

```
http://localhost:8003/ItemTracker/GetItemTrackingDetails/ 
```

此外，您必须在 url 掩码中添加一个占位符以包含操作的输入参数：

```
UriTemplate:="GetItemTrackingDetails/{0}" 
```

这允许您调用实际的 url 并在 url 的末尾传递 TrackingNo 变量：

```
http://localhost:8003/ItemTracker/GetItemTrackingDetails/999AAA 
```

# facebook-graph-api - 使用图形 api 获取页面提要上的直接链接

> ID：10796040
> 
> 赞同：0
> 
> 时间：2012-05-29T09:00:50.153
> 
> 标签：facebook-graph-api, post

我现在尝试了很多组合，但我无法重现手动发布时获得的相同结果：

我想发布一个链接到我创建的 Facebook 页面（而不是用户墙）。我通过获取页​​面访问令牌来做到这一点：

```
$page_access = $facebook->api('/'.$pageid.'?fields=access_token'); 
```

然后我设置（在发布之前）：

```
$facebook->setAccessToken($page_access['access_token']); 
```

最后我的帖子是：

```
$attachment = array('message' => 'this is my link', 
    'link' => 'http://www.facebook.com'
;
$sendMessage = $facebook->api('/'.$pageid.'/feed/','post',$attachment); 
```

我也尝试在 $attachment 结构中设置名称、链接和描述字段，但发布的结果总是包含以下类型的链接：

[https://www.facebook.com/connect/uiserver.php?app_id=_my_app_id&method=permissions.request&redirect_uri=http%3A%2F%2Fwww.facebook.com%2F&response_type=code&display=async&auth_referral=1](https://www.facebook.com/connect/uiserver.php?app_id=_my_app_id&method=permissions.request&redirect_uri=http%3A%2F%2Fwww.facebook.com%2F&response_type=code&display=async&auth_referral=1)

而不是直接链接到[http://www.facebook.com](http://www.facebook.com)。但是，如果我手动发布链接，我会得到一个直接链接（这就是我想要的）以及一个“共享”操作。

所以我的问题是：如何说服 api 按原样发布链接，并获得“共享”操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T09:44:40.290

您的应用未发布直接链接的原因是您已`Authenticated Referrals`在应用上启用。`Connect`这意味着 Facebook 总是在用户被重定向到链接之前尝试让用户访问您的链接。

尝试禁用`Authenticated Referrals`，看看它是否有所作为。

# c++ - 编译器的函数返回类型验证

> ID：10796041
> 
> 赞同：1
> 
> 时间：2012-05-29T09:00:59.790
> 
> 标签：c++

我在 Bruce Eckel 的 Thinking in C++ 中读到，当 C++ 编译器遇到一个函数时，它会使用它的名称和参数来装饰它的名称。对于函数，int func(char ch); 它会将其名称装饰为 _func_char 它不使用返回类型。

在这种情况下，在下面的程序中，当编译器在函数名修饰期间没有存储返回类型时，它如何抱怨“从 int 到 const char* 的无效转换”？谁能澄清一下？

```
#include <iostream>

using namespace std;

int func()
{
    int i = 5;
    return i;
}

int main()
{
    string str = func();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T09:03:14.717

符号（不仅仅是函数）名称修饰在链接阶段发挥作用。你得到一个编译器错误。

编译器看不到损坏的名称。它只是看到你有一个调用的函数`func`，它返回一个`int`并且不接受任何参数，因此可以告诉你你的代码是非法的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-29T09:03:22.410

这是一个编译错误。
编译器根据 C++ 标准规范检查 C++ 程序的有效性。

> **为什么编译器会在这里报错？**

因为编译器***可以看到***函数的返回类型是`int`并且它被用于初始化该类型的变量`std::string`并且没有有效的隐式转换。

请注意，该语言的设计方式允许编译器进行此类类型检查，C++ 是一种***[静态类型语言](http://en.wikipedia.org/wiki/Programming_language#Static_versus_dynamic_typing)***。

# java - 关闭 JFrame 窗口？

> ID：10796045
> 
> 赞同：0
> 
> 时间：2012-05-29T09:01:19.823
> 
> 标签：java, jframe

我正在使用两个框架。在第一帧中，我有一个打开第二帧的按钮。在第二帧中还有一个按钮，但这个按钮用于关闭第二帧。但我不知道该怎么做，我正在寻找一些帮助来解决这个问题？

图形用户界面1

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
public class GUI1 extends JFrame implements ActionListener{
JButton btn1;
Container contentPane;
public GUI1()
{
    setTitle("GUI 1");
    setResizable(false);
    setSize(600,300);
    setDefaultCloseOperation(EXIT_ON_CLOSE);
    contentPane = getContentPane();
    contentPane.setLayout(new FlowLayout());
    btn1 = new JButton("Open GUI 2 frame");
    contentPane.add(btn1);
    btn1.setFocusable(false);
    btn1.addActionListener(this);
}
public void actionPerformed(ActionEvent event){
    if(event.getSource() == btn1)
    {
        GUI2 frame2 = new GUI2();
        frame2.setVisible(true);
    }
}
public static void main(String[] args) {
    GUI1 frame = new GUI1();
    frame.setVisible(true);
}
} 
```

图形用户界面2

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
public class GUI2 extends JFrame implements ActionListener {
Container contentPane;
JButton btn2;
public GUI2()
{
    setTitle("GUI 2");
    setResizable(false);
    setSize(400,200);
    setDefaultCloseOperation(DISPOSE_ON_CLOSE);
    contentPane = getContentPane();
    contentPane.setLayout(new FlowLayout());
    btn2 = new JButton("Close GUI 2 frame");
    contentPane.add(btn2);
    btn2.addActionListener(this);
}
public void actionPerformed(ActionEvent event){
    if(event.getSource() == btn2)
    {
        // Close GUI2 ??
    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T09:04:52.457

只需在侦听器中调用 dispose() 即可：

```
public void actionPerformed(ActionEvent event){
    if(event.getSource() == btn2)
    {
        dispose();
    } 
```

此外，通过单击 X，这将释放窗口，因为您已设置`defaultCloseOperator(DISPOSE_ON_CLOSE);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T09:04:43.310

您的 contentPane 有一个名为 remove 的方法（如果您想删除所有框架，则为 removeAll）。contentPane.remove(this) 应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T09:05:31.443

你只调用方法`dipose()`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T09:08:55.747

您需要在 GUI2 中引用您的 GUI1 实例。`private GUI1 firstGUI`所以也许在你的 GUI2 类中添加一个私有变量。然后写一个setter方法 `public void setGUI1(GUI1 myFirstGUI){ this.firstGUI = myFirstGUI; }`。

然后，您应该使用此设置器从外部设置 GUI1 变量。

然后你可以`firstGUI.dispose()`为 btn2 调用你的 actionPerformed 方法。

# csv - 将 GRIB 和 NetCDF 转换为我的数据库

> ID：10796046
> 
> 赞同：1
> 
> 时间：2012-05-29T09:01:25.237
> 
> 标签：csv, grid, data-conversion, netcdf, grib

![在此处输入图像描述](../Images/70806eda846ac8bdf63ea229f4aed376.png)

我已经下载了一天的“高分辨率初始条件”气候预报数据，它的扩展名是 .tar.gz，所以我将它解压缩到我的本地目录中，我得到了附件图像中的文件。我认为，没有扩展名的文件是 GRIB 数据（因为其中的第一个单词是“GRIB”）。所以我想从大文件（GRIB 和 NetCDF 格式，包含气候数据，如网格中的温度和压力）中获取数据到我的数据库，但它们是二进制的。你能推荐我一些从这些文件中获取数据的简单方法吗？我无法在他们的网站上获得有关处理他们的数据集的任何信息。

将这些文件转换为 .csv 会很好，但我找不到转换 GRIB 文件的程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T13:44:26.367

使用 python 和一些可用的模块很简单......

Enthought [Python Distribution](http://www.enthought.com/products/edudownload.php)包含几个[包](http://www.enthought.com/products/epdlibraries.php)，包括**netCDF4**，用于处理 NetCDF 文件！

我从未使用过 GRIB 文件，但谷歌告诉我存在另一个 python 包[pygrib2](http://code.google.com/p/pygrib2)。

或者您可以使用[PyNio](http://www.pyngl.ucar.edu/Nio.shtml)，一个允许读写 netCDF3 和 netCDF4 经典格式以及读取 GRIB1 和 GRIB2 文件的 Python 包。

我不知道您拥有的数据量，但通常将其转换为 *.csv 很疯狂！Python 易于学习，适合处理此类数据（使用 matplotlib 包，您甚至可以绘制它）。或者，如果你真的需要它在 *.csv 中，你可以用 python 选择一个较小的域，例如，或者需要的变量......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-20T21:16:01.460

要转换为文本，请查看[http://www.cpc.ncep.noaa.gov/products/wesley/wgrib.html](http://www.cpc.ncep.noaa.gov/products/wesley/wgrib.html)或[http://www.cpc.ncep.noaa.gov/products/wesley/wgrib2/](http://www.cpc.ncep.noaa.gov/products/wesley/wgrib2/)

两者都是来自 GRIB 中的知名人士之一的 C 程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-17T23:17:09.233

我目前正在处理类似的问题。就我而言，我试图依赖[GrADS](http://cola.gmu.edu/grads/grads.php)软件，它可以“轻松”将 GRIB 数据转换为其他格式。如果您的数据集不是很大，那么您可以使用[本](http://gradsaddict.blogspot.com/2013/05/tutorial-how-to-save-data-into-txt.html)教程将其导出到 csv。

我的数据集在 GRIB 二进制文件中是 80gb，所以我可以使用什么软件来处理它非常受限（除非我找到一台内存超过 80gb 的计算机，否则没有 R）。

# facebook - Facebook SDK - 获取电子邮件

> ID：10796048
> 
> 赞同：0
> 
> 时间：2012-05-29T09:01:27.883
> 
> 标签：facebook, facebook-graph-api, sdk

使用 PHP SDK。我可以登录并且该应用程序通过身份验证ok（尽管FB尽最大努力阻止我！）。电子邮件显示礼貌`<?php print_r($user_profile); ?>`

但是，示例页面顶部的数组始终显示

```
[id] => 2
[oauth_uid] => 5
[oauth_provider] => facebook
[username] => 5 
```

当我尝试输出电子邮件时，它再次显示值**5**。如何获取电子邮件地址？为什么显示**5**？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T09:41:34.143

您需要执行以下操作：

```
<?php
$user_profile = $facebook->api('/me');
print_r( $user_profile ); 
```

如果您请求`email`许可，完整的电子邮件地址将可见。

# xml - 从 XPath 查询中按日期排序 Xml 项目

> ID：10796052
> 
> 赞同：-1
> 
> 时间：2012-05-29T09:01:56.717
> 
> 标签：xml, perl, xpath, max

我正在编写一些通过 XPath 查询从 Xml 文件中读取的 perl 脚本。从 Perl 脚本中，我需要返回最近日期的 3 部电影（类似于按日期订购电影）。

xml文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="films.xsl"?>
<collection xmlns:xs="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://...." xs:schemaLocation="http://.. films.xsd">

<film id="1">
    <title>Title1</title>
    <date>2011-09-24</date>
    <family>Action</family>
</film>
<film id="4">
    <title>Title2</title>
    <date>1980-09-24</date>
    <family>Thriller</family>
</film>

</collection> 
```

我能怎么做？？我阅读并尝试了更多解决方案，但什么都没有。

我试试

```
my $nodeset = $xp->findnodes(
"/collection/film[not(\@id < preceding-sibling::collection/film[\@id] ) and not(\@id < following-sibling::collection/film[\@id])]" ); 
```

我尝试 XPath 2.0 的 max 函数只返回最新的，我尝试 xsl

```
<xsl:for-each select="collection/film/date">
<xsl:sort select="." data-type="date" order="descending"/>
<xsl:value-of select="title"/>
</xsl:for-each> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T09:25:37.610

[使用XML::XSH2](http://p3rl.org/XML%3a%3aXSH2)查找最新电影：

```
#!/usr/bin/perl
use warnings;
use strict;

use XML::XSH2;

xsh << 'end;';
    open films.xml ;
    register-namespace xs http://.... ;
    $films := hash xs:date /xs:collection/xs:film ;
    $latest = { ( sort { $films->{$a} cmp $films->{$b} }
                     keys %$films )[0] } ;
    ls xsh:lookup('films', $latest) ;
end; 
```

# iphone - 我可以为添加到主屏幕的支持 Web 的站点设置默认页面吗？

> ID：10796055
> 
> 赞同：1
> 
> 时间：2012-05-29T09:02:20.303
> 
> 标签：iphone, mobile-safari, homescreen

我正在开发一个移动网站，其中包含适用于 iphone 的网络设置。当网站被添加到主屏幕时，它会从特定页面启动（即用户在添加到主屏幕时所在的页面）

是否可以将您的主页（或任何主页）设置为默认使用主屏幕按钮打开？谢谢！

# jquery - 如何编辑“必需”属性，并从 jquery 设置它

> ID：10796057
> 
> 赞同：2
> 
> 时间：2012-05-29T09:02:27.593
> 
> 标签：jquery, html, requiredfieldvalidator

是否有某种方法可以编辑未填写要求输入字段时显示的消息？

我是否可以检查特定字段内容是否有效（根据某些规则）并最终添加所需的属性并激活它？否则，是否有一些 CSS 规则可以使边框变为红色并显示消息框？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T09:10:29.323

我假设您使用 jquery 验证插件...更改以下所有使用所需的消息..

```
$.validator.messages.required = 'required'; 
```

更改以下特定元素的使用...

```
$("#EnquiryText").rules("remove"); 
$("#EnquiryText").rules("add", { 
    required: true, 
    messages: { 
        required: <your message>
    } 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T09:11:32.913

你的意思是 HTML5`placeholder`属性？

```
$("#theinput").attr("placeholder", "Some Text") 
```

请注意，HTML5 的该功能在 IE 中不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T09:26:53.043

当你不想使用插件时，你可以添加一个标签（即时）位置绝对......或者只是添加一个边框
jQuery：

```
 $("#yourInput").addClass("borderValidate") 
```

CSS：

```
.borderValidate{
border: 2px solid red;
} 
```

# ios - 滚动/缩放时是否可以连续跟踪 MKMapView 区域？

> ID：10796058
> 
> 赞同：8
> 
> 时间：2012-05-29T09:02:27.913
> 
> 标签：ios, mkmapview, mapkit

当用户缩放或滚动地图时，我想根据 MKMapView 不断更新我的 UI。（不仅在滚动结束后，它工作正常。）

我尝试了委托方法 mapView:regionWillChangeAnimated:，根据文档，“只要当前显示的地图区域发生变化，就会调用它。在滚动期间，可能会多次调用此方法以报告地图位置的更新。” [https://developer.apple.com/documentation/mapkit/mkmapviewdelegate](https://developer.apple.com/documentation/mapkit/mkmapviewdelegate)

```
- (void)mapView:(MKMapView *)mapView regionWillChangeAnimated:(BOOL)animated
{
    [self updateUIAcordingToMapViewRegionChange];
} 
```

但不幸的是，这不起作用，因为文档似乎没有说实话。该方法仅在区域更改的最开始时调用一次。在滚动过程中，当手指向下移动时，该方法不再被调用。

我能找到的关于这个问题的唯一帖子是 macrumors 成员 namanhams： [http](http://forums.macrumors.com/showthread.php?t=1225172) ://forums.macrumors.com/showthread.php?t=1225172 但没有人提出任何想法......

作为一种解决方法，我尝试在 regionWillChange 中设置一个计时器（并在 regionDidChange 中使其无效）：

```
- (void)handleRegionChange:(NSTimer*)timer
{
   [self updateUIAcordingToMapViewRegionChange];
} 

- (void)mapView:(MKMapView *)mapView regionWillChangeAnimated:(BOOL)animated
{
    self.mapRegionIsChangingTimer = [NSTimer scheduledTimerWithTimeInterval:0.1
                                                    target:self
                                                  selector:@selector(handleRegionChange:)
                                                  userInfo:nil
                                                   repeats:YES];
} 
```

但这也行不通。滚动结束后立即执行来自计时器的所有方法调用。好像滚动 mapView 阻塞了主线程什么的……</p>

我也在 stackoverflow 上阅读了这篇文章，但不幸的是并没有完全理解它： [Monitor MKMapView redraw events](https://stackoverflow.com/questions/8967570/monitor-mkmapview-redraw-events) 所以如果我的问题的解决方案确实在于那个 SO 线程，请告诉我，我会尝试深入研究它的细节。

我仍然希望我太愚蠢或太盲目而无法找到正确的委托方法，并且非常感谢处理 MKMapView 区域跟踪的任何提示、解决方法和最佳实践。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-24T09:08:53.633

这将起作用：

```
@interface MapViewController () {
    NSTimer *_updateUITimer;
}

@end

@implementation MapViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    _updateUITimer = [NSTimer timerWithTimeInterval:0.1 
                                             target:self 
                                           selector:@selector(updateUI) 
                                           userInfo:nil 
                                            repeats:YES];

    [[NSRunLoop mainRunLoop] addTimer:_updateUITimer forMode:NSRunLoopCommonModes];

}

- (void)dealloc
{
    [_updateUITimer invalidate];
}

- (void)updateUI
{
    // Update UI
}

@end 
```

另一种方法是在 mapView:regionWillChangeAnimated 中创建计时器并在 mapView:regionDidChangeAnimated 中使其无效。

# opengl - OpenGL场景坐标到屏幕坐标

> ID：10796059
> 
> 赞同：1
> 
> 时间：2012-05-29T09:02:33.810
> 
> 标签：opengl, coordinates, glkit

我无法将我的 OpenGL 场景坐标转换为我的屏幕坐标。

我想我需要将我的坐标与模型视图矩阵相乘，然后与投影矩阵相乘以获得 ndc。但我得到了奇怪的坐标。

这是我的一段代码

```
GLKVector3 coor = GLKVector3Make(point.x, point.y, 0);
GLKMatrix4 modelview = GLKMatrix4MakeWithArray(glProjectionMatrix);
GLKMatrix4 projetion = GLKMatrix4MakeWithArray(modelViewMatrix.data);

GLKVector3 eyeCoor = GLKMatrix4MultiplyVector3(modelview, coor);
GLKVector3 ndcCoor = GLKMatrix4MultiplyVector3(projetion,eyeCoor);

CGPoint p = CGPointMake(ndcCoor.x, ndcCoor.y); 
```

任何的想法 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T09:08:26.280

该代码*似乎*完全有效，但您应该使用 4D 向量进行这些齐次变换。

所以，

```
GLKVector4 coor = GLKVector4Make(point.x, point.y, 0, 1);

/// I hope those matrices are fine
GLKMatrix4 modelview = GLKMatrix4MakeWithArray(glProjectionMatrix);
GLKMatrix4 projetion = GLKMatrix4MakeWithArray(modelViewMatrix.data);

GLKVector4 eyeCoor = GLKMatrix4MultiplyVector4(modelview, coor);
GLKVector4 ndcCoor = GLKMatrix4MultiplyVector4(projetion,eyeCoor);

float XScr = ndcCoor.x / ndcCoor.w;
float YScr = ndcCoor.y / ndcCoor.w;

CGPoint p = CGPointMake(XScr, YScr); 
```

如果您希望 XScr 和 YScr 在 [0..1] 范围内，则添加

```
XScr = (XScr + 1.0f) * 0.5f;
YScr = (YScr + 1.0f) * 0.5f; 
```

转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T10:19:30.380

更简单：使用 GLKit 数学函数 GLKMathProject。

```
GLKVector3 GLKMathProject (
   GLKVector3 object,
   GLKMatrix4 model,
   GLKMatrix4 projection,
   int *viewport
); 
```

所以，在你的情况下，例如

```
int viewport[] = {0, 0, 320, 480};
GLKVector3 windowVector = GLKMathProject(coor, modelview, projetion, viewport);
CGPoint p = CGPointMake(windowVector.x, windowVector.y); 
```

请注意，原点在左下角，所以如果您使用原点在左上角的 UIKit 坐标，则切换 y 坐标，例如

```
CGPoint p = CGPointMake(windowVector.x, window.bounds.size.height - windowVector.y); 
```

# c# - 如何修复 Activator.CreateInstance 失败并出现 MissingMethodException“找不到类型的构造函数”？

> ID：10796062
> 
> 赞同：3
> 
> 时间：2012-05-29T09:02:40.197
> 
> 标签：c#, wpf, activator, createinstance

我正在尝试使用以下内容创建自定义用户控件：

```
var panel = new GenericAccordionPanel<ZoneReport, ZonesPanel, ZonesVM>(myVm.ZonesVm); 
```

`GenericAccordionPanel`定义为：

```
public class GenericAccordionPanel<THeader, TBody, TViewModel> : UserControl
{
    public Accordion Accordion { get; set; }

    public GenericAccordionPanel(TViewModel vmItem)
    {
        this.Accordion = new Accordion();

        //the constructor for ZoneReport(THeader) takes a ZonesVM (vmItem) as a parameter.
        var zr = (THeader)Activator.CreateInstance(typeof(THeader), new { vmItem });

        var exp = new Expander { Header = zr };

        Accordion.Children.Add(exp);

        base.Content = Accordion;
    }
} 
```

问题在于`Activator.CreateInstance`以下情况失败`MissingMethodException`：

> 未找到类型“[命名空间].Zones.ZoneReport”的构造函数。

我怎样才能创建一个实例`ZoneReport`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-29T09:07:45.057

`new { vmItem }`应该是`new object[]{ vmItem }`。

目前，您使用[`Activator.CreateInstance`](http://msdn.microsoft.com/en-us/library/wcxyzt4d.aspx)匿名类型作为第二个参数调用，而不是参数数组。

由于第二个参数（对于您想要的重载）实际上是一个`params`参数，您也可以只使用 plain`vmItem`编译器将生成数组：

```
 var zr = (THeader)Activator.CreateInstance(typeof(THeader), vmItem); 
```

# mysql - 用于统计过去 7 天添加的广告的 Sql 查询

> ID：10796067
> 
> 赞同：1
> 
> 时间：2012-05-29T09:03:01.443
> 
> 标签：mysql, sql, phpmyadmin

我已经制作了这个有效的 sql 查询来计算用户总共拥有的广告 ->

```
SELECT count(*) FROM `table_name` WHERE `user_id` = 20; 
```

所以这显示了用户总共有多少广告。我要添加的是用户在过去 7 天内添加了多少广告......所以我有一个`table_name`名为“created_date”的列......所以有人可以帮我如何计算用户广告的“created_date”来自请问现在能持续7天吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T09:04:07.497

```
SELECT COUNT(*)
FROM   table_name
WHERE  user_id = 20 AND created_date > NOW() - INTERVAL 7 DAY 
```

更一般地，查看[MySQL 的](http://dev.mysql.com/doc/en/date-and-time-functions.html)各种高级日期处理的日期函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T09:06:22.767

```
SELECT COUNT(1)
FROM table_name
WHERE user_id = 20 AND created_date > (NOW() - INTERVAL 7 DAY) 
```

# asp.net - 使用错误的属性编译

> ID：10796068
> 
> 赞同：1
> 
> 时间：2012-05-29T09:03:02.833
> 
> 标签：asp.net

我们有一个 asp.net 自定义控件，用于我们的 webforms asp.net 项目。我重命名了控件的属性，并希望在该属性用作属性的地方出现编译时错误，但它没有发生。为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T09:34:45.193

ASP.NET 标记实际上并没有在编译时甚至在运行时进行架构检查。您完全有权编写您喜欢的任何旧标签汤 - 除非您明确地做一些没有意义的事情，否则 ASP.NET 不会抱怨。

```
 <asp:Label runat="server" fjsdkfj="sdjkfldskfls">Hello</asp:Label> 
```

将上述内容放在 an 上`aspx`，您将不会在编译时收到任何投诉，甚至在运行时也不会收到任何投诉 - 您只会得到

```
<span fjsdkfj="sdjkfldskfls">Hello</span> 
```

发送到浏览器。但是，做

```
<asp:Label runat="server" fjsdkfj="sdjkfldskfls" Height="ohdear">Hello</asp:Label> 
```

在*运行时*你会得到一个解析器错误，因为 ASP.NET 试图转换`ohdear`成一个高度值。

要更早地找到第二种类型的错误，您可以使用 ASP.NET 预编译。为了找到第一类错误，我知道除了测试之外别无他法——即使 ReSharper 似乎也没有提供任何有用的检查。

# android - 如何水平对齐一些以编程方式添加的视图？

> ID：10796075
> 
> 赞同：1
> 
> 时间：2012-05-29T09:03:41.267
> 
> 标签：android, android-layout, alignment

我设计了如下图所示的布局：

![图片](../Images/a36fecbcdc4a93cfaeac916538a08c0c.png)

在 中输入文本后`EditText`，当我按*Add+* `Button`时`TextView`，`Button`将添加如下图所示：

![图片](../Images/55b2423f5de68396ba48c1134e55b813.png)

我想`Button`在右侧显示`TextView`. 我该怎么做？`View`另一个问题，当用户单击按钮时，我应该如何删除对应的？编码：

```
 public class ExampleActivity extends Activity {
    private LinearLayout mLayout;
    private EditText mEditText;
    private Button mButton;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        mLayout = (LinearLayout) findViewById(R.id.linearLayout);
        mEditText = (EditText) findViewById(R.id.editText);
        mButton = (Button) findViewById(R.id.button);
        mButton.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                mLayout.addView(createNewTextView(mEditText.getText()
                        .toString()));
                mLayout.addView(createNewButton());
            }
        });

    }

    private TextView createNewTextView(String text) {
        final LayoutParams lparams = new LayoutParams(
                LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
        final TextView textView = new TextView(this);
        textView.setLayoutParams(lparams);
        textView.setText("New text: " + text);
        return textView;
    }

    private Button createNewButton() {
        final LayoutParams lparams = new LayoutParams(
                LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT);
        final Button button = new Button(this);
        button.setLayoutParams(lparams);
        button.setText(" - ");
        return button;
    }
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T07:33:32.020

`TextViews`和`Buttons`是堆叠的，因为您可能将 a`LinearLayout`与方向一起使用`vertical`。您可以将您的`TextView`+包装`Button`成 a`LinearLayout`然后将其添加`LinearLayout`到您自己的布局中，或者您可以使用`TableLayout`下面的类似（我添加了一些 id，因此您可以删除所需的行）：

```
public class SomeActivity extends Activity {

    private EditText mInput;
        private TableLayout mTable;
        private static int sCount = 0;

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);
            Button addButton = (Button) findViewById(R.id.add);
            mInput = (EditText) findViewById(R.id.editText1);
            mTable = (TableLayout) findViewById(R.id.table1);
            addButton.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    mTable.addView(addRow(mInput.getText().toString()));
                }
            });
        }

        private TableRow addRow(String s) {
            TableRow tr = new TableRow(this);
            tr.setId(1000 + sCount);
            tr.setLayoutParams(new TableLayout.LayoutParams(
                    TableLayout.LayoutParams.FILL_PARENT,
                    TableLayout.LayoutParams.WRAP_CONTENT));
            TableRow.LayoutParams tlparams = new TableRow.LayoutParams(
                    TableRow.LayoutParams.WRAP_CONTENT,
                    TableRow.LayoutParams.WRAP_CONTENT);
            TextView textView = new TextView(this);
            textView.setLayoutParams(tlparams);
            textView.setText("New text: " + s);
            tr.addView(textView);
            TableRow.LayoutParams blparams = new TableRow.LayoutParams(
                    TableRow.LayoutParams.WRAP_CONTENT,
                    TableRow.LayoutParams.WRAP_CONTENT);
            final Button button = new Button(this);
            button.setLayoutParams(blparams);
            button.setText(" - ");
            button.setId(2000 + sCount);
            button.setOnClickListener(new OnClickListener(){

                @Override
                public void onClick(View v) {               
                    mTable.removeView(findViewById(v.getId() - 1000));
                }           
            });
            tr.addView(button);
            sCount++;
            return tr;
    }

} 
```

`main`布局文件在哪里：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <LinearLayout
        android:id="@+id/parent"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <EditText
            android:id="@+id/editText1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" />

        <Button
            android:id="@+id/add"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" />

        <TableLayout
            android:id="@+id/table1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >
        </TableLayout>
    </LinearLayout>

</ScrollView> 
```

如果由于某种原因，您不喜欢`TableLayout`使用 a`LinearLayout`来包装您`TextView`并`Button`使用上面的布局文件（当然删除`TableLayout`）：

```
//...
ll = (LinearLayout) findViewById(R.id.parent);
        addButton.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                //where ll is the LinearLayout with the id parent
                ll.addView(addRow(mInput.getText().toString()));
            }
        });
    }

    private LinearLayout addRow(String s) {
        LinearLayout tr = new LinearLayout(this);
        tr.setId(1000 + sCount);
        tr.setLayoutParams(new LinearLayout.LayoutParams(
                LinearLayout.LayoutParams.FILL_PARENT,
                LinearLayout.LayoutParams.WRAP_CONTENT));
        LinearLayout.LayoutParams tlparams = new LinearLayout.LayoutParams(
                LinearLayout.LayoutParams.WRAP_CONTENT,
                LinearLayout.LayoutParams.WRAP_CONTENT);
        TextView textView = new TextView(this);
        textView.setLayoutParams(tlparams);
        textView.setText("New text: " + s);
        tr.addView(textView);
        LinearLayout.LayoutParams blparams = new LinearLayout.LayoutParams(
                LinearLayout.LayoutParams.WRAP_CONTENT,
                LinearLayout.LayoutParams.WRAP_CONTENT);
        final Button button = new Button(this);
        button.setLayoutParams(blparams);
        button.setText(" - ");
        button.setId(2000 + sCount);
        button.setOnClickListener(new OnClickListener(){

            @Override
            public void onClick(View v) {               
                ll.removeView(findViewById(v.getId() - 1000));
            }           
        });
        tr.addView(button);
        sCount++;
        return tr;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T09:06:51.017

LinearLayout 具有属性 Orientation 以垂直/水平对齐控件，因此只需设置相同的 Orientation

[http://developer.android.com/reference/android/widget/LinearLayout.html](http://developer.android.com/reference/android/widget/LinearLayout.html)

```
 mLayout = (LinearLayout) findViewById(R.id.linearLayout);
 mLayout.setOrientation(LinearLayout.HORIZONTAL); 
```

更新

```
<?xml version="1.0" encoding="utf-8"?> 
<LinearLayout   
        xmlns:android="schemas.android.com/apk/res/android";   
        android:layout_width="fill_parent"   
        android:layout_height="fill_parent" > 

<LinearLayout   
        android:id="@+id/linearLayout" 
        android:layout_width="fill_parent"   
        android:layout_height="wrap_content" /> 

<EditText   
        android:id="@+id/editText" 
        android:layout_width="293dp"   
        android:layout_height="wrap_content" > 
        <requestFocus /> </EditText> 

 <Button android:id="@+id/button" 
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:text="Add+" />

 </LinearLayout> 
```

# iphone - 如何检查触摸点是ios中曲线路径边缘的内容？

> ID：10796078
> 
> 赞同：2
> 
> 时间：2012-05-29T09:03:52.923
> 
> 标签：iphone, ios, core-graphics

我正在使用一个在两个盒子之间绘制曲线的应用程序。一旦绘制出来，我想使用起点、终点和其他点（接触点）来改变曲线的形状，如果那是在曲线的边缘。那么如何检查接触点是否在曲线路径的边缘？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T12:58:13.887

好吧，你的曲线路径必须有一个方程，对吗？您可以简单地检查接触点是否是方程的解。

您还可以通过检查矩形 R 的每个点来添加阈值。其中 R 是以触摸点为中心的矩形，大小 = your_threshold

# gwt - RequestFactory：只读域对象/代理的属性？

> ID：10796079
> 
> 赞同：0
> 
> 时间：2012-05-29T09:03:53.893
> 
> 标签：gwt, getter-setter, requestfactory

我有`Document`具有只读（从客户端角度）属性的实体`modificationAuthor`（我希望它只在知道当前登录用户的服务器端进行修改）。`Document`实体`modificationAuthor`在代理和域对象中都没有属性设置器。

问题是它不是一个简单的属性，而是其他实体（`User`）所以我需要添加`modificationAuthor`到`paths`当我调用`requestFactory.find(id).with(paths).fire()`以获取`Document`实例时。（所以`modificationAuthor`当我想从中读取它时它不为空`Document`）。

但是在将它添加到路径并尝试持久化`Document`对象之后，我得到了异常：`Could not locate setter for property modificationAuthor...`. 即使对于设计为只读的属性，RF 似乎也需要设置器。

目前有什么方法可以避免向此类属性添加设置器并能够读取它并保留父对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T09:12:30.350

[这是问题 5952](http://code.google.com/p/google-web-toolkit/issues/detail?id=5952)的副作用，将（应该）在 GWT 2.5 中修复，并在一个月左右发布：RF 错误地认为`modificationAuthor`属性已被修改（因为它无法将用户实体与自身进行比较） ，因此它向服务器发送该属性的*操作*，然后服务器尝试将属性值设置为给定的实体（恰好是已经存在的实体）。

同时，恐怕您必须为您的`Document`域对象添加一个虚拟设置器（它不需要实际分配属性值）。

# java - 如何调用尚未启动的服务？

> ID：10796080
> 
> 赞同：1
> 
> 时间：2012-05-29T09:03:55.580
> 
> 标签：java, android, service

还没有启动的 Android 服务呢？

我可以调用这样的服务吗？如果可以，如何调用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T09:10:39.510

您只能通过以下方式调用`API`服务

```
Intent i = new Intent();
startService(i); 
```

但是不要忘记只有一份服务可以运行。只有一份。并且也没有运行任何服务。虽然更多的活动可以使用服务，但仍然是一个副本。

此外，如果您实现`onBind()`了支持`IPC`机制的方法，您可以通过`bindService()`常量获得服务，`BIND_AUTO_CREATE`这意味着如果服务没有运行，服务将自动启动。`bindService()`您可以在您想通过绑定与服务进行通信时使用。

也用于停止服务使用方法，如`stopService()`or `unBindService()`。

问候

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T09:11:49.707

你是什​​么意思“调用服务”？

在[启动服务](http://developer.android.com/reference/android/app/Service.html#ServiceLifecycle)的情况下；调用`startService()`时，`onCreate()`如果这是第一次`startService()`调用，则调用；else`onStartCommand()`被调用。

在[绑定服务](http://developer.android.com/guide/topics/fundamentals/bound-services.html)的情况下，当您调用时`bindService()`；如果服务尚未运行，则`onCreate()`调用；else`onBind()`被调用。

# android - 打开设备的小键盘

> ID：10796087
> 
> 赞同：-8
> 
> 时间：2012-05-29T09:04:15.810
> 
> 标签：android

> **可能重复：**
> [打开数字键盘而不强制 EditText 仅为数字](https://stackoverflow.com/questions/8476490/open-a-numeric-keyboard-without-forcing-the-edittext-to-be-numeric-only)

在我的应用程序中，我有一个 EditText 字段，它只接受整数值。所以我认为当我点击这个EditText时自动打开小键盘而不是字母会更好。

```
How can i achieve this?? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T09:10:39.213

在定义 EditText 时在 xml 文件中，将 inputType 添加为 Number

```
android:inputType="number" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T09:20:30.487

使用 xml 布局属性

为此，您可以在 EditText xml 定义中使用多个 xml 属性（请参阅[android:inputType](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3ainputType)了解可用选项）

例子：

```
<EditText android:inputType="phone" ...
<EditText android:inputType="number" ...
<EditText android:inputType="numberSigned" ...
<EditText android:inputType="numberDecimal" ... 
```

您还可以提示 android 显示数字键盘并使用 android:numeric 将输入限制为可接受的字符

例子：

```
<EditText android:numeric="integer" ...
<EditText android:numeric="signed" ...
<EditText android:numeric="decimal" ... 
```

以编程方式

`EditText.setRawInputType(int)`与 TYPE_CLASS_NUMBER 等常量一起使用，您将在 android:inputType 中找到

或者

```
EditText editView = new EditText(this);
editView.setKeyListener(new NumberKeyListener())

EditText editView = new EditText(this);
editView.setKeyListener(new DigitsKeyListener()); 
```

希望这有帮助

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-29T09:08:20.673

请参阅从它扩展而来的`TextView`文档`EditText`：

[http://developer.android.com/reference/android/R.styleable.html#AutoCompleteTextView_inputType](http://developer.android.com/reference/android/R.styleable.html#AutoCompleteTextView_inputType)

# html - 如何获取要显示在 Oracle APEX CLASSIC 报告中的图像或链接？

> ID：10796089
> 
> 赞同：1
> 
> 时间：2012-05-29T09:04:23.313
> 
> 标签：html, report, oracle-apex

我想做这样的事情：

```
select 
a,
'<img src="/i/image.png" width="24px"/>' b
from myTable; 
```

但 html 像文本一样显示。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T09:12:00.967

编辑列属性并将显示为属性设置为“标准报告列”，然后 HTML 将不会被转义。

![在此处输入图像描述](../Images/737bff18b56dd6df09ffa23ada3ea76a.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-01-22T13:32:19.420

在更新的 APEX 版本中找不到“显示为”列属性。最终与我合作的是在列属性的“安全”部分中将“转义特殊字符”设置为“否”。[列属性 > 安全性](https://i.stack.imgur.com/3ZryH.png)

# ruby-on-rails - 无法批量分配受保护的属性：first_name、last_name、email、password、password_confirmation

> ID：10796092
> 
> 赞同：1
> 
> 时间：2012-05-29T09:04:26.793
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, attr, mass-assignment

我有`user`使用[devise gem](https://github.com/plataformatec/devise)的模型，但我没有`attr_accessible`任何字段我仍然收到错误：

> 无法批量分配受保护的属性

我的`User`班级如下

```
class User < ActiveRecord::Base
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, 
         :token_authenticatable  #, :validatable
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T09:15:04.550

我也有同样的问题，也许设计用`attr_accessible`. 您需要在模型中进行设置`attr_accessible`以使其工作。

```
class User < ActiveRecord::Base
  devise :database_authenticatable, :registerable,
:recoverable, :rememberable, :trackable, :token_authenticatable #, :validatable`

  # Setup accessible (or protected) attributes for your model
  attr_accessible :first_name, :last_name, :email, :password, :password_confirmation
end 
```

您可以查看这些 railscasts 剧集。

[http://railscasts.com/episodes/209-introducing-devise](http://railscasts.com/episodes/209-introducing-devise)

[http://railscasts.com/episodes/210-customizing-devise](http://railscasts.com/episodes/210-customizing-devise)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T09:48:42.297

如果我放了`attr_protected`而不是`attr_accessible`那么它对我有用。
仅供参考，我使用 Rails 3.2.3 和 Ruby 1.9.3

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T14:30:11.457

我只设置了 attr_accessible :name, :password, :password_confirmation 并且它正在工作，而没有在 config\application.rb 中设置 config.active_record.whitelist_attributes = false 只检查 attr_accessible 中 _form.html.erb 中的 vars 的正确名称。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T09:15:16.070

从 Rails 3.2.3 开始，默认情况下是 `config.active_record.whitelist_attributes`in 。您必须手动设置需要批量分配的属性（或者您可以设置为禁用此行为）。`config/application.rb``true``attr_accessible``whitelist_attributes``false`

# .net - NHibernate：更改授权查询

> ID：10796094
> 
> 赞同：3
> 
> 时间：2012-05-29T09:04:31.897
> 
> 标签：.net, linq, nhibernate, authorization

我们正在完全重写现有产品（并且正在从 PHP 更改为 C#）。我们在现有产品中遇到的问题之一是授权问题：除非您确保始终在任何地方进行检查，否则人们会看到他们不允许看到的内容。确保始终检查它的最佳位置是什么？我认为数据层是这样做的好地方，但欢迎提出其他建议。

我们使用 NHibernate，因此我们构建了一个提供实体的类。它看起来像这样：

```
class DataProvider {
    TEntity Get<TEntity>(int id) {
        return GetSession().Get<TEntity>(id);
    }

    IQueryable<TEntity> Query<TEntity>()
    {
        return GetSession().Query<TEntity>();
    }

    // ...
} 
```

这允许我`DataProvider.Get<Person>(1)`使用`from person in DataProvider.Query<Person>() select person`. 使用拦截器将允许我拒绝访问用户无权访问的任何单个对象（尽管可以说我可以将该代码插入`DataProvider.Get`）。当我尝试使用 LINQ 时，它变得很麻烦。假设我有一个包含 100 万个实体的表，但我只能访问 5 个实体。使用拦截器将检索整个表并测试每个返回的实体，但我只需要其中的 5 个。我能想象的最好的事情是注入一些自定义 SQL 来告诉 NHibernate 检索哪些对象并忽略所有其他对象。我们已经有一个系统可以确定我们是否可以访问一个对象，假设我们也知道如何从中进行查询。

我尝试了什么？

*   拦截器（为时已晚，只需要 5 个时检索 100 万个对象）。
*   事件（IPostLoadEvent 最接近我的需要，但也为时已晚）。
*   自定义 NhQueryable 和 DefaultQueryProvider。这会引发一个异常：“ `The constant for 'MyQueryable<Person>' is not supported`”，我认为这是由于 NHibernate 内部某个深处的投射所致。我怀疑 NHibernate 的设计目的是允许自定义查询提供程序或可查询。
*   OnPrepareStatement 拦截器。这是难以置信的丑陋。它允许我编辑 SQL，但我得到的只是一个字符串。这会起作用，但我希望有一种更优雅的方式来做同样的事情。

其他人如何处理他们的授权码？您如何确保没有人忘记调用授权检查？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T20:04:45.063

我认为你应该看看 NHibernate 过滤器。

Ayende 的精彩介绍在这里：[http ://ayende.com/blog/3993/nhibernate-filters](http://ayende.com/blog/3993/nhibernate-filters)

几年前，我们成功地将 NH 过滤器用于与您类似的场景。我在下面附上了过滤器的本质。在我们的例子中，我们想要控制访问的所有类都继承自基类“SecuredObject”。我们在“文件夹”中也有“文档”的概念。这里有点断章取义，但也许它可以给你一些想法。

`<filter name="GrantedSecuredObjectsOnly" condition=" ... Id IN (SELECT SecurityGrant.SecuredObjectId FROM SecurityGrant WHERE SecurityGrant.SecuredObjectConsumerId=:userId)) OR (Id IN (SELECT Document.Id FROM Document WHERE Document.FolderId IN (SELECT SecurityGrant.SecuredObjectId FROM SecurityGrant WHERE SecurityGrant.SecuredObjectConsumerId=:userId)) ... "/>`

userId 当然设置为当前登录的用户 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T10:22:35.247

编辑：我在想什么！

我假设您正在使用 authenticationId / EnteredById 标记您的数据

```
var userId = ...; //your authentication id

from entity in context.Entities    
where context.Entities.Where(x => x.EnteredById == userId && x.Id == entity.Id)
select entity; 
```

我认为这应该这样做

* * *

```
var query = new AuthorisedDataQuery<Entity>();
var entities = _dataProvider.Get(query); 
```

编写授权的数据查询实现应该很容易。

* * *

带有规范的查询：伪代码

```
var userId = ... //authentication
var specification = PredicateBuilder.True<Entity>();
specification = PredicateBuilder.And(specification, x => x.EntityId == userId); //default: build from this
var additionalCriterias = ...;
specification = additionalCriterias == null || additionalCriterias.Length == 0 
                  ? specification 
                  : GetComposedSpecification(additionalCriterias);

var query = from entity in context.Entities
            join anyOtherEntity in context.AnyOtherEntity on entity.EntityId equals anyOtherEntity.Entity.EntityId
            where db.Context.Entities.Where(specification).Contains(entity.EntityId)
            select entity; 
```

**简单地说，您要实现的是从默认值构建查询条件/规范**

通过 linkkit @ [http://www.albahari.com/nutshell/predicatebuilder.aspx的谓词构建器](http://www.albahari.com/nutshell/predicatebuilder.aspx)

# performance - 使用 Symfony2 表单组件的性能问题

> ID：10796097
> 
> 赞同：4
> 
> 时间：2012-05-29T09:04:50.100
> 
> 标签：performance, forms, symfony

我在使用 Symfony2 表单组件时遇到了性能问题，我正在使用该组件创建一个包含 300 个复选框的表单。此表单必须灵活（应使用给定的数据树在 SET_DATA 事件上创建复选框。我还使用订阅者使我的表单灵活。

**问题：**

*   表单生成平均需要 900 毫秒（考虑到输入大小，这是相当长的时间）
*   绑定我的表单需要更多时间（平均 1 秒）

**假设：**

*   propertyPathMapper 花费了太多时间来创建路径并寻找正确的路径来获取验证错误消息。

**我的问题：**

*   对于 PropertyPath 问题，您知道如何解决吗？如果不是，关于如何优化我的表单的任何想法？

**我们的代码：**

我创建了一个 github Gist > [https://gist.github.com/2867617](https://gist.github.com/2867617)

*   data.array 是我们用来生成搜索表单的数据格式。（树可以有许多子级别，并且是从我们的数据库创建的）
*   SearchType.php 是我们的主要搜索类型
*   我们正在使用的其他类正在帮助我们迭代并生成所有搜索条件元素。

PS：我们使用的是 Symfony2 的 2.0.15 版本，

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T08:29:26.280

*   您可以通过使用 Memcache 缓存生成的表单 html 来解决第一个问题。请记住在保存表单后使缓存索引无效。
*   对于第二个问题，使用分析器检查需要这么长时间的原因，可能是 Doctrine 水合作用问题。

# c - 包含名为“generic”的变量的结构不会在 C++/CLI 项目中编译

> ID：10796098
> 
> 赞同：2
> 
> 时间：2012-05-29T09:04:51.583
> 
> 标签：c, struct, c++-cli, wrapper

今天我在为第三方库编写包装器时遇到了一点问题。他们在几个结构中使用*泛型*作为变量名。当我尝试在 Visual Studio 中将其编译为 C++/CLI 库项目时，编译器会抱怨。

下面的代码示例。

```
typedef struct
{
  UINT8 generic;
  UINT8 id[3];

  ...

} HEADER; 
```

我该如何解决这个问题并使用这个库编译一个 C++/CLI 项目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T09:10:25.940

由于您已经包装了这个第三方库，您的包装器可以执行以下操作：

```
#define generic generic_
#include "original.h"
#undef generic 
```

# android - 有没有办法使用achartengine android更改图表中的点颜色

> ID：10796101
> 
> 赞同：1
> 
> 时间：2012-05-29T09:05:04.920
> 
> 标签：android, colors, point, achartengine

你好，我是安卓新手。我现在正在使用 achartengine 开发应用程序来绘制图表〜现在我有问题，折线图上的某些点必须改变颜色，而不是在线和线上的所有点。

我认为它应该是扩展父类（GraphicalView），但这种方式让我抓狂~现在我问有经验的android开发者。

请帮帮我~

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T09:44:43.577

Okz 我正在使用`AChart`库，它是完全可定制的，您可以更改图表中任何事物的颜色，例如，如果您使用它的示例`AverageTemperatureChart`，您将看到一个对象渲染器，其中包含属性如何渲染图表有几种设置属性方法，例如`setTitle` `setTitleColor`等你可以使用它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T16:43:51.320

如果我理解正确，您希望图形线的一些点和线的一部分改变颜色。我能想到的最简单的方法是在现有线的顶部用不同的颜色绘制另一条线和/或一组点。这样做的代码是：

```
 // your existing chartView, dataset, and renderer
    GraphicalView mChartView;
    XYMultipleSeriesDataset mDataset = new XYMultipleSeriesDataset();
    XYMultipleSeriesRenderer mRenderer = new XYMultipleSeriesRenderer(2);

    // new series, to plot it with different color
    XYSeries newXYSeries = new XYSeries("");
    XYSeriesRenderer newXYSeriesRenderer = new XYSeriesRenderer();

    newXYSeries.add(0, 0); // add the points you want the color to be different
    newXYSeriesRenderer.setColor(Color.BLACK); // set color

    mRenderer.addSeriesRenderer(newXYSeriesRenderer);
    mDataset.addSeries(newXYSeries);

    // you might want to set the range to make sure that the lines are plotted on top of each other
    // not sure if it is necessary 
    mRenderer.setRange(new double[] { MIN_X, MAX_X, MIN_Y, MA_Y }); 
```

我想就是这样。您需要将希望颜色不同的所​​有点添加到 newXYSeries 中。

# objective-c - 扩展 UILocalNotification

> ID：10796109
> 
> 赞同：1
> 
> 时间：2012-05-29T09:05:41.510
> 
> 标签：objective-c, ios, uilocalnotification

我正在编写一个扩展*UILocalNotification类的**提醒*类。

 *在它的接口中它有一个方法：

```
- (void)setType:(NSString*)type; 
```

可能是我忽略了一些非常愚蠢的事情，但是当我打电话时：

```
[reminder setType:type]; 
```

*提醒*是_

```
@property (nonatomic, strong) Reminder *reminder; 
```

在视图控制器中，我确实得到了臭名昭著的错误：

```
[UIConcreteLocalNotification setType:]: unrecognized selector sent to instance 
```

似乎*setType:*方法没有在 Reminder 类上调用，而是直接在 UIConcreteLocalNotification 上调用，尽管它是在接口中声明的。*

# c# - 如何从外部 java 脚本文件中获取值到文件后面的代码？

> ID：10796113
> 
> 赞同：3
> 
> 时间：2012-05-29T09:06:10.897
> 
> 标签：c#, .net, c#-4.0

我正在使用 .NET4.0 和 C# 语言开发一个 Web 应用程序。在该应用程序中，我有一个 aspx 页面和相应的 java 脚本文件。我需要在代码隐藏文件中访问外部 java 脚本文件中存在的值。我怎样才能访问它？我通过 ControlResources 链接了外部 java 脚本和 aspx 页面。任何人都请帮助解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T09:18:16.073

JS 与服务器端代码（在运行时）通信的唯一方法是通过 HTTP POST。

如果您正在谈论在 JS 文件上获取恒定值，那么您唯一的方法是以读取模式打开 JS 文件并获取您需要的内容（即使我不建议您走这条路）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T09:31:03.243

从客户端到服务器的 Http 发布是唯一的方式.. 最好使用 Ajax

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T09:18:07.977

在服务器端创建一个隐藏字段，并在客户端用您的数据填充它。因此，您将能够在服务器端制作客户端数据。我认为这是唯一的方法。

aspx

```
<input type="hidden" runat="server" id="myhidden" />

<script>
function  setthidden()
 {
   document.getElementById('myhidden').value = "your value";// assign your value here
 }

 window.onload=setthidden;

</script> 
```

在服务器端

```
string myhiddenvalue=myhidden.Value; 
```

# php - 使用 PHP 将数组存储在内存缓存中，数组元素在内存缓存中的某个时间后被取消设置

> ID：10796121
> 
> 赞同：0
> 
> 时间：2012-05-29T09:06:46.423
> 
> 标签：php, arrays, memcached

我在内存缓存键 'getBannerInfo' 中保存了 29 个元素的数组。该数组类似于：

```
[bannerid] => 5059
[campaignid] => 2687
[contenttype] => png
[storagetype] => url
[filename] => 
[imageurl] => http://testanalyst.org/c2687/13381938962791_50x50.png
[htmltemplate] => 
[htmlcache] => 
[append] => 
[width] => 50
[height] => 50
[weight] => 1
[url] => http://www.google.com
[alt] => new image
[bannertext] => New image
[description] => test image alt text 23
[autohtml] => f
[alt_contenttype] => 
[comments] => 
[status] => 0
[compiledlimitation] => xyz
[acl_plugins] => lmn
[acls_updated] => 2012-05-28 16:49:02
[parameters] => N;
[custom_data] => abc
[target] => 
[capping] => 0
[block] => 0
[is_deleted] => 0 
```

现在，我注意到奇怪的行为，尽管最初它是按预期设置的，但过了一段时间，当它从 memcache 键中获取数据时，**alt** key=>val 对不存在于获取的数组中。

我在用

```
 set($key,$arrayName,3600); and get($key) 
```

Memcache 扩展类。

为什么这发生在**alt**键上，这个键我最近添加到这个数组中，从那时起这个问题就被注意到了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T09:22:54.507

缓存只是一个临时缓冲区，如果空间不足或记录过期，它可以删除记录。这是预期的行为。如果您需要持久存储，请使用数据库。

# google-play - Play 商店 下载到所有设备？

> ID：10796125
> 
> 赞同：1
> 
> 时间：2012-05-29T09:07:01.937
> 
> 标签：google-play

**如果我想安装应用程序，我已经为****20 个 android 设备**配置了一个电子邮件 ID（显然是 gmail id），它们现在都位于不同的位置。**对于所有设备**，如**Avast 防病毒软件** ，如果已经安装了任何设备，那么我怎么能做到这一点。

 ********目标 ：**

**1：**如果未安装，则将应用程序安装到所有设备。

**2：**设备可能已经安装了应用程序，然后它会显示安装说如果一个有安装而另一个没有，那么如何在所有设备中安装。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T14:56:35.790

我不太精通电话。我知道对于黑莓，您必须拥有一个黑莓 [企业] 服务器才能以这种方式管理设备。我认为 android 的一个客户端称为*Good*，但如果您搜索*android Enterprise Management*，您可能会找到其他客户端。******

# c# - WPF 数据网格：转换器和 StringFormat

> ID：10796128
> 
> 赞同：7
> 
> 时间：2012-05-29T09:07:22.167
> 
> 标签：c#, wpf, .net-3.5

我有一个标准（WPF 工具包）数据网格。某些列（已明确定义）必须显示为百分比。如果值低于 0，则某些列必须显示为红色。（两组列不相同）。我尝试分别使用 a`StringFormat`和来实现这些要求。`Style`我的 XAML：

```
<Window xmlns:local="clr-namespace:myNamespace"
        xmlns:tk="clr-namespace:Microsoft.Windows.Controls;assembly=WPFToolkit">
    <Window.Resources>
        <local:ValueConverter x:Key="valueToForeground" />
        <Style TargetType="{x:Type tk:DataGridCell}">
            <Setter Property="Foreground"
                    Value="{Binding RelativeSource={RelativeSource Self}, Path=Content.Text, Converter={StaticResource valueToForeground}}" />
        </Style>
    </Window.Resources>
    <Grid>
        <tk:DataGrid AutoGenerateColumns="False"
                     ItemsSource="{Binding Path=myClass/myProperty}">
            <tk:DataGrid.Columns>
                <tk:DataGridTextColumn Header="A"
                                       Binding="{Binding colA}" />
                <tk:DataGridTextColumn Header="B"
                                       Binding="{Binding colB, StringFormat=\{0:P\}}" />
                <tk:DataGridTextColumn Header="C"
                                       Binding="{Binding colC, StringFormat=\{0:P\}}" />
                <tk:DataGridTextColumn Header="D"
                                       Binding="{Binding colD, StringFormat=\{0:P\}}" />
            </tk:DataGrid.Columns>
        </tk:DataGrid>
    </Grid>
</Window> 
```

以及相关的转换器：

```
namespace myNamespace
{
    public class ValueConverter : IValueConverter
    {
        public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            SolidColorBrush brush = new SolidColorBrush(Colors.Black);

            Double doubleValue = 0.0;
            if (value != null)
            {
                if (Double.TryParse(value.ToString(), out doubleValue))
                {
                    if (doubleValue < 0)
                        brush = new SolidColorBrush(Colors.Red);
                }
            }
            return brush;
        }

        public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
        {
            throw new NotImplementedException();
        }
    }
} 
```

我认为这一切都很标准，但问题是转换器在`Text`通过 之后获取值`StringFormat`，并且在那时很难正确解析它（因为实际上并非所有列都具有相同的格式）。如果我取出`StringFormats`，转换器工作正常，文本显示为红色。我错过了一些明显的东西吗？有没有一种简单的方法来解决这个问题？我现在唯一能想到的是将格式转移到不同的转换器中，我不相信这会起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T11:56:44.460

我们有一个类似的情况，我们需要一个不同的`Path`属性，`Binding`但`CellStyle`每个属性都相似`DataGridColumn`。我们通过自定义解决了这个问题`MarkupExtension`。在你的情况下，它看起来像这样

```
<tk:DataGrid AutoGenerateColumns="False" 
                ItemsSource="{Binding MyItems}">
    <tk:DataGrid.Columns>
        <tk:DataGridTextColumn Header="A" 
                               Binding="{Binding colA}" />
        <tk:DataGridTextColumn Header="B" 
                               Binding="{Binding colB, StringFormat=\{0:P\}}"
                               CellStyle="{markup:ForegroundCellStyle PropertyName=colB}"/>
        <tk:DataGridTextColumn Header="C" 
                               Binding="{Binding colC, StringFormat=\{0:P\}}"
                               CellStyle="{markup:ForegroundCellStyle PropertyName=colC}"/>
        <tk:DataGridTextColumn Header="D" 
                               Binding="{Binding colD, StringFormat=\{0:P\}}"
                               CellStyle="{markup:ForegroundCellStyle PropertyName=colD}"/>
    </tk:DataGrid.Columns>
</tk:DataGrid> 
```

然后根据`ForegroundCellStyleExtension`_ `Style`_`DataGridCell``PropertyName`

*ForegroundCellStyleExtension*

```
public class ForegroundCellStyleExtension : MarkupExtension
{
    public ForegroundCellStyleExtension() { }
    public ForegroundCellStyleExtension(string propertyName)
    {
        PropertyName = propertyName;
    }

    public string PropertyName
    {
        get;
        set;
    }

    public override object ProvideValue(IServiceProvider serviceProvider)
    {
        IProvideValueTarget service = (IProvideValueTarget)serviceProvider.GetService(typeof(IProvideValueTarget));
        DependencyObject targetObject = service.TargetObject as DependencyObject;
        if (targetObject == null)
        {
            return null;
        }

        Binding foregroundBinding = new Binding
        {
            Path = new PropertyPath(PropertyName),
            Converter = new ValueConverter()
        };
        Style foregroundCellStyle = new Style(typeof(DataGridCell));
        foregroundCellStyle.Setters.Add(new Setter(DataGridCell.ForegroundProperty, foregroundBinding));

        return foregroundCellStyle;
    }
} 
```

此外，如果您有其他`Setters`想要使用的等，则可以将它们包含在`MarkupExtension`.

```
<Window.Resources>
    <Style x:Key="dataGridCellStyle" TargetType="{x:Type tk:DataGridCell}">
        <Setter Property="Background" Value="Blue"/>
    </Style>
</Window.Resources>
<!-- ... -->
<tk:DataGridTextColumn Header="B" 
                       Binding="{Binding colB, StringFormat=\{0:P\}}"
                       CellStyle="{markup:ForegroundCellStyle colB, {StaticResource dataGridCellStyle}}"/> 
```

然后`ForegroundCellStyleExtension`将使用第二个参数`BasedOn`作为`DataGridCell` `Style`

*ForegroundCellStyleExtension 与`BasedOn`*

```
public class ForegroundCellStyleExtension : MarkupExtension
{
    public ForegroundCellStyleExtension() { }
    public ForegroundCellStyleExtension(string propertyName, Style basedOnCellStyle)
    {
        PropertyName = propertyName;
        BasedOnCellStyle = basedOnCellStyle;
    }

    public string PropertyName
    {
        get;
        set;
    }
    public Style BasedOnCellStyle
    {
        get;
        set;
    }

    public override object ProvideValue(IServiceProvider serviceProvider)
    {
        IProvideValueTarget service = (IProvideValueTarget)serviceProvider.GetService(typeof(IProvideValueTarget));
        DependencyObject targetObject = service.TargetObject as DependencyObject;
        if (targetObject == null)
        {
            return null;
        }

        Binding foregroundBinding = new Binding
        {
            Path = new PropertyPath(PropertyName),
            Converter = new ValueConverter()
        };
        Style foregroundCellStyle = new Style(typeof(DataGridCell), BasedOnCellStyle);
        foregroundCellStyle.Setters.Add(new Setter(DataGridCell.ForegroundProperty, foregroundBinding));

        return foregroundCellStyle;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T09:54:52.187

为每列指定一个单元格样式，如下所示：

```
<DataGridTextColumn Header="ColA" Binding="{Binding colA, StringFormat=\{0:P\}}">
    <DataGridTextColumn.CellStyle>
        <Style TargetType="DataGridCell">
            <Setter Property="Foreground" 
                    Value="{Binding colA, Converter={StaticResource valueToForeground}}" />
         </Style>
    </DataGridTextColumn.CellStyle>
</DataGridTextColumn>

<DataGridTextColumn Header="ColB" Binding="{Binding colB, StringFormat=\{0:P\}}">
    <DataGridTextColumn.CellStyle>
        <Style TargetType="DataGridCell">
            <Setter Property="Foreground" 
                    Value="{Binding colB, Converter={StaticResource valueToForeground}}" />
         </Style>
    </DataGridTextColumn.CellStyle>
</DataGridTextColumn>

... 
```

并修改您的转换器

```
public class ValueConverter : IValueConverter
{
    public object Convert(
                object value, Type targetType, object parameter, CultureInfo culture)
    {
        return ((double) value < 0) ? Brushes.Red : Brushes.Black;
    }

    public object ConvertBack(
                object value, Type targetType, object parameter, CultureInfo culture)
    {
        return Binding.DoNothing;
    }
} 
```

![在此处输入图像描述](../Images/73ef8e00dbdfb824a533166b2d874163.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T13:21:09.823

我想出的最简单的方法是将您的完整项目而不是 item/content.text 仅绑定到您的转换器。然后，您将能够对您的单元格做您想做的事情，而无需担心项目和参数值。

在您的单元格样式中：

```
 <Setter Property="Foreground"
     Value="{Binding Converter={StaticResource valueToForeground}}" /> 
```

并在您的转换器代码中：

```
public object Convert(object value, Type targetType,
    object parameter, System.Globalization.CultureInfo culture)
{
    SolidColorBrush brush = new SolidColorBrush(Colors.Black);    

    Double doubleValue = 0.0;
    if (value != null)
    {
        mydatatype data = value as mydatatype;
        //your logic goes here and also can play here with your dataitem. 
        if (Double.TryParse(data.CollD.ToString(), out doubleValue))
        {
            if (doubleValue < 0)
               brush = new SolidColorBrush(Colors.Red);
        }        
    }
    return brush;
} 
```

# regex - 使用 RegEx 和 Replace 在 MS-Access 中使用 USPS 缩写更新地址字段

> ID：10796129
> 
> 赞同：6
> 
> 时间：2012-05-29T09:07:24.050
> 
> 标签：regex, ms-access, vba

我正在尝试在 Access 中编写一个 VBA 函数，用标准的[United States Postal Abbreviations](https://www.usps.com/send/official-abbreviations.htm)替换地址字段中的单词。我意识到这永远不会完美，但我想至少做简单的缩写（无需购买地址格式化软件），*例如*

```
 input      output
 -------    -------------
 North   -> N
 Street  -> ST
 Drive   -> DR
 Lane    -> LN 
```

我考虑过使用一个简单的表来存储字符串和替换字符串，然后遍历该表/记录集以使用该`Replace()`函数执行简单的搜索和替换，*例如*使用`immediate window`：

```
 ?Replace("123 North 3rd St", "North", "N", compare:=vbTextCompare)
 123 N 3rd St 
```

但是，此方法可能会导致错误，*例如*

```
 ?Replace("123 Northampton St", "North", "N", compare:=vbTextCompare)
 123 Nampton St 
```

我最初的策略是创建一个带有正则表达式模式和替换字符串的替换表，然后遍历该表以进行更精确的搜索和替换。

```
pattern                 abbrev
-------------------     ------------
{pattern for North}     N
{pattern for Street}    ST 
```

我意识到 RegEx 在这里可能有点矫枉过正，特别是因为我将在数据库中一遍又一遍地遍历地址字段，但想不出仅使用该`Replace()`函数的更简单方法（**更新**：请参阅 @mwolfe02 的回复和@Cylian，以及一个混合解决方案）。

在上面的示例中，我想搜索单词 North 和 Street 当它们在字符串中作为单词存在（因此由两个空格分隔）或在字符串的末尾或字符串的开头时。这涵盖了需要缩写的大多数情况。*例如*

```
address                       formatted
----------------------        --------------------------
123 North 3rd St           -> 123 N 3RD ST
123 ABC Street North       -> 123 ABC ST N
North 3rd Street           -> N 3RD ST
123 North Northampton St   -> 123 N NORTHAMPTON ST 
```

在这些示例中，我想替换字符串中模式的所有实例。我还将所有内容都转换为大写（我可以`UCase()`在最终结果上使用没问题）。

有谁知道做这种事情的现有模块？任何人都可以帮助进行上述示例中的模式匹配吗？对于额外的信用，我也很好奇在表格中创建规则以格式化邮政信箱，*例如*

```
address                   formatted
----------------------    --------------------------
P.O. Box 345           -> PO BOX 345
PO Box 345             -> PO BOX 345
Post Office Box 345    -> PO BOX 345
PO. Box 345            -> PO BOX 345
P. O. Box 345          -> PO BOX 345 
```

[这个堆栈溢出帖子](https://stackoverflow.com/questions/281743/best-strategies-for-preventing-addresses-with-po-boxes)给出了以下模式来识别一些邮政信箱“^\s*P.?\s?O.?\sB[Oo][Xx]”。（诚​​然不是上面的第三个例子）。同样，我不太喜欢匹配和替换集来弄清楚如何编写这个更精确的替换函数。是否有 RegEx/Access 专家可以提供帮助？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T09:19:34.293

**试试这个功能**

```
Public Function FormatPO(inputString$)
'This example uses **Microsoft VBScript Regular Expressions 5.5**
Dim re As New RegExp, result$
With re
    .Pattern = "\bP(?:[. ]+|ost +)?O(?:ff\.?(?:ice))?[. ]+B(?:ox|\.) +(\d+)\b"
    .Global = True
    .IgnoreCase = True
    If .test(inputString) Then
        FormatPO = .Replace(inputString, "PO BOX $1")
    Else
        MsgBox "Data doesn't matched!"
    End If
End With 
```

**并且可以称为 (from `immediate window`)**

```
?FormatPO("P.O. Box 563") 
```

**给出结果**

```
PO BOX 563 
```

* * *

***街道名称与地址的匹配模式需要更多时间来构建。但是您可以访问[此处](http://gskinner.com/RegExr/?)并在线构建您的 RegEx。***

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T13:12:42.763

@Cylian has a good answer for the second part of your question. I'll try to address the first. If your only concern is that you replace whole words in the address then the following function will do what you need:

```
Function AddressReplace(AddressLine As String, _
                        FullName As String, _
                        Abbrev As String)
    AddressReplace = Trim(Replace(" " & AddressLine & " ", _
                                  " " & FullName & " ", _
                                  " " & Abbrev & " "))
End Function 
```

It encloses the address line in an opening and closing space, so that you can require an opening and closing space on each word you are trying to replace. It finishes up with a trim to get rid of those temporary spaces.

The following procedure tests the code and produces the output you are looking for:

```
Sub TestAddressReplace()
    Debug.Print AddressReplace("123 North 3rd St", "North", "N")
    Debug.Print AddressReplace("123 Northampton St", "North", "N")
End Sub 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-02-17T14:50:22.887

USPS 有一个免费的查找 API 来验证和标准化地址。您将需要注册该服务（快速），然后在 API 中使用您的 ID/密码来反弹他们的网站。为您完成所有工作，并提供示例代码。加拿大邮政服务也有同样的东西（虽然不确定它是免费的）。

[https://www.usps.com/business/web-tools-apis/welcome.htm](https://www.usps.com/business/web-tools-apis/welcome.htm)

B.塞维尔

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T20:20:13.523

我从在线 USPS 缩写列表中创建了一个非常简单的参考表**ref_USPS_abbrev 。**以下是与最初给出的示例相对应的条目：

```
WORD          ABBREV
------------  -------------
NORTH         N
STREET        ST 
```

然后，结合对我原始帖子的回复，我创建了两个辅助函数。

来自@Cylian：

```
 ' ----------------------------------------------------------------------'
    '  Formats string containing P.O. Box to USPS Approved PO BOX format    '
    ' ----------------------------------------------------------------------'
    '  Requires Microsoft VBScript Regular Expressions 5.5

    Public Function FormatPO(inputString As String) As String

        Static rePO As Object
        If rePO Is Nothing Then
            Set rePO = CreateObject("vbscript.regexp")
        With rePO
        .Pattern = "\bP(?:[. ]+|ost +)?O(?:ff\.?(?:ice))" & _
                   "?[. ]+B(?:ox|\.) +(\d+)\b"
        .Global = True
        .IgnoreCase = True
        End With
        End If

        With rePO
           If .Test(inputString) Then
              FormatPO = .Replace(inputString, "PO BOX $1")
           Else
              FormatPO = inputString
           End If
        End With
    End Function 
```

并且，使用@mwolfe02 的好主意：

```
 ' ----------------------------------------------------------------------'
    '  Replaces whole word only with an abbreviation in address string      '
    ' ----------------------------------------------------------------------'

    Public Function AddressReplace(AddressLine As String, _
                    FullName As String, _
                    Abbrev As String)

    'Enclose address line in an opening and closing space, so that you 
    'can require an opening and closing space on each word you are trying 
    'to replace. Finish up with a trim to get rid of those temporary spaces.

    AddressReplace = Trim(Replace(" " & AddressLine & " ", _
                              " " & FullName & " ", _
                              " " & Abbrev & " "))
    End Function 
```

然后，结合这些辅助函数，我编写了这个函数：

```
' ----------------------------------------------------------------------'
'  Format address using abbreviations stored in table ref_USPS_abbrev   '
' ----------------------------------------------------------------------'  
'  Requires Microsoft DAO 3.6 Object Library
'  Table ref_USPS_abbrev has two fields: WORD (containing the word to match) 
'  and ABBREV containing the desired abbreviated substitution.
'  United States Postal Services abbreviations are available at:
'  https://www.usps.com/ship/official-abbreviations.htm

Public Function SubstituteUSPS(address As String) As String

Static dba As DAO.Database
Static rst_abbrev As DAO.Recordset

    If IsNull(address) Then Exit Function

    'Initialize the objects 

    If dba Is Nothing Then
        Set dba = CurrentDb
    End If

    'Create the rst_abbrev recordset once from ref_USPS_abbrev. If additional
    'entries are added to the source ref_USPS_abbrev table after the recordset 
    'is created, since it is an dbOpenTable (by default), the recordset will 
    'be updated dynamically. If you use dbOpenSnapshot it will not update 
    'dynamically.

    If rst_abbrev Is Nothing Then
        Set rst_abbrev = dba.OpenRecordset("ref_USPS_abbrev",  _
                                           Type:=dbOpenTable)
    End If

    'Since rst_abbrev is a static object, in the event the function is called 
    'in succession (e.g. while looping through a recordset to update values), 
    'move to the first entry in the recordset each time the function is 
    'called.

    rst_abbrev.MoveFirst

    'Only call the FormatPO helper function if the address has the 
    'string "ox" in it.    

    If InStr(address, "ox") > 0 Then
        address = FormatPO(address)
    End If

    'Loop through the recordset containing the abbreviations
    'and use the AddressReplace helper function to substitute 
    'abbreviations for whole words only.

    Do Until rst_abbrev.EOF
        address = AddressReplace(address, rst_abbrev![WORD],  _
                                 rst_abbrev![ABBREV])
        rst_abbrev.MoveNext
    Loop

    'Convert the address to upper case and trim white spaces and return result
    'You can also add code here to trim out punctuation in the address, too.

    SubstituteUSPS = Trim(UCase(address))

End Function 
```

创建用于测试的**ref_USPS_abbrev**表：

```
Sub CreateUSPSTable()

Dim dbs As Database
Set dbs = CurrentDb

With dbs
    .Execute "CREATE TABLE ref_USPS_abbrev " _
        & "(WORD CHAR, ABBREV CHAR);"
    .Execute " INSERT INTO ref_USPS_abbrev " _
        & "(WORD, ABBREV) VALUES " _
        & "('NORTH', 'N');"
    .Execute " INSERT INTO ref_USPS_abbrev " _
        & "(WORD, ABBREV) VALUES " _
        & "('STREET', 'ST');"
    .Close
End With
End Sub 
```

最后，从以下测试此功能`immediate window`：

```
 CreateUSPSTable
 ?SubstituteUSPS("Post Office Box 345 123 North Northampton Street")
 PO BOX 345 123 N NORTHAMPTON ST 
```

我不是专业的程序员，所以我欢迎建议进一步清理我的代码，但现在这很好用。感谢大家。

堆栈溢出再次 FTW！

# ruby-on-rails-3 - 每当 gem 不运行时 cron

> ID：10796134
> 
> 赞同：3
> 
> 时间：2012-05-29T09:07:54.863
> 
> 标签：ruby-on-rails-3, cron, thinking-sphinx, whenever

**我正在使用 Thinking sphinx 进行搜索。它搜索正确，但问题是每当我添加新记录时，我必须手动 rake thinking_sphinx:index。所以要自动运行它，我会在 gem 与 cron 一起使用时使用它，但它仍然不会自动发生，要么我要做**

耙thinking_sphinx：索引

或者

无论何时 -w 自动创建索引

以下是 config/schedule.rb 的代码：

```
every 10.minutes do
  rake "thinking_sphinx:index", :environment => :development
end

every :reboot do
  rake "thinking_sphinx:start",:environment => :development
end 
```

当我做 crontab -li 得到以下信息：

```
# Begin Whenever generated tasks for: store
@reboot /bin/bash -l -c 'cd /home/user/newsvn/alumnicell && RAILS_ENV=development bundle exec rake thinking_sphinx:start --silent'

0,10,20,30,40,50 * * * * /bin/bash -l -c 'cd /home/user/newsvn/alumnicell && RAILS_ENV=development bundle exec rake thinking_sphinx:index --silent'

# End Whenever generated tasks for: store 
```

这不起作用的问题是什么以及在哪里？

**我也将环境更改为开发。默认情况下它是生产。这两个有什么区别？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T04:59:37.857

我会建议你使用 Thinking sphinx 的 delta 索引，而不是使用 cron 作业每 10 分钟重建一次 Thinking sphinx。

正如[这里](http://pat.github.com/ts/en/deltas.html)所描述的，您应该只`delta`在模型中添加一个布尔列，`set_property :delta => true`在您的`define_index`块中设置并运行`rake ts:rebuild`

而已。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T14:18:21.793

您可以分配日志文件以跟踪错误，然后将其发布在此处。

我也建议`:environment`全局设置。

试试这个代码：

```
set :environment, :development
set :output, 'tmp/whenever.log'

every 10.minutes do
  rake "thinking_sphinx:index"
end

every :reboot do
  rake "thinking_sphinx:start"
end 
```

# javascript - JS中的Janrain RPX认证示例？

> ID：10796135
> 
> 赞同：2
> 
> 时间：2012-05-29T09:08:00.667
> 
> 标签：javascript, rpxnow

我想将 janrain 集成到网站中。出于某种原因，服务器端我只能使用标准的 javascript。

我已经安装了小部件，现在我正在尝试进行身份验证部分。我浏览了文档和代码示例，但仅在 JS 中找不到一个示例。而且我自己的 JS 技能还不够熟练。

( [https://github.com/janrain/Janrain-Sample-Code](https://github.com/janrain/Janrain-Sample-Code) )

有没有人已经在 J​​S 中实现了它，而没有任何 php 或服务器端的任何其他东西，并且可以给我一个示例工作代码？

谢谢。

# unity3d - 导入带有纬度和经度的 FBX 地图

> ID：10796146
> 
> 赞同：3
> 
> 时间：2012-05-29T09:08:49.903
> 
> 标签：unity3d, latitude-longitude, openstreetmap, fbx

可以将osm文件导入cityengine，然后导出为fbx文件，其中包含每个块的纬度和经度数据？因为那时我想将 fbx 文件导入 unity3D 并使用此信息（纬度和经度）来查找当前地址...

你知道怎么做吗？或者你有任何其他想法如何解决它？

# sql - 解释访问 VBA

> ID：10796148
> 
> 赞同：1
> 
> 时间：2012-05-29T09:08:52.947
> 
> 标签：sql, ms-access, vba

我是 Access VBA 的新手，我想知道这段代码是什么意思？

```
[Formulare]![frm_Fahrzeug]![ID] 
```

在查询的 Where 子句中

```
WHERE (((tb_KonzeptFunktionen.Konzept)=[Formulare]![frm_Fahrzeug]![ID])) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T09:15:26.903

```
[Formulare]![frm_Fahrzeug]![ID] 
```

用英语：

```
Forms![frm_Fahrzeug]![ID] 
```

它指的是一个打开的表单的 ID 控件或字段，称为`frm_Fahrzeug`

# c# - 选择 IoC 框架（用于 DI 和 AOP）

> ID：10796150
> 
> 赞同：3
> 
> 时间：2012-05-29T09:09:00.383
> 
> 标签：c#, .net, dependency-injection, inversion-of-control, aop

我们正在构建一个 .NET 应用程序，我想集成一个框架来执行 DI 和一些 AOP（注入一些诊断/日志记录代码）。

我知道那里有很多框架，我不确定要选择哪一个，因为每个审查它们的网站都会给出不同的结果和意见。

我很想听听一些基于现实世界经验的客观信息来做我们需要的事情（上面列出的）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T09:37:22.383

简短回答：看看 PRISM、UNITY 和 MEF，以完全了解 Microsoft 模式和（最佳）实践领域。没有理由从那个 imo 转移，除非你做非常小的项目（Prism 可能过大）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T10:29:13.910

答案最重要的是应用程序的设计。[如果您围绕SOLID](https://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29)原则设计应用程序，那么添加横切关注点将像编写装饰器一样简单。换句话说，当你需要像 Postsharp 这样的代码编织框架或者需要做拦截时，你可能需要再次仔细审视你的设计。例如，看看如何使用[命令和处理程序](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=91)对业务操作进行建模，或者如何将查询建模为[DTO 和处理程序](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=92)。

所有容器都允许您使用装饰器包装服务，仅仅是因为您可以注册一个执行以下操作的 lambda：

```
container.Register<ICommandHandler<ProcessOrderCmd>>(() =>
    new DiagnosticsCommandHandlerDecorator<ProcessOrderCmd>(
        new ProcessOrderCommandHandler())); 
```

但是，当整个应用程序都是围绕 SOLID 设计的，并且应用程序变得很大时，像这样手动配置每个服务将变得繁琐且耗时。所以在这种情况下，选择一个包含批量注册功能并支持注册装饰器的 DI 框架非常有用。特别是对处理通用装饰器的支持（`DiagnosticsCommandHandler<T>`如上所示）将变得很重要。

例如，当您使用[Simple Injector IoC 容器](https://simpleinjector.org)时，您只需两行代码即可使用装饰器注册所有命令处理程序：

```
// This registers all command handlers in the container.
container.RegisterManyForOpenGeneric(typeof(ICommandHandler<>),
    typeof(ICommandHandler<>).Assembly);

// This wraps all command handlers with the given decorator.
container.RegisterDecorator(typeof(ICommandHandler<>),
    typeof(DiagnosticsCommandHandlerDecorator<>)); 
```

尽管某些模式或框架对于小型应用程序来说可能是多余的，但我相信 SOLID 原则是面向对象设计的核心原则，每个应用程序的设计都应该考虑到这些原则。

# phalanger - 在 Phalanger 中使用 System.Reflection 和资源

> ID：10796151
> 
> 赞同：0
> 
> 时间：2012-05-29T09:09:04.840
> 
> 标签：phalanger

我需要将一些资源嵌入到使用 phalanger 用 php 编写的纯编译 dll 中。这些是我在 Visual Studio 中设置为“嵌入式资源”的 txt 文件。

我的问题是我不能使用 Assembly 类来使用 GetManifestResourceStream 获取资源。

我试过这样的代码：使用 System\Reflection\Assembly

```
$asm = Assembly::GetExecutingAssembly(); //this gives me mscorlib instead of my dll
$str = $asm->GetManifestResourceStream("name"); 
```

我的问题是：我如何访问 phalanger 中的嵌入式资源？非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T08:11:57.853

我不确定，为什么 Assembly::GetExecutingAssembly() 返回不正确的值。无论如何要解决 $asm 值，请使用以下代码：

```
$MyType = CLRTypeOf MyProgram;
$asm = $MyType->Assembly; 
```

然后您可以在发布时访问嵌入式资源

```
$asm->GetManifestResourceStream("TextFile1.txt"); 
```

或者您可以将标准资源文件 (.resx) 包含到您的项目中，并使用 \System\Resources\ResourceManager

```
$this->manager = new \System\Resources\ResourceManager("",$asm);
$this->manager->GetObject("String1",null); 
```

*请注意，目前 Phalanger 项目中只能有一个 .resx*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-03T19:27:26.150

这个问题很老，但是`Php.Core.Emit.AddResourceFile()`自从提出这个问题以来，负责这个问题的 Phalanger 代码（方法）部分没有改变。我遇到了同样的问题并以（几乎）非hacky的方式解决了它。您必须提供替代名称 ( `/res:/path/to/filename,alternative-name`) 才能使其正常工作。

```
$asm = clr_typeof('self')->Assembly;
$resourceStream = $asm->GetManifestResourceStream("filename");
$reader = new \System\Resources\ResourceReader($resourceStream);

$type = $data = null;
$reader->GetResourceData("alternative-name", $type, $data);

// and still there are 4 excess bytes
// representing the length of the resource
$data = \substr($data, 4);
$stream  = new IO\MemoryStream($data);

// after this $stream is usable as you would expect 
```

直截了当`GetManifestResourceStream()`（正如 Jakub 所建议的那样）不起作用，因为 Phalanger 不使用`System.Reflection.Emit.ModuleBuilder.DefineManifestResource()`（就像我认为在提供无法识别的文件格式时应该使用的那样）。它使用`ModuleBuilder.DefineResource()`which 返回`ResourceWriter`，它只适合`.resources`文件。这就是`ResourceReader`您需要阅读资源时使用的要求。

**Note**: This answer applies to [Phalanger master branch at the time of writing](https://github.com/DEVSENSE/Phalanger/tree/e13ea87f1a635c577a409d48276f31b097a670a6 "e13ea87f1a635c") and prior versions since circa 2011\. Noted because it looks like a bug (especially the need to use both original and alternative names).

# java - 如何从java中的查询中提取实体？

> ID：10796155
> 
> 赞同：1
> 
> 时间：2012-05-29T09:09:23.590
> 
> 标签：java, information-retrieval, named-entity-extraction

我找到了[Pingar](http://apidemo.pingar.com/Entities.aspx)和[ANNIE](http://services.gate.ac.uk/annie/)，但在提交查询时它们都没有对我有用。似乎他们需要整个文档来提取实体，当我删除一定数量的单词时，它会停止检测位置和人员并将它们仅分类为关键字。我只需要检测地理参考和个人姓名。

谢谢！

# javascript - 选择元素更改后选择属性未更改

> ID：10796157
> 
> 赞同：1
> 
> 时间：2012-05-29T09:09:30.847
> 
> 标签：javascript, jquery, html, dom

我有一个表，其中几列包含选择元素。在 tfoot 中，每一行都有一个输入元素，用于根据选择元素中的选定值过滤行。

当加载表格并使用选择直接过滤列时，它可以工作并且表格被过滤。

但是在选择元素中进行更改时，过滤器函数不会注意到值已更改。

检查 html 我可以看到“selected”属性仍然在加载时选择的选项上。因此，在进行实际更改时（在 FF 和 Chrome 中均已识别），它不会得到更新。

但在 jQuery 中，搜索选定的值 ( `.find(":selected")`) 有效。所以我认为我可以使用它来查找值，然后将 selected 属性设置为所选的任何内容。这就是我尝试这样做的方式：

```
$("select[id^='qu_owner']").live('change', function (e) {
    var owner = $(this).val();
    console.log(owner);
    var ticketid = $(this).attr('id').substr(9);
    $($(this) + " option[value=" + owner + "]").attr("selected", "selected"); //Update: this has been removed
}); 
```

但是元素中的 selected 属性仍然没有更新。

任何线索如何做到这一点？我需要过滤才能工作，它正在查看选定的属性。不能对选择元素进行这种更新吗？

* * *

**更新**

好的，根据下面的评论和答案，我知道有更好的方法来做我上面所做的事情。所以不要使用 $(this).find(":selected").val(); 我现在使用 $(this).val();。另外，我确实删除了最后一行，因为我知道不应该尝试设置 selected 属性。

而且，我现在明白我遇到实际问题的代码是过滤器函数。这适用于 DataTables，因此它是一个插件，但这是重要的部分：

aData[i] 是实际的表格单元格。因此，它只是文本，但在这种情况下，它是我的选择元素的文本。我认为下面的方向是正确的，但仍然无法正常工作（查看 console.log-rows 旁边的评论）：

```
function( oSettings, aData, iDataIndex ) {

                var ret = true;    

                    //Loop through all input fields i tfoot that has class 'sl_filter' attached                                              
                   $('tfoot .sl_filter').each(function(i, obj){

                       //$(this) can be used. Get the index of this colum.
                       var i = $("tfoot input").index($(this));                           

                       //Create regexp to math
                       var r = new RegExp($(this).val(), "i");

                       //Get the selected option from the column
                        console.log($(aData[i]).attr('id')); //Properly prints the ID
                        console.log($(aData[i] + " option:selected").text()); //Prints all options, not only the selected on
                        console.log($(aData[i] + " option:selected").val()); //Prints the value of the id that was selected when data was loaded, even if a new option has been chosen
                        console.log($(aData[i]).val()); //Prints the value of the id that was selected when data was loaded, even if a new option has been chosen

                        var str = $(aData[i] + " option:selected").text();                          

                       /*Test to see if there is a match or if the input value is the default 
                         (the initial value of input before it has any fokus/text) */                           
                       if(r.test(str) || $(this).val()=="Search"){
                           //Return true only exits this function
                           return true;
                       }else{

                           /*Return false returns both function an .each. Retain 'false' in a variable scoped
                             to be reached outside the .each */                                
                           ret = false;
                           return false;
                       }
                   });
                   //Return true or false
                    return ret;                        
                } 
```

这是我需要掌握的所选元素的文本。这就是应该过滤的内容。我怎样才能做到这一点？

* * *

**更新**

为了缩小范围，我创建了一个包含必要内容的 jsfiddle。这完全是关于如何从所选选项中提取文本：[jsfiddle](http://jsfiddle.net/zLghD/1/)

aData[i] = 表格单元格。在 jsfiddle 中，我使用“sel”作为单元格内容的变量。sel 的文本从 aData[i] 复制而来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T09:18:02.590

无需更改 - 的*属性*，`<option>`它应该包含从服务器下载的元素的原始状态。

您的过滤器应该检查所选选项的`selected` *属性*，例如：

```
.filter(function() {
    return this.selected; // check the boolean property
}) 
```

这也是`:selected`伪选择器的工作方式——它检查属性的当前值*，*而不是*属性*。

请注意，在元素的`change`处理程序中，您可以只使用来获取当前选定的值。`<select>``this.value`

```
$('select').on('change', function() {
    // current value
    var value = this.value;   

    // text of the currently selected option.
    var text = this.options[this.selectedIndex].text;
} 
```

# c# - 双向通信 beetwen C# 代码和非托管 C++ lib

> ID：10796158
> 
> 赞同：2
> 
> 时间：2012-05-29T09:09:38.080
> 
> 标签：c#, c++, visual-studio-2008, visual-c++, unmanaged

我想将 C++ lib 与来自 C# 的非托管代码一起使用。我在stackoverflow上发现了一些帖子是如何做到的。通过这种方式它可以工作，但我需要一些解决方案来在 C# 代码中从 C++ 类定义抽象函数（具体来说 - 我的库 C++ 函数必须在 C# 中调用函数）。

问候卡米尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T09:28:14.897

很酷的问题。要了解这个想法，您应该考虑以下一般情况。您有一个大型 C++ 项目，并且希望使用脚本对其进行扩展。在您的情况下，“脚本”是 .NET/CLR。

你有：

```
namespace Native {

class NativeInterface
{
public:
    /// Yes, no implementation here, in the "native world"
    virtual void NativeMethod() = 0;

    /// Some other method(s) you'd like to call
    virtual void ConcreteMethod() { cout << "Hello" << endl; }
};

} // namespace Native 
```

您必须为 Native::NativeInfterface 制作 C++/CLI 包装器：

```
namespace Managed
{
    ref class NativeInterface
    {
    public:
       virtual void NativeMethod() abstract;

       virtual void ConcreteMethod() { NativeObj->ConcreteMethod(); }
    public:
       Native::NativeInterface* NativeObj;
    };
} /// namespace managed 
```

您想在 C# 中执行以下操作：

```
namespace Managed {

public class MyNETImplementation: NativeInterface
{
    override void NativeMethod()
    {
       DoTheStuff_UsingNativeCode(); // possibly, call the ConcreteMethod
    }
}

} // namespace Managed 
```

关键是您想将指向 MyNETImplementation 的“指针”传递到本地世界的某个地方。

因此，您应该在 C++/CLI 中实现棘手的 NativeInterfaceImpl 类，它将保存对 MyNETImplementation 的托管引用，并将调用适当的方法。

第一次尝试：

```
namespace Managed {

/// C++/CLI in mixed-mode assembly
class NativeInterfaceImpl: public NativeInterface
{
public:
   NativeInterfaceImpl(Managed::NativeInterface^ Obj) { ManagedObj = Obj; }

   /// Native implementation to call the managed class
   virtual void NativeMethod()
   {
      Obj->NativeMethod();
   }
public:
   gcroot<Managed::NativeInterface^> ManagedObj;
};

} // namespace Managed 
```

是的，这很棘手，关于如何传递参数有很多问题，但本网站详细考虑了编组问题。

忘记添加如何使用指向 NativeInterfaceImpl 的托管指针。如果使用“gcnew”关键字分配它们，则必须在使用前“固定”它们。

```
Managed::NativeInterface^ obj = gcnew NativeInterfaceImpl( gcnew MyNETImplementation() );
pin_ptr<NativeInterface> pinned = obj;

/// void SomeNativeFunction(NativeInterface*);
SomeNativeFunction( pinned ); 
```

编辑（最后润色）：

有几个参考文献有些过时（它们与托管 C++ 相关，而不是 C++/CLI），但仍然很容易适应。

[从非托管调用托管代码](http://www.codeproject.com/Articles/3906/Unmanaged-to-Managed-Calls)

[托管<->非托管调用的第二个版本](http://www.codeproject.com/Articles/9903/Calling-Managed-Code-from-Unmanaged-Code-and-vice)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T09:27:04.337

> 具体来说 - 我的库 C++ 函数必须在 C# 中调用函数）。

这完全没问题，提交函数指针，但是......

> 但我需要一些解决方案来从 C# 中的 C++ 类定义抽象函数

没门。您所能做的就是实现与 dll 的互操作 - 而不是使用甚至没有标准化的“编译器工件”（编译器之间有所不同）。

坐下来，学习 C++，C++ 中的子类——这可以被 C++ 管理（现在是 C++/CLR），所以你可以从那里很好地调用托管代码。

但是不，您不能子类化存储在 .NET 中的 C++ 编译器“.lib”工件中的类。

# iphone - 管理 iOS 企业开发者计划

> ID：10796159
> 
> 赞同：23
> 
> 时间：2012-05-29T09:09:57.357
> 
> 标签：iphone, xcode, enterprise

我们最近注册了 iOS 企业开发人员计划，以便能够使用内部分发，这大大简化了我们公司内部相当大的应用程序的部署。在加入之前，我们已经彻底阅读了计划文档，并且我们知道新帐户将与我们用于 AppStore 提交的标准帐户完全分开。

我不确定现在在开发者门户中组织这两个帐户的最佳方式是什么。我最关心的是捆绑标识符，因为我将在 Xcode 中为每个应用程序处理两个不同的捆绑 ID。我们所有的应用程序都使用 iCloud 和推送通知，所以通配符不是一个选项。

你如何在 Xcode 中组织它？您是创建两个不同的目标还是能够使用新的项目配置来管理它？iCloud 权利呢？

**编辑**

作为更新，我想明确表示我们正在寻找最佳解决方案来构建适用于内部分发和 AppStore 提交的应用程序。

**编辑2**

鉴于企业计划不授予您访问 iTunesConnect 的权限，可以在其中设置测试用户和产品 ID，真的没有办法测试 InApp 购买吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-05-31T12:52:18.600

我并不完全清楚您需要什么，但听起来您希望能够构建您的应用商店应用程序供内部企业使用。那是对的吗？

如果您希望能够使用两个不同的捆绑 ID 构建您的应用程序，您可以创建自定义构建设置，并为您的不同配置赋予不同的值。

例如，您可以创建企业配置：

![在此处输入图像描述](../Images/3d30071d98fd7f9bc01a193b7e84c8c9.png)

然后转到目标的构建设置并添加用户定义的构建设置：

![在此处输入图像描述](../Images/23124dc6e51603cd1cd6dc8039c8f50c.png)

给它起一个名字`BUNDLE_ID`，如果你展开三角形，你可以为每个配置赋予不同的值：

![在此处输入图像描述](../Images/661341c2e5eec260667f910c4799b0ac.png)

接下来，打开 Info.plist 文件并输入`${BUNDLE_ID}`bundle id 值：

![在此处输入图像描述](../Images/6d28505ba17b0356984dda6b1903c345.png)

当您使用“企业”配置进行编译时，您可以使用自定义方案（或通过命令行构建过程，如果您使用该配置）进行编译，将使用适当的包 ID。

您还可以以相同的方式配置代码签名/配置配置文件设置：

![在此处输入图像描述](../Images/2578144b65543efd2635246f95dc2b23.png)

执行此操作后，将根据配置使用正确的推送通知/iCloud 权利。

我们已经做这种事情很长时间了。我们的构建服务器将使用这种技术为每个构建生成我们的应用程序的企业和应用商店版本。

对于配置门户，您需要分别为推送通知、iCloud 等配置两个应用程序 ID。

这确实意味着推送通知必须分别发送到应用商店和企业版本，因为它们不会共享相同的捆绑 ID 或推送通知证书。

默认情况下，两个版本的 iCloud 存储将完全分开。只要使用相同的团队 ID 设置权利，他们就可以访问相同的 iCloud 商店（如果需要）。但是，如果您有两个独立的开发者帐户，这可能会成为问题。

# java - 使用 split("|") 通过管道符号拆分 Java 字符串

> ID：10796160
> 
> 赞同：206
> 
> 时间：2012-05-29T09:10:02.097
> 
> 标签：java, regex, string

Java 官方文档指出：

`"boo:and:foo"`例如， string使用这些表达式 Regex Result 产生以下结果：

```
{ "boo", "and", "foo" }" 
```

这就是我需要它工作的方式。但是，如果我运行这个：

```
public static void main(String[] args){
        String test = "A|B|C||D";

        String[] result = test.split("|");

        for(String s : result){
            System.out.println(">"+s+"<");
        }
    } 
```

它打印：

```
><
>A<
>|<
>B<
>|<
>C<
>|<
>|<
>D< 
```

这与我的预期相去甚远：

```
>A<
>B<
>C<
><
>D< 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：446
> 
> 时间：2012-05-29T09:10:47.180

你需要

```
test.split("\\|"); 
```

`split`使用正则表达式，并且在*正则表达式* `|`中是表示`OR`运算符的元字符。您需要使用转义该字符`\`（用 String 编写，`"\\"`因为`\`它也是 String 文字中的元字符，需要另一个`\`来转义它）。

你也可以使用

```
test.split(Pattern.quote("|")); 
```

并让我们`Pattern.quote`创建代表 . 的正则表达式的转义版本`|`。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2014-01-09T16:07:53.940

使用正确的转义：`string.split("\\|")`

或者，在 Java 5+ 中，使用[`Pattern.quote()`](https://docs.oracle.com/javase/8/docs/api/java/util/regex/Pattern.html#quote-java.lang.String-)专门为此目的创建的帮助程序：

```
string.split(Pattern.quote("|")) 
```

它适用于任意输入字符串。当您需要引用/转义用户输入时非常有用。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-09-01T08:46:58.943

使用此代码：

```
public static void main(String[] args) {
    String test = "A|B|C||D";

    String[] result = test.split("\\|");

    for (String s : result) {
        System.out.println(">" + s + "<");
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-11-29T13:48:37.100

您还可以使用 apache 库并执行以下操作：

```
StringUtils.split(test, "|"); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-11-04T12:40:35.680

您也可以使用`.split("[|]")`.

（我用这个代替了`.split("\\|")`，这对我不起作用。）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-09-20T11:14:15.123

```
test.split("\\|",999); 
```

对于以下示例，指定**限制**或最大值将是**准确**的：“boo|||a”或“||boo|” 或“|||”

但是 `test.split("\\|");`会为相同的示例返回不同长度的字符串数组。

使用参考：[链接](https://www.geeksforgeeks.org/split-string-java-examples/)

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2013-08-20T11:02:05.607

split() 方法将正则表达式作为参数

# algorithm - 滑动窗口上的最小值

> ID：10796162
> 
> 赞同：6
> 
> 时间：2012-05-29T09:10:10.230
> 
> 标签：algorithm, minimum, sliding-window

是否有特定的算法允许我在中小型滑动窗口（典型大小为 600，所有元素均为整数）上保持最小/最大值？窗口实际上是流中的最后 N 个观测值。所以，我添加了一个新的观察并删除了每个时间单位最旧的观察，所以我想保留最后 N 个观察的最小值和最大值。

[这是与滑动窗口最小算法](https://stackoverflow.com/questions/4122527/sliding-window-minimum-algorithm)中所述的问题不同的问题，因为我不维护整个数据，因此“基于索引”的解决方案在这里不适用。此外，我的输入数据本身将位于一个循环数组中。

堆可能不会很好地工作：我不会删除/弹出最小/最大元素，而是最旧的元素，这将破坏首先拥有堆的目的。

log(n) 基于复杂性的结构（例如红黑树）可以正常工作，而展开树可能更适合我所拥有的数据类型，但是对于我的大小来说它们是否有点矫枉过正？ d 处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-11T04:12:51.067

找到最大输入数据流的问题的解决方案托管在以下链接上，您也可以轻松调整它以找到 Min。

输入流的大小并不重要，可以是无限的。该算法以摊销常数 O(1) 复杂度执行。

[https://github.com/varoonverma/code-challenge.git](https://github.com/varoonverma/code-challenge.git)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-09T06:02:48.680

这是java中的代码

```
import java.io.*;
import java.util.*;

public class MinInwindow {

  public static void main(String[] args) {

      Scanner sc = new Scanner(System.in);
      int n = sc.nextInt();

      int arr[] = new int[n];
      for (int i = 0; i < n; i++) {
          arr[i] = sc.nextInt();
      }

      int k = sc.nextInt();

      printMinInWindow(arr, n, k);

  }

  static void printMinInWindow(int[] arr, int n, int k) {
      int start = 0, last = 0;
      ArrayList<Integer> list = new ArrayList<Integer>(k);
      while (last < n) {
          int val = arr[last];
          if (last < k) {

              list = addNewINtoList(list, val);
              last++;
          } else {
              //print minimum from window
              System.out.print(list.get(0) + " ");
              int startValue = arr[start];
              start++;
              list = removefromListIfAvailable(list, startValue);
              list = addNewINtoList(list, val);
              last++;
          }

      }
      System.out.println(list.get(0) + " ");

  }

  static ArrayList<Integer> addNewINtoList(ArrayList<Integer> list, int val) {

      if (list.isEmpty()) {
          list.add(val);
      } else {

          int size = list.size();
          while (size > 0 && list.get(size - 1) > val) {
              list.remove(size - 1);
              size--;
          }
          list.add(val);

      }
      return list;

  }

  static ArrayList<Integer> removefromListIfAvailable(ArrayList<Integer> list, int val) {

      if (list.isEmpty()) {
          return list;
      }

      int startValue = list.get(0);
      if (startValue == val) {
          list.remove(0);
      }
      return list;
  }

} 
```

# java - 我可以将 REST Web 服务保存在与常规 Web 应用程序相同的代码库中吗

> ID：10796163
> 
> 赞同：1
> 
> 时间：2012-05-29T09:10:21.627
> 
> 标签：java, rest

我正在努力创建一个网络应用程序。同时，我还在开发一个将使用相同代码库的 REST Web 服务......我想知道的是，我能否在服务器功能上创建相同的代码库作为 Web 应用程序和 Web 服务的基础。（在 Web 应用程序中，用户可以登录并执行操作，而 Web 服务就像一个 API）。

还是我需要为 Web 应用程序和 Web 服务保留 2 个不同的代码库？

另外，我希望同一个 Web 应用程序同时充当 Web 服务的生产者和消费者……这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T09:16:26.510

您可以这样做，但这意味着您必须将两者部署在一起。这可能并不总是可取的。

另一种方法是将公共类重构到第三个项目中，将它们从应用程序和服务中删除。将它们打包到您添加到 REST 服务和应用程序的 JAR 中，就像您添加任何其他 3rd 方 JAR 一样。如果你这样做，你可以独立部署两者。成本是维护公共类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T09:17:36.263

是的你可以。技术上，REST API 与 Web 应用程序的服务器端相同。

但是，如果您的 REST API 被第三方访问，您可能希望对您的 Web 应用程序采用不同的版本控制策略，因此对于任何规模较大的东西，我可能会将它们分开。

抱歉不能谈论问题的生产者/消费者部分。不明白问题的那一部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T09:24:47.410

是的，你可以从一个代码库做这两件事.. 应用程序和 Web 服务，完整的游戏将围绕 URL，即应用程序 URL 和 Web 服务 URL。

是的，同一个网络应用程序可以同时充当生产者和消费者。

# iphone - UIView 子类不能从黑色背景更改

> ID：10796167
> 
> 赞同：3
> 
> 时间：2012-05-29T09:10:31.443
> 
> 标签：iphone, ios, xcode, uiview, background

我创建了 UIView 的子视图来制作一些绘图 - 绘图在我的子类的 drawRect 方法中工作正常，但是，我无法更改视图的背景颜色。一点谷歌搜索告诉我我还没有设置视图的框架，但我不完全确定如何做到这一点。我尝试了两件事：

我在 Storyboard 中创建视图并将其添加到我的视图控制器中，然后将其声明为头文件中的属性并将它们链接起来。我在实现文件的顶部合成了属性，在 viewDidLoad 方法中，我添加了：

```
[myView setBackgroundColor: [UIColor whiteColor]]; 
```

视图的背景仍然是黑色的。

我也试过：

```
ViewSubclass *v = [[ViewSubclass alloc] initWithFrame: self.view.frame];
v.backgroundColor = [UIColor whiteColor];
myView = v; 
```

无济于事。

我究竟做错了什么？

更新：这是我用来在视图中绘制的代码，以防万一那里发生了什么事！

```
- (void)drawRect:(CGRect)rect {
CGFloat height = self.bounds.size.height;
CGContextRef context = UIGraphicsGetCurrentContext();
CGContextClearRect(context, rect);
CGContextSetFillColorWithColor(context, [UIColor grayColor].CGColor);
CGFloat barWidth = 30;
int count = 0;
for (NSNumber *num in samples) {
    CGFloat x = count * (barWidth + 10);
    CGRect barRect = CGRectMake(x, height - ([num floatValue] * height), barWidth, [num floatValue] * height);
    CGContextAddRect(context, barRect);
    count++;
}
CGContextFillPath(context);
} 
```

它只是在屏幕中创建一组不同高度的条形图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T10:47:28.290

`CGContextClearRect`从文档：

> 如果提供的上下文是窗口或位图上下文，Quartz 会有效地清除矩形。对于其他上下文类型，Quartz 以设备相关的方式填充矩形。但是，您不应在窗口或位图上下文以外的上下文中使用此函数。

可能是这种清除清除了您的整个视图，而不考虑您设置的背景颜色

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T09:23:43.150

由于我的 lvl 低，我无法添加评论，但我想到了一个问题，您是否已将 UIView 添加到 viewcontroller？

像

```
[self.view addSubview:v]; 
```

**编辑：**

很抱歉，我理解第二个选项是务实地添加到视图中的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T09:58:29.120

您是否在头文件中添加视图？如果是这样，您可能需要确保框架的坐标是可见的并且视图在顶部，还要使新视图稍微小一点，以查看它是否真的被创建：

```
UIView *myView = [[UIView alloc] initWithFrame:CGRectMake(0,0,100,100)];
[self.view addSubview: myView];
[self.view bringSubviewToFront:myView]; 
```

您还可以更改主视图背景颜色以查看是否实际创建了新视图。例如：

```
[self.view setBackgroundColor:[UIColor grayColor]]; 
```

如果您的主视图的颜色发生变化，那么问题是您的新视图没有被或带到前面。让我们知道怎么回事！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T13:47:05.677

在哪里做

```
[myView setBackgroundColor: [UIColor whiteColor]]; 
```

检查调试器中的 myView 是否不为零

# windows-7 - 如何知道 Windows 7 中的 Internet Explorer 是否以管理权限运行？

> ID：10796169
> 
> 赞同：1
> 
> 时间：2012-05-29T09:10:38.590
> 
> 标签：windows-7, activex, uac, administration

我在 Windows 7（使用 UAC）上使用 IE 来运行一些安装我们客户端产品的 ActiveX。
我的问题是我想在安装 ActiveX 之前检查资源管理器是否以管理权限运行，如果不向我们的客户弹出消息框，他们需要使用“以管理员身份运行”运行 IE

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-03T02:46:07.480

用户不必像在管理使用中那样运行 Internet Explorer *。*

在您的数字签名`cab`文件中，您将拥有一个`.inf`指示 Internet Explorer 注册 ActiveX 的文件：

**CohenSoft.inf**：

```
[version]
signature="$CHICAGO$"
AdvancedINF=2.0

[Add.Code]
CohenSoft.ocx=CohenSoft.ocx

[CohenSoft.ocx]
file-win32-x86=thiscab
clsid={de8530cf-d204-4877-9cab-f052bf1f661f}
FileVersion=1,12,47,660
RegisterServer=yes 
```

Internet Explorer 将*自动*提示用户进行 UAC 提升：

![在此处输入图像描述](../Images/efd0f28614605b8a71aa66269d72ff79.png)

并且您的 ActiveX 将以管理员身份安装。

# ejb-3.0 - 我从设置这个 TransactionAttributeType.NOT_SUPPORTED 中得到什么

> ID：10796172
> 
> 赞同：7
> 
> 时间：2012-05-29T09:10:40.203
> 
> 标签：ejb-3.0, jpa-2.0

我碰巧找到了使用这种结构的例子，但我不确定我能从中得到什么？

这是否意味着无状态 EJB 中的所有选择语句都应该遵循这个？

```
@Stateless
public class EmployeeFacade {
    @PersistenceContext(unitName="EmployeeService")
    EntityManager em;

    @TransactionAttribute(TransactionAttributeType.NOT_SUPPORTED)
    public List<Department> findAllEmployees() {
        return em.createQuery("SELECT e FROM Employee e",
        Employee.class)
        .getResultList();
    } 
```

我能从中得到什么？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-29T18:13:20.487

你得到的是：

1.  告诉您的方法不需要事务的相对正式的方式（例如，您知道它不会在 EntityManager 中调用持久化、合并或删除）。
2.  *在某些情况下 *可能的性能优化。*

    *   无需创建/传递交易。根据[Java EE 5 教程](http://docs.oracle.com/javaee/5/tutorial/doc/bncij.html#bncip)：“由于事务涉及开销，此属性可能会提高性能。”
    *   根据其他来源（例如 Pro JPA 2），它提供了根本不创建*托管*实体的实现可能性（这可能比立即创建分离实体更繁重的操作）。*

# ruby-on-rails - 通过回形针向 S3 提供 Content-MD5 标头

> ID：10796176
> 
> 赞同：3
> 
> 时间：2012-05-29T09:11:12.163
> 
> 标签：ruby-on-rails, amazon-s3, paperclip

我正在使用 Paperclip 将文件直接上传到我的 rails web 应用程序的 s3。我目前正在尝试利用亚马逊 s3 中集成的 md5 检查来验证上传是否成功进行。Paperclip 提供了一个 s3_headers 哈希，您可以使用您需要的任何字段填充它。Content-Type 会自动填充。Content-MD5 需要进行 Base64 编码，所以我以这种方式提供：

```
:s3_headers => {:content_md5 => Base64.strict_encode64(md5sum)}, 
```

我使用 strict_encode64 因为 encode64 添加了不必要的尾随 \n。使用此设置，我总是从 aws-sdk 收到 InvalidDigest 错误，即使回形针正确显示了计算的标题。我还尝试使用普通的、未编码的 md5sum，结果相似。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-07-10T00:19:18.990

如果 md5sum 是一串十六进制数字，例如 Linux 应用程序的 std 输出`md5sum`，试试这个：

```
:s3_headers => {:content_md5 => [[md5sum].pack("H*")].pack("m0") } 
```

例如，从 rails 控制台：

```
> md5sum = "7d592a3129ab6a867cf6e2eb60f9ef83"
> [[md5sum].pack("H*")].pack("m0")
 => "fVkqMSmraoZ89uLrYPnvgw==" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T10:19:53.863

获取源的 md5，将每个（字符对）从字符串转换为十六进制（2 个字节变为 1 个字节）；然后base64编码，你会没事的。

# php - MySQL 语法中的 PHP 错误

> ID：10796177
> 
> 赞同：2
> 
> 时间：2012-05-29T09:11:16.197
> 
> 标签：php, mysql, function, syntax

这是我创建的函数：

```
function get_phurl_option($option) {
$db_result  =   mysql_query("SELECT value FROM ".DB_PREFIX."options WHERE option = '$option'") or db_die(__FILE__, __LINE__, mysql_error());
$db_row     =   mysql_fetch_row($db_result);
return $db_row[0];
} 
```

但是，在访问使用该功能的页面时，我收到以下错误：

```
File: /usr/home/<removed>/includes/functions.php
Line: 28
Message: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'option = 'shortcode_type'' at line 1 
```

我不确定为什么会这样，我尝试了撇号、语音标记和反引号，但似乎都不起作用。我无法在这里解决问题，因此将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T09:14:45.857

option 是 MySQL 的保留字，所以需要用反引号括起来

```
$db_result  =   mysql_query("SELECT value FROM ".DB_PREFIX."options WHERE `option` = '$option'") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T09:16:23.487

指定的错误通常意味着您尝试访问的字段无效或被 MySQL 保留。确保在反引号中转义所有变量：

```
SELECT `value` FROM `".DB_PREFIX."options` WHERE `option` = '$option' 
```

# php - 使用 php 在文本文件中捕获文本块的正确正则表达式

> ID：10796178
> 
> 赞同：1
> 
> 时间：2012-05-29T09:11:16.853
> 
> 标签：php, regex, xampp

我有 100 多个文本文件，其中包含以下格式的文本。

```
Some Clutter...
This text file is written by using GuavaSoft Notepad.
some more info
Required Info: some text here, some text here also, a new line
text on another new line, SOME CAPITAL TEXT, one more new line,
some numbers, some punctuation marks,
some completely empty line to follow

some empty lines with tab-spaces, spaces to follow

ok, this is the end of required info..

some more unnecarry lines

empty line

etc
etc 
```

我需要捕获/获取“必需信息”和“信息..”之间的所有文本，跨越多行。
我正在将所有文件读入 $str。我提出的正则表达式是

```
$pattern = "/Required Info(.+?)info\.\./im";
preg_match($pattern, $str, $matches);
print_r($matches); 
```

现在，这是在[http://rubular.com/r/sP26IahrgI](http://rubular.com/r/sP26IahrgI)工作，但不是在我自己的本地 XAMPP。$matches 只是显示为空。
我对 RegEx 很陌生，并试图一起学习。我的正则表达式错误吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T09:15:01.510

您需要添加`s`标志，因此`(.+)`也将与换行符匹配。

```
preg_match('/required info(.+)info\.\./is', $str, $m);
print_r($m); 
```

# php - Zend Framework 2 模块和模型架构所需的建议

> ID：10796180
> 
> 赞同：4
> 
> 时间：2012-05-29T09:11:19.603
> 
> 标签：php, model-view-controller, zend-framework, architecture

我想开始使用`Zend Framework 2`并需要一些关于框架架构的指导。我将[Akrabat 的 ZF2 教程](http://akrabat.com/zend-framework-2-tutorial/)与它的[ZF1 等效](http://akrabat.com/zend-framework-tutorial/)教程进行了比较，到目前为止我注意到的主要区别似乎是[模块](http://framework.zend.com/wiki/display/ZFDEV2/RFC+-+ZF2+Modules)的使用。我喜欢将模块作为独立且可重用的代码片段的想法，并认为它可以帮助分割我的应用程序并使其更易于维护。例如，我可以有以下`URL => module`映射：

```
http://example.org/products => Products module
http://example.org/services => Services module
http://example.org/oauth => Oauth module
[...] 
```

我感到困惑的是，我的一些模块将共享相同的底层数据库资源（例如两者`Products`并`Services`使用相同的表进行评论），因此使用相同的数据库模型。因此，我想知道：

**当多个模块使用我的数据库模型时，我应该把它们放在哪里？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T09:51:02.727

请参阅以下文章：[http ://adam.lundrigan.ca/2011/09/module-dependencies-in-zf2/](http://adam.lundrigan.ca/2011/09/module-dependencies-in-zf2/)

您可以创建作为产品和服务模块的依赖项的第三个模块（例如：Base、Main），或者您可以将模型添加到您的一个模块并将该模块用作另一个模块的依赖项。

模块.php

```
/**
 * Get dependencies
 *
 * @return array
 */
public function getDependencies()
{
    return array(
        'BaseModule' => array(
            'version' => '>=0.1.0',
            'required' => true
        ),
    );
} 
```

# android - 在华硕 Transformer TF101G 上设置闪光灯模式 camera.parameters android 4.0.3

> ID：10796183
> 
> 赞同：2
> 
> 时间：2012-05-29T09:11:27.653
> 
> 标签：android, android-camera

我的应用程序将 android 相机的 flash-mode 参数设置为关闭。这是代码：

```
Parameters params = camera.getParameters();
params.set("flash-mode", "off");
camera.setParameters(params); 
```

它可以在带有 android 版本 3.2 或次要版本的 Asus Transformer TF101G 上正常工作，但对于 ICS (4.0.3)，应用程序在 logcat 上崩溃并出现以下错误：

```
05-28 22:38:12.754 V/NvOmxCameraSettingsParser(   98): Changed: flash-mode: (null) -> off {(null)}
05-28 22:38:12.754 E/NvOmxCameraSettingsParser(   98): Failed substring capabilities check, unsupported parameter: 'off', original: (null) 
05-28 22:38:12.754 E/NvOmxCameraSettingsParser(   98): extractChanges: Invalid parameter!
05-28 22:38:12.754 E/NvOmxCamera(   98): setParameters: Invalid parameters
05-28 22:38:12.754 W/Checkwin( 2066): Unexpected error initializating camera
05-28 22:38:12.754 W/Checkwin( 2066): java.lang.RuntimeException: setParameters failed
05-28 22:38:12.754 W/Checkwin( 2066):   at android.hardware.Camera.native_setParameters(Native Method)
05-28 22:38:12.754 W/Checkwin( 2066):   at android.hardware.Camera.setParameters(Camera.java:1297) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T09:16:57.910

您可以使用：

```
params.setFlashMode(Parameters.FLASH_MODE_OFF); 
```

和 camera.setParameters(params);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-26T06:32:53.870

我认为那是因为华硕 Transformer TF101G 没有手电筒。

# c# - 如何将 aspx 页面加载到 web 部件中

> ID：10796188
> 
> 赞同：2
> 
> 时间：2012-05-29T09:11:43.457
> 
> 标签：c#, asp.net, sharepoint-2010, web-parts

我通常这样做是为了从布局目录中加载 Web 用户控件。

```
protected override void CreateChildControls()
{
     try
     {

        SPSecurity.RunWithElevatedPrivileges(delegate()
        {
           base.CreateChildControls();
           string strControlReference = "/_layouts/Controls/MyCustomControl.ascx";

           //instantiate the user control
           MyCustomControl ucControl = (MyCustomControl)Page.LoadControl(strControlReference);

           //add the control to webpart
           this.Controls.Add(ucControl);
        });
     }
     catch (Exception ex)
     {
        Common.WriteLogEvent(ex);
     }

} 
```

现在我想做的是，我在 layouts 文件夹下有一个 Web 表单“_/layouts/Page/MyPage.aspx”文件，我想加载这个文件，而不是在 webpart 页面上加载一个典型的 ascx 文件。

这有没有可能？我想知道怎么做。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T09:14:00.267

您可以`<IFRAME>`向 webpart 添加一个并将页面加载到其中。

或者以`IFRAME`编程方式创建并以与添加用户控件相同的方式添加它：

```
var pageUrl = .....; // URL to your page
var literal = new Literal();
literal.Text = string.Format("<iframe src='{0}'></iframe>", pageUrl);
this.Controls.Add(literal); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T10:27:48.927

您不告诉我们，“_/layouts/Page/MyPage.aspx”是否在您的控制之下。如果是这样，只需从中创建一个新的用户控件，然后在旧页面和 Web 部件中使用它。

There are some gotchas, like the user control does not have all the events the page does (you'll need to override appropriate methods), the variables on page are not directly accessible (just use user control's Page property), but if the page is not too complicated, the process should be just a repeat of "compile and change".

# android - 有谁知道这是什么意思：“getSlotFromBufferLocked：在插槽 0 中遇到 NULL 缓冲区正在寻找缓冲区”

> ID：10796190
> 
> 赞同：1
> 
> 时间：2012-05-29T09:11:59.517
> 
> 标签：android, opengl-es

我已经创建了 TextureView 的子类，一切正常，但总是在暂停/恢复活动后我收到这样的消息

> 05-29 13:02:33.865: DEBUG/SurfaceTextureClient(8745): getSlotFromBufferLocked: 在槽 0 中遇到 NULL 缓冲区，寻找缓冲区 0xba3458 05-29 13:02:33.865: DEBUG/SurfaceTextureClient(8745): getSlotFromBufferLocked: 00: NULL 05 -29 13:02:33.865: 调试/SurfaceTextureClient(8745): getSlotFromBufferLocked: 01: 0xcecb08 05-29 13:02:33.865: DEBUG/SurfaceTextureClient(8745): getSlotFromBufferLocked: 02: 0xba3458 05-29 13:02:33。 DEBUG/SurfaceTextureClient(8745): getSlotFromBufferLocked: 03: NULL 05-29 13:02:33.865: DEBUG/SurfaceTextureClient(8745): getSlotFromBufferLocked: 04: NULL 05-29 13:02:33.865: DEBUG/SurfaceTextureClient(8745): getSlotFromBufferLocked : 05: NULL 05-29 13:02:33.865: DEBUG/SurfaceTextureClient(8745): getSlotFromBufferLocked: 06: NULL 05-29 13:02:33.865: DEBUG/SurfaceTextureClient(8745):getSlotFromBufferLocked: 07: NULL 05-29 13:02:33.865: DEBUG/SurfaceTextureClient(8745): getSlotFromBufferLocked: 08: NULL 05-29 13:02:33.865: DEBUG/SurfaceTextureClient(8745): getSlotFromBufferLocked: 09: NULL 05-29 13：02：33.865：调试/SurfaceTextureClient（8745）：getSlotFromBufferLocked：10：NULL 05-29 13：02：33.873：调试/SurfaceTextureClient（8745）：getSlotFromBufferLocked：11：NULL 05-29 13：02：33.873：调试/ SurfaceTextureClient(8745):getSlotFromBufferLocked:12:NULL 05-29 13:02:33.873:DEBUG/SurfaceTextureClient(8745):getSlotFromBufferLocked:13:NULL 05-29 13:02:33.873:DEBUG/SurfaceTextureClient(8745):getSlotFromBufferLocked:14 : NULL 05-29 13:02:33.873: DEBUG/SurfaceTextureClient(8745): getSlotFromBufferLocked: 15: NULL 05-29 13:02:33.873: DEBUG/SurfaceTextureClient(8745):getSlotFromBufferLocked: 16: NULL 05-29 13:02:33.873: DEBUG/SurfaceTextureClient(8745): getSlotFromBufferLocked: 17: NULL 05-29 13:02:33.873: DEBUG/SurfaceTextureClient(8745): getSlotFromBufferLocked: 18: NULL 05-29 13：02：33.873：调试/SurfaceTextureClient（8745）：getSlotFromBufferLocked：19：NULL 05-29 13：02：33.873：调试/SurfaceTextureClient（8745）：getSlotFromBufferLocked：20：NULL 05-29 13：02：33.873：调试/ SurfaceTextureClient(8745):getSlotFromBufferLocked:21:NULL 05-29 13:02:33.873:DEBUG/SurfaceTextureClient(8745):getSlotFromBufferLocked:22:NULL 05-29 13:02:33.873:DEBUG/SurfaceTextureClient(8745):getSlotFromBufferLocked:23 : NULL 05-29 13:02:33.873: DEBUG/SurfaceTextureClient(8745): getSlotFromBufferLocked: 24: NULL 05-29 13:02:33.873: DEBUG/SurfaceTextureClient(8745):getSlotFromBufferLocked: 25: NULL 05-29 13:02:33.873: DEBUG/SurfaceTextureClient(8745): getSlotFromBufferLocked: 26: NULL 05-29 13:02:33.873: DEBUG/SurfaceTextureClient(8745): getSlotFromBufferLocked: 27: NULL 05-29 13：02：33.873：调试/SurfaceTextureClient（8745）：getSlotFromBufferLocked：28：NULL 05-29 13：02：33.873：调试/SurfaceTextureClient（8745）：getSlotFromBufferLocked：29：NULL 05-29 13：02：33.873：调试/ SurfaceTextureClient(8745):getSlotFromBufferLocked:30:NULL 05-29 13:02:33.873:DEBUG/SurfaceTextureClient(8745):getSlotFromBufferLocked:31:NULLgetSlotFromBufferLocked: 28: NULL 05-29 13:02:33.873: DEBUG/SurfaceTextureClient(8745): getSlotFromBufferLocked: 29: NULL 05-29 13:02:33.873: DEBUG/SurfaceTextureClient(8745): getSlotFromBufferLocked: 30: NULL 05-29 13：02：33.873：调试/SurfaceTextureClient（8745）：getSlotFromBufferLocked：31：NULLgetSlotFromBufferLocked: 28: NULL 05-29 13:02:33.873: DEBUG/SurfaceTextureClient(8745): getSlotFromBufferLocked: 29: NULL 05-29 13:02:33.873: DEBUG/SurfaceTextureClient(8745): getSlotFromBufferLocked: 30: NULL 05-29 13：02：33.873：调试/SurfaceTextureClient（8745）：getSlotFromBufferLocked：31：NULL

暂停时我会破坏我的 gl 表面和 gl 上下文并终止显示，在恢复时创建新的表面和上下文并获得显示。一切正常，但我认为设备日志中不应该出现这样的消息。

有谁知道这是什么意思，为什么会发生。谢谢你。

# android - 照片未保存到手机内存

> ID：10796192
> 
> 赞同：1
> 
> 时间：2012-05-29T09:12:01.820
> 
> 标签：android

我在三星 Galaxy Nexus 上使用 Android 4.03。日志显示该文件已写入手机内存，但是当我签入 Windows 资源管理器或使用手机图库时，我看不到我刚刚拍摄的照片。

这是我的代码。

```
 PictureCallback jpegCallback = new PictureCallback() {
    public void onPictureTaken(byte[] data, Camera camera) { 
        FileOutputStream outStream = null;
        boolean mExternalStorageAvailable = false;
        boolean mExternalStorageWriteable = false;
        String state = Environment.getExternalStorageState();
        if (Environment.MEDIA_MOUNTED.equals(state)) {
            // We can read and write the media
            mExternalStorageAvailable = mExternalStorageWriteable = true;
            Log.d(TAG, "Can Write ");
            try {

                outStream = new FileOutputStream(String.format("/sdcard/myfile.jpg", System.currentTimeMillis()));  

                outStream.write(data);
                outStream.close();

                Log.d(TAG, "onPictureTaken - wrote bytes: " + data.length);
            } catch (FileNotFoundException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            } finally {
            }

        } else if (Environment.MEDIA_MOUNTED_READ_ONLY.equals(state)) {
            // We can only read the media
            mExternalStorageAvailable = true;
            mExternalStorageWriteable = false;
            Log.d(TAG, "Cant Write ");
        } else {
            // Something else is wrong. It may be one of many other states, but all we need
            //  to know is we can neither read nor write
            mExternalStorageAvailable = mExternalStorageWriteable = false;
            Log.d(TAG, "Other Error ");
        }
            }
}; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T09:14:45.400

尝试使用

```
Environment.getExternalStorageDirectory() 
```

而不是 "/sdcard" 。

# security - 访问报表服务器时避免出现 Windows 登录提示

> ID：10796195
> 
> 赞同：5
> 
> 时间：2012-05-29T09:12:19.977
> 
> 标签：security, reporting-services

我们正在使用 Microsoft Reporting Service 2008 R2 来开发报告，并且我们正在通过 ASP 应用程序访问这些报告。

`Response.Redirect(http://<serverIp>:80/ReportServer/Pages/ReportViewer.aspx?%2fReport+Project3%2fReport1&rs:Command=Render&quotn_Id=675);`

当我通过我的 Web 服务 URL 访问我的报表服务器时，它在从另一台机器访问时提示输入 Windows 登录名和密码（如果我提供凭据，则工作正常），但它在本地机器上工作正常。我需要采用什么配置来摆脱这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T09:19:46.080

看起来您需要将身份验证类型更改为 Windows 身份验证（`Integrated Security`）`SSRS Config/IIS Manager`：

*   打开 IIS 管理器。
*   右键单击报表服务器虚拟目录，然后单击属性。
*   单击目录安全。
*   在身份验证和访问控制中，单击编辑以打开身份验证方法对话框。
*   （可选）清除集成 Windows 身份验证复选框。
*   如果报表服务器虚拟目录同时配置为集成 Windows 身份验证和基本身份验证，则报表服务器将首先尝试 Windows 身份验证。如果您只想使用基本身份验证，则必须清除集成 Windows 身份验证复选框。
*   选择基本身份验证。
*   设置用于向 Web 服务器验证客户端的默认域或领域。

[http://msdn.microsoft.com/en-us/library/bb283249.aspx](http://msdn.microsoft.com/en-us/library/bb283249.aspx)

[http://technet.microsoft.com/en-us/library/bb283249(v=sql.90).aspx](http://technet.microsoft.com/en-us/library/bb283249(v=sql.90).aspx)

# ruby-on-rails - Rails 3.2 button_to 不传递 GET 变量

> ID：10796196
> 
> 赞同：1
> 
> 时间：2012-05-29T09:12:25.447
> 
> 标签：ruby-on-rails, ruby-on-rails-3

还在学习rails，做我的第一个项目。

我正在尝试将一个额外的“类别”变量传递给我的“页面”控制器中的“新”方法

```
def new
    @page = Page.new
    @cats = Cat.all
end 
```

我正在这样做，所以新页面已经从下拉菜单中选择了类别

当我使用 link_to 时它可以工作

```
<%= link_to "Create new page", new_page_path(:cat => @cat.id) %> 
```

但是当我尝试使用 button_to

```
<%= button_to "Create new page", new_page_path(:cat => @cat.id), method: :get %> 
```

变量“cat”没有传递给“new”动作视图。这不是一个大问题，但它搞砸了我的布局，因为我在所有其他地方都使用 button_to，我只是希望有一个更好的方法来解决它，添加更多的 css 让它看起来一样

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T15:30:50.437

解决此问题的一种可能方法是创建一个带有隐藏字段的表单

```
<%= form_tag new_page_path(), :method => :get do
    hidden_field_tag "cat", @cat.id
    button_to "Create new page"
end %> 
```

您的版本不起作用，因为“button_to”方法创建了一个表单，该表单仅从输入字段将参数传递给浏览器。

# tfs - 每个项目的管理员权限

> ID：10796200
> 
> 赞同：0
> 
> 时间：2012-05-29T09:12:46.283
> 
> 标签：tfs

假设我想在 Team Foundation 中处理一个项目。是否有不同的管理员权限？

我的意思是，如果您是 Team Foundation Server 的管理员，那么您可以创建一个项目。但随后您将有权访问创建的所有项目。

有没有办法处理一些管理员只能使用这个项目2而一些只能使用这个项目2的管理员权限。

我希望我让自己清楚我在追求什么。:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T09:17:58.657

TFS 2010 引入了团队项目集合的概念，可以在与团队项目不同的安全级别上进行管理。

请参阅 MSDN 杂志文章：[Visual Studio TFS 团队项目和收集指南](http://msdn.microsoft.com/en-us/magazine/gg983486.aspx)

![Visual Studio TFS 团队项目和收集指南](../Images/9bb62e87ee354cb8d750cca73844d52c.png)

# java - 使用 java 获取 NAT 网关或代理后面的 SSL 客户端的主机名

> ID：10796201
> 
> 赞同：1
> 
> 时间：2012-05-29T09:12:49.557
> 
> 标签：java, nat

我有一个用 java 编写的 2 路 SSL 客户端和服务器。问题是我的服务器需要能够找出客户端的主机名，并且该客户端位于 NAT 网关或代理后面。我试过了：clientSocket.getRemoteSocketAddress()、clientSocket.getInetAddress().getCanonicalHostName()、clientSocket.getInetAddress().getHostAddress()、

其中 clientSocket 是 SSLSocket 类型，它们都不起作用，它们只是给了我一个公共 IP 地址。有没有办法让我获得连接到服务器的客户端的实际主机名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T09:20:45.790

不是来自套接字。如果远程主机位于 NAT 防火墙后面，那么根据定义，它的主机名和 IP 地址对您来说是不可见的。您所看到的只是公共 IP 和主机名。

但是，您可以`hostname`在远程端执行命令并将输出通过 SSh 连接传回。您取回的数据将仅与远程主机的配置一样好。无法保证您返回的内容与其内部 DNS 主机名或其他任何内容相匹配。

# css - 将样式应用于 p:datatable 中的 Header

> ID：10796203
> 
> 赞同：9
> 
> 时间：2012-05-29T09:12:55.737
> 
> 标签：css, jsf, jsf-2, primefaces

我想知道如何在 primefaces 数据表中应用标题列的样式。我能够使用 rowStyleClass 属性更改行的样式。但不确定如何更改标题列的样式。一个示例示例将非常有帮助。我已经尝试过以下方法，但整个专栏的样式似乎都发生了变化

```
 <p:column id="SelectallID" headerText="Select ID" style="text-align:center; background-color:#C6C3C6;padding:12px;">
 <h:outputText>
 <h:selectBooleanCheckbox id="checkbox2"  value="#{car.selected}"/>
 </h:outputText>
 </p:column> 
```

当我使用上述内容时，整个列样式似乎都发生了变化。但我只想更改标题列的样式。请协助。提前致谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-29T11:18:04.940

Primefaces datatable headers generate a html `<th>` element. You could use an element selector in your style definition:

```
th {
  color: red !important;
} 
```

This will for instance change the font color of all `<th>` elements on the page.

If this selection is not specific enough for your purposes, you can combine it with the id of the datatable:

```
#review-table th {
  color: red;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-06-15T01:11:37.043

我知道这是旧的，但以防万一其他人发现它：

您可以像这样使用 ap:columnGroup 创建 ap:dataTable：

```
<p:dataTable id="example" value="#{bean.values}" var="value">
    <p:columnGroup type="header">
      <p:column headerText="column1" />
      <p:column headerText="column2" styleClass="text-left"/>
      <p:column headerText="column3" styleClass="text-left"/>
    </p:columnGroup>
    <p:column>#{value.val1}</p:column>
    <p:column>#{value.val2}</p:column>
    <p:column>#{value.val3}</p:column>
</p:dataTable> 
```

columnGroup 中的样式将影响标题`<th>`，其余列中的样式将影响`<td>`

我希望这有帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-08-01T10:29:53.477

`<p:dataTable>`您可以使用以下代码定位 all 的表头：

```
.ui-datatable thead th {
    background-image: none !important;
    background-color: var(--primary-color) !important;
    color: var(--secondary-color) !important;
} 
```

您可能需要使用`!important`来覆盖继承的属性

**编辑：**我同意@Kukeltje 关于避免使用的评论`!important`，这导致接受的答案使用的逻辑。

```
.reskinned-datatable th {
    background-image: none;
    background-color: var(--primary-color);
    color: var(--secondary-color);
} 
```

# erlang - Erlang：无法启动奴隶 - {错误，超时}

> ID：10796206
> 
> 赞同：6
> 
> 时间：2012-05-29T09:13:10.447
> 
> 标签：erlang, slave, tsung

我目前正在尝试建立一个使用 Erlang 从属功能的分布式 Tsung 负载测试环境，但是我未能成功让控制器节点启动从属节点。例如

```
(musicglue@load1)1> net:ping(musicglue@load2).
pong
(musicglue@load1)2> slave:start(load2,musicglue,"-setcookie tom").
{error,timeout} 
```

## 背景

我的环境：

控制器 - 主机名：load1，用户：musicglue，Ubuntu 10.04 LTS，从源代码编译的 Erlang R15B01 从 - 主机名：load2，用户：musicglue，Ubuntu 10.04 LTS，Erlang R15B01 从源代码编译 防火墙禁用 SELinux 未安装

有效的事情：

*   我可以从 load1 SSH 到 load2，反之亦然
*   我可以在 load1 和 load2 上启动一个 erl 会话
*   我可以从 load1 在 load2 上启动一个 erl 会话；ssh load2 错误
*   我可以在两个节点上使用相同的 cookie 从 erl 会话的 load1 中成功 ping load2。

平输出：

```
musicglue@load1:~$ erl -rsh ssh -sname musicglue -setcookie tom
Erlang R15B01 (erts-5.9.1) [source] [64-bit] [smp:4:4] [async-threads:
0] [hipe] [kernel-poll:false]
Eshell V5.9.1  (abort with ^G)
(musicglue@load1)1> net:ping(musicglue@load2).
pong 
```

## 问题

尝试从 load2 上的 load1 启动从属会话时出现我的问题：

```
musicglue@load1:~$ erl -rsh ssh -sname musicglue -setcookie tom
Erlang R15B01 (erts-5.9.1) [source] [64-bit] [smp:4:4] [async-threads:
0] [hipe] [kernel-poll:false]

Eshell V5.9.1  (abort with ^G)
(musicglue@load1)1> net:ping(musicglue@load2).
pong
(musicglue@load1)2> slave:start(load2,musicglue,"-setcookie
tom").
{error,timeout} 
```

这是我在运行 slave:start 命令时从 epmd 得到的输出：

```
epmd: Thu May 24 10:01:57 2012: Non-local peer connected
epmd: Thu May 24 10:01:57 2012: opening connection on file descriptor
4
epmd: Thu May 24 10:01:57 2012: got 12 bytes
***** 00000000  00 0a 7a 6d 75 73 69 63 67 6c 75 65
|..zmusicglue|
epmd: Thu May 24 10:01:57 2012: ** got PORT2_REQ
epmd: Thu May 24 10:01:57 2012: got 2 bytes
***** 00000000  77 01                                             |w.|
epmd: Thu May 24 10:01:57 2012: ** sent PORT2_RESP (error) for
"musicglue"
epmd: Thu May 24 10:01:57 2012: closing connection on file descriptor
4
epmd: Thu May 24 10:01:57 2012: Local peer connected
epmd: Thu May 24 10:01:57 2012: opening connection on file descriptor
4
epmd: Thu May 24 10:01:57 2012: got 24 bytes
***** 00000000  00 16 78 ca d6 4d 00 00  05 00 05 00 09 6d 75 73
|..x..M.......mus|
***** 00000010  69 63 67 6c 75 65 00 00                           |
icglue..|
epmd: Thu May 24 10:01:57 2012: ** got ALIVE2_REQ
epmd: Thu May 24 10:01:57 2012: registering 'musicglue:1', port 51926
epmd: Thu May 24 10:01:57 2012: type 77 proto 0 highvsn 5 lowvsn 5
epmd: Thu May 24 10:01:57 2012: got 4 bytes
***** 00000000  79 00 00 01                                       |
y...|
epmd: Thu May 24 10:01:57 2012: ** sent ALIVE2_RESP for "musicglue"
epmd: Thu May 24 10:01:57 2012: unregistering 'musicglue:1', port
51926
epmd: Thu May 24 10:01:57 2012: closing connection on file descriptor
4 
```

任何人的任何帮助或建议将不胜感激，

非常感谢

## 编辑

我还应该提到，我可以看到 load2 成功确认了 ssh 连接，但随后立即断开连接：

```
May 30 13:49:27 load2 sshd[16169]: Accepted publickey for musicglue from 173.45.236.182 port 51843 ssh2
May 30 13:49:27 load2 sshd[16171]: Received disconnect from 173.45.236.182: 11: disconnected by user 
```

作为对以下评论的回应，我还尝试使用从属的不同节点名称来启动从属：

```
musicglue@load1:~$ erl -rsh ssh -sname musicglue -setcookie tom
Erlang R15B01 (erts-5.9.1) [source] [64-bit] [smp:4:4] [async-threads:0] [hipe] [kernel-poll:false]

Eshell V5.9.1  (abort with ^G)
(musicglue@load1)1> slave:start(load2,bar,"-setcookie tom").
{error,timeout} 
```

对于控制器：

```
musicglue@load1:~$ erl -rsh ssh -sname foo -setcookie tom
Erlang R15B01 (erts-5.9.1) [source] [64-bit] [smp:4:4] [async-threads:0] [hipe] [kernel-poll:false]

Eshell V5.9.1  (abort with ^G)
(foo@load1)1> slave:start(load2,musicglue,"-setcookie tom").
{error,timeout} 
```

对于两者：

```
musicglue@load1:~$ erl -rsh ssh -sname foo -setcookie tom
Erlang R15B01 (erts-5.9.1) [source] [64-bit] [smp:4:4] [async-threads:0] [hipe] [kernel-poll:false]

Eshell V5.9.1  (abort with ^G)
(foo@load1)1> slave:start(load2,bar,"-setcookie tom").
{error,timeout} 
```

但无济于事

## 解决方案

原来我的问题是我的奴隶无法通过 SSH 连接到控制器，因此无法响应任何命令。

在修复了两个节点之间的这个通信端口之后，每个人都工作得很好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T18:04:16.170

通过谷歌找到这个问题的人的替代答案。如果您尝试在单独的机器上启动服务，那么您的控制器节点名称必须解析。

例如，我有超时：

```
> node().
someName@host.domain.com
> slave:start('192.168.122.196',bar,"-setcookie cookie").
{error,timeout} 
```

通过使用显式域名启动我的 erlang 实例：

```
erl -name someName@192.168.1.5 -setcookie cookie
> slave:start('192.168.122.196',bar,"-setcookie cookie"). 
```

这个命令现在成功了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-31T10:54:54.343

尝试通过在您的某处创建这样的 shell 脚本来记录通过 SSH 发生的事情`PATH`：

```
#!/bin/sh

echo "$0" "$@" > /tmp/my-ssh.log
ssh -v "$@"  2>&1 | tee -a /tmp/my-ssh.log 
```

调用它`my-ssh`，用 启动 Erlang `erl -rsh my-ssh`，然后检查其中的内容`/tmp/my-ssh.log`。这应该可以说明问题...

# iphone - 在 WebView 中显示身份验证对话框

> ID：10796208
> 
> 赞同：4
> 
> 时间：2012-05-29T09:13:11.130
> 
> 标签：iphone, ios, cocoa-touch, uiwebview

我有一个 webView，它将显示 https url。我正在尝试打开一个 https url，它将提供一个像[http://members.easynews.com/](http://members.easynews.com/)这样的身份验证对话框。在 Mac 中，它作为对话框打开，即使在 iPhone Safari 浏览器中，它也显示为对话框。但在 webview 中，它不显示对话框。如何在 webView 中显示该对话框？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T10:05:15.157

我认为这是因为该链接当局的一些防火墙设置。这就是他们要求授权的原因。我试图在我的 web 视图中加载它我不会得到任何东西。它没有加载

去做这个

```
[[UIApplication sharedApplication] openURL:[NSURL URLWithString: @"http://members.easynews.com"]]; 
```

而不是将其加载到 webview 或以这种方式加载 i

```
 - (void)viewDidLoad {
     [super viewDidLoad];
    webView.delegate = self;
      NSURL *url = [NSURL URLWithString:@"http://www.google.com"]; 
      NSURLRequest *request = [NSURLRequest requestWithURL:url]; 
      [webView setScalesPageToFit:YES];         
      [self.webView loadRequest:request];               
    } 
```

在您的课程中添加此新方法

```
- (void)webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error
{
   NSLog("Error : %@",error);
} 
```

我希望您已将 webView 对象与其接口生成器中的插座连接起来？

# zorba - 佐巴安装

> ID：10796209
> 
> 赞同：2
> 
> 时间：2012-05-29T09:13:41.507
> 
> 标签：zorba

如何在 Ubuntu 12.04 中安装 Zorba？添加存储库时{使用此命令：**sudo add-apt-repository ppa:juan457/zorba** }，出现错误“ **Err [http://ppa.launchpad.net](http://ppa.launchpad.net) exact /main Sources 404 Not Found** ”。你能建议我如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T09:10:14.453

最新的 Zorba 版本 (2.2) 在 Ubuntu 12.04 Precise Pangolin 之前发布，因此我们没有为该 Ubuntu 版本构建软件包。

下一个 Zorba 版本 (2.5) 将在接下来的几天内发布，因此我们将更新 PPA 二进制文件，包括 Ubuntu 12.04。

您可以通过在 /etc/apt/sources.list 中添加以下行来在 Ubuntu 12.04 中使用 Ubuntu 11.10 Oneiric Ocelot 软件包：

deb [http://ppa.launchpad.net/juan457/zorba/ubuntu](http://ppa.launchpad.net/juan457/zorba/ubuntu) oneiric main

然后执行“sudo apt-get update；sudo apt-get install zorba”。但是我不能发誓这会奏效；两个 Ubuntu 版本之间的一些依赖库可能会有所不同。

# iphone - setStatusBarOrientation 问题

> ID：10796210
> 
> 赞同：2
> 
> 时间：2012-05-29T09:13:44.847
> 
> 标签：iphone, objective-c, uinavigationcontroller, uiinterfaceorientation

我有一个导航控制器应用程序。首先我推 FirstViewController（支持纵向方向），然后是 SecondViewController（支持所有方向）。当我处于 SecondViewController 的横向模式并按下后退按钮时，FirstViewController 以横向模式出现。这就是我手动旋转导航视图的原因，但是当我想将 setStatusBarOrientation 设置为 Portrait 时（第一个视图控制器应该只在纵向模式下出现），视图控制器的方向仍然是横向，即使将设备旋转到纵向模式，方向保持横向。这是我的 FirstViewController 代码：

```
- (void)viewWillAppear:(BOOL)animated
{
    if (UIInterfaceOrientationIsLandscape(self.interfaceOrientation))
    {
        if (self.interfaceOrientation == UIInterfaceOrientationLandscapeLeft) {
            prevInterfaceOrientation = UIInterfaceOrientationLandscapeLeft;
            self.navigationController.view.transform = CGAffineTransformIdentity;
            self.navigationController.view.transform =
            CGAffineTransformMakeRotation(degreesToRadians(90));
        }
        else if (self.interfaceOrientation ==
                 UIInterfaceOrientationLandscapeRight) {
            prevInterfaceOrientation = UIInterfaceOrientationLandscapeRight;
            self.navigationController.view.transform = CGAffineTransformIdentity;
            self.navigationController.view.transform =
            CGAffineTransformMakeRotation(degreesToRadians(-90));
        }
        [[UIApplication sharedApplication] setStatusBarOrientation:UIInterfaceOrientationPortrait animated:NO];
        [self.tableViewDetail reloadData];
    }

}

 - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
     return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

- (void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{ 
    if (toInterfaceOrientation == UIInterfaceOrientationPortrait)
    {
        if (prevInterfaceOrientation == UIInterfaceOrientationLandscapeLeft) {
            self.navigationController.view.transform = CGAffineTransformIdentity;
        }
        else if (prevInterfaceOrientation ==
                 UIInterfaceOrientationLandscapeRight) {
            self.navigationController.view.transform = CGAffineTransformIdentity;
        }
        [[UIApplication sharedApplication] setStatusBarOrientation:UIInterfaceOrientationPortrait];
        [self.tableViewDetail reloadData];
    }
} 
```

我什至尝试使用：

```
- (void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation
{
    if (UIInterfaceOrientationIsLandscape(prevInterfaceOrientation))
    {
        [[UIApplication sharedApplication] setStatusBarOrientation:UIInterfaceOrientationPortrait];
    }
} 
```

但是当我旋转到纵向时，self.interfaceOrientation 仍然保持横向。但我真的需要手动将视图旋转到纵向模式以让用户看到，FirstViewController 仅支持纵向。我可以选择将 SecondViewController 的视图放在 MainWindow（如模态窗口）上，但我不喜欢这个想法，因为如果苹果有 setStatusBarOrientation 方法，在我看来，它必须正确解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T07:07:17.580

我会摆脱转换，并使用

```
 [[UIApplication sharedApplication] setStatusBarOrientation:UIInterfaceOrientationPortrait animated:animated]; 
```

这与视图堆栈的强制重绘相结合将完成。这可以通过将以下内容添加到第一个控制器的 viewDidAppear 来完成（它在 viewWillApear 中不起作用）。

```
- (void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];

       UIWindow *window = [[UIApplication sharedApplication] keyWindow];
       if ([window.subviews count] > 0) {
           UIView *view = [window.subviews objectAtIndex:0];
           [view removeFromSuperview];
           [window insertSubview:view atIndex:0];
       }
       else {
           DLog(@"NO view to force rotate?");
       } 
```

不幸的是，当你这样做时，过渡动画不是很干净，所以我建议拍摄纵向屏幕的快照，将其覆盖在你的视图上，然后使用单独的动画将其淡出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T12:27:16.193

Steven Veltema 的回答对我不起作用。

我有一个视图控制器，所有方向都允许，其余的只支持纵向。当我在横向中拥有第一个视图控制器并导航到另一个视图控制器时，方向没有像您遇到的那样刷新。

我发现了另一个技巧来重新加载正确方向的视图。只需添加一个您甚至看不到的模态视图控制器。在所有其他视图中添加：

```
- (void)viewDidAppear:(BOOL)animated
{
    UIInterfaceOrientation interfaceOrientation = [[UIApplication sharedApplication] statusBarOrientation];
    if(UIInterfaceOrientationIsLandscape(interfaceOrientation)){
        UIViewController * viewController = [[UIViewController alloc] init];
        [self presentModalViewController:viewController animated:NO];
        [viewController dismissModalViewControllerAnimated:NO];
    }

    [super viewDidAppear:animated];
    ....
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-20T15:14:43.560

另一个快速解决方案是

1.  在左侧栏中单击您的项目。
2.  在常规设置中，选择“在应用程序启动期间隐藏”选项。

# unit-testing - 信号处理库的测试驱动开发

> ID：10796211
> 
> 赞同：12
> 
> 时间：2012-05-29T09:13:52.963
> 
> 标签：unit-testing, audio, language-agnostic, tdd, signal-processing

我从事音频操作，通常使用 Matlab 进行原型设计，使用 C++ 进行实现。最近，我一直在阅读 TDD。我查看了一些基本示例，并且对该范例非常感兴趣。

目前，我使用我认为的全局“测试辅助”方法。为此，我用 C++ 编写信号处理块，然后制作一个简单的 Matlab mex 文件，该文件可以与我的类交互。我随后添加了功能，检查结果是否与我去的等效 Matlab 脚本匹配。这可以正常工作，但随着系统的发展，测试很快就会过时。此外，我正在测试整个系统，而不仅仅是单元。

使用已建立的 TDD 框架会很好，我可以在其中拥有一个测试套件，但我看不出如何在没有与被测代码同样复杂的测试的情况下验证处理块的功能。我将如何在 C++ 测试中生成参考信号来验证处理块，而测试不是一种自我实现的预言？

如果有人在这方面有经验，或者可以提出一些我可以阅读的方法，那就太好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T14:22:58.167

我认为将 TDD 方法应用于信号处理非常棒（如果我在几年前自己进行信号处理时就知道它，它会为我节省几个月的时间）。我认为关键是将您的系统分解为可以独立测试的最低级别的组件，例如：

*   FFT：在已知频率下测试信号：DC、Fs/Nfft、Fs/2 和不同相位等。检查峰值和相位是否符合预期，检查归一化常数是否符合预期
*   峰值选择：测试您是否正确找到最大值/最小值
*   滤波器：以已知频率生成输入，并检查输出幅度和相位是否符合预期。

您不太可能在 C++ 和 Matlab 之间得到*完全相同*的结果，因此您必须在某些测试中提供错误界限。TDD 是一种很好的方法，不仅可以验证您拥有的代码的正确性，而且在尝试不同的实现时非常有用。例如，如果您想用另一种 FFT 实现替换，数据打包方式或使用的规范化常数通常会略有不同。TDD 将使您对正确集成新库充满信心。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T09:22:47.130

我为启发式检测做了类似的事情，我们有大量的捕获文件和一个能够加载和注入它们进行测试的框架。您是否有可能在文件中捕获参考信号并执行相同操作？

至于我关于 TDD 的 2 美分，它是一种很好的开发方式，但与大多数范式一样，你不必总是严格遵守它，有时你应该知道如何稍微改变规则，以免编写太多一次性代码/测试。我读到了一种方法，它说在开发测试之前绝对不应该编写任何代码，这有时可能过于严格。

另一方面，我总是喜欢说：“如果它没有经过测试，它就坏了”:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T15:16:07.717

测试与正在开发的代码一样复杂或更复杂是可以的。如果您更改（更新、重构、错误修复）代码而不是测试，则单元测试会警告您某些内容已更改并且需要进行审查（是模式 A 的错误修复应该更改模式 B 吗？等等）

此外，您可以维护各个计算组件的 API，而不仅仅是整个端到端系统。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-17T08:29:49.593

我才刚刚开始在信号处理的背景下考虑 TDD，所以我只能在前面的答案中添加一点。我所做的是利用一些叠加来测试原语。例如，在测试 IIR 滤波器时，我独立验证了具有单位增益和缩放增益的 b0、b1 和 b2 元素，然后验证了遵循易于建模衰减的 a1 和 a2 元素。我的测试信号是分子的斜坡函数和分母的脉冲函数的组合。我知道这是一个微不足道的例子，但该过程应该适用于大量线性操作。测试还应该锻炼不稳定区域并显示输出适当地爆炸。

一般来说，我希望脉冲响应会为我做很多工作，因为在许多情况下它们会简化为可以独立计算的三角函数。同样，如果您的操作具有系列扩展，您的测试函数可以执行扩展为相关顺序并与您的处理块进行比较。它会很慢，但它应该工作。

# ruby-on-rails - 在将值存储到所需位置之前将值存储在 temp 变量中

> ID：10796217
> 
> 赞同：0
> 
> 时间：2012-05-29T09:14:14.450
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, associations

我在这些与模型之间建立了多对多的关系：-

`user.rb and city.rb`，这样我就可以访问 user.cities 和 city.users。

一旦用户点击添加城市，我想像这样在临时变量中添加这些城市

```
temp = []
city = City.find(params[:id])
temp << city 
```

然后我想迭代临时做这样的事情`temp.each do |t|...` 然后一旦用户点击确认我的城市我想添加这些城市`user.cities`

获得预期结果的最佳方法可能是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T09:43:02.020

我认为最好的方法是使用 javascript。只需单击 js 中的保存城市 ID，然后在提交时将它们发送到将保存它们的适当操作。

# java - 什么时候在 Java 类中实例化静态块

> ID：10796219
> 
> 赞同：0
> 
> 时间：2012-05-29T09:14:25.047
> 
> 标签：java, static, static-block

假设一个类中有一个静态块

```
public class Menu {

    private static Map<String, String> buttonEventMap = new HashMap<String, String>();

    static {
        buttonEventMap.put("show-user","show");
        buttonEventMap.put("delete-user","delete");
    }

    public static Map<String, String> getHashMap() // To get the hash map
} 
```

块的生命周期是什么，它什么时候被实例化，程序什么时候启动或者我们什么时候创建类的第一个对象

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T09:18:40.137

它在类被类加载器初始化时执行。并且该类被延迟初始化，第一次应用程序中的某些代码需要该类（例如调用静态方法，或引用其静态字段之一，或创建新实例）。

因此，如果程序从不使用该类，则将永远不会执行静态块。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T09:16:48.633

当您第一次访问应用程序中的类时。

# php - php + 计数循环 + 初始计数错误？

> ID：10796222
> 
> 赞同：0
> 
> 时间：2012-05-29T09:14:32.397
> 
> 标签：php, loops, foreach, count

我有一个相当长的代码，所以我认为最好的办法是在这里发布一些附加评论作为其中的问题：

```
<div class="contentRow">

    <h2>Title</h2>

    <div id="frame">

        <?php

        //Get files
        $sql->query("SELECT * FROM files WHERE job = 'true'");
        $count  = count($sql->get());

        //No files to display
        if ($count == "0"){

            echo "<div class='box red'><p>No jobs found.</p></div>";

        } else{

            $sql->query("SELECT * FROM files WHERE job = 'true'");

            $i=0;

            foreach($sql->get() as $result){

                $i++;

        ?>

        <!-- Here I start printing the results and here the problems begin -->

        <!-- My goal here: Print n .jobsContainer with exactly 4 .jobContainer inside -->
        <?php if ($i % 4 == 0){ ?>
        </div><!-- CLOSE jobsContainer -->
        <?php } ?>

        <?php if ($i % 4 == 0 OR $i == 1){ ?>
        <div class="jobsContainer"><!-- OPEN jobsContainer -->
        <?php } ?>

            <!-- Print the .jobContainer -->
            <div class="jobContainer">
                content + table + form
            </div>

            <!-- My goal here: Print .jobSeperator after every 2nd  .jobContainer -->
            <?php if ($i % 2 == 0){ ?>
            <div class="jobSeperator">&nbsp;</div>
            <?php } ?>

        <!-- CLOSE loop -->
        <?php  } }?>

    </div><!-- jobsFrame -->

    <div class="clear"></div>

</div><!-- contentRow --> 
```

所需的输出应如下所示：

![在此处输入图像描述](../Images/721a16088e98de0c5a71c37629d28766.png)

我的问题如下：

似乎第一个容器中只包含**3 个**元素，但之后有 4 个。因此分隔符也有点混乱，看起来像这样：

![在此处输入图像描述](../Images/eb46a47a32553687a2c1328e2d28bef0.png)

似乎问题不适用于`.jobSeperator`，因为它总是在每 2 个容器之后包含，但是它也被搞砸了，因为在第一个`.jobsContainer`容器中只有 3 个子容器。

我不明白为什么一开始`.jobsContainer`只有 3 个子容器，但是从那以后，根据需要，有 4 个，但可能很明显，我只是看不到它......

ps 如果我将代码设置为`.jobContainer`在一个内打印 5 `.jobsContainer`，则第一个打印 4 ，`.jobsContainer`然后在每个后续打印 5`.jobsContainer`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T09:53:03.917

尝试更改这些行：

```
 <?php if ($i % 4 == 0 OR $i == 1){ ?>
         <div class="jobsContainer"><!-- OPEN jobsContainer -->
    <?php } ?> 
```

至

```
 <?php if ( ($i-1) % 4 == 0 ){ ?>
         <div class="jobsContainer"><!-- OPEN jobsContainer -->
    <?php } ?> 
```

现在您在第 1、第 4、第 8、第 12、... 迭代开始时打开容器，在此更改之后，您应该在第 1、第 5、第 9、第 13...迭代之前打开容器，这应该可以解决问题。你会摆脱丑陋的或。看来这是唯一的错误，请尝试一下。

我还建议分离应用程序逻辑和表示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T09:37:01.770

首先，您不应该将您的 SQL 逻辑与 HTML 混合在一起。

反正。这个想法是您需要在每个第二项之后输出一个分隔符。我会看的测试用例是这样的。

```
1 2
---
3 4
***
5 6
---
7 
```

编写它的代码是：

```
$i = 0;
foreach( /* some array */ as $data ){

    $i++;
    if ( ($i - 1) % 2 === 0 ){

        if ( ($i - 1) % 4 === 0 ){

            echo '<br />***<br />';
        } else {

            echo '<br />---<br />';
        }            
    }

    echo $i, ' ';
} 
```

这将重现上述结构（从未测试过）。

至于布局和其余应用逻辑的分离，你可以看看[这篇文章](http://codeangel.org/articles/simple-php-template-engine.html)。它将显示一个非常简单的方法，不需要额外的 3rd 方库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T09:52:50.673

我相信你犯了一个小错误。

```
<!-- My goal here: Print n .jobsContainer with exactly 4 .jobContainer inside -->
<?php if ( ($i+1) % 4 == 0){ ?>
</div><!-- CLOSE jobsContainer -->
<?php } ?>
<?php if ( ($i+1) % 4 == 0 OR $i == 1){ ?>
<div class="jobsContainer"><!-- OPEN jobsContainer -->
<?php } ?> 
```

在此位中使用`($i+1)`而不是。`$i`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T09:58:37.740

如果您检查生成的 HTML 输出，您会看到当 $i == 4 时，您首先关闭 jobsContainer div，然后再输出第 4 个 jobContainer。您需要将输出顺序更改为如下所示：

编辑：似乎您应该拆分第一个 jobsContainer 的开始（$i == 1）

```
<div class="contentRow">
    <h2>Title</h2>
    <div id="frame">
        <?php
        $i = 0;
        for($j = 0; $j < 12; $j++)
        {
            $i++;
            ?>
            <?php if ($i == 1) { ?>
                <div class="jobsContainer">
            <?php } ?>

            <div class="jobContainer">job</div>

            <?php if ($i % 4 == 2) { ?>
                <div class="jobSeperator">&nbsp;</div>
            <?php } ?>

            <?php if ($i % 4 == 0) { ?>
                </div>
                <div class="jobsContainer">
            <?php } ?>

            <?php 
        }
        ?>
        <?php if ($i > 0) { ?>
            </div>
        <?php } ?>
    </div>

    <div class="clear"></div>
</div> 
```

# java - 来自 Java 的 Dynamics CRM 2011 在线 Web 服务

> ID：10796237
> 
> 赞同：0
> 
> 时间：2012-05-29T09:15:36.837
> 
> 标签：java, dynamics-crm-2011, crm, microsoft-dynamics, dynamics-crm-online

我正在尝试从 Java 访问 Microsoft Dynamic CRM 2011 在线 Web 服务，但到目前为止还没有运气。

我得到了组织 WSDL 文件并在 Axis2 (wsdl2Java) 的帮助下生成了所需的 java 存根文件。

我的简单客户端代码是

```
public class TestCRM2 {

public static void main(String[] args) {

    try {   

        // create query
        QueryExpression query = new QueryExpression();
        query.setEntityName("Contact");

        ArrayOfstring colAra = new ArrayOfstring();
        colAra.addString("fullname");

        ColumnSet columnSet = new ColumnSet();
        columnSet.setAllColumns(false);
        columnSet.setColumns(colAra);

        PagingInfo pageinfo = new PagingInfo();
        pageinfo.setCount(10);
        pageinfo.setPageNumber(1);

        query.setColumnSet(columnSet);
        query.setPageInfo(pageinfo);            

        ConditionExpression condition = new ConditionExpression();
        condition.setAttributeName("fullname");
        condition.setOperator(ConditionOperator.Equal);

        ArrayOfanyType values = new ArrayOfanyType();
        values.setAnyType(new String[] {"something"});
        condition.setValues(values);

        RetrieveMultiple retrieveMultiple = new RetrieveMultiple();
        retrieveMultiple.setQuery(query);

        OrganizationServiceStub stub = new OrganizationServiceStub();           

        //set Timeout 
        ServiceClient serviceClient =  stub._getServiceClient();
        serviceClient.getOptions().setTimeOutInMilliSeconds( 3 * 60 * 1000);
        /*serviceClient.getOptions().setProperty(HTTPConstants.HTTP_PROTOCOL_VERSION, HTTPConstants.HEADER_PROTOCOL_10);
        serviceClient.getOptions().setProperty(HTTPConstants.HEADER_TRANSFER_ENCODING_CHUNKED,false);*/         

        RetrieveMultipleResponse response = stub.retrieveMultiple(retrieveMultiple);            

        EntityCollection collection = response.getRetrieveMultipleResult();
        int count = collection.getTotalRecordCount();
        System.out.println(count);      

    } catch (Exception e) {
        e.printStackTrace();
    }
}} 
```

当我从 Eclipse 运行它时，我收到以下运行时错误

```
org.apache.axis2.AxisFault: Connection reset
at org.apache.axis2.AxisFault.makeFault(AxisFault.java:430)
at org.apache.axis2.transport.http.HTTPSender.sendViaPost(HTTPSender.java:197)
at org.apache.axis2.transport.http.HTTPSender.send(HTTPSender.java:75)
at org.apache.axis2.transport.http.CommonsHTTPTransportSender.writeMessageWithCommons(CommonsHTTPTransportSender.java:404)
at org.apache.axis2.transport.http.CommonsHTTPTransportSender.invoke(CommonsHTTPTransportSender.java:231)
at org.apache.axis2.engine.AxisEngine.send(AxisEngine.java:443)
at org.apache.axis2.description.OutInAxisOperationClient.send(OutInAxisOperation.java:406)
at org.apache.axis2.description.OutInAxisOperationClient.executeImpl(OutInAxisOperation.java:229)
at org.apache.axis2.client.OperationClient.execute(OperationClient.java:165)
at com.microsoft.schemas.xrm._2011.contracts.OrganizationServiceStub.retrieveMultiple(OrganizationServiceStub.java:1177) at test.TestCRM.main(TestCRM.java:105)
 Caused by: java.net.SocketException: Connection reset
at java.net.SocketInputStream.read(SocketInputStream.java:168)
at com.sun.net.ssl.internal.ssl.InputRecord.readFully(InputRecord.java:293)
at com.sun.net.ssl.internal.ssl.InputRecord.read(InputRecord.java:331)
at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:798)
at com.sun.net.ssl.internal.ssl.SSLSocketImpl.readDataRecord(SSLSocketImpl.java:755)
at com.sun.net.ssl.internal.ssl.AppInputStream.read(AppInputStream.java:75)
at java.io.BufferedInputStream.fill(BufferedInputStream.java:218)
at java.io.BufferedInputStream.read(BufferedInputStream.java:237)
at org.apache.commons.httpclient.HttpParser.readRawLine(HttpParser.java:78)
at org.apache.commons.httpclient.HttpParser.readLine(HttpParser.java:106)
at org.apache.commons.httpclient.HttpConnection.readLine(HttpConnection.java:1116)
at org.apache.commons.httpclient.MultiThreadedHttpConnectionManager$HttpConnectionAdapter.readLine(MultiThreadedHttpConnectionManager.java:1413)
at org.apache.commons.httpclient.HttpMethodBase.readStatusLine(HttpMethodBase.java:1973)
at org.apache.commons.httpclient.HttpMethodBase.readResponse(HttpMethodBase.java:1735)
at org.apache.commons.httpclient.HttpMethodBase.execute(HttpMethodBase.java:1098)
at org.apache.commons.httpclient.HttpMethodDirector.executeWithRetry(HttpMethodDirector.java:398)
at org.apache.commons.httpclient.HttpMethodDirector.executeMethod(HttpMethodDirector.java:171)
at org.apache.commons.httpclient.HttpClient.executeMethod(HttpClient.java:397)
at org.apache.axis2.transport.http.AbstractHTTPSender.executeMethod(AbstractHTTPSender.java:621)
at org.apache.axis2.transport.http.HTTPSender.sendViaPost(HTTPSender.java:193)
... 9 more 
```

我的客户端代码中是否缺少任何东西。非常感谢您的帮助。

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T11:08:23.780

1.  您必须在服务客户端的端点 URL 末尾附加“/web”。
2.  您必须提供 NTLM2 身份验证器实现并将其注册到您的存根使用的 httpclient。

# sql - 如何将日期拆分为月份

> ID：10796239
> 
> 赞同：1
> 
> 时间：2012-05-29T09:15:40.003
> 
> 标签：sql, sql-server, sql-server-2000

使用 SQL Server 2000

我想按月保存详细信息

用户输入

```
ID = 001
Fromdate = 01/01/2012
Todate = 29/03/2012

ID = 002
Fromdate = 01/05/2012
Todate = 19/06/2012

ID = 003
Fromdate = 01/04/2012
Todate = 30/04/2012
..... 
```

从用户条目中，我想将详细信息插入到 table1 中，条件是 fromdate 和 todate 拆分为按月（mm/yyyy）

预期产出

```
ID period fromdate todate

001 01/2012 01/01/2012 31/01/2012
001 02/2012 01/02/2012 29/02/2012
001 03/2012 01/03/2012 29/03/2012
002 05/2012 01/05/2012 31/05/2012
002 05/2012 01/06/2012 19/06/2012
003 04/2012 01/04/2012 30/04/2012
....
.... 
```

fromdate, todate fomat is `dd/mm/yyyy` period 格式是`mm/yyyy`

如何在 sql server 中执行此操作。

需要sql查询帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T14:02:36.833

首先，创建并填充具有以下列（至少）的[日历表：](https://stackoverflow.com/questions/2459260/calendar-table-week-number-of-month)

```
CREATE TABLE dbo.Calendar (
    BaseDate datetime NOT NULL PRIMARY KEY,
    Period char(7) NOT NULL,
    YearNumber int NOT NULL,
    MonthNumber int NOT NULL,
    IsFirstDayOfMonth bit NOT NULL,
    IsLastDayOfMonth bit NOT NULL
) 
```

然后，此查询将返回您需要的数据，对于一对，`fromdate`但`todate`您当然可以将其放入存储过程中，并根据用户输入或您从应用程序执行 SQL 的任何方式调用它一次：

```
declare @ID char(3), @FromDate datetime, @ToDate datetime

select @ID ='001', @FromDate = '20120107', @ToDate = '20120917'

select
    @ID as 'ID',
    c.Period,
    case when c.IsFirstDayOfMonth = 0x0 then @FromDate else c.BaseDate end as 'FromDate',
    case when @ToDate < c1.BaseDate then @ToDate else c1.BaseDate end as 'ToDate'
from
    dbo.Calendar c
    join dbo.Calendar c1
    on c.YearNumber = c1.YearNumber and c.MonthNumber = c1.MonthNumber
where
    c.BaseDate between @FromDate and @ToDate and
    (c.IsFirstDayOfMonth = 0x1 or c.BaseDate = @FromDate) and
    c1.IsLastDayOfMonth = 0x1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T05:05:01.093

你可以使用一个数字表（[你有一个吗？](https://stackoverflow.com/questions/10819/sql-auxiliary-table-of-numbers "SQL，数字辅助表")）来生成月份：

```
SELECT
  ID,
  Period   = RIGHT(CONVERT(varchar(10), MonthStart, 103), 7),
  /*
  alternatively:
  Period = RIGHT('0' + RTRIM(MONTH(MonthStart), 2) + '/' + RTRIM(YEAR(MonthStart)),
  */
  FromDate = CASE WHEN RangeStart > MonthStart THEN RangeStart ELSE MonthStart END,
  ToDate   = CASE WHEN RangeEnd   < MonthEnd   THEN RangeEnd   ELSE MonthEnd   END
FROM (
  SELECT
    ID,
    RangeStart,
    RangeEnd,
    Monthstart,
    MonthEnd = DATEADD(DAY, -1, DATEADD(MONTH, 1, Monthstart))
  FROM (
    SELECT
      ID         = @ID,
      RangeStart = @RangeStart,
      RangeEnd   = @RangeEnd,
      MonthStart = DATEADD(MONTH, DATEDIFF(MONTH, 0, @RangeStart), 0)
    FROM numbers
    WHERE Number BETWEEN 0 AND DATEDIFF(MONTH, @RnageStart, @RangeEnd)
  ) m
) m 
```

作为 numbers 表的临时替代品，您可以使用[`master..spt_values`system 表](https://stackoverflow.com/questions/4273723/what-is-the-purpose-of-system-table-table-master-spt-values-and-what-are-the-me "系统表 table master..spt_values 的用途是什么，其值的含义是什么？")，或者更准确地说，它的特定子集 where `type = 'P'`。所以，你可以`FROM numbers`用这个子选择替换上面的：

```
FROM (
  SELECT Number
  FROM master..spt_values
  WHERE type = 'P'
) numbers 
```

# daemon - 如何使 uwsgi --emperor 作为守护进程运行

> ID：10796241
> 
> 赞同：5
> 
> 时间：2012-05-29T09:15:55.597
> 
> 标签：daemon, uwsgi

我正在使用yaml。它有一行说：`daemonize : /var/www/apps/myapp.log`

如果`uwsgi -y vassals/myappconfig.yaml`，则网站在后台运行。我可以在终端中做其他事情，甚至注销。这是我期待的效果。

如果`uwsgi --emperor vassals`，网站可以运行，但它卡在终端。我必须用`ctrl + c`它来结束它才能返回终端。然后网站就挂了。这不是我所期待的。

我不想使用像`nohup`. 如果`uwsgi --emperor`不是正确的解决方案，我宁愿一个一个地加载网站，全部运行守护进程。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-29T10:04:45.937

你也可以传给`--daemonize <logfile>`皇帝

# linux - Jetty 没有被 Linux 上的服务脚本停止

> ID：10796242
> 
> 赞同：2
> 
> 时间：2012-05-29T09:15:56.563
> 
> 标签：linux, jetty

Jetty 8 的 tar.gz 发行版中包含的 jetty.sh 脚本似乎已损坏。

启动码头工作正常，但执行后

```
sudo ./jetty.sh stop 
```

还有一份工作。

原因是在启动过程中创建了两个进程，一个是由 jetty.sh 创建的 start.jar，还有一个。但是只记录了start.jar启动的PID。因此，在停止期间，只有这部分码头运行时进程被停止。

Stackoverflow 上有类似的问题。例如，[在一个非常简单的 upstart 脚本中提供了](https://askubuntu.com/questions/22099/want-to-make-an-upstart-script-need-help-and-advice)，它也遇到了上述相同的问题。

有谁知道如何修复脚本以便两个进程都被杀死？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T16:33:05.210

第二个进程已启动，因为您的 start.ini 正在使用“--exec”选项。

对于需要对 JVM 进行高级更改（例如指定引导类路径）的配置，这是一个高级选项。

大多数人不需要这个功能。

只需从 start.ini 中删除“--exec”即可阻止第二个进程启动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T11:02:02.100

我通过首先手动杀死所有子进程来修复脚本。这是差异：

```
--- /etc/init.d/jetty   2012-05-29 12:59:09.439511236 +0200
+++ jetty.sh    2012-05-29 12:58:13.615513127 +0200 @@ -461,11 +461,23 @@
   stop)
     echo -n "Stopping Jetty: "
     if type start-stop-daemon > /dev/null 2>&1; then
       echo $JETTY_PID

+      # FIXME: start-stop-daemon isn't killing child process
+      JETTY_PID_NO=`cat "$JETTY_PID"`
+      for child_pid in `ps -o pid --no-headers --ppid $JETTY_PID_NO`
+      do
+        kill -HUP $child_pid
+      done
       start-stop-daemon -K -p"$JETTY_PID" -d"$JETTY_HOME" -a "$JAVA" -s HUP

       TIMEOUT=30
       while running "$JETTY_PID"; do
         if (( TIMEOUT-- == 0 )); then
+          for child_pid in `ps -o pid --no-headers --ppid $JETTY_PID_NO`
+          do
+            kill -KILL $child_pid
+          done
           start-stop-daemon -K -p"$JETTY_PID" -d"$JETTY_HOME" -a "$JAVA" -s KILL
         fi 
```

# c# - 从 Nhibernate 3.3 获取 SqlConnection

> ID：10796247
> 
> 赞同：2
> 
> 时间：2012-05-29T09:16:18.833
> 
> 标签：c#, nhibernate

我想将 Pivot 与带有 nhibernate 3.3 的命名查询一起使用，并在 GridView 中使用它。

我在[NHibernate、数据透视表和/或 GetNextID()](https://stackoverflow.com/questions/2290148/nhibernate-pivot-table-and-or-getnextid)上看到我可以使用结果转换器，但我无法预测这些字段将是什么。（所以我认为 bean 是不可能的，我需要命名列）

所以最好的解决方案是使用命名查询并将其放入 DataTable 中。

有没有一种简单的方法来获取数据并将其放入 DataTable 中。一种方法是从 nhibernate 检索 SqlConnection 并使用它来检索存储过程返回的数据。但是有人怎么做？

问候

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T12:35:33.843

NHibernates ISession 接口具有`Connection`提供底层 ADO.NET 连接对象的属性。

# sql - 如何为具有多个值的列插入值？

> ID：10796251
> 
> 赞同：0
> 
> 时间：2012-05-29T09:16:33.427
> 
> 标签：sql

在大学数据库中，我有一个主题和先决条件的自引用关系。这意味着一个主题可以有 0 个或多个先决条件。

所以我在主题表中声明了它

```
 subject_code VARCHAR(7) NOT NULL CONSTRAINT subject_pk PRIMARY KEY,
 subject_name VARCHAR(50) NOT NULL,
 pre_requisite VARCHAR(7) NULL CONSTRAINT unit_pre_code FOREIGN KEY 
               REFERENCES subject(subject_code), 
```

所以我只是想知道我是否正确地朝着这个方向前进，或者是否应该有另一个表来处理先决条件。

如果我在正确的轨道上，我如何插入具有主题先决条件的数据？例如 C++（C12345）主题是操作系统（C34512）或其他东西的先决条件。我对此仍然很陌生，我很难为 SQL 寻找好的和简单的参考。任何建议也会很棒！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T11:20:09.330

您的关系是一对多的，即 1 个主题可以有许多先决条件，因此您应该使用另一个表。例如

```
CREATE TABLE SubjectPrerequisite
(       Primary_Subject_Code        VARCHAR(7) NOT NULL,
        Prerequisite_Subject_Code   VARCHAR(7) NOT NULL,
    CONSTRAINT PK_SubjectPrerequisite PRIMARY KEY (Primary_Subject_Code, Prerequisite_Subject_Code),
    CONSTRAINT FK_SubjectPrerequisite_Primary_Subject_Code FOREIGN KEY (Primary_Subject_Code) REFERENCES Subject (Subject_Code),
    CONSTRAINT FK_SubjectPrerequisite_Prerequisite_Subject_Code FOREIGN KEY (Prerequisite_Subject_Code) REFERENCES Subject (Subject_Code)
) 
```

这仍将通过拥有所有正确的键来保持您的引用完整性，但在 1 个主题具有多个先决条件的情况下，查询数据库会变得更加容易。例如

```
-- WILL RETURN ALL SUBJECTS AVAILABLE GIVEN A CERTAIN PERSONS
-- COMPLETED SUBJECTS.
SELECT  DISTINCT s.*
FROM    Subject s
        INNER JOIN SubjectPrerequisite sp
            ON s.Subject_Code = sp.Primary_Subject_Code
WHERE   sp.Prerequisite_Subject_Code IN ('C12345', 'C12346') 

-- WILL RETURN ALL PRERQUISITE SUBJECTS FOR ANY GIVEN SUBJECT
SELECT  s.*
FROM    SubjectPrerequisite sp
        INNER JOIN Subject s
            ON s.Subject_Code = sp.Prerequisite_Subject_Code
WHERE   sp.Primary_Subject_Code = 'C34512' 
```

# android - 使用 Android 2.3.3 google APIs 开发的源代码不适用于 Android 4.0.3

> ID：10796254
> 
> 赞同：0
> 
> 时间：2012-05-29T09:16:55.213
> 
> 标签：android, android-emulator

我使用 Android 2.3.3 Google apis 开发了一个 Android 应用程序。我尝试使用 Android 4.0.3 Google api 再次构建相同的源。但是当我尝试运行该应用程序时，控制台显示错误为“无法安装共享库”“检查 LogCat 以获取更多详细信息”。在“Logcat”中检查时，它显示的错误是无法找到 com.google.android.maps。任何人都可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T09:36:02.437

对于 Eclipse，您必须为每个版本分别安装 GOOGle maps api 可能是您的 Eclipse 有 Google Map api for 2.3 但不是 4.0

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T09:54:28.500

图书馆管理从 r17 更改。如果您将 ADT 更新到此版本或更高版本，请尝试以下操作：

右键单击项目 > 属性 > Java 构建 > 订购和导出

将您的库移到顶部

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T09:40:17.350

您可能忘记在 mainfest 文件中添加库。在 mainfest 文件中添加以下代码（在 Appication 标记内）

```
 <uses-library android:name="com.google.android.maps" /> 
```

# firefox - 检查用户是否安装了我的 Firefox 扩展

> ID：10796257
> 
> 赞同：-3
> 
> 时间：2012-05-29T09:17:23.760
> 
> 标签：firefox, firefox-addon, firefox-addon-sdk

有没有办法检测我的 Firefox 扩展是否已安装？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T20:32:59.853

如果您的目标是检测使用 Firefox 浏览您网站的人是否安装了您的扩展程序，请查看文档的[自定义事件](https://developer.mozilla.org/en/XUL_School/Adding_Events_and_Commands#Custom_events)部分。

你能做的是

*   加载时从您的网页触发自定义事件（例如 A）
*   从您的扩展程序监听事件 A，如果它接收到事件 A，则从您的扩展程序触发不同的事件（比如 B）
*   在您的网页中收听事件 B。如果您的网页收到事件 B，则该用户已安装您的扩展程序。

# java - thread.run() 有效，thread.start() 无效

> ID：10796264
> 
> 赞同：0
> 
> 时间：2012-05-29T09:17:48.873
> 
> 标签：java, multithreading, runnable

以下是我的主要课程。

```
public class ShareData {

    /**
     * @param args
     */
    public static void main(String[] args) {
        ShareReader aShareReader = new ShareReader("http://test.com:9000", "dilip.id@gmail.com", "password");
        Thread fileThread = new Thread(aShareReader);
        fileThread.run(); // fileThread.start() not calling the run() method
    }
} 
```

如果我键入 fileThread.run() 调用运行方法。如果我调用 fileThread.start() 则不会调用运行方法。以下是我的线程类。我不知道我做错了什么。

```
public class ShareReader implements Runnable {

    private String itsShareURL =    null;
    private String itsUserId        =   null;
    private String itsPassword      =   null;
    private String itsAuthToken     =   null;
    private String itsLoginURL      =   null;
    private String itsChannelUpateURL   =   null;

    /**
     * 
     */
    public ShareReader(String theShareURL, String theUserId, String thePassword) {
        this.itsShareURL    =   theShareURL;
        this.itsUserId          =   theUserId;
        this.itsPassword        =   thePassword;
        this.itsLoginURL        =   itsShareURL + "/v1.0-SNAPSHOT/login";
        this.itsChannelUpateURL =   itsShareURL + "/v1.0-SNAPSHOT/updateChannelSubscription/";
    }

    public void run() {
        JSONObject json;
        JSONArray jsonArray;
itsAuthToken = getToken(itsUserId, itsPassword);
    updateChannelList(itsAuthToken);

    String aURL = "http://test.com:9000/v1.0-SNAPSHOT/userTimeline/"+itsAuthToken+"/";
    try {
        String lat = null;
        String lon = null;
        String udid = null;
        String dateTime =  null;
        String eventID = null;
        aEventBean = new EventBean();
        jsonArray = readJsonArrayFromUrl(aURL);
        for (int i = 0; i < jsonArray.length(); i++) {
            json = jsonArray.getJSONObject(i);
            lat = json.getString("lat");
            lon = json.getString("lon");
            udid = json.getString("udid");
            eventID = json.getString("eventId");
            dateTime = json.getString("dateTime");
            aEventBean.setItsLatitude(lat);
            aEventBean.setItsLongitude(lon);
            aEventBean.setItsUDID(udid);
            aEventBean.setItsEventIdentifier(eventID);
            aEventBean.setItsDateTime(dateTime);
            System.out.println(udid + " ---> " +lat + " ==== " + lon);
            sendData(aEventBean);
        }
    } catch (IOException e) {
        // TODO Auto-generated catch block

        e.printStackTrace();
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
}
} 
```

对不起，如果我问这么基本的问题.. 理想情况下，我需要做 fileThread.start() 来启动一个线程.. 在此先感谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T09:33:40.107

`run()`如果您调用`start()`，肯定会调用`fileThread`. 检查您的实现`run()`- 此方法很可能在您检查打印语句之前完成或终止。仅供参考，`fileThread.run()`是顺序调用，`fileThread.start()`而是并行调用。

另一个模糊的可能性是您没有实现 Java 的可运行文件。相反，这可能是您项目中的一些自定义 Runnable 类。

**编辑：**

显然，打电话`fileThread.join()`可以帮助您解决问题，但是为什么会这样呢？如果您调用`fileThread.join()`，主线程会一直等待，直到目标（在本例中为您的`fileThread`对象）终止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T09:56:39.007

fileThread.run() 从不启动新线程。要启动一个新线程，您必须调用 fileThread.start()。

# css - 一种为不支持特定 CSS 属性的浏览器指定 CSS 规则的方法

> ID：10796273
> 
> 赞同：1
> 
> 时间：2012-05-29T09:18:12.477
> 
> 标签：css, css-selectors

我在为不支持 font-stretch 属性（webkit 等）的浏览器定义 CSS 规则时遇到问题...

问题：我正在使用 Helvetica Neue 字体（来自[Twitter Bootstrap](http://twitter.github.com/bootstrap)的 CSS 设置）并且我`font-stretch:condensed;`在一些 CSS 规则上使用了属性。不幸的是，我很快发现 Webkit 和其他浏览器不支持此属性，因此我开始寻找备用规则。

[在这里](https://stackoverflow.com/questions/5612506/how-can-i-use-helvetica-neue-condensed-bold-in-css)为 webkit 浏览器找到的一种解决方案是使用 post script font name `font-family: "HelveticaNeue-CondensedBold","Helvetica Neue",Helvetica,Arial,sans-serif;`。但它实际上只是 Mac 解决方案。Windows 浏览器将没有此字体，并将回退到非拉伸字体。

因此，使用压缩字体的唯一真正解决方案是从 myfonts.com、google webfonts 等网站导入字体……因为我正在寻找免费的解决方案，所以我发现了一些接近 Helvetica Neue Bold Condensed 的免费字体。我现在想知道有没有办法指定一个 CSS 规则只针对不支持`font-stretch`属性的浏览器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T09:32:39.663

我能想到的唯一方法是javascript特征检测：

```
if (document.createElement("detect").style.fontStretch === "") {  
    document.getElementsByTagName("html")[0].className += " fontstretch";  
} 
```

将此添加到您的`<head>`标签中。

这将为您的标签添加一个`fontstretch`类，以便您可以：`html`

1.  将 @font-face 规则设置为标准 - 这将是不支持的浏览器的后备方案`font-stretch`

2.  用作`.fontstretch`css 挂钩以将字体系列设置回`Helvetica Neue`并应用`font-stretch`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-14T20:38:29.133

当我在搜索允许您`.ie9 .yourclass` `.chrome .yourclass`在 css 文件中使用 etc 指定浏览器特定 css 的其他内容时，我遇到了一个有意义的解决方案。它使用一个小的 javascript 文件，可以在`_layout`文件或`masterpage`文件中加载..

该链接在[这里](http://rafael.adm.br/css_browser_selector/)

# oop - 设计模式——构建相似的对象

> ID：10796274
> 
> 赞同：-1
> 
> 时间：2012-05-29T09:18:13.920
> 
> 标签：oop, design-patterns

我读了一本关于设计模式的书，它给出了下一个思考问题：

我们有一些椅子，它们以相同的顺序建造（首先是腿，然后是座位等等......）。它们的形状是唯一不同的东西。

我想到了[构建器模式](http://en.wikipedia.org/wiki/Builder_pattern)，但是当我开始实现它时，我发现了一些问题。有更好的设计模式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T11:58:31.813

是的。建造者模式是要走的路。*这里的Builder*可以是与*buildLegs()*、*buildSeat()*等的接口。具体的 Builders 实现*Builder*并构建特定的 Shape *Chair*即 ShapeABuilder 返回 ShapeAChair。ShapeAChair、ShapeBhair 等可以扩展椅子。

# perl - cygwin perl 错误无法加载 expat.dll

> ID：10796275
> 
> 赞同：2
> 
> 时间：2012-05-29T09:18:14.950
> 
> 标签：perl, windows-7, cygwin, expat-parser

```
c:\>perl -de 1

Loading DB routines from perl5db.pl version 1.32
Editor support available.

Enter h or `h h' for help, or `man perldebug' for more help.

main::(-e:1):   1
  DB<1> require XML::Parser::Expat
Can't load '/usr/lib/perl5/vendor_perl/5.10/i686-cygwin/auto/XML/Parser/Expat/Expat.dll' for module XML::Parser::Expat: No such file or directory at /usr/lib
/perl5/5.10/i686-cygwin/DynaLoader.pm line 200.
 at (eval 5)[/usr/lib/perl5/5.10/perl5db.pl:638] line 2
Compilation failed in require at (eval 5)[/usr/lib/perl5/5.10/perl5db.pl:638] line 2.

  DB<2> q

c:\> 
```

有人遇到过这个吗？如何解决？我的cygwin位于`C:\cygwin`

没有目录`C:\cygwin\usr\lib`，但有`C:\cygwin\lib`. 当我打开`bash`并尝试`cd /usr/lib`它成功（令人惊讶地）并且之后`ls`似乎内容与目录相同`C:\cygwin\lib`。

也就是说，该目录`C:\cygwin\lib\perl5\vendor_perl\5.10\i686-cygwin\auto\XML\Parser\Expat`包含一个名为`Expat.dll`.

似乎 cygwin 说它找不到这个文件，但是它怎么能找到`/usr/lib/perl5/5.10/i686-cygwin/DynaLoader.pm`呢？

我试过这样做`chmod +x`，但这并不能解决问题。

有什么帮助吗？

`perl -MXML::Parser::Expat -e1`在命令行上执行返回：

```
c:\dev\trunk\src>perl -MXML::Parser::Expat -e1
Can't load '/usr/lib/perl5/vendor_perl/5.10/i686-cygwin/auto/XML/Parser/Expat/Expat.dll' for module XML::Parser::Expat: No such file or directory at /usr/lib
/perl5/5.10/i686-cygwin/DynaLoader.pm line 200.
 at -e line 0
Compilation failed in require.
BEGIN failed--compilation aborted. 
```

***编辑***：另外，当我在 cygwin bash 环境中执行相同操作时（不是直接在 cmd 中），没有错误！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T10:36:13.623

首先进入 cygwin bash shell，然后做任何我想做的事情不会给出这个错误。因此，我建议将 bat 脚本的所有 perl 命令移至 shell 脚本并使用`bash`.

# java - GL_TRIANGLE_FAN 和纹理问题

> ID：10796287
> 
> 赞同：3
> 
> 时间：2012-05-29T09:18:49.147
> 
> 标签：java, opengl, textures, primitive

我用三角扇做了半圈，代码如下：

```
 marco.bind();
    gl.glPushMatrix();
    gl.glTranslated(-3.5,2,10.51);
    gl.glBegin(gl.GL_TRIANGLE_FAN);
    for(int i = 1; i <= 9; i++){
        double x = 0.7 * Math.cos(angulo);
        double y = 0.7 * Math.sin(angulo);
        System.out.println ("Valor de X:" + x + " Valor de Y:" + y);
        gl.glTexCoord2d(x, y);gl.glVertex3d(x, y, -0.5);
    angulo += inc_angle; 
```

但是我并没有达到我想要的视觉效果，我的真实纹理是这样的：

![门纹理](../Images/6372819bd1ff68a9cdeb138625ee2267.png)

相反，我得到了这样的东西：

![真实纹理](../Images/739688344be92445d6834ba5a0c1fc98.png)

现在我得到了这个

![在此处输入图像描述](../Images/a4bdc7eab9df04be97250fac3da0c2e2.png)

我的图像有问题吗？我认为角落需要被削减。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T09:48:14.490

纹理坐标在范围内`(0,0) - (1,1)`您的对象坐标在范围内`(-0.7,-0.7) - (0.7,0.7)`。您需要将对象坐标转换为纹理上的正确坐标。

例如：

```
double x = Math.cos(angulo);
double y = Math.sin(angulo);
gl.glTexCoord2d(x*0.5+0.5, 1.0-y);
gl.glVertex3d(x*0.7, y*0.7, -0.5); 
```

# iphone - 崩溃的原因..？

> ID：10796289
> 
> 赞同：0
> 
> 时间：2012-05-29T09:18:58.110
> 
> 标签：iphone, c++, objective-c++

我对 C++ 了解不多，我正在使用其他人开发的文件在我的图像上应用 autoLocalThresholding。

这就是我调用该方法的方式..

```
UIImage *newImage = [imageProcessing resizeImage:image];
ImageWrapper *greyScale=Image::createImage(newImage, newImage.size.width, newImage.size.height);
ImageWrapper *edges=greyScale.image->autoLocalThreshold(); 
```

这是这些功能的定义..

```
ImageWrapper* Image::autoLocalThreshold() {
    const int local_size=8;
    // now produce the thresholded image
    uint8_t *result=(uint8_t*) malloc(m_width*m_height);
    // get the initial total
    int total=0;
    for(int y=0; y<local_size; y++) {
        for(int x=0; x<local_size; x++) {
            total+=(*this)[y][x];
        }
    }
    // process the image
    int lastIndex=m_width*m_height-(m_width*local_size/2+local_size/2);
    for(int index=m_width*local_size/2+local_size/2; index<lastIndex; index++) {
        int threshold=total/64;
        if(m_imageData[index]>threshold*0.9)
            result[index]=0;
        else
            result[index]=255;
        // calculate the new total
        for(int index2=index-m_width*local_size/2-local_size/2; index2<index+m_width*local_size/2-local_size/2; index2+=m_width) {
            total-=m_imageData[index2];
            total+=m_imageData[index2+local_size];
        }
    }
    return Image::createImage(result, m_width, m_height, true);
} 
```

现在这在这一行给了我一个 EXEC_BAD_ACCESS 错误..

```
 total+=(*this)[y][x]; 
```

任何人都可以解释为什么会发生这种情况以及补救措施是什么......？开源文件可在此处获得.. [https://code.google.com/p/simple-iphone-image-processing/source/browse/trunk/Classes/Image.mm?r=15](https://code.google.com/p/simple-iphone-image-processing/source/browse/trunk/Classes/Image.mm?r=15)

**而且这种情况有时并非每次都发生。** 提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T13:00:06.727

由于 OP 指出的 resize 方法的问题，对象 newImage 没有被实例化。

# android - Android 图片 - onClick

> ID：10796291
> 
> 赞同：0
> 
> 时间：2012-05-29T09:19:09.420
> 
> 标签：android, android-layout

我不喜欢使用按钮的原因是背景图像会调整大小，而使用 imageview 会使它们保持原样。但是这样做让我想知道这是否是一种在聚焦方面提供界面的好方法。我的意思是 ImageView 获得焦点和 TextView 之间有什么区别吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T09:26:13.523

我也大多使用`ImageView`，而不是`ImageButton`我从来没有任何问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T09:24:09.520

您可以尝试使用 ImageButton ...

您将能够使用与 ImageView 相同的属性。

这是[有关此的文档。](http://developer.android.com/reference/android/widget/ImageButton.html)

# java - 如何从字符串中获取“1.2”格式的字符串？

> ID：10796292
> 
> 赞同：0
> 
> 时间：2012-05-29T09:19:18.217
> 
> 标签：java, string, substring

我正在使用 Java 字符串。我的问题是我有一串“1.500000154”。如何从原始“1.500000154”字符串中获得结果字符串“1.5”？

1.500000154 >>>>>>>> 1.5

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T09:21:20.453

```
BigDecimal bigDecimal = new BigDecimal("1.500000154");
bigDecimal.setScale(1, BigDecimal.ROUND_HALF_UP)
String result  - bigDecimal.toString(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T09:27:31.037

这也对我有用：

```
String str = "1.5000000154";
DecimalFormat df = new DecimalFormat("##.#");
System.out.println(df.format(Double.parseDouble(str))); 
```

印刷：

> 1.5

可以在[此处](http://docs.oracle.com/javase/7/docs/api/java/text/DecimalFormat.html)获得有关十进制格式的更多信息。如果有需要，这也需要进行汇总。例如，`1.5900000154`, 将导致`1.6`.

# find - 查找文件名中包含非 ASCII 字符的文件

> ID：10796297
> 
> 赞同：-1
> 
> 时间：2012-05-29T09:19:42.407
> 
> 标签：find, non-ascii-characters

有没有办法可以`find`使用非 ascii 字符进行归档？我当然可以使用管道 - 并使用 perl 过滤文件，但为了提高效率，我想将其全部设置为`find`. 我尝试了以下方法：

```
find . -type f -name '*[^[:ascii:]]*' 
```

它根本不起作用。

**编辑**：

我现在正在尝试利用

```
find . -type f -regex '.*[^[:ascii:]].*' 
```

它是一个 emacs 正则表达式，它有`[:ascii:]`类。但是我尝试使用的表达式不起作用。

**编辑 2**：

```
LC_COLLATE=C find . -type f -regex '.*[^!-~].*' 
```

匹配具有非 ascii 字符的文件（一个完整的巫术......）。但也匹配名称中带有空格的文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T20:56:52.647

这似乎在默认模式和 posix 扩展模式下都适用于我：

```
LC_COLLATE=C find . -regex '.*[^ -~].*' 
```

不过，可能存在与语言环境相关的问题，而且我没有大量的非 ascii 文件名来测试它，但它可以捕捉到我拥有的那些。

# android - 如何在没有 lsof 的情况下检查打开的文件

> ID：10796298
> 
> 赞同：12
> 
> 时间：2012-05-29T09:19:43.650
> 
> 标签：android, lsof

在linux中，我使用lsof来检查文件是由哪个进程打开的。我有一个 android 设备，但没有 lsof 命令。是否可以找到打开特定文件的进程？

我将使用它来验证 MediaPlayer 是否持有 fd，但它应该被关闭。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-25T13:15:51.937

穷人的lsof就是执行

```
ls -l  /proc/[process id]/fd 
```

不过，您需要成为root用户。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-09-21T23:40:21.170

感谢 mike jones 和 Joqn 提供穷人 lsof 的小费。我在下面的busybox（synology nas）上使用它来列出分组在每个进程下的fd目录：

```
 for p in [0-9]*; do ls -l /proc/$p/fd ;done 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T09:20:36.860

安装busybox，它有一个lsof 命令。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-12-16T09:48:25.120

结合上面的 /proc 和[这个](https://stackoverflow.com/questions/8513133/how-do-i-find-all-of-the-symlinks-in-a-directory-tree/21438684)关于在目录树中搜索符号链接的问题的答案，可以得到以下结果：

```
# find /proc -ignore_readdir_race -name task -prune -o -path '*/fd/*' -lname '/file/of/interest' -ls -quit
 37023    0 l-wx------   1 username  username        64 Dec 16 09:06 /proc/4140/fd/1 -> /file/of/interest 
```

`-ignore_readdir_race`避免了由于短期流程导致的错误，消除`-prune`了任务级别的结果（在第一个流程停止时并非绝对必要，因为这些路径仍然会给出相同的答案，但对于避免其他用例中的冗余很有用，例如列出所有结果）

结合`-print`直接`cut`提取pid：

```
# find /proc -ignore_readdir_race -name task -prune -o -path '*/fd/*' -lname '/file/of/interest' -print -quit | cut -d / -f 3
4140 
```

获得 pid 后，您可以使用 ps 获取进程详细信息（根据[此 SuperUser question](https://superuser.com/questions/632979/if-i-know-the-pid-number-of-a-process-how-can-i-get-its-name)的答案）：

```
# ps -p 4140 -o command=
/some/command --with=some args 
```

（注意，我在 Linux 上对此进行了测试，它在 BSD 上应该也能正常工作，但我对 Android 不是 100% 确定）

# javascript - 使用 jQuery 的 jCal

> ID：10796302
> 
> 赞同：2
> 
> 时间：2012-05-29T09:19:53.667
> 
> 标签：javascript, jquery, calendar

我已经下载[了 jCal 插件](http://www.overset.com/2008/05/12/multiday-calendar-datepicker-jquery-plugin/)。这是一个非常有趣的插件。所以我的问题是，当我选择日期时，我只在输出中输入范围的开始日期，例如 23/05/2012，我不知道如何获取范围的最后日期。

它执行以下代码：

```
var dCursor = new Date( day.getTime() );

for (var di=0; di < days; di++) {

   var currDay = $(this._target).find('[id*=d_' + ( dCursor.getMonth() + 1 ) + '_' + dCursor.getDate() + '_' + dCursor.getFullYear() + ']');

   if (currDay.length) currDay.append('<div class="dInfo"><span style="color:#ccc"></span>SELECTED</div>');

   dCursor.setDate( dCursor.getDate() + 1 );
} 
```

然后我得到这段代码输出的第一个日期：

```
( day.getMonth() + 1 ) + '/' + day.getDate() + '/' + day.getFullYear() + '</div>'); 
```

我是 javascript 的初学者，所以如果有人知道解决方案。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T12:13:28.920

好的，我解决了。

解决方案非常简单。

enddate.setDate(dCursor.getDate() + days);

( enddate.getMonth() + 1) + '/' + ( enddate.getDate() - 1 ) + '/' + enddate.getFullYear()

# jquery - jQuery 可排序和自定义滚动条

> ID：10796303
> 
> 赞同：1
> 
> 时间：2012-05-29T09:20:02.237
> 
> 标签：jquery, html, css

我在我的 webapp 中使用自定义滚动条，但我有以下问题：

[http://jsfiddle.net/PVZB8/3056](http://jsfiddle.net/PVZB8/3056)

正如您所看到的，当您将项目拖出列表时，它是不可见的。我需要让它可见并成为原始项目，因为我有动画触发器绑定到它。

如果您检查此内容，您可以了解更多我正在尝试做的事情： [jQuery sortable with overflow: hidden; 在两个列表之间](https://stackoverflow.com/questions/10772129/jquery-sortable-with-overflow-hidden-between-two-lists)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T23:31:31.437

[http://jsfiddle.net/PVZB8/3089/](http://jsfiddle.net/PVZB8/3089/)

这与上一个解决方案几乎相同，因此我将尝试对其进行分解并为您解释一下：

appendTo 选项设置为“BODY”，因此它不在列表维度的范围内，并且在将其拖到列表之外时隐藏。

因为可拖动对象在被拖动时附加到主体，所以它不再是您的`UL`样式的一部分。这就是为什么我将额外的类添加到`LI`s

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-16T15:25:13.137

我知道这张票有点过时了，但是我在使用自定义滚动条解决方案并尝试在隐藏溢出的情况下在 Sortable 之间拖动时遇到了同样的问题。在添加代码以修复 Sortable 以使用我的 Scrollpane 后，我注意到 appendTo 功能似乎有遗漏。

*appendTo*的代码仅在 DOM 中不存在帮助器时将其附加到目标。这就是为什么克隆选项适用于某些人（但不适用于所有人，我不会在这里讨论）。修复它的关键是将此代码添加到小部件的*_mouseStart*函数的末尾：

```
if (!this.helper.parent().is(this.appendTo)) {
    this.helper.detach().appendTo(this.appendTo);
    // update position
    this.offset.parent = this._getParentOffset();
} 
```

注意*this.appendTo*是在函数的前面设置的：

```
this.appendTo = $( o.appendTo !== "parent" ?
        o.appendTo :
        this.currentItem.parent() ); 
```

完整的修复，包括其他流修复，可在此处提供的 jQuery-UI-ScrollPane 的可滚动排序 JS 文件中找到： [https](https://github.com/borgboyone/jQuery-UI-ScrollPane) ://github.com/borgboyone/jQuery-UI-ScrollPane 。（注意：这个修复已经通过 pull-request 提供给 jQuery-UI 项目。）

干杯!

# ember.js - 如何删除 ArrayController (Ember) 的内容数组中的元素

> ID：10796307
> 
> 赞同：11
> 
> 时间：2012-05-29T09:20:34.137
> 
> 标签：ember.js

我有一个模型：

```
TestModel = Em.Object.create({
    id:'',
    name:''
}) 
```

和一个对象 ArrayController 像：

```
testArrayController = Em.ArrayController.create({
    content: [],
    init: function() {
        //push some object TestModel
    }
}); 
```

我想删除一些对象，这取决于内容数组中对象的 id 属性。怎么做？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-29T09:33:46.187

我会使用 and 的组合[`findProperty`](http://emberjs.com/api/classes/Ember.Enumerable.html#method_findProperty)，[`removeObject`](http://emberjs.com/api/classes/Ember.MutableEnumerable.html#method_removeObject)请参阅[http://jsfiddle.net/pangratz666/rXN4E/](http://jsfiddle.net/pangratz666/rXN4E/)：

```
App.testArrayController = Em.ArrayController.create({
    content: [],

    removeItem: function(propName, value){
        var obj = this.findProperty(propName, value);
        this.removeObject(obj);
    }
});

App.testArrayController.removeItem('id', 42); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-17T11:41:32.367

我有一种情况，我有一个表格，每行旁边都有一个复选框。

我想删除单击按钮时选择的每一行。

每个复选框都绑定到项目控制器上的 isSelected 属性。

我使用[removeObjects](http://emberjs.com/api/classes/Ember.ArrayController.html#method_removeObjects)和 filterProperty 函数来删除项目：

```
this.removeObjects(this.filterProperty('isSelected')); 
```

这是一个带有示例的[jsbin 。](http://jsbin.com/erIfAkU/9/edit?html,js,output)

这些是重要的位：

```
App.IndexController = Ember.ArrayController.extend({
  itemController: 'IndexItem',
  actions: {
    removeSelected: function() {
      this.removeObjects(this.filterProperty('isSelected'));
    }
  }
});

App.IndexItemController = Ember.ObjectController.extend({
  isSelected: true
}); 
```

# asp.net - 错误：必须声明标量变量“@data”

> ID：10796310
> 
> 赞同：5
> 
> 时间：2012-05-29T09:20:50.300
> 
> 标签：asp.net

执行时出现错误`cmd.ExecuteNonQuery()`，提示必须声明标量变量：

```
OleDbCommand cmd = new OleDbCommand();
cmd.Connection = Connection;
cmd.CommandTimeout = 0;

string commandText = "update groups set subjectline ='" +    txtSubjectLine.Text + "',data= @data where groupid = " + ddlGroup.SelectedItem.Value + " ";
cmd.CommandText = commandText;
cmd.CommandType = CommandType.Text;

cmd.Parameters.Add("@Data",OleDbType.VarBinary);
cmd.Parameters["@Data"].Value = binarydata;               
cmd.ExecuteNonQuery(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T10:19:12.300

代替

```
string commandText = "update groups set subjectline ='" +    txtSubjectLine.Text + "',data= @data where groupid = " + ddlGroup.SelectedItem.Value + " "; 
```

和

```
string commandText = "update groups set subjectline ='" +    txtSubjectLine.Text + "',data= ? where groupid = " + ddlGroup.SelectedItem.Value + " "; 
```

也就是说，将“@data”替换为“？” 在命令文本中。这就是您使用 OleDbCommand 指定参数占位符的方式。

* * *

以下是编辑后的原文：

```
OleDbCommand cmd = new OleDbCommand();
cmd.Connection = Connection;
cmd.CommandTimeout = 0;

cmd.CommandText = "update groups set subjectline ='" + txtSubjectLine.Text + "', data = ? where groupid = " + ddlGroupSelectedItem.Value;
cmd.CommandType = CommandType.Text;

cmd.Parameters.Add("p1", OleDbType.VarBinary);
cmd.Parameters["p1"].Value = binarydata;

cmd.ExecuteNonQuery(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T09:39:58.257

此链接显示了有关如何使用 .Write 将二进制数据更新为表的已接受答案

[http://social.msdn.microsoft.com/forums/en-US/adodotnetdataproviders/thread/dc1b053d-f0d5-48f8-ad82-fb6d96d27f80](http://social.msdn.microsoft.com/forums/en-US/adodotnetdataproviders/thread/dc1b053d-f0d5-48f8-ad82-fb6d96d27f80)

如果这不能解决您的问题，请继续阅读以下内容：

您在声明变量@Data 时使用了变量@data，两者的情况不同。

在某些条件下，TSQL 中的变量名可能区分大小写，例如，如果使用区分大小写的排序规则安装了 MS Sql 服务器，那么即使数据库具有不区分大小写的排序规则，表、列、变量名也会区分大小写。

有关详细信息，请参阅以下链接。

[SQL Server 中区分大小写的变量](https://stackoverflow.com/questions/6559254/case-sensitive-variables-in-sql-server)

[SQL 语法是否区分大小写？](https://stackoverflow.com/questions/153944/is-sql-syntax-case-sensitive)

# selenium-ide - Selenium IDE 能够使用“查找”按钮查找元素，但无法单击

> ID：10796313
> 
> 赞同：2
> 
> 时间：2012-05-29T09:21:09.327
> 
> 标签：selenium-ide

我是 Selenium 的新手，我录制的脚本生成了`//td[@id='_t6q2md']/div/div`一个按钮的代码。当我使用查找按钮时，它会突出显示该按钮，但是当我运行脚本时它不会失败，但它也不会单击该按钮。

日志显示：

```
[info] Executing: |clickAt |//td[@id='_t6q2md']/div/div | | 
```

我尝试了各种 xpath，但似乎没有任何效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T15:04:51.003

我离成为 Selenium 专家还很遥远，但对 Selenese 有一些经验，并且测试是用纯 html 编写的。我没有使用 Selenium IDE，除了命令参考，但是使用 Selenium 1 html 测试套装，当某些东西不能像这样正常工作时，这是一个常见的问题。至于我，我曾经找到解决方法，比如使用不同的命令或“runScript”命令，如果没有其他帮助的话。例如，您可以尝试“mouseUp”或“mouseDown”命令而不是“click”。或者你可以这样尝试：

```
<tr>
    <td>runScript</td>
    <td>
        var ev = document.createEvent('MouseEvents');
        ev.initMouseEvent('click', true, true, window, 0, 0, 0, 0, 0, false, false, true, false, 0, null);
        document.querySelector('#_t6q2md div div').dispatchEvent(ev);
    </td>
    <td></td>
</tr> 
```

# visual-studio-2010 - 将 Visual Studio 2008 转换为 Visual Studio 2010 时出现问题

> ID：10796316
> 
> 赞同：1
> 
> 时间：2012-05-29T09:21:19.060
> 
> 标签：visual-studio-2010

**错误 2902 类型“Microsoft.Windows.Design.PropertyEditing.PropertyValue”同时存在于“c:\Program Files\Microsoft Visual Studio 9.0\Common7\IDE\PublicAssemblies\Microsoft.Windows.Design.dll”和“c:\Program”中文件\Microsoft Visual Studio 10.0\Common7\IDE\PublicAssemblies\Microsoft.Windows.Design.Interaction.dll'**

我该如何解决？

# crystal-reports - 水晶报告图像不起作用

> ID：10796322
> 
> 赞同：1
> 
> 时间：2012-05-29T09:21:39.313
> 
> 标签：crystal-reports, report

目前我在 **C:\inetpub\wwwroot\aspnet_client\system_web\2_0_50727\CrystalReportWebFormViewer3\js中有 js 文件**

甚至我的应用程序文件夹中带有**aspnet_client\system_web\2_0_50727\CrystalReportWebFormViewer3\js**的 aspnet_client 文件夹，但是当我使用水晶报表时，报表是可见的，甚至报表查看器上的图像也是可见的，但当我单击**打印**/**导出**或刷新显示一个空白页面。

我在 IIS 中映射了**aspnet_client**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T19:19:28.727

您需要将所有文件从以下文件夹复制到 IIS aspnet_client 文件夹

C:\Program Files\Business Objects\Common\2.8\bin\

# c# - 属性是否具有波动性影响？

> ID：10796328
> 
> 赞同：13
> 
> 时间：2012-05-29T09:22:03.337
> 
> 标签：c#, multithreading, concurrency

在下面的代码中将`read1`始终等于`read2`，提供的属性`Flag`可以从其他线程更改吗？这里担心的是`Flag`可能会被内联。

```
private bool Flag {get; set;}

public void MultithreadedMethod()
{
    var read1 = Flag;

    /* some more code */

    var read2 = Flag;    
} 
```

**UPD**：其他一些线程可能会在执行`Flag`期间更改 ' 值。`/* some more code */`在这种情况下`read1`应该不同于`read2`. 会*一直*这样吗？尽管事实在读取之间发生了变化，但内联不会将属性变成一个非易失性字段，这将导致`read1`等于？`read2``Flag`

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-29T10:28:05.147

不，属性不是`volatile`。

虽然我无法为您的初始场景获得令人满意的演示，但这种替代方法应该很好地证明了该陈述：

```
class Program
{
    public bool Flag { get; set; }

    public void VolatilityTest()
    {
        bool work = false;
        while (!Flag)
        {
            work = !work; // fake work simulation
        }
    }

    static void Main(string[] args)
    {
        Program p = new Program();
        var t = new Thread(p.VolatilityTest);
        t.Start();
        Thread.Sleep(1000);
        p.Flag = true;
        t.Join();
    }
} 
```

在发布模式下构建它会使程序死锁，因此证明它`Flag`没有易失性行为（即它在读取之间得到“优化”）。

替换`public bool Flag { get; set; }`为`public volatile bool Flag;`将使程序正确终止。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T09:25:14.383

是的，它可以自然地改变。

即使在提供的代码中，也不能保证`read1`等于`read2`.

考虑到同时`/* some more code */`执行，`Flag`可能会受到其他线程的影响。

**编辑**

and的相等性`read1`与`read2`内联与否无关，`Flag`是 a `bool`，所以它是一个值类型。所以

*   `var read1 = Flag;`//假设read1 TRUE
*   `Flag = False`
*   `var read2 = Flag;`//read2 为 FALSE，但 read1 仍为 TRUE

这在**非**多线程环境中也有效，因为您在值类型上进行操作。

如果这不是您要的，请澄清。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T09:26:09.700

如果可以从其他线程更改 Flag，则不能保证 read1 和 read2 会相同。您必须在代码周围使用监视器/互斥锁，并确保标志设置器也尊重该互斥锁。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-29T09:58:21.087

总结其他回复，在这种情况下，无法预测代码执行后两个变量的值会发生什么。既因为 CLR 和编译器对我们来说很大程度上是黑匣子，也因为任何关于竞争条件结果的预测实际上都是一场赌博，在某些时候肯定是错误的。

无论如何，您不能在多线程环境中编写此类代码。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-23T09:59:35.010

汽车产业缺乏波动性是令人失望的。我发现当使用带有 [StructLayout(LayoutKind.Sequential, Pack = 4)] 和 Marshal.PtrToStructure 的结构时，如果使用自动属性，字节布局不会按预期保留。我所做的是使用私有支持字段并将属性放在最后。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-05-29T09:30:40.157

根据[文档](http://msdn.microsoft.com/en-us/library/x13ttww7%28v=vs.71%29.aspx)

> volatile 关键字表示一个字段可以在程序中被操作系统、硬件或并发执行的线程等东西修改。... **使用 volatile 修饰符可确保一个线程检索另一个线程写入的最新值。**

# objective-c - 什么是 kCFErrorDomainCFNetwork？

> ID：10796332
> 
> 赞同：1
> 
> 时间：2012-05-29T09:22:22.493
> 
> 标签：objective-c, ios, xcode, get, nsurlerrordomain

在我发布的最后一个问题中，当我使用 GET 方法将 JSON 字符串附加到我的 URL 时，我得到了一个 NSURLErrorDomain。现在，有人指出我应该对整个 JSON 字符串进行百分比编码，以便它与 URL 兼容。然而，当我这样做时，我收到了另一种错误：kCFErrorDomainCFNetwork 代码 303。我对此进行了研究，不幸的是我找不到这个错误的合适解释。我对这个错误的理解最接近的是，我似乎正在向服务器发送大量内存。

任何人都可以给我一个很好和简单的解释吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T10:22:37.560

我不确定您的具体错误的详细信息，但根据 Apple 文档

```
kCFErrorHTTPParseFailure      = 303 
```

所以看起来服务器不理解编码 - 也许是 JSON 字符串的某些部分应该受到指责。不看 JSON 字符串，我只是在猜测 :-)

[关于百分比编码的 Wiki](http://en.wikipedia.org/wiki/Percent-encoding)

# mysql - 描述一条sql语句返回

> ID：10796340
> 
> 赞同：1
> 
> 时间：2012-05-29T09:23:18.060
> 
> 标签：mysql, sql

我正在寻找相当于

```
DESCRIBE USERS; 
```

对于 sql 语句，例如：

```
SELECT id,name,md5(password) FROM USERS 
```

主要是因为我对返回的数据类型感兴趣。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T09:27:58.393

怎么样：

```
select column_name,data_type, character_maximum_length, numeric_precision 
from information_schema.columns 
where table_name = 'USERS'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T09:29:41.083

解决方法：

```
CREATE TEMPORARY TABLE temp SELECT id,name,md5(password) FROM USERS;
DESCRIBE temp;
DROP TEMPORARY TABLE temp; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T09:34:35.977

这

```
SELECT * FROM INFORMATION_SCHEMA.COLUMNS where TABLE_SCHEMA = 'schema' and TABLE_NAME = 'table' 
```

返回大量信息。

```
desc  INFORMATION_SCHEMA.COLUMNS
+--------------------------+---------------------+------+-----+---------+-------+
| Field                    | Type                | Null | Key | Default | Extra |
+--------------------------+---------------------+------+-----+---------+-------+
| TABLE_CATALOG            | varchar(512)        | YES  |     | NULL    |       |
| TABLE_SCHEMA             | varchar(64)         | NO   |     |         |       |
| TABLE_NAME               | varchar(64)         | NO   |     |         |       |
| COLUMN_NAME              | varchar(64)         | NO   |     |         |       |
| ORDINAL_POSITION         | bigint(21) unsigned | NO   |     | 0       |       |
| COLUMN_DEFAULT           | longtext            | YES  |     | NULL    |       |
| IS_NULLABLE              | varchar(3)          | NO   |     |         |       |
| DATA_TYPE                | varchar(64)         | NO   |     |         |       |
| CHARACTER_MAXIMUM_LENGTH | bigint(21) unsigned | YES  |     | NULL    |       |
| CHARACTER_OCTET_LENGTH   | bigint(21) unsigned | YES  |     | NULL    |       |
| NUMERIC_PRECISION        | bigint(21) unsigned | YES  |     | NULL    |       |
| NUMERIC_SCALE            | bigint(21) unsigned | YES  |     | NULL    |       |
| CHARACTER_SET_NAME       | varchar(32)         | YES  |     | NULL    |       |
| COLLATION_NAME           | varchar(32)         | YES  |     | NULL    |       |
| COLUMN_TYPE              | longtext            | NO   |     | NULL    |       |
| COLUMN_KEY               | varchar(3)          | NO   |     |         |       |
| EXTRA                    | varchar(27)         | NO   |     |         |       |
| PRIVILEGES               | varchar(80)         | NO   |     |         |       |
| COLUMN_COMMENT           | varchar(255)        | NO   |     |         |       |
+--------------------------+---------------------+------+-----+---------+-------+ 
```

# xslt - 如何处理链接到另一个 xml 的 xml，并在给定元素下复制整个 xml 结构

> ID：10796341
> 
> 赞同：3
> 
> 时间：2012-05-29T09:23:18.753
> 
> 标签：xslt, xpath, xslt-1.0

我正在研究 XSLT，我必须在两个 xml 之间遍历并将整个 xml 复制到任何给定标签下。

主要 XML：

```
 <Content xmlns="some name space">
    <message>abcd/<message>
    <group xlink:href="Some link"></group>

    </Content> 
```

链接的 XML：

```
 <Content xmlns="linked xml name space">

        <text>
                <strong xmlns="http://www.w3.org/1999/xhtml">Hello</strong>

                    <br xmlns="http://www.w3.org/1999/xhtml"></br>

            1\. Hi

                    <br xmlns="http://www.w3.org/1999/xhtml"></br>

            2\. Hi all

                    <br xmlns="http://www.w3.org/1999/xhtml"></br>

            3\. Bye
        </text>
    </Content> 
```

我想在给定的 xml 元素下获取整个 xml 结构。

所需的输出。

```
 <AAA>
        <msg>abcd</msg>
        <data>
            <strong xmlns="http://www.w3.org/1999/xhtml">Hello</strong>

                <br xmlns="http://www.w3.org/1999/xhtml"></br>

        1\. Hi

                <br xmlns="http://www.w3.org/1999/xhtml"></br>

        2\. Hi all

                <br xmlns="http://www.w3.org/1999/xhtml"></br>

        3\. Bye
        </data>
    </AAA> 
```

XSLT 写道：

```
 <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:msxsl="urn:schemas-microsoft-com:xslt" xmlns:simple="some name space" xmlns:link="linked xml name space" xmlns:xlink="http://www.w3.org/1999/xlink"  xmlns:xh="http://www.w3.org/1999/xhtml">
          <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes" />
          <xsl:output method="xml" indent="yes" omit-xml-declaration="yes" />
            <xsl:template match="/">
            <xsl:apply-templates />
          </xsl:template>

           <xsl:template match="simple:Content">
           <AAA>
                <msg>
                      <xsl:apply-templates select="simple:key" />
                </msg>
                <xsl:variable name="LINKED_COMPONENT" select="simple:group/document(@xlink:href)" />

                <data>
                    <xsl:apply-templates select="$LINKED_COMPONENT//link:text"/>
                </data>
            </AAA>
         </xsl:template>

            <xsl:template match="*">
            <xsl:copy>
              <!-- descend -->
              <xsl:apply-templates />
            </xsl:copy>
          </xsl:template>

          </xsl:stylesheet> 
```

输出得到：

```
 <AAA>
            <msg>abcd</msg>
            <data>
               <text xmlns="linked xml name space">
                <strong xmlns="http://www.w3.org/1999/xhtml">Hello</strong>

                    <br xmlns="http://www.w3.org/1999/xhtml"></br>

            1\. Hi

                    <br xmlns="http://www.w3.org/1999/xhtml"></br>

            2\. Hi all

                    <br xmlns="http://www.w3.org/1999/xhtml"></br>

            3\. Bye
            </text>
            </data>
        </AAA> 
```

“文本”标签也复制到这里。我不想复制那些标签。

任何人都可以帮我纠正它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T13:02:25.930

**只需更改**：

```
<xsl:apply-templates select="$LINKED_COMPONENT//link:text"/> 
```

**至**：

```
<xsl:apply-templates select="$LINKED_COMPONENT//link:text/node()"/> 
```

# datatable - 使检票口数据表的整行可点击

> ID：10796342
> 
> 赞同：9
> 
> 时间：2012-05-29T09:23:25.537
> 
> 标签：datatable, wicket, clickable

是否可以使 Wicket DataTable 的整行可点击？如果是这样，怎么办？我已经看到了如何通过扩展 PropertyColumn 类来使单元格可点击的示例，这相当容易，但无法为整行找到简单的解决方案。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-29T19:46:43.553

这做的工作。

```
//override this method of the DataTable class
@Override
protected Item<T> newRowItem(String id, int index, final IModel<T> model) {

    Item<T> rowItem = new Item<T>(id, index, model);
    rowItem.add(new AjaxEventBehavior("onclick") {

        private static final long serialVersionUID = 6720512493017210281L;

        @Override
        protected void onEvent(AjaxRequestTarget target) {
        //callback or do some stuff
        }

    }); 
    return rowItem;

} 
```

# android - 在android中将图像从图库移动到服务器

> ID：10796349
> 
> 赞同：1
> 
> 时间：2012-05-29T09:23:52.537
> 
> 标签：android, image-gallery, image-uploading

我在 android 中有一个用于捕获图像然后将它们保存到 Emualtor 画廊 Fine.But 的应用程序。但是当我从手机捕获它们时，我必须将画廊中的所有照片移动到服务器，它们应该自动上传到服务器并从画廊中删除，即想要移动图像到服务器。请告诉我如何从图库中选择所有图像，然后将它们移动到服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T10:08:49.663

调用相机

```
String fileName = String.valueOf(System.currentTimeMillis()) + ".jpg";
ContentValues values = new ContentValues();
values.put(MediaStore.Images.Media.TITLE, fileName);
mCapturedImageURI = getContentResolver().insert(
MediaStore.Images.Media.EXTERNAL_CONTENT_URI, values);
Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
cameraIntent.putExtra(MediaStore.EXTRA_OUTPUT, mCapturedImageURI);
startActivityForResult(cameraIntent, 1234); 
```

处理图像

```
@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
if (resultCode == Activity.RESULT_OK && requestCode == 1234) {
String filepath = getPathfromUri(mCapturedImageURI);
//Now you have the file path. upload it to server.
//uploadtoserver(filepath);
//Now delete it after uploading 
new File(filepath).delete();
}
} 
```

将 Uri 转换为实际路径的方法

```
public String getPathfromUri(Uri uri) {
String[] projection = { MediaStore.Images.Media.DATA };
Cursor cursor = managedQuery(uri, projection, null, null, null);
startManagingCursor(cursor);
int column_index = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
cursor.moveToFirst();
String path= cursor.getString(column_index);
cursor.close();
return path;
} 
```

# java - 我应该选择 == 还是 eq 来比较 EL 中的字符串？

> ID：10796350
> 
> 赞同：48
> 
> 时间：2012-05-29T09:24:02.770
> 
> 标签：java, jakarta-ee, el, websphere-8

`==`并`eq`使用 EL 给出相同的结果来进行我的字符串比较测试：

```
 <c:if test="${person.sokande_i == 'endast_usa'}">Endast USA</c:if>
    <c:if test="${person.sokande_i == 'alla'}">Alla länder</c:if>
    <c:if test="${person.sokande_i == 'alla_utom_usa'}">Alla utom USA</c:if> 
```

我应该`eq`改用吗？`==`仅适用于整数吗？但它也适用于字符串。AFAIK`==`测试 hashCodes 是否相等并且`eq`意味着“有意义的不同”。

另一个[问题](https://stackoverflow.com/questions/8355675/comparing-strings-in-el)说`==`和`eq`做同样的事情。

这里没有区别吗？这不是我所说的区别：`==`查看 hashCode 并`eq`查看`equals(...)`.

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-05-29T09:28:05.863

他们都是一样的。我`eq`在 EL 中使用，因为它像句子一​​样更具可读性。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2014-12-29T11:49:45.617

根据[文档](http://docs.oracle.com/javaee/6/tutorial/doc/bnaik.html)，这是同一件事

> 除了 . 和 [] 运算符在值和方法表达式中讨论，EL 提供了以下运算符，它们只能在右值表达式中使用：
> [...]
> **关系**：**==、eq**、!=、ne、<、lt、>、 gt、<=、ge、>=、le。可以与其他值或布尔、字符串、整数或浮点文字进行比较。

但是有一个区别：像这样的字符串运算符`eq, ne, lt, gt, ge, le`存在，因为它们是 XML 安全的，它们不需要像`<=`例如那样被转义。

[这里](http://www.java-samples.com/showtutorial.php?tutorialid=550)解释了

> EL 的一个有用特性是能够在数字或对象之间进行比较。此功能主要用于自定义标记属性的值，但同样可用于将比较结果（真或假）写入 JSP 页面。EL 提供以下比较运算符：
> 
> • == 或 eq
> • != 或 ne
> • < 或 lt
> • > 或 gt
> • <= 或 le
> • >= 或 ge
> 
> 每个运算符的第二个版本的存在是为了避免在 JSP XML 语法中使用实体引用；但是，操作员的行为是相同的。

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2012-05-29T09:33:00.390

两者都是一样的。两者都`==`将`eq` 产生以下代码：

```
jspContext.findAttribute("person.sokande_i").equals("endast_usa") 
```

对于 EL

```
${person.sokande_i == 'endast_usa'} 
```

# php - 是否有一个函数可以计算数组中不同值的多次出现？

> ID：10796351
> 
> 赞同：-2
> 
> 时间：2012-05-29T09:24:03.637
> 
> 标签：php

> **可能重复：**
> [用给定值计算数组中值的数量](https://stackoverflow.com/questions/1317612/count-number-of-values-in-array-with-a-given-value)

假设我有一个数组水果：

```
$fruits = array("apple", "apple", "apple", "banana", "banana", "strawberry"); 
```

我想将此数组转换为数组计数：

```
$count = array("apple" => 3, "banana" => 2, "strawberry" => 1); 
```

归档这个最简单的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T09:27:35.447

试试这个 ：

```
$count = array_count_values($fruits) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T09:28:01.700

嘿那里，

您可以使用[array_count_values](http://us2.php.net/manual/en/function.array-count-values.php)

```
<?php
     $array = array(1, "hello", 1, "world", "hello");
     print_r(array_count_values($array));
?>

    Array
(
    [1] => 2
    [hello] => 2
    [world] => 1
) 
```

# jquery - 提供旧数据的 JQuery 函数

> ID：10796352
> 
> 赞同：0
> 
> 时间：2012-05-29T09:24:07.533
> 
> 标签：jquery

我有以下 JQuery，它允许用户选择/取消选择项目/价格列表作为创建自动报价的一种方式。代码如下所示：

```
$('table.products > tbody > tr').click(function(){
    if ($(this).find('div.price').is(":visible")) {
        $(this).find('div.price, img.selected').fadeOut(100);
    } else {
        $(this).siblings('div.price, img.selected').fadeIn(100);                    
    }
    recalc();
}); 
```

它实际上比这更复杂（因此我没有使用的原因，`toggle()`但以上只是这个问题的简化示例。

无论如何，上面的代码工作正常。如果单击表格行，则选择/取消选择价格和图像，具体取决于价格是否已经显示。

然后我调用了一个`recalc();`最后调用的函数。它看起来像这样（同样，这是一个简化版本）：

```
function recalc() {
    var numOfProducts = $('table.products div.price:visible').length;
    alert(numOfProducts);
} 
```

我在这里遇到的问题是警报总是返回在任何更改之前都是正确的值。

例如，如果没有`div.price`可见并且我选择了一个，则一个将变为可见但警报显示`0`。然后，如果我选择另一个，这会使 2 可见，但仅显示警报`1`，因为这就是我单击时的样子。如果我然后单击我已经单击的项目之一以取消选择它，它将显示`2`

所以，我的问题是我应该如何确保函数调用在其他所有事情都完成之后发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T09:26:15.057

这是因为`recalc()`在动画完成之前被调用，因此元素仍然可见。

你有两个选择。首先是摆脱动画：

```
$('table.products > tbody > tr').click(function(){
    if ($(this).find('div.price').is(":visible")) {
        $(this).find('div.price, img.selected').hide();
    } 
    else {
        $(this).siblings('div.price, img.selected').show();                    
    }
    recalc();
}); 
```

The second is to call `recalc()` in the callback of each fade, so that it happens after the animation is complete:

```
$('table.products > tbody > tr').click(function(){
    if ($(this).find('div.price').is(":visible")) {
        $(this).find('div.price, img.selected').fadeOut(100, recalc);
    }
    else {
        $(this).siblings('div.price, img.selected').fadeIn(100, recalc);                    
    }        
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T03:40:16.277

I have come to the conclusion that my approach is completely wrong. I'm basing this partly on the fact that not many people have suggested answers to this question and also partly because the answers I have received don't accomplish what I'm trying to do. Perhaps my explanation wasn't clear enough, too.

So, my solution to my original question of getting an accurate report of the number of selected product rows is to create a global variable in JS as so:

```
window.config =
    {
        products : 0,
    }; 
```

Then, add lines to the if statement to increment or decrement the variable depending on what happened:

```
$('table.products > tbody > tr').click(function(){
    window.config.products = window.config.products - 1; // Decrement
    if ($(this).find('div.price').is(":visible")) {
        $(this).find('div.price, img.selected').fadeOut(100);
    } else {
        window.config.products = window.config.products + 1; // Increment
        $(this).siblings('div.price, img.selected').fadeIn(100);                    
    }
}); 
```

Now I have an accurate record of the number of selected products in the global variable which I can access at any time to continue the development of my application.

# perl - 我可以在 CGI 脚本的源代码中安全地存储密码吗？

> ID：10796356
> 
> 赞同：1
> 
> 时间：2012-05-29T09:24:30.857
> 
> 标签：perl

我在[Email::Send::SMTP::Gmail](http://p3rl.org/Email%3a%3aSend%3a%3aSMTP%3a%3aGmail)的帮助下通过 Gmail 使用 Perl 发送电子邮件。脚本存储为`send.pl`. 我正在访问它`localhost/send.pl`。我必须在这个 Perl 脚本中输入我的 Gmail 帐户密码，然后从我的浏览器访问它。

浏览此网站的任何人都可以通过任何方式获取我的 Gmail 密码吗？

我的代码：

```
use strict;
use warnings;
use Email::Send::SMTP::Gmail;
my $mail = Email::Send::SMTP::Gmail->new(
    -smtp  => 'gmail.com',
    -login => 'whateveraddress@gmail.com',
    -pass  => 'whatever_pass'
);
$mail->send(
    -to          => 'target@xxx.com',
    -subject     => 'Hello!',
    -charset     => 'KOI8-R',
    -verbose     => '1',
    -body        => 'Just testing it',
    -attachments => 'full_path_to_file'
);
$mail->bye; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T09:28:15.350

只要服务器保持正确配置，不，您的密码是安全的。

但是，将密码保存在站点根目录之外的配置文件中并从脚本中读取它而不是将其嵌入脚本本身是一个好主意。这样，如果服务器配置发生更改并开始提供原始脚本而不是执行它，您的密码仍然是安全的。

# c# - saml 令牌解析器无法解析令牌引用

> ID：10796357
> 
> 赞同：1
> 
> 时间：2012-05-29T09:24:32.213
> 
> 标签：c#, wif, saml-2.0

我目前正在开发一个小型 ASP.NET 项目，该项目涉及针对第 3 方身份提供者对用户进行身份验证。我遇到了由 SP 发起的 SLO 请求的问题。

我正在使用[WIF SAML 2.0 扩展](http://blogs.msdn.com/b/card/archive/2011/05/16/announcing-the-wif-extension-for-saml-2-0-protocol-community-technology-preview.aspx)来处理 SAML 协议。

调试我的应用程序时，它立即崩溃，给我以下错误消息（我删除了 RawData 的值，即用于签名的 X509Certificate 的公钥）：

```
The token resolver is unable to resolve the token reference 'SecurityKeyIdentifier
   (
   IsReadOnly = False,
   Count = 1,
   Clause[0] = X509RawDataKeyIdentifierClause(RawData = )
   )
'.

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.InvalidOperationException: The token resolver is unable to resolve the token reference 'SecurityKeyIdentifier
   (
   IsReadOnly = False,
   Count = 1,
   Clause[0] = X509RawDataKeyIdentifierClause(RawData = )
   )
'.

Source Error: 

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

Stack Trace: 

[InvalidOperationException: The token resolver is unable to resolve the token reference 'SecurityKeyIdentifier
    (
    IsReadOnly = False,
    Count = 1,
    Clause[0] = X509RawDataKeyIdentifierClause(RawData = )
    )
'.]
   System.IdentityModel.Selectors.SecurityTokenResolver.ResolveToken(SecurityKeyIdentifier keyIdentifier) +226933
   Microsoft.IdentityModel.Web.Saml2AuthenticationModule.ReadSelfMetadata(Stream stream, String fileName, String& entityId, EndpointConfiguration& endpointConfiguration, Boolean& signAuthenticationRequests, X509Certificate2& signingCertificate) +771

[ConfigurationErrorsException: ID4451: The signing key specified in metadata could not be found.  Update the key identifier in metadata or ensure the key is present in the ServiceTokenResolver.  See the inner exception for more details.]
   Microsoft.IdentityModel.Web.Saml2AuthenticationModule.ReadSelfMetadata(Stream stream, String fileName, String& entityId, EndpointConfiguration& endpointConfiguration, Boolean& signAuthenticationRequests, X509Certificate2& signingCertificate) +940
   Microsoft.IdentityModel.Web.Saml2AuthenticationModule..ctor() +606

[TargetInvocationException: Exception has been thrown by the target of an invocation.]
   System.RuntimeTypeHandle.CreateInstance(RuntimeType type, Boolean publicOnly, Boolean noCheck, Boolean& canBeCached, RuntimeMethodHandleInternal& ctor, Boolean& bNeedSecurityCheck) +0
   System.RuntimeType.CreateInstanceSlow(Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache) +98
   System.RuntimeType.CreateInstanceDefaultCtor(Boolean publicOnly, Boolean skipVisibilityChecks, Boolean skipCheckThis, Boolean fillCache) +241
   System.Activator.CreateInstance(Type type, Boolean nonPublic) +69
   System.RuntimeType.CreateInstanceImpl(BindingFlags bindingAttr, Binder binder, Object[] args, CultureInfo culture, Object[] activationAttributes) +1136
   System.Activator.CreateInstance(Type type, BindingFlags bindingAttr, Binder binder, Object[] args, CultureInfo culture, Object[] activationAttributes) +111
   System.Activator.CreateInstance(Type type, BindingFlags bindingAttr, Binder binder, Object[] args, CultureInfo culture) +23
   System.Web.HttpRuntime.CreateNonPublicInstance(Type type, Object[] args) +60
   System.Web.HttpApplication.BuildIntegratedModuleCollection(List`1 moduleList) +231
   System.Web.HttpApplication.GetModuleCollection(IntPtr appContext) +1365
   System.Web.HttpApplication.RegisterEventSubscriptionsWithIIS(IntPtr appContext, HttpContext context, MethodInfo[] handlers) +95
   System.Web.HttpApplication.InitSpecial(HttpApplicationState state, MethodInfo[] handlers, IntPtr appContext, HttpContext context) +194
   System.Web.HttpApplicationFactory.GetSpecialApplicationInstance(IntPtr appContext, HttpContext context) +339
   System.Web.Hosting.PipelineRuntime.InitializeApplication(IntPtr appContext) +253

[HttpException (0x80004005): Exception has been thrown by the target of an invocation.]
   System.Web.HttpRuntime.FirstRequestInit(HttpContext context) +9090876
   System.Web.HttpRuntime.EnsureFirstRequestInit(HttpContext context) +97
   System.Web.HttpRuntime.ProcessRequestNotificationPrivate(IIS7WorkerRequest wr, HttpContext context) +256 
```

* * *

我的 SP 元数据如下：

```
<md:EntityDescriptor
  xmlns:md="urn:oasis:names:tc:SAML:2.0:metadata"
  xmlns:saml="urn:oasis:names:tc:SAML:2.0:assertion"
  entityID="urn:mace:feide.no:services:no.ntnu.test_lesesalplass">

<!--Find where to turn off LogOutRequestSigning!-->
  <md:SPSSODescriptor
     WantAssertionsSigned="false" 
     AuthnRequestsSigned="false"
     protocolSupportEnumeration="urn:oasis:names:tc:SAML:2.0:protocol">

    <md:KeyDescriptor use="signing">
      <ds:KeyInfo xmlns:ds="http://www.w3.org/2000/09/xmldsig#">
        <ds:X509Data>
          <ds:X509Certificate>
            [...]
          </ds:X509Certificate>
        </ds:X509Data>
      </ds:KeyInfo>
    </md:KeyDescriptor>

    <md:KeyDescriptor use="encryption">
      <ds:KeyInfo xmlns:ds="http://www.w3.org/2000/09/xmldsig#">
        <ds:X509Data>
          <ds:X509Certificate>
            [...]
          </ds:X509Certificate>
        </ds:X509Data>
      </ds:KeyInfo>
    </md:KeyDescriptor>

    <md:NameIDFormat>
      urn:oasis:names:tc:SAML:2.0:nameid-format:transient
    </md:NameIDFormat>

    <md:SingleLogoutService
      Binding="urn:oasis:names:tc:SAML:2.0:bindings:HTTP-Redirect"
      Location="http://localhost:52681/LeseSalReg/saml/redirect/slo"
      ResponseLocation="http://localhost:52681/LeseSalReg/saml/redirect/sloresponse"
      />

    <md:AssertionConsumerService
      isDefault="true" index="0"
      Binding="urn:oasis:names:tc:SAML:2.0:bindings:HTTP-POST"
      Location="http://localhost:52681/LeseSalReg/saml/post/ac" 
      />

  </md:SPSSODescriptor>
</md:EntityDescriptor> 
```

* * *

我的 web.config 如下所示：

```
<?xml version="1.0"?>

<configuration>

  <configSections>
    <section name="microsoft.identityModel" type="Microsoft.IdentityModel.Configuration.MicrosoftIdentityModelSection, Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
    <section name="microsoft.identityModel.saml" type="Microsoft.IdentityModel.Web.Configuration.MicrosoftIdentityModelSamlSection, Microsoft.IdentityModel.Protocols"/>
  </configSections>

  <connectionStrings>
    <add name="ApplicationServices"
         connectionString="data source=.\SQLEXPRESS;Integrated Security=SSPI;AttachDBFilename=|DataDirectory|\aspnetdb.mdf;User Instance=true"
         providerName="System.Data.SqlClient" />
    <add name="StudySpaceRegEntities"
         connectionString="metadata=res://*/LeseSalRegEntity.csdl|res://*/LeseSalRegEntity.ssdl|res://*/LeseSalRegEntity.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=MATSHO;initial catalog=StudySpaceReg;integrated security=True;multipleactiveresultsets=True;App=EntityFramework&quot;"
         providerName="System.Data.EntityClient" />
  </connectionStrings>

  <system.web>

    <compilation debug="true" targetFramework="4.0" >
      <assemblies>
        <add assembly="Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
      </assemblies>
    </compilation>

    <siteMap enabled="false">
      <providers>
        <clear/>
        <add name="AspNetXmlSiteMapProvider" type="System.Web.XmlSiteMapProvider" siteMapFile="Web.sitemap" securityTrimmingEnabled="true" />
      </providers>
    </siteMap>

    <authentication mode="Forms">
      <forms loginUrl="~/About.aspx" timeout="2880" defaultUrl="~/Register.aspx" />
    </authentication>

    <pages controlRenderingCompatibilityVersion="4.0" clientIDMode="AutoID" masterPageFile="~/Site.Master"/>

    <membership>
      <providers>
        <clear/>
        <add name="AspNetSqlMembershipProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="ApplicationServices"
             enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false"
             maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10"
             applicationName="/" />
      </providers>
    </membership>

    <profile>
      <providers>
        <clear/>
        <add name="AspNetSqlProfileProvider" type="System.Web.Profile.SqlProfileProvider" connectionStringName="ApplicationServices" applicationName="/"/>
      </providers>
    </profile>

    <roleManager enabled="false">
      <providers>
        <clear/>
        <add name="AspNetSqlRoleProvider" type="System.Web.Security.SqlRoleProvider" connectionStringName="ApplicationServices" applicationName="/" />
        <add name="AspNetWindowsTokenRoleProvider" type="System.Web.Security.WindowsTokenRoleProvider" applicationName="/" />
      </providers>
    </roleManager>

    <httpModules>
      <add name="Saml2AuthenticationModule" type="Microsoft.IdentityModel.Web.Saml2AuthenticationModule"/>
      <add name="SessionAuthenticationModule" type="Microsoft.IdentityModel.Web.SessionAuthenticationModule"/>
    </httpModules>
  </system.web>

  <system.webServer>

    <validation validateIntegratedModeConfiguration="false"/>
    <modules>
      <add name="Saml2AuthenticationModule" type="Microsoft.IdentityModel.Web.Saml2AuthenticationModule"/>
      <add name="SessionAuthenticationModule" type="Microsoft.IdentityModel.Web.SessionAuthenticationModule"/>
    </modules>

  </system.webServer>

  <microsoft.identityModel>
    <service>

      <audienceUris>
        <clear/>
        <add value="urn:mace:feide.no:services:no.ntnu.test_lesesalplass"/>
      </audienceUris>

      <issuerNameRegistry type="Microsoft.IdentityModel.Tokens.ConfigurationBasedIssuerNameRegistry">
        <trustedIssuers>
          <add name="https://idp-test.feide.no" thumbprint="fa982efdb69f26e8073c8f815a82a0c5885960a2"/>
        </trustedIssuers>
      </issuerNameRegistry>

      <securityTokenHandlers>
        <remove type="Microsoft.IdentityModel.Tokens.Saml2.Saml2SecurityTokenHandler, Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
        <add type="Microsoft.IdentityModel.Tokens.Saml2.Saml2SecurityTokenHandler, Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />

        <remove type="Microsoft.IdentityModel.Tokens.X509SecurityTokenHandler, Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        <add type="Microsoft.IdentityModel.Tokens.X509SecurityTokenHandler, Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />

        <securityTokenHandlerConfiguration saveBootstrapTokens="true" >
          <audienceUris mode="Always" />
        </securityTokenHandlerConfiguration>
      </securityTokenHandlers>
    </service>
  </microsoft.identityModel>

  <microsoft.identityModel.saml metadata="App_Data\SPmeta.xml">
    <identityProviders>
      <metadata file="App_Data\IdPmeta.xml"/>
    </identityProviders>
  </microsoft.identityModel.saml> 
```

如果我在 SP 元数据中注释掉签名证书的 KeyDescriptor，应用程序不会崩溃。但是，当我尝试注销时，出现以下异常：

> ID4450：“LogoutRequest”类型的消息必须在发送前签名。设置消息的 SigningCredentials 属性，或使用非空 X509Certificate2 配置 Saml2MessageDecorator。

我认为 WIF 不支持未签名的 SLO 请求，因此我必须对其进行签名。由于我无法理解的原因，SecurityTokenResolver 似乎无法解析元数据中定义的用于签名的 X509Certificate。

任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T10:52:43.650

**解决了它：**
问题源于对证书如何工作的理解不足：我试图使用相同的 X509Certificate 对 IdP 和 SP 消息进行签名。

我[创建了一个 X509Certificate](http://www.yasinkaplan.com/tekcert.asp)并将其放在我计算机的“个人商店”中。对 web.config 进行了以下更改：

```
<microsoft.identityModel>
    <service>

      <serviceCertificate>
        <certificateReference
            storeName="My"
            x509FindType="FindByThumbprint"
            storeLocation="LocalMachine"
            findValue="82581cf4710c951d0f2e89e97c3a41d2b4a18890"
        />  
     </serviceCertificate>
[...] 
```

证书的 base64 编码版本已放入 SP 元数据中。SecurityTokenHandler 然后能够签署我的 LogoutRequests。

# iphone - 无法在导航控制器上设置“返回”按钮

> ID：10796358
> 
> 赞同：1
> 
> 时间：2012-05-29T09:24:36.473
> 
> 标签：iphone, objective-c, uinavigationcontroller

这很简单，我有一个视图，当用户在我的第一个视图中点击顶部导航栏上的“+”按钮时调用它，然后出现第二个视图。我的问题是，我无法在第二个视图导航栏上设置任何按钮，实际上我尝试像往常一样设置它，就像我设置“+”按钮一样，但没有任何效果。这就是我设置按钮的方式：

```
UIBarButtonItem *addButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:@selector(addProduct:)];
self.navigationItem.leftBarButtonItem = addButton; 
```

然后我称之为我的第二种观点：

```
BIDAddProductViewController *addProductVC = [[BIDAddProductViewController alloc] init];
[self presentModalViewController:addProductVC animated:YES];
[[NSNotificationCenter defaultCenter]addObserver:self selector:@selector(hideModalViewController:) name:@HideModalViewController" object:addProductVC]; 
```

请帮我在我的第二个（BIDAddProductViewController）视图上设置按钮，没有任何工作，我不知道为什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T09:28:16.973

您在初始视图上设置后退按钮。如果您考虑一下，这有点道理，按钮是“用于”初始视图的，因此初始视图可以决定它所说的内容。默认是初始视图标题，但您可以像下面这样更改它

```
UIBarButtonItem *addButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:@selector(addProduct:)];
self.navigationItem.leftBarButtonItem = addButton;
self.navigationItem.backBarButtonItem.title = @"Back"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T09:55:21.607

问题在于您呈现第二个控制器的方式。不是将它推入导航堆栈，而是以模态方式呈现它，这就是为什么你没有得到“后退”按钮的原因。你真正应该做的是这样的：

```
BIDAddProductViewController *addProductVC = [[BIDAddProductViewController alloc] init];
[self.navigationController pushViewController:addProductVC animated:YES]; 
```

# python - uwsgi 找不到后台处理程序功能

> ID：10796359
> 
> 赞同：0
> 
> 时间：2012-05-29T09:24:41.710
> 
> 标签：python, django, uwsgi, spooler

我试图了解[uWSGI的](http://projects.unbit.it/uwsgi/)[假脱机机制](http://projects.unbit.it/uwsgi/wiki/Spooler)，因此我用[Django](http://www.djangoproject.com)（版本 1.3.1）编写了一个小的虚拟 Web 应用程序，它运行在最新的稳定版本[nginx](http://nginx.org/)上。一切都按预期工作。但是，在我的一个观点中，我正在向 uWSGI 容器发送假脱机消息，并且收到以下错误：

```
[spooler /private/tmp/receiver pid: 4115] managing request uwsgi_spoolfile_on_ozgurv.local_4165_1_0_1338280641_366596 ...
unable to find the spooler function, have you loaded it into the spooler process ? 
```

在我的 testapp/views.py 文件中：

```
from django.http import HttpResponse
from testapp.spool import three_seconds

def call(request):
    three_seconds.spool(a=1, b=2)
    return HttpResponse('spooled') 
```

在我的 testapp/spool.py 文件中：

```
from uwsgidecorators import *

@spool
def three_seconds(*args, **kwargs):
    f = open('/tmp/args.data', 'a')
    f.write(repr(kwargs) + '\n')
    f.close() 
```

当我通过在浏览器中请求 url /call/ 执行函数“调用”时，出现以下错误：

```
[spooler /private/tmp/receiver pid: 4115] managing request uwsgi_spoolfile_on_ozgurv.local_4165_1_0_1338280641_366596 ...
unable to find the spooler function, have you loaded it into the spooler process ? 
```

uWSGI 使用以下参数运行：

```
sudo uwsgi --ini ~/uwsgi.ini -b 20000 
```

我的 uwsgi.ini 文件的内容如下所示：

```
[uwsgi]
socket = 127.0.0.1:8081
listen = 4096
master = true
processes = 4
pidfile = /var/run/uwsgi.pid
enable-threads = true
uid=root
gid=admin
single-interpreter = true
disable-logging = true
buffer-size= 32768
reload-on-as = 10240
reload-on-rss = 512i0
max-requests = 50000
pythonpath = /Users/ozgurv/Developer/warehouse
module = wsgi_handler

plugins = python27,spooler
spooler-processes = 1
spooler = /tmp/receiver 
```

我不知道为什么它一直在抱怨后台处理程序功能以及为什么[uwsgi](http://projects.unbit.it/uwsgi/)找不到它。“您已将其加载到后台处理程序进程中”是什么意思？如何在 spooler 进程的上下文中加载一个 spooler 函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T09:48:23.870

使用 spooler-import = testapp/spool.py

spooler 进程将在其进程地址空间中导入该模块

另一种解决方案是在所有 uwsgi 进程中导入模块

导入 = testapp/spool.py

# sql-server-2008 - 删除插入后存在的重复条目

> ID：10796360
> 
> 赞同：3
> 
> 时间：2012-05-29T09:24:45.650
> 
> 标签：sql-server-2008, ssis

我在将信息从一个表插入到另一个表时遇到了一个小问题。

例如：从`table A`（可以包含~10 kk 个条目）到`table B`，表是相同的，除了用于获取某些数据（边界）的`table A`has 。`DateTimeStamp`

所以我需要将数据从 A 移动到 B（不带`DateTimeStamp`）并从 B 中删除重复项。

例子：

**表 A**

```
DateTimeStamp | Key | value 
2012-02-03    |  2  | 123
2012-02-03    |  3  | 985
2012-02-03    |  5  | 1584 
```

**表 B**

```
Key  | value 
  8  | 45
  3  | 785
  9  | 7457 
```

所以我需要用`Key = 3`from删除行`Table B`并插入其他所有内容 from `Table A`。

结果将是：

```
Key  | value 
  8  | 45
  3  | 985
  9  | 7457
  2  | 123
  5  | 1584 
```

有没有优雅的方法来做到这一点？触发器太慢了，我正在寻找不需要临时表的解决方案。

SQL Server 或 SSIS 解决方案\建议欢迎

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T09:40:47.193

如果您使用的是 SQL Server **2008**或更高版本，则可以使用一条`MERGE`语句轻松完成此操作 - 如下所示：

```
MERGE INTO dbo.B                -- target table
USING A ON b.Key = a.Key        -- source table and "link" information
WHEN MATCHED 
    THEN UPDATE SET B.Value = A.Value   -- if "Key" already present in B - update "Value"
WHEN NOT MATCHED                        -- if "Key" not present in B - insert new row
    THEN INSERT(TblKey, TblValue) VALUES(A.TblKey, A.TblValue) 
WHEN NOT MATCHED BY SOURCE
    DELETE                              -- if present in B, but not in A -> remove
; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T09:28:54.677

两步：

```
-- first delete
delete tableB
from tableB b
inner join tableA a on b.Key = a.Key

-- then insert
insert into tableB
select a.Key, a.Value from tableA a where a.Key not in (select b.Key from tableB b) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T09:39:05.510

试试这个：

从表 B 中删除重复项：

```
 delete FROM tableB Where tableB.Key IN
    (select Key
    from tableA 
    INTERSECT
    select Key
    from tableB) 
```

然后，插入表 B：

```
 insert INTO tableB (Key, Value)
select Key, Value From tableA 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T10:02:01.740

尽管这里提出的所有解决方案似乎都有效，但我真的会构建一个包来处理一个有 10kk 行的表。

您可以将 oledbsource 与查询 aF 一起使用。建议：

```
select a.Key, a.Value 
from tableA a 
where a.Key not in (select b.Key from tableB b) 
```

并将其直接发送到指向表 B 的 oledbdestination

# python - 简单的 Linux/X11 程序来抓取并保持键盘焦点？

> ID：10796363
> 
> 赞同：2
> 
> 时间：2012-05-29T09:24:48.097
> 
> 标签：python, linux, keyboard, x11

我正在用 Python 在 Linux (Ubuntu) 上编写一个简单的打字中断/反 RSI 程序。我问了关于锁定键盘的类似问题（[如何“锁定键盘”以防止在 X11/Linux/Gnome 上发送更多按键？](https://stackoverflow.com/questions/10740067/how-do-i-lock-the-keyboard-to-prevent-any-more-keypresses-being-sent-on-x11-li)以及[在使用 xinput 在 X11/Linux 中禁用键盘后释放所有键？](https://stackoverflow.com/questions/10758473/releasing-all-keys-after-disabling-the-keyboard-in-x11-linux-using-xinput)）有人建议（[https://stackoverflow.com/a/10769704/161922](https://stackoverflow.com/a/10769704/161922)）抓住键盘焦点将是最好的方法。但是我是 X11 编程的新手。我将如何在 Python 中做到这一点？（假设我已经安装了 python-xlib 或任何东西，我也可以从 pypi 或 apt 安装任何东西）。

你如何制作一个简单的 X11 应用程序来获取键盘焦点（即使当前焦点是另一个窗口）。用户应该不可能使用 alt-tab 或 alt-f4 离开这个（即没有转义）。然而，应该可以在以后或任何时候“释放”这种“抓取”。

# php - 如何对 Zend_Search_Lucene 中的 @ 等特殊字符应用搜索查询？

> ID：10796364
> 
> 赞同：2
> 
> 时间：2012-05-29T09:24:51.763
> 
> 标签：php, zend-framework, utf-8, special-characters, zend-search-lucene

在`Zend_Search_Lucene`我使用以下代码进行索引时，我已更改默认分析器以搜索数值。

```
public function executeIndexIT() {

   $path = '/home/project/mgh/lib/';
   set_include_path(get_include_path() . PATH_SEPARATOR . $path);       
   require_once '/home/project/mgh/lib/Zend/Search/Lucene.php';

   Zend_Search_Lucene_Analysis_Analyzer::setDefault(new Zend_Search_Lucene_Analysis_Analyzer_Common_TextNum_CaseInsensitive());

   $index = new Zend_Search_Lucene('/home/project/mgh/data/search_file/lucene.customer.index',true);

   $filenames1='/home/project/mgh/web/cvcollection/data8/ASBABranches10546.pdf';
   $filenames2='/home/project/mgh/web/cvcollection/data2/manoj_new10550.pdf';

   $fc1=htmlentities("'".$this->ConvertPDF($filenames1)."'");       
   $fc2=htmlentities("'".$this->ConvertPDF($filenames2)."'");

   $doc = new Zend_Search_Lucene_Document();
   $doc->addField(Zend_Search_Lucene_Field::unIndexed('URL', $filenames1));
   $doc->addField(Zend_Search_Lucene_Field::text('contents',$fc1));     
   $index->addDocument($doc);

   $doc = new Zend_Search_Lucene_Document();
   $doc->addField(Zend_Search_Lucene_Field::unIndexed('URL', $filenames2));
   $doc->addField(Zend_Search_Lucene_Field::text('contents',$fc2));     
   $index->addDocument($doc);

   $index->commit();
   exit;
} 
```

在为搜索建立索引后，我正在使用以下代码：

```
public function executeSearchLucene() {

    $path = '/home/project/mgh/lib/';
    set_include_path(get_include_path() . PATH_SEPARATOR . $path);
    require_once('Zend/Search/Lucene.php');

    Zend_Search_Lucene_Analysis_Analyzer::setDefault(new Zend_Search_Lucene_Analysis_Analyzer_Common_TextNum_CaseInsensitive());

    $hits = array();
    $txtSearch='@';
    try {
        $query = Zend_Search_Lucene_Search_QueryParser::parse($txtSearch);
    } catch (Zend_Search_Lucene_Search_QueryParserException $e) {
        echo "Query syntax error: " . $e->getMessage() . "\n";
    }

    $index = new Zend_Search_Lucene('/home/project/mgh/data/search_file/lucene.customer.index');

    //**added on 29 may**/      
    $results = $index->find($query);
    echo count($results);
    foreach ( $results as $result ) {
        echo "<pre>";
        var_dump($result->URL); 
   }
   exit;
} 
```

这里`$fc2`包含几个电子邮件地址，我需要搜索它们。但我得到 0 次点击。

如何搜索喜欢`@`或`!`使用的字符`Zend_Search_Lucene`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T08:02:50.747

它仅适用于`keyword`未标记化的字段。因此，您需要确保将电子邮件（或其他带有特殊字符的文本）作为单独的数据提供，例如示例。您也不能使用查询解析器，因为查询解析器会将其转换为`Zend_Search_Lucene_Search_Query_Preprocessing_Term`对象：

```
echo('<pre>');
var_dump(Zend_Search_Lucene_Search_QueryParser::parse("*@*"));
var_dump(Zend_Search_Lucene_Search_QueryParser::parse("@"));
echo('</pre>');
die(); 
```

根据文档：

> **实际上并不参与查询执行**

所以工作代码如下：

```
$index = Zend_Search_Lucene::create('/tmp/index');

$doc1 = new Zend_Search_Lucene_Document;
$doc1->addField(Zend_Search_Lucene_Field::text('title', 'Some Title Here'))
    ->addField(Zend_Search_Lucene_Field::keyword('content', 'test@test.com'));
$index->addDocument($doc1);

$doc2 = new Zend_Search_Lucene_Document;
$doc2->addField(Zend_Search_Lucene_Field::text('title', 'Another title Here'))
    ->addField(Zend_Search_Lucene_Field::keyword('content', 'test!test.com'));
$index->addDocument($doc2);

$index->commit();

Zend_Search_Lucene_Search_Query_Wildcard::setMinPrefixLength(0);
$term  = new Zend_Search_Lucene_Index_Term("*@*");
$query = new Zend_Search_Lucene_Search_Query_Wildcard($term);

$hits = $index->find($query);
echo('<pre>');
var_dump(count($hits));
foreach($hits as $hit) {
    var_dump($hit->title);
    var_dump($hit->content);
}
echo('</pre>');

Zend_Search_Lucene_Search_Query_Wildcard::setMinPrefixLength(0);
$term  = new Zend_Search_Lucene_Index_Term("*!*");
$query = new Zend_Search_Lucene_Search_Query_Wildcard($term);

$hits = $index->find($query);
echo('<pre>');
var_dump(count($hits));
foreach($hits as $hit) {
    var_dump($hit->title);
    var_dump($hit->content);
}
echo('</pre>');

die(); 
```

希望现在很清楚。Zend Lucene 实现有很多限制。

# c# - 在 C# 中计算时差：

> ID：10796369
> 
> 赞同：1
> 
> 时间：2012-05-29T09:25:01.463
> 
> 标签：c#, asp.net, visual-studio-2010

我有两个字符串变量，例如 StartTime 和 EndTime。我需要通过用 StartTime 减去 EndTime 来计算 TotalTime。

StartTime 和 EndTime 的格式如下：

```
 StartTime = "08:00 AM";
    EndTime = "04:00 PM"; 
```

TotalTime（小时和分钟格式）。如何使用 C# 计算这个？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-29T09:27:10.623

将它们转换为`DateTime`并从另一个中减去一个以获得`TimeSpan`.

```
DateTime StartTime = DateTime.Parse("08:00 AM");

DateTime EndTime  = DateTime.Parse("04:00 PM"); // It converts this to 1600.

TimeSpan ts = EndTime - StartTime; 
```

当我运行上面的代码时，它给了我

```
ts.Days              // 0
ts.Hours             // 8
ts.Milliseconds      // 0
ts.Minutes           // 0
ts.Seconds           // 0
ts.Ticks             // 288000000000
ts.TotalDays         // 0.3333333333333333331
ts.TotalHours        // 8.0
ts.TotalMilliseconds // 28800000.0
ts.TotalMinutes      // 480.0
ts.TotalSeconds      // 28800.0 
```

得到你想要的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-29T09:27:22.043

您应该将字符串转换为`DateTime`并用于`TimeSpan`计算差异

```
DateTime d1 = DateTime.Parse(StartTime);
DateTime d2 = DateTime.Parse(EndTime);
TimeSpan ts = dt.Subtract(dt2); 
```

类似上面的东西。你可能需要`ParseExact`而不是`Parse`

对于您的采样时间，`ts.ToString()`将返回一个字符串`"08:00:00"`，给出小时、分钟和秒的差异

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-29T09:37:27.850

在将字符串解析为值时，使用该`ParseExact`方法指定确切的格式`DateTime`，然后将它们相减以获得一个`TimeSpan`值：

```
string StartTime = "08:00 AM";
string EndTime = "04:00 PM";

DateTime start = DateTime.ParseExact(StartTime, "hh:mm tt", CultureInfo.InvariantCulture);
DateTime end = DateTime.ParseExact(EndTime, "hh:mm tt", CultureInfo.InvariantCulture);

TimeSpan diff = end - start;

Console.WriteLine(diff.TotalMinutes); 
```

输出：

```
480 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-29T09:34:30.960

```
string StartTime, EndTime;
StartTime = "08:00 AM"; 
EndTime = "04:00 PM"; 
DateTime startTime = DateTime.Parse(StartTime); 
DateTime endTime = DateTime.Parse(EndTime); 
TimeSpan ts = endTime.Subtract(startTime); 
```

> 输出：08:00:00 看跌期权是 Hrs:Min:Sec 格式。

这就是你需要的。对

注意： 减法时 endTime 应该在前。

# cucumber - 使用 Gems 或 Jenkins（或两者）在多台机器上并行 Cucumber BDD 测试

> ID：10796370
> 
> 赞同：4
> 
> 时间：2012-05-29T09:25:03.237
> 
> 标签：cucumber, jenkins, watir, selenium-grid, parallel-testing

我正在使用 BDD 和**Cucumber**（带有 page_object gem）、**Watir**和**Jenkins**运行一个项目。现在，我们正在寻找**并行化测试**的最佳方法，以减少在多个虚拟机上使用不同的导航器等进行测试的时间。

我认为有两种方法：

*   使用 Ruby 工具，如 parallel_test、Hydra、TestJour、TestBot...
*   或通过 Jenkins 组织一切，使用路径、标签等。
*   以某种方式同时使用两者

为了以正确的方式努力……您认为 Jenkins 是在多台机器上进行并行测试的好选择，还是应该给另一个工具一个机会？欢迎提出建议:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-29T16:04:41.757

Jenkins 只是解决方案的一部分。您可以使用 parallel_tests 同时运行多个 cuke（只要您的 Jenkins 服务器不在 Windows 上运行），但您仍然需要更多。

您将需要设置一个服务器网格来处理 watir 测试。我强烈建议您查看 Selenium Grid 2 (http://code.google.com/p/selenium/wiki/Grid2)。在远程 VM 上设置节点并在 Jenkins 服务器上启动集线器。然后 parallel_tests 可以并行运行测试，让它们连接到本地集线器，然后将它们发送到远程服务器执行。

一个注意事项 - 为了使其正常工作，您需要制定良好的测试数据管理策略。每个测试都需要能够独立运行。此外，他们每个人都应该负责设置运行测试所需的数据，然后在测试执行后清理这些数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T14:50:21.523

我使用 Jenkins 将作业拆分到各种从机。当不需要并行测试时，这还允许不同用户对不同环境进行测试（测试人员测试、开发人员故障排除等）。非常容易设置！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-18T21:52:04.983

您可以通过将测试分布到不同的标签中进行并行化，然后在每台测试机器上运行不同的标签集。

```
require 'rubygems'
  require 'cucumber'

  require 'cucumber/rake/task'

  Cucumber::Rake::Task.new( :features) do |t|
    t.cucumber_opts = "features --tags @testset_1 "
end 
```

# shell - 使用运算符 j 操作 zsh 数组

> ID：10796371
> 
> 赞同：6
> 
> 时间：2012-05-29T09:25:04.523
> 
> 标签：shell, zsh

以下代码取自[此处](http://eseth.org/2010/git-in-zsh.html)：

```
function +vi-git-st() {
    local ahead behind remote
    local -a gitstatus

    # Are we on a remote-tracking branch?
    remote=${$(git rev-parse --verify ${hook_com[branch]}@{upstream} \
        --symbolic-full-name 2>/dev/null)/refs\/remotes\/}

    if [[ -n ${remote} ]] ; then
        # for git prior to 1.7
        # ahead=$(git rev-list origin/${hook_com[branch]}..HEAD | wc -l)
        ahead=$(git rev-list ${hook_com[branch]}@{upstream}..HEAD 2>/dev/null | wc -l)
        (( $ahead )) && gitstatus+=( "${c3}+${ahead}${c2}" )

        # for git prior to 1.7
        # behind=$(git rev-list HEAD..origin/${hook_com[branch]} | wc -l)
        behind=$(git rev-list HEAD..${hook_com[branch]}@{upstream} 2>/dev/null | wc -l)
        (( $behind )) && gitstatus+=( "${c4}-${behind}${c2}" )

        hook_com[branch]="${hook_com[branch]} [${remote} ${(j:/:)gitstatus}]"
    fi
} 
```

我不明白最后一行。变量`gitstatus`是一个数组，那么`${(j:/:)gitstatus}`应该怎么做呢？我知道它会输出字符串`first_array_element/second_array_element`，但我没有找到任何关于 operator 的文档`j`。这是一些特定的 zsh 功能，还是标准的 shell 编程结构？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-29T09:32:15.413

那是连接数组元素的参数扩展标志。参见[(j:...:) 标志](http://zshwiki.org/home/scripting/paramflags#jflag)。

在这种特定情况下，它使用`/`分隔符连接数组中的元素。例如

```
zsh% foo=(1 2 3)    
zsh% echo $foo
1 2 3
zsh% echo ${(j:/:)foo}
1/2/3 
```

# c# - 无法使用 bing 地图通过 mvvm 将地图地理坐标中心绑定到 Windows 手机上的地图

> ID：10796373
> 
> 赞同：2
> 
> 时间：2012-05-29T09:25:13.023
> 
> 标签：c#, xaml, mvvm, windows-phone-7.1, bing-maps

我正在尝试根据给定实例在地图上显示的各种路线动态设置地图控件的中心属性。我在这里使用路线的起点作为地理坐标中心。为了实现这一点，我尝试使用 bing 地图通过 windows phone 应用程序上的 mvvm 将地理坐标中心绑定到地图控件。我能够通过纬度和经度获取中心位置的数据，但无法将其绑定到 UI(xaml) 页面。

以下是我的 RouteViewModel 类

```
 private Location startPoint;
    public Location StartPoint
    {
        get { return startPoint; }
        set
        {
            startPoint = value;
            Change("StartPoint");
        }
    }

   private System.Device.Location.GeoCoordinate centre;

    public System.Device.Location.GeoCoordinate Centre
    {
        get { return centre; }
        set { centre = value; }
    }

    private string getcenter;

    public string Getcenter
    {
        get { return getcenter; }
        set { getcenter = value; }
    }

    private Location endPoint;
    public Location EndPoint
    {
        get { return endPoint; }
        set
        {
            endPoint = value;
            Change("EndPoint");
        }
    }

    private ObservableCollection<Location> routePoints;
    public ObservableCollection<Location> RoutePoints
    {
        get { return routePoints; }
        set
        {
            routePoints = value;
            Change("RoutePoints");
        }
    }

    private ObservableCollection<ItineraryItem> itinerary;
    public ObservableCollection<ItineraryItem> Itinerary
    {
        get
        {
            return itinerary;
        }
        set
        {
            itinerary = value;
            Change("Itinerary");
        }
    }

   private void LocationLoaded()
    {
        if (fromLocation != null && toLocation != null)
        {
            var fromWaypoint = new Waypoint();
            fromWaypoint.Description = "From";
            fromWaypoint.Location = new Location();
            fromWaypoint.Location.Altitude = fromLocation.Altitude;
            fromWaypoint.Location.Latitude = fromLocation.Latitude;
            fromWaypoint.Location.Longitude = fromLocation.Longitude;

            var toWaypoint = new Waypoint();
            toWaypoint.Description = "To";
            toWaypoint.Location = new Location();
            toWaypoint.Location.Altitude = toLocation.Altitude;
            toWaypoint.Location.Latitude = toLocation.Latitude;
            toWaypoint.Location.Longitude = toLocation.Longitude;

            var routeRequest = new RouteRequest();
            routeRequest.Credentials = new Credentials();
            routeRequest.Credentials.ApplicationId = App.BingApiKey;
            routeRequest.Waypoints = new System.Collections.ObjectModel.ObservableCollection<Waypoint>();
            routeRequest.Waypoints.Add(fromWaypoint);
            routeRequest.Waypoints.Add(toWaypoint);
            routeRequest.Options = new RouteOptions();
            routeRequest.Options.RoutePathType = RoutePathType.Points;
            routeRequest.UserProfile = new Utils.WP7.Bing.BingRoute.UserProfile();
            routeRequest.UserProfile.DistanceUnit = Utils.WP7.Bing.BingRoute.DistanceUnit.Kilometer;

            var routeClient = new RouteServiceClient("BasicHttpBinding_IRouteService");
            routeClient.CalculateRouteCompleted += new EventHandler<CalculateRouteCompletedEventArgs>(OnRouteComplete);
            routeClient.CalculateRouteAsync(routeRequest);
        }
    }

   private void OnRouteComplete(object sender, CalculateRouteCompletedEventArgs e)
    {
        if (e.Result != null && e.Result.Result != null && e.Result.Result.Legs != null & e.Result.Result.Legs.Any())
        {
            var result = e.Result.Result;
            var legs = result.Legs.FirstOrDefault();

            StartPoint = legs.ActualStart;
            EndPoint = legs.ActualEnd;
            RoutePoints = result.RoutePath.Points;
            Itinerary = legs.Itinerary;

     //Centre = StartPoint;
             Getcenter = string.Format("{0},{1}", StartPoint.Latitude.ToString(), StartPoint.Longitude.ToString());

            RaiseRouteResolved();
        }
     } 
```

以下是我的 .xaml.cs 页面中的代码，稍后是我的 xaml 页面中的代码。

```
 (DataContext as RouteViewModel).ResolveRouteFromCurrent();

<maps:Map x:Name="RMaps" Center="{Binding Getcenter}" ZoomLevel="5" CredentialsProvider="{StaticResource MapCredentials}"> 
```

我也尝试过绑定 GeoCoordinate 类型的“Centre”（在上面的代码中注释），但这并不能解决我的问题。有人可以让我知道我能够解决这个问题的方式......在此先感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T12:13:03.713

您的类需要实现`INotifyPropertyChanged`，并且您的`Getcenter`属性需要`PropertyChangedEvent`在值更改时引发，以便数据绑定在值更新时起作用。

# c# - 禁用 wpf 数据网格中底行的按钮

> ID：10796381
> 
> 赞同：1
> 
> 时间：2012-05-29T09:25:40.360
> 
> 标签：c#, wpf, data-binding, datagrid

我有一个包含 4 列的 DataGrid，其中前两列绑定到一个对象。另外两个是按钮列是这样制作的

```
<DataGridTemplateColumn  MaxWidth="100" Header="Delete">
    <DataGridTemplateColumn.CellTemplate>
        <DataTemplate>
            <Button Name="BtnDelete" CommandParameter="{Binding Path=Id}" Content="Delete" Click="BtnDeleteEmployee_Click" />
        </DataTemplate>
    </DataGridTemplateColumn.CellTemplate>
</DataGridTemplateColumn> 
```

我的 Datagrid 有 CanUserAddRows="True" ，它总是在网格底部生成一个空行。但是，我希望在填充其他行之前禁用底行上的两个按钮。就像现在一样，当我单击按钮时，我（当然）得到了一个 nullreferenceexception。

我想一个解决方案是将按钮的 IsEnabled 属性绑定到

```
id>0 
```

但是如何做到这一点，我不确定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T09:32:25.797

实现此目的的一种方法是将`IsEnabled`属性绑定到 Id 属性并使用 ValueConverter 根据您的条件重新调整 True 或 False。

值转换器可能如下所示：

```
public class IdToEnabledConverter:IValueConverter
{
  public object Convert(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
  {
    return value != null && (int)value > 0;
  }

  public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
  {
    throw new NotImplementedException();
  }
} 
```

并且您在资源部分中引用它：

```
<Grid.Resources>
  <local:IdToEnabledConverter x:Key="IdToEnabledConverter"/>
</Grid.Resources> 
```

并绑定`IsEnabled`属性：

```
<Button IsEnabled="{Binding Id, Converter={StaticResource IdToEnabledConverter}}"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T09:35:55.410

我建议使用 MVVM 模式和命令。如果您使用带有按钮的命令，它将根据 CanExecute() 返回值自动禁用。所以这是一个你可以检查 id > 0 的地方。

有关命令的一些有用信息： [http ://relentlessdevelopment.wordpress.com/2010/03/30/simplified-mvvm-commanding-with-delegatecommand/](http://relentlessdevelopment.wordpress.com/2010/03/30/simplified-mvvm-commanding-with-delegatecommand/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-19T04:38:28.017

您可以使用样式触发器如下

```
 <Button.Style>
     <Style TargetType="{x:Type Button}">
         <Setter Property="Visibility" Value="Visible"/>
         <Style.Triggers>
              <DataTrigger Binding="{Binding Id}" Value="{x:Null}">
                   <Setter Property="Visibility" Value="Hidden"/>
              </DataTrigger>
         </Style.Triggers>
     </Style>
</Button.Style> 
```

此示例在值为`Id`null 时完全隐藏按钮。但同样可以使用 IsEnabled 属性来禁用按钮

# select - Sencha Touch - 如何将各种图标（每个项目一个）集成到选择字段中？

> ID：10796383
> 
> 赞同：1
> 
> 时间：2012-05-29T09:25:44.160
> 
> 标签：select, icons, touch, extjs, field

在 Sencha Touch 2 中，我使用了一个带有 5 个选项的选择域组件。每个都有自己的图标。单击输入字段时，图标会显示在文本前面的选择框中。到目前为止，我必须在正在运行的应用程序的源代码中查找各种选项文本的 ID，然后调整 CSS 文件，例如

```
#ext-element-150 { 
background: url('../images/water.jpg');
background-size: 40px 40px;
padding-left: 50px;
background-repeat: no-repeat;
} 
```

其中 ext-element-150 是选项元素之一的（查找的）ID。

结果如下所示： ![选择带有图标的列表](../Images/1e7671e99d23ce285eb8f4584002fb7a.png)

但这是一种不灵活且容易出错的解决方法，而不是解决方案。什么是更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T13:34:22.717

将图像放在列表中的 itemTpl 配置中。

例如：

```
<div> <img src=/path/to/{imagename}></> <span> {description} </span> 
```

然后将图像名称添加到支持列表的商店。

# compilation - 依赖、引用、导入、命名空间和程序集之间的区别？

> ID：10796387
> 
> 赞同：0
> 
> 时间：2012-05-29T09:25:53.943
> 
> 标签：compilation

有人可以对这些术语及其相互关联的方式做出明确的（对于新手）解释吗？（依赖、引用、导入、命名空间和程序集）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T09:36:12.977

依赖项是您的程序集在编译和构建它本身之前需要的资源，例如 dll 或 exe

引用是指向该依赖项的链接

导入是您用来利用该引用中的对象和项目的方法

该引用中的对象和项目被收集在称为命名空间的逻辑存储桶中。它是您导入的命名空间。

程序集是编译器和构建器的构造输出。它们又可以是可执行文件或服务，或者实际上是另一个组件所依赖的依赖项

# javascript - 如何在 JQGrid 中按行排序？

> ID：10796392
> 
> 赞同：1
> 
> 时间：2012-05-29T09:26:19.830
> 
> 标签：javascript, jquery, sorting, jqgrid

默认情况下， [JQGrid](http://www.trirand.com/blog/)支持按列排序。用户可以通过单击列标题对网格进行排序。也可以通过再次单击相同的列标题来切换排序方向。这可以在[JQGrid 演示](http://trirand.com/blog/jqgrid/jqgrid.html)中看到。

我需要将逐行添加到我的网格中。理想情况下，这将以完全相同的方式工作 - 用户可以单击行标题以按该行中的数据排序，然后再次单击以切换排序方向。

我试图用一个例子来说明排序。

按列“Col-1”排序：

```
       Col-1^ Col-2 Col-3
第 1 行 ABC
第 2 行 BCA
第 3 排驾驶室

```

按行'Row-2'排序：

```
       Col-3 Col-1 Col-2
第 1 行驾驶室
第 2 行^ ABC
第 3 行 BCA

```

如何将它添加到我的 JQGrid 中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T11:02:32.013

在我看来，您可以通过使用[onCellSelect](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:events)回调来完全实现您的要求，当我们单击网格中的单元格时会触发该回调，并且使用[remapColumns](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:methods)方法来更改列的顺序。要获取行数据，您可以使用`getRowData`方法。

**更新**：我建议您另外查看显示如何在网格中使用垂直标题[的答案。](https://stackoverflow.com/a/3979490/315935)我在具有复选框的列的示例中对其进行了解释，但它与任何内容的工作方式完全相同。

# javascript - jQuery 验证 + 通过 $.post 提交

> ID：10796394
> 
> 赞同：3
> 
> 时间：2012-05-29T09:26:30.780
> 
> 标签：javascript, jquery, html

*你好！*

我的问题**如下**：

验证插件对我来说很好，除了我不希望表单在它仍然无效时提交。

事实是，它验证并显示错误，但即使它无效，它也会提交。

* * *

**证实**

```
$("form#form-utilizadores").validate({
  rules:{
    nome:{
      required:true
    },
    utilizador:{
      required:true
    },
    password:{
      required:true
    },
    tipo:{
      required:true
    }
  }
}); 
```

* * *

**提交**

```
$('form#form-utilizadores').submit(function(e){
    e.preventDefault();
    var data = $(this).serialize();
    $.post('submit/submit-utilizadores.php',data,function(data){
      alert((data=='sucesso') ? 'Adicionado com sucesso!' : data);
      top.location.reload();
    }
  );
}); 
```

* * *

感谢您花时间帮助我！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T09:34:11.387

您应该将您拥有的代码`$('form#form-utilizadores').submit()`放入`submitHandler`jQuery 验证设置的参数中，试试这个：

```
$("form#form-utilizadores").validate({
    rules: {
        // your current rules...
    },
    submitHandler: function(form) {
        var data = $(form).serialize();
        $.post(    
            'submit/submit-utilizadores.php',
            data,
            function(data) {
                alert((data=='sucesso') ? 'Adicionado com sucesso!' : data);
                top.location.reload();
            }
        );
    }
}); 
```

始终提交当前代码的原因是`submit`，无论表单是否有效，都会引发表单事件。通过`submitHandler`让 jQuery 验证控制是否发布表单，这取决于它的有效性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T09:39:05.563

尝试在您的提交处理程序中添加此代码：

```
$('form#form-utilizadores').submit(function(e){
    e.preventDefault();
    if($(this).valid() == false){
        return;
    }
    .
    .
    . 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T09:30:41.730

如果您的验证失败，则从提交中返回 false。

# jquery - JQuery Mobile+Phone Gap：如何实现包含 2 个部分的（表）列表视图

> ID：10796400
> 
> 赞同：1
> 
> 时间：2012-05-29T09:26:55.677
> 
> 标签：jquery, android, iphone, jquery-mobile, cordova

我有使用实现表视图**`JQuery Mobile+Phone Gap`**

```
<ul data-role="listview">
  <li data-role="list-divider">A</li>
  <li><a href="index.html">Adam Kinkaid</a></li>
  <li><a href="index.html">Alex Wickerham</a></li>
  <li><a href="index.html">Avery Johnson</a></li>
  <li data-role="list-divider">B</li>
  <li><a href="index.html">Bob Cabot</a></li>

 </ul> 
```

它只显示一个部分的表格视图

我需要实施一个***`(table) list view with multiple sections`***

并设置***`the headers for the table view`***部分

怎么可能

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T09:33:21.430

您需要使用**List-Divider**元素：http: [//jquerymobile.com/demos/1.1.0/docs/lists/lists-divider.html](http://jquerymobile.com/demos/1.1.0/docs/lists/lists-divider.html)。

像这儿 ：

```
<ul data-role="listview">
  <li data-role="list-divider">A</li>
  <li><a href="index.html">Adam Kinkaid</a></li>
  <li><a href="index.html">Alex Wickerham</a></li>
  <li><a href="index.html">Avery Johnson</a></li>
  <li data-role="list-divider">B</li>
  <li><a href="index.html">Bob Cabot</a></li>
<u1> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T09:34:25.120

[http://jsfiddle.net/eFEjL/](http://jsfiddle.net/eFEjL/)

```
<ul data-role="listview">
                <ul data-role="listview">
  <li data-role="list-divider">A</li>
  <li><a href="index.html">Adam Kinkaid</a></li>
  <li><a href="index.html">Alex Wickerham</a></li>
  <li><a href="index.html">Avery Johnson</a></li>
  <li data-role="list-divider">B</li>
  <li><a href="index.html">Bob Cabot</a></li>
<u1>
 </ul> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T10:30:22.743

试试这个

```
<ul data-role="listview">
  <li data-role="list-divider">A</li>
  <li><a href="index.html">Adam Kinkaid</a></li>
  <li><a href="index.html">Alex Wickerham</a></li>
  <li><a href="index.html">Avery Johnson</a></li>
  <li data-role="list-divider">B</li>
  <li><a href="index.html">Bob Cabot</a></li>
<u1> 
```

检查此链接， [http://jquerymobile.com/demos/1.1.0/index.html#/demos/1.1.0/docs/lists/index.html](http://jquerymobile.com/demos/1.1.0/index.html#/demos/1.1.0/docs/lists/index.html)

# asp.net-mvc-3 - 使用 ASP.NET MVC3 在相关表中搜索

> ID：10796411
> 
> 赞同：0
> 
> 时间：2012-05-29T09:27:54.273
> 
> 标签：asp.net-mvc-3, linq

这是我的（简化的）代码：

**控制器**

```
var query = from f in _db.Firms
    where f.Name.ToLower().Contains(search.ToLower()) 
        || f.Keyword.ToLower().Contains(search.ToLower()) 
        || f.KeywordList.ToLower().Contains(search.ToLower())
    select f; 
```

**用户模型**

```
public class User
{
    [Key]
    public int ID { get; set; }

    public string Username { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }

    public int FirmID { get; set; }
    [ForeignKey("FirmID")] 
    public virtual Firm Firm { get; set; }
} 
```

**公司模式**

```
public class Firm
{
    [Key]
    public int ID { get; set; }

    public string Keyword { get; set; }
    public string KeywordList { get; set; }
    public string Name { get; set; }

    public virtual ICollection<User> Users { get; set; }
} 
```

我有一个控制器和一个视图，它确实列出了每个公司，它是数据库中的用户，其中包含某个字符串。到目前为止，这有效。现在，我还想列出公司，其中包含一个用户，该用户的用户名包含搜索字符串。我怎样才能做到这一点？

我的想法是这样的，但它不起作用，因为用户名在这里不可用：

```
var query = from f in _db.Firms
    where f.Name.ToLower().Contains(search.ToLower()) 
        || f.Keyword.ToLower().Contains(search.ToLower()) 
        || f.KeywordList.ToLower().Contains(search.ToLower())
        || f.Users.Username.ToLower().Contains(search.ToLower())
    select f; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T09:36:39.293

使用连接

```
from firm in _db.Firms
join user in _db.Users on firm.FirmId equals _db.Firm.FirmId
where f.Name.Equals(...) && user.Name.Equals(...) // any other qualifications
select firm; 
```

# sql - 从表的行创建两个列

> ID：10796412
> 
> 赞同：0
> 
> 时间：2012-05-29T09:27:57.067
> 
> 标签：sql, postgresql

我有这张表以及其他几列：

```
months    amount
-----------------
 Jan       100
 Feb       200
 Jan       400 
```

我想用这个表创建一个视图，使它像这样：

```
Jan    Feb
--------------------
100    200
400    0 
```

我搜索了它并得到了 PL/SQL 解决方案不能只用 SQL 查询来完成吗？谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T10:40:30.050

首先确保您有可用的交叉表

```
CREATE EXTENSION tablefunc; 
```

要获得您想要的交叉表，您至少需要三列

例如：

```
name    months    amount
-------------------------
Helga    Jan       100
Helga    Feb       200
Bernd    Jan       400 
```

然后你像这样创建你的交叉表：

```
SELECT * FROM 
   crosstab('SELECT name, month, amount from temp')
 AS ct(name varchar, jan int, feb int);

name       jan       feb
--------------------------
Helga     100        200
Bernd     400 
```

如果您打算每个月都有列，请按照[手册中所述的示例进行操作](http://www.postgresql.org/docs/9.1/static/tablefunc.html)

```
create table sales(year int, month int, qty int);
insert into sales values(2007, 1, 1000);
insert into sales values(2007, 2, 1500);
insert into sales values(2007, 7, 500);
insert into sales values(2007, 11, 1500);
insert into sales values(2007, 12, 2000);
insert into sales values(2008, 1, 1000);

select * from crosstab(
  'select year, month, qty from sales order by 1',
  'select m from generate_series(1,12) m'
) as (
  year int,
  "Jan" int,
  "Feb" int,
  "Mar" int,
  "Apr" int,
  "May" int,
  "Jun" int,
  "Jul" int,
  "Aug" int,
  "Sep" int,
  "Oct" int,
  "Nov" int,
  "Dec" int
);
 year | Jan  | Feb  | Mar | Apr | May | Jun | Jul | Aug | Sep | Oct | Nov  | Dec
------+------+------+-----+-----+-----+-----+-----+-----+-----+-----+------+------
 2007 | 1000 | 1500 |     |     |     |     | 500 |     |     |     | 1500 | 2000
 2008 | 1000 |      |     |     |     |     |     |     |     |     |      |
(2 rows) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T10:57:57.640

你的逻辑有问题，SQL怎么知道它应该是

```
Jan     Feb
100     200
400     0 
```

并不是

```
Jan     Feb
400     200
100     0 
```

我认为这意味着列应该按升序排列，（除了因为没有足够的数据而值为 0 的地方）：

```
WITH CTE AS
(   SELECT  Month, Amount, ROW_NUMBER() OVER(PARTITION BY Month ORDER BY Amount) AS RowNumber
    FROM    T
)
SELECT  COALESCE(Jan.Amount, 0) AS Jan,
        COALESCE(Feb.Amount, 0) AS Feb,
        COALESCE(Mar.Amount, 0) AS Mar
FROM    (   SELECT  RowNumber, Amount
            FROM    CTE
            WHERE   Month = 'Jan'
        ) jan
        FULL JOIN 
        (   SELECT  RowNumber, Amount
            FROM    CTE
            WHERE   Month = 'Feb'
        ) feb
            ON feb.RowNumber = Jan.RowNumber
        FULL JOIN 
        (   SELECT  RowNumber, Amount
            FROM    CTE
            WHERE   Month = 'Mar'
        ) Mar
            ON Mar.RowNumber = Jan.RowNumber 
```

此逻辑已在[SQL Fiddle](http://sqlfiddle.com/#!1/a51a0/1)中进行了测试，但是我相当确定您可以将 Rownumber 的使用应用于 CROSSTAB 以解决您当前在使用 CROSSTAB 时遇到的问题。RowNumber 成为你的行值，我从未在 postgres 中使用过 Crosstab，但我认为你最终会得到这样的结果：

```
SELECT  *
FROM    CROSSTAB('SELECT ROW_NUMBER() OVER(PARTITION BY Month ORDER BY Amount) AS RowNumber, Month, Amount FROM T',
                 'SELECT DISTINCT ROW_NUMBER() OVER(PARTITION BY Month ORDER BY Amount) AS RowNumber FROM  T') 
        AS (RowNumber INT, Jan INT, Feb INT, Mar INT); 
```

我无法在 SQL Fiddle 上使用它，但我认为这是因为 CROSSTAB 未启用，因为即使 Postgres 文档中的示例也不适用于 SQL Fiddle。

# ajax - 如何使用带有 AJAX JSON 数据的 jQuery 自动完成组合框？

> ID：10796413
> 
> 赞同：7
> 
> 时间：2012-05-29T09:27:57.813
> 
> 标签：ajax, jquery, autocomplete, combobox

我需要使用组合框执行以下操作。

*   `Select box`有一个用户可以搜索的默认城市列表。
*   如果用户在`input`框中输入文本，我需要进行 ajax 调用来获取数据并向用户显示选项。
*   如果根据用户请求获取数据，则应将这些城市附加到`Select box`

使用[jQuery 自动完成功能](http://jqueryui.com/demos/autocomplete/#remote)，我可以在用户输入字符串并显示结果时获取 json 数据。但是，我对如何使用组合框集成它一无所知。

[Combobox](http://jqueryui.com/demos/autocomplete/#combobox)使用静态数据数组进行搜索，如果我理解正确，则使用正则表达式来匹配值。但是，如何中断它并使用 ajax 调用从服务器获取数据并更新结果？

输入文本框的自动完成：

```
$( "#searchDestination" ).autocomplete({
        delay: 500,
        source: function( request, response ) {
            $.ajax({
                url: "/wah/destinationsJson.action",
                dataType: "json",
                data: {
                    term: request.term
                },
                type: "POST",
                success: function(data){
                    if(data.cities.length == 0)
                        return response(["No matching cities found for " + request.term]);
                    response( $.map(data.cities, function(item){
                        return{
                            label: item.name,
                            value: item.name
                        };
                    })
                    );
                }
            });
        },
        minLength: 2

    });
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T09:58:23.273

这可能对您有所帮助..我使用的[另一个自动完成](http://www.devbridge.com/projects/autocomplete/jquery/)插件。

也读[这个](https://stackoverflow.com/questions/10286811/issue-with-json-parsing/10780522#10780522)

如果要在文本字段中动态加载数据，请使用上述插件。否则，如果您想使用组合框，则只需在 ready() 上加载数据并使用 jquery 自动完成插件！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-08T23:24:45.480

你为什么不复制插件和两个组合框。

然后：

```
 $( "#combobox1" ).combobox1({
          select: function (event, ui) { 
           var value = ui.item.value;/*Whatever you have chosen of this combo box*/
            $.ajax({
              type: "POST",
              dataType: 'json',
              url: "script.php",
              data: {
                'anything':value
              },
              success: function(res)
              {
                /*replace your next combo with new one*/
                $("select#combobox2").html(res);
              }
          });
        }
    });
   $( "#toggle" ).click(function() {
    $( "#combobox1" ).toggle();
   });

   $( "#combobox2" ).combobox2();

   $( "#toggle" ).click(function() {
    $( "#combobox2" ).toggle();
   }); 
```

PHP 文件（这是基于 Codeigniter）：

```
<?php   
   $data['response'] = 'false';
   $keyword = $_POST['anything'];
   $query4 = $this->db->query("SELECT * FROM table WHERE field='".$keyword."'");
   $data.= "<option></option>";
   if($query4->num_rows() > 0)
   {
       foreach($query5->result_array() as $row)
       {
         $data.= "<option>".$row['something']."</option>";
       }
   }
   echo json_encode($data);
}
?> 
```

希望这可以帮助。

# delphi - 如何实现 indexed [] 默认属性

> ID：10796417
> 
> 赞同：15
> 
> 时间：2012-05-29T09:28:05.770
> 
> 标签：delphi, class

我有一个在 TStringList 中保存多个文件名的类。我可以使用以下索引访问特定文件名：

```
myclass.stringlistclass[index] 
```

但是如何使用以下语法获取文件名？

```
myclass[index] 
```

有没有我可以实现的属性来实现这个功能？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-29T09:38:42.857

```
private
  function GetColumnValue(const ColumnName: string): string; overload;
  function GetColumnValue(Index: Integer): string; overload;
  procedure SetColumnValue(Index: integer; const Value: string);
public
  property Values[const ColumnName: string]: string read GetColumnValue; default;
  property Values[ColumnIndex: integer]: string read GetColumnValue write SetColumnValue; default;
end; 
```

这表示：

*   你可以有多个`default`索引器属性
*   多个索引器属性可以具有相同的名称，*例如*，`Values`
*   属性 getter 可以是重载（*即*具有相同的名称） ，*例如*，`GetColumnValue`
*   Delphi 将通过类型签名解决重载

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-05-29T09:30:14.110

在索引属性上使用“默认”关键字。~~每个类可以有一个默认属性。~~

每个类可以有多个默认属性，但是这些默认属性必须具有相同的名称。

一个例子：

```
 property Item[const Coordinate: TPoint]: TSlice read GetSlice write SetSlice; default;
    property Item[x,y: integer]: TSlice read GetSlice write SetSlice; default; 
```

您甚至可以让 getter 和 setter 共享相同的名称，只要它们具有`overload`指令即可。

# javascript - JavaScript 搜索和突出显示文本

> ID：10796424
> 
> 赞同：0
> 
> 时间：2012-05-29T09:28:27.000
> 
> 标签：javascript, jquery, search

> **可能重复：**
> [在 JavaScript/JQuery 中为实时搜索实现突出显示功能](https://stackoverflow.com/questions/10247368/implementing-a-highlight-feature-for-a-live-search-in-javascript-jquery)

假设我有一个 div：

```
<div id="content">Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</div> 
```

基本上我想通过 javascript 进行搜索，然后突出显示结果。因此，假设搜索查询是`magna aliqua`. 我正在执行以下操作：

```
$("#content:contains('magna aliqua')").addClass("highlight"); 
```

这有效，但将 highlight 类应用于整个 div `content`。我想要的是仅突出显示确切的单词 magna aliqua，这意味着我必须以某种方式将文本包装在标签中，然后在该新标签上应用突出显示类。

做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T09:41:50.803

尝试这个...

```
word = 'magna aliqua'
var rgxp = new RegExp(word, 'g');
var repl = '<span class="myClass">' + word + '</span>';

var element = $("#content:contains(word)");
element.html(element.html().replace(rgxp, repl)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T09:40:03.047

很棒的插件`highlight`。这个 fork 支持正则表达式搜索。

[http://beatgates.blogspot.com/2011/07/extend-jqueryhighlight-to-highlight.html](http://beatgates.blogspot.com/2011/07/extend-jqueryhighlight-to-highlight.html)

# php - 使用生成的数字对 PHP 结果进行排序

> ID：10796425
> 
> 赞同：0
> 
> 时间：2012-05-29T09:28:28.110
> 
> 标签：php, search

我已经整理了一个迷你搜索算法，它根据他们输入的内容以及测试正文中的链接数量、垃圾邮件等因素为搜索结果分配分数。

不幸的是，我不知道如何根据这个数字生成的结果来排序结果。关于在分配给它的“分数”上排序 PHP 结果的任何想法？我应该补充一点，这个分数并不保存在数据库中，而是每次都根据用户搜索的内容生成。

好的，所以这会根据使用的搜索词按顺序列出所有结果，我需要它按“TotalScore”排序，但我不知道该怎么做......

这是代码：

```
$refType = $_GET["ref"];
$setLimit = $_GET["list"];

//CATCH & SECURE THE QUERY
$q = mysql_real_escape_string($_GET["q"]);

//SET LISTING VALUE IF CHOSEN, DEFAULT 10
if(!$setLimit || $setLimit == "0"){
$setLimit = "10";
} else {
$setLimit = $_GET["list"];
}

//GET NUMBER OF WORDS IN QUERY & RETURN ERROR IF MORE THAN 12

$searchTermCount = str_word_count($q);
if($searchTermCount > 12){
$searchLine = "";
$searchList = "Your search contained too many words! Please go back and try again, use less than 12 words to find what you are looking for.";
} else if($q == "" || !$q || $q == " "){
$searchLine = "";
$searchList = "You did not submit a search term! Please go back and enter your city into the search bar!";
} else {

$searchLine = "Your search for " . $q . " found the following results";

//PUT NEW ALGORITHM HERE

$findDetails = mysql_query("SELECT * FROM [TABLENAME] WHERE upper(city) like '%$q%' AND verified='1' OR upper(county) like '%$q' AND verified='1' OR upper(title) like '%$q%' AND verified='1' OR upper(intro) like '%$q%' AND verified='1' OR upper(content) like '%$q%' AND verified='1' ORDER BY datePosted DESC LIMIT $setLimit");
while($row = mysql_fetch_array($findDetails)){
    $adId = $row["id"];
    $adTitle = $row["title"];
    $adIntro = $row["intro"];
    $adCity = $row["city"];
    $adCounty = $row["county"];
    $adVerified = $row["verified"];
    $cutIntro = substr($adIntro, 0, 140);

    $numberOfResults = mysql_num_rows($findDetails);

    $findReviews = mysql_query("SELECT * FROM [TABLENAME2] WHERE adventureID='$adId'");
    $findReviews = mysql_num_rows($findReviews);

    $titleScore = "";
    $introScore = "";
    $contentScore = "";

    //CUT SEARCH TERM
    $qBreak = explode(" ", $q);
    foreach($qBreak as $qWord){ 
    $titleScore = $titleScore+substr_count($adTitle, $qWord);
    $introScore = $introScore+substr_count($adIntro, $qWord);
    $contentScore = $contentScore+substr_count($adContent, $qWord);
    }

    $totalScore = $titleScore+$introScore+$contentScore;

    $searchList .='
    <div style="width: 100%;" class="result' . $totalScore . '">
    ' . $adTitle . '<br />' . $adIntro . '<br /><br />' . $adContent . '
    <br /><br /><br />
    Total Score: ' . $totalScore . '<br />
    Title Score: ' . $titleScore . '<br />
    Intro Score: ' . $introScore . '<br />
    Content Score: ' . $contentScore . '<br /><br />
    </div>
    ';

}

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T09:31:24.327

查看[usort](http://php.net/usort)函数。你为它提供了一个你自己的比较函数，它比较数组的两个元素。编写一个比较数组中两个元素的分数的回调函数应该很容易。

# maven - 为什么 Maven 要下载所有版本的 Groovy？

> ID：10796430
> 
> 赞同：3
> 
> 时间：2012-05-29T09:28:55.773
> 
> 标签：maven, groovy

在我的项目的 POM 中，我放置了以下依赖项：

```
<dependency>
    <groupId>org.codehaus.groovy</groupId>
    <artifactId>groovy-all</artifactId>
    <version>1.8.6</version>
</dependency> 
```

以及以下编译器插件：

```
<plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-compiler-plugin</artifactId>
    <version>2.4</version>
    <configuration>
        <compilerId>groovy-eclipse-compiler</compilerId>
        <verbose>true</verbose>
    </configuration>
    <dependencies>
        <dependency>
            <groupId>org.codehaus.groovy</groupId>
            <artifactId>groovy-eclipse-compiler</artifactId>
            <version>2.6.0-01</version>
        </dependency>
    </dependencies>
</plugin> 
```

所以我希望 Maven 下载 Groovy 的 1.8.6 jar，但它似乎试图下载曾经发布的*每个jar！*

```
[WARNING] The POM for org.codehaus.groovy:groovy:jar:1.5.5-SNAPSHOT is missing, no dependency information available
[WARNING] The POM for org.codehaus.groovy:groovy:jar:1.5.6-SNAPSHOT is missing, no dependency information available
[WARNING] The POM for org.codehaus.groovy:groovy:jar:1.5.7-SNAPSHOT is missing, no dependency information available
[WARNING] The POM for org.codehaus.groovy:groovy:jar:1.6-beta-1-SNAPSHOT is missing, no dependency information available
[WARNING] The POM for org.codehaus.groovy:groovy:jar:1.6-beta-2-SNAPSHOT is missing, no dependency information available
[WARNING] The POM for org.codehaus.groovy:groovy:jar:1.6-RC-1-SNAPSHOT is missing, no dependency information available
[WARNING] The POM for org.codehaus.groovy:groovy:jar:1.6-RC-2-SNAPSHOT is missing, no dependency information available
[WARNING] The POM for org.codehaus.groovy:groovy:jar:1.6.1-SNAPSHOT is missing, no dependency information available
[WARNING] The POM for org.codehaus.groovy:groovy:jar:1.6.3-SNAPSHOT is missing, no dependency information available
[WARNING] The POM for org.codehaus.groovy:groovy:jar:1.6.5-SNAPSHOT is missing, no dependency information available
[WARNING] The POM for org.codehaus.groovy:groovy:jar:1.7-beta-1-SNAPSHOT is missing, no dependency information available
[WARNING] The POM for org.codehaus.groovy:groovy:jar:1.7-rc-2-SNAPSHOT is missing, no dependency information available 
```

是什么导致了这种奇怪的行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T20:04:58.390

请参阅：[groovy-eclipse-compiler-2.6.0-01.pom](https://repo1.maven.org/maven2/org/codehaus/groovy/groovy-eclipse-compiler/2.6.0-01/groovy-eclipse-compiler-2.6.0-01.pom)

```
<dependency>
    <groupId>org.codehaus.groovy</groupId>
    <artifactId>groovy-eclipse-batch</artifactId>
 <version>[1.7.10-02,1.7.10-99],[1.8.2-01,1.9.0)</version> 
</dependency> 
```

它需要所有版本。添加

```
<repository>
      <id>codehaus-snapshots</id>
      <name>Codehaus Snapshots</name>
      <url>http://nexus.codehaus.org/snapshots/</url>
      <releases>
        <enabled>false</enabled>
       </releases>
       <snapshots>
         <enabled>true</enabled>
      </snapshots>
</repository> 
```

如果您需要快照，请发送到您的 pom。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T22:35:42.803

我遇到了同样的问题并通过以下方式解决了它：

```
<repository>
  <id>Codehaus.Snapshots</id>
  <url>http://snapshots.repository.codehaus.org</url>
  <snapshots>
    <updatePolicy>never</updatePolicy>
    <enabled>false</enabled>
  </snapshots>
</repository> 
```

# iphone - 如何减少在 NSOperationQueue 中使用 waitUntilAllOperationsAreFinished 的时间延迟

> ID：10796435
> 
> 赞同：1
> 
> 时间：2012-05-29T09:29:18.143
> 
> 标签：iphone, objective-c

我正在使用 NSOperationQueue 来获取设备的照片。当我回去时，我在打电话

```
[queue cancelAllOperations];
[queue waitUntilAllOperationsAreFinished]; 
```

这些线取消操作。操作取消得很好，但是返回上一页需要一些时间。

如何减少时间延迟。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T03:36:16.817

cancelAllOperations 不会立即取消当前正在执行的 NSOperation，它只会向它发送取消消息（请参阅文档）。您可以定期检查操作是否已取消。例如：

```
if (!self isCancelled) {
    // continue executing
} 
```

或者，您可以使用 Key Value Observer 来监视 -cancel 信号（[此处](https://stackoverflow.com/a/2957113/465893)的示例）。

作为旁注，在“cancelAllOperations”之后调用“waitUntilAllOperationsAreFinished”是多余的。由于您首先调用 cancelAllOperations，它应该立即返回。

最后，如果您还没有阅读[并发编程指南](http://developer.apple.com/library/ios/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40008091)，我强烈建议您阅读。多线程是一个非常复杂但非常宝贵的编程工具，它极大地帮助我理解了 Objective-C 实现的原理。

# php - php explode返回错误值

> ID：10796437
> 
> 赞同：0
> 
> 时间：2012-05-29T09:29:25.497
> 
> 标签：php, mysql, explode

我正在提交一个表单并将值插入到我的 mysql 数据库中。它选择的表单元素之一具有选项值，例如 11#120#12 (id#cost#months)。

我执行以下操作：

```
$plan = explode("#", $_POST['symb']);
$plan = $plan[0];
$cost = $plan[1]; 
```

然后提交到我的数据库

```
echo $insertSQL = sprintf("INSERT INTO users (username, plan, cost) VALUES (%s, %s, %s)",
                       GetSQLValueString($_POST['username'], "text"),
                       GetSQLValueString($plan, "text"),
                       GetSQLValueString($cost, "int")); 
```

问题是 $cost 得到了错误的值，而不是 120 它得到了 1 作为值。错误在哪里？（贴出的sql语句只是实际查询的一部分，仅供演示）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T09:31:58.063

`$plan`在尝试`$cost`从最初存储在其中的数组中提取之前，不要用字符串值覆盖。

要么更改第一个（并`$plan`在`$plan = $plan[0];`脚本后面更改对它的每个引用），要么移动该行使其出现在`$cost = $plan[1];`.

（为了清楚起见，我建议使用前一个选项）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T09:36:36.173

```
$plan = explode('#',$_POST['symb']);
$p = $plan[0];
$cost = $plan[1]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T09:45:07.507

在第 2 行，$plan 被赋值为“11”（即 $plan[0]），在第 3 行，$plan[1] 引用了字符串中的第二个字符“1”。

上面的评论已经告诉你如何解决它。

# c++ - 系统未达到 100% CPU 如何排除故障

> ID：10796440
> 
> 赞同：0
> 
> 时间：2012-05-29T09:29:36.230
> 
> 标签：c++, performance, architecture, profiling

我有一个具有以下属性的应用程序（基本上是 C++ 应用程序）

*   多线程
*   每个线程都有自己的线程属性（如堆栈大小等）。
*   多进程（即将运行多个进程）。
*   在 8 核处理器上运行。
*   使用共享内存/IPC/扩展堆管理（分配/释放）、系统睡眠等。

所以现在，我应该在最大 CPU 下找到系统 CAPS。理想的方法是将系统加载到 100% CPU，然后他们检查系统支持的 CAPS（成功）。

我知道，在复杂的系统中，CPU 将因上下文切换、页面交换、I/O 等而“死”。但我的系统最大能够以 95% 的 CPU 运行（不超过该值，与负载无关）。所以这里的想法是找出真正导致“CPU消耗”的这些点，然后看看我是否可以设计它们来减少/消除未使用的CPU。

**问题**

1.  我们如何找出哪个 IO/上下文切换...等是不可征服的 5% CPU 的原因？有什么工具可以做到这一点吗？我知道 OProfile/Quantify 和 vmstat 报告。但他们都不会提供这些信息。
2.  可能有一些我不知道的操作 - 这可能会限制 MAX CPU 利用率。任何可以帮助我理解将减少 CPU 使用率的详细操作集的链接/文档都会非常有帮助。

**编辑 1：** 添加了更多
信息 有问题的操作系统是 SUSE10 Linux 服务器。
湾。CAPS - 这是您每秒可以在系统上运行的平均 CALLS。基本上是一个电信术语 - 但它可以被认为是通用的 - 假设您的应用程序提供协议实现。您每秒可以进行多少次协议调用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T10:33:10.363

“100% CPU”是一个方便的工程概念，不是数学上的绝对值。它的含义没有客观的定义。例如，在 DRAM 上等待的时间通常计为 CPU 时间，但在 Flash 上等待的时间则计为 I/O 时间。戴上我的硬件帽，我会说闪存和 DRAM 都是固态单元组织存储器，可以同样对待。

因此，在这种情况下，出于工程目的，您的系统以“100% CPU”运行。负载受 CPU 限制，您可以在此状态下测量每秒调用次数。

# c# - 在 ASP.NET 中运行应用程序

> ID：10796447
> 
> 赞同：0
> 
> 时间：2012-05-29T09:30:19.500
> 
> 标签：c#, asp.net, web-applications

我用 C# 编写了一个应用程序，现在我想在 ASP.NET 网站 (MVC 2) 中托管它。

该应用程序可能会占用大量资源，因此我想以这样一种方式设置系统，即每个用户都下载该应用程序并在本地运行它，但仍然在我提供的网页中。

我解决这个问题的第一个想法是将程序托管在 silverlight 应用程序中。但是，我要托管的应用程序不是为 Silverlight 编译的，我想在其中使用 MySQL，这似乎也不能直接使用（即中间没有 Web 服务）。

最重要的是，还没有直接使用这些东西的经验，我需要研究使任何解决方案成为可能的方法。所以我真的很感激一些意见，让我朝着正确的方向前进，而不必在找到正确的选项之前实施 3 个错误的选项。如果可能的话，我也很想避免使用 JavaScript。

提前致谢。

**更新**

我可能应该从应用程序的确切内容开始。我想在网站上托管的应用程序是一个简单的聊天程序。它需要一个输入框和文本输出。旧的 windows 窗体应用程序不必在 ASP 中运行，但我想使用它背后的类库，它是一个聊天机器人引擎。该引擎是资源密集型的部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T09:41:29.253

如果您的应用程序不是 Web 应用程序，那么它将不会在服务器上运行。您的服务器唯一要做的就是提供下载位置。为此，您不需要 MVC 站点 - 静态页面就可以了。运行在客户端的普通应用程序和运行在 IIS 上的服务器应用程序之间的编程模型是完全不同的。简而言之：您将无法在 ASP.NET MVC 中托管您的客户端应用程序。如果这是一个要求，您最终将重写应用程序。

如果您的应用程序是 ASP.NET WebForms 并且它变得太耗资源，那么您可能无法通过切换到 MVC 来解决它。然后您有不同的选择：在服务器端提供更多资源，分析可以采取哪些措施来降低所需资源或远离基于服务器的应用程序。这不是一个黑白决定，也许组合可能适合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T09:40:43.653

因此，您编写了一个“富客户端”应用程序，并希望将其用作 Web/silverlight 应用程序。正如您可能猜到的那样，如果不更改应用程序的架构，这是不可能的，特别是因为您必须连接数据库。如果重写应用程序以支持这种架构不是一种选择，那么对我来说最好的方法是使用[Remote Desktop](http://windows.microsoft.com/en-us/windows-vista/Connect-to-another-computer-using-Remote-Desktop-Connection)，但您必须支付许可证才能支持许多连接。

# sql - 按特定应用程序或服务列出 SQL Server 数据库、大小和利用率的脚本

> ID：10796449
> 
> 赞同：5
> 
> 时间：2012-05-29T09:30:30.337
> 
> 标签：sql, database, tsql, sql-server-2008-r2

我不确定它是否可能，但非常感谢任何帮助。

我正在寻找一个脚本，它可以生成 SQL Server 数据库的完整列表，其中包含 SQL Server 实例的每个数据库的以下详细信息：

*   姓名
*   尺寸
*   特定应用程序或服务的利用率
*   硬件利用率（CPU、内存、I/O 等）

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-12-10T00:45:05.273

使用 EXEC sp_databases 可能会显示错误的数据库大小。这是一个不错的、可靠的查询，它将提供所有数据库名称、大小和状态，但不知道哪些应用程序正在使用这些数据库：

```
SELECT
    D.name,
    F.Name AS FileType,
    F.physical_name AS PhysicalFile,
    F.state_desc AS OnlineStatus,
    CAST((F.size*8)/1024 AS VARCHAR(26)) + ' MB' AS FileSize,
    CAST(F.size*8 AS VARCHAR(32)) + ' Bytes' as SizeInBytes
FROM 
    sys.master_files F
    INNER JOIN sys.databases D ON D.database_id = F.database_id
ORDER BY
    D.name 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-29T12:06:09.203

要仅获取一般信息（数据库名称、文件和大小），您可以成功运行“sp_databases”存储过程：

```
exec sp_databases 
```

如果上述方法在 SQL Server 2000 中不起作用，您可以尝试以下方法：

```
select *
from sys.sysdatabases 
```

但是您可以使用 SQLServer 附带的“SQL Profiler”获得更详细的跟踪和审计数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T12:56:08.040

您可以将[Nagios](http://www.nagios.com/solutions/mssql-monitoring)用于各种监控任务。Nagios 提供对 MSSQL 的完整监控——包括可用性、数据库和表大小、缓存比率以及其他关键指标。

# iphone - 如何以编程方式显示返回样式 UIBarButtonItem

> ID：10796454
> 
> 赞同：0
> 
> 时间：2012-05-29T09:31:04.023
> 
> 标签：iphone

当我的一个应用程序从一个控制器导航到另一个控制器时，“返回” UIBarButtonItem 消失了，所以我编写了代码：

```
 UIBarButtonItem *barButton1 = [[UIBarButtonItem alloc] initWithTitle:@""
                                                                       style:UIBarButtonItemStyleDone
                                                                      target:self
                                                                      action:@selector(barButtonItemPressed:)];
        self.navigationItem.leftBarButtonItem = barButton1;
        [barButton1 setImage:[UIImage imageNamed:@"fdj.png"]];
        [barButton1 release]; 
```

它有效，但显示为

![在此处输入图像描述](../Images/db7bd80c8568c8937d6b7490afdd4ca7.png)

但我更喜欢这种风格（比如标准的 go back barbuttonitem

![在此处输入图像描述](../Images/ece7915a5a217664a15d4dc872ecd12b.png)

可能吗？

欢迎任何评论

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T09:37:31.173

您应该编辑`navigationItem`父视图控制器的：

你可以把它放在`viewDidLoad`前一个视图控制器中：

```
 self.navigationItem.backBarButtonItem = [[[UIBarButtonItem alloc] initWithTitle:nil style:UIBarButtonItemStylePlain target:nil action:nil] autorelease];
 self.navigationItem.backBarButtonItem.image = [UIImage imageNamed:@"fdj.png"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T09:40:26.337

这是您如何执行此操作的代码

```
UIButton *btnBack = [UIButton buttonWithType:UIButtonTypeCustom];
btnBack.frame = CGRectMake(0, 0, 55, 36);
[btnBack setImage:[UIImage imageNamed:@"btnBack"] forState:UIControlStateNormal];
[btnBack setImage:[UIImage imageNamed:@"btnBack"] forState:UIControlStateSelected];
[btnBack addTarget:self action:@selector(onClickBack) forControlEvents:UIControlEventTouchUpInside];

UIBarButtonItem *item4 = [[UIBarButtonItem alloc] initWithCustomView:btnBack];

self.navigationItem.leftBarButtonItem = item4; 
```

只需制作图像并将其设置在 uibutton 中，这是执行此操作的简单方法。你可以设置任何你想要的图像。希望这可以帮助你想要什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T09:40:37.307

在**父**视图控制器的init方法中，设置

```
self.navigationItem.backBarButtonItem = [[[UIBarButtonItem alloc] initWithImage: [UIimage imageNamed: @"fdj.png"] 
                                                                          style: UIBarButtonItemStyleBordered 
                                                                         target: nil 
                                                                         action: nil] autorelease]; 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-05-29T10:41:23.127

这是我在我的一个旧项目中使用的（是的，我知道它`stretchableImageWithLeftCapWidth`已被弃用）。

```
@implementation UIViewController (UIView_ExtenderClass) // this is a category, obviously

...

-(void)setLeftButton:(id)theTarget navItem:(UINavigationItem *)myNavItem action:(SEL)myAction title:(NSString *)myTitle;
{
  CGSize titleWidth = [myTitle sizeWithFont:[UIFont boldSystemFontOfSize:14.0]];
  UIButton *button = [[UIButton alloc] initWithFrame:CGRectMake(0, 0, titleWidth.width + 20, 32)];
  [button setTitle: [NSString stringWithFormat:@"   %@", myTitle] forState:UIControlStateNormal];
  button.titleLabel.font = [UIFont boldSystemFontOfSize:14.0];

  [button addTarget:theTarget action:myAction forControlEvents:UIControlEventTouchUpInside];

  UIImage *imgBack = [UIImage imageNamed:@"32_left_nav_bar.png"];
  UIImage *imgBackStretched = [imgBack stretchableImageWithLeftCapWidth:15 topCapHeight:0];
  UIImage *imgBackSelected = [UIImage imageNamed:@"32_left_nav_bar_selected.png"];
  UIImage *imgBackSelectedStretched = [imgBackSelected stretchableImageWithLeftCapWidth:15 topCapHeight:0];

  [button setBackgroundImage:imgBackStretched forState:UIControlStateNormal];
  [button setBackgroundImage:imgBackSelectedStretched forState:UIControlStateHighlighted];

  UIBarButtonItem *buttonItem = [[UIBarButtonItem alloc] initWithCustomView:button];
  [buttonItem setTarget:theTarget];

  myNavItem.leftBarButtonItem = nil;
  myNavItem.leftBarButtonItem = buttonItem;

  [imgBack release];
  [imgBackSelected release];

  [button release];
  [buttonItem release];
} 
```

`viewDidLoad`在第二个控制器中调用它，如下所示：

```
[self setLeftButton:self navItem:self.navigationItem action:@selector(yourActionHere) title:@"Back"] 
```

我使用的图片在这里：http: [//i49.tinypic.com/6qfzfs.png](http://i49.tinypic.com/6qfzfs.png)

# bash - 为 cd 编写包装器 - 回显自定义错误消息或让 cd 的错误消息冒泡？

> ID：10796455
> 
> 赞同：0
> 
> 时间：2012-05-29T09:31:18.080
> 
> 标签：bash

我正在编写一个 bash 函数，它基本上包装了 cd 命令，添加了一些额外的功能。

这可以正常工作，但是一旦出现问题（给定路径不存在，用户没有足够的权限进入目录），就会向用户显示来自 cd 的错误消息。

简单的例子：

```
$ echo $PWD
/home/helpermethod/workspace
$ up helpermethod # goes up to the first directory named helpermethod
$ echo $PWD
/home/helpermethod
$ up foo
bash: cd: /home/helpermethod/foo: No such file or directory 
```

是否可以让这些错误消息冒泡，或者我应该向用户提供更有意义的东西（并隐藏实际的实现）？

**编辑**

该功能将被（希望）很多用户使用。

**编辑 2**

该函数的作用...`up`让用户输入当前目录上方目录的基本名称。

所以如果你有例如

$ echo $PWD /home/helpermethod/workspace/java

然后你输入

```
$ up home 
```

被`PWD`取走，basename 之后的部分从`PWD`.

如果有多个目录具有相同的基本名称，它还允许输入“路径”：

```
$ echo $PWD
/foo/baz/foo/bar
$ up baz foo # go to foo, which lies above baz 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T09:34:42.423

这完全取决于您的要求。你是为自己写这个函数吗？如果是这样，它只取决于你的喜好。你是给别人写的吗？然后这取决于他们的喜好和要求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T13:06:34.537

您是否提供自己的错误消息取决于提供的错误消息在`cd`您的函数功能的上下文中是否有意义。由于您尚未描述函数的功能集，因此无法判断某些消息是否被替换后是否更有意义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T14:26:38.720

我会自己处理常见的错误情况，给出更好的错误，然后让不常见的错误冒出来。例如，输入错误的字符串很可能经常发生，而错误消息并没有提供太多信息。更好的说法是：`No such directory foo in current directory hierarchy`或者什么。事实上，这似乎是一个错误情况，当您尝试进行字符串处理时，您应该几乎可以免费获得。但是`cd`，如果您有权限错误，或者整个树在此期间消失了，或者其他什么，您可能会很好地排除错误。

# php - Zend Fetch 在大表上 10,000 + 行，~100 列

> ID：10796456
> 
> 赞同：1
> 
> 时间：2012-05-29T09:31:19.470
> 
> 标签：php, zend-framework, zend-db-table

我有一个 sql 视图，它返回超过 10,000 条记录，大约 120 列（荒谬，我知道）。

视图数据是使用 Zend_Db_Table_Abstract 对象从 PHP 中的数据库收集的。我们有一个报表控制器，它执行 fetchAll（这显然会创建一个庞大的数组）并将该数组存储在一个视图对象中。接下来我们有一个视图脚本，它遍历数组并回显一个 json 格式的数组。

这很慢www。渲染此报告需要超过 1 分钟，我该怎么做才能加快速度？

请记住，我对这个项目非常陌生，对 Zend 和 PHP 知之甚少。此外，由于数据保护等原因，我不能放弃太多。

如果您可以询问您需要什么来帮助您收集图片，那就太好了。但基本上这就是脚本的作用：

报告控制器：

```
Setup some basic json report data (for data tables)
$this->view->report_data = fetchALL($oSelect); 
```

查看脚本：

```
Output the basic json stuff, then:
"report_data": [
<?php 
    for($i = 0; $i < count($this->report_data); $i++){
        echo "[";
        foreach($this->columns as $k=>$col){
            echo '"'. $this->escape($this->report_data[$i][$col]) .'"';
            if($k < count($this->columns) -1 ){
                echo ',';
            }
        }
        echo "]";
        if($i < count($this->report_data) -1){
            echo ",";
        }
        echo"\n";
    }
?> ] 
```

因此，在做了一些研究之后，我收集到我可以使用 fetch() 而不是 fetchAll() 以便一次获取 1 行，以避免庞大的数组。但是我尝试使用 fetch() 并收到此错误：

调用未定义的方法`Zend_Db_Table_Abstract::fetch()`

所以现在我很沮丧。

我的想法是获取每一行并输出 Json 格式的每一行，但是我真的不知道如何在报表控制器/视图场景中执行此操作。我是否必须摆脱视图脚本而只使用控制器来输出数据？

无论如何为什么不起作用`fetch()`，我实际上也无法在文档中看到它，好吧有一些数组`function _fetch()`

任何帮助将不胜感激，如果您需要更多信息，请询问。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T09:43:55.850

请参阅[fetch()](http://framework.zend.com/manual/en/zend.db.statement.html#zend.db.statement.fetching.fetch)的文档。

以下不是很优雅，但可以帮助您：

模型：

```
...
function getResults()
{
    return $db->query('SELECT * FROM bugs');
}
... 
```

控制器：

```
...
$this->view->report_data = $model->getResults();
... 
```

看法：

```
...
while ($row = $stmt->fetch(PDO::FETCH_OBJ)) {
    echo Zend_Json::encode($row);
}
... 
```

我没有测试过代码，但你应该明白了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T10:09:39.090

您必须在此处即兴使用框架以获得额外的性能

在控制器中

```
$this->view->result = mysql_query($sql); 
```

在视图中

```
while ($row = mysql_fetch_assoc($this->result)) {
 echo json_encode($row);
} 
```

注意设置mysql程序界面阅读 [http://php.net/manual/en/function.mysql-fetch-assoc.php](http://php.net/manual/en/function.mysql-fetch-assoc.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T10:26:20.447

正如您从错误消息中意识到的`Zend_Db_Table_Abstract`那样，没有`fetch()`方法。但是，它确实有一个`fetchRow()`具有此签名的方法：-

```
/**
 * Fetches one row in an object of type Zend_Db_Table_Row_Abstract,
 * or returns null if no row matches the specified criteria.
 *
 * @param string|array|Zend_Db_Table_Select $where  OPTIONAL An SQL WHERE clause or Zend_Db_Table_Select object.
 * @param string|array                      $order  OPTIONAL An SQL ORDER clause.
 * @param int                               $offset OPTIONAL An SQL OFFSET value.
 * @return Zend_Db_Table_Row_Abstract|null The row results per the
 *     Zend_Db_Adapter fetch mode, or null if no row found.
 */
public function fetchRow($where = null, $order = null, $offset = null) 
```

所以用 fetchRow() 替换 fetch() 并循环 while`!null === fetchRow()`应该适合你。

深入研究 Zend Framework 的代码以查看提供的内容总是值得的。

[Zend Paginator](http://framework.zend.com/manual/en/zend.paginator.html)也可能是您的一个选项，因为它只获取呈现页面所需的记录。

# wpf - 冒泡 WPF Datagrid Item 事件

> ID：10796459
> 
> 赞同：0
> 
> 时间：2012-05-29T09:31:35.757
> 
> 标签：wpf, events, datagrid

我有一个带有`ItemsSource`ObservableCollection (OC) 对象的数据网格。当一个项目的属性发生变化时，我想在 OC 本身上工作。

例如，我有一个项目被批准上传到我们的数据库。但是，我需要遍历 OC 以检查集合中是否存在其他已符合设置条件的项目，这样我实际上可能不必上传所选项目。

在数据网格上，当我勾选一个项目的复选框时，它将更改项目的布尔值（例如“IsToUpload”），并且应该在属性更改时触发一个事件。

**我假设我需要将我的事件通知“冒泡”到 datagrid/mainwindow 类，然后我可以在 OC 上工作。我该怎么做，如果这不是正确的方法，我应该怎么做？**

我已经按照 Aran Mulholland 的类结构动态地为我的行着色：[Coloring WPF DataGridRows one by one](https://stackoverflow.com/questions/2046104/coloring-wpf-datagridrows-one-by-one)

所以我的班级结构大致如下：

```
MainWindow -> DataGrid 
   -> ObservableCollection<ItemObjectViewModel:NotificationObject>

ItemObject : INotifyPropertyChanged //this class is where I 
    //store my item variables. It is referenced through properties 
    //in the ItemObjectViewModel. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T11:00:36.523

事件冒泡\路由等适用于视觉\逻辑树中的依赖对象。Your`NotificationObject`不是依赖对象，也不是托管在可视树中......我们在可视树中拥有的是复选框（绑定到 your `NotificationObject`）。

**非 MVVM**

在您的 DataGrid 中，您必须使用一些标识标记您的复选框，然后在数据网格级别使用 ButtonBase.Click="" 事件，该事件将针对任何基于按钮的元素（例如按钮、菜单项、切换按钮、复选框）冒泡的任何单击事件进行处理，单选框，组合框）在数据网格的整个可视化树中被点击。

在处理程序中验证是否`e.OriginalSource`是一个复选框，并且它`Tag`与我们在数据网格的 XAML 中设置的标识值相同。这样我们就知道 CheckBox 被点击了。

**例如**

```
 <DataGrid AutogenerateColumns="False"
                  ItemsSource="{Binding NotificationObjectCollection}"
                  ButtonBase.Clicked="OnNotificationCheckBoxClicked">
            <DataGrid.Columns>
                 <DataGridCheckBoxColumn Binding="{Binding IsClicked}"
                                         Header="Click?">
                     <DataGridCheckBoxColumn.ElementStyle> 
                         <Style TargetType="{x:Type CheckBox}">
                             <Setter Property="Tag" Value="IsClickCheckBox" />
                         </Style>                          
                     </DataGridCheckBoxColumn.ElementStyle>
                 </DataGridCheckBoxColumn>   
            </DataGrid.Columns>
        </DataGrid>  

  private void OnNotificationCheckBoxClicked
            (object sender, RoutedEventArgs e)
  {
        if (e.OriginalSource is CheckBox)
        {
              if (((CheckBox)e.OriginalSource).Tag == "IsClickCheckBox")
              {
                    var notificationObject
                        = ((CheckBox)e.OriginalSource).DataContext 
                             as NotificationObject;

                    if (notificationObject.IsClicked) { } 
                    else  { }  
              }
         }
  } 
```

**MVVM**

MVVM 可以通知视觉对象中的祖先对象的唯一方法是使用`Command`执行，因为底层`NotificationObject`被检查（调用 setter）我们执行提供给`NotificationObject`.

为此目的使用基于弱引用的**`RelayCommand`**或（可在互联网上获得）。**`DelegateCommand`**

**添加一个新的`NotificationObject`构造函数**

```
 private ICommand _isClickedCommand;
 public NotificationObject(ICommand isClickedCommand)
 {
     _isClickedCommand = isClickedCommand;
 }

 private bool _isClicked;
 public bool IsClicked
 {
    get
    {
         return _isClicked;
    }
    set
    {
        if (_isClicked != value)
        {
           _isClicked = value;
           OnPropertyChanged("IsClicked");
           isClickedCommand.Execute(this);
        }
    }
 } 
```

**使用通知对象**

```
 public class ItemObjectViewModel
 {
      private DelegateCommand<NotificationObject>
            _notificationObjectClickedCommand
                = new DelegateCommand<NotificationObject>(
                     OnNotificationObjectCommandExecute);

      ....

      private void PopulateCollection()
      {
           NotificationObjectCollection
             = new ObservableCollection<NotificationObject>();
           NotificationObjectCollection.Add(
              new NotificationObject(_notificationObjectClickedCommand));
      }

      private void OnNotificationObjectCommandExecute(
         NotificationObject notificationObject)
      {
            if (notificationObject.IsClicked) { } 
            else  { }
      }
 } 
```

您还可以**`ICommand`**使用**“RoutedCommand”在非 MVVM 场景中实现基于行为**

让我知道这是否有帮助...

# android - Android应用程序在创建时关闭？

> ID：10796461
> 
> 赞同：1
> 
> 时间：2012-05-29T09:31:50.900
> 
> 标签：android, fatal-error

我对android还很陌生，应用程序在创建后立即关闭。任何帮助将不胜感激！

关于该应用程序的一些信息，我正在创建一个基于文本的冒险，并且我已经将所有代码编码到 java 中，并且我知道 java 代码可以工作，因为我创建了一个 JavaGui 并为它工作。我现在正试图将这个 java 游戏带到 android。

这是我的错误日志

```
05-29 09:19:01.989: E/AndroidRuntime(539): FATAL EXCEPTION: main
05-29 09:19:01.989: E/AndroidRuntime(539): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{com.coalbolttproductions.russell/com.coalbolttproductions.russell.AdventureToCandyIslandActivity}: java.lang.NullPointerException
05-29 09:19:01.989: E/AndroidRuntime(539):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1880)
05-29 09:19:01.989: E/AndroidRuntime(539):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
05-29 09:19:01.989: E/AndroidRuntime(539):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
05-29 09:19:01.989: E/AndroidRuntime(539):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
05-29 09:19:01.989: E/AndroidRuntime(539):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-29 09:19:01.989: E/AndroidRuntime(539):  at android.os.Looper.loop(Looper.java:137)
05-29 09:19:01.989: E/AndroidRuntime(539):  at android.app.ActivityThread.main(ActivityThread.java:4424)
05-29 09:19:01.989: E/AndroidRuntime(539):  at java.lang.reflect.Method.invokeNative(Native Method)
05-29 09:19:01.989: E/AndroidRuntime(539):  at java.lang.reflect.Method.invoke(Method.java:511)
05-29 09:19:01.989: E/AndroidRuntime(539):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
05-29 09:19:01.989: E/AndroidRuntime(539):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
05-29 09:19:01.989: E/AndroidRuntime(539):  at dalvik.system.NativeStart.main(Native Method)
05-29 09:19:01.989: E/AndroidRuntime(539): Caused by: java.lang.NullPointerException
05-29 09:19:01.989: E/AndroidRuntime(539):  at android.app.Activity.findViewById(Activity.java:1794)
05-29 09:19:01.989: E/AndroidRuntime(539):  at com.coalbolttproductions.russell.AdventureToCandyIslandActivity.<init>(AdventureToCandyIslandActivity.java:15)
05-29 09:19:01.989: E/AndroidRuntime(539):  at java.lang.Class.newInstanceImpl(Native Method)
05-29 09:19:01.989: E/AndroidRuntime(539):  at java.lang.Class.newInstance(Class.java:1319)
05-29 09:19:01.989: E/AndroidRuntime(539):  at android.app.Instrumentation.newActivity(Instrumentation.java:1023)
05-29 09:19:01.989: E/AndroidRuntime(539):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1871)
05-29 09:19:01.989: E/AndroidRuntime(539):  ... 11 more 
```

这是我的 main.xml，我认为这是我的问题的真正原因

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" 
    android:padding="25dp">

    <EditText
        android:id="@+id/etCommands"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:hint="Type a Command"
        android:password="true" />

    <Button
        android:id="@+id/bResults"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="Try Command" />

    <TextView
        android:id="@+id/tvResults"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center"
        android:text="TextView" />

</LinearLayout> 
```

由于受欢迎的需求，这里是我的 Adventure 课程中的 java 代码。**第 15 行是按钮 chkCmd**

```
public class AdventureToCandyIslandActivity extends Activity implements View.OnClickListener{
    /** Called when the activity is first created. */

    Button chkCmd = (Button) findViewById(R.id.bResults);
    EditText input;
    TextView display;

    Game gameModel;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        //Run the methods
        createVars();
        chkCmd.setOnClickListener(this);

    }

    private void createVars(){
        gameModel = new Game();
        input = (EditText) findViewById(R.id.etCommands);
        display = (TextView) findViewById(R.id.tvResults);
        display.setText(gameModel.printWelcome());
        display.setGravity(Gravity.LEFT);
        display.setTextColor(Color.WHITE);

    }

    public void onClick(View v) {
        String inputLine = input.getText().toString();
        Command command = Command.getCommand(inputLine);
        String result = gameModel.processCommand(command);
        if(result.equals("EXIT")) {
            System.exit(0);
        } else {
            display.append("--------------------------------\n" + result + "\n");
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T09:35:30.243

无论您正在设置什么视图都返回`null`您是否仔细检查了 ID 是否正确并且`setContentView(R.layout.xxx)`指向正确的文件？

此外，如果您为纵向和横向定义了不同的布局，如果您的视图的 ID 不匹配，这可能会导致类似的问题。AdventureToCandyIslandActivity.java 请参见第 15 行

**编辑**

`Button chkCmd = (Button) findViewById(R.id.bResults);` 您已经在类加载器中初始化了按钮，如果您在与其他视图相同的位置初始化它就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T09:51:23.517

**改变**

```
Button chkCmd = (Button) findViewById(R.id.bResults);
EditText input;
TextView display;

Game gameModel;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main); 
```

**对此**

```
Button chkCmd;
EditText input;
TextView display;

Game gameModel;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    chkCmd = (Button) findViewById(R.id.bResults); 
```

与设置布局之前一样，您不能初始化作为该布局一部分的按钮。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T09:53:59.907

```
Button chkCmd = (Button) findViewById(R.id.bResults); 
```

您在设置 ContentView 之前使用了**findViewById(R.id.bResults)**所以在删除它之后使用以下代码：

```
setContentView(R.layout.main);
chkCmd = (Button) findViewById(R.id.bResults); 
```

# google-apps-script - 在 Google Apps 脚本中将文件的所有权转让给其他用户

> ID：10796464
> 
> 赞同：7
> 
> 时间：2012-05-29T09:32:02.220
> 
> 标签：google-apps-script, google-drive-api

我创建了一个小的上传 UI，我将其包含在 Google 协作平台页面中。它让用户上传一个文档。由于脚本已发布，它在我的帐户下运行，并且上传的文件上传到我的谷歌驱动器。我可以从应用程序脚本中将上传文件的人添加为编辑器，但我想做的是让他们成为文件的所有者。（从应用程序脚本中，您可以对文件执行 .getOwner() ......但不是 .setOwner() .....有人知道解决方法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-30T17:20:00.100

不幸的是，Apps 脚本不支持更改文件的所有者。[问题 74](http://code.google.com/p/google-apps-script-issues/issues/detail?id=726)是添加此功能的功能请求，如果您在问题上加注星标，您将表示您对该功能的支持并收到更新通知。

------已编辑------

现在有一个方便的方法叫做 setOwner，可以在这里找到：[https://developers.google.com/apps-script/reference/drive/file#setOwner(User)](https://developers.google.com/apps-script/reference/drive/file#setOwner(User))

还有可能传递新所有者的电子邮件地址而不是用户对象，这在某些情况下更方便： [https://developers.google.com/apps-script/reference/drive/file#setOwner(String)](https://developers.google.com/apps-script/reference/drive/file#setOwner(String))

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-05T07:43:54.240

2016 年 9 月 12 日更新：

[此代码使用已被授予Google Apps 域范围授权](https://developers.google.com/drive/v2/web/delegation)的服务帐户。这使您可以更改域中任何用户拥有的任何文件的所有者。此代码使用 Eric Koleda 的 Google [apps-script-oauth2](https://github.com/googlesamples/apps-script-oauth2)库。

```
var PRIVATE_KEY  = PropertiesService.getScriptProperties().getProperty('PRIVATE_KEY'); 
var CLIENT_EMAIL = PropertiesService.getScriptProperties().getProperty('CLIENT_EMAIL');

/**
* Transfers ownership of a file or folder to another account on the domain.
*
* @param  {String} fileId The id of the file or folder
* @param  {String} ownerEmail  The email address of the new owner.
*/
function transferOwnership(fileId, ownerEmail) {
  var file = DriveApp.getFileById(fileId);
  var currentOwnerEmail = file.getOwner().getEmail(); //the user that we need to impersonate

  var service = getService(currentOwnerEmail);
  if (service.hasAccess()) {
    var url = 'https://www.googleapis.com/drive/v2/files/' + fileId + '/permissions'; 
    var payload = {value: ownerEmail,
                   type: 'user',
                   role: 'owner'};
    var options = {method: "post",
                   contentType: "application/json",
                   headers : {
                     Authorization: 'Bearer ' + service.getAccessToken()
                   },
                   payload: JSON.stringify(payload)//,
                   ,muteHttpExceptions: true
                  };        
    //debugger;
    //throw 'test my errors';

    var response = UrlFetchApp.fetch(url, options);
    if (response.getResponseCode() === 200 || 
        (response.getResponseCode() === 400 && response.getContentText().indexOf('were successfully shared'))
    ) {
      return response.getContentText();
    }
    if (response.getResponseCode() === 401 && response.getContentText().indexOf('Invalid Credentials')) {
      throw 'Unable to transfer ownership from owner ' + currentOwnerEmail + ' ... ' +
        'Please make sure the file\'s owner has a Google Apps license (and not a Google Apps Vault - Former Employee license) and try again.';
    }
    throw response.getContentText(); 
  } else {
    throw service.getLastError();
  }
}

/**
 * Reset the authorization state, so that it can be re-tested.
 */
function reset() {
  var service = getService();
  service.reset();
}

/**
 * Configures the service.
 */
function getService(userEmail) {
  return OAuth2.createService('GoogleDrive:' + userEmail)
      // Set the endpoint URL.
      .setTokenUrl('https://accounts.google.com/o/oauth2/token')

      // Set the private key and issuer.
      .setPrivateKey(PRIVATE_KEY)
      .setIssuer(CLIENT_EMAIL)

      // Set the name of the user to impersonate. This will only work for
      // Google Apps for Work/EDU accounts whose admin has setup domain-wide
      // delegation:
      // https://developers.google.com/identity/protocols/OAuth2ServiceAccount#delegatingauthority
      .setSubject(userEmail)

      // Set the property store where authorized tokens should be persisted.
      .setPropertyStore(PropertiesService.getScriptProperties())

      // Set the scope. This must match one of the scopes configured during the
      // setup of domain-wide delegation.
      .setScope('https://www.googleapis.com/auth/drive');
} 
```

旧答案（现在已过时，因为不推荐使用 Document List API）：

您可以通过使用原始 atom xml 协议访问文档列表 API 在 Google Apps 脚本中实现此目的。您需要成为域的超级管理员。这是一个对我有用的例子：

```
/**
* Change Owner of a file or folder 
* Run this as admin and authorise first in the script editor.
*/ 
function changeOwner(newOwnerEmail, fileOrFolderId){
  var file = DocsList.getFileById(fileOrFolderId);
  var oldOwnerEmail = file.getOwner().getEmail();
  if (oldOwnerEmail === newOwnerEmail) {
    return;
  }
  file.removeEditor(newOwnerEmail);
  var base = 'https://docs.google.com/feeds/';
  var fetchArgs = googleOAuth_('docs', base);
  fetchArgs.method = 'POST';
  var rawXml = "<entry xmlns='http://www.w3.org/2005/Atom' xmlns:gAcl='http://schemas.google.com/acl/2007'>"
      +"<category scheme='http://schemas.google.com/g/2005#kind' "
      +"term='http://schemas.google.com/acl/2007#accessRule'/>"
      +"<gAcl:role value='owner'/>"
      +"<gAcl:scope type='user' value='"+newOwnerEmail+"'/>"
      +"</entry>";
  fetchArgs.payload = rawXml;
  fetchArgs.contentType = 'application/atom+xml';
  var url = base + encodeURIComponent(oldOwnerEmail) + '/private/full/'+fileOrFolderId+'/acl?v=3&alt=json';
  var content = UrlFetchApp.fetch(url, fetchArgs).getContentText(); 
}

//Google oAuth
function googleOAuth_(name,scope) {
  var oAuthConfig = UrlFetchApp.addOAuthService(name);
  oAuthConfig.setRequestTokenUrl("https://www.google.com/accounts/OAuthGetRequestToken?scope="+scope);
  oAuthConfig.setAuthorizationUrl("https://www.google.com/accounts/OAuthAuthorizeToken");
  oAuthConfig.setAccessTokenUrl("https://www.google.com/accounts/OAuthGetAccessToken");
  oAuthConfig.setConsumerKey("anonymous");
  oAuthConfig.setConsumerSecret("anonymous");
  return {oAuthServiceName:name, oAuthUseToken:"always"};
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-21T09:45:23.527

试试这个！（至少它对我有用）

```
var newFolder = DriveApp.createFolder(folderName).addEditor(ownerEmail).setOwner(ownerEmail).addEditor(group.getEmail()).removeEditor(Session.getActiveUser().getEmail()); 
```

上面创建了一个文件夹并添加了一个新编辑器，将新编辑器设置为所有者，将另一个组添加到编辑器，最后从编辑器中删除刚刚创建文件夹的用户。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-28T23:30:50.233

我想出了一个解决方法——不确定它是否正是你们都在寻找的。只需授予您要切换所有权的帐户的访问权限即可。访问文档/表单/等。从该帐户中提取，然后制作该文件的副本。您现在是所有者。您必须重新邀请其他人。

# mysql - mysql：如何限制查询？

> ID：10796465
> 
> 赞同：0
> 
> 时间：2012-05-29T09:32:04.180
> 
> 标签：mysql

我选择记录并按日期和 uid（不是主键）对它们进行分组，我需要按日期对这些记录进行分页，我该怎么做？
例如：

```
uid 日期
1 2012-01-10
2 2012-01-10
3 2012-01-09
3 2012-01-09
3 2012-01-11

```

sql：

```
SELECT date, uid
FROM users
GROUP by date,`uid` 
```

结果：

```
uid 日期
1 2012-01-10
2 2012-01-10
3 2012-01-09
3 2012-01-11

```

因为我需要按日期对这些记录进行分页，所以如果我使用如下 sql：

```
SELECT date, uid
FROM users
GROUP by date,`uid`
LIMIT 0,2 
```

然后我得到这样的记录：

```
uid 日期
1 2012-01-10
2 2012-01-10

```

. 如何按日期分页记录。当页面大小为 2 时我想要的结果：

```
uid 日期
1 2012-01-10
2 2012-01-10
3 2012-01-09

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T09:39:49.080

```
SELECT date, uid
FROM users
WHERE date >= 'your date'
  AND date < 'your date' LIMIT 0, 3 
```

# mysql - 在 SQL 中过滤不同的行

> ID：10796468
> 
> 赞同：0
> 
> 时间：2012-05-29T09:32:23.720
> 
> 标签：mysql, sql

我有一张表，其中包括**'buyer'**、**'seller'**和**'buyer_spend'**列。每次购买都显示为单独的一行，其中包含买家姓名、卖家姓名和已购买的金额。

是否可以使用单个查询来显示所有未从卖家处购买的不同买家？

例如，如果我有**'Seller A'**，我想查找所有未从卖家 A 购买的不同买家。我遇到了麻烦，因为以下查询返回了所有不属于卖家 A 的交易，其中包括许多买家确实是从另一排的卖家 A 那里购买的。

```
SELECT DISTINCT buyer WHERE seller!='Seller A'; 
```

这可能很简单，但我很难理解它。

提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T10:28:01.273

```
SELECT a.buyer FROM table a WHERE Left Join table as b
on a.id = b.id and a.seller='Seller A'
WHERE b.id is null
group by a.buyer 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T09:38:53.280

```
SELECT DISTINCT buyer FROM table WHERE buyer NOT IN 
    (SELECT DISTINCT buyer FROM table WHERE seller='Seller A') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T13:41:16.427

这是一种不使用连接的替代方法：

```
select buyer
from (select buyer, max(case when seller = 'Seller A' then 1 else 0 end) as hasSellerA
      from t
      group by buyer
     ) t
where hasSellerA = 0 
```

根据我的经验，聚合查询通常比反连接执行得更好（非连接是反连接）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T14:10:28.180

```
SELECT buyer
FROM atable
GROUP BY buyer
HAVING COUNT(seller = 'Seller A' OR NULL) = 0
  /* or: SUM(seller = 'Seller'A') = 0 */ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-29T09:36:31.063

我猜你想要这样的东西

```
select distinct buyer from purchasetable where buyer not in (select buyer from buyertable) 
```

虽然，我是一名 SQL Server 开发人员，但我认为这仍然适用。

# android - Gps，GeoCoding 导致应用程序在 android 中挂起

> ID：10796473
> 
> 赞同：1
> 
> 时间：2012-05-29T09:32:34.703
> 
> 标签：android, gps, location, geocoding, locationlistener

我正在使用带 Gps 的 locationListener。当我的 Gps 符号稳定（即停止闪烁）时，意味着它已经获得了新位置，那时它会挂起我的应用程序一段时间。我在 Service 中使用 locationListener。但是当我运行“地图“ 应用程序（google maps.apk 应用程序）它在 Gps 上运行顺畅。所以如果 Gps 关闭，我的应用程序运行非常顺利是什么问题。

我的代码在这里

```
public class LocationUpdateService extends Service implements IActionController{
    private LocationManager _locationManager;
    private String          _provider;
    private boolean         _gpsEnabled;
    private boolean         _networkEnabled;
    private  String         _json;
    private boolean        _locationSendingByCheckIn;
    private Intent         _intent;
    int i=1;

    //private boolean        _locationAvailable;

    @Override
    public IBinder onBind(Intent intent) {
        return null;
    }

    @Override
    public void onCreate() {
        super.onCreate();
        i=1;
        String tracking_key = MySharedPreference.getString(MySharedPreference.APP_TRACKING_KEY,"",getApplicationContext());
        if (tracking_key == null || tracking_key.equals("")||!MySharedPreference.getBoolean(MySharedPreference.APP_ALLOWED_TO_POST_LOCATION, false, getApplicationContext()))
        {
            stopService(new Intent(getApplicationContext(),LocationUpdateService.class));
        }
        else  
        {
            _locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
            setLocationSendingAlarm(AppConstants.PENDING_INTENET_LOCATION_PROVIDER_ENABLE_ALARM_ID);
            getLocation();

        }

    }

    @Override
    public void onStart(Intent intent, int startId) {
        super.onStart(intent, startId);

        try {
            if(!MySharedPreference.getBoolean(MySharedPreference.APP_ALLOWED_TO_POST_LOCATION, false, getApplicationContext()))
            {
                stopService(new Intent(getApplicationContext(),LocationUpdateService.class));
                return;
            }
            else if (intent.getExtras() != null)
            {

                if (intent.getExtras().getBoolean("locationSendingAlarm"))
                {
                    _locationSendingByCheckIn=false;

                    _gpsEnabled=_locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER);
                    _networkEnabled=_locationManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER);
                    String _providerOld=MySharedPreference.getString(MySharedPreference.PREVIOUS_LOCATION_PROVIDER, "", getApplicationContext());

                    if(_providerOld.equalsIgnoreCase(LocationManager.GPS_PROVIDER)&&_locationManager!=null&&!_gpsEnabled&&_networkEnabled)
                    {
                        _locationManager.removeUpdates(locationListener);
                        getLocation();
                        sendLocationOnServer(LocationUpdateService.this,AppConstants.APP_REPORT_TYPE_SOS);
                    }
                    else if((_providerOld.equalsIgnoreCase(LocationManager.NETWORK_PROVIDER))&&_gpsEnabled)
                    {
                        sendLocationOnServer(LocationUpdateService.this,AppConstants.APP_REPORT_TYPE_SOS);
                        if(_locationManager != null) _locationManager.removeUpdates(locationListener);
                        getLocation();
                    }
                    else if(_providerOld.equalsIgnoreCase(""))
                    {

                        if(_locationManager != null) _locationManager.removeUpdates(locationListener);
                        getLocation();

                    }
                    else
                    {
                        sendLocationOnServer(LocationUpdateService.this,AppConstants.APP_REPORT_TYPE_SOS);
                    }

                }

                else if(intent.getExtras().getBoolean(AppConstants.APP_REPORT_TYPE_CHECK_IN))
                {
                    _intent=new Intent(AppConstants.CHECK_IN_BROADCAST_RECEIVER);
                    _locationSendingByCheckIn=true;
                    sendLocationOnServer(LocationUpdateService.this,AppConstants.APP_REPORT_TYPE_CHECK_IN);

                }
                else if(intent.getExtras().getBoolean(AppConstants.APP_SETTINGS_CHANGED))
                {
                    setLocationSendingAlarm(AppConstants.PENDING_INTENET_LOCATION_PROVIDER_ENABLE_ALARM_ID);
                    if(_locationManager != null) _locationManager.removeUpdates(locationListener);
                    getLocation();
                }
            }
        }
        catch (Exception e) {
        }

    }

    private void getLocation()
    {

                try{

                    _gpsEnabled=_locationManager.isProviderEnabled(LocationManager.GPS_PROVIDER);
                    _networkEnabled=_locationManager.isProviderEnabled(LocationManager.NETWORK_PROVIDER);

                    /*if(!_gpsEnabled && !_networkEnabled)
            {

            }*/

                    /*Criteria criteria = new Criteria();
            criteria.setAccuracy(Criteria.ACCURACY_FINE);
            _provider = _locationManager.getBestProvider(criteria, false);*/

                    /* Bundle bundle = new Bundle();
              // they would help boost my gps,
                boolean xtraInjection=_locationManager.sendExtraCommand(LocationManager.GPS_PROVIDER,
                                                      "force_xtra_injection",bundle);
                boolean timeInjection=_locationManager.sendExtraCommand(LocationManager.GPS_PROVIDER,
                                                      "force_time_injection",bundle);*/

                    long timeInterval=getTimeInterval();
                    try
                    {
                        if(timeInterval==1000*60)
                            timeInterval=1000*60*2-1000*20; //100 seconds
                        else if(timeInterval==1000*60*5)
                            timeInterval=1000*60*5-1000*30;// 4.5 minutes
                        else timeInterval=1000*60*5-1000*30; //4.5 minutes
                    }
                    catch (Exception e) {
                        timeInterval=1000*60*5-1000*30;  //4.5 min
                    }

                    if(_gpsEnabled)
                    {
                        _locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER,timeInterval,200,locationListener);
                        return;
                    }
                    else if(_networkEnabled)
                    {
                        _locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER,timeInterval,200,locationListener);
                        return;
                    }
                    else
                    {
                        MySharedPreference.putString(MySharedPreference.PREVIOUS_LOCATION_PROVIDER, "", getApplicationContext());
                    }
                    /*Location location = _locationManager.getLastKnownLocation(LocationManager.GPS_PROVIDER);
            if(null==location)
            {
                location = _locationManager.getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
            }
            if(null==location)
            {
                location = _locationManager.getLastKnownLocation(LocationManager.PASSIVE_PROVIDER);

            }
            else if(location != null && location.getProvider()!=null)
            {
                _locationManager.requestLocationUpdates(location.getProvider(),5*60*1000,0,locationListener);
                _locationAvailable=true;

            }*/

                }
                catch(Exception ex)
                {
                    MySharedPreference.putString(MySharedPreference.PREVIOUS_LOCATION_PROVIDER, "", getApplicationContext());
                }

    }

    /**
     *
     * Location listener
     */
    LocationListener locationListener = new LocationListener() {
        @Override
        public void onStatusChanged(String provider, int status, Bundle extras) {
            /*
              Toast.makeText(getApplicationContext(), "status changed", Toast.LENGTH_SHORT).show();
            switch (status) {
            case LocationProvider.OUT_OF_SERVICE:
                break;
            case LocationProvider.TEMPORARILY_UNAVAILABLE:
                break;
            case LocationProvider.AVAILABLE:
                break;
            }*/
        }

        @Override
        public void onProviderEnabled(String provider) {
        }

        @Override
        public void onProviderDisabled(String provider) {

        }

        @Override
        public void onLocationChanged(final Location location) {
            Toast.makeText(getApplicationContext(), ""+i, Toast.LENGTH_SHORT).show();
            i++;
            saveLocation(getApplicationContext(),location);

        }
    };
    public  void saveLocation(Context context, Location location)
    {
        if(location!=null)
        {

            double _latitude=location.getLatitude();
            double _longitude=location.getLongitude();
            double _altidude=location.getAltitude();
            float _accuracy=location.getAccuracy();
            float _bearing=location.getBearing();
            float _speed=location.getSpeed() * 3.6f;
            long _time=location.getTime();
            String _address=getAddress(location);

            double _latitudeOld =MySharedPreference.getFloat(MySharedPreference.PREVIOUS_LOCATION_LATITUDE, 0.0f, context);
            double _longitudeOld=MySharedPreference.getFloat(MySharedPreference.PREVIOUS_LOCATION_LONGITUDE, (float)0.0, context);

            MySharedPreference.putBoolean(MySharedPreference.IS_LOCATION_STATIC, _latitude == _latitudeOld && _longitude == _longitudeOld, context);
            MySharedPreference.putFloat(MySharedPreference.PREVIOUS_LOCATION_LATITUDE, (float)_latitude, context);
            MySharedPreference.putFloat(MySharedPreference.PREVIOUS_LOCATION_LONGITUDE, (float)_longitude, context);
            MySharedPreference.putFloat(MySharedPreference.PREVIOUS_LOCATION_ALTITUDE, (float)_altidude, context);
            MySharedPreference.putFloat(MySharedPreference.PREVIOUS_LOCATION_ACCURACY, _accuracy, context);;;
            MySharedPreference.putFloat(MySharedPreference.PREVIOUS_LOCATION_BEARING, _bearing, context);;
            MySharedPreference.putFloat(MySharedPreference.PREVIOUS_LOCATION_SPEED, _speed, context);; ;
            MySharedPreference.putLong(MySharedPreference.PREVIOUS_LOCATION_TIME, _time, context);
            MySharedPreference.putString(MySharedPreference.PREVIOUS_LOCATION_ADDRESS, _address, context);
            MySharedPreference.putString(MySharedPreference.PREVIOUS_LOCATION_PROVIDER, location.getProvider(), context);

            if(NativeHelper.getDistanceInMeter(_latitude, _longitude, _latitudeOld, _longitudeOld) >= 330)
            {
                sendLocationOnServer( LocationUpdateService.this, AppConstants.APP_REPORT_TYPE_SOS);
                setLocationSendingAlarm(AppConstants.PENDING_INTENET_LOCATION_PROVIDER_ENABLE_ALARM_ID);
            }

        }
    }

    public  void sendLocationOnServer(Context context, String reportType)
    {
        try{
            String tracking_key = MySharedPreference.getString(MySharedPreference.APP_TRACKING_KEY,"",context);
            String _providerOld=MySharedPreference.getString(MySharedPreference.PREVIOUS_LOCATION_PROVIDER, "", context);
            if (tracking_key == null || tracking_key.equals("") ||_providerOld.equals(""))
            {
                return ;
            }

            double _latitudeOld=MySharedPreference.getFloat(MySharedPreference.PREVIOUS_LOCATION_LATITUDE, 0.0f, context);
            double _longitudeOld=MySharedPreference.getFloat(MySharedPreference.PREVIOUS_LOCATION_LONGITUDE, (float)0.0, context);
            double _altidudeOld=MySharedPreference.getFloat(MySharedPreference.PREVIOUS_LOCATION_ALTITUDE, (float)0.0, context);
            float _accuracyOld=MySharedPreference.getFloat(MySharedPreference.PREVIOUS_LOCATION_ACCURACY, (float)0.0, context);;;
            float _bearingOld=MySharedPreference.getFloat(MySharedPreference.PREVIOUS_LOCATION_BEARING, (float)0.0, context);;
            float _speedOld=MySharedPreference.getFloat(MySharedPreference.PREVIOUS_LOCATION_SPEED, (float)0.0, context);; ;

            boolean isStatic = MySharedPreference.getBoolean(MySharedPreference.IS_LOCATION_STATIC, false, context);
            String _addressOld=MySharedPreference.getString(MySharedPreference.PREVIOUS_LOCATION_ADDRESS, "Address not available", context);

            RequestAppLocationSending appLocationSending=new RequestAppLocationSending();
            appLocationSending.setImei(NativeHelper.getDeviceId(context));
            appLocationSending.setBattery((int)TrackMyDeviceUtils.getBatteryLevel(context));
            appLocationSending.setLatitude(_latitudeOld);
            appLocationSending.setLongitude(_longitudeOld);
            appLocationSending.setAltitude((int)_altidudeOld );
            appLocationSending.setAccuracy(_accuracyOld);
            appLocationSending.setCouse(_bearingOld);
            appLocationSending.setSpeed(_speedOld);
            appLocationSending.setTracking_key(tracking_key);
            appLocationSending.setAddress(_addressOld);
            appLocationSending.setDate(TrackMyDeviceUtils.getFormatedDateForLocationSending());
            appLocationSending.setReportType(reportType);
            appLocationSending.setStatic(isStatic);

            if(_providerOld.equalsIgnoreCase(LocationManager.GPS_PROVIDER))
                appLocationSending.setData_source("G");
            else
                appLocationSending.setData_source("N");

            _json=  appLocationSending.toJson();

            LocationSendingController locationSendingController=new LocationSendingController((IActionController)context, EventType.APP_LOCATION_SENDING);
            try {
                locationSendingController.requestService(_json);
            } catch (Exception e) {

            }

        }
        catch (Exception e) {
            e.printStackTrace();

        }
    }
    private String getAddress(Location location)
    {
        List<Address>   addresses;
        try{
            addresses = new Geocoder(this,Locale.getDefault()).getFromLocation(location.getLatitude(), location.getLongitude(), 1);
            return  findAddress(addresses);

        }
        catch (Exception e) {
            try{
                addresses= ReverseGeocode.getFromLocation(location.getLatitude(), location.getLongitude(), 1);
                return  findAddress(addresses);
            }
            catch (Exception e1) {
                return "Address not available";
            }

        }
        //return "Address not available";
    }
    private String findAddress(List<Address>    addresses)
    {
        String address="Address not available";
        if(addresses!=null)
        {

            for(int i=0;i<addresses.size();i++){
                Address addre=addresses.get(i);

                String street=addre.getAddressLine(0);
                if(null==street)
                    street="";

                String city=addre.getLocality();
                if(city==null) city="";
                /*if(city!=null)
                    MySharedPreference.putString(MySharedPreference.PREVIOUS_CITY_NAME, city, getApplicationContext());
                else
                    city=MySharedPreference.getString(MySharedPreference.PREVIOUS_CITY_NAME, "", getApplicationContext());*/

                String state=addre.getAdminArea();
                if(state==null) state="";
                /*if(state!=null)
                    MySharedPreference.putString(MySharedPreference.PREVIOUS_STATE_NAME, state, getApplicationContext());
                else
                    state=MySharedPreference.getString(MySharedPreference.PREVIOUS_STATE_NAME, "", getApplicationContext());*/

                String country=addre.getCountryName();
                if(country==null) country="";
                /*if(country!=null)
                    MySharedPreference.putString(MySharedPreference.PREVIOUS_COUNTRY_NAME, country, getApplicationContext());
                else
                    country=MySharedPreference.getString(MySharedPreference.PREVIOUS_COUNTRY_NAME, "", getApplicationContext());*/

                address=street+", "+city+", "+state+", "+country;

            }
            return address;
        }
        return address;
    }
    private void setLocationSendingAlarm(int alarmId) {

        AlarmManager alarmManager = (AlarmManager) getApplicationContext().getSystemService(Context.ALARM_SERVICE);
        Intent intent = new Intent(getApplicationContext(), LocationUpdateService.class);
        intent.putExtra("locationSendingAlarm", true);
        PendingIntent   pendingIntent = PendingIntent.getService(this, AppConstants.PENDING_INTENET_LOCATION_PROVIDER_ENABLE_ALARM_ID, intent,0);
        try {
            alarmManager.cancel(pendingIntent);
        } catch (Exception e) {

        }
        long timeForAlarm=getTimeInterval();

        alarmManager.setRepeating(AlarmManager.RTC_WAKEUP,System.currentTimeMillis()+timeForAlarm, timeForAlarm,pendingIntent);

    }

    private void cancleAlarm(int alarmId)
    {
        AlarmManager alarmManager = (AlarmManager) getApplicationContext().getSystemService(Context.ALARM_SERVICE);
        Intent intent = new Intent(getApplicationContext(), LocationUpdateService.class);
        intent.putExtra("locationSendingAlarm", true);
        PendingIntent pendingIntent;
        pendingIntent = PendingIntent.getService(this, AppConstants.PENDING_INTENET_LOCATION_PROVIDER_ENABLE_ALARM_ID, intent, 0);
        try {
            alarmManager.cancel(pendingIntent);
        }
        catch (Exception e) {
        }

    }
    @Override
    public Activity getMyActivityReference() {
        return null;
    }
    @Override
    public void setScreenData(Object screenData, int event, long time) {

        Message msg=new Message();
        msg.obj=screenData;
        msg.arg1=event;
        handler.sendMessage(msg);

    }

    protected Handler handler = new Handler() {
        public void handleMessage(android.os.Message msg) {
            updateUI(msg);
        }
    };

    public void updateUI(Message o)
    {
        try{

            if(o.obj instanceof MyError) {
                switch(((MyError)o.obj).getErrorcode())
                {
                case MyError.NETWORK_NOT_AVAILABLE:
                {
                    if(_locationSendingByCheckIn)
                    {
                        _intent.putExtra("Response","Network not available");
                        _intent.putExtra("LocationPostedSuccessfuly", false);
                        sendBroadcast(_intent);
                        _locationSendingByCheckIn=false;

                    }

                    break;
                }
                case MyError.EXCEPTION:
                case MyError.UNDEFINED:
                {
                    if(_locationSendingByCheckIn)
                    {
                        _intent.putExtra("Response","Server not responding. Please try later");
                        _intent.putExtra("LocationPostedSuccessfuly", false);
                        sendBroadcast(_intent);
                        _locationSendingByCheckIn=false;
                    }
                }
                }
            }
            else if (o.obj instanceof ResponseAppLocationSending) {
                ResponseAppLocationSending responseAppLocationSending=(ResponseAppLocationSending) o.obj;
                if(responseAppLocationSending.getResponce().contains("saved"))
                {

                    if(_locationSendingByCheckIn)
                    {
                        _intent.putExtra("Response","Check In Submitted");
                        _intent.putExtra("LocationPostedSuccessfuly", true);
                        sendBroadcast(_intent);
                    }
                    //else setLocationSendingAlarm(AppConstants.PENDING_INTENET_LOCATION_PROVIDER_ENABLE_ALARM_ID);

                }
                else  {

                    if(_locationSendingByCheckIn)
                    {
                        _intent.putExtra("Response","Server not responding. Please try later");
                        _intent.putExtra("LocationPostedSuccessfuly", false);
                        sendBroadcast(_intent);

                    }
                }
            }
        }
        catch (Exception e) {
            if(_locationSendingByCheckIn)
            {
                _intent.putExtra("Response","Server not responding. Please try later");
                _intent.putExtra("LocationPostedSuccessfuly", false);
                sendBroadcast(_intent);
                _locationSendingByCheckIn=false;
            }
        }
        _locationSendingByCheckIn=false;
    }

    private long getTimeInterval()
    {
        try{
            String s=MySharedPreference.getString(MySharedPreference.APP_REPORTING_TIME, "10", getApplicationContext());
            int time = Integer.parseInt(s);
            if(time<1) time=10;

            return  time*1000*60;
        }
        catch (Exception e) {
            return 1000*60*10;  //10 minutes
        }
    }

    @Override
    public void onDestroy()
    {
        if(_locationManager!=null)
            _locationManager.removeUpdates(locationListener);
        cancleAlarm(AppConstants.PENDING_INTENET_LOCATION_PROVIDER_ENABLE_ALARM_ID);
        super.onDestroy();
    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-31T05:02:49.093

最后我得到了我的问题的解决方案。我经常做地理编码，但不是在不同的线程中。所以我这样做了（在新线程中进行地理编码）

```
public void onLocationChanged(final Location location) {

            new Thread(new Runnable(){
                public void run(){
                    _address=getAddress(location);
                }
            }).start();

        }
    };
    private String getAddress(Location location)
    {
        List<Address>   addresses;
        try{
            addresses = new Geocoder(this,Locale.getDefault()).getFromLocation(location.getLatitude(), location.getLongitude(), 1);
            return  findAddress(addresses);

        }
        catch (Exception e) {
            try{
                addresses= ReverseGeocode.getFromLocation(location.getLatitude(), location.getLongitude(), 1);
                return  findAddress(addresses);
            }
            catch (Exception e1) {
                return "Address not available";
            }

        }
        //return "Address not available";
    }
    private String findAddress(List<Address>    addresses)
    {
        String address="Address not available";
        if(addresses!=null)
        {
            for(int i=0;i<addresses.size();i++){
                Address addre=addresses.get(i);
                String street=addre.getAddressLine(0);
                if(null==street)
                    street="";
                String city=addre.getLocality();
                if(city==null) city="";

                String state=addre.getAdminArea();
                if(state==null) state="";

                String country=addre.getCountryName();
                if(country==null) country="";

                address=street+", "+city+", "+state+", "+country;
            }
            return address;
        }
        return address;
    }
    } 
```

# ruby-on-rails - rails 3 项目中的 RSpec 和 Autotest 问题

> ID：10796474
> 
> 赞同：4
> 
> 时间：2012-05-29T09:32:38.013
> 
> 标签：ruby-on-rails, ruby, rspec, tdd, autotest

我使用 autotest-notification v2.3.4 和 rspec v2.0.1 在运行 Ubuntu 12.04 的机器上的 rails v3.2.3 项目中编写测试。在我的 pages_controller_spec.rb 中，我有以下代码

```
require 'spec_helper'

describe PagesController do

   describe "GET 'contact'" do
    it "should be successful" do
      get 'contact'
      response.should be_success
    end
  end

end 
```

当我运行命令时`rspec spec/`出现以下错误

```
DEPRECATION WARNING: The InstanceMethods module inside ActiveSupport::Concern will be no longer included automatically. Please define instanc\
e methods directly in RSpec::Rails::SetupAndTeardownAdapter instead. (called from <top (required)> at /home/kris/development/rails_projects/s\
ample_app/spec/controllers/pages_controller_spec.rb:3)
DEPRECATION WARNING: The InstanceMethods module inside ActiveSupport::Concern will be no longer included automatically. Please define instanc\
e methods directly in RSpec::Rails::TestUnitAssertionAdapter instead. (called from <top (required)> at /home/kris/development/rails_projects/\
sample_app/spec/controllers/pages_controller_spec.rb:3)
DEPRECATION WARNING: The InstanceMethods module inside ActiveSupport::Concern will be no longer included automatically. Please define instanc\
e methods directly in RSpec::Rails::ViewRendering instead. (called from <top (required)> at /home/kris/development/rails_projects/sample_app/\
spec/controllers/pages_controller_spec.rb:3)
DEPRECATION WARNING: The InstanceMethods module inside ActiveSupport::Concern will be no longer included automatically. Please define instanc\
e methods directly in RSpec::Rails::ControllerExampleGroup instead. (called from <top (required)> at /home/kris/development/rails_projects/sa\
mple_app/spec/controllers/pages_controller_spec.rb:3)

Failures:
  1) PagesController GET 'contact' should be successful
     Failure/Error: Unable to find matching line from backtrace
     undefined method `run_all' for []:Array
     # /home/kris/.rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.0.1/lib/rspec/core/hooks.rb:116:in `run_hook_filtered'
     # /home/kris/.rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.0.1/lib/rspec/core/example_group.rb:174:in `eval_before_alls'
     # /home/kris/.rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.0.1/lib/rspec/core/example_group.rb:229:in `run'
     # /home/kris/.rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.0.1/lib/rspec/core/command_line.rb:26:in `block (2 levels) in run'
     # /home/kris/.rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.0.1/lib/rspec/core/command_line.rb:26:in `map'
     # /home/kris/.rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.0.1/lib/rspec/core/command_line.rb:26:in `block in run'
     # /home/kris/.rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.0.1/lib/rspec/core/reporter.rb:11:in `report'
     # /home/kris/.rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.0.1/lib/rspec/core/command_line.rb:23:in `run'
     # /home/kris/.rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.0.1/lib/rspec/core/runner.rb:55:in `run_in_process'
     # /home/kris/.rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.0.1/lib/rspec/core/runner.rb:46:in `run'
     # /home/kris/.rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.0.1/lib/rspec/core/runner.rb:10:in `block in autorun'

Finished in 0.00028 seconds
1 example, 1 failure
/home/kris/.rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.0.1/lib/rspec/core/hooks.rb:116:in `run_hook_filtered': undefined method `run_all' for\
 []:Array (NoMethodError)
from /home/kris/.rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.0.1/lib/rspec/core/example_group.rb:213:in `eval_after_alls'
from /home/kris/.rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.0.1/lib/rspec/core/example_group.rb:236:in `run'
from /home/kris/.rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.0.1/lib/rspec/core/command_line.rb:26:in `block (2 levels) in run'
from /home/kris/.rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.0.1/lib/rspec/core/command_line.rb:26:in `map'
from /home/kris/.rvm/gems/ruby-1.9.3-p194/gems/rspec-core-2.0.1/lib/rspec/core/command_line.rb:26:in `block in run' 
```

是什么导致了这个错误，我该如何解决？

请帮忙谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-02T09:29:41.737

尝试更新 RSpec。这：[ruby-forum.com/topic/788351](http://ruby-forum.com/topic/788351)（和链接的 github 问题）表明旧版本的 RSpec 和 Ruby 1.9.3 存在问题。

# android - 无需使用其他应用程序即可读取二维码

> ID：10796479
> 
> 赞同：-1
> 
> 时间：2012-05-29T09:32:57.577
> 
> 标签：android, qr-code, zxing

我想实现一个活动，当开始时，通过摄像头捕获二维码，然后对其进行解码。我可以在平板电脑上不安装其他应用程序的情况下执行此操作吗？我看过zxing，但我不明白它是如何实现的..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T09:35:35.953

是的你可以。您将必须： - 初始化相机并启动预览模式 - 等待预览图像并处理它 - 将其传递给 zxing 库进行解码。

良好的起点：zxIng 演示应用程序 - 可用源

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T10:16:23.390

使用开源二维码项目并将它们用于您的应用程序。 [zxing是一个](http://code.google.com/p/zxing/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-29T11:14:56.430

Try using latest zxing liberary. You can use it by two ways,

1.  Add the zxing library to your workespace and make it as liberay project.
2.  Add all the file of the zxing liberary to your project.

The second option is much easier. You have to make changes in CaptureActivity according to your requirements. Its very easy.

# javascript - 我无法解释以下输出的结果

> ID：10796484
> 
> 赞同：3
> 
> 时间：2012-05-29T09:33:30.623
> 
> 标签：javascript, oop

我正在尝试阅读 jQuery 的源代码，但一些基本概念阻止了我。为简单起见，我编写了以下代码，但输出结果很奇怪。

```
function Foo(){
}
var foo = new Foo();
var foo2 = new Foo();

console.log(Foo.toString == Foo.prototype.toString); // false
console.log(foo.toString === Foo.toString); // false
console.log(foo.toString == foo2.toString); // true 
```

我不知道为什么第一个和第二个是假的。我知道任何自定义对象都必须继承 Object，而且我根本没有重写 toString 方法，但是为什么 foo.toString !== Foo.toString !== Foo.prototype.toString ？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T09:36:45.417

前两个是`false`因为您将**函数**的方法与**对象**的方法进行比较。
这本身不是问题，但是函数会覆盖`toString`。所以本质上，你是在比较`Function.prototype.toString`和`Object.prototype.toString`，它们是不同的函数。

> ```
> console.log(Foo.toString == Foo.prototype.toString); 
> ```

与 相同`Function.prototype.toString == Object.prototype.toString`，因为`Foo`是函数并继承自`Function.prototype`，但是`Foo.prototype`对象，继承自`Object.prototype`。

> ```
> console.log(foo.toString === Foo.toString); 
> ```

同样在这里。`foo`是一个对象，继承自`Foo.prototype`，它是一个对象。

* * *

这些输出`true`：

```
console.log(Foo.toString == Function.prototype.toString); // true
console.log(foo.toString === Object.prototype.toString); // true
console.log(foo.toString === Foo.prototype.toString); // true 
```

最后一个是`true`因为`foo`是通过构造函数创建的`Foo`，因此继承自`Foo`的原型，`Foo.prototype`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T09:38:52.810

您不是在比较方法的输出，而是在比较*引用*。在 javascript 中，相等运算符比较引用，除了原始值（保持简单）。

代码示例：

```
var foo = 5, bar = 5;
foo === bar // true

var foo = function() {}, bar = function() {};
foo === bar // false

// If you were to compare the outputs, the following would be true:
foo() === bar() // true 
```

回到你的例子：

*   `Foo.toString`与的引用不同，**但**`Foo.prototype.toString`与 的引用相同`Function.prototype.toString`。
*   `foo.toString`与 的引用不同`Foo.toString`。与`Foo.prototype.toString`（检查`foo.toString === Foo.prototype.toString`，是真的）相同。
*   `foo`和`foo2`是两个不同的对象。这就是为什么他们的方法不一样的参考。

一些例子来说明：

```
Foo.toString === Function.prototype.toString // true
foo.toString === Foo.prototype.toString 
```

# c - 与 Linux 上的硬件安全模块接口

> ID：10796485
> 
> 赞同：5
> 
> 时间：2012-05-29T09:33:32.973
> 
> 标签：c, openssl, pkcs#11, hsm

我必须使用 HSM 设备来满足我项目中的安全要求。我对 HSM 如何在 Linux 机器上与 C 接口感到困惑。

用户如何访问 HSM 内部存储器以执行不同的操作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T18:58:33.653

每个 HSM 供应商都支持至少一个加密 API。PKCS#11 是一个特别常见的选择，但还有许多其他选择。例如，OpenSSL 通过[引擎接口](http://www.openssl.org/docs/crypto/engine.html)支持 HSM 。

供应商通常会在其实现的“标准”API 之外公开一个专有 API。与标准 API 中可能表达的内容相比，专有 API 通常提供对密钥安全属性和密钥使用的更大程度的控制。

使用 HSM 时，通常会发出命令以从安全存储中加载密钥并检索密钥对象的*句柄。*此句柄是允许 HSM 安全地执行密钥操作而不暴露密钥材料的抽象层。

对于您的项目，重要的是您不要简单地将 HSM “推”到解决方案中的某个位置以使其看起来安全。相反，请仔细考虑系统的安全属性以及密码学如何帮助您防御攻击。确定攻击向量（以及相关的加密防御）后，请考虑哪些加密 API 可以支持您的用例。只有这样，您才能从支持该 API 的供应商中选择最佳供应商。

根据我的经验，标准 API 仅适用于简单的安全系统。对于复杂的项目，几乎总是需要使用特定供应商的专有 API。在这种情况下，在确定真正满足您需求的产品之前，请严重依赖供应商提供支持和概念验证。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-12T05:35:08.153

我知道这是一岁了，但如果其他人遇到它，这个链接有更详细的讨论：

[使用来自 USB 令牌的证书和密钥进行数字签名](https://stackoverflow.com/questions/15359496/digital-signing-using-certificate-and-key-from-usb-token/16504497#16504497)

包括我添加的一些长格式的工作代码。也欢迎您直接通过此链接获取我的代码： [https ://github.com/tkil/openssl-pkcs11-samples](https://github.com/tkil/openssl-pkcs11-samples)

祝你好运！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-04T21:10:59.860

HSM 供应商应该为您提供了一个库。您可以使用此库通过 PKCS#11 接口与您的 HSM 进行交互。为此，您需要项目中的 PKCS#11 头文件。查看此站点[http://www.calsoftlabs.com/whitepapers/public-key-cryptography.html](http://www.calsoftlabs.com/whitepapers/public-key-cryptography.html)以获得介绍

# c# - 无法将 JSON 对象反序列化为类型“System.Collections.Generic.List`1[obJson]”

> ID：10796486
> 
> 赞同：0
> 
> 时间：2012-05-29T09:33:38.233
> 
> 标签：c#, json, json.net

我正在尝试反序列化（使用 Newtonsoft）JSON 并转换为 c# 中的列表。它向我抛出错误“无法将 JSON 对象反序列化为类型 'System.Collections.Generic.List`1[obJson]'。”

这是我的 JSON 字符串：

```
 string webContent = "{\"searchResults\":     [{\"gefId\":0,\"resultNumber\":1,\"distance\":4.2839,\"sourceName\":\"MQA.MQ_34172_HD\",\"name\":\"USER_DEFINED\"},{\"gefId\":0,\"resultNumber\":1,\"distance\":4.2839,\"sourceName\":\"MQA.MQ_34172_HD\",\"name\":\"USER_DEFINED\"}]}"; 
```

转换，这一行抛出错误：

```
 List<obJson> result = JsonConvert.DeserializeObject<List<obJson>>(webContent); 
```

我的自定义课程：

```
public class SearchResults
{
    public int gefId { get; set; }
    public int resultNumber { get; set; }
    public decimal distance { get; set; }
    public string sourceName { get; set; }
    public string name { get; set; }
}

public class obJson
{
    public SearchResults SearchResults { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T09:48:15.560

由于您的 json 是一个对象，其`searchResults`成员包含一个数组，`obJson`因此如下更改您的

```
public class obJson
{
    public List<SearchResults> searchResults { get; set; }
} 
```

并反序列化为

```
obJson result = JsonConvert.DeserializeObject<obJson>(webContent); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T09:48:45.647

问题出在您的模型上，或者与您发送的数据相反。您正在接收一个数组并希望将其反序列化为普通对象。你可以改变你的模型

```
public class obJson
{
    public SearchResults[] SearchResults { get; set; }
} 
```

你的结果将被反序列化就好了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T09:38:38.217

您的 json 无效。

```
Parse error on line 1:
{    \"searchResults\": [
-----^
Expecting 'STRING', '}' 
```

[http://jsonlint.com/](http://jsonlint.com/)

# solr - solr 和 lucene 中的索引存储

> ID：10796490
> 
> 赞同：2
> 
> 时间：2012-05-29T09:33:48.657
> 
> 标签：solr, lucene

我已经通过了 lucene 索引机制。我有一些疑问，我找不到直接的答案，我仍然对我在几个参考文献中的阅读感到困惑。

考虑使用 lucene 索引数据库表。

假设该表有 10 列，其中很少有 caseid、modifiedby、modifiedtime、casename、legalname 等...

现在，如果我在案例 id 上创建索引，那么在搜索时是否可以根据字段修改进行搜索？？？

假设我在 2 列 caseid 和 modifiedby 上创建了一个索引，那么将如何进行索引以及类似于前一个的疑问，我们可以根据未编入索引的合法名称进行搜索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T11:37:48.733

如果我的意图正确（我在搜索领域工作，这不仅仅是关于词袋，它也是关于意图:)），你去：

**解决方案 1**

**第 1 步**：创建一个字段，例如在您的 schema.xml 中将其称为数据（不要忘记将其标记为多值），例如：

```
<field name="Data" type="text" indexed="true" stored="true" required="false" multiValued="true" /> 
```

**第 2 步**：您可以使用 schema.xml 中的 copyfield 指令将要搜索的所有字段的内容复制到 Data （在上面创建），例如

```
<copyField source="caseId" dest="Data" />
<copyField source="modifiedBy" dest="Data" />
<copyField source="casename" dest="Data" /> 
```

**第 3 步**：在 schema.xml 中将默认搜索字段 () 标记为 Data

现在，当您发出查询时，它将搜索您复制到数据的所有字段。

**解决方案 2**

有一个替代解决方案，其中在查询本身中，您可以指定字段名，例如 q=Hello+casename:Hello （在这种特殊情况下，它将在标记为默认的字段中搜索 hello 并在 casename 中搜索 Hello）。您的查询中可以有多个搜索声明。但我建议我以前的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T11:15:54.617

> 现在，如果我在案例 id 上创建索引，那么在搜索时是否可以根据字段修改进行搜索？？？

将“indexed=true”设置为所有需要索引的字段。我不明白你为什么害怕索引你需要的所有列。

你不会对 MySQL 索引感到困惑吗？

# jquery - 难以找到/最近

> ID：10796493
> 
> 赞同：1
> 
> 时间：2012-05-29T09:34:08.503
> 
> 标签：jquery, jquery-ui, jquery-selectors

**更新 1：**

我遇到这个问题是因为我在使用它`.BC1`之前就移除了吗？`get_firm_summary();`

**原始问题：**

我重新开始了这个问题，因为它的结构不好并且引起了很多混乱。

在开始之前，我想指出我使用的是 jQuery 1.4

我有一个函数，我可以`span`在一些 HTML 中动态创建一个标签，该`span`标签看起来像这样：

`<span class='BC1'>some text here</span>`

插入之前的 HTML`.BC1`如下所示：

```
<div class="portlet_10">
    <div class="portlet_header_10"></div>
    <div class="portlet_sub_header_10">this is where the span gets inserted</div>
    <div class="portlet_content_10">this is the bit which should get cleared and appended with new data</div>
    <div class="portlet_footer_10"></div>
<div> 
```

`.BC1`插入后看起来像这样：

```
<div class="portlet_10">
    <div class="portlet_header_10"></div>
    <div class="portlet_sub_header_10"><span class="BC1">some text here</span></div>
    <div class="portlet_content_10">this is the bit which should get cleared and appended with new data</div>
    <div class="portlet_footer_10"></div>
<div> 
```

然后我有`click`这个`.BC1`标签的事件：

```
$('.BC1').live('click', function() {
    alert("clicked");
    $(this).closest('.portlet_10').find('.portlet_sub_header_10').empty();  
    get_firm_summary( $(this) );
}); 
```

随着插入的消失，警报并找到最接近的`portlet_sub_header_10`并将其设置为有效。我遇到了问题`empty();``.BC1``get_firm_summary( $(this) );`

该函数看起来像这样：

```
function get_firm_summary( that ) {
    $.ajax({
        url: 'get_firm_summary.aspx?rand=' + Math.random(),
        type: 'GET',
        error: function(xhr, status, error) {
            console.log(status);
            console.log(xhr.responseText);
        },
        success: function(results) { 
            console.log( that.attr("class") );
            that.closest('.portlet_10').find('.portlet_content_10').empty().append( results );
        }
    });
} 
```

在这里，console.log 工作正常，但`portlet_content_10`.

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T09:47:19.617

问题是因为在您调用之前，`get_firm_summary( $(this) );`您正在调用`empty()`单击元素的父 div。这会丢失对 DOM 中元素的引用，从而使任何遍历功能变得不可能。

试试这个：

```
$('.BC1').live('click', function() {
    get_firm_summary( $(this) );
});

// ajax:
success: function(results) {
    // add new text
    that.closest('.portlet_10').find('.portlet_content_10').empty().append("FOO BAR");

    // remove clicked element
    that.closest('.portlet_10').find('.portlet_sub_header_10').empty();  
} 
```

请参阅此小提琴以获取[**工作示例**](http://jsfiddle.net/RoryMcCrossan/GceMW/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T10:02:08.510

试试这个以获得更好的解决方案

```
$('.BC1').live('click', function() {
    alert("clicked");
    get_firm_summary( $(this) );
    $(this).closest('.portlet_10').find('.portlet_sub_header_10').empty();  

}); 
```

# java - 如何在java中测试匿名嵌套类？

> ID：10796495
> 
> 赞同：3
> 
> 时间：2012-05-29T09:34:16.363
> 
> 标签：java, class, testing, junit, nested

我需要检查 junit 调用的嵌套匿名类的方法。但是这个类是私有的。有没有一种方法可以在不改变工作的可见性和逻辑的情况下对其进行测试？可能存在解决类似问题的通用方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T09:38:16.090

类是私有的或匿名的这一事实意味着实现细节是私有的。一般来说，你的测试不应该依赖于实现细节，而应该是测试**行为**，而不是具体的实现。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T09:36:09.140

唯一的方法是测试创建匿名内部类对象的方法，或者使其成为非匿名和非私有的。（我已经看到了大量的代码，使其成为默认可见性并使用`@VisibleForTesting`注释。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T09:55:01.083

您不应该直接测试该私有类。

很可能它只是一个用作实用程序的小类，或者它实现了一些广泛的公共接口。

在第一种情况下，只需测试包含私有类的类，根本不用担心私有类。您可以将其视为实现细节。

在第二种情况下，只需针对它的公共接口测试该类。

如果我对您的代码有误，那么我的建议是稍微更改设计，将包装类移动到单独的包中，将私有类提取到包级别并直接测试它。最后一种方法是将其标记为@VisibleForTesting（来自 Guava 库的注释）并提高包私有的可见性（默认）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-30T14:38:00.673

我非常同意 Matthew Farwell 的说法：

> 一般来说，你的测试不应该依赖于实现细节，而应该是测试行为，而不是具体的实现。

然而，测试需要好的设计。如果你真的觉得你应该直接测试那个类，那么这暗示着那个类应该是一个普通的公共类（而不是一个内部匿名类）。

# php - 坚持新实体 onFlush

> ID：10796496
> 
> 赞同：7
> 
> 时间：2012-05-29T09:34:22.533
> 
> 标签：php, doctrine-orm, doctrine

我尝试使用`onFlush`Doctrine 中的事件来持久化一个新实体，但是在尝试持久化时会导致无限循环。这是我在侦听器中所做的：

```
$countusers = $em->getRepository('DankeForumBundle:NotificationUser')->countNotificationsByDeal($entity);
if ($countusers > 0) {
  $notification = new NotificationAction();
  $notification->setDeal($entity);
  $notification->setDatepost(new \DateTime());
  $notification->setNotificationtype(NotificationAction::TYPE_TOP_DEAL);
  // $em is set to EntityManager
  $em->persist($notification);
  // $uow ist set to UnitOfWork
  $uow->computeChangeSet($em->getClassmetadata('Danke\ForumBundle\Entity\NotificationAction'), $notification);
} 
```

我知道当我在`onFlush`事件中冲洗时我会得到一个循环，但我不这样做！我只计算文档中所说的新更改集。

有人可以告诉问题出在哪里吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-29T00:46:46.010

我对 onFlush 事件有类似的问题。请更换

```
$em->persist($notification); 
```

至

```
$uow = $em->getUnitOfWork();
$uow->persist($notification);

$metadata = $em->getClassMetadata(get_class($notification));
$uow->computeChangeSet($metadata, $notification); 
```

`$uow->persist()`将使*UnitOfWork*了解新实体并安排其插入。调用`$uow->computeChangeSet()`是必要的，以收集应该由 Doctrine 的持久化器插入的数据。

# ios - UIPopoverController 不关闭

> ID：10796507
> 
> 赞同：1
> 
> 时间：2012-05-29T09:35:03.620
> 
> 标签：ios, uipopovercontroller

我有一个普通的 UIPopoverController ，它是这样制作的：

```
-(IBAction)btKBIs_click:(id)sender
{

if(kbiPopOver != NULL)
    [kbiPopOver dismissPopoverAnimated:YES];

KBIViewController *kbiViewController = [[KBIViewController alloc]initWithNibName:@"KBIViewController" bundle:nil CurrentUser:currentUser];
kbiViewController.currentStatus = FIRST;
kbiViewController.firstlist = [currentUser getDescriptions];
kbiViewController.mapViewController =self;

UINavigationController* kbiNavController = [[UINavigationController alloc] initWithRootViewController:kbiViewController];

kbiPopOver = [[UIPopoverController alloc] initWithContentViewController:kbiNavController];
kbiPopOver.delegate = self;

kbiViewController.kbiPopOver = kbiPopOver;

[kbiPopOver presentPopoverFromBarButtonItem:sender 
                     permittedArrowDirections:UIPopoverArrowDirectionUp animated:true];

} 
```

在我正在调用的类 KBIViewController 中：

```
 [self.kbiPopOver dismissPopoverAnimated:YES];
    [self.kbiPopOver.delegate popoverControllerDidDismissPopover:self.kbiPopOver]; 
```

解雇它，但它不起作用。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T09:55:22.213

您是否在类接口中添加了该方法`<UIPopOverControllerDelegate>`并实现了该`– popoverControllerDidDismissPopover:`方法？`dismissPopoverAnimated:`当您在弹出框外点击时，只需在代码或 delgate 方法中显式调用。`[self.kbiPopOver.delegate popoverControllerDidDismissPopover:self.kbiPopOver];`从您的代码中删除它。

# jquery - jQuery选择多个第n个孩子

> ID：10796508
> 
> 赞同：0
> 
> 时间：2012-05-29T09:35:08.993
> 
> 标签：jquery, jquery-selectors, css-selectors

我想选择表中的所有行但排除某些列，在这种情况下也无法分配类名。

我现在拥有的是：

[http://jsbin.com/ibulej/5/edit](http://jsbin.com/ibulej/5/edit)

适用于一列。

稍后我将使用它来对不同的表进行内联表搜索，我必须在其中排除一些列。

完成这项任务的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T10:02:51.787

您可以使用以下代码从选择中排除使用`$.filter`和的组合`$.index`来完成任务的列

```
 var cols = [2,3,4];

  $("#button").click(function() {
      var jo = $("#tableid tr").find('td').filter(function(i){
         if($.inArray($(this).index()+1,cols) != -1)
             return false;
          else 
              return true;
       });

    jo.css("background-color","red");

  }); 
```

在数组中构建您的排除列表`cols`，这些将被排除在选择之外。

参考：[$.index](http://api.jquery.com/index/) [$.filter](http://api.jquery.com/filter/)

[工作小提琴](http://jsfiddle.net/joycse06/L7D9C/2/)

我不确定这是否是最好的方法，但它可以满足您的需要。

# algorithm - AVL Tree数据结构实现优先级队列

> ID：10796509
> 
> 赞同：2
> 
> 时间：2012-05-29T09:35:19.820
> 
> 标签：algorithm, data-structures

优先队列：基本操作：插入删除（删除最小元素）

目标：为上述功能提供有效的运行时间或增长顺序。

**优先队列的实现方式：**

```
Linked List: Insertion will take o(n) in case of insertion at end o(1) in case of 
             insertion at head.
             Delet (Finding minumum and Delete this ) will take o(n) 

BST:
   Insertion/Deltion of minimum = In avg case it will take o(logn) worst case 0(n)

AVL Tree: 
   Insertion/deletion/searching: o(log n) in all cases. 
```

***我的困惑在这里：***

为什么我们不使用 AVL 树来实现优先级队列，为什么我们选择二进制堆......虽然我们知道在 AVL 树中我们可以在最坏的情况下在 o(log n) 中进行插入/删除/搜索。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T09:42:20.710

二叉堆不是二叉搜索树（BST）。如果严重不平衡/恶化成一个列表，确实需要 O(n) 时间。堆通常总是 O(log(n)) 或更好。IIRC Sedgewick 声称基于数组的堆的平均时间为 O(1)。

为什么不是 AVL？因为它在结构中维护***了太多的秩序***。太多的秩序意味着，太多的努力去维持这个秩序。我们可以摆脱的订单越少越好 - 它通常会转化为***更快的操作***。例如，RBT 优于 AVL 树。RBT，红黑树，*几乎*是平衡树——它们节省了操作，同时仍然保证了 O(log(n)) 时间。

但是任何树都是完全有序的结构，所以堆通常更好，因为它们只确保最小元素在顶部。它们只是部分排序的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T09:39:14.857

复杂性并不是一切，实际性能还有其他考虑因素。

对于大多数目的，大多数人甚至不使用 AVL 树作为平衡树（就我所见，红黑树更常见），更不用说作为优先级队列了。

这并不是说 AVL 树没用，我很喜欢它们。但他们确实有一个相对昂贵的插件。AVL 树的好处（甚至击败红黑树）是在不修改的情况下进行大量查找。这不是优先级队列所需要的。

作为一个单独的考虑因素——不要介意你的 O(log n) 插入二进制堆，斐波那契堆有 O(1) 插入和 O(log N) 最小删除。有很多数据结构可供选择，权衡略有不同，因此您不会期望看到每个人都只选择满足您（非常简短）标准的第一个东西。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-29T09:39:02.890

因为在二叉堆中，最小元素是根。

# c# - 事件导航键窗口 CE？

> ID：10796510
> 
> 赞同：0
> 
> 时间：2012-05-29T09:35:26.933
> 
> 标签：c#, windows-mobile, windows-mobile-5.0

我是 Window 移动开发的新手。

我正在尝试开发一个在window CE 5.0 上运行的应用程序。

该设备使用按键导航。

如何为导航键编写事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T15:24:46.157

您应该有一个带有 WM5 SDK 的模拟器，可用于在 Visual Studio 下查看设计器。

这是简单的方法：在设计器中，只需双击其中一个按钮，让 Visual Studio 为您连接所有内容。

# mysql - 在 MySQL 中存储十进制度的最佳方法是什么？

> ID：10796513
> 
> 赞同：2
> 
> 时间：2012-05-29T09:35:37.470
> 
> 标签：mysql

我的表中有纬度和经度列。

我目前正在存储纬度`float(16,14)`和经度`float(17,14)`。这是存储它们的最佳方式吗？我插入的值来自 JS `navigator.geolocation`，并且它们的小数点后不超过 14 位。

我应该`decimal`改用吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T09:39:49.020

你应该使用十进制！阅读此内容：[浮点值问题](http://dev.mysql.com/doc/refman/5.0/en/problems-with-float.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T09:41:22.403

该[`DECIMAL`](http://dev.mysql.com/doc/refman/5.1/en/fixed-point-types.html)类型存储*精确的*数值数据值（如果您使用 MySQL5.0.3 或更高版本），该[`FLOAT`](http://dev.mysql.com/doc/refman/5.1/en/floating-point-types.html)类型表示*近似*的数值数据值。

因为据我所知，纬度和经度值通常是大多数用例的精确数字数据值，所以我会选择[`DECIMAL`](http://dev.mysql.com/doc/refman/5.1/en/fixed-point-types.html).

# mercurial - 是否可以在 hgweb 的 RSS 提要中包含差异？

> ID：10796514
> 
> 赞同：4
> 
> 时间：2012-05-29T09:35:40.130
> 
> 标签：mercurial, rss, hgweb

RSS 提要是一种很好的方式，可以让人们了解 repo 中的最新更改。不幸的是，默认的 RSS 提要在正文中只包含提交消息。

[这个类似的问题](https://stackoverflow.com/questions/3915666/how-to-make-the-mercurial-hgwebdir-rss-atom-feed-display-the-branch-name)有关于如何自定义提要的信息，但不幸的是没有提到添加差异。有可能吗？我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T17:00:13.783

事实证明，不仅`{diff}`没有传递给`changelogentry.tmpl`for RSS，而且 RSS 模板集本身也缺少一些显示差异所需的模板。

我已经完成了一个快速而肮脏的补丁，将原始差异添加到 Mercurial RSS 模板集。该补丁基于 Mercurial 的 2.2.1 版本。除了 RSS 模板集之外，它还修改了 Mercurial 源 ( `webcommands.py`)，因此您最终将使用 Mercurial 本身的修补版本，而不仅仅是模板。

该补丁可以在我在 Bitbucket 上的 Hg 存储库副本中的[so-10796514 分支上找到。](https://bitbucket.org/targi/mercurial/changeset/4e41f0dcb0d4)随意使用它。

这是修改后的变更日志在我的机器上的样子：

![带有差异的 RSS 更改日志的屏幕截图，在 Safari 中](../Images/8bb3c6a10f2fb0614436ca07107e2db9.png)

我想从这一点开始可以改进。

# java - 使用正则表达式，如何将属性值从一种模式更改为另一种模式

> ID：10796515
> 
> 赞同：0
> 
> 时间：2012-05-29T09:35:44.717
> 
> 标签：java, regex

我有一个 html 文件，其中 html 元素的名称如下：

```
<input type="text" name="HCFA_DETAIL_SUPPLEMENTAL" value="" size="64" /> 
```

我的要求是在 java 命名约定中重命名 name 属性值，如下所示：

```
<input type="text" name="hcfaDetailSupplemental" value="" size="64" /> 
```

由于有大量这样的元素，我想使用正则表达式来完成。谁能建议我如何使用正则表达式来实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T09:50:16.107

使用 jQuery 获取名称，然后使用正则表达式替换所有出现的情况`_[a-z]`：

```
$('input').each(function () {
    var s = $(this).attr('name').toLowerCase();
    while (s.match("_[a-z]"))
        s = s.replace(new RegExp("_[a-z]"), s.match("_[a-z]").toString().toUpperCase());
    $(this).attr('name', s);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T11:00:38.173

在大多数情况下，将正则表达式与 html 一起使用是不好的做法，但如果您必须使用它，那么这里是一种解决方案。

所以首先你可以在 name="XXX" 属性中找到文本。可以通过使用这个 regex 来完成`(?<=name=")[a-zA-Z_]+(?=")`。当你找到它时，将“_”替换为“”，并且不要忘记将其余字母小写。现在您可以使用我们之前使用的相同正则表达式将旧值替换为新值。

这应该可以解决问题

```
String html="<input type=\"text\" name=\"HCFA_DETAIL_SUPPLEMENTAL\" value=\"\" size=\"64\"/>";

String reg="(?<=name=\")[a-zA-Z_]+(?=\")";
Pattern pattern=Pattern.compile(reg);
Matcher matcher=pattern.matcher(html);
if (matcher.find()){
    String newName=matcher.group(0);
    //System.out.println(newName);
    newName=newName.toLowerCase().replaceAll("_", "");
    //System.out.println(newName);
    html=html.replaceFirst(reg, newName);
}
System.out.println(html);
//out -> <input type="text" name="hcfadetailsupplemental" value="" size="64"/> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T09:40:50.547

不要使用正则表达式来遍历 HTML（为什么[在这里](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)）。使用适当的框架（例如[HTML Parser](http://htmlparser.sourceforge.net/) ）应该可以解决问题。

[此处](http://htmlparser.sourceforge.net/samples.html)提供了一系列可帮助您入门的示例。

# ios - 应用退出活动并再次变为活动状态后无法呈现模态视图

> ID：10796521
> 
> 赞同：2
> 
> 时间：2012-05-29T09:36:09.670
> 
> 标签：ios, modalviewcontroller

我创建了一个显示元素列表的应用程序，用户可以通过按下按钮在其中呈现模态视图。这很好用，用户可以多次展示和关闭。

当用户在显示模态视图时按下主页按钮时会出现问题。我已经设置了一个通知，在应用程序退出时调用一个方法，但它不响应关闭 modalview 控制器。

因此，当用户重新进入应用程序并尝试打开 modalview 控制器时，什么也没有发生。做了一些调试后，我可以看到 self.modalViewController 已设置。所以modalview还是呈现出来了，但是不可见，我也无法将其关闭。

这是我用来呈现模态视图的代码。起初我有一个 if 条件，它检查 self.modalViewController 是否已经存在：

```
if(self.modalViewController)
{
    NSLog(@"Modalview: %@", self.modalViewController);
}

//Present login
OrderContractController *occ = [[OrderContractController alloc] init];
occ.modalTransitionStyle = UIModalTransitionStyleCoverVertical;
[occ setMOC:self.context];
[self presentModalViewController:occ animated:YES]; 
```

它打印出以下内容： `Modalview: <OrderContractController: 0x8483910>`

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T11:22:11.553

当模态视图控制器被移除或应用进入后台时，您需要设置 self.modalViewController = nil。

# cocos2d-iphone - CCLabelTTF 在模拟器中工作但不在设备中

> ID：10796525
> 
> 赞同：0
> 
> 时间：2012-05-29T09:36:27.853
> 
> 标签：cocos2d-iphone

此代码在模拟器中工作。当我们加载到设备中时它不起作用。在控制台中它显示错误为：
`Unable to load font BARBATRI.ttf`

我的代码是：-

```
CCLabelTTF *score = [CCLabelTTF labelWithString:[NSString stringWithFormat:@"Score : %d",[CommonUserDetails sharedUserDetails].GameScore] fontName:@"BARBATRI.ttf" fontSize:18];
score.position = ccp(240,160);
score.anchorPoint  = ccp(0.5, 0.5);
[self addChild:score]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T10:38:36.503

将此字体添加到您的项目资源和 info.plist 文件的“应用程序提供的字体”部分。有可能，您在 Mac OS 中有这种字体，但在 iOS 中没有这种字体。

# c# - 不能使用带有空命名空间的前缀

> ID：10796532
> 
> 赞同：2
> 
> 时间：2012-05-29T09:36:56.543
> 
> 标签：c#, xml, namespaces

我正在用 c# 创建一个 XML 文档。

现在一切都在一起了，但由于某种原因，我不断收到错误消息。

这是我的代码：

```
 FileStream Slide2XmlStream = new FileStream(slide2Xml, FileMode.Create, FileAccess.Write);
        XmlWriter slide2XmlWriter = null;

        try
        {
            XmlWriterSettings contentTypesSettings = new XmlWriterSettings();
            contentTypesSettings.Indent = true;
            slide2XmlWriter = XmlWriter.Create(Slide2XmlStream, contentTypesSettings);

            slide2XmlWriter.WriteStartDocument(true);
            slide2XmlWriter.WriteStartElement( "p", "sld","http://schemas.openxmlformats.org/presentationml/2006/main" );
            slide2XmlWriter.WriteAttributeString("r", "http://schemas.openxmlformats.org/officeDocument/2006/relationships");
            slide2XmlWriter.WriteAttributeString( "a","http://schemas.openxmlformats.org/drawingml/2006/main");

            slide2XmlWriter.WriteStartElement( "p", "cSld", null);

            slide2XmlWriter.WriteStartElement( "p", "spTree", null );
            slide2XmlWriter.WriteStartElement( "p", "nvGrpSpPr", null );
            slide2XmlWriter.WriteStartElement( "p", "cNvpr", null );
            slide2XmlWriter.WriteAttributeString("name", "");
            slide2XmlWriter.WriteAttributeString("id", "1");
            slide2XmlWriter.WriteEndElement();

            slide2XmlWriter.WriteStartElement( "p", "cNvGrpSpPr", null );
            slide2XmlWriter.WriteEndElement();

            slide2XmlWriter.WriteStartElement( "p", "nvPr", null );
            slide2XmlWriter.WriteEndElement();
            slide2XmlWriter.WriteEndElement();

            slide2XmlWriter.WriteStartElement( "p", "grpSpPr", null );
            slide2XmlWriter.WriteStartElement( "a", "xfrm", null );
            slide2XmlWriter.WriteStartElement( "a", "off", null );
            slide2XmlWriter.WriteAttributeString("y", "0");
            slide2XmlWriter.WriteAttributeString("x", "0");
            slide2XmlWriter.WriteEndElement(); 
```

该错误一直出现在方法开头的“a”前缀上。任何帮助都会得到真正的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T09:52:02.190

在 XML 中，一个元素可能在命名空间中，也可能不在命名空间中（这被认为是一种向后考虑的模式，有时也称为“空命名空间”）。如果您希望它在一个空名称空间中，这似乎是您在方法*末尾*附近请求的内容，那么您不能请求名称空间前缀。无法将命名空间前缀绑定到“空命名空间”。

反过来也是可以的。可能没有前缀，元素可能位于命名空间（*默认*命名空间）中，也可能不在命名空间中（*空*命名空间）。这取决于`xmlns`序列化 XML 文档中是否存在该属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T09:55:23.027

我已经修好了。我需要允许`xmlns`前缀并允许字符串值为空：

```
slide2XmlWriter.WriteAttributeString("xmlns","a",null,"http://schemas.openxmlformats.org/drawingml/2006/main"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-16T15:17:25.753

如果您正在使用`XmlSerializer`并且遇到此异常，请确保您的类中没有任何`ShouldSerializeXXX`用于 xml 属性的方法。

例如，不要这样做：

```
[XmlRoot(ElementName = "Foo")]
public class Foo
{
    [XmlAttribute(AttributeName = "Bar")]
    public string Bar{ get; set; }

    public bool ShouldSerializeBar(){ return true; }
} 
```

# cocoa-touch - TTStyleSheet 在重新加载时丢失样式

> ID：10796535
> 
> 赞同：0
> 
> 时间：2012-05-29T09:37:07.010
> 
> 标签：cocoa-touch, three20

我有一个 TTStyledSheet 可以正常加载。但是当我重新加载视图时，样式会丢失。

1.  我有一个 UITableViewController
2.  tableview 中的每个单元格都有一个 TTStyledTextLabel
3.  我有一个 tableview 的重新加载机制

当视图加载时，样式非常完美，正如我所期望的那样。但是，当我重新加载表格时，样式完全丢失了

在我的 feedView.m 文件中，我有这样的样式表

```
@interface feedViewStyleSheet : TTDefaultStyleSheet
@end

@implementation feedViewStyleSheet

- (TTStyle*)smallGrayText {
    TTTextStyle *style=[[TTTextStyle alloc] init];
    [style setFont:[UIFont fontWithName:@"HelveticaNeue" size:9]];
    [style setColor:[[GlobalFunctions sharedGlobalFunctions] UIColorFromRGB:85 :85 :85]];
    [style setNext:nil];
    return [style autorelease];
}
- (TTStyle*)smallBlueText {
    TTTextStyle *style=[[TTTextStyle alloc] init];
    [style setFont:[UIFont fontWithName:@"HelveticaNeue-Bold" size:14]];
    [style setColor:[[GlobalFunctions sharedGlobalFunctions] UIColorFromRGB:144 :5 :5]];
    [style setNext:nil];
    return [style autorelease];
}

- (TTStyle*)smallText {
    return [TTTextStyle styleWithFont:[UIFont fontWithName:@"HelveticaNeue" size:12] next:nil];
}

@end
#pragma mark {End TTStyles} 
```

在视图的初始化中我有这个

```
-(id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        //  TTStyleSheet styles
        [TTStyleSheet setGlobalStyleSheet:[[feedViewStyleSheet alloc] init] ];          

    }
    return self;    
} 
```

我试图调试；当我为每个单元格打印 [TTStyleSheet globalStyleSheet] 时，对于每个单元格。当应用程序启动时，它是我所期望的。调试输出如下

```
2012-05-29 17:26:17:961 MFace[41092:12803] Cell 0 Style: <feedViewStyleSheet: 0x7f7d240>
2012-05-29 17:26:17:978 MFace[41092:12803] Cell 1 Style: <feedViewStyleSheet: 0x7f7d240> 
```

但是当我重新加载时（那是样式丢失的时候），输出是

```
2012-05-29 17:26:22:228 MFace[41092:12803] Cell 0 Style: <TTDefaultStyleSheet: 0x7f12030>
2012-05-29 17:26:22:228 MFace[41092:12803] Cell 1 Style: <TTDefaultStyleSheet: 0x7f12030> 
```

看起来样式表在重新加载时不可用。我什至尝试在初始化期间删除“自动释放”。但它仍然是一样的。

我不确定为什么会这样。有什么建议么？

是的，我的应用程序中没有 TTNavigator，我只是尝试仅使用 TTStyleSheet 和 styledText 以及其他一些组件。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T09:34:23.727

我不知道如何解决这个问题；但我相信 TTStyles 在重新加载时会被释放或不存在。所以我每次重新加载表格时都重新声明它们。不确定这是否是一个好方法。但这对我有用。

# webrtc - 是否可以将多个视频流添加到同一个 Peer Connection 对象？

> ID：10796537
> 
> 赞同：6
> 
> 时间：2012-05-29T09:37:13.450
> 
> 标签：webrtc

`Peer Connection`我想知道，是否可以使用该函数向对象添加多个流并使用该`addStream()`函数在另一端接收它`onAddStream`？

我正在尝试将特定对等方可用的所有远程流转发给所有其他连接的对等方。本质上是建立一个视频会议系统，其中一个对等方充当“中心”。

# c# - 如何在单声道上为 Android 制作类似 Evernote 的菜单

> ID：10796539
> 
> 赞同：2
> 
> 时间：2012-05-29T09:37:21.283
> 
> 标签：c#, android, xamarin.android

如何在 Evernote 应用程序中使用 Mono for Android 制作菜单。

![在此处输入图像描述](../Images/ff890fd65dd108f549cb8d90cb454b06.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-31T08:18:46.347

如果您指的是 facebook 具有的滑入式菜单，那么这可能会有所帮助：

[如何在 Android 上制作 Facebook 的应用新菜单？](https://stackoverflow.com/questions/8428416/how-to-make-facebooks-app-new-menu-on-android)

# c# - EF 4.3.1 中可选关系的级联行为

> ID：10796542
> 
> 赞同：0
> 
> 时间：2012-05-29T09:37:28.910
> 
> 标签：c#, entity-framework, ef-code-first

我有一个从子类到父类的可选关系。当父对象被标记为删除时，如果该引用周围仍有子对象，我想在 SubmitChanges 上获得一个异常。

我尝试过的配置是这样的（没有从父级到子级的导航属性）：

```
modelBuilder.Entity<Child>()
    .HasOptional<Parent>(child => child.Parent)
    .WithMany()
    .HasForeignKey(child => child.ParentId)
    .WillCascadeOnDelete(false); 
```

像这个EF在删除父级时将子级的ParentId属性设置为null，这不是我想要的。

如果根据需要配置关系，则它可以工作：

```
modelBuilder.Entity<Child>()
    .HasRequired<Parent>(child => child.Parent)
    .WithMany()
    .HasForeignKey(child => child.ParentId)
    .WillCascadeOnDelete(false); 
```

这会引发异常，这将是所需的行为。但这种关系必须是可选的。使用 Code First 的 EF 4.3.1 是否可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T10:05:37.403

不，这是可选和必需之间的区别。必需 = 必须有一个主体记录，如果您在没有级联的情况下删除主体记录，则会出现异常。可选 = 不需要主体记录，如果您删除主体记录而不进行级联，则 FK 设置为空。

如果您需要其他任何东西，您必须自己处理。

# apache - Apache 站点在地址栏中没有 http:// 前缀

> ID：10796545
> 
> 赞同：0
> 
> 时间：2012-05-29T09:37:42.770
> 
> 标签：apache, url, lamp

我在 LAMP 堆栈上设置了 4 个站点，并在服务器上指向了多个域。一切都运行良好，但由于某种原因，没有一个站点具有 http:// 前缀。

这不是一个大问题，但实际上，这些网站将在安全区域运行 https，我希望访问者能够区分。

为什么 Apache 不显示 http:// 前缀？我正在使用命名虚拟主机并修改了我的 /etc/hosts 文件以将相关域指向我的服务器的 IP。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T09:41:33.277

很可能是*浏览器*隐藏了`http://`前缀。它也应该发生在您使用该浏览器访问的所有其他网站上。

![在此处输入图像描述](../Images/380f8037229836ee8042863e52f80735.png)

你不能用 Apache 来控制它——但不用担心，在 https 模式下，浏览器会确保用户看到差异。

# asp.net - ASP.NET 中的 Reportviewer 控件工具栏

> ID：10796548
> 
> 赞同：1
> 
> 时间：2012-05-29T09:37:48.227
> 
> 标签：asp.net, html, css, reporting-services, reportviewer

我在 ASP.NET 页面中使用 Reportviewer 控件。到目前为止它运行良好，今天我更改了一些页面样式，Reportviewer 工具栏现在变形了。如何解决？ ![在此处输入图像描述](../Images/761b576aaca07d7eb85a431900d07df8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T09:49:49.303

主要是因为你在 css 中声明了 Global Style。

# php - 准备使用php脚本比较mysql表

> ID：10796549
> 
> 赞同：2
> 
> 时间：2012-05-29T09:37:49.303
> 
> 标签：php, mysql, compare

我只是想直观地比较两个mysql表（结构相同，实际上是同一个表的两个版本），看看有什么区别：

*   查看修改/添加/删除的记录
*   对于修改过的记录，强调（例如通过颜色）哪些列被修改了。

我当然可以自己写，但为什么要重新发明轮子。

### 有没有这种现成的 PHP 脚本可用？

不需要任何框架的解决方案是首选。请不要发布代码，如果需要，我可以自己做。我只是在询问现成和经过测试的工具。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T09:46:44.543

看看[比较两个 MySQL 数据库](https://stackoverflow.com/questions/225772/compare-two-mysql-databases)。可能是你需要的东西。这里还有一些关于不匹配的行[http://www.mysqltutorial.org/compare-two-tables-to-find-unmatched-records-mysql.aspx](http://www.mysqltutorial.org/compare-two-tables-to-find-unmatched-records-mysql.aspx)。

# java - 使用外部 css 进行 HTML 转换

> ID：10796553
> 
> 赞同：0
> 
> 时间：2012-05-29T09:38:10.557
> 
> 标签：java, itext

我尝试使用 java iText API 将 HTML 转换为 PDF，它也可以正常工作，但问题是 API 不允许包含外部 CSS。

谁能告诉我如何将带有外部css的html转换为pdf？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T10:50:56.133

您可以在代码中内联 CSS，例如使用[Jericho](http://jericho.htmlparser.net)库。

您在他们的页面上有现成的代码示例：http: [//jericho.htmlparser.net/samples/console/src/ConvertStyleSheets.java](http://jericho.htmlparser.net/samples/console/src/ConvertStyleSheets.java)

# java - 我的动态壁纸实现中的 IndexOutOfBoundsException

> ID：10796556
> 
> 赞同：0
> 
> 时间：2012-05-29T09:38:15.650
> 
> 标签：java, android, rendering, live-wallpaper, indexoutofboundsexception

方法 changeFlowers 因索引超出范围异常而失败。

我是java新手，我正在调用已经实例化的FishOne（Arraylist rederable类）的方法“changeColor（）”但是它因索引超出范围异常而失败。

```
public void changeFlowers(int i)
{

        FlowerOne f1 = (FlowerOne)(this._fishes.get(i));   // Is this the right way to call ????
        f1.changeColor(this._theme);

} 
```

下面的代码 Aquarium.java，FishOne.java 提前感谢您的帮助。

* * *

## 水族馆.java,

```
public class Aquarium {
private AquariumThread _aquariumThread; 
private SurfaceHolder _surfaceHolder;   
private ArrayList<Renderable> _fishes;  
private Bitmap _backgroundImage;
private Context _context;

public void render(){
    Canvas canvas = null;
    try{

        canvas = this._surfaceHolder.lockCanvas(null);
        synchronized (this._surfaceHolder) {
            this.onDraw(canvas);
        }

    }finally{
        if(canvas != null){
            this._surfaceHolder.unlockCanvasAndPost(canvas);
        }
    }   
}

protected void onDraw(Canvas canvas) {
    this.renderBackGround(canvas);
    for (Renderable renderable : this._fishes) {
        renderable.render(canvas);
    }
};

public void initialize(Context context, SurfaceHolder surfaceHolder) {
    this._fishes = new ArrayList<Renderable>();
}

protected void onDraw(Canvas canvas) {
    this.renderBackGround(canvas);
    for (Renderable renderable : this._fishes) {
        renderable.render(canvas);
    }
};

public void start(){
    this._aquariumThread.switchOn();
}

public void stop(){
    boolean retry = true;
    this._aquariumThread.switchOff();
    while (retry) {
        try {
         this._aquariumThread.join();
            retry = false;
        } catch (InterruptedException e) {
            // we will try it again and again...
        }
    }
}

public synchronized void addFishes() {      

Point startPoint1 = new Point(1,300);
this._fishes.add(new fishOne(this._context, this, startPoint1, 90));

Point startPoint2 = new Point(100,300);
this._fishes.add(new fishOne(this._context, this, startPoint2, 90));

Point startPoint3 = new Point(200,300);
this._fishes.add(new fishOne(this._context, this, startPoint3, 90));

}

public void changeFlowers(int i)
{

        FlowerOne f1 = (FlowerOne)(this._fishes.get(i));
        f1.changeColor(this._theme);

}

} 
```

* * *

## FishOne.java

```
public class fishOne extends Animal {
private static final int TOTAL_FRAMES_IN_SPRITE = 1;
private static final int CLOWN_FISH_FPS = 1; 

int _fishColor;
Bitmap leftBitmap;
Bitmap rightBitmap;

public fishOne(Context context, Aquarium aquarium,  Point startPoint, int speed){       

    super(context, aquarium);   
    this.changeColor(1);
    this.initialize(this.leftBitmap, this.rightBitmap, CLOWN_FISH_FPS, TOTAL_FRAMES_IN_SPRITE, startPoint, speed);

}

public void changeColor(int mfishColor)
{

    switch(mfishColor) {
    case 1:

    BitmapFactory.Options options = new BitmapFactory.Options();
    options.inPurgeable = true;
    this.leftBitmap = BitmapFactory.decodeResource(getContext().getResources(), com.gotit.livewallpaper.fishshd.R.drawable.fish1, options);

    BitmapFactory.Options options1 = new BitmapFactory.Options();
    options1.inPurgeable = true;
    this.rightBitmap = BitmapFactory.decodeResource(getContext().getResources(), com.gotit.livewallpaper.fishshd.R.drawable.fish2, options1);

        break;

    case 2:
    BitmapFactory.Options options2 = new BitmapFactory.Options();
    options2.inPurgeable = true;
    this.leftBitmap = BitmapFactory.decodeResource(getContext().getResources(), com.gotit.livewallpaper.fishshd.R.drawable.redfish1, options2);

    BitmapFactory.Options options3 = new BitmapFactory.Options();
    options3.inPurgeable = true;
    this.rightBitmap = BitmapFactory.decodeResource(getContext().getResources(), com.gotit.livewallpaper.fishshd.R.drawable.redfish2, options3);

        break;
    default:
    }

}

public void render(Canvas canvas){
    super.render(canvas);   
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T09:47:51.980

这取决于代码的错误安全性的完整逻辑。基本上，如果您确定不会使用大于 ArrayList 大小的参数 i 调用 changeFlowers，那么没关系，您必须将 vheck 放入 changeFlowers 函数中。

喜欢

```
public void changeFlowers(int i)
{

    if(null!=this._fishes && this._fishes.size()>i){

        FlowerOne f1 = (FlowerOne)(this._fishes.get(i));
        f1.changeColor(this._theme);
}

} 
```

但是最好让代码安全地从调用这个函数的地方开始，因为实际问题就在那里。**上面的代码将停止错误，但您还需要在调用函数的位置使其正确。**

# javascript - jQuery：获取 HTML 表格第四行（仅）的第一列值

> ID：10796559
> 
> 赞同：3
> 
> 时间：2012-05-29T09:38:28.747
> 
> 标签：javascript, jquery, html, css

我有一个名为 resultGridTable 的表。我有一个要在表的每一行上执行的 jQuery 函数。在函数中，“this”表示一行。

1.  对于第四行，我需要提醒第一列值（第四行）。我有以下代码；但它不起作用。我们怎样才能让它发挥作用？

2.  对于第五行，我需要提醒行中的列数。我们该怎么做？

3.  在第六行的第二列，我有两个按钮（输入类型=“提交”）。我需要提醒第二个按钮的文本/值。（第二个按钮有一个名为“secondButton”的类）我们怎么做呢？

以下是代码::

```
$('#resultGridTable tr').each(function (i) 
{
    //"this" means row
    //Other operations in the row. Common for all rows

    if(i==3)
    {
        //Specific Operation for fourth row
        var columnValue = $(this 'td:nth-child(0)').val();
        alert(columnValue);
    }
}); 
```

阅读：

1.  [jQuery 代码：从父到子开始；不是从孩子到父母](https://stackoverflow.com/questions/10798332/jquery-code-starting-from-parent-to-child-not-from-child-to-parent/10798404#10798404)

2.  [如何使用jQuery获取html表中当前行第一列的值](https://stackoverflow.com/questions/1815859/how-to-get-value-of-first-column-in-current-row-in-html-table-using-jquery)

3.  [如何使用jQuery获取Html表的第一行的最后一列](https://stackoverflow.com/questions/3871709/how-to-get-the-first-rows-last-column-of-an-html-table-using-jquery)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-29T10:31:56.860

只是为了不同，你可以在这里混合 DOM 和 jQuery 以获得良好的效果，因为你已经在表中固定了偏移量：

```
var t = document.getElementById('resultGridTable');

// jQuery to get the content of row 4, column 1
var val1 = $(t.rows[3].cells[0]).text();  

// no jQuery here to get that row length!
var val2 = t.rows[4].cells.length;       

// DOM access for the cell, and jQuery to find by class and get the text 
var val3 = $('.secondButton', t.rows[5].cells[1]).text(); 
```

这些*都应该*比使用选择器快得多。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-29T09:41:05.450

查看[jQuery eq](http://api.jquery.com/eq/)：

```
alert($('#resultGridTable tr:eq(3) > td:eq(0)').text());
alert($('#resultGridTable tr:eq(4) > td').length);
alert($('#resultGridTable tr:eq(5) > td:eq(1) > .secondButton').text()); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-29T09:41:31.673

如果您对行/列有特殊值，请考虑为其添加一个类，然后您可以使用选择器而不是可能会改变的“魔术”数字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-06-12T17:20:12.953

改编自已接受的答案。如果你使用的是 jquery 而不是这个代码，`document.getElementById`不同的是你需要插入 [0] 的数组。

```
 var t = $('resultGridTable');

// jQuery to get the content of row 4, column 1
var val1 = $(t[0].rows[3].cells[0]).text(); 
```

# android - Android中活动之间的水平滚动

> ID：10796562
> 
> 赞同：1
> 
> 时间：2012-05-29T09:38:39.803
> 
> 标签：android, android-fragments, android-activity, android-viewpager, horizontal-scrolling

我正在为 Android 平台构建一个新应用程序，我想通过滚动来实现不同活动之间的移动。我还想使用某种滚动效果，就像在这个[例子](http://android-developers.blogspot.com/2011/08/horizontal-view-swiping-with-viewpager.html)中一样。

我在网上搜索并找到了几个使用[view pager](http://mobile.tutsplus.com/tutorials/android/android-user-interface-design-horizontal-view-paging/)和[Fragments](http://thepseudocoder.wordpress.com/2011/10/05/android-page-swiping-using-viewpager/)的示例，但我的问题是：

1.  View pager 用于在视图之间切换，我想在不同的活动之间切换。
2.  我不想使用片段，因为我认为它不适合早期的 API（在 Android 2.1 之前）。

所以，对于我的问题：

1.  除了使用 onFling 手势然后失去滑动效果之外，还有其他方法吗？
2.  我可以使用早期 API 的片段吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T09:47:08.767

当然可以在较低版本中使用片段。您只需使用 android 支持库并将 viewpager 附加到您的应用程序。这是一个非常好的示例，它使用 View Pager，幸运的是它实现了支持库，并且从 android 2.1 开始对我有用。

[http://viewpagerindicator.com/](http://viewpagerindicator.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T09:48:21.863

您可以在早期版本中使用片段，使用 android-support-v4。如果您使用 Eclipse，您可以通过右键单击它，“Android 工具”，然后“添加支持库...”将其添加到您的项目中

# java - 在赋值语句中获取返回类型

> ID：10796565
> 
> 赞同：0
> 
> 时间：2012-05-29T09:38:49.393
> 
> 标签：java, abstract-syntax-tree, eclipse-jdt

我如何使用 JDT 获取分配语句的类型。

我正在使用 ASTVisitor 遍历类文件，以查找类型为日期（日历）的赋值实例。虽然我可以使用 getType 方法找到 VaraibleDeclarationStatement 的此类实例，但 Assignment 节点没有此类方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T09:42:39.643

赋值被分解为 LHS 和 RHS，因此请检查 RHS 表达式的类型。

# ruby-on-rails - 覆盖 rails helper route 方法以从 GET 参数设置布局

> ID：10796572
> 
> 赞同：2
> 
> 时间：2012-05-29T09:39:06.913
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routes

我正在尝试根据每个请求的 URL 中传递的 GET 参数更改我的应用程序的布局：`&layout=name_of_the_layout`。

在我的 application_controller 中：

```
class ApplicationController < ActionController::Base
  layout :get_layout_from_params

  private
  def get_layout_from_params
    if params['layout']
      params['layout']
    else
      'application'
    end
  end
end 
```

它工作正常，但是当用户在应用程序中导航时“保持”布局，我需要在我的视图中的每个 rails route helper 上添加这个参数（即使是表单中的 POST 请求......）：

```
ressource_path(@ressource, :layout => get_layout_from_url()) 
```

where`get_layout_from_url()`是一个帮助器，它检查是否`params['layout']`在 URL 中设置，验证然后返回它。

这绝对不是 DRY ......我如何覆盖每个路由助手以包含此行为而不在我的视图中编写任何额外的代码？我想在我的观点中调用标准的 rails 方法：`ressource_path(@ressource), ...`

还是有更聪明的方法来实现这一目标？

PS：我使用的是 rails 3.2.3

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T09:47:07.470

我认为您最好将其存储在会话中，而不是将其附加到每个请求的 url 中。

在 Rails 中，您可以以非常简单的方式使用 session：

```
def get_layout_from_params
  if params['layout']
    session['layout'] = params['layout']
  else
    session['layout'] || 'application'
  end
end 
```

如果有`params['layout']`，则表示用户将要更改布局，因此您将其分配给会话。

如果没有`params['layout']`给定，则检查是否存在，如果 session['layout'] 为 false 或 nil ，则`session['layout']`返回或返回。`'application'`

- - 编辑 - -

以下版本更短，看你喜不喜欢：

```
def get_layout_from_params
  session['layout'] = params['layout'] || session['layout'] || 'application'
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T09:56:33.453

有旧的和不推荐使用的`default_url_options`现在替换为`url_options`：

```
class ApplicationController < ActionController::Base
  def url_options
    { :layout => validate_layout }.merge(super)
  end

  def validate_layout
    # some stuff reusable
    params[:layout]
  end
end 
```

如果它不适合，它是接近的。

# objective-c - Objective-C 程序的启动例程是做什么的？

> ID：10796573
> 
> 赞同：1
> 
> 时间：2012-05-29T09:39:14.697
> 
> 标签：objective-c

我知道所有加载类的信息都是在启动时收集的。但是我找不到任何关于它是如何完成的信息，以及与普通 C 程序的启动例程相比，Objective-C 启动例程的外观如何。

我只是想知道从这一点开始在 Objective-C 中添加了什么。Objective-C 程序是带有一些附加功能的 C 程序，还是结构完全不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T11:32:45.620

You should take a look at this article from Cocoa with Love: [http://cocoawithlove.com/2008/03/cocoa-application-startup.html](http://cocoawithlove.com/2008/03/cocoa-application-startup.html) , which gives a good overview.

However, if you really want to know what's going on, it's going to be a bit of a dig, but you can look at the source to the runtime at [http://opensource.apple.com/](http://opensource.apple.com/) . Look for the objc4* project inside of whichever OS you are interested in. Look to `objcrt.c` for the top of the initialization chain.

You asked two discrete questions in your original post: what the startup routine looks like (which is covered in the runtime) and "Is Objective-C program a C program with some additions". The answer to the latter is yes, it is a C program with some additions, in the same manner as C++. And, like C++, it contains some pretty significant additions to the runtime.

# c# - ASP.NET，从类库中引用本地资源文件

> ID：10796590
> 
> 赞同：2
> 
> 时间：2012-05-29T09:40:22.863
> 
> 标签：c#, asp.net, resources, webforms

我很难思考资源在 ASP.NET 项目中的工作方式。在我的解决方案中，我有 2 个项目：

1.  一个网站项目，其中包含我的大部分资源所在的 App_GlobalResources 文件夹（构建操作：“内容”）。
2.  一个实用项目，编译为类库（网站引用），我需要另一组资源（以下称为“ExceptionMessages”）。

*注意：每个项目都使用自己的资源，这里不涉及交叉链接。*

我直接在我的第二个项目中添加了一个新资源（作为“内容”或“嵌入资源”）并尝试通过`ExceptionMessages.Tag`. Intellisense 对此很满意，并正确建议了标签，但在运行时出现以下错误：

> “找不到适合指定区域性或中性区域性的任何资源。确保“Resources.ExceptionMessages.resources”在编译时正确嵌入或链接到程序集“App_GlobalResources.lqgd5zqy”中，或者所需的所有附属程序集都是可加载的并完全签署。”

不知何故，我不明白为什么网络服务器在 App_GlobalResources 中寻找资源，而不是直接在使用它的程序集中寻找资源......或者我如何以一种干净的方式解决这个问题。任何提示或想法？

谢谢！

# ajax - Ajax CodeIgniter 表单提交隐藏和显示新视图

> ID：10796591
> 
> 赞同：0
> 
> 时间：2012-05-29T09:40:26.337
> 
> 标签：ajax, codeigniter

我是 ajax 的新手，并试图将其集成到我的 CodeIgniter 应用程序中。基本上，当表单成功时，我希望隐藏原始模板并显示新模板？它目前显示两者，我该如何修改我的代码？提前致谢！

我尝试向我的控制器添加重定向但没有这样的运气:(

看法：

```
$('#submit').click(function(){
   $.post("<?php echo base_url(); ?>part-two",
      $("form").serialize(),
      function(result){
         $("#error_message").html(result);
      }, "html" 
   );       
}); 
```

控制器：

```
if($this->form_validation->run() == FALSE){
   echo validation_errors();        
} else {
  echo "success";
  $data['content'] = "part_two";
  $this->load->view('template', $data);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T19:14:32.270

我帮不了你这么多。请您使用 firebug 查看收到的 post 请求数据好吗？

由于两者都在显示，所以我认为发布请求还可以。问题出在您的视图文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T21:38:07.730

好吧，我想我知道你想要什么...

查看 html 标记：

```
<div class="container">
<form id="form">
    ...
</form>
    <div class="error_message">
    </div>
</div> 
```

脚本：

```
$('#submit').click(function(){
$.post("<?php echo base_url(); ?>part-two",
  $("form").serialize(),
  function(result){

     // clear the content and assing the result
     $("#form").remove();
     $("#error_message").html(result);
  }, "html" 
);       
}); 
```

# ruby-on-rails-3 - 我如何使用 ajax 在 rails 3.0 中渲染部分内容？

> ID：10796593
> 
> 赞同：0
> 
> 时间：2012-05-29T09:40:29.067
> 
> 标签：ruby-on-rails-3, jquery

我想在我的应用程序中使用 ajax 这是我的问题：

我有一个收入凭证控制器和模型，可以从各种来源获得收入。为此，我有一个带有卡、支票和 internet_banking 付款选项的 payment_mode 模型，这是我的代码：

来自模型： **income_voucher**

```
 class IncomeVoucher < ActiveRecord::Base
  has_one :payment_mode, :foreign_key => :voucher_id
 end 
```

** 付款方式：**

```
class PaymentMode < ActiveRecord::Base
 belongs_to :transactionable, :polymorphic => true
 belongs_to :receipt_voucher    
end 
```

**信用卡支付：**

```
class CardPayment < ActiveRecord::Base
  has_one :payment_mode, :as => :transactionable, :dependent => :destroy
end 
```

支票和网上银行的模式类似。

我的控制器： **income_vouchers_controller：**

```
class IncomeVouchersController < ApplicationController
def new
    @income_voucher = IncomeVoucher.new
    @invoices = current_company.invoices
    @income_voucher.build_payment_mode

    respond_to do |format|
      format.html # new.html.erb
      format.xml  { render :xml => @income_voucher }
    end
  end
 def create
    @income_voucher = IncomeVoucher.new(params[:income_voucher])

   transaction_type = params[:transaction_type]
    payment_mode = nil
    if transaction_type == 'cheque'
      payment = ChequePayment.new(params[:cheque_payment])
    payment.amount = @income_voucher.amount
    elsif transaction_type == 'card'
      payment = CardPayment.new(params[:card_payment])
    payment.amount = @income_voucher.amount
    elsif transaction_type == 'ibank'
      payment = InternetBankingPayment.new(params[:internet_banking_payment])
    payment.amount = @income_voucher.amount
    else
      payment = CashPayment.new
    payment.amount = @income_voucher.amount
    end
    payment_mode = PaymentMode.new
    payment_mode.transactionable = payment

    @income_voucher.payment_mode = payment_mode
    respond_to do |format|
      if @income_voucher.save

        format.html { redirect_to(@income_voucher, :notice => 'Income voucher was successfully created.') }
        format.xml  { render :xml => @income_voucher, :status => :created, :location => @income_voucher }
      else

        format.html { render :action => "new" }
        format.xml  { render :xml => @income_voucher.errors, :status => :unprocessable_entity }
      end
    end
  end 
```

在我的表格中，我这样做了：

```
<%= render :partial => "card_payment" %>
<%= render :partial => "cheque_payment" %>
<%= render :partial => "internet_banking_payment" %> 
```

朋友，直到现在，我只是像在 rails 中那样渲染我的局部，但现在我想使用 ajax 来做到这一点。我希望你们早点这样做。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T11:04:39.623

这很简单：

在您的 javascript 中（在页面上，例如：

```
$.ajax({
  url: "your_path",
  data: {  //params if needed
    your_param_name: param,
    your_param_name2: param2
  }
}); 
```

在您的路线中：

```
match 'your_path' => 'y_controller#y_method' 
```

在 y_controller 中：

```
def y_method
  # do smth with params[:your_param_name] if needed
  respond_to do |format|
    format.js
  end
end 
```

在您的 y_method.js.erb 中：

```
$('#your-div').html('<%= raw escape_javascript render("cart_payment") %>'); //instead html() may be append() 
```

# c++ - 使用冲浪检测器进行对象匹配

> ID：10796599
> 
> 赞同：1
> 
> 时间：2012-05-29T09:40:50.313
> 
> 标签：c++, opencv, surf, homography, entrypointnotfoundexcept

我正在尝试使用 SURF 检测器从图像中检测对象。为此，我尝试调试 OpenCV 提供的代码：

```
OpenCV-2.3.1-win-superpack\opencv\samples\cpp\tutorial_code\features2D\SURF_Homography.cpp 
```

但它不断显示运行时错误..

```
"The procedure entrypoint?
destroy@task_base@internal@interface5@tbb@SAXAAVtask@4@@z could not be located in the dynamic link library tbb_debug.dll" 
```

你能告诉我这背后的原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T11:21:31.827

现在我正在使用 opencv_calib3d231.lib 而不是 opencv_calib3d231d.lib ...它可以工作。谢谢

# google-app-engine - 如何更改 appengine 应用程序的所有者（将其移动/出售给新公司）

> ID：10796611
> 
> 赞同：12
> 
> 时间：2012-05-29T09:41:42.677
> 
> 标签：google-app-engine, admin, verification, account

我开发了一个 AppEngine 应用程序，我正在转移到另一家公司，并且我想在转移到另一家公司后从该应用程序中删除我自己的个人访问权限。

我转移所有权的第一步是邀请其他人作为具有“所有者”角色的管理员。

但是，转移后，在管理/权限控制台中我的名字旁边，我看到消息“无法删除唯一通过 SMS 验证的所有者” - 这似乎使我无法从应用程序中删除自己作为所有者。

似乎其他“所有者”无法通过短信验证他们的帐户，因为他们已经拥有对该应用程序的管理员访问权限。

另一个帐户如何获得“短信验证”，以便我们可以从 AppEngine 应用程序中删除我作为管理员的帐户？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-29T10:51:51.687

[您可以尝试让应用程序的新所有者在appengine.google.com](http://appengine.google.com)上创建一个新应用程序，如果他们的帐户尚未验证，这应该会触发 SMS 验证流程。

如果他们在验证号码时遇到任何问题，应使用[SMS Verification for App Creation FAQ](https://developers.google.com/appengine/kb/sms)底部链接的表格。

# sql - uniqueidentifier 类型的主键值不变

> ID：10796619
> 
> 赞同：0
> 
> 时间：2012-05-29T09:42:48.713
> 
> 标签：sql, visual-studio-2010, sql-server-2008, uniqueidentifier

我在 Visual Studio 2010 中创建了一个数据库。

该数据库有一个包含 3 列的表。

*   AdId 是主键，类型是 uniqueidentifier
*   类型为 nvarchar 的 AdName
*   类型为 uniqueidntifier 的 UserId

当用户登录并单击按钮时，我希望将一行添加到我的数据库中

*   AdName 的常量值（我确定了）
*   登录用户的 ID 为用户 ID
*   由数据库为 AdId 自动创建的 Id

添加一行后一切正常，但AdId的值在另一次没有改变，这个值一直是00000000-0000-0000-0000-000000000000。

我知道这是一个愚蠢的问题，但我不知道问题出在哪里，我该怎么办。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T09:48:10.723

两件事情：

*   您是否为 AdId 指定了默认的 NEWID()？

*   您是否发送`00000000-0000-0000-0000-000000000000`或`0x00`（二进制）到数据库
    例如，`SELECT CAST(0x00 AS uniqueidentifier)`

基本上，SQL Server 正在做你所要求的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T09:47:13.590

```
CREATE TABLE myTable (
    myId uniqueidentifier NOT NULL
);

ALTER TABLE myTable ADD CONSTRAINT myConstraint
                        DEFAULT NEWSEQUENTIALID()
                        FOR myId ; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T09:47:25.833

将 AdId 列的默认值设置为`newid()`

# javascript - Jasmine 和 requireJs - 不匹配的匿名 define() 模块：

> ID：10796626
> 
> 赞同：3
> 
> 时间：2012-05-29T09:43:23.550
> 
> 标签：javascript, requirejs, jasmine

我正在尝试将`Jasmine`.js 测试与`requires`.

**这是我的 specRunner 的一部分**

```
<script type="text/javascript" src="<?php echo $rootRequirejs?>/require.js"></script>
<script type="text/javascript">
    require.config({
        baseUrl: "./"
    });
</script> 
```

**这是我的规范文件的一部分**

```
define([

], function () {

}); 
```

**当我运行我的 specRunner 时，我收到以下错误，为什么？**

```
Uncaught Error: Mismatched anonymous define() module: function () {

}
http://requirejs.org/docs/errors.html#mismatch require.js:7
P require.js:7
A require.js:19
(anonymous function) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T12:39:23.777

您应该尝试以这种方式使用 require.js 加载您的规范文件

```
<script 
     data-main="./yourSpec" 
     src="<?php echo $rootRequirejs?>/require.js"
>
</script> 
```

# r - igraph：边没有被剪裁到无向图中的顶点

> ID：10796629
> 
> 赞同：2
> 
> 时间：2012-05-29T09:43:25.367
> 
> 标签：r, igraph

当我更改`vertex.size`in`igraph`时，边缘不会被剪裁到顶点，它们会在顶点旁边结束几个点/像素。例子：

```
library(igraph)
set.seed(13)
g <- barabasi.game(500, directed = F)
plot(g, vertex.size = 2, edge.curved = T, vertex.label = NA, edge.arrow.mode = "-",
layout = layout.fruchterman.reingold) 
```

似乎它不适用于有向图，因为箭头绘制在边缘的末端。

有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T10:39:17.423

我添加了`edge.arrow.size`它似乎可以解决它。

```
library(igraph)
set.seed(13)
g <- barabasi.game(500, directed = F)
plot(g, vertex.size = 2, edge.curved = T, vertex.label = NA, edge.arrow.mode = "-",   
edge.arrow.size=0.01,layout = layout.fruchterman.reingold) 
```

IE

![在此处输入图像描述](../Images/4323b82e3f912f6bcb762201828939b4.png)

# java - 如何将 ListActivities 添加到 android 中的 ViewPager？

> ID：10796637
> 
> 赞同：0
> 
> 时间：2012-05-29T09:44:03.727
> 
> 标签：java, android

我正在使用 ViewPager 准备 Swipe。在我的应用程序中使用 ViewPager 显示 4 个 ListActivity。我知道如何在 ViewPager 中添加视图，但我不知道如何在我的应用程序中添加 ListActivity。请帮我..................

```
 private class MyPagerAdapter extends PagerAdapter {

    private ArrayList<LinearLayout> views;

    public MyPagerAdapter(Context context) {

        views = new ArrayList<LinearLayout>();
        views.add(new ListView1Page(context));
        views.add(new TextViewPage(context));
        views.add(new ListView2Page(context));
        views.add(new ButtonPage(context));

    }

    @Override
    public void destroyItem(View view, int arg1, Object object) {
        ((ViewPager) view).removeView((LinearLayout) object);
    }

    @Override
    public void finishUpdate(View arg0) {

    }

    @Override
    public int getCount() {
        return views.size();
    }

    @Override
    public Object instantiateItem(View view, int position) {
        LinearLayout myView = views.get(position);
        ((ViewPager) view).addView(myView);//addView(myView);
        return myView;

    }

    @Override
    public boolean isViewFromObject(View view, Object object) {
        return view == object;
    }

    @Override
    public void restoreState(Parcelable arg0, ClassLoader arg1) {

    }

    @Override
    public Parcelable saveState() {
        return null;
    }

    @Override
    public void startUpdate(View arg0) {

    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T09:54:22.737

我不确定活动，但您可以改用片段。看看 FragmentPagerAdapter 和 FragmentStatePagerAdapter。

# lotus-notes - Domino Server 是安装在 Unix 还是 Windows 上？

> ID：10796638
> 
> 赞同：1
> 
> 时间：2012-05-29T09:44:06.810
> 
> 标签：lotus-notes, lotus, lotus-domino

有人可以告诉我如何以编程方式确定 Domino 服务器是安装在 Unix 还是 Windows 上。

是否有任何 Domino 服务器 API 可以找出 domino 服务器在哪个操作系统（操作系统相关信息）中运行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T10:03:26.863

您可以为此使用公式[@Platform](http://publib.boulder.ibm.com/infocenter/domhelp/v8r0/index.jsp?topic=/com.ibm.designer.domino.main.doc/H_PLATFORM_FUNCTION.html)函数。

> 在列、选择或计划代理公式中使用时，@Platform 返回数据库所在的当前平台。*如果数据库驻留在服务器上，@Platform 返回服务器平台；*如果数据库驻留在本地，@Platform 返回工作站平台。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T09:46:17.710

如果您打开服务器上的主 Domino 目录 ( names.nsf ) 并查看 server/servers 视图，您将看到所有已设置的 Domino 服务器的列表。每条记录都包含对运行服务器的操作系统的引用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T14:40:16.260

在 LotusScript 或 COM 类中，使用 NotesSession.Platform()。在 Java 中，使用 Session.getPlatform()。请注意，无论哪种情况，您的代码都必须在您正在测试的实际服务器上运行。

# android - 如何将电话号码、电子邮件、网站等添加到现有联系人

> ID：10796640
> 
> 赞同：6
> 
> 时间：2012-05-29T09:44:08.953
> 
> 标签：android

我正在开发一个应用程序，我必须通过单击按钮将电话号码、电子邮件、网站、地址等添加到我现有的联系人中。

点击按钮的功能在这里

```
private void updateContact(String name) 
   {
Log.d(TAG, "in updatecontact()");
Log.d(TAG,"Contact name to be updated = "+name);
ContentResolver cr = getContentResolver();
     String where = ContactsContract.Data.DISPLAY_NAME + " = ? AND " + 
            ContactsContract.Data.MIMETYPE + " = ? AND " +
            String.valueOf(ContactsContract.CommonDataKinds.Phone.TYPE) + " = ? ";
String[] params = new String[] {name,
        ContactsContract.CommonDataKinds.Phone.CONTENT_ITEM_TYPE,
        String.valueOf(ContactsContract.CommonDataKinds.Phone.TYPE_HOME)};

Cursor phoneCur = managedQuery(ContactsContract.Data.CONTENT_URI, null, where, params, null);

ArrayList<ContentProviderOperation> ops = new ArrayList<ContentProviderOperation>();

if ( (phoneCur == null)  ) {
    add_new_contact();
} else {
    // Phone no
    ops.add(ContentProviderOperation.newUpdate(ContactsContract.Data.CONTENT_URI)
            .withSelection(where, params)
            .withValue(ContactsContract.CommonDataKinds.Phone.DATA, Tel)
            .build());
    // Email
    ops.add(ContentProviderOperation.newUpdate(ContactsContract.Data.CONTENT_URI)
            .withSelection(where, params)
            .withValue(ContactsContract.CommonDataKinds.Email.DATA, Email)
            .build());
    // Website
    ops.add(ContentProviderOperation.newUpdate(ContactsContract.Data.CONTENT_URI)
            .withSelection(where, params)
            .withValue(ContactsContract.CommonDataKinds.Website.DATA, Url)
            .build());
    //Organization
    ops.add(ContentProviderOperation.newUpdate(ContactsContract.Data.CONTENT_URI)
            .withSelection(where, params)
            .withValue(ContactsContract.CommonDataKinds.Organization.DATA, Org)
            .build());
}

phoneCur.close();

try {
    cr.applyBatch(ContactsContract.AUTHORITY, ops);
} catch (RemoteException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
} catch (OperationApplicationException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}}} 
```

我无法更新我的联系人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T09:56:41.610

我假设您不知道该怎么做，这是您的问题。

这可能会有所帮助

```
ContentResolver cResolver = context.getContentResolver();
public void AddToContact()
{
    insertContentValues(cResolver, Contacts.Phones.CONTENT_URI, getPhoneCV(phone));
}

public ContentValues getPhoneCV(RowData data) {
        ContentValues cv = new ContentValues();

        String PhoneNumber = "055434553";
        cv.put(Contacts.Phones.NUMBER,PhoneNumber );
        return cv;
    }

private Uri insertContentValues(ContentResolver cResolver, Uri uri, ContentValues cv) {
        if (cv != null) {
          return cResolver.insert(uri, cv);
        }
        return null;
    } 
```

# jquery - 如何检查jquery中复选框组的值从下拉列表中的操作

> ID：10796641
> 
> 赞同：1
> 
> 时间：2012-05-29T09:44:10.410
> 
> 标签：jquery, html

我需要通过将复选框的值与`select`.

例如，如果我选择国家名称，则应自动选中`USA`标记的复选框。`USA`

以下是我尝试过的：

```
<html>
    <head>
        <script type="text/javascript" src="jquery.js"></script>
        <script>
            $(document).ready(function(){
                $(".e_p_country").change(function() {
                    var len = $('input[id="chk_c"]').length;
                    $('input[name="chk_c"]').each(function(len) {                 
                        if ($(this).val()==$(input[id="chk_c"]).val()) {
                            $('input[name="chk_c"]').attr('checked',true);
                        }
                        else {
                            $('input[name="chk_m"]').attr('checked',false);
                        }
                    });
                });
            });
        </script>
    </head>

    <body>
        <p>
            Country:
            <select id="e_p_country" class="e_p_country" name="e_p_country">
                <option value="">Select</option>
                <option value="91">India</option>
                <option value="65">Singapore</option>
                <option value="1">USA</option>
            </select>
        </p>
        <input type="checkbox" class="chk_c" value="1" id="chk_c">USA
        <input type="checkbox" value="65" id="chk_c">Singapore
        <input type="checkbox" value="91" id="chk_c">India
    </body>
</html> 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T09:57:34.150

你可以这样做。[JsFiddle 上的演示](http://jsfiddle.net/mLcWD/2/)

```
$(".e_p_country").change(function(){
 $('input[type=checkbox]').attr('checked', false);
 $("input[type=checkbox][value='"+$(this).val()+"']").attr('checked', true);
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T09:52:51.953

尝试这个：

```
$("#e_p_country").change(function() {
    var country = $(this).val();
    $(".chk_c").prop("checked", false).filter(function() {
        return $(this).val() == country;
    }).prop("checked", true);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T10:15:01.417

`*I want to point out that you cannot add the same id to multiple html elements, you could use the class attribute for that, also i edited your code like this*`

**HTML：**

```
<span>Country:</span>

<select id="e_p_country" class="e_p_country" name="e_p_country">
    <option value="">Select</option>
    <option value="91">India</option>
    <option value="65">Singapore</option>
    <option value="1">USA</option>
</select>

<input type="checkbox" class="chk_c" value="USA" id="chk_c">USA
<input type="checkbox" value="Singapore" id="chk_c">Singapore
<input type="checkbox" value="India" id="chk_c">India 
```

**脚本**

```
$(".e_p_country").change(function(){

    var selected = $(this + ':selected').text();
    $('input[type="checkbox"]').each(function(){ 

        if (selected == $(this).val()){
            $(this).attr('checked',true);
        }
        else{
            $(this).attr('checked',false);
        }
    });
}); 
```

# javascript - HTML + Javascript 项目的配置文件

> ID：10796642
> 
> 赞同：0
> 
> 时间：2012-05-29T09:44:13.780
> 
> 标签：javascript, jquery, html, configuration

我正在创建一个 HTML/CSS + Javascript/Jquery 项目，其中需要维护大量配置。所以，我想知道维护配置文件的最佳方式是什么，可以从中获取所有设置和内容。

我计划将 xml 文件作为配置存储库，但由于浏览器特定的限制和障碍，我对应该使用什么来获得顺利进展感到困惑。

请推荐一些。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T09:51:37.680

配置 JavaScript 应用程序（服务器端和客户端）最常见的方法是使用 JSON。

在服务器端，YAML 可能也值得考虑，因为许多人认为它更具可读性，甚至更容易编写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T10:02:03.587

我正在开发一个 ASP.NET MVC3 项目并且面临同样的情况。

我使用了 JSON。我从 DB 读取配置，在服务器端创建了一个键值对字典，然后通过 Ajax 调用将其发送到客户端（JsonResult 返回类型将您的 DTO 转换为可在客户端使用的 JavaScript 对象）。在那里，我将它放在全局级别的变量中。

现在我的所有函数（需要配置值）都读取该对象以确定它们的执行过程。

# drools - 如何在流口水中仅使用更新的值

> ID：10796643
> 
> 赞同：1
> 
> 时间：2012-05-29T09:44:17.743
> 
> 标签：drools, business-rules, drools-flow

我有一个包含 2 条规则的 drl 文件

第一条规则更新属性，例如根据某些条件将属性 b 更新为 10。

第二条规则检查 b 不等于 10 的值。它记录那些不等于 10 的值的错误。

b 值在规则 1 中更新为 10。但是在第二条规则中，它不使用更新的值并记录错误。

有没有办法在第二条规则中使用更新的 b 值。我尝试使用修改，但仍然记录错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T13:10:11.280

“修改”关键字是正确的。你能发布确切的错误吗？也许这只是一个语法问题。modify 关键字用于通知引擎有关工作内存的更改，例如：

```
rule "First Rule"
dialect "mvel"
when 
  // conditions for the first rule
  $obj : MyObject()
then  
  // modify attribute of the object
  modify($obj){number = 10 };
end 
```

# iphone - 在 Epub 中添加类似动画的书籍

> ID：10796645
> 
> 赞同：1
> 
> 时间：2012-05-29T09:44:22.397
> 
> 标签：iphone, ipad, animation, uiwebview, epub

我是`iPad`开发人员的新手，

我正在阅读`EPUB`内容`UIWebView`

我`UIWebView`在 iPhone 上使用来显示`EPUB`内容，但我想实现类似于 book 的翻页动画。

这是[演示示例。](http://www.techotopia.com/index.php/An_Example_iOS_5_iPhone_UIPageViewController_Application) 和

这是我的代码片段，

[http://www.mediafire.com/?pxb6xxfknxoarz6](http://www.mediafire.com/?pxb6xxfknxoarz6)

***提前致谢 ！***

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T19:29:22.607

1.  目标iOS5。
2.  使用 UIPageViewController。[这是一个例子](http://www.informit.com/articles/article.aspx?p=1760500&seqNum=6)

萨顿女士有开源代码，可以[在这里构建您的页面](https://github.com/erica/iphone-3.0-cookbook-)

[这是另一个人的教程](http://www.ioslearner.com/implementing-uipageviewcontroller-programatically-without-storyboarding/)

一旦翻页动画正常工作，内容可以是任何内容，包括 HTML 页面/链接。

我用 Erica 的样本制作了一本书。大多数页面都是 png，但我使用 html 页面作为目录。该页面有指向书中特定页面的链接。内联 CSS 用于设置页面样式。

请注意，UIPageViewController 仅适用于 iPad。

以下代码是我实现它的方式。请注意，我的版本一次显示一页，而不是两页。

这是我的页面视图控制器代码：

```
/*
 About this class:

 - it assumes western left-to-right usage for the page flips
 - it assumes one page in both landscape and portrait
 - it stores but does not use the current page 
 */

#import "InfoPageController.h"

#define IS_IPHONE   ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone)
#define SAFE_ADD(_Array_, _Object_) {if (_Object_ && [_Array_ isKindOfClass:[NSMutableArray class]]) [pageControllers addObject:_Object_];}
#define SAFE_PERFORM_WITH_ARG(THE_OBJECT, THE_SELECTOR, THE_ARG) (([THE_OBJECT respondsToSelector:THE_SELECTOR]) ? [THE_OBJECT performSelector:THE_SELECTOR withObject:THE_ARG] : nil)

#pragma Utility Class - VC that Rotates
@interface RotatableInfoVC : UIViewController 
@end

@implementation RotatableInfoVC
- (void) loadView 
{
    [super loadView]; 

    self.view.autoresizingMask = UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth;
    self.view.backgroundColor = [UIColor whiteColor];

}

- (BOOL) shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation 
{
    return YES;
}
@end

#pragma Page Controller

@implementation InfoPageController

@synthesize infoPageDelegate, pageNumber;

/*
 #pragma mark Debug / Utility
 - (int) currentPage
 {
 NSLog(@"%s", __FUNCTION__);
 int pageCheck = ((UIViewController *)[self.viewControllers objectAtIndex:0]).view.tag;
 NSLog(@"pageCheck is %i", pageCheck);
 return pageCheck;
 }
 */

#pragma mark Page Handling

// Update if you'd rather use some other decision style
- (BOOL) useSideBySide: (UIInterfaceOrientation) orientation
{
    return NO; 
}

// Store the new page and update the delegate
- (void) updatePageTo: (uint) newPageNumber
{
    //NSLog(@"%s", __FUNCTION__);
    pageNumber = newPageNumber;

    [[NSUserDefaults standardUserDefaults] setInteger:pageNumber forKey:DEFAULTS_INFOPAGE];
    [[NSUserDefaults standardUserDefaults] synchronize];

    SAFE_PERFORM_WITH_ARG(infoPageDelegate, @selector(infoPageControllerDidTurnToPage:), [NSNumber numberWithInt:pageNumber]);
}

// Request controller from delegate
- (UIViewController *) controllerAtPage: (int) aPageNumber
{
    //NSLog(@"%s", __FUNCTION__);
    if (infoPageDelegate && 
        [infoPageDelegate respondsToSelector:@selector(viewControllerForPage:)])
    {
        UIViewController *controller = [infoPageDelegate viewControllerForPage:aPageNumber];
        controller.view.tag = aPageNumber;
        return controller;
    }
    return nil;
}

// Update interface to the given page
- (void) fetchControllersForPage: (uint) requestedPage orientation: (UIInterfaceOrientation) orientation
{
    //NSLog(@"%s", __FUNCTION__);

    int numberOfPagesNeeded = 1; 
    int currentCount = self.viewControllers.count;

    uint leftPage = requestedPage;

    // Only check against current page when count is appropriate
    if (currentCount && (currentCount == numberOfPagesNeeded))
    {
        if (pageNumber == requestedPage) return;
        if (pageNumber == leftPage) return;
    }

    // Decide the prevailing direction by checking the new page against the old
    UIPageViewControllerNavigationDirection direction = (requestedPage > pageNumber) ? UIPageViewControllerNavigationDirectionForward : UIPageViewControllerNavigationDirectionReverse;
    [self updatePageTo:requestedPage];

    // Update the controllers
    NSMutableArray *pageControllers = [NSMutableArray array];
    SAFE_ADD(pageControllers, [self controllerAtPage:leftPage]);    
    //SAFE_ADD(pageControllers, [self controllerAtPage:leftPage + 1]);

    [self setViewControllers:pageControllers direction: direction animated:YES completion:nil];
}

// Entry point for external move request
- (void) moveToPage: (uint) requestedPage
{
    //NSLog(@"%s", __FUNCTION__);
    [self fetchControllersForPage:requestedPage orientation:(UIInterfaceOrientation)[UIDevice currentDevice].orientation];
}

#pragma mark Data Source

- (UIViewController *)pageViewController:(UIPageViewController *)pageViewController viewControllerAfterViewController:(UIViewController *)viewController
{
    //NSLog(@"%s", __FUNCTION__);
    [self updatePageTo:pageNumber + 1];
    return [self controllerAtPage:(viewController.view.tag + 1)];
}

- (UIViewController *)pageViewController:(UIPageViewController *)pageViewController viewControllerBeforeViewController:(UIViewController *)viewController
{
    //NSLog(@"%s", __FUNCTION__);
    [self updatePageTo:pageNumber - 1];
    return [self controllerAtPage:(viewController.view.tag - 1)];
}

#pragma mark Delegate

- (UIPageViewControllerSpineLocation)pageViewController:(UIPageViewController *)pageViewController spineLocationForInterfaceOrientation:(UIInterfaceOrientation)orientation
{
    //NSLog(@"%s", __FUNCTION__);
    return UIPageViewControllerSpineLocationMin;
}

#pragma mark Class utility routines
// Return a UIViewController that knows how to rotate
+ (id) rotatableInfoViewController
{
    //NSLog(@"%s", __FUNCTION__);
    UIViewController *vc = [[RotatableInfoVC alloc] init];
    return vc;

}

// Return a new book
+ (id) infoPageWithDelegate: (id) theDelegate
{
    //NSLog(@"%s", __FUNCTION__);
    InfoPageController *infoPage = [[InfoPageController alloc] initWithTransitionStyle:UIPageViewControllerTransitionStylePageCurl navigationOrientation:UIPageViewControllerNavigationOrientationHorizontal options:nil];

    infoPage.dataSource = infoPage;
    infoPage.delegate = infoPage;
    infoPage.infoPageDelegate = theDelegate;

    return infoPage;
} 
```

这是我用来将页面提供给页面视图控制器类的代码：

```
@implementation InfoViewController

@synthesize delegate;
@synthesize infoViewController;

- (void) viewDidLoad
{
    //NSLog(@"%s", __FUNCTION__);
    // Add the child controller, and set it to the first page
    [self.view addSubview:infoPageController.view];
    [self addChildViewController:infoPageController];

    [infoPageController didMoveToParentViewController:self];
    [infoPageController moveToPage:0];
}

- (void) loadView
{
    [super loadView];
    //NSLog(@"%s", __FUNCTION__);
    // Build the view
    CGRect appRect = [[UIScreen mainScreen] bounds];
    self.view = [[UIView alloc] initWithFrame: appRect];
    self.view.backgroundColor = [UIColor whiteColor];
    self.view.autoresizingMask = UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth;

    self.navigationItem.rightBarButtonItem = nil;

    UIBarButtonItem *doneButton = [[UIBarButtonItem alloc] initWithTitle:NSLocalizedString(@"DONE", @"") style:UIBarButtonItemStyleBordered  
                                              target:self 
                                              action:@selector(dismiss:)];
    self.navigationItem.rightBarButtonItem = doneButton;

    UIBarButtonItem *tocButton = [[UIBarButtonItem alloc] initWithTitle:NSLocalizedString(@"TOC", @"") style:UIBarButtonItemStyleBordered 
                                             target:self action:@selector(tocButtonTapped:)];

    self.navigationItem.leftBarButtonItem = tocButton;

    self.navigationController.navigationBar.tintColor = [UIColor blackColor];
    self.title = NSLocalizedString(@"Information", @"");

    // Establish the page view controller
    infoPageController = [InfoPageController infoPageWithDelegate:self];
    infoPageController.view.frame = (CGRect){.size = appRect.size};

}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return YES;
}

// THIS IS WHERE THE PAGES ARE CREATED / LOADED.

- (id) viewControllerForPage: (int) pageNumber
{    
    // CHANGE THIS TO PAGE NUMBER - DEPENDING ON HOW MANY PAGES YOU HAVE.
    //NSLog(@"%s", __FUNCTION__);
    AppDelegate *mainDelegate = (AppDelegate *) [[UIApplication sharedApplication] delegate];

    if (pageNumber < 0) return nil;

    if (pageNumber > [mainDelegate.infoPageData count]) {
        pageNumber = 1;
    }

    //NSLog(@"viewControllerForPage - selectedPage is: %i", pageNumber);

    // Establish a new controller
    UIViewController *controller = [InfoPageController rotatableInfoViewController];

    // Add an image

    if (pageNumber == 2) { //TOC

        UIWebView *webView = [[UIWebView alloc] initWithFrame:CGRectMake(0, 0, 320, 460)];
        [webView loadRequest:[NSURLRequest requestWithURL:[NSURL fileURLWithPath:[[NSBundle mainBundle] 
                                                          pathForResource:@"infotoc" ofType:@"html"]isDirectory:NO]]];
        //webView.backgroundColor = [UIColor clearColor];
        webView.frame = CGRectMake(0,0,550,800);

        webView.delegate = self;
        [controller.view addSubview:webView];

    } else {

        NSString *imageName = [NSString stringWithFormat:@"dreamcatchingInstructions.%i.png", pageNumber +1];
        //NSLog(@"imageName is: %@", imageName);    
        UIImage *image = [UIImage imageNamed: imageName]; 
        CGRect viewFrame = self.view.frame;
        //viewFrame.origin.y = 50;
        viewFrame.size.width = 540;
        viewFrame.size.height = 600;

        UIImageView *imageView = [[UIImageView alloc] initWithFrame:viewFrame];
        imageView.image = image;

        [controller.view addSubview:imageView];
    }

    return controller;
}

- (void)doneButtonTapped {    
    [delegate doneButtonTapped];
}

- (IBAction)dismiss:(id)sender {
    //NSLog(@"%s", __FUNCTION__);
    [self dismissModalViewControllerAnimated:YES];
}

-(void)tocButton {
    //NSLog(@"%s", __FUNCTION__);
    [delegate tocButton];

}

- (IBAction)tocButtonTapped:(id)sender {    
    //NSLog(@"%s", __FUNCTION__);
    [infoPageController moveToPage:2];

}

- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{
    //NSLog(@"%s", __FUNCTION__);
    NSString *absoluteUrl = [[request URL] absoluteString];
    //NSLog(@"absoluteUrl is %@", absoluteUrl);

    if ([absoluteUrl isEqualToString:@"didtap://button1"]) {
        //NSLog(@"Button1");
        [self didTapButton1];
        return NO;
    }
    if ([absoluteUrl isEqualToString:@"didtap://button2"]) {
        //NSLog(@"Button2");
        [self didTapButton2];
        return NO;
    }
    if ([absoluteUrl isEqualToString:@"didtap://button3"]) {
        //NSLog(@"Button3");
        [self didTapButton3];
        return NO;
    }
    if ([absoluteUrl isEqualToString:@"didtap://button4"]) {
        //NSLog(@"Button4");
        [self didTapButton4];
        return NO;
    }
    if ([absoluteUrl isEqualToString:@"didtap://button5"]) {
        //NSLog(@"Button5");
        [self didTapButton5];
        return NO;
    }
    if ([absoluteUrl isEqualToString:@"didtap://button6"]) {
        //NSLog(@"Button6");
        [self didTapButton6];
        return NO;
    }
    if ([absoluteUrl isEqualToString:@"didtap://button7"]) {
        //NSLog(@"Button7");
        [self didTapButton7];
        return NO;
    }
    if ([absoluteUrl isEqualToString:@"didtap://button8"]) {
        //NSLog(@"Button8");
        [self didTapButton8];
        return NO;
    }
    if ([absoluteUrl isEqualToString:@"didtap://button9"]) {
        //NSLog(@"Button9");
        [self didTapButton9];
        return NO;
    }

    //NSLog(@"No");
    return YES;
}

-(void)didTapButton1 {
    //NSLog(@"%s", __FUNCTION__);
    [infoPageController moveToPage:3];
}
-(void)didTapButton2 {
    //NSLog(@"%s", __FUNCTION__);
    [infoPageController moveToPage:11];
}
-(void)didTapButton3 {
    //NSLog(@"%s", __FUNCTION__);
    [infoPageController moveToPage:15];
}

-(void)didTapButton4 {
    //NSLog(@"%s", __FUNCTION__);
    [infoPageController moveToPage:29];
}
-(void)didTapButton5 {
    //NSLog(@"%s", __FUNCTION__);
    [infoPageController moveToPage:43];
}
-(void)didTapButton6 {
    //NSLog(@"%s", __FUNCTION__);
    [infoPageController moveToPage:50];
}

-(void)didTapButton7 {
    //NSLog(@"%s", __FUNCTION__);
    [infoPageController moveToPage:56];
}
-(void)didTapButton8 {
    //NSLog(@"%s", __FUNCTION__);
    [infoPageController moveToPage:60];
}
-(void)didTapButton9 {
    //NSLog(@"%s", __FUNCTION__);
    [infoPageController moveToPage:67];
} 
```

最后，我的目录页面（网络写作）是这样的：

```
<html>
    <head>
        <title>DreamCatching</title> 

        <style type="text/css">

            body  {
                /*width: 700px;*/
                position: relative;

                background: url('DreamCatchingWhite3.png') no-repeat;
                opacity:0.6;
                font: 30px "Copperplate",sans-serif;
                font-weight: 100; 
                /*margin: 0;*/
                font-style: normal;
            }

            img {
                opacity:0.3;
            }

            h1 {
                height: 70px;
                font: 36px "Gill Sans",sans-serif;
                font-weight: 200;
                text-align: center;
            }

            h2 {
                font: 28px "Gill Sans",sans-serif;
                font-weight: 200;
                text-align: center;
            }

            #header1 {
                position: relative;
                margin-top: 40;
                text-align:center;
                width: 100%;
                font: 36px "Copperplate",sans-serif;
                font-weight: 200; 
                 text-transform: small-caps; 
                /*border-bottom: 3px double #600;*/ 
                height: 100px;
            }

            #body1 {
                position: relative;
                /*width: 80%;*/
                font: 26px "Copperplate",sans-serif;
                font-weight: 200; 
                background-image:DreamCatchingWhite2.png;
                /*border-bottom: 3px double #600;*/ 
                height: 300px;
            }

            p {
                text-align: center;
            }

            td, th { 
                /*border: 1px solid #eee;*/
                font: 20px "Copperplate",sans-serif;
                margin-bottom:40;
                font-weight: 200; 
            }

            tr {
                position:relative;
                border:10;
                margin-bottom:40;
                height:70;
                text-align: center;
                text-transform: small-caps; 
            }

            table {
                width:100%;
                margin-bottom:40;
                border-collapse:collapse;
                font: 20px "Copperplate",sans-serif;
                font-weight: 200;
                text-transform: small-caps;
            }

            a { 
                color: black;
                text-decoration: none; 
                text-align: center; 
                text-transform: small-caps; 

            }

            </style>

    </head>
    <body>

        <div id="header1">

            <h1>TABLE OF CONTENTS</h1>
        </div>

        <div id="body1">
            <table border="0" cellspacing="6">

                <tr>
                    <td><a href="didtap://button1">Getting Started</a></td>
                    <td><a href="didtap://button2">Voice Recording</a></td>
                    <td><a href="didtap://button3">Adding Details</a></td>
                </tr> 

                <tr>

                    <td><a href="didtap://button4">Styles</a></td>
                    <td><a href="didtap://button5">Exploration</a></td>
                    <td><a href="didtap://button6">Deleting and Saving</a></td>
                </tr> 

                <tr>
                    <td><a href="didtap://button7">Email and Sharing</a></td>
                    <td><a href="didtap://button8">Drawing</a></td>
                    <td><a href="didtap://button9">Summary</a></td>
                </tr>
            </table>            

        </div> 

    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T04:10:13.387

由于您使用的是 UIWebView，因此您需要使用 JavaScript 和/或 CSS 来完成翻页动画。

有几条路线你可以去这里。

查看[turn.js](http://www.turnjs.com/)和[jquery 移动页面转换](http://jquerymobile.com/test/docs/pages/page-transitions.html)。这些解决方案之一应该适合您。

这是 turn.js 的示例代码：

```
#magazine{
    width:800px;
    height:400px;
}
#magazine .turn-page{
    width:400px;
    height:400px;
    background-color:#ccc;
}
<div id='magazine'>
    <div> Page 1 </div>
    <div> Page 2 </div>
    <div> Page 3 </div>
</div>
$('#magazine').turn(); 
```

# android - android，从异步任务中运行的方法类创建/更新视图

> ID：10796646
> 
> 赞同：0
> 
> 时间：2012-05-29T09:44:35.017
> 
> 标签：android, android-layout

好吧，我在使用 android 时遇到了一些问题。也许它很简单，但我在 android 世界中很新（实际上是 3、4 天）。好吧，我有一个活动，它运行一个异步任务，可以从传感器网络读取数据。异步任务仅执行函数 l.read()，它本身就是一个循环，并始终“监听”传感器网络，当一个新节点加入传感器网络时，它告诉 UI 线程又有一个节点加入，所以它必须更新视图（女巫只有一个选项卡说不存在节点，现在必须有一个节点可用 - 除此之外，我什至必须为此选项卡加载一个 xml 布局文件）问题是，当我执行预先创建视图并添加选项卡的功能（这是正常工作，因为当我在 onCreate 上调用它时它工作）应用程序不再响应，但是，Logcat 没有给我任何错误。它看起来像它的作品，但它没有显示任何东西。

拜托，我不希望你阅读所有这些代码，它只是为了解释我的问题。已经2天了，我仍在寻求解决方案..

主要活动：

```
public class PrincipalActivity extends Activity implements OnClickListener
{

private Button Send;
private Button Options;
private TextView ERROR;
private Bundle extras;
private String IP;
private String PORT;
private TabHost tabs;
private ligação l;
View m_vForm;
TabHost tabHost;
CustomView Cview;
ReadsData read;

//constructor
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    CustomView vv = new CustomView(PrincipalActivity.this,0);
    setContentView(vv);

    //instanciating the objects
    IP = new String();
    PORT = new String();      
    extras = getIntent().getExtras();
    IP = extras.getString("IP");  //get the IP and port from the previous activity
    PORT = extras.getString("PORT");
    ERROR = (TextView) findViewById(R.id.ERROR);   
    tabs = (TabHost) findViewById(R.id.tabhost);
    tabs.setup();
    Send = (Button) findViewById(R.id.SendCommand);
    Send.setOnClickListener(this);
    Options = (Button) findViewById(R.id.Options);
    Options.setOnClickListener(this);
  //=========================

    CreateAView("No Nodes",false);
    l = new ligação(IP, Integer.parseInt(PORT),this);  //CLASS LIGAÇÃO
   // RunnableThread rT1 = new RunnableThread("t1",l,this);

    read = new ReadsData();
    read.execute();

    //Textviews (Values)

}

public void AddUpdateNodes(Nodes n,int func)
{
    //func is 0 if it it to add a node or 1 if it is to update an existing one
    if(func == 0)
    {
        String s = new String();
        s+= n.GETSourceNodeID();
        CreateAView(s, true);
        Cview.addNewNode(n);        
    }
    if(func == 1)
        Cview.UpdateNodeInformation(n);
}

public void onClick(View v) 
{

    if(v == Send)
    {
        // if i call CreateAView here it works ok
        ERROR.setText(IP);

    }

    if(v == Options)
    {

        ERROR.setText(PORT);
    }
}

    // CREATING A VIEW WITH THE TABS
public void CreateAView(String s,boolean nodesAvailable)
{

     m_vForm = createTABForm(s,nodesAvailable);
     setContentView(m_vForm);
}

 private ViewGroup createTABForm(String s,boolean nodesAvailable1)
 {
    final boolean nodesAvailable = nodesAvailable1;

        // construct the TAB Host
        tabHost = new TabHost(this);
        tabHost.setLayoutParams(  new LinearLayout.LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT)  );

        // the tabhost needs a tabwidget, that is a container for the visible tabs
        TabWidget tabWidget = new TabWidget(this);
        tabWidget.setId(android.R.id.tabs);
        tabWidget.setBackgroundColor(Color.BLUE);

        tabHost.addView(tabWidget, new LinearLayout.LayoutParams(      LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT)   ); 

        // the tabhost needs a frame layout for the views associated with each visible tab
        FrameLayout frameLayout = new FrameLayout(this);
        frameLayout.setId(android.R.id.tabcontent);
        frameLayout.setPadding(0, 65, 0, 0);
        tabHost.addView(frameLayout, new LinearLayout.LayoutParams(   LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT)   ); 

        // setup must be called if you are not initialising the tabhost from XML
        tabHost.setup(); 

        // create the tabs
        TabSpec ts = tabHost.newTabSpec("TAB_TAG_2");
        ts.setIndicator(s); // creating a tabb with the specified name
        ts.setContent(new TabHost.TabContentFactory(){
             public View createTabContent(String tag)
             {
                 // -- this tab contains a single control - the listview -- //
                 Cview = new CustomView(PrincipalActivity.this,nodesAvailable);
                 return Cview;   // IS AN OBJECT FROM THE CLASS CustomView
             }
        });

        tabHost.addTab(ts); 
        return tabHost;
    } 

 ////////////////////////////////////////////////////////////////
 //Async Tasks
 private class ReadsData extends AsyncTask 
 {

    @Override
    protected Object doInBackground(Object... params) 
    {
        l.read();
        return null;
    }

    protected void onPostExecute()
     {
        l.SocketClosed_();
     }
 }

} 
```

* * *

```
 //CLASS CUSTOM VIEW

 public CustomView(Context context,boolean NodesAvailable)
 {
   super(context);

   if(NodesAvailable) //loads a layout
   {
       LayoutInflater layoutInflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

       View view=layoutInflater.inflate(R.layout.finallayout,this);

       //only after inflate
        ADC0 = (TextView) findViewById(R.id.ADC00);

   }
   else  // loads another layout
   {
       LayoutInflater layoutInflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
       View view=layoutInflater.inflate(R.layout.no_nodes,this);
   }

 }

 public void addNewNode(Nodes n)
 {
     String s = new String();

     s = new String();
     s += n.GETSensores(0).GETvalor();
     ADC0.setText(s);

 }

 public void UpdateNodeInformation(Nodes n)
 {
     String s = new String();
     s += n.GETSourceNodeID();

     //if(s.equals())

 }

} 
```

* * *

```
 //SOME CODE OF LIGAÇÃO CLASS
  public class ligação 
  {
      protected PrincipalActivity cont;
    //Constructors
    public ligação(String ss,int Port,PrincipalActivity c){ s=ss; p=Port;cont = c; }

       public void read() 
   {
           while(flag)
           {
              ...
              cont.AddUpdateNodes(node, 0);
              ...
           } 
```

提前谢谢了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T12:09:45.913

奇怪的是您的应用程序没有崩溃，因为所有 UI 操作都应该在 UI 线程上完成。也许是因为 asynctask 的线程已经崩溃，但 ui 线程没有崩溃，这就是为什么没有发生任何事情的原因。无论如何，为了在 asyncTask 中创建/更新视图，您可以使用以下任何一种方法，它会尽快将某些内容发布到 UI 线程：

1.  使用处理程序。
2.  使用[发布进度](http://developer.android.com/reference/android/os/AsyncTask.html#publishProgress%28Progress...%29)。
3.  使用[runOnUiThread](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29)。

# jquery - 在工具提示中显示图像

> ID：10796647
> 
> 赞同：1
> 
> 时间：2012-05-29T09:44:37.850
> 
> 标签：jquery, html, tooltip

我正在使用[醉酒插件](http://onehackoranother.com/projects/jquery/tipsy/)

* * *

![在此处输入图像描述](../Images/b3288823ced94278abac8e98b366e280.png)

* * *

如果有人悬停他的链接，我想显示**用户的图像。现在链接有一个****id**，图像通过该 id 存储在服务器中。因此，例如，如果**id**为**4**，则图像将为**4.jpg，**所以我使用此代码将工具提示显示为：

```
$('.tipsy').tipsy({
        html: true,
        gravity : 'e',
        title: function() {
            var i=0;
            alert(++i + "   first");
            var imgPath='<img height="50" width="50" src="dp/' + $(this).attr('id') + '.jpg" />';
            try{
                imgPath=$(imgPath).error(function() {
                    alert(++i + "  middle");
                    //imgPath='<img height="50" width="50" src="dp/no-image.jpg" />';
                });
            }catch(err){
                alert('inside catch');
            }
            alert(++i + "   last");
            return imgPath; 
        }
    }); 
```

但是**imgPath**永远不会出现**<img height="50" width="50" src="dp/no-image.jpg" />**但从技术上讲，如果存在**错误**但每次都显示它会采用**noimage.jpg**的值我用 src 作为**<id>.jpg的 img**

 ****还有一件事我注意到了......没有错误时的顺序是：

1.  警报（++i +“第一”）；
2.  警报（++i +“最后”）；

    并且出现错误时的顺序是：

    1.  警报（++i +“第一”）；
    2.  警报（++i +“最后”）；
    3.  警报（++i +“中间”）；

这是错误的，因为**中间**警报介于**第一个**和**最后一个之间**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T10:11:25.620

我真的不知道为什么没有捕获异常。但是对于工具提示上的任何动态内容，您可以尝试这些插件：

[http://craigsworks.com/projects/simpletip/](http://craigsworks.com/projects/simpletip/)

[http://jquery.bassistance.de/tooltip/demo/](http://jquery.bassistance.de/tooltip/demo/)

希望它有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T10:29:12.177

由于某种原因，您的错误函数似乎被异步调用。我不确定为什么会这样，可能它可能在 jquery 文档中，但你可以做的是使用 ajax() 函数强制同步检查

```
alert("first");
var imgPath; //not setting imgPath here
        try{ 
            //using ajax() instead of earlier code
            $.ajax({
                url: 'dp/' + $(this).attr('id') + '.jpg', //might need to give absolute path instead of relative one
                type: 'get',
                async:false, //making sync call to ensure this code is executed
                error: function(XMLHttpRequest, textStatus, errorThrown){
                    imgPath='no-image.jpg'; //if image doesnt exists then set no-image
                    alert("middle-error");
                },
                success: function(data){
                    imgPath='dp/' + $(this).attr('id') + '.jpg'; //succes -set required                    
                    alert("middle-success");
                }
            });
        }catch(err){ 
            alert('inside catch'); 
        } 
alert(" last"); 
```

我们在这里所做的是检查图像（例如 dp/4.jpg）是否存在于服务器上。`sync`这次我们也通过设置来强制调用`async:false`****

# c# - c# ActiproSyntaxEditor 的解析器

> ID：10796648
> 
> 赞同：0
> 
> 时间：2012-05-29T09:44:39.020
> 
> 标签：c#, parsing

是否有任何免费软件 c# 解析器可以用作 ActiproSyntaxEditor 控件中的解析器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T10:05:15.770

如果您正在寻找 C# 解析器，您的首选应该是 Mono，因为它始终会更新以与 Microsoft 的 C# 编译器保持同步，

[http://tirania.org/blog/archive/2010/Apr-27.html](http://tirania.org/blog/archive/2010/Apr-27.html)

但是，您似乎要求一个可以与 SyntaxEditor 一起使用的工具。这很奇怪，因为这个控件已经有 C# 支持，

> 语法语言
> 
> 语法语言是文本/解析框架的核心部分。它们基本上封装了在 SyntaxEditor 控件中使用的特定代码语言的所有功能。这包括从各种类型的解析到更简单的功能，如确定分词或执行行注释。
> 
> **SyntaxEditor 包含超过 20 个完整的源示例语言定义，适用于汇编、批处理文件、C、C++、C#、** CSS、HTML、INI 文件、Java、JScript、Lua、MSIL、Pascal、Perl、PHP、PowerShell、Python等常用语言、RTF、SQL、VB.NET、VBScript 和 XML。可以轻松创建自定义语言定义，从而可以为任​​何专有语言构建代码编辑器。

[http://www.actiprosoftware.com/products/controls/windowsforms/syntaxeditor/editing](http://www.actiprosoftware.com/products/controls/windowsforms/syntaxeditor/editing)

# c# - 为什么接口实现不能返回更具体的类型？

> ID：10796650
> 
> 赞同：34
> 
> 时间：2012-05-29T09:44:40.640
> 
> 标签：c#, interface, language-design, overloading

如果一个接口指定了一个属性或方法来返回另一个接口，为什么不允许第一个接口的实现将返回类型“更改”为更具体的类型？

我们举个例子来说明：

```
interface IFoo
{
    IBar GetBar();
}
interface IBar
{ }

class Foo : IFoo
{
    // This is illegal, we are not implementing IFoo properly
    public Bar GetBar()
    {
        return new Bar();
    }
}

class Bar : IBar
{ } 
```

*我知道*如何让它发挥作用，这*不是*我关心的。

我可以：

*   将返回类型更改`GetFoo()`为`IBar`, 或
*   显式实现接口并`GetBar`从`IFoo.GetBar()`方法中调用

我真正要问的是不仅仅是允许上面的代码编译的原因。是否存在上述不履行规定的合同的情况`IFoo`。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-29T09:47:31.127

通常，我会说这将是平衡好处与支持此类功能所增加的复杂性的情况。（所有功能都需要努力设计、记录、实现、测试，然后开发人员也需要接受有关它们的教育。）请注意，如果您想支持返回实现接口的值类型，可能会有一些显着的复杂性，例如（因为这最终会以不同的表示形式出现，而不仅仅是参考）。

在这种情况下，我不*相信*CLR 甚至不支持这样的功能，这将使 C# 很难干净地做到这一点。

我同意这将是一个有用的功能，但我怀疑它没有被认为足够有用，不足以保证所需的额外工作。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-09-11T23:49:21.323

您要询问的功能称为*“返回类型协方差”*。正如[Wikipedia 上](https://en.wikipedia.org/wiki/Covariance_and_contravariance_(computer_science)#Covariant_method_return_type)所指出的，Java 和 C++ 都有它，这也许让 C# 没有它令人惊讶。

Eric Lippert 在对此答案的评论中确认，此功能未实施，因为它被认为不值得实施工作。（此答案的先前修订版将这一决定的责任分配给了埃里克个人；他说这是不正确的，如果有人对此负责，那就是安德斯·海尔斯伯格。）

无论如何，现在有各种建议将其添加到语言中（参见[https://github.com/dotnet/roslyn/issues/357](https://github.com/dotnet/roslyn/issues/357)，[https://github.com/dotnet/cshaplang/blob/master/proposals/covariant -returns.md](https://github.com/dotnet/csharplang/blob/master/proposals/covariant-returns.md)，[https://github.com/kingces95/coreclr/issues/2](https://github.com/kingces95/coreclr/issues/2)），所以它可能会在未来几年内实施。根据这些讨论，这听起来似乎没有任何深刻的理由说明 C#*中不应存在该功能原则上*- 相反，到目前为止，它从未被认为值得任何人努力实现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-08-17T11:28:25.147

它没有被实现，因为他们觉得这个功能不能证明付出的努力。但也有好消息。

此功能已由[Mads Torgersen 在 2020 年 3 月的一篇文章](https://devblogs.microsoft.com/dotnet/welcome-to-c-9-0/)中宣布，用于即将推出的 C# 9.0

> ```
> abstract class Animal
> {
>     public abstract Food GetFood();
>     ...
> }
> class Tiger : Animal
> {
>     public override Meat GetFood() => ...;
> } 
> ```

# ruby-on-rails - 活动资 源编码问题

> ID：10796653
> 
> 赞同：0
> 
> 时间：2012-05-29T09:44:49.757
> 
> 标签：ruby-on-rails, activeresource

我有一个服务，它返回 '6"_x_5"' 作为其 json 响应的一部分，但活动资源将其解释为 '6���_x_4���'。当我对同一个 url 卷曲时，响应看起来很好，知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T10:00:23.257

这是一个编码问题。应用程序设置使用什么编码？您可能需要对值进行编码或对其进行转义。

例如

```
'6\"_x_5\"' 
```

# c++ - C++ 运算符重载与朋友

> ID：10796656
> 
> 赞同：0
> 
> 时间：2012-05-29T09:45:11.317
> 
> 标签：c++, operator-overloading

我正在尝试使用 C++ 的参数重载来实现这一点：

```
Complex c(3.0, 4.0);
double magnitude = | c; // magnitude will be 5 
```

我写了以下代码：（这里只有必要的部分..）

```
class Complex
{
   public:
       double _real;
       double _imaginary;

       friend double operator|(const Complex &c1)
       {
           return sqrt(c1._real * c1._real + c1._imaginary * c1._imaginary);
       }
} 
```

但我收到以下错误：

```
error C2805: binary 'operator |' has too few parameters 
```

`operator |`仅使用 1 个参数是不可能的吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-29T09:48:01.993

```
friend double operator|(const Complex &c1)
{
    return sqrt(c1._real * c1._real + c1._imaginary * c1._imaginary);
} 
```

这没有定义成员运算符，仅供参考。

```
double magnitude = | c; 
```

这是无效的语法，`|`是二元运算符。

### 正确方法：

```
class Complex
{
   public:
       double _real;
       double _imaginary;

       double getMagnitude() const // POP POP!
       {
           return sqrt(_real * _real + _imaginary * _imaginary);
       }
} 
```

没有更多的奖金。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-29T09:47:54.107

> **`|`只有1个参数就不可能使用运算符吗？**

只要所涉及的类型中至少有一种是用户定义的类型，您就可以重载运算符，*但是您不能改变它们可以采用多少参数的行为*。
由于错误消息告诉您`|`是二元运算符，您不能重载它以充当一元运算符。

> **这样做的正确方法是什么？**

您应该为您的类提供一个实用函数`Complex`，并正确命名它，它会以最好的方式为您完成这项工作。

请注意，运算符重载的最基本规则是：
*[“当运算符的含义不是很清楚且无可争议时，它不应该被重载。相反，提供一个具有良好名称的函数。”](https://stackoverflow.com/questions/4421706/operator-overloading/4421708#4421708)*
该规则适用于像这样的非直观运算符用法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T09:49:40.210

运营商| 是二元运算符。作为二元运算符，它需要 2 个参数。如果你想在这里做你想做的事情，你必须使用一元运算符。

无论如何-这看起来是个坏主意，因为从操作员的角度来看它的作用并不明显。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T09:52:37.577

不 - '|' 运算符是二元运算符，这意味着它需要两个参数。您可以重载运算符，但不能更改它们的“arity”。不过，一些运算符可用于多个参数。

一元运算符包括：

*   +
*   -
*   ++（前后版本）
*   --（前版和后版）
*   ！
*   ~
*   *
*   &
*   (cast) (但你必须定义一个合适的铸造类型来得到你的双重结果)

从软件工程的角度来看，最好的解决方案可能是获得模数的显式方法 - 例如 getModulus()。但是你可以合理地争辩说双重演员是可以的。

对于后一种情况，您将拥有：

```
class Complex
{
   public:
       double _real;
       double _imaginary;

       operator double() const
       {
           return sqrt(this._real * this._real + this._imaginary * this._imaginary);
       }
} 
```

并按如下方式使用它：

```
Complex c(3.0, 4.0);
double magnitude = c; // magnitude will be 5 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-29T09:51:46.097

> 那是不可能使用运算符 | 只有1个参数？

是的。运营商| 是二元运算符。这意味着它需要两个参数。您正在寻找的是 operator|=

```
struct wtf
{
    double operator|= (double omg)
    {  
        return 42.;
    }
};

int main(){ wtf omg; omg|=  42.; } 
```

# ios - IOS - 触摸 UIPickerView 时关闭键盘

> ID：10796657
> 
> 赞同：2
> 
> 时间：2012-05-29T09:45:12.090
> 
> 标签：ios, keyboard, hide, uipickerview

我正在构建一个转换器应用程序。在主屏幕中，我有一个输入数字的文本字段，在文本字段下方有一个选择器视图，允许用户选择转换参数（例如 kg 到 g）。

当用户单击背景时，我可以使用以下方法隐藏键盘

```
 (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
 [self.enterInput resignFirstResponder]; 
```

但是当我触摸选择器视图时，键盘并没有隐藏。

我的问题是当用户触摸选择器视图时如何关闭键盘。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T10:26:13.500

**有解决办法**

1）首先创建一个隐藏的roundRect按钮并将类型更改为自定义（适合选择器的大小）。

2）创建一个内部动作的修饰

```
 - (IBAction)hiddenButtonToHideKeyboard:(id)sender {
    [self.enterInput resignFirstResponder];
} 
```

3）创建键盘出现通知

```
[[NSNotificationCenter defaultCenter]addObserver:self selector:@selector(onKeyboardAppear:) name:UIKeyboardWillShowNotification object:nil]; 
```

4）创建键盘消失通知

```
 [[NSNotificationCenter defaultCenter]addObserver:self selector:@selector(onKeyboardHide:) name:UIKeyboardWillHideNotification object:nil]; 
```

5）当键盘出现时使按钮可见

```
 -(void)onKeyboardAppear:(NSNotification *)notification
{
    hiddenButtonToHideKeyboard.hidden=NO;
} 
```

6) 键盘消失时隐藏按钮

```
-(void)onKeyboardHide:(NSNotification *)notification
{
    hiddenButtonToHideKeyboard.hidden=YES;
} 
```

5) 完成

*我不认为这是一个完美的解决方案，但它对我有用:)*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-26T19:56:38.757

我在我的代码中使用它。我爬上响应者链并重新分配响应者。我把它放在显示pickerView的方法中。到目前为止没有意外的问题。如果键盘正在显示，似乎可以工作，如果没有键盘显示，似乎不会崩溃。

```
 [[UIApplication sharedApplication] sendAction:@selector(resignFirstResponder) to:nil from:nil forEvent:nil]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T07:54:37.723

干得好。UIPickerViews 是一个相当复杂的嵌套 UIViews 系统，这就是为什么您没有从该`touchesBegan:withEvent:`方法获得任何响应的原因。你可以做的是创建你的 UIPickerView 子类，如下所示：

```
//
//  MyPickerView.h
//

#import <UIKit/UIKit.h>

// Protocol Definition that extends UIPickerViewDelegate and adds a method to indicate a touch
@protocol MyPickerViewDelegate <UIPickerViewDelegate>

// This is the method we'll call when we've received a touch. Our view controller should implement it and hide the keyboard
- (void)pickerViewDidReceiveTouch:(UIPickerView *)pickerView;

@end

@interface MyPickerView : UIPickerView

// We're redefining delegate to require conformity to the MyPickerViewDelegate protocol we just made
@property (nonatomic, weak) id <MyPickerViewDelegate>delegate;

@end

//
//  MyPickerView.m
//

#import "MyPickerView.h"

@implementation MyPickerView
@synthesize delegate = _myPickerViewDelegate; // We changed the data type of delegate as it was declared in the superclass so it's important to link it to a differently named backing variable

- (UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event {
    // We make sure to call the super method so all standard functionality is preserved
    UIView *hitView = [super hitTest:point withEvent:event];

    if (hitView) {
        // This will be true if the hit was inside of the picker
        [_myPickerViewDelegate pickerViewDidReceiveTouch:self];
    }

    // Return our results, again as part of preserving our superclass functionality
    return hitView;
}

@end 
```

然后在您的 ViewController 中将其更改为符合`<MyPickerViewDelegate>`而不是`<UIPickerViewDelegate>`. 这没关系，因为`MyPickerViewDelegate`继承自标准方法`UIPickerViewDelegate`并将通过标准`UIPickerViewDelegate`方法。

最后`pickerViewDidReceiveTouch:`在您的视图控制器中实现：

```
- (void)pickerViewDidReceiveTouch:(UIPickerView *)pickerView {
    [enterInput resignFirstResponder];
} 
```

# internet-explorer-8 - IE css如何？

> ID：10796658
> 
> 赞同：0
> 
> 时间：2012-05-29T09:45:23.033
> 
> 标签：internet-explorer-8, internet-explorer-9, css

在过去的 3 个月里，我一直在为此苦苦挣扎！！- 如何使css3适应IE7、8和9？

这是我的页面

我在那里使用按钮，我想制作圆角（基本，不是吗？）所以我使用了这个 css

```
body .main_title {
  font-size: 16px;
  padding: 0.3em 1.5em;
  display: inline-block;
  cursor: pointer;
  line-height: 1.5;
  -webkit-border-radius: 10px;
  -moz-border-radius: 10px;
  -ms-border-radius: 10px;
  -o-border-radius: 10px;
  border-radius: 10px;
  background-color: #222222;
  color: white;
  behavior: url(PIE.htc);
} 
```

按钮是

```
<button type="submit" id="1" class="main_title">מאפיינים</button> 
```

正如您所注意到的，我还使用了一个名为 css3pie 的“扩展”来使其工作，但没有！

有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T09:51:41.860

> 有什么建议吗？

坐下来。放松。不要担心市场份额下降的旧浏览器中的次要外观细节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T09:47:26.353

CSS3 pie 有点麻烦。试戴上`position:relative;`它。还要确保这是 PIE.htc 的正确路径——如果我没记错的话，绝对链接到它可能会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T09:49:34.963

我认为您可能可以在您的 javascript 中为这个[http://jquery.malsup.com/corner/使用 jquery。](http://jquery.malsup.com/corner/)

从 IE9 开始的任何东西都可以在 css 中使用

```
border-radius:10px 
```

[http://caniuse.com/#search=border-radius](http://caniuse.com/#search=border-radius)

# android - 活动 onBackPressed() 导致 GC 延迟活动响应

> ID：10796659
> 
> 赞同：0
> 
> 时间：2012-05-29T09:45:30.613
> 
> 标签：android, garbage-collection, android-activity

我面临一个问题，当我从活动 B 移回活动 A（通过后按）时，会导致大量 GC（在 logcat 中显示），这会使应用程序在返回活动 A 前大约 1 秒停止。

有人对此有任何解决方案吗？

猕猴桃

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T09:55:44.960

GC 应该不会花那么长时间，在 Android 中更改一个 Activity 不是一项快速的任务，需要在结束 Activity 的暂停回调和返回的 Activity 的恢复回调之间循环。这可能是占用时间最多的部分，因此我将首先测量在这些回调上花费了多少时间：`onPause`, `onStop`, `onDestroy`, `onStart`,`onResume`两个活动。

您还可以使用 Android 工具[TraceView](http://developer.android.com/guide/developing/tools/traceview.html)来分析您的活动并查看耗时过长的情况。

**不推荐**，但是如果你坚持要阻止GC，你可以在用户点击返回键之前手动调用它，这样内存会尽可能的空闲，你被命中的机会也会更小当活动发生变化时点击，你可以打电话`System.gc()`

# android - 将图像转换为位图

> ID：10796660
> 
> 赞同：6
> 
> 时间：2012-05-29T09:45:31.563
> 
> 标签：android, image-processing, bitmap

我想创建特定图像的位图图像，但我想抵制位图图像的宽度和高度。我正在使用以下代码......

```
image2  = BitmapFactory.decodeResource(getResources(), rid);
        Log.w("DEBUG","which is null:image i " + i.getWidth() + " OR " +i.getDrawable().getIntrinsicHeight () );
        Log.w("DEBUG","which is null:image h " + h.getWidth() + " OR " +h.getHeight() );
        Log.w("DEBUG","which is null:image2 " + image2.getWidth() + " OR " +image2.getHeight() );

     Bitmap image = Bitmap.createScaledBitmap(image2, i.getWidth(), i.getHeight(), false);
        Log.w("DEBUG","which is null:image " + image.getWidth() + " OR " +image.getHeight() );
        double bmWidth = image.getWidth();
          double bmHeight = image.getHeight(); 
          if ( x < 0 || y < 0 || x > getWidth() || y > getHeight()){
               return 0; //Invalid, return 0 
              }else{
               //Convert touched x, y on View to on Bitmap
               int xBm = (int)(x * (bmWidth / getWidth()));
               int yBm = (int)(y * (bmHeight / getHeight()));
               return image.getPixel(xBm, yBm); 
```

但它没有返回相同的输出........它显示了相同的宽度和高度，但我想要的输出没有出现。在我想要的输出高度变大......所以如何克服它。有人能推荐我吗

**编辑：**

```
this.setDrawingCacheEnabled(true);

        // this is the important code :)  
        // Without it the view will have a dimension of 0,0 and the bitmap will be null          
        this.measure(MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED), 
                    MeasureSpec.makeMeasureSpec(0, MeasureSpec.UNSPECIFIED));
        this.layout(0, 0, this.getMeasuredWidth(), this.getMeasuredHeight()); 

        this.buildDrawingCache(true);
        Bitmap image = Bitmap.createBitmap(this.getDrawingCache());
        this.setDrawingCacheEnabled(false);
        //image2  = BitmapFactory.decodeResource(getResources(), rid);
        Log.w("DEBUG","which is null:image i " + i.getWidth() + " OR " +i.getDrawable().getIntrinsicHeight () );
        Log.w("DEBUG","which is null:image h " + h.getWidth() + " OR " +h.getHeight() );
        Log.w("DEBUG","which is null:image2 " + image2.getWidth() + " OR " +image2.getHeight() );

        Log.w("DEBUG","which is null:image " + image.getWidth() + " OR " +image.getHeight() );
        double bmWidth = image.getWidth();
          double bmHeight = image.getHeight(); 
          if ( x < 0 || y < 0 || x > getWidth() || y > getHeight()){
               return 0; //Invalid, return 0 
              }else{
               //Convert touched x, y on View to on Bitmap
               int xBm = (int)(x * (bmWidth / getWidth()));
               int yBm = (int)(y * (bmHeight / getHeight()));
               return image.getPixel(xBm, yBm); 
              }
} 
```

现在它向我显示空指针异常... **堆栈跟踪**

```
05-29 15:22:07.205: E/AndroidRuntime(889): FATAL EXCEPTION: main
05-29 15:22:07.205: E/AndroidRuntime(889): java.lang.NullPointerException
05-29 15:22:07.205: E/AndroidRuntime(889):  at android.graphics.Bitmap.createBitmap(Bitmap.java:358)
05-29 15:22:07.205: E/AndroidRuntime(889):  at com.example.nam.ImageIn.getmaskPixel(ImageIn.java:60)
05-29 15:22:07.205: E/AndroidRuntime(889):  at com.example.nam.AshActivity.getMaskColor(AshActivity.java:192)
05-29 15:22:07.205: E/AndroidRuntime(889):  at com.example.nam.FirstImage.pageinfo(FirstImage.java:102)
05-29 15:22:07.205: E/AndroidRuntime(889):  at com.example.nam.FirstImage.onTouch(FirstImage.java:65)
05-29 15:22:07.205: E/AndroidRuntime(889):  at android.view.View.dispatchTouchEvent(View.java:3762)
05-29 15:22:07.205: E/AndroidRuntime(889):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:863)
05-29 15:22:07.205: E/AndroidRuntime(889):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:863)
05-29 15:22:07.205: E/AndroidRuntime(889):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:863)
05-29 15:22:07.205: E/AndroidRuntime(889):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:863)
05-29 15:22:07.205: E/AndroidRuntime(889):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:863)
05-29 15:22:07.205: E/AndroidRuntime(889):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:863)
05-29 15:22:07.205: E/AndroidRuntime(889):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:863)
05-29 15:22:07.205: E/AndroidRuntime(889):  at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1671)
05-29 15:22:07.205: E/AndroidRuntime(889):  at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1107)
05-29 15:22:07.205: E/AndroidRuntime(889):  at android.app.Activity.dispatchTouchEvent(Activity.java:2086)
05-29 15:22:07.205: E/AndroidRuntime(889):  at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1655)
05-29 15:22:07.205: E/AndroidRuntime(889):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1785)
05-29 15:22:07.205: E/AndroidRuntime(889):  at android.os.Handler.dispatchMessage(Handler.java:99)
05-29 15:22:07.205: E/AndroidRuntime(889):  at android.os.Looper.loop(Looper.java:123)
05-29 15:22:07.205: E/AndroidRuntime(889):  at android.app.ActivityThread.main(ActivityThread.java:4627)
05-29 15:22:07.205: E/AndroidRuntime(889):  at java.lang.reflect.Method.invokeNative(Native Method)
05-29 15:22:07.205: E/AndroidRuntime(889):  at java.lang.reflect.Method.invoke(Method.java:521)
05-29 15:22:07.205: E/AndroidRuntime(889):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
05-29 15:22:07.205: E/AndroidRuntime(889):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
05-29 15:22:07.205: E/AndroidRuntime(889):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T09:49:16.497

您可以只使用 imageView 的图像缓存。它将在将整个视图布局（缩放、与背景等）到新位图时渲染整个视图。

```
imageView.buildDrawingCache();
Bitmap bmap = imageView.getDrawingCache(); 
```

可能是这样的：

```
BitmapDrawable drawable = (BitmapDrawable) imageView.getDrawable();
Bitmap bitmap = drawable.getBitmap(); 
```

[更多的](https://stackoverflow.com/questions/4715044/android-how-to-convert-whole-imageview-to-bitmap)

或将 sdcard 图像形成位图

```
FileInputStream in = new FileInputStream("/sdcard/test2.png");
BufferedInputStream buf = new BufferedInputStream(in);
byte[] bMapArray= new byte[buf.available()];
buf.read(bMapArray);
Bitmap bMap = BitmapFactory.decodeByteArray(bMapArray, 0, bMapArray.length 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T13:54:11.220

您是否尝试禁用自动缩放？

```
Matrix matrix = new Matrix();               
BitmapFactory.Options bfoOptions = new BitmapFactory.Options(); 
//Set to UnAutoScale
bfoOptions.inScaled = false;
//Fit to your size
matrix.setScale(widthRatio, heightRatio); 
Bitmap tempBitmap = BitmapFactory.decodeResource(res, resID, bfoOptions);
Bitmap outputbitmap = Bitmap.createBitmap(tempBitmap, 0, 0, tempBitmap.getWidth(), tempBitmap.getHeight(), matrix, true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T09:53:43.313

如果我了解您想要从另一个创建缩放位图。下面是一段代码，可让您调整位图的大小。

只需输入原始 Bitmap 对象和所需的 Bitmap 尺寸，此方法将返回给您新调整大小的 Bitmap！

```
public Bitmap getResizedBitmap(Bitmap bm, int newHeight, int newWidth) {

int width = bm.getWidth();

int height = bm.getHeight();

float scaleWidth = ((float) newWidth) / width;

float scaleHeight = ((float) newHeight) / height;

// create a matrix for the manipulation

Matrix matrix = new Matrix();

// resize the bit map

matrix.postScale(scaleWidth, scaleHeight);

// recreate the new Bitmap

Bitmap resizedBitmap = Bitmap.createBitmap(bm, 0, 0, width, height, matrix, false);

return resizedBitmap;

} 
```

获取触摸点的像素值

在您的位图对象上使用 Bitmap.getPixel(int x, int y)。它将返回 int 值，您需要通过向右移动位来取出单独的 a、r、g、b 值：

```
int pixelCol = bmp.getPixel(touchX,touchY);

          int a = (pixelCol >>> 24) & 0xff;
          int r = (pixelCol >>> 16) & 0xff;
          int g = (pixelCol >>> 8) & 0xff;
          int b = pixelCol & 0xff; 
```

# javascript - nivo 滑块图像调整大小问题

> ID：10796661
> 
> 赞同：6
> 
> 时间：2012-05-29T09:45:33.633
> 
> 标签：javascript, html, css, nivo-slider

我的网页中有 nivo 滑块。我需要显示各种宽度和高度的图像。较大的图像显示在较小的图像后面。请参考以下截图。

![在此处输入图像描述](../Images/6fa1767a37fb6989df2093753a424e6a.png)

我必须删除在小图像后面显示大图像。有没有可能用 nivo 滑块做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-06T10:46:41.157

I used this and it's worked :)

```
.theme-default .nivoSlider img {
    position:absolute;
    top:0px;
    left:0px;
    display:none;
    width: 556px;
    height: 183px !important;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-24T17:53:25.900

添加这个

```
<style>
    .slider-wrapper,.nivoSlider , img{
        width:500px;
        height:200px;
        margin-bottom:0px !important;
        border-radius:10px;
    }
</style> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T05:52:48.890

```
.theme-navigation-inside .nivoSlider img {
    position:absolute;
    top:0px;
    left:0px;
    display:none;
    height: auto;
} 
```

我发现这解决了问题

# objective-c - Objective c - 为自定义 UITableViewCell 的按钮处理按钮触摸事件的最佳实践

> ID：10796668
> 
> 赞同：16
> 
> 时间：2012-05-29T09:46:36.523
> 
> 标签：objective-c, ios, uitableview, uibutton

为自定义按钮处理按钮触摸事件的最佳做法是什么`UITableViewCell`？

我的课： `MyViewController`，`MyCustomCell`

我可以想到三个选项：

**第一个选项**- 将按钮作为 的属性`MyCustomCell`，然后在`MyViewController`.m 文件中添加一个目标`MyViewController`作为目标。

`MyViewController`.m 文件

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"customCell";

    MyCustomCell *cell = (MyCustomCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
    cell = [[[MyCustomCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];

    [cell.theButton addTarget:self
                       action:@selector(theButtonTapped:)
             forControlEvents:UIControlEventTouchUpInside];
    }

    // Configure the cell...    
    [self configureCell:cell atIndexPath:indexPath];

    return cell;
}

- (void)theButtonTapped:(UIButton *)sender
{
    MyCustomCell *selectedCell = (MyCustomCell *)sender.superview;

    if (selectedCell) {
        NSIndexPath *indexPath = [self.tableView indexPathForCell:selectedCell];
        MyModel *selectedModel = [self.model objectAtIndex:indexPath.row]; 

        // do something with the model...
    }
} 
```

**第二个选项**- 如果自定义单元格是在 IB 中制作的，请将 nib 文件的所有者设置为`MyViewController`，实现`buttonTapped:`方法 in`MyViewController`并将按钮的 Touch Up Inside 事件连接到该`buttonTapped:`方法。

**第三个选项**- 如果自定义单元格不是在 IB 中制作的，则将目标添加到`MyCustomCell`.m 文件中的按钮`MyCustomCell`作为目标。
定义一个`MyCustomCellDelegate`add `@property (nonatomic, assign) id<MyCustomCellDelegate> delegate`to`MyCustomCell`并在点击按钮时调用此委托。创建单元格并实现协议时
设置`MyViewController`为单元格的委托。`MyCustomCellDelegate`

`MyCustomCell`.h 文件

```
@class MyCustomCell;  

@protocol MyCustomCellDelegate <NSObject>
- (void)buttonTappedOnCell:(MyCustomCell *)cell;
@end

@interface MyCustomCell : UITableViewCell

@property (nonatomic, retain) UIButton *theButton;
@property (nonatomic, assign) id<MyCustomCellDelegate> delegate;

@end 
```

`MyCustomCell`.m 文件

```
- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
        // Initialization code
        self.theButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
        self.theButton.frame = CGRectMake(10,10,50,30);
        [self addSubview:self.theButton];

        [self.theButton addTarget:self
                           action:@selector(theButtonTapped:)
                 forControlEvents:UIControlEventTouchUpInside];
    }
    return self;
}

- (void)theButtonTapped:(UIButton *)sender
{
    [self.delegate buttonTappedOnCell:self];
} 
```

`MyViewController`.m 文件

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"customCell";

    MyCustomCell *cell = (MyCustomCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[[MyCustomCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] autorelease];

        cell.delegate = self;
    }

    // Configure the cell...    
    [self configureCell:cell atIndexPath:indexPath];

    return cell;
}

- (void)buttonTappedOnCell:(MyCustomCell *)selectedCell
{
    if (selectedCell) {
        NSIndexPath *indexPath = [self.tableView indexPathForCell:selectedCell];
        MyModel *selectedModel = [self.model objectAtIndex:indexPath.row];

        // do something with the model...
    }
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-29T09:58:13.363

将单元格的行存储为`tag`自定义按钮的属性。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    // bla bla bla
    if (!cell)
    {
        //bla bla bla
        [cell.yourButton addTarget:self selector:@selector(yourButtonTapped:) forControlEvents:UIControlEventTouchUpInside];
    }
    // bla bla bla
    cell.yourButton.tag = indexPath.row;
}

-(void)yourButtonTapped:(id)sender
{
    int tag = [(UIButton *)sender tag];
    NSLog(@"tapped button in cell at row %i", tag);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-05-14T13:34:20.783

从我的角度来看，使用标签会破坏代码的严格性。此外，当您有多个部分时，使用标签肯定会弄乱您的代码。

为避免此问题，您可以子类化`UITableViewCell`并使其拥有一个`indexPath`属性以让单元格知道其精确位置。

这里的另一个问题是，如果`UITableView`调用 API 到`insert`或`delete`行，您必须更新可见单元格的位置数据

我认为这不是最佳做法。

存在更好的方法。

* * *

**当您必须在 Cell 中处理不同的触摸事件时，我强烈建议您使用 MVVM。**

在这种模式下，您的 custom`UITableViewCell`将持有一个 custom `CellViewModel`。此类将负责保存与单元格关联的所有数据，因此您可以检索数据并将事件处理逻辑放入单元格中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-25T06:23:03.363

**Swift 3.0 解决方案**

```
cell.btnRequest.tag = indexPath.row

cell.btnRequest.addTarget(self,action:#selector(buttonClicked(sender:)), for: .touchUpInside)

func buttonClicked(sender:UIButton) {

    let buttonRow = sender.tag
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-14T17:59:43.960

我通过子类化 UIButton 实现了基于块的方法：

```
typedef void (^ActionBlock)(id sender);

@interface UIBlockButton : UIButton {
     ActionBlock _actionBlock;
 } 

-(void)handleControlEvent:(UIControlEvents)event withBlock:(ActionBlock) action;
​@end

@implementation UIBlockButton

 -(void) handleControlEvent:(UIControlEvents)event withBlock:(ActionBlock) action
    {
      _actionBlock = action;
      [self addTarget:self action:@selector(callActionBlock:) forControlEvents:event];
      }

  -(void) callActionBlock:(id)sender{
     _actionBlock(sender);
   }

@end 
```

在 tableview 委托中：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (!cell)
    {
     cell.yourButton.tag = indexPath.row;// pass tag
     [cell.yourButton handleControlEvent:UIControlEventTouchUpInside withBlock:^(id sender) {
     // your selector action code
     NSLog(@"tapped button in cell at row %i",[(UIButton *)sender tag]);
     }];
   }  
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-14T18:52:41.000

在某些时候，您的按钮被点击，此时它是一个单元格的子视图，它是某个表格视图的子视图。

只需编写一个获取视图的方法，沿着 superview 链向上查找包含单元格，再向上查找 tableview，然后向 tableview 询问单元格的 indexPath。

这比存储包含行的标签要容易和可靠得多，因为在编辑 tableview 时不会遇到问题，而且在需要 indexPath 时，最好有代码找出它是哪个 indexPath，并且创建单元格时，不在某些完全不相关的代码中。

# java - 如何限制 Windows 用户关闭 Java 进程？

> ID：10796674
> 
> 赞同：2
> 
> 时间：2012-05-29T09:47:00.897
> 
> 标签：java

有一个客户想要在他的企业拥有的计算机上安装自定义 Java 应用程序，但是，他不想让受限用户能够关闭应用程序，即使是从 Windows 任务管理器。

该应用程序的目的是监视某些特定资源并静默执行多项任务。这些计算机的用户将了解该软件及其具体功能。

我找不到使用 Java 编程语言的方法！可能还是主要与Windows用户的权限和能力系统有关？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T09:48:21.640

你不能在程序本身中做这样的事情。它更像是系统级的事情。尝试将 JVM ( `java.exe`) 作为系统进程启动。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T09:55:21.177

您可以将其作为 Windows 服务运行，由管理员启动。这样，用户将无法关闭该进程，因为他们没有足够高的权限。

请参阅[http://wrapper.tanukisoftware.com/doc/english/download.jsp](http://wrapper.tanukisoftware.com/doc/english/download.jsp)了解您可以使用的出色包装器。

有关简短教程，请查看[http://wrapper.tanukisoftware.com/doc/english/launch-win.html](http://wrapper.tanukisoftware.com/doc/english/launch-win.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T09:53:21.410

拥有无法关闭和不可见的东西听起来不道德，但我想它确实有合法用途。如果是为了保护易受攻击的人在线等有价值的事情，那么他们可能首先不应该拥有任务管理器访问权限，从而阻止他们停止 JVM。考虑用户特权，而不是试图绕过角落编码。

# qt - QListWidget 作为菜单工作 - 需要能够使用数字键激活菜单选项，而不仅仅是获得焦点

> ID：10796680
> 
> 赞同：1
> 
> 时间：2012-05-29T09:47:18.127
> 
> 标签：qt, accessibility, qlistwidget

此应用程序用于辅助功能，因此将由盲人/视障用户等使用。所以它在屏幕上有一个 listWidget 伪装成使用样式表的菜单。需要通过以下方式访问列表中每个项目背后的功能： – 鼠标单击 – 上下箭头选择然后按返回键 – 数字键（语音说“按 1 发送电子邮件”等） – 免提语音激活- 盲文输入

最后两个我还没有完成，因为我无法让前 3 个工作（我可以让所有这些工作但不能同时工作，修复一个会破坏另一个）。listWidget 已经处理了数字键（如果您按 4，则第 4 行被选中——我需要按 4 来运行菜单项功能而无需第二个用户输入），但我只是在它的工作原理上遗漏了一些东西。

这是我只需要对不同的对象做的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T10:21:02.307

1.  对于`mouse click`，我认为`clickevents`在 listwidget 中的各个小部件中实现菜单功能很简单。

2.  使用`keyPressEvent(QKeyEvent *);`来处理`up`，`down`并根据需要`return`组合键。`listwidget->hasFocus()`

3.  使用相同`keyPressEvent(QKeyEvent *);`的方法处理`number`密钥。

# wcf - 未调用 WCF ServiceContract 和 SOAP 响应 *Response

> ID：10796682
> 
> 赞同：0
> 
> 时间：2012-05-29T09:47:22.607
> 
> 标签：wcf, soap, servicecontract, operationcontract

我正在使用 WCF 编写一个 SOAP 使用者。

在以下 WCF 服务协定中，WCF 期望响应具有一个 Body 和一个名为**HelloResponse**的元素：

```
[ServiceContract]
public interface HelloService
{
    string Hello(string input);
} 
```

在我调用的服务上，它实际上被称为**HelloResult**。我如何在不使用 MessageContracts 的情况下告诉 WCF？我尝试了以下组合和变体，但没有成功。

```
...
[OperationContract(ReplyAction = "HelloResult")]
[return: MessageParameter(Name = "HelloResult")]
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T10:37:44.663

如果您知道服务操作 Hello(string) 返回一个字符串，那么为什么不直接创建一个通道并直接调用该操作而不必担心消息呢？

# c# - VS2010 Intellisense for ASP.NET 对象在 10 秒后消失

> ID：10796687
> 
> 赞同：0
> 
> 时间：2012-05-29T09:47:27.570
> 
> 标签：c#, asp.net, devexpress, intellisense

我最近购买了 VS2010 来运行我们的 2010 年全球项目之一。在其他程序集中，它运行 ajaxcontroltoolkit、web.UI.extensions 以及 Devexpress（第三方）。由于项目标准化，我们将汇编寄存器放在 aspx 文件的顶部。

```
<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="asp" %>
<%@ Register Assembly="DevExpress.Web.ASPxGridView.v10.2, Version=10.2.6.0, Culture=neutral, PublicKeyToken=b88d1754d700e49a" Namespace="DevExpress.Web.ASPxGridView" TagPrefix="dx" %>    
<%@ Register assembly="DevExpress.Web.ASPxEditors.v10.2, Version=10.2.6.0, Culture=neutral, PublicKeyToken=b88d1754d700e49a" namespace="DevExpress.Web.ASPxEditors" tagprefix="dx" %> 
```

现在问题来了，我的 ASP.net 对象（如 asp:Textbox）智能感知不适用于 .aspx 页面。适用于代码隐藏页面。我尝试了以下方法：-

1.  从同事那里导入设置没有这个问题
2.  设置为默认设置
3.  默认为 %AppCode%/Microsoft/Visual Studio/10.0 文件夹
4.  修复/重新安装第三方（DevExpress）

在反复关闭和​​打开我的解决方案后现在很好奇，我发现当新打开解决方案时，asp.net Intellisense 确实有效。但是，在此期间，我的 DevExpress 智能感知没有。大约 10 秒后，DevExpress 智能感知现在可以工作了，但我所有的 asp.net 智能感知都没有。这让我相信某处存在一些冲突，但***我该如何解决这个问题***？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T03:13:13.303

我将 AjaxControlToolkit 程序集引用放在 DevExpress 引用下方，现在我的所有智能感知都正常工作。不能说我现在明白它是如何工作的。以下是我采取的步骤：-

1.  删除 AjaxControlToolkit 参考 - 存在 ASP.net 和 DevExpress intellisense
2.  在 web.config 中放置了 AjaxControlToolkit 参考 - 所有 3 个智能感知都存在
3.  将 AjaxControlToolkit 参考放在 DevExpress 参考下 - 所有 3 个智能感知都存在

有可能我们删除和替换了 AjaxControlToolkit 引用以某种方式刷新链接 - 以前阻止智能感知访问 ASP.net 对象的链接。无论如何，我很高兴它现在有效。

*编辑：意识到解决方案只是将 AjaxControlToolkit 的 tagprefix 重命名为除 asp 之外的其他名称。关于 AjaxControlToolkit 的一些东西给我带来了麻烦和一些 VS2010，因为它共享 asp tagprefix，所有 asp 对象都停止工作。我将它重命名为“ajax”，现在我看到了我所有的 asp 对象，尽管“ajax”对象仍然不起作用。*

# ruby-on-rails - Rails 控制台默认环境

> ID：10796689
> 
> 赞同：15
> 
> 时间：2012-05-29T09:47:38.303
> 
> 标签：ruby-on-rails, ruby, capistrano, ruby-on-rails-3.2, rvm-capistrano

在我的开发机器上：

```
$ bundle exec rails console
Loading development environment (Rails 3.2.3)
1.9.3p194 :001 > Rails.env
 => "development" 
```

这是意料之中的。到目前为止，一切都很好。

然而，在我的生产服务器（我使用 Capistrano 部署到该服务器）上，我得到了完全相同的结果：

```
$ bundle exec rails console
Loading development environment (Rails 3.2.3)
1.9.3p194 :001 > Rails.env
 => "development" 
```

在任何一台机器上，我都可以这样做：

```
$ bundle exec rails console production
Loading development environment (Rails 3.2.3)
1.9.3p194 :001 > Rails.env
 => "production" 
```

我的问题是：在生产服务器上，不应该`bundle exec rails console`默认加载生产环境，而不是开发环境？如果没有，为什么不呢？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-29T09:58:57.863

rails 可执行文件不知道应该在哪台机器上运行哪个环境。

您可以放入要启动控制台的用户`export RAILS_ENV=production`的`~/.bashrc`或文件。`~/.bash_profile`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-29T09:57:02.807

RAILS_ENV 和其他变量一样，始终默认为开发变量

如果您愿意，您可以随时在生产服务器上打开“~/.bash_profile”并添加以下内容：

```
 alias sc="bundle exec rails console production" 
```

然后运行`source ~/.bash_profile`为您的终端会话重新加载该文件，您可以调用`sc`加载控制台。

# python - 在python中将带小数位的字符串列表转换为整数

> ID：10796690
> 
> 赞同：1
> 
> 时间：2012-05-29T09:47:41.500
> 
> 标签：python, string, int

```
example_list = ['21.48678', '21.46552', '21.45145', '21.43822',
                '21.42734', '21.41222', '21.40132', '21.37679'] 
```

我在将这个列表从字符串转换为整数时遇到了一些麻烦，我也想把它作为整数。谢谢 ：）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-29T09:50:33.583

最简单的是

```
[int(float(x)) for x in your_list] 
```

这将截断所有数字

如果您想对数字进行四舍五入，请改用它

```
[int(float(x)+.5) for x in your_list] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T09:50:56.507

首先转换为`float`

```
>>> lst = ['21.48678', '21.46552', '21.45145', '21.43822', '21.42734', '21.41222', '21.40132', '21.37679']
>>> ints = [int(float(num)) for num in lst]
[21, 21, 21, 21, 21, 21, 21, 21] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-29T09:52:06.217

```
foo = ['21.48678', '21.46552', '21.45145', '21.43822', '21.42734', '21.41222', '21.40132', '21.37679']

map(lambda x: int(float(x)), foo) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T11:15:42.003

```
[int(round(float(i))) for i in example_list] 
```

将列表中的项目转换为`float`，将它们*四舍五入*，然后将它们转换为`int`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-29T11:24:05.000

```
new_list=[]
for each in example_list:
    Integer = int(each)
    new_list.append(Integer)
print new_list 
```

这对初学者来说很容易理解：D

# extjs - 如何计算商店中一个字段的总数

> ID：10796693
> 
> 赞同：4
> 
> 时间：2012-05-29T09:47:53.717
> 
> 标签：extjs, grid, extjs4

如附图所示，我在表格中有一个网格。当客户名称更改时，网格存储会加载与客户对应的记录。我希望用应付金额列的总和填充余额文本字段。

图像在 [这里](http://www.sencha.com/forum/showthread.php?210737-Grid-in-a-form&p=815471)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T10:05:10.243

像这样使用：

```
store.load({
    scope   : this,
    callback: function(records, operation, success) {
        //here the store has been loaded so you can use what functions you like.
        //This code sum numbers in certain column
        sum = 0; 
        store.each(function (rec) { sum += rec.get('NameColumn'); });
    }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-22T10:27:57.263

使用店铺汇总功能：

```
var sum = grid.getStore().sum('NameColumn'); 
```

sencha api: [sum store](http://docs.sencha.com/extjs/4.0.7/#!/api/Ext.data.Store-method-sum)

# iphone - 如何在 Mac 桌面上发布 iOS 应用程序

> ID：10796695
> 
> 赞同：-1
> 
> 时间：2012-05-29T09:47:58.820
> 
> 标签：iphone, ios, cocoa-touch, osx-server

> **可能重复：**
> [有没有办法将 iOS 应用程序转换为 Mac OS X 应用程序？](https://stackoverflow.com/questions/4714063/is-there-a-way-to-convert-an-ios-app-to-a-mac-os-x-app)

我也想在 Mac 桌面上发布我的 iPad 和 iPhone 应用程序，是否可以这样做，如果可以的话，我需要在我的代码中做哪些更改。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T09:56:36.313

好吧，你不能直接这样做，因为 iOS 使用`CocoaTouch`和类如`UIButton`, `UITableView`, `UIViewController`, ... 在 OS X 上不可用。

您可以使用大多数不使用任何`CocoaTouch`组件的代码，因为`Cocoa`它也是 Objective-C。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T10:00:28.217

您可能会认为它在 MVC 方向上。您的模态可以重用，而视图需要重新定义。当然，控制器可能会有所不同，因为它是 View 和 Modal 之间的桥梁。

rckoenes 在框架方面进行了解释。如果您从 MVC 方面考虑，我认为它可能更容易理解。

我希望它有所帮助。谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T10:06:45.267

iOS 开发与 Mac 开发类似但不一样：它们使用不同的 GUI 库（AppKit 与 UIKit）。

您可以查看一个开源解决方案，例如[Chameleon](http://chameleonproject.org/)，它是为 Mac 重新实现的 UIKit。它有一些限制，但也令人惊讶地令人印象深刻！

否则，正如其他人所说，您将重写您的 GUI。

# firefox-addon-sdk - cfx xpi 时排除文件或文件夹 - Firefox 插件 sdk

> ID：10796706
> 
> 赞同：1
> 
> 时间：2012-05-29T09:48:25.637
> 
> 标签：firefox-addon-sdk, xpi

在使用 cfx xpi 创建 xpi 文件时，有什么方法可以排除文件夹。该文档没有提供有关此的任何信息。

我问这个是因为在 cfx init 创建的目录中，我还有一个目录作为 HTMLTestPages，我在其中有一些测试 JavaScript，因为我们无法调试附加 sdk JavaScript。

每次我必须创建一个 xpi 文件时，我都必须删除该文件夹并重新放置它。此外，如果我们在 svn 上有这个文件夹，那就更成问题了。

在谷歌上搜索显示此[错误](https://bugzilla.mozilla.org/show_bug.cgi?id=686008)列出以排除 vim 临时文件，并且在他们还在讨论排除任何以 .（句点）开头的文件的评论中。那么有什么方法可以检查这是否在附加 sdk 1.6.1 中工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T10:08:36.290

当前的 Add-on SDK 版本只会将非常特定的子目录添加到 XPI 包中，即`data`和`lib`. `foo`如果您的项目在顶层也有一个 SDK 无法识别的名称的子目录或文件 - 这些将被简单地忽略。

现在，如果您的文件位于已知子目录中，例如`data`- 在这种情况下，它们将包含在包中。Add-on SDK 有关于应该排除的文件和目录的硬编码规则，您可以在下面看到它们`python-lib/cuddlefish/util.py`：

```
IGNORED_FILE_PREFIXES = ["."]
IGNORED_FILE_SUFFIXES = ["~", ".swp"]
IGNORED_DIRS = [".git", ".svn", ".hg"] 
```

这意味着文件名以句点开头或以 or 结尾的文件名将`~`被`.swp`忽略。但就目录而言 - 只有`.git`,`.svn`并且`.hg`将被忽略（这绝对有效）。如果您希望忽略其他目录，那么唯一的方法是编辑`python-lib/cuddlefish/util.py`并将其添加到`IGNORED_DIRS`列表中（不幸的是，您必须在每次 SDK 更新后重复此操作）。

# android - 原生 Android 应用程序中的 Adob e AIR

> ID：10796707
> 
> 赞同：0
> 
> 时间：2012-05-29T09:48:41.777
> 
> 标签：android, actionscript-3, air, native

是否可以从本机 Android 应用程序内部运行 AIR 应用程序？类似于“WebView”~“AIRView”的东西

# android - 搜索界面在搜索时打开一个新的Activity

> ID：10796711
> 
> 赞同：4
> 
> 时间：2012-05-29T09:49:00.210
> 
> 标签：android, android-searchmanager

我正在尝试使用 Android 的搜索管理器。

事实上，我有一个我正在打电话的活动

```
 onSearchRequested() 
```

然后，我在同一个活动中使用这个函数来获取搜索字符串：

```
 // Get the intent, verify the action and get the query
        Intent intent = getIntent();
        if (Intent.ACTION_SEARCH.equals(intent.getAction())) {
          String query = intent.getStringExtra(SearchManager.QUERY);
        } 
```

问题是下一个：当我点击搜索按钮时，我正在打开一个新活动，我想保持不变并进行一些搜索。因此，我的目标是避免在单击搜索按钮时打开新活动。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-05T11:30:38.623

该解决方案包括重用开发人员示例[http://developer.android.com/guide/topics/search/search-dialog.html](http://developer.android.com/guide/topics/search/search-dialog.html)

重要的是创建 2 个活动，一个用于搜索，另一个用于显示结果。

在清单中，使用以下代码：

```
<application ... >
<!-- this is the searchable activity; it performs searches -->
<activity android:name=".SearchableActivity" >
    <intent-filter>
        <action android:name="android.intent.action.SEARCH" />
    </intent-filter>
    <meta-data android:name="android.app.searchable"
               android:resource="@xml/searchable"/>
</activity>

<!-- this activity enables the search dialog to initiate searches
     in the SearchableActivity -->
<activity android:name=".OtherActivity" ... >
    <!-- enable the search dialog to send searches to SearchableActivity -->
    <meta-data android:name="android.app.default_searchable"
               android:value=".SearchableActivity" />
</activity>
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-23T18:53:26.743

在清单中使用

```
<activity android:name="BrowseItems" android:label="@string/browseitems"
            android:launchMode="singleTop">
            <intent-filter>
                <action android:name="android.intent.action.SEARCH" />
            </intent-filter>
            <meta-data android:name="android.app.searchable"
                android:resource="@xml/itemsearchable" />
</activity> 
```

# android - Android 中的 SAP 调用 RFC

> ID：10796715
> 
> 赞同：-1
> 
> 时间：2012-05-29T09:49:28.913
> 
> 标签：android, saprfc, sup

任何人都知道演示如何在 Android 中使用 SAP RFC 连接到服务的示例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T19:21:25.980

原生 RFC 肯定是不可能的，因为您需要一个在 Android 平台上不可用的闭源原生库。您必须使用 Web 服务包装器。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-06-22T14:00:20.157

您可以创建 Web 服务并通过 SOAP 调用该 Web 服务。

# iphone - 将 POD 格式从 3D Max 导出到 cocos3D

> ID：10796720
> 
> 赞同：2
> 
> 时间：2012-05-29T09:49:39.273
> 
> 标签：iphone, cocoapods, 3dsmax, cocos3d

我们正在开发一个带有 3D 角色的医疗应用程序，该应用程序教授有关 phisioterapy 的知识。

我们在 3D Studio Max 中有一个带有动画的 3D 角色，当我将其导出到 POD 中时（我尝试了许多配置），当我在 PVRShaman 中预览时，角色会变形其体积。如果我检查导出矩阵选项，一切正常，除了角色在 iOS 模拟器中没有动画（而且它看起来是倒置的）。

我们正在使用

*   cocos3d 0.7.1
*   3D 工作室最大 2012
*   最后一个 PVRTOPOD 导出插件
*   iOS 5.1.1
*   Windows 7 旗舰版 64 位。

有没有人有同样的问题或任何解决方案？这让我疯狂。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T00:59:48.697

您可能想查看[www.gameplay3d.org](http://www.gameplay3d.org)。我们认为我们的解决方案非常干净，不会尝试依赖像 cocos2d 这样的基线架构，这不是为 2D 框架或引擎启动架构的最佳方式。

最好不要基于 2D 引擎架构构建“3D”框架/引擎。游戏框架是跨平台的，并且经过我的团队的良好测试。支持 Windows、MacOSX、iOS、Android 和黑莓 :)

# xcode - 在 Cocoa OS X 的 NSTableView 中选择单元格时调用哪个方法？

> ID：10796724
> 
> 赞同：11
> 
> 时间：2012-05-29T09:49:56.570
> 
> 标签：xcode, cocoa, osx-snow-leopard, nstableview

我有一个 NSTableView ，我想获取单元格中存在的值。我只有一列，所以我只需要行号

我可以使用这个[tableView selectedRow]-但是我把它放在哪里我想把它放在一个在选择任何行时被调用的方法中。

```
-(void)tableViewSelectionDidChange:(NSNotification *)notification{

NSLog(@"%d",[tableViewController selectedRow]);

} 
```

上述方法也不起作用我收到错误 -[NSScrollView selectedRow]: unrecognized selector sent to instance 0x100438ef0]

我想要类似 iPhone tableview 中可用的方法-

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath  {
} 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-29T09:57:13.713

什么是`tableViewController`对象？只有`NSTableView`实例响应`selectedRow`。`notification`您可以从的 object 属性获取当前表视图（发送通知的表视图） ：

目标-C：

```
-(void)tableViewSelectionDidChange:(NSNotification *)notification{
    NSLog(@"%d",[[notification object] selectedRow]);
} 
```

迅速：

```
func tableViewSelectionDidChange(notification: NSNotification) {
    let table = notification.object as! NSTableView
    print(table.selectedRow);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-02-09T12:13:03.057

Xcode 10/swift 4.2 我的 2 美分

```
 func tableViewSelectionDidChange(_ notification: Notification) {
        guard let table = notification.object as? NSTableView else {
            return
        }
        let row = table.selectedRow
        print(row)
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-12-20T06:16:48.693

在**Swift 5.4**中：

只需使用`tableView.action = #selector(YOUR_METHOD)`, 然后在您的方法中尝试使用`tableView.selectedRow`.

这只会解决问题。看看下面的演示：

```
override func viewDidLoad() {
    super.viewDidLoad()
    // Do view setup here.

    tableView.action = #selector(didSelectRow)
}

@objc private func didSelectRow() {
    print("Selected row at \(tableView.selectedRow)")
} 
```

但请注意，如果没有选择任何内容，或者您​​在单元格外部单击，那么您将`tableView.selectedRow`获得**-1**。所以你可能想在使用它之前检查索引是否超出范围。:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-05-07T21:06:05.043

Swift 3（来自 Eimantas 的回答）：

```
func tableViewSelectionDidChange(_ notification: NSNotification) {
    let table = notification.object as! NSTableView
    print(table.selectedRow);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-05-18T03:25:46.270

你应该像这样添加观察者通知

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(tableViewSelectionDidChangeNotification)
                                             name:NSTableViewSelectionDidChangeNotification object:nil]; 
```

当 tableView 选择行时它将起作用

祝你好运

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-03-02T03:59:00.457

**Swift 5**中的完整指南：

```
 override func viewDidLoad() {
        super.viewDidLoad()

        NotificationCenter.default.addObserver(self, selector: #selector(ViewController.didSelectRow(_:)), name: NSTableView.selectionDidChangeNotification, object: tableView)
    }

    @objc
    func didSelectRow(_ noti: Notification){
        guard let table = noti.object as? NSTableView else {
            return
        }
        let row = table.selectedRow
        print(row)
    }

    deinit {
        NotificationCenter.default.removeObserver(self)
    } 
```

# java - 从 java 程序安装字体

> ID：10796726
> 
> 赞同：4
> 
> 时间：2012-05-29T09:50:13.873
> 
> 标签：java, windows-7, fonts

我想从我的 java 类中安装一组字体到 windows 系统。我正在为我的 Birt Report 使用这些字体。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T10:01:45.960

您可以编写批处理/powershell 脚本并将其与应用程序中的字体文件一起包含在内。然后你可以执行脚本

```
Runtime.getRuntime().exec(...) 
```

运行应用程序后，您很可能必须提高应用程序的权限。

至于传递密码。它可以运行`cmd.exe`，因此它会弹出并支持用户。您还可以尝试将 exec 的返回值分配给`Process`具有`InputStream`和`OutputStream`属性的类对象。我不知道如何正确地做到这一点。几年前，我在一个项目中做过一次，但我不再拥有代码。

如果您只需要安装一次字体，请考虑为您的 java 应用程序创建一个安装程序来处理它。有一个名为 IzPack 的简洁安装程序生成器，它允许您使用 XML 创建复杂的安装程序。它还允许您提高安装期间运行的可执行文件的权限。这就是我做这些事情的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T09:57:25.657

如果您在窗口中进行测试，您可以安装这些字体用户 System -> Fonts。如果您尝试将其与您的程序一起安排，则必须首先将它们包含在您的 java 资源文件中，以便稍后引用它。

希望有帮助~

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-23T19:39:47.437

如果没有本地管理员权限，则可以将自定义字体添加到字体缓存中。然后，在您注销之前，您的所有应用程序都可以使用您的自定义字体。执行此操作的 Windows API 是[AddFontResource](http://msdn.microsoft.com/en-us/library/windows/desktop/dd183326(v=vs.85).aspx)。通过 JNI 帮助程序 DLL，您可以直接调用它，或者只执行[RegisterFonts](http://www.dailygyan.com/2008/05/how-to-install-fonts-in-windows-without.html)实用程序。

# netbeans - 如何将我捕获的图像保存在图库文件夹或手机内存中？

> ID：10796730
> 
> 赞同：2
> 
> 时间：2012-05-29T09:50:24.157
> 
> 标签：netbeans, java-me

我正在使用诺基亚 3120，我想将捕获的图像保存在手机内存中，但是当我保存图像时，它给出了异常安全`Java/lang/SecurityException` 访问被拒绝。

我的代码，

```
FileConnection fileConn = null;
        DataOutputStream dos = null;

        try {
            fileConn = (FileConnection) Connector.open(
                    "file:///C:/story123.jpg");    /*//"file:///root1/story123.jpeg");*/
            if (!fileConn.exists()) {
                fileConn.create();
            }
            dos = new DataOutputStream(fileConn.openOutputStream());
            dos.write(photo);
            dos.flush();
            dos.close();
            fileConn.close();

        } catch (IOException ioe) {
            System.out.println("Error!" + ioe);
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T17:42:11.133

J2ME 非常严格。可能手机不允许在文件系统的根文件夹中存储某些内容。尝试找到图像文件夹，并将其存储在那里。

你可以得到目录

System.getProperty("fileconn.dir.photos")

另请参阅 [Symbian 平台和 Series 40 中的 FileConnection API 系统属性](http://www.developer.nokia.com/Resources/Library/Java/#!implementation-notes/jsr-75-fileconnection-api-optional-package/runtime-environment-notes/system-properties.html)

# ember.js - 如何创建实现通用子视图的视图混合

> ID：10796732
> 
> 赞同：1
> 
> 时间：2012-05-29T09:50:36.007
> 
> 标签：ember.js

是否有一个 mixin 的示例，它实现了一个应用程序的多个视图共有的子视图。例如，我想在我的应用程序的每个部分添加一个工具栏，并避免在我的视图模板中重复工具栏元素，我想使用 mixins

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T19:18:26.543

查看 Ember.View 上的布局属性。您可以在视图中共享一个布局模板。

[http://docs.emberjs.com/#doc=Ember.View&src=false](http://docs.emberjs.com/#doc=Ember.View&src=false)

您还可以使用 Ember.ContainerView 实现类似的目标。您的类可以将视图添加到 childViews 数组。

[http://docs.emberjs.com/#doc=Ember.ContainerView&src=false](http://docs.emberjs.com/#doc=Ember.ContainerView&src=false)

# msbuild - 如果使用 ContinueOnError=true，如何检查 MSBuild-Task 是否失败

> ID：10796733
> 
> 赞同：13
> 
> 时间：2012-05-29T09:50:36.370
> 
> 标签：msbuild, msbuild-task, msbuild-4.0

我正在使用***ContinueOnError*** *=true运行**MSBuild*任务：

 **```
<MSBuild Projects="@(ComponentToDeploy)"
    Targets="$(DeploymentTargets)"
    Properties="$(CommonProperties);%(AdditionalProperties)"
    ContinueOnError="true" 
    Condition="%(Condition)"/> 
```

所以我的构建总是成功的。

有没有办法找出是否发生任何错误？

我找不到包含此信息的*MSBuild*任务的任何*输出。*我知道的唯一方法是解析日志文件中的错误，但这对我来说似乎是一种解决方法。

 *（我正在使用 MSBuild 4.0）

* * *

*这是对@Ilya 的最后反馈的回答。*
*由于评论的长度和格式限制，我正在使用反馈/答案。*

> 日志的范围仅限于单个目标或更具体的任务......

当我阅读您的评论并建议使用以下内容时，这确实是第一个问题`Log.HasLoggedErrors`：“**日志的范围是多少？** ”。
不幸的是，我找不到合适的文档。MSND 帮不上什么忙……
你为什么知道它是针对任务的？
我一点都不怀疑你的说法！我只是想知道某处是否有适当的文档..（我已经多年没有使用*MSBuild*了；-）

> 无论如何，您要构建什么项目？

我的测试项目非常简单。
*我的测试项目*

```
<?xml version="1.0" encoding="utf-8" ?>
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003" DefaultTargets="ElenasTarget" ToolsVersion="4.0">

    <UsingTask AssemblyFile="$(MSBuildProjectDirectory)\MyCompany.Tools.MSBuild.Tasks.dll" TaskName="MSBuildWithHasLoggedErrors" />

    <ItemGroup>
        <MyProjects Include="CopyNotExistingFile.proj" />
    </ItemGroup>

    <Target Name="ElenasTarget">
        <MSBuildWithHasLoggedErrors Projects="@(MyProjects)" ContinueOnError="true" >
            <Output TaskParameter="HasLoggedErrors" PropertyName="BuildFailed" />
         </MSBuildWithHasLoggedErrors>

         <Message Text="BuildFailed=$(BuildFailed)" />
  </Target>
</Project> 
```

CopyNotExistingFile.proj*只是*尝试复制一个不存在的文件：

```
<?xml version="1.0" encoding="utf-8" ?>
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003" DefaultTargets="Target1" ToolsVersion="4.0">
    <Target Name="Target1"> 
         <Copy SourceFiles="C:\lalala.bum" DestinationFiles="C:\tralala.bam" />
  </Target>
</Project> 
```

这是我的自定义任务*MSBuildWithHasLoggedErrors*

```
namespace MyCompany.Tools.MSBuild.Tasks
{
    public class MSBuildWithHasLoggedErrors : Microsoft.Build.Tasks.MSBuild
    {
        [Output]
        public bool HasLoggedErrors { get; private set; }

        public override bool Execute()
        {
            try
            {
                base.Execute();
                HasLoggedErrors = Log.HasLoggedErrors;
            }
            catch (Exception e)
            {
                Log.LogErrorFromException(e, true);
                return false;
            }

            return true;
        }
    }
} 
```

如果我构建我的 MyTest.proj`HasLoggedErrors`将被设置为`false`虽然错误（*MSB3021*）被记录（？）到控制台记录器：

```
Project "C:\Users\elena\mytest.proj" on node 1 (default targets).
Project "C:\Users\elena\mytest.proj" (1) is building "C:\Users\elena\CopyNotExistingFile.proj" (2) on node 1 (default targets).
Target1:
  Copying file from "C:\lalala.bum" to "C:\tralala.bam".
C:\Users\elena\CopyNotExistingFile.proj(5,4): error MSB3021: Unable to copy file "C:\lalala.bum" to "C:\tralala.bam". Could not find file 'C:\lalala.bum'.
Done Building Project "C:\Users\elena\CopyNotExistingFile.proj" (default targets) -- FAILED.
ElenasTarget:
  BuildFailed=False
Done Building Project "C:\Users\elena\mytest.proj" (default targets).

Build succeeded. 
```

我的期望`HasLoggedErrors`是`true`.

> 一种方法是构建 self 但具有不同的目标，例如，您的 DefaultTargets 启动指向自身的自定义 MSBuildWrapper 任务（即 $(MSBuildProjectFile)），但使用不同的目标来执行其他构建、副本

我已经尝试过了（我在帖子中的意思是我的调查）。不幸的是，它也不起作用:-
(（我知道你*在理论上*说过）。我的新**单个**项目如下所示：

```
<?xml version="1.0" encoding="utf-8" ?>
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003" DefaultTargets="ElenasTarget" ToolsVersion="4.0">

    <UsingTask AssemblyFile="$(MSBuildProjectDirectory)\MyCompany.Tools.MSBuild.Tasks.dll" TaskName="MSBuildWithHasLoggedErrors" />

    <Target Name="ElenasTarget">
        <MSBuildWithHasLoggedErrors Projects="$(MSBuildProjectFile)" Targets="CopyNotExistingFile" ContinueOnError="true" >
            <Output TaskParameter="HasLoggedErrors" PropertyName="BuildFailed" />
         </MSBuildWithHasLoggedErrors>

         <Message Text="BuildFailed=$(BuildFailed)" />
  </Target>

  <Target Name="CopyNotExistingFile" >
         <Copy SourceFiles="C:\lalala.bum" DestinationFiles="C:\tralala.bam" />
  </Target>
</Project> 
```

如果我构建此项目`HasLoggedErrors`仍将设置为`false`.
（此外，我目前维护的“真实”构建要复杂得多，其中包含多个带有目标的项目文件......所以我不能将它们全部打包在一个项目文件中）。

> 或编写自定义记录器并通过命令行传递它

那是我最后的希望！
我的“真实”构建**有**一个通过命令行传递的自定义记录器（为了简单起见，我没有将它用于我的测试项目）。这实际上是在生成日志（一个 XML 文件），我将对其进行解析以了解是否记录了任何错误。
**顺便说一句，我认为控制台记录器是一种“全局”记录器。**我错了吗？

无论如何，自定义记录器也无济于事，`Log.HasLoggedErrors`仍然设置为`false`.
**是否有某种我不知道的方法来引用特定记录器（例如我的自定义记录器）来询问它是否记录了任何错误？**

它确实看起来像是`Log`针对单个目标的。

嗯...如果对 buildengine 实例的反射是最后的手段，我仍然更喜欢解析日志。
（别怪我！:-)）

* * *

**我的决定**
经过一番调查后，我决定坚持我最初的解决方案：解析日志以确定构建是否失败。

检查我的评论，看看为什么我更喜欢迄今为止提供的建议。

如果有人有其他想法，请不要犹豫分享:-)

*（否则这个问题可以关闭，我想......）*

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-05T19:44:17.410

如果最后一个任务成功并且最后一个任务失败，则`MSBuildLastTaskResult` [保留属性](http://msdn.microsoft.com/en-us/library/ms164309(v=vs.100).aspx)将设置为：`True``False`

```
<MSBuild Projects="@(ComponentToDeploy)"
         Targets="$(DeploymentTargets)"
         Properties="$(CommonProperties);%(AdditionalProperties)"
         ContinueOnError="true" 
         Condition="%(Condition)" />
<Message Text="MSBuild failed!" Condition="'$(MSBuildLastTaskResult)' == 'False'" /> 
```

我相信这是在 MSBuild v4.0 中引入的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-08T10:03:30.613

我知道这个线程有点旧，但另一个可能的解决方案是使用：

```
<OnError ExecuteTargets="FinalReportTarget;CleanupTarget" /> 
```

如果出现错误，这将使构建失败，但执行“FinalReportTarget”和“CleanupTarget”。

**在这种情况下，不需要**ContinueOnError="true" 。****

 *** * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T10:37:40.773

之后您可以捕获[`TargetOutputs`](http://msdn.microsoft.com/en-us/library/z7f65y0d.aspx)并检查它们是否存在错误情况，但这仍然是相当骇人听闻的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T12:32:08.353

如果您只想检查 MSBuild 任务是否失败，请使用[Exec](http://msdn.microsoft.com/en-us/library/x8zx72cd.aspx)任务。将 IgnoreExitCode 设置为 true 并检查 ExitCode 输出值。如果不为零，则有问题。

如果您需要构建错误列表，请使用[/fileloggerparameters 命令行开关](http://msdn.microsoft.com/en-us/library/ms164311.aspx)将错误仅记录到某些特定文件：

/flp1:logfile=errors.txt;errorsonly

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-30T19:34:33.993

> 但是，如果某个目标中的另一个任务（例如 Copytask）引发错误，则 Log.HasLoggedErrors 将返回 false。

*不知道评论有长度限制...*

日志的范围仅限于单个目标或更具体的任务，并且（据我所知）没有办法获得“全局”，可能是通过对 buildengine 实例的反射，或编写自定义记录器并传递它通过命令行。无论如何，您要构建什么项目？HasLoggedErrors 按预期工作（并且多年来一直保持不变），它显示正在构建的项目是否记录了任何错误。它没有也不应该控制其他任务的日志记录（可能使用其他类型的记录器）。如果您想要一个全局的，一种方法是构建 self 但具有不同的目标，例如您的 DefaultTargets 启动指向自身的自定义 MSBuildWrapper 任务（即 $(MSBuildProjectFile)），但具有执行其他构建、复制的不同目标，等等，*理论上*它应该模拟一个全局 HasLoggedErrors ...*****

# objective-c - 从用户 XCode 获取输入后是否可以运行应用程序测试用例

> ID：10796739
> 
> 赞同：1
> 
> 时间：2012-05-29T09:51:09.710
> 
> 标签：objective-c, macos, unit-testing, xcode4

用户在 GUI 屏幕中输入值后是否可以运行单元测试用例。让我们考虑一下我有一个 NSTextFiled。我已经编写了一个测试用例来检查 textField 的值。所以我从产品运行测试用例->测试，我的屏幕正在加载并突然消失。我可以按住屏幕并将值输入文本字段，然后测试文本字段的值。可以吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T19:59:50.317

在运行测试之前从用户那里读取输入违背了单元测试的目的。单元测试旨在自动运行，无需用户输入。

在您的情况下，您正在尝试测试用户在文本字段中输入某个值时会发生什么。假设您为用户在文本字段中输入 50 时发生的情况编写了一个测试。不要在文本字段中输入 50，而是在测试中提供值 50。通过提供值 50，您可以对代码进行单元测试，而无需用户输入。

您还应该看看[OCMock](http://ocmock.org/)，它是一个在 Objective-C 中创建模拟对象的框架。OCMock 使使用 Cocoa 对象进行单元测试更容易。

# php - 如何在字符串的每个字符后插入符号“+”？

> ID：10796742
> 
> 赞同：1
> 
> 时间：2012-05-29T09:51:24.197
> 
> 标签：php

如何在字符串的每个字符后插入符号“+”？

就像从`mystring`变为`m+y+s+t+r+i+n+g+`。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-29T09:54:26.030

你也可以使用这个：

```
print implode("+", str_split($string)); 
```

要在之后添加一个额外的`+`，只需连接`. "+"`.

**注意：**对于不是很长的字符串，这种方法足够快。另一种方法是使用正则表达式，如[@zerkms answer](https://stackoverflow.com/a/10796785/1249581)中所示。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T09:54:13.477

```
$str = 'string';

echo preg_replace('~.~', '\\0+', $str); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T09:53:48.580

您可以使用[`preg_replace`](http://php.net/manual/en/function.preg-replace.php)：

```
$text = 'mystring';

// To match only characters (no numbers):
$replaced = preg_replace("/([a-z])/i", "$1+", $text);

// To match both
$replaced = preg_replace("/([a-z0-9])/i", "$1+", $text); 
```

# solr - Solr 3.6 JUnit 测试有推荐的方法吗？

> ID：10796750
> 
> 赞同：2
> 
> 时间：2012-05-29T09:51:45.657
> 
> 标签：solr, junit, junit4

我想知道 Solr 3.6 的 junit 测试是否有任何最佳实践。我想自动化 Solr 模式的测试。之前的帖子提到了 EmbeddedSolrServer。此类似乎已从 1.4 到 3.6 之间的任何版本中被放弃。我在项目中使用 Spring 3.0.x 和 Maven。我考虑的选项是：

1.  编写一个 Junit 测试运行器
2.  将码头启动代码放在@Before 或@BeforeClass 方法中
3.  在 maven 中启动一个 solr 服务器（可能不是一个好的选择）
4.  在 spring 测试上下文中添加一些代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T21:05:27.480

我使用了类似于[此](http://blog.synyx.de/2011/01/integration-tests-for-your-solr-config/ "Solr 配置的集成测试")页面上的内容来运行这些类型的测试，所有这些都是使用 Solr 3.4.0 上的 EmbeddedSolrServer 完成的。这是一种简单的方法，但如果您想自动化 Solr 模式测试，这可能就足够了，而且实现起来并不难。
它基本上归结为：
添加对`junit`、`solr-core`和您的`slf4j-simple`引用： `servlet-api``pom.xml`

```
 <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.7</version>
        <type>jar</type>
        <scope>test</scope>
    </dependency>
    <!-- dependencies needed for Solr integration test-->
    <dependency>
        <groupId>org.apache.solr</groupId>
        <artifactId>solr-core</artifactId>
        <version>1.4.1</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-simple</artifactId>
        <version>1.6.1</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>servlet-api</artifactId>
        <version>2.5</version>
        <scope>test</scope>
    </dependency> 
```

作为一个示例测试用例，他补充说：

```
import java.io.IOException;
import org.apache.solr.client.solrj.embedded.EmbeddedSolrServer;
import org.apache.solr.util.AbstractSolrTestCase;
import org.apache.solr.client.solrj.SolrQuery;
import org.apache.solr.client.solrj.SolrServer;
import org.apache.solr.client.solrj.SolrServerException;
import org.apache.solr.client.solrj.response.QueryResponse;
import org.apache.solr.common.SolrInputDocument;
import org.apache.solr.common.params.SolrParams;
import org.junit.Before;
import org.junit.Test;

import static org.junit.Assert.assertEquals;

public class SolrSearchConfigTest extends AbstractSolrTestCase {

    private SolrServer server;

    @Override
    public String getSchemaFile() {
        return "solr/conf/schema.xml";
    }

    @Override
    public String getSolrConfigFile() {
        return "solr/conf/solrconfig.xml";
    }

    @Before
    @Override
    public void setUp() throws Exception {
        super.setUp();
        server = new EmbeddedSolrServer(h.getCoreContainer(), h.getCore().getName());
    }

    @Test
    public void testThatNoResultsAreReturned() throws SolrServerException {
        SolrParams params = new SolrQuery("text that is not found");
        QueryResponse response = server.query(params);
        assertEquals(0L, response.getResults().getNumFound());
    }

    @Test
    public void testThatDocumentIsFound() throws SolrServerException, IOException {
        SolrInputDocument document = new SolrInputDocument();
        document.addField("id", "1");
        document.addField("name", "my name");

        server.add(document);
        server.commit();

        SolrParams params = new SolrQuery("name");
        QueryResponse response = server.query(params);
        assertEquals(1L, response.getResults().getNumFound());
        assertEquals("1", response.getResults().get(0).get("id"));
    }
} 
```

**编辑：**我有一段时间没有使用 Solr，但我认为这仍然是一个很好的起点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-16T07:36:02.143

这是我的看法。它不扩展 AbstractSolrTestCase，只是一个常规测试类。

```
import static org.hamcrest.Matchers.is;
import static org.junit.Assert.assertThat;

import java.io.File;
import java.io.IOException;

import org.apache.commons.io.FileUtils;
import org.apache.solr.client.solrj.SolrQuery;
import org.apache.solr.client.solrj.embedded.EmbeddedSolrServer;
import org.apache.solr.client.solrj.response.QueryResponse;
import org.apache.solr.client.solrj.response.UpdateResponse;
import org.apache.solr.common.SolrInputDocument;
import org.apache.solr.core.CoreContainer;
import org.junit.After;
import org.junit.Before;
import org.junit.Test;

public class EmbeddedSolrServerTest {

    private static final int SUCCESS = 0;
    private final String indexLocation = "tomcat7/apps/apache-solr-3.6.0";
    private EmbeddedSolrServer server;

    @Before
    public void setUp() throws Exception {
        System.setProperty("solr.solr.home", indexLocation);
        CoreContainer coreContainer = new CoreContainer.Initializer().initialize();
        server = new EmbeddedSolrServer(coreContainer, "collection1");
    }

    @After
    public void tearDown() throws Exception {
        server.shutdown();
        removeIndexDirectory();
    }

    @Test
    public void testSolrSchema01() throws Exception {
        SolrInputDocument doc1 = new SolrInputDocument();
        doc1.addField("id", "123");
        doc1.addField("something_txt", "super wombat");
        UpdateResponse ur = server.add(doc1);
        assertThat(ur.getStatus(), is(SUCCESS));
        server.commit();

        QueryResponse response1 = server.query(new SolrQuery("*:*"));
        assertThat(response1.getResults().getNumFound(), is(1L));

        QueryResponse response2 = server.query(new SolrQuery("something_txt:*wombat*"));
        assertThat(response2.getResults().getNumFound(), is(1L));
    }

    private void removeIndexDirectory() throws IOException {
        File indexDir = new File(indexLocation, "data/index");
        FileUtils.deleteDirectory(indexDir);
    }
} 
```

我的 POM 具有以下依赖项：

```
<properties>
    <solr.version>3.6.0</solr.version>
    <httpcomponents.version>4.3.2</httpcomponents.version>
</properties>

<dependencies>
    <dependency>
        <groupId>org.apache.solr</groupId>
        <artifactId>solr-solrj</artifactId>
        <version>${solr.version}</version>
    </dependency>
    <dependency>
        <groupId>org.apache.solr</groupId>
        <artifactId>solr-core</artifactId>
        <version>${solr.version}</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.apache.httpcomponents</groupId>
        <artifactId>httpclient</artifactId>
        <version>${httpcomponents.version}</version>
    </dependency>
    <dependency>
        <groupId>org.apache.httpcomponents</groupId>
        <artifactId>httpmime</artifactId>
        <version>${httpcomponents.version}</version>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-log4j12</artifactId>
        <version>1.6.1</version>
    </dependency>
    <dependency>
        <groupId>commons-io</groupId>
        <artifactId>commons-io</artifactId>
        <version>2.4</version>
    </dependency>
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.11</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.hamcrest</groupId>
        <artifactId>hamcrest-library</artifactId>
        <version>1.3</version>
        <scope>test</scope>
    </dependency>
</dependencies> 
```

我已经建立了一个单独的项目来保存我所有的 Solr 配置并针对它运行测试。目录结构为：

```
solr-test
|--src
|  |--test
|--tomcat7
`  |--apps
      |--apache-solr-3.6.0
         |--conf
         |--data
            |--index 
```

这似乎对我很有效。此设置还允许您使用 HttpSolrServer 编写测试来测试远程服务器的模式。

另外，请注意`server.commit()`测试中间的呼叫。这需要存在，否则 Solr 事务不完整并且新文档将不可见。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T19:14:54.607

我正在使用[https://github.com/moliware/travis-solr](https://github.com/moliware/travis-solr)进行测试，也许它对你也有用。

# css - ：在伪元素之前没有在输入元素上显示图像

> ID：10796755
> 
> 赞同：0
> 
> 时间：2012-05-29T09:52:03.070
> 
> 标签：css, pseudo-element

我希望图像出现在文本“评论”之前，但仍在按钮内。有可能做这样的事情吗？

现场版：http: [//jsfiddle.net/yGk9Z/](http://jsfiddle.net/yGk9Z/)

html

```
<input name="commit" type="submit" value="Comment"> 
```

css

```
input[type=submit]:before {
    content: url("comment.png"); } 
```

提前致谢：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T10:07:22.913

或者你可以使用一个按钮来代替：

```
<button>Comment</button>​

button:before{content: url("http://i.imgur.com/X1UMz.png")}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T10:01:55.687

您可以将其用作背景图像：

```
input[type=submit] {
  background-image: url("http://i.imgur.com/X1UMz.png");
  background-repeat: no-repeat;
  padding-left: 25px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T10:01:58.153

使用 a`background-image`和 a left`padding`代替：

```
input[type=submit]{
   background: #fff url(comment.png) no-repeat left center;
   padding-left: 32px; /* insert your actual img-width + some pixel space */
} 
```

# java - 纠结于泛型

> ID：10796757
> 
> 赞同：1
> 
> 时间：2012-05-29T09:52:11.177
> 
> 标签：java, generics, inheritance

我有 A、B 类，`B extends A` 接口定义为

```
public interface MyProcessor<EVENT> {
     void processEvent(EVENT event);
} 
```

我有两个实现

```
public class EventAProcessor implements EventProcessor<A> {
    @Override
    public void processEvent(A a) {
}
public class EventBProcessor implements EventProcessor<B> {
    @Override
    public void processEvent(B b) {
} 
```

有共同的处理，所以我决定从 Aprocessor 扩展 BProcessor

```
public class EventBProcessor extends EventAProcessor implements EventProcessor<B> {

    } 
```

这是消息失败的地方

```
 MyProcessor cannot be inherited with different arguments: <A> and <B> 
```

我有其他解决方案来解决我的问题，但只是想知道如何让它工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T09:56:42.640

不要`EventBProcessor`扩展`EventAProcessor`，因为这不是`is-a`关系。通过将它们拉入公共抽象类或通过组合重用的单独帮助器类来重用您需要的函数。通过继承重用并不总是最好的选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T09:54:56.217

你应该引入一个抽象的泛型类：

```
public abstract class AbstractEventProcessor<EVENT> 
  implements EventProcessor<EVENT> {

  // Put your common logic here
} 
```

然后，您的其他类将继承以下通用功能：

```
public class EventAProcessor extends AbstractEventProcessor<A> {}
public class EventBProcessor extends AbstractEventProcessor<B> {} 
```

这不一定与泛型有关。这是在面向对象编程中实现多态性的一般方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-29T09:58:30.180

如果你想通过继承重用代码，以下应该是可以的：

```
public abstract AbstractEventAProcessor<T extends A> implements EventProcessor<T> {
    // common methods
}

public class EventAProcessor extends AbstractEventAProcessor<A> {
    @Override
    public void processEvent(A a) { ... }
}

public class EventBProcessor extends AbstractEventAProcessor<B> {
    @Override
    public void processEvent(B b) { ... }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T09:58:39.847

我看不出该接口与您的任何一个实现有什么关系。他们都没有实现`MyProcessor`接口。

您也没有显示 Event 类的任何层次结构。是什么让您认为通过这种安排可以拥有不同的事件类型？

这是我可以做到的：

```
public interface Event {
    String getName();
}

public interface EventProcessor<T extends Event> {
    void process(T event);
} 
```

这种方式不需要不同`EventProcessor`的实现——泛型应该能够区分不同的`Event`类型。`process()`如果方法需要按类型更改，您只需要自定义实现。如果确实如此，您可能会考虑使用访问者模式。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-29T09:59:44.313

添加需要 A 或其子类的共享“公共”通用祖先。

```
public abstract class ACommonProcessor<AEvent extends A> implements MyProcessor<AEvent> {
    ...
    // shared code goes here
}

public class EventBProcessor extends ACommonProcessor<B> {
    ...
    // B-specific code goes here
}

public class EventAProcessor extends ACommonProcessor<A> {
    ...
    // etc
} 
```

# c# - 访问列表中对象的属性

> ID：10796758
> 
> 赞同：1
> 
> 时间：2012-05-29T09:52:15.810
> 
> 标签：c#, list, object, properties

我正在尝试使用存储在对象中的单个对象实例的`List<T>`属性，但我似乎无法直接访问这些属性。

我有一个对象 ( `sportsCarVehicle`)，它在其内部存储用户定义的名称 ( `strVehicleName`)（在其他属性中，但这并不重要）。然后将该对象存储在一个`List<sportsCarVehicle>`名为 的对象中`sportsCarVehicleStorage`。
我需要访问`sportsCarVehicle`in的每个实例`List<sportsCarVehicle>`并将值传递`strVehicleName`给表单上的组合框。

我假设我需要某种循环来循环遍历每个实例并将名称传递给组合框，但我的主要问题是无法访问我需要的属性。`sportsCarVehicle`实例没有可引用的名称。
我应该注意的另一件事：在方法`sportsCarVehicle`中调用了构造函数`sportsCarVehicleStorage.Add()`。

关于我如何做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T09:57:09.727

你不能这样做吗

```
List<string> lst = new List<string>{"Hello", "World"};

 int len = lst[0].Length; 
```

这`.Length`是字符串的一个属性。只要该属性是公开的，我们就可以访问它。

在你的情况下

```
List<sportsCarVehicle> sportsCarVehicleStorage = new List<sportsCarVehicle>();

// Some code to populate list.

mycombobox.Items = sportsCarVehicleStorage
                   .Select(x => x.strVehicleName).ToArray(); 
```

确保属性`strVehicleName`在该类中是公开的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T10:00:18.183

您可以使用`foreach`循环列表，将列表的每个成员分配给命名变量，例如：

```
foreach (sportsCarVehicle scv in sportsCarVehicleStorage)
{
  //scv is the name of the currently looping sportsCarVehicle object
  //use scv.strVehicleName to access the property.
  myComboBox.Items.Add(scv.strVehicleName);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T10:09:16.260

另一种方法是将sportsCarVehicle 列表直接绑定到组合框，例如：

```
List<sportCarVehicle> sportsCarVehicleStorage= new List<sportsCarVehicle>;

// Set up list content here
// ...

myComboBox.DataSource = sportsCarVehicleStorage;
myComboBox.DisplayMember = "strVehicleName"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T09:58:29.180

```
foreach (SportsCarVehicle car in myListName)
{
    //do stuff here
} 
```

这是最基本的示例，您可以使用 PLINQ 等以更简化的方式进行操作。

# java - Java EE 5 / Servlet 2.5 将 EJB 注入 ServletFilter

> ID：10796759
> 
> 赞同：1
> 
> 时间：2012-05-29T09:52:19.897
> 
> 标签：java, jakarta-ee, ejb, servlet-filters, java-ee-5

我想将会话 bean 注入到我的 ServletFilter 中，这似乎不起作用。你能告诉我如何实现这一目标吗？

```
public class MyExample implements Filter {
    @EJB
    private MyBean someEjb;

    @Override
    public void destroy() {
    }

    @Override
    public void init(FilterConfig filterConfig) throws ServletException {
    }

    @Override
    public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse,
                     FilterChain filterChain) throws IOException, ServletException{
        someEjb.toString();
    }
} 
```

导致 NullPointerException，因为 myEjb 为空。使用的平台是 JBoss 5.1 MyBean 可以从其他 EJB 或 Servlet 正确访问。

谢谢你。

* * *

问题解决（虽然我不知道为什么）：

该应用程序由三个工件组成： - 一个包含 EJB 的 jar - 一个包含 servlet 的 war - 一个包含上述两者的 ear

如果我将过滤器打包在 jar 中，就会出现问题。如果我将它与战争中的 servlet 一起打包，则不会出现问题。

所以，直接的问题解决了，但没有被理解。

也许有人可以帮助我理解这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-30T03:15:31.867

如果`servlet`和`EJB`不在一个单一的 ear 文件中，则必须`@EJB(mappedName="name")`在注入 EJB 时使用。查看[这篇文章](http://community.jboss.org/message/8196#8196)了解更多详情。

相关链接：[从外部模块注入](https://issues.jboss.org/browse/AS7-321)

当然`Filter`是一种`Servlet`，因此被称为“Servlet Filter”。并且两者`Servlet`都是`Filter`Web 组件，因此属于 Web 存档，`.war`而不是 Java 存档，`.jar`. 过滤器`jar`不会被扫描以注入那种注释，并将被视为任何其他常规 Java 类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-04T06:10:16.007

我们遇到了类似的问题，我们将一些`@WebFilter`组件`@WebListener`打包在一个未读取的 Jar 中（未处理注释）。

目的是告诉容器扫描其他罐子以寻找其他带注释的组件。

我们实现了将属性添加`metadata-complete`到 web.xml 声明的目标。例子：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app  version="3.0" 
          xmlns="http://java.sun.com/xml/ns/javaee" 
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
          xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"
          metadata-complete="false">

  ...NORMAL_CONTENT_HERE...

</web-app>
```

希望能帮助到你。

# javascript - 数组值覆盖同一变量

> ID：10796761
> 
> 赞同：0
> 
> 时间：2012-05-29T09:52:23.347
> 
> 标签：javascript, jquery, html

[http://jsfiddle.net/kunalvashist/fgazs/4/](http://jsfiddle.net/kunalvashist/fgazs/4/)

小提琴我的代码

**如果选择框包含类名“customCheckEnabled”** ，我希望获取数组值，并根据所选索引显示相应的消息，例如如果有 3 个选择框的类名为**“customCheckEnabled”**，则显示 3 条消息应该一个接一个地显示。目前在我的代码中，相同的值被覆盖。

不同的选择框有不同的数组。假设有 4 个类名为**“customCheckEnabled”**的选择框， 那么将有 4 个数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T10:15:48.860

我已将您的代码缩短为我认为您想要实现的目标：

```
$(function() {
    var messages = {
        'testName': ['Custom message for label 1', 'Custom message for label 2'],
        'testName1': ['Custom message for label 11', 'Custom message for label 22'],
        'testName2': ['Custom message for label 111', 'Custom message for label 222']
    }

        $('.customCheckEnabled').change(function() {
            var msgList = messages[this.id] || [],
            msg = msgList[this.selectedIndex] || '';

            console.log('message = ' + msg);
        });
}); 
```

# facebook - 如何在 Facebook 的用户流上发布个性化的新闻源？

> ID：10796765
> 
> 赞同：0
> 
> 时间：2012-05-29T09:52:36.213
> 
> 标签：facebook, facebook-graph-api, facebook-apps, feed

我阅读了 Facebook 开发人员指南，但我不确定我的目标是否可以实现。我开发了一个小应用程序，询问用户他们感兴趣的主题，因此他们将收到有关这些主题的过滤更新。这目前有效，我的数据库存储用户和主题。现在，如果他们选择的主题有更新，我想在注册用户流上发布新闻源（在 oauth 对话框中，我询问了“publish_actions”的权限）。我的应用程序不使用 OpenGraph，我希望新闻源将我的应用程序作为标题、一张小图片和一个简短描述，并链接到外部网站（不是我的）。提要是个性化的，所以这就是我不使用 Facebook 页面的原因。

是否有可能实现这一点？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T11:11:00.530

Facebook 平台政策不允许这样做。将某些内容发布到墙上必须与用户所做的某些事情相关，例如`User has read an article`或`User has achieved a high score`。不允许将链接/文章发布到用户的墙上，因为这不是用户采取的直接操作。

相反，您应该为用户提供个性化的 RSS 提要。每个用户都有自己的 RSS 提要，与他们表示感兴趣的主题相关。Facebook 不应该以这种方式使用。

# android - 如何使用android sqlite3删除数据库表中的行

> ID：10796766
> 
> 赞同：0
> 
> 时间：2012-05-29T09:52:36.953
> 
> 标签：android

我无法使用 sqlite 3 删除表中的行。在我的代码中，我想比较两个值，然后删除表中的数据，但这是不可能的，请帮助我。

```
 while(authCur.moveToNext())
 {
   db.delete("auth_tab",authCur.getString(0)+"=?" , new String[] { user }); 
       db.delete("auth_tab", null, null);   
      } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T10:02:24.943

**删除数据**

一旦不再需要数据，可以使用 delete() 方法将其从数据库中删除。delete() 方法需要 3 个参数、数据库名称、一个 WHERE 子句和一个 WHERE 子句的参数数组。要从表中删除所有记录，请为 WHERE 子句和 WHERE 子句参数数组传递 null。

```
 db.delete("auth_tab", "authCur.getString(0)=?", new String[] {user); 
```

只需调用 delete() 方法即可从 SQLite 数据库中删除记录。delete 方法需要表名和可选的 where 子句和 where 子句参数替换数组作为参数。where 子句和参数替换数组的工作方式与 update where 一样。被数组中的值替换。

或者

```
public void deleteContact(long id) {
    SQLiteDatabase db = this.getWritableDatabase();
    db.delete(auth_tab, KEY_USER + " = ?",
            new String[] { user) });
    db.close();
} 
```

WATCH[更多](https://stackoverflow.com/questions/5373380/whereargs-sqlite-database-delete)，你管视频，[如何删除](http://www.youtube.com/watch?v=afVQ04EnX6w)。

# jquery - stopPropagation 在 Mozilla Firefox 中不起作用

> ID：10796769
> 
> 赞同：3
> 
> 时间：2012-05-29T09:52:43.023
> 
> 标签：jquery, stoppropagation

今天是个好日子。有人可以解释为什么以下代码在 Google Chrome 中有效，而在 Mozilla Firefox 中无效？目的是在第一次单击元素时显示带有链接（即元素的子元素）的面板，在第二次单击时将其隐藏，并且链接应该可以工作。在 Mozilla 中，当您单击链接（作为元素的子元素的子元素）时，链接容器只是隐藏并且 stopPropagation 不起作用。

```
 reasonToggle = $("#element").toggle(function() {
        $("#links-container").css("visibility", "visible");
        $("#links-container").fadeTo(500, 1);
    }, function() {
        $("#links-container").fadeTo(500, 0, function() {
            $("#links-container").css("visibility", "hidden");
        });
    });
    $("#element a").click(function() {
        event.stopPropagation(reasonToggle);
    ;}); 
```

html结构：

```
<div id="element"> 
    <div id="links-container">
        <a href=""> Link1 </a>
        <a href=""> Link2 </a>
        <a href=""> Link3 </a>
    </div
</div> 
```

我认为找到解决方法不是问题，但了解代码有什么问题真的很有趣。谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T09:56:28.510

您在`event`单击处理程序的匿名函数中丢失了。

```
$("#element a").click(function() {
//                            ^^ 
```

# asp.net - AjaxToolkit：页面上的最后一个 TabContainer 专注于页面加载

> ID：10796772
> 
> 赞同：6
> 
> 时间：2012-05-29T09:52:53.347
> 
> 标签：asp.net, ajaxcontroltoolkit, tabcontainer

我在 ASP.NET 项目的一个页面上使用了多个 TabContainer，我注意到一个非常奇怪的行为：加载页面时，焦点跳转到页面上的最后一个 TabContainer，导致它向下滚动。我没有明确关注任何控制，所以我不明白这是从哪里来的。我还在控件之间切换了位置，它始终是最后一个焦点。TabContainers 没有任何花哨的设置，它们基本上是这样的：

```
<cc1:TabContainer ID="tabContainer" runat="server">
    <cc1:TabPanel runat="server" HeaderText="Header1" ID="tabPanel1" TabIndex="0">
        <HeaderTemplate>
            <asp:Label ID="lblTab1" runat="server" Text="Tab1"></asp:Label>
        </HeaderTemplate>
        <ContentTemplate>
            ... (anything goes here, it still doesn't work)
        </ContentTemplate>
    </cc1:TabPanel>
    <cc1:TabPanel runat="server" HeaderText="Header2" ID="tabPanel2" TabIndex="1">
        <HeaderTemplate>
            <asp:Label ID="lblTab2" EnableViewState="False" runat="server" Text="Tab2"></asp:Label>
        </HeaderTemplate>
        <ContentTemplate>
            ... (anything goes here, it still doesn't work)
        </ContentTemplate>
    </cc1:TabPanel>
</cc1:TabContainer> 
```

我知道我可以将焦点设置在控件上，我试过了，但页面首先滚动到选项卡容器，然后返回到焦点控件（看起来不太好）。我尝试将焦点设置到另一个控件：

```
<body id="main" onload="javascript:document.getElementById('lnkLogout').focus();"> 
```

这是 TabContainer 的标准行为吗？我怎样才能摆脱它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-29T20:11:31.583

在控制之后将脚本放在下面`ScriptManager`：

```
<script type="text/javascript">
    Sys.Extended.UI.TabContainer.prototype._app_onload = function (sender, e) {
        if (this._cachedActiveTabIndex != -1) {
            this.set_activeTabIndex(this._cachedActiveTabIndex);
            this._cachedActiveTabIndex = -1;

            var activeTab = this.get_tabs()[this._activeTabIndex];
            if (activeTab) {
                activeTab._wasLoaded = true;
                //activeTab._setFocus(activeTab); -- disable focus on active tab in the last TabContainer
            }
        }
        this._loaded = true;
    }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-16T16:04:24.450

This is an old thread, but it never got resolved – here or in any of the other threads I found – and I had the same problem.

I fixed it by putting my javascript in the body element: `onload="scrollTo(0,0);"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T10:03:54.923

您可以在服务器端设置焦点以避免页面跳转。

在 Page_Load 中试试这个：

```
PageUtility.SetFocus(foo); 
```

还要检查您是否正在设置 Page.MaintainScrollPositionOnPostback。

让我知道这是否有帮助。

更新 - 您可以简单地调用 .Focus() 默认情况下您想要成为焦点的任何控件。

例如：YourControlToFocus.Focus()

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-16T16:09:44.697

我有一个类似的问题，但我找到了一个更简单的解决方案。

如果您使用：

```
<asp:toolkitscriptmanager ID="ScriptManager1" runat="server">
          </asp:toolkitscriptmanager> 
```

以及选项卡容器中的更多面板（例如 3 ）：

```
<asp:tabcontainer runat="server" ID="tc1" ActiveTabIndex="0" > 

<asp:TabPanel runat="server" ID="TB1" Height="250" >
<asp:TabPanel runat="server" ID="TB1" Height="250" >
<asp:TabPanel runat="server" ID="TB1" Height="250" > 
```

例如，您可以使用以下属性：

```
 ActiveTabIndex="0" 
```

或者

```
tc1.ActiveTabIndex = 2 'code behind 
```

其中整数是您要关注的选项卡的 ID。

这个对我有用！我希望我能帮助别人！

享受

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-10T10:09:09.427

试试这个。它帮助了我：

```
window.Sys.Application.findComponent('<%=tabContainer.ClientID %>');

tabContainer.set_activeTabIndex(1);  ( //Here set the id of the last tab that is the index of the last tab. Index will start with 0 upto last - 1 as in array.. ) 
```

# c# - Datalogic 条码/重量扫描仪

> ID：10796774
> 
> 赞同：1
> 
> 时间：2012-05-29T09:53:10.567
> 
> 标签：c#, .net, barcode-scanner

谁能告诉我从哪里开始我的编码以便从 C# 中的 OPOS（Datalogic Magellan 设备）加权和条形码扫描中获取数据的任何想法？例如，在这种情况下我应该使用什么库和什么函数。我一无所知，因为我已经花了很多时间在网上寻找答案。甚至没有接近在线。

我不知道任何 api 可用于将 USB 设备的重量和条形码输入到我的 C# 程序中。

我目前正在使用 Datalogic 规模。我尝试了内置的 Windows 阅读器，但它没有从设备中读取任何数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T00:55:52.417

首先，我使用了`Microsoft.PointOfService`可以直接创建与大多数 opos 基础机器的连接的库。并确保您的逻辑设备名称正确！非常非常重要。这不是您在 regedit 中找到的任何普通名称，它必须由您自己在与 opos 机器一起安装的 opos adk 程序中手动定义。

然后，您可以像往常一样在 C# 程序中传递名称。

例如：您在 C# 的 OPOS 程序中将 USB_Scale 设置为您的逻辑设备名称

```
this.myDevice = explore.GetDevice("Scale", "USB_Scale"); 
```

注意：确保您将声明设置为 1000；如果您不这样做，它可能无法正常工作。另外：`this.myScale = ((Scale)explore.CreateInstance(myDevice));`<-这可能会有所帮助~

其余的都是直截了当的。

# git - git pull in hooks/post-receive 失败

> ID：10796776
> 
> 赞同：2
> 
> 时间：2012-05-29T09:53:27.453
> 
> 标签：git, githooks, git-pull, git-post-receive

在服务器上，/home/git/xxx/hooks/post-receive：

```
#!/bin/bash

cd /var/www/xxx
git pull 
```

在服务器上，/var/www/xxx 是这样创建的：

```
cd /var/www
git clone /home/git/repositories/xxx.git 
```

当我在客户端上运行“git push”时，收到以下消息：

```
remote: fatal: Not a git repository: '.' 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-11-08T10:36:44.607

[如此处](http://www.janosgyerik.com/deploying-new-releases-using-git-and-the-post-receive-hook/)所述，问题在于`GIT_DIR`设置`.`为何时调用钩子。

如果您`GIT_DIR`在 post-receive 挂钩中取消设置，它应该可以工作：

```
#!/bin/bash

unset GIT_DIR
cd /var/www/xxx
git pull 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T17:36:52.170

根据您的评论，您希望在将更改推送到 Git 存储库时自动更新网站。试试这个：[http ://www.ekynoxe.com/automated-deployment-on-remote-server-with-git/](http://www.ekynoxe.com/automated-deployment-on-remote-server-with-git/)

请注意，网站根目录 ( `/var/www/xxx`) 本身并不是 Git 存储库；它只是保存工作树。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T09:59:59.133

您缺少拉取的目录，

```
cd /var/www
git clone /home/git/repositories/xxx.git 
```

**上面的命令将在/var/www**下创建一个新目录 为 xxx，前提是您的应用程序名称是 xxx。

现在你需要进入这个新创建的目录，比如，

```
cd /var/www/xxx 
```

现在运行命令“git push”。这应该有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-14T12:52:04.920

存储库文件夹应该是裸存储库。

```
git init --bare 
```

# scala - 如何在 Scala 中为 schema.org 建模？

> ID：10796778
> 
> 赞同：2
> 
> 时间：2012-05-29T09:53:41.550
> 
> 标签：scala, data-modeling, multiple-inheritance, schema.org

[Schema.org](http://www.schema.org)是标记词汇表（用于网络），并根据属性（无方法）定义了许多类型。我目前正在尝试在 Scala 中将该模式的一部分建模为内部模型类，以便与面向文档的数据库 (MongoDB) 和 Web 框架结合使用。

[从LocalBusiness](http://schema.org/LocalBusiness)的定义中可以看出，schema.org 使用多重继承还包括来自“Place”类型的属性。所以我的问题是：**你将如何在 Scala 中为这样的模式建模？**

到目前为止，我提出了两种解决方案。第一个使用常规类来建模单个继承树，并使用特征来混合这些附加属性。

```
trait ThingA {
  var name: String = ""
  var url: String = ""
}

trait OrganizationA {
  var email: String = ""
}

trait PlaceA {
  var x: String = ""
  var y: String = ""
}

trait LocalBusinessA {
  var priceRange: String = ""
}

class OrganizationClassA extends ThingA with OrganizationA {}

class LocalBusinessClassA extends OrganizationClassA with PlaceA with LocalBusinessA {} 
```

第二个版本尝试使用案例类。但是，由于不推荐使用案例类继承，因此我无法如此轻松地对主要层次结构进行建模。

```
trait ThingB {
  val name: String
}

trait OrganizationB {
  val email: String
}

trait PlaceB {
  val x: String
  val y: String
}

trait LocalBusinessB {
  val priceRange: String
}

case class OrganizationClassB(val name: String, val email: String) extends ThingB with OrganizationB

case class LocalBusinessClassB(val name: String, val email: String, val x: String, val y: String, val priceRange: String) extends ThingB with OrganizationB with PlaceB with LocalBusinessB 
```

**有没有更好的方法来建模这个？**我可以使用类似于

```
case class LocalBusinessClassC(val thing:ThingClass, val place: PlaceClass, ...) 
```

但是当然，当需要“地点”时，不能使用 LocalBusiness，例如当我尝试在 Google 地图上呈现某些内容时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T22:12:42.407

最适合您的方法很大程度上取决于您希望如何将对象映射到底层数据存储。

鉴于需要多重继承，可能值得考虑的方法是仅使用特征。这为您提供了具有最少代码重复或样板代码的多重继承。

```
trait Thing {
  val name: String               // required
  val url: Option[String] = None // reasonable default
}

trait Organization extends Thing {
  val email: Option[String] = None
}

trait Place extends Thing {
  val x: String
  val y: String
}

trait LocalBusiness extends Organization with Place {
  val priceRange: String
} 
```

请注意，就像在[schema.org](http://schema.org)中一样， `Organization`extends也是如此。`Thing``Place`

要实例化它们，您需要创建指定所有属性值的匿名内部类。

```
object UseIt extends App {
  val home = new Place {
    val name = "Home"
    val x = "-86.586104"
    val y = "34.730369"
  }

  val oz = new Place {
    val name = "Oz"
    val x = "151.206890"
    val y = "-33.873651"
  }

  val paulis = new LocalBusiness {
    val name = "Pauli's"
    override val url = "http://www.paulisbarandgrill.com/"
    val x = "-86.713660"
    val y = "34.755092"
    val priceRange = "$$$"
  }

} 
```

如果任何字段具有合理的默认值，您可以在 trait 中指定默认值。

~~我将没有值的字段保留为空字符串，但将可选字段设置为 type 可能更有意义`Option[String]`，以更好地表明它们的值未设置。~~你喜欢用`Option`，所以我用`Option`。

这种方法的缺点是编译器在您实例化其中一个特征的每个地方都会生成一个匿名内部类。这可能会给您带来大量`.class`文件。然而，更重要的是，这意味着相同特征的不同实例将具有不同的类型。

***编辑：***

关于如何使用它从数据库加载对象，这在很大程度上取决于您访问数据库的方式。如果您使用对象映射器，您将希望按照映射器期望的方式构建模型对象。如果这种技巧适用于您的对象映射器，我会感到惊讶。

如果您正在编写自己的数据访问层，那么您可以简单地使用[DAO](http://en.wikipedia.org/wiki/Data_access_object)或[存储库](http://martinfowler.com/eaaCatalog/repository.html)模式进行数据访问，将构建匿名内部类的逻辑放在其中。

这只是构造这些对象的一种方法。这甚至不是最好的方法，但它证明了这一点。

```
trait Database {
  // treats objects as simple key/value pairs
  def findObject(id: String): Option[Map[String, String]]
}

class ThingRepo(db: Database) {
  def findThing(id: String): Option[Thing] = {
    // Note that in this way, malformed objects (i.e. missing name) simply
    // return None. Logging or other responses for malformed objects is left
    // as an exercise :-)
    for {
      fields <- db.findObject(id) // load object from database
      name <- field.get("name")   // extract required field
    } yield {
      new Thing {
        val name = name
        val url = field.get("url")
      }
    }
  }
} 
```

还有比这更多的内容（如何识别对象，如何将它们存储在数据库中，如何连接存储库，如何处理[多态查询](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/queryhql.html#queryhql-polymorphism)等）。但这应该是一个好的开始。

# php - 单击图像html后如何调用php脚本？

> ID：10796791
> 
> 赞同：0
> 
> 时间：2012-05-29T09:54:29.500
> 
> 标签：php, html, onclick

我正在使用 html 开发 web 应用程序，我想在单击图像时调用 php 脚本，所以我使用了这段代码

```
 <img src="photo/suppc.png" width="295" height="36" onclick="<?php
 include("D:/EasyPHP-5.3.3.1/www/supcont.php"); 
 ?>" target="fenetreA"   /> 
```

但是在显示图像时（在单击它之前）执行此代码 php

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T09:56:50.310

```
onclick="document.location.href='/supcont.php';return false;" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T09:59:04.453

您需要将图像嵌入到超链接中。尝试这样的事情：

```
<a href="supcont.php" target="fenetreA"><img src="photo/suppc.png" width="295" height="36"/></a> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T09:59:57.387

PHP 是一种服务器端语言。您不能在 HTML 中包含 PHP 脚本

你可以做这样的事情

```
 <img src="photo/suppc.png" width="295" height="36" onclick="supcont.php" target="fenetreA" /> 
```

我认为这是这里唯一的解决方案。

祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T09:57:44.983

PHP 是一个服务器端的东西，所以它不会工作，因为它总是在被推送*之前转换为相应的输出。*如果你想要客户端 UI 脚本，那么你需要使用 Javascript 或其他东西。

理想情况下，您只需将图像包装在链接中并使该链接指向正确的目的地，然后浏览器处理点击。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-23T08:21:34.593

您不能在单击图像时直接调用 php。这可以分两步完成：

1.  单击图像并转到 JavaScript
2.  在js中触发AJAX（例如jquery AJAX）并到达PHP

```
function imageJs() {
  var data = 'your data to pass into PHP';
  $ajax({
    url: 'a.php',
    data: data,
    type: POST,
  });

  success: function (res) {
    alert ('successfully in PHP');
  }
  error: function (err) {
    alert('error reaching PHP');
  }
} 
```

```
<html>
<img src='a.png' onclick=imageJs()>
</html> 
```

# code-coverage - TFS 2010 服务器构建代码覆盖率未显示在 TFS“代码覆盖率”仪表板图表中

> ID：10796794
> 
> 赞同：2
> 
> 时间：2012-05-29T09:54:36.387
> 
> 标签：code-coverage, tfsbuild

我在使用 TFS SharePoint 门户代码覆盖率图表时遇到问题。

我们有一个正在开发 TDD 的 .NET 4 解决方案，因此我们有很好的代码覆盖率，但作为质量检查，我想随着项目的进展监控代码覆盖率。

为此，我有一个测试配置（解决方案中的 .testsettings 文件），它被配置为检测我们的解决方案程序集以进行代码覆盖，以及两个使用该测试定义的团队构建定义。

两个团队构建（一个是 CI 触发器，另一个是夜间调度触发器）工作并生成代码覆盖率数据

![团队建设成果提取](../Images/c663b3ae5cd945ddb76042ae4fec99d2.png)

然而，尽管使用代码覆盖率进行了团队构建，但仪表板“代码覆盖率”excel 报告始终显示 0% 的覆盖率，实际上包含该报告的 excel 电子表格不包含任何数据。这是比较出乎意料的！

**所以我的问题归结为我错过了哪些步骤来使来自团队构建的代码覆盖率数据显示在 Excel 代码覆盖率报告使用的 TFS 数据库中？**

作为旁注，SSRS 报告还显示了构建中的代码覆盖率，似乎只是 Excel 电子表格无法查看数据。

**更新**

当这个过滤器被删除时，问题似乎是过滤器“Is Build Verification Run”我看到了数据。特别是在我的模板（敏捷 v5.0 的 MSF）中，“代码覆盖率”版本应用了一个过滤器，将输出限制为“其他”值。很奇怪。

![在此处输入图像描述](../Images/0bc524b8c14da223e80d63ba1e9873f7.png)

当我回到办公室时，我将尝试基于 MSF Agile 5.0 模板创建一个新项目，看看这个奇怪的过滤器设置是否是其中的一部分，或者我过去对这个项目做过什么！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-30T13:08:16.590

我已经通过从 MSF For Agile Software Developmnet v5.0 模板创建一个新项目来验证这一点。

这就是我认为的“MSF For Agile Software Developmnet v5.0”模板中的一个错误。

创建项目时，用于仪表板中“代码覆盖率”图表的 excel 电子表格有一个*过滤器，将数据限制*为仅来源为“**其他**”的项目，这从具有此值的 TFS 构建中排除了代码覆盖率数据集在多维数据集中“真实”。

**只需清除过滤器或在其中包含“true”即可解决问题并向您显示您的 TFS 构建代码覆盖率数据。**

# dojo - Dojo 数据网格示例缺少样式和无限滚动

> ID：10796795
> 
> 赞同：0
> 
> 时间：2012-05-29T09:54:37.093
> 
> 标签：dojo

我刚刚从 Dojo 网站/示例中复制了[有关 Data Grid](http://dojotoolkit.org/reference-guide/1.7/dojox/grid/DataGrid.html)的代码。

[http://jsfiddle.net/6BtKk/](http://jsfiddle.net/6BtKk/)

但正如您所见，样式似乎缺失了。同样在示例站点演示中，存在无限滚动，我错过了什么？

**更新**：实际上......看起来演示站点现在和我的问题一样......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T10:11:27.137

网格至少需要一个样式表：

```
dojox/grid/resources/Grid.css 
```

如果您使用的是主题，则需要添加另一个 css 以添加以下内容之一：

```
dojox/grid/resources/claroGrid.css
dojox/grid/resources/soriaGrid.css
dojox/grid/resources/tundraGrid.css 
```

使用 claro 主题的更新小提琴：

[http://jsfiddle.net/cswing/F8bDR/](http://jsfiddle.net/cswing/F8bDR/)

通过添加样式，滚动开始显示行。

# javascript - g:javascript 在 Firefox 中工作，但在 chrome 中不工作

> ID：10796803
> 
> 赞同：0
> 
> 时间：2012-05-29T09:55:00.893
> 
> 标签：javascript, grails, gsp

这在 Firefox 中完美地工作，但它在 Chrome 中不起作用。谁能指出我正确的方向？

```
<g:javascript>
    function selectedStatus()
    {
      var index = j("#statusId");
      if(${statusValue} = ${Status.getAllEnums()})
      {
        index.selectedIndex = ${statusValue};
      }
    }
</g:javascript> 
```

我正在将用户状态的值从控制器传递到 gsp 页面。我检查该值是否等于 grails 选择中的值之一，如果是，则将此“当前”值设置为出现在选择框中的值。

这是我的gsp...

```
<g:formRemote name="custom_status" url="[controller: 'traffic', action: 'status']">
  <h4>
    <g:select id="statusId" name="MyStatus" from="${Status.getAllEnums()}" value="${statusValue}" noSelection="['':'Please Select...']" onload="selectedStatus()" onchange="document.getElementById('sub_status').value = ''"/>
  </h4>
    <g:textField name="sub_status" value="${subStatusValue}" />
    <g:submitButton name="submit_status" value="Apply Status" />
  </g:formRemote> 
```

在 Firefox 中选择框会根据需要更改，但在 Chrome 中不会发生更改。

这是生成的 HTML...

```
<form onsubmit="jQuery.ajax({type:'POST',data:jQuery(this).serialize(), url:'/portal/traffic/status',success:function(data,textStatus){},error:function(XMLHttpRequest,textStatus,errorThrown){}});return false" method="post" action="/portal/traffic/status" id="custom_status">
  <h4>
    <select name="status" id="statusId" onload="selectedStatus()" onchange="document.getElementById(&#39;sub_status&#39;).value = &#39;&#39;" >

<option value="">Please Select...</option>

<option value="available" >available</option>

<option value="away" >away</option>

<option value="dnd" >dnd</option>

<option value="unavailable" >unavailable</option>

</select>
  </h4>
    <input type="text" name="sub_status" value="In a meeting" id="sub_status" />
    <input type="submit" name="submit_status" value="Apply Status" id="submit_status" />
  </form>
  <br/> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T15:00:44.980

真的很奇怪为什么`value="${statusValue}"`在这里不起作用。顺便说一句，您的 Javascript 代码可能无效（我不确定您的结果是 JS，但很有可能），所以请尝试以下操作：

```
<g:javascript>
    j(document).ready(function ()
    {
      j("#statusId").val('${statusValue}'); //I guess `j` is your prefix for jQuery, right?
    });
</g:javascript> 
```

并删除`onload="selectedStatus()"`

# jquery - 向每个 jqGrid ajax 调用添加参数

> ID：10796809
> 
> 赞同：1
> 
> 时间：2012-05-29T09:55:19.220
> 
> 标签：jquery, asp.net-mvc, jqgrid

当页面上有一个 jqGrid 时，我想扩展它以传递一个额外的参数。到目前为止我最好的尝试：

```
...
    $('[role=grid]').jqGrid('setGridParam', { 'serializeGridData':MyGridOnBeforeRequest });

    function MyGridOnBeforeRequest (postData) {
        var newPostData = $.extend(postData, {
            specialParam: "foo"
        });
        return $.param(newPostData);
    }
... 
```

我这样做是因为 jqGrid 似乎忽略了您对 jQuery 的 ajax 处理所做的任何更改。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T10:24:46.230

通常，您发布的代码应该可以工作，并且*在下一个网格重新加载*新的代码`serializeGridData`时将被使用。

`serializeGridData`您以发布的方式使用它只是有点奇怪。改用`postData`参数就足够了：

```
var postData = $('#grid').jqGrid('getGridParam', "postData");
$.extend(postData: {specialParam: "foo"}); 
```

此外，在您的原始代码中，您使用`$.extend(postData, {specialParam: "foo"});`哪个*修改*原始`postData`. 这还不错，但总的来说代码

```
function myGridOnBeforeRequest (postData) {
    return $.extend({}, postData, {specialParam: "foo"});
} 
```

甚至

```
function myGridOnBeforeRequest (postData) {
    return $.extend(true, {}, postData, {specialParam: "foo"});
} 
```

会更干净。的用法`$.param`并不是真正需要的。如果你返回一个对象，那么 jQuery.ajax 会`$.param`自动为你调用。

一种更常见的方法是直接使用`postData`看起来像的参数定义网格

```
postData: {
    specialParam: function () { return "foo"; }
} 
```

在您可以在函数中实现更多逻辑的方式中，您可以使用函数主体内部外部代码中的一些变量，或者从页面上现有的控件中获取一些值（有关详细信息，请参见[此处](https://stackoverflow.com/a/2928819/315935)）。在这种情况下，您可以在*不* `specialParam`使用`getGridParam`.

最后一句话。已经从`myGridOnBeforeRequest`（将其与`MyGridOnBeforeRequest`您的问题中的颜色进行比较）的颜色可以看出它将以另一种方式解释。如果函数名称以大写字母开头，则表示与您定义新类的**构造函数**的常用名称转换相对应`MyGridOnBeforeRequest`。您必须将其用作`var test = new MyGridOnBeforeRequest();`：使用`new`. 只是比较`var now = new Date();`。强烈建议持有标准的 JavaScript 名称转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T10:31:21.617

如果它是一些不会改变太多的设置，你可以 `$.jgrid.defaults`使用类似这样的东西将它添加到

```
function getSpecialParam()
{
    return 'foo';
}
$.jgrid.defaults = $.extend($.jgrid.defaults,
    {
        postedData:{
            specialParam:getSpeicalParam
        }
    }); 
```

# excel - Excel图表中的公式

> ID：10796814
> 
> 赞同：0
> 
> 时间：2012-05-29T09:55:41.873
> 
> 标签：excel, graph

我正在 Excel 2007 中创建一个折线图。我想要实现的是在图表数据范围内指定一个公式。

我现在在图表数据范围内拥有的是：

```
=SHEET1!$B$1:$W$1;SHEET1!$B$7:$W$7 
```

`B1,C1,D1,...`这只是使用和`B7,C7,D7...`值创建一个折线图。

但是，我想通过将第二个数据`($B$7:$W$7)`划分为另一行来操作第二个数据，然后在图中使用结果。所以结果应该是这样的：

`=SHEET1!$B$1:$W$1;SHEET1!($B$7:$W$7/$B$8:$W$8)`

此公式返回错误。我需要 B7 除以 B8，然后 C7 除以 C8，依此类推。并且计算的结果应该在图表中使用。

我知道我可以轻松地为我的计算创建一个新行并用它创建一个图表。但我想知道在创建图表时是否可以即时进行计算。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T18:54:14.523

使用工作表中的另一列来计算要绘制的值。Excel 擅长绘制工作表数据。它不能绘制除链接以外的公式。虽然您可以定义命名范围（命名公式），但它们编写起来很棘手，调试和维护也很棘手。

# c# - LINQtoSQL LEFT JOIN on 1 to 1 关系，基于方法

> ID：10796815
> 
> 赞同：0
> 
> 时间：2012-05-29T09:55:42.723
> 
> 标签：c#, linq-to-sql, lambda, entity-framework-4.1

假设我在 1 到 1 或 0 关系上有 2 个表，如下所示：

```
Invoice: ID, Date, OrderID
Order:   ID, Date, Notes (string) 
```

就 LINQtoSQL 而言，我的 INNER JOIN 为：

```
customer
.invoices
.OrderByDescending(i => i.Date)
.Join(context.Orders,
    invoice => invoice.OrderID,
    order => order.OrderID,
    (invoice, order) => new
    {
        invoice = invoice,
        OrderNotes = order.Notes
    })
.ToList() 
```

在内连接中排除的所有值都是`WHERE Invoice.OrderID NOT IN (SELECT OrderID FROM Order)`，我没有检查会发生什么`WHERE Invoice.OrderID IS NULL`

所需的查询是：

```
SELECT i.*, o.Notes AS OrderNotes 
FROM 
    Invoice AS i
LEFT OUTER JOIN 
    Order AS o
ON i.OrderID = o.OrderID 
```

我知道应该切换 fk，但我无权更改数据库的结构。

我不知道如何产生 LEFT OUTER JOIN 效果。环顾四周，我只找到了 1 到多个 LEFT JOIN 的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T10:01:51.833

msdn 上的优秀示例

[http://msdn.microsoft.com/en-us/library/bb397895.aspx](http://msdn.microsoft.com/en-us/library/bb397895.aspx)

应该是这样的

```
from i in invoice
join o in order on i.OrderID = o.OrderID into result
from r in result.DefaultIfEmpty()
select new {i.Id, i.someProperty , Notes = (r== null ? String.Empty : r.Notes) }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T10:10:42.273

试试这个：

```
var query = from invoice in context.Invoices
                    join order in context.Orders on new { invoice.OrderId } equals new { order.Id } into groupedJoin
                    from grOrder in groupedJoin.DefaultIfEmpty()
                    select new { Invoice = invoice, Order = grOrder }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T01:55:20.213

感谢所有的建议，我已经弄清楚了如何以基于方法的语法来做到这一点。

```
customer
.invoices
.OrderByDescending(i => i.Date)
.GroupJoin(context.Orders,
    invoice => invoice.OrderID,
    order => order.OrderID,
    (invoice, orders) => new
    {
        invoice = invoice,
        OrderNotes = orders.SingleOrDefault()==null?"":orders.SingleOrDefault().Notes
    })
.ToList() 
```

关键是 GroupJoin 即使它看起来像一对多关系 JOIN 它的工作方式是 SQL

# python - 如何通过正则表达式捕获特定标签内的所有标签？

> ID：10796817
> 
> 赞同：1
> 
> 时间：2012-05-29T09:55:59.493
> 
> 标签：python, regex

例如，有这样的代码

```
<tag1 blablablah>sometext<i>sometext</i>sometext<i>sometext</i>sometext</tag1> 
```

我想做的就是让它像

```
<tag1 blablablah>sometext<XXX><i></XXX>sometext<XXX></i></XXX>sometext<XXX><i></XXX>sometext<XXX></i></XXX>sometext</tag1> 
```

我正在使用正则表达式进行搜索（它也适用于 Notepad++ 和 Python 的 re.compile 函数）

```
(<tag1[^>]*>.*?)(<[^>]*>.*?)(.*?</tag1>) 
```

并用于替换（它也适用于 re.sub）

```
\1<XXX>\2</XXX>\3 
```

但是它只发现并更改了第一次出现的事件，而不是全部更改...

```
<tag1 blablablah>sometext<XXX><i></XXX>sometext</i>sometext<i>sometext</i>sometext</tag1> 
```

谁能帮我这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T09:58:15.930

**尝试这个**

```
<((?:[a-z]+:)?[a-z]\w+)\b[^<>]+?>(.+)</\1> 
```

**解释**

```
"
<              # Match the character “&lt;” literally
(              # Match the regular expression below and capture its match into backreference number 1
   (?:            # Match the regular expression below
      [a-z]          # Match a single character in the range between “a” and “z”
         +              # Between one and unlimited times, as many times as possible, giving back as needed (greedy)
      :              # Match the character “:” literally
   )?             # Between zero and one times, as many times as possible, giving back as needed (greedy)
   [a-z]          # Match a single character in the range between “a” and “z”
   \w             # Match a single character that is a “word character” (letters, digits, and underscores)
      +              # Between one and unlimited times, as many times as possible, giving back as needed (greedy)
)
\b             # Assert position at a word boundary
[^<>]          # Match a single character NOT present in the list “&lt;>”
   +?             # Between one and unlimited times, as few times as possible, expanding as needed (lazy)
>              # Match the character “&gt;” literally
(              # Match the regular expression below and capture its match into backreference number 2
   .              # Match any single character that is not a line break character
      +              # Between one and unlimited times, as many times as possible, giving back as needed (greedy)
)
</             # Match the characters “&lt;/” literally
\1             # Match the same text as most recently matched by capturing group number 1
>              # Match the character “&gt;” literally
" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T16:50:59.277

try changing your pattern like this

```
(<tag1[^>]*>).*?(<[^>]+>).*?(</tag1>) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T12:25:40.550

问题是避免第一个和最后一个标签。如果你把它们分开，那么它很简单：

```
s = '<tag1 blablablah>sometext<i>sometext</i>sometext<i>sometext</i>sometext</tag1>'
start, end = s.find('>') + 1, s.rfind('<')
s_list = [s[:start], s[start:end], s[end:]]
s_list[1] = re.sub(r'(<[^>]*>)', r'<XXX>\1</XXX>', s_list[1])
print ''.join(s_list) 
```

不过，它不是单行的。

或者，您可以这样做：

```
print re.sub(r'([^(^<)])(<[^>]*>(?!$))', r'\1<XXX>\2</XXX>', s) 
```

请注意，这仅在您的最外层标签位于字符串的开头和结尾时才有效。

# jmeter - jMeter 出错后再次调用请求

> ID：10796818
> 
> 赞同：6
> 
> 时间：2012-05-29T09:56:04.657
> 
> 标签：jmeter, load-testing

运行负载测试时会出现不变的问题，任何 HTTP 请求都可能超时，或者服务器可能会返回自定义错误页面。我有一个可爱的 jMeter 脚本，它运行时不会发生任何错误，这就是在低使用率下发生的情况。

如何修改此脚本，以便在发生错误时脚本重新运行导致错误的请求，直到它没有收到错误？例如，我有一个登录请求，如果失败我不想继续，我想继续尝试直到登录成功。我也不想再次启动脚本，因为如果登录后页面失败，我不想再次登录。

我查看了线程组中的“继续下一个循环”，但我不知道它实际上做了什么，它是否重新开始测试？它会跳转到下一个循环逻辑控制器吗？我必须用循环包围我的所有请求吗？

谢谢保罗

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T10:46:41.380

如果任何一个采样器返回 false，则继续下一个循环将重新启动整个线程组。

至于重试请求，您可以使用 While 控制器来实现。如果你有一个正则表达式提取器寻找一个只会在成功时出现的值——比如“登录成功”，然后告诉 While 控制器循环 while myvar != “some text” 你会得到你想要的。您显然想在此循环中使用计时器。

但实际上，如果您的 AUT 在负载下出现错误，您可能最好花费精力修复应用程序，而不是测试。如果它们是真实的、真正的应用程序错误，那么进行包含大量错误的测试运行是完全有效的——你绝对不想掩盖它们。

# asp.net - 如何根据与该文本框关联的属性值设置 Html.TextBoxFor 的禁用属性

> ID：10796819
> 
> 赞同：0
> 
> 时间：2012-05-29T09:56:15.577
> 
> 标签：asp.net, asp.net-mvc-3

我试着[在这里](https://stackoverflow.com/questions/9086104/mvc3-conditionally-disable-html-textboxfor)使用这个例子

```
<%: Html.TextBoxFor(model => model.MyList[0].FirstName, model.MyList[0].IsEnabled ? (object)new { disabled = "disabled" } : new { })%> 
```

但这给了我一个错误

> “名称模型在当前上下文中不存在”

有没有办法在 vanilla asp.net MVC 3 中不使用 if else 条件来做到这一点？

谢谢你的时间...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T10:49:41.740

我解决了这个问题：我应该使用传递给视图的实际模型。注意 Caps 在第二个参数上的变化。

```
<%: Html.TextBoxFor(model => model.MyList[0].FirstName, Model.MyList[0].IsEnabled ? (object)new { disabled = "disabled" } : new { })%> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T10:10:51.957

快速检查此错误消息表明您的 web.config 可能已损坏。

[MVC3 的当前上下文中不存在名称“模型”](https://stackoverflow.com/questions/6389055/the-name-model-does-not-exist-in-current-context-in-mvc3)

# facebook-graph-api - Facebook News.Reads 操作

> ID：10796820
> 
> 赞同：0
> 
> 时间：2012-05-29T09:56:17.430
> 
> 标签：facebook-graph-api

News.reads api 失败。

我使用 curl php。错误代码：

> {"error":{"message":"(#100) Action Type news:Read 没有被批准，所以app xxxx只能发布给app的管理员、开发者和测试者。用户xxxx不是这些角色之一.","type":"OAuthException","code":100}}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T11:00:43.093

阅读错误信息。它表示 Facebook 尚未批准您的`Read`操作，因此不会将其添加到 Facebook，除非用户是应用程序的管理员、开发人员或测试人员。

尝试以应用程序的管理员/开发人员身份发布读取操作。

# python - 调用 sys.exit() 和抛出异常的区别

> ID：10796821
> 
> 赞同：12
> 
> 时间：2012-05-29T09:56:22.073
> 
> 标签：python, exception-handling

`sys.exit()`在 Python 中调用和抛出异常有什么区别？

假设我有一个 Python 脚本，它执行以下操作：

1.  打开一个文件
2.  读行
3.  关闭它

如果文件不存在或`IOException`在运行时被抛出，以下哪个选项更有意义？

1.  没有异常/捕获异常，如果发生异常，它会失败（无论如何这是预期的行为）
2.  排除/捕获异常，记录错误消息，自己抛出自定义异常，失败。
3.  在一个`except IOException`块中，退出并显示错误消息，例如`sys.exit("something is wrong")`

选项 3 是否会终止进程，而 1 和 2 不会？鉴于 Python 没有像 Java 这样的已检查异常（我真的是 Java 开发人员^_^），处理 Python 异常的最佳方法是什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-29T10:02:10.230

`sys.exit`引发 a`SystemExit`本身，因此从纯粹的技术角度来看，自己引发异常或使用`sys.exit`. 是的，您可以像任何其他异常一样捕获`SystemExit`异常并忽略它。

所以这只是更好地记录你的意图的问题。

PS：请注意，这也意味着这`sys.exit`实际上是一个非常糟糕的误称——因为如果你`sys.exit`在线程中使用，只有线程被终止，没有别的。这可能很烦人，是的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-02-01T20:40:59.293

有一个细微的差别：

```
import sys

try:
    sys.exit()
except:
    print("Caught") 
```

该`except`语句捕获异常，而：

```
import sys

try:
    sys.exit()
except Exception:
    print("Caught") 
```

退出没有错误。`SystemExit`异常 (like `KeyboardInterrupt`) 不会被 捕获`except Exception`，而是被`except`单独捕获。

因此，如果调用者捕获了所有内容`except:`（这是不好的做法），您`sys.exit`将不会退出，但会被视为“错误”。这就是为什么`except Exception:`最好确保捕获除 CTRL+C 和系统退出（属于`BaseException`该类）之外的所有异常。

# sql - 在 sql 中，如何从具有 from 和 thru 时间戳的记录中选择随机时间

> ID：10796826
> 
> 赞同：2
> 
> 时间：2012-05-29T09:56:31.660
> 
> 标签：sql, postgresql, timestamp, intervals

有记录，每个都有

```
pk_id  serial primary key,
key varchar(20),
...
from_ts timestamp(0) not null,
thru_ts timestamp(0) not null, 
```

希望从由`from_ts`to确定的间隔中选择随机时间`thru_ts`

间隔两小时的记录被选中的机会应该是间隔一小时的记录的两倍。

具有相同键的记录不相交 - 没有重叠时间

希望选择`pk_id`和随机时间戳。

```
select pk_id, ???
from rcds
where key = 'abc' 
```

使用`postgres`, 所以 ANSI 加`interval`数据类型

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T11:51:02.940

```
create table rcds (
    pk_id  serial primary key,
    key varchar(20),
    from_ts timestamp(0) not null,
    thru_ts timestamp(0) not null
)
;
insert into rcds (key, from_ts, thru_ts) values
('abc', '2012-01-01 12:34', '2012-01-02 13:47'),
('abc', '2012-01-03 10:52', '2012-01-07 18:23')
;

with r as (
    select sum(extract(epoch from thru_ts - from_ts)) * random() as r
    from rcds
)
select 
    pk_id,
    from_ts + (
        ((select r from r) - coalesce(lag(ts, 1) over (order by from_ts), 0))
        ::text || ' seconds'
        )::interval as random_ts,
    from_ts
from (    
    select 
        pk_id, 
        sum(extract(epoch from thru_ts - from_ts)) over (order by from_ts) as ts,
        from_ts
    from rcds
    where key = 'abc'
) s
where (select r from r) <= ts
order by from_ts
limit 1
; 
```

我假设时间戳是按 pk_id 排序的。如果不是，那么只需将排序更改为 from_ts 列。

* * *

将其更改为按 from_ts 列排序

* * *

新版本由于对问题的更好理解。

# parsing - 如何从 Haskell 中的 [String] 概念列表轻松构建 RDF 文件？

> ID：10796837
> 
> 赞同：1
> 
> 时间：2012-05-29T09:57:04.983
> 
> 标签：parsing, haskell, rdf

我正在从程序的源代码自动构建本体。为了让事情变得更简单，我只对 C 代码源中的函数名称和函数调用感兴趣。所以我的概念是`functions name`，事实上，这些概念之间的关系是`function call`。

这意味着，在一个简单的 Haskell 脚本中，我可以通过解析来检索所有函数名称和调用。

现在这是我的问题，是否有任何**简单**高效**的**haskell 包可以轻松转换`[String]`设计良好的`RDF`文件中的简单概念列表？

感谢您的回复！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T11:11:26.847

超出我的深度，但 Graham Klyne 和其他人创建了一个名为[Swish](http://hackage.haskell.org/package/swish)的包，其中包括 RDF 输出功能。

它不包括`RDF/XML`输出，但确实包括`N-Triples`和`Turtle`支持，这通常足以实现互操作性。

（如果您关心，`RDF/XML`您可以随时使用 rapper 或 jena 命令行工具进行转换）

# asp.net - 在调试期间修改 ASP.NET 会话？

> ID：10796846
> 
> 赞同：0
> 
> 时间：2012-05-29T09:57:30.917
> 
> 标签：asp.net, visual-studio, debugging, session, immediate-window

在调试 ASP.NET 页面期间是否可以修改值、键甚至清除会话？
我在即时窗口中尝试了以下操作（按呈现的顺序），但没有改变 Session 对象：

```
Session.Clear()
Expression has been evaluated and has no value

Session.Keys
{System.Collections.Specialized.NameObjectCollectionBase.KeysCollection}
    Count: 12

Session.Clear()
Expression has been evaluated and has no value

Session.Keys[0]
"user_id"

Session.Abandon()
Expression has been evaluated and has no value

Session["user_id"]
3 
```

编辑：好的，看起来我*有时*可以改变它。这是非常令人费解的。如果有人知道为什么有时会失败，我会很感激拥有这些知识。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T10:00:21.727

您*可以*在调试模式下使用中间和命令窗口更改会话。
只需确保您没有任何代码（例如，属性的获取器、打印“消息”之类的流氓跟踪点`{HttpContext.Current.Session["some_key"] = [some value];}`等），在您进行更改后重置值。

（学过的知识。）

# c# - 仅将年份数据库加载到 datetimepicker 年份 c#

> ID：10796848
> 
> 赞同：-1
> 
> 时间：2012-05-29T09:57:39.297
> 
> 标签：c#, forms, datagridview, datetimepicker

我有两种形式。form1 显示书籍数据，而 form2 用于编辑书籍数据...在 form2 中，我有自定义格式“yyyy”（仅限年份）的 datetimepicker 来更新书籍出版年份......所以当我加载表单 2 时 datetimepicker 不显示该书的出版年份，但显示的是 2012 年（当年）...

txttahun（是日期时间选择器名称）

这是我在 form2 加载并显示来自 form1 的数据时的代码

```
DateTime elshose;
        bool elshoseOkay;
        elshoseOkay = DateTime.TryParse(Data["tahunterbit"].ToString(), out elshose);
        if (elshoseOkay)
        {
            txttahun.CustomFormat = "yyyy";
            txttahun.Format = DateTimePickerFormat.Custom;
            txttahun.Text = elshose.Year.ToString();
        }
        this.TopMost = true;
        txtkode.Text = Data["kodebuku"].ToString();
        txtkode1.Text = Data["kodebuku"].ToString();
        txtjudul.Text = Data["judulbuku"].ToString();
        txtpengarang.Text = Data["pengarang"].ToString();
        txtkategori.Text = Data["namakategori"].ToString();
        txtpenerbit.Text = Data["penerbit"].ToString();
        //txttahun.Text = Data["tahunterbit"].ToString();
        txtstok.Text = Data["stokbuku"].ToString();
        tglter.Text = Data["tglpenerimaan"].ToString(); 
```

那么如何让 datetimepicker 显示我输入的书籍出版年份？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T10:26:10.743

可能在您的情况下 DateTime.TryParse 将始终失败。调试并查看您的应用程序是否到达您为其设置 Text 的行`txttahun`

如果您使用`dateTimePicker.Text`属性，则需要提供正确的日期时间字符串。否则它将失败。

因为`elshose`是 DateTime 对象，您可以直接将其分配为`dateTimePicker1.Value`

```
dateTimePicker1.Value = elshose; 
```

或者

```
txttahun.Text = elshose.ToString(); 
```

运行下面的代码并检查你一年得到的结果。

```
 DateTime elshose;
    txttahun.CustomFormat = "yyyy";
    txttahun.Format = DateTimePickerFormat.Custom;
    if (DateTime.TryParse(Data["tahunterbit"].ToString(), out elshose))
    {
        txttahun.Text = elshose.ToString();
    }else
    {
       // this line only for testing....
       txttahun.Text = DateTime.Today.AddYears(-5).ToString();
    } 
```

# powershell - PowerShell 和 Outlook - 不一致

> ID：10796849
> 
> 赞同：2
> 
> 时间：2012-05-29T09:57:44.693
> 
> 标签：powershell, automation, outlook, outlook-2007

我对以下 PowerShelll 脚本有疑问：

```
$mail = $outlook.CreateItem(0) 
$mail.To = "aaa@gmail.com"
$mail.Subject = "PowerShell Test 1"
$mail.Body = "Body..."
$mail.HTMLBody = "This is test!"   
$mail.Attachments.Add("C:\Test.txt")    
$mail.save()

$mail = $outlook.CreateItem(0) 
$mail.To = "aaa@gmail.com"
$mail.Subject = "PowerShell Test 2"
$mail.Body = "Body..."
$mail.HTMLBody = "This is test!"   
$mail.Attachments.Add("C:\Test.txt")    
$mail.save() 
```

当 Outlook 已经启动时，脚本工作正常 - 正如预期的那样，我在草稿文件夹中收到两封电子邮件。

当 Outlook 未启动时，Outlook 首先询问用户权限，但最后我在草稿中只收到第二封电子邮件，第一封电子邮件丢失。

有没有人遇到过这个问题，有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-06T18:57:49.850

我和 Ocaso 有同样的问题，第一封电子邮件被发送到收件箱，第二封被发送到草稿。我通过为 Outlook 设置会话解决了这个问题：

```
$outlook = new-object -com outlook.application
$session = $outlook.Session
$session.Logon() 
```

会话基本上设置了应用程序（在这种情况下为 Outlook）可以接收或设置数据的时间段。通过调用 session.Logon()，我们正在实例化 Outlook 可以保存数据/电子邮件的会话或时间段。下面的文章在解释会话方面做得更好：

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms714451%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms714451%28v=vs.85%29.aspx)

谢谢

# java - 为所有对测试生成测试

> ID：10796852
> 
> 赞同：2
> 
> 时间：2012-05-29T09:57:52.200
> 
> 标签：java, unit-testing, tdd, automated-tests

我有一个简短的（Java）方法，其中包含几个执行一些非直观计算的参数。为这种方法编写单元测试以实现代码覆盖是微不足道的，但测试并未涵盖该方法的细微之处。我正在寻找一个测试框架或其他一些工具，它允许我根据我为参数定义的分区对此方法进行所有对（所有元组）测试。

例如，假设我有以下方法：

```
int foo(int begin, int end, int first, int last) {
    ...
} 
```

我已经知道一些可能在外部强制执行的约束：

```
begin <= end
first <= last 
```

我想根据我自己对参数的了解来定义明确的等价关系。例如：

```
begin == MIN
begin > MIN && begin < 0
begin == 0
begin == 1
begin > 1 && begin < MAX
begin == MAX 
```

我还想定义涉及多个参数的等价关系。例如：

```
begin + 1 < end
begin + 1 == end
begin == end 
```

`begin == 0`要测试的组合是从每个等价关系（例如，从第一关系和第二关系）中选择等价类`begin + 1 < end`，使得约束是可满足的。[顺便说一句，我意识到可满足性是 NP 完全的。我愿意接受它，给定包含一组相对较小的约束的组合。] 使用多个参数，组合的数量变得笨拙。为每个组合手动编写测试并找到满足结果约束集的参数是乏味且容易出错的。

我正在寻找一个可以自动测试每个组合的测试框架，或者一个可以为每个逻辑一致的组合生成测试的测试生成器（由你真正插入的不变检查）。[这与CodePro](https://developers.google.com/java-dev-tools/codepro/doc/features/junit/test_case_generation)等测试生成工具不同，后者从实际实现中生成测试用例。实际上，我想为方法的接口而不是它的实现生成测试。这不仅可以让我在方法实现 (TDD) 之前编写测试，而且可以确保即使在后来的修改之后也能对方法进行全面测试。

这样的工具是否存在，或者可以将某些东西拼凑在一起？或者也许我以错误的方式接近这个，你有另一个建议......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T13:45:43.147

有关这方面的一些想法，请参阅[David Saff](http://saffgreenbar.blogspot.com/)关于[理论测试的工作。](http://dspace.mit.edu/handle/1721.1/40090)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T10:33:24.200

在每个最内层循环迭代中调用测试方法的简单嵌套循环不符合要求（或至少大部分符合要求）？

就像是：

```
int[] ends = new int[] {-50, -10, -1, 0, 1, 50, MIN, MAX};
for (int end : ends) {
    int[] begins = new int[] {end - 10, end - 1, end, MIN, MAX};
    for (int begin : begins) {
        if (begin <= end && begin >= MIN && begin <= MAX) {
             testFoo(begin, end);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T11:14:51.100

您可以在测试框架之外使用工具吗？如果是这样，我使用[James Bach 的 AllPairs](http://www.satisfice.com/tools.shtml)效果很好。还有[Hexawise](http://hexawise.com/)。

如果您不知道，[http](http://pairwise.org) ://pairwise.org是阅读成对和组合测试和工具的好地方！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-08-30T14:27:42.660

如果您仍然对在 JUnit 框架下执行组合测试的库感兴趣。我最近实现了一个库“JCUnit”，它确实做到了。

它在 JUnit 下生成测试用例并使用它们运行测试方法。

[http://dakusui.g​​ithub.io/jcunit/](http://dakusui.github.io/jcunit/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-29T11:41:30.273

我可能会建议，如果您对算法进行了 TDD，那么您可能已经有足够的测试覆盖率。如果随后有人进来并更改算法，您应该会看到至少一个原始测试中断。如果你有一些边缘条件要测试，你可以写几个，但是如果这些边缘不够有趣，一旦你添加它们就会变成红色，那么它们可能不够有趣，无法保留和复制现有的测试. 冗余测试的价值较低，我倾向于删除它们。

# cocos2d-iphone - CCLayerColor好奇的背景外观

> ID：10796853
> 
> 赞同：0
> 
> 时间：2012-05-29T09:58:04.080
> 
> 标签：cocos2d-iphone, cclayer

我从 CCLayerColor 继承了一个名为 FinishedLevelLayer 的类，并声明了一个空的 init。在我的课堂上我声明了一个 CCMenu，但是当我显示菜单时，我得到了一个奇怪的黑色背景。背景不是全屏。我怎样才能避免这种情况？

另外，我尝试为菜单设置动画（使其淡入），但它不起作用。这是此的代码：

```
 finishMenu.visible = true;
        [finishMenu setOpacity:0];
        id fade = [CCFadeIn actionWithDuration:0.35f];
        id sec = [CCSequence actions:fade, nil];
        [finishMenu runAction:sec]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T10:58:00.923

你在“空初始化”下是什么意思？如果您的类是 CCLayerColor 的子类，请使用 layerWithColor: 方法创建它的实例。您的菜单中有哪些项目？

# iphone - 电话回拨网址：

> ID：10796856
> 
> 赞同：0
> 
> 时间：2012-05-29T09:58:13.870
> 
> 标签：iphone, telephony

我正在使用`tel:{phone-number}`从我的应用程序发起呼叫。

我想知道是否可以为我的应用程序设置回调 url，以便一旦通话结束，我的应用程序就会再次启动（恢复）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T12:00:15.883

不确定是否使用回调，但您可以使用 UIWebView 在不离开应用的情况下拨打电话。在这种情况下`escapedPhoneNumber`是一个`NSString`包​​含您要呼叫的号码：

```
NSURL *telURL = 
[NSURL URLWithString:[NSString stringWithFormat:@"tel://%@", 
                        escapedPhoneNumber]];

// using a UIWebView here allows us to make a call without leaving the App
UIWebView * callWebview = [[UIWebView alloc] init];
[self.view addSubview:callWebview];
[callWebview loadRequest:[NSURLRequest requestWithURL:telURL]]; 
```

# c++ - 不使用外部库的稀疏向量实现建议

> ID：10796862
> 
> 赞同：6
> 
> 时间：2012-05-29T09:58:29.020
> 
> 标签：c++, data-structures, sparse-matrix

在我当前的项目中，我必须对一些事情使用稀疏向量。但是，由于我不负责这个项目，所以我不能使用我想要的任何外部库。我只有 STL 和 OpenCV 可用。

我已经查看了几个 stackoverflow 回答的问题，但它们要么[专注于特定方法](https://stackoverflow.com/q/1386075/884412)，而是在专门处理稀疏向量时[比较有限数量的方法 (2) 和外部库。](https://stackoverflow.com/q/2808437/884412)实现[稀疏矩阵](https://stackoverflow.com/questions/4306/https://stackoverflow.com/q/4306/884412)也有一些很好的想法。

我想要的是*一个稀疏向量*（索引总是一维的，数据与这个问题无关）。我想要的东西不会是一个单独的项目来实现，但可以用于不仅仅是演示目的（例如，我想达到一个不错的速度而不是太多的内存开销），并希望重新 -以后用。我考虑过的选项包括：

*   根据我的需要调整[SparseMat](http://opencv.willowgarage.com/documentation/cpp/basic_structures.html#sparsemat)的*OpenCV*实现
*   使用 a`std::map`来存储值（或者可能制作一个非常简单的包装器，在索引零元素的情况下将返回默认值）
*   使用我可以在元素`std::vector< std::pair < int , data_type > >`中存储索引和数据的地方`std::pair`

对于作为稀疏向量的通用用途，这些解决方案中的任何一个是否更好/更差？我知道每件事的每一种方法都有其起伏，但非常感谢关于选择哪种方法的有争议的建议。此外，如果有人认为他有更好的建议，*推荐一种我没有考虑过的方法将非常受欢迎。*

* * *

在我的具体情况下的用法如下：

*   向量在创建后很可能不会被修改（现在我认为没有任何必要，但我不能保证 100% 它不会出现）
*   预计最常见的操作是两个这样的向量的*点积*（因此，或多或少地以线性顺序方式访问元素）
*   我现在可以预见的唯一查找是（也许）检查天气某个元素是否为零元素
*   预计会有大约 500 个非零元素
*   简而言之，大多数时候稀疏向量将用作向量（多维点）的*数学概念，而无需单独检查每个坐标*

尽管如此，正如我在最初的问题中所写的那样，我想要关于通用稀疏向量实现的建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T10:12:22.850

我相信`std::map`会给你最好的结果。`SpareseMat`，我不知道，但在你提到的另外两种方法中，`std::map`会给你`O(log(n))`查找以及`O(log(n))`插入和删除。然而，`vector`需要搜索其所有数据（因此它具有`O(n)`查找功能）。它有`O(1)`插入，但有`O(n)`移除。我的猜测是你会有很多查找，所以很可能`std::map`对你更好。

根据您的应用程序，您可能希望`vector`在结构的初始创建期间使用该方法，然后`map`在开始使用它时将其转换为两全其美（但通常情况并非如此，例如在以下情况下你有重复的索引）。

除此之外`hash`，它*应该*给你`O(1)`一切，但实际上可能不会，查找`O(log(n))`是你所希望的最好的。您可能会想出一个可以二进制搜索的向量，或者基于通过比较搜索数据的任何其他方法，但最终它们都会`O(log(n))`如此，所以您不妨使用 easy-already-done `std::map`。

* * *

**更新**：根据您问题的更新，这表明*向量在创建后很可能不会被修改，*并且*最常见的操作预计是点积*，我建议如下：

首先，使用您自己建议的成对向量。在创建过程中，`push_back`您只需简单地获得`O(1)`性能。¹之后，您可以对向量进行排序。点积将非常简单²：

```
int dot = 0;
unsigned int index_v1 = 0, index_v2 = 0;
while (index_v1 < v1.size() && index_v2 < v2.size())
    if (v1[index_v1].first == v2[index_v2].first)
        dot += v1[index_v1++].second * v2[index_v2++].second;
    else if (v1[index_v1].first < v2[index_v2].first)
        ++index_v1;
    else
        ++index_v2; 
```

*检查某个元素是否为零元素*将是一个简单的二进制搜索，检查是否可以找到该元素（`O(log(n))`性能）。

鉴于您将使用此结构作为一个点，我相信将其保留为向量会更好。您可能希望稍后进行叉积或其他几何运算。

*关于您可能*需要不时在向量中插入一些东西的事实，*那么*您必须将它插入到位（因此向量保持排序）。性能会是`O(n)`，但由于它不经常发生，所以它不应该是一个问题。

¹除非你有数以百万计的这些向量，`O(1)`并且`O(log(n))`for`n ~= 500`不应该真正产生任何明显的差异。

²您当然也可以使用 a`map`并在其上使用迭代器按索引顺序进行点积。`std::map`如果使用可以让您到达下一个节点[的线程树](https://en.wikipedia.org/wiki/Threaded_binary_tree)，性能将相同`O(1)`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T10:20:35.910

**吻**

从最简单的解决方案开始，即包装`std::map<size_t, YourData>`成特定的稀疏向量结构：

```
template <typename V>
class SparseVector {
public:

private:
    std::map<size_t, V> specificValues;
    V defaultValue;
}; 
```

这`map`将在所有用例（查找/插入/更新）中提供良好的默认性能，并且使用自定义类意味着如果您需要更改为另一个实现，则无需更改客户端源，只需重新编译即可。

# ipad - 如果存在键盘，则 UIPopovercontroller 的高度会降低。

> ID：10796868
> 
> 赞同：1
> 
> 时间：2012-05-29T09:58:39.967
> 
> 标签：ipad, uipopovercontroller

我正在使用 UIPopover 控制器在 ipad 上显示某种菜单。它的高度约为 700 像素。即使键盘可见，弹出框在纵向模式下看起来也很好。现在，如果我将 ipad 旋转到横向模式，键盘可见弹窗高度会降低。当键盘可见时，有什么方法可以显示完整的弹出窗口。

如果我将它旋转到横向模式，如果键盘是可见的，当我打开这个弹出框时，它会从底部切开，因为高度为 700 px

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T07:09:05.410

有一种方法可以通过隐藏键盘来显示完整的 popOver。

```
 [self.view endEditing:YES]; 
```

# javascript - javascript 或 jquery：找出页面是否使用 Internet Explorer 对象打开的天气？

> ID：10796869
> 
> 赞同：0
> 
> 时间：2012-05-29T09:58:48.407
> 
> 标签：javascript, jquery, internet-explorer

我们公司的网站有很多页面，其中一些页面可以在我们的桌面应用程序中使用 Internet Explorer 对象打开。我想知道是否有任何方法可以确定页面是用外部浏览器打开的还是用 IE 对象打开的？

请注意，我们希望使用页面 aad 中的一些代码来检测这一点，我们还希望将 ie 对象请求与外部 IE 请求分开。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-02T10:15:20.000

您可以检查`$.browser.msie`用于检测页面是否使用 Internet Explorer 打开。这将`true`在使用 Internet Explorer 打开页面时返回，然后您可以执行您的任务。

# javascript - 可拖放列表

> ID：10796871
> 
> 赞同：3
> 
> 时间：2012-05-29T09:59:01.833
> 
> 标签：javascript, jquery, jquery-ui, drag-and-drop, jquery-ui-draggable

我的网站上有一个侧面固定选项卡，当单击它时会显示菜单。在这个菜单上，我有一个带有图像的列表。

我想要实现的是用户可以将图像拖到我网站的主体上，然后将其移动并重新定位到他们想要的任何位置 - 我在实现这一目标方面没有任何困难，并且在使用可拖动的 ui 之前让它工作可丢弃。

但是我遇到的问题是实现以下目标：

当从菜单上的列表中将图像拖到主体上时，我希望将图像的“克隆”保留在菜单上，以便可以将同一图像多次拖到主体上，从而在主体上产生许多相同的图像背景。

我希望能够折叠/关闭包含图像列表的菜单作为网页左侧的固定选项卡回到其原始位置。-我可以实现这一点，我遇到的问题是当我关闭菜单，我放置在页面主体上的所有拖放图像都根据菜单移动移动位置，我希望它们保持在我拖放它们的位置，无论菜单是打开还是关闭.

我也想在菜单上有多个图像，但一次只显示 4 个，因此当用户单击左侧按钮和右侧按钮 div 时，会显示更多图像。

最后，我在菜单上有一个名为 clear 的按钮，单击该按钮会删除身体上所有拖动的图像（干净的石板）。

我的html是：

```
<div id="work-slide-menu">
<div id="work-slide-menu-tab">
<a href="#/!"></a>
</div>
<div id="work-slide-menu-content">
<span class="button left"></span><span 
<ul>
<li><img class="sticker-picker" src="<?php bloginfo('stylesheet_directory'); ?>/images/cow.png" alt="" /></li>
<li><img class="sticker-picker" src="<?php bloginfo('stylesheet_directory'); ?>/images/chicken.png" alt="" /></li>
<li><img class="sticker-picker" src="<?php bloginfo('stylesheet_directory'); ?>/images/cloud.png" alt="" /></li>
<li><img class="sticker-picker" src="<?php bloginfo('stylesheet_directory'); ?>/images/dog.png" alt="" /></li>
<li><img class="sticker-picker" src="<?php bloginfo('stylesheet_directory'); ?>/images/heart.png" alt="" /></li>
<li><img class="sticker-picker" src="<?php bloginfo('stylesheet_directory'); ?>/images/monkey.png" alt="" /></li>
<li><img class="sticker-picker" src="<?php bloginfo('stylesheet_directory'); ?>/images/rabbit.png" alt="" /></li>
</ul>
<span class="button right"></span><span class="button clear"></span><span class="button close"></span>
</div>
</div> 
```

我的jQuery是：

```
$(window).load(function() {
$("#work-slide-menu").css('left', '-800px');

$("#work-slide-menu-tab a").toggle( 
function () { 
$(this).text('Quick Contact Hide / Close [-]')
$("#work-slide-menu").animate({left: "100px"}, {queue:false, duration: 500, easing: 'linear'})
}, 
function () { 
$(this).text('Quick Contact Show / Open [+]')
$("#work-slide-menu").animate({left: "-800px"}, {queue:false, duration: 500, easing: 'linear'}) 
} 
); 
});

$('#work-slide-menu-content span.button.clear').click(function()
{
stickersRemoveAll(true);
});

$('#work-slide-menu-content span.button.close').click(function()
{
$("#work-slide-menu").animate({left: "-800px"}, {queue:false, duration: 500, easing: 'linear'})
});

$(document).ready(function() {
$("img.sticker-picker").draggable({helper: 'clone', containment:'document', cursor:'move'});
$("body").droppable({
accept: ".img.sticker-picker",
cursor: 'move',
containment: 'document',
stop: stickerMoved
});
}); 
```

我的CSS是：

```
#work-slide-menu { position: fixed; left: -800px; top: 320px; width: 847px; z-index: 9998; }
#work-slide-menu-tab,
#work-slide-menu-content {
background: #ffc423;        
}

#work-slide-menu span.button.left {
left: 0px;
background-position: left bottom;
}

#work-slide-menu span.button.right {
right: 45px;
background-position: left top;
}

#work-slide-menu span.button.clear {
top: 125px;
right: 195px;
width: 156px;
height: 38px;
background-image: url('images/button_stickersclear.png');
background-position: left top;
}

#work-slide-menu span.button.close {
top: 106px;
right: 63px;
width: 126px;
height: 57px;
background-image: url('images/button_stickersclose.png');
background-position: left top;
}

#work-slide-menu span.button {
display: block;
position: absolute;
top: 0px;
width: 82px;
height: 125px;
cursor: pointer;
background-image: url('images/stickers-navi.png');
}

#work-slide-menu-tab {
    width: 47px;
    height: 107px;
    float: right;
}

#work-slide-menu-tab a {
    display: block;
    width: 100%;
    height: 100%;
    background:url(../img/view-all-work.png) no-repeat center;
}

#work-slide-menu-content {
    width: 800px;
    height:150px;       
    height: auto;       
    float: left;
}

    #work-slide-menu-content ul {
        list-style: none;
        margin: 20px;
        padding: 0;
        height:140px;
    }

        #work-slide-menu-content ul li {
            height: 125px;
            margin: 0px 20px;
            float: left;
        }

            #work-slide-menu-content ul li a {
                color: #111;
                text-decoration: none;
            }

            #work-slide-menu-content ul li a:hover {
                color: #fff;
            }

            img.sticker
            {
                display: block;
                position: absolute;
                z-index: 3;
            }

            img.sticker-dropped
            {
                display: block;
                position: absolute;
                z-index: 18;
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T14:20:23.377

draggable 的默认行为是被拖动的幻像对象是原始对象。

您必须使用辅助选项来定义被拖动的对象。在您的情况下，这将是一个新对象，您将在其中放置需要放在另一侧的任何内容。

[http://jqueryui.com/demos/draggable/#option-helper](http://jqueryui.com/demos/draggable/#option-helper)

# c++ - 如何从虚拟键码中获取键文本？

> ID：10796873
> 
> 赞同：1
> 
> 时间：2012-05-29T09:59:07.720
> 
> 标签：c++, winapi

如何从虚拟键码中获取键文本？

```
 KBDLLHOOKSTRUCT * kbhook = (KBDLLHOOKSTRUCT *) lParam;
  cout << kbhook->vkCode <<endl; 
```

例如虚拟键码为`q`81。我想返回`q`。我怎么做 ？

[使用 UnicodeEx](https://stackoverflow.com/questions/2309132/how-to-convert-virtual-key-code-to-character-code)我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T10:15:32.307

阅读[ToUnicodeEx 文档](http://msdn.microsoft.com/en-us/library/ms646322%28VS.85%29.aspx)，我会尝试这样的事情：

```
wchar_t buff[10];

BYTE keyState[256] = {0};

int result = ToUnicodeEx(
    kbhook->vkCode,
    kbhook->scanCode,
    keyState,
    buff,
    _countof(buff),
    0,
    NULL); 
```

成功时，`buff`应包含 Unicode 字符。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-29T10:09:30.143

```
cout << char(kbhook->vkCode) << endl; 
```

# java - 在方法中使用单个临时变量有好处吗？

> ID：10796876
> 
> 赞同：0
> 
> 时间：2012-05-29T09:59:28.843
> 
> 标签：java, performance, memory, temp

通常在代码中我会遇到需要临时变量的场景 - 例如：

```
字符串tempUserName = input.getUserName();
tempUserName = sanitzie(tempUserName);
验证（临时用户名）；
// ... 使用 tempUserName 执行其他操作

字符串tempUserNickName = input.getUserNickName();
tempUserNickName = sanitzie(tempUserNickName);
验证（临时用户昵称）；
// ... 使用 tempUserNickName 执行其他操作

...
...

```

我知道有些人对这些事情使用单个临时变量：

```
字符串temp = input.getUserName();
温度=消毒（温度）；
验证（临时）；
// ... 用 temp 做其他事情

temp = input.getUserNickName();
温度=消毒（温度）；
验证（临时）；
// ... 用 temp 做其他事情

...
...

```

在我看来 - 我写它的方式更清晰，更不容易出错。

我的问题是 - 使用单个临时变量有什么好处：

1.  内存消耗角度
2.  绩效观点
3.  任何其他观点

让我们将问题的范围`String`仅限于变量 - 但我很乐意获得更一般的反馈。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T10:03:58.080

内存消耗和性能无关紧要，但每个非最终变量都会使代码更难阅读。您永远无法一目了然地看到它被重新分配的确切位置，如果您正在寻找一个错误，这会给您带来困难。我的建议，以及我在代码中经常做的事情，是提取到一个方法，这样你甚至不需要调用端的本地 var。总是倾向于根据函数组合来编写代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T10:05:04.473

我也不喜欢重用局部变量，性能方面在这里应该不重要，因为你会获得或失去如此微小的时间，以至于它可以忽略不计。无论如何，JIT 都可以为两者生成相同的本机代码。

重要的是可读性和可维护性。我在你的代码中看到的是应该有一个额外的方法，这样你的原始代码就变成了：

```
sanitizeAndValidate(input.getUserName());
sanitizeAndValidate(input.getUserNickName()); 
```

这使代码更清晰，更可测试，避免重复，并使您的初始问题无关紧要，因为您的 temp 变量在`sanitizeAndValidate()`方法中只定义一次。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T10:05:01.930

我对此的主要回答是，如果您有一系列此类陈述，我会将这些分组分解为您调用的单独函数。（这将只有一个临时变量。）例如：

```
private String handleInput(String val) {
    val = sanitzie(val);
    validate(val);
    // ... Do something else with val

    return val;
} 
```

用法：

```
String finalPlaceForUserName     = handleInput(input.getUserName());
String finalPlaceForUserNickName = handleInput(input.getUserNickName()); 
```

... where`handleInput`可能会返回`null`无效或危险的输入等。您可能需要进行`handleInput`比上述更多的参数化。

回答您提出的观点：

> 内存消耗角度

我想*从技术上讲*，如果只有一个临时变量，那么早先的内存将有资格更早地进行垃圾收集（例如，*在*方法运行时而不是之后）。但我怀疑它会对现实世界产生任何影响。

> 绩效观点

我无法想象这样。

> 任何其他观点

我们可能在这里归结为风格，这主要是个人喜好问题。同样，我将它拆分为一个函数，这是围绕这个问题的一种终结。:-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T10:07:18.277

考虑到性能差异（内存方面）很小。

更重要的是让你的代码可读，并优化重要的东西。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-29T10:10:31.533

尽管它们不是很好的风格，但仍会出现这些重复。我经常这样做：

```
{
    String s = ...
    something with s;
}
{
    String s = ...
    something with s;
} 
```

# php - 为什么 Google Chrome 会清空我在 MediaWiki 中的搜索栏？

> ID：10796878
> 
> 赞同：0
> 
> 时间：2012-05-29T09:59:29.773
> 
> 标签：php, javascript, google-chrome, mediawiki

*这是一个开始于*

*   *[使用 InputBox 向 MediaWiki 搜索查询添加额外的搜索文本](https://stackoverflow.com/questions/10205405/adding-extra-search-text-to-a-mediawiki-search-query-using-inputbox)并继续*
*   *[PHP 函数未定义错误和`</p>`在生成的 HTML](https://stackoverflow.com/questions/10685237/php-function-is-not-defined-error-and-syntax-error-of-misplaced-p-in-generate)中错位的语法错误。*

我创建了一个 JavaScript 来根据复选框选择将文本输入到 MediaWiki 搜索框中。这现在适用于 Firefox 和 Internet Explorer。但不在**谷歌浏览器**中。

在 Chrome 中，搜索框已正确填充（使用上述 JavaScript），但在按下搜索按钮时搜索框为空白（空）。这意味着搜索 URL 也是空白的，这反过来意味着只显示默认的 MediaWiki 搜索页面。

Chrome对 FF 和 IE 没有**[的代码](https://stackoverflow.com/questions/10685237/php-function-is-not-defined-error-and-syntax-error-of-misplaced-p-in-generate/10714755#10714755)**做了什么- 我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T15:43:44.720

在我的 PHP 代码中，我嵌入了这个 JavaScript：

```
<script type="text/javascript">function appendAndSubmit(){var platform1 = document.getElementById('p1').checked;var platform2 = document.getElementById('p2').checked;var text = document.getElementById('searchboxInput').value;if (platform1 * platform2 >0) text = text + ' "Applies to=Platform 1.0" "Applies to=Platform 2.0"';else if (platform1) text = text + ' "Applies to=Platform 1.0"';else if (platform2) text = text + ' "Applies to=Platform 2.0"';document.getElementById('searchboxInput').value = text;document.forms['searchform'].submit();}</script> 
```

该变量`text`被定义为搜索表单中的内容。所以我只是改变了最后一部分：

```
document.forms['searchform'].submit(); 
```

至

```
text.submit(); 
```

它有效，但我不知道为什么。

# java - 如何为列表创建 JSONArray

> ID：10796881
> 
> 赞同：20
> 
> 时间：2012-05-29T09:59:42.037
> 
> 标签：java, json, list, arraylist

我有一堂课叫

```
class Student {
   String name;
   String age;
} 
```

我有一个返回 List 对象的方法，例如

```
public List<Student> getList(){

 List<Student> li =new ArrayList();
 ....

 li.add(new Student('aaa','12'));
 ... 

 return li;    
} 
```

我需要像这样将该列表转换为 JSONArray

```
[{"name":"sam","age":"12"},{"name":"sri","age":"5"}] 
```

谁能帮我得到这个？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2015-11-23T18:35:16.217

使用`Gson`库将非常简单。

从 JSON 字符串到对象的 ArrayList 为：

```
Type listType = 
     new TypeToken<ArrayList<Student>>(){}.getType();
ArrayList<Student> yourClassList = new Gson().fromJson(jsonArray, listType); 
```

并将对象数组列表中的 Json 作为：

```
ArrayList<Student> sampleList = new ArrayList<Student>();
String json = new Gson().toJson(sampleList); 
```

Gson 库比使用`JSONObject`和`JSONArray`实现更简单。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-05-29T10:09:15.167

您必须`jettison`在项目中包含 jar 并导入所需的类。

```
JSONObject jObject = new JSONObject();
try
{
    JSONArray jArray = new JSONArray();
    for (Student student : sudentList)
    {
         JSONObject studentJSON = new JSONObject();
         studentJSON.put("name", student.getName());
         studentJSON.put("age", student.getAge());
         jArray.put(studentJSON);
    }
    jObject.put("StudentList", jArray);
} catch (JSONException jse) {
    jse.printStacktrace();
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-03-18T08:30:11.980

像下面这样创建 JSONArray。

`JSONArray jsArray = new JSONArray(arrayList);`

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-29T11:16:27.483

我认为您不需要下载 jettison jar 文件。

使用`JSONArray`并且`JSONObject`您可以轻松地将该列表转换为 JSON 对象，例如 @Juniad 答案

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-29T10:03:50.410

尝试 gson：[序列化和反序列化通用类型](http://sites.google.com/site/gson/gson-user-guide#TOC-Serializing-and-Deserializing-Generic-Types)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-29T10:03:55.190

json-lib 可能是您正在寻找的库。[您可以在此处](http://json-lib.sourceforge.net/usage.html)找到一些使用示例。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-29T11:44:55.060

当您想直接将 Object 映射到 json 或想将 json 转换为 object 时，可以使用 GSON 库。这将为您提供更大的灵活性和控制力。

下载链接 - [http://code.google.com/p/google-gson/](http://code.google.com/p/google-gson/)

教程链接 - [http://www.mkyong.com/java/how-do-convert-java-object-to-from-json-format-gson-api/](http://www.mkyong.com/java/how-do-convert-java-object-to-from-json-format-gson-api/)

# iphone - 将对象从 NSMutableDictionary 添加到 NSMutableArray

> ID：10796883
> 
> 赞同：1
> 
> 时间：2012-05-29T09:59:46.907
> 
> 标签：iphone, objective-c, ios

我是 ios 开发的新手，我想从数据库中添加一些对象，我设法将其放入 a 中`NSMutabledictionary`，并且我想放入 a`NSMutableArray`中以显示在 a 中`UITableView`。下面是我的 .m 文件代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    jsonURL = [NSURL URLWithString:@"http://localhost:8888/read_product_list.php"];

    //jsonData = [[NSString alloc] initWithContentsOfURL:jsonURL];

    NSData *data = [NSData dataWithContentsOfURL:jsonURL];
    [self getData:data];    
}

-(void) getData:(NSData *) response {
    NSError *error;

    NSMutableDictionary *json = [NSJSONSerialization JSONObjectWithData:response options:kNilOptions error:&error];
    //NSLog(@"%@", json);

    jsonArray = [[NSMutableArray alloc] init];
    /*for(int i = 0; i < json.count; i++){
        [jsonArray addObject:[json objectForKey:];
    }*/

    //NSLog(@"%@", jsonArray);

} 
```

先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T10:08:29.087

如果您想要字典的值，请尝试：

```
jsonArray = json.allValues; 
```

不过，它不会被任何有趣的东西订购，因此您可能也想在之后订购。

但是，如果这真的是你的 JSON：

```
[{"0":"Samsung LCD 42 TV","Name":"Samsung LCD 42 TV","1":"7900.99","Price":"7900.99","2":"Buy the new Samsung 42 nth TV from Hi-if. available only this coming weekend. ","Description":"Buy the new Samsung 42 nth TV from Hi-if. available only this coming weekend. "},{"0":"iPhone 4s","Name":"iPhone 4s","1":"7000","Price":"7000","2":"Buy a brand new iPhone 4s from Orange with a lot of Features such as Siri, 3G and Wi-Fi.","Description":"Buy a brand new iPhone 4s from Orange with a lot of Features such as Siri, 3G and Wi-Fi."}] 
```

那么这实际上是一个数组，所以你可能只想要：

```
jsonArray = [NSJSONSerialization JSONObjectWithData:response options:kNilOptions error:&error]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T10:09:14.953

将所有值放入数组

```
NSMutableArray *jsonArray = [[NSMutableArray alloc] initWithArray:[json allValues]]; 
```

将所有键放入数组

```
NSMutableArray *jsonKeyArray = [[NSMutableArray alloc] initWithArray:[json allKeys]]; 
```

# asp.net - 如何在 C# 2.0 中使用正则表达式处理 < 或 > 类型的字符串的编码

> ID：10796886
> 
> 赞同：1
> 
> 时间：2012-05-29T09:59:59.030
> 
> 标签：asp.net, regex, c#-2.0

下面是用 C#2.0 代码编写的用于删除不需要的查询字符串（excludeList 中存在的任何内容）的正则表达式将从页面查询字符串中排除，它对我来说工作正常。

```
string querystring = string.Empty;                       
string excludeList = "cid,incid,h";                        
querystring = Regex.Replace(Regex.Replace(Regex.Replace(HttpContext.Current.Request.Url.Query, @"^\?", "&"), "&(" + excludeList.Replace(",", "|") + ")=[^&]*", "", RegexOptions.IgnoreCase), "^&", "?"); 
```

现在我想修改我的常规表达式，以便如果我的 excludeList 包含如下，如果我的页面查询字符串中有任何 < 或 > 将进行编码。

```
string excludeList = "cid,incid,h,<,>"; 
```

例如，如果我的页面查询字符串包含某些内容，则应将其编码为正确的 #343script#545 （示例）

请建议需要对处理编码进行哪些修改。

谢谢。

编辑：

说

```
HttpContext.Current.Request.Url.Query = "http://localhost:80/faq.aspx?faqid=123&cid=5434&des=dxb&incid=6565&data=<sam>";
string excludeList = "cid,incid,h,<,>"; 
```

现在我上面的正则表达式应用于上面的查询字符串变量时，它将呈现如下

```
string querystring = Regex.Replace(Regex.Replace(Regex.Replace(HttpContext.Current.Request.Url.Query, @"^\?", "&"), "&(" + excludeList.Replace(",", "|") + ")=[^&]*", "", RegexOptions.IgnoreCase), "^&", "?");

querystring = "?faqid=123&des=dxb&data=%3C%20sam%20%3E"; 
```

现在一切正常，我想使用上面的正则表达式对“<”和“>”进行编码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T10:02:16.257

**尝试这个**

```
(?is)^(?<del>[^\?]+?)(?<retain>\?.+)$ 
```

**解释**

```
@"
(?is)         # Match the remainder of the regex with the options: case insensitive (i); dot matches newline (s)
^             # Assert position at the beginning of the string
(?<del>       # Match the regular expression below and capture its match into backreference with name “del”
   [^\?]         # Match any character that is NOT a ? character
      +?            # Between one and unlimited times, as few times as possible, expanding as needed (lazy)
)
(?<retain>    # Match the regular expression below and capture its match into backreference with name “retain”
   \?            # Match the character “?” literally
   .             # Match any single character
      +             # Between one and unlimited times, as many times as possible, giving back as needed (greedy)
)
$             # Assert position at the end of the string (or before the line break at the end of the string, if any)
" 
```

**更新代码**

```
string resultString = null;
try {
    resultString = Regex.Replace(subjectString, @"(?is)^(?<del>[^?]+?)(?<retain>\?.+)$", "${retain}");
} catch (ArgumentException ex) {
    // Syntax error in the regular expression
} 
```

# android - 使用 achartEngine 卡在移动图形中

> ID：10796888
> 
> 赞同：1
> 
> 时间：2012-05-29T10:00:07.980
> 
> 标签：android, graph, achartengine

嗨朋友们，我在我的 android 应用程序中使用了图表。在那我每秒更新一次图表。现在我想在它更新值时从右到左移动这个图表。有人知道怎么做吗？任何帮助表示赞赏。

```
 dataset = new XYMultipleSeriesDataset();

         renderer = new XYMultipleSeriesRenderer();

         renderer.setChartTitleTextSize(12);
         renderer.setLabelsTextSize(15);
         renderer.setMarginsColor(Color.argb(0x00, 0x01, 0x01, 0x01));
         renderer.setApplyBackgroundColor(true);
         renderer.setBackgroundColor(Color.TRANSPARENT);
         renderer.setZoomEnabled(false, false);
         renderer.setPointSize(5f);
         renderer.setShowGrid(true);
         renderer.setXTitle("Time");
         renderer.setYTitle("Number");

         rendererSeries = new XYSeriesRenderer();

         rendererSeries.setColor(Color.BLUE);
         rendererSeries.setFillBelowLine(false);
         rendererSeries.setFillPoints(true);
         rendererSeries.setPointStyle(PointStyle.CIRCLE);
         renderer.addSeriesRenderer(rendererSeries);

         timeSeries = new TimeSeries("Random");
         mThread = new Thread(){
             public void run(){
                 while(true){
                     try {
                         Thread.sleep(2000L);
                     } 
                     catch (InterruptedException e) {
                         e.printStackTrace();
                     }

                     timeSeries.add(new Date(), random.nextInt(10));
                     mchartView.repaint();
                 }
             }
         };
         mThread.start();

         dataset.addSeries(timeSeries);
         mchartView = ChartFactory.getLineChartView(Pedometer.this, dataset, renderer);
         mchartView.refreshDrawableState();
         mchartView.repaint();

         llChart.addView(mchartView, new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.FILL_PARENT)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T07:24:36.417

您可以在每次添加新点时使用 setRange 设置所需的范围。例如：

```
double maxX = timeSeries.getMaxX();
double minX = maxX - deltaX; // deltaX is your required x-range
double maxY = timeSeries.getMinY();
double minY = timeSeries.getMaxY();

renderer.setRange(new double[] { minX, maxX, minY, maxY }); 
```

这样，您的右边缘始终显示最大时间，而图表的其余部分将从右向左移动。

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T18:44:22.657

如果您希望图表移动，您需要在执行过程中添加新数据。一旦图表*已满*（有尽可能多的点），您需要开始删除最旧的点。这将为您提供一个显示最新 X 点数的窗口。

如果您使用的是 TimeSeries，我认为您应该能够调用`timeSeries.setMaximumItemCount(maxNumPoints)`，而时间序列将负责其余的工作。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T15:07:39.027

让图形自动计算其轴最小值和最大值的一种简单方法是将它们设置为最小值和最大值，然后重新绘制。例如：

```
mRenderer.setXAxisMax(-Double.MAX_VALUE);
mRenderer.setXAxisMin(Double.MAX_VALUE);
mRenderer.setYAxisMax(-Double.MAX_VALUE);
mRenderer.setYAxisMin(Double.MAX_VALUE);

mChartView.repaint(); 
```

我不知道这是否是*最好*的选择，但它对我有用！

**参考：** [我的 Android AChartEngine 已经可以工作了，但是如何让它看起来不错呢？](https://stackoverflow.com/questions/11309065/my-android-achartengine-is-already-working-but-how-to-make-it-look-good)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-22T10:34:55.800

在我的代码中，我提出了以下想法：

```
 private void animatePlot(float t, float[] v) {
            // moving plot
            datasets[i].add(t, v[i]);
            if (mPointsCount > GRAPH_RESOLUTION)
                datasets[i].remove(0);
            view.repaint();
            mPointsCount++;
    } 
```

*   t 和 v 对应于 x,y 绘图值。
*   t 正在增长。
*   当我得到新数据（t 和 v）时，我调用这个函数。
*   GRAPH_RESOLUTION 是图中显示的点数，绘图从该点开始向左移动。

# artificial-intelligence - 使用人工神经网络的长期预测

> ID：10796890
> 
> 赞同：5
> 
> 时间：2012-05-29T10:00:21.617
> 
> 标签：artificial-intelligence, neural-network

我正在研究一个使用 ANN 预测股票价格的项目。我已经使用前 7 年的数据训练了系统，它可以很好地预测一天的数据。现在我想预测未来 7 天的股价。

我的想法是使用第 1 天预测第 2 天数据，使用第 2 天和第 1 天的预测数据预测第 3 天数据，依此类推。但它不能正常工作。

我已经训练 ANN 使用开盘价、一天的最高价和最低价来预测收盘价。

预测未来 7 天数据的想法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T10:10:42.483

Maruf，如果您提前 1 天有可靠的 ANN 预测器，请联系我进一步讨论！哈哈

一边开玩笑。神经网络和其他非线性预测器就是这样 - 预测器。您正在处理的数据（股票价格数据）在很大程度上是随机的。如果您不相信我，请尝试使用以下伪代码生成随机游走并将其绘制在屏幕上：

```
let min = -0.5
let max = +0.5
let bias = 0.01
let random = rand(min, max)
y[i] = y[i-1] + random + bias 
```

稍微调整偏差（从 -0.01 到 0.01），你最终会得到一个看起来很像趋势股票价格的系列。其原因在于，在任何潜在趋势中，有些人做出的决定并不比抛硬币好。您知道普通交易者在 55% 的时间里是对的吗？这就是他所需要的……

现在，如果数据在很大程度上是随机的，那么它就变得非常难以预测。您正在寻找大量噪声中的信号。每天你试图预测你的预测变得不那么准确。

我可以问一下 - 您在 ANN 中输入了哪些输入来获得提前 1 天的预测？例如，如果您使用每日股票价格加上其他衍生因素（如变化率、交易量、背离等...）来获得准确的 1 天预测，您可能会发现您可以通过以下方式获得准确的 1 周预测用每周库存数据代替以上所有内容。

**编辑：**

其次，你在做什么来测试预测器的准确性？为了增加 mikera 的答案，我建议采用如下策略。

给定一个 1000 天的数据窗口，取其中的 800 个并训练你的 ANN。现在预测未来的某一天。将预测方向（向上、向下）与预测收盘价（百分比差异）进行比较，以衡量该结果的准确性。现在将窗口向右滑动 1 天。重新训练 ANN 并执行 1 天的预测，注意结果。

如果你在剩下的 200 天里继续这样做，有多少比例的结果得到了正确的方向（向上、向下）？有多少比例的结果在实际预测收盘价的 10% 以内？如果您的 ANN 在每天下班时下订单，并在第二天结束时下单，它会赚多少钱？当然要考虑滑点和交易费用......

这将使您了解系统的准确性和价值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-29T10:12:14.030

如果你能有效地预测甚至提前一天，你已经做得很好了——通常的问题是：

*   你确定你没有过度拟合，例如学习准确地复制你的训练数据的特征吗？如果您还没有尝试过，那么我强烈建议您在使用其他 80% 的数据进行训练后，在 20% 的数据上测试您的 ANN，以确保这一点。
*   您还在学习预测绝对价格值或增量吗？如果是前者，那么您可能只是从以下事实中得到了很好的拟合：到目前为止，第二天收盘价的最佳预测指标是今天的收盘价（因为数据具有如此多的序列相关性）。通过犯这个错误获得 99%+ R-squared 的情况并不少见....

假设您没有落入上述陷阱之一，那么进行多天预测的方法是简单地为未来的每一天独立地单独预测变量。将第二天的预测输入到第二天等并没有太多附加价值（因为您的输入数据中没有任何新信息），但如果您愿意，您可以尝试（不会造成任何伤害） ，可以通过提供有用的特征检测器等来加速学习）。

此外，您预计未来预测的不确定性/变化会更大（因为从现在到那时，不确定的股价变动天数更多）。因此，值得尝试预测统计数据的方差以及平均值。

# java - 如何更改日期之间的日期格式类型？

> ID：10796893
> 
> 赞同：0
> 
> 时间：2012-05-29T10:00:24.260
> 
> 标签：java, date, simpledateformat

如何将此日期类型“Thu Feb 02 12:00:00 GMT-12:00 2012”更改为另一个日期类型“yyyy-mm-dd HH:mm:ss”？如果“Thu Feb 02 12:00:00 GMT-12:00 2012”是String类型，如何转换“yyyy-MM-dd HH:mm:ss”的Date类型？

爪哇代码：

```
DateFormat inputDF = new SimpleDateFormat("EEE MMM dd HH:mm:ss Z yyyy");
   DateFormat outputDF = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
   Date dd = inputDF.parse("Thu Feb 02 12:00:00 GMT-12:00 2012");
   String strDate = outputDF.format(dd); 
```

输出是字符串类型。我想获得日期类型的输出，所以我添加了以下代码。

```
 Date outputDate = outputDF.parse(strDate); 
```

但是我再次使用这种“EEE MMM dd HH:mm:ss Z yyyy”格式获得日期。我想用这种“yyyy-MM-dd HH:mm:ss”格式获取日期，并且还想要日期类型。

**我还想得到输出类型是日期类型格式。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T10:04:48.247

```
DateFormat inputDF = new SimpleDateFormat(
                "EEE MMM dd HH:mm:ss Z yyyy");
        DateFormat outputDF = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
        System.out.println(outputDF.format(inputDF.parse("Thu Feb 02 12:00:00 GMT-12:00 2012"))); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-25T22:51:26.900

# 字符串 != 日期

您的主要问题是将字符串视为日期。它不是。考虑到“$12.34”不是一个数字，它是一个数字和货币类型的文本表示形式，用于显示。你也有日期时间和时区的文本表示。

## 字符串 → 日期时间 → 字符串

所以第一步是将该字符串解析为日期时间对象。然后使用该日期时间对象生成其日期时间值的*新*文本表示。

# java.time

您正在使用 Java 最早版本中的旧日期时间类。这些课程虽然是业界首创的勇敢尝试，但已被证明令人困惑且存在缺陷。避开他们。

Java 8 和更高版本中内置的[java.time框架取代了麻烦的旧 java.util.Date/.Calendar 类。](http://docs.oracle.com/javase/8/docs/api/java/time/package-summary.html)新课程的灵感来自非常成功的[Joda-Time](http://www.joda.org/joda-time/)框架，旨在作为其继任者，在概念上相似但重新架构。由[JSR 310](http://jcp.org/en/jsr/detail?id=310)定义。由[ThreeTen-Extra](http://www.threeten.org/threeten-extra/)项目扩展。请参阅[Oracle 教程](http://docs.oracle.com/javase/tutorial/datetime/TOC.html)。

## 格式化程序

我们必须指定一个编码模式来定义一个格式化程序，我们将使用它来解析您的输入字符串。这些代码类似于旧的 java.text.SimpleDateFormat 类，但不完全相同。所以仔细研究[文档](https://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html)。注意`O`for的使用`localized zone-offset`。

请注意，在格式化程序上，我们使用第二个参数来指定[`Locale`](http://docs.oracle.com/javase/8/docs/api/java/util/Locale.html). 该语言环境指定用于解析和翻译月份和日期名称的人类语言。如果省略，则使用 JVM 当前的默认语言环境。该默认值可以随时更改，因此我建议始终指定预期的语言环境。

```
String input = "Thu Feb 02 12:00:00 GMT-12:00 2012";
DateTimeFormatter formatter = DateTimeFormatter.ofPattern ( "EEE MMM dd HH:mm:ss O yyyy" , Locale.ENGLISH );
ZonedDateTime zdt = ZonedDateTime.parse ( input , formatter ); 
```

转储到控制台。

```
System.out.println ( "zdt: " + zdt ); 
```

> 2012-02-02T12:00-12:00

该输出是标准的[ISO 8601](https://en.wikipedia.org/wiki/ISO_8601)格式。我建议尽可能使用这些标准格式，因为它们易于阅读、明确且标准。

您想要的格式接近标准，但用`T`空格替换。并且您的格式省略了任何[与 UTC](https://en.wikipedia.org/wiki/UTC_offset)或时区的偏移量。省略时区是有风险的，因为人类读者可能会假设错误的时区。但是，如果您坚持，请自己定义这样的模式。

```
DateTimeFormatter formatterOutput = DateTimeFormatter.ofPattern ( "yyyy-MM-dd HH:mm:ss" );
String output = zdt.format ( formatterOutput ); 
```

转储到控制台。

```
System.out.println ( "zdt: " + zdt + " output: " + output ); 
```

> zdt：2012-02-02T12:00-12:00 输出：2012-02-02 12:00:00

更好的是，让 java.time 为您本地化。请注意我们如何调用[`withLocale`](http://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html#withLocale-java.util.Locale-)给格式化程序一个 Locale，其语言将用于月份名称和日期名称。

```
DateTimeFormatter formatterLocalized = DateTimeFormatter.ofLocalizedDateTime ( FormatStyle.FULL );
formatterLocalized = formatterLocalized.withLocale ( Locale.CANADA_FRENCH );
String outputLocalized = zdt.format ( formatterLocalized ); 
```

转储到控制台。

```
System.out.println ( "zdt: " + zdt + " output: " + output + " outputLocalized: " + outputLocalized ); 
```

> zdt：2012-02-02T12:00-12:00 输出：2012-02-02 12:00:00 输出本地化：jeudi 2 février 2012 12 h 00 -12:00

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-30T04:45:23.253

```
String strDate = "Thu Feb 02 12:00:00 GMT-12:00 2012";
DateFormat dateFormat = new SimpleDateFormat("MM/dd/yyyy - HH:mm:ss");
dateFormat.format(strDate);

And to get the result in Date, You can use the following :

Date d = new Date(dateFormat.format(strDate)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-05T10:50:34.237

```
String dateStart = "Thu Feb 02 12:00:00 GMT-12:00 2012";
SimpleDateFormat format = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
Date d1 = format.parse(**dateStart**);
System.out.prinln("formatted date.." + d1); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-25T20:24:38.590

你不能那样做。该`Date`对象没有表示格式。它只有数据。格式化程序具有格式。格式化用于显示数据。

# php - jQuery Youtube 播放器

> ID：10796898
> 
> 赞同：2
> 
> 时间：2012-05-29T10:00:46.107
> 
> 标签：php, jquery, youtube-javascript-api

这是一个两方：

我一直在努力让它工作，但我是编码新手。我想点击按钮`#video`，一个远程 div`#imageMain`将播放。

我写了以下内容：

```
<script>
    $(document).ready(function(e) {
        var videoURL = <?php echo $row_rs_dealItem['video']; ?>;
        $('#video').click(function(e) {
            $('#imageMain').html('<iframe class="youtube-player" type="text/html" width="435" height="244" src="' + videoURL + '" frameborder="0"></iframe>');
        });
    });
</script> 
```

此外，使用此脚本后，HTML 中的脚本会直接中断。如果我删除这个脚本，其他的工作正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T20:59:27.540

这个**完全不同的答案**是在 SO Question**完全**实现之后提供的。

因为您的**目标**是拥有一个**jQuery Click 事件**，该事件反过来会播放 id **#video**的视频，所以您需要使用几个**[YouTube API](https://developers.google.com/youtube/)**之一来调用**YouTube 播放方法**。

YouTube 有他们的默认 Flash API，它基于他们的 Flash AS3 播放器，但他们也有一个 HTML5 YouTube 视频播放器和 Flash 后备，这取决于你的项目需要。

[Flash API Playground](https://developers.google.com/youtube/youtube_player_demo)允许您测试 API 选项，并且该网站显示了一个实际示例[，](https://developers.google.com/youtube/iframe_api_reference#Getting_Started)用于使用他们的 Embed API 工具在 iframe 中启动视频。

该实践示例显示在此[jsFiddle](http://jsfiddle.net/X9xde/)中，并`alert`指示视频即将使用**API YouTube`.playVideo()`**命令播放到 iframe，这是您的目标和问题所在（*尽管有潜在的 PHP 问题*）。

至于**我的其他 SO 答案**，它基于在jQuery Click 事件期间**嵌入 iframe 播放器**，任何可以阐明该语法的人以及我对以我建议的方式**嵌入 PHP**（在 iframe 创建时）的理解，并认为它是不正确将不胜感激。

此外，如果您的意图是在**jQuery Click Event**`videoID`发生时注入一个 URL ，这可能是随机的，具体取决于单击的内容，请这样说。****`row`****

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T10:53:10.860

我提供这个答案是出于必要。

创建 JavaScript 变量的**正确方法是：**

```
var videoURL = "<?php echo $row_rs_dealItem['video']; ?>"; 
```

此外，以下语法也是可以接受的：

```
var videoURL = '<?php echo $row_rs_dealItem["video"]; ?>'; 
```

请注意，**任何一种方法**都不能有重复的引号集，因为引号是**JavaScript中的****字符串分隔**符。[在此处](http://en.wikipedia.org/wiki/Nested_quotation)参考以获取更多信息。

 **我相信**PHP**将在动态创建时在 iframe 标记内进行解释，*而不是在此之前*，特别是在**jQuery Click 事件**期间，因为它本身正在渲染 iframe。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T10:02:25.163

`videoUrl`需要用引号引起来，因为它是一个字符串：

```
var videoURL = '<?php echo $row_rs_dealItem['video']; ?>'; 
```

我想这也是影响您的第二个代码块的错误。****

# android - 应用商店是否接受在 Phonegap 中创建的应用，或者它们是否被区别对待？

> ID：10796900
> 
> 赞同：1
> 
> 时间：2012-05-29T10:00:53.803
> 
> 标签：android, iphone, cordova

我对移动应用程序开发非常陌生。我想为所有平台创建一个应用程序：iPhone、Android、Windows、Blackberry 等。

由于学习所有技术并为每种技术创建单独的应用程序需要花费大量时间，因此我正在寻找一种解决方法。

我发现了Phonegap。我安装了它并使用它创建了一些简单的应用程序。它非常简单且易于编码，因为我是 Web 应用程序开发人员，因此在 Phonegap 中编码非常方便。

我唯一的困惑是，如果我开发一个应用程序，并尝试将它部署到 iPhone、Android Windows 等，该应用程序会被 Apple 应用商店、谷歌市场、Windows 商店接受吗？我的意思是，我听说 Apple 不接受所有的应用程序，那么，他们接受在 Phonegap 中创建的应用程序吗？或者在 Phonegap 中创建的应用程序会被区别对待（如果有的话）吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T11:26:22.607

Google Play、iOS App Store 和 Windows Phone 上的许多开发人员提供了许多使用 PhoneGap 构建的应用程序。[您可以在 PhoneGap 网站](http://phonegap.com/apps/)上找到许多，并附有指向其市场列表的链接。

（FWIW，你应该在问这个问题之前访问过那个网站）

您的应用可能会做一些特定的事情，导致它被这些市场中的一个或多个拒绝，但仅仅用 PhoneGap 编写并不是其中之一。

# symfony - Symfony2 自定义验证器作为服务未加载

> ID：10796903
> 
> 赞同：5
> 
> 时间：2012-05-29T10:01:05.270
> 
> 标签：symfony, validation

**编辑：已解决**

我正在尝试构建一个作为服务运行的自定义验证器（主要用于获取实体管理器）。

我关注了文档和一些博客文章，但无法使其正常工作。我没有收到任何错误消息，但我的约束中的方法 isValid 从未被调用。

**我的实体类（必须由“UniqueLem”验证（请注意，Doctrine 验证器有效）：**

```
namespace Elyotech\VersionManagerBundle\Entity;

use Gedmo\Mapping\Annotation as Gedmo;
use Doctrine\ORM\Mapping as ORM;
use Symfony\Component\Validator\Constraints as Assert;
use Me\AdminBundle\Validator\UniqueLem;
use Symfony\Bridge\Doctrine\Validator\Constraints\UniqueEntity;

/**
 * @ORM\Entity(repositoryClass="Me\VersionManagerBundle\Repository\ProjectRepository")
 * @ORM\Table(name="project")
 * @UniqueLem
 * @UniqueEntity("name")
 */
class Project{... 
```

**我的约束类：** 命名空间 Elyotech\AdminBundle\Validator；

使用 Symfony\Component\Validator\Constraint；

```
/*
 * @Annotation
 * */

class UniqueLem extends Constraint
{
    public $message = 'This value is already used';
    public $entity;
    public $property;

    public function validatedBy()
    {
        die; // Test to check if function is called
        return 'validator.unique';
    }

    public function getTargets()
    {
        return self::CLASS_CONSTRAINT;
    } 
```

**验证器**

```
 namespace Elyotech\AdminBundle\Validator;

use Doctrine\ORM\EntityManager;
use Symfony\Component\Validator\Constraint;
use Symfony\Component\Validator\ConstraintValidator;

class UniqueValidator extends ConstraintValidator
{
    private $entityManager;

    public function __construct( $entityManager)
    {
        $this->entityManager = $entityManager;
    }

    public function isValid($value, Constraint $constraint) {
        $this->setMessage($constraint->message);
        return false;
    } 
```

**服务声明：**

```
 my.validator.unique:
   class:      %my.validator.unique.class%
   arguments: [@doctrine.orm.entity_manager]
   tags:
        - { name: validator.constraint_validator, alias: validator.unique } 
```

所以问题似乎不是来自服务，因为我从来没有达到 UniqueLem/isValid() 函数中的“死”。

谢谢！

# jquery - 在 jquery 中将 HTML 表转换为 JSON

> ID：10796904
> 
> 赞同：1
> 
> 时间：2012-05-29T10:01:05.767
> 
> 标签：jquery, json

如何将 html 表转换为 JSON 字符串。

例子 ：

```
<table cellpadding="0" cellspacing="0">
   <tbody>
      <tr>
         <td>Car</td>
         <td>Year</td>
      </tr>
      <tr>
         <td>Nissan</td>
         <td>2009</td>
      </tr>
      <tr>
         <td>Chrysler</td>
         <td>2004</td>
      </tr>
   </tbody>
</table> 
```

类似的东西：`$('table tr').toJSON`打印出所有的价值`td`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T10:13:25.703

尝试这个

```
 var rowList = new Array();
    $("table tr").each(function () {
        var colList = new Array();
        $("td", this).each(function () {
            colList.push($(this).text());
        });
        rowList.push(colList);
    }); 
```

是 td 中所有值的`rowList`二维列表

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T09:00:09.503

试试这个.. 做一个萤火虫并查看 JSON 结果.. 在这里您将指定选择器的值。根据您的需要更改选择器

```
 function TableDataToJSON() {

    var list= [];
    var $headers = $("#list> thead >tr >th"); //header selector
    var $rows = $('#list> .trClass').each(function (index) {//row selector
        $cells = $(this).find("td");
        list[index] = {};
        $cells.each(function (cellIndex) {
            list[index][$($headers[cellIndex]).attr('id')] = $(this).text();
        });
    });
    var myObj = {};
    myObj.person= list;
    return JSON.stringify(myObj);
    //this one $($headers[cellIndex]).attr('id') will give a property name to your
    //json values e.g {Firstname: 'John'}
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T10:09:09.823

确保您有关联的 id `table`，然后您可以将所有`td`内容转换为数组数组（我的意思是二维数组）

```
 var tableData = $('table#yourId tr').map(function() {
  return $(this).find('td').map(function() {
    return $(this).html();
  }).get();
}).get(); 
```

现在 tableData 将包含所有 tds 数据。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-10T15:16:48.860

我对上面的所有解决方案都不满意，最终编写了我自己的 jQuery 插件来实现这一点。它与解决方案非常相似，但接受多个选项来自定义结果，例如忽略隐藏行、覆盖列名和覆盖单元格值

如果这更符合您的要求，可以在此处找到该插件以及一些示例：[https ://github.com/lightswitch05/table-to-json](https://github.com/lightswitch05/table-to-json)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-29T10:13:59.960

使用 $('table tr').find('td').each() 获取数组中的表数据

这使用 JSON.stringify 函数使其成为字符串。

JSON.stringify(carsArray)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-29T10:05:24.763

我不确定编码解决方案，但有一个可用的 java-Script 库请试试[这个](http://json.fastfrag.org/)

fastfrag json 会将所有 html 转换为 json 格式。只需在文本区域中复制您的代码，然后单击下面的链接。它还在[github上有代码存储库](https://github.com/gregory80/fastFrag)

# maven - Teradata JDBC 驱动程序的 Maven 依赖项

> ID：10796905
> 
> 赞同：6
> 
> 时间：2012-05-29T10:01:09.563
> 
> 标签：maven, jdbc, dependency-management, teradata

Teradata 是否将其 JDBC 驱动程序作为从 maven 文件引用的 jar 上传？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T10:03:24.940

与 Oracle 驱动程序一样，闭源依赖项通常不在开源存储库中托管。您可以将其安装在本地存储库中，或使用 Nexus 之类的工具为您的团队/公司完成这项工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-13T13:54:41.780

我看起来也和你一样，在[http://mvnrepository.com/tags/jdbc中没有找到](http://mvnrepository.com/tags/jdbc)

请查看此 URL：http: [//downloads.teradata.com/download/connectivity/jdbc-driver](http://downloads.teradata.com/download/connectivity/jdbc-driver)

**示例代码：**

```
Class.forName("com.teradata.jdbc.TeraDriver");
String connectionString = "jdbc:teradata://MyDatabaseServer/database=MyDatabaseName,tmode=ANSI,charset=UTF8";
String user = "username";
String passwd = "password";
Connection conn = DriverManager.getConnection(connectionString, user, password); 
```

您的类路径中应该有以下两个 jar

> terajdbc4.jar
> 
> tdgssconfig.jar

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-03-22T14:00:56.780

执行以下步骤

1.  [从链接](https://downloads.teradata.com/download/connectivity/jdbc-driver)下载 Teradata Jar

    > *   terajdbc4.jar
    > *   tdgssconfig.jar

2.  将下载的 jar 移动到一个目录。例如：D://lib
3.  打开命令提示符（CMD）并转到目录（D：//lib）
4.  执行以下命令

    > *   mvn install:install-file -DgroupId=com.teradata.jdbc -DartifactId=tdgssconfig -Dversion=14.00.00.21 -Dpackaging=jar -Dfile=tdgssconfig.jar
    > *   mvn install:install-file -DgroupId=com.teradata.jdbc -DartifactId=terajdbc4 -Dversion=14.00.00.21 -Dpackaging=jar -Dfile=terajdbc4.jar

5.  使用以下依赖项更新 POM.xml

    com.teradata.jdbc terajdbc4 14.00.00.21 com.teradata.jdbc tdgssconfig 14.00.00.21

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-06-24T14:45:41.943

最新的 Teradata JDBC 驱动程序 (16.20.00.12) 发行说明有以下声明：

> 此版本包括解决以下问题的更改，最初包含在版本 16.20.00.11 中：
> 
> JDBC-191761 消除 tdgssconfig.jar

因此我们只需要安装“terajdbc4.jar”。

按照@Swarit 提供的类似步骤，从 teradata downloads 下载最新[版本](https://downloads.teradata.com/download/connectivity/jdbc-driver)，当前版本为“16.20.00.12”，将“terajdbc4.jar”安装到本地 maven repo 中：

> mvn install:install-file -DgroupId=com.teradata.jdbc -Dartifa ctId=terajdbc4 -Dversion=16.20.00.12 -Dpackaging=jar -Dfile=terajdbc4.jar

然后您可以在 POM 文件中指定依赖项，如下所示：

```
<dependency>
    <groupId>com.teradata.jdbc</groupId>
    <artifactId>terajdbc4</artifactId>
    <version>16.20.00.12</version>
</dependency> 
```

# iphone - Iphone 谷歌地图 GPS 图标

> ID：10796909
> 
> 赞同：1
> 
> 时间：2012-05-29T10:01:24.493
> 
> 标签：iphone, ios, gps, icons

我想创建一个类似于 maps.app 中的按钮，它可以使地图以当前 GPS 位置为中心。我在[这里](https://stackoverflow.com/questions/2626623/iphone-maps-gps-icon)找到了同样的问题。我将GPS图标图像设置为GPS按钮图像后，图标边缘有明显的锯齿。有没有其他方法可以获得好看的 GPS 图标？提前致谢！

![全球定位系统图标](../Images/1c2cf2a9bd149ee02c2deb13f766a77d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T16:47:58.503

也许您应该先尝试阅读下面的 ios 文档： [Retina 显示屏允许您显示高分辨率版本的艺术和图标。如果您只是扩大现有作品的规模，您将错失提供用户期望的美丽、迷人图像的机会。](https://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/MobileHIG/IconsImages/IconsImages.html#//apple_ref/doc/uid/TP40006556-CH14-SW1)

1.  将您的原始艺术品放大到 200%
2.  添加细节和深度。
3.  考虑软化放大的元素。
4.  考虑添加模糊以获得更好的效果，例如雕刻和阴影。

* * *

如果您想要一个名为 30x30.png 且大小为 30x30px 的图像，那么您应该创建一个名为 30x30@2x.png 且大小为 60x60px 的图像。 [这是同一个问题。](https://stackoverflow.com/questions/10854999/make-a-fine-tabbar-icon)

# c++ - 不变问题和隐式移动构造函数

> ID：10796910
> 
> 赞同：0
> 
> 时间：2012-05-29T10:01:38.093
> 
> 标签：c++, move

我读了这篇文章[cppnext 隐式移动](http://cpp-next.com/archive/2010/10/implicit-move-must-go/)，但我不明白这个问题：

```
#include <iostream>
#include <vector>
struct X
{
    // invariant: v.size() == 5
    X() : v(5) {}

    ~X()
    {
        std::cout << v[0] << std::endl;
    }

 private:    
    std::vector<int> v;
};

int main()
{
    std::vector<X> y;
    y.push_back(X()); // X() rvalue: copied in C++03, moved in C++0x
} 
```

在 MSVC2010 下运行时没有错误...有人可以帮我吗？

在这篇文章中有这句话：

> 这里的关键问题是，在 C++03 中，X 有一个不变量，它的 v 成员总是有 5 个元素。X::~X() 依靠该不变量，但新引入的移动构造函数从 v 移动，从而将其长度设置为零。

我不明白为什么，因为我们试图移动 X，`v`长度会为零

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T10:09:18.147

本文试图说明的问题是，当 an`X`在 push_back 中移动时，不变量被破坏。移动后临时`X`的向量`v`将为空，因此析构函数调用将调用未定义的行为。~~可能是因为您的编译器没有实现移动语义，或者因为未定义的行为不会通过纯粹的机会导致任何可察觉的运行时错误，所以您没有看到任何问题。~~

您可以使用这个简单的程序检查此行为，我们在其中显式移动一个`X`实例：

```
#include <vector>
#include <iostream>
struct X {
  X() : v(5) {}
  std::vector<int> v;
};

int main() {
  X x0;
  std::cout << x0.v.size() << ", ";
  X x1 = std::move(x0);
  std::cout << x0.v.size() << "\n";
} 
```

在 GCC 4.7 上，这些产生

> 5, 0

这来自`std::vector`' 的移动构造函数，由`X`' 隐式生成的构造函数使用。您可以`std::vector`直接检查：

```
int main() {
  std::vector<int> v0(5);
  std::cout << v0.size() << ", ";
  std::vector<int> v1 = std::move(v0);
  std::cout << v0.size() << "\n";
} 
```

这会产生相同的输出。

现在，在您引用的示例中，**用户定义的析构函数**的存在意味着没有隐式生成的移动构造函数，`X`因此**不会**在`push_back`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T10:17:52.470

> 我不明白为什么，因为我们试图移动 X，v 长度将为零

好吧，首先我们不要*尝试*`X()`在 push_back 调用中移动临时。我们*确实*移动它，或者我们不移动它[*]。

如果我们要移动它（使用隐式生成的移动构造函数），它的数据成员`v`将被移动。这篇文章的假设是，从向量中移动会使它为空，尽管我不记得这是必需的还是典型的。但它确实会`v`处于无法保证您可以访问其以前的元素的状态。

请记住，移动的全部意义在于它从源转移复制成本高昂的资源。所以临时对象不再保证其内部数组有 5 个元素，因为移动的目的地已经取走了它。

至于为什么它在 MSVC 2010 中起作用——请记住，此代码在文章中作为示例显示在“调整 #1——析构函数抑制隐式移动”上方。实际上，C++11 确实包含此调整——如果存在用户定义的析构函数 (12.8/9)，则不会生成隐式移动构造函数。所以临时*没有*移动，它被复制了。

[*] 动或不动，没有尝试。是否移动它不取决于实现，标准对此进行了定义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T10:45:20.787

MSVC2010 没有实现 auto=generated move 构造函数，所以即使你的代码会生成一个，你也不会在那里看到它。因此，与往常一样，“随机实现 X 做了 Y”是一个毫无意义的陈述。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-29T10:07:10.630

在 VS2010 中，临时文件会被复制然后销毁。使用移动语义，临时对象将仅用于向量。

# java - 在java中压缩文件时在7Zip中创建空文件夹

> ID：10796911
> 
> 赞同：3
> 
> 时间：2012-05-29T10:01:43.617
> 
> 标签：java, 7zip

我正在使用 Java 压缩 API（java.util.ZIP 包）来压缩文件。它运作良好。但是，我有以下小问题。

假设我的输入文件是`C:\temp\text.txt`并且我的输出（压缩）文件是`C:\temp\text.zip`

当我使用 WinZip 查看压缩文件 (text.zip) 时，它会正确显示内部文件夹结构。它显示为`temp\text.txt`。但是，如果使用 7Zip 打开相同的文件（使用右键单击 -> 7Zip -> 打开存档选项），它会在`C:\temp\text.zip\`. 要查看`text.txt`我需要`C:\temp\text.zip\\\temp\`在 7Zip 地址栏中输入。注意这里的双反斜杠`\\\`。

下面是我的代码：

```
String input="C:\temp\text.txt";
String output="C:\temp\text.zip";
FileOutputStream dest = new FileOutputStream(output);
ZipOutputStream out = new ZipOutputStream(new BufferedOutputStream(dest));
out.setMethod(ZipOutputStream.DEFLATED); //Entries can be added to a ZIP file in a compressed (DEFLATED) form 
out.setLevel(this.getZIPLevel(Deflater.DEFAULT_COMPRESSION));

File file = new File(input);
final int BUFFER = 2048;
byte data[] = new byte[BUFFER];
BufferedInputStream origin = null;
FileInputStream fi;

fi = new FileInputStream(file);
origin = new BufferedInputStream(fi, BUFFER);

int index = file.getAbsolutePath().indexOf(":") + 1;
String relativePath = file.getPath().substring(index);

ZipEntry entry = new ZipEntry(relativePath);
out.putNextEntry(entry);
int count;
while((count = origin.read(data, 0, BUFFER)) != -1) {
      out.write(data, 0, count);
}
origin.close();
out.close(); 
```

有人能告诉我为什么我看到使用 7Zip 的额外空文件夹吗？我正在使用JDK7。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T10:25:34.037

对于初学者，请尝试解决此问题：

```
String input = "C:\\temp\\text.txt";
String output = "C:\\temp\\text.zip"; 
```

请注意，您需要转义`\`字符串中的字符。鉴于这`"\t"`是一个有效的转义序列，它可能以前也有效，但名称中间有几个制表符。为了避免需要转义路径分隔符，你可以这样写：

```
String input = "C:/temp/text.txt";
String output = "C:/temp/text.zip"; 
```

为了使其更便携，您可以同时替换`"\\"`和`"/"`，`File.separator`这是一个常量，它为您的环境保存正确的系统相关名称分隔符（`"C:"`尽管该部分不可移植。）

# django - (13)Permission denied: mod_wsgi Unable to connect to WSGI

> ID：10796925
> 
> 赞同：14
> 
> 时间：2012-05-29T10:02:10.880
> 
> 标签：django, wsgi

我正在尝试在新的 vps 服务器（CentOS 6）上运行 django 1.3.1。
现在我收到这个错误：

```
(13)Permission denied: mod_wsgi (pid=7159): Unable to connect to WSGI daemon process 'somodinteriors:80' on '/etc/httpd/logs/wsgi.7152.0.1.sock' after multiple attempts. 
```

我阅读了如何通过添加 WSGISocketPrefix 来修复它（你可以[在这里](http://code.google.com/p/modwsgi/wiki/ConfigurationIssues#Location_Of_UNIX_Sockets)了解它）

这是我的配置文件：

```
#Alias /robots.txt /var/www/vhosts/domain.co.uk/httpdocs/robots.txt
#Alias /favicon.ico /var/www/vhosts/domain.co.uk/httpdocs/favicon.ico

#Alias /static/ /var/www/vhosts/domain.co.uk/httpdocs/
#Alias /media/ /var/www/vhosts/domain.co.uk/httpdocs/media/

#WSGIScriptAlias / /var/www/vhosts/domain.co.uk/sites/somod/apache/django.wsgi

#<Directory /var/www/vhosts/domain.co.uk>
#    Order allow,deny
#    Allow from all
#</Directory>

#<VirtualHost *:80>
  ServerName domain.co.uk

  LogLevel debug
  ErrorLog /var/www/vhosts/domain.co.uk/logs/error.log
  CustomLog /var/www/vhosts/domain.co.uk/logs/access.log combinedio

  HostnameLookups Off

  UseCanonicalName On

  WSGIScriptAlias / /var/www/vhosts/domain.co.uk/sites/somod/apache/django.wsgi
  WSGIDaemonProcess somodinteriors:80 user=somod group=psaserv processes=1 threads=1
  WSGIProcessGroup somodinteriors:80
#  WSGIPythonPath /var/www/vhosts/domain.co.uk
  WSGISocketPrefix /var/run/wsgi

  Alias /robots.txt /var/www/vhosts/domain.co.uk/sites/templates/robots.txt
  Alias /favicon.ico /var/www/vhosts/domain.co.uk/sites/media/favicon.ico

  <Directory /var/www/vhosts/domain.co.uk/httpdocs>
    AllowOverride None
    Options -ExecCGI -Includes -FollowSymLinks -Indexes
    Order allow,deny
    Allow from all
    AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css text/javascript application/x-javascript
  </Directory>

  <Directory /var/www/vhosts/domain.co.uk/sites>
    AllowOverride None
    Options +ExecCGI -Includes +FollowSymLinks -Indexes
    Order allow,deny
    Allow from all
    AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css text/javascript application/x-javascript
  </Directory>

  Alias /media /var/www/chost/domain.co.uk/media
  <Location /media/>
    SetHandler None
  </Location>
#</VirtualHost> 
```

当我添加`WSGISocketPrefix /var/run/wsgi`到我的配置文件时，当我重新启动 apache 时出现此错误：

```
Syntax error on line 29 of /var/www/vhosts/domain.co.uk/conf/vhost.conf:
WSGISocketPrefix cannot occur within <VirtualHost> section 
```

此文件夹存在：

```
drwxr-xr-x. 2 root      root      4096 May 29 09:36 wsgi 
```

在网站上我收到 503 错误。

我应该放在哪里`WSGISocketPrefix /var/run/wsgi`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-30T22:32:14.937

将其粘贴在 Apache 配置中全局范围内的 VirtualHost 之外。

文档位于：

[http://code.google.com/p/modwsgi/wiki/ConfigurationDirectives#WSGISocketPrefix](http://code.google.com/p/modwsgi/wiki/ConfigurationDirectives#WSGISocketPrefix)

说上下文是服务器配置而不是虚拟主机。

# php - 数到 4 后换行

> ID：10796932
> 
> 赞同：1
> 
> 时间：2012-05-29T10:02:30.320
> 
> 标签：php, html, css, checkbox

我想以这样一种方式显示我的复选框，即在计数 4 后，下一行显示最多 4 个，然后在下一行再次中断。在我尝试但没有成功的代码之后 -

```
<?php 
  $i=1;
  while($row=mysql_fetch_array($result)) {
    if( $i<5 ) {
?>
      <input type="checkbox" id="<?=$row['CategoryName']?>" name="<?=$row['CategoryName']?>" /><?=$row['CategoryName']?>
<?
      $i++;
    }
?>
  <br />
<?php
  $i=1;
  }
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T10:09:28.000

我建议这样做：

```
<?php 
$i=0;
while($row=mysql_fetch_array($result)) 
{
    ?>
    <input type="checkbox" id="<?=$row['CategoryName']?>" name="<?=$row['CategoryName']?>" /><?=$row['CategoryName']?>
    <?php
    $i++
    if ( $i % 4 == 0 ) echo '<br />';
    }
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T10:06:12.540

使用 jQuery `.eq()`- [http://api.jquery.com/eq/](http://api.jquery.com/eq/)

检查这里的代码 - [http://dipaksblogonline.blogspot.in/2011/01/ul-count-li-elements-display-in.html](http://dipaksblogonline.blogspot.in/2011/01/ul-count-li-elements-display-in.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-29T10:07:40.243

使用`if (fmod($i, 4) == 0)`代替`if ($i < 5)`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-29T10:08:16.937

试试这个：

```
$i=0;
while($row=mysql_fetch_array($result)) { 
    $i++;
    echo '<input type="checkbox" id="'.$row['CategoryName'].'" name="'.$row['CategoryName'].'" />'.$row['CategoryName'];
    if($i % 4 == 0) {
        echo '<br />';
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-29T10:09:00.557

您可以使用模运算符来实现此目的。例子：

```
<?php
for($i = 0; $i < 20; $i++) {
    echo $i . "&nbsp;";
    if ($i % 4 == 3)
        echo "<br />";
} 
```

产量

```
0 1 2 3 
4 5 6 7 
8 9 10 11 
12 13 14 15 
16 17 18 19 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-29T10:13:29.180

嗨，请尝试下面给出的代码

```
<?php 
   $i=1;
   while($row=mysql_fetch_array($result)) {
   if( $i<5 ) {
 ?>
     <input type="checkbox" id="<?php echo $row['CategoryName']; ?>"  
      name="?=$row['CategoryName']?>" /> 
<?php 
    echo $row['CategoryName']; 
    $i++;
  }else{
?>
 <br />
 <?php
 $i=1;
 }
}
?> 
```

谢谢

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-05-29T10:22:04.950

```
$i = 1;
for($x = 0; $x < 20; $x++) {
echo "your element here";
if($i%4==0){
echo "</br>";
}
$i++;
} 
```

问候：[TechNew.In](http://www.technew.in/)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-05-29T10:25:09.110

你有很多现成的解决方案的答案，所以而不是写更多的代码，我会建议你一个系统的方法：
从写算法开始，然后写代码。

1.  I want to iterate through my set of data:

    ```
    // while row
        // echo input
    // end while 
    ```

2.  I want a linebreak after a predefined number of inputs:

    ```
    // break_after = 4
    // initiate counter (counter = 0)
    // while row
        // increment counter
        // echo input
        // if counter == break_after
            // echo linebreak
            // reset counter
    // end while 
    ```

3.  Replace comments with code:

    ```
    die('Piece of cake...'); 
    ```

    (I said I will not write code. You already know how to do it.)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-05-29T10:11:45.200

这样做： -

```
<?php 
    $i=1;
    while($row=mysql_fetch_array($result)) 
    {
       if( $i<5 )
        {                           
?>
<input type="checkbox" id="<?=$row['CategoryName']?>" name="<?=$row['CategoryName']?>" /><?=$row['CategoryName']?>
<?php
        $i++;
        }
       else {
    ?>
    <br />
    <?php
        $i=1;
       }
    }    
?> 
```

# c - Linux 非确定性行为接受输入

> ID：10796933
> 
> 赞同：2
> 
> 时间：2012-05-29T10:02:30.900
> 
> 标签：c

我写了这个函数：

```
char* input(char* buffer, FILE* fp)
{
    char* result=fgets(buffer,LMAX,fp);
    if(result!=NULL)
    {
    const unsigned int length=strlen(buffer);
    if(buffer[length-1]=='\n')
        buffer[length-1]='\0';
    }
    return result;
} 
```

如果 fp 等于 stdin，它只会输入一行文本。
我已经用过很多次了，而且效果很好。
我只在 fp 是 FILE 指针的情况下获取 fgets 的结果，所以我必须检查结果是否不为 NULL，以防流不适合输入操作。
问题是，如果我这样使用它：

```
char buffer[LMAX];  // LMAX = 100, defined constant
input(buffer,stdin);
puts(buffer); 
```

如果输入像“#dest :a”，puts 打印“#dest”，切割字符串的其余部分。最大的问题是这个函数正在工作，如果我确实接受了，一小时前（它是相同的）输入一个像“#dest：a”这样的字符串，puts正在打印“#dest：a”。没有任何改变。另外，如果我尝试调试并写下这个：

```
char* input(char* buffer, FILE* fp)
{
    char* result=fgets(buffer,LMAX,fp);
    puts(buffer);  //prints always "#dest :a"
    if(result!=NULL)
    {
    const unsigned int length=strlen(buffer);
    if(buffer[length-1]=='\n')
        buffer[length-1]='\0';
    }
    return result;
} 
```

问题是它在函数中打印“#dest :a”。
此功能有时有效，有时无效，我是 KO，我无法忍受非确定性行为，这个问题（可能是错误）可能是由什么引起的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T16:04:08.017

我多次运行您的代码，除了正确的输出，我什么也没得到，所以我无法重现该问题。我想我知道问题是什么。试着打电话

```
 flush(stdin); 
```

在您调用输入之前。

# java - 有没有好的开源Java抽象负载均衡库？

> ID：10796935
> 
> 赞同：10
> 
> 时间：2012-05-29T10:02:40.817
> 
> 标签：java, open-source, load-balancing

我正在寻找一个开源库，它允许在一组对任意形式的节点的调用之间进行编程负载平衡 - 所以没有关于 HTTP 或其他任何东西的假设，只是对对象的方法调用。理想情况下，它将提供以下功能：

*   均衡负载
*   如果对节点的调用引发异常，则在不同的节点上重试
*   如果调用失败，则将节点移动到“中断”状态，并且不再对其进行调用
*   有一种机制对所有节点（损坏和活动）进行后台 ping，当它们返回时将损坏的节点恢复到活动状态，如果它们失败，主动将活动的节点移动到损坏状态

我觉得这应该已经存在，但是一些谷歌搜索还没有找到它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-29T11:13:03.210

考虑使用 Apache Camel 库。有一个灵活的[负载均衡器](http://camel.apache.org/load-balancer.html)，并且该库有各种各样的组件，因此您不必拘泥于特定的协议或服务实现。使用 Camel [Bean](http://camel.apache.org/bean.html)组件，您甚至可以对 POJO 方法调用进行负载平衡。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T11:14:41.023

您还可以查看 JavaSpaces。范例有一个简单的队列。最不活跃的处理器最有可能获取队列中的下一个项目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-24T13:51:28.277

也许这可能很有趣，但它不能满足您的所有要求：[https ://code.google.com/p/valogato/](https://code.google.com/p/valogato/)

# ruby-on-rails - Ruby On rails 大礼包商务安装

> ID：10796945
> 
> 赞同：0
> 
> 时间：2012-05-29T10:03:31.010
> 
> 标签：ruby-on-rails, ruby, spree

嗨，朋友们正试图带来疯狂的商业，但在 Windows 7 上尝试此命令时出现错误`spree install`

我遇到这样的错误请帮助我..

```
C:/Ruby193/lib/ruby/1.9.1/psych.rb:203:in `parse': (<unknown>): could not find 
expected ':' while scanning a simple key at line 17 column 3 (Psych::SyntaxError) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T16:54:30.140

在database.yml中，每行示例的：之后应该有一个空格

开发：适配器：mysql 编码：utf8 重新连接：false 数据库：form_dev 池：5 用户名：用户密码：密码主机：localhost

# java - Hibernate注解OnetoOne关系

> ID：10796946
> 
> 赞同：2
> 
> 时间：2012-05-29T10:03:31.430
> 
> 标签：java, hibernate, annotations

我有一个关键问题。我有一张桌子

# 票务信息

TICKETINFOID pk, REMARK varchar(128), TICKETDATE 时间戳

它有一个相应的带有休眠注释的类，看起来像这样

```
@Entity
@Table(name = "TICKETINFO")
public class Ticketinfo implements Serializable {

    @Id
    @Column(name = "TICKETINFOID")
    private Long id;
    @Column(name = "TICKETDATE")
    private String date;
    @column(name = "REMARK")
    private string remark;

    //getters and setters
} 
```

现在我的工作是我需要创建一个 TICKETINFO 表的子表

# TICKETINFO_REMARK

TICKETINFO_REMARK_ID pk、TICKETINFOID fk、REMARK varchar(128)

并且 TICKETINFOID 将是来自 TICKETINFO 表的外键，并且必须填充 TICKETINFO_REMARK 的 REMARK 字段以及相应 TICKETINFOID 的 TICKETINFO 的 REMARK 字段。

对于 1 TICKETINFOID，将有一个 REMARK，它可以为空。 **Ticketinfo.java 中 REMARK 的数据类型必须保持为字符串。我可以添加额外的逻辑但不能更改现有流程。**

请帮助我，因为我陷入了可怕的混乱......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T10:10:11.333

听起来一对一可以解决子表的链接问题。对于评论本身，您可能想要劫持访问器和修改器，因为我认为 Hibernate 无法处理您想要的开箱即用的东西。如果您将某些东西作为另一个表的属性，那么以这种方式伪造它不是正交或最佳实践。如果您无法更改它，请保持原样，除非您有充分的理由在代码中编写奇怪的软糖。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T10:16:19.210

您可以将 REMARK 字段设置为 @Transient 并使用 @PreUpdate @PrePersist 和 @PostLoad 方法从一对一映射的 TICKETINFO_REMARK 实体加载和保存备注字段。在 TICKETINFO_REMARK 端也可以这样做。

这是一个简单的例子，它没有经过测试，只是为了给你一个想法。

```
@Entity
@Table(name = "TICKETINFO")
public class Ticketinfo implements Serializable {

    @Id
    @Column(name = "TICKETINFOID")
    private Long id;
    @Column(name = "TICKETDATE")
    private String date;
    @Transient
    private string remark;
    @OneToOne
    @PrimaryKeyJoinColumn
    private TicketinfoRemark ticketInfoRemark;

    @PostLoad
    public void postLoad() {
        if (ticketInfoRemark != null)
            this.remark = ticketInfoRemark.getRemark();
    }

    @PreUpdate
    @PrePersist
    public void prePersist() {
       if (ticketInfoRemark != null)
           ticketInfoRemark.setRemark(this.remark);
    }
    //getters and setters
} 
```

希望能帮助到你。

# apache-flex - 如何在 Android 移动应用程序中读取 SD 卡数据？

> ID：10796948
> 
> 赞同：0
> 
> 时间：2012-05-29T10:03:37.653
> 
> 标签：apache-flex, flex4.5, flex-mobile, flex4.6

我正在 Flex 4.5 中构建一个 android 移动应用程序，它将从 SD 卡读取一些数据并在容器中显示数据，如图像。但我无法在 flex 移动应用程序中访问 SD 卡。请为我提供解决方案，我如何在 flex 移动应用程序中访问 SD 卡数据？

任何网络链接或代码示例将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T23:47:04.630

我相信这就是您正在寻找的。 [写入 SD](http://richard-heck.blogspot.gr/2011/01/how-to-write-file-to-android-filesystem.html)

但是，在检查代码之前，您应该确保已正确设置所需的许可。

# codeigniter - 插入用户配置文件 tank auth

> ID：10796957
> 
> 赞同：0
> 
> 时间：2012-05-29T10:04:07.080
> 
> 标签：codeigniter, tankauth

我从这个[CodeIgniter 看到了问题：Passing fields to user_profiles database with Tank_auth](https://stackoverflow.com/questions/9908899/codeigniter-passing-fields-to-user-profiles-database-with-tank-auth)

我的问题和 Davezatch 一样，但我在身份验证控制器上是这样的：

```
...
if ($this->form_validation->run()) {                                // validation ok
            if (!is_null($data = $this->tank_auth->create_user(
                    $use_username ? $this->form_validation->set_value('username') : '',
                    $this->form_validation->set_value('email'),                     
                    $this->form_validation->set_value('password'),                      
                    $this->form_validation->set_value('webiste'),
                    $email_activation))) {  
... 
```

发送到我的电子邮件时，它显示如下：

```
A PHP Error was encountered Severity: 
Notice Message: Undefined variable:
new_email_key Filename: email/activate-html.php 
Line Number: 14 
```

有什么建议吗？谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T10:53:09.607

看起来您缺少用于激活帐户的 new_email_key 。检查它是否存在于您的数据库中，同时检查您的电子邮件激活配置。

# google-maps - 如何删除 Google Maps V3 上的床图标？

> ID：10796958
> 
> 赞同：3
> 
> 时间：2012-05-29T10:04:07.403
> 
> 标签：google-maps, google-maps-api-3

我不想在嵌入我网站的地图上显示这些图标：-

![](../Images/391d4f8b2b1216cc3f872862a1d2afae.png)

有谁知道API调用是什么。我浏览了[https://developers.google.com/maps/documentation/javascript/reference](https://developers.google.com/maps/documentation/javascript/reference)并没有运气。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-29T10:38:26.167

这些是 Google 的 POI。不确定子类型（请参阅[https://developers.google.com/maps/documentation/javascript/reference#MapTypeStyleFeatureType](https://developers.google.com/maps/documentation/javascript/reference#MapTypeStyleFeatureType)），但您可以使用以下内容禁用所有类型的 POI：

```
var myStyles =[
    {
        featureType: "poi",
        elementType: "labels",
        stylers: [
              { visibility: "off" }
        ]
    }
];

var myOptions = {
    zoom: 10,
    center: new google.maps.LatLng(54.42838,-2.9623),
    mapTypeId: google.maps.MapTypeId.ROADMAP,
    styles: myStyles 
};

map = new google.maps.Map(document.getElementById("map_canvas"), myOptions); 
```

事实上，床属于“ [poi.business](http://googlegeodevelopers.blogspot.co.uk/2011/08/business-icons-and-styling-across.html) ”子类型，如果您使用，这也将防止出现商店之类的东西：

```
 featureType: "poi.business", 
```

# redirect - DNS 记录：admin.*.domain.com => 1.1.1.1 & *.domain.com => 2.2.2.2

> ID：10796961
> 
> 赞同：4
> 
> 时间：2012-05-29T10:04:17.050
> 
> 标签：redirect, dns, subdomain, record

是否可以进行这样的记录，即所有以开头的页面都`admin`被重定向到一个 IP，而其他任何页面都被重定向到另一个 IP：

```
admin.some.example.com   => 1.1.1.1
admin.thing.example.com  => 1.1.1.1
admin.else.example.com   => 1.1.1.1

some.example.com         => 2.2.2.2
thing.example.com        => 2.2.2.2
else.example.com         => 2.2.2.2 
```

请注意`some`，`thing`&`else`可以是任何东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T14:45:20.213

使用像 BIND 这样的标准 DNS 服务器是不可能做到这一点的（使用通配符标签）。您将必须实现自定义 DNS 服务器。自定义 DNS 服务器可以生成它想要的任何答案来响应查询。请注意，如果您实现了执行此操作的自定义 DNS 服务器，那么支持 DNSSEC 将是最大的困难。

# c++ - C++ 数学：拟合复杂的函数不起作用

> ID：10796964
> 
> 赞同：0
> 
> 时间：2012-05-29T10:04:36.733
> 
> 标签：c++, math, wolfram-mathematica, levenberg-marquardt

10 多天以来，我一直在努力让这个拟合操作正常工作。我使用 Levenberg-Marquardt 算法编写了一个用于拟合的 C++ 类，并用简单的多项式对其进行了测试，拟合成功；但是对于我的实验所需的真正的实验功能，它不起作用。

我在 Mathematica 上安装了相同的功能，在那里执行它是可以的（但速度很慢，每次拟合 12 秒，这就是我使用 C++ 的原因）。当我适应时，我的程序表现得很疯狂并返回错误的结果。您能否检查我使用的功能并告诉我是否有问题？

以下是我在课堂上使用的拟合过程。再一次，我想提一下它适用于多项式，所以我可能在这里犯了一个非常严重的错误，它只与一些特殊函数冲突......这是我的假设。

* * *

我使用的初始值非常接近正确值。

如果您需要任何其他信息，请告诉我。非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T13:07:46.993

好吧，快速浏览一下，你应该有

```
 parameters -= SamArray<T>::MatrixProduct(SamArray<T>::Inverse(JTJ + combinationMatrix),J); //add the new deltas to the parameters and test them

   instead of 

   parameters += SamArray<T>::MatrixProduct(SamArray<T>::Inverse(JTJ + combinationMatrix),J); //add the new deltas to the parameters and test them 
```

也就是说，当然，假设`J`是梯度而不是负梯度。
任何牛顿法或准牛顿法（如 Levenberg-Marquardt）都是这种情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-29T15:16:40.610

与其讨论代码没有给出预期结果的原因，我将讨论速度问题。你的代码中有

```
parameters += SamArray<T>::MatrixProduct(SamArray<T>::Inverse(JTJ + combinationMatrix),J); 
```

它首先计算一个矩阵逆然后乘以`J`，我认为它是另一个矩阵。`A X = I`这是低效的，因为它与先求解，然后计算基本相同`A^-1 B`，其中`A`和`X`是矩阵，并且`I`是单位矩阵。相反，最好`A X = B`直接解决 , 。有几种分解方案可以让您做到这一点，例如[QR](http://en.wikipedia.org/wiki/QR_decomposition)和[LU](http://en.wikipedia.org/wiki/LU_decomposition#Applications)。在 LU 分解中，矩阵`A`被分解为上`U`、 和下、`L`三角形部分，然后分别有效地反转，如下所示

```
A X = L U X = B
U X = L^-1 B
X = U^-1 L^-1 B 
```

这是作为算法本身的一部分执行的。如果您想要直接反转，那么您将替换`B`为`I`，但如您所见，没有必要。查看[Levenberg-Marquardt 算法](http://en.wikipedia.org/wiki/Levenberg%E2%80%93Marquardt_algorithm#The_solution)，可能是这样的情况`Transpose[J].J + DiagonalMatrix[Diagonal@J]`，使用 Mathematica 表示法，可能是正定的，然后[Cholesky 分解](http://en.wikipedia.org/wiki/Cholesky_decomposition)可用，而且速度明显更快。但是，我没有仔细研究过算法，所以在这种情况下，Cholesky 分解可能不可用。

**\begin{edit}** 在[第 1.5 章第 1.5 章。在图3](http://www.ec-securehost.com/SIAM/ot60.html)中，Stewart 讨论了两种算法的相对速度：invert-then-multiply v. LU 分解。两者具有相同的渐近复杂度，`O(n^3)`但它们的系数不同。具体来说，在求解方程 时`A X == B`，invert-then-multiply 的运算计数为，`5 n^3 /6 + l n^2`而 LU 的`n^3 /3 + l n^2`where`n`是行数，`B`并且`l`是列数。两者的比值总是大于 1，即使在 时`l == n`，LU 分解也比 invert-then-multiply 快 30%。 **\结束{编辑}**

其次，您要为每组参数计算两次卡方：一次是在最初确定它们时，另一次是在您将它们与下一次迭代进行比较时。该值应与先前接受的参数一起缓存。

最后，我不会低估 Mathematica 以[合理的速度](https://mathematica.stackexchange.com/search?q=fitting)处理拟合的能力。

# java - Spring data mongoDB保存不完整的java Bitset Object

> ID：10796970
> 
> 赞同：0
> 
> 时间：2012-05-29T10:05:01.217
> 
> 标签：java, mongodb, spring-data

我在java中的mongoDB中工作。我想将 java Bitset Object 保存在 db 中，因为只有 BSON 本机类型可以从它们的 Java 对应类型转换，所以我必须使用映射器库。

我使用 Mongo Morphia Mapper 并成功保存了 Bitset 对象。但我需要使用 Spring Data MongoDB 库来做同样的事情。但是使用spring libs的Bitset Object没有保存，保存时也没有报错。当我检索相同的对象时，我得到空的 biset 对象。以下是分别使用 Morphia 和 Spring 将数据保存在 mongo 数据库中的方式：

**吗啡**

1.  {“_id”：“testid”，“name”：“spring”，“bit”：**{“words”：[NumberLong(132)]，“wordsInUse”：1，“sizeIsSticky”：true}** }

**春天**

1.  {“_id”：“testid”，“名称”：“弹簧”，“位”：**{“单词”：[NumberLong(132)]}** }

通过比较两者，我注意到使用弹簧的 Biset 信息没有完全保存（粗体部分）。这可能是空位集对象的原因。我正在使用“spring-data-mongodb-1.0.0.M4.jar”进行保存。请任何人都可以告诉我哪里错了。我会很感激你的帮助。

谢谢

舒布拉

* * *

@Asya Kamsky

下面是我用来保存使用 spring 的代码：

```
BitSet b = new BitSet(10);  
b.set(2);  
b.set(7);

MyClass myclass = new MyClass("testid","spring",b);

ApplicationContext ctx = new AnnotationConfigApplicationContext(SpringMongoConfig.class); 

MongoOperations mongoOperation = (MongoOperations)ctx.getBean("mongoTemplate"); 

mongoOperation.save(myclass); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T10:44:55.327

您看到这种行为的原因是 Spring Data Mapping 子系统认为瞬态字段不会被持久化（相关代码在 中`AbstractPersistenProperty.isTransient()`）。我已经提交了一个[JIRA 问题，并针对 Spring Data Commons 的](https://jira.springsource.org/browse/DATACMNS-180)[1.3.x](https://github.com/SpringSource/spring-data-commons/commit/9c42393a5141ff7c0485749e7cadb735a3bd268a)和[1.4.x](https://github.com/SpringSource/spring-data-commons/commit/031129e46199fa8ce3c012a5185b455dfd6933eb)分支实施并部署了一个修复程序。您已经可以通过参考任一分支的快照版本来使用它。

# sparql - SPARQL 查询中的两个选择的联合

> ID：10796978
> 
> 赞同：7
> 
> 时间：2012-05-29T10:05:14.753
> 
> 标签：sparql, dbpedia

我想做类似的事情

```
{
    SELECT ?page, "A" AS ?type WHERE 
    {
         ?s rdfs:label "Microsoft"@en;
            foaf:page ?page
    }
}
UNION
{
    SELECT ?page, "B" AS ?type WHERE 
    {
         ?s rdfs:label "Apple"@en;
            foaf:page ?page
    }
} 
```

但这会产生语法错误。如何在 SPARQL 中合并两个选择查询？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-29T11:22:17.707

你可以像这样联合它们：

```
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX foaf: <http://xmlns.com/foaf/0.1/>

SELECT * WHERE
{ 
{
    SELECT ?page ("A" AS ?type) WHERE 
    {
         ?s rdfs:label "Microsoft"@en;
            foaf:page ?page
    }
}
UNION
{
    SELECT ?page ("B" AS ?type) WHERE 
    {
         ?s rdfs:label "Apple"@en;
            foaf:page ?page
    }
}
} 
```

（检查[SPARQL 验证器](http://sparql.org/query-validator.html)）

但是，对于这种情况，我认为您根本不需要子查询。例如：

```
PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
PREFIX foaf: <http://xmlns.com/foaf/0.1/>

SELECT ?page ?type WHERE
{
    ?s foaf:page ?page .
    { ?s rdfs:label "Microsoft"@en . BIND ("A" as ?type) }
    UNION
    { ?s rdfs:label "Apple"@en . BIND ("B" as ?type) }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-29T18:07:23.233

根据@user205512 的回答，这是适用于 Virtuoso 的答案：

```
SELECT * {
    ?s foaf:page ?page .
    {
        SELECT ?page ("A" AS ?type) {
            ?s rdfs:label "Microsoft"@en;
               foaf:page ?page
        }
    } UNION {
        SELECT ?page ("B" AS ?type) {
            ?s rdfs:label "Apple"@en;
               foaf:page ?page
        }
    }
} 
```

诀窍就是`?s foaf:page ?page`在`UNION`. 这显然是多余的，但它似乎避免了 Virtuoso 错误，这显然是当你有一个“裸”`UNION`的子查询时引起的。

# windows-phone-7 - 在没有定期任务的情况下检测 Windows Phone 中的位置变化？

> ID：10796983
> 
> 赞同：0
> 
> 时间：2012-05-29T10:05:24.070
> 
> 标签：windows-phone-7, agent

我想开发 Windows Phone 应用程序，每次用户从当前位置覆盖 100 公里时向用户发送通知。即在他离家100公里后通知，在他走完下一个100公里后再次通知，依此类推。一种解决方案是运行后台代理并轮询当前位置并将其与起始位置进行比较。但是这些定期任务需要在特定时间段（如半小时或 1 小时）后运行。有没有其他解决方案？

# rspec-rails - 如何rspec模拟open-uri？

> ID：10796986
> 
> 赞同：16
> 
> 时间：2012-05-29T10:05:28.997
> 
> 标签：rspec-rails

我有这个简单的代码，我在其中发送 http 请求并读取所有响应。这是我的导轨代码

```
open("http://stackoverflow.com/questions/ask") 
```

我如何为这行代码编写规范。我没有使用 mocha 和 webmock 的选项。我只能使用 Rpsec 的模拟框架。

我试图使用这个语句

```
OpenURI.stub!(:open_uri).should_receive(:open).with("http://stackoverflow.com/questions/ask") 
```

但我不断收到此错误

```
RSpec::Mocks::MockExpectationError: (#<RSpec::Mocks::MessageExpectation:0xd1a7914>).open("http://stackoverflow.com/questions/ask")
expected: 1 time
received: 0 times 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-29T08:41:09.307

我以为`open`方法是在级别上定义的`Kernel`，但我错了。

如果你想模拟`open`，你应该像这样**在你的对象级别上**做：

```
it "should do something" do
  object_under_test = ObjectUnderTest.new
  object_under_test.should_receive(:open).with("http://example.org")
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T17:06:20.907

根据此链接[http://distillations.2rye.com/2011/08/mock-the-web-openuri/](http://distillations.2rye.com/2011/08/mock-the-web-openuri/) open 函数是在内核模块上定义的，但混合到您的控制器中。因此，您需要在该级别存根调用。此解决方案适用于 RSpec 控制器测试：

```
 html_content = <<-EOS
          <html><head>
           <title>Some Title</title>
          </head>
          <body>Some Content</body></html>
        EOS

  YourController.any_instance.stub(:open).and_return html_content 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-15T20:48:50.183

我做了：

```
my_object.stub_chain(:open, :read) { "my return value" } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-05-03T22:14:06.213

要存根`open-uri`，您可以使用此语法**RSpec 3+**

```
file = double('file')
expect(OpenURI).to receive(:open_uri).and_return(file) 
```

# c# - WCF 体系结构和演进版本

> ID：10796987
> 
> 赞同：5
> 
> 时间：2012-05-29T10:05:29.387
> 
> 标签：c#, wcf

这个问题是围绕如何构建 WCF 服务以使其易于随着时间的推移而发展的。如果不描述问题，很难得到对此的深度回应。

**背景**

我正在开发一个大型的 WCF 服务和客户端系统。服务器端“易于”更新，因为只有 10 台服务器在运行此代码。

尽管自动化程度很高，但客户端很难更新，在 300,000+ WCF 客户端中，更新总是需要时间，并且只能在两到三周的时间内达到很高的更新成功率。

**数据合同**

```
[DataContract]
public class MyContract
{
    [DataMember]
    public int Identity {get; set;}

    [DataMember]
    public string Name {get; set;}

    // More members
} 
```

`DataContract`很难初始化，并且有一个标准类`MyContractFactory`来初始化为您的机器获取适当的实例。

```
public class static MyContractFactory
{
    public static MyContract GetMyContract()
    {
        // Complex implementation
    }
} 
```

**服务合同**

这`DataContract`在一系列 Web 服务中非常常见。

```
namespace MyPrefix.WebServicve1
{
    [ServiceContract]
    public class IMyInterface1
    {
        [OperationContract]
        public void DoSomethingWithMyContract(MyContract data);
    }

    [ServiceContract]
    public class IMyInterface2
    {
        [OperationContract]
        public void DoSomethingDifferentWithMyContract(MyContract data);
    }
} 
```

**客户**

我的客户端是基于插件的，插件在单独的进程或应用程序域中运行，具体取决于我们对该插件的信任级别。

**实施1**

我对这个（默认 WCF）的初始实现最终`DataContract`在一个程序集中`ServiceContract`， 和在它自己的程序集中实现。

客户最终得到了一个非常丑陋的，

```
MyWebService1.MyContract
MyWebService2.MyContract 
```

`MyContractFactory`几乎每个插件都有一个复制和粘贴。虽然`DataContract`是相同的，但客户端不包含`DataContract`程序集的事实意味着它作为不同的对象出现在不同的命名空间下。

**实施 2**

客户端现在包含`DataContract`程序集，`ServiceContracts`在服务实现的单独程序集中，`ServiceContract`如果它有助于代码重用（不再复制和粘贴），客户端可以包含一些程序集。

**问题**

在第二个实现中，我现在面临的困难是，如何更新我的`DataContract`and `ServiceContracts`？

1.  我是否更新相同的程序集并增加版本号？在所有客户端升级时如何保持向后兼容性？在客户端更新之前中断客户端是不可接受的。

2.  我是否创建一个新的程序集，其类扩展`MyDataContract`、新方法接受新类型下的新类型`ServiceContract`？这是否意味着对于我的合同的每一次细微更改，我都需要一个新的组件？我将如何阻止它在几年内达到数百个？

3.  其他一些解决方案？

不管我考虑了哪些解决方案，它们似乎都有一个主要的缺点。

似乎没有（至少对我而言），

*   在客户端更新之前保持向后兼容性
*   随着软件随着时间的推移而不断发展，让客户保持整洁而不臃肿
*   没有严重污染我的（需要一个新的“名字”的`ServiceContract`重载）。`OperationContract`我已经有类似下面的东西了，随着时间的推移，它让我觉得是一场噩梦。

*操作合同复杂性*

```
[OperationContract]
public void DoSomethingWithMyContract(MyContract data);

[OperationContract(Name = "DoSomethingWithMyDataByAdditionalData"]
public void DoSomethingWithMyContract(MyContract data, MyContract2 additionalData); 
```

我正在寻找一种在大规模环境中工作了一段时间的解决方案。博客条目等非常受欢迎。

**更新 1**

通过使用“无模式”更改的限制，不同的命名空间似乎是唯一确定的方法。然而，它并不像预期的那样工作，例如下面

```
[ServiceContract(
    Name = "IServiceContract",
    Namespace = "http://myurl/2012/05")]
public interface IServiceContract1
{
    // Some operations
}

[ServiceContract(
    Name = "IServiceContract",
    Namespace = "http://myurl/2012/06")]
public interface IServiceContract2
{
    // Some different operations using new DataContracts
} 
```

通过以下服务

```
public class MyService : IServiceContract1, IServiceContract2
{
    // Implement both operations
} 
```

和以下配置

```
 <service behaviorConfiguration="WcfServiceTests.ServiceBehavior"
    name="Test.MyService">
    <endpoint
      address="2012/05"
      binding="wsHttpBinding"
      contract="Test.IServiceContract1">
      <identity>
        <dns value="localhost" />
      </identity>
    </endpoint>
    <endpoint
      address="2012/06"
      binding="wsHttpBinding"
      contract="Test.IServiceContract2">
      <identity>
        <dns value="localhost" />
      </identity>
    </endpoint>
    <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
  </service> 
```

结果是两个具有两个不同名称的合同，我希望我可以指出我的客户，

[旧版本http://myurl.com/MyService.svc/2012/05](http://myurl.com/MyService.svc/2012/05) 和[http://myurl.com/MyService.svc/2012/06](http://myurl.com/MyService.svc/2012/06)

，但似乎如果我想保留 ServiceContract 名称，它们必须是两个单独的服务，而不是同一服务的单独端点地址？

**更新 2**

我最终使用了我在**update 1**中描述的方法。虽然 WSDL 看起来有问题，但当我对此进行测试时，该服务在旧客户端下确实是向后兼容的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-29T10:18:38.673

微软和大多数受人尊敬的 WCF 大师可能都会说同样的话：版本控制应该使用合同**命名空间**来处理。

我不是指你的程序集的 .NET 命名空间——我是指实际的 WCF 服务（和数据协定）命名空间——所以你应该有：

```
[ServiceContract(Namespace="http://services.yourcompany.com/Service1/V01"] 
```

或类似的东西 - 有些人喜欢按年/月进行版本：

```
[ServiceContract(Namespace="http://services.yourcompany.com/Service1/2012/05"] 
```

这允许您拥有同一服务的多个版本，并且只要客户端使用旧版本（由服务命名空间指示）调用，他们就会获得旧版本（只要您仍然公开它）。

看：

*   [最佳实践：数据合同版本控制](http://msdn.microsoft.com/en-us/library/ms733832.aspx)
*   [服务版本控制](http://msdn.microsoft.com/en-us/library/ms731060.aspx)

# objective-c - URLWithString"http://google.com" VS URLWithString"http://apple.com"

> ID：10796988
> 
> 赞同：0
> 
> 时间：2012-05-29T10:05:33.423
> 
> 标签：objective-c, nsstring, nsurl

我有以下代码。

```
NSURL *serverUrl = [NSURL URLWithString:@"http://google.com"];
NSError *error = nil;
NSString *stringFromStream = [NSString stringWithContentsOfURL:serverUrl encoding:NSUTF8StringEncoding error:&error];
NSLog(@"string is %@ error is %@", stringFromStream, error); 
```

这段代码产生以下错误

```
2012-05-29 11:57:46.914 [2221:f803] string is (null) error is Error Domain=NSCocoaErrorDomain Code=261 "The operation couldn’t be completed. (Cocoa error 261.)" UserInfo=0x6a36c60 {NSURL=http://google.com, NSStringEncoding=4} 
```

但是如果我将 URL 更改为

```
NSURL *serverUrl = [NSURL URLWithString:@"http://apple.com"]; 
```

我会完美地工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T10:12:24.047

内容的编码可能不是 UTF-8。试试这个方法：

```
- (id)initWithContentsOfURL:(NSURL *)url
               usedEncoding:(NSStringEncoding *)enc
                      error:(NSError **)error; 
```

（`release`当`NSString`你完成它时，你必须这样做）。

[参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)。

# .net - 如何在 Treeview 控件上工作以支持 Windows 窗体中的拖放

> ID：10796991
> 
> 赞同：0
> 
> 时间：2012-05-29T10:05:42.480
> 
> 标签：.net, winforms, c#-4.0

> 任何人都可以为支持拖放的WINDOWS APP推荐一个树视图组件（在它自己的节点之间 - 它用于内容管理系统重新排列页面）。不要介意它是开源的还是商业的（虽然不能完全延伸到 Telerik 的树视图）。耻辱..

还有其他选择吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-29T16:06:43.180

可能你正在寻找这样的[东西](http://www.dotnetspider.com/resources/4582-Drag-Drop-functionallity-tree-view.aspx)

> 1.开始一个新的Winforms项目。在窗体上拖动一个树视图控件。
> 
> 2.通过TreeView节点集合属性用不同的节点填充树视图。
> 
> 3.转到属性窗口，将**AllowDrop**属性设置为**true**。
> 
> 4.最后为tree view的三个不同事件编写代码。这三个事件分别是ItemDrag、DragEnter和DragDrop。

```
using System.Drawing;
using System.Windows.Forms;

namespace WindowsFormsApplication1
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void OnDragEnter(object sender, DragEventArgs e)
        {
            e.Effect = DragDropEffects.Move;
        }

        private void OnItemDrag(object sender, ItemDragEventArgs e)
        {
            DoDragDrop(e.Item, DragDropEffects.Move);
        }

        private void OnDragDrop(object sender, DragEventArgs e)
        {
            TreeNode NewNode;

            if (e.Data.GetDataPresent("System.Windows.Forms.TreeNode", false))
            {
                Point pt = ((TreeView)sender).PointToClient(new Point(e.X, e.Y));
                TreeNode DestinationNode = ((TreeView)sender).GetNodeAt(pt);
                NewNode = (TreeNode)e.Data.GetData("System.Windows.Forms.TreeNode");

                if (DestinationNode.TreeView == NewNode.TreeView)
                {
                    DestinationNode.Nodes.Add((TreeNode)NewNode.Clone());
                    DestinationNode.Expand();
                    NewNode.Remove();
                }
            }
        }
    }
} 
```

# cvs - cvs更新后如何自动运行脚本？

> ID：10796993
> 
> 赞同：1
> 
> 时间：2012-05-29T10:05:47.407
> 
> 标签：cvs, vcs-checkout

每天早上我都会使用`cvs update`. 问题是 CVS 存储了我的密码。我通常`cvs logout`从 cmd 键入，以便不再使用我的用户。这样我可以防止自己意外提交到 CVS。关于如何在运行后自动注销有什么想法`cvs update`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T10:09:08.090

CVS 有提交前和提交后的钩子。没有更新挂钩。[https://priyamuthukumar.wordpress.com/tag/cvs-hooks/](https://priyamuthukumar.wordpress.com/tag/cvs-hooks/)

最简单的方法是编写一个更新然后注销的脚本。

# oop - OOP：应用程序架构问题

> ID：10796994
> 
> 赞同：0
> 
> 时间：2012-05-29T10:05:50.073
> 
> 标签：oop, architecture

*（这个问题没什么严重的）*

有一次我读过这样一个“糟糕的应用程序架构”的例子：

有一个“渲染应用程序”（浏览器，据我记得），所以有人告诉我，在 TagA、TagUL、TagDIV 类中使用“render()”方法是非常糟糕的做法，因为你会有很多“渲染代码”到处都是。所以（在这个例子中），他们建议使用 RenderA、RenderUL、RenderDIV 类来实现渲染。并且标签对象将封装这些渲染器。

我不明白为什么这是一个不好的做法。在这种情况下，我们将在 Render-* 对象周围涂抹大量渲染代码。最后，为什么不让 Redner-singleton 有很多被覆盖的方法呢？这听起来，至少，更便宜。

**读什么才能**更好地理解它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-29T10:11:26.450

所有这些不同对象的渲染是否相同？如果是这样，那么它应该只实现一次，最有可能在基类中实现。这将是一个比[Singleton](http://en.wikipedia.org/wiki/Singleton_pattern)更好的解决方案，后者的目的完全不同：主要是实现一个应该只存在一次的资源（注意它是一个资源，而不是一个方法）。

如果 render() 的每个实现都不同（很可能是这种情况），那么在单独的对象中实现它们就没有错，这称为[多态](http://en.wikipedia.org/wiki/Polymorphism)。不过，可能应该做的是有一个类层次结构，其中 render() 方法在基类中定义（很可能是抽象的）并在派生类中实现。这有效地形式化了接口，这意味着从所述基类继承的任何类都将具有可用的 render() 方法并且必须实现它。

如果您有部分渲染代码是公用的，以及特定于派生类的部分，则不必在所有派生类实现中复制公用部分，您可以使用[模板方法](http://en.wikipedia.org/wiki/Template_pattern)模式，即基类方法执行公共部分，并协调调用派生类实现。这是 C++ 中的伪代码示例

```
class TagBase {
public:
    void render() {
        // do some common stuff here
        doRender();
        // do some more common stuff here
    }

    virtual void doRender() = 0;
    ....
};

class TagA : public TagBase {
public:
    virtual void doRender() {
        // do your specific stuff here
    }
}; 
```

这里有几本好书：

*   [设计模式，四人组](https://rads.stackoverflow.com/amzn/click/com/0201633612)
*   [头部优先设计模式](https://rads.stackoverflow.com/amzn/click/com/0596007124)
*   [Head First 面向对象分析与设计](https://rads.stackoverflow.com/amzn/click/com/0596008678)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-29T12:43:56.440

> 我不明白为什么这是一个不好的做法。

如果标签本身不负责呈现自己，这可能是一种不好的做法 - 请参阅[单一职责原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)。

例如，如果 Tag 类已经包含 HTML 解析行为并且您向其添加渲染，那么它将有 2 个职责、2 个更改的原因，并且可能会中断。由于它们的搭配，解析将与渲染紧密耦合，这带来了许多问题：

*   您不能独立于另一个职责更改或添加一个变体 - 例如，除了桌面浏览器渲染之外添加移动浏览器渲染将需要编写另一个重复解析行为的类。具有更集中职责的更小类意味着更多的活动部件和增加的模块化。

*   一个类嵌入的职责越多，当您对其进行更改时，可能会意外出现更多的错误和副作用。在许多情况下，很难判断这两个职责中的哪一个导致了这个错误。

*   您必须重新构建、重新测试和重新部署一个类中包含的所有职责，即使您只更改其中一个职责。

*   当其他职责可以干扰时，调试其中一项职责也更加困难。

# android - 在某些设备上替换 imageview 中现有的 drwable 是错误的

> ID：10796996
> 
> 赞同：0
> 
> 时间：2012-05-29T10:06:02.537
> 
> 标签：android, imageview, drawable, scale

**情况：**

我有一个带有两个 drwable 图层列表的图像视图。可绘制的框架为 800x400 像素，可绘制的封面为 800x380 像素。两个图像都位于可绘制的文件夹中

```
<ImageView
    android:id="@+id/preview_img_view"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_weight="0.9"
    android:adjustViewBounds="true"
    android:src="@drawable/result_preview"/> 
```

drawable/result_preview 中的 Drwable 图层列表

```
<layer-list xmlns:android="http://schemas.android.com/apk/res/android">
<item
    android:id="@+id/cover">
    <bitmap
        android:gravity="left|top"
        android:src="@drawable/cover" />
</item>
<item
    android:id="@+id/frame">
    <bitmap
        android:gravity="left|top"
        android:src="@drawable/frame" />
</item>
</layer-list> 
```

此设置按预期工作，封面显示在所有设备上。现在用户可以将样品盖更换为相同尺寸的另一个盖。

替换图层列表中的封面并保持框架不变。

```
LayerDrawable layer = (LayerDrawable) getResources().getDrawable(R.drawable.result_preview);

InputStream coverIs = getContentResolver().openInputStream(Uri.parse(coverUri));
this.drwCover = (BitmapDrawable) BitmapDrawable.createFromStream(coverIs, coverUri);
drwCover.setGravity(Gravity.LEFT | Gravity.TOP);
//drwCover.getBitmap().setDensity(160);
layer.setDrawableByLayerId(R.id.cover, drwCover);
    imageView.setImageDrawable(layer); 
```

**问题：**

用新的盖子（与旧的尺寸相同）更换当前的盖子会产生不同的结果，具体取决于所使用的设备。

在具有 3.2 屏幕和 480x320 分辨率的设备上，更换的盖子适合框架。在分辨率为 3.7 和 800x480 的设备上，更换后的封面显示得比旧封面小。

我发现小型设备上的 imageview 中的可绘制对象具有 800x400 的固有高度，与可绘制对象的尺寸相同。在更大的屏幕上，drawable 的固有高度要大 30%。

我知道内在价值可能因屏幕而异。

我所期待的是，替换旧的drawable 应该像旧的那样按比例放大到+30%。但这并没有发生。

**问题：**

是否可以选择将图像视图或图层列表告知 Adpt 本身？我认为应该有办法做到这一点，因为系统一开始就已经这样做了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T10:17:53.000

首先，我建议以不同的方式制作封面/框架：

1.  使您的框架成为[可绘制的九个补丁](http://developer.android.com/guide/developing/tools/draw9patch.html)，因此您可以在九个补丁中定义当在其顶部绘制封面时将保持可见的填充。
2.  将可绘制的框架作为`background`
3.  将封面设置为`src`图像的，而不是图层列表
4.  不要忘记`scaleType`为您设置一个`ImageView`，玩不同的选项，以满足您的需求。

> ```
> <ImageView
>     android:id="@+id/preview_img_view"
>     android:layout_width="fill_parent"
>     android:layout_height="fill_parent"
>     android:layout_weight="0.9"
>     android:adjustViewBounds="true"
>     android:scaleType="fitCenter"
>     android:background="@drawable/frame"
>     android:src="@drawable/cover"/> 
> ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T18:28:00.713

对于其他有同样问题的人。9patch png 是我没有的问题的解决方案。

到目前为止，唯一接近解决问题的方法是将我的资源放入文件夹 drawable-nodpi 中。 [这是对文档的参考](http://developer.android.com/guide/practices/screens_support.html)