# StackOverflow 问答 10413000-10413999

# android - 访问android子目录中的资产？

> ID：10413002
> 
> 赞同：1
> 
> 时间：2012-05-02T11:41:12.820
> 
> 标签：android, eclipse

我正在重用我的 iphone 资源，我有无数的资源，这些资源有很多子目录/subdir1/subdir2/subdir3/test1.png 我必须提到整个相对路径，正如我已经说过的，我使用了很多本机代码，所以有什么方法可以只使用文件名访问资产文件而不使用完整的相对路径路径“test1.png”？或者，如果这是不可能的，我们是否可以在逻辑上构建我们的资源，但文件夹名称实际上并不存在。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T11:48:19.020

> 我知道要打开资产，我们必须为 ex 提供相对路径，如果我在 assets/subdir1/subdir2/subdir3/test1.png 中有文件名 test1.png 我必须提到整个相对路径

使用`AssetManager`和 之类的方法`open()`，您将没有`assets/`相对路径的部分。在您的示例中，您将使用`open("subdir1/subdir2/subdir3/test1.png")`.

> 正如我已经说过的，我使用了很多本机代码，所以有什么方法可以只使用文件名访问资产文件，而无需完整的相对路径“test1.png”？

当然不是。您可能`test1.png`在整个`assets/`树中命名了 10,000 个文件——我们需要知道要打开哪些文件。

此外，AFAIK，本机代码无法访问资产。

> 或者，如果这是不可能的，我们是否可以在逻辑上构建我们的资源，但文件夹名称实际上并不存在。

无论您在项目中物理地作为目录树放置的任何`assets/`内容都是您在通过`AssetManager`. 如果您不想使用 处理子目录`AssetManager`，请不要在其中创建子目录`assets/`

# openerp - OpenERP：开发或修改模块？

> ID：10413003
> 
> 赞同：1
> 
> 时间：2012-05-02T11:41:13.137
> 
> 标签：openerp

我目前正在从事一个项目，其目标是使用 OpenERP 进行库存管理（仓库）。确定需求后，发现OpenERP提供的模块太宽泛了。

是开发我自己的模块还是修改现有的模块，我发现它非常复杂？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T15:27:16.933

最好使用现有模块，如果需要将不需要的部分隐藏在重载视图中以掩盖不需要的复杂性。它将为您节省宝贵的开发和维护时间，并确保将仓库管理正确集成到 ERP 的其余部分中。

不要修改现有模块。编写另一个扩展现有的缺少字段、自定义视图、扩展工作流和新向导。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T08:48:31.263

是的，您可以自定义一个模块供您自己使用，openERp 的基本目标是用户可以自定义和使用自己的模块，因此我们添加了一些字段，就像您可以删除您不想要的字段一样。

# java - 鼠标单击 JLabel 数组（Java）

> ID：10413007
> 
> 赞同：0
> 
> 时间：2012-05-02T11:41:33.943
> 
> 标签：java, arrays, swing, jlabel, mouse-listeners

我在 java 上创建了一个`JLabels`[9][9] 数组。`JLabels`当我在这些标签上单击鼠标时，我想将这些设置为可见。任何人都可以帮助我吗？

```
I tried this:
    //labels[c][d].addMouseListener(null);
    public void mouseClicked(MouseEvent me){
    //        for(Integer i=1;i<10;i++)
    //        {
    //            for(Integer j=1;j<10;j++)
    //            {
    //               
    //                if (me.getSource()==labels[i][j]);
    //                {
    //                  
    //                    labels[1][1].setVisible(true);
    //                }
    //            }
    //       
    //    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T12:07:35.417

使用[Swing JToolbarButton](https://stackoverflow.com/a/7360696/418556)[`JToggleButton`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JToggleButton.html)中所示的按下。

![](../Images/0cb9744231015c2eefa4c23492a9d34c.png)

在您的用例中，未选择的绿色图像将只是完全透明的图像，或者是所需 BG 颜色的图像。

更具体的例子：

![切换图像](../Images/6ae086d49463a5a36c090d545d7f8c06.png)

```
import java.awt.*;
import java.awt.image.*;
import javax.swing.*;

class ToggleImage {

    public static JToggleButton getButton(
        Image selected,
        Image unselected) {

        JToggleButton b = new JToggleButton();
        b.setSelectedIcon(new ImageIcon(selected));
        b.setIcon(new ImageIcon(unselected));
        b.setBorderPainted(false);
        b.setContentAreaFilled(false);
        b.setFocusPainted(false);
        b.setMargin(new Insets(0,0,0,0));

        return b;
    }

    public static Image getImage(boolean hasSquare) {
        int size = 60;
        BufferedImage bi = new BufferedImage(
            size,size,BufferedImage.TYPE_INT_ARGB);
        Graphics2D g = bi.createGraphics();

        if (hasSquare) {
            g.setColor(Color.RED);
            g.fillRect(1,1,size-2,size-2);
        }

        g.dispose();
        return bi;
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater( new Runnable() {
            public void run() {
                Image selected = getImage(true);
                Image unselected = getImage(false);

                int row = 2;
                int col = 5;
                JPanel p = new JPanel(new GridLayout(row,col));

                for (int ii=0; ii<row*col; ii++) {
                    p.add( getButton(selected, unselected) );
                }

                JOptionPane.showMessageDialog(null, p);
            }
        });
    }
} 
```

请注意，按钮将对鼠标和键盘输入做出反应，而（默认情况下）标签不会。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T12:31:30.637

您发布的代码似乎还不错。但是您总是将标签设置在 index `[1][1]`visible 而不是使用`[i][j]`.

当然，如果你`JLabel`真的是你的来源，`MouseEvent`你可以完全放弃整个循环机制，例如，如果你使用

```
me.getSource()==labels[i][j] 
```

要确定需要将哪个标签设置为可见，您可以将整个双循环替换为

```
((JLabel)me.getSource()).setVisible( true ); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-02T12:33:56.923

我希望这有帮助。

```
import java.awt.BorderLayout;
import java.awt.GridLayout;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;

import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;

public class Clicker extends JPanel {
    private static final int ROWS = 9; 
    private static final int COLUMNS = 9;

    public Clicker() {
        setLayout(new GridLayout(COLUMNS, ROWS));

        JLabel labels[][] = new JLabel[ROWS][];
        for (int i = 0; i < ROWS; i++) {
            labels[i] = new JLabel[COLUMNS];    
        }

        for (int i = 0; i < ROWS; i++) {
            for (int j = 0; j < COLUMNS; j++) {
                labels[i][j] = new JLabel();
                labels[i][j].addMouseListener(createMouseListener());
                add(labels[i][j]);
            }
        }
    }

    public MouseAdapter createMouseListener() {
        return new MouseAdapter() {
            @Override
            public void mousePressed(MouseEvent e) {
                JLabel label = (JLabel)e.getSource();

                if (!label.isEnabled()) {
                    label.setText("");
                    label.setEnabled(true);
                } else {
                    label.setText("Clicked");
                    label.setEnabled(false);
                }
            }
        };
    }

    public static void main(String[] args) {
        JFrame frame = new JFrame("Click me demo.");
        frame.setSize(500, 500);
        frame.setLayout(new BorderLayout());
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(new Clicker(),BorderLayout.CENTER);
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-02T12:10:08.067

如果所有这些 JLabel 在开始时都是不可见的 - 他们将无法捕捉鼠标/按键事件。如果您只想在点击它们后显示标签内容 - 只是不要在他们收到点击之前设置它们的文本，如下所示：

```
public static void main ( String[] args )
{
    JFrame frame = new JFrame ();
    frame.setLayout ( new GridLayout ( 9, 9 ) );
    frame.getContentPane ().setPreferredSize ( new Dimension ( 300, 300 ) );

    final Random random = new Random ();
    for ( int i = 0; i < 9; i++ )
    {
        for ( int j = 0; j < 9; j++ )
        {
            final JLabel label = new JLabel ( "", JLabel.CENTER );
            label.setBorder ( BorderFactory.createLineBorder ( Color.LIGHT_GRAY ) );
            label.addMouseListener ( new MouseAdapter ()
            {
                public void mousePressed ( MouseEvent e )
                {
                    label.setText ( "" + random.nextInt ( 100 ) );
                }
            } );
            frame.add ( label );
        }
    }

    frame.setDefaultCloseOperation ( JFrame.EXIT_ON_CLOSE );
    frame.pack ();
    frame.setLocationRelativeTo ( null );
    frame.setVisible ( true );
} 
```

# php - 在 PHP 中实现多线程

> ID：10413016
> 
> 赞同：0
> 
> 时间：2012-05-02T11:41:57.293
> 
> 标签：php

我正在用 php 编写一种测试系统来测试我的数据库记录。我为每个测试用例分离了 php 文件。一个（主）文件以 URL 字符串的形式给出了测试编号和该测试的输入参数。该文件确定测试编号并根据测试编号调用适当的测试用例。现在我有一堆要传递的 URL 字符串，我希望将它们传递给那个（主）文件，并且每个测试用例在接收到它的参数后开始独立工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T12:32:35.310

PHP 是一个单线程实体，目前不存在多线程。但是，当人们通常问我有关多线程的问题时，您可以做一些事情来获得类似（但不相同）的用例结果。同样，PHP 中没有多线程，但下面的一些内容可能会帮助您进一步创建具有符合您要求的特征的东西。

*   libevent：您可以使用它为 PHP 创建一个事件循环，从而减少阻塞问题。见[http://www.php.net/manual/en/ref.libevent.php](http://www.php.net/manual/en/ref.libevent.php)
*   curl_multi：另一个有用的库，可以触发 get/post 到其他服务。
*   过程控制：我自己没有使用过，但如果过程控制是您问题的一个方面，它可能是有价值的。[http://uk.php.net/pcntl](http://uk.php.net/pcntl)
*   Gearman：现在这个我已经用过了，非常好。它允许您创建工作人员并将进程分拆到队列中。您可能还想查看 rabbit-php 或 ZeroMQ。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T12:13:08.300

PHP 不是多线程的，它是单线程的。您不能在 PHP 中启动新线程。您最好的选择是`file_get_contents`（或 cURL）到另一个 PHP 脚本以“模仿”线程。真正的多线程在 PHP 中不可用。

[您还可以在http://phplens.com/phpeverywhere/?q=node/view/254](http://phplens.com/phpeverywhere/?q=node/view/254)上查看 John 的帖子。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-02T11:47:46.413

您可以做的是使用[cURL](http://php.net/manual/en/book.curl.php)将请求发送回服务器。将处理请求并返回结果。

一个例子是：

```
$c = curl_init("http://servername/".$script_name.$params);
curl_setopt($c, CURLOPT_RETURNTRANSFER, true);
$result = curl_exec($c);
curl_close($c); 
```

虽然这不被认为是多线程，但它可以用来实现您的目标。

# android - Android 随机播放音乐

> ID：10413017
> 
> 赞同：0
> 
> 时间：2012-05-02T11:41:59.190
> 
> 标签：android

现在我可以在android中播放音乐了。但是我想在 2 到 8 秒之间的随机时间内播放这个声音。我怎样才能随机播放它，例如第一次播放 2 秒，下一次播放 7 秒等等？有谁能够帮我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T12:08:56.930

浏览这些链接：

[随机数生成](http://developer.android.com/reference/java/util/Random.html)

[媒体播放器](http://developer.android.com/reference/android/media/MediaPlayer.html)

[定时器](http://developer.android.com/reference/java/util/Timer.html)

你会有一个想法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T12:24:13.913

android中的声音是这样播放的：

```
AudioManager audioManager = (AudioManager) getSystemService(AUDIO_SERVICE);
int mSoundID = mSoundPool.load(this, R.raw.sound1, 1);
            float lActualVolume = (float) audioManager
                    .getStreamVolume(AudioManager.STREAM_MUSIC);
            float lMaxVolume = (float) audioManager
                    .getStreamMaxVolume(AudioManager.STREAM_MUSIC);
            float lVolume = lActualVolume / lMaxVolume;
            // Is the sound loaded already?
            if (mSoundIsLoaded) {
                mSoundPool.play(mSoundID, lVolume, lVolume, 1, 0, 1f); 
```

我认为你已经得到了很多帮助来计算出随机数部分。您必须将声音文件放在 assets/raw 目录中。

编辑：我忘了提到 mSoundIsLoaded 参数的来源。我在加载声音时设置它。我在我的 onCreate 方法中执行此操作。加载声音时，我设置了名为 mSoundIsLoaded 的布尔字段。我这样做是为了在播放声音时防止 NullPointerExceptions 声音的加载看起来像这样：

```
mSoundPool = new SoundPool(10, AudioManager.STREAM_MUSIC, 0);
            mSoundPool.setOnLoadCompleteListener(new OnLoadCompleteListener() {
                @Override
                public void onLoadComplete(SoundPool soundPool, int sampleId,
                        int status) {
                    mSoundIsLoaded = true;
                }
            });
            mSoundID = mSoundPool.load(this, R.raw.sound1, 1); 
```

# c# - 在 MVC 中编写自定义属性时需要帮助

> ID：10413021
> 
> 赞同：1
> 
> 时间：2012-05-02T11:42:17.660
> 
> 标签：c#, wpf, asp.net-mvc

我必须编写自定义属性来使用 MVC 模式检查依赖属性。我正在使用 System.ComponentModel.DataAnnotations 来检查必填字段。我的 WPF 应用程序包含列表视图控件。第一次加载视图时，我在模态类中编写的所有属性都会填充到列表视图中。我正在提供用户可以在列表视图中包含/排除新属性的功能。但是我不想让用户排除其他属性所依赖的那些属性。

例如，如果 securitynumber 属性依赖于 employeename 属性。在排除员工姓名时，我想显示“安全号码取决于员工姓名，因此不能排除员工姓名”的验证消息

我需要帮助编写和使用自定义属性，例如

```
[Dependencyon("Employeename")]
public object securitynumber { get ;set ;} 
```

并希望在我需要的任何地方获得“Dependencyon”的价值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T12:17:23.087

你有三个选择：

A）您可以使用 CustomValidationAttribute 并提供自定义构建的验证器。

[http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.customvalidationattribute.validatortype(v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.customvalidationattribute.validatortype(v=vs.95).aspx)

B) 您可以创建一个继承自 ValidationAttribute 的类。

[http://msdn.microsoft.com/en-us/library/cc668224.aspx](http://msdn.microsoft.com/en-us/library/cc668224.aspx)

C）如果您只想在 MVC 操作上执行此操作，您可以根据 gordatron 的响应创建一个 ActionFilterAttribute。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T12:04:06.450

我猜你正在寻找创建一个自定义过滤器。它已经有一段时间了，但从记忆中我认为它会是这样的：

```
public class Dependencyon : ActionFilterAttribute {

    string field;

    public Dependencyon (string field){
        this.field = field;
    }

    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        //check whether field is populated and redirect if not?    
    }
} 
```

这是 ActionFilters 的入门：

[http://www.asp.net/mvc/tutorials/older-versions/controllers-and-routing/understanding-action-filters-cs](http://www.asp.net/mvc/tutorials/older-versions/controllers-and-routing/understanding-action-filters-cs)

（我不记得有关这些构造函数参数的详细信息，所以我可能离题了..对不起，但我想尝试不会花很长时间）

# c# - 改进满足特定条件的项目的LINQ查询返回索引

> ID：10413026
> 
> 赞同：3
> 
> 时间：2012-05-02T11:42:41.927
> 
> 标签：c#, linq, c#-4.0

我有这个 LINQ 查询，它返回数组中所有项目的索引，其时间值（即 a `double`）满足以下查询中的特定条件。

```
var sonicIndices = completeLog.Select((item, index) => new { Item = item, Index = index })
            .Where(x => Math.Abs(x.Item.time - nullValue) > 0.001)
            .Select(item => item.Index).ToArray(); 
```

我很确定这可以改进，但是如何改进呢？我难住了。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T11:50:30.097

我看不出有什么特别的问题，它需要以什么方式变得更好？*如果您想要此类*事情的可重用方法，请参阅：[Getting a collection of index values using a LINQ query](https://stackoverflow.com/questions/237377/getting-a-collection-of-index-values-using-a-linq-query)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T11:53:26.790

不是改进，而是做同样事情的另一种方式：

```
var sonicIndices = Enumerable.Range(0, completeLog.Length)
                   .Where(i => Math.Abs(completeLog[i].time - nullValue) > 0.001)
                   .ToArray(); 
```

# audio - 嵌入 youtube 播放列表的音频

> ID：10413030
> 
> 赞同：1
> 
> 时间：2012-05-02T11:42:55.767
> 
> 标签：audio, youtube

我使用以下代码嵌入 youtube 视频并仅显示控件，因此它仅播放音频：

```
 <object height="25" width="610"><param name="movie" value="http://www.youtube.com/v/-YhQ7BetDdM&hl=en_US&color1=0xf4f4f4&color2=0xffffff&hd=0&fs=0">
    </param>
    <param name="allowFullScreen" value="true">
    </param>
    <param name="allowscriptaccess" value="always">
    </param>
    <embed src="http://www.youtube.com/v/-YhQ7BetDdM&hl=en_US&color1=0xf4f4f4&color2=0xffffff&hd=0&fs=0" height="25" width="610" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always"> </embed>
    </object> 
```

我想知道如何用视频播放列表做同样的事情？我只想显示控件。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2014-09-09T19:16:48.343

我认为这可能是您想要的链接-> [网站](http://www.labnol.org/internet/youtube-audio-player/26740/ "链接到该网站")

你需要的是：

```
 `<div style="position:relative;width:267px;height:25px;overflow:hidden;">
  <div style="position:absolute;top:-276px;left:-5px">
    <iframe width="300" height="300" 
      src="https://www.youtube.com/embed/youtubeID?rel=0">
    </iframe>
  </div>
</div>
` 
```

# java - 右键单击树视图的项目时显示菜单

> ID：10413033
> 
> 赞同：1
> 
> 时间：2012-05-02T11:43:01.757
> 
> 标签：java, javascript, jquery, html, treeview

我有一个树视图，我想为不同的项目添加右键单击支持。我是这样做的：

[http://jsfiddle.net/doonot/xWjSz/](http://jsfiddle.net/doonot/xWjSz/)

该菜单仅显示第一个根模块（右键单击后），而不显示其余根模块。你能告诉我为了获得所有根模块的菜单我必须改变什么吗？

非常感谢，非常感谢您的回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T11:57:12.630

嗨，**请参阅此演示** [http://jsfiddle.net/hYJPv/1/](http://jsfiddle.net/hYJPv/1/) **或** [http://jsfiddle.net/hYJPv/](http://jsfiddle.net/hYJPv/)（已修复问题）**或**此处的差异方法[http://jsfiddle.net/UeqBk/for_Dooonot_from_Tats_innit/](http://jsfiddle.net/UeqBk/for_Dooonot_from_Tats_innit/)

你会`rightclick`得到一个警报。

**代码**

```
$(document).ready(function()
{
    // If you want to disable showing the context menu when right clicking
    // on the document, the code below would do the trick.
    $(document).bind("contextmenu",function(e)
    {
        alert('right click capture');
        return false;
    }); 

    var $tree = $("#tree").kendoTreeView(
    {
        select: function (event)
        {
            var $item = $(event.node);
            console.log( $item );
            alert( "selected" );
        }
    });

    // Find the item you want to select...
    var $selected = $('#selected');
    var $treePath = $selected.parentsUntil($tree, "li");

    var treeView = $tree.data('kendoTreeView');

    // Expand the tree in order to show the selected item
    treeView.expand( $treePath );

    // Gotta make both calls...
    treeView.select( $selected );
    treeView.trigger( 'select', {node: $selected} );
});
​ 
```

# c# - 如何将 SqlParameter 值设置为 SQL 函数的结果？

> ID：10413036
> 
> 赞同：0
> 
> 时间：2012-05-02T11:43:16.897
> 
> 标签：c#, ado.net

（与[这篇文章](https://stackoverflow.com/questions/9771450/getting-error-when-try-to-insert-getdate-into-database)有关，但不一样。）

有没有办法使用SqlParameter 来指定一个值应该通过在服务器上调用一个函数来获得？例如

```
private void Test()
{
    var cmd = new SqlCommand("update Table set ADateField = @p1 where Id = @id");
    cmd.Parameters.AddWithValue("@id", 42);
    cmd.Parameters.AddWithValue("@p1", "sysutcdatetime()");  // WRONG!!
    cmd.ExecuteNonQuery();
} 
```

我可以将调用嵌入到 CommandText 字符串中，但有时我想设置一个显式值而不是调用该函数，所以它会有点混乱。

我不想在客户端机器上获取日期，因为由于时区差异，这可能与服务器上的日期不同。

从[文档](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparameter.aspx)中我看不出它是如何完成的，但我想在放弃之前我会和你们核实一下。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T11:46:31.150

您不能将函数名称作为参数传递并让它执行。

如果您知道函数名称，为什么不直接使用它：

```
var cmd = 
 new SqlCommand("update Table set ADateField = sysutcdatetime() where Id = @id"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T11:53:21.910

我不相信这可以做到。两种选择是根据您是否要传递确切的日期来重写您的 SQL 语句，或者将 SQL 嵌入到存储过程中，然后可以检查传入的参数以查看它是否为空或其他东西并替换正确的函数调用：

```
var cmd = new SqlCommand("update Table set ADateField = @p1 where Id = @id");
cmd.Parameters.AddWithValue("@id", 42);
if( useFunction )
{
  cmd.CommandText = cmd.CommandText.Replace("@p1", "sysutcdatetime()");
}
else
{
  cmd.Parameters.AddWithValue("@p1", exactDate);  
}
cmd.ExecuteNonQuery(); 
```

# xpages - 是否可以以编程方式为事件设置部分刷新元素？

> ID：10413040
> 
> 赞同：0
> 
> 时间：2012-05-02T11:43:32.460
> 
> 标签：xpages

我有一个用于视图过滤的自定义控件，我想设置它根据自定义控件的属性进行过滤的 viewPanel，但为了做到这一点，无论该 viewPanel 的 ID 是什么，我都需要部分刷新 viewPanel是。我知道我可以在我的自定义控件中放置一个构面并在构面周围放置一个面板，然后只部分刷新该面板，但我想知道是否有一种方法可以做到这一点而不必将 viewPanel 放入构面。这是按钮代码：

```
<xp:button value="Filter" id="btnFilter">
<xp:eventHandler event="onclick" submit="true"
    refreshMode="partial" refreshId="viewPanel1">
    <xp:this.action><![CDATA[#{javascript:filterView();}]]></xp:this.action>
</xp:eventHandler>
</xp:button> 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T11:58:12.827

哎呀，刚刚意识到我可以通过将部分刷新集的计算元素 ID 添加到复合数据值来做到这一点。我错过了“指定元素 ID”旁边的那个小三角形。

```
<xp:button value="Filter" id="btnFilter">                   <xp:eventHandler event="onclick" submit="true"
                    refreshMode="partial" refreshId="#{javascript:compositeData.viewPanel}">
                    <xp:this.action><![CDATA[#{javascript:filterView();}]]></xp:this.action>
                </xp:eventHandler>
        </xp:button> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T11:54:53.547

您可以使用扩展库的动态视图面板。

# scala - 有没有办法像 getOrElse 那样链接返回选项类型的方法，但保留选项类型

> ID：10413042
> 
> 赞同：20
> 
> 时间：2012-05-02T11:43:38.217
> 
> 标签：scala

给定的片段由方法调用组成，它们返回一个选项类型。如果上一个调用返回 None，我想调用下一个方法。我可以用这个片段来完成这个

```
def amountToPay : Option[TextBoxExtraction] =
  getMaxByFontsize(keywordAmountsWithCurrency) match {
    case None => getMaxByFontsize(keywordAmounts) match {
      case None  =>  highestKeywordAmount match {
        case None => getMaxByFontsize(amountsWithCurrency) match {
          case None => highestAmount
          case some => some
        }
        case some => some
      }
      case some => some
    }
    case some => some
  } 
```

但它看起来很乱。所以我希望有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-05-02T11:57:34.950

是的，`orElse`更干净一点：

```
def amountToPay : Option[TextBoxExtraction] =
  getMaxByFontsize(keywordAmountsWithCurrency)
    .orElse(getMaxByFontsize(keywordAmounts))
    .orElse(highestKeywordAmount)
    .orElse(getMaxByFontsize(amountsWithCurrency))
    .orElse(highestAmount) 
```

您也可以将项目放在 a 中`Seq`，然后使用类似`xs.reduceLeft(_ orElse _)`or的东西`xs.flatten.headOption.getOrElse(highestAmount)`。

# wpf - resx 文件中用于本地化的混合字体类型

> ID：10413043
> 
> 赞同：0
> 
> 时间：2012-05-02T11:43:39.313
> 
> 标签：wpf, localization, resx

我正在做一些本地化，但遇到了一个我似乎无法弄清楚的问题。

我需要显示以下内容：*tcp* CO₂（其中 tcp 为斜体）

```
<Italic>tcp</Italic> CO₂ 
```

我以为我可以将 HTML 放在我的 .resx 文件中，所有内容都会结婚，但输出的内容显示 html，包括括号等。有人在这件事上有意见吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T16:33:58.747

我使用附加的行为来显示丰富的 XAML 文本`TextBlock`：

```
public static class TextBlockBehavior
{
    [AttachedPropertyBrowsableForType(typeof(TextBlock))]
    public static string GetRichText(TextBlock textBlock)
    {
        return (string)textBlock.GetValue(RichTextProperty);
    }

    public static void SetRichText(TextBlock textBlock, string value)
    {
        textBlock.SetValue(RichTextProperty, value);
    }

    public static readonly DependencyProperty RichTextProperty =
        DependencyProperty.RegisterAttached(
          "RichText",
          typeof(string),
          typeof(TextBlockBehavior),
          new UIPropertyMetadata(
            null,
            RichTextChanged));

    private static void RichTextChanged(DependencyObject o, DependencyPropertyChangedEventArgs e)
    {
        TextBlock textBlock = o as TextBlock;
        if (textBlock == null)
            return;

        var newValue = (string)e.NewValue;

        textBlock.Inlines.Clear();
        if (newValue != null)
            AddRichText(textBlock, newValue);
    }

    private static void AddRichText(TextBlock textBlock, string richText)
    {
        string xaml = string.Format(@"<Span>{0}</Span>", richText);
        ParserContext context = new ParserContext();
        context.XmlnsDictionary.Add(string.Empty, "http://schemas.microsoft.com/winfx/2006/xaml/presentation");
        var content = (Span)XamlReader.Parse(xaml, context);
        textBlock.Inlines.Add(content);
    }
} 
```

你可以像这样使用它：

```
<TextBlock bhv:TextBlockBehavior.RichText="{x:Static Resources:Resource.CO2}"> 
```

但是，在您的情况下，您无法`TextBlock`直接访问，因为它位于`LayoutPanel`. 因此，您需要重新定义此模板以将行为应用于`TextBlock`：

```
<dxdo:LayoutPanel Name="PanelCo2" Caption="{x:Static Resources:Resource.CO2}">
    <dxdo:LayoutPanel.CaptionTemplate>
        <DataTemplate>
            <TextBlock bhv:TextBlockBehavior.RichText="{Binding}">
        </DataTemplate>
    </dxdo:LayoutPanel.CaptionTemplate>
</dxdo:LayoutPanel> 
```

# c# - MARS 无法与 sql 本机客户端一起使用

> ID：10413044
> 
> 赞同：1
> 
> 时间：2012-05-02T11:43:42.953
> 
> 标签：c#, sql-server, odbc

我有一个使用 odbc 连接将数据导出到 sql server 的 C# 应用程序。我收到了这个错误：

```
System.Data.Odbc.OdbcException (0x80131937): 
ERROR [HY000] [Microsoft][SQL Native Client]
Connection is busy with results for another command. 
```

我`MARS_Connection=yes`在连接字符串中尝试过，但它不起作用。sql native client 10 没有问题，但问题来自 sql native client(sqlncli)。[我在stackoverflow中找到了一个解决方案，](https://stackoverflow.com/questions/2701992/turning-on-multiple-result-sets-in-an-odbc-connection-to-sql-server)但我不知道如何实现`SQLSetConnectAttr`和其他功能来启用火星。

# nhibernate - 使用 Nhibernate 打开 SQL Server Compact Edition 4.0 时出错

> ID：10413045
> 
> 赞同：-1
> 
> 时间：2012-05-02T11:43:45.353
> 
> 标签：nhibernate, sql-server-ce

我在 app.config 中有以下设置：

```
<hibernate-configuration  xmlns="urn:nhibernate-configuration-2.2" >
    <session-factory name="Nh.Data">
       <property name="connection.provider">
           NHibernate.Connection.DriverConnectionProvider
       </property>
       <property name="dialect">
           NHibernate.Dialect.MsSqlCeDialect  </property>
       <property name="connection.driver_class">
           NHibernate.Driver.SqlClientDriver
       </property>
       <property name="connection.connection_string">
           Data Source=NhData.sdf
       </property>
       <property name="adonet.batch_size">16</property>
       <property name="generate_statistics">true</property>
       <property name="show_sql">true</property>
       <mapping assembly="Nh.Model"/>
    </session-factory>
</hibernate-configuration> 
```

使用以下代码访问数据库时，

```
 private ISessionFactory CreateSessionFactory(){
        var cfg = new NHibernate.Cfg.Configuration().Configure();
        return cfg.BuildSessionFactory();
    } 
```

我在线上收到以下错误`return cfg.BuildSessionFactory();`

```
 A network-related or instance-specific error occurred while
    establishing a connection to SQL Server. The server was not found or
    was not accessible. Verify that the instance name is correct and
    that SQL Server is configured to allow remote connections.
    (provider: Named Pipes Provider, error: 40 - Could not open a
    connection to SQL Server) 
```

这与我按照[Connection Strings.com的建议更改连接属性时遇到的错误相同](http://connectionstrings.com/sql-server-2005-ce)

当我将`connection.connection_string`属性更改为 时`Data Source=|DataDirectory|\bin\Debug\NhData.sdf`，错误更改为

```
 A network-related or instance-specific error occurred while
    establishing a connection to SQL Server. The server was not found or
    was not accessible. Verify that the instance name is correct and
    that SQL Server is configured to allow remote connections.
    (provider: SQL Network Interfaces, error: 26 - Error Locating
    Server/Instance Specified) 
```

我在应用程序文件夹中有以下文件以启用 SQL Server Compact 的运行

```
 sqlceca40.dll      sqlcecompact40.dll           sqlceoledb40.dll
    sqlceer40EN.dll    sqlceme40.dll                sqlceqp40.dll
    sqlcese40.dll      System.Data.SqlServerCe.dll  NhData.sdf 
```

我知道数据库文件的路径是正确的，因为我可以从 Visual Studio IDE 连接对话框中连接和测试连接。我已经阅读并重新阅读了[私有部署与中央部署（SQL Server Compact）](http://msdn.microsoft.com/en-us/library/gg213826.aspx)。对上述错误的任何搜索都会返回与我的问题无关的结果。

我正在使用的笔记本电脑正在运行 Windows 7 Professional 64 位，我正在使用构建后事件将数据库和 DLL 复制到应用程序文件夹。

我有什么遗漏或做错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T06:21:21.577

我发现我做错了什么。以下属性`<property name="connection.driver_class">NHibernate.Driver.SqlClientDriver</property>`适用于 SQL Server 而不是 SQL Server Compact Edition。用工作正常替换属性值 `NHibernate.Driver.SqlServerCeDriver`。

# html - 录制在线黑板并回放

> ID：10413047
> 
> 赞同：0
> 
> 时间：2012-05-02T11:43:48.910
> 
> 标签：html, canvas, record, blackboard

我试图弄清楚在网络浏览器中记录黑板类型应用程序的最佳方式是什么。导师可以在哪里录制带有音频的黑板视频。

我认为这里显而易见的答案是制作一个 html5 画布并每隔一段时间将其捕获为图像并将它们组合成一个视频。[像这样](https://stackoverflow.com/questions/4781602/capturing-html5-canvas-output-as-video-or-swf-or-png-sequence)

然而，这有几个缺点。以后编辑视频并不容易。视频也需要大量存储空间。

你有什么想法？如何构建黑板的这种录音和回放？

/杰克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T22:39:47.737

我目前正在做一个记录 HTML5 画布绘图并允许您稍后播放的项目。没有图像，所有内容都存储在 Javascript/JSON 中。没有音频，所以我计划同时添加一个转录功能。如果您想关注我的项目，请访问[http://github.com/eipark](http://github.com/eipark)。代码仍然非常原始和错误，但我正在积极为学校项目开发它，并希望在下周至少完成“视频”录制部分。

# android - 如何将视图转换为可绘制

> ID：10413049
> 
> 赞同：2
> 
> 时间：2012-05-02T11:44:01.963
> 
> 标签：android

我想将 Android View 转换为 Drawable。

我尝试以下方法：

```
View view1;

  view1 = getLayoutInflater().inflate(R.layout.layout1, null);
  view1.setDrawingCacheEnabled(true);
  ((TextView)(view1.findViewById(R.id.txt_number))).setText("98"); 

  view1.setLayoutParams(new MapView.LayoutParams(LayoutParams.WRAP_CONTENT,        LayoutParams.WRAP_CONTENT, getPoint(23.01, 72.55), MapView.LayoutParams.BOTTOM_CENTER));
            mapView.addView(overlayPin1);

            Log.d("view", "000");
            if(view1!=null)
            {
                Log.d("view", "111");
                System.out.println("view is not null.....");
                view1.buildDrawingCache();
                Bitmap bm = view1.getDrawingCache();
                Log.d("view", "222");
                try
                {
                    Log.d("view", "333");
                    //if(bm!=null)
                    //{
                        Log.d("view", "444");
                        String dir = Environment.getExternalStorageDirectory().toString();
                        System.out.println("bm is not null.....");
                        OutputStream fos = null;
                        File file = new File(dir,"sample.JPEG");
                        fos = new FileOutputStream(file);
                        BufferedOutputStream bos = new BufferedOutputStream(fos);
                        bm.compress(Bitmap.CompressFormat.JPEG, 50, bos);
                        bos.flush();
                        bos.close();
                        Log.d("view", "555");
                    //}
                }
                catch(Exception e)
                {
                    Log.d("view", "666");
                    System.out.println("Error="+e);
                    e.printStackTrace();
                }
            } 
```

但我总是得到空位图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T11:50:43.007

You need to call view1.measure(...) or else the view doesn't know how to draw itself because you are not adding it to the view hierarchy.

```
final int height = MeasureSpec.makeMeasureSpec(100, MeasureSpec.EXACTLY);
final int width = MeasureSpec.makeMeasureSpec(100, MeasureSpec.EXACTLY);
view1.measure(width, height); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T11:49:01.527

当您`View`完全加载/完成加载时，

```
view.buildDrawingCache(); 
```

要使用 Drawable，

```
Drawable drawable = new BitmapDrawable(view.getDrawingCache()); 
```

# cuda - OpenCL 版本的 cudaMemcpyToSymbol & 优化

> ID：10413051
> 
> 赞同：1
> 
> 时间：2012-05-02T11:44:06.193
> 
> 标签：cuda, opencl, gpgpu, opencl.net

有人可以告诉我用于将 __constant 复制到设备并返回主机的 OpenCl 版本的 cudaMemcpyToSymbol 吗？
还是通常的 clenquewritebuffer(...) 可以完成这项工作？
在论坛中找不到太多帮助。实际上几行演示就足够了。

我也应该期望在 opencl 中进行与使用常量缓存的 CUDA 相同的优化吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T23:22:26.567

我见过人们`cudaMemcpyToSymbol()`用于在内核中设置常量，编译器可以在优化代码时利用这些常量。如果要在 openCL 中设置一个内存缓冲区来将这些常量传递给内核，那么编译器就无法使用它们来优化代码。

相反，我找到的解决方案是`cudaMemcpyToSymbol()`用 print 替换为定义编译器符号的字符串。`-D FOO=bar`编译器可以采用将符号设置`FOO`为值的形式进行定义`bar`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T12:04:40.010

不确定 OpenCL.Net，但在普通的 OpenCL 中：是的，`clenquewritebuffer`就足够了（只需记住创建带有`CL_MEM_READ_ONLY`标志集的缓冲区）。

这是来自[Nvidia GPU Computing SDK](http://developer.nvidia.com/gpu-computing-sdk) (OpenCL/src/oclQuasirandomGenerator/oclQuasirandomGenerator.cpp) 的演示：

```
c_Table[i] = clCreateBuffer(cxGPUContext, CL_MEM_READ_ONLY, QRNG_DIMENSIONS * QRNG_RESOLUTION * sizeof(unsigned int),     
                 NULL, &ciErr);
ciErr |= clEnqueueWriteBuffer(cqCommandQueue[i], c_Table[i], CL_TRUE, 0, 
            QRNG_DIMENSIONS * QRNG_RESOLUTION * sizeof(unsigned int), tableCPU, 0, NULL,  NULL); 
```

CUDA 和 OpenCL 中的常量内存完全相同，并提供相同类型的优化。也就是说，如果您使用 nVidia GPU。在 ATI GPU 上，它的行为应该类似。而且我怀疑在 CPU 上运行时，恒定内存是否会给您带来任何优于全局的好处。

# python - 有没有办法进入装饰函数，跳过装饰器代码

> ID：10413052
> 
> 赞同：15
> 
> 时间：2012-05-02T11:44:06.270
> 
> 标签：python, decorator, pdb

我有一个用自定义装饰器装饰一些关键功能的模块。

使用 pdb 调试这些函数通常有点痛苦，因为每次我进入一个装饰函数时，我首先必须单步调试代码本身。

我当然可以将调试器设置为在我感兴趣的函数内中断，但作为关键函数，它们会从很多地方多次调用，所以我通常更喜欢在函数之外开始调试。

我试图用代码来说明它，但我不知道这是否有帮助：

```
def i_dont_care_about_this(fn):
    @functiontools.wraps(fn)
    def wrapper(*args, **kwargs):
        return fn(*args, **kwargs)
    return wrapper

@i_dont_care_about_this
def i_only_care_about_this():
    # no use to set pdb here

def i_am_here():
    import pdb; pdb.set_trace()
    i_only_care_about_this() 
```

那么，有没有办法让我`i_only_care_about_this`不`i_am_here`经过而进入`i_dont_care_about_this`？

本质上，我想在使用**s** to ( **s** ) 进入给定的装饰函数时跳过所有装饰器代码。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-02T13:02:49.200

如果装饰器纯粹用于日志记录或其他非功能性行为，则使其成为调试无操作 - 在定义之后立即插入此代码`i_dont_care_about_this`：

```
DEBUG = False
# uncomment this line when pdb'ing
# DEBUG = True
if DEBUG:
    i_dont_care_about_this = lambda fn : fn 
```

但是如果它包含实际的活动代码，那么您将不得不使用 pdb 方法来完成这项工作，例如在装饰器内的代码中对 pdb.set_trace 进行条件调用：

```
BREAK_FLAG = False
...
# (inside your function you want to debug)
if BREAK_FLAG:
    import pdb; pdb.set_trace()
...
# at your critical calling point
BREAK_FLAG = True 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-02T11:58:53.517

我不认为你能做到这一点。它会将 step 的含义改变为非常不同的东西。

但是，有一种方法可以实现与您想要的类似的东西。在您的装饰函数中设置一个断点，并在调用装饰函数之前设置一个断点。现在，禁用函数内部的断点。

现在，当您运行代码时，它只会在您到达您关心的特定调用时中断。一旦发生中断，重新启用函数中的断点并继续执行。这将执行所有修饰代码并在修饰函数的第一行中断。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-12-08T17:52:37.583

**TL;DR**：*修改`bdb.Bdb`，以便将装饰器的模块名称添加到跳过的代码列表中。这适用于两者`pdb`，`ipdb`可能还有许多其他人。**底部的例子**。*

从我自己的实验`pdb.Pdb`（在 pdb 和 ipdb 的情况下实际进行调试的类）看来，它似乎是完全可行的，既不修改要调试的函数的代码也不修改装饰器。

Python 调试器具有可以跳过一些预定义代码的功能。毕竟，调试器必须跳过自己的代码才能发挥作用。

事实上，python 调试器的基类有一个叫做“`skip`参数”的东西。它是 it's 的一个参数，它`__init__()`指定调试器应该忽略的内容。

来自[Python 文档](https://docs.python.org/3.7/library/bdb.html#bdb.Bdb)：

> 如果给定，skip 参数必须是 glob 样式的模块名称模式的可迭代。调试器不会单步执行源自与这些模式之一匹配的模块的帧。框架是否被认为源自某个模块由框架全局变量中的 __name__ 确定。

这样做的问题是它是在对 的调用中指定的`set_trace()`，之后我们已经进入装饰器的框架，在休息时。因此，没有任何功能可以让我们在运行时添加到该参数。

幸运的是，在 Python 中在运行时修改现有代码很容易，并且我们可以使用一些技巧来在`Bdb.__init__()`调用时添加装饰器的模块名称。我们可以“装饰”`Bdb`类，这样每当有人创建`Bdb`对象时，我们的模块就会被添加到跳过列表中。

所以，这里就是一个例子。请原谅奇怪的签名和用法，`Bdb.__init__()`而不是`super()`- 为了与`pdb`我们必须这样做兼容：

```
# magic_decorator.py
import bdb

old_bdb = bdb.Bdb

class DontDebugMeBdb(bdb.Bdb):
    @classmethod
    def __init__(cls, *args, **kwargs):
        if 'skip' not in kwargs or kwargs['skip'] is None:
            kwargs['skip'] = []
        kwargs['skip'].append(__name__)
        old_bdb.__init__(*args, **kwargs)

    @staticmethod
    def reset(*args, **kwargs):
        old_bdb.reset(*args, **kwargs)

bdb.Bdb = DontDebugMeBdb

def dont_debug_decorator(func):
    print("Decorating {}".format(func))

    def decorated():
        """IF YOU SEE THIS IN THE DEBUGER - YOU LOST"""
        print("I'm decorated")
        return func()
    return decorated 
```

* * *

```
# buged.py
from magic_decorator import dont_debug_decorator

@dont_debug_decorator
def debug_me():
    print("DEBUG ME") 
```

* * *

`ipdb.runcall`在 Ipython 中的输出：

```
In [1]: import buged, ipdb                             
Decorating <function debug_me at 0x7f0edf80f9b0>       

In [2]: ipdb.runcall(buged.debug_me)                   
I'm decorated                                          
--Call--                                               
> /home/mrmino/treewrite/buged.py(4)debug_me()         
      3                                                
----> 4 @dont_debug_decorator                          
      5 def debug_me():                                

ipdb> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-20T18:01:21.127

不完全是问题的答案，但对于新手来说，如果有人在**VSCode**中调试装饰函数以跳过装饰器并进入函数，请执行以下操作：

1.  在您装饰的函数内放置一个断点（函数体）
2.  调用该函数并进行统计调试
3.  而不是单击`step over`或`step into`单击`continue`，您最终会进入一个函数。
4.  照常继续调试

例如：

```
@some_decorator
def say_hello(name):
    x = f"Hello {name}"
    return x

hello = say_hello(name="John") 
```

在函数内部放置一个断点`hello`和第二个断点。`x`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-21T22:36:14.947

具有以下内容：

```
def my_decorator(fn):
    def wrapper(*args, **kwargs):
        return fn(*args, **kwargs)
    return wrapper

@my_decorator
def my_func():
    ... 
```

`pdb`我在这里调用`import pdb; pdb.run('my_func()')`which 进入`pdb`：

```
> <string>(1)<module>() 
```

1.  `step`进入调用堆栈——我们现在查看装饰器函数定义的第一行：

    ```
     def my_decorator(fn):
    ->     def wrapper(*args, **kwargs):
               return fn(*args, **kwargs)
           return wrapper 
    ```

2.  `next`直到`pdb`在（指向）我们`return`原始函数所在的行（这可能是一个`next`或多个 - 仅取决于您的代码）：

    ```
     def my_decorator(fn):
           def wrapper(*args, **kwargs):
    ->         return fn(*args, **kwargs)
           return wrapper 
    ```

3.  `step`进入原始功能，瞧！我们现在处于可以`next`通过原始功能的地步。

    ```
    -> @my_decorator
       def my_funct():
           ... 
    ```

# database - 如何在 SQLite 中获取子字符串？

> ID：10413055
> 
> 赞同：49
> 
> 时间：2012-05-02T11:44:13.463
> 
> 标签：database, sqlite

我从 SQLite 数据库中检索了很多数据。检索时，我将其映射到应用程序中的不同视图。我的表格中有一个文本字段，我不想从中获取全文，只需要前 n 个字符。因此，例如，如果我的查询是：

```
Select description from articles where id='29'; 
```

那么如何从描述中获取子字符串？谢谢

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-05-02T11:49:02.157

使用该`substr`功能。

从[核心功能列表中](https://www.sqlite.org/lang_corefunc.html#substr)：

> `substr(X,Y,Z) substr(X,Y) substring(X,Y,Z) substring(X,Y)`
> 
> 该函数返回一个以字符开头且长度为字符`substr(X,Y,Z)`的输入字符串的子字符串。如果省略，则返回以 .开头的字符串末尾的所有字符。的最左边的字符是数字 1。如果为负数，则通过从右侧而不是从左侧计数来找到子字符串的第一个字符。如果为负数，则返回字符前面的字符。如果是字符串，则字符索引指的是实际的 UTF-8 字符。如果是 BLOB，则索引指的是字节。`X``Y-th``Z``Z``substr(X,Y)``X``Y-th``X``Y``Z``abs(Z)``Y-th``X``X`
> 
> `substring()`是`substr()`从 SQLite 版本 3.34 开始的别名。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2015-09-10T04:30:42.667

## **在 SQLite 中获取子字符串**

您可以使用 SQLite 中的内置函数，即`substr(X,Y,Z)`. x 字段表示要切片的字符串输入，y 字段表示使用索引的起点，z 字段表示子字符串长度。

```
===============================
|Database Table : **articles**|
===============================
|id | description             |
-------------------------------
|29 | Lorem ipsum domit       |
=============================== 
```

现在我们将尝试为我们的描述进行选择查询

```
SELECT substr(description,1,4) FROM articles where id='29'; 
```

输出将是：**Lore**而不是 Lorem ipsum domit

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-12-05T08:33:53.793

要扩展现有答案，从[SQLite 3.34.0](https://sqlite.org/releaselog/3_34_0.html)开始：

> 为了与 SQL Server 兼容，substr() SQL 函数现在也可以称为“substring()”。

> [substring(X,Y)](https://sqlite.org/lang_corefunc.html#substr) “substring()”是“substr()”的别名，从 SQLite 版本 3.34 开始。

# ruby-on-rails - Rails 范围 - 未定义的方法

> ID：10413058
> 
> 赞同：2
> 
> 时间：2012-05-02T11:44:17.917
> 
> 标签：ruby-on-rails, scope

我有一个名为“事件”的模型，它的范围名为“即将到来”，它返回未来日期的事件。在 Rails 控制台中，每当我输入

```
Event.upcoming 
```

它成功返回事件的子集。但是，如果我输入：

```
@events = Event.all
@events.upcoming 
```

我收到一个未定义的方法“即将到来”错误。范围是否仅适用于类而不适用于实例化变量？提前致谢。约汉

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-02T11:45:44.117

一旦你调用`.all`,`@events`就不再是`ActiveRelation`, 因此你不能调用它的作用域。

所以，`Event.where(SOME CONDITIONS).order(ORDERING).upcoming.limit(X)`仍然可以工作，但`Event.where(SOME CONDITIONS).order(ORDERING).all.upcoming.limit(X)`不会工作。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-05-02T12:11:34.793

您可以使用`scoped`而不是`all`获取一个活动关系对象，该对象将允许您在设置变量后链接范围：

```
@events = Event.scoped
@events.upcoming 
```

# javascript - Javascript 错误：IE 中的“预期标识符、字符串或数字”

> ID：10413066
> 
> 赞同：1
> 
> 时间：2012-05-02T11:44:30.387
> 
> 标签：javascript, jquery, internet-explorer

我正在制作一个基本的幻灯片，它在 Firefox 中运行良好，但是 IE 给了我以下错误：

```
 Expected identifier, string or number  script.js, line 26 character 4
  Expected identifier, string or number  script.js, line 26 character 4
  Expected identifier, string or number  script.js, line 24 character 4
  Expected identifier, string or number  script.js, line 25 character 4
  Expected identifier, string or number  script.js, line 25 character 4
  Expected identifier, string or number  script.js, line 25 character 4
  Expected identifier, string or number  script.js, line 35 character 3
  Expected identifier, string or number  script.js, line 35 character 3
  Expected identifier, string or number  script.js, line 35 character 3
  Expected identifier, string or number  script.js, line 35 character 3
  Expected identifier, string or number  script.js, line 35 character 3
  Expected identifier, string or number  script.js, line 35 character 3
  Expected identifier, string or number  script.js, line 35 character 3 
```

这是我的代码（附有行号）。

```
1    $(document).ready(function(){
2                                                   
3       var slideshow = $("#slideshow");
4       var slides = slideshow.children(".slide");
5       var dimensions = {
6           position: slideshow.position(),
7           width: slideshow.width(),
8           height: slideshow.height(),
9           midX: slideshow.width()/2,
10          midY: slideshow.height()/2
11      };
12      var index = 0;
13      
14      slides.each(function(number){   
15          $(this).data("offset", {
16              left: dimensions.midX - ($(this).width()/2),
17              top: dimensions.midY - ($(this).height()/2)
18          });
19          $(this).css({
20              position: "absolute",
21              top: $(this).data("offset").top
22          });
23          if(number == 0) 
24          {
25              $(this).css({left: $(this).data("offset").left + "px"});
26          } 
27          else
28          {
29              $(this).css({left: dimensions.width + "px"});
30          }
31          
32          slideshow.css({
33              position: "relative",
34              overflow: "hidden",
35          });
36      });
37      
38      slideshow.bind('click', slideImages);
39      
40      function slideImages(e){
41          e.preventDefault();
42          $(this).unbind('click', slideImages);
43          var direction = (e.pageX - dimensions.position.left < slideshow.width() / 2) ? "left" : "right";
44          var leftOffset = (direction == "left") ? dimensions.width : -dimensions.width;
45          slides.eq(index).animate({left: leftOffset}, 500, function() {
46              $(this).css({left: -leftOffset});
47          });
48          
49          if (direction == "left")
50              index = (index == (0)) ? slides.length - 1 : index - 1;
51          else
52              index = (index == (slides.length - 1)) ? 0 : index + 1;
53          
54          slides.eq(index).css({left: -leftOffset}).animate({left: slides.eq(index).data("offset").left}, 500, function() {
55              slideshow.bind('click', slideImages);
56          });
57    
58      }
59      
60    }); 
```

有谁知道这是什么原因造成的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-02T11:46:54.393

*厄运*的邪恶逗号抓住了你。

IE 不会原谅对象文字中的*尾随逗号*。

```
slideshow.css({
    position: "relative",
    overflow: "hidden",   // <-- evil
}); 
```

像上面那样删除所有尾随逗号，你就可以了。

# grails - Grails 查询不在列表中

> ID：10413067
> 
> 赞同：7
> 
> 时间：2012-05-02T11:44:33.007
> 
> 标签：grails, grails-orm, criteria

我正在编写一个条件来进行查询，但我不知道如何否定 inList 条件......有没有办法做类似的事情：

```
def result = c {
     not inList('id', ids)
} 
```

谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-02T12:36:14.453

你的标准应该是这样的......

```
def ids = [1, 2, 3];

def c = Foo.createCriteria();
def results = c.list {
  not {'in'("id",ids)}
} 
```

文档可以在[这里](http://grails.org/doc/latest/ref/Domain%20Classes/createCriteria.html)找到。我相信这只是添加到 grails 2.+

# windows-phone-7 - 滚动时将滚动查看器内的堆栈面板项目停止在显示左侧

> ID：10413068
> 
> 赞同：0
> 
> 时间：2012-05-02T11:44:35.397
> 
> 标签：windows-phone-7, silverlight-4.0, windows-phone-7.1

我在滚动查看器内的堆栈面板中水平添加了 10 张图像。当用户滑动页面时，滚动查看器停止在某个位置，如果滚动停止在 2 个图像的中间，如下图所示的第一个图像，我想将编号为 3 的图像设置为自动滚动并适合左侧像第二张图片一样的屏幕

![无标题](../Images/eca5da36f24ffe4ddfa4ff1c6a2e0af4.png)

![在此处输入图像描述](../Images/0d3e3586362e5235f4d263dff931fd62.png)

```
for (int i = 0; i <= 9; i++)
{
    Uri uri = new  Uri("http://d1mu9ule1cy7bp.cloudfront.net//catalogues/47/pages/p_" + i + "/thump.jpg");
    ImageSource img1 = new BitmapImage(uri);
    Image rect = new Image { RenderTransform = new TranslateTransform() };

    rect.Source = img1;

    stack.Children.Add(rect);

} 
```

XAML：

```
<Grid x:Name="LayoutRoot" Width="480" Background="Transparent" Margin="0,-33,0,0" Height="800">

 <ScrollViewer HorizontalContentAlignment="Left" HorizontalAlignment="Left" Name="scroll" VerticalScrollBarVisibility="Disabled" HorizontalScrollBarVisibility="Visible">

  <StackPanel Name="stack" Width="Auto" Orientation="Horizontal" HorizontalAlignment="Left"  >

</StackPanel>
</ScrollViewer>
</Grid> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T13:06:04.773

您需要做的第一件事是检测哪个项目与屏幕的一侧重叠。为此，遍历 中的每个项目`StackPanel`并确定它们相对于屏幕上具有固定位置的其他元素的位置。

为此，我使用以下扩展方法：

```
/// <summary>
/// Gets the relative position of the given UIElement to this.
/// </summary>
public static Point GetRelativePosition(this UIElement element, UIElement other)
{
    return element.TransformToVisual(other)
                  .Transform(new Point(0, 0));
} 
```

即为每个项目调用以下内容；

```
Point position = stackPanelItem.GetRelativePosition(someFixedElement); 
```

使用每个项目的位置，您应该能够确定哪个项目与屏幕重叠。

然后，您需要计算需要滚动多少才能确保您的项目完全可见，然后使用`ScrollViewer.ScrollToVerticalOffset`滚动到该位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T13:02:51.573

这可能不是最好的解决方案，我相信有更好的方法来实现这一点，但您可以使用以下方法：-

XAML：-

```
 <ListBox x:Name="MyListBox"
            ScrollViewer.VerticalScrollBarVisibility="Disabled"
            ScrollViewer.HorizontalScrollBarVisibility="Visible">
    <ListBox.ItemsPanel>
        <ItemsPanelTemplate>
            <StackPanel Orientation="Horizontal"/>
        </ItemsPanelTemplate>
    </ListBox.ItemsPanel>
</ListBox> 
```

C＃ ：-

```
 DispatcherTimer myTimer = new DispatcherTimer();

    // Constructor
    public MainPage()
    {
        InitializeComponent();

        for (int i = 0; i < 10; i++)
        {
            MyListBox.Items.Add(new Button()
            {
                Content = i.ToString(),
                Width = 200,
                Height = 100,
            });

            MyListBox.MouseMove += new MouseEventHandler(MyListBox_MouseMove);
        }

        myTimer.Interval = TimeSpan.FromSeconds(1);
        myTimer.Tick += new EventHandler(myTimer_Tick);
    }

    private void myTimer_Tick(object sender, EventArgs e)
    {
        myTimer.Stop();

        SnapFirstItem();
    }       

    private void MyListBox_MouseMove(object sender, MouseEventArgs e)
    {
        myTimer.Stop();
        myTimer.Start();
    }

    private void SnapFirstItem()
    {
        foreach (Button currentButton in MyListBox.Items)
        {
            bool visible = MyListBox.TestVisibility(currentButton, System.Windows.Controls.Orientation.Horizontal, true);

            if (visible)
            {
                MyListBox.ScrollIntoView(currentButton);
                break;
            }
        }
    } 
```

TestVisibility 扩展方法来自以下内容：-

[http://blogs.msdn.com/b/ptorr/archive/2010/10/12/procrastination-ftw-lazylistbox-should-improve-your-scrolling-performance-and-responsiveness.aspx](http://blogs.msdn.com/b/ptorr/archive/2010/10/12/procrastination-ftw-lazylistbox-should-improve-your-scrolling-performance-and-responsiveness.aspx)

# ios - GKTurnBasedMatch 不按顺序退出

> ID：10413069
> 
> 赞同：4
> 
> 时间：2012-05-02T11:44:37.093
> 
> 标签：ios, gamekit

当用户在使用 GameKit 的 iOS 应用程序中的回合制比赛中“轮流”退出时，会`-(void)turnBasedMatchmakerViewController: (GKTurnBasedMatchmakerViewController *)viewController playerQuitForMatch:(GKTurnBasedMatch *)match;`在 GKTurnBasedMatchmakerViewController 上调用委托方法，根据文档，我们应该为当前玩家设置结果，然后调用`participantQuitInTurnWithOutcome:nextParticipant:matchData:completionHandler`：

但是，我无法找到有关玩家不按顺序退出的任何信息。那是轮不到我的时候，我退出了媒人视图控制器。似乎没有任何委托方法，并且令人惊讶的是，通过调试我的应用程序，我发现轮到发送（即使当前不是我轮到我参加比赛）。

谁能解释一下这种行为以及处理不正常退出的正确方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-08T21:24:26.320

您可以处理这种情况

```
-(void)handleTurnEventForMatch:(GKTurnBasedMatch *)match 
```

循环遍历参与者，如果触发玩家是本地玩家，并且他的结果是“退出”，并且他不是当前参与者（在另一个地方处理 -turnBasedMatchmakerViewController:playerQuitForMatch:），然后继续退出游戏轮流。

```
for (int i = 0; i < [match.participants count]; i++) 
{            
    GKTurnBasedParticipant *p = [match.participants objectAtIndex:i];

    if ([p.playerID isEqualToString:[GKLocalPlayer localPlayer].playerID])
    {
        // Found player

        if (p.matchOutcome == GKTurnBasedMatchOutcomeQuit)
        {
            // Player Quit... ignore current participants and end out of turn only for the other player
            if (![match.currentParticipant.playerID isEqualToString:p.playerID])
            {
                // not the current participant and he quit
                [match participantQuitOutOfTurnWithOutcome:GKTurnBasedMatchOutcomeQuit withCompletionHandler:nil];
                 break;
            }               
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T08:45:36.890

您可以检查比赛中的当前参与者，看看是否是您。至于发送的流量，游戏中心不需要通知所有其他玩家你已经退出了吗？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-08T03:42:35.627

其实有一种方法可以不按顺序退出：

对于 GKTurnBasedMatch，它被称为：

```
participantQuitOutOfTurnWithOutcome:withCompletionHandler: 
```

您可以在调用 turnBasedMatchmakerViewController:playerQuitForMatch: 函数时在 GKTurnBaseMatchMakerViewControllerDelegate 中调用它。

请在[此处查看官方文档](http://developer.apple.com/library/ios/#documentation/GameKit/Reference/GKTurnBasedMatch_Ref/Reference/Reference.html#//apple_ref/doc/uid/TP40010894-CH1-SW11)

# sql - 使用 Microsoft.ACE.OLEDB.12.0 从网络共享查询 dbf 文件时出错

> ID：10413072
> 
> 赞同：0
> 
> 时间：2012-05-02T11:44:54.860
> 
> 标签：sql, sql-server, sql-server-2008, oledb, 64-bit

Windows Server 2008 R2 x64 SP1、Sql Server 2008 x64 SP3、Access 数据库引擎 x64 SP1

我有链接服务器：

```
EXEC master.dbo.sp_addlinkedserver @server = N'dbf2', @srvproduct=N'dbf2', @provider=N'MSDASQL', @provstr=N'DRIVER={Microsoft Access dBASE Driver (*.dbf, *.ndx, *.mdx)};' 
```

从本地磁盘查询 dbf 文件时一切正常：

```
select * from openquery(dbf2, 'select * from c:\\V4C8MA6.dbf') a 
```

但是从网络共享查询时

```
select * from openquery(dbf2, 'select * from \\\\gefest\\upload\\V4C8MA6.dbf') a 
```

我有错误：

```
Msg 7399, Level 16, State 1, Line 6
The OLE DB provider "MSDASQL" for linked server "dbf2" reported an error. The provider did not give any information about the error.
Msg 7350, Level 16, State 2, Line 6
Cannot get the column information from OLE DB provider "MSDASQL" for linked server "dbf2". 
```

我尝试了不同的变体来描述路径：[]，“”，``，\“\”，...。网络共享访问一切正常，sql server 帐户具有所需的访问权限。但...

如何让它发挥作用？

**2012 年 5 月 4 日添加：**

xp_cmdchell 完美地列出了目录。

这就是我发现的：我创建了链接服务器，其中 sprovstr 指示文件的位置：

```
@provstr=N'DRIVER={Microsoft Access dBASE Driver (*.dbf, *.ndx, *.mdx)};dbq=\\gefest\upload' 
```

如果我使用**sql server auth**连接到 sql server，这将有效。

这是 ProcMon 在使用**dbq**时显示的内容：

日期和时间：2012 年 5 月 4 日上午 9:57:55
事件类别：文件系统
操作：CreateFile
结果：**成功**
路径：\\gefest\upload\
TID：8588
持续时间：0.0001988
所需访问：读取属性
处置：打开
选项： Open Reparse Point
Attributes: n/a
ShareMode: Read, Write, Delete
AllocationSize: n/a
OpenResult: Opened

这是在查询中指示**路径时**：

日期和时间：2012 年 5 月 4 日上午 9:58:53
事件类别：文件系统
操作：CreateFile
结果：**对象路径无效**
路径：\\gefest\upload\
TID：8588
持续时间：0.0000819
所需访问：读取属性
处置：打开
选项：打开重分析点
属性：n/a
ShareMode：读取、写入、删除
AllocationSize：n/a

为什么 sql server 在第一次查询时接收到对共享的所需访问权限，而在第二次查询时没有？

第三种和第四种变体是使用**windows auth**连接到服务器时：

使用**dbq**：

日期和时间：2012 年 5 月 4 日上午 10:02:54
事件类别：文件系统
操作：CreateFile
结果：**访问**
被拒绝路径：\\gefest\upload\
TID：8588
持续时间：0.0031837
所需访问：读取属性
处置：打开
选项: Open For Backup, Open Reparse Point
属性: n/a
ShareMode: Read, Write, Delete
AllocationSize: n/a
**Impersonating: GAZ\kozlovai**

**在查询中**指示路径：

日期和时间：2012 年 5 月 4 日上午 10:02:20
事件类别：文件系统
操作：CreateFile
结果：**对象路径无效**
路径：\\gefest\upload\
TID：8588
持续时间：0.0000378
所需访问：读取属性
处置：打开
选项：打开备份，打开重分析点
属性：不适用共享
模式：读取、写入、删除
分配大小：不适用
**模拟：GAZ\kozlovai**

连接到共享时 Sql server 模拟。并且这个帐户 'GAZ\kozlovai' 对共享具有完全访问权限，但 sql server 仍然无法打开文件...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T23:47:20.067

检查运行查询的用户身份是否对服务器上的临时文件夹具有读写访问权限。这是因为 SQL Server 将在调用用户而不是 SQLServer 进程帐户的上下文中为查询创建临时文件。

**编辑**：我至少记得这个问题的一些实例仅通过 UNC 托管共享出现，因此它不是在本地参考上会发生的铅管束带。

只是为了笑，启动 XP_CMDSHELL 并执行 'DIR \\SERVER\SHARE\FOLDER' 并确保您可以通过 SQL Server 中的 UNC 与该路径对话。如果没有，您仍然需要克服访问问题。

最后，如果所有其他方法都失败了，并且您可以登录到服务器，我会启动 Process Monitor 的副本并在该查询触发时观察网络 IO 问题。

# nhibernate - NHibernate 自动增量字符串列

> ID：10413073
> 
> 赞同：0
> 
> 时间：2012-05-02T11:44:55.557
> 
> 标签：nhibernate, nhibernate-mapping, auto-increment

我想要一个字符串类型的列，它将由静态前缀和动态自动递增整数组成。数字应该在每次插入时自动递增。此列不是 PK 但它应该像 id 一样。我也想过滤该列。就像是

*   PREFIX_0000
*   PREFIX_0001
*   PREFIX_0002
*   PREFIX_0003

我不想在某个表中存储一个计数器。是否有可能在 NHibernate 映射级别上做到这一点？还是有其他想法？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T13:04:12.263

在您的 DTO 中，您可以创建一个返回前缀_######ID 的吸气剂：

```
public string MyAutoIncrement 
{
    get { return string.Format("{0}_{1:D8}",this.Prefix,this.Id); }
} 
```

# jquery - PhoneGap 和 JQM 入门 .. 很困惑

> ID：10413074
> 
> 赞同：1
> 
> 时间：2012-05-02T11:44:59.737
> 
> 标签：jquery, mobile, cordova

我刚刚开始学习PhoneGap，我希望它与Jquery Mobile 集成。我正在寻找一个入门指南或类似的东西来帮助我在切换到一些严肃的开发之前构建一个基本的应用程序。

你能给我推荐一些相同的教程、书籍或视频吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T22:46:19.220

这是我们的 AppLaud Eclipse 插件[教程](http://www.mobiledevelopersolutions.com/home/start/twominutetutorials/tmt0)，该插件提供捆绑的 PhoneGap 和 jQuery Mobile，以便轻松创建 Android 应用程序。

另请参阅这两个视频：

*   [使用 jQuery Mobile 的 PhoneGap API 演示](http://www.youtube.com/watch?v=zTVsUZTvtQc&feature=plcp)
*   [简介：适用于 PhoneGap / Android 的 AppLaud Eclipse 插件](http://www.youtube.com/watch?v=mT02ytSSMII&feature=plcp)

# sqlite - sqlite，通过 4 个表进行慢速连接查询

> ID：10413075
> 
> 赞同：0
> 
> 时间：2012-05-02T11:45:02.020
> 
> 标签：sqlite

我通过 4 个表进行查询：时间、标签、用户和类别。每个表不超过 400 条记录，但是这个查询需要 70ms。

我需要它很多次（400x），所以所有过程总共需要大约 30 秒。

```
SELECT COUNT(*) FROM times
INNER JOIN tags ON times.user_id = tags.tag_id
INNER JOIN users ON tags.user_nr = users.nr
INNER JOIN categories ON users.category_id = categories.id
WHERE (times.time_raw < "000560")
AND (times.time_raw != 0 )
AND (times.cell != 1 )
AND (categories.name="kategory_A")
AND (times.run_id="08") 
```

我怎样才能让它更快？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T13:52:12.030

索引是解决方案！

**[以下列表提供了选择要索引的列的指南](http://publib.boulder.ibm.com/infocenter/soliddb/v6r3/index.jsp?topic=/com.ibm.swg.im.soliddb.sql.doc/doc/choosing.columns.to.index.html)：**

> • 您应该在 WHERE 子句中经常使用的列上创建索引。
> • 您应该在经常用于连接表的列上创建索引。
> • 您应该在 ORDER BY 子句中经常使用的列上创建索引。
> • 您应该在表中很少有相同值或唯一值的列上创建索引。
> • 不应在小表（仅使用几个块的表）上创建索引，因为全表扫描可能比索引查询更快。
> • 如果可能，请选择以最合适的顺序对行进行排序的主键。
> • 如果仅在 WHERE 子句中频繁使用连接索引的一列，则将该列放在 CREATE INDEX 语句中的首位。
> • 如果在 WHERE 子句中频繁使用连接索引中的多个列，则将最具选择性的列放在 CREATE INDEX 语句的首位。

# ruby-on-rails - 显示 rails 3 中缺少的翻译，如 rails 2 方式

> ID：10413082
> 
> 赞同：1
> 
> 时间：2012-05-02T11:45:38.363
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

由于我使用的是 rails 3，因此生产环境中有很多翻译丢失记录，因为在 rails 3 中处理翻译丢失字符串的方式，例如翻译丢失的输出现在是：

```
<span class="translation_missing" title="translation missing: fr.admin.orders_logs.update.title">Title</span> 
```

在我们的应用程序中，我们看到“标题”，所以我们认为翻译没问题，但实际上翻译丢失了，如果我没记错的话，在 Rails 2 中显示的文本是“翻译丢失：fr.admin.orders_logs.update.title”。 X

我如何才能再次激活它，让他向我显示错误消息，而不是将其作为标题放在跨度中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T11:42:43.650

这似乎是 Rails 的一个特性。见：[https ://gist.github.com/rails/rails/issues/6489](https://gist.github.com/rails/rails/issues/6489)

一个可能的解决方法是通过将类似这样的内容放置到 application.rb 来覆盖罪魁祸首：

```
module ActiveModel
  module Translation
    def human_attribute_name(attribute, options = {})
      defaults  = []
      parts     = attribute.to_s.split(".", 2)
      attribute = parts.pop
      namespace = parts.pop

      if namespace
        lookup_ancestors.each do |klass|
          defaults << :"#{self.i18n_scope}.attributes.#{klass.model_name.i18n_key}/#{namespace}.#{attribute}"
        end
        defaults << :"#{self.i18n_scope}.attributes.#{namespace}.#{attribute}"
      else
        lookup_ancestors.each do |klass|
          defaults << :"#{self.i18n_scope}.attributes.#{klass.model_name.i18n_key}.#{attribute}"
        end
      end

      defaults << :"attributes.#{attribute}"
      defaults << options.delete(:default) if options[:default]
      defaults << "MISSING TRANSLATION"+defaults.to_yaml # defaults << attribute.humanize

      options.reverse_merge! :count => 1, :default => defaults
      I18n.translate(defaults.shift, options)
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T12:08:55.947

您是否尝试将 i18n.fallbacks 配置设置为 false？

```
# Enable locale fallbacks for I18n (makes lookups for any locale fall back to
# the I18n.default_locale when a translation can not be found)
config.i18n.fallbacks = false 
```

# c# - 调用标准“文件在 Visual Studio 之外更改”对话框

> ID：10413086
> 
> 赞同：1
> 
> 时间：2012-05-02T11:45:54.043
> 
> 标签：c#, .net, visual-studio-2008, vsx, vspackage

我已经在我的 VSPackage 中成功创建了自定义单视图编辑器。我必须处理的许多事情之一是对在 Visual Studio 外部更改编辑文件时的情况做出反应 - Visual Studio 中的“标准”编辑器显示对话框，其中包含“是”、“对所有”（重新加载内容）等选项，因此，如果更改了更多文件，则只显示一个对话框。

但是，到目前为止，我在 VSPackage 中唯一能做的就是在文件更改时显示自定义对话框。这并不漂亮 - 当我的编辑器中编辑的文件与其他一些文件一起更改时，将向用户显示两个完全不同的对话框。

所以问题是 - 有什么方法可以为我的文件调用“标准”Visual Studio“文件在 VS 之外更改”对话框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-19T18:29:20.810

听起来您正在使用[IVSFileChangeEx](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.shell.interop.ivsfilechangeex.aspx)接口。

这篇[博文](http://dotneteers.net/blogs/divedeeper/archive/2008/03/17/LearnVSXNowPart17.aspx)可能几乎就是您要找的内容。通常这用于检查文件是否可以编辑或重新加载，并将提供文件对话框提示（签出或重新加载）。

这使用[IVsQueryEditQuerySave2](http://msdn.microsoft.com/en-us/library/microsoft.visualstudio.shell.interop.ivsqueryeditquerysave2%28v=vs.100%29.aspx)接口。您可能想要调用`DeclareReloadableFile`，它将“说明如果文件在磁盘上发生更改将重新加载”。

```
private bool CanEditFile()
{
  // --- Check the status of the recursion guard
  if (_GettingCheckoutStatus) return false;

  try
  {
    _GettingCheckoutStatus = true;

    IVsQueryEditQuerySave2 queryEditQuerySave =
      (IVsQueryEditQuerySave2)GetService(typeof(SVsQueryEditQuerySave));

    // ---Now call the QueryEdit method to find the edit status of this file
    string[] documents = { _FileName };
    uint result;
    uint outFlags;

    int hr = queryEditQuerySave.QueryEditFiles(
      0, // Flags
      1, // Number of elements in the array
      documents, // Files to edit
      null, // Input flags
      null, // Input array of VSQEQS_FILE_ATTRIBUTE_DATA
      out result, // result of the checkout
      out outFlags // Additional flags
      );
    if (ErrorHandler.Succeeded(hr) && (result ==
      (uint)tagVSQueryEditResult.QER_EditOK))
    {
      return true;
    }
  }
  finally
  {
    _GettingCheckoutStatus = false;
  }
  return false;
} 
```

# mysql - 努力在 Glassfish 上创建 MySQL 连接池

> ID：10413090
> 
> 赞同：4
> 
> 时间：2012-05-02T11:46:12.253
> 
> 标签：mysql, glassfish, connection-pooling

我以前做过这个，但由于某种原因，我真的很难创建这个连接池。当我在创建连接池后 ping 连接池时，出现此错误：

```
Ping Connection Pool for bondsaver is Failed. 
Ping failed Exception - Class name is wrong or classpath is not set for : com.mysql.jdbc.jdbc2.optional.MysqlDataSource 
    Please check the server.log for more details. 
Ping failed Exception - Class name is wrong or classpath is not set for : com.mysql.jdbc.jdbc2.optional.MysqlDataSource 
    Please check the server.log for more details. 
```

我在创建池时提供的信息如下：

*   `portNumber`: 3306;
*   `databaseName`:bondaverdb;
*   `serverName`：本地主机；
*   `user`： 根;
*   `password`： 我的密码;

有什么我遗漏的吗？有什么我拼写错误或输入不正确吗？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T11:54:59.063

似乎是一个类路径问题。您的域的 lib 目录中有 mysql 连接器吗？

正确的路径应该是：

> *glassfish 安装目录*\glassfish\domains\domain1\lib

*（如果您不使用默认domain1*，则使用其他域名）

# android - Android Sqlite 多表多游标

> ID：10413091
> 
> 赞同：0
> 
> 时间：2012-05-02T11:46:18.147
> 
> 标签：android, sqlite, cursor, multi-table

我有一个带有多个表的 SQLite 数据库，但是有些表是链接的，有些没有，但我想要的是从一个表中读取并同时写入另一个表......所以我的问题是我可以有两个不同的光标指向相应的表格或有任何其他方式...请让我知道...建议表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T11:57:00.993

看看 AsyncQueryHandler 类。它将帮助您让 ContentProvider 进行异步/并发查询

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T12:28:27.237

您只需要游标从表中读取数据，而不是写入。在您的数据库中设置方法以将您需要的信息写入正确的表，并在您的活动中设置方法以调用游标并从中获取数据，您就一切就绪。

**数据库类**

```
public class TestDB {
    // *******************************************************************
    // DB info
    // *******************************************************************
    private static final String TEST_DATABASE_NAME = "TestDB";
    private static final int TEST_DATABASE_VERSION = 3;

    // *******************************************************************
    // list table
    // *******************************************************************
    public static final String FIRST_TABLE = "first";
    public static final String FIRST_ROWID = "_id";
    public static final String FIRST_NAME = "first_name";

    private static final String CREATE_FIRST_TABLE = "create table "
            + LIST_TABLE + " (_id integer primary key autoincrement,"
            + "first_name text not null unique);";

    // *******************************************************************
    // category table
    // *******************************************************************
    public static final String SECOND_TABLE = "second";
    public static final String SECOND_ROWID = "_id";
    public static final String SECOND_NAME = "second_name";

    private static final String CREATE_SECOND_TABLE = "create table "
            + CATEGORY_TABLE + " (_id integer primary key autoincrement,"
            + "second_name text not null unique);";
    // *******************************************************************
    // control variables
    // *******************************************************************
    private DBHelper mDBHelper;
    private SQLiteDatabase mDb;
    private final Context mCtx;

    private static class DBHelper extends SQLiteOpenHelper {
        DBHelper(Context context) {
            super(context, TEST_DATABASE_NAME, null,
                    TEST_DATABASE_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            db.execSQL(CREATE_FIRST_TABLE);
            db.execSQL(CREATE_SECOND_TABLE);
        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            Log.w("TestDB", "Upgrading database from version " + oldVersion
                    + " to " + newVersion + ", which will destroy all old data");
            db.execSQL("DROP TABLE IF EXISTS " + FIRST_TABLE);
            db.execSQL("DROP TABLE IF EXISTS " + SECOND_TABLE);
            onCreate(db);
        }
    }

    public GroceryDB(Context ctx) {
        this.mCtx = ctx;
    }

    public GroceryDB open() throws SQLException {
        mDBHelper = new DBHelper(mCtx);
        mDb = mDBHelper.getWritableDatabase();
        return this;
    }

    public void close() {
        mDBHelper.close();
    }

    // *******************************************************************
    // Record creation methods
    // *******************************************************************
    public long createFirst(String name) {
        ContentValues initialValues = new ContentValues();
        initialValues.put(FIRST_NAME, name);
        return mDb.insertWithOnConflict(FIRST_TABLE, null, initialValues,
                SQLiteDatabase.CONFLICT_IGNORE);
    }

    public long createSecond(String name) {
        ContentValues initialValues = new ContentValues();
        initialValues.put(Second_NAME, name);
        return mDb.insertWithOnConflict(CATEGORY_TABLE, null, initialValues,
                SQLiteDatabase.CONFLICT_IGNORE);
    }

    // *******************************************************************
    // Fetch all records methods
    // *******************************************************************

    public Cursor fetchAllFirst() {
        return mDb.query(FIRST_TABLE, new String[] { FIRST_ROWID, FIRST_NAME },
                null, null, null, null, null);
    }

    public Cursor fetchAllSecond() {
        return mDb.query(SECOND_TABLE, new String[] { SECOND_ROWID,
                SECOND_NAME }, null, null, null, null, null);
    }
} 
```

然后，假设您要将第一项从 FIRST_TABLE 复制到 SECOND_TABLE，在您的活动类中，您可以执行以下操作：

```
private Cursor firstCursor;
private TestDB mDbHelper;

mDbHelper = new TestDB(getActivity());
mDbHelper.open();

firstCursor = mDbHelper.fetchAllFirst();
getActivity().startManagingCursor(itemCursor);
firstCursor.moveToFirst;
mDbHelper.createSecond(firstCursor.getString(1));
mDbHelper.close(); 
```

我遗漏了几件事（例如检查确保返回的光标不为空，向用户显示光标的内容以选择要复制的内容等），但这应该演示一种复制方式的基础知识一张桌子到另一张桌子。

# c# - 删除子目录时 IIS 重新启动 MVC3 应用程序

> ID：10413092
> 
> 赞同：2
> 
> 时间：2012-05-02T11:46:20.250
> 
> 标签：c#, asp.net, .net, asp.net-mvc, iis

我有以下结构的目录

```
root
     temp
        User_related_folder
          preview1.jpg
          preview2.jpg
          preview3.jpg 
```

用户注销时我需要删除 User_related_folder。但是当我这样做时，我的应用程序会重新启动。为什么会发生，是否有可能解决？

我的应用程序在集成模式下使用 .net 4.0 在应用程序池下工作。我尝试 SystemNetwork 和本地系统凭据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T11:49:45.633

这就是 IIS 的工作方式。当您摆弄目录结构时，您的努力就会得到回收。

要解决此问题，请使用站点结构*之外*的文件夹来存储临时/工作文件夹。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-06T12:47:41.073

仍然没有正确答案。现在我只是从子目录中删除所有文件而不删除子目录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T11:55:35.450

对 bin 文件夹的任何更改都将重新启动应用程序。与更改 we.config 中的任何内容相同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T07:31:42.320

msdn说，如果你删除/bin/中的文件，或者删除应用程序下的任何目录，应用程序将重新启动。

所以，如果你必须在应用程序文件夹下删除，你必须重新启动应用程序。

或者您可以将 del 的目录从应用程序虚拟路径中更改出来，但这会触发安全问题。

最后我建议你删除目录下的文件，不要删除目录。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-01T14:04:35.617

将内容上传/删除到 App_data 文件夹将绕过此问题。

# cakephp - CakePHP 1.2 - 以 id 为前缀的模型验证数据库表字段

> ID：10413094
> 
> 赞同：0
> 
> 时间：2012-05-02T11:46:27.957
> 
> 标签：cakephp, cakephp-1.2

使用 Firebug检查**“数量”表单输入**

```
<input id "Item0Quantity"> 
```

我很难验证此代码生成的此元素：

```
<?php echo $form->input("Item.$id.quantity.", array('label' => 'Qty', 'class' => 'txt'));?> 
```

我正在使用以数据库**表名称 (Item)**和**唯一 id**为前缀的表单输入元素，这样做的原因是添加一些 JavaScript 功能。虽然它仍然需要对**Item 模型**进行 CakePHP 验证。

这是需要验证的**输入表单元素：**

```
<?php echo $form->input("Item.$id.quantity.", array('label' => 'Qty', 'class' => 'txt'));?> 
```

那么将如何在**items 模型**中写入呢？我的尝试：

```
 'Item.$id.quantity' => array(           
    'rule' => 'numeric',         
    'allowEmpty' => true,
    'message' => 'quanitity mut be numeric'
    ), 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T14:33:06.003

验证看起来是一样的，仍然只是字段名称：

```
'quantity' => array(           
    'rule' => 'numeric',         
    'allowEmpty' => true,
    'message' => 'quanitity mut be numeric'
), 
```

当您使用`saveAll`Cake 时，将遍历每个 Item 并相应地对其进行验证。

# tomcat - 如何在 Nagios 中配置插件？

> ID：10413095
> 
> 赞同：1
> 
> 时间：2012-05-02T11:46:29.317
> 
> 标签：tomcat, nagios

我尝试在 ubuntu 中安装插件以监控 tomcat 我从下载插件文件

> [http://exchange.nagios.org/directory/Plugins/Java-Applications-and-Servers/Apache-Tomcat](http://exchange.nagios.org/directory/Plugins/Java-Applications-and-Servers/Apache-Tomcat)

但是如何在 nagios-server 中配置这个插件，以便我可以使用 web-console 监控 tomcat

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T09:39:46.760

1.  下载插件后，将此插件移动到插件文件夹，默认为 /usr/local/nagios/libexec/。

2.  将插件的权限改为nagios

    ```
    chown nagios:nagios /usr/local/nagios/libexec/check_tomcat.pl 
    ```

3.  在 command.cfg file.Location(/usr/local/nagios/etc/objects/commands.cfg) 中添加此插件的命令定义

    ```
    define command{
    command_name check_tomcat
    command_line /usr/local/nagios/libexec/check_tomcat.pl
    } 
    ```

    提及插件所需的参数

4.  在您的服务文件中添加命令可能是 localhost.cfg 或单独的文件。

    ```
    define service{
    use                             generic-service         ; Name of service template to use
    hostgroup_name                  Host1
    service_description             Tomcat
    check_command                   check_tomcat
    contacts                        contact1
    notifications_enabled           1
    } 
    ```

5.  重新启动 nagios 和 xinetd（如果您使用）

现在您可以在 Web 控制台中查看服务监控 tomcat。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-24T00:55:49.710

我想充实 Priya 的答案，并从我自己的磨难中添加一些见解，以使该插件正常工作。

我遇到的主要问题与 ePN（嵌入式 Perl Nagios）有关：显然该插件不符合 ePN 的标准，并且在从命令行成功运行脚本后，我一直收到此错误：

```
**ePN /usr/lib64/nagios/plugins/check_tomcat: "Subroutine LWP::UserAgent::get_basic_credentials redefined at (eval 1) line 222,". 
```

我搜索了全局禁用 ePN，但发现这个[Nagios 文档页面](http://nagios.sourceforge.net/docs/3_0/embeddedperl.html)有这个有用的建议：

> 要告诉 Nagios 不要对特定脚本使用嵌入式 Perl 解释器，请将此行添加到 Perl 脚本：
> 
> `# nagios: -epn`
> 
> 任何一行都必须位于脚本的前 10 行中，以便 Nagios 检测到它。

添加该评论清除了“未知”错误，插件开始工作。

**安装**

我通过 EPEL 存储库安装了 Nagios。我保留了与安装时相同的大多数权限，包括安装为`root:root`. 我所做的一项更改是将所有`CFG`文件更改`/etc/nagios/objects`为`root:nagios`：我将自己添加到`nagios`组中，因此编辑更容易。对于我的 CentOS 安装，插件安装到`/usr/lib64/nagios/plugins`. 我下载`check_tomcat.pl`到该目录，将其重命名为 just `check_tomcat`（没有真正好的理由），`chmod 755`对其进行了操作，然后添加`# nagios: -epn`到其中。

`CFG`以下是我的文件的摘录：

**命令.cfg：**

```
# 'check_tomcat' command definition
define command{
       command_name check_tomcat
       command_line $USER1$/check_tomcat -H $HOSTADDRESS$ -p $ARG1$ -l $ARG2$ -a $ARG3$ -w $ARG4$ -c $ARG5$
       } 
```

**本地主机.cfg：**

```
# Define a service to check the state of a Tomcat service
define service{
       use                  local-service
       host_name            localhost
       service_description  Tomcat
       check_command        check_tomcat!8080!tomcat!tomcat!25%,25%!10%,10%
       } 
```

`$HOSTADDRESS$`作为`host_name`别名从服务传递到命令。

谢谢，

# python - 从表中解析信息

> ID：10413099
> 
> 赞同：1
> 
> 时间：2012-05-02T11:46:41.417
> 
> 标签：python, text-parsing

有一个 Internet 站点，我想检查自上次我检查更改后，此 Internet 站点中的搜索结果是否发生更改。

该网站有 2 个需要填写的请求字段（例如“出生日期”和“从何时开始”），然后它给出了在给定年份和那个地方被烧伤的所有孩子的结果。

我想使用 python 检查查询结果的变化，然后向我发送一封电子邮件，说明发生了变化。

我应该使用哪个 python 工具将我感兴趣的值发送到 Internet 站点并解析结果？

这是我需要填写的字段部分：

```
<fieldset class="set1 required">
    <label for="">Wann wurde Ihr Kind geboren? *</label>
    <input name="tbGeburtsdatum" id="tbGeburtsdatum" class="datepickerGeburt hasDatepicker" maxlength="10" onblur="this.value = formatiereDatum(this.value)" type="text">
    <small class="errormessage">Bitte geben Sie ein gültiges Datum ein</small>
    <span id="infoGeburt" class="legende"></span>
</fieldset>
<fieldset class="set2 required">
    <label for="">Ab wann soll Ihr Kind betreut werden? *</label>
    <input name="tbBetreuungAb" id="tbBetreuungAb" class="datepickerVon hasDatepicker" maxlength="10" onblur="this.value = formatiereDatum(this.value)" type="text">
    <small class="errormessage">Bitte geben Sie ein gültiges Datum ein</small>
</fieldset>
<fieldset class="set3 optional">
    <label for="">Bis wann soll Ihr Kind betreut werden?</label>
    <input name="tbBetreuungBis" id="tbBetreuungBis" class="datepickerBis hasDatepicker" maxlength="10" onblur="this.value = formatiereDatum(this.value)" type="text">
</fieldset> 
```

**编辑**

我写了一个填写两个字段的代码：

```
import mechanize
import cookielib
from BeautifulSoup import BeautifulSoup
import html2text
import filecmp

# Browser
br = mechanize.Browser()

# Cookie Jar
cj = cookielib.LWPCookieJar()
br.set_cookiejar(cj)

# Browser options
br.set_handle_equiv(True)
br.set_handle_gzip(True)
br.set_handle_redirect(True)
br.set_handle_referer(True)
br.set_handle_robots(False)

# Follows refresh 0 but not hangs on refresh > 0
br.set_handle_refresh(mechanize._http.HTTPRefreshProcessor(), max_time=1)

# The site we will navigate into, handling it's session
br.open('https://www.meinkitaplatz-leipzig.de/')

# Select the first (index zero) form
br.select_form(nr=0)

# User credentials
br.form['tbGeburtsdatum'] = '01.12.2011'
br.form['tbBetreuungAb'] = '26.09.2012'

# Login
br.submit()

br.retrieve('https://www.meinkitaplatz-leipzig.de/WFSuche.aspx','yourfavoritepage_new.html')

print filecmp.cmp('yourfavoritepage_new.html', 'yourfavoritepage.html') 
```

**编辑 2**

```
</tbody></table><table id="gvXErgebnisListe_DXMainTable" class="dxgvTable_EpErgebnisGrid" summary="&lt;script language=&quot;javascript&quot; type=&quot;text/javascript&quot;&gt;var geoData = new Array(&quot;1|2|  |0|0|6d96147a-641f-4411-8331-4436cd405c99|FAIRbund TPP3|Nord&quot;);var geoDataGes = new Array(&quot;1|2|  |0|0|6d96147a-641f-4411-8331-4436cd405c99&quot;);&lt;/script&gt;" style="width: 100%; border-collapse: collapse; empty-cells: show;" border="0" cellpadding="0" cellspacing="0">
       <tbody><tr id="gvXErgebnisListe_DXDataRow0" class="dxgvDataRow_EpErgebnisGrid">
                            <td id="gvXErgebnisListe_tcrow0" colspan="17" style="border-right-width: 0px; border-bottom-width: 0px;">
            <div class="resultlistEntry" id="resultlistEntry1">
            <div class="resultlistHead" id="1">
            <a class="linkTitle" href="#" onclick="return false;">
                <strong>Nord, FAIRbund TPP3</strong>                 
              <small>
                 <strong> Vorschlag: 26.09.2012 - 30.11.2014</strong>
              </small>
             </a>
             <a class="linkMappin" href="#" onclick="jumpToLocation(new Array('1','0','0', 'FAIRbund TPP3', 'Nord'));" title="Auf der Karte zeigen" alt="Auf der Karte zeigen">
                <span class="mappin mappin-tpp-klein"></span>
             </a>
          </div>
          <div style="display: none;" class="resultlistContent" id="resultlistContent1">
            <p>
                Die Tagespflegeperson FAIRbund TPP3 befindet sich im Stadtbezirk Nord. Hier werden bis zu 5 Kinder betreut. 
            </p>
            <p class="clearfix">
             <input name="Details1" id="Details1" class="buttonGeneralForward" value="Details" type="submit">
            </p>
          </div>
        </div>
      </td>
     </tr> 
```

我想解析这个 html 文本表 "Nord, FAIRbund TPP3", "Vorschlag: 26.09.2012 - 30.11.2014"

并将结果保存到文件中。

完整的 html 文件可以在[yourfavoritepage_new.html](http://bpaste.net/show/IaqqPNZzE0jbUQhq5wfD/)找到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T12:02:12.910

Mechanize 提供了一种提交表单的简单方法，请参阅[http://wwwsearch.sourceforge.net/mechanize/上的示例](http://wwwsearch.sourceforge.net/mechanize/)

# java - 文件和文件编写器

> ID：10413102
> 
> 赞同：-1
> 
> 时间：2012-05-02T11:46:54.450
> 
> 标签：java

我需要一种删除一行的方法，我用它来写文件：

```
 FileWriter insert = new FileWriter(file, true);  
    PrintWriter out = new PrintWriter(insert);  
    out.println("1\. Mario"); 
```

我做了一个逐行读取的东西，但我不知道如何删除返回的字符串，这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T11:55:21.360

当您阅读文本行时，写入您想要保留到 StringBuffer 或 StringBuilder 的行，然后将缓冲区/构建器的内容写回文件。当您想从文件中删除文本行或我遗漏了什么时，您是否有任何特定原因打开文件进行附加？

# java - 哈希图的副本

> ID：10413107
> 
> 赞同：0
> 
> 时间：2012-05-02T11:47:00.537
> 
> 标签：java, hashmap, clone

我有一个`Hashmap <integer, Arraylist<Double>>`. 我想复印一份。我正在考虑使用`clone`hashmap的方法。在通过 javadoc 之后，它说以下内容：

```
clone
Returns a shallow copy of this HashMap instance: the keys and values themselves are not cloned. 
```

这个浅拷贝是什么意思？我想要一个单独的矩阵，它的值在更新原始矩阵的值时不会改变。

而且为什么，

```
 if( hm1 == hm1.clone()) 
```

返回假？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-02T11:50:58.697

浅拷贝意味着只有映射对象是新创建的，但它的值没有被克隆，即拷贝包含对旧条目的引用。所以要“深度克隆”你需要做的地图：

1.  创建一个新的哈希映射对象
2.  遍历旧地图中的所有条目，并将键和值的**（深度）克隆添加到新地图**

因为`==`比较的是对象引用，而不是地图的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T11:53:15.860

Map 具有键（在您的情况下为整数实例）和值（ArrayLists）。在克隆的地图中，所有键和值都是相同的实例。

例如，您有 Integer k1=new Integer(1); Arraylist 值1=新的 Arraylist();

originalMap.put(k1, value1);

在 clonedMap 中，所有唯一的键都是最初为 k1 创建的同一实例。值相同。

# imagemagick - imageMagick：在 pdf 的第二页上绘制文本

> ID：10413108
> 
> 赞同：2
> 
> 时间：2012-05-02T11:47:02.607
> 
> 标签：imagemagick

我试图在 pdf 第 2 页上添加文本

通过命令

```
convert -density 300 input.pdf -pointsize 80 -draw "text 400,550 'HeLLO'"  out.pdf 
```

我可以在第 1 页添加文字。

但

```
convert -density 300 input.pdf -pointsize 80 -draw "text 400,550 'HeLLO'"  out.pdf 
```

无法在第 2 页工作。

我尝试将其拆分并逐一添加文本，但这太慢了。有没有办法可以在一个命令中直接在第 1 页和第 2 页上绘制文本？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T11:48:53.720

尝试：

```
convert -density 300 input.pdf[1] -pointsize 80 -draw "text 400,550 'HeLLO'"  out.pdf 
```

考虑到这一点，它只会输出第 2 页而不是整个 pdf？

看这篇文章[https://stackoverflow.com/questions/10429311/creating-thumbnail-image-from-the-first-page-of-pdf](https://stackoverflow.com/questions/10429311/creating-thumbnail-image-from-the-first-page-of-pdf)你应该能够做到：

```
 convert -density 300 input.pdf[0-1] -pointsize 80 -draw "text 400,550 'HeLLO'"  out.pdf 
```

# javascript - 使用ajax的动态滚动条划分

> ID：10413111
> 
> 赞同：1
> 
> 时间：2012-05-02T11:47:23.327
> 
> 标签：javascript, jquery, html, ajax

我试图在其中有一个带有 ajax 的动态滚动条，这意味着我尝试通过 ajax 使用滚动条更新分区，我对此有点麻烦，我使用的是我下载的名为 Tiny Scrollbar 的示例滚动条：[http：/ /www.baijs.nl/tinyscrollbar/](http://www.baijs.nl/tinyscrollbar/)
你可以在这里预览我的：[http ://www.luminusconsult.com/apps/testing/index.html](http://www.luminusconsult.com/apps/testing/index.html)

这就是我在索引页面中的内容...

```
 <div id="reloaded">
       <div id="scrollbar1">
         <div class="scrollbar"><div class="track"><div class="thumb">
           <div class="end"></div></div></div></div>
             <div class="viewport">
                <div class="overview">
                   ....

                </div>
            </div>
        </div></div>
        <script type="text/javascript">
            $(document).ready(function(){
                $('#scrollbar1').tinyscrollbar();   
            });
        </script> 
```

当我尝试用ajax重新加载“重新加载”的部门时......

```
 <div id="scrollbar1">
     <div class="scrollbar"><div class="track"><div class="thumb">
       <div class="end">      </div></div></div></div>
         <div class="viewport">
           <div class="overview">
             ....
        </div>
    </div>
</div>
    <script type="text/javascript">
            $(document).ready(function(){
                $('#scrollbar1').tinyscrollbar();   
            });
    </script> 
```

有什么办法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-07T07:49:34.017

在您的 ajax 请求的成功回调中添加 tinyscrollbar 更新方法。

```
$('#scrollbar1').tinyscrollbar_update(); 
```

# iphone - 保存您的私钥并转移到其他系统

> ID：10413115
> 
> 赞同：0
> 
> 时间：2012-05-02T11:47:34.603
> 
> 标签：iphone, ios, ipad

创建证书颁发机构签名请求（钥匙串访问，证书助理：“从证书颁发机构请求证书”）会生成一个公钥/私钥对。如果我导出公钥（.pem 格式）和私钥（.p12 格式）并导入雪豹，它会导入并正常工作。但是当我在 Lion mac os 中导入时，它给出错误：- 无法导入项目 UNIX permission denied.and other dialog box 无法检索该项目的内容。

我已授予 /Library/Keychains/login.keychain 文件夹 read\write.but 不工作的权限。

请解决它..

我的问题是lion mac os是否不能使用lion中生成的公钥/私钥...？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T14:18:57.053

听起来 .p12 文件的文件系统权限不正确。尝试使用查找器或终端确保所有者设置为您登录的用户，并且所有者具有文件的读/写权限。

Xcode 4 在管理器中有一个选项，可以导出将开发人员凭据传输到另一台机器所需的所有内容。

来自 Apple 的文档：

1.  在设备管理器的“团队”部分中选择您的团队。
2.  单击导出。
3.  指定文件名和密码，然后单击保存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T12:09:25.837

你到底想做什么。不需要传输密钥。只需使用您生成的证书或 p12

# javascript - Sencha Touch 2：将数据从一个面板传递到另一个面板

> ID：10413116
> 
> 赞同：0
> 
> 时间：2012-05-02T11:47:36.077
> 
> 标签：javascript, extjs, panel

我想知道自己，如何将数据从一个面板传递到另一个面板？我要向其传递数据的面板在保存数据的面板的 items-collection 中定义。到目前为止，我尝试使用 getParent()-Funktion，它看起来像这样：

```
Ext.define('Sencha.view.MyPanel', {
    extend: 'Ext.Panel',
    xtype: 'mypanel',
    requires: ['Ext.Label', 'Ext.Button'],

    config: {
        title: 'Details',
        styleHtmlContent: true,
        scrollable: 'vertical',
        layout: 'vbox',

        items:
        [
         {
             xtype: 'label',
             flex: 3
         },
         {
             xtype: 'panel',
             flex: 3,
             data: getParent().getData(),
         }, 
```

正如您可能认为的那样，它不起作用。有谁知道，我如何转发数据并填写子面板的数据配置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T09:10:44.460

您可以使用控制器调用视图中的方法，并将值传递给它们。

# algorithm - 回溯算法设计技术定义

> ID：10413117
> 
> 赞同：1
> 
> 时间：2012-05-02T11:47:46.567
> 
> 标签：algorithm, backtracking

我正在阅读回溯算法设计技术。如下所述。

> 回溯是蛮力方法的改进，它系统地在所有可用选项中搜索问题的解决方案。它通过假设解决方案由值的向量*(v1, v2, ..., vm)*表示，并以深度优先的方式遍历向量的域，直到找到解决方案。

我对上述文字的问题如下。

1.  作者所说的解决方案由向量表示是什么意思？

2.  作者所说的向量域是什么意思？

感谢您的澄清。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T12:04:02.503

我们以八皇后问题为例。

解是一个 8 个位置的向量，每个皇后 1 个。向量属于空间：`([0,7]x[0,7])^8`。这是一个非常大的空间，因此回溯算法将使用条件：“没有皇后应该检查另一个皇后”，以限制`([0,7]x[0,7])^8`存在解向量的较小“域”（的子空间）。

在这种情况下，算法将通过尝试第一个皇后的允许值之一来创建一个解向量，给出向量：`[ (0,0), X, X, X ...]`。然后使用该条件，它将限制应该搜索第二个位置的子空间，并继续这样做，直到找到合适的向量。

深度优先意味着在移动到解决方案的域之前，`[ (0,1), X, X, X ...]`算法将耗尽定义域中的所有潜在向量`[ (0,0), X, X, X ...]`

# c# - c#中的货币格式

> ID：10413120
> 
> 赞同：-1
> 
> 时间：2012-05-02T11:47:50.990
> 
> 标签：c#, c#-4.0

我使用以下这些代码。当我使用这些代码时，它会显示带有值的 $ 符号。我只想以正确的格式显示价值，没有任何符号。

```
private void button1_Click_2(object sender, EventArgs e)
{
    System.Threading.Thread.CurrentThread.CurrentCulture =
        new CultureInfo("en-US");
    int money = 12346789;
    TextBox1.Text = money.ToString("C");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T11:50:43.020

Using the format `"C"` is the correct way to format currency that will be culture-specific / culture-aware.

It sounds like you're actually trying to use a custom format. You could [write a formatter](http://msdn.microsoft.com/en-us/library/system.icustomformatter.aspx) for that, or you can just do this:

```
TextBox1.Text = money.ToString("#,##0.00"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T11:52:51.830

```
TextBox1.Text = String.Format("{0:N2}", money); 
```

# testcomplete - TeamCity 表示成功，但无法加载 msi

> ID：10413125
> 
> 赞同：0
> 
> 时间：2012-05-02T11:48:03.467
> 
> 标签：testcomplete, teamcity-7.0

我正在运行 TeamCity 代理（不是作为服务）。我正在使用命令行启动应用程序。如果我将命令行保存在 *.cmd 文件中并双击它，则应用程序正在正确加载，但如果我复制 ans将 cmd 文件中的代码粘贴到 TeamCity 并运行... TeamCity 说成功，但应用程序未加载。如果我将 TeamCity 作为服务运行并单击运行...它正在加载应用程序，但它与它一起加载“交互式服务检测”（http://blogs.msdn.com/b/patricka/archive/2010/04/27/what-is-interactive-services-detection-and-why-is-it-blinking- at-me.aspx），据我所知，这并不好，我需要使用我正在做的 agent.bat 文件运行它。什么可以解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T02:52:15.267

我通过以下方式运行代理服务：

*   打开服务（**cmd** => **services.msc**）
*   右键单击代理服务（默认为 TeamCity 构建代理服务）
*   选择**登录**选项卡
*   禁用“允许服务与桌面交互”

# ruby - 在 sinatra 响应后执行代码，Twilio 应用程序连接到外部 API

> ID：10413129
> 
> 赞同：1
> 
> 时间：2012-05-02T11:48:21.677
> 
> 标签：ruby, sinatra, rack, twilio, highrise

我已经看到并理解了 :after 过滤器，但我什至不知道我想要做什么的术语。我有一个使用 twilio 和 highrise 记录调用的简单应用程序。由于延迟问题，我想在发布到外部 API 之前通过 sinatra 返回 twiml 响应。有什么建议么？

我见过类似的问题，但没有一个涉及 ruby​​/sinatra。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T15:21:41.583

delay_job gem 应该[可以满足](https://github.com/tobi/delayed_job)您的需要。它允许您安排将来执行的代码，例如在发送 HTTP 响应之后。

DJ 依赖于 ActiveRecord（它需要一个 db 表来存储作业），但你也可以让它在 Sinatra 上运行：[https ://github.com/bmizerany/sinatra-dj](https://github.com/bmizerany/sinatra-dj)

# c - 套接字连接到服务器失败

> ID：10413131
> 
> 赞同：1
> 
> 时间：2012-05-02T11:48:24.253
> 
> 标签：c, sockets, unix

我正在尝试在 Mac Os X 下使用 AF_UNIX 套接字，并且我制作了一个包含一些信息的结构：

```
typedef struct
{
    int socket;
    int conn;
    struct sockaddr addr;
}socket_info; 
```

我使用这些功能：

```
socket_info* server_init(void)
{
  socket_info* result=(socket_info*)malloc(sizeof(socket_info));
  socklen_t length=sizeof(struct sockaddr);
  bzero(&(result->addr),sizeof(struct sockaddr));
  result->socket=socket(AF_UNIX,SOCK_STREAM,0);
  (result->addr).sa_family=AF_UNIX;
  (result->addr).sa_len=sizeof(struct sockaddr);
  strcpy((result->addr).sa_data,"./mysock");
  bind(result->socket,&(result->addr),length);
  listen(result->socket,MAX);
  result->conn=accept(result->socket,&(result->addr),&length);
  return result;
}

socket_info* client_init(socket_info* info)
{
  socket_info* result=(socket_info*)malloc(sizeof(socket_info));
  result->socket=socket(AF_UNIX,SOCK_STREAM,0);
  while( connect(result->socket,&(info->addr),sizeof(struct sockaddr))==-1)
  {
    if(errno==ENOENT)
    {
        sleep(1);
    }
    else
    {
        fprintf(stderr,"Error: %d",errno);
        free(result);
        result=NULL;
    }
  }
  return result;
} 
```

我主要使用它们：

```
int main(int argc, char** argv)
{
  socket_info *server_info, *client_info;
  pid_t pid;
  int fd[2];
  pipe(fd);
  pid=fork();
  if(pid==0)
  {
    char buffer[100];
    read(fd[0], server_info, sizeof(struct sockaddr));
    client_info=client_init(server_info);
    read(client_info->socket,buffer,100);
    printf("Messaggio ricevuto: %s",buffer);
  }
  else
  {
    const char* msg="ciao";
    server_info=server_init();
    write(fd[1],server_info,sizeof(struct sockaddr));
    write(server_info->socket,msg,sizeof(msg));
  }
  close(fd[0]);
  close(fd[1]);
  return 0;
} 
```

但是客户端无法连接：而是打印消息：“错误：61”。
可能是什么原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T11:52:50.183

你有两个主要问题：

1.  你有一个经典的比赛条件。如果客户端在服务器设置为监听之前尝试连接，客户端将收到错误消息。

2.  您的服务器不会检查任何错误，因此它可能会失败并且您不会知道。

在任何一种情况下，你都会得到你得到的错误（连接被拒绝）。

My money is on the first problem. If you flip the client and server so the child is the server, it will likely go from "happening not to work" to "happening to work". Most operating systems let the child run first because that saves a *ton* of memory and eliminates huge numbers of page faults in the typical case where the child just calls `exec`.

# css - 如何使内容或 div 居中

> ID：10413133
> 
> 赞同：0
> 
> 时间：2012-05-02T11:48:36.023
> 
> 标签：css

我使用了垂直对齐：中间；但它不起作用我不想使用 margin-top:80px

有关更多详细信息，请参见小提琴[http://jsfiddle.net/chanduzalte/2vwkA/1/](http://jsfiddle.net/chanduzalte/2vwkA/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T11:54:11.647

我总是参考这篇关于 CSS-Tricks 的精彩文章 - [http://css-tricks.com/centering-in-the-unknown/](http://css-tricks.com/centering-in-the-unknown/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T11:57:47.967

利用`style=" display:table-cell; vertical-align:middle"`

看看这个[更新的小提琴](http://jsfiddle.net/gopi1410/2vwkA/18/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T12:11:15.100

如果这将保持固定（框的高度和该框内只有一行文本），那么您可以通过添加行高来实现：

```
.center div{line-height:200px} 
```

# java - 如何让 JNLP 下载正确版本的 JavaFX 2？

> ID：10413136
> 
> 赞同：6
> 
> 时间：2012-05-02T11:48:54.860
> 
> 标签：java, cross-platform, 32bit-64bit, jnlp, javafx-2

JavaFX 2 高度依赖本机代码。对于我的桌面应用程序，我想为每个受支持的操作系统选择最匹配的 JavaFX 风格，以尽可能轻松地在目标系统上进行安装。

由于 JavaFX 2 附带了几个 Ant 任务来帮助部署，我认为这是要走的路，但我似乎走到了死胡同。

该`deploy`任务生成一个 JNLP 文件，其中包含调用 JavaFX 安装程序的资源引用：

```
 <resources>
    <jfx:javafx-runtime version="2.1+" ref="http://javadl.sun.com/webapps/download/GetFile/javafx-latest/windows-i586/javafx2.jnlp"/>
 </resources> 
```

这显然不适用于 Windows 以外的操作系统，甚至可能是 32 位 Windows。根据[JNLP doc](http://docs.oracle.com/javase/7/docs/technotes/guides/javaws/developersguide/syntax.html#resources)，依赖于操作系统的资源选择是可能的，但是：

```
<resources os="SunOS" arch="sparc">
   ...
</resources> 
```

但是，我无法弄清楚不同平台的 URL。他们是否记录在某处？还有其他方法可以达到我的目标吗？

请注意，已经有一个[类似的问题](https://stackoverflow.com/questions/8176237/how-to-deploy-a-desktop-javafx-2-0-application-correctly-using-jnlp-for-32-and-6)，但它仅限于问题的 32/64 位部分，并且没有得到答复。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T15:04:42.663

Jnlp 和插件模式仅在当前 JavaFX 2.1 中的 Windows 上受支持

Mac/Linux 运行时计划在 2.2 版本中添加。您可以尝试开发预览包：[http ://www.oracle.com/technetwork/java/javafx/downloads/devpreview-1429449.html](http://www.oracle.com/technetwork/java/javafx/downloads/devpreview-1429449.html)

# java - Java 连接到 localhost SMTP 服务器

> ID：10413137
> 
> 赞同：2
> 
> 时间：2012-05-02T11:48:57.860
> 
> 标签：java, hmail-server

这段代码有什么问题？我正在尝试使用 hMailServer 在我的本地主机上发送电子邮件，但它不起作用。虽然此代码适用于 Gmail SMTP 服务器.. 我可能认为错误在我的 hMailServer 中，但我找不到它..

```
 try{
    String host = "127.0.0.1";
    String from = "account@127.0.0.1";
    String pass = "1q2w#E$R";
    Properties props = System.getProperties();
    props.put("mail.smtp.starttls.enable", "true"); // added this line
    props.put("mail.smtp.host", host);
    props.put("mail.smtp.user", from);
    props.put("mail.smtp.password", pass);
    props.put("mail.smtp.port", "25");
    props.put("mail.smtp.auth", "true");

    String[] to = {"test@test.com"}; // added this line

    Session session = Session.getDefaultInstance(props, null);
    MimeMessage message = new MimeMessage(session);
    message.setFrom(new InternetAddress(from));

    InternetAddress[] toAddress = new InternetAddress[to.length];

    // To get the array of addresses
    for( int i=0; i < to.length; i++ ) { // changed from a while loop
        toAddress[i] = new InternetAddress(to[i]);
    }
    for( int i=0; i < toAddress.length; i++) { // changed from a while loop
        message.addRecipient(Message.RecipientType.TO, toAddress[i]);
    }
    message.setSubject("sending in a group");
    message.setText("Welcome to JavaMail");
    Transport transport = session.getTransport("smtp");
    transport.connect(host, from, pass);
    transport.sendMessage(message, message.getAllRecipients());
    transport.close();
    }
    catch (Exception e) {
        e.printStackTrace();
    } 
```

这是我得到的错误：

```
 javax.mail.MessagingException: Could not connect to SMTP host: 127.0.0.1, port: 25;
nested exception is:
    java.net.SocketException: Permission denied: connect
    at com.sun.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:1213)
    at com.sun.mail.smtp.SMTPTransport.protocolConnect(SMTPTransport.java:311)
    at javax.mail.Service.connect(Service.java:233)
    at javax.mail.Service.connect(Service.java:134)
    at nl.company.cms.login.emailservice.TestMail.main(TestMail.java:71) 
```

我正在使用 hMailServer..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T12:13:46.540

如果您使用的是 Java 7，那么我会尝试在您启动应用程序时将其添加为 JVM 参数：

`-Djava.net.preferIPv4Stack=true`

这可能是必要的，因为 Java 现在正在尝试使用 IPv6，所以我们需要告诉它更喜欢 IPv4 堆栈。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-16T23:14:45.827

我确认只有在 Tomcat 的 catalina.bat 中编写的这个参数“-Djava.net.preferIPv4Stack=true”帮助我从我的 Spring Web 应用程序发送一封电子邮件到我的本地 hMailServer 实例。环境：Windows 8，Java 7u60。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-12T23:42:57.313

如果您使用 Xampp，请确保 Mercury 在您的机器上运行，因为如果未启动 Mercury，则端口 25 将无法与 javaMail 一起使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-04T11:26:06.430

我可以确认，通过仅执行@Quantas 提供的在 ECLIPSE 的“运行配置”中添加参数“-Djava.net.preferIPv4Stack=true”的建议，我得到异常邮件的问题现在已经解决。

从过去 2 天开始，我在使用“[假 SMTP 邮件服务器](https://nilhcem.github.io/FakeSMTP/)”捕获从我在 Eclipse 中运行的应用程序发出的邮件时遇到了以下异常。

```
javax.mail.MessagingException: Could not connect to SMTP host: localhost, port: 25; 
```

现在问题已经完全解决了，只需将这一小段代码放入[ECLIPSE LUNA的“运行配置”中的“VM ARGUMENTS”中](https://eclipse.org/luna/)

```
-Djava.net.preferIPv4Stack=true 
```

如下图所示

[![在此处输入图像描述](../Images/ba7322ac6fe1389566c4218b49b34b1e.png)](https://i.stack.imgur.com/hPdMT.jpg)

这表明java更喜欢使用IPV4堆栈而不是IPV6（它以前更喜欢）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-04-03T12:24:24.227

我可以确认只为 Tomcat 添加 VM 参数：

> -Djava.net.preferIPv4Stack=true

可以通过 JavaMail API 从我的 web 应用程序在我的本地主机上发送带有“假 SMTP 服务器”的假邮件

# android - 如何将雅虎联系人与安卓联系人同步？

> ID：10413138
> 
> 赞同：3
> 
> 时间：2012-05-02T11:48:59.993
> 
> 标签：android

我尝试使用 Y Mail 应用程序来获取 yahoo 联系人并与 android 联系人同步。但我希望雅虎联系人与使用 android 帐户管理器的联系人同步。（即电子邮件应用程序）。请告诉我如何与 android 联系人同步？

# c# - “调用属性更改命令”功能应该去哪里？

> ID：10413148
> 
> 赞同：4
> 
> 时间：2012-05-02T11:49:47.133
> 
> 标签：c#, wpf, mvvm

我有一个具有以下三个属性的 viewModel：

```
string searchString;
ObservableCollection<Company> ListedItems;
ICommand SearchCommand; 
```

它代表了我数据库中可搜索的公司列表。`SearchCommand`根据 的值搜索数据库`searchString`，然后填充`ListedItems`结果。

`SearchString`绑定到文本框，而`SearchCommand`绑定到按钮。我想让它在用户输入文本框时`SearchCommand`自动执行，而无需用户单击按钮。

目前，我通过我的 viewModel 执行此操作：

```
public ListViewModel() {
    this.PropertyChanged += delegate(object o, PropertyChangedEventArgs e)
    {
        if (e.PropertyName == "SearchString")
            SearchCommand.Execute(null);
    };
} 
```

它是否正确？在视图中具有此功能会更好吗？如果是这样，那是如何实现的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T11:58:34.357

我认为更合适的解决方案是从 ViewModel 上 SearchString 属性的设置器调用命令。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T12:05:27.833

我个人会考虑使用 Expression Blend SDK [InvokeCommandAction](http://msdn.microsoft.com/en-us/library/ff724018%28v=expression.40%29.aspx)。

我敲了一个有效的例子。这是视图：

```
<Window
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity" x:Class="WpfApplication1.MainWindow"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <StackPanel>
            <TextBox Text="Hello World">
                <i:Interaction.Triggers>
                    <i:EventTrigger EventName="TextChanged">
                        <i:InvokeCommandAction Command="{Binding DoItCommand}" />
                    </i:EventTrigger>
                </i:Interaction.Triggers>
            </TextBox>
            <Button x:Name="CommandButton" Command="{Binding DoItCommand}" Content="Click me" />
        </StackPanel>
    </Grid>
</Window> 
```

还有一个非常简单的 ViewModel（使用 PRISM 的[DelegateCommand](http://msdn.microsoft.com/en-us/library/gg431410%28v=pandp.40%29.aspx)）：

```
 public class SomeViewModel
    {
        public SomeViewModel()
        {
            DoItCommand = new DelegateCommand(() => Debug.WriteLine("It Worked"));
        }

        public ICommand DoItCommand { get; private set; }
    } 
```

简单连接 ViewModel 背后的代码：

```
 public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
            DataContext = new SomeViewModel();
        }
    } 
```

您也不需要 Expression Blend 来执行此操作 - SDK 可以[免费下载](http://www.microsoft.com/en-us/download/details.aspx?id=10801)和使用。

如果您不喜欢使用 Expression Blend SDK，[MVVM Light](http://www.galasoft.ch/mvvm/)提供了 EventToCommand，它与此类似。

当然，只有在仍有理由将按钮放置在适当位置（或者您希望利用命令的可执行逻辑）时，这样做才真正有意义，否则您可以在属性的 setter 中触发一些逻辑。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T11:59:02.727

更好地将命令绑定到`TextBox`. 也许[这](https://stackoverflow.com/questions/55855/textbox-textchanged-icommandsource)会有所帮助。

# c++ - 调整大小和清除数组

> ID：10413149
> 
> 赞同：1
> 
> 时间：2012-05-02T11:49:47.710
> 
> 标签：c++, c, arrays

我想在我的程序中重复使用的数组有问题。我需要动态更改大小并清除它。但不幸的是，调整大小不起作用。

```
uint8_t * readBuffer; // Create array pointer

readBuffer = (uint8_t *) malloc(4); // Mem. alloc. 4bytes
memset(readBuffer, 0, sizeof(readBuffer); // Reset array
// Do stuff
free(readBuffer) // Release mem. block
....
readBuffer = (uint8_t *) malloc(1) // Mem. alloc. 1byte
memset(readBuffer, 0, sizeof(readBuffer); // Reset array
// Do stuff
free(readBuffer) // Release mem. block 
```

在调整大小的步骤中，我的数组的长度仍然是前者（4）。

我用`free`错了吗？

此外，还有更有效`memset`的清算方式吗？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T11:56:55.167

对于任何数据类型，指针的大小（例如`readBuffer`）始终相同（此处为 4 个字节）。您需要将 malloc 中给出的大小存储到临时文件中，然后使用`memset()`：

```
uint size = 4;
readBuffer = (uint8_t *) malloc(size); // Mem. alloc. 4bytes
memset(readBuffer, 0, size); // Reset array 
```

此外，参数以`malloc()`字节为单位，因此`malloc(1)`理想情况下意味着 1 个字节。如果您使用的是 C++，请使用`new`：

```
readBuffer = new uint8_t[N];  // 'N' is number of elements of "uint8_t" 
```

**编辑**：

在 C++ 中，[`std::vector`](http://www.cplusplus.com/reference/stl/vector/)很容易提供这个工具：

```
std::vector<uint8_n> readBuffer(N, 0); 
```

在这里，您正在为 分配“N”个元素`readBuffer`并将它们初始化为`0`.
每当您想添加元素时，都可以使用`push_back()`方法。对于更大的块，您还可以探索`resize()`或`reserve()`方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T11:55:45.807

> 在调整大小的步骤中，我的数组的长度仍然是前者（4）。

问题是`sizeof(readBuffer)`返回*指针*的大小，而不是分配的内存量`malloc()`。如果要跟踪后者，则必须自己进行。

> 我用`free`错了吗？

不，您使用`free()`正确。

> 有比`memset`清算更有效的替代方案吗？

我怀疑是否有更有效的*方法*。您可以尝试使用`calloc()`，这就像`malloc()`为您初始化内存一样但零初始化。

最后，检查是否`malloc()`已经返回是一个好主意`NULL`，如果没有足够的内存来满足请求，它可以这样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T12:44:29.380

```
uint8_t * readBuffer; // Create array pointer

readBuffer = (uint8_t *) malloc(4); // Mem. alloc. 4bytes
memset(readBuffer, 0, sizeof(readBuffer); // Reset array
// Do stuff
free(readBuffer) // Release mem. block
....
readBuffer = (uint8_t *) malloc(1) // Mem. alloc. 1byte
memset(readBuffer, 0, sizeof(readBuffer); // Reset array
// Do stuff
free(readBuffer) // Release mem. block 
```

不需要 malloc 的强制转换。此外， readBuffer 没有大小，你想要做的是 sizeof(Uint8_t) * 4。这给了你正确的大小。

而不是 malloc，您应该使用 realloc，因为您想重新分配一个现有的内存块指针。this 的返回值指向新的内存块，如果堆上没有可用内存，则返回 NULL。新代码：

```
uint8_t * readBuffer; // Create array pointer

readBuffer = malloc(4); // Mem. alloc. 4bytes
memset(readBuffer, 0, (sizeof(uint8_t) * 4)); // Reset array
// Do stuff
free(readBuffer) // Release mem. block
....
uint8_t * temp = realloc(readBuffer, 1); // Mem. alloc. 1byte
if(temp != NULL) readBuffer = temp; //Check if their was enough room to allocate memory
memset(readBuffer, 0, (sizeof(uint8_t) * 4)); // Reset array
// Do stuff
free(readBuffer) // Release mem. block 
```

# javascript - 移动应用 HTML5 游戏开发（工具）

> ID：10413152
> 
> 赞同：-2
> 
> 时间：2012-05-02T11:49:52.943
> 
> 标签：javascript, android, html, mobile

我想使用 Html5 画布和 js 为移动设备和网络编写游戏。我已经看到了诸如[Construct 2](http://www.scirra.com/) [（教程）](http://www.youtube.com/watch?v=TgIt3vAajx8)之类的开发工具和解释如何从头开始创建 html5 游戏的网站，例如[Lost Decade Games](http://www.lostdecadegames.com/how-to-make-a-simple-html5-canvas-game/)。是否有任何一种方法的优势和/或推荐，特别是对于刚开始拥有几年 WinApp 开发经验的人？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-02T13:11:32.633

恕我直言，如果您对开发感到满意，那么从头开始构建游戏会比使用工具学到更多。

# jquery - 如果必填字段为空，则滑动表单停止动画

> ID：10413154
> 
> 赞同：0
> 
> 时间：2012-05-02T11:49:59.290
> 
> 标签：jquery, forms, validation, animation

我有一个很大的表格，所以使用滑动表格

[http://tympanus.net/Tutorials/FancySlidingForm/](http://tympanus.net/Tutorials/FancySlidingForm/)

但如果步骤 1 中的必填字段为空，我需要停止将步骤 1 滑动到步骤 2

为此我改变了这样的功能

```
 function validateStep(step) {
            if (step == fieldsetCount) return;

            var error = 1;
            var hasError = false;
            $('#formElem').children(':nth-child(' + parseInt(step) + ')').find(':input:not(button)').each(function () {
                var $this = $(this);
                var valueLength = jQuery.trim($this.val()).length;

                if (valueLength == '') {
                    hasError = true;
                    $this.css('border-color', '#f8bcc2')
// here i added one function 
                    $('#steps').each(function () {
                        //   alert('hhh');
                        marginLeft: '0' + 'px'

                    }
                        );

                    //                $('#steps').css('margin-Left', '0')
                }
                else
                    $this.css('border-color', '#8DC440');
            }); 
```

在此先感谢...如果有任何解决方案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T12:02:22.020

单击检查时：

```
[...].click(function(ev){
  var _this=$(this), i = $(this).index(), valid;
  var set=$("#steps formset").get(index-1);
  valid=// Here check set all mandatory field is not empty
  if(valid) $("#steps formset").get(index)/*slide*/
}); 
```

添加“强制”类以识别必填字段。

# ios - Chinese Text to Speech in iOS

> ID：10413157
> 
> 赞同：0
> 
> 时间：2012-05-02T11:50:08.933
> 
> 标签：ios, text-to-speech

Does anyone know how to implement Text to Speech with Chinese language in iOS?

Any links or suggestions would be helpful.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T16:17:46.977

正如 Sten 所说，您可以使用[iSpeech](http://www.ispeech.org/)。这是相同的答案，更详细：

您可以使用他们的[API](http://www.ispeech.org/developers)，但问题是它仅限于每天 200 次使用。

如果您想无限使用，则需要购买。解决这个问题的一种方法是访问他们的[演示程序](http://www.ispeech.org/text.to.speech.demo.php)返回的数据（以 mp3 格式返回）。

我编写了一小段代码在 Python 中演示了这一点。Python 可从[该](http://pythonforios.com/)站点用于 iOS。演示程序一次限制为 20 个单词，因此您的程序必须每 20 个单词拆分一次，并分别输入这些段。以下代码不使用缓冲区，因此段之间可能会有轻微的延迟。

```
from urllib import quote_plus

def speak(text): 
    import pydshow 
    words = text.split() 
    temp = [] 
    stuff = [] 
    while words: 
        temp.append(words.pop(0)) 
        if len(temp) == 24: 
            stuff.append(' '.join(temp)) 
            temp = [] 
    stuff.append(' '.join(temp)) 
    for i in stuff: 
        pydshow.PlayFileWait('http://api.ispeech.org/api/rest?apikey=8d1e2e5d3909929860aede288d6b974e&format=mp3&action=convert&voice=chchinesemale&text='+quote_plus(i))

if __name__ == '__main__':
       speak('Hello. This is a text-to speech test.') 
```

我觉得这很理想，因为演示程序确实使用了 API，但它使用了用于演示程序的 API 密钥。因此，它永远不会用完。关键是`8d1e2e5d3909929860aede288d6b974e`。此外，该程序非常简单，可以适应任何编程语言。

您实际上可以在没有程序的情况下在工作中测试它，方法是在地址栏中输入以下内容：

[http://api.ispeech.org/api/rest?apikey=8d1e2e5d3909929860aede288d6b974e&format=mp3&action=convert&voice=chchinesemale&text=Hello](http://api.ispeech.org/api/rest?apikey=8d1e2e5d3909929860aede288d6b974e&format=mp3&action=convert&voice=chchinesemale&text=Hello)

以下是您可以根据自己的需要定制的方法：

```
http://api.ispeech.org/api/rest?apikey=8d1e2e5d3909929860aede288d6b974e&format=mp3&action=convert&voice=chchinesemale&text= 
```

后面跟着你要说的文字。在这种情况下，您还可以通过将 更改`chchinesemale`为 iSpeech 提供的其他内容来调整性别。例如，`chchinesefemale`。这将使用相同的文本，但使用女性声音。可以在[此处](http://www.ispeech.org/downloads/ispeech-api-guide-2011-12-12.pdf)找到有关代码的规范。

希望我有所帮助！

注意：Pydshow 是我对 DirectShow 的封装，它仅适用于 Windows。如果您选择此方法，则必须为 iOS 找到替代方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T11:42:10.750

iSpeech 可以处理中文，对于较短的消息是免费的，而且效果很好。但是，语音在线呈现，因此您需要连接。[你可以在这里](http://www.ispeech.org/text.to.speech.demo.php)测试声音：

# php - Converting values from array ? PHP

> ID：10413160
> 
> 赞同：-3
> 
> 时间：2012-05-02T11:50:25.110
> 
> 标签：php, arrays

I want to converting values from array before inserting in MySQL. I used the following code, but it only works for some cases (2_AAA, 2_AAA_1) bun not works for cases (2_AA_B, 2_AA_B_1, AA_AB).

```
$vars = array('val' => '2_AAA',
              'val' => '2_AAA_1',
              'val' => '2_AA_B',
              'val' => '2_AA_B_1',
              'val' => 'AA_AB');

foreach ($vars as $v):
    $vArr = explode('_', $v['val']);

    if (is_numeric($vArr[0]) && count($vArr[0])) {
        $vid = $vArr[0];
        $name = trim($vArr[1]);
        $name_real = $var;
    } else {
        $vid = 0;
        $name = $v['val'];
        $name_real = $v['val'];
    }

    echo "VID -->" . $vid . "\n";
    echo "NAME -->" . $vArr[0] . "\n";
    echo "NAME_REAL -->" . $name_real . "\n";

endforeach; 
```

From this array I want to get following result

```
//VID -->2
//NAME -->AAA
//NAME_REAL -->2_AAA

//VID -->2
//NAME -->AAA
//NAME_REAL -->2_AAA_1

//VID -->2
//NAME -->AA_B
//NAME_REAL -->2_AA_B

//VID -->2
//NAME -->AA_B
//NAME_REAL -->2_AA_B_1

//VID -->0
//NAME -->AA_AB
//NAME_REAL -->AA_AB 
```

If can not prefix before name the VID is 0.

How can I make this ?

Thanks in advance !

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T12:17:13.583

```
$vars = array('2_AAA','2_AAA_1','2_AA_B','2_AA_B_1','AA_AB');

foreach ($vars as $v):
    $vArr = explode('_', $v);
    $name = '';
    for($i=0; $i<sizeof($vArr); $i++){
            if(is_numeric($vArr[0]))
        $vid = $vArr[0];
    else
        $vid = 0;

    if(!is_numeric($vArr[$i])){
        if($name)
            $name .= '_'.$vArr[$i]; 
        else
            $name = $vArr[$i];
    }
    $name_real = $v;
}

echo '<br/>------------------------------------------------------<br/>';
echo "VID -->" . $vid . "<br/>";
echo "NAME -->" . $name . "<br/>";
echo "NAME_REAL -->" . $name_real . "<br/>";

endforeach; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T12:08:07.590

这个怎么样？以下代码给出了您似乎期望的输出。

```
<?php

$vars = array(
    array( 'val' => '2_AAA' ),
    array( 'val' => '2_AAA_1' ),
    array( 'val' => '2_AA_B' ),
    array( 'val' => '2_AA_B_1' ),
    array( 'val' => 'AA_AB' )
);

foreach ($vars as $v) {
    $vArr = explode('_', $v['val']);

    if( is_numeric( $vArr[0] ) ) {
        $vid = $vArr[0];
        $name = $vArr[1];
        $name_real = $v['val'];
    }
    else {
        $vid = 0;
        $name = $v['val'];
        $name_real = $v['val'];
    }

    echo "VID --> $vid\n";
    echo "NAME --> $name\n";
    echo "NAME_REAL --> $name_real\n";
    echo "\n";

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T12:12:51.387

尝试这样做..这不是一个解决方案，但这会让你大致了解如何做到这一点：--

```
$vars = array('0' => '2_AAA',
              '1' => '2_AAA_1',
              '2' => '2_AA_B',
              '3' => '2_AA_B_1',
              '4' => 'AA_AB');

foreach ($vars as $v):
$i=0;
    $vArr = explode('_', $v);
print_r($vArr);echo "</br>";
    if (is_numeric($vArr[$i]) && count($vArr[0])) {
        $vid = $vArr[$i];
        $name = trim($vArr[$i+1]);
        $name_real = $var;
    } else {

    }

    echo "VID -->" .$vid ; echo "</br>";
    echo "NAME -->" . $vArr[$i+1];echo "</br>";
    echo "NAME_REAL -->" . $name_real;echo "</br>";

endforeach; 
```

# perl - how to avoid the "useless split in void context" warning in Perl?

> ID：10413165
> 
> 赞同：0
> 
> 时间：2012-05-02T11:50:33.350
> 
> 标签：perl, hash, split

this is my code:

```
my %hash=();

while (<DATA>) {
    split /\=|,/;
    $hash{$_}++;
}

map{print "$_ == > $hash{$_}\n"} sort keys %hash;

__DATA__
1=2,3,4
a=1,1,5 
```

I don't know why it warn me : **Useless use of split in void context at get_path.pl line 11."**

and how should I change the code to avoid this warning? thank you~~~~~

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T12:02:29.553

你没有对 split 的返回值做任何事情；$_ 在 '$hash{$_}' 中使用时是从 DATA 中读取的行：

while 循环后的哈希值是：

```
%hash = (
          '1=2,3,4
' => 1,
          'a=1,1,5
' => 1
        ); 
```

还要注意键末尾的新行。

编辑：用评论更新的问题：“这个脚本打算计算相同的项目。这些项目由 = 或 , – 分隔

这样做的方法是将您的 while 循环修改为：

```
while (<DATA>) {
    chomp ;
    foreach(split /\=|,/){
        $hash{$_}++;
    }
} 
```

split 返回一个在 '=' 或 ',' 上拆分的数组 - 然后循环遍历该值并增加一个以该值为键的哈希值

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T12:11:49.493

如果您要计算 DATA 中任何字符串的出现次数，那么以下内容将满足您的需求。split 的返回需要返回一个数组，然后就可以对数组进行处理了。您可以在一行中执行循环，但这种方式更详细。

```
use strict;
use warnings;
use Data::Dumper;

my %hash=();

while (<DATA>) {
    chomp;
    my @arr = split /\=|,/;
    map {$hash{$_}++} @arr;
}
print Dumper \%hash;

$VAR1 = {
      '4' => 1,
      '1' => 3,
      'a' => 1,
      '3' => 1,
      '2' => 1,
      '5' => 1
    }; 
```

在一行中执行此操作

```
map {$hash{$_}++} split /[=,\n]/, while <DATA>; 
```

# asp.net - Client found response content type of 'multipart/related; type="application/xop+xml"

> ID：10413170
> 
> 赞同：1
> 
> 时间：2012-05-02T11:50:47.393
> 
> 标签：asp.net, xml, web-services, mtom, xop

When I am calling Web service method, and getting this error,

```
"Client found response content type of 'multipart/related;   
type="application/xop+xml";    
boundary="uuid:8507df24-4a53-4943-9728-3297e243ddce";   
start="<root.message@cxf.apache.org>";   
start-info="application/soap+xml"', but expected 'application/soap+xml'. 
```

The request failed with an empty response."

I m exacting `"application/soap+xml"` now , but how can I get `"application/xop+xml"` response?.

I have to solve this problem,

Thanks for any advice...

# c# - 我想尝试使用 ServerVariables["REMOTE_ADDR"] 检查 IP，但它一直返回 127.0.0.1

> ID：10413171
> 
> 赞同：0
> 
> 时间：2012-05-02T11:50:54.603
> 
> 标签：c#, asp.net, ip-address

我想尝试测试当前的 IP 地址以找到当前的国家

所以我试试这段代码...... HttpContext.Current.Request.ServerVariables["REMOTE_ADDR"];

但它总是返回 127.0.0.1'

是否有任何其他代码可以让我在互联网上获取我的 ip 地址，例如 61.90.25.10 而不是本地的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T12:08:53.570

```
HttpContext.Current.Request.UserHostAddress; 
```

或者

```
HttpContext.Current.Request.ServerVariables["REMOTE_ADDR"]; 
```

要获取机器的 IP 地址而不是代理，请使用以下代码

```
HttpContext.Current.Request.ServerVariables["HTTP_X_FORWARDED_FOR"]; 
```

但是，当您离线使用此应用程序时，您将始终收到 PC 的 IP 地址，因为这是服务器将看到的 IP，换句话说，您不会离开路由器并重新连接到服务器上，因此不会使用您的外部 IP：

如果您在在线运行的服务器上测试您的应用程序并尝试打印：

```
Response.Write("IP Address:");
Response.Write("IP: " + HttpContext.Current.Request.UserHostAddress);
Response.Write("IP1: " + HttpContext.Current.Request.ServerVariables["REMOTE_ADDR"]);
Response.Write("IP2: " + HttpContext.Current.Request.ServerVariables["HTTP_X_FORWARDED_FOR"]); 
```

您将看到您拥有的公共 ip，如果您在到达您的 PC（如 cloudflare）之前使用反向代理，请注意确保使用，`HTTP_X_FORWARDED_FOR`否则您可以使用 remote_addr 或 userhostaddress。

# java - 在 @Before 方法中停止 JUnit 测试而不会失败

> ID：10413173
> 
> 赞同：14
> 
> 时间：2012-05-02T11:50:58.007
> 
> 标签：java, junit

这些是我的测试用例

```
class Mother {

    @Before
    public void setUp() {
        if (!this.getClass().isAnnotatedWith("Version20")) { // pseudo code
            /*
             * stop this test without failing!
             */
        }

        // further setup
    }
}

@Version20
class Child extends Mother {

    @Test
    public void test() {
        // run only when Version == 20
    }
} 
```

是否可以在 Mother 的 @Before 方法中停止 Child 中的测试而不会失败或 assertTrue(false)？

编辑：我有更多版本@Version19、@Version18 等。我的软件正在读取配置文件并输出结果，一些测试仅适用于特殊版本。我不想在测试方法中进行版本检查，因为我有很多小测试并且不喜欢代码重复

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-02T12:01:59.273

我之前问过一个[类似的问题](https://stackoverflow.com/questions/1689242/conditionally-ignoring-tests-in-junit-4)——结果是你可以使用`Assume`类的方法来禁用基于*运行时*检查的测试（而`@Ignore`这是一个静态条件）。

也就是说，如果您**总是**根据特定注释禁用它们，那么您似乎实际上不需要在运行时执行此操作。只需用 ass 注释类`@Ignore`就`@Version20`可以完成这项工作，并且可以说会更清晰。

尽管我怀疑您可能仅在测试以“1.0 模式”运行时才忽略 - 在这种情况下，它是运行时自省，您可以使用以下方式执行此操作：

```
@Before
public void setUp() {
   if (!this.getClass().isAnnotatedWith("Version20")) {
      final String version = System.getProperty("my.app.test.version");
      org.junit.Assume.assumeTrue(version.equals("2.0"));
   }
} 
```

# jquery - jQuery Stickysidebar overlaying on footer

> ID：10413176
> 
> 赞同：1
> 
> 时间：2012-05-02T11:51:14.823
> 
> 标签：jquery, overlay, footer, sticky

I am using the jQuery stickybox plugin. Here is the plugin's website: [http://www.profilepicture.co.uk/sticky-sidebar-jquery-plugin/](http://www.profilepicture.co.uk/sticky-sidebar-jquery-plugin/)

Here is my page: [http://dev.erfolgsphoto.de/test/index.html](http://dev.erfolgsphoto.de/test/index.html)

The problem is, on my page, you can see the sliding box is overlaying on footer but I want it to do not overlay on footer. The sliding box should be in the parent DIV (DIV with class "body-container-main"). The example on the plugin's site (please see example with multiple sticky boxes) is also working as I am expecting. But my code is not working as expected.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T13:23:08.713

在第 97 行`stickysidebar.jquery.js`，插件循环遍历粘性侧边栏的所有父元素。评论提到：

> 上树，直到我们找到一个元素来定位

它从调用到`.parent()`该循环内部检索的第一个元素是您的 div “包装器”。`body`紧随其后的是`html`。它首先考虑的元素**不是** `body-container-main`。

在`$this.parent()`第 79 行调用时，它**确实**引用了您想要的容器 div。真正应该发生的是，第 97 行上的循环永远不会继续。这意味着三个条件之一必须为假。我建议你制作`$parent.css("position")`“静态”以外的东西。在您的 stickybox multi 示例页面中，他们将父 div 布局为`position:absolute`和`position:relative`。购物车/篮子的`parent()`div 是`position:static`这样一个人最终会粘在整个页面上。

将父 div 的`position`css 属性更改为`relative`.

适用于其他人的代码部分：

```
// 'Line 75' of the plugin code here
var setPosition = function ($sb) {
if ($sb) {
  var $this = $sb
    , $parent = $this.parent() // **line 79**
    , parentOffs = $parent.offset()
    , currOff = $this.offset()
    , data = $this.data("stickySB");
  if (!data) {
    data = {
        offs: {} // our parents offset
      , orig: { // cache for original css
            top: $this.css("top")
          , left: $this.css("left")
          , position: $this.css("position")
          , marginTop: $this.css("marginTop")
          , marginLeft: $this.css("marginLeft")
          , offset: $this.offset()
        }
    }
  }
  //go up the tree until we find an elem to position from
  while (parentOffs && "top" in parentOffs // **line 97**
    && $parent.css("position") == "static") {
    $parent = $parent.parent();
    parentOffs = $parent.offset();
  }
  if (parentOffs) { // found a postioned ancestor
    var padBtm = parseInt($parent.css("paddingBottom"));
    padBtm = isNaN(padBtm) ? 0 : padBtm;
    data.offs = parentOffs;
    data.offs.bottom = settings.constrain ?
      Math.abs(($parent.innerHeight() - padBtm) - $this.outerHeight()) :
      $(document).height();
  }
  else data.offs = { // went to far set to doc
      top: 0
    , left: 0
    , bottom: $(document).height()
  }; 
```

# c# - Reading data from database using labels and radio buttons

> ID：10413177
> 
> 赞同：0
> 
> 时间：2012-05-02T11:51:24.537
> 
> 标签：c#, asp.net, database, sqldatareader

I am developing an online examination system, but im having difficulties trying to read questions from the database to be displayed on an aspx on page load. Please help me out...wat do i do...i tried this code but its not working well.

```
 string cs = ConfigurationManager.ConnectionStrings["OnlineExamDBCS"].ToString();
        SqlConnection conn = new SqlConnection(cs);
        conn.Open();
        SqlCommand cmd = new SqlCommand();
        cmd.Connection = conn;

  cmd.CommandText = "SELECT questionTitle, Answer1, Answer2, Answer3, Answer4, Answer5 
        FROM tblQuestions WHERE CourseCode = \'" + question + "\'";
        SqlDataReader reader = cmd.ExecuteReader();
        while (reader.Read())
        {
            LabelRadio1.Questions = reader["questionTitle"].ToString();
            LabelRadio1.Answers = reader["Answer1"].ToString();
            LabelRadio1.Answers = reader["Answer2"].ToString();
            LabelRadio1.Answers = reader["Answer3"].ToString();
            LabelRadio1.Answers = reader["Answer4"].ToString();
            LabelRadio1.Answers = reader["Answer5"].ToString();
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T12:05:49.633

试试这个代码，这可能对你有帮助

protected void Page_Load(object sender, EventArgs e)

{ 数据表 dt = 新数据表（）；

```
 string select_qry = "SELECT questionTitle, Answer1, Answer2, Answer3, Answer4, Answer5  FROM tblQuestions WHERE CourseCode = \'" + question + "\'";
          SqlCommand cmd = new SqlCommand(select_qry);
          dt= GetData(cmd);
          if (dt.Rows.Count > 0)
          {
              LabelRadio1.Questions = dt.Rows[0]["questionTitle"].ToString();
              LabelRadio1.Answers = dt.Rows[0]["Answer1"].ToString();
              LabelRadio1.Answers = dt.Rows[0]["Answer2"].ToString();
              LabelRadio1.Answers = dt.Rows[0]["Answer3"].ToString();
              LabelRadio1.Answers = dt.Rows[0]["Answer4"].ToString();
              LabelRadio1.Answers = dt.Rows[0]["Answer5"].ToString(); 
          }

    }
    public DataTable GetData(SqlCommand cmd)
    {
        string sqlCon =System.Configuration.ConfigurationManager.ConnectionStrings["OnlineExamDBCS"].ToString();
        SqlConnection Con = new SqlConnection(sqlCon);
        DataTable dt = new DataTable();
        SqlDataAdapter sda = new SqlDataAdapter();
        cmd.CommandType = CommandType.Text;
        cmd.Connection = Con;
        Con.Open();
        sda.SelectCommand = cmd;
        sda.Fill(dt);
        return dt;
    } 
```

# c - glibc可以编译成一个目标文件吗

> ID：10413181
> 
> 赞同：0
> 
> 时间：2012-05-02T11:51:46.120
> 
> 标签：c, linux, gcc, x86-64, glibc

可以`glibc`编译成一个目标文件，然后可以链接到任何程序。这里的主要目的是便携性。因为我不需要以这种方式安装动态库。这可以做到吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T11:55:48.107

您可以编译`glibc`成`.a`可以链接到静态可执行文件的文件。静态库是默认构建的。

# visual-studio-2010 - 在 Visual Studio 2010 中从源代码管理中注释变更集

> ID：10413188
> 
> 赞同：5
> 
> 时间：2012-05-02T11:52:29.260
> 
> 标签：visual-studio-2010, version-control, tfs-power-tools

我将 Visual Studio 2010 与 Team Foundation Server 2010 和 Power Tools 结合使用。

在我的代码文件`(eg. \*.cs)`中，我可以在编辑器中右键单击并选择`Source Control"->"Annotate`以获取一个额外的列，我可以在其中看到谁最后修改了这些行。这似乎不适用于我的 MVC-Views `(\*.cshtml)`。

电动工具的扩展/功能是否有文件类型限制？

如何在 Visual Studio 中为所有基于文本的文件类型启用这个非常有用的功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T13:19:56.393

TFS 可能无法将 cshtml 文件类型识别为文本类型，因此禁用了注释功能。要检查这一点，请转到您的团队项目源代码控制设置，在文件类型选项卡中查找扩展名。如果它不存在，请添加它并将其设置为文本类型并重新启动 Visual Studio。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-19T13:27:17.130

对我来说，如果我在 cshtml 文件编辑器中右键单击并转到 Source Control 子菜单，则 Annotate 不存在。但是，如果我在解决方案资源管理器中右键单击该文件并转到源代码管理子菜单，那么 Annotate 就在那里。

# android - Dismiss an Alertdialog in Android

> ID：10413192
> 
> 赞同：0
> 
> 时间：2012-05-02T11:52:52.093
> 
> 标签：android, android-alertdialog, dismiss

I am trying to dismiss an AlertDialog in android:

```
 public AlertDialog dialog;
             AlertDialog.Builder builder;
                builder = new AlertDialog.Builder(this);
                builder.setMessage("Message."); 
                dialog= builder.create();
                dialog.show();
  Thread thread = new Thread(this);
  thread.start();

        public void run() {
        Looper.prepare();
        //some code
        handler.sendEmptyMessage(0);
        Looper.loop();
        }

        Handler handler= new Handler() {

            @Override public void handleMessage(Message msg)
            { dialog.dismiss();
            //some code 
            } 
            }; 
```

It doesn't work. I have searched and tried several proposed methods, and they were all unsuccessful. Any help is appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T11:58:35.667

请使用 ProgressDailog 而不是警报。

```
To create:

 ProgressDailog progressDialog = ProgressDialog.show(this,"Loading ..", "Please Wait..");

To dismiss:

progressDialog.dismiss(); 
```

取消警报使用下面的代码

```
dialog.setPositiveButton("ok", null);
        dialog.setCancelable(true); 
```

# mongodb - hi,mongodb c# driver Cannot read the slave,so I had a bad day

> ID：10413194
> 
> 赞同：0
> 
> 时间：2012-05-02T11:53:14.830
> 
> 标签：mongodb

this is Log txt

`error:[_47Baby.DBModule.Fun1.FunDB2.InserPlayer]Safemode detected an error 'not master'. (Response was { "err" : "not master", "code" : 10054, "n" : 0, "connectionId" : 7, "ok" : 1.0 }).`

The setup is 1 master, and 2 slaves.

One of the slave read is success,but another slave is error, the message is Safemode detected an error 'not master'.

I have already setting the server string "mongodb://********/databasename?safe=true;slaveok=true"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T15:07:39.120

当您遇到此异常时，您调用了什么驱动程序方法？并非所有操作都能够发送到从站。

您是否在连接字符串（“**”部分）上放置了一个主机名？或者您是否放置了一个包含多个副本集成员的种子列表？

如果您可以提供一个堆栈跟踪，这也会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-08T02:46:25.973

从 MongoDB v2.2 开始，它现在允许使用另一种方法来允许从 slave/secondary 读取，这使您可以更好地控制发生的事情。请参阅[阅读首选项](http://docs.mongodb.org/manual/core/read-preference/#read-preference-modes)。

因此，这可能会引起您的兴趣，并且可能比使用服务器字符串参数效果更好。

（以下是 Java 驱动程序的示例，但对于 C# 应该足够接近）

这种新方法的基础是将一个类型传递给`ReadPreference`您用来查询数据库的 DBCursor。

```
ReadPreference preference = ReadPreference.secondaryPreferred();
DBCursor cursor = new DBCursor(collection, query, null, preference); 
```

来源：[阅读偏好模式¶](http://docs.mongodb.org/manual/core/read-preference/#read-preference-modes)

# javascriptmvc - 如何在JavascriptMVC中窃取具有共享依赖项的两个html文件的应用程序

> ID：10413200
> 
> 赞同：2
> 
> 时间：2012-05-02T11:53:55.047
> 
> 标签：javascriptmvc

我有一个包含两个 html 文件的应用程序：

*   应用程序/page1.html
*   应用程序/page2.html

这些页面共享依赖项，即-jquery / plugins，我想使用“steal build”脚本来有效地构建它们。

我找到了一些描述这个问题的[例子](http://javascriptmvc.com/docs.html#!steal.build)和[问题](https://forum.javascriptmvc.com/topic/multi-build-and-shared-packages)，并给出了多个应用程序的例子，但没有给出这个问题的解决方案。

但是，例如，当我尝试使用此行进行构建时，我遇到了错误：

```
js steal/buildjs app/page1.html app/page2.html -to app 
```

有人有过这种情况的经验吗？

谢谢， 夏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T12:07:38.120

一个好灵魂（asavoy）创建了一个处理这个问题的拉取请求，显然这是新版本中的一个错误：

[https://github.com/jupiterjs/steal/pull/83](https://github.com/jupiterjs/steal/pull/83)

一旦我自己测试它，我会发布更新。

# java - java - 如何在java中的空格后从字符串中删除任何内容

> ID：10413203
> 
> 赞同：1
> 
> 时间：2012-05-02T11:54:04.943
> 
> 标签：java, android

我有一个这样的字符串：`12/16/2011 12:00:00 AM`
现在我只想显示日期部分，即`12/16/2011`在 Textview 上
并删除另一部分。我需要为此做些什么？？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T11:58:04.567

使用 java.text.DateFormat 将 String 解析为 Date，然后重新格式化以使用另一个 DateFormat 显示它：

```
DateFormat inputFormat = new SimpleDateFormat("MM/dd/yyyy hh:mm:ss a");
inputFormat.setLenient(false);
DateFormat outputFormat = new SimpleDateFormat("MM/dd/yyyy");
outputFormat.setLenient(false);
Date d = inputFormat.parse("12/16/2011 12:00:00 AM");
String s = outputFormat.format(d); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-02T11:57:53.030

```
String str = "11/12/2011 12:20:10 AM";

    int i = str.indexOf(" ");
    str = str.substring(0,i);
    Log.i("TAG", str); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-02T11:59:06.813

只有两个简单的可能性：

```
String str = "12/16/2011 12:00:00 AM";

// method 1: String.substring with String.indexOf
str.substring(0, str.indexOf(' '));

// method 2: String.split, with limit 1 to ignore everything else
str.split(" ", 1)[0]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-05-31T11:03:30.250

您可以使用下面的代码来获取子字符串

```
String thisString="Hello world";

String[] parts = theString.split(" ");
String first = parts[0];//"hello"
String second = parts[1];//"World" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-02T11:59:33.983

使用正则表达式（比其他表达式更健壮 - 即使没有找到空格也能工作）

```
str.replaceAll(" .*", ""); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-02T12:14:46.047

```
myString = myString.substring(0, str.indexOf(" ")); 
```

或者

```
myString = myString.split(" ", 1)[0]; 
```

# .net - Enterprise Library 5.0 日志记录 - rollInterval

> ID：10413207
> 
> 赞同：3
> 
> 时间：2012-05-02T11:54:22.427
> 
> 标签：.net, logging, enterprise-library, enterprise-library-5, logging-application-block

[Enterprise Library 5.0 日志记录应用程序块](http://msdn.microsoft.com/en-us/library/ff664569.aspx)是否可以配置为每天在指定时间（例如下午 3:00）滚动日志文件？

的相关选项[`rollInterval`](http://msdn.microsoft.com/en-us/library/microsoft.practices.enterpriselibrary.logging.tracelisteners.rollinterval.aspx)是`day`和`midnight`。我不确定有什么区别，但`midnight`肯定不是正确的选择，而且我看不到如何配置在使用时执行滚动的时间`day`（它实际上与`midnight`？）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T16:32:37.367

如果 RollInterval 设置为 Midnight，则日志文件将在午夜后（即第二天）滚动。如果 RollInterval 设置为 Day，则日志文件将在日志文件创建后一整天后滚动（即从开始算起 24 小时）。

我不相信 LoggingApplication 块具有在特定时间滚动日志文件的设置。如果您想要该功能，则必须创建一个自定义跟踪侦听器（可以基于现有的滚动平面文件跟踪侦听器）。

缓存应用程序块[`ExtendedFormat`](http://msdn.microsoft.com/en-us/library/microsoft.practices.enterpriselibrary.caching.expirations.extendedformat%28v=pandp.50%29.aspx)为缓存项过期提供了一个可用作更灵活的滚动文件“过期”方案的基础。

# javascript - 动画网站缩放/缩放

> ID：10413208
> 
> 赞同：0
> 
> 时间：2012-05-02T11:54:29.523
> 
> 标签：javascript, css, html, animation, zooming

请使用 Chrome 查看[www.mediawiki.org](http://www.mediawiki.org)并尝试增加/减少页面缩放 ( `Ctrl`+ `+`/ `-`)。

任何人都可以就如何实现这种动画缩放处理给出任何指示吗？我注意到它不适用于所有浏览器。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T12:20:37.610

检查 CSS`transition`属性

这是 MediaWIKI 网站上的一些代码，它使之成为可能：

```
div#mw-panel div.portal div.body,div#mw-panel div.portal h5 {
    transition:padding-left 250ms;
    -moz-transition:padding-left 250ms;
    -webkit-transition:padding-left 250ms;
    -o-transition:padding-left 250ms;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-02T12:31:48.397

我不确定，但我认为您可以通过以 em 或 % 格式创建网站并为父容器宽度和字体属性设置动画...所有子元素都会自动设置动画...

例如...您body 元素上的字体大小为 1em 所有子元素还具有与 em 格式的 body 容器字体大小相关的字体大小。当您增加或减少 body 元素的字体大小时，子元素也会增加和减少其字体大小，当您为 body 字体大小设置动画时，子元素也会为其字体大小设置动画......

（这是我的想法可能会有所帮助）...

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-02T12:13:05.903

正如 anu 所说，它是由浏览器处理的，但是您可以通过使用百分比和/或 em 来在网站上使用诸如字体宽度和边距之类的东西。

***编辑*** 我没有在 Chrome 中查看它（即使你说我们应该），因此错过了动画（doh！）。道歉。

# c++ - C++程序读取txt文件并对数据进行排序

> ID：10413217
> 
> 赞同：1
> 
> 时间：2012-05-02T11:54:51.357
> 
> 标签：c++

我是一名物理博士生，有一些 Java 编码经验，但我正在尝试学习 C++。

我要解决的问题是从 .txt 文件中读取数据，然后在一个文件中输出所有大于 1000 的数字，在另一个文件中输出所有小于 1000 的数字。

我需要帮助的是编写实际读取数据并将其保存到数组的代码部分。数据本身仅由空格分隔，而不是全部在新行上，这让我有点困惑，因为我不知道如何让 c++ 将每个新单词识别为 int。我已经从网上各种来源获得了一些代码-

```
 #include <iostream>
 #include <string>
 #include <fstream>
 #include <cstring>
 #include<cmath>

using namespace std;

int hmlines(ifstream &a) {
    int i=0;
    string line;
    while (getline(a,line)) {
        cout << line << endl;
        i++;
    }
    return i;
}

int hmwords(ifstream &a) {
    int i=0;
    char c;
    a >> noskipws >> c;
    while ((c=a.get()) && (c!=EOF)){ 
        if (c==' ') {
            i++;
        }
    }
    return i;
}

int main()
{
    int l=0;
    int w=0;
    string filename;
    ifstream matos;
start:
    cout << "Input filename- ";
    cin >> filename;
    matos.open(filename.c_str());
    if (matos.fail()) {
        goto start;
    }
    matos.seekg(0, ios::beg);
    w = hmwords(matos);
    cout << w;
    /*c = hmchars(matos);*/

    int RawData[w];
    int n;

    // Loop through the input file
    while ( !matos.eof() )
    {
        matos>> n;
        for(int i = 0; i <= w; i++)
        {
            RawData[n];
            cout<< RawData[n];
        }
    }

    //2nd Copied code ends here
    int On = 0;

    for(int j =0; j< w; j++) {
        if(RawData[j] > 1000) {
            On = On +1;
        }
    }

    int OnArray [On];
    int OffArray [w-On];

    for(int j =0; j< w; j++) {
        if(RawData[j]> 1000) {
            OnArray[j] = RawData[j];
        }
       else {
            OffArray[j] = RawData[j];
        }
    }

    cout << "The # of lines are :" << l
         << ". The # of words are : " << w 
         << "Number of T on elements is" << On;

    matos.close();
} 
```

但如果它更容易，我愿意重新开始整个事情，因为我不明白所有复制的代码在做什么。总而言之，我需要的是——

在控制台中询问文件路径 打开文件，并将每个数字（用空格分隔）存储为一维数组中的一个元素

我想我可以自己管理实际操作，如果我能让它以我需要的方式读取文件。

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T13:12:30.043

使用 C++11 和标准库使您的任务相当简单。这使用标准库容器、算法和一个简单的 lambda 函数。

```
#include <algorithm>
#include <iostream>
#include <iterator>
#include <fstream>
#include <string>
#include <vector>

int main()
{
    std::string filename;
    std::cout << "Input filename- ";
    std::cin >> filename;

    std::ifstream infile(filename);
    if (!infile)
    {
        std::cerr << "can't open " << filename << '\n';
        return 1;
    }
    std::istream_iterator<int> input(infile), eof; // stream iterators

    std::vector<int> onvec, offvec; // standard containers

    std::partition_copy(
        input, eof, // source (begin, end]
        back_inserter(onvec), // first destination
        back_inserter(offvec), // second destination
        [](int n){ return n > 1000; } // true == dest1, false == dest2
    );

    // the data is now in the two containers

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T11:59:14.263

只需将提供给您的 fistream 的变量类型切换为从`new std:ifstream("path to file")`int 创建的变量，c++ 将为您完成工作

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T12:14:02.807

```
#include <fstream> //input/output filestream
#include <iostream>//input/output (for console)

void LoadFile(const char* file)
{
    int less[100]; //stores integers less than 1000(max 100)
    int more[100]; //stores integers more than 1000(max 100)
    int numless = 0;//initialization not automatic in c++
    int nummore = 0; //these store number of more/less numbers
    std::ifstream File(file); //loads file
    while(!file.eof()) //while not reached end of file
    {
        int number;      //first we load the number
        File >> number;  //load the number
        if( number > 1000 )
        {
             more[nummore] = number;
             nummore++;//increase counter
        }
        else
        {
            less[numless] = number;
            numless++;//increase counter
        }
    }
    std::cout << "number of numbers less:" << numless << std::endl; //inform user about
    std::cout << "number of numbers more:" << nummore << std::endl; //how much found...
} 
```

这应该让你知道它应该是什么样子（你不应该使用静态大小的数组）如果你有任何问题，请回复

另外，请尝试编写可读性好的代码，并使用制表符/ 4 个空格。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T13:26:59.203

即使它是纯 C，这也可能会给您一些提示。

```
#include <stdio.h>
#include <stdlib.h>
#include "string.h"

#define MAX_LINE_CHARS 1024

void read_numbers_from_file(const char* file_path)
{
    //holder for the characters in the line
    char contents[MAX_LINE_CHARS];
    int size_contents = 0;

    FILE *fp = fopen(file_path, "r");
    char c;
    //reads the file
    while(!feof(fp))
    {
        c = fgetc(fp);
        contents[size_contents] = c;
        size_contents++;
    }

    char *token;
    token = strtok(contents, " ");
    //cycles through every number
    while(token != NULL)
    {
        int number_to_add = atoi(token);
        //handle your number!
        printf("%d \n", number_to_add);
        token = strtok(NULL, " ");
    }

    fclose(fp);
}

int main()
{

    read_numbers_from_file("path_to_file");

    return 0;
} 
```

读取由空格分隔的数字文件并打印它们。

希望能帮助到你。

干杯

# php - php/mysql 数据库重新设计和迁移：将数据库更改为表

> ID：10413220
> 
> 赞同：4
> 
> 时间：2012-05-02T11:55:02.537
> 
> 标签：php, mysql

我错误地将我的应用程序设计为每个用户都有一个数据库。每个用户有 3 个类似的表。我现在只想拥有一个数据库和 3 个表；我将使用旧数据库中的数据库名称作为新系统中的参考。在存储数据库名称的旧数据库中还有另一个名为“用户”的数据库。我完成了新数据库的架构设计，现在进行迁移。

![在此处输入图像描述](../Images/51be005bd5d6ad3a4a37cc5e8b91e291.png)

这里的诀窍是我有 3 个数据库连接。我首先连接到 users 数据库和 userinfo 表，在循环中获取 database_name，用它来连接每个旧数据库，并进一步连接到个人、帐户和游戏表。

**拿起表格后，我想用新的数据库（DATA_ONE）和表格填充/加入它，同时我将旧的 database_name 附加到新的表格中。对此有任何帮助或有更好的方法吗？非常感谢**

```
<?php

$dbhost = "localhost";  
$dbname = "users"; 
$dbuser = "root"; 
$dbpass = "*****"; 

    $conn1 = mysql_connect($dbhost, $dbuser, $dbpass, TRUE) or die("MySQL Error: " .  mysql_error()); 
    $conn2 = mysql_connect($dbhost, $dbuser, $dbpass, TRUE) or die("MySQL Error: " . mysql_error()); 
    $conn3 = mysql_connect($dbhost, $dbuser, $dbpass, TRUE) or die("MySQL Error: " . mysql_error());

    mysql_select_db($dbname,$conn1) or die("MySQL Error: " . mysql_error()); 

$query  = "SELECT database_name FROM userinfo";
$result1 = mysql_query($query,$conn1);
 while($row = mysql_fetch_array($result1, MYSQL_ASSOC))
    {
 $database_name =$row['database_name'];
 $conn2 = mysql_connect($dbhost, $dbuser, $dbpass) or die("MySQL Error: " . mysql_error());
 $db = mysql_select_db($database_name ,$conn2) ;
 // now, pick personal, accounts, games tables of user and populate new database and  tables.
// this is where i need help.   
  }

 ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T12:19:28.593

为什么您认为需要 3 个具有相同凭据的单独数据库连接？在任何 mysql 查询中，您可以通过在表名前加上数据库名（以及中间的 . ）来引用同一实例上的任何数据库中的表。我建议不要使用 'database_name' 作为属性名称：

```
$databases=get_mysql('SELECT DISTINCT database FROM users.userinfo ORDER BY database');
$count_of_users=count($databases);
foreach ($databases as $user_offset=>$user) {
   $uqry="INSERT INTO data_one.personal
     (user, id, address, password)
     SELECT '$user'
     , (id*$count_of_users*$user_offset)
     , address
     , password
     FROM ${user}.personal"; 
    ... 
```

（假设 'id' 是一个自动增量值，可以在别处引用）。

# android - 安卓导出错误

> ID：10413224
> 
> 赞同：1
> 
> 时间：2012-05-02T11:55:12.110
> 
> 标签：android, dalvik

当我尝试导出我的 android 应用程序时，我收到此错误消息..

```
 [2012-05-02 14:34:07 - MyApplication] Dx 
    trouble processing "java/nio/CharBuffer.class": 
```

不构建核心库时对核心类（java.* 或 javax.*）的不明智或错误使用。

这通常是由于在使用 IDE（例如 Eclipse）时无意中在应用程序的项目中包含了核心库文件。如果您确定您不是故意定义核心类，那么这是对正在发生的事情的最可能的解释。

但是，您实际上可能正在尝试在核心命名空间中定义一个类，例如，您可能从非 Android 虚拟机项目中获取了该类的源代码。这肯定是行不通的。至少，它会危及您的应用程序与平台未来版本的兼容性。它的合法性也经常受到质疑。

如果你真的打算构建一个核心库——它只适合作为创建完整虚拟机分发的一部分，而不是编译应用程序——然后使用“--core-library”选项来抑制这个错误消息。

如果您继续使用“--core-library”，但实际上正在构建应用程序，那么请预先警告您的应用程序在某些时候仍将无法构建或运行。请为愤怒的客户做好准备，他们会发现，例如，一旦他们升级操作系统，您的应用程序就会停止运行。你会为这个问题负责。

如果您合法地使用了一些恰好位于核心包中的代码，那么您拥有的最简单安全的替代方法是重新打包该代码。也就是说，将有问题的类移动到您自己的包命名空间中。这意味着它们永远不会与核心系统类发生冲突。JarJar 是一个可以帮助您完成这项工作的工具。如果你发现你做不到这一点，那么这表明你所走的道路最终会导致痛苦、痛苦、悲伤和悲叹。

```
[2012-05-02 14:34:07 - MyApplication] Dx 1 error; aborting
[2012-05-02 14:34:07 - MyApplication] Conversion to Dalvik format failed with error 1
[2012-05-02 14:42:22 - MyApplication] Dx 
trouble processing "java/nio/CharBuffer.class":

Ill-advised or mistaken usage of a core class (java.* or javax.*)
when not building a core library. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T12:16:30.797

是否正确包含外部参考。当您使用外部 api 时，经常会出现导出问题，尽管显然没有错误。检查参考。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T12:19:54.520

我找到了解决方案..

[Android SDK 工具修订版 12 Proguard 有问题 => 错误转换为 Dalvik 格式失败，错误 1](https://stackoverflow.com/questions/6605971/android-sdk-tools-revision-12-has-problem-with-proguard-error-conversion-to)

我下载了 proguard 的最新版本，它已修复。

# git - 推送后远程分支上不可见的更改

> ID：10413235
> 
> 赞同：1
> 
> 时间：2012-05-02T11:55:48.640
> 
> 标签：git, git-branch

我在服务器上有一个裸机和一个测试存储库，以及从裸机克隆的本地存储库。我还有一个由我的本地修复分支跟踪的**远程/原始/修复**分支。我在本地进行了一些更改，提交并推送。当我第一次使用**git push -u origin fix**时它起作用了，它用我的更改创建了分支。

现在我做了另一个提交并推送它，**git push origin fix**。如果我在本地运行**git branch -av**，我会看到具有正确最后一次提交的 origin/remote/fix 分支，但在服务器上，由于某种原因，最后一次提交是前一次。

我是 RTFM，但我不知道为什么会这样。非常感谢任何帮助。

**编辑**：在服务器上，当尝试签出**源/修复**分支时，我收到以下警告

```
warning: refname 'origin/fix' is ambiguous. 
```

我认为这可能是问题所在？在服务器上的测试存储库中运行**git branch -av**会产生：

```
* fix                  a5ed3f6 test1 
origin/fix             a5ed3f6 test1
remotes/origin/fix     df46078 test2 
```

我该如何解决这个问题，以更新测试回购？我需要将更改从 remotes/origin/fix 传播到 fix 分支？

另外，在这种情况下， origin/fix 是裸机中的修复分支，而 remotes/origin/fix 是我的本地分支？还是我在这里完全偏离轨道？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T05:07:00.813

我之前遇到过这种情况，我没有使用正确的界面命令，而是在服务器上编辑了引用以删除不需要的引用（在这种情况下，有人创建了一个名为 HEAD（！），所以我这样做了`cd /some/path/to/repo.git; rm refs/branchname/HEAD`）。粗鲁，但它奏效了。:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T12:45:41.167

测试仓库中的“修复”分支也必须设置为跟踪裸仓库中的分支。

# javascript - SenchaTouch2：存储“同步”请求数据格式（Content-Type）

> ID：10413237
> 
> 赞同：0
> 
> 时间：2012-05-02T11:55:51.143
> 
> 标签：javascript, sencha-touch-2

我正在使用 ST2 创建一个简单的应用程序，并在我的商店中定义了一个像这样的代理：

```
 proxy: {
    type: 'rest',
    url : '/api/v1/posts',
    reader: {
        type: 'json'
    }
    }, 
```

一切都按预期工作。如果我调用同步方法，商店会向我的 api 发送一个请求，其中包含 json 编码的新数据。

我现在的问题是，是否有办法发送我的 url 编码数据。我必须覆盖同步方法吗？

# jquery - jQuery slideToggle 命令导致文本链接移动

> ID：10413238
> 
> 赞同：1
> 
> 时间：2012-05-02T11:55:55.267
> 
> 标签：jquery, slidetoggle

我有一个简单的 jQuery 脚本，它使用 slideToggle 和负边距从页脚向上滑动联系表单。

功能上一切正常，但有一些视觉故障，当面板滑动时，文本链接会稍微跳动。在动画过程中，我在面板下拉菜单上设置的边框也是如此。

我在[http://jsfiddle.net/YdT9v/](http://jsfiddle.net/YdT9v/)创建了一个 jsFiddle 演示我的问题- 任何人都可以看到有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T12:42:37.040

看看[这个](http://jsfiddle.net/Bongs/YdT9v/6/)小提琴。我确实对 CSS 进行了一些更改，如下所示：

1.  添加`position:absolute;`到`.contactformcontainer`
2.  添加`bottom:40px; position:absolute;`到`#contactform`

（您可能需要更改`bottom`属性中的数字）

[http://jsfiddle.net/Bongs/YdT9v/6/](http://jsfiddle.net/Bongs/YdT9v/6/)

# django - 如何在 Django 中进行 WHERE something OR something_else 查询？

> ID：10413241
> 
> 赞同：0
> 
> 时间：2012-05-02T11:56:10.767
> 
> 标签：django, django-models, django-queryset

我快速浏览了以下[文档](https://docs.djangoproject.com/en/dev/topics/db/queries/)，了解如何`WHERE ... OR`在 Django 中进行查询。但我找不到它，也许我太累了。所以我在这里问它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T11:59:26.137

使用[Q 对象](https://docs.djangoproject.com/en/dev/topics/db/queries/#complex-lookups-with-q-objects)，例如来自文档

```
Q(question__startswith='Who') | Q(question__startswith='What') 
```

是相同的

```
WHERE question LIKE 'Who%' OR question LIKE 'What%' 
```

# c# - Redis 使用 ServiceStack.Redis 通过外键检索

> ID：10413243
> 
> 赞同：2
> 
> 时间：2012-05-02T11:56:25.083
> 
> 标签：c#, database-design, nosql, redis

我正在尝试了解 Redis/NoSQL 方式或设计数据库，但我需要一些建议。我有以下模型：

```
User {
    long UserId
    string Username 
    string Password
    List<long> ActivityIds 
}

Activity {
    long ActivityId
    long UserId
    long CourseId
    string Name
    string Description
} 
```

我知道存储与用户关联的活动列表的最佳方法是存储 ID 列表。一个用户可能有 500 多个关联的活动，所以我真的不想在每次加载用户时都加载每个活动以显示它们的列表。

在 Redis 中，更具体地说是 ServiceStack.Redis 是否可以通过外键进行选择？例如，同时按 UserId 和 CourseId 选择所有活动？还是我想念使用 Redis 的最佳方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T14:48:23.077

您应该使用**Id**属性作为模型上的主键。

另请阅读[此答案，了解在 Redis 中与](https://stackoverflow.com/a/8919931/85785)[ServiceStack C# 客户端](https://github.com/ServiceStack/ServiceStack.Redis)保持关系的不同方式。

# iphone - 如何在 iphone 中创建联系人二维码

> ID：10413244
> 
> 赞同：1
> 
> 时间：2012-05-02T11:56:25.527
> 
> 标签：iphone, contacts, qr-code

我正在为 Qr 生成器应用程序工作，为此我有很好的 kyupay 库。

在那个库中，我需要传递字符串值并返回 QR 图像。

它适用于文本、电子邮件等...

但现在我想为联系人和事件创建 QR 图像而且我不知道该怎么做。

所以我的问题是应该是什么逻辑？？？？

请建议我，或者如果您有代码，请分享。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-18T11:52:21.437

Thanks for respond me on my question.

I finally creates a function that returns contact Qr code string.

It's easy but too long.

we have to check for data inputs from user and append sting as per data and create string.

I am Posting my code so it may help others and save theirs time.

```
-(NSString *)GenerateStringForContact{

    NSString *str = @"";
    NSMutableArray *arr1 =[[NSMutableArray alloc] init];

    for (int i=0 ; i<[arrayAttributeName count]; i++) {

        if ([[arrayAttributeName objectAtIndex:i] isEqualToString:@"First Name"]) {
            if ([strContactType isEqualToString:@"ContactMecard"]) {
             [arr1 addObject:@"N:"];
            }else{
             [arr1 addObject:@"FN:"];   
            }
        }else if ([[arrayAttributeName objectAtIndex:i] isEqualToString:@"Last Name"]) {
//            [arr1 addObject:@"N:"];
        }else if ([[arrayAttributeName objectAtIndex:i] isEqualToString:@"Phone"]) {
            [arr1 addObject:@"TEL:"];
        }else if ([[arrayAttributeName objectAtIndex:i] isEqualToString:@"Email"]) {
            [arr1 addObject:@"EMAIL:"];
        }else if ([[arrayAttributeName objectAtIndex:i] isEqualToString:@"URL"]) {
            [arr1 addObject:@"URL:"];
        }else if ([[arrayAttributeName objectAtIndex:i] isEqualToString:@"Nickname"]) {
            [arr1 addObject:@"NICKNAME:"];
        }else if ([[arrayAttributeName objectAtIndex:i] isEqualToString:@"Title"]) {
            [arr1 addObject:@"TITLE:"];
        }else if ([[arrayAttributeName objectAtIndex:i] isEqualToString:@"Organization"]) {
            [arr1 addObject:@"ORG:"];
        }else if ([[arrayAttributeName objectAtIndex:i] isEqualToString:@"Birthday"]) {
            [arr1 addObject:@"BDAY:"];
        }else if ([[arrayAttributeName objectAtIndex:i] isEqualToString:@"Note"]) {
            [arr1 addObject:@"NOTE:"];
        }

    }

    NSMutableArray *contDetail = arrayAttributeValue;

    if ([strContactType isEqualToString:@"ContactMecard"]) {
        str = @"MECARD:";
//         arr1 = [[NSArray alloc] initWithObjects:@"N:",@"TEL:",@"EMAIL:",@"URL:",@"NOTE:",@"NICKNAME:",@"BDAY:",@"ADR:",nil];

    }else{

       str = @"BEGIN:VCARD";
//       arr1 = [[NSArray alloc] initWithObjects:@"N:",@"TEL:",@"EMAIL:",@"URL:",@"NOTE:",@"NICKNAME:",@"BDAY:",@"ADR:",@"TITLE:",@"ORG:",nil];
    }

    BOOL count = TRUE;
    for (int i =0; i <[contDetail count]; i++) {

        if (![[contDetail objectAtIndex:i] isEqualToString:@""]) {

            NSString *tmp2 =@"";

            if (i == 0 || i == 1) {
                if (count) {

                    if ([strContactType isEqualToString:@"ContactMecard"]) {

                        tmp2 = [NSString stringWithFormat:@"%@,%@",[contDetail objectAtIndex:0],[contDetail objectAtIndex:1]];

                        NSString *tmp = [NSString stringWithFormat:@"%@%@",[arr1 objectAtIndex:i],tmp2];

                    str = [NSString stringWithFormat:@"%@;%@",str,tmp];

                    }else{
                        tmp2 = [NSString stringWithFormat:@"%@ %@",[contDetail objectAtIndex:0],[contDetail objectAtIndex:1]];

                        NSString *tmp = [NSString stringWithFormat:@"%@%@",[arr1 objectAtIndex:i],tmp2];

                        str = [NSString stringWithFormat:@"%@\n%@",str,tmp];
                    }

                    count = FALSE;
                }

            }else{

                tmp2 = [contDetail objectAtIndex:i];
                NSString *tmp = [NSString stringWithFormat:@"%@%@",[arr1 objectAtIndex:i-1],tmp2];

                if ([strContactType isEqualToString:@"ContactMecard"]) {

                    str = [NSString stringWithFormat:@"%@;%@",str,tmp];

                }else{
                    str = [NSString stringWithFormat:@"%@\n%@",str,tmp];
                }

            }

        }
    }

    if (![strContactType isEqualToString:@"ContactMecard"]) {
        str = [NSString stringWithFormat:@"%@\nEND:VCARD",str];

    }
    NSLog(@"here string for generate code %@",str);    

    return str;
} 
```

Thanks....

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T13:28:19.577

如果您在此站点创建联系人二维码：http: [//zxing.appspot.com/generator/](http://zxing.appspot.com/generator/)它会为您提供用于创建二维码的字符串。也许你可以以此为灵感？

# cakephp - cakePHP分页器没有传递passargs

> ID：10413248
> 
> 赞同：2
> 
> 时间：2012-05-02T11:56:39.460
> 
> 标签：cakephp, components, paginator

我正在使用 cakePHP，当您单击不同的页面时，我正在尝试让分页器组件传递获取变量或传递的参数。我有各种不同的搜索输入选择器，它们“过滤”返回的结果。这适用于第一个视图，但是当我单击不同的页面时，它会显示所有结果。

我的分页器有以下设置：

```
// In my controller class:
public $paginate = array('maxLimit' => 10, 'paramType' => 'querystring');

// Within my action method:
$this->paginate = array('conditions' => array(...),
                        order => array('Model.field ASC'),
                        'limit' => 20 
 );

 // Calling the paginator:
 $results = $this->paginate('Model');
 $this->set(compact('results')); 
```

在我的视图文件中：

```
 <div class="paging">
<?php
    echo $this->Paginator->prev('< ' . __('previous'), array(), null, array('class' => 'prev disabled'));
    echo $this->Paginator->numbers(array('separator' => ''));
    echo $this->Paginator->next(__('next') . ' >', array(), null, array('class' => 'next disabled'));
?>
</div> 
```

**编辑：** 据我了解，最好使用passedArgs，但我有点不确定如何做到这一点。我的 $this->passedArgs 没有返回任何结果，所以我在我的控制器示例中创建了传递的参数。我还将表单从 Get 更改为 Post：

```
 $this->passedArgs["searchfield"] = $_POST["value"]; 
```

它现在在分页条中正确传递了passedArgs，但我不确定现在如何构建分页条件数组。在大多数情况下，用户不会选择默认值示例，其中一个过滤器是 date from 和 date to，然后是一个搜索输入框，如果我留下日期，它仍然会创建参数并且不返回任何结果，所以本质上是我的 url会是这样的：

```
 http://localhost/site/controller/action/page:3/datefrom:0/dateto:0/searchFor:survey 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T12:13:08.013

您可以通过视图中的所有参数传递：

```
$this->Paginator->options(array('url' => $this->passedArgs)); 
```

或手动分配参数：

```
$this->Paginator->options(array('url' => array("0", "1"))); 
```

在呼应分页器之前

有关更多示例，请参见[CakePHP Cookbook](http://book.cakephp.org/1.3/en/The-Manual/Common-Tasks-With-CakePHP/Pagination.html#pagination-in-views)

# windows-phone-7 - 在 Windows Phone 7 应用程序中实现错误记录？

> ID：10413250
> 
> 赞同：0
> 
> 时间：2012-05-02T11:56:45.970
> 
> 标签：windows-phone-7

> **可能重复：**
> [Windows Phone 7 设备上的崩溃日志](https://stackoverflow.com/questions/4312479/crash-log-on-windows-phone-7-device)

我们应该以哪种方式在 windows phone 7 中实现错误日志记录

我已经指定了 try catch 块，但是如果我在 catch 块中遇到错误，我应该怎么做

1）我们应该如何处理

2）我们怎么知道细节（开发者怎么知道这些）。

请让我知道我们如何在 windows phone 7 应用程序中实现错误日志记录。

提前致谢。

# json - http响应返回类型反序列化为特定类型

> ID：10413256
> 
> 赞同：0
> 
> 时间：2012-05-02T11:57:05.937
> 
> 标签：json, wcf, rest

我想反序列化从 HTTP Web 请求接收到的流体作为响应。但问题是当反序列化必须作为特定类型完成时。我有多个 Get，它们有不同的响应（一个返回类型 p，其他返回类型 q）。我想要一个通用方法，它可以反序列化任何类型并返回一些通用的东西，当类型种姓将返回我所需的值时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T21:06:39.110

神奇的酱汁知道要填充哪种类型。一旦你有了它，创建一个通用的反序列化器就很容易了：

```
public object Deserialize( string serialized, Type T ) {
    if ( string.IsNullOrEmpty( serialized ) ) {
        return null;
    }
    XmlSerializer xs = new XmlSerializer( T );
    MemoryStream ms = new MemoryStream( StringToBytes( s ) ?? new byte[0] );
    XmlTextWriter tw = new XmlTextWriter( ms, Encoding.UTF8 );
    return xs.Deserialize( ms );
} 
```

将其转换为通用方法也很容易。

# c# - PDF文档中JBIG2过滤流的结构是什么

> ID：10413259
> 
> 赞同：3
> 
> 时间：2012-05-02T11:57:14.997
> 
> 标签：c#, image, pdf, image-processing

我在哪里可以找到 JBIG2 流的结构，例如段标头的字节长度、段标头中单个属性的字节长度等等。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T12:17:41.180

您需要 JBIG 规范。这应该在 JPEG 网站上。您可能需要浏览才能找到 JBIG 第 2 部分文档。

[http://www.jpeg.org](http://www.jpeg.org)

在最后一次编辑中，JBIG 第 2 部分文档在这里：

[http://www.jpeg.org/jbig/documentation.html](http://www.jpeg.org/jbig/documentation.html)

您可以从国际电联网站下载一份副本。从第 7 节开始。

# java - 如何获取给定节点的所有叶子？（树只有 id_parent）

> ID：10413261
> 
> 赞同：1
> 
> 时间：2012-05-02T11:57:29.507
> 
> 标签：java, algorithm, tree, hierarchical-data, nodes

我有一个带有标准树状字段的`ArrayList<Foo>`结构： , ,`Java``id``id_parent``value`

我想获取`id_element`给定节点的所有叶子（'s）的列表。

我的示例数据是：

```
Foo ArrayList<E>
    elementData Object[10]
        [0] Foo
            id          1333393146
            id_element  1333398441937
            id_parent   1333393120
            value       "1.1."
        [1] Foo
            id          1333393120
            id_element  0
            id_parent   0
            value       "1."
        [2] Foo
            id          1333400050
            id_element  0
            id_parent   0
            value       "2."
        [3] Foo
            id          1333400480
            id_element  0
            id_parent   1333400050
            value       "2.1."
        [4] Foo
            id          1333400596
            id_element  1335957085269
            id_parent   1333400480
            value       "2.1.1."
        [5] Foo
            id          1333401059
            id_element  1335957088564
            id_parent   1333400480
            value       "2.1.2."
        [6] Foo
            id          1333401973
            id_element  1335957090492
            id_parent   1333400480
            value       "2.1.3."
        [7] Foo
            id          1333401974
            id_element  1335957093220
            id_parent   1333400050
            value       "2.2."
        [8] Foo
            id          1333392031
            id_element  0
            id_parent   0
            value       "3."
        [9] Foo
            id          1333394672
            id_element  1335957098326
            id_parent   1333392031
            value       "3.1." 
```

我需要做一个函数`public ArrayList<Long> GetIds(ArrayList<Foo> tree, Long id_node) { }`，`tree`我的结构在哪里，并且`id_node`是节点的 id。

我只需要父节点叶子而不是子节点。

## 例如：

* * *

输入：[以上结构]，id = 1333400050

输出：1335957085269、1335957088564、1335957090492、1335957093220

* * *

我不知道为什么我对此感到停电..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T12:25:11.347

```
public static ArrayList<Long> getIds(ArrayList<Foo> tree, Long id_node) {
    ArrayList<Long> leaves = new ArrayList<Long>();
    for (Foo foo : tree) {
        if (foo.id_parent == id_node) {
            ArrayList<Long> ids = getIds(tree, foo.id);
            if (ids == null) {
                leaves.add(foo.id);
            } else {
                leaves.addAll(ids);
            }
        }
    }
    if (leaves.isEmpty()) {
        return null;
    }
    return leaves;
} 
```

# ruby-on-rails - 在 ruby on rails 中使用 WIN32OLE 从远程服务器渲染 Word 文档

> ID：10413264
> 
> 赞同：1
> 
> 时间：2012-05-02T11:57:37.127
> 
> 标签：ruby-on-rails, windows-services, mongrel, win32ole, mongrel-cluster

当我当时使用 win32ole 作为独立应用程序时，一切似乎都运行良好，一旦我放入运行在 mongrel 服务器上的 rails 应用程序，它就会进入无限循环。

我正在尝试访问“https://microsoft/sharepoint/document.doc”

```
def generatertm(issue) 
begin 
  word = WIN32OLE.new('word.application') 
  logger.debug("Word Initialized...") 
  word.visible = true 
  myDocLink = "https://microsoft/sharepoint/url.doc" 
  myFile = word.documents.open(myDocLink) 
  logger.debug("File Opened...") 
  puts "Started Reading bookmarks..." 
  myBookMarks = myFile.Bookmarks puts "bookmarks fetched working background task..."

  print ("Bookmakr Count : " + myBookMarks.Count.to_s + "\n")

  myBookMarks.each do |i|
    logger.warn ("Bookmark Name : " + i.Name + "\n")
  end
rescue WIN32OLERuntimeError => e
  puts e.message
  puts e.backtrace.inspect
  else
ensure

word.activedocument.close( true )  # presents save dialog box
#word.activedocument.close(false) # no save dialog, just close it
word.quit
end
end 
```

当我当时单独运行此代码时，会弹出一个弹出窗口以获取 Microsoft 共享点凭据。但是在 mongrel rails 中它会进入无限循环。

我是否需要处理此弹出窗口才能通过 Rails 出现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T12:17:41.310

您是否考虑过修补 win32ole.rb 文件？

基本上，这是补丁的原因：

> 事实证明，win32ole.rb 修补线程以在块的 yield 周围调用 windows OleInitialize() 和 OleUninitialize() 函数。但是，CoInitialize（OleInitialize 内部调用）的 MS 文档指出：“应用程序中调用 CoInitialize 的第一个线程为 0（或 CoInitializeEx 与 COINIT_APARTMENTTHREADED）必须是最后一个调用 CoUninitialize 的线程。否则，对 CoInitialize 的后续调用STA 将失败，应用程序将无法运行。” [http://msdn.microsoft.com/en-us/library/ms678543(v=VS.85).aspx](http://msdn.microsoft.com/en-us/library/ms678543%28v=VS.85%29.aspx)

这是修改后的 win32ole.rb 文件以修复线程问题：

```
require 'win32ole.so'

# Fail if not required by main thread.
# Call OleInitialize and OleUninitialize for main thread to satisfy the following:
#
# The first thread in the application that calls CoInitialize with 0 (or CoInitializeEx with COINIT_APARTMENTTHREADED)
# must be the last thread to call CoUninitialize. Otherwise, subsequent calls to CoInitialize on the STA will fail and the
# application will not work.
#
# See http://msdn.microsoft.com/en-us/library/ms678543(v=VS.85).aspx
if Thread.main != Thread.current
  raise "Require win32ole.rb from the main application thread to satisfy CoInitialize requirements."
else
  WIN32OLE.ole_initialize
  at_exit { WIN32OLE.ole_uninitialize }
end

# re-define Thread#initialize
# bug #2618(ruby-core:27634)

class Thread
  alias :org_initialize :initialize
  def initialize(*arg, &block)
    if block
      org_initialize(*arg) {
        WIN32OLE.ole_initialize
        begin
          block.call(*arg)
        ensure
          WIN32OLE.ole_uninitialize
        end
      }
    else
      org_initialize(*arg)
    end
  end
end 
```

[http://cowlibob.co.uk/ruby-threads-win32ole-coinitialize-and-counin](http://cowlibob.co.uk/ruby-threads-win32ole-coinitialize-and-counin)

# facebook - 如何在时间轴中更改 facebook 应用程序的图标

> ID：10413266
> 
> 赞同：0
> 
> 时间：2012-05-02T11:57:42.813
> 
> 标签：facebook, facebook-like

![在此处输入图像描述](../Images/b5c8dbf57f5ca88d0b424dda0a096666.png)

请参阅上图，因此我使用本[网站](http://www.facebook.com/help?faq=201402119964259)的说明更改了应用程序的标签图像。但我无法更改此图标。怎么可能改变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T12:09:28.557

在开发者设置中的应用程序主页上，有一个应用程序图像和一些较小的文字，上面写着“编辑图标” - 这就是小图标所指的，它是 16x16px。它与旁边的图像无关，我认为它大约为 70x70 像素。接近确实使它有点混乱。但只需点击文本链接

# jquery - impress.js：如何在幻灯片#id 和类 .active（或幻灯片输入）上运行功能？

> ID：10413269
> 
> 赞同：2
> 
> 时间：2012-05-02T11:57:51.317
> 
> 标签：jquery, slide, impress.js

如何在幻灯片输入时播放视频，并使用 impress.js 使其在幻灯片退出时停止？进入幻灯片后，有一个类“.active”。事实上，我可以只使用一个唯一的 ID，我只需要知道如何告诉 impress.js 在幻灯片进入/退出时运行。

我不知道如何编写 jQuery，但这是我的尝试

```
document.getElementById('video-audio').addEventListener( ($.Event("keydown", { keyCode: 38 })), function () {WhenPlay()});

function WhenPlay() { 
 var classList = document.getElementById('video-audio').className.split(/\s+/);
      for (var i = 0; i < classList.length; i++) {
        if (classList[i] === 'active') {
        //console.log(classList[i]);
                        playVideo();
                     }
                  }
              } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T11:00:46.753

我不知道这是否为你解决了，但你有没有尝试过这样的事情？

```
$(function() {

    impress().init();
    $('.hidden').css('opacity',0);
    window.addEventListener('impress:stepenter', function() {
      $('.hidden.active').animate({'opacity': 1});
    });
    window.addEventListener('impress:stepleave', function() {
      $('.hidden.past').animate({'opacity': 0});
    });

}); 
```

这里的 'impress:stepenter' 是 Impress.js 库冒出的事件。

# android - 使用 Android 获取 Gps 位置

> ID：10413274
> 
> 赞同：0
> 
> 时间：2012-05-02T11:58:28.803
> 
> 标签：android

我想从以下 Android 代码中获取纬度和经度。

```
location = locationManager.getLastKnownLocation(provider); 
```

我来了`error location is null`。

这是代码：

```
package com.p;
import android.app.Activity;
import android.os.Bundle;
import android.os.Bundle;

import android.content.Context;
import android.location.Criteria;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.widget.TextView;
 import android.widget.Toast;
 public class GooglemapActivity extends Activity implements LocationListener {
  private TextView latituteField;
        private TextView longitudeField; 
   private LocationManager locationManager;
    private String provider;

 /** Called when the activity is first created. */

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    latituteField = (TextView) findViewById(R.id.TextView02);
    longitudeField = (TextView) findViewById(R.id.TextView04);

    // Get the location manager
    locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    // Define the criteria how to select the locatioin provider -> use
    // default
    Criteria criteria = new Criteria();
    provider = locationManager.getBestProvider(criteria, false);
    Location location = locationManager.getLastKnownLocation(provider);

    // Initialize the location fields
    if (location != null) {
        System.out.println("Provider " + provider + " has been selected.");
        int lat = (int) (location.getLatitude());
        int lng = (int) (location.getLongitude());
        latituteField.setText(String.valueOf(lat));
        longitudeField.setText(String.valueOf(lng));
    } else {
        latituteField.setText("Provider not available");
        longitudeField.setText("Provider not available");
    }
}

/* Request updates at startup */
@Override
protected void onResume() {
    super.onResume();
    locationManager.requestLocationUpdates(provider, 400, 1, this);
}

/* Remove the locationlistener updates when Activity is paused */
@Override
protected void onPause() {
    super.onPause();
    locationManager.removeUpdates(this);
}

public void onLocationChanged(Location location) {
    int lat = (int) (location.getLatitude());
    int lng = (int) (location.getLongitude());
    latituteField.setText(String.valueOf(lat));
    longitudeField.setText(String.valueOf(lng));
}

public void onStatusChanged(String provider, int status, Bundle extras) {
    // TODO Auto-generated method stub

}

public void onProviderEnabled(String provider) {
    Toast.makeText(this, "Enabled new provider " + provider,
            Toast.LENGTH_SHORT).show();

}

public void onProviderDisabled(String provider) {
    Toast.makeText(this, "Disabled provider " + provider,
            Toast.LENGTH_SHORT).show();
}
} 
```

我添加了以下权限：

```
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/> 
```

但我收到以下错误：

> 提供者不可用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T12:20:12.800

您尚未定义有效的标准。定义如下

```
 Criteria criteria = new Criteria();
    criteria.setAccuracy(Criteria.ACCURACY_FINE);
    criteria.setAltitudeRequired(false);//true if required
    criteria.setBearingRequired(false);//true if required
    criteria.setCostAllowed(true);
    criteria.setPowerRequirement(Criteria.POWER_LOW);
    provider = locationManager.getBestProvider(criteria, true);//search for enabled provider 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T12:03:53.237

如果最后一个已知位置为空，那是因为手机没有最后一个已知位置。如果没有缓存位置，您需要通过网络或 GPS 请求更新的位置。请注意，此过程可能需要时间，因此必须异步完成。

你需要阅读这份文件：

[http://developer.android.com/guide/topics/location/obtaining-user-location.html](http://developer.android.com/guide/topics/location/obtaining-user-location.html)

我还建议阅读以下内容：

[http://android-developers.blogspot.co.uk/2011/06/deep-dive-into-location.html](http://android-developers.blogspot.co.uk/2011/06/deep-dive-into-location.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T12:04:32.717

认为您需要指定要从哪个提供商接收更新。

你有两个选择：

*   GPS_PROVIDER
*   NETWORK_PROVIDER

你可能错过了这样的事情：

```
locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, this); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T12:05:09.643

1.  您是否在设置 -> 位置中打开了 GPS？
2.  你为什么使用`(int) (location.getLatitude())`-- 纬度/经度是`float`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-20T13:29:46.853

我认为您可能还想添加以下权限，因为我很确定 FINE 依赖于 COARSE ...

```
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/> 
```

# javascript - 悬停具有活动状态的列表项锚点

> ID：10413282
> 
> 赞同：0
> 
> 时间：2012-05-02T11:58:59.773
> 
> 标签：javascript, jquery, jquery-animate, mouseout, mousehover

我有一个带有活跃课程的菜单。

根据[我的小提琴](http://jsfiddle.net/Autodealers/FPezz/)，我认为有一个基本问题：
在我的 mouseOut 上，我希望活动课程回到我首先放置的位置。但是怎么做？

一个更高级的问题：
在我上面的问题中（在它起作用之后），是否可以在它们之间为边框底部设置动画（看到它垂直移动）？

提前谢谢你！
亲切的问候，
乔纳森

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T12:06:57.943

如果我理解正确，这个[http://jsfiddle.net/FPezz/2/可能会解决您的问题：](http://jsfiddle.net/FPezz/2/)

```
$(document).ready(function() {

    var active = $('ul li a').filter('.active');

    $('ul').hover(function() {
        $(this).find('li a').removeClass('active');

    }, function() {
        active.addClass('active');
    });

});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T12:03:43.627

这是你想要的 ？

[http://jsfiddle.net/sethunath/FPezz/1/](http://jsfiddle.net/sethunath/FPezz/1/)

# jquery - 如何滚动分离的对象？

> ID：10413285
> 
> 赞同：1
> 
> 时间：2012-05-02T11:59:04.653
> 
> 标签：jquery, html

考虑以下 jQuery 行：

```
var $s = $('<span><span class="one"><span class="two"></span></span></span>');

$('.one', $s).css('border', 'solid 1px black').scrollLeft(200);
$('.one', $s).css('border', 'solid 1px blue').scrollTop(200);

$(document.body).append($s); 
```

现在我想在元素附加到 DOM**之前**进行一些滚动（由于视觉要求），但滚动条保持在 0。**如何在元素附加到 DOM 之前滚动元素？**

[JS 小提琴示例：http: [//jsfiddle.net/KeesCBakker/gQbkw/1/](http://jsfiddle.net/KeesCBakker/gQbkw/1/)]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T12:03:08.400

1.  将元素添加到具有绝对位置的主体
2.  将顶部和左侧设置为屏幕外的位置
3.  滚动元素
4.  把它贴到正确的地方，去掉绝对定位

哦，还有一件事，而不是使用 css 设置边框 - 把它放在一个类中

**编辑：**根据您对 IE 的评论，这里是一个解决方案[http://jsfiddle.net/gQbkw/4/](http://jsfiddle.net/gQbkw/4/)
我使用另一个 div 作为容器，这是一个简化的解决方案，在 IE9 和 chrome 中检查过

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T12:34:23.017

该错误是由于在将元素添加到文档之前使用了该元素而导致的。要解决此问题，您需要先将该元素添加到文档中，然后对该元素进行追加操作

```
var $spans = $('<span><span class="one"><span class="two"></span></span></span>');

$(document.body).append($spans);

$('.one', $spans).css('border', 'solid 1px black').scrollLeft(200);
$('.one', $spans).css('border', 'solid 1px blue').scrollTop(200); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T11:08:16.887

您不能滚动元素，除非它附加到 DOM，因为浏览器不知道它的尺寸以及它是否可以滚动或它可以滚动多少。

# android - 如何通过 WiFi 网络从 Android 应用程序调用 WCF 服务？

> ID：10413291
> 
> 赞同：0
> 
> 时间：2012-05-02T11:59:25.593
> 
> 标签：android, wcf, wifi

我有 WCF 服务，我的 Android 应用程序使用它。我正在使用在同一台机器上运行的模拟器和 WCF 服务来执行此操作。现在我在启用 WiFi 的笔记本电脑上运行 WCF 服务，并在启用 WiFi 的移动设备上安装了 Android 应用程序。我想通过 WiFi 网络访问 WCF 服务。
请给我指导线来做到这一点。
我需要有无线路由器吗？
我需要做哪些流程/设置？
谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T12:04:20.800

您需要知道您的 WiFi 网络上的服务器（WCF 服务）的 ip 地址，并将其放在您的 android 应用程序的 url 中。

# java - 如果未找到错误类而存在库，则在 Web 项目中检查什么？

> ID：10413293
> 
> 赞同：0
> 
> 时间：2012-05-02T11:59:26.823
> 
> 标签：java, class, jar, web, dependencies

我有 java web 应用程序，它使用 hibernate core 3.6.7，我检查了 WEB-INF/lib 中是否存在 hibernate-core-3.6.7.Final.jar，

但是当我运行应用程序（嵌入式eclipse）时，我收到错误：

```
Exception in thread "Thread-4" java.lang.NoClassDefFoundError: org/hibernate/hql/ast/tree/LiteralNode
at org.hibernate.hql.ast.SqlASTFactory.getASTNodeType(SqlASTFactory.java:154) 
```

我检查了 hibernate-core-3.6.7.Final.jar 文件内部是否存在类 org.hibernate.hql.ast.tree.LiteralNode。接下来需要检查什么？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T12:39:47.353

检查您是否在 WEB-INF/lib 中也具有 Hibernate 所需的所有依赖项。有关如何了解所需依赖项的信息，请参阅[http://docs.jboss.org/hibernate/core/3.6/quickstart/en-US/html_single/#hibernate-gsg-setup-releaseBundle 。](http://docs.jboss.org/hibernate/core/3.6/quickstart/en-US/html_single/#hibernate-gsg-setup-releaseBundle)

另外，阅读堆栈跟踪的其余部分，这应该表明没有找到 LiteralNode，因为它依赖的类本身没有找到。

# c# - 禁用实体框架 4.3 的数据库初始化

> ID：10413296
> 
> 赞同：3
> 
> 时间：2012-05-02T11:59:38.273
> 
> 标签：c#, entity-framework-4

我正在使用 EF 4.3.1，并且我有 100 多个驱动 1 个基本上下文的上下文。对于所有上下文，我想禁用数据库初始化。

是否可以为实体框架设置默认行为？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T12:02:21.813

`Database.SetInitializer<TContext>`是你所追求的。将 null 传递给此方法也应该禁用初始化。

[http://msdn.microsoft.com/en-us/library/gg679461(v=vs.103).aspx](http://msdn.microsoft.com/en-us/library/gg679461(v=vs.103).aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T19:47:40.360

您可以更改 * *.config*文件以禁用数据库初始化。这是根据上下文完成的，但也许它适用于您的基本上下文。

```
<contexts>
  <context type=" Blogging.BlogContext, MyAssembly" disableDatabaseInitialization="true" />
</contexts> 
```

[EF 4.3 配置文件设置](http://blogs.msdn.com/b/adonet/archive/2012/01/12/ef-4-3-configuration-file-settings.aspx)中给出了更好的解释

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-19T00:32:28.603

```
//Gather all the DbContexts types in the assembly
var allDbContextsTypes = Assembly.GetExecutingAssembly().GetTypes().Where(t => t.BaseType == (typeof(DbContext))).ToList();

foreach (Type dbContextType in allDbContextsTypes)
{
    //Get the SetInitializerMethod
    MethodInfo initializerMethod = typeof(Database).GetMethod("SetInitializer");

    //Make it generic! (Oh yeah)
    MethodInfo dbContextInitializerMethod = initializerMethod.MakeGenericMethod(dbContextType);

    //Invoke the method with null initializer
    dbContextInitializerMethod.Invoke(null, new object[]{null});
} 
```

最后，它给出了类似的内容：`Database.SetInitializer<YourDbContext>(null);` 其中 YourDbContext 是循环中的当前 dbContext 类型

# iphone - 通过蓝牙/蓝牙 LE 在 iPhone 应用程序中配对和连接

> ID：10413302
> 
> 赞同：0
> 
> 时间：2012-05-02T12:00:08.117
> 
> 标签：iphone, objective-c, ipad, bluetooth, core-bluetooth

我开始阅读 iOS5 核心蓝牙框架，并且正在编写一个应用程序，该应用程序从我的 iPhone 或 iPad 3 连接到设备。

我需要在我的应用程序中进行搜索和配对/连接，还是假设 iPhone 将配对/连接到设备，然后我可以使用可用的设备？

为了可能回答我自己的问题，也许我可以做任何一个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T13:00:15.427

我不确定因为我没有尝试，但希望这会有所帮助：[核心蓝牙框架](https://developer.apple.com/library/ios/documentation/CoreBluetooth/Reference/CoreBluetooth_Framework/CoreBluetooth_Framework.pdf)

在本文档中，它只检索外围设备（意味着搜索），这意味着您只需要调用该方法即可获取您周围的可用外围设备。当然，您需要将此外围设备与文档中的另一种方法连接起来。

据我了解，对于以前已知的直接连接外围设备还有另一种方法..

希望这对你有帮助..

# iphone - 自定义 UINavigationBar 的奇怪行为

> ID：10413304
> 
> 赞同：1
> 
> 时间：2012-05-02T12:00:20.870
> 
> 标签：iphone, uinavigationcontroller, uinavigationbar, subclass

我有子类 UINavigationBar 所以我可以创建一个渐变来填充它。我的问题是，当我展示导航控制器时，虽然它从底部到顶部进行动画处理，但导航栏上按钮项的颜色仍然是蓝色（默认颜色），并且它仅在完成动画时才会更改（当导航控制器到达顶部时）。我附上了两张图片，以帮助您了解我的问题。

![在此处输入图像描述](../Images/c912752679df7f1c8b4ed664d0859c62.png)

![在此处输入图像描述](../Images/f51eaee240743c6c6eaa0745322d352c.png)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-02T12:06:15.453

您仅将更改颜色代码放在动画方法中，因此两者都可以很好地尝试此操作。

```
[UIView beginAnimations:nil context:nil];
[self.navigationController.navigationBar.tintcolor:[uicolor red color]];
[self.navigationController.navigationbaritem same code here only
[UIView commitAnimations]; 
```

# c# - 让 TextBox 填充 Grid 中的剩余空间

> ID：10413305
> 
> 赞同：3
> 
> 时间：2012-05-02T12:00:22.287
> 
> 标签：c#, wpf, textbox, grid

我有一个包含网格的列表框。Grid 有一个 Label Column、一个 GridSplitter 和一个 TextBox Column。如何让 Grid 占据 ListBox 的整个 Width 并使 TextBox 使用 Grid Column 的整个空间？

```
<Grid>
    <ListBox x:Name="myList"  Margin="4" ItemsSource="{Binding Path=Parameter}" MinHeight="60" Grid.IsSharedSizeScope="True" HorizontalAlignment="Stretch" >
        <ListBox.ItemTemplate>
            <DataTemplate>
                <Grid x:Name="parameterGrid" HorizontalAlignment="Stretch">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition x:Name="labelColumn" Width="Auto" SharedSizeGroup="LabelColumn"/>
                        <ColumnDefinition x:Name="splitterColumn" Width="5"/>
                        <ColumnDefinition x:Name="textColumn" Width="*"/>
                    </Grid.ColumnDefinitions>
                    <TextBlock Text="{Binding Path=Key}" Grid.Column="0"/>
                    <GridSplitter Grid.Column="1" VerticalAlignment="Stretch" HorizontalAlignment="Stretch"/>
                    <TextBox Grid.Column="2" Text="{Binding Path=Value, UpdateSourceTrigger=LostFocus}"
                                                                 IsEnabled="{Binding ElementName=_view, Path=DataContext.IsEditEnabled}">
                    </TextBox>
                </Grid>
            </DataTemplate>
        </ListBox.ItemTemplate>
    </ListBox>
</Grid> 
```

参数只是为了演示这个想法：

```
public class Parameter
{ 
   public string Key { get; set; }
   public string Value { get; set; }

   public Parameter(string key, string value)
   {
       Key = key;
       Value = value;
   }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-02T12:11:25.233

尝试`HorizontalContentAlignment="Stretch"`在`ListBox`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T12:20:27.827

不要为 TextBox 提供任何宽度和高度。

# ipad - tcpdump 实现/适配

> ID：10413306
> 
> 赞同：0
> 
> 时间：2012-05-02T12:00:30.113
> 
> 标签：ipad, wrapper, packet-capture, tcpdump

我想制作一个 iPad 应用程序，使用以下方法分析数据流量：“tcpdump”该应用程序应该以某种方式实现/适应/包装/用于“tcpdump”命令。

我浏览了[http://www.tcpdump.org/](http://www.tcpdump.org/)，但我想节省时间，所以我想请你提供一些指导来解决这个问题。

1.  是否有任何用于objective-c 的包装“libpcap”库？或在 iOS 中处理“tcpdump”命令的任何其他 API。

2.  如何在 iPhone/iPad 应用程序中使用 C/C++ 库？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T13:17:01.157

1.  我也没有找到 pcap 的 Obj-C 包装器。[考虑到这个答案中](https://stackoverflow.com/a/6825707/143136)提出的一些观点，这并不奇怪。@Guy Harris 特别指出了这个问题：除非您在越狱设备上运行，否则您将缺乏读取数据的权限。

2.  [这个问题](https://stackoverflow.com/q/3779801/143136)（特别是[这个答案](https://stackoverflow.com/a/3779873/143136)）建议您只需正确命名文件，然后编译并链接

祝你好运。

# r - 需要帮助配对数据

> ID：10413307
> 
> 赞同：1
> 
> 时间：2012-05-02T12:00:32.530
> 
> 标签：r

我正在寻找我确定的快速答案。我正在使用如下所示的数据集：

```
 Week      Game.ID           VTm VPts HTm HPts Differential HomeWin 
    1  NFL_20050908_OAK@NE      OAK   20 NE  30           10   TRUE 
    1 NFL_20050911_ARI@NYG      ARI   19 NYG 42           23   TRUE 
    1 NFL_20050911_CHI@WAS      CHI    7 WAS 9            2    TRUE 
    1 NFL_20050911_CIN@CLE      CIN   27 CLE 13          -14   FALSE 
    1  NFL_20050911_DAL@SD      DAL   28 SD  24           -4   FALSE 
    1 NFL_20050911_DEN@MIA      DEN   10 MIA 34           24   TRUE 
```

美国国家橄榄球联盟数据。我想想出一种方法将每个 HTm 与其差分配对，并将这些值存储在另一个表中。我知道这很容易做到，但我想出的所有方法都涉及通过搜索 [i,5]=="NE", [i,5]=="NYG" 的 for 循环单独执行每个团队。我想知道是否有一种方法可以系统地为所有 32 支球队做到这一点。然后，我将使用相同的方法将相同团队代码（“NYG”或“NE”）的 VTM 与 VPT 和 VDifferential 配对。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T12:15:44.253

我不确定我是否正确理解了您的问题（您需要数据库中的 select 之类的功能？）但是：

```
cbind(matr[,x], matr[,y]) 
```

选择列 x 和 y 并创建一个新矩阵

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T13:27:56.513

听起来您想根据分组变量对数据框执行操作。为此，有很多功能，其中`tapply()`. 例如，如果您的数据位于名为 的 data.frame 对象中`nflDF`，您可以通过以下方式获得`Differential`每个主队`HTm`的最大值

```
tapply(nflDF$Differential, nflDF$HTm, FUN = max) 
```

哪个会返回（使用您的示例数据）

```
CLE MIA  NE NYG  SD WAS 
-14  24  10  23  -4   2 
```

或者，您可以使用`by`：

```
by(nflDF, nflDF$HTm, FUN = function(x) max(x$Differential))

HTm: CLE
[1] -14
------------------------------------------------------------ 
HTm: MIA
[1] 24
------------------------------------------------------------ 
HTm: NE
[1] 10
------------------------------------------------------------ 
HTm: NYG
[1] 23
------------------------------------------------------------ 
HTm: SD
[1] -4
------------------------------------------------------------ 
HTm: WAS
[1] 2 
```

要执行更复杂的操作，请更改提供给`FUN`相应函数中参数的值。

# javascript - 如何在不向服务器发送请求的情况下以 runat=server 形式使用 javascript？

> ID：10413312
> 
> 赞同：0
> 
> 时间：2012-05-02T12:00:53.280
> 
> 标签：javascript, asp.net, master-pages

我的母版页位于 runat="server" 这样的表单中：

```
<body>
    <form id="Form1" runat="server">
         <asp:ContentPlaceHolder ID="MainContent" runat="server"/>
    </form>
</body> 
```

在我的一个页面中，我添加了一个文本区域、一个按钮（html 控件，而不是 ASP）和一些类似这样的 javascript 代码：

```
<textarea id="ContentTextArea" class="ContentTextArea" rows="2" cols="20"></textarea>
<button id="ClearButton" class="Button2" onclick="ClearButtonClick();">CLEAR</button>

    <script type="text/javascript">
        function ClearButtonClick() {
            document.getElementById("ContentTextArea").value = "";
        }
    </script> 
```

我希望javascript代码（正在清除textarea文本）在客户端单击“清除”按钮而不向服务器发送请求时运行，但是因为我`<form id="Form1" runat="server">`在母版页中有按钮将数据提交到服务器和页面被重新加载。

我的母版页中必须有`<form id="Form1" runat="server">`，但我也想在我的代码中使用 JavaSctipt，它将在客户端运行。

谢谢

编辑：

我的母版页是：

```
<%@ Master Language="C#" AutoEventWireup="true" CodeFile="Site.master.cs" Inherits="SiteMaster" %>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head id="Head1" runat="server">
    <title></title>
    <link href="~/Styles/Site.css" rel="stylesheet" type="text/css" />
    <asp:ContentPlaceHolder ID="HeadContent" runat="server">
    </asp:ContentPlaceHolder>
</head>
<body>
    <form id="Form1" runat="server">
        <div class="header">
             <div class="clear hideSkiplink">
                <asp:Menu ID="NavigationMenu" runat="server" CssClass="menu" EnableViewState="false" IncludeStyleBlock="false" Orientation="Horizontal">
                    <Items>
                        <asp:MenuItem NavigateUrl="~/Default.aspx" Text="Home"/>
                        <asp:MenuItem NavigateUrl="~/About.aspx" Text="About"/>
                        <asp:MenuItem NavigateUrl="~/ContactUs.aspx" Text="Contact Us"/>
                    </Items>
                </asp:Menu>
            </div>

            <div class="loginDisplay">
                <asp:LoginView ID="HeadLoginView" runat="server" EnableViewState="false">
                    <AnonymousTemplate>
                        [ <a href="~/Account/Login.aspx" ID="HeadLoginStatus" runat="server">Log In</a> ]
                    </AnonymousTemplate>
                    <LoggedInTemplate>
                        Welcome <span class="bold"><asp:LoginName ID="HeadLoginName" runat="server" /></span>!
                        [ <asp:LoginStatus ID="HeadLoginStatus" runat="server" LogoutAction="Redirect" LogoutText="Log Out" LogoutPageUrl="~/"/> ]
                    </LoggedInTemplate>
                </asp:LoginView>
            </div>
        </div>
        <div class="clear">
        </div>

        <div class="main">
        <asp:ContentPlaceHolder ID="MainContent" runat="server"/>
        </div>

        <div class="footer">
            <p>GH Electronics © 2012\. All Rights Reserved.</p>
        </div>

    </form>
    <input type="button" onclick="window.location = '/WareHouse/ContactUs.aspx';" value="avi"/>
    <script type="text/javascript">

           function ClearButtonClick() {
            document.getElementById("ContentTextArea").value = "";
            return false;
        }
    </script>
</body>

</html> 
```

我的联系方式是：

> ```
> <img alt="Contact Us" src="Images/contact_us.gif" style="float:left;"/>
> 
> <p class="contactUs" runat="server">CONTACT US</p>
> <label>Full Name:</label>
> <asp:TextBox class="FullNameTextBox" runat="server" />
> <br /> <br />
> <label>Phone Number:</label>
> <asp:TextBox class="PhoneNumberTextBox" runat="server" />
> <br /> <br />
> <label>Email:</label>
> <asp:TextBox class="EmailTextBox" runat="server" />
> <br /> <br />
> <label>Subject:</label>
> <asp:TextBox class="SubjectTextBox" runat="server" />
> <br /> <br />
> <label>Content:</label>
> <textarea id="ContentTextArea" class="ContentTextArea" rows="2" cols="20"></textarea>
> <br /> <br />
> <asp:Button ID="SendButton" class="SendButton" Text="SEND" runat="server" />
> 
> <button id="ClearButton" class="Button2" onclick="ClearButtonClick();">CLEAR</button>
> 
> <script type="text/javascript">
> 
>       function ClearButtonClick() {
>        document.getElementById("ContentTextArea").value = "";
>        return false;
>    } 
> ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T12:04:00.507

认为应该这样做：

```
<button id="ClearButton" class="Button2" onclick="javascript:ClearButtonClick();return false;">CLEAR</button> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T12:04:55.313

像这样做。您必须在两个地方进行更改。

1.  在 onclick="return ClearButtonClick();" 中添加返回 活动注册如下。

    ```
     <button id="ClearButton" class="Button2" onclick="return ClearButtonClick();">CLEAR</button> 
    ```

2.  从 javascript 函数返回 false 以阻止它向服务器发送请求 将其放在页面末尾或 head 标记之间。

    ```
    <script type="text/javascript">
        function ClearButtonClick() {
            document.getElementById("ContentTextArea").value = "";
            return false;
        }
    </script> 
    ```

# entity-framework-4.1 - 使用实体框架 4.1 获取标识列值

> ID：10413313
> 
> 赞同：1
> 
> 时间：2012-05-02T12:01:00.330
> 
> 标签：entity-framework-4.1, identity-column

我正在使用实体框架 4.1（VS 2010、SQL Server 2012）将数据插入数据库。首先，我创建一个对象的实例，用值填充属性并调用 AddObject()，如下所示：

```
VideoData videodata = new VideoData();
videodata.StartCaptureTime = startCaptureTime;
videodata.EndCaptureTime = endCaptureTime;
videodata.CameraID = CameraID;

using (var context = new PercEntities())
{             
    if (context.VideoDatas.Where(c => c.VideoID == videoID).Count() == 0)
    {
       var videoData = new VideoData
       {
           StartCaptureTime = startCaptureTime,
           EndCaptureTime = endCaptureTime,
           CameraID = CameraID,
       };
    context.VideoDatas.AddObject(videoData);
    context.SaveChanges();
   }
} 
```

问题是，数据库中的表有一个标识列：

```
VideoID int IDENTITY(1,1) 
```

并且我需要获取标识函数插入的值以填充其他对象，这些对象具有 VideoID 作为外键。例如：

```
FrameData frameData = new FrameData();
frameData.VideoID = videodata.VideoID;
frameData.Path = path; 
```

我唯一能想到的就是在 AddObject(videoData) 之后查询最大标识，但我害怕竞争条件。

我是 Entity Framework 的新手，所以我很乐意为此提供任何指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T12:27:00.717

如果您有其他需要`VideoID`作为 FK 的对象，您只需要正确配置`VideoData`与其他类型之间的导航属性，EF 将为您处理它。

调用`AddObject`不会将您的数据插入数据库，因此您无法在此调用后获取标识值。只有调用`SaveChanges`才会将您的所有更改推送到数据库，并且在此调用期间，EF 将在内部处理引用完整性（但前提是您的模型正确配置了关系）。

`SaveChanges`如果您`VideoID`已正确配置所有内容，则应在调用后自动填充。

# ruby-on-rails - Rails & 充当可标记，过滤掉带有多个标记的结果？

> ID：10413315
> 
> 赞同：2
> 
> 时间：2012-05-02T12:01:12.657
> 
> 标签：ruby-on-rails, tags, acts-as-taggable

这是我在stackoverflow中的第一个问题。

我正在使用带有名为 act as taggable 的插件的 rails 3，我喜欢它们。

我一直在从一本名为“使用 Rails 进行敏捷 Web 开发”(http://www.amazon.com/Agile-Development-Rails-Pragmatic-Programmers/dp/1934356549) 的书中做一个网上商店教程

我的“应用程序”能够过滤带有单个标签的产品，但我希望能够列出带有选择多个标签的产品。

例如，名为“Ford Ka”的产品包含标签：“Ford”、“Ka”和“red”。当我点击“福特”和“Ka”时，目录会过滤掉我所有的福特 Ka。

目前部分代码：

**意见/标签/index.html.erb：**

```
<div id="tag_cloud">
  <% tag_cloud(@tags, %w(css1 css2 css3 css4)) do |tag, css_class| %>
    <%= link_to tag.name, tag_path(tag.name), :class => css_class %>
  <% end %>
</div> 
```

**意见/标签/show.html.erb**

```
<h2>Photos tagged: <%=h params[:id] %> </h2>
<%= render 'products/catalog', :collection => @products %> 
```

**tags_controller.rb**

```
class TagsController < ApplicationController
skip_before_filter :authorize, :only => [:show, :destroy]
  def index
    @tags = Product.tag_counts(:order => 'name')
  end

  def show
    @products = Product.tagged_with(params[:id])
      respond_to do |format|
      format.html
    format.js
    end
  end
end 
```

谢谢！

# asp.net - 仅突出显示必填字段验证错误

> ID：10413316
> 
> 赞同：1
> 
> 时间：2012-05-02T12:01:38.237
> 
> 标签：asp.net, validation, requiredfieldvalidator

在我们的一个项目中，我们希望通过更改相应文本框的边框颜色来显示“必填字段验证错误”。我们的页面包含很多必填字段验证器、正则表达式验证器等。但我们只想突出显示必填字段错误。

有没有办法在不使用任何自定义验证功能的情况下做到这一点。？或者是否有任何方法可以在客户端的页面中找到所有必需的字段验证器。如果我们能找到这个，我想我们可以突出显示相应的错误文本框

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T12:31:13.540

一种可能比切换到自定义验证器更烦人的选项是创建您自己的 JavaScript 验证函数，该函数通过提交点击触发。从这里您可以更改无效字段的外观。

# c# - 动态用户界面，循环

> ID：10413318
> 
> 赞同：0
> 
> 时间：2012-05-02T12:01:48.403
> 
> 标签：c#, dynamic, user-interface

我创建了一个动态 UI，显示用户添加到他们的选择中的每个模块以及模块名称下对该模块的所有评估，所有数据都保存在数组列表中 - 包括作为文本框和标签的对象。

这是它的样子： [http ://www.4shared.com/photo/fullsize/Ja3jHpRJ/screen1.html](http://www.4shared.com/photo/fullsize/Ja3jHpRJ/screen1.html)

然后用户应该为每个评估输入他们的分数并且计算按钮应该计算他们对每个模块的总体分数在这个阶段我只是将分数加在一起。当只添加一个模块时，该程序运行良好，但是当有更多模块时，它似乎认为 TextBox 是空的，即使我用数字填充它们。

这是我的代码

```
private void calculateButton_Click(object sender, EventArgs e)

    {
        int modLength = dat.ModuleTitle.Count;
        int modAsses = 0;
        int loopCount = 0;

        for (int i = 0; i < modLength; i++)
        {

            int total = 0;

            if ((textboxComputer[loopCount] as TextBox).Text == "")
            {
                Console.WriteLine("!!!!!");
            }
            else
            {
                modAsses = int.Parse(dat.ModuleAssessNum[i].ToString());
                for (int y = 0; y < modAsses; y++)
                {

                    total = total + int.Parse((textboxComputer[loopCount] as TextBox).Text.ToString());

                    loopCount = loopCount + 1;
                }

                Console.WriteLine(total);
            }
        }
    } 
```

当我添加两个或更多模块时，它会显示“!!!!!” 消息，但计算添加的第一个模块的标记。

这是一些输出 [http://www.4shared.com/photo/fullsize/PlY29BMQ/screen2.html](http://www.4shared.com/photo/fullsize/PlY29BMQ/screen2.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T12:20:18.433

您的代码有问题，可能很多错误（变量名称除外）。

看看你的`loopCount`变量——你只会有条件地在你的循环中改变它，但你总是在循环的开始（你做的地方`textboxComputer[loopCount]`）使用它。

那么预期的行为是什么？如果你第一次进入循环，如果你进入你的“其他”部分，你可以按照你说的打印总数，但是你也改变了 loopCount 变量，一旦你到达`Console.WriteLine("!!!!!");`你就永远不会再改变它 - 所以你的迭代会表现相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T12:19:41.273

您需要确保在屏幕上创建额外*动态*元素的代码作为页面加载的一部分被调用，以便视图状态被插入回元素中并且可以由您的代码读回。

# mysql - 基于表的条件连接

> ID：10413319
> 
> 赞同：1
> 
> 时间：2012-05-02T12:01:49.663
> 
> 标签：mysql

我正在尝试编写一个 MySQL 查询，该查询将连续三个表连接到主表，但是根据最后一个正在连接的表上的值有条件地执行此操作。我尝试这样做的两种方法都有问题：

*   要么没有显示我需要的所有主要行
*   或者我在那里得到一些额外的不相关行。

表结构是现有系统的一部分，我无法更改它。此外，一旦我弄清楚 SQL，我将不得不找到一种将其与其查询系统集成的方法，因此 SQL 越简单越好！

我将在这里放很多细节，抱歉，这篇文章太长了，但我认为最好包含所有信息。

这里有更多信息：

**数据模型：**

有用户、课程和一个中间内容类型，它存储每个用户在特定课程上的用户信息，称为 cui。我需要查看所有用户的列表，如果有该用户和课程的 cui，也需要包含它。

在数据库中，cui 的字段内容存储在单独的表中，并通过 cui_id 连接，这是麻烦的一部分。

**精简的数据库结构：**

*   主表：用户（字段：uid、name）
*   崔表：节点（字段：cui_id）
*   用户字段表（字段：cui_id、uid）
*   课程字段表（字段：cui_id、course_id）

**加入**

```
user     user_field         node         course_field
----     ----------         -------      ------------
uid ==== uid          
name     cui_id =========== cui_id ===== cui_id
                                         course_id    = 202 
```

**尝试查询：**

以下查询在具有以下用户的小样本数据集上运行：

*   用户二：查询的课程有cui，其他课程有cui。
*   用户一：对其他课程有 cuis，但对所查询的课程没有。
*   用户六：没有cuis。

第一个查询是对最后一个表的条件连接，问题是它为用户二包含了一个额外的行，这不是正确的 cui。我不想 GROUP BY，因为我认为它不一定会给我正确的行。

```
SELECT user.uid, user.name, field_user.cui_id,
field_course.course_id
FROM user
LEFT JOIN field_user
ON
user.uid = field_user.uid
LEFT JOIN node AS cui
ON
cui.id = field_user.cui_id
LEFT JOIN field_course
ON
field_course.cui_id = cui.id
AND
field_course.course_id = 202 
```

结果：

```
uid     name        cui_id  course_id
---------------------------------------------
4       User One    772     NULL
5       User Two    434     202
5       User Two    771     NULL
35      User Six    NULL    NULL 
```

另一种方法是：

```
SELECT user.uid, user.name, field_user.cui_id,
field_course.course_id
FROM user
LEFT JOIN field_user
ON
user.uid = field_user.uid
LEFT JOIN node AS cui
ON
cui.id = field_user.cui_id
LEFT JOIN field_course
ON
field_course.cui_id = cui.id
WHERE (
field_course.course_id = 202 OR ISNULL(field_course.course_id)) 
```

结果：

```
uid     name    cui_nid     course_nid
---------------------------------------------
5       User Two    434     202
35      User Six    NULL    NULL 
```

那个问题是它忽略了用户一，因为用户一确实有其他的cuis，只是不适合正确的课程。

所以问题是，我如何得到这个？

```
uid     name        cui_id  course_id
--------------------------------------------
4       User One    772     NULL
5       User Two    434     202
35      User Six    NULL    NULL 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T12:58:09.057

真的不是那么漂亮，但应该做的伎俩：

```
-- Select to get all users irrespective of whether they have a row in field_course or field_user
SELECT user.uid, user.name, field_user.cui_id,
null as course_id
FROM user
LEFT JOIN field_user ON user.uid = field_user.uid
LEFT JOIN node AS cui ON cui.id = field_user.cui_id 
where user.uid not in
(
-- Inline view to get only users that have both a field_course & field_user row
SELECT user.uid
FROM user
INNER JOIN field_user ON user.uid = field_user.uid
INNER JOIN node AS cui ON cui.id = field_user.cui_id
INNER JOIN field_course ON field_course.cui_id = cui.id
where field_course.course_id = 202
)
union all
-- Select to get only users that have both a field_course & field_user row
SELECT user.uid, user.name, field_user.cui_id,
field_course.course_id
FROM user
INNER JOIN field_user ON user.uid = field_user.uid
INNER JOIN node AS cui ON cui.id = field_user.cui_id
INNER JOIN field_course ON field_course.cui_id = cui.id
where field_course.course_id = 202; 
```

**编辑**

这是我用来测试的表结构和数据：

```
CREATE TABLE `user` (
  `uid` int(10) unsigned NOT NULL,
  `name` varchar(20) NOT NULL
);

CREATE TABLE `node` (
`id` int(10) unsigned not null primary key
);

CREATE TABLE `field_user` (
  `uid` int(10) unsigned NOT NULL,
  `cui_id` int(10) unsigned NOT NULL
);

CREATE TABLE `field_course` (
  `uid` int(10) unsigned NOT NULL,
  `cui_id` int(10) unsigned NOT NULL,
`course_id` int(10) unsigned NOT NULL
);

insert into user (uid,name) values (4,"User One");
insert into user (uid,name) values (5,"User Two");
insert into user (uid,name) values (35,"User Six");

insert into node (id) values (771);
insert into node (id) values (772);
insert into node (id) values (434);

insert into field_user (uid,cui_id) values (4,772);
insert into field_user (uid,cui_id) values (5,434);
insert into field_user (uid,cui_id) values (5,771);

insert into field_course (uid,cui_id,course_id) values (5,434,202); 
```

# extjs - EXTJS - 返回一个表单对象

> ID：10413321
> 
> 赞同：0
> 
> 时间：2012-05-02T12:01:52.580
> 
> 标签：extjs

我正在使用 EXTJS 3.4 库开发一个表单。但是当我尝试从表单类型的 EXTJS 面板返回表单对象时，我遇到了一些问题。

我的配置形式如下：

```
config = Ext.apply({            
    title: 'Fluxo de Reincidencia',
    id: 'formKMLRcd',
    name: 'formKMLRcd',
    border: true,
    bodyStyle: "padding: 10px",
    layout: "form",                     
    autoScroll: false,          
    items: [{
        xtype: "datefield",
        ref: "../extent",
        anchor: "100%",
        fieldLabel: 'Data Inicio',
        emptyText: 'informe a data de inicio',
        name: 'txtRcdDataInicio',
        id: 'txtRcdDataInicio',
        format:'d/m/Y',
        altFormats:'d/m/Y',
        allowBlank: false,
        validator: function(value){
            var date = this.parseDate(this.getValue());
            if (!date){
                return 'Informe uma data valida';
            }
        }
    } 
```

这是我的问题，当我尝试从此表达式返回表单时出现错误：

```
var form = Ext.getCmp('formKMLRcd').getForm(); 
```

任何人都知道如何从我的配置对象返回一个表单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T16:02:27.493

您收到错误是因为您使用的是面板而不是表单面板。在您的配置中，您在面板中使用“表单布局”。要使用`getform`您应该使用表单面板的方法获取表单。

```
config = Ext.apply({            
    title: 'Fluxo de Reincidencia',
    id: 'formKMLRcd',
    name: 'formKMLRcd',
    xtype: 'form'  // Makes sure that the panel is form panel and not ordinary panel
    ... // rest of the code 
```

现在您应该可以使用该`getForm`方法获得底层表单了！

# java - Android - 未为 Cursor 类型定义 getType(int)

> ID：10413327
> 
> 赞同：2
> 
> 时间：2012-05-02T12:02:10.317
> 
> 标签：java, android, cordova, cursor, phonegap-plugins

我是移动开发的新手，所以我决定使用 Phonegap 来开发我的应用程序。在我的应用程序中，我使用的是 SQLite 插件，因为 WebSQL 没有满足我的需求。当我尝试将使用该插件所需的文件之一放在我的项目中时，Eclipse 在以下函数中返回错误：

```
public void processResults(Cursor cur, String query_id, String tx_id) {

    String result = "[]";
    // If query result has rows

    if (cur.moveToFirst()) {
        JSONArray fullresult = new JSONArray();
        String key = "";
        int colCount = cur.getColumnCount();

        // Build up JSON result object for each row
        do {
            JSONObject row = new JSONObject();
            try {
                for (int i = 0; i < colCount; ++i) {
                    key = cur.getColumnName(i);
                    // for old Android SDK remove lines from HERE:
                    if(android.os.Build.VERSION.SDK_INT >= 11)
                    {
                        switch(cur.getType (i))
                        {
                            case Cursor.FIELD_TYPE_NULL:
                                row.put(key, null);
                                break;
                            case Cursor.FIELD_TYPE_INTEGER:
                                row.put(key, cur.getInt(i));
                                break;
                            case Cursor.FIELD_TYPE_FLOAT:
                                row.put(key, cur.getFloat(i));
                                break;
                            case Cursor.FIELD_TYPE_STRING:
                                row.put(key, cur.getString(i));
                                break;
                            case Cursor.FIELD_TYPE_BLOB:
                                row.put(key, cur.getBlob(i));
                                break;
                        }
                    }
                    else // to HERE.
                    {
                        row.put(key, cur.getString(i));
                    }
                }
                fullresult.put(row);

            } catch (JSONException e) {
                e.printStackTrace();
            }

        } while (cur.moveToNext());

        result = fullresult.toString();
    }
    if(query_id.length() > 0)
        this.sendJavascript(" SQLitePluginTransaction.queryCompleteCallback('" + tx_id + "','" + query_id + "', " + result + ");");

} 
```

在第 20 行（当我们有“switch(cur.getType (i))”时），Eclipse 返回以下错误：

```
The method getType(int) is undefined for the type Cursor 
```

当我看到这个时，我尝试用谷歌搜索它，并且在 Android 的文档上说 getType 是 Cursor 的方法。

这是此文件导入的内容：

```
import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;
import com.phonegap.api.Plugin;
import com.phonegap.api.PluginResult;
import android.database.Cursor;
import android.database.sqlite.*;
import android.util.Log; 
```

由于不了解 Java，我无法弄清楚这一点，并且在我的搜索中没有找到任何东西，但我可能会遗漏一些东西。我希望有人可以帮助我，谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T12:04:36.430

您的目标是哪个版本的 Android？在API 11 (Honeycomb)[中添加了 getType 方法。](http://developer.android.com/reference/android/database/Cursor.html#getType%28int%29)

您可以在标题的右侧将其视为（'Since: API Level 11'），并且您可能会发现参考页面顶部的“按 API 级别过滤”框很有用。

# osgi - 在 osgi 中使用 QueryDSL

> ID：10413329
> 
> 赞同：1
> 
> 时间：2012-05-02T12:02:18.070
> 
> 标签：osgi, querydsl

我一直在尝试在一个 osgi 包的项目中使用 querydsl。我的 pom.xml 具有以下依赖项：

```
 <dependency>
        <groupId>com.mysema.querydsl</groupId>
        <artifactId>querydsl-apt</artifactId>
        <version>2.5.0</version>

    </dependency>

    <dependency>
        <groupId>com.mysema.querydsl</groupId>
        <artifactId>querydsl-jpa</artifactId>
        <version>2.5.0</version>
    </dependency> 
```

以及插件

```
 <plugin>
            <groupId>com.mysema.maven</groupId>
            <artifactId>maven-apt-plugin</artifactId>
            <version>0.3.2</version>
            <executions>
                <execution>
                    <goals>
                        <goal>process</goal>
                    </goals>
                    <configuration>
                        <outputDirectory>target/generated-sources/java</outputDirectory>
                        <processor>com.mysema.query.apt.jpa.JPAAnnotationProcessor</processor>
                    </configuration>
                </execution>
            </executions>
        </plugin>
    <plugin>
            <groupId>org.ops4j</groupId>
            <artifactId>maven-pax-plugin</artifactId>
        </plugin>
        <plugin>
            <groupId>org.apache.felix</groupId>
            <artifactId>maven-bundle-plugin</artifactId>
            <extensions>true</extensions>
            <!-- | the following instructions build a simple set of public/private 
                classes into an OSGi bundle -->
            <configuration>
                <instructions>
                    <Import-Package>com.mysema.query.jpa,*</Import-Package>
                    <Export-Package>com.mypackage.package.*;version="${project.version}"</Export-Package> 
                </instructions>
            </configuration>
        </plugin> 
```

仍然当我尝试启动捆绑包时，我得到：

```
 Error executing command: Unresolved constraint in bundle com.mypackage.package [163]: Unable to resolve 163.0: missing requirement [163.0] package; (&(package=com.mysema.query.jpa)(version>=2.5.0)(!(version>=3.0.0))) 
```

我使用的是旧版本的 querydsl，但显然他们最近修复了一些[关于 osgi 的东西，](https://github.com/mysema/querydsl/issues/130)所以我升级了。问题仍然存在。

让querydsl在osgi中工作我缺少什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T18:49:50.723

手动安装每个依赖项会很痛苦，但是 AFAIK 没有任何东西可以使用 Maven 工件并链接所有依赖项——这会失败，因为它会在哪里停止？

您最终可能会得到每个日志框架的每个版本（即使您安装了 pax-logging），或者错误的实现。

唉，在 maven 的情况下，目前没有办法应用[语义版本控制](http://semver.org/)或更高级别的[需求和能力](http://blog.osgi.org/2012/03/requirements-and-capabilities.html)。（虽然 BND (maven-bundle-plugin, bndtools) 在代码级别做了一些合理的假设）

Karaf 功能（请参阅发行版 ${KARAF_HOME} 中的 PDF 手册）可以大大缓解这种情况，但设置起来可能需要一些工作。有（至少）几种方法可以生成特征文件；

1.  使用[features-maven-plugin](http://karaf.apache.org/manual/2.2.7/developers-guide/features-maven-plugin.html)
2.  使用 maven-build-helper 插件发布您手工制作的 XML 文件（很费力，但您可以使用资源过滤来维护版本）。

# unix - 错误字符串捕获：grep 命令的冗余

> ID：10413337
> 
> 赞同：0
> 
> 时间：2012-05-02T12:02:43.543
> 
> 标签：unix, aix

目前我正在使用以下命令来捕获 MY_FILE_NAME*.log 中的错误字符串

```
Currentdate=`date -u +"%Y/%m/%d"`
YEST=`TZ=XYZ+24 date '+%Y/%m/%d'`

grep -E "$Currentdate|$YEST"  MY_FILE_NAME*.log |  grep "Type: Error" 
```

此命令正在生成带有字符串“类型：错误”的大量数据，具有相同错误类型的冗余（在我的情况下，相同的错误显示 100 次）

我希望相同类型的错误字符串只显示一次

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T12:41:29.927

如果使用 GNU/Linux，请尝试使用“-m”开关

```
grep -m 1 -E "$Currentdate|$YEST"  MY_FILE_NAME*.log |  grep "Type: Error" 
```

在 GNU 版本的 grep 中，“-m”开关在找到匹配项后停止读取输入文件。在构建 AIX 和类似系统的旧 Unix grep 中不存在此功能。

如果在没有 -m 或 -B 的 AIX 上，请参阅[此 StackOvreflow 帖子](https://stackoverflow.com/questions/5062882/on-aix-grep-b-a-m-does-not-work-any-solution-with-sed-or-awk)

# java - 从 maven 2 升级到 maven 3

> ID：10413339
> 
> 赞同：3
> 
> 时间：2012-05-02T12:02:53.417
> 
> 标签：java, jakarta-ee, maven, maven-2, maven-3

我已经从 Maven 2 升级到 Maven 3，它似乎可以正常工作到`clean install`.

但是，在[Maven 3.x Compatibility Notes](https://cwiki.apache.org/confluence/display/MAVEN/Maven+3.x+Compatibility+Notes)中，提到该`<reporting>`标签不再受支持，**应该**向上移动到该`<build>`标签。

* * *

```
<reporting>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-project-info-reports-plugin</artifactId>
        <version>2.1</version>
        <reportSets>
          <reportSet>
            <reports>
              <report>dependencies</report>
              <report>dependency-convergence</report>
              <report>dependency-management</report>
              <report>index</report>
              <report>plugin-management</report>
              <report>project-team</report>
              <report>license</report>
              <report>summary</report>
            </reports>
          </reportSet>
        </reportSets>
      </plugin>
    </plugins>
  </reporting> 
```

* * *

我**已将其**注释掉并将插件标签及其内容移至`<build><plugins>`标签。

当我`mvn validate`现在运行时，我收到以下错误：

```
[ERROR] The build could not read 1 project -> [Help 1]
[ERROR]
[ERROR]   The project com.company.projectName:ProjectName:1.2 (C:\Svn\projectName\branches\projectName-1.2\System\4_ImplementationSet\WAS\src\pom.xml) has 1 error
[ERROR]     Malformed POM C:\Svn\projectName\branches\projectName-1.2\System\4_ImplementationSet\WAS\src\pom.xml: Unrecognised tag: 'reportSets' (position: START_TAG seen ...</version>\r\n        <reportSets>... @123:21)  @ C:\Svn\projectName\branches\projectName-1.2\System\4_ImplementationSet\WAS\src\pom.xml, line 123, column 21 -> [Help 2] 
```

我错过了什么吗？我可以让东西保持原样，但我试着移动它，但它没有用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T12:15:40.277

这不仅仅是将标签复制到不同位置的问题。架构也在其他方面发生了变化。

我建议您阅读“仅限 Maven 3”配置的文档，因为这似乎是您想要做的。这是一个[链接](http://maven.apache.org/plugins/maven-site-plugin/maven-3.html#New_Configuration_Maven_3_only_no_reports_configuration_inheritance)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T12:24:18.357

尝试：

```
 <plugins>
       ...
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-site-plugin</artifactId>
            <version>3.0</version>
            <configuration>
                <reportPlugins> 
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-project-info-reports-plugin</artifactId>
                        <version>2.4</version>
                        <configuration>
                            <reportSets>
                                <reportSet>
                                    <reports>
                                        <report>dependencies</report>
                                        <report>dependency-convergence</report>
                                        <report>dependency-management</report>
                                        <report>index</report>
                                        <report>plugin-management</report>
                                        <report>project-team</report>
                                        <report>license</report>
                                        <report>summary</report>
                                    </reports>
                                </reportSet>
                            </reportSets>
                        </configuration>
                    </plugin>
                    ...
                </reportPlugins>
            </configuration>
        </plugin>
        ...
    </plugins> 
```

（未经测试；我不确定报告集部分）

# javascript - JavaScript 使用数组显示数据

> ID：10413346
> 
> 赞同：0
> 
> 时间：2012-05-02T12:03:29.457
> 
> 标签：javascript

我正在开发一个显示每个问题块的分数系统，我正在使用 PHP 从表中检索数据，并使用下面的 javascript 来计算分数。问题是我想要每个问题块下面的几个分数标签。很明显，我需要一个数组来完成这项工作，但目前我正在使用这一行将数据写入，`document.getElementById("score_label[0]").innerHTML=""+current_score.toFixed(1);` 所以这只适用于数组中的第一个条目。如何让它遍历整个数组（score_label[]）并增加它的值以便代码读取`document.getElementById("score_label[0]").innerHTML=""+current_score.toFixed(1); document.getElementById("score_label[1]").innerHTML=""+current_score.toFixed(1);`

`echo "your total score: <span id='score_label[0]' name='score_board['".$score_board."']'></span>";`
如果需要我可以发布整个函数，这是 javascript 正在写入的元素，但我认为这主要是我对数组的了解不足，这就是这里的问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T12:10:26.710

如果我正确阅读了您的问题（`current_score`所有元素都相同？？？）：

```
for (var i = 0; i < score_label.length; ++i)
    document.getElementById("score_label[" + i + "]").innerHTML=""+current_score.toFixed(1); 
```

我应该提到`id`表单的属性`score_label[N]`可能会令人困惑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T12:10:16.160

尝试使用 foreach 函数循环遍历整个 score_label 数组。

[需要在 JavaScript 中遍历 PHP 数组](https://stackoverflow.com/questions/2663443/need-to-loop-through-a-php-array-in-javascript)

# sql - 需要在sql子表中移植数据

> ID：10413347
> 
> 赞同：0
> 
> 时间：2012-05-02T12:03:35.543
> 
> 标签：sql, sql-server, data-import

需要在sql表中移植数据

我有一个带有列 ( `masterid, masterdata, year`) 的主表。这`masterid`是一个身份列。

我有 2012 年的数据。我需要与 2013 年相同的 2012 年数据

我可以通过简单地运行如下 SQL 语句来解决问题：

```
INSERT INTO mastertable
    SELECT masterdata, 2013 
    FROM mastertable WHERE Year = 2012 
```

我也想为子表运行类似的运行。

我的子表结构是：（`childid , masterid, childdata`）

这里我有 2012 年的子数据，我想`masterid`在第一步中为 2013 年的主数据正确创建 2013 年的类似数据。

最好我想在不添加额外临时列的情况下获得解决方案

任何铅都非常感谢。

问候，库马尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T12:48:49.527

假设`ChildId`是具有自动增量的标识列

您可以将它们包装在函数/存储过程中，而无需临时表。

**更新**

```
Declare @Year     int

SET @Year = 2011

INSERT INTO MasterTable 
SELECT masterdata, 2013
FROM mastertable WHERE Year = @Year

INSERT INTO childtable
SELECT SCOPE_IDENTITY(), c.childdata
FROM childtable c
WHERE masterid in 
(
   SELECT masterid
   FROM masterTable
   WHERE Year = @Year
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T12:34:33.700

您需要存储`mastertable`表中创建的 2013 年和 2012 年记录之间的链接。如果您想在不添加任何额外临时列的情况下实现此目的，则需要使用 T-SQL。

（我猜到了`varchar(max)`masterdata 的一种类型，因为您没有指定它的类型）。

```
DECLARE @links TABLE ( masterid int, newmasterid int )
DECLARE @mastertemp TABLE ( masterid int, masterdata varchar(max) )

DECLARE @masterid int,
        @masterdata varchar(max)

INSERT INTO @mastertemp
SELECT      masterid,
            masterdata
FROM        mastertable
WHERE       [year] = 2012

WHILE EXISTS ( SELECT TOP 1 * FROM @mastertemp )
BEGIN
    SELECT TOP 1    @masterid = masterid,
                    @masterdata = masterdata
    FROM            @mastertemp

    INSERT INTO mastertable
    VALUES ( @masterdata, 2013 )

    INSERT INTO @links
    VALUES ( @masterid, SCOPE_IDENTITY() )

    DELETE FROM @mastertemp
    WHERE       masterid = @masterid
END

INSERT INTO childtable
SELECT      l.newmasterid,
            c.childdata
FROM        childtable c
INNER JOIN  @links l ON c.masterid = l.masterid 
```

# datetime - 在mongo中获取日期/ ISODate的组件

> ID：10413349
> 
> 赞同：11
> 
> 时间：2012-05-02T12:03:37.853
> 
> 标签：datetime, mongodb, mongodb-query, isodate

如何`minute`从`ISODate`存储中获取组件`MongoCollection`？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-02T13:12:02.677

由于您没有指定语言，我将假设您的意思是 JavaScript，就像在 shell 中一样。

shell 的一个不错的特性是它具有制表符补全功能。所以你可以做这样的事情：

```
> db.test.insert({x:new Date()});
> var doc = db.test.findOne();
> doc
{
"_id" : ObjectId("4fa131851932655dc45027a9"),
"x" : ISODate("2012-05-02T13:07:17.012Z")
}
> doc.x
ISODate("2012-05-02T13:07:17.012Z")
> doc.x.<TAB><TAB>
doc.x.constructor            doc.x.getSeconds(            doc.x.getUTCMinutes( doc.x.setHours(              doc.x.setUTCHours(           doc.x.toLocaleDateString(
doc.x.getDate(               doc.x.getTime(               doc.x.getUTCMonth(           doc.x.setMilliseconds(       doc.x.setUTCMilliseconds(    doc.x.toLocaleString(
doc.x.getDay(                doc.x.getTimezoneOffset(     doc.x.getUTCSeconds(         doc.x.setMinutes(            doc.x.setUTCMinutes(         doc.x.toLocaleTimeString(
doc.x.getFullYear(           doc.x.getUTCDate(            doc.x.getYear(               doc.x.setMonth(              doc.x.setUTCMonth(           doc.x.toString(
doc.x.getHours(              doc.x.getUTCDay(             doc.x.hasOwnProperty(        doc.x.setSeconds(            doc.x.setUTCSeconds(         doc.x.toTimeString(
doc.x.getMilliseconds(       doc.x.getUTCFullYear(        doc.x.propertyIsEnumerable(  doc.x.setTime(               doc.x.setYear(               doc.x.toUTCString(
doc.x.getMinutes(            doc.x.getUTCHours(           doc.x.setDate(               doc.x.setUTCDate(            doc.x.toDateString(          doc.x.tojson(
doc.x.getMonth(              doc.x.getUTCMilliseconds(    doc.x.setFullYear(           doc.x.setUTCFullYear(        doc.x.toGMTString(           doc.x.valueOf( 
```

你想要的可能是：

```
> doc.x.getSeconds();
17
> doc.x.getMinutes();
7
> doc.x.getHours();
9
> doc.x.getDate();
2
> doc.x.getMonth();
4
> doc.x.getFullYear();
2012 
```

# java - Java中从字符串到sql日期的日期转换给出不同的输出？

> ID：10413350
> 
> 赞同：30
> 
> 时间：2012-05-02T12:03:40.757
> 
> 标签：java, date, type-conversion

我有一个字符串形式的日期。我必须将其更改为 Sql Date。所以为此我使用了以下代码。

```
String startDate="01-02-2013";
SimpleDateFormat sdf1 = new SimpleDateFormat("dd-mm-yyyy");
java.util.Date date = sdf1.parse(startDate);
java.sql.Date sqlStartDate = new java.sql.Date(date.getTime()); 
```

当我使用上面的代码并运行它时。我得到以下输出。

```
2013-01-01\. 
```

此处月份未正确转换。
请告诉我问题出在哪里并提供示例代码以获得正确的结果？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-05-02T12:05:28.853

`mm`是*分钟*。你想要`MM`几个月*：*

```
SimpleDateFormat sdf1 = new SimpleDateFormat("dd-MM-yyyy"); 
```

不要难过——这个错误经常出现。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-02T12:05:04.430

`mm` [代表“分钟”](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)。改用`MM`：

```
SimpleDateFormat sdf1 = new SimpleDateFormat("dd-MM-yyyy"); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-07-23T14:44:19.497

您需要使用`MM`as `mm`stand 来表示**分钟**。

有两种生成**月份**模式的方法。

```
SimpleDateFormat sdf1 = new SimpleDateFormat("dd-MM-yyyy"); //outputs month in numeric way, 2013-02-01

SimpleDateFormat sdf2 = new SimpleDateFormat("dd-MMM-yyyy"); // Outputs months as follows, 2013-Feb-01 
```

完整的代码片段：

```
 String startDate="01-Feb-2013"; // Input String
        SimpleDateFormat sdf1 = new SimpleDateFormat("dd-MM-yyyy"); // New Pattern
        java.util.Date date = sdf1.parse(startDate); // Returns a Date format object with the pattern
        java.sql.Date sqlStartDate = new java.sql.Date(date.getTime());
        System.out.println(sqlStartDate); // Outputs : 2013-02-01 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-07-16T09:58:56.243

这是将字符串转换为 util date 和 sql date 的简单方法

```
String startDate="12-31-2014";
SimpleDateFormat sdf1 = new SimpleDateFormat("MM-dd-yyyy");
java.util.Date date = sdf1.parse(startDate);
java.sql.Date sqlStartDate = new java.sql.Date(date.getTime()); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-07-19T08:02:05.620

在使用日期格式时，您可能要记住始终使用`MM`几个月和`mm`几分钟。那应该可以解决您的问题。

# delphi - TTimer 对象可以是 Delphi 类的字段吗？

> ID：10413351
> 
> 赞同：5
> 
> 时间：2012-05-02T12:03:43.017
> 
> 标签：delphi

两天前我开始学习Delphi，但我卡住了。我崩溃了，因为没有任何事情能如我所愿，所以我决定在这里写。我想创建一个类，它有一个带有自己的 TTimer 对象的字段，它将在某个时间间隔执行一些操作。甚至可能吗？假设我们有这样的代码：

```
Sth = class
private

public
  clock:TTimer;
  procedure clockTimer(Sender: TObject);
  constructor Create();
end;

constructor Sth.Create()
begin
  clock.interval:=1000;
  clock.OnTimer := clockTimer;
end;

procedure Sth.clockTimer(Sender: TObject);
begin
  //some action on this Sth object at clock.interval time...
end; 
```

我的类似代码可以复制，但无法正常工作。当我调用构造函数时，程序崩溃了（行中的访问冲突：clock.interval:=1000;）。我不知道是什么

```
Sender:TObject 
```

确实如此，但我认为这不是问题。是否可以创建我想要的此类？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-02T12:12:39.500

您尚未创建计时器。声明一个变量是不够的。您确实需要创建计时器。

```
constructor Sth.Create()
begin
  clock := TTimer.Create(nil);
  clock.interval:=1000;
  clock.OnTimer := clockTimer;
end; 
```

你也应该摧毁它。向类添加析构函数

```
destructor Destroy; override; 
```

并像这样实现它

```
destructor Sth.Destroy;
begin
  clock.Free;
  inherited;
end; 
```

我还建议您使您的`clock`字段具有私有可见性。像这样暴露一个类的内部是不好的。

```
TMyClass = class
private
  FClock: TTimer;
  procedure ClockTimer(Sender: TObject);
public
  constructor Create;
  destructor Destroy; override;
end;
....
constructor TMyClass.Create
begin
  inherited;
  FTimer := TTimer.Create(nil);
  FTimer.Interval := 1000;
  FTimer.OnTimer := ClockTimer;
end;

destructor TMyClass.Destroy;
begin
  FTimer.Free;
  inherited;
end; 
```

请注意，我已经包含了对继承的构造函数和析构函数的调用。这些在此类中不是必需的，因为它直接派生自`TObject`并且构造函数和析构函数为`TObject`空。但是，如果您在某个时候更改了继承，并使您的类派生自不同的类，那么您将需要这样做。因此，在我看来，始终包含这些调用是一种很好的做法。

# sql - 向表中添加数字 id

> ID：10413362
> 
> 赞同：2
> 
> 时间：2012-05-02T12:04:00.680
> 
> 标签：sql, sql-server, sql-server-2008, tsql, reporting-services

```
SELECT top 5
day_description,
count(numberofdays) as number

FROM mytable

where department = 'departmentname'

group by day_description 
```

我的选择带回了这样的东西：

```
day description           number           
holiday                     32               
working day                 212              
training day                5                
meeting day                 26               
admin day                   66 
```

有没有办法添加一个新列，它指定 1-5，1 是最高值行，5 是最低值行。看起来像这样：

```
day description           number           top5ID
holiday                     32               3
working day                 212              1
training day                5                5
meeting day                 26               4
admin day                   66               2 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T12:09:48.427

也许是这样的：

```
;WITH CTE
AS
(
    SELECT top 5
        day_description,
        count(numberofdays) as number
    FROM mytable
    where department = 'departmentname'
    group by day_description
)
SELECT
    ROW_NUMBER() OVER(ORDER BY CTE.number DESC) AS Top5ID,
    CTE.*
FROM
    CTE 
```

或没有 CTE：

```
SELECT
    ROW_NUMBER() OVER(ORDER BY t.number DESC) AS Top5ID,
    t.*
FROM
    (
        SELECT top 5
        day_description,
        count(numberofdays) as number
        FROM mytable
        where department = 'departmentname'
        group by day_description
    ) AS t 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T12:49:11.290

所以，你可以使用它：

```
SELECT TOP 5 day_description, COUNT(numberofdays) AS number, 
ROW_NUMBER() OVER(ORDER BY COUNT(numberofdays) DESC) AS Top5ID
FROM mytable
WHERE department = 'departmentname'
GROUP BY day_description
ORDER BY COUNT(numberofdays) DESC 
```

# javascript - 包裹在 div 中的可调整大小/流体图像？

> ID：10413365
> 
> 赞同：0
> 
> 时间：2012-05-02T12:04:07.510
> 
> 标签：javascript, jquery, image-resizing, resizable, window-resize

我试图让一些图像在窗口调整大小时自动调整大小。

我可以使用下面的代码进行此操作，但是我希望对图像进行更多控制，例如能够设置最小高度，有什么想法吗？

也可能将图像包装在一个 div 中，以便有更多的控制？我对 js 不太擅长，所以任何帮助或解释都会有所帮助

```
$(function() {
    var $img = $(".l");  
    var ratio;
    var offsetX = $img.offset().left;
    var offsetY = $img.offset().top;

    $(window).load(function () {
        ratio = $img.width() / $img.height();
        $(this).resize();
    });

    $(window).resize(function () {
        var viewportWidth = window.innerWidth || document.documentElement.clientWidth;
        var viewportHeight = window.innerHeight || document.documentElement.clientHeight;
        var availWidth = viewportWidth - offsetX - 70;
        var availHeight = viewportHeight - offsetY - 70;

        if (availWidth / availHeight > ratio) {
            $img.height(availHeight);
            $img.width(availHeight * ratio);
        } 
        else {
            $img.width(availWidth);
            $img.height(availWidth / ratio);
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T12:08:31.997

只需使用 CSS：

```
img { width: 100%; } 
```

然后，您可以申请`height`或`min-height`根据需要。

要查看它是否正常工作，请调整此小提琴的窗口大小：

[**示例小提琴**](http://jsfiddle.net/QmRRw/)

# python - Google 混合（openid + oauth）协议不适用于 127.0.0.1

> ID：10413367
> 
> 赞同：2
> 
> 时间：2012-05-02T12:04:17.337
> 
> 标签：python, oauth, gmail, openid, google-openid

我试图实现谷歌混合协议（oauth over openid）。谷歌不要求oauth许可的问题（尝试使用gmail），只要求openid。我在 google api 控制台注册：

```
Client ID for web applications
Client ID: 248141267047.apps.googleusercontent.com
Email address:248141267047@developer.gserviceaccount.com
Client secret: 
Redirect URIs:  http://127.0.0.1:8000/oauth2callback
JavaScript origins:     http://127.0.0.1:8000 
```

这是我用于生成 openid url 的 python 代码：

```
class OpenIDOAuthRequest(Extension):

    ns_alias = 'oauth'

    def __init__(self, consumer, scope, ns_uri=None):
        Extension.__init__(self)
        self.consumer = consumer
        self.scope = scope
        self.ns_uri = ns_uri or oauth_ns_uri

    def getExtensionArgs(self):
        return {
            'consumer': self.consumer,
            'scope': ' '.join(self.scope),
        }

def google():
        #define google openid url
        openid_session = {}
        openid_store = filestore.FileOpenIDStore('.')
        consumer = Consumer(openid_session, openid_store)
        openid = u"https://www.google.com/accounts/o8/id"
        URLS = {
            'ax_last': "http://axschema.org/namePerson/last",
            'ax_first': "http://axschema.org/namePerson/first",
            'ax_email': "http://axschema.org/contact/email",
            "country":"http://axschema.org/contact/country/home",
            "timezone":"http://axschema.org/pref/timezone",
            "language":"http://axschema.org/pref/language",
            "person":"http://axschema.org/namePerson",
        }
        #defining what fields we're going to get
        ax_request = ax.FetchRequest()
        for k,v in URLS.iteritems():
            ax_request.add(ax.AttrInfo(v, required = True))
        oa = OpenIDOAuthRequest("248141267047.apps.googleusercontent.com",["https://mail.google.com/",])
        try:
            authrequest = consumer.begin(openid)
        except DiscoveryFailure, e:
            print e
            print "some errror happened"
        else:
            authrequest.addExtension(ax_request)
            authrequest.addExtension(oa)

        redirecturl = authrequest.redirectURL("http://127.0.0.1:8000",
            return_to = "http://127.0.0.1:8000/oauth2callback",
            immediate=False)
        print redirecturl 
```

它生成以下网址：

```
https://accounts.google.com/o/openid2/auth?openid.assoc_handle=AMlYA9Vr6Biwp-rCAr4TLbf8CtItR-zr3bs0LT7oYQ3Pakg93ivCS_6C&openid.ax.mode=fetch_request&openid.ax.required=ext0,ext1,ext2,ext3,ext4,ext5,ext6&openid.ax.type.ext0=http://axschema.org/contact/email&openid.ax.type.ext1=http://axschema.org/namePerson&openid.ax.type.ext2=http://axschema.org/namePerson/first&openid.ax.type.ext3=http://axschema.org/pref/timezone&openid.ax.type.ext4=http://axschema.org/pref/language&openid.ax.type.ext5=http://axschema.org/contact/country/home&openid.ax.type.ext6=http://axschema.org/namePerson/last&openid.claimed_id=http://specs.openid.net/auth/2.0/identifier_select&openid.identity=http://specs.openid.net/auth/2.0/identifier_select&openid.mode=checkid_setup&openid.ns=http://specs.openid.net/auth/2.0&openid.ns.ax=http://openid.net/srv/ax/1.0&openid.ns.oauth=http://specs.openid.net/extensions/oauth/1.0&openid.oauth.consumer=248141267047.apps.googleusercontent.com&openid.oauth.scope=https://mail.google.com/&openid.realm=http://127.0.0.1:8000&openid.return_to=http://127.0.0.1:8000/oauth2callback?janrain_nonce%3D2012-05-01T22%253A50%253A33ZUW7vcj 
```

它有所有必要的扩展。但是，如果我访问此网址，它不会询问我是否允许使用 gmail。我也在比较来自 sanebox.com 的类似 url。它按预期工作，请求 gmail 的许可。但我没有看到为什么他们的网址有效而我的网址无效的任何本质区别。此外，我将 url 中的 127.0.0.1 替换为 sanebox url，其他部分保持不变。而且......现在它正在请求gmail的许可。切换回 127.0.0.1 - 停止询问。这是 sanebox 网址：

```
https://accounts.google.com/o/openid2/auth?openid.assoc_handle=AMlYA9UV4Ud714HHaFJ0fpItabA8v-zw0QuReEPcn61ilJzyFrFia5PO&openid.ax.mode=fetch_request&openid.ax.required=ext0,ext1,ext2,ext3,ext4,ext5,ext6&openid.ax.type.ext0=http://axschema.org/pref/timezone&openid.ax.type.ext1=http://axschema.org/contact/country/home&openid.ax.type.ext2=http://axschema.org/pref/language&openid.ax.type.ext3=http://axschema.org/namePerson/last&openid.ax.type.ext4=http://axschema.org/namePerson/first&openid.ax.type.ext5=http://axschema.org/namePerson&openid.ax.type.ext6=http://axschema.org/contact/email&openid.claimed_id=http://specs.openid.net/auth/2.0/identifier_select&openid.identity=http://specs.openid.net/auth/2.0/identifier_select&openid.mode=checkid_setup&openid.ns=http://specs.openid.net/auth/2.0&openid.ns.ax=http://openid.net/srv/ax/1.0&openid.ns.oauth=http://specs.openid.net/extensions/oauth/1.0&openid.ns.sreg=http://openid.net/extensions/sreg/1.1&openid.oauth.consumer=www.sanebox.com&openid.oauth.scope=https://mail.google.com/+http://www.google.com/m8/feeds&openid.realm=https://www.sanebox.com/&openid.return_to=https://www.sanebox.com/users?_method%3Dpost%26open_id_complete%3D1 
```

那么我错过了什么？如果我在 api 控制台中注册了这个 url，为什么它不适用于 127.0.0.1。它在 openid 上运行良好。并且在没有 openid 的情况下与 oauth 本身一起工作得很好。但是现在当我尝试在 openid 上使用 oauth 时，它不会要求我获得 gmail 的许可。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-15T09:26:30.370

我已经运行了 PHP、ASP、DOT NET 代码，它们运行得非常好，因此确保 python 应用程序也能正确运行。您必须更改默认应用程序。首先运行他们提供的默认应用程序并尝试更改。如果默认应用程序不起作用，那么也可以向谷歌打开错误报告。

# c# - 如何获得以编程方式创建的 NumericUpDown 的价值？

> ID：10413368
> 
> 赞同：-3
> 
> 时间：2012-05-02T12:04:19.740
> 
> 标签：c#

我有根据用户输入（1-5）创建多个 NumericUpDowns 的程序。我知道如何获得总价值，但如何获得每个 NumericUpDown 的价值。我试图使用 label1 对此进行测试，但出现 NullReferenceException 错误。

```
 NumericUpDown test= new NumericUpDown();
    test.Name = "mynum" + Convert.ToString(count2);
    numericUpDown.Add(test);
    System.Drawing.Point i = new System.Drawing.Point(8, 20+ i * 25);
    test.Location = i;
    test.Size = new System.Drawing.Size(50, 20);
    this.Controls.Add(test);
    test.ValueChanged += new EventHandler(mytotal); 
```

在这一行抛出 NullReferenceException 错误。

```
label1.Text = test.Controls["mynum0"].Text; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T12:25:23.660

```
 test.Name = "mynum" + Convert.ToString(count2); 
```

您将其命名为“mynum”加上一个数字。所以你不能用 test.Controls["test0"] 找回它。将 indexer 参数修复为“mynum0”或 Name 属性分配。

您遇到的下一个问题是 NumericUpDown 控件没有功能性 Text 属性。它使用 Value 代替，一个数字而不是字符串。因此，您需要将控件强制转换为 NumericUpDown 才能访问 Value 属性。

```
 var nud = this.Controls["mynum0"] as NumericUpDown;
 if (nud == null) throw new Exception("I can't do that Dave, it isn't there");
 label1.Text = nud.Value.ToString(); 
```

# ruby-on-rails-3 - How to display the image of second uploader of carrierwave

> ID：10413370
> 
> 赞同：0
> 
> 时间：2012-05-02T12:04:21.523
> 
> 标签：ruby-on-rails-3, upload, carrierwave

I am using Carrierwave to upload the imgae, i have used in one model, now i want to use carrierwave to upload images in other model within same app,

i have create uploader as,

```
$ rails g uploader image2
$ rails g migration add_image_to_products image2:string 
```

in model

```
attr_accessible :gallery_id, :name, :image2
mount_uploader :image2, ImageUploader 
```

it uploads the file i have check in the folder, but not able to display the image,

```
image_tag product.image_url.to_s 
```

Got this error

```
undefined method `image_url' for #<Product:0x49a3e68> 
```

**Note:** In the same app i have used the Carrierwave and able to display the image as wel for that model which is Category, but have problem with Product model, i am trying to using carrierwave to upload files for Product model..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T12:13:56.000

shouldn't it be

**image_tag product.image2_url.to_s**?

beacause you are using the uploader called **image2**!

# android - 我们如何知道我们的应用程序数据何时在 android 中被清除？

> ID：10413375
> 
> 赞同：2
> 
> 时间：2012-05-02T12:04:27.613
> 
> 标签：android, sqlite, data-storage

我正在开发一些应用程序，我将一些应用程序数据存储在 SQLite DB 中。如果任何用户清除数据，我的数据就会被清除。通过[How to disable the Clear Data button in Application info of Manage appliaction](https://stackoverflow.com/questions/6531173/how-to-disable-the-clear-data-button-in-application-info-of-manage-appliaction) 和 [http://groups.google.com/group/android-developers/browse_thread/thread/b1091f190f7356b7](http://groups.google.com/group/android-developers/browse_thread/thread/b1091f190f7356b7)这些链接，我发现我们无法禁用**清除数据**按钮，但是我的问题是有什么方法可以在应用程序中捕获此操作（清除数据）？android中是否有任何通知此操作的意图？

提前致谢

普什帕

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T12:18:12.303

您可以做一件事您可以在数据库中创建一个测试表并在其中插入一些数据。每次运行应用程序时，您都会检查表的值是否存在。如果数据存在，则表示 DB 值未重置，如果 Table 为空，则表明 DB 数据已清除并再次插入数据以供下次检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T13:08:01.107

一种可能的解决方法是将您的应用程序编程为在外部存储上使用 SQLite 数据库。SD卡等只需在您的SD或您想要的任何存储上创建一个文件夹，将.db文件放在该文件夹中并使用它而不是默认存储位置。默认情况下，SQLite 数据库存储在数据文件夹中（设备未植根，因此不知道数据文件夹中的位置），除非您植根设备，否则无法访问。

那里有使用这种技术的教程。请注意，当您删除应用程序时，数据可能会保留。不知道这是否可取。

# windows-8 - 退出时保存页面状态

> ID：10413387
> 
> 赞同：2
> 
> 时间：2012-05-02T12:05:16.637
> 
> 标签：windows-8, windows-runtime, winrt-xaml

假设我有两页，A 和 B。

用户可以修改页面 A 上的内容，然后导航到页面 B。当他在页面 B 上时，他单击“返回”按钮转到页面 A。之前所做的一切都丢失了。

有一种方法可以通过使用获得完全相同的状态

```
this.NavigationCacheMode = 
        Windows.UI.Xaml.Navigation.NavigationCacheMode.Enabled; 
```

但是有没有办法通过使用后退按钮来知道页面是否是第一次打开的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T12:23:56.357

是的：

```
protected override void OnNavigatedTo(NavigationEventArgs e)
{
  if (e.NavigationMode == NavigationMode.Back)
  {
    // LoadPreviousSate...
  }
} 
```

您还应该看看`ApplicationExecutionState`（`OnLaunched`在 App.xaml 中的事件）。如果您导航到页面 B，应用程序暂停，应用程序继续，用户导航到页面 A`NavigationMode`将会`New`！

# c# - 如何在 WPF 中从外部程序集加载资源

> ID：10413389
> 
> 赞同：0
> 
> 时间：2012-05-02T12:05:25.687
> 
> 标签：c#, wpf, uri

要创建一个 Uri，您通常会执行类似的操作

```
Uri uri = new Uri("pack://application:,,,/Localization/Texts.en-GB.xaml"); 
```

例如，您可以从这里创建一个 ResourceDictionary..

```
ResourceDictionary dictionary = new ResourceDictionary();             
dictionary.Source = uri; 
```

现在的问题是我如何对程序集（嵌入式资源）做同样的事情？

```
Assembly asmbly = Assembly.LoadFrom("this_is_in_another_place/texts.dll") 
```

这当然行不通。。

```
Uri uri = new Uri("/asmbly;component/Texts.en-GB.xaml"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T13:05:29.937

因为我无法让它与 Uri 一起工作，所以这是一个有效的解决方案。

```
 Assembly asmbly = Assembly.LoadFrom("this_is_in_another_place/texts.dll")

 ResourceDictionary dic;

 using (Stream s = asmbly.GetManifestResourceStream("Texts.en-GB.xaml"))
 {
    using (XmlReader reader = new XmlTextReader(s))
    {
        dic = (ResourceDictionary)XamlReader.Load(reader);
    }
 } 
```

# android - Android 获取会话发起协议 (SIP) 调用状态

> ID：10413396
> 
> 赞同：0
> 
> 时间：2012-05-02T12:05:55.930
> 
> 标签：android, sip

谁能为我提供一个捕获 SIP 呼叫的拨出呼叫状态的示例？

这是使用 TelephonyManager[示例](http://www.tutorialforandroid.com/2009/01/get-phone-state-when-someone-is-calling_22.html)执行此操作的链接。

但我想要类似的 sip 呼叫。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-12T15:01:28.390

从您的设备执行数据包捕获（根访问）并查看 SIP 消息，了解 SIP 呼叫流程将为您提供您正在查看的 SIP 消息的呼叫状态。

# c# - 某些事件在 C# 中的 Winform 中不起作用

> ID：10413398
> 
> 赞同：-1
> 
> 时间：2012-05-02T12:05:56.570
> 
> 标签：c#, events, static

我正在使用 YoutubeExtractor 的 dll .. videoDownloader_ProgressChanged 和 videoDownloader_DownloadFinished 事件在控制台应用程序中工作，但在 winform 中，它不起作用.. 我不明白为什么..

```
 private void btnStart_Click(object sender, EventArgs e)
    {

         string link = textBox1.Text;
         start(link);

    }

    static void start(string link)
    {
        IEnumerable<VideoInfo> videoInfos = DownloadUrlResolver.GetDownloadUrls(link);

        DownloadVideo(videoInfos);
    }

    private static void DownloadVideo(IEnumerable<VideoInfo> videoInfos)
    {
        VideoInfo video = videoInfos
            .First(info => info.VideoFormat == VideoFormat.Standard360);

        var videoDownloader = new VideoDownloader(video, Path.Combine("C:/Downloads", video.Title + video.VideoExtension));
        videoDownloader.DownloadFinished += new EventHandler(videoDownloader_DownloadFinished);

        videoDownloader.ProgressChanged += new EventHandler<ProgressEventArgs>(videoDownloader_ProgressChanged);
        videoDownloader.Execute();
    }

    static void videoDownloader_ProgressChanged(object sender, ProgressEventArgs e)
    {
                   //some code..
    }

    static void videoDownloader_DownloadFinished(object sender, EventArgs e)
    {
        //some code..

    } 
```

我的第二个问题是，我想在静态 videoDownloader_ProgressChanged 事件中访问表单控件。e.ProgressPercentage 参数给我下载视频的百分比。我想在标签中显示它。但是由于静态事件，我无法访问标签。我尝试使用委托，但没有任何改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T12:23:17.780

在更改/完成的处理程序中线程关闭 'videoDownloader.Execute()' 和 BeginInvoke()。

不要在 GUI 事件处理程序中调用需要永远（用计算机术语）的方法。如果花费的时间超过 50 毫秒，请将其关闭。任何网络事物，例如。里面有“YouTube”的东西，只是建立连接需要更长的时间！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T12:58:02.897

请将 Start() 和 DownloadVideo() 例程修改为实例方法。从它们和事件处理程序中删除“静态”关键字。

# c - C中图像接收和处理的并行操作

> ID：10413406
> 
> 赞同：0
> 
> 时间：2012-05-02T12:06:24.060
> 
> 标签：c, posix, parallel-processing

我正在 UBUNTU 平台上工作，在该平台上，我`UDP`从两个不同的相机（基于事件的捕获）接收图像（通过）并处理图像（3D 重建）。我想以这样一种方式执行此操作，即在图像接收操作正在进行时，图像处理操作应该并行启动。我知道我可以为这两个并行操作使用两个 posix 线程。但是我很困惑如何同步这两个线程，以便`process()`线程应该在线程接收到至少一对图像之后准确启动`receive()`。如果我让`process()`线程等待一个`mutex`条件（每次接收到一对图像时都会由`receive()`线程设置），接收将比处理快得多，并且`receive()`当线程正在处理单个图像对时，线程可能会多次设置条件`process()`。实现此操作的更好方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T12:12:11.997

将要处理的图像（或指向每个图像的指针，或有关信息的结构，无论您的机制是什么）放在接收线程中的线程安全队列中。将项目排入队列后，使用[信号量](http://linux.die.net/man/7/sem_overview)或[pthread_cond](http://linux.die.net/man/3/pthread_cond_wait)向处理线程发出信号。

处理线程应该阻塞直到它接收到 cond 信号并且应该只在队列为空时阻塞。当这个线程被解除阻塞时，它应该从队列中弹出一个图像并开始它的工作。当它完成处理时，它应该（在循环的顶部）决定是阻止还是处理另一个图像。如果队列为空，则阻塞。如果队列不为空，它会弹出一个图像并处理它。

# c# - 如何在 Windows 窗体中创建 WCF 服务

> ID：10413408
> 
> 赞同：0
> 
> 时间：2012-05-02T12:06:31.553
> 
> 标签：c#, winforms, wcf

我想创建一个 Windows 窗体应用程序，

但我希望这个寡妇表单应该托管 WCF 服务器，以便其他应用程序能够与这个 Windows 应用程序通信。

因此，我为 WCF 合同添加了 Windows 应用程序项目接口，并添加了实现该接口的类。

现在在我添加的 windows 窗体应用程序构造函数上

```
ServiceHost calcHost = new ServiceHost(typeof(Service));
calcHost.Open(); 
```

现在我需要实现 WCF 方法将能够与 windows 窗体交互。

我无法做到这一点。

我的问题是——我的架构是否正确，或者如果可以，我是否需要以不同的方式创建 WCF，WCF 应该如何与 Windows 窗体应用程序交互？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T12:38:17.273

这是一个包含代码的示例：[WCF 应用程序管理器示例](http://bresleveloper.blogspot.com/2012/05/wcf-application-manager-example.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T12:19:28.637

如果您希望调用 wcf 服务来更改 windows 窗体，那么我认为您需要将对窗体的引用传递给您的 WCF 服务，然后让您的服务方法在调用时调用窗体上的方法。

我认为您将需要创建自己的服务主机实现，以便可以将对表单的引用传递给主机创建的服务实例（或将您的服务托管为单例）。有关更多详细信息，请参阅[此问题](https://stackoverflow.com/questions/2454850/how-do-i-pass-values-to-the-constructor-on-my-wcf-service)。

# plone - 清理 Plone 的 CMFEditions 历史对象中的注释

> ID：10413409
> 
> 赞同：3
> 
> 时间：2012-05-02T12:06:38.837
> 
> 标签：plone, versioning

我正在尝试清理已卸载的 Plone 附加组件的内容注释 (IAnnotations)。我已经成功浏览了所有站点内容并删除了活动对象中的注释。

但是，CMFEditions / 版本控制保留了旧的内容副本，我不知道如何遍历它们并删除它们上面的所有错误注释。

除非我可以清理这些对象引用，否则在从构建中删除附加组件后，在编辑具有历史记录中缺少对象的注释的内容时，会开始出现 ZODB BrokenObject 错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T14:01:11.357

那很讨厌。插件应该只使用原始类型进行所有数据存储的另一个原因。

我有一些伪代码可能会让你接近：

```
 repo_tool = getToolByName(obj, "portal_repository")
    if not repo_tool.isVersionable(obj):
        return
    history = repo_tool.getHistoryMetadata(obj)
    if not history:
        return       
    length = history.getLength(countPurged=False)
    for i in xrange(length - 1, -1, -1):
        try:
            version = repo_tool.retrieve(obj, i)
            annotations = IAnnotations(version.object)
            del annotations[KEY_TO_DELETE]
        except POSKeyError:
            pass 
```

# python - 使用 pyqt4 和 python 导入简单程序

> ID：10413410
> 
> 赞同：0
> 
> 时间：2012-05-02T12:06:40.087
> 
> 标签：python, user-interface, import, pyqt, pyqt4

```
from PyQt4.QtGui import QApplication, QMainWindow, QPushButton, \
        QLabel, QVBoxLayout, QWidget
from PyQt4 import QtGui
import sys

import subprocess

class MainWindow1(QMainWindow):
    def __init__(self, parent=None):
        QMainWindow.__init__(self, parent) 
        button = QPushButton('NotePad')

        label = QLabel('MainWindow1')

        centralWidget = QWidget()
        vbox = QVBoxLayout(centralWidget)
        vbox.addWidget(label)
        vbox.addWidget(button)
        self.setCentralWidget(centralWidget)

        button.clicked.connect(self.LaunchNotepad)

    # Some code here - including import subprocess
    def LaunchNotepad(self):

        returncode = subprocess.call(['python', 'notepad.py'])

if __name__ == '__main__':
    app = QApplication(sys.argv)
    mainwindow1 = MainWindow1()
    mainwindow1.show()
    sys.exit(app.exec_()) 
```

该代码创建一个带有按钮的主窗口，当我按下按钮时，我希望它导入我的名为“记事本”的文件，（我认为它确实如此）但是它会打开它并立即关闭它。我需要能够使用程序记事本，直到我关闭它，在这种情况下它应该恢复到原始窗口。最终我将有 3 或 4 个按钮导入 3 或 4 个不同的程序

我认为记事本没有错误，因为当我只有“导入记事本”语句时，它运行得很好

注意：记事本文件只是一个简单的文本程序（很像 Windows 电脑上的“记事本”程序）

提前致谢

编辑这里是记事本代码：

```
import sys
import os
import datetime as dt
from PyQt4 import QtGui
from PyQt4 import *

class Notepad(QtGui.QMainWindow):
    def __init__(self):
        super(Notepad, self).__init__()
        self.initUI()

    def initUI(self):
        newAction = QtGui.QAction('New', self)
        newAction.setShortcut('Ctrl+N')
        newAction.setStatusTip('Create new file')
        newAction.triggered.connect(self.newFile)  
        saveAction = QtGui.QAction('Save', self)
        saveAction.setShortcut('Ctrl+S')
        saveAction.setStatusTip('Save current file')
        saveAction.triggered.connect(self.saveFile)
        openAction = QtGui.QAction('Open', self)
        openAction.setShortcut('Ctrl+O')
        openAction.setStatusTip('Open a file')
        openAction.triggered.connect(self.openFile)

        closeAction = QtGui.QAction('Close', self)
        closeAction.setShortcut('Ctrl+Q')
        closeAction.setStatusTip('Close Notepad')
        closeAction.triggered.connect(self.close)
        menubar = self.menuBar()

        fileMenu = menubar.addMenu('&File')
        fileMenu.addAction(newAction)
        fileMenu.addAction(saveAction)
        fileMenu.addAction(openAction)
        fileMenu.addAction(closeAction)

        #help menu
        helpMenu = menubar.addMenu('&Help')
        aboutAction = QtGui.QAction('About', self)
        aboutAction.setShortcut('Ctrl+A')
        aboutAction.setStatusTip('About')
        helpMenu.addAction(aboutAction)
        aboutAction.triggered.connect(self.about) 

        self.text = QtGui.QTextEdit(self)

        self.setCentralWidget(self.text)
        self.setGeometry(300,300,300,300)
        self.setWindowTitle('Notepad')

        self.show()
        self.statusBar()

    def newFile(self):
        self.text.clear()

    def saveFile(self):
        filename = QtGui.QFileDialog.getSaveFileName(self, 'Save File', os.getenv('HOME'))
        f = open(filename, 'w')
        filedata = self.text.toPlainText()
        f.write(filedata)
        f.close()

    def openFile(self):
        filename = QtGui.QFileDialog.getOpenFileName(self, 'Open File', os.getenv('HOME'))
        f = open(filename, 'r')
        filedata = f.read()
        self.text.setText(filedata)
        f.close()

        self.setGeometry(300,300,300,300)
        self.setWindowTitle('Notepad')
    self.show()
    def closeEvent(self, event):

        reply = QtGui.QMessageBox.question(self, 'Message',
            "Are you sure to quit?", QtGui.QMessageBox.Yes | 
            QtGui.QMessageBox.No, QtGui.QMessageBox.No)

        if reply == QtGui.QMessageBox.Yes:
            event.accept()
        else:
            event.ignore()
    def about(self, event):
        reply = QtGui.QMessageBox.question(self, 'About Task Manager',
            "This is a notepad todo list program written by craig murch")

        return Notepad

if __name__ == '__main__':
    app = QtGui.QApplication(sys.argv)
    notepad = Notepad()

    sys.exit(app.exec_()) 
```

编辑：上面的编辑代码现在确实希望我这样做，但是它也加载了我不想要的 cmd，我如何停止它加载 cmd？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T12:32:27.487

好吧，在你的记事本代码中，你有

```
sys.exit(app.exec_()) 
```

这将关闭*整个过程*。因此，如果您从父窗口导入它，那么是的，它应该关闭您的应用程序。

此外，无论您使用哪个 GUI 框架，在同一进程中混合主循环总是一个坏主意。相反，您应该使用`subprocess`来调用您的其他应用程序：

```
# Some code here - including import subprocess
import os
def LaunchNotepad(self):
    self.DoSomething() #Or whatever you want to do before your program launches
    returncode = subprocess.call(['pythonw', 'notepad.py'],
                                 stdout=open(os.devnull, 'w'),
                                 stderr=open(os.devnull, 'w'))
    self.ShowMe() #Won't run until notepad finishes
    if not returncode:
        self.ShowError("Notepad exited abnormally!") 
```

这是你可以做什么的一个非常基本的例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T12:31:16.927

乍一看，我不能说在类定义中使用它是行不通的：

```
app = QtGui.QApplication(sys.argv)
notepad = Notepad()

sys.exit(app.exec_()) 
```

那是你做的事情

```
if __name__ == '__main__':
    app = QtGui.QApplication(sys.argv)
    notepad = Notepad()
    notepad.show()  # call show here
    sys.exit(app.exec_()) 
```

不作为类定义的一部分。

并且具有`self.show()`inside`initUI`也不是最佳的，一个 gui 对象不应该默认显示自己，如果你想实例化一个组件然后将它添加到另一个组件，这是没有意义的。

# mysql - mysql查询列中的相等值

> ID：10413412
> 
> 赞同：0
> 
> 时间：2012-05-02T12:06:50.997
> 
> 标签：mysql

我有下表

```
| id | title    | parent |
------------------------
|  1 | example  |   0    |
|  2 | example2 |   2    |
   3   example3     3
   4   example4     2
   5   example5     2 
```

如何在标题字段的函数中进行查询以取回 parent_id 值相等的所有行。

`parent`示例：显示与匹配的行相同的所有行`title="example2"`。

应该回馈

```
2 | example2 | 2
4 | example4 | 2
5 | example5 | 2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T12:11:45.393

当您只有`title`as 参数并且想要所有与同一行相关的行时，`parent_id`您可以使用子查询：

```
SELECT * FROM tbl WHERE parent IN (SELECT parent FROM tbl WHERE title = "example2") 
```

或者您基本上可以使用[自](http://en.wikipedia.org/wiki/Join_%28SQL%29#Self-join)联接实现相同的目的：

```
SELECT related.* 
FROM tbl source
LEFT JOIN tbl related ON source.parent = related.parent
WHERE source.title = "example2" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T12:08:48.790

你的问题有点令人困惑：

如果您想要 parent 为 2 的结果，请使用（正如 mattytommo 建议的那样）：

```
 SELECT * FROM table
 WHERE parent = 2 
```

如果您想要 parent 等于 id 的结果，请使用：

```
SELECT * FROM table
WHERE id = parent 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T12:10:52.253

我想你是想说“给我所有与我的匹配行具有相同父 id 的行”，这将是这个查询：

```
select t2.*
from table t1
join table t2 on t2.parent = t1.parent
where t1.title = 'example2' 
```

# c# - 修改用于 WebChannelFactory 的接口

> ID：10413417
> 
> 赞同：0
> 
> 时间：2012-05-02T12:07:30.877
> 
> 标签：c#, .net, web-services, interface, webchannelfactory

如果我有一个服务器/客户端应用程序都引用相同的 DLL，该 DLL 包含用于 REST 服务器和用于`WebChannelFactory`引用 Web 服务器的接口，如果服务器接口获取并更新，旧客户端会发生什么情况？例如，应用程序的第一版通过以下界面推出：

```
[ServiceContract]
public interface ISampleInterface
{
    [OperationContract]
    [WebInvoke(UriTemplate = "/PutDevice", ResponseFormat = WebMessageFormat.Xml, RequestFormat = WebMessageFormat.Xml)]
    void PutDevice(Device device);
}

[DataContract(Namespace = "")]
public class Device
{
    [DataMember]
    public Guid id { get; set; }

    [DataMember]
    public string Name { get; set; }

    [DataMember]
    public string Description { get; set; }
} // End of Device 
```

这是 REST 服务用作合同的内容，代理将具有类似于以下的代码：

```
WebChannelFactory<ISampleInterface> client = new WebChannelFactory<IGridVisionService>(new Uri(targetHost));
ISampleInterface sampleInterface = client.CreateChannel();
sampleInterface.PutDevice(new Device() { id = Guid.Empty(), Name = "Test Device", Description = "Test Device Description" }); 
```

所以客户端应用程序已经部署到数百台计算机上，但我们意识到对于版本我们还希望客户端发送它的域，所以我们修改设备数据合约如下：

```
[DataContract(Namespace = "")]
public class Device
{
    [DataMember]
    public Guid id { get; set; }

    [DataMember]
    public string Name { get; set; }

    [DataMember]
    public string Domain { get; set; }

    [DataMember]
    public string Description { get; set; }
} // End of Device 
```

更新服务器很容易，但现在有数百个代理不知道域。处理这种情况的正确方法是什么？我唯一的想法是不使用 DataContract 而是`XElement`我可以手动解析的。然后添加登录到服务器来处理丢失域的情况，但这看起来很草率。有没有我忽略的更好的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T12:28:09.857

我能够自己测试这个。在我的客户端设备链接到一个不知道 Domain 参数的 dll 的情况下，方法调用仍然成功并且 Domain 参数只是 null。这是我希望的结果！

# c++ - auto_ptr 到普通指针的转换

> ID：10413418
> 
> 赞同：3
> 
> 时间：2012-05-02T12:07:34.110
> 
> 标签：c++, pointers, auto-ptr

我们能够将 std::auto_ptr 转换为普通指针吗？

```
 class Test
    {
     ......
    }

    Test* function()
    {
      std::auto_ptr<Test> test(new Test());

      return _____//TODO : need to convert this auto_ptr to Test*
    } 
```

是否可以将本地创建的 auto_ptr 指针转换为普通指针。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-02T12:09:39.740

使用[释放（）](http://www.cplusplus.com/reference/std/memory/auto_ptr/release/)

```
Test* function()
{
  std::auto_ptr<Test> test(new Test());

  return test.release()
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T12:09:35.880

> 是否可以将本地创建的 auto_ptr 指针转换为普通指针。

是的：

```
return test.release(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T12:10:23.060

见 std::auto_ptr 的释放方法：[http ://www.cplusplus.com/reference/std/memory/auto_ptr/release/](http://www.cplusplus.com/reference/std/memory/auto_ptr/release/)

# android - 预期的 ,但是是

> ID：10413424
> 
> 赞同：0
> 
> 时间：2012-05-02T12:07:54.260
> 
> 标签：android, junit

我有一个小型应用程序，可以将温度从*摄氏*温度转换为*华氏温度*，反之亦然。我有两个 RadioButtons 来选择温度，即摄氏度或华氏度，一个 Button 和一个 EditText 。我创建了一个`Junit`来测试应用程序。
这是我的测试代码：

```
float temparature=102;
Float expected=(float) 0;
solo.enterText(0,String.valueOf(temparature));
solo.clickOnButton("calculate");

         if(solo.isRadioButtonChecked(0)){
            expected=((temparature-32)*5/9);
            }
         else if(solo.isRadioButtonChecked(1)){
          expected=((temparature*9)/5)+32;
                }

         String temp=expected+"";

         assertEquals(true,solo.searchEditText(temp));  

} 
```

当我运行上述测试时，测试运行成功但失败说：`expected<true>but was <false>`. 我认为值四舍五入存在一些问题。请让我知道究竟是什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T12:15:29.623

你有 String temp=expected+""; 但预期是 object(Float) 类型 - 预期为 Float。所以尝试expected.toString() 或改变Float expected 为float expected。并尝试调试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T10:47:38.273

预期的值可能类似于 102.0000001，它不会匹配单独的文本，它应该是 102（如果我正确理解代码）。

您应该遵循标准浮点比较技术，而不是比较字符串。

[http://junit.sourceforge.net/javadoc/org/junit/Assert.html#assertEquals%28java.lang.String,%20double,%20double,%20double%29](http://junit.sourceforge.net/javadoc/org/junit/Assert.html#assertEquals%28java.lang.String,%20double,%20double,%20double%29)

所以你会使用类似的东西：

```
assertEquals("The converted temperature didn't match.", temparature, expected, 0.001); 
```

总体而言，尚不清楚您的测试用例试图准确验证什么。而且您的帖子的标题并未表明有关该问题的任何内容。

# database - Opa：致命错误：异常 Sys_error("Cannot allocate memory")

> ID：10413430
> 
> 赞同：0
> 
> 时间：2012-05-02T12:08:17.683
> 
> 标签：database, opa

当我重新启动我的 opa 应用程序时，我收到以下错误：

```
Fatal error: exception Sys_error("Cannot allocate memory") 
```

我必须删除几乎为空的数据库才能重新启动应用程序。

请注意，我仅在我的 ovh 共享服务器上观察到此错误。

任何想法 ？我正在使用 opa 0.9.2 build 1591

# iphone - 检查iphone中的网络可达性后应用程序崩溃？

> ID：10413433
> 
> 赞同：4
> 
> 时间：2012-05-02T12:08:37.960
> 
> 标签：iphone, mpmovieplayercontroller, avaudiosession

我有一个 mpmovieplayercontroller 播放在线音乐和 avaudiosession 在后台播放相同的音乐，当第一次应用程序在没有网络访问的情况下启动时，通常我显示“没有互联网连接”，当我尝试连接到互联网并播放它后显示错误

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'An AVPlayerItem cannot be associated with more than one instance of AVPlayer' 
```

我的代码在这里

```
static MPMoviePlayerController *player=nil;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) 
    {
        // Custom initialization

        [MainViewController  stopStreaming];

        player = [[MPMoviePlayerController alloc] initWithContentURL:[NSURL URLWithString:@"http://159.253.145.180:7104"]];
        player.movieSourceType = MPMovieSourceTypeStreaming;
        player.view.hidden = YES;
        [self.view addSubview:player.view];
        [player prepareToPlay];
        [player play];
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    NSError *setCategoryErr = nil;
    NSError *activationErr  = nil;
    [[AVAudioSession sharedInstance] setCategory: AVAudioSessionCategoryPlayback error: &setCategoryErr];
    [[AVAudioSession sharedInstance] setActive: YES error: &activationErr];
    [[UIApplication sharedApplication] beginReceivingRemoteControlEvents];
    UIBackgroundTaskIdentifier newTaskId = UIBackgroundTaskInvalid;
    newTaskId = [[UIApplication sharedApplication] beginBackgroundTaskWithExpirationHandler:NULL];

    Reachability* reachabile = [Reachability reachabilityWithHostName:@"www.apple.com"];
    NetworkStatus remoteHostStatus = [reachabile currentReachabilityStatus];

    if(remoteHostStatus == NotReachable) 
    {
        NSLog(@"not reachable");
        UIAlertView *notReachableAlert=[[UIAlertView alloc]initWithTitle:@"NO INTERNET CONNECTION" message:@"This Application Need Internet To Run" delegate:self cancelButtonTitle:@"Okay Buddy" otherButtonTitles: nil];
        notReachableAlert.delegate=self;
        [notReachableAlert show];
        [notReachableAlert release];
    }

    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(moviePlayerPlaybackStateDidChange:) name:MPMoviePlayerPlaybackStateDidChangeNotification object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(moviePlayerLoadStateChanged:) name:MPMoviePlayerLoadStateDidChangeNotification object:player];

    MPVolumeView *volumeView = [[[MPVolumeView alloc] initWithFrame:CGRectMake(22, 320, 200, 15)] autorelease];
    volumeView.center = CGPointMake(152,372);
    [volumeView sizeToFit];
    [self.view addSubview:volumeView];    // Do any additional setup after loading the view from its nib.
} 
```

连接到互联网后点击播放按钮时应用程序崩溃，有什么解决办法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-23T13:33:25.757

我有同样的问题。对我有用的解决方案是删除指令

```
player.movieSourceType = MPMovieSourceTypeStreaming; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T12:14:38.203

我认为这是由于静态播放器。尝试使用movieplayer的属性

采用：

```
@property (nonatomic,retain) MPMoviePlayerController *player; 
```

在实施中：

```
@synthesize player = _player; 
```

在初始化中：

```
MPMoviePlayerController *plyr = [MPMoviePlayerController alloc] init];
self.player = plyr;
[plyr relaease]; 
```

在您的代码中

```
[controller setContentURL:movieURL]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T12:15:01.260

我认为这可能是由于玩家已经存在。

尝试添加如下内容：

```
if (player != nil) {
    [player release];
    player = nil; //i prefer to do both, just to be sure.
} 
```

放在后面

```
[MainViewController  stopStreaming]; 
```

和之前

```
player = [[MPMoviePlayerController alloc] initWithContentURL:[NSURL URLWithString:@"http://159.253.145.180:7104"]]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T12:17:00.420

我不确定这是否正确，但如果您检查过链接

[MPMoviewPlayerController 类参考](http://developer.apple.com/library/ios/#documentation/mediaplayer/reference/MPMoviePlayerController_Class/Reference/Reference.html)

其中包括来自苹果的代码：

```
MPMoviePlayerController *player =
        [[MPMoviePlayerController alloc] initWithContentURL: myURL];
[player prepareToPlay];
[player.view setFrame: myView.bounds];  // player's frame must match parent's
[myView addSubview: player.view];
// ...
[player play]; 
```

也许您需要先prepareToPlay，然后将其作为子视图添加到您的视图中。

我不确定，但希望这会有所帮助..

# iphone - 字符串到 NSDate 格式的转换

> ID：10413460
> 
> 赞同：0
> 
> 时间：2012-05-02T12:09:59.727
> 
> 标签：iphone, nsdate

我想将以下字符串转换为 NSDate 格式

2012-04-29T08:20:04Z

请帮我。我怎么能做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T12:11:00.930

试试这个：

```
-(NSDate *)dateFromString:(NSString *)string
{
NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
NSLocale *locale = [[NSLocale alloc] initWithLocaleIdentifier:@"en_US"];
[dateFormat setLocale:locale];
[dateFormat setDateFormat:@"yyyy-MM-dd HH:mm:ss z"];

NSDate *date1 = [dateFormat dateFromString:string];  
if(!date1) date1= [NSDate date];
[dateFormat release];
[locale release];

return date1;
} 
```

有帮助就告诉我！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T12:13:42.120

这是一个可能的相同问题和一些解决方案：

[NSString 到 NSDate](https://stackoverflow.com/questions/1353081/nsstring-to-nsdate)

您可以制作自己的格式以满足您的要求..

希望这可以帮助 ..

# c# - 我想要一个替代单例的设计

> ID：10413463
> 
> 赞同：9
> 
> 时间：2012-05-02T12:10:12.730
> 
> 标签：c#, wpf, singleton

我意识到有很多关于单例以及为什么不好的讨论。这不是这个问题的目的。我了解单身人士的缺点。

我有一个场景，使用单例很容易并且看起来很有意义。但是，我想要一个替代方案，它可以在没有大量开销的情况下完成我所需要的。

我们的应用程序设计为客户端，通常在现场的笔记本电脑上运行并与后端服务器通信。我们在主应用程序的底部有一个状态栏。它包含一些显示各种雕像和信息的文本区域以及几个图标。图标更改其图像以指示其状态。例如指示是否连接的 GPS 图标以及错误状态。

我们的主类称为 MobileMain。它拥有状态栏区域并负责创建它。然后我们有一个 StatusBarManager 类。StatusBarManager 目前是一个静态类，但也可以是一个单例。这是课程的开始。

```
public static class StatusBarManager
{
    static ScreenStatusBar StatusBar;

    /// <summary>
    /// Creates the status bar that it manages and returns it.
    /// </summary>
    public static ScreenStatusBar CreateStatusBar()
    {
        StatusBar = new ScreenStatusBar();
        return StatusBar;
    } 
```

MobileMain 向 StatusBarManager 请求 StatusBar。然后它使用状态栏。没有其他类看到 StatusBar，只有 StatusBarManager。

状态栏的更新几乎可以来自应用程序中的任何地方。大约有 20 个类可以更新状态栏上的文本区域，还有其他类可以更新图标状态。

只有一个 StatusBar 和一个 StatusBarManager。

有什么更好的实施建议吗？

我的一些想法：

使 StatusBarManager 成为一个实例类。在我的 MobileMain 类中，保留 StatusBarManager 类的静态公共实例。然后要进行状态栏更新，您将调用 MobileMain.StatusBarManager.SetInformationText 或管理器的其他方法。StatusBarManager 不会是单例，但 MobileMain 只会创建它的静态实例。这里的问题是 MobileMain 现在有一个 StatusBar 和一个 StatusBarManager，它只管理它拥有的 StatusBar。仍然有一个全局可用的 StatusBarManager 静态实例，只是一个不同的所有者。

另一个想法是使用类似 EventEggregator 类的东西。我从来没有用过，但读过它们。我想这个概念是它将是一个全球可用的类。在每个想要更新状态栏的类中，它都会发布一个 StatusBarUpdate 事件。StatusBarManager 将是唯一订阅 StatusBarUpdate 事件的类，并接收所有通知。我已经阅读过，如果您在清理对象时不小心取消订阅事件，那么这种方法可能会导致泄漏。这种方法值得研究吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T12:21:45.223

我更喜欢包含您的对象的静态类。因此，您可以访问的对象数量取决于您的静态类提供的接口。只要您的应用程序仍然可以扩展，静态就不错。

单例的另一个很好的替代方案是 Monostate 模式，其中您有一个实现私有静态字段的类来表示“单例”行为。

参见：
[Monostate](http://c2.com/cgi/wiki?MonostatePattern)
[Monostate vs. Singleton](https://stackoverflow.com/questions/887317/monostate-vs-singleton)

**更新：** 它经常帮助我牢记 REST 之类的 api，即使对于内部程序结构也是如此。在引发条件和无限循环（更新 -> 事件 -> 更新 -> ...）方面，很难控制一个从任何地方更新并向每个人发送通知的类

构建一个（静态或非静态）状态栏界面，您可以在需要的地方访问它。通过一个静态类，您可以访问您的状态栏界面，或者如果您使用此类技术，则通过依赖注入（不推荐用于较小的项目）。对状态栏界面的每次调用都必须独立于状态栏可能引发的任何事件，以避免引发条件的进一步问题。将状态栏界面想象成一个网站，可以从程序的其他部分调用它来推送和拉取信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T07:17:47.203

是否拥有 StatusBar 类或 StatusBarManager 类并不是什么大问题。但是让你的应用程序中的许多类都知道 StatusBars 和 StatusBarManagers 是一个坏主意，它会导致强耦合，并且有朝一日可能会很痛苦。

如何？

想象一下，当前向状态栏报告状态的组件必须在另一个应用程序中重用——使用文本控制台报告状态？- 向多个地方报告状态？或 - 根本不报告状态！

最佳选择：-事件监听。在您的类上公开一个 Status Changed 事件（您可以使用回调），或者在您的类共有的现有共享资源上公开。其他方，例如您的状态栏，可以订阅该事件。并且应该在不再需要/有效的订阅时取消订阅，以防止泄漏，正如您所提到的！

- 由于您已标记 WPF，对于 WPF，具有依赖属性“StatusText”，可能看起来是另一个诱人的选择，当您有多个状态属性时，使用这种方法，您需要一种方法来确定哪个最能告诉您现在需要在您的状态栏上显示有趣的状态！这可能是绑定、多重绑定（blech、complexity）或依赖属性更改事件处理程序。

但是 - 我建议您尽可能将 DependencyObjects 和 DependencyProperties 限制在您的 UI 层。原因是它们隐式地依赖于 UI 线程上的 Dispatcher，因此无法轻松适应非 UI 杂务。

由于您的应用程序有许多不同的部分，您可能还会发现将这两者结合起来使用一些地方和另一个地方是合理的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T13:38:05.307

您可以简单地使用该`Observer`模式并将其`StatusBar`作为侦听器添加到您的 20 个对象中。这将消除单例并更好地遵循 SRP 和 DIP，但您必须考虑是否值得付出努力。如果间接增加了太多的复杂性并且依赖注入是不可能的，那么单例可能会更好。

```
public class StatusBar implements StatusListener {
}

public interface StatusListener {
   public statusChanged(String newStatus)
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T15:29:14.907

类将隐式依赖于任何使用单例，并显式依赖于构造函数中的任何参数。我建议向单例添加一个接口，因此只需将所需的方法公开给使用 IStatusBar 的类。这是更多的代码，但会简化单元测试。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-02T13:16:25.650

在不了解更多应用程序架构的情况下很难给出建议，但也许您应该考虑依赖注入。例如，将一个 StatusBar 实例传递给每个直接使用它的类的构造函数。

# sql-server - 带有 Windows 身份验证的 Mono 到 SQL Server

> ID：10413464
> 
> 赞同：10
> 
> 时间：2012-05-02T12:10:15.600
> 
> 标签：sql-server, mono, windows-authentication

**快的...**

如何在连接字符串中*没有*用户名+密码的情况下使用在 Windows 上运行的[Mono SQL 客户端对 SQL Server 进行 Windows 身份验证？](http://www.mono-project.com/SQL_Client)

 ***更多的...**

*   我们必须使用 Mono 来支持我们应用程序的某些组件的多个平台
    这是我们无法更改的外部限制

*   **我们将仅**在 Windows 上运行访问数据库的组件
    Mono SQL 客户端的可移植性/与操作系统无关的特性没有任何价值

也就是说，在非 Windows 上运行的任何组件都不会访问 SQL Server 数据库

*   该进程在某些 Windows 用户（真实用户、服务帐户等）下运行

*   嵌入用户名和密码是一件*坏事*
    无论您来自哪个角度

那么，我们如何让 Mono SQL 客户端读取运行该进程的用户的 NT 登录令牌并将其传递给 SQL Server？就像 MS .net 一样？

*   是否存在未充分记录的标志或设置

*   我们需要实现我们自己的扩展吗？
    如果是这样，我们*真的*是第一个想要这样做的人吗？

还有 5 个其他问题（当前）标记为 Mono 和 SQL-Server：他们没有回答这个问题......

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-07T18:37:22.347

这并不像听起来那么容易实现。我相信你知道，[Mono SqlClient](http://www.mono-project.com/SQLClient)支持 NT 身份验证：

> 具有 NT 身份验证的连接字符串格式：Server=hostname;Database=databaseName;User ID=windowsDomain\windowsUserid;Password=windowsPassword;Integrated Security=SSPI

但是，当然，您想要更简单的形式`Integrated Security=SSPI`并让 NT 身份验证握手使用当前进程凭据。这就是问题所在。虽然检索当前进程用户名（身份）很简单，但进程不可能发现它自己的凭据*密码*。在进行 NT 身份验证时，Windows 进程实际上并不进行身份验证，而是要求[Locas 安全机构](http://msdn.microsoft.com/en-us/library/windows/desktop/ms721592(v=vs.85).aspx#_security_local_security_authority_gly)（又名 LSASS.EXE，琐事：不要将调试器附加到它；））来验证此进程。这意味着任何想要实现相同功能的库都必须使用相同的协议，即。要求 LSA 对其进行身份验证。对于好奇的人来说，实际的细节是按 , 的顺序排列的，[`AcquireCredentialHandle`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa374713(v=vs.85).aspx)如使用[SSPI中所述](http://msdn.microsoft.com/en-us/library/windows/desktop/aa380535(v=vs.85).aspx)[`InitializeSecurityContext`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa375507(v=vs.85).aspx)[`AcceptSecurityContext`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa374704(v=vs.85).aspx). 我没有研究 SqlClient 的单声道源，但我很确定他们使用一些[GSS-API](http://msdn.microsoft.com/en-us/library/ff842418%28v=prot.10%29.aspx)库进行身份验证，*而不是*SSPI。因此，根据定义，他们需要知道密码，因为他们将自己进行 Kerberos 交换*，*而不是要求 LSA 代表他们进行。

正如你所知道的，这是我的猜测和更多的猜测，但如果听到不同的故事，我会感到惊讶。虽然分叉或修补 Mono.Data.Tds 并修改身份验证实现以使用 SSPI 而不是 GSS 当然是可能的，但根据定义，这将是一个不可移植的 Windows 特定实现。*考虑到 Mono 的第一个吸引点不是*特定于 Windows的，我猜想它没有什么动力。恐怕您将不得不自己实施它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-14T12:32:55.430

使用[NTLM 授权代理服务器](http://ntlmaps.sourceforge.net)并通过代理连接到 SQL Server。*

# java - 安排消息驱动 bean 在特定时间访问队列？

> ID：10413467
> 
> 赞同：2
> 
> 时间：2012-05-02T12:10:17.700
> 
> 标签：java, jakarta-ee, ejb, jms

1）**你能安排一个消息驱动的bean只在特定时间访问一个队列吗？**

例如，用户有两个联系选项 - 上午 9 点到下午 5 点和下午 5 点到 10 点之间。我想要两个 MDB，一个只在上午 9 点到下午 5 点活跃，另一个在下午 3 点到晚上 10 点活跃。

两个队列全天都有消息发送给他们，但我只想在特定时间处理它们。

理想情况下**@Schedule**会起作用，但不幸的是它不起作用。

使用 Glassfish 3.1.2 和 ActiveMQ 5.5.1 但我很确定这不是特定于实现的问题。

**编辑 1**

代码

```
@MessageDriven(
    activationConfig = {
        @ActivationConfigProperty(propertyName = "destinationType", propertyValue = "javax.jms.Queue"),
        @ActivationConfigProperty(propertyName = "destination", propertyValue = "jms/queue/amqmsg")
})
public class ExampleMessageBean implements MessageListener {

@Schedule(second="*", minute="*", hour="9-17", persistent = false)
public void onMessage(Message message) {
    try {
        System.out.println("We've received a message: " + message.getJMSMessageID());

        System.out.println("\n\n Message\n\n" + message);

    } catch (JMSException e) {
        e.printStackTrace();
    }
} 
```

}

部署时出错。我认为@Schedule 不可能以这种方式使用。任何人都可以确认吗？

```
SEVERE: Exception while invoking class org.glassfish.ejb.startup.EjbDeployer load method java.lang.RuntimeException: EJB Container initialization error
at org.glassfish.ejb.startup.EjbApplication.loadContainers(EjbApplication.java:242)
at org.glassfish.ejb.startup.EjbDeployer.load(EjbDeployer.java:299)
at org.glassfish.ejb.startup.EjbDeployer.load(EjbDeployer.java:105)
at org.glassfish.internal.data.ModuleInfo.load(ModuleInfo.java:186)
at org.glassfish.internal.data.ApplicationInfo.load(ApplicationInfo.java:264)
at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:460)
at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:389)
at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:348)
at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)
at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085)
at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95)
at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)
at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1259)
at com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:461)
at com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:212)
at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179)
at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
at com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354)
at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
at java.lang.Thread.run(Thread.java:662)
 Caused by: javax.ejb.EJBException: Invalid @Timeout or @Schedule signature for: public void com.name.mdb.ExampleMessageBean.onMessage(javax.jms.Message) @Timeout or @Schedule method must return void and be a no-arg method or take a single javax.ejb.Timer param
at com.sun.ejb.containers.BaseContainer.processEjbTimeoutMethod(BaseContainer.java:2219)
at com.sun.ejb.containers.BaseContainer.<init>(BaseContainer.java:743)
at com.sun.ejb.containers.MessageBeanContainer.<init>(MessageBeanContainer.java:142)
at com.sun.ejb.containers.ContainerFactoryImpl.createContainer(ContainerFactoryImpl.java:121)
at org.glassfish.ejb.startup.EjbApplication.loadContainers(EjbApplication.java:230)
... 33 more

   SEVERE: Exception while loading the app
   INFO: No timers to be deleted for id: 87558812344647680
   SEVERE: Exception while loading the app : EJB Container initialization error
   javax.ejb.EJBException: Invalid @Timeout or @Schedule signature for: public void com.test.mdb.ExampleMessageBean.onMessage(javax.jms.Message) @Timeout or @Schedule method must return void and be a no-arg method or take a single javax.ejb.Timer param
at com.sun.ejb.containers.BaseContainer.processEjbTimeoutMethod(BaseContainer.java:2219)
at com.sun.ejb.containers.BaseContainer.<init>(BaseContainer.java:743)
at com.sun.ejb.containers.MessageBeanContainer.<init>(MessageBeanContainer.java:142)
at com.sun.ejb.containers.ContainerFactoryImpl.createContainer(ContainerFactoryImpl.java:121)
at org.glassfish.ejb.startup.EjbApplication.loadContainers(EjbApplication.java:230)
at org.glassfish.ejb.startup.EjbDeployer.load(EjbDeployer.java:299)
at org.glassfish.ejb.startup.EjbDeployer.load(EjbDeployer.java:105)
at org.glassfish.internal.data.ModuleInfo.load(ModuleInfo.java:186)
at org.glassfish.internal.data.ApplicationInfo.load(ApplicationInfo.java:264)
at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:460)
at com.sun.enterprise.v3.server.ApplicationLifecycle.deploy(ApplicationLifecycle.java:240)
at org.glassfish.deployment.admin.DeployCommand.execute(DeployCommand.java:389)
at com.sun.enterprise.v3.admin.CommandRunnerImpl$1.execute(CommandRunnerImpl.java:348)
at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:363)
at com.sun.enterprise.v3.admin.CommandRunnerImpl.doCommand(CommandRunnerImpl.java:1085)
at com.sun.enterprise.v3.admin.CommandRunnerImpl.access$1200(CommandRunnerImpl.java:95)
at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1291)
at com.sun.enterprise.v3.admin.CommandRunnerImpl$ExecutionContext.execute(CommandRunnerImpl.java:1259)
at com.sun.enterprise.v3.admin.AdminAdapter.doCommand(AdminAdapter.java:461)
at com.sun.enterprise.v3.admin.AdminAdapter.service(AdminAdapter.java:212)
at com.sun.grizzly.tcp.http11.GrizzlyAdapter.service(GrizzlyAdapter.java:179)
at com.sun.enterprise.v3.server.HK2Dispatcher.dispath(HK2Dispatcher.java:117)
at com.sun.enterprise.v3.services.impl.ContainerMapper$Hk2DispatcherCallable.call(ContainerMapper.java:354)
at com.sun.enterprise.v3.services.impl.ContainerMapper.service(ContainerMapper.java:195)
at com.sun.grizzly.http.ProcessorTask.invokeAdapter(ProcessorTask.java:849)
at com.sun.grizzly.http.ProcessorTask.doProcess(ProcessorTask.java:746)
at com.sun.grizzly.http.ProcessorTask.process(ProcessorTask.java:1045)
at com.sun.grizzly.http.DefaultProtocolFilter.execute(DefaultProtocolFilter.java:228)
at com.sun.grizzly.DefaultProtocolChain.executeProtocolFilter(DefaultProtocolChain.java:137)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:104)
at com.sun.grizzly.DefaultProtocolChain.execute(DefaultProtocolChain.java:90)
at com.sun.grizzly.http.HttpProtocolChain.execute(HttpProtocolChain.java:79)
at com.sun.grizzly.ProtocolChainContextTask.doCall(ProtocolChainContextTask.java:54)
at com.sun.grizzly.SelectionKeyContextTask.call(SelectionKeyContextTask.java:59)
at com.sun.grizzly.ContextTask.run(ContextTask.java:71)
at com.sun.grizzly.util.AbstractThreadPool$Worker.doWork(AbstractThreadPool.java:532)
at com.sun.grizzly.util.AbstractThreadPool$Worker.run(AbstractThreadPool.java:513)
at java.lang.Thread.run(Thread.java:662) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T12:58:52.923

时间表不喜欢在具有消息参数的方法上被调用。它怎么会知道这个说法。

只需将项目添加到队列并单独处理即可。

```
@MessageDriven(
    activationConfig = {
        @ActivationConfigProperty(propertyName = "destinationType", propertyValue = "javax.jms.Queue"),
        @ActivationConfigProperty(propertyName = "destination", propertyValue = "jms/queue/amqmsg")
})
public class ExampleMessageBean implements MessageListener {

private BlockingQueue<Message> queue = new ArrayBlockingQueue<Message>() ; 

@Schedule(second="*", minute="*", hour="9-17", persistent = false)
public void process()
{
    //process queue here. 
}
public void onMessage(Message message) {
    try {
        System.out.println("We've received a message: " + message.getJMSMessageID());
        queue.add(message); 
        System.out.println("\n\n Message\n\n" + message);

    } catch (JMSException e) {
        e.printStackTrace();
    }
} 
```

# android - android：在画布中缩放/平移

> ID：10413481
> 
> 赞同：1
> 
> 时间：2012-05-02T12:11:08.117
> 
> 标签：android, opengl-es, zooming

我想在画布中缩放/平移。画布包含不同的对象、图像……我找到了一些放大地图、图像甚至网络的示例，但仍然不知道如何缩放/平移到包含多个不同对象的完整画布中。

请考虑我是 android 和 opengl 的新手。如果您给我一个可以运行的示例，我将不胜感激。

# python - 鸭子类型和类方法（或者，如何使用类和实例中的方法？）

> ID：10413488
> 
> 赞同：2
> 
> 时间：2012-05-02T12:11:31.563
> 
> 标签：python, class-method, duck-typing

我有一些代码，我想交替传递实例或类。我在该代码中要做的就是调用一个我希望类和实例都具有的方法（`go()`下面示例中的方法）。

不幸的是，我不能创建一个与常规方法同名的类方法......见下面的例子。我最初预计第二次调用会产生一个`a`而不是一个`b`.

关于如何实现这一目标的任何建议？

```
Type "help", "copyright", "credits" or "license" for more information.
>>> class A(object):
...     def go(self):
...             print "a"
...     @classmethod
...     def go(cls):
...             print "b"
... 
>>> a=A()
>>> a.go()
b
>>> A.go()
b 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T12:18:59.277

您可以使用特制`__get__()`方法创建自己的方法类型。

在这种方法中，您可以执行以下操作：

```
class combimethod(object):
    def __init__(self, func):
        self._func = func
    def classmethod(self, func):
        self._classfunc = classmethod(func)
        return self
    def __get__(self, instance, owner):
        if instance is None:
            return self._classfunc.__get__(instance, owner)
        else:
            return self._func.__get__(instance, owner)

class A(object):
    @combimethod
    def go(self):
        print "instance", self
    @go.classmethod
    def go(cls):
        print "class", cls

a=A()
print "i:",
a.go()
print "c:",
A.go() 
```

注意：上面的测试不是很彻底，但似乎有效。尽管如此，它应该被视为一种“接近解决方案的伪代码”，而不是一种解决方案。它应该让你知道如何实现你的目标。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T12:29:09.957

考虑重用`classinstancemethod`来自formencode 的装饰器。

[https://bitbucket.org/formencode/official-formencode/src/06d52c5b33c9/formencode/declarative.py](https://bitbucket.org/formencode/official-formencode/src/06d52c5b33c9/formencode/declarative.py)

```
class classinstancemethod(object):
    """
    Acts like a class method when called from a class, like an
    instance method when called by an instance.  The method should
    take two arguments, 'self' and 'cls'; one of these will be None
    depending on how the method was called.
    """

    def __init__(self, func):
        self.func = func

    def __get__(self, obj, type=None):
        return _methodwrapper(self.func, obj=obj, type=type)

class _methodwrapper(object):

    def __init__(self, func, obj, type):
        self.func = func
        self.obj = obj
        self.type = type

    def __call__(self, *args, **kw):
        assert 'self' not in kw and 'cls' not in kw, (
            "You cannot use 'self' or 'cls' arguments to a "
            "classinstancemethod")
        return self.func(*((self.obj, self.type) + args), **kw)

    def __repr__(self):
        if self.obj is None:
            return ('<bound class method %s.%s>'
                    % (self.type.__name__, self.func.func_name))
        else:
            return ('<bound method %s.%s of %r>'
                    % (self.type.__name__, self.func.func_name, self.obj)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T12:14:15.753

怎么样：

```
import inspect

class A(object):
   @staticmethod
   def go(obj):
      if inspect.isclass(obj):
         print 'class'
      else:
         print 'instance'

A.go(int) # class
A.go(1)   # instance
A.go(A)   # class
A.go(A()) # instance 
```

# asp.net - 回发后未选择单选按钮

> ID：10413489
> 
> 赞同：1
> 
> 时间：2012-05-02T12:11:33.760
> 
> 标签：asp.net, webforms, postback

我在转发器中有一个项目模板：

```
 <ItemTemplate>
        <li>
            <input type="radio" 
                   value="<%# GetAssetId((Guid) (Container.DataItem)) %>" 
                   name="AssetId" 
                   <%# SelectAsset((Guid) Container.DataItem) %> />

        </li>
    </ItemTemplate> 
```

我有一个比较 id 并决定是否检查单选按钮的方法。

```
protected string SelectAsset(Guid uniqueId)
{
    if (uniqueId == GetSomeId()) 
        return "checked=\"checked\"";

    return string.Empty;
} 
```

`SelectAsset`被击中，但它没有在回帖上选择单选按钮，但如果我只是刷新页面，它确实有效。我在这里做错了什么？

在这里回答：[刷新后如何显示“选定的单选按钮”？](https://stackoverflow.com/questions/4954265/how-to-display-selected-radio-button-after-refresh)说不可能实现，真的是这样吗？

谢谢

**更新**

如果简单控件没有 runat 属性，则视图状态似乎不可用。我已经通过使用自定义 GroupRadioButton 控件解决了这个问题。感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T13:01:08.537

我建议使用 RadioButtonList：

**页面代码**

```
<asp:RadioButtonList RepeatLayout="UnorderedList" OnSelectedIndexChanged="IndexChanged" AutoPostBack="true" ID="RadioRepeater" runat="server" />

<asp:Label ID="SelectedRadioLabel" runat="server" /> 
```

**代码背后**

```
if (!Page.IsPostBack)
{
    /* example adds items manually 
        - you could iterate your datasource here as well */
    this.RadioRepeater.Items.Add(new ListItem("Foo"));
    this.RadioRepeater.Items.Add(new ListItem("Bar"));
    this.RadioRepeater.Items.Add(new ListItem("Baz"));

    this.RadioRepeater.SelectedIndex = this.RadioRepeater.Items.IndexOf(new ListItem("Bar"));
    this.RadioRepeater.DataBind();
}

protected void IndexChanged(object sender, EventArgs e)
{
    this.SelectedRadioLabel.Text = string.Format("Selected Item Text: {0}", this.RadioRepeater.SelectedItem.Text);
} 
```

我假设您只需要选择一项。

* * *

如评论中所述，它甚至可以访问事件处理程序`SelectedItem`中的：`Page_Load`

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!Page.IsPostBack)
    {
        // previous code omitted
    }
    else
    {
        string foo = this.RadioRepeater.SelectedItem.Text;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-21T15:29:21.560

如果您在运行时动态创建所有控件（直接从代码中），那么情况会有所不同。这是我使用的代码：

**页面代码**

```
<form id="form1" runat="server">
</form> 
```

**代码背后**

```
 protected void Page_Load(object sender, EventArgs e)
    {
        RadioButtonList rbl = new RadioButtonList();
        rbl.AutoPostBack = true;
        rbl.SelectedIndexChanged += rbl_SelectedIndexChanged;

        rbl.Items.Add("All");

        // generate your dynamic radio buttons here
        for (int i = 0; i<5; i++)
        {
            rbl.Items.Add(string.Format("Dynamic{0}", i));
        }
        form1.Controls.Add(rbl);

        if (!Page.IsPostBack)
        {
            rbl.SelectedValue = "All";
            PopulateTextBox(rbl.SelectedValue);
        }

    }

    void rbl_SelectedIndexChanged(object sender, EventArgs e)
    {
        RadioButtonList foo = (RadioButtonList)sender;
        PopulateTextBox(foo.SelectedValue);
    }

    void PopulateTextBox(string selection)
    {
        TextBox box = new TextBox();
        box.Text = selection;
        form1.Controls.Add(box);
    } 
```

# iphone - 标签文本中间截断

> ID：10413494
> 
> 赞同：0
> 
> 时间：2012-05-02T12:11:57.940
> 
> 标签：iphone

我已经使用了一个带有 2 个标签的自定义 tableViewCell。如果第二个标签中的文本超过我将显示第二个标签中的文本并带有中间截断。当用户单击截断的文本单元格时，我需要弹出一个带有完整文本的警报。任何想法如何找到包含截断文本的单元格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T12:26:14.547

当您使用自定义 tableviewcell 时，只需为您的标签提供标签值，然后在单击单元格时，只需使用标签值找出两个标签并执行您需要做的事情，即在警报视图中向用户显示整个文本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T12:17:54.210

当标签的大小大于帧宽度时，标签将被截断。你可以通过使用找到这两个

标签.frame.size.width

和 NSString sizeWithFont 方法。然后比较并发现您的标签尺寸是否大于宽度。请享用 ：）

# java - 如何从属性文件中获取 bean 验证错误消息？

> ID：10413500
> 
> 赞同：1
> 
> 时间：2012-05-02T12:12:30.440
> 
> 标签：java, maven, properties, bean-validation

我有以下用于验证电子邮件的正则表达式；

```
@Pattern(regexp="[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?", message="Invalid Email")
private String email; 
```

我的问题是我似乎无法从我的 ValidationMessage.properties 文件中获取消息。它只是显示我放在“”中的字符串。我尝试了以下方法：

```
message="{InvalidEmail}" 
```

（在 ValidationMessage.properties 文件中有一个名为“InvalidEmail”的密钥对）但它不是收集密钥对值，而是简单地打印出字符串“{InvalidEmail}”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T12:16:37.217

文件名必须是`ValidationMessages.properties`, 带有复数`s`。它还必须放在类路径的根目录中，因此不能放在任何子文件夹/包中。

# android - 向选项卡添加视图与向选项卡 android 添加活动

> ID：10413502
> 
> 赞同：2
> 
> 时间：2012-05-02T12:12:43.257
> 
> 标签：android, tabs, android-tabactivity

我正在我的应用程序中设计标签。我很困惑是将活动用于选项卡还是仅使用视图

哪一种是tablayout的更好方法

我很困惑 ..

我对标签有点陌生，还在学习 android 中的标签布局，所以我的问题可能有点天真，所以请耐心等待:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T12:39:29.863

回答“选项卡布局中的活动或视图”的问题

这就是android教程的内容：

> 您可以通过以下两种方式之一实现您的选项卡内容：使用选项卡在同一活动中交换视图，或使用选项卡在完全独立的活动之间进行更改。您希望应用程序使用哪种方法取决于您的需求，但如果每个选项卡都提供不同的用户活动，那么为每个选项卡使用单独的活动可能是有意义的，这样您就可以更好地管理离散组中的应用程序，而不是不仅仅是一个庞大的应用程序和布局。 [Android tablayout教程](http://developer.android.com/resources/tutorials/views/hello-tabwidget.html)

我强烈建议您遵循本教程，然后尝试为您的应用程序实现您自己的版本。

这是一个代码示例以防万一；

```
public class TabHostExample extends TabActivity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.testtabs); 

    TabHost tabHost = getTabHost();
    TabHost.TabSpec spec;
    Intent content;

    spec = tabHost.newTabSpec("test1"); //set a title for the tab
    spec.setIndicator("test1"),
            getResources().getDrawable(R.drawable.ic_dialog_alert)); //set an icon for tab
    content = new Intent(this, ExampleActivityOne.class);
    spec.setContent(content);
    tabHost.addTab(spec);

    spec = tabHost.newTabSpec("test2")); //set a title for the tab
    spec.setIndicator("test2"),
            getResources().getDrawable(R.drawable.ic_dialog_info)); //set an icon for the tab
    content = new Intent(this, ExampleActivityTwo.class);
    spec.setContent(content);
    tabHost.addTab(spec);

    tabHost.setCurrentTab(0);
} 
```

}

```
 <TabHost
xmlns:android="http://schemas.android.com/apk/res/android" 
android:layout_width="match_parent"
android:layout_height="match_parent"
android:id="@android:id/tabhost">
    <LinearLayout 
    android:orientation="vertical" 
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent" 
    >   
        <TabWidget
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:id="@android:id/tabs" 
        />
        <FrameLayout 
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" 
        android:id="@android:id/tabcontent" 
        />
    </LinearLayout>
</TabHost> 
```

教程中的一些额外信息：

框架布局是每个选项卡的活动内容所在的位置。

> 请注意，TabWidget 和 FrameLayout 元素分别具有 ID 选项卡和选项卡内容。必须使用这些名称，以便 TabHost 可以检索对它们中的每一个的引用。它期望正是这些名称。

因此，使用此代码，您可以对选项卡布局进行基本设置，接下来要做的是将活动附加到选项卡。您像往常一样使用活动，对于这些活动，您可以像往常一样扩展活动并在 onCreate/onResume 中构建布局

如果您需要更多信息或更多解释，请发表评论。我认为大多数代码都是不言自明的。

**我刚刚注意到我的代码几乎与教程页面完全相同。我实际上在我的应用程序中使用了这段代码，活动名称不同等。它工作得很好。我推荐它。归功于 Android 团队。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T12:21:20.850

你必须使用活动。每个选项卡都有活动。developer.android.com 上有很好的教程 在[这里试试这个](http://developer.android.com/resources/tutorials/views/hello-tabwidget.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T12:24:55.863

尝试活动..寻找 TabActivity，这是在应用程序中处理 TABS 的最佳方式.. [http://developer.android.com/reference/android/app/TabActivity.html](http://developer.android.com/reference/android/app/TabActivity.html)和[http://developer.android.com/资源/教程/视图/hello-tabwidget.html](http://developer.android.com/resources/tutorials/views/hello-tabwidget.html)

# installation - inetc::post 在 nsis 中出现“URL 部分错误”

> ID：10413503
> 
> 赞同：2
> 
> 时间：2012-05-02T12:12:44.067
> 
> 标签：installation, nsis

我正在使用 nsis 开发安装程序。最后一步是用户注册过程，以获取他的电子邮件地址和一些其他数据并将其发送到服务器。代码如下。

```
StrCpy $ContactName "$0"
StrCpy $ContactEmail "$1"
StrCpy $Coments "$2"
StrCpy $Updates "$3"
StrCpy $PostStr "userName=$ContactName&userEmail=$ContactEmail&userComments=$Coments&updates=$Updates"

inetc::post "$PostStr" "http://www.mysite.com/registration/registerAcceptor.php" "$INSTDIR\output.txt"

Pop $0
StrCmpS $0 "OK" success failedToSubmit
failedToSubmit:
    MessageBox MB_OK|MB_ICONEXCLAMATION "There was an error submitting the registration information"
Return

success:
MessageBox MB_OK|MB_ICONINFORMATION "Your information was successfully received by OrangeHRM" 
```

但是当用户第一次尝试注册时，它会给出错误消息

```
"There was an error submitting the registration information" 
```

当我使用以下消息检查命令的返回值时

```
MessageBox MB_OK $0 
```

它显示以下错误

```
URL Parts Error 
```

但是当我返回并继续执行相同的操作时，它会给出成功消息，并且返回值也为

```
OK 
```

我不确定为什么这件事在这两种情况下会以两种不同的方式起作用。有人可以帮忙吗。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T12:31:37.633

[尝试按照此论坛帖子](http://forums.winamp.com/showthread.php?t=343328)中的建议将“/END”添加到插件调用中（堆栈上可能还有其他内容，并且插件不知道何时停止阅读，这可以解释为什么它第二次起作用）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-10T12:46:58.160

我在使用 NSIS 插件时遇到了同样的问题`inetc`，但不同之处在于我`/END`已经使用过，并且在相同的情况下它在某种程度上不起作用。在我读到这个问题与不明确的堆栈有关后，我检查了我的代码，并且有很多对各种函数的调用，这使得堆栈中充满了变量。因为即使我传输的事实`/END`也无济于事，所以我尝试在每次调用 inetc 之前使用来自互联网的代码手动清除所有变量的堆栈，这很神奇。

所以这里是代码：

```
!macro ClearStack
    ${Do}
        Pop $0
        IfErrors send
    ${Loop}
send:
!macroend

!define ClearStack "!insertmacro ClearStack" 
```

您可以将其用作宏以避免任何重复，或者只是将其复制粘贴到您需要使用 inetc 发送内容的地方。

# perl - 如何调用具有预先分配给某个值的变量的子例程？

> ID：10413509
> 
> 赞同：2
> 
> 时间：2012-05-02T12:13:12.823
> 
> 标签：perl, scope

在 Perl 中，当使用`sort`带有自定义比较的函数时，变量`$a`和`$b`已经分配给当前一对要比较的元素，例如：

```
@decreasing = sort { $b <=> $a } @list; 
```

如何编写具有类似功能的其他子例程？例如，假设我想编写某种`process_and_store`函数，对列表的每个项目执行一些特殊操作，然后将其存储在数据库中；并且变量`$item`已经分配给正在处理的当前项目。例如，我想写一些类似的东西：

```
process_and_store { do_something_with($item); } @list; 
```

而不是

```
process_and_store { my $item = shift; do_something_with($item); } @list; 
```

我该怎么做呢？

* * *

**更新：**为了完整起见，虽然[flesk 的答案](https://stackoverflow.com/a/10413915/359178)没有问题，但为了“正确”本地化我对`$item`变量所做的更改，我必须遵循[Axeman 的建议](https://stackoverflow.com/a/10414437/359178)。在`SomePackage.pm`我放置了类似的东西：

```
package SomePackage;

use strict;

require Exporter;
our @ISA = qw/Exporter/;
our @EXPORT = qw(process_and_store);

our $item;

sub import { 
  my $import_caller = caller();
  {   no strict 'refs';
    *{ $import_caller . '::item' } = \*item;
  }
  # Now, cue Exporter!
  goto &{ Exporter->can( 'import' ) };
}

sub process_and_store (&@) {
  my $code = shift;
  for my $x (@_) {
    local *item = \$x;
    $code->();
    print "stored: $item\n"
  }
}

1; 
```

然后我`main.pl`用类似这样的方式调用它：

```
#!/usr/bin/perl -w

use strict;
use SomePackage;

process_and_store { print "seen: $item\n"; } (1, 2, 3); 
```

并得到预期的结果：

```
seen: 1
stored: 1
seen: 2
stored: 2
seen: 3
stored: 3 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T13:10:32.090

在我的“关联数组”处理库中，我做了类似的事情。用户可以导出变量`$k`和`$v`（键值），以便他们可以执行以下操作：

```
each_pair { "$k => $v" } some_source_list() 
```

这是我的做法：

1.  我`our ( $k, $v )`在实现包中声明。
2.  在`import`我允许包导出这些符号并在接收包中为它们起别名：`*{$import_caller.'::'.$name} = \*{ $name };`
3.  在配对处理器中，我执行以下操作：

    ```
    local *::_ = \$_[0];
    local *k   = \$_[0];
    local *v   = \$_[1];
    @res = $block->( $_[0], $_[1] ); 
    ```

因此`$k`和`$v`是队列中内容的*别名*。如果不必如此，那么您可能会对以下内容*感到*满意：

```
local ( $k, $v ) = splice( @_, 0, 2 );
local $_         = $k; 
```

但可修改的副本也允许我执行以下操作：

```
each_pair { substr( $k, 0, 1 ) eq '-' and $v++ } %some_hash; 
```

* * *

**更新：**

看来您忽略了第 2 步。您必须确保客户端包中的符号映射到您的符号。它可以很简单：

```
our $item;

sub import { 
    my $import_caller = caller();
    {   no strict 'refs';
        *{ $import_caller . '::item' } = \*item;
    }
    # Now, cue Exporter!
    goto &{ Exporter->can( 'import' ) };
} 
```

然后，当您本地化自己的符号时，客户端包中的别名符号也会被本地化。

我可以看到它可以在没有`local`, 的情况下工作的主要方式是如果您从同一个包中调用它。否则，`$SomePackage::item`和`$ClientPackage::item`是两个不同的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T12:37:28.253

我认为这有点像黑客，但你可以这样做：

```
#!/usr/bin/perl
use strict;
use warnings;

my $item;

sub process_and_store(&@) {
    my $code = shift;
    for (@_) {
        $item = $_;
        &$code();
    }
    undef $item;
} 
```

问题是，`$item`必须是全局标量才能使其工作，因此`process_and_store`必须在循环列表时更新该标量。您还应该`undef $item`在子例程结束时限制任何潜在的副作用。如果我要写这样的东西，我会把它藏在一个模块中，并可以定义迭代器变量，以限制名称冲突。

测试：

```
my @list = qw(apples pears bananas);
process_and_store { do_something_with($item) } @list;

sub do_something_with {
    my $fruit = shift;
    print "$fruit\n";
} 
```

输出：

```
apples
pears
bananas 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-02T13:11:36.307

`$a`和`$b`变量在 Perl 中是特殊的；它们是真正的全局变量，因此不受`use strict`，并且也被`sort()`函数专门使用。

Perl 中的大多数其他类似用途将使用`$_`global 来处理这类事情：

```
process_and_store { do_something_with( $_ ) } @list; 
```

这已经由正常`$_`规则处理。不要忘记`local`ise `$_`：

```
sub process_and_store(&@)
{
  my $code = shift;
  foreach my $item (@_) {
    local $_ = $item;
    $code->();
  }
} 
```

# internet-explorer-8 - Internet Explorer 自动更改我的 DOCTYPE

> ID：10413510
> 
> 赞同：2
> 
> 时间：2012-05-02T12:13:13.147
> 
> 标签：internet-explorer-8, doctype, quirks-mode

我的 Web 应用程序在 IE8 中触发了 quirks 模式。它更改了我的文档类型（html5），然后将每个标签大写。

当我在谷歌浏览器中保存页面并在 IE8 中打开保存的页面时，它工作正常。

有谁知道这里出了什么问题以及我该如何解决？

**我已经尝试过的：**

*   我读过这篇文章并尝试过使用评论`<html>`，但没有运气： [IE6 将 DOCTYPE 更改为坏的](https://stackoverflow.com/questions/4658226/ie6-changes-doctype-to-a-bad-one)

*   我看到谷歌浏览器的保存版本有一个 META 标签定义添加的内容类型。尝试将其插入页面，并尝试使用 php 执行此操作`header()`，但没有运气。

*   我尝试了在此页面上找到的其他文档类型：http: [//dorward.me.uk/www/ie8/](http://dorward.me.uk/www/ie8/)

使用保存的版本不是一个选项，因为该页面是使用 PHP 生成的。

**编辑：** 我尝试将 Google Chrome 版本放在网络服务器上，但 IE 在该版本上也失败了。是否有任何服务器设置会影响 IE 对页面的呈现？

**编辑2：** 我试过了

```
<!DOCTYPE html> 
```

和

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
```

他们都改为：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">` 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T12:50:18.610

找到了。对于内部网络上的网站，Internet Explorer 的兼容模式已打开。

我可以打自己。

# oop - 观察者模式——主体跟踪观察者要观察的项目

> ID：10413518
> 
> 赞同：0
> 
> 时间：2012-05-02T12:13:37.843
> 
> 标签：oop, design-patterns, observer-pattern

观察者模式
- 假设：

*   在 10 个项目中，观察者只想订阅 3 个。
*   对象调用观察者的函数让他知道有一些更新。

**现在，主体是否有责任将仅与 3 个项目有关的更新发送给观察者？**
或者
**主题可以简单地告诉观察者有更新 - 去获取你想要的 10 个？**

哪个是正确的出路？有关系吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T04:58:18.457

Subject 保存了一个对该主题感兴趣**的 Observer 列表，并通过调用其 update 方法通知这些 Observer。**观察者不**保留**它感兴趣的主题列表。

Based on this, when a subject is updated, the subject will call the update(..) method or something similar of those Observers in its list. subject can **either** encapsulate the changes in an object as a parameter of the method, **Or** pass the this object of this subject (observers get the interested data by calling subject's methods themselves).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T12:40:29.797

我宁愿使用有关不同事件的特定通知。通常采用推送模式。喜欢`Hey, I just earned some money. Here is actual amount I have earned`。而不是`Hey, something happened to me.`. 后者将所有逻辑移至客户端（观察者）。客户端应验证已更改的内容，如果您有多个客户端，则此验证逻辑将重复。实际上，如果您没有其他观察者，则不需要这种模式:)

此外，特定通知允许仅订阅客户感兴趣的事件。因此，当其他事情发生时（即当对象观看电影时），观察者不会受到打扰。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T22:11:53.870

> 现在，主体是否有责任将仅与 3 个项目有关的更新发送给观察者？
> 
> 或者
> 
> 对象可以简单地告诉观察者有更新 - 从 10 个中获取任何你想要的？
> 
> 哪个是正确的出路？有关系吗？

这里没有绝对正确的答案。

这些是实现选择，实际上在[设计模式](https://rads.stackoverflow.com/amzn/click/com/0201633612)中观察者的实现部分中提到了：

> _6。避免特定于观察者的更新协议：推拉模型。观察者模式的实现通常让主题广播有关更改的附加信息。主题将此信息作为参数传递给 Update。信息量可能有很大差异。
> 
> 在一种极端情况下，我们称之为推送模型，主体向观察者发送有关更改的详细信息，无论他们是否想要。另一个极端是拉模型。主体只发送最少量的通知，然后观察者明确要求提供详细信息。
> 
> 拉模型强调主体对其观察者的无知，而推模型则假设主体对他们的观察者的需求有所了解。推模型可能会降低观察者的可重用性，因为 Subject 类对 Observer 类做出的假设可能并不总是正确的。另一方面，拉模型可能效率低下，因为观察者类必须在没有主体帮助的情况下确定发生了什么变化。
> 
> _7。明确指定感兴趣的修改。您可以通过扩展主题的注册接口以允许仅针对感兴趣的特定事件注册观察者来提高更新效率。当这样的事件发生时，对象只通知那些对该事件感兴趣的观察者。支持这一点的一种方法是使用 Subject 对象的方面的概念。为了注册对特定事件的兴趣，观察者使用
> 
> void Subject::Attach(Observer*, Aspect&interest);
> 
> 其中interest 指定了感兴趣的事件。在通知时，主体将更改的方面作为更新操作的参数提供给其观察者。例如：
> 
> void Observer::Update(Subject*, Aspect&interest);

如果在您的情况下使用推送模型更有意义，那么主题对观察者的需求有更多了解，并使用方面模型以便观察者可以注册对主题数据的特定部分的兴趣，去为了它！

我通常更喜欢使用拉模型并接受观察者对该主题有一些详细的了解（实现起来更简单），但是您提出的建议可能适合您的情况。

# c# - 在 WinRT 中绘制 SVG 文件

> ID：10413524
> 
> 赞同：4
> 
> 时间：2012-05-02T12:13:56.483
> 
> 标签：c#, image, webview, svg, windows-runtime

我正在尝试绘制一个 SVG 文件。到目前为止，我已经尝试使用带有 svg 本身或对象/嵌入标签的 Image 标签和 WebView。到目前为止似乎没有任何帮助，到目前为止我发现的所有 dll 都需要 .NET。

到目前为止我尝试过的示例（注意：路径都在有或没有 ms-appx:/// 的情况下进行了尝试，注 2：在 webview 中对非 svg 类型使用 img 标签也不起作用）

网络视图：

```
webView.NavigateToString("<embed src='circle1.svg' type='image/svg+xml' />");
webView.NavigateToString("<object data='circle1.svg' type='image/svg+xml' />");
webView.NavigateToString("<svg>....</svg>"); 
```

图片：

```
<Image Source='circle1.svg'> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T15:07:31.400

我不确定您是否可以通过这种方式包含外部图像，您是否尝试过其他图像格式？您是否尝试过使用绝对路径？我也会考虑使用[数据](http://en.wikipedia.org/wiki/Data_URI_scheme)标签作为图像源而不是外部文件。

示例（来自维基百科）：

```
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==" 
alt="Red dot"> 
```

此外，codeplex 中有一个名为[xamltune](http://xamltune.codeplex.com)的项目，可以将 svg 文件转换为 xaml 文件。也许您可以在应用程序中插入输出 xaml 代码，而不是使用 WebView。

# windows-phone-7.1 - 强制 Wi-Fi 保持开启

> ID：10413526
> 
> 赞同：2
> 
> 时间：2012-05-02T12:14:00.703
> 
> 标签：windows-phone-7.1

有什么方法可以强制 Wi-Fi 在锁屏状态下保持活动状态？
我注意到手机进入锁屏时会断开与 Wi-Fi 网络的连接，
但我需要它保持活动状态。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T12:24:31.447

我认为没有办法改变它（节省电池电量）。

您唯一能做的就是插入您的 Windows Phone 以使您的 Wi-Fi 在锁屏模式下保持活动状态。

也许未来的更新可以添加一个选项，让用户在进入锁屏时选择是否打开 WiFi。

# ipad - 如何将根视图控制器默认为 1024x768 大小的横向

> ID：10413527
> 
> 赞同：0
> 
> 时间：2012-05-02T12:14:01.510
> 
> 标签：ipad, uiviewcontroller, landscape

我正在开发一个需要限制为横向模式的 iPad 应用程序。我有一个根视图控制器和一个子视图控制器。我将子视图控制器添加到根视图控制器并将它们的帧设置为 1024x768。我在 info.plist 和我的视图控制器 `shouldAutorotateToInterfaceOrientation:interfaceOrientation`方法中将应用程序限制为横向模式。但是，子视图的尺寸会在方法之前的某个时间重置为 768x1024，`viewDidAppear`这使它看起来好像处于纵向模式。

**奇怪**的是，如果我为子视图设置框架，以便宽度或高度不是屏幕尺寸，例如：CGRectMake(0, 0, 1024, 767) 或 CGRectMake(0, 0, 1024, 769) ，它不会被重置并以横向模式显示。

所以我的问题是，是什么导致了这种行为。什么是简单地将所有视图默认为横向模式的最佳方法

这是我的根视图控制器：

```
// INTERFACE

#import <UIKit/UIKit.h>
#import "ScrapViewController.h"

@interface ViewController : UIViewController
{
    ScrapViewController *svc;
}
@end

// IMPLEMENTATION

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    self.view.backgroundColor = [UIColor blueColor];
    self.view.frame = CGRectMake(0, 0, 1024, 768);

    svc = [[SubViewController alloc] init];
    svc.view.backgroundColor = [UIColor redColor];
    svc.view.frame = CGRectMake(0, 0, 1024, 768);

    [self.view addSubview:svc.view];

    NSLog(@"viewDidLoad rvc %f,%f", self.view.frame.size.width, self.view.frame.size.height);
    NSLog(@"viewDidLoad svc %f,%f", svc.view.frame.size.width, svc.view.frame.size.height);
}

- (void)viewDidUnload
{
    [super viewDidUnload];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
  return interfaceOrientation == UIInterfaceOrientationLandscapeLeft || interfaceOrientation == UIInterfaceOrientationLandscapeRight;
}

@end 
```

这是我的子视图控制器

```
// INTERFACE

#import <UIKit/UIKit.h>

@interface SubViewController : UIViewController

@end

// IMPLEMENTATION

@implementation SubViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
  return interfaceOrientation == UIInterfaceOrientationLandscapeLeft || interfaceOrientation == UIInterfaceOrientationLandscapeRight;
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T12:21:52.290

如果您使用 xib 文件，那么只需将您的子视图的 xib 默认表示为横向，即 nib 文件的默认设计将是横向，即在属性窗口中使您的子视图的视图横向

# javascript - 如何使用java脚本控制浏览器按钮？

> ID：10413530
> 
> 赞同：-1
> 
> 时间：2012-05-02T12:14:11.013
> 
> 标签：javascript

我需要在 html 页面中单击提交按钮时禁用浏览器后退按钮，以确保进程没有终止。

这是在浏览器中禁用后退按钮的代码，但它仅在 onload 事件中工作。当我试图在 onclick 事件中使用它时，它不会工作。

```
<html xmlns="http://www.w3.org/1999/xhtml" >
<head runat="server">
<title>New event</title>
</head>
<SCRIPT type="text/javascript">
window.history.forward();
function noBack() { window.history.forward(); }
</SCRIPT>
</HEAD>
<BODY onload="noBack();"
onpageshow="if (event.persisted) noBack();" onunload="">
<a href='page2.html' >Page 2</a>
</body>
</html> 
```

任何人都可以知道如何在我单击 html 页面中的提交按钮时禁用浏览器后退按钮

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T12:21:28.523

它不起作用，因为单击时，它将在导航之前运行-因此它将转到不存在的“前进”页面。

采用[`onbeforeunload`](https://developer.mozilla.org/en/DOM/window.onbeforeunload)

```
var submitFlag=false;
//set submitFlag to true on onclick of submit button
window.onbeforeunload=function(e){ 
 if(submitFlag){
  return false;
 }
 return "Are you sure you want to leave?"

 } 
```

但是，这不能强迫用户。你永远不能强迫用户不要回去。否则，这可能会导致重大的安全问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T12:19:36.017

不要这样做。强烈建议您不要破坏后退按钮的功能。

请参阅[禁用浏览器上的后退按钮](https://stackoverflow.com/questions/87422/disabling-back-button-on-the-browser)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T12:20:22.657

您不能禁用浏览器后退按钮。不是通过 JavaScript 或其他任何东西。在服务器端，您可以跟踪是否已按下提交按钮并采取相应措施。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T12:23:49.030

您不能禁用浏览器的后退按钮。

您提供的代码段不会“禁用”后退按钮。我不相信你明白它的作用。

它能做什么：

1.  在脚本标签中，模拟单击“前进按钮”（`window.history.forward()`）。如果用户只是按下后退按钮，这可能会将我们带回到原来的位置。

2.  当页面被加载（所以之前的 hack 不起作用），并且页面是从历史缓存（`event.persisted`）中加载的，然后模拟点击前进按钮。

在任何时候都没有禁用后退*按钮。*相反，您所做的是编写一个打破下一页的后退*行为**的*页面。

 *您可能想改用[onbeforeunload](https://developer.mozilla.org/en/DOM/window.onbeforeunload)事件。*

# search - 图 api 搜索不返回帖子

> ID：10413532
> 
> 赞同：1
> 
> 时间：2012-05-02T12:14:21.180
> 
> 标签：search, facebook-graph-api

我正在使用[https://graph.facebook.com/search?q=anglogold&type=post](https://graph.facebook.com/search?q=anglogold&type=post)进行搜索， 这不会返回我刚刚自己制作的帖子。知道为什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T16:01:15.993

[https://graph.facebook.com/search?q=anglogold&type=post](https://graph.facebook.com/search?q=anglogold&type=post)

为我返回了很多帖子。

Facebook 可以在不同场景下限制搜索 api 上的结果。

1.  不适用于特定国家/地区

2.  不是公开帖子

3.  人被用户屏蔽

    并且可能很少。

# ruby-on-rails - 为什么人们将 rspec 分组在 Gemfile 中进行测试和开发？

> ID：10413534
> 
> 赞同：28
> 
> 时间：2012-05-02T12:14:29.017
> 
> 标签：ruby-on-rails, rspec

我通常对 bundler Gemfile 选项很清楚，但我不确定为什么 rspec（特别是 rspec-rails）应该同时用于测试和开发。

这是我的测试分组：

```
group :development, :test do
  gem 'rspec-rails'
  gem 'faker'
end

group :test do
  gem "factory_girl_rails"
  gem "capybara"
  gem 'guard-rspec'
  gem 'rb-fsevent'
  gem 'growl'
end 
```

这看起来好吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-05-02T12:17:32.850

我引用[官方文档](https://github.com/rspec/rspec-rails#configure)：

> 将 rspec-rails 添加到 Gemfile 中的 :test 和 :development 组：

```
group :test, :development do   
    gem "rspec-rails", "~> 2.6" 
end 
```

> 它需要在 :development 组中才能公开生成器和 rake 任务，而无需键入 RAILS_ENV=test。

# c# - ObservableCollection 的逆序

> ID：10413535
> 
> 赞同：2
> 
> 时间：2012-05-02T12:14:34.527
> 
> 标签：c#, wpf, observablecollection

我有`ObservableCollection`它包含一个自定义对象。通常，项目会添加到列表的末尾

我在找什么：

*   **从列表开头**添加的项目。
*   **这可能只显示在 UI**中，我的整个程序已经在使用这个列表中的数据位置。所以里面的对象可能不会在后面的代码中改变顺序。

这`ObservableColection`包含 Button 对象（自定义样式）。这些按钮以水平布局显示在 a`ListBox`和 a 内`StackPanel`（因此这些按钮可以很好地相互放置）。

**问题：**

创建的每个按钮都会收到一个`DateTime`. 新添加的按钮的日期总是比之前的按钮更新。**对此的所有计算都在计时器内进行**（目前每秒运行一次）。

所以我这次基本上是在排序，但是在像 3 个按钮之后突然一个按钮被放置在右侧（而不是左侧）。

*例如：*

Btn3：14:15:45（正确） **Btn4：14:16:00（错误）** Btn2：14:15:32（正确） Btn1：14:04:17（正确）

前 3 个按钮每次都会正确添加到列表的开头。突然间，第四项被添加到第二位。好像不是一直在比较时间？每次创建按钮时`CollectionViewSource`都会调用该方法。

有什么问题`CollectionViewSource`还是有更好的方法来处理这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T13:09:15.450

你会在 XAML 中尝试那种笑容吗？我知道这些名称不同，但这是来自工作代码。我没有按日期排序，但我已经从 DocProps 中添加和删除了数百次，并且排序没有中断。

```
 <ListBox.DataContext>
            <CollectionViewSource Source="{Binding Path=DocProps}">
                <CollectionViewSource.SortDescriptions>
                    <scm:SortDescription PropertyName="Date" Direction="Desc" />
                </CollectionViewSource.SortDescriptions>
            </CollectionViewSource>
        </ListBox.DataContext> 
```

我的另一个想法是它可能正在对日期的字符串表示进行排序并弄错了。也许创建一个索引 001 - 00n 进行排序。

我在这个集合中添加了一个日期，它对我有用。但必须使日期成为可排序的格式。

```
 Text="{Binding Path=Date, Mode=OneWay, StringFormat={}{0:s}}" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T13:19:47.263

如果您点击评论中发布的链接 Siva 并从那里点击另一个链接，您最终将访问[http://connect.microsoft.com/VisualStudio/feedback/details/592897/collectionviewsource-sorting-only-the- first-time-it-is-bound-to-a-source](http://connect.microsoft.com/VisualStudio/feedback/details/592897/collectionviewsource-sorting-only-the-first-time-it-is-bound-to-a-source)有人发布了解决方法。此解决方法是为 DataGrid 编写的，但您可以针对您碰巧使用的任何控件对其进行调整：

> Greg Bachraty 于 2011 年 2 月 28 日上午 6:50 发布
> 
> 实现您自己的 DataGrid：

```
public class SDataGrid : DataGrid
{
    static SDataGrid()
    {
        ItemsControl.ItemsSourceProperty.OverrideMetadata(typeof(SDataGrid), new FrameworkPropertyMetadata((PropertyChangedCallback)null, (CoerceValueCallback)null));
    }
} 
```

> 强制回调在当前实现中唯一要做的就是清除排序描述。您可以通过覆盖元数据来简单地“剪切”此代码。在 Silverlight 上不可行：OverrideMetadata API 不公开。虽然我不确定 Silverlight 是否受此错误的影响。其他风险和副作用可能适用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T12:31:41.080

如果我理解得很好，我会使用 to sort 的`Ticks`属性，`DateTime`因为它本质上非常准确，而且当然是一个简单的数字。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T12:32:28.977

您的 ICollectionView 是实例字段还是代码片段中的局部变量？

它必须是一个实例字段，然后您的排序将起作用。顺便说一句，我尝试了您的代码段并将 icollectionview 更改为一个字段，它可以工作。

# svn - 使用 xslt 按 jira 编号对 subversion xml 日志条目进行分组

> ID：10413537
> 
> 赞同：3
> 
> 时间：2012-05-02T12:14:43.243
> 
> 标签：svn, xslt, jira

拥有 XML Subversion 提交日志：

```
<?xml version="1.0"?>
<log>
<logentry
   revision="1236">
<author>me</author>
<date>2011-11-25T08:28:57.024571Z</date>
<msg>JIRA-5678: commit message</msg>
</logentry>
<logentry
   revision="1235">
<author>me</author>
<date>2011-11-25T08:28:47.024571Z</date>
<msg>JIRA-5678 - commit2 message</msg>
</logentry>
<logentry
   revision="1234">
<author>me</author>
<date>2011-11-25T08:28:37.024571Z</date>
<msg>JIRA-5678 commit3 message</msg>
</logentry>
</log> 
```

我想生成一个按 JIRA 编号分组的报告，类似于这个：

```
<table>
<tr><th>revision</th><th>comment</th></tr>
<tr><td colspan=2>JIRA-5678</td></tr>
<tr><td>r1236</td><td>JIRA-5678: commit message</td></tr>
<tr><td>r1235</td><td>JIRA-5678 - commit2 message</td></tr>
<tr><td>r1234</td><td>JIRA-5678 commit3 message</td></tr>
</table> 
```

提取 JIRA 编号并将其输出到单独列的转换：

```
<xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:fn="http://www.w3.org/2005/xpath-functions">

<xsl:template match="/">
  <table summary="JIRAs">
    <tr>
      <th>JIRA#</th>
      <th>revision</th>
      <th>message</th>
    </tr>

  <xsl:for-each select="log/logentry[starts-with(msg,'JIRA-')]">
    <tr>
      <td><xsl:value-of select="fn:replace(msg,'^(JIRA-\d+).*$', '$1')" /></td>
      <td><xsl:value-of select="@revision" /></td>
      <td><xsl:value-of select="msg" /></td>
    </tr>
  </xsl:for-each>

  </table>
</xsl:template>

</xsl:stylesheet> 
```

进行这种分组的 XSLT 代码是什么？

更新：我最终在 XML DOM 上编写了一个 python 脚本。如果您需要，请发表评论。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T13:36:56.647

**I. 这个 XSLT 1.0 转换**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kEntryByNum" match="logentry" use="substring-before(msg, ':')"/>

 <xsl:template match="/*">
     <table>
       <tr><th>revision</th><th>comment</th></tr>

       <xsl:apply-templates select=
        "logentry
           [generate-id()
           =
            generate-id(key('kEntryByNum', substring-before(msg, ':'))[1])
           ]
      "/>
     </table>
 </xsl:template>

 <xsl:template match="logentry">
        <tr><td colspan="2"><xsl:value-of select="substring-before(msg, ':')"/></td></tr>
        <xsl:for-each select="key('kEntryByNum', substring-before(msg, ':'))">
            <tr>
                <td><xsl:value-of select="@revision"/></td>
                <td><xsl:value-of select="msg"/></td>
            </tr>
        </xsl:for-each>
 </xsl:template>
</xsl:stylesheet> 
```

**当应用于以下 XML 文档时**：

```
<log>
    <logentry revision="1236">
        <author>me</author>
        <date>2011-11-25T08:28:57.024571Z</date>
        <msg>JIRA-5678: commit message</msg>
    </logentry>
    <logentry revision="1237">
        <author>me</author>
        <date>2011-11-25T08:28:57.024571Z</date>
        <msg>JIRA-5679: commit message</msg>
    </logentry>
    <logentry revision="1238">
        <author>me</author>
        <date>2011-11-25T08:28:57.024571Z</date>
        <msg>JIRA-5679: commit message</msg>
    </logentry>
    <logentry revision="1235">
        <author>me</author>
        <date>2011-11-25T08:28:47.024571Z</date>
        <msg>JIRA-5678: - commit2 message</msg>
    </logentry>
    <logentry revision="1234">
        <author>me</author>
        <date>2011-11-25T08:28:37.024571Z</date>
        <msg>JIRA-5678: commit3 message</msg>
    </logentry>
</log> 
```

**产生想要的正确结果**：

```
<table>
   <tr>
      <th>revision</th>
      <th>comment</th>
   </tr>
   <tr>
      <td colspan="2">JIRA-5678</td>
   </tr>
   <tr>
      <td>1236</td>
      <td>JIRA-5678: commit message</td>
   </tr>
   <tr>
      <td>1235</td>
      <td>JIRA-5678: - commit2 message</td>
   </tr>
   <tr>
      <td>1234</td>
      <td>JIRA-5678: commit3 message</td>
   </tr>
   <tr>
      <td colspan="2">JIRA-5679</td>
   </tr>
   <tr>
      <td>1237</td>
      <td>JIRA-5679: commit message</td>
   </tr>
   <tr>
      <td>1238</td>
      <td>JIRA-5679: commit message</td>
   </tr>
</table> 
```

* * *

**二、XSLT 2.0 解决方案**：

```
<xsl:stylesheet version="2.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kEntryByNum" match="logentry" use="substring-before(msg, ':')"/>

 <xsl:template match="/*">
     <table>
       <tr><th>revision</th><th>comment</th></tr>

       <xsl:for-each-group select="logentry" group-by="substring-before(msg, ':')">
         <xsl:apply-templates select="."/>
       </xsl:for-each-group>
     </table>
 </xsl:template>

 <xsl:template match="logentry">
        <tr><td colspan="2"><xsl:value-of select="substring-before(msg, ':')"/></td></tr>
        <xsl:for-each select="current-group()">
            <tr>
                <td><xsl:value-of select="@revision"/></td>
                <td><xsl:value-of select="msg"/></td>
            </tr>
        </xsl:for-each>
 </xsl:template>
</xsl:stylesheet> 
```

# mongodb - Mongoid 创建与 collection.insert

> ID：10413541
> 
> 赞同：1
> 
> 时间：2012-05-02T12:15:09.183
> 
> 标签：mongodb, mongoid

我不知道该怎么说。好吧，最近我用mongoid做一个rails项目，我的任务是在mongodb中插入多条记录。

说在数据库中插入多条 PartPriceRecord 记录。谷歌搜索后，我遇到了**collection.insert**命令：

> PartPriceRecord.collection.insert(multiple_part_price_records)

但是在插入大量记录时，MongoDb 似乎总是提示我错误消息：

**超过 16,000,000 字节的最大插入大小**

谷歌搜索我发现单个文档的 MongoDb 的上限，但令人惊讶的是，当我将上面的查询更改为：

```
multiple_part_price_records.each do|mppr|
  PartPriceRecord.create(mppr)
end 
```

上述错误似乎不再出现。

谁能深入解释一下两者之间的区别到底是什么？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T14:58:03.577

单个大容量插入的最大大小为 16M 字节。这就是您在第一个示例中尝试做的事情。

在第二个示例中，您将单独插入每个文档。因此，每个插入都低于插入的最大限制。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-19T22:43:26.673

@Kyle 非常简洁地解释了他的回答中的差异（+1'd），但至于解决您的问题的方法，您可能想看看批量插入：

```
BATCH_SIZE = 200
multiple_part_price_records.each_slice(BATCH_SIZE) do |batch|
    PartPriceRecord.collection.insert(batch)
end 
```

这会将记录分成 200 个批次（或最适合您的情况的任何大小），并将它们插入到该限制内。这将比单独运行保存**要**快得多，因为这会向数据库发送更多请求。

关于 collection.insert 的一些快速注意事项：

*   它不会**在**插入之前对您的模型进行验证，您可能需要在插入之前检查这一点
*   它需要是文档格式，不像 save 需要它是一个模型。`as_document`您可以通过调用模型轻松转换为文档。

# php - wordpress 用户个人资料中的自定义上传字段

> ID：10413542
> 
> 赞同：2
> 
> 时间：2012-05-02T12:15:15.350
> 
> 标签：php, wordpress, file-upload

我正在尝试允许用户在其用户个人资料编辑页面上上传个人资料图片，这是上传表单的代码：

```
function add_extra_profile_fields($user) {
    $output = '<h3>صورة المستخدم</h3>

    <table class="form-table">

        <tr>
            <th><label for="twitter">صورة المستخدم</label></th>

            <td>
                <img class="video_author_img" src="'.ms_user_img_single_php($user->ID, false).'" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                 <input type="file" id="admin_user_photo" name="admin_user_photo" class="form-text" /><br />
                <span class="description">لأفضل نتيجة يرجى استخدام صورة 90px في 90px  - الحجم الأقصى 2 ميجا</span>
            </td>
        </tr>

    </table>';

    echo $output;
}
add_action('edit_user_profile', 'add_extra_profile_fields');
add_action('show_user_profile', 'add_extra_profile_fields'); 
```

下一个功能应该是保存上传的图像并处理裁剪并将其与另一个功能一起放置：

```
function my_save_extra_profile_fields( $user_id ) {

    if ( !current_user_can( 'edit_user', $user_id ) )
        return false;

    // User image upload
    $allowedTypes = array('image/gif', 'image/jpeg', 'image/png');

    if (in_array($_FILES["admin_user_photo"]["type"], $allowedTypes) && ($_FILES["admin_user_photo"]["size"] < 1048576)){

        ms_upload_crop_image('admin_user_photo', $user_id, '../../uploads/user_images/', 90, 90);

    }
}
add_action( 'personal_options_update', 'my_save_extra_profile_fields' );
add_action( 'edit_user_profile_update', 'my_save_extra_profile_fields' ); 
```

我还用 jquery 更改了表单的 enctype：

```
$('form#your-profile').attr('enctype', 'multipart/form-data'); 
```

问题是浏览器甚至没有上传图像，好像该字段不存在一样，知道问题是什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T12:36:25.843

您应该更改个人资料表单中的两个参数，而不是一个。可能会有所帮助：

```
 form.encoding = "multipart/form-data";
  form.setAttribute('enctype', 'multipart/form-data'); 
```

我建议您为此使用现成的插件，称为添加本地头像（http://wordpress.org/extend/plugins/add-local-avatar/）或者如果您坚持使用自己的代码，那么只需下载插件并调查它的简单源代码。比较它们并找出你的错误。

# php - 生成的电子邮件中的链接未显示为可点击

> ID：10413543
> 
> 赞同：1
> 
> 时间：2012-05-02T12:15:26.640
> 
> 标签：php, email, click, sendmail, clickable

我正在尝试发送电子邮件——它工作正常，但我的“单击此处”链接在收到时没有显示为可点击。

我正在使用的代码如下

```
$to = $email;
$subject = "Activation";
$message = "We send you an activation email" .'<br>'.' To activate your acount. <a href="activation.php?key='.$key.'">Click Here</a>';
$from = "riaz_qadeer90@yahoo.com";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
if(mail($to,$subject,$message,$headers))
{
    echo "Check your email to activate your acount.";
} 
```

邮件是这样的：

```
We send you an activation email To activate your acount. "Click Here" 
```

但“点击此处”链接不可点击

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T12:22:42.613

在您的href中，您是否可以再次检查整个域名。示例（href='http://mydomain.com/activation.php?key=.....

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T12:18:09.450

它可能无法点击，因为页面名称前没有斜线。

但是，href 应该包含您的域，因为用户将无法从电子邮件中遵循相对路径。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T12:24:31.467

这可能是由于您的客户禁用了电子邮件地址中的链接，但这是值得怀疑的。

此外，“Activation.PHP?Key..”的 HREF 是一个相对路径，它只相对于电子邮件客户端，因此客户端不知道将用户重定向到哪里。

添加一个完全限定的路径应该对此有所帮助。

# url - 如果尚未存在，则将 hashbang 添加到 URL

> ID：10413545
> 
> 赞同：1
> 
> 时间：2012-05-02T12:15:34.580
> 
> 标签：url, append, intercept, hashbang, path.js

## 问题

我已经使用 #! 启动并运行了我的网站！URL 和 PathJS 运行良好。当某人链接到已经包含包含 hashbang 的正确 URL 结构的 URL 时，它可以正常工作。

我遇到的唯一问题是当用户访问 URL 中没有 hashbang 的页面时，它需要附加 hashbang 然后重新加载页面，或者希望触发 PathJS 来检测正确的 URL 结构并按照我说的做它到。

## 例子

访问`http://twitter.com/google`将拦截该 URL，将其更改为`http://twitter.com/#!/google`然后加载适当的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T05:05:09.917

您可以使用以下命令定义根路由：

```
Path.root("#!/hello"); 
```

当用户来到没有任何哈希值的页面时，PathJS 将默认使用根路由。

# jquery - 鼠标悬停时显示和隐藏

> ID：10413547
> 
> 赞同：0
> 
> 时间：2012-05-02T12:15:40.687
> 
> 标签：jquery, hover

我有一张桌子，在我的表格行中，每一行都有一列，我想在鼠标悬停时显示图像并在悬停时隐藏。

这是我的表格代码。

```
<table cellpadding="0" cellspacing="0" border="0" class="display dTable">
    <thead>
        <tr>
            <th style="width:5%;"> &nbsp; </th>
            <th style="width:10%;">Estimate#</th>
            <th style="width:20%;">Reference</th>
            <th style="width:30%;">Customer Name</th>
            <th style="width:15%;">Date</th>
            <th style="width:10%;">Amount</th>
            <th style="width:10%;">Status</th>
        </tr>
    </thead>
    <tbody>
        <tr class="gradeA">
            <td class="context">
                <a href="#" title="" class="smallButton" style="margin:5px;display:none;">
                    <img src="images/icons/dark/cog3.png" alt=""/>
                </a>
            </td>
            <td align="center"><a href="#">EST-1</a></td>
            <td align="center">Invoic 2,3</td>
            <td align="center"><a href="#">Fahamco Distrubutions</a></td>
            <td align="center">02-05-2012</td>
            <td align="center">&yen;89800909</td>
            <td align="center">pending</td>
        </tr>
        <tr class="gradeX">
            <td class="context">
                <a href="#" title="" class="smallButton" style="margin:5px;display:none;">
                    <img src="images/icons/dark/cog3.png" alt="" />
                </a>
            </td>
            <td align="center"><a href="#">EST-1</a></td>
            <td align="center">Invoic 2,3</td>
            <td align="center"><a href="#">Fahamco Distrubutions</a></td>
            <td align="center">02-05-2012</td>
            <td align="center">&yen;89800909</td>
            <td align="center">pending</td>
        </tr>
    </tbody>
</table> 
```

每行的第一列中有一个`anchor`带有图像的标签，最初是隐藏的，我想在鼠标悬停时为每个元素显示图像。

这是我尝试使用的 jquery 代码。

```
$('.context').hover(
    function() {
        $('.context a').show();
    },
    function() {
        $('.context a').hide();
    }
); 
```

上面的代码显示了所有的锚标签，我想要的是只显示相应的元素。

还有一种方法可以在不使用`<td>`元素中的 class 或 id 属性的情况下实现这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T12:17:31.090

尝试这个：

[http://jsfiddle.net/tuaaD/](http://jsfiddle.net/tuaaD/)

```
$('.context').hover(
    function() {
        $(this).find('a').show();
    },
    function() {
        $(this).find('a').hide();
    }
); 
```

要使其在不使用类 in 的情况下工作`td`，请参阅[此 http://jsfiddle.net/tuaaD/1/](http://jsfiddle.net/tuaaD/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T12:19:22.940

使用`$(this)`获取当前元素并使用`find`方法获取子元素

```
 $(function(){
      $('.context').hover(
         function() {
             $(this).find("a").show();
         },
         function() {
              $(this).find("a").hide();
         }
      );
    });
    ​ 
```

工作样本：http: [//jsfiddle.net/LKKDZ/2/](http://jsfiddle.net/LKKDZ/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T12:20:13.210

使用`$(this)`和`find()`：

```
$('.context').hover(function() {
        $(this).find('a').show();
    },
    function() {
        $(this).find('a').hide();
    }); 
```

使用`$this`，您将仅在您悬停的元素上执行该函数，并`find()`获得您需要的子元素。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-02T12:26:52.330

对 Arvind07 的答案稍作更改，您就可以轻松地将鼠标悬停在该行上，并且不使用任何类名。

[http://jsfiddle.net/vP8g4/](http://jsfiddle.net/vP8g4/)

```
$('tbody tr').hover(
    function() {
        $('a', this).first().show();
    },
    function() {
        $('a', this).first().hide();
    }
);​ 
```

# javascript - JavaScript FileReader 使用大量内存

> ID：10413548
> 
> 赞同：0
> 
> 时间：2012-05-02T12:15:42.553
> 
> 标签：javascript, html, filereader

我的小项目有问题。每次音乐播放器将新歌曲加载到播放列表中或您按下列表中的歌曲以播放时，它都会占用大量内存，并且在您关闭它之前一直保持高位。我认为每次我使用文件读取器 API 时都会使用内存，但我也在使用`jDataView.js`脚本加载 ID3 信息，我也认为这会占用大量内存。

你们有什么建议，用 加载，存储和播放歌曲`FileReader`，而不占用内存？我试图查看是否可以在使用后清除 fileReader，但我找不到任何东西。我只在 Chrome 中测试过。

更新：我已经测试了我的项目，并发现它在尝试加载数据字符串时会占用内存。

```
reader.onloadend = function(evt) {
    if(typeof(e) != "undefined"){
        e.pause();
    }
    e = new Audio();
    e.src = evt.target.result; // evt.target.result call takes the memory
    e.setAttribute("type", songs[index]["file"].type);
    e.play();
    e.addEventListener("ended", function() { LoadAudioFile(index + 1) }, false);
}; 
```

还有另一种方法可以将数据加载到音频元素中吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-02T13:33:52.430

这不是因为，`FileReader`而是因为您将`src`音频元素的属性设为 1.33 * mp3filesize 字符串。因此，该`src`属性不是指向 mp3 资源的漂亮短 url，而是 base64 编码的整个 mp3 文件。你的浏览器没有崩溃真是个奇迹。

您根本不应该读取文件`FileReader`，而是从文件中创建一个 blob URL 并将其用作 src。

```
var url = window.URL || window.webkitURL;

//Src will be like "blob:http%3A//stackoverflow.com/d13eb575-4863-4f86-8727-6400119f4afc"
//A very short string that is pointing to the original resource in hard drive

var src = url.createObjectURL( mp3filereference );

audioElement.src = src; 
```

# asp.net - ASP.NET 保护文件夹内的文件

> ID：10413550
> 
> 赞同：0
> 
> 时间：2012-05-02T12:15:51.097
> 
> 标签：asp.net, iis

我有一个共享主机帐户，可以在其中上传我的 ASP.NET 应用程序。我让用户在文件夹中上传 .doc 文件，问题是我只希望登录的用户能够下载这些文件，所以我写了一个调度程序，你给它 id 它读取文件并将其写入浏览器，隐藏文件位置，但我想保护所有文件所在的目录，所以你只能使用调度程序下载文件，我尝试将其标记为受密码保护的目录，但现在 ASP.NET 也无法访问.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T12:18:11.927

您需要限制该文件夹的 NTFS 权限，以仅允许您的应用程序正在运行的用户。这在共享主机环境中可能很困难......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T12:24:31.863

理想的解决方案是将文件夹移到站点根目录之外，但我想当您使用共享主机时，这可能是不可能的。

另一种解决方案是将文档移动到受 .NET 保护的 App_Data 文件夹（请参阅此处[What is the App_Data folder used in Visual Studio?](https://stackoverflow.com/questions/528858/what-is-the-app-data-folder-used-for-in-visual-studio)）

# eclipse - Eclipse ${project_name} 扩展不一致

> ID：10413552
> 
> 赞同：1
> 
> 时间：2012-05-02T12:15:52.803
> 
> 标签：eclipse, jvm, jvm-arguments

我一直在使用 Eclipse`${project_name}`变量作为配置类 hack 来确定正在运行的项目。

### 虚拟机参数

`-Dproject_name=${project_name}`在相关的 JRE 构建器中。

### 代码

```
String projectName      = System.getProperty("project_name"); 
```

问题是**projectName 在不同的机器上不一致，有时在同一台机器上。**

有时会被解析成`${project_name}`，有时会被解析到配置项目中，有时会被解析到调用配置的项目中。

如果相关，我们使用 Eclipse 3.6 和 3.71。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T12:28:54.263

我已经看到 的值`${project_name}`取决于当前在 IDE 中关注的项目。例如，当在包资源管理器中选择其文件之一或在编辑器中打开其文件之一并且焦点位于编辑器时，项目具有焦点。

不幸的是，它与启动的应用程序所属的项目无关，而且我不知道包含该项目的 Eclipse 变量（尽管我也对此解决方案感兴趣）。

因此，作为一种变通方法，当您从 Eclipse 中运行应用程序时，请确保您实际上处于正确的项目中。

# bash - 从 UNIX 运行 sql*loader 时出现消息 2100

> ID：10413553
> 
> 赞同：2
> 
> 时间：2012-05-02T12:15:59.527
> 
> 标签：bash, unix, sql-loader

我有包含下一个内容的 .sh 文件：

```
#!/bin/bash    
echo -------- uploader.sh v 0.1 --------
ORACLE_HOME=/opt/app/oracle/product/10.2.0/db_1/bin/
export ORACLE_HOME
PATH=$ORACLE_HOME
export PATH

sqlldr userid=PR/0611@database control=control_file.ctl LOG=fb_log.log errors=100 
```

所以，我想运行 sql loader 并上传数据。当我运行 uploader.sh 时，我收到来自 unix 的下一条消息：

> 未找到消息 2100；没有产品=RDBMS 的消息文件，设施=ULMessage 2100 未找到；没有产品消息文件=RDBMS，设施=UL

我已经阅读并得出结论认为问题出在环境变量中。你能帮我解决这个错误吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-02T12:18:18.713

更改此行

```
ORACLE_HOME=/opt/app/oracle/product/10.2.0/db_1/bin/ 
```

至

```
ORACLE_HOME=/opt/app/oracle/product/10.2.0/db_1 
```

看到它

还要检查您的系统上是否有 ORAUS.MSB

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-04-01T08:29:01.973

聚会迟到了，但我今天在 Windows 上遇到了类似的问题，发现很多帖子都提到了 ORAUS.MSB，但我已经有了。为了解决这个问题，我从另一台机器上复制了 ULUS.MSB - 可能会对某人有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-04T12:12:27.110

在 shell 中声明将被执行并在 sqlldr 中进行调用的环境变量。它对我有用。

例子：

```
#!/bin/bash
set +vx

LD_LIBRARY_PATH=/oracle/app/oracle/product/11.2.0/client_1/lib
ORACLE_HOME=/oracle/app/oracle/product/11.2.0/client_1
PATH=$PATH:$HOME/bin:$ORACLE_HOME/bin:$LD_LIBRARY_PATH:$ORACLE_HOME/rdbms/mesg
export LD_LIBRARY_PATH
export ORACLE_HOME
export PATH

sqlldr userid=USER/PWD@BANK control=control_file.ctl LOG=fb_log.log errors=100 
```

# c++ - 在线程中创建 COM 对象

> ID：10413554
> 
> 赞同：1
> 
> 时间：2012-05-02T12:16:17.250
> 
> 标签：c++, multithreading, com

我有一个按钮，在那个按钮后面我创建了一个线程，

```
void FunctionCallingThreadFunction()
{
    AfxBeginThread(MyFunction, NULL);
} 
```

在 MyFunction 我正在创建一个 COM 对象，但是当我创建它的实例时，null 被返回给我，

```
MyFunction(LPVOID pvParam)
{
    comObject.CreateInstance(__uuidof(ClassName), NULL, CLSCTX_INPROC_SERVER);
} 
```

但是，如果我在原始函数中创建这个 comObject，它会创建得很好，

什么问题？，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T12:18:52.427

`CoInitialize()`在尝试创建实例之前，您需要调用每个线程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T12:19:33.223

您需要在每个使用 COM 的线程中调用[CoInitializeEx 。](http://msdn.microsoft.com/en-us/library/aa909149.aspx)

# ajax - 如何在 Spine 堆栈中新建后导航到编辑路由

> ID：10413560
> 
> 赞同：1
> 
> 时间：2012-05-02T12:17:11.717
> 
> 标签：ajax, ruby-on-rails-3, spine.js

我正在使用 Spine.Stack，我正在尝试找到在编辑页面结束创建新记录的最佳方式。站点上的 spin/rails 示例显示 @navigate 返回到索引列表，但我需要在编辑页面上结束我刚刚创建的记录。目前我有

```
item = WorkRequest.fromForm(e.target)
if item.save()
  @navigate '/work_requests', item.id, 'edit' if item 
```

现在这确实出现在编辑页面上，但是因为模型是 Ajax 模型，所以它保存到服务器并获取服务器端 ID，但此时我调用`@navigate`item.id 是客户端 ID（c-## ）。因此，我最终到达的 URL`/work_requests/c-##/edit`没有服务器端等效项。

据我所知，我有两个选择

1.  等待 Ajax 响应，然后导航到使用服务器生成的 ID 进行编辑
2.  调用导航，但在 Ajax 保存响应后更新 URL（当编辑表单使用服务器端 ID 重新呈现时。

选项 2 似乎最符合非阻塞界面的精神，但我需要确保如果用户在此期间执行任何操作，ID 都会自行解决。选项 1 似乎更安全，但确实会强制用户等待保存完成，然后才能对其进行编辑。

作为旁注；立即编辑的原因是创建一个或多个子项目（如发票上的行），这些都使用嵌套资源路径`/work_requests/:id/work_request_lines`

非常感谢任何帮助，欢呼。

# php - 扩展 PHP 以与 R 编程语言进行通信

> ID：10413563
> 
> 赞同：1
> 
> 时间：2012-05-02T12:17:19.237
> 
> 标签：php, c++, c, r, php-extension

我正在构建一个 PHP 扩展模块以允许 PHP 与 R 编程语言进行通信。

我对这个模块的目标是允许我直接从 PHP 运行一些 R 函数。

我之前没有在 PHP 上构建任何扩展，但我知道如何编写一个 php 程序。我对C和C++略知一二

我很想听听专家对此的建议。

以下是我想知道的一些问题：

1.  是否有可能实现上述想法？
2.  我需要什么工具？
3.  这样做的有效方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T13:25:54.500

请在发帖前使用右上角 的*搜索功能。*

之前已经问过类似的问题，请参见例如

*   [在 PHP 和 R 之间传递和获取变量](https://stackoverflow.com/questions/8675745/pass-and-get-variables-between-php-and-r)
*   [将 R 语言与 php 集成以从 R 中获取结果](https://stackoverflow.com/questions/8104451/integration-of-r-language-with-php-to-take-the-result-from-r)
*   [php 和 R 集成](https://stackoverflow.com/questions/8033038/php-and-r-integration)

可能还有更多。

# ios - 如何将数据从 UITextField 放入 IBAction 字符串

> ID：10413568
> 
> 赞同：0
> 
> 时间：2012-05-02T12:17:31.417
> 
> 标签：ios, objective-c, xcode, cocoa-touch, uitextfield

我有**UITextField**名为**textField ，用户可以在其中使用****NSUserDefaults**保存电话号码。然后我让**IBAction**拨打该号码。如何将用户已保存到**UITextField**的数字放入该操作？

```
-(IBAction)callPhone:(id)sender {
    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:@"tel:123456"]];
} 
```

**更新**

```
- (IBAction) saveBtnPresssed : (id) sender
{
    myString1 = [[NSString alloc] initWithFormat:textField.text];
    [textField setText:myString1];
    NSUserDefaults *stringDefault = [NSUserDefaults standardUserDefaults];
    [stringDefault setObject:myString1 forKey:@"stringKey"];
}

- (void)viewDidLoad
{
    [textField setText:[[NSUserDefaults standardUserDefaults] objectForKey:@"stringKey"]];
    [super viewDidLoad];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T12:24:35.960

您要查找的字符串由以下方式返回：

```
[textField text]; 
```

如果您将其保存为用户默认值，那么您可以：

```
-(IBAction)callPhone:(id)sender {
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
NSString *phoneNumberString = [defaults objectForKey:@"key_you_saved_the_number_with"];

//... do what you need with that number here 
```

}

编辑：

```
 [NSURL URLWithString:[NSString stringWithFormat:@"tel:%@"], [defaults objectForKey:@"stringKey"]]; 
```

所以结果字符串应该是“tel:”+文本字段中的实际数字而不是“tel:123456”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T12:49:45.567

在您的代码设置中，不需要使用相同字符串的文本文件。只需使用：

```
 (IBAction) saveBtnPresssed : (id) sender
{
    myString1 = [[NSString alloc] initWithFormat:textField.text];
    NSUserDefaults *stringDefault = [[NSUserDefaults standardUserDefaults] setObject:myString1 forKey:@"YOUR_KEY"];
} 
```

这会将字符串设置为您的默认值，您可以将数据获取为

```
NSString *pString = [defaults objectForKey:@"YOUR_KEY"]; 
```

# javascript - 在 JavaScript 中四舍五入到最接近的 0.05

> ID：10413573
> 
> 赞同：20
> 
> 时间：2012-05-02T12:17:43.287
> 
> 标签：javascript, rounding

**问题**
有谁知道在 JavaScript 中将浮点数舍入到最接近的 0.05 的方法？

**例子**

```
BEFORE | AFTER
  2.51 | 2.55
  2.50 | 2.50
  2.56 | 2.60 
```

**当前代码**

```
var _ceil = Math.ceil;
Math.ceil = function(number, decimals){
    if (arguments.length == 1)
    return _ceil(number);

    multiplier = Math.pow(10, decimals);
    return _ceil(number * multiplier) / multiplier;
} 
```

然后在别处... `return (Math.ceil((amount - 0.05), 1) + 0.05).toFixed(2);`

这导致...

```
BEFORE | AFTER
  2.51 | 2.55
  2.50 | 2.55
  2.56 | 2.65 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-05-02T12:19:28.883

乘以 20，然后除以 20：

```
(Math.ceil(number*20)/20).toFixed(2) 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-05-02T12:28:05.753

Rob 对我的补充回答：

```
(Math.ceil(number*20 - 0.5)/20).toFixed(2) 
```

否则，它总是四舍五入到最接近的 0.05。

** 更新 **

对不起，有人指出这不是原始海报想要的。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2014-01-27T14:24:21.147

我会采用实际除以您要分解的数字的标准，然后将其四舍五入，然后再乘回去。这似乎是一种适当的工作方法，您可以使用任何数量并保持您想要实现的目标的心理形象。

```
var val = 26.14,
    factor = 0.05;

val = Math.round(val / factor) * factor; 
```

这将适用于数十、数百或任何数量。如果您专门四舍五入到更高的数字，则使用`Math.ceil`而不是`Math.round`.

另一种专门用于四舍五入到小数点后一位或多位（而不是半位）的方法如下：

```
Number(Number(1.5454545).toFixed(1)); 
```

它创建一个固定数字字符串，然后将其变成一个实数`Number`。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-07-28T17:15:19.313

我会写一个函数来为你做

*   将小数点移动两位（乘以 100）
*   然后 mod ( `%`)`inflatedNumber`乘以 5 并得到余数
*   从 5 中减去，`remainder`这样你就知道`ceilGap`你的数字和下一个最接近的 0.05 之间的“差距”（ ）是多少
*   最后，将您`inflatedNumber`的数字除以 100，使其回到原来的浮点数，瞧，您的数字将四舍五入到最接近的 0.05。

    ```
    function calcNearestPointZeroFive(num){
        var inflatedNumber = num*100,
            remainder     = inflatedNumber % 5;
            ceilGap       = 5 - remainder

        return (inflatedNumber + ceilGap)/100
    } 
    ```

如果你想保持 5.50 这样的数字不变，你可以随时添加这个检查器：

```
if (remainder===0){
    return num
} else {
    var ceilGap  = 5 - remainder
    return (inflatedNumber + ceilGap)/100
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-10-25T12:51:13.553

您需要将 -1 向下舍入一半，然后乘以 -1，如下面的示例。

```
<script type="text/javascript">

  function roundNumber(number, precision, isDown) {
    var factor = Math.pow(10, precision);
    var tempNumber = number * factor;
    var roundedTempNumber = 0;
    if (isDown) {
      tempNumber = -tempNumber;
      roundedTempNumber = Math.round(tempNumber) * -1;
    } else {
      roundedTempNumber = Math.round(tempNumber);
    }
    return roundedTempNumber / factor;
  }
</script>

<div class="col-sm-12">
  <p>Round number 1.25 down: <script>document.write(roundNumber(1.25, 1, true));</script>
  </p>
  <p>Round number 1.25 up: <script>document.write(roundNumber(1.25, 1, false));</script></p>
</div>
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-08-15T11:44:13.373

我最终在我的项目中成功地使用了这个功能：

```
roundToNearestFiveCents( number: any ) {
    return parseFloat((Math.round(number / 0.05) * 0.05).toFixed(2));
} 
```

可能对想要简单地将其货币结果四舍五入到最接近的 5 美分的人有用，将结果保留为一个数字，因此如果您进一步对其执行加法，则不会导致字符串连接；正如其他一些答案所指出的那样，也没有不必要的四舍五入。还将其限制为两位小数，这是金融界的惯例。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-10-05T08:58:04.110

我的解决方案和测试：

```
let round = function(number, precision = 2, rounding = 0.05) {
  let multiply = 1 / rounding;

  return parseFloat((Math.round(number * multiply) / multiply)).toFixed(precision);
}; 
```

[https://jsfiddle.net/maciejSzewczyk/7r1tvhdk/40/](https://jsfiddle.net/maciejSzewczyk/7r1tvhdk/40/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-01-18T05:03:59.963

尽管 OP 没有明确说明庄家四舍五入，但四舍五入到最接近的 0.05 美元（5 美分）应该与庄家四舍五入兼容。Arth 的建议比 Rob W. 接受的答案更准确。

`(Math.ceil(number*20 - 0.5)/20).toFixed(2)`

使用银行家舍入，您需要一个基本的银行家舍入函数，如[Gaussian/banker's rounding in JavaScript](http://stackoverflow.com/questions/3108986/gaussian-bankers-rounding-in-javascript)中建议的那样，我用 TypeScript 重写：

```
 static bankerRound(num: number, decimalPlaces?: number) {
        const d = decimalPlaces || 0;
        const m = Math.pow(10, d);
        const n = +(d ? num * m : num).toFixed(8);
        const i = Math.floor(n), f = n - i;
        const e = 1e-8;
        const r = (f > 0.5 - e && f < 0.5 + e) ?
            ((i % 2 === 0) ? i : i + 1) : Math.round(n);
        return d ? r / m : r;
    }

    static roundTo5cents(num: number) {
        const r = bankerRound(Math.ceil(num * 20 - 0.5) / 20, 2);
        return r;
    } 
```

该算法的正确性可以通过MBS Online进行验证，例如[http://www9.health.gov.au/mbs/ready_reckoner.cfm?item_num=60](http://www9.health.gov.au/mbs/ready_reckoner.cfm?item_num=60)

# java - 为什么 net().get 成功返回空字符串

> ID：10413576
> 
> 赞同：0
> 
> 时间：2012-05-02T12:17:59.090
> 
> 标签：java, android, playn

这是与playn。我使用它，只是为了尝试它是如何工作的：

```
net().get("http://google.com", new Callback<String>() 
 {
   @Override
   public void onSuccess(String result) {
    drawResult(result);
   }                    
   @Override
   public void onFailure(Throwable cause) {
   // TODO Auto-generated method stub
     drawResult(cause.toString());
   }
 });
} 
```

当我为 Android 或 Java 启动这个时，onSuccess 结果是好的。当我开始为 html 结果为空时，我错在哪里？感谢并为我糟糕的英语感到抱歉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T19:32:49.863

这与网络浏览器的同源策略有关：请参阅 [http://en.wikipedia.org/wiki/Same_origin_policy](http://en.wikipedia.org/wiki/Same_origin_policy)

解决方法：首先从您的网络服务器执行您的 (google-) 查询。然后让您的网络服务器与您的 PlayN-html-client 通信。

# javascript - jquery 醉醺醺的。触发器：焦点不适用于单选按钮

> ID：10413577
> 
> 赞同：0
> 
> 时间：2012-05-02T12:18:04.960
> 
> 标签：javascript, jquery, jquery-plugins

我正在使用[这个插件来显示工具提示](http://onehackoranother.com/projects/jquery/tipsy/)

看着这个小提琴 - [http://jsfiddle.net/CmmUC/1/](http://jsfiddle.net/CmmUC/1/)

您会看到提示没有出现。如果您将 javascript 更改为

```
$('.tooltip').tipsy({ gravity: 'w' }); 
```

为什么插件讨厌“焦点”？我是否遗漏了导致问题的明显原因？

我正在使用最新的稳定版 Chrome。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T22:02:40.170

查看我的小提琴更新版本：

[http://jsfiddle.net/CmmUC/7/](http://jsfiddle.net/CmmUC/7/)

基本上，您需要`trgger: 'manual'`在实例化时添加选项，并使用 jquery 悬停功能手动显示/隐藏醉意。

# android - 地图视图气球错误

> ID：10413585
> 
> 赞同：1
> 
> 时间：2012-05-02T12:18:31.390
> 
> 标签：android, android-mapview

我最近偶然发现了这个非常简洁的 api，用于在 android MapView 中显示 callOutbubbles。我只是遇到了这个 api 的问题，当我尝试按照示例实现 api 时，我收到此错误：

```
05-02 14:13:19.847: E/AndroidRuntime(11857): java.lang.NoClassDefFoundError: com.readystatesoftware.mapviewballoons.R$layout 
```

我在错误之前收到了这个警告：

```
05-02 14:13:19.838: W/dalvikvm(11857): VFY: unable to resolve static field 590 (balloon_overlay) in Lcom/readystatesoftware/mapviewballoons/R$layout; 
```

你们中有人遇到同样的问题吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T12:26:20.757

我假设您已将 MapViewBallon 项目作为库包含（如果没有，则发布详细信息，以及您所指的项目链接）。执行以下步骤：

*   清除所有参考项目库（从*ProjectProperties > Android > Library*）。
*   使用*Project>Clean*清理您的项目。
*   再次添加库项目。
*   构建和安装。

# c# - 托管 C++ 和 AnyCPU

> ID：10413590
> 
> 赞同：8
> 
> 时间：2012-05-02T12:18:50.947
> 
> 标签：c#, .net, managed-c++, anycpu

我有一个从 C# 项目引用的托管 C++ dll。C# 项目将编译为 AnyCPU。有没有办法编译托管 C++ dll 的 32 位和 64 位版本，然后在运行时告诉 C# 项目根据正在运行的架构加载正确的版本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-11-22T16:58:36.880

让 AnyCPU dll 与 C++ dll 一起使用的技巧是在运行时确保程序集无法加载 C++ dll，然后订阅 AppDomain AssemblyResolve 事件。当程序集尝试加载 dll 并失败时，您的代码就有机会确定需要加载哪个 dll。

订阅事件看起来像这样：

```
System.AppDomain.CurrentDomain.AssemblyResolve += Resolver; 
```

事件处理程序看起来像这样：

```
System.Reflection.Assembly Resolver(object sender, System.ResolveEventArgs args)
{
     string assembly_dll = new AssemblyName(args.Name).Name + ".dll";
     string assembly_directory = "Parent directory of the C++ dlls";

     Assembly assembly = null;
     if(Environment.Is64BitProcess)
     {
            assembly = Assembly.LoadFrom(assembly_directory + @"\x64\" + assembly_dll);
     }
     else
     {
            assembly = Assembly.LoadFrom(assembly_directory + @"\x86\" + assembly_dll);
     }
     return assembly;
} 
```

我创建了一个简单的项目，演示如何从 AnyCPU dll 访问 C++ 功能。

[https://github.com/kevin-marshall/Managed.AnyCPU](https://github.com/kevin-marshall/Managed.AnyCPU)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T12:29:23.717

我不知道您如何“引用” C++ dll（P/Invoke vs .net 程序集参考），但无论哪种方式，您都可以在安装时交换两个版本的 .dll。

# android - Android：在 UI 线程问题中更新文本

> ID：10413595
> 
> 赞同：3
> 
> 时间：2012-05-02T12:19:13.287
> 
> 标签：android, ui-thread

我很陌生`Android`。我以前用过`Java`，但没有一年半左右。我在更新屏幕时遇到问题，或者更确切地说是`TextView`. 我已经在网上寻找了几个小时的解决方案，我有点知道为什么它不起作用，但我不知道如何解决它。

```
public class PreliminaryActivity extends Activity {

//private static final int MENU_QUIT = Menu.FIRST;
int i = 0;
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    getWindow().setBackgroundDrawableResource(R.drawable.background);
    mainComputations();
}

    public void mainComputations(){
        runOnUiThread(new Runnable(){
        //@Override
            public void run(){

                TextView tv = (TextView) findViewById(R.id.time_display);

                tv.setText(new Integer(i).toString());
                i++;
            }
        });
    } 
```

我已经削减了我的程序，所以它应该只在屏幕上增加一个 int 值以进行测试，但它仍然无法工作。相反，它只显示“0”。如果我在方法之前添加一个 for 循环`runOnUiThread()`，它会增加 i 值，但我觉得它只是增加值然后显示它而不是实时更新。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T12:23:48.107

去 TextSwitcher

[http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/view/TextSwitcher1.html](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/view/TextSwitcher1.html)

如果您希望您的 textview 延迟更新。使用这样的东西。

```
 final int length = 10;
 Thread t = new Thread(new Runnable() {

     @Override
     public void run() {
        for(int i=0 ; i<length; i++) {
           runOnUiThread(new Runnable() {

              @Override
              public void run() {
                tv.setText(new Integer(i).toString());
              }
           }) ; 
           i++;
           Thread.sleep(500);
        }
     }
  });
  t.start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T12:24:39.740

在 android 中，您不能从另一个线程更新 UI。这是 android 开发中的限制（我认为这是删除不必要的错误的功能）。您可以为此使用 AsyncTask ...

在使用中，您可以在 donInBackground() 中执行长任务，然后可以使用 onProgressUpdate() 更新 UI ...请参阅[此处的 AsyncTask 示例](http://developer.android.com/reference/android/os/AsyncTask.html)

**编辑**

有关更多信息，请参阅[此](https://stackoverflow.com/questions/3745405/threading-ui-updates-in-android)类似问题...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T12:24:46.683

你的问题是因为你`mainComputations()`只打电话一次。你应该看看[`AsyncTask`](http://developer.android.com/reference/android/os/AsyncTask.html)Android 开发者资源[Updating UI from a Timer](http://developer.android.com/resources/articles/timed-ui-updates.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T12:25:14.077

您无法从另一个线程更新主 UI 线程，因为您需要使用 Handler。请参阅此链接以获取更多详细信息

[http://www.vogella.com/articles/AndroidPerformance/article.html](http://www.vogella.com/articles/AndroidPerformance/article.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-02T12:26:30.453

我看到的是你只调用了一次 mainComputations，所以它是 0。

# ios - 从ios中的经纬度获取地址

> ID：10413599
> 
> 赞同：0
> 
> 时间：2012-05-02T12:19:27.083
> 
> 标签：ios, mkmapview, core-location

我一直在为 ios 编程，我需要获取地址。如何从 json 或其他格式的纬度和经度获取完整地址？我可以在没有互联网连接的情况下获得它吗？感谢您的关注。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T12:27:53.183

您需要的是[`CLGeocoder`](http://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLGeocoder_class/Reference/Reference.html#//apple_ref/occ/cl/CLGeocoder)（在 iOS 5 上）和[`MKReverseGeocoder`](http://developer.apple.com/library/ios/#documentation/MapKit/Reference/MKReverseGeocoder_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40008323)（在较旧的 iOS 版本上）。

两者都使用谷歌地图获取地址数据，因此您需要互联网连接才能获取数据。

您将获得地址，但您可以使用[JSONKit](https://github.com/johnezang/JSONKit)或许多其他工具`NSDictionary`轻松地将其转换为 JSON 字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T12:28:40.050

查看 CLGeocoder 的 Apple 文档——特别是 reverseGeocodeLocation:completionHandler: 方法。它需要一个 CLLocation 并返回您正在寻找的反向地理编码信息。由于这使用谷歌地图，您将需要互联网连接。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-02T12:28:07.740

您应该查看[反向地理编码](http://developer.apple.com/library/ios/#documentation/MapKit/Reference/MKReverseGeocoder_Class/Reference/Reference.html)

# php - htaccess 错误页面和身份验证

> ID：10413610
> 
> 赞同：0
> 
> 时间：2012-05-02T12:19:57.450
> 
> 标签：php, .htaccess, authentication

任务 1：我正在使用 htaccess`Options -Indexes`停止目录列表。但是，我希望它显示 404 page not found 响应而不是 403 禁止响应。我怎样才能为每个目录做到这一点？

任务 2：假设我有一个包含一些可下载文件的目录。有没有办法阻止用户使用 .htaccess 下载文件，直到他们登录到我的网站？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T07:23:44.110

**任务 1：**试试这个

```
RewriteEngine On
RewriteBase   /my_directory
RewriteRule   ^$ - [R=404,L] 
```

**任务 2：**首先您需要防止使用 htaccess 直接下载文件。
然后你必须创建你的 php 文件来检查是否登录。
如果然后记录，请将标头设置为目标文件，然后打开它。

这 2 个教程将指导您。
[http://www.ssdtutorials.com/tutorials/title/download-file-with-php.html](http://www.ssdtutorials.com/tutorials/title/download-file-with-php.html)
[http://www.devshed.com/c/a/PHP/Simple-and-Secure-PHP-Download-Script -with-Limits-Tutorial/](http://www.devshed.com/c/a/PHP/Simple-and-Secure-PHP-Download-Script-with-Limits-Tutorial/)

# session - 在两个 Web 应用程序之间同步会话

> ID：10413624
> 
> 赞同：3
> 
> 时间：2012-05-02T12:21:00.057
> 
> 标签：session, tomcat, timeout

## 用例：

我有两个在 tomcat 上运行的 Web 应用程序，它们部署在两台不同的机器上。我的一个申请是父母，另一个是孩子。我登录到我的父应用程序并点击父应用程序的一个页面上的链接我向我的子应用程序发送一个浏览器请求，该请求在单独的浏览器窗口中打开它的一个页面。在这种情况下，我希望我的两个应用程序共享相同的超时值，并且应该表现得像一个完整的应用程序。

## 处理场景：

1.  如果我从我的父应用程序注销，我的子应用程序也应该注销
2.  如果我关闭父窗口，父母应该和孩子一起注销
3.  如果我关闭子窗口，孩子应该注销，父母应该保持登录状态
4.  如果两个窗口都关闭，父母和孩子都应该注销

## 解决方案：

1.  将父会话超时设置为某个值..say 30mins
2.  在父级上创建一个 REST 服务。让我们说“parentisAlive()”
3.  在 child..let 上创建一个 REST 服务，比如说“childisAlive()”
4.  在父子节点上创建会话监听器
5.  每个会话侦听器都会调用其各自的 REST 服务
6.  REST 服务将根据自己的应用程序的 sessionID 相互通信
7.  父母会保留（内存/数据库）孩子的 sessionID，反之亦然
8.  当每个超时值达到特定值时，各个应用程序会话侦听器将被激活..say 20mins
9.  会话侦听器将调用相应的 REST 服务，该服务将负责同步彼此的会话超时值

任何人都可以建议这是否是实现会话同步的一个很好的解决方案，有人认为这有什么缺陷吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T18:03:34.860

Tomcats [Single Sign on](http://tomcat.apache.org/tomcat-5.5-doc/config/host.html#Single_Sign_On) Valve 将满足您的大部分需求。但是，如果您关闭浏览器窗口，会话仍将保留，只要至少打开窗口或选项卡即可。

# html - 无法在 Silverstripe 中安装主题

> ID：10413625
> 
> 赞同：1
> 
> 时间：2012-05-02T12:21:01.137
> 
> 标签：html, content-management-system, silverstripe

我正在尝试在 SilverStripe 中安装这个主题： [http ://www.silverstripe.org/woody-theme/](http://www.silverstripe.org/woody-theme/)

这是我所做的：

*   我在 mysite 文件夹中复制了 code/Page.php 和 CustomSiteConfig.php。

*   还复制了链接中提到的 _config.php 的最后一行。

*   然后将 templates/woody 文件夹复制到主题目录。

*   将woodybox复制到根文件夹中。

*   修改了 mysite/_config.php 文件以包含以下行： SSViewer::set_theme('woody');

尽管如此，该站点仍显示服务器错误。我认为这是安装主题的错误。我也能够正确安装其他主题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-12T11:28:39.293

从错误日志中可以清楚地看出您尚未运行`/dev/build?flush=1`

删除所有内容并再次尝试安装，我试过了，对我来说效果很好。

# android - BitmapFactory.decodeResource() 忽略 jpg 图像的 inPreferredConfig 选项

> ID：10413628
> 
> 赞同：4
> 
> 时间：2012-05-02T12:21:23.573
> 
> 标签：android, colors, bitmap, jpeg, decode

我尝试将 jpeg 资源图像加载到 ARGB_8888 格式的位图：

```
BitmapFactory.Options opts = new BitmapFactory.Options();
opts.inPreferredConfig = Bitmap.Config.ARGB_8888;
Bitmap b = BitmapFactory.decodeResource(resources, resId, opts);
Log.d("test", b.getConfig().toString()); 
```

这里*resId*是一个 jpeg 图片资源的 id。输出为“ **RGB_565** ”。在 android 2.2 和 2.3 的模拟器中试过这个。

“inPreferredConfig”的文档说：

> 如果这是非空的，解码器将尝试解码到这个内部配置。如果它为空，或者无法满足请求，解码器将尝试根据系统的屏幕深度和原始图像的特征（例如它是否具有每像素 alpha）来选择最佳匹配配置（需要一个配置也做）。默认情况下，图像使用 ARGB_8888 配置加载。

那么我是否遇到了“*无法满足请求*”的情况？:) 但老实说，我看不出将 RGB_565 解码为 ARGB_8888 是多么困难。

所以我想也许我做错了或者这是Android中的一个错误......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T15:11:09.920

查看源代码后，我只能说遵循定义的决定`inPreferredConfig`是在本机代码中完成的。参考：[来源](https://github.com/android/platform_frameworks_base/blob/master/graphics/java/android/graphics/BitmapFactory.java#L483)

我会假设因为 jpg 不能有 alpha 通道，所以它正在解码它，`RGB_565`因为它是非 alpha 图像最有效的配置。如果您真的希望将其解码以`ARGB_8888`将图像转换为png。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-13T09:42:07.620

加载 jpeg 时，您必须将 alpha 通道设置为 true：

```
bitmap.setHasAlpha(true); 
```

# python - Python，在 IDLE 中编写多行代码

> ID：10413637
> 
> 赞同：10
> 
> 时间：2012-05-02T12:21:40.857
> 
> 标签：python, python-idle

我怎么写

```
 >>> x = int(raw_input("Please enter an integer: "))
    >>> if x < 0:
    ...      x = 0
    ...      print 'Negative changed to zero'
    ... elif x == 0:
    ...      print 'Zero'
    ... elif x == 1:
    ...      print 'Single'
    ... else:
    ...      print 'More'
    ... 
```

这在空闲。写完第一行后我一按回车，它就会执行第一行，我无法编写完整的代码。我对python很陌生，今天才开始。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-02T12:23:14.543

在顶部菜单中尝试 File => New File。然后在此窗口中编写代码并按 F5 键运行它（或在顶部菜单中运行）

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-02T12:26:43.173

1：在行之间使用分号
2：尝试 iPython
3：将其编写为函数，例如

```
def myfunc():
    x = int(raw_input("Please enter an integer: "))
    if x < 0:
        x = 0
        print 'Negative changed to zero'
    elif x == 0:print 'Zero'
    elif x == 1:print 'Single'
    else:print 'More' 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-12-06T05:04:12.987

`Shift`+`Enter`将您带到下一行而不执行当前行。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2020-02-07T10:24:18.653

将该`exec`函数与多行字符串 ( `"""`) 一起使用对于我的特定用例来说效果很好：

```
exec("""for foo in bar:
  try:
    something()
  except:
    print('Failed')""" 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-10-31T17:03:30.400

无法在 python 控制台中编写多行代码。需要一个第三方应用程序。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-05-26T08:32:58.450

如果您执行 File --> New File，它应该会打开一个新的可保存窗口，您可以在该窗口中写入多行并保存为 .py 文件。

# ruby-on-rails - Rails 3：Omniauth Facebook Gem 中的弹出选项

> ID：10413641
> 
> 赞同：1
> 
> 时间：2012-05-02T12:21:45.673
> 
> 标签：ruby-on-rails, facebook, omniauth

正如我在[Github](https://github.com/mkdynamic/omniauth-facebook/issues/47)上提到的，这个选项让我很困惑！

它应该实际处理弹出窗口还是意味着其他？当您使用 Omniauth 开箱即用时，这有点奇怪，但这种交互很笨拙。

我见过这个不是很优雅的“解决方案”。

[将omniauth facebook登录变成弹出窗口](https://stackoverflow.com/questions/4491433/turn-omniauth-facebook-login-into-a-popup)

我是否遗漏了什么，或者我是否需要通过 FB Javascript API 放弃服务器交互和身份验证？

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T09:21:21.677

简而言之：“display=popup 选项只是告诉 Facebook 提供优化的页面以在弹出窗口中显示。您需要使用 Javascript 自己打开弹出窗口。”

最流畅的 UX 似乎是使用 FB JS API。

看：

[https://github.com/mkdynamic/omniauth-facebook/issues/47#issuecomment-5524582](https://github.com/mkdynamic/omniauth-facebook/issues/47#issuecomment-5524582)

# java - NoClassDefFoundError 消息因上下文而异

> ID：10413644
> 
> 赞同：2
> 
> 时间：2012-05-02T12:21:58.243
> 
> 标签：java, noclassdeffounderror

NoClassDefFoundError 在不同的上下文中给了我不同类型的消息

就上下文而言，我的意思是，

上下文 1：如果我删除`sapjco3.jar`，则消息是

```
java.lang.NoClassDefFoundError: com/xxx/xxx/AbapException 
```

上下文2：如果我在webapp lib中添加jar文件，消息是

```
java.lang.NoClassDefFoundError: com.xxx.xxx.CpicDriver 
```

我知道`java.lang.NoClassDefFoundError`在运行时找不到类时抛出。

但是为什么在消息中表示类时会有所不同，即用斜杠（路径）和点（包）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T12:52:15.537

如果您查看 javadoc 中的[NoClassDefFoundError 异常，](http://www.docjar.com/docs/api/java/lang/NoClassDefFoundError.html)您会看到它有两个构造函数，其中一个是接受消息作为参数。

因此，找不到类的名称格式取决于引发异常的代码。

我不知道 sapjco，但也许这两个类是由不同的类加载器加载的......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T12:35:53.700

好像 java.lang.NoClassDefFoundError: com/xxx/xxx/AbapException is missing。这不在 sapjco3.jar 中。

假设 a.class 和 b.class 是必需的，加载顺序是 a,b。如果 a 和 b 不在类路径中，您将首先得到 a 丢失。如果将 a 添加到类路径中，您将丢失 b。希望这很清楚。

# java - 在 GWT 中将字符串转换为 BigDecimal

> ID：10413645
> 
> 赞同：2
> 
> 时间：2012-05-02T12:21:59.540
> 
> 标签：java, gwt, bigdecimal

在我的 GWT Web 应用程序中，我有一个包含价格的文本框。如何将该字符串转换为 BigDecimal？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-03T04:18:13.427

最简单的方法是创建继承 ValueBox 的新文本框小部件。如果您这样做，您将不必手动转换任何字符串值。ValueBox 负责这一切。

要输入 BigDecimal 值，您可以：

`BigDecimal value = myTextBox.getValue();`

你的**BigDecimalBox.java**：

```
public class BigDecimalBox extends ValueBox<BigDecimal> {
  public BigDecimalBox() {
    super(Document.get().createTextInputElement(), BigDecimalRenderer.instance(),
        BigDecimalParser.instance());
  }
} 
```

然后你的**BigDecimalRenderer.java**

```
public class BigDecimalRenderer extends AbstractRenderer<BigDecimal> {
  private static BigDecimalRenderer INSTANCE;

  public static Renderer<BigDecimal> instance() {
    if (INSTANCE == null) {
      INSTANCE = new BigDecimalRenderer();
    }
    return INSTANCE;
  }

  protected BigDecimalRenderer() {
  }

  public String render(BigDecimal object) {
    if (null == object) {
      return "";
    }

    return NumberFormat.getDecimalFormat().format(object);
  }
} 
```

还有你的**BigDecimalParser.java**

```
package com.google.gwt.text.client;

import com.google.gwt.i18n.client.NumberFormat;
import com.google.gwt.text.shared.Parser;

import java.text.ParseException;

public class BigDecimalParser implements Parser<BigDecimal> {

  private static BigDecimalParser INSTANCE;

  public static Parser<BigDecimal> instance() {
    if (INSTANCE == null) {
      INSTANCE = new BigDecimalParser();
    }
    return INSTANCE;
  }

  protected BigDecimalParser() {
  }

  public BigDecimal parse(CharSequence object) throws ParseException {
    if ("".equals(object.toString())) {
      return null;
    }

    try {
      return new BigDecimal(object.toString());
    } catch (NumberFormatException e) {
      throw new ParseException(e.getMessage(), 0);
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T12:27:01.303

看看[GWT-Math](http://code.google.com/p/gwt-math/)。

# visual-studio-2010 - 如何在设置向导中显示完成表单，就像设置被中断一样？

> ID：10413647
> 
> 赞同：0
> 
> 时间：2012-05-02T12:22:07.500
> 
> 标签：visual-studio-2010, c#-4.0, setup-project, wizard

我正在 Visual Studio 2010 中创建一个安装向导项目。在安装过程中，我在自定义操作中运行 PowerShell 脚本，根据其结果，我需要显示成功或中断/失败的完成表单。我怎样才能做到这一点？

PS 如果重要，该脚本将以静默模式运行。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T12:04:58.830

标准设置向导不支持状态。以编程方式中断设置的唯一方法是抛出导致通知的异常，这在我的情况下是不可接受的。

# asp.net - 在多个网页上共享相同的信息

> ID：10413648
> 
> 赞同：0
> 
> 时间：2012-05-02T12:22:25.110
> 
> 标签：asp.net

如何在不编写代码的情况下跨多个网页共享相同的有序列表？以这种方式，信息只需要在一个位置更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T12:28:30.890

您可以构建一个 ASP.NET 用户控件 (http://msdn.microsoft.com/en-us/library/y6wb1a0e.aspx)，这样您就可以将列表放在那里并在您需要的每个页面上使用您的用户控件。

有了这个，您只需要在用户控件中更改您的有序列表，并且此更新将在您使用用户控件的任何地方可用。

# xpath - 获取所有儿童文本的xpath

> ID：10413649
> 
> 赞同：35
> 
> 时间：2012-05-02T12:22:35.487
> 
> 标签：xpath

有什么方法可以获取 ul 标签中的所有子节点值。

输入：

```
<ul>
    <li class="type">Industry</li> 

    <li><a href="/store/Browse/?N=355+361+4294855087">Automotive</a></li>                            

    <li><a href="/store/Browse/?N=355+361+4294855065">Parts </a></li>                                

    <li>Tires</li>                  
</ul> 
```

输出：工业、汽车、零件、轮胎。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-05-02T15:14:32.150

这将检索具有父元素的所有文本元素`ul`。

```
//ul/descendant::*/text() 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2019-10-29T22:19:48.817

您可以使用 XPath 轴。轴表示与上下文节点的关系，并用于在树上相对于该节点定位节点。截至今天，共有[13 个轴](https://developer.mozilla.org/en-US/docs/Web/XPath/Axes)。您可以将上下文节点或轴用于指示上下文节点及其所有后代`descendant`的所有子项（包括嵌套） 。`descendant-or-self`例如：

```
//ul/descendant::*/text()
//ul/descendant-or-self::*/text() 
```

# android - 如何在 Android 中调整图像大小？

> ID：10413659
> 
> 赞同：109
> 
> 时间：2012-05-02T12:23:20.037
> 
> 标签：android, bitmap

我正在创建一个应用程序并想设置一个画廊视图。我不希望画廊视图中的图像是全尺寸的。如何在 Android 中调整图像大小？

* * *

## 回答 #1

> 赞同：199
> 
> 时间：2012-05-02T12:25:07.453

尝试：

```
Bitmap yourBitmap;
Bitmap resized = Bitmap.createScaledBitmap(yourBitmap, newWidth, newHeight, true); 
```

或者：

```
resized = Bitmap.createScaledBitmap(yourBitmap,(int)(yourBitmap.getWidth()*0.8), (int)(yourBitmap.getHeight()*0.8), true); 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2013-12-05T17:55:58.713

```
public Bitmap resizeBitmap(String photoPath, int targetW, int targetH) {
    BitmapFactory.Options bmOptions = new BitmapFactory.Options();
    bmOptions.inJustDecodeBounds = true;
    BitmapFactory.decodeFile(photoPath, bmOptions);
    int photoW = bmOptions.outWidth;
    int photoH = bmOptions.outHeight;

    int scaleFactor = 1;
    if ((targetW > 0) || (targetH > 0)) {
            scaleFactor = Math.min(photoW/targetW, photoH/targetH);        
    }

    bmOptions.inJustDecodeBounds = false;
    bmOptions.inSampleSize = scaleFactor;
    bmOptions.inPurgeable = true; //Deprecated API 21

    return BitmapFactory.decodeFile(photoPath, bmOptions);            
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-05-02T12:32:46.687

捕获图像并调整其大小。

```
Bitmap image2 = (Bitmap) data.getExtras().get("data");
img.setImageBitmap(image2);
String incident_ID = IncidentFormActivity.incident_id;

imagepath="/sdcard/RDMS/"+incident_ID+ x + ".PNG";
File file = new File(imagepath);
    try {
        double xFactor = 0;
        double width = Double.valueOf(image2.getWidth());
        Log.v("WIDTH", String.valueOf(width));
        double height = Double.valueOf(image2.getHeight());
        Log.v("height", String.valueOf(height));
        if(width>height){
        xFactor = 841/width;
    }
    else{
        xFactor = 595/width;
    }

Log.v("Nheight", String.valueOf(width*xFactor));
Log.v("Nweight", String.valueOf(height*xFactor));
int Nheight = (int) ((xFactor*height));
int NWidth =(int) (xFactor * width) ; 

bm = Bitmap.createScaledBitmap( image2,NWidth, Nheight, true);
file.createNewFile();
FileOutputStream ostream = new FileOutputStream(file);
bm.compress(CompressFormat.PNG, 100, ostream);
ostream.close(); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-05-02T12:28:45.060

您可以使用 Matrix 调整相机图像的大小....

```
BitmapFactory.Options options=new BitmapFactory.Options();
InputStream is = getContentResolver().openInputStream(currImageURI);
bm = BitmapFactory.decodeStream(is,null,options);
int Height = bm.getHeight();
int Width = bm.getWidth();
int newHeight = 300;
int newWidth = 300;
float scaleWidth = ((float) newWidth) / Width;
float scaleHeight = ((float) newHeight) / Height;
Matrix matrix = new Matrix();
matrix.postScale(scaleWidth, scaleHeight);
Bitmap resizedBitmap = Bitmap.createBitmap(bm, 0, 0,Width, Height, matrix, true);
BitmapDrawable bmd = new BitmapDrawable(resizedBitmap); 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-05-02T12:44:57.543

```
bm = Bitmap.createScaledBitmap(bitmapSource, width, height, true); 
```

:)

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2014-02-25T05:38:57.030

//照片是位图图像

```
Bitmap btm00 = Utils.getResizedBitmap(photo, 200, 200);

 setimage.setImageBitmap(btm00);

  And in Utils class :

public static Bitmap getResizedBitmap(Bitmap bm, int newHeight, int newWidth) {
    int width = bm.getWidth();
    int height = bm.getHeight();
    float scaleWidth = ((float) newWidth) / width;
    float scaleHeight = ((float) newHeight) / height;
    Matrix matrix = new Matrix();
    // RESIZE THE BIT MAP
    matrix.postScale(scaleWidth, scaleHeight);
    // RECREATE THE NEW BITMAP
    Bitmap resizedBitmap = Bitmap.createBitmap(bm, 0, 0, width, height,
            matrix, false);
    return resizedBitmap;
} 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-05-02T12:28:31.220

```
BitmapFactory.Options options=new BitmapFactory.Options();
options.inSampleSize=2; //try to decrease decoded image 
Bitmap bitmap=BitmapFactory.decodeStream(is, null, options); 
bitmap.compress(Bitmap.CompressFormat.JPEG, 70, fos); //compressed bitmap to file 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2019-04-17T06:26:26.633

以下是通过保持相同的纵横比来调整位图大小的功能。在这里，我还写了一篇关于该主题的详细博客文章来解释这种方法。[通过保持相同的纵横比调整位图大小](https://handyopinion.com/how-to-resize-a-bitmap-by-keeping-the-same-aspect-ratio-android/)。

```
 public static Bitmap resizeBitmap(Bitmap source, int maxLength) {
       try {
           if (source.getHeight() >= source.getWidth()) {
               int targetHeight = maxLength;
               if (source.getHeight() <= targetHeight) { // if image already smaller than the required height
                   return source;
               }

               double aspectRatio = (double) source.getWidth() / (double) source.getHeight();
               int targetWidth = (int) (targetHeight * aspectRatio);

               Bitmap result = Bitmap.createScaledBitmap(source, targetWidth, targetHeight, false);
               if (result != source) {
               }
               return result;
           } else {
               int targetWidth = maxLength;

               if (source.getWidth() <= targetWidth) { // if image already smaller than the required height
                   return source;
               }

               double aspectRatio = ((double) source.getHeight()) / ((double) source.getWidth());
               int targetHeight = (int) (targetWidth * aspectRatio);

               Bitmap result = Bitmap.createScaledBitmap(source, targetWidth, targetHeight, false);
               if (result != source) {
               }
               return result;

           }
       }
       catch (Exception e)
       {
           return source;
       }
   } 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2014-08-06T09:19:16.550

```
resized = Bitmap.createScaledBitmap(yourImageBitmap,(int)(yourImageBitmap.getWidth()*0.9), (int)(yourBitmap.getHeight()*0.9), true); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-07-16T05:08:28.967

```
BitmapFactory.Options options=new BitmapFactory.Options();
            options.inSampleSize = 10;
            FixBitmap = BitmapFactory.decodeFile(ImagePath, options);
            //FixBitmap = BitmapFactory.decodeResource(getResources(), R.drawable.gv);

           byteArrayOutputStream = new ByteArrayOutputStream();
           FixBitmap.compress(Bitmap.CompressFormat.JPEG, 80, byteArrayOutputStream); //compress to 50% of original image quality
           byteArray = byteArrayOutputStream.toByteArray();

           ConvertImage = Base64.encodeToString(byteArray, Base64.DEFAULT); 
```

# google-maps - Google Map V3 中 VEShape.GetIconAnchor 方法的替代方法

> ID：10413672
> 
> 赞同：0
> 
> 时间：2012-05-02T12:23:53.163
> 
> 标签：google-maps, google-maps-markers

知道 Google Map V3 中 VEShape.GetIconAnchor 方法的替代方法是什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T11:34:25.577

很难弄清楚你在问什么，但我认为你可能正在寻找以下之一：

*   [google.maps.InfoWindow.getPosition()](https://developers.google.com/maps/documentation/javascript/reference#InfoWindow)
*   [google.maps.Marker.getPosition()](https://developers.google.com/maps/documentation/javascript/reference#Marker)
*   [google.maps.MarkerImage.anchor](https://developers.google.com/maps/documentation/javascript/reference#MarkerImage) -`MarkerImage`可以`Marker`通过调用[google.maps.Marker.getIcon()从 a 中检索](https://developers.google.com/maps/documentation/javascript/reference#Marker)

# java - hadoop 水槽 log4j 配置

> ID：10413674
> 
> 赞同：0
> 
> 时间：2012-05-02T12:24:08.933
> 
> 标签：java, hadoop, hdfs, flume

如果您运行 hadoop flume 节点，默认情况下它会使用 log4j 在 /var/log/flume 下生成日志。这些文件看起来像

```
/var/log/flume/flume-$FLUME_IDENT_STRING-$command-$HOSTNAME.log 
```

根据[此处](http://archive.cloudera.com/cdh/3/flume/UserGuide/)的水槽用户指南，更改水槽日志配置的唯一方法是通过使用 Flume 环境变量运行水槽节点的 flume-daemon.sh，例如：

```
export FLUME_LOGFILE=flume-$FLUME_IDENT_STRING-$command-$HOSTNAME.log
export FLUME_ROOT_LOGGER="INFO,DRFA"
export ZOOKEEPER_ROOT_LOGGER="INFO,zookeeper"
export WATCHDOG_ROOT_LOGGER="INFO,watchdog" 
```

问题是：

1.  如果我想将日志级别从 INFO 更改为 DEBUG，这是唯一的地方吗？
2.  有没有我可以做到这一点的配置？
3.  如果我想将一些包的日志级别设置为 DEBUG 而其他包保留 INFO 呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T17:10:01.983

检查是否存在 log4j.properties 或 log* 相关文件以设置变量——这也将允许您检查并让日志记录部分的某些组件执行过多/DEBUG，而其他组件执行 INFO。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T21:06:02.730

注意到 /etc/flume/conf.empty 下有一个 log4j.properties。复制到/etc/flume/conf，重启flume节点服务，log4j.properties文件开始生效。

最重要的顺序就像flume-env.sh->flume-daemon.sh->log4j.properties。

例如。如果您在flue-daemon.sh 中将flume_root_logger 设置为DEBUG，它将覆盖您在log4j.properties 中为root_logger 所做的任何设置。

# r - 如何为 3D 散点图中的变量分配色阶？

> ID：10413678
> 
> 赞同：9
> 
> 时间：2012-05-02T12:24:20.137
> 
> 标签：r, colors, ggplot2, 3d, gradient

我是 R 的初学者，我的脚本需要一些帮助。我设法在我的 2D 图上使用 library(ggplot2) 生成比例颜色渐变，如下所示；

```
z <- c(data$conf)
d <- qplot(x, y, xlab="Dimension 1", ylab="Dimension 2", colour=z)
d
d + scale_colour_gradient(limits=c(0, 1), data=data$conf, low="blue", high="red")) 
```

我现在试图在 3D 图上重现这个渐变，我使用了 scatterplot3d 或 plot3d。我相信 colorRampPalette 创建基于 327 行 (1…327) 的颜色渐变，而我对作为 data$conf 中值的函数的渐变感兴趣。我需要一个连接，但在哪里？

```
attach(data)
t1 <- c(data$conf)
jet.colors <- colorRampPalette(c("blue", "red"))
e <- plot3d(x, y, z, col=jet.colors(327)) 
```

如果你能帮助我，那就太好了——或者如果你知道任何可以做得更好的 3D 绘图/比例渐变包，也很酷。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-02T16:15:59.113

您在正确的轨道上使用`colorRampPalette()`，但确实需要更多类似的东西`colorRamp()`，它[“返回一个映射 0 和 1 之间值的函数”](http://stat.ethz.ch/R-manual/R-devel/library/grDevices/html/colorRamp.html)。

更好的是一个函数——称之为它`myColorRamp()`——它就像`colorRamp()`但相反：(a) 映射和之间的`min(values)`值`max(values)`；(b) 将颜色作为 7 个字符的 sRGB 字符串（例如“#F60008”）返回，这是一种可以`plot3d()`理解的格式。

```
library(rgl)

myColorRamp <- function(colors, values) {
    v <- (values - min(values))/diff(range(values))
    x <- colorRamp(colors)(v)
    rgb(x[,1], x[,2], x[,3], maxColorValue = 255)
}

x <- sin((1:100)/10)
y <- cos((1:100)/10)
z <- seq(-20, 20, length.out=100)

cols <- myColorRamp(c("red", "blue"), z) 
plot3d(x = x, y = y, z = z, col = cols) 
```

![在此处输入图像描述](../Images/107269e5328c1774a4e895d7b25cded6.png)

# asp.net - ASP.NET 多形式验证

> ID：10413679
> 
> 赞同：2
> 
> 时间：2012-05-02T12:24:24.537
> 
> 标签：asp.net, forms, validation, submit

我的 ASP.NET Web 表单中有 2 个表单，每个表单都需要验证。

```
<form id="form1" method="POST" action="">

    <asp:TextBox runat="server" ID="tb1" ValidationGroup="g1"/>
    <asp:RequiredFieldValidator runat="server" ControlToValidate="tb1"
      ValidationGroup="g1" Display="Dynamic">
        field1 empty!!!
    </asp:RequiredFieldValidator>

    <asp:Button runat="server" Text="Submit1" ValidationGroup="g1"/>

</form>

 <form id="form2" method="POST" action="">
    <asp:TextBox runat="server" ID="tb2" ValidationGroup="g2"/>

    <asp:RequiredFieldValidator runat="server" ControlToValidate="tb2"
    ValidationGroup="g2" Display="Dynamic">
        field2 empty!!!
    </asp:RequiredFieldValidator>

    <asp:Button ID="Button1" runat="server" Text="Submit2" ValidationGroup="g2"/></form> 
```

关键是当我提交第一个表单时，一切都很好，但是当我提交带有空字段的第二个表单时，会显示验证错误消息，但页面仍然提交。我尝试嵌套这些表单并且它有效，验证正确完成。但我认为从概念上讲，这是一个糟糕的解决方案。

你能建议点别的吗？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T12:37:58.230

您只能在 ASP.NET “WebForm”中拥有一个表单： [一个 (ASP.Net) 表单，以统治它们](http://discuss.joelonsoftware.com/default.asp?dotnet.12.421651.10)

去掉多余的表单标签，只使用`ValidationGroups`.

# jdbc - 如何在java中获取存储过程参数的默认值

> ID：10413699
> 
> 赞同：0
> 
> 时间：2012-05-02T12:25:10.480
> 
> 标签：jdbc

我需要获取分配给存储过程参数的默认值。

我可以使用 DatabaseMetaData.getProcedureColumns 获取存储过程参数的所有详细信息，但我找不到任何方法来获取过程的默认值。

例如，如果我有以下存储过程

```
create procedure st_test (
@param1 varchar(10),
@param2 varchar(4000),
@param3 varchar(20) = 'SOMEVALUE',
@param4 varchar(30) = 'OTHERVALUE'
@param5 varchar(4000) = NULL
) 
```

然后我需要获取 param3、param4 & param5 的默认值，即 'SOMEVALUE'、'OTHERVALUE' & NULL

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T14:32:30.403

原则上，您应该能够使用[`DatabaseMetaData.getProcedureColumns()`](http://docs.oracle.com/javase/7/docs/api/java/sql/DatabaseMetaData.html#getProcedureColumns%28java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String%29), field检索此值`COLUMN_DEF`。但是，可能并非所有驱动程序都支持这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-04T07:11:42.177

但是，由于以下限制，我也找不到为 SQL 服务器（我正在使用）执行此操作的最佳方法： 1\. 使用本机 JDBC DatabaseMetaData.getProcedureColumns 确实返回 null :P 2\. 使用仅告诉参数的 Spring 库名称和类型，但不是默认值。3\. 使用上述信息将 NULL 值绑定到这些参数并没有帮助，因为这些 NULL 会覆盖默认值并对过程内部的逻辑造成灾难。

我确实写了一个程序，它返回我整个程序的签名，它是这样的：

创建过程 [dbo].[GetString](@proc_name varchar(100), @string varchar(1000) OUT) 作为 DECLARE @Val VARCHAR(MAX) 声明 @Table TABLE( Val VARCHAR(MAX) ) BEGIN INSERT INTO @Table EXEC sp_helptext @proc_name SELECT @Val = COALESCE(@Val + ' ' + Val, Val) FROM @Table select @string = @Val END

此过程返回其名称作为 In Param 传递给它的过程的签名。然后我对 String 做了一些 Ptocessing 并得到了它们的默认值。

# android - 使用复选框选择特定记录

> ID：10413703
> 
> 赞同：0
> 
> 时间：2012-05-02T12:25:15.800
> 
> 标签：android

我有一个带有文本和复选框的膨胀列表。如果在应用重新启动时选中了复选框 3，则膨胀列表应该从选中的文本开始。可以做这样的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T14:25:07.140

当用户选择复选框时，您可以将复选框 ID 或相关文本永久存储在 android 提供的共享首选项中。即使在手机关闭时，共享首选项也会保留您的存储空间。所以在重新启动时，您可以提取存储的值并显示您想要的内容比较。 [http://mobile.tutsplus.com/tutorials/android/android-application-preferences/](http://mobile.tutsplus.com/tutorials/android/android-application-preferences/)

# javascript - 如何选择输入 onClick 的值？

> ID：10413704
> 
> 赞同：25
> 
> 时间：2012-05-02T12:25:19.630
> 
> 标签：javascript

我有一个`<input type="text">`，如果用户在其中单击，我想选中该框的内容（值）。我该怎么做？

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-05-02T12:31:13.930

```
<input type="text" onclick="select()"/> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-02T12:30:43.277

尝试`select`方法：

```
document.getElementById("myinput").onclick = function() {
    this.select();
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T12:31:38.863

您可以在 javaScript 方法中尝试以下代码，并调用文本框的 onClick 事件方法...

```
function calledOnClick(){

    document.getElementById('test').select();
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-10-26T12:33:52.240

您可以尝试以下`jQuery`在页面加载时自动调用的代码

```
<script>
$(document).ready(function(){
    $('input').each(function(){
        $(this).click(function() {
            this.select();
        });
    });
    $("#return_date").focus();
});
</script> 
```

# database - 当使用一个脚本多次调用 /usr/bin/perl 时，是否会作为单独的进程运行？

> ID：10413705
> 
> 赞同：0
> 
> 时间：2012-05-02T12:25:21.057
> 
> 标签：database, multithreading, perl, scheduler

这是一个 Web 服务器场景。Linux 是操作系统。不同的 IP 地址调用相同的脚本。

Linux 是否为每个脚本调用启动一个新的 Perl 进程，或者 Perl 是否交错运行多个调用，或者脚本是否连续运行（一个接一个）？

抱歉，我在 Google 的前几个结果中没有找到答案。

我需要知道才能知道我有多担心并发数据库访问。

脚本本身不使用多线程，它是一个简单的 Perl 脚本。

更新：更复杂的调度程序或评论序列化程序在下面回答，仍然未经测试：

```
#! usr/bin/perl

use Fcntl;
use Time::HiRes;

sysopen(INDICATOR, "indicator", O_RDWR | O_APPEND); # filename hardcoded, must exist
flock(INDICATOR, LOCK_EX);
print INDICATOR $$."\n";    # print a value unique to this script
                            # in single-process context it's serial anyway
                            # in multi-process context the pid is unique
seek(INDICATOR,0,0);
my $firstline = <INDICATOR>;
close(INDICATOR);

while("$firstline" ne $$."\n")
{
    nanosleep(1000000);     # time your script to find a better value
    open(INDICATOR, "<", "indicator");
    $firstline = <INDICATOR>;
    close(INDICATOR);
}

do "transferHandler.pl";    # name of your script to run

sysopen(INDICATOR, "indicator", O_RDWR);
flock(INDICATOR, LOCK_EX);
my @content = <INDICATOR>;
shift @content;
truncate(INDICATOR,0);
seek(INDICATOR,0,0);
foreach $line(@content)
{
    print INDICATOR $line;
}
close(INDICATOR); 
```

再次编辑：如果 perl 在单个进程中运行并且线程（交错）脚本本身，上述脚本将不起作用。这种情况是我提出的三个问题中唯一的一个，根据我分别口头得到的答案和反馈，情况似乎并非如此。上面的脚本可以通过将唯一值更改为随机数而不是快速思考的 pid 来工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T12:34:09.233

这完全取决于您的 Web 服务器的设置。它是否使用普通 CGI、FastCGI、mod_perl？您可以设置您描述的两种方案。在 FastCGI 的情况下，您还可以设置一个永远不会退出的脚本，而是在一个循环中完成所有工作，该循环不断接受来自前端 Web 服务器的连接。

关于您的问题的更新，我建议您从一开始就开始担心并发访问。除非您正在做一些绝对个人的应用程序并故意将您的服务器设置为严格运行您的脚本的一个副本，否则几乎任何其他站点有时都会成长为需要 2 个或更多并行处理脚本的东西。如果你提前计划好这个非常常见的任务，你会省去很多麻烦。即使您只有一个服务脚本，您也需要索引/清理/离线任务所做的任何事情，这将意味着再次并发访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T12:41:05.010

如果 perl 脚本单独调用，它们将导致单独的进程。这是一个使用两个脚本的演示：

```
#master.pl
system('perl ./sleep.pl &');
system('perl ./sleep.pl &');
system('perl ./sleep.pl &');

#sleep.pl
sleep(10); 
```

然后运行：

```
perl tmp.pl & (sleep 1 && ps -A | grep perl) 
```

# visual-studio - 实体框架在 ValidateConsitency 中抛出 NullReferenceException

> ID：10413708
> 
> 赞同：0
> 
> 时间：2012-05-02T12:25:26.283
> 
> 标签：visual-studio, entity-framework, tfs, code-first

我已升级到 Entity Framework 4.3 并收到以下错误：

```
 [NullReferenceException: Object reference not set to an instance of an object.]
   System.Data.Entity.ModelConfiguration.Configuration.Properties.Navigation.NavigationPropertyConfiguration.ValidateConsistency(NavigationPropertyConfiguration navigationPropertyConfiguration) +588
   System.Data.Entity.ModelConfiguration.Configuration.Properties.Navigation.NavigationPropertyConfiguration.Configure(EdmNavigationProperty navigationProperty, EdmModel model, EntityTypeConfiguration entityTypeConfiguration) +122
   System.Data.Entity.ModelConfiguration.Configuration.Types.EntityTypeConfiguration.ConfigureAssociations(EdmEntityType entityType, EdmModel model) +160
   System.Data.Entity.ModelConfiguration.Configuration.Types.EntityTypeConfiguration.Configure(EdmEntityType entityType, EdmModel model) +102
   System.Data.Entity.ModelConfiguration.Configuration.ModelConfiguration.ConfigureEntities(EdmModel model) +95
   System.Data.Entity.DbModelBuilder.Build(DbProviderManifest providerManifest, DbProviderInfo providerInfo) +112
   System.Data.Entity.DbModelBuilder.Build(DbConnection providerConnection) +58
   System.Data.Entity.Internal.LazyInternalContext.CreateModel(LazyInternalContext internalContext) +62
   System.Data.Entity.Internal.RetryLazy`2.GetValue(TInput input) +117
   System.Data.Entity.Internal.LazyInternalContext.InitializeContext() +452
   System.Data.Entity.Internal.InternalContext.ForceOSpaceLoadingForKnownEntityTypes() +55
   System.Data.Entity.DbContext.System.Data.Entity.Infrastructure.IObjectContextAdapter.get_ObjectContext() +25
   Namespace.Test.Start() in c:\Builds\6\Test\DevDeployed\Sources\Namespace.Test.Kernel\Loader.cs:97
   MvcApplication.Application_Start() in c:\Builds\6\Test\DevDeployed\Sources\Namespace.Test.Kernel\Web\Global.asax.cs:48 
```

如果我在 Visual Studio 中构建应用程序可以工作，但是自动部署网站（通过 TFS）会给出这个错误（就像在命令行中使用 MSBUILD 一样）。

似乎没有任何方法可以得到一个像样的错误消息，所以我对导致问题的原因一无所知。我不认为这是一个映射问题，因为我可以让它在 VS 中工作。我尝试从模型中排除所有内容并引入内容，直到出现问题 - 但一切正常。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T08:38:24.970

已修复 - 关联双方的配置是问题的原因。当它发布时，我们将移至 EF 5。

我团队中的一个人拥有 VS Ultimate，因此能够使用 Intellitrace 查看 EF 内部发生的情况。事实证明，导航属性之一在一种配置中定义为可选，而在另一种配置中定义为必需。该模型太大，无法以任何其他方式追踪到这一点。

Visual Studio 似乎按依赖顺序构建模型，而 TFS/MSBUILD 似乎按配置类按字母顺序构建模型。这种差异是它在我们的开发机器上工作但在 TFS 构建上不起作用的原因。

您会认为到 4.3 版他们可能已经将一些调试/异常信息放入框架中，或者至少以某种方式验证模型！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T20:57:56.327

这是一个应该在 Entity Framework 5 中修复的错误。如果您无法迁移到 EF5，您可以通过在关联方的两个配置中指定导航属性来解决此问题。

# javascript - 后缺少名称。操作员错误需要修复

> ID：10413712
> 
> 赞同：0
> 
> 时间：2012-05-02T12:25:33.470
> 
> 标签：javascript

我在错误控制台上收到此错误并且似乎无法弄清楚，我尝试取出引号，移动它们但仍然无法解决操作员`:`后缺少名称的错误`.`。如何修复此错误？

```
var counter = 0;
counter++;

result = '<span class="imagemsg'+counter+'">The file was uploaded successfully!</span><br/><br/>'; 

...

jQuery.ajax("deleteimage.php?imagefilename=" + image_file_name)
    .done(function(data) {
        $(".imagemsg".counter).html(data);
    }); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-02T12:27:13.290

用于`+`连接字符串，not `.`，这意味着在 JavaScript 中寻址对象的属性，并且可以理解，需要一个属性名称。

# ios5 - [[UIManagedDocument alloc]initWithFileURL:url] 在模拟器中崩溃，但在 iPad 上有效？

> ID：10413713
> 
> 赞同：1
> 
> 时间：2012-05-02T12:25:46.793
> 
> 标签：ios5, uimanageddocument

我正在尝试在我的应用程序中设置 managedDocument 并使用 CoreData 更新此文档。我在 viewDidLoad 中将此代码添加到我的应用程序中，我的应用程序现在因 EXC_BAD_ACCESS 而崩溃

```
 self.Database=[[UIManagedDocument alloc]initWithFileURL:url]; 
```

我验证了 url 是一个有效的 url。如果我在超出这一点的设备上运行它，只会在模拟器上发生崩溃。

有谁知道从哪里开始解决这个问题？

# c++ - 如何避免可执行文件关心其依赖项的依赖关系？

> ID：10413714
> 
> 赞同：1
> 
> 时间：2012-05-02T12:25:53.000
> 
> 标签：c++, linux, dependencies, shared-libraries

让我们成为一个依赖于*libB.so*的可执行*C.exe*，它本身依赖于*libA.so*。*C.exe*不直接使用*libA*。工具 ldd 显示 C.exe 仍然需要 libA.so ：

 ***```
> ldd C.exe 
    libB.so => ./libB.so (0x00002b11cc4f5000)
    libA.so.1 => ./libA.so.1 (0x00002b11cc719000)
    <snip> 
```

我原以为只有在检查 libB.so 时才会显示 libA.so。有没有办法避免这种行为或者你认为它是正确的？

我的问题是 libA 可以更新到版本 2，因此库名称将更改为 libA.so.2。我重新编译了 libB 但没有重新编译 C.exe。我期待 C.exe 运行良好，因为它取决于 libB，它知道选择哪个 libA，但事实并非如此。

如何处理这种情况？

## 编译和链接细节

libA.so 以这种方式编译和链接：

```
g++ -fPIC -Wall -shared -Wl,-soname,libA.so.1 libA.cpp -o libA.so.1
ln -s libA.so.1 libA.so 
```

libB.so 以这种方式编译和链接：

```
g++ -fPIC -Wall -shared -L. -lA libB.cpp -o libB.so 
```

C.exe 是这样编译和链接的：

```
export LD_LIBRARY_PATH=.:$LD_LIBRARY_PATH
g++ -fPIC -Wall -L. -lB exeC.cpp -o C.exe 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T12:29:17.027

您必须将 libA 创建为静态库（使用`ar`）。这样，它的代码将嵌入到 libB.so 中，并且您不会有额外的依赖项。***

# websphere - 如何在 IBM WebSphere Application Server 8 上创建 TCP/IP Socket 连接池？

> ID：10413715
> 
> 赞同：0
> 
> 时间：2012-05-02T12:25:54.833
> 
> 标签：websphere, java-io, java-6, websphere-8

我的情况是，部署在 IBM WebSphere Application Server 8 上的 Web 应用程序处理的每个请求都必须通过 Socket 连接与远程系统通信。是否可以在 IBM WebSphere Application Server 8 中为 Socket 连接创建连接池。如果可以，如何？

环境：Java 1.6、JEE5、IBM WAS8

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T22:05:19.440

WebSphere Application Server 没有对池化任意连接的内置支持。它确实支持 JCA 及其连接池，因此您可能最接近的是编写自己的资源适配器来打开连接。这并非微不足道，不幸的是，我不知道有任何库已经这样做了。

# jquery - Jquery检查表单以查看是否有任何输入具有价值

> ID：10413716
> 
> 赞同：8
> 
> 时间：2012-05-02T12:25:54.593
> 
> 标签：jquery

```
if ($('#requestForm').val == "") {
alert('Please select at least one filter');
    //return false;
}
else { 
    ///Run my code
} 
```

我有一个表格，不需要输入，但如果没有选择输入，我想要一个警报告诉他们至少选择一个选项。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-02T12:39:57.397

```
var validate= false;
$('#requestForm input').each(function(){
    if($(this).val() != '' || $(this).attr('checked'))
        validate = true;
});
if(!validate){
    alert('Please select at least one filter');
    return false;
}
else { 
    Run my code
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-02T12:28:06.487

```
var isValid = !!$('form :input').filter(function() {
    return this.value;
}).length;​

if (!isValid)
    alert('Please select at least one filter'); 
```

如果表单 id`requestForm`将其用作表单选择器：

```
$('#requestForm :input').filter(function() {
    ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-07T15:36:38.583

一旦满足条件，当前的答案都不会从短路中受益。这可能只是对 JavaScript 中有限数量的字段的性能造成的轻微影响。而且，两者都不擅长以声明方式说明您进入的循环的意图。

这是一个简单的 4 行扩展方法，它接受任何过滤条件并在符合该条件时立即返回 true。

```
jQuery.fn.any = function(filter){ 
    for (i=0 ; i<this.length ; i++) {
     if (filter.call(this[i])) return true;
  }
  return false;
}; 
```

然后像这样使用它

```
var gotMatch = $(":input").any(function() { 
                   // you can put any condition you want in here
                   return this.value == 'hi';
               }); 
```

```
jQuery.fn.any = function(filter){ 
	for (i=0 ; i<this.length ; i++) {
  	 if (filter.call(this[i])) return true;
  }
  return false;
};

$(function() {

  var gotMatch = $(":input").any(function() { 
                   return this.value == 'hi';
                 });

  if (gotMatch) {
    console.log("Hello to you too!");
  } else {
  	console.log("Why don't you say Hi!");
  }

})
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

<input type="text" value="">
<input type="text" value="">
<input type="text" value="">
```

### [jsFiddle 中的演示](https://jsfiddle.net/KyleMit/rr3595o7/)

### 延伸阅读：

*   jQuery -[`.has()`](https://api.jquery.com/has/)
*   jQuery -[`.filter()`](http://api.jquery.com/filter/)
*   SO - [jquery中的“任何”布尔函数](https://stackoverflow.com/q/16576560/1366033)
*   SO - [jQuery 是否有“存在”功能？](https://stackoverflow.com/q/31044/1366033)
*   SO - [jQuery 检查任何文本输入是否有价值](https://stackoverflow.com/q/22294112/1366033)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T12:36:07.947

我不太清楚你想要实现什么，但也许你会发现这个有用

[https://github.com/maxatwork/form2js](https://github.com/maxatwork/form2js)

它是一个将结构化表单数据转换为 Javascript 对象的库。你只需要这样做

```
var obj = form2js("requestForm"); 
```

然后解析结果并在未选择任何内容时警告用户。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-20T16:01:42.203

```
check = function()
    {                
var empty = $("#requestForm :input").filter(function() {
return this.value == ""; });
if(empty.length) {
alert("Please select at least one filter");
};} 
```

如果至少有一个输入为空，这将警告消息 ONCE。然后只需将函数 onclick 添加到您的提交输入或您想要验证表单的任何按钮。

```
<input type="submit" onclick="check();"> 
```

# eclipse-plugin - 在 Indigo 下开发的 Eclipse 插件可以在 Juno (Eclipse 4) 下工作吗？

> ID：10413719
> 
> 赞同：1
> 
> 时间：2012-05-02T12:26:17.383
> 
> 标签：eclipse-plugin

我将开始一个新项目作为 Eclipse 插件，但我发现 Eclipse 的新主要更新将在六月到来。所以我想知道，我是否必须开始在这个新版本上进行开发，或者我可以使用 Indigo 创建我的插件，然后 Juno 可以毫无问题地支持它？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T14:42:54.703

您现在可以为插件开发人员下载 Eclipse 4.2。

[http://eclipse.org/downloads/packages/eclipse-rcp-and-rap-developers/junom6](http://eclipse.org/downloads/packages/eclipse-rcp-and-rap-developers/junom6)

您不必使用 4.2 平台，但您可以阅读文档，尤其是从 Eclipse 3 到 Eclipse 4 的更改，看看这是否会影响您的插件。

# java - Eclipse 我的项目不再显示在 Package Explore 下

> ID：10413726
> 
> 赞同：0
> 
> 时间：2012-05-02T12:26:44.623
> 
> 标签：java, eclipse

我有一个名为 card server2 的项目。它从我的探索包中消失了，我无法再处理它。文件还在。我尝试使用 import 将其取回。但是有一条消息说工作空间中已经存在项目。

他是在我导入了一个名为聊天服务器的项目之后发生的，该项目运行良好。

我正在考虑创建一个新的工作区并将项目导入其中，但随后我将拥有一个包含所有项目的工作空间和一个仅用于该项目的工作空间。任何想法都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T12:32:36.153

将项目从您的工作区剪切并粘贴到另一个位置，然后将其导入回来。它应该可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T12:33:31.360

将项目移动到另一个位置后，您可以重新导入项目；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-23T11:11:19.693

导航到 window-show view-others-java-project explorer。如果它已经打开，请关闭并重新打开它，您会找到它。希望有所帮助。

# javascript - jQuery：如何获取列表元素的索引

> ID：10413731
> 
> 赞同：1
> 
> 时间：2012-05-02T12:26:51.057
> 
> 标签：javascript, jquery

给定以下 HTML：

```
<ul>
    <li class="imgThumbLi">
        <img src="larry.jpg"/>
    </li>
    <li class="imgThumbLi">
        <img src="curly.jpg"/>
    </li>
    <li class="imgThumbLi">
        <img src="moe.jpg"/>
    </li>
</ul> 
```

然后，每当有人将鼠标悬停在这些`<img>`元素之一上时，我都会处理一些 jQuery：

```
$(".imgThumbLi").live({
    mouseenter:
        function() {
            // Obtain the source of the current image we're hovering over.
            var src = $(this).children('img')[0].src;

            // Now I need to know which <li> the "current" (one we're hovering
            // over) image's parent <li> we're in, as a zero-based  index
            // of the <ul>.
            var currListElementIndex = ????
        }
    }
); 
```

因此，如果用户将鼠标悬停在 上`larry.jpg`，则 的值为。如果他们悬停在 上，那么值将是，等等。在此先感谢！`currListElementIndex``0``moe.jpg``2`

**编辑**：由于其他一些限制，我不能将 ID 添加到`<li>`元素或做任何其他显而易见的事情......我需要以`<ul>`某种方式获取（可能通过*父*函数？？）并找出那个索引`<ul>`算我一个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T12:28:09.750

由于 live 函数应用于 "li" ，您可以使用 $(this).index() 获取它的索引。所以

`var currListElementIndex = $(this).index()`返回索引

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T12:37:32.730

```
$(".imgThumbLi").live({
    mouseenter:
        function() {          
            var item=$(this);
            var src = $(this).children('img')[0].src;
            var currListElementIndex = item.index();
            alert(currListElementIndex);
        }
    }
); 
```

# objective-c - 将 NSString 分离到 NSString(s)

> ID：10413732
> 
> 赞同：0
> 
> 时间：2012-05-02T12:26:51.820
> 
> 标签：objective-c, ios

我有一个这样的字符串：`NSString *str =@"text |0|1|5|this is an other text";` 我想在单独的字符串中使用 watch 组件，例如：

```
NSString *str1 =@"text";
NSString *str2 =@"0";
... 
```

我如何使用完整的 NSString (str) 来做到这一点。感谢您的回答

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T12:29:56.903

您可以根据管道分隔符拆分此数据。您的结果将在`NSArray`. 然后，您可以按索引访问元素。

```
NSArray *strs = [str componentsSeparatedByString: @"|"]; 
```

例如

```
NSString *str1 = (NSString*)[strs objectAtIndex: 0];   // @"text "
NSString *str2 = (NSString*)[strs objectAtIndex: 1];   // @"0" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T06:39:41.267

```
NSRange range = [yourString rangeOfString:@"|"];
NSString *string1 = [yourString substringToIndex:range.location];
NSString *string2 = [yourString substringFromIndex:range.location+1]; 
```

您也可以像这样分隔字符串

# django - 我如何知道 django 模型实例是否被修改？

> ID：10413738
> 
> 赞同：5
> 
> 时间：2012-05-02T12:27:06.373
> 
> 标签：django, django-models

我有这样的代码：

```
# ...
obj = Model.objects.get(pk=2342)
if foo:
    obj.foo = 'bar'
if bar:
    obj.bar = 'baz'
obj.save() 
```

有没有一种好方法可以找出模型实例是否被修改以防止每次代码运行时都保存它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T14:27:28.693

典型的模式是执行以下操作：

```
model = Model.objects.get(pk=2342)
dirty = False
if foo:
    model.foo = 'bar'
    dirty = True
if bar:
    model.bar = 'baz'
    dirty = True

if dirty:
    model.save() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T14:09:14.253

只需逐个字段区分带有当前模型实例的“快照”实例，您就可以`snapshot`通过`copy.copy(obj)`或`model_cls.objects.get(pk=obj.pk)`.

您也可以简单地比较转储的版本：

```
from django.core.serializers.json import Serializer
dump = Serializer.serialize([obj])
...
changed = dump == Serializer.serialize([obj]) 
```

通常，调整您的代码是最简单的：

```
obj = Model.objects.get(pk=2342) # 'obj' is better than 'model', IMO
changed = False
if foo:
    ...
    obj.foo = 'bar'
    changed = True
if bar:
    ...
    obj.bar = 'baz'
    changed = True
if changed:
    obj.save() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T12:33:51.160

Django 在内部执行此检查。除非模型实际更改，否则不会触发 sql 查询。

**更新**

这个答案是错误的。我的错。我把它和别的东西混淆了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-03T02:14:27.423

要以更抽象的方式执行此操作，请查看模型方法的文档，该方法[`from_db()`](https://docs.djangoproject.com/en/2.2/ref/models/instances/#django.db.models.Model.from_db)是在将数据从数据库加载到模型实例时调用的钩子。使用此方法，您可以在加载字段时缓存字段的原始值，然后将其与`save()`方法中的当前值进行比较。

示例（注意，我还没有实际测试过这段代码）：

```
class SaveIfModified(models.Model):
    foo = models.TextField()

    @classmethod
    def from_db(cls, db, field_names, values):
        instance = super().from_db(db, field_names, values)
        # caveat: deferred values won't appear here
        if "foo" in field_names:
            instance._foo = values[field_names.index("foo")]
        return instance

    def save(self, *args, **kwargs):
        if self.foo == getattr(self, "_foo", None):
            return
        super().save(*args, **kwargs) 
```

# sql-server - 数据仓库设计 - 如何设计与时间相关的度量，例如最近 7 天等

> ID：10413741
> 
> 赞同：1
> 
> 时间：2012-05-02T12:27:28.657
> 
> 标签：sql-server, data-warehouse

我正在重新构建一个报告/数据仓库类型的数据库。我们目前有一个包含酒店粒度数据的表（即 HotelID 加上许多度量，包括 Last7DaysGross、Last28DaysXXX 等度量）。

我认为最好转移到位于 Hotel/StayDate 粒度的事实表。但是，对 HotelID 进行分组并包括 Last7DaysGross 等与日期相关的度量需要表现得非常好。

什么样的结构可以在这里工作？我认为我不能像我希望的那样使用索引视图，因为它们有多重限制（没有子查询等）。为了获得合理的性能，我需要在酒店级别（从 HotelStayDate 级别聚合？）这是人们最常查询的级别。我是否需要实际创建诸如 Last7DaysGross 之类的字段？这似乎不是一个好的设计，但我很难想出另一个。

抱歉这个问题有点含糊。还有什么我在这里想念的吗？我知道这些与日期相关的措施通常会在前端级别（即在诸如 Business Objects 之类的工具中）完成。但是，对于这个项目，我们需要将它保存在数据库中。

谢谢，西尔维亚

编辑：

感谢所有深思熟虑的评论！我接受了 David Marwick 的回答，因为他有扩展日期维度的想法。我什至没有想到这个想法，听起来很值得一试。

稍微扩展一下 David Marwick 的想法，我想出了这个想法。我可能会尝试看看它实际上是如何工作的：

```
DateDimension
   DateKey
   DateKeyBeginLast28Days
   DateKeyEndLast28Days

Fact
   DateKey
   GrossTransactions 
```

然后查询时：

```
Select
   DateKey
   ,SumLast28Day = sum(GrossTransaction)
from Fact
   join DateDimension
      on Fact.DateKey >= DateDimension.DateKeyBeginLast28Days
      and Fact.DateKey <= DateDimension.DateKeyEndLast28Days
group by DateKey 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T12:55:23.500

聚合事实表在数据仓库中是完全可以接受的。

如果你还没有准备好，我会推荐下面的书

[数据仓库工具包](http://www.amazon.co.uk/The-Data-Warehouse-Toolkit-Dimensional/dp/0471200247)

在这里，Kimball 指出将事实表预聚合到聚合事实表中很好，但是它确实声明它们应该类似于汇总级别的“基本”事实表。

我怀疑报告字段的引入应该在您的前端报告工具或多维数据集查看器中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T14:30:05.770

正如 David 所说，预先聚合一些总数（在 ETL 过程中）以使重要的查询运行得更快并没有任何问题。即使在操作数据库中，这也是一种常见的技术，如果您知道某些聚合经常使用，那么它在数据仓库中很有意义。

因此，您当然可以创建一个名为`FactHotelRevenueSummary`（或任何与您现有的命名约定相匹配）的表，其中包含任意数量的`HotelID, Last7DaysGross, Last28DaysGross`其他聚合。

我认为首先要考虑的要点是：

*   由于可观察到的性能问题，预聚合确实是必要的，即您正在增加数据库的复杂性以解决实际问题，而不是因为您模糊地感觉它可能会有所帮助
*   您的 ETL 流程会检查以确保聚合数据与“原始”数据完全匹配，否则您将获得不同的数字，具体取决于您查询的事实表，这会对用户信心产生非常负面的影响

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T21:15:07.113

我认为您在 [Hotel, Date] 谷物中放置一张桌子然后卷入酒店的设计听起来不错。正如 Damir 指出的那样，它使您的读取查询变得简单，并且可以轻松地添加/删除未来的聚合度量（请记住，围绕您将来*可能*拥有的需求进行设计通常是一个坏主意）。

Pondlife 也有好处。您的定性要求可能决定维护聚合表的可行性，例如系统需要多久更新一次（每天、每小时、15 分钟、实时？），测量需要多准确（也许用户只需要粗略了解每家酒店的表现）、读取源交易数据的成本、源交易数据的长期可用性（是否被存档）等。

如果您选择添加 [Hotel, StayDate] 粒度事实表而不维护聚合，那么也许您可以在维度中探索一些技巧以节省时间。也许像包含 [date, date_in_last_7_days] 的 7 天日期维度（因此每个日期有 7 条记录），以防直接连接与查询过去 7 天的范围可以为您节省任何时间。这可能是一个愚蠢的例子，但类似的东西。日期尺寸很小。

最后，如果您需要提高性能，请考虑硬件优化，例如将表移动到内存中（尤其是维度或非大型事实表）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T17:08:33.260

取决于，通常的查询（过去 7 天）看起来像

```
select
    HotelName
  , sum(SaleAmount) as Sales
from factSale as s
join dimDate  as d on d.DateKey  = s.DateKey
join dimHotel as h on h.HotelKey = s.HotelKey 
where DaysAgo between 1 and 7
group by HotelName 
; 
```

但是，假设您有一份报告，其中包括运行总和（跨期间）及其变化。报告布局可能如下所示：

```
| Date | 1-Day | Change-1-Day % | 7-Day | Change-7-Day % | 28-Day | Change-28-Day | 90-Day | Change-90-day % | 
```

不再那么简单了。因此，使用标准期间的预先计算字段创建聚合（事实）表并在该表上运行查询要容易得多。

所以聚合（事实）表可能看起来像

```
factRunningSum
----------------------------
DateKey     integer  (PK)
HotelKey    integer  (PK)
Sale_1_Day  decimal(19,2)
Sale_7_Day  decimal(19,2)
Sale_28_Day decimal(19,2)
Sale_90_Day decimal(19,2) 
```

# c# - 在 Sitecore 中处理虚拟物品的嵌套通配符

> ID：10413745
> 
> 赞同：2
> 
> 时间：2012-05-02T12:27:52.250
> 
> 标签：c#, sitecore, wildcard

TLDR；在多个级别处理复杂虚拟物品的最佳或推荐方式是什么？

我目前正在做一些事情，而不是使用查询字符串变量来过滤属性，我只想扩展 URL 并允许这些 URL 进行过滤。
事件：
`~/events/2012/april`或
`~/events/lunches`或
`~/events/6CB27D08-358E-49AA-8107-16A50E963C70`

我目前有一个通配符设置来处理最后一个案例或年份，但遇到了只处理一个级别的通配符，所以我无法只处理`/events/{0}/{1}`一个通配符。此外，我相信常见的友好网址最终会成为`/events/2012/april/<external_id>_<event_name>`

使用通配符，我需要用三种不同的布局将它们放入三层深，以处理我目前所知道的每种情况

```
Events/
        *
          *
            * 
```

有没有更好的方法或更推荐的方法来处理多层次的复杂虚拟物品？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T12:45:35.110

你在正确的路径上，你是正确的，你需要一个通配符项目为 URL 的每个段。但是，仅仅因为存在通配符并不意味着您需要使用它。换句话说，该`/events/*/*`项目将处理`/events/2012/april`URL。

您可能想查看这篇博文[http://www.sitecore.net/Community/Technical-Blogs/Getting-to-Know-Sitecore/Posts/2011/09/Wildcards-and-Data-Driven-URLs.aspx](http://www.sitecore.net/Community/Technical-Blogs/Getting-to-Know-Sitecore/Posts/2011/09/Wildcards-and-Data-Driven-URLs.aspx)通配符[模块](http://trac.sitecore.net/WildcardModule/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T13:57:52.107

使用通配符项目是否有特定原因？如果您使用通配符的深度超过 1 级，我认为您最好使用 URL 重写。

所以只制作`/events`项目并重写`/events/{0}/{1}`为`/events?year={0}&month={1}`

# jquery - 单击后如何在另一个div之上显示一个div

> ID：10413747
> 
> 赞同：-2
> 
> 时间：2012-05-02T12:28:02.160
> 
> 标签：jquery, html, css

单击按钮后，我想要一种叠加层。这是点击底部三角形之前的样子：

![在此处输入图像描述](../Images/5b62d5b82ef10ad8ae00d606991a3856.png)

然后点击后应该是这样的：

![在此处输入图像描述](../Images/abbef8a6c7bcebb156156b681fbdb245.png)

我觉得这可以用 jQuery 完成，但我还没有弄清楚。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T12:37:20.900

作为一个大概的答案（基于给出的信息......），我建议制作一个绝对定位（和大小！）的 div 出现在内容的顶部（不要担心显示/隐藏位只是然而...

一旦你把它钉在了你想要的地方。

然后点击事件使用：

```
$('selector').toggle() 
```

将管理它的显示和隐藏。

要隐藏它，对于元素的 CSS，给它一个 display:none; - Jquery 将添加一个`Display:block`显示元素，然后覆盖 CSS 文件中的属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T12:35:06.927

这是非常基本的jquery。

```
// address the arrow button with an #id or .class
$('#arrow_button').click(function(){
    $('#overlay').toggle();
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T12:43:43.760

这是你想要达到的目标吗？

```
$('.buttons button').click(function(){
    var $this = $(this);
    $('.tabs .active').hide('drop',function(){
        $(this).removeClass('active');      
        $('.tabs div:eq('+$this.index()+')').show('fade').addClass('active');        
    });    

});
```

```
.tabs{
    height:300px;
}
.tab{
    height:250px;
    display:none;
    border:solid blue thick;
    background-color:#88a;
}
.tab.active{
    display:block;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
<div class="tabs">
    <div class="tab active">Content1</div>
    <div class="tab">Content2</div>
    <div class="tab">Content3</div>
</div>
<div class="buttons">
    <button>content 1</button>
    <button>content 2</button>
    <button>content 3</button>
</div>
```

# php - 在移动 Safari 上使用 Zend_Form_Element_File 验证 Zend 表单

> ID：10413753
> 
> 赞同：1
> 
> 时间：2012-05-02T12:28:26.933
> 
> 标签：php, ios, zend-framework, mobile-safari, zend-form

我有一个使用 Zend_Form_Element_File 的表单，它不是必填字段。

当我的表单在 iPad 上提交时，它不会验证但也不会生成任何错误消息。

我已将问题缩小到 Zend_Form_Element_File。我很欣赏 Mobile Safari 不支持文件元素，但它不是必填字段，因此应该忽略。

```
$profilePicture = new Zend_Form_Element_File('profilePicture');
$profilePicture->setLabel('Profile Picture')
               ->addValidator('Extension', false, 'jpeg,jpg,png,gif')
               ->addValidator('FilesSize', false, 512000)
               ->addValidator('Count', false, 1)
               ->setDestination(APPLICATION_PATH . '/../../data/uploads/dogs/temp');
$this->addElement($profilePicture); 
```

我是否遗漏了可以在 iPad 上验证我的表单的任何内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T15:22:32.187

Zend 框架问题已在此处发布：[ZF-11485](http://framework.zend.com/issues/browse/ZF-11485 "ZF 问题跟踪器 ZF-11485")。

> 如果我使用 Iphone/Ipad 验证此表单，在 PHP 中，全局变量 $_FILES 将是一个空数组，但 Zend_File_Transfert_Adapter_Http 使用的 Zend_Validate_File_Upload 验证器会将其检测为超大文件上传失败。

好奇（我没有 iOS 设备）：

1.  文件输入是否显示在 iPad 上？
2.  你能显示（var_dump ...）错误信息吗？

# c# - 使用 DataContractJsonSerializer 解析 JSON 时出现异常

> ID：10413755
> 
> 赞同：0
> 
> 时间：2012-05-02T12:28:27.643
> 
> 标签：c#, json, windows-phone-7

我不知道这是我还是我得到的 JSON。无论如何，我正在阅读我认为相关的另一篇文章，但不知道当他弄清楚他需要什么来解决[更多 json c# 问题时，这些人在说什么](https://stackoverflow.com/questions/6769532/more-json-c-sharp-issues)

这是我现在得到的 JSON 样本

```
{
    "totalResult": 2,
    "merchants": {
        "1718167": {
            "merchantRank": "29",
            "merchantName": "bob the builders factory",
            "merchantSlogan": "if he can't fix it we can",
            "merchantBdesc": "",
            "merchantLogo": "pic1.gif",
            "merchantLink": "http:\/\/www.randomlink.com\/",
            "merchantAddress": "place
street St
area
city
1111",
            "merchantLat": "-15.9935425",
            "merchantLng": "58.0836955",
            "merchantGeoLevel": "st",
            "merchantDistance": "0.00",
            "merchantCategories": "builder",
            "merchantEmail": "",
            "merchantUrl": "http:\/\/www.randomlink.com\/",
            "merchantPhone": "0123456789",
            "merchantMobile": "",
            "merchantSrc": "AJF"
        },
        "113711": {
            "merchantRank": "229",
            "merchantName": "A A A Builders",
            "merchantSlogan": "",
            "merchantBdesc": "",
            "merchantLogo": "pic26.gif",
            "merchantLink": "http:\/\/www.randomlink.com\/",
            "merchantAddress": "",
            "merchantLat": "",
            "merchantLng": "",
            "merchantGeoLevel": "",
            "merchantDistance": "0.00",
            "merchantCategories": "Builder",
            "merchantEmail": "here@randomlink.com",
            "merchantUrl": "http:\/\/randomlink.com",
            "merchantPhone": "0123456789",
            "merchantMobile": "",
            "merchantSrc": "GHF"
        }
    }
} 
```

无论如何，为了理智起见，我已经减少了结果的数量，所以我试图为此构建数据合约，但我遇到了以前遇到的问题，一些巧妙的技巧让我得到了我需要的结果。不过这次不一样...

使用 [DataContract] 我可以获得totalResult，但是，为了让商家我不断收到错误......我相信因为“113711”和“113711”是动态的，这会导致创建数据模型出现问题。所以我想也许一本字典可以解决这个问题。但是，每当我尝试它时，我都会出错！

这是我尝试使用的：

```
[DataContract]
public class result
{
    [DataMember(Name = "totalResult")]
    public string totalResult { get; set; }
    [DataMember(Name = "merchants")]
    public Dictionary<string, metchant_info> merchants { get; set; }
}
[DataContract]
public class metchant_info
{
    [DataMember(Name = "merchantRank")]
    public string merchantRank;
    [DataMember(Name = "merchantName")]
    public string merchantName;
    [DataMember(Name = "merchantSlogan")]
    public string merchantSlogan;
    [DataMember(Name = "merchantBdesc")]
    public string merchantBdesc;
    [DataMember(Name = "merchantLogo")]
    public string merchantLogo;
    [DataMember(Name = "merchantLink")]
    public string merchantLink;
    [DataMember(Name = "merchantAddress")]
    public string merchantAddress;
    [DataMember(Name = "merchantLat")]
    public string merchantLat;
    [DataMember(Name = "merchantLng")]
    public string merchantLng;
    [DataMember(Name = "merchantGeoLevel")]
    public string merchantGeoLevel;
    [DataMember(Name = "merchantDistance")]
    public string merchantDistance;
    [DataMember(Name = "merchantCategories")]
    public string merchantCategories;
    [DataMember(Name = "merchantEmail")]
    public string merchantEmail;
    [DataMember(Name = "merchantUrl")]
    public string merchantUrl;
    [DataMember(Name = "merchantPhone")]
    public string merchantPhone;
    [DataMember(Name = "merchantMobile")]
    public string merchantMobile;
    [DataMember(Name = "merchantSrc")]
    public string merchantSrc;
} 
```

这是背后的代码...

```
 try
            {
                Stream responseStream = e.Result;
                DataContractJsonSerializer ser = new DataContractJsonSerializer(typeof(result));
                result response = (result)ser.ReadObject(responseStream);
            }
            catch (Exception ex)
            {
                return;
            } 
```

我目前得到的错误是：

```
"Could not evaluate expression" 
```

如果你想要堆栈跟踪，我会发布它，但它有相当多的无用信息......此外，如果你将数据成员 Merchants 更改为字符串，你将看到以下错误：

```
"System.Collections.Generic.Dictionary`2[System.String,System.Object]" 
```

所以……有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T12:47:36.023

使用[Json.Net](http://json.codeplex.com/)，您可以如下动态处理案例

```
var obj = (JObject)JsonConvert.DeserializeObject(json);

foreach (var item in obj["merchants"])
{
    Console.WriteLine(item.First()["merchantName"]);
} 
```

或者您可以在循环中将每个反序列化为`merchant`您的对象`metchant_info`

```
foreach (var item in obj["merchants"])
{
    var m = JsonConvert.DeserializeObject<metchant_info>(item.First().ToString());
    Console.WriteLine(m.merchantName);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T06:54:45.207

我没有可行的解决方案，但经过一番研究，我发现了以下信息：

看这个问题：[如何在 C# .NET（win7 手机）中读入带有“DataContractJsonSerializer”的“嵌套”Json 文件？](https://stackoverflow.com/questions/4477616/how-would-i-read-into-a-nested-json-file-with-datacontractjsonserializer-in)问题似乎是

```
public Dictionary<string, metchant_info> merchants { get; set; } 
```

序列化程序处理字典的方式似乎存在问题：[DataContractJsonSerializer 的反序列化问题](https://stackoverflow.com/questions/596271/deserialization-problem-with-datacontractjsonserializer)

[有什么方法可以使 DataContractJsonSerializer 正确序列化字典？](https://stackoverflow.com/questions/4559991/any-way-to-make-datacontractjsonserializer-serialize-dictionaries-properly)

希望你能弄清楚。

# assembly - 字节指针和字指针的区别

> ID：10413759
> 
> 赞同：7
> 
> 时间：2012-05-02T12:28:33.590
> 
> 标签：assembly, x86-16, pointers

我在试卷上看到以下问题，

## 问题

```
VarM DWORD ABBF01598h 
```

给出寄存器`al`, `bx`, 和`dl`执行后的内容

1.  `mov al, byte ptr VarM + 1`
2.  `mov bx, word ptr VarM + 2`
3.  `mov dl, byte ptr VarM + 3`

现在我通过定义知道单词 ptr 和字节 ptr ，但我无法理解它们的概念。

## 据我说

1.  `al = b`
2.  `bx = 0`
3.  `dl = F`

请帮助我理解这些。提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-02T12:38:07.050

在您正在查看的情况下，`byte ptr`and`word ptr`并没有完成太多。虽然无害，但汇编程序已经“知道”`al`并且`dl`是字节大小的，并且`bx`是字大小的。

`byte ptr`当（例如）将立即值移动到间接地址时，您需要类似的东西：

```
mov bx, some offset
mov [bx], 1 
```

这通常是不允许的——汇编器无法知道您是否要`1`写入一个字节、一个字、一个双字、可能是一个四字或什么。您可以使用尺寸规范来修复它：

```
mov byte ptr [bx], 1  ; write 1 into a byte
mov word ptr [bx], 1  ; write 1 into a word
mov dword ptr [bx], 1 ; write 1 into a dword 
```

您*可以*让汇编器接受没有（直接）尺寸规范的版本：

```
mov bx, some_offset
assume bx: ptr byte

mov [bx], 1   ; Thanks to the `assume`, this means `byte ptr [bx]` 
```

编辑：（主要是回复@NikolaiNFettisov）。试试这个快速测试：

```
#include <iostream>

int test() { 
    char bytes[] = {1, 2, 3, 4, 5, 6, 7, 8, 9, 10};

    _asm mov eax, dword ptr bytes + 1
}

int main() {
    std::cout << std::hex << test();
    return 0;
} 
```

我得到的结果是：

```
5040302 
```

表明即使我已经告诉了它`dword ptr`，它也只将 1 添加到地址，而不是 4。当然，如果他们选择，编写不同的汇编程序的*人可以*做不同的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T14:38:16.720

通常用于向汇编程序指示您要编码的指令。如果您查看指令集（编码），它应该更明显。一般来说，这意味着您指的是 8 位项目或 16 位项目（或 32 位项目等）。例如，如果你想将常量#1 存储在内存中，你想将它存储为一个字节还是一个字？每种都有不同的编码，但如果您不指定汇编程序，则不会知道要使用什么编码。

# .net - 首先使用 EF 4.3 代码更新实体

> ID：10413762
> 
> 赞同：0
> 
> 时间：2012-05-02T12:28:47.727
> 
> 标签：.net, database, entity-framework

我有以下实体

```
public class Item
{
    public int Id { get; set; }
    public string Name { get; set; }
    public Sections Sections { get; set; }
}

public class Section
{
    public int ID { get; set; }
    public string Name { get; set; }
}

public class Sections : List<Section>, ICollection<Section>
{ } 
```

我添加了一个项目 ID 为 1 的新项目，但其中没有任何部分......

现在我想修改该项目并在其中添加新部分，为此，我在上下文中检索该项目并将其保存在另一个上下文中。在这里，我必须使用两个单独的上下文，因为不确定用户何时要更新对象。在那之前我不能保持上下文对象打开。

```
 Item fAp;
        using (var ctx = new MyContext())
        {
            fAp = ctx.Items.Include(a => a.Sections).Single(a => a.Id == 1);
        }

        using (var ctx2 = new MyContext())
        {
            var nsec = new Section()
            {
                ID = 1,
                Name = "App Sec...1"
            };

            fAp.Sections.Add(nsec);
            ctx2.Entry(fAp).State = EntityState.Modified;
            ctx2.SaveChanges();
        } 
```

通过这样做，新的部分没有被添加到数据库中。然后我在调用 ctx2.SaveChanges() 之前修改了代码并添加了以下行。

```
 ctx2.Entry(nsec).State = EntityState.Added; 
```

已成功保存。

现在，我的问题是我有非常复杂的数据层次结构，我的意思是 Section 类也有很多子导航属性，这些属性还有很多，等等。

跟踪所有此类属性并手动设置它们的状态将非常困难。在这种情况下如何更新数据？

还有一件事，我不会使用急切加载，我的意思是在检索 Item 对象时我不会使用“包含”。我将在需要时使用显式加载，最后想要更新对象。

有什么最好的建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T12:37:34.513

设置状态仅影响您传递给`Entry`调用的单个实体。使用新的上下文实例进行数据持久性后，您必须始终告知要保存的任何实体的 EF 状态。

在您的情况下，您需要执行以下任一操作：

```
ctx2.Items.Attach(fAp); // Now you informed context about existing entity
fAp.Sections.Add(nsec); // Now you told both context and your item that new section exists 
```

或者这个（避免一些其他问题的首选解决方案）：

```
fAp.Sections.Add(nsec); // Your item is not tracked by the new context yet
ctx2.Items.Add(fAp);     // Now context things that both item and section are new
ctx2.Entry(fAp).State = EntityState.Unchanged; // Make sure that item is not inserted again 
```

或这个：

```
fAp.Sections.Add(nsec); // Your item is not tracked by the new context yet
ctx2.Items.Attach(fAp); // Now context things that both item and section are existing
ctx2.Entry(nsec).State = EntityState.Added; // Make sure that section is tracked as new 
```

> 跟踪所有此类属性并手动设置它们的状态将非常困难。在这种情况下如何更新数据？

您的代码正在执行这些更改，因此应该不会那么困难。您甚至可以`IsDirty`为每个实体添加一些附加属性，并将其用作帮助器来跟踪实体的状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T09:43:42.127

更新的实体

```
public class Item
{
    public int Id { get; set; }
    public string Name { get; set; }
    public Sections Sections { get; set; }
    public OtherInfo Info { get; set; }
}
public class OtherInfo
{
    public Guid Id {get;set;}
    public string Description {get;set;}
} 
```

在检索到 Item 对象后，用户可以修改任何内容。比如说上面给出的例子，用户只是插入一个新的 Section 并通过传递对象 Item 来调用 commit 方法。

存储库类中的提交方法

```
public void Commit(Item fAp)
{
    using (var ct = new MyContext())
    {
        bool isExist = ct.Item.Any(a => a.Id == fAp.Id);
        if (!isExist)
        {
           ct.Items.Add(fAp);
        }
        else
        {
           ct.Items.Attach(fAp);
           ct.Entry(fAp).State = EntityState.Modified;
        }
        ct.SaveChanges();
    }
} 
```

在提交方法中，我不会知道用户对对象做了什么。在我的测试中，我添加了部分并调用了这个方法。因为，OtherInfo 没有被修改，它的抛出错误是说 OtherInfo 表的主键重复。

所以，为了让它工作，我必须改变所有实体的状态，比如

> 部分 - 添加; 其他信息 - 无变化；项目 - 无变化

由于结构有点复杂，因此看起来很难跟踪所有实体。

这种方法（提交方法）可以还是建议更好的解决方案？

# android - ListView 获得点击的视图和对应的行

> ID：10413764
> 
> 赞同：1
> 
> 时间：2012-05-02T12:28:53.197
> 
> 标签：android, listview, onclicklistener

我想从 listview 孩子的 onClick 事件中获得点击的行。我能够在该事件中获得点击的项目但没有点击行。请帮我解决问题。

提前致谢！。我的代码是

```
public View getView(int position, View convertView, ViewGroup parent) {
        LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        Holder holder = new Holder();

        pos = position;

        if(convertView == null)
        {

            System.out.println(position);

            convertView= inflater.inflate(R.layout.list_layout,(ViewGroup)parent.findViewById(R.layout.list_layout));

            holder.form_name  = (TextView) convertView.findViewById(R.id.list_text);
            holder.form_details = (TextView) convertView.findViewById(R.id.button_text);

            holder.form_details.setOnClickListener(new OnClickListener(){

                public void onClick(View v) {
                    // TODO Auto-generated method stub

                    System.out.println(pos);
                                   //Here i am able to get clicked view but pos has always 
                    // last value
                    System.out.println("button view clicked for "+cipt_list.get(pos).cipt);

                }});

            System.out.println(holder.form_name);

            convertView.setTag(holder);

        }
        else{

            holder = (Holder) convertView.getTag();
        }

        ciptDetails cipt = cipt_list.get(position);

        holder.form_name.setText(cipt.cipt);

        return convertView;

    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T12:35:24.083

在设置点击监听器之前：

```
holder.form_details.setId(position); 
```

在 onClick 方法中：

`v.getId()`会给你职位。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T12:45:58.237

我们可以在点击事件中获得位置的两种方式：1）使用 OnItemClickListener

```
 list.setOnItemClickListener(new OnItemClickListener(){

        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int position,
                long arg3) {

        }
    }; 
```

2) 在 getView() 方法中，您可以获得位置。只需将其更改为“最终 int 位置”即可在视图的 onClickListener() 中访问

```
public View getView(final int position, View convertView, ViewGroup parent) {
    LayoutInflater inflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    Holder holder = new Holder();

    pos = position;

    if(convertView == null)
    {

        System.out.println(position);

        convertView= inflater.inflate(R.layout.list_layout,(ViewGroup)parent.findViewById(R.layout.list_layout));

        holder.form_name  = (TextView) convertView.findViewById(R.id.list_text);
        holder.form_details = (TextView) convertView.findViewById(R.id.button_text);

        holder.form_details.setOnClickListener(new OnClickListener(){

            public void onClick(View v) {
                // you can access the position here
                System.out.println(pos);
                               //Here i am able to get clicked view but pos has always 
                // last value
                System.out.println("button view clicked for "+cipt_list.get(pos).cipt);

            }});

        System.out.println(holder.form_name);

        convertView.setTag(holder);

    }
    else{

        holder = (Holder) convertView.getTag();
    }

    ciptDetails cipt = cipt_list.get(position);

    holder.form_name.setText(cipt.cipt);

    return convertView;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T12:39:05.067

一个简单的解决方法就是为列表器创建一个子类，并为该行创建一个 int 值，如下所示

```
private class MyClickListener implements View.OnClickListener{
  int row;
  public MyClickListener(int r){
    row = r;
  }
  //rest of your code goes here
  ...
} 
```

现在，当您创建它时，只需调用它

```
 holder.form_details.setOnClickListener(new MyClickListener(pos)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T12:34:18.200

您需要实现[onListItemClick](http://developer.android.com/reference/android/app/ListActivity.html#onListItemClick%28android.widget.ListView,%20android.view.View,%20int,%20long%29)方法。第三个参数是保存您在适配器中单击的信息的位置。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-02T12:36:45.767

您的意思是从列表适配器单击行吗？如果是这样，请使用 listAdatper.get(position)

# f# - F# 中“静态”/“历史”/流数据的统一模型

> ID：10413765
> 
> 赞同：1
> 
> 时间：2012-05-02T12:28:54.380
> 
> 标签：f#, metaprogramming, quotations

我使用的 API 公开了具有不同特征的数据：

*   “静态”参考数据，即您要求它们，得到一个据说不会改变的值
*   “历史”值，您可以在其中查询日期范围
*   “订阅”值，您可以在其中注册以接收更新

但从语义上看，这些字段是一回事，只是消费方式不同。参考数据可以被视为一个常数函数，随着时间的推移产生相同的结果。历史数据只是过去发生的流数据。

我试图找到一个统一的模型来对我的查询的所有语义进行编程，并将其与其消费模式区分开来。

这意味着，可以以“实时”方式评估相同的报价，将字段转换为适当的 IObservable 形式（如果可用），或者以“历史”方式，将“时钟”作为参数并在以下情况下产生值勾选或“参考”方式，仅产生 1 个值（仍由运行查询的历史日期修饰..）

我不确定 F# 中的哪些编程工具最适合该目的，但我正在考虑引用，我从未真正使用过。它是否适合这样的任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T04:46:25.633

我做了一些非常相似的事情（不是静态案例，而是流媒体和历史案例），并且`IObservable`绝对是适合这项工作的工具。实际上，`IEnumerable`它们`IObservable`是双重的，大多数东西你可以为一个写，你也可以为另一个写。但是，基于推送的模型 ( `IObservable`) 更灵活，并且作为一部分的运算符`Rx`比常规`IEnumerable`LINQ 中的运算符更完整和更合适。

使用引号只是意味着您需要从头开始构建上述内容。

您会发现以下内容很有用：

*   `Observable.Return(value)`对于单个静态值
*   `list.ToObservable()`用于将历史可枚举项转换为可观察项
*   直接`IObservable`将值流式传输到 IObservable

另请注意，如果有帮助，您可以使用虚拟调度程序来勾选可观察对象（上述大多数都接受调度程序）。我想这就是你想要的历史案例。

[http://channel9.msdn.com/Series/Rx-Workshop/Rx-Workshop-Schedulers](http://channel9.msdn.com/Series/Rx-Workshop/Rx-Workshop-Schedulers)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T13:02:34.037

你自己说的：就用 IObservable

*   您的静态案例只是 OnNext 1 值
*   在您的历史案例中，您 OnNext 为查询中的每个值（在注册观察者时立即）
*   订阅案例只是普通的 IObservable 模式——你不需要像这样的引用。

# java - Java 小程序中的 .properties 文件列表

> ID：10413768
> 
> 赞同：1
> 
> 时间：2012-05-02T12:29:08.460
> 
> 标签：java, caching, jar, applet

有没有办法在不下载 jar 文件的情况下从小程序内部获取属性文件列表？

我可以使用 jar 阅读器获取 jar 文件`getCodeBase()`并将其与 jar reader 一起使用，但这个选项对我来说是不可接受的，因为我必须再次下载该文件。

我不想再次下载该文件。我想使用已经下载并运行的那个。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T12:51:40.770

> 我想用我已经下载的那个。。

那么是什么阻止了你？请注意，对于已缓存的任何资源，指向服务器的 URL 将导致 JVM 使用缓存的副本（即使控制台另有指示）。

# c - glibc 没有正确编译

> ID：10413770
> 
> 赞同：2
> 
> 时间：2012-05-02T12:29:11.560
> 
> 标签：c, linux, gcc, x86, glibc

在编译`glibc 2.11`时，我收到以下错误。任何想法如何解决这个问题。

```
In file included from ../sysdeps/unix/sysv/linux/syslog.c:10:
../misc/syslog.c: In function ‘__vsyslog_chk’:
../misc/syslog.c:123: sorry, unimplemented: inlining failed in call to ‘syslog’: function body not available
../misc/syslog.c:155: sorry, unimplemented: called from here
make[2]: *** [/home/alice/Desktop/glib-build/misc/syslog.o] Error 1
make[2]: Leaving directory `/home/alice/Desktop/glibc-2.11/misc'
make[1]: *** [misc/subdir_lib] Error 2
make[1]: Leaving directory `/home/alice/Desktop/glibc-2.11'
make: *** [all] Error 2 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T14:07:08.763

显然，这是[在 Ubuntu](http://plash.beasts.org/wiki/GlibcBuildIssues#head-b9149fbab065967691cf1bade23d84325c05e9b0)[上构建的一个已知问题`glibc`](http://plash.beasts.org/wiki/GlibcBuildIssues#head-b9149fbab065967691cf1bade23d84325c05e9b0)。在本质上：

[`glibc`不使用`_FORTIFY_SOURCE`enabled](http://sourceware.org/bugzilla/show_bug.cgi?id=10375)构建，Ubuntu 使用`-D_FORTIFY_SOURCE=2`.

您需要通过取消定义来禁用它`_FORTIFY_SOURCE`。即*附加* `-U_FORTIFY_SOURCE`到您的`CFLAGS`.

# iphone - iPhone 中的 Google+ 集成

> ID：10413776
> 
> 赞同：1
> 
> 时间：2012-05-02T12:29:32.157
> 
> 标签：iphone, ios, google-plus

> **可能重复：**
> [Google plus api 用于在 facebook 等墙上发布](https://stackoverflow.com/questions/7857812/google-plus-api-for-posting-on-wall-like-facebook)

在我的应用程序中，我想集成 Google+。但我没有得到任何 API。如果有人知道重新整理这个。请与我分享。提前致谢。

# php - 将带有 id 的 .php URL 更改为 .html

> ID：10413777
> 
> 赞同：0
> 
> 时间：2012-05-02T12:29:35.470
> 
> 标签：php, html, url-routing

`course.php?id=10`给定我希望它重定向到的 PHP URL ，`course.html`并且我想`id=10`在此页面上使用。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T16:51:37.880

您不能干净地重写 url，也不能在某处包含变量。您需要执行以下操作：

```
RewriteRule ^([0-9]+)/([^.]+)\.html $2.php?id=$1 [L] 
```

这将适用于`http://example.com/10/course.html`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T12:31:23.843

创建一个`.htaccess`文件并添加以下内容：

```
RewriteEngine On
RewriteRule ^([^.]+)\.html$ $1.php [L] 
```

将此上传到文件的根目录（大多数情况下是`/var/www/`或`/home/user/public_html/`.

# maven - 您如何使用 Maven 设置 jetty-start？

> ID：10413781
> 
> 赞同：1
> 
> 时间：2012-05-02T12:29:41.763
> 
> 标签：maven, solr, jetty

**我试图让 Maven 自动下载 jetty-start 的所有依赖项，所以我运行这个：**

```
java start.jar etc/jetty.xml 
```

但是当我这样做时：

```
java start.jar --list-options 
```

我得到了几个缺少的模块，我必须手动将它们作为依赖项添加到我的 Maven 文件中。我已经尝试添加它们，但我一直无法找到合适的版本`servlet-api`，`javax.servlet.http.HttpServletResponse`即使下载的 jar`jetty-servlet`包含`javax/servlet/http/HttpServletResponse.class`在其中。这是错误：

```
java.lang.reflect.InvocationTargetException
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.eclipse.jetty.start.Main.invokeMain(Main.java:457)
        at org.eclipse.jetty.start.Main.start(Main.java:602)
        at org.eclipse.jetty.start.Main.main(Main.java:82)
Caused by: java.lang.NoClassDefFoundError: javax/servlet/http/HttpServletResponse
        at java.lang.Class.getDeclaredConstructors0(Native Method)
        at java.lang.Class.privateGetDeclaredConstructors(Class.java:2389)
        at java.lang.Class.getConstructor0(Class.java:2699)
        at java.lang.Class.newInstance0(Class.java:326)
        at java.lang.Class.newInstance(Class.java:308)
        at org.eclipse.jetty.xml.XmlConfiguration$JettyXmlConfiguration.configure(XmlConfiguration.java:333)
        at org.eclipse.jetty.xml.XmlConfiguration.configure(XmlConfiguration.java:291)
        at org.eclipse.jetty.xml.XmlConfiguration$1.run(XmlConfiguration.java:1203)
        at java.security.AccessController.doPrivileged(Native Method)
        at org.eclipse.jetty.xml.XmlConfiguration.main(XmlConfiguration.java:1138)
        ... 7 more
Caused by: java.lang.ClassNotFoundException: javax.servlet.http.HttpServletResponse
        at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
        at java.security.AccessController.doPrivileged(Native Method)
        at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:307)
        at java.lang.ClassLoader.loadClass(ClassLoader.java:248)
        ... 17 more 
```

我尝试将`org.eclipse.jetty.aggregate:jetty-all`包添加到我的依赖项列表中，但其中的包未被 检测到`java start.jar --list-options`，因此无法正常工作。

有几页文档很有帮助，但没有具体回答这个问题：

*   [在 Maven 中使用 Jetty](http://wiki.eclipse.org/Jetty/Howto/Use_Jetty_with_Maven)
*   [码头功能启动.jar](http://wiki.eclipse.org/Jetty/Feature/Start.jar)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T13:53:01.377

你没有。

jetty-start 工件用于 jetty 分发。使用 jetty-start 工件时不会自动下载依赖项，因为假设您在本地磁盘上有分发，并且只是尝试将类路径组合在一起以启动服务器。

使用 maven，如果您希望在构建期间启动 web 应用程序以进行测试或构建，您可以使用 jetty-maven-plugin。使用该插件，您将获得所需依赖项的大部分，除非您尝试执行需要额外依赖项的特定操作，在这种情况下，您将它们添加到插件声明的部分。

干杯！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T02:42:15.700

您既需要`jetty-start`又需要`jetty-all`做您想做的事情——尽管您也可以使用一组更具体的工件`jetty-all`。

请注意，类路径上的一系列工件不能使用`java -jar`，因此需要`org.eclipse.jetty.start.Main`直接运行

例如：

```
java -cp start.jar:jetty-all.jar org.eclipse.jetty.start.Main --list-options 
```

您可能希望创建一个包含所需 JAR（作为 Maven 依赖项检索）的程序集，然后添加一个启动脚本以指向它们。

您可以在这里找到更完整的示例，它使用程序集插件和 Java Service Wrapper 来运行 Jetty： http: [//svn.apache.org/viewvc/archiva/trunk/archiva-jetty/pom.xml ?revision=1307001&view =标记](http://svn.apache.org/viewvc/archiva/trunk/archiva-jetty/pom.xml?revision=1307001&view=markup)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T02:48:55.270

它可能无法回答您的问题，但这是我在 main() 方法中启动 Jetty 的方式。我创建了一个包含 .war 文件的组装应用程序，并扫描文件系统以找到战争，并使用构建并包含在分发 zip 文件中的战争副本启动 Jetty。

```
 String warLocation = locateWarFile();

    WebAppContext webapp = new WebAppContext();
    webapp.setWar(warLocation);

    webapp.setContextPath("/");

    webapp.setConfigurations(new Configuration[] {
            new WebInfConfiguration(),
            new EnvConfiguration(),
            new WebXmlConfiguration(),
    });

    // launch Jetty's web server and serve requests..
    Server server = new Server();
    Connector connector=new SelectChannelConnector();
    connector.setPort(Integer.getInteger("jetty.port",8080));
    server.setConnectors(new Connector[]{connector});
    server.setHandler(webapp);
    server.start(); 
```

作为记录，我的 Maven 依赖项：

```
 <dependency>
        <groupId>org.mortbay.jetty</groupId>
        <artifactId>jetty</artifactId>
    </dependency>
    <dependency>
        <groupId>org.mortbay.jetty</groupId>
        <artifactId>jetty-util</artifactId>
    </dependency>
    <dependency>
        <groupId>org.mortbay.jetty</groupId>
        <artifactId>jetty-naming</artifactId>
    </dependency>
    <dependency>
        <groupId>org.mortbay.jetty</groupId>
        <artifactId>jetty-plus</artifactId>
    </dependency> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-02T21:29:00.753

以下 POM 文件配置为使用 Jetty 下载和运行[Apache Solr](http://lucene.apache.org/solr/) Web 应用程序：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.myspotontheweb</groupId>
    <artifactId>solr</artifactId>
    <version>1.0-SNAPSHOT</version>
    <packaging>war</packaging>
    <dependencies>
        <dependency>
            <groupId>org.apache.solr</groupId>
            <artifactId>solr</artifactId>
            <version>3.6.0</version>
            <type>war</type>
        </dependency>
        <dependency>
            <groupId>org.apache.solr</groupId>
            <artifactId>solr-velocity</artifactId>
            <version>3.6.0</version>
        </dependency>
    </dependencies>
    <build>
        <plugins>
            <plugin>
                <groupId>org.mortbay.jetty</groupId>
                <artifactId>jetty-maven-plugin</artifactId>
                <version>8.1.3.v20120416</version>
                <configuration>
                    <systemProperties>
                        <systemProperty>
                            <name>solr.solr.home</name>
                            <value>${basedir}/src/main/solr/home</value>
                        </systemProperty>
                        <systemProperty>
                            <name>solr.data.dir</name>
                            <value>${project.build.directory}/solr/data</value>
                        </systemProperty>
                    </systemProperties>
                </configuration>
                <executions>
                    <execution>
                        <phase>compile</phase>
                        <goals>
                            <goal>run-exploded</goal>
                        </goals>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>
</project> 
```

应用程序从 Maven 启动如下：

```
mvn compile 
```

# 为了完整性

[Solr](http://lucene.apache.org/solr/)需要额外的配置文件。有关详细信息，请参阅文档。

```
$ tree
.
|-- pom.xml
`-- src
    `-- main
        `-- solr
            `-- home
                `-- conf
                    |-- admin-extra.html
                    |-- elevate.xml
                    |-- mapping-FoldToASCII.txt
                    |-- mapping-ISOLatin1Accent.txt
                    |-- protwords.txt
                    |-- schema.xml
                    |-- scripts.conf
                    |-- solrconfig.xml
                    |-- spellings.txt
                    |-- stopwords_en.txt
                    |-- stopwords.txt
                    `-- synonyms.txt 
```

# javascript - window.print - 什么设置让浏览器打印一个 url

> ID：10413783
> 
> 赞同：0
> 
> 时间：2012-05-02T12:29:54.710
> 
> 标签：javascript, html, xhtml

当我在网站上使用 window.print() javascript 函数时，它会在打印模式下添加一个 url。例如链接**Stichting Rondom Mantelzorg**与以下基础 html 代码

```
<a href="?q=node/838">Stichting Rondom Mantelzorg</a> 
```

打印（使用 window.print()）为：“Stichting Rondom Mantelzorg (?q=node/838)”。有人可以解释一下这可能来自哪里吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T12:34:08.080

实际上它取决于浏览器。如果您打印，浏览器会自动在页面标题处添加 url。您可以在浏览器中检查页面设置并进行相应更改。它与 window.print() 无关，它是浏览器的功能。

# c# - C# WebRequest.getResponse(): 400 错误请求

> ID：10413795
> 
> 赞同：9
> 
> 时间：2012-05-02T12:30:45.967
> 
> 标签：c#, webrequest, bad-request

我正在尝试使用 System.Web 从服务器下载文件。它确实有效，但有些链接给我带来了麻烦。链接如下所示：

```
http://cdn.somesite.com/r1KH3Z%2FaMY6kLQ9Y4nVxYtlfrcewvKO9HLTCUBjU8IBAYnA3vzE1LGrkqMrR9Nh3jTMVFZzC7mxMBeNK5uY3nx5K0MjUaegM3crVpFNGk6a6TW6NJ3hnlvFuaugE65SQ4yM5754BM%2BLagqYvwvLAhG3DKU9SGUI54UAq3dwMDU%2BMl9lUO18hJF3OtzKiQfrC/the_file.ext 
```

代码看起来基本上是这样的：

```
HttpWebRequest request = (HttpWebRequest)WebRequest.Create(link);
WebResponse response = request.getResponse(); 
```

getResponse() 总是抛出异常（错误 400 错误请求）。但是，我知道该链接有效，因为我可以使用 Firefox 毫无问题地下载该文件。

我还尝试使用 Uri.UnescapeDataString(link) 解码链接，但该链接甚至在 Firefox 中都不起作用。

其他链接以这种方式工作得很好..只是这些不起作用。

## 编辑：

好的，我使用wireshark发现了一些东西：

如果我使用 Firefox 打开链接，则会发送：

```
&ME3@"dM*PNyAo PA:]GET /r1KH3Z%2FaMY6kLQ9Y4nVxYp5DyNc49t5kJBybvjbcsJJZ0IUJBtBWCgri3zfTERQught6S8ws1a%2BCo0RS5w3KTmbL7i5yytRpn2QELEPUXZTGYWbAg5eyGO2yIIbmGOcFP41WdrFRFcfk4hAIyZ7rs4QgbudzcrJivrAaOTYkEnozqmdoSCCY8yb1i22YtEAV/epd_outpost_12adb.flv HTTP/1.1
Host: cdn.somesite.com
User-Agent: Mozilla/5.0 (Windows NT 6.1; rv:12.0) Gecko/20100101 Firefox/12.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: de-de,de;q=0.8,en-us;q=0.5,en;q=0.3
Accept-Encoding: gzip, deflate
Connection: keep-alive 
```

我认为只有第一行是问题所在，因为 WebRequest.Create(link) 解码了 url：

```
&MEz.@!dM/nP9@~P>.GET /r1KH3Z/aMY6kLQ9Y4nVxYp5DyNc49t5kJBybvjbcsJJZ0IUJBtBWCgri3zfTERQught6S8ws1a%2BCo0RS5w3KTmbL7i5yytRpn2QELEPUXZTGYWbAg5eyGO2yIIbmGOcFP41WdrFRFcfk4hAIyZ7rs6Mmh1EsQQ4vJVYUwtbLBDNx9AwCHlWDfzfSWIHzaaIo/epd_outpost_12adb.flv HTTP/1.1
User-Agent: Mozilla/5.0 (Windows NT 6.1; rv:12.0) Gecko/20100101 Firefox/12.0
Host: cdn.somesite.com 
```

（ %2F 替换为 / ）

## 另一个编辑：

我发现 Uri 类会自动解码 url： Uri uri = new Uri(link); //链接未解码 Debug.WriteLine(uri.ToString()); //链接在这里被解码。

我怎样才能防止这种情况？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-02T14:10:31.587

默认情况下，`Uri`该类不允许在 URI 中使用转义`/`字符 ( `%2f`)（即使在我阅读[RFC 3986](https://www.rfc-editor.org/rfc/rfc3986)时这似乎是合法的）。

```
Uri uri = new Uri("http://example.com/embed%2fded");
Console.WriteLine(uri.AbsoluteUri); // prints: http://example.com/embed/ded 
```

（注意：[不要使用 Uri.ToString](http://code.logos.com/blog/2010/08/uritostring_must_die.html)来打印 URI。）

根据Microsoft Connect 上[此问题的错误报告](https://connect.microsoft.com/VisualStudio/feedback/details/511010/erroneous-uri-parsing-for-encoded-reserved-characters-according-to-rfc-3986)，此行为是设计使然，但您可以通过将以下内容添加到 app.config 或 web.config 文件来解决此问题：

```
<uri>
  <schemeSettings>
    <add name="http" genericUriParserOptions="DontUnescapePathDotsAndSlashes" />
  </schemeSettings>
</uri> 
```

（由于`WebRequest.Create(string)`只是委托给`WebRequest.Create(Uri)`，因此无论调用哪种方法，都需要使用此解决方法。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-23T02:44:18.817

这在 .NET 4.5 中已经改变。默认情况下，您现在可以使用转义斜杠。我在这里的评论中发布了更多信息（包括截图）：[GETting a URL with an url-encoded slash](https://stackoverflow.com/questions/781205/getting-a-url-with-an-url-encoded-slash)

# facebook - 获取 Facebook 粉丝页面上每个帖子的点赞数

> ID：10413797
> 
> 赞同：1
> 
> 时间：2012-05-02T12:31:05.287
> 
> 标签：facebook, facebook-graph-api

如何获得 Facebook 帖子的“点赞”数？

我有一个链接`graph.facebook.com/userid_postid`说我可以做到这一点。但是如何找到用户或页面 ID 以及帖子的 ID？

例如，如果在粉丝页面上发布任何帖子：http: [//www.facebook.com/TipsLearnings](http://www.facebook.com/TipsLearnings) of site [http://adityabajaj.com](http://adityabajaj.com)

如果我在上面的粉丝页面上发了一个帖子，并且人们喜欢这个帖子，我如何获得那个帖子的点赞数？我希望该号码可以显示在单独的网站上。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-19T12:33:07.967

您可以使用 FQL

```
SELECT like_info.like_count, share_info.share_count, comment_info.comment_count FROM stream WHERE post_id = 'your_post_id' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T13:25:53.247

您可以使用有效的访问令牌获取粉丝页面的最新帖子列表`/<PAGE_ID>/posts`（您可以通过导航到您的页面找到该页面`http://graph.facebook.com/myown.easytipsandtricks`，或者仅使用用户名）。从那里，你得到一个看起来像这样的对象：

```
"data": [
{
    "id": "22092443056_115909438544849",
    "from": {
        "name": "Starbucks",
        "category": "Food/beverages",
        "id": "22092443056"
    },
    // ...
    "shares": {
        "count": 708
    },
    "likes": {
        "data": [
        {
            "name": "Shanna Gonzales",
            "id": "100000244536406"
        }
        ],
        "count": 17129
    },
    "comments": {
        "count": 759
    }
}
// ... and more posts 
```

访问`count`每个字段的子字段应该分别告诉您分享、喜欢和评论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-20T20:08:20.900

您可以通过将 fields 参数与`likes.limit(1).summary(true)`. 例如，下面的披萨搜索 api 查询将为您提供所有公开帖子及其喜欢计数汇总：

```
https://graph.facebook.com/search?q=pizza&type=post&fields=id,name,likes.limit(1).summary(true) 
```

结果（截断）：

```
{
  "data": [
    {
      "id": "47883936273_659693910762305", 
      "name": "Instagram", 
      "created_time": "2014-02-16T01:15:29+0000", 
      "likes": {
        "data": [
          {
            "id": "100002243084532", 
            "name": "Yvette Martin"
          }
        ], 
        "paging": {
          "cursors": {
            "after": "MTAwMDAyMjQzMDg0NTMy", 
            "before": "MTAwMDAyMjQzMDg0NTMy"
          }, 
          "next": "https://graph.facebook.com/47883936273_659693910762305/likes?limit=1&summary=1&after=MTAwMDAyMjQzMDg0NTMy"
        }, 
        "summary": {
          "total_count": 13682
        }
      }
    }, 
    {
      "id": "136336876521150_314001148754721", 
      "name": "Pizza Box Turns into Plates & Storage Unit!", 
      "created_time": "2014-02-15T21:20:00+0000", 
      "likes": {
        "data": [
          {
            "id": "100005373008864", 
            "name": "Liliana Campoli"
          }
        ], 
        "paging": {
          "cursors": {
            "after": "MTAwMDA1MzczMDA4ODY0", 
            "before": "MTAwMDA1MzczMDA4ODY0"
          }, 
          "next": "https://graph.facebook.com/136336876521150_314001148754721/likes?limit=1&summary=1&after=MTAwMDA1MzczMDA4ODY0"
        }, 
        "summary": {
          "total_count": 2792
        }
      }
    } 
```

# php - Zend 框架：除了控制器中的索引动作之外，没有其他动作是可调用的

> ID：10413802
> 
> 赞同：0
> 
> 时间：2012-05-02T12:31:20.700
> 
> 标签：php, model-view-controller, zend-framework, zend-view, zend-controller

我有一个包含两个操作的控制器文件，即：

```
class IndexController extends Zend_Controller_Action
{

    public function init()
    {
        /* Initialize action controller here */
    }

    public function indexAction()
    {
        // action body
    }

    public function doLoginAction()
    {
        // action body
    }
} 
```

及其对应的视图文件。即当我点击[http://www.mydomain.com/index](http://www.mydomain.com/index) 它加载索引视图。我面临的问题是，当我尝试访问此控制器的索引操作时，它将加载相应的视图，但是当我尝试点击 dologin 操作时，它会给出错误

[http://www.mydomain.com/index/dologin](http://www.mydomain.com/index/dologin)

***消息：操作“dologin”不存在并且没有被困在 __call()***

请求参数：

```
array (
  'controller' => 'index',
  'action' => 'dologin',
  'module' => 'default',
) 
```

当我用另一个控制器和动作尝试它时，也会发生同样的情况。该控制器的索引操作也可以正常运行，但控制器中的任何其他操作都不能正常运行。

PS：我已经在 apache 配置文件中配置了 mod_rewrite 模块和 AllowOverride ALL

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T12:39:07.380

骆驼大小写的动作名称预计将作为参数虚线。因此，doLoginAction() 将响应 /default/index/do-login，而不是 dologin。如果您希望 URL 为 dologin，则应将操作重命名为 dologinAction()。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-14T07:59:42.453

您也可以在控制器级别使用连字符（-）分隔的 url。

假设您需要这样的网址：

[http://www.mydomain.com/do-some-stuff/my-stuff/](http://www.mydomain.com/do-some-stuff/my-stuff/)

那么你的控制器应该被命名为：

```
DoSomeStuffController (as class name) && DoSomeStuffController.php (as controller file name) 
```

和

```
myStuffAction() (as your method name) 
```

# json - 为 Rails 应用程序的 json 发布请求获取 csrf 令牌

> ID：10413803
> 
> 赞同：8
> 
> 时间：2012-05-02T12:31:20.857
> 
> 标签：json, ruby-on-rails-3.1, csrf, rest-client

我一直在尝试使用 rest-client 来访问我编写的 rails 应用程序。我编写了一个快速脚本来登录并发出发布请求。一切正常，但我确实必须解决这样一个事实，即如果您在 json 中请求表单，则不会提供authenticity_token。我必须在其他获取authenticity_token 时发出常规的html 请求，然后将其包含在我提交的json 作为我的发布请求的一部分。基本上我有一个快速的脏脚本，如下所示

```
private_resource = RestClient::Resource.new( 'https://mysite.com')

params =  {:user => {:email => 'user@mysite.com', :password => 'please'}}
#log in
login_response = private_resource['users/sign_in'].post(params, :content_type => :json, :accept => :json)
#get cookie
cookie = login_response.cookies
#get json  
json_response = private_resource['products/new'].get(:content_type => :json, :accept => :json, :cookies => cookie)
#another request that returns html form with authenticity token 
response_with_token = private_resource['products/new'].get( :cookies => cookie)
#extract token 
token = Nokogiri::XML(response_with_token).css('input[name=authenticity_token]').first.attr('value')
#update cookie
cookie = response_with_token.cookies
#populate form and insert token
form = JSON.parse(json_response)
form['name'] = "my product"
form['authenticity_token'] = token
#submit the request
private_resource['products'].post(form.to_json, {:cookies => cookie, :content_type => :json, :accept => :json}) 
```

可以选择关闭 json 请求的 CSRF 保护，但我不想这样做。我可以走机械化路线或类似的路线，然后我不会担心使用 CSRF 的 json 请求，但我只是想尝试用 rest-client 做这些事情

我想我只是想知道是否有没有为 json 请求提供authentity_token 的原因，我还想知道是否有比我在这里采取的相当老套的方法更好的解决令牌问题的方法

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-02T13:01:33.870

将以下代码放入您的应用程序控制器：

```
def verified_request?
    if request.content_type == "application/json"
      true
    else
      super()
    end
end 
```

并使用 before_filter 调用此方法。

有关更多详细信息，请查看： [http ://blog.technopathllc.com/2011/09/rails-31-csrf-token-authenticity-for.html](http://blog.technopathllc.com/2011/09/rails-31-csrf-token-authenticity-for.html)

并在 rails 中检查此问题：[https ://github.com/rails/rails/issues/3041](https://github.com/rails/rails/issues/3041)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-28T01:25:49.620

在您的`app/views/products/new.json.jbuilder`中，添加以下内容：

```
json.authenticity_token form_authenticity_token 
```

这将插入一个`"authenticity_token"`值为令牌的键，因此您`json_response`也将获得令牌。[来自这个答案](https://stackoverflow.com/a/21762902)的想法。

# jquery - 如何在 asp.net 中的数据库中设置 jquery 自动完成中的 minLength？

> ID：10413812
> 
> 赞同：1
> 
> 时间：2012-05-02T12:31:58.630
> 
> 标签：jquery, asp.net, autocomplete

我想在 asp.net 中使用数据库中的 jquery 自动完成功能。除了 minLength 选项外，我得到了它的工作。如以下代码所示，我尝试了几种方法，但无法使 minLength 选项起作用。请阐明这一点。谢谢你。

这是我的代码：

```
<script src="../../../jquery/jquery-1.7.2.js" type="text/javascript"></script>
<script type="text/javascript" src="../../../jquery/jquery.autocomplete.js"></script>
  <script type="text/javascript">
      $(document).ready(function() {
      $("#<%=TextBox1.ClientID%>").autocomplete({ minLength: 4 });
      $("#<%=TextBox1.ClientID%>").autocomplete("option", "minLength", 4); 
      $("#<%=TextBox1.ClientID%>").autocomplete("AutocompleteData.ashx");
      });
  </script> 

<%@ WebHandler Language="C#" Class="AutocompleteData" %>

using System;
using System.Web;
using System.Data.SqlClient;

public class AutocompleteData : IHttpHandler {

public void ProcessRequest(HttpContext context)
{
    string schoolname = context.Request.QueryString["q"];
    string sql = "my query";
    using (SqlConnection connection = new SqlConnection(
        System.Configuration.ConfigurationManager.ConnectionStrings["myConnectionString"].ConnectionString))
    using (SqlCommand command = new SqlCommand(sql, connection))
    {
        connection.Open();
        using (SqlDataReader reader = command.ExecuteReader())
        {
            while (reader.Read())
            {
                context.Response.Write(reader.GetString(0) + Environment.NewLine);
            }
        }
    }
}

public bool IsReusable {
    get {
        return false;
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2021-02-26T00:25:54.087

我意识到我没有使用 JQuery UI，而是使用旧的 JQuery 插件。

现在我尝试了 JQuery UI，发现 minLength 有效。请参阅[此链接](https://bettereducation.com.au/forum/it.aspx?g=posts&t=2254)中的详细信息。

# php - 如何在没有表单的情况下将长字符串发送到 php 文件？

> ID：10413814
> 
> 赞同：1
> 
> 时间：2012-05-02T12:32:02.763
> 
> 标签：php, javascript, jquery

我在表单中有一个textarea（form action = post）和这个textarea下的一个链接，用户应该填写这个textarea并单击按钮将texarea中写入的文本传输到另一个文件，我正在使用jQuery来抓取textarea 内容并将它们附加到链接的 href，这在我用长字符串测试 textarea 之前工作正常。

那么将很长的字符串发送到另一个 php 文件的替代方法是什么？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T12:33:49.640

使用 $.post ，POST 数据没有大小限制。

但是当您想要链接的行为（打开目标页面）时，您需要一个表单。

一个简单的方法：

```
<script  type="text/javascript">
/**
  * @param o mixed selector/element to send
  * @param a string url to send to
  * @param m optional string HTTP-method (default: 'post')
  * @param t optional string target-window(default: '_self')
  **/
function fx(o,a,m,t)
{
  $('<form/>')
    .attr({action:a,method:m||'post',target:t||'_self'})
      .css('display','none')
        .append($(o).clone())
          .appendTo('body')
            .submit()
              .remove();
}
</script>

<form>
 <input name="foo">
 <textarea id="textareaId" name="bar">foobar</textarea>
 <a style="cursor:pointer;text-decoration:underline" 
    onclick="fx('#textareaId','some.php')">send only the textarea</a>
</form> 
```

它动态创建一个新表单，将所需元素附加到表单并将表单发送到（到您想要的任何地方）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T12:35:04.590

将[AJAX](http://api.jquery.com/jQuery.ajax/)与 POST 方法一起使用：

```
$.ajax({
  url: "test.php",
  context: document.body
}).done(function() { 
  alert("Success");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T12:33:52.030

您可以在 URL 中发送的字符数是有限制的。[IE 网址限制](http://support.microsoft.com/kb/208427)

那可能是你的问题。

但是你也可以在 jquery 中使用 post

# javascript - Dojo PJAX 库

> ID：10413815
> 
> 赞同：0
> 
> 时间：2012-05-02T12:32:09.867
> 
> 标签：javascript, html, ajax, dojo, pjax

就像jQuery 用户[的 jquery-pjax](https://github.com/defunkt/jquery-pjax)一样，Dojo 中是否有相同的支持（对于使用 Dojo 1.7.x 的人）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T12:31:24.603

不确定这是否有用（因为它不是真正的 PJAX 的 dojo 实现），但您应该能够在 dojo 旁边使用 PJAX-Standalone [https://github.com/thybag/PJAX-Standalone](https://github.com/thybag/PJAX-Standalone)没有任何问题（基本上没有 JQuery 依赖项的 pjax）。

# javascript - 从构造函数中正确销毁 JavaScript 中的对象

> ID：10413819
> 
> 赞同：0
> 
> 时间：2012-05-02T12:32:23.197
> 
> 标签：javascript, object, constructor, destroy

我的问题示例：

```
/**
 * @constructor
 */
function Marker(opts) {
    opts = opts || {};
    this.text = opts.text || 'Hello!';
    this.node = null;
    this.init();
};

Marker.prototype = {
    init: function() {
        this.node = document.createElement('div');
        this.node.innerHTML = this.text;
        document.body.appendChild(this.node);
    },
    destroy: function() {
        if ( this.node && this.node.parentNode )
            this.node.parentNode.removeChild(this.node);

        for (var i in this)
            if ( this.hasOwnProperty(i) )
                delete this[i];

        // this.constructor = null; // :-(
        // this = null; // :-(
        // H O W ?
    }
};

var first = new Marker({ text: 'first' });

alert( first instanceof Marker );
first.destroy();
alert( first instanceof Marker ); // want false 
```

`.destroy()`如果我想在第二个消息框中看到 false，我应该如何更新方法？解决方案必须是 croossbrowsing，而不使用**proto**。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T12:47:45.773

没有办法用 null 替换它，但您可以将字段销毁添加到原型并检查函数是否存在：`Marker.prototype.exist=function(){ !this.destroyed; }`

```
destroy=function(){
  ...
  this.destroyed=true;
} 
```

# qt - 使用图像或使用图形功能进行 2D 游戏开发？

> ID：10413824
> 
> 赞同：1
> 
> 时间：2012-05-02T12:32:35.837
> 
> 标签：qt, graphics

我正在尝试编写一个简单的游戏，让一些狗和猫四处走动。现在我的狗，猫是蓝色矩形，我需要让它们更漂亮，现在有两个选择：

1.  使用图像。
2.  通过一些图形类来绘制它们。

但我不知道我应该选择什么！

1.  如果使用图像，我必须画一些（对象可以动画）。但它使事情变得简单。
2.  使用图形功能给我更多的力量（如果有更多的狗和猫，OO 会帮助我很多）。但我会让我的酒吧受伤。

最重要的是哪个更快？顺便说一句，我正在使用 Qt。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T12:53:09.920

我肯定会使用位图。

渲染位图图像通常更快，因为它可以完全缓存在内存中，除非它很大（在你的情况下不应该如此）。`memcpy`一旦从磁盘读取，底层机制将只涉及极快（或类似的）。

由于函数调用、数学/转换，使用矢量图形绘制狗会在性能方面产生很大的开销，*并且*最终实际上需要比位图**更多的内存。**

# windows-services - 使用 Orca 更改服务

> ID：10413826
> 
> 赞同：0
> 
> 时间：2012-05-02T12:32:39.607
> 
> 标签：windows-services, windows-installer, orca

我有一个我创建的 Windows 服务，我想在同一台服务器上安装多次，而不必创建多个重复的 VS 项目。有没有办法使用 Orca 来为此编辑 MSI 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T06:54:04.807

有办法，但并不容易。基本上，您需要生成代表产品不同实例的多个转换：

*   使用 Transform -> New Transform 菜单开始创建变换
*   更改属性表中的 ProductCode 和 ProductName 属性
*   更改您的服务名称
*   保存变换
*   对您想要的其他实例执行相同的操作
*   安装软件包时，使用其中一种转换： [http ://technet.microsoft.com/en-us/library/bb490766.aspx](http://technet.microsoft.com/en-us/library/bb490766.aspx)

# wpf - 使用 MVVM 从 WPF 中的 ViewModel 触发命令

> ID：10413830
> 
> 赞同：2
> 
> 时间：2012-05-02T12:32:51.527
> 
> 标签：wpf, mvvm, user-controls

我创建了一些具有可绑定“ClearCommand”ICommand 依赖属性的自定义控件（不是用户控件）。这个属性将完全按照它的意思做：它将清除控件中的所有值（文本框等）。我还将（一些）相同的属性绑定到我在下面描述的 VM。

现在我被困在尝试在以下 MVVM 场景中触发这些控件中的 ClearCommand ：

我在我的视图中添加了一些这样的控件。该视图还包括一个绑定到我的 ViewModel`SaveCommand` `DelegateCommand`属性的“保存”按钮。

我需要做的是，在成功保存后，VM 应该触发`ClearCommand`在视图中找到的那些控件。![在此处输入图像描述](../Images/955e91916fa5b941ae42d57ad7936301.png)

**更新**

我在下面添加了代码示例。我有一些类似于 ExampleCustomControl 的控件。另外，请注意，如果完全关闭，我愿意重组其中的一些。

示例控制片段：

```
public class ExampleCustomControl : Control {

    public string SearchTextBox { get; set; }
    public IEnumerable<CustomObject> ResultList { get; set; }

    public ExampleCustomControl() {
        ClearCommand = new DelegateCommand(Clear);
    }

    /// <summary>
    /// Dependency Property for Datagrid ItemSource.
    /// </summary>
    public static DependencyProperty SelectedItemProperty = DependencyProperty.Register("SelectedItem",
        typeof(CustomObject), typeof(ExampleCustomControl), new PropertyMetadata(default(CustomObject)));

    public CustomObject SelectedItem {
        get { return (CustomObject)GetValue(SelectedCustomObjectProperty); }
        set { SetValue(SelectedCustomObjectProperty, value); }
    }

    public static DependencyProperty ClearCommandProperty = DependencyProperty.Register("ClearCommand", typeof(ICommand),
            typeof(ExampleCustomControl), new PropertyMetadata(default(ICommand)));

    /// <summary>
    /// Dependency Property for resetting the control
    /// </summary>
    [Description("The command that clears the control"), Category("Common Properties")]
    public ICommand ClearCommand {
        get { return (ICommand)GetValue(ClearCommandProperty); }
        set { SetValue(ClearCommandProperty, value); }
    }

    public void Clear(object o) {
        SearchTextBox = string.Empty;
        SelectedItem = null;
        ResultList = null;
    }
} 
```

示例视图片段：

```
<Grid HorizontalAlignment="Stretch" VerticalAlignment="Stretch">
    <Grid.RowDefinitions>
        <RowDefinition Height="*" />
        <RowDefinition Height="30"/>
    </Grid.RowDefinitions>
    <control:ExampleCustomControl Grid.Row="0"
        SelectedItem="{Binding Selection, UpdateSourceTrigger=PropertyChanged}" />
    <Button Grid.Row="1" x:Name="ResetButton" Command="{Binding SaveCommand}">
        Save
    </Button>
</Grid> 
```

示例视图模型：

```
public class TestViewModel : WorkspaceTask {
    public TestViewModel() {
        View = new TestView { Model = this };
        SaveCommand = new DelegateCommand(Save);
    }

    private CustomObject _selection;
    public CustomObject Selection {
        get { return _selection; }
        set {
            _selection = value;
            OnPropertyChanged("Selection");
        }
    }

    public DelegateCommand SaveCommand { get; private set; }
    private void Save(object o) {
        // perform save
        // clear controls
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T13:01:51.860

正如其他人所说，VM 不应该直接在 MVVM 中知道视图，因此 VM 在您的自定义控件上触发某些内容以清除所有内容并没有任何意义。

我会将`DataContext`自定义控件设置为一个对象，该对象具有您要清除的所有属性，这些属性都绑定（双向）到您的文本框等。然后在 Save() 方法中，您可以设置一个新对象（自定义控件`DataContext`绑定到）并且所有属性都将为您清除（假设您已`INotifyPropertyChanged`在对象上实现）。

更新：

根据我的评论，请参阅当前设置的解决方法示例（未经测试的顺便说一句）：

```
 public static DependencyProperty SelectedItemProperty = DependencyProperty.Register("SelectedItem",
        typeof(CustomObject), typeof(ExampleCustomControl), new PropertyMetadata(default(CustomObject), OnSelectedItemChanged));

    private static void OnSelectedItemChanged(DependencyObject source, DependencyPropertyChangedEventArgs e)
    {
        var cont = source as ExampleCustomControl;

            //do all the clearing of txtboxes etc here....
        cont.SearchTextBox = string.Empty;
    } 
```

但我仍然会尝试将所有这些移到 VM 中。即有一个清除命令，就像您使用保存命令并将文本框文本等绑定到VM中的属性一样，当调用该命令时，它会清除所有内容，然后您也可以轻松地从VM中的Save方法调用。但显然我不知道您从长远来看要达到什么目标，也不知道 selectedItem 和文本框等是如何相关的，所以我猜（一如既往）取决于。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T12:39:59.940

听起来你正在以错误的方式思考这个问题。在 MVVM 中，ViewModel 永远不应该知道有关自定义控件的任何信息（因此您在使用此 Clear 功能时遇到问题）。

您的要求有点模糊，但您是否考虑过：

1）如果属性是从虚拟机绑定的，控件是否不能检测到这些属性何时更改？

2) 如果您确实需要从 XAML 层调用 Clear 并希望将其保持为纯 MVVM，请考虑类似于 Expression Blend SDK 的[CallMethodAction](http://msdn.microsoft.com/en-us/library/ff723947%28v=expression.40%29.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T12:42:11.113

作为我评论的后续行动。我怀疑您的命令是针对 View 并`TextBox`直接清除 es 。相反，让您的命令以 ViewModel 为目标并清除 View 绑定到的属性。然后，您可以将该命令作为 ViewModel 上的一个属性，并在需要时调用它。

# c++ - 如何在 C++ 中创建一个键和值作为结构的映射？

> ID：10413831
> 
> 赞同：0
> 
> 时间：2012-05-02T12:32:53.790
> 
> 标签：c++, map, struct

我正在尝试创建一个映射，其键和值都是结构（stE 和 stR），所以我有这样的东西：

```
 struct stR{
  char* est;
  char* et;     
 };

struct stE{
      int num;
      char* form; 
      char* et; 
      map<stE,stR> s; 
}; 
```

但是当我想插入一个新元素时：

```
stE e;
e.num=1;
e.form="a";
e.et="b";

stE f;
f.num=2;
f.form="c";
f.et="d";

stR r;
r.est="e";
r.et="";

e.s.insert(make_pair(f, r)); 
```

它给了我一个错误：

> C:\Dev-Cpp\include\c++\3.4.2\bits\stl_function.h 在成员函数`bool std::less<_Tp>::operator()(const _Tp&, const _Tp&) const [with _Tp = stEstado ]'：

我找不到问题所在。有人可以帮我吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T12:35:27.960

使用地图时，您需要提供小于运算符或给它一个比较器，因为它会自动对键进行排序。

```
bool stE::operator< (const stE &); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-02T12:37:58.407

您需要提供[严格的弱排序比较](http://en.wikipedia.org/wiki/Strict_weak_ordering)，您可以通过`operator<`为您定义`stE`或将仿函数的比较器函数作为映射模板参数传递来实现。`std::map`看起来像这样：

```
template<class Key, class T, class Compare = std::less<Key>, ... > class map; 
```

默认情况下，`Compare`设置为 use `T::operator<(const T&)`，但您可以传递您自己的实现逻辑的函子类型。如果您无法修改实际类，这一点很重要。

请记住，映射需要能够插入默认构造`stR`对象，并且您当前的结构没有默认构造函数，指向的指针将被初始化为随机值。这可能是一个更进一步的问题。

此外，您的键结构有一个映射，它是它自己的键类型。当您尝试实现小于比较时，这可能会导致递归问题：

```
struct stE{
  int num;
  char* form; 
  char* et; 
  map<stE,stR> s; // how do we use this in the comparison?
}; 
```

# php - WampServer 2.2 上的 xhprof

> ID：10413832
> 
> 赞同：1
> 
> 时间：2012-05-02T12:32:53.760
> 
> 标签：php, wampserver, xhprof

我试图让 XHProf 在我的 WampServer 上工作。

我已从以下位置下载了 dll：[http](http://dev.freshsite.pl/php-extensions/xhprof/file/details/xhprof-0103-for-php-53-vc9.html) : //dev.freshsite.pl/php-extensions/xhprof/file/details/xhprof-0103-for-php-53-vc9.html 并在 C:\ 中重命名为 xhprof.dll wamp\bin\php\php5.3.9\ext（这是 phpinfo() 中为扩展列出的目录）

来自 phpinfo() 的 Php.ini 路径：C:\wamp\bin\apache\Apache2.2.21\bin\php.ini

该文件中列出的扩展名：

```
 extension=php_curl.dll
 extension=xhprof.dll
 ;extension=php_dba.dll
 extension=php_mbstring.dll
 ;extension=php_exif.dll
 ;extension=php_fileinfo.dll
 extension=php_gd2.dll
 ;extension=php_gettext.dll
 ;extension=php_gmp.dll
 ;extension=php_intl.dll
 ;extension=php_imap.dll
 ;extension=php_interbase.dll
 ;extension=php_ldap.dll
 ;extension=php_ming.dll
 ;extension=php_mssql.dll
 extension=php_mysql.dll
 extension=php_mysqli.dll
 ;extension=php_oci8.dll
 ;extension=php_oci8_11g.dll 
 ;extension=php_openssl.dll
 ;extension=php_pdo_firebird.dll
 ;extension=php_pdo_mssql.dll
 extension=php_pdo_mysql.dll
 ;extension=php_pdo_oci.dll
 ;extension=php_pdo_odbc.dll
 ;extension=php_pdo_pgsql.dll
 extension=php_pdo_sqlite.dll
 ;extension=php_pgsql.dll
 ;extension=php_phar.dll
 ;extension=php_pspell.dll
 ;extension=php_shmop.dll
 ;extension=php_snmp.dll
 ;extension=php_soap.dll
 ;extension=php_sockets.dll
 ;extension=php_sqlite.dll
 ;extension=php_sqlite3.dll
 ;extension=php_sybase_ct.dll
 ;extension=php_tidy.dll
 ;extension=php_xmlrpc.dll
 ;extension=php_xsl.dll
 ;extension=php_zip.dll 
```

但是当我重新启动 WampServer 和与之关联的服务时，phpinfo() 中没有出现 XHProf 信息

我正在寻找解决此问题的方法，或者寻找进一步的方法来调查为什么此扩展程序未加载

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T08:16:10.683

您使用的是 64 位的 WampServer，但 xhprof.dll 是为 32 位架构制作的，并且不兼容。在我自己的 Windows 7 机器上，我在 apache_error.log 中收到此错误：

```
PHP Warning:  PHP Startup: Unable to load dynamic library 'c:/wamp/bin/php/php5.3.8/ext/php_xhprof.dll' - %1 is not a valid Win32 application.\r\n in Unknown on line 0
<br />
<b>Warning</b>:  PHP Startup: Unable to load dynamic library 'c:/wamp/bin/php/php5.3.8/ext/php_xhprof.dll' - %1 is not a valid Win32 application.
 in <b>Unknown</b> on line <b>0</b><br /> 
```

目前似乎没有 64 位版本，因此您只能选择可以执行的操作。第一个选择是使用 32 位版本的 WampServer（在开发机器上我看不出有太多缺点）。二是在新鲜现场甜言蜜语，编译/支持64位。祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T13:49:05.807

谢谢伦纳德·查利斯。几个小时以来，我遇到了类似的错误。我需要使用 php_ibm_db2.dll。将其添加到扩展文件夹和 php.ini 文件后。我开始收到错误消息。

**无法加载动态库 'c:/wamp/bin/php/php5.3.13/ext/php_ibm_db2.dll' - %1 不是有效的 Win32 应用程序。**

我遇到的一些解决方案建议将其放在 system32 文件夹中。那没有帮助。我去了几个论坛和博客。所有建议都失败了。直到我看到你的推荐。这么简单，想不通为什么我没想到。虽然错误信息有点模糊。

顺便说一句，对于那些使用**PHP 到 DB2 环境的人，可以在此处获得 dll 文件：http: [//sourceforge.net/projects/db2mc/files/](http://sourceforge.net/projects/db2mc/files/)**。

确保您还安装了 Microsoft Visual C++ 2010 SP1 Redistributable Package (x86) - vcredist_x86.exe。

**[http://www.microsoft.com/en-us/download/details.aspx?id=8328](http://www.microsoft.com/en-us/download/details.aspx?id=8328)**

我希望这对将来可能遇到类似问题的人有所帮助。感谢所有为本论坛做出贡献的人。这是一个很大的帮助。

# javascript - cookie 是否适合客户端使用？

> ID：10413833
> 
> 赞同：3
> 
> 时间：2012-05-02T12:32:54.547
> 
> 标签：javascript, cookies, cross-browser, local-storage

我想在用户的浏览器（或任何设备/移动浏览器）上为下一个会话存储一些非机密数据。我可以将它存储在 cookie 上，但我不想在任何请求中将 cookie 发送到服务器。

我只需要存储和检索大约 5 个键值对，仅限客户端。cookie 是否适合此目的，还是我应该考虑本地存储？跨浏览器支持非常重要。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T12:36:56.117

[`localStorage`支持得很好](http://caniuse.com/#search=localstorage)。
[AmplifyJS](http://amplifyjs.com/api/store/)为其他浏览器提供非 cookie 回退，cookie 是**最后**的手段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T13:26:04.133

`LocalStorage` 是要走的路。看看[这个很棒的演示文稿](http://client-side-storage.appspot.com/)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T12:38:49.220

Cookie 将在每次请求时发送到服务器（假设主机和路径匹配）。

如果您只想要某个页面，则可以将 cookie 限制为路径 - 看看[这个问题](https://stackoverflow.com/questions/576535/cookie-path-and-its-accessibility-to-subfolder-pages)。

但我会先使用本地存储。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T13:21:45.877

Cookies 是 pre-ajax 并且最初被实现为始终在服务器请求中发送。如果您实际上支持旧浏览器，我会使用带有 cookie 的本地存储作为后备。无论如何，仍在使用 IE7 及以下版本的人并不完全是性能猎犬。如果问题更多与后端成本有关，我建议进行民意调查以了解有多少用户可能实际依赖于 cookie 后备。成本实际上可能并不大。IE6 的使用几乎无关紧要，IE7 被边缘化到人们也放弃支持的程度。但大多数情况下，我会像疯狗一样努力避免对超过 5 年历史的浏览器的优雅降级支持。它彻底解决了很多问题，打开了很多新的大门。

# c++ - 多态构造函数

> ID：10413834
> 
> 赞同：1
> 
> 时间：2012-05-02T12:32:55.603
> 
> 标签：c++, inheritance

我的代码编译得很好，但我遇到了一个特定部分没有显示正确输出的问题。

这是我的基类

```
class Item
 {
 protected:

//int count;
string model_name;
int item_number;

 public:

Item();
Item(string name, int number);
     string getName(){return model_name;}
int getNumber(){return item_number;} 
```

这是我的派生类：

```
 class Bed : public Item
 {
 private:

string frame;
string frameColour;
string mattress;

 public:

 Bed();

 Bed(int number, string name, string frm, string fclr, string mtres); 
```

函数定义：

```
 Bed::Bed(int number, string name, string frm, string fclr, string mtres)
{
model_name=name;
item_number=number;
frame=frm;
frameColour=fclr;
mattress=mtres;
cout<<model_name<<item_number<<frame<<frameColour<<mattress<<endl;
} 
```

导致问题的主要部分：

```
 Item* item= new Bed(number, name, material, colour, mattress);
 cout<<"working, new bed"<<endl;
 v.push_back(item);
 cout<<"working pushback"<<endl;
 cout<<" this is whats been stored:"<<endl;
 cout<<v[count]->getName<<endl;
 cout<<v[count]->getNumber<<endl;
 count++; 
```

当程序执行时，构造函数中的 cout 会显示正确的输出，但是当我从 main 函数调用 getname 和 getnumber 时，无论其中存储了什么，程序都会为两者打印 '1'。我认为派生类可以使用基类方法，我错过了什么？任何帮助都会很棒

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T12:53:12.703

好吧，您的示例与多态性无关。这里的原因是您没有使用任何虚拟功能。这是您可以使用的代码。

```
class Item
{
protected:

    std::string model_name;
    int item_number;

public:

    Item();
    Item(std::string& name, int number) : model_name(name), item_number(number) {};
    std::string getName(){return model_name;}
    int getNumber(){return item_number;}
};

class Bed : public Item
{
private:

    std::string frame;
    std::string frameColour;
    std::string mattress;

public:

    Bed();

    Bed(int number, std::string& name, std::string& frm, std::string& fclr, std::string& mtres) : Item(name, number), 
                                                                                                  frame(frm),
                                                                                                  frameColour(fclr), 
                                                                                                  mattress(mtres) {};
};

int main()
{
    int count = 0;
    std::vector<Item*> v;

    Item* item = new Bed(2, std::string("MyBed"), std::string("wood"), std::string("red"), std::string("soft"));
    std::cout << "working, new bed" << std::endl;
    v.push_back(item);

    std::cout << "working pushback" << std::endl;
    std::cout << " this is whats been stored:" << std::endl;
    std::cout << v[count]->getName() << std::endl;
    std::cout << v[count]->getNumber() << std::endl;

    ++count;

    getchar();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T12:49:21.010

这看起来不正确（我不确定它是如何编译的）：

```
cout<<v[count]->getName<<endl;
cout<<v[count]->getNumber<<endl; 
```

as`getName`和`getNumber`are 方法。改成：

```
cout<<v[count]->getName()<<endl;
cout<<v[count]->getNumber()<<endl; 
```

此外，`count`未发布的初始化：确保它为零。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T12:37:09.720

`count`似乎是您的`vector`. 推回最后一个元素后，您并没有增加`count`，因此您正在打印一个较旧的元素。

你为什么不试试：

```
cout<<v[v.size()-1]->getName<<endl;
cout<<v[v.size()-1]->getNumber<<endl; 
```

此外，您应该开始在构造函数中使用初始化列表：

```
Bed::Bed(int number, string name, string frm, string fclr, string mtres) :
  Item(name,number),
  frame(frm),
  frameColour(fclr),
  mattress(mtres)
{
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T12:37:36.833

你还没有从派生类中调用基类的构造函数......它应该是第一行......更新代码，我相信它会开始工作......

**编辑**

如果不是这样，您可能还应该检查您处理计数变量的方式......正如其他人所指出的......

# c# - N 层架构和冗余数据库访问

> ID：10413835
> 
> 赞同：-2
> 
> 时间：2012-05-02T12:32:56.393
> 
> 标签：c#, sql, nhibernate, architecture, n-tier-architecture

作为我硕士论文的一部分，我将开发一个用于公寓热优化的软件。该软件将是中等规模的，将有一个面向客户的基于 Web 的界面和一个面向传感器的界面（放置在公寓中）。我正在考虑多层架构。系统中的许多对象都会有自己的数据库表。这意味着用于保存和检索对象的大量代码和 SQL 语句（以及时间）。这仍然是开发软件的标准方式吗？

我曾经考虑过使用NHibernate，但我有一些疑问，主要原因是：我没有太多的软件开发经验。
会话处理似乎相当复杂，特别是如果必须有一个业务层为 Web 接口和传感器接口提供功能。由于延迟加载，我需要让会话在这些接口处处于活动状态，但是表示层会意识到数据访问层是不可取的。

那么，有没有其他选择？我正在使用 MySql 5.5 和 C#。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T13:31:02.273

如果您“我在软件开发方面没有太多经验”，我会仔细考虑 NHibernate。虽然它是一个了不起的工具并且非常强大 - 学习曲线可能很陡峭，并且取决于您想要投入多少时间来学习它。不过话虽如此，我真的很高兴。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T13:37:02.060

当前 Web 开发中的正统是[MVC](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)；在微软领域，这意味着[ASP.Net MVC](http://www.asp.net/mvc)。MS 站点有一个很棒的教程，描述了您将代表您的业务领域的“模型”类与数据库集成的方式。

ASP.Net MVC 还提供了一种构建 Web API 的方法——这应该允许您的传感器使用相同的底层模型类与应用程序进行通信。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T12:46:14.680

在我看来，您有一个固有的逻辑分区，应该将传感器-数据库通信抽象为一层，并将客户-数据库通信抽象为另一层。传感器端可以提供一组只读接口，以便（根据需要）向客户端提供信息，而热量优化工作的核心功能可以基本上位于中间。

如果您花一些时间考虑应该如何划分这些部分，允许您在两者之间定义干净的接口，那么整个项目的复杂性应该至少会减少一些。

# django - 将原始 SQL 传递给 Django 模板

> ID：10413838
> 
> 赞同：2
> 
> 时间：2012-05-02T12:33:19.373
> 
> 标签：django, django-templates, django-views

我需要显示大量我不想分页的数据，因为我使用的是 jQuery 表格排序器，并且`Person.objects.all()`在视图中使用对于数据库来说非常昂贵。加载时间太长，所以我试图在我的视图中执行原始 SQL。

我尝试使用 Django 的通用视图，但它们和方法一样慢`objects.all()`。

这是我的模型。本质上，我想显示所有人，同时计算他们出现的次数，比如说，`var1`或`var2`。

```
class Person(models.Model):
    name = models.CharField(max_length=64, blank=True, null=True)
    last_name = models.CharField(max_length=64,)
    slug = models.SlugField()

class Object(models.Model):
    title = models.ForeignKey(Title)
    number = models.CharField(max_length=20)
    var1 = models.ManyToManyField(Person, related_name="var1_apps", blank=True, null=True)
    var2 = models.ManyToManyField(Person, related_name="var2_apps", blank=True, null=True)
    var3 = models.ManyToManyField(Person, related_name="var3_apps", blank=True, null=True)
    # ...   
    slug = models.SlugField()

from django.db import connection
    def test (request):
        cursor = connection.cursor()
        cursor.execute('SELECT * FROM objects_person')
        persons = cursor.fetchall() # fetchall() may not be the right call here?
        return render_to_response('test.html', {'persons':persons}, context_instance=RequestContext(request)) 
```

模板：

```
 <table class="table tablesorter">
               <thead>
                   <tr>
                   <th>Name</th>
                   <th>Var1</th>
                   <th>Var2</th>
                   <th>Var3</th>
                   </tr>
               </thead>
               <tbody>
                       {% for person in persons %}
                   <tr>
                       <td><a href="{{ person.get_absolute_url }}">{{  person.last_name }}{% if person.name %}, {{ person.name }}{% endif %}</a></td>
                       <td>{{ person.var1_apps.count }}</td>
                       <td>{{ person.var2_apps.count }}</td>
                       <td>{{ person.var3_apps.count }}</td>
                   </tr>
               {% endfor %}
               </tbody>
           </table> 
```

它的作用是迭代空行，但如果我只是调用`{{ creator }}`它，它将显示整个 SQL 表——这是我不想要的。我一定对查询做错了，所以任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T13:37:44.300

问题不在于`Person.objects.all()`. 当您遍历该查询集时，您将对查询集中的*每个*项目执行三个查询以计算计数。

答案是使用每个字段的计数来[注释您的查询集。](https://docs.djangoproject.com/en/dev/topics/db/aggregation/#generating-aggregates-for-each-item-in-a-queryset)

```
# in the view
persons = Person.objects.annotate(num_var1_apps=Count('var1_apps'),
                                  num_var2_apps=Count('var2_apps'),
                                  num_var3_apps=Count('var3_apps'),
                                  )

# in the template
{% for person in persons %}
               <tr>
                   <td><a href="{{ person.get_absolute_url }}">{{  person.last_name }}{% if person.name %}, {{ person.name }}{% endif %}</a></td>
                   <td>{{ person.num_var1_apps }}</td>
                   <td>{{ person.num_var2_apps }}</td>
                   <td>{{ person.num_var3_apps }}</td>
               </tr>
{% end for %} 
```

# asp.net - 如何将下拉列表的选定值传递给用户控件

> ID：10413849
> 
> 赞同：1
> 
> 时间：2012-05-02T12:34:14.680
> 
> 标签：asp.net, user-controls, drop-down-menu

如何将下拉列表的选定值传递给用户控件.aspx

```
<select id="DropDownList2">
     <option value="product1">Police Schemes1</option>
     <option value="product2">Police Schemes2</option> 
     <option value="product3">Police Schemes3</option> 
 </select> 
```

.ascx

```
 protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            //string selectedvalue = "";

            }

            } 
```

任何帮助或建议将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T12:35:52.160

添加属性 runat="server" 并像这样获取它。

在 html 中放置属性 runat="server"

```
 <select id="DropDownList2" runat="server">
     <option value="product1">Police Schemes1</option>
     <option value="product2">Police Schemes2</option> 
     <option value="product3">Police Schemes3</option> 
 </select> 
```

在后面的代码中放这个

```
string selectedvalue = DropDownList2.Value; 
```

# ruby - Rails 对使用 Regex 排序的散列中的值求和

> ID：10413852
> 
> 赞同：0
> 
> 时间：2012-05-02T12:34:23.277
> 
> 标签：ruby, regex, select, hash, inject

我在这里有一个涉及一些元素的查询，结果我的大脑正在爬出我的耳朵。我有一个用符号作为键和数字作为值填充的散列，该散列既用作方法的存储（通过 method_missing），也用作 SQL 查询的结果。它的外观示例：

```
@data = {:number_of_african_male_senior_managers => 0, :number_of_african_male_middle_managers => 2, :number_of_african_male_junior_managers => 3, :number_of_white_female_senior_managers => 5... ect} 
```

sql 查询运行并收集有多少男性非洲高级管理人员的计数并将其保存。现在我正在尝试创建一个总列，它将向我显示总共有多少高级管理人员，无论性别或种族如何。我在想这样的事情：

```
 def extract_position_totals(position)
   totals = @data.select {|k,v| k.to_s.match(/#{position}/)}

 end 
```

<-注意这是我卡住的地方这个方法还没有完成

现在我的问题来了，上面的代码将遍历键/值对并挑选出在参数中指定的那些，我打算注入，但是当键有不同的名称时，我如何对这些键的值求和？ ?

所以在一天结束时，我想这样称呼：@ee_demographics_presenter.extract_position_totals(senior) 并让它返回 =>5

任何帮助深表感谢。:D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T12:49:19.407

如果键具有不同的名称，则用于获取这些键的总和值：

```
not_match_count = 0
@data.map{|k, v| not_match_count+=v if !k.to_s.match(/#{position}/)} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T13:02:58.640

一个带注入的衬垫：

```
def extract_position_totals(position)
   @data.inject(0) { |memo, ary| ary[0] =~ /#{position}/ ? memo + ary[1] : memo }
end 
```

# javascript - 与未定义变量相关的错误

> ID：10413854
> 
> 赞同：1
> 
> 时间：2012-05-02T12:34:29.283
> 
> 标签：javascript

这段代码有什么问题？我得到：

TypeError: old is undefined
(10 out of range 3)

但老是在开头定义：`var older = people[0]`

```
function person(name, age) {
    this.name=name;
    this.age=age
}

function foo() {
    var older10 = function(people) {
        var older = people[0];

        for (var index = 1; index < 10; index++) {
            if (people[index].age > older.age) {
                older = people[index]; // error here
            }
        }
        return older;
    };

    var array = [];
    array[1] = new person("Paul", 23);
    array[2] = new person("Jim", 24);
    array[3] = new person("Sam", 84);
    array[4] = new person("Rob", 54);
    array[8] = new person("Karl", 19);
    array[9] = new person("", 0);

    var older = older10(array);

    if (older.name === "Sam") {
        console.log("ok");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T12:36:38.347

您从不定义`array[0]`（`people[0]`在`older10(array)`函数调用中称为），因此将 old 设置为未定义！

# windows-phone-7 - 需要时在 TextBlock 中添加新行

> ID：10413858
> 
> 赞同：3
> 
> 时间：2012-05-02T12:34:49.653
> 
> 标签：windows-phone-7, newline, textblock

我正在从 WebService 读取 JSON 并将我的数据放在文本块列表中（包含在网格中）。有时文本很长，我希望文本块在需要时自动添加新行（而不是无休止地向右移动）。

我在某处读过我应该将文本块包装在标签中（VS2010 无法识别？）..

我不能放 <\newline> 或 \n 或任何东西，因为我不知道何时何地。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T12:37:29.010

您可以将 TextWrapping 属性设置为 Wrap:-

[http://msdn.microsoft.com/en-us/library/system.windows.controls.textblock.textwrapping.aspx](http://msdn.microsoft.com/en-us/library/system.windows.controls.textblock.textwrapping.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T12:38:04.100

在您的 xaml 中添加这样的内容

```
 <TextBlock TextWrapping="Wrap"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-05T11:26:05.303

您可以从 Designer 或 XAML 将 Textblock 的 TextWrapping 属性设置为 Wrap ....

# c# - 使用 C# 在 CRM 4.0 中更新实体时提高性能

> ID：10413864
> 
> 赞同：0
> 
> 时间：2012-05-02T12:35:05.337
> 
> 标签：c#, performance, coding-style, batch-file, dynamics-crm-4

我有一个批量更新应用程序，它通过基于某些逻辑更新它的一些字段来更新特定实体的记录。我正在使用 TargetUpdate 进行记录更新，因为我有一个附加到我不想触发的实体更新的工作流（以防我使用正常更新）。但是更新这些记录需要很长时间。目前更新 1K 条记录大约需要 1.5 小时。在实际场景中，每天最多需要在 5-6 小时的时间跨度内更新大约 10K 条记录（夜间作业）。有什么办法可以提高性能。

```
Centity newentityobect;

newentityobect= new Centity()
{
    asp_field1 = new Key()
    {
        Value = new Guid(field1Value)
    },
    asp_field2 = field2Value,
    asp_field3 = field3Value,
    asp_field3 = field4Value
};

TargetUpdateCentity objx = new TargetUpdateCentity();
objx.Centity = newentityobect;
UpdateRequest updateCentity = new UpdateRequest();
updateCentity.Target = objx;
UpdateResponse updatedCentity = (UpdateResponse)crmUpdateObject.Execute(updateCentity); 
```

上面是我用来更新记录的一个小代码片段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T14:49:13.867

由于我的解释在评论中太长了，我将其作为答案发布。
我知道多线程涉及更多的思考/问题/风险，但您正在查看 1 个对您的喜好响应太慢的服务调用。
如果你想加快速度，有 4 种可能性：

*   一次执行多个服务调用（多线程）
*   编辑服务调用（我认为你不能，因为它是基本的 crm 服务）
*   使用不同的服务调用（我怀疑它是否存在，但如果有批量更新使用它会提高你的性能）
*   避免使用该服务并直接编辑数据库（我非常怀疑 crm 是否支持此功能，因此将其视为 hack，但直接更新数据库的速度可能会大大提高）。

假设没有批量更新的服务调用，并且您无法编辑服务，您可以使用多线程或直接访问数据库。
鉴于这两个选择，我肯定会选择多线程方法，这将是一种更安全的方法，然后将您的方式侵入数据库。

从 .NET 4.0 开始，您可以在这样的列表上轻松启用多线程：

```
Parallel.ForEach(entityList, entity => {
   //copy paste your looped code here
}); 
```

你可以编辑你的代码，看看最终结果是否太你喜欢，如果不是：欢迎来到 crm，上帝的速度！

# css - css 属性不适用于 IE6

> ID：10413866
> 
> 赞同：0
> 
> 时间：2012-05-02T12:35:09.870
> 
> 标签：css

我有这个 ：

```
background: -webkit-gradient(radial, center center, 0px, center center, 100%, color-stop(0%,rgba(255,255,255,0.56)), color-stop(100%,rgba(210,210,210,1))); 
```

它适用于所有浏览器和 IE9，但不适用于 IE6 有人能告诉我还有什么用吗

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T12:38:42.947

您需要使用 IE 的旧过滤器规则，您在问题中提到的规则有一个供应商前缀，仅针对 webkit（chrome、safari 等）浏览器。[-这里](http://www.colorzilla.com/gradient-editor/)有一个简洁的生成器，可以帮助您制作跨平台渐变。IE6-9 的规则如下所示：

```
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#1e5799', endColorstr='#7db9e8',GradientType=0 ); /* IE6-9 * 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T12:38:28.923

webkit 前缀仅适用于 Webkit 浏览器，即 Chrome、Safari、Android 和 iPhone。例如，您需要对 Firefox 使用 -moz，对 Opera 使用 -o。

IE6 根本没有任何渐变支持，所以你需要使用图像来代替，或者放弃对 IE6 的支持，这可能是一个不错的选择；没有多少用户仍在使用 IE6。（除非这专门用于例如政府，否则它们经常被卡住。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T12:54:27.037

Internet Explorer 渐变滤镜不支持色标、渐变角度和径向渐变。这意味着您只能使用 2 种颜色指定水平或垂直线性渐变：StartColorStr 和 EndColorStr。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T12:58:09.680

Internet Explorer 8 及更低版本并不是唯一不支持渐变的浏览器，因此使用过滤器不会捕获所有浏览器。

另一种方法是[使用 Modernizr](http://modernizr.com/)来检测支持并使用后备图像或纯色。

例如：

```
#box {
// Normal gradient syntax
}

.no-cssgradients #box {
// Fallback image
} 
```

# javascript - 我可以使用什么工具来创建带有倒轴的 HTML5 烛台图？

> ID：10413867
> 
> 赞同：7
> 
> 时间：2012-05-02T12:35:10.097
> 
> 标签：javascript, html, charts, data-visualization, visualization

Google 的图表 API 支持[烛台图表](https://google-developers.appspot.com/chart/interactive/docs/gallery/candlestickchart)，能够更改 X 轴上的值 - 即它们在这里是工作日，但可能是其他东西。

但是，据我所知，此图表 API 不允许您更改“灯芯”的线宽，并且不可能反转轴以使 0 在顶部（除非您切换到使用所有负值）。

Highcharts 具有更[全功能的烛台图表](https://www.highcharts.com/stock/demo/candlestick/gray)和反转 y 轴的能力，但据我所知，必须使用时间戳作为 x 轴的值。

我可以使用什么工具来创建一个带有倒置 Y 轴的 HTML5 烛台图表，并且能够在 X 轴上设置自定义标签，并且可能还可以选择调整“灯芯”厚度？

### 谷歌图表示例

[![](../Images/58ef314c0afaa7ac72db0b39acd2c2a7.png)](https://i.stack.imgur.com/n67EN.png)

### Highcharts 示例

[![图片1.png](../Images/ca85e36319356a601e7d28cc713e73be.png)](https://i.stack.imgur.com/zra2q.png)

### jqChart 示例

（这很混乱 - 来源在这里[http://jsfiddle.net/FSEQP/](http://jsfiddle.net/FSEQP/)）

```
<html>
<head>
</head>
<body>

<div id="jqChart" style="width: 800px; height: 550px;" />

</body>
</html> 
```

```
 function round(d) {
            return Math.round(100 * d) / 100;
        }

        var data = [];

        var date = new Date(2010, 0, 1);

        var high = Math.random() * 40;
        var close = high - Math.random();
        var low = close - Math.random();
        var open = (high - low) * Math.random() + low;

        data.push([date, round(high), round(low), round(open), round(close)]);

        for (var day = 2; day <= 12; day++) {

            date = new Date(2010, 0, day);

            high = open + Math.random();

            close = high - Math.random();
            low = close - Math.random();
            var oldOpen = open;
            open = (high - low) * Math.random() + low;

            if (low > oldOpen) {
                low = oldOpen;
            }

            data.push([date, round(high), round(low), round(open), round(close)]);
        }

        $(document).ready(function () {

            $('#jqChart').jqChart({
                title: { text: 'Candlestick Chart' },
                legend: { visible: false },

//                                labelsOptions : { visible: false },

                          axes: [

                                {
                                    type: 'linear',
                                    location: 'left',
                                    reversed: true
                                },
                                  {
                                      type: 'category',
                                      location: 'bottom',
                                                        categories: [
                                                        'Category 1', 'Category 2', 'Category 3',
                                                        'Category 4', 'Category 5', 'Category 6',
                                                        'Category 7', 'Category 8', 'Category 9',
                                                        'Category 10', 'Category 11', 'Category 12'
                                                        ],
                                      labels: {
                                                  font: '12px sans-serif',
                                                  angle: -90,

                                               }
                                  }
                               ],

                series: [
                            {
                                type: 'column',
                                data: data
                            }
                        ]
            });

        }); 
```

[![图片.png](../Images/aff2bceb8bd1f66bacd0b43d8cd9d098.png)](https://i.stack.imgur.com/NLSMp.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-06-07T21:23:49.863

正如@PirateApp 和@ivanxuu 在评论中指出的那样，`techan.js`不再维护，现在有[https://d3fc.io/](https://d3fc.io/)

此外，目前（2020 年 5 月）还有一些活跃的项目：

*   [https://plot.ly/javascript/candlestick-charts/](https://plot.ly/javascript/candlestick-charts/)使用`plotly.js`基于`d3.js`
*   [https://echarts.apache.org/examples/en/#chart-type-candlestick](https://echarts.apache.org/examples/en/#chart-type-candlestick)
*   [http://dygraphs.com/](http://dygraphs.com/)

* * *

原答案：

我`techan.js`根据 D3js 的作者推荐。它是免费的、开源的和交互式的。

[https://github.com/andredumas/techan.js](https://github.com/andredumas/techan.js)

[http://techanjs.org/](http://techanjs.org/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T15:50:03.473

我相信[jqChart](http://www.jqchart.com/)符合您的要求。

*   [烛台图样本](http://www.jqchart.com/samples/FinancialCharts/CandlestickChartWithVolume)；[文档](http://www.jqchart.com/documentation/userguide/default.aspx#!CandlestickCharts)
*   [倒置（反转）轴刻度](http://www.jqchart.com/SamplesAspNetMVC/ChartAxes/ReversedScale)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T13:42:56.373

试试 amCharts.com - 他们的系列图表可以接受 categoryAxis 的字符串，valueAxes 可以反转，线条粗细也可以调整。这是烛台图表的示例：http: [//amcharts.com/javascript/candlestick-chart/](http://amcharts.com/javascript/candlestick-chart/)

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-05-02T13:01:44.123

我建议 SVG 创建这样的图表。

# asp.net - 网格视图不显示

> ID：10413868
> 
> 赞同：1
> 
> 时间：2012-05-02T12:35:23.623
> 
> 标签：asp.net, html, vb.net

我页面上的 gridview 在每一列中都设置了模板字段，以便我可以输入信息并将其保存到我的数据库中。没有直接与 gridview 关联的数据，只是一次添加多行以保存数据的能力。我用空的文本框显示它，它工作正常，所有它都停止了，现在不会显示了。关于正在发生的事情的任何线索。代码如下...

```
<asp:GridView ID="gvOLIAdj" runat="server" AutoGenerateColumns="False" CssClass="td8"  CellPadding="4" ForeColor="#333333" PageSize="5" ViewStateMode="Enabled">
  <AlternatingRowStyle BackColor="White" ForeColor="#284775" />
    <Columns>
      <asp:TemplateField HeaderText="Approval Date ">
        <EditItemTemplate>
          <asp:Label ID="Label5" runat="server"></asp:Label>              
        </EditItemTemplate>
        <ItemTemplate>
          <asp:TextBox ID="txtAdjAppr" runat="server" CausesValidation="True"></asp:TextBox>
          <asp:MaskedEditExtender ID="txtAdjApprt_MaskedEditExtender" runat="server"   ClearMaskOnLostFocus="False" ClipboardEnabled="False" Mask="99/99/99" TargetControlID="txtAdjAppr" />
        </ItemTemplate>
        <ItemStyle HorizontalAlign="Center" VerticalAlign="Middle" Width="125px" />
      </asp:TemplateField> 
      <asp:TemplateField HeaderText="Total Amount">
        <EditItemTemplate>
          <asp:Label ID="Label2" runat="server"></asp:Label>                                                                            </EditItemTemplate>
        <ItemTemplate>
          <asp:TextBox ID="txtAdjAmt" runat="server" CausesValidation="True"></asp:TextBox>
        </ItemTemplate>
        <ItemStyle HorizontalAlign="Right" VerticalAlign="Middle" Width="225px" />
      </asp:TemplateField>
      <asp:TemplateField HeaderText="Comments">
        <EditItemTemplate>
          <asp:Label ID="Label3" runat="server"></asp:Label>
        </EditItemTemplate>
        <ItemTemplate>
          <asp:TextBox ID="txtCmmts" runat="server" Width="599" CausesValidation="True"></asp:TextBox>
        </ItemTemplate>
        <ItemStyle HorizontalAlign="Left" VerticalAlign="Middle" />
      </asp:TemplateField>
      <asp:TemplateField>
        <EditItemTemplate>
        <asp:Label ID="Label4" runat="server"></asp:Label>
        </EditItemTemplate>
        <ItemTemplate>
          <asp:Label ID="lblInitials" runat="server"></asp:Label>
        </ItemTemplate>
        <ItemStyle HorizontalAlign="Center" VerticalAlign="Middle" Width="35px" />
        </asp:TemplateField>
    </Columns>
  <EditRowStyle BackColor="#999999" />
  <FooterStyle BackColor="#003399" Font-Bold="True" ForeColor="White" />
  <HeaderStyle BackColor="#003399" Font-Bold="True" ForeColor="White" />
  <RowStyle BackColor="#F7F6F3" ForeColor="#333333" />
  <SelectedRowStyle BackColor="#E2DED6" Font-Bold="True" ForeColor="#333333" />
  <SortedAscendingCellStyle BackColor="#E9E7E2" />
  <SortedAscendingHeaderStyle BackColor="#506C8C" />
  <SortedDescendingCellStyle BackColor="#FFFDF8" />
  <SortedDescendingHeaderStyle BackColor="#6F8DAE" />
</asp:GridView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T12:43:25.930

**潜在原因：**

*   您没有设置为编辑模式，gvOLIAdj.EditIndex = 1;
*   CssClass="td8" 设置为 display:none/visibility:hidden
*   gvOLIAdj.Visible=False 正在设置
*   你升级了你的框架，见下文

[GridView 在以前的 .NET 版本中没有设置 EditIndex 属性](https://connect.microsoft.com/VisualStudio/feedback/details/554166/gridview-sets-editindex-property-when-in-previous-net-versions-it-didnt)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T12:50:31.967

Gridviews must be bound to a datasource of somesort, the view you see in the designer is only an estimation of what the gridview will look like.

# android - 如何向预装付费安卓应用的用户分发更新？

> ID：10413871
> 
> 赞同：7
> 
> 时间：2012-05-02T12:35:25.807
> 
> 标签：android, google-play

我写了一个小的 Android 应用程序。它作为两个不同的版本在 Google Play 上发布

*   功能有限的免费演示版
*   和没有限制的付费版本

现在，平板电脑的经销商联系了我，他想在他的设备上预装我的应用程序。显然，我希望他产品的所有者能够从我的应用程序的后续更新中受益。

有没有办法在设备上预安装付费应用程序*并*仍然允许免费更新应用程序？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-01T10:15:08.817

预装的应用程序必须是免费的。这逐字来自[Google Play 支持网站](https://support.google.com/googleplay/android-developer/answer/113476?hl=en)：

> **未发布的应用程序**
> 
> 即使您取消发布应用，现有应用用户仍将能够接收应用更新。如果您不希望新用户找到并下载您的应用，但仍想向现有用户提供更新，请在开发者控制台中将您的应用设置为未发布。
> 
> **更新系统应用**
> 
> 一旦具有相同软件包名称的应用程序上传到 Google Play 开发者控制台，用户的系统应用程序（包括任何预加载的应用程序）就会显示在 Google Play 商店中用户设备的“我的应用程序”部分中，即使应用程序未发布。
> 
> 如果满足以下条件，Google Play 可以管理对预加载应用程序的更新：
> 
> *   预加载的应用程序需要在系统分区中
> *   预加载的应用程序必须是免费的
> *   预加载的应用需要使用与 Google Play 中发布的应用相同的签名
> *   预加载和更新的应用程序包名称需要相同
> *   更新应用的版本代码需要大于预加载应用的版本代码

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T12:39:23.480

只要您使用相同的签名密钥和包名称，这应该会自动发生。

您可以通过执行以下操作对此进行测试和验证：

1.  安装您将提供给分销商的 .apk 文件（我们称之为 2.0）。
2.  现在将 2.1 上传到 Google Play（相同的签名密钥和包名称）
3.  当用户的自动更新检查运行时，或者当用户在 Google Play 中打开包时，将提供更新并且运行良好。

我见过的唯一不起作用的情况是交叉许可。例如，如果我通过 Amazon appstore 授权应用程序，我会在 Google Play 中看到更新，但尝试更新会给我一个“未付费”或“立即购买”错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T13:20:28.427

我正在寻找相同问题的解决方案，这似乎是不可能的。
但我想我有一个解决方法：

让您的应用免费，功能有限，并通过应用内购买提供高级功能（“专业版”）。

对于应用内购买版本，您可以使用第二种许可方法。我不确定 Google Play 条款是否允许，但从技术上讲，您可以支持这两种用户，并且仍然可以通过 Google Play 自动更新它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T22:26:50.960

在一个常见的 LVL 实施中，如果用户没有获得许可，应用程序应该挂在起始页并提示用户一个对话框，将他们指向购买 URL（可以通过 Google Play 客户端应用程序或网络浏览器打开）。

对于付费应用程序（通过 Google Play 集成和发布的 LVL），如果最终用户想要使用它并继续接收更新，他必须使用他的 Google 帐户通过 Google Play 客户端应用程序或 Google Play 网络版本购买它。

通过 Google Play 客户端应用程序获取付费应用程序的正常程序是：

1.  购买
2.  下载
3.  安装

> 有没有办法在设备上预安装付费应用程序并仍然允许免费更新应用程序？

您可以向他们发送 app-pro.apk 文件并让他们安装它而无需先购买它，但是，当首次打开应用程序时，如果许可证检查（需要在最终用户的设备上安装 Google Play 客户端应用程序）失败，则应该会弹出购买对话框并要求他们购买。一旦用户购买了它并再次打开应用程序并通过许可证检查，他就可以开始正常使用它（具有更新能力）。

答案是肯定的，你可以让用户预装付费应用，但是为了正常使用它并不断接收更新，用户无论如何都必须购买它。

# php - Freebase 上 MQL 中的多个查询

> ID：10413875
> 
> 赞同：2
> 
> 时间：2012-05-02T12:35:33.017
> 
> 标签：php, freebase, mql

我正在尝试从 Freebase 获取结果列表。我有一组 MID。有人可以解释我将如何构造查询并将其传递给 PHP 中的 API 吗？

我是 MQL 新手 - 我什至无法让示例工作：

```
$simplequery = array('id'=>'/topic/en/philip_k_dick', '/film/writer/film'=>array());
$jsonquerystr = json_encode($simplequery);
// The Freebase API requires a query envelope (which allows you to run multiple queries simultaneously) so we need to wrap our original, simplequery structure in two more arrays before we can pass it to the API:
$queryarray = array('q1'=>array('query'=>$simplequery));
$jsonquerystr = json_encode($queryarray);
// To send the JSON formatted MQL query to the Freebase API use cURL:
#run the query
$apiendpoint = "http://api.freebase.com/api/service/mqlread?queries";
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, "$apiendpoint=$jsonquerystr");
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$jsonresultstr = curl_exec($ch);
curl_close($ch);
// Decoding the JSON structure back into arrays is performed using json_decode as in:
$resultarray = json_decode($jsonresultstr, true); #true:give us the json struct as an array
// Iterating over the pieces of the resultarray containing films gives us the films Philip K. Dick wrote:
$filmarray = $resultarray["q1"]["result"]["/film/writer/film"];

foreach($filmarray as $film){
    print "$film<br>";
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T17:13:32.783

你做的一切都是对的。如果不是，您将在 JSON 结果中返回错误消息。

我认为发生的事情是关于菲利普·K·迪克的数据已经更新，将他认定为不是电影的“作家”，而是“电影故事的贡献者”。（毕竟，他并没有真正写过任何剧本。）

更改您的简单查询：

```
$simplequery = array('id'=>'/topic/en/philip_k_dick', '/film/writer/film'=>array()); 
```

至：

```
$simplequery = array('id'=>'/topic/en/philip_k_dick', '/film/film_story_contributor/film_story_credits'=>array()); 
```

实际上，您可以使用 Freebase 网站深入研究主题以挖掘这些信息，但这并不容易找到。在基本的 Philip K. Dick 页面 (http://www.freebase.com/view/en/philip_k_dick) 上，单击底部的“编辑并显示详细信息”按钮。

“编辑”页面 (http://www.freebase.com/edit/topic/en/philip_k_dick) 显示了与该主题相关的类型。该列表包括“电影故事贡献者”，但不包括“作家”。在此页面的电影故事贡献者区块中，有一个“详细视图”链接 (http://www.freebase.com/view/en/philip_k_dick/-/film/film_story_contributor/film_story_credits)。本质上，这就是您尝试使用 PHP 代码复制的内容。

对真正的电影作家（例如，史蒂夫马丁）进行类似的深入研究，将您带到一个名为 /film/writer/film 的属性（http://www.freebase.com/view/en/steve_martin/-/film/作家/电影）。

**多个查询**

您没有确切说明您要对一组 MID 执行什么操作，但触发多个查询就像在 $queryarray 中添加一个 q2、q3 等一样简单。答案将回到相同的结构中——您可以像提取 q1 数据一样提取它们。如果你打印出你的 jsonquerystr 和 jsonresultstr 你会看到发生了什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T06:36:45.557

进行了一些修改以包含问题的答案，因为这对我有所帮助，我对每个人都投了赞成票，只是想我会提供一个更“完整”的答案，因为它是：

```
$simplequery = array('id'=>'/topic/en/philip_k_dick', '/film/film_story_contributor/film_story_credits'=>array());
$jsonquerystr = json_encode($simplequery);
// The Freebase API requires a query envelope (which allows you to run multiple queries simultaneously) so we need to wrap our original, simplequery structure in two more arrays before we can pass it to the API:
$queryarray = array('q1'=>array('query'=>$simplequery));
$jsonquerystr = json_encode($queryarray);
// To send the JSON formatted MQL query to the Freebase API use cURL:
#run the query
$apiendpoint = "http://api.freebase.com/api/service/mqlread?queries";
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, "$apiendpoint=$jsonquerystr");
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$jsonresultstr = curl_exec($ch);
curl_close($ch);
// Decoding the JSON structure back into arrays is performed using json_decode as in:
$resultarray = json_decode($jsonresultstr, true); #true:give us the json struct as an associative array
// Iterating over the pieces of the resultarray containing films gives us the films Philip K. Dick wrote:

if($resultarray['code'] == '/api/status/ok'){
    $films = $resultarray['q1']['result']['/film/film_story_contributor/film_story_credits'];
    foreach ($films as $film){
        print "$film</br>";
    }
} 
```

# spring-mvc - Spring MVC中BindingResult接口有什么用？

> ID：10413886
> 
> 赞同：70
> 
> 时间：2012-05-02T12:36:09.493
> 
> 标签：spring-mvc

`BindingResult`将异常与视图或其他东西绑定有用吗？

的确切用途是`BindingResult`什么？

或者它在将模型属性与视图绑定时有用吗？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-05-03T08:08:16.727

具体示例：使用 BindingResult 对象作为控制器内[Validator的 validate 方法的参数。](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/validation/Validator.html)

然后，您可以检查此对象以查找验证错误：

```
validator.validate(modelObject, bindingResult);  
if (bindingResult.hasErrors()) {  
    // do something  
} 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2016-04-19T10:00:33.830

基本上`BindingResult`是一个接口，它指示存储验证结果的对象应如何存储和检索验证结果（错误，尝试绑定到不允许的字段等）

来自[带有注释的 Spring MVC 表单验证教程](https://web.archive.org/web/20161120115428/http://codetutr.com/2013/05/28/spring-mvc-form-validation/)：

> [ `BindingResult`] 是 Spring 的对象，它**保存验证和绑定的结果，并包含可能发生的错误。**必须紧跟在 `BindingResult`经过验证的模型对象之后，否则 Spring 将无法验证对象并抛出异常。
> 
> 当 Spring 看到`@Valid`时，它会尝试为正在验证的对象找到验证器。如果您启用了“注释驱动”，Spring 会自动获取验证注释。然后 Spring 调用验证器并将任何错误放入`BindingResult`BindingResult 并将其添加到视图模型中。

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2016-07-19T08:27:26.560

需要注意的是，参数的顺序实际上对spring很重要。BindingResult 需要紧跟在被验证的 Form 之后。同样，[可选] 模型参数需要在 BindingResult 之后。例子：

有效的：

```
@RequestMapping(value = "/entry/updateQuantity", method = RequestMethod.POST)
public String updateEntryQuantity(@Valid final UpdateQuantityForm form,
                                  final BindingResult bindingResult,
                                  @RequestParam("pk") final long pk,
                                  final Model model) {
} 
```

无效：

```
RequestMapping(value = "/entry/updateQuantity", method = RequestMethod.POST)
public String updateEntryQuantity(@Valid final UpdateQuantityForm form,
                                  @RequestParam("pk") final long pk,
                                  final BindingResult bindingResult,
                                  final Model model) {
} 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-05-02T12:41:38.847

来自官方[Spring 文档](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/validation/BindingResult.html)：

> **表示绑定结果**的通用接口。扩展**错误注册功能**的接口，允许 应用**验证器**，并添加**特定于绑定的分析和模型构建。**
> 
> 作为**DataBinder 的结果持有者**，通过 DataBinder.getBindingResult() 方法获得。BindingResult 实现也可以直接使用，例如在其上调用验证器（例如，作为单元测试的一部分）。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2018-08-16T05:38:31.173

好吧，它是一个顺序过程。Request 首先由 FrontController 处理，然后通过 @Controller 注解移向我们自己的自定义控制器。

但是我们的控制器方法是使用模型属性绑定 bean，并且我们还对 bean 值执行了一些验证。

因此，FrontController 没有将请求移动到我们的控制器类，而是将其移动到一个拦截器，该拦截器创建我们的 bean 的临时对象并验证值。如果验证成功，则将临时 obj 值与存储在 @ModelAttribute 中的实际 bean 绑定，否则如果验证失败，它不会绑定并将响应移动到错误页面或您想要的任何位置。

[![在此处输入图像描述](../Images/69cebe7fdfddd9d114990b029d7efeae.png)](https://i.stack.imgur.com/fdlxU.png)

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-07-26T12:55:53.640

BindingResult 用于验证..

例子：-

```
 public @ResponseBody String nutzer(@ModelAttribute(value="nutzer") Nutzer nutzer, BindingResult ergebnis){
        String ergebnisText;
        if(!ergebnis.hasErrors()){
            nutzerList.add(nutzer);
            ergebnisText = "Anzahl: " + nutzerList.size();
        }else{
            ergebnisText = "Error!!!!!!!!!!!";
        }
        return ergebnisText;
    } 
```

# c++ - 你将如何在 Clojure 中编写这个 C++ 循环？

> ID：10413887
> 
> 赞同：1
> 
> 时间：2012-05-02T12:36:09.830
> 
> 标签：c++, loops, clojure, functional-programming

虽然我之前用函数式语言进行过少量编程，但我才刚刚开始使用 Clojure。由于在学习一门新语言时执行相同类型的“Hello World”程序会变得陈旧，因此我决定阅读[Cinder](http://libcinder.org/) “Hello, Cinder”教程，并将其翻译成 Clojure 和[Quil](https://github.com/quil/quil)。在本教程的[第 5 章](http://libcinder.org/docs/v0.8.2/hello_cinder_chapter5.html)中，您会看到这个 C++ 片段来计算粒子列表的加速度：

```
void ParticleController::repulseParticles() {
    for( list<Particle>::iterator p1 = mParticles.begin(); p1 != mParticles.end(); ++p1 ) {
        list<Particle>::iterator p2 = p1;
        for( ++p2; p2 != mParticles.end(); ++p2 ) {
            Vec2f dir = p1->mLoc - p2->mLoc;
            float distSqrd = dir.lengthSquared();

            if( distSqrd > 0.0f ){
                dir.normalize();
                float F = 1.0f/distSqrd;

                p1->mAcc += dir * ( F / p1->mMass );
                p2->mAcc -= dir * ( F / p2->mMass );
            }
        }
    }
} 
```

在我看来，这段代码有一个非常重要的特点：它在粒子对之间进行比较并更新两个粒子，然后在未来跳过相同的组合。出于性能原因，这非常重要，因为这段代码每帧执行一次，并且在任何给定时间屏幕上都可能有数千个粒子（比我更了解 big O 的人可能会告诉你这种方法之间的区别并多次迭代每个组合）。

作为参考，我将展示我的想法。你应该注意到下面的代码一次只更新一个粒子，所以我做了很多“额外”的工作，比较相同的粒子两次。（注意：为简洁起见省略了一些方法，例如“规范化”）：

```
(defn calculate-acceleration [particle1 particle2]
  (let [x-distance-between (- (:x particle1) (:x particle2))
        y-distance-between (- (:y particle1) (:y particle2))
        distance-squared (+ (* x-distance-between x-distance-between) (* y-distance-between y-distance-between))
        normalized-direction (normalize x-distance-between y-distance-between)
        force (if (> distance-squared 0) (/ (/ 1.0 distance-squared) (:mass particle1)) 0)]
    {:x (+ (:x (:accel particle1)) (* (first normalized-direction) force)) :y (+ (:y (:accel particle1)) (* (second normalized-direction) force))}))

(defn update-acceleration [particle particles]
  (assoc particle :accel (reduce #(do {:x (+ (:x %) (:x %2)) :y (+ (:y %) (:y %2))}) {:x 0 :y 0} (for [p particles :when (not= particle p)] (calculate-acceleration particle p)))))

(def particles (map #(update-acceleration % particles) particles)) 
```

**更新**：所以这就是我最终想出的，以防有人感兴趣：

```
(defn get-new-accelerations [particles]
  (let [particle-combinations (combinations particles 2)
        new-accelerations (map #(calculate-acceleration (first %) (second %)) particle-combinations)
        new-accelerations-grouped (for [p particles]
                                    (filter #(not (nil? %)) 
                                            (map 
                                              #(cond (= (first %) p) %2
                                                     (= (second %) p) (vec-scale %2 -1))
                                              particle-combinations new-accelerations)))]
    (map #(reduce (fn [accum accel] (if (not (nil? accel)) (vec-add accel accum))) {:x 0 :y 0} %) 
         new-accelerations-grouped))) 
```

本质上，这个过程是这样的：

1.  粒子组合：使用组合“组合”函数计算粒子的所有组合
2.  new-accelerations：根据组合列表计算加速度列表
3.  new-accelerations-grouped：通过循环遍历每个粒子并检查组合列表，将每个粒子的加速度（按顺序）分组，构建一个列表列表，其中每个子列表是所有单独的加速度；还有一个微妙之处是，如果粒子是组合列表中的第一个条目，它会获得原始加速度，但如果是第二个，它会获得相反的加速度。然后过滤掉 nil
4.  将加速度的每个子列表减少到这些加速度的总和

现在的问题是，这比我以前做的更快吗？（我还没有测试过，但我最初的猜测是不可能的）。

**更新 2：** 这是我想出的另一个版本。我认为这个版本在各方面都比我上面发布的版本要好得多：它使用瞬态数据结构来提高新列表的性能/易于可变性，并使用循环/递归。它应该比我上面发布的示例快得多，但我还没有测试验证。

```
(defn transient-particle-accelerations [particles]
  (let [num-of-particles (count particles)]
    (loop [i 0 new-particles (transient particles)]
      (if (< i (- num-of-particles 1))
        (do 
          (loop [j (inc i)]
            (if (< j num-of-particles)
              (let [p1 (nth particles i)
                    p2 (nth particles j)
                    new-p1 (nth new-particles i)
                    new-p2 (nth new-particles j)
                    new-acceleration (calculate-acceleration p1 p2)]
                (assoc! new-particles i (assoc new-p1 :accel (vec-add (:accel new-p1) new-acceleration)))
                (assoc! new-particles j (assoc new-p2 :accel (vec-add (:accel new-p2) (vec-scale new-acceleration -1))))
                (recur (inc j)))))
          (recur (inc i) new-particles))
        (persistent! new-particles))))) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T13:07:59.070

当你想更新粒子时重新`def`设置粒子似乎不太正确——我猜想使用 ref 来存储世界的状态，然后在循环之间更新那个 ref 会更有意义。

归结为算法问题，对我来说，这是[clojure.math.combinatorics](https://github.com/clojure/math.combinatorics)的一个用例。类似于以下内容：

```
(require '[clojure.math.combinatorics :as combinatorics])

(defn update-particles [particles]
  (apply concat
    (for [[p1 p2] (combinatorics/combinations particles 2)
          :let [x-distance-between (- (:x p1) (:x p2))
                y-distance-between (- (:y p1) (:y p2))
                distance-squared (+ (* x-distance-between x-distance-between)
                                    (* y-distance-between y-distance-between))
                normalized-direction (normalize x-distance-between y-distance-between)
                p1-force (if (> distance-squared 0)
                             (/ (/ 1.0 distance-squared) (:mass p1))
                          0)]]
     [{:x (+ (:x (:accel p1)) (* (first normalized-direction) p1-force))
       :y (+ (:y (:accel p1)) (* (first normalized-direction) p1-force))}
      {:x (+ (:x (:accel p2)) (* (first normalized-direction) p2-force))
       :y (+ (:y (:accel p2)) (* (first normalized-direction) p2-force))}])) 
```

...您仍然需要减少，但这样我们将两个粒子的更新值拉出循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T13:17:20.253

所以，本质上，您想选择所有大小为 2 的子集，然后对每个这样的对进行操作？

这是一个组合库[http://richhickey.github.com/clojure-contrib/combinatorics-api.html](http://richhickey.github.com/clojure-contrib/combinatorics-api.html)

```
 combinations 
 function 
 Usage: (combinations items n) All the unique
 ways of taking n different elements from items 
```

使用它来生成您的列表，然后对其进行迭代。

# .htaccess - 如何从 modules.php?name=News&file=article&sid=XXX 重定向到 domain.eu/XXX？

> ID：10413890
> 
> 赞同：0
> 
> 时间：2012-05-02T12:36:21.113
> 
> 标签：.htaccess, drupal, redirect

我想将所有带有 phpnuke 字符串 modules.php?name=News&file=article&sid=XXX（xxx 是一个数字）的 url 请求重定向到我的 domain-name.eu/XXX 。这怎么可能？

我试过了

```
RewriteCond %{QUERY_STRING} ^(.*&|)modules.php?name=News&file=article&sid=(&.*|)$  
RewriteRule ^(.*)$ %1domain.eu/%2 [L,R=301] 
```

但它没有效果。错误在哪里？

我也不明白为什么简单

```
RewriteRule ^(.*)$ /modules.php?name=News&file=article&sid=$1 [L,R=301] 
```

确实有效。有任何想法吗？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T17:26:29.410

不知道为什么我会在 Drupal 问题中看到这一点。但是试试这个。

```
RewriteEngine On
RewriteCond %{REQUEST_URI}  ^/modules\.php$
RewriteCond %{QUERY_STRING} ^sid=([0-9]*)$
RewriteRule ^(.*)$ http://domain.eu/%1 [R=301,L] 
```

`sid=(.*)`在大多数情况下，您无法匹配 URL 中正则表达式部分之后的所有内容。`modules.php?name=News&file=article&sid=XXX`并且`modules.php?sid=XXX&name=News&file=article`在功能上是相同的。

在[http://www.simonecarletti.com/blog/2009/01/apache-query-string-redirects/学习](http://www.simonecarletti.com/blog/2009/01/apache-query-string-redirects/)

# jsrender - 将 jsRender 模板存储在单独的 js 文件中

> ID：10413894
> 
> 赞同：18
> 
> 时间：2012-05-02T12:36:24.953
> 
> 标签：jsrender

是否可以将 jsRender 模板存储在单独的文件中？

我想将它存储在一个单独的文件中，并在我的页面中引用它。

像这样的东西

```
<script id="templateName" type="text/x-jsrender" src="thisIsTheTemplate.js"></script> 
```

我会感谢任何意见或建议。

谢谢

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-14T08:26:08.883

是的，你可以做到这一点（我每次都用这个）。

假设您将模板放在一个`template`文件夹中并调用它，例如`_productDetails.tmpl.html`

在您的页面中，您使用 jQuery`$.get()`将其拉出并加载到模板中，例如：

```
var renderExternalTmpl = function(item) {

    var file = '../templates/_' + item.name + '.tmpl.html';
    $.when($.get(file))
     .done(function(tmplData) {
         $.templates({ tmpl: tmplData });
         $(item.selector).html($.render.tmpl(item.data));
     });    
} 
```

并且您传递一个对象，`item`女巫将包含所有 3 个属性，例如：

```
renderExternalTmpl({ name: 'productDetails', selector: '#items', data: {} }) 
```

你可以有一个很好的**实用程序**类来保存所有这些：

```
var my = my || {};
my.utils = (function() {
    var getPath = function(name) {
        return '../templates/_' + name + '.tmpl.html';
    },
    renderExtTemplate = function(item) {

        var file = getPath( item.name );
        $.when($.get(file))
         .done(function(tmplData) {
             $.templates({ tmpl: tmplData });
             $(item.selector).html($.render.tmpl(item.data));
         });    
    };

    return {
        getPath: getPath,
        renderExtTemplate: renderExtTemplate
    };
}); 
```

你可以很容易地打电话`my.utils.renderExtTemplate(item);`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-12T15:29:55.710

我最近自己遇到了这个问题。在查看了 jsRender 代码并研究了其他 javascript 库之后，我决定编写自己的库来简化加载外部模板的过程，这样就可以使用`<link>`标签将模板附加到 html 页面，并通过简单地包含 .js 文件来呈现它们。如果您想查看它，我已在 github 上发布了代码并附有示例：

[https://github.com/stevenmhunt/tmpl.loader](https://github.com/stevenmhunt/tmpl.loader)

该库与 jsRender 以及任何能够处理模板的代码一起使用。

享受！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-06-02T12:07:39.533

这是我编写的一个函数，用于一次加载一个或多个外部模板。它还缓存模板，因此如果已经加载了模板，它将不会再次加载。

```
function loadTemplates() {
    var toLoad = [],
        loadAll = $.Deferred();

    $.each(arguments, function(i, templateName) {
        var filepath = '/path/to/templates/' + templateName + '.html',
            loadTemplate = $.Deferred();

        toLoad.push(loadTemplate);

        if ($.templates[templateName]) {
            loadTemplate.resolve();
        } else {
            $.get(filepath , function(html) {
                var newTemplate = {};
                newTemplate[templateName] = html;
                $.templates(newTemplate);
            }).fail(function() {
                throw 'Could not load template at '+filepath;
            }).done(function() {
                loadTemplate.resolve();
            });
        }
    })

    $.when.apply($, toLoad).done(function() {
        loadAll.resolve();
    });

    return loadAll;
} 
```

像这样使用它：

```
loadTemplates('modal','itemDetail', 'itemsList').done(function() {
    // do stuff when all templates are loaded
    $('#viewItemDetail').on('click',function() {
        $.render.itemDetail({
            id:'123',
            name:'Cool Thing',
            description:'This thing is really cool.'
        });
    });
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-29T23:04:24.877

如果您尝试从本地文件加载外部模板，就像我一样，让我为您省去一些挫败感。不要按照**balexandre**的回答`$.get()`中的建议使用 jQuery。

 **使用`$.ajax()`, 并设置`async: true`and `dataType: text`，否则会报错：`elem.getAttribute is not a function`. 有关详细信息，请参阅我对[通过 AJAX 加载 jsrender 模板时的错误](https://stackoverflow.com/questions/12539832/error-when-loading-jsrender-templates-through-ajax/13636307#13636307)的回答。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-16T02:43:29.403

以我的经验，你不需要处理这个麻烦，你只需要在使用之前将模板附加到页面上。见下面的代码。

```
<div id="all_template"></div>
<script>
var file = '/tmpl/all.tmpl.html';
$.ajax({
    url: file,
    async: false,
    type : "GET",
    dataType: 'text',
    cache: true,
    success: function(contents) 
    {
    $("#all_template").append(contents);//append all your template to the div
    }
});
</script>
<script>
var data = {};
$('#js-template').render(data);//use it as the same old way
</script> 
```

这样就不需要每次渲染js模板时都请求ajax文件了**

# netbeans - netbeans：用于代码的英文键盘，但用于注释的其他语言键盘

> ID：10413905
> 
> 赞同：1
> 
> 时间：2012-05-02T12:36:53.607
> 
> 标签：netbeans, keyboard, comments

是否可以设置 NetBeans 在我写评论时自动切换到其他语言键盘？

例如：现在我每次写评论时都必须切换，因为我用英文键盘写代码，而用捷克键盘写评论。

# vim - 如何在vim中每隔几行添加一行

> ID：10413906
> 
> 赞同：24
> 
> 时间：2012-05-02T12:36:55.290
> 
> 标签：vim

我想使用 vim 编辑器在文件（大约 1000 行）的每 3 行之后添加一行。有人可以帮我吗？

谢谢，艾丽莎

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-05-02T12:46:01.163

有一个特定于 vim 的正则表达式可以做到这一点

```
 :%s/.*\n.*\n.*\n/\0\r/g 
```

*   %s 是 vim ex 命令替换整个文件
*   .*\n 是包含行尾的行
*   \0 是整个匹配的表达式
*   \r vim 表示添加新行的方式（不是 \n 预期的那样）

编辑：如果您想要换行以外的任何其他内容，只需将文本放在 \r 前面（正确的正则表达式转义，如果它包含一些正则表达式字符）

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-05-02T13:28:28.180

您可以使用[宏](http://vim.wikia.com/wiki/Macros)。完整的过程如下所示：

```
qq     " start recording to register q (you could use any register from a to z)
o      " insert an empty line below cursor
<Esc>  " switch to normal mode
jjj    " move the cursor 3 lines downward
q      " stop recording 
```

然后只需移动到起始行并键入`1000@q`以执行您的宏 1000 次。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-10T22:23:48.100

```
" insert a blank line every 3 lines

:%s/\v(.*\n){3}/&\r          

: .............. command
% .............. whole file
s .............. replace
/ .............. start pattern that we will replace
\v ............. very magic mode, see :h very-magic
(.*\n) ......... everything including the line break
{3} ............ quantifier 
/ .............. start new pattern to replace
& .............. corresponds to the pattern sought in (.*\n)
\r ............. add line break 
```

来源：[http ://www.rayninfo.co.uk/vimtips.html](http://www.rayninfo.co.uk/vimtips.html)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-05-02T13:26:08.370

我会这样做：

```
:%s/^/\=(line(".")%4==0?"\n":"")/g 
```

如果您的要求更改为“**每 700 行**s 添加一个新的空白行”，则此方法有效 :) 您只需更改“4”

PS如果我需要这样做，我不会在vim中这样做。sed、awk 可以更简单。

# javascript - 如何在我的页面操作弹出窗口中获取当前打开的选项卡的 URL？

> ID：10413911
> 
> 赞同：19
> 
> 时间：2012-05-02T12:37:18.003
> 
> 标签：javascript, google-chrome, google-chrome-extension

我想创建一个扩展来自动登录到我的服务器。所以我创建了一个背景页面来检查当前的 URL，如果它符合我的 URL 正则表达式，我将显示页面操作图标。单击页面操作时，我将打开一个包含一些字段的弹出窗口。我需要获取当前打开的 URL 并将其填充到弹出窗口中的一个字段中（例如，当我们单击标准书签页面操作时，URL 会自动填充到打开的弹出窗口中）。我怎样才能在 chrome 扩展中做这样的事情？我尝试将消息从后台页面传递到弹出 html，但它不起作用。可以发送这样的消息吗？我还尝试为弹出的 html 文件设置 onload，但我注意到它没有触发。请建议一种合适的方法来处理这种情况。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-05-02T15:54:15.807

[`chrome.tabs.query`](https://developer.chrome.com/extensions/tabs.html#method-query)与以下参数一起使用：

*   查询信息对象：
    *   `active: true`- 获取活动标签
    *   `lastFocusedWindow: true`- 选择活动窗口
*   回调函数：
    此函数接收一个参数：一组匹配的选项卡。由于只能激活一个窗口，并且该窗口中只有一个选项卡，因此该数组只有一个元素。这个元素是一个带有[`Tab`签名](https://developer.chrome.com/extensions/tabs.html#type-Tab)的对象。

代码片段：

```
// Do NOT forget that the method is ASYNCHRONOUS
chrome.tabs.query({
    active: true,               // Select active tabs
    lastFocusedWindow: true     // In the current window
}, function(array_of_Tabs) {
    // Since there can only be one active tab in one active window, 
    //  the array has only one element
    var tab = array_of_Tabs[0];
    // Example:
    var url = tab.url;
    // ... do something with url variable
}); 
```

该`activeTab`权限足以使其正常工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-06-14T01:39:42.490

您还可以使用 Promise 以更简洁的方式检索选项卡：

```
 getCurrentTab().then(function(tab){
    // Do something w/tab
  });

  function getCurrentTab(){
    return new Promise(function(resolve, reject){
      chrome.tabs.query({
        active: true,               // Select active tabs
        lastFocusedWindow: true     // In the current window
      }, function(tabs) {
        resolve(tabs[0]);
      });
    });
  } 
```

# asp.net-mvc - asp.net MVC - 无法理解为什么路由不起作用

> ID：10413914
> 
> 赞同：0
> 
> 时间：2012-05-02T12:37:21.517
> 
> 标签：asp.net-mvc, asp.net-mvc-routing, asp.net-web-api

在我的 ASP.NET Web API 项目中，我定义了以下路由`Global.asax`：

```
routes.MapHttpRoute(
                name: "DefaultApi",
                routeTemplate: "{controller}/{action}"
            );

            routes.MapRoute(
                name: "Default",
                url: "{controller}/{action}/{id}"
            ); 
```

我有一个`UserFeedController`带有以下签名的操作调用的控制器：

```
public UserFeedResponseViewModel GetUserFeed(int id) 
```

当我输入 url 时，`http://api.mydomain.com/UserFeed/GetUserFeed/4`我得到一个 404。为什么第二个路由规则不适用？

MVC 路由完全超出了我的理解能力。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T12:43:30.543

你的两条路线基本相同。MVC 找到匹配的第一个路由，并且由于您已经指定了控制器和操作，它认为您可以开始了。它将忽略您指定的 id（我相信它可能会尝试将其作为参数传递）。

我建议将您的第一条路线更改为在开头包含 API/ ，如下所示：

```
routes.MapHttpRoute( 
            name: "DefaultApi", 
            routeTemplate: "API/{controller}/{action}" 
        ); 

        routes.MapHttpRoute( 
            name: "Default", 
            url: "{controller}/{action}/{id}" 
        ); 
```

这将确保您的路线正常工作。

# git - 将我在提交中更改的行中的空格转换为制表符

> ID：10413922
> 
> 赞同：7
> 
> 时间：2012-05-02T12:37:41.090
> 
> 标签：git, indentation

我对 git repo 做了相当大的提交（60 个文件更改，1635 个插入（+），3 个删除（-）），现在我意识到我使用空格进行缩进，而其余代码使用制表符。

因此，我想替换制表符的空格，但仅在该提交更改的行中，因为我不想修改可能使用空格的其他代码。

我怎样才能做到这一点？我不在乎它是否会修改工作目录或原始提交，两者都可以。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T13:14:16.153

你可以试试我写的一个小脚本（washamend）。首先提交，然后运行此脚本进行清理。它使用修正来做到这一点。

```
#!/bin/bash -e
#
# Rewrite the last commit to remove any trailing whitespace
# in the new version of changed lines.
# Then replace space-based indentation with TAB based indentation
# based on TABS at every eight position
#
[[ -z $TRACE ]] || set -x
trap "rm -f $tmpf" 0
tmpf1=$TMP/$$.1.diff
tmpf2=$TMP/$$.2.diff
git show --binary >$tmpf1
perl -p -e 's/^(\+.*?)[ \t]+$/$1/; while(m/^(\+\t*)( {1,7}\t| {8})(.*)/) { $_=$1."\t".$3."\n"; }' <$tmpf1 >$tmpf2
if ! cmp -s $tmpf1 $tmpf2
then
    git apply --binary --index -R --whitespace=nowarn $tmpf1
    git apply --binary --index $tmpf2
    GIT_EDITOR=true git commit --amend
else
    echo "No changes"
fi 
```

# join - Yii - 将表连接成 1 个大表并直接访问所有列

> ID：10413923
> 
> 赞同：1
> 
> 时间：2012-05-02T12:37:45.880
> 
> 标签：join, yii

我在将表连接到一个巨大的表时遇到问题，以便在没有嵌套 FOR 或在其中使用关系的情况下访问所有列。情况是这样的：

```
cars
========
id_producer (PK)
id_model (PK)
length
weight
...

texts
============
id_model (PK)
language (PK)
text
... 
```

表共享 1 个键：id_model

我想像这样加入这些表：

```
SELECT *
FROM cars c
JOIN texts t ON c.id_model = t.id_model
WHERE t.language = 'english' 
```

..它将为每辆车返回 1 行。

SQL 很简单，Yii 不是 :(

我尝试使用范围或关系来做到这一点，但从未得到想要的输出。我想写以下内容：

```
$carsWithTexts = Cars::model()-> ... something ... ->findAll()

foreach ($carsWithTexts as $c)
{
    echo $c->id_producer;
    echo $c->id_model;
    echo $c->id_text;
} 
```

.. 没有嵌套的 FOR，FOR 中没有关系或范围。

这可能吗？还是我必须始终使用以下构造：

```
$carsWithTexts = Cars::model()-> ... relation ... ->findAll()

foreach ($carsWithTexts as $c)
{
    echo $c->id_producer;
    echo $c->id_model;
    echo $c->relation[0]["id_text"]; // or nested for
} 
```

我知道我可以使用“with”和“together”命令，我做到了，但它没有按我的意愿工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T14:28:15.570

Yii 并不难，你只需要阅读文档并应用他们的示例，你想做的可以这样完成：

我假设您已经使用 Gii 生成了代码，因此关系名称（您可以在 Car 类中查看）将为**texts**。现在您有两种方法可以做到这一点，最简单的方法：

```
Cars::model()->with('texts')->findAll("texts.language = 'english'"); 
```

这将返回所有带有文本信息的汽车，其中文本为英语。我建议您阅读官方指南中的[Relational Active Record](http://www.yiiframework.com/doc/guide/1.1/en/database.arr#relational-query-options)以了解更多信息。

另一种方法是使用 CDbCommand 执行如下 SQL 命令：

```
$connection=Yii::app()->db;   // assuming you have configured a "db" connection
$command=$connection->createCommand();
$command->from('cars');
$command->join('texts', 't.id_model = texts.id_model');
$command->where('texts.language=:language', array(':id'=>'english'));
$rows=$command->queryAll(); 
```

这种方式对 SQL 更友好，但正如您所见，还有更多的 PHP 行。

# java - 如何使用休眠在我的析取中添加别名？

> ID：10413925
> 
> 赞同：1
> 
> 时间：2012-05-02T12:37:52.167
> 
> 标签：java, hibernate

我正在使用休眠编写一个条件查询。我有一个 DTO 对象，我必须使用它的字段生成一个查询。当我创建这样的析取时，一切似乎都很好：

```
Criteria c = s.createCriteria(Item.class);
        c.add(Restrictions.disjunction()
                .add(Restrictions.like("buyer", dto.getUser()))
                .add(Restrictions.like("rndEngineer", dto.getUser()))
                .add(Restrictions.like("logistics", dto.getUser()))
                .add(Restrictions.like("qaEngineer", dto.getUser()))
        ); 
```

但是，如果我在查询中添加别名以便能够执行此操作：

```
Criteria c = s.createCriteria(Item.class);
        c.createAlias("wiEngineer", "we");
        c.add(Restrictions.disjunction()
                .add(Restrictions.like("buyer", dto.getUser()))
                .add(Restrictions.like("rndEngineer", dto.getUser()))
                .add(Restrictions.like("logistics", dto.getUser()))
                .add(Restrictions.like("qaEngineer", dto.getUser()))
                .add(Restrictions.like("we.sid", dto.getUser()))
        ); 
```

where 子句很好，但我的结果集缺少一些元素。我认为 Hibernate inner 在我的项目上加入了我们。我可以让 Hibernate 以某种方式加入我的别名吗？我用谷歌搜索但无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T12:42:53.217

[Javadoc](http://docs.jboss.org/hibernate/core/3.6/javadocs/org/hibernate/Criteria.html#createAlias%28java.lang.String,%20java.lang.String,%20int%29)来救援：

> 条件 createAlias(String associationPath, String alias, int joinType) 抛出 HibernateException
> 
> 使用指定的连接类型加入关联，为加入的关联分配别名。
> 
> joinType 应该是 CriteriaSpecification.INNER_JOIN（默认）、CriteriaSpecification.FULL_JOIN 或 CriteriaSpecification.LEFT_JOIN 之一。

既然有 javadoc 和 Hibernate 参考文档可用，为什么还要使用 Google？

# list - 使用 fold_left 在 OCaml 中搜索元素

> ID：10413930
> 
> 赞同：4
> 
> 时间：2012-05-02T12:38:04.877
> 
> 标签：list, ocaml

我想知道如何在 Ocaml 中构建一个函数，用于`List.fold_left`找出列表中是否存在元素。例子：

```
exists 3 [1;2;3;4;5] 
=> true 
```

这个函数的类型是：`a -> bool -> 'a list -> bool`

我的想法如下：

```
let exists k l = List.fold_left( fun a x-> a=x) k l 
```

但显然是错误的。有什么建议怎么做吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T13:14:37.470

```
let exists k l =
    List.fold_left (fun b x -> b || x = k) false l 
```

对@tonio 的回答有两条评论：

*   使用`||`而不是多余的`if ... then true else ...`。
*   使用结构相等 ( `=`) 而不是引用相等 ( `==`) 来比较值。

此外，`exists`在[List 模块](http://caml.inria.fr/pub/docs/manual-ocaml/libref/List.html)中可用。内置函数更有效，因为它不必每次都遍历整个列表。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-02T12:49:02.263

你应该使用类似的东西

```
let exists k l =
    List.fold_left(
      fun a x -> if x == k then true else a)
      false l
;; 
```

你有一个初始值`false`，并在遍历列表时传递它。找到搜索的元素后，将值设置为`true`，然后将其传递。如果列表中的元素不是您搜索的元素，请将您的值作为输入传递：它是初始值`false`，或者`true`您搜索的元素已经找到。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-08T00:37:48.960

在得到答案的提示之后，我可以进一步改进它。

这是我的解决方案

```
let exists' f l =List.fold_left(fun a b->  f b || a  ) false l;; 
```

像这样，这个函数更加抽象，可以用于任何谓词 f。

# javascript - 将焦点绑定到单选按钮

> ID：10413931
> 
> 赞同：2
> 
> 时间：2012-05-02T12:38:05.410
> 
> 标签：javascript, jquery

我正在使用 chrome 12，我的代码如下。

HTML：

```
<input type="radio" class="tooltip" title="test1" name="group" value="1"> 1<br>        
<input type="radio" class="tooltip" title="test2" name="group" value="2"> 2<br>
<input type="radio" class="tooltip" title="test3" name="group" value="3" checked> 3<br>
<input type="text" class="tooltip" value="4" title="test4"><br>
<div class="result"> THIS SHOULD UPDATE WHEN YOU FOCUS ON ONE OF THE INPUTS </div> 
```

​ JavaScript：

```
$('.tooltip').bind('focus', function(ev) {
 $('.result').html( this.value );
}); 
```

（[小提琴](http://jsfiddle.net/b9erh/3/)）

是否可以将焦点事件绑定到单选按钮？你能提供一个替代方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T12:42:57.173

如果您通过键盘设置焦点，则仅当您单击按钮时它才不起作用，您的原始代码在所有浏览器中都有效。

看起来只有 IE 会在点击按钮时触发*焦点事件，Chrome 只会触发**点击*事件。请注意，如果您单击一个然后按下`TAB`它确实可以工作，即使在 Chrome 中也是如此。

也许是一个错误，也许是设计使然，无论如何只需处理两者：

```
$(document).ready(function() {
    var _currentExecuting = false;
    $(".tooltip").bind("focus click", function() {
        if (!_currentExecuting) { 
            var oResult = $(".result");
            oResult.html(oResult.html() + "yoy oi " + this.value + "<br />"); 
            _currentExecuting = true;
            window.setTimeout(function() {
                _currentExecuting = false;
            }, 100);
        }
    });
}); 
```

由于 IE 浏览器在单击时会触发焦点和单击事件，因此我必须设置全局标志，然后在执行任何代码之前检查此标志，并在一段时间后自动清除它。

[更新了小提琴](http://jsfiddle.net/b9erh/4/)。

# java - 如何过滤掉由创建的树中的特定条目 .getNodeDelegate()

> ID：10413932
> 
> 赞同：1
> 
> 时间：2012-05-02T12:38:05.993
> 
> 标签：java, netbeans, rcp, netbeans-platform

我有一个

```
class PovrayLogicalView implements LogicalViewProvider { 
```

`...`

```
 @Override
    public Node createLogicalView() {
        FileObject scenes = ...get folder object from a project instance...
        DataFolder scenesDataObject = DataFolder.findFolder(scenes);
        Node scenesFolderNode = scenesDataObject.getNodeDelegate();
        return scenesFolderNode;
    } 
```

`...`

```
} 
```

有了它，我在`scenes`我的 RCP 应用程序的项目树查看器中获得了目录及其所有子项。唯一不满意的地方是——它显示了根目录下的*所有*子目录和文件`scenes`——甚至是隐藏的。

我试图明确删除孩子，通过

```
scenesFolderNode.getChildren().remove(scenesFolderNode.getChildren().getNodes()); 
```

但是 .remove() 方法总是返回 false，这意味着它不能删除任何子节点。为什么？我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T04:19:09.373

为此，您使用[FilterNode](http://wiki.netbeans.org/DevFaqNodesDecorating)。

# groovy - 使用 Groovy 创建 Jenkins 环境变量

> ID：10413936
> 
> 赞同：39
> 
> 时间：2012-05-02T12:38:09.937
> 
> 标签：groovy, jenkins

我的项目有一个版本号（用“.”或“_”分隔）。我尝试编写一个 Groovy 脚本，该脚本仅使用这些数字中的前两个来创建 Jenkins 环境变量：

```
//Get the version parameter
def env = System.getenv()
def version = env['currentversion']
def m = version =~/\d{1,2}/
env = ['miniVersion':m[0].m[1]] 
```

我这样做正确吗？我什至可以创建一个新的环境变量吗？有没有更好的解决方案？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-10-04T06:31:29.543

# 詹金斯 1.x

下面的 groovy 片段应该传递版本（正如您已经提供的那样），并将其作为“miniVersion”存储在作业的变量中。

```
import hudson.model.*

def env = System.getenv()
def version = env['currentversion']
def m = version =~/\d{1,2}/
def minVerVal = m[0]+"."+m[1]

def pa = new ParametersAction([
  new StringParameterValue("miniVersion", minVerVal)
])

// add variable to current job
Thread.currentThread().executable.addAction(pa) 
```

然后可以从其他构建步骤访问该变量。例如

```
echo miniVersion=%miniVersion% 
```

输出：

```
miniVersion=12.34 
```

我相信您需要使用“系统 Groovy 脚本”（仅在主节点上）而不是“Groovy 插件” - [https://wiki.jenkins-ci.org/display/JENKINS/Groovy+plugin# Groovyplugin-GroovyScriptvsSystemGroovyScript](https://wiki.jenkins-ci.org/display/JENKINS/Groovy+plugin#Groovyplugin-GroovyScriptvsSystemGroovyScript)

# 詹金斯 2.x

我相信以前的（**Jenkins 1.x**）行为由于[这个安全公告](https://wiki.jenkins-ci.org/display/SECURITY/Jenkins+Security+Advisory+2016-05-11)而停止工作......

### 解决方案（从安全咨询中转述）

`hudson.model.ParametersAction.keepUndefinedParameters`可以通过将系统属性设置为来恢复以前的行为`true`。**这可能非常不安全**，并且仅用作短期解决方法。

```
java -Dhudson.model.ParametersAction.keepUndefinedParameters=true -jar jenkins.war 
```

要允许将特定的已知安全参数名称传递给构建，请将系统属性设置`hudson.model.ParametersAction.safeParameters`为以逗号分隔的安全参数名称列表。

**例如**

```
java -Dhudson.model.ParametersAction.safeParameters=miniVersion,FOO,BAR -jar jenkins.war 
```

在 groovy 中这两行应该这样写：

```
System.setProperty("hudson.model.ParametersAction.keepUndefinedParameters","true");
System.setProperty("hudson.model.ParametersAction.safeParameters","miniVersion,FOO,BAR"); 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2014-02-21T13:59:42.287

您还可以在 Groovy 系统脚本中定义一个没有 EnvInject 插件的变量：

```
import hudson.model.*
def build = Thread.currentThread().executable
def pa = new ParametersAction([
  new StringParameterValue("FOO", "BAR")
])
build.addAction(pa) 
```

然后您可以在下一个构建步骤（例如）是一个 Windows 批处理命令中访问此变量：

```
@echo off
Setlocal EnableDelayedExpansion
echo FOO=!FOO! 
```

此回声将显示“FOO=BAR”。

问候

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2018-01-22T09:01:45.900

对我来说，以下内容也适用于 Jenkins 2 (2.73.3)

代替

```
def pa = new ParametersAction([new StringParameterValue("FOO", foo)])
build.addAction(pa) 
```

和

```
def pa = new ParametersAction([new StringParameterValue("FOO", foo)], ["FOO"])
build.addAction(pa) 
```

ParametersAction 似乎有第二个构造函数，它允许传入“additionalSafeParameters” [https://github.com/jenkinsci/jenkins/blob/master/core/src/main/java/hudson/model/ParametersAction.java](https://github.com/jenkinsci/jenkins/blob/master/core/src/main/java/hudson/model/ParametersAction.java)

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2014-09-11T20:37:35.657

正如其他答案状态设置新`ParametersAction`是注入一个或多个环境变量的方式，*但是*当作业已经参数化时，添加新操作将不会生效。相反，您会看到指向同一组参数的构建参数的两个链接，而您要添加的参数将是`null`.

这是在两种情况下更新参数列表的片段（参数化和非参数化作业）：

```
import hudson.model.*

def build = Thread.currentThread().executable

def env = System.getenv()
def version = env['currentversion']
def m = version =~/\d{1,2}/
def minVerVal = m[0]+"."+m[1]

def newParams = null

def pl = new ArrayList<StringParameterValue>()
pl.add(new StringParameterValue('miniVersion', miniVerVal))

def oldParams = build.getAction(ParametersAction.class)

if(oldParams != null) {
  newParams = oldParams.createUpdated(pl)
  build.actions.remove(oldParams)
} else {
  newParams = new ParametersAction(pl)
}

build.addAction(newParams) 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2012-05-02T14:00:35.007

Jenkins [EnvInject 插件](https://wiki.jenkins-ci.org/display/JENKINS/EnvInject+Plugin)也许可以帮助你。它允许将环境变量注入构建环境。

我知道它有一些编写脚本的能力，所以它可能能够做你想做的事。我只用它来设置简单的属性（例如“LOG_PATH=${WORKSPACE}\logs”）。

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2016-04-07T13:18:38.953

经过一番搜索，我认为最好的解决方案是使用 hudson.model.EnvironmentContributingAction。

```
import hudson.model.EnvironmentContributingAction
import hudson.model.AbstractBuild 
import hudson.EnvVars

class BuildVariableInjector {

    def build
    def out

    def BuildVariableInjector(build, out) {
        this.build = build
        this.out = out
    }

    def addBuildEnvironmentVariable(key, value) {
        def action = new VariableInjectionAction(key, value)
        build.addAction(action)
        //Must call this for action to be added
        build.getEnvironment()
    }

    class VariableInjectionAction implements EnvironmentContributingAction {

        private String key
        private String value

        public VariableInjectionAction(String key, String value) {
            this.key = key
            this.value = value
        }

        public void buildEnvVars(AbstractBuild build, EnvVars envVars) {

            if (envVars != null && key != null && value != null) {
                envVars.put(key, value);
            }
        }

        public String getDisplayName() {
            return "VariableInjectionAction";
        }

        public String getIconFileName() {
            return null;
        }

        public String getUrlName() {
            return null;
        }
    }    
} 
```

我在作业中的系统 groovy 脚本（使用 groovy 插件）中使用这个类。

```
import hudson.model.*
import java.io.File;
import jenkins.model.Jenkins;    

def jenkinsRootDir = build.getEnvVars()["JENKINS_HOME"];
def parent = getClass().getClassLoader()
def loader = new GroovyClassLoader(parent)

def buildVariableInjector = loader.parseClass(new File(jenkinsRootDir + "/userContent/GroovyScripts/BuildVariableInjector.groovy")).newInstance(build, getBinding().out)

def projectBranchDependencies = [] 
//Some logic to set projectBranchDependencies variable

buildVariableInjector.addBuildEnvironmentVariable("projectBranchDependencies", projectBranchDependencies.join(",")); 
```

然后，您可以在构建中的任何其他点访问 projectBranchDependencies 变量，在我的例子中，从 ANT 脚本。

注意：我从博客文章中借用/修改了此实现部分的想法，但在发布本文时，我无法找到原始来源以便给予应有的信任。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2015-09-09T16:48:14.533

只是有同样的问题。希望根据一些 groovy 脚本的结果动态触发参数化的下游作业。

不幸的是，在我们的 Jenkins 上，无法运行 System Groovy 脚本。因此我不得不做一个小解决方法：

1.  运行 groovy 脚本，该脚本创建一个属性文件，其中指定了要设置的环境变量

    ```
    def props = new File("properties.text")
    if (props.text == 'foo=bar') {
        props.text = 'foo=baz'
    } else {
        props.text = 'foo=bar'
    } 
    ```

2.  使用 env injection 插件将写入此脚本的变量注入

    ```
    Inject environment variable
    Property file path: properties.text 
    ```

之后，我可以使用变量 'foo' 作为参数化触发器插件的参数。某种解决方法。但是有效！

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-08-04T17:31:03.000

我的环境是之前的工具，例如 Jenkins，并且正在运行批处理文件（我知道，我老了）。所以那些批处理文件（及其子批处理文件）正在使用环境变量。这是我的一个注入环境变量的 groovy 脚本。使用的名称和参数是虚拟的。

```
// The process/batch which uses environment variables
def buildLabel = "SomeVersionNr"
def script = "startBuild.bat"
def processBuilder = new ProcessBuilder(script, buildLabel)

//Inject our environment variables
Map<String, String> env = processBuilder.environment()
env.put("ProjectRoot", "someLocation")
env.put("SomeVar", "Some")

Process p = processBuilder.start()
p.waitFor() 
```

当然，如果您从头开始设置 Jenkins，您可能会采用不同的方式并以另一种方式共享变量，或者传递参数，但这可能会派上用场。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-06-26T13:21:05.050

在我这边，它只能通过替换**现有**参数以这种方式工作。

```
def artifactNameParam = new StringParameterValue('CopyProjectArtifactName', 'bla bla bla')
build.replaceAction(new ParametersAction(artifactNameParam)) 
```

此外，此脚本必须与**系统 groovy**一起运行。

必须在该系统上手动安装 groovy，并且必须将 groovy 的**bin**目录添加到**path**。此外，在**lib**文件夹中，我必须添加**jenkins-core.jar**。

然后可以在 groovy 脚本中修改参数并在批处理脚本中获取修改后的值以继续工作。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-11-15T20:48:17.683

对我来说，以下工作适用于 Jenkins 2.190.1，并且比其他一些解决方法简单得多：

```
matcher = manager.getLogMatcher('^.*Text we want comes next: (.*)$');

if (matcher.matches()) {
    def myVar = matcher.group(1);
    def envVar = new EnvVars([MY_ENV_VAR: myVar]);
    def newEnv = Environment.create(envVar);
    manager.build.environments.add(0, newEnv);
    // now the matched text from the LogMatcher is passed to an
    // env var we can access at $MY_ENV_VAR in post build steps
} 
```

这是使用 Groovy Script 插件，没有对 Jenkins 进行额外更改。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2022-01-04T11:15:12.777

如果想更广泛地使用，您还可以为 jenkins 创建一个全局环境变量。[在这里](https://www.lambdatest.com/blog/set-jenkins-pipeline-environment-variables-list/)写的比较长。

```
import hudson.EnvVars;
import hudson.slaves.EnvironmentVariablesNodeProperty;
import hudson.slaves.NodeProperty;
import hudson.slaves.NodePropertyDescriptor;
import hudson.util.DescribableList;
import jenkins.model.Jenkins;
public createGlobalEnvironmentVariables(String key, String value){

       Jenkins instance = Jenkins.getInstance();

       DescribableList<NodeProperty<?>, NodePropertyDescriptor> globalNodeProperties = instance.getGlobalNodeProperties();
       List<EnvironmentVariablesNodeProperty> envVarsNodePropertyList = globalNodeProperties.getAll(EnvironmentVariablesNodeProperty.class);

       EnvironmentVariablesNodeProperty newEnvVarsNodeProperty = null;
       EnvVars envVars = null;

       if ( envVarsNodePropertyList == null || envVarsNodePropertyList.size() == 0 ) {
           newEnvVarsNodeProperty = new hudson.slaves.EnvironmentVariablesNodeProperty();
           globalNodeProperties.add(newEnvVarsNodeProperty);
           envVars = newEnvVarsNodeProperty.getEnvVars();
       } else {
           envVars = envVarsNodePropertyList.get(0).getEnvVars();
       }
       envVars.put(key, value)
       instance.save()
}
createGlobalEnvironmentVariables('Var1','Dummy') 
```

# java - 我可以自动检测连接特定设备的串行端口吗？

> ID：10413941
> 
> 赞同：2
> 
> 时间：2012-05-02T12:38:20.477
> 
> 标签：java, applet, serial-port

我正在构建一个需要从串行连接设备读取数据的 Java 小程序。此时，我正在显示一个下拉列表，其中显示了笔记本电脑/工作站的所有串行 COM 端口。用户必须手动选择设备连接的指定端口。

大多数时候用户不知道正确的端口号或不知道如何找到它。所以我想知道是否有办法进行某种选择正确设备的自动检测？是否有任何可能的方法来获取连接到串行端口的设备的 ID/型号/名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T12:43:15.000

不，没有这种用于设备识别的“集成”功能。

可以使用必要的参数主动尝试每个端口，并发送/侦听您的设备支持的 ID 命令，**但**我不推荐它。

当您的设备之外的其他设备连接时，字符串传输或更改连接到与您设备不同的设备的端口的参数可能会导致非常错误的行为

# mobile - 使用钛中的百分比进行流体/响应式设计

> ID：10413942
> 
> 赞同：4
> 
> 时间：2012-05-02T12:38:21.020
> 
> 标签：mobile, titanium, appcelerator, responsive-design

无论如何使用 Titanium Appcelerator 来使用百分比。用于流畅和响应式设计；否则看起来我将与所有设备的 IF ELSE 语句作斗争！

**原始代码**

```
 WebViewWindow=Titanium.UI.createWebView({
    html:globalHTMLHeadert,
    visible:true,
    width:100%, //note I have tried also "100%" with/out comma
    left:0,
    bottom:30%,
    zIndex:400
}); 
```

**我想**

```
WebViewWindow=Titanium.UI.createWebView({
    html:globalHTMLHeadert,
    visible:true,
    width:320,
    left:0,
    bottom:150,
    zIndex:400
}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-02T16:01:32.807

简单的。

创建一个名为**frames.js的新文件**

```
/*
 * Frames
 * @ We uses this framework to allow mobility for responsive design
 * @ Each variable is used and this is the width based on the device
 */
// 100%
var per100 = Math.floor(Titanium.Platform.displayCaps.platformWidth * 1.0); 
// 90%
var per90 = Math.floor(Titanium.Platform.displayCaps.platformWidth * 0.9); 
// 80%
var per80 = Math.floor(Titanium.Platform.displayCaps.platformWidth * 0.8); 
// 50%
var per50 = Math.floor(Titanium.Platform.displayCaps.platformWidth * 0.5); 
// 40%
var per40 = Math.floor(Titanium.Platform.displayCaps.platformWidth * 0.4);
// 25%
var per25 = Math.floor(Titanium.Platform.displayCaps.platformWidth * 0.25); 
// 10%
var per10 = Math.floor(Titanium.Platform.displayCaps.platformWidth * 0.10); 
// 5%
var per5 = Math.floor(Titanium.Platform.displayCaps.platformWidth * 0.05); 
// 1%
var per1 = Math.floor(Titanium.Platform.displayCaps.platformWidth * 0.01); 
```

现在，在你的 js 文件中包含 frames.js。

你可以这样使用它，这将是一个流畅的按钮，90%

```
var btngeorgia=Titanium.UI.createButton({
    color:'#d8d8d8',
    borderRadius:'2px',
    height:30,
    width:per90,
    zIndex:800,
    left:10,
    bottom:100,
    title:'Georgia',
    font:'Georgia',
}); 
```

这将是 100% 流体设备宽度的 Web 视图

```
WebViewWindow=Titanium.UI.createWebView({
    html:globalHTMLHeadert,
    visible:true,
    width:per100,
    left:0,
    bottom:220,
    zIndex:300
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T14:23:27.547

以下网站来自开发者博客。它谈到了 1.7 中包含的一个属性，可以交换，以便钛自动为您扩展您的应用程序。

打开此选项意味着您不需要计算百分比或类似的东西。如果它在 iphone 模拟器上看起来不错，它将缩放到在所有设备上看起来都一样。

[http://developer.appcelerator.com/blog/2011/06/new-defaults-for-android-layouts-in-1-7.html](http://developer.appcelerator.com/blog/2011/06/new-defaults-for-android-layouts-in-1-7.html)

它还提到使用“15dp”作为密度像素，无论您使用什么屏幕分辨率，它都会为您提供统一的像素大小。

最后，您实际上可以在您的应用程序中使用诸如 width:'100%' 之类的百分比。

[http://developer.appcelerator.com/question/46501/using-percentages-to-set-sizes](http://developer.appcelerator.com/question/46501/using-percentages-to-set-sizes)

这是一个帖子，有人没有使用引号，后来将答案标记为正确

# iphone - 如何在我的 iOS 应用程序中保存登录数据

> ID：10413943
> 
> 赞同：2
> 
> 时间：2012-05-02T12:38:28.747
> 
> 标签：iphone, objective-c, ios

我到底想要什么：

我有一个登录系统。每当用户登录他的帐户时，应用程序都会获得一个唯一的 id 作为 json 响应。现在我想做的是在整个应用程序中使用这个 ID，因为用户使用他/她的唯一 ID 访问他的个人资料并`/rcvs`通过相同的唯一 ID 发送消息。

我需要在整个应用程序中携带此 ID。即使应用程序崩溃或关闭。用户返回应用程序后，用户直接登录，不显示登录屏幕。此外，仅当用户单击退出按钮时，此 id 才会被删除或变为 null。

这是我的代码： http: [//www.pastie.org/3848543](http://www.pastie.org/3848543)

我相信我应该使用以下之一：

1.  列表
2.  NSUserDefaults
3.  应用委托

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-02T12:47:39.177

你可以通过使用 nsuserdefaults 来解决这个问题。

这是一个示例代码：

```
NSUserDefaults *standardUserDefaults = [NSUserDefaults standardUserDefaults];
    if([standardUserDefaults objectForKey:@"your-key-goes-here"] == nil)
        [standardUserDefaults setBool:YES forKey:@"your-key-goes-here"]; 
```

您可以像上面一样检查您的密钥是否存在，当您得到答案时，您可以像上面一样设置它，但当然可以使用以下方法：

```
[standardUserDefaults setValue:@"your-value" forKey:@"your-key-goes-here"]; 
```

然后最后你应该同步用户默认值，如：

```
[standardUserDefaults synchronize]; 
```

希望这可以帮助..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T12:41:44.220

我错了吗？我认为这个问题可以通过**cookie** 在用户登录时设置 id 并随时更改它来解决？此外，您可以轻松阅读 cookie 中的信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-02T12:54:00.980

排序 fr 并使用 NSDefaults 存储此 ID，第二个选项是在应用程序委托中添加一个属性并为其分配价值

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-02T13:19:45.927

我建议您使用`NSUserDefaults`，并且您自己建议。如果将其保存在任何本地文件（例如`plist`）中，则需要对文件或登录数据进行加密，否则其他任何人都可以清楚地读取它（因此安全性很低）。

`appDelegate`我不确定你的意思是什么，因为`appDelegate`它只不过是一个委托类。使用可以创建一个委托方法来验证用户，但这仍然会让你回到最初的问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-03T05:49:29.357

NSUserDefaults *standardUserDefaults = [NSUserDefaults standardUserDefaults]; if([standardUserDefaults objectForKey:@"key"] == nil) [standardUserDefaults setBool:YES forKey:@"key"];

[standardUserDefaults setValue:@"your-value" forKey:@"key"];

[标准用户默认同步]；

# iphone - 使用 iPhone 视网膜图像作为 iPad 非视网膜图像，不重复

> ID：10413945
> 
> 赞同：1
> 
> 时间：2012-05-02T12:38:30.453
> 
> 标签：iphone, ios, ipad, retina-display

如果我有一个带有 4 张图片的通用应用程序，如下所示

*   iPhone图像.png (50x50)
*   iPhoneimage@2x.png (100x100)
*   iPad图像.png (100x100)
*   iPadimage@2x.png (200x200)

它们都是相同的图像，只是大小不同。如您所见，iPhone 视网膜图像与 iPad 非视网膜图像大小相同。

有没有办法将 iPhone 视网膜图像用作 iPad 非视网膜图像而不复制文件本身并重命名它？只是似乎有点浪费内存，特别是如果它经常出现在应用程序中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T15:59:48.487

我在自己的应用程序中做同样的事情。我发现命名图像`image.png`, `image@2x.png`, 并且`image@2x@2x.png`效果很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T13:01:44.293

您可以将其命名`iPhoneimage.png`并将大小设置为 200x200，但您需要相应地管理图像缩放。

但请注意，您将获得一些 SSD 内存，也许您可​​以保持在 3G App Store 下载的 50MB 限制以下，但您会消耗**更多的 RAM 内存**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T12:42:46.943

我没有尝试，但它得到了 13 次竖起大拇指，所以应该是正确的.. :)

[iphone&ipad 视网膜图像处理](https://stackoverflow.com/questions/5088945/use-2x-retina-images-for-ipad-in-universal-app-and-does-apple-prefer-native-ap)

希望这对你有帮助..

# rest - 获取事件时这是 Box API v2 的错误吗

> ID：10413952
> 
> 赞同：2
> 
> 时间：2012-05-02T12:39:03.947
> 
> 标签：rest, stream, box-api

在使用 BOX API v2 从 Box 获取事件时，我发现了一个奇怪的行为。

我得到的场景如下：

1.  使用 box API v1 将 14 个文件上传到 box.net。
2.  使用 stream_position=now 获取事件，这给出了一个流位置，比如 1234，并且不返回任何条目。
3.  使用 stream_position=1234 获取事件，这会给出一个新的流位置，比如 7890，并且不返回任何条目。
    （**到此为止，一切都如预期的那样**）
4.  使用 stream_position=7890 获取事件，现在这给出了具有“ITEM_UPLOAD”行为的虚拟事件数和我在第一步中上传的一些文件。

我希望如果在第 1 步之后没有发生文件事件，那么所有后续的 get 事件调用都将返回零条目。

这是 Box.NET API V2 中的错误吗？

由于我同时使用 API v1 和 API v2，它们是否兼容？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T19:12:49.867

这不是错误。在第 3 步调用时，您在第 1 步上传的文件根本没有复制到事件系统中。他们通过#4 到达那里。上传文件和发布到 API 的事件之间存在固有延迟。您完成整个过程的速度有多快？

如果您对使用 /events 端点或任何其他 V2 API 端点有任何其他问题，请告诉我们。

并且回答您的第二个问题，是的，V1 和 V2 api 是兼容的，可以一起使用。如果您需要 V1 API 的某些功能，则可以混合 V1 和 V2 api 调用。

# html - 如何使 GitHub README 页面按原样显示 HTML 代码

> ID：10413954
> 
> 赞同：0
> 
> 时间：2012-05-02T12:39:06.867
> 
> 标签：html, github, code-snippets

我有一小段 HTML（一个包含 ap 和页脚的块引用元素），我想将其作为代码显示在 GitHub README 页面上。我尝试将它缩进 4 个空格，但它只显示 HTML 中的内容，而不是整个标记片段。我还尝试将它包装在 pre 和 code 标记中，并用 (```) 引用它。徒劳无功。

我在不同的 README 中使用了 4 空格缩进，所以我真的很困惑为什么这次它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T16:26:17.297

它应该是`README.md`

例子

```
I've got this small piece of HTML 

<blockquote>
    <p>
    </p>
    <footer>
    </footer>
</blockquote> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-20T07:11:54.647

我认为您正在通过`<tag>`在降价文件中输入来添加标签。相反，键入此`&lt;tag&gt;`. 希望它有效。

# javascript - using jquery to play pause embedded vlc player

> ID：10413957
> 
> 赞同：1
> 
> 时间：2012-05-02T12:39:15.243
> 
> 标签：javascript, jquery, html, vlc

I embedded vlcplayer in html and wanted to play ,pause the video .So I created a javascript file and coded some functions

```
<head>
<script type="text/javascript"  src="jquery-1.7.1.min.js" ></script>
<script type="text/javascript"  src="vctrl.js" ></script>
</head>
<body>
<embed id="vlcp" type="application/x-vlc-plugin" name="VLC"  autoplay="no" loop="no" volume="100" width="640" height="480" target="test.flv">
</embed>
<a href="#" onclick='play()'>Play</a>
<a href="#" onclick='pause()'>Pause</a>
</body> 
```

The javascript file has

```
$(document).ready(function(){
    var player = document.getElementById("vlcp");
    var play = function(){
        if(player){
            alert("play");
        }
    };

    var pause = function(){
        if(player){
            alert("pause");
        }
    };        
}
); 
```

When I click on the play link ,the alert box doesn't appear..Is the way I have given the `onclick` value wrong?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T13:02:39.987

Your functions `play` and `pause` are defined as local variable of the function you give to the `ready` function. So they're not visible to the DOM objects.

A solution could be to declare them in an usual way (or `window.play = function...`).

But the correct way using jquery is to use jquery binding functions :

```
 <head>
    <script type="text/javascript"  src="jquery-1.7.1.min.js" ></script>
    <script type="text/javascript"  src="vctrl.js" ></script>
    </head>
    <body>
    <embed id="vlcp" type="application/x-vlc-plugin" name="VLC"  autoplay="no" loop="no" volume="100" width="640" height="480" target="test.flv">
    </embed>
    <a id=playbutton href="#">Play</a>
    <a id=pausebutton href="#">Pause</a>
    </body>

    $(document).ready(function(){
        var player = document.getElementById("vlcp");
        $('#playbutton').click(function(){
            if(player){
                alert("play");
            }
        });

        $('#pausebutton').click(function(){
            if(player){
                alert("pause");
            }
        });        
    }
    ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T13:02:48.617

```
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
<script type="text/javascript"  src="vctrl.js" ></script>
</head>
<body>
<embed id="vlcp" type="application/x-vlc-plugin" name="VLC"  autoplay="no" loop="no" volume="100" width="640" height="480" target="test.flv">
</embed>
<a href="javascript:void(0);" class="play" onclick='play()'>Play</a>
<a href="javascript:void(0);" class="play" onclick='pause()'>Pause</a>
</body>

<script type="text/javascript">
$(document).ready(function(){
var player = document.getElementById("vlcp");
$('.play').click(function(){
var thisvalue = $(this).html();
if(thisvalue=="Play"){
alert("Play");
}else{
if(thisvalue=="Pause"){
alert("Pause");
}
}
});
});
</script> 
```

# sockets - Telnet IAC 命令应答

> ID：10413963
> 
> 赞同：10
> 
> 时间：2012-05-02T12:39:37.627
> 
> 标签：sockets, networking, ip, telnet, tcpclient

我正在尝试与套接字协商 telnet 连接。套接字正在工作，但服务器告诉我那件事：

```
ÿýÿýÿûÿû

login: 
```

手段 255 253 1 `ÿýÿýÿûÿû`255 253 31 255 251 1 255 251 3

我阅读了所有 RFC 文档，但我不明白我应该如何响应才能将（字符串 ascii 数据？）发送到服务器，我希望成功运行登录提示，然后将命令发送到服务器，如“停止”或其他东西。

提前感谢您的回答。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-02T17:09:41.453

来自[RFC 854](http://www.faqs.org/rfcs/rfc854.html)：

> 由于 NVT 是在未启用任何选项时留下的内容，因此可以保证 DON'T 和 WON'T 响应使连接处于两端都可以处理的状态。因此，所有主机都可以实现它们的 TELNET 进程以完全不知道不支持的选项，只是简单地返回拒绝（即拒绝）任何无法理解的选项请求。

也就是说，对于每个`WILL`，响应`DONT`。对于每一个`DO`，回应`WONT`。

就您而言，您已收到（请参阅[IANA 分配的 telnet 选项](http://www.iana.org/assignments/telnet-options/telnet-options.xhtml)）：

```
255 253 1    IAC DO ECHO
255 253 31   IAC DO NAWS
255 251 1    IAC WILL ECHO
255 251 3    IAC WILL SUPPRESS-GO-AHEAD 
```

所以你应该回应：

```
255 252 1    IAC WONT ECHO
255 252 31   IAC WONT NAWS
255 254 1    IAC DONT ECHO
255 254 3    IAC DONT SUPPRESS-GO-AHEAD 
```

请注意，您不必知道 1、3 或 31 的实际含义。这就是美丽。您甚至可以在不知道它们的定义的情况下拒绝这些选项。您将默认使用网络虚拟终端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T17:17:03.910

在 RFC 854 中查找

```
255 253 1  IAC DO #1 
255 253 31 IAC DO #31
255 251 1  IAC WILL #1
255 251 3  IAC WILL #3 
```

[现在在这里](http://www.laynetworks.com/telnet.htm)查找参数值：1：= echo，31：= 窗口大小。

# android-ndk - 在 pthread_getspecific 之后 Android 应用程序 JNI/Java 崩溃

> ID：10413964
> 
> 赞同：0
> 
> 时间：2012-05-02T12:39:40.273
> 
> 标签：android-ndk, java-native-interface

我有一个很奇怪的问题！

我的应用程序在 JNI（C 代码）部分中的 pthread_getspecific 之后崩溃，但奇怪的是，那是因为它没有直接崩溃，因为我在崩溃前多次使用了这个函数，一切都很好。

因此，这里是发生崩溃的 C 代码：

```
int *compteur;
__android_log_print(ANDROID_LOG_INFO, "JNI", "before getspecific key : %d",key);
compteur=(int*)pthread_getspecific(key);
__android_log_print(ANDROID_LOG_ERROR, "JNI", "error %s",strerror(errno));
__android_log_print(ANDROID_LOG_INFO, "JNI", "pointeur : %ld",*compteur);
(*compteur)=(*compteur)-1;
if ((*compteur)==0)
{
  pthread_mutex_unlock(&mutex));
} 
```

logcat 告诉我：

```
>     before getspecific key : 13
>     error Unknown error: 0
>     pointeur : 1
>     before getspecific key : 13
>     error Unknown error: 0
>     pointeur : 1
>     before getspecific key : 13
>     error Unknown error: 0
CRASH 
```

所以使用 ndk-stack 我有：

```
$home>adb logcat | ndk-stack -sym obj
/local/armeabi
********** Crash dump: **********
Build fingerprint: 'archos/G9A80/A80:3.2.1/HTK75D/20120103.181511:user/release-keys'
pid: 7322, tid: 7332  >>> com.prg.main <<<
signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr 00000000
Stack frame #00  pc 00012532  /data/data/com.prg.main/lib/libPrg.so (the function where the crash appens): Routine
(the function where the crash appens) in myfile.c:75
...
Stack frame #04  pc 00011770  /system/lib/libc.so (__thread_entry)
Stack frame #05  pc 000112c4  /system/lib/libc.so (pthread_create)
Crash dump is completed 
```

如果您有任何想法可以解决我的问题，欢迎您

# haskell - 标准类型类实例声明的源代码

> ID：10413969
> 
> 赞同：6
> 
> 时间：2012-05-02T12:39:59.177
> 
> 标签：haskell, hackage

我想知道 的`Ord`实例声明`(a,b)`，我想快速查找一下 hackage 以确认我的直觉，即比较首先打开`a`，然后在相等的情况下打开`b`。具体来说我去[了这里](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-Ord.html#t:Ord)。由于 hackage 有指向数据声明和函数的源代码的链接，我假设也会有实例声明的源代码，但我找不到它们。他们不在那里是有原因的，还是我看起来不够努力？`type Answer = Either Explanation Directions`:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-02T12:56:59.340

我[查看 Prelude](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#t%3aOrd)，点击[typeclass的](http://www.haskell.org/ghc/docs/latest/html/libraries/ghc-prim-0.2.0.0/src/GHC-Classes.html#Ord)[源链接`Ord`](http://www.haskell.org/ghc/docs/latest/html/libraries/ghc-prim-0.2.0.0/src/GHC-Classes.html#Ord)，向下滚动一点，发现它被定义为

```
deriving instance (Ord a, Ord b) => Ord (a, b) 
```

它使用[StandaloneDeriving](http://www.haskell.org/ghc/docs/latest/html/users_guide/deriving.html#stand-alone-deriving)扩展。基本上它生成的代码与类型定义为

```
data (a, b) = (a, b) deriving Ord 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-02T13:03:44.087

元组的`Ord`实例[是根据语言规范中的规则派生](http://www.haskell.org/ghc/docs/7.4.1/html/libraries/ghc-prim-0.2.0.0/src/GHC-Tuple.html#%28,%29)的，该规范可以追溯到[Gofer](http://hackage.haskell.org/packages/archive/gofer-prelude/2.30.3/doc/html/src/Prelude-Gofer.html#line-622)。

```
instance (Eq a, Eq b) => Eq (a,b) where
    (x,y) == (u,v)  =  x==u && y==v

instance (Ord a, Ord b) => Ord (a,b) where
    (x,y) <= (u,v)  = x<u  ||  (x==u && y<=v) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-02T13:52:04.243

Haskell 98 报告[在第 10.1 节中](http://www.haskell.org/onlinereport/derived.html)指定了这一点：

> 由 Eq 和 Ord 的派生实例自动引入的类方法是 (==)、(/=)、compare、(<)、(<=)、(>)、(>=)、max 和 min。定义后七个运算符，以便根据给定的构造函数集按字典顺序比较它们的参数，数据类型声明中较早的构造函数计数为小于后面的构造函数。
> 
> 派生比较总是从左到右遍历构造函数。
> 
> ...
> 
> 类 Eq 和 Ord 的所有派生操作在两个参数中都是严格的。

# ruby-on-rails - Bundle 说 gem 不见了 - 但不是吗？

> ID：10413972
> 
> 赞同：3
> 
> 时间：2012-05-02T12:40:26.103
> 
> 标签：ruby-on-rails, ruby, rubygems, rbenv

**背景**

我正在维护一个 Ruby On Rails 站点的*内容*，但我真的没有使用 Rails 的经验。

尝试运行 Rails 服务器时：`rails s`我得到了这个：

> 在任何来源中都找不到 activesupport-3.2.0
> 
> 运行`bundle install`以安装缺少的 gem

我运行捆绑安装

> Gem::InstallError: factory_girl 需要 Ruby 版本 >= 1.9.2。安装 factory_girl (3.2.0) 时出错，Bundler 无法继续。
> 
> `gem install factory_girl -v '3.2.0'` 在捆绑之前确保成功。

好的，我按照说明安装 factory_girl：

> 成功安装 factory_girl-3.2.0 1 gem 安装

再次运行捆绑安装：

> Gem::InstallError: factory_girl 需要 Ruby 版本 >= 1.9.2。安装 factory_girl (3.2.0) 时出错，Bundler 无法继续。`gem install factory_girl -v '3.2.0'`在捆绑之前确保成功。

你有什么主意吗？

**信息**

昨天我在尝试运行 rails server 时遇到交叉错误。因此，按照[这个 SO 建议](https://stackoverflow.com/questions/10175872/cross-thread-violation-on-rb-gc)，我建议我已经对 RVM 进行了核对并安装了 rbenv 和 bundler 而不是 RVM。

我已经尝试过 Ruby 1.9.3-p125 和 1.9.3-rc1

`gem list`显示安装后的 factory_girl 的输出。

*   ...
*   factory_girl (3.2.0)
*   ...

显示问题的输出`gem environment`可能与安装 ruby​​ 1.9.1 有关吗？

> RubyGems 环境：
> - RUBYGEMS 版本：1.8.10
> - RUBY 版本：1.9.3（2011-09-23 补丁级别 -1）[x86_64-darwin11.3.0]
> - 安装目录：/Users/andreas/.rbenv/versions/1.9。 3-rc1/lib/ruby/gems/1.9.1
> - RUBY 可执行文件：/Users/andreas/.rbenv/versions/1.9.3-rc1/bin/ruby
> - 可执行目录：/Users/andreas/.rbenv/versions/ 1.9.3-rc1/bin
> - RUBYGEMS 平台：
> - ruby
> ​​ - x86_64-darwin-11
> - GEM 路径：
> - /Users/andreas/.rbenv/versions/1.9.3-rc1/lib/ruby/gems/1.9.1
> - /Users/andreas/.gem/ruby/1.9.1
> - GEM 配置：
> - :update_sources => true
> - :verbose => true
> - :benchmark => false
> - :backtrace => false
> - :bulk_threshold => 1000
> - "gem" => "--no-ri --no-rdoc"
> - 远程资源：
> - [http://rubygems.org/](http://rubygems.org/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2018-08-28T05:39:49.957

尝试使用以下命令重新安装所有 gem：

```
bundle install --redownload 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-02T14:03:31.570

你试过这个吗？

```
bundle exec rails s 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-02T14:09:34.787

@jdoe 在评论中回答。它奏效了。显然我需要删除`Gemfile.lock`.

我不知道为什么或如何。我只是在这里发布这个，直到@jdoe 出现并用一个真实的答案收集他的分数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-02T14:00:34.367

首先，我没有使用 rbenv 的经验。

RVM 的优点之一是它有助于相当明确地说明 Ruby 环境的移动部分是什么。

*rvm list*会给你一个红宝石列表 *rvm gemset list*会给你一个 gemsets 列表（如果使用捆绑器，这应该不是必需的）

现在，这里有一些棘手的事情：

*   Bundler 使用 Gemfile 来确定要安装的内容
*   如果未指定任何内容，Bundler 将尝试安装最新版本的 gem
*   如果最新版本的 gem 与您当前的 Ruby 不兼容，那么...
    *   您可以更改 Ruby 的版本（例如*rvm install 1.9.3*）
    *   您可以告诉 Gemfile 以不同程度的严格性指定您想要的 gem 版本。
        *   你能告诉我喜欢缩进项目符号吗？
        *   gem "vcr", "~> 1.11.3" # => 这表示您更喜欢 1.11.3，但 1.11 范围内的任何内容都是可以接受的
        *   gem 'factory_girl', '3.2.0' # => 这就是说，只安装 factory_girl 的 3.2.0 版本，没有别的

此外，在其他任何事情之前，您应该运行*bundle check*以查看 bundler 对您的 gem 有什么看法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-02T14:22:55.763

确保您正在安装的所有 gem 都在 Gemfile 中，因为如果 gem 没有添加到 Gemfile 中，即使您手动安装了它，您的 Rails 应用程序也不会得到它。

示例 Gemfile 将是

```
gem 'rails', '3.0.0'

gem 'mysql2', '< 0.3'
gem 'rails3-jquery-autocomplete'

#authorization
gem 'authlogic'
gem 'hoptoad_notifier'

#reporting
gem 'lazy_high_charts'

group :test do
  gem 'rspec', '2.0.0'
  gem 'rspec-rails', '2.0 '
  gem "test-unit"
end 
```

# spring-security - 如何在登录时提供其他用户数据 (CAS)

> ID：10413975
> 
> 赞同：2
> 
> 时间：2012-05-02T12:40:30.973
> 
> 标签：spring-security, single-sign-on, cas, shiro

是否可以向客户提供额外的用户数据（如电子邮件）？

我的 CAS 服务器从其数据源中获取有关用户的完整信息。客户端应用程序登录后，我只有用户名。如何将用户信息从 CAS 服务器应用程序传输到 CAS 客户端应用程序？

假设我可以实现 CAS 客户端应用程序登录后将调用的 RESTful 服务，但我该如何保护它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-06T08:24:51.497

根据您的身份验证源（AD、LDAP 等），您可以配置 CAS 以将您想要的额外属性返回给客户端。这是通过 jasig persondir API 使用属性存储库实现的。使用特殊的验证过滤器，您可以返回额外的属性，例如电子邮件等，并让它们在 Principal 对象中可用。

有关更多信息，请参阅此链接： [https ://wiki.jasig.org/display/CASUM/Attributes](https://wiki.jasig.org/display/CASUM/Attributes)

# java - 删除 DefaultTableModel 的所有行

> ID：10413977
> 
> 赞同：19
> 
> 时间：2012-05-02T12:40:44.530
> 
> 标签：java, swing, jtable, defaulttablemodel

我想删除 DefaultTable 的所有行。我在互联网上找到了两种删除它们的常用方法，但它们都不适用于我的情况，因为这些方法在我的 DefaultTableModel 中不存在。我想知道为什么。我使用 DefaultTableModel 的代码是

```
DefaultTableModel Table = (DefaultTableModel) Table.getModel(); 
```

一种删除方法是

```
Table.removeRow(Table.getRowCount() - 1); 
```

但是这个 removerow 方法在我的 DefaultTableModel 中不存在。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-05-02T12:45:57.410

您可以将行数设置为 0。 `setRowCount(0)`

[从文档](http://docs.oracle.com/javase/7/docs/api/javax/swing/table/DefaultTableModel.html#setRowCount%28int%29)中引用：

> ```
> public void setRowCount(int rowCount) 
> ```
> 
> 设置模型中的行数。如果新大小大于当前大小，则将新行添加到模型的末尾。如果新大小小于当前大小，则丢弃索引 rowCount 和更大的所有行。

但是因为你找不到`removeRow`我怀疑你没有输入你的模型变量`DefaultTableModel`，也许只是`TableModel`？

在这种情况下，让你`TableModel`像`DefaultTableModel`这样：

```
DefaultTableModel model = (DefaultTableModel) table.getModel(); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-05-02T13:11:54.390

为什么把简单的事情复杂化，但删除必须是迭代的，

```
if (myTableModel.getRowCount() > 0) {
    for (int i = myTableModel.getRowCount() - 1; i > -1; i--) {
        myTableModel.removeRow(i);
    }
} 
```

代码示例

```
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.*;
import javax.swing.table.*;

public class RemoveAddRows extends JFrame {

    private static final long serialVersionUID = 1L;
    private Object[] columnNames = {"Type", "Company", "Shares", "Price"};
    private Object[][] data = {
        {"Buy", "IBM", new Integer(1000), new Double(80.50)},
        {"Sell", "MicroSoft", new Integer(2000), new Double(6.25)},
        {"Sell", "Apple", new Integer(3000), new Double(7.35)},
        {"Buy", "Nortel", new Integer(4000), new Double(20.00)}
    };
    private JTable table;
    private DefaultTableModel model;

    public RemoveAddRows() {

        model = new DefaultTableModel(data, columnNames) {

            private static final long serialVersionUID = 1L;

            @Override
            public Class getColumnClass(int column) {
                return getValueAt(0, column).getClass();
            }
        };
        table = new JTable(model) {

            private static final long serialVersionUID = 1L;

            @Override
            public Component prepareRenderer(TableCellRenderer renderer, int row, int column) {
                Component c = super.prepareRenderer(renderer, row, column);
                int firstRow = 0;
                int lastRow = table.getRowCount() - 1;
                int width = 0;
                if (row == lastRow) {
                    ((JComponent) c).setBackground(Color.red);
                } else if (row == firstRow) {
                    ((JComponent) c).setBackground(Color.blue);
                } else {
                    ((JComponent) c).setBackground(table.getBackground());
                }
                /*if (!isRowSelected(row)) {
                String type = (String) getModel().getValueAt(row, 0);
                c.setBackground("Buy".equals(type) ? Color.GREEN : Color.YELLOW);
                }
                if (isRowSelected(row) && isColumnSelected(column)) {
                ((JComponent) c).setBorder(new LineBorder(Color.red));
                }*/
                return c;
            }
        };
        table.setPreferredScrollableViewportSize(table.getPreferredSize());
        JScrollPane scrollPane = new JScrollPane(table);
        add(scrollPane);
        JButton button1 = new JButton("Remove all rows");
        button1.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent arg0) {
                if (model.getRowCount() > 0) {
                    for (int i = model.getRowCount() - 1; i > -1; i--) {
                        model.removeRow(i);
                    }
                }
                System.out.println("model.getRowCount() --->" + model.getRowCount());
            }
        });
        JButton button2 = new JButton("Add new rows");
        button2.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent arg0) {
                Object[] data0 = {"Buy", "IBM", new Integer(1000), new Double(80.50)};
                model.addRow(data0);
                Object[] data1 = {"Sell", "MicroSoft", new Integer(2000), new Double(6.25)};
                model.addRow(data1);
                Object[] data2 = {"Sell", "Apple", new Integer(3000), new Double(7.35)};
                model.addRow(data2);
                Object[] data3 = {"Buy", "Nortel", new Integer(4000), new Double(20.00)};
                model.addRow(data3);
                System.out.println("model.getRowCount() --->" + model.getRowCount());
            }
        });
        JPanel southPanel = new JPanel();
        southPanel.add(button1);
        southPanel.add(button2);
        add(southPanel, BorderLayout.SOUTH);
    }

    public static void main(String[] args) {
        RemoveAddRows frame = new RemoveAddRows();
        frame.setDefaultCloseOperation(EXIT_ON_CLOSE);
        frame.pack();
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2012-10-05T11:55:29.450

你试过这个吗这对我有用..

```
defaultTableModel.setRowCount(0); 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-05-02T12:47:14.667

你为什么不阅读[DefaultTableModel 的javadoc](http://docs.oracle.com/javase/6/docs/api/javax/swing/table/DefaultTableModel.html)？

> 公共无效 removeRow(int 行)
> 
> 从模型中删除 row at row。将被删除的行的通知将发送给所有侦听器。
> 
> 公共无效 setDataVector（矢量数据矢量，矢量 columnIdentifiers）
> 
> 用新的行向量 dataVector 替换当前的 dataVector 实例变量。
> 
> 公共无效 setRowCount(int rowCount)
> 
> 设置模型中的行数。如果新大小大于当前大小，则将新行添加到模型的末尾。如果新大小小于当前大小，则丢弃索引 rowCount 和更大的所有行。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-05-08T11:25:52.453

只需继续删除表模型的第一行，直到没有更多行。

```
// clean table
DefaultTableModel myTableModel = (DefaultTableModel) this.myjTable.getModel(); 
while (myTableModel.getRowCount() > 0) {
       myTableModel.removeRow(0);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-01-24T08:39:01.343

ypu可以写一个方法

```
public void clearTable()
  {
    getTableModel().setRowCount(0);
  } 
```

然后从需要清表的地方调用这个方法

# jquery - 这个 div 没有动画的任何原因？

> ID：10413978
> 
> 赞同：0
> 
> 时间：2012-05-02T12:40:52.173
> 
> 标签：jquery, jquery-ui

我不明白为什么一个特定的 div (id=error) 不会为这里的 div 设置动画：

```
<asp:Content ID="SContent" ContentPlaceHolderID="MainMessageContent" runat="server">
    <div class="ui-widget" id="widget">
            <div id="error" runat="server" visible="false" style="padding: 0 .7em; margin-bottom:5px;">
                <p><span id="msgSpan" runat="server" style="float: left; margin-right: .3em;"></span>
                <strong>
                    <asp:Label ID="lblMessage" runat="server"></asp:Label>
                </strong></p>
            </div>
        </div>
</asp:Content> 
```

这是jquery：

```
$("#MainMessageContent_error").animate({
        backgroundColor: "#FFB24B"
    },
                3000,
                function () {
                    $("#MainMessageContent_error").animate({ backgroundColor: "#fff" }, 3000);
                    $('#MainMessageContent_error').delay(10000).fadeOut('slow', function () {
                    });
                }
     ); 
```

它淡出，但没有动画。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T12:57:34.923

为了使用动画效果，您需要插件[jquery-ui](http://jqueryui.com/demos/animate/)库。在核心 jquery 库中没有这样的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-02T12:47:50.040

您可能想尝试的现代解决方案是：

```
<style type="text/css">
#MainMessageContent_error {
    -webkit-transition: background-color 3s;
    -moz-transition: background-color 3s;
    transition: background-color 3s;

    background-color: #FFB24B;
}

#MainMessageContent_error.animate {
    background-color: #FFF;
}
</style> 
```

并做一个`.addClass('animate');`。

如果你想回去，简单`.removeClass('animate');`的。

这提供了一个流畅的动画，不那么滞后。在有人说“IE 版本怎么样？”之前 请注意，此解决方案仍然有效，但没有动画。

# c# - 在 MVC3 中使用搜索过滤器进行 ajax 分页

> ID：10413982
> 
> 赞同：1
> 
> 时间：2012-05-02T12:41:10.383
> 
> 标签：c#, jquery, asp.net, ajax, asp.net-mvc-3

我有一个显示非表格搜索结果的页面（每页 3 个，因为每个页面都非常详细）。此页面还包含一个带有复选框过滤器列表的表单 - 默认状态为选中，因为它显示了所有结果。要从结果中删除某些选项，请从列表中取消选中它们并单击以提交表单。

然后控制器处理这些过滤器并返回新过滤的搜索结果。

我想要做的是添加分页 - 特别是 ajax 分页。我只是想知道其他人会怎么做？

分页功能本身可以工作（没有 ajax）——我可以传递 pageSize 和 pageNumber 并返回正确的结果。但是，我将页码作为隐藏字段加载到表单中，并且因为发布表单是分页的触发器，所以出现了问题。当我单击 Next Page 按钮时，它使用 jQuery 将值添加到 pagenumber 隐藏字段，反之亦然。但是，如果我在第 3 页并添加了一些过滤器，则新列表将发布回视图，但它仍会尝试转到第 3 页，如果不存在第 3 页，则会引发错误。

将页码作为表单字段似乎是一个复杂的解决方案 - 那里必须有一个更干净的解决方案。有没有人在需要基于表单的过滤器的 MVC 应用程序中使用 ajax 分页？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-02T12:56:16.073

这个例子是 asp.net MVC 和 JQuery 的最佳源代码。

[http://awesome.codeplex.com/](http://awesome.codeplex.com/)

用这个 。

# asp.net - asp.net 中的 ViewState 分块

> ID：10413986
> 
> 赞同：11
> 
> 时间：2012-05-02T12:41:20.287
> 
> 标签：asp.net, viewstate, page-lifecycle

我不断听到“Viewstate Chunking”这个词。什么是 Viewstate 分块？

以及它是如何为 ASP.NET 页面工作的？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-05T19:27:50.180

当页面中的 ViewState 变得非常大时，可能会出现问题，因为某些防火墙和代理会阻止访问包含巨大 ViewState 大小的页面。为此，ASP.NET 引入了 ViewState Chunking 机制。因此，ASP.NET 可以使用 web.config 部分中的 MaxPageStateFieldLength 属性将 ViewState 的单个隐藏字段拆分为多个。

当 MaxPageStateFieldLength 属性设置为正数时，发送到客户端浏览器的视图状态被分成多个隐藏字段。

将 MaxPageStateFieldLength 属性设置为负数（默认值）表示不应将视图状态字段分成块。将 MaxPageStateFieldLength 设置为较小的数字可能会导致性能下降。

之前的示例 ViewState：

```
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE"value="/wEPDwUKLTk2Njk3OTQxNg9kFgICAw9kFgICCQ88KwANAGQYAQUJR3Jp
ZFZpZXcxD2dk4sjERFfnDXV/hMFGAL10HQUnZbk=" /> 
```

然后在 web.config 中设置：

```
<pages maxPageStateFieldLength="40"> 
```

示例 ViewState 之后：

```
<input type="hidden" name="__VIEWSTATEFIELDCOUNT" id="__VIEWSTATEFIELDCOUNT"value="3" />
<input type="hidden" name="__VIEWSTATE"
id="__VIEWSTATE" value="/wEPDwUKLTk2Njk3OTQxNg9kFgICAw9kFgICCQ88" />
<input type="hidden" name="__VIEWSTATE1"
id="__VIEWSTATE1" value="KwANAGQYAQUJR3JpZFZpZXcxD2dk4sjERFfnDXV/" />
<input type="hidden" name="__VIEWSTATE2"
id="__VIEWSTATE2" value="hMFGAL10HQUnZbk=" /> 
```

希望对你有帮助！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-02T12:43:38.027

来自[ASP.NET 状态管理中的新增功能 - MSDN](http://msdn.microsoft.com/en-us/library/ms178577%28v=vs.80%29.aspx)

> 如果视图状态数据量变得太大，视图状态分块会自动将数据拆分成块，并将数据放入多个隐藏表单字段中。

**为什么我们需要 Viewstate Chunking？**

这是[ViewState Overivew 的摘录 - MSDN](http://msdn.microsoft.com/en-us/library/ms178198%28v=vs.80%29.aspx)

> 另一个重要的考虑因素是，如果隐藏字段中的数据量变大，某些代理和防火墙将阻止访问包含它们的页面。因为最大数量会随着不同的防火墙和代理实现而变化，所以大的隐藏字段可能会导致零星的问题。为帮助避免此问题，如果 ViewState 属性中存储的数据量超过页面的[MaxPageStateFieldLength](http://msdn.microsoft.com/en-us/library/system.web.ui.page.maxpagestatefieldlength%28v=vs.80%29.aspx)属性中指定的值，页面会将视图状态拆分为多个隐藏字段，以将每个单独字段的大小减小到防火墙拒绝的大小以下。

# .net - 未加载使用 NGEN 创建的 .NET 本机映像

> ID：10413987
> 
> 赞同：10
> 
> 时间：2012-05-02T12:41:21.573
> 
> 标签：.net, image, native, ngen, fuslogvw

我使用 NGEN 创建了我的应用程序使用的几个程序集的本机图像。但是，这些图像在运行应用程序时没有加载，我不知道为什么。

这是来自 fuslogvw 的典型日志：

```
*** Assembly Binder Log Entry  (2/05/2012 @ 13:29:04) ***

The operation failed.
Bind result: hr = 0x80070002\. The system cannot find the file specified.

Assembly manager loaded from:  C:\Windows\Microsoft.NET\Framework64\v4.0.30319\clr.dll
Running under executable  C:\MyDir\MyApp.exe
--- A detailed error log follows. 

=== Pre-bind state information ===
LOG: User = ***\***
LOG: DisplayName = MyAssembly, Version=1000.0.0.0, Culture=neutral, PublicKeyToken=null (Fully-specified)
LOG: Appbase = file:///C:/MyDir/
LOG: Initial PrivatePath = NULL
LOG: Dynamic Base = NULL
LOG: Cache Base = NULL
LOG: AppName = MyApp.exe
Calling assembly : PresentationFramework, Version=4.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35.
===
LOG: Start binding of native image MyAssembly, Version=1000.0.0.0, Culture=neutral, PublicKeyToken=null.
WRN: No matching native image found.
LOG: IL assembly loaded from C:\MyDir\MyAssembly.dll. 
```

以及来自 ngen.exe 关于该程序集的信息：

```
C:\MyDir>ngen display MyAssembly.dll
Microsoft (R) CLR Native Image Generator - Version 4.0.30319.1
Copyright (c) Microsoft Corporation.  All rights reserved.

NGEN Roots:

C:\MyDir\MyAssembly.dll

NGEN Roots that depend on "C:\MyDir\MyAssembly.dll":

C:\MyDir\MyAssembly.dll

Native Images:

MyAssembly, Version=1000.0.0.0, Culture=neutral, PublicKeyToken=null 
```

我使用了位于 C:\Windows\Microsoft.NET\Framework\v4.0.30319\ 中的 ngen.exe，我的程序集的目标框架是 .NET Framework 4。创建本机映像后，我没有重新编译程序集。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-02T13:25:56.897

> 从以下位置加载程序集管理器：C:\Windows\Microsoft.NET\ **Framework64** \v4.0.30319\clr.dll

您的进程在 64 位模式下运行，默认是 64 位操作系统上的 AnyCPU 目标。这要求您运行*64 位版本*的 ngen.exe。请务必选择正确的 Visual Studio 命令提示符。有两种，一种是为64位工具设置环境的，在开始菜单中命名为“Visual Studio x64 Win64 Command Prompt (2010)”。

# ios - 将自定义键/字符串对添加到 root.plist 文件是否安全？

> ID：10413995
> 
> 赞同：0
> 
> 时间：2012-05-02T12:42:02.080
> 
> 标签：ios, settings, plist, bundle

我想使用这个 Rootplist 生成我自己的设置视图，并向其中添加一些属性真的很方便。可以认为将自定义键/字符串对从 Settings.bundle 添加到 Root.plist 文件是安全的吗？

例如 ：

```
<dict>
    <key>Type</key>
    <string>PSMultiValueSpecifier</string>
    <key>Title</key>
    <string>MyTitle</string>

    <key>_CustomKey</key>
    <string>FooBar</string>
    ... 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-02T12:54:57.430

编辑：

[在此处](http://p2p.wrox.com/content/comment/reply/274)查看此博客文章。

警告：虽然我自己没有尝试过，但您所描述的似乎是向项目添加自定义设置的正常方式。

所以，我的回答是：是的，它是安全的。