# StackOverflow 问答 11179000-11179999

# php - 从表中获取自动增量值并将其作为外键插入到另一个表中

> ID：11179007
> 
> 赞同：0
> 
> 时间：2012-06-24T16:13:50.643
> 
> 标签：php, mysql, sql, codeigniter

> **可能重复：**
> [mySQL 中的 SQLServer 函数 SCOPE_IDENTITY() 的等效项？](https://stackoverflow.com/questions/560783/the-equivalent-of-sqlserver-function-scope-identity-in-mysql)

我已经使用 codeigniter 在我的 Web 应用程序中创建了数据输入表单。在我的数据库中，我有两个表，例如表 A 和 B。

表结构示例

A ( id_a, 姓名, 性别, id_b ) B ( id_b, 地址, 爱好, 学校 )

我为 id_a 和 id_b 设置了自动增量，表 A 和 B 的值是用户在我的 Web 应用程序中提交后从数据输入表单中获取的。

用户提交表单后，第一个表 B 将被插入，下一个表 A 也将插入。当用户提交表单时，如何使用表 B 中 id_b 的值自动设置表 A 中的 id_b，所以我可以使用 id_b 作为外键。谢谢你。

# python - Python继承：TypeError：object.__init__()不带参数

> ID：11179008
> 
> 赞同：96
> 
> 时间：2012-06-24T16:13:54.607
> 
> 标签：python, inheritance

我收到此错误：

```
TypeError: object.__init__() takes no parameters 
```

在运行我的代码时，我并没有真正看到我在这里做错了什么：

```
class IRCReplyModule(object):

    activated=True
    moduleHandlerResultList=None
    moduleHandlerCommandlist=None
    modulename=""

    def __init__(self,modulename):
        self.modulename = modulename

class SimpleHelloWorld(IRCReplyModule):

     def __init__(self):
            super(IRCReplyModule,self).__init__('hello world') 
```

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2012-06-24T16:15:40.183

您在 super() 调用中调用了错误的类名：

```
class SimpleHelloWorld(IRCReplyModule):

     def __init__(self):
            #super(IRCReplyModule,self).__init__('hello world')
            super(SimpleHelloWorld,self).__init__('hello world') 
```

本质上，您要解决的是`__init__`不带参数的对象基类。

我知道，它有点多余，必须指定你已经在其中的类，这就是为什么在 python3 中你可以这样做： `super().__init__()`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-04-29T15:20:24.117

这让我最近两次被咬（我知道我应该第一次从错误中吸取教训）并且接受的答案两次都没有帮助我，所以当我脑海中浮现时我想我会提交我自己的答案以防万一其他任何人都遇到了这个问题（或者我将来再次需要这个）。

在我的情况下，问题是我将 kwarg 传递给子类的初始化，但在超类中，关键字 arg 然后被传递到 super() 调用中。

我一直认为这些类型的事情最好举个例子：

```
class Foo(object):
  def __init__(self, required_param_1, *args, **kwargs):
    super(Foo, self).__init__(*args, **kwargs)
    self.required_param = required_param_1
    self.some_named_optional_param = kwargs.pop('named_optional_param', None)

  def some_other_method(self):
    raise NotImplementedException

class Bar(Foo):
  def some_other_method(self):
    print('Do some magic')

Bar(42) # no error
Bar(42, named_optional_param={'xyz': 123}) # raises TypeError: object.__init__() takes no parameters 
```

所以要解决这个问题，我只需要改变我在 Foo.__init__ 方法中做事的顺序；例如：

```
class Foo(object):
  def __init__(self, required_param_1, *args, **kwargs):
    self.some_named_optional_param = kwargs.pop('named_optional_param', None)
    # call super only AFTER poping the kwargs
    super(Foo, self).__init__(*args, **kwargs)
    self.required_param = required_param_1 
```

# playframework-2.0 - Play 2.0.1：当我想使用它时的模块问题

> ID：11179010
> 
> 赞同：0
> 
> 时间：2012-06-24T16:14:24.253
> 
> 标签：playframework-2.0

我想将身份验证和授权模块用于播放 2.0。我按照这些说明 [安装它](https://github.com/t2v/play20-auth/blob/master/README.md)。

但是当我启动我的应用程序时，我遇到了这个错误：

```
not found: type AuthConfig 
```

所以我不知道错误是在我的配置中还是在模块中。当我必须寻求解决此错误时，您有什么想法吗？

谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T20:34:38.060

好的，经过更多研究，我找到了解决这个问题的方法 感谢[这个问题](https://stackoverflow.com/questions/9701866/unresolved-dependencies-when-building-play-2-0-project)

我删除 jp.t2v 的存储库并编译！

现在我在这个插件上有一个运行时错误，但这是另一个问题。

# android - 使用 Android/iPhone 在 Google App Engine 上处理会话

> ID：11179014
> 
> 赞同：15
> 
> 时间：2012-06-24T16:14:35.860
> 
> 标签：android, iphone, python, google-app-engine

我开始编写一个应用程序，移动应用程序（Android/IPhone）将通过一系列使用 JSON 的 Web API 调用与 GAE 后端（Python）进行通信。

我无法使用 Google 帐户进行身份验证，因此我需要实现自己的身份验证。我知道如何做到这一点，但我不确定是否有更好的方法。

任何人都可以提供一些关于如何实现以下目标的代码示例/建议吗？

**方法**

1.  移动应用程序调用服务器上的登录方法，该方法验证并在商店中创建会话密钥并将其返回给应用程序 -*不确定如何生成密钥/会话或它应该在请求/响应中的位置。*
2.  在每次调用时，应用程序都会将此密钥传递给服务器以进行身份​​验证，并在通过时允许该操作。
3.  除非用户明确注销或丢失密钥，否则用户不必再次登录移动设备。

**登录方法 - 无需生成密钥**

```
class Login(webapp.RequestHandler):
def post(self):
    args = json.loads(self.request.body)
    email = args['e']
    pwd = args['p']
    ret = {}
    user = User.gql('WHERE email = :1', email).get()
    if user and helpers.check_password(pwd, user.password):
        ret['ret_code'] = 0
        ret['dn'] = user.display_name
    else:
        ret['ret_code'] = 1

    self.response.headers['Content-Type'] = 'application/json'
    self.response.out.write(json.dumps(ret)) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T06:55:04.537

我认为您应该使用 webapp2 提供的功能来实现您的自定义注册。

```
from webapp2_extras import auth
from google.appengine.api import users

class RegisterHandler(webapp2.RequestHandler):
    def post(self):
        email=self.request.POST['email']
        password=self.request.POST['password']

        #Let webapp2 handle register and manage session
        user = auth.get_auth().store.user_model.create_user('own:'+str(email), password_raw=password,email=email)
        #user (True, User(key=Key('User', 80001), auth_ids=[u'own:useremail@mail.com'],email='useremail@mail.com',password=u'hashed_password',...))

        if not user[0]: #user is a tuple
            self.response.write(user[1]) # Error message
        else:
            #You can extend your User Model e.g UserProfile(User): or have a UserProperty in your profile model as the example.  
            profile=UserProfile(user=users.User(user[1].email)).put()

            self.response.write(str(profile.key()))
class LoginHandler(webapp2.RequestHandler): 

    def post(self):

        email = self.request.POST.get('email')
        email = self.request.POST.get('password')
        # Try to login user with password
        # Raises InvalidAuthIdError if user is not found
        # Raises InvalidPasswordError if provided password doesn't match with specified user
        try:
            auth.get_auth().get_user_by_password('own:'+email, password)
            #Return user_session with User id, 
        except InvalidPasswordError, InvalidAuthIdError:
            #Error 
```

您可以通过以下方式检查用户登录：

```
if auth.get_user_by_session():
    #Logged in      
else:
    #Not logged in 
```

在您的客户端应用程序（Android、IOS）上。您只需存储响应 cookie 并为每个子序列请求发送它。

祝你好运 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T10:15:50.080

尝试[gae-sessions](https://github.com/dound/gae-sessions)进行会话管理。它为您创建安全 cookie，并允许您轻松地将数据与每个用户相关联。只需为初始身份验证提供您自己的逻辑。

它是专门为 App Engine 构建的，非常受欢迎并且超级快速/可扩展。

[https://github.com/dound/gae-sessions](https://github.com/dound/gae-sessions)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-06T05:40:11.710

我看不出你为什么需要一个会话？App Engine 上的会话持久保存在数据存储中，因此如果您可以保持请求无状态，我鼓励您这样做。

由于您将拥有自己的用户服务来对用户进行身份验证，因此我建议您使用摘要式身份验证，因为请求中永远不会包含密钥。

有一些库为大多数客户端和服务器平台实现了 Digest。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-24T17:40:27.433

查看带有会话、身份验证和 JSON 的 webapp2 和 webapp2 extras

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-05T07:44:41.400

如果您不想明确使用 Sessions 等，您可以简单地使用 Datastore。试试这个：

1.  获取唯一的设备 ID/电子邮件以识别每个唯一用户。
2.  根据特定用户的请求，生成随机身份验证密钥，并将其存储到用户的电子邮件/设备 ID 以及可能的当前时间戳和登录标志。

所以你有了：

```
User email/id: someone@example.com
password: xxxxxxxxxx
Key : 2131231312313123123213
Timestamp: 20:00 12-02-2013
loggedIn : boolean value 
```

这可以是数据库模型。现在每当用户登录时：

*   **检查**电子邮件，密码组合。
*   如果有效，**生成随机密钥**，并使用新密钥**更新数据存储**
*   **用当前时间更新时间戳**，并将**loggedIn**设置为**True**
*   现在将密钥以 JSON 对象的形式返回给客户端（Android/iPhone）。

现在，在每个请求上，检查**接收到的密钥与数据存储区中的密钥**是否相符，以及是否将**loggedIn**标志设置为 true。如果两者都OK，则处理请求。

此外，在注销时：

*   只需将数据存储中的**loggedIn**标志设置为**False。**

希望这可以帮助 ：）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-19T22:24:17.867

有很多方法可以做到这一点。

1）当您检查用户登录详细信息时，您可以创建一个随机 UUID 或字符串，并将用户对象存储在内存缓存中，其中随机字符串作为键，用户对象作为值。然后返回随机字符串以及您的响应标头。在移动端解析响应时，获取此标头并将其存储在本地缓存中。在所有进一步的请求中，请继续在请求标头中将此密钥发送回，并在您的控制器中使用此密钥从 memcache 获取用户对象并继续。如果对象不在内存缓存中，您可以发回提示用户登录的响应。

2）如果您不想使用memcache，您可以在解析响应时将用户对象存储在会话中和客户端，从响应中获取会话ID。它通常是 JSESSIONID。然后存储它并用进一步的请求重新发送它。在控制器中，您可以检查当前会话是否具有用户对象，否则强制登录。

1）另一种方法是将用户的appengine密钥与响应一起返回并重新发送。

只是谷歌从响应中获取响应头。然后获取 SESSIONID/JSESSIONID 标头，存储并将具有相同名称和值的字段添加到所有进一步的请求标头中。那是最简单的方法。

我在 stackoverflow 上的第一个答案，没有代码示例，如果我知道 python，dangit。

# image-processing - CUDA 或 OpenCV 上的图像处理？

> ID：11179015
> 
> 赞同：7
> 
> 时间：2012-06-24T16:14:38.583
> 
> 标签：image-processing, opencv, cuda

我需要为我的项目开发一个图像处理程序，在该程序中我必须计算道路上的汽车数量。我正在使用 GPU 编程。我应该选择具有 GPU 处理功能的 OpenCV 程序，还是应该在没有任何 OpenCV 库的情况下在 CUDA 上开发整个程序？

我用来计算汽车数量的算法是背景减法、分割和边缘检测。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-24T16:21:27.923

您可以在 OpenCV 中使用 GPU 函数。

首先访问有关此的介绍：http: [//docs.opencv.org/modules/gpu/doc/introduction.html](http://docs.opencv.org/modules/gpu/doc/introduction.html)

其次，我认为上述过程已经在针对 GPU 优化的 OpenCV 中实现。因此使用 OpenCV 进行开发会容易得多。

Canny 边缘检测：[http ://docs.opencv.org/modules/gpu/doc/image_processing.html#gpu-canny](http://docs.opencv.org/modules/gpu/doc/image_processing.html#gpu-canny)

PerElement 操作（包括减法）：[http ://docs.opencv.org/modules/gpu/doc/per_element_operations.html#per-element-operations](http://docs.opencv.org/modules/gpu/doc/per_element_operations.html#per-element-operations)

有关其他功能，请访问 OpenCV 文档。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T07:42:51.073

毫无疑问，OpenCV 拥有最大的图像处理功能集合，最近他们也开始将功能移植到 CUDA。最新的 OpenCV 中有一个新的 GPU 模块，几乎没有移植到 CUDA 的功能。

话虽如此，OpenCV 并不是构建基于 CUDA 的应用程序的最佳选择，因为有许多专用的 CUDA 库（如[CUVI](http://cuvilib.com/) ）在性能方面[击败了 OpenCV](http://blog.cuvilib.com/2012/05/17/cuvi-is-faster-than-opencv-gpu/)。如果您正在寻找优化的解决方案，您也应该尝试一下。

# symfony - symfony2 本机查询为空，但 sql 查询有一个

> ID：11179016
> 
> 赞同：0
> 
> 时间：2012-06-24T16:14:50.247
> 
> 标签：symfony, doctrine-orm

有人知道为什么 nativequery 结果为空吗？

```
$rsm = new ResultSetMapping;
$rsm->addEntityResult('AcmeTestBundle:event', 'e');
$rsm->addFieldResult('e', 'id', 'id');

$query = $this->getEntityManager()->createNativeQuery('SELECT id FROM event WHERE publickey COLLATE latin1_general_cs = ?', $rsm);
$query->setParameter(1, $eventkey);

return $query->getSingleResult(); 
```

当我直接在 mysql 中运行查询时，我得到了正确的结果。这是从控制台创建的查询：

```
[2012-06-24 18:08:08] doctrine.DEBUG: SELECT id FROM event WHERE publickey COLLATE latin1_general_cs = ? (["key"]) [] [] 
```

我在另一个实体上使用相同的功能，我得到了正确的结果。有人有想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T16:32:36.360

您可能必须在 ResultSetMapping 中添加所有实体字段。

实际上，只有本我，教义不能水合你的对象。

# datetime - 将 DateTime 数据绑定到标签->文本将值转换为本地时间

> ID：11179022
> 
> 赞同：0
> 
> 时间：2012-06-24T16:15:20.127
> 
> 标签：datetime, data-binding, utc, localtime

我在 C++ .net 中工作。我有一个自定义控件，它显示一个数据库的内容，中间有一个绑定源。我使用控件中的标签通过具有以下代码的绑定源将文本属性绑定到数据集中的数据：

```
mycontrol->Controls[i]->DataBindings->Add((gcnew System::Windows::Forms::Binding(L"Text", 
this->bindingSourceRelRev_Data, mycolumn,true, System::Windows::Forms::DataSourceUpdateMode::OnValidation,
nullptr, L"t"))); 
```

请注意，代码是对所有控件进行迭代的循环的摘录，因此 control[i] 将是标签控件，变量 mycolumn 将是要绑定到的数据集的列. 除了我还没有找到改变方法的不需要的行为之外，它可以正常工作。该软件在世界各地运行，但记录必须是当地时间。数据库将本地时间中的时间存储为 DateTime 值，但 dataBinding 将其解释为 UTC，并在应用了时区差异的标签中显示时间。例如，如果数据是 24/06/2012 16:40，它将显示 24/06/2012 22:40 的 4 小时时差。我需要它只显示存储的值，而不需要更改。

我可以想到不同的方法，但不优雅：-捕获标签的文本更新事件并撤消更改...-将日期作为字符串存储在数据库中...-手动填充标签。 .. -...

如果我在没有格式化的情况下绑定，它不会改变值，但是我在标签上有原始日期时间字符串......

拜托，我在绑定中缺少任何魔法，以便它不会假设它必须更改时区？

非常感谢您！亚当

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T10:39:53.697

好吧，似乎问题实际上并不在于绑定，而在于数据集本身。列的属性 DateTimeMode 设置为 undefinedlocal，这是序列化数据输入并将其转换为查看数据的机器的本地时间。只是将属性更改为未定义，它现在可以按我的意愿工作，只需从未修改的数据中获取日期。

我对 DateTime 格式提供程序的文档感到困惑，该文档指出它序列化了日期。也许我误解了它......它实际上没有。

总之非常感谢！

# asp.net-mvc-3 - asp.net mvc 3 - 从日期中删除时间

> ID：11179027
> 
> 赞同：1
> 
> 时间：2012-06-24T16:15:42.133
> 
> 标签：asp.net-mvc-3, datetime, view

我有一个带有 DateTime 属性的模型：

```
 public DateTime? DateNaissance { get; set; } 
```

以及带有 @Html.TextBoxFor 属性的视图

```
@Html.TextBoxFor(model => model.DateNaissance) 
```

我想要的只是输入日期，但是，当我输入 01/06/2012 作为日期时，我在控制器中有“01/06/2012 00:00:00”

我想要的只是获取日期，为什么要添加时间？，如何自动删除它？

我试过没有成功：

```
[DisplayFormat(DataFormatString = "{0:dd/MM/yyyy}")] 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T16:27:13.663

您需要将`ApplyFormatInEditMode`属性的`DisplayFormat`属性设置为 true，然后使用`EditorFor`代替`TextboxFor`：

```
[DisplayFormat(DataFormatString = "{0:dd/MM/yyyy}", ApplyFormatInEditMode = true)]    

@Html.EditorFor(model => model.DateNaissance) 
```

### 更新

如果您需要为每个日期执行此操作，您还可以在 \Views\Shared\EditorTemplates\ 中放置一个名为 DateTime.cshtml 的文件，其中包含以下内容：

```
@model DateTime?
@Html.TextBox("", (Model.HasValue ? Model.Value.ToString("dd/MM/yyyy") : string.Empty)) 
```

当您使用`EditorFor`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T16:26:25.800

值得一提的是，您将**始终**获得时间，因为您的对象是 DateTime 类型。如果您只想使用日期，在您的控制器上，您只需要使用 DateNaissance.Date 获取日期部分，但同样，该对象将始终包含时间部分

# java - 从套接字读取数据的问题，Android 应用程序中的 UI 冻结

> ID：11179029
> 
> 赞同：0
> 
> 时间：2012-06-24T16:15:45.550
> 
> 标签：java, android

我目前正在开发一个需要从蓝牙套接字读取数据的 android 应用程序。我正在使用的代码如下：

```
runOnUiThread(new Runnable() {
    public void run()
    {
        try{
            ReadData();
    }catch(Exception ex){}
    }
});
public void ReadData() throws Exception{
    try {
        b1 = new StringBuilder();
        stream = socket.getInputStream();
        int intch;
        String output = null;
        String k2 = null;
        byte[] data = new byte[10];
        // read data from input stream if the end has not been reached
        while ((intch = stream.read()) != -1) {
            byte ch = (byte) intch;
            b1.append(ByteToHexString(ch) +"/");
            k++;
            if(k == 20) // break the loop and display the output
            {
                output = decoder.Decode(b1.toString());
                textView.setText(output);
                k=0;
                break;
            }
        }
        // close the input stream, reader and socket
        if (stream != null) {
            try {stream.close();} catch (Exception e) {}
            stream = null;
        }
        if (socket != null) {
            try {socket.close();} catch (Exception e) {}
            socket = null;
        }
    } catch (Exception e) {
    }
} 
```

但是，当我在 android 设备上运行应用程序时，UI 不会自动更新并且一直冻结。有谁知道如何解决 UI 冻结问题？我想在 UI 上动态显示数据，而不是在完成循环后显示数据。

感谢您提前提供任何帮助。

问候，

查尔斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T16:21:03.743

在`InputStream.read()`java上[说](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/InputStream.html#read%28%29)：

> 此方法阻塞，直到输入数据可用

您的 UI 正在阻塞，因为您正在从 UI 线程上的套接字读取。您肯定应该有另一个线程从套接字读取数据并将结果传递给 UI 以进行动态更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T16:36:24.440

您应该在非 UI 线程上运行 ReadData() 方法，然后一旦数据可用，就使用 runOnUIthread 机制在 UI 线程上运行 textView 的结果更新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T16:39:53.393

试试这个，

**这个怎么运作。**

`1\. When Android Application starts you are on the UI Thread. Doing any Process intensive` `work on this thread will make your UI unresponsive.`

`2\. Its always advice to keep UI work on UI Thread and Non-UI work on Non-UI Thread. But` `from HoneyComb version in android it became a law.`

**你的代码有什么问题。**

`1\. You are reading the data on the UI thread, making it wait to finish reading..` `here in this line...`**而 ((intch = stream.read()) != -1))。**

**如何解决：**

`1\. Use a separate Non-UI thread, and to put the value back to the UI thread use Handler.`

`2\. Use the Handler class. Handler creates a reference to the thread on which it was` `created. This will help you put the work done on the Non-UI thread back on the UI thread.`

`3\. Or use AsyncTask provided in android to Synchronize the UI and Non-UI work,which does` `work in a separate thread and post it on UI.`

# visual-studio-debugging - 无法在 VS2012 RC 中启动调试器

> ID：11179030
> 
> 赞同：20
> 
> 时间：2012-06-24T16:15:49.817
> 
> 标签：visual-studio-debugging, visual-studio-2012

配置：

*   视窗 7、64 位
*   Microsoft Visual Studio 专业版 2012 RC 版本 11.0.50522.1 RCREL
*   以管理员模式运行 VS
*   VS 解决方案包含一个 Web 应用程序，目标是：.NET Framework 4。

当我按 F5 时，解决方案构建......并且没有其他任何事情发生。

*   发生在 IIS 或 VS 开发服务器上。
*   发生在“任何 CPU”或“x86”的平台目标上

如果相反，我使用 Debug / Attach to Process... 菜单，几秒钟后，我得到：

*   “调试器正忙” - 调试器正在执行比预期更长的远程操作。此对话框一直存在，直到我单击“终止”并确认为止。
*   然后出现此对话框：“Microsoft Visual Studio”“无法连接到名为 [COMPUTER NAME] 的 Microsoft Visual Studio 远程调试监视器。与 Visual Studio 远程调试器的网络连接已关闭。”
*   单击确定后，“正常”“附加到进程”窗口终于出现了。其中，“可用进程”列表为空。

有什么建议或线索吗？

我想知道的要点：

*   为什么进程列表为空？如果调试器看不到任何进程，它就无法工作也就不足为奇了。
*   为什么它只是在访问本地计算机时尝试进行“远程”调试？

（交叉发布在[social.msdn](http://social.msdn.microsoft.com/Forums/en-US/vsdebug/thread/c8218a0c-6cca-4fb4-afcb-0ae97710a0a6)上）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T16:31:34.070

我在使用 VS 2010 项目的 VS 2012（不是 RC，而是最终版本）中遇到了同样的问题。它会构建得很好，但调试器不会启动。所以，我修改了解决方案文件：

将“Format Verion 11.00”更改为“Format Verion 12.00”并将“#Visual Studio 2010”更改为“#Visual Studio 2012”

在我的公司将其项目升级到 VS 2012 之前，这是目前的一种解决方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-29T16:23:04.277

我有一个类似的设置，我遵循了这里和 Microsoft Connect 上的所有建议——这些建议都不适合我。唯一有效的是将 x64 文件夹中的 MSVSMON.EXE 重命名为 MSVSMON.EXE.OLD 并从 x86 文件夹中复制文件。我不确定这样做是否有任何其他影响，但它似乎已经解决了我的问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-04T18:53:07.750

我最终通过删除 \Windows\Prefetch 文件夹中的 msvsmon*.* 条目解决了这个问题。这样做后，我可以正常调试。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-07-10T11:48:17.367

最终，VS2012 的修复为我解决了这个问题。我遵循了在您的[social.msdn 交叉帖子](http://social.msdn.microsoft.com/Forums/en-US/vsdebug/thread/c8218a0c-6cca-4fb4-afcb-0ae97710a0a6)中找到的建议，没有任何解决方案（Devenv.exe /SafeMode /ResetSettings /ResetSkipPkgs 和 /Setup）。和你一样，我的解决方案（VS 2010 SP1）也有一个 Web 应用程序（针对 .NET 3.5），并且启动项目设置为一个 winforms 应用程序。ASP.NET 开发服务器没有启动，我尝试调试的应用程序也没有启动。

请注意，此问题也已通过[此链接](https://connect.microsoft.com/VisualStudio/feedback/details/752087/cant-start-debugger-in-vs2012-rc)（由您？）发布到 Connect。如果其他人发现此问题，Connect 人员要求运行 Microsoft Visual Studio 2012 反馈工具来收集数据。当我在发现 Connect 问题之前开始修复过程时，我没有也无法通过日志记录向 MS 提供反馈。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-01T17:17:36.367

同时运行 Visual Studio 2010 和 Visual Studio 2012 时遇到类似问题。关闭 Visual Studio 2010 允许调试器开始在 Visual Studio 2012 中工作。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-18T16:29:58.800

如果您使用新的 VS 2012 版本打开 VS 2010 项目，则可能是您的 bin 和 obj 文件夹导致问题，删除它们为我解决了问题。或者您可以清理您的解决方案，但我更喜欢手动删除。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-28T11:53:20.220

我遇到了同样的问题 - 启动调试器只是告诉我它在构建方面做得多么好，并决定这已经足够了。

我担心最坏的情况，但幸运的是，重新启动解决了这个问题。

我知道这是一个非常无用的帖子，就为任何遭受此问题困扰的人提供帮助而言，但我认为值得注意的一点是它表明 a) 另一个有同样问题的人，所以请修复它 MS，并且b）*有时*重新启动会修复它，所以也许这会告诉维护者一些事情。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-05-03T10:57:20.443

我刚刚关闭并重新打开了 VS。这似乎解决了我的问题

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-02-26T16:07:13.823

对于 C++ 应用程序有这个问题。查看 ProcMon 中的 devenv.exe 事件，我发现它试图加载 Visual Assist 配置文件，我在磁盘清理热心中意外删除了该文件。删除然后安装扩展程序再次为我修复了它。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-12-06T22:49:22.850

> 只需将所有 dte*.olb 文件从 C:\Program Files (X86)\Common Files\Microsoft Shared\MSEnv 复制到 C:\Program Files X86\Microsoft Visual Studio 9.0\Common7\IDE。

来自[https://mycodepad.wordpress.com/2013/12/07/visual-studio-2012-4-run-as-administrator-the-application-cannot-start-error/](https://mycodepad.wordpress.com/2013/12/07/visual-studio-2012-4-run-as-administrator-the-application-cannot-start-error/)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-08-18T00:45:29.770

在另一台电脑上，用Visual Studio 2012的RTM，打开一个老项目，发现无法按F5启动应用程序。似乎发生的一切只是窗口底部边缘状态栏中的一条消息：“该项目不支持预览”。

这个解决方案有两个项目，正确的一个在解决方案资源管理器中**加粗**，大概表示它是启动项目。

但是，在选择项目并在上下文菜单中选择“设置为启动项目”后，我就可以使用 F5 来运行和调试它。

事实证明，“此项目不支持预览”与问题无关，而是在解决方案资源管理器中刚刚选择的项目不支持预览时显示在状态栏上的消息。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-10-14T13:36:27.813

对于它的价值，我发现当我的主机文件中缺少条目时收到此错误消息。我正在使用本地域别名，而我试图调试的那个不在主机中。添加缺少的条目为我解决了这个问题。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2014-01-01T12:37:46.313

只是我的两分钱，

我现在已经遇到过两次这个问题，在我尝试了所有建议之后，我的本地机器上的 BitDefender 正在这样做。所以我对这个问题的解决方法是尝试将本地安全软件的例外添加到防火墙和它的 AV 部分。告诉它完全忽略 msvsmon.exe 和 devenv.exe，看看有什么不同。

否则，请尝试完全撕掉它，看看它是否可以让您调试您的解决方案。

您可以在此处查看更多信息： http: [//forum.bitdefender.com/index.php?showtopic=37028](http://forum.bitdefender.com/index.php?showtopic=37028)

我安装了最新的 BitDefender 版本，一切都很好。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2014-02-19T21:11:10.467

我个人遇到过一些类似的**问题**：Visual Studio 2010 没有开始调试而是卡住了。

当我单击 VS 时，它显示了一个“等一下”或“切换到”消息框，这对我没有帮助。

使用任务管理器，我可以杀死 *.vshost.exe 进程，该进程使 VS 恢复生机，但中止了调试。在没有调试的情况下启动程序会立即启动应用程序。

**解决方案**：

禁用代码目录的索引服务！停用索引服务或取消选中索引服务控制面板中的文件夹。

* * *

## 回答 #15

> 赞同：-2
> 
> 时间：2013-05-07T15:23:18.027

我通过从启动项目属性->调试 - 启用调试器选项中选中“启用 Visual Studio 托管进程”选项来解决相同的问题

* * *

## 回答 #16

> 赞同：-3
> 
> 时间：2012-12-07T23:05:59.760

要解决这个问题，您只需执行“**项目**>**设置为启动项目**”，然后按**F5**或**调试**按钮，它**就会**工作！！！

# java - 使用 Netty 或其他轻量级 NIO 库的请求-响应

> ID：11179031
> 
> 赞同：2
> 
> 时间：2012-06-24T16:15:58.460
> 
> 标签：java, networking, io, netty

我正在开发一个需要通过网络在两个多线程应用程序之间进行快速通信的系统。从语义上讲，一个应用程序是一个客户端，它不断地对另一个应用程序（服务器）进行 RMI 调用。由于性能原因，我怀疑像 Netty 这样的轻量级库比像 Tomcat/HTTPClient 这样的重量级方法更适合这项任务。然而，Netty 本质上是异步的，似乎很难在其之上正确实现 RMI 或请求-响应调用。

有没有办法进行请求-响应调用，同时利用高 Netty 性能而不开发容易出错的定制？是否有更适合此任务的 Netty 替代品？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T16:27:10.433

恐怕不熟悉 Netty，但我使用[JBoss Remoting](http://www.jboss.org/jbossremoting)来完成这项任务——它支持多种协议
。你也可以[在这里](http://docs.jboss.org/jbossremoting/docs/guide/2.5/html/chapter-adding-new-transport.html)查看 JBoss remoting 和 nio

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T16:38:33.970

您可以使用嵌入式 GlassFish 服务器和 EJB，它们隐藏了许多低级 RMI 细节。

# jquery-ui - 这在 jQuery 日期选择器中可行吗？

> ID：11179039
> 
> 赞同：0
> 
> 时间：2012-06-24T16:16:25.067
> 
> 标签：jquery-ui

这在 jQuery 日期选择器中是否可行：

一个内联日期选择器，我可以使用下一个和上一个按钮在月份之间循环，但选择特定日期被禁用。

如果是这样，请提出解决方案。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T16:31:00.360

是的，您应该调用 datepicker 的一些选项和方法。看看以下功能：

[jquery ui datepicker](http://jqueryui.com/demos/datepicker/)并搜索：

*   选项：dateFormat（指定您的格式）
*   选项：minDate 和 maxDate 指定小部件的行为。例如，您可以禁用比现在更早的日期

还要看看事件中的钩子：

*   beforeShow 或 onSelect。

为了避免显示选择器的 Days 部分，您可以设置

```
table.ui-datepicker-calendar { display: none;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T17:01:58.057

> 选择特定日期被禁用。

当你只需要让它看起来和其他日子一样时，禁用它有什么意义？我认为您可以在任何 jQuery datePicker 上执行此操作，即使没有此禁用选择选项，只需更改一点 CSS：

```
td.selected, td.selected:hover, td.nonselected:hover {
  cursor: default;
  background: grey; /* use your datepicker background color */
} 
```

# c++ - 套接字选择中死锁的可能原因

> ID：11179040
> 
> 赞同：4
> 
> 时间：2012-06-24T16:16:29.520
> 
> 标签：c++, linux, select, deadlock, gloox

我有一个 Jabber 服务器应用程序和另一个 C++ 中的 Jabber 客户端应用程序。

当客户端接收和发送大量消息（每秒超过 20 条）时，选择就会冻结并且永远不会返回。

使用 netstat，套接字仍然在 linux 上连接，使用 tcpdump，消息仍然发送到客户端，但选择永远不会返回。

这是选择的代码：

```
bool ConnectionTCPBase::dataAvailable( int timeout )
  {
    if( m_socket < 0 )
      return true; // let recv() catch the closed fd

    fd_set fds;
    struct timeval tv;

    FD_ZERO( &fds );
    // the following causes a C4127 warning in VC++ Express 2008 and possibly other versions.
    // however, the reason for the warning can't be fixed in gloox.
    FD_SET( m_socket, &fds );

    tv.tv_sec = timeout / 1000000;
    tv.tv_usec = timeout % 1000000;

    return ( ( select( m_socket + 1, &fds, 0, 0, timeout == -1 ? 0 : &tv ) > 0 )
             && FD_ISSET( m_socket, &fds ) != 0 );
  } 
```

死锁是gdb：

```
Thread 2 (Thread 0x7fe226ac2700 (LWP 10774)):
#0  0x00007fe224711ff3 in select () at ../sysdeps/unix/syscall-template.S:82
#1  0x00000000004706a9 in gloox::ConnectionTCPBase::dataAvailable (this=0xcaeb60, timeout=<value optimized out>) at connectiontcpbase.cpp:103
#2  0x000000000046c4cb in gloox::ConnectionTCPClient::recv (this=0xcaeb60, timeout=10) at connectiontcpclient.cpp:131
#3  0x0000000000471476 in gloox::ConnectionTLS::recv (this=0xd1a950, timeout=648813712) at connectiontls.cpp:89
#4  0x00000000004324cc in glooxd::C2S::recv (this=0xc5d120, timeout=10) at c2s.cpp:124
#5  0x0000000000435ced in glooxd::C2S::run (this=0xc5d120) at c2s.cpp:75
#6  0x000000000042d789 in CNetwork::run (this=0xc56df0) at src/Network.cpp:343
#7  0x000000000043115f in threading::ThreadManager::threadWorker (data=0xc56e10) at src/ThreadManager.cpp:15
#8  0x00007fe2249bc9ca in start_thread (arg=<value optimized out>) at pthread_create.c:300
#9  0x00007fe22471970d in clone () at ../sysdeps/unix/sysv/linux/x86_64/clone.S:112
#10 0x0000000000000000 in ?? () 
```

即使我们仍在向他发送消息，您知道什么会导致选择停止接收消息。通过套接字接收和发送大量消息时，linux中是否有任何缓冲区限制？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T20:18:20.770

有几种可能性。

**超过`FD_SETSIZE`**

您的代码正在检查负文件描述符，但不检查是否超过上限`FD_SETSIZE`（通常为 1024）。每当发生这种情况时，您的代码就是

*   破坏自己的堆栈
*   呈现一个空`fd_set`的`select`将导致挂起

假设您*不需要*这么多同时打开的文件描述符，解决方案可能包括找到删除文件描述符泄漏，特别是处理关闭废弃描述符的堆栈代码。

您的代码中有一条可疑注释表明可能存在泄漏：

```
// let recv() catch the closed fd 
```

如果这个注释意味着有人设置`m_socket`为 -1 并希望 a`recv`将捕获关闭的套接字并关闭它，谁知道呢，也许我们正在关闭 -1 而不是真正的关闭的套接字。（请注意在网络级别关闭和在文件描述符级别关闭之间的区别，这需要单独`close`调用。）

这也可以通过移动到来处理，`poll`但操作系统施加的其他一些限制使这条路线非常具有挑战性。

**带外数据**

您说服务器正在“发送”数据。如果这意味着数据是使用`send`调用（而不是`write`调用）发送的，请使用`strace`来确定发送标志参数。如果`MSG_OOB`使用标志，则数据将作为带外数据到达 - 在您将副本作为另一个参数`select`传递之前，您的调用不会注意到这些数据。`fds`

```
fd_set fds_copy = fds;
select( m_socket + 1, &fds, 0, &fds_copy, timeout == -1 ? 0 : &tv ) 
```

**进程饥饿**

如果盒子严重过载，则服务器正在执行而没有任何阻塞调用，并且具有实时优先级（用于`top`检查） - 而客户端不是 - 客户端可能会饿死。

**暂停进程**

理论上，客户端可能会以`SIGSTOP`. 您可能会知道是否是这种情况，按下某处`ctrl-Z`或有某个特定进程对客户端进行控制，而不是您自己启动它。

# ios - 如何在 ios 的设置包中获取关于屏幕的信息？

> ID：11179042
> 
> 赞同：1
> 
> 时间：2012-06-24T16:16:36.100
> 
> 标签：ios, settings.bundle

我有一个简单的问题，虽然我不确定它是否可行：

如何在 iOS 中的 settings.bundle 中添加“关于”页面？

我以前看过它。只需查看 facebook 应用程序设置。当你点击“关于”时，你会得到一整页的文字。

这是怎么做到的？

他们可能依赖内部 API 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T16:31:43.020

它被称为“子窗格”-来自[Apple 文档](http://developer.apple.com/library/ios/DOCUMENTATION/Cocoa/Conceptual/UserDefaults/Preferences/Preferences.html#//apple_ref/doc/uid/10000059i-CH6-SW4)；

“子窗格类型允许用户导航到新的首选项页面。您使用此类型来实现分层首选项。有关如何配置和使用此首选项类型的更多信息，请参阅“分层首选项”。此类型的键是 PSChildPaneSpecifier。"

# php - 更新 div 值 - JQuery Toastmessage-plugin

> ID：11179046
> 
> 赞同：0
> 
> 时间：2012-06-24T16:17:34.223
> 
> 标签：php, jquery

我有一个 php 页面，它重定向（如果成功）到另一个 php 页面，如下所示：

```
header('Location: completed.php?message=Successful operation. Data inserted for user: ' . $login->get_username() . ' . See home page for infos.'); 
```

现在在 completed.php 我有一个 div 来回显收到的消息：

```
<div id="msg">
<?php echo $_GET['message']; ?>
</div> 
```

我正在使用“Toastmessage-plugin”：[在这里..](http://akquinet.github.com/jquery-toastmessage-plugin/)，但我无法在 Toastmessage 的文本中显示 $_GET .. 我正在使用此代码：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script src="js/jquery.toastmessage.js" type="text/javascript"></script>
<link href="styles/jquery.toastmessage.css" rel="stylesheet" type="text/css" />

...

<script type="text/javascript">
function showStickyNoticeToast() {
        $().toastmessage('showToast', {
            text: $('#msg').val(),
            sticky: true,
            position: 'bottom-left',
            type: 'notice',
            closeText: '',
            close: function () { console.log("toast is closed ..."); }
        });
    }
</script> 
```

我搜索了很多，也搜索了 DOM 事件和其他事件，但我不知道采取什么步骤......也许当 JQ 函数加载时 div 'msg' 还没有收到 GET 数据......？那么我如何更新他的价值？

我读过的页面： [这个](https://stackoverflow.com/questions/4950199/jquery-how-can-i-detect-if-the-html-has-changed-within-a-given-element)和[这个](https://stackoverflow.com/questions/628508/how-to-update-div-when-on-select-change-in-jquery)。我也尝试过使用ajax，但我对该语言的经验较少。

请帮助... :) 谢谢

编辑@charlietfl

Ajax：我已经做了很多尝试......我再也找不到代码了！基本上我用这个代码调用一个php文件（把它当作伪代码）：

```
<script type="text/javascript>
<!--
$('#choose').change(function(event) {
    $.get('messages.php', { selected: $('#msg').val() },
        function(data) {
            $('#update').html(data);   // other div wher store data
        }
    );            
}); 
</script> 
```

……

```
<?php

$alfa = isset($_GET['message']) ? $_GET['message'] : 'nothing';
echo $alfa;
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T16:20:07.030

尝试通过以下方式传递消息`urlencode()`：

```
$msg = "Successful operation etc. etc.";
header("Location: completed.php?message="+urlencode($msg)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T16:44:23.757

明白了：您使用`$("#msg").val()`但`DIV`标签没有“价值”。

使用`$("#msg").text()`（用于纯文本）

或者`$("#msg").html()`

在代码中还包含一些 HTML（很确定您需要第一个选项）。

`.val()`仅与“有价值”标签一起使用`<input>`（也适用于`<textarea>`）。

另见：[http ://api.jquery.com/val/](http://api.jquery.com/val/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-24T16:49:55.573

您的问题可能是您试图在 ajax 完成之前调用消息插件，因为 ajax 中的第一个“A”代表异步。

为了允许 ajax 完成所需的时间，您需要在 ajax 的成功回调中调用您的消息插件。

向函数添加`message`参数

```
function showStickyNoticeToast( message ) {
        $().toastmessage('showToast', {
            text: message,
            sticky: true,
            position: 'bottom-left',
            type: 'notice',
            closeText: '',
            close: function () { console.log("toast is closed ..."); }
        });
    }

$.post( url , dataToserver, function(data){         
      showStickyNoticeToast( $(data).text())
      $('#update').html(data); 

}) 
```

# objective-c - Objective C - 带数字的数组

> ID：11179051
> 
> 赞同：5
> 
> 时间：2012-06-24T16:18:10.453
> 
> 标签：objective-c, arrays, int

有没有比我使用的更好的方法来用数字填充数组？我写了多少只是为了用数字填充一个数组，这样它们就可以用于循环中的计算，这太疯狂了。这在其他基于 C 的语言（如 PHP、As3 或 Java）中更容易。

```
NSArray *myArray = [NSArray arrayWithObjects:  
                    [NSNumber numberWithInt:1000],[NSNumber numberWithInt:237], [NSNumber numberWithInt:2673], nil];

int total = 0;
for(int i = 0; i < [myArray count]; i += 1 ){
    total += [[myArray objectAtIndex: i]intValue];
    NSLog(@"%i", total);
} 
```

希望有更短的方法......我只想用整数填充一个数组......不可能那么难

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-24T16:23:27.377

我猜您必须将 NSNumber 用于 NSArray。如果你想使用整数，我想你必须使用 ac 数组：

```
NSInteger myArray[20];

for (int i=0;i<20;i++) {
  int num=myArray[i];

  //do something
 } 
```

NSNumber 虽然是我猜这种语言的更好方法。至少您可以进行快速枚举以稍微缩短代码：

```
for (NSNumber *n in myArray) {
 int num = [n intValue];

 //do something....

} 
```

* * *

**编辑：**

这个问题是3年前提出的。已经建立了新的文字来更容易创建像 NSNumbers 或 NSArrays 这样的对象：

```
NSNumber *n = @100; 
```

或者

```
NSArray *array = @[@100,@50,@10]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T16:39:57.560

循环特定整数的不错的简短替代方法：

```
NSArray *numbers = [@"1000,237,2673" componentsSeparatedByString:@","];
for (NSString *i in numbers) {
    [i intValue]; // Do something.
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T19:54:26.953

首先从一个 C 数组开始：

```
NSInteger myCArray = { 1000, 237, 2673 };
// calculate number of elements
NSUInteger myCArrayLength = sizeof(myCArray) / sizeof(NSInteger; 
```

其次，*如果*您需要`NSArray`遍历此数组并创建一个循环：

```
NSMutableArray *myNSArray = [NSMutableArray arrayWithCapacity:myCArrayLength];
for(NSUInteger ix = 0; ix < myCArrayLength; ix++)
   [myNSArray addObject:[NSNumber numberWithInteger:myCArray[ix]]; 
```

`NSArray`如果您经常这样做，您可以将第二段代码包装为一个类别。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-29T05:30:18.337

太晚了。但您也可以执行以下操作。

```
int total = 0;
nsarray *myArray = @[@1.8,@100,@299.8]; 
for(nsnumber *num in myArray){
 total+=num;
} 
```

# php - mod_rewrite：使用请求参数的多级 URL

> ID：11179054
> 
> 赞同：1
> 
> 时间：2012-06-24T16:18:48.987
> 
> 标签：php, .htaccess, mod-rewrite, vanity-url

我目前在用户文件夹中进行了此设置并且工作正常。

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?i=$1 
```

例如 127.0.0.1/site/users/admin 转到 127.0.0.1/site/users/index.php?i=admin

现在这是个人资料页面，我将如何做这样的事情。

用户/管理员/活动

这样它就会显示该用户的活动页面？我完全不知道该怎么做。

最好让 index.php 接受页面 $_GET 变量吗？但是我将如何让 htaccess 解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T16:50:05.483

您的规则将如下所示：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/]+)/(.*)$ index.php?i=$1&page=$2  [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?i=$1  [L] 
```

现在你的 index.php 应该得到 2 个`$_GET`变量，`i`并且`page`.

# sql - SQL，如何在A列中找到<当前行B列中的时间的最大时间

> ID：11179059
> 
> 赞同：1
> 
> 时间：2012-06-24T16:19:28.433
> 
> 标签：sql, time, comparison, max

我在为我认为直截了当的问题寻找解决方案时遇到了问题。这是我正在尝试做的一个例子。

```
TABLE A  
time  |  state  
10:00 |   up  
10:09 |  down  
10:12 |   up  

TABLE B  
time  |  data  
10:05 |  abc  
10:07 |  def  
10:11 |  ghi 
```

我想加入表 A 和 B 维护 B 中的所有数据，例如

```
SELECT tableB.time, tableB.data, tableA.status  
INTO my_results  
FROM tableB  
LEFT JOIN tableA  
WHERE tableB.time > (MAX(tableA.time) < tableB.time) 
```

所以 my_results 表如下所示：

```
TABLE my_results  
time  |  data  | state  
10:05 |  abc   |  up  
10:07 |  def   |  up  
10:11 |  ghi   | down 
```

表 A 结构

源、varchar
目标、varchar
时间、日期时间
状态、varchar

表 B 结构
tstamp、日期时间
源、varchar
目标、varchar

这是相关信息。希望这会有所帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T16:22:38.727

这是 SQL Server 的解决方案：

```
select  b.time
,       b.data
,       a.state
from    B
outer apply
        (
        select  top 1 *
        from    A
        where   A.time < B.time
        order by
                A.time desc
        ) as A 
```

[SQL Fiddle 上的实时示例。](http://sqlfiddle.com/#!3/14ca7/2/0)

# zeromq - 正确的 ZeroMQ 拓扑

> ID：11179061
> 
> 赞同：3
> 
> 时间：2012-06-24T16:19:40.033
> 
> 标签：zeromq

我需要编写一个订单管理器，将客户（股票、外汇等）订单路由到适当的交易所。客户想要发送订单，但对 FIX 或其他专有协议一无所知，只知道用于发送订单的内部（标准化）格式。我有每个通过 FIX/Binary/etc 连接到每个 FIX/etc 提供程序的应用程序（服务器）。我希望在客户端和服务器之间有一个代理程序，该程序采用规范化订单并将其转换为给定 FIX/etc 提供程序的正确格式，并从服务器获取消息并将其转换回客户端的规范化格式. 客户端可以指定路由，但由客户端和服务器之间的代理程序负责在客户端和服务器之间来回传递有关该订单的消息。所以不知何故输出[填充，

我研究了 ZMQ 拓扑，并且 REQ->ROUTER->DEALER 不起作用[代码起作用-我的意思是它是错误的拓扑]，因为服务器并不相同。

```
//This topology doesn't work because the servers are not identical
#include "zhelpers.hpp"

int main (int argc, char *argv[])
{
    // Prepare our context and sockets
    zmq::context_t context(1);
    zmq::socket_t frontend (context, ZMQ_ROUTER);
    zmq::socket_t backend (context, ZMQ_DEALER); // ZMQ_ROUTER here? Can't get it to work

    frontend.bind("tcp://*:5559");
    backend.bind("tcp://*:5560");

    // Start built-in device
    zmq::device (ZMQ_QUEUE, frontend, backend);

    return 0;
} 
```

我认为也许 ROUTER->ROUTER 拓扑是正确的，但我无法让代码工作 - 客户端发送订单但从未收到回复，所以我一定做错了什么。我认为使用 ZMQ_IDENTITY 是正确的做法，但我不仅不能让它工作，而且似乎 ZMQ 正在远离 ZMQ_IDENTITY？

有人可以举一个简单的例子，说明三个 ZMQ 程序 [不在单独的线程，三个单独的进程中]，它们显示了正确的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-03T05:57:16.827

查看指南中的 MajorDomo 示例：http://zguide.zeromq.org/page:all# [toc71](http://zguide.zeromq.org/page:all#toc71)

您将在每个交易所使用一个工作池。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T17:54:26.027

响应：

> ROUTER->ROUTER 拓扑是正确的，但我无法让代码工作

我的理解是 ZMQ 套接字成对出现以启用某种模式。

1.  一对
2.  请求/代表
3.  发布/订阅
4.  推拉

只有 PAIR 套接字类型可以与另一个 PAIR 类型的套接字对话，并且其行为类似于您的普通套接字。

对于所有其他套接字类型，有一个用于通信的免费套接字类型。例如 REQ 套接字类型只能与 REP 套接字类型对话。REQ 套接字类型不能与 REQ 套接字类型对话。

我的理解是，在 ROUTER/DEALER 中，ROUTER 可以与 DEALER 通信，但 ROUTER 不能与 ROUTER 套接字类型通信。

我的理解可能是错误的，但从这些例子来看，这是我迄今为止所理解的。

# c# - 使用未分配的局部变量

> ID：11179065
> 
> 赞同：0
> 
> 时间：2012-06-24T16:20:22.637
> 
> 标签：c#

我遇到了一个错误。尽管声明了变量（故障文本和用户名）错误仍然出现。谁能帮帮我吗？

```
- Use of Unassigned local variable "FailureText" 
- Use of Unassigned local variable "UserName"

protected void Login1_LoginError(object sender, System.EventArgs e)
{
    TextBox FailureText;
    TextBox UserName; 

    //There was a problem logging in the user
    //See if this user exists in the database
    MembershipUser userInfo = Membership.GetUser(UserName.Text); // errors appear here
    if (userInfo == null)
    {
        //The user entered an invalid username...
        //error appear here ( failuretext.text) 
        FailureText.Text = "There is no user in the database with the username " + UserName.Text;  
    } 
```

谢谢 （：

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T16:28:38.280

您已经声明了变量，但在尝试引用它们的属性之前，您还没有为它们分配任何东西。这就是消息的由来。但是，您遇到了更大的问题，因为它们代表 UI 控件，并且它们极不可能是函数中的局部变量。它们可能应该属于页面（或表单）而不是在本地声明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T16:29:34.693

关于编译器消息 - 看看这个[链接](http://msdn.microsoft.com/en-us/library/4y7h161d%28v=vs.80%29.aspx)

```
 TextBox FailureText; - you declared a variable, but it is not initialized. you might set it to null / a value / default() - but you must initialize it
 TextBox UserName; - the same 
```

当您调用 UserName.Text - 编译器警告未初始化的`UserName`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T17:03:53.223

如果您希望保持与目前相同的约定，那么要解决编译失败的问题，您需要先为这两个变量分配一个空值，然后再尝试引用它们。

像这样：

```
TextBox FailureText = null;
TextBox UserName = null; 
```

如果这样做，您可能需要在尝试分配这些对象的属性时检查它们是否仍然为空。

正如上面的人所说，您不应该这样做，因为 UI 控件应该始终对表单本身是全局的。

# iphone - 每秒向服务器发送验证请求（重复任务）

> ID：11179067
> 
> 赞同：3
> 
> 时间：2012-06-24T16:20:37.683
> 
> 标签：iphone, http, servlets, oc4j, oas

我有一些被移动应用程序调用的服务。

移动应用程序需要与服务器保持同步。

因此，每次`1 second`我检查服务器是否有任何其他数据，如果发现我从服务器获取数据（重复任务）。

每秒发送一个 HTTP 请求有什么问题吗（大多数时候响应很小，只是为了告诉客户端没有找到数据）？

我`Oracle App server`用于服务器和`iPhone`客户端。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T16:27:08.713

它可能会消耗您客户端的电池，并在您的服务器上产生大量负载。

您可以尝试使用[commet 长轮询方法](http://en.wikipedia.org/wiki/Comet_%28programming%29)或更新的（但尚未得到很好的支持）[WebSockets](http://en.wikipedia.org/wiki/WebSocket)。

# raphael - raphael js绘制用户请求的多条线

> ID：11179073
> 
> 赞同：0
> 
> 时间：2012-06-24T16:21:28.760
> 
> 标签：raphael

我以下列方式使用 raphael js 根据用户输入创建多个圆形或矩形：

```
var xx =parseFloat(document.getElementById("Fem").value);
for(var i = 0; i < xx; i+=1) { 

paper.circle(10 + (20*i) , 20  , 5).attr("fill","#FF2");
    } 
var xy =parseFloat(document.getElementById("Male").value);
for(var i = 0; i < xy; i+=1) { 
paper.rect(35 + (20*i), 15 ,10 , 10 ).attr("fill","#FF2");
//paper.path("M 15 +(20*i) , 420 ,l  0 , -40 z"); 
        } 
```

这或多或少地完成了我想要的工作，但我希望在迭代运行时从每个形状的顶部有一条垂直线。paper.path 不起作用。有人请帮忙。我第一次使用这个

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T04:34:47.723

我不完全确定你想要实现什么，但你必须在引号之外进行算术运算......

```
paper.path("M " + (15 + (20*i)) + ", 15 L  0 , -40 z"); 
```

这显示了线条，然后您可以四处玩耍以将它们带到您想要的位置。

# android - 如何让 osmdroid 出现在 Android 4+ 的 Fragment 中

> ID：11179074
> 
> 赞同：2
> 
> 时间：2012-06-24T16:21:34.103
> 
> 标签：android, fragment, android-4.0-ice-cream-sandwich, osmdroid, openstreetmap

我正在尝试构建一个本机为 Android API 15 (4.0.3) 的应用程序，该应用程序具有 ActionBar 选项卡式 UI 和 ViewFlipper 以在选项卡之间切换。我想不通的是如何在片段中加载 OpenStreetMaps (osmdroid)。

有什么方法可以在没有任何 TabHost 或兼容性库黑客的情况下做到这一点？代码示例将有很大帮助，我一直在尝试解决这个问题，但在 Google 上没有任何运气。谢谢！

# html - 带有多行列表项的水平列表（ul）？

> ID：11179075
> 
> 赞同：0
> 
> 时间：2012-06-24T16:21:45.927
> 
> 标签：html, css, html-lists

我有一个水平列表（用于导航栏），我希望单个列表项是多行的。我尝试使用 a`<br />`但这会导致整个列表跳过一行

这是我为 html 得到的：

```
<ul class="nav_list">
        <li><a href="#">Home<a></li>
        <li><a href="#">Bar/Bat Mitzvah<br />Tutoring<a></li>
        <li><a href="#">Early <br />Childhood<a></li>
        <li><a href="#">Home<a></li>
        <li><a href="#">Home<a></li>

</ul> 
```

和CSS：

```
.nav_list {
    float:right;
    height:30px;
    margin-top:55px;
    width:510px;
}

.nav_list li {
    display:inline;
    list-style-type:none;

}

.nav_list li a {
    font-size:18px;
    font-family: arial;
    color:#b64366;
    text-decoration:none;
    padding:4px 4px 5px 10px;
    background-image:url('../images/nav_divider.png');
    background-repeat:no-repeat;
    background-position:right;
    font-weight:bold;
    cursor:pointer;

    } 
```

这就是它的样子（photoshop）： ![在此处输入图像描述](../Images/f80bcd8af12f11d104413ca34bd8b842.png)

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T16:37:06.590

这是您的解决方案：http: [//jsfiddle.net/3jWwH/](http://jsfiddle.net/3jWwH/)

Html 有一些错误，例如“a”标签未正确结束“/a”。

'br /' 工作正常，您只需将 float:left 添加到 '.nav_list li'

另外我认为您应该将填充应用于“li”而不是“a”。

这个对吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T16:29:02.897

我认为这就是你想要的：

[http://jsfiddle.net/zXzXn/1/](http://jsfiddle.net/zXzXn/1/)

**CSS：**

```
.nav_list {
    float:right;
    margin-top:55px;
}

.nav_list li {
    display:inline-block;
    list-style-type:none;
    text-align:center;
    margin:0 10px 0 0;

}

.nav_list li a {
    font-size:18px;
    font-family: arial;
    color:#b64366;
    text-decoration:none;
    padding:4px 10px 5px 10px;
    background-image:url('../images/nav_divider.png');
    background-repeat:no-repeat;
    background-position:right;
    font-weight:bold;
    cursor:pointer;
    display:block;

}
.nav_list li a:hover{
    border-bottom:2px solid #b64366;
} 
```

​</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T16:33:00.533

您可以为每个列表元素设置一个宽度，以将它们限制为某个宽度。这将导致单词拆分为多行。

```
.nav_list li a {
    width: 100px;
} 
```

然后添加一个底部边框以在悬停时添加下划线。

```
.nav_list li :hover {
    border-bottom: 1px solid #b64366;
} 
```

# api - 网络音频 API。单击按钮播放声音

> ID：11179081
> 
> 赞同：3
> 
> 时间：2012-06-24T16:22:28.230
> 
> 标签：api, html5-audio

我是 HTML5 和编码的新手。我一直在尝试掌握网络音频 API。我希望单击按钮即可播放声音。我使用了 HTML5Rocks 上发布的教程，但无法使其正常工作。我曾尝试使用 jfiddle 来帮助我进行故障排除，但无济于事。

这是我的代码：http: [//jsfiddle.net/ue8WP/](http://jsfiddle.net/ue8WP/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T14:55:02.657

尝试这个：

```
function playsound()
{    
    var filepath='sounds/'+....+'.mp3'; //example
    var audio = new Audio();   
    audio.src = filepath;
    audio.controls = true;
    audio.autoplay = true;

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T23:28:50.517

这是您的代码的简化版本，应该可以正常工作。您只需要加载一些其他示例声音，因为在获取您提供的声音时存在问题（Access-Control-Allow-Origin 不允许）。

[http://jsfiddle.net/WB6Pw/3/](http://jsfiddle.net/WB6Pw/3/)

# ruby-on-rails - 如何使用 tail 或更少查看彩色日志？

> ID：11179083
> 
> 赞同：12
> 
> 时间：2012-06-24T16:22:34.167
> 
> 标签：ruby-on-rails, logging, less, tail, ansi-escape

![在此处输入图像描述](../Images/6252115cd8e5583545318a5e82c97e3d.png)

使用读取`Rails`日志`vim`，我们可以看到彩色日志。但是当我们使用`tail -f`或`less`观看日志时，它不再被着色。有什么办法可以用`tail`or`less`或其他方式查看彩色日志？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-24T16:41:20.677

传递`-R`给 less 让颜色转义序列通过，即

```
less -R log/development.log 
```

假设您使用正确的终端类型，这应该会导致它们以彩色显示

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-02-06T08:04:42.267

```
tail -f log/development.log | ccze -A 
```

您可能需要安装 ccze

```
sudo apt-get install ccze 
```

它工作得更好，不理想但有效

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T16:28:37.287

你不能开箱即用，因为tail和less对Rails一无所知，并且日志保存为简单的文本文件。您可以使用正则表达式为输出着色，但我怀疑这是否值得。

编辑：请参阅阿方索的评论以获取一些替代方案。

# sql - 简单的 INSERT 语句出错

> ID：11179089
> 
> 赞同：0
> 
> 时间：2012-06-24T16:23:24.280
> 
> 标签：sql, sql-server, tsql, insert, sql-server-2012

我做了一个在 asp.net 页面内运行的插入语句。它给了我一个错误，所以我去了 sql server 并按原样运行了该语句，并用它来与我在 asp.net 页面中写的内容进行比较。问题是，它写得很好，但它不起作用。它似乎根本无法检测到数据库或表，并告诉我该表不存在，列也不存在。该声明如下所示：

```
INSERT [Remisiones].[dbo].[Places] (Name, Type) VALUES ("Planta 1", "Planta") 
```

我也尝试过使用`[dbo].[Places]`and ，`Places`但它在表格的位置给了我一个错误，说它是一个`Invalid object name`. 它在做什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-24T16:24:46.897

不要使用双引号作为字符串分隔符；使用单引号。

```
INSERT [Remisiones].[dbo].[Places] (Name, Type) VALUES ('Planta 1', 'Planta'); 
```

# r - 如何在消息（）中的引号内打印变量

> ID：11179091
> 
> 赞同：0
> 
> 时间：2012-06-24T16:23:39.827
> 
> 标签：r

我有以下变量：

```
min.v<-5
max.v<-10 
```

我想给以下信息

```
Test this. You entered "5 10" 
```

这可以用`message()`or打印吗`paste()`，因为这两个函数都将引号视为字符串。**消息中的变量应该在双引号内**

我试过`message(as.character(paste(min.v, " ",max.v)))`了，但双引号被忽略了。

这个问题可能与[在 R 中解决双引号内的双引号问题完全相反](https://stackoverflow.com/questions/11117321/solve-the-double-qoutes-within-double-quotes-issue-in-r)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-24T16:37:47.590

你有~~两个~~三个选项来做这个

选项 1：转义引号。为此，您必须使用`\"`.

```
cat("You entered ", "\"", min.v, " ", max.v,"\"", sep="")
You entered "5 10" 
```

选项 2：将双引号嵌入单引号中：

```
cat("You entered ", '"', min.v, " ", max.v,'"', sep="")
You entered "5 10" 
```

* * *

**编辑：** *感谢@baptiste，努力使这个答案全面*

选项3：使用功能`dQuote()`：

```
options(useFancyQuotes=FALSE)
cat("You entered ", dQuote(paste(min.v, max.v)), sep="")
You entered "5 10" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-24T19:27:20.820

```
x = 5; y = "indeed"
message("you entered ", dQuote(x))
message("you entered ", dQuote(paste(x, y))) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-02T15:56:30.650

虽然`sprintf`可能会变得相当复杂，但我发现代码通常比大多数其他选项更整洁。本质上，您有一条消息要在要插入变量值的位置进行格式化——这`sprintf`是为了：

```
min.v <- 5
max.v <- 10
msg <- 'Test this. You entered "%i %i"\n'
str <- sprintf(msg, min.v, max.v) #generates string
cat(str) #to output
# or message(str) 
```

`%i`是期望整数值的占位符，有关详细信息，请参阅`?sprintf`。`paste`虽然这个解决方案仍然依赖于用单引号括起来的双引号，但是你得到的代码比直接使用or时更易读`cat`。

# objective-c - 如何为我的所有按钮设置行为

> ID：11179092
> 
> 赞同：1
> 
> 时间：2012-06-24T16:23:52.947
> 
> 标签：objective-c, xcode, uibutton

我盯着构建一个应用程序，我希望我的应用程序中的所有按钮看起来都一样。我为一个按钮编写代码，我希望我的其他按钮看起来相似。这是我的按钮代码：

```
 UIImage *butimage = [UIImage imageNamed:@"button1.png"];
    UIImage *butimage3 = [UIImage imageNamed:@"button1press.png"];
    UIImage *butpress = [butimage3 stretchableImageWithLeftCapWidth:15 topCapHeight:0];
    UIImage *butimage2 = [butimage stretchableImageWithLeftCapWidth:15 topCapHeight:0];
    [button1 setBackgroundImage:butimage2 forState:UIControlStateNormal];
    [button1 setBackgroundImage:butpress forState:UIControlStateHighlighted];
    [button1 setTitleColor:[UIColor redColor] forState:UIControlStateNormal];
    [button1 setTitleColor:[UIColor redColor] forState:UIControlStateHighlighted]; 
```

我该怎么做？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T16:27:35.053

尝试这个：

```
[button1 addTarget:self action:@selector(anAction:) forControlEvents:UIControlEventTouchUpInside] 
```

我假设您只创建了一个按钮，并将所有图像分配给它。

如果您创建更多按钮，则为它们提供操作的代码就是上面的代码。

对于`anAction:`部件，创建一个`-(void)anAction:(id)sender`(ie) 以告诉按钮运行该特定操作。

**编辑**

将您的按钮声明为`IBOutlets`，将它们放在您的`viewController.xib`并链接它们。

`viewWillAppear`然后在or中声明它们的属性`viewDidLoad`（基本上是您编写的代码）。

然后，如果您希望他们执行一些操作，请编写一些`-(IBAction)actionForButton:(id)sender`并将它们分配给 IB 中的按钮。

# function - 在haskell中使用多重模式缩短函数定义

> ID：11179094
> 
> 赞同：1
> 
> 时间：2012-06-24T16:24:15.333
> 
> 标签：function, haskell, pattern-matching

这样做更好吗：

```
charToAction 'q' = Just $ WalkRight False
charToAction 'd' = Just $ WalkRight True
charToAction 'z' = Just Jump
charToAction _ = Nothing 
```

或者

```
charToAction x = case x of
    'q' -> Just $ WalkRight False
    'd' -> Just $ WalkRight True
    'z' -> Just Jump
    _ -> Nothing 
```

?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-24T16:28:38.067

绝对没有任何功能差异。这是个人喜好的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T19:08:54.957

没有性能差异*，因为*第一个定义对第二个定义脱糖。您更喜欢案例+模式匹配解决方案而不是带有保护和相等测试的解决方案是正确的，这里有一些出色的一般性评论：http: [//existentialtype.wordpress.com/2011/03/15/boolean-blindness/](http://existentialtype.wordpress.com/2011/03/15/boolean-blindness/)（他的例子在 ML 中，但立即转换为 Haskell）。

请注意，您`otherwise`在第二个定义中误用了；你应该写`_ -> Nothing`这不是`otherwise`你正在使用的守卫，你也可以写`fmap -> Nothing`，同样的事情也会发生。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T22:27:49.533

正如其他人所提到的，生成的代码没有区别，因为前一种方法对后一种方法没有糖分，但是我可以指出一些其他考虑因素，可以帮助您选择使用其中一个或另一个：

1.  前一种方法在某些情况下看起来更漂亮（尽管我个人认为一旦你有很多案例就会分散注意力）
2.  前一种方法使重构名称稍微困难一些。使用 case 语句，函数的名称只出现一次。
3.  Case 语句可以在代码中的任何地方使用，并且可以匿名使用。前一种方法需要使用`let`or`where`块在函数中定义模式匹配函数。

但是，没有任何情况下您不能将一种翻译成另一种。这完全是编码风格的问题。

# objective-c - 为什么从容器中检索对象时引用计数不增加？

> ID：11179106
> 
> 赞同：0
> 
> 时间：2012-06-24T16:26:02.037
> 
> 标签：objective-c, ios, reference

我创建了一个小测试项目来尝试解决我在主项目中遇到的问题。我注意到从容器中检索对象时，引用计数不会增加。

我很困惑为什么不是这样？

例如，此代码不会增加 hereDoggy 对象的引用计数：

```
//Retrieve the dog, why does this not increment the reference count?
Dog* hereDoggy = [cont1 objectAtIndex:0]; 
```

下面是完整的例子：

```
-(void)doZombieProblem
{
    NSMutableArray* cont1 = [NSMutableArray array];
    NSMutableArray* cont2 = [NSMutableArray array];
    NSMutableArray* cont3 = nil;

    //Create the dog pointer
    Dog* doggy = [[Dog alloc] initWithName:@"Bernard"];

    //Add to container1
    [cont1 addObject:doggy];

    //Release the dog pointer
    [doggy release];

    while ([cont1 count] > 0)
    {
        //Retrieve the dog, why does this not increment the reference count?
        Dog* hereDoggy = [cont1 objectAtIndex:0];

       //Add it to cont2
        [cont2 addObject:hereDoggy];

        //Remove it from cont1.
        [cont1 removeObjectAtIndex:0];

        //No need to release as we haven't increased the reference count.
        //[hereDoggy release];
    }

    //I should be able to retrieve the dog here from cont2.
    Dog* bernard = [cont2 objectAtIndex:0];

    //No need to release as we haven't increased the reference count.
    //[bernard release];
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T16:44:00.317

在这种情况下，如果您想增加对象的保留计数，您需要发送一条`retain`（或一条`copy`）消息。

## 根据经验

您需要始终平衡您`retain`的 s（或`copy`ies）与您`release`的 s。如果你不这样做，你可能会出现内存泄漏。否则切换到 ARC 功能以避免编写代码量并简化您的生活。

这是了解内存管理如何工作的有用链接。

[内存管理](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/MemoryMgmt.html)

我评论了您的代码以了解发生了什么：

```
// the object referenced by doggy has a retain count of 1
Dog* doggy = [[Dog alloc] initWithName:@"Bernard"];

// now the retain count is 2 since you added to a container class like NSArray
[cont1 addObject:doggy];

// now the retain count is 1
[doggy release]; 
```

然后，在`while`声明中：

```
// the retain count still remains 1
Dog* hereDoggy = [cont1 objectAtIndex:0];

// the retain count increases to 2
[cont2 addObject:hereDoggy];

// the retain count goes to 1
[cont1 removeObjectAtIndex:0]; 
```

由于`cont2`您可以访问该对象，因此该对象保持活动状态。

如果您这样做`[cont2 removeObjectAtIndex:0];`，则保留计数达到 0 并且对象将自动释放。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T16:29:29.683

作为对象的用户，您有责任管理它的保留计数。这是因为只有你，消费者，知道你什么时候完成。这就是为什么只是调用`[cont1 objectAtIndex:0]`不会增加它。NSArray 不知道你对它返回的对象有什么计划。

考虑保留计数来表示拥有某物的事物的数量。当它为 0 时，没有人拥有它，所以让它被垃圾收集。如果它是 1，那么只有 1 个东西需要它/拥有它（并且一直如此）。

当你调用`[cont1 addObject:doggy]`NSMutableArray 将绝对增加它的保留计数（在幕后），就像你调用`[cont1 removeObjectAtIndex:0]`NSMutableArray 时会减少它的保留计数一样。

现在，如果您需要`hereDoggy`任何时间，只需`retain`自己调用它，然后`release`在适当的时候调用。

# asp.net-mvc - 当 FormCollection 包含空键时，UpdateModel 不更新

> ID：11179107
> 
> 赞同：0
> 
> 时间：2012-06-24T16:26:04.897
> 
> 标签：asp.net-mvc, model-view-controller, updatemodel

当`FormCollection.AllKeys`包含具有空键的项目时，`Controller.UpdateModel`方法不更新模型。

对于这种情况，在更新之前我删除了空键

```
var formCollection = 
    new FormCollection(controllerContext.HttpContext.Request.Form);
formCollection.Remove("");

UpdateModel(MyModel, formCollection.ToValueProvider()); 
```

此代码解决了问题，但更方便的是在`DefaultModelBinder`类中重写 BindModel 方法。有谁知道为什么会这样？

# android - 触摸事件在 android 中被丢弃

> ID：11179109
> 
> 赞同：0
> 
> 时间：2012-06-24T16:26:38.500
> 
> 标签：android, android-view

我正在使用 ApiDemos 中提供的 FingerPaint 示例在屏幕上绘制我的手指运动。

现在我在我的路径对象中添加圆圈而不是线，并且在调用 onDraw 方法时将绘制带有圆圈的路径。

现在我的问题是，当我慢慢移动手指时，它会在[onTouchEvent](http://developer.android.com/reference/android/view/View.html#onTouchEvent%28android.view.MotionEvent%29)给出的点上正确绘制圆圈，但是当我以某种速度移动手指时，与线条不同，它只绘制几个圆圈。

经过调试，我发现在快速移动手指时，一些触摸事件被视图丢弃，并且在这些点上没有绘制圆圈。

任何人都可以对此提供一些指示。为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T22:53:42.917

我可以在没有看到代码的情况下想到两件事。

首先，您是否获得了 touchEvents 之间记录的历史点并也使用它们？如果没有，那会像你所说的那样引起一些严重的抽搐。

如果你是，并且它只是没有捡起它们，那么你能做的最好的事情可能就是欺骗它一些。检查当前和最后绘制的圆之间的距离。如果它超过圆的直径太多，画一条与圆相同粗细的线，两端各有一个圆。

# android - android对话框警报

> ID：11179112
> 
> 赞同：-1
> 
> 时间：2012-06-24T16:26:51.903
> 
> 标签：android, dialog, alert

我是编程新手。如果有人愿意回答我的问题，真的很感激。我在后面有一个旋转的画廊视图。但是当出现对话框警报时，是否可以使用任何方法来“冻结”画廊视图的旋转？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T11:22:36.097

```
AlertDialog.Builder builder1 = new AlertDialog.Builder(context);
            builder1.setMessage("Your message goes here.");
            builder1.setCancelable(true);
            builder1.setPositiveButton("Yes",
                    new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int id) {
                    dialog.cancel();
                }
            });
            builder1.setNegativeButton("No",
                    new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog, int id) {
                    dialog.cancel();
                }
            });

            AlertDialog alert11 = builder1.create();
            alert11.show(); 
```

# drupal-7 - 如何从 drupal 的特定页面重定向未登录用户？

> ID：11179116
> 
> 赞同：0
> 
> 时间：2012-06-24T16:27:11.237
> 
> 标签：drupal-7

我想要 2 个页面，所有用户都会存在一个页面，但如果您已登录，它会将您重定向到另一个页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T08:54:20.343

编写一个模块并像这样使用[hook_init()](http://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_init/7)函数：

```
/**
 * Implements hook_init().
 */
function MODULENAME_init() {
  if (user_is_logged_in()) {
    drupal_goto('path_to_other_page');
  }
} 
```

这个钩子只打算为非缓存页面调用，所以 hook_init() 是我会用来做你想做的事情的钩子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T12:13:38.117

您可以使用非常流行的[LoginToboggan](http://drupal.org/project/logintoboggan/)模块。除其他外，它允许您设置用户登录后重定向的页面。

# python - 不删除前导字符python tkinter

> ID：11179122
> 
> 赞同：0
> 
> 时间：2012-06-24T16:27:51.500
> 
> 标签：python, tkinter, python-2.7

我将如何设置一个`Tkinter`Text 小部件来执行类似于 IDLE 条目的操作？例如：

```
>>> Entry goes here! 
```

但是，我知道如何在每行的开头插入它们，但是我将如何使它不可删除，这样你就不能删除`>>>`？我在谷歌上搜索过这个，但无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T17:28:46.630

如果解决方案只需“足够好”，我将使用的技术是：

1.  插入提示时，请记住提示结尾的索引。
2.  为您关心的事件添加绑定到小部件（例如：`<BackSpace>`和`<Delete>`和`<<Cut>>`）
3.  在此绑定中，您可以查看插入光标和选择的索引，如果它在保存的索引之前，则忽略该事件（即：do a `return "break"`）。

这应该或多或少可以正常工作，尽管它允许您在提示之前插入字符。重写所有更改文本小部件的绑定是一项相当艰巨的任务，但仅跟踪删除并不太难。

要完美地解决这个问题，您需要编写一些 tcl 代码来拦截实际小部件的低级插入和删除命令。这是可能的，尽管它需要对底层 tcl 代码有很好的理解。例如，请参阅此答案：[https ://stackoverflow.com/a/11180132/7432](https://stackoverflow.com/a/11180132/7432)

# c# - 使用基类和继承类的参数类型重载

> ID：11179123
> 
> 赞同：0
> 
> 时间：2012-06-24T16:27:58.657
> 
> 标签：c#, inheritance, overloading

我有这样的事情：

```
class BaseArg { }
class DerivedArg : BaseArg { }

interface IDoSomething
{
    void DoSomething();
}

class A : IDoSomething
{
    public BaseArg Value { get; set; }

    public A(BaseArg value)
    {
        this.Value = value;
    }

    public static A Create(BaseArg arg)
    {
        return new A(arg);
    }

    public static B Create(DerivedArg arg)
    {
        return new B(arg);
    }

    public virtual void DoSomething()
    {

    }
}

class B : A
{
    public DerivedArg DerivedValue { get; set; }

    public B(DerivedArg value)
        : base(value)
    {
        this.DerivedValue = value;
    }

    public override void DoSomething()
    {
        // does something different from A.DoSomething()
        // uses additional stuff in DerivedArg
    }
} 
```

但是，即使我这样做：

```
DerivedArg arg = new DerivedArg();
A a = A.Create(arg); 
```

`A.Create(BaseArg arg)`被调用（因此`A`被创建，这不是意图）。

我在这里错过了什么吗？如果是这样，我应该如何在不使用条件等奇怪的东西的情况下重写它`arg as DerivedArg`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T16:47:30.003

正在执行正确的工厂方法。在以下位置设置断点：

```
 public static B Create(DerivedArg arg)
    {
        return new B(arg); /* set breakpoint */
    } 
```

在***您看来***，它没有被执行，因为您已经定义了 type 的局部变量`A`：

```
A a = A.Create(arg); 
```

`public static B Create(DerivedArg arg)`被正确调用并且 type 的实例`B`被返回并被装箱为 type `A`。

# sqlite - SQLite.NET 输出参数

> ID：11179125
> 
> 赞同：1
> 
> 时间：2012-06-24T16:28:08.630
> 
> 标签：sqlite, identity

我有一个包含来自数据库的数据的对象。该对象有一个 ID，在 DB 中是自动增量字段。创建对象时，我不知道他的 ID，直到我将新记录插入数据库。然后我想取回 ID 字段的自动生成值。`NotSupportedException`我试图通过添加一个 Output 参数来做到这一点，但是当我尝试将SQLite.NET设置`Direction`为`ParameterDirection.Output`.
我能做些什么？除了 ID 之外的其他字段不是唯一的。
另一种选择是在程序中手动自动递增，但实现起来似乎有点复杂。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T16:47:25.463

```
SELECT last_insert_rowid(); 
```

这将获得最后插入的 ROWID。如果表具有 INTEGER PRIMARY KEY 类型的列，则该列是 rowid 的另一个别名。

# iphone - 形成一个谓词在日期之间进行过滤

> ID：11179128
> 
> 赞同：0
> 
> 时间：2012-06-24T16:28:20.930
> 
> 标签：iphone, objective-c, ios, core-data, nsdate

假设我有两个日期：

```
minDate:2012-08-29 12:22:17 +0000
maxDate:2011-12-01 18:14:38 +0000 
```

我有一个名为 MBDate 的核心数据对象，它有一个 NSDate 属性。我想获得所有 MBDate 的天数，包括上述天数之间的天数。因此，它应该忽略小时、秒和分钟，而只是获取介于 8/29 到 12/01 之间的所有天数。

就像是：

```
predicate = [NSPredicate predicateWithFormat:@"date < %@ AND date > %@", maxDate, minDate]; 
```

但我不确定我会如何告诉它忽略小时和分钟，只看日子。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T16:57:11.723

您可以使用 NSDateComponents 设置“低”和“高”日期并在谓词中使用它们。

```
NSCalendar *gregorian = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
gregorian.timeZone = [NSTimeZone timeZoneWithAbbreviation"@"UTC"];

NSDateComponents *dateComponents = [gregorian components:(NSDayCalendarUnit | NSMonthCalendarUnit | NSYearCalendarUnit) fromDate:minDate];

[dateComponents setHour:0];
[dateComponents setMinute:0];
[dateComponents setSecond:0];
NSDate *lowDate = [gregorian dateFromComponents:dateComponents];

dateComponents = [gregorian components:(NSDayCalendarUnit | NSMonthCalendarUnit | NSYearCalendarUnit) fromDate:maxDate];

[dateComponents setHour:23];
[dateComponents setMinute:59];
[dateComponents setSecond:59];
NSDate *highDate = [gregorian dateFromComponents:dateComponents]; 
```

# c# - 想要在应用启动时显示 UserControl 页面

> ID：11179140
> 
> 赞同：1
> 
> 时间：2012-06-24T16:29:02.243
> 
> 标签：c#, windows-phone-7

我最近为 wp7 创建了一个应用程序。现在我准备为我的应用提交更新。在我添加了一个 UserControl 页面（**包含一个对话框**）。我希望它显示在 MainPage.xaml 或应用程序启动中，但**仅适用于第一个应用程序启动**。我第一次知道如何显示 MessageBox，但不知道如何显示 xaml 页面。

```
if (!IsolatedStorageSettings.ApplicationSettings.Contains("IsFourthLaunchDone"))
{
   MessageBox.Show("To Enable Full screen mode, go to settings and select Full Screen Browsing.");
   IsolatedStorageSettings.ApplicationSettings["IsFourthLaunchDone"] = true;
} 
```

有人可以帮我吗？在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T17:27:53.383

这是如何使用 MessageBox 正确完成此操作的一个想法。应用程序.xaml.cs：

```
public static bool IsFourthLaunch = false;

ApplicationLaunching(){

if (!IsolatedStorageSettings.ApplicationSettings.Contains("IsFourthLaunchDone"))
{
     IsFourthLaunch = true;
}

} 
```

MainPage.xaml.cs：

```
MainPage()
{
   if (App.isFourthLaunch)
    {
       Loaded += OnFourthLaunch;
    }
}

public void OnFourthLaunch(object sender, RoutedEventArgs e)
{
    Loaded -= OnFourthLaunch;
    if (App.IsFourthLaunch)
     {
       MessageBox.Show("To Enable Full screen mode, go to settings and select Full Screen Browsing.");
       IsolatedStorageSettings.ApplicationSettings["IsFourthLaunchDone"] = true;
       App.IsFourthLaunch = false;

     }

} 
```

要使用 UserControl 执行此操作，请将控件添加到页面，最初使用折叠可见性。在要显示的场景中，将可见性更改为可见。您需要弄清楚您希望 Control 以何种方式工作，并且您可能需要重写 OnBackKeyPress 以为用户提供关闭控件的逻辑方式。

```
protected override void OnBackKeyPress( System.ComponentModel.CancelEventArgs e )
{    
   if (myControl.Visibility == Visibility.Visible)
   {
      e.Cancel = true;
      myControl.Visibility = Visibility.Collapsed;
      }        

} 
```

# php - 实时刷新多个房间（PHP & AJAX）

> ID：11179151
> 
> 赞同：1
> 
> 时间：2012-06-24T16:30:15.720
> 
> 标签：php, ajax, sockets, comet, live

我有 200 多个房间，人们可以在我的网站上访问，只是为了通过 viewroom.php?id=xx 观看发布的消息（他们不能说话或写字或其他什么，只能看到）

另一方面，我有人使用移动应用程序向特定房间发送消息（仅发送），该应用程序在我的服务器中调用文件 sendmes.php?room=xx ，此时我已经全部工作但没有实时刷新，我想知道最好的系统和尽可能轻的服务器负载，可以通过 sendmes.php 发送到 viewroom.php 没有沉重的 lops 和那个

我尝试使用 Ajax 和长时间超时，但这种方式迫使我对 mysql 或文件进行循环，我认为这是一种高服务器负载方式

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T16:33:52.367

我强烈建议更改系统的后端架构。

使用[Socket.IO](http://www.nodejs.org/)查看[Node.js。](http://socket.io/) _ 它是一个简单的 Web Sockets 包装器（[如果没有浏览器支持，还有长轮询 AJAX](http://socket.io/#browser-support)），使整个过程变得简单。让您的客户将所有消息发送到您的 Node 实例，然后让您的 Node 应用程序写入您的数据库以进行归档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T16:35:53.067

如果您要处理消息，我建议使用已建立的消息系统——例如[RabbitMQ](http://www.rabbitmq.com/)（我们实际上在我们的一个项目中使用它并取得了巨大成功）——而不是编写自己的逻辑来存储和排队它们.

这样，您唯一需要编写的是一个轻量级的“服务器推送”脚本——它将查询消息传递子系统以获取传入消息，并将它们路由到特定的房间/用户。

# r - 将 getSymbols 结果合并到一个 xts 对象中

> ID：11179154
> 
> 赞同：4
> 
> 时间：2012-06-24T16:30:22.617
> 
> 标签：r, quantmod

我有以下代码：

```
library(quantmod)
tckrs <- c("TLT", "LQD", "HYG", "SPY", "DBC")
NumTckrs  <-  length(tckrs)
getSymbols(tckrs, from="1900-01-01", to=Sys.Date())

# merge to allign the start dates
MainDF <- merge(Ad(TLT), Ad(LQD), Ad(HYG), Ad(SPY), Ad(DBC), all=FALSE) 
```

我不想在最后一行重复股票代码。有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T16:55:26.997

将所有数据加载到环境中，然后调用`Ad`每个数据并合并它们。另请注意，`getSymbols`默认情况下返回 xts 对象，因此您`MainDF`是 xts 对象，而不是 data.frame。

```
library(quantmod)
# create new environment
myEnv <- new.env()
# pull all data and load into myEnv
getSymbols("TLT;LQD;HYG;SPY;DBC", env=myEnv)
# eapply calls Ad on each symbol in myEnv and returns a list
# do.call calls merge with each element returned from eapply as an argument
MainXTS <- do.call(merge, c(eapply(myEnv, Ad),all=FALSE)) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-24T19:59:39.477

This is one line of code with my [qmao](https://r-forge.r-project.org/R/?group_id=1113) package

```
library(qmao)
p <- makePriceFrame(tckrs, prefer='Adjusted', silent=TRUE) 
```

For convenience, `PF` is an alias for `makePriceFrame`. Also, since by default, the function will find and use the "Adjusted" column if it exists, you can leave out the `prefer` argument.

```
p <- PF(tckrs) 
```

You can also combine a bunch of these types of functions

```
library(FinancialInstrument)
p <- PF(getSymbols(stock(tckrs, currency("USD")))) 
```

Also, note that if you hadn't assigned your Symbol names to `tckrs`, you'd be able to get them from the PriceFrame.

```
names(p)
[1] "TLT" "LQD" "HYG" "SPY" "DBC" 
```

If you do not specify a `prefer` argument, it looks for a column that contains "Adjusted", then "Close", then "Mid", then Price". To see which column was used to make the PriceFrame, look at the "prefer" attribute

```
attr(p, "prefer")
[1] "Adjusted" 
```

If you keep data in separate environments, `PF` can handle that as well.

```
getSymbols(tckrs, env=myEnv)
p <- PF(ls(myEnv), env=myEnv) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-24T17:06:15.233

Joshua's is probably more elegant than mine:

```
res <- do.call( merge,  lapply(  lapply(tckrs, get) , Ad) ) 
```

# c# - C#中的foreach是如何实现的？

> ID：11179156
> 
> 赞同：22
> 
> 时间：2012-06-24T16:30:52.927
> 
> 标签：c#, foreach, language-implementation, language-specifications

`foreach`在 C# 中究竟是如何实现的？

我想象它的一部分看起来像：

```
var enumerator = TInput.GetEnumerator();
while(enumerator.MoveNext())
{
  // do some stuff here
} 
```

但是我不确定到底发生了什么。`enumerator.Current`每个周期使用什么方法返回？它是返回 [for each cycle] 还是需要一个匿名函数或其他东西来执行它的主体`foreach`？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-24T16:32:55.173

它不使用匿名函数，不。基本上，编译器将代码转换为与您在此处显示的 while 循环*大致等效的内容。*

`foreach` *不是*函数调用 - 它内置于语言本身，就像`for`循环和`while`循环一样。它不需要返回任何东西或“获取”任何类型的功能。

请注意，`foreach`它有一些有趣的皱纹：

*   迭代数组时（在编译时已知），编译器可以使用循环计数器并与数组的长度进行比较，而不是使用`IEnumerator`
*   `foreach`将在最后处理迭代器；这很简单`IEnumerator<T>`which extends `IDisposable`，但`IEnumerator` *不是*，编译器插入一个检查以在执行时测试迭代器是否实现`IDisposable`
*   您可以迭代不实现`IEnumerable`or的类型`IEnumerable<T>`，只要您有一个适用的`GetEnumerator()`方法，该方法返回具有合适的`Current`and`MoveNext()`成员的类型。如注释中所述，类型也*可以*实现`IEnumerable`或`IEnumerable<T>`显式，但具有返回/`GetEnumerator()`以外的类型的公共方法。参见示例 - 这避免了在许多情况下不必要地创建引用类型对象。`IEnumerator``IEnumerator<T>`[`List<T>.GetEnumerator()`](http://msdn.microsoft.com/en-us/library/b0yss765.aspx)

有关详细信息，请参阅 C# 4 规范的第 8.8.4 节。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-12-01T10:56:19.883

惊讶于没有触及确切的实现。虽然您在问题中发布的内容是最简单的形式，但完整的实现（包括枚举器处理、强制转换等）位于[规范的 8.8.4 部分。](http://msdn.microsoft.com/en-us/library/aa664754%28v=vs.71%29.aspx)

现在有两种情况`foreach`可以在类型上运行循环：

1.  **如果该类型有一个名为 public/non-static/non-generic/parameterless 的方法`GetEnumerator`，它返回具有公共`MoveNext`方法和公共`Current`属性的东西。** [正如 Eric Lippert 先生在这篇博客文章中所指出的](http://blogs.msdn.com/b/ericlippert/archive/2011/06/30/following-the-pattern.aspx)，这是为了适应前通用时代的类型安全和在值类型的情况下与装箱相关的性能问题。请注意，这是*鸭子打字*的情况。例如这有效：

    ```
    class Test
    {
        public SomethingEnumerator GetEnumerator()
        {

        }
    }

    class SomethingEnumerator
    {
        public Something Current //could return anything
        {
            get { return ... }
        }

        public bool MoveNext()
        {

        }
    }

    //now you can call
    foreach (Something thing in new Test()) //type safe
    {

    } 
    ```

    然后编译器将其翻译为：

    ```
    E enumerator = (collection).GetEnumerator();
    try {
       ElementType element; //pre C# 5
       while (enumerator.MoveNext()) {
          ElementType element; //post C# 5
          element = (ElementType)enumerator.Current;
          statement;
       }
    }
    finally {
       IDisposable disposable = enumerator as System.IDisposable;
       if (disposable != null) disposable.Dispose();
    } 
    ```

2.  **如果该类型实现`IEnumerable`了 where`GetEnumerator`返回`IEnumerator`具有公共`MoveNext`方法和公共`Current`属性的位置。**但一个有趣的子案例是，即使您`IEnumerable`显式实现（即类上没有公共`GetEnumerator`方法`Test`），您也可以拥有一个`foreach`.

    ```
    class Test : IEnumerable
    {
        IEnumerator IEnumerable.GetEnumerator()
        {

        }
    } 
    ```

    这是因为在这种情况下`foreach`实现为（假设类中没有其他公共`GetEnumerator`方法）：

    ```
    IEnumerator enumerator = ((IEnumerable)(collection)).GetEnumerator();
    try {
        ElementType element; //pre C# 5
        while (enumerator.MoveNext()) {
            ElementType element; //post C# 5
            element = (ElementType)enumerator.Current;
            statement;
       }
    }
    finally {
        IDisposable disposable = enumerator as System.IDisposable;
        if (disposable != null) disposable.Dispose();
    } 
    ```

    如果类型`IEnumerable<T>`显式实现，`foreach`则转换为（假设类中没有其他公共`GetEnumerator`方法）：

    ```
    IEnumerator<T> enumerator = ((IEnumerable<T>)(collection)).GetEnumerator();
    try {
        ElementType element; //pre C# 5
        while (enumerator.MoveNext()) {
            ElementType element; //post C# 5
            element = (ElementType)enumerator.Current; //Current is `T` which is cast
            statement;
       }
    }
    finally {
        enumerator.Dispose(); //Enumerator<T> implements IDisposable
    } 
    ```

* * *

需要注意的一些有趣的事情是：

1.  在上述两种情况下，`Enumerator`类都应该有一个公共`MoveNext`方法和一个公共`Current`属性。换句话说，**如果你正在实现`IEnumerator`接口，它必须被隐式实现。**例如，`foreach`不适用于此枚举器：

    ```
    public class MyEnumerator : IEnumerator
    {
        void IEnumerator.Reset()
        {
            throw new NotImplementedException();
        }

        object IEnumerator.Current
        {
            get { throw new NotImplementedException(); }
        }

        bool IEnumerator.MoveNext()
        {
            throw new NotImplementedException();
        }
    } 
    ```

    （感谢 Roy Namir 指出这一点。`foreach`实现并不像表面上看起来那么容易）

2.  枚举器优先级 - 如果你有一个`public GetEnumerator`方法，那么`foreach`无论谁在实现它，这都是默认选择。例如：

    ```
    class Test : IEnumerable<int>
    {
        public SomethingEnumerator GetEnumerator()
        {
            //this one is called
        }

        IEnumerator<int> IEnumerable<int>.GetEnumerator()
        {

        }
    } 
    ```

    如果您没有公共实现（即只有显式实现），则优先级类似于`IEnumerator<T>`> `IEnumerator`。

3.  `foreach`在集合元素被转换回类型（在`foreach`循环本身中指定）的实现中涉及一个转换运算符。这意味着即使你写了`SomethingEnumerator`这样的：

    ```
    class SomethingEnumerator
    {
        public object Current //returns object this time
        {
            get { return ... }
        }

        public bool MoveNext()
        {

        }
    } 
    ```

    你可以写：

    ```
    foreach (Something thing in new Test())
    {

    } 
    ```

    因为`Something`是类型兼容`object`，遵循 C# 规则，或者换句话说，如果两种类型之间可能存在显式转换，编译器就会允许它。否则编译器会阻止它。实际的转换是在运行时执行的，可能会也可能不会失败。

# django - 将 Django 迁移到生产服务器

> ID：11179157
> 
> 赞同：1
> 
> 时间：2012-06-24T16:30:53.483
> 
> 标签：django

我坚持将我的 Django 项目迁移到生产服务器。这是情况。我的最终结果页面（HTML 源代码）如下所示：

```
Number of exponentials: 1 <br /><br />
Function: 98.919106*2.71828182845905**(-0.014026249*t) <br /><br />
Parameters of exponentials: {&#39;a&#39;: [98.919105999999999], &#39;k&#39;: [0.014026248999999999], &#39;c&#39;: [0]} <br /><br />
Non physical solution:  False <br /><br />

<img src="plots/data_2e_03.png" alt="some_text"/> 
```

它是一个由我的 Django 应用程序中的数据填充的模板。模板如下所示：

```
Number of exponentials: {{rp.user_choice.number_of_exponentials}} <br /><br />
Function: {{rp.user_choice.function}} <br /><br />
Parameters of exponentials: {{rp.user_choice.parameters_of_exponentials}} <br /><br />
Non physical solution:  {{rp.user_choice.non_physical_solution}} <br /><br />

<img src="plots/{{rp.input_file_name}}.png" alt="some_text"/> 
```

问题是图像没有显示。只有 alt 被打印出来。当我检查 html 源代码（粘贴在上面）时，它显示 plots/data_2e_03.png 作为链接（是的，在 HTML 源代码中）。当我单击它时，它会将我带到另一个页面的来源。

```
<html><head>
<title>500 Internal Server Error</title>
</head><body>
<h1>Internal Server Error</h1>
<p>The server encountered an internal error or
misconfiguration and was unable to complete
your request.</p> 
<p>Please contact the server administrator,
[no address given] and inform them of the time the error occurred,
and anything you might have done that may have
caused the error.</p>
<p>More information about this error may be available
in the server error log.</p>
<hr>
<address>Apache/2.2.16 (Debian) Server at bioinformatika.djangoserver Port 80</address>
</body></html> 
```

这是我的 apache 站点配置：

```
<VirtualHost *:80>

ServerName bioinformatika.djangoserver
DocumentRoot /home/user/bioinformatika/Server/bioinformatika/apache

Alias /plots/ /home/user/bioinformatika/Server/bioinformatika/bioinformatika/plots/

<Directory /home/user/bioinformatika/Server/bioinformatika/bioinformatika/plots>
Order deny,allow
Allow from all
</Directory>

<Directory /home/user/bioinformatika/Server/bioinformatika/apache>
    Order allow,deny
    Allow from all
</Directory>

WSGIDaemonProcess bioinformatika.djangoserver processes=2 threads=15 display-name=%{GROUP}
WSGIProcessGroup bioinformatika.djangoserver

WSGIScriptAlias / /home/user/bioinformatika/Server/bioinformatika/apache/django.wsgi 
```

为了让 apache 处理我的媒体文件，我添加了：

```
Alias /plots/ /home/user/bioinformatika/Server/bioinformatika/bioinformatika/plots/

<Directory /home/user/bioinformatika/Server/bioinformatika/bioinformatika/plots>
Order deny,allow
Allow from all
</Directory> 
```

其他部分是关于设置 apache、mod_wsgi 和 Django，并且正在工作。

一旦我删除了 Django settings.py 中的调试。显示源的页面（带有内部服务器错误）现在已呈现并显示在浏览器中。/etc/log/apache2/error.log 给出以下内容：

```
[Sun Jun 24 11:22:15 2012] [error] [client 192.168.0.14]     return callback(request, **param_dict)
[Sun Jun 24 11:22:15 2012] [error] [client 192.168.0.14]   File "/home/user/bioinformatika/virtual_bio/lib/python2.6/site-packages/Django-1.4-py2.6.egg/django/utils/decorators.py", line 91, in _wrapped_view
[Sun Jun 24 11:22:15 2012] [error] [client 192.168.0.14]     response = view_func(request, *args, **kwargs)
[Sun Jun 24 11:22:15 2012] [error] [client 192.168.0.14]   File "/home/user/bioinformatika/virtual_bio/lib/python2.6/site-packages/Django-1.4-py2.6.egg/django/views/defaults.py", line 32, in server_error
[Sun Jun 24 11:22:15 2012] [error] [client 192.168.0.14]     t = loader.get_template(template_name) # You need to create a 500.html template.
[Sun Jun 24 11:22:15 2012] [error] [client 192.168.0.14]   File "/home/user/bioinformatika/virtual_bio/lib/python2.6/site-packages/Django-1.4-py2.6.egg/django/template/loader.py", line 145, in get_template
[Sun Jun 24 11:22:15 2012] [error] [client 192.168.0.14]     template, origin = find_template(template_name)
[Sun Jun 24 11:22:15 2012] [error] [client 192.168.0.14]   File "/home/user/bioinformatika/virtual_bio/lib/python2.6/site-packages/Django-1.4-py2.6.egg/django/template/loader.py", line 138, in find_template
[Sun Jun 24 11:22:15 2012] [error] [client 192.168.0.14]     raise TemplateDoesNotExist(name)
[Sun Jun 24 11:22:15 2012] [error] [client 192.168.0.14] TemplateDoesNotExist: 500.html 
```

任何建议表示赞赏。我认为奇怪的行为可能与我的服务器设置有关，而我的结果不是默认的，容易解决的问题，如果是这种情况，如果有人可以请检查我的 apache 配置是否正确，我将不胜感激。

更新：

这是我想念配置路径的问题。我不清楚 STATIC_URL、STATIC_ROOT、MEDIA_URL 和 MEDIA_ROOT 的含义，这导致了我无法完全诊断的部署问题中的问题。

但是，避免这种情况的方法是对如何在开发和生产服务器上提供文件有一个有效的概念性知识。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T17:30:47.080

在您的 projectname/templates 文件夹中，您需要创建一个名为 500.html 的文件，以便服务器在非调试模式下显示。（您应该为类似目的创建一个 404.html 文件）。

您还需要确保 settings.TEMPLATE_DIRS 包括服务器上您的 projectname/templates 文件夹的绝对路径。

# android - Android 使用文本观察器来防止输入特殊字符

> ID：11179158
> 
> 赞同：6
> 
> 时间：2012-06-24T16:30:54.393
> 
> 标签：android, textwatcher

我想制作一个`EditText`盒子并`TextWatcher`用来防止输入特殊字符。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-12T07:57:33.543

这仅用于字符和空格验证...

```
InputFilter filter = new InputFilter()     
{  
    @Override  
    public CharSequence filter(CharSequence source, int start, int end, Spanned dest, int dstart, int dend)   
    {   
        for (int i = start; i < end; i++)
            if (!Character.isLetter(source.charAt(i)) && !Character.isSpaceChar(source.charAt(i)))
                return "";

        return null;  
    }
};

myTextView.setFilters(new InputFilter[] { filter }); 
```

# python - python队列task_done（）问题

> ID：11179163
> 
> 赞同：1
> 
> 时间：2012-06-24T16:31:12.007
> 
> 标签：python, multithreading

我对 python 多线程队列有问题。我有这个脚本，其中生产者从输入队列中获取元素，生成一些元素并将它们放入输出队列，消费者从输出队列中获取元素并打印它们：

```
import threading
import Queue

class Producer(threading.Thread):
    def __init__(self, iq, oq):
        threading.Thread.__init__(self)
        self.iq = iq
        self.oq = oq

    def produce(self, e):
        self.oq.put(e*2)
        self.oq.task_done()
        print "Producer %s produced %d and put it to output Queue"%(self.getName(), e*2)

    def run(self):
        while 1:
            e = self.iq.get()
            self.iq.task_done()
            print "Get %d from input Queue"%(e)
            self.produce(e)

class Consumer(threading.Thread):
    def __init__(self, oq):
        threading.Thread.__init__(self)
        self.oq = oq

    def run(self):
        while 1:
            e = self.oq.get()
            self.oq.task_done()
            print "Consumer get %d from output queue and consumed"%e

iq = Queue.Queue()
oq = Queue.Queue()

for i in xrange(2):
    iq.put((i+1)*10)

for i in xrange(2):
    t1 = Producer(iq, oq)
    t1.setDaemon(True)
    t1.start()

    t2 = Consumer(oq)
    t2.setDaemon(True)
    t2.start()

iq.join()
oq.join() 
```

但是，每次我运行它时，它的工作方式都不同（给出异常，或者消费者不做任何工作）。我认为问题出在 task_done() 命令中，谁能解释我的错误在哪里？

我修改了消费者类：

```
class Consumer(threading.Thread):
    def __init__(self, oq):
        threading.Thread.__init__(self)
        self.oq = oq

    def run(self):
        while 1:
            e = self.oq.get()
            self.oq.task_done()
            print "Consumer get %d from output queue and consumed"%e
            page = urllib2.urlopen("http://www.ifconfig.me/ip")
            print page 
```

现在每个 task_done() 命令之后的消费者应该连接到网站（这需要一些时间），但它没有，相反，如果 task_done() 之后的代码执行时间很短，它会运行，但如果它很长，它不会运行！为什么？谁能解释我这个问题？如果我将所有内容都放在 task_done() 命令之前，那么我将阻止来自其他线程的队列，这很愚蠢。或者我对python中的多线程有什么遗漏吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T16:47:19.913

从`Queue` [文档](http://docs.python.org/library/queue.html#module-Queue)：

> Queue.task_done() 表示之前入队的任务已经完成。由队列消费者线程使用。对于用于获取任务的每个 get()，对 task_done() 的后续调用会告诉队列该任务的处理已完成。
> 
> 如果 join() 当前处于阻塞状态，它将在处理完所有项目后恢复（这意味着对于已将 put() 放入队列的每个项目都收到了 task_done() 调用）

例如，在您的代码中，您在`Producer`课堂上执行以下操作：

```
def produce(self, e):
    self.oq.put(e*2)
    self.oq.task_done()
    print "Producer %s produced %d and put it to output Queue"%(self.getName(), e*2) 
```

你不应该在`self.oq.task_done()`这里做，因为你没有使用`oq.get()`.

我不确定这是唯一的问题。

编辑：

对于您的另一个问题，您正在使用`iq.join()`and`oq.join()`最后，这会导致您的主线程在其他线程打印检索到的页面之前退出，并且由于您将线程创建为`Daemons`，因此您的 Python 应用程序退出而不等待它们完成执行。（记住`Queue.join()`取决于`Queue.task_done()`）

现在您说“如果我将所有内容都放在 task_done() 命令之前，那么我将阻止其他线程的队列”。我看不出你的意思，这只会阻塞你的`Consumer`线程，但你总是可以创建更多`Consumer`不会被彼此阻塞的线程。

# php - 当使用 php 函数包含文件时不起作用？

> ID：11179165
> 
> 赞同：1
> 
> 时间：2012-06-24T13:28:44.507
> 
> 标签：php

**我的 PHP 功能是**

```
function functionName()
{
include($_SERVER['DOCUMENT_ROOT']."/path/file.php");
} 
```

**File.php 的内容是**

```
$foo = 'bar'; 
```

**调用函数（文件test.php的内容）**

函数名（）；

**当调用函数和变量不起作用时**

```
echo $foo;  <- not works 
```

但是在其作品下方添加代码时（文件test.php的内容）

```
include($_SERVER['DOCUMENT_ROOT']."/path/file.php");
echo $foo; <- its works 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T15:32:15.690

函数中处理的所有变量都仅限于该函数。您可以在函数中创建无数变量，但这些变量在函数之外对您不可用，除了返回变量。

```
function thisIsMyFunction () {
  $var1 = "foo";
  $var2 = "bar";
  return $var1;
}

echo thisisMyFunction(); 
```

将为您提供“foo”，您可以将其放入变量或回显。如果您正在寻找一种加载多个变量的方法，例如配置文件，您可以执行以下操作：

```
config.php
$config["var1"] = "foo";
$config["var2"] = "bar";

index.php
include "config.php";

function myFunction(){
  global $config;
  echo $config["var1"] . " " . $config["var2"];
}

myFunction();

will result in

foo bar 
```

简而言之，除非未定义该函数的某些输出，否则函数中所做的某些事情将保留在函数中。这就是为什么包含函数不起作用的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T14:00:07.827

那是因为如果你不包括其他文件，其中`$foo`定义，它不能只是为它弥补值。

**但是在添加`include("/path/file.php");`它的作品时。**

*当然可以。现在，一件重要的事情：您是否包括基于域名？*

示例：[http](http://www.site.com/path/to/file.php) ://www.site.com/path/to/file.php 将在当前设置中包含来自[http://www.site.com/path/file.php的内容。](http://www.site.com/path/file.php)以下是包含工作的方式：

1.  `/file.php`>> 文件位于域的根目录中。必须在域的根目录中。
2.  `./file.php`>> 文件位于同一目录中。
3.  `../file.php`>> 文件位于父目录中。
4.  `../../file.php`>> 文件位于祖父母目录中。

*（等等）。*

`include()`及其相关功能的作用是`require()`包含另一个文件，就好像它是包含它们的文件的一部分一样。以下是不同之处：

**Include 和 require 是相同的，除非失败：**

*   require 会产生一个致命错误（E_COMPILE_ERROR）并且脚本会杀死自己
*   include 只会产生警告（E_WARNING），脚本将完成其余命令

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-01T09:24:27.677

```
function functionName()
{
global $foo;
global $bar;

include($_SERVER['DOCUMENT_ROOT']."/path/file.php");
}
functionName();
echo $foo;
echo $bar; 
```

# regex - 如何使用正则表达式从字符串中删除 Twitter 名称

> ID：11179170
> 
> 赞同：0
> 
> 时间：2012-06-24T16:32:05.737
> 
> 标签：regex, string, twitter

我想从这样的字符串中删除所有 Twitter 昵称 (@xxx)：

嗨@xxx、@yyy 和@zzz。

我想得到一个只包含（Hi and and）的字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T16:53:41.683

**PHP：**

```
$text = preg_replace('/(\s+|^)@\S+/', '', $Text); 
```

**珀尔：**

```
$text =~ s/(\s+|^)@\S+//g; 
```

* * *

*您可以选择使用`\w+`（单词字符）而不是`\S+`（非空白字符）。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T16:45:12.870

使用 PHP，您可以使用`preg_replace`函数：

```
<?php
   $str = "Hi @xxx and @yyy and @zzz.";
   echo preg_replace('/@\w+/', '', $str);
?> 
```

`/@\w+/`将搜索每个 at 符号后跟一个单词。

对于找到的每个名称，您只需将其替换为空字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-14T04:38:43.153

Ruby 版本的代码：

```
/\A[^@]+\z/ 
```

# libsvm - LIBSVM easy.py 和 grid.py 比 svm-train 更糟糕

> ID：11179171
> 
> 赞同：1
> 
> 时间：2012-06-24T16:32:20.920
> 
> 标签：libsvm

我遇到了 libsvm 的问题，希望您能帮助我

当我使用带有默认参数的 svm-train.exe 时...

```
svm-train  dikomou
svm-predict  dikomou.t  dikomou.model   dikomou.t.predict 
```

我得到准确率 84.72%

当我使用缩放 [-1, 1] 以及像这样的训练和测试文件相同的缩放......

```
svm-scale -l -1 -u 1 -s range1 dikomou > dikomou.scale
svm-scale -r range1 dikomou.t > dikomou.t.scale
svm-train dikomou.scale
svm-predict dikomou.t.scale dikomou.scale.model dikomou.t.predict 
```

我得到的准确率较低 81.94%

如果我对 0 到 1 进行缩放，我会得到 87.5% 的准确率

所以我保持 0 到 1 的比例。

但是当我使用`grid.py`这样的 0 到 1 缩放数据时

```
grid.py dikomou.scale
.. 
8  0.0078125   84 ,25 

$ ./svm-train -c 8 -g 0.0078125 dikomou.scale
$ ./svm-predict dikomou.t.scale dikomou.scale.model dikomou.t.predict 
```

我得到了 84.25% 的交叉验证率和 79.166% 的总准确率，最好给定 c = 8 gamma= 0.0078125

所以`grid.py`给我的少了！！！精度高于使用默认值的 svm 训练的精度。所以我有两个问题。

1.  这怎么可能？？
2.  svm train 使用`c`的默认值是什么？`gamma`（我无法在文档中清楚地找到这一点。是 gamma 1/特征数和 c = 1？）为什么比我使用`grid.py`?

`easy.py`也给了我比默认值更差的结果。我能做些什么？

# php - 如何更改 Facebook Share Option、PHP 的内容

> ID：11179172
> 
> 赞同：-1
> 
> 时间：2012-06-24T16:32:26.733
> 
> 标签：php, facebook

我正在创建一个具有 Facebook 分享功能的 PHP Web 应用程序，它的基本功能是分享内容通常分享整个网站，以及内容本身，我如何更改 Facebook 分享的内容而不是使用来自主页？我的代码是基本的，就像在 Facebook 开发人员中一样。应用程序实际进行了交易，交易成功后，我添加了一个分享按钮，所以我想分享交易成功的内容，而不是整个网站本身。谢谢

这是我从旧 FB Share 选项中获得的代码：

```
<a name="fb_share" type="button" share_url="https://www.1123.com/tl">
##Share on Facebook## </a>
<script src="http://static.ak.fbcdn.net/connect.php/js/FB.Share" type="text/javascript">
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T17:03:16.313

> 所以我想分享成功交易的内容，而不是整个网站本身。

设置一个可以访问该交易数据的 URL，并将有意义的[Open Graph](https://developers.facebook.com/docs/opengraph/)元元素放入该页面。

也许您不仅希望将您的交易作为链接共享，还希望将其定义为一个[*对象*](https://developers.facebook.com/docs/opengraph/define-objects/)，并让您的用户在这些交易对象上发布[*操作*](https://developers.facebook.com/docs/opengraph/define-actions/)……</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T17:48:04.910

我建议继续学习如何使用 Graph API 并继续使用[Like](https://developers.facebook.com/docs/reference/plugins/like/)按钮。您的目标是提供有关您尝试共享的项目的特定数据。

# objective-c - 更多输出流问题...原始数据和奇数输出。我做错什么了？

> ID：11179177
> 
> 赞同：0
> 
> 时间：2012-06-24T16:32:57.517
> 
> 标签：objective-c, ios, xcode, stream, external-accessory

我使用 Apple 的 External Accessory Framework 打开了以下输入和输出蓝牙流：

```
session = [[EASession alloc] initWithAccessory:acc forProtocol:protocol];

if (session){
    [[session inputStream] setDelegate:self];
    [[session inputStream] scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
    [[session inputStream] open];

    [[session outputStream] setDelegate:self];
    [[session outputStream] scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
    [[session outputStream] open];
} 
```

我是这样写的：

```
uint8_t aByte[] = {0x02, 0x06, 0x04};
[[session outputStream] write:aByte maxLength:4];
NSLog(@"%d", aByte[2]); 
```

我是这样读的：

```
 case NSStreamEventHasBytesAvailable:
            NSLog(@"NSStreamEventHasBytesAvailable");
            uint8_t readBuf[128];
            memset(readBuf, 0, sizeof(readBuf));
            NSInteger numberRead = [[session inputStream] read:readBuf maxLength:3];

            if(numberRead < 0){
                NSError *error = [[session inputStream] streamError];
                NSLog(@"%@", [error localizedDescription]);
            }
            else if (numberRead > 0) {
                NSLog(@"numberRead: %d", numberRead);
                NSLog(@"readBuf: %s", readBuf);
            }
            else{
                break;
            }
            break; 
```

我应该从设备“AA4”接收回来，因为它向我发送了两个字母字符，后跟在最后一个流事件中发送给它的 3 个字节。设备上的液晶屏报告它收到了一个 2 一个 4 和一个 6。它报告它发送了一个 A 和 A 和一个 4。但是 "NSLog(@"readBuf: %s", readBuf); " 总是打印：

```
AA + a upside question mark//(can't seem to copy and paste that symbol from xcode) 
```

有人对我做错了什么有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T16:58:41.567

没关系...

我单独打印每个字节而不是作为字符串。将前两个打印为字符，最后一个打印为小数。C风格的输出对我来说仍然很奇怪......

# where-clause - 动态 TSQL 中的 WHERE 子句和防止 SQL 注入

> ID：11179180
> 
> 赞同：1
> 
> 时间：2012-06-24T16:33:25.910
> 
> 标签：where-clause, dynamic-sql

我有一个用于选择行的存储过程。我想像这样动态地传递一个参数来过滤行：

```
Create Procedure CustomerSelectAll
   @FilterExpresion NVARCHAR(MAX)

DECLARE @CMD NVARCHAR(MAX)

SET @CMD = N'SELECT * FROM dbo.Customers '+@FilterExpresion;

EXEC(@CMD) 
```

上面的代码工作正常，但它存在 SQL 注入的风险，所以我希望能够使用任何 WHERE 语句传递多个列，例如：

```
exec CustomerSelectAll
   @FilterExpresion = N' where Name = 'abc' and family = ''xyz''' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T16:49:25.047

我不知道您是否可以将整个 where 子句作为参数传递。但是根据我所掌握的少量知识，我可以建议您使用[sql 解析器](http://www.sqlparser.com/)来查看 where 子句是否只有 select 语句，如果答案是肯定的，那么您可以将 where 子句传递给您的存储过程。希望这个对你有帮助。

# android - Android ListView - 刷新和排序？

> ID：11179181
> 
> 赞同：0
> 
> 时间：2012-06-24T16:33:31.137
> 
> 标签：android, listview, android-listview

我正在这样做：

```
// Member variable
List<String> items = null;

// in onCreate
items = new ArrayList<String>();

// later on in a Task (onPostExecute)
items.add(NewItem);
adapter.notifyDataSetChanged(); 
```

我的列表按字母顺序排列。当我添加一个项目时，它只是将它放在底部。有什么办法可以把它放在合适的地方吗？

（是的，当您第二次返回此页面时，它会以正确的顺序排列，但在添加时不会）

编辑：我首先通过 SQL 脚本调用对其进行排序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T17:55:05.573

我对您的回答的建议是，当您在 ListView 上添加项目时，尝试在添加项目时再次在列表中设置适配器。

这样您就可以在 ListView 上获得刷新的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T18:16:33.173

我决定研究 ArrayList 的任何方法，但没有找到任何方法。但是，我确实找到了这个：

```
items.add(NewItem);
Collections.sort(items); 
```

工作完美！我不得不将 Collections 导入到项目中。

# android - 尝试使用本机代码在 android 手机上显示 Hello World 字符

> ID：11179183
> 
> 赞同：0
> 
> 时间：2012-06-24T16:33:52.837
> 
> 标签：android, arm

使用标准输出库，它可能会将数据传递给 logcat 或其他不朝向显示屏幕的地方。

如何在不通过 dalvik...T_T 的情况下设法使用本机代码显示我想要的内容

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T18:08:56.860

很可能没有官方支持的方式来做到这一点。Android 基本上是基于在 dalvik 虚拟机中运行的 java 代码。

过去，您唯一的选择是在您自己的本机代码和 java 代码之间使用 jni 将数据传递到 java 级别的 Android 显示 API。

在最近的版本中，可以编写所谓的本地活动，其中所有代码都是 C 或 C++。但是，这样的活动仍然在围绕 dalvik 虚拟机构建的进程中运行，该虚拟机运行平台提供的 java 代码，并通过 jni 调用您的代码。

有一个嵌入式 Open GL 本机 API，您可以使用它来绘制文本，但很可能在幕后仍然涉及一些 jni，至少在视图的设置中。

open GL 的原生活动和原生使用在 ndk 发行版中都有示例。

我想你也可以让你的代码通过管道或套接字与显示其输出的不同进程进行交互，但这只是将 dalvik 的使用转移到其他地方。

# javascript - 我将如何在 JavaScript 中设置 CSS 渐变背景？

> ID：11179186
> 
> 赞同：0
> 
> 时间：2012-06-24T06:25:33.377
> 
> 标签：javascript, css

[这里](http://webdesignerwall.com/tutorials/cross-browser-css-gradient)描述了 CSS 渐变，但我不知道如何在 JavaScript 中选择这些属性。如果可能的话，我宁愿不使用 jQuery。

编辑：仅执行以下操作似乎不起作用...

```
document.getElementById("selected-tab").style.background = "#860432";
document.getElementById("selected-tab").style.background = "-moz-linear-gradient(#b8042f, #860432)";
document.getElementById("selected-tab").style.background = "-o-linear-gradient(#b8042f, #860432)";
document.getElementById("selected-tab").style.background = "-webkit-gradient(linear, 0% 0%, 0% 100%, from(#b8042f), to(#860432))";
document.getElementById("selected-tab").style.background = "-webkit-linear-gradient(#b8042f, #860432)"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T06:54:03.367

我不是 JS 专家，但我的猜测是您的设置会相互覆盖，因此您可能需要为此创建一个 CSS 类选择器，例如 .gradientBackground 并查看以下链接：

[使用 JavaScript 更改元素的类](https://stackoverflow.com/questions/195951/change-an-elements-css-class-with-javascript)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T07:49:05.287

如果您不想使用 jQuery，您想如何应用样式？您应该创建一个包含每个浏览器的渐变的类或 ID。然后使用jQuery将该类设置为ID“selected-tab”

```
.someGradient{
    background: #1e5799; /* Old browsers */
    background: -moz-linear-gradient(top,  #1e5799 0%, #2989d8 50%, #207cca 51%, #7db9e8 100%); /* FF3.6+ */
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#1e5799), color-stop(50%,#2989d8), color-stop(51%,#207cca), color-stop(100%,#7db9e8)); /* Chrome,Safari4+ */
    background: -webkit-linear-gradient(top,  #1e5799 0%,#2989d8 50%,#207cca 51%,#7db9e8 100%); /* Chrome10+,Safari5.1+ */
    background: -o-linear-gradient(top,  #1e5799 0%,#2989d8 50%,#207cca 51%,#7db9e8 100%); /* Opera 11.10+ */
    background: -ms-linear-gradient(top,  #1e5799 0%,#2989d8 50%,#207cca 51%,#7db9e8 100%); /* IE10+ */
    background: linear-gradient(top,  #1e5799 0%,#2989d8 50%,#207cca 51%,#7db9e8 100%); /* W3C */
    filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#1e5799', endColorstr='#7db9e8',GradientType=0 ); /* IE6-9 */
} 
```

jQuery

```
$("#selected-tab").addClass('someGradient'); 
```

前

```
 <div id='selected-tab' class='arial'>Hello world</div> 
```

后

```
 <div id='selected-tab' class='arial someGradient'>Hello world</div> 
```

# symfony - Symfony2 控制器中的构造函数

> ID：11179191
> 
> 赞同：8
> 
> 时间：2012-06-24T16:34:45.350
> 
> 标签：symfony, controller

如何在 Symfony2 控制器中定义构造函数。我想在我的控制器的所有方法中获取可用的登录用户数据，目前我在控制器的每个操作中都执行类似的操作来获取登录用户。

```
$em = $this->getDoctrine()->getEntityManager("pp_userdata");
$user = $this->get("security.context")->getToken()->getUser(); 
```

我想在构造函数中执行一次，并使此登录用户可用于我的所有操作

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-24T17:13:25.327

对于在每个控制器操作之前执行代码的通用解决方案，您可以将事件侦听器附加到`kernel.controller`事件，如下所示：

```
<service id="your_app.listener.before_controller" class="App\CoreBundle\EventListener\BeforeControllerListener" scope="request">
    <tag name="kernel.event_listener" event="kernel.controller" method="onKernelController"/>
    <argument type="service" id="security.context"/>
</service> 
```

然后在你`BeforeControllerListener`的控制器中检查它是否实现了一个接口，如果它实现了，你将从接口调用一个方法并传入安全上下文。

```
<?php

namespace App\CoreBundle\EventListener;

use Symfony\Component\HttpKernel\Event\FilterControllerEvent;
use Symfony\Component\Security\Core\SecurityContextInterface;
use App\CoreBundle\Model\InitializableControllerInterface;

/**
 * @author Matt Drollette <matt@drollette.com>
 */
class BeforeControllerListener
{

    protected $security_context;

    public function __construct(SecurityContextInterface $security_context)
    {
        $this->security_context = $security_context;
    }

    public function onKernelController(FilterControllerEvent $event)
    {
        $controller = $event->getController();

        if (!is_array($controller)) {
            // not a object but a different kind of callable. Do nothing
            return;
        }

        $controllerObject = $controller[0];

        // skip initializing for exceptions
        if ($controllerObject instanceof ExceptionController) {
            return;
        }

        if ($controllerObject instanceof InitializableControllerInterface) {
            // this method is the one that is part of the interface.
            $controllerObject->initialize($event->getRequest(), $this->security_context);
        }
    }
} 
```

然后，您希望用户始终可用的任何控制器只需实现该接口并像这样设置用户：

```
use App\CoreBundle\Model\InitializableControllerInterface;

class DefaultController implements InitializableControllerInterface
{
    /**
     * Current user.
     *
     * @var User
     */
    private $user;

    /**
     * {@inheritdoc}
     */
    public function initialize(Request $request, SecurityContextInterface $security_context)
    {
        $this->user = $security_context->getToken()->getUser();
    }
// ....
} 
```

界面无非就是

```
namespace App\CoreBundle\Model;

use Symfony\Component\HttpFoundation\Request;
use Symfony\Component\Security\Core\SecurityContextInterface;

interface InitializableControllerInterface
{
    public function initialize(Request $request, SecurityContextInterface $security_context);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-01T14:33:19.257

我有点晚了，但在控制器中你可以访问用户：

```
$this->getUser(); 
```

应该从 2.1 开始工作

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-26T07:49:40.630

我的做法是：

1.  制作一个空的接口 InitializableControllerInterface
2.  制作事件监听器

```
命名空间 ACMEBundle\Event；

使用 Symfony\Component\HttpKernel\Event\FilterControllerEvent；

类控制器构造器
{
    公共函数 onKernelController(FilterControllerEvent $event)
    {
        $controller = $event->getController();
        if (!is_array($controller)) {
            // 不是一个对象，而是一种不同的可调用对象。没做什么
            返回;
        }

        $controllerObject = $controller[0];
        if ($controllerObject instanceof InitializableControllerInterface) {
            $controllerObject->__init($event->getRequest());
        }
    }
}

```

1.  在您的控制器中添加：

```
类 ProfileController 扩展控制器实现
        可初始化控制器接口
{
公共函数 __init()
    {
$this->user = $security_context->getToken()->getUser();
}

```

您将能够在每个操作中获取 $this->user。

问候

# asp.net-mvc - 按 PK 与用户名性能搜索用户

> ID：11179192
> 
> 赞同：0
> 
> 时间：2012-06-24T16:34:47.140
> 
> 标签：asp.net-mvc, performance, seo, primary-key, lookup

我正在为 SEO 定义自定义路由，并尝试确定 URL 是否应该看起来像 site.com/user/userid/username vs site.com/user/username 其中 user 是控制器，另外两个是不言自明的。现在，当我想到 MS 的成员资格时，它会将用户名存储在 FormsAuthentication.SetAuthCookie 中，并且可以使用它来搜索用户。我读过另一篇文章说要保留 id 并添加用户名或产品名称，你有什么 id 允许更快的查找。你认为最好的方法是什么？我宁愿不在 url 中携带 ID。当我设置 authcookie 时，我可以把它带进去，而不是我猜的用户名，但我觉得用 User.Identity.Name 来称呼它感觉不对，但这只是我。你们有什么感想？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T17:23:54.323

没有人会在 Google 上通过用户名搜索用户，因此从 SEO 的角度来看，这并不重要。您只需要优化那些有可能获得（有价值的）流量的页面。

无论如何，由于该列已编入索引，因此按名称搜索的性能将非常出色。

# c# - 在 C# 中将文件上传到 Dropbox 帐户

> ID：11179193
> 
> 赞同：-1
> 
> 时间：2012-06-24T16:34:47.640
> 
> 标签：c#, windows, dropbox, onedrive, google-drive-api

假设我有 Dropbox 的用户登录信息（他的电子邮件和密码），我如何从 C# 将文件上传到他的帐户？有什么方法或者我应该尝试使用 Skydrive 或 Google Drive 等其他服务吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T18:11:40.120

如果您想使用 Google Drive，文档位于[https://developers.google.com/drive/](https://developers.google.com/drive/)，但是，您永远不应要求其他用户的凭据，而应使用 OAuth 2.0。

参考[指南](https://developers.google.com/drive/v1/reference/)包括 C# 片段，还有一个完整的 ASP.NET MVC 教程可供您入门：[https ://developers.google.com/drive/examples/dotnet](https://developers.google.com/drive/examples/dotnet)

# ios - 当我尝试分配 UIPopoverController 时崩溃

> ID：11179194
> 
> 赞同：1
> 
> 时间：2012-06-24T16:34:48.963
> 
> 标签：ios, uipopovercontroller, alloc

嗨，我对我在这里做错的事情束手无策。有没有人经历过类似的事情？我检查了苹果开发者论坛，谷歌，堆栈溢出，找不到任何东西。

```
MyViewController *myView;
myView = [[MyViewController alloc] initWithNibName:@"MyViewController" bundle:nil];
//or myView = [[MyViewController alloc]init];
UIPopoverController *popover;
popover = [[UIPopoverController alloc] initWithContentViewController:myView];  //always crash at here
//i've tried with some others ViewController but it's still crash. 
```

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T16:38:38.433

假设您正在为 iPad 开发，请尝试提供`popOver`一些框架，并尝试调整`MyViewController`nib 的大小，否则当它尝试加载视图时，它不能因为它太大了！

就像是

```
CGSizeMake(MyViewController.view.frame.size.width, MyViewController.view.frame.size.height); 
```

记得调整它的大小

# xml - 从 XML 分解数据，导入关系表 (SQL Server 2008)

> ID：11179195
> 
> 赞同：7
> 
> 时间：2012-06-24T16:34:49.323
> 
> 标签：xml, sql-server-2008, xquery, relational

我到处寻找帮助。

我对这一切都很陌生，我发现很难理解上面的所有文档。

假设我有这个 XML：

```
<footballteams>
  <team manager="Benitez">
    <name>Liverpool</name>
    <ground>Anfield</ground>
  </team>
  <team manager="Mourinho">
    <name>Chelsea</name>
    <ground>Stamford Bridge</ground>
  </team>
  <team manager="Wenger">
    <name>Arsenal</name>
    <ground>Highbury</ground>
  </team>
</footballteams> 
```

我想从中获取数据并将其加载到一个名为 footballteams(name,manager,ground) 的关系表中。

我想在 SQL Server 2008 中执行此操作，并且从我到处阅读的内容来看，执行此操作的有用方法是 .nodes() 方法，但我就是不明白如何使用它。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-24T17:18:45.293

尝试这样的事情：

```
DECLARE @input XML = '<footballteams>
  <team manager="Benitez">
    <name>Liverpool</name>
    <ground>Anfield</ground>
  </team>
  <team manager="Mourinho">
    <name>Chelsea</name>
    <ground>Stamford Bridge</ground>
  </team>
  <team manager="Wenger">
    <name>Arsenal</name>
    <ground>Highbury</ground>
  </team>
</footballteams>'

SELECT
    TeamName = Foot.value('(name)[1]', 'varchar(100)'),
    Manager = Foot.value('(@manager)', 'varchar(100)'),
    Ground = Foot.value('(ground)[1]', 'varchar(100)')
FROM
    @input.nodes('/footballteams/team') AS Tbl(Foot) 
```

基本上，`.nodes()`创建伪“表”的调用`Tbl`使用单个 XML 列调用`Foot`，该列将包含每个`<team>`XML 节点作为其值。

然后，您可以从该伪表中进行选择，并从该XML 片段中提取 XML 属性 ( `@manager`) 和元素 ( `name`, ) 的各个值，并将它们转换为您选择的类型的 T-SQL 数据值。`ground``<team>`

要将这些值插入到您的表中 - 只需使用`INSERT`基于此的语句：

```
;WITH ShreddedData AS
( 
  SELECT
    TeamName = Foot.value('(name)[1]', 'varchar(100)'),
    Manager = Foot.value('(@manager)', 'varchar(100)'),
    Ground = Foot.value('(ground)[1]', 'varchar(100)')
  FROM
    @input.nodes('/footballteams/team') AS Tbl(Foot)
)
INSERT INTO dbo.FootballTeams(Name, Manager, Ground)
   SELECT TeamName, Manager, Ground
   FROM ShreddedData 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-13T14:20:46.453

通过简单的 XML，您可以在 SSIS 中使用 XML 适配器。它会自动创建一个 XSD。无需编程。如果 XML 更复杂，请使用 www.eXtractor.ONE。一种非常通用的方法，可以处理每种类型的 XML。

# python - Python 生成器输出是整数而不是数字

> ID：11179198
> 
> 赞同：0
> 
> 时间：2012-06-24T16:35:04.033
> 
> 标签：python, generator

一周前我刚刚了解了 Python 中的生成器。据我了解，'yield' 返回一个生成器对象，而不是整个数组。

这是我为获取整数的数字而编写的代码：

```
def getDigits(m):
    for d in str(m):
        yield int(m) 
```

这应该返回作为生成器对象传递给它的整数的数字。但是当我这样做时：

```
for i in getDigits(123):
    print i 
```

我得到的输出为：

```
123
123
123 
```

代替：

```
1
2
3 
```

到底是怎么回事？难道我做错了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-24T16:37:09.687

它应该`yield int(d)`代替`yield int(m)`：

```
def getDigits(m):
    for d in str(m):
        yield int(d) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-24T16:37:28.143

我想你的意思是

```
def getDigits(m):
    for d in str(m):
        yield int(d) 
```

即输出循环内的数字。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-24T16:37:33.783

错字：

```
def getDigits(m):
    for d in str(m):
        yield int(d) 
```

`d`而不是`m`.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-24T16:38:03.860

尝试这样做：

```
yield int(d) 
```

您正在迭代它，但甚至没有使用数字本身。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-18T08:05:58.557

更简单的形式是：

```
getDigits = lammbda m: map(int, str(m)) 
```

# c# - 如何在 C# 中设置 html 表格行的宽度

> ID：11179199
> 
> 赞同：0
> 
> 时间：2012-06-24T16:35:05.037
> 
> 标签：c#, asp.net

这是以下问题链接的后续问题：

[如何在 ASP.NET 网络表单中隐藏列](https://stackoverflow.com/questions/11112112/how-to-hide-columns-in-asp-net-webform)

按照我从上面的链接得到的答案，我正在使用

```
 System.Web.UI.HtmlControls.HtmlTableRow 
```

我想设置整行的宽度。我如何在 C# 中做到这一点？您可以建议的任何其他想法/方式，请告诉我。

如果您还有其他问题，请随时提问。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-24T17:16:29.227

**HTML 标记**

我创建了一个空表来附加后面代码中的行单元格

```
 <table id="table1" runat="server">
   </table> 
```

**代码片段背后的代码**

```
 protected void Page_Load(object sender, System.EventArgs  e){

    System.Web.UI.HtmlControls.HtmlTableRow tr = new HtmlTableRow();
    //setting the style of a table row using the Attributes property
    tr.Attributes.Add("style", "width:500px; background-color:red");
    HtmlTableCell tc = new HtmlTableCell();
    tc.InnerHtml = "this is a test";
    tr.Controls.Add(tc);
    this.table1.Controls.Add(tr); 
```

}

希望这对你有用。

# makefile - Python构建进入无限循环

> ID：11179203
> 
> 赞同：8
> 
> 时间：2012-06-24T16:35:53.580
> 
> 标签：makefile, installation, python-2.7, infinite-loop

尝试在 Snow Leopard 上构建 Python 2.7.3 时，Make 过程似乎陷入了无限循环。似乎配置脚本被一遍又一遍地调用，这很奇怪，因为首先创建 Makefile 的是配置脚本。这是循环的一次运行：

```
Lucas-Wonderleys-MacBook:Python-2.7.3 lucaswonderley$ make
/bin/sh ./configure 
checking for --enable-universalsdk... no
checking for --with-universal-archs... 32-bit
checking MACHDEP... darwin
checking EXTRAPLATDIR... $(PLATMACDIRS)
checking machine type as reported by uname -m... i386
checking for --without-gcc... no
checking for gcc... gcc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables... 
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether gcc accepts -g... yes
checking for gcc option to accept ISO C89... none needed
checking for --with-cxx-main=<compiler>... no
checking for g++... g++
configure: WARNING:

  By default, distutils will build C++ extension modules with "g++".
  If this is not intended, then set CXX on the configure command line.

checking how to run the C preprocessor... gcc -E
checking for grep that handles long lines and -e... /usr/bin/grep
checking for egrep... /usr/bin/grep -E
checking for ANSI C header files... yes
checking for sys/types.h... yes
checking for sys/stat.h... yes
checking for stdlib.h... yes
checking for string.h... yes
checking for memory.h... yes
checking for strings.h... yes
checking for inttypes.h... yes
checking for stdint.h... yes
checking for unistd.h... yes
checking minix/config.h usability... no
checking minix/config.h presence... no
checking for minix/config.h... no
checking whether it is safe to define __EXTENSIONS__... yes
checking for --with-suffix... 
checking for case-insensitive build directory... yes
checking LIBRARY... libpython$(VERSION).a
checking LINKCC... $(PURIFY) $(MAINCC)
checking for GNU ld... no
checking for --enable-shared... no
checking for --enable-profiling... 
checking LDLIBRARY... libpython$(VERSION).a
checking for ranlib... ranlib
checking for ar... ar
checking for svnversion... found
checking for hg... not-found
checking for a BSD-compatible install... /usr/bin/install -c
checking for --with-pydebug... no
checking whether gcc accepts -fno-strict-aliasing... yes
checking which compiler should be used... gcc
checking whether gcc accepts -OPT:Olimit=0... no
checking whether gcc accepts -Olimit 1500... no
checking whether gcc supports ParseTuple __format__... no
checking whether pthreads are available without options... yes
checking whether g++ also accepts flags for thread support... no
checking for ANSI C header files... (cached) yes
checking asm/types.h usability... no
checking asm/types.h presence... no
checking for asm/types.h... no
checking conio.h usability... no
checking conio.h presence... no
checking for conio.h... no
checking curses.h usability... yes
checking curses.h presence... yes
checking for curses.h... yes
checking direct.h usability... no
checking direct.h presence... no
checking for direct.h... no
checking dlfcn.h usability... yes
checking dlfcn.h presence... yes
checking for dlfcn.h... yes
checking errno.h usability... yes
checking errno.h presence... yes
checking for errno.h... yes
checking fcntl.h usability... yes
checking fcntl.h presence... yes
checking for fcntl.h... yes
checking grp.h usability... yes
checking grp.h presence... yes
checking for grp.h... yes
checking ieeefp.h usability... no
checking ieeefp.h presence... no
checking for ieeefp.h... no
checking io.h usability... no
checking io.h presence... no
checking for io.h... no
checking langinfo.h usability... yes
checking langinfo.h presence... yes
checking for langinfo.h... yes
checking libintl.h usability... no
checking libintl.h presence... no
checking for libintl.h... no
checking ncurses.h usability... yes
checking ncurses.h presence... yes
checking for ncurses.h... yes
checking poll.h usability... yes
checking poll.h presence... yes
checking for poll.h... yes
checking process.h usability... no
checking process.h presence... no
checking for process.h... no
checking pthread.h usability... yes
checking pthread.h presence... yes
checking for pthread.h... yes
checking shadow.h usability... no
checking shadow.h presence... no
checking for shadow.h... no
checking signal.h usability... yes
checking signal.h presence... yes
checking for signal.h... yes
checking for stdint.h... (cached) yes
checking stropts.h usability... no
checking stropts.h presence... no
checking for stropts.h... no
checking termios.h usability... yes
checking termios.h presence... yes
checking for termios.h... yes
checking thread.h usability... no
checking thread.h presence... no
checking for thread.h... no
checking for unistd.h... (cached) yes
checking utime.h usability... yes
checking utime.h presence... yes
checking for utime.h... yes
checking sys/audioio.h usability... no
checking sys/audioio.h presence... no
checking for sys/audioio.h... no
checking sys/bsdtty.h usability... no
checking sys/bsdtty.h presence... no
checking for sys/bsdtty.h... no
checking sys/epoll.h usability... no
checking sys/epoll.h presence... no
checking for sys/epoll.h... no
checking sys/event.h usability... yes
checking sys/event.h presence... yes
checking for sys/event.h... yes
checking sys/file.h usability... yes
checking sys/file.h presence... yes
checking for sys/file.h... yes
checking sys/loadavg.h usability... no
checking sys/loadavg.h presence... no
checking for sys/loadavg.h... no
checking sys/lock.h usability... yes
checking sys/lock.h presence... yes
checking for sys/lock.h... yes
checking sys/mkdev.h usability... no
checking sys/mkdev.h presence... no
checking for sys/mkdev.h... no
checking sys/modem.h usability... no
checking sys/modem.h presence... no
checking for sys/modem.h... no
checking sys/param.h usability... yes
checking sys/param.h presence... yes
checking for sys/param.h... yes
checking sys/poll.h usability... yes
checking sys/poll.h presence... yes
checking for sys/poll.h... yes
checking sys/select.h usability... yes
checking sys/select.h presence... yes
checking for sys/select.h... yes
checking sys/socket.h usability... yes
checking sys/socket.h presence... yes
checking for sys/socket.h... yes
checking sys/statvfs.h usability... yes
checking sys/statvfs.h presence... yes
checking for sys/statvfs.h... yes
checking for sys/stat.h... (cached) yes
checking sys/termio.h usability... no
checking sys/termio.h presence... no
checking for sys/termio.h... no
checking sys/time.h usability... yes
checking sys/time.h presence... yes
checking for sys/time.h... yes
checking sys/times.h usability... yes
checking sys/times.h presence... yes
checking for sys/times.h... yes
checking for sys/types.h... (cached) yes
checking sys/un.h usability... yes
checking sys/un.h presence... yes
checking for sys/un.h... yes
checking sys/utsname.h usability... yes
checking sys/utsname.h presence... yes
checking for sys/utsname.h... yes
checking sys/wait.h usability... yes
checking sys/wait.h presence... yes
checking for sys/wait.h... yes
checking pty.h usability... no
checking pty.h presence... no
checking for pty.h... no
checking libutil.h usability... no
checking libutil.h presence... no
checking for libutil.h... no
checking sys/resource.h usability... yes
checking sys/resource.h presence... yes
checking for sys/resource.h... yes
checking netpacket/packet.h usability... no
checking netpacket/packet.h presence... no
checking for netpacket/packet.h... no
checking sysexits.h usability... yes
checking sysexits.h presence... yes
checking for sysexits.h... yes
checking bluetooth.h usability... no
checking bluetooth.h presence... no
checking for bluetooth.h... no
checking bluetooth/bluetooth.h usability... no
checking bluetooth/bluetooth.h presence... no
checking for bluetooth/bluetooth.h... no
checking linux/tipc.h usability... no
checking linux/tipc.h presence... no
checking for linux/tipc.h... no
checking spawn.h usability... yes
checking spawn.h presence... yes
checking for spawn.h... yes
checking util.h usability... yes
checking util.h presence... yes
checking for util.h... yes
checking for dirent.h that defines DIR... yes
checking for library containing opendir... none required
checking whether sys/types.h defines makedev... yes
checking for term.h... yes
checking for linux/netlink.h... no
checking for clock_t in time.h... yes
checking for makedev... yes
checking Solaris LFS bug... no
checking for mode_t... yes
checking for off_t... yes
checking for pid_t... yes
checking for size_t... yes
checking for uid_t in sys/types.h... yes
checking for uint32_t... yes
checking for uint64_t... yes
checking for int32_t... yes
checking for int64_t... yes
checking for ssize_t... yes
checking size of int... 4
checking size of long... 8
checking size of void *... 8
checking size of short... 2
checking size of float... 4
checking size of double... 8
checking size of fpos_t... 8
checking size of size_t... 8
checking size of pid_t... 4
checking for long long support... yes
checking size of long long... 8
checking for long double support... yes
checking size of long double... 16
checking for _Bool support... yes
checking size of _Bool... 1
checking for uintptr_t... yes
checking size of uintptr_t... 8
checking size of off_t... 8
checking whether to enable large file support... no
checking size of time_t... 8
checking for pthread_t... yes
checking size of pthread_t... 8
checking for --enable-toolbox-glue... yes
checking for --enable-framework... no
checking for dyld... always on for Darwin
checking SO... .so
checking LDSHARED... $(CC) -bundle -undefined dynamic_lookup
checking CCSHARED... 
checking LINKFORSHARED... -u _PyMac_Error
checking CFLAGSFORSHARED... 
checking SHLIBS... $(LIBS)
checking for dlopen in -ldl... yes
checking for shl_load in -ldld... no
checking for library containing sem_init... none required
checking for textdomain in -lintl... no
checking for t_open in -lnsl... no
checking for socket in -lsocket... no
checking for --with-libs... no
checking for pkg-config... no
checking for --with-system-expat... no
checking for --with-system-ffi... no
checking for --with-dbmliborder... 
checking for --with-signal-module... yes
checking for --with-dec-threads... no
checking for --with-threads... yes
checking if PTHREAD_SCOPE_SYSTEM is supported... yes
checking for pthread_sigmask... yes
checking if --enable-ipv6 is specified... yes
checking if RFC2553 API is available... yes
checking ipv6 stack type... kame
using libc
checking for OSX 10.5 SDK or later... yes
checking for --with-doc-strings... yes
checking for --with-tsc... no
checking for --with-pymalloc... yes
checking for --with-valgrind... no
checking for --with-wctype-functions... no
checking for dlopen... yes
checking DYNLOADFILE... dynload_shlib.o
checking MACHDEP_OBJS... MACHDEP_OBJS
checking for alarm... yes
checking for setitimer... yes
checking for getitimer... yes
checking for bind_textdomain_codeset... no
checking for chown... yes
checking for clock... yes
checking for confstr... yes
checking for ctermid... yes
checking for execv... yes
checking for fchmod... yes
checking for fchown... yes
checking for fork... yes
checking for fpathconf... yes
checking for ftime... yes
checking for ftruncate... yes
checking for gai_strerror... yes
checking for getgroups... yes
checking for getlogin... yes
checking for getloadavg... yes
checking for getpeername... yes
checking for getpgid... yes
checking for getpid... yes
checking for getpriority... yes
checking for getresuid... no
checking for getresgid... no
checking for getpwent... yes
checking for getspnam... no
checking for getspent... no
checking for getsid... yes
checking for getwd... yes
checking for initgroups... yes
checking for kill... yes
checking for killpg... yes
checking for lchmod... yes
checking for lchown... yes
checking for lstat... yes
checking for mkfifo... yes
checking for mknod... yes
checking for mktime... yes
checking for mremap... no
checking for nice... yes
checking for pathconf... yes
checking for pause... yes
checking for plock... no
checking for poll... yes
checking for pthread_init... no
checking for putenv... yes
checking for readlink... yes
checking for realpath... yes
checking for select... yes
checking for sem_open... yes
checking for sem_timedwait... no
checking for sem_getvalue... yes
checking for sem_unlink... yes
checking for setegid... yes
checking for seteuid... yes
checking for setgid... yes
checking for setlocale... yes
checking for setregid... yes
checking for setreuid... yes
checking for setsid... yes
checking for setpgid... yes
checking for setpgrp... yes
checking for setuid... yes
checking for setvbuf... yes
checking for snprintf... yes
checking for setlocale... (cached) yes
checking for setregid... (cached) yes
checking for setreuid... (cached) yes
checking for setresuid... no
checking for setresgid... no
checking for setsid... (cached) yes
checking for setpgid... (cached) yes
checking for setpgrp... (cached) yes
checking for setuid... (cached) yes
checking for setvbuf... (cached) yes
checking for snprintf... (cached) yes
checking for sigaction... yes
checking for siginterrupt... yes
checking for sigrelse... yes
checking for strftime... yes
checking for sysconf... yes
checking for tcgetpgrp... yes
checking for tcsetpgrp... yes
checking for tempnam... yes
checking for timegm... yes
checking for times... yes
checking for tmpfile... yes
checking for tmpnam... yes
checking for tmpnam_r... no
checking for truncate... yes
checking for uname... yes
checking for unsetenv... yes
checking for utimes... yes
checking for waitpid... yes
checking for wait3... yes
checking for wait4... yes
checking for wcscoll... yes
checking for _getpty... no
checking for chroot... yes
checking for link... yes
checking for symlink... yes
checking for fchdir... yes
checking for fsync... yes
checking for fdatasync... no
checking for epoll... no
checking for kqueue... yes
checking for ctermid_r... yes
checking for flock declaration... yes
checking for flock... yes
checking for getpagesize... yes
checking for broken unsetenv... no
checking for true... true
checking for inet_aton in -lc... yes
checking for chflags... yes
checking for lchflags... yes
checking for inflateCopy in -lz... yes
checking for hstrerror... yes
checking for inet_aton... yes
checking for inet_pton... yes
checking for setgroups... yes
checking for openpty... yes
checking for forkpty... yes
checking for memmove... yes
checking for fseek64... no
checking for fseeko... yes
checking for fstatvfs... yes
checking for ftell64... no
checking for ftello... yes
checking for statvfs... yes
checking for dup2... yes
checking for getcwd... yes
checking for strdup... yes
checking for getpgrp... yes
checking for setpgrp... (cached) yes
checking for gettimeofday... yes
checking for major... yes
checking for getaddrinfo... yes
checking getaddrinfo bug... no
checking for getnameinfo... yes
checking whether time.h and sys/time.h may both be included... yes
checking whether struct tm is in sys/time.h or time.h... time.h
checking for struct tm.tm_zone... yes
checking for struct stat.st_rdev... yes
checking for struct stat.st_blksize... yes
checking for struct stat.st_flags... yes
checking for struct stat.st_gen... yes
checking for struct stat.st_birthtime... no
checking for struct stat.st_blocks... yes
checking for time.h that defines altzone... no
checking whether sys/select.h and sys/time.h may both be included... yes
checking for addrinfo... yes
checking for sockaddr_storage... yes
checking whether char is unsigned... no
checking for an ANSI C-conforming const... yes
checking for working volatile... yes
checking for working signed char... yes
checking for prototypes... yes
checking for variable length prototypes and stdarg.h... yes
checking for socketpair... yes
checking if sockaddr has sa_len member... yes
checking whether va_list is an array... yes
checking for gethostbyname_r... no
checking for gethostbyname... yes
checking for __fpu_control... no
checking for __fpu_control in -lieee... no
checking for --with-fpectl... no
checking for --with-libm=STRING... default LIBM=""
checking for --with-libc=STRING... default LIBC=""
checking whether C doubles are little-endian IEEE 754 binary64... yes
checking whether C doubles are big-endian IEEE 754 binary64... no
checking whether C doubles are ARM mixed-endian IEEE 754 binary64... no
checking whether we can use gcc inline assembler to get and set x87 control word... yes
checking for x87-style double rounding... no
checking whether tanh preserves the sign of zero... yes
checking for acosh... yes
checking for asinh... yes
checking for atanh... yes
checking for copysign... yes
checking for erf... yes
checking for erfc... yes
checking for expm1... yes
checking for finite... yes
checking for gamma... yes
checking for hypot... yes
checking for lgamma... yes
checking for log1p... yes
checking for round... yes
checking for tgamma... yes
checking whether isinf is declared... yes
checking whether isnan is declared... yes
checking whether isfinite is declared... yes
checking whether POSIX semaphores are enabled... yes
checking for broken sem_getvalue... yes
checking digit size for Python's longs... no value specified
checking wchar.h usability... yes
checking wchar.h presence... yes
checking for wchar.h... yes
checking size of wchar_t... 4
checking for UCS-4 tcl... no
checking whether wchar_t is signed... yes
checking what type to use for unicode... unsigned short
checking whether byte ordering is bigendian... no
checking whether right shift extends the sign bit... yes
checking for getc_unlocked() and friends... yes
checking how to link readline libs... -lreadline
checking for rl_callback_handler_install in -lreadline... yes
checking for rl_pre_input_hook in -lreadline... yes
checking for rl_completion_display_matches_hook in -lreadline... yes
checking for rl_completion_matches in -lreadline... yes
checking for broken nice()... no
checking for broken poll()... no
checking for struct tm.tm_zone... (cached) yes
checking for working tzset()... yes
checking for tv_nsec in struct stat... no
checking for tv_nsec2 in struct stat... yes
checking whether mvwdelch is an expression... yes
checking whether WINDOW has _flags... no
checking for is_term_resized... yes
checking for resize_term... yes
checking for resizeterm... yes
checking for /dev/ptmx... yes
checking for /dev/ptc... no
checking for %lld and %llu printf() format support... yes
checking for %zd printf() format support... yes
checking for socklen_t... yes
checking for build directories... done
configure: creating ./config.status
config.status: creating Makefile.pre
config.status: creating Modules/Setup.config
config.status: creating Misc/python.pc
config.status: creating Modules/ld_so_aix
config.status: creating pyconfig.h
config.status: pyconfig.h is unchanged
creating Modules/Setup
creating Modules/Setup.local
creating Makefile
CONFIG_FILES=Makefile.pre CONFIG_HEADERS= /bin/sh config.status
config.status: creating Makefile.pre
make -f Makefile.pre Makefile
/bin/sh ./configure 
checking for --enable-universalsdk... no 
```

有人对可能导致这种情况的原因有任何提示吗？让我知道是否有任何其他有用的信息或日志。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-25T02:19:29.870

根据 ，像您一样运行脚本`Makefile`的唯一原因是，如果不存在或时间戳早于. 你可以在你的, 它说`configure``make``config.status``configure``Makefile`

```
# Run the configure script.
config.status:  $(srcdir)/configure
        $(SHELL) $(srcdir)/configure $(CONFIG_ARGS) 
```

在 Snow Leopard 上构建 Python 2.7.3 对我来说效果很好。但是在我这样做之后`touch -t 201301010000 configure`，我`make`开始像你一样循环，因为`configure`现在的时间戳是 2013 年 1 月 1 日。

根据你的输出，`config.status`确实存在。所以我的猜测是，出于某种原因，时间戳`configure`是在未来。在这种情况下，您所要做的就是`touch configure`给它当前时间，然后`make`再次运行。或者你可以让`make`循环一段时间，直到与你的时间戳相对应的日期之后`configure`:-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T09:08:43.360

我在centos 5机器上遇到了这个问题并做了以下事情。看来这与我的日期错误有关。百胜安装ntp

```
- vi /etc/ntp.conf  (change to just 1 line: "server ntp.myfloridacity.us")
- cp /etc/ntp.conf /etc/ntpd.conf   # just to be sure

ntpdate -u ntp.myfloridacity.us
chkconfig ntpd on
service ntpd start 
```

# django - 如何在 Django 项目中找到我的项目名称？

> ID：11179204
> 
> 赞同：7
> 
> 时间：2012-06-24T16:35:55.563
> 
> 标签：django, pycharm

我有一个 pycharm 项目，大概还有一个 Django 项目。也许它们是相同的，也许不是-我不确定区别。

无论如何，在我的 settings.py 文件（位于目录的根 `project`目录中，我认为这是我的 pycharm 项目）我有：

```
ROOT_URLCONF = 'dumpstown.urls' 
```

这是否意味着`dumpstown`我的项目名称？还是我的pycharm项目名称？有什么区别？因为我*还有*一个名为的文件夹`dumpstownapp`，其中包含我所有的 models.py 和 view.py 文件。我原以为那`dumpstownapp`是 Django 项目，但我真的不知道！

所以，简而言之：

在此文件夹设置中

```
folderA
    folderB
        views.py
        models.py
        <other stuff>
    templates folder
    settings.py
    <other stuff> 
```

这是“Django项目名称”〜我的意思是，如果我在我的models.py（如上所示）中定义了一个UserProfile，我`AUTH_PROFILE_MODULE`需要什么条目？我从 django 文档中得到了一些理解——我假设

```
dumpstownapp.models.UserProfile 
```

但是从我得到的文档中

```
dumpstownapp.UserProfile 
```

或者也许我的应用程序被称为 dumpstown？然后我会得到什么*？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T17:15:49.957

FolderA 是 Django 项目文件夹，folderB 是 Django 应用程序文件夹。

我没有使用用户配置文件，但根据文档（[https://docs.djangoproject.com/en/dev/topics/auth/#storing-additional-information-about-users](https://docs.djangoproject.com/en/dev/topics/auth/#storing-additional-information-about-users)）它应该包含一个包含Django 应用名称和模型名称用点隔开，所以`"dumpstownapp.UserProfile"`应该是正确的。如果您显示错误，有人可能会为您提供更好的帮助..

Django 文档曾经说项目文件夹的父级（即文件夹 A 的父级）应该在路径上，但我相信已经更改为还包括项目文件夹本身（即文件夹 A）——因为它使共享Django 应用程序更容易。PyCharm 似乎认为是这种情况，因为按 Alt+F7 为新使用的模块自动添加导入会创建一个导入语句，假设文件夹 A 在导入路径上（我是 PyCharm 的相对新手，我我在 Django 0.96 时代开始的项目上使用它，所以我可能只是设置错误..）但是 folderA 既是 Django 又是 PyCharm 项目（.idea 文件是 PyCharm 存储其项目数据的地方）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-11-01T12:02:10.900

在我的一个 django-app git-submodule 项目中，我需要找出使用 django-app/library 的 Django 项目的名称。为此，我试图获取正在执行的文件的路径，在路径中找到我的包并获取它上面的文件夹。然而，事实证明，在生产服务器上，该项目被部署在一个具有不同名称的文件夹中（标准名称`www`或类似的名称）。所以这种方式并不完全可靠。

所以我最终`PROJECT`在 django 设置文件中设置了一个变量并使用它。

# ruby - 为什么额外的括号会在这段代码中有所不同？

> ID：11179205
> 
> 赞同：1
> 
> 时间：2012-06-24T16:36:03.830
> 
> 标签：ruby

*   1个括号：

    ```
    print ( (1..10).collect do |x| x**2 end )
    SyntaxError: compile error 
    ```

    更多细节：

    ```
    (irb):1: syntax error, unexpected kDO_BLOCK, expecting ')'
    print ( (1..10).collect do |x| x**2 end )
                              ^
    (irb):1: syntax error, unexpected kEND, expecting $end
    print ( (1..10).collect do |x| x**2 end )
                                           ^ 
    ```

*   2个括号：

    ```
    print (( (1..10).collect do |x| x**2 end ))
    149162536496481100=> nil 
    ```

`print (a) do <...>`我理解和之间的区别`print(a) do <...>`。但我的情况有什么不同？为什么两个括号不一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T17:08:51.463

### TL;DR

The reason adding extra parentheses "works" is because nested parentheses provide higher precedence to the innermost expression. This disambiguates the tokens for the parser, and allows the statement to be properly evaluated as an expression rather than a method argument.

### Analysis

It has to do with the binding precedence of the keywords. Braces have higher precedence than the do/end keywords, so this will work:

```
print ( (1..10).collect { |x| x**2 } ) 
```

because it's interpreting the parenthesized expression as an expression boundary, rather than as bounding a method argument.

You could also do:

```
print( (1..10).collect do |x| x**2 end ) 
```

because here the parentheses bound an argument, rather than separate an expression.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T17:19:56.687

用这个：

```
print((1..10).collect do |x| x**2 end) 
```

更好的是：

```
print((1..10).collect do |x|; x**2; end) 
```

始终删除方法名称和括号之间的空格。它是 ruby​​ 解释器的语法分析之一。如果同时放置空格和括号，ruby 有时无法正确解释。

当您将单独的代码行放在一行中时，使用`;`to 分隔（因为 do end 块应该放在单独的行中）

# java - java对象编组

> ID：11179206
> 
> 赞同：0
> 
> 时间：2012-06-24T16:36:18.837
> 
> 标签：java, xml, reflection, marshalling

在谈到大多数 Java-XML 数据绑定 API 中的对象编组时，有人说 XML 文件是从内存中的用户定义类重新创建的？我很困惑说（用户从内存中定义的类）。我知道在需要实现编组过程的情况下，使用反射将有助于获取类名和/或字段，但是如何访问数据（元素或属性的值）？

有没有人可以稍微解释一下这个过程？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T16:47:45.603

您可以使用反射访问它们。例如，反射不仅返回名称，还返回字段所包含的值。

可以使用以下代码获得一个简单的示例：

```
import java.lang.reflect.Field;

public class ReflectionTest {

    public static void main(final String[] args) throws Exception {
        Object obj = new Person("Person Name", 20);

        for (Field f : obj.getClass().getDeclaredFields()) {
            f.setAccessible(true);
            System.out.println(f.getName() + " = " + f.get(obj));
        }
    }

    public static class Person {
        private final String name;
        private final int age;

        public Person(final String name, final int age) {
            super();
            this.name = name;
            this.age = age;
        }

    }

} 
```

此代码将打印出：

```
name = Person Name
age = 20 
```

如您所见，每个字段的值都是使用 method 访问的`Field.get(Object)`。[你可以在这里](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/reflect/Field.html)找到更多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T16:56:21.310

编组对象引用的数据也必须是可编组的。

例如，请参阅[XmlAttribute](http://docs.oracle.com/javase/6/docs/api/javax/xml/bind/annotation/XmlAttribute.html) javadoc：在某些情况下，引用数据必须是简单类型（String、float、...）或编组上下文已知的类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T16:49:35.833

字段值也是如此，您可以使用反射轻松读取它们的值：此示例读取`MyObject.someField`字段值。

```
Class  aClass = MyObject.class
Field field = aClass.getField("someField");
MyObject objectInstance = new MyObject();
Object value = field.get(objectInstance); 
```

# javascript - 来自数字的画布填充样式

> ID：11179208
> 
> 赞同：1
> 
> 时间：2012-06-24T16:36:33.410
> 
> 标签：javascript, html, canvas

我试图让我的画布使用 ARGB 整数数组中的填充样式。

这是一个可以提升到 JSFiddle 的最小工作示例：

```
var ctx = $('#cv')[0].getContext("2d");
var pal = [0x00000000, 0xff000000, 0xffff0000];

var col = '"#' + (pal[2]&0xffffff).toString(16) + '"';
alert(col);

ctx.fillStyle = col;
ctx.fillRect(0, 0, 200, 200); 
```

这给了我一个黑色矩形，并且 fillStyle 仍然存在`"#000000"`，但会提示正确的颜色。

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T16:42:08.610

不要添加引号。

这可以 ：

```
var col = '#' + (pal[2]&0xffffff).toString(16); 
```

当你这样做时，你正在构建一个包含引号的字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T16:44:33.237

您还可以使用[数字颜色值](http://www.w3.org/TR/css3-color/#numerical)来指定`fillStyle`. `rgb`and`rgba`运算符可能有助于使您的意图更具可读性和明确性。

# google-apps-script - 在 Googlesites 中使用 UiApp.createApplication() 两次

> ID：11179213
> 
> 赞同：0
> 
> 时间：2012-06-24T16:37:13.393
> 
> 标签：google-apps-script

我编写了一个从电子表格运行的脚本。

我有

*   一个主界面
*   当用户输入的详细信息符合特定条件时，将显示一个警告 UiApp。

我使用了两个不同的函数，

```
var app = UiApp.createApplication();
 /*....
   ....
   .... */
doc.show(app); 
```

但是，当我使用 Googlesite 的脚本编辑器时，我只能使用 doget(e) 创建一个 UIapp。

每当我使用时，

```
var app = UiApp.createApplication(); 
```

在另一个功能中，效果不佳，是否可以有多个 UiApps 或者我应该只为我的应用程序使用一个 UI？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T16:52:18.437

您不能两次调用 createApplication() 。这将导致错误。考虑使用 DialogBox 小部件在现有 UI 之上显示消息。

[https://developers.google.com/apps-script/class_dialogbox](https://developers.google.com/apps-script/class_dialogbox)

# php - 检索多个上传文件的文件扩展名（类上传，PHP）

> ID：11179220
> 
> 赞同：1
> 
> 时间：2012-06-24T16:37:51.040
> 
> 标签：php, arrays, forms, class, file-upload

语言：**PHP** / 使用[Colin Verot 的](http://www.verot.net/download/class.upload.php/class.upload.txt)[**类上传**](http://www.verot.net/download/class.upload.php/class.upload.txt)
关于：**多重上传**

下面的代码已经很好地上传了文件，它可以工作......
**问题：我无法弄清楚如何获取文件*扩展名***。
（在下面的评论中，我已经指定了我的问题区域在哪里......）

```
// CONNECTION TO DATABASE HERE...

// INCLUDE UPLOAD CLASS LIBRARY
include (dirname(__FILE__).'/lib/class.upload.php');

$files = array();
foreach ($_FILES['fileupload'] as $k => $l)
{
    foreach ($l as $i => $v)
    {
        if (!array_key_exists($i, $files))
        $files[$i] = array();
        $files[$i][$k] = $v;
        $imagename = $_FILES['fileupload']['name'];
    }
}

foreach ($files as $file) {

            // THIS IS MY PROBLEM AREA, GETTING FILE EXTENSION
            $ext=strchr($imagename,".");

            $generate_name = rand(100,99999); 
            $generate_name_extra = rand(200,9999);
            $filenamex = "PHOTO_".$generate_name.$generate_name_extra."_".time();
            $filenamex_thumb = $filenamex."_thumb";

            // COMPLETE FILENAME WITH EXTENSION
            $filename = $filenamex.strtolower($ext);
            $handle = new upload($file);
            if ($handle->uploaded) {
            ///// 1 ////////////////////////////////////////////////////////////////////
            $handle->file_new_name_body   = $filenamex_thumb;
            $handle->image_resize         = true;
            $handle->image_x              = '300';
            $handle->image_ratio_y        = true;
            $handle->jpeg_quality = '100';

            // ABSOLUTE PATH BELOW
            $handle->process($absoRoot.'covers/thumbs/');

            if ($handle->processed) {

            // SUCCESSFUL RESPONSE

        }
      else
        {

         // FAILED RESPONSE

        }     
    }
} 
```

网络表单是：

```
<form method="post" action="upload.php" enctype="multipart/form-data">
<input name="fileupload[]" id="fileupload" type="file" multiple> 
```

我真的非常需要文件扩展名来正确地在线提供文件，但我不知道在哪里可以找到它。我尝试过使用：`$files[$i][$k]`而不是`$imagename`在我上面指定的*问题区域*以及`$file`其他可能的解决方案中，但我无法确定哪个会给我带有扩展名的文件名。

希望有人能指出来。感谢您的时间和帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T16:41:57.477

```
$ext=array_pop(explode('.', $imagename)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T16:52:38.137

您正在寻找的功能是[pathinfo()](http://php.net/manual/en/function.pathinfo.php)。

```
$pathdata = pathinfo($filename);
$extension = $pathdata['extension']; 
```

# c# - C# New process window does not hide

> ID：11179221
> 
> 赞同：3
> 
> 时间：2012-06-24T16:38:02.270
> 
> 标签：c#, process

> **Possible Duplicate:**
> [Hide Command Window in C# Application](https://stackoverflow.com/questions/3440105/hide-command-window-in-c-sharp-application)

in the console app, I want to run the cmd command, but a new window is being created, why ?

```
 Process process = new Process();
 ProcessStartInfo startInfo = new ProcessStartInfo();
 startInfo.WindowStyle = ProcessWindowStyle.Hidden;
 startInfo.CreateNoWindow = true;
 startInfo.UseShellExecute = false;
 startInfo.FileName = "cmd.exe";
 startInfo.WorkingDirectory = @"C:\m_f";
 startInfo.Arguments = "/c START _creator.bat";
 process.StartInfo = startInfo;
 process.Start(); 
```

## edit

I had to change some code to:

```
 startInfo.FileName = @"C:\m_f\_creator.bat";
 startInfo.WorkingDirectory = @"C:\m_f\";
 startInfo.Arguments = "some_args"; 
```

now it works

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T16:47:24.263

`start` spawns a new window, regardless of whether the parent shell has a window or not.

To run a batch file `cmd /c foo.cmd` suffices, or even `foo.cmd`.

# django - 在获取登录用户的个人资料时，无法使用来自 db 的查询访问 Django 个人资料

> ID：11179226
> 
> 赞同：0
> 
> 时间：2012-06-24T16:38:33.160
> 
> 标签：django, django-models, django-profiles

我正在用 Django 开发一个站点并拥有两种类型的配置文件。其中之一名为Person。所以我试图访问一个 Person 对象，使用以下代码：

```
from django.contrib.auth.forms import UserCreationForm
from django.template import RequestContext
from django.shortcuts import render_to_response,get_object_or_404
from django.core import urlresolvers
from django.http import HttpResponseRedirect
from django.contrib.auth.decorators import login_required
from accounts.forms import UserRegistrationForm, UserProfileForm
from pprint import pprint
from django.http import HttpResponse
from  models import User
from models import UserProfile

def profile(request, url,template_name='person/profile.html'):
    user=User(username=url).get_profile().person;
    return HttpResponse(user) 
```

它给出了错误：

```
DoesNotExist at /p/Haafiz/
UserProfile matching query does not exist. 
```

在另一个地方，我正在尝试使用以下代码：

```
from django.contrib.auth.forms import UserCreationForm
from django.template import RequestContext
from django.shortcuts import render_to_response,get_object_or_404
from django.core import urlresolvers
from django.http import HttpResponseRedirect
from django.contrib.auth.decorators import login_required
from accounts.forms import UserRegistrationForm, UserProfileForm
from pprint import pprint
from django.http import HttpResponse
from accounts.forms import UserProfile

@login_required
def dashboard(request,template_name="account/dashboard.html"):
    return HttpResponse(request.user.get_profile().person) 
```

在这种情况下，它工作正常。在我试图从从数据库获取的对象访问配置文件的第一个地方可能会出现什么问题？这两种情况对我来说似乎都是一样的，但在上述情况中存在问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T17:56:42.153

`User(name=url)`只生成一个用户实例，而不是查询特定用户的数据库。

改变

```
user=User(username=url).get_profile().person 
```

至

```
user = User.objects.get(username=url).get_profile().person 
```

# ios - 将项目从 Cocos2d v1.x 过渡到 v2.x 再到 ARC

> ID：11179229
> 
> 赞同：1
> 
> 时间：2012-06-24T16:39:01.570
> 
> 标签：ios, xcode, cocos2d-iphone, refactoring, automatic-ref-counting

我可能听起来很懒惰，但我对如何继续这个主题有点困惑。我已经按照[这个指南](http://www.learn-cocos2d.com/2012/04/enabling-arc-cocos2d-project-howto-stepbystep-tutorialguide/)做得很好。

我的目标是将 Cocos2d v1.x 游戏项目转换为 Cocos2d v2.x，然后将项目代码重构为 ARC。

首先，我创建了一个空的 HelloWorld Cocos2d v2.x 项目并创建了 v2.x 静态库（来自 Steffen 的指南）。然后我将代码压缩到 ARC，HelloWorld 运行顺利。

问题是当我尝试将我已经编写的不会向 ARC 抱怨的类添加到同一个项目时（假设不会有很多 Cocos2d v2.x 与 v1.x 问题 - 例如使用不推荐使用的方法和类像 TouchJSON - 我的项目至少在我所见的范围内没有）。因此，我在项目中添加了一些不依赖于游戏其余部分的 Game 类（以减少潜在的 Cocos2d v2.Vs v1 问题的数量），以查看 ARC covnersion 是否适用于这些作为证明概念。添加它们后，我选择了：XCode 中的 EDIT->Refactor 选项。

但是现在编译器在以下方法中给了我一些 ARC 警告消息，例如“ARC 禁止自动释放的显式消息发送”：

```
return [[[self alloc] init] autorelease]; 
```

或者已经写好的dealloc方法的类似问题。

我假设 EDIT->Refactor 会更改添加的代码，但它似乎只工作一次。对此有任何提示吗？**我应该在重构代码之前将所有代码添加到新项目模板中吗？**

编辑：为了验证它是否是 XCode 错误，我创建了一个没有 Cocos2d 库的空 iOS 项目，然后将其转换为 ARC。然后创建了一个新的 NSObject 空子类并添加了一个 dealloc 方法并再次运行转换，它确实有效！所以我可能没有正确遵循一些步骤来创建和链接到静态库..

除此之外还有其他一些小问题（不是 XCode 相关，而是 Cocos2d v2.x 相关），例如**CDXPropertyModifierAction**不会自动包含到 CocosDenshion 文件夹中，我必须在创建静态文件后将其添加到项目中库（当我注意到这个问题时）.. 但我想这与模板创建有关。

谢谢阅读！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T10:23:01.530

所以，是的，我可以确认评论中的解决方案确实有效。像往常一样，一些 IT 事情只是在各种选项中玩弄一下，看看它是否能改变预期（这不是一个错误，但我是愚蠢还是懒惰）。

对我有用的是使用 XCode 菜单中的 EDIT->Refactor 并取消选择我在创建静态库后转换的 Cocos2d 2.x 模板在第一个实例中创建的文件（例如 main.m 和 AppDelegate .m)（询问是否不清楚）。这顺利地将我所有新转换的 Cocos2d 2.x 类转换为 ARC 投诉类，是的，我的项目完全支持 Cocos2d 2.x 和 ARC :)。

请在下面找到我取消选择以使其正常工作的文件的屏幕截图： ![在此处输入图像描述](../Images/ef405b890628d07d98983d723a4fea8a.png)

# magento - Magento 1.6 CE 产品保存观察者，运行良好，但未找到预期数据

> ID：11179231
> 
> 赞同：0
> 
> 时间：2012-06-24T16:39:41.520
> 
> 标签：magento, save, product

我创建了一个观察者，它似乎被检测到并且运行良好。观察者用于向产品动态添加自定义选项数据。

我最初遇到了 MYSQL 约束违规，在网上研究后，我认为这是由于观察者试图将自定义选项数据添加到数据库中，在我创建的新产品之前，实际上已保存到数据库中。

我更改了我的 config.xml，因此“catalog_product_save_before”现在是“catalog_product_save_after”。产品保存良好，但我的观察者中指定的自定义选项数据不在产品详细信息中。

我的 config.xml：

```
<events>
            <catalog_product_save_after>
                <observers>
                    <micoavp>
                        <type>singleton</type>
                        <class>Bsm_Micoavp_Model_Observer</class>
                        <method>Add_CustomOptions_Automatically</method>
                    </micoavp>
                </observers>
            </catalog_product_save_after>
</events> 
```

我的观察者代码：

```
public function Add_CustomOptions_Automatically($observer) {

       $event = $observer->getEvent();
       $product = $event->getProduct();

   $optionData = array(
                      'is_delete'         => 0,
                      'is_require'        => false,
                      'previous_group'    => '',
                      'title'             => 'want to preorder ? ',
                      'type'              => 'checkbox',
                      'price_type'        => 'fixed',
                      'price'             => '20.0000',
                      'sort_order'        => 0,
                      'values'            => array(
                                                    array(
                                                    'is_delete'     => 0,
                                                    'title'         => 'preorder',
                                                    'price_type'    => 'percent',
                                                    'price'         => -20,
                                                    'sku'           => 'product sku',
                                                    'option_type_id'=> -1,
                                                    ))

                 );
   $product->setHasOptions(1);

  $opt = Mage::getModel('catalog/product_option');
   $opt->setProduct($product);
   $opt->addOption($optionData);
   $opt->saveOptions();      

          Mage::log("option should be added now");

 } 
```

我从这个 url 得到了代码，它声明它是 1.5 CE： [http ://www.webmasterbulletin.net/2011/04/magento-programmatically-add-custom-options/1417](http://www.webmasterbulletin.net/2011/04/magento-programmatically-add-custom-options/1417)

有谁知道是否需要进行 1.6 相关的调整才能使其正常工作？指定的自定义选项数据在此阶段只是一个测试，一旦我可以让它工作，我将更改要添加的选项数据。

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T10:44:58.517

上面的代码似乎一切正常。只需要在最后添加以下行。

```
 $product->addOption($opt); 
```

# performance - == 运算符与 < 或 > 运算符的成本

> ID：11179235
> 
> 赞同：-5
> 
> 时间：2012-06-24T16:40:10.303
> 
> 标签：performance, operators, micro-optimization

这实际上只是一个学术问题，我只是想知道哪个更快。我猜差异可以忽略不计，但我还是想知道。

```
if( (x == 1) || (x == 2) ) 
```

对比

```
if (x < 3) 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T17:27:54.630

在您提供的表格中，复杂性存在明显差异：第一个代码使用 3 个运算符，然后是第二个 - 仅一个。但是好的，让我们把这段代码放在并假设你想比较`>`（或`<`）和`==`（`!=`）。如果您在检查程序时遇到过汇编程序（但我打赌您没有），您会注意到这样的代码

```
if (x < 3) /* action */; 
```

被翻译成类似的东西（对于x86 CPU）：

```
 cmp %eax, 3   // <-- compare EAX and 3\. It modifies flags register(*1) (namely ZF, CF, SF and so on)
  jge @@skip    // <-- this instruction tells CPU to jump when some conditions related to flags are met(*2).
                // So this code is executed when jump is *not* made (when x is *not*
                // greater or equal than 3.
  /* here is action body */
@@skip:
  // ... 
```

现在考虑这段代码：

```
if (x == 3) /* action */; 
```

它将给出几乎相同的程序集（当然，它可能与我的不同，但在语义上没有区别）：

```
 cmp %eax, 3
  jne @@skip // < -- here is the only difference
  /* action is run when x is equal to 3 */
@@skip:
  ... 
```

这两个运算符（`jge`和`jne`其他跳转）都以相同的速度完成它们的工作（因为 CPU 是这样制造的，但这显然取决于它的架构）。对性能的影响更大的是跳转距离（代码位置之间的差异）、缓存未命中（当处理器错误地预测跳转时）等等。有些指令甚至更有效（例如使用更少的字节），但请记住唯一的一点：*不要对它们给予太多关注*。进行算法优化总是更好，不要节省匹配。让编译器为你做——在这类问题上它确实更胜任。专注于你的算法、代码可读性、程序架构、容错性。让速度成为最后一个因素。

(*1): [http://en.wikipedia.org/wiki/FLAGS_register_%28computing%29](http://en.wikipedia.org/wiki/FLAGS_register_%28computing%29)
(*2): [http://www.unixwiz.net/techtips/x86-jumps.html](http://www.unixwiz.net/techtips/x86-jumps.html)

# javascript - ToggleClass 动画 jQuery？

> ID：11179238
> 
> 赞同：40
> 
> 时间：2012-06-24T16:40:40.437
> 
> 标签：javascript, jquery, html

我的网站上有一个部分，当用户点击我希望它展开时，我正在使用 jQuery 的`toggleClass`...

```
expandable: function(e) {
    e.preventDefault();
    $(this).closest('article').toggleClass('expanded', 1000);
} 
```

这工作正常，只是我想以某种方式对其进行动画处理。在 chrome 中，我的文章慢慢增长到新的大小，只有在 Firefox 中它“立即”调整自身大小而没有动画，有没有办法让这个动画？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-06-24T17:12:48.197

jQuery UI 扩展了 jQuery native`toggleClass`以采用第二个可选参数：`duration`

```
toggleClass( class, [duration] ) 
```

[文档 + 演示](http://jqueryui.com/demos/toggleClass/)

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-06-24T16:42:11.877

`.toggleClass()`不会动画，你应该去`slideToggle()`或`.animate()`方法。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2015-02-27T02:42:54.647

你可以简单地使用 CSS 过渡，看到[这个小提琴](http://jsfiddle.net/fj639rc6/)

```
.on {
color:#fff;
transition:all 1s;
}

.off{
color:#000;
transition:all 1s;
} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2016-04-16T15:12:47.423

我尝试使用 toggleClass 方法在我的网站上隐藏一个项目（使用可见性：隐藏而不是显示：无）并带有轻微的动画，但由于某种原因动画不起作用（可能是由于旧版本的 jQuery UI ）。

该类已正确删除并添加，但我添加的持续时间似乎没有任何区别 - 该项目只是添加或删除而没有任何效果。

因此，为了解决这个问题，我在切换方法中使用了第二个类并应用了 CSS 过渡：

CSS：

```
.hidden{
    visibility:hidden;
    opacity: 0;
    -moz-transition: opacity 1s, visibility 1.3s;
    -webkit-transition: opacity 1s, visibility 1.3s;
    -o-transition: opacity 1s, visibility 1.3s;
    transition: opacity 1s, visibility 1.3s;
}
.shown{
    visibility:visible;
    opacity: 1;
    -moz-transition: opacity 1s, visibility 1.3s;
    -webkit-transition: opacity 1s, visibility 1.3s;
    -o-transition: opacity 1s, visibility 1.3s;
    transition: opacity 1s, visibility 1.3s;
} 
```

JS：

```
 function showOrHide() {
        $('#element').toggleClass("hidden shown");
    } 
```

感谢@tomas.satinsky 对[这篇文章的精彩（而且超级简单）的回答。](https://stackoverflow.com/a/21826469/3129514)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-06-24T16:44:26.097

您应该查看在[jQuery](http://api.jquery.com/toggle/)`toggle`上找到的函数。这将允许您指定一个缓动方法来定义切换的工作方式。

`slideToggle`如果那是您正在寻找的，只会上下滑动，而不是左右滑动。

如果您还需要切换类，您可以在`toggle`函数中定义它：

```
$(this).closest('article').toggle('slow', function() {
    $(this).toggleClass('expanded');
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-24T16:49:43.893

应该检查一下，一旦我包含了 jQuery UI 库，它就可以正常工作并且正在制作动画......

# model-view-controller - MVC 路由 - 使用 NGINX 代替 PHP（或 Ruby 等）进行路由

> ID：11179239
> 
> 赞同：2
> 
> 时间：2012-06-24T16:40:42.423
> 
> 标签：model-view-controller, nginx, php

我目前正在制作一个自定义 MVC 框架以供教育（并且，如果它很好的话，实际实用）使用，我喜欢研究不同的场景以实现可能的性能提升。

说到URI路由，我比较熟悉的标准URI格式

```
/controller/action/id 
```

并且从中解析数据以控制路由不会太困难。现在，我更想知道的是让 nginx 将此 URI 字符串解析为某种类型的查询字符串以直接传递给控制器​​之间的性能差异，因此最终会像

```
/foo/bar/12 => /application/foo.php?action=bar&id=12 
```

代替

```
/foo/bar/12 => /index.php?controller=foo&action=bar&id=12 
```

甚至

```
/foo/bar/12 => /index.php?uri=/foo/bar/12   (note that this would be encoded) 
```

我知道 nginx 已经在其他变量中将 url、查询字符串和其他内容传递给 php-fpm，但这只是为了说明我的想法。

这是一件愚蠢的事情吗？我知道通过在 nginx 中明确定义路由意味着我每次更改配置中的路由时都需要重新启动 nginx，这可能是一个缺点。

所以，重申一下这个问题：当涉及到 MVC 路由时，让实际的 web 服务器（在本例中为 nginx）本身处理到控制器的路由或使用标准的登陆脚本（如 index.html）是否有任何值得的性能提升。 php 在目录的根目录中）并传递要解析的 URI 以完美地路由？

提前谢谢。另外，我只是在学习这些东西，所以我全心全意地欢迎关于我应该做什么的建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T20:47:20.367

我不会将应用程序逻辑（URL 路由）混合到您的 HTTP 服务器中。许多 PHP 应用程序曾经依赖 Apache .htaccess 文件来完成这类事情。它最终变得一团糟。

正如您所提到的，它需要重新启动 Nginx 才能更改路由，并且它还会将您的应用程序绑定到 Nginx，除非您想在将来的某个日期为另一个 HTTP 服务器重写所有规则。更糟糕的是，如果您决定将您的应用程序扩展到多个服务器，您将不得不为每个上游重复这些规则。

tl; dr 将您的图层分开。

# c# - 打开流程并在此流程中粘贴文本

> ID：11179241
> 
> 赞同：0
> 
> 时间：2012-06-24T16:40:47.120
> 
> 标签：c#

我需要打开一个进程（简单），然后以某种方式将我的应用程序中的数据粘贴到这个打开的应用程序到它当前活动的文本框中。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T16:51:48.910

使用[windows 剪贴板](http://msdn.microsoft.com/en-us/library/system.windows.clipboard.aspx)似乎是一个简单的选择，如果用户可以手动粘贴，或者您控制两个应用程序的代码并且可以使两者都与剪贴板一起工作

**编辑**
使用 win 32 api 的发送消息也可以提供答案，特别是如果您不控制要写入的进程的代码，并且希望它是 100% 自动的。查看这些链接

1.  [https://stackoverflow.com/a/4539229/1394380](https://stackoverflow.com/a/4539229/1394380)
2.  [如何将文本发送到记事本](https://stackoverflow.com/questions/523405/how-to-send-text-to-notepad-in-c-win32)
3.  [win 32 api 消息发送消息](http://boycook.wordpress.com/2008/07/29/c-win32-messaging-with-sendmessage-and-wm_copydata/)

此解决方案的一般步骤是：使用 FindWindow 函数查找文本框，然后使用发送消息发送文本。注意：据我了解，接收应用程序应该还有一个消息处理程序并相应地更新

# javascript - 悬停实现时图像上的文本

> ID：11179244
> 
> 赞同：0
> 
> 时间：2012-06-24T16:41:10.010
> 
> 标签：javascript, jquery, hover, slideshow

我在我的投资组合中的幻灯片放映链接上使用了以下代码。它有一个用于照片的部分，另一个用于标题，另一个用于附带的故事。它们都同时使用下一个和上一个按钮进行更改。当鼠标悬停在图像上时，我正在尝试显示故事文本。我一直在尝试实现我在网上找到的各种代码，但到目前为止还没有得到结果。当我尝试时，要么图像永远不会出现，要么故事永远不会出现，我找不到解决办法。我正在寻找的效果类型将是此链接屏幕左侧中间的效果；[http://tympanus.net/jCapSlide/](http://tympanus.net/jCapSlide/)

我想知道是否有人知道如何在我的代码中实现这个动画。而且我还想保持标题部分等其他部分的功能相同。

这是我目前正在使用的代码；[http://jsfiddle.net/elliotgray/64nfP/](http://jsfiddle.net/elliotgray/64nfP/)

下面是用于在上面的链接上创建悬停文本动画的代码，以防它可能有用。这是从他们的网站下载的代码。

任何帮助，将不胜感激。

```
(function($) {
    $.fn.capslide = function(options) {
        var opts = $.extend({}, $.fn.capslide.defaults, options);
        return this.each(function() {
            $this = $(this);
            var o = $.meta ? $.extend({}, opts, $this.data()) : opts;

            if(!o.showcaption)  $this.find('.ic_caption').css('display','none');
            else $this.find('.ic_text').css('display','none');

            var _img = $this.find('img:first');
            var w = _img.css('width');
            var h = _img.css('height');
            $('.ic_caption',$this).css({'color':o.caption_color,'background-color':o.caption_bgcolor,'bottom':'0px','width':w});
            $('.overlay',$this).css('background-color',o.overlay_bgcolor);
            $this.css({'width':w , 'height':h, 'border':o.border});
            $this.hover(
                function () {
                    if((navigator.appVersion).indexOf('MSIE 7.0') > 0)
                    $('.overlay',$(this)).show();
                    else
                    $('.overlay',$(this)).fadeIn();
                    if(!o.showcaption)
                        $(this).find('.ic_caption').slideDown(500);
                    else
                        $('.ic_text',$(this)).slideDown(500);   
                },
                function () {
                    if((navigator.appVersion).indexOf('MSIE 7.0') > 0)
                    $('.overlay',$(this)).hide();
                    else
                    $('.overlay',$(this)).fadeOut();
                    if(!o.showcaption)
                        $(this).find('.ic_caption').slideUp(200);
                    else
                        $('.ic_text',$(this)).slideUp(200);
                }
            );
        });
    };
    $.fn.capslide.defaults = {
        caption_color   : 'white',
        caption_bgcolor : 'black',
        overlay_bgcolor : 'blue',
        border          : '1px solid #fff',
        showcaption     : true
    };
})(jQuery); 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T16:51:50.387

我改变你的代码。

[http://jsfiddle.net/64nfP/3/](http://jsfiddle.net/64nfP/3/)

# ruby-on-rails - “测试做”语法的含义

> ID：11179248
> 
> 赞同：0
> 
> 时间：2012-06-24T16:41:50.530
> 
> 标签：ruby-on-rails, ruby

如果我的问题很愚蠢，我很抱歉，因为我只想问一下 Ruby 中的线下含义是什么。（我正在为我的课程尽可能快地阅读一本关于 Rails 的书，所以我对 Ruby 语言没有牢牢掌握。）

这是用于单元测试目的的一段代码：

```
class ProductTest < ActiveSupport::TestCase
  test "product attributes must not be empty" do   // this line I don't know
    product = Product.new
    assert product.invalid?
    assert product.errors[:title].any?
    assert product.errors[:description].any?
    assert product.errors[:price].any?
    assert product.errors[:image_url].any?
  end 
```

我想问的是：在我不知道的那一行，syntax `test "...." do`是什么意思？它是函数、方法、类还是其他东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T16:44:25.107

这是一个块。在测试框架的某个地方定义了这个方法：

```
def test(description, &block)
  # do something with block
end 
```

我**强烈**建议您选择一本好的 Ruby 书籍并*慢慢*阅读。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T17:04:21.110

这个东西被称为类宏，一个简单机制的花哨名称：

它是一个类方法（def self.test），例如，您可以直接在类定义中使用它。

编写测试用例的正常方式（在 Test::Unit 中）更像这样：

```
def test_something_interesting
  ...
end 
```

但是，ActiveSupport（Rails 的一部分）为您提供了这种语法糖，因此您可以这样编写：

```
test "something interesting" do
  ...
end 
```

然后，此方法将定义一个名为 test_something_interesting 的方法。

你可以在 Rails 中找到实现：

```
activesupport/lib/active_support/testing/declarative.rb 
```

# mysql - Mysql：如何在查询中重用计算

> ID：11179251
> 
> 赞同：1
> 
> 时间：2012-06-24T16:42:07.667
> 
> 标签：mysql, syntax, label

我在下面有一个查询，用于检索在给定时间（以小时为单位）内未更新的记录并按经过时间排序：

```
SELECT TABLE.Key, TIMESTAMPDIFF(HOUR, TABLE.Date_last_consulted, CURRENT_TIMESTAMP)
FROM TABLE WHERE TIMESTAMPDIFF(HOUR, TABLE.Date_last_consulted,
CURRENT_TIMESTAMP) <= 7 ORDER BY TIMESTAMPDIFF(HOUR, TABLE.Date_last_consulted,
CURRENT_TIMESTAMP); 
```

如您所见，它多次调用 TIMESTAMPDIFF，效率不高，因为所有这些调用都会导致无用的 SQL 计算。

我想知道是否有办法重用计算以便只处理一次？

非常感谢你的帮助。

弗洛朗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T16:51:18.360

```
SELECT 
    t.Key, t.dif
FROM (
        SELECT key, TIMESTAMPDIFF(HOUR, TABLE.Date_last_consulted, CURRENT_TIMESTAMP) dif
        FROM TABLE
     ) t
WHERE 
    t.dif <= 7 
ORDER BY 
    t.dif 
```

# php - 回显混合码

> ID：11179254
> 
> 赞同：0
> 
> 时间：2012-06-24T16:42:12.173
> 
> 标签：php, wordpress, for-loop, echo

我正在尝试回显包含 html 代码和 PHP 代码的混合字符串，但我尝试的所有可能的事情都没有成功。

基本上我想做的是将以下代码循环3次。每次都给我 3 个名称中带有数字递增的 div。

此代码将在 wordpress 模板中使用。

我没有回显的正常代码如下：

```
<div id="gallery <?php $c; ?>">
  <?php query_posts('post_type=portfolio'); ?>
  <?php if(have_posts()) : ?>
    <?php while(have_posts()) : the_post(); ?>
      <?php if ( has_post_thumbnail() ) : ?>
        <a href="<?php the_permalink(); ?>" 
           title="<?php the_title_attribute(); ?>" >
           <?php the_post_thumbnail(); ?>
        </a>
      <?php endif; ?>
      <h1><?php the_title(); ?></h1>
      <a href="<?php the_permalink(); ?>" 
         title="<?php the_title_attribute(); ?>" > 
         <h2>View Project</h2>
      </a>
      <?php the_content() ?>
    <?php endwhile; ?>
  <?php endif; ?>
</div> 
```

我对 PHP 还很陌生，所以我不知道如何以正确的方式回应这一点。我的 for 循环已经设置好了。

我希望你们能帮助我。

亲切的问候 Dragon54

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T16:51:17.293

就像是：

```
for($i=1; $<=3; $++){
 echo '<div id="gallery gallery_'.$i.'">' . get_the_permalink() . '</div>';
} 
```

应该做的伎俩（见[http://php.net/manual/de/language.operators.string.php](http://php.net/manual/de/language.operators.string.php)）

但请注意，一些 Wordpress 辅助函数本身会直接打印/回显内容。大多数情况下，您会找到返回值的东西

请参阅 [http://codex.wordpress.org/Function_Reference/get_permalink](http://codex.wordpress.org/Function_Reference/get_permalink)（返回）与 [http://codex.wordpress.org/Function_Reference/the_permalink](http://codex.wordpress.org/Function_Reference/the_permalink)（打印）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T16:51:29.263

请学习串联，在编写 PHP/HTML 时这是必须的！然后你可以简单地将该块放在一个 foreach 或某种循环中，这取决于你的新闻系统是如何设计的。

```
<?php
echo '<div id="gallery_'.$c.'">';
query_posts('post_type=portfolio');

while(have_posts()) {
    the_post();
    if ( has_post_thumbnail() ) { 
        echo '<a href="'.the_permalink().'" title="'.the_title_attribute();.'" '.the_post_thumbnail().'</a>';
    }
}

echo '.<h1>'.the_title().'</h1>
       <a href="'.the_permalink().'" title="'.the_title_attribute().'">link</a>
      </div>';
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T16:52:11.350

你需要`echo`它：

```
<div id="gallery_<?php echo $c; ?>"> 
```

另外，ID 中不允许有空格，我将其切换为下划线。

# css - IE z-index 错误无法正确显示 div

> ID：11179258
> 
> 赞同：0
> 
> 时间：2012-06-24T16:43:00.020
> 
> 标签：css, internet-explorer

我有两个 div 一个在另一个里面，我想将一个 div 与另一个重叠并使用 css idnex，但 ie 不允许我这样做，有什么解决方法吗？

**请在 IE 中查看此代码，因为它适用于其他浏览器。**

这是jsfiddle：http: [//jsfiddle.net/xkDCX/1/](http://jsfiddle.net/xkDCX/1/)

和代码：

```
<div class="container">
    <div class="button"></div>
<div>

body{
    margin:50px;
}

.container{
    position:relative;
    width:410px;
    height: 300px;
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#daf5fd', endColorstr='#0dbcf5');
    z-index:22;
}

.button{
    width:20px;
    height:20px;
    border:2px solid black;
    position:absolute;
    right:-10px;
    top:-10px;
    background:black;
    z-index:11;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T17:09:18.790

这里的问题是您添加的过滤器仅在 IE 中根本不起作用，因此当您在其他浏览器中看到样式时，他们根本无法识别它。

更新：

这对你有用吗？

```
<div class="container">
    <div class="button">
      <div class="but"></div>
    </div>
    <div class="background"></div>
<div>

<style>
body{
    margin:50px;
}

.container{
    position:fixed;
    width:410px;
    height:300px;    
    margin:0;
    padding:0;   
}

.container .background{
    position:fixed;
    bottom:0px;
    left:0px;
    width:100%;
    height:100%;
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#daf5fd', endColorstr='#0dbcf5');
    z-index: 50;
}

.container .button{
    position:absolute;
    width:410px;   
    margin-left:auto;
    margin-right: auto; 
    z-index: 100;  
} 

.container .but{
    position:absolute;
    width:20px;
    height:20px;
    background:black;
    right:-10px;
    top:-10px;
    border:2px solid black;
} 
</style> 
```

# php - 如何根据用户单击的按钮将正确的值存储在 $_SESSION 中？

> ID：11179259
> 
> 赞同：0
> 
> 时间：2012-06-24T16:43:04.117
> 
> 标签：php, mysql, html

我有以下代码：

```
while ($content = mysql_fetch_array($content2)){  
    echo $content[0];  
    session_start();  
    $_SESSION['content'] = $content[0];  
    ?>  
    <br />    
    <a href="edit.php"> Edit post. </a>  
    <br /> <br />  
    <?php  
} 
```

它从博客系统数据库中获取并显示所有帖子，您可以单击“编辑”。在每个帖子下方。我想要做的是将该帖子的内容传递给我的 edit.php 脚本。
问题是，无论我点击哪个“编辑”按钮，这将始终传递我上一篇文章的内容，而不是那个“编辑”按钮上方的帖子内容。
现在，我明白为什么会这样了：整个循环将在我单击任何按钮之前执行，并且存储在 $_SESSION['content'] 中的值将始终是循环最后一次迭代的值。我对吗？

也许我不应该使用 SESSION。有更好的方法吗？如何将 $content[0] 的“正确”值传递给我的 edit.php 脚本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T17:00:58.897

编辑按钮总是获得最后一篇文章的原因是因为您在每个循环的会话中都覆盖了内容变量。

我不确定您从数据库中获得了哪些信息，但是对于您在数组中抓取的每个帖子，您应该在数据库中拥有一个唯一的 ID。如果这不存在，我**强烈**建议在您的表格中进行更改，因为它会简化您的流程。

```
while ($content = mysql_fetch_assoc($content2))
{  
    echo $content['postText'] . "<br />";  
    echo '<a href="edit.php?postId=' . $content['postId'] . '"> Edit post. </a><br /><br />';  
} 
```

然后，您必须设置编辑页面以获取 id`$_GET['postId']`并从数据库中获取正确的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T17:06:32.163

你的代码必须改进，你的逻辑不好。首先，您不需要使用会话 var，另一种方法是使用 GET 参数传递帖子 ID，如下所示：

```
while ( $content = mysql_fetch_array($content2) )
{  
    $post_content = $content[0];
    $post_id      = $content[1];

    echo $post_content . '<br /> <a href="edit.php?postId=' . $post_id . '"> Edit post. </a> <br /> <br />';
} 
```

然后，`edit.php`您将检索`$_GET['postId']`并加载要更新的帖子内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T17:04:00.603

如果您准备好使用 GET 命令，这将是您最好的选择。请参阅下面的代码：

```
$content = mysql_fetch_array($content2);
foreach($content as $key => $val) {
echo "<a href=edit.php?id=$val['id']>$val['name']</a>";
} 
```

只是一个快速修复。

将 $val['id'] 替换为 uniqueID 的列名，将 $val['name'] 替换为帖子的列名。

# sql-server - 需要客户端计算机上的 SQL Server

> ID：11179260
> 
> 赞同：-5
> 
> 时间：2012-06-24T16:43:13.757
> 
> 标签：sql-server

我正在 Visual Studio 2010 中开发一个包含 SQL Server 数据库的应用程序。我的问题是，当我在客户端计算机上安装此应用程序时，该计算机是否需要安装 SQL Server 才能正常工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T17:17:36.947

> 我正在 Visual Studio 2010 中开发一个包含 SQL Server 数据库的应用程序。

我开了一家有顾客的餐厅。我需要买肉来吃吗？

说真的，你应该知道。

它是客户端/服务器应用程序，那么可能不是，客户端不需要 sql server。也许确实如此，这取决于客户端的操作，但仅对于安装了 SQL Server 的服务器来说这是很正常的。只有程序员（如果你想知道，那就是你）知道他在编程什么。

如果它是一个普通的客户端应用程序并且它使用 SQL Server，那么如果没有安装它，你认为它如何使用 SQL Server？有点像在不使用肉的情况下烹制真正的阿根廷牛排。确保您必须安装它。

# expand - Realloc 没有扩展我的数组

> ID：11179261
> 
> 赞同：0
> 
> 时间：2012-06-24T16:43:25.123
> 
> 标签：expand, realloc

我在以非常基本的方式实现 realloc 时遇到了麻烦。

我正在尝试扩展 **ret 处的内存区域，它指向一个结构数组，其中包含`ret = realloc(ret, newsize);`并基于我的调试字符串我*知道*newsize 在循环过程中正确增加（从原始大小 4到 8 到 12 等），但是当我这样做时，`sizeof(ptr)`它仍然返回原始大小 4，并且找不到我试图放入新分配空间的东西（我想我已经把它缩小到realloc() 这就是为什么我要像这样格式化问题）

如果问题对您来说不是很明显，我可以完整地发布该功能，我只是尽量不要过多地“欺骗”我的作业（无论如何，代码现在有点乱，大量使用 printf () 用于调试)。

[编辑] 好的，所以根据你的回答，我在调试代码时失败了，所以我想我会发布整个函数，这样你就可以告诉我更多关于我做错了什么的信息。

（您可以忽略 printf()，因为其中大部分是调试，甚至无法正常工作）

```
 Booking **bookingSelectPaid(Booking **booking)  {
     Booking **ret = malloc(sizeof(Booking*));
     printf("Initial address of ret = %p\n", ret);
     size_t i = 0;
     int numOfPaid = 0;
     while (booking[i] != NULL)
     {
         if (booking[i]->paid == 1)
         {
             printf("Paying customer! sizeof(Booking*) = %d\n", (int)sizeof(Booking*));
             ++numOfPaid;
             size_t newsize = sizeof(Booking*) * (numOfPaid + 1);
             printf("Newsize = %d\n", (int)newsize);
             Booking **temp = realloc(NULL, (size_t)newsize);
             if (temp != NULL)
                 printf("Expansion success! => %p sizeof(new pointer) = %d ret = %p\n", temp, (int)sizeof(temp), ret);
             ret = realloc(ret, newsize);
             ret[i] = booking[i];
             ret[i+1] = NULL;
         }
         ++i;
         printf("Sizeof(ret) = %d numOfPaid = %d\n", (int)sizeof(ret), numOfPaid);
     }
     return ret; } 
```

[EDIT2] --> [http://pastebin.com/xjzUBmPg](http://pastebin.com/xjzUBmPg)

[EDIT3] 为了清楚起见，printf、临时指针和这种性质的东西是调试的，而不是预期功能的一部分。令我困惑的那条线要么是`realloc(ret, newsize);`要么`ret[i] = booking[i]`

基本上我确定预订包含一个以NULL结尾的结构表，并且我试图将具有特定值设置为1（付费）的结构带到新表中，这就是我的main（）是试图从这个函数中获取......那么我哪里出错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T16:48:22.037

我认为这里的问题是你`sizeof(ptr)`只返回指针的大小，这取决于你的架构（你说 4，这意味着你正在运行一个 32 位系统）。

如果动态分配内存，则必须自己跟踪其大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T08:16:26.627

是的，sizeof(ptr) 是一个常数。正如另一个答案所说，取决于架构。在 32 位架构上为 4，在 64 位架构上为 8。如果您需要更多帮助来解决此类问题，这个[家庭作业帮助](http://www.homeworkmarket.com/homework-help)网站对您来说非常有用。

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T16:48:36.087

因为`sizeof(ptr)`返回指针的大小，而不是分配的大小

# git - 如何查看本地 git repo 和远程 repo 是否相同？

> ID：11179264
> 
> 赞同：4
> 
> 时间：2012-06-24T16:43:47.127
> 
> 标签：git, github

我有一个本地 git repo，我有一个远程 git repo。什么是查看远程 repo 提交和本地 repo 提交的简单命令，所以我可以简单地查看我是否是最新的？

这将在程序中自动化，所以我不想要很多复杂的东西，我必须解析。最好让本地和远程输出相同的文本很酷，只有提交在两者之间发生变化。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-24T22:36:45.897

### 程序化解决方案

如果您想要一个编程解决方案，您可以查看存储在每个 head 中的提交并进行比较。例如：

```
remote=$(
    git ls-remote -h origin master |
    awk '{print $1}'
)
local=$(git rev-parse HEAD)

printf "Local : %s\nRemote: %s\n" $local $remote

if [[ $local == $remote ]]; then
    echo "Commits match."
else
    echo "Commits don't match."
fi 
```

### 样本输出

```
Local : 9e1b4dc286acb442f7f604be7916db660b9d70cd
Remote: 9e1b4dc286acb442f7f604be7916db660b9d70cd
Commits match. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T17:06:34.293

假设您的远程存储库被远程引用`origin`，并且您对分支感兴趣`master`，您可以执行以下操作：

```
git fetch origin 
```

然后比较输出：

```
git rev-parse master 
```

... 和：

```
git rev-parse origin/master 
```

如果这两个命令输出的对象名称相同，则运行时 your`master`和`master`in`origin`相同`git fetch origin`。

# css - 只为 IE 加载较低的媒体查询

> ID：11179272
> 
> 赞同：0
> 
> 时间：2012-06-24T16:45:07.443
> 
> 标签：css, internet-explorer-7, media-queries, conditional-statements

我只想为 IE7 提供较低的媒体查询（因为我不想修复所有较高的布局），但我无法使用条件标签来处理它。难道我做错了什么？

我使用了 respond.js (https://github.com/scottjehl/Respond)，所以应该没问题，但是条件标签会阻止所有浏览器加载更高级别的媒体查询。

应该发生的是所有浏览器都应该加载所有媒体查询，而 IE7 及以下版本应该只加载我的 601.css 和 768.css 样式表

```
<link rel="stylesheet" type="text/css" media="all" href="http://www.example.com/style.css" />
<link rel="stylesheet" href="http://www.example.com/mq/601.css" type="text/css"  media="(min-width: 601px)"/>
<link rel="stylesheet" href="http://www.example.com/mq/768.css" type="text/css"  media="(min-width: 768px)"/>   

<!--[if gt IE 7]>
    <link rel="stylesheet" href="http://www.example.com/mq/1024.css" type="text/css"  media="(min-width: 1024px)"/>
    <link rel="stylesheet" href="http://www.example.com/mq/1280.css" type="text/css"  media="(min-width: 1280px)"/> 
    <link rel="stylesheet" href="http://www.example.com/mq/1600.css" type="text/css"  media="(min-width: 1600px)"/>
<![endif]--> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T17:01:50.533

对，明白了。gt IE 7 似乎只包括所有 IE 向上。相反，我们还需要包括不是 IE 的浏览器。

所以...

```
<!--[if (gt IE 7)|!(IE)]><!-->
    <link rel="stylesheet" href="http://www.example.com/mq/1024.css" type="text/css"  media="(min-width: 1024px)"/>
    <link rel="stylesheet" href="http://www.example.com/mq/1280.css" type="text/css"  media="(min-width: 1280px)"/> 
    <link rel="stylesheet" href="http://www.example.com/mq/1600.css" type="text/css"  media="(min-width: 1600px)"/>
<![endif]--> 
```

# javascript - HTML 画布 - 调整大小时绘图消失

> ID：11179274
> 
> 赞同：21
> 
> 时间：2012-06-24T16:45:23.810
> 
> 标签：javascript, html, canvas, html5-canvas

我在 HTML 画布元素中创建了一个基本形状，效果很好。

当我调整画布大小时出现问题，画布中的所有绘图都消失了。这是正常行为吗？或者有没有可以用来阻止这个的功能？

解决此问题的一种方法是在画布调整大小时再次调用绘图函数，但是如果要绘制大量内容，这可能不是很有效。

最好的方法是什么？

这是示例代码的链接[https://gist.github.com/2983915](https://gist.github.com/2983915)

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-06-24T17:51:24.080

调整大小时需要重新绘制场景。

设置画布的宽度或高度，**即使您将其设置为与之前相同的值**，不仅会清除画布，还会重置整个画布上下文。任何设置的属性（`fillStyle`、`lineWidth`、剪辑区域等）也将被重置。

如果您无法从代表画布的任何数据结构中重新绘制场景，您始终可以通过将整个画布绘制到内存中的画布、设置原始宽度并绘制 in-记忆画布回到原来的画布。

这是保存画布位图并在调整大小后将其放回的一个非常快速的示例：

[http://jsfiddle.net/simonsarris/weMbr/](http://jsfiddle.net/simonsarris/weMbr/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-24T17:03:32.507

每次调整画布大小时，它都会将自身重置为透明黑色，[如规范中所定义](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#the-canvas-element)。

您要么必须：

*   调整画布大小时重绘，或者，
*   不要调整画布大小

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-09-05T05:28:36.440

如果您关心性能，另一种方法是使用去抖动。它不会调整或重绘您拖动的每个位置。但是只有在调整大小时才会调整大小。

```
 // Assume canvas is in scope
 addEventListener.("resize", debouncedResize );

 // debounce timeout handle
 var debounceTimeoutHandle;

 // The debounce time in ms (1/1000th second)
 const DEBOUNCE_TIME = 100; 

 // Resize function 
 function debouncedResize () { 
    clearTimeout(debounceTimeoutHandle);  // Clears any pending debounce events

 // Schedule a canvas resize 
 debounceTimeoutHandle = setTimeout(resizeCanvas, DEBOUNCE_TIME);
 }

 // canvas resize function
 function resizeCanvas () { ... resize and redraw ... } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-15T06:36:32.093

我有同样的问题。试试下面的代码

```
var wrapper = document.getElementById("signature-pad");
var canvas = wrapper.querySelector("canvas");
var ratio = Math.max(window.devicePixelRatio || 1, 1);
canvas.width = canvas.offsetWidth * ratio;
canvas.height = canvas.offsetHeight * ratio; 
```

它使绘图保持原样

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-07-23T13:50:28.710

对我有用的一件事是使用`requestAnimationFrame()`.

```
let height = window.innerHeight;
let width = window.innerWidth;

function handleWindowResize() {
    height = window.innerHeight;
    width = window.innerWidth;
}

function render() {
    // Draw your fun shapes here
    // ...

    // Keep this on the bottom
    requestAnimationFrame(render);
}

// Canvas being defined at the top of the file.
function init() {
    ctx = canvas.getContext("2d");

    render();
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-09-04T12:14:10.333

当我不得不调整画布大小以将其调整为屏幕时，我遇到了同样的问题。但我用这段代码解决了它：

```
var c = document.getElementById('canvas');
ctx = c.getContext('2d');
ctx.fillRect(0,0,20,20);
// Save canvas settings
ctx.save();
// Save canvas context
var dataURL = c.toDataURL('image/jpeg');
// Resize canvas
c.width = 50;
c.height = 50;
// Restore canvas context
var img = document.createElement('img');
img.src = dataURL;
img.onload=function(){
  ctx.drawImage(img,20,20);
}
// Restote canvas settings
ctx.restore();
```

```
<canvas id=canvas width=40 height=40></canvas>
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2017-09-15T04:22:13.323

我也遇到了这个问题。但是经过实验，我发现调整画布元素大小会自动清除画布上的所有绘图！试试下面的代码

```
<canvas id = 'canvas'></canvas>
<script>
    var canvas1 = document.getElementById('canvas')
    console.log('canvas size',canvas1.width, canvas1.height)
    var ctx = canvas1.getContext('2d')
    ctx.font = 'Bold 48px Arial'
    var f = ctx.font
    canvas1.width = 480
    var f1 = ctx.font
    alert(f === f1) //false
</script> 
```

# objective-c - Http 日期到 NSDate

> ID：11179276
> 
> 赞同：8
> 
> 时间：2012-06-24T16:45:42.733
> 
> 标签：objective-c, ios, nsdate, nsdateformatter

我有一个来自 http 响应头字段“日期”的字符串，格式如下：

```
"Sun, 24 Jun 2012 16:34:51 GMT" 
```

我想要的是将此字符串转换为 NSDate 对象。对于这个范围，我`NSDateFormatter`使用各种格式实例化了一个：

```
[dateFormatter setDateFormat:@"EEE',' dd' 'MMM' 'yyyy HH':'mm':'ss zzz"];
[dateFormatter setDateFormat:@"EEE, dd MMM yyyy HH:mm:ss zzz"];
[dateFormatter setDateFormat:@"EEE',' dd' 'MMM' 'yyyy HH':'mm':'ss 'GMT'"]; 
```

但是当我使用日期打印字符串时：

```
[dateFormatter dateFromString:date] 
```

我收到：

```
(null) 
```

我在哪里做错了？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-24T17:56:23.933

不确定我是否理解这个问题，因为您自己的代码似乎对我来说很好：

```
NSString *dateStr = @"Sun, 24 Jun 2012 16:34:51 GMT";

NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"EEE',' dd' 'MMM' 'yyyy HH':'mm':'ss zzz"];

NSDate *date = [dateFormatter dateFromString:dateStr];

NSLog(@"Date: %@", date); 
```

这给出了这个输出：

> 日期：2012-06-24 16:34:51 +0000

除非我误解了你的问题，否则这是正确的结果。

# java - 将方法转换为泛型

> ID：11179278
> 
> 赞同：0
> 
> 时间：2012-06-24T16:46:20.683
> 
> 标签：java

我有以下方法签名，如何将其转换为模板。

```
public static JSONContainer getMappedRootObject(JSONContainer clazz, String filename) {
    ...
    JSONContainer container = new Gson().fromJson(br, JSONContainer.class);
    return container;
} 
```

这是我想出来的，对吗？

```
public static <T extends Object> T getMappedRootObject(Class<T> clazz, String filename) {
    T container = new Gson().fromJson(br, clazz);
    return container;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T16:51:56.850

如果在您的 JSONContainer 实现中，“JSONContainer clazz”参数是目标对象的一个​​实例，您可以执行以下操作：

```
public static <T> T getMappedRootObject(T instance, String filename) {
     //.......

    if (instance == null) {
        // handle this
    } else {
        T container = new Gson().fromJson(br, instance.getClass());
        return container;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T17:04:59.767

如果您认为 Type T 将始终具有某种超类，则可以将其[参数化](http://en.wikipedia.org/wiki/Generics_in_Java)，例如：。`<T extends JSONContainer>`

```
public static <T> T  getMappedRootObject(T clazz,String fileName){
    /**
     * ...
     * */
    T container = new Gson().fromJson(br, clazz.getClass());
    return container;
} 
```

# windows - 在 Windows 上使用 wget 下载多个文件

> ID：11179285
> 
> 赞同：1
> 
> 时间：2012-06-24T16:47:29.503
> 
> 标签：windows, batch-file, download, wget

我正在尝试在 Windows 上使用 wget 从网络服务器下载 50 个 pdf。所有 pdf 都位于 www.abc.com/files/ 并且它们的 url 是 (www.abc.com/files/x.pdf, 其中 x = 1,2,3...50 )

我写的批处理脚本是

```
set "directory = http://www.abc.com/files/"
for %%x in (1, 1, 50) do (
        set pdfNum = %%x
    set "num = %directory%%pdfNum%"
        set "pdf = .pdf"
        set "file = %num%%pdf%"
    wget file
) 
```

但它似乎不起作用。帮助任何人。提前致谢....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T17:06:54.323

```
for /L %%x in (1,1,50) do (
        wget http://www.abc.com/files/%%x.pdf
) 
```

This code could help u.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T17:09:31.710

you have some errors there... the way to do it is:

```
 setlocal enabledelayedexpansion
 @echo off
 set directory=courses.csail.mit.edu/6.006/spring11/lectures/lec/
 for /l %%x in (1, 1, 50) do (
    set pdfNum=%%x
    set num=%directory%!pdfNum!
    set pdf=.pdf
    set file=!num!%pdf%
    wget !file!
 ) 
```

*   you must not have spaces in the `set param=value` line
*   `for /l` iterates though the numbers

but i noticed that [http://courses.csail.mit.edu/6.006/spring11/lectures/lec/1.pdf](http://courses.csail.mit.edu/6.006/spring11/lectures/lec/1.pdf) doesn't exist (i checked 1, 2, 3, 10 ... and i can't access them. besides that it works for me

# c# - 如何在 C# 中将 BigInteger 变为 pow Double？

> ID：11179289
> 
> 赞同：4
> 
> 时间：2012-06-24T16:47:45.973
> 
> 标签：c#, math, biginteger

我尝试使用`BigInteger.Pow`方法来计算类似 10^12345.987654321 的东西，但这种方法只接受整数作为指数，如下所示：

> BigInteger.Pow(BigInteger x, int y)

那么如何在上述方法中使用双数作为指数呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T17:05:26.827

There's no arbitrary precision large number support in C#, so this cannot be done directly. There are some alternatives (such as looking for a 3rd party library), or you can try something like the code below - if the base is small enough, like in your case.

```
public class StackOverflow_11179289
{
    public static void Test()
    {
        int @base = 10;
        double exp = 12345.123;
        int intExp = (int)Math.Floor(exp);
        double fracExp = exp - intExp;
        BigInteger temp = BigInteger.Pow(@base, intExp);
        double temp2 = Math.Pow(@base, fracExp);
        int fractionBitsForDouble = 52;
        for (int i = 0; i < fractionBitsForDouble; i++)
        {
            temp = BigInteger.Divide(temp, 2);
            temp2 *= 2;
        }

        BigInteger result = BigInteger.Multiply(temp, (BigInteger)temp2);

        Console.WriteLine(result);
    }
} 
```

The idea is to use big integer math to compute the power of the integer part of the exponent, then use double (64-bit floating point) math to compute the power of the fraction part. Then, using the fact that

```
a ^ (int + frac) = a ^ int * a ^ frac 
```

we can combine the two values into a single big integer. But simply converting the double value to a BigInteger would lose a lot of its precision, so we first "shift" the precision onto the bigInteger (using the loop above, and the fact that the `double` type uses 52 bits for the precision), then multiplying the result.

Notice that the result is an approximation, if you want a more precise number, you'll need a library that does arbitrary precision floating point math.

**Update**: If the base / exponent are small enough that the power would be in the range of `double`, we can simply do what Sebastian Piu suggested (`new BigInteger(Math.Pow((double)@base, exp))`)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T19:27:56.417

我喜欢 carlosfigueira 的回答，但他的方法的结果当然只能在第一个（最重要的）15-17 位数字上是正确的，因为 a`System.Double`最终被用作乘数。

有趣的是，确实存在一种`BigInteger.Log`执行“逆”操作的方法。因此，如果您想计算`Pow(7, 123456.78)`，理论上可以搜索所有`BigInteger`数字`x`以找到一个`BigInteger.Log(x, 7)`等于`123456.78`或接近于`123456.78`任何其他`x`类型的数字`BigInteger`。

当然对数函数是递增的，所以你的搜索可以使用某种“二分搜索”（二分搜索）。我们的答案介于两者之间`Pow(7, 123456)`，`Pow(7, 123457)`两者都可以精确计算。

**如果需要，请跳过其余部分**

现在，如果有多个整数的对数为`123456.78`，精度达到`System.Double`，或者实际上没有整数的对数达到特定`Double`值（理想`Pow`函数的精确结果是无理数)? 在我们的示例中，将有非常多的整数给出相同`Double` `123456.78`的值，因为因子`m = Pow(7, epsilon)`（其中`epsilon`最小的正数`123456.78 + epilon`具有与其自身`Double`的表示不同的表示`123456.78`）足够大，以至于在真数之间会有非常多的整数答案和真实答案乘以`m`。

从微积分中记住，数学函数的导数`x → Pow(7, x)`是`x → Log(7)*Pow(7, x)`，所以所讨论的指数函数图的斜率是`Log(7)*Pow(7, 123456.78)`。这个数字乘以上面`epsilon`仍然远大于一，所以有很多整数可以满足我们的需要。

实际上，我认为 carlosfigueira 的方法会给出一个“正确”的答案`x`，因为`Log(x, 7)`它与 a 具有相同的表示`Double`形式`123456.78`。但是有人试过吗？:-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-10T14:49:22.467

我将提供另一个希望更清楚的答案。关键是：**由于精度`System.Double`限制在大约。15-17 位十进制数字，任何`Pow(BigInteger, Double)`计算的结果都将具有更有限的精度。**因此，没有希望比 carlosfigueira 的回答做得更好。

让我用一个例子来说明这一点。假设我们要计算

```
Pow(10, exponent) 
```

在这个例子中，我选择`exponent`双精度数

```
const double exponent = 100.0 * Math.PI; 
```

这当然只是一个例子。的值`exponent`，以十进制表示，可以作为以下之一给出

```
314.159265358979
314.15926535897933
314.1592653589793258106510620564222335815429687500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000... 
```

这些数字中的第一个是您通常看到的（15 位数字）。第二个版本`exponent.ToString("R")`包含 17 位数字。请注意， 的精度`Double`小于 17 位。上面的第三种表示是 的理论“精确”值`exponent`。请注意，这当然不同于第 17 位附近的数学数字 100π。

为了弄清楚`Pow(10, exponent)`应该是什么，我只是做`BigInteger.Log10(x)`了很多数字`x`来看看我如何重现`exponent`. 所以这里给出的结果只是反映了 .NET Framework 的`BigInteger.Log10`.

事实证明，任何`BigInteger x`从

```
0x0C3F859904635FC0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
through
0x0C3F85990481FE7FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF 
```

`Log10(x)`等于`exponent`15 位的精度。同样，任何数从

```
0x0C3F8599047BDEC0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
through
0x0C3F8599047D667FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF 
```

满足`Log10(x) == exponent`的精度`Double`。换句话说，后一个范围内的*任何*`Pow(10, exponent)`数字作为 的结果同样“正确” ，仅仅是因为 的精度`exponent`非常有限。

*（插曲：一串`0`s 和`F`s 表明 .NET 的实现只考虑 . 的最重要字节`x`。他们不想做得更好，正是因为`Double`类型的精度有限。）*

现在，引入第三方软件的唯一原因是，如果您**坚持**将`exponent`其解释为上面给出的十进制数字的三分之一。`Double`（类型允许你准确地指定你想要的数字真的是一个奇迹，对吧？）在这种情况下，结果`Pow(10, exponent)`将是一个无理数（但代数），带有一个不重复的小数尾部。如果没有舍入/截断，它就无法放入整数。PS！如果我们将指数作为实数 100π，那么数学上的结果会有所不同：我怀疑是某个超越数。

# c++ - 如何在 mac osx 上使用 msg_nosignal

> ID：11179292
> 
> 赞同：1
> 
> 时间：2012-06-24T16:48:00.737
> 
> 标签：c++, linux, macos

我有一个在 mac osx 或 linux 上运行的代码，我希望它是可移植的，我如何制作一个 #ifndef 语句来切换`msg_nosignal`到 macosx 下的相关标志？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T16:52:21.070

如果你想检查它是否在 OS X 上编译，我认为主要的预处理器指令是

```
#ifdef __APPLE__
    ...
#endif 
```

# objective-c - 如何对 NSArray 中的数字进行排序？

> ID：11179300
> 
> 赞同：9
> 
> 时间：2012-06-24T16:48:55.417
> 
> 标签：objective-c, ios, cocoa-touch, plist

我无法拼凑如何做到这一点。

我从 plist 中获取我的数组，这个数组充满了数字（在 plist 中设置）。现在我需要做的就是对它们进行排序，使它们下降，但我无法解决。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-06-24T16:53:21.420

试试这个代码？

```
 NSArray *array = /* loaded from file */;
 array = [array sortedArrayUsingSelector: @selector(compare:)]; 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-06-24T17:07:47.967

以下将按升序对数字进行排序，然后将结果反转以按降序给出数字：

```
NSArray *sorted = [[[array sortedArrayUsingSelector:@selector(compare:)] reverseObjectEnumerator] allObjects]; 
```

这个先前的问题有一些其他的选择： [Sort an NSArray in Descending Order](https://stackoverflow.com/questions/3402667/sort-an-nsarray-in-descending-order)

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-03-04T17:19:12.267

这是使用比较块的众多方法之一。此代码片段对于任何包含要排序的数字的数组都很方便。对于升序：

```
AscendingArray = [UnsortArray sortedArrayUsingComparator:^NSComparisonResult(id obj1, id obj2) {
    if ([obj1 integerValue] > [obj2 integerValue]) {
      return (NSComparisonResult)NSOrderedDescending;
    }

    if ([obj1 integerValue] < [obj2 integerValue]) {
      return (NSComparisonResult)NSOrderedAscending;
    }
    return (NSComparisonResult)NSOrderedSame;
  }]; 
```

对于降序：

```
DescendingArray = [UnsortArray sortedArrayUsingComparator:^NSComparisonResult(id obj1, id obj2) {
    if ([obj1 integerValue] > [obj2 integerValue]) {
      return (NSComparisonResult)NSOrderedAscending;
    }

    if ([obj1 integerValue] < [obj2 integerValue]) {
      return (NSComparisonResult)NSOrderedDescending;
    }
    return (NSComparisonResult)NSOrderedSame;
  }]; 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-11-27T03:59:03.827

它对我有用：

```
NSSortDescriptor *sortIdClient = 
[NSSortDescriptor sortDescriptorWithKey:@"campaignValue"
                              ascending:NO
                             comparator: ^(id obj1, id obj2){

    return [obj1 compare:obj2 options:NSNumericSearch];

 }];

NSArray *sortDescriptors = @[sortIdClient];

NSArray *arrTemp = [self.allCampaignsList sortedArrayUsingDescriptors:sortDescriptors]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-09T12:12:51.197

这将解决问题：

```
 NSArray *array = /* loaded from file */;
 array = [array sortedArrayUsingSelector: @selector(compare:)]; 
```

# wordpress - 将小部件添加到 Wordpress 页面的中间

> ID：11179303
> 
> 赞同：1
> 
> 时间：2012-06-24T16:49:03.630
> 
> 标签：wordpress

我正在 www.tosreport.com/scripting 上的博客上工作，并且可能想要调整放置某些项目的位置，例如页面右侧的喊话箱插件。显然，唯一的“小部件区域”是侧边栏和页脚。是否可以将小部件放置在页面正文甚至特定帖子的正文中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T18:27:36.603

当然，你只需要注册另一个侧边栏小部件区域：

[http://codex.wordpress.org/Function_Reference/register_sidebar](http://codex.wordpress.org/Function_Reference/register_sidebar)

然后，放置在 index.php 或 loop.php 取决于您的主题布局：

检查此代码，这是您需要的示例，将前面的代码放在“广告”代码中：

[https://stackoverflow.com/a/7001372/1478479](https://stackoverflow.com/a/7001372/1478479)

# android - 使用 SQLite 的未知错误

> ID：11179310
> 
> 赞同：0
> 
> 时间：2012-06-24T16:49:40.233
> 
> 标签：android, sqlite, contacts

我是 android 开发的新手，这是我第一次尝试使用 SQLite 数据库。我遇到了一个我无法理解的错误，所以如果可以的话，请帮助我。我的应用程序有一个文本视图和 3 个按钮，一个用于读取和显示手机的联系人，一个用于显示数据库记录，一个用于将联系人保存到数据库。下面附加的代码是 main.java，它从其他文件中获取常量。

清单.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="medialab.elearning"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="8" android:maxSdkVersion="17"/>
<uses-permission android:name="android.permission.READ_CONTACTS"/>

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".DbProjectActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
 </application>

 </manifest> 
```

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?> 
<LinearLayout android:layout_width="fill_parent"  
android:layout_height="fill_parent"
android:orientation="vertical" 
xmlns:android="http://schemas.android.com/apk/res/android"> 
<TextView android:id="@+id/textview"    
android:layout_width="fill_parent"android:layout_height="wrap_content"/>

<Button
android:id="@+id/btn2"
android:layout_width="250dip"
android:layout_height="wrap_content"
android:layout_marginLeft="30dip"
android:layout_marginRight="50dip"
android:layout_marginTop="75dip"
android:text="@+string/viewDb" />

<Button
android:id="@+id/btn"
android:layout_width="250dip"
android:layout_height="wrap_content"
android:layout_marginLeft="30dip"
android:layout_marginRight="50dip"
android:text="@+string/name" />

<Button
android:id="@+id/btn3"
android:layout_width="250dip"
android:layout_height="wrap_content"
android:layout_marginLeft="30dip"
android:layout_marginRight="50dip"
android:text="@+string/viewContacts" />

</LinearLayout> 
```

显示.xml

```
<?xml version="1.0" encoding="utf-8"?> 

<ScrollView android:layout_width="fill_parent"  
android:layout_height="fill_parent"
android:orientation="vertical" 
xmlns:android="http://schemas.android.com/apk/res/android"> 

<TextView android:id="@+id/showView" android:layout_width="fill_parent"        
android:layout_height="wrap_content"/>

</ScrollView> 
```

常量.java

```
public interface Constants extends BaseColumns {
    public static final String TABLE_NAME= "contact";
    public static final String CONTACT_NAME= "ContactName";
    public static final String KEY_ID="_id";
} 
```

ContactsData.java

```
public class ContactsData extends SQLiteOpenHelper {

public static final String DATABASE_NAME="contacts.db";
private static final int DATABASE_VERSION=1;

public ContactsData(Context context){
super(context, DATABASE_NAME, null, DATABASE_VERSION);
}

public void onCreate(SQLiteDatabase db){
db.execSQL("CREATE TABLE " + TABLE_NAME + " (" + _ID + " INTEGER PRIMARY KEY AUTOINCREMENT,   
ContactName TEXT NOT NULL);");
}

public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion){
db.execSQL("DROP TABLE IF EXISTS " + TABLE_NAME); 
onCreate(db);
}

} 
```

DbProjectActivity.java

```
package medialab.elearning;
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.TextView;
import android.content.ContentResolver;   
import android.net.Uri;
import android.provider.ContactsContract;   
import android.provider.ContactsContract.CommonDataKinds.StructuredPostal;
import static medialab.elearning.Constants.TABLE_NAME;   
import static medialab.elearning.Constants.CONTACT_NAME;
import static medialab.elearning.ContactsData.DATABASE_NAME;
import static medialab.elearning.Constants.KEY_ID;
import android.content.ContentValues;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;

 public class DbProjectActivity extends Activity {
/** Called when the activity is first created. */
private static final String DNAME= ContactsContract.Contacts.DISPLAY_NAME;
private static final Uri URI= ContactsContract.Contacts.CONTENT_URI;
public String name="";
public String tableName=Constants.TABLE_NAME;
public String contactName=Constants.CONTACT_NAME;
public String contactname="ContactName";
public Integer savedCounter=0, addedCounter=0;
private ContactsData con;
Long rawId=null;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    TextView tv = (TextView) findViewById(R.id.textview);
    tv.setText("");
    con = new ContactsData(this);
    try{
        Button button1 = (Button) findViewById(R.id.btn2);
        button1.setOnClickListener(new OnClickListener(){
            @Override
            public void onClick(View view){
                showRecords();
            }
        });

        Button button2 = (Button) findViewById(R.id.btn3);
        button2.setOnClickListener(new OnClickListener(){
            @Override
            public void onClick(View view){
                showContacts();
            }
        });

        Button button = (Button) findViewById(R.id.btn);
        button.setOnClickListener(new OnClickListener(){
            @Override
            public void onClick(View view){
                TextView tv = (TextView) findViewById(R.id.textview);
                tv.setText("");
                Bundle extras= getIntent().getExtras();
                rawId = extras.getLong(Constants.KEY_ID);
                ContentResolver cr= getContentResolver();
                Cursor cu= cr.query(URI, null, null, null, null);
                if(cu.getCount()>0){
                    cu.moveToFirst();}
                while(cu.moveToNext()){
                    name=cu.getString(cu.getColumnIndex(DNAME));
                    if(rawId!=null){
                        search(name);
                        rawId+=1;
                    }
                    else{
                        addContact(name);
                        rawId+=1;
                    }
                }
                tv.setText("CONTACTS FOUND IN YOUR MOBILE: " + (addedCounter + savedCounter) + "\nALLREADY STORED IN DATABASE: " + savedCounter + "\nNEW CONTACTS ADDED IN DATABASE: " + addedCounter);
                addedCounter=0;
                savedCounter=0;
                cu.close();
            }
        });
    }
    finally {
        con.close();
    }
}

@Override
public void onPause(){
    super.onPause();
    con.close();
}

@Override
public void onResume(){
    super.onResume();
    con = new ContactsData(this);
    try{
        Button button1 = (Button) findViewById(R.id.btn2);
        button1.setOnClickListener(new OnClickListener(){
            @Override
            public void onClick(View view){
                showRecords();
            }
        });
        Button button2 = (Button) findViewById(R.id.btn3);
        button2.setOnClickListener(new OnClickListener(){
            @Override
            public void onClick(View view){
                showContacts();
            }
        });
        Button button = (Button) findViewById(R.id.btn);
        button.setOnClickListener(new OnClickListener(){
            @Override
            public void onClick(View view){
                TextView tv = (TextView) findViewById(R.id.textview);
                tv.setText("");
                Bundle extras= getIntent().getExtras();
                rawId = extras.getLong(Constants.KEY_ID);
                ContentResolver cr= getContentResolver();
                Cursor cu= cr.query(URI, null, null, null, null);
                if(cu.getCount()>0){    
                    cu.moveToFirst();}
                while(cu.moveToNext()){
                    name=cu.getString(cu.getColumnIndex(DNAME));
                    if(rawId!=null){
                        search(name);
                        rawId+=1;
                    }
                    else{
                        addContact(name);
                    }
                }
                tv.setText("CONTACTS FOUND IN YOUR MOBILE: " + (addedCounter + savedCounter) + "\nALLREADY STORED IN DATABASE: " + savedCounter + "\nNEW CONTACTS ADDED IN DATABASE: " + addedCounter);
                addedCounter=0;
                savedCounter=0;
                cu.close();
            }
        });
    } finally{
        con.close();
    }
}

private void search(String name){
    Integer count=0;
    SQLiteDatabase db = con.getReadableDatabase();
    Cursor c = db.rawQuery("select count(*) from contact where " + contactName + "=" + name, null); 
    c.moveToFirst(); 
    count = c.getCount();
    if(count==0){
        addContact(name);
        addedCounter+=1;
    }
    else{
        savedCounter+=1;
    }
    c.close();
    db.close();
}

private void addContact(String name){
    SQLiteDatabase db = con.getWritableDatabase();
    ContentValues values = new ContentValues();
    values.put(Constants.CONTACT_NAME, name);
    db.insertOrThrow(Constants.TABLE_NAME, null, values);
    db.close();
}

private void showRecords(){
    setContentView(R.layout.show);
    StringBuilder builder = new StringBuilder("Saved records:\n");
    SQLiteDatabase db = con.getReadableDatabase();
    Cursor c=db.rawQuery("SELECT * FROM " + Constants.TABLE_NAME, null);
    c.moveToFirst();
    while(!c.isAfterLast())
    {
        long id= c.getLong(0);
        String recordName = c.getString(1);
        builder.append(id).append(": ");
        builder.append(recordName).append("\n");
    }
    TextView text = (TextView) findViewById(R.id.showView);
    text.setText(builder);
}

private void showContacts(){
    Integer contactNum=0;
    String contactName="";
    String contactInfo="";
    String contactsList="";
    setContentView(R.layout.show);
    TextView text = (TextView) findViewById(R.id.showView);
    ContentResolver cr= getContentResolver();
    Cursor cu= cr.query(URI, null, null, null, null);
    if(cu.getCount()>0){    
        while(cu.moveToNext()){
            contactName=cu.getString(cu.getColumnIndex(DNAME));
            contactInfo = contactNum + " " + contactName + "\n";    
            contactsList+= contactInfo;
            contactNum+=1;
        }
    }
    text.setText(contactsList);
}

} 
```

显示联系人和数据库记录的按钮工作得很好。但是，每当我测试保存按钮时，我都会在日志文件上收到一个我无法理解的错误。这是日志文件的结果

```
06-24 20:28:16.233: D/AndroidRuntime(281): Shutting down VM 06-24 20:28:16.233: W/dalvikvm(281): threadid=1: thread exiting with uncaught exception (group=0x4001d800) 
06-24   20:28:16.243: E/AndroidRuntime(281): FATAL EXCEPTION: main 06-24 20:28:16.243: E/AndroidRuntime(281): java.lang.NullPointerException 
06-24 20:28:16.243: E/AndroidRuntime(281):  at medialab.elearning.DbProjectActivity$6.onClick(DbProjectActivity.java:122) 
06-24 20:28:16.243: E/AndroidRuntime(281):  at android.view.View.performClick(View.java:2408) 
06-24 20:28:16.243: E/AndroidRuntime(281):  at android.view.View$PerformClick.run(View.java:8816) 
06-24 20:28:16.243: E/AndroidRuntime(281):  at android.os.Handler.handleCallback(Handler.java:587) 
06-24 20:28:16.243: E/AndroidRuntime(281):  at android.os.Handler.dispatchMessage(Handler.java:92) 
06-24 20:28:16.243: E/AndroidRuntime(281):  at android.os.Looper.loop(Looper.java:123) 06-24 20:28:16.243: E/AndroidRuntime(281):   at android.app.ActivityThread.main(ActivityThread.java:4627) 
06-24 20:28:16.243: E/AndroidRuntime(281):  at java.lang.reflect.Method.invokeNative(Native Method) 
06-24 20:28:16.243: E/AndroidRuntime(281):  at java.lang.reflect.Method.invoke(Method.java:521) 
06-24 20:28:16.243: E/AndroidRuntime(281):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868) 
06-24 20:28:16.243: E/AndroidRuntime(281):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626) 
06-24 20:28:16.243: E/AndroidRuntime(281):  at dalvik.system.NativeStart.main(Native Method) 
```

请大家帮帮我，因为这让我发疯了！！！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T18:10:29.210

你有 ：

```
private void search(String name){
    SQLiteDatabase db = con.getReadableDatabase();
    Cursor c = db.rawQuery("select count(*) from contact where " + contactName + "=" + name, null); 
    c.moveToFirst(); 
    int count = c.getInt(0); 
    if(count==0){
        addContact(name);
        addedCounter+=1;
    }
    else{
        savedCounter+=1;
}
    c.close();
    db.close();
} 
```

但不是 c.getInt(0) 而是尝试 c.getcount()。据我所知，SQLite 中没有第 0 列。:) 我注意到的其他一些事情是：

```
private void addContact(String name){
    SQLiteDatabase db = con.getWritableDatabase();
    ContentValues values = new ContentValues();
    values.put(Constants.CONTACT_NAME, name);
    db.insertOrThrow(Constants.TABLE_NAME, null, values);
    db.close();
} 
```

您可能需要将 Constants.CONTACT_NAME 更改为 DNAME。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T16:52:43.917

你不应该使用

```
android:maxSdkVersion="17" 
```

因为

1.  SDK 版本 17 不存在，并且

2.  99% 的时间绝对没有理由阻止更高版本的 SDK 使用您的应用程序。更新的 SDK 版本在发布时考虑了向后兼容性。

因此，`maxSdkVersion`如果您仍然遇到错误，只需将所有属性一起删除并发布您的 logcat 输出。

* * *

你问“缩进”是什么意思......所以你去：

## 缩进不佳的代码示例：

```
Button button2 = (Button) findViewById(R.id.btn3);
button2.setOnClickListener(new OnClickListener(){
@Override
public void onClick(View view){
showContacts();
}
}); 
```

## 正确缩进的代码示例

```
Button button2 = (Button) findViewById(R.id.btn3);
button2.setOnClickListener(new OnClickListener(){
    @Override
    public void onClick(View view){
        showContacts();
    }
}); 
```

# python - 如何使用变量用法而不是实际名称访问 GAE 数据存储属性？

> ID：11179312
> 
> 赞同：1
> 
> 时间：2012-06-24T16:49:45.233
> 
> 标签：python, google-app-engine, google-cloud-datastore

我有很多行，比如

```
if last_name:
    person.last_name = hashlib.sha512(last_name + salt).hexdigest()
if first_name:
    person.first_name = hashlib.sha512(first_name + salt).hexdigest() 
```

我想写一个函数来简化代码。但是我该如何使用`person.<variablename>?`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T16:54:47.853

```
def set_hash(entity, name, value):
  if value:
    setattr(entity, name, hashlib.sha512(value + salt).hexdigest())

set_hash(person, "last_name", last_name)
set_hash(person, "first_name", first_name) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T01:34:16.053

如果您要像 Shay 的示例中那样单独枚举属性，则更具可读性的解决方案是将您的代码抽象为一个函数：

```
def poorly_salted_hash(value, salt):
  return hashlib.sha512(value + salt).hexdigest()

person.first_name = poorly_salted_hash(first_name, salt)
person.last_name = poorly_salted_hash(last_name, salt) 
```

如果您想知道为什么我将函数称为“低盐化哈希”，那是因为这不是对哈希进行盐化的好方法：您应该使用 Python`hmac`库提供的 HMAC 之类的构造。不过，对某人的名字和姓氏进行散列是相当奇怪的——至少可以这么说，所以我不知道你的安全目标是什么。

# ios - 尝试从超级视图中删除对象时，Objective-c 程序崩溃

> ID：11179314
> 
> 赞同：0
> 
> 时间：2012-06-24T16:49:57.990
> 
> 标签：ios, xcode, view, crash, superview

波纹管是我按下按钮时调用的代码。该按钮将调用下面的方法。但是我收到“发送到实例的无法识别的选择器”错误。我究竟做错了什么？在调用此方法之前，已在另一种方法中声明了对象。我也试过隐藏按钮，但它们也会崩溃。有人请帮忙。

```
-(void) clearControlPannel{

    [buttCheck removeFromSuperview];
    [buttBet removeFromSuperview];
    [buttCall removeFromSuperview];
    [buttRaise removeFromSuperview];
    [buttFold removeFromSuperview];
    [betLabel removeFromSuperview];
    [betSlider removeFromSuperview];

} 
```

崩溃是：

[buttCheck removeFromSuper]; 行上的线程 1：EXC_BAD_ACCESS"

> -[__NSCFDictionary removeFromSuperview]：无法识别的选择器发送到实例 0x686b020 2012-06-24 19:08:12.175 HeadsUp[59630:f803] ***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[__NSCFDictionary removeFromSuperview]：无法识别的选择器发送到实例 0x686b020'

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T17:13:38.433

> 无法识别的选择器发送到实例

错误是由于运行时无法找到将响应该特定操作的方法。换句话说，它无法将您的方法（选择器）的名称与其实现进行映射。

所以，如果你有一个不接受像你这样的参数的方法

```
- (void) clearControlPannel {...} 
```

选择器将只有`clearControlPannel`.

否则，如果您为该方法指定了一个参数（例如，像发送者一样，`UIButton`在这种情况下）像

```
- (void) clearControlPannel:(id)sender {...} 
```

选择器将是`clearControlPannel:`. 注意`:`。

如果您提供更多详细信息，我们可以为您提供帮助。

**编辑**

只是为了为您指明正确的方向。

如果您`– addTarget:action:forControlEvents:`在`UIButton`实例上使用过，则必须检查两件事。

首先，你设置`target`正确了吗？是动作将`target`被重定向到的对象。

其次，您是否为此设置了正确的选择器`action`？

这里有一个例子：

```
[myButton addTarget:self action@selector(mySelector:) ...]; 
```

在哪里

```
- (void)mySelector:(id)sender {...} 
```

如果您实现该按钮的类也将响应该操作 use `self`，否则您需要注入一些其他实例来响应该操作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-25T05:45:00.693

检查您是否正在释放您正在按下的按钮。

# haskell - Haskell 中的数据类型设计

> ID：11179316
> 
> 赞同：4
> 
> 时间：2012-06-24T16:50:00.657
> 
> 标签：haskell, algebraic-data-types

你有什么建议：

```
data Direction = Left | Right
type Direction = Bool
newtype Direction = Direction Bool 
```

然后我正在制作：

```
data Move = WalkRight Bool | Jump 
```

或者

```
data Move = Walk Direction | Jump 
```

取决于前面的答案。我有一个类型的功能`Char -> Maybe Move`：

```
charToAction 'q' = Just $ WalkRight False
charToAction 'd' = Just $ WalkRight True
charToAction 'z' = Just Jump
charToAction _ = Nothing 
```

我应该将我的类型更改`Move`为：

```
data Move = Stationary | WalkRight Bool | Jump 
```

? 该功能将变为：

```
charToAction 'q' = WalkRight False
charToAction 'd' = WalkRight True
charToAction 'z' = Jump
charToAction _ = Stationary 
```

我想知道这是因为列表不需要Maybe：

```
data [a] = [] | a : [a] 
```

或者有没有办法`Maybe`让它变得更干净？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-24T17:17:26.173

我更喜欢这样的东西：

```
data Direction = Left | Right
data Move = Walk Direction | Jump
type Action = Maybe Move
type ActionList = [Action]

charToAction :: Char -> Action
charToAction c = case c of
  'q' -> Just $ Walk Left
  'd' -> Just $ Walk Right
  'z' -> Just $ Jump
  _   -> Nothing

stringToActions :: String -> ActionList
stringToActions = map charToAction 
```

根据每种数据类型清楚地解释其用途的原则，并且不“假设”任何关于如何使用它的信息。一些反例：

```
newtype Direction = Direction Bool
data Move = Stationary | Walk Direction | Jump 
```

在这里，`Direction`并没有真正解释它的含义……它意味着您有方向还是没有方向？嗯！另外，当您需要`Up`and时会发生什么`Down`？如果`Direction`只是一个`Bool`.

并且这里`Move`有一个数据构造函数`Stationary`，它实际上根本不是一个移动。您“泄露”了某些击键不会导致移动的概念。同样，这最终会使您的代码复杂化。

有道理？

# c# - 覆盖静态字段

> ID：11179318
> 
> 赞同：2
> 
> 时间：2012-06-24T16:50:05.910
> 
> 标签：c#, windows, static, polymorphism

我正在为我的游戏编写 C# 游戏引擎，但遇到了问题。

我需要为每种不同类型的块做一个 XNA.Rectangle drawRectangle。

块存储在块列表中，因此必须覆盖该属性，以便通过绘制访问而无需大量转换。

我已经尝试了很多方法，但都没有奏效。

这是我正在做的当前一个：

块.cs

```
protected static Rectangle m_drawRectangle = new Rectangle(0, 0, 32, 32);
public Rectangle drawRectangle
{
    get { return m_drawRectangle; }
} 
```

BlockX.cs

```
protected static Rectangle m_drawRectangle = new Rectangle(32, 0, 32, 32); 
```

但是，在创建 BlockX 并访问 时`drawRectangle`，它仍然返回 0、0、32、32。

理想情况下，我可以只覆盖该`drawRectangle`成员，但是这样做意味着在每个块类中创建一个成员。我只想调整 m_drawRectangle。

每个块将被创建数百次，所以我不希望它是非静态的，在构造函数中这样做会很愚蠢。

除了在每个块中放置一个静态函数来初始化静态事物之外，还有什么更好的方法吗？

编辑：

所以总结一下，我的要求是：

*   BlockX.cs 中需要覆盖的最少额外代码
*   字段必须保持静态
*   最好不用覆盖`drawRectangle`，只有`m_drawRectangle`。
*   每次访问属性时都不必创建新的矩形

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-24T16:57:37.840

静态成员不是以多态方式调用的——就这么简单。请注意，您谈论的是*保持静态的属性-您**目前*没有静态属性。您有一个实例属性和两个静态*字段*。

几个选项：

*   一个在每个类中被覆盖的虚拟成员，即使它不需要对象的任何状态，除了它的类型
*   将要绘制的矩形传递到块的构造函数中，并将其存储在一个字段中

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T17:02:35.417

如果您使用 virtual 关键字，则不必在每个类中覆盖 drawRectangle。

块.cs

```
protected static Rectangle m_drawRectangle = new Rectangle(0, 0, 32, 32);
public virtual Rectangle drawRectangle
{
    get { return m_drawRectangle; }
} 
```

BlockX.cs

```
private static Rectangle m_drawRectangleX = new Rectangle(32, 0, 32, 32);
public override Rectangle drawRectangle
{
    get { return m_drawRectangleX; }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T17:01:14.147

您不能覆盖静态成员。

我意识到您不想覆盖drawRectangle，但考虑到您的问题，这似乎是最简单的实现解决方案。您最好的解决方案是在每个派生类中声明一个新的静态字段并覆盖实例属性以达到您想要的结果：

```
public class Block
{
    private static Rectangle m_drawRectangle = new Rectangle(0, 0, 32, 32);
    public virtual Rectangle drawRectangle
    {
        get { return m_drawRectangle; }
    }
}

public class BlockX : Block 
{
    private static Rectangle m_drawRectangle = new Rectangle(0, 0, 32, 32);
    public override Rectangle drawRectangle
    {
        get { return m_drawRectangle; }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-16T20:46:25.747

正如其他人提到的那样，您不能覆盖静态成员，但我想即兴回答，同时考虑到静态成员创建期间或由于应用程序池回收或类似事件可能出现的任何问题。

```
public class Block
{
    private static Rectangle m_drawRectangle;
    public virtual Rectangle drawRectangle
    {
        get 
            {
                 if(m_drawRectangle == null) m_drawRectangle = new Rectangle(0, 0, 32, 32); 
                 return m_drawRectangle; 
            }
    }
}

public class BlockX : Block 
{
    private static Rectangle m_drawRectangle = new Rectangle(0, 0, 32, 32);
    public override Rectangle drawRectangle
    {
        get 
            {
                 if(m_drawRectangle == null) m_drawRectangle = new Rectangle(0, 0, 32, 32); 
                 return m_drawRectangle; 
            }

    }
} 
```

# ios - 有什么方法可以跟踪 iOS 中的互联网使用情况？

> ID：11179320
> 
> 赞同：0
> 
> 时间：2012-06-24T16:50:09.480
> 
> 标签：ios, xcode

我想知道 iOS 是否有某种方法可以跟踪互联网使用情况……我不在乎它是否需要私有 API，因为它将供个人使用……但是，如果有“Apple”的方式来做它比私有 API 更好。

谢谢！

# python - 读取子进程的 STDOUT

> ID：11179321
> 
> 赞同：0
> 
> 时间：2012-06-24T16:50:19.253
> 
> 标签：python, subprocess, stdout

您好，我想读取命令的输出，该输出提供如下所示的进度条输出

```
10% |****                       | 3:56 ETA 
```

我尝试使用以下代码

```
import subprocess
import sys
proc = subprocess.Popen("command", shell=True, stdout=subprocess.PIPE)
while True:
    line = proc.stdout.readline()
    if not line:
        break
    split = line.rstrip()
    print line
    print "\n"
print "Done" 
```

此代码在进度条完成到 100% 后读取输出，但我想在中间读取它。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T16:53:30.053

您正在使用`readline()`，但进度条全部打印在一行上，因此`readline()`请等到进度条完全打印出来，因为那是发生换行符的时候。尝试一次`read(1)`获得一个角色。

# c# - C# / Excel：将 Excel 范围转换为具有正确数据类型的数组

> ID：11179325
> 
> 赞同：4
> 
> 时间：2012-06-24T16:50:57.160
> 
> 标签：c#, excel, excel-interop

我用 Excel 应用程序 ( ) 打开 *.htm 文件`Microsoft.Office.Interop.Excel`。解析得非常好！所以我可以使用它。为了提高速度，我正在尝试从 Excel Range 获取数据并插入 System.Array 并使用它：

```
Excel.Range range = ExcelWorksheet.get_Range("A1", "H1500"); // get all values
System.Array dataArray = (System.Array)(range.Cells.Value2); // insert into array 
```

问题在于数据类型。如果 Excel 单元格具有时间或日期格式，`range.Cells.Value2`则生成：
12.06.2012 到 41072（Excel 单元格类型 - 日期）
14:48 到 0,616666666666667（Excel 单元格类型 - 时间）
如果我从 Excel 单元格中获得单个值，我会得到正确的值（带`Cells.Text.ToString()`）：

```
ExcelWorksheet.get_Range("A1", "A1").Cells.Text.ToString() 
```

任务：我需要从 Excel 工作表中获取值，就像文本一样，而不是另一种类型。
并且不希望 Excel 代替我思考 :)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T17:52:21.430

为什么不直接将返回值转换为您需要的格式？DateTime 的 FromOADate 方法就是为此而设计的（参见[http://msdn.microsoft.com/en-us/library/1ad4d8d6(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/1ad4d8d6(v=vs.80).aspx)）。例如，返回的时间值代表一天 24 的一小部分。因此，以下示例将输出“14:48”：

```
double oleDateTime = 0.616666666666667;
DateTime dt = DateTime.FromOADate(oleDateTime);
string time = dt.ToString("H:mm");
Console.WriteLine(time); 
```

至于日期值，您可以使用相同的方法。唯一的区别是 Excel 中的值（双精度）将大于零，因为它包含日期部分（不仅仅是时间）。以下将产生“12.06.2012”：

```
dt = DateTime.FromOADate(41072);
string date = dt.ToString("dd.MM.yyyy");
Console.WriteLine(date); 
```

为了进一步说明，如果您正在处理日期和时间（返回的 Excel 值大于零），以下将产生“6/12/2012 2:48:00 PM”：

```
dt = DateTime.FromOADate(41072.616666666666667);
Console.WriteLine(dt.ToString()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T09:08:48.767

当您想准确读取 Excel 文件中可见/显示的内容时，请使用此方法。

```
Excel.Range range = workSheet.get_Range("A1", "D4");

int totalRows = range.Rows.Count;
int totalColumns = range.Columns.Count;
for (int rowCounter = 1; rowCounter <= totalRows; rowCounter++)
{
  for (int colCounter = 1; colCounter <= totalColumns; colCounter++)
  {
     var cellVal = workSheet.Cells[rowCounter, colCounter];
     var val = cellVal.Text;
  }
} 
```

# matrix - 将对象的旋转定向到 THREE.JS 中的样条点切线

> ID：11179327
> 
> 赞同：6
> 
> 时间：2012-06-24T16:51:14.163
> 
> 标签：matrix, three.js, quaternions

我正在使用[SplineCurve3](https://github.com/mrdoob/three.js/blob/master/src/extras/core/Curve.js)仅在 X 和 Y 轴上绘制一条线，我有一个立方体通过使用`spline.getPoint(t)`where t is 0-1 time 成功地沿着这条线制作动画。我正在尝试通过使用点积的 Y 向上向量将立方体定向到线。

它几乎是对齐的，但略微偏出。我认为我会使用 Y 向量的点积和当前点的切线作为将四元数旋转到的角度。

这是我的渲染功能：

```
function render() {

    var updateMatrix = new THREE.Matrix4(); 
    updateMatrix.setPosition(spline.getPoint(t));

    var angle = new THREE.Vector3(0,1,0).dot(spline.getTangent(t).normalize());

    var quat = new THREE.Quaternion;
    quat.setFromAxisAngle(new THREE.Vector3(0,0,1), angle);
    updateMatrix.setRotationFromQuaternion(quat);

    marker.rotation.getRotationFromMatrix(updateMatrix);
    marker.matrixWorld = updateMatrix;

    t = (t >= 1) ? 0 : t += 0.002;

    renderer.render(scene, camera); 
} 
```

这是一个演示我的问题的小提琴，谁能告诉我旋转方面哪里出了问题？

您可以编辑我的 - [jsfiddle 示例](http://jsfiddle.net/SCXNQ/188/)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-24T21:33:51.177

根据经验，最好不要`object.matrix`直接弄乱 ，而只需设置对象`position`、`rotation`和`scale`。让库处理矩阵操作。你需要有`matrixAutoUpdate = true;`.

要处理旋转部分，首先获取曲线的切线。

```
tangent = spline.getTangent( t ).normalize(); 
```

您想要旋转对象，使其向上向量（局部 y 向量）指向曲线切线向量的方向。首先计算要旋转的轴。轴是垂直于由上向量和切向量定义的平面的向量。您使用叉积来获取此向量。

```
axis.crossVectors( up, tangent ).normalize(); 
```

请注意，在您的情况下，由于样条线位于垂直于 z 轴的平面中，因此刚刚计算的轴将平行于 z 轴。但是，它可能指向正 z 轴或负 z 轴的方向——这取决于切向量的方向。

现在计算上向量和切向量之间的弧度角。上向量和切向量的点积给出了它们之间角度的余弦（因为两个向量都是单位长度）。然后你必须取反余弦来获得角度本身。

```
radians = Math.acos( up.dot( tangent ) ); 
```

现在，从轴和角度中提取四元数。

```
marker.quaternion.setFromAxisAngle( axis, radians ); 
```

编辑：[删除过时的小提琴]

三.js r.69

# machine-instruction - 报告程序执行期间 IP 更改值的次数

> ID：11179330
> 
> 赞同：0
> 
> 时间：2012-06-24T16:51:27.433
> 
> 标签：machine-instruction

是否可以编写软件（针对某些特定的编程语言、平台等）来告知用户在程序执行期间相关*机器级指令指针更改值的确切次数？*这样的软件是否已经可用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T17:08:48.607

是的，这是可能的，至少在许多处理器上是这样。关键是使用[*硬件性能计数器*](http://en.wikipedia.org/wiki/Hardware_performance_counter)。

我不确定是否有一个好的 API 可以访问这些。但是像[*OProfile*](http://oprofile.sourceforge.net/news/)这样的工具可以为你做这种性能监控。

# xml - 保留几个键值对

> ID：11179333
> 
> 赞同：0
> 
> 时间：2012-06-24T16:51:37.673
> 
> 标签：xml, hashmap, key-value

我需要保留大约 10 个键值对。由于它不大，我当然不想使用数据库。所以我在想一个简单的java Hashmap。但那我怎么能坚持呢？

另一个选项可能是一个 xml 文件，但是我很难解析它。

你推荐哪一个。还是有其他解决方案？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T20:23:19.587

所以我最终最终使用了 java 首选项 API。

它根据您的操作系统将键值对保存在某处。我们可以像 Map 一样使用 put 和 get 方法。我运行了一次，它一直存在于我的操作系统上。

谢谢。

# c# - System.DateTime.Year（及其其他属性）是如何实现的？

> ID：11179335
> 
> 赞同：2
> 
> 时间：2012-06-24T16:51:45.203
> 
> 标签：c#, c++, datetime

我正在研究 C# DateTime 结构的 C++ 半端口。（如果你想[看看](https://github.com/TheBuzzSaw/DateTimePlusPlus)它是公共领域。）我真的很喜欢让这个类围绕一个单独的私有 64 位整数。它使许多操作变得超级简单，并使类保持轻量级。我正在努力的部分是从刻度到年、月或日的计算。目前，[我使用循环](https://github.com/TheBuzzSaw/DateTimePlusPlus/blob/master/DateTime.cpp#L92)来获得正确的答案：我一次减去一年的刻度，这样我就可以在正确的时间减去闰年的刻度。

好消息是它得到了正确的答案。如果可能的话，我只是更喜欢使用直接的数学方法。我知道 C# 不是开源的，但是有没有办法查看 DateTime 的实现？如果不是，我在哪里可以找到将 N 天转换为年、月和日的数学公式？

请不要对过早的优化发表评论。我没有截止日期。我只是想让这变得更好。这是一次学习经历。

更新 - 对于任何好奇的人，我也确实设法看到了 Mono 中的实现。源代码中有一个纯文本 DateTime.cs。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T17:15:23.110

`Date`以下是我之前实现的结构的摘录。构造函数包含用于将自 0001 年 1 月 1 日以来的天数（“序列号”）转换为年、月和日的主要逻辑。它基于 的实际源代码`System.DateTime`，但我使用了更具描述性的变量名称并添加了注释。

从多个`DateTime`刻度转换时，您需要先除以`TimeSpan.TicksPerDay`得到序列号。

```
/// <summary>
/// Represents a date between January 1, 0001 CE, and December 31, 9999 CE, in the proleptic Gregorian calendar.
/// </summary>
public struct Date
{
    public const Int32 DaysPerYear = 365;
    public const Int32 MonthsPerYear = 12;

    private const UInt32 MaxSerialNumber = 3652058;
    private const UInt32 December = 11; // 0-based
    private const UInt32 DaysInDecember = 31;

    private const UInt32 LeapYearInterval1 = 4;
    private const UInt32 LeapYearInterval2 = 100;
    private const UInt32 LeapYearInterval3 = 400;

    private const UInt32 DaysPerLeapYearInterval1 =
        DaysPerYear * LeapYearInterval1 + 1; // +1 leap day every 4 years
    private const UInt32 DaysPerLeapYearInterval2 =
        DaysPerLeapYearInterval1 * (LeapYearInterval2 / LeapYearInterval1) - 1; // -1 leap day every 100 years
    private const UInt32 DaysPerLeapYearInterval3 =
        DaysPerLeapYearInterval2 * (LeapYearInterval3 / LeapYearInterval2) + 1; // +1 leap day every 400 years

    private static readonly UInt32[] DaysOfYear =
        new UInt32[(MonthsPerYear + 1) * 2]
        {
            0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334, 365,
            0, 31, 60, 91, 121, 152, 182, 213, 244, 274, 305, 335, 366,
        };

    private readonly UInt16 _zeroBasedYear; // 0 to 9998
    private readonly Byte _zeroBasedMonth; // 0 to 11
    private readonly Byte _zeroBasedDay; // 0 to 30

    /// <summary>
    /// Initializes a new instance of the <see cref="Date" /> structure to a specified serial number.
    /// </summary>
    /// <param name="serialNumber">
    /// The <see cref="SerialNumber" /> of the new <see cref="Date" />.
    /// </param>
    /// <exception cref="ArgumentOutOfRangeException">
    /// <paramref name="serialNumber" /> is less than 0 or greater than 3652058.
    /// </exception>
    public Date(Int32 serialNumber)
    {
        Require.IsBetween("serialNumber", serialNumber, 0, (Int32)MaxSerialNumber);
        UInt32 days = (UInt32)serialNumber;

        // Find the first year of the 400-year period that contains the date:
        UInt32 zeroBasedYear = days / DaysPerLeapYearInterval3 * LeapYearInterval3;
        days %= DaysPerLeapYearInterval3;

        // Within the 400-year period, advance to the first year of the century that contains the date:
        UInt32 centuries = days / DaysPerLeapYearInterval2;
        zeroBasedYear += centuries * LeapYearInterval2;

        // Special case: If the date is the last day (December 31) of the 400-year period,
        // then "centuries" will be out of range because the fourth century has one more day than the others:
        if (centuries == LeapYearInterval3 / LeapYearInterval2)
            goto December31;

        days %= DaysPerLeapYearInterval2;

        // Within the century, advance to the first year of the 4-year period that contains the date:
        zeroBasedYear += days / DaysPerLeapYearInterval1 * LeapYearInterval1;
        days %= DaysPerLeapYearInterval1;

        // Within the 4-year period, advance to the year that contains the date:
        UInt32 years = days / DaysPerYear;
        zeroBasedYear += years;

        // Special case: If the date is the last day (December 31) of the 4-year period,
        // then "years" will be out of range because the fourth year has one more day than the others:
        if (years == LeapYearInterval1)
            goto December31;

        days %= DaysPerYear;

        // Estimate the month using an efficient divisor:
        Int32 index = GetDaysOfYearIndex(zeroBasedYear);
        UInt32 zeroBasedMonth = days / 32;

        // If the estimate was too low, adjust it:
        if (days >= DaysOfYear[index + (Int32)zeroBasedMonth + 1])
            ++zeroBasedMonth;

        _zeroBasedYear = (UInt16)zeroBasedYear;
        _zeroBasedMonth = (Byte)zeroBasedMonth;
        _zeroBasedDay = (Byte)(days - DaysOfYear[index + (Int32)zeroBasedMonth]);
        return;

    December31:
        _zeroBasedYear = (UInt16)(zeroBasedYear - 1);
        _zeroBasedMonth = (Byte)December;
        _zeroBasedDay = (Byte)(DaysInDecember - 1);
    }

    private static Int32 GetDaysOfYearIndex(UInt32 zeroBasedYear)
    {
        return !InternalIsLeapYear(zeroBasedYear) ? 0 : MonthsPerYear + 1;
    }

    private static Boolean InternalIsLeapYear(UInt32 zeroBasedYear)
    {
        UInt32 year = zeroBasedYear + 1;
        return
            (year % LeapYearInterval1 == 0) &&
            (year % LeapYearInterval2 != 0 || year % LeapYearInterval3 == 0);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T16:55:31.270

您无法轻松获得 .NET 实现（无需反编译），但欢迎您查看[Noda Time](http://noda-time.googlecode.com)的源代码——我基于[Joda Time](http://joda-time.sf.net)的 .NET 日期和时间项目。这显然必须做类似的事情。

就我个人而言，我*不会*将`DateTime`其用作日期和时间 API 的起点。它有[各种不幸的方面](http://noda-time.blogspot.co.uk/2011/08/what-wrong-with-datetime-anyway.html)。有更好的日期/时间 API 可供查看（当然不仅仅是 Noda Time）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T16:55:02.487

尝试使用反射器查看实现？尽管它最终可能会调用一些非托管代码。或者看看 Mono 看看他们是否有实现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-14T21:00:19.940

对于后来发现这个问题的任何人，我*找到*了`DateTime`.

[http://referencesource.microsoft.com/#mscorlib/system/datetime.cs](http://referencesource.microsoft.com/#mscorlib/system/datetime.cs)

# python - db.key() 函数到字符串表示并返回

> ID：11179343
> 
> 赞同：0
> 
> 时间：2012-06-24T16:52:00.620
> 
> 标签：python, django, key

我用[这个](https://developers.google.com/appengine/docs/python/images/usingimages)例子来实现某种留言簿，只是我使用的是 django 框架。我不能在 html 文件中使用 db.key() 函数，所以我想也许我应该传递带有键的字符串表示的 html 并通过这个解决这个问题。我检查了[文档](https://developers.google.com/appengine/docs/python/datastore/keyclass#Key)，它说

> 通过将 Key 对象传递给 str()，可以将键转换为字符串。

所以我用过：

```
all_messages = db.GqlQuery( "SELECT * FROM Messages WHERE ANCESTOR IS :1 ORDER BY date DESC LIMIT 20" ,  image_key('name'))
    for msg in all_messages:
        msg.img_key_func = str(msg.key()) 
```

这是将键转换为字符串的正确方法吗？

我的 html 看起来像这样：

```
<ol name="list">
    {% for message in all_messages %}
    <li><div><img src="img?img_id={{ message.img_key_func }}"></img>{{ message.content }}</div></li>
    {% endfor %}
</ol> 
```

我需要做的只是像这个例子：

```
 self.response.out.write("<div><img src='img?img_id=%s'></img>" %
                                      greeting.key()) 
```

日志的结果是： /img?img_id=None 因此，我无法显示图像。

有没有更简单的方法来做到这一点？谢谢！

**编辑 1：** 更多信息

提交按钮触发

> 类发件人（webapp.RequestHandler）：

具有以下内容：

```
def post(self):
    accountName = self.request.get( "accountName" )
    text = self.request.get( "text" )
    message = Messages(parent=image_key('name'))
    message.content = self.request.get( "text" )
    avatar = self.request.get('img')
    if avatar:
        avatar = images.resize(self.request.get("img"), 32, 32)
        image_full = self.request.get("img")
        message.avatar = db.Blob(avatar)
        message.imageblob = db.Blob(image_full)
    message.put() 
```

Messages(db.Model) 看起来像：

```
class Messages(db.Model):
    imageblob = db.BlobProperty()
    avatar = db.BlobProperty()
    content = db.StringProperty(multiline=True)
    date = db.DateTimeProperty(auto_now_add=True)

    def image_key(some_id='name'):
        return db.Key.from_path('StartPage', 'name') 
```

问题是，我应该在下载后立即存储头像还是应该在请求 get_main_page 的时候调整大小？这样我可以避免存储 2 个图像 - 一个全尺寸和另一个头像。我还应该使用 image_key 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T08:10:26.560

这个：

> 我不能在 html 文件中使用 db.key() 函数

不是真的。您可以使用模板中不带参数的任何函数或方法。因此，正如 thebjorn 在评论中指出的那样，这可以正常工作：

```
img_id="{{ message.key }}" 
```

因为模板语言会调用该`key()`方法，然后将其转换为字符串进行输出。

# php - 使用 PHP 和 MySQL 进行事件编程

> ID：11179344
> 
> 赞同：1
> 
> 时间：2012-06-24T16:52:10.953
> 
> 标签：php, mysql, events

我正在构建一个时事通讯应用程序，并且我想实现一个功能，该功能允许用户对何时传递他们的消息进行编程。例如，能够在 2013 年 1 月 2 日下午 12:32 发送消息。我阅读了 MySQL 中的事件，但这并不能解决我的问题。

想到的唯一解决方案是设置一个 cron 脚本以每分钟运行一次并检查是否有消息被编程。如果是，则传递消息并执行任何其他任务。

还有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T16:53:51.777

**crontab**是你的朋友。[cron 作业示例](http://www.thegeekstuff.com/2009/06/15-practical-crontab-examples/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T17:30:09.593

作为每分钟轮询 mysql 数据库的 cron 作业的替代方法，您可以尝试使用像[beanstalk](http://kr.github.com/beanstalkd/)这样的任务队列，它允许您启动异步作业。它允许您在任务运行之前指定延迟，因此您可以将用户指定的作业应该运行的时间转换为相对延迟。然后，您可以为用户提供一个界面，以控制他们计划的作业（如果他们想取消它们）。真的，为了这个目的，如果这样安排的作业不多，而且你的 mysql 表相对较小，那么走 mysql/cron 路线可能更简单。

# php - php mysql 获取行

> ID：11179348
> 
> 赞同：0
> 
> 时间：2012-06-24T16:52:26.583
> 
> 标签：php, mysql, mysqli

我正在尝试使用 mysqli 访问一个 mysql 数据库和一个名为 phptest 的表，代码如下。我正在尝试检查 row 是否为 = 0 或其他内容，但它没有回显任何内容。代码有什么问题？

```
$mysqli = new mysqli("localhost", "root", "", "phptest");
if (!$mysqli) {
    echo "Can't connect to MySQL Server. Errorcode: %s\n". mysqli_connect_error();
    exit;
}
$query = "SELECT `id` FROM `test` WHERE `email`='example@hotmail.com' AND `password`='5f4dcc3b5aa765d61d8327deb882cf99'";
$query_run = $mysqli->query($query);
$row_cnt = $query_run->num_rows;
if ($row_cnt==0) {
    echo 'wrong..';
} else {
    echo 'correct!';
} 
```

**编辑：**在 if 语句中编辑变量。我已经直接在表格的 mysql 面板中运行了查询。然后我得到正确的行数。为什么它在 php 中不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T17:12:18.260

尽管您正在检查未定义的变量`$row_count`（应该是`$row_cnt`，但这不是您的直接问题（您仍然应该解决此问题）。您遇到致命错误是因为：

*   您的查询失败。您的查询可能由于表上缺少字段而失败，或者您确实缺少数据库中的实际表。如果查询失败，查询将返回`FALSE`，但您不会检查它，而是尝试访问结果的属性。如果查询失败，则没有结果对象，它是一个布尔值`FALSE`，会产生类似的致命错误`Fatal Error: Trying to access a property of a none object`。

*   您没有为 PHP 安装配置 MySQLi 库

要进一步调试，您应该打开错误报告，如下所示，或查阅服务器的错误日志。

```
error_reporting(E_ALL);
ini_set('display_errors', '1'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T16:55:39.523

一件事是您定义`$row_cnt`然后检查了`$row_count`，但这只是快速查看您的程序，因此可能还有其他错误。

# powershell - Powershell：如何从多维数组中获取单列？

> ID：11179351
> 
> 赞同：3
> 
> 时间：2012-06-24T16:52:49.563
> 
> 标签：powershell, multidimensional-array

是否有允许从 Powershell 中的多维数组中检索单列的函数、方法或语言构造？

```
$my_array = @()
$my_array += ,@(1,2,3)
$my_array += ,@(4,5,6)
$my_array += ,@(7,8,9)

# I currently use that, and I want to find a better way:
foreach ($line in $my_array) {
    [array]$single_column += $line[1]    # fetch column 1
}
# now $single_column contains only 2 and 5 and 8 
```

我的最终目标是从一列中找到不重复的值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T18:03:45.263

抱歉，我认为这样的事情不存在。我会去：

```
@($my_array | foreach { $_[1] }) 
```

为了快速找到唯一值，我倾向于使用哈希表键 hack：

```
$UniqueArray = @($my_array | foreach -Begin { 
    $unique = @{} 
} -Process { 
    $unique.($_[1]) = $null
} -End { 
    $unique.Keys 
}) 
```

显然它有它的局限性......

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T19:15:49.387

要提取一列：

```
$single_column = $my_array | foreach { $_[1] } 
```

要提取任何列：

```
$some_columns = $my_array | foreach { ,@($_[2],$_[1]) }   # any order 
```

要从一列中查找非重复值：

```
$unique_array = $my_array | foreach {$_[1]} | sort-object -unique
# caveat: the resulting array is sorted,
# so BartekB have a better solution if sort is a problem 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-15T06:54:16.630

I tried @BartekB's solution and it worked for me. But for the unique part I did the following.

```
@($my_array | foreach { $_[1] } | select -Unique) 
```

I am not very familiar with powershell but I am posting this hoping it helps others since it worked for me.

# asp.net - 最近添加的记录的标识并从gridview插入？

> ID：11179359
> 
> 赞同：1
> 
> 时间：2012-06-24T16:53:53.103
> 
> 标签：asp.net, vb.net, gridview, insert, datatable

我正在开发一个 ASP.Net VB Web 应用程序

该应用程序包含一个`GridView`显示我创建的数据表中的用户表的记录。该数据库是一个Sql server 数据库。

下面的代码将数据插入到一个表中，并通过内置函数从表`@@Identity`中插入最近添加的记录 id( `tt_id`)，`trainingTbl`并将该记录 id 插入到`userAssessmentTbl`. 将身份添加到第二个`userAssessmentTbl`表可以正常工作。

```
Protected Sub Button1_Click(ByVal sender As Object, ByVal e As System.EventArgs)
        Dim lblUsr2 As Control = FindControlRecursive(MultiTabs, "txtUsr")
        Dim strQuery As String
        Dim cmd As SqlCommand

        strQuery = "Insert into trainingTbl(s_id, t_date, EditorId, wa_id, st_id) values(@s_id , @t_date, @EditorId, @wa_id, @st_id  ) Insert into userAssessmentTbl(tt_id, UserId) values(@@Identity, @UserId)"

        cmd = New SqlCommand(strQuery)

        cmd.Parameters.AddWithValue("@s_id", DDLCourse.Text)
        cmd.Parameters.AddWithValue("@t_date", Convert.ToDateTime(txtDate.Text))
        cmd.Parameters.AddWithValue("@EditorId", User.Identity.Name.ToString())
        cmd.Parameters.AddWithValue("@st_id", myLblStation.Value().ToString)
        cmd.Parameters.AddWithValue("@wa_id", myLblWatch.Value().ToString)
        cmd.Parameters.AddWithValue("@UserId", lblUsr2.UniqueID.ToString)
        InsertUpdateData(cmd)
    End Sub 
```

我遇到的问题似乎集中在如何将 a `uniqueidenifier`from a`GridView`插入`userAssessmentTbl`数据库！

以及如何，我想使用循环我可以将该 Gridview ( `GridView1`)中的 UserId 记录`userAssessmentTbl`与来自`@@Identity`.

这部分插入参数似乎不正确：

```
cmd.Parameters.AddWithValue("@UserId", lblUsr2.UniqueID().ToString) 
```

我遇到的错误是：'*从字符串转换为唯一标识符时转换失败。*'

我也试过这样：

```
cmd.Parameters.AddWithValue("@UserId", SqlDbType.UniqueIdentifier).Value().ToString() 
```

我遇到了错误：*'操作数类型冲突：int 与 uniqueidentifier 不兼容'*

**问题已略微更改为如何将字符串插入到 DataType 为 Uniqueidentifier 的 SQL DB 中？**

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T17:08:43.970

Well first of all:

> `@@IDENTITY` [returns the most recently](http://cgaskell.wordpress.com/2006/11/15/using-identity-vs-scope_identity-and-further-implications-with-triggers/) created identity for your current connection, not necessarily the identity for the recently added row in a table. **Always use** `SCOPE_IDENTITY()` **to return the identity of the recently added row.**

* * *

**Secondly**, to asnwer your question:

The SQL type `Uniqueidentifier` and the CLR type `Guid` match up.

So instead of passing `"@UserId"` in as a parameter you need to create a `Guid` out of the string value.

```
Dim userID As Guid = New Guid(lblUsr2.UniqueID.ToString) 
```

# c++ - Qt 中的动态用户界面

> ID：11179362
> 
> 赞同：0
> 
> 时间：2012-06-24T16:54:43.120
> 
> 标签：c++, qt, user-interface

我有一个按钮和一个布局，它加载一个自定义的`QWidget`. 单击按钮时，我想将布局中的小部件更改为另一个示例小部件。以前的小部件应该被新的小部件完全替换。我怎么能达到这样的效果？

源代码： http: [//paste.opensuse.org/51831462](http://paste.opensuse.org/51831462)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T19:19:37.980

[QStackedWidget](http://doc.qt.nokia.com/4.7-snapshot/qstackedwidget.html)非常适合您想要实现的目标。

您将不得不重新设计一些代码，但结果将更易于理解和维护。您只需在单击按钮时更改 QStackedWidget 的当前小部件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T17:07:43.480

You could try with setCentralWidget(). Could you include your source code in your question?

# nhibernate - Nhibernate：外键必须与引用的主键具有相同的列数

> ID：11179371
> 
> 赞同：0
> 
> 时间：2012-06-24T16:55:34.923
> 
> 标签：nhibernate, orm

我对这种情况感到困惑。有这两个类：

```
public class TxType {
    public TxType()
    {
        Payments = new List<Payment>();
    }
    public string TxTypeId { get; set; }
    public string TxCode { get; set; }
    public IList<Payment> Payments { get; set; }
    public string Description { get; set; } }

public class Payment {
    public Payment() { }
    public  string Trn { get; set; }
    public  TxType TxTypeId { get; set; }
    public  string TxCode { get; set; }        
    public  System.Nullable<decimal> Amount { get; set; }
    public  System.Nullable<System.DateTime> DateStamp { get; set; } } 
```

TxType 表有两个 PK（TxTypeId，TxCode），在 Payment Table 中都是 FK。这些是我的映射：

```
 <class name="TxType" table="TxType" lazy="false" >
    <composite-id>
      <key-property name="TxTypeId" column="TxTypeId" />
      <key-property name="TxCode" column="TxCode" />
    </composite-id>
    <property name="Description">
      <column name="Description" sql-type="nvarchar" not-null="false" />
    </property>
    <bag name="Payments" inverse="true" cascade="none">
      <key>
        <column name="TxTypeId" />
        <column name="TxCode" />
      </key>      
      <one-to-many class="MyProject.Nhibernate.Repository.Payment" not-found="ignore" />
    </bag>
  </class>

  <class name="Payment" table="Payment" lazy="false" >
    <id name="Trn">
      <generator class="identity" />
    </id>
    <many-to-one insert="false" update="false" lazy="false" name="TxTypeId">
      <column name="TxTypeId" sql-type="varchar" not-null="false" />
    </many-to-one>
    <property name="TxTypeId">
      <column name="TxTypeId" sql-type="varchar" not-null="false" />
    </property>
    <many-to-one insert="false" update="false" lazy="false" name="TxCode">
      <column name="TxCode" sql-type="varchar" not-null="false" />
    </many-to-one>
    <property name="TxCode">
      <column name="TxCode" sql-type="varchar" not-null="false" />
    </property>
    <property name="Amount">
      <column name="Amount" sql-type="decimal" not-null="false" />
    </property>
    <property name="DateStamp">
      <column name="DateStamp" sql-type="datetime" not-null="false" />
    </property>    
  </class> 
```

而且我遇到了这个错误：外键（FKF4FA0208CDBA724F：Payment [TxTypeId]））必须与引用的主键（TxType [TxTypeId，TxCode]）具有相同的列数。

谢谢！

好的，我通过在付款映射中添加这些行来弄清楚：

```
<many-to-one name="TxType" class="MyProject.Nhibernate.Repository.TxType" insert="false" update="false" lazy="false" >
  <column name="TxTypeId" sql-type="varchar" not-null="false" />
  <column name="TxCode" sql-type="varchar" not-null="false" />
</many-to-one> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T09:34:52.080

您的 id 属性必须只有一个。也就是说，如果你的表有一个复合主键，你应该创建一个类来映射到这些列。请记住，Get/Load 方法只接受一个参数作为 id，而不是很多。

# php - 根据 if 语句条件分配字符串数组内容

> ID：11179374
> 
> 赞同：2
> 
> 时间：2012-06-24T16:55:40.157
> 
> 标签：php

我需要将不同的表标记代码作为字符串存储在 php 数组中。一些需要存储在数组中的代码需要使用 if 语句进行测试。在我知道我需要一些代码需要以这种方式进行测试之前，一切都完美无缺，但现在我知道存储的字符串是基于“if 语句”的，我不知道如何编码。因为我需要结束**当前**插槽的标记才能插入 php 条件语句。结果，我无法继续将数据存储在“当前”插槽中，这正是我所需要的。

我一直在尝试寻找解决方法一个多小时，感谢您对此提供的任何帮助。

```
$favorites[] = '
        <tr>
          <td><a href="#">'.$files_row['name'].'</a></td>
          <td><a href="#"><img class="table-button" src="images/smallglobe.png"></a></td>
          <td>
            <img src="images/e-mail-icon.PNG">';
                if(strcmp($_files_row['email'],'none') != 0){
                    $favorites[] = '<div style="display:none;"><a href="#" >'.$files_row['email'].'</a></div>';
                }
$favorites[]='        
         </td>
          <td class="table-button-cell">
            <img class="table-button" src="images/eicon.png">
            <div class="phonepopup" style="display:none;">Call: '.$files_row['phone'].'</div>
          </td>
          <td class="table-button-cell"> .... etc.... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T17:02:51.477

在评估 if 语句后，尝试为当前槽使用临时变量并将其分配给数组。所以你可以连接必要的字符串：

```
$temp_var = '
    <tr>
      <td><a href="#">'.$files_row['name'].'</a></td>
      <td><a href="#"><img class="table-button" src="images/smallglobe.png"></a></td>
      <td>
        <img src="images/e-mail-icon.PNG">';
            if(strcmp($_files_row['email'],'none') != 0){
                $temp_var .= '<div style="display:none;"><a href="#" >'.$files_row['email'].'</a></div>';
            }
$temp_var .='        
     </td>
      <td class="table-button-cell">
        <img class="table-button" src="images/eicon.png">
        <div class="phonepopup" style="display:none;">Call: '.$files_row['phone'].'</div>
      </td>
      <td class="table-button-cell"> .... etc....';

$favorites[] = $temp_var; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T17:14:56.233

您可以串联文本或内联指令：

```
$favorites[5] = 'I prefer '.($age > 18 ? : 'natural' : 'chocolate').' milk'; 
```

`(condition?true:false)`语法创造奇迹；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T17:11:16.313

你有两个选择：

选项一：使用连接附加字符串。

```
 $favorites[index] = '
    <tr>
        <td><a href="#">'.$files_row['name'].'</a></td>
        <td><a href="#"><img class="table-button" src="images/smallglobe.png"></a></td>
        <td>
            <img src="images/e-mail-icon.PNG">';
    if(strcmp($_files_row['email'],'none') != 0){
        $favorites[index] .= '<div style="display:none;"><a href="#" >'.$files_row['email'].'</a></div>';
    }
    $favorites[index] .= '        
         </td>
         <td class="table-button-cell">
             <img class="table-button" src="images/eicon.png">
             <div class="phonepopup" style="display:none;">Call: '.$files_row['phone'].'</div>
         </td>
         <td class="table-button-cell"> .... etc....

Option 2: Use PHP's ternary operator to do the conditional code inline.

    $favorites[index] = '
        <tr>
          <td><a href="#">'.$files_row['name'].'</a></td>
          <td><a href="#"><img class="table-button" src="images/smallglobe.png"></a></td>
          <td>
            <img src="images/e-mail-icon.PNG">' . ((strcmp($_files_row['email'],'none') != 0) ? '<div style="display:none;"><a href="#" >'.$files_row['email'].'</a></div>' : '') . '        
         </td>
          <td class="table-button-cell">
            <img class="table-button" src="images/eicon.png">
            <div class="phonepopup" style="display:none;">Call: '.$files_row['phone'].'</div>
          </td>
          <td class="table-button-cell"> .... etc.... 
```

# python - 将附加参数传递给 post_save 信号

> ID：11179380
> 
> 赞同：22
> 
> 时间：2012-06-24T16:56:42.493
> 
> 标签：python, django

我的 Django 应用程序中有一个用户注册表单，它在用户尝试注册时收集其他数据，例如地址、城市、国家/地区、电话号码等。

此数据通过`post_save`信号保存在 Account 模型类中。用户创建过程是这样的：

```
# Function to Create user Account/Profile
def create_user_account(sender, instance, created, **kwargs):
    if created:
      models.Account.objects.create(user=instance)

# Create User / User Registration
def UserRegistration(request):
    if request.method == 'POST':
        username = request.POST['fn'].capitalize() + ' ' + request.POST['ln'].capitalize()
        # CREATE USER
        newuser = User.objects.create_user(username=username, email=request.POST['email'], password=request.POST['pw'])
        newuser.first_name = request.POST['fn'].capitalize()
        newuser.last_name = request.POST['ln'].capitalize()
        newuser.save()
    return HttpResponse(username)

#Post Save handler to create user Account/Profile
post_save.connect(create_user_account, sender=User) 
```

在这里，`UserRegistration`当用户发布表单时调用该函数，在此函数下，我可以获得 POST 数据，我想要将该数据传递给`create_user_account`方法，以便它填充`Account`模型中的字段。

现在，我确实看到`Account`在数据库中创建了对象，但是除了用户字段之外的所有字段都是空的。显然，因为 POST 变量没有被传递给`create_user_account`方法。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-09T01:23:17.147

我所做的是为实例设置一些“_attrs”，然后在信号处理程序中使用它们。

我想你的情况可能是：

```
# Function to Create user Account/Profile
def create_user_account(sender, instance, created, **kwargs):
    if created:
        attrs_needed = ['_language', '_field', '_otherfield']
        if all(hasattr(instance, attr) for attr in attr_needed):
            models.Account.objects.create(
                user=instance, 
                language=instance._language, 
                field=instance._field,
                otherfield=instance._otherfield)

# Create User / User Registration
def UserRegistration(request):
  if request.method == 'POST':
    username = request.POST['fn'].capitalize() + ' ' + request.POST['ln'].capitalize()
    # CREATE USER
    newuser = User.objects.create_user(
        username=username, email=request.POST['email'],
        password=request.POST['pw'])
    newuser.first_name = request.POST['fn'].capitalize()
    newuser.last_name = request.POST['ln'].capitalize()

    # Set some extra attrs to the instance to be used in the handler.
    newuser._language = request.POST['language']
    newuser._field = request.POST['field']
    newuser._otherfield = request.POST['otherfield']
    newuser.save()

  return HttpResponse(username)

#Post Save handler to create user Account/Profile
post_save.connect(create_user_account, sender=User) 
```

我讨厌这样做，我想它可能会以可怕的方式中断，有时很难调试，也没有严格的方法来强制处理程序所需的数据，可以定义一个`signal_data(data, signal, instance)`来定义所需的数据特定实例的信号处理程序。

我没有尝试过的一个不错的选择是使用实例的方法作为信号的处理程序，也许我们可以使用更结构化的方式来传递数据。

再见。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-12-09T02:03:07.547

两者`User.objects.create_user`和`User.objects.create`立即触发`post_save`处理程序，因为`save`在`UserManager` `create_user`. 所以我无法想象豪尔赫的答案是如何起作用的（至少如果你希望保存只被触发一次 - 你为什么要触发它两次？？？）。你想要做的是研究什么`create_user`，剖析它，这样你就可以真正控制何时`save`调用：

```
# Function to Create user Account/Profile
def create_user_account(sender, instance, created, **kwargs):
    if created:
        attrs_needed = ['_language', '_field', '_otherfield']
        if all(hasattr(instance, attr) for attr in attr_needed):
            models.Account.objects.create(
                user=instance, 
                language=instance._language, 
                field=instance._field,
                otherfield=instance._otherfield)

# Create User / User Registration
def UserRegistration(request):
  if request.method == 'POST':
    username = request.POST['fn'].capitalize() + ' ' + request.POST['ln'].capitalize()
    # CREATE USER
    newuser = User(
        username=username,
        email=request.POST['email'],
        first_name=request.POST['fn'].capitalize()
        last_name = request.POST['ln'].capitalize()
    )
    newuser.set_password(request.POST['pw'])

    # Set some extra attrs to the instance to be used in the handler.
    newuser._language = request.POST['language']
    newuser._field = request.POST['field']
    newuser._otherfield = request.POST['otherfield']
    newuser.save()  # Now this will be really the first save which is called

  return HttpResponse(username)

#Post Save handler to create user Account/Profile
post_save.connect(create_user_account, sender=User, weak=False) 
```

请注意，`weak=False`当我连接处理程序时，我也会使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-15T07:42:04.453

我发现`receiver(post_save, sender=User)`当我们使用`create_user`and`create`方法时会立即调用，所以，我们需要先初始化对象，然后填充额外的字段。

# java - 使用 Play 框架在应用程序中检索端口号

> ID：11179383
> 
> 赞同：8
> 
> 时间：2012-06-24T16:57:05.393
> 
> 标签：java, playframework

我的系统上有两个 Play 框架 Web 应用程序在端口 9001 和 9002 上运行。我想知道是否有任何方法可以从我的 Java 代码中检索它们在哪个端口上运行。

这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T17:34:17.703

是的。您可以像这样获取端口：

```
int port = Integer.parseInt(Play.configuration.getProperty("http.port", 9000)); 
```

当然，你必须导入类`play.Play`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-25T10:13:19.967

在 Play 2.4.x 中：

```
Play.application().configuration().getString("http.port"); 
```

或者简单地说：

```
System.getProperty("http.port"); 
```

当 http.port 通过 Java -D 参数设置时，这仅适用于生产模式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-20T01:13:42.343

*由于系统还不允许我发表评论，我不得不在这里添加我的评论。*

Carsten 给出的答案必须针对 play1，对于 play2，请参阅[Retrieving port number in Play Framework 2 app](https://stackoverflow.com/questions/14970677/retrieving-port-number-in-play-framework-2-app)

# c++ - 使用变量参数列表初始化表

> ID：11179388
> 
> 赞同：0
> 
> 时间：2012-06-24T16:57:30.327
> 
> 标签：c++

在我的代码中，我希望能够做到

```
Table<double> tbl;
tbl.Create(2, 2, 1.0, 2.0, 3.0, 4.0); 
```

也通过构造函数

```
Table<double> tbl(2, 2, 1.0, 2.0, 3.0, 4.0); 
```

根据我的经验，使用省略号 (...) 会导致一些难以追踪的错误，因此我提出了以下方法来初始化我的表：

```
void Create(size_t rows, size_t columns, T val0)
{
    ASSERT(rows * columns == 1);
    Create(rows, columns);
    _data[0] = val0;
}

void Create(size_t rows, size_t columns, T val0, T val1)
{
    ASSERT(rows * columns == 2);
    Create(rows, columns);
    _data[0] = val0;
    _data[1] = val1;
}

void Create(size_t rows, size_t columns, T val0, T val1, T val2)
{
    ASSERT(rows * columns == 3);
    Create(rows, columns);
    _data[0] = val0;
    _data[1] = val1;
    _data[2] = val2;
} 
```

我想你应该已经明白了。但是，如果我想要最多 50 个元素的函数，这会变得相当烦人。更不用说我也必须编写所有这些构造函数。难道没有其他方法可以更优雅地处理这个问题吗？

编辑：也许我应该解释为什么我不想在这种情况下使用省略号 (...)。让我们考虑以下代码：

```
Table<double> tbl(2, 2, 1.5, 2.1, 3, 4.5); 
```

编译器将第 5 个参数解释为类型`int`，这显然不是故意的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T17:04:03.890

Variadic templates and initializer lists might work:

```
struct Table
{
    std::vector<double> data;

    template <typename ...Args>
    Table(Args &&... args)
    : data({std::forward<Args>(args)...})
    {  }
}; 
```

# php - 用于表情符号的正则表达式 preg_replace

> ID：11179391
> 
> 赞同：-1
> 
> 时间：2012-06-24T16:58:21.083
> 
> 标签：php, regex, preg-replace

> **可能重复：**
> [用他们的图像替换表情符号列表](https://stackoverflow.com/questions/3055515/replace-a-list-of-emoticons-with-their-images)

我正在开发一个网站，我想让用户可以在帖子上微笑。我的（只是功能性的）想法是以这种方式使用数组：

```
$emoticons = array(
array("17.gif",":)"),
array("6.jpg",":P"),
.....
array("9.jpg",":'("),
array("5.gif","X)")
); 
```

图片在 [0] 上，表情在 [1] 上。在每个 $post 上：

```
foreach($emoticons as $emoticon){
     $quoted_emoticon = preg_quote($emoticon[1],"#");
     $match = '#(?!<\w)(' . $quoted_emoticon .')(?!\w)#';
     $post = preg_replace($match,'<img src="images/emoticons/'.$emoticon[0].'">',$post);
} 
```

这很好用，但我的问题是`'#(?!<\w)('`，因为我希望仅当前面的字符是“开始”（ ）或“空白”并且后续字符是“结束”（ ）或“空白”`')(?!\w)#'`时才应用表情符号。什么是正确的正则表达式来做到这一点？`^``$`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T17:23:50.687

我认为你想要积极的目光和积极的未来。

例子：

```
(?<=\s|^)(\:\))(?=\s|$) 
```

您的示例已更新：

```
foreach($emoticons as $emoticon){
     $quoted_emoticon = preg_quote($emoticon[1],"#");
     $match = '(?<=\s|^)(' . $quoted_emoticon .')(?=\s|$)';
     $post = preg_replace($match,'<img src="images/emoticons/'.$emoticon[0].'">',$post);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T17:16:14.660

我会去：

```
$e = array( ':)' => '1.gif',
            ':(' => '2.gif',
          );

foreach ($e as $sign => $file) { 
  $sign = preg_replace('/(.)/', "\\$1", $sign); 
  $pattern = "/(?<=\s|^)$sign(?=\s|$)/";
  $post = preg_replace($pattern, " <img src=\"images/emoticons/$file\">", $post);  
} 
```

# javascript - Userscript 在 Opera 中工作，但 Firefox 和 Chrome 给出“变量未定义”错误？

> ID：11179395
> 
> 赞同：1
> 
> 时间：2012-06-24T16:58:57.277
> 
> 标签：javascript, variables, cross-browser, userscripts

我正在创建一个用户脚本，在 Opera 中它就像一个魅力，但在 Fire Fox 和 Chrome 中它给出了以下错误：

> 错误：未定义 PunishCalc

我在脚本顶部有变量（因此用户可以在脚本中配置多个项目），如下所示：

```
var LoginFormat     = true;
var PunishCalc      = true;
var WorldList       = true;
var aWerelden       = Array();
var TitleTickets    = true;
var OverviewLink    = true;
var CookieMarker    = true; 
```

如您所见，`PunishCalc`实际上是在那里定义的。

这是脚本中最重要的部分：它在页面上实现了 jQuery。

```
function addJQuery(callback) 
{
    var script = document.createElement("script");
    script.setAttribute("src", "http://code.jquery.com/jquery-1.7.2.min.js");
    script.addEventListener("load", function() 
    {
        var script = document.createElement("script");
        script.textContent = "(" + callback.toString() + ")();";
        document.body.appendChild(script);
    }, false);
    document.body.appendChild(script);
}

function main()
{
    // All the code will be in here
}

addJQuery(main); 
```

这将我引向使用该变量的一段代码：

```
else if(document.location.href.indexOf("village.php?mode=list") > -1 && PunishCalc === true)
{
    // Code here
} 
```

如您所见，它只是检查变量是否为真。这就是它所要做的。有谁知道为什么它在 Opera 中有效，但在 Chrome 或 Firefox 中无效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T17:10:18.213

整个问题来自 jQuery 的加载方式。

我们在页面中插入一个`<script>`标签并添加一个侦听器以在脚本加载时运行某些内容。要运行的代码是`main.toString()`，它实际上是 的每个语句`main`，而不是实际的函数。

Firefox 和 Chrome 中的用户脚本是沙盒的，页面上下文和脚本上下文完全不同。因此，当`main.toString()`执行语句时，您不再处于用户脚本范围内，而是处于当前页面范围内。这是因为`<script>`在其上下文中执行代码的插入：当前页面。这里没有`PunishCalc`定义，因为它是在用户脚本范围内定义的。

要绕过此限制，请将每个语句放入您的`main`函数中。

# jquery - 使用 jQuery 隐藏会话到期数据

> ID：11179396
> 
> 赞同：0
> 
> 时间：2012-06-24T16:59:13.383
> 
> 标签：jquery, session

我已经建立了一个简单的倒计时来模拟我的应用程序中的会话超时。这个想法是，如果用户长时间离开他们的计算机，它将破坏所有会话和 cookie 作为故障保护，并使用不同的视图更新 DOM，例如一条消息说会话已过期。更新 DOM 而不是进行重定向的原因是用户可以轻松地点击后退按钮并查看上一页及其上的所有数据。但是，当以 DOM 方式执行此操作时，页面源仍会显示敏感数据！

关于更改浏览器视图并防止用户在历史记录或屏幕上看到数据的最佳方式的任何想法。我目前选择了 AJAX 路由，因为这意味着解决除视图源之外的其他问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T23:57:56.413

您可以使用 jquery idle 插件并在达到超时值时发出 ajax 请求来销毁会话。

插件在这里： http: [//paulirish.com/2009/jquery-idletimer-plugin/](http://paulirish.com/2009/jquery-idletimer-plugin/)

# macos - 基本程序集在 Mac (x86_64+Lion) 上不起作用？

> ID：11179400
> 
> 赞同：6
> 
> 时间：2012-06-24T16:59:40.170
> 
> 标签：macos, assembly, x86-64, system-calls

这是代码（exit.s）：

```
.section .data,
.section .text,
.globl _start
_start:
    movl $1, %eax
    movl $32, %ebx
    syscall 
```

当我执行`" as exit.s -o exit.o && ld exit.o -o exit -e _start && ./exit"`

返回是“总线错误：10”，“ `echo $?`”的输出是 138

我还尝试了这个问题中正确答案的示例：[Process command line in Linux 64 bit](https://stackoverflow.com/questions/3730064/process-command-line-in-linux-64-bit)

仍然得到“总线错误”...

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-24T18:11:06.683

首先，您在 Mac OS X 上使用旧的 32 位 Linux 内核调用约定——这绝对行不通。

其次，Mac OS X 中的系统调用以不同的方式构造——它们都有一个前导类标识符*和*一个系统调用号。该类可以是 Mach、BSD 或其他（参见XNU 源代码中的[此处](http://www.opensource.apple.com/source/xnu/xnu-1699.26.8/osfmk/mach/i386/syscall_sw.h)），并且向左移动 24 位。正常的 BSD 系统调用具有类`2`，因此从`0x2000000`. 类`0`中的系统调用*无效*。

根据[SysV AMD64 ABI](http://www.x86-64.org/documentation/abi.pdf)的§A.2.1 以及Mac OS X，系统调用 id（连同其在 XNU 上的类！）转到`%rax`（或`%eax`在 XNU 上未使用高 32 位时）。第一个论点进入`%rdi`。接下来去`%rsi`。等等。`%rcx`被内核使用并且它的值被破坏，这就是为什么在进行系统调用之前所有函数都`libc.dyld`将它保存到`%r10`中（类似于来自的`kernel_trap`宏`syscall_sw.h`）。

第三，调用 Mach-O 二进制文件中的代码部分，`__text`而不是`.text`像在 Linux ELF 中那样，并且也驻留在`__TEXT`段中，统称为`(__TEXT,__text)`（如果选择 Mach-O 作为目标对象类型，则`nasm`自动翻译） - 请参阅[Mac OS X ABI Mach-O 文件格式参考](https://developer.apple.com/library/mac/#documentation/DeveloperTools/Conceptual/MachORuntime/Reference/reference.html). 即使您得到正确的组装说明，将它们放在错误的段/节中也会导致总线错误。您可以使用该指令（请参阅[此处](https://developer.apple.com/library/mac/#documentation/developertools/Reference/Assembler/040-Assembler_Directives/asm_directives.html)以了解指令语法），也可以使用（更简单的）指令，或者您可以完全放弃它，因为假设没有提供任何选项（请参阅手册页）。`.text``.section __TEXT,__text``.text``-n``as``as`

`ld`第四，调用Mach-O 的默认入口点`start`（尽管您已经知道，它可以通过`-e`链接器选项进行更改）。

鉴于以上所有内容，您应该将汇编源代码修改为如下所示：

```
; You could also add one of the following directives for completeness
; .text
; or
; .section __TEXT,__text

.globl start
start:
    movl $0x2000001, %eax
    movl $32, %edi
    syscall 
```

在这里，按预期工作：

```
$ as -o exit.o exit.s; ld -o exit exit.o
$ ./exit; echo $?
32 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-05-24T18:32:36.543

添加更多关于幻数的解释。通过将 Linux 系统调用号应用于我的 NASM，我犯了同样的错误。

[来自osfmk/mach/i386/syscall_sw.h](https://opensource.apple.com/source/xnu/xnu-792.13.8/osfmk/mach/i386/syscall_sw.h)中的 xnu 内核源代码（搜索`SYSCALL_CLASS_SHIFT`）。

```
/*
 * Syscall classes for 64-bit system call entry.
 * For 64-bit users, the 32-bit syscall number is partitioned
 * with the high-order bits representing the class and low-order
 * bits being the syscall number within that class.
 * The high-order 32-bits of the 64-bit syscall number are unused.
 * All system classes enter the kernel via the syscall instruction. 
```

系统调用是分区的：

```
#define SYSCALL_CLASS_NONE  0   /* Invalid */
#define SYSCALL_CLASS_MACH  1   /* Mach */  
#define SYSCALL_CLASS_UNIX  2   /* Unix/BSD */
#define SYSCALL_CLASS_MDEP  3   /* Machine-dependent */
#define SYSCALL_CLASS_DIAG  4   /* Diagnostics */ 
```

正如我们所见，BSD 系统调用的标记是 2。所以幻数*0x2000000*构造为：

```
// 2 << 24
#define SYSCALL_CONSTRUCT_UNIX(syscall_number) \
            ((SYSCALL_CLASS_UNIX << SYSCALL_CLASS_SHIFT) | \
             (SYSCALL_NUMBER_MASK & (syscall_number))) 
```

为什么它最终使用BSD标签，可能Apple从`mach`内核切换到`BSD`内核。历史原因。

受[原始答案](https://stackoverflow.com/a/53905561/5335565)的启发。

# java - 如何将 1 和 0 转换为字符串？

> ID：11179402
> 
> 赞同：0
> 
> 时间：2012-06-24T16:59:57.830
> 
> 标签：java, binary, bytearray, byte

请看下面的机器码

‎0111001101110100011100100110010101110011011100110110010101100100

这意味着什么。我需要将其转换为字符串。当我使用 Integer.parseInt() 以上面作为字符串和 2 作为基数（将其转换为字节）时，它给出了数字格式异常。

而且我相信我必须将其分成 8 件套（如 ‎01110011、10111010 等）。我对么？

请帮助我将其正确转换为字符串。

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-24T17:10:16.397

```
final String s = 
  "0111001101110100011100100110010101110011011100110110010101100100";
final StringBuilder b = new StringBuilder();
for (int i = 0; i < s.length(); i+=8) 
  b.append((char)Integer.parseInt(s.substring(i,i+8),2));
System.out.println(b); 
```

打印“强调”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T17:37:22.100

读取大整数的一种更短的方法是使用 BigInteger

```
final String s = "0111001101110100011100100110010101110011011100110110010101100100";
System.out.println(new String(new BigInteger('0'+s, 2).toByteArray(), 0)); 
```

印刷

```
stressed 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T17:03:15.790

这取决于字符串的编码。

ASCII 编码的字符串每个字符使用 1 个字节，而 unicode 编码的字符串每个字符使用 2 个字节。还有许多其他类型的编码。每种编码的二进制布局都不同。

因此，您需要找到用于将此字符串写入二进制格式的编码

# mysql - jquery从mysql自动加载地图

> ID：11179403
> 
> 赞同：-1
> 
> 时间：2012-06-24T16:59:59.600
> 
> 标签：mysql, map

我有可以移动的图像地图，但是这张地图会很大，所以我想像谷歌地图或浏览器游戏中的地图一样动态加载它。但我不知道它是如何工作的，你能帮我吗？我只需要文字解决方案而不是代码

谢谢

编辑：我有一个想法，也许尝试制作宽度和高度约为 20000 像素的 div，并在移动地图时添加新的 div，但如果这是个好主意，我该如何控制加载新的 div？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T17:54:25.997

将您的图像分成瓷砖。然后在它们进入可视区域时将它们添加到您的滚动区域，并在它们离开可视区域时将它们移除。这个滚动区域可以像一个具有一定大小的 div 一样简单`overflow:scroll;`，而子 div 则大得多。

# jquery - jQuery获取选择onChange的值

> ID：11179406
> 
> 赞同：920
> 
> 时间：2012-06-24T17:00:50.037
> 
> 标签：jquery, select

我的印象是我可以通过这样做`$(this).val();`并将`onchange`参数应用于选择字段来获取选择输入的值。

它似乎只有在我引用 ID 时才有效。

我该如何使用它。

* * *

## 回答 #1

> 赞同：1778
> 
> 时间：2012-06-24T17:02:49.450

尝试这个-

```
$('select').on('change', function() {
  alert( this.value );
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

<select>
    <option value="1">One</option>
    <option value="2">Two</option>
</select>
```

您还可以参考 onchange 事件-

```
function getval(sel)
{
    alert(sel.value);
}
```

```
<select onchange="getval(this);">
    <option value="1">One</option>
    <option value="2">Two</option>
</select>
```

* * *

## 回答 #2

> 赞同：125
> 
> 时间：2012-06-24T17:03:51.127

> I was under the impression that I could get the value of a select input by doing this $(this).val();

This works if you subscribe unobtrusively (which is the recommended approach):

```
$('#id_of_field').change(function() {
    // $(this).val() will work here
}); 
```

if you use `onselect` and mix markup with script you need to pass a reference to the current element:

```
onselect="foo(this);" 
```

and then:

```
function foo(element) {
    // $(element).val() will give you what you are looking for
} 
```

* * *

## 回答 #3

> 赞同：122
> 
> 时间：2015-04-09T10:50:51.800

这对我有帮助。

对于选择：

```
$('select_tags').on('change', function() {
    alert( $(this).find(":selected").val() );
}); 
```

对于单选/复选框：

```
$('radio_tags').on('change', function() {
    alert( $(this).find(":checked").val() );
}); 
```

* * *

## 回答 #4

> 赞同：22
> 
> 时间：2015-03-17T15:00:41.900

尝试事件委托方法，这几乎适用于所有情况。

```
$(document.body).on('change',"#selectID",function (e) {
   //doStuff
   var optVal= $("#selectID option:selected").val();
}); 
```

* * *

## 回答 #5

> 赞同：19
> 
> 时间：2016-08-16T13:27:29.513

```
$('#select_id').on('change', function()
{
    alert(this.value); //or alert($(this).val());
});

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

<select id="select_id">
    <option value="1">Option 1</option>
    <option value="2">Option 2</option>
    <option value="3">Option 3</option>
    <option value="4">Option 4</option>
</select> 
```

* * *

## 回答 #6

> 赞同：19
> 
> 时间：2018-08-16T13:01:47.557

箭头函数具有与函数不同的范围， `this.value`将为箭头函数提供 undefined。修复使用

```
$('select').on('change',(event) => {
     alert( event.target.value );
 }); 
```

* * *

## 回答 #7

> 赞同：14
> 
> 时间：2016-05-23T03:51:53.957

你可以试试这个（使用[**jQuery**](https://jquery.com/)） -

```
$('select').on('change', function()
{
    alert( this.value );
});
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

<select>
    <option value="1">Option 1</option>
    <option value="2">Option 2</option>
    <option value="3">Option 3</option>
    <option value="4">Option 4</option>
</select>
```

或者你可以像这样使用简单的 Javascript -

```
function getNewVal(item)
{
    alert(item.value);
}
```

```
<select onchange="getNewVal(this);">
    <option value="1">Option 1</option>
    <option value="2">Option 2</option>
    <option value="3">Option 3</option>
    <option value="4">Option 4</option>
</select>
```

* * *

## 回答 #8

> 赞同：10
> 
> 时间：2019-04-22T17:10:38.537

jQuery使用更改事件获取选择html元素的值

[用于演示和更多示例](https://www.tutsmake.com/jquery-val-method-set-get-html-elements-val/)

```
$(document).ready(function () {   
    $('body').on('change','#select_box', function() {
         $('#show_only').val(this.value);
    });
}); 
```

```
<!DOCTYPE html>  
<html>  
<title>jQuery Select OnChnage Method</title>
<head> 
 <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>    
</head>  
<body>  
<select id="select_box">
 <option value="">Select One</option>
    <option value="One">One</option>
    <option value="Two">Two</option>
    <option value="Three">Three</option>
    <option value="Four">Four</option>
    <option value="Five">Five</option>
</select>
<br><br>  
<input type="text" id="show_only" disabled="">
</body>  
</html> 
```

* * *

## 回答 #9

> 赞同：9
> 
> 时间：2016-01-25T22:11:25.750

这对我有用。没有运气就尝试了其他所有方法：

```
<html>

  <head>
    <title>Example: Change event on a select</title>

    <script type="text/javascript">

      function changeEventHandler(event) {
        alert('You like ' + event.target.value + ' ice cream.');
      }

    </script>

  </head>

  <body>
    <label>Choose an ice cream flavor: </label>
    <select size="1" onchange="changeEventHandler(event);">
      <option>chocolate</option>
      <option>strawberry</option>
      <option>vanilla</option>
    </select>
  </body>

</html> 
```

取自[Mozilla](https://developer.mozilla.org/en-US/docs/Web/Events/change)

* * *

## 回答 #10

> 赞同：8
> 
> 时间：2015-01-15T15:06:33.793

寻找 jQuery[网站](http://api.jquery.com/change/)

HTML：

```
<form>
  <input class="target" type="text" value="Field 1">
  <select class="target">
    <option value="option1" selected="selected">Option 1</option>
    <option value="option2">Option 2</option>
  </select>
</form>
<div id="other">
  Trigger the handler
</div> 
```

JAVASCRIPT：

```
$( ".target" ).change(function() {
  alert( "Handler for .change() called." );
}); 
```

jQuery的例子：

为所有文本输入元素添加有效性测试：

```
$( "input[type='text']" ).change(function() {
  // Check input( $( this ).val() ) for validity here
}); 
```

* * *

## 回答 #11

> 赞同：8
> 
> 时间：2017-02-14T18:04:06.430

对于所有选择，调用此函数。

```
$('select').on('change', function()
{
    alert( this.value );
}); 
```

只有一个选择：

```
$('#select_id') 
```

* * *

## 回答 #12

> 赞同：8
> 
> 时间：2021-06-05T02:59:35.050

```
$('#select-id').change(function() {
    console.log($(this).val());
}); 
```

* * *

## 回答 #13

> 赞同：4
> 
> 时间：2020-01-20T08:54:41.433

让我分享一个我用 BS4、thymeleaf 和 Spring boot 开发的例子。

我正在使用两个 SELECT，其中第二个（“子主题”）由基于第一个（“主题”）选择的 AJAX 调用填充。

首先，百里香片段：

```
 <div class="form-group">
     <label th:for="topicId" th:text="#{label.topic}">Topic</label>
     <select class="custom-select"
             th:id="topicId" th:name="topicId"
             th:field="*{topicId}"
             th:errorclass="is-invalid" required>
         <option value="" selected
                 th:text="#{option.select}">Select
         </option>
         <optgroup th:each="topicGroup : ${topicGroups}"
                   th:label="${topicGroup}">
             <option th:each="topicItem : ${topics}"
                     th:if="${topicGroup == topicItem.grp} "
                     th:value="${{topicItem.baseIdentity.id}}"
                     th:text="${topicItem.name}"
                     th:selected="${{topicItem.baseIdentity.id==topicId}}">
             </option>
         </optgroup>
         <option th:each="topicIter : ${topics}"
                 th:if="${topicIter.grp == ''} "
                 th:value="${{topicIter.baseIdentity.id}}"
                 th:text="${topicIter.name}"
                 th:selected="${{topicIter.baseIdentity?.id==topicId}}">
         </option>
     </select>
     <small id="topicHelp" class="form-text text-muted"
            th:text="#{label.topic.tt}">select</small>
</div><!-- .form-group -->

<div class="form-group">
    <label for="subtopicsId" th:text="#{label.subtopicsId}">subtopics</label>
    <select class="custom-select"
            id="subtopicsId" name="subtopicsId"
            th:field="*{subtopicsId}"
            th:errorclass="is-invalid" multiple="multiple">
        <option value="" disabled
                th:text="#{option.multiple.optional}">Select
        </option>
        <option th:each="subtopicsIter : ${subtopicsList}"
                th:value="${{subtopicsIter.baseIdentity.id}}"
                th:text="${subtopicsIter.name}">
        </option>
    </select>
    <small id="subtopicsHelp" class="form-text text-muted"
           th:unless="${#fields.hasErrors('subtopicsId')}"
           th:text="#{label.subtopics.tt}">select</small>
    <small id="subtopicsIdError" class="invalid-feedback"
           th:if="${#fields.hasErrors('subtopicsId')}"
           th:errors="*{subtopicsId}">Errors</small>
</div><!-- .form-group --> 
```

我正在遍历存储在模型上下文中的主题列表，显示所有组及其主题，然后显示所有没有组的主题。BaseIdentity 是一个@Embedded 复合键顺便说一句。

现在，这是处理更改的 jQuery：

```
$('#topicId').change(function () {
    selectedOption = $(this).val();
    if (selectedOption === "") {
        $('#subtopicsId').prop('disabled', 'disabled').val('');
        $("#subtopicsId option").slice(1).remove(); // keep first
    } else {
        $('#subtopicsId').prop('disabled', false)
        var orig = $(location).attr('origin');
        var url = orig + "/getsubtopics/" + selectedOption;
        $.ajax({
            url: url,
           success: function (response) {
                  var len = response.length;
                    $("#subtopicsId option[value!='']").remove(); // keep first 
                    for (var i = 0; i < len; i++) {
                        var id = response[i]['baseIdentity']['id'];
                        var name = response[i]['name'];
                        $("#subtopicsId").append("<option value='" + id + "'>" + name + "</option>");
                    }
                },
                error: function (e) {
                    console.log("ERROR : ", e);
                }
        });
    }
}).change(); // and call it once defined 
```

change() 的初始调用确保它将在页面重新加载时执行，或者如果某个值已被后端中的某些初始化预选。

顺便说一句：我正在使用“手动”表单验证（请参阅“is-valid”/“is-invalid”），因为我（和用户）不喜欢 BS4 将非必需的空字段标记为绿色。但这超出了这个 Q 的范围，如果您有兴趣，我也可以发布它。

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2018-08-04T07:13:44.430

```
jQuery(document).ready(function(){

    jQuery("#id").change(function() {
      var value = jQuery(this).children(":selected").attr("value");
     alert(value);

    });
}) 
```

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2018-04-19T15:04:02.557

请注意，如果这些不起作用，可能是因为尚未加载 DOM 并且尚未找到您的元素。

要修复，请将脚本放在正文的末尾或使用准备好的文档

```
$.ready(function() {
    $("select").on('change', function(ret) {  
         console.log(ret.target.value)
    }
}) 
```

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2020-08-20T07:26:00.443

仅与 JS

```
 let select=document.querySelectorAll('select') 
  select.forEach(function(el) {
    el.onchange =  function(){
     alert(this.value);

  }}
  ) 
```

* * *

## 回答 #17

> 赞同：2
> 
> 时间：2018-12-17T13:09:38.837

我想补充一下，谁需要完整的自定义标题功能

```
 function addSearchControls(json) {
        $("#tblCalls thead").append($("#tblCalls thead tr:first").clone());
        $("#tblCalls thead tr:eq(1) th").each(function (index) {
            // For text inputs
            if (index != 1 && index != 2) {
                $(this).replaceWith('<th><input type="text" placeholder=" ' + $(this).html() + ' ara"></input></th>');
                var searchControl = $("#tblCalls thead tr:eq(1) th:eq(" + index + ") input");
                searchControl.on("keyup", function () {
                    table.column(index).search(searchControl.val()).draw();
                })
            }
            // For DatePicker inputs
            else if (index == 1) {
                $(this).replaceWith('<th><input type="text" id="datepicker" placeholder="' + $(this).html() + ' ara" class="tblCalls-search-date datepicker" /></th>');

                $('.tblCalls-search-date').on('keyup click change', function () {
                    var i = $(this).attr('id');  // getting column index
                    var v = $(this).val();  // getting search input value
                    table.columns(index).search(v).draw();
                });

                $(".datepicker").datepicker({
                    dateFormat: "dd-mm-yy",
                    altFieldTimeOnly: false,
                    altFormat: "yy-mm-dd",
                    altTimeFormat: "h:m",
                    altField: "#tarih-db",
                    monthNames: ["Ocak", "Şubat", "Mart", "Nisan", "Mayıs", "Haziran", "Temmuz", "Ağustos", "Eylül", "Ekim", "Kasım", "Aralık"],
                    dayNamesMin: ["Pa", "Pt", "Sl", "Ça", "Pe", "Cu", "Ct"],
                    firstDay: 1,
                    dateFormat: "yy-mm-dd",
                    showOn: "button",
                    showAnim: 'slideDown',
                    showButtonPanel: true,
                    autoSize: true,
                    buttonImage: "http://jqueryui.com/resources/demos/datepicker/images/calendar.gif",
                    buttonImageOnly: false,
                    buttonText: "Tarih Seçiniz",
                    closeText: "Temizle"
                });
                $(document).on("click", ".ui-datepicker-close", function () {
                    $('.datepicker').val("");
                    table.columns(5).search("").draw();
                });
            }
            // For DropDown inputs
            else if (index == 2) {
                $(this).replaceWith('<th><select id="filter_comparator" class="styled-select yellow rounded"><option value="select">Seç</option><option value="eq">=</option><option value="gt">&gt;=</option><option value="lt">&lt;=</option><option value="ne">!=</option></select><input type="text" id="filter_value"></th>');

                var selectedOperator;
                $('#filter_comparator').on('change', function () {
                    var i = $(this).attr('id');  // getting column index
                    var v = $(this).val();  // getting search input value
                    selectedOperator = v;
                    if(v=="select")
                        table.columns(index).search('select|0').draw();
                    $('#filter_value').val("");
                });

                $('#filter_value').on('keyup click change', function () {
                    var keycode = (event.keyCode ? event.keyCode : event.which);
                    if (keycode == '13') {
                        var i = $(this).attr('id');  // getting column index
                        var v = $(this).val();  // getting search input value
                        table.columns(index).search(selectedOperator + '|' + v).draw();
                    }
                });
            }
        })

    } 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2021-11-05T12:42:59.340

我有一个例子可以帮助你提出新的想法。我希望这对任何人都有帮助。

```
$('#editpricelist_box').change(function ($e){
    $('input[name="edit_unit_price"]').val(parseFloat(this.val()).toFixed(2));
    console.log(this.val());
}); 
```

# android - ActionBarCompat：设置导航模式

> ID：11179412
> 
> 赞同：0
> 
> 时间：2012-06-24T17:01:01.927
> 
> 标签：android, uinavigationbar, android-actionbar, android-actionbar-compat

我在我的项目中使用 ActionBarCompat。我现在遇到的问题是我需要一个微调器才能在操作栏中显示。可以使用标准的 ActionBar，`.setNavigationMode(ActionBar.NAVIGATION_MODE_LIST)`但这在操作栏兼容代码中不可用。

有没有解决的办法？还有哪些其他选择（除了重新设计布局。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T16:28:16.887

ActionBarCompat 提供的代码中没有办法做到这一点。

它以最基本的形式提供了一个 ActionBar，供所有平台使用。

更好的选择是使用 ActionBarSherlock。设置非常相似，并且开箱即用提供更多功能。 [http://actionbarsherlock.com/](http://actionbarsherlock.com/)

# jquery - 页面完成加载 AJAX 内容后运行 jQuery 代码

> ID：11179414
> 
> 赞同：1
> 
> 时间：2012-06-24T17:01:33.653
> 
> 标签：jquery, ajax, load, ready

我有一个通过 AJAX 加载内容的页面。这些内容中有一些图像。我需要根据图像大小（不同）对页面布局进行一些格式化，但为了获得大小，我需要在运行代码之前先完成加载图像。如果它在普通页面中（内容加载正常，没有 AJAX），我所要做的就是使用该`$(window).load()`功能，但使用 AJAX 时由于某些原因它不会触发。我需要一个解决方法：在通过 AJAX 加载的图像完成加载后执行一些代码的方法。

基本上，这就是我想要做的

```
ajaxRequest.onreadystatechange = function(){
        if(ajaxRequest.readyState == 4){
document.getElementById("results").innerHTML=ajaxRequest.responseText;
//the responseText includes images among other information to be loaded 
$(window).load(function() {
...some code
});}} 
```

但是`$(window).load()`永远不会触发，一旦所有图像完成加载，我就需要运行代码，因此将加载事件绑定到每个图像并不是一个真正的选择。

我还有另一个与第一个问题相关且相似的问题：在`$(document).ready`通过 AJAX 加载内容后，jQuery 似乎也没有触发。我现在不需要它，但我将来肯定会这样做，所以还有什么解决方法吗？

我非常感谢您的帮助，非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T17:07:15.243

$(window).load 仅适用于页面初始加载。

我看到的唯一干净的解决方案是计算图像（希望它们是唯一的问题）并等待它们加载：

```
$('#results').load('youurl', function() {
    var $images = $('#contenu img');
    var count = $images.length;
    console.log('initial images count : ', count);
    var decrement = function() {
        if (--count==0) {
            console.log('All images loaded');
            // do something                 
        }
    };
    $images.each(function(){
       if (this.complete) {
           decrement();
       } else {
           this.onload = function(){
                decrement();
           };
       }
    });
}); 
```

现在可以在[此站点](http://dystroy.org/re7210/index.html?file=shooter.html)上进行测试：单击配方的链接并查看控制台。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-24T17:09:40.913

我相信你想要的是[imagesLoaded](https://github.com/desandro/imagesloaded)插件。通过 AJAX 加载标记后，选择此 div 内的图像并调用`.imagesLoaded()`它们：

```
$('.article img').imagesLoaded( myCallbackFunction ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T17:09:11.717

此外，您使用 XMLHttpRequest ......使用 JQuery 更容易。您可以摆脱所有发布的代码，只需执行以下操作：

```
$("#results").load("ajaxpage.php", function() { ... some code... }); 
```

这就是你所需要的。如果您需要在加载窗口时触发一些代码，请使用您的 $(window).load()。如果需要在ajax请求之后触发代码，只需将其放在上面的回调函数（）中即可

# cuda - CUDA内存库冲突？

> ID：11179426
> 
> 赞同：1
> 
> 时间：2012-06-24T17:03:16.127
> 
> 标签：cuda, gpu, shared-memory

我编写了一个简单的代码，它只启动一个块和块内的一个线程。内核创建一个 48 KB的**共享**内存阵列，填充流式多处理器的整个共享内存。代码设置和取消设置共享内存中的各个位。我注意到前 32 位代码运行良好。然而，当我开始翻转剩余的位时，什么也没有发生，位保持不变。

有什么想法吗？我是 CUDA 编程的新手。有没有理由相信这与内存库冲突有关？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T02:29:41.260

要回答您的问题，不，这与共享内存库冲突无关。银行冲突只影响性能，不影响正确性。因此，无论是否存在银行冲突，您都会得到相同的结果。

您应该在主机代码中添加错误检查并检查所有 cuda API 函数返回的结果。我怀疑您在某处遇到错误。一般来说，如果您想要更准确的答案，您应该发布带​​有问题的代码。

# caching - Azure CreateRegion“缓存不支持此操作。”

> ID：11179429
> 
> 赞同：2
> 
> 时间：2012-06-24T17:03:25.160
> 
> 标签：caching, azure, azure-caching

我正在尝试使用 Azure Datacache 对象添加一个区域，但我收到了这样的错误“**缓存不支持此操作**”。

```
Dim dataCache As DataCache = dataCacheFactory.GetDefaultCache()
Dim tagList As New List(Of DataCacheTag)() From {New DataCacheTag("tagList")}

dataCache.CreateRegion("region-1")

dataCache.Put("key-name", "key-value", New Timespan(0, 10, 0), tagList, "region-1") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T17:26:28.617

如果您点击下面的链接，您将看到 Windows Azure 缓存 API 不支持 dataCache.CreateRegion()：

[Windows Azure 缓存中的缓存 API 支持](http://msdn.microsoft.com/en-us/library/windowsazure/gg278350.aspx)

但它确实在[Windows Azure 缓存（预览版）](http://msdn.microsoft.com/en-us/library/windowsazure/hh914161.aspx)中受支持，因此如果您想分别创建区域和处理缓存，您可以在项目中使用专用缓存或共存缓存。

如果您想了解 Windows Azure 共享缓存和 Windows Azure 缓存（预览版）之间的区别，请查看我的博客：[Windows Azure 缓存（预览版）和 Windows Azure 共享缓存之间的区别](http://blogs.msdn.com/b/avkashchauhan/archive/2012/06/18/difference-between-windows-azure-cache-preview-and-windows-azure-share-cache.aspx)

# java - 恰好 2 小时后，linux 网络设置 POST 失败

> ID：11179439
> 
> 赞同：1
> 
> 时间：2012-06-24T17:04:32.483
> 
> 标签：java, httpurlconnection, recv

对于很长的 POST 请求（超过 2 小时），我的以下测试代码运行良好：

```
 URL postURL = new URL(url);            
        con = (HttpURLConnection) postURL.openConnection();            
        con.setUseCaches(false);
        con.setDoOutput(true);
        con.setDoInput(true);
        con.setRequestMethod("POST");            
        OutputStream out = con.getOutputStream();
        OutputStreamWriter wout = new OutputStreamWriter(out, "UTF-8");
        wout.write(xmlRequest);
        wout.flush();
        out.close();
        con.connect();            
        int httpResponseCode = HttpURLConnection.HTTP_SERVER_ERROR;
        try {
            httpResponseCode = con.getResponseCode();
        } catch (IOException e) {
            log(e.toString() + " Error retrieving the status code");
        }
        log("Failure status code " + httpResponseCode + " received: "); 
```

我从一个主机到另一个主机运行这篇文章，它在所有环境中运行良好，除了一个确切的 linux redhat 主机 - 当我从这个主机运行这段代码时，我得到了异常：

java.net.SocketException: recv() failed, errno = 104 Connection reset by peer 检索状态码错误
收到失败状态码 500。

目标服务器主机在所有测试中都是同一主机。所以区别仅在于客户端调用者主机。

所以我试图了解这台 linux 机器上的确切 tcp 设置是什么导致接收在恰好 2 小时后失败。

我同意在这里为这种“不正确”使用发送帖子并等待超过 2 小时的回复而受到责备；）但问题是导致这种情况的原因

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T19:37:40.620

google 7200 秒 tcp redhat 等等

```
 tcp_keepalive_time (integer; default: 7200; since Linux 2.2)
          The number of seconds a connection needs to be idle  before  TCP
          begins sending out keep-alive probes.  Keep-alives are only sent
          when the SO_KEEPALIVE socket option  is  enabled.   The  default
          value  is  7200 seconds (2 hours).  An idle connection is termi-
          nated after approximately an additional 11 minutes (9 probes  an
          interval of 75 seconds apart) when keep-alive is enabled.

          Note that underlying connection tracking mechanisms and applica-
          tion timeouts may be much shorter. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T16:43:10.160

不同之处在于，一台客户端主机位于不同的网段，路由器在超时后终止空闲会话。

# android - View layout after setvisibility

> ID：11179443
> 
> 赞同：1
> 
> 时间：2012-06-24T17:05:09.427
> 
> 标签：android, android-relativelayout

I've got problem with setting visibility to relative layout. I have part of big layout in relativelayout and below that next TextView. But in my code, when `myRelativeLayout.setVisibility(View.GONE);` is called, TextView which is below that did not appear. I tried several ways to rearange layout, but i need that textview under it. Thanks

My XML:

```
<merge xmlns:android="http://schemas.android.com/apk/res/android" >
    <ScrollView
        android:id="@+id/scrollView_liab_ra_flipper_04"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <RelativeLayout
            android:id="@+id/linearLayout_liab_ra_flipper_04"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="vertical" >

            <TextView
                android:id="@+id/someTextView"
                android:text="Something" />

            <!-- This relative layout should be removable -->
            <RelativeLayout
                android:id="@+id/vg_liab_ra_04_flipper_car_container_visible"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@+id/someTextView" >

                <TextView
                    android:id="@+id/tv_1"
                    style="@style/WhiteFormText"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginLeft="15dp"
                    android:layout_marginTop="2dp"
                    android:text="@string/licence_plate_counter" >
                </TextView>

                <EditText
                    android:id="@+id/et_1"
                    style="@style/WhiteFormField"
                    android:layout_below="@+id/tv_1"
                    android:hint="@string/licence_plate_hint" >
                </EditText>
            </RelativeLayout>

            <!-- This textview is not visible if relative layout is gone -->
            <TextView
                android:id="@+id/tv_liab_ra_04_flipper_mandat"
                style="@style/WhiteFormTextHint"
                android:layout_below="@+id/vg_liab_ra_04_flipper_car_container_visible"
                android:layout_marginBottom="15dp"
                android:text="@string/mandatory_field" >
            </TextView>
        </RelativeLayout>

    </ScrollView>
</merge> 
```

Java Code:

```
 private void hideCar() {      

   if (!accident.getParticipant(0)) {
        rlCarContainer.setVisibility(View.GONE);

    } else {
        rlCarContainer.setVisibility(View.VISIBLE);

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T21:10:26.407

做你想做的最简单的方法是使用`LinearLayout`而不是你的根`RelativeLayout`..在你隐藏你想要的方式后，子视图将重新对齐`RelativeLayout`..如果你不想要那样，你可以`android:layout_alignWithParentIfMissing`在[此处](http://developer.android.com/reference/android/widget/RelativeLayout.LayoutParams.html#attr_android%3alayout_alignWithParentIfMissing)使用文档。这不会完全按照您的意愿工作，但它可能会帮助您解决问题:)。`TextView`

# http - How do I abort or stop an http request in NodeJs

> ID：11179445
> 
> 赞同：2
> 
> 时间：2012-06-24T17:05:20.360
> 
> 标签：http, node.js, request-cancelling

While NodeJs architecture does very well to process server requests in a non-blocking way, it is sometimes required to stop/abort a request being processed at the server side.

How can I get my NodeJs server to abort a request even when it's not blocking the server?

# android - edittext 中的单引号 (') 使我的程序崩溃

> ID：11179450
> 
> 赞同：1
> 
> 时间：2012-06-24T17:06:02.087
> 
> 标签：android, android-edittext, quote

如果我将某些内容写入`edittext`包含单引号 ( `'`) 的内容，我的程序就会崩溃。有了这个`edittext`，我可以在我的数据库中搜索东西，其中一些包含这个单一的 qoute（或*撇号*，不管它有什么名字，但重点是它是关于单一的 qoute）。我认为它有一些特殊的功能，这就是它崩溃的原因。是否有任何选项可以忽略其功能或以某种方式解决此问题？

例如，我的数据库中的一个项目：

```
cv.put(KEY_NAME, "Jonh's idea");
cv.put(KEY_HOTNESS, "amazing");
cv.put(KEY_MONEY, "500");
ourDatabase.insert(DATABASE_TABLE, null, cv); 
```

然后当我用这种方法搜索它时：

```
return ourDatabase.query(DATABASE_TABLE, new String[] {"_id", "idea_name",},  
"idea_name like " + "'%" + qq + "%'", null, null, null, null); 
```

其中 qq 由用户给出（例如 Jonh 的想法），它崩溃了。是的，我收到语法错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T17:17:15.853

听起来像是`'`导致某种 SQL 注入...这`'`导致您的 SQL 语句出现语法错误。有几件事您可能会考虑仔细检查：

1.  `rawQuery()`不会保护您免受 SQL 注入，因此请避免使用它（而是使用`query`、`insert`、`update`和`delete`方法）。

2.  更喜欢格式化你的`selection`和`selectionArgs`如下（因为它会保护你免受 SQL 注入）：

    ```
    selection = "col_1 = ?";
    selectionArgs = new String[] { "value_1" }; 
    ```

    （请注意，`String[]`替换字符串中的`?`s 中的值）。`selection`

3.  [`inputType`](http://developer.android.com/reference/android/widget/TextView.html#attr_android:inputType)在 your上设置一个`EditText`以防止用户首先输入这些字符（即，如果您只想让用户输入数字，则设置`android:inputType="number"`）。

4.  总体而言，只要您正确使用了`SQLiteDatabase`类中的 Android 方法，就不会遇到任何 SQL 注入问题（Android 可以很好地为您清理这些问题）。也就是说，如果您不选择使用这些特殊用途的方法，那么您应该在运行时检查 String 的内容，并通过转义它们来防止诸如`'`、`;`、等字符。`"`

您可以参考这篇文章了解更多信息：

[带有 LIKE 语句的 SQL 中的 Android 单引号](https://stackoverflow.com/questions/6146365/android-single-quote-in-sql-with-a-like-statement)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T17:25:40.297

您需要使用`selectionArgs`参数来转义字符串（以便其中的单引号不会破坏 SQL）。尝试这样的事情：

```
return ourDatabase.query(DATABASE_TABLE, new String[] {"_id", "idea_name",}, "idea_name like ?", new String[] { "%" + qq + "%" }, null, null, null); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T17:15:35.147

看起来像 [SQL-injection](https://en.wikipedia.org/wiki/SQL_injection)。你必须逃避你的输入。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-16T11:05:19.640

再来一局。您可以将 ' 替换为 `。您不必重新检查您的代码。只需修改以下内容：

```
String input = edittext.getText().toString();

if(input.contains("'"))
{
   input = input.replace("'", "`");
}
//now proceed with the database operation ... 
```

这将使用户能够将诸如***RD 的 jugaad 之***类的文本输入到RD 的***jugaad***

# css - SASS/Compass inconsistent in writing RGBA values in output stylesheet

> ID：11179454
> 
> 赞同：2
> 
> 时间：2012-06-24T17:06:31.853
> 
> 标签：css, sass, compass-sass, scout-sass

I'm on Windows 7 making use of the Scout app for convenient SASS/Compass compilation without the hassle of configuring it all:

[http://mhs.github.com/scout-app/](http://mhs.github.com/scout-app/)

I've set it up to monitor my scss folder and to output main.css to my css folder, and it works. However I am having a very frustrating time at times on an issue that seems related to the order in which things are saved.

For example, I have a rule like this:

```
@include background-with-css2-fallback(image-url("bg_skin.png"),image-url("bg_noise.png"),linear-gradient(top, rgba(0,0,0,0), rgba(0,0,0,.4)),$color-header-background url(../img/bg_skin.png)); 
```

This creates a background consisting of two layered PNGs with a semi-trasparent gradient applied to it. On older browsers, a base color and single PNG is applied. In normal circumstances, this would create the follow CSS. Note that the above generates dozens of lines, I'm only showing the one relevant for now:

```
background: url('img/bg_skin.png?1339414190'), url('img/bg_noise.png?1339150807'), -moz-linear-gradient(top, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.4)), #b9d233 url(../img/bg_skin.png); 
```

All is well. In this same file, which is my main scss file, at the end I am importing a partial like this:

```
@media screen and (max-width: 940px) {  @import 'tablet'; } 
```

When I make a change to that partial file (_tablet.scss), Scout will detect it and recompile everything. However, in doing so it suddenly results in a different rule concerning the background rule I mentioned earlier:

```
background: url('img/bg_skin.png?1339414190'), url('img/bg_noise.png?1339150807'), -moz-linear-gradient(top, rgba 0, 0, 0, 0), rgba(0, 0, 0, 0)), #b9d233 url(../img/bg_skin.png); 
```

It is now creating a gradient from 0 to 0, rather than from 0 to 0.4! Out of the blue.

I have found that editing my main.scss file again and saving it, once again leads to the correct gradient rule, yet then it messes up similar rules in the parial. Resaving the partial file will fix the partial CSS but then it messes up the main rules again. It's a total deadlock situation.

What I want is for both my main SCSS and partial SCSS files to be compiled correctly. I can live with a situation in which I need to save these files in a certain order, but right now every order leads to the wrong result.

Is this a common problem or is it a setup problem? Any suggestions?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T11:41:59.337

您可以尝试使用除法而不是使用十进制数。例如：0.5 > 5/10。

为我工作，我在 MACOSX LION / Textmate / Scout / Firefox 15

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-24T18:28:23.983

经过一番挖掘，我找到了问题的原因：

[https://github.com/mhs/scout-app/issues/44](https://github.com/mhs/scout-app/issues/44)

问题确实在于 rgba 值未正确编译。具体来说，它只适用于最后保存的文件，这与我的问题一致。不幸的是，对于我的设置（Windows 上的 Scout），还没有解决方案，但显然开发团队正在研究它。

# ruby - 雾和动力破坏记录

> ID：11179457
> 
> 赞同：0
> 
> 时间：2012-06-24T17:06:36.140
> 
> 标签：ruby, dns, fog

我目前正在使用 Fog 来管理 Dyn DNS 提供商。根据文档，`destroy`DNS 记录对象上有一个方法。但是，当我`destroy`在记录上调用时，什么也没有发生……该方法只返回 true，但它永远不会被删除。这是我正在使用的代码：

```
@dynect = Fog::DNS.new(
  :provider => "dynect",
  :dynect_customer => "CUSTOMER",
  :dynect_username => "USERNAME",
  :dynect_password => 'PASSWORD'
)

@zone = @dynect.zones.get('zone.example.com')
@record = @zone.records.find{|r| r.name == 'master.zone.example.com' && r.type == 'CNAME'}
@record.destroy
@zone.save 
```

这将返回 true，但什么也没有发生 - Dyn 上仍然存在 DNS 记录。

如何使用 Fog 和 Dyn 删除记录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T19:11:50.793

结果你需要发布（而不是保存）区域......这并不明显，因为其他提供商，如 AWS，不需要。这是一个更新的代码片段：

```
@dynect = Fog::DNS.new(
  :provider => "dynect",
  :dynect_customer => "CUSTOMER",
  :dynect_username => "USERNAME",
  :dynect_password => 'PASSWORD'
)

@zone = @dynect.zones.get('zone.example.com')
@record = @zone.records.find{|r| r.name == 'master.zone.example.com' && r.type == 'CNAME'}
@record.destroy
@zone.publish # changed this 
```

# c# - 我应该避免在 Visual Studio 中使用类库进行“链接”引用吗？

> ID：11179459
> 
> 赞同：7
> 
> 时间：2012-06-24T17:06:45.710
> 
> 标签：c#, .net, visual-studio, architecture, reference

我在 Visual Studio C# .NET 解决方案中有类似以下设置：

> **项目 1** - TrainDisplay - 用于显示火车到站的 WinForms 应用程序。
> 
> **项目 2** - TrainFetcher - 是一个可重用的类库，用于获取有关火车的数据。
> 
> **项目 3** - TrainsDataModel 是一个数据模型，包含所有其他项目共有的类，例如 Train.cs、TrainRoute.cs 等。

每个都有以下参考：

> 项目 1：参考文献 2 和 3
> 
> 项目 2：参考文献 3

以这种方式使用引用是不是很糟糕？即项目 1 是否以两个对项目 3 的引用结束；一个直接，一个通过项目 2？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-25T08:20:01.257

这本身并没有错，编译器会做 The Right Thing®。

但这可能表明设计不太好。

尝试以这样的方式设计三层，2 只依赖于 3，而 1 只依赖于 2。

**编辑**：最后一句话不清楚。我的意思是：“设计三层，使您的业务对象只需要引用数据访问代码，并且 UI 只处理业务对象”。

最终，正确的方法实际上取决于您的架构（使用 ORM 与手动发出查询，Active Record 与 Mapper 等）。

# iphone - 是否可以使用 Cocoa 创建本地 WiFi 网络，同时保持连接到现有的支持 Internet 的 WiFi 连接？

> ID：11179462
> 
> 赞同：0
> 
> 时间：2012-06-24T17:07:02.020
> 
> 标签：iphone, cocoa, networking, wifi

我做了很多开发，需要在我的机器上创建本地网络，以便在我的移动设备上连接到它们。创建网络时，您会断开与现有网络的连接并失去互联网访问权限。有没有办法以编程方式创建网络，同时仍然保持可以访问 Internet 的第二个 WiFi 连接？

顺便说一句，这在 iPhone 上是可能的——当 iPhone 连接到本地创建的网络时，它会以某种方式检测到它不是真正的 Internet 连接并保持其 3G 连接，同时还能够与主机进行本地交互。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T17:22:18.083

不，这与软件无关。大多数 wifi 芯片组一次只支持与单个网络关联。

iPhone 能够避免这种情况，因为它的 3G 连接是一个独立于 wifi 连接的网络接口。但是，如果您有另一种将笔记本电脑连接到 Internet 的方法，例如有线以太网，则可以使用它来获得相同的效果。

# c# - 在 windows xp SP3 上启动 windows 服务的问题

> ID：11179465
> 
> 赞同：1
> 
> 时间：2012-06-24T17:07:23.797
> 
> 标签：c#, wcf, windows-services

我目前面临一个我无法解决的问题，我真的不知道该怎么办了。

当我尝试启动服务时，我收到消息：“服务已启动但又停止了，这是因为如果某些服务无事可做，例如性能日志和警报服务，它们将停止。” .

我查看了 Windows 日志，但没有任何内容可以描述为什么我的服务一直在停止。我还尝试通过命令提示符触发 Windows 服务，它给了我消息：“服务没有启动，但服务没有返回任何错误。”。

我试图删除所有引用我的服务的键，但这并没有解决问题。

我在谷歌上搜索（可能不够好）找到答案，但我没有找到任何答案。我确实找到了一些描述我可以做什么的网站，但是所有这些建议都不起作用。

这有点*** * 因为我不知道在哪里看。我没有任何错误消息，我没有任何可用于搜索的 ID。我真的不知道从哪里开始，我希望你们能帮助我解决这个问题。

**windows服务详解**

**操作系统：** Windows XP SP3

**.Net 框架：** .Net 4.0 客户端配置文件

**语言：** C#

**开发环境：** Visual Studio 2010 Professional（但安装了Visual Studio 2012 RC）

**通信：** WCF（命名管道）、WCF（BasicHTTPBinding）

*命名管道：*

我选择此解决方案是因为我想从 Windows 服务与 Windows 窗体应用程序进行通信。它现在工作了很长一段时间，但突然我的 Windows 服务自行关闭，我无法再重新启动它。

实现了两个命名管道服务：一个事件服务，它将向 windows 窗体应用程序发送任何通知，一个管理服务，它使我的 windows 窗体应用程序能够维护我的 windows 服务。

*基本HTTPBinding：*

基本的 http 绑定建立到中央服务器的连接。然后，此连接用于将信息从客户端流式传输到服务器。

我不知道您需要哪些其他信息，但如果你们需要一些东西，那么我会尽可能详细地提供。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T17:18:18.553

好的，我已经解决了这个问题，这确实是一个愚蠢的问题。Windows XP 不会抛出任何错误或不会向您报告存储所有日志的书已满！！！清理日志后，我的服务完美启动并继续运行。多么愚蠢！:)

# jquery - 来自 jquery ui 的 Draggable 在 jsPlumb 网站上工作，但是当我在本地保存完整的网页时，拖放停止工作

> ID：11179466
> 
> 赞同：-1
> 
> 时间：2012-06-24T17:07:23.893
> 
> 标签：jquery, jquery-ui, jsplumb

我正在查看这个 jsPlumb 示例：http: [//jsplumb.org/jquery/flowchartConnectorsDemo.html](http://jsplumb.org/jquery/flowchartConnectorsDemo.html)

您会看到框的拖放工作完美，但是当您在本地保存完整的网页时，拖放不再起作用。

我尝试更改 JS 文件的路径，我尝试使用最新版本的 jqueryUi 和 jquery 而不是来自网站的那些，但没有成功。我也试过用 Safari 和 Chrome 和 FF 保存页面，同样的事情发生了。

他们的任何示例都会发生这种情况，您还会注意到在本地副本上，左侧窗口（您可以选择渲染类型和库...等的窗口）出现两次。

拖放也适用于该窗口，但不适用于示例中的 4 个方块。

任何人都可以帮我解决这个问题，或者可以指导我一些工作示例（可以在本地副本上工作）。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T00:49:26.053

jsPlumb.org 上的页面并非真正设计为在本地保存。尽管我知道为什么您可能希望将其中之一用作您自己的应用程序的基础。您是否考虑过从 GitHub 上查看代码？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T11:04:28.023

[从https://github.com/sporritt/jsplumb/](https://github.com/sporritt/jsplumb/)获取代码。提取下载的代码并转到 demo/jquery 文件夹。从这里您可以运行演示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T20:47:26.377

我不知道为什么，但是当我使用 Google Chrome 和 Firefox 保存网页时，这种情况发生了很多次，但是当我使用 IE 保存它（选择：网页，完成）时，网页可以离线正常工作。这不是我第一次保存页面，很多次我都经历过同样的事情，用谷歌浏览器和 Firefox 保存“破坏”一些东西，而在 IE 中它可以正常工作。

我自己不是IE用户，但是当我需要保存网页以离线检查其功能时，我使用IE进行保存。

# android - 在特定时间执行代码：Handler? 报警管理器？

> ID：11179473
> 
> 赞同：0
> 
> 时间：2012-06-24T17:08:05.553
> 
> 标签：android, handler, alarmmanager

我需要每隔一段时间执行一次代码，有时是 10 秒，有时是 5 分钟。代码应在开始后的 10 秒处执行，然后在开始后*的*5 分 10 秒处执行，等等 。计时表从开始处开始滴答作响，因此执行时间*必须**准确*。

 **使用`Handler.postDelayed`不起作用，因为要执行的代码可能需要一些时间。发生这种情况时，代码的下一次执行可能会延迟。

当我想实施`AlarmManager`时，我看到了注释

> 警报管理器适用于您希望应用程序代码在特定时间运行的情况，即使您的应用程序当前没有运行。对于正常的计时操作（滴答声、超时等），使用 Handler 更容易、更高效。

所以我有点困惑，我应该怎么做才能保证正确执行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T17:22:33.443

看看这篇文章：[时间/日期更改监听器](https://stackoverflow.com/questions/11085628/time-date-change-listener)。您可以使用 setRepeating() 方法，或者在每次执行后再次设置计时器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T17:54:30.767

由于 android 不是硬实时操作系统，因此如果不进行大量内核修改，就不可能获得*准确的执行时间。*即使在那里，您也不太可能在典型的 android 设备上以精确定时的方式提供有用的 I/O，因此仅在完美的时间运行您的代码可能还不够。

充其量您可以使用更可靠的计时器确定您的代码可以运行的最新时间点，并采取事后补偿措施。

就可用的计时方法而言，主要考虑的应该是您是否打算将设备从睡眠中唤醒以完成事件，在这种情况下您应该使用警报管理器，如果您打算让设备保持清醒，在这种情况下您应该使用唤醒锁，或者如果您对仅在设备唤醒并且您的服务或活动正在运行时发生的事件感到满意，在这种情况下您可以使用简单的计时器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T18:09:37.030

正如 Chris 所说，Android 中没有确切的时间。

但是你可以尝试这样接近实时......

等待5s的一些伪代码：

```
class mJob implements Runnable{
   public void run(){
      while(System.currentTimeMillis()<myExactTime){ //poll for your time
         Thread.sleep(1);
      }
      //Ok, we are as near as we'll ever get
      //call here your 'realtime' function or whatever you need
   }
}

 mHandler.postDelayed(mJob,4950); //the closer to 5000, the better for the cpu but you could miss your `myExactTime` 
```

我现在不知道这有多准确，你只需要尝试一下。但我认为没有其他方法可以使用普通 SDK 变得更加“实时”。您甚至可以删除`sleep(1)`以变得更接近您的`myExactTime`.

对于下一次通话，请使用以下内容（从头开始）：

`nextCallDelayInMillis = starttimeInMillis+No1_Delay+No2_Delay-System.currentTimeMillis();`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-24T11:16:49.223

您没有指定您的代码是在应用程序运行时运行还是作为后台服务运行。这很重要，因为在您锁定设备后，Android 会进入睡眠模式，此时 CPU 处于关闭状态，并且不会激活 postDelayed 等功能。意图也要求开始活动。但是 AlarmManager 广播会。我将从[这里引用](http://www.sitepoint.com/scheduling-background-tasks-android/)

> AlarmManager 最适合用于即使在应用程序未打开时也需要运行的任务。对于需要在应用程序使用期间运行的正常计时操作（滴答声、超时等），使用 Handler 的 postDelayed() 和 postAtTime() 方法效率更高。AlarmManager 需要太多开销来证明以这种方式使用它是合理的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-24T17:50:01.657

我建议您使用 postDelay，对于处理程序的任何发布，处理程序正在打开新线程并且代码正在同时执行。

```
private Runnable mUpdateTimeTask = new Runnable() {
public void run() {

//some code

mHandler.postDelayed(this, 1000);
}
}; 
```

这是我使用 postDelay 显示倒数计时器的完整代码：[https ://github.com/minimaldevelop/antistress/blob/master/src/com/minimaldevelop/antistress/AntiStressExerciseActivity.java](https://github.com/minimaldevelop/antistress/blob/master/src/com/minimaldevelop/antistress/AntiStressExerciseActivity.java)

同样在这里，我使用 AlarmManger，但仅作为在应用程序关闭时在通知栏中显示消息的剩余部分。**

# android - 有没有办法将安卓应用绑定到长按主页按钮？

> ID：11179474
> 
> 赞同：3
> 
> 时间：2012-06-24T17:08:15.377
> 
> 标签：android, android-intent

我正在寻找一个意图过滤器，例如 android.intent.category.HOME，它将允许应用程序在按下 HOME 按钮时启动，仅用于长按。或任何其他实现相同结果的方法...我读到它在过去是可能的，但出于安全原因被禁用...是真的吗？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-02-19T03:16:28.633

从 Android 4.1 开始就可以使用了

只需添加以下内容并将它们放在 AndroidManifest.xml 的主要活动元素中</p>

```
<intent-filter>
    <action android:name="android.intent.action.ASSIST" />
    <category android:name="android.intent.category.DEFAULT" />
</intent-filter> 
```

然后重新安装您的应用程序，长按主页按钮，您的应用程序将列在“完成操作”中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T17:12:36.517

> 我正在寻找一个意图过滤器，例如 android.intent.category.HOME，它将允许应用程序在按下 HOME 按钮时启动，仅用于长按。

安卓不支持，抱歉。

# c++ - 函数模板中的数组类型推导

> ID：11179476
> 
> 赞同：12
> 
> 时间：2012-06-24T17:08:34.547
> 
> 标签：c++, templates, visual-c++, explicit-specialization

我有一个模板方法如下： -

```
template<typename T, int length>
void ProcessArray(T array[length]) { ... } 
```

然后我有使用上述方法的代码： -

```
int numbers[10] = { ... };
ProcessArray<int, 10>(numbers); 
```

我的问题是为什么我必须明确指定模板参数。不能自动推断，以便我可以使用如下： -

```
ProcessArray(numbers); // without all the explicit type specification ceremony 
```

我确定我缺少一些基本的东西！备用锤子！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-24T17:11:04.860

您不能按值传递数组。在一个函数中的参数`T array[length]`是*完全一样*的`T* array`。没有可用于推断的长度信息。

如果要按值获取数组，则需要类似`std::array`. 否则，您可以参考它，它不会丢失尺寸信息：

```
template<typename T, int length>
void ProcessArray(T (&array)[length]) { ... } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-24T17:12:10.240

您缺少正确的参数类型：数组只能通过*引用*传递：

```
template <typename T, unsigned int N>
void process_array(T (&arr)[N])
{
    // arr[1] = 9;
}

double foo[12];
process_array(foo); // fine 
```

# java - 如何允许用户调整小部件的大小？

> ID：11179477
> 
> 赞同：0
> 
> 时间：2012-06-24T17:08:37.250
> 
> 标签：java, user-interface, layout, swt

我正在使用 SWT Java。我想实现可由用户调整大小的布局。

例如左侧的文件树，右侧的文本编辑器，用户可以更改它们之间的大小比例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T17:26:30.417

去找一个[`Sash`](http://help.eclipse.org/indigo/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fswt%2Fwidgets%2FSash.html)小部件！（[片段](http://www.eclipse.org/swt/snippets/#sash)）

# php - 注意：未定义变量：第 7 行 \www\test.php 中的 var1

> ID：11179480
> 
> 赞同：-2
> 
> 时间：2012-06-24T17:08:46.300
> 
> 标签：php

> **可能重复：**
> [如何在函数中使用包含？](https://stackoverflow.com/questions/2619573/how-to-use-include-within-a-function)

我有两个文件

**inc.php 文件**

```
<?php
$var1 = "foo";
$var1 .= "bar";
?> 
```

**test.php 文件**

```
<?php
function getcontent($file) {
 include ($file);
}

getcontent('inc.php');
echo $var1;
?> 
```

当我运行 test.php 它给我输出错误

```
Notice: Undefined variable: var1 in \www\test.php on line 7 
```

但是当我将我的 test.php 文件更改为此

```
<?php
include ('inc.php');
echo $var1;
?> 
```

它的作品，并给我很好的输出

```
foobar 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T17:19:23.810

当你这样做时

```
function getcontent($file) {
    include ($file);
}
getcontent('inc.php'); 
```

它包括

```
function getcontent($file) {
    $var1 = "foo";
    $var1 .= "bar";
} 
```

实际上，您的变量包含在函数内部，并且在函数外部不可见，因此会出现错误消息。

[**请参阅此 SO 答案。**](https://stackoverflow.com/questions/2619573/how-to-use-include-within-a-function)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T17:14:20.397

您必须将 $var1 声明为全局变量。

```
global $var1;

$var1 = "foo";
$var1 .= "bar"; 
```

**或者**

```
$GLOBALS['var1'] = "foo";
$GLOBALS['var1'] .= "bar"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T17:15:42.007

当您在`getcontent`函数中包含文件时，变量的行为就像在那里定义的一样，并且对外部不可见。

如果您将它们声明为`global`，它将起作用。

# php - 联系表单处理程序指向空白 php 而不是 html 页面

> ID：11179483
> 
> 赞同：1
> 
> 时间：2012-06-24T17:08:58.400
> 
> 标签：php, html, forms, contact

我有一个联系表格，它应该会转到一个谢谢你的 html 页面。电子邮件正在发送到我的帐户，但是在提交页面时它会转到一个空白的 php 页面，而不是转到我的谢谢 html 页面。有什么建议么？代码很低。

```
<?php 
$errors = '';
$myemail = 'yourname@website.com';//<-----Put Your email address here.
if(empty($_POST['name'])  || 
   empty($_POST['email']) || 
   empty($_POST['message']))
{
    $errors .= "\n Error: all fields are required";
}

$name = $_POST['name']; 
$email_address = $_POST['email']; 
$message = $_POST['message']; 

if (!preg_match(
"/^[_a-z0-9-]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,3})$/i", 
$email_address))
{
    $errors .= "\n Error: Invalid email address";
}

if( empty($errors))
{
    $to = $myemail; 
    $email_subject = "Contact form submission: $name";
    $email_body = "You have received a new message. ".
    " Here are the details:\n Name: $name \n Email: $email_address \n Message \n $message"; 

    $headers = "From: $myemail\n"; 
    $headers .= "Reply-To: $email_address";

    mail($to,$email_subject,$email_body,$headers);
    //redirect to the 'thank you' page
    header('Location: contact-form-thank-you.html');
} 
?>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> 
<html>
<head>
    <title>Contact form handler</title>
</head>

<body>
<!-- This page is displayed only if there is some error -->
<?php
echo nl2br($errors);
?>

</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T17:10:06.207

我之前在重定向到另一个页面时遇到问题，而某些东西是`echo()`'d。也许这可以解决你的问题。

```
header('Location: page.html');
exit(); 
```

# mysql - MySQL: Using alias as a column

> ID：11179484
> 
> 赞同：3
> 
> 时间：2012-06-24T17:09:04.733
> 
> 标签：mysql, sql

I have this query:

```
select qa_returns_items.item_code, 
               (CASE status_code
                 WHEN 11 THEN (qa_returns_items.item_quantity - qa_returns_residues.item_quantity) 
                 WHEN 12 THEN (qa_returns_items.item_quantity + qa_returns_residues.item_quantity)   END) as total_ecuation , 
                qa_returns_residues.item_unitprice,
               ( qa_returns_residues.item_unitprice * total_ecuation) as item_subtotal,
               (qa_returns_residues.item_discount * item_quantity) as item_discount,
               ( ( qa_returns_residues.item_unitprice * total_ecuation) -   
                 (qa_returns_residues.item_discount * item_quantity) ) as item_total
from qa_returns_residues, qa_returns_items
where
    total_ecuation > 0 
AND qa_returns_items.item_code = qa_returns_residues.item_code; 
```

It shows me the error: **Unknown column 'total_ecuation' in 'field list'**

how I can use the alias as a column?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T17:48:08.017

考虑使用子查询。我添加了表别名以使查询更具可读性：

```
select  *
,       item_unitprice * total_ecuation as item_subtotal
,       (item_unitprice * total_ecuation) - item_discount as item_total
from    (
        select  ri.item_code
        ,       case status_code
                when 11 then ri.item_quantity - rr.item_quantity 
                when 12 then ri.item_quantity + rr.item_quantity
                end as total_ecuation
        ,       rr.item_unitprice
        ,       rr.item_quantity
        ,       rr.item_discount * rr.item_quantity as item_discount
        from    qa_returns_residues rr
        join    qa_returns_items ri
        on      ri.item_code = rr.item_code
        ) as SubQueryAlias
where   total_ecuation > 0 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T17:21:00.020

恐怕您必须重写查询以使用命名子查询，或者在 where 子句中重复整个 case 语句...

# scripting - 在 VBScript 中，如何为多个文件夹/文件管理“Scripting.FileSystemObjects”，如 objFSO 和 objFolder？

> ID：11179494
> 
> 赞同：1
> 
> 时间：2012-06-24T17:10:15.140
> 
> 标签：scripting, vbscript, multiple-instances, filesystemobject

在 VBScript 中，如何为多个文件夹/文件管理“Scripting.FileSystemObjects”，如 objFSO 和 objFolder？

在“主要”代码部分，我声明了“Scripting.FileSystemObject”的一个实例（全局）

```
 Set objFSO = CreateObject("Scripting.FileSystemObject") 
```

然后，我执行一些操作，例如：

```
 If objFSO.FileExists(strOutputFilename) Then
        WScript.Echo "Deleting File: " & strOutputFilename
        objFSO.DeleteFile strOutputFilename
    End If 
```

然后，在一个循环中，我得到一个文件夹，并将它传递给一个函数：

```
 For gintLoop = 0 to (ubound(arraySearchPath))
        wscript.echo "Processing folder:" & arraySearchPath(gintLoop)
        Set objFolderX = objFSO.GetFolder(arraySearchPath(gintLoop))
        Call DoWork (objFolderX, arrayParam1, arrayParam2)
    Next 
```

至此，一切都清楚了……

现在，在函数中，我执行以下操作：
a) 从 objFolder 收集文件名

```
 Set lobjFolder = objFSO.GetFolder(objFolderX.Path)  
    Set lcolFiles = lobjFolder.Files 
```

b）检查其他（不相关）路径中是否存在文件

c) 获取各种文件的大小：

```
 lcurInputFileSize = CCur(lobjFile.Size) 
```

d) 删除各种文件

e) 打开文件进行阅读

```
 For Each lobjFile in lcolFiles
        lstrTargetFile = lobjFolder.Path & "\" & lobjFile.Name
        Set lobjInputFile = objFSO.OpenTextFile(lstrTargetFile, ForReading)
    ... 
```

f) 打开文件进行写入

```
 Set lobjOutputFile = objFSO.OpenTextFile(strOutputFilename, ForAppending, True) 
```

g）调用传递各种对象的其他子/函数

h) 递归调用（相同的）函数来处理其他文件夹

```
 For Each lobjSubfolderY in objFolderX.SubFolders
        Call DoWork (lobjSubfolderY, arrayParam1, arrayParam2)
    Next 
```

我担心的是我需要确保 FileSystemObjects 的各种用途（如文件夹路径、打开的文件等）不会被 FileSystemObjects 的以后使用“踩踏”。

问题 1：我是否需要（或建议）为“Main”和每个（或某些）子/函数有一个单独的“Scripting.FileSystemObject”（objFSO）实例？

问题 2：同样，我如何管理各种其他对象以避免丢失数据？

凯文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T18:06:10.883

**Q1**：不，您不需要 Scripting.FileSystemObject 的多个实例。

对象上的方法都是静态的。

事实上，Scripting Runtime Reference 的文档表明 FSO 是一个*单例*，尽管它没有使用这个词：

> 您只能创建 FileSystemObject 对象的一个​​实例，无论您尝试创建另一个实例多少次。

来自： http: [//msdn.microsoft.com/en-us/library/2z9ffy99 (v=vs.84).aspx](http://msdn.microsoft.com/en-us/library/2z9ffy99(v=vs.84).aspx)

`WScript.CreateObject("Scripting.FileSystemObject")`根据我的经验，多次调用不会导致错误。后续调用的返回值很可能只是最初创建的 FSO 的副本。

至于你的问题2，我不明白。我认为您指的是 FSO 返回的对象，Folder、File、TextStream 等类型的对象。

像对待任何其他有状态的对象一样对待它们。你可以有多个实例，如果你想进行递归，你需要将它们作为基于堆栈的参数传递。

# c++ - 在 OpenCV 2.3 中调用 C++ inRange 函数

> ID：11179498
> 
> 赞同：0
> 
> 时间：2012-06-24T17:10:35.610
> 
> 标签：c++, opencv

在 OpenCV 2.1 中，我使用 cv::inRange 对 cv::Mat 应用了颜色过滤：

```
cv::CvScalar* scalar_low = new cv::CvScalar(10,20,30,0);
cv::CvScalar* scalar_up = new cv::CvScalar(20,30,40,0)
cv::Mat* in = new cv::Mat(cv::Size(10,10), CV_8UC3);
cv::Mat* out = new cv::Mat(cv::Size(10,10), CV_8UC1);

cv::inRange(*in, *scalar_low, *scalar_up, *out); // <----- 
```

在 OpenCV 2.3（当前）中，不再支持以 cv::CvScalar 作为参数的 cv::inRange。

```
void inRange(Mat src, Mat lowerb, Mat upperb, Mat dst); 
```

如何在当前定义的 C++ 中使用此函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T18:43:05.987

OpenCV 的当前版本是 2.4.1。

请阅读此版本中的文档：[http ://docs.opencv.org/modules/core/doc/operations_on_arrays.html?highlight=inrange#inrange](http://docs.opencv.org/modules/core/doc/operations_on_arrays.html?highlight=inrange#inrange)

以下是当前格式：

`C++: void inRange(InputArray src, InputArray lowerb, InputArray upperb, OutputArray dst)`

如果您想查看它的正确定义，请查看opencv 示例附带的[camshiftdemo.cpp的第 122 行。](http://code.opencv.org/projects/opencv/repository/entry/trunk/opencv/samples/cpp/camshiftdemo.cpp)

```
inRange(hsv, Scalar(0, smin, MIN(_vmin,_vmax)),Scalar(180, 256, MAX(_vmin, _vmax)), mask); 
```

希望你能从中找出正确的定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T03:05:32.103

以下适用于我的 opencv 2.4.1：

```
cv::inRange(src, cv::Scalar(159, 135, 135), cv::Scalar(179, 255, 255), dstB); 
```

# ruby-on-rails - 如何控制 Rails has_many 中的完整性：通过关系？

> ID：11179501
> 
> 赞同：0
> 
> 时间：2012-06-24T17:11:04.390
> 
> 标签：ruby-on-rails, associations, has-many, has-many-through

如果关联记录有自己的关联记录，我试图阻止它被删除。Rails 似乎正在颠覆 :dependent => :restrict 选项并执行 DELETE SQL。我错过了什么？

```
class User < ActiveRecord::Base
  has_many :user_regions
  has_many :events, :through => :user_regions
  has_many :regions, :through => :user_regions
end

class Region < ActiveRecord::Base
  has_many :user_regions
  has_many :events, :through => :user_regions
end

class UserRegion < ActiveRecord::Base
  belongs_to :user
  belongs_to :region

  has_many :events, :dependent => :restrict
end

class Event < ActiveRecord::Base
  belongs_to :user_region, :readonly => true
  has_one :planner, :through => :user_region, :source => :user
  has_one :region, :through => :user_region
end 
```

现在假设我有两个区域 [R1 和 R2]，两个用户 [U1 和 U2]。U1 已分配给 R1 和 R2 [作为 UR1 和 UR2]，而 U2 已分配给 R2 [作为 UR3]。这给出了总共三个 UserRegions。

此外，我还有事件 E1、E2 和 E3，其中 E1 在 UserRegion UR1 中，E2 在 UserRegion UR2 中，E3 在 UserRegion UR3 中。这给了 U1 两个事件和 U2 一个事件。

应该发生什么：如果我试图删除 U1 对 R2 的分配（即销毁 UR2），我应该得到一个错误，因为 U1 有通过 UR2 的事件。

怎么了：

```
u1 = User.find(1)
urids = u1.regions.map &:id
 => [1,2]
u1.region_ids = [1]
Region Load (0.3ms)  SELECT "regions".* FROM "regions" WHERE "regions"."id" = ? LIMIT 1  [["id", 1]]
Region Load (0.3ms)  SELECT "regions".* FROM "regions" INNER JOIN "user_regions" ON "regions"."id" = "user_regions"."region_id" WHERE "user_regions"."user_id" = 1
 (0.1ms)  begin transaction
SQL (0.3ms)  DELETE FROM "user_regions" WHERE "user_regions"."user_id" = 1 AND "user_regions"."region_id" = 2
 (2.7ms)  commit transaction
 => [1] 
```

显然，Rails 没有在被删除的 UserRegion 上执行 :destroy 回调，因为如果我尝试这样做：

```
UserRegion.find(2).destroy 
```

我会得到一个错误，事务会回滚。

我需要做些什么来确保将 Region id 分配给 User 不会删除 UserRegions？

这里的目标是“编辑用户”表单有一个用于分配区域的复选框列表。应该可以向用户*添加*区域并*删除*用户没有事件的区域。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T17:13:23.643

也许您可以先搜索关联的记录，然后仅在它们的计数为零时才执行删除代码行？

```
def destroy
@hgroup = Hgroup.find(params[:id])
  if 'search for associations' == 0
    @hgroup.destroy
      respond_to do |format|
       format.html { redirect_to hgroups_url }
     end
  else
     'do something else'
  end 
```

结尾

尝试类似的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T19:51:23.043

来自[ActiveRecord::Associations 文档](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html)的“删除还是销毁？” 部分：

> 对于 has_many，destroy 将始终调用要删除的记录的 destroy 方法，以便运行回调。但是 delete 将根据 :dependent 选项指定的策略进行删除，或者如果没有给出 :dependent 选项，则它将遵循默认策略。**默认策略是:nullify（将外键设置为nil），除了has_many :through，默认策略是delete_all（删除连接记录，不运行它们的回调）。**

所以在我上面的用户模型中，我需要改变这个：

```
class User < ActiveRecord::Base
  has_many :user_regions
  has_many :events, :through => :user_regions
  has_many :regions, :through => :user_regions
end 
```

进入这个：

```
class User < ActiveRecord::Base
  has_many :user_regions
  has_many :events, :through => :user_regions
  has_many :regions, :through => :user_regions, :dependent => :destroy
end 
```

如果用户仍然有通过 UserRegion 的事件，这有效地防止了 UserRegion 被删除。如果尝试这样做，将引发 ActiveRecord::DeleteRestrictionError。

在控制器级别处理此错误并设置我的视图以便永远不会遇到这种情况当然是另一回事。

# regex - 在perl中对文本块进行排序

> ID：11179508
> 
> 赞同：2
> 
> 时间：2012-06-24T17:12:06.420
> 
> 标签：regex, perl, sed, grep

我有一个看起来像的文件：

```
SECTION1 id name  
 sub section1
 sub section2
SECTION2 id name  
 sub section3
 sub section4
 sub section6
SECTION1 id name  
 sub section7
 sub section8
SECTION3 id name  
 sub section9
 sub section10
 sub section11
 sub section12
SECTION2 id name  
 sub section13
 sub section14
SECTION1 id name  
 sub section15
 sub section16
SECTION3 id name  
 sub section17
 sub section18 
```

我需要明智地对该文件部分进行排序。我唯一知道的是我有“SECTION1”、“SECTION2”和“SECTION3”。排序后的预期输出为：

```
SECTION1 id name  
 sub section1
 sub section2
SECTION1 id name  
 sub section7
 sub section8
SECTION1 id name  
 sub section15
 sub section16
SECTION2 id name  
 sub section3
 sub section4
 sub section6
SECTION2 id name  
 sub section13
 sub section14
SECTION3 id name  
 sub section9
 sub section10
 sub section11
 sub section12
SECTION3 id name  
 sub section17
 sub section18 
```

有没有简单的方法在 perl 中或使用 grep、sed 等实用程序来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T17:43:09.057

另一种使用方法`perl`：

假设`infile`有问题的内容和以下内容`script.pl`：

```
use warnings;
use strict;
use sort qw/stable/;

my ($section, @section);

while ( <> ) { 

    ## Save text if first line or when line doesn't begin with 'SECTION' word.
    if ( $. == 1 || $_ !~ m/\ASECTION\d+/ ) { 
        $section .= $_; 
        next unless eof;
    }   

    ## Save the text and the number of section.
    if ( $section =~ m/\ASECTION(\d+)/ ) { 
        push @section, [ $1, $section ];
        $section = q||;
    }   

    ## Begin to save next section.
    $section .= $_; 
}

## Print them sorted by section number.
for ( sort { $a->[0] <=> $b->[0] } @section ) { 
    printf qq|%s|, $_->[1];
} 
```

像这样运行它：

```
perl script.pl infile 
```

具有以下输出：

```
SECTION1 id name  
 sub section1
 sub section2
SECTION1 id name  
 sub section7
 sub section8
SECTION1 id name  
 sub section15
 sub section16
SECTION2 id name  
 sub section3
 sub section4
 sub section6
SECTION2 id name  
 sub section13
 sub section14
SECTION3 id name  
 sub section9
 sub section10
 sub section11
 sub section12
SECTION3 id name  
 sub section17
 sub section18 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-24T18:29:38.333

看起来需要特殊排序的东西。Perl 的默认排序不能正确地对带有数字的字符串进行排序，因此我们需要在排序之前提取数字。对于大数据集，我使用[Schwartzian 变换](http://en.wikipedia.org/wiki/Schwartzian_transform)对其进行了优化。

它的基本要点是先提取节号，然后是小节号，然后先按节号排序，如果出现平局，则按小节号排序。仅考虑小节中的第一个数字，因此假定这些行已经排序。

要在文件上使用它，只需更改`<DATA>`为`<>`，然后运行：

```
perl script.pl inputfile > outputfile 
```

**代码：**

```
use strict;
use warnings;

local $/;           # read entire file
my $data = <DATA>;  # slurp input file into scalar
my @records = split /(?=^SECTION)/m, $data;  # split into records
my @sorted =    map  {  $_->[0] }
                sort {  $a->[1] <=> $b->[1] ||
                        $a->[2] <=> $b->[2] }  
                map   { getnum($_) } @records;   # Schwartzian transform sort
print @sorted;

sub getnum {    # extract section and subsection numbers
    my ($sec) = $_[0] =~ /SECTION(\d+)/;
    my ($sub) = $_[0] =~ /\n.*?(\d+)/;
    return [ $_[0], $sec, $sub ];    # return anonymous array
}

__DATA__
SECTION1 id name  
 sub section1
 sub section2
SECTION2 id name  
 sub section3
 sub section4
 sub section6
SECTION1 id name  
 sub section7
 sub section8
SECTION3 id name  
 sub section9
 sub section10
 sub section11
 sub section12
SECTION2 id name  
 sub section13
 sub section14
SECTION1 id name  
 sub section15
 sub section16
SECTION3 id name  
 sub section17
 sub section18 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T17:46:54.537

```
#!/usr/bin/perl
use strict;
use warnings;

my @data;
{   # limit change to $/ to this scope
    local $/ = "SECTION";
    @data = map {chomp; $_ || ()} <DATA>;   
}

{   # limit change to 'warnings' to this scope
    no warnings 'numeric';
    print "SECTION$_" for sort {$a <=> $b} @data;
} 
```

这将保留各个部分。

或者从命令行：

```
perl -F/SECTION/ -0ane "print qq{SECTION$_} for grep $_, sort {$a <=> $b} @F" o33.txt 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-24T17:55:54.090

这可能对您有用（GNU sed）：

```
sed ':a;$!N;/\nSECTION/!s/\n/\x00/;ta;s/n\([0-9][\x00\n]\|$\)/n0\1/g;P;D' file |
sort |
sed 's/\x00/\n/g;s/n0/n/g' 
```

解释：

*   加入`SECTIONs`并`sub sections`成单行。`:a;$!N;/\nSECTION/!s/\n/\x00/;ta`
*   将`0`'s 添加到`sub sections`.`s/n\([0-9][\x00\n]\|$\)/n0\1/g`
*   打印每一行然后删除它。`P;D`
*   对管道输出进行排序。`sort`
*   解构排序的输出。`sed 's/\x00/\n/g;s/n0/n/g'`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-24T19:52:56.143

这可以通过根据节标签将记录累积在三个单独的列表中来非常简单地完成。

该程序使用哈希来执行此操作，并通过将文件中的每一行附加到最近的记录来构建完整的部分。如果该行是新部分的开头，则在附加该行之前将另一个空记录添加到列表中。

显示结果只需按照部分标签的顺序打印列表的所有元素。

```
use strict;
use warnings;

open my $fh, '<', 'sections.txt' or die $!;

my %sections;
my $current_list;

while (<$fh>) {
  if (/^(SECTION[123])/) {
    $current_list = $sections{$1} //= [];
    push @$current_list, '';
  }
  $current_list->[-1] .= $_ if $current_list;
}

for my $name (sort keys %sections) {
  print for @{ $sections{$name} };
} 
```

**输出**

```
SECTION1 id name  
 sub section1
 sub section2
SECTION1 id name  
 sub section7
 sub section8
SECTION1 id name  
 sub section15
 sub section16
SECTION2 id name  
 sub section3
 sub section4
 sub section6
SECTION2 id name  
 sub section13
 sub section14
SECTION3 id name  
 sub section9
 sub section10
 sub section11
 sub section12
SECTION3 id name  
 sub section17
 sub section18 
```

# javascript - 如何根据用户的浏览器宽度动态居中easySlider幻灯片？

> ID：11179512
> 
> 赞同：2
> 
> 时间：2012-06-24T17:12:19.507
> 
> 标签：javascript, jquery, css, easyslider

这是与我的问题相关的代码：http: [//jsfiddle.net/mkerny45/V23NK/](http://jsfiddle.net/mkerny45/V23NK/)

如您所见，有一个长长的水平图像幻灯片链。我希望它在页面最初加载和用户调整浏览器大小时始终位于用户页面的中心。

该站点说明了我感兴趣的功能：[http ://www.freundevonfreunden.com/](http://www.freundevonfreunden.com/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T17:39:19.363

我认为最好的方法是在幻灯片的容器上使用`position: absolute`或`padding-left`并计算左侧位置（以像素为单位`browser_width - image_width / 2`）。

这是一个代码示例：

```
var image_width = 940; //You can also get it dynamically

$(document).ready(function() {        
    $('#slider').css('padding-left', ($(window).width() - image_width) / 2);
});

$(window).resize(function() {
    $('#slider').css('padding-left', ($(window).width() - image_width) / 2);
}); 
```

# algorithm - 存储 1000 个电话号码所需的内存

> ID：11179516
> 
> 赞同：2
> 
> 时间：2012-06-24T17:12:56.313
> 
> 标签：algorithm, bit

我正在阅读[这个](https://stackoverflow.com/questions/7685649/most-efficient-way-to-store-thousand-telephone-numbers)问题，

但不明白 aix 回答的某些部分，即它如何只需要 17 位来存储 5 位电话号码，以及总数如何变成 2128 字节来存储 1000 个号码。

请帮我解决这个愚蠢的疑问。

提前致谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T17:20:00.957

前 5 位应存储一次，因此由于 5 位表示 0-99999 中的十进制数，因此您至少需要将其存储为二进制。

现在第一个允许您拟合 99999 个数字的二进制值是 131072，即 2^17。所以 17 位用于公共前缀。

现在您需要为每个数字的最低部分存储 1000 个 5 位数字。方法和以前一样。**每个数字 17 位 = 17000 位。**

`Total: 17000 + 17 = 17017 bits`.

每个字节有 8 位，所以

`17017/8 = 2127.125`.

您至少需要**2128 字节**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T17:14:29.747

10 ⁵ = 100000。ceil(log [2] (100000)) = 17。

# jquery - MVC3 jQuery getJSON 不发出调用

> ID：11179518
> 
> 赞同：0
> 
> 时间：2012-06-24T17:12:59.303
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3, getjson

我正在尝试使用 getJSON() 调用使 ajax 工作。当我导航到 /Home/GetWeather 时，我会在浏览器中返回 Json 数据。但是 jQuery 调用不起作用。有任何想法吗？当我在警报（“Hello”）上设置断点时，它从未命中。在萤火虫中，我没有看到任何 ajax 调用。有任何想法吗？

```
$(document).ready(function() {
    $("#Button1").click(function() {
        $.getJSON("/Home/GetWeather", null, function(data) {
            alert("Hello");
        });
    });
});​ 
```

**控制器代码**

```
public class HomeController : Controller
{
    //
    // GET: /Home/

    public ActionResult Index()
    {
        return View();
    }

    public JsonResult GetWeather()
    {
        List<Weather> weather = new List<Weather>();

        // populate weather with data

        return Json(weather, JsonRequestBehavior.AllowGet);
    }
} 
```

**看法：**

```
@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <title>Index</title>
    <script src="../../Scripts/jquery-1.5.1.min.js" type="text/javascript"></script>
    <script src="../../Scripts/jquery-1.5.1-vsdoc.js" type="text/javascript"></script>
    <script type="text/javascript">

        $(document).ready(function () {

            $("#Button1").click(function () {
                $.getJSON("/Home/GetWeather", null, function (data) { //I hit breakpoint here, but in firebug I dont see any call, nothing
                    alert("Hello"); // Breakpoint here doesnt hit :(
                });
            });

        });

    </script>
</head>
<body>
    <input id="Button1" type="button" name="Button1" value="Get Weather" />
    <div id="Weather"></div>
</body>
</html> 
```

**我找到的解决方案被删除的任何原因？？？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T13:08:38.753

据我所知，您正在尝试将其称为跨域。让代码跑出站点的域。在我让 html 文件调用从 localhost 运行的 json 之前，它确实没有返回任何内容。但是把那个html放到同一个地方，从localhost调用它就可以了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-24T17:16:06.323

*   不要`Asp.Net-MVC`使用硬编码 URL`Url.Action`
*   删除`null`参数。为什么需要发送`null`到控制器？只是省略它。

获得正确路线的代码：

```
@Url.Action("GetWeather", "Home") 
```

脚本内部：

```
$("#Button1").click(function () {
    $.getJSON("@Url.Action("GetWeather", "Home")", function (data) {
        alert("Hello");
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T18:02:19.460

如果按钮是提交按钮或锚点，请确保通过返回 false 取消按钮的默认操作：

```
$("#Button1").click(function() {
    $.getJSON("/Home/GetWeather", null, function(data) {
        alert("Hello");
    });

    return false; // <!-- cancel the default action of the button
}); 
```

正如`@gdoron`他在回答中所说，永远不要对这样的网址进行硬编码。始终使用 url 助手来生成它们。

* * *

更新：

现在您已经展示了您的视图，我可以看到您已将 url 硬编码到脚本中：

```
<script src="../../Scripts/jquery-1.5.1.min.js" type="text/javascript"></script>
<script src="../../Scripts/jquery-1.5.1-vsdoc.js" type="text/javascript"></script> 
```

你不应该[这样做](https://stackoverflow.com/a/11154110/29407)。您应该始终使用 url 助手：

```
<script src="@Url.Content("~/Scripts/jquery-1.5.1.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery-1.5.1-vsdoc.js")" type="text/javascript"></script> 
```

此外，您应该学习使用诸如 FireBug 之类的 javascript 调试工具，这使得检测这些错误变得轻而易举。如果您使用过 FireBug，您在请求这些脚本时会看到 404 错误。

# twitter-bootstrap - Twitter Bootstrap fluid spans broke template

> ID：11179524
> 
> 赞同：6
> 
> 时间：2012-06-24T17:14:03.507
> 
> 标签：twitter-bootstrap

When i try to get a table with spans. I get fluid table. How to get a flat table without these strange spaces? Picture to explain what wrong:

![Fluid table](../Images/4f5500b303a2dfc5e12f49353f51a54f.png)

Full listing of sourse page [https://gist.github.com/2984012](https://gist.github.com/2984012)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-24T18:32:00.023

## No space at the beginning

### Problem

The space that appears on the 3rd line is a "feature" of bootstrap : the first span of a container has no left margin.

```
[class*="span"]:first-child {
    margin-left: 0;
} 
```

(source : [https://github.com/twitter/bootstrap/blob/master/less/mixins.less#L613](https://github.com/twitter/bootstrap/blob/master/less/mixins.less#L613))

### Fix

You can add an invisible .span element before the first item : that way the first item will have a space too.

```
<div class="span" style="display: none;"></div> 
```

## Hole in the layout

### Problem

Your first item seems to be longer (in height).

### Fix

It appears you have set a minimum height, but you should fix a **maximum height**, or ensure that there are **no items longer** than the minimum height.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-24T19:48:56.917

you using the class **thumbnails** but not the child class **thumbnail** for the items in your code.

```
<div class="container">
<ul class="thumbnails">
    <!-- start item -->
    <li class="span3">
    <div class="thumbnail">
        <a href="#" title="" ><img src="http://placehold.it/260x180" alt=""></a>
        <h5><a href="#" title="" >Ruby on Rails Ringer</a></h5>
    <p>$17.99</p>
    </div>
    </li>
    <!-- end item -->    
</ul>
</div> 
```

second you don't need the class **row-fluid** because thumbnails class using fluid out of the box.

```
<div class="">
  <div data-hook="homepage_products"> 
```

last point - I don't see your container in your code

```
<div class="container"> 
```

[jsfiddle](http://jsfiddle.net/linuxbender/m6CNd/)

# android - 访问Android的OBEX服务器并读取数据

> ID：11179526
> 
> 赞同：2
> 
> 时间：2012-06-24T17:14:23.410
> 
> 标签：android, bluecove, obex

我想知道是否可以从带有 Bluecove 的 Windows 中从 Android 的 OBEX 服务器读取数据（联系人、未接来电等）。我从 Windows 尝试了以下代码，但它`OBEX_HTTP_NOT_ACCEPTABLE`在连接时返回。设备地址和通道是正确的，因为在运行此测试时，android 会弹出一个对话框，询问我是否允许其他设备访问它的联系人。谢谢！

代码：

```
import java.io.IOException;
import javax.microedition.io.Connector;
import javax.obex.*;

public class PBAPTest1 {

    public static void main(String[] args) {
        String deviceAddress = "001122334455";
        int channel = 19;
        String serverURL = "btgoep://" + deviceAddress + ":" + channel + ";authenticate=false;encrypt=false;master=false";

        System.out.println("Connecting to " + serverURL);

        ClientSession clientSession = null;
        Operation op = null;
        HeaderSet hdr = null;

        try {
            clientSession = (ClientSession) Connector.open(serverURL);
            hdr = clientSession.connect(clientSession.createHeaderSet());
            if (hdr.getResponseCode() != ResponseCodes.OBEX_HTTP_OK) {
                System.out.println("Failed to connect: "
                        + hdr.getResponseCode()); // response: 198 OBEX_HTTP_NOT_ACCEPTABLE
                return;
            }
        } catch (IOException e) {
            e.printStackTrace();
            return;
        }

        byte[] PBAP_TARGET = new byte[] { 0x79, 0x61, 0x35, (byte) 0xf0,
                (byte) 0xf0, (byte) 0xc5, 0x11, (byte) 0xd8, 0x09, 0x66, 0x08,
                0x00, 0x20, 0x0c, (byte) 0x9a, 0x66 };

        hdr.setHeader(HeaderSet.TARGET, PBAP_TARGET);
        hdr.setHeader(HeaderSet.NAME, "pb.vcf");
        hdr.setHeader(HeaderSet.TYPE, "x-bt/vcard-listing");
        try {
            op = clientSession.get(hdr);
        } catch (IOException e) {
            e.printStackTrace();
        }

    }
} 
```

日志猫：

```
D/BluetoothEventLoop( 1551): Device property changed: XX:XX:XX:XX:XX:XX property: Connected value: true
D/BluetoothService( 1551): CONNECTION_STATE_CHANGE: XX:XX:XX:XX:XX:XX: 0 -> 2
D/Obex ServerSession( 1948): java.io.IOException: Software caused connection abort
D/BluetoothAdapterStateMachine( 1551): BluetoothOn process message: 52
D/BluetoothService( 1551): CONNECTION_STATE_CHANGE: XX:XX:XX:XX:XX:XX: 2 -> 0
D/BluetoothEventLoop( 1551): Device property changed: XX:XX:XX:XX:XX:XX property: Connected value: false 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T04:19:50.630

```
hdr = clientSession.connect(clientSession.createHeaderSet()); 
```

标头应设置为值为 pbap_target 字节数组的目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T12:58:33.723

" `clientSession`" connect 需要一个目标头。

# javascript - AngularJS $location 没有模板

> ID：11179528
> 
> 赞同：3
> 
> 时间：2012-06-24T17:14:31.207
> 
> 标签：javascript, browser-history, angularjs

我想`$locationProvider`在 AngularJS 中使用该服务，而不在我的`ng-view`.

我有一个元素通过绑定到数据元素的存在来`div`按需显示。`ng-show`我想通过 将它连接到浏览器位置，`$locationProvider`但保持在同一个模板中。

模板：

```
<div> other stuff ... </div>

<div ng-show="model">{{ model.element }}</div> 
```

控制器：

```
Controller = function($scope, $location) {
  $scope.show = function() {
    $scope.model = model;    // show div
  }

  $scope.hide = function() {
    $scope.model = null;    // hide div
  }
} 
```

我不知道如何在其中集成`$location`服务。如果`history.pushState`直接设置，AngularJS 也会覆盖位置。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-24T18:17:15.713

使用源，卢克:-) [http://code.angularjs.org/1.0.0/angular-1.0.0.js](http://code.angularjs.org/1.0.0/angular-1.0.0.js)

如果您查看 ngViewDirective（实际上非​​常简单），它只会捕获 '$routeChangeSuccess' 事件并相应地更改视图。

所以你可以捕获 $routeChangeSuccess 然后将 $route 注入你的控制器，检查新路由是否是你想要的，并相应地显示。（我认为：D）

这可能有效（未经测试）：

```
//declare a route so angular knows to broadcast about it when it's hit
//We aren't declaring any actions for the route though,
//since below we define custom actions
myApp.config(function($routeProvider) {
  $routeProvider.when('/superman', {});
}); 

function SupermanCtrl($scope, $route) {
  $scope.$on('$routeChangeSuccess', function() {
    //If this doesn't work, console.log $route.current to see how it's formatted
    if ($route.current == '/superman')
      $scope.show = true;
    else
      $scope.show = false;
  });
} 
```

我希望它有效，如果没有，它应该足够开始了。我鼓励您阅读 ngViewDirective，如果这不起作用，请搜索“$routeChangeSuccess”并弄清楚它是如何/为什么被广播的。

# templates - 流星整页模板

> ID：11179531
> 
> 赞同：2
> 
> 时间：2012-06-24T17:15:21.260
> 
> 标签：templates, meteor

我正在使用流星。我正在尝试拥有一个完整的页面模板（包括`body`and`head`标签）。因为一个是针对手机版的。

我试着有

```
{{> desktop}}

<template name="desktop">
    <head>...</head>
    <body>...</body>
</template>

<template name="mobile">
    <head>...</head>
    <body>...</body>
</template> 
```

我得到一个语法错误（由于>桌面车把）我将如何在两个模板之间切换？（流星添加了`<html>`标签和一堆`script`标签，所以它有点问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T19:00:38.637

为桌面创建`desktop_head`和`desktop_body`模板，为移动设备做同样的事情。

然后，在运行时，根据您的设备将模板添加到 body 和 head 标签。不要引入额外的头部和身体标签，因为它不是这样工作的，你需要有一个单一的身体/头部......

此外，您可能需要考虑采用响应式设计...

# .net - 控制并行执行的核心数

> ID：11179533
> 
> 赞同：4
> 
> 时间：2012-06-24T17:15:26.127
> 
> 标签：.net, ncrunch

我已经安装了 NCrunch，它是一个用于（除其他外）并行测试执行的工具。它提供了两个设置 MaxNumberOfUsedCores 和 MaxNumberOfUsedThreads。第一个设置看起来很有趣。我不记得任何允许控制用于执行代码的内核的 .NET 方法。那么问题是怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T03:46:25.417

你试过[`ProcessThread.ProcessorAffinity`](http://msdn.microsoft.com/en-us/library/system.diagnostics.processthread.processoraffinity.aspx)吗？`ProcessorAffinity` **将每个处理器表示为一个位**。位 0 代表处理器 1，位 1 代表处理器 2，依此类推。例如：

```
var currectProcess = System.Diagnostics.Process.GetCurrentProcess();

foreach(System.Diagnostics.ProcessThread thread in currectProcess.Threads) 
{ 
    // this could give you something similar to MaxNumberOfUsedCores 
    thread.ProcessorAffinity = (IntPtr)0x0007; // Valid processors: 1, 2, or 3
} 
```

现在我在 NCrunch 进行了以下配置，这看起来与之前的 c# 示例非常相似：

*   分配给 NCrunch 的 CPU 内核：0、1、2
*   分配给 Visual Studio 的 CPU 内核：3

但是只有 NCrunch @remco-mulder 的作者可以告诉我们，这是真的还是假的。

顺便说一句：ReSharper 具有类似的选项来控制单元测试的并行运行线程数。

# android - 在 USB 连接的设备上调试

> ID：11179538
> 
> 赞同：1
> 
> 时间：2012-06-24T17:15:59.257
> 
> 标签：android

我正在尝试调试与几个不同索尼平板电脑的 USB 连接（特别是 P，它被列为支持）。我可以在智能手机上调试，但是当我尝试在 Eclipse 中运行我的应用程序时，平板电脑没有显示为连接的设备。我检查了平板电脑的设置有 Applications->Unknown sources 和 Applications->Development->USB Debugging

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T18:13:17.930

这是一个相当普遍的问题。您基本上没有 USB 调试所需的驱动程序。

我必须通过几种不同的方式获取手机驱动程序。您应该尝试的第一种方法是进入 Android SDK 和 AVD 管理器并下载 Google USB 驱动程序调试包。

这可能会或可能不会为您提供所需的驱动程序。如果没有，您将不得不做两件事之一。一、将设备详细信息添加到刚刚下载的驱动文件中。通常，这些将发布在讨论您的平板电脑/手机类型的论坛/板上。其次，您可以从其他来源（如 Tab/Phone 制造商）下载不同的驱动程序。

[这里](http://www.youtube.com/watch?v=TGojjF3eETo)有一段 Youtube 视频如何安装 Sony Tablet S & P

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T21:43:15.670

如果您无法为您的平板电脑获得合适的驱动程序，您可以尝试通过网络使用 adb。

1.  将您的设备连接到 wifi 以及您的计算机。
2.  在 Options for Developers 中打开 ADB over network（可能某些 ROM 不支持它）。最终，您可以使用平板电脑上的特定命令启用此功能。
3.  在您的计算机上运行终端并使用：`adb connect <ip>:<port>`where`<ip>`指的是平板电脑的 IP，`<port>`指的是 adb 正在侦听的端口（通常为 5555）。
4.  运行`adb devices`以验证设备是否已连接

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T20:25:15.743

或者您正在开发的应用程序将目标设置为高于平板电脑支持的目标。然后它也不会出现在 AVD 管理器中。

# jquery - Jquery $.getJSON 在 IE 中不起作用 在其他浏览器中也能正常工作

> ID：11179547
> 
> 赞同：0
> 
> 时间：2012-06-24T17:17:52.690
> 
> 标签：jquery, json, internet-explorer

> **可能重复：**
> [为跨域适配 ajax](https://stackoverflow.com/questions/6640633/adapt-ajax-for-crossdomain)

我正在使用以下代码从 spring webservice 读取 json 数据。

```
$.getJSON('http://localhost:8080/mobile-services/rest/languages/',
function(data) 
{
    $("#lang_1").html(data.languages[0].language);
    $("#lang_2").html(data.languages[1].language);
    $("#lang_3").html(data.languages[2].language); 
}); 
```

上面的代码片段在 Firefox 和 chrome 中运行良好。它在 Internet Explorer 中不起作用。

我使用 tomcat 作为 web 服务器和 spring 3.0 rest webservices 来生成 JSON 响应。

请建议。

# css - 为什么我的列不能正确对齐？

> ID：11179548
> 
> 赞同：0
> 
> 时间：2012-06-24T17:18:00.783
> 
> 标签：css, html

我想在我正在制作的这个网页的底部有两列，但它们彼此重叠而不是彼此相邻。我究竟做错了什么？

这是html：

```
<!doctype html>
<html>
<head>
<meta charset=utf-8">
<title>Untitled Document</title>
</style>
<style type="text/css">
@import url("adobeIndex.css");
</style>
</head>

<body>
<div id="container">
<div id="banner">Content for  id "banner" Goes Here</div>
<div id="left-text">Content for  id "left-text" Goes Here</div>
<div id="1-left-column">Content for  id "1-left-column" Goes Here </div>
<div id="1-right-column"> Content for id "1-right-column" Goes Here</div>
</div>
</body>
</html> 
```

和CSS：

```
 @charset "utf-8";
/* CSS Document */

#container {
width:968px;
background: #00F;
margin:auto;
padding-left:10px;
padding-right:10px;
overflow:hidden;
 }

#left-text {
 width:300px;
 height:400px;
 margin-top:20px;
 margin-bottom:20px;
}

#1-left-column, #1-right-column {
width: 464px;
float: left;
}
#1-right-column {
margin-left: 20px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T17:28:17.387

不要以数字开头你的 id 名称，使用`left-column`and`right-column`或`one-left-column`and`one-right-column`代替

# batch-file - 将参数传递给 .bat 脚本

> ID：11179549
> 
> 赞同：1
> 
> 时间：2012-06-24T17:18:02.423
> 
> 标签：batch-file

我有一个`.bat`文件，它用里面的变量做一些事情。我注意到一个奇怪的问题。

在该文件的底部，我有该行：

```
START _mz3_creator.bat %book_name%,%pg_count%,%pg_width%,%pg_height%,%pg_format%,%scale%,%jpg_q_l%,%jpg_q_h%,%res_px_l%,%res_px_h%,%book_type%,%zoomminscale%,%zoommaxscale%,%zoomsnap%,%zoomsteps%,%zoominit%,%maxloaded%,%pagethickness%,%maxthickness%,%thumbscale%,%logo_pos%,%settings%,%plugin_list%,%qualitycontrol%,%centercovers%,%cornerhint%,%pageoffset%,%dragrange%,%searchmethod%,%shadows%,%searchclear%,%startpage%,%version_name%,%make_pg%,%parameter_list%,%thumbloadtext%,%custom_webaddress%,%bookmark_title%,%make_what%,%logo_width%,%logo_height%,%page_type%,%side_bar%,%lang_list%,%hi_res_type%,%language%,%gallery_active%, %bookmark_type%,%thumbloadtextsize%,%elementsfadein%,%thumbs_fetch%, %bgcolor% 
```

（我为该文件传递了 52 个参数）

现在一切正常，该`_mz3_creator.bat`文件执行良好并且完成了它的工作。

但是，我想知道这些变量的值是什么，所以我使用了

```
ECHO START _mz3_creator.bat %book_name%, .......... etc 
```

这就是问题所在 - 在我使用`ECHO`命令后，我复制了输出：

```
START _mz3_creator.bat "quick",14,816,1056,US,ž,40,90,36,96,pdf,0.25,4.0,"0.25,0.5, 0.75, 1.0, 1.5, 2.0, 3.0, 4.0",2,0,32,0.2,40,0.25,"pw-w,ph-h-60","true, false, false, false, false","options,zoom",true,true,false,0,30,client,0.3,false,1,"pdf",y,"ž","please wait","http://stackoverflow.com",n,m,165,45,b,n,"ž",jpg,en,0,"u",12,false,0,"ž" 
```

并将其粘贴到一个空白`.bat`文件中，执行后我看到一些错误。

为什么 ？

我想在我复制它们之后变量格式有问题。有任何想法吗 ？

## 编辑

在我原来的 .bat 文件中，我看到了那行

```
SET scale=0
...
SET scale="%scale%"
SET scale=%scale:"=%
IF §%scale%==§ SET scale=§
IF %scale%==0 SET scale=§ 
```

然后在输出中我看到`ž`而不是`§`. 我认为它被视为`NULL`价值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T20:08:01.113

打扰一下。我想我不明白你的问题是什么（特别是当你说“现在一切正常，该`_mz3_creator.bat`文件执行良好并且它完成了它的工作”。

除此之外，我认为您应该注意以下几点：

*   批处理文件的参数用于执行具有不同*未知*值的文件，或者具有需要与原始调用文件的值分开的值。我想`_mz3_creator.bat`提取这 52 个参数是一项艰巨的工作（也许在一个带有`shift`命令的复杂循环中？）。您必须知道，当`_mz3_creator.bat`启动时，它可以访问调用程序的相同的 52 个变量和值，因此所有这些工作都是完全没有必要的（至少，从我的角度来看）。

*   当需要单独的执行线程时使用启动命令。我不知道是不是这样；否则该`start`命令是不必要的（一个`call`命令就足够了）。

*   如果你想避免`_mz3_creator.bat`在调用程序中修改变量值必须保持不变，只需`setlocal`在开头插入一个命令。

我希望它有所帮助。

安东尼奥

# jquery - 在 Ajax 进程之后隐藏响应

> ID：11179551
> 
> 赞同：1
> 
> 时间：2012-06-24T17:18:07.203
> 
> 标签：jquery, ajax, jquery-mobile

在第一个 Ajax 进程之后，我想在用户再次单击文本字段时隐藏答案。我找不到正确的语法。你可以帮帮我吗？

这是我的简化代码...

```
$('#address').keyup(function () 
{
    $('#check-address').hide();
}); 
$('#address').change(function () 
{
    $('#check-address').hide();
    $('#check-address').listview('refresh');
    $.mobile.showPageLoadingMsg();
    $.ajax({
    ...
        $('#check-address').show();
        $('#check-address').html(response.correct);
        $('#check-address').listview('refresh');
    ...
    });
}); 
```

编辑

这里有更多代码...

```
$('#address').keyup(function () 
{
    $('#check-address').hide();
}); 
$('#address').change(function () 
{
    $('#check-address').hide();
    $('#check-address').listview('refresh');
    $.mobile.showPageLoadingMsg();
    $.ajax({
        type: 'POST',               
        data: 'address=' + $('#address').val(),
        //data: 'address=' + $.trim($('#address').val()),
        url: 'process-address.php',
        dataType: 'json',
        success: function(response) 
        {
            $.mobile.hidePageLoadingMsg();
            if (response.result == 1) 
            {
                $('#check-address').show();
                $('#check-address').html(response.correct);
                $('#check-address').listview('refresh');
                $('#submit').button('enable');
            }
            elseif 
            {
                /***/
            }
        }
    });
}); 
```

感谢您的精彩解释。:)

干杯，

文森特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T17:24:32.670

在 ajax 响应中附加点击事件处理程序

```
$.ajax({
    ...
        $('#check-address').show();
        $('#check-address').html(response.correct);
        $('#check-address').listview('refresh');
         //bind the click handler here to what ever you want to hide probably you can use .one
    ...
    }); 
```

编辑

> 当用户再次单击文本字段时隐藏答案。

我假设您的意思是任何文本字段？

```
 $.ajax({
        ...
            $('#check-address').show();
            $('#check-address').html(response.correct);
            $('#check-address').listview('refresh');
            $(":text").click(function(){$("#answer").hide();});
        ...
        }); 
```

# jquery - twitter bootstrap 使用 tooltip 来遵守 html5

> ID：11179553
> 
> 赞同：1
> 
> 时间：2012-06-24T17:18:42.493
> 
> 标签：jquery, html, twitter-bootstrap

我正在使用工具提示，它运行良好，但由于 rel='tooltip' 不是正确的值，我的 html 似乎没有得到正确验证。

所以，我改变了我的代码如下

```
<a href="#" data-tooltip="tooltip" title="under construction" class="line-through tooltip-flag">Blog</a> 
```

和我的javascript如下

```
$("a[data-tooltip=tooltip]").tooltip(); 
```

但这不起作用，当我试图强制它时 $("a[data-tooltip=tooltip]").tooltip('show'); 我有一个js错误。所以，我假设 tooltip.js 需要查看 rel='tooltip' 字段。所以，我用下面的代码替换了它

```
$(document).ready(function() {

    // initialize all tooltips
    $("[data-tooltip=tooltip]").attr('rel', 'tooltip');
    $("[data-tooltip=tooltip]").queue(function(){
        $("a[data-tooltip=tooltip]").tooltip();
        $(this).dequeue();
    });

}); 
```

但仍然无法让工具提示起作用，有什么想法吗？

更新：下面是 JS 错误

```
data[option] is not a function
[Break On This Error]   

if (typeof option == 'string') data[option]() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T17:58:12.840

此错误是因为您正在覆盖引导工具提示的内部实例数据。使用其他任何东西都应该有效：

`data-my-tooltip="something"`

**不使用：**

`data-tooltip="something"`

这就是说，你根本不需要`data`or `rel`。您可以简单地给链接一个类`class="this-is-a-tooltip"`，然后调用`$(".this-is-a-tooltip").tooltip()`

# javascript - jQuery event.which 在 Enter 键按下时返回 13

> ID：11179556
> 
> 赞同：0
> 
> 时间：2012-06-24T17:18:56.797
> 
> 标签：javascript, jquery, line-breaks

为什么 event.which 不返回 13 (CR) 或 10 (LF) 取决于操作系统？

```
$('#something').on('keypress', function (event) {
  switch (event.which) {
  case 13:
    ...
    break;
  }    
}); 
```

**更新**

我知道回车等于 ASCII 码中的 13。但是为什么回车对所有操作系统都是通用的，但在文本中**产生不同的输出**（即 LF、CR、CR LF）？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-24T17:22:35.947

因为那是返回的ASCII码...

桌子：

![在此处输入图像描述](../Images/0fafca2828985df0c49c97fe9e2e5b84.png)

看**13**号：

> **13**     015 0D 00001101 CR     `&#013;`     **回车**

读这个：

> 表示换行符的实际代码因操作系统而异，这在具有不同换行符表示的系统之间交换文本文件时可能是一个问题。

无论使用哪种操作系统，固定价值，让我们的生活更轻松，让我们专注于我们需要做的真正问题。

# objective-c - 在 NSManagedObjectContext 后台线程中解析和“不同上下文”的问题

> ID：11179558
> 
> 赞同：1
> 
> 时间：2012-06-24T17:19:03.037
> 
> 标签：objective-c, core-data, ios5, nsmanagedobject, uimanageddocument

我正在尝试解析 XML 文档并将其数据存储在使用**后台**队列的核心数据存储中。我正在使用 iOS 5 中引入的新的嵌套 UIManagedObjectContext 概念。

我为我的 NSManagedObject 公司添加了一个新类别，该类别处理公司特定数据的解析：

```
- (void)parseAttributesFrom:(NSString*)xmlStr 
             inManagedObjectContext:(NSManagedObjectContext*)managedObjectContext 
  {
  NSManagedObjectContext * context = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSPrivateQueueConcurrencyType];

  context.parentContext = self.managedObjectContext;
  [context performBlock:^{

                IBCompany *company = self;
                [company setValue:[[[document.root childNamed:@"CoIDs"] childWithAttribute:@"Type" value:@"CompanyName"] value] forKey:@"companyName"];
            ... 
```

这就是我调用此方法的方式：`[company parseAttributesFrom:xmlStr inManagedObjectContext:self.managedDocument.managedObjectContext];` 请注意，我的问题没有改变，即使我将托管对象上下文作为参数传递给该方法。

当我运行代码时，它会在我设置公司的年度期间崩溃，并显示错误消息 NSInvalidArgumentException: `'Illegal attempt to establish a relationship 'company' between objects in different contexts (source = <IBEstPeriod: ...`：

```
IBEstPeriod *annualPeriod = [NSEntityDescription insertNewObjectForEntityForName:@"IBEstPeriod" inManagedObjectContext:context];
[annualPeriod setCompany:company]; 
```

当代码以相同的背景思想运行时，我很难理解为什么错误应该与**不同的上下文相关。**我将不胜感激任何帮助！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T21:46:51.780

我认为，原因在于`IBCompany *company = self;`你`context`通过了，然后你在另一个上下文中设置了新的连接。

这就是原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T06:17:32.933

你不能这样做：

```
context.parentContext = self.managedObjectContext; 
```

如果您在此处使用 UIManagedDocument：

```
[company parseAttributesFrom:xmlStr inManagedObjectContext:self.managedDocument.managedObjectContext]; 
```

这是因为 UIManagedDocument 已经使用了嵌套上下文，并且 self.managedDocument.managedObjectContext 已经设置了它的父上下文。现在你正在把它换掉，这样做你会破坏事情。

这是来自[UIManagedDocument 类参考](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIManagedDocument_Class/Reference/Reference.html)的引用。

> 为了支持异步数据写入，Core Data 实际上使用了一对嵌套的托管对象上下文。父上下文在私有线程上创建，子上下文在主线程上创建。您从 managedObjectContext 属性中获取子上下文。

# c - 从用户模式增加线程量

> ID：11179563
> 
> 赞同：0
> 
> 时间：2012-06-24T17:19:29.177
> 
> 标签：c, linux, kernel

在 Linux 内核 3.0+ 上是否可以从用户模式增加线程的数量？如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T17:45:07.293

我怀疑这是可能的。我很快找到了这个页面（[http://www.javamex.com/tutorials/threads/thread_scheduling_2.shtml](http://www.javamex.com/tutorials/threads/thread_scheduling_2.shtml)），它表明线程的量子长度无论如何都是可变的，并且受执行环境的许多属性的影响。

我想如果你真的需要它应该可以编写一个改变它的内核模块，但是你正在进入痛苦的领域。

你在做什么需要更长的量子长度？也许有另一种方法。

# html - 模糊的导航栏

> ID：11179567
> 
> 赞同：0
> 
> 时间：2012-06-24T17:20:10.690
> 
> 标签：html, css, blur

在您将鼠标悬停在图标上之前，我的导航栏应该是清晰的。然后所有其他图标都应该模糊，但此时所有图标都开始模糊。我不知道该怎么做。 [http://dl.dropbox.com/u/13722201/Dorset%20Designs/index.html](http://dl.dropbox.com/u/13722201/Dorset%20Designs/index.html)

我相信您也可以查看 css 源代码，如果不是生病的话。 [http://dl.dropbox.com/u/13722201/Dorset%20Designs/main.css](http://dl.dropbox.com/u/13722201/Dorset%20Designs/main.css)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T17:37:57.123

您可以使用 CSS3（有一些浏览器限制）和 text-shadow + 过渡来做到这一点

[http://jsfiddle.net/rlemon/sNQsy/](http://jsfiddle.net/rlemon/sNQsy/)这是一个快速演示（这不会是 100% 跨浏览器 .. 例如，我会让你弄清楚如何解决这个问题）。

这是源代码。

html

```
<ul class="nav">
<li><a href="#">link one</a></li>
<li><a href="#">link two</a></li>
<li><a href="#">link three</a></li>
<li><a href="#">link four</a></li>
<li><a href="#">link five</a></li>
</ul>​ 
```

css

```
.nav {
 list-style:none;    
}
.nav li {
 float: left;
 padding: 2px 12px;
}
.nav li a {
 -webkit-transition: all 0.3s ease;
 -moz-transition: all 0.3s ease;
 -o-transition: all 0.3s ease;
 color: transparent;
 text-shadow: 0 0 5px rgba(0,0,0,0.5);
}
.nav li:hover a {
 color: black;
 text-shadow: none; 
}​ 
```

[这](https://developer.mozilla.org/en/CSS/transition)是有关过渡的一些信息

[这里有一些关于 css 转换的更多读物，](https://developer.mozilla.org/en/CSS/transform) *它们会让你感兴趣*

这里[是](https://developer.mozilla.org/en/CSS/text-shadow)文字阴影

# iphone - 如何使用蓝牙在 iPhone 上设置两人游戏？

> ID：11179569
> 
> 赞同：0
> 
> 时间：2012-06-24T17:20:25.527
> 
> 标签：iphone, objective-c, bluetooth

我希望（在我的游戏中）有一个模式，两个人可以在两个不同的 iPhone 上并通过蓝牙连接互相玩......我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T17:23:53.000

[Apple 的 GameKit](http://developer.apple.com/library/ios/#DOCUMENTATION/NetworkingInternet/Conceptual/GameKit_Guide/Introduction/Introduction.html)将轻松为您做到这一点。您的代码将通过蓝牙和 WLAN 运行。

# c# - 如何在 C# 中从 StreamReader 获取文本

> ID：11179571
> 
> 赞同：2
> 
> 时间：2012-06-24T17:21:06.647
> 
> 标签：c#, .net, visual-studio-2010, winapp

```
private void button1_Click(object sender, EventArgs e)
{
    string url = urlTextBox.Text;
    HttpWebRequest request = (HttpWebRequest)WebRequest.Create(url);
    HttpWebResponse response = (HttpWebResponse)request.GetResponse();
    StreamReader sr = new StreamReader(response.GetResponseStream());
    richTextBox1.Text = sr.ReadToEnd();
    webBrowser1.DocumentText = richTextBox1.Text;
    HtmlElement htmlElement = webBrowser1.Document.GetElementById("name");
    string data = htmlElement.InnerText;
    label1.Text = data;
    sr.Close();
} 
```

我想在 php 文件的 id 元素中读取一些文本，但是在这一行有点问题

```
string data = htmlElement.InnerText; 
```

我从 Visual Studio 2010 收到了一些警告

> NullReferenceExpection 是未处理
> 的对象引用未设置为对象的实例。

有人可以帮我吗？谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T17:30:58.920

我相信这里的问题可能是控件*异步*`WebBrowser`加载文档。因此，当您尝试立即访问时，事情就会出错。*`webBrowser1.Document`*

 *`DocumentText`来自[MSDN](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.documenttext.aspx)的属性：

> 如果设置此属性的值，然后立即再次检索它，如果 WebBrowser 控件没有时间加载新内容，则检索到的值可能与设置的值不同。您可以在 DocumentCompleted 事件处理程序中检索新值。或者，您可以通过在循环中调用 Thread.Sleep 方法来阻止线程直到加载文档，直到 DocumentText 属性返回您最初设置的值。

另请参阅[DocumentCompleted](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.documentcompleted.aspx)事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T17:28:04.790

该方法很可能找不到 ID 为“name”的元素，因此变量 htmlElement 为空。检查您尝试获取的网站是否具有具有该 ID 的元素。*

# floating-point - 为什么无法将鼠标坐标作为浮点值获取？

> ID：11179572
> 
> 赞同：9
> 
> 时间：2012-06-24T17:21:23.740
> 
> 标签：floating-point, mouse

在我看来，在某些情况下，从鼠标读取更高精度的值可能很有用，而不仅仅是当前屏幕分辨率上的一系列离散像素坐标。显然在 GUI 中不需要这样做，但对于某些游戏来说，将其与屏幕分辨率相关联可能根本没有任何意义。

为什么我们被迫将其读取为像素坐标而不仅仅是原始模拟值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T17:23:36.883

至少在 Windows 下，对于支持高分辨率报告的设备，您可以检索更高分辨率的坐标，从 0 到 0xffff，而不是将鼠标位置转换为屏幕坐标

> 检索高分辨率点。在 x 和 y 坐标中，点的范围可以从 0 到 65,535 (0xFFFF)。这是由绝对坐标定位设备（如绘图板）提供的分辨率。

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms646259(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646259(v=vs.85).aspx)

根据这里的一个答案，可以使用非标准缩放在 Mac 上实现亚像素分辨率：

[OSX上的高分辨率和高帧率鼠标坐标？（或其他解决方案？）](https://stackoverflow.com/questions/6791262/high-resolution-and-high-framerate-mouse-coordinates-on-osx-or-other-solution)

该问题的答案均​​未被接受，但可能值得进一步调查。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-04-02T23:23:02.603

Windows 使用`WM_INPUT`and `WM_MOUSEMOVE`，以及 DirectInput 和 XInput；

默认情况下，它只支持`WM_MOUSEMOVE`完全基于整数的主 Windows GUI，但如果您要同时实现`WM_INPUT`和`WM_MOUSEMOVE`，您可以以亚像素精度移动鼠标光标。

一些程序显然会充分利用这一点，例如第一人称射击游戏、网络浏览器（缩放页面和滚动条）和图像编辑程序（例如 GIMP、Adobe Photoshop/Illustrator、Paint.NET 等... )

另外，让鼠标同时发送`WM_INPUT`和`WM_MOUSEMOVE`，并让 Windows shell 本身支持它，通常会使鼠标移动看起来更流畅；为了充分利用这一点，您可能需要修改鼠标光标在 Windows 中的工作方式，以便可以实现 ClearType 字体渲染的变体，使用有符号距离场和/或可缩放矢量图形来确定光标的边缘（这也可以允许其他视觉效果，例如适当的运动模糊、照明等）。

* * *

编辑：在事实发生近两年后，我才发现有人*在我生日那天更新了我帖子的格式。*厉害了，谢谢大佬

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T17:40:07.117

这取决于所使用的语言和环境。
例如，在 Pharo 或 Squeak smalltalk 下运行的 Morphic GUI 使用浮点数作为其坐标

这在此处[接受的答案](https://stackoverflow.com/questions/4070444/what-is-the-difference-between-a-morph-in-morphic-and-a-nsview-in-cocoa)中列出。

Morphic 最初是在[self中实现的](ftp://ftp.squeak.org/docs/Self-4.0-UI-Framework.pdf)

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2012-06-25T12:32:30.327

因为鼠标不提供模拟或浮点值。那已经是翻译了。

[编辑] 有人愿意评论 -1 吗？

# ruby-on-rails - 显示特定列中的内容

> ID：11179574
> 
> 赞同：0
> 
> 时间：2012-06-24T17:21:59.770
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord

首先，我是一个完全的 Rails 新手（希望学习 Rails 的前端人员），所以请多多包涵。

我正在制作一个简单的待办事项应用程序来帮助自己学习并遇到问题。我假设这是我想念的超级简单的东西，但就在这里。

在我的应用程序中，用户可以创建许多“process_lists”（基本上是要完成的任务列表）。他们还创建“项目”。每个项目都有一个与之关联的“process_list”。Process_lists 是可重用的，基本上是完成一个项目的一组步骤。一个流程列表可用于多个项目。我已经用名为“process_list_id”的列标记了项目的数据库表，以帮助进行关联。这是在用户创建项目时完成的。

现在是代码，这是我的项目控制器中的内容：

```
 def show
@project = Project.find(params[:id])
@project_process = ProcessList.where(:id =>  @project.process_list_id)

respond_to do |format|
  format.html # show.html.erb
  format.json { render json: @project }
end 
```

结尾

在我看来：

```
<%= @project_process.all %> 
```

^^ 这非常适合显示整行，如下所示：

> ProcessList id：6，名称：“Derp Derp Derp Derp”，步骤：nil，描述：“lasdjlsdjsadas”，created_at：“2012-06-22 16:21:41”，updated_at：“2012-06-22 16:21 :41", step1: "sjkdfldsjf", step2: "alkdfjdlfj", step3: "lakdfjdljf", step4: "", step5: "", step6: "", step7: "", step8: "", step9: " ", step10: "", step11: nil, step12: nil, step13: nil, step14: nil, step15: nil, step1_description: "klsdjfldskjf", step2_description: "sldjfldskjflsdkfjdls", step3_description: "lkdsfjdlkfjsd", step4_description: "", step5_description: "", step6_description: "", step7_description: "", step8_description: "", step9_description: "",step10_description: "", step11_description: nil, step12_description: nil, step13_description: nil, step14_description: nil, step15_description: nil>

现在我想做的是显示这一行中的某些列。例如“步骤 1”。这似乎很简单，但我已经尝试了很多事情，现在已经搜索了几个小时，但我无法弄清楚。任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T17:35:30.507

直接回答你的问题：

```
<%= @project_process.first.step1 %> 
```

这将打印出`step1`列的值，在您的情况下为“sjkdfldsjf”。

如果您`has_one :process_list`的 class 中有该行`Project`，那么您可以更轻松地分配`@project_process`变量：`@process_list = @process.process_list`. 您也可以放入`belongs_to :process`类`ProcessList`中，这样您就可以从列表对象访问进程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T19:21:51.727

我同意之前的回答，但是如果您想编写好的 Rails 代码，请阅读表之间的关联：

[http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html)

此外，我不喜欢您的 ProcessList 结构，如果您创建另外一个表：“Steps”并通过关联连接表“Steps”和“ProcessLists”，它看起来会更好。

阅读关联：has_many、has_one、has_many :through、belongs_to 等。这非常重要。

# iphone - 将 Facebook 与 iOS 应用程序集成时出现编译错误

> ID：11179578
> 
> 赞同：0
> 
> 时间：2012-06-24T17:22:35.383
> 
> 标签：iphone, ios, xcode

我一直在尝试将 Facebook 与我的应用程序集成以允许用户更新他们的状态，但是当我尝试构建时出现此错误：

> “命令 /Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin/gcc-4.2 失败，退出代码为 1”

我已按照[此](http://www.youtube.com/watch?v=EICTZ7UM4zs)YouTube 视频中的步骤进行操作，但他没有遇到任何问题。

我也得到了这个建议（可能是相关的）：

> /Users/Ben/Documents/Apps/Ball Game/MainWindow.xib:10:0 'Ball Game View Controller' 同时设置了 'View' 和 'NIB Name' 属性。不支持此配置。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T18:39:02.900

经过大量搜索后，我遇到了这个答案，这与我遇到的问题相同

[Xcode，重复符号_main](https://stackoverflow.com/questions/3380972/xcode-duplicate-symbol-main)

答案就在那里并且是正确的，然后我正在为 fb 添加资源

其他人偶然发现了这一点，我建议您查看您的资源库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T18:35:02.197

关于 NIB/xib 文件错误：当您在 xib 文件中包含控制器对象时，您可以在同一个文件中创建它们的视图（并将您创建的视图分配给`view`控制器的属性），或者您可以告诉控制器加载其从不同的 xib 文件查看。您可能希望`view`在同一个文件中分配，在这种情况下，将“NIB 名称”留空。

# ruby - 存根 http 请求以返回带有 Net::HTTPResponse 的 HTTPartyResponse

> ID：11179581
> 
> 赞同：10
> 
> 时间：2012-06-24T17:23:13.433
> 
> 标签：ruby, rspec, rspec2

我正在尝试编写一个 rspec 规范来测试我的逻辑是否能够处理具有状态代码 401 的特定 Net::HTTPResponse。当我使用 HTTParty 时，.get 将返回一个 HTTPartyResponse，我将检索Net::HTTPResponse 与 httparty_repsonse_object.response。

```
net_response_object = Net::HTTPResponse.new(1.1, 401, 'Forbidden')
#not sure what to do here? write a test double to return a net_response_object?
stub_request(:any, /hello.com/).to_return(a_http_party_response_object) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-14T01:42:22.623

我发现这是正确的方法

```
it 'will test this' do
   stub_request(:any, /hello.com/).to_return(:status => [401, "Forbidden"])
   ...
end 
```

HTTParty 应该解析模拟的 http 响应并返回一个 HTTPartyResponse。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-12T04:14:12.640

您可以使用[Webmock](https://github.com/bblimke/webmock/)，它支持模拟 HTTParty 请求。

# php - 加密 Jar 文件，更改数据，再次加密并保存

> ID：11179587
> 
> 赞同：0
> 
> 时间：2012-06-24T17:23:58.347
> 
> 标签：php, encryption, jar, aes

我需要制作一个 php 脚本来执行以下序列：

*   1) 用户输入一个密钥，我们称之为 $user_key
*   2）读取默认文件内容（file_get_contents保存在$data中）
*   3) 使用 3 个随机密钥加密 AES 128 中的 $data（保存在 $data 中）
*   4) 在 $data 末尾连接这 3 个键
*   5）填充数据
*   6) 用用户的密钥加密 $data
*   7) 将 $data 写入唯一文件

如果我只执行第 1、2、4、5、6 和 7 部分，它可以工作（Java 解密）。如果我用随机密钥加密文件，它根本不起作用（Java 解密不起作用）。

我在 Php 中做错了什么（比如缺少填充或其他东西）吗？

这是我使用的代码。我已经在第 1 到第 3 行标记了那些使脚本无法正常运行的部分。

```
$data = file_get_contents('default_file.jar');

// Generate 3 AES keys
$ramdom_key_1 = randomAESKey();
$ramdom_key_2 = randomAESKey();
$ramdom_key_3 = randomAESKey();

// Encrypt three times the raw data with the user key
$data = AESEncrypt(pad($data, 16), $ramdom_key_1);      // LINE 1
$data = AESEncrypt($data, $ramdom_key_2);               // LINE 2
$data = AESEncrypt($data, $ramdom_key_3);               // LINE 3

// Add the 3 keys to the data raw
$data .= $ramdom_key_3 . $ramdom_key_2 . $ramdom_key_1;

// Final encryption with the user's key
$data = AESEncrypt(pad($data, 16), $user_key);

// Write the raw data to an unique file
file_put_contents('new_file.jar', $data); 
```

这是我解密文件的Java代码：

```
byte[] content = download(url);
content = Crypto.decrypt(content, user_key);

String content = new String(data);
String keys = content.substring(content.length() - 48, content.length());
String[] keys = new String[] { keys.substring(0, 16), keys.substring(16, 32), keys.substring(32, 48) };

byte[] cleared_content = new byte[content.length - 48];
System.arraycopy(content, 0, cleared_content, 0, content.length - 48);

// For each keys, decrypt the file data
for (String key : keys)
{
    cleared_content = Crypto.decrypt(cleared_content, key.getBytes());
}

return cleared_content; 
```

我的加密类看起来像这样（只是其中的一小部分）：

```
public static byte[] decrypt(byte[] input)
{
    try
    {
        SecretKeySpec skey = new SecretKeySpec(KEY.getBytes(), "AES");
        Cipher cipher = Cipher.getInstance("AES/ECB/PKCS5Padding");
        cipher.init(Cipher.DECRYPT_MODE, skey);
        return cipher.doFinal(input);
    }
    catch (Exception e) {}
    return input;
} 
```

由于密钥以 desc 顺序存储，因此我只需要像这样执行解密即可。

快速编辑以在 php 中显示我的 pad 功能：

```
function pad($data, $blocksize)
{ 
    $pad = $blocksize - (strlen($data) % $blocksize); 
    return $data . str_repeat(chr($pad), $pad); 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T16:08:08.487

问题解决了。感谢[owlstead](https://stackoverflow.com/users/589259/owlstead)。

我变了

```
$data = AESEncrypt(pad($data, 16), $ramdom_key_1);      // LINE 1
$data = AESEncrypt($data, $ramdom_key_2);               // LINE 2
$data = AESEncrypt($data, $ramdom_key_3);               // LINE 3 
```

至

```
$data = AESEncrypt(pad($data, 16), $ramdom_key_1);      // LINE 1
$data = AESEncrypt(pad($data, 16), $ramdom_key_2);      // LINE 2
$data = AESEncrypt(pad($data, 16), $ramdom_key_3);      // LINE 3 
```

# c# - 如何确定将哪个端口分配给客户端？

> ID：11179588
> 
> 赞同：0
> 
> 时间：2012-06-24T17:24:14.010
> 
> 标签：c#, .net, wcf

假设我有一个在远程服务器上监听的 wcf 服务。客户端能否在连接之前知道操作系统将分配哪个端口？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T17:31:32.830

不，默认情况下不是……但是您可以通过使用 ServicePoint 的[BindIPEndPointDelegate](http://msdn.microsoft.com/en-us/library/system.net.bindipendpoint.aspx)属性来管理对该 uri 的请求：

```
var servicePoint=ServicePointManager.FindServicePoint(myServiceUri);
servicePoint.BindIPEndPointDelegate = (sp, remoteEndPoint, retryCount) =>
    new IPEndPoint(localEndpointDetailsGoHere) 
```

在这种情况下，您需要自己管理端口。

# ios - 保存在 iOS 绘画应用程序中

> ID：11179589
> 
> 赞同：0
> 
> 时间：2012-06-24T17:24:26.437
> 
> 标签：ios, xcode, save, nsuserdefaults, paint

在我的 iOS 应用程序中保存笔画时遇到了一些麻烦。我已经使用 NSUserDefaults 在我的应用程序中成功保存了文本，但我不确定保存图像是否以同样的方式工作，无论如何，这就是我所拥有的：

```
-(IBAction)saveImage:(id)sender
{
    UIImage *saveImage = drawImage.image;
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    [defaults setObject:saveImage forKey:@"image"];
    [defaults synchronize];
} 
```

每当我在我的应用程序 (saveImage) 中点击保存按钮时，Xcode 的输出都会显示 - `[NSUserDefaults setObject:forKey:]: Attempt to insert non-property value '<UIImage: 0x1f076ee0>' of class 'UIImage'`。

我不确定这意味着什么。任何帮助将不胜感激，因为我是 Xcode 和 Objective-C 的新手。谢谢你的帮助，-卡尔。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T17:26:46.253

您正在尝试将 a`UIImage`作为值保存在`NSUserDefaults`. 您需要做的是将其转换`UIImage`为`NSData`并保存。

```
-(IBAction)saveImage:(id)sender
{
    UIImage *saveImage = drawImage.image;

    NSData *imageData = [NSData dataWithData:UIImagePNGRepresentation(saveImage)];

    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    [defaults setObject:imageData forKey:@"image"];
    [defaults synchronize];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T17:30:09.437

`NSUserDefault`无法`UIImage`直接保存，但您可以将它们保存为`NSData`. 为此，先转换图像，然后保存

```
 NSData *imageData = UIImagePNGRepresentation(drawImage.image);
  NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
  [defaults setObject:imageData forKey:@"imageData"];
  [defaults synchronize]; 
```

要将 NSData 转换回 UIImage，请使用 imageWithData：例如

```
 UIImage *myImage = [UIImage imageWithData:imageData]; 
```

# c++ - sizeof 是在编译时还是运行时评估？

> ID：11179592
> 
> 赞同：12
> 
> 时间：2012-06-24T17:24:29.993
> 
> 标签：c++, c, operators

`sizeof`我对运营商的评估时间感到困惑。
sizeof 运算符何时被评估？

它的评估时间（编译时或运行时）是否取决于语言（C？C++？）？

我们可以`sizeof`在 C++ 运行时创建的对象的情况下使用吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-24T17:25:10.493

在几乎所有情况下，`sizeof`都基于静态类型信息（基本上在编译时）进行评估。

一个例外（我认为是唯一一个）是 C99 的可变长度数组 (VLA)。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-24T17:31:55.703

几乎总是编译时间。但是您可能会对以下示例感兴趣：

```
char c[100];
sizeof(c); // 100

char* d = malloc(100);
sizeof(d); //probably 4 or 8\.  tells you the size of the pointer!

BaseClass* b = new DerivedClass();
sizeof(b); //probably 4 or 8 as above.

void foo(char[100] x) {
    sizeof(x); //probably 4 or 8\.  I hate this.  Don't use this style for this reason.
}

struct Foo {
    char a[100];
    char b[200];
};

sizeof(struct Foo); //probably 300\.  Technically architecture dependent but it will be
//the # of bytes the compiler needs to make a Foo.

struct Foo foo;
sizeof(foo); //same as sizeof(struct Foo)

struct Foo* fooP;
sizeof(fooP); //probably 4 or 8

class ForwardDeclaredClass;

ForwardDeclaredClass* p;
sizeof(p); //4 or 8
ForwardDeclaredClass fdc; //compile time error.  Compiler
//doesn't know how many bytes to allocate

sizeof(ForwardDeclaredClass); //compile time error, same reason 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-05T18:22:36.040

在 C 中，它并不总是编译时操作，如下代码所示：

```
#include <stdio.h>
#include <stdint.h>

int main(void) {
    int x;
    scanf("%d", &x);   // Value X is not known until run-time

    uint16_t data[x];  // VLA: has flexible size depending on input

    printf("Value x is: %d\nSize is: %zu\n", x, sizeof(data));
    // sizeof produces proper results at runtime

    return 0;
} 
```

`data`直到运行时才知道数组的大小，并且 sizeof 运算符仍然可以正常工作。

这是 C++ 选择不支持 VLA 的几个原因之一。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-06-18T18:22:03.047

编译时间，因为它是在编译时计算大小。“编译时间”是您构建代码的时间 - 编译器将您的源代码转换为 IL 的时间。

# php - 将文件 csv 上传到 mysql 时出错

> ID：11179594
> 
> 赞同：0
> 
> 时间：2012-06-24T17:24:44.533
> 
> 标签：php, mysql, file-upload

我想将 csv 文件导入 mysql 数据库。上传成功。但没有什么可导入的。我认为我在 sql 查询中错了。这是我的查询：

```
mysql_query("LOAD DATA LOCAL INFILE '$filename' INTO TABLE CityBlocks FIELDS TERMINATED BY ',' ENCLOSED BY '\"' ESCAPED BY '\\' LINES TERMINATED BY '\r\n' IGNORE 2 LINES (startIpNum, endIpNum, locId)") or die (mysql_error()); 
```

错误是：

您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 2 行的 '' IGNORE 2 LINES (startIpNum, endIpNum, locId)' 附近使用正确的语法

你能告诉我我的错误在哪里以及如何解决这个问题。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T17:28:22.993

你似乎有一个额外的 " 这里：

用'\"'括起来

对不起，我的错，它们被“包围，所以用\转义是正确的。

* * *

以“\r\n”结尾的行

您是否尝试过将此行修改为仅使用“\n”：

以“\n”结尾的行

也尽量不要使用 LOCAL 关键字

# c# - 用较小的值实现缓动函数

> ID：11179597
> 
> 赞同：0
> 
> 时间：2012-06-24T17:25:35.517
> 
> 标签：c#

我在 C# 中使用了一些缓动函数，它们给出了`Ease In`效果`Ease out`。但是，我试图通过这些缓动函数实现的目标并没有产生明显的效果。

例如：

```
int x=2;
while(x<200)
SetSomething(x = EaseIn(x, 1, EasingType.Quadratic)); 
```

SetSomething 的执行速度并没有给我们足够的时间来注意到`SetSomething`. 例如：值从 2 -> 4 -> 16 -> 256 开始

我试图实现以下类型的图表，但值较小（不大于 200）： [http ://theinstructionlimit.com/wp-content/uploads/2009/07/easing.png](http://theinstructionlimit.com/wp-content/uploads/2009/07/easing.png)

缓动函数的实现在这里：[http ://theinstructionlimit.com/wp-content/uploads/2009/07/Easing.cs](http://theinstructionlimit.com/wp-content/uploads/2009/07/Easing.cs)

即使我在小于 200 的较小范围内得到二次值，我也需要在循环的每次迭代中至少有一个非常小的类似暂停的效果，以注意到效果缓和。这个小暂停也可以遵循二次曲线（即对于缓动：暂停持续时间可能会更多，然后暂停持续时间更短）

我应该怎么做？如何在 < 200 的范围内获得二次图，并且在每次迭代中都有这种暂停效果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T20:00:21.467

您将 Easing 的结果视为 new `x`。这很奇怪！

另外，`x`应该是`linearStep`. `linearStep`是一个`double`，但你`x`是一个`int`。制作您`x`的 a`double`并将其增加适当的数量。

```
const double step = 1.5; // Choose an appropriate value here!

for (double x = 2.0; x <= 200.0; x += step) {
    double y = Ease(x, 1.0f, EasingType.Quadratic);
    SetSomething(y); 
} 
```

* * *

**更新**

你的设计非常程序化。我更喜欢面向对象的方法。`switch`-语句通常可以用多态（面向对象）方法代替。

```
public abstract class Curve 
{
    public float EaseIn(double s);
    public float EaseOut(double s);
    public static float EaseInOut(double s);
}

public class StepCurve : Curve
{
    public override float EaseIn(double s)
    {
        return s < 0.5 ? 0.0f : 1.0f;
    }

    public override float EaseOut(double s)
    {
        return s < 0.5 ? 0.0f : 1.0f;
    }

    public override float EaseInOut(double s)
    {
        return s < 0.5 ? 0.0f : 1.0f;
    }
}

public class LinearCurve : Curve
{
    public override float EaseIn(double s)
    {
        return (float)s;
    }

    public override float EaseOut(double s)
    {
        return (float)s;
    }

    public override float EaseInOut(double s)
    {
        return (float)s;
    }
}

public class SineCurve : Curve
{
    public override float EaseIn(double s)
    {
        return (float)Math.Sin(s * MathHelper.HalfPi - MathHelper.HalfPi) + 1;
    }

    public override float EaseOut(double s)
    {
        return (float)Math.Sin(s * MathHelper.HalfPi);
    }

    public override float EaseInOut(double s)
    {
        return (float)(Math.Sin(s * MathHelper.Pi - MathHelper.HalfPi) + 1) / 2;
    }
}

public class PowerCurve : Curve
{
    int _power;

    public PowerCurve(int power)
    {
        _power = power;
    }

    public override float EaseIn(double s)
    {
        return (float)Math.Pow(s, _power);
    }

    public override float EaseOut(double s)
    {
        var sign = _power % 2 == 0 ? -1 : 1;
        return (float)(sign * (Math.Pow(s - 1, _power) + sign));
    }

    public override float EaseInOut(double s)
    {
        s *= 2;
        if (s < 1) return EaseIn(s, _power) / 2;
        var sign = _power % 2 == 0 ? -1 : 1;
        return (float)(sign / 2.0 * (Math.Pow(s - 2, _power) + sign * 2));

    }
} 
```

使用这些定义，您可以将`Ease`方法更改为

```
public static float Ease(double linearStep, float acceleration, Curve curve)
{
    float easedStep = acceleration > 0 ? curve.EaseIn(linearStep) :
                      acceleration < 0 ? curve.EaseOut(linearStep) :
                      (float)linearStep;
    return MathHelper.Lerp(linearStep, easedStep, Math.Abs(acceleration));
} 
```

您可以使用`switch`-statements 完全删除方法。你会画一条三次曲线

```
var curve = new PowerCurve(3);
for (double x = 2.0; x <= 200.0; x += step) {
    double y = Ease(x, 1.0f, curve);
    SetSomething(y); 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T17:40:42.863

我能想到 3 种方法可以帮助你做任何你想做的事情（我不是 100% 确定我完全理解你想要达到的目标）:)

1.  在绘图时使用更大的间隔然后缩放。例如，不要让 x 在 0-200 范围内，而是将其设置在 0-200 00 范围内，然后在绘图时按 0,01 缩放。

2.  使用睡眠功能。sleep 函数将暂停当前线程的执行给定的时间。

3.  使用计时器。我建议使用计时器线程，但您也可以使用 winform 计时器。这是不确定您给出的示例中几乎恒定的 FPS 的最简单方法。

[http://msdn.microsoft.com/en-us/library/system.threading.thread.sleep(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/system.threading.thread.sleep(v=vs.71).aspx)

[http://msdn.microsoft.com/en-us/library/system.threading.timer.aspx](http://msdn.microsoft.com/en-us/library/system.threading.timer.aspx)

# android - 将 Activity 视为单例对我来说是否安全

> ID：11179599
> 
> 赞同：4
> 
> 时间：2012-06-24T17:25:43.057
> 
> 标签：android, design-patterns

大多数时候，在设计桌面应用程序时，为了方便起见，我喜欢将主应用程序设置为单例。我可以轻松访问应用程序的数据和方法，而无需到处传递主应用程序引用。

```
public class MainFrame extends javax.swing.JFrame {
    // Private constructor is sufficient to suppress unauthorized calls to the constructor
    private MainFrame()
    {
    }

    /**
     * MainFrameHolder is loaded on the first execution of Singleton.getInstance()
     * or the first access to MainFrameHolder.INSTANCE, not before.
     */
    private static class MainFrameHolder {
        private final static MainFrame INSTANCE = new MainFrame();
    }

    /**
     * Returns MainFrame as singleton.
     * 
     * @return MainFrame as singleton
     */
    public static MainFrame getInstance() {
        return MainFrameHolder.INSTANCE;
    }
} 
```

* * *

但是，从 Android 平台的角度来看，我不再确定这样做是否正确/安全，因为我无法直接控制`MainActivity`. `MainActivity`我将拥有的是

*   启动模式将为`standard`.
*   创建实例的唯一时间`MainActivity`是用户点击应用程序图标时。意味着，启动的唯一方式是在 AndroidManifest.xml 的`<application>`标签中指定。内不应该有任何其他 Java 代码`MainActivity.apk`来启动`MainActivity`自身。

* * *

```
public class MainActivity extends Activity {
    public static MainActivity INSTANCE = null;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        assert(INSTANCE == null);
        INSTANCE = this;
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-24T17:43:49.133

如果您想要这样做的原因是因为您有一些初始化代码应该只在应用程序首次启动时运行一次，或者为了存储整个应用程序的共享数据，`onCreate()`那么子类的方法`Application`可能是一个更好的地方，因为Android 保证每个应用程序只存在其中一个。有关如何执行此操作的说明，请参阅[此链接。](https://stackoverflow.com/a/1945297/473637)

# ruby-on-rails - 如何为 Rails 控制台创建自定义方法？

> ID：11179609
> 
> 赞同：4
> 
> 时间：2012-06-24T17:27:02.870
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, irb, rails-console

当我在 Ubuntu 中长时间使用 Rails 控制台时，我定义了`clear`方法：

`def clear; system 'clear' end`

因此，当我的控制台变脏时，我唯一要做的就是键入`clear`，然后控制台就会被清除。

我想使用这个功能而不是每次都重新输入。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T17:40:33.183

把它放在`~/.irbrc`文件里就行了。每次运行`irb`或`rails console`. Rails 控制台只是`irb`加载了您的 Rails 应用程序环境。

在此处查找更多信息`irb`：[http ://ruby-doc.com/docs/ProgrammingRuby/html/irb.html#S2](http://ruby-doc.com/docs/ProgrammingRuby/html/irb.html#S2)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T17:39:00.547

把这个函数放到`~/.irbrc`

```
def clear
  system 'clear'
end 
```

然后当你运行 irb 时它就可用了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-20T16:13:50.677

如果您想在 rails-project-directory 的领域中定义控制台帮助程序，还有另一种有趣的方法：您可以扩展[`Rails::ConsoleMethods`](https://api.rubyonrails.org/classes/Rails/ConsoleMethods.html)-module，它包含众所周知且方便的控制台内容，例如,`app`等...这里是一种简单的方法：`helper``controller`

只需将一个模块添加到您的`lib`-directory 包含您的自定义控制台帮助程序并`Rails::ConsoleMethods`通过 mixin 前置应用它 - 例如：

```
# Extending Rails::ConsoleMethods with custom console helpers
module CustomConsoleHelpers

  # ** APP SPECIFIC CONSOLE UTILITIES ** #

  # User by login or last
  def u(login=nil)
    login ? User.find_by_login!(login) : User.last
  end

  # Fav test user to massage in the console
  def honk
    User.find_by_login!("Honk")
  end

  # ...

  # ** GENERAL CONSOLE UTILITIES ** #

  # Helper to open the source location of a specific 
  # method definition in your editor, e.g.:
  #
  #   show_source_for(User.first, :full_name)
  #
  # 'inspired' (aka copy pasta) by 'https://pragmaticstudio.com/tutorials/view-source-ruby-methods' 
  def show_source_for(object, method)
    location = object.method(method).source_location
    `code --goto #{location[0]}:#{location[1]}` if location
    location
  end

  # ...
end

require 'rails/console/helpers'
Rails::ConsoleMethods.send(:prepend, CustomConsoleHelpers) 
```

这对我来说就像一个魅力。这种方法（我没有测试）的进一步替代方法是将上面的内容放在初始化程序中（如[这里](https://selleo.com/til/posts/llq0l8t8cm-extend-ruby-on-rails-console-with-custom-methods)） - 或改为扩展- 例如像这样（在`Rails::ConsoleMethods`此处[和](https://www.dailysmarty.com/posts/how-to-add-rails-console-helper-methods)此处[找到](https://opensoul.org/2012/11/08/add-helper-methods-to-your-rails-console/)）：`config/application.rb`

```
console do
  require 'custom_console_helpers'
  Rails::ConsoleMethods.send :include, CustomConsoleHelpers
end 
```

# java - ksoap2-android信封的定制

> ID：11179610
> 
> 赞同：1
> 
> 时间：2012-06-24T17:27:23.117
> 
> 标签：java, android, soap, android-ksoap2, envelope

我有一个使用来自 ksoap2-android lib 的 SoapSerializationEnvelope 创建的信封的问题。我需要得到（服务器期望的）是：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:soa="http://agh.edu.pl/soa">
   <soapenv:Header/>
   <soapenv:Body>
      <soa:getCompanyById>
         <id>1</id>
      </soa:getCompanyById>
   </soapenv:Body>
</soapenv:Envelope> 
```

我实际得到的是：

```
<v:Envelope xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns:d="http://www.w3.org/2001/XMLSchema" xmlns:c="http://schemas.xmlsoap.org/soap/encoding/" xmlns:v="http://schemas.xmlsoap.org/soap/envelope/">
<v:Header />
<v:Body>
    <n0:getCompanyById id="o0" c:root="1" xmlns:n0="http://agh.edu.pl/soa">
        <id i:type="d:int">5</id>
    </n0:getCompanyById>
</v:Body>
</v:Envelope> 
```

我的 Java 代码：

```
SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);

        PropertyInfo id = new PropertyInfo();
        id.setName("id");
        id.setValue(5);
        id.setType(int.class);
        request.addProperty(id);

        SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
        envelope.setOutputSoapObject(request);      

        HttpTransportSE httpTransport = new HttpTransportSE(URL);
        httpTransport.debug = true;

        try {
            httpTransport.call(request.getNamespace() + "/" + request.getName(), envelope);
        } catch (Exception e)
        {
            System.out.println(httpTransport.requestDump);
            System.out.println(httpTransport.responseDump);
            System.out.println(e.getMessage());
        } 
```

我需要做的是将每个 v:something 更改为 soapenv:something 并将 n0:getCompanyById 更改为 soa:getCompanyById。任何的想法？提前致谢。氰酸

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T21:40:13.080

这些信封大多相同——它们只是使用不同的前缀。我建议使用 SoapUI 之类的东西：逐步将工作信封更改为您从代码中获得的内容。一旦事情变得糟糕，你就会知道是什么导致了问题。

根据我的经验， i:type="d:int" 也可能导致问题。

# jquery - 没有jquery UI的可拖动div不能很好地拖动

> ID：11179612
> 
> 赞同：1
> 
> 时间：2012-06-24T17:27:47.837
> 
> 标签：jquery, html, movable

我有这个代码：

***jQuery：***

```
var mouseDown=false;
var lastPositionX;
var lastPositionY;
var newX;
var newY;
var lastPositionLeft;
var lastPositionTop;
var newLeft;
var newTop;
    $("#insideMap").on("mousedown",function(){
        mouseDown=true;
        lastPositionX=e.pageX;
        lastPositionY=e.pageY;
    });
    $("#insideMap").on("mouseup",function(u){
        mouseDown=false;
    });
    $("#insideMap").on("mouseleave",function(){
        mouseDown=false;
    });
    $("#insideMap").on("mousemove",function(n){
        if (mouseDown){
            mouseDown = true; // mantain the boolean to prevent mouseleave trigger
            newX=n.pageX-lastPositionX;
            newY=n.pageY-lastPositionY;
            lastPositionLeft=$("#insideMap").position().left;
            lastPositionTop=$("#insideMap").position().top;
            newLeft=newX+lastPositionLeft;
            newTop=newY+lastPositionTop;
            $("#insideMap").css({"left":newLeft,"top":newTop});
            lastPositionX=n.pageX;
            lastPositionY=n.pageY;
        }
    }); 
```

***演示：http:*** [//jsfiddle.net/SkWeX/3/](http://jsfiddle.net/SkWeX/3/)

但是有些东西仍然很糟糕:(它不能很好地工作，它仍然滞后，你能帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T17:36:23.130

:) 浏览器有时想要拖动您的图像（bg），您需要防止这种情况！

## *[jsFiddle 演示](http://jsfiddle.net/roXon/SkWeX/6/)*

只需将其添加到`#insideMap`元素的 CSS 中：

```
-webkit-touch-callout: none;
-webkit-user-select: none;
-khtml-user-select: none;
-moz-user-select: none;
-ms-user-select: none;
user-select: none; 
```

这段代码就是你所需要的：

```
var mouseDown=false,
    posX   = 0,
    posY   = 0,
    innerX = 0,
    innerY = 0;

$("#insideMap").on("mousedown",function(e){
    innerX = e.pageX - $(this).offset().left;
    innerY = e.pageY - $(this).offset().top;
    mouseDown= true;
}).on("mouseup",function(){
    mouseDown=false;
});

$(document).on("mousemove",function(e){    
    if (mouseDown){
        var m = {  x: e.pageX-innerX,  y: e.pageY-innerY };        
        $('#insideMap').css({ left: m.x, top: m.y });       
    }
}); 
```

一些解释：

您的代码在**任何**已注册的鼠标移动（并且有很多）上都很慢，因为您正在重新计算元素位置。错误的。

*   我在 click vars 上抓取元素内的鼠标位置，`innerX`然后`innerX`
*   在 mousemove 上，我只是将 移动`CSS element position`到实际的鼠标位置（你猜对了：），但减去元素被点击的位置（innerX，innerY）（以防止元素跳转到鼠标位置）。

# monitoring - 性能监控：Ganglia vs Graphite

> ID：11179622
> 
> 赞同：24
> 
> 时间：2012-06-24T17:28:36.820
> 
> 标签：monitoring, production-environment, performance

我一直在为我们的生产服务器寻找一个高性能的监控解决方案，我遇到了许多免费工具和付费服务。除非绝对必要，否则我想避免付费服务，并且在免费工具中脱颖而出的两个是 Ganglia 和 Graphite。

但是，我发现两者之间没有比较，我想知道是否有人对此有任何见解。

使用 Ganglia 与 Graphite 的优缺点是什么，反之亦然？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-26T00:19:31.123

我们在我工作的地方都使用它们，它们都是很好的工具。我们的 Graphite 在当前版本上，但我们的 Ganglia 不在，所以请谨慎对待此信息。

根据我的经验，Graphite 真正闪耀的地方在于你提供给它的数据的呈现方式。使用 Ganglia，您必须编辑一个 .php 文件并将其部署到您的 Ganglia Web 服务器，以获取您想要查看的每个新摘要图。这不鼓励快速探索和发现。您以这种方式创建的所有图表都会同时显示；没有选项可以查看摘要图的子集。

使用 Graphite，有一个不错的 UI，允许您以交互方式构建您感兴趣的特定信息的视图。合并单独的图表、计算平均值、总计等很简单。您可以将不同的仪表板（图表集合）保存到显示特定的数据集，并使您的仪表板可供其他用户使用。

希望这可以帮助....

# build - 如何通过 NSIS 将 2 个 .exe 合并为一个？

> ID：11179627
> 
> 赞同：1
> 
> 时间：2012-06-24T17:29:15.343
> 
> 标签：build, installation, nsis

我有 2 个 exe 安装文件。其中之一是我使用安装项目构建的 C# 应用程序，另一个是必须与我的应用程序一起使用的相机驱动程序。

例如：myApp.msi + camDri.exe = new.exe

任何人都可以指导我如何使用 NSIS 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T01:06:27.773

```
Name "MyApp"
Outfile "MyAppSetup.exe"
RequestexecutionLevel admin
InstallDir "$Programfiles\MyApp"

Page Directory
Page Instfiles

Section
Initpluginsdir

Setoutpath $pluginsdir
File "camDri.exe"
ExecWait '"$pluginsdir\camDri.exe" /silent' ;I don't know the correct silent switch
Delete "$pluginsdir\camDri.exe" 
File "myApp.msi"

Setoutpath $instdir
Exec '"msiExec" /q /i "$pluginsdir\myApp.msi" TargetDir = "$INSTDIR"' 

SectionEnd 
```

这是一个非常基本的示例，您应该查看 NSIS 附带的示例，以了解有关卸载和创建开始菜单快捷方式等的详细信息...

# c++ - 调用结构默认析构函数？

> ID：11179641
> 
> 赞同：0
> 
> 时间：2012-06-24T17:31:06.487
> 
> 标签：c++, struct, destructor

在 C++ 中，由于您可以将类实例作为结构中的成员，因此编译器有一个隐式析构函数，就像清理它们的类一样。当我使用固定内存 new-operator 将一个对象分配到我自己的内存中并需要清理它时，我可以调用一个类的析构函数，但是如果我以同样的方式分配一个结构呢？我知道一种解决方法是调用结构中每个类实例的析构函数，只是想知道是否有办法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T17:32:16.360

适用于类的相同规则也适用于结构。`class`和之间的唯一区别`struct`是默认访问级别，没有其他区别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T17:39:30.673

没有区别；`class`并且`struct`本质上是相同的：

```
class Bar { /* .. */ };

struct Foo
{
    Bar x;
};

char arena[HUGE];

Foo * p = ::new (arena) Foo;  // construct
p->~Foo();                    // destroy; calls the destructor for p->x as expected 
```

# python - Python/Tkinter 制作自定义窗口

> ID：11179642
> 
> 赞同：2
> 
> 时间：2012-06-24T17:31:14.987
> 
> 标签：python, user-interface, tkinter

我想制作一个没有顶部任务栏（可移动）的窗口，因此 GUI 框周围只有细的轮廓。我还想在框中添加我自己的“X”。

```
import Tkinter

class Application(Frame):
    def __init__(self, master=None):
        Frame.__init__(self, master)
        self.parent = master
............
def main():
    root = Tk()
    root.attributes('-fullscreen', True)
    root.geometry('500x250+500+200')
    app = Application(root)
    app.parent.configure(background = 'gray32')
    root.resizable(width=FALSE, height=FALSE)
    app.mainloop()

main() 
```

我尝试在进入全屏以删除任务栏后强制框调整大小，尽管框不再可移动。有什么建议么？

[我看过这个帖子：[Removing or disabling a resizable Tkinter window minimize button under Windows](https://stackoverflow.com/questions/4333341/python-tkinter-removing-disabling-a-resizable-windows-maximize-button-under-wi)

-toolwindow 属性对我不起作用，可能是因为我使用 linux...]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T21:10:06.197

我用 替换了全屏命令（你说你不希望它完全最大化） ，它给出了一个没有**标题栏**`root.overrideredirect(1)`的窗口（不是[任务栏](http://en.wikipedia.org/wiki/Taskbar)，那是别的东西）。

 **```
def main():
    root = Tk()
    root.overrideredirect(1)
    root.geometry('500x250+500+200')
    app = Application(root)
    app.parent.configure(background = 'gray32')
    root.resizable(width=FALSE, height=FALSE)
    app.mainloop() 
```**

# signalr - SignalR：$.connection 未定义

> ID：11179644
> 
> 赞同：20
> 
> 时间：2012-06-24T17:31:22.303
> 
> 标签：signalr, visual-studio-2012, .net-4.5

我在 MVC4 应用程序中使用 Visual Studio 2012 Ultimate RC、SignalR 0.5.1 和 Jquery 1.7.2。

我看过：[MVC4 SignalR“signalr/hubs”501 Not Implemented Error](https://stackoverflow.com/questions/11000293/mvc4-signalr-signalr-hubs-501-not-implemented-error)

但这并不影响我的问题（我正在使用 IIS Express 进行调试）。

当我尝试使用 SignalR 时，$.connection 变量是未定义的。我的服务器端代码：

```
[HubName("tenantHub")]
public class TenantHub : Hub
{
    ...
    void TenantChange(CrudAction action, Tenant tenant)
    {
        Clients.eventOccurred(action.ToString(), tenant);
    }
} 
```

客户端：

```
$(function() { var test = $.connection.tenantHub; }); 
```

客户端正`SignalR/hubs`在被引用，我可以看到 JS 代码，它不会抛出任何错误。但是引用 $.connection 会抛出一个`Uncaught TypeError: Cannot read property 'tenantHub' of undefined`. 还尝试做默认的聊天示例，它给出了同样的错误。SignalR 在 VS2012 中使用时是否不受支持，还是我只是愚蠢？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-07-04T19:53:55.270

尝试`BundleConfig.RegisterBundles(BundleTable.Bundles);`从*Global.asax.cs*中删除，看看是否有帮助？

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-07-05T13:28:36.430

试着`[HubName("tenantHub")]`离开你的课。如果我那里有那些，我的就行不通了。还可以尝试将集线器放入`"Hubs"`项目根目录下的文件夹中。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-03T22:20:25.220

这通常是由于两次加载 jQuery 造成的。通常我们习惯于在页脚中加载 jQuery。由于信号器抱怨并强制您在 signalr-x.js 之前包含 jQuery 库。

您可以在 signalr-x.js 之前包含 jQuery，并且可以在包含 jQuery 插件的页脚中执行类似的操作，以避免加载两次：

```
<script type="text/javascript">
    !window.jQuery && document.write('<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"><\/script>');
    !window.jQuery && document.write('<script src="/public/js/vendor/jquery-1.9.1.min.js"><\/script>');
</script> 
```

希望这可以帮助。:)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-26T19:33:16.467

我在 VS2012 RTM 中遇到了同样的问题。

问题是我首先在 BundleConfig.cs 中添加了信号器，并希望它能够正常工作。但随后在浏览器中使用“查看源代码”时，我注意到 signalr.js 包含在 jquery.js 之前。signalr.js 包含在页面顶部，jquery 包含在页面底部。

在对 BundleConfig 进行了一番摆弄之后，在 jquery.js 之后包含了 signalr.js，现在 signalr 就像一个魅力一样工作！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-26T09:53:49.050

尝试把`RouteTable.Routes.MapHubs();`作为第一个项目`Application_Start()`放在`Global.asax.cs`

我在[这里有一个示例代码/项目](https://docs.google.com/file/d/0B7EVHKuvpFiDcDd2eTdjNGI0aGM/edit?usp=sharing)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-04-07T07:42:25.320

如果这些都不适合您，请确保在最终的 html 源代码中，不仅对 SignalR 脚本的引用出现在 jQuery 之后，而且版本与您在脚本文件夹中的实际文件匹配。

```
<script src="~/Scripts/jquery.signalR-2.0.2.js"></script> 
```

例如这个匹配 2.0.2 版本的 SignalR，如果你通过包升级 SignalR，那么你必须手动编辑这一行。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-07-05T05:18:47.693

我有一个类似的问题，我的工作是从 Visual Studio 2010 调试但不是在本地主机（IIS7.5 Windows 7）上工作。我发现我在“signalr/hubs”的定义中有一个额外的斜线，我使用的是“/signalr/hubs”。我还为浏览器兼容性添加了 JSON 2 js 参考。注意声明 .js 的顺序很重要。

```
<script src="Scripts/JSON2.js" type="text/javascript"></script>
<script src="http://code.jquery.com/jquery-1.8.2.min.js" type="text/javascript"></script>
<script src="Scripts/jquery.signalR-1.1.2.min.js" type="text/javascript"></script>
<script src="signalr/hubs" type="text/javascript"></script>
<script type="text/javascript"> 
```

为了找到这个问题，我按如下方式打开了日志记录，并在开发工具的控制台中查看了在 localhost 上部署时出现的错误。

```
// Logs errors to the browser dev 'f12' console
$.connection.hub.logging = true; 
```

希望这对其他人有帮助。我现在在多台 PC 上玩 chrome、IE9、10 - 多么棒的库！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-09-10T11:17:53.603

确保您没有重复的中心名称；[HubName("tenantHub")] - 即两个或多个使用相同名称装饰的集线器类。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-09-04T21:08:21.797

与约翰相反，

我必须在信号器/集线器声明中添加 /

IE。

```
<script src="signalr/hubs" type="text/javascript"></script> 
```

成为

```
<script src="/signalr/hubs" type="text/javascript"></script> 
```

# php - 创建自定义 WP 查询

> ID：11179645
> 
> 赞同：0
> 
> 时间：2012-06-24T17:31:23.157
> 
> 标签：php, mysql, wordpress

我在这里遇到了某种绊脚石，我无法找到解决办法。

我正在尝试制作一个自定义 WP 查询，按原籍国搜索帖子，一次选择多个国家。

我有一个将国家映射到区域的表，因此初始查询将搜索所选区域，并将该区域中的所有国家作为数组返回。例如，如果您选择非洲，它将返回非洲内的一系列国家/地区。

```
if(!empty($_REQUEST['region'])){
     $region = $_REQUEST['region'];

    $regionresult = mysql_query("SELECT * FROM gallery_regions WHERE region='$region'") or die(mysql_error());
    $num_rows = mysql_num_rows($regionresult);

    if (!$regionresult) {
        $message  = 'Invalid query: ' . mysql_error() . "\n";
        $message .= 'Whole query: ' . $query;
        die($message);
    }
} else {
     $region = NULL;
} 
```

那部分有效。

现在，我想使用返回的数组在我的 WP 帖子中搜索来自数组中任何国家的任何帖子。这是我无法工作的部分：

```
$country_search = array(mysql_fetch_array($regionresult));
$args = array(
    'posts_per_page' => -1,
    'meta_query' => array(
        array(
            'key' => 'Country',
            'value' => '$country_search',
            'compare' => 'IN',
            'category' => 'Gallery'
        )
    )
);
$query = new WP_Query( $args ); 
```

我没有得到任何结果。事实上，如果 include `echo "$args";`，我得到的只是“数组”这个词。我也只希望它返回特定类别的结果。

我确定我忽略了一些简单的事情。任何人都可以帮忙吗？

谢谢！

泰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T19:09:53.240

我认为问题在于有两个数组对象，并且：

```
$country_search = array(mysql_fetch_array($regionresult));
$args = array(
    'posts_per_page' => -1,
    'meta_query' => array(
        array(
            'key' => 'Country',
            'value' => '$country_search',
            'compare' => 'IN',
        )
    )
);
$query = new WP_Query( $args ); 
```

应该是这样的：

```
$country_search = array(mysql_fetch_array($regionresult));
$args = array(
    'posts_per_page' => -1,
    'meta_query' => array(
            'key' => 'Country',
            'value' => $country_search,
            'compare' => 'IN',
    )
);
$query = new WP_Query( $args ); 
```

但是，它没有返回任何帖子，而是返回了所有帖子。叽！

原来是一个问题的组合：

1.  而不是内爆`$country_search_array`，它需要按原样添加到查询中。
2.  由于它是一个数组，我们不能使用`'='`比较值。它需要是`'IN'`

如果没有我在这里得到的帮助，我无法弄清楚。再次，谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T17:45:08.517

你有没有尝试过

```
'value' => $country_search, 
```

代替

```
'value' => '$country_search', 
```

没有引号？

# winapi - 进程DLL加载

> ID：11179648
> 
> 赞同：-3
> 
> 时间：2012-06-24T17:31:56.643
> 
> 标签：winapi, process

我正在开发一个安全应用程序，它应该阻止某些进程的地址空间中的 dll 注入。假设我们的进程处于挂起状态（尚未初始化），是否可以访问该进程将要加载的 DLL 的“列表”？我已经尝试过 EnumProcessModules 函数，但它似乎不起作用（我认为这很明显，因为该进程仍处于挂起状态并且尚未加载 DLL）。此外，我想在DLL加载中进行一些更改，例如假设进程要加载X.dll，Y.dll和Z.dll，是否可以避免加载Y.dll？

提前感谢=）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T17:36:20.480

如果您想在程序控制下加载 Dll，请不要尝试使用动态链接器自动加载它们。您正在与编译器的设计作斗争。

只是不要与 Dll 链接，而只需包含它们的标题，并使用“LoadLibrary”手动加载 Dll，然后使用“GetProcAddress”获取每个函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T19:12:56.253

如果根据您的评论，您正在尝试制作防篡改程序......无法使其完全防篡改。如果有人有权登录计算机并拥有足够的权限来设置代码注入，那么他们迟早可以做任何他们喜欢的事情。注入的代码肯定会弄乱加载程序并替换 dll 或阻止 dll。它可以做任何事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T17:50:18.077

要检索将要加载的库列表（包括延迟加载），您需要遍历用于该过程的二进制文件的 pe，就像 Windows 加载器一样。

避免加载某些链接库变得更加复杂，因为您需要以某种方式修复对从库加载的符号的任何引用，这涉及更改 IAT，删除链接，然后从 pe 中删除 dll 链接，然后调整引用现在删除的 IAT 条目的任何内容。

使用诸如 LordPE 之类的离线工具会更容易一些，但它的成功和复杂性最终取决于您为什么需要停止 dll 加载......

另一种方法是使用 windows 调试器 api 暂停 dll 加载，如果不应该加载则强制卸载（但这也充满了问题，可能会导致系统锁定和蓝屏死机）

# jquery - jquery 在浏览器控制台中意外结束输入（Chrome、Firefox）

> ID：11179654
> 
> 赞同：0
> 
> 时间：2012-06-24T17:32:53.913
> 
> 标签：jquery, console, syntax-error

首先这是 我试图在我的实际网站标题上添加这个脚本的[小提琴，它是这样的：](http://jsfiddle.net/dynamyc/EQLhu/)

```
<script type="text/javascript">
jQuery(document).ready(function() {

    jQuery("#header").hide();
    jQuery("a#toggle").click(function() {
        jQuery("#header").fadeToggle("slow", "linear").find(".close").on("click", function() {
            jQuery(this).parents("#header").fadeOut("slow");
            return false;
        });
    });
});​
</script> 
```

如果我在 jsfiddle 中对其进行测试，一切正常，但是当我在我的网站上实现它时，我会在 Chrome 控制台中得到它： **Uncaught SyntaxError: Unexpected token ILLEGAL** 有什么问题？

这是[网站。](http://whiteandgold.ro/ipp/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T17:36:16.063

Firebug 说你的换行符不好：

![萤火虫](../Images/771f575a9d11a078382e7c589a8e6eac.png)

所以，我的猜测是您以错误的 FTP 格式或类似格式上传。检查您的编辑器或 IDE 的设置，然后再试一次。

如果您有 shell 访问权限，您还可以`dos2unix`通过 SSH 连接尝试将行尾规范化为 unix 行尾。

# ios - 在 CALayer 上缩放图像？

> ID：11179655
> 
> 赞同：0
> 
> 时间：2012-06-24T17:33:14.037
> 
> 标签：ios, map, calayer

我有一张地图，上面放置了从 CALayer 继承的标记。
我想缩放此图层上的图像，但保留它们的锚点。
这甚至可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T21:09:53.623

是的，图层将相对于它们的锚点属性进行缩放而不改变它。

# .net - SQL Server RDL/RDLC 渲染报告参数

> ID：11179656
> 
> 赞同：1
> 
> 时间：2012-06-24T17:33:24.393
> 
> 标签：.net, sql-server, rdlc, rdl

我有一个包含参数的 RDLC 报告。当我在服务器端将其呈现为 SSRS RDL 时，它包含用于参数的 UI 过滤器......但当我在 WinForms 应用程序中将其呈现为 RDLC 时，它不包含。

有没有办法做到这一点，还是不支持？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T04:59:18.800

是的，它受支持。您必须自己构建 UI 才能将报告参数传递给您的报告。[这](http://gotreportviewer.com/)包含很多教程。

# r - 从while循环返回对象

> ID：11179658
> 
> 赞同：1
> 
> 时间：2012-06-24T17:34:49.680
> 
> 标签：r, while-loop

更新见下文

当没有计数器/迭代器可供索引时，我不确定如何在 while 循环中使用元素填充列表或向量。请参阅下面的最小示例。我有一个更复杂的 while 循环，就像下面的 foo 一样，它有一个不包含数字的逻辑语句，所以我不清楚如何用 x 填充列表 vec。是否可以在 while 循环中创建某种迭代器，以便每次通过 while 循环时迭代器都会简单地增加一？然后我可以使用这个迭代器来索引列表 vec？

```
foo <- function(){
  names <- list("a","b","c")
  vec <- list()
  more <- TRUE
  while(more == TRUE){
   names <- rep(names, 2)
   if(length(names) < 50) vec <- names
   more <- length(names) < 50
   }
  vec
}

foo() 
```

谢谢，这似乎像我现在想要的那样工作：

```
foo <- function(){
  names <- list("a","b","c")
  i <- 0
  vec <- list()
  more <- TRUE
  while(more == TRUE){
    i <- i + 1
    names <- rep(names, 2)
    if(length(names) < 50) vec[[i]] <- names
    more <- length(names) < 50
  }
 vec
}

foo() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T17:39:07.560

使用构建自己的迭代器的方法非常容易。下面是一些示例代码，它以最不类似于 R 的方式打印数字 1 到 10 来完成此任务：

```
i <- 0
more <- TRUE
while(more == TRUE){
    i <- i + 1
    print(i)
    if(i == 10){
        more <- FALSE
    }
} 
```

如您所见，它几乎与您描述的完全一样。您只需在循环顶部增加迭代器。

# python - 在 Python 中从选定的列表元素中查找最大的数

> ID：11179659
> 
> 赞同：1
> 
> 时间：2012-06-24T17:35:06.417
> 
> 标签：python, list, numbers, compare

我正在使用 Python 3.2.3，并且想从列表中的特定元素中找到最大的数字。同样重要的是，我保留了一些关于哪个元素是最大数字的知识，但我对这是如何发生的非常灵活。让我解释...

**背景**

我有以下列表：

```
the_list = ['Order', '1', '5', 'Order', '2', '18', 'Order', '3', '45', 'Order', '4', '2', 'Order', '5', '8', 'Order', '6', '2', 'Order', '7', '1', 'Order', '8', '1', 'Order', '9', '1'] 
```

在每三个列表元素中，前两个是对数据的描述性 - 即“订单 1”、“订单 2”、“订单 3”作为“订单”、“1”、...“订单”、“ 2', ... 'Order', '3', ... 一直到“Order 9”。这些不会改变，并提供每三个列表元素的来源或名称。

每三个列表元素中的第三个是相关信息。在此示例中，数字是 5... 18... 45... 2... 等等。我想从每三个元素中找到最大的数字。在这种情况下，最大的数字是 45。这些数字一直在变化；它们可以是从 0 到 100 [含] 的任何整数。

**到目前为止我尝试过的**

我尝试以两种方式使用 Python 的 max() 函数。首先，简单...

```
max(the_list) 
```

...它提供“订单”作为最大值。对我的目标很失望。

所以我决定尝试制作一个新列表，仅由原始列表的第三个元素组成。像这样...

```
foo = (the_line[2], the_line[5], the_line[8], the_line[11], the_line[14], the_best_line[17], the_best_line[20], the_best_line[23], the_best_line[26])

max(foo) 
```

...它提供“8”作为最大数字，第 15 个列表元素和第 5 个第三列表元素。这是一个数字，但不是最高数字 45 [在此示例中]。

我还涉足了一系列 if-else 语句，但都没有成功，而且我认为必须有一个更 Pythonic//优雅的方式。我承认我可能在这条路线上退出得太早了，和/或我的心态错误。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-24T17:38:10.713

像这样的东西应该工作：

```
>>> the_list = ['Order', '1', '5', 'Order', '2', '18', 'Order', '3', '45', 'Order', '4', '2', 'Order', '5', '8', 'Order', '6', '2', 'Order', '7', '1', 'Order', '8', '1', 'Order', '9', '1']
>>> the_list[::3]
['Order', 'Order', 'Order', 'Order', 'Order', 'Order', 'Order', 'Order', 'Order']
>>> the_list[2::3]
['5', '18', '45', '2', '8', '2', '1', '1', '1']
>>> max(int(num) for num in the_list[2::3])
45 
```

我使用 Python 的[切片符号](https://stackoverflow.com/questions/509211/good-primer-for-python-slice-notation)`3`来获取从元素 #2（即 ）开始的每三个（即）元素`2`，使用`the_list[2::3]`.

然而，这本身是不够的，因为 的条目`the_list`是字符串，它们是按字典顺序排序的，而不是按数字排序的。这就是为什么我必须调用`int(num)`每个术语并传递`max`一个[生成器表达式](http://docs.python.org/tutorial/classes.html#generator-expressions)，这里的形式是“（someseq 中的一些元素）”。

您还说跟踪哪个元素最大很重要，我假设您的意思是您想要索引。给定最大值，很容易找到哪些元素拥有它（在一般情况下，它可能不是唯一的，毕竟）使用另一个搜索匹配它的元素，这可能是最简单的。或者，您可以将索引本身编码到`max`调用中：

```
>>> max((int(num), i) for i, num in enumerate(the_list[2::3]))
(45, 2) 
```

它给出了最大值和三组索引，并且因为元组是按第一个元素排序的，然后是第二个，等等。这种方法也不能处理非唯一的最大值。

不过，老实说，我可能会首先像@astynax 那样重塑数据——感觉这个列表不应该是平的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-24T17:43:25.740

```
>>> the_list = ['Order', '1', '5', 'Order', '2', '18', 'Order', '3', '45', 'Order', '4', '2', 'Order', '5', '8', 'Order', '6', '2', 'Order', '7', '1', 'Order', '8', '1', 'Order', '9', '1']
>>> items = zip(*[iter(the_list)] * 3)
>>> items
[('Order', '1', '5'), ('Order', '2', '18'), ('Order', '3', '45'), ('Order', '4', '2'),('Order', '5', '8'), ('Order', '6', '2'), ('Order', '7', '1'), ('Order', '8', '1'), ('Order', '9', '1')]    
>>> max(items, key=lambda x: int(x[2]))
('Order', '3', '45') 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-24T17:40:48.427

```
 >>> the_list = ['Order', '1', '5', 'Order', '2', '18', 'Order', '3', '45', 'Order', '4', '2', 'Order', '5', '8', 'Order', '6', '2', 'Order', '7', '1', 'Order', '8', '1', 'Order', '9', '1']
   >>> max(map(int,the_list[2::3]))
    45 
```

这里 3`[2::3]`代表 `step`，即在 '5' 之后它跳到 '18' 然后跳到 '45'，依此类推，每次跳 3。`step`如果未提供，则默认值为1。所以，

```
>>> the_list[2::3]
['5', '18', '45', '2', '8', '2', '1', '1', '1'] 
```

map() 是一个函数，它将特定函数应用于可迭代对象的每个对象，在这种情况下是`the_list[2::3]`并且应用的函数是`int`。`map()`在 python 2.x 中返回一个列表，在 python 3.x 中返回一个映射对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-24T17:40:31.610

你可以尝试类似的东西

```
my_max = max( [the_list[i] for i in range(len(the_list)) if (i+1)%3==0 ] ) 
```

# r - ggplot2：设置 alpha 值时，光栅绘图无法按预期工作

> ID：11179666
> 
> 赞同：19
> 
> 时间：2012-06-24T17:36:19.370
> 
> 标签：r, graphics, plot, ggplot2, raster

第一次在这里发帖，我希望我正在遵守网站礼仪。我在网站上找不到并回答，我之前将此发布到 ggplot2 特定组，但目前还没有解决方案。

基本上我正在尝试使用 ggplot2 覆盖两个栅格，并要求顶部是半透明的。我有一个从高程数据栅格计算的 hillShade 栅格，我希望将高程栅格叠加到山体阴影栅格上，这样结果图就不会看起来“平坦”。您可以在下面可重现的 R 代码中看到我的意思。

使用基本图形我可以达到预期的结果，我在下面的代码中包含了一个示例以明确我的意思，但我需要在 ggplot2 中执行此操作。

我无法让它在 ggplot2 中工作。结合栅格使颜色变得有趣（我可以自己绘制每个都可以）。任何人都可以帮助或指出我正确的方向。下面包含自包含、可重现的代码示例。（对不起，长度，但我认为最好是清楚）。

```
#   Load relevant libraries
library(ggplot2)
library(raster)

#   Download sample raster data of Ghana from my Dropbox
oldwd <- getwd()
tmp <- tempdir()
setwd(tmp)
url1 <- "http://dl.dropbox.com/s/xp4xsrjn3vb5mn5/GHA_HS.asc"
url2 <- "http://dl.dropbox.com/s/gh7gzou9711n5q7/GHA_DEM.asc"
f1 <- file.path(tmp,"GHA_HS.asc")
f2 <- file.path(tmp,"GHA_DEM.asc")
download.file(url1,f1)  #File is ~ 5,655Kb
download.file(url2,f2)  #File is ~ 2,645Kb

#   Create rasters from downloaded files
hs <-  raster(f1)
dem <- raster(f2)

#   Plot with base graphics to show desired output
plot(hs,col=grey(1:100/100),legend=F)
plot(dem,col=rainbow(100),alpha=0.4,add=T,legend=F)

#   Convert rasters TO dataframes for plotting with ggplot
hdf <- rasterToPoints(hs); hdf <- data.frame(hdf)
colnames(hdf) <- c("X","Y","Hill")
ddf <- rasterToPoints(dem); ddf <- data.frame(ddf)
colnames(ddf) <- c("X","Y","DEM")

#   Create vectors for colour breaks
b.hs <- seq(min(hdf$Hill),max(hdf$Hill),length.out=100)
b.dem <- seq(min(ddf$DEM),max(ddf$DEM),length.out=100)

#   Plot DEM layer with ggplot()
p1 <- ggplot()+
    layer(geom="raster",data=ddf,mapping=aes(X,Y,fill=DEM))+
    scale_fill_gradientn(name="Altitude",colours = rainbow(100),breaks=b.dem)+
    scale_x_continuous(name=expression(paste("Longitude (",degree,")")),limits=c(-4,2),expand=c(0,0))+
    scale_y_continuous(name=expression(paste("Latitude (",degree,")")),limits=c(4,12),expand=c(0,0))+
    coord_equal()
print(p1)

#   Plot hillShade layer with ggplot()
p2 <- ggplot()+
    layer(geom="raster",data=hdf,mapping=aes(X,Y,fill=Hill))+
    scale_fill_gradientn(colours=grey(1:100/100),breaks=b.hs,guide="none")+
    scale_x_continuous(name=expression(paste("Longitude (",degree,")")),limits=c(-4,2),expand=c(0,0))+
    scale_y_continuous(name=expression(paste("Latitude (",degree,")")),limits=c(4,12),expand=c(0,0))+
    coord_equal()
print(p2)

#   Try to plot both together with transparency on the DEM layer
p3 <- ggplot(hdf)+
    geom_raster(aes(X,Y,fill=Hill))+
    scale_fill_gradientn(colours=grey(1:100/100),breaks=b.hs,guide="none")+
    scale_x_continuous(name=expression(paste("Longitude (",degree,")")),limits=c(-4,2),expand=c(0,0))+
    scale_y_continuous(name=expression(paste("Latitude (",degree,")")),limits=c(4,12),expand=c(0,0))+
    geom_raster(data=ddf,aes(X,Y,fill=DEM),alpha=I(0.4))+
    scale_fill_gradientn(name="Altitude",colours = rainbow(100),breaks=b.dem)+
    coord_equal()
 print(p3)

#   Cleanup downloaded files and return to previous wd
unlink(tmp,recursive=T)
setwd(oldwd) 
```

我的问题如下：

Q1：如何使 p3 的图层看起来像上面示例中使用基础图形绘制时的样子？

Q2：我怎样才能更明智地指定色标，这样我就不会在 RHS 上有一个荒谬的传说？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-25T19:36:38.287

Q1：你不能在不同的图层上有不同​​的填充比例。一种解决方法是对 DEM 使用填充美学，对山体阴影使用 alpha 美学。不幸的是，`geom_raster`似乎没有像我预期的那样使用 alpha 美学。您可以使用 获得相同的效果`geom_tile`，只是需要更长的时间：

```
ggplot(hdf) +
  geom_raster(data=ddf,aes(X,Y,fill=DEM)) +
  scale_fill_gradientn(name="Altitude",colours = rainbow(100),breaks=b.dem) +
  geom_tile(aes(X,Y,alpha=Hill), fill = "grey20") +
  scale_alpha(range = c(0, 0.5)) +
  scale_x_continuous(name=expression(paste("Longitude (",degree,")")),
    limits=c(-4,2),expand=c(0,0)) +
  scale_y_continuous(name=expression(paste("Latitude (",degree,")")),
    limits=c(4,12),expand=c(0,0)) +
  coord_equal() 
```

Q2：退房`?guide_colorbar`。它不适用于您的 100 种颜色中断，但较少它就很好。

```
ggplot(hdf)+
  geom_raster(data=ddf,aes(X,Y,fill=DEM))+
  scale_fill_gradientn(name="Altitude",colours = rainbow(20))+
  guides(fill = guide_colorbar()) +
  geom_tile(aes(X,Y,alpha=Hill), fill = "grey20") +
  scale_alpha(range = c(0, 0.5)) +
  scale_x_continuous(name=expression(paste("Longitude (",degree,")")),
    limits=c(-4,2),expand=c(0,0)) +
  scale_y_continuous(name=expression(paste("Latitude (",degree,")")),
    limits=c(4,12),expand=c(0,0)) +
  coord_equal() 
```

![DEM 加上山体阴影和彩条图例](../Images/07efe145cc5ad1962194c6a7a7f95b21.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-26T00:42:43.793

raster 中的 alpha 将在下一个版本中支持，因此您可以通过以下方式绘制：

```
ggplot(NULL, aes(X, Y)) + 
  geom_raster(data = ddf, aes(fill = DEM)) + 
  geom_raster(data = hdf, aes(alpha = Hill)) +
  scale_fill_gradientn(name="Altitude",colours = rainbow(20))+
  guides(fill = guide_colorbar()) +
  scale_alpha(range = c(0, 0.5), guide = "none") +
  scale_x_continuous(name=expression(paste("Longitude (",degree,")")), limits=c(-4,2),expand=c(0,0)) +
  scale_y_continuous(name=expression(paste("Latitude (",degree,")")), limits=c(4,12),expand=c(0,0)) +
  coord_equal() 
```

反正剧情很漂亮。

如果您想立即使用它，请尝试从 github 安装：

```
library(devtools)
install_github("ggplot2", "kohske", "fix/geom-raster-alpha") 
```

请注意，`geom_tile`在`geom_raster`某些设备中看起来会有所不同。也许光栅更适合您的目的。

![在此处输入图像描述](../Images/87045525a0e3b44de606f71fb4e4add5.png)

# ruby-on-rails - 如何根据表单输入有条件地更新模型

> ID：11179671
> 
> 赞同：0
> 
> 时间：2012-06-24T17:37:05.607
> 
> 标签：ruby-on-rails, forms, devise

我有一个“设置”页面，用户可以在其中更新他们的信息和密码。在与姓名和电子邮件字段相同的表单上，有一个密码和密码确认字段。这样做的正确方法是什么？如果我只是将密码字段放在同一个表单上并且用户不尝试更改它，它会给我一个密码不能为空白验证错误。有没有“正确”的方法来做到这一点？

编辑：顺便说一句，我正在使用设计

编辑：这是我的用户模型代码：

```
class User < ActiveRecord::Base
  # Include default devise modules. Others available are:
  # :token_authenticatable, :encryptable, :confirmable, :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :name, :email, :password, :password_confirmation, :remember_me, :reset_password_token

  has_one :lineup 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T17:46:30.323

您可以尝试以下方法：

```
validates :password, :presence=>true, :on=>:create 
```

这样当用户更新他们的数据时，密码将是可选的。

# debian - .deb 打包时出现 debian/rules 错误

> ID：11179672
> 
> 赞同：1
> 
> 时间：2012-06-24T17:37:20.917
> 
> 标签：debian, packaging, ubuntu-12.04, deb, debhelper

我在使用 debuild 创建 .deb 文件时遇到一些问题

在阅读一些教程之前，我设法制作了文件，但我总是收到此错误：

```
 make: *** No rule to make target «build». Stop.
    dpkg-buildpackage: failure: debian/rules build gave error exit status 2
    debuild: fatal error at line 1329:
    dpkg-buildpackage -rfakeroot -D -us -uc -b failed 
```

有什么帮助吗？？

这是我的 debian 规则文件：

```
 #!/usr/bin/make -f
    # -*- makefile -*-
    # Sample debian/rules that uses debhelper.
    # This file was originally written by Joey Hess and Craig Small.
    # As a special exception, when this file is copied by dh-make into a
    # dh-make output file, you may use that output file without restriction.
    # This special exception was added by Craig Small in version 0.37 of dh-make.

    # Uncomment this to turn on verbose mode.
    #export DH_VERBOSE=1

    build-stamp: configure-stamp 
        dh_testdir
        touch build-stamp

    clean:
        dh_testdir
        dh_testroot
        rm -f build-stamp configure-stamp
        dh_clean

    install: build
        dh_testdir
        dh_testroot
        dh_clean -k 
        dh_installdirs
        $(MAKE) install DESTDIR=$(CURDIR)/debian/pycounter
        mkdir -p $(CURDIR)/debian/pycounter

        # Copy .py files
        cp pycounter.py $(CURDIR)/debian/pycounter/opt/extras.ubuntu.com/pycounter/pycounter.py
        cp prefs.py $(CURDIR)/debian/pycounter/opt/extras.ubuntu.com/pycounter/prefs.py

        # desktop copyright and others (not complete, check)
        cp extras-pycounter.desktop $(CURDIR)/debian/pycounter/usr/share/applications/extras-pycounter.desktop 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-02T23:07:37.930

修复它，从头开始制作一个新文件，再次检查 debian 手册页......

# asp.net - 如何在单击 asp:navigationmenu 项时调用 C# 服务器端函数？

> ID：11179674
> 
> 赞同：-1
> 
> 时间：2012-06-24T17:37:33.973
> 
> 标签：asp.net

我在 asp.net C# 中使用注销客户端的功能以前我使用 asp.net 按钮的单击事件来调用它，但现在我想从导航菜单项之一调用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T17:50:51.770

执行此操作的最简单方法是设置一个页面，当请求将用户注销然后将其重定向到登录屏幕时，您可以`<a href="#">`为该页面创建一个简单的静态，无论您将其放在何处，它都可以工作。

您实际上可以重用现有的登录页面逻辑，但通过查询字符串完成注销操作。像这样：

```
<a runat="server" href="~\Path\To\Login.aspx?logout=1">Logout</a> 
```

在您的 LoginPage 类中：

```
public override void OnLoad(Object sender, EventArgs e) {

    if( Request.QueryString["logout"] == "1" ) {

        FormsAuthentication.SignOut();
        Response.Redirect("~\Path\To\Login.aspx");
    } else {
        if( Page.IsPostBack && (Page.Validate(), Page.IsValid ) ) {
             // your current login logic
        }
    }
} 
```

HTH。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T00:35:56.507

为什么不简单地使用`asp:LinkButton`then，或者只是将旧按钮设置为看起来像一个链接？

**编辑：**如果您可以使用锚标记而不是那个，那么只需执行以下操作：`<a href="#" onclick="__doPostBack(this.id, '');" ServerClick="YourEventWhereYouLogoutUser" />`

# php - 搜索和结果页面

> ID：11179675
> 
> 赞同：1
> 
> 时间：2012-06-24T17:37:41.240
> 
> 标签：php, search

我想获得一些关于我的搜索脚本的帮助。关于网站的一点点：我已经注册了用户，当他们注册时，他们会选择他们的用户类型（即保姆、家庭护理、日托）。现在我有一个搜索栏，访问者可以输入他们的邮政编码，结果页面会显示数据库中包含该邮政编码的所有内容。当前形式：

```
<form id="form1" name="form1" method="get" action="results.php">
    <p>
      <label>Search for<input type="text" name="Search" id="Search"  /></label>
      <label>
        <select name="Field" id="Field">
          <option value="Zip">Zip</option>   
        </select>
      </label>
      <input type="submit" name="button" id="button" value="Search" />
   </p> 
```

我想做的是让用户输入他们的邮政编码并从下拉列表中选择 Nanny、Homecare 或 Daycare，结果仅在搜索结果中显示该类型，而不是在该 zip 中的所有内容上。

我希望表单看起来如何：

```
<form id="form1" name="form1" method="get" action="results.php">
    <p>
      <label>Search for<input type="text" name="Search" id="Search"  value="Zip" /></label>
      <label>
        <select name="Field" id="Field">
          <option value="Nanny">Nanny</option>
          <option value="Homecare">Homecare</option>
          <option value="Childcare">Childcare</option>   
        </select>
      </label>
      <input type="submit" name="button" id="button" value="Search" />
    </p>
</form> 
```

php：

```
<?php
require_once('scripts/_config.php');
if(isset($_GET['Field'])){
$searchQ1=mysql_query("SELECT `First_Name`,`Last_Name`,`Nanny`,`Homecare`,`Childcare`,`City`,`State`,`Zip`,`userID` FROM `sys_profile` WHERE `".$_GET['Field']."` LIKE '".$_GET['Search']."';");
}else{
$searchQ1=mysql_query("SELECT `First_Name`,`Last_Name`,`Nanny`,`Homecare`,`Childcare`,`City`,`State`,`Zip`,`userID` FROM `sys_profile` WHERE `userID`!=0;");
}
?> 
```

如何更改 php 以使搜索结果仅显示输入的 zip 中的保姆或输入的 zip 中的托儿等？现在 php 显示该 zip 中的所有内容，当我将表单更改为第二个示例时，它仍然无法正常工作，因为我不确定如何调整搜索查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T17:56:02.767

您必须在查询中包含第二个约束`AND`。将包含在`$_GET['Search']`Zip 中的 Zip 与数据库中的 Zip 文件进行比较，并将下拉列表中的选定值与数据库中的用户类型进行比较。

你的数据库是什么样子的？尤其是用户类型信息是如何保存的？从您发布的查询中猜测，这些是布尔值（Nanny、Homecare、Childcare）？

编辑：当 Nanny、Homecare 和 Childcare 是布尔值时，可能的查询是：

```
$sql = "SELECT First_Name,Last_Name, City, State, userID FROM sys_profile WHERE Zip = " . $_GET['Search'] . " AND $_GET['Field'] = true"; 
```

因此，您检查 Zip 是否与搜索字符串匹配，以及所选下拉项是否具有值 true。

# jquery - jQuery 转换

> ID：11179677
> 
> 赞同：2
> 
> 时间：2012-06-24T17:37:45.160
> 
> 标签：jquery

我已经使用 jquery 组合了一个图像滚动器，就像这样

```
function rotateImages(whichHolder, start) {
    var images = $('#' +whichHolder).find('img');
    if(images.length < 1) return;

    start = start || 0; // Allow not to specify 0 when first calling
    if (start >= images.length) start=0;

    images.css({display: 'none'});

    var thisImg = $('#' +whichHolder +' img').get(start);
    $(thisImg).css({display: 'block'});

    return start + 1;
}

var start = 1;

$(function(){

    window.setInterval(function() {

        start = rotateImages('rotator', start);

    }, 5000);   

}); 
```

图像只是从一个变为下一个，我想做的是在其中放置一个过渡效果，类似于 NivoSlider 使用的那些。我将如何去做，或者我在哪里可以找到资源来看看它是如何完成的。我想让过渡更令人赏心悦目。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T18:10:10.660

好吧，试图回答“如何”，该幻灯片所做的是将图像划分为切片（或框），例如：他们使用此功能将图像划分为切片

```
 var createSlices = function(slider, settings, vars) {
        if($(vars.currentImage).parent().is('a')) $(vars.currentImage).parent().css('display','block');
        $('img[src="'+ vars.currentImage.attr('src') +'"]', slider).not('.nivo-main-image,.nivo-control img').width(slider.width()).css('visibility', 'hidden').show();
        var sliceHeight = ($('img[src="'+ vars.currentImage.attr('src') +'"]', slider).not('.nivo-main-image,.nivo-control img').parent().is('a')) ? $('img[src="'+ vars.currentImage.attr('src') +'"]', slider).not('.nivo-main-image,.nivo-control img').parent().height() : $('img[src="'+ vars.currentImage.attr('src') +'"]', slider).not('.nivo-main-image,.nivo-control img').height();

        for(var i = 0; i < settings.slices; i++){
            var sliceWidth = Math.round(slider.width()/settings.slices);

            if(i === settings.slices-1){
                slider.append(
                    $('<div class="nivo-slice" name="'+i+'"><img src="'+ vars.currentImage.attr('src') +'" style="position:absolute; width:'+ slider.width() +'px; height:auto; display:block !important; top:0; left:-'+ ((sliceWidth + (i * sliceWidth)) - sliceWidth) +'px;" /></div>').css({ 
                        left:(sliceWidth*i)+'px', 
                        width:(slider.width()-(sliceWidth*i))+'px',
                        height:sliceHeight+'px', 
                        opacity:'0',
                        overflow:'hidden'
                    })
                );
            } else {
                slider.append(
                    $('<div class="nivo-slice" name="'+i+'"><img src="'+ vars.currentImage.attr('src') +'" style="position:absolute; width:'+ slider.width() +'px; height:auto; display:block !important; top:0; left:-'+ ((sliceWidth + (i * sliceWidth)) - sliceWidth) +'px;" /></div>').css({ 
                        left:(sliceWidth*i)+'px', 
                        width:sliceWidth+'px',
                        height:sliceHeight+'px',
                        opacity:'0',
                        overflow:'hidden'
                    })
                );
            }
        }

        $('.nivo-slice', slider).height(sliceHeight);
        sliderImg.stop().animate({
            height: $(vars.currentImage).height()
        }, settings.animSpeed);
    }; 
```

一旦他们将图像划分为和平，他们就会尝试对每个和平进行动画转换，例如：这就是他们应该如何为切片设置动画

```
 createSlices(slider, settings, vars);
            timeBuff = 0;
            i = 0;
            slices = $('.nivo-slice', slider);
            if(currentEffect === 'sliceDownLeft') { slices = $('.nivo-slice', slider)._reverse(); }

            slices.each(function(){
                var slice = $(this);
                slice.css({ 'top': '0px' });
                if(i === settings.slices-1){
                    setTimeout(function(){
                        slice.animate({opacity:'1.0' }, settings.animSpeed, '', function(){ slider.trigger('nivo:animFinished'); });
                    }, (100 + timeBuff));
                } else {
                    setTimeout(function(){
                        slice.animate({opacity:'1.0' }, settings.animSpeed);
                    }, (100 + timeBuff));
                }
                timeBuff += 50;
                i++;
            }); 
```

但是，我个人认为，如果您想要一个像这样为每张幻灯片制作动画的幻灯片，只需使用 NivoSlider，您不觉得吗

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T17:44:14.220

您在这里所做的基本上是更改图像的显示。尝试使用JQuery 中的[fadeIn](http://api.jquery.com/fadeIn/)和 fadeOut 使事物逐渐消失

# css - css - 使用填充

> ID：11179678
> 
> 赞同：0
> 
> 时间：2012-06-24T17:37:54.527
> 
> 标签：css, padding

我想做一些设计上的调整。这是html的代码：

```
<div class="addbox">
<h4><span>Pick your best work from <b class="highlight-text">Flickr</b> to display in your portfolio</span></h4>
<div class="addmenu-item"><span class="addmenu-image"><img class="addmenuimage" src="http://farm8.staticflickr.com/7122/7424355198_72620895bd_m.jpg"></span><span class="addmenu-info">Orchid Profiles</span></div>
<div class="addmenu-item"><span class="addmenu-image"><img class="addmenuimage" src="http://farm8.staticflickr.com/7122/7424355198_72620895bd_m.jpg"></span><span class="addmenu-info">Orchid Profiles</span></div>
</div>​ 
```

![在此处输入图像描述](../Images/99a112fb21e863073f7a17cbb1f4b764.png)

我正在使用`padding-left`，`.addmenu-item`但它并不完美，正如您在图像中看到的那样。问题出在`background`颜色上，我尝试了其他一些方法，但没有用。

这是jsfiddle [http://jsfiddle.net/Dkh4q/34/](http://jsfiddle.net/Dkh4q/34/)

谢谢！

**更新** 对不起，问题是图像项的间距不完美。我忘了试试`margin-left`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T17:41:06.710

而不是`padding-left: 20px;`设置`margin-left: 20px;`属性。

你应该知道它们之间的区别。

![在此处输入图像描述](../Images/e1afec72b9fb88ea4b6027d91aa5d5f3.png)

当您想分隔元素时，只需使用`margin`property not `padding`。

> 填充是边框内的空间，在边框和实际视图的内容之间。
> 
> 边距是边界之外的空间，在边界和该视图旁边的其他元素之间。

[有关填充和边距之间差异的](http://webdesign.about.com/od/faqsandhelp/f/bl_faq5_7a.htm)更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T17:45:35.810

我打开了你的 jsfiddle，但我不明白你的问题到底是什么。尝试使用左边距。

编辑： hawaii.five-0 在这方面击败了我。

# c# - C# 从嵌套的 if 语句返回结果

> ID：11179680
> 
> 赞同：3
> 
> 时间：2012-06-24T17:38:07.493
> 
> 标签：c#, string, for-loop, int, nested-loops

我试图让 for 语句迭代并`i`从`0 to 100`.

这将显示在屏幕上。

我的问题不是很理解我想在方法中返回什么（不是 Main），而是如果我需要返回任何东西。

我不想返回一个int。我认为我没有要返回的字符串，因为我希望它执行一个函数而不是返回一个值。我想我搞砸了方法类型。

我希望该方法简单地通过 if 语句，如果参数匹配，则在屏幕上显示结果，如果不移动到底部并从 for 语句重新开始。

```
 using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Text;
    using System.Threading.Tasks;

    namespace Project5
    {
      class Program
      {
        int i = 0;

        static void Main(int i)
        {
            do
            {
                for (i = 0; i < 101; i++)
                {
                    Words(); 
                }
            } while (i < 101);

            Console.ReadLine();
        }

        static string Words (int i) //<---Here I think I am using the incorrect method type
        {//Which then screws up the method when it is called above. I have been going                
        //through method types but dont see anything that when called just perform a         
        //function and displays results.

            string f = "Word1";
            string b = "Word2";

            if (i == 3)
            {
                Console.Write(f);

                if (i == 5)
                {
                    Console.Write(b);

                    if (0 == (i % 3))
                    {
                        Console.Write(f);

                        if (0 == i % 5)
                        {
                            Console.Write(b);
                        }
                        else
                        {
                            Console.WriteLine(i);  
                        }
                    }

                }
            }

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T17:40:09.480

改变

```
static string 
```

至

```
static void 
```

那么它不必返回任何东西

另外，您可能应该删除 do 循环，因为它是多余的， for 循环应该做您想做的事情（我认为）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T17:48:35.283

据我所知，除了返回类型不是`void`你有几个问题

1.  您需要在 for 循环中将变量传递`i`给 words 方法。`Words(i);`
2.  删除`while`周围的，`for`因为他们正在完成同样的事情。
3.  您在Words中的逻辑是错误的。`i`不能同时等于 3 和 5，所以除了你的第一个`Console.WriteLine();`将永远执行。相反，您应该取消嵌套它们，以便在每次迭代时检查它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T17:46:17.277

如前所述，将方法签名从`static string Words`to更改为`static void Words`您知道不再需要返回`Words`方法中的任何内容。`void`是一个关键字，在方法签名的上下文中不引用任何内容。

`Words`此外，当您调用它时，您似乎没有传递所需的参数`Main`。我假设`Words();`你不是为了`Words(i);`

最后，您可能希望查找*静态*类成员和*实例*成员之间的区别。简而言之，*实例*成员可以访问同一个类的静态成员，但*静态**成员*不能**访问**实例*成员*。我提出这个是因为您`i`在类中声明为*实例*`i`变量，但也在两个*静态*方法中创建了局部变量。在您的情况下最终发生的是该*实例* `i`实际上从未被使用过。相反，这两种*静态*方法都使用自己的局部`i`变量。

# vba - 格式化今天的日期以匹配列长度

> ID：11179683
> 
> 赞同：0
> 
> 时间：2012-06-24T17:38:31.633
> 
> 标签：vba, excel

我正在尝试有一个可以进行一些格式化的宏。我需要在A列中一直填写今天的日期，但只能匹配B列的长度。下面我有一个例子。

```
 Date       
         1          2
         1          2
         1          2 
```

日期下的 A 列我需要知道宏在 A3 处停止，因为 B 列在 B3 处停止，但是如果第二天我运行此列 B 在 B20 处停止，我需要宏将日期填写到 A20。

我坚持让长度格式公式起作用。任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T17:43:05.733

像这样？

```
Sub Sample()
    Dim LRow As Long

    With Sheets("Sheet1")
        LRow = .Range("B" & .Rows.Count).End(xlUp).Row

        .Range("A1:A" & LRow).Value = Date
        .Columns(1).EntireColumn.AutoFit
    End With
End Sub 
```

# key - 如何检索所有 localStorage 值

> ID：11179687
> 
> 赞同：1
> 
> 时间：2012-06-24T17:39:23.847
> 
> 标签：key, local-storage, key-value-store

在开发我的应用程序时，我使用`localStorage["key"]`并`key`成为不同的字符串来存储我的值。

现在我什至不知道我用过的所有键。

有没有办法从我的文件系统中检索所有键及其值？

有没有办法放弃整个`localStorage`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T17:44:17.217

`localStorage.clear();`工作恰到好处！

但是知道和检索所有键值对的另一个问题仍然存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T17:54:22.003

您可以使用迭代器来获取所有键...

```
for (var key in localStorage) {
    console.log(key + ": " + localStorage[key]);
} 
```

根据*oneofthelions*，*localStorage.clear()*可以删除所有项目。

# c - 不同语义的函数调用

> ID：11179689
> 
> 赞同：6
> 
> 时间：2012-06-24T17:39:33.910
> 
> 标签：c, function

考虑此代码具有 3 个不同的函数调用语义：

```
void f(void){
   puts("OK");
}

int main(void){
   f();
  (*f)();
  (&f)();

  return 0;
} 
```

第一种是调用 f 的标准方式，

第二个是取消引用函数指针的语义，

但在第三个中，我将 & 运算符应用于函数名称，它似乎工作正常。

第二种和第三种情况会发生什么？

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-24T17:50:13.907

函数调用**总是**通过函数指针执行的。从 C99 第 6.5.2.2 节：

> 表示被调用函数的表达式应具有指向函数的类型指针。

但是，几乎在所有情况下，函数类型都会衰减为函数指针类型。从 C99 第 6.3.2.1 节：

> 除非它是运算`sizeof`符或一元`&`运算符的操作数，否则类型为“函数返回*类型*”的函数指示符将转换为类型为“指向函数返回*类型*的指针”的表达式。

因此，您的三个电话被评估为：

```
(&f)();
(&(*(&f)))();
(&f)(); 
```

都是有效的。但很明显，第一个 ( `f()`) 是最干净、最容易阅读的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T17:52:00.627

在第二种情况下，您使用的是函数指针。函数指针用于记住对函数的引用，并能够在调用的其他地方调用它。它们通常用于实现回调。因此，如果您存储了指向函数的指针，则应使用第一种表示法。

我认为第一个和第三个是等价的。事实上，如果您声明一个函数指针，您可以通过以下两种方式对其进行初始化：

```
void AFunction();
void (*funcPtr)() = NULL;

funcPtr = AFunction; 
funcPtr = &AFunction; 
```

# c# - 如何进一步优化（首先是速度，然后是内存）

> ID：11179692
> 
> 赞同：-1
> 
> 时间：2012-06-24T17:39:50.750
> 
> 标签：c#, .net, performance, optimization

我有这个小代码，它接受一个对象并将其转换为字节 []。使用 C# 4.0。我可以在速度和内存使用方面进一步优化吗？即使是很小的变化也会很棒 - 每秒调用数千次以上。

```
 public static byte[] ObjectToByteArray(object obj)
    {
        if (obj == null)
            return null;
        BinaryFormatter bf = new BinaryFormatter();
        MemoryStream ms = new MemoryStream();

        using (ms)
        {
            bf.Serialize(ms, obj);  
        }

        return ms.ToArray();
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T17:43:28.723

如果您想进一步优化这一点，您需要知道的第一件事是您目前花费最多的时间。你是通过探查器运行的吗？结果如何？

我还会问自己“优化它会给我的用户带来什么具体的好处？”。换句话说，我优化这个是因为作为一名工程师，我想完善代码还是因为它会给我交付解决方案的人带来真正的好处？

我怀疑您大部分时间都在执行实际的序列化，更改为不同的序列化程序可能会产生最大的好处。请参阅以下问题以获取替代的、更快的序列化程序：

[.NET 中快速紧凑的对象序列化](https://stackoverflow.com/questions/549128/fast-and-compact-object-serialization-in-net)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T19:28:56.317

问题是 BinaryFormatter 使用反射来读取对象的字段。假设您有一个带有 1 个字段的简单类：

```
[Serializable]
public class Test
{
    public int A;
} 
```

如果您使用 BinaryFormatter 序列化一个数组，它将为每个 Test 实例执行类似的操作：

```
int val = (int)typeof(Test).GetField("A").GetValue(obj);
var bytes = BitConverter.GetBytes(val);
stream.Write(bytes, 0, bytes.Length); 
```

对 GetField() 的调用将消耗大量时间。您可以使用 3 种方式显着提高速度：

1.  手动序列化所有内容。类似于此代码的内容：

    ```
    void SimpleSerialize(Stream stream, Test[] arr)
    {
        foreach (var obj in arr)
        {
            var bytes = BitConverter.GetBytes(obj.A);
            stream.Write(bytes, 0, bytes.Length);
        }
    } 
    ```

2.  使用 Reflection.Emit 功能即时生成自定义序列化类。这更通用和“干净”，但需要付出很多努力。

3.  如果您对此感到满意，请使用一些适合您需求的第三方[序列化程序。](http://www.servicestack.net/benchmarks/NorthwindDatabaseRowsSerialization.100000-times.2010-08-17.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T17:42:44.557

您确实无法改进此代码。如果您正在处理简单的对象，您可以通过用[`BinaryFormatter`](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.formatters.binary.binaryformatter.aspx)a替换[`BinaryWriter`](http://msdn.microsoft.com/en-us/library/system.io.binarywriter.aspx)并手动序列化每个字段/属性来改进此代码，这将是您可以获得的最快序列化。但是，只有当您通过实验确定此代码在某种程度上是您的应用程序的瓶颈时，您才应该采取这种极端措施。否则，您可能会浪费时间进行微优化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-24T19:13:50.513

[将ThreadStatic](http://msdn.microsoft.com/en-us/library/system.threadstaticattribute.aspx) 定义`byte[]`为实例字段并将其用作缓存。将你的内存流包裹在这个缓存对象周围。当您`MemoryStream`按照代码中所写的方式使用时，您将执行大量分配、重新分配和数组复制步骤，并且`MemoryStream`可以调整大小。还需要考虑垃圾收集的成本。

可能，虽然我不确定这将如何工作，但将您的格式化对象缓存为`ThreadStatic`实例字段。

PS，我确定这是一个错误，但请注意，您`MemoryStream`在使用它之前将其丢弃。

# javascript - 如何通过按按钮而不是通过按 div 本身移动来使移动的 div 移动？

> ID：11179693
> 
> 赞同：2
> 
> 时间：2012-06-24T17:39:54.603
> 
> 标签：javascript, html, jsfiddle

我使用这个[**jsFiddle**](http://jsfiddle.net/jtbowden/ykbgT/1/)在我正在设计的网页上实现了一个类似于 div 的 groupon (groupon.com)。

我的问题是，不是在 div 上单击右键来移动它，而是如何设置它以便每个 div 都有一个按钮，并且您必须单击按钮（位于 div 上）才能继续到下一个 div，而不是只是单击没有按钮的 div 本身？

非常感谢所有帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T17:59:29.267

我已经用你现有的代码更新了你的小提琴，看看[**这个演示**](http://jsfiddle.net/heera/ykbgT/2453/)。

```
$('.box button').click(function() {
    $('.box').each( function() {
        if ($(this).offset().left < 0) {
            $(this).css("left", "150%");
        }
    });

    var t=$(this);
    t.parent().animate({ left: '-50%' }, 500);
    if (t.parent().next().size() > 0) {
         t.parent().next().animate({ left: '50%' }, 500);
    }
    else{
        t.parent().prevAll().last().animate({ left: '50%' }, 500);
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T18:02:47.877

**HTML 示例**

```
<div id="container">
    <div id="box1" class="box"><button class="button">Div #1</input></div>
    <div id="box2" class="box"><button class="button">Div #2</input></div>
    <div id="box3" class="box"><button class="button">Div #3</input></div>
    <div id="box4" class="box"><button class="button">Div #4</input></div>
    <div id="box5" class="box"><button class="button">Div #5</input></div>
</div> 
```

**脚本示例**

```
$('.box .button').click(function() {
    $('.box').each( function() {
        var $currentBox = $(this);

        if ($currentBox.offset().left < 0) {
            $currentBox.css("left", "150%");
        }
    });

    var $currentDiv = $(this).parent();

    $currentDiv.animate({
         left: '-50%'
     }, 500);

     if ($currentDiv.next().size() > 0) {
         $currentDiv.next().animate({
             left: '50%'
         }, 500);
     } else {
         $currentDiv.prevAll().last().animate({
             left: '50%'
         }, 500);
     }
}); 
```

​</p>

见[**演示**](http://jsfiddle.net/rn2FX/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T17:57:43.683

[http://jsfiddle.net/ykbgT/2446/](http://jsfiddle.net/ykbgT/2446/)

相同的代码，只是进行了调整，以便在按下链接（或按钮）时它会执行相同的操作，但您现在使用 $(this).parent() （因为 $ （this）是链接，父是div）

**编辑：**更新以缓存父级。

# ruby - rspec：未定义的方法“双”

> ID：11179703
> 
> 赞同：5
> 
> 时间：2012-06-24T17:40:30.563
> 
> 标签：ruby, rspec, rubygems, rspec2

我正在尝试创建一个双重但我不断收到此错误：

```
 undefined method `double' for #<Class:0x007fa48c234320> (NoMethodError) 
```

我怀疑这个问题与我的规范助手有关，所以我在下面添加了我的规范助手：

```
$LOAD_PATH.unshift(File.join(File.dirname(__FILE__), '..', 'lib'))
$LOAD_PATH.unshift(File.dirname(__FILE__))

require 'rspec'
require 'webmock/rspec'
include WebMock::API
include WebMock::Matchers

Dir["#{File.dirname(__FILE__)}/support/**/*.rb"].each { |f| require f }

RSpec.configure do |config|
end 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-25T20:29:59.243

`double`存在于示例（和`before`块等）中，但听起来您正试图在这些上下文之一之外调用它。

所以例如

```
describe Thing do
  thing = double()
  it 'should go bong'
  end
end 
```

不正确但是

```
describe Thing do
  before(:each) do
    @thing = double()
  end

  it 'should go bong' do
    other_thing = double()
  end
end 
```

很好

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-03-28T17:21:23.500

您还可以`double`通过要求独立文件在 RSpec 之外使用 RSpec。

```
require "rspec/mocks/standalone"

greeter = double("greeter")
allow(greeter).to receive(:say_hi) { "Hello!" }
puts greeter.say_hi 
```

来自文档：[https ://relishapp.com/rspec/rspec-mocks/v/3-2/docs/outside-rspec/standalone](https://relishapp.com/rspec/rspec-mocks/v/3-2/docs/outside-rspec/standalone)

# apache - 尝试访问我的站点时出现内部服务器错误

> ID：11179706
> 
> 赞同：9
> 
> 时间：2012-06-24T17:40:36.077
> 
> 标签：apache, web, internal-server-error

我收到这个错误。

> 内部服务器错误
> 
> 服务器遇到内部错误或配置错误，无法完成您的请求。
> 
> 请联系服务器管理员 webmaster@crimsonbux.com 并告知他们错误发生的时间，以及您可能所做的任何可能导致错误的事情。
> 
> 服务器错误日志中可能提供有关此错误的更多信息。
> 
> 此外，在尝试使用 ErrorDocument 处理请求时遇到 500 Internal Server Error 错误。
> 
> Apache/2.2.20 (Unix) mod_ssl/2.2.20 OpenSSL/0.9.8e-fips-rhel5 mod_bwlimited/1.4 mod_fcgid/2.3.6 服务器位于 www.crimsonbux.com 端口 80

有人可以让我知道如何解决吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-24T17:46:02.330

500 错误通常是由于权限问题引起的。查看以下关于使用 Cyber​​duck 设置适当权限的指南（您需要研究特定 FTP 客户端的权限）：

[http://webmaster.iu.edu/chmod/chmod_mac.shtml](http://webmaster.iu.edu/chmod/chmod_mac.shtml)

此外，您可以查看错误日志并获取有关导致错误的原因的更多信息。如果您的主机为您提供了管理员 gui，那将是一个检查的好地方。这是 cPanel 的示例视频（您需要与您的主机核实如何在您的特定管理界面上访问此报告）：

[http://www.youtube.com/watch?v=pzO1UNHZjZo](http://www.youtube.com/watch?v=pzO1UNHZjZo)

看来您的主机 (bigrock.in) 提供了 cPanel 和 Linux 主机，所以上面的视频应该会有所帮助。如果没有，请考虑通过在此处提交支持票与您的房东联系：

[http://support.bigrock.com/index.php?/Tickets/Submit](http://support.bigrock.com/index.php?/Tickets/Submit)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-21T14:52:39.333

我也收到 500 内部服务器错误。 [我的问题](https://stackoverflow.com/questions/23693792/php-and-javascript-working-on-localhost-but-not-on-hosted-website)

尝试检查服务器错误。在我的情况下，我使用

```
cd /var/log 
```

然后我使用`sudo cat apache2/access.log` （我无法`cd`直接进入 apache2 目录，所以这个解决方法）

`sudo cat apache2/error.log`如果有帮助也试试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-01-06T11:22:55.597

如果上述任何解决方案或其他解决方案不适合您，请查看此链接

[https://forums.cpanel.net/threads/public_html-is-writable-by-group-error.627391/](https://forums.cpanel.net/threads/public_html-is-writable-by-group-error.627391/)

此处 Cpanel 社区团队成员建议**public_html 应将权限设置为 750**

这个解决方案对我有用:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-13T11:03:44.363

就我而言，这是由于我的`PHP`文件中有一个日文空间（Zenkaku 空间）。

对于`PHP`，它向客户端显示错误或将错误记录到文件取决于您如何配置`php.ini`文件。`PHP`无论哪种方式，当有日本空间时，我什么也没得到`myfile.php`

# asp.net-mvc - 如何从 aspnet 架构中截断所有表？

> ID：11179707
> 
> 赞同：1
> 
> 时间：2012-06-24T17:40:39.037
> 
> 标签：asp.net-mvc, tsql, sql-server-2008-r2, database-schema

我一直在用我的新 MVC 应用程序进行大量测试，现在我已准备好进入新的开发阶段。

我想要`TRUNCATE`我所有的 aspnet 生成的表，但我似乎无法弄清楚删除所有外键约束的顺序。

```
TRUNCATE TABLE  aspnet_Profile 
TRUNCATE TABLE  aspnet_UsersInRoles 
TRUNCATE TABLE  aspnet_PersonalizationPerUser
TRUNCATE TABLE  aspnet_Membership
TRUNCATE TABLE  aspnet_users 
```

在这一点上，我在 aspnet_Users 上遇到了一个外键约束问题。查看图表，我似乎找不到更多引用 aspnet_users 的内容。

我实际上是从我在网上找到的删除语句中提取了这个命令，该语句在逐个用户中运行良好。

```
DECLARE @UserId uniqueidentifier
SET @UserId = 'f0a05439-5218-4668-b11d-21a43385ea2f'

DELETE FROM aspnet_Profile WHERE UserID = @UserId
DELETE FROM aspnet_UsersInRoles WHERE UserID = @UserId
DELETE FROM aspnet_PersonalizationPerUser WHERE UserID = @UserId
DELETE FROM dbo.aspnet_Membership WHERE UserID = @UserId
DELETE FROM aspnet_users WHERE UserID = @UserId 
```

其中，我可能可以重新工作以删除所有用户，但我更愿意`TRUNCATE`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T17:47:33.893

您不能`TRUNCATE`使用外键引用它的表。即使两个表都是空的，即使您禁用了外键约束。

假设您有再次生成约束的脚本，您可以从引用表中删除外键，例如：

```
SELECT '
  ALTER TABLE ' + QUOTENAME(OBJECT_SCHEMA_NAME(fk.parent_object_id))
   + '.' + QUOTENAME(OBJECT_NAME(fk.parent_object_id))
   + ' DROP CONSTRAINT ' + QUOTENAME(fk.name) + ';'
FROM sys.foreign_keys AS fk
INNER JOIN sys.tables AS t
ON fk.referenced_object_id = t.[object_id]
WHERE t.name LIKE 'aspnet[_]%';

SELECT 'TRUNCATE TABLE ' + QUOTENAME(name) + ';'
  FROM sys.tables 
  WHERE name LIKE 'aspnet[_]%'; 
```

否则，仅使用`DELETE`而不是可能更安全`TRUNCATE`（然后`DBCC CHECKIDENT`，如果您的目标是在 1 处重新启动任何`IDENTITY`值）。

# macos - WebView 滚动时显示线条

> ID：11179711
> 
> 赞同：0
> 
> 时间：2012-06-24T17:40:50.033
> 
> 标签：macos, cocoa, webview

我有一个 webview，它在上下滚动时显示线条。我将一段简单的 HTML 加载到 webview 中，并将基本 URL 设置为`/`，当在 web 视图中滚动时，它会放置水平线，即使 HTML 中不存在这些水平线。

我附上了一张照片。Web 视图应该显示一个白页，其中文本后面的文本重复了几次。

> 这是一个测验！

相反，它还添加了水平线。

有谁知道为什么会发生这种情况以及可能的解决方法？

![滚动时显示水平线的 Webview](../Images/2280f2b13b59fb37b06763fe51c952ff.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T17:55:16.140

这是因为 webview 在文本字段下方仅下降了两个像素。我想这本质上是 webview 中的一个错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-11T10:28:53.700

这是一个 WebView 错误。对于遇到此问题的任何人，您可能想尝试以下解决方法：将隐藏的 div 添加到 html 页面。

```
<div style="height: auto; width: auto; top: -100px; left: -100px; visibility: hidden; position: fixed; overflow: visible; white-space: nowrap;opacity: 0 !important;pointer-events: none !important;"></div> 
```

# php - 如何显示 100 个字符并为扩展器隐藏更多？

> ID：11179712
> 
> 赞同：0
> 
> 时间：2012-06-24T17:40:49.993
> 
> 标签：php, javascript, jquery, expander, ellipsis

我有一个带有 MySQL 数据库的动态站点，我想像在 Facebook 上一样创建“*查看更多”按钮，我可能应该使用 jQuery 扩展器，但我有一个大问题。*我不知道如何隐藏更多的字符...

贝娄是我的代码：

```
if ( $message = mb_strlen(htmlspecialchars($this->post_message) ) > 200 ); {
    $message = str_cut(htmlspecialchars($this->post_message),100);
    echo $message.'<span style="float:left;clear:both"> <a href="" target="_blank" title="more" style="font-size:9px;" >more</a></span>';
} 
```

谁能为此处理完整的代码？这段代码只是*削减*了更多的字符，但我想隐藏它们并在扩展器中显示！

对不起我的语言不好，我的英语说得不好:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T17:50:18.973

您的语法有错误。

```
if ( $message   =  mb_strlen(htmlspecialchars($this->post_message) ) > 200 ); { 
```

应该

```
if ( $message   =  mb_strlen(htmlspecialchars($this->post_message) ) > 200 ) { 
```

`;`你的 if 语句后面应该没有

`str_cut`不是 PHP 函数。您正在寻找的是[substr](http://www.php.net/manual/en/function.substr.php)。

在你的情况下，你会像这样使用它：

```
$message = substr(htmlspecialchars($this->post_message),0,100); 
```

# macos - Mac 的文本标记/分析工具

> ID：11179714
> 
> 赞同：0
> 
> 时间：2012-06-24T17:41:13.887
> 
> 标签：macos, text, analysis, tagging

我是一名从事人文研究的博士生。作为我研究的一部分，我收集了很多采访文本。为了分析这些数据，我希望能够轻松地用关键字标记文本部分（标签需要能够重叠，并且可能按层次组织），然后能够从多个文件中整理这些部分。我需要能够在 Mac 上执行此操作。

这感觉像是一项简单的任务，但我找不到任何软件来做这件事，既不是非常笨重，也不是价值数百英镑的大规模杀伤力。有没有什么好的软件可以做到这一点，或者有没有用其他软件做的好方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T17:29:55.880

您好，我建议您使用 RQDA。我已经用法语和英语完成了关于这个适用于所有平台的免费软件的教程视频：

[http://www.youtube.com/playlist?list=PL66CB2FF65368715C&feature=plcp](http://www.youtube.com/playlist?list=PL66CB2FF65368715C&feature=plcp)

# objective-c - 核心动画动画滞后

> ID：11179717
> 
> 赞同：0
> 
> 时间：2012-06-24T17:41:41.373
> 
> 标签：objective-c, ios, ipad, core-animation

我试图在使用核心动画时淡入一些视图。一切都很好，直到第 4 或第 5 个视图淡入。动画停止，几秒钟后，其余视图仅显示在屏幕上（没有动画发生）。我在第三代 iPad 上进行了测试，所以它不会是硬件过时的问题。代码：

**viewDidLoad**

```
- (void)viewDidLoad {
    [super viewDidLoad];
    self.subViews = self.view.subviews;

    for (UIView *view in self.subViews) {
        view.backgroundColor = [UIColor clearColor];
        PhotoFrame *photoFrame = [[PhotoFrame alloc] init];
        photoFrame.photo.image = [UIImage imageNamed:[NSString stringWithFormat:@"test%d.jpg", arc4random() % 6 + 1]];
        [view addSubview:photoFrame];
        view.layer.opacity = 0;
    }
} 
```

**viewDidAppear**

```
- (void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];
    [self startAnimations];
} 
```

**开始动画**

```
- (void)startAnimations {
    int count = 1;
    for (UIView *view in self.subViews) {
        CALayer *animationLayer = view.layer;

        CABasicAnimation *animation = [CABasicAnimation animationWithKeyPath:@"opacity"];
        animation.fromValue = @0.0;
        animation.toValue = @1.0;
        animation.duration = 0.3;
        animation.beginTime = CACurrentMediaTime() + count * 0.3;
        animation.removedOnCompletion = NO;
        animation.fillMode = kCAFillModeForwards;

        [animationLayer addAnimation:animation forKey:@"opacityAnimation"];
        count++;
    }
} 
```

我希望任何人都可以帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T10:51:35.667

我建议要么切换到 UIView 动画方法`animateWithDuration:animations:`，或者在提交动画而不使用`removedOnCompletion = TRUE`. 正如我在上面的评论中所说，removedOnCompletion 实际上会使动画保持活动状态，并应用于渲染的每一帧。我发现当有很多动画处于活动状态时，事情会变慢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T18:06:18.357

为什么不使用 UIView animateWithDuration？

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIView_Class/UIView/UIView.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIView_Class/UIView/UIView.html)

它也会在你的观点中消失，我从来没有遇到过任何问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T20:11:40.527

您可以尝试在 a 中执行所有动画以[`CATransaction`](https://developer.apple.com/library/mac/documentation/GraphicsImaging/Reference/CATransaction_class/Introduction/Introduction.html)将它们批处理在一起，或者您可以将它们全部添加到一个公共容器视图中，并且只为容器视图的不透明度设置动画。由于视图不需要在动画期间重绘，您也可以使用`shouldRasterize = YES;`

所有这些事情可能会或可能不会影响性能，在某些情况下，光栅化甚至可能使情况变得更糟。

此外，如果涉及到阴影，您应该*为*每个阴影设置一个阴影路径，因为当涉及到阴影时，这将大大提高性能。

# ruby-on-rails - 添加多级用户访问权限

> ID：11179718
> 
> 赞同：0
> 
> 时间：2012-06-24T17:41:41.840
> 
> 标签：ruby-on-rails

我试图在我的应用程序中添加多个级别的用户，这是我可以想出的想法：

```
class ApplicationController < ActionController::Base

 before_filter :setup , :authorize
protect_from_forgery

 def setup
 @minimum_permission = "admin"
end  

def authorize
  perm = { admin: 3 , moderator: 2 ,  reader: 1 }
  perm.default = 0
  if    User.find_by_id(session[:user_id])
        unless perm[session[:user_permission].to_s.to_sym] >= perm[@minimum_permission.to_sym]
            redirect_to global_login_url, notice: "you need to have "+@minimum_permission+" privileges to access this page"
        end
  else
        redirect_to global_login_url, notice: "Please log in"
  end
end
end 
```

在我看来，我会做类似的事情：

```
class FieldsController < ApplicationController
skip_before_filter :authorize
# GET /fields
# GET /fields.json
def index
@minimum_permission = "moderator"
authorize
  @fields = Field.all   
  respond_to do |format|
    format.html # index.html.erb
    format.json { render json: @fields }
  end
  end
....
end 
```

这是我的会话控制器：

```
 class SessionsController < ApplicationController
 skip_before_filter :authorize
  def new
  end

 def create

user = User.find_by_cpf_no(params[:cpf_no])
if user and user.authenticate(params[:password])
  session[:user_id] = user.id
  session[:user_permission] = user.permission
  session[:user_name] = user.name
  redirect_to fields_url, alert: "successfully logged in"
else
  redirect_to fields_path, alert: "Invalid user/password combination"
end
 end

 def destroy
session[:user_id] = nil
session[:user_permission] = nil
session[:user_name] = nil
redirect_to root_path, notice: "Logged out"
 end
end 
```

这适用于登录的人！但是当我尝试在尚未登录的情况下访问索引时，出现此错误：

“在此操作中多次调用渲染和/或重定向。请注意，您只能调用渲染或重定向，每个操作最多调用一次。另请注意，重定向和渲染都不会终止操作的执行，所以如果您想重定向后退出操作，您需要执行“redirect_to(...) and return”之类的操作。”

我怎样才能解决这个问题？还有没有更好的方法来处理多层次的用户？谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T22:06:16.047

So somewhere you have a before filter or other redirect sending you round in circles. The log should have given you atleast one of the lines that tried to redirect. I'd start by checking that global_login_url (not path?) is skipping all filters and that it the func exits after rendering and doesn't hit another on further down.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T19:41:44.413

那里有很棒的库，可以满足您开箱即用的需求。看看[cancan](https://github.com/ryanb/cancan/) ，例如。在 cancan 的 wiki 中，您也可以找到有关[基于角色的授权](https://github.com/ryanb/cancan/wiki/Role-Based-Authorization)的条目。

# c# - C#如何从父列表访问继承的对象

> ID：11179719
> 
> 赞同：1
> 
> 时间：2012-06-24T17:41:43.893
> 
> 标签：c#, list, object, parent, inherited

我正在尝试找到一种方法来制作包含各种继承对象的父对象列表。这是一个例子。

```
class Prog {
    public Prog ( ) {
        List<Shape> shapes = new List<Shape>();
        shapes.Add( new Cube() );
        shapes.Add( new Shape() );

        //All those ways will not work, I cannot figure a way how to do this
        shapes[0].CubeFunction(); 
        (Cube)shapes[0].CubeFunction();
        Cube cube = shapes[0];
    }
}

class Shape {
    public Shape (){}
}

class Cube : Shape {        
    public Cube (){}
    public void CubeFunction(){}
} 
```

有谁知道如何让 Prog 类中的代码工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-24T17:43:10.970

您的演员表几乎是正确的-只是因为优先级而出错。你需要：

```
((Cube)shapes[0]).CubeFunction(); 
```

或者：

```
Cube cube = (Cube) shapes[0];
cube.CubeFunction(); 
```

请注意，像这样进行投射的需要通常有点设计味道 - 如果你可以避免它，那么值得尝试这样做。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-24T17:58:31.520

如果您不确定强制转换是否有效并且不希望抛出[InvalidCastException](http://msdn.microsoft.com/en-us/library/system.invalidcastexception%28v=vs.100%29.aspx)，您可以这样做：

```
Cube cube = shapes[0] as Cube;
if (cube == null)
{
    // cast is not valid
}
else
{
    cube.CubeFunction();
} 
```

# java - 当我发送以数据包分隔的文件时，新创建的文件为空

> ID：11179720
> 
> 赞同：0
> 
> 时间：2012-06-24T17:41:45.617
> 
> 标签：java

我正在制作一个客户端-服务器程序，它将文件分成数据包。当我发送文件时，当我打开它时它是空的。我的问题是那个空文件，我该如何更正代码才能工作。我想分离文件，如果其中一个数据包发生问题，则从另一台 PC 发送它。我不擅长java，但我正在努力提高我的技能。这是两个代码：
**服务器部分：**

```
import java.net.*;
import java.io.*;

public class PacketServer {
    public static void main(String[] args) throws IOException {
        // create socket
        ServerSocket servsock = new ServerSocket(29311);
        while (true) {
            System.out.println("Waiting...");

            Socket sock = servsock.accept();
            System.out.println("Accepted connection : " + sock);

            // sendfile
            File myFile = new File("D://test.txt");
            System.out.println(myFile.length());

            byte[] mybytearray = new byte[(int) myFile.length()];

            PrintWriter output = new PrintWriter(sock.getOutputStream(), true);
            output.println(myFile.length());

            FileInputStream fis = new FileInputStream(myFile);
            BufferedInputStream bis = new BufferedInputStream(fis);

            bis.read(mybytearray, 0, mybytearray.length);

            OutputStream os = sock.getOutputStream();
            System.out.println("Sending...");

            long now = System.currentTimeMillis();
            int obshto = (int) myFile.length();
            int b = obshto / 60;
            int c = obshto % 60;// ako file ne e kraen broi paketi ot 60 byte
            System.out.println(c);
            int packet;
            int gpacket;
            for (packet = 1; packet <= b; packet++) {

                System.out.println("izprashta packet:" + packet
                        + " s golemina " + 60 * packet + " bit / "
                        + myFile.length() + " w moment: " + now);
                os.write(mybytearray, 0, 60);
                if ((c != 0) && (b == packet)) {
                    gpacket = c;
                    System.out.println("izprashta packet:" + packet
                            + " s golemina " + (c) + " bit / "
                            + myFile.length() + " w moment: " + now);
                    os.write(mybytearray, 0, c);
                }
            }
            os.flush();
            sock.close();
        }
    }
} 
```

和
**客户部分：**

```
import java.net.*;
import java.util.Scanner;
import java.io.*;

public class PacketClient {
    public static void main(String[] args) throws IOException {

        int filesize = 6022386;
        long start = System.currentTimeMillis();

        Socket sock = new Socket("127.0.0.1", 29311);
        System.out.println("Connecting...");
        Scanner input = new Scanner(sock.getInputStream());

        String response = input.nextLine();
        int Fsize = Integer.parseInt(response);

        // receive file
        byte[] mybytearray = new byte[filesize];
        InputStream is = sock.getInputStream();
        FileOutputStream fos = new FileOutputStream("D://Receive/test.txt");
        BufferedOutputStream bos = new BufferedOutputStream(fos);

        // obshto packets kam momenta
        int obshto = Fsize;
        int b = obshto / 60;
        int c = obshto % 60;
        int bytesRead;
        int current;

        for (b = obshto / 60; b >= 1; b--) {

            bytesRead = is.read(mybytearray, (b * 60), 60);
            current = bytesRead;
            long now1 = System.currentTimeMillis();

            do {
                bytesRead = is.read(mybytearray, current,
                        (mybytearray.length - current));
                System.out.println("bytesRead " + bytesRead);

                if (bytesRead <= Fsize)
                    current += bytesRead;

                System.out.println("bytesRead " + bytesRead);
            } while (bytesRead > -1);
            System.out.println("poluchava packet:" + b + " s golemina" + 60 * b
                    + " bit / " + Fsize + " w moment: " + now1);

            bos.write(mybytearray, 0, 60);
            if ((c != 0) && (b == 1)) {

                bytesRead = is.read(mybytearray, 0, c);
                current = bytesRead;
                long now = System.currentTimeMillis();

                do {
                    bytesRead = is.read(mybytearray, current,
                            (mybytearray.length - current));
                    // System.out.println("bytesRead " + bytesRead);

                    if (bytesRead <= Fsize)
                        current += bytesRead;

                    // System.out.println("bytesRead "+ bytesRead);
                } while (bytesRead > -1);
                System.out.println("poluchava packet:" + (b + 1)
                        + " s golemina" + c + " bit / " + Fsize + " w moment: "
                        + now);

                bos.write(mybytearray, 0, c);
            }

            bos.flush();

            long end = System.currentTimeMillis();
            System.out.println(end - start);

            bos.close();
            sock.close();
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T17:47:54.280

常见的建议

*   除非您真的知道自己在做什么，否则不要在同一流中混合文本和二进制文件。这只会导致混乱。
*   如果可以，请使用现有的库，例如 apache commons IOUtils，或者阅读它们并查看它们是如何工作的。
*   格式化您的代码，使其可读。
*   你的代码比它需要的复杂得多，而且不清楚为什么。有什么`60`用？

你能用 a 让你的问题清楚，`?`所以我们知道它是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T17:51:49.667

试试这个方法。当数据由传输 OSI 层（TCP/IP 协议）处理时，您不必将数据拆分为数据包。

服务器：

```
import java.net.*;
import java.io.*;

public class FileServer {
    public static void main(String[] args) throws IOException {
        // Create socket
        ServerSocket servsock = new ServerSocket(13267);
        while (true) {
            System.out.println("Waiting...");

            Socket sock = servsock.accept();
            System.out.println("Accepted connection : " + sock);

            // Send file
            File myFile = new File("source.pdf");
            byte[] mybytearray = new byte[(int) myFile.length()];
            FileInputStream fis = new FileInputStream(myFile);
            BufferedInputStream bis = new BufferedInputStream(fis);
            bis.read(mybytearray, 0, mybytearray.length);
            OutputStream os = sock.getOutputStream();
            System.out.println("Sending...");
            os.write(mybytearray, 0, mybytearray.length);
            os.flush();
            sock.close();
        }
    }
} 
```

客户：

```
import java.net.*;
import java.io.*;

public class FileClient {
    public static void main(String[] args) throws IOException {
        int filesize = 6022386; // filesize temporary hardcoded

        long start = System.currentTimeMillis();
        int bytesRead;
        int current = 0;
        // Localhost
        Socket sock = new Socket("127.0.0.1", 13267);
        System.out.println("Connecting...");

        // Receive file
        byte[] mybytearray = new byte[filesize];
        InputStream is = sock.getInputStream();
        FileOutputStream fos = new FileOutputStream("source-copy.pdf");
        BufferedOutputStream bos = new BufferedOutputStream(fos);
        bytesRead = is.read(mybytearray, 0, mybytearray.length);
        current = bytesRead;

        do {
            bytesRead = is.read(mybytearray, current,
                    (mybytearray.length - current));
            if (bytesRead >= 0)
                current += bytesRead;
        } while (bytesRead > -1);   

        bos.write(mybytearray, 0, current);
        bos.flush();
        long end = System.currentTimeMillis();
        System.out.println(end - start);
        bos.close();
        sock.close();
    }
} 
```

# android - 按活动对话框上的后退按钮停止第一个活动

> ID：11179723
> 
> 赞同：0
> 
> 时间：2012-06-24T17:42:14.097
> 
> 标签：android, android-intent, android-activity

我目前正在开发一个 android 项目，当用户在使用对话框主题的活动上按下后退按钮时遇到问题。

基本上我有一个活动，我们称之为 MyActivity 和第二个活动，它使用名为 MyDialog 的@android:style/Theme.Holo.Dialog。

当屏幕上显示 MyDialog 活动时，活动对话框按预期在对话框中启动，但是当用户按下后退按钮时，对话框活动按预期关闭，但启动活动即 MyActivity 似乎完成了，我只是得到一个空白屏幕。

我没有设置任何标志来启动活动，所以我不明白它为什么会这样做。下面是我用来启动对话活动的代码。

```
public OnItemClickListener mListView = new OnItemClickListener() {

    public void onItemClick(AdapterView<?> arg0, View view, int position,
            long id) {
        String selection = ((TextView)view).getText().toString();
        StringTokenizer st = new StringTokenizer(selection, "\n");
        String name = st.nextToken();
        String username = st.nextToken();
        Intent intent = new Intent(PasswordList.this, LoginSelectionManager.class);
        intent.putExtra("name", name);
        intent.putExtra("username", username);
        startActivity(intent);
    }
}; 
```

**更新** 如下请求是 MyActivity 的 onResume 方法的代码

```
@Override
public void onResume()
{
    super.onResume();
    populateListArray();
} 
```

所有这一切都是调用一个函数，用数据库中的数据重新填充 ListView 数组适配器。下面是这个的代码

```
private void populateListArray()
{

    ArrayList<Spanned> passwords = managePasswordList.getPasswordList();
    if (passwords != null)
    {
        passwordArrayAdapter = new ArrayAdapter<Spanned>(this, 
                android.R.layout.simple_list_item_1, passwords);
        setListAdapter(passwordArrayAdapter);
        passwordArrayAdapter.setNotifyOnChange(true);
        myListView.setTextFilterEnabled(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T18:28:18.517

您需要为启动新 Activity 的意图设置标志。它可以通过intent.setFlags(Intent. ...) 来完成，其中intent 是一个Intent 对象。查看 Android 文档以获取更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T18:28:30.540

登录`onFinish`这两个活动，看看哪些活动真正完成......我怀疑对话活动在按下后完成......

你得到一个空白屏幕的事实意味着你的活动还没有完成，它只是列表视图是空的。

所以出现的下一个问题是为什么您的密码列表在`onResume`. 你真的需要在 中设置适配器`onResume`吗？请参阅将其移至`onCreate`..

# cocoa - 创建新 NSView 时的 ARC 问题

> ID：11179724
> 
> 赞同：0
> 
> 时间：2012-06-24T17:42:20.467
> 
> 标签：cocoa, automatic-ref-counting

我正在尝试使用我自己的自定义 OpenGL NSView 以编程方式创建一个窗口作为它的视图，但是我遇到了 ARC 破坏我的视图的问题。这是我现在使用的代码：

```
[_window setContentView:[[MyOpenGLView alloc] init]]; 
```

`MyOpenGLView`只是`NSView`我处理所有 OpenGL 调用的地方。我在我的中设置了 OpenGL `initWithFrame:(NSRect)`，然后返回我自己。我可以单步执行该代码并且它可以正常工作。问题是一旦`setContentView`被调用，我新分配`MyOpenGLView`的就会自动释放。有没有办法让窗口保留视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T18:02:46.980

这个问题与我的观点无关，但与我`CVDisplayLinkOutputCallback`没有`@autoreleasepool`设置块有关。[这个](https://stackoverflow.com/questions/8835956/make-cvdisplaylink-automatic-reference-counting-play-well-together)问题提供了设置`CVDisplayLink`回调的正确方法。

# page-lifecycle - JSF 1.2 生命周期细节

> ID：11179727
> 
> 赞同：1
> 
> 时间：2012-06-24T17:42:58.427
> 
> 标签：page-lifecycle, jsf-1.2

我想就 JSF 1.2 生命周期提出 2 个问题：

*   对 jsf 资源的所有请求都由 FacesServlet 管理，其服务方法启动所请求资源的生命周期。因此，对于每个请求：

    *   Web 容器创建一个新线程来处理请求
    *   线程调用 FacesServlet 的服务方法，该方法启动 jsf 生命周期
    *   整个生命周期运行在线程中

    这个对吗？

*   JSF 页面是否在生命周期的某个点被转换为 servlet？谈到渲染响应阶段，JavaEE 5 教程说：“在这个阶段，如果应用程序正在使用 JSP 页面，JavaServer Faces 实现将渲染页面的权限委托给 JSP 容器......组件将自己渲染为JSP 容器遍历页面中的标签。”

    这是否意味着响应是一次构造一个标签，而 jsp 容器遍历整个视图而无需将页面转换为 servlet 并调用生成的 jsp_service 方法（对于标准 jsp 页面）？

非常感谢你的帮助，

尼科

# magento - 除模块覆盖外，还会出现覆盖块

> ID：11179732
> 
> 赞同：2
> 
> 时间：2012-06-24T17:43:13.957
> 
> 标签：magento, magento-1.4

Magento 1.4.1.1

回溯历史，**app/code/core/Mage/GoogleAnalytics/Block/Ga.php**被复制到**app/code/local/Mage/GoogleAnalytics/Block/Ga.php**并进行了更改，以便该`protected function _toHtml() {}`函数可以生成正确的 Google页面上的分析异步 javascript 条目。原版存在未针对该网站正确向 Google 发布跟踪信息的问题。此重写功能完全正常，并获得了预期的结果。

为了清理，决定将此更改模块化为本地命名空间模块。创建了以下文件...

应用程序/etc/modules/Chief_GoogleAnalytics.xml

```
<?xml version="1.0"?>
<config>
    <modules>
        <Chief_GoogleAnalytics>
            <active>true</active>
            <codePool>local</codePool>
        </Chief_GoogleAnalytics>
    </modules>
</config> 
```

应用程序/代码/本地/Chief/GoogleAnalytics/etc/config.xml

```
<?xml version="1.0"?>
<config>
    <modules>
        <Chief_GoogleAnalytics>
            <version>0.1.0</version>
        </Chief_GoogleAnalytics>
    </modules>
    <global>
        <blocks>
            <googleanalytics>
                <rewrite>
                    <ga>Chief_GoogleAnalytics_Block_Ga</ga>
                </rewrite>
            </googleanalytics>
        </blocks>
    </global>
</config> 
```

app/code/local/Chief/GoogleAnalytics/Block/Ga.php

```
/**
 * GoogleAnalitics Page Block
 *
 * @category   Chief
 * @package    Chief_GoogleAnalytics
 * @author     Magento Core Team <core@magentocommerce.com>
 */
class Chief_GoogleAnalytics_Block_Ga extends Mage_GoogleAnalytics_Block_Ga
{
    /**
     * Prepare and return block's html output
     *
     * @return string
     */
    protected function _toHtml()
    {
        if (!Mage::getStoreConfigFlag('google/analytics/active')) {
            return '';
        }

        $this->addText('
<!-- BEGIN GOOGLE ANALYTICS CODE -->
<script type="text/javascript">
//<![CDATA[
    var _gaq = _gaq || [];
    _gaq.push(["_setAccount", "' . $this->getAccount() . '"]);
    _gaq.push(["_trackPageview", "'.$this->getPageName().'"]);

    (function() {
        var ga = document.createElement(\'script\'); ga.type = \'text/javascript\'; ga.async = true;
        ga.src = (\'https:\' == document.location.protocol ? \'https://ssl\' : \'http://www\') + \'.google-analytics.com/ga.js\';
        var s = document.getElementsByTagName(\'script\')[0]; s.parentNode.insertBefore(ga, s);
    })();
//]]>
</script>
<!-- END GOOGLE ANALYTICS CODE -->
        ');

        $this->addText($this->getQuoteOrdersHtml());

        if ($this->getGoogleCheckout()) {
            $protocol = Mage::app()->getStore()->isCurrentlySecure() ? 'https' : 'http';
            $this->addText('<script src="'.$protocol.'://checkout.google.com/files/digital/ga_post.js" type="text/javascript"></script>');
        }

        return parent::_toHtml();
    }
} 
```

当它来自**app/code/local/Mage/GoogleAnalytics/Block/Ga.php**时，而不是正常的单个更正脚本条目，我现在得到一个重复。Chief_GoogleAnalytics Block 覆盖首先出现，然后是来自**app/code/core/Mage/GoogleAnalytics/Block/Ga.php**的旧股票垃圾代码。Google Analytics 有一个布局 XML 文件，将其定义为在**after_body_start**中显示，这样就可以了。这是显示新块覆盖和旧块的重复项。是什么赋予了？

```
<!-- BEGIN GOOGLE ANALYTICS CODE -->
<script type="text/javascript">
//<![CDATA[
    var _gaq = _gaq || [];
    _gaq.push(["_setAccount", "UA-xxxxxx-x"]);
    _gaq.push(["_trackPageview", "/"]);

    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
//]]>
</script>
<!-- END GOOGLE ANALYTICS CODE -->

<!-- BEGIN GOOGLE ANALYTICS CODE -->
<script type="text/javascript">
//<![CDATA[
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ga);
    })();

    var _gaq = _gaq || [];
    _gaq.push(["_setAccount", "UA-xxxxxx-x"]);
    _gaq.push(["_trackPageview", "/"]);
//]]>
</script>
<!-- END GOOGLE ANALYTICS CODE --> 
```

加载块的 page.phtml 条目。

```
<?php echo $this->getChildHtml('after_body_start') ?> 
```

googleanalytics.xml 布局

```
<layout version="0.1.0">
    <default>
        <!-- Mage_GoogleAnalytics -->
        <reference name="after_body_start">
            <block type="googleanalytics/ga" name="google_analytics" as="google_analytics" />
        </reference>
    </default>
</layout> 
```

****通过在战略位置使用**`Mage::Log()` **with** **添加取证** 由于我们在这里传递一个数组对象，它比使用字符串要复杂一些。`$this->getData()`**

 ******_toHtml() 函数的开始**

```
2012-06-24T21:02:04+00:00 DEBUG (7): Array
(
    [type] => googleanalytics/ga
    [module_name] => Chief_GoogleAnalytics
) 
```

**立即使其** `parent::_toHtml();` **加载** `$original_output =parent::_toHtml`

```
2012-06-24T21:02:04+00:00 DEBUG (7): Array
(
    [type] => googleanalytics/ga
    [module_name] => Chief_GoogleAnalytics
    [account] => UA-xxxxxx-x
    [page_name] => /
    [text] => 
<!-- BEGIN GOOGLE ANALYTICS CODE -->
<script type="text/javascript">
//<![CDATA[
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ga);
    })();

    var _gaq = _gaq || [];
    _gaq.push(["_setAccount", "UA-xxxxxx-x"]);
    _gaq.push(["_trackPageview", "/"]);
//]]>
</script>
<!-- END GOOGLE ANALYTICS CODE -->

) 
```

为了防止这变成一个 ;tldr，记录`$this->getData();`最后返回的位置，吐出两个 javascript，但与原来的相反。

`$this->getData();`在没有引用的情况下`parent::_toHtml`传递以下内容，这是我们想要的返回对象。一个具有适当标识符的脚本...

```
2012-06-24T21:06:24+00:00 DEBUG (7): Array
(
    [type] => googleanalytics/ga
    [module_name] => Chief_GoogleAnalytics
    [account] => UA-xxxxxx-x
    [page_name] => /aircraft
    [text] => 
<!-- BEGIN GOOGLE ANALYTICS CODE -->
<script type="text/javascript">
//<![CDATA[
    var _gaq = _gaq || [];
    _gaq.push(["_setAccount", "UA-xxxxxx-x"]);
    _gaq.push(["_trackPageview", "/aircraft"]);

    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
//]]>
</script>
<!-- END GOOGLE ANALYTICS CODE -->

) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-24T19:55:23.827

首先，一个看似但并非真正迂腐的命名约定。当您将文件放入其中时`local`，这不是重写，而是代码池覆盖。当您创建自定义模块并使用`rewrite`节点时，这就是类重写。这是**两种**不同的行为，每一种行为都不同。这些差异就是您看到您所看到的行为的原因。

当您使用类覆盖时，您是在说

> 嘿 Magento，而不是包含你的类文件 a `Mage_GoogleAnalytics_Block_Ga`，而是包含我的

这完全取代了系统中的原始类。

当您使用类重写时，您是在说

> 嘿 Magento，**当您实例化**( `googleanalytics/ga`)`Mage_GoogleAnalytics_Block_Ga`块对象时，请从我的类中实例化该对象。

然后，通过让您的类扩展原始`Mage_GoogleAnalytics_Block_Ga`类，您可以拥有一个行为与原始对象相同的对象，并且您可以添加您的方法。但是，当您添加方法时，它们的父方法是**原始**块，这与覆盖不同。

第一步是删除本地代码池文件

```
app/code/local/Mage/GoogleAnalytics/Block/Ga.php 
```

听起来你已经这样做了。接下来，在您重写的类中有方法。当你调用`parent::_toHtml();`方法时

```
protected function _toHtml()
{
    //... your stuff here ...
    return parent::_toHtml();
} 
```

您是在告诉 Magento “嘿，做原始对象会做的任何事情”。使用块和`_toHtml`方法，这意味着产生相同的输出。这就是为什么你会得到“旧股票垃圾代码”。该`_toHtml`方法的约定是“无论返回什么字符串，都将包含在块输出中”。您的新代码也被包含在内，因为您正在使用`addText`您的父方法知道的方法。

所以，如果你想改变`_toHtml`块重写的行为，你需要做这样的事情

```
protected function _toHtml()
{
    $original_output = parent::_toHtml();
    $string = '';
    //... your code here which ultimately generates your output
    //and places it in $string
    return $string;
} 
```

通过首先调用父方法，您可以确保从状态的角度来看块所做的任何事情仍然会发生（块不应该这样做，但是，我们知道这是怎么回事）。然后，您返回您的字符串。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T18:57:36.843

**DDx：**注释掉`<block type="googleanalytics/ga" ... />`代码`googleanalytics.xml`会导致所有输出消失吗？

*假设本地 codePool 覆盖文件已被删除*，问题肯定是`return parent::_toHtml()`。父（核心）方法的 CE 1.4.1.1 版本使用`addText()`源自`Mage_Core_Block_Text->_toHtml()`. `addText()`会将内容附加到`_data['text']`，然后该方法将在渲染过程中返回此内容。因此，您的覆盖将一些字符串内容设置为`_data['text']`，然后当您调用父方法时，它将*其*内容添加到`_data['text']`然后调用`Mage_Core_Block_Text->_toHtml()`，它只是返回 的值`_data['text']`。

通常调用被覆盖的方法是个好主意，但在这种情况下它不起作用。鉴于此方法在 1.4.2.0 中已更改为仅从局部变量返回字符串，您应该可以忽略父级。如果由于某种奇怪的原因这不能解决问题，则可以使用布局 XML 将核心块实例替换为另一个。****

# ruby-on-rails-3 - 引用模块内的常量时的不一致行为

> ID：11179737
> 
> 赞同：3
> 
> 时间：2012-06-24T17:43:44.447
> 
> 标签：ruby-on-rails-3, module, scope, constants

在我的 Rails 3.2 模型目录中，我有一个文件夹“foo”，其中包含两个类：

```
# foo/bar.rb
class Foo::Bar; end

# foo/baz.rb
class Foo::Baz
  def self.test
    puts Bar.to_s
  end
end 
```

请注意 Foo::Baz.test 将 Foo::Bar 引用为简单的 Bar，因为 Bar 和 Baz 在同一个模块中。

然后我打开控制台并调用 Foo::Baz.test 两次：

```
1.9.3-p0 :001 > Foo::Baz.test
Foo::Bar
 => nil 
1.9.3-p0 :002 > Foo::Baz.test
NameError: uninitialized constant Foo::Baz::Bar
    from /../app/models/foo/baz.rb:2:in `test' 
```

如您所见，通话第一次运行良好，然后每次都崩溃。为什么？

如果 Foo::Baz 使用完全限定名称 Foo::Bar 而不是 Bar，则不会发生这种情况**。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T18:44:36.890

如果您单独声明模块，它似乎可以工作：

```
# foo/bar.rb
module Foo
  class Bar; end
end

# foo/baz.rb
module Foo
  class Baz
    def self.test
      puts Bar.to_s
    end
  end
end

$ rails console
Loading development environment (Rails 3.2.6)
1.9.3-p125 :001 > Foo::Baz.test
Foo::Bar
 => nil 
1.9.3-p125 :002 > Foo::Baz.test
Foo::Bar
 => nil 
1.9.3-p125 :003 > 
```

我无法解释为什么。

# php - TYPO3 Extbase 控制器/模型验证失败

> ID：11179739
> 
> 赞同：1
> 
> 时间：2012-06-24T17:43:56.837
> 
> 标签：php, fluid, extbase, typo3-flow

环境：Mac OS X Lion、PHP 5.3.10、MySQL 5.X、TYPO3 4.7.1、Extbase 4.7.1、Fluid 4.7.0

几天来，我一直在为 extbase 中的一个奇怪的验证错误而苦苦挣扎。

Tx_Foo_Controller_FeUserController 包含以下两个动作：

```
    /**
     * @param $feUser
     * @return 无效
     * @dontvalidate $feUser
     */
    公共函数 registerAction(Tx_Foo_Domain_Model_FeUser $feUser = NULL )

```

和

```
    /**
     * @param Tx_Foo_Domain_Model_FeUser $feUser
     * @param 字符串 $password2
     * @return 无效
     */
    公共函数 createAction(Tx_Foo_Domain_Model_FeUser $feUser ,$password2 )

```

两个动作的内容：

```
$this->view->assign('feUser', $feUser); 
```

register.html 具有以下形式：

```
<f:flashMessages />

<f:form.errors>
    <div class="error">
        {error.message}
        <f:if condition="{error.propertyName}">
            <p>
                <strong>{error.propertyName}</strong>:
                <f:for each="{error.errors}" as="errorDetail">
                    {errorDetail.message}
                </f:for>
            </p>
        </f:if>
    </div>
</f:form.errors>        
<f:form object="{feUser}" objectName="feUser" class="form-horizontal" id="fooRegisterForm"
  controller="FeUser" action="create" noCache="1" noCacheHash="1">

     <f:form.textfield type="email" property="email" value="{feUser.email}"/>
    <f:form.textfield property="password" value=""/>
    <f:form.textfield name="password2" value=""/>    
</f:form> 
```

createAction 中只有一些“OK”文本。

问题是：每次我向 createAction() 方法添加 @validate 注释时，我都会收到此错误： `An error occurred while trying to call Tx_Foo_Controller_FeUserController->createAction()`

如果我使用自定义验证器或捆绑验证器，则没有区别。

createAction() 的示例

```
     * @validate $password2 Tx_Extbase_Validation_Validator_IntegerValidator

```

整数用于引发错误。

自定义验证器类似于 Tx_Foo_Domain_Validator_FeUserValidator ，您不必添加 @validation 标记。

自定义验证器：

```
/**
 * Validation of given Params
 *
 * @param Tx_Foo_Domain_Model_FeUser $feUser
 * @return void
 */
public function isValid($feUser)
{

    $this->addError('Passwords are not RSA strings', 1297418974 );
    return false;        
} 
```

有没有return语句没关系...

我查看了 Tx_Extbase_MVC_Controller_ActionController -> callActionMethod() 和整个验证过程（通过 var_dump 和 debug_backtrace 等），以找出为什么会发生此错误以及为什么错误消息没有输出。这一切都很奇怪......所以也许有人在这里有小费:-)

如果我在我的 feUser 类的模型中添加一个@validation 标记，例如@validate notEmpty，也会发生同样的错误

通过打字稿进行 Extbase 配置

```
config.tx_extbase {
    features.rewrittenPropertyMapper = 1
    persistence{
        storagePid = 5
        enableAutomaticCacheClearing = 1
        updateReferenceIndex = 0
        classes {
            Tx_Foo_Domain_Model_FeUser {
                mapping {
                    tableName = fe_users
                    columns {
                        lockToDomain.mapOnProperty = lockToDomain
                    }
                }
            }
        }
    }
} 
```

提前非常感谢。

PS：当然，我在这里问之前用谷歌搜索了很多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T08:28:53.583

就我而言，出现此错误，因为缺少 extbase `referrer`。如果没有`referrer`，则默认消息由 extbase 抛出。

因为我没有表单，只有一个链接，所以我必须`referrer`手动添加：

```
/index.php?id=10&tx_bieval_pi1[send]=1&tx_bieval_pi1[hash]=12345&tx_bieval_pi1[__referrer][actionName]=index&tx_bieval_pi1[action]=form&tx_bieval_pi1[controller]=Participation 
```

那成功了

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-24T09:28:25.543

就我而言，我通过在打字稿设置中评论这一行来解决这个问题：

# config.tx_extbase.features.rewrittenPropertyMapper = 1

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T18:19:15.450

您应该始终牢记的一件事是，有一个缓存，您无法通过按下按钮进行清理。Extbase 反射缓存缓存模型和控制器中的所有注释。所以在开发过程中，为了避免很多挫败感，禁用这个糟糕的东西。

我曾经写过一篇关于它的博客文章： [http ://www.alexanderschnitzler.de/2012/01/disable-extbase-reflection-cache-during-development-typo3-4-6/](http://www.alexanderschnitzler.de/2012/01/disable-extbase-reflection-cache-during-development-typo3-4-6/)

所以请先尝试这个并手动截断数据库表 cf_extbase_*

之后，如果错误仍然存​​在，请报告。

# objective-c - Cocos2d 什么时候保留对象？

> ID：11179740
> 
> 赞同：1
> 
> 时间：2012-06-24T17:44:12.317
> 
> 标签：objective-c, cocos2d-iphone

看看下面的代码：

```
 CCSprite* testsprite = [CCSprite spriteWithFile:@"test.png"];
    CCLOG(@"1\. count: %d", [testsprite retainCount]);
    [self addChild:testsprite];
    CCLOG(@"2\. count: %d", [testsprite retainCount]);
    [testsprite runAction: [CCMoveTo actionWithDuration:3.0 position:CGPointMake(200.0, 200.0)]];
    CCLOG(@"3\. count: %d", [testsprite retainCount]); 
```

这段代码的输出是：

```
1\. count: 1
2\. count: 2
3\. count: 3 
```

我想我明白这里发生了什么。问题如下：Cocos2D 何时（在哪些方法中）保留对象（在本例中为 testsprite）是否有经验法则？

再见，克里斯蒂安

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T18:17:45.683

1.  如果可能，请使用类函数，因为它们是自动释放的。
2.  使用 addChild 添加 CCNode 将保留该节点。如果你做了一些 alloc init 的东西，在添加它作为孩子之后释放它
3.  向数组中添加任何内容都会保留该对象。如果将对象添加到数组中，则可以安全地释放它。

自动发布：

```
CCSprite *sprite = [CCSprite spriteWithFile:@"icon.png"]; 
```

手动内存管理

```
CCSprite *sprite = [[CCSprite alloc] initWithFile:@"icon.png"]; 
```

不要让retainCount 混淆你。每一行代码都可能会保留该对象。如果做得好，底层代码会在完成后自动释放。

当您必须键入 release 时的一个常见示例。

```
NSMutableArray *units = [NSMutableArray array];
for (int i = 0; i < 42; i++)
{
    CCNode *unit = [[MyUnit alloc] init]; // retain +1
    [units addObject:unit]; // retain +1
    [unit release]; // retain -1
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T17:50:50.150

[该规则](http://developer.apple.com/library/mac/#documentation/General/Conceptual/DevPedia-CocoaCore/MemoryManagement.html)与任何其他 Cocoa 代码相同：在需要保留某些内容时保留它。完成后释放它。

此外，该`retainCount`方法[通常是无用](https://stackoverflow.com/questions/4636146/when-to-use-retaincount)的。

# database - db2 查询时间戳数据类型的奇怪行为

> ID：11179744
> 
> 赞同：2
> 
> 时间：2012-06-24T17:44:59.570
> 
> 标签：database, db2

我想在 db2 中查询时间戳数据类型。我在下面写了查询

`Select * from sample where LASTMODIFIEDDATE = timestamp('2012-04-03 07:59:50')`

我没有得到上述查询的任何结果，然后我尝试了

`Select * from sample where LASTMODIFIEDDATE > timestamp('2012-04-03 07:59:50')`

在上面的查询中，我得到了匹配时间戳“2012-04-03 07:59:50”的结果以及更大的时间戳值，例如“2012-04-03 08:59:50”。

如果我得到 '>' 运算符的结果，那么为什么我没有得到 '=' 运算符的任何结果呢？有什么原因还是我写错了查询？

谢谢 ！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-25T19:16:22.623

不，DB2 存储时间戳的完整值，包括小数秒。您可能希望将系统显示时间戳的格式更改为包含毫秒的格式。

尝试改用这个：

```
SELECT * 
FROM Sample
WHERE lastModifiedDate >= TIMESTAMP('2012-04-03 07:59:50')
AND lastModifiedDate < TIMESTAMP('2012-04-03 07:59:50)' + 1 SECONDS 
```

除非您拥有时间戳的*完整*值（**包括**毫秒），否则您将获得一个范围 - 在访问一系列数据时，请使用“下限包含，上限不包含”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-19T20:54:09.893

您还可以将 db 列的值单独截断为秒，然后与您的字符串进行比较：

```
Select * from sample where TRUNC(LASTMODIFIEDDATE, 'SS') = '2012-04-03 07:59:50' 
```

在 DB2 10.5 中工作。您还可以通过以下方式截断：

```
hour ('HH'), minute('MI'), year('YEAR' or 'YYYY'), month('MONTH' or 'MM'), Day ('DD') 
```

例子：

```
Select * from sample where TRUNC(LASTMODIFIEDDATE, 'HH') = '2012-04-03 07:00:00'
Select * from sample where TRUNC(LASTMODIFIEDDATE, 'MI') = '2012-04-03 07:59:00' 
```

# php - Google Graphs API / 某种 Graph API

> ID：11179748
> 
> 赞同：0
> 
> 时间：2012-06-24T17:45:09.617
> 
> 标签：php, graph

我一直在寻找几天，但无法弄清楚。最大的要求是在服务器上处理图像，我可以嵌入 url。

我有两个要在图表上绘制的数据集。我想将数据集 1 用作折线图，然后将数据集 2 用作条形图。

我已经使用图表向导（[https://developers.google.com/chart/image/docs/chart_wizard](https://developers.google.com/chart/image/docs/chart_wizard)）获取基本图像以插入数据集 1 和 2。但是数据集 2 也是线图而不是所需的条状图。

以下是两个数据集的示例： ![在此处输入图像描述](../Images/197080787ed241ab01ef15d3dedd0d46.png)

我愿意使用可以这样做的不同 api 或脚本。

谢谢，丹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T12:22:29.227

我最终解决问题的方法是使用 pcharts。我会在服务器端生成一个带有 pcharts 的 url，并将 url 作为图像嵌入。看起来它奏效了。Google 的 API 需要执行 js 才能完成组合图表，而 pcharts 则不需要。

# jquery-plugins - 使用 jQuery 插件 - 首选方法

> ID：11179757
> 
> 赞同：1
> 
> 时间：2012-06-24T17:46:33.003
> 
> 标签：jquery-plugins

不知道如何措辞，但是，不考虑人们喜欢的构建有多复杂，它是否重要以及使用的优点和缺点是什么：

```
$(ele).plugin("method", options); 
```

与

```
$(ele).plugin.method(options); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T17:52:03.077

我认为第二种方式可能性能不佳，因为它与 JavaScript 的对象显着版本有关。因此，它可能在访问时引用 null 成员或类型。

第一种方法更简单，因为它只使用方法中的参数。

# html - 我的粘性页脚在更大或更小的屏幕上奇怪地显示，我如何使这些元素缩放？

> ID：11179760
> 
> 赞同：0
> 
> 时间：2012-06-24T17:47:10.893
> 
> 标签：html, css

我要引用的元素是此处的页脚链接：http: [//individual.utoronto.ca/andrewlouis](http://individual.utoronto.ca/andrewlouis)

HTML

```
<!DOCTYPE html>
<html>
<head>
    <title>Andrew Louis' Portfolio</title>
    <link rel="stylesheet" href="fonts/stylesheet.css" type="text/css" />
    <link rel="stylesheet" href="style.css" type="text/css" />
    <script src="http://code.jquery.com/jquery-latest.js"></script>
    <script src="javascript/jqueryscript.js"></script>

<body>

    <h2>Andrew Louis</h2>

    <div class="centered">
        Coming Soon.
        <div id = "subheading">
            <a href="http://andrewlouis.posterous.com">Click here to go to my blog in the meantime.</a>
        </div>
    </div>

</body>
</head>
</html> 
```

相关CSS：

```
#footer {position:relative;}

#heading{
    font-family:'Lobster1.3Regular';
    color:#D04D21;
    position: absolute;
    font-size:80px;
    top: 10%;
    left: 0px;
    width: 100%;
    height: 1px;
    text-align:center;
    text-shadow: 0 0 2px rgba(0,0,0,0.9);
}

.nav_wrapper{
    min-height: 50px;
    width: 100%;
    position: absolute;
     bottom:-500px; ; left:0px;
}

#list_orientation li a {
    text-decoration:none;
    text-align:center;
    color:black;

}
#list_orientation li{
    display:inline-block;
    padding:50px;
    height:50px;width:50px;
    text-align:center;
    width:20%; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T18:15:59.463

它们似乎是换行符，因为它们比页面换行更宽。您可以通过媒体查询为元素提供更小的宽度和高度值吗？

# content-management-system - 将博客功能集成到不使用 WordPress 的网站中的好方法是什么？

> ID：11179762
> 
> 赞同：2
> 
> 时间：2012-06-24T17:47:29.223
> 
> 标签：content-management-system

我正在为一个朋友建立一个简单的网站，他想在他的网站上添加一个博客。

我不确定要采取什么方法。

具体来说，我不想改变现有网站的外观，只想为他的博客设置一个不同的部分。

一个轻量级的 CMS 选项会很棒，因为它可以让他轻松添加内容并可能进行搜索，但我可以使用简单的 CSS 设置样式。

我曾将 WordPress 视为一种选择，但它似乎非常臃肿且难以主题化。

并不是说我认为 WP 没有能力 - 我正在考虑它，但我正在尝试尝试其他一些 CMS 以及您可能推荐的任何其他方法。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-08T22:55:37.663

您也可以尝试[Microweber CMS](http://microweber.com)。他们支持博客和商店，并且可以下载 - 开源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T05:12:55.023

恐怕我自己就是一个 WordPresser，所以我不能提供非 WP 建议。但是，如果您主要担心 WordPress 难以主题化，那么您可以让自己的页面与它集成并在您自己的代码中处理显示？

如果您在 PHP 平台上集成，则可以在 5-10 行代码中完成，如[WordPress Codex 页面](http://codex.wordpress.org/Integrating_WordPress_with_Your_Website)所示。如果您在另一个技术堆栈上，您可以使用[XML-RPC API](http://codex.wordpress.org/XML-RPC_Support)或让 WordPress 发布完整的 RSS 提要并使用这些提要在您朋友的站点中创建页面？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T18:42:58.490

您当前是否正在使用任何 CMS 以便您的朋友能够编辑该网站？虽然您提到 Wordpress 对您来说似乎很臃肿，但很多代码库都在关注创建帖子、编辑、版本控制等。

如果没有 CMS 来支持博客，这将是您必须从头开始编写的内容。此外，虽然像[CushyCMS](http://www.cushycms.com/en/static/demo)这样的轻量级工具可以很好地编辑静态网站，但如果您的朋友正在写博客，他将需要一些方法来添加新页面/帖子，而不仅仅是编辑现有的。

我建议重新评估 Wordpress——随着 CMS 的发展，无论是对你还是对他来说，它都是一个小的学习曲线，并且可以立即将其剥离，以便输出的唯一 HTML/CSS 是你自己编写的。

查看[Roots](http://www.rootstheme.com/)主题作为一个选项——基于 Twitter Bootstrap 和 HTML 5 样板——或者如果你愿意，查看一些关于从头开始编写主题的教程。上手速度出奇的快，您可以完全控制输出的 HTML/CSS。

# javascript - 为什么 IE 不支持在现有应用程序中使用 iFrame js 和 css 文件

> ID：11179767
> 
> 赞同：0
> 
> 时间：2012-06-24T17:48:04.513
> 
> 标签：javascript, jquery, internet-explorer, cross-browser, cross-domain

在我们的 Web 应用程序中，我们有多个可用的小型应用程序。让我们说A，B，C。“A”使用Jquery1.4版本。这是非常成功的版本。他们开发了几个组件。

所以，我们团队“B”也想使用相同的组件和 jquery 版本。如果他们 A 改变了，我们需要相应地改变。目前我们正在使用 iFrame，因为有时我们需要访问“A”应用程序。现在，我们可能不会更改为 iframe 概念。

因此，与使用 Iframe 类似，我们想使用 Project A 的 Js 和 CSS 文件。文件已成功加载。但是我们无法访问 Js 方法和 CSS 属性。

让我们举个例子：->

我正在尝试使用 Jquery 方法访问任何类，

```
$(" .ap-bar-section-Accounts")[2].click(); 
```

根据评论，我为 iFrame jquery url 添加了脚本标签

```
<script type="text/javascript" src="A's location of jquery></script> 
```

但是，我收到错误“$”未定义。但是，如果我看到 IE 调试器工具，我可以看到加载的 Jquery 文件。可能是什么原因。如果您需要更多详细信息，请告诉我。在 Firefox 和 Mozilla 中工作的相同代码

根据评论，我正在确认仅与 https 相关的两个服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T20:07:10.973

您的示例代码是无效的 jQuery

```
 $(" .ap-bar-section-Accounts")[2]// returns DOM node 
```

应该

```
 $(".ap-bar-section-Accounts").eq(2).click(); 
```

在将任何代码从父页面绑定到 iFrame 事件之前，请确保 iFrame 已加载

```
$(function(){
    var $frame=$('#iframeId');
    $frame.load(function(){
         $frameBody= $(this).contents().find('body');
         $frameBody.find$(".ap-bar-section-Accounts").eq(2).click();
    });
}) 
```

# javascript - Rails - 创建父级时如何动态创建属于 has_many 关系的成员？

> ID：11179771
> 
> 赞同：0
> 
> 时间：2012-06-24T17:48:24.340
> 
> 标签：javascript, ruby-on-rails, linux

因此，在 Rails 应用程序中，我的数据库、硬盘驱动器中有一个表，对于每个硬盘驱动器，我有可变数量的磁头和盘片。当我创建或编辑硬盘驱动器时，我想要 a) 动态显示所需的磁头状态和盘片状态表格的数量，或者 b) 将用户引导到具有适当数量的磁头和状态表格的页面连续这页纸。我赞成选项 a，但我认为它需要一些自定义的 javascript 或其他东西才能使其工作（除非有插件，否则不太可行，我不知道 javascript）。真的，我想拒绝任何没有输入盘片和磁头状态的硬盘。

（变量名当然是hard_drive、platter_status、head_status）

例如，如果我有一个笔记本电脑驱动器，我想在创建驱动器时定义它有 1 个磁头和盘片。当头部和盘片计数组合框中的值发生变化时，显示盘片和头部状态的表格。当点击创建按钮时，它应该使用数据在数据库中创建硬盘驱动器，并根据需要创建每个 platter_status 和 head_status 项。

我该怎么做呢？我知道在视图中，我必须添加一些东西来检测组合框中的变化并使用组合框中的值显示布局。

本质上与[此相似](https://stackoverflow.com/questions/9613750/dynamically-change-form-based-on-value-selected-in-combobox-in-ruby-on-rails)

* * *

**编辑1：** 所以，我有[这个](https://gist.github.com/2985239)，到目前为止它不起作用，但我有正确的想法。我偶然发现了一些讨论使用 javascript 动态添加 html 的线程。

```
 <div class="field" id="head_count" >
    <label for="hard_drive_head_count">Head count</label><br />
    <input id="hard_drive_head_count" name="hard_drive[head_count]" type="number" value="0" />
    <script type="text/javascript">
      var input = document.getElementById('hard_drive_head_count'),
        events = [
        "input",
         ];
      events.map(function(ev) {
      input.addEventListener(ev, function() {
        console.log(ev + ' => ' + input.value);
    if (parseInt(input.value) === 1) {
      document.getElementById('platter_statuses').innerHTML= "howdy";
    } else {
      document.getElementById('platter_statuses').innerHTML="";
    }
      }, false);
      });
    </script>
  </div>
  <label for="platter_status">Platter status</label><br />
  <div class="field" id="platter_statuses" >

  </div> 
```

然而，既然我有了这个，问题就转移到了——我怎样才能用 _form.html.erb 中的表单快速填充 platter_status 视图，并按照应有的方式从数据库中填写所有内容？我在其他方面考虑过，使用一些动态红宝石，但我不确切知道如何传递参数（盘片号和驱动器 ID），以便数据库知道用什么填充它，我不知道在 <%= @SOMETHING_HERE %> 中的 @ 之后放置什么，以便它解析为 platter_status 视图...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T16:41:15.597

我实际上发现有一个非常适合我需要的助手。它是模型中的accepts_nested_attributes_for 函数。这与 rails cast 196 和 197 相结合，帮助我实现了我想要的。

在 hard_drive 模型中，您应该有：

```
attr_accessible :head_statuses_attributes
has_many :head_statuses, :dependent => :destroy
accepts_nested_attributes_for :head_statuses, :allow_destroy => true 
```

对于 head_status 和 platter_status 模型。

在视图中，您需要这样的一行：

```
<%= link_to_add_fields "add head status", f, :head_status %> 
```

在任何标签的部分外部，您需要一个：

```
 <%= link_to_remove_fields "Remove", f %> 
```

有关详细信息，请参阅以下文章： [accepts_nested_attributes_for 的工作原理](https://stackoverflow.com/questions/4485507/rails-3-how-does-accepts-nested-attributes-for-work)

[动态编辑](http://railscasts.com/episodes/196-nested-model-form-part-1) [如何成为可能 动态编辑如何成为可能第 2 部分](http://railscasts.com/episodes/197-nested-model-form-part-2)

# google-docs-api - 使用 Google Docs List API 将资源移动到根文件夹

> ID：11179773
> 
> 赞同：0
> 
> 时间：2012-06-24T17:48:36.040
> 
> 标签：google-docs-api, google-drive-api

我正在寻找一种使用 Google Docs List API (Python SDK) 将资源移动到用户文档帐户的根文件夹中的方法。

client.move_resource 方法需要 gdata.docs.data.Resource 作为目标集合，但我不知道如何获取根文件夹的 Resource 条目，或者是否有可能。API 文档说

> 从 API 提要返回条目时，您将永远找不到资源 ID 为 folder:root 的资源条目，因为根集合没有自己的条目。

如果我尝试使用 move_resource(entry=entry, collection=None, keep_in_collections=False) 我最终得到的资源不在任何东西中，包括根文件夹，这样如果我查询根文件夹的内容，我不会在响应中获取该资源。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T11:56:53.977

我有同样的问题，我对 Obj-C 框架的解决方案是找到一些带有根父引用的 GTLDriveFile 并将其设置为我想要移动到根目录的文件。

# php - 为什么 PHP 在使用单引号时会转义？

> ID：11179774
> 
> 赞同：0
> 
> 时间：2012-06-24T17:48:36.337
> 
> 标签：php, latex

为什么php在使用单引号时会转义反斜杠？

我正在尝试`\\`在 LaTex 数学代码上输出，但 即使使用单引号`\` ，也会输出以下代码。`\\`有没有办法做到这一点而不是回声`\\\\`？像任何配置文件？

```
<?php
echo '\\';
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T17:56:39.290

每个反斜杠都必须转义：

```
echo '\\\\'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T17:54:28.707

单引号或双引号之间的区别仅与是否解析变量有关。

我真的不确定你是否可以做你想做的事，这就像问 $ 字符是否不能用作双引号中的变量前缀......

也许你应该看看[http://php.net/manual/language.types.string.php中的 heredoc 和 nowdoc](http://php.net/manual/language.types.string.php)

# php - PHP：在代码执行之前完成 For 循环

> ID：11179775
> 
> 赞同：0
> 
> 时间：2012-06-24T17:48:41.167
> 
> 标签：php, for-loop, indexing, echo

我在使用 php 的 for 循环时遇到问题。
循环迭代太快，并且在内部的 html 代码被回显之前完成。

```
<?php for($i = 0; $i < sizeof($shoppingCart); $i++) { 
    $sql = "SELECT * FROM products_test WHERE id = " . substr($shoppingCart[$i], 5) . "";
    $q = $DBH->query($sql) or die("failed!");
    $q->setFetchMode(PDO::FETCH_ASSOC);
    $r = $q->fetchAll();
    echo '<tr>';
    echo '<td><img src="' . $r[$i]['image']. '" /></td>';
    echo '<td>' . $r[$i]['title'] . '</td>';
    echo '<td>' . $r[$i]['desc'] . '</td>';
    echo '<td>' . $r[$i]['price'] . '</td>';
    echo '<td><input type="number" id="qty"></td>';
    echo '<td>Remove</td>';
    echo '</tr>';
} ?> 
```

设置一个临时变量是行不通的，因为它只是具有相同的行为。

怎么了？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T18:33:02.057

可能是您的数组空了。您应该添加一个捕获以防万一。

你会想要做这样的事情，使用`empty`函数：

```
<?php 
 if (!empty($shoppingCart))
 {
  for($i = 0; $i < sizeof($shoppingCart); $i++) { 
     $sql = "SELECT * FROM products_test WHERE id = " . substr($shoppingCart[$i], 5) . "";
     $q = $DBH->query($sql) or die("failed!");
     $q->setFetchMode(PDO::FETCH_ASSOC);
     $r = $q->fetchAll();
     echo '<tr>';
     echo '<td><img src="' . $r[$i]['image']. '" /></td>';
     echo '<td>' . $r[$i]['title'] . '</td>';
     echo '<td>' . $r[$i]['desc'] . '</td>';
     echo '<td>' . $r[$i]['price'] . '</td>';
     echo '<td><input type="number" id="qty"></td>';
     echo '<td>Remove</td>';
     echo '</tr>';
  } 
 }
 else
 {
     echo '<tr><td>Your shopping cart is empty</td></tr>';
 }
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T18:43:19.903

在我看来，您的查询总是返回一行？但是您尝试使用`$r[$i]`.

这可以解释为什么您在浏览器中看不到任何内容。但是尝试查看浏览器源代码，如果显示空的html标签，那就是这个问题。

尝试显示你的数组的内容，`print_r($r)`看看它是什么样子的。

# java - 文件锁定和删除

> ID：11179776
> 
> 赞同：5
> 
> 时间：2012-06-24T17:49:00.270
> 
> 标签：java, file, locking, delete-file

我正在用java制作一个程序来监控和备份一个目录。有时我必须将修改后的文件上传到存储库，或者如果有新版本则下载。为此，我必须锁定文件，以便用户无法更改内容或删除它。目前我正在使用此代码锁定文件：

```
 file = new RandomAccessFile("C:\\Temp\\report.txt", "rw");

        FileChannel fileChannel = file.getChannel();
        fileLock = fileChannel.tryLock();
        if (fileLock != null) {
            System.out.println("File is locked");

            try{

            //Do what i need    

            }catch (Exception e){//Catch exception if any
                System.err.println("Error: " + e.getMessage());
            }
        }
        else{
            System.out.println("Failed");
        }
    } catch (FileNotFoundException e) {
        System.out.println("Failed");
    }finally{
        if (fileLock != null){
            fileLock.release();
        } 
```

但是，如果有新版本，我必须删除旧文件并用新文件替换。但是文件锁定不允许我删除文件。

我应该解锁并删除它，相信用户不会写入文件吗？或者有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T18:20:21.253

您可以截断文件：

```
fileChannel.truncate(0); 
```

然后在其上写入新版本，这不会造成用户可以再次创建文件的时间间隔。

从文档：

> 如果给定的大小小于文件的当前大小，则文件被截断，丢弃文件新结尾之外的任何字节。如果给定大小大于或等于文件的当前大小，则不修改文件。在任何一种情况下，如果此通道的文件位置大于给定大小，则将其设置为该大小。

[http://docs.oracle.com/javase/7/docs/api/java/nio/channels/FileChannel.html#truncate%28long%29](http://docs.oracle.com/javase/7/docs/api/java/nio/channels/FileChannel.html#truncate%28long%29)

# java-me - 诺基亚 C3 上 lwuit 列表性能不佳

> ID：11179778
> 
> 赞同：0
> 
> 时间：2012-06-24T17:49:36.727
> 
> 标签：java-me, lwuit

我的 lwuit 应用程序可以与 java microedition 3.0 提供的触摸屏手机模拟器一起正常工作。我的列表滚动得很好。

但是，当我在诺基亚 C3 上安装该应用程序时，我遇到了列表滚动问题。

我的列表有大约 300 个元素。而且滚动很慢而且有些麻烦。它不如设备的本机滚动功能那么流畅（我尝试滚动该手机上的联系人，滚动效果非常好）。

我该怎么做才能使列表滚动更轻松流畅？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T06:55:53.923

了解如何构建此列表非常重要。您是否使用 a`ListModel`来管理列表中的数据元素？你在用`CustomRender`吗？请提供有关您的代码的更多信息。

查看此博客以获取更多信息：

[http://lwuit.blogspot.com.es/2008/07/lwuit-list-renderer-by-chen-fishbein.html](http://lwuit.blogspot.com.es/2008/07/lwuit-list-renderer-by-chen-fishbein.html)

[http://lwuit.blogspot.com.es/2010/12/lwuit-resource-editor-tutorial-part-6.html](http://lwuit.blogspot.com.es/2010/12/lwuit-resource-editor-tutorial-part-6.html)

[http://lwuit.blogspot.com.es/2011/04/contain-that-list-bringing-containers.html](http://lwuit.blogspot.com.es/2011/04/contain-that-list-bringing-containers.html)

# javascript - javascript 和 Web 服务 WSDL

> ID：11179780
> 
> 赞同：11
> 
> 时间：2012-06-24T17:49:45.760
> 
> 标签：javascript, wsdl

我想使用 javascript 调用网络服务。我有一个表格，我给了一些参数（int）并想要得到结果如何使用javascript来做到这一点？

这是 WSDL 文件

```
<definitions xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tns="http://lapack.sws4hpsc.uth/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://schemas.xmlsoap.org/wsdl/" targetNamespace="http://lapack.sws4hpsc.uth/" name="DgesvSampleWsService">
<ns1:Policy xmlns:ns1="http://www.w3.org/ns/ws-policy" wsu:Id="DgesvSampleWsPortBinding_MTOM_Policy">
<ns1:ExactlyOne>
<ns1:All>
<ns2:OptimizedMimeSerialization xmlns:ns2="http://schemas.xmlsoap.org/ws/2004/09/policy/optimizedmimeserialization" ns1:Optional="true"/>
</ns1:All>
</ns1:ExactlyOne>
</ns1:Policy>
<types>
<xsd:schema>
<xsd:import namespace="http://lapack.sws4hpsc.uth/" schemaLocation="http://83.212.96.238:8080/DgesvSampleWs/DgesvSampleWsService?xsd=1"/>
</xsd:schema>
</types>
<message name="_dgesv">
<part name="parameters" element="tns:_dgesv"/>
</message>
<message name="_dgesvResponse">
<part name="parameters" element="tns:_dgesvResponse"/>
</message>
<portType name="DgesvSampleWs">
<operation name="_dgesv">
<input message="tns:_dgesv"/>
<output message="tns:_dgesvResponse"/>
</operation>
</portType>
<binding name="DgesvSampleWsPortBinding" type="tns:DgesvSampleWs">
<ns3:PolicyReference xmlns:ns3="http://www.w3.org/ns/ws-policy" URI="#DgesvSampleWsPortBinding_MTOM_Policy"/>
<soap:binding transport="http://schemas.xmlsoap.org/soap/http" style="document"/>
<operation name="_dgesv">
<soap:operation soapAction=""/>
<input>
<soap:body use="literal"/>
</input>
<output>
<soap:body use="literal"/>
</output>
</operation>
</binding>
<service name="DgesvSampleWsService">
<port name="DgesvSampleWsPort" binding="tns:DgesvSampleWsPortBinding">
<soap:address location="http://83.212.96.238:8080/DgesvSampleWs/DgesvSampleWsService"/>
</port>
</service>
</definitions> 
```

* * *

第二个

```
<definitions xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tns="http://lapack.sws4hpsc.uth/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://schemas.xmlsoap.org/wsdl/" targetNamespace="http://lapack.sws4hpsc.uth/" name="DgtsvSampleWsService">
<ns1:Policy xmlns:ns1="http://www.w3.org/ns/ws-policy" wsu:Id="DgtsvSampleWsPortBinding_MTOM_Policy">
<ns1:ExactlyOne>
<ns1:All>
<ns2:OptimizedMimeSerialization xmlns:ns2="http://schemas.xmlsoap.org/ws/2004/09/policy/optimizedmimeserialization" ns1:Optional="true"/>
</ns1:All>
</ns1:ExactlyOne>
</ns1:Policy>
<types>
<xsd:schema>
<xsd:import namespace="http://lapack.sws4hpsc.uth/" schemaLocation="http://83.212.96.238:8080/DgtsvSampleWs/DgtsvSampleWsService?xsd=1"/>
</xsd:schema>
</types>
<message name="_dgtsv">
<part name="parameters" element="tns:_dgtsv"/>
</message>
<message name="_dgtsvResponse">
<part name="parameters" element="tns:_dgtsvResponse"/>
</message>
<portType name="DgtsvSampleWs">
<operation name="_dgtsv">
<input message="tns:_dgtsv"/>
<output message="tns:_dgtsvResponse"/>
</operation>
</portType>
<binding name="DgtsvSampleWsPortBinding" type="tns:DgtsvSampleWs">
<ns3:PolicyReference xmlns:ns3="http://www.w3.org/ns/ws-policy" URI="#DgtsvSampleWsPortBinding_MTOM_Policy"/>
<soap:binding transport="http://schemas.xmlsoap.org/soap/http" style="document"/>
<operation name="_dgtsv">
<soap:operation soapAction=""/>
<input>
<soap:body use="literal"/>
</input>
<output>
<soap:body use="literal"/>
</output>
</operation>
</binding>
<service name="DgtsvSampleWsService">
<port name="DgtsvSampleWsPort" binding="tns:DgtsvSampleWsPortBinding">
<soap:address location="http://83.212.96.238:8080/DgtsvSampleWs/DgtsvSampleWsService"/>
</port>
</service>
</definitions> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2018-05-29T12:31:31.153

这是一种可能的方法，假设您将 wsdl 放入文件`request.wsdl`并假设远程服务器可访问并且具有`Access-Control-Allow-Origin: *`标头

```
//wsdl request
var client = new XMLHttpRequest();
client.open('GET', 'request.wsdl');
client.onreadystatechange = function () {
  var request = client.responseText;//here the wsdl

        //SOAP request
        var client2 = new XMLHttpRequest();
        client2.open('POST', 'http://83.212.96.238:8080/DgesvSampleWs/DgesvSampleWsService', true);

        client2.onreadystatechange = function () {
          if (client2.readyState == 4) {
            if (client2.status == 200) {
              console.log(client.responseText);//here the response
            }
          }
        }
        client2.setRequestHeader('Content-Type', 'text/xml');
        client2.send(request);
}

client.send(); 
```

这个想法是执行和 ajax 来调用 wsdl 定义，并在它的回调中，执行另一个调用您想要调用的 ajax。这个域`http://83.212.96.238:808`它没有给我回应，但我认为这种方法是有效的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-05-24T04:13:41.830

1.  创建一个 SOAP 请求并调用调用者。 **参考：** [最简单的 SOAP 示例](https://stackoverflow.com/questions/124269/simplest-soap-example)

2.  获取响应并解析 XML。 **参考：** [使用 JavaScript 解析 XML](https://stackoverflow.com/questions/17604071/parse-xml-using-javascript)

# linux - 如何在终端中完成制表符同时保持在同一行？

> ID：11179790
> 
> 赞同：3
> 
> 时间：2012-06-24T17:50:28.583
> 
> 标签：linux, bash, terminal

双标签时，终端显示命令候选列表，但光标线也向下移动。如何在显示下面的所有候选人时保持在同一条线上？

我猜一定有一些配置文件可以指定这种行为。这也适用于在键入命令中间按 ctrl-c 的情况。我希望光标停留在当前行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T20:12:04.400

您需要具有丰富终端支持的 shell。

例如**Z 壳牌**。**Bash**使用**readline**库构建用户交互，它只能逐行运行......

这种行为允许在大多数平台上运行 Bash，因为不需要终端的特殊能力。

# windows-8 - 如何模拟我的 Metro 应用程序被终止？

> ID：11179791
> 
> 赞同：15
> 
> 时间：2012-06-24T17:50:47.553
> 
> 标签：windows-8, windows-runtime, winrt-xaml

VS2012 的默认 C#“Metro 风格”项目模板包括 App.xaml.cs 中的代码（在[`OnLaunched`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.application.onlaunched.aspx)覆盖中），用于在挂起和终止后恢复应用程序状态。此代码仅在[`LaunchActivatedEventArgs.PreviousExecutionState`](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.applicationmodel.activation.launchactivatedeventargs.previousexecutionstate.aspx)is时运行[`Terminated`](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/windows.applicationmodel.activation.applicationexecutionstate.aspx)，即“应用程序在暂停后终止”。

如何强制暂停和终止我的应用程序，以便我可以在我的应用程序中测试此暂停/恢复功能？

我试过的东西不起作用：

*   如果我使用“关闭应用程序”手势（从屏幕顶部拖动到底部），那么下一次运行`PreviousExecutionState`是`ClosedByUser`.
*   如果我终止应用程序——使用任务管理器，或者（如果我正在调试）使用 VS 工具栏上的“停止”按钮——那么下一次运行`PreviousExecutionState`是`NotRunning`. 即使任务管理器在我结束任务之前将应用程序显示为“暂停”也是如此，因此显然它比“暂停后终止”的描述更加细微。
*   你会*认为*我可以从我的应用程序中切换出来，然后打开许多其他 Metro 风格的应用程序，直到我的应用程序最终被踢出。但是，即使我打开了 Windows 8 Release Preview 附带的每一个 Metro 风格的应用程序，这显然也不足以让 Windows 终止我的应用程序。（我认为 Windows 不太可能终止正在调试的应用程序，因此在尝试此操作之前，我从“开始”屏幕启动了我的应用程序 - 没有调试器。）

看来，如果我从我的应用程序切换并在 StackOverflow 窗口中输入几分钟，我的应用程序最终将被终止，所以它可能有一个基于时间的组件。但是，如果我每次都必须等待五到十分钟才能让我的应用程序终止，那将是一个相当缓慢的测试周期。

鉴于这是开发人员必须测试的内容，您会认为开发人员将有一种很好、简单的方法来强制应用程序暂停和终止。Visual Studio 中是否有某种压力测试应用程序会产生足够的内存压力？Visual Studio 中是否有一些菜单项会强制终止我的应用程序？我们应该如何测试这个？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-24T22:30:29.437

在 Visual Studio 2012 中，当您进行调试时，有“暂停”、“恢复”和“暂停和关闭”按钮。默认情况下，您应该在调试应用程序时看到这些按钮。有关调试进程生命周期的更多信息，请参阅[本文](http://msdn.microsoft.com/en-us/library/windows/apps/hh974425%28v=vs.110%29.aspx)。

![在此处输入图像描述](../Images/ddd17a73bad9c3b3e00f5a6c9e2381ae.png)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-28T17:33:54.523

我找不到 Suspend 控件，因为 VS 没有为我显示第二行工具栏。事实证明，这是在“调试位置”工具栏上。确保你打开了这个工具栏，然后你应该能够找到 Suspend 控件（它确实可以解决 OP 的问题）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-15T02:11:04.037

如果默认情况下不显示，请转到工具 -> 自定义，然后在工具栏选项卡下，选中显示“调试位置”的框

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-18T00:15:45.693

我一直在寻找 VS 2013，以防其他人出于同样的原因。
资料来源：http:

[//blogs.msdn.com/b/visualstudio/archive/2012/08/23/new-visual-studio-2012-debugging-features-for-the-windows-8-app-lifecycle-model。 aspx](http://blogs.msdn.com/b/visualstudio/archive/2012/08/23/new-visual-studio-2012-debugging-features-for-the-windows-8-app-lifecycle-model.aspx)

[一只忙碌的猫 http://blogs.msdn.com/cfs-file.ashx/__key/communityserver-blogs-components-weblogfiles/00-00-01-29-92-metablogapi/2210.image_5F00_thumb_5F00_1FBA9C1E.png](http://blogs.msdn.com/cfs-file.ashx/__key/communityserver-blogs-components-weblogfiles/00-00-01-29-92-metablogapi/2210.image_5F00_thumb_5F00_1FBA9C1E.png)

# macos - 如何知道 NSDocument 是否被锁定？

> ID：11179794
> 
> 赞同：2
> 
> 时间：2012-06-24T17:50:54.013
> 
> 标签：macos, cocoa, nsdocument

有什么方法可以让我知道文档是否被锁定？（我的意思是出现在 Cocoa 中基于文档的应用程序的标题栏中的字符串，见图）

我一直在尝试，`-[NSDocument isInViewingMode]`但它总是返回 NO :( 并且到目前为止一直在阅读[这个线程但没有取得多大成功......](http://www.cocoabuilder.com/archive/cocoa/308521-locking-an-nsdocument.html)

![在此处输入图像描述](../Images/2187e8fc2ae42981599653896398e154.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T17:05:59.330

据我了解，需要检查三种情况：

*   文档已被用户锁定，可从 URL 或文件管理器中检索
*   文档的位置不可写：可能是只读文件系统，或者用户没有权限
*   文档足够老，系统认为用户可能实际上并不想编辑它

前两个你必须自己检查。但后者可以通过调用来实现`-checkAutosavingSafetyAndReturnError:`

# android - 在Android中以编程方式刷新时被其他内容替换的小部件

> ID：11179795
> 
> 赞同：3
> 
> 时间：2012-06-24T17:50:58.980
> 
> 标签：android, android-widget

在 Stack Overflow 上的某个地方，有一天我发现了以下代码，我对我的应用程序进行了一些调整：

```
private void updateWidget() {
    AppWidgetManager widgetManager = AppWidgetManager.getInstance(ctx);
    ComponentName widgetComponent = new ComponentName(ctx, MyAppWidgetProvider.class);
    int[] widgetIds = widgetManager.getAppWidgetIds(widgetComponent);
    Intent update = new Intent();
    update.putExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS, widgetIds);
    update.setAction(AppWidgetManager.ACTION_APPWIDGET_UPDATE);
    ctx.sendBroadcast(update);
} 
```

这应该以编程方式刷新应用程序小部件的所有实例。`ctx`是我在 中设置`Activity`的上下文 ( `this`) `onCreate()`。上面的方法在`Activity`'s`onStop()`方法中被调用。

不幸的是，当它被调用时，它会用其他应用程序的小部件（例如美联社新闻）替换应用程序的小部件 - 至少在一段时间内。

这怎么可能发生？代码有问题吗？

谢谢！

**编辑＃1：**更清楚地指出这一点：我已经定义了自动刷新的间隔。但除此之外，我想`Activity`不时更新小部件。[这个问题](https://stackoverflow.com/questions/3455123/programmatically-update-widget-from-activity)表明它也是可能的。

**编辑#2：**我刚刚看到错误的小部件只显示了几秒钟。之后，我自己的应用程序的小部件再次显示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-02T12:51:21.173

过去我在使用小部件时遇到了一些问题，并且已经解决了这些问题。我真的不知道我的解决方案为什么对我有用。因为它适用于[Marco W.](https://stackoverflow.com/users/89818/marco-w)，所以我把它放在这里：我所做的只是将更新代码移动到服务中。当我需要更新时，启动该服务。同样，我不确定，但问题已经解决。

谢谢 Marco，我对 Android 有了更多的经验。这很有趣 ：-）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-19T14:20:18.097

`notifyAppWidgetViewDataChanged`我通过使用允许更新所有小部件的方法解决了这个问题，我可以给出的解释是，该方法可以`StackView`在修改集合视图包含的数据后更新集合视图（在我的情况下）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-24T18:15:58.657

您是否有理由在小部件之外运行更新功能？在我看来，使用 updatePeriodMillis 属性会更有意义吗？您可以将该属性设置为您希望小部件调用 onUpdate() 的频率，然后它可以提供更新的信息。

[http://developer.android.com/guide/topics/appwidgets/index.html#MetaData](http://developer.android.com/guide/topics/appwidgets/index.html#MetaData)

# ruby - 我应该尝试哪些算法来尝试对这些 PDF 进行分类？

> ID：11179796
> 
> 赞同：3
> 
> 时间：2012-06-24T17:51:07.280
> 
> 标签：ruby, algorithm, classification

我们正在抓取和下载许多公司的 PDF 文件，并试图挑选出那些是年度报告的文件。此类报告可以从大多数公司的投资者关系页面下载。

扫描 PDF 并在数据库中填充以下内容：

*   标题
*   内容（全文）
*   页数
*   字数
*   方向
*   第一行

使用这些数据，我们正在检查明显的短语，例如：

*   年度报告
*   财务报告
*   季度报告
*   中期报告

然后记录这些短语和其他短语的频率。到目前为止，我们有大约 350,000 个 PDF 文件要扫描，以及一个包含 4,000 个文档的训练集，这些文档被手动分类为报告或非报告。

我们正在尝试多种不同的方法，包括贝叶斯分类器和加权可用的不同因素。我们正在用 Ruby 构建分类器。我的问题是：如果你正在考虑这个问题，你会从哪里开始？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T18:16:11.377

您应该首先尝试一种快速且基本的方法来形成基线，这可能足以满足您的目的。这是一种这样的方法：

扫描所有 pdf 文件并形成词汇表，该词汇表是任何文档中出现的所有单词的编号列表。

通过计算每个单词的单词频率（所有单词，不要费心手动挑选它们），为每个文档创建一个特征向量。文档 j 的特征 i，是单词 i 在文档 j 中出现的次数。

然后按单词重要性对特征求幂，这与单词在所有文档中出现的频率相反。（即这个词在所有文档中出现的频率越高（例如“the”），它包含的信息就越少。）

然后使用无监督聚类算法（例如 k-means）对文档进行聚类。您通过随机放置 k 个集群质心进行初始化，将最近的文档分配给它们，然后将质心移动到分配给它们的文档的平均值，然后重复最后两个步骤直到收敛。

然后通过使用一些手工标记的示例找到包含年度报告的集群。

使用交叉验证集调整集群的数量，直到交叉验证集的准确性很高。

然后最后在一个保留的测试集上进行测试。如果这是低回来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T18:17:39.460

对于几年前的论文，我做了类似的事情，但使用了数字化的讲座幻灯片和试卷。我遇到的关于搜索引擎、搜索算法和确定搜索有效性的广泛概述的最好的书之一是：

搜索引擎：实践中的信息检索，W. Bruce Croft，Donald Metzler，Trevor Strohman

出版商网站上有一些示例章节会告诉您这本书是否适合您：[pearsonhighered.com](http://www.pearsonhighered.com/croft1epreview/index.html)

希望有帮助。

# html - 内部 div 100% 高度在最小高度的 div 中不起作用

> ID：11179799
> 
> 赞同：5
> 
> 时间：2012-06-24T17:51:46.497
> 
> 标签：html, css, layout

我有 div ( `#child`)，它不会扩展到它的父 ( `#parent`) 的完整高度。我已经为`html`和设置了高度`body`。如果我将父级的高度设置为 100%，它会起作用，但我希望父级具有最小高度，并且子级扩展到父级的全高。

HTML：

```
<html>
    <body>
        <div id="parent">
          <div id="child">
              <p>This area should be have the same height as it's parent.</p>
           </div>
        </div>
    </body>
</html> 
```

CSS：

```
html, body, header, h1, p { margin: 0; padding: 0; }

html         { background-color: #DDD; height: 100%; }
body         { background-color: #DAA; height: 100%; }

#parent {
  min-height: 70%;
  height: auto !important;
  height: 70%;

  background-color: #AAD;
}

#child {
  height: 100%; /* why isn't this working ? */

  width: 80%;
  margin: auto;    
  background-color: #ADA;
} 
```

JSFiddle：http: [//jsfiddle.net/nxVNX/11/](http://jsfiddle.net/nxVNX/11/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T17:58:12.613

当您删除该`!important;`属性时，它会起作用。也许这就是问题所在？我尝试了其他几种方法，但它们都不起作用，所以我想上面的解决方案可能是唯一的一种。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T18:05:54.197

```
height: auto !important; 
```

永远不要使用`!important`，因为它不能被覆盖，使用它是有害的。它没有用，因为它总是`height: auto;`不使用`height: 70%;`

> 无论该规则出现在 CSS 文档中的什么位置，都将始终应用具有 !important 属性的规则。

所以我建议你删除这条线，它会起作用。
寻找更多关于[!important 在 CSS 中是什么意思的信息？](http://webdesign.about.com/od/css/f/blcssfaqimportn.htm).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T18:00:37.987

我不确定为什么这不起作用，但这会起作用

```
#parent {
  min-height: 70%;
  height: 100% !important;
  height: 100%;  
  background-color: #AAD;
} 
```

# ios - 使用某种标识符在服务器上注册购买的消耗品

> ID：11179801
> 
> 赞同：2
> 
> 时间：2012-06-24T17:51:54.657
> 
> 标签：ios, in-app-purchase, storekit

消耗品应用内购买有点麻烦。

这是我的设置：

我有一个 iOS 客户端和一个服务器。服务器提供某种查询服务（具体无关）。

每次iOS客户端查询服务器时，我都想“消费”一次消耗品购买。所以基本上，每个搜索/查询都需要一个消耗品。

这是我最初想做的事情：

*   客户向 StoreKit 发送购买请求
*   StoreKit 用收据回复客户
*   客户端向服务器发送收据和苹果 ID
*   服务器验证收据并将成功发送给客户端
*   客户在 StoreKit 完成交易

现在对于每个查询：

*   客户端向服务器发送苹果 ID（+ 查询数据）
*   服务器检查给定的苹果 id 是否还有剩余的查询
*   如果没有足够的 Apple ID 查询，服务器会向客户端回复查询结果或错误。

现在是踢球者：

事实证明，我无法获得苹果 ID。所以我有点卡住了...

有人对这个有经验么？我可以在客户端上完成所有操作，但我希望它是安全的。

# c++ - Windows 8 开发可以使用原生 C++ 吗？

> ID：11179802
> 
> 赞同：2
> 
> 时间：2012-06-24T17:51:59.120
> 
> 标签：c++, c++11, windows-8, microsoft-metro

**您可以仅使用 C++ 为 Windows 8 制作 Metro 应用程序吗？**我的意思是，没有所有那些 Windows 编译器特定的扩展，比如 gc 等等。我已经尝试为 windows 8 dev 搜索一些代码，并且 c++ 的每个代码示例都使用所有那些相当无用的 windows c++ 扩展。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-24T18:21:41.120

您的问题本质上是关于您是否必须使用 C++/CX 扩展来编写 Metro 应用程序。

不，您不必这样*做*；所有语言扩展都有语言内的类似物。您可以将 C++/CX 扩展视为 Qt 的预处理器设置魔法。所有 C++/CX 扩展都有等效的纯 C++ 类似物。你*可以*明确地写出来。

你只是*不想*。Metro API 基于 COM 对象等。因此，您必须明确处理 COM 接口、编组等。

无论哪种方式，您都在编写只能在 Windows 上运行的代码。因此，您不妨让自己轻松一点，并在必要时使用语言扩展。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T17:56:08.380

WinRT 应用程序需要 Windows 特定的扩展，因为它们在沙盒环境中运行。请参阅[http://msdn.microsoft.com/en-us/library/windows/apps/hh974580.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh974580.aspx)。您可以将 WinRT API 与 C++、C# 和 JavaScript 一起使用。

它需要 Visual Studios（最新）。

# c# - 使用单应矩阵 (AR) 确定正确的位置

> ID：11179809
> 
> 赞同：-1
> 
> 时间：2012-06-24T17:52:43.887
> 
> 标签：c#, augmented-reality, emgucv

我在emgu cv lib中使用surf来检测和识别我的对象我需要插入3d模型来代替这个对象我有单应矩阵我想知道的是如何从这个单应矩阵中获取sharpgl的模型视图矩阵。我想要可以使我获得正确的模型视图矩阵的步骤，我可以在其中放置 3d 对象任何答案都会帮助我提前感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-26T14:47:21.190

您应该使用 Zhang 的方法简单地校准您的相机以获取相机矩阵，然后按照您找到的链接中的描述使用 H 分解。总结一下：

1.  [执行经典棋盘角检测（此处](http://www.kclbot.com/academic/emgu-cv-c-tutorial-find-chess-board-corners/)为 emgucv 代码）
2.  调用 FindCornerSubPix() 函数将角点检测精度提高到亚像素级别
3.  最后使用 CameraCalibration.CalibrateCamera() 计算相机的内在参数

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T22:27:42.180

看看 AForge.net。该库的作者使用字形做了非常相似的事情，然后插入他自己的 3D 模型来代替字形。该库处理字形的 3d 姿势并将其应用于 3d 模型。该项目可以在这里找到

[http://www.aforgenet.com/projects/gratf/](http://www.aforgenet.com/projects/gratf/)

我不知道你会如何用 Open CV 和 Emgu 做同样的事情。

# asp.net - 循环遍历asp.net中的文本框并填充字符串数组

> ID：11179816
> 
> 赞同：0
> 
> 时间：2012-06-24T17:54:02.783
> 
> 标签：asp.net, vb.net

这是我的代码

```
 Dim str As String = "str1,str2"
    Dim array() As String = str.Split(",")
    Dim MyListOfTextBoxes() As TextBox = {TextBox1, TextBox2, TextBox3}
    For index = 0 To array.Count - 1
        For i = 0 To MyListOfTextBoxes.Length - 1
            MyListOfTextBoxes(i).Text = array(index)
        Next
    Next 
```

我有 5 个文本框。我只想用数组值填充 textbox1 和 textbox2 。因为不，我不得不说。但是当我在和上运行代码`"str1"`重复`textbox1`时`textbox2``textbox3`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T18:18:00.163

你需要一个循环来做到这一点

```
 Dim str As String = "str1,str2"
    Dim array() As String = str.Split(",")
    Dim MyListOfTextBoxes() As TextBox = {TextBox1, TextBox2, TextBox3}
    For index = 0 To array.Count - 1
       if(MyListOfTextBoxes.Length>index)
       MyListOfTextBoxes(index).Text = array(index)
    Next 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T17:56:37.463

这是因为您的代码会运行元素 0、1 和 2，它们对应于 TextBox1、TextBox2 和 TextBox3。如果您只想填充 TextBox1 和 TextBox2，请从数组中删除 TextBox3。

您在另一个循环中也有一个循环-我不明白您为什么要这样做。

# python - 如何在bottlepy模板中做循环？

> ID：11179817
> 
> 赞同：3
> 
> 时间：2012-06-24T17:54:04.873
> 
> 标签：python, template-specialization

我知道这是一个简单的问题，但我在这里有奇怪的行为。

```
<pre>
          %for key in tags_photo:
          %   try:
                {{ key }} :  {{ exif[tags_photo[key]].raw_value }}
          %   except KeyError:
          %        continue
          %end
</pre> 
```

我假设只有 pre 标签中的内容应该像 jinja2 一样重复..？但是现在我得到了整个模板的循环..（我的意思是预先标记也重复）为什么？

如何在bottlepy模板中正确循环？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T18:13:47.550

您需要关闭所有块：

```
<pre>
%for key in tags_photo:
    %try:
        {{ key }} :  {{ exif[tags_photo[key]].raw_value }}
    %except KeyError:
        %continue
    %end
%end
</pre> 
```

（在您在 OP 中发布的代码中，该代码`%end`仅关闭`try`/`except`块，因此该`for`块延伸到模板的末尾。）

# c# - 基于 texbox 焦点更新更新面板在 asp.net 中丢失

> ID：11179821
> 
> 赞同：2
> 
> 时间：2012-06-24T17:54:14.127
> 
> 标签：c#, asp.net

我有一个带有两个用户控件的 asp.net 页面。每个都在单独的更新面板的 One user 控件中有三个文本框。我想根据第一个用户控件中的文本/焦点更改来更新第二个更新面板。如何访问用户控件的文本框和页面中的其他控件并在文本更改时更新更新面板？

```
updatepanel1
 user control1
   textbox1
   textbox2
   textbox3

updatepane2
  usercontrol2
  label1 
```

问候， 阿西夫·哈米德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T00:13:57.647

哇，更新面板！这让我回来了。触发 UpdatePanels 从客户端异步“回发”一直有点麻烦。常见的方法是使用隐藏按钮的单击事件注册 AsyncPostBackTrigger，然后在客户端显式调用其单击事件。但是，减少间接层数的解决方案是调用 ASP.NET AJAX 库的 __doPostback() JS 函数。

假设您使用的是 jQuery（考虑到您仍在使用 UpdatePanel，这可能有点牵强！），您可以将事件处理程序添加到 UserControl1 的 'focusout' 事件以触发 UpdatePanel2 的异步回发。我建议将此 JS 放在您的一个 UpdatePanel 之外。

```
$('#userControl1').on('focusout', function() {
  __doPostback('UpdatePanel2UniqueId', '');
}); 
```

我找到了一篇好文章，更详细地解释了使用 __doPostback 的技术。

[使用 JavaScript 轻松刷新 UpdatePanel](http://encosia.com/easily-refresh-an-updatepanel-using-javascript/)

# iphone - 如何防止 xcode 4.0 在纯 cpp 文件中自动包含 Objective-C 运行时标头

> ID：11179832
> 
> 赞同：0
> 
> 时间：2012-06-24T17:55:13.877
> 
> 标签：iphone, c++, objective-c, ios, xcode

我正在尝试为 iOS 编译一个objective-c、c++、c 混合项目。我使用 llvm 2.0 编译器并将“编译源为”设置为“根据文件类型”。我禁用了使用前缀标头（我希望）并且努力寻找错误的 #import 应该是 #include s。

在构建 cpp 文件时仍然出现编译错误，因为编译器出于某种原因试图包含 NSObjectiveCRuntime.h。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T18:57:07.223

我在构建设置中寻找错误的条目。如果仍然指定了“Prefix Header”，则禁用“Precompile Prefix Header”不会做任何事情。我通过以下方式解决了我的问题：

*   创建一个新的 ProjectName_Prefix.pch
*   通过目标构建设置中的“前缀标头”将其指定为我的目标预编译标头
*   将以下代码添加到它

    ```
    //
    //  Entourage_Prefix.pch
    //  Entourage
    //
    //  Created by Martin Lütke on 24.06.12.
    //  Copyright 2012 __MyCompanyName__. All rights reserved.
    //

    #include <string>
    #include <strstream>
    #include <vector>
    #include <map>

    #ifdef __OBJC__
            #import <Foundation/Foundation.h>
            #import <UIKit/UIKit.h>
            #import "cocos2d.h"
    #endif

    #ifdef __cplusplus
            #include <boost/shared_ptr.hpp>
            #include <boost/function.hpp>        
    #endif 
    ```

    这将允许通过 Objective-c 或 c++ 中的 Prefix Header 明确指定包含的内容。

# image - jQuery 拖放图片上传功能

> ID：11179834
> 
> 赞同：11
> 
> 时间：2012-06-24T17:55:18.540
> 
> 标签：image, jquery, file-upload, drag-and-drop

我正在尝试通过 jQuery 编写自己的简单 AJAX 图像上传脚本。我找到了一些插件，但它们对于需要的东西来说太定制了，我无法让它们中的任何一个正常工作。

我只想以某种方式检测用户何时将图像拖放到页面上。从那里我确信上传这些数据并移动到 /cache/ 目录并允许更多选项并不难。

但现在我完全被拖放功能所困扰。从字面上看，我不知道我应该如何处理这个问题。需要什么样的事件处理程序？我需要自定义代码我自己的事件处理程序吗？任何建议将不胜感激

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-27T08:31:26.337

> 需要什么样的事件处理程序？

Drag'n'drop 需要一个 HTML5 浏览器 - 但现在几乎就是所有这些了。

我建议不要从头开始，因为需要相当多的代码——我非常喜欢这个将它实现为 jQuery 插件的包装器。

[http://www.github.com/weixiyen/jquery-filedrop](http://www.github.com/weixiyen/jquery-filedrop)

在使用 div 类定义文档中的元素后，您可以初始化它以接受删除的文件：

```
function fileSetUploadPercent(percent, divID){

    var uploadString = "Uploaded " + percent + " %";

    $('#'.divID).text(uploadString);
}
function fileUploadStarted(index, file, files_count){

    var divID = getDivID(index, file);

    createFileUploadDiv(divID);     //create the div that will hold the upload status

    fileSetUploadPercent(0, divID); //set the upload status to be 0
}

function  fileUploadUpdate(index, file, currentProgress){

    //Logger.log("fileUploadUpdate(index, file, currentProgress)");

    var string = "index = " + index + " Uploading file " + file.fileName + " size is " + file.fileSize + " Progress = " + currentProgress;
    $('#status').text(string);

    var divID = getDivID(index, file);
    fileSetUploadPercent(currentProgress, divID);
}

function fileUploadFinished(index, file, json, timeDiff){

    var divID = getDivID(index, file);
    fileSetUploadPercent(100, divID);

    if(json.status == "OK"){
        createThumbnailDiv(index, file, json.url, json.thumbnailURL);
    }
}

function    fileDocOver(event){
    $('#fileDropTarget').css('border', '2px dashed #000000').text("Drop files here");
}
$(".fileDrop").filedrop({

            fallback_id: 'fallbackFileDrop',
            url: '/api/upload.php',
            //    refresh: 1000,
            paramname: 'fileUpload',
            //    maxfiles: 25,           // Ignored if queuefiles is set > 0
            maxfilesize: 4,         // MB file size limit
            //    queuefiles: 0,          // Max files before queueing (for large volume uploads)
            //    queuewait: 200,         // Queue wait time if full
            //    data: {},
            //    headers: {},
            //    drop: empty,
            //    dragEnter: empty,
            //    dragOver: empty,
            //    dragLeave: empty,
            //    docEnter: empty,
            docOver: fileDocOver,
        //  docLeave: fileDocLeave,
            //  beforeEach: empty,
            //   afterAll: empty,
            //  rename: empty,
            //  error: function(err, file, i) {
            //    alert(err);
            //  },
            uploadStarted: fileUploadStarted,
            uploadFinished: fileUploadFinished,
            progressUpdated: fileUploadUpdate,
            //     speedUpdated
        }); 
```

接受上传的网页部分有这个 HTML。

```
<div class='fileDrop'>
Upload a file by dragging it.
<span id='fileDropTarget'/>

</div> 
```

文件放置在外部 <div> 上工作，但很高兴制作一个很好的大目标，上面写着“DROP HERE”，这样用户就不会混淆他们需要在哪里放置文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-02T14:35:30.343

恐怕为时已晚。但你应该检查[http://www.dropzonejs.com/](http://www.dropzonejs.com/)

# jquery - jquery画廊在后台加载图像的ajax？

> ID：11179835
> 
> 赞同：0
> 
> 时间：2012-06-24T17:55:43.140
> 
> 标签：jquery, gallery

是否有任何 jquery 库或插件能够在后台加载外部图像并显示预览加载 gif？

它还应该支持滚动条来查看比当前分辨率大得多的图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T20:36:36.033

我以前使用过 jQuery Cycle 插件。它支持预览加载图片和预加载图片。它有很多不错的功能。我不确定你是否可以控制高度/宽度，但我认为如果你在周围的 div 上放置一个 css 溢出属性。

例如，使用您可以在 [http://jquery.malsup.com/cycle/basic.html上找到的 Basic Demo 的一些小修改](http://jquery.malsup.com/cycle/basic.html)

在这种情况下，它只是我更改的 CSS 样式:-)

```
<!DOCTYPE html>
<html>
<head>
    <title>JQuery Cycle Plugin - Basic Demo</title>
    <style type="text/css">
        .slideshow { height: 160px; width: 160px; margin: auto; overflow: auto }
        .slideshow img { }
    </style>
    <!-- include jQuery library -->
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
    <!-- include Cycle plugin -->
    <script type="text/javascript" src="http://cloud.github.com/downloads/malsup/cycle/jquery.cycle.all.latest.js"></script>
    <script type="text/javascript">
        $(document).ready(function() {
            $('.slideshow').cycle({
                fx: 'fade' // choose your transition type, ex: fade, scrollUp, shuffle, etc...
            });
        });
    </script>
</head>
<body>
    <div class="slideshow">
        <img src="http://cloud.github.com/downloads/malsup/cycle/beach1.jpg" width="200" height="200" />
        <img src="http://cloud.github.com/downloads/malsup/cycle/beach2.jpg" width="200" height="200" />
        <img src="http://cloud.github.com/downloads/malsup/cycle/beach3.jpg" width="200" height="200" />
        <img src="http://cloud.github.com/downloads/malsup/cycle/beach4.jpg" width="200" height="200" />
        <img src="http://cloud.github.com/downloads/malsup/cycle/beach5.jpg" width="200" height="200" />
    </div>
</body>
</html> 
```

在他们的主页上查看更多信息：http: [//jquery.malsup.com/cycle/](http://jquery.malsup.com/cycle/)

# c# - 链接具有不同返回类型的任务

> ID：11179839
> 
> 赞同：3
> 
> 时间：2012-06-24T17:56:20.473
> 
> 标签：c#, .net, .net-4.0, task-parallel-library

是否可以链接具有不同返回类型或根本没有返回类型的任务？例如在伪代码中：

```
Task<double>.ContinueWith(Task<string>).ContinueWith(Task<String>).ContinueWith(Task) 
```

或者这里是真实代码示例：

```
private double SumRootN(int root)
{
    double result = 0;
    for (int i = 1; i < 10000000; i++)
    {
        result += Math.Exp(Math.Log(i) / root);
    }
    return result;
}

private void taskSequentialContinuationButton_Click(object sender, RoutedEventArgs e)
{
    Task<double> task = null;

    this.statusText.Text = "";
    this.watch = Stopwatch.StartNew();
    for (int i = 2; i < 20; i++)
    {
        int j = i;
        if (task == null)
        {
            task = Task<double>.Factory.StartNew(() => { return SumRootN(j); });
        }
        else
        {
            task = task.ContinueWith((t) => { return SumRootN(j); });
        }

        task = task.ContinueWith((t) => 
        { // I don't want to return anything from this task but I have to, to get it to compile
            this.statusText.Text += String.Format("root {0} : {1}\n", j, t.Result);
            return t.Result;
        }, TaskScheduler.FromCurrentSynchronizationContext());
    }

    task.ContinueWith((t) => 
        { // I also don't want to return anything here but I don't seem to have to here even though intellisense expects a Task<double>??
            this.statusText.Text += String.Format("{0}ms elapsed\n", watch.ElapsedMilliseconds);
        }, TaskScheduler.FromCurrentSynchronizationContext());
} 
```

有关链接的奇怪之处，请参见内联注释。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T20:28:56.653

如果你想`Task`用不同的返回类型链接 s，你可以把它们中的每一个放在一个不同的变量中：

```
Task<Type1> task1 = Task.Factory.StartNew(() => Compute1());
Task<Type2> task2 = task1.ContinueWith(_ => Compute2());
Task<Type3> task3 = task2.ContinueWith(_ => Compute3()); 
```

对于您的特定情况，您在循环中计算某些内容并希望在每次迭代后报告 UI 线程，您可以这样做：

```
var uiScheduler = TaskScheduler.FromCurrentSynchronizationContext();

Task.Factory.StartNew(() =>
{
    for (int i = 2; i < 20; i++)
    {
        // perform computation

        Task.Factory.StartNew(() =>
        {
            // report result
        }, CancellationToken.None, TaskCreationOptions.None, uiScheduler);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T18:20:49.797

您的代码因重复使用单个`task`变量而变得复杂。看起来您想要启动许多任务并等待它们完成。像这样的东西应该工作：

```
SynchronizationContext context = SynchronizationContext.Current;

Task[] tasks = Enumerable.Range(2, 19)
    .Select(d => Task<double>.Factory.StartNew(() => SumRootN(d))
        .ContinueWith(t => {
            this.statusText.Text += string.Format("root {0} : {1}\n", d, t.Result);
        }))
    .ToArray();

Task.Factory.StartNew(() => {
    Task.WaitForAll(tasks);
    string msg = string.Format("{0}ms elapsed\n", watch.ElapsedMilliseconds);
    context.Post(_ => { this.statusText.Text += msg; }, null);
}); 
```

编辑：如果你想创建一个任务链，这可能有效：

```
Task first = new Task(() => { });
Task outer = Enumerable.Range(2, 19)
    .Aggregate(first, (task, d) => {
        Task inner = new Task<double>(() => SumRootN(d))
            .ContinueWith(rt => {
                this.statusText.Text += String.Format("root {0} : {1}\n", d, rt.Result);
            });
        return task.ContinueWith(inner);
    });

outer.ContinueWith(t => {
    this.statusText.Text += String.Format("{0}ms elapsed\n", watch.ElapsedMilliseconds);
});

first.Start(); 
```

# javascript - 新元素的 addEventListener

> ID：11179841
> 
> 赞同：4
> 
> 时间：2012-06-24T17:56:28.037
> 
> 标签：javascript, dom-events, addeventlistener

考虑一个基本`addEventListener`的

```
window.onload=function(){
  document.getElementById("alert")
  .addEventListener('click', function(){
     alert("OK");
  }, false);
} 
```

where`<div id="alert">ALERT</div>`在原始文档中不存在，我们通过 AJAX 从外部源调用它。我们如何强制`addEventListener`为文档中新添加的元素工作（在初始扫描 DOM 元素之后`window.onload`）？

在 jQuery 中，我们使用`live()`or `delegate()`; 但是我们如何`addEventListener`在纯 Javascript 中做到这一点？事实上，我正在寻找等价于`delegate()`,`live()`将事件附加到根文档；我希望在`parent`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-24T18:22:15.637

过于简化，与jQuery的事件系统相距甚远，但基本思想就在那里。

[http://jsfiddle.net/fJzBL/](http://jsfiddle.net/fJzBL/)

```
var div = document.createElement("div"),
    prefix = ["moz","webkit","ms","o"].filter(function(prefix){
         return prefix+"MatchesSelector" in div;
    })[0] + "MatchesSelector";

Element.prototype.addDelegateListener = function( type, selector, fn ) {

    this.addEventListener( type, function(e){
        var target = e.target;

        while( target && target !== this && !target[prefix](selector) ) {
            target = target.parentNode;
        }

        if( target && target !== this ) {
            return fn.call( target, e );
        }

    }, false );
}; 
```

你缺少什么：

*   性能优化，每个委托侦听器都将运行一个完整的循环，因此如果您在单个元素上添加多个，您将运行所有这些循环
*   可写事件对象。因此，您无法修复`e.currentTarget`哪个非常重要，因为`this`通常用作对某些实例的引用
*   没有数据存储实现，因此没有删除处理程序的好方法，除非您每次都手动创建函数
*   仅支持冒泡事件，因此您认为 jQuery 理所当然地没有`"change"`或等等`"submit"`
*   我现在只是忘记了许多其他人

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T17:59:57.753

```
document.addEventListener("DOMNodeInserted", evtNewElement, false);

function evtNewElement(e) {
    try {
        switch(e.target.id) {
            case 'alert': /* addEventListener stuff */ ; break;
            default: /**/
        }
    } catch(ex) {}
} 
```

注意：根据@hemlock 的评论，这一系列事件似乎已被弃用。我们不得不转向[突变观察者](http://updates.html5rocks.com/2012/02/Detect-DOM-changes-with-Mutation-Observers)。

# java - 运行一个 java 应用程序实例

> ID：11179849
> 
> 赞同：1
> 
> 时间：2012-06-24T17:57:03.643
> 
> 标签：java, single-instance

> **可能重复：**
> [如何实现单实例 Java 应用程序？](https://stackoverflow.com/questions/177189/how-to-implement-a-single-instance-java-application)

有没有办法只运行一个 Java 应用程序实例，所以我只有一个进程？. 有可能在java中做到吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-24T19:31:48.770

A simple way to have one instance is to use a service port.

```
ServerSocket ss = new ServerSocket(MY_PORT); 
```

The benefit of using this approach instead of a locking a file is that you communicate to the instance already running and even check it is working. e.g. if you can't start the server socket use a plain Socket to send it a message like "open a file for me"

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T18:05:10.230

最简单的方法是在应用程序启动时在磁盘上创建一个锁定文件，如果文件不存在则正常运行。如果该文件确实存在，您可以假设您的应用程序的另一个实例正在运行并退出并显示一条消息。假设我理解你的问题是正确的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T18:03:01.427

如果您的意思是“让您的应用程序的一个实例正在运行”，那么是的，您可以使用锁定文件来实现这一点。当您的应用程序启动时，创建一个文件并在程序退出时将其删除。在启动时，检查锁定文件是否存在。如果文件存在，则退出，因为您的应用程序的另一个实例已经在运行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-24T19:30:09.300

You could open a socket on startup. If the socket is in use, there is probably already an instance of the app running. A lock file would work, but if your app crashes without deleting the lock file, you'll have to manually delete the file before you can start the app again.

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2012-06-24T18:53:41.753

您可以应用**单例模式**

`Following are the ways to do it:`

**1.私有构造函数和同步方法**

```
public class MyClass{

   private static MyClass unique_instance;

   private MyClass(){

         // Initialize the state of the object here
    }

   public static synchronized MyClass getInstance(){

          if (unique_instance == null){

                 unique_instance = new MyClass();

           }

          return unique_instance;

      }

    } 
```

**2\. 声明时私有构造函数和初始化静态实例**

```
public class MyClass{

   private static MyClass unique_instance = new MyClass() ;

   private MyClass(){

         // Initialize the state of the object here
    }

   public static MyClass getInstance(){

          return unique_instance;

      }

    } 
```

**3.双重检查锁定**

```
public class MyClass{

   private static MyClass unique_instance;

   private MyClass(){

         // Initialize the state of the object here
    }

   public static MyClass getInstance(){

          if (unique_instance == null)

                      synchronized(this){

          if (unique_instance == null){

                 unique_instance = new MyClass();
               }
           }

          return unique_instance;

      }

    } 
```

`You can also implement a class with` **静态方法和静态变量应用单例模式，但不推荐**。

# android - 在 Android 中使用 PhoneGap 创建 SQLite 数据库

> ID：11179851
> 
> 赞同：2
> 
> 时间：2012-06-24T17:57:10.377
> 
> 标签：android, sqlite, cordova

我正在尝试使用 Android PhoneGap 创建 SQLite 数据库，但该数据库是使用文件名“app_database:test.db”创建的。

它不是在 app_database 文件夹中创建的，当我试图拉它时它没有出来。

下面的代码：

```
document.addEventListener("deviceready", onDeviceReady, false);

var db = window.openDatabase("test", "1.0", "PhoneGap Demo", 200000);
db.transaction(populateDB, errorCB, successCB); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T07:33:30.317

我认为这不是创建 sqlite 数据库的代码，它是用于本地存储的代码，如 websql。通过下面的链接并仔细阅读 phonegap 存储文档的标题。

[http://docs.phonegap.com/en/2.2.0/cordova_storage_storage.md.html#Storage](http://docs.phonegap.com/en/2.2.0/cordova_storage_storage.md.html#Storage)

# iphone - 录制时减少/过滤背景白噪声

> ID：11179852
> 
> 赞同：3
> 
> 时间：2012-06-24T17:57:28.303
> 
> 标签：iphone, audio, core-audio, audio-recording, noise

我试图找出一种在使用我的 iphone 应用程序录制音频时过滤和减少白噪声的方法。有没有办法至少降低背景噪音水平？欢迎任何线索或相关库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-11T07:09:04.783

您可以实现一个简单的噪声门过滤器，具有自动阈值检测功能。看：

*   [http://en.wikipedia.org/wiki/Noise_gate](http://en.wikipedia.org/wiki/Noise_gate)
*   [http://www.koders.com/cpp/fid43349351EBEF083D656C8D8DC91A5E2AF51B8609.aspx?s=fft](http://www.koders.com/cpp/fid43349351EBEF083D656C8D8DC91A5E2AF51B8609.aspx?s=fft)

# html - 段落延续效果，比如结尾三个点什么的

> ID：11179853
> 
> 赞同：0
> 
> 时间：2012-06-24T17:57:31.453
> 
> 标签：html, css, string

我有这个字符串，我在我的 xhtml 页面中显示。我想把它减少到某个限度，并在字符串的末尾放三个或四个点。

这是 ui:repeat 代码：

```
<ui:repeat var="userMsg" value="#{messagesManagedBean.paginator1.model}">
    <center><img class="h-diff" src="../images/differentiator-profile.jpg" width="437" height="1" /></center>
    <div id="message">
        <div id="senderImg">
            <img class="senderImg" src="../images/profile-pic.jpg" width="50" height="50" />
        </div>
        <div id="message-txt-area">
            <div id="senderName">
                <p:commandLink styleClass="senderName" value="#{userMsg.userFullname}" action="#{myProfileManagedBean.loadProfileFrontInformation(userMsg.userId)}"></p:commandLink>
            </div>
            <ui:fragment rendered="#{userMsg.isRead}">
                **<div id="message-txt">
                    #{userMsg.message}
                </div>**
            </ui:fragment>
            <ui:fragment rendered="#{not userMsg.isRead}">
                **<div id="message-txt" class="msgNotRead">
                    #{userMsg.message}
                </div>**
            </ui:fragment>
            <div id="msgAction">
                <p:commandLink styleClass="reply-btn" action="#{messagesManagedBean.setSelectedMsg(userMsg)}"
                               value="Reply" oncomplete="messageDialog.show()" update=":messagesForm:dialogGrid">
                    <f:param name="userMsg" value="#{userMsg}" />
                </p:commandLink>
                <ui:fragment rendered="#{userMsg.isRead}">
                    <p:commandLink styleClass="open-btn" value="Open" action="#{messagesManagedBean.setSelectedMsg(userMsg)}"
                                   oncomplete="messageDialog2.show()" update=":messagesForm:dialogGrid2">
                        <f:param name="userMsg" value="#{userMsg}" />
                    </p:commandLink>
                </ui:fragment>
                <ui:fragment rendered="#{not userMsg.isRead}">
                    <p:commandLink styleClass="open-btn" value="Open" action="#{messagesManagedBean.setSelectedMsg(userMsg)}"
                                   actionListener="#{messagesManagedBean.messageOpenedListener(userMsg.messageId)}" 
                                   oncomplete="messageDialog2.show()" update=":messagesForm:dialogGrid2">
                        <f:param name="userMsg" value="#{userMsg}" />
                    </p:commandLink>
                </ui:fragment>
            </div>
        </div>
    </div>
</ui:repeat> 
```

​ 我想在上面的代码上以粗体显示效果......即在消息上是一个字符串。我已经尝试过`text-overflow:ellipsis`，但即使在 Chrome 中也无法正常工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-09T06:17:25.837

为了`text-overflow: ellipsis;`工作，需要三件事：

*   `overflow`必须设置为`hidden`, `scroll`, 或`auto`
*   `white-space: nowrap;`
*   文本必须比元素宽

演示：http: [//jsfiddle.net/ThinkingStiff/mCJCR/](http://jsfiddle.net/ThinkingStiff/mCJCR/)

```
#message-text {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T17:59:00.710

`text-overflow: ellipsis`仅当您具有定义的宽度/高度约束和`overflow: hidden`.

# wolfram-mathematica - D求解特定区间

> ID：11179854
> 
> 赞同：0
> 
> 时间：2012-06-24T17:57:36.960
> 
> 标签：wolfram-mathematica, dsolve

我正在尝试求解一个 D 方程，但我不知道`y[0]`，但我知道`y[x1]=y1`。

我只想在相关的 xrange 中解决 DSolve `x=[x1, infinitny]`。

它怎么可能起作用？

附上不起作用的例子

```
dsolv2 = DSolve[{y'[x] == c*0.5*t12[x, l2]^2 - alpha*y[x], y[twhenrcomesin] == zwhenrcomesin, x >= twhenrcomesin}, y[x], x]
dsolv2 = Flatten[dsolv2]
zsecondphase[x_] = y[x] /. dsolv2[[1]] 
```

我知道 DSolve 不允许不等式条件，但我将其放入以向您解释我正在寻找的内容（`t12[x,l2]`由于 l2 已知，因此仅根据 x 给我一个值）。

**编辑**

```
t12[j24_, lambda242_] := (cinv1 - cinv2)/(cop2 - cop1 + (h2*lambda242)*E^(p*j24));
cinv1 = 30; cinv2 = 4; cinv3 = 3; h2 = 1.4; h3 = 1.2; alpha = 0.04; z = 50; p = 0.06; cop1 = 0; cop2 = 1; cop3 = 1.3; teta2 = 0.19; teta3 =0.1; co2 = -0.6; z0 = 10;l2 = 0.1; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T10:20:31.460

你的方程是一阶线性的，所以你可以得到一个非常普遍的解决方案：

```
generic = DSolve[{y'[x] == f[x] - alpha*y[x], y[x0] == y0}, y[x], x] 
```

然后您可以替换您的特定术语：

```
c = 1;
x0 = 1;
y0 = 1;
solution[x_] = generic[[1, 1, 2]] /. {f[x_] -> c*0.5*t12[x, l2]^2}   

Plot[solution[x], {x, x0, 100}] 
```

![例子](../Images/8eec6f6da19609a5fc7fa42eaa85b6d3.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T19:12:10.293

这个例子有什么问题？

```
t12[x_] := Exp[-x .01] Sin[x];
dsolv2 = Chop@DSolve[{y'[x] == c*0.5*t12[x]^2 - alpha*y[x], y[1] == 1}, y[x], x];
Plot[y[x] /. dsolv2[[1]] /. {alpha -> 1, c -> 1}, {x, 1, 100}, PlotRange -> Full] 
```

![在此处输入图像描述](../Images/97d1ee83747187c938767d2e58ababcd.png)

**编辑**

关于你的评论：

尝试使用分段函数来限制域：

```
t12[x_] := Piecewise[{{ Exp[-x .01] Sin[x], x >= 1}, {Indeterminate, True}}] ;
dsolv2 = Chop@DSolve[{y'[x] == c*0.5*t12[x]^2 - alpha*y[x], y[1] == 1}, y[x], x];
Plot[y[x] /. dsolv2[[1]] /. {alpha -> 1, c -> 1}, {x, 1, 100}, PlotRange -> Full] 
```

# javascript - 在 url 悬停时在弹出 div 中显示网站？

> ID：11179857
> 
> 赞同：5
> 
> 时间：2012-06-24T17:57:43.463
> 
> 标签：javascript, jquery, html, css, iframe

我正在尝试做类似的事情：

```
<a href="http://www.google.com">Google</a> 
```

当用户悬停链接时：

```
<div id="display-site">

//working site contained in a div

</div> 
```

请注意，我知道我可以使用 html 在新窗口中打开链接，我想我有兴趣弄清楚如何`<a>`在 div 容器中“预览”标签中包含的网站，（如果链接悬停）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-24T18:01:21.840

这可以通过`<iframe>`在 DOM 中将鼠标悬停在 an 上`<a>`并将其加载`href`为 iframe 的`src=`属性来完成。为了使它看起来像一个弹出窗口，您需要将其定位`<iframe>`在绝对位置，并将其`z-index`CSS 属性设置为比页面内容的其余部分更高的值。

但是，如果您需要修改加载帧的显示，例如调整某些元素的大小以适应@David 的回答所建议的缩放级别，您可能会违反同源策略，因为不允许使用脚本访问加载帧的属性在同一个域之外。

[来自 MDN：](https://developer.mozilla.org/en/HTML/Element/iframe)

> 试图访问框架内容的脚本受同源策略的约束，并且如果它是从不同的域加载的，则无法访问其他窗口对象中的大多数属性。这也适用于试图访问其父窗口的框架内的脚本。使用window.postMessage仍然可以实现跨域通信。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-24T18:07:07.853

在继续之前 - 检查这是否有利于用户体验。当我将鼠标移到页面上并刷过超链接时，我并不总是希望链接预览出现在顶部。但是，假设这符合您的用户的最大利益......

在实现方面，正如@Michael 建议的那样，这可以通过使用 来完成，`<iframe>`但是 iframe 中的文档将以用户设置的缩放级别显示，但不会显示为至少 1024x768 设计的文档的 250x250 窗口来帮助用户。因此，您需要向用户显示网页的缩小鸟瞰图。

有多种方法可以获取当前视口缩放级别（[如何在所有现代浏览器中检测页面缩放级别？](https://stackoverflow.com/questions/1713771/how-to-detect-page-zoom-level-in-all-modern-browsers/5078596#5078596)），但我不知道设置它是如何工作的（在大多数情况下，这可能是不可能的）。此外，我认为您不能在每个 iframe 的基础上设置缩放（假设您可以全部设置）。

那么最好的方法是向用户显示一个按比例缩小的位图页面呈现 - 就像谷歌在其搜索结果中为热门页面所做的那样。但是，这意味着对于您链接到的每个页面，您都需要获取目标页面的渲染图像。

我记得几年前有一些公司提供页面缩略图服务（它是 2005-2008 年流行的网页中那些烦人的双下划线广告文字的一部分），但现在它们已经很少见了。

我想您必须随后设置自己的服务并托管布局引擎（Gecko、WebKit 或 Trident），以便它可以为您生成页面缩略图。

综合考虑，我觉得不值得。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T18:10:11.407

像这样，只是一个想法

```
$('a').hover(function()
 {
    $('#display-site').load((this).attr('href'));
    $('#display-site').show();
 }); 
```

您需要根据需要设置 css 属性

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-24T22:51:00.837

1- 找到一个在元素悬停时显示工具提示的 jquery 插件。
2- 在工具提示容器中的 div 中插入链接引用的网站的 iframe。

# azure-table-storage - 具有不同 PartitionKey 但对象相同的 Azure 表存储？

> ID：11179858
> 
> 赞同：0
> 
> 时间：2012-06-24T17:57:44.720
> 
> 标签：azure-table-storage

如果我有一个对象“Student”，它将与 2 个“Course”对象相关联，我想我需要先使用“Class1_Student1”的分区键将学生添加到 azure 表，然后再使用“Class2_Student1”。

考虑到这是除了 PartitionKey 之外的相同 Student 对象，这是 azure 中的重复对象吗？或者这是否以某种方式（可能被 RowKey 识别？）作为同一个对象？

因此，如果我将那个学生从任何课程的 azure 表中拉出来并更新它，我希望我能获得任何其他课程请求的更新版本。

Azure 如何处理这个问题，我需要做些什么来获得我想要的功能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T18:29:50.240

在 Windows Azure 表中，实体的标识是它的分区键和行键，因此对于 Windows Azure，您有两个完全不相关的学生。

如果你更新一个，它不会对另一个产生影响。

我可以想出两种策略来获得我认为你想要的东西：

1.  标准化。在关系数据库领域，这是标准做法。在每个“课程”中，您只会*引用*Student1。在“学生”表中，每个学生只会出现一次。
2.  自己维护非规范化方案。因为 Windows Azure 表中没有跨分区事务，所以这很棘手。我建议使用队列...每个更改（“将 Student1 的地址更新为 foo”）都需要进入队列，并且仅在完成*所有*更新后（跨所有相关课程）才删除队列消息。这样，如果您的流程在更新学生的过程中终止，则可以稍后再接手并完成工作。

# python - 在 GTK (Python) 中对 WebKit WebView 实现的 API 参考

> ID：11179859
> 
> 赞同：4
> 
> 时间：2012-06-24T17:57:45.227
> 
> 标签：python, documentation, webkit, gtk, pygobject

我正在 Ubuntu 上开发 Python Gtk3 应用程序，该应用程序主要使用`WebView`WebKit。我在 python 中找不到 WebView 对象可用的所有方法，目前我只知道它的`open()`方法，那么，我在哪里可以得到它所有方法的详细参考，包括一些关于处理 cookie 和用户密码保存等的文档？

我浏览了[http://webkitgtk.org/](http://webkitgtk.org/)但我找不到与 Python 相关的 API，或者（我可能错过了）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-24T18:50:16.553

由于 GOBject Introspection，您应该可以访问 WebKit 中可用的每个公共类/方法/函数。因此，原始 API 文档应该会有所帮助。

要了解每种可用的方法，您甚至可以使用 Python 的经典帮助。例如：

```
$ python
>>> from gi.repository import WebKit2
>>> help(WebKit2.WebView) 
```

现在，您可以将方法名称与其他语言（可能是 Objective-C）的文档进行匹配。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T08:59:47.230

此外，[webkitgtk.org](http://webkitgtk.org/reference/webkitgtk/stable/ch02.html)上的 API 参考也非常好，尽管它不是特定于 Python 的。但是，如果您习惯阅读 GTK 文档，那么将它用于 Python 应用程序非常容易。

# objective-c - 在隐藏/显示状态栏时向上/向下滑动所有视图

> ID：11179860
> 
> 赞同：2
> 
> 时间：2012-06-24T17:57:53.437
> 
> 标签：objective-c, ios, autoresizingmask, uistatusbar

我让用户随意显示/隐藏状态栏，我希望所有视图都随之向下/向上滑动。我假设设置自动调整大小掩码会解决这个问题。我以编程方式添加了导航控制器，所以我这样做了：

```
[self.view setAutoresizingMask:UIViewAutoresizingFlexibleHeight];
[self.navigationController.view setAutoresizingMask:UIViewAutoresizingFlexibleHeight];
[self.navigationController.navigationBar setAutoresizingMask:UIViewAutoresizingFlexibleTopMargin]; 
```

这没有效果。

我打印了隐藏状态栏前后的框架矩形`self.view`，它们保持完全相同的高度。`self.navigationController.view`

由于 autoresizesSubviews 默认为 YES，我怀疑这是问题所在。我一定不能正确设置自动调整大小的蒙版。有人知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T15:43:58.980

答案似乎是容器视图的自动调整大小掩码根本不与状态栏协调。除了编写代码调整布局别无选择。

由于 Apple 没有提供 statusBar 和其他元素之间的自动协调，你会认为他们会让我们自己做。但是，不，我们不允许直接设置 statusBar 框架。动画 statusBar 重新定位的唯一方法是 via `UIStatusBarAnimationSlide`，它使用自己的时间线，永远不会匹配其他动画。

但是，我们可以控制 statusBar 淡入淡出的时间，并随之滑动容器视图。子视图的自动调整大小掩码将完成其余的工作。这实际上看起来相当不错，并且编码虽然因一些奇怪的框架行为而变得复杂，但并不太痛苦：

```
UIApplication *appShared = [UIApplication sharedApplication];
CGFloat fStatusBarHeight = appShared.statusBarFrame.size.height; // best to get this once and store it as a property
BOOL bHideStatusBarNow = !appShared.statusBarHidden;
CGFloat fStatusBarHeight = appDelegate.fStatusBarHeight;
if (bHideStatusBarNow)
    fStatusBarHeight *= -1;

CGRect rectView = self.view.frame; // must work with frame; changing the bounds won't have any effect

// Determine the container view's new frame.
// (The subviews will autoresize.)
switch (self.interfaceOrientation) {
    case UIInterfaceOrientationPortrait:
    case UIInterfaceOrientationPortraitUpsideDown: 
        rectView.origin.y += fStatusBarHeight;
        rectView.size.height -= fStatusBarHeight;
        break;
    case UIInterfaceOrientationLandscapeLeft:
    case UIInterfaceOrientationLandscapeRight:
        // In landscape, the view's frame will sometimes complement the orientation and sometimes not. 
        /*
         Specifically, if view is loaded in landscape, its frame will reflect that; otherwise, the frame will always be in portrait orientation.
         This is an issue only when the navBar is present. Regular view controllers can count on the frame staying in portrait orientation no matter what.
         But regular view controllers have another oddity: In the upside-down orientations, you should adjust the height only; the origin takes care of itself.
         */
        if (rectView.size.width < rectView.size.height) {
            rectView.origin.x += fStatusBarHeight;
            rectView.size.width -= fStatusBarHeight;
        }
        else {
            rectView.origin.y += fStatusBarHeight;
            rectView.size.height -= fStatusBarHeight;
        }
        break;
    default:
        break;
}

// The navBar must also be explicitly moved.
CGRect rectNavBar = [self.navigationController.navigationBar frame];
rectNavBar.origin = CGPointMake(0.0f, rectNavBar.origin.y + fStatusBarHeight);

// Perform the animated toggling and reframing.
[UIView animateWithDuration:kAnimDurationToggleStatusBar animations:^{
    [appShared setStatusBarHidden:bHideStatusBarNow]; // you can add withAnimation:UIStatusBarAnimationSlide here and it will work, but the timing won't match
    [self.navigationController.navigationBar setFrame:rectNavBar];
    [self.view setFrame:rectView];
}]; 
```

无需对工具栏进行任何操作，它仍然粘在屏幕底部——只要您*没有*将窗口框架设置为 mainScreen.bounds。

一个障碍是当您想要重新显示它时如何获取 statusBar 高度，因为`statusBarFrame`如果它当前隐藏，则返回一个 0 区域的矩形。事实证明，做一个初步的显示/隐藏，没有动画，只是为了得到矩形，工作正常。没有可见的闪光。

此外，如果您使用的是 xib/nib，请确保其视图的 statusBar 设置为 None。

也许有一天苹果会增强 statusBar 布局行为。然后所有这些代码，对于每个视图控制器，都必须重做......

# ruby-on-rails - 接受嵌套属性未按预期工作

> ID：11179862
> 
> 赞同：0
> 
> 时间：2012-06-24T17:57:55.133
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, nested-attributes

所以我有一个实体表单，它接受另一个实体的嵌套属性。这表现得非常好。但是，嵌套表单并没有像我希望的那样运行。见下文：

```
<table class="datagrid">
  <thead class="datagrid">
        <th width="300" align="left">&nbsp;Item</th>
        <% unless current_user.is_partner? %>
            <th width="100">&nbsp;Location</th>
        <% end %>
        <th>&nbsp;Amount Requested</th>
        <th>&nbsp;Amount Checked Out</th>
  </thead>

    <% session[:clicked_request].items.each do |item| %>  
      <tr class="<%= cycle('dg_list_line_odd', 'dg_list_line_even') %>">  
        <td>&nbsp;<%= link_to "#{item.name}", item_path(item) %></td>  
            <% unless current_user.is_partner? %>
            <td>&nbsp;&nbsp;<%= item.location.name %></td>
            <% end %>
            <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<%= item.requested %></td>
            <td><%= f.text_field :amount, :value => item.requested, :size => 1 %></td>
      </tr>  
    <% end %>
</table>
<p>&nbsp;</p> 
```

如您所见，这里有一个“每个”循环，它允许显示并希望创建多个项目。但是，当我按下提交按钮时，无论存在多少项目，都只会创建其中一个。

非常感谢您的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T18:58:39.783

这不是你渲染表单的方式`accepts_nested_attributes`

假设`f`是绑定到父对象的表单构建器，您需要执行类似的操作

```
<%= f.fields_for :items do |item_form| %>
  <%= item_form.text_field :amount
<% end %> 
```

该块将对集合中的每个项目执行一次。此外，`item_form`设置了正确的前缀，以便控制器端正常工作。

# android - 选择特定的 Android AVD Dreamweaver CS 5.5

> ID：11179866
> 
> 赞同：0
> 
> 时间：2012-06-24T17:58:48.970
> 
> 标签：android, dreamweaver

最近对 Dreamweaver CS5.5 的升级终于正确安装了 Android SDK，但在使用 Build & Emulate 功能时，它只启动 4.0.3 AVD。

您如何告诉它启动其他 AVD 之一，例如 2.3？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T05:19:01.683

快速回答 > Android 4.0.3 是默认仿真平台，您可以通过 Manage AVDs 对话框更改为其他平台。**详细步骤如下**

转到站点 > 移动应用程序 > 应用程序设置 在生成的本机应用程序设置对话框中，提供作者姓名并在选择目标操作系统版本下单击管理 AVDs ...</p>

您将在屏幕顶部看到 Android SDK Manager 的工具选项卡，单击工具 > 管理 AVD。

结果对话框列出了现有的 AVD

点击新建..

提供新 AVD 的名称并从目标下拉列表中选择首选目标平台。您可以将其余选项保留为默认值。

关闭对话框并返回到 Native Application Settings 对话框。

从 Target OS for Android 的下拉列表中，您可以看到列出的 New AVD，选择它并保存。

您现在可以在新平台上构建和仿真！！！

..哈里什

# java - 基于 Java 的增强现实框架？

> ID：11179868
> 
> 赞同：7
> 
> 时间：2012-06-24T17:59:06.803
> 
> 标签：java, augmented-reality

我想知道 Java 中现有的增强现​​实框架。我想开发一些与增强现实相关的交互式**桌面应用程序。**需要哪些框架？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-24T18:28:32.687

看看[http://nyatla.jp/nyartoolkit/wp/](http://nyatla.jp/nyartoolkit/wp/)这是一个用 Java 编写的 ARToolkit 端口，我已经将它用于 android 和桌面应用程序。如果您想真正快速入门，请尝试[处理](http://processing.org)和 NyAR4psg。

我知道的所有其他库大多是用 c(++) 编写的。

这是我知道的其他一些 c++ 框架：

*   [http://www.artoolworks.com/](http://www.artoolworks.com/)
*   [http://www.icg.tugraz.at/project/studierstube](http://www.icg.tugraz.at/project/studierstube)

# android - 带有 where 语句的 SQLite 选择查询

> ID：11179873
> 
> 赞同：0
> 
> 时间：2012-06-24T18:00:02.893
> 
> 标签：android, select, sqlite, where

我有以下`SQLite select`声明功能

```
public Boolean itemFound(String cartId,Long ItemId){
        SQLiteDatabase db = this.getReadableDatabase();
        Log.d("search",cartId+"--"+ItemId);

        try {
            String where = COL_ITEM_CART_ID+"='"+cartId+"' and "+COL_ITEM_ID+" ="+ ItemId+"";
            Log.d("where===============", where);
            String columns[] = new String[] { COL_ITEM_ID,COL_ITEM_NAME, COL_ITEM_PRICE, COL_ITEM_ADDDATE,COL_ITEM_QUANTITY,COL_ITEM_CART_ID }; // > null means * (all)
            Cursor c = db.query(TABLE_NAME,
                                columns ,
                                COL_ITEM_CART_ID+"='?' and "+ COL_ITEM_ID + "=?"  ,
                                new String[]{cartId,String.valueOf(ItemId)}, 
                                null, 
                                null, 
                                COL_ITEM_ADDDATE+" desc");

            int numRows = c.getCount();

            c.close();
            db.close();
            if(numRows>0)
                return true;
            else
                return false;
        } catch (SQLException e) {
            db.close();
            return false;
        }
    } 
```

其中参数是：

*   `Long`类型 itemId = 9882889921
*   `String`类型 cartId = ca1745ef-24eb-4da8-a1ea-9650d78ba5c0

尽管对这些数据进行了重新编码。返回的行是 0，为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T18:08:22.507

该`query`方法将为您清理您的数据输入，因此当您`?`用撇号包装 s 时，撇号将成为输入字符串本身的一部分。这导致您的查询返回 0 行。

`'?'`要解决此问题，请删除更改to的所有实例`?`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T18:04:17.100

你已经用`?`单引号括起来了，改变这个：

```
COL_ITEM_CART_ID+"='?' and "+ COL_ITEM_ID + "=?" 
```

上面的行试图从字面上匹配`COL_ITEM_CART_ID`一个问号，像这样改变它：

```
COL_ITEM_CART_ID + "=? and "+ COL_ITEM_ID + "=?" 
```

# c++ - 检测地址（主机）是否解析为本地计算机

> ID：11179876
> 
> 赞同：1
> 
> 时间：2012-06-24T18:00:34.493
> 
> 标签：c++, winapi, winsock

> **可能重复：**
> [获取本地计算机的](https://stackoverflow.com/questions/122208/get-the-ip-address-of-local-computer)
> [IP 地址 使用 getaddrinfo() C 函数获取本地 IP 地址？](https://stackoverflow.com/questions/2146191/obtaining-local-ip-address-using-getaddrinfo-c-function)

我需要考虑 127.0.0.1 以外的 IP，并且实现还应该检测主机文件条目或其他方法。

有什么方法/api/函数可以直接检查特定主机是否解析为本地机器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T18:06:53.600

取决于操作系统。但是您枚举 IP 接口，检查每个配置的 IP，然后您可以将 IP 地址与本地 IP 列表进行比较。

要在主机名上执行此操作，您需要使用 DNS 将主机名解析为 IP，然后如上所述检查本地 IP 接口。

我不知道有任何操作系统功能可以为您执行此操作。

# python - 将 soup.get_text() 与 UTF-8 一起使用

> ID：11179878
> 
> 赞同：7
> 
> 时间：2012-06-24T18:01:02.003
> 
> 标签：python, python-2.7, beautifulsoup

我需要使用 BeautifulSoup 从页面中获取所有文本。在 BeautifulSoup 的文档中，它表明您可以这样`soup.get_text()`做。当我尝试在 reddit.com 上执行此操作时，出现此错误：

```
 UnicodeEncodeError in soup.py:16
  'cp932' codec can't encode character u'\xa0' in position 2262: illegal multibyte sequence 
```

在我检查的大多数网站上，我都会遇到类似的错误。
我也遇到了类似的错误`soup.prettify()`，但我通过将其更改为`soup.prettify('UTF-8')`. 有没有什么办法解决这一问题？提前致谢！

**更新 6 月 24 日**
我发现了一些似乎对其他人有用的代码，但我仍然需要使用 UTF-8 而不是默认值。代码：

```
 texts = soup.findAll(text=True)

   def visible(element):
      if element.parent.name in ['style', 'script', '[document]', 'head', 'title']:
         return False
      elif re.match('', str(element)): return False
      elif re.match('\n', str(element)): return False
      return True

   visible_texts = filter(visible, texts)

   print visible_texts 
```

但是，错误是不同的。进步？

```
 UnicodeEncodeError in soup.py:29
'ascii' codec can't encode character u'\xbb' in position 1: ordinal not in range
(128) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-29T11:02:34.767

soup.get_text() 返回一个 Unicode 字符串，这就是您收到错误的原因。

您可以通过多种方式解决此问题，包括在 shell 级别设置编码。

```
export PYTHONIOENCODING=UTF-8 
```

您可以通过将其包含在脚本中来重新加载 sys 并设置编码。

```
if __name__ == "__main__":
  reload(sys)
  sys.setdefaultencoding("utf-8") 
```

或者您可以在代码中将字符串编码为 utf-8。对于您的 reddit 问题，可以使用以下方法：

```
import urllib
from bs4 import BeautifulSoup

url = "https://www.reddit.com/r/python"
html = urllib.urlopen(url).read()
soup = BeautifulSoup(html)

# get text
text = soup.get_text()

print(text.encode('utf-8')) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T18:28:41.897

如果您可能正在处理页面上的 unicode，则不能执行 str(text)。使用 unicode() 代替 str()。

# python - 简单的 OOP：Python，通过 __init__ v2 保存对象名称

> ID：11179879
> 
> 赞同：0
> 
> 时间：2012-06-24T18:01:15.653
> 
> 标签：python, oop

好的，我之前问过一个类似的问题，但由于我缺乏正确的术语而太混乱了。这是我第二口吃苹果。

我想创建一个对象，它`__init__`会将分配给对象的名称保存在列表中。

有点像这样：

```
class Object():

  def __init__(self, something):

    self.something = something
    (now how do I save the xxx, xx, and x names I create below?)

xxx = Object(something)

xx = Object(something)

x = Object(something) 
```

我想要一个`total_objects`包含`[xxx, xx, x]` 对不起格式的全局（或其他）。我希望我的问题仍然很清楚。

如：

```
 total_objects = [xxx, xx, x] 
```

另外，如果我的方法草率并且有更好的方法，请告诉我，但我不想在代码本身中保存“x”名称。比如`total_objects.append(xxx)` `total_objects.append(xx)`等等。我希望它是自动的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T18:06:41.840

您不能在 Python 中完全做到这一点，因为没有什么要求将对象分配给特定名称，因此初始化程序不会传递此类信息。

例如，以下行都是有效的 Python：

```
x = Object()
y = x
Object()
[Object() for i in xrange(5)]
x = [Object() for i in xrange(5)] 
```

如果要跟踪对象的实例，可以这样做，但这与引用这些实例的名称是分开的：

```
class Object(object):
    my_instances = []

    def __init__(self):
        my_instances.append(self) 
```

然后`Object.my_instances`将包含实例列表：

```
[<__main__.Object instance at 0x012BA760>, ...] 
```

然而，这可能不是你想要的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T18:07:59.660

```
lis = []
class Object():
    def __init__(self, var):
        self.something = var 
        lis.append(self)  #here self is the reference to the instance being created and you can save it in a list to access it later
xxx = Object('123')
xx = Object('12')
x = Object('1')

for x in lis:
    print(x.something) 
```

**输出：**

```
123
12
1 
```

# sql - 打开的连接数和连接休眠状态的含义

> ID：11179880
> 
> 赞同：13
> 
> 时间：2012-06-24T18:01:16.117
> 
> 标签：sql, sql-server, sql-server-2008

我在我的数据库中运行了这个查询：

```
SELECT  
DB_NAME(dbid) as DBName,  
COUNT(dbid) as NumberOfConnections, 
loginame as LoginName 
FROM 
    sys.sysprocesses 
WHERE  dbid > 0 
GROUP BY  dbid, loginame 

---------------------------------------------------
SELECT  COUNT(dbid) as TotalConnections 
FROM sys.sysprocesses 
WHERE  
dbid > 0 
---------------------------------------------------
exec sp_who2 'Active' 
```

我想知道到我的数据库的连接总数。第一个查询的总和与第二个查询的数量相等，但第三个查询返回的行数不同。

我想知道第三个查询返回什么？我在第三个查询的结果中看到一些状态是`sleeping`. 这是什么意思？连接是空闲的，还是在池中准备就绪？如果我`sleeping`的结果中有很多连接，这意味着什么？

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-24T18:06:04.000

状态`sleeping`表示会话已连接但未主动运行任何内容（例如，最简单的定义，虽然可能不是 100% 准确，但在 中没有任何内容`session_id`）`sys.dm_exec_requests`。

`sp_who2 'active'`过滤掉任何状态为`sleeping`或最后一个命令为 或`AWAITING COMMAND`的`LAZY WRITER`spid `CHECKPOINT SLEEP`。不，我没有记住是什么`sp_who2`；我只是看了一下源代码：

```
EXEC master..sp_helptext sp_who2; 
```

请注意，这`sp_who2`是未记录且不受支持的，并且 sysprocesses 已被弃用，目前仅出于向后兼容性的原因而存在。[我认为，像Adam Machanic 的 sp_whoisactive](http://whoisactive.com)这样的程序会更好地为您服务。或者至少知道如何使用更现代的 DMV，例如[`sys.dm_exec_sessions`](http://msdn.microsoft.com/en-us/library/ms176013(sql.100).aspx)和[`sys.dm_exec_requests`](http://msdn.microsoft.com/en-us/library/ms177648(v=sql.100))。

**编辑**

我应该添加一个不幸的免责声明，即更现代的 DMV 仍然没有正确显示所涉及的数据库。但这到底意味着什么？如果您有这样的查询：

```
USE database_A;
GO

SELECT [column] FROM database_B.dbo.[table] 
  UNION ALL
SELECT [column] FROM database_C.dbo.[table]; 
```

`sys.sysprocesses.dbid`在此查询运行时，您希望该会话反映什么数据库 ID ？我将把它作为练习留给读者来确定实际发生的情况。长话短说，这不是您想要依赖的视图/列来了解当​​前正在“触及”哪些数据库。

# ruby - 如何从 Instagram-ruby gem 指定 .media_search 方法的图像结果总数

> ID：11179884
> 
> 赞同：0
> 
> 时间：2012-06-24T18:01:31.717
> 
> 标签：ruby, gem, instagram

我想从 Instagram-ruby gem 提供的 .media_search 方法返回 18 张照片。源代码说要传入带有键的选项散列：count => some_integer 问题是当我添加选项散列时，gem 返回的似乎是随机响应数。有时它会返回 8 个其他时间 4 个等等。

我错过了什么？？？谢谢。

这是我正在使用的示例文件

```
 require 'instagram'
    require 'faraday'

    Instagram.configure do |config|
      config.client_id     = "CLIENT_ID"
      config.client_secret = "CLIENT_SECRET"
    end

    result = Instagram.media_search("40.7143528", "-74.00597309999999", {:count => 18}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T21:58:56.980

尽管 instagram-ruby-gem 中的[media_search](https://github.com/Instagram/instagram-ruby-gem/blob/master/lib/instagram/client/media.rb#L57)方法确实接受选项哈希，但**count**参数不是此特定端点的允许参数，如可以在[此处的 Instagram 的 API 文档中看到的那样](http://instagram.com/developer/endpoints/media/#get_media_search)

# android - AndEngine gles2、scala 和 sbt android 插件

> ID：11179890
> 
> 赞同：0
> 
> 时间：2012-06-24T18:02:22.247
> 
> 标签：android, scala, andengine, sbt

我想知道是否有人能够使用 andengine gles2 和 android sbt 插件。我已经尝试了所有方法，但唯一有效的解决方案是将 gles1 jar 放入 lib。我什至尝试过使用 wiki 上的 Android 库项目，但由于没有用于 andengine gles2 的 maven，我无法使其工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T12:50:16.527

这似乎有效：

*   结帐/下载和引擎。
*   压缩完整的andengine srcs（我称之为`andengine.apklib`）
*   像这样在sbt中引用andengine（相应地替换最后的路径）

    libraryDependencies += "andengine" % "library" % "2.0.0" artifacts(Artifact("library", "apklib", "apklib")) 来自 "file:/abc/def/andengine.apklib"

# iphone - 将排序列表项与 UItableview 标题的字符串进行比较

> ID：11179894
> 
> 赞同：0
> 
> 时间：2012-06-24T18:02:49.123
> 
> 标签：iphone, ios, uitableview, sorting, compare

我在表格视图中对列表进行了排序，但我不想将列表的项目显示为行的标题。我需要将排序列表的第一项与字符串进行比较，如果相同，我想显示另一个字符串作为标题。

举个例子，为了更好地解释它：

```
if (first item of the sorted list == some string) {

   cell.textlabel.text = @"name";

} 
```

有可能做这样的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T18:28:38.693

您的排序数组是否存储在`NSArray`? 如果是这样，您可以使用：

```
if ([[sortedArray objectAtIndex:0] isEqualToString:@"Some String"]) {
    cell.textlabel.text = @"name";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T18:30:21.560

如果我正确地解释了这个问题，那么是的。如果第一项是一个单元格，大概是这样，那么你可以这样做；

```
NSIndexPath *indexPath = [NSIndexPath indexPathForRow:0 inSection:0];
UITableViewCell *firstCell = [yourTableView cellForRowAtIndePath:indexPath];
NSString *titleOfFirstCell = firstCell.textLabel.text; 
```

然后你可以比较它来检查它应该被改变成什么——我将把这个字符串称为'updatedTitle'。

```
titleOfFirstCell.textLabel.text = updatedTitle;
[firstCell setNeedsDisplay]; 
```

希望这可以帮助，

乔纳森

# java - NumberFormat.parse 返回意外结果

> ID：11179898
> 
> 赞同：4
> 
> 时间：2012-06-24T18:03:02.313
> 
> 标签：java, parsing, number-formatting

我希望下面的代码会抛出 ParseException，但它是“2”，任何人都可以解释这一点，或者这是 java 实现中的错误吗？我在最新的 Oracle (1.7.0_05) 和 osx jvms 上运行它。

```
 try {
        NumberFormat format = NumberFormat.getInstance(Locale.US);
        Number number = format.parse("2 3");
        System.out.println(number);
    } catch (ParseException e) {
        System.out.println("2 3 is not a valid number!");
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T18:05:54.920

这是因为`NumberFormat.parse(String)`可能不会使用整个文本进行解析。见[这里](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/NumberFormat.html#parse%28java.lang.String%29)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T18:09:48.847

这是预期的结果。

根据[文档](http://docs.oracle.com/javase/6/docs/api/java/text/NumberFormat.html#parse%28java.lang.String%29)， NumberFormat.parse 不一定使用整个字符串。

Java 编程规则#1：始终阅读文档！

# android - 安卓、MySQL、运行时

> ID：11179902
> 
> 赞同：0
> 
> 时间：2012-06-24T18:03:24.320
> 
> 标签：android, mysql

我正在使用[以下代码](http://blog.sptechnolab.com/2011/02/10/android/android-connecting-to-mysql-using-php/)连接到 MySQL 数据库并简单地显示结果。问题必须在 API 中，但我没有看到它，它适用于其他人。我已经为我的数据库相应地修改了代码。这是来自 DDMS 的运行时错误。

06-24 13:45:24.537: E/AndroidRuntime(32329): java.lang.RuntimeException: 无法实例化活动 ComponentInfo{com.list/com.list.TestdbActivity}: java.lang.ClassNotFoundException: com.list.TestdbActivity在加载器 dalvik.system.PathClassLoader[/data/app/com.list-2.apk]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T18:35:58.880

好的，您应该将您正在使用的活动添加到清单中：) 您仍然应该添加为`<activity android:name=".TestdbActivity"></activity>`

# html - 删除 webkit 选择中的复选标记

> ID：11179904
> 
> 赞同：6
> 
> 时间：2012-06-24T18:03:52.027
> 
> 标签：html, css

webkit html select 元素使用复选标记来表示选定的选项。我想知道是否可以使用 CSS 删除此复选标记？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-24T18:48:37.700

插入复选标记的是 Mac OS X。这就是它对系统范围内的所有本机选择框所做的事情；你不能用 CSS 改变它。

# c# - 'Microsoft.ACE.OLEDB.12.0' 提供程序未在本地计算机上注册。

> ID：11179905
> 
> 赞同：34
> 
> 时间：2012-06-24T18:03:53.230
> 
> 标签：c#, asp.net, web-config, ms-access-2007

一切都在本地正常工作，但是当我发布它时会发生此错误：

```
 The 'Microsoft.ACE.OLEDB.12.0' provider is not registered on the local machine. 
```

和堆栈跟踪

```
[InvalidOperationException: The 'Microsoft.ACE.OLEDB.12.0' provider is not registered on the local machine.]
System.Data.OleDb.OleDbServicesWrapper.GetDataSource(OleDbConnectionString constr, DataSourceWrapper& datasrcWrapper) +1027372
System.Data.OleDb.OleDbConnectionInternal..ctor(OleDbConnectionString constr, OleDbConnection connection) +337
System.Data.OleDb.OleDbConnectionFactory.CreateConnection(DbConnectionOptions options, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningObject) +86
System.Data.ProviderBase.DbConnectionFactory.CreateNonPooledConnection(DbConnection owningConnection, DbConnectionPoolGroup poolGroup) +31
System.Data.ProviderBase.DbConnectionFactory.GetConnection(DbConnection owningConnection) +76
System.Data.ProviderBase.DbConnectionClosed.OpenConnection(DbConnection outerConnection, DbConnectionFactory connectionFactory) +126
System.Data.OleDb.OleDbConnection.Open() +43
System.Data.Common.DbDataAdapter.FillInternal(DataSet dataset, DataTable[] datatables, Int32 startRecord, Int32 maxRecords, String srcTable, IDbCommand command, CommandBehavior behavior) +123
System.Data.Common.DbDataAdapter.Fill(DataSet dataSet, Int32 startRecord, Int32 maxRecords, String srcTable, IDbCommand command, CommandBehavior behavior) +319
System.Data.Common.DbDataAdapter.Fill(DataSet dataSet, String srcTable) +92
System.Web.UI.WebControls.SqlDataSourceView.ExecuteSelect(DataSourceSelectArguments arguments) +1618
System.Web.UI.WebControls.ListControl.OnDataBinding(EventArgs e) +97
System.Web.UI.WebControls.ListControl.PerformSelect() +34
System.Web.UI.WebControls.BaseDataBoundControl.DataBind() +74
System.Web.UI.WebControls.BaseDataBoundControl.EnsureDataBound() +66
System.Web.UI.WebControls.ListControl.OnPreRender(EventArgs e) +29
System.Web.UI.Control.PreRenderRecursiveInternal() +103
System.Web.UI.Control.PreRenderRecursiveInternal() +175
System.Web.UI.Control.PreRenderRecursiveInternal() +175
System.Web.UI.Control.PreRenderRecursiveInternal() +175
System.Web.UI.Control.PreRenderRecursiveInternal() +175
System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +2496 
```

我正在使用 MS access 2007 数据库，这是我在 web.config 中的连接字符串

```
 <add name="ConnectionString" connectionString="Provider=Microsoft.ACE.OLEDB.12.0;Data Source=|DataDirectory|\OmanLegalDB.accdb;Persist Security Info=True" providerName="System.Data.OleDb"/> 
```

关于这个问题的任何建议

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-06-24T18:08:49.977

对于 12.0 版，您需要从[此处](http://www.microsoft.com/en-us/download/details.aspx?id=13255)安装 MDAC 2010 。

这必须在您发布应用程序的服务器上完成。如果目标机器是 32 位，则需要安装 x86 版本；如果目标机器是 64 位并且您的应用程序是使用配置构建的，则需要安装 x64 版本`Any CPU`。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-05T21:32:45.077

正如[这里](http://www.codeproject.com/Tips/417397/OLEDB-Provider-is-not-registered-on-the-local-mach)所建议的，您需要将解决方案平台从“**任何 CPU** ”更改为“ **x86** ”。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-24T18:18:43.697

您的连接字符串是正确的，因此此错误可能是由以下原因引起的：

*   如果你的 Office 在 64 位机器上是 32 位的，并且安装的 MDAC 驱动程序是 64 位的。在这种情况下，您需要安装 32 位 MDAC 驱动程序以匹配 32 位 Office 二进制文件。

这篇[文章](http://ybbest.wordpress.com/2009/07/22/the-microsoft-ace-oledb-12-0-provider-is-not-registered-on-the-local-machine/)有关于如何解决它的详细信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-06T11:08:54.777

如果您不想再下载，请添加我发现的另一个修复程序是将 ACE 更改为 JET 并将 12 更改为 4。

```
'Microsoft.JET.OLEDB.4.0' 
```

然后，您还需要确保将数据库从 .accdb 更改为 .mdb 格式并且应该可以工作。

# php - 当用户单击 facebook 应用程序中的按钮时发布 php GD 处理的图像或其他内容

> ID：11179906
> 
> 赞同：-1
> 
> 时间：2012-06-24T18:04:00.287
> 
> 标签：php, facebook

当用户点击一个按钮时，如何在用户墙上发布一些东西（可能是一个 php 处理的图像或一些文本）。例如，假设一个 facebook 用户安装了我的应用程序，然后它会显示一些处理过的图像，然后如果用户希望发布，他单击发布按钮并发布到他的墙上，否则不会。我面临的困难是从一个页面转到另一个页面（如从 index.php 到 upload.php），传输**access_token**，以及如何进行 api 调用以从 upload.php 上传图像，如果我必须进行上传。 php 作为 index.php 以便它可以重新验证用户？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T18:22:29.233

你听起来真的很困惑。

如果您将文件命名`index.php`为`upload.php`.

我不明白为什么您需要手动处理访问令牌。使用 PHP SDK，它会自动为您完成。PHP SDK 使用该`$_SESSION`变量来存储它。否则，您可以在 URL 中将其作为参数传递，例如：

```
upload.php?access_token=SOMETHING_REALLY_SECRET 
```

不过我不建议这样做，因为它会使您的网站很容易受到攻击。

[PHP SDK 文档](http://developers.facebook.com/docs/reference/php/facebook-api/)中有一个完整的示例：

```
<?
  // Remember to copy files from the SDK's src/ directory to a
  // directory in your application on the server, such as php-sdk/
  require_once('php-sdk/facebook.php');

  $config = array(
    'appId' => 'YOUR_APP_ID',
    'secret' => 'YOUR_APP_SECRET',
    'fileUpload' => true,
  );

  $facebook = new Facebook($config);
  $user_id = $facebook->getUser();

  $photo = './mypic.png'; // Path to the photo on the local filesystem
  $message = 'Photo upload via the PHP SDK!';
?>
<html>
  <head></head>
  <body>

  <?
    if($user_id) {

      // We have a user ID, so probably a logged in user.
      // If not, we'll get an exception, which we handle below.
      try {

        // Upload to a user's profile. The photo will be in the
        // first album in the profile. You can also upload to
        // a specific album by using /ALBUM_ID as the path 
        $ret_obj = $facebook->api('/me/photos', 'POST', array(
                                         'source' => '@' . $photo,
                                         'message' => $message,
                                         )
                                      );
        echo '<pre>Photo ID: ' . $ret_obj['id'] . '</pre>';

      } catch(FacebookApiException $e) {
        // If the user is logged out, you can have a 
        // user ID even though the access token is invalid.
        // In this case, we'll get an exception, so we'll
        // just ask the user to login again here.
        $login_url = $facebook->getLoginUrl( array(
                       'scope' => 'photo_upload'
                       )); 
        echo 'Please <a href="' . $login_url . '">login.</a>';
        error_log($e->getType());
        error_log($e->getMessage());
      }   

      echo '<br /><a href="' . $facebook->getLogoutUrl() . '">logout</a>';
    } else {

      // No user, print a link for the user to login
      // To upload a photo to a user's wall, we need photo_upload  permission
      // We'll use the current URL as the redirect_uri, so we don't
      // need to specify it here.
      $login_url = $facebook->getLoginUrl( array( 'scope' => 'photo_upload') );
      echo 'Please <a href="' . $login_url . '">login.</a>';

    }

  ?>

  </body>
</html> 
```

# javascript - jQuery .each() 获取多个 div 的值

> ID：11179908
> 
> 赞同：3
> 
> 时间：2012-06-24T18:04:15.940
> 
> 标签：javascript, jquery

我正在尝试计算 div 的宽度和同一 div 类多次出现的页面中的文本之间的宽度和差异。

的HTML：

```
<div class="post_content">
       <div class="container">
          <div class="title-holder">
          <h2><a href="link.html" class="widget-title">Crossword Book</a></h2>
          </div>
       </div>

      <div class="container">
         <div class="title-holder">
         <h2><a href="link.html" class="widget-title">Crossword Bookstore Ltd. &ndash; Elgin Road</a></h2>
         </div>
      </div>
</div> 
```

CSS：

```
div.container{
  width: 130px;
}
div.title-holder {
  width: 130px;
  height:20px;
  text-align:center;
  background: silver;
  overflow:hidden;
  position: relative;
}
div.title-holder a {  
  position: relative;  
  white-space:nowrap;  
  left: 0px;
}
div.image{
  background: brown;
  width: 100%;
  height: 100px;
} 
```

以下脚本正确输出第一个 div 的结果，然后重复相同的结果。它不会进入下一个 div 并给出下一个结果。

```
$("div.title-holder").each(function(){    
  var m = $(this).width();
  var n = $("div.title-holder h2 a.widget-title").width();
  var o = m - n;

  alert ("title: " + m + " text: " + n + " diff: " + o);    

}); 
```

输出是

```
First Alert: title: 130 text: 108 diff: 22
Second Alert: title: 130 text: 108 diff: 22 
```

我想要实现的是

```
First Alert: title: 130 text: 108 diff: 22
Second Alert: title: 130 text: 258 diff: -128 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-24T18:08:13.790

的价值：

```
var n = $("div.title-holder h2 a.widget-title").width(); 
```

将始终相同（该选择器查询的第一个结果）。你需要做：

```
var n = $(this).find("a.widget-title").width(); 
```

或更具体：

```
var n = $("div.title-holder").children("h2").children("a.widget-title").width(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-24T18:07:31.983

像这样使用：

```
var n = $(this).find("h2 a.widget-title").width(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-24T18:17:10.100

[jsBin 演示](http://jsfiddle.net/roXon/VGNF2/)

```
$("div.title-holder").each(function(){    
  var m = $(this).width();
  var n = $("h2 a.widget-title", this).width();
  var o = m - n;

  alert("title: " + m + " text: " + n + " diff: " + o);    

}); 
```

# c++ - C ++中的签名保留装饰器模式？

> ID：11179914
> 
> 赞同：2
> 
> 时间：2012-06-24T18:04:59.530
> 
> 标签：c++, design-patterns, boost, stl, decorator

我想在 C++ 中使用装饰器模式，并且仍然能够依赖被装饰对象的签名/身份。是否有可能在 C++ 中做到这一点？

也就是说，我想装饰一个组件：

```
class Component {
  public:
      Component();
      virtual void doSomething();
} 
```

带装饰器：

```
class Decorator : public Component {
  public:
      Decorator(Component*);
      virtual void doSomething();
  private:    
      Component* _component;
} 
```

这样当我这样做时：

```
Component foo;
Decorator(&foo) bar;
std::cout << typeid(bar).name() << std::endl; 
```

它打印“组件”而不是“装饰器”。

（这实际上在 Python 中使用装饰器模块非常简单，但我目前正在学习 C++，甚至不知道从哪里开始寻找这个问题的答案。）

这在我想扩展 Component 类但仍然能够以透明方式使用它的情况下很有用（就好像它不会被扩展一样）：

```
class ExtendDecorator : public Decorator {
  public:
      ExtendDecorator(Component*);
      virtual void doSomething();    

  private:
      void doSomethingMore();
}

void ExtendDecorator::doSomething() {
    Decorator::doSomething();
    doSomethingMore();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-24T20:48:04.033

由于在 C++ 中不允许重载运算符 typeid - 我可以建议的唯一解决方案是添加返回 type_info 的虚拟方法用于修饰类型：

```
class Component {
  public:
      Component();
      virtual void doSomething();
      virtual const std::type_info& decorated_type() const 
      { return typeid(*this); } 
};

class Decorator : public Component {
  public:
      Decorator(Component*);
      virtual void doSomething();
      virtual const std::type_info& decorated_type() const 
      { return typeid(*_component); } 
  private:    
      Component* _component;
}; 
```

也许更好的版本`Decorator::decorated_type() const`：

```
virtual const std::type_info& decorated_type() const 
{ return _component->decorated_type(); } 
```

# ios5 - 关闭视图控制器时，带有 UserLocation 的 MKMapView 崩溃

> ID：11179917
> 
> 赞同：1
> 
> 时间：2012-06-24T18:05:20.607
> 
> 标签：ios5

我有一个带有 MapView 的 ViewController，它设置了 UserLocation 和 MKUserTrackingModeFollow 设置。我有我的视图控制器作为地图视图的代表。

当我关闭 Viewcontroller 时，mapview 中的某些内容仍会将 ClientUpdate 发送到我的 viewcontroller，但它会崩溃，因为它现在已被释放。

我尝试在 dealloc 中调用 [self.mapView setDelegate:nil] 但结果仍然相同。

在我的控制器上调用 onClientEvent 时，错误是 BadAcces。我正在使用 io5 和 ARC。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T11:53:11.197

我通过将 [self.mapView setDelegate:nil] 放入 viewWillDisappear 来修复它。

# jquery - 局部变量和 jQuery.globalEval

> ID：11179920
> 
> 赞同：0
> 
> 时间：2012-06-24T18:05:35.730
> 
> 标签：jquery, eval, param

在我的 Rails 3 ajax 脚手架中，我有一个 ajax:success 钩子，它采用调用实体（a、表单等）的数据加载属性中定义的任何代码，并使用 jQuery.globalEval 执行它。我想访问钩子中的局部变量，例如返回的数据，但是如果我使用...

```
alert( data ) 
```

...在加载的参数中，即使该参数在钩子参数中，它也会给我一个未引用的变量错误。

知道如何在不更改脚手架的情况下使用数据变量吗？更换脚手架并不难，但不必这样做就好了！

我以最简单的形式谈论的一个例子：

```
function testMe( data )
{
    jQuery.globalEval( 'alert( data );' );
} 
```

这段代码告诉我数据未定义，如何将数据传递给 globalEval 是我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T18:16:00.703

globalEval 全局评估代码，因此它忽略范围。由于 data 是 testMe 内部的一个变量，而不是在全局范围内，它实际上是未定义的。你可以这样做：

```
var testMeData;
function testMe( data )
{
   testMeData = data
   jQuery.globalEval( 'alert( testMeData );' );
} 
```

这将输出你想要的。但我不明白你为什么要这样做。

# android - android：使用 libgdx/universal-tween-engine 发布后移动到触摸位置

> ID：11179931
> 
> 赞同：4
> 
> 时间：2012-06-24T18:06:32.033
> 
> 标签：android, libgdx, tween

我正在学习将 libgdx 与 Universal-tween-engine 一起使用，但无法弄清楚如何触摸（或单击桌面应用程序）屏幕上的一个点并让纹理一直移动到触摸的位置在到达终点之前不保持触摸或单击处于活动状态。

当触摸事件启动时，动画开始并且图形向该位置移动。如果启动触摸和拖动，图形将跟随手指/鼠标指针。如果我触摸一个点，图形将向该点移动，直到触摸被释放。然后它在释放触摸时停止。

我正在寻找触摸和释放并将该图形移动到触摸点，并且可能不了解有关补间引擎实现的某些内容。我在下面粘贴了补间代码。

```
 public void render() {

            camera.update();

            batch.setProjectionMatrix(camera.combined);
            batch.begin();
            batch.draw(texture.getTexture(), texture.getBoundingBox().x, texture.getBoundingBox().y);
            batch.end();

            Tween.registerAccessor(Plane.class, new TextureAccessor());
            TweenManager planeManager = new TweenManager();

            float newX = 0;
            float newY = 0;
            boolean animateOn = false;

            if(Gdx.input.isTouched()) {
                    newX = Gdx.input.getX();

                    newY = Gdx.input.getY();

                    animateOn = true;
            }

            if (animateOn == true && (texture.getX() != newX || texture.getY() != newY)) {
                Tween.to(texture, TextureAccessor.POSITION_XY, 10)
                    .target(newX, newY)
                    .ease(TweenEquations.easeNone)
                    .start(planeManager);

                    planeManager.update(1);

                    if (texture.getX() == newX && texture.getY() == newY) {
                        animateOn = false;
                    }
            }

    } 
```

最初，我在条件 for 中有补间代码[`isTouched()`](http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/input/RemoteInput.html#isTouched%28%29)，没有使用`newX`, `newY`or`animateOn`变量。我认为使用`isTouched()`只设置新的坐标和动画状态会使循环触发补间。旧代码如下所示：

```
 if(Gdx.input.isTouched()) {
            newX = Gdx.input.getX();

            newY = Gdx.input.getY();

            Tween.to(texture, TextureAccessor.POSITION_XY, 10)
                .target(newX, newY)
                .ease(TweenEquations.easeNone)
                .start(planeManager);

            planeManager.update(1);
    } 
```

我也尝试过使用[`justTouched()`](http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/input/RemoteInput.html#justTouched%28%29)，但图形只会向触摸点略微移动。

我已经为此苦苦挣扎了几个小时，如果有人能指出我正确的方向，我将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-20T08:53:27.720

```
Tween.registerAccessor(Plane.class, new TextureAccessor());
TweenManager planeManager = new TweenManager(); 
```

这两行应该放在`create()`方法中，而不是`render()`一行！在这里，您在每一帧上都实例化了一个新的经理，您只需要一个经理，仅此而已，而不是他们的军队！

此外，您需要在每一帧上更新管理器，而不仅仅是何时`animateOn`为真，否则您需要按住手指...

正确的代码如下，从中学习，你会更好地理解 Tween Engine 的工作原理:)

```
// Only one manager is needed, like a Spritebatch
private TweenManager planeManager;

public void create() {
    Tween.registerAccessor(Plane.class, new TextureAccessor());
    planeManager = new TweenManager();
}

public void render() {
    // The manager needs to be updated on every frame.
    planeManager.update(Gdx.graphics.getDeltaTime());

    camera.update();

    batch.setProjectionMatrix(camera.combined);
    batch.begin();
    batch.draw(texture.getTexture(), texture.getBoundingBox().x, texture.getBoundingBox().y);
    batch.end();

    // When the user touches the screen, we start an animation.
    // The animation is managed by the TweenManager, so there is
    // no need to use an "animateOn" boolean.
    if (Gdx.input.justTouched()) {
        // Bonus: if there is already an animation running,
        // we kill it to prevent conflicts with the new animation.
        planeManager.killTarget(texture);

        // Fire the animation! :D
        Tween.to(texture, TextureAccessor.POSITION_XY, 10)
            .target(Gdx.input.getX(), Gdx.input.getY())
            .ease(TweenEquations.easeNone)
            .start(planeManager);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-25T03:00:07.247

我试图以错误的方式实现这种行为。而不是使用`isTouched`or `justTouched()`，我需要使用`touchDown()`from [`GestureListener`](http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/input/GestureDetector.GestureListener.html)。

我在主 libgdx 项目的主类（实现 ApplicationLisetener 的那个）中创建了一个实现 GestureDetector （调用它`touchListener()`）的类，并将 x 和 y 捕获代码放入其中`toucDown`（我注意到`tap()`也被触发）。我将补间函数（实际补间、对 的调用`registerAccessor()`以及新补间管理器的创建）移动`update()`到`touchListener()`.

我在主 libgdx 类`touchListener()`的循环中添加了对更新函数的调用。`render()`

我怀疑我这样做是最好的方法，但我希望它对将来的其他人有所帮助。

# perl - Perl Apache httpd.conf

> ID：11179934
> 
> 赞同：1
> 
> 时间：2012-06-24T18:06:42.773
> 
> 标签：perl, apache, config

我继承了一个运行 perl 应用程序的 apache 服务器实例。我在 httpd.conf 中找到了这个指令。

```
<perl>
use lib qw(
    /relative path1
    /relative path2
);
</perl> 
```

我在这个指令上找到的最小文档说它导致所有 apache conf 文件都用 perl 编写。但是上面的代码只添加了 @INC 的 lib 路径。有人知道更多关于这个指令的信息吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T18:41:59.467

使用 mod_perl，该标签允许在 httpd 配置文件中使用/执行 Perl，并且还提供了一组变量和方法来执行标准的 httpd 配置。 [http://perl.apache.org/docs/2.0/api/Apache2/PerlSections.html](http://perl.apache.org/docs/2.0/api/Apache2/PerlSections.html)

至于您的配置示例，我只能假设它正在尝试修改在 mod_perl 下运行的所有内容的 lib 路径，否则它本身没有多大意义（除非您在配置文件中有更多部分？）

如果出现这些配置的库路径，请检查在您的 Web 主机上执行的 Perl 脚本：

```
print join "\n", @INC; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T01:26:50.607

回复：“但上面的代码只将 lib 路径添加到 @INC。”

这正是该代码应该做的。这段特殊的代码旨在添加包含路径，以便可以`PerlModule`从非标准路径加载模块（可能使用 ）。

该`<perl>`部分允许在 Apache 配置文件而不是外部 perl 文件中执行 Perl 代码。它只是为了方便而提供的，除了（我认为更常见的）指令`PerlRequire`为您提供的功能之外，实际上并没有为您提供任何额外的功能。

说一个`<perl>`指令“导致 Apache 配置文件用 Perl 编写”并没有真正的意义，也不是真的。*如果您愿意*，它*允许*您这样做，但这不是这里正在做的事情。

# android - 将字符串转换为 int 使应用程序意外停止

> ID：11179935
> 
> 赞同：-1
> 
> 时间：2012-06-24T18:06:43.520
> 
> 标签：android

我是 eclipse 的新手，我有一个项目可以使用 textview 添加和编辑姓名、年龄等，可能与联系人列表相同

`parseint`在这里我有 3 个类.. 1 个用于 arraylist 数据 1 个用于视图持有者，最后一个是我的活动问题是当我使用 parseint 作为年龄时.. 如果我使用字符串，当我使用 a和之后没有任何问题我填写姓名和年龄，然后按添加按钮，它显示应用程序已意外停止..

这是一些代码

```
public void Save(View view){
        @SuppressWarnings("unchecked")

        ArrayAdapter<Data> adapter = (ArrayAdapter<Data>)getListAdapter();

        EditText Name = (EditText)findViewById(R.id.Name);
        EditText Age = (EditText)findViewById(R.id.Age);

        String name = Name.getText().toString();
        int age = Integer.parseInt(Age.getText().toString());

        if (edit)
        {
            Data temp = adapter.getItem(position);
            temp.setData(name,age);
        }
        else
        {
            Data temp = new Data(name, age);
            friends.add(temp);
        }
        viewflipper.showNext();
    } 
```

如果我使用字符串它的工作，`int age = Integer.parseInt(Age.getText().toString());`我不知道该代码有什么问题并且我已经将我的文本视图的 xml 更改为这个 `android:inputType="number" >`，但它也是同样的错误

这是日志猫

```
06-15 08:25:56.419: W/KeyCharacterMap(6003): No keyboard for id 0
06-15 08:25:56.419: W/KeyCharacterMap(6003): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
06-15 08:25:58.619: W/ResourceType(6003): No package identifier when getting value for resource number 0x0000000c
06-15 08:25:58.619: D/AndroidRuntime(6003): Shutting down VM
06-15 08:25:58.629: W/dalvikvm(6003): threadid=1: thread exiting with uncaught exception (group=0x40015560)
06-15 08:25:58.650: E/AndroidRuntime(6003): FATAL EXCEPTION: main
06-15 08:25:58.650: E/AndroidRuntime(6003): android.content.res.Resources$NotFoundException: String resource ID #0xc
06-15 08:25:58.650: E/AndroidRuntime(6003):     at android.content.res.Resources.getText(Resources.java:201)
06-15 08:25:58.650: E/AndroidRuntime(6003):     at android.widget.TextView.setText(TextView.java:2857)
06-15 08:25:58.650: E/AndroidRuntime(6003):     at itnb.week.Exercise6Activity$DataAdapter.getView(Exercise6Activity.java:165)
06-15 08:25:58.650: E/AndroidRuntime(6003):     at android.widget.AbsListView.obtainView(AbsListView.java:1430)
06-15 08:25:58.650: E/AndroidRuntime(6003):     at android.widget.ListView.measureHeightOfChildren(ListView.java:1216)
06-15 08:25:58.650: E/AndroidRuntime(6003):     at android.widget.ListView.onMeasure(ListView.java:1127)
06-15 08:25:58.650: E/AndroidRuntime(6003):     at android.view.View.measure(View.java:8313)
06-15 08:25:58.650: E/AndroidRuntime(6003):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
06-15 08:25:58.650: E/AndroidRuntime(6003):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
06-15 08:25:58.650: E/AndroidRuntime(6003):     at android.view.View.measure(View.java:8313)
06-15 08:25:58.650: E/AndroidRuntime(6003):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
06-15 08:25:58.650: E/AndroidRuntime(6003):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
06-15 08:25:58.650: E/AndroidRuntime(6003):     at android.view.View.measure(View.java:8313)
06-15 08:25:58.650: E/AndroidRuntime(6003):     at android.widget.LinearLayout.measureVertical(LinearLayout.java:531)
06-15 08:25:58.650: E/AndroidRuntime(6003):     at android.widget.LinearLayout.onMeasure(LinearLayout.java:309)
06-15 08:25:58.650: E/AndroidRuntime(6003):     at android.view.View.measure(View.java:8313)
06-15 08:25:58.650: E/AndroidRuntime(6003):     at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
06-15 08:25:58.650: E/AndroidRuntime(6003):     at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
06-15 08:25:58.650: E/AndroidRuntime(6003):     at android.view.View.measure(View.java:8313)
06-15 08:25:58.650: E/AndroidRuntime(6003):     at android.view.ViewRoot.performTraversals(ViewRoot.java:839)
06-15 08:25:58.650: E/AndroidRuntime(6003):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1859)
06-15 08:25:58.650: E/AndroidRuntime(6003):     at android.os.Handler.dispatchMessage(Handler.java:99)
06-15 08:25:58.650: E/AndroidRuntime(6003):     at android.os.Looper.loop(Looper.java:123)
06-15 08:25:58.650: E/AndroidRuntime(6003):     at android.app.ActivityThread.main(ActivityThread.java:3683)
06-15 08:25:58.650: E/AndroidRuntime(6003):     at java.lang.reflect.Method.invokeNative(Native Method)
06-15 08:25:58.650: E/AndroidRuntime(6003):     at java.lang.reflect.Method.invoke(Method.java:507)
06-15 08:25:58.650: E/AndroidRuntime(6003):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
06-15 08:25:58.650: E/AndroidRuntime(6003):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
06-15 08:25:58.650: E/AndroidRuntime(6003):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T18:15:52.720

采用

```
 textview.setText(Integer.toString(age)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T18:12:09.473

我认为您试图将文本设置为 int。我的意思是你试过`textview.setText(age);`

所以你必须使用字符串，比如`textview.setText(" "+age);`

# android - Android 使用 bundle 将数据从一个活动发送到另一个活动

> ID：11179936
> 
> 赞同：2
> 
> 时间：2012-06-24T18:06:47.483
> 
> 标签：android, android-intent, android-event

我必须进行活动`AnswerQuestion.java`，`SendAnswerToServer.java`并且我想将数据从第一个活动发送到另一个活动

在 AnswerQuestion 活动中，我这样写：

```
Bundle basket = new Bundle();
basket.putString("time", timeToAnswer+"");
Intent goToSendServer = new Intent(AnswerQuestion.this, SendAnswerToServer.class);
goToSendServer.putExtras(basket);
startActivity(goToSendServer); 
```

我的问题是我要在 SendAnswerToServer 活动上写什么，谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-24T18:10:54.467

在 SendAnswerToServer 活动中：

```
 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
    Bundle bundle = this.getIntent().getExtras();  

    if(bundle !=null)
    {
            //ObtainBundleData in the object 
      String strdata = bundle.getString("time"); 
       //Do something here if data  received
     }
     else
     {
       //Do something here if data not received
     } 
```

# python - 在 Python 中将 .pages 转换为 .doc 或 .pdf

> ID：11179941
> 
> 赞同：2
> 
> 时间：2012-06-24T18:07:00.450
> 
> 标签：python, pdf, pdf-generation, docx, doc

如何使用 Python将`.pages`文件转换为`.doc`或文件？`.pdf`我的用例基本上是：

1.  用户将`.pages`文件上传到我的服务
2.  我的服务将其转换`.pages`为 .pdf`
3.  `.pdf`使用基于浏览器的查看器在浏览器中`.pdf`呈现

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-24T18:46:03.877

我从来没有这样做过，但如果你解压缩文件，.pages 文件似乎已经包含一个 pdf 版本：http: [//blog.cleverly.com/](http://blog.cleverly.com/printer-friendly/346.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T18:16:58.660

python 中的完整本机解决方案将很困难。

适当的解决方案是查看如何自动化页面以将文件导出为 pdf 或 ms word。

为此，似乎有一个可用的解决方案：

1.  [pyobjc](http://pyobjc.sourceforge.net/)

三是使用 pyobjc 自动化页面的示例：http: [//www.mugginsoft.com/kosmictask/help/automation-python](http://www.mugginsoft.com/kosmictask/help/automation-python)

# windows - WMI 编程以查找作业 ID

> ID：11179945
> 
> 赞同：0
> 
> 时间：2012-06-24T18:07:49.667
> 
> 标签：windows, installation, wmi, nsis

我试图通过使用 WMI 传递命令行参数来找出作业 ID。int main(int argc, char **argv) { HRESULT hres;

```
// Initialize COM.
hres =  CoInitializeEx(0, COINIT_MULTITHREADED); 
if (FAILED(hres))
{
    cout << "Failed to initialize COM library. " 
        << "Error code = 0x" 
        << hex << hres << endl;
    return 1;              // Program has failed.
}

// Initialize 
hres =  CoInitializeSecurity(
    NULL,     
    -1,      // COM negotiates service                  
    NULL,    // Authentication services
    NULL,    // Reserved
    RPC_C_AUTHN_LEVEL_DEFAULT,    // authentication
    RPC_C_IMP_LEVEL_IMPERSONATE,  // Impersonation
    NULL,             // Authentication info 
    EOAC_NONE,        // Additional capabilities
    NULL              // Reserved
    );

if (FAILED(hres))
{
    cout << "Failed to initialize security. " 
        << "Error code = 0x" 
        << hex << hres << endl;
    CoUninitialize();
    return 1;          // Program has failed.
}

// Obtain the initial locator to Windows Management
// on a particular host computer.
IWbemLocator *pLoc = 0;

hres = CoCreateInstance(
    CLSID_WbemLocator,             
    0, 
    CLSCTX_INPROC_SERVER, 
    IID_IWbemLocator, (LPVOID *) &pLoc);

if (FAILED(hres))
{
    cout << "Failed to create IWbemLocator object. "
        << "Error code = 0x"
        << hex << hres << endl;
    CoUninitialize();
    return 1;       // Program has failed.
}

IWbemServices *pSvc = 0;

// Connect to the root\cimv2 namespace with the
// current user and obtain pointer pSvc
// to make IWbemServices calls.

hres = pLoc->ConnectServer(

    _bstr_t(L"ROOT\\CIMV2"), // WMI namespace
    NULL,                    // User name
    NULL,                    // User password
    0,                       // Locale
    NULL,                    // Security flags                 
    0,                       // Authority       
    0,                       // Context object
    &pSvc                    // IWbemServices proxy
    );                              

if (FAILED(hres))
{
    cout << "Could not connect. Error code = 0x" 
        << hex << hres << endl;
    pLoc->Release();     
    CoUninitialize();
    return 1;                // Program has failed.
}

cout << "Connected to ROOT\\CIMV2 WMI namespace" << endl;

// Set the IWbemServices proxy so that impersonation
// of the user (client) occurs.
hres = CoSetProxyBlanket(

   pSvc,                         // the proxy to set
   RPC_C_AUTHN_WINNT,            // authentication service
   RPC_C_AUTHZ_NONE,             // authorization service
   NULL,                         // Server principal name
   RPC_C_AUTHN_LEVEL_CALL,       // authentication level
   RPC_C_IMP_LEVEL_IMPERSONATE,  // impersonation level
   NULL,                         // client identity 
   EOAC_NONE                     // proxy capabilities     
);

if (FAILED(hres))
{
    cout << "Could not set proxy blanket. Error code = 0x" 
         << hex << hres << endl;
    pSvc->Release();
    pLoc->Release();     
    CoUninitialize();
    return 1;               // Program has failed.
}

// Use the IWbemServices pointer to make requests of WMI. 
// Make requests here:

// For example, query for all the running processes
IEnumWbemClassObject* pEnumerator = NULL;
hres = pSvc->ExecQuery(
    bstr_t("WQL"), 
    bstr_t("SELECT * FROM Win32_Process where CommandLine like 'commandLineString'"),
    WBEM_FLAG_FORWARD_ONLY | WBEM_FLAG_RETURN_IMMEDIATELY, 
    NULL,
    &pEnumerator);
cout << " After execquery"<< endl ;
if (FAILED(hres))
{
    cout << "Query for processes failed. "
         << "Error code = 0x" 
         << hex << hres << endl;
    pSvc->Release();
    pLoc->Release();     
    CoUninitialize();
    return 1;               // Program has failed.
}
else
{ 
    IWbemClassObject *pclsObj;
    ULONG uReturn = 0;

    while (pEnumerator)
    {
        hres = pEnumerator->Next(WBEM_INFINITE, 1, 
            &pclsObj, &uReturn);

        if(0 == uReturn)
        {
            break;
        }

       VARIANT vtProp;

        // Get the value of the Name property
        hres = pclsObj->Get(L"ProcessId", 0, &vtProp, 0, 0);
        int processId = (int)vtProp.intVal;
        cout << "Process ID : " << processId << endl;           

        DWORD dwProcessId = (DWORD) processId;
        DWORD dwDesiredAccess = PROCESS_TERMINATE;
        BOOL  bInheritHandle  = FALSE;
        HANDLE hProcess = OpenProcess(dwDesiredAccess, bInheritHandle, dwProcessId);
        if (hProcess == NULL)
        {
            cout << "hProcess is null " << endl;
        }else {
        BOOL result = TerminateProcess(hProcess, 1);
        CloseHandle(hProcess);
        cout << "Process is terminated " << result <<endl;
        }
    }  // while          
 } // else  

// Cleanup
// ========

pLoc->Release();
pSvc->Release();
CoUninitialize();
getchar();
return 0; // Program successfully completed. 
```

}

以上是 C++ 代码，我的问题是如何访问 nsis 中的结构。就像上面代码中的以下几行

```
1\. hres = pLoc->ConnectServer(
2\. hres = pEnumerator->Next(WBEM_INFINITE, 1, &pclsObj, &uReturn);
3\. hres = pclsObj->Get 
```

请帮我解决这个...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T01:25:53.147

你看过[WmiInspector](http://nsis.sourceforge.net/WmiInspector_plug-in)插件吗？或者，使用您现有的 C++ 代码创建[自定义插件](http://nsis.svn.sourceforge.net/viewvc/nsis/NSIS/trunk/Contrib/ExDLL/exdll.c?view=markup)。

要在 NSIS 中调用 Windows API 或 COM 接口，您必须使用系统插件：

```
!include LogicLib.nsh
!define CLSCTX_INPROC_SERVER 0x1
!define CLSID_ApplicationAssociationRegistrationUI {1968106d-f3b5-44cf-890e-116fcb9ecef1}
!define IID_IApplicationAssociationRegistrationUI {1f76a169-f994-40ac-8fc8-0959e8874710} ;[Vista+]

section
;NSIS has called CoInitialize
System::Call 'OLE32::CoCreateInstance(g "${CLSID_ApplicationAssociationRegistrationUI}",i 0,i ${CLSCTX_INPROC_SERVER},g "${IID_IApplicationAssociationRegistrationUI}",*i.r1)i.r0' ;ptr is now in $1 and hr in $0
${If} $1 <> 0
    System::Call '$1->3(w "Internet Explorer")i.r0' ;IApplicationAssociationRegistrationUI::LaunchAdvancedAssociationUI
    System::Call '$1->2()' ;IUnknown::Release
${EndIf}
sectionend 
```

您必须手动查找 IID 和方法的 vtable 偏移量，因此使用大量 COM 不会很有趣......

# java - 如何使用 TextField 相应地调整 Rectangle 的大小？

> ID：11179956
> 
> 赞同：2
> 
> 时间：2012-06-24T18:09:09.453
> 
> 标签：java, resize, javafx, shape, fxml

我想使用 TextField 相应地从 JavaFX 调整 Rectangle 形状的大小，该 TextField 使用 Anchors 在窗口调整大小时自动调整大小。

我也尝试向矩形添加锚点，但它不会根据我从 SceneBuilder 设置的宽度调整大小。

这么短的故事：当我的 TextField 因为我的 Window 调整大小而调整大小时，Rectangle 应该调整为与 TextField 相同的宽度。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-25T09:51:18.913

您可以将矩形的宽度绑定到文本字段的：

```
myRectangle.widthProperty().bind(myTextField.widthProperty()); 
```

例子：

```
public class Demo extends Application {

    @Override
    public void start(Stage stage) {
        Group root = new Group();
        Scene scene = new Scene(root);
        stage.setScene(scene);

        TextField myTextField = new TextField("default");
        Rectangle myRectangle = new Rectangle();
        myRectangle.setHeight(30);
        myRectangle.setFill(Color.AQUA);
        myRectangle.widthProperty().bind(myTextField.widthProperty());

        final VBox hb = new VBox(10);
        hb.setPadding(new Insets(5));
        hb.getChildren().addAll(myTextField, myRectangle);
        scene.setRoot(hb);
        stage.show();
    }

    public static void main(String[] args) {
        launch(args);
    }
} 
```

# opencv - 合并多个 cv::Mat?

> ID：11179957
> 
> 赞同：8
> 
> 时间：2012-06-24T18:09:13.647
> 
> 标签：opencv, sift, surf

基本上我有3个这样的垫子：

```
Mat descriptors1
Mat descriptors2
Mat descriptors3 
```

每个描述符的加载位置如下：

```
extractor->compute( object, kp, descriptors ); 
```

我怎样才能将所有描述符加入一个 Mat 中（将一个垫子附加到另一个垫子上）？

例子：

```
Mat fullDesc = descriptors1 + descriptors2 + descriptors3; 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-24T18:55:20.923

不是很有效，但很简短：

```
descriptors1.push_back(descriptors2);
descriptors1.push_back(descriptors3); 
```

之后`descriptors1`将是一个串联。

* * *

还有一个未记录的功能`vconcat`：

```
void vconcat(const Mat* src, size_t nsrc, OutputArray dst);
void vconcat(InputArray src1, InputArray src2, OutputArray dst);
void vconcat(InputArrayOfArrays src, OutputArray dst); 
```

# php - php。如何自动包含所有存在的文件并获取可变数据？

> ID：11179978
> 
> 赞同：1
> 
> 时间：2012-06-24T18:11:24.273
> 
> 标签：php, include, echo, file-exists

我需要 PHP 中包含的帮助。

我有一组文件，每个文件都包含一个变量 $tariff_about。

```
<?php               
    include("tariffs/tariff-a1.php"); echo $tariff_about;
    include("tariffs/tariff-a2.php"); echo $tariff_about;
    include("tariffs/tariff-a3.php"); echo $tariff_about;
    include("tariffs/tariff-a4.php"); echo $tariff_about;
    include("tariffs/tariff-a5.php"); echo $tariff_about;
;?> 
```

自动包含所有带有'tariff-a'前缀的现有文件会很好。

我知道有 PHP file_exists 函数；但是，我不知道如何使用 echo 使其在此示例中工作。

请帮帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-24T18:14:57.060

使用 glob 获取所有匹配特定模式的文件，然后循环并包含。

```
$files = glob( 'tariffs/tariff-a*.php' );

foreach( $files as $file ) {
    include( $file );
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-07T14:40:07.310

盖伦答案可以更紧凑：

```
foreach(glob( 'tariffs/tariff-a*.php') as $file) {
    include $file;
} 
```

include 是特殊语句，不需要圆括号。

# c# - WinRT 手势支持

> ID：11179979
> 
> 赞同：4
> 
> 时间：2012-06-24T18:11:35.017
> 
> 标签：c#, windows-runtime, gesture

是否有内置的 API 用于处理 WinRT 中的手势（特别是捏缩放）。我已经使用鼠标进行缩放，使用：

```
 public event PointerEventHandler PointerWheelChanged; // UIElement class 
```

我需要与触摸等效的东西。关于实现这一目标的最佳方法的任何指示？我应该使用这些“操纵”事件之一吗？

```
 public event ManipulationDeltaEventHandler ManipulationDelta; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-25T00:39:48.053

[Reed Townsend 的这次](http://channel9.msdn.com/events/BUILD/BUILD2011/APP-186T)演讲讨论了如何使用手势识别 API。您还可以查看[GestureRecognizer](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.input.gesturerecognizer.aspx)类，了解有关如何在 Windows 运行时应用程序中进行手势识别的更多详细信息。

# video - 需要帮助了解 HTML 5 音频/视频元数据的使用和放置

> ID：11179987
> 
> 赞同：7
> 
> 时间：2012-06-24T18:12:47.100
> 
> 标签：video, ffmpeg, html5-video, video-encoding, html5-audio

我花费了大量时间研究 HTML 5 音频和视频，但是我对元数据的编码一直没有理解。似乎在我的研究中，使用像 Handbrake (ffmpeg) 这样的程序，建议检查“网络优化”（从其他类型的软件导出时，也有类似类型的设置，如 imovie）。我已经得出结论（如果我错了，请纠正我）这与将文件的元数据移动到文件的开头有关。然后，这为播放器/浏览器提供了立即播放所需的信息，而无需等待加载整个文件。

所以这是我感到困惑的地方，我需要帮助的问题

这是否仅适用于 mp4 MOOV atom？或者 .ogv 和 .webm 文件中有类似的东西吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T19:00:31.063

使用高度科学的方法查看何时启用了哪些手刹选项，我确定 MOOV 原子定位仅与 MP4 容器文件相关。

更严重的是，MOOV atom 是容器文件的一部分，没有证据表明 Ogg 或 WebM 复制了 MP4 的这个有问题的特性。

从[Ogg 规范](http://xiph.org/ogg/doc/oggstream.html)：

> Ogg 容器主要是一种流格式...

[WebM“通过 HTTP 连接流式传输文件的指南”](http://www.webmproject.org/code/specs/container/#webm-guidelines)没有提及 MOOV 原子位置或类似内容，强烈暗示这不是问题。

# javascript - javascript使用计时器和不透明度慢慢改变图像

> ID：11179988
> 
> 赞同：2
> 
> 时间：2012-06-24T18:12:48.470
> 
> 标签：javascript, html, image

我正在为我一直在研究的这个脚本寻求一些帮助。这是我的文件fade.js 问题在于变化，它搞砸了。请帮助我找到问题和解决方案，谢谢。

**JS文件**

```
//image fade script
var opacity = 0;
function changeimg(currentimage){

rnumb = Math.floor(Math.random()*2);
var newimage = "./images/" + rnumb + ".jpg";
if (newimage !== currentimage)
{
document.getElementById("fadeImg").src= newimage;
}

}
function fadein()
{
       var fadeImg = document.getElementById('fadeImg');

       var browserName=navigator.appName;

       if(browserName=="Microsoft Internet Explorer")
       {

              browserOpacity = opacity / 10;

              fadeImg.filters.alpha.opacity = browserOpacity;

       }
       else
       {

              browserOpacity = opacity / 1000;

              fadeImg.style.opacity = browserOpacity;

       }

       if(opacity < 1000)
       {

              initiate();

       }
else if(opacity == 1000)
{
changeimg(document.getElementById("fadeImg").src);
opacity = 0;
}

}

function initiate()
{

       opacity++;
       setInterval("fadein()", 500);

} 
```

**索引.html**

```
<script type="text/javascript" src="fade.js"></script>
<body onload="initiate()">
<img id="fadeImg" src="images/1.jpg" style="opacity:0.0; filter:alpha(opacity=0)"/>
</body> 
```

**JS小提琴**

这里也是一个 Fiddle 代码：http: [//jsfiddle.net/epqKr/2/](http://jsfiddle.net/epqKr/2/)（请注意，代码，因为它在 fiddle 中，可能会使您的浏览器在一段时间后冻结。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T13:21:31.763

我仍在努力，这就是我现在所拥有的：它不起作用，但看起来更好。html

```
<html>
<head>

<script type="text/javascript" src="fade1.js"></script>

</head>

<body onload="fadetimer()">
<img id="fadeImg" src="1.jpg" style="opacity:0.0; filter:alpha(opacity=0)"/>
</body>

</body>
</html> 
```

脚本

```
 //image fade script
var opacity = 0;

function changeimg(currentimage){

rnumb = Math.floor(Math.random()*2);
var newimage = rnumb + ".jpg";
if (newimage !== currentimage)
{
document.getElementById("fade").src= newimage;
}

}
function fadein()
{
       var fade = document.getElementById('fade');

if(fade.filters.alpha.opacity >= 100 || fade.style.opacity >= 1.0)
{

changeimg(fade.src);
fade.filters.alpha.opacity = 0;
fade.style.opacity = 0;

} 
else 
{
              fade.filters.alpha.opacity += 10;
              fade.style.opacity += 0.1;

       }

}

function fadetimer()
{
setInterval("fadein()", 500);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T19:28:44.287

我认为你应该使用 a`cross-browser library`来完成这样的事情。 `Microsoft Internet Explorer`，尤其是在版本 < 9 中，很可能不会像您预期的那样运行，特别是当您尝试使用利用不透明度、alpha 过滤器和计时的函数时。你可以尝试使用`jQuery, or Prototype, or MooTools`和这样的框架。它们都以简单、安全、更好的方式制造您正在寻找的东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-24T19:32:03.117

*   不要`initiate()`从`fadeIn()`函数内部调用，而只是增加您的不透明度控制变量（即`opacity += 1;`）。

*   当您完成动画时，您可能希望保存 setInterval 返回值以终止回调。

*   您可能还希望通过降低间隔来提高动画速度。

    `animId = setInterval("fadeIn()", 5)`;

# elf - 了解精灵的十六进制编辑

> ID：11179989
> 
> 赞同：2
> 
> 时间：2012-06-24T18:12:56.453
> 
> 标签：elf, hex-editors

考虑以下 ELF 文件的十六进制编辑显示。

```
00000000   7F 45 4C 46  01 01 01 00  00 00 00 00  .ELF........
0000000C   00 00 00 00  02 00 03 00  01 00 00 00  ............
00000018   30 83 04 08  34 00 00 00  50 14 00 00  0...4...P...
00000024   00 00 00 00  34 00 20 00  08 00 28 00  ....4\. ...(.
00000030   24 00 21 00  06 00 00 00  34 00 00 00  $.!.....4...
0000003C   34 80 04 08  34 80 04 08  00 01 00 00  4...4.......
00000048   00 01 00 00  05 00 00 00  04 00 00 00  ............ 
```

1.  它有多少个节标题？
2.  它是目标文件还是可执行文件？
3.  它有多少个程序头？
4.  如果有任何程序头，第一个程序头做什么？
5.  如果有任何节头，节头表的偏移量是多少？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-24T21:42:47.527

> 奇怪，这个 hexdump 在我看来就像**[你的作业](http://www.cs.bgu.ac.il/~shimony/arch2011/ex4_2011.html)**......

1.  有 36 个节标题。
2.  它是一个可执行文件。
3.  它有 8 个程序头。
4.  从第一个程序头中的第一个字（偏移量 0x34: 0x0006）可以看出，它的类型是`PT_PHDR`，它只是告知程序头表本身的特征。
5.  节头表从字节 5200（十六进制为 0x1450）开始。

我怎么知道这些东西？通过将十六进制转储到二进制文件中并使用`readelf -a`（因为我很懒）读取它。除了第一个问题。4，我必须通过阅读手动弄清楚[`man 5 elf`](http://www.daemon-systems.org/man/elf.5.html)。

# mysql - 在查询中混合使用 ANSI 1992 JOIN 和 COMMA

> ID：11179991
> 
> 赞同：3
> 
> 时间：2012-06-24T18:13:17.773
> 
> 标签：mysql, sql, join, inner-join

我正在尝试以下 MySQL 查询来获取一些数据：

```
SELECT m.*, t.*
FROM memebers as m, telephone as t
INNER JOIN memeberFunctions as mf ON m.id = mf.memeber
INNER JOIN mitgliedTelephone as mt ON m.id = mt.memeber
WHERE mf.function = 32 
```

但我总是收到以下错误：

```
#1054 - Unknown column 'm.id' in 'on clause' 
```

该列确实存在，并且查询仅适用于一个表（例如，当我删除电话时）

有人知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-24T18:22:04.100

根据[此链接](http://dev.mysql.com/doc/refman/5.0/en/join.html)，在建立联接时不应混淆这两种表示法。您用于加入的逗号 `memebers as m, telephone as t`以及对 的后续调用`inner join`正在触发未知列错误。

要处理它，请使用`CROSS/INNER/LEFT JOIN`而不是逗号。

> 以前，逗号运算符 (,) 和 JOIN 的优先级相同，因此连接表达式 t1, t2 JOIN t3 被解释为 ((t1, t2) JOIN t3)。现在 JOIN 具有更高的优先级，因此表达式被解释为 (t1, (t2 JOIN t3))。此更改会影响使用 ON 子句的语句，因为该子句只能引用连接操作数中的列，并且优先级的更改会更改对这些操作数的解释。

出于教学目的，我添加了查询，我认为应该是：

```
SELECT m.*, t.*
FROM memebers as m 
    JOIN telephone as t
    JOIN memeberFunctions as mf ON m.id = mf.memeber AND mf.function = 32
    JOIN mitgliedTelephone as mt ON m.id = mt.memeber 
```

由于您没有加入`t`and `m`，因此最终结果将是笛卡尔积；您可能希望对其进行修改。

我希望它有所帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-24T18:22:25.760

看来您的要求是加入`members`表格，但您正在加入`telephone`表格。只是改变他们的顺序。

```
SELECT 
    `m`.*,
    `t`.* 
FROM
    `memebers` AS `m` 
    JOIN `telephone` AS `t` 
    JOIN `memeberFunctions` AS `mf` 
        ON `m`.`id` = `mf`.`memeber` 
        AND `mf`.`function` = 32 
    JOIN `mitgliedTelephone` AS `mt` 
        ON `m`.`id` = `mt`.`memeber`; 
```

希望这对您有所帮助。谢谢！！

# javascript - 单击视图时从视图的模型中获取属性（backbone.js）

> ID：11179995
> 
> 赞同：0
> 
> 时间：2012-06-24T18:13:41.440
> 
> 标签：javascript, jquery, ajax, backbone.js, underscore.js

当用户单击作为视图一部分的`div`with 类时，将触发一个函数。该函数必须从属于该视图的模型中获取属性，该模型的元素已被单击，并将其通过 发送到服务器端。`.photo_container``PhotoListView``sendSelectedPhotoId``photo_id``Photo``div .photo_container``fetch()`

**问题：**到目前为止，我设法在单击`sendSelectedPhotoId`时触发了该功能`div`，但我不知道如何获取视图模型的`photo_id`属性。`Photo`我应该如何实现这一目标？

在旁注中，我不确定是否`photo_id`会发送正确的。

**代码**

```
$('#button').click( function() {

    // Retrieve photos
    this.photoList = new PhotoCollection();
    var self = this;
    this.photoList.fetch({
        success: function() {
            self.photoListView = new PhotoListView({ model: self.photoList });
            $('#photo_list').html(self.photoListView.render().el);
        }
    });
}); 
```

**模型与收藏**

```
// Models
Photo = Backbone.Model.extend({
    defaults: {
        photo_id: ''
    }
});

// Collections
PhotoCollection = Backbone.Collection.extend({
    model: Photo,
    url: 'splash/process_profiling_img'
}); 
```

**意见**

```
// Views
PhotoListView = Backbone.View.extend({
    tagName: 'div',

    events: {
        'click .photo_container':  'sendSelectedPhotoId'
    },

    initialize: function() {
        this.model.bind('reset', this.render, this);
        this.model.bind('add', function(photo) {
            $(this.el).append(new PhotoListItemView({ model: photo }).render().el);
        }, this);
    },

    render: function() {
        _.each(this.model.models, function(photo) {
            $(this.el).append(new PhotoListItemView({ model: photo }).render().el);
        }, this);
        return this;
    },

    sendSelectedPhotoId: function() {
        var self = this;
        console.log(self.model.get('photo_id'));
        self.model.fetch({
            data: { chosen_photo: self.model.get('photo_id')},
            processData: true,
            success: function() {
        }});
    }

});

PhotoListItemView = Backbone.View.extend({
    tagName: 'div',
    className: 'photo_box',

    template: _.template($('#tpl-PhotoListItemView').html()),

    initialize: function() {
        this.model.bind('change', this.render, this);
        this.model.bind('destroy', this.close, this);
    },

    render: function() {
        $(this.el).html(this.template( this.model.toJSON() ));
        return this;
    },

    close: function() {
        $(this.el).unbind();
        $(this.el).remove();
    }

}); 
```

## 第二次尝试

我还尝试将事件处理程序放置`sendSelectedPhotoId`在`PhotoListItemView`我设法正确获取模型属性的位置，但我无法弄清楚当集合执行 fetch()时如何触发`reset`事件。`PhotoList`

**看法**

```
PhotoListItemView = Backbone.View.extend({
    tagName: 'div',
    className: 'photo_box',

    events: {
        'click .photo_container':  'sendSelectedPhotoId'
    },

    template: _.template($('#tpl-PhotoListItemView').html()),

    initialize: function() {
        this.model.bind('change', this.render, this);
        this.model.bind('destroy', this.close, this);
    },

    render: function() {
        $(this.el).html(this.template( this.model.toJSON() ));
        return this;
    },

    close: function() {
        $(this.el).unbind();
        $(this.el).remove();
    },

    sendSelectedPhotoId: function() {
        console.log('clicked!');
        var self = this;
        console.log(self.model.get('photo_id'));
        self.model.fetch({
            data: { chosen_photo: self.model.get('photo_id')},
            processData: true,
            success: function() {
                $(this.el).html('');
        }});
    }

}); 
```

**问题：**有了这个，我似乎无法在执行in 函数`reset`后触发模型的事件，这意味着我无法使用's重新渲染它。`fetch()``sendSelectedPhotoId``PhotoListView``render()`

`sendSelectedPhotoId`在下面来自 Chrome 的 javascript 控制台的屏幕截图中，我在完成它之后打印了集合`fetch()`，似乎 fetched*将*新数据添加到现有模型中，而不是创建 2 个新模型并删除所有现有模型！

![在此处输入图像描述](../Images/e5b2af8aa36a461246de0dd99933a9be.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T18:24:23.933

您已经为每个模型提供了子视图，因此我会将 click 事件处理程序放在子视图中。在子进程的处理程序中，触发一个传递 this.model 的事件，并在父进程中监听该事件。

**基于更新的更新：**

尝试改变

```
this.model.bind('reset', this.render, this); to 
this.model.bind('remove', this.render, this);  // model is a collection right? 
```

然后在单击视图后从集合中删除模型。另外，我不认为使用 Model.fetch 是您真正想要做的。也许是模型上的 .save 或自定义方法？

**根据作者的评论进行更新，显示博客中的示例库**

我不会听从那个博客的建议。如果您专业地使用骨干网，我不能推荐足够多的[Thoughtbot 电子书](https://workshops.thoughtbot.com/products/1-backbone-js-on-rails)。

*   正在进行中的工作需要 50 美元，而且每一分钱都值得
*   它有一个*简单*的示例应用程序，展示了如何组织主干应用程序。这就是我买这本书的原因。
*   它在后端的示例中使用 Rails，但我使用了 Rails、Node 和 C# MVC，并且所有工作都没有问题。

# actionscript-3 - 在 FlashDevelop 中调试，应用程序工作；执行.exe，应用程序失败

> ID：11179998
> 
> 赞同：1
> 
> 时间：2012-06-24T18:14:28.493
> 
> 标签：actionscript-3, air, flashdevelop

在 FlashDevelop 中调试时，一切都在我的应用程序中运行。但是当我用 Air 打包它时，安装它并运行它。它错过了与空气的连接。我应该怎么办？

PS 我正在使用 FlashDevelop 和 FlexSDK 4.5.1 en AIR SDK 3.0。