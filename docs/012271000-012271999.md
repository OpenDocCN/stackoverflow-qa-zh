# StackOverflow 问答 12271000-12271999

# security - 可以在 iframe 中呈现 permissions.request 对话框吗？

> ID：12271012
> 
> 赞同：1
> 
> 时间：2012-09-04T20:37:41.947
> 
> 标签：security, facebook-iframe, facebook-authentication, facebook-oauth, facebook-authorization

[https://developers.facebook.com/docs/reference/dialogs/](https://developers.facebook.com/docs/reference/dialogs/)列出各种不同的 Facebook 对话框，但“permissions.request”不在列表中。权限请求对话框的 URL 为[https://www.facebook.com/dialog/permissions.request](https://www.facebook.com/dialog/permissions.request) ?... 此 URL 使用的参数遵循与上述参考文档中描述的其他对话框相同的约定。

权限请求对话框当前在 iframe 中呈现时可以正常工作（将“display”参数设置为“iframe”并传递有效的“access_token”参数）。这是官方支持的，还是疏忽/错误？

故意不允许在 iframe 中呈现 oauth 对话框，以防止点击劫持。不阻止对“权限请求”对话框的点击劫持攻击的决定是故意的吗？

# security - Silverlight 访问其他网站安全错误

> ID：12271013
> 
> 赞同：0
> 
> 时间：2012-09-04T20:37:52.720
> 
> 标签：security, silverlight-5.0

我有一个 Silverlight 5 项目，需要从另一个网站加载文本文件。在“其他”网站上，我安装了一个 clientaccesspolicy.xml 文件，该文件具有

```
<access-policy>
    <cross-domain-access>
        <policy>
            <allow-from>
                <domain uri="*" />
            </allow-from>
            <grant_to>
                <resource path=/public_html/services/" include-subpaths="true"
            </grant-to>
        </policy>
    </cross-domain-access>
</access-policy> 
```

该文件位于“其他”网站的根目录下，该网站是一个基于 Linux 的网站。（我也尝试将它放在 public_html 目录中。）

我的代码有这个：

```
 var uri = "http://www.otherwebsite.com/services/TextFile.txt";
    var webClient = new WebClient( );
    webClient.OpenReadCompleted += ( s, e ) =>
        {
            using ( var stream = new StreamReader( e.Result ) )
            {
               // stream processing logic 
            }

        };
    webClient.OpenReadAsync( new Uri( uri, UriKind.Absolute ) ); 
```

我在“new StreamReader”语句的 OpenReadCompleted 委托中得到了 System.Security.SecurityException。

我可以确认，如果我在浏览器中明确导航到该文件，我可以访问它。我是 Silverlight 的新手，而不是网络专家，所以我可能做错了很多事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T16:14:49.050

答案在上面 jv42 的评论中：C# 代码没有任何问题，但是 grant-to 的资源路径值具有非常具体的路径 /public_html/services/，但它只需要 /services/ 和 xml文件本身必须在 /public_html 目录中。

# objective-c - iOS 上的快速模糊

> ID：12271016
> 
> 赞同：21
> 
> 时间：2012-09-04T20:37:54.810
> 
> 标签：objective-c, image, image-processing, uiimageview, core-graphics

我在尝试模糊我的 iOS 应用程序中的部分屏幕时遇到了麻烦。请参阅图片以更好地了解我正在尝试做的事情。

![模糊盒](../Images/938d51edbaf6f6836427218abb9238c4.png)

只有“BlurBox”的内容需要模糊，其余的都可以清晰。因此，如果您正在查看表格视图，则只有 BlurBox 下方的内容会变得模糊（即使在您滚动时）。其余的看起来很清楚。

我的第一种方法是`UIGraphicsGetImageFromCurrentImageContext()`每隔 .01 秒调用一次，以将 BlurBox 下的所有图层混合到一个图像中。然后模糊该图像并将其显示到所有内容上。

我尝试过的模糊方法是：

[https://github.com/tomsoft1/StackBluriOS](https://github.com/tomsoft1/StackBluriOS)

[https://github.com/coryleach/UIImageAdjust](https://github.com/coryleach/UIImageAdjust)

[https://github.com/esilverberg/ios-image-filters](https://github.com/esilverberg/ios-image-filters)

[https://github.com/cmkilger/CKImageAdditions](https://github.com/cmkilger/CKImageAdditions)

```
[layer setRasterizationScale:0.25];
[layer setShouldRasterize:YES]; 
```

以及一些自定义尝试。我还查看了 Apple 的[GLImageProcessing](https://developer.apple.com/library/ios/#samplecode/GLImageProcessing/Introduction/Intro.html)，但我认为这对于我在这里尝试做的事情来说有点矫枉过正。

问题是它们都**变慢****了** 。该应用程序不在应用程序商店中，因此我愿意使用任何私有/未记录的框架。

 **我的一个想法是重写`drawRect`我使用的所有组件（UITableViewCells、UITableView 等）的方法，并在运行中独立地模糊每个组件。然而这需要一些时间，这听起来像是一个可行的选择吗？

* * *

**更新**：

我尝试使用`CIFilters`如下：

```
CIImage *inputImage = [[CIImage alloc] initWithImage:[self screenshot]];

CIFilter *blurFilter = [CIFilter filterWithName:@"CIGaussianBlur"];
[blurFilter setDefaults];
[blurFilter setValue: inputImage forKey: @"inputImage"];
[blurFilter setValue: [NSNumber numberWithFloat:10.0f]
                           forKey:@"inputRadius"];

CIImage *outputImage = [blurFilter valueForKey: @"outputImage"];

CIContext *context = [CIContext contextWithOptions:nil];

self.bluredImageView.image = [UIImage imageWithCGImage:[context createCGImage:outputImage fromRect:outputImage.extent]]; 
```

这确实有效，但是速度非常慢。:(

我看到只有当我传入从磁盘加载的图像时，某些实现才会模糊。如果我传入使用`UIGraphicsGetImageFromCurrentImageContext()`它创建的 UIImage 将不起作用。关于为什么会这样的任何想法？

* * *

**更新**：

我尝试了帕特尔的建议如下：

```
CALayer *backgroundLayer = [CALayer layer];

CIFilter *blurFilter = [CIFilter filterWithName:@"CIGaussianBlur"];
[blurFilter setDefaults];
backgroundLayer.backgroundFilters = [NSArray arrayWithObject:blurFilter];

[[self.view layer] addSublayer:backgroundLayer]; 
```

但是，它不起作用:(

* * *

**添加赏金后的更新：**

我已经设法使用[TomSoft1 的 stackblur](https://github.com/tomsoft1/StackBluriOS)使 BlurBox 正常工作，因为他添加了动态将图像标准化为 RGBA 格式（32 位/像素）的能力。但是，它仍然很慢。

我有一个计时器，每 0.03 秒调用一次更新，以获取 BlurBox 下方的图像，模糊该图像，并将其显示在屏幕上。我需要帮助来提高 BlurBox 上的“fps”。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-09-09T02:42:57.873

我会推荐[Brad Larson](https://stackoverflow.com/users/19679/brad-larson)的 GPUImage，它完全由 GPU 支持，可用于各种图像处理效果。它非常快，甚至足够快，以至于在他的演示应用程序中，他从相机进行实时视频处理，并且帧速率非常好。

[https://github.com/BradLarson/GPUImage](https://github.com/BradLarson/GPUImage)

这是我编写的一个代码片段，用于应用基本的框模糊，它模糊了图像的底部和顶部三分之一，但不模糊图像的中间。他的库非常广泛，包含几乎所有可以想象到的图像滤镜效果。

```
GPUImagePicture *stillImageSource = [[GPUImagePicture alloc] initWithImage:[self screenshot]];

GPUImageTiltShiftFilter *boxBlur = [[GPUImageTiltShiftFilter alloc] init];
        boxBlur.blurSize = 0.5;

[stillImageSource addTarget:boxBlur];

[stillImageSource processImage];

UIImage *processedImage = [stillImageSource imageFromCurrentlyProcessedOutput]; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-08-25T22:57:54.177

虽然回复可能有点晚，但您可以使用 Core Image 过滤器。它如此缓慢的原因是这条线。

```
CIContext *context = [CIContext contextWithOptions:nil]; 
```

在 Apple 文档中，为了在 Core Image 中获得最佳性能，他们首先声明

“不要在`CIContext`每次渲染时都创建对象。上下文存储了大量的状态信息；重用它们更有效。”

我个人对此的解决方案是为核心图像上下文制作一个单例。所以我只创造一个。

我的代码在 GitHub 上的这个演示项目中。

[https://github.com/KyleLopez/DemoCoreImage](https://github.com/KyleLopez/DemoCoreImage)

随意使用它，或找到您喜欢的其他解决方案。我在 CoreImage 中发现的最慢的部分是上下文，之后的图像处理非常快。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T21:26:37.087

我还没有对此进行测试，但我想知道您是否可以将 a 放置`CALayer`在您希望框模糊的位置，然后找到`CIFilter`可以在`CALayer's` `backgroundFilters`. 只是一个想法。

请参阅[CALayer.backgroundFilters](https://developer.apple.com/library/ios/documentation/GraphicsImaging/Reference/CALayer_class/Introduction/Introduction.html#//apple_ref/occ/instp/CALayer/backgroundFilters)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T20:54:12.230

你可以试试 Apple Core Image Filter (CIFilter) 套路。它们需要 iOS 5，因此您可能无法使用它们。

我不确定它是否比您尝试的方法更快，但我过去曾在项目中使用过它，并且效果非常好。如果您可以抓住要模糊的屏幕部分，将其放入图像中，通过过滤器，然后将其重新显示在屏幕上的适当位置，那应该可以。

我使用滤镜实时更改图像的颜色，效果很好。

[http://developer.apple.com/library/ios/#DOCUMENTATION/GraphicsImaging/Reference/QuartzCoreFramework/Classes/CIFilter_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#DOCUMENTATION/GraphicsImaging/Reference/QuartzCoreFramework/Classes/CIFilter_Class/Reference/Reference.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-04T20:54:40.333

您是否尝试过这个库：

[https://github.com/gdawg/uiimage-dsp](https://github.com/gdawg/uiimage-dsp)

它使用 vDSP/Accelerate 框架，看起来很容易使用。

顺便说一句：0.01s 似乎太快了。0.03 也应该这样做。**

# c++ - C++中向量的初始容量

> ID：12271017
> 
> 赞同：106
> 
> 时间：2012-09-04T20:37:55.823
> 
> 标签：c++, memory-management, stl, vector

使用默认构造函数创建`capacity()`的which 是什么？`std::vector`我知道`size()`是零。我们可以声明默认构造的向量不调用堆内存分配吗？

这样就可以使用单个分配创建具有任意保留的数组，例如`std::vector<int> iv; iv.reserve(2345);`. 假设由于某种原因，我不想`size()`在 2345 上启动。

例如，在 Linux 上（g++ 4.4.5，内核 2.6.32 amd64）

```
#include <iostream>
#include <vector>

int main()
{
  using namespace std;
  cout << vector<int>().capacity() << "," << vector<int>(10).capacity() << endl;
  return 0;
} 
```

印刷`0,10`。这是一个规则，还是依赖于 STL 供应商？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-09-04T20:44:55.990

该标准没有指定`capacity`容器的初始值应该是什么，因此您依赖于实现。一个常见的实现将从零开始容量，但不能保证。另一方面，没有办法更好地`std::vector<int> iv; iv.reserve(2345);`坚持你的策略。

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2016-04-02T08:34:46.657

std::vector 的存储实现差异很大，但我遇到的所有实现都是从 0 开始的。

以下代码：

```
#include <iostream>
#include <vector>

int main()
{
  using namespace std;

  vector<int> normal;
  cout << normal.capacity() << endl;

  for (unsigned int loop = 0; loop != 10; ++loop)
  {
      normal.push_back(1);
      cout << normal.capacity() << endl;
  }

  cin.get();
  return 0;
} 
```

给出以下输出：

```
0
1
2
4
4
8
8
8
8
16
16 
```

在 GCC 5.1、11.2 - Clang 12.0.1 和：

```
0
1
2
3
4
6
6
9
9
9
13 
```

根据 MSVC 2013。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2018-04-19T08:34:59.053

据我了解的标准（尽管我实际上无法命名参考），容器实例化和内存分配已被有意解耦，这是有充分理由的。因此，您有不同的、单独的要求

*   `constructor`创建容器本身
*   `reserve()`预先分配一个适当大的内存块以容纳至少（！）给定数量的对象

这很有意义。存在的唯一权利`reserve()`是让您有机会在增长向量时围绕可能昂贵的重新分配进行编码。为了有用，您必须知道要存储的对象数量，或者至少需要能够做出有根据的猜测。如果不这样做，您最好远离，`reserve()`因为您只会更改浪费内存的重新分配。

所以把它们放在一起：

*   该标准有意不***指定***允许您为特定数量的对象预分配内存块的构造函数（这至少比分配实现特定的、固定的“东西”更可取）。
*   分配不应该是隐含的。因此，要预先分配一个块，您需要单独调用`reserve()`并且这不需要在同一个构造位置（当然可以/应该在以后，在您意识到容纳所需的大小之后）
*   因此，如果一个向量总是预先分配一个实现定义大小的内存块，这会破坏预期的工作`reserve()`，不是吗？
*   如果 STL 自然无法知道向量的预期用途和预期大小，那么预分配块的优势是什么？这将是相当荒谬的，如果不是适得其反的话。
*   相反，正确的解决方案是使用第一个分配和实现特定块`push_back()`- 如果之前还没有明确分配的话`reserve()`。
*   在必要的重新分配的情况下，块大小的增加也是特定于实现的。我所知道的向量实现从大小呈指数增长开始，但会将增量速率限制在某个最大值，以避免浪费大量内存甚至破坏它。

只有不受分配构造函数的干扰，所有这些才能充分发挥作用和优势。`reserve()`对于常见场景，您有合理的默认值，可以通过(and `shrink_to_fit()`)按需覆盖。因此，即使标准没有明确说明，我很确定假设新构造的向量不预分配对于所有当前实现来说是一个非常安全的选择。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-03-01T10:44:05.740

作为其他答案的一个小补充，我发现当使用 Visual Studio 在调试条件下运行时，即使容量从零开始，默认构造的向量仍将在堆上分配。

特别是如果 _ITERATOR_DEBUG_LEVEL != 0 那么向量将分配一些空间来帮助迭代器检查。

[https://docs.microsoft.com/en-gb/cpp/standard-library/iterator-debug-level](https://docs.microsoft.com/en-gb/cpp/standard-library/iterator-debug-level)

我只是觉得这有点烦人，因为我当时使用的是自定义分配器并且没有期待额外的分配。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-12-22T00:35:23.717

这是一个老问题，这里的所有答案都正确地解释了标准的观点以及您可以通过使用以可移植方式获得初始容量的方式`std::vector::reserve`;

但是，我将解释为什么任何 STL 实现在构造*对象**时分配内存都没有意义`std::vector<T>`*；

1.  **`std::vector<T>`不完整的类型；**

    在 C++17 之前，`std::vector<T>`如果在实例化点的定义`T`仍然未知，则构造 a 是未定义的行为。[但是，该约束在 C++17 中有所放松](https://stackoverflow.com/a/41913654/1621391)。

    为了有效地为对象分配内存，您需要知道它的大小。从 C++17 及更高版本开始，您的客户可能会遇到您的`std::vector<T>`类不知道`T`. 具有依赖于类型完整性的内存分配特征是否有意义？

2.  **`Unwanted Memory allocations`**

    有很多很多次，您需要在软件中为图形建模。（树是图）；您最有可能将其建模为：

    ```
    class Node {
        ....
        std::vector<Node> children; //or std::vector< *some pointer type* > children;
        ....
     }; 
    ```

    现在想一想，想象一下如果你有很多终端节点。如果您的 STL 实现只是为了在`children`.

    这只是一个例子，请随意考虑更多...

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-03-01T11:14:45.433

标准没有指定容量的初始值，但 STL 容器会自动增长以容纳尽可能多的数据，前提是您不超过最大大小（使用 max_size 成员函数知道）。对于向量和字符串，当需要更多空间时，增长由 realloc 处理。假设您想创建一个持有值 1-1000 的向量。在不使用保留的情况下，代码通常会在以下循环期间导致 2 到 18 次重新分配：

```
vector<int> v;
for ( int i = 1; i <= 1000; i++) v.push_back(i); 
```

修改代码以使用保留可能会导致在循环期间分配 0：

```
vector<int> v;
v.reserve(1000);

for ( int i = 1; i <= 1000; i++) v.push_back(i); 
```

粗略地说，向量和字符串的容量每次增长 1.5 到 2 倍。

# android - 从二维数组中选择随机字符串？

> ID：12271019
> 
> 赞同：0
> 
> 时间：2012-09-04T20:38:07.327
> 
> 标签：android, arrays, string, multidimensional-array

所以我有一个二维数组，其中包含饮料的名称和价格 Test[Name][Price]：

```
 public static final String[][] Test = {{"vodka1","5.0"},{"vodka2","10.0"},{"vodka3","15.0"},{"vodka4","20.0"},{"vodka5","25.0"}}; 
```

我想做的是让用户输入他们的最高价格，然后从低于最高价格的二维数组中随机选择一种饮料。

那么首先我如何将数组缩小到低于用户最高价格的饮料？

这是我尝试过的（我知道它错了，但我能想到的只是）：

```
 private static final String[] test1 = {};
    test1 = (array_city.Test[i][j] <= Price);
                    randomIndex = random.nextInt(test1.length);
                    text2.setText(test1[randomIndex]); 
```

谢谢！

# 编辑

我已根据价格将我的数组排序为最小到最大，并尝试使用此代码以找到可能购买的最大饮料，在 之间选择一个随机索引，然后将 setText 设置为该字符串，但是当活动页面启动时它崩溃了？这是我的代码：

```
 convert = Double.valueOf(array_city.Test[c][1]);
                    // Set vodka brand
                    while(Price <= convert){
                        c++;
                        convert = Double.valueOf(array_city.Test[c][1]);
                    }
                    final TextView text2 = (TextView) findViewById(R.id.display2);
                    randomIndex = random.nextInt(c);
                    text2.setText(array_city.Test[randomIndex][1]); 
```

为什么这不起作用？

# 最终编辑

弄清楚了！！原来是一些小逻辑问题，改成四循环，效果很好！！这是我对我的代码所做的：

```
 convert = Double.valueOf(array_city.Test[c][1]);
                    // Set vodka brand
                    for(double i = Price; i >= convert;){
                        c++;
                        convert = Double.valueOf(array_city.Test[c][1]);
                    }
                    final TextView text2 = (TextView) findViewById(R.id.display2);
                    randomIndex = random.nextInt(c); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T20:51:34.763

首先，不要将其`String[][]`设为数组，而应将其`Drink[]`设为数组（`Drink`您已定义的类在哪里，并且具有`String`名称和`float`价格。这将帮助您使用信息，因为您不会拥有不断担心将价格字符串解析为双倍。

如果数组按价格排序（从最低到最高），这是一个伪代码解决方案：

1.  首先找到您仍然可以购买的最昂贵的饮料。你可以对它进行二分搜索，但更简单的解决方案是从索引 0 到 Test.length-1 检查饮料是否可以购买。如果没有，您将停止并存储最后可购买的饮料的索引。如果它是可购买的，你会继续。
2.  然后，您将生成一个`int`从 0 到`maxIndex`（含）的随机数，并输出 Drink。

例如，

`(int)(Math.random()*(maxIndex+1))`会给你随机整数。

**编辑**

由于数组不一定是排序的，所以可以排序。为此，请使用`java.util.Arrays.sort(Object[] o, Comparator c)`对其进行排序。

输入您的`Drink[]`作为第一个参数。而你`DrinkComparator`的第二个。这将为`quicksort`您服务。

假设您的`Drink`类定义如下：

```
public class Drink {

        String name;
        double price; // You could also use floats

        public Drink(String n, double p) {

            price = p;
            name = n;
        }
    } 
```

你可以让你的`DrinkComparator`班级像这样。

[http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Comparator.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Comparator.html)

```
 class DrinkComparator implements Comparator {

         public int compare(Object o1, Object o2) {
             if(o1.price < o2.price) {
                 return 1;
             }
             else if(o1.price == o2.price) { // Disregarding float imprecision
                 return 0;
             }
             else { // Not necessary, but here for the sake of readability.
                 return -1;
             }
         }

         public boolean equals(Object o) { // I don't think you will be using this method.
             return true; // If you run into problems, tell me.
         }
    }
} 
```

然后你会这样排序：

`Arrays.sort(drinks, new DrinkComparator());`

`drinks`当然是你`Drink[]`的。

# ruby-on-rails-3 - Rails 3 – 在控制器的 before_filter 中添加动作

> ID：12271020
> 
> 赞同：0
> 
> 时间：2012-09-04T20:38:11.790
> 
> 标签：ruby-on-rails-3, metaprogramming

我正在尝试根据请求参数动态地将 mixin 添加到我的控制器中，如下所示：

```
# Controller
class QuantitiesController < Admin::BaseController
  before_filter :extend_input_method, only: [:create, :new]
  def extend_input_method
    input_method = params[:input_method]
    if input_method
      send(:extend, "InputMethod::#{input_method.classify}".constantize)
    end
  end
end

# Mixin that gets included in the controller
module InputMethod::Single
  include InputMethod::Helpers

  def new
    puts "CALLED #new" # Debug information
    load_recent_entries
    quantity
  end

  def create
    @quantity = scoped_by_subject.new(process_attributes)

    if @quantity.save
      save_success
    else
      load_recent_entries
      save_error
    end
  end
end 
```

该`new`方法永远不会被调用，但我的模板在没有引发异常的情况下被渲染，即使在扩展实例之后`action_name`是`new`和`respond_to?("new")`是。`true`

我想了解为什么这不起作用以及如何实现类似的目标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T21:41:33.430

这是我想出的解决方案。它可以满足我的需要。

```
class QuantitiesController < Admin::BaseController
  before_filter :extend_input_method, only: [:create, :new]

  def new
    _new
  end

  def create
    _create
  end

  private
  def extend_input_method
    input_method = params[:input_method]
    extend(Dep.get("InputMethod::#{input_method.classify}")) if input_method
  end

end

module InputMethod::Single
  include InputMethod::Helpers

  def _new
    # Do stuff...
  end

  def _create
    # Do stuff...
  end

end 
```

# keyboard-shortcuts - 在 SOAPUI 中使用键盘切换请求和响应

> ID：12271023
> 
> 赞同：5
> 
> 时间：2012-09-04T20:38:26.907
> 
> 标签：keyboard-shortcuts, soapui, hotkeys, root

我正在使用 SoapUi 的免费版本我真的想仅使用键盘从请求和响应窗口切换我发现 ctrl+alt+tab 应该可以完成工作，但似乎 Windows 快捷方式阻止了它我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-09-11T19:32:01.410

Soapui 版本 5.2.0

Ctrl+tab - 将光标移出活动请求/响应。

Ctrl+tab+tab - 如果光标不在活动请求/响应中，则将焦点从请求切换到响应，反之亦然。

Ctrl+tab+tab+tab - 如果光标出现在活动请求/响应中，则将焦点从请求切换到响应，反之亦然。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T20:43:25.147

尝试`Alt-Enter`

以下是 SoapUI 使用提示列表：

*   [http://kjetilvalle.com/posts/soapui-less-painful.html](http://kjetilvalle.com/posts/soapui-less-painful.html)

# android - SDK.DIR 丢失？安卓更新项目？

> ID：12271024
> 
> 赞同：39
> 
> 时间：2012-09-04T20:38:37.967
> 
> 标签：android, ant

当我这样做时出现此错误

```
$ ant release
sdk.dir is missing. Make sure to generate local.properties using 'android update project' or to inject it through an env var 
```

输入 android update project 我收到另一个错误，说我必须指定项目的路径 ....。

然后我尝试 cd 进入我的项目目录并执行

```
android update -p .
android update -path . 
```

等等，它说`-p`并且`-path`不被全球认可。

有人可以给我确切的语法吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-09-06T18:54:27.810

cd 到项目目录并执行以下命令： 单词 project 是命令的一部分，不能用实际的项目名称替换。文档没有说明这一点，应该加以改进。

```
 android update project -p . 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-12-06T15:22:24.807

您可以使用命令行参数来设置 sdk.dir，例如：

```
ant -f xyz/build.xml clean release -Dsdk.dir=/Applications/adt-bundle-mac/sdk/ 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2012-09-04T20:44:42.180

您可以`sdk.dir`在 projet.properties 文件中使用来定义 sdk 主页或使用环境变量（对于团队工作更灵活）。

```
export ANDROID_HOME=<the path to your sdks> 
```

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2013-02-22T00:11:39.893

您可以使用以下命令将`ANDROID_HOME`环境变量注入到属性中。`sdk.dir``ant`

```
$ ant debug -Dsdk.dir=$ANDROID_HOME 
```

`ANDROID_HOME`必须是绝对路径，例如`/Users/jameswald/Development/android-sdk-macosx`.

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2014-07-28T10:39:56.133

我有同样的问题。在使用命令行命令折腾了几分钟后，我最终只是`local.properties`直接编辑了文件。

你应该有一个名为 local.properties 的文件

```
<app-directory>\platforms\android 
```

文件夹。如果你没有，那么你可以创建它。

在文件中应该有一个参考，指定 ant 可以在哪里找到你的 android sdk。它应该如下所示：

```
sdk.dir=C:\\<path-to-sdk>\\sdk 
```

只需更新您的详细信息以将其指向您正确的 android sdk 文件夹。

双 \ 存在于我的文件中。不知道为什么，但它似乎工作。:)

注意：此文件也需要复制到您的`CordovaLib`文件夹中，该文件夹更深一个文件夹：`<app-directory>\platforms\android\CordovaLib`

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-02-28T17:19:58.807

`android update project -p .`可能会解决您的问题。有时一旦你执行`android update project -p .`你可能会得到一个像这样的 O/P。

```
Updated local.properties
----------
build.xml: Failed to find version-tag string. File must be updated.
In order to not erase potential customizations, the file will not be automatically regenerated.
If no changes have been made to the file, delete it manually and run the command again.
If you have made customizations to the build process, the file must be manually updated.
It is recommended to:
    * Copy current file to a safe location.
    * Delete original file.
    * Run command again to generate a new file.
    * Port customizations to the new file, by looking at the new rules file
      located at <SDK>/tools/ant/build.xml
    * Update file to contain
          version-tag: custom
      to prevent file from being rewritten automatically by the SDK tools.
----------
Updated file ./proguard-project.txt
It seems that there are sub-projects. If you want to update them
please use the --subprojects parameter. 
```

如果是这样试试这个命令`android update project -p . -s`

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-07-19T04:54:05.383

那应该从ant创建/修复local.properties：

> android 更新项目 --name --target --path

**名称**参数是可选的

**target**是 api 版本

更多信息在这里 [https://developer.android.com/tools/projects/projects-cmdline.html#UpdatingAProject](https://developer.android.com/tools/projects/projects-cmdline.html#UpdatingAProject)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2013-06-26T11:56:41.377

ANDROID_HOME 必须在正确的上下文中设置 - 只是你有它，例如在你的 bashrc 上并不意味着当你通过单击图标启动时设置了 var （ bashrc 不会被执行 - 但在检查 env var 是否设置时在控制台上是）

你也可以把它放在 studio.sh 中：

```
#!/bin/sh                                                                                                                               
#                                                                                                                                       
# ---------------------------------------------------------------------                                                                 
# Android Studio startup script.                                                                                                        
# ---------------------------------------------------------------------                                                                 
#                                                                                                                                       

export ANDROID_HOME=/home/ligi/bin/android-sdk/

message()
{ 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-10-16T08:25:41.343

是的，这些解决方案都不适合我。这是从这里开始的：

[在 Mac OS X 上设置 ANDROID_HOME 环境变量](https://stackoverflow.com/questions/19986214/setting-android-home-enviromental-variable-on-mavericks-mac-os-x)

打开终端窗口并输入以下内容（我希望这是 sdk 的完整路径）：

export ANDROID_HOME=/Applications/ADT/sdk 一旦你有了这个设置，你需要把它添加到PATH环境变量中

导出 PATH=$PATH:$ANDROID_HOME/bin

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-09-09T11:23:03.443

我遇到了同样的问题，事实证明，由于某种原因，其中一个 ant 脚本正在引用硬编码路径，`C:\ant`并且因为我的 ant 所在的路径`C:\apache-ant-{version}`无法找到它。重命名ant目录后一切正常。

作为参考，我观察到此问题的文件是 `\apache-ant-{version}\bin\ant.bat`：第 106 行

编辑：我使用的是 Windows 8

# django - Django、Haystack、Solr 和 Boosting

> ID：12271029
> 
> 赞同：9
> 
> 时间：2012-09-04T20:39:02.477
> 
> 标签：django, solr, django-haystack, pysolr

# TLDR；

django、django-haystack 和 solr 中的各种 boosting 类型如何协同工作？

我无法让最明显的搜索结果首先出现。如果我搜索`caring for others`并获得 10 个结果，带有标题的对象`caring for others`在`caring for yourself`.

### 文档提升

我已经记录了提升`Category`对象的因子，`factor = 2.0 - ((the mptt tree level)/10)`根节点为 1.9，二级为 1.8，三级为 1.7，依此类推。（或 190%、180%、170%……等等）

### 场增强

标题被`boost=1.5`150% 的正因素提升 内容被`boost=.5`负因素 50%提升

### 术语提升

我目前没有增加任何搜索词。

### 我的目标

我想获得结果类别和文章的列表（在我直接获得类别结果之前，我会忽略文章）。类别的权重高于文章，标题的权重高于内容。此外，我正在尝试将根类别节点的权重高于子节点。

我觉得我在某处遗漏了一个关键概念。

# 信息

我正在使用 haystack 的内置搜索表单和搜索视图。

我正在使用以下包/库版本：

```
Django==1.4.1
django-haystack==1.2.7
pysolr==2.1.0-beta 
```

我的索引类

```
class CategoryIndex(SearchIndex):
    """Categorization -> Category"""
    text = CharField(document=True, use_template=True, boost=.5)
    title = CharField(model_attr='title', boost=1.5)
    content = CharField(model_attr='content', boost=.5)
    autocomplete = EdgeNgramField(model_attr='title')

    def prepare_title(self, object): 
        return object.title

    def prepare(self, obj):
        data = super(CategoryIndex, self).prepare(obj)
        base_boost = 2.0
        base_boost -= (float(int(obj.level))/10)
        data['boost'] = base_boost
        return data 
```

我的搜索模板在`templates/search/categorization/category_text.txt`

```
{{ object.title }}
{{ object.content }} 
```

# 更新

我注意到，当我`{{ object.content }}`从搜索模板中取出时，这些记录开始以预期的顺序出现。为什么是这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-20T08:46:37.420

Dismax 解析器（另外从 SOLR 3.1 开始的 ExtendedDismax）正是为这些需求而创建的。您可以配置所有要搜索的字段（“qf”参数），为每个字段添加自定义提升，并指定短语命中特别有价值的字段（添加到命中的分数；“pf”参数）。您还可以指定搜索中必须匹配的标记数（通过灵活的规则模式；'mm' 参数）。

例如，配置可能看起来像这样（solrconfig.xml 中请求处理程序配置条目的一部分 - 我不熟悉如何使用 haystack，这是普通的 SOLR）：

```
<str name="defType">dismax</str>
<str name="q.alt">*:*</str>
<str name="qf">text^0.5 title^1.5 content^0.5</str>
<str name="pf">text title^2 content</str>
<str name="fl">*,score</str>
<str name="mm">100%</str>
<int name="ps">100</int> 
```

我不知道 haystack，但它似乎会提供 Dismax 功能： [https ://github.com/toastdriven/django-haystack/pull/314](https://github.com/toastdriven/django-haystack/pull/314)

有关 Dismax，请参阅此文档（它也链接到 ExtendedDismax）： [http](http://wiki.apache.org/solr/DisMaxQParserPlugin) ://wiki.apache.org/solr/DisMaxQParserPlugin http://wiki.apache.org/solr/ExtendedDisMax

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T20:33:36.083

看来您只是想在所有这些提升中变得太聪明。

例如，如果您使用默认搜索视图，则字段中的那些完全是针。事实上，默认运行的 auto_query 只使用一个字段进行搜索——只有这个字段被标记为 document=true。haystack 实际上在内部命名了这个字段内容，所以我建议在搜索索引中重命名它以避免任何可能的冲突。

如果它没有帮助（可能不会），您必须创建您的自定义搜索表单或使用简单的解决方法来实现您想要的东西，方法是在模板中放置您想要多次提升的字段：

```
{{ object.title }}
{{ object.title }}
{{ object.content }} 
```

# batch-file - 如何在文件中搜索特定数据并在批处理文件中替换它旁边的字符串

> ID：12271030
> 
> 赞同：0
> 
> 时间：2012-09-04T20:39:13.737
> 
> 标签：batch-file

您好我正在尝试搜索文件中的特定字符串，并希望用批处理文件中的其他字符串替换该字符串。

例如，我有一个包含以下数据的.txt：

```
line 1: Name: abc
line 2: Some words then age: 24 something
line 3: country:xyz 
```

现在我想用“年龄：”找到并想替换为

```
line 2: Some words then age: 30 something 
```

并保存在同一个 a.txt 中。

感谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T21:00:20.483

`age: (whatever)`这会将text.inf 中的每个实例替换为`age: 30`：

```
for /f "tokens=1* delims=: " %%x in (text.inf) do (
  if "%%x"=="age" (
    echo %%x: 30 >> outfile.tmp
  ) else (
    echo %%x: %%y >> outfile.tmp
  )
)
move /y outfile.tmp text.inf 
```

好的，你的新规格使这变得更加困难，但是...

```
setlocal enabledelayedexpansion
set line=
for /f "tokens=* delims= " %%x in (text.inf) do call :workit %%x
move /y outfile.tmp text.inf
endlocal
goto :eof

:workit
set line=
  :workitloop
  set line=!line! %1
  if "%1"=="age:" (
    set line=!line! 30
    shift
    shift
    goto :workitloop
  ) else if "%1"=="" (
    echo !line:~1!>> outfile.tmp
  ) else (
    shift
    goto :workitloop
  )
goto :eof 
```

# java - Playframework 2 - 部署到 ec2

> ID：12271032
> 
> 赞同：2
> 
> 时间：2012-09-04T20:39:24.603
> 
> 标签：java, git, scala, amazon-ec2, playframework-2.0

我知道我可以使用 play dist 命令将其上传到 ec2 实例而不会出现任何问题，但大小为 35mb，我不想为每一个微小的变化等待 60 分钟。（我有 dsl 1000）

是否可以使用像 heroku 这样的东西，您只需通过 git 命令推送您的更改？

我认为这需要一个自定义 AMI 并安装有效的 play2。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T07:42:21.563

如果您想使用 git 进行部署，则必须在您的 EC2 实例上安装 git 服务器。

然后，您必须通过大量使用[git hooks](http://git-scm.com/book/en/Customizing-Git-Git-Hooks)来编写一些脚本，特别是`post-receive`服务器端的钩子。

大致：

1.  执行`clean`,`compile`和`stage`任务
2.  如果一切正常，停止旧的播放应用程序，并启动新的（in `target/start`）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T20:44:44.447

假设您的开发环境也在 ec2 上，您最好从您的开发服务器创建一个反映更改的新 AMI，然后部署该新 AMI。

# gpu - GPU 系统上 BLAS/LAPACK 或其他线性代数路由的最快可用实现是什么？

> ID：12271035
> 
> 赞同：0
> 
> 时间：2012-09-04T20:39:35.830
> 
> 标签：gpu, linear-algebra, gpgpu, lapack, blas

例如，nVidia 有 CUBLAS，它承诺加速 7-14 倍。天真地，这远不及任何 nVidia 的 GPU 卡的理论吞吐量。在 GPU 上加速线性代数有哪些挑战，是否已经有更快的线性代数路由可用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T21:50:58.580

据我所知，CUBLAS 是 Nvidia GPU 上最快的线性代数实现。如果您需要 LAPACK 功能，可以[使用 CULAPACK](http://www.culatools.com/)。

请注意，CUBLAS 仅涵盖稠密线性代数；对于稀疏矩阵，有 CUSPARSE（也作为 CUDA 工具包的一部分提供）。

加速很大程度上取决于您正在操作的数据类型以及您正在执行的特定操作。一些线性代数运算可以很好地并行化，而另一些则不然，因为它们本质上是顺序的。并行架构的数值算法优化是（并且几十年来一直是）一个正在进行的研究领域——因此算法的性能正在不断提高。

# perl - Perl：如何在括号之间提取字符串

> ID：12271040
> 
> 赞同：1
> 
> 时间：2012-09-04T20:39:58.323
> 
> 标签：perl, matching

我有一个 moinmoin 文本格式的文件：

```
* [[  Virtualbox Guest Additions]] (2011/10/17 15:19)
* [[  Abiword Wordprocessor]] (2010/10/27 20:17)
* [[  Sylpheed E-Mail]] (2010/03/30 21:49)
* [[   Kupfer]] (2010/05/16 20:18) 
```

'[[' 和 ']]' 之间的所有单词都是条目的简短描述。我需要提取整个条目，但不是每个单词。

我在这里找到了类似问题的答案：[https](https://stackoverflow.com/a/2700749/819596) ://stackoverflow.com/a/2700749/819596 但无法理解答案：`"my @array = $str =~ /( \{ (?: [^{}]* | (?0) )* \} )/xg;"`

任何有效的东西都会被接受，但解释会有很大帮助，即：做什么`(?0)`或 做什么`/xg`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T21:18:55.290

如果文本永远不会包含`]`，您可以按照之前的建议简单地使用以下内容：

```
/\[\[ ( [^\]]* ) \]\]/x 
```

以下允许`]`包含的文本，但我建议不要将其合并到更大的模式中：

```
/\[\[ ( .*? ) \]\]/x 
```

以下允许`]`包含的文本，并且是最强大的解决方案：

```
/\[\[ ( (?:(?!\]\]).)* ) \]\]/x 
```

例如，

```
if (my ($match) = $line =~ /\[\[ ( (?:(?!\]\]).)* ) \]\]/x) {
   print "$match\n";
} 
```

或者

```
my @matches = $file =~ /\[\[ ( (?:(?!\]\]).)* ) \]\]/xg; 
```

* * *

*   `/x`：忽略模式中的空格。允许添加空格以使模式可读而不改变模式的含义。记录在[perlre](http://perldoc.perl.org/perlre.html)中。
*   `/g`：查找所有匹配项。记录在[perlop](http://perldoc.perl.org/perlop.html)中。
*   `(?0)`用于使模式递归，因为链接节点必须处理花括号的任意嵌套。* `/g`：查找所有匹配项。记录在[perlre](http://perldoc.perl.org/perlre.html)中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T20:48:05.140

代码可能如下所示：

```
use warnings; 
use strict;

my @subjects; # declaring a lexical variable to store all the subjects
my $pattern = qr/ 
  \[ \[    # matching two `[` signs
  \s*      # ... and, if any, whitespace after them
  ([^]]+) # starting from the first non-whitespace symbol, capture all the non-']' symbols
  ]]
/x;

# main processing loop:
while (<DATA>) { # reading the source file line by line
  if (/$pattern/) {      # if line is matched by our pattern
    push @subjects, $1;  # ... push the captured group of symbols into our array
  }
}
print $_, "\n" for @subjects; # print our array of subject line by line

__DATA__
* [[  Virtualbox Guest Additions]] (2011/10/17 15:19)
* [[  Abiword Wordprocessor]] (2010/10/27 20:17)
* [[  Sylpheed E-Mail]] (2010/03/30 21:49)
* [[   Kupfer]] (2010/05/16 20:18) 
```

如我所见，您需要的可以描述如下：在文件的每一行中尝试找到这个符号序列......

```
[[, an opening delimiter, 
then 0 or more whitespace symbols,
then all the symbols that make a subject (which should be saved),
then ]], a closing delimiter 
```

如您所见，此描述很自然地转换为正则表达式。唯一可能不需要的是`/x`正则表达式修饰符，它允许我广泛评论它。)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T13:59:38.940

```
perl -pe 's/.*\[\[(.*)\]\].*/\1/g' temp 
```

测试如下：

```
> cat temp
        * [[  Virtualbox Guest Additions]] (2011/10/17 15:19)
        * [[  Abiword Wordprocessor]] (2010/10/27 20:17)
        * [[  Sylpheed E-Mail]] (2010/03/30 21:49)
        * [[   Kupfer]] (2010/05/16 20:18)
>
> perl -pe 's/.*\[\[(.*)\]\].*/\1/g' temp
  Virtualbox Guest Additions
  Abiword Wordprocessor
  Sylpheed E-Mail
   Kupfer
> 
```

*   秒/。*[[(.* )]].*/\1/g
*   .*[[->匹配任何字符直到[[
*   (.*)]] 在 \1 中存储字符串 "[[" 直到 "]]" 之后的任何字符
*   .*-> 匹配该行的其余部分。

然后因为我们在 \1 中有我们的数据，我们可以简单地使用它在控制台上打印。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-04T21:10:10.287

您找到的答案是递归模式匹配，我认为您不需要。

*   /x 允许在正则表达式中使用无意义的空格和注释。

*   /g 通过所有字符串运行正则表达式。没有它只能运行到第一场比赛。

*   /xg 是 /x 和 /g 的组合。

*   (?0) 再次运行正则表达式本身（递归）

如果我明白，你需要这样的东西：

```
$text="* [[  Virtualbox Guest Additions]] (2011/10/17 15:19)
* [[  Abiword Wordprocessor]] (2010/10/27 20:17)
* [[  Sylpheed E-Mail]] (2010/03/30 21:49)
* [[   Kupfer]] (2010/05/16 20:18)
";

@array=($text=~/\[\[([^\]]*)\]\]/g);
print join(",",@array);

# this prints "  Virtualbox Guest Additions,  Abiword Wordprocessor,  Sylpheed E-Mail,   Kupfer" 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-05T06:17:48.360

我建议使用模块 Text::Balanced 中的“extract_bracketed”或“extract_delimited” - 请参见此处： http: [//perldoc.perl.org/Text/Balanced.html](http://perldoc.perl.org/Text/Balanced.html)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-04T20:48:18.690

```
\[\[(.*)]] 
```

`\[`是文字 [， `]`是文字 ]， `.*`表示每个 0 或更多字符的序列，括号中的内容是捕获组，因此您可以稍后在脚本中使用 $1 （或 $2 .. $9 取决于有多少组你有）。

把所有的东西放在一起，你会匹配两个`[`然后所有的东西直到最后一次出现两个连续的`]`

*更新* 在第二次阅读您的问题时，我突然感到困惑，您是否需要 [[ 和 ]] 之间的内容，还是整行 - 在这种情况下，将括号完全去掉，只需测试模式是否匹配，无需捕获.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-04T20:58:56.477

```
my @array = $str =~ /( \{ (?: [^{}]* | (?0) )* \} )/xg; 
```

'x' 标志意味着在正则表达式中忽略空格，以允许更易读的表达式。'g' 标志意味着结果将是从左到右的所有匹配项的列表（匹配 *g*lobally）。

表示第一组括号内的`(?0)`正则表达式。它是一个递归正则表达式，相当于一组规则，例如：

```
E := '{' ( NoBrace | E) '}'
NoBrace := [^{}]* 
```

# javascript - 在 Jquery 中制作删除和回复按钮

> ID：12271042
> 
> 赞同：2
> 
> 时间：2012-09-04T20:40:15.160
> 
> 标签：javascript, jquery, html, button

这是我在网站上的第二篇文章。在我尝试过的所有其他网站中，这个网站提供了最准确和最有用的信息！

我的按钮有点麻烦，我有一个任务是创建一个收件箱并在每个消息实例中添加一个“回复”和“删除”按钮。

如果有比将 HTML 代码强制写入脚本更好的方法，我确实在徘徊，因为每条消息都是动态生成的。任何帮助和/或建议将不胜感激！（对象是从 JSON 文件调用的）。

```
$(document).ready(function(){
    $.getJSON('public/js/data.json', function(json){
        $.each(json.data, function(i, data){
            var output = '';
         if(data.from.id != '234' && data.from.name != 'Alan Ford'){

            $("#inbox").append(
            output +=
            '<div class="post">'+
            '<div class="h1">'+data.from.name+' - '+data.subject+'</div>'+ //this gives the name of the person who sent the message and the subject
            '<div class="content">'+data.message_formatted+'</div>'+ //The content of the message
                         //buttons should be squeezed left of the date
                           //this gives the date of the message sent
             '<div class="time">'+data.date_sent_formatted.formatted+'</div>'+ 
            '</div>'
    );
         }});
    });

});
var date_sent=convertToDateTime();

function delete_message(id){
    console.log('Delete message with id: '+id);
}

function reply_message(id, sender){
    console.log('Message id: '+id);
    console.log('Reply to: '+sender);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T20:51:09.523

```
$(document).ready(function() {            //when de html document is loaded
    $(".deleteButton").each(function() {  //for each button with class *deleteButton*
        var button = this;                //we take the html element
        $(button).click(function() {      //and we bind an eventlistener onclick
            alert($(button).attr("id"));  //when the user clicks we tell him the id 
            // code to execute when the user clicks on a delete button
        });
    });

    $(".replyButton").each(function() {
        var button = this;
        $(button).click(function() {
            alert($(button).attr("id"));
            // code to execute when the user clicks on a reply button
        });
    });
}); 
```

有了这个，你可以为 html 中的每个删除/回复按钮添加一个类和 id。假设您有一个像这样的简单列表。

```
<div> 
    <button class="deleteButton" id="1">Message 1</div>
    <button class="replyButton" id="1">Message 1</div>

    <button class="deleteButton" id="2">Message 2</div>
    <button class="replyButton"  id="2">Message 2</div>

    <button class="deleteButton" id="3">Message 3</div>
    <button class="replyButton"  id="3">Message 3</div>
</div> 
```

现在，如果您单击其中一个按钮，您将收到一条警报，告诉您该按钮的 ID。

# android - Android设置首选项不保存数据

> ID：12271043
> 
> 赞同：0
> 
> 时间：2012-09-04T20:40:26.377
> 
> 标签：android

我正在写一个简单的照片库应用程序。我希望人们滚动浏览图像并能够将它们添加到“收藏夹”列表中。

我已经构建了一个`Favorite`全局类（将该类放在将其定义为静态的 cGlobal 类中）。

现在我有了这个工作，我希望能够保存收藏夹的状态——想法如下：

1.  当应用程序第一次启动时，它将从主活动的首选项中加载收藏夹列表。
2.  在画廊活动中，它将在首选项中保存最喜欢的状态。

似乎当我从主要活动中加载首选项时，它显示为空。但我可以在画廊活动中阅读我写给它的内容。我有以下测试代码：

在主 Activity 中，当应用程序启动时：

///////////////////////////////////////// ////////////////////////////

```
public class MainActivity extends cBaseView  implements OnClickListener {
    /** Called when the activity is first created. */

    String tr;

    @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);

            // load in favrets from prefences
            SharedPreferences pre=getPreferences(MODE_PRIVATE);

// This does not work and tr is equal to no value.
            tr=pre.getString("label","no value");

            // add listeners 
```

///////////////////////////////////////// /////////////////////////

画廊活动

```
public void onCreate(Bundle savedInstanceState) {      
    // test code
    SharedPreferences pre=getPreferences(MODE_PRIVATE);
    pre.edit().putString("label","ted").commit();

    // tr is set to ted, got the data
    tr=pre.getString("label","no value");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T20:42:49.763

[根据活动的javadoc，](http://developer.android.com/reference/android/app/Activity.html#getPreferences%28int%29)当您使用时`getPreferences`，您会得到以下结果：

> 检索 SharedPreferences 对象以访问此活动专用的首选项。这只是通过传入此活动的类名作为首选项名称来调用底层的 getSharedPreferences(String, int) 方法。

您应该`getSharedPreferences`使用相同的名称，以获得不同活动共享的偏好。

# asp.net-mvc - 区分IE兼容性视图

> ID：12271049
> 
> 赞同：0
> 
> 时间：2012-09-04T20:40:56.210
> 
> 标签：asp.net-mvc, internet-explorer, compatibility, ie8-compatibility-mode

如果用户在 IE 7 上并且我阅读

```
<% = Request.Browser.Version %> 
```

我得到 7.0

如果他们有 IE 9 并且在兼容性视图中，我会得到同样的结果。

Request.Browser 中是否有任何东西可以区分真正的 IE7 用户和使用 IE8 或 IE9 但处于兼容模式的用户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T21:21:03.620

最好使用 JavaScript 在客户端执行此操作。你可以使用这样的东西：

[http://code.google.com/p/ie6-upgrade-warning/](http://code.google.com/p/ie6-upgrade-warning/)

您可以将其调整为您想要的任何内容。

如果您的目标只是确保用户不处于兼容模式，那么您可以使用 X-UA-COMPATIBLE 的元标记或 http 标头版本：

```
<html>
   <head>
       <meta http-equiv="X-UA-Compatible" content="IE=Edge" >
   </head>
   <body>
       <p>Content goes here.</p>
   </body>
</html> 
```

# linux - 在 ubuntu 中监控正在运行的程序的指令？

> ID：12271051
> 
> 赞同：3
> 
> 时间：2012-09-04T20:41:06.283
> 
> 标签：linux, performance, profiling, x86-64, instructions

我有点卡在这里。

这个想法是我想获得一个程序在执行期间运行的每条指令的文件。我想只用手中的可执行文件（无源）来完成它，并且能够确定什么时候在什么地址上发生了什么操作。

例如，我希望能够在 Google Chrome、Firefox 等上运行它。

我想将它用于我正在研究的性能预测系统。我想如果我能够获得在系统 1 上按顺序执行的每条指令，我可以尝试模拟/建模在系统 2 上运行的相同程序的运行时间，因为我将能够预测（虽然我知道不是 100% 准确）L1/L2 缓存未命中、L1/L2 缓存命中、TLB 命中/未命中、页面错误、浮点乘法运算所花费的时间等。

我想尝试在两个不同的系统上执行此操作：

系统 1：基于 Intel Core 2 Duo CPU 的 Ubuntu 10.10

系统 2：Ubuntu 12.04 在系统上使用 2x AMD 十六核 Opteron 型号 6274

（我绝对可以根据需要更改操作系统，但如果可能的话，我更愿意继续使用 Ubuntu）

这可能吗/我该怎么做？我知道调试器，您可以使用它们来逐步执行所有操作，但我没有可用的源代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T13:40:30.957

我认为，您可以使用 qemu（甚至 bochs）或 valgrind 来监控每​​条执行的指令。它们是 x86 二进制翻译工具（不包括 bochs - 它是 x86 代码的解释器）。有一个名为`cachegrind`(+ kcachegrind gui) 的 valgrind 工具，它可以通过检测每个内存访问和模拟一些 L1/L2 缓存模型来模拟缓存（可以通过命令行选项配置大小）。

要更深入（进入管道），您可能需要查看免费的 ptlsim (http://www.ptlsim.org/)

# clojure - Compojure 应用程序无法与 with-redefs 配合使用

> ID：12271054
> 
> 赞同：2
> 
> 时间：2012-09-04T20:41:26.880
> 
> 标签：clojure, compojure, ring

我正在编写一个 Compojure 应用程序并使用`clj-webdriver`它来进行图形测试。我试图用来`with-redefs`模拟从持久性中提取数据以仅返回预设值的函数，但它忽略了我的函数覆盖。我知道`with-redefs`在 vars 方面有效，但它仍然不起作用：

project.clj 相关部分：

```
(defproject run-hub "0.1.0-SNAPSHOT"                                                                                                                        
  :main run-hub.handler/start-server) 
```

处理程序.clj：

```
(ns run-hub.handler
  (:require [compojure.core :refer :all]
            [compojure.handler :as handler]
            [compojure.route :as route]
            [ring.adapter.jetty :refer :all]
            [run-hub.controllers.log-controller :as log-controller]))

(defroutes app-routes
  (GET "/MikeDrogalis/log" [] (log-controller/mikes-log))
  (route/resources "/")
  (route/not-found "Not Found"))

(def app (handler/site #'app-routes)) 
```

日志控制器.clj：

```
(ns run-hub.controllers.log-controller                                                                                                                      
  (:require [run-hub.views.log :as views]
            [run-hub.persistence :as persistence]))

(defn mikes-log []
  (views/mikes-log (persistence/mikes-log))) 
```

持久性.clj

```
(ns run-hub.persistence                                                                                                                                     
  (require [clj-time.core :as time]
           [run-hub.models.log :as log]))

(defn mikes-log [] []) 
```

最后，我的图形测试 - 它试图覆盖`mikes-log`并失败：

```
(fact
 "It has the first date of training as August 19, 2012"
 (with-redefs [persistence/mikes-log (fn [] (one-week-snippet))]
   (to (local "/MikeDrogalis/log"))
   (.contains (text "#training-log") "August 19, 2012"))                                                                                                    
 => true) 
```

Where`one-week-snippet`是一个返回一些样本数据的函数。(defn start-server [] (run-jetty (var app) {:port 3000 :join?false}))

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-02T14:34:04.423

我可以在执行以下操作`with-redefs`的`clj-webdriver`测试中使用：

```
(defn with-server
  [f]
  (let [server (run-jetty #'APP {:port 0 :join? false})
        port (-> server .getConnectors first .getLocalPort)]
    (binding [test-port port]
      (try
        (println "Started jetty on port " test-port)
        (f)
        (finally
          (.stop server))))))

(use-fixtures :once with-server) 
```

然后，所有测试都有自己的码头，这似乎以一种有效的方式`with-redefs`运行。

# ruby - ruby 正则表达式查找嵌套匹配

> ID：12271059
> 
> 赞同：2
> 
> 时间：2012-09-04T20:41:56.340
> 
> 标签：ruby, regex-greedy, non-greedy

我的正则表达式是

```
/a .*programming .*test .*this/i 
```

和测试字符串是

```
This is a test This is a programming test This is a programming test in any language 
```

我得到的比赛是

```
a test This is a programming test This 
```

但是还有另一个较短**的匹配“编程测试这个”**，这个正则表达式无法找到，我使用扫描方法找到所有匹配但甚至无法捕获这个。

任何帮助是极大的赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T20:56:06.800

RegexP 是一个非常复杂的东西！您确实需要知道字符串的哪些部分对匹配至关重要，哪些部分是关键。有很多方法可以完成一场比赛，但要猜出你真正想要的是什么并不容易：

```
s = "This is a test This is a programming test This is a programming test in any language"
s.match(/a [^a]*programming .*test .*this/i)[0]
 => "a programming test This" 
```

# entity-framework - 在有导航属性 (EF) 的地方添加“id”属性

> ID：12271062
> 
> 赞同：5
> 
> 时间：2012-09-04T20:42:05.187
> 
> 标签：entity-framework

如果我有一个导航属性（即：虚拟），例如：
`public virtual User Author { get; set; }`

而且我还想拥有该用户的ID，即：
`public int AuthorId { get; set; }`

我如何告诉 EF 这个“AuthorId”必须与 Author 属性相关？

我不喜欢这种自动的想法（EF神奇地推断出这一点）。
因为一个人可能对同一张表有多个引用：

```
public virtual User Author { get; set; }
public int AuthorId { get; set; }
public virtual User Receiver { get; set; }
public int ReceiverId { get; set; } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-04T20:43:16.517

实体框架将假定 AuthorID 是 Author 类的 FK。有关详细信息，请参阅[此博客文章](http://msdn.microsoft.com/en-us/data/hh134698.aspx)。

您还可以通过使用数据注释明确告诉 EF：

```
[ForeignKey("Author")]
public int AuthorId {get;set;} 
```

或通过使用流畅的映射：

```
modelBuilder.Entity<YourClass>().HasRequired(p => p.Author)
                .WithMany()
                .HasForeignKey(p => p.AuthorId); 
```

# java - JDBC Spring中的Bad Sql Grammar异常

> ID：12271064
> 
> 赞同：7
> 
> 时间：2012-09-04T20:42:14.953
> 
> 标签：java, mysql, spring, jdbc

我是得到

> org.springframework.jdbc.BadSqlGrammarException: PreparedStatementCallback; 错误的 SQL 语法 [从临床医生那里选择 cid、临床医生代码、密码、名字、姓氏，其中临床医生代码 =？]；嵌套异常是 com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException：“字段列表”中的未知列“临床医生”

以下代码出错，您还可以在屏幕截图中看到表格，除了 cid 所有其他属性都是 VARCHAR(45)

![临床医生表](../Images/65987f2cd072225518b75daed50ca0b3.png)

行映射器类

```
public class CClinicianRowMapper implements RowMapper {

@Override
public Object mapRow(ResultSet rs, int line) throws SQLException {
    CClinicianResultSetExtractor extractor = new CClinicianResultSetExtractor();
    return extractor.extractData(rs);
} 
```

}

结果提取器类公共类 CClinicianResultSetExtractor 实现 ResultSetExtractor {

```
 @Override
  public Object extractData(ResultSet rs) throws SQLException {
    CClinician clinician = new CClinician();
    clinician.setCid(rs.getLong("cid"));
    clinician.setClinicianCode(rs.getString("clinician-code"));
    clinician.setPassword(rs.getString("password"));
    clinician.setFirstName(rs.getString("first-name"));
    return clinician;
  } 
```

}

从表中选择数据的类

```
public List<CClinician> findClinician(CClinician _clinician) {
    // TODO Auto-generated method stub
    JdbcTemplate select = new JdbcTemplate(dataSource);
    try
    {
    return select.query("select cid, clinician-code, password, first-name, last-name from Clinician where clinician-code= ?",
            new Object[] {_clinician.getClinicianCode()}, new CClinicianRowMapper());

    }
    catch (Exception e)
    {
        e.printStackTrace();
    }
    return null;
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2016-03-23T13:50:24.207

我知道这是一个旧线程，但希望任何偶然发现这个问题的人都会发现这个答案很有用。

我在我的春季应用程序中遇到了同样的异常。根据输出，我认为我的查询存在语法问题。事实证明，我的 mapper 方法实际上存在语法错误。我遇到了这个问题，因为我最初使用与列名不同的字段名创建了我的 Product 类。

```
public class ProductMapper implements RowMapper<Product> {
public Product mapRow(ResultSet rs, int rowNum) throws SQLException {
  Product product = new Product();
  product.setProduct_id(rs.getInt("product_id"));  //was id.  was causing BadSqlGrammarException
  product.setProduct_name(rs.getString("product_name")); //was name.  was causing BadSqlGrammarException
  product.setPrice(rs.getDouble("price"));
  product.setQuantity(rs.getInt("quantity"));
  return product;
   }
} 
```

一旦我进行了上述更改（我的字段名为 product_id 和 product_name），我的应用程序就可以正常工作了。请记住，您对列名或 java 字段所做的任何更改不仅应针对您的查询语句，还应针对您的映射器方法。我看到 OP 正确地做到了这一点，但我认为值得重申。我希望有人觉得这很有帮助。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-04T20:46:40.990

为了在列名中使用破折号，您需要使用反引号对它们进行转义。

```
"SELECT cid, `clinician-code`, password, `first-name`, `last-name` 
     FROM Clinician 
     WHERE `clinician-code` = ?" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-09T18:09:07.447

正确检查您的查询语法是否丢失；或额外的逗号 (,) 。“Bad SQL Grammar Exception”仅与 Sql 查询中的语法错误有关。
在使用 Spring JDBC 时，我在以下代码中遇到了同样的错误：

```
String query= "update student set name=?, city=?, where id=?"; // due to extra comma after city=?, 
```

将代码更改为

```
String query= "update student set name=? city=?, where id=?"; 
```

错误已解决。

# c# - 按值查找 Xml 属性，并更改其其他值

> ID：12271066
> 
> 赞同：2
> 
> 时间：2012-09-04T20:42:32.200
> 
> 标签：c#, xml

所以，下面我做了一个代码，它在加载时按名称（Selena 和 Maria）列出了我在组合框 1 中的 2 个项目，当我选择其中一个项目时，比如说 Maria，然后单击 button1，它会用 Maria 的名字填充我的 3 个文本框,usn 和 pawd 属性值，它看起来像： 显示名称：Maria 用户名：mary26 密码：d4e5r

我对那部分代码很满意，因为它符合我的目的。

**但我正在努力解决我试图弄清楚的部分代码。我创建了一个 button2，我希望当我更改显示名称、用户名或密码文本框的值并单击保存时，它会保存到 xml 文件中的正确位置，保存到 Maria，而不是保存到 Selena 或别的东西。**

我已经尝试浏览了一周，并且有多种解决方案，但我找不到任何解决方案。

att.xml：

```
<database>
<item name="Selena" usn="sele22" pawd="fed47a"></item>
<item name="Maria" usn="mary26" pawd="d4e5r"></item>
<database> 
```

我的项目：

```
private void Form3_Load(object sender, EventArgs e)
        {
            comboBox1.Items.Clear();
            XmlTextReader reader = new XmlTextReader("att.xml");
            while (reader.Read())
            {
                if (reader.NodeType == XmlNodeType.Element)
                {
                    if (reader.Name == "item")
                    {
                        comboBox1.Items.Add(reader.GetAttribute("name"));
                    }
                }
            }

            reader.Close();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            string secit = comboBox1.SelectedItem as string;
            XmlTextReader lola = new XmlTextReader("att.xml");
            while (lola.Read())
            {
                if (lola.NodeType == XmlNodeType.Element)
                {
                    string poop = lola.GetAttribute("name"); 
                    if (poop == secit) 
                    {
                        string username = lola.GetAttribute("usn"); 
                        string password = lola.GetAttribute("pawd");
                        string dispname = lola.GetAttribute("name");

                        textBox1.Text = dispname;
                        textBox2.Text = username;
                        textBox3.Text = password;

                    }
                }
            }

            lola.Close();
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T21:03:00.830

您可以像这样使用 XmlDocument：

```
XmlDocument doc = new XmlDocument();
doc.Load("att.xml");
foreach(XmlNode item in doc.SelectNodes("//item"))
    comboBox1.Items.Add(item.Attributes["name"].Value);

void button3_Click(object sender, NotifyArgs e)
{
    XmlNode item = doc.SelectSingleNode("//item[@name='" + comboBox1.Text + "']");
    if (item == null) return;
    item.Attributes["name"].Value = textBox1.Text;
    ...
    doc.Save("att.xml");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T22:04:51.117

如果您想学习 LINQ，另一种选择是使用[XDocument 。](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.aspx)

假设您有一个单独的方法来更新 XML 文件，可能看起来像这样。

```
private static void Update(string key, string pwd, string usn)
{
    // Enter code here to update the item
} 
```

您可以使用 XPath 查找具有名称的元素：

```
var document = XDocument.Load("XMLFile1.xml");
var element = document.XPathSelectElement(string.Format("/database/item[@name = \"{0}\"]", key));
if (element != null)
{
    element.SetAttributeValue("usn", usn);
    element.SetAttributeValue("pawd", pwd);
    document.Save("XMLFile2.xml");
} 
```

或者通过使用 XDocument/XElement/LINQ 方法查找文档：

```
var document = XDocument.Load("XMLFile1.xml");
var element = document.Elements("database")
    .Elements("item")
    .Attributes("name")
    .Where(a => a.Value == key)
    .Select(a => a.Parent)
    .SingleOrDefault();
if (element != null)
{
    element.SetAttributeValue("usn", usn);
    element.SetAttributeValue("pawd", pwd);
    document.Save("XMLFile3.xml");
} 
```

或者您可以将其重写为 LINQ 表达式。

```
var document = XDocument.Load("XMLFile1.xml");
var elements = from e1 in document.Elements()
                where e1.Name == "database"
                from e2 in e1.Elements()
                where e2.Name == "item"
                from attribute in e2.Attributes()
                where attribute.Name == "name" && attribute.Value == key
                select e2;
var element = elements.SingleOrDefault();
if (element != null)
{
    element.SetAttributeValue("usn", usn);
    element.SetAttributeValue("pawd", pwd);
    document.Save("XMLFile3.xml");
} 
```

随意适应。

# visual-studio-2010 - VS2010下OpenCV 2.4.2 Release模式下的运行时错误？

> ID：12271068
> 
> 赞同：1
> 
> 时间：2012-09-04T20:42:37.817
> 
> 标签：visual-studio-2010, opencv, linker-errors, runtime-error, runtime.exec

在调试和发布两种模式下编译我的代码都是成功的。调试模式执行并且工作正常，但是当我执行发布模式时，它说“应用程序无法正确启动 0x80000003”。

这个错误是什么以及为什么调试模式可以正常工作但不能发布。用于调试和发布的 DLL 存在于同一个目录名“bin”中。两种模式的“lib”也放置在同一目录中。

我尝试了很多方法但没有成功？指导我如何解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T22:41:26.423

> 为什么调试模式工作正常但不发布

一个构建工作而另一个构建不工作的原因可能有很多。数据结构的形状和大小可能`#ifdef`因为编译器发出不同的代码而不同，正在执行的代码也可能不同——同样是因为类似的结构`#ifdef`或编译器发出的代码。

当您的代码中有错误时，这可能很重要。假设您有一个错误计算数组的长度（或结构的大小或其他）。您进行一些指针运算并使用该指针将一些数据写入内存 - 只是您写入错误的位置。该错误是否会破坏您的程序可能取决于您覆盖的内存中的内容。

如果幸运的话，您的程序几乎会立即崩溃，因为您覆盖的内容对于出现错误后立即执行的某些代码很重要。如果你只是有点幸运，你的程序会在一段时间后在程序的一个完全不同的部分崩溃，因为你覆盖的内容对于远离你的错误的代码很重要。如果你真的不走运，你的程序直到几年后才会崩溃，那时完全不相关的变化会在内存中移动东西，所以现在你突然覆盖的东西*很*重要。

还有很多其他可能的原因有时被称为[Heisenbugs](http://en.wikipedia.org/wiki/Heisenbug)

> 这是什么错误

查找诸如 0x80000003 之类的错误的一个地方是 WinError.h 文件，您可以在您使用的 SDK 中找到该文件（Visual Studio 2010 附带的一个或您以后安装的一个）。查看 WinError.h，您会发现它`E_INVALIDARG`被定义为`_HRESULT_TYPEDEF_(0x80000003L)`.

但这不一定有帮助，因为我们对返回该错误的原因或返回该错误的原因知之甚少，甚至您的 0x80000003 实际上是 E_INVALIDARG - 它可能是具有相同值的其他错误，或某些代码误用 E_INVALIDARG 或其他东西。

另一种可能性是 0x80000003 是一个[硬编码的断点异常](http://msdn.microsoft.com/en-us/library/windows/hardware/ff558784%28v=vs.85%29.aspx)被抛出 - 很可能是因为你的程序已经到了一个“这永远不会发生”的地方，唯一有意义的是抛出一个异常并崩溃。如果您查看 NtStatus.h（在与 WinError.h 相同的位置），您会发现它`STATUS_BREAKPOINT`被定义为`((NTSTATUS)0x80000003L)`

> 如何解决这个问题

诀窍是找出导致 0x800000003 的原因（以及它在代码中发生的位置），以便您可以缩小它发生的原因。很可能这是一个例外，但为什么要贸然下结论呢？

您可以在调试器中运行发布构建，就像运行调试构建一样——也就是说，使用 Release 目标构建代码，然后按 F5 或 Debug | 开始调试。查看输出窗口，您可能会看到一些有助于解释错误的信息。

您还可以使用调试 | Exceptions 菜单添加一个值为 80000003 的新 Win32 异常，并将其设置为在抛出时中断，而不是在未处理时中断。这样，当抛出该异常时（如果实际上已抛出），您应该在调试器中停止。

当然，即使在调试器中运行你的程序也足以改变事情，这样你的问题就不会发生。

# webdav - 如何使用 curl 将文件上传到 Milton WebDAV 服务器？

> ID：12271070
> 
> 赞同：1
> 
> 时间：2012-09-04T20:42:42.180
> 
> 标签：webdav, milton

当我尝试使用 -T 选项卷曲时，我得到一个空回复：

```
$ curl --digest -u me:pwd -H "Content-Type:application/xml" -T test.xml http://localhost:8085/
curl: (52) Empty reply from server 
```

有谁知道咒语？从 MacOSX 内置的 WebDAV 客户端连接到服务器时，服务器工作正常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T01:02:31.450

默认情况下 curl 发送 Expect: Continue，但不幸的是 java web 容器不能很好地与 Expect 标头配合使用。最简单的答案是指示 curl 不要发送该标头：

```
curl --digest -u a2 -H "Content-Type:application/xml" -H "Expect:" -T TestPBE-workspace.xml http://localhost:8080/users/a2/files2/ 
```

更好的解决方案是让 expect:continue 工作，但从我所做的研究看来，这取决于您使用的 Web 容器。

# javascript - 当 z-index 为负值时，onclick 在 webkit 或 Mozilla 中不起作用

> ID：12271074
> 
> 赞同：6
> 
> 时间：2012-09-04T20:42:58.777
> 
> 标签：javascript, css, onclick, z-index

我有以下仅适用于 IE9 的 div 集。在 Moz 和 Webkit 上，onclick 不会触发。如果我将 z-index 更改为 0，则 onclick 有效，但我在站点中的其他元素存在可见性问题。有没有办法让 onclick 以负 z 索引触发？

```
<div id="adbg" style="margin: 0pt auto; height: 1000px; width: 100%; position: fixed; cursor: pointer; z-index: -1;">
<div OnClick="window.open('/bgClicks/2');" style="background: #fff url('http://www.example.com/img/bg/w_1.jpg') no-repeat center top fixed; height: 100%; width: 100%; margin: 0pt auto; cursor: pointer;"></div>
</div>
<div id="wrapper"> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T21:37:40.000

这里有一个 z-index`-`绝对是问题所在。Moz/Webkit 中发生的事情是预期的结果，您必须在拾取点击的对象上放置一个不可见/透明的图层，从而不让它通过实际链接。

你可以做几件事..
1）找到覆盖它的对象（在Chrome中很容易，只需右键单击 - 检查元素，通常鼠标下的直接元素会在检查器中自动突出显示。然后对于这个元素，给出一个 CSS 规则：

```
pointer-events: none; 
```

这允许点击通过它注册到下面的对象。请注意，[浏览器](http://caniuse.com/pointer-events)对此的支持不是很好，所以我建议另一种解决方案：

2）重组你的代码，这样你就不会遇到这个问题，在逻辑世界里，为什么你会有任何超出链接顶部的东西，这实际上归结为糟糕的结构，重新考虑你的边距/填充，或者一个[jsfiddle](http://jsfiddle.net)，所以我们可以更好地看看:)。

# magento - Magento 媒体浏览器没有出现

> ID：12271076
> 
> 赞同：0
> 
> 时间：2012-09-04T20:43:05.803
> 
> 标签：magento

从 1.5 升级到 1.6，现在媒体浏览器没有出现。当我转到产品并尝试在所见即所得中添加一些图像时，当我尝试将其调出时收到以下消息：

![媒体浏览器错误](../Images/556cbfa16214a12c877532cc3db8e09c.png)

**日志报告：**

```
ERR (3): Warning: Missing argument 1 for Mage_Page_Block_Html_Head::addJs()  in /var/www/domain.net/app/code/core/Mage/Page/Block/Html/Head.php on line 66
 (3): Notice: Undefined variable: name  in /var/www/domain.com/app/code/core/Mage/Page/Block/Html/Head.php on line 68 
```

**萤火虫报告：**

```
"NetworkError: 404 Not Found - http://www.domain.net/skin/m/1346486879/js/mage/adminhtml/variables.js,/js/mage/adminhtml/wysiwyg/widget.js,/js/lib/flex.js,/js/lib/FABridge.js,/js/mage/adminhtml/flexuploader.js,/js/mage/adminhtml/browser.js,/js/" 
```

我检查了所有的 JS 文件，它们都加载了。最后的项目 /js/ 似乎是问题所在。查看布局 main.xml 似乎它可能是 /js/prototype/window.js

我尝试在模板头中调用 /js/prototype/window.js 但不起作用。日志错误是针对将 JavaScript 添加到页面的方法。

以下是日志向其提供错误消息的代码：

```
/**
 * Add JavaScript file to HEAD entity
 *
 * @param string $name
 * @param string $params
 * @return Mage_Page_Block_Html_Head
 */
public function addJs($name, $params = "")
{
    $this->addItem('js', $name, $params);
    return $this;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T20:54:22.270

我终于找到了问题根源所在的模块。我在自定义模块中看到了这个问题，所以我认为是某些模块导致了这个问题。

首先，我使用以下命令关闭了所有模块：

```
find . -name "*.xml" -print | xargs sed -i 's/true/false/g' 
```

然后我追踪到：Fooman Speedster

希望这可以帮助遇到此问题的其他人。

# android - 从 URL 抓取图片

> ID：12271079
> 
> 赞同：0
> 
> 时间：2012-09-04T20:43:21.093
> 
> 标签：android, android-imageview

我只是想从 URL 中抓取图像并将其显示在图像视图中

**编码：**

```
public class MainActivity extends Activity {

    // declare internal using controls
    private TextView txtUrl;
    private ImageView imgView;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        imgView =(ImageView)findViewById(R.id.imageView1);

        Drawable drawable=null;

            drawable = grabImageFromUrl("http://blog.sptechnolab.com/wp-content/uploads/2011/02/c2.jpg");
            imgView.setImageDrawable(drawable);

    }

    private Drawable grabImageFromUrl(String url)  {
        try {
            return Drawable.createFromStream((InputStream)new URL(url).getContent(), "src");
        } catch (MalformedURLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return null;
    }

} 
```

**我有这个错误：**

```
09-04 20:34:18.712: E/AndroidRuntime(1156): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.test/com.example.test.MainActivity}: android.os.NetworkOnMainThreadException 
```

**感谢您的帮助，请在您的回答中具体说明**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T20:47:59.790

您的应用程序是否配置了 Internet 权限？也就是说，您的应用清单中有以下内容吗？

```
 <uses-permission android:name="android.permission.INTERNET" /> 
```

跟进：此外，错误似乎是说您不应该在应用程序的 UI 线程上进行网络访问。在应用程序的 UI 线程上执行任何长时间阻塞 I\O 通常是一种不好的做法。尝试使用[AnycTask](http://developer.android.com/reference/android/os/AsyncTask.html)，或者您甚至可以查看[LazyList](https://github.com/thest1/LazyList)中的一些代码。

示例：将此作为内部类添加到您的活动中：

```
private class DownloadTask extends AsyncTask<Void, Void, Drawable>{

    private final String mUrl;
    public DownloadTask(String url){
        mUrl = url;
    }

    @Override
    protected Drawable doInBackground(Void... params) {
        try {
            return Drawable.createFromStream((InputStream)new URL(mUrl).getContent(), "src");
        } catch (MalformedURLException e) {
            e.printStackTrace();
            return null;
        } catch (IOException e) {
            e.printStackTrace();
            return null;
        }
    }

    @Override
    protected void onPostExecute(Drawable result){
        ((ImageView)findViewById(R.id.imageView1)).setImageDrawable(result);
    }

} 
```

然后从你的 onCreate 中这样调用它：

```
new DownloadTask(url).execute(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T21:12:27.950

简单的方法是简单地使用[`setImageURI`](http://developer.android.com/reference/android/widget/ImageView.html#setImageURI%28android.net.Uri%29)：

```
imgView = (ImageView)findViewById(R.id.imageView1);
imgView.setImageURI(Uri.parse("http://blog.sptechnolab.com/wp-content/uploads/2011/02/c2.jpg")); 
```

正如文档中所述：

> 这会在 UI 线程上进行位图读取和解码，这可能会导致延迟打嗝。

如果这是一个问题，您可能希望按照`AsyncTask`另一个答案的建议进行解码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T20:46:29.080

也看看堆栈中的这个问题：

[从 URL 显示图像 - 大小和屏幕方向问题](https://stackoverflow.com/questions/3601775/display-image-from-url-sizing-and-screen-orientation-problems)

这可能会有所帮助。

# php - CDetailView 错误：要发布的资产不存在

> ID：12271080
> 
> 赞同：0
> 
> 时间：2012-09-04T20:43:23.433
> 
> 标签：php, yii

我有一个调用 Yii 框架 CDetailView 的视图，如下所示：

```
<?php
$model = new partialUser();
$this->widget('zii.widgets.CDetailView',array(
    'data'=>$model,
    'attributes'=>array(
            'user_id',
            'gender',
            'is_smoker',
            ),
)
); 
?> 
```

我收到的错误是：

```
The asset "C:\wamp\www\wmpn\framework\zii\widgets\assets" to be published does not exist. 
```

视图调用的 partialUser 模型相当简单：

```
public function attributeLabels(){
    return array(
            'user_id'=>'User',
            'gender'=>'Gender',
            'is_smoker'=>'Smoker?',             
            );
} 
```

是否需要包含任何其他属性以确保 CDetailView 正确呈现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T00:01:25.427

该错误与 CDetailView 的 Javascript/图像资产未正确发布到您的资产文件夹有关。看起来 framework/zii/widgets/assets 文件夹不存在（或以某种方式损坏/不可读）。

您 partialView 的东西看起来不错，所以我认为这不是您的问题（或者至少，我认为它不会导致此错误:-)

# android - Android - 如何更改挂载点

> ID：12271082
> 
> 赞同：2
> 
> 时间：2012-09-04T20:43:28.140
> 
> 标签：android

简单的问题：如何更改挂载点？我的 sd-ext 正在安装，`\system\sd`但我需要它安装在android`\system\sd-ext` 上没有，对吗？`\etc\fstab`那么，如何做到这一点呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T09:52:45.080

您对`/system/etc/vold.fstab`.

1.  ***备份您的系统。***

2.  安装根资源管理器（我使用 ES 文件资源管理器）。

3.  以写入权限挂载系统（ES 文件资源管理器在设置中有它）。

4.  ***备份*** `/system/etc/vold.fstab`到 SD 卡和您的 PC。

5.  `/system/etc/vold.fstab`使用文本编辑器打开。

6.  在这里，您可以在第 3 列中找到挂载点：

    dev_mount sdcard **/mnt/sdcard**

7.  在文件中阅读[有关 fstab](http://en.wikipedia.org/wiki/Fstab)和注释的内容。当心。;o)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T21:09:02.890

您无法更改设备的文件结构。您可以使用[Environment.getExternalStorageDirectory()](http://developer.android.com/reference/android/os/Environment.html#getExternalStorageDirectory%28%29)询问 Android SD 卡在哪里。无论制造商是否指定 sdcard 位于 、 或 中，此方法`/sdcard/`都`/mnt/sdcard/`有效`/way/out/in/the/willy/wacks/sdcard/`。

`.../sdcard/Android/data/your.package.name/`您还应该遵守使用[Environment.getExternalStoragePublicDirectory()](http://developer.android.com/reference/android/os/Environment.html#getExternalStoragePublicDirectory%28java.lang.String%29)或只是[Context.getExternalFilesDir()](http://developer.android.com/reference/android/content/Context.html#getExternalFilesDir%28java.lang.String%29)保存 sdcard 数据的 Android 协议。

# android - Android - 广播接收器连接被调用

> ID：12271083
> 
> 赞同：1
> 
> 时间：2012-09-04T20:43:33.837
> 
> 标签：android, database, broadcastreceiver

有谁知道为什么当我单击带有 onclick() 方法的按钮时，会调用广播接收器连接。当连接在关闭到打开或反向之间切换时使用此广播。但是我已经在线并且它被调用了！

有以下错误：

```
09-04 22:35:25.285: E/SqliteDatabaseCpp(8057): CREATE TABLE android_metadata failed
09-04 22:35:25.285: E/SQLiteDatabase(8057): Failed to open the database. closing it.
09-04 22:35:25.285: E/SQLiteDatabase(8057): android.database.sqlite.SQLiteDatabaseLockedException: database is locked
09-04 22:35:25.285: E/SQLiteDatabase(8057):     at android.database.sqlite.SQLiteDatabase.native_setLocale(Native Method)
09-04 22:35:25.285: E/SQLiteDatabase(8057):     at android.database.sqlite.SQLiteDatabase.setLocale_(SQLiteDatabase.java:2211)
09-04 22:35:25.285: E/SQLiteDatabase(8057):     at android.database.sqlite.SQLiteDatabase.setLocale(SQLiteDatabase.java:2199)
09-04 22:35:25.285: E/SQLiteDatabase(8057):     at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:1130)
09-04 22:35:25.285: E/SQLiteDatabase(8057):     at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:1081)
09-04 22:35:25.285: E/SQLiteDatabase(8057):     at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:1167)
09-04 22:35:25.285: E/SQLiteDatabase(8057):     at android.app.ContextImpl.openOrCreateDatabase(ContextImpl.java:833)
09-04 22:35:25.285: E/SQLiteDatabase(8057):     at android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:221)
09-04 22:35:25.285: E/SQLiteDatabase(8057):     at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:157)
09-04 22:35:25.285: E/SQLiteDatabase(8057):     at com.background.Database.open(Database.java:135)
09-04 22:35:25.285: E/SQLiteDatabase(8057):     at com.background.Broadcast_Reciver.onReceive(BroadcastService.java:100)
09-04 22:35:25.285: E/SQLiteDatabase(8057):     at android.app.LoadedApk$ReceiverDispatcher$Args.run(LoadedApk.java:728)
09-04 22:35:25.285: E/SQLiteDatabase(8057):     at android.os.Handler.handleCallback(Handler.java:605)
09-04 22:35:25.285: E/SQLiteDatabase(8057):     at android.os.Handler.dispatchMessage(Handler.java:92)
09-04 22:35:25.285: E/SQLiteDatabase(8057):     at android.os.Looper.loop(Looper.java:137)
09-04 22:35:25.285: E/SQLiteDatabase(8057):     at android.app.ActivityThread.main(ActivityThread.java:4507)
09-04 22:35:25.285: E/SQLiteDatabase(8057):     at java.lang.reflect.Method.invokeNative(Native Method)
09-04 22:35:25.285: E/SQLiteDatabase(8057):     at java.lang.reflect.Method.invoke(Method.java:511)
09-04 22:35:25.285: E/SQLiteDatabase(8057):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
09-04 22:35:25.285: E/SQLiteDatabase(8057):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
09-04 22:35:25.285: E/SQLiteDatabase(8057):     at dalvik.system.NativeStart.main(Native Method)
09-04 22:35:25.285: D/AndroidRuntime(8057): Shutting down VM
09-04 22:35:25.285: W/dalvikvm(8057): threadid=1: thread exiting with uncaught exception (group=0x40c341f8)
09-04 22:35:25.300: E/AndroidRuntime(8057): FATAL EXCEPTION: main
09-04 22:35:25.300: E/AndroidRuntime(8057): java.lang.RuntimeException: Error receiving broadcast Intent { act=android.net.conn.CONNECTIVITY_CHANGE flg=0x10000010 (has extras) } in com.background.Broadcast_Reciver@41724178
09-04 22:35:25.300: E/AndroidRuntime(8057):     at android.app.LoadedApk$ReceiverDispatcher$Args.run(LoadedApk.java:737)
09-04 22:35:25.300: E/AndroidRuntime(8057):     at android.os.Handler.handleCallback(Handler.java:605)
09-04 22:35:25.300: E/AndroidRuntime(8057):     at android.os.Handler.dispatchMessage(Handler.java:92)
09-04 22:35:25.300: E/AndroidRuntime(8057):     at android.os.Looper.loop(Looper.java:137)
09-04 22:35:25.300: E/AndroidRuntime(8057):     at android.app.ActivityThread.main(ActivityThread.java:4507)
09-04 22:35:25.300: E/AndroidRuntime(8057):     at java.lang.reflect.Method.invokeNative(Native Method)
09-04 22:35:25.300: E/AndroidRuntime(8057):     at java.lang.reflect.Method.invoke(Method.java:511)
09-04 22:35:25.300: E/AndroidRuntime(8057):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:790)
09-04 22:35:25.300: E/AndroidRuntime(8057):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:557)
09-04 22:35:25.300: E/AndroidRuntime(8057):     at dalvik.system.NativeStart.main(Native Method)
09-04 22:35:25.300: E/AndroidRuntime(8057): Caused by: android.database.sqlite.SQLiteDatabaseLockedException: database is locked
09-04 22:35:25.300: E/AndroidRuntime(8057):     at android.database.sqlite.SQLiteDatabase.native_setLocale(Native Method)
09-04 22:35:25.300: E/AndroidRuntime(8057):     at android.database.sqlite.SQLiteDatabase.setLocale_(SQLiteDatabase.java:2211)
09-04 22:35:25.300: E/AndroidRuntime(8057):     at android.database.sqlite.SQLiteDatabase.setLocale(SQLiteDatabase.java:2199)
09-04 22:35:25.300: E/AndroidRuntime(8057):     at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:1130)
09-04 22:35:25.300: E/AndroidRuntime(8057):     at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:1081)
09-04 22:35:25.300: E/AndroidRuntime(8057):     at android.database.sqlite.SQLiteDatabase.openOrCreateDatabase(SQLiteDatabase.java:1167)
09-04 22:35:25.300: E/AndroidRuntime(8057):     at android.app.ContextImpl.openOrCreateDatabase(ContextImpl.java:833)
09-04 22:35:25.300: E/AndroidRuntime(8057):     at android.content.ContextWrapper.openOrCreateDatabase(ContextWrapper.java:221)
09-04 22:35:25.300: E/AndroidRuntime(8057):     at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:157)
09-04 22:35:25.300: E/AndroidRuntime(8057):     at com.background.Database.open(Database.java:135)
09-04 22:35:25.300: E/AndroidRuntime(8057):     at com.background.Broadcast_Reciver.onReceive(BroadcastService.java:100)
09-04 22:35:25.300: E/AndroidRuntime(8057):     at android.app.LoadedApk$ReceiverDispatcher$Args.run(LoadedApk.java:728)
09-04 22:35:25.300: E/AndroidRuntime(8057):     ... 9 more 
```

请看一下这个错误：

```
java.lang.RuntimeException: Error receiving broadcast Intent { act=android.net.conn.CONNECTIVITY_CHANGE flg=0x10000010 (has extras) } in com.background.Broadcast_Reciver@41724178 
```

# android - 如何在相对布局内的滚动视图中保持 android 中的图像纵横比？

> ID：12271085
> 
> 赞同：2
> 
> 时间：2012-09-04T20:44:01.293
> 
> 标签：android, image, aspect-ratio

我在横幅（高度 48dp）和页脚（48dp）之间创建了一个带有可滚动图像的 RelativeLayout。在分辨率为 320 x 480 的手机布局上加载尺寸为 767 X 1105 的图像时，图像宽度适合设备宽度，但图像的高度会被拉伸，这会干扰纵横比。请提出解决方案。

下面是布局xml：

```
 <?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/p_1_prastavana_1"
    android:orientation="vertical" >

    <include
        android:id="@+id/banner1"
        android:layout_alignParentTop="true"
        layout="@layout/topheadings" />

    <LinearLayout
        android:id="@+id/footer1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:orientation="vertical" >

        <include layout="@layout/footer" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_above="@id/footer1"
        android:layout_below="@id/banner1" >

        <ScrollView
            android:id="@+id/scroll1"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_weight="1"
            android:fillViewport="false"
            android:orientation="vertical" >

            <ImageSwitcher
                android:id="@+id/content_image"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:adjustViewBounds="true"
                android:scaleType="centerCrop"
                android:src="@drawable/p_1_prastavana_1" >
            </ImageSwitcher>
        </ScrollView>
    </LinearLayout>

</RelativeLayout> 
```

# c - 在 C 中优化对大文件的 I/O

> ID：12271093
> 
> 赞同：1
> 
> 时间：2012-09-04T20:44:43.523
> 
> 标签：c, optimization, io

我编写了一个从大文件（> 3 GB）中读取数据的 C 程序。文件中的每条记录都是一个键值对。每当有查询出现时，程序都会搜索键并检索相应的值，类似地更新值。
查询的速度很快，因此这种技术最终会失败。最坏情况访问时间过长。由于大小的原因，创建内存中的对象将再次成为一个坏主意。
有什么办法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T20:47:57.313

当然，在我看来，包含一系列名称-值对的那种大小的文件正在请求迁移到实际的数据库中；如果做不到这一点，我可能至少会探索内存映射文件的想法，在任何给定时间只有部分驻留......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T20:53:35.553

与其对应的值相比，键有多大？如果它们明显更小，您可以尝试在内存中的键与其值的文件中的相应位置之间创建一个表。

# spring - Tomcat主机配置server.xml

> ID：12271095
> 
> 赞同：1
> 
> 时间：2012-09-04T20:44:46.110
> 
> 标签：spring, tomcat, web.xml, tapestry

我的应用程序中有这个 web.xml。

```
<web-app>
    <filter>
        <filter-name>app</filter-name>
        <filter-class>org.apache.tapestry5.spring.TapestrySpringFilter</filter-class>
    </filter>

    <filter-mapping>
        <filter-name>openSessionInView</filter-name>
        <url-pattern>/app/*</url-pattern>
    </filter-mapping>

    <filter-mapping>
        <filter-name>app</filter-name>
        <url-pattern>/app/*</url-pattern>
    </filter-mapping>

    <filter-mapping>
        <filter-name>app</filter-name>
        <url-pattern>/assets/*</url-pattern>
    </filter-mapping>

     <servlet>
        <servlet-name>jersey-serlvet</servlet-name>
        <servlet-class>
            com.sun.jersey.spi.spring.container.servlet.SpringServlet
        </servlet-class>
        <init-param>
            <param-name>com.sun.jersey.config.property.packages</param-name>
            <param-value>com.package.example.restServer</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>jersey-serlvet</servlet-name>
        <url-pattern>/rest/*</url-pattern>
    </servlet-mapping>
</web-app> 
```

当我在码头使用我的应用程序时工作正常。

Web应用程序：

```
http://localhost/app 
```

Api 休息应用：

```
http://localhost/rest 
```

在生产中我使用tomcat。

```
I want to create http://www.example.com -> http://localhost/app 

and http://rest.example.com -> http://localhost/rest 
```

我的 server.xml 文件：

```
 <Host name="www.example.com" appBase="/usr/local/tomcat/webapps/example">
        <Context path="app" docBase="."/>
      </Host>

      <Host name="rest.example.com" appBase="/usr/local/tomcat/webapps/example">
        <Context path="rest" docBase="."/>
      </Host> 
```

当我使用此配置时，服务器返回 404 错误代码。

我该如何解决？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-26T20:56:03.797

我也遇到了这个错误，只是无法修复几个星期，但不知何故我记得我必须检查 C:\Windows\System32\drivers\etc 中的主机文件。当我检查时，我感到震惊！因为该文件是由我安装在我的机器上的另一个应用程序修改的，并且 12.0.0.1 地址显示不同的 url，而 0.0.0.0 显示本地主机。

如果你也看到类似的东西；要么删除所有内容，只留下“127.0.0.1 localhost”，要么在本地机器上进行测试时使用 0.0.0.0。

我希望这有帮助。

# version-control - 如何在 perforce 中搜索整个历史中的字符串

> ID：12271098
> 
> 赞同：5
> 
> 时间：2012-09-04T20:45:01.027
> 
> 标签：version-control, perforce

问题是：有人告诉我曾经存在过包含字符串“SOMESTRING”的代码，我想得到那个片段。我现在能想到的办法就是打开P4WEB，一个一个打开changelisht，然后按Ctrl-F让浏览器搜索我。但是历史上有数百个更改列表，我不想为了搜索一个字符串而这样做数百次。有没有什么方法可以更快地做到这一点，比如在整个代码历史中搜索某些更改是否包含该字符串？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-04T21:16:04.060

使用 p4 grep 它可以搜索整个历史记录。

# .net - .NET 命名空间子目录

> ID：12271099
> 
> 赞同：2
> 
> 时间：2012-09-04T20:45:09.097
> 
> 标签：.net, vb.net

我有在 Java 中使用包的经验。我现在在 .NET 中使用命名空间。我在网上阅读了一些比较命名空间和包的网页。

假设我有一个名为：Test.TestProgram 的包。如果我导入 Test，那么我可以使用 TestProgram。如果您有一个名为 Test.Test 的命名空间，我对会发生什么感到困惑。如果您导入 Test ，那么它不会导入下面的所有命名空间。为什么是这样？

这是一个简单的问题，虽然我会在 MSDN 上找到答案。我还没有找到答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T20:58:21.570

导入命名空间确实可以让您访问其中的所有内容，当然是在通常的规则范围内。如果您的命名空间跨多个程序集拆分，您的项目不是公共的，或者它们是内部的，那么您将无法自动访问它们。在这种情况下，您将不得不采取额外的步骤，例如引用附加程序集或声明朋友程序集，或使用反射来获取非公共成员。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T20:57:13.337

我在这里发现了这个问题：[Namespace and Sub Namespaces](https://stackoverflow.com/questions/768905/namespace-and-sub-namespaces)。有一个指向 MSDN 的链接并附有解释。

# javascript - 从自身的一个版本中创建新的 javascript 对象

> ID：12271100
> 
> 赞同：1
> 
> 时间：2012-09-04T20:45:20.163
> 
> 标签：javascript

我从这篇博文中分出了一个 JSfiddle（只是为了在周二晚上玩......） [http://boundary.com/blog/2012/07/03/building-node-diagrams-in-html5/](http://boundary.com/blog/2012/07/03/building-node-diagrams-in-html5/)

`new Node()`并且每次双击一个链接时都试图创建一个链接。我的小提琴在这里 [http://jsfiddle.net/joevallender/cGzCe/4/](http://jsfiddle.net/joevallender/cGzCe/4/)

起初我试图不弄乱图书馆，但小提琴包括（在资源中）一个改变的版本，我在其中添加了对 dblclick 事件的支持。

总之，说到点子上了！我正在传递一个要在事件上运行的函数，它在双击时确实有效，`firstNode`但我需要继续将事件重新添加到每个新创建的节点/以某种方式引用 create 函数，这会猜到我们成一个循环。

```
var create = function() {
  var node = new Node({
    title: 'Node',
    stage: stage,
    w: NODE_DIMENSIONS.w,
    h: NODE_DIMENSIONS.h,
    x: 100,
    y: 100
  }).attach();
  new Segment({
    h: 5,
    stage: stage,
    origin: this,
    destination: node
  }).attach();
}
var firstNode = new Node({
    title: 'Node',
    stage: stage,
    w: NODE_DIMENSIONS.w,
    h: NODE_DIMENSIONS.h,
    x: 350,
    y: 50,
    events: {
        dblclick: create
    }
}).attach(); 
```

我觉得我应该寻找修改双击事件的原型函数，但只是有点迷失了。有人 a) 知道我在说什么吗？b) 你能帮忙吗？这不是客户工作或其他任何事情，但我只是想知道！

我已经对重复项进行了快速扫描，但正如您可能从我措辞不当的问题标题中看出的那样，我不完全确定如何表达我的搜索！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T20:55:00.463

完成此操作的最快方法是将`dblclick`事件添加到创建的节点。您应该能够扩展 Node 类以自动执行此操作，但我不确定是否有必要。

```
var create = function() {

  var node = new Node({
    title: 'Node',
    stage: stage,
    w: NODE_DIMENSIONS.w,
    h: NODE_DIMENSIONS.h,
    x: 100,
    y: 100,
    events:{ // add the event to the created node. 
      dblclick: create
    }
  }).attach();

  new Segment({
    h: 5,
    stage: stage,
    origin: this,
    destination: node
  }).attach();

  //nodes.push(node);
} 
```

为了定位新创建的节点，我建议它相对于它们产生的节点：

```
var create = function() {
  var ancestor = $(event.target); // get the element that was double clicked
  var top = ancestor.position().top;  // and its position
  var left = ancestor.position().left;

  var node = new Node({
    title: 'Node',
    stage: stage,
    w: NODE_DIMENSIONS.w,
    h: NODE_DIMENSIONS.h,
    x: left + 100,        //new position relative to the parent.
    y: top + 100,
    events:{
      dblclick: create
    }
  }).attach();

  new Segment({
    h: 5,
    stage: stage,
    origin: this,
    destination: node
  }).attach();

  //nodes.push(node);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T21:06:55.663

您的代码工作正常，但问题是新节点彼此重叠，因为在创建函数中，您的 x 和 y 为 100 以创建新节点。

所以我使用 math.random 为新节点生成随机 x,y 位置

这是[演示](http://jsfiddle.net/cGzCe/7/)

您应该根据需要随机生成新节点的位置和名称

# actionscript-3 - AS3 在 navigateToURL 上将 flashvar 发送给自己

> ID：12271101
> 
> 赞同：2
> 
> 时间：2012-09-04T20:45:21.370
> 
> 标签：actionscript-3, actionscript, var

这就是我处理 html flash vars 的方式：

```
var flashVars:Object = new Object();
    flashVars = this.loaderInfo.parameters;

for (var item:String in flashVars)
{
    switch (item)
    {           
        case "phoneNumber" :
            phoneNum = String(flashVars[item]);
            break;          

    }

} 
```

只有一个 var 有点冗长，但我喜欢灵活地在项目的后期进行更改..

无论如何，编写一个简单地重新加载 swf 的快速重置函数比编写我在 swf 中操作的对象的属性矩阵更有效；因此，我使用以下代码：

```
function reset(){

    var url = stage.loaderInfo.url;
    var request = new URLRequest(url);  
    navigateToURL(request,"_level0");
} 
```

我需要做的是将 flashvars 从 flashVars 对象传递给请求 var，我认为发烧让我过度思考......以前有人做过吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-04T20:55:42.967

您可以将 flashvars 数据对象传递给`data`URLRequest 的属性：

```
var url = stage.loaderInfo.url;
var request = new URLRequest(url);  

request.data = stage.loaderInfo.parameters

navigateToURL(request,"_level0"); 
```

# c# - 从连接字符串中检索密码的正则表达式

> ID：12271103
> 
> 赞同：2
> 
> 时间：2012-09-04T20:45:28.027
> 
> 标签：c#, regex

如何编写正则表达式以从连接字符串中检索密码。

连接字符串是这样的：

```
USER ID=system;PASSWORD = ab;DATA .. 
```

或者

```
USER ID=system;PASSWORD=ab;DATA ... 
```

或者

```
USER ID=system;PASSWORD =ab;DATA... 
```

或者

```
USER ID=system;PASSWORD= ab;DATA ... 
```

尝试了使用 ConnectionStringBuilder 的方法。适用于 SQL Server。但在 Oracle 的情况下，它会抛出此异常：

```
Invalid length for connection option 'Data Source', maximum length is 128. 
```

Oracle 连接字符串：

```
USER ID=sa;PASSWORD=abc;DATA SOURCE="(DESCRIPTION =(ADDRESS = (PROTOCOL = TCP)(HOST = 192.168.1.1)(PORT = 8080))(CONNECT_DATA =(SERVER = DEDICATED)(SERVICE_NAME = Orcl)))" 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-04T20:49:02.217

是否要求您必须使用正则表达式？.NET 具有内置的功能：

```
var sb = new SqlConnectionStringBuilder("USER ID=system;PASSWORD =ab;");
Console.WriteLine(sb.Password); 
```

这可能比使用正则表达式更健壮。字段的规则相当全面，很容易制作一个适用于*大多数*连接字符串的正则表达式，但在某些连接字符串上会失败。有关必须嵌入此类 Regex 的规则列表，请参阅[连接字符串规则。](http://www.connectionstrings.com/Articles/Show/important-rules-for-connection-strings)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T20:48:32.513

正则表达式：

```
.*PASSWORD[ ]*=[ ]*([^;]+) 
```

# javascript - 如果未在 file_dialog_complete_handler 中调用 SWFUpload startUpload() 将失败

> ID：12271105
> 
> 赞同：6
> 
> 时间：2012-09-04T20:45:57.043
> 
> 标签：javascript, swfupload

我正在尝试让 SWFUpload 正确地将图像以及图像必须附带的其他发布数据上传到我的服务器。有一个表格来填写数据，所以在用户单击浏览按钮并选择他的图像文件后，图像不会立即上传。它一直保留在队列中，直到用户单击发送按钮，然后我调用 mySwfUploadInstance.startUpload() 以便开始上传。

但它在函数“callFlash”中的 swfupload.js 的第 452 行惨遭失败：

`Uncaught Call to ReturnUploadStart failed`

在抛出此错误之前捕获的异常如下：

`Object #<HTMLObjectElement> has no method 'CallFunction'`

在以下函数中：

```
SWFUpload.prototype.callFlash = function (functionName, argumentArray) {
    argumentArray = argumentArray || [];

    var movieElement = this.getMovieElement();
    var returnValue, returnString;

    // Flash's method if calling ExternalInterface methods (code adapted from MooTools).
    try {
        returnString = movieElement.CallFunction('<invoke name="' + functionName + '" returntype="javascript">' + __flash__argumentsToXML(argumentArray, 0) + '</invoke>');
        returnValue = eval(returnString);
    } catch (ex) {
        throw "Call to " + functionName + " failed";
    }

    // Unescape file post param values
    if (returnValue != undefined && typeof returnValue.post === "object") {
        returnValue = this.unescapeFilePostParams(returnValue);
    }

    return returnValue;
}; 
```

movieElement 看起来像是一个有效的 Flash 对象。

如果我在初始化 SWFUpload 时传递给 file_dialog_complete_handler 的函数中调用 startUpload()，则不会出现该错误：

```
function ImageFileDialogComplete(numFilesSelected, numFilesQueued)
{
    try
    {
        this.startUpload();
    }
    catch (ex)
    {
        this.debug(ex);
    }
} 
```

我真的需要能够将上传推迟到用户完成表单并单击发送按钮时。

当我从对话框完成处理程序中调用 startUpload() 时，知道 SWFUPload 有什么问题吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-05T04:06:37.017

问题似乎是因为我在调用 startUpload() 之前通过设置 display:none 来隐藏包含 flash 对象的 div。我这样做是为了隐藏表单并显示一个带有进度条的 div。

由于某种原因，flash 对象必须在屏幕上保持可见，否则对其进行的所有调用都会失败。

# list - 删除 KML 文件中的特定标签

> ID：12271109
> 
> 赞同：1
> 
> 时间：2012-09-04T20:46:35.353
> 
> 标签：list, tags, kml

我有一个 KML 文件，它是世界各地的地点列表，其中包含坐标和其他一些属性。一个地方看起来像这样：

```
<Placemark>
<name>Albania - Durrës</name>
<open>0</open>
<visibility>1</visibility>
<description>(Spot ID: 275801) show <![CDATA[<a href="http://www.windguru.cz/int/index.php?go=1&vs=1&sc=275801">forecast</a>]]></description>
<styleUrl>#wgStyle001</styleUrl><Point>
<coordinates>19.489747,41.277806,0</coordinates>
</Point>
<LookAt><range>200000</range><longitude>19.489747</longitude><latitude>41.277806</latitude></LookAt>
</Placemark> 
```

我想删除除地点名称之外的所有内容。所以在这种情况下，这意味着我想删除除了

```
<name>Albania - Durrës</name> 
```

问题是，这个 KML 文件包含 1000 多个这样的地方。手动执行此操作显然不是一个选项，那么如何删除列表中所有项目的名称标签以外的所有标签？我可以为此使用某种程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T03:39:59.127

使用能够理解 XML 文档的专用命令行工具。

一个这样的工具是[xmlstarlet](http://xmlstar.sourceforge.net/overview.php)，它在[此处](http://xmlstar.sourceforge.net/download.php)可用于 Linux、Windows 和 Solaris。

为了解决您的特定问题，我使用了这样的 xmlstarlet 可执行文件`xml.exe`（在 Windows 上）：

```
xml.exe sel -N ns=http://www.opengis.net/kml/2.2 -t -v /ns:kml/ns:Document/ns:Placemark/ns:name places.kml 
```

这会产生以下输出：

```
Albania - Durrës
Second Name
Third Name
...
Final Name 
```

如果您可以保证它`<name>`仅作为 的子级出现`<Placemark>`，那么这个缩写版本将产生相同的结果：

```
xml.exe sel -N ns=http://www.opengis.net/kml/2.2 -t -v //ns:name places.kml 
```

*（这是因为这个较短的版本可以找到所有* `<name>` *元素，无论它们出现在文档中的什么位置。）*

如果您真的想要一个 XML 文档，您需要做一些后处理。下面是一个完整的 XML 文档示例：

```
<?xml version='1.0' encoding='utf-8'?>
<items>
  <item>Albania - Durrës</item>
  <item>Second Name</item>
  <item>Third Name</item>
  <!-- ... -->
  <item>Final Name</item>
</items> 
```

第一行是 XML 声明。它声明了 Unicode 编码`utf-8`。您需要包含此行，以便 XML 处理器识别您的文档包含 Unicode 字符。（就像在都**拉斯**一样。）

**更多：**这是一个增强的 'xmlstarlet' 命令，它将生成上面的 XML 文档：

```
xml.exe sel -N ns=http://www.opengis.net/kml/2.2 -T -t -o "<?xml version='1.0' encoding='utf-8'?>" -n -t -v "'<items>'" -n -t -m //ns:Placemark -v "concat('<item>',ns:name,'</item>')" -n -t -o "</items>" -n places.kml 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T23:46:32.833

如果您使用的是 linux 或类似设备：

```
grep "<name>" your_file.kml > file_with_only_name_tags 
```

在 Windows 上，请参阅[哪些是适用于 Windows 的好 grep 工具？](https://stackoverflow.com/questions/87350/what-are-good-grep-tool-for-windows)

# javascript - Internet Explorer 7 8：jQuery UI 效果只工作一次

> ID：12271112
> 
> 赞同：3
> 
> 时间：2012-09-04T20:46:44.227
> 
> 标签：javascript, jquery, html, jquery-ui, internet-explorer

# 语境

我使用 jQuery UI 效果 (`slide`和`drop`) 打开和关闭幻灯片。

以下代码适用于 Chrome、Firefox 和 IE 9。

在 IE 7 和 8 上，我只能打开和关闭幻灯片一次。幻灯片保持隐藏后。

有什么办法解决这个问题吗？

*   jQuery : `1.8.0`/`1.8.1`
*   jQuery 用户界面：`1.8.23`

# 代码 + [JSFiddle](http://jsfiddle.net/v5aTc/2)

```
// Opens a slide
$('a[data-toggle="slide"]').click(function (e) {
    e.preventDefault(); 

    currentSlide = $(this).attr('href');

    $(currentSlide).show('slide', { direction: 'right' }, _config.effectDuration);
    $('div.modal-backdrop').fadeIn(_config.effectDuration);
});

// Closes the current slide
$('div.modal-backdrop, button.close').click(function () {
    $(currentSlide).hide('drop', { direction: 'right' }, _config.effectDuration);
    $('div.modal-backdrop').fadeOut(_config.effectDuration);
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T21:16:12.100

滑块的内联样式（第二次显示）在 IE8 中如下（来自 IE9 的兼容模式）：

```
zoom: 1; filter:  alpha(opacity=0); display: block; 
```

这意味着将不透明度设置为 0 的过滤器才是罪魁祸首。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T21:50:02.237

在 Henrik Ammer 的帮助下，解决方案：

```
$(currentSlide)
    .show('slide', { direction: 'right' }, _config.effectDuration)
    .css({ '-ms-filter':'progid:DXImageTransform.Microsoft.Alpha(Opacity=100)', 'filter':'alpha(opacity=100)'}); 
```

# javascript - OAuth 和访问令牌

> ID：12271113
> 
> 赞同：0
> 
> 时间：2012-09-04T20:46:51.513
> 
> 标签：javascript, oauth-2.0, instagram

嗨，我正在编写一个非常简单的小 instagram 插件，可让您将照片嵌入到网页中。为了显示用户提要，我需要获取该用户的访问令牌。我已经完成了所有设置，并且可以使用 instagram 提供的访问令牌显示用户提要。

我为了让用户将嵌入添加到那里的网页，我正在显示一些 javascript 供他们在该网站上使用。这段脚本包括 OAuth access_token。这可以/安全吗？如果有人查看用户站点，访问令牌将是纯文本形式。在某些地方，我读到这不是问题，除非您用它显示秘密，而另一个说即使访问令牌本身也不显示访问令牌？有什么建议可以显示令牌吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T11:19:40.620

在进一步阅读时，这似乎是一个坏主意，并且可能允许某人删除评论或随机喜欢照片。回到绘图板。

# c# - 范围的 ActiveDirectory 不使用 DirectorySearcher 更改结果

> ID：12271114
> 
> 赞同：2
> 
> 时间：2012-09-04T20:46:56.513
> 
> 标签：c#, active-directory

所以我基本上是在尝试枚举 AD 的结果，由于某种原因，我无法提取新结果，这意味着即使我告诉它我想要一个额外的范围，它也会不断地拉出前 1500 个结果。

有人可以指出我在哪里犯了错误吗？代码永远不会跳出循环，但更重要的是，即使我说我想要用户 1500-3000，它也会拉动用户 1-1500。

```
uint rangeStep = 1500;   
uint rangeLow = 0;   
uint rangeHigh = rangeLow + (rangeStep - 1);   
bool lastQuery = false;   
bool quitLoop = false;   

do   
{                       
    string attributeWithRange;   
    if (!lastQuery)   
    {   
        attributeWithRange = String.Format("member;Range={0}-{1}", rangeLow, rangeHigh);   
    }   
    else   
    {   
        attributeWithRange = String.Format("member;Range={0}-*", rangeLow);   
    }   
    DirectoryEntry dEntryhighlevel = new DirectoryEntry("LDAP://OU=C,OU=x,DC=h,DC=nt");   
    DirectorySearcher dSeacher = new DirectorySearcher(dEntryhighlevel,"(&(objectClass=user)(memberof=CN=Users,OU=t,OU=s,OU=x,DC=h,DC=nt))",new string[] {attributeWithRange});   
    dSeacher.PropertiesToLoad.Add("givenname");   
    dSeacher.PropertiesToLoad.Add("sn");   
    dSeacher.PropertiesToLoad.Add("samAccountName");   
    dSeacher.PropertiesToLoad.Add("mail");   
    dSeacher.PageSize = 1500;   
    SearchResultCollection resultCollection = resultCollection = dSeacher.FindAll();   
    dSeacher.Dispose();   

    foreach (SearchResult userResults in resultCollection)   
    {   

        string Last_Name = userResults.Properties["sn"][0].ToString();   
        string First_Name = userResults.Properties["givenname"][0].ToString();   
        string userName = userResults.Properties["samAccountName"][0].ToString();   
        string Email_Address = userResults.Properties["mail"][0].ToString();   
        OriginalList.Add(Last_Name + "|" + First_Name + "|" + userName + "|" + Email_Address);   
    }   
    if(resultCollection.Count == 1500)   
    {   
        lastQuery = true;   
        rangeLow = rangeHigh + 1;   
        rangeHigh = rangeLow + (rangeStep - 1);   
    }   
    else   
    {   
        quitLoop = true;   
    }   

}   
while (!quitLoop); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T04:23:24.020

你混淆了两个概念，这就是给你带来麻烦的原因。这是 SO 论坛上的常见问题解答，因此我可能应该在此发表博客以尝试解决问题。

让我先解释一下概念，然后在概念出现后更正代码。

概念一是获取大量对象。当您获取大量对象时，您需要批量请求它们。这通常称为对结果的“分页”。当您执行此操作时，您将返回一个分页 cookie，并且可以在后续搜索中将分页控件传回，以便每次传递都获得“页面价值”的结果。

第二个概念是从单个属性中获取大量值。一个简单的例子是从组中读取成员属性（例如：对该组进行基本搜索）。这称为“远程检索”。在这种搜索模式下，您正在对该对象进行基本搜索以查找大属性（如成员），并在每次通过搜索时询问值的“范围”。

上面的代码混淆了这些概念。您正在执行成员范围逻辑，就像您正在执行范围检索一样，但实际上您正在执行构建为返回大量对象的搜索，例如分页搜索。这就是为什么您一遍又一遍地获得相同结果的原因。

要解决此问题，您需要首先选择一种方法。:) 我建议对组对象进行范围检索，并要求范围中的大成员属性。这将使您获得组中的所有成员。如果你沿着这条路走，你会注意到你不能要求这些值的属性。您获得的唯一值是成员列表，然后您可以搜索它们。如果您选择像上面那样继续使用分页搜索，那么您最终会切换到分页搜索。

如果您选择坚持分页搜索，那么您需要：

*   摆脱 Range 逻辑，以及所有提及 1500
*   将页面大小设置为 1000
*   查找如何使用您的 API 进行分页搜索（使用页面搜索控件）而不是测距

如果您选择范围，您将从这样的 memberOf 搜索切换到以下形式的搜索：a) 范围：基础 b) 过滤器：(objectclass= *) c) 基础 DN：OU=C,OU=x,DC= h,DC=nt d) 属性：member;Range=0-* ...然后您将在获取值范围时将 0 递增（即，对每个后续值范围反复执行此搜索，仅更改0 到后续整数）你会在我的逻辑中注意到的其他细节： - 我没有设置页面大小......你没有进行分页搜索，所以没关系。- 我从来没有在这里硬编码值 1500。没关系。知道甚至计算这一点没有任何价值。关键是你要求 0-* （即全部），你得到了 1500，所以你说 1500- *，然后是 3000-*， 等等。你不需要知道范围大小，只需要知道到目前为止你已经得到的。

我希望这能完全回答它......

根据我在下面的评论，这是进行分页搜索的代码片段（这是您需要使用 System.DirectoryServices.Protocols 命名空间类执行的操作，沿着您在上面开始的逻辑路径（分页搜索，而不是范围检索） ):

```
 string searchFilter = "(&(objectClass=user)(memberof=CN=Users,OU=t,OU=s,OU=x,DC=h,DC=nt))";
        string baseDN = "OU=C,OU=x,DC=h,DC=nt";
        var scope = SearchScope.Subtree;
        var attributeList = new string[] { "givenname", "sn", "samAccountName", "mail" };
        PageResultRequestControl pageSearchControl = new PageResultRequestControl(1000);
        do
        {
            SearchRequest sr = new SearchRequest(baseDN, searchFilter, scope, attributeList);
            sr.Controls.Add(pageSearchControl);

            var directoryResponse = ldapConnection.SendRequest(sr);
            if (directoryResponse.ResultCode != ResultCode.Success)
            {
                // Handle error
            }

            var searchResponse = (SearchResponse)directoryResponse;

            pageSearchControl = null; // Reset!
            foreach (var control in searchResponse.Controls)
            {
                if (control is PageResultResponseControl)
                {
                    var prrc = (PageResultResponseControl)control;
                    if (prrc.Cookie.Length > 0)
                    {
                        pageSearchControl = new PageResultRequestControl(prrc.Cookie);
                    }
                }
            }

            foreach (var entry in searchResponse.Entries)
            {
                // Handle the search result entry
            }
        } while (pageSearchControl != null); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-04T21:05:56.100

您的问题是由循环创建目录搜索器的新对象引起的。每次都会有一个新的对象，它将获取前 1500 条记录。在循环之外创建 searher 的实例并为所有查询使用相同的实例。

# javascript - 拆分 javascript 字符串以获取所需的值

> ID：12271117
> 
> 赞同：0
> 
> 时间：2012-09-04T20:47:21.240
> 
> 标签：javascript, string, split

我想使用`.split()`这个特定的字符串从字符串中提取日期和用户名：

```
var str ='<a href="/user/xxspmxx/profile">XxSPMxX</a> on 08/30/2012'; 
```

我想要`XxSPMxX`一个变量和另一个变量`08/30/2012`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T20:54:40.757

仅使用`split`：

```
var x = str.split('</a> on ');

var name = x[0].split('>')[1];
var date = x[1]; 
```

演示：http: [//jsfiddle.net/Guffa/YUaAT/](http://jsfiddle.net/Guffa/YUaAT/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T20:52:35.840

我认为这不是`split`这项工作的正确工具。试试这个正则表达式：

```
var str ='<a href="/user/xxspmxx/profile">XxSPMxX</a> on 08/30/2012',
    name = str.match(/[^><]+(?=<)/)[0],
    date = str.match(/\d{2}\/\d{2}\/\d{4}/)[0]; 
```

这是小提琴：http: [//jsfiddle.net/5ve7Y/](http://jsfiddle.net/5ve7Y/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T21:01:41.287

另一种方法是使用正则表达式进行匹配，构建一个小数组来获取锚的部分，然后使用子字符串来获取日期。

```
var str = '<a href="/user/xxspmxx/profile">XxSPMxX</a> on 08/30/2012';
var matches = [];
str.replace(/[^<]*(<a href="([^"]+)">([^<]+)<\/a>)/g, function () {
    matches.push(Array.prototype.slice.call(arguments, 1, 4))
});
var anchorText = matches[0][2];
var theDate = str.substring(str.length - 10, str.length);

console.log(anchorText, theDate); 
```

这里的工作示例：http: [//jsfiddle.net/dkA6D/](http://jsfiddle.net/dkA6D/)

# erlang - Erlang：如何从 gen_server 中的 init() 获取结果

> ID：12271119
> 
> 赞同：4
> 
> 时间：2012-09-04T20:47:28.733
> 
> 标签：erlang, gen-server

我的 init() 函数创建 UDP Socket 并将 Socket 值作为状态返回。

```
start() ->
        {ok, ServerPid} = gen_server:start_link(?MODULE, [], []).

%%% gen_server API

init([]) ->
        {ok, Socket} = gen_udp:open(8888, [list, {active,false}]),
        {ok, Socket}. 
```

如何在我的函数 start() 中获取 Socket？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T21:50:24.243

您需要通过`gen_server:call`对新创建的 gen_server 进程进行 a 来获取套接字。例如：

```
start() ->
        {ok, ServerPid} = gen_server:start_link(?MODULE, [], []),
        Socket = gen_server:call(ServerPid, fetch_socket),
        ... Use Socket ... 
```

并在 gen_server 添加如下内容：

```
handle_call(fetch_socket, _From, State) ->
   {reply, State, State}. %% State == Socket 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T05:37:34.043

如果你需要 udp 套接字 int 你的 start 函数，你也可以在 start 函数中创建它，并将它作为参数传递给 start 链接调用。这样您就不必在创建服务器后调用它。

rvirding 指出这将导致启动进程从 udp 套接字接收消息，而不是新生成的服务器。有关更多信息，请参阅评论。从问题中不清楚在 start 方法中究竟需要什么套接字，但请确保这是您想要的行为。

```
start() ->
    {ok, Socket} = gen_udp:open(8888, [list, {active,false}]),
    {ok, ServerPid} = gen_server:start_link(?MODULE, Socket, []).

%%% gen_server API

init(Socket) ->
    {ok, Socket}. 
```

# c++ - 将文本文件中的一组整数按列读入到变量数组中

> ID：12271130
> 
> 赞同：0
> 
> 时间：2012-09-04T20:48:01.480
> 
> 标签：c++, file-read

如果我有一个看起来像这样的文本文件：

4

1 2 3

4 5 6

7 8 9

10 11 12

我想将每一列数字读入一个变量 x、y 和 z。所以读后，z = [3, 6, 9, 12]。

如何解析文本文件以将每列的每一行存储在其自己的变量中？

所以也许将整个文本文件存储为字符串，每行都带有“/n”，然后为每行解析 x=sting[i], y=string[i+1], z=string[i+2]？或类似的东西。

我认为必须有更好的方法来做到这一点，尤其是当 n 非常大的时候。

~ （编辑）顶部的第一个数字（在本例中为 4）决定了文本文件将有多少行。因此，如果我设置 n=4，则有一个 for 循环：for(i=0; i

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T20:53:52.280

一次读取一项，将每一项添加到适当的数组中：

```
std::vector<int> x,y,z;
int xx, yy, zz;
while(std::cin >> xx >> yy >> zz) {
  x.push_back(xx);
  y.push_back(yy);
  z.push_back(zz);
} 
```

* * *

**编辑**：响应添加的要求

```
int n;
if( !( std::cin >> n) )
  return;

std::vector<int> x,y,z;
int xx, yy, zz;
while(n-- && std::cin >> xx >> yy >> zz) {
  x.push_back(xx);
  y.push_back(yy);
  z.push_back(zz);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T21:22:00.370

`n`寻求“通用”解决方案（列数在哪里）。在这种情况下，最好使用向量的向量，而不是单独的向量变量：

```
std::fstream file("file.txt", ios_base::in);
std::vector< std::vector<int> > vars(n, vector<int>(100));
int curret_line = 0;

while (!file.eof())
{
  for (int i=0; i<n; ++i)
  {
    file >> vars[i][current_line];
  }
  ++current_line;
  // if current_line > vars[i].size() you should .resize() the vector
} 
```

编辑：根据下面的评论更新循环

```
int i=0, current_line = 0;
while (file >> vars[i][current_line])
{
  if (i++ == n) 
  {
    i = 0;
    ++current_line;
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T21:29:44.513

这是一种方法，带有一些基本的错误检查。我们会将少于或多于 3 个整数的行视为错误：

```
#include <fstream>
#include <string>
#include <sstream>
#include <cctype>    

std::ifstream file("file.txt");
std::string line;
std::vector<int> x,y,z;

while (std::getline(file, line)) {
    int a, b, c;
    std::istringstream ss(line);

    // read three ints from the stream and see if it succeeds
    if (!(ss >> a >> b >> c)) {
        // error non-int or not enough ints on the line
        break;
    }

    // we read three ints, now we ignore any trailing whitespace
    // characters and see if we reached the end of line
    while (isspace(ss.peek()) ss.ignore();
    if (ss.get() != EOF) {
        // error, there are more characters on the line
        break;
    }

    // everything's fine
    x.push_back(a);
    y.push_back(b);
    z.push_back(c);
} 
```

# php - 如何在 $_SESSIONS 中按唯一 ID 存储购物车项目？

> ID：12271131
> 
> 赞同：1
> 
> 时间：2012-09-04T20:48:03.310
> 
> 标签：php

我正在开发一个购物车应用程序，我需要有关使用 $_SESSION 存储购物车项目的帮助。

**这个概念**

当用户点击添加到购物车时，会存储以下信息：产品 ID 例如 5312、产品名称、产品数量、产品规则（例如颜色：白色、尺寸：中等）

**问题**

问题是当我按项目 ID 将条目保存在 $_SESSION 中时。我想假设以下内容：

*   用户添加 1 件产品 #11，颜色为白色
*   然后用户添加 2 件产品 #11，颜色为蓝色

如果我按项目 ID 保存，则该信息将始终被覆盖，我想让每个呼叫/每个添加到购物车的内容都是唯一的，因为我假设他可能会添加不同尺寸、不同颜色的同一产品。

我怎么能遇到这样的问题？

非常感谢任何想法或输入。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T20:54:12.463

您可以使用 SESSION 变量创建多维数组。

```
$_SESSION['cart']=array(
    $product_id=>array($product_count,$product_options),
    $product_id=>array($product_count,$product_options),
); 
```

或者如果`$product_id`不是唯一的：

```
$_SESSION['cart']=array(
    array($product_id,$product_count,$product_options),
    array($product_id,$product_count,$product_options),
); 
```

有了这样的东西，您可以将唯一的产品 ID 作为数组键，然后存储您需要的计数、选项和其他信息。

另一种选择是为您的购物车创建一个表，然后让会话存储购物车 ID。然后，您只需检查 mysql 表以获取您的购物车信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T20:50:59.313

您可以使用产品 ID 作为键来存储数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T20:54:58.253

与其在会话中存储产品，不如存储购物车项目对象。购物车项目对象将引用产品（产品 ID）以及该项目的任何属性（颜色、数量、必要时的不同价格等）。为每个购物车项目分配一个随机 ID，您永远不会遇到覆盖问题。

# database - 获取用户机器信息

> ID：12271134
> 
> 赞同：0
> 
> 时间：2012-09-04T20:48:05.937
> 
> 标签：database, reporting, scalability

有什么方法可以检测最终用户的机器配置是什么？我需要的两个主要信息是 Processor 、 memory 。我知道网络有限制，所以这可能是不可能的。

有没有可以做到这一点的activex插件？我看到惠普有办法做到这一点。它安装了一个 activex 插件来执行此操作[http://h20239.www2.hp.com/techcenter/HP_SystemCheck/hp_syscheck.htm](http://h20239.www2.hp.com/techcenter/HP_SystemCheck/hp_syscheck.htm)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T21:22:22.670

`Flash`，`Java`并且`Silverlight`可以帮助您检索许多系统特定的信息和配置。

以下是通过和 各自`system level actions`在用户设备上执行的最可能方式。`Web Browser``plugin`

*   对于 Flash（动作脚本 3）：[系统](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/system/System.html%22zxc%22)和[功能](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/system/Capabilities.html)。

*   Silverlight：[系统信息。从登记处](http://www.c-sharpcorner.com/uploadfile/dpatra/system-information-from-registry-in-silverlight-4/)

*   Java：[Java 小程序可以检索的可能信息](https://stackoverflow.com/questions/1011063/how-many-hardware-details-can-a-java-applet-discover)

表示感谢并查看[此处](https://stackoverflow.com/questions/8420636/access-hardware-information-from-web-browser)`Zakaria`给出的相同答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T20:52:53.050

SQL 服务器查询：

```
USE [master];
GO
select 
    cpu_count,
    hyperthread_ratio,
    physical_memory_in_bytes / 1048576 as 'mem_MB',
    virtual_memory_in_bytes / 1048576 as 'virtual_mem_MB',
    max_workers_count,
    os_error_mode,
    os_priority_class
from 
    sys.dm_os_sys_info 
```

# c - 在C中使用冒泡排序到5个数字的数组

> ID：12271138
> 
> 赞同：0
> 
> 时间：2012-09-04T20:48:19.230
> 
> 标签：c, arrays, sorting, bubble-sort

我需要对一个包含 5 个数字的数组进行排序，这就是我所拥有的。我提示输入，然后使用冒泡排序对日期进行排序，然后打印数组。但是，当我运行程序时，输出没有排序，甚至与输入不同。

```
void main() {
    printf("Please enter five integers:\n");
    printf("First Number\n");
    scanf("%d", &numArray[0]);
    printf("Second Number\n");
    scanf("%d", &numArray[1]);
    printf("Third Number\n");
    scanf("%d", &numArray[2]);
    printf("Fourth Number\n");
    scanf("%d", &numArray[3]);
    printf("Fifth Number\n");
    scanf("%d", &numArray[4]);

    for (j=0; j<=5; ++j) {
        if (numArray[j] > numArray[j+1]) {
            temp = numArray[j];
            numArray[j] = numArray[j+1];
            numArray[j+1] = temp;
        }
    }

    for(int j = 0; j < 5; j++) {
        printf("%d ", numArray[j]);
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T20:51:08.680

您的循环无效（它结束了一个），并且您的排序仅包含一个循环；冒泡排序包含两个循环：

```
for (i = 0; i < SIZE-1; i++) {
    for (j = i+1; j < SIZE; j++) {
        if (val[i] > val[j]) swap(...);
    }
} 
```

# python - 平滑绘制 2d 中的散点

> ID：12271140
> 
> 赞同：4
> 
> 时间：2012-09-04T20:48:23.667
> 
> 标签：python, matplotlib, raytracing

**主要问题：**

我写了一个小的光线追踪代码。它被称为前向光线追踪，因此光线实际上是在源头创建的，传播到唯一的镜子并被反射。随后，我计算每条射线与我选择的平面的交点，我称之为检测器。我在检测器上得到的，将每个命中打印为一个像素，是（x，y）的散点图。像这个：

```
import matplotlib.pyplot as plt
import numpy as np
import random

x = np.zeros(1000)
y = np.zeros(1000)
for i in range(len(x)):
    x[i] = random.random()
    y[i] = random.random()

plt.plot(x,y,'k,')
plt.show() 
```

现在我正在寻找一种将命中的密度分布（强度）表示为平滑图像的方法，就像[这个](http://matplotlib.sourceforge.net/_images/image_demo.png)一样。

所以每个像素的灰度应该与周围patch的密度相对应。但是看起来我需要的一切都是针对像 z=f(x,y) 这样的 3d 数组。

还尝试了 hexbin()，但它不够平滑，对于非常小的垃圾箱，它变得太慢，而且只类似于我所拥有的。

那么有什么我可以使用的吗？

**次要问题：**

我不知何故需要添加另一个维度，因为我对入射光线的平行度感兴趣。一种选择是将其定义如下：

1.  计算 a + a*b，其中：

a = 入射光线与探测器法线之间的夹角

b = 入射光线与 yz 平面之间的角度（光线大致平行于该平面传播）

1.  这个量的平均值

2.  与每次命中的平均值的偏差

我想通过在灰度中添加颜色来将这两个信息合并到一个图中。这可行吗？

我是编程新手，任何提示、解释或替代想法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T03:27:04.287

我认为您无法像您提到的那样制作 2d 图像......您需要第 3 维来描述 (x, y) 处的信号强度。这只是一个快速而肮脏的例子：

```
import matplotlib.pyplot as plt
import matplotlib.cm as cm
import numpy as np

# just creating random data with a bunch of 2d gaussians

def gauss2d(x, y, a, x0, y0, sx, sy):
    return a * (np.exp(-((x - x0) / sx)**2 / 2.)
                * np.exp(-((y - y0) / sy)**2 / 2.))

imsize = 1000
im = np.zeros((imsize, imsize), dtype=float)

ng = 50
x0s = imsize * np.random.random(ng)
y0s = imsize * np.random.random(ng)
sxs = 100\. * np.random.random(ng)
sys = sxs #100\. * np.random.random(ng)
amps = 100 + 100 * np.random.random(ng)

for x0, y0, sx, sy, amp in zip(x0s, y0s, sxs, sys, amps):
    nsig = 5.
    xlo, xhi = int(x0 - nsig * sx), int(x0 + nsig * sx)
    ylo, yhi = int(y0 - nsig * sy), int(y0 + nsig * sy)

    xlo = xlo if xlo >= 0 else 0
    xhi = xhi if xhi <= imsize else imsize
    ylo = ylo if ylo >= 0 else 0
    yhi = yhi if yhi <= imsize else imsize

    nx = xhi - xlo
    ny = yhi - ylo

    imx = np.tile(np.arange(xlo, xhi, 1), ny).reshape((ny, nx))
    imy = np.tile(np.arange(ylo, yhi, 1), nx).reshape((nx, ny)).transpose()

    im[ylo:yhi, xlo:xhi] += gauss2d(imx, imy, amp, x0, y0, sx, sy)

plt.imshow(im, cmap=cm.gray)

plt.show() 
```

基本上，您将数据视为来自 CCD 的 2d 图像，每个像素都包含信号强度。

（我实际上会补充一点，根据您要突出显示的数据中的内容，您可能想要使用散点图，但要改变点的大小/不透明度来显示您的信息……这实际上取决于您要实现的目标。）

我实际上并不完全了解您想从光线强度中绘制什么，但是如果您正在拍摄以某个角度撞击图像的光线，则需要计算光线在平面上的投影强度。这与您如何使用 Matplotlib 绘图是一个不同的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T12:52:45.870

我想您的主要问题涉及两个主要步骤：首先，计算散点的密度函数，然后实际绘制它。所以，如果你有一个函数 z = f(x,y)，其中 z 是点 (x,y) 的估计密度，你可以使用你已经研究过的 matplotlib 方法。

至于第一步，我建议看一下[scipy.stats.kde](http://www.scipy.org/doc/api_docs/SciPy.stats.kde.gaussian_kde.html)中的内核密度估计例程。基本上你会

```
density = scipy.stats.gaussian_kde(scatterpoints) 
```

然后可以评估每个点的密度

```
z = density([x,y]) 
```

# android - 媒体播放器停止

> ID：12271143
> 
> 赞同：0
> 
> 时间：2012-09-04T20:48:33.980
> 
> 标签：android, media-player

单击返回按钮时如何停止播放音频？或退出它在后台继续播放的应用程序

我让应用程序首先有 2 个活动主要欢迎活动您单击开始按钮显示第二个活动，其中包含多个图像的网格视图，当单击图像开始播放不同的声音时，但是当单击返回按钮切换到主要活动但声音继续播放！如果点击主页也继续玩？如何阻止它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T20:53:35.110

`onPause()`告诉它在 Activity中停止。

```
@Override
public void onPause() {
    super.onPause();

    if (player.isPlaying()) {
        player.stop();
    }
} 
```

# msbuild - TeamCity 构建参数：重用具有多个值的复选框？

> ID：12271149
> 
> 赞同：1
> 
> 时间：2012-09-04T20:48:49.540
> 
> 标签：msbuild, preprocessor, teamcity

对于我的团队城市配置，我有一个带有潜在预处理器宏定义的构建参数。这是一个具有此值的复选框：`/p:DefineConstants=IncludeFleetSimulation`. 显然，它具有该值，因此我可以轻松地将其添加到我的 MSBuild 参数中。但是，我也想更改输出文件名。我不想`/p:...`在文件名中。相反，我想要“IFS”。有没有办法通过 TeamCity 参数解析有条件地插入一些东西？我正在想象这样的事情：`%IFS% != "" ? "_IFS" : ""%`. 我如何在 TeamCity 中实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T21:20:07.410

我最终编写了一个 Nant 脚本步骤来实现这一点：

```
 <project name="RenameFilesBasedOnParamters" default="Rename">
     <target name="Rename">
     <property name="IncludeFleetSimulation" value="%IncludeFleetSimulation%" />
     <property name="currentDirectory" value="%system.teamcity.build.workingDir%" />
      <if test="${IncludeFleetSimulation != ''}">
       <foreach item="File" property="file">
        <in>
         <items basedir="${currentDirectory}">
          <include name="*%build.number%_%build.vcs.number%*" />
         </items>
        </in>
        <do>
         <move file="${file}"
               tofile="${currentDirectory + '\' + 
               path::get-file-name-without-extension(file) + 
               '_FS' + path::get-extension(file)}" />  
        </do>
       </foreach>  
      </if>
    ... 
```

# linux - gnuplot 基本绘图问题

> ID：12271150
> 
> 赞同：0
> 
> 时间：2012-09-04T20:48:52.637
> 
> 标签：linux, unix, gnuplot

我一直在尝试使用 GNUPLOT 绘制我的数据集，但到目前为止，在生成成功的图表方面一直很顺利。我的输入文件由如下所示的数据组成。

# xy

12 10.1.1.5

56 10.2.3.1

12 10.4.1.4

X 列中的所有内容是 Y 列中的 IP 地址在一个小时的时间范围内被访问的次数。我希望将具有 IP 地址的 y 列作为标签，将 X 列作为我要表示的数据。我非常感谢任何人可以提供的任何帮助，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T21:11:26.220

这很简单：

```
 plot 'yourdatafile' u 1:xtic(2) 
```

应该做的伎俩。

# path - 相对路径不适用于路径

> ID：12271152
> 
> 赞同：9
> 
> 时间：2012-09-04T20:48:54.893
> 
> 标签：path, requirejs, relative-path

我在requirejs中的相对路径有问题。

首先，我有以下结构。我正在使用虚拟主机（os.com）运行它，路径是 os.com/test

![在此处输入图像描述](../Images/c51f5ce99969d0536b512fe1c36a126c.png)

**索引.html**

```
<script data-main="config" src="require.js"></script> 
```

**配置.js**

```
require.config({

  baseUrl: "./apps",
  deps: ['ui'],
  paths: {
    ui: 'ui/ui',
    system: 'system/system',
    core: 'core/core'
  }

}); 
```

**ui.js**

```
define(['./class/menuBuilder',"./class/window"], function(menuBuilder, windowBuilder){

    return {
        menuBuilder: menuBuilder,
        windowBuilder: windowBuilder
    }

}); 
```

当我运行它时，我收到以下错误。

```
GET http://os.com/test/apps/class/menuBuilder.js 404 (Not Found)
GET http://os.com/test/apps/class/window.js 404 (Not Found) 
```

如果我从'paths'属性中取出'ui'属性，然后将deps更改为['ui/ui']，它可以工作，但我想使用路径。

**更改了 config.js**

```
require.config({

  baseUrl: "./apps",
  deps: ['ui/ui'],
  paths: {
    system: 'system/system',
    core: 'core/core'
  }

}); 
```

如何更改我的配置以使路径和相对路径一起工作？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-21T22:19:53.053

我有类似的问题。我的配置中没有 deps:'ui' 部分，只有路径设置，但相对模块引用（'./class/menuBuilder'）仍然无法从加载路径的模块（“ui：'ui /ui'") 并且将使用 baseUrl 代替。为了解决这个问题，我将“ui”定义为一个包：

```
require.config({

  baseUrl: "./apps",
  deps: ['ui'],
  paths: {
    system: 'system/system',
    core: 'core/core'
  },
  packages : [
    { 
        name: 'ui',
        location : 'ui',
        main : 'ui'
    },
  ]

}); 
```

在这种情况下， require 将正确加载相对路径的模块。

这是一个有用的帖子：[RequireJS 模块/包的相对路径](https://stackoverflow.com/questions/9302284/relative-paths-with-requirejs-modules-packages)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-27T12:00:48.097

这里的解决方案是使用地图配置，而不是路径配置。路径配置只能用于文件夹，而不是模块本身。地图配置适用于各个模块。

所以试试：

```
require.config({
  map: {
    '*': {
      'ui': 'ui/ui'
    }
  }
}); 
```

# java - 在android中执行http不起作用

> ID：12271154
> 
> 赞同：0
> 
> 时间：2012-09-04T20:49:05.077
> 
> 标签：java, android, web-services, http

```
try {
            HttpClient client = new DefaultHttpClient();
            HttpGet request = new HttpGet("http://www.google.com");
            client.execute(request);//it fails at this line
            Log.e("yo", "yo");
        } catch (Exception e) {} 
```

有没有人解决这个问题，因为我遇到了同样的问题。我的设备连接到同一个网络，在浏览器中粘贴 URL 有效，但使用 HTTP 无效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T07:23:25.383

试试 HttpPost 方法

在 manfiest 文件中声明**INTERNET 许可**

```
httpclient=new DefaultHttpClient();
     HttpPost httppost=new HttpPost(URL);

     HttpResponse res = null;
        try {
            res = httpclient.execute(httppost);
            System.out.println("asa "+res);

        } catch (ClientProtocolException e1) {
            e1.printStackTrace();
        } catch (IOException e1) {
            e1.printStackTrace();
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T21:13:25.803

您是否忘记添加

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

到您的 AndroidManifest.xml？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T07:42:01.737

您是否在与 UI 相同的线程上运行它？您必须为任何网络连接使用单独的线程以防止 UI 阻塞。在这种情况下，您需要使用 AsyncTask；显然，需要 android Internet 权限。

# javascript - iFrame 父节点

> ID：12271156
> 
> 赞同：0
> 
> 时间：2012-09-04T20:49:19.257
> 
> 标签：javascript, jquery, iframe, parent

当我尝试访问 iframe 的父节点时。我得到一个未定义的值返回。

```
var a = window.frames;

for(i = 0; i < a.length; i++){
    var val = a[i].document.getElementById("image_url").value;

    if(val != ""){
        a[i].parentNode //This doesn't return the parent div that the iframe is nested in
    }
}

<div>
    <iframe src="uploader.php"></iframe>
</div> 
```

如何访问同一页面上的 iframe 元素的父节点

编辑：我通过访问 iframe 解决了这个问题

```
document.getElementsByTagName("iframe"); 
```

代替

```
window.frames; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T21:02:47.410

使用 jQuery 的[$.closest()](http://api.jquery.com/closest/)您可以执行以下操作：

```
$('iframe').each(function(){
    var $el = $('#image_url', this).closest('div');
    console.log($el);
}); 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-03T02:36:52.727

您可以使用 frameElement.parentNode

# oop - 好习惯——oop设计

> ID：12271157
> 
> 赞同：0
> 
> 时间：2012-09-04T20:49:37.113
> 
> 标签：oop

很少有子类扩展我的抽象父类。子类几乎没有相同的属性，例如日期。所以我的问题是我应该在我的抽象类中还是在每个子类中声明这些属性（日期）的设置器和获取器？在一个子类中，它是另一个“日期”中的“发布日期”，所以我应该将它全部“投射”到日期吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T20:57:56.493

要看。

许多人建议使用组合（即：Has a）而不是继承（即：Is a）。大多数时候，这取决于您想要实现的目标。两种方法各有利弊。

如果您想将这些属性放到基类中，那么所有类都具有这些属性，但您是说并非所有类都具有这些属性。作为一个好的设计，如果你没有完全填充一个对象，也就是说，你将一些字段留空或为空，那是不好的。您的对象应该被完全填充。

所以你可以做的是，你可以将属性包装成行为（另一个对象）并将它们委托给想要使用它们的类。

使用你的直觉，无论哪种感觉正确，并简化你的生活。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T20:55:48.313

如果您说所有子类都出于相同目的使用相同的字段，那么请务必将其添加到父类中并为自己节省一些重复。如果您说子类都出于不同目的使用“日期”字段（您提到它们被称为不同的名称），那么您可能应该在子类本身中声明它并且不要使用超类字段超过1 目的（否则从长远来看这将非常令人困惑）。

# perl - Net::SSH::Expect 1.09 中是否有“collect_exit_code”的等价物

> ID：12271158
> 
> 赞同：1
> 
> 时间：2012-09-04T20:49:37.207
> 
> 标签：perl, perl-module, cgi-bin, perlnetssh

我遇到了这个链接：[Exit status code for Expect script called from Bash](https://stackoverflow.com/questions/1302113/exit-status-code-for-expect-script-called-from-bash)但它对我没有帮助。当我希望从远程运行的命令中获取退出状态代码时，我遇到了 Net::SSH::Expect 0.08 的 cpan 文档，其中包含“collect_exit_code”和“last_exit_code”方法，这正是我想要的*今天*使用，但是，运行 1.09 时我无法找到合适的替代品。

我想保持简单，例如：

```
$ssh_devel_exp->collect_exit_code(1);
$ssh_devel_exp->send("sudo make");
if ($ssh_devel_exp->last_exit_code()) { etc. and so forth... }; 
```

但是，在没有类似这些方法的情况下，通过 Net Expect 运行命令时，我想不出一种简单的方法来获取退出状态。

我不相信切换到 Fabric 是解决这个问题的方法；这是一个 perl 应用程序，我需要坚持使用 Perl。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T10:13:51.560

您是否尝试调用底层的期望对象？

```
$ssh_devel_exp->{expect}->collect_exit_code(1);
$ssh_devel_exp->send("sudo make");
if ($ssh_devel_exp->{expect}->last_exit_code()) { etc. and so forth... }; 
```

如果没有其他帮助，您可以创建一个小的 shell 脚本来执行您的命令并在 stderr 上报告退出状态。

# google-app-engine - 尝试复制 App Engine 应用程序：“开发人员不拥有被分叉的应用程序 ID”

> ID：12271159
> 
> 赞同：0
> 
> 时间：2012-09-04T20:49:40.807
> 
> 标签：google-app-engine

尝试复制 App Engine 应用程序时，我收到错误“开发人员不拥有被分叉的应用程序 ID”。我按照[此处](https://developers.google.com/appengine/docs/adminconsole/migration)的说明将应用程序从主/从数据存储迁移到 HRD。

我绝对拥有该应用程序；我是唯一被列为所有者的人，并且我设法复制了我拥有的其他应用程序。无论我登录多个帐户还是仅一个帐户，都会发生这种情况。

这里可能出了什么问题？

编辑：我在这里打开了一个关于这个的问题：[http ://code.google.com/p/googleappengine/issues/detail?id=8106](http://code.google.com/p/googleappengine/issues/detail?id=8106)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T16:52:30.337

由于此问题看起来特定于此特定应用程序，因此您应该打开[一个新的生产问题](http://code.google.com/p/googleappengine/issues/entry?template=Production%20issue)。

不要忘记`application id`在问题中包含您的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T13:02:05.133

App Engine 团队现在提供了一种解决方法，即授予另一个 @gmail.com 帐户的所有者权限并从那里进行复制。它对我有用！

# sencha-touch-2 - 每次 Sencha 2 应用程序执行 Ajax 请求时显示的 Ajax 加载程序 gif

> ID：12271160
> 
> 赞同：0
> 
> 时间：2012-09-04T20:49:44.083
> 
> 标签：sencha-touch-2

每次我的 Sencha 2 应用程序执行 ajax 请求时，在屏幕中心添加 ajax 加载程序 gif 图像的最聪明的方法是什么？应该是某种代码片段，它应该检查跟踪所有打开的 Ajax 请求的内部 Javascript 计数器是否大于 0，从而显示加载程序 gif

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T23:58:09.947

通常我只是将下面的代码放在 ajax 请求之前。

```
Ext.Viewport.add({
    masked: {
        xtype: 'loadmask',
        message: 'A message..',
        indicator: false
    }
}); 
```

您可能希望扩展 ajax 类并将其添加到那里以使其适用于每个 ajax 请求。

# java - 用于管理多个 Web 应用程序配置的工具

> ID：12271161
> 
> 赞同：2
> 
> 时间：2012-09-04T20:49:48.970
> 
> 标签：java, web-applications, configuration

我们有几个相互通信的基于 Spring MVC 和 Metro 的应用程序。它们的设置当前存储在多个属性文件中，应用程序可以通过`PropertyPlaceholderConfigurer`. 这不方便，因为配置是分散的，并且其中的某些部分在服务器之间重复。目前，我们将创建另一个 Web 应用程序，该应用程序对所有其他应用程序都是已知的，它保留整个配置并提供一个接口，允许将这些属性作为键值对请求。有没有这种开箱即用的解决方案？或者，可能有更好的方法来解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T21:32:25.083

您需要热配置，还是只是在启动时？如果它只是在启动时，我会通过某种版本控制系统（如 svn）来完成。所以当应用程序启动时，它会调用 svn 来获取最新的配置。

# java - 在 DBCP 中启用 PreparedStatement 池

> ID：12271164
> 
> 赞同：3
> 
> 时间：2012-09-04T20:50:13.820
> 
> 标签：java, prepared-statement, apache-commons-dbcp

我想知道如何设置 dbcp 以使用池 PreparedStatements。我似乎可以使用连接池，但在准备好的语句的示例中找不到太多。有一个[相关的问题](https://stackoverflow.com/questions/281744/prepared-statement-pooling-in-dbcp)涉及*使用*PreparedStatement 池，但首先跳过了设置它的细节。显然它涉及将 a 传递[`KeyedObjectPoolFactory`](http://commons.apache.org/pool/apidocs/org/apache/commons/pool/KeyedObjectPoolFactory.html)给[`PoolableConnectionFactory`](http://commons.apache.org/dbcp/apidocs/org/apache/commons/dbcp/PoolableConnectionFactory.html)，但我完全不清楚我应该使用哪个实现或如何创建*其*构造函数所需的对象。

这是我当前设置连接池的方式：

```
private PoolingDataSource setupDataSource() {
    ConnectionFactory connection_factory = new ConnectionFactoryImpl();
    ObjectPool connection_pool = new GenericObjectPool();
    PoolableConnectionFactory poolable_connection_factory = new PoolableConnectionFactory(connection_factory, connection_pool, null, "select 1", false, true);
    PoolingDataSource data_source = new PoolingDataSource(connection_pool);

    return data_source;
}

private static class ConnectionFactoryImpl implements ConnectionFactory {
    private Properties connection_properties = new Properties();

    public ConnectionFactoryImpl() {
        connection_properties.put("user", USER);
        connection_properties.put("password", PASSWORD);
        connection_properties.put("zeroDateTimeBehavior", "convertToNull");
        connection_properties.put("jdbcCompliantTruncation", "false");
    }

    @Override
    public Connection createConnection() throws SQLException {
        return DriverManager.getConnection("jdbc:mysql://" + SERVER + "/" + DEFAULT_DB, connection_properties);
    }
} 
```

这`PoolableConnectionFactory`是控制准备好的语句池的第三个参数，但我不确定在那里使用什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T21:22:31.790

如果您使用的是 spring，它有一个助手可以设置它。但是，默认情况下禁用语句池，因此您需要在以下位置添加最后 2 个设置：

```
<bean class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close" id="dataSource">
    <property name="driverClassName" value="${database.driverClassName}"/>
    <property name="url" value="${database.url}"/>
    <property name="username" value="${database.username}"/>
    <property name="password" value="${database.password}"/>
    <property name="validationQuery" value="SELECT 1 FROM DUAL"/>
    <property name="testOnBorrow" value="true"/>
    <property name="initialSize" value="1"/>
    <property name="minIdle" value="1"/>
    <property name="maxActive" value="10"/>
    <property name="poolPreparedStatements" value="true"/>
    <property name="maxOpenPreparedStatements" value="20"/>
</bean> 
```

以下是为独立应用程序创建 BasicDataSource 的示例： [http ://www.kodejava.org/examples/803.html](http://www.kodejava.org/examples/803.html)

完成后，请执行以下操作：

```
dataSource.setPoolPreparedStatements(true)
dataSource.setMaxOpenPreparedStatements(20); 
```

# regex - Vim - 如何在所有缓冲区中运行非正常模式命令？

> ID：12271166
> 
> 赞同：5
> 
> 时间：2012-09-04T20:50:35.083
> 
> 标签：regex, vim, vi, replace

我需要`:perldo s/assigned_to(?!_member|_role)/assigned_to_member/g`在所有打开的缓冲区中运行此命令。我正在使用`:perldo`，因为内置的 vim 正则表达式（即`%s/foo/bar/g`）由于某种原因不能与我的负前瞻一起使用。

通过我的研究，我找到了`:bufdo`and`:execute "normal <foo>"`命令，但我还没有弄清楚如何组合它们。

有谁知道我如何能够在所有打开的缓冲区上运行 perldo 命令？谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-04T20:58:07.647

有什么问题：

```
:bufdo! perldo s/assigned_to(?!_member|_role)/assigned_to_member/g 
```

# r - 线性最小二乘拟合

> ID：12271173
> 
> 赞同：0
> 
> 时间：2012-09-04T20:51:03.067
> 
> 标签：r, linear-regression, least-squares, lm

东风

```
 times a   b   s  ex  
1   0 59 140 1e-4  1
2  20 59 140 1e-4  0 
3  40 59 140 1e-4  0
4  60 59 140 1e-4  2
5 120 59 140 1e-4 20
6 180 59 140 1e-4 30
7 240 59 140 1e-4 31
8 360 59 140 1e-4 37
9   0 60 140 1e-4  0
10 20 60 140 1e-4  0
11 40 60 140 1e-4  0
12 60 60 140 1e-4  0
13 120 60 140 1e-4 3300
14 180 60 140 1e-4 6600
15 240 60 140 1e-4 7700
16 360 60 140 1e-4 7700
# dput(DF) 
structure(list(times = c(0, 20, 40, 60, 120, 180, 240, 360, 0, 
20, 40, 60, 120, 180, 240, 360), a = c(59, 59, 59, 59, 59, 59, 
59, 59, 60, 60, 60, 60, 60, 60, 60, 60), b = c(140, 140, 140, 
140, 140, 140, 140, 140, 140, 140, 140, 140, 140, 140, 140, 140
), s = c(1e-04, 1e-04, 1e-04, 1e-04, 1e-04, 1e-04, 1e-04, 1e-04, 
1e-04, 1e-04, 1e-04, 1e-04, 1e-04, 1e-04, 1e-04, 1e-04), ex = c(1, 
0, 0, 2, 20, 30, 31, 37, 0, 0, 0, 0, 3300, 6600, 7700, 7700)), .Names = c("times", 
"a", "b", "s", "ex"), row.names = c(NA, 16L), class = "data.frame") 
```

DF2

```
prime    times       mean     
 g1          0  1.0000000 
 g1         20  0.7202642 
 g1         40  0.8000305 
 g1         60  1.7430986 
 g1        120 16.5172242 
 g1        180 25.6521268         
 g1        240 33.9140056 
 g1        360 34.5735984 
 #dput(DF2)
 structure(list(times = c(0, 20, 40, 60, 120, 180, 240, 360), 
mean = c(1, 0.7202642, 0.8000305, 1.7430986, 16.5172242, 
25.6521268, 33.9140056, 34.5735984)), .Names = c("times", 
"mean"), row.names = c(NA, -8L), class = "data.frame") 
```

DF 是一个更大的数据框的示例，它实际上具有数百个“a”、“b”和“s”值的组合，这些组合会产生不同的“ex”值。我想要做的是找到“a”、“b”和“s”的组合，其“ex”值（DF）在等效“时间”最适合“平均值”（DF2）。该拟合将一次比较 8 个值（即，times == c(0,20,40,60,120,180,240,360)。

在此示例中，我希望 59、140 和 1e-4 用于“a”、“b”和“s”值，因为这些“ex”值 (DF) 最适合“平均值”值 (DF2) .

我想要那些“ex”（DF）最适合“mean”（DF2）的值的“a”、“b”和“s”值

因为我想要“a”、“b”和“s”值的一种可能组合，所以最好使用线性最小二乘拟合模型。我将一次比较 8 个值——其中 'times' == 0 - 360。我不希望 'a'、'b' 和 's' 值最适合每个单独的时间点。我想要所有 8 个“ex”（DF）最适合所有 8 个“平均”值（DF2）的“a”、“b”和“s”值，这就是我需要帮助的地方。

我从未使用过线性最小二乘拟合，但我认为我正在尝试做的事情是可能的。

```
 lm(DF2$mean ~ DF$ex,....) # i'm not sure if I should combine the two 
      # data frames first then use that as my data argument, then 
      # where I would include 'times' as the point of comparison, 
      # if that would be used in subset? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T21:27:41.847

听起来线性模型不是您在这里需要的。在最好的情况下，线性模型将为您提供不同`a/b/s`配置的线性组合，而不是单一的最佳匹配组合。因此，该名称中的术语*线性*。

我认为您可以保证 的`times`值与 的值`DF`匹配。第一步可能是变成一个数据框，其中每个组合只有一行，不同的值存储为矩阵的列。然后对于每一行，您需要从值中减去这些值，将这些差异平方，然后将它们相加，以计算该行的单个平方误差。然后只需选择具有最小值的行。`times``DF2``DF``a/b/s``ex``ex``DF2$mean`

上述解决方案非常模糊。有一百万种方法可以实际实现这一点，而不是复制我的解决方案，您最好自己编写它们，以您最了解它们的方式。一些提示如何实现各个步骤：

*   `matrix(DF$ex, byrow=TRUE, ncol=8)`可以计算矩阵
*   `DF[seq(from=1, to=nrow(DF), by=8),2:4]`将提供`a/b/s`与每个矩阵行对应的值
*   `cbind`可以用来结合这两个
*   `matrix(DF2$mean, byrow=TRUE, ncol=8, nrow=nrow(DF)/8)`将这些手段变成一个矩阵，你可以简单地减去
*   `**2`将矩阵的所有组件平方
*   `rowSums`将添加矩阵行的元素
*   `which.min`将返回最小值的索引

以一种可能的方式将所有内容放在一起，将所有内容放在一个表达式中而不使用中间变量（不是最易读的解决方案）：

```
DF[seq(from=1, to=nrow(DF), by=8),2:4][which.min(
  rowSums((matrix(DF$ex, byrow=TRUE, ncol=8) -
           matrix(DF2$mean, byrow=TRUE, ncol=8, nrow=nrow(DF)/8)
          )**2
         )
),] 
```

如果您不将矩阵存储为数据框的一部分，则可能需要转置它以避免这些参数，并利用矩阵向量减法中的每一*列*`byrow=TRUE`都将重复向量这一事实：

 *```
DF[seq(from=1, to=nrow(DF), by=8),2:4][which.min(
  colSums((matrix(DF$ex, nrow=8) - DF2$mean)**2)),] 
```*

# javascript - “滚动”事件未在 CompositeView 中触发

> ID：12271176
> 
> 赞同：6
> 
> 时间：2012-09-04T20:51:13.213
> 
> 标签：javascript, jquery, backbone.js, marionette

我在 div 票上看到了[Capture 滚动事件](https://stackoverflow.com/questions/10258270/capture-scroll-event-on-div)，但该解决方案不一定适合我。

我有一个 JSFiddle，它通过 CompositeView 呈现集合，但无法触发滚动事件（构建无限滚动）：http: [//jsfiddle.net/franklovecchio/FkNwG/300/](http://jsfiddle.net/franklovecchio/FkNwG/300/)。

我怎样才能`scroll`正确开火？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-10T14:34:37.230

第一个滚动事件仅适用于具有溢出的元素：滚动/自动。在您的情况下，它是#region-content 而不是#container。

但是修复事件的选择器将不起作用，因为 Backbone 使用 jquery .delegate() 来附加它的事件。但是委托无法触发滚动事件。

恐怕你将不得不手动附加事件，在渲染 dom 之后

```
$("#region-content").scroll () ->
  console.log "ok" 
```

您可以使用 live() 附加事件。

或者，您可以使#content 可滚动并滚动它。这将起作用，因为 Backbone 不会使用委托，但它将事件直接绑定到 #content 节点。

# iphone - iPad 方向错误：wait_fences：未能收到回复：10004003

> ID：12271177
> 
> 赞同：0
> 
> 时间：2012-09-04T20:51:17.477
> 
> 标签：iphone, ios, ipad, ios5, orientation

这是我在 .m 文件上的代码

当我旋转方向时，它会等待大约 7-8 秒并给出 wait_fences: failed to receive reply: 10004003 error

我做错了什么谁能告诉我？

我有 3 个按钮和一个背景图像，当方向改变时，视图会改变，所以我这样做了，但它工作得非常慢

```
- (void)viewDidAppear:(BOOL)animated
{
[[UIBarButtonItem appearance] setTintColor:[UIColor blackColor]];
self.navigationController.navigationBar.hidden=YES;

UITabBarController *aaa = self.tabBarController;

NSUserDefaults *data2 = [NSUserDefaults standardUserDefaults];

if([[data2 valueForKey:@"setValue"] isEqualToString:@"tr"])
{
    UITabBarItem *tabItem1 = [[[aaa tabBar]items]objectAtIndex:0];
    tabItem1.title=@"Ana Ekran";
    UITabBarItem *tabItem2 = [[[aaa tabBar]items]objectAtIndex:1];
    tabItem2.title=@"Mağazalar";
    UITabBarItem *tabItem3 = [[[aaa tabBar]items]objectAtIndex:2];
    tabItem3.title=@"Kampanyalar";
    UITabBarItem *tabItem4 = [[[aaa tabBar]items]objectAtIndex:3];
    tabItem4.title=@"Hesabım";
    UITabBarItem *tabItem5 = [[[aaa tabBar]items]objectAtIndex:4];
    tabItem5.title=@"İletişim";

}
else {
    UITabBarItem *tabItem1 = [[[aaa tabBar]items]objectAtIndex:0];
    tabItem1.title=@"Home";
    UITabBarItem *tabItem2 = [[[aaa tabBar]items]objectAtIndex:1];
    tabItem2.title=@"Stores";
    UITabBarItem *tabItem3 = [[[aaa tabBar]items]objectAtIndex:2];
    tabItem3.title=@"Promotions";
    UITabBarItem *tabItem4 = [[[aaa tabBar]items]objectAtIndex:3];
    tabItem4.title=@"Account";
    UITabBarItem *tabItem5 = [[[aaa tabBar]items]objectAtIndex:4];
    tabItem5.title=@"Contact";
}
self.view.backgroundColor=[UIColor blackColor];

[super viewDidAppear:NO];

}

 - (void)viewDidLoad
 {
 [super viewDidLoad];
// Do any additional setup after loading the view.
 }

 - (void)viewDidUnload
{
[self setImgblacktie:nil];
[self setImgsarar:nil];
[self setImginterview:nil];
[self setImgbackground:nil];
[super viewDidUnload];
// Release any retained subviews of the main view.
 }

-(void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation
 {
if (fromInterfaceOrientation==UIInterfaceOrientationPortrait || fromInterfaceOrientation==UIInterfaceOrientationPortraitUpsideDown) {
    NSLog(@"yatay1");
    imgbackground.frame=CGRectMake(0, -256, 1024, 1024);
    imgbackground.image=[UIImage imageNamed: @"backgroundbuyuk.png"];

    imgblacktie.frame=CGRectMake(303, 44, 444, 173);

    imgsarar.frame=CGRectMake(303, 238, 444, 173);

    imginterview.frame=CGRectMake(303, 432, 444, 173);

}
else if(fromInterfaceOrientation==UIInterfaceOrientationLandscapeRight || fromInterfaceOrientation==UIInterfaceOrientationLandscapeLeft)
{
    NSLog(@"dikey1");

    imgbackground.frame=CGRectMake(-128, 0, 1024, 1024);
    imgbackground.image=[UIImage imageNamed: @"backgroundbuyuk.png"];

    imgblacktie.frame=CGRectMake(168, 193, 444, 173);

    imgsarar.frame=CGRectMake(168, 388, 444, 173);

    imginterview.frame=CGRectMake(168, 583, 444, 173);
}
 }

- (BOOL)shouldAutorotateToInterfaceOrientation: (UIInterfaceOrientation)interfaceOrientation
{
if(interfaceOrientation == UIInterfaceOrientationPortrait){
    imgbackground.frame=CGRectMake(-128, 0, 1024, 1024);
    imgbackground.image=[UIImage imageNamed: @"backgroundbuyuk.png"];

    imgblacktie.frame=CGRectMake(168, 193, 444, 173);

    imgsarar.frame=CGRectMake(168, 388, 444, 173);

    imginterview.frame=CGRectMake(168, 583, 444, 173);  
} 
else if(interfaceOrientation == UIInterfaceOrientationLandscapeRight) {       
    imgbackground.frame=CGRectMake(0, -256, 1024, 1024);
    imgbackground.image=[UIImage imageNamed: @"backgroundbuyuk.png"];
    imgblacktie.frame=CGRectMake(303, 44, 444, 173);

    imgsarar.frame=CGRectMake(303, 238, 444, 173);

    imginterview.frame=CGRectMake(303, 432, 444, 173);        
} 
else if(interfaceOrientation == UIInterfaceOrientationLandscapeLeft) {      
    imgbackground.frame=CGRectMake(0, -256, 1024, 1024);
    imgbackground.image=[UIImage imageNamed: @"backgroundbuyuk.png"];
    imgblacktie.frame=CGRectMake(303, 44, 444, 173);

    imgsarar.frame=CGRectMake(303, 238, 444, 173);

    imginterview.frame=CGRectMake(303, 432, 444, 173); 
}
else if(interfaceOrientation==UIInterfaceOrientationPortraitUpsideDown){
    imgbackground.frame=CGRectMake(-128, 0, 1024, 1024);
    imgbackground.image=[UIImage imageNamed: @"backgroundbuyuk.png"];

    imgblacktie.frame=CGRectMake(168, 193, 444, 173);

    imgsarar.frame=CGRectMake(168, 388, 444, 173);

    imginterview.frame=CGRectMake(168, 583, 444, 173);
}
return YES;
} 
```

# mysql - 确保自动增量 ID 不在另一个表中

> ID：12271179
> 
> 赞同：1
> 
> 时间：2012-09-04T20:51:30.607
> 
> 标签：mysql

好的，由于各种原因，我需要确保自动增量 ID 在插入时不在另一个表中。因此`ID`in`table1`不能与`ID`in相同`table2`。两个表`ID`中的 必须自动递增，但数字不能相同，因为`ID`两者都使用触发器插入到另一个表中。我不能将一个表上的自动增量值设置得比另一个表高，因为这会导致其他问题。

我的想法是`WHERE`在模式的自动增量部分中有一个带有子查询的子句，但我不确定这是否可能。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T20:56:30.540

我建议使用触发器来检查下一个 ID 是否存在`BEFORE INSERT`。

[该资源](https://stackoverflow.com/a/3334487/679449)将向您展示如何获取下一个`AUTO_INCREMENT`值，并且[该资源](http://momolog.info/2009/10/21/mysql-before-insert-trigger-as-check-constraint/)概述了如何创建`BEFORE INSERT`触发器。希望这些资源可以让您走上正确的道路。

# php - 用于 PHP PDO 的 Mysql 转义 % 和 _

> ID：12271183
> 
> 赞同：1
> 
> 时间：2012-09-04T20:51:50.020
> 
> 标签：php, mysql, escaping, code-injection, sanitize

有没有一种特殊的方法可以逃避 % 符号和下划线？当我做

```
 PDO->prepare() 
```

它会自动转义 % 符号和下划线吗？

我尝试使用 \% 或 _ 但我认为它不起作用。我也想检查一个字符串是否包含这样的字符。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T20:55:53.463

`%`并且`_`永远不会自动转义，因为很少需要转义它们..只有当它们用于带有 . 的字符串时`LIKE`。

您必须在 php.ini 中手动处理此问题。您可以`strpos`用来检查它们中的任何一个是否在字符串中，并且可以用来`str_replace`进行临时转义。根据字符串类型，您可能必须在字符串中自行转义反斜杠。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T20:59:59.337

如果你使用 PDO->prepare() 为什么不在 PDO->execute(array $params) 参数绑定中做。您无需担心使用参数绑定进行转义。

# sql-server - 如何将数据库划分为更小的数据库

> ID：12271185
> 
> 赞同：0
> 
> 时间：2012-09-04T20:52:03.843
> 
> 标签：sql-server, sql-server-2012

我有一个大型 SQL Server 2012 数据库。

我想把它分成偏好和数据。

但是我发现 SQL Server 似乎不支持将数据划分为面向对象的数据库的想法。它似乎依赖于同一个数据库中的所有内容。

例如，数据库中不支持外键。跨数据库连接也是一件很痛苦的事情。

有人通常会如何做这件事？我应该对所有内容使用相同的数据库是否只是 SQL Server 的限制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T21:02:38.867

SQL Server 提供分区功能。根据[维基百科](http://en.wikipedia.org/wiki/Partition_%28database%29)

分区是将逻辑数据库或其构成元素划分为不同的独立部分。数据库分区通常是出于可管理性、性能或可用性的原因

```
1.Horizontal partitioning
2.Vertical partitioning

Each has it is own file group.it can be configured 
```

***访问应该有帮助的链接***

[MSDN](http://msdn.microsoft.com/en-us/library/ms178148%28v=sql.105%29.aspx)

[SQLAuthority](http://blog.sqlauthority.com/2008/01/25/sql-server-2005-database-table-partitioning-tutorial-how-to-horizontal-partition-database-table/)

我相信那里有很多教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T20:56:08.180

SQL Server 是一个*关系*型数据库，因此不应该期望它支持*对象或面向对象*数据库所隐含的完全不同的体系结构。

我不明白您关于“数据库不支持外键”的评论。外键都是 SQL Server 中完整性约束的一部分，有关如何创建它们的详细说明可[在此处获得](http://msdn.microsoft.com/en-us/library/ms189049.aspx)

我认为您可能想要更具体地了解您尝试拆分的数据类型，以及为什么要将它们放在物理上独立的数据库中。对您的问题进行细化可能有助于我们提供更好的答案。

# javascript - Javascript中的递归遍历树

> ID：12271186
> 
> 赞同：4
> 
> 时间：2012-09-04T20:52:21.160
> 
> 标签：javascript, node.js, asynchronous

这是在 Java 中完成的超级简单的任务，但是 javascript 的异步特性使得这个任务（对我来说）几乎是不可能的，至少就我现在的知识而言。（我不是在尝试 bash javascript。喜欢这种语言！）。

这是非常基本的。在我的 mysql 数据库中，顶级树的父级为 null。找孩子很容易。孩子们有可用的线路。树的深度是可变的。

```
 private static Set<Tree> getBranches( Tree trunk ) {

    Set<Tree> treeSet = new HashSet<Tree>();

    if ( trunk != null ) {

        if ( trunk.hasLines() ) { //queries if tree has lines.  returns true or false
            treeSet.add( trunk );
        }

        for ( Tree tree : trunk.treeList ) {
            treeSet.addAll( getBranches( tree ) );
        }
    }

    return treeSet;
} 
```

基本上，该方法测试树是否有可用的行。如果是这样，它将所有这些添加到一个集合中。如果没有，它会继续，直到找到行。

mysql 节点库的异步特性将这个任务变成了地狱。

这是我现在拥有的

```
 function hasLines(tree_id, callback) {
        var ret;
        pool.query('SELECT * from pkg_line_tree where tree_id = ?', [tree_id], function (err, rows) {

            if (rows.length > 0) {
                ret = true;
            } else {
                ret = false;
            }
            callback(ret);
        });
    }

     function dig(tree_id, treeArray, callback) {

        pool.query('SELECT * from tree where parent_id = ?', [tree_id], function (err, rows) {

           if (rows) {

              for (var i in rows) {
                 hasLines(rows[i].tree_id, function (t) {

                    if (t) {
                       treeArray.push(rows[i].tree_id);
                    } else {
                       treeArray.concat(dig(rows[i].tree_id, treeArray));
                    }
                 });
              }

              if (callback) {
                 callback(treeArray);
              }

           }
        });

        return treeArray;
     }

     var treeArray = [];
     dig(52, treeArray, function (t) {
        res.json(t);
     }); 
```

我真的只需要输出这个根树中所有可用的孩子。

如果这没有意义，请告诉我。我会尝试重构。我希望我能理解某种观点。我不想使用像 Fibers 这样的东西来完成这项工作，但我别无选择。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T22:43:06.077

你必须使用异步[https://github.com/caolan/async](https://github.com/caolan/async)

我已修改您的 dig 函数以使用 async 的 forEach 方法

```
function dig(tree_id, treeArray, AllDone) {
       pool.query('SELECT * from tree where parent_id = ?', [tree_id], function (err, rows) {
          if (rows) {
            async.forEach(
                rows,
                function(row, callback) {
                    hasLine(row.tree_id, function(t){
                        if (t) {
                            treeArray.push(row.tree_id);
                            callback();
                        }
                        else {
                            dig(row.tree_id, treeArray, callback);
                        }
                    });
                },
                function(err) {
                    if (err) AllDone(err, treeArray);
                    else AllDone(null, treeArray);
                });
            }
          else 
            AllDone(null, treeArray)
        });
}

treeArray = [];
dig(52, treeArray, function(err, t) {  
    res.json(t);  
}); 
```

假设rows是一个数组..`forEach`遍历每一行并执行hasLine，每次迭代`callback`完成时都会调用该函数，并`AllDone`在调用所有`callback`函数时调用。这里棘手的部分是递归，每个递归调用都会有一个`forEach`循环，并且`AllDone`只有在所有`callbacks`都完成后才会调用该方法。

但是`forEach`并行执行，因此不保留顺序

如果您不关心订单，我认为这应该可行。

**编辑**：**您可以`forEachSeries`用来解决订单问题。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T23:16:35.963

您的使用`dig()`目前不一致：

```
// asynchronous with callback
dig(52, treeArray, function (t) {
   res.json(t);
});

// then synchronous with `return`?
treeArray.concat(dig(rows[i].tree_id, treeArray)); 
```

此外，`concat`最后一行中的实际上并没有做太多事情，因为它不会改变它所调用的数组。您可能实际上并不希望它`dig`绕过`treeArray`而不是定义一个新的`treeSet`类似 in `getBranches`。因此，如果确实如此，它将`treeArray`每次都附加到自身的末尾。

你仍然可以使用`concat`多个`treeSet`s，但你必须存储它的`return`值：

```
treeSet = treeSet.concat(subSet); 
```

而且，您必须将`for`循环 this 替换为异步迭代器，因为循环在继续之前不会等待异步操作。如果您愿意尝试，[`async`图书馆](https://npmjs.org/package/async)对此有一些选择。

因此，对于多个`treeSet`s、`concat`和[`async.forEachSeries`](https://github.com/caolan/async#forEach)，您可以尝试：

```
function dig(tree_id, callback) {
  var treeSet = [];

  hasLines(tree_id, function (yep) {
    if (yep) {
      treeSet.push(tree_id);
    }

    pool.query('SELECT * from tree where parent_id = ?', [tree_id], function (err, rows) {

      function each(row, next) {
        dig(row.tree_id, function (subSet) {
          treeSet = treeSet.concat(subSet);
          next(null);
        });
      }

      function done() {
        callback(treeSet);
      }

      async.forEachSeries(rows, each, done);
    });
  });
}

dig(52, function (treeSet) {
  res.json(treeSet);
}); 
```

# jakarta-ee - 过滤时如何覆盖jetty-maven-plugin中的web.xml

> ID：12271187
> 
> 赞同：3
> 
> 时间：2012-09-04T20:52:29.773
> 
> 标签：jakarta-ee, maven, jetty, war, maven-jetty-plugin

我`${properties}`的 web.xml 中有根据配置文件过滤的内容。我想将 web.xml 与 jetty:run 的最终属性一起使用，但我还没有成功，它总是坚持使用 web.xml 的默认路径，即`file:/home/---/Projects/project/trunk/src/main/webapp/WEB-INF/web.xml`

我试过了：

```
 <plugin>
        <groupId>org.mortbay.jetty</groupId>
        <artifactId>jetty-maven-plugin</artifactId>
        <version>8.1.4.v20120524</version>
        <configuration>
            <webAppConfig>
                <overrideDescriptor>target/project/WEB-INF/web.xml</overrideDescriptor>
            </webAppConfig>
        </configuration>
    </plugin> 
```

和

```
 <plugin>
        <groupId>org.mortbay.jetty</groupId>
        <artifactId>jetty-maven-plugin</artifactId>
        <version>8.1.4.v20120524</version>
        <configuration>
            <overrideWebXml>target/project/WEB-INF/web.xml</overrideWebXml>
        </configuration>
    </plugin> 
```

问题的一部分是知道哪些配置与哪些版本一起使用，因为似乎没有人把它写下来。此外，OverrideDescriptor 仅基于 eclipsepedia 上的文档添加到 Web 上下文配置中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T08:39:10.990

根据[文档](http://docs.codehaus.org/display/JETTY/Maven+Jetty+Plugin#MavenJettyPlugin-ConfigurationforthejettyrunGoal)，配置选项是`webXml`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-21T11:46:38.350

接受的答案文档链接适用于 Jetty 6，它不适用于 OP 的版本`8.1.4.v20120524`。

对于所述版本，请[使用](http://wiki.eclipse.org/Jetty/Feature/Jetty_Maven_Plugin)：

```
 <plugins>
      <plugin>
        <groupId>org.mortbay.jetty</groupId>
        <artifactId>jetty-maven-plugin</artifactId>
        <version>8.1.4.v20120524</version>
        <configuration>
          <webApp>
            <descriptor>/path/to/web.xml</descriptor>
          </webApp>
        </configuration>
      </plugin>
    </plugins> 
```

# c# - 绑定到 ObservableCollection 时 DataGrid 显示空白行 I have a simple DataGrid which I am binding to a ObservableCollection and its producing black small lines in the Grid with no Data Visible. I am using ObservableCollection as I have the c 问问题 问问题 2012-09-04T20:52:39.343 1271 次 This question shows research effort; it is useful and clear 1 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I have a simple DataGrid which I am binding to a ObservableCollection and its producing black small lines in the Grid with no Data Visible. I am using ObservableCollection as I have the collection being built in RunTime using Reflection. I am doing something like this XAML <datagrid itemssource="{Binding Data}">C# public ObservableCollection Data { get { return _Data; } set { this._deals = value; this.NotifyPropertyChanged("Deals"); } } public Run() { this.Data = CreateData(typeof(MyRecordClass)) //'MyRecordClass' needs to be passed at runtime } public ObservableCollection CreateData(Type RecordType) { ObservableCollection data = new ObservableCollection(); var record = Activator.CreateInstance(RecordType); // Logic to load the record with Data data.Add(record); return data; } Is there a way in which I can make the DataGrid read an ObservableCollection without specifying the ColumnNames or create a ObservableCollection object in the CreateData function ? Your collection should have public properties, so datagrid could bind columns to it. If you use collection type of Object than you have no properies for binding, so the empty rows will be displayed. Here is example for you: public partial class MainWindow : Window { public ObservableCollection dataSource; public MainWindow() { InitializeComponent(); this.dataSource = new ObservableCollection<somedatasource>(); this.dataSource.Add(new SomeDataSource { Field = "123" }); this.dataSource.Add(new SomeDataSource { Field = "1234" }); this.dataSource.Add(new SomeDataSource { Field = "12345" }); this.dataGrid1.ItemsSource = this.dataSource; } } public class SomeDataSource { public string Field {get;set;} } <datagrid autogeneratecolumns="False" height="253" horizontalalignment="Left" margin="27,24,0,0" name="dataGrid1" verticalalignment="Top" width="448"><datagrid.columns><datagridtextcolumn header="First" binding="{Binding Path=Field, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"></datagridtextcolumn></datagrid.columns></datagrid>c#datagridobservablecollection 4 1 回答 1 This answer is useful 1 您的集合应该具有公共属性，因此 datagrid 可以将列绑定到它。如果您使用 Object 的集合类型，那么您没有用于绑定的属性，因此将显示空行。 这是给你的例子： 公共部分类 MainWindow : Window { public ObservableCollection dataSource; public MainWindow() { InitializeComponent(); this.dataSource = new ObservableCollection<somedatasource>(); this.dataSource.Add(new SomeDataSource { Field = "123" }); this.dataSource.Add(new SomeDataSource { Field = "1234" }); this.dataSource.Add(new SomeDataSource { Field = "12345" }); this.dataGrid1.ItemsSource = this.dataSource; } } public class SomeDataSource { public string Field {get;set;} } <datagrid autogeneratecolumns="False" height="253" horizontalalignment="Left" margin="27,24,0,0" name="dataGrid1" verticalalignment="Top" width="448"><datagrid.columns><datagridtextcolumn header="First" binding="{Binding Path=Field, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"></datagridtextcolumn></datagrid.columns></datagrid>于 2012-09-04T20:58:17.077 回答 Related 2 ios - 将图像从 Web 服务器保存到手机以获取图像滑块 2 ios - UITableView 始终显示 4 个单元格 1 php - MySQL 查询从 PHP 代码返回 null 但在终端中工作正常 1 javascript - 如何在新标签页或窗口中打开 iframe 链接 4 android - BroadcastReceiver 根据 Activity 运行执行不同的动作 1 javascript - 使用 HTML 表格中的数据在 Highcharts 中的 Y 轴上格式化标签 0 jquery - 我可以将提交类型的按钮与javascript的onclick功能一起使用吗？ 1 java - 程序编译失败？ 1 php - 我无法解决这些 CakePHP 错误 0 ios - 带有 UIDatePicker 的自定义 UIActionSheet 给出错误“无效上下文 0x0” Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：12271189
> 
> 赞同：1
> 
> 时间：
> 
> 标签：c#, datagrid, observablecollection

I have a simple DataGrid which I am binding to a ObservableCollection and its producing black small lines in the Grid with no Data Visible. I am using ObservableCollection as I have the collection being built in RunTime using Reflection.

I am doing something like this XAML

```
 <DataGrid ItemsSource="{Binding Data}" /> 
```

C#

```
public ObservableCollection<object> Data
{ 
        get { return _Data; }
        set { 
            this._deals = value;
            this.NotifyPropertyChanged("Deals");
            }
 }
 public Run()
 {
        this.Data = CreateData(typeof(MyRecordClass))   //'MyRecordClass' needs to be passed at runtime
  }

public ObservableCollection<Object> CreateData(Type RecordType)
{
   ObservableCollection<Object> data = new ObservableCollection<object>();  
   var record = Activator.CreateInstance(RecordType);
    // Logic to load the record with Data 
   data.Add(record);
   return data;
} 
```

Is there a way in which I can make the DataGrid read an ObservableCollection without specifying the ColumnNames or create a ObservableCollection object in the CreateData function ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T20:58:17.077

**您的集合应该具有公共属性**，因此 datagrid 可以将列绑定到它。如果您使用 Object 的集合类型，那么您没有用于绑定的属性，因此将显示空行。

这是给你的例子：

公共部分类 MainWindow : Window { public ObservableCollection dataSource;

```
 public MainWindow()
    {
        InitializeComponent();

        this.dataSource = new ObservableCollection<SomeDataSource>();

        this.dataSource.Add(new SomeDataSource { Field = "123" });
        this.dataSource.Add(new SomeDataSource { Field = "1234" });
        this.dataSource.Add(new SomeDataSource { Field = "12345" });

        this.dataGrid1.ItemsSource = this.dataSource;
    }
}

public class SomeDataSource
{
    public string Field {get;set;}
}

 <DataGrid AutoGenerateColumns="False" Height="253" HorizontalAlignment="Left" Margin="27,24,0,0" Name="dataGrid1" VerticalAlignment="Top" Width="448">
            <DataGrid.Columns>
                <DataGridTextColumn Header="First" Binding="{Binding Path=Field, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
            </DataGrid.Columns>
 </DataGrid> 
```</somedatasource></somedatasource></datagrid>

# ipad - 在 iPad 上的 iFrame 中打开 pdf 的特定页面

> ID：12271190
> 
> 赞同：1
> 
> 时间：2012-09-04T20:52:40.630
> 
> 标签：ipad, iframe

我正在尝试在 iFrame中打开 pdf 的特定页面（例如[http://cb.vu/unixtoolbox.pdf#page=14 ）。](http://cb.vu/unixtoolbox.pdf#page=14)虽然它适用于桌面浏览器，但它不适用于 iPad。

还注意到，如果我想通过直接在移动 safari 的地址栏中键入[http://cb.vu/unixtoolbox.pdf#page=14](http://cb.vu/unixtoolbox.pdf#page=14)进入第 14 页，即使没有 iFrame，这在 iPad 上也不起作用。

你们中有人遇到过这个问题吗？如果是这样，您是如何解决的？

非常感谢您的帮助！

# java - Java注解处理工具@NoNull

> ID：12271194
> 
> 赞同：0
> 
> 时间：2012-09-04T20:53:09.193
> 
> 标签：java, apt

我想创建一个注释，限制开发人员将*null*指定为参数，该参数已使用*@NoNull进行注释*

例如，如果我创建此方法：

```
public void printLine(@NoNull String line) {
    System.out.println(line);
} 
```

在方法调用中，如果用户为*line指定**null*，我希望出现错误：*`printLine(null);`*

 *我使用 APT 只用了一点时间，我想知道如何做到这一点（如果可能的话）？

这是我到目前为止创建的注释：

```
@Target(ElementType.PARAMETER)
@Retention(RetentionPolicy.SOURCE)
public @interface NoNull {} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T21:43:43.083

编译时间将很难检查，因为您实际上是在处理运行时值。如果你想创建注释来自动添加代码来检查这些东西，你应该看看项目 lombok：

[http://projectlombok.org/](http://projectlombok.org/)

它使用注释处理器将代码添加到您的 bean 中以执行各种操作。

例如：

```
@Getter @Setter
private int id; 
```

注释处理器会自动将 get/set 方法添加到您的 bean。

我不认为它有空检查，但你应该能够添加它并贡献它。

另一种选择是使用验证 jsr，尽管这需要您在运行时显式验证，但您可以使用代理或 AOP 来完成此操作。

```
@NotNull @Min(1)
public void setId(Integer id) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T21:30:46.587

> 重点不是仅仅为了可读性而使用注释，而是在编译时使用 APT 强制执行注释

考虑到 null 是运行时工件，我看不出您将如何在“编译时”强制执行 null 检查。

相反，您必须修改您的类，而*apt*不是执行此操作的工具，至少本身不是。它的存在是为了从源文件中提取有关注释元素的信息。但是要强制执行您的`@Null`限制，您需要修改运行类。

您可以做的一件事是使用*apt*提取有关注释参数的信息，然后使用*aspectj*之类的工具在运行时修改这些类以检查参数值。

但对于单个 SO 问题来说，这个话题太宽泛了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T21:16:51.273

@Nullable、@Nonnull 位于包中：javax.annotation

结帐番石榴，它有一些不错的东西是类型安全： [http ://code.google.com/p/guava-libraries/wiki/GuavaExplained](http://code.google.com/p/guava-libraries/wiki/GuavaExplained)*

# html - 响应式应用程序：字体大小单位 em vs. px vs. pt vs. percent

> ID：12271196
> 
> 赞同：20
> 
> 时间：2012-09-04T20:53:17.510
> 
> 标签：html, css, responsive-design

我正在使用 HTML 和 CSS 构建针对台式机、平板电脑和手机的响应式应用程序，但我不确定我应该使用什么单位字体大小以使该字体适合任何大小的屏幕。em、px、pt 和百分比有什么区别？对我来说最好的选择是什么？

我想在台式机、平板电脑和手机的响应式应用程序中听到关于它的真实体验

如果有任何帮助，我将不胜感激！

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-04T20:56:54.197

您可能想看看这篇文章：[小链接](https://kyleschaeffer.com/css-font-size-em-vs-px-vs-pt-vs-percent)。

**更新：**这里有一点关于这如何适用于您的情况的解释：

*   **px**：像素是设备显示屏中的一个小方块（通常），一次只能显示一种颜色。您的[屏幕分辨率](https://en.wikipedia.org/wiki/Display_resolution)指定了您的屏幕/显示器由多少像素组成。因此，当您指定: 时`font-size: 12px;`，您基本上是在告诉浏览器每个字母应该是 12 像素高（大约 - 不同字母的高度会有所不同，但相对差异会被保留）。
*   **百分比**：`font-size: 50%;`将元素的字体大小设置为其父元素字体大小的 50%。
*   **pt**：（`1pt`点）是 1 / 72 英寸。设置`font-size: 12pt;`将字符的高度设置为 12 / 72 英寸（同样，不同的字符略有不同）。
*   **em** : em 是所选字体中字母“m”的宽度，与百分比基本相同，除了`1em`is`100%`和`1.5em`is `150%`。

因此，您的选择可能是`px`因为它将保留文本大小与其他大小元素的逻辑比例。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-02-24T08:04:44.987

各种尺寸是

1.  **“Ems”（em）**：“em”是一个可扩展的单位。一个 em 等于当前的 font-size，例如，如果文档的 font-size 是 12pt，则 1em 等于 12pt。Ems 本质上是可扩展的，所以 2em 等于 24pt，.5em 等于 6pt，等等。
2.  **百分比 (%)**：百分比单位很像“em”单位，除了一些基本差异。首先，当前字体大小等于 100%（即 12pt = 100%）。使用百分比单位时，您的文本仍可完全适应移动设备和可访问性。
3.  **像素 (px)：**像素是用于屏幕媒体（即在计算机屏幕上读取）的固定大小单位。像素单元的一个问题是它不能缩放。
4.  **点 (pt)：**点传统上用于印刷媒体（任何要打印在纸上的东西等）。一点等于 1/72 英寸。点很像像素，因为它们是固定大小的单位，不能按大小缩放。
5.  **视口单位**： - 这些是相对于视口的。它们是 CSS3 中的新功能
    1.  3.2vw = 视口宽度的 3.2%
    2.  3.2vh = 视口高度的 3.2%
    3.  3.2vmin = 3.2vw 或 3.2vh 中的较小者
    4.  3.2vmax = 3.2vw 或 3.2vh 中的较大者

参见[kyleschaeffer.com/....](http://kyleschaeffer.com/development/css-font-size-em-vs-px-vs-pt-vs/)和[css-tricks.com/....](http://css-tricks.com/viewport-sized-typography/)

但是要实现响应式拼写错误，请查看[https://stackoverflow.com/a/21981859/406659](https://stackoverflow.com/a/21981859/406659)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-10T10:22:05.857

在我看来，最好的将是[这里记录](http://www.w3.org/TR/css3-values/#font-relative-lengths)`rem`的传入和`vmin`单位。

为了应对较旧的浏览器，您可能希望定义一些 CSS 回退，例如：

```
p, li
{
  font-size: 12px;
  font-size: 0.75rem;
} 
```

或者

```
p, li
{
  font-size: 12px;    /* old */
  font-size: 1.2vm;   /* IE9 */
  font-size: 1.2vmin;
} 
```

（归功于[克雷格巴特勒](http://www.sitepoint.com/new-css3-relative-font-size/)）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-04-16T16:38:32.147

尝试混合使用 px、em 和 rem。

[Chris Coyier 在这篇文章中解释说](http://css-tricks.com/rems-ems/)，将 px 用于您的文档，将 rem 用于您的模块（即页面的部分），并将 em 用于模块中的文本元素，页面将干净地缩放。

# core-data - 服务器端更改的 Restkit.Delete

> ID：12271197
> 
> 赞同：3
> 
> 时间：2012-09-04T20:53:23.930
> 
> 标签：core-data, restkit, sync

我使用 RestKit 从我的 Web 服务器接收数据并将其存储在 Core Data 中。

一切正常，对象映射也是如此。

但现在我有一个问题/问题。我想将我的设备与来自网络服务器的数据同步。新对象或更新对象的方式很清楚，因为 RestKit 为我控制它。但是如何删除 Core Data 中的对象呢？有一种使用方法的`DELETE`方法。但是，如果某些对象在服务器上被删除，那又会怎样呢？

我想使用上次同步的时间戳发出 GET 请求，以接收所有数据更改（增量）。

*   新对象（确定）
*   修改对象（确定）
*   删除的对象（如何？）

如何使用 JSON 有效负载从服务器中删除 Core Data 中的对象。设置 JSON 中对象的删除属性时，是否有可能阻止保存？有没有办法从核心数据中删除这个对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T17:26:46.403

这对我行得通。我正在使用 RestKit 0.10.2

```
#pragma Mark - RKObjectLoaderDelegate
- (void)objectLoader:(RKObjectLoader *)objectLoader didLoadObjects:(NSArray *)objects {

    //Select all users in Core Data
    NSArray* allUsers = [User findAll]; 

    for (User *userRecord in allUsers) { 

        // check each user into objects loaded now. If not contains, delete him
        if (NO == [objects containsObject:userRecord]) {

                [[[[RKObjectManager sharedManager] objectStore] managedObjectContextForCurrentThread] deleteObject:userRecord];
        }
     } 

     //Saving changes in MOC
     NSError* error = nil; 
     [[[[RKObjectManager sharedManager] objectStore] managedObjectContextForCurrentThread] save:&error]; 

     if (nil != error) { 
        NSLog(@"################# Error %@", error);
     }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T21:02:43.307

### 解决方案 n°1：`removed`属性

恕我直言，删除请求响应中未出现的每个本地对象并不是一个好的解决方案。所以我只是添加了一个属性`removed`（不是`deleted`因为它是由 Core Data 保留的）并且只显示`Object[removed=FALSE]`.

在获取请求中，它将是：

```
removed == FALSE 
```

### 解决方案 n°2：我应该删除什么？

您可以在您的 API 中创建一个简单的页面来指示您的应用程序中要删除的内容。例如：

```
[
  {'type': 'post', 'id': 5},
  {'type': 'comment', 'id': 10},
] 
```

然后，您将通过`postID`or获取对象`commentID`并将它们从存储中删除。您必须找到一种方法来确认删除到服务器，因为列表会增长。

# ruby-on-rails-3.2 - 如何为嵌套属性指定 attr_accessible？

> ID：12271202
> 
> 赞同：0
> 
> 时间：2012-09-04T20:53:49.080
> 
> 标签：ruby-on-rails-3.2, attr-accessible

从文档中，我看到如果我有一个模型：

```
User has_many Addresses 
```

我可以这样做：

```
class User < AR::Base

  attr_accessible :addresses_attributes
  accepts_nested_attributes_for :addresses

end 
```

我应该能够从用户设置这些属性。但我不能。我是否还需要在地址模型中添加“attr_accessible”标注？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T21:04:17.680

是的，您还必须在 Address 模型上设置 attr_accessible 。

当 ActiveRecord 使用属性散列初始化实例时，当未由 attr_accessible 标记的属性是散列键的一部分时，它将引发异常。因为在关联中，ActiveRecord 对象是用属性的散列初始化的，所以在使用 attr_accessible 的 Address 模型中说明这些属性是没有逃避的。

# python - 在 Python Flask 框架中从模型、视图、模板“冒泡”错误的正确方法

> ID：12271204
> 
> 赞同：3
> 
> 时间：2012-09-04T20:53:55.997
> 
> 标签：python, error-handling, flask

什么是在我的类中捕获错误并将错误消息从类“冒泡”到视图并最终显示在模板上的正确方法？

我现在遇到的问题是，我最终在我的模型和视图控制器中两次捕获了相同的错误。这感觉不对。

这是一个例子：

模型/用户.py

```
class User(object):
   errors = []

  def __init__(self, string=None):
    """ Initialize the user object
    """

    #See if the input string is an e-mail address
    try:
      string_is_email = string.index('@')
    except ValueError:
      self.errors.append('Invalid e-mail address')
      raise ValueError 
```

查看/登录.py

```
@app.route('/login', methods=['POST', 'GET'])
def login():
  if request.method == 'POST':

    email = request.form['email']
    password = request.form['password']

    #Catch invalid e-mails
    try:
      u = User(email)
    except ValueError:
      errors = u.errors

  #In case the user hasn't POSTED
  try:
    errors = u.errors
  except:
    errors = None

  return render_template('login.html', error=errors) 
```

模板/login.html

```
 {% if error %}
    <div class="error">
      <ul>
        {% for message in error %}
        <li>{{ message }}</li>
        {% endfor %}
      </ul>
    </div> 
```

有没有更清洁的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T21:00:02.483

[您可以使用flash](http://flask.pocoo.org/docs/patterns/flashing/)直接将消息发送到模板，而不是那种错误破解。此外，我会稍微修改一下：

```
class User(object):
  def __init__(self, string):
    """ Initialize the user object
    """

    #See if the input string is an e-mail address
    try:
      string_is_email = string.index('@')
    except ValueError:
      raise ValueError('Invalid e-mail address')

@app.route('/login', methods=['POST', 'GET'])
def login():
  if request.method == 'POST':

    email = request.form['email']
    password = request.form['password']

    #Catch invalid e-mails
    try:
      u = User(email)
    except ValueError, e:
      flash(e.message) 
```

关于如何使用`flash`，请查看文档： http: [//flask.pocoo.org/docs/patterns/flashing/](http://flask.pocoo.org/docs/patterns/flashing/)。

# asp.net - ASP.net - 虚拟路径“/Master.master”映射到另一个应用程序，这是不允许的

> ID：12271205
> 
> 赞同：2
> 
> 时间：2012-09-04T20:53:58.353
> 
> 标签：asp.net, master-pages, virtual-path

我的站点根目录中有一个 asp.net 母版页。我在母版页的目录“/myfolder”中有一个页面：

```
 <%@ Page Title="" Language="C#" MasterPageFile="../Master.master" AutoEventWireup="true" CodeBehind="Default.aspx.cs" Inherits="myproject.TimelapseDefault" %>
 <asp:Content ID="Content1" ContentPlaceHolderID="ContentPlaceHolder1" runat="server">
 <p> 
```

这些文件看起来像：

/Master.master /myfolder/default.aspx

当我将它上传到我的（非专用 Godaddy iis 7）服务器时，为什么会出现此错误，但它可以在 localhost 上运行？：解析器错误描述：解析服务此请求所需的资源时发生错误。请查看以下特定的解析错误详细信息并适当地修改您的源文件。

解析器错误消息：文件“/timelapserpro/Master.master”不存在。

源错误：

第 1 行： `<%@ Page Title="" Language="C#" MasterPageFile="~/Master.master" AutoEventWireup="true" CodeBehind="Default.aspx.cs" Inherits="myproject.TimelapseDefault" %>`

第 2 行： `<asp:Content ID="Content1" ContentPlaceHolderID="ContentPlaceHolder1" runat="server">`
第 3 行： `<p>`

所有页面都在同一个解决方案中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T21:24:06.877

您的远程服务器没有将该文件夹设置为 Web 应用程序，因此当您使用“~”引用它时，它正在查找恰好是服务器根目录的应用程序的根目录。

但是，在您的本地机器上，'/timelapserpro/ `is a full application so ~/ refers to '/timelapserpro`，而不是'/'。

您需要将本地服务器上的应用程序降级，使其不再是自己的应用程序，或者将目标服务器文件夹提升为应用程序以使两者同步。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-04T20:56:04.543

尝试更改`MasterPageFile="../Master.master"`为`MasterPageFile="~/Master.master"`

还要检查您是否在 iis 7 上正确创建了虚拟文件夹。检查您的应用程序的路径是否正确。您的 IIS 中必须有这样的文件夹结构

```
->YourAppName (the root of your app contains your root files)
  ->myfolder (contains your myfolder content) 
```

# ruby-on-rails - 在 Rails 中，如何设置 cookie 的 Max-Age？

> ID：12271207
> 
> 赞同：2
> 
> 时间：2012-09-04T20:54:09.507
> 
> 标签：ruby-on-rails, http, cookies

在 Rails 3.2.8 中，你可以这样[写一个 cookie](http://api.rubyonrails.org/classes/ActionDispatch/Cookies.html)：

```
cookies[:login] = {
  :value   => "XJ-122",
  :expires => 1.hour.from_now
} 
```

文档说这些是可用的选项符号：

```
:value
:path
:domain
:expires
:secure
:httponly 
```

我也希望`:max_age`可以作为一个选项使用，但也许[用户代理支持还不够广泛（？）](https://www.rfc-editor.org/rfc/rfc6265#section-4.1.2.2)以保证包括它。

那么我应该如何[`Max-Age`](http://en.wikipedia.org/wiki/HTTP_cookie#Expires_and_Max-Age)在 Rails 中设置 cookie？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T01:39:38.800

我阅读了[ActionDispatch::Cookies 的 Rails 源代码](https://github.com/rails/rails/blob/master/actionpack/lib/action_dispatch/middleware/cookies.rb)。如果您查看[该`handle_options`方法的使用方式，](https://github.com/rails/rails/blob/master/actionpack/lib/action_dispatch/middleware/cookies.rb#L172)您会发现文档中未指定的选项也被传递。Rails 通常会非常自由地传递选项，其理念是，在某个地方，一个方法会知道如何处理剩余的选项。

因此，我建议您尝试使用该`:max_age`选项，即使它没有记录在案，看看会发生什么。

注意：Rails 依赖[Rack 来设置 cookie 标头](https://github.com/rack/rack/blob/master/lib/rack/utils.rb#L221)，所以如果由于某种原因“Max-Age”“Set-Cookie”标头**被**传递给 Rack 但**没有**被传递，我会询问 Github Rack 问题跟踪器。

更新 #1：至少有一个拉取请求`Max-Age`与 Rack 相关，但我不确定它是否相关。如果上述方法不起作用，我想您可能需要在上面提到的 Rack 票务跟踪器上进行讨论。

更新#2：你看过[Rack::Cache](https://github.com/rtomayko/rack-cache)中间件吗？它可能有用。

# java - 从主题开始接收消息

> ID：12271211
> 
> 赞同：1
> 
> 时间：2012-09-04T20:54:38.033
> 
> 标签：java, jms, messaging

所以我想知道一个问题。考虑发布者在上午 10:00 创建一个主题并立即开始向该主题发布消息。它通知消费者该主题的创建，然后他们在上午 10:01 订阅该主题。这些消费者不会收到发布者在上午 10:00 - 10:01 之间发送的消息。因此，如果消息传递提供者发现该主题没有活动订阅者来接收任何消息，它是否应该立即丢弃这些消息。我们能否提供一种订阅机制，消费者可以通过该机制指定他们希望从哪个点接收消息（例如，从主题开始或太平洋标准时间 2011 年 12 月 25 日上午 10:00 等）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T03:54:34.480

在发布/订阅消息模型中，发布者不会向订阅者通知主题的创建。

发布者和订阅者通过主题松散耦合。所以发布者不会知道是否有订阅者。如果该主题没有订阅者，则消息传递提供者会丢弃有关该主题的发布。如果没有发布者，一些消息传递提供者会通知发布者。这样出版商就可以决定是否继续出版。

订阅者将从创建订阅时开始获取发布。有两种类型的订阅，持久的和非持久的。非持久订阅是指只要订阅者处于活动状态，就会将发布交付给订阅者的订阅。持久订阅是即使订阅者处于非活动状态也能交付发布的订阅。

有保留发布的概念，其中消息传递提供者保留一个最新的发布并交付给迟到的订阅者。

# ruby-on-rails - params.merge 和跨站点脚本

> ID：12271218
> 
> 赞同：15
> 
> 时间：2012-09-04T20:54:55.710
> 
> 标签：ruby-on-rails, security, xss

我正在使用[Brakeman](http://brakemanscanner.org)来识别安全问题。它会标记任何`params.merge`用作跨站点脚本漏洞的链接。如何对以下内容进行消毒？

```
 - @archives.each do |archive|
    =  link_to "FTP", params.merge(:action => :ftp, :archive => archive, :recipient => "company") 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-09-04T21:00:17.847

您应该仅基于`params`您期望并希望允许成为`FTP`链接一部分的元素创建一个新的哈希，并使用**它**来合并您的附加参数。

您所拥有的允许我通过修改查询字符串向该链接添加任何我想要的内容，从而`FTP`打开安全漏洞的大门。通过构建一个用于代替`params`in的哈希，`params.merge(...`您可以有效地将预期的查询字符串组件列入白名单，以便在您正在呈现的模板中使用。

* * *

例如`GET`，如果您期望一个 URL

```
/some/path?opt1=val1&opt2=val2 
```

您可能会执行的控制器操作

```
@cleaned_params = { opt1: params[:opt1], opt2: params[:opt2] }
@cleaned_params.merge! action: :ftp, archive: archive, recipient: :company 
```

然后将@cleaned_pa​​rams 传递给`link_to`

```
=  link_to "FTP", @cleaned_params 
```

这样，如果我手动输入一个 URL，例如

```
/some/path?opt1=val1&opt2=val2&maliciousopt=somexss 
```

在你看来`params[:maliciousopt]`，它永远不会进入你`FTP` `link_to`的视野。

同样的行为适用于`POST`请求，只是为了恶意我可能会在提交之前向表单添加几个字段

```
<input type="hidden" name="maliciousopt" value="somexss" /> 
```

# android - 我如何确定填充列表视图的项目？

> ID：12271223
> 
> 赞同：0
> 
> 时间：2012-09-04T20:55:09.893
> 
> 标签：android, listview, arraylist, adapter

我是 android 的菜鸟，我正在使用 arrayilst 和自定义适配器填充列表视图。我想设置我的列表视图 onClickListener 以根据填充列表视图的项目执行命令。列表视图动态填充来自 arraylist 的项目。我已经尝试了 position 和 id 参数，但没有成功。任何帮助是极大的赞赏。

我如何实例化 listview、arraylist 和适配器

```
 portfoliolist = (ListView) findViewById(R.id.listViewPortfolios);
    users = new ArrayList<PortfolioRecord>();
    portfoliolist.setAdapter(new UserItemAdapter(this, R.layout.simplerow, users));
    portfoliolist.setOnItemClickListener(this); 
```

我的自定义适配器。

```
public class UserItemAdapter extends ArrayAdapter<PortfolioRecord> {
    private ArrayList<PortfolioRecord> users;

    public UserItemAdapter(Context context, int textViewResourceId, ArrayList<PortfolioRecord> users) {
        super(context, textViewResourceId, users);
        this.users = users;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View v = convertView;
        if (v == null) {
            LayoutInflater vi = (LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = vi.inflate(R.layout.simplerow, null);
        }

        PortfolioRecord user = users.get(position);         
        if (user != null) {
            TextView portfolioname = (TextView) v.findViewById(R.id.portfolioname);
            TextView currentvalue = (TextView) v.findViewById(R.id.currentvalue);

            if (portfolioname != null) {
                portfolioname.setText(user.portfolioname);
            }

            if(currentvalue != null) {
                currentvalue.setText("Current Value: " + user.currentvalue );
            }
        }
        return v;
    }
}

public class PortfolioRecord {
    public String portfolioname;
    public String currentvalue;

    public PortfolioRecord(String portfolioname, String currentvalue) {
        this.portfolioname = portfolioname;
        this.currentvalue = currentvalue;       
    }
} 
```

我如何将项目添加到arraylist：

```
 user1 = new PortfolioRecord(pn10, denomination10+portfoliovalue10);        
        users.add(user1); 
```

我已将 Usernull、user1 和 user2 添加到我的数组列表中。我如何识别这些物品？我已经尝试了以下代码但没有运气

```
public void onItemClick(AdapterView parent, View itemClicked, int position,
        long id) {
     TODO Auto-generated method stub
    switch(parent.getId()){
    case R.id.listViewPortfolios:
        if(portfoliolist.getSelectedItem()==usernull){
            openCustomDialog();
        }else if(portfoliolist.getSelectedItem()==user1){
            whichportfolio=1;               
        }else if(portfoliolist.getSelectedItem()==user2){
            whichportfolio=2;               
        }
     break;}} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T22:58:54.623

假设您的投资组合记录对象具有以下内容： getTypeofUser()

```
portfoliolist.setOnItemClickListener(new OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position,long id) {
        String typeofUser =users.get(position).getTypeofUser();
                if(typeofUser == user1 ){
                    whichportfolio=1; 
                 }
    }
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T02:14:16.180

无需实现 OnItemSelectedListener。只需在现有的 OnItemClick 方法中使用它：

```
public void onItemClick(AdapterView parent, View itemClicked, int position,
        long id) {
    // TODO Auto-generated method stub
     PortfolioRecord user = users.get(position);

        // I'm not certain what this code block does...
        if(user.equals(usernull)){
             openCustomDialog();
        }else if(user.equals(user1)){
            whichportfolio=1;              
        }else if(user.equals(user2)){
            whichportfolio=2;             
        }} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T21:20:47.767

我建议更改为 OnItemSelectedListener ，然后您可以简单地获取 PortfolioRecord ：

```
listView.setOnItemSelectedListener(new OnItemSelectedListener() {
    public void onItemSelected(AdapterView parent, View view, int position, long id) {
        // Get the user (PortfolioRecord) that was selected
        PortfolioRecord user = users.get(position);

        // I'm not certain what this code block does...
        if(user.equals(usernull)){
             openCustomDialog();
        }else if(user.equals(user1)){
            whichportfolio=1;               
        }else if(user.equals(user2)){
            whichportfolio=2;               
        }
    }
}); 
```

# regex - Vim 正则表达式不匹配字符类中的空格

> ID：12271224
> 
> 赞同：6
> 
> 时间：2012-09-04T20:55:11.557
> 
> 标签：regex, vim

我正在使用 vim 进行搜索并使用以下命令替换：

`%s/lambda\s*{\([\n\s\S]\)*//gc`

我正在尝试匹配`{`. 例如，这一行的全部内容应匹配：

```
 lambda {
  FactoryGirl.create ... 
```

相反，它只匹配换行符并且之前没有空格`FactoryGirl`。我之前尝试过手动替换所有空格，以防万一有制表符代替，但没有骰子。谁能解释为什么这不起作用？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-05T07:30:00.533

`\s`是空格的原子；`\n`，虽然看起来很相似，但在语法上是换行符的转义序列。在集合 atom`[...]`中，您不能包含其他原子，只能包含字符（包括一些特殊的字符，例如`\n`. From `:help /[]`：

> *   当 'cpoptions' {Vi 无此功能} 中不包含 'l' 标志时，接受以下翻译：

```
\e  <Esc>
\t  <Tab>
\r  <CR>    (NOT end-of-line!)
\b  <BS>
\n  line break, see above |/[\n]|
\d123   decimal number of character
\o40    octal number of character up to 0377
\x20    hexadecimal number of character up to 0xff
\u20AC  hex. number of multibyte character up to 0xffff
\U1234  hex. number of multibyte character up to 0xffffffff 
```

> 注意：上面提到的其他反斜杠代码在 [] 中不起作用！

因此，要么按字面意思指定空白字符，要么`[ \t\n...]`使用相应的字符类表达式`[[:space:]...]`，或者通过逻辑或将原子与集合组合`\%(\s\|[...]\)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T20:55:11.557

Vim 以`[ ... ]`不同的方式解释字符类中的字符。这不是字面意思，因为该正则表达式不会完全匹配`lambda {sss`or `lambda {\\\`。什么`\s`和`\S`被解释为......我仍然无法解释。

但是，我几乎可以实现我想要的：

```
%s/lambda\s*{\([\n a-zA-z]\)*//gc 
```

这忽略了我想要的标点符号。这有效，但很危险：

```
%s/lambda\s*{\([\n a-zA-z]\|.\)*//gc 
```

因为在最后一个字符之后添加一个字符 like`}`会导致 vim 在 globbing 时挂起。所以我的解决方案是将我需要的标点符号添加到字符类中。

# batch-file - Windows 命令行“开始”阻止查找所有文件

> ID：12271225
> 
> 赞同：0
> 
> 时间：2012-09-04T20:55:12.230
> 
> 标签：batch-file, cmd

在批处理文件中，我有运行防病毒程序的这一行。我想确保它在批次移动到以下几行之前完成其工作。据我了解，开始/等待是等待。不幸的是，START/WAIT 破坏了代码行。

这是运行的代码：

```
"C:\Program Files (x86)\Anti-Virus\" d:\files\%1\ProcessFiles\%2-proc\*.* 
```

此代码不运行：

```
START/WAIT "C:\Program Files (x86)\Anti-Virus\fsav" d:\files\%1\ProcessFiles\%2-proc\*.* 
```

当这条线运行时，我收到一条错误消息：

```
"Windows cannot find 'd:\files\abc\ProcessFiles\abc-proc\*.*'. 
Make sure you typed the name correctly, and then try again." 
```

当该错误提示打开时，如果我导航到该文件夹​​，那里有文件。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T21:21:45.543

使用来自[SS64](http://ss64.com/nt/start.html)的提示，
始终包含一个**TITLE**这可以是一个简单的字符串，如“我的脚本”或只是一对空引号“”
根据 Microsoft 文档，标题是可选的，但如果省略它~~可能~~会遇到问题.

`START "" /WAIT "C:\Your Anti-Virus\antivir" "d:\files\%1\ProcessFiles\%2-proc\*.*`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T21:40:41.340

`START/WAIT`不是一个单词，是两个用空格隔开的。
此外，如果文件名中有空格，则在文件规范周围加上双引号会有所帮助。

试试这个：

```
START /WAIT "C:\Program Files (x86)\Anti-Virus\fsav" "d:\files\%1\ProcessFiles\%2-proc\*.*" 
```

# gac - GACUtil：安装程序集

> ID：12271227
> 
> 赞同：0
> 
> 时间：2012-09-04T20:15:10.177
> 
> 标签：gac

我使用 GACUtil 添加了两个程序集。两者都已成功添加，但是一个显示在 C:\Windows\Assembly 下，另一个显示在 C:\Windows\Microsoft\Assembly\GAC_MSIL" 下。

当我对两个程序集使用相同的命令时，为什么会发生这种情况？

谢谢

曼尼

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T20:42:52.300

> 在 .NET Framework 4.0 中，GAC 进行了一些更改。GAC 分为两部分，每个 CLR 一个。
> 
> 用于 .NET Framework 2.0 和 .NET Framework 3.5 的 CLR 版本是 CLR 2.0。在前两个框架​​版本中没有必要拆分 GAC。在 Net Framework 4.0 中破坏旧应用程序的问题。
> 
> 为了避免 CLR 2.0 和 CLR 4.0 之间的问题，GAC 现在被拆分为每个运行时的私有 GAC。主要变化是 CLR v2.0 应用程序现在无法在 GAC 中看到 CLR v4.0 程序集。

[.NET 4.0 有一个新的 GAC，为什么？](https://stackoverflow.com/questions/2660355/net-4-0-has-a-new-gac-why)

希望这能为你解答:)

# c# - 一个页面只能有一个服务器端表单标签错误

> ID：12271229
> 
> 赞同：3
> 
> 时间：2012-09-04T20:55:28.233
> 
> 标签：c#, asp.net

**请求的 Aspx 页面**

```
<%@ Page Title="" Language="C#" MasterPageFile="~/tier6a-educ.master" AutoEventWireup="true"
    EnableEventValidation="false" CodeFile="TAP_rubform_response.aspx.cs" Inherits="TAP_rubform_response" %>

<asp:Content ID="Content1" ContentPlaceHolderID="test1" runat="server">
    <head>
        <link href="StyleSheet.css" type="text/css" rel="Stylesheet" />
    </head>
    <div style="padding-left: 10pt">
        <form id="form1" runat="server">

        <asp:Table ID="Table11" runat="server" Height="16px" Width="845px">
            <asp:TableRow ID="TableRow10" runat="server" orderColor="Gray" BorderWidth="1pt"
                BorderStyle="Dotted" HorizontalAlign="Center">
                <asp:TableCell ID="TableCell10" runat="server" ColumnSpan="2"><h4>SECTION 1: STANDARDS AND OBJECTIVES</h4></asp:TableCell>
            </asp:TableRow>
        </asp:Table>
        <asp:Table ID="table38" runat="server" HorizontalAlign="center" BorderColor="Gray"
            BorderWidth="1pt" BorderStyle="Dotted" Width="850px" Style="line-height: 15pt"
            Font-Names="Trebuchet MS" Font-Size="11pt">
            <asp:TableRow ID="TableRow11" runat="server">
                <asp:TableCell ID="TableCell11" runat="server">
                    <asp:Label ID="Label22" runat="server">Rating &nbsp;       </asp:Label>
                    <asp:Label ID="Label23" Font-Bold="true" runat="server">    </asp:Label>
                </asp:TableCell>
            </asp:TableRow>
            <asp:TableRow ID="TableRow34" runat="server">
                <asp:TableCell ID="TableCell44" runat="server">
                    <asp:Label ID="Label48" runat="server">Evidence &nbsp;       </asp:Label>
                    <asp:Label ID="Label49" Font-Bold="true" runat="server">   </asp:Label>
                </asp:TableCell>
            </asp:TableRow>
        </asp:Table>
        <asp:Table ID="Table12" runat="server" Height="16px" Width="845px">
            <asp:TableRow ID="TableRow12" runat="server" orderColor="Gray" BorderWidth="1pt"
                BorderStyle="Dotted" HorizontalAlign="Center">
                <asp:TableCell ID="TableCell12" runat="server" ColumnSpan="2"><h4>SECTION 2: Presenting Instructional Content</h4></asp:TableCell>
            </asp:TableRow>
        </asp:Table>
        <asp:Table ID="table2" runat="server" HorizontalAlign="center" BorderColor="Gray"
            BorderWidth="1pt" BorderStyle="Dotted" Width="850px" Style="line-height: 15pt"
            Font-Names="Trebuchet MS" Font-Size="11pt">
            <asp:TableRow ID="TableRow13" runat="server">
                <asp:TableCell ID="TableCell15" runat="server">
                    <asp:Label ID="Label20" runat="server">Rating &nbsp;       </asp:Label>
                    <asp:Label ID="Label21" Font-Bold="true" runat="server">    </asp:Label>
                </asp:TableCell>
            </asp:TableRow>
            <asp:TableRow ID="TableRow39" runat="server">
                <asp:TableCell ID="TableCell49" runat="server">
                    <asp:Label ID="Label58" runat="server">Evidence &nbsp;       </asp:Label>
                    <asp:Label ID="Label59" Font-Bold="true" runat="server">   </asp:Label>
                </asp:TableCell>
            </asp:TableRow>
        </asp:Table>
        <asp:Table ID="Table13" runat="server" Height="16px" Width="845px">
            <asp:TableRow ID="TableRow14" runat="server" orderColor="Gray" BorderWidth="1pt"
                BorderStyle="Dotted" HorizontalAlign="Center">
                <asp:TableCell ID="TableCell13" runat="server" ColumnSpan="2"><h4>SECTION 3: Lesson Structure and Pacing</h4></asp:TableCell>
            </asp:TableRow>
        </asp:Table>
        <asp:Table ID="table3" runat="server" HorizontalAlign="center" BorderColor="Gray"
            BorderWidth="1pt" BorderStyle="Dotted" Width="850px" Style="line-height: 15pt"
            Font-Names="Trebuchet MS" Font-Size="11pt">
            <asp:TableRow ID="TableRow15" runat="server">
                <asp:TableCell ID="TableCell18" runat="server">
                    <asp:Label ID="Label24" runat="server">Rating &nbsp;       </asp:Label>
                    <asp:Label ID="Label25" Font-Bold="true" runat="server">    </asp:Label>
                </asp:TableCell>
            </asp:TableRow>
            <asp:TableRow ID="TableRow35" runat="server">
                <asp:TableCell ID="TableCell45" runat="server">
                    <asp:Label ID="Label50" runat="server">Evidence &nbsp;       </asp:Label>
                    <asp:Label ID="Label51" Font-Bold="true" runat="server">   </asp:Label>
                </asp:TableCell>
            </asp:TableRow>
        </asp:Table>
        <asp:Table ID="Table14" runat="server" Height="16px" Width="845px">
            <asp:TableRow ID="TableRow16" runat="server" orderColor="Gray" BorderWidth="1pt"
                BorderStyle="Dotted" HorizontalAlign="Center">
                <asp:TableCell ID="TableCell14" runat="server" ColumnSpan="2"><h4>SECTION 4: Activities and Materials </h4></asp:TableCell>
            </asp:TableRow>
        </asp:Table>
        <asp:Table ID="table4" runat="server" HorizontalAlign="center" BorderColor="Gray"
            BorderWidth="1pt" BorderStyle="Dotted" Width="850px" Style="line-height: 15pt"
            Font-Names="Trebuchet MS" Font-Size="11pt">
            <asp:TableRow ID="TableRow17" runat="server">
                <asp:TableCell ID="TableCell21" runat="server">
                    <asp:Label ID="Label26" runat="server">Rating &nbsp;       </asp:Label>
                    <asp:Label ID="Label27" Font-Bold="true" runat="server">    </asp:Label>
                </asp:TableCell>
            </asp:TableRow>
            <asp:TableRow ID="TableRow36" runat="server">
                <asp:TableCell ID="TableCell46" runat="server">
                    <asp:Label ID="Label52" runat="server">Evidence &nbsp;       </asp:Label>
                    <asp:Label ID="Label53" Font-Bold="true" runat="server">   </asp:Label>
                </asp:TableCell>
            </asp:TableRow>
        </asp:Table>
        <asp:Table ID="Table21" runat="server" Height="16px" Width="845px">
            <asp:TableRow ID="TableRow18" runat="server" orderColor="Gray" BorderWidth="1pt"
                BorderStyle="Dotted" HorizontalAlign="Center">
                <asp:TableCell ID="TableCell16" runat="server" ColumnSpan="2"><h4>SECTION 5: Academic Feedback</h4></asp:TableCell>
            </asp:TableRow>
        </asp:Table>
        <asp:Table ID="table5" runat="server" HorizontalAlign="center" BorderColor="Gray"
            BorderWidth="1pt" BorderStyle="Dotted" Width="850px" Style="line-height: 15pt"
            Font-Names="Trebuchet MS" Font-Size="11pt">
            <asp:TableRow ID="TableRow19" runat="server">
                <asp:TableCell ID="TableCell24" runat="server">
                    <asp:Label ID="Label28" runat="server">Rating &nbsp;       </asp:Label>
                    <asp:Label ID="Label29" Font-Bold="true" runat="server">    </asp:Label>
                </asp:TableCell>
            </asp:TableRow>
            <asp:TableRow ID="TableRow37" runat="server">
                <asp:TableCell ID="TableCell47" runat="server">
                    <asp:Label ID="Label54" runat="server">Evidence &nbsp;       </asp:Label>
                    <asp:Label ID="Label55" Font-Bold="true" runat="server">   </asp:Label>
                </asp:TableCell>
            </asp:TableRow>
        </asp:Table>
        <asp:Table ID="Table26" runat="server" Height="16px" Width="845px">
            <asp:TableRow ID="TableRow20" runat="server" orderColor="Gray" BorderWidth="1pt"
                BorderStyle="Dotted" HorizontalAlign="Center">
                <asp:TableCell ID="TableCell59" runat="server" ColumnSpan="2"><h4>SECTION 6: Grouping Students</h4></asp:TableCell>
            </asp:TableRow>
        </asp:Table>
        <asp:Table ID="table6" runat="server" HorizontalAlign="center" BorderColor="Gray"
            BorderWidth="1pt" BorderStyle="Dotted" Width="850px" Style="line-height: 15pt"
            Font-Names="Trebuchet MS" Font-Size="11pt">
            <asp:TableRow ID="TableRow21" runat="server">
                <asp:TableCell ID="TableCell27" runat="server">
                    <asp:Label ID="Label30" runat="server">Rating &nbsp;       </asp:Label>
                    <asp:Label ID="Label31" Font-Bold="true" runat="server">    </asp:Label>
                </asp:TableCell>
            </asp:TableRow>
            <asp:TableRow ID="TableRow38" runat="server">
                <asp:TableCell ID="TableCell48" runat="server">
                    <asp:Label ID="Label56" runat="server">Evidence &nbsp;       </asp:Label>
                    <asp:Label ID="Label57" Font-Bold="true" runat="server">   </asp:Label>
                </asp:TableCell>
            </asp:TableRow>
        </asp:Table>
        <asp:Table ID="Table32" runat="server" Height="16px" Width="845px">
            <asp:TableRow ID="TableRow40" runat="server" orderColor="Gray" BorderWidth="1pt"
                BorderStyle="Dotted" HorizontalAlign="Center">
                <asp:TableCell ID="TableCell71" runat="server" ColumnSpan="2"><h4>SECTION 7: Teacher Content Knowledge</h4></asp:TableCell>
            </asp:TableRow>
        </asp:Table>
        <asp:Table ID="table7" runat="server" HorizontalAlign="center" BorderColor="Gray"
            BorderWidth="1pt" BorderStyle="Dotted" Width="850px" Style="line-height: 15pt"
            Font-Names="Trebuchet MS" Font-Size="11pt">
            <asp:TableRow ID="TableRow23" runat="server">
                <asp:TableCell ID="TableCell30" runat="server">
                    <asp:Label ID="Label32" runat="server">Rating &nbsp;       </asp:Label>
                    <asp:Label ID="Label33" Font-Bold="true" runat="server">   </asp:Label>
                </asp:TableCell>
            </asp:TableRow>
            <asp:TableRow ID="TableRow24" runat="server">
                <asp:TableCell ID="TableCell31" runat="server">
                    <asp:Label ID="Label34" runat="server">Evidence &nbsp;       </asp:Label>
                    <asp:Label ID="Label35" Font-Bold="true" runat="server">   </asp:Label>
                </asp:TableCell>
            </asp:TableRow>
        </asp:Table>
        <asp:Table ID="Table39" runat="server" Height="16px" Width="845px">
            <asp:TableRow ID="TableRow42" runat="server" orderColor="Gray" BorderWidth="1pt"
                BorderStyle="Dotted" HorizontalAlign="Center">
                <asp:TableCell ID="TableCell91" runat="server" ColumnSpan="2"><h4>SECTION 8: Questioning</h4></asp:TableCell>
            </asp:TableRow>
        </asp:Table>
        <asp:Table ID="table8" runat="server" HorizontalAlign="center" BorderColor="Gray"
            BorderWidth="1pt" BorderStyle="Dotted" Width="850px" Style="line-height: 15pt"
            Font-Names="Trebuchet MS" Font-Size="11pt">
            <asp:TableRow ID="TableRow26" runat="server">
                <asp:TableCell ID="TableCell34" runat="server">
                    <asp:Label ID="Label36" runat="server">Rating &nbsp;       </asp:Label>
                    <asp:Label ID="Label37" Font-Bold="true" runat="server">   </asp:Label>
                </asp:TableCell>
            </asp:TableRow>
            <asp:TableRow ID="TableRow27" runat="server">
                <asp:TableCell ID="TableCell35" runat="server">
                    <asp:Label ID="Label38" runat="server">Evidence &nbsp;       </asp:Label>
                    <asp:Label ID="Label39" Font-Bold="true" runat="server">   </asp:Label>
                </asp:TableCell>
            </asp:TableRow>
        </asp:Table>
        <asp:Table ID="Table45" runat="server" Height="16px" Width="845px">
            <asp:TableRow ID="TableRow50" runat="server" orderColor="Gray" BorderWidth="1pt"
                BorderStyle="Dotted" HorizontalAlign="Center">
                <asp:TableCell ID="TableCell105" runat="server" ColumnSpan="2"><h4>SECTION 9: Thinking</h4></asp:TableCell>
            </asp:TableRow>
        </asp:Table>
        <asp:Table ID="table9" runat="server" HorizontalAlign="center" BorderColor="Gray"
            BorderWidth="1pt" BorderStyle="Dotted" Width="850px" Style="line-height: 15pt"
            Font-Names="Trebuchet MS" Font-Size="11pt">
            <asp:TableRow ID="TableRow29" runat="server">
                <asp:TableCell ID="TableCell38" runat="server">
                    <asp:Label ID="Label40" runat="server">Rating &nbsp;       </asp:Label>
                    <asp:Label ID="Label41" Font-Bold="true" runat="server">   </asp:Label>
                </asp:TableCell>
            </asp:TableRow>
            <asp:TableRow ID="TableRow30" runat="server">
                <asp:TableCell ID="TableCell39" runat="server">
                    <asp:Label ID="Label42" runat="server">Evidence &nbsp;       </asp:Label>
                    <asp:Label ID="Label43" Font-Bold="true" runat="server">   </asp:Label>
                </asp:TableCell>
            </asp:TableRow>
        </asp:Table>
        <asp:Table ID="Table50" runat="server" Height="16px" Width="845px">
            <asp:TableRow ID="TableRow56" runat="server" orderColor="Gray" BorderWidth="1pt"
                BorderStyle="Dotted" HorizontalAlign="Center">
                <asp:TableCell ID="TableCell117" runat="server" ColumnSpan="2"><h4>SECTION 10: Problem Solving</h4></asp:TableCell>
            </asp:TableRow>
        </asp:Table>
        <asp:Table ID="table10" runat="server" HorizontalAlign="center" BorderColor="Gray"
            BorderWidth="1pt" BorderStyle="Dotted" Width="850px" Style="line-height: 15pt"
            Font-Names="Trebuchet MS" Font-Size="11pt">
            <asp:TableRow ID="TableRow32" runat="server">
                <asp:TableCell ID="TableCell42" runat="server">
                    <asp:Label ID="Label44" runat="server">Rating &nbsp;       </asp:Label>
                    <asp:Label ID="Label45" Font-Bold="true" runat="server">   </asp:Label>
                </asp:TableCell>
            </asp:TableRow>
            <asp:TableRow ID="TableRow33" runat="server">
                <asp:TableCell ID="TableCell43" runat="server">
                    <asp:Label ID="Label46" runat="server">Evidence &nbsp;       </asp:Label>
                    <asp:Label ID="Label47" Font-Bold="true" runat="server">   </asp:Label>
                </asp:TableCell>
            </asp:TableRow>
        </asp:Table>
        <asp:Table ID="Table15" runat="server" BorderColor="Gray" BorderWidth="1pt" BorderStyle="Dotted"
            Width="850px" HorizontalAlign="Center">
            <asp:TableRow ID="TableRow48" runat="server">
                <asp:TableCell ID="TableCell101" HorizontalAlign="left" ColumnSpan="1" runat="server"
                    Font-Size="Large">
                    <asp:Button ID="Button1" Text="Send As e-Mail" runat="server" OnClick="SendAsEmail_Click"
                        Font-Size="10pt" Height="18pt" Width="90pt" ValidationGroup="onsubmit" />
                </asp:TableCell>
                <asp:TableCell ID="TableCell19" HorizontalAlign="center" ColumnSpan="1" runat="server"
                    Font-Size="Large">
                    <asp:Button ID="Button3" Text="Save As PDF" runat="server" OnClick="SaveAsPDF_Click"
                        Font-Size="10pt" Height="18pt" Width="90pt" ValidationGroup="onsubmit" />
                </asp:TableCell>
            </asp:TableRow>
        </asp:Table>
        </form>
    </div>
</asp:Content> 
```

我有一个 aspx 页面，其中有一个按钮，当用户单击该页面时，该按钮将作为电子邮件发送给用户。

这是我为按钮的点击功能编写的代码

```
protected void SendasEmail_Click(object sender, EventArgs e)
{
    StringWriter sw = new StringWriter();
    HtmlTextWriter hw = new HtmlTextWriter(sw);
    this.Page.RenderControl(hw);

    SmtpClient smtpClient = new SmtpClient();
    MailMessage message = new MailMessage();

    MailAddress fromAddress = new MailAddress("xxxxx");
    smtpClient.Host = "xxxxxxx";
    smtpClient.Port = 25;
    message.From = fromAddress;
    message.To.Add("xxxxxx");
    message.Subject = "The webpage is below";
    message.IsBodyHtml = true;
    message.Body = sw.ToString();        
    smtpClient.Send(message);
    } 
```

我可以正常接收电子邮件，但页面执行后，显示以下错误。

我绝对页面内只有表单，因为如果上述函数的实现为空，我不会收到任何错误。网页加载正常，单击按钮什么也不做。

**一个页面只能有一个服务器端 Form 标签。**

说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.Web.HttpException：一个页面只能有一个服务器端 Form 标签。

源错误：

在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。

堆栈跟踪：

```
[HttpException (0x80004005): A page can have only one server-side Form tag.]
   System.Web.UI.Page.OnFormRender() +8721176
   System.Web.UI.HtmlControls.HtmlForm.RenderChildren(HtmlTextWriter writer) +33
   System.Web.UI.HtmlControls.HtmlContainerControl.Render(HtmlTextWriter writer) +32
   System.Web.UI.HtmlControls.HtmlForm.Render(HtmlTextWriter output) +51
   System.Web.UI.Control.RenderControlInternal(HtmlTextWriter writer, ControlAdapter adapter) +27
   System.Web.UI.Control.RenderControl(HtmlTextWriter writer, ControlAdapter adapter) +99
   System.Web.UI.HtmlControls.HtmlForm.RenderControl(HtmlTextWriter writer) +40
   System.Web.UI.Control.RenderChildrenInternal(HtmlTextWriter writer, ICollection children) +134
   System.Web.UI.Control.RenderChildren(HtmlTextWriter writer) +19
   System.Web.UI.Control.Render(HtmlTextWriter writer) +10
   System.Web.UI.Control.RenderControlInternal(HtmlTextWriter writer, ControlAdapter adapter) +27
   System.Web.UI.Control.RenderControl(HtmlTextWriter writer, ControlAdapter adapter) +99
   System.Web.UI.Control.RenderControl(HtmlTextWriter writer) +25
   System.Web.UI.Control.RenderChildrenInternal(HtmlTextWriter writer, ICollection children) +134
   System.Web.UI.Control.RenderChildren(HtmlTextWriter writer) +19
   System.Web.UI.Control.Render(HtmlTextWriter writer) +10
   System.Web.UI.Control.RenderControlInternal(HtmlTextWriter writer, ControlAdapter adapter) +27
   System.Web.UI.Control.RenderControl(HtmlTextWriter writer, ControlAdapter adapter) +99
   System.Web.UI.Control.RenderControl(HtmlTextWriter writer) +25
   System.Web.UI.Control.RenderChildrenInternal(HtmlTextWriter writer, ICollection children) +134
   System.Web.UI.Control.RenderChildren(HtmlTextWriter writer) +19
   System.Web.UI.Page.Render(HtmlTextWriter writer) +29
   System.Web.UI.Control.RenderControlInternal(HtmlTextWriter writer, ControlAdapter adapter) +27
   System.Web.UI.Control.RenderControl(HtmlTextWriter writer, ControlAdapter adapter) +99
   System.Web.UI.Control.RenderControl(HtmlTextWriter writer) +25
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +1266 
```

似乎这个错误是因为我正在调用函数`this.Page.RenderControl(hw);`

有人对如何解决此问题有任何经验吗？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T21:29:59.893

看起来好像您必须`EventValidation`在页面上禁用，否则您会收到`RegisterForEventValidation can only be called during Render();`错误消息。

看起来正在发生的事情是页面被完整呈现到您`HtmlTextWriter`的`Response`. 这可能导致 ASP 看到两个 Form 标记并引发错误。解决方案是覆盖`Render`页面的方法，捕获您想要的 html，将其发送到电子邮件中，并将 html 写入`Response`要在页面上显示的内容。

[这个链接](http://www.4guysfromrolla.com/articles/122006-1.aspx)很好地描述了正在发生的事情以及如何覆盖`Render`。

编辑：您应该能够调用`base.Render`并捕获输出以写入`Response`电子邮件以及您的电子邮件。

在您的按钮单击中，设置一个布尔值，指示是否通过电子邮件发送页面：

```
public void myButton_Click(object sender, EventArgs e)
{
    okayToEmail = true;
} 
```

然后当您覆盖渲染时，将页面渲染为新的`HtmlTextWriter`，将内容写入页面的`HtmlTextWriter`，并检查标志的值。如果为真，请通过电子邮件发送内容。

```
protected override void Render(HtmlTextWriter writer)
{
    var sb = new StringBuilder();
    using (var sw = new StringWriter(sb))
    {
        using (var htw = new HtmlTextWriter(sw))
        {
            base.Render(htw);
            writer.Write(sb.ToString());

            if (okayToEmail)
            {
                using (var message = new MailMessage())
                {
                    message.Body = sb.ToString();
                    ...
                }
            }
        }
    }
} 
```

但请记住：将整个页面写入电子邮件正文可能并不好......它将包括`Doctype`标签、`html`和`body`标签等，这些标签将被大多数（可能所有）电子邮件客户端删除。此外，链接样式表也不起作用，而且我相信大多数电子邮件客户端都会去掉嵌入的样式表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T04:01:08.173

有一种标准方法可以拦截和处理发送到浏览器的响应。
如果您想接收此响应并对其进行处理，您应该使用[响应过滤器](http://msdn.microsoft.com/en-us/library/system.web.httpresponse.filter.aspx)

```
private void Page_Load(object sender, EventArgs e)
{

  // Filter the text to be rendered as all uppercase.
  Response.Filter = new UpperCaseFilterStream(Response.Filter);
} 
```

该类`UpperCaseFilter`，一个自定义 Stream 类，它将通过它的所有文本转换为大写。

Asp.net 将调用`Write`流的方法。您需要在流类中进行一些缓冲，因为它可能会以块的形式接收数据。

# waitforexit - 作为进程运行 control.exe 不会 WaitForExit()

> ID：12271233
> 
> 赞同：0
> 
> 时间：2012-09-04T20:55:43.903
> 
> 标签：waitforexit

我将 control.exe 作为进程运行。（Windows 7 操作系统、.NET 3.5、C#）。它不会像预期的那样在 WaitForExit() 处停止。即使 control.exe 窗口仍然打开，它也会立即“退出”进程。我也尝试过 process.Exited 事件，它也在应用程序退出之前触发。这是我的代码：

```
 Process process = new Process();
            process.StartInfo.FileName = @"c:\windows\system32\control.exe";
            process.StartInfo.Arguments = @"userpasswords";

            process.Start();

            process.WaitForExit(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T21:37:23.977

从电话发送（请更正我的格式，通过电话需要几个小时）

尝试检查窗口是否可见或任务是否正在运行，如：

```
 using System;
 using System.Collections.Generic;
 using System.Text;
 using System.Reflection;
 using System.Runtime.InteropServices;
 using System.Diagnostics;

 namespace yournamespace
 {
   class FormCheck
   {
    [DllImport("user32.dll", EntryPoint = "FindWindow", SetLastError = true)]
    static extern IntPtr FindWindowByCaption(IntPtr ZeroOnly, string lpWindowName);

    [DllImport("user32.dll", SetLastError = true)]
    public static extern IntPtr FindWindowEx(IntPtr parentHandle, IntPtr childAfter, string className, IntPtr windowTitle);

    [DllImport("user32.dll", CharSet = CharSet.Auto)]
    static extern IntPtr SendMessage(IntPtr hWnd, UInt32 Msg, IntPtr wParam, IntPtr lParam);

    [DllImport("user32.dll", CharSet = CharSet.Auto)]
    static extern IntPtr SendMessage(IntPtr hWnd, UInt32 Msg, int wParam, StringBuilder lParam);

    const int WM_GETTEXT = 0x000D;
    const int WM_GETTEXTLENGTH = 0x000E;

    public static bool IsRunning(string window, bool exactfit)
    { return Check(window,exactfit); }

    public static bool IsRunning(string window)
    { return Check(window); }

    public static bool Check(string Processname)
    {
        Process[] pname = Process.GetProcessesByName(Processname);
        if (pname.Length <= 1) { return false; } else { return true; }
    }

    public static bool Check(string WindowTitle, bool exactfit)
    {
        bool response = false;
        string[] strWindowsTitles = EnumerateOpenedWindows.GetDesktopWindowsTitles();
        string strResponse = "";
        foreach (string strTitle in strWindowsTitles)
        {
            if (strTitle.Contains(WindowTitle))
            {
                if (exactfit)
                {
                    if (strTitle == WindowTitle)
                    {
                        strResponse = strTitle;
                        break;
                    }
                }
                else
                {
                    if (strTitle.Contains(WindowTitle))
                    {
                        strResponse = strTitle;
                        break;
                    }
                }
            }
        }

        string pid = string.Empty;
        if (strResponse != "")
        {
            response = true;
        }
        else { response = false; }

         return response;
      }

  }

  public class EnumerateOpenedWindows
  {
    const int MAXTITLE = 255;
    private static List<string> lstTitles;
    private delegate bool EnumDelegate(IntPtr hWnd, int lParam);
    [DllImport("user32.dll", EntryPoint = "EnumDesktopWindows",
    ExactSpelling = false, CharSet = CharSet.Auto, SetLastError = true)]
    private static extern bool EnumDesktopWindows(IntPtr hDesktop,
    EnumDelegate lpEnumCallbackFunction, IntPtr lParam);
    [DllImport("user32.dll", EntryPoint = "GetWindowText",
    ExactSpelling = false, CharSet = CharSet.Auto, SetLastError = true)]
    private static extern int _GetWindowText(IntPtr hWnd,
    StringBuilder lpWindowText, int nMaxCount);
    [DllImport("user32.dll")]
    [return: MarshalAs(UnmanagedType.Bool)]
    static extern bool IsWindowVisible(IntPtr hWnd);
    private static bool EnumWindowsProc(IntPtr hWnd, int lParam)
    {
        string strTitle = GetWindowText(hWnd);
        if (strTitle != "" & IsWindowVisible(hWnd)) //
        {
            lstTitles.Add(strTitle);
        }
        return true;
    }
    /// <summary>
    /// Return the window title of handle
    /// </summary>
    /// <param name="hWnd"></param>
    /// <returns></returns>
    public static string GetWindowText(IntPtr hWnd)
    {
        StringBuilder strbTitle = new StringBuilder(MAXTITLE);
        int nLength = _GetWindowText(hWnd, strbTitle, strbTitle.Capacity + 1);
        strbTitle.Length = nLength;
        return strbTitle.ToString();
    }
    /// <summary>
    /// Return titles of all visible windows on desktop
    /// </summary>
    /// <returns>List of titles in type of string</returns>
    public static string[] GetDesktopWindowsTitles()
    {
        lstTitles = new List<string>();
        EnumDelegate delEnumfunc = new EnumDelegate(EnumWindowsProc);
        bool bSuccessful = EnumDesktopWindows(IntPtr.Zero, delEnumfunc, IntPtr.Zero); //for current desktop
        if (bSuccessful)
        {
            return lstTitles.ToArray();
        }
        else
        {
            // Get the last Win32 error code
            int nErrorCode = Marshal.GetLastWin32Error();
            string strErrMsg = String.Format("EnumDesktopWindows failed     with code {0}.", nErrorCode);
                throw new Exception(strErrMsg);
            }
        }
    }
} 
```

通过使用“正在运行”的方法之一，例如：

```
 int waiter = 0;
  while (isRunning("Control") 
{
//add 1 to an value and set to zero after x counts
 waiter++;
if (waiter == 1000) { waiter=0; }
 } 
```

您的程序将卡住，直到控制关闭。如果控件永远不会再次关闭，则应插入转义序列；）

# mysql - MySQL 查询 MYSQL 自动递增字段的下一个序列号

> ID：12271235
> 
> 赞同：4
> 
> 时间：2012-09-04T20:55:49.020
> 
> 标签：mysql

在 MySQL 中，是否可以按顺序查询下一个数字以获取自增字段？

对于名为 projects 的表，该表的主键**project_id**是一个自动递增字段。在插入新行之前，我想知道 project_id 将分配的数字。

我该如何查询？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T16:00:24.090

里德是正确的。这个问题似乎与[Find the next available id in MySQL重复](https://stackoverflow.com/questions/1405393/finding-the-next-available-id-in-mysql)

在该线程中，用户**Eimantas**提供了我使用的工作解决方案。为方便起见，在此转载：

`SELECT Auto_increment FROM information_schema.tables WHERE table_name='the_table_you_want';`

**不过，感谢 egyal**和GavinTowey**在**这个线程中的指导。

建议未来的读者注意 Gavin 关于比赛条件的评论（对 egyal 的回答）（即：另一个数据库条目发生在你之前的一瞬间，并“窃取”了你认为你会得到的 ID）。

**强烈建议使用 eggyal 描述的 LAST_INSERT_ID() ，而不是本答案中描述的方法。**

我鼓励未来的读者支持 eggyal 的答案，*因为它是一种更好的方法*，但我希望不要再对这个答案投反对票。由于这是具体提出的问题，因此这是*“正确”*的答案-尽管有鸡蛋的反对意见。我相信没有难过的感觉；如您所知，选择我自己的答案作为正确答案对我没有任何好处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T20:58:51.240

反过来做：先插入新记录，然后使用[`LAST_INSERT_ID()`](http://dev.mysql.com/doc/en/information-functions.html#function_last-insert-id).

# javascript - Google Maps V3 - 我无法调和关闭

> ID：12271237
> 
> 赞同：2
> 
> 时间：2012-09-04T20:55:50.527
> 
> 标签：javascript, google-maps

我知道这是一个常见问题，但我已经盯着，阅读谷歌并盯着更多，但我看不出有什么问题。

我从 MySql 表中填充我的地图，对英国邮政编码进行反向地理编码，在结果周围画一个圆圈，但我无法理解为什么我的闭包函数不起作用。

据我了解，闭包原则是关于从我试图用函数完成的循环范围之外访问变量 - 但对于我的一生，我无法让它工作。

我相信有人会为我的明显错误找到答案，我将不胜感激任何人可以提供的任何帮助。

```
var mapOptions = {
    zoom : 8,
    center : new google.maps.LatLng(37.09024, -95.712891),
    mapTypeId : google.maps.MapTypeId.ROADMAP
};

var infowindow = new google.maps.InfoWindow({
    content : contentString
});

var geocoder = new google.maps.Geocoder();
var map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);
var contentString;
var i

downloadUrl("getXML.php", function(data) {

    var xml = data.responseXML;
    var markers = xml.documentElement.getElementsByTagName("marker");
    for (i = 0; i < markers.length; i++) {
        var name = markers[i].getAttribute("name");
        contentString =(name);
        var postcode = markers[i].getAttribute("postcode");
        var dateadded = markers[i].getAttribute("dateadded");
        var extra = markers[i].getAttribute("extra");

        geocoder.geocode({
            'address' : postcode
        }, function(results, status) {
            if (status == google.maps.GeocoderStatus.OK) {
                map.setCenter(results[0].geometry.location);
                var marker = new google.maps.Marker({
                    map : map,
                    clickable : true,
                    position : results[0].geometry.location
                })
                google.maps.event.addListener(marker, 'click', (function(marker, i) {
                    return function() {
                        infowindow.setContent(name );
                        infowindow.open(map, marker);
                    }
                })(marker, i));

                var circle = new google.maps.Circle({
                    map : map,
                    radius : 12070.99, // 15 miles in metres
                    fillColor : '#AA0000'
                });
                circle.bindTo('center', marker, 'position');

            } else {
                alert('Geocode was not successful for the following reason: ' + status);
            }

        });

    }

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T02:03:53.003

我将函数闭包与标记（createMarker）和地理编码器（geocodeMarker）的函数一起使用

```
var mapOptions = {
    zoom : 8,
    center : new google.maps.LatLng(37.09024, -95.712891),
    mapTypeId : google.maps.MapTypeId.ROADMAP
};

var infowindow = new google.maps.InfoWindow({
    content : contentString
});

var geocoder = new google.maps.Geocoder();
var map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);
var contentString;
var i;
function createMarker(latlng, name, html)
{
   var marker = new google.maps.Marker({
         map : map,
         clickable : true,
         position : latlng
     })
     google.maps.event.addListener(marker, 'click', function() {
         infowindow.setContent(name );
         infowindow.open(map, marker);
     });

     var circle = new google.maps.Circle({
         map : map,
         radius : 12070.99, // 15 miles in metres
         fillColor : '#AA0000'
     });
     circle.bindTo('center', marker, 'position');
}

function geocodeMarker(postcode, name, html)
{
  geocoder.geocode({
      'address' : postcode
  }, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
          map.setCenter(results[0].geometry.location);
          createMarker(results[0].geometry.location, html);
      } else {
          alert('Geocode was not successful for the following reason: ' + status);
      }

  });
}

downloadUrl("getXML.php", function(data) {

        var xml = xmlParse(data);
    var markers = xml.documentElement.getElementsByTagName("marker");
    for (i = 0; i < markers.length; i++) {
        var name = markers[i].getAttribute("name");
        contentString =(name);
        var postcode = markers[i].getAttribute("postcode");
        var dateadded = markers[i].getAttribute("dateadded");
        var extra = markers[i].getAttribute("extra");
        geocodeMarker(postcode, name, contentString);

    }

}); 
```

# c# - 在 TableLayout 的单元格内对齐控件

> ID：12271249
> 
> 赞同：0
> 
> 时间：2012-09-04T20:56:43.940
> 
> 标签：c#, winforms

在下图中，我定义了一个 6 行表格布局并将控件放置在其单元格中，一个单元格中放置标签，另一个单元格用于控件自身（例如文本框）

问题是由该字段选项单选框引起的，它会使单元格如此之大，因此“预览数据值”标签下的文本框位于下方...

你建议如何解决这个问题？

![在此处输入图像描述](../Images/0f5cb44039678950175063ac29c41ff8.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T21:07:21.980

根据我之前的经验，我根本不会使用表格布局。相反，我会将每个控件上的锚设置为随着调整大小而动态变化。

但如果你坚持使用表格布局，或许你应该更改预览数据值单元格的 RowSpan 属性，并将标签放在顶部，文本框在下面。

另一种选择是使用像 GroupBox 这样的容器，其标题属性可以设置为“预览数据值”，将文本框放在该容器中并将“停靠”属性设置为“填充”。然后从它的外观来看，您甚至不需要最后一行。

如果您想完全疯狂并实现自己的绘图，请参阅[MSDN 上的这篇文章。](http://msdn.microsoft.com/en-us/library/system.windows.forms.tablelayoutpanel.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T21:07:27.467

做第七行，让选项组跨越两行。

# python - 如何使用 python 将具有特定前缀的所有文件复制到新目录？

> ID：12271254
> 
> 赞同：-6
> 
> 时间：2012-09-04T20:57:11.687
> 
> 标签：python, algorithm

假设我有以下目录结构：

```
C:\Test
C:\Test\2009
C:\Test\2009\files\Artists
C:\Test\2009\files\Artists\SnoopDog
C:\Test\2009\files\Artists\SnoopDog\albums.txt
C:\Test\2009\files\Artists\SnoopDog\albums.jpg
C:\Test\2009\files\Artists\SnoopDog\hobbies.doc
C:\Test\2009\files\Artists\SmashMouth\albums.txt
C:\Test\2009\files\Artists\SmashMouth\hobbies.doc
C:\Test\2010\files\Artists\SnoopDog\albums.txt
C:\Test\2010\files\Artists\SnoopDog\albums.jpg
C:\Test\2010\files\Artists\SnoopDog\hobbies.doc 
```

以下是我想要作为目标的目录结构：

```
C:\ToDirectory\
C:\ToDirectory\2009\albums\SnoopDog_albums.txt
C:\ToDirectory\2009\albums\SnoopDog_albums.jpg
C:\ToDirectory\2009\albums\SmashMouth_albums.txt
C:\ToDirectory\2009\albums\SmashMouth_albums.jpg
C:\ToDirectory\2009\hobbies\SmashMouth_hobbies.doc
C:\ToDirectory\2009\hobbies\SnoopDog_hobbies.doc
C:\ToDirectory\2010\albums\SnoopDog_albums.txt
C:\ToDirectory\2010\albums\SnoopDog_albums.jpg 
```

假设`C:\Test`包含所有文件并且`C:\ToDirectory`开始时是一个空目录。

拥有一个函数的最有效方法是什么，我只需给出它的源目录`C:\Test`和目标目录`ToDirectory`，脚本转到最低级别`C:\Test`，遍历目录中的每个文件并检查文件名（忽略扩展名）是否是一个 duretiry在`ToDirectory`结构中，如果没有，请创建它并将文件复制到其中，并在其名称的开头附加父目录并使用 python？

我在一系列下一个循环中使用 os.listdir 和 os.isdir ，但它似乎很长，虽然它可以工作，但似乎效率低下......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T21:49:56.120

您可以使用递归而不是显式嵌套循环来实现更短的代码。

递归并不总是更有效，但您的代码看起来会更好！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T23:55:03.113

试试python的高级文件操作库（[import shutil](http://docs.python.org/library/shutil.html)）

也可以考虑使用pythons优秀的目录遍历功能（[from os import walk](http://docs.python.org/library/os.html#os.walk)）

您不需要复制文件，只需重命名目录和文件名。

# pdf - 复制和粘贴时如何使 Illustrator PDF 有新行？

> ID：12271262
> 
> 赞同：0
> 
> 时间：2012-09-04T20:57:55.977
> 
> 标签：pdf, formatting, adobe-illustrator

我在 Adob​​e Illustrator 工作。我正在尝试创建一个可以复制并粘贴到纯文本编辑器中的文档。我遇到的问题是，当我从 PDF 复制文本并将其粘贴到编辑器时，我最终会丢失分隔内容的新行：

它在 PDF 中的位置如下所示：

```
Title

Objective

    To create a blah blah blah... 
```

但是，将其粘贴到文本编辑器中时，它看起来像这样：

```
Title Objective To create a blah blah blah... 
```

Title 和 Objective 是简单的文本元素，而“To create a blah blah blah ...”实际上是一个文本框。如何在格式中添加新行以确保在粘贴时保留分隔符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T07:27:54.477

PDF 文件中的文本通常不包含“换行”（即回车或换行）字符，因为文本放置在页面上的特定位置。

在极少数情况下，文本可能会包含这些字符，但这可能只适用于“愚蠢”的生产应用程序。像 Illustrator 这样功能丰富的应用程序（它可以做*的*不仅仅是无聊的水平文本行）几乎总是会在不使用这些字符的情况下放置文本。

MuPDF 和 ghostscript 都可以提取文本并尝试维护基本布局，我相信还有其他应用程序也可以这样做。对于一般情况，复制和粘贴无法胜任。

# ios - 使用 Trigger.io 开发时如何使用自签名 SSL 证书？

> ID：12271264
> 
> 赞同：4
> 
> 时间：2012-09-04T20:57:57.147
> 
> 标签：ios, ssl, triggers, trigger.io, self-signed

我们的后端在 Rails 中，出于多种原因，必须使用自签名 SSL 证书在 rails 上运行开发环境。手动信任证书后，这在桌面上可以正常工作。

使用 Trigger.io，我们正在从同一后端开发针对 iOS 的移动应用程序。如果我们能够使用 SSL 运行 rails 服务器（这样我们可以比较浏览器输出）并且仍然让 iOS 模拟器正确连接而不会抱怨无效证书，那将是理想的选择。

生产使用正确的 ssl-cert，但是设置模拟器的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T16:15:53.030

您可以尝试在设备上安装 CRT 文件，如下所示：

*   将您的 CRT 文件推送到您的设备可以访问的服务器

*   在设备上，浏览到[http://example.com/certificate.crt](http://example.com/certificate.crt)然后安装证书。

这类似于您如何使用代理调试 SSL，如此[处所述](http://www.charlesproxy.com/documentation/faqs/ssl-connections-from-within-iphone-applications/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T21:37:32.370

出于测试目的，您可以围绕 NSURLRequest 创建一个忽略证书的类别：

```
@implementation NSURLRequest (IgnoreSSL)
+ (BOOL)allowsAnyHTTPSCertificateForHost:(NSString*)host
{
  return YES;
}
@end 
```

这显然不能提交到应用商店，也不应该在生产中使用。

# delphi - 如何使用 WMI 和 Delphi 关联逻辑驱动器和物理磁盘？

> ID：12271269
> 
> 赞同：4
> 
> 时间：2012-09-04T20:58:09.550
> 
> 标签：delphi, wmi, each

我已经在一个可以从 Micro 读取信息的应用程序上工作了很长时间，一些（大多数）失败了更多仍然缺少一些，我正在使用 WMI 和 Delphi。我面临的问题是我需要列出属于每个HD的单元，例如：HD1有驱动器C：，D：等等。

谢谢你

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-04T21:45:11.443

要关联逻辑驱动器和物理磁盘，您必须使用[`Win32_DiskDrive`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394132%28v=vs.85%29.aspx)类和[`Win32_DiskDriveToDiskPartition`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394134%28v=vs.85%29.aspx)ASSOCIATORS[类](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384793%28v=vs.85%29.aspx)。[`Win32_LogicalDiskToPartition`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394175%28v=vs.85%29.aspx)

试试这个样本。

```
{$APPTYPE CONSOLE}

uses
  SysUtils,
  ActiveX,
  ComObj,
  Variants;

function ListDrives : string;
var
  FSWbemLocator  : OLEVariant;
  objWMIService  : OLEVariant;
  colDiskDrives  : OLEVariant;
  colLogicalDisks: OLEVariant;
  colPartitions  : OLEVariant;
  objdiskDrive   : OLEVariant;
  objPartition   : OLEVariant;
  objLogicalDisk : OLEVariant;
  oEnumDiskDrive : IEnumvariant;
  oEnumPartition : IEnumvariant;
  oEnumLogical   : IEnumvariant;
  iValue         : LongWord;
  DeviceID       : string;
begin;
  Result:='';
  FSWbemLocator   := CreateOleObject('WbemScripting.SWbemLocator');
  objWMIService   := FSWbemLocator.ConnectServer('localhost', 'root\CIMV2', '', '');
  colDiskDrives   := objWMIService.ExecQuery('SELECT DeviceID FROM Win32_DiskDrive');
  oEnumDiskDrive  := IUnknown(colDiskDrives._NewEnum) as IEnumVariant;
  while oEnumDiskDrive.Next(1, objdiskDrive, iValue) = 0 do
   begin
      Writeln(Format('DeviceID %s',[string(objdiskDrive.DeviceID)]));
      //Escape the `\` chars in the DeviceID value because the '\' is a reserved character in WMI.
      DeviceID        := StringReplace(objdiskDrive.DeviceID,'\','\\',[rfReplaceAll]); 
      //link the Win32_DiskDrive class with the Win32_DiskDriveToDiskPartition class
      colPartitions   := objWMIService.ExecQuery(Format('ASSOCIATORS OF {Win32_DiskDrive.DeviceID="%s"} WHERE AssocClass = Win32_DiskDriveToDiskPartition',[DeviceID]));
      oEnumPartition  := IUnknown(colPartitions._NewEnum) as IEnumVariant;
      while oEnumPartition.Next(1, objPartition, iValue) = 0 do
      begin
       if not VarIsNull(objPartition.DeviceID) then
       begin
        Writeln(Format('   Partition %s',[string(objPartition.DeviceID)]));
        //link the Win32_DiskPartition class with theWin32_LogicalDiskToPartition class.
        colLogicalDisks := objWMIService.ExecQuery('ASSOCIATORS OF {Win32_DiskPartition.DeviceID="'+VarToStr(objPartition.DeviceID)+'"} WHERE AssocClass = Win32_LogicalDiskToPartition'); 
        oEnumLogical  := IUnknown(colLogicalDisks._NewEnum) as IEnumVariant;
          while oEnumLogical.Next(1, objLogicalDisk, iValue) = 0 do
          begin
              Writeln(Format('     Logical Disk %s',[string(objLogicalDisk.DeviceID)]));
              objLogicalDisk:=Unassigned;
          end;
       end;
       objPartition:=Unassigned;
      end;
       objdiskDrive:=Unassigned;
   end;
end;

begin
 try
    CoInitialize(nil);
    try
      ListDrives;
    finally
      CoUninitialize;
    end;
 except
    on E:Exception do
        Writeln(E.Classname, ':', E.Message);
  end;
  Readln;
end. 
```

这将输出类似的东西

```
DeviceID \\.\PHYSICALDRIVE0
   Partition Disk #0, Partition #0
     Logical Disk F:
DeviceID \\.\PHYSICALDRIVE1
   Partition Disk #1, Partition #0
     Logical Disk C: 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T09:35:36.847

使用 MagWMi 包装器及其单线功能（单线很慢 - 但这不是需要速度的地方）。我用它来制作 2 级磁盘列表。

*   硬盘 1 -> 字母 1、字母 2
*   硬盘 2 -> 字母 3、字母 4
*   NetServer 1 -> 字母 5、字母 6
*   NetServer 2 -> 字母 7、字母 8
*   无法识别 -> 所有其他字母

但是您必须记住，有些磁盘可能没有任何字母就可以使用。所以这会告诉你有关根目录的信息，但不会更多。磁盘 C：可以生成多个物理磁盘。并且某些物理磁盘可能根本不用字母。

```
unit WMI_Helper;

interface

function WMINetDiskName(const disk: string { 'C:' - w/o slash } ): string;
function WMIPhysDiskName(const disk: string { 'C:' - w/o slash } ): string;
function WMIGetVolumeName(const disk: string { 'C:' - w/o slash } ): string;

implementation

uses magwmi, SysUtils, StrUtils, Windows, IOUtils;

function WMIGetProp(const query, param, resultProp: string): string;
begin
  if MagWmiGetOneQ(StringReplace(query, '%s', param, []), resultProp, Result) <= 0
  then
    Result := '';
  Result := Trim(Result);
end;

function WMINetDiskName(const disk: string { 'C:' - w/o slash } ): string;
const
  req = 'select ProviderName from Win32_MappedLogicalDisk where DeviceID = "%s"';
  prop = 'ProviderName';
var
  i: integer;
begin
  Result := WMIGetProp(req, disk, prop);

  If not TPath.IsUNCPath(Result) then
    exit('');

  i := PosEx('\', TPath.GetPathRoot(Result), 3);
  if i <= 0 then
    exit('');

  SetLength(Result, i - 1);
end;

function WMIPhysDiskName(const disk: string { 'C:' - w/o slash } ): string;
const
  resultProp = 'DeviceID';
  reqPart = 'ASSOCIATORS OF {Win32_LogicalDisk.DeviceID="%s"} WHERE ResultClass=Win32_DiskPartition';
  reqDisk = 'ASSOCIATORS OF {Win32_DiskPartition.DeviceID="%s"} WHERE ResultClass=Win32_DiskDrive';
begin
  Result := WMIGetProp(reqPart, disk, resultProp);
  if Result > '' then
    Result := WMIGetProp(reqDisk, Result, resultProp);
end;

function WMIGetVolumeName(const disk: string { 'C:' - w/o slash } ): string;
const
  prop = 'VolumeName';
  reqNet = 'select VolumeName from Win32_MappedLogicalDisk where DeviceID = "%s"';
  reqPhy = 'select VolumeName from Win32_LogicalDisk where DeviceID = "%s"';

begin
  Result := WMIGetProp(IfThen(GetDriveType(PChar(disk)) = DRIVE_REMOTE, reqNet,
    reqPhy), disk, prop);
end;

end. 
```

# regex - 根据创建日期移动文件

> ID：12271273
> 
> 赞同：2
> 
> 时间：2012-09-04T20:58:23.650
> 
> 标签：regex, linux, shell

我遇到了以下命令的问题，该命令将超过 13 天的文件从 /unpack 移动到 /storage。

```
find /home/user/private/data/unpack/* -mtime +13 -exec mv {} /home/user/private/data/unpack/storage/ \; 
```

但是，如果我将这些文件保存在 /storage 文件夹中的子文件夹中，则上述命令会将所有这些文件从其文件夹中移回 /storage

我四处寻找一种从 find 命令中完全排除 /storage 的方法，并采用了粗修剪作为一种方法。我对 linux 和 regex 还是很陌生，所以我仍然没有运气让它自己工作。

为有时间提供帮助的专业人士交叉手指。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T21:21:52.177

`\`这可能对您有用（它是没有那些结尾字符的单行）：

```
find /home/user/private/data/unpack/* \
     -mtime +13 \
     \( ! -regex '/home/user/private/data/unpack/storage/.*' \) \
     -exec mv {} /home/user/private/data/unpack/storage/ \; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-05T18:56:30.070

知道这是一篇旧帖子，但你试过这个吗

```
find /home/user/private/data/unpack/* -mtime +13 ! -path /home/user/private/data/unpack/storage/* -exec mv {} /home/user/private/data/unpack/storage/ \; 
```

那应该行得通。

抱歉没有'赶上其他命令工作

# r - R是否支持8位变量？

> ID：12271274
> 
> 赞同：0
> 
> 时间：2012-09-04T20:58:41.390
> 
> 标签：r, csv, 8-bit

我正在尝试将一个大的（~700Mb）.csv 文件读入 R。

该文件包含一个小于 256 的整数数组，带有一个标题行和 2 个标题列。

我用：

```
trainSet <- read.csv(trainFileName) 
```

这最终与：

```
Loading Data...
R(2760) malloc: *** mmap(size=151552) failed (error code=12)
*** error: can't allocate region
*** set a breakpoint in malloc_error_break to debug
R(2760) malloc: *** mmap(size=151552) failed (error code=12)
*** error: can't allocate region
*** set a breakpoint in malloc_error_break to debug
Error: cannot allocate vector of size 145 Kb
Execution halted 
```

查看内存使用情况，它在崩溃时页面文件使用量为零的 6Gb 机器上的使用量约为 3Gb，因此可能有另一种方法来修复它。

如果我使用：

```
trainSet <- read.csv(trainFileName, header=TRUE, nrows=100)
classes = sapply(train,class); 
```

我可以看到所有列都被加载为我认为是 32 位的“整数”。

显然，使用 3Gb 加载 700Mb .csv 文件的一部分远非高效。我想知道是否有办法告诉 R 为列使用 8 位数字？这是我过去在 Matlab 中所做的，它很有效，但是，我似乎在任何地方都找不到提到 R 中的 8 位类型。

它存在吗？我如何告诉它 read.csv 使用它？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T21:31:52.240

问：你能告诉 R 使用 8 位数字吗？

答：不。（编辑：见下面 Dirk 的评论。他比我聪明。）

问：更多 RAM 会有帮助吗？

答：也许吧。假设 64 位操作系统和 R 的 64 位实例是起点，则为“是”，否则为“否”。

隐含的问题 A：700 MB 的 .csv 数据集在被 读取时是否为 700 MB `read.csv`？

答：也许吧。如果它真的是整数，它可能会更小或更大。每个整数将占用 4 个字节，如果您的大多数整数都在 -9 到 10 的范围内，那么当每个整数存储为 4 个字节时，它们实际上可能会“扩展”大小。目前，每个值只使用 1-3 个字节，因此您希望`colClasses="integer"`在读取功能中使用大约 50% 的大小。否则，如果存在任何数据输入故障，它们可能会被存储为因子或 8 字节“数字”。

隐含的问题 B：如果您将数据放入工作区，您将能够使用它吗？

答：只有可能。由于 R 在分配时复制的方式，即使它是其自己名称的副本，您至少需要比最大对象多三倍的内存。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T21:07:59.580

狭义的答案是附加包[ff](http://cran.r-project.org/package=ff)允许您使用更紧凑的表示。

缺点是不同的表示形式会阻止您将数据传递给标准函数。

因此，您可能需要重新考虑您的方法：可能对数据进行二次采样，或者获取更多 RAM。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-04T23:21:50.333

不想刻薄，但解决此问题的方法记录在`?read.csv`：

> ```
>  These functions can use a surprising amount of memory when reading
>  large files.  There is extensive discussion in the ‘R Data
>  Import/Export’ manual, supplementing the notes here.
> 
>  Less memory will be used if ‘colClasses’ is specified as one of
>  the six atomic vector classes.  This can be particularly so when
>  reading a column that takes many distinct numeric values, as
>  storing each distinct value as a character string can take up to
>  14 times as much memory as storing it as an integer.
> 
>  Using ‘nrows’, even as a mild over-estimate, will help memory
>  usage. 
> ```

由于 I/O，即使使用我的 SSD，此示例也需要一段时间才能运行，但没有内存问题：

```
R> # In one R session
R> x <- matrix(sample(256,2e8,TRUE),ncol=2)
R> write.csv(x,"700mb.csv",row.names=FALSE)

R> # In a new R session
R> x <- read.csv("700mb.csv", colClasses=c("integer","integer"),
+ header=TRUE, nrows=1e8)
R> gc()
            used  (Mb) gc trigger   (Mb)  max used   (Mb)
Ncells    173632   9.3     350000   18.7    350000   18.7
Vcells 100276451 765.1  221142070 1687.2 200277306 1528.0
R> # Max memory used ~1.5Gb
R> print(object.size(x), units="Mb")
762.9 Mb 
```

# regex - 正则表达式 - 匹配除某些字符串之外的所有内容

> ID：12271279
> 
> 赞同：3
> 
> 时间：2012-09-04T20:58:51.433
> 
> 标签：regex, scala

为了验证正则表达式，我使用了 Scala 控制台： `"REGEX".r.findFirstIn("exampleString").isDefinied`

我有很多字符串，我想与正则表达式匹配。
每当字符串恰好是“foo”或“bar”时，我希望上面的内容为假。

我得到的最接近的是`^((?!foo|bar).)*$`.
但是，问题在于，一旦它包含“foo”或“bar”，一切都是错误的，尽管我希望“fooof”为真。

更新：
我确实需要这个正则表达式来配​​置脚本。所以我不能使用 Scala 方法或改变正则表达式的处理方式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T21:02:59.843

为什么不只允许那些**不**匹配的字符串`^(foo|bar)$`？如果这不是一个选项，请尝试此正则表达式：`^(?!^(foo|bar)$).*$`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T21:03:14.417

这个怎么样？

```
scala> def isFooOrBar(s: String) = !s.matches("""foo|bar""")
isFooOrBar: (s: String)Boolean

scala> isFooOrBar("foo")
res4: Boolean = false

scala> isFooOrBar("bar")
res5: Boolean = false

scala> isFooOrBar("foof")
res6: Boolean = true 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T15:34:02.097

这种模式有效`^(?!(foo|bar)$)`。一个测试示例：

```
import java.util.regex.Pattern;

object NotRE extends App {
  val p = Pattern.compile("^(?!(foo|bar)$)");

  val test = Seq("foo", "bar", "1foo", "foo1", "2bar", "bar2", "3bar3", "3foo3");

  print(test map ((x: String) => (x, p.matcher(x).find())));
} 
```

# php - 数组内的变量

> ID：12271282
> 
> 赞同：0
> 
> 时间：2012-09-04T20:59:07.880
> 
> 标签：php

为什么这不起作用：

```
$emails = $_POST["emails"];
$emails = "'" . implode("','", explode(' ', $emails)) . "' ";
// The result is emails like this: 'foo@bar.com','foo@bar.com'

$to = array($emails); 
```

如何将变量`$emails`放入我的数组中？（我确信学习 PHP 是显而易见的）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T21:01:49.577

所以听起来 $_POST['emails'] 是一个空格分隔的列表，你想进入一个数组？

只需这样做：

```
$email_array = explode(' ', $_POST['emails']); 
```

当然，在达到这一点之前，您可能想要进行一些输入验证。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T21:02:48.017

您正在设置`$to`一个具有一个索引的数组，该索引的值是一个字符串`'foo@bar.com','foo@bar.com'`

如果您想要一系列电子邮件，请取下`implode`

```
$emails = explode(' ', $emails); // an array 
```

我不确定您要在这里使用代码完成什么，但是您要从字符串到数组，再到字符串，再到数组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T21:04:43.883

PHP 函数`explode`将返回一个分隔值的数组。

如果电子邮件已经用空格分隔，`$_POST['emails']`那么您不需要内爆。

这将有助于：

```
$emails = $_POST["emails"];
$to = explode(' ', $emails); 
```

# javascript - 使用 selected.js，如何将图像添加到下拉项？

> ID：12271283
> 
> 赞同：7
> 
> 时间：2012-09-04T20:59:13.573
> 
> 标签：javascript, jquery-chosen

使用 selected.js，如何将图像添加到下拉项？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-04T21:00:19.283

通过`background-image`在选择的列表项上设置 a：

```
.chzn-results li {
    background: url('path/to/img.png') no-repeat 3px center;
    padding-left: 12px;
} 
```

相应地调整像素数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-04T12:13:33.913

为了完成 Joseph（我无法对他的回答添加评论），该课程自未知版本以来发生了变化：这是 v1.0.0 中正确的 css：

```
li.active-result {
    background: url('path/to/img.png') no-repeat 3px center;
    text-indent:2em;
} 
```

谢谢约瑟夫！

# c - 如何使用 Nios II 打开文件

> ID：12271288
> 
> 赞同：1
> 
> 时间：2012-09-04T20:59:39.030
> 
> 标签：c, nios

我目前使用 NIOS II 和 Quartus II v12.0

由于 Nios II 使用语言 C，它可以打开文件，但是命令 fopen("filename","re​​admode"); 无法使用，因为它不在 Nios 的 stdio.h 上，所以我的疑问是，如何在 Nios 中打开文件？我需要使用新图书馆吗？我是否必须将我的代码块 stdio.h 更改为我的 Nios 代码块？

现在谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T21:43:53.477

我只是看了一下[Nios II Software Developers Handbook](http://www.google.co.uk/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CCMQFjAA&url=http://www.altera.com/literature/hb/nios2/n2sw_nii5v2.pdf&ei=D3NGUM8wx6bRBdb0gOAF&usg=AFQjCNFvJaKdwziCRvFcxwtmL9Eq0RNU8w&sig2=0Ut_SnB4xVROa4Xt9kB1tA&cad=rja)，发现它使用了[Newlib](http://sourceware.org/newlib/) C 库，并且开发人员手册引用了 fopen() 所以我只能假设你是不正确的。Newlib 是开源的，所以你可以自己研究。

即使这样 Newlib 库在任何情况下都没有实现文件系统 - stdio 不是文件系统；*相反，它为任何*流 I/O 设备提供标准接口。文件系统本身通常由操作系统或第三方库提供。

[即使你有一个文件系统，在这种情况下，你仍然必须通过 Newlib系统调用存根](http://sourceware.org/newlib/libc.html#Syscalls)在任何情况下提供它和 stdio 之间的低级接口。

NiosII 仅定义处理器架构，任何文件系统硬件都将是完全专有的，因此在任何情况下都不可能拥有开箱即用的文件系统支持 - 它必须适应您的硬件。

您打算在哪种设备上创建文件系统？您可以使用第三方库，例如[EFSL](http://efsl.be)或[ELM FatFs](http://elm-chan.org/fsw/ff/00index_e.html)。您可以单独使用它们，也可以通过实施适当的系统调用将它们集成到标准输入输出中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-09T03:30:04.320

我使用了 DE2-115 DVD 中的 Demonstration 项目并获得了一个 FAT 库，现在我可以打开文件了。

# c# - C# 文档 ... 上课

> ID：12271295
> 
> 赞同：8
> 
> 时间：2012-09-04T21:00:23.993
> 
> 标签：c#, .net, documentation, sandcastle

我有一个类，我想创建一个关于如何使用的简单示例。但是，当我在类声明中使用标记时，该示例不会出现在 Sandcastle 输出中。它适用于对象的成员，但不适用于类本身。沙堡能应付吗？

我想做的一个例子是。

[MSDN TcpClient 文档](http://msdn.microsoft.com/en-us/library/system.net.sockets.tcpclient.aspx)

这有一个关于如何使用该类的示例。我怎样才能在我的课堂上包含这样的东西？

**这是我想做的：**

```
/// <summary> My example class </summary>
/// <example>
///   <code>
///      // Example code on how to use the class
///   </code>
/// </example>
public class MyClass
{
    public string MyString {get;set;}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-12T17:10:20.780

对于 Sandcastle，可以通过使用您自己的标签转换定义修改 main_sandcastle.xslt 文件来创建自定义标签。您会感兴趣的文件是：

转换/main_sandcastle.xslt 内容/shared_content.xml

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T21:46:37.957

由于包含泛型的示例，文档未正确解析，我不得不将所有 < 替换为`&lt;`并且 >替换为`&gt;`。

我已经通过将 this is a test 放在文档示例中测试了文档，它运行良好，但由于某种原因，它无法与我的真实代码一起正常工作。用适当的转义序列替换标签后，一切正常。

另请注意，声称的 {T} 也不能正常工作，因为它是逐字打印而不是翻译成通用语句。虽然我希望在`<code></code>`声明中这样做，但我也希望`List<string>`声明也能正常工作。

# android - Android 将字符串格式化为分钟和秒

> ID：12271297
> 
> 赞同：0
> 
> 时间：2012-09-04T21:00:44.243
> 
> 标签：android, json, string, gdata

我正在解析 YouTube JSON-C GDATA 提要，因为它是 JSON，所以它不能包含冒号 (:)，所以当我解析字符串持续时间时，它以纯文本形式出现，即 823 或 2421。我如何将其格式化为更具可读性？即 823 --> 8:23 或 2421 --> 24.21 或 23 --> 0:23？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T21:09:58.903

我想严格回答你的问题，答案是：

```
//Check the length of the string and maybe add zero at the beginning
string = StringBuffer(string).insert(2, ":").toString(); 
```

注意：我应该使用 string.getLength()-2，但我希望你明白了 ;-)

但是，就个人而言，我会以秒或其他格式发送时间。

```
String dateStr = "03/08/2010"; 

SimpleDateFormat curFormater = new SimpleDateFormat("dd/MM/yyyy"); 
Date dateObj = curFormater.parse(dateStr); 
SimpleDateFormat postFormater = new SimpleDateFormat("MMMM dd, yyyy"); 

String newDateStr = postFormater.format(dateObj); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T00:51:36.330

这段代码应该这样做：

```
String time = "322";
int length = time.length();
StringBuffer s = new StringBuffer(time);

switch(length) {
    case(1):    s.insert(0, "0:0"); break; //ex: 2 -> 0:02
    case(2):    s.insert(0, "0:"); break; //ex: 22 -> 0.22
    case(3):    s.insert(1, ":"); break;  //ex: 322 -> 3:22
    case(4):    s.insert(2, ":"); break; //ex: 2421 -> 24:21
} 
```

`case(5)`如果您希望以小时为单位，您可以继续添加。

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T21:04:54.897

[http://www.exampledepot.com/egs/java.text/parsedate.html](http://www.exampledepot.com/egs/java.text/parsedate.html)

那应该有帮助；）

# recursion - trie reg exp parse 跳过 char 并继续

> ID：12271298
> 
> 赞同：0
> 
> 时间：2012-09-04T21:00:49.783
> 
> 标签：recursion, string-matching, trie

设置：1）由链接节点形成的字符串树数据库和链接到在叶子中终止的下一个节点的向量数组，2）递归正则表达式函数，如果 A）char '*' 在所有路径中继续下去，直到字符串长度限制为达到，然后继续沿剩余的字符串路径（如果有效）和 B) char '?' 继续向下所有路径 1 个字符，然后继续向下剩余的字符串路径（如果有效）。3) 在 reg 表达式之后，测量候选字符串与 'try' 字符串的编辑距离。

问题：reg 表达式可以很好地添加字符或交换吗？对于 char 但如果剩余的字符串有错误，则没有有效路径到终止叶；使匹配函数变得多余。我尝试添加“跨步”？char 如果到达节点向量的末尾，然后跟随该节点的每条路径 - 只允许此跨步一次；导致内存异常；我无法从逻辑上找到为什么它正在访问超出范围的向量 - 回溯？

问题：1）正则表达式如何跳过无效字符并继续路径？2) 为什么将 'sticking' 字符换成 '?' 导致溢出？

功能：

```
void Ontology::matchRegExpHelper(nodeT *w, string inWild, Set<string> &matchSet, string out, int level, int pos, int stepover)
{   
    if (inWild=="") {
        matchSet.add(out);
    } else {
        if (w->alpha.size() == pos) {
            int testLength = out.length() + inWild.length(); 
            if (stepover == 0 && matchSet.size() == 0 && out.length() > 8 && testLength == tokenLength) {//candidate generator
                inWild[0] = '?';
                matchRegExpHelper(w, inWild,  matchSet, out, level, 0, stepover+1);
            } else 
                return; //giveup on this path
        }
        if (inWild[0] == '?' || (inWild[0] == '*' && (out.length() + inWild.length() ) == level ) ) { //wild
            matchRegExpHelper(w->alpha[pos].next, inWild.substr(1), matchSet, out+w->alpha[pos].letter, level, 0, stepover);//follow path -> if ontology is full, treat '*' like a '?'
        } else if (inWild[0] == '*')
            matchRegExpHelper(w->alpha[pos].next, '*'+inWild.substr(1), matchSet, out+w->alpha[pos].letter, level, 0, stepover); //keep adding chars
        if (inWild[0] == w->alpha[pos].letter) //follow self
            matchRegExpHelper(w->alpha[pos].next, inWild.substr(1), matchSet, out+w->alpha[pos].letter, level, 0, stepover); //follow char 
        matchRegExpHelper(w, inWild, matchSet, out, level, pos+1, stepover);//check next path
    }
} 
```

错误信息：

```
+str    "Attempt to access index 1 in a vector of size 1." std::basic_string<char,std::char_traits<char>,std::allocator<char> >
+err    {msg="Attempt to access index 1 in a vector of size 1." } ErrorException 
```

注意：如果不使用额外的跨步门，此函数适用于数百个带有“*”通配符的测试字符串

半解决：我`pos < w->alpha.size()`在每个调用的路径上设置了一个条件`w->alpha[pos]...`- 这防止了回溯调用尝试访问具有超出范围索引值的向量。还有其他问题需要解决 - 它无限循环添加 ? 并回溯以将其删除，然后重复。但是，现在继续前进。

修改后的问题：为什么在回溯期间位置索引会累积和/或不递减 - 所以在某些时候它调用 `w->alpha[pos]...`无效位置，该位置要么从下一个节点保留，要么`pos+1`在向上传递时以某种方式增加？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T21:35:23.773

已解决：将正则表达式 wilds 函数组合为匹配函数中的循环

# libxml2 - 如何使用 libxml2 创建自终止 XML 文件

> ID：12271301
> 
> 赞同：0
> 
> 时间：2012-09-04T21:00:56.130
> 
> 标签：libxml2

我正在尝试使用 libxml2 创建自终止 XML 文件，但据我搜索，我只有 xmlSaveNoEmptyTags，但我不确定如何使用它。我在 Mac OS 中使用 Objective C 和 libxml2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T13:45:35.437

尝试分析基本的[libxml 示例](http://xmlsoft.org/examples/index.html)。这有帮助吗：[`io2.c`](http://xmlsoft.org/examples/index.html#io2.c)？如果没有，请编辑问题并显示您想要获取的确切 xml 内容。

# jquery - jQuery .click 中的多个变量

> ID：12271302
> 
> 赞同：1
> 
> 时间：2012-09-04T21:00:57.957
> 
> 标签：jquery

我还是 jQuery 的新手，我遇到了一个小障碍。该`.click`功能为什么不能像这样工作：

```
var $rowStartDate = $("span[id^=rowStartDate]");
var $rowEndDate = $("span[id^=rowEndDate]");

$($rowStartDate, $rowEndDate).click(function() { 
//Notice the variables in this selector 
```

但是，当我将元素移出它们的变量时，它会起作用：

```
$("span[id^=rowStartDate], span[id^=rowEndDate]").click(function() { 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T21:02:39.117

的第二个参数[`$()`](http://api.jquery.com/jQuery/)是上下文。所以你可以[`add()`](http://api.jquery.com/add/)改用：

```
$rowStartDate.add($rowEndDate).click(function() { ... }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T21:09:02.763

两者有很大不同。您需要查看[jQuery() 函数](http://api.jquery.com/jQuery/)的定义。当您说`$("span[id^=rowStartDate], span[id^=rowEndDate]").click(function() {`您将字符串传递给`jQuery()`函数时，该函数将作用于该字符串。当您说`$($rowStartDate, $rowEndDate).click(function() {`您将 2 个参数传递给期望的函数时：

```
jQuery( selector [, context] )
jQuery( element )
jQuery( object )
jQuery( elementArray )
jQuery( jQuery object )
jQuery() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T21:12:08.133

您也可以为此使用类。

这是HTML

```
<span class='rowdate' id='rowStartDate'></span>
<span class='rowdate' id='rowEndDate'></span> 
```

这是javascript

```
$('.rowdate').click(function(){
   //Maybe you want to know which span is clicked?
   if($(this).attr("id")=="rowStartDate"){
        //rowStartDate clicked function starts here
   }else{
        //rowEndDate clicked function starts here
   }
}) 
```

# mysql - 如何将记录复制到基于另一个连接表的连接表中

> ID：12271304
> 
> 赞同：0
> 
> 时间：2012-09-04T21:00:58.917
> 
> 标签：mysql, sql

我知道一点 sql 但对这项任务还不够，这就是为什么标题问题看起来有点奇怪的原因。=P

我有一些像下面这样的表（很多数据被剥夺了空间）

```
**Consoles**
id          INT
console     VARCHAR 

**Games**
id          INT
console_id  INT
game        VARCHAR

**Categories**
id          INT
category    VARCHAR

**Categories_Games**
id          INT
category_id INT
game_id     INT 
```

`Categories_Games`作为连接表。

现在，我手动将系统类别添加到控制台的所有注册游戏中。在我开始为另一个控制台重复任务的繁琐工作之前，我需要知道的是：**有没有办法将注册的类别从一个控制台复制到另一个游戏相同的控制台？**

很可能这是可能的，但我无法弄清楚。

编辑。澄清。

我已经注册了所有游戏。（例如，我有 ps3 的“街头霸王 4”和 Xbox 的“街头霸王 4”。

我有与一个控制台（ps3）相关的所有游戏的类别。

如果游戏名称相同，我希望所有 Xbox 游戏都具有相同的 ps3 游戏类别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T21:08:36.920

为了完全避免这种情况，我建议您也通过另一个“连接表”Consoles_Games 在您的游戏和控制台之间创建多对多关系。这样您就可以对每个游戏进行一次分类，然后在提到的 Consoles_Games 表中存储您为哪些游戏机拥有的游戏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T21:12:12.907

在您的模型中，类别与游戏相关，而不是与游戏机相关。游戏与游戏机有关。您想将游戏从一台主机复制到另一台主机吗？假设 id 是 AUTO_INCREMENT，并且你想将 xbox 游戏复制到 wii 游戏，试试这个：

```
insert into consoles(console) values('wii');

insert into games(console_id,game)
select wii.id,g.game
from games g
join consoles x
on x.console_id = g.console_id
join consoles wii
on wii.console = 'wii'
where x.console = 'xbox'; 
```

根据您的说明，请执行以下操作：

```
insert into categories_games(category_id,game_id)
select cg.category_id,other_game.game_id
from games ps3_game
join console ps3
  on ps3.console = 'ps3'
  and ps3.console_id = ps3_game.console_id 
join categories_games cg
  on cg.game_id = ps3_game.game_id
join games other_game 
  on  other_game.game = ps3_game.game
  and other_game.console_id <> ps3_game.console_id; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T21:07:31.027

当然只是这样做：

```
INSERT INTO categories_games
SELECT [INTEGER GAME ID YOU WISH TO ADD], category_id FROM categories_games WHERE game_id = [INTEGER GAME ID OF GAME YOU WISH TO COPY] 
```

# hibernate - JPQL 构造函数表达式 - org.hibernate.hql.ast.QuerySyntaxException：表未映射

> ID：12271305
> 
> 赞同：3
> 
> 时间：2012-09-04T21:01:00.423
> 
> 标签：hibernate, jpa, jpa-2.0, jpql

我最初的问题是[https://stackoverflow.com/questions/12172614/hql-join-without-foreign-key-reference](https://stackoverflow.com/questions/12172614/hql-join-without-foreign-key-reference) 但找不到任何解决方案，因此使用 JPA 进行本机查询。entityManager 的 createNativeQuery 返回 Query 对象，该对象又返回`List<Object[]>`. 我不想在迭代列表时处理索引，因为它本质上容易出错。因此，我查看了其他一些解决方案，并发现 JPQL 的构造函数表达式作为解决方案之一。

表结构是

```
Schema1 -TableA

 - NameColumn
 - PhoneColumn 
```

对应的Java类是

```
 public class PersonSearch implements Serializable {

    public PersonSearch (String NameColumn, String PhoneColumn) {
        this.name = NameColumn;
        this.phone = PhoneColumn;
    }

    private String name;

    private String phone;

    public String getName() {
    return name;
    }

    public void setName(String name) {
    this.name = name;
    }

    public String getPhone() {
    return phone;
    }

    public void setPhone(String phone) {
    this.phone = phone;
    }
    } 
```

查询是

```
 Select NEW com.xyz.PersonSearch(ms.NameColumn, ms.PhoneColumn) From Schema1.TableA ms Where ms.PhoneColumn='9134409930' 
```

使用 entityManager API 运行此查询时

```
entityManager.createQuery(queryString, PersonSearch.class); 
```

低于错误。

```
Caused by: org.hibernate.hql.ast.QuerySyntaxException: Schema1.TableA is not mapped   [Select NEW com.xyz.PersonSearch(ms.NameColumn, ms.PhoneColumn) From Schema1.TableA ms Where ms.PHONE='9134409930'] 
```

我的代码有什么问题？任何想法 ？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-05T16:55:49.620

根据“Pro EJB 3 Java Persistence API”一书

**构造函数表达式**

> 涉及多个表达式的更强大的`SELECT`子句形式是构造函数表达式，它指定查询的结果将使用用户指定的对象类型来存储。考虑以下查询：
> 
> ```
> SELECT NEW example.EmployeeDetails(e.name, e.salary, e.department.name)
> FROM Employee e 
> ```
> 
> 此查询的结果类型是 type `example.EmployeeDetails`。当查询处理器迭代查询结果时，它会实例化`EmployeeDetails`使用与查询中列出的表达式类型匹配的构造函数的新实例。在这种情况下，表达式类型是 String、Double 和 String，因此查询引擎将搜索具有这些类类型的构造函数作为参数。因此，生成的查询集合中的每一行都是一个 `EmployeeDetails`包含员工姓名、薪水和部门名称的实例。
> 
> 必须使用对象的完全限定名称来引用结果对象类型。但是，该类不必以任何方式映射到数据库。任何具有与子句中列出的表达式兼容的构造函数的类`SELECT`都可以在构造函数表达式中使用。
> 
> 构造函数表达式是构建粗粒度数据传输对象或视图对象以供其他应用程序层使用的强大工具。无需手动构建这些对象，可以使用单个查询将视图对象聚集在一起，以便在网页上呈现。

示例代码如下

```
List result = em.createQuery("SELECT NEW example.EmpMenu(e.name, e.department.name) " +
         "FROM Project p JOIN p.employees e " +
         "WHERE p.name = ?1 " +
        "ORDER BY e.name").setParameter(1, projectName).getResultList(); 
```

EmpMenu 类是一个简单的 pojo，没有注释，但有正确的构造函数来匹配构造函数表达式。结果是返回的每一行的 EmpMenu 对象列表。

我相信您的 SQL 部分“....来自 Schema1.TableA ms ..”应该指的是映射的实体。因此，您应该将实体映射到 TableA，然后 jpql 应该更像“.... From MyTableAEntity ms ...”的内容，其中 MyTableAEntity 具有将其映射到 DB 表 TableA 的所有正确 jpa 注释。正如书摘所述，“SELECT NEW ...”的目标不必映射，但 FROM 子句中引用的实体却可以。

# javascript - JavaScript 回调函数和 Google Feed API

> ID：12271308
> 
> 赞同：2
> 
> 时间：2012-09-04T21:01:29.710
> 
> 标签：javascript, callback, rss

我正在尝试使用 div 填充功能在我的网站中实现一些提要。以前，我的页面有相同的 JavaScript 代码块（每个提要一个），但为了成为一名优秀（或更好）的编码员，我决定将重复的代码粘贴到外部脚本文件中并使用不同的参数运行它反而。

不幸的是，提要拒绝加载我的新实现，而且我的想法已经不多了。我根据用户 ndp 在[问题 9662168](https://stackoverflow.com/questions/9662168/how-to-use-the-below-javascript-as-common-instead-of-writing-in-each-div-tag)中的有趣建议构建了我的回调函数。

因此，我的外部脚本文件中有以下两个函数（为简单起见，对代码进行了少量编辑）：

```
function populateRSSFeed(divID) {
    var targetDiv = document.getElementById(divID);
    return function callback(result) {
        if (!result.error) {
            var container = document.getElementById(targetDiv);
            var list = document.createElement('ul');
            <snip: div-population code here>
            container.appendChild(list);
        }
        else
            alert('Error fetching feeds!');
    }
}

function initializeRSSFeed(callback, targetFeed) {
    google.load('feeds','1');
    var feed = new google.feeds.Feed(targetFeed);
    var numEntries = 3;
    feed.setNumEntries(numEntries);
    feed.load(callback);
} 
```

这些函数在我的 HTML 中调用如下：

```
<script>
    var callback = populateRSSFeed('feed-list-wrapper-1');
    initializeRSSFeed(callback, 'http://rss.cnn.com/rss/cnn_topstories.rss');
</script> 
```

我收到的错误消息让我认为在提要加载阶段出了点问题，但我无法确定原因。

```
Uncaught TypeError: Cannot read property 'Feed' of undefined 
```

你们有什么感想？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T21:13:01.013

您似乎没有使用`setOnLoadCallback`等待 Google 脚本加载。这可以解释为什么`google.feeds`是未定义的（直接导致您看到的错误）。

请尝试改用此脚本（我只是按照[开发人员指南](https://developers.google.com/feed/v1/devguide)中的“Hello World”示例进行操作）。

```
google.load('feeds','1');
function onGoogleReady() {
    var callback = populateRSSFeed('feed-list-wrapper-1');
    initializeRSSFeed(callback, 'http://rss.cnn.com/rss/cnn_topstories.rss');
}
google.setOnLoadCallback(onGoogleReady); 
```

# cappuccino - 卡布奇诺中的垂直和水平布局

> ID：12271311
> 
> 赞同：2
> 
> 时间：2012-09-04T21:01:41.387
> 
> 标签：cappuccino

在 Flex 中，有 HGroup 和 VGroup 之类的东西。它们允许水平和垂直对齐内容，元素之间有一些预先指定的间隙。

卡布奇诺有什么相似之处吗？我在任何地方都找不到有关卡布奇诺布局的任何信息（除了自动布局，这不是我需要的）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T04:22:47.233

就像 Primalmotion 所说，没有内置的类可以做到这一点。但是，制作自己的容器视图并不困难：[https ://gist.github.com/3630322](https://gist.github.com/3630322)

我将把水平布局视图作为练习留给你。

稍微解释一下：

在 Cappuccino 运行循环结束时，每个视图都会做两件事：“布局子视图”和“重绘”本身。基本上，当视图被修改（例如，添加新的子视图）时，视图会设置一个标志，表示它需要更新屏幕上的内容。我们实际上可以通过重写被调用的方法来控制布局的发生方式：

```
- (void)layoutSubviews; 
```

这是非常强大且非常高效的，因为这意味着视图在运行循环期间只“渲染”一次。

编辑：我应该注意，该代码根本没有经过测试。我相信它应该可以工作，除非有一些奇怪的错字:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T00:12:49.490

卡布奇诺中没有这样的东西。但是您可以使用自动调整大小的蒙版来做同样的事情。自动布局不能实现什么？

# objective-c - 点击 UITableViewCell 编辑模式上的复选标记

> ID：12271320
> 
> 赞同：0
> 
> 时间：2012-09-04T21:02:42.993
> 
> 标签：objective-c, xcode, cocoa-touch, uitableview

我处于`tableView`编辑模式。我在 tableView 的左侧有一个复选标记。

```
- (UITableViewCellEditingStyle)tableView:(UITableView *)tableView editingStyleForRowAtIndexPath:(NSIndexPath *)indexPath{
return UITableViewCellAccessoryCheckmark;
} 
```

`didSelectRowAtIndexPath`每次我点击复选标记时都会调用我的。

当我取消选中复选标记（即再次点击单元格）时，`didSelectRowAtIndexPath`不会**再次**调用。

任何人都知道解决这个问题？

也许每次按下复选标记时都会调用另一种方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T21:15:31.560

`tableview:didSelectRowAtIndexPath:`仅在*选择*单元格时调用。如果您想知道何时取消选择，请使用：

```
- (void)tableView:(UITableView *)tableView didDeselectRowAtIndexPath:(NSIndexPath *)indexPath 
```

# parallel-processing - 在使用 OpenCL 时并行化...

> ID：12271324
> 
> 赞同：1
> 
> 时间：2012-09-04T21:02:51.703
> 
> 标签：parallel-processing, cpu, opencl, gpu, aparapi

## 原则

我知道，如此简单的计算不值得精心并行化。就是这样一个例子，数学运算只是一些更有趣的计算的占位符。

*[伪代码]*

```
var id = 0,
do {
    id = getGlobalId();
    output[id] = input[id] * input[id];
} while (inRange(id) && output[id] !== 25); 
```

最特殊的表达方式可能是：`output[id] !== 25`. 这意味着： 如果`input`有四个元素（*按此*顺序）：`[8, 5, 2, 9]`，那么`output`应该是`[64, 25]`和`2`or的平方`9`不会被用作的项`output`（因为**`output[id] !== 25`是`true`for`id = 1`和`input[id] = 5`**）。

如果您正在优化这段代码，您可能希望提前计算每个的平方`input[id]`（不证明第二个`while`条件），但不能保证结果稍后是相关的（如果先前计算的结果是 25 ，当前计算的结果是无趣的）。

概括地说，我说的是计算**结果** `output[id]`( `output[id] = calculateFrom(input[id]);`) 可能**与每个都不相关的情况`id`**——结果 ( `output[id]`) 的需要取决于另一个计算的结果。

## 我的目标

**我想使用OpenCL**内核和队列以尽可能并行和高性能的方式执行这个循环。

## 我的想法

*   我想：为了能够并行化这样的`do...while`循环，我们应该`output[id] = calculateFrom(input[id]);`提前同时进行一些计算（）（不知道结果`output[id]`是否有用）。如果先前的结果是`25`，那么结果`output[id]`就会被拒绝。

*   也许我们应该考虑 的概率`output[id] !== 25`。如果概率非常高，我们不会提前进行很多计算，因为它们的结果可能会被拒绝。如果概率绝对低，那么我应该提前做更多的计算。

*   我们应该听听处理单元的当前状态。如果它已经过度紧张，我们不应该进行不重要的提前计算。但是，如果有足够的资源来处理提前计算，那为什么不呢。- 因为：如果提前计算和之前的计算（这些提前计算所依赖的）被同时处理，那么提前附加也可能减慢之前的计算 - *（见我的第二个问题）*

## 我的问题

1.  并行化这些程序是明智的还是高性能的？
2.  我应该根据哪些标准来决定处理单元是否有足够的资源来执行我的提前计算任务？或者：我怎么**知道我的处理单元是否过度紧张**？
3.  您是否知道任何其他并行化此类`do...while`s 的计划？你对此有什么想法吗？

我希望我想告诉你的总是很清楚。但如果不是，请评论我的问题。- 感谢您的回答和帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T11:21:25.487

如果您使用单个工作组并利用设备的本地内存，则可以轻松地并行完成这项工作。opencl 规范说至少有 16kb 的内存可用于此目的。

一些伪ocl代码：

```
__kernel doWhileTest(...){

  local int outputBuff[groupSize];
  local int loopBreak[groupsize];

  loopBreak[localId] = 0;
  barrier();

  for(int i = localId;loopBreak[0]==0;i+=groupSize){
    if(i<maxIndex){
      //do interesting calculation on globalInputValues[i]
      //save result to outputBuff[localId]
      //condition failed? set loopBreak[localId] to 1
    }else{
      //set loopBreak condition here as well
    }

    barrier();
    if(localId ==0){
      //loop through all loopBreak values (for j = 0..groupSize)
      //0? copy outputBuff[j] to global memory (globalInputValues[i+j])
      //1? set loopBreak[0] to 1 as well and break this inner loop
    }
    barrier();
  }

  //optional: write some default value to the remaining global buffer, or save a count of the valid outputs

} 
```

上面的 for 循环可能看起来有点奇怪，因为索引是在循环内与 maxIndex 进行比较，而不是在 for 语句中。这是因为所有工作项都需要到达循环内的两个障碍，如果某些工作项提前爆发（即 maxIndex 不是 groupSize 的倍数），这是不可能的。[相关问题回复：障碍](https://stackoverflow.com/questions/6890302/barriers-in-opencl/8884126#8884126)

另外，我在这里避免全局原子写入，因为它们的性能通常不如本地共享数据/暂存器内存，特别是因为您一次读取/写入整个数据范围。

使用上述设计，可以预先计算一些值，而不会过度处理。在使循环并行的同时，您最多只能丢弃 groupSize 结果。您也可以同时启动许多这样的工作组，但它们会根据自己的数据（而不是全局值或中断条件）各自爆发（或不爆发）。在这种情况下，也许将 groupSize 保持在较低的水平，这样不会破坏的组就不会花费太多时间来处理。（也不要尝试使用全局中断值。我已经自旋锁定了我的 gpu 尝试这个，并得到一个白屏死机。）

# javascript - 如果设置了 cookie，则 Facebook 登录 Javascript SDK 自动登录

> ID：12271325
> 
> 赞同：2
> 
> 时间：2012-09-04T21:02:54.217
> 
> 标签：javascript, facebook, facebook-javascript-sdk

我正在尝试设置我的网站，以便当您进入登录页面时，它会检查是否设置了 cookie，如果设置了则登录应该是自动的 - 即当此页面加载时，它会重定向到创建的“Facebook.ashx”用于记住访问令牌的 cookie。

但是，如果未设置 cookie，则用户必须单击“使用 Facebook 登录”按钮才能继续登录，然后像以前一样继续重定向到“Facebook.ashx”。

这是我的代码 - 目前它总是在用户接受应用程序并继续“Facebook.ashx”后登录

```
<div id="fb-root"></div>  
<script type="text/javascript">
    window.fbAsyncInit = function () {
        FB.init({
            appId: 'My_App_ID', // App ID
            status: true, // check login status
            cookie: true, // enable cookies to allow the server to access the session
            xfbml: true  // parse XFBML
        });

        // Additional initialization code here

        FB.Event.subscribe('auth.authResponseChange', function (response) {
            if (response.status === 'connected') {
                // the user is logged in and has authenticated your
                // app, and response.authResponse supplies
                // the user's ID, a valid access token, a signed
                // request, and the time the access token 
                // and signed request each expire
                var uid = response.authResponse.userID;
                var accessToken = response.authResponse.accessToken;

                // TODO: Handle the access token
                // Do a post to the server to finish the logon
                // This is a form post since we don't want to use AJAX
                var form = document.createElement("form");
                var redirect = "FacebookLogin.ashx?redirect=" + document.getElementById('redirect').innerHTML;
                form.setAttribute("method", 'post');
                form.setAttribute("action", redirect);

                var field = document.createElement("input");
                field.setAttribute("type", "hidden");
                field.setAttribute("name", 'accessToken');
                field.setAttribute("value", accessToken);
                form.appendChild(field);

                document.body.appendChild(form);
                form.submit();

            } else if (response.status === 'not_authorized') {
                // the user is logged in to Facebook, 
                // but has not authenticated your app
            } else {
                // the user isn't logged in to Facebook.
            }
        });
    };

  // Load the SDK Asynchronously
  (function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     ref.parentNode.insertBefore(js, ref);
   }(document));
</script>

<div class="fb-login-button" scope="email, publish_stream">Login with Facebook</div> 
```

感谢您提前提供任何帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T05:25:09.117

`auth.authResponseChange`只要用户登录，就会在每个页面加载时触发。

您要做的是将“已知状态”从服务器传递给客户端，然后在内部进行比较`FB.getLoginStatus`。如果状态发生了变化（例如用户 ID），那么这构成了一个真正的登录，并且您重定向到 ashx 页面以设置新的 cookie。

举个简单的例子：

*   第一步 - 加载页面，刷新空状态（userID = 0）
*   第二步 - 执行 FB.getLoginStatus，比较 authResponse.userID 和 userID
*   第三步 - 由于 authResponse.userID <> 0，重定向到设置 cookie 的页面
*   第四步 - 加载页面，刷新状态（userID = userID from authResponse.userID）
*   第五步 - 执行 FB.getLoginStatus，比较 authResponse.userID 和 userID，因为它们匹配什么都不做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T20:02:12.927

我解决了 - 简单的修复

如果您将状态更改为 false 而不是 true，那么它会等待用户单击登录并检查 cookie 是否存在，只需一个简单的 if 语句即可将状态更改为 true 或 false，如下所示：

```
if (document.cookie.indexOf("fb_token") > 0) //user has already logged in with facebook - process should be automatic
        var fb_status = true;
    else
        var fb_status = false;
    window.fbAsyncInit = function () {
        FB.init({
            appId: 'My App ID', // App ID
            status: fb_status, // check login status
            cookie: true, // enable cookies to allow the server to access the session
            xfbml: true  // parse XFBML
        }); 
```

# c# - 如何计算数组中每个唯一元素的出现次数？

> ID：12271330
> 
> 赞同：0
> 
> 时间：2012-09-04T21:03:15.200
> 
> 标签：c#, arrays, visual-studio-2010

我有一系列邮政编码。如何获取数组中每个唯一邮政编码的列表，然后计算唯一邮政编码在数组中出现的次数？

我看到了这个：

[一种计算列表中出现次数的方法](https://stackoverflow.com/questions/1139181/c-a-method-to-count-occurrences-in-a-list)

我有一种预感，这是解决我的问题的方法，但我不太明白。有人可以告诉我这是不是

1.  确实是最好的方法。和
2.  告诉我如何将数组放入 List 以便我可以利用 GroupBy？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T21:19:25.820

这应该适合你：

```
var zips = new string[] { "12345", "12345", "54321" };
var groups = zips.GroupBy(z => z);

foreach(var group in groups)
    Console.WriteLine("{0} -> {1}", group.Key, group.Count()); 
```

应该给你：

```
12345 -> 2
54321 -> 1 
```

driis 实际上可以帮助您完成大部分工作。我刚刚发布了这个来帮助展示如何枚举组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T21:12:55.480

您应该使用 Where 仅选择 count == 1 的条目并使用 Select 列出值，然后使用 ToList() 返回一个列表。

它会是这样的：

```
List<string> uniqueZips = zips.GroupBy(z=>z).Where(z => z.Count() == 1).Select(z => z.Key).ToList(); 
```

在网上搜索 101 个 linq 例子，它给了你很多常见的例子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T21:05:08.643

GroupBy 适用于`IEnumerable<T>`，因此也适用于数组（数组实现 IEnumerable）。GroupBy 根据键对对象进行分组。这里的关键是邮政编码本身；所以你可以传入一个映射到它的委托：

```
var zips  = new string []{"8000", "9000"}
var uniqueZips = zips.GroupBy(x => x); 
```

现在，`uniqueZips`是一个[`IGrouping<string,string>`](http://msdn.microsoft.com/en-us/library/bb344977.aspx)，其中键是邮政编码，元素的数量是该邮政编码的出现次数。

# android - 创建一个新的透明活动

> ID：12271332
> 
> 赞同：0
> 
> 时间：2012-09-04T21:03:25.307
> 
> 标签：android, android-layout

我试图在手机上播放视频或显示图片，同时仍然能够控制手机。到目前为止，我唯一能做的就是开始一项新的透明活动。这使我能够展示我想要的任何东西。但我无法控制图片/视频后面的手机。这是我的代码：

```
 <activity
        android:name=".VideoPopActivity"
        android:label="@string/app_name"
        android:theme="@style/Theme.Transparent" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

在styles.xml中：

```
 <style name="Theme.Transparent" parent="android:Theme">
<item name="android:windowIsTranslucent">true</item>
<item name="android:windowBackground">@android:color/transparent</item>
<item name="android:background">@android:color/transparent</item>
<item name="android:windowContentOverlay">@null</item>
<item name="android:windowNoTitle">true</item>
<item name="android:windowIsFloating">true</item>
<item name="android:backgroundDimEnabled">false</item>
 <item name="android:windowFrame">@null</item> 
```

除了这个“技巧”之外，还可以接受新的建议.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T21:09:38.060

不，您无法控制非活动的`Activity`，特别是活动之下的。

您要做的是创建一个`RelativeLayout`包含透明图片以及主布局的内容。这将使它们彼此叠加。确保两者都`match_parent`适用于宽度和高度。

```
<RelativeLayout
    ... >

    <LinearLayout
        ... >

        <!-- This is your main layout -->

    </LinearLayout>

    <ImageView
        android:visibility="gone"
        ... /> <!-- Your picture, invisible by default -->

</RelativeLayout> 
```

或者，代替`ImageView`，制作另一个布局，您可以在其中放置视频/图像内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T05:21:19.633

这是使活动透明的方法，但是为了获得更令人愉悦的视图，您应该使您的活动不透明，不透明，因为它会提供像镜子或水一样的视图。

您可以使用，您应该在可绘制文件夹中创建 opaqueStyle.xml 并将主布局的背景设置为 opaqueStyle.xml ..

```
<?xml version="1.0" encoding="UTF-8"?> 
<shape xmlns:android="http://schemas.android.com/apk/res/android" 
     android:shape="rectangle"> 
     <stroke android:width="1dp" android:color="#FFFFFFFF" />

<solid android:color="#30646464" />
    <corners android:bottomRightRadius="7dp" android:bottomLeftRadius="7dp" 
     android:topLeftRadius="7dp" android:topRightRadius="7dp"/> 
</shape> 
```

在`<solid android:color="#30646464" />`这一行中，`"#30646464"`, 30 是不透明度，你可以增加或减少它的不透明度，否则六位数字是颜色，你可以自己调整它..

# ruby-on-rails - Test::Unit 和 .first 方法

> ID：12271334
> 
> 赞同：0
> 
> 时间：2012-09-04T21:03:38.517
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个测试：

```
 def setup
    @cart = FactoryGirl.create(:cart_with_1_row)
  end

  test "should get show" do
    sign_in(FactoryGirl.create(:user, admin: true))
    FactoryGirl.create(:product_request)
    session[:cart_id] = @cart.id
    get :show, id: @cart.id
    assert_response :success
    assert_not_nil assigns(:product_requests)
  end 
```

和一个控制器：

```
 def show
    cart = current_cart
    @product_requests = ProductRequest.find_all_by_cart_id(current_cart)
    cart.destroy
  end 
```

除非我从我的观点中删除以下内容，否则这将失败：

```
<h6><%= @product_requests.first.user.first_name %> <%= @product_requests.first.user.last_name %></h6>
<h6><%= @product_requests.first.street %></h6>
<h6><%= @product_requests.first.city %>, <%= @product_requests.first.state %> <%= @product_requests.first.zip %></h6> 
```

错误是：

```
 1) Error:
test_should_get_show(CartsControllerTest):
ActionView::Template::Error: undefined method `user' for nil:NilClass 
```

这意味着在 .first 上调用用户正在创建它？该页面在开发和生产环境中运行良好。

作为一个健全的检查，我把`<%= product_request.user.first_name %>`我的每个方法都放在了 ivar 上，这很有效。我是否正确地解释了 .first 是问题所在？

有问题的视图如下所示：

```
<h6><%= @product_requests.first.user.first_name %> <%= @product_requests.first.user.last_name %></h6>
    <h6><%= @product_requests.first.street %></h6>
    <h6><%= @product_requests.first.city %>, <%= @product_requests.first.state %> <%= @product_requests.first.zip %></h6

<% @product_requests.each do |product_request| %>
<%= product_request.user.first_name %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T21:17:23.507

你快到了 - 这里的问题是 @product_requests 是空的，所以`@product_requests.first`返回 nil 和 nil.first 确实是问题所在。

我建议您验证它`current_cart`不是 nil 本身 - 这是我对原因的猜测。

# java - 在 jar 中创建和修改文件

> ID：12271336
> 
> 赞同：-1
> 
> 时间：2012-09-04T21:04:00.123
> 
> 标签：java, jar, executable-jar

是否可以在 jar 中创建或修改文件，如果它是如何实现的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T21:05:11.953

一种可能的解决方案是解压缩`jar`，修改它并重新压缩它。

注意：您可以使用 7-zip 或 WinRar 等实用程序将其解压缩。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T21:07:17.267

如果您想通过命令提示符执行此操作，可以使用 jar 命令（或）您可以使用 winzip（或）winrar 工具。

例子：

[jar](http://docs.oracle.com/javase/1.4.2/docs/tooldocs/solaris/jar.html) uf foo.jar -C 类。-C bin xyz.class

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T21:09:46.377

好的，这里有两种方法可以做到这一点：

1.  使用您最喜欢的 zip 应用程序，解压缩，更改文件并再次压缩。

2.  使用[Zip4J](http://www.lingala.net/zip4j/)之类的 zip 库并在您的 java 应用程序中执行相同的操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T21:11:36.233

总之，是的，这是可能的，你有几个选择：

1.  修改现有的 jar 文件。通过提取 jar 文件（使用您需要的任何提取器）来执行此操作，修改您想要的文件（如果您没有源代码，则反编译）然后重新打包 jar。

2.  如果你不想麻烦更改 jar，你想复制现有的类文件（如果你没有源代码，再次反编译），进行你想要的更改，编译它并确保你的类文件位于 CLASSPATH 中的 jar 之前。这样，当您的 VM 进行类加载时，它会首先获取您修改过的类并忽略 jar 中的类。

# oracle - 查询 wwv_flow_files 时没有结果

> ID：12271340
> 
> 赞同：1
> 
> 时间：2012-09-04T21:04:36.833
> 
> 标签：oracle, oracle-sqldeveloper

Oracle SQL 开发人员 3.0.03

为什么在 SQL Developer 中运行以下查询时看不到任何结果？

```
select * from wwv_flow_files; 
```

然而，如果我在 APEX SQL 命令中运行相同的查询，我会看到结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T21:10:54.500

可能是因为

> WWV_FLOW_FILES 是表 WWV_FLOW_FILE_OBJECTS$ 的视图顶部。从 WWV_FLOW_FILES 视图中，您可以访问仅与您的工作区关联的文件。

# java - Bloomberg 开放 API JAVA - 如何存储用户数据

> ID：12271347
> 
> 赞同：0
> 
> 时间：2012-09-04T21:05:10.137
> 
> 标签：java, trading, bloomberg

我很好奇是否有办法在我的请求中存储一些用户数据，这些数据会在返回的数据中返回给我。例如，我发送了几个请求，比如说 3 个不同的订单。它们可能用于相同的符号，但根据顺序，我将获得不同类型的数据。有没有办法将订单 ID 存储在传出消息请求中并在退货时返回给我？我看到有一个 Session.sendRequest 调用，您可以在其中指定一个 requestLabel，但我没有看到它在返回的消息中返回，所以我不确定这是为了什么。

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T11:55:12.400

看起来相关 ID 正是需要的。我可以根据订单 ID 和一些唯一的字符串为每个订单请求创建一个唯一的关联 ID（对我来说，一个计数就足够了）。然后我可以在返回时解析出订单 ID 片段。我仍然不完全确定 requestLabel 的用途，但我认为我不需要它来满足这个要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T21:06:41.360

我认为这取决于您和您的应用程序，而不是彭博社。我敢打赌布隆伯格是幂等的——它对待每一个进来的请求，就好像它是第一个请求一样。

Session 是您在用户登录时创建的变量。您将创建标签或其他一些唯一的跟踪 GUID 并将其保持在会话中。用户在该会话期间发出的每个请求都将与该会话 ID 相关联>

# android - AWS for Android SDK 主机名错误

> ID：12271350
> 
> 赞同：0
> 
> 时间：2012-09-04T21:05:15.977
> 
> 标签：android, amazon-s3, amazon-web-services, hostname

我正在尝试通过使用他们的适用于 Android SDK 的 AWS 上传到 AWS S3，但是 SDK 中的示例项目和我的项目在模拟器运行没有问题时在设备上给出以下错误。所以我的 AWS 账户没有问题。

“主机名不能为空。”

上传代码：

```
s3Client.createBucket(Constants.getBucket());
PutObjectRequest por = new PutObjectRequest(Constants.getBucket(), record.getFile().getName(), record.getFile());
s3Client.putObject(por); 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T21:35:34.977

该问题已在 AWS 移动开发论坛上得到解决。原因是我的设备语言设置为土耳其语，其中包含字母 ı，该字母包含在我的存储桶名称中，而模拟器的语言设置为英语。

```
myBucketName.toLowerCase(Locale.US);
// in sample project it's = ("my-unique-name" + ACCESS_KEY + SECRET_ACCESS_KEY).toLowerCase(); 
```

# c - 使用 libcurl 和 CURLFORM_STREAM 将多部分表单上传到 S3

> ID：12271352
> 
> 赞同：1
> 
> 时间：2012-09-04T21:05:19.870
> 
> 标签：c, http, https, amazon-s3, libcurl

我正在尝试使用 libcurl 将 C/C++ 代码上传到 S3。我正在上传要从回调生成的二进制数据。

我已经盯着这个看了一段时间，所以我可能离题了:(但这是我的代码现在的样子：

首先，我像这样构建我的表单：

```
struct curl_httppost *buildForm(void *streamData, long contentLength) {
   struct curl_httppost *formpost=NULL;
   struct curl_httppost *lastptr=NULL;
   for( int i=0; i<form.size(); ++i ) {
     curl_formadd(&formpost,
           &lastptr,
           CURLFORM_COPYNAME, form[i].first.c_str(),
           CURLFORM_COPYCONTENTS, form[i].second.c_str(),
           CURLFORM_END);
  }
  curl_formadd(&formpost,
           &lastptr,
           CURLFORM_COPYNAME, "file",
           CURLFORM_STREAM, streamData,
           CURLFORM_CONTENTSLENGTH, (long) contentLength,
           CURLFORM_FILENAME, "chunk",
           //CURLFORM_CONTENTTYPE, "application/octet-stream",
           CURLFORM_END);
  return formpost;
} 
```

然后我像这样设置请求：

```
 curl_easy_reset( handle );
  struct curl_slist *headers = NULL;
  headers = curl_slist_append(headers, "Expect:");
  curl_easy_setopt( handle, CURLOPT_HTTPHEADER, headers);
  curl_easy_setopt( handle, CURLOPT_VERBOSE, 1L );
  curl_easy_setopt( handle, CURLOPT_DEBUGFUNCTION, curlDebugger );
  curl_easy_setopt( handle, CURLOPT_URL, postInstructions.url.c_str() );
  curl_easy_setopt( handle, CURLOPT_POST, 1L);

  // set the data and header read callbacks:
  curl_easy_setopt( handle, CURLOPT_READFUNCTION, &(UploadCallback::writeDataStatic));
  curl_easy_setopt( handle, CURLOPT_HTTPPOST, formpost);
  //I have tried with and without this line
  curl_easy_setopt( handle, CURLOPT_POSTFIELDSIZE_LARGE, (curl_off_t)contentLength);
  curl_easy_setopt( handle, CURLOPT_WRITEFUNCTION, &(XonamiResponse::readDataStatic));
  curl_easy_setopt( handle, CURLOPT_WRITEDATA, &response);
  curl_easy_setopt( handle, CURLOPT_HEADERFUNCTION, &(XonamiResponse::readHeaderStatic));
  curl_easy_setopt( handle, CURLOPT_WRITEHEADER, &response);

  // do it!
  int success = curl_easy_perform( handle ); 
```

然而，卷曲抱怨：

```
 operation aborted by callback 
```

即使我生成的字节数与 contentLength 相同。当我将回调设置为只用零填充缓冲区时，只要请求数据，S3 就会响应：

```
 The body of your POST request is not well-formed multipart/form-data. 
```

看着原始形式，我觉得最后一个（关闭）边界不见了。

curl --version 说：

curl 7.19.7 (universal-apple-darwin10.0) libcurl/7.19.7 OpenSSL/0.9.8r zlib/1.2.3 协议：tftp ftp telnet dict ldap http 文件 https ftps 功能：GSS-Negotiate IPv6 Largefile NTLM SSL libz

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T20:31:39.590

看起来问题出在我的回调中，它在完成时无意中返回 abort 而不是 CURL_READFUNC_ABORT。哎呀。

# informix - I4GL 循环查询

> ID：12271355
> 
> 赞同：1
> 
> 时间：2012-09-04T21:05:33.553
> 
> 标签：informix, 4gl

最近几天我正在尝试解决这个问题，但不知道该怎么做。我正在尝试从列表中获取 3 条~~记录~~。如果有任何 Informix 4GL 专家，我需要一些帮助。

```
 declare s_curs cursor for
          SELECT * FROM crcharge
                WHERE chargenum IN
                 (SELECT shtwrd_no FROM crbookid WHERE crbookid.book_no = rpt.book_no)

                  let chgkey_count = 1
            FOREACH s_curs into z_charge.*
                  let t_col = 15
               if  chgkey_count <= 3 then
                  let chgkey_count = chgkey_count + 1
                  let chgkey_count = t_chgkey
                  let scratch = z_charge.chgkey
                  let rpt.chgkey = scratch
                  call make_charge_section(scratch) returning rpt.chgkey
                  print
                     column 1, ESC, "&a15.5R",ESC,"&a12C", rpt.chgkey #t_col+2 ,

               end if
            END FOREACH 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T21:41:52.607

我认为您的问题是我在代码的以下（温和）修订中注释掉的那一行：

```
DECLARE s_curs CURSOR FOR
    SELECT * FROM crcharge
     WHERE chargenum IN
           (SELECT shtwrd_no FROM crbookid WHERE crbookid.book_no = rpt.book_no)

LET chgkey_count = 0
FOREACH s_curs INTO z_charge.*
    IF chgkey_count >= 3 THEN
        EXIT FOREACH
    END IF
    LET chgkey_count = chgkey_count + 1
    --LET chgkey_count = t_chgkey        -- Probable problem
    LET scratch = z_charge.chgkey
    LET rpt.chgkey = scratch
    CALL make_charge_section(scratch) RETURNING rpt.chgkey
    PRINT COLUMN 1, ESC, "&a15.5R",ESC,"&a12C", rpt.chgkey
END FOREACH 
```

我想我会通过编写来进一步简化代码：

```
LET chgkey_count = 0
FOREACH s_curs INTO z_charge.*
    IF chgkey_count >= 3 THEN
        EXIT FOREACH
    END IF
    LET chgkey_count = chgkey_count + 1
    LET rpt.chgkey = make_charge_section(z_charge.chgkey)
    PRINT COLUMN 1, ESC, "&a15.5R",ESC,"&a12C", rpt.chgkey
END FOREACH 
```

# c# - 如何从流 api 序列化这个 twitter 实体响应？

> ID：12271356
> 
> 赞同：0
> 
> 时间：2012-09-04T21:05:36.660
> 
> 标签：c#, serialization, twitter

来自 Twitter Stream API 的 JSON 响应如下所示：

```
"entities": {
  "media": [
    {
      "id": 76360760611180544,
      "id_str": "76360760611180544",
      "media_url": "http://p.twimg.com/AQ9JtQsCEAA7dEN.jpg",
      "media_url_https": "https://p.twimg.com/AQ9JtQsCEAA7dEN.jpg",
      "url": "http://t.co/qbJx26r",
      "display_url": "pic.twitter.com/qbJx26r",
      "expanded_url": "http://twitter.com/twitter/status/76360760606986241/photo/1",
      "sizes": {
        "large": {
          "w": 700, 
```

**我的班级看起来像这样：**

```
[DataContract]
public class Tweet {
    [DataMember]
    public entities entities;
}

[DataContract]
public class entities {
    [DataMember]
    public media media;
}
[DataContract]
public class media {
    [DataMember]
    public string id;
    [DataMember]
    public string id_str;
    [DataMember]
    public string media_url;
    [DataMember]
    public string media_url_https;
    [DataMember]
    public string url;
    [DataMember]
    public string display_url;
    [DataMember]
    public string expanded_url;
    [DataMember]
    public string type;
} 
```

我遇到的问题是媒体类始终为空。当推文附有图片时，实体不为空，但我的媒体类仍然为空，所以我假设我写错了。

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T21:10:31.400

在 json 方括号中包含数组，因此媒体应该是一个列表。

[http://www.secretgeek.net/json_3mins.asp](http://www.secretgeek.net/json_3mins.asp)

# php - Facebook 实时更新：不适用于某些领域

> ID：12271357
> 
> 赞同：0
> 
> 时间：2012-09-04T21:05:38.267
> 
> 标签：php, facebook, real-time-updates

好的，我放弃了将我的错误发布到 Facebook 支持。很明显，他们没有阅读全文。他们只阅读了我的问题的不到一半并给了我一个快速的答案，以便他们可以关闭票证。

我对 Facebook 实时更新的主要问题是我无法订阅以下**字段：political、favourite_athletes、favourite_teams 和 Significant_other**。你们有同样的问题吗？如果你这样做，你能不能帮我报告这个错误，因为我已经放弃了。

同样，我的问题是我不能订阅**领域的政治、喜爱的运动员、喜爱的团队和重要**的其他。以下是我写给 Facebook 的内容：

这是我报告的关于实时更新的另一个错误的延续。据说我不能为团体之类的联系做这件事，但我可以为电影、电视和其他几个人做这件事。

我还收到了**政治、喜爱的运动员、喜爱的团队和重要的其他领域的错误**

复制品

## 重现步骤：输入以下地址并得到这些错误：

[https://graph.facebook.com/](https://graph.facebook.com/) ***/subscriptions?access_token=*** &object=user&fields=political&verify_token= ***&method=post&callback_url=***

```
{
    "error": {
        "message": "(#100) \"political\" is an invalid field name",
        "type": "OAuthException",
        "code": 100
    }
} 
```

* * *

[https://graph.facebook.com/](https://graph.facebook.com/) ***/subscriptions?access_token=*** &object=user&fields=favorite_athletes&verify_token= ***&method=post&callback_url=***

```
{
    "error": {
        "message": "(#100) \"favorite_athletes\" is an invalid field name",
        "type": "OAuthException",
        "code": 100
    }
} 
```

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T21:23:01.797

目前看来不可能。

[https://developers.facebook.com/docs/reference/api/user/](https://developers.facebook.com/docs/reference/api/user/)

> 此对象支持以下连接的实时更新：提要、朋友、活动、兴趣、音乐、书籍、电影、电视、喜欢、签到。

# javascript - TinyMCE：添加复杂格式

> ID：12271359
> 
> 赞同：1
> 
> 时间：2012-09-04T21:05:52.983
> 
> 标签：javascript, html, joomla, tinymce

我想为 Joomla 的 TinyMCE 编辑器添加一个格式。它应该是一种在内容周围显示可缩放图形框的格式。由于框必须随内容缩放，我不能简单地使用一个背景框图形。相反，我必须在盒子的侧面使用图形，然后可以在 x 和 y 方向上缩放。为了实现这一点，我需要将文本包装到多个 div 中。因此，我需要添加一种将内容包装到这些 div 中的格式。然而，TinyMCE 似乎只允许将内容包装到一个 HTML 元素中的格式——但是，如上所述，我需要的格式不止一个。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T08:59:55.420

不，这是不可能的。您只能定义要用于包装内容的 html 元素。该设置称为[root_block_element](http://www.tinymce.com/wiki.php/Configuration%3aforced_root_block)

```
tinyMCE.init({
        ...
        forced_root_block : 'p'
}); 
```

# jquery - 写入 data-* 属性并使用 jQuery .data() 获取它

> ID：12271362
> 
> 赞同：10
> 
> 时间：2012-09-04T21:06:00.277
> 
> 标签：jquery

> **可能重复：**
> [jQuery .data() 未更新 DOM](https://stackoverflow.com/questions/12320934/jquery-data-not-updating-dom)

我在使用 on 属性时遇到问题。我已经编写了一小组方法来发送 api 调用。

标记是这样的：

```
<div data-global-id="1318" data-action="unfollow" class="action text-as-link follow-btn btn" style="text-decoration: none;">unfollow</div> 
```

并有这样的事件捕获：

```
$(document).on('click','.action', function(){
  var t={};
  t.args={};
  t.args.global_id=$(this).data('global-id');
  t.global_id=t.args.global_id;
  t.action=$(this).data('action');
  t.identifier=t.action + '_v2';
  alert('here is action: ' + t.action);
  api_post_v1(t);
}); 
```

api_post_v1 正确发送调用。

有一些代码可以处理回调，并将标记设置为：

```
<div data-global-id="1318" data-action="follow" class="action text-as-link follow-btn btn" style="text-decoration: none;">follow</div> 
```

代码如下：

```
$foo=$('.action[data-action=unfollow][data-global-id='+global_id+']');
$foo.attr('data-action','follow'); 
```

关键部分是数据操作。我想调用上面的事件处理程序说它是“关注”，但它说它仍然是“取消关注”。

顺序如下：

1.  加载页面，data-action='unfollow'
2.  单击此按钮，进行 api 调用并且您没有关注此用户；回调设置 data-action='follow'
3.  再次单击此值，数据操作将回显为“取消关注”而不是“关注”

我如何告诉 jQuery 刷新此事件的绑定？我认为这就是 $(document).on 所做的。

谢谢

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-04T21:08:54.990

`data-*`属性和 jQuery 的方法`.data()`是*不可*互换的。使用它来获取它：

```
t.action = $(this).attr('data-action'); 
```

* * *

您似乎将 jQuery 的`data`方法与 HTML5 的`data-*`属性混合在一起。这是两个不同的东西。他们唯一一次交互是当你第一次调用`.data`一个元素时。

当您调用 时`.data`，jQuery 会查找任何`data-*`属性，并将其添加到`data`集合中。但是，**这只会发生一次**。后续调用`.data`不会查看元素的`data-*`属性。

引用[jQuery 文档](http://api.jquery.com/data/#data-html5)：

> 属性在第`data-`一次访问数据属性时被拉取，然后不再被访问或改变（然后所有数据值都存储在 jQuery 内部）。

* * *

既然你`.attr('data-action', 'follow')`用来设置它，你应该用`.attr('data-action')`它来获取它。

**注意：** `$('.action[data-action=unfollow]')`不会选择`action`通过 jQuery 设置的元素`.data`。同样，两者*不可*互换。

# python - Python 类继承自所有子模块

> ID：12271364
> 
> 赞同：1
> 
> 时间：2012-09-04T21:06:27.470
> 
> 标签：python, class, module

我目前正在用 python 为许多自定义公司工具编写一个包装器。

我基本上会将每个工具分解成自己的 py 文件，其中包含一个包含对该工具的调用作为方法的类。这些都将包含在一个包中。

然后会有一个主类，它会从包中导入所有内容，然后从每个类继承，从而表现为一个有凝聚力的类。

```
masterClass.py

pyPackage
- __ init__.py

- module1.py
--class Module1
---method tool1

- module2.py
--class Module2
---method tool2

etc 
```

现在，我正在自动生成主类文件以从包模块继承，但我想知道是否有更优雅的方法来做到这一点？

IE

```
from package import *
class MasterClass(package.all):
    pass 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T21:24:31.323

我不太确定您尝试创建一个`master`从所有其他较小类继承的较大类的原因是什么，但首先想到的是设计可能是倒退的。

您可能想要做的是拥有一个基类，您的所有命令模块都可以为其子类化。您可以使用包作为智能命名空间来收集类似的功能，例如“网络”或“压缩”等。

```
class ToolBase(object):
    # common functionality here

    # class attributes

    # base constructor

    # methods: static, class, instance

    pass

class Module1(ToolBase):

    def __init__(self):
        super(Module1, self).__init__()

class Module2(ToolBase):

    def __init__(self):
        super(Module2, self).__init__() 
```

在这个基类示例中，每个子类都可以期望 ToolBase 的功能存在，包括来自构造函数的任何设置，例如数据库连接、套接字、资源。

也许是这样的项目结构：

```
pyPackage
    __init__.py 
        # class ToolBase
        # __all__ = ['network', 'compress']
    network/
        __init__.py
        module1.py
            # class Module1
    compress/
        __init__.py 
        module2.py
            # class Module2 
```

**更新**

作为使用基类并拥有共享“端口”对象的一种方式，您可以将其设为仅初始化一次的类级别属性：

```
class ToolBase(object):
    _PORT = None

    def __init__(self):
        if self._PORT is None:
            self._PORT = "PORT"

    @property 
    def port(self):
        return self._PORT

class Foo(ToolBase):

    def go(self):
        print self.port 
```

现在您的类本身就很有用，并且将共享端口对象。

# emacs - 为什么我的特定于模式的 .emacs 挂钩针对所有模式运行？

> ID：12271368
> 
> 赞同：2
> 
> 时间：2012-09-04T21:07:11.763
> 
> 标签：emacs, lisp, hook

我在我的 .emacs 文件中运行以下代码：

```
(defun load-hooks ()
    (add-hook 'after-save-hook 'my-hook))

(add-hook 'c-mode-hook 'load-hooks)

(defun my-hook () ... ) 
```

但是，`my-hook`即使我处于不同的模式，其中的内容也会在保存时运行。我错过了一步吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T21:39:09.173

您应该使用 LOCAL 参数`add-hook`，这将确保挂钩仅影响当前缓冲区：

```
(defun load-hooks ()
  (add-hook 'after-save-hook 'my-hook nil t))

(add-hook 'c-mode-hook 'load-hooks)

(defun my-hook () ...) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T21:11:30.147

我认为调用`(add-hook 'after-save-hook 'my-hook)`将`load-hooks`钩子添加到*所有*模式。也就是说，一旦调用了该函数，`after-save-hook`也会为每个其他缓冲区修改。

我怀疑除非你打开 ac 文件，否则你的钩子*不会运行。*尝试*在没有*打开任何 c 文件的情况下打开一些文件，看看是否有任何运行。如果不是，则仅表示为 c 文件运行的函数会修改其他所有内容的保存挂钩。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T21:28:13.953

Tikhon 关于影响所有模式的“保存后挂钩”是正确的——我现在依靠使用以下功能进行检查：

```
(defun in-c-mode? ()
  (string= (current-major-mode) "c-mode"))

(defun current-major-mode ()
  (with-current-buffer (current-buffer) major-mode)) 
```

# knockout.js - 分析 knockoutjs 映射插件

> ID：12271375
> 
> 赞同：3
> 
> 时间：2012-09-04T21:07:33.080
> 
> 标签：knockout.js, knockout-mapping-plugin

我正在使用带有映射插件版本 2.3.2 的 knockout-2.1。我担心的是映射插件的评估速度通常很慢。我检测了我的一种对象创建方法，但只占总时间的 10% 左右。我的猜测是它没有正确推迟更新，但我不确定。我想对通话进行分析，但不确定最好的方法是什么。

有没有人有一个很好的例子来说明如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-05T06:35:04.633

恕我直言：`ko.mapping`只是一个**简化**将简单对象（通常是服务器端模型）转换为淘汰视图模型的插件。

当事情变得更**复杂**时，您可以考虑自己进行映射。

我自己曾经在`ko.mapping`任何地方都使用过，但是在`create`越来越`update`大之后，我的代码变得不可读。所以我决定重构我的代码，事实证明它比我想象的要容易。（可能你需要类似的东西`_.clone`）。

PS：你应该粘贴代码，它可能不是`ko.mapping`错的。

# css - 粘性页脚失败

> ID：12271378
> 
> 赞同：2
> 
> 时间：2012-09-04T21:07:47.767
> 
> 标签：css, footer

我试图让我的页脚正确，但遇到了问题。我能够将页脚保持在页面底部，但很快意识到当窗口变小时，它最终会覆盖内容。我可以通过取消位置来解决这个问题：绝对但如果我这样做，页脚不再停留在页面底部。

我已经尝试了很多不同的方法来让它工作，但这是我目前正在研究的，我希望有人可以在这里提供一些建议..

**CSS**代码：

```
html, body {
    margin: 0;
    padding: 0;     
    height:100%;
}
#wrapper {
    width:900px;
    background-color:#FAFAFA;
    min-height:100%;
    margin:0 auto -45px;
    height: auto !important;
    height:100%;
}
#content{
    margin-top:40px;
    float: left;
    padding-left:100px;
    padding-bottom:30px;
    overflow:auto;  
}
#footer{
    height:30px;
    bottom:0;
    background:#D2CFCF;
    width:900px;
    clear:both;
    position:absolute;
} 
```

我最近在页脚中尝试了 margin-top:-30px 和 position:relative。使用上面的代码，页脚很好并且位于底部，但是当窗口变小时会覆盖内容。我能做些什么？

HTML**基本上**如下

```
<body>
    <div id="wrapper">
        <div id="content">
        </div>
        <div id="footer">
        </div>
    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T21:18:26.507

在页脚上使用规则，在标签上`position: fixed;`使用底部。`margin``<body>`

[http://jsfiddle.net/JGUYh/](http://jsfiddle.net/JGUYh/)

```
BODY {
 margin: 0 0 60px 0; /* keep regular content clear of the footer */
}
#footer {
 position: fixed;
 width: 100%;
 height: 50px;
 bottom: 0px;
 background: #ccc;
 overflow: hidden;
}​ 
```

请注意，根据窗口大小，页脚有时会覆盖内容。但是滚动会显示任何隐藏的内容。

# python - Python Eclipse 管道

> ID：12271383
> 
> 赞同：4
> 
> 时间：2012-09-04T21:08:16.177
> 
> 标签：python, eclipse, input, pydev, stdin

## 问题

像[这个](https://stackoverflow.com/questions/4355721/passing-command-line-argument-to-python-script-within-eclipsepydev)问题一样，我是 Python 新手。

我使用 PyDev - OSX 10.8.1 在 Eclipse Juno 中运行了以下简单程序。我想传递一个`stdin`流。如果我在命令行中运行它，它将如下所示：

> python main.py < test_input.txt

**如何将它添加到我的 Eclipse 项目的参数中？**

## 代码

```
import sys

def getArgs():
    if sys.stdin.isatty():
        for line in sys.stdin:
            print line

def main():
    getArgs()

if __name__ == "__main__":
    main() 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T21:54:15.790

如果您查看 PyDev 的运行配置的 Common 选项卡：

![在此处输入图像描述](../Images/751b53f7a61ec2bc65c53179f41ccb02.png)

您可以通过填写该框来设置**输出文件。**`File`这会将标准输出重定向到文件。该`Allocate console`复选框使标准输入在运行程序时位于控制台中。不幸的是，没有办法指定标准**输入**文件。

# php - 使用需要在 PHP 上进行身份验证的 Nusoap 创建 Web 服务

> ID：12271384
> 
> 赞同：1
> 
> 时间：2012-09-04T21:08:20.013
> 
> 标签：php, web-services, codeigniter, nusoap

我在 codeigniter 上有使用 Nusoap 的 Web 服务服务器，我想知道如何向它添加身份验证？

谢谢

# samsung-smart-tv - 三星电视模拟器字体大小

> ID：12271385
> 
> 赞同：1
> 
> 时间：2012-09-04T21:08:21.060
> 
> 标签：samsung-smart-tv

有人可以帮我解决这个问题。我一直在努力寻找解决方案，但没有任何帮助......

问题是三星电视模拟器显示的所有内容都放大了（行字体大小为 30ish 像素），并且似乎有办法覆盖它。**这只发生在三星 UI 组件中。**

为了确保它与我的项目无关，我从 Brightcove 下载了示例项目：[示例项目](http://opensource.brightcove.com/project/samsung-smart-tv-sample-app)，但也注意到了相同的行为。

这是我的“项目”的屏幕截图。它只有一个场景有两个 UI 组件：[http ://tinypic.com/r/124evqc/6](http://tinypic.com/r/124evqc/6)

与此相反，这是我在 IDE 视图中看到的内容：http: [//tinypic.com/r/ezmn4l/6](http://tinypic.com/r/ezmn4l/6)。作为旁注，我必须将`height: 20px`我的两个 UI 组件的 CSS 都放入，以便 IDE 以这种方式显示它们。

谁能建议我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T20:11:08.420

安装 SDK 时是否安装了电视字体？

来自[http://www.samsungdforum.com/Devtools/Sdkdownload](http://www.samsungdforum.com/Devtools/Sdkdownload)

```
[ How to reInstall TV fonts ]
(Install TV fonts in your Windows system for compatibility with the TV)
1) Please go to this path: [SDK_INSTALL_DIR]/Emulator/Emulator2012_v3.5/bin
2) Double click each of the following files:
  - shadow_us.ttf, shadow_eu.ttf, shadow_ko.ttf, shadow_s_cn.ttf,shadow_t_cn.ttf, shadow_jp.ttf
3) Click 'install' button in the dialog box 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T21:43:16.193

似乎按钮正在向其先前的对象添加 20px，检查一下，也许它有帮助

# macos - 哪个 id 用于热角默认设置中的 Launchpad？

> ID：12271386
> 
> 赞同：0
> 
> 时间：2012-09-04T21:08:24.273
> 
> 标签：macos, bash, osx-mountain-lion

我使用哪个 id 来设置热点默认值？

即：对于任务控制，我使用 id 2

```
defaults write com.apple.dock wvous-bl-corner -int 2
defaults write com.apple.dock wvous-bl-modifier -int 0 
```

有谁知道哪个是 Launchpad 的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T22:05:43.250

通过从系统偏好设置我的左上角到启动板，然后执行

```
defaults read com.apple.dock wvous-tl-corner 
```

看来您想要 Launchpad 的值 11。

# c# - 如何禁用表单控件上的选项卡索引？

> ID：12271388
> 
> 赞同：28
> 
> 时间：2012-09-04T21:08:27.280
> 
> 标签：c#, tabindex

我有一个带有 2 个按钮和 2 个标签的表单。

我想设置按钮 1 = tabIndex = 0，按钮 2 = tabIndex = 1 并且我不想将 tabIndex 设置为 2 个标签，这意味着如果用户按下制表符，它将从按钮 1 转到按钮 2。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-09-04T21:10:53.143

只需将 Labels 的 TabStop 属性设置为 false 并将 Buttons 的 TabIndex 属性设置为您想要的任何值。您可以在设计器的“属性”窗口中直接执行此操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-08-23T02:53:05.413

就我而言，我所有的标签都没有`TabStop property`.

我什至不能将 TabIndex 设置为`-1`任何一个，因为它会说`Property value not valid`.

但我注意到，一旦我运行应用程序，无论我的 TabIndex 上所有标签的值是多少，当我在键盘上按 Tab 时，它都不会在任何标签上停止。

> 原因是 Label 控件没有获得焦点。使 Label 控件获得焦点的唯一方法是调用 Label.Focus 方法。

有关更多信息，您可以阅读此论坛：[MSDN 论坛。](https://social.msdn.microsoft.com/Forums/windows/en-US/793ae59c-52ca-49d4-a7f5-1a18eb50bd55/removin-the-labels-from-tab-order?forum=winforms)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T21:12:54.970

```
button1.TabIndex = 0;
button2.TabIndex = 1; 
```

默认情况下，标签将[TabStop](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.tabstop.aspx)设置为 false，这意味着它们不应通过按 Tab 获得焦点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T21:11:59.443

将标签的制表位属性设置为 false？

[http://msdn.microsoft.com/en-us/library/system.windows.forms.control.tabstop.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.tabstop.aspx)

否则，只需将标签的 tabindex 值设置为按钮之前的值。然后您可以使用加速键单击该按钮。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-06T13:42:36.717

根据[MSDN](https://msdn.microsoft.com/en-us/library/1dsccs1d(v=vs.110).aspx)上的文档， TabStop 属性**与 Label 类无关**，因此将 TabStop 设置为 true 无效。所以我将两个标签的标签索引设置为 0，按钮 1 将获得标签索引 1，按钮 2 将获得标签索引 2

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-10-29T14:59:32.083

在设计环境中，您可以 Tab 标签。但是，当您运行 windows 窗体时，您不能 Tab 标签。因此，您不需要 TabStop 或调整标签的 Tab Index。

# java - 使用 JMockit 进行模拟

> ID：12271389
> 
> 赞同：3
> 
> 时间：2012-09-04T21:08:31.513
> 
> 标签：java, groovy, junit, grails-2.0, jmockit

我需要在 java 类中模拟一个方法，如下所示：

```
public class Helper{

    public static message(final String serviceUrl){   

        HttpClient httpclient = new HttpClient();
        HttpMethod httpmethod = new HttpMethod();

        // the below is the line that iam trying to mock
        String code = httpClient.executeMethod(method);

    }
} 
```

我曾尝试用 groovy 编写 junit，但由于 groovy 元编程技术不适用于 java 类，所以无法这样做。在我的研究中，我发现 JMockit 是一个很好的框架，它还可以模拟使用新构造函数创建的对象。

有人可以告诉我如何在 java 或 groovy 中为上述类编写单元测试。

高级感谢

这是我到目前为止使用 jmockit 尝试过的测试用例，但不起作用..

```
void testSend(){

    def serviceUrl = properties.getProperty("PROP").toString()

    new Expectations(){
        {
            HttpClient httpClient=new HttpClient();
            httpClient.executeMethod(); returns null;
        }        
    };
    def responseXml = Helper.sendMessage(requestXml.toString(), serviceUrl)            
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T10:29:30.840

您的测试用例的 java 版本如下所示：

```
@Test
public void testSend() throws IOException {

    final String serviceUrl = "http://google.com/";

    new Expectations(){
        // these bits are important as they tell Jmockit what classes to mock
        @Mocked HttpClient client ;
        @Mocked GetMethod method;

        {
            HttpClient httpClient= new HttpClient() ;
            HttpMethod method = new GetMethod(withEqual(serviceUrl));
            try {
                httpClient.executeMethod(method);
            } catch (IOException e) {
                // not going to happen
            }
            result = 200;
        }
    };
    // run the test and assert something
    Assert.assertEquals(200, Helper.message(serviceUrl));
} 
```

这在[github.com](https://github.com/gid79/q12271389-jmock-example)上可用，注意我使用 httpClient 3.1 来实现您的消息方法，我猜这不太正确，但应该足以回答这个问题。

如果您可以使用您的测试用例准备一个简单的 grails 项目，我相信我可以找出问题所在。

**更新**：我一直在本地玩玩具 grails 项目，但未能正确配置 jmockit。jmockit 的关键是确保它在类路径上的 junit 之前，但是由于 junit 是在 grails 中提供的，所以我无法找到将 jmockit 放在正确的位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T10:39:25.833

使用 jmockit，您还可以模拟实例创建。我更喜欢略有不同的技术：

```
@Test    
public void testFoo(@Mocked final HttpClient client) {
       new Expectations() {{
              // expect instance creation and return mocked one
              new HttpClient(... );  returns(client)

              // expect invocations on this mocked instance
             client.invokeSomeMethid(); returns(something)
       }};

        helper.message(serviceUrl)
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-09T20:43:00.173

感谢您提出问题，使用 Spring-web-3.2.2（使用 httpclient-4.0.1），我的代码如下所示：

```
 new NonStrictExpectations(){
        @Mocked(methods={"executeMethod"})
        ClientHttpRequest mocked_req;
        @Mocked(methods={"getBody"})
        ClientHttpResponse mocked_res;
        {
            byte[] buf  = (
            "<example_xml><person><name>Johnson</name><age>20</age></person></example_xml>" 
            ).getBytes();

            mocked_req.execute();
            mocked_res.getBody(); returns(new ByteArrayInputStream(buf));

        }
    };

    RestTemplate mytemplate = new RestTemplate();
    obj =         mytemplate.getForObject(.....);
    assertEquals("returned and parsed obj should be equal to this one", expectedObj, obj); 
```

# c# - 如何序列化和反序列化列表 与 protosharp？

> ID：12271390
> 
> 赞同：-3
> 
> 时间：2012-09-04T21:08:35.897
> 
> 标签：c#, serialization, protocol-buffers, protobuf-net

```
using System;
using System.Collections.Generic;
using System.IO;
using System.Runtime.Serialization.Formatters.Binary;

namespace test_protosharp
{
    [Serializable]
    [ProtoBuf.ProtoContract]
    public class MyClass
    {
        [ProtoSharp.Core.Tag(1)]
        [ProtoBuf.ProtoMember(1)]
        public int MessageType { get; set; }

        [ProtoSharp.Core.Tag(2)]
        [ProtoBuf.ProtoMember(2)]
        public string Message { get; set; }
    }

    class Program
    {
        private static List<MyClass> _forSerialize;

        static void Main()
        {
            _forSerialize = new List<MyClass>
                                {
                                    new MyClass {MessageType = 0, Message = "Test1"},
                                    new MyClass {MessageType = 1, Message = "Test2"},
                                    new MyClass {MessageType = 2, Message = "Test3"},
                                    new MyClass {MessageType = 3, Message = "Test4"}
                                };

            // Test BinaryFormatter Serializer
            using (Stream fs = File.Create("test.bin"))
            {
                BinaryFormatter bin = new BinaryFormatter();
                bin.Serialize(fs, _forSerialize);
            }

            using (Stream fs = File.OpenRead("test.bin"))
            {
                BinaryFormatter bin = new BinaryFormatter();
                _forSerialize = (List<MyClass>)bin.Deserialize(fs);
            }

            if (_forSerialize.Count == 4)
                Console.WriteLine("BinaryFormatter serializer work");

            // Test protobuf-net Serializer
            using (FileStream fs = File.Create("test.protobuf-net"))
                ProtoBuf.Serializer.Serialize(fs, _forSerialize);

            using (FileStream fs = File.OpenRead("test.protobuf-net"))
                _forSerialize = ProtoBuf.Serializer.Deserialize<List<MyClass>>(fs);

            if (_forSerialize.Count == 4)
                Console.WriteLine("protobuf-net serializer work");

            // Test ProtoSharp Serializer
            using (FileStream fs = File.Create("test.ProtoSharp"))
                ProtoSharp.Core.Serializer.Serialize(fs, _forSerialize);

            using (FileStream fs = File.OpenRead("test.ProtoSharp"))
                _forSerialize = ProtoSharp.Core.Serializer.Deserialize<List<MyClass>>(fs);

            if (_forSerialize.Count != 4)
                Console.WriteLine("ProtoSharp serializer NOT work");            

            Console.ReadLine();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T12:42:00.893

protosharp 不支持将列表作为根对象；你需要包装它：

```
public class SomeWrapper
{
    private readonly List<MyClass> items = new List<MyClass>();
    [ProtoSharp.Core.Tag(1)]
    public List<MyClass> Items { get { return items; } }
}
...
var tmp = new SomeWrapper();

tmp.Items.AddRange(_forSerialize);
using (FileStream fs = File.Create("test.ProtoSharp"))
    ProtoSharp.Core.Serializer.Serialize(fs, tmp);

using (FileStream fs = File.OpenRead("test.ProtoSharp"))
    _forSerialize = ProtoSharp.Core.Serializer.Deserialize<SomeWrapper>(fs).Items;

if (_forSerialize.Count == 4)
    Console.WriteLine("ProtoSharp serializer work"); 
```

这应该与 protobuf-net 输出相同（以字节为单位）。

但是，我会建议（也许不是很谦虚）protobuf-net 可以完成相同的工作，但经过广泛的改进和优化，远远超出了 protosharp 提供的功能，此外还支持更多的场景。

--

编辑：有趣的是，它们*不是*相同的输出；protosharp 有 2 个额外的字节......我会看看我是否能找出原因......编辑编辑：啊，这只是零默认行为；别担心。对于信息，如果您`MessageType`按照以下方式进行操作，则两个基于 protobuf 的序列化程序的输出（正如您希望和期望的那样）100% 相同：

```
[ProtoSharp.Core.Tag(1)]
[ProtoBuf.ProtoMember(1, IsRequired = true)]
public int MessageType { get; set; } 
```

# plone - 如何备份克隆？

> ID：12271407
> 
> 赞同：0
> 
> 时间：2012-09-04T21:10:06.203
> 
> 标签：plone

> **可能重复：**
> [备份（和恢复）一个 Plone 实例](https://stackoverflow.com/questions/1851996/backing-up-and-restoring-a-plone-instance)

我们每晚都在备份我们的 Plone 文件夹（整个文件夹，而不仅仅是文件存储和 blogstorage 或 data.fs）。在将 Plone 文件夹 rsync 到我们的备份服务器之前，我们没有停止 Plone 进程——因为我们还没有启动我们的站点，并且没有人在晚上访问它。

当我们尝试从备份中恢复 Plone 时，即删除我们现有的 Plone 文件夹并将整个备份的 Plone 文件夹复制到 /usr/local/ 中，然后运行 ​​/usr/local/Plone/zinstance/bin/plonectl start，Plone 启动成功但是当我们访问该站点时，我们遇到了各种类型的错误。一些图像因“blob 文件错误”之类的错误而丢失（不记得确切的单词）。此外，当我们尝试编辑我们的新闻文件夹（或集合）时，我们收到此错误“Macro querywidget does not exist for”。其他错误包括“ValueError：无法找到 update_version_before_edit”。

根据此文档[http://plone.org/documentation/kb/backup-plone](http://plone.org/documentation/kb/backup-plone)，备份 Plone 可以像复制 data.fs 文件夹一样简单。所以我们的方法应该有效。我们在这里做错了什么吗？在我们可以运行恢复的 Plone 文件夹之前，是否有我们应该清除的缓存或重新索引的目录？还是我们应该重新安装 Plone，然后将备份的 filestorage 和 blobstorage 文件夹复制回来（这是我们每次升级 Plone 时都会做的事情）？

非常感谢您的期待。
厘米gui

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T05:52:45.833

这是关于为 Plone 进行备份的非常广泛的文档：

[http://www.plone-entwicklerhandbuch.de/plone-entwicklerhandbuch/produktivserver/backup-der-zodb](http://www.plone-entwicklerhandbuch.de/plone-entwicklerhandbuch/produktivserver/backup-der-zodb)

如果您看不懂德语，请使用谷歌翻译……这一切都在使用 Plone 4.X 进行生产。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T21:39:03.447

正如您引用的文档所述：“如果您使用 BLOB 存储（在 Plone 4 中已成为图像和文件的默认设置），您还必须备份 blob 对象。它们默认存储在 var/构建的 blobstorage 文件夹。” 这不仅仅是复制 data.fs 文件的问题。

# c++ - 我应该重载哪个运算符来捕获列表分配？

> ID：12271409
> 
> 赞同：1
> 
> 时间：2012-09-04T21:10:10.230
> 
> 标签：c++

我应该重载哪个运算符来捕获列表分配

```
whatever myints[] = {32,71,12,45,26,80,53,33}; 
```

如果你有一些例子会很好吗？如果我要重载赋值，我收到的参数类型是什么？

编辑：哦，所以它是构造函数，列表是什么类型？

Edit2：所以它应该是这样的（来自[http://en.cppreference.com/w/cpp/utility/initializer_list](http://en.cppreference.com/w/cpp/utility/initializer_list)）

```
S(std::initializer_list<T> l) : v(l) {
 std::cout << "constructed with a " << l.size() << "-element list\n";
} 
```

正确的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T16:54:00.487

您想要定义采用[`std::initialize_list<int>`](http://en.cppreference.com/w/cpp/utility/initializer_list). 例如：

### MadeFromList.h

```
#ifndef _MADE_FROM_LIST_H_
#define _MADE_FROM_LIST_H_

#include <vector>
#include <ostream>
#include <initializer_list>

class MadeFromList {
public:
    MadeFromList(const std::initializer_list<int>& integers) :
        myVector(integers)
    {}
private:
    std::vector<int> myVector;

    friend std::ostream& operator<<(std::ostream&, const MadeFromList&);
};

std::ostream& operator<<(std::ostream& outputStream,
                         const MadeFromList& mfl)
{
    for (int x : mfl.myVector)
    {
        outputStream << x << " ";
    }
    return outputStream;
}
#endif 
```

### 主文件

```
#include "MadeFromList.h"
#include <iostream>

int main()
{
    MadeFromList myListObject = {32, 71, 12, 45, 26, 80, 53, 33};
    std::cout << myListObject << std::endl;
    return 0;
} 
```

编译和运行这个：

```
g++ -std=c++0x -W -Wall -Wextra -pedantic -o test main.cpp 
./test 
```

给出输出：

```
32 71 12 45 26 80 53 33 
```

智者的话：此功能是 C++11 中的新功能。

# scala - sbt & Play 2.0 调试信息缺失

> ID：12271421
> 
> 赞同：4
> 
> 时间：2012-09-04T21:11:24.490
> 
> 标签：scala, playframework, sbt

我正在使用 sbt 来构建我的 Play 2.0 项目。我设法将 sbt 配置为打开一个调试端口，附加一个 Eclipse 远程调试器并输入一个断点。我把断点放在我的一个动作中。但是当执行在那里停止时，我无法检查任何变量。我猜 sbt 在没有调试信息的情况下构建了 Scala 代码。

有人知道如何配置 sbt 来添加调试信息吗？或者这可能是我的 Scala IDE Eclipse 插件或其他任何问题？

提前谢谢了！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-15T23:08:14.963

要通过 以调试模式开始播放`sbt`，请运行：

```
sbt -jvm-debug 9999 run 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-05T10:40:28.200

我发现这是最简单的解决方案：（使用 IntelliJ IDEA）

在 IntelliJ 中：

转到“编辑运行配置”

![在此处输入图像描述](../Images/804363f22b40552002546f5d04fdaa59.png)

创建一个新的远程配置（端口 9999，所有其他细节保留默认值）

![在此处输入图像描述](../Images/2abc669a260a6abb99fe521e987da1b7.png)

返回 IntelliJ 并运行新的调试配置（不要忘记设置断点）

从命令行运行：

```
 sbt -jvm-debug 9999 run 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T20:03:16.420

我没有找到解决所有调试问题的解决方案，但至少它可以工作，以便我可以使用它。这是我的状态：

我直接使用 sbt 并且不能使用 -jvm-debug 9999。但是我在 sbt 启动脚本的 JAVA_OPTS 中添加了以下内容： `-Xdebug -Xrunjdwp:transport=dt_socket,server=y,suspend=y,address=9999` 这可以连接 Eclipse 远程调试器并获取调试信息（如果在开发模式下运行 Play）。

仍然存在的问题是，当将鼠标光标指向变量时，我没有得到显示变量信息的弹出窗口。但这似乎是 Scala IDE 插件而不是 Play 的问题，因为我在调试透视图中的变量视图中获取了变量信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-21T16:41:58.093

我在模块化 sbt 构建中遇到了同样的问题。添加

```
javacOptions ++= Seq("-g") 
```

到 build.sbt 文件，解决了编译类中缺少调试信息的问题。

# wcf - 将数据发布到我的 WCF 服务的问题

> ID：12271430
> 
> 赞同：0
> 
> 时间：2012-09-04T21:11:41.500
> 
> 标签：wcf, http, post

我正在尝试设置一个简单的服务，该服务将允许用户在 POST 的正文中将 Pickup 对象作为 XML 传递。如果我将服务设置为接收 Stream 类型，我可以让它正常工作，但我不确定我需要改变什么才能让它而不是自定义类型工作正常。当我告诉服务器期待一个 Pickup 类型时，我得到“请求错误。服务器遇到了......”

我有人可以告诉我需要在服务器/客户端中进行哪些更改才能使其正常工作，我将非常感激。

我的数据合约

```
[DataContract]
public class Pickup
{        
    [DataMember]
    public string DelZip
    { get; set; }

} 
```

运营合同

```
 [OperationContract]
    [WebInvoke(Method = "POST",
        UriTemplate = "/pickups",
        RequestFormat = WebMessageFormat.Xml,
        ResponseFormat = WebMessageFormat.Xml,
        BodyStyle = WebMessageBodyStyle.Bare)]
    string RequestPickup(Pickup pickup);

    public string RequestPickup(Pickup pu)
    {
        return pu.DelZip;
    } 
```

配置

```
 <services>
  <service name="TestAPI.Services.TestServices" >
    <endpoint address=""
              binding="webHttpBinding" behaviorConfiguration="webHttp"
              contract="TestAPI.Services.ITestServices" />
  </service>
</services>    
<behaviors>
  <endpointBehaviors>
    <behavior name="webHttp">
      <webHttp/>
    </behavior>
  </endpointBehaviors>      
</behaviors> 
```

我的客户代码

```
 const string url = "http://localhost:18463/TestServices.svc/pickups";
                req = (HttpWebRequest)WebRequest.Create(url);
                req.Method = "POST";
                req.ContentType = "application/xml";                

                var xmlDoc = new XmlDocument { XmlResolver = null };
                xmlDoc.LoadXml(@"<Pickup><DelZip>55555</DelZip></Pickup>");
                string sXml = xmlDoc.InnerXml;
                req.ContentLength = sXml.Length;
                var sw = new StreamWriter(req.GetRequestStream());
                sw.Write(sXml);
                sw.Close();

                res = (HttpWebResponse)req.GetResponse();
                Stream responseStream = res.GetResponseStream();
                var streamReader = new StreamReader(responseStream); 
```

# asp.net-mvc-4 - 添加参考列表中缺少 System.Web.Http.Description

> ID：12271431
> 
> 赞同：16
> 
> 时间：2012-09-04T21:11:46.640
> 
> 标签：asp.net-mvc-4, asp.net-web-api

我收到一个错误：

```
Error   1   The type or namespace name 'Description' does not exist in the namespace 'System.Web.Http' (are you missing an assembly reference?) c:\users\klippiat\documents\visual studio 2010\Projects\TfsPortal\TfsPortal\Models\ApiModel.cs  5   23  TfsPortal 
```

我通常会添加参考并选择缺少的参考。但从`System.Web.Http.Description`列表中丢失。我已经按名称对列表进行了排序，以确保我应该能够看到它。我可以看到`System.Web.Http.Data`和 .Common 等，但不是 .Description 之一。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2014-11-02T07:32:37.467

Visual Studio 2012 SPA 模板 /Help/index.cshtml 文件引发了您的错误。

```
@using System.Web.Http
@using System.Web.Http.Description  <=== CS0234: The type or namespace name 'Description' does not exist in the namespace 'System.Web.Http' (are you missing an assembly reference?) 
```

**解决方案：**在 References\System.Web.Http 的属性中设置“Copy Local : True”

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-10-16T17:38:16.010

**你没有做错什么**。只是有一些配置问题阻止 Visual Studio 添加对程序集列表的引用以供编译器检查。

中的类型`System.Web.Http.Description`可在**System.Web.Http.dll**程序集中找到，该程序集位于*Nuget*包文件夹中。

您可以`Uninstall-Package Microsoft.AspNet.WebApi`在[NuGet 包控制台](http://docs.nuget.org/docs/start-here/using-the-package-manager-console)中键入，然后键入`Install-Package Microsoft.AspNet.WebApi`以重新安装它，此时引用将被修复。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T09:18:04.547

我卸载了 MVC4 并从全新下载中重新安装。我不得不再次创建一个新项目，并且出现了 Description 命名空间。

奇怪的是，如果我打开旧项目，当我尝试添加 using ...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-04-18T12:17:36.227

在使用 MVC-4 框架创建 SPA 解决方案时，我也面临同样的问题。
我通过设置`Copy Local : True`参考的 in 属性解决了这个问题`System.Web.Http`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-14T20:24:07.603

我有同样的问题。我将项目作为网站而不是项目/解决方案打开。因此，在打开解决方案后，它解决了我的问题。

# mysql - MySQL结构连接表的两个可选约束

> ID：12271432
> 
> 赞同：0
> 
> 时间：2012-09-04T21:11:50.827
> 
> 标签：mysql

我有三张桌子：

**地址**

```
CREATE  TABLE IF NOT EXISTS `main`.`address` (  
  `id` BIGINT NOT NULL AUTO_INCREMENT ,  
  `street_number` VARCHAR(5) NOT NULL ,  
  `street_name` VARCHAR(255) NOT NULL ,  
  `town_village` VARCHAR(50) NOT NULL ,  
  `county` VARCHAR(50) NOT NULL ,  
  `country` VARCHAR(45) NOT NULL ,  
  `postcode` VARCHAR(10) NOT NULL ,  
  PRIMARY KEY (`id`) ,  
  UNIQUE INDEX `street_number_UNIQUE` (`street_number` ASC, `street_name` ASC, `town_village` ASC,   `county` ASC, `country` ASC, `postcode` ASC) )  
ENGINE = InnoDB  

**Geolocation**  
CREATE  TABLE IF NOT EXISTS `warrington_main`.`address` (  
  `id` BIGINT NOT NULL AUTO_INCREMENT ,  
  `street_number` VARCHAR(5) NOT NULL ,  
  `street_name` VARCHAR(255) NOT NULL ,  
  `town_village` VARCHAR(50) NOT NULL ,  
  `county` VARCHAR(50) NOT NULL ,  
  `country` VARCHAR(45) NOT NULL ,  
  `postcode` VARCHAR(10) NOT NULL ,  
  PRIMARY KEY (`id`) ,  
  UNIQUE INDEX `street_number_UNIQUE` (`street_number` ASC, `street_name` ASC, `town_village` ASC,   `county` ASC, `country` ASC, `postcode` ASC) )  
ENGINE = InnoDB

**Image**  
CREATE  TABLE IF NOT EXISTS `warrington_main`.`image` (  
  `id` MEDIUMINT(8) UNSIGNED NOT NULL AUTO_INCREMENT ,  
  `alias_title` VARCHAR(255) NOT NULL ,  
  `title` VARCHAR(100) NOT NULL ,  
  `description` VARCHAR(2000) NOT NULL ,  
  `main_image` VARCHAR(50) NOT NULL ,  
  `thumbnail_image` VARCHAR(50) NOT NULL ,  
  `thumbnail_image_medium` VARCHAR(50) NOT NULL ,  
  `thumbnail_image_small` VARCHAR(50) NOT NULL ,  
  `thumbnail_image_gallery` VARCHAR(50) NOT NULL ,    
  `hits` BIGINT(20) UNSIGNED NOT NULL DEFAULT '0' ,  
  `show_comment` ENUM('0','1') NOT NULL ,  
  `section` TINYINT(2) UNSIGNED NOT NULL ,  
  `flickr_youtube_id` VARCHAR(20) NOT NULL ,  
  `feature_in_gallery` ENUM('0','1') NOT NULL ,  
  `created_on` DATETIME NOT NULL DEFAULT '0000-00-00 00:00:00' ,  
  `date_taken` DATETIME NOT NULL DEFAULT '0000-00-00 00:00:00' ,  
  `updated_on` DATETIME NOT NULL DEFAULT '0000-00-00 00:00:00' ,  
  `updated_by` MEDIUMINT(8) UNSIGNED NOT NULL ,  
  `approved` ENUM('Inprocess','Yes','No') NOT NULL DEFAULT 'Inprocess' ,  
  `visible` ENUM('0','1') NOT NULL DEFAULT '0' ,  
  PRIMARY KEY (`id`) ,  
  UNIQUE INDEX `alias_title` (`alias_title` ASC) ,  
  UNIQUE INDEX `flickr_youtube_id`   (`flickr_youtube_id` ASC) ,  
  INDEX `title` (`title` ASC) ,  
  INDEX `approved` (`approved` ASC) ,  
  INDEX `visible` (`visible` ASC) ,  
  INDEX `feature_in_gallery` (`feature_in_gallery` ASC) )  
ENGINE = InnoDB  
AUTO_INCREMENT = 23162  
DEFAULT CHARACTER SET = utf8 
```

现在每个图像都可以有一个地理位置和一个地址。我打算创建另一个名为 location 的表。

我打算为地理位置和地址创建具有可选关系的位置。所以换句话说，位置可以是地理位置或地址或两者兼而有之。不过，我不想存储 null/null。第一个问题是如何在这种情况下创建一个具有两个可选关系的表并确保我不会得到 null/null。

然后我需要将位置表关联到图像表。我将来可能想针对另一个表（即事件）的位置或地址/或地理编码进行查询。

所以一个事件的位置可能与存储在图像表中的位置相同。有人知道这是否是最好的结构。图像表/地址/地理位置，然后是位置和图像表。

换句话说，我有一个表，其中包含两个与地理位置和地址的可选关系。我需要其中一个包含在表中，而不是两者都为空。我怎样才能执行这个约束

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T21:29:04.953

我看到有两种方式可以构建它。任何一个图像都有地址和地理位置的外键。或者你可以让图像只有一个新位置表的外键，而该表又与地址和地理位置有外键关系。您想要做什么可能取决于您是否希望将来拥有其他类型的位置类型。我个人会选择第一个，除非您希望将其他常见的地理位置和地址属性放在单独的位置，或者您认为将来您将拥有不同的位置类型，如前所述。

在任何一种情况下，无论哪个字段中包含地址和地理位置外键，也可以简单地在两个字段中具有唯一索引。这将（主要）强制执行所需的关系，因为您可以允许字段保存 NULL 值，然后您将在该表中最多有一个 NULL-NULL 记录。

如果您简单地对地址和地理位置表进行非规范化并添加一个列类型来指示它是哪种类型（地址、地理位置或两者），那么您可以严格执行这种关系，因为看起来两个表的数据结构是相同的。然后，您将在 image 中使该表的外键不为空，并且，如果使用 innodb，则可以选择强制引用完整性。当然，这会将您限制为一个实际地址（即不是不同的地址和地理位置地址）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T21:32:51.953

如果您想确保位置表中的一行至少有一个位置字段不为空，我建议通过创建一个`ON INSERT`和相应的`ON UPDATE`触发器来确保这一点。

诀窍是让触发器将一个字段更改`NEW`为一个不可能插入的字段。inmpossible-to-update 值，因此使`INSERT`or`UPDATE`失败。一种可能是强制重复键错误，另一种是强制无效值。就像是

```
CREATE TRIGGER needs_some BEFORE UPDATE ON location
FOR EACH ROW
BEGIN
     IF (NEW.Geolocation IS NULL AND NEW.Address IS NULL) THEN
         SET NEW.Geolocation = 'ABC';
     END IF;
END; 
```

假设 location.Geolocation 是数字类型，这将导致插入失败。

在 MySQL 5.5 或更高版本上，您可以简单地

```
CREATE TRIGGER needs_some BEFORE UPDATE ON location
FOR EACH ROW
BEGIN
     IF (NEW.Geolocation IS NULL AND NEW.Address IS NULL) THEN
         SIGNAL SQLSTATE '99999' SET MESSAGE_TEXT='Must not be a double NULL';
     END IF;
END; 
```

或更早的 MySQL 版本

```
CREATE TRIGGER needs_some BEFORE UPDATE ON location
FOR EACH ROW
BEGIN
     IF (NEW.Geolocation IS NULL AND NEW.Address IS NULL) THEN
         CALL inexistant_stored_procedure;
     END IF;
END; 
```

作为一种解决方法。

# python - {% url %} 标签在 django 中添加两倍的本地化前缀

> ID：12271436
> 
> 赞同：1
> 
> 时间：2012-09-04T21:12:09.510
> 
> 标签：python, django, localization, django-views, url-routing

使用 Django 版本 1.5.dev17942 我有这个设置：

设置.py：

```
MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.middleware.locale.LocaleMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',

    #'maintenancemode.middleware.MaintenanceModeMiddleware',
) 
```

使用 urls.py：

```
urlpatterns = patterns('',
    # Api
    url(r'^api/bestSeller/', include('apps.pluginApi.urls')),
    url(r'^admin/', include(admin.site.urls)),
)

urlpatterns += i18n_patterns('',
    # Core:
    url(r'^$', views.index, name='home'),
    url(r'teleport/signup/(?P<plan>\w+)', views.teleport_signup, name="teleportSignup"),
    url(r'teleport/account$', views.teleport_account, name="teleportAccount"),
    url(r'teleport/login$', views.teleport_login, name="teleportLogin"),
    url(r'teleport', views.teleport, name="teleport"),
)

urlpatterns += staticfiles_urlpatterns() 
```

当我使用模板标签时：

```
{% url 'teleportSignup' 'teleportplan1' %} 
```

我得到这个网址：

> /es/es/teleport/signup/teleportplan1

请注意，它是“es”的两倍。初始 URL（呈现页面）是`/es/teleport`.

我看不出是什么原因造成的。或者如何避免它..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T15:30:58.860

真是愚蠢的事情。我在[https://bitbucket.org/carljm/django-localeurl](https://bitbucket.org/carljm/django-localeurl)中有一个依赖项，来自旧项目。这也是生成语言环境 url，所以有两次的原因......

# android - 在线播放多个音轨

> ID：12271437
> 
> 赞同：0
> 
> 时间：2012-09-04T21:12:11.553
> 
> 标签：android, ios, audio, web, media-player

我和我的团队几乎完成了为 iPhone 和 Android 开发的音乐应用程序，它允许用户通过播放和重叠采样声音（一次最多 16 个）创建自己的音乐。我们正在寻找一种方法，允许用户通过在我们的网站中嵌入音频播放器来分享这些歌曲，该播放器将（就像 Android 和 iPhone 应用程序已经做的那样）获取歌曲，这些歌曲表示为表示音高、持续时间、开始时间的字符串, 和乐器，并将它们转换为单个可播放的音频文件（任何格式）。

我们研究了 SoundManager 2 和 WebAudio，并且都遇到了同样的问题：停止声音会产生无法消除的哔哔声或爆裂声。有谁知道我们应该研究的另一个框架或 API？一点谷歌搜索也让 sfplay 脱颖而出，但没有太多关于它的文档。还有其他建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T00:57:08.533

javascript/html5 音频仍然存在很多问题。WebAudio 非常强大，但不是很便携。Soundmanager 2 功能较弱，但更便携。除非您做错了什么，否则您不应该听到任何一个库的咔嗒声/不连续性，但是基于浏览器的音频存在同步等问题。

这就是为什么大多数在网络上做“严肃”音频的人都使用 java 小程序或 flash，这在设备上不起作用。

# jquery - 检查是否单击了具有特定属性的链接

> ID：12271447
> 
> 赞同：0
> 
> 时间：2012-09-04T21:13:21.430
> 
> 标签：jquery, css, list, click, anchor

如何检查是否单击了具有以下 href 属性的特定链接？然后在使用jquery单击时为其'li'赋予背景颜色？

```
 <ul class="static">
    <li class="static"><a class="static menu-item" href="/SitePages"> </a></li>
    <li>other anchor tags</li>
    <li></li>
 </ul> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T21:15:16.117

您可以使用以下内容：

```
$('a[href="/SitePages"]').bind('click', function(){
    $(this).closest('li').css({
        backgroundColor: "#000"
    });
}); 
```

> [JSFiddle 这里](http://jsfiddle.net/wBJzh/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T21:15:46.437

使用 jQuery，

```
$('a[href="/SitePages"]').click(function(){this.parent.css("background-color", "blue")}); 
```

或者如果父母不能保证是 a `li`，你可以这样做：

```
$('a[href="/SitePages"]').click(function(){this.closest('li').css("background-color", "blue")}); 
```

# xml - 使 xml 元素的内容在 XSD 实例文档中唯一

> ID：12271450
> 
> 赞同：0
> 
> 时间：2012-09-04T21:13:49.007
> 
> 标签：xml, xsd

我目前正在尝试为发票信息开发 XSD 架构，可以在[http://intranet.servofarma.com/xml/schema/facturas.xsd](http://intranet.servofarma.com/xml/schema/facturas.xsd)看到。

我的问题是如何使`nroFactura`元素的内容在 XSD 实例文档中唯一？我尝试使用`<unique>`，但我不清楚如何使用此约束。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T22:13:20.433

XSD 中的“唯一”约束允许您说“给定 Y 中的每个 X 都必须具有唯一的 Z 值”。约束继续 Y 的定义。 xs:selector 定义了一个 XPath 表达式以从 Y 中选择 X（例如，.//nroFactura），而 xs:field 定义一个 XPath 表达式以从 X 中选择 Z（例如， "." 选择元素本身的字符串值）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T23:10:23.130

我认为您无法得到比@Michael (+1) 更简洁的答案；不过，我认为您也可能会从这些额外的说明中受益。

鉴于您的 XSD，Michael 的“符号”中的 Y 只能是`facturas`，因为它是 XSD 中的唯一元素。

![在此处输入图像描述](../Images/a9bd2f069f912b3db10647ef6bfe0b7e.png)

修改：

```
<element name="facturas" type="tns:facturasType">
    <unique name="pk1">
        <selector xpath="tns:factura/tns:nroFactura"/>
        <field xpath="."/> 
    </unique>
</element> 
```

结果如下所示：

![在此处输入图像描述](../Images/db2c15081a661d7bfcccf8ae8bd33af7.png)

我要提到的另一件事是使用`.//`vs. 是具体的。前者是开始工作的好方法；在大型 XSD 中也可能难以处理标签可能在不同上下文中“重用”的情况。我会说尽可能具体而不是试图匹配所有内容是更好的做法......当然，除非这是要求。

# cakephp - 将 html 属性分配给 CakePHP 的 HtmlHelper 图像中的 url 链接

> ID：12271451
> 
> 赞同：3
> 
> 时间：2012-09-04T21:14:14.810
> 
> 标签：cakephp, cakephp-2.0, html-helper

我试图找到一种方法来设置由 CakePHP 的 HtmlHelper 的 image 方法生成的链接 URL 的属性。我正在使用 CakePHP 2.2.1

例如，下面的代码：

```
echo $this->Html->image("recipes/6.jpg", array(
    "alt" => "Brownies",
    'url' => array('controller' => 'recipes', 'action' => 'view', 6)
)); 
```

生成：

```
<a href="/recipes/view/6">
    <img src="/img/recipes/6.jpg" alt="Brownies" />
</a> 
```

如何将属性添加到 href 标签。例如，说 class='picture' 看起来像：

```
<a href="/recipes/view/6" class='picture'>
    <img src="/img/recipes/6.jpg" alt="Brownies" />
</a> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T13:27:08.907

您不能通过该`Html->image`方法将 HTML 属性添加到 Anchor 标记 - 这样做的方法是将 放在`Html->image`方法中`Html->link`，如下所示：

```
echo $this->Html->link(
    $this->Html->image("recipes/6.jpg", array('alt' => 'Brownies')),
    array('controller' => 'recipes', 'action' => 'view', 6, array('escape'=>false', 'class'=>'picture')
); 
```

您还必须包括`'escpape'=>false`- 否则您`<img...>`将被转义，它会显示为`&lt;img ... &gt;`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-05T06:17:09.567

如果要向`HTML anchor tag`using添加任何属性`HtmlHelper`，则可以通过以下方式使用它：

```
<?php echo $this->Html->link(
$this->Html->image("loading.gif", array('alt' => 'Brownies', 'border' => '0')),
array('controller' => 'recipes', 'action' => 'view', 6),  array('class' => 'picture', 'escape' => false)); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-25T15:55:46.440

如果您仍在寻找答案，您需要做的不是使用`$this->Html->image`可选 URL 属性，而是使用`$this->Html->link`可选`escape = false`属性，其中链接的标题是您的图像，利用`$this->Html->image`. 什么`escape = false`是在链接标题中取消转义特殊字符，允许您使用图像或其他 html 元素。

这是一个例子

```
echo $this->Html->link(
    $this->Html->image($image['Image']['file'], 'class' => 'image', 'alt' => $image['Image']['title'])),
'path/to/image', // or an array('controller' => 'mycontroller', 'action' => 'myaction')
 array('escape' => false)); 
```

您可以添加更多图像属性，例如我列出的类和 alt，以及更多链接属性，例如我列出的转义。

# c++ - 指向外部类 C++

> ID：12271454
> 
> 赞同：0
> 
> 时间：2012-09-04T21:14:24.233
> 
> 标签：c++, pointers, scope, hierarchical-data

在这里，我正在尝试创建第 N 级层次结构，但不允许我指向内部类的外部类并获得访问冲突错误。但后一个版本有效。

我的错误是什么？这是关于新创建的内部循环的范围吗？但是它们是在类中创建的，所以应该不是问题吗？

```
 // atom.cpp : Defines the entry point for the console application.
//

#include "stdafx.h"
#include<iostream>
#include<stdlib.h>

class a
{
public:
    int x;
    a * inner;
    a * outer;
    a(int n)   //creates an inner a
    {
        n--;
        x=n;    
        if(n>0){inner=new a(n);}else{inner=NULL;}   
        inner->outer=this;//Unhandled exception at 0x004115ce in atom.exe: 0xC0000005:
                          //Access violation writing location 0x00000008.
    }

};

int main()
{
    a * c=new a(5);
    a * d=c;
    while((d->inner))     //would print 4321 if worked
    {
        std::cout<<d->x;
        d=d->inner;
    }
    getchar();
    delete c;
    d=NULL;
    c=NULL;
    return 0;
} 
```

**但这有效：**

```
// atom.cpp : Defines the entry point for the console application.
//

#include "stdafx.h"
#include<iostream>
#include<stdlib.h>

class a
{
public:
    int x;
    a * inner;
    a * outer;
    a(int n)   //creates an inner a
    {
        n--;
        x=n;    
        if(n>0){inner=new a(n);inner->outer=this;}else{inner=NULL;} 
        //works without error
    }

};

int main()
{
    a * c=new a(5);
    a * d=c;
    while((d->inner))     //prints 4321
    {
        std::cout<<d->x;
        d=d->inner;
    }
    getchar();
    delete c;
    d=NULL;
    c=NULL;
    return 0;
} 
```

当我删除 c 时，您认为它们都是自动删除的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T21:17:39.440

当你这样做时：

```
if(n>0)
{
   inner=new a(n); //first n is 4, then 3,2,1 and then 0
}
else
{
   inner=NULL;
}   
inner->outer=this; 
```

该条件`n>0`最终将不成立（在第 5 次调用时），因此`inner`将是`NULL`，然后当您尝试取消引用它时，您会遇到未定义的行为（和崩溃）（`inner->outer`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T21:18:56.647

这一行：

```
inner->outer=this 
```

需要在`if (n > 0)`分支内，`inner = new a(n)`在行之后，例如：

```
a(int n) : inner(0), outer(0) // set data members here
{
    x = --n;
    if (n > 0) {
        inner = new a(n);
        inner->outer = this;
    }
} 
```

如前所述，当`n == 0`您尝试设置`NULL->outer = this`.

# jquery - 调试高度 HTML、jQuery 砌体

> ID：12271456
> 
> 赞同：1
> 
> 时间：2012-09-04T21:14:45.140
> 
> 标签：jquery, html, debugging, height

我正在使用 jQuery 砌体并面临一个问题，框之间的边距（垂直）有时会有所不同。设置边距正确的唯一方法是使用浏览器控制台重新加载砌体

```
jQuery( ... ).masonry( 'reload' ); 
```

初始化砌体后，某些东西导致高度变化，我找不到它（仅静态内容，不涉及脚本）..

编辑：此问题与从远程目标加载的外部字体有关。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T15:28:01.230

好吧，为了其他 SO 用户的利益，我认为问题可能会更好地公开回答。

您是否使用来自 fonts.com、typekit.com 或 google.com/webfonts 的字体？如果您使用标准字体测试您的页面，然后一切正常，则可能是您的 webfonts 加载得很晚，这会阻止 Masonry 计算出每个砖块的正确垂直尺寸，从而弄乱垂直布局。如果您说重新加载后它看起来正确，则可能意味着到那时所有内容和外部代码（文本、图像、字体、脚本等）都已加载，因此重新加载后一切看起来都符合预期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T16:03:47.113

感谢您的回答，经过搜索我发现这个问题在 Masonry 网站[https://github.com/desandro/masonry/issues/3中有描述](https://github.com/desandro/masonry/issues/3)

解决方案：使用WebFont Loader并在字体加载回调后重新加载砌体

谢谢

# c++ - 什么是包含符号常量的结构的现代 C++ 方法？

> ID：12271457
> 
> 赞同：1
> 
> 时间：2012-09-04T21:14:54.763
> 
> 标签：c++, data-structures

```
enum bool
{
    FALSE = 0,
    TRUE = 1
}; 
```

我想知道如何用现代 C++ 方法翻译它，以及是否有一个非常适合的容器；我知道这`enum`并没有那么受欢迎，但我想不出 C++ 世界中的真正替代方案。

如果想将特定方法的执行与状态相关联怎么办？

* * *

好的，这是我将更加冗长的部分。

我想强调一个事实，即我问的是结构符号常量，而不是关于 TRUE 和 FALSE，我不是那么“需要”。

假设我有一个结构可以用自己的常数表示几个状态

```
enum semaphore
{
    GREEN = 0,
    ORANGE = 1,
    RED = 2
}; 
```

这是 C 代码，现在我的问题是如果有更好的方法，如何在 C++ 中做同样的事情。

当我询问在发生状态变化时是否可以执行诸如自动触发之类的操作时，我的问题仍在继续，例如：

```
int main
{
   ...
   semaphore = 1;
   ...
} 
```

并且没有任何额外的语句，这必须触发 a`method()`只是因为信号量现在是橙色的。

我希望现在更清楚了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T21:37:05.010

*如果想将特定方法的执行与状态相关联怎么办？*

我不确定我明白你的意思，但也许你的意思是这样的：

**定义**

而不是这个：

```
enum BOOL
{
  FALSE = 0,
  TRUE = 1
};

void executeOnlyWithTrue(BOOL b)
{
  if (b == TRUE)
  {
    RunParticularMethodOnlyNeededForTrueState();
  }
} 
```

你来做这件事：

```
class BOOL
{
public:
  virtual void  executeOnlyWithTrue() const {/*default does nothing*/} 
};

class FALSE : public BOOL
{  //no override, so using default executeOnlyWithTrue (BOOL's) 
};

class TRUE : public BOOL
{
public:
  virtual void  executeOnlyWithTrue() const
  {
    RunParticularMethodOnlyNeededForTrueState();
  }
}; 
```

**用法**

而不是这个：

```
const BOOL b = TRUE;
...
executeOnlyWithTrue(b)
... 
```

你来做这件事：

```
const BOOL& b = TRUE();
b.executeOnlyWithTrue(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T21:39:32.837

如果`semaphore`是类类型，则分配：

```
semaphore = 5; 
```

`semaphore.operator=(int)`如果存在，将自动调用函数。因此，您可以通过实现此功能来监视 的任何“更改” `semaphore`（它不需要更改任何内容，但这可能违反最小意外原则）。

# java - 从托管 bean 向异步 Servlet 发送请求生成异常

> ID：12271459
> 
> 赞同：0
> 
> 时间：2012-09-04T21:15:07.027
> 
> 标签：java, jsf, servlets, servlet-3.0, weblogic12c

单击按钮时，我需要在后台运行一些东西，所以我有一个异步 Servlet。从我的托管 bean 中，如果我进行重定向，它会很好地工作（这意味着它可以正确地`run()`在我的类中执行我的方法`extends Runnable`）。像这样

```
String url = externalContext.getRequestContextPath() + "/ReportExecutionServlet";
externalContext.redirect(url); 
```

但是如果我切换到调度，就像这样

```
externalContext.redirect("/ReportExecutionServlet"); 
```

当我尝试获取时它失败了`AsyncContext`

```
AsyncContext aCtx = request.startAsync(request, response); 
```

**错误如下**

```
Caused By: java.lang.IllegalStateException: The async-support is disabled on this request: weblogic.servlet.internal.ServletRequestImpl 
```

知道如何解决这个问题吗？

注意：这是执行我的异步 servlet 的方法，以防万一：

```
 AsyncContext aCtx = request.startAsync(request, response);            
    //delegate long running process to an "async" thread
    aCtx.addListener(new AsyncListener() {

        @Override
        public void onComplete(AsyncEvent event) throws IOException {
            logger.log(Level.INFO, "ReportExecutionServlet handle async request - onComplete");
        }

        @Override
        public void onTimeout(AsyncEvent event) throws IOException {
            logger.log(Level.WARNING, "ReportExecutionServlet handle async request - onTimeout");
        }

        @Override
        public void onError(AsyncEvent event) throws IOException {
            logger.log(Level.SEVERE, "ReportExecutionServlet handle async request - onError");
        }

        @Override
        public void onStartAsync(AsyncEvent event) throws IOException {
            logger.log(Level.INFO, "ReportExecutionServlet handle async request - onStartAsync");
        }
    });
    // Start another service
    ScheduledThreadPoolExecutor executor = new ScheduledThreadPoolExecutor(10);            
    executor.execute(new AsyncRequestReportProcessor(aCtx)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T13:21:43.460

JSF 2.x 不支持异步功能，所以它为什么不工作。更多信息可以在这里找到[FacesServlet Servlet 3.0 异步支持](https://stackoverflow.com/questions/6679790/facesservlet-servlet-3-0-async-support)

# java - 诺基亚c6-00如何编译运行java程序？

> ID：12271461
> 
> 赞同：2
> 
> 时间：2012-09-04T21:15:21.097
> 
> 标签：java, nokia

我有***诺基亚c6***。我可以用 dos-box 编译和运行 c 和 c++ 代码。但是如何用***java***做同样的事情，有可能吗？有没有其他方法可以***在诺基亚 c6-00 中运行 java 程序***。请帮助我。提前谢谢。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T21:34:51.127

您可以为诺基亚 C6 创建 Java 程序。诺基亚 C6 支持 Java ME。

# objective-c - 如何创建子 NSManagedObjectContext？

> ID：12271464
> 
> 赞同：12
> 
> 时间：2012-09-04T21:15:37.643
> 
> 标签：objective-c, ios, xcode, core-data, nsmanagedobjectcontext

我看过一些视频/线程说可以创建“儿童”MOC——使用其他 MOC 作为其持久存储的 MOC。例如，在您为应用程序线程化并希望拥有一个可以保存/回滚子线程创建的更改的单个主 MOC 的上下文中很有用。（据我了解，MOC 和它的 managedObjects 必须都在同一个线程上使用）

问题是，如何创建子 MOC？我无法追踪我正在观看的介绍它们的 WWDC 视频，我所看到的一切都在谈论如何在它们制作完成后使用它们。我可以轻松分配一个新的 MOC，但我该如何设置它持久存储成为另一个 MOC？参考没有显示任何功能！

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-09-04T22:10:19.867

创建一个您可以完全控制同步的新 MOC。这与调用`init`相同，与前父/子关系的行为相同。

```
NSManagedObjectContext *moc = [[NSManagedObjectContext alloc]
       initWithConcurrencyType:NSConfinementConcurrencyType]; 
```

您可以通过设置 MOC 的属性来将 MOC 设置为另一个 MOC：

```
moc.parentContext = someOtherMocThatIsNowMyParent; 
```

在这里，孩子选择父母。我确定我的孩子希望他们是 NSManagedObjectContexts。父上下文必须是`NSPrivateQueueConcurrencyType`或`NSMainQueueConcurrencyType`。

您可以创建一个“绑定”到私有队列的 MOC：

```
NSManagedObjectContext *moc = [[NSManagedObjectContext alloc]
       initWithConcurrencyType:NSPrivateQueueConcurrencyType]; 
```

这意味着您只能通过`performBlock`或`performBlockAndWait`API 访问它。您可以从任何线程调用这些方法，因为它们将确保块中代码的正确序列化。例如...

```
NSManagedObjectContext *moc = [[NSManagedObjectContext alloc]
       initWithConcurrencyType:NSPrivateQueueConcurrencyType];
moc.parentContext = someOtherMocThatIsNowMyParent;
[moc performBlock:^{
    // All code running in this block will be automatically serialized
    // with respect to all other performBlock or performBlockAndWait
    // calls for this same MOC.
    // Access "moc" to your heart's content inside these blocks of code.
}]; 
```

`performBlock`和之间的区别在于`performBlockAndWait`，`performBlock`它将创建一个代码块，并使用 Grand Central Dispatch 安排它在未来某个时间在某个未知线程上异步执行。方法调用将立即返回。

`performBlockAndWait`将与所有其他调用进行一些神奇的同步`performBlock`，并且当在此之前已呈现的所有块都完成时，该块将执行。调用线程将挂起，直到此调用完成。

您还可以创建一个“绑定”到主线程的 MOC，就像私有并发一样。

```
NSManagedObjectContext *moc = [[NSManagedObjectContext alloc]
       initWithConcurrencyType:NSMainQueueConcurrencyType];
moc.parentContext = someOtherMocThatIsNowMyParent;
[moc performBlock:^{
    // All code running in this block will be automatically serialized
    // with respect to all other performBlock or performBlockAndWait
    // calls for this same MOC.  Furthermore, it will be serialized with
    // respect to the main thread as well, so this code will run in the
    // main thread -- which is important if you want to do UI work or other
    // stuff that requires the main thread.
}]; 
```

这意味着只有在您知道自己在主线程上**或**通过`performBlock`或`performBlockAndWait`API 时才应该直接访问它。

现在，您可以通过方法使用“主并发”MOC ，或者**如果**您知道您已经在主线程中运行，则可以`performBlock`直接使用。

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T21:38:19.587

然后初始化子 MOC：

```
[_childMOC performBlockAndWait:^{
            [_childMOC setParentContext:parentMOC]; 
 }]; 
```**

# android - Android：如何在下载前获取文件大小？

> ID：12271465
> 
> 赞同：2
> 
> 时间：2012-09-04T21:15:39.713
> 
> 标签：android, http, download

> **可能重复：**
> [如何在下载文件之前知道文件的大小？](https://stackoverflow.com/questions/2983073/how-to-know-the-size-of-a-file-before-downloading-it)

我必须在我的应用程序中下载一些 pdf。

我需要在开始下载之前设置文件大小，以显示进度条，或使用标准的“正在下载 ..”通知通知用户

如何获得具有新 Url(' [http://mysite.net//mypdf.pdf](http://mysite.net//mypdf.pdf) ') 的文件大小？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T21:24:17.543

```
final URLConnection connection = url.openConnection();
final int length = connection.getContentLength(); 
```

尝试使用[`URLConnection.getContentLength`](http://developer.android.com/reference/java/net/URLConnection.html#getContentLength%28%29)如上。如果服务器没有指定长度，那么你就无法知道。

# php - 使用访问令牌检索用户信息 - Facebook 开发人员

> ID：12271470
> 
> 赞同：2
> 
> 时间：2012-09-04T21:16:01.520
> 
> 标签：php, facebook, facebook-php-sdk, access-token

我正在开发 Facebook 应用程序，我想在用户使用该应用程序时在侧服务器上检索一些用户信息。

为了实现这一点，我将用户访问令牌存储在我的数据库中并将其传递给另一台服务器。

但是，我不确定如何使用访问令牌来检索用户信息。我正在使用 PHP SDK，这是通常的代码：

```
require '../src/facebook.php';

// Create our Application instance (replace this with your appId and secret).
$facebook = new Facebook(array(
  'appId'  => '',
  'secret' => '',
));

// Get User ID
$user = $facebook->getUser(); 
```

我在哪里可以声明访问令牌？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T21:27:52.050

这很简单。如果您输入类似`https://graph.facebook.com/me?access_token=theuseraccesstoken`（在浏览器中）的 url，您将收到一个包含用户信息的 json 文件。

我很确定 facebook php sdk 有一个内置机制来做到这一点（我是 ac# coder），但是你找错地方了，因为使用 access 访问用户信息不需要 api 密钥或秘密令牌。

**更新1：**

我认为它在 sdk 中是这样工作的

```
$facebook->setAccessToken($access_token);
$user = $facebook->getUser(); 
```

**更新2：**

或者像这样

```
$user = $facebook->api('me?access_token='.$access_token); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T22:07:29.913

如果用户已登录，请执行：

```
$facebook->api('/me'); 
```

我会给你一个包含用户信息的数组。

# entity-framework - ObjectContext.LoadProperty 未加载相关实体

> ID：12271472
> 
> 赞同：-1
> 
> 时间：2012-09-04T21:16:05.637
> 
> 标签：entity-framework, entity-framework-4

我在使用`ObjectContext.LoadProperty`（EF 4 Database First）时遇到了困难（字符串和表达式重载对我来说都表现出相同的行为）。给定以下简单模式：

```
Product
--------------
ProductId (pk)
...

Order
--------------
OrderId (pk)
...

OrderItem
--------------
OrderId (pk, fk Order),
ItemNumber (pk),
ProductId (fk Product)
... 
```

因为我发现它比`Includes`在我的特定场景中表现更好，所以我使用`LoadProperty`它来填充相关实体。例如，

```
Order ord = context.Orders.Where(o => o.OrderId = 1).FirstOrDefault();

context.LoadProperty(ord, o => o.Items); // Items is the navigation property name for the
                                            OrderItem -> Order relationship

foreach(var i in ord.Items)
{
    context.LoadProperty(i, oi => oi.Product);
} 
```

这已经存在了一段时间并且运行良好（如您所料）。然而，今天早上我们开始遇到一个场景，即使在调用之后`LoadProperty`，`i.Product`仍然为空。`i.ProductId`是有效的，我什至可以像这样明确加载产品：

```
var product = context.Products.Where(p => p.ProductId == i.ProductId).FirstOrDefault(); 
```

但`LoadProperty`不会加载对象。没有抛出异常，它只是不加载它。我也尝试过指定`MergeOptions.OverwriteChanges`（即使没有），结果可以预见的是相同的。

**什么可能导致`ObjectContext.LoadProperty`以这种方式静默失败？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T22:08:04.433

我发现这似乎是 EF`LoadProperty`功能工作方式的一个问题（如果不是彻底的错误）。

`OrderItem`和表的`Product`值`ProductId`因大小写、尾随空格或两者而异。给定 SQL Server 的默认排序规则，这是合法的，并且保持了引用完整性。这就是产品查询有效的原因，但似乎 EF 在内部某处进行了关键比较，并且对这些值更加严格。

如果您自己遇到此问题，您可以在查询中使用 T-SQL 函数检查尾随空格，`DATALENGTH`并可以使用不同的排序规则比较大小写。

例如，您可以使用以下方法查看我上面的模型中的差异：

```
select
    *

from OrderItem oi

join Product p on p.ProductId = oi.ProductId -- default collation; case and 
                                             -- trailing spaces ignored

where DATALENGTH(oi.ProductId) <> DATALENGTH(p.Product) -- trailing spaces differ
   or oi.ProductId <> p.ProductId COLLATE SQL_Latin1_General_CP1_CS_AS -- case differs 
```

请注意，可以仅使用排序规则来比较尾随空格和字符大小写；如果有人知道执行此类操作的排序规则的名称，请随时编辑此答案或发表评论，我会更新。在那之前，这应该做必要的事情。

# android - 方向更改后无法删除（子）PreferenceScreen 的子项

> ID：12271475
> 
> 赞同：1
> 
> 时间：2012-09-04T21:16:10.300
> 
> 标签：android

我有一个`OnPreferenceClickListener`应该`Preference`从.`preference_to_remove``PreferenceScreen`

问题是，当我的解决方案`preference_to_remove`不在`PreferenceScreen`嵌套屏幕内但不起作用时，当它位于嵌套屏幕内并且屏幕方向发生变化时，我的解决方案才有效。在屏幕方向更改之前，嵌套屏幕也可以按预期工作。

下面的代码包含两个版本，一个是扁平的非嵌套版本，一个`PreferenceScreen`是破碎的嵌套版本`PreferenceScreen`。

屏幕方向更改后嵌套版本无法删除`Preference`with 键的原因是什么？除了只使用 flat并以伪孩子的身份开始新`preference_to_remove`的工作之外，还有什么解决方案？`PreferenceScreens``Intents``PreferenceScreens`

PS：我正在使用`PreferenceActivity`FroYo 兼容性。

**如何使用 Test-App 重现**

打开应用程序→单击平面按钮→单击`preference_to_click`应删除`preference_to_remove`的 . → 方向更改 → 单击`preference_to_click`以再次删除`preference_to_remove`。偏好已删除？成功！

打开 App → 点击 Subscreen-Button → 点击 Test → 现在重复第一次测试的步骤，但这一次`preference_to_remove`在方向改变后将无法移除。

[下载应用程序（来源）](http://www.sendspace.com/file/0f69ma)

**pref_flat.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >

    <Preference
        android:key="preference_to_click"
        android:persistent="false"
        android:title="preference_to_click" />
    <Preference
        android:key="preference_to_remove"
        android:title="preference_to_remove" />

</PreferenceScreen> 
```

**pref_subscreen.xml（嵌套的 PreferenceScreen）**

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android" >

    <PreferenceScreen
        android:key="subscreen"
        android:persistent="false"
        android:title="Test" >
        <Preference
            android:key="preference_to_click"
            android:persistent="false"
            android:title="preference_to_click" />
        <Preference
            android:key="preference_to_remove"
            android:title="preference_to_remove" />
    </PreferenceScreen>

</PreferenceScreen> 
```

**PrefFlatActivity.java 和 PrefSubscreenActivity.java 的区别**

```
1c1
< public class PrefFlatActivity extends PreferenceActivity {
---
> public class PrefSubscreenActivity extends PreferenceActivity {
5,6c5,7
<     public static final String PREFERENCE_TO_CLICK = "preference_to_click";
<     public static final String PREFERENCE_TO_REMOVE = "preference_to_remove";
---
>     private static final String PREFERENCE_TO_CLICK = PrefFlatActivity.PREFERENCE_TO_CLICK;
>     private static final String PREFERENCE_TO_REMOVE = PrefFlatActivity.PREFERENCE_TO_REMOVE;
>     private static final String PREFERENCE_SUBSCREEN = "subscreen";
15c16
<         addPreferencesFromResource(R.xml.pref_flat);
---
>         addPreferencesFromResource(R.xml.pref_subscreen);
28c29
<             PreferenceScreen screen = getPreferenceScreen();
---
>             PreferenceScreen screen = (PreferenceScreen) findPreference(PREFERENCE_SUBSCREEN); 
```

**PrefFlatActivity.java（工作）**

```
/**
 * Works as expected. Clicking toggles the "visibility" of the PREFERENCE_TO_REMOVE Preference.
 */
public class PrefFlatActivity extends PreferenceActivity {
    /**
     * Preference keys.
     */
    public static final String PREFERENCE_TO_CLICK = "preference_to_click";
    public static final String PREFERENCE_TO_REMOVE = "preference_to_remove";

    private final String PREF_NAME = getClass().getName() + ".pref";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        getPreferenceManager().setSharedPreferencesName(PREF_NAME);
        addPreferencesFromResource(R.xml.pref_flat);

        findPreference(PREFERENCE_TO_CLICK)
            .setOnPreferenceClickListener(new OnFlatClickListener());
    }

    /**
     * Removes or adds Preference with key PREFERENCE_TO_REMOVE when clicked.
     */
    private class OnFlatClickListener implements OnPreferenceClickListener {
        private Preference mRescuedPreference;

        public boolean onPreferenceClick(Preference preference) {
            PreferenceScreen screen = getPreferenceScreen();
            Preference prefToRemove = screen.findPreference(PREFERENCE_TO_REMOVE);

            Log.d("test", "Found PREFERENCE_TO_REMOVE: " + (prefToRemove != null));

            if (prefToRemove != null) {
                screen.removePreference(prefToRemove);
                mRescuedPreference = prefToRemove; // Rescue reference to re-add it later.
            }

            else {
                screen.addPreference(mRescuedPreference);
            }

            return true;
        }
    }
} 
```

**PrefSubscreenActivity.java（嵌套，方向改变后损坏）**

```
/**
 * Broken after orientation change. Clicking does not remove/add PREFERENCE_TO_REMOVE.
 */
public class PrefSubscreenActivity extends PreferenceActivity {
    /**
     * Preference keys.
     */
    private static final String PREFERENCE_TO_CLICK = PrefFlatActivity.PREFERENCE_TO_CLICK;
    private static final String PREFERENCE_TO_REMOVE = PrefFlatActivity.PREFERENCE_TO_REMOVE;
    private static final String PREFERENCE_SUBSCREEN = "subscreen";

    private final String PREF_NAME = getClass().getName() + ".pref";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        getPreferenceManager().setSharedPreferencesName(PREF_NAME);
        addPreferencesFromResource(R.xml.pref_subscreen);

        findPreference(PREFERENCE_TO_CLICK)
            .setOnPreferenceClickListener(new OnFlatClickListener());
    }

    /**
     * Removes or adds Preference with key PREFERENCE_TO_REMOVE when clicked.
     */
    private class OnFlatClickListener implements OnPreferenceClickListener {
        private Preference mRescuedPreference;

        public boolean onPreferenceClick(Preference preference) {
            PreferenceScreen screen = (PreferenceScreen) findPreference(PREFERENCE_SUBSCREEN);
            Preference prefToRemove = screen.findPreference(PREFERENCE_TO_REMOVE);

            Log.d("test", "Found PREFERENCE_TO_REMOVE: " + (prefToRemove != null));

            if (prefToRemove != null) {
                screen.removePreference(prefToRemove);
                mRescuedPreference = prefToRemove; // Rescue reference to re-add it later.
            }

            else {
                screen.addPreference(mRescuedPreference);
            }

            return true;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T14:53:32.370

**编辑：**我一直无法按照您的要求让它工作。我通读了`Preference`s 的源代码以及它们如何在没有任何运气的情况下处理状态，所以我可能遗漏了一些明显的东西（这不是经常发生的情况吗？）

我做了一些测试，我相信它用来显示嵌套的状态`PreferenceScreen`和/或它的行为方式是我们都没有预料到的。例如，当使用 a而不是 a时，不会观察到此行为。`Dialog``PreferenceScreen``PreferenceCategory``PreferenceScreen`

## 由于`Preference`不推荐使用这种使用 s 的方式，因此您始终可以尝试使用片段：

> [http://developer.android.com/reference/android/preference/PreferenceActivity.html](http://developer.android.com/reference/android/preference/PreferenceActivity.html)

但是，我怀疑您出于遗留原因正在避免这种情况。

## `Preference`另一种选择是以编程方式创建您的：

[根据其他设置在代码中构建首选项屏幕](https://stackoverflow.com/questions/12551854/building-preference-screen-in-code-depending-on-another-setting?rq=1)

## 或者，您可以自己处理配置更改：

```
http://developer.android.com/reference/android/app/Activity.html#ConfigurationChanges
https://stackoverflow.com/questions/3542333/how-to-prevent-custom-views-from-losing-state-across-screen-orientation-changes/8127813#8127813
<activity ..
 android:configChanges="orientation|keyboardHidden" .. > 
```

希望你能尽快弄清楚这一点。我确信解决方案最终会出现在我们面前；不可能那么难！*这是希望*；）

**原始来源（大部分）保留在下面：**

```
 package com.example.removepref;

    import android.preference.Preference;
    import android.preference.Preference.OnPreferenceClickListener;
    import android.preference.PreferenceActivity;
    import android.preference.PreferenceScreen;
    import android.util.Log;

    public class PrefSubscreenActivity extends PreferenceActivity {
        /**
         * Preference keys.
         */
        private static final String PREFERENCE_TO_CLICK = PrefFlatActivity.PREFERENCE_TO_CLICK;
        private static final String PREFERENCE_TO_REMOVE = PrefFlatActivity.PREFERENCE_TO_REMOVE;
        private static final String PREFERENCE_SUBSCREEN = "subscreen";

        private final String PREF_NAME = getClass().getName() + ".pref";

        @Override
        protected void onResume() {
            super.onResume();
            getPreferenceManager().setSharedPreferencesName(PREF_NAME);
            addPreferencesFromResource(R.xml.pref_subscreen);
            findPreference(PREFERENCE_TO_CLICK).setOnPreferenceClickListener(new OnFlatClickListener());
        }

        /**
         * Removes or adds Preference with key PREFERENCE_TO_REMOVE when clicked.
         */
        private class OnFlatClickListener implements OnPreferenceClickListener {
            private Preference mRescuedPreference;
            private boolean mPrefToRemoveVisible = true;

            public boolean onPreferenceClick(Preference preference) {
                // toggle visibility
                mPrefToRemoveVisible = !mPrefToRemoveVisible; 

                PreferenceScreen screen = (PreferenceScreen) findPreference(PREFERENCE_SUBSCREEN);
                Preference prefToRemove = screen.findPreference(PREFERENCE_TO_REMOVE);

                Log.d("test", "Found PREFERENCE_TO_REMOVE: " + (prefToRemove != null));
                Log.d("test", "And noted mPrefToRemoveVisible: " + mPrefToRemoveVisible);

                //Replaced the conditional blocks:
                if (mPrefToRemoveVisible && null == prefToRemove) {
                    boolean added = screen.addPreference(mRescuedPreference);
                    Log.d("test", "screen.addPreference(mRescuedPreference) success?" + added);
                } else if (!mPrefToRemoveVisible && null != prefToRemove) {
                    mRescuedPreference = prefToRemove;
                    boolean removed = screen.removePreference(prefToRemove);
                    Log.d("test", "screen.removePreference(mRescuedPreference) success?" + removed);
                }

                return true;
            }
        }
    } 
```

推荐阅读：http: [//developer.android.com/guide/topics/resources/runtime-changes.html](http://developer.android.com/guide/topics/resources/runtime-changes.html)

# java - 创建按钮边缘的“地图”

> ID：12271477
> 
> 赞同：2
> 
> 时间：2012-09-04T21:16:16.827
> 
> 标签：java, android, view

所以从这里的这个问题开始：[圆形按钮](https://stackoverflow.com/questions/12255701/rounded-buttons)，我想我需要创建一种视图边缘的地图，假设我有一个看起来像这样的视图：

![在此处输入图像描述](../Images/bc3dfd3d69f9b5973d6fb8f10276caf9.png)

该按钮不会是蓝色或任何特定颜色，因此我们无法检查用户触摸的位置是否为蓝色，这是上一个问题中的一个答案所建议的。

假设我收到了一个触摸事件，我在这个视图中得到了触摸的位置，视图是矩形的，我只想在他们按下蓝色部分时接受输入。我怎么能弄清楚这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T21:35:43.790

让我们假设图形的边界框完全填满了视图。我们可以如下进行。感兴趣的区域以两个同心圆和视图为界。（圆心是视图的右下角。）当我们得到触摸时，我们只需要计算从触摸坐标到右下角的距离，并将其与两个圆半径进行比较。（您可以通过将平方距离与平方半径进行比较来避免平方根。）如果距离在半径之间，则触摸为蓝色（或任何颜色）。我们不需要计算触摸是否在边界框内；我们已经知道，因为事件被传递到视图。

这是一些示例代码。它用于确定一个点是否在两个同心圆（一个环形）内的检测器，如果是，它会击中哪个象限。

```
public class ArcHitDetector {
    public enum Quadrant {
        TOP_LEFT, TOP_RIGHT, BOTTOM_LEFT, BOTTOM_RIGHT
    }
    private int xCenter, yCenter, innerR2, outerR2;
    /**
     * Construct an ArcHitDetector for an annulus centered at given
     * points and with given inner and outer radii.
     *
     * @param xCenter the horizontal center coordinate
     * @param yCenter the vertical center coordinate
     * @param outerR the outer radius of the annulus
     * @param innerR the inner radius of the annulus
     */
    public ArcHitDetector(int xCenter, int yCenter, int outerR, int innerR) {
        this.xCenter = xCenter;
        this.yCenter = yCenter;
        this.outerR2 = outerR * outerR;
        this.innerR2 = innerR * innerR;
    }

    /**
     * Classify a point with respect to the annulus. It assumes
     * screen coordinates (x increases to the right; y increases
     * down).
     *
     * @param x the x coordinate of the point to test
     * @param y the y coordinate of the point to test
     *
     * @return the Quadrant of the annulus in which the point falls,
     *    or null if the point does not lie in the annulus
     */
    public Quadrant classifyHit(int x, int y) {
        int dx = x - xCenter;
        int dy = y - yCenter;
        int d2 = dx * dx + dy * dy;
        if (d2 <= outerR2 && d2 >= innerR2) {
            if (x >= xCenter) {
                return y <= yCenter ? TOP_RIGHT : BOTTOM_RIGHT;
            } else {
                return y <= yCenter ? TOP_LEFT : BOTTOM_LEFT;
            }
        } else {
            return null;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T21:31:56.610

我建议创建代表该形状的顶部和底部曲线的方程，2 个倒置抛物线，并检查**y 在给定 x 值处是否大于底部曲线**方程的 y，并且 y**小于给定 x 值处的顶部曲线的 y**（并且 y 大于 0，假设 0 是底部，并且 x 小于按钮的右侧多远）。

# xpath - xpath php属性不起作用？

> ID：12271480
> 
> 赞同：3
> 
> 时间：2012-09-04T21:16:46.027
> 
> 标签：xpath, simplexml, php

收到此错误

> 在非对象上调用成员函数 attributes()

我在 SO 上找到了多个答案，但似乎没有一个能解决我的问题？

这是 XML：

```
<Routes>
    <Route type="source" name="incoming">
    </Route>
<Routes> 
```

这是PHP：

```
$doc = new SimpleXMLElement('routingConfig.xml', null, true);
class traverseXML {

    function getData() {
        global $doc;
        $routeCount = count($doc -> xpath("Route")); //this value returns correctly
        $routeArr = array();
        for ($i = 1; $i <= $routeCount; $i++) {

            $name = $doc -> Route[$i] -> attributes() -> name;

            array_push($routeArr, $name);

        }
        return $routeArr;

    }

    }
    $traverseXML = new traverseXML;
    var_dump($traverseXML -> getData()); 
```

我理解错误的含义，但它是如何成为非对象的？如何返回 的`name`属性`Routes/Route[1]`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T21:36:51.290

你`$doc`的是`<Routes>`。试图从中得到`->Routes`就是试图得到

```
<Routes>
    <Routes> 
```

你需要做`$doc->Route[$i]`。当您在文档根目录之后命名变量时，这样的错误不太常见：

```
$Routes = new SimpleXMLElement('routingConfig.xml', null, true); 
```

此外，您的 XML 无效。Routes 元素未关闭。

此外，您不需要 XPath。SimpleXML 是可遍历的，因此您可以通过以下方式遍历所有路由

```
foreach ($Routes->Route as $route) { 
```

并`attributes()`返回一个数组，因此您不能链接`->name`它，但必须使用方括号访问它。但`attributes()`无论如何都不需要使用，因为您可以通过方括号直接从 SimpleXmlElements 获取属性，例如

```
echo $route['name']; 
```

这是一个将打印“incoming”的示例：

```
$xml = <<< XML
<Routes>
    <Route type="source" name="incoming"/>
</Routes>
XML;

$routes = simplexml_load_string($xml);

foreach ($routes->Route as $route) {
    echo $route['name'];
} 
```

[演示](http://codepad.org/0dHylkPk)

如果你想用 XPath 来做，你可以像这样在一个数组中收集所有属性：

```
$routeNames = array_map('strval', $Routes->xpath('/Routes/Route/@name')); 
```

是的，就这么一行:)

至于你的课：

[不要使用`global`. 忘记它的存在。](https://stackoverflow.com/questions/5166087/php-global-in-functions/5166527#5166527)如果你想有一个类，注入依赖，例如做

```
class Routes
{
    private $routes;

    public function __construct(SimpleXmlElement $routes)
    {
        $this->routes = $routes;
    }

    public function getRouteNames()
    {
        return array_map('strval', $this->routes->xpath('/Routes/Route/@name'));
    }
}

$routes = new Routes(simplexml_load_string($xml));
print_r($routes->getRouteNames()); 
```

[演示](http://codepad.viper-7.com/dEElo2)

# python - 使用一个“in”语句测试多个对象是否在列表中（Python）

> ID：12271481
> 
> 赞同：8
> 
> 时间：2012-09-04T21:16:49.337
> 
> 标签：python, python-3.x, conditional-operator

> **可能重复：**
> [Python 检查以下所有项目是否都在列表中](https://stackoverflow.com/questions/3931541/python-check-if-all-of-the-following-items-is-in-a-list)

所以我想测试一下 word 和 word1 是否都在列表 lst 中。当然，我可以写：

```
if word in lst and word1 in lst:
    do x 
```

但我想知道是否可以将该语句缩短为：

```
if (word and word1) in lst:
    do x 
```

当然，这是行不通的，但是有什么有效的类似的东西吗？

我尝试了以下方法，但如您所见，它没有产生预期的结果。

```
>>> word in lst
True
>>> word1 in lst
True
>>> (word, word1) in lst
False 
```

**编辑：**谢谢你的回答，我想我现在对如何做到这一点有一个很好的想法。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-04T21:28:06.450

答案是正确的（至少其中一个是正确的）。但是，如果您正在进行包含检查并且不关心顺序，就像您的示例可能暗示的那样，真正的答案是您应该使用集合并检查子集。

```
words = {"the", "set", "of", "words"}
if words <= set_of_words:
   do_stuff() 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-04T21:20:45.257

列出您的单词和生成器表达式，检查它们是否在列表中：

```
words = ["word1", "word2", "etc"]
lst = [...]
if all((w in lst for w in words)):
    #do something 
```

`all`检查可迭代对象中的所有值是否为真。因为我们使用了发电机，所以这仍然是短路优化的。当然，如果单词列表对于单行来说不是太大，您可以内联：

```
if all((w in lst for w in ["word1", "word2", "etc"])):
     ... 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-04T21:24:44.177

你可以这样做：

```
if all(current_word in lst for current_word in (word, word1)):
  do x 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-04T21:44:35.197

**注意：永远不要使用它。这里只是为了说明 python 的“又一个”功能。**

效率较低的解决方案：

```
>>> from itertools import permutations
>>> lis=[0,1,2,3,4]
>>> (1,2) in (z for z in permutations(lis,2)) #loop stops as soon as permutations(lis,2) yields (1,2)
True
>>> (1,6) in (z for z in permutations(lis,2))
False
>>> (4,2) in (z for z in permutations(lis,2))
True
>>> (0,5) in (z for z in permutations(lis,2))
False
>>> (0,4,1) in (z for z in permutations(lis,3))
True
>>> (0,4,5) in (z for z in permutations(lis,3))
False 
```

# javascript - 除了数据隐藏之外，在函数调用中包装数据还有什么好处？

> ID：12271493
> 
> 赞同：0
> 
> 时间：2012-09-04T21:17:57.803
> 
> 标签：javascript

我正在阅读“Javascript：权威指南”，6E，我遇到了这个例子：

```
 var cookies = (function() {
    var cookies = {};
    var all = document.cookie;
    if ( all === "" )
      return cookies;
    var list = all.split("; ");
    for ( var i = 0; i < list.length; i++ )
    {
      var cookie = list[ i ];
      var p = cookie.indexOf( "=" );
      var name = cookie.substring( 0, p );
      var value = cookie.substring( p + 1 );
      value = decodeURIComponent( value );
      cookies[ name ] = value;
    }
    return cookies;
  }()); 
```

我可以看到他在这里做了什么；他创建了一个函数并立即调用它。我只是不明白为什么他会在这种情况下这样做。我以前在 jQuery 中看到过隐藏“$”运算符的这个习惯用法，但他没有在这里隐藏任何东西；他创建的唯一变量是“cookies”，这就是他要填充的变量。我无法弄清楚这与以下有何不同：

```
var cookies = {};
var all = document.cookie;
if ( all !== "" )
{
    var list = all.split("; ");
    for ( var i = 0; i < list.length; i++ )
    {
      var cookie = list[ i ];
      var p = cookie.indexOf( "=" );
      var name = cookie.substring( 0, p );
      var value = cookie.substring( p + 1 );
      value = decodeURIComponent( value );
      cookies[ name ] = value;
    }
} 
```

除了在全球范围内引入“全部”吗？是否有一些更深层次的角落案例他正在回避这个我只是不知道的特定示例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T21:21:25.490

Javascript 只有两个作用域：全局和函数。与许多语言不同，它没有块范围。

因此，您的替代代码将`all`, `list`, `i`, `cookie`, `p`, `name`, and`value`放入定义的任何范围内`cookies`。

现在，如果您的代码片段在某个函数定义中并且正在返回 cookie，那可能还不错。但是，如果它在顶级脚本中，那么您会看到很多非常常见的变量名称，这些变量名称要转储到全局命名空间中。

因此，当您需要函数的范围限制时，立即函数很有用，但又不想让 Function 对象在之后乱跑。

# 编辑

扩大*其他*优势。

立即函数的另一个常见用途是按时进行设置，通常在涉及浏览器嗅探时：

```
var foo = (function(browser) {

    if(isBar(browser) {
        return function() {
            /* Some implementation of foo that is compatible with bar */
        };
    } else if(isBaz(browser) {
        return function() {
            /* Some implementation of foo that is compatible with baz */
        };
    } else {
        return function() {
            /* Some generic implementation of foo  */
        };
    }
}(browser_reference)); 
```

在一个镜头中，您已经定义了一个与浏览器兼容的版本，`foo`而不会用确定浏览器是什么所需的变量来混淆您的范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T21:22:35.503

Javascript 没有命名空间的概念。但它确实有一个范围的概念。示例代码是一种封装代码和模拟命名空间的方式。

基本上，它可以防止您的代码意外覆盖其他人的代码（反之亦然）。

# mysql - 使用 UNION 语句进行双重 ORDER BY 排序

> ID：12271494
> 
> 赞同：0
> 
> 时间：2012-09-04T21:18:01.430
> 
> 标签：mysql, sql

```
(
SELECT * 
FROM (

SELECT d
FROM myTable
WHERE id =  "4h"
AND d <  "2011-12-08 12:00:00"
ORDER BY d DESC 
LIMIT 10
)tmp
ORDER BY d ASC
)
UNION (

SELECT d
FROM myTable
WHERE id =  "4h"
AND d >=  "2011-12-08 12:00:00"
ORDER BY d ASC 
LIMIT 10
) 
```

我试图通过使用两个`SELECT`语句和一个`UNION`. 第一个`SELECT`用于`ORDER BY DESC`获取前面的 10 个，然后我尝试在一秒钟内将其封装以`ORDER BY ASC`按顺序获取所有结果，`ASC`但由于某种原因它不起作用。

这是我目前得到的结果：

```
d
2011-12-08 08:00:00
2011-12-08 04:00:00
2011-12-08 00:00:00
2011-12-07 20:00:00
2011-12-07 16:00:00
2011-12-07 12:00:00
2011-12-07 08:00:00
2011-12-07 04:00:00
2011-12-07 00:00:00
2011-12-06 20:00:00 <- These top 10 results should ASC!
2011-12-08 12:00:00
2011-12-08 16:00:00
2011-12-08 20:00:00
2011-12-09 00:00:00
2011-12-09 04:00:00
2011-12-09 08:00:00
2011-12-09 12:00:00
2011-12-09 16:00:00
2011-12-09 20:00:00
2011-12-11 20:00:00 
```

这就是我想要的：

```
d
2011-12-06 20:00:00
2011-12-07 00:00:00
2011-12-07 04:00:00
2011-12-07 08:00:00
2011-12-07 12:00:00
2011-12-07 16:00:00
2011-12-07 20:00:00
2011-12-08 00:00:00
2011-12-08 04:00:00
2011-12-08 08:00:00
2011-12-08 12:00:00
2011-12-08 16:00:00
2011-12-08 20:00:00
2011-12-09 00:00:00
2011-12-09 04:00:00
2011-12-09 08:00:00
2011-12-09 12:00:00
2011-12-09 16:00:00
2011-12-09 20:00:00
2011-12-11 20:00:00 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T21:20:55.240

```
(
  SELECT   d
  FROM     myTable
  WHERE    id = '4h' AND d <  '2011-12-08 12:00:00'
  ORDER BY d DESC
  LIMIT    10
) UNION ALL (  
  SELECT   d
  FROM     myTable
  WHERE    id = '4h' AND d >= '2011-12-08 12:00:00'
  ORDER BY d ASC
  LIMIT    10
)
ORDER BY d ASC 
```

# iphone - 使用 Cocoa touch 在 iPhone 上测量下载速度的最佳方法

> ID：12271502
> 
> 赞同：5
> 
> 时间：2012-09-04T21:19:12.917
> 
> 标签：iphone, ios, cocoa-touch, nsurlconnection

我正在制作一个应用程序，其中我想要提供的功能之一是测量连接的下载速度。为此，我使用 NSURLConnection 开始下载一个大文件，并在一段时间后取消下载并进行计算（下载的数据/经过的时间）。虽然其他应用程序如 speedtest.net 每次都提供恒定的速度，但我的或多或少波动 2-3 Mbps。

基本上我正在做的是，在调用方法 connection:didReceiveResponse: 时启动计时器。方法connection:didReceiveData: 500调用后我取消下载，停止定时器，计算速度。

这是代码：

```
- (IBAction)startSpeedTest:(id)sender 
{
    limit = 0;
    NSURLRequest *testRequest = [NSURLRequest requestWithURL:self.selectedServer  cachePolicy:NSURLRequestReloadIgnoringCacheData timeoutInterval:60];

    NSURLConnection *testConnection = [NSURLConnection connectionWithRequest:testRequest delegate:self];
    if(testConnection) {
        self.downloadData = [[NSMutableData alloc] init];
    } else {
        NSLog(@"Failled to connect");
    }
}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    self.startTime = [NSDate date];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    [self.downloadData appendData:data];
    if (limit++ == 500) {
        [self.connection cancel];
        NSDate *stop = [NSDate date];
        [self calculateSpeedWithTime:[stop timeIntervalSinceDate:self.startTime]];
        self.connection = nil;
        self.downloadData = nil;
    }
} 
```

我想知道是否有更好的方法来做到这一点。更好的算法，或者更好的类来使用。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-09-14T07:36:05.180

开始下载后，立即捕获当前系统时间并将其存储为`startTime`. 然后，您需要做的就是在下载过程中的任何时候计算数据传输速度。只需再次查看系统时间并将其用作`currentTime`计算到目前为止所花费的总时间。

> downloadSpeed = bytesTransferred / (currentTime - startTime)

像这样：

```
static NSTimeInterval startTime = [NSDate timeIntervalSinceReferenceDate];    
NSTimeInterval currentTime = [NSDate timeIntervalSinceReferenceDate];
double downloadSpeed = totalBytesWritten / (currentTime - startTime); 
```

您可以从以下位置使用此方法`NSURLConnectionDownloadDelegate`：

```
- (void)connectionDidResumeDownloading:(NSURLConnection *)connection totalBytesWritten:(long long)totalBytesWritten expectedTotalBytes:(long long) expectedTotalBytes; 
```

# python - Python - 从文本文件中读取数字并放入列表

> ID：12271503
> 
> 赞同：5
> 
> 时间：2012-09-04T21:19:15.710
> 
> 标签：python

所以就像标题说的我开始学习一些python并且我很难掌握这种技术。我需要完成的是读取一些数字并将它们存储在一个列表中。文本文件如下所示：

```
0 0 3 50

50 100 4 20 
```

基本上这些是用于 python 的海龟制作形状的坐标和方向。我把那部分记下来了，唯一的问题是让它们以正确的格式出现。所以我不知道如何将这些数字从文件中获取到`[ [0, 0, 3, 50], [50, 100, 4, 20] ]` A 列表中，每个四个坐标都是那个大列表中的一个列表。

这是我的尝试，但正如我所说，我需要一些帮助 - 谢谢。

```
polyShape=[]
infile = open(name,"r")
num = int(infile.readline(2))
while num != "":
    polyShape.append(num)
    num = int(infile.readline(2))
infile.close() 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-04T21:21:52.567

```
with open('data.txt') as f:
    polyShape = []
    for line in f:
        line = line.split() # to deal with blank 
        if line:            # lines (ie skip them)
            line = [int(i) for i in line]
            polyShape.append(line) 
```

会给你

```
[[0, 0, 3, 50], [50, 100, 4, 20]] 
```

这将适用于包含空行（或不包含）的文件。

`with`当您完成或遇到异常时，使用该构造会自动为您关闭文件。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-04T21:23:49.247

假设您的输入文件中实际上没有空行：

```
with open(name, "r") as infile:
    polyShape = [map(int, line.split()) for line in infile] 
```

说明：`map(int, line.split())`拆分每个`line`部分并将每个部分转换为`int`. 该`[X for Y in Z]`构造是一个列表推导式，它依次映射`map`文件的所有行并在列表中返回其结果。

如果你现在觉得这太复杂了，那么这`map(int, line.split())`是主要的带回家的信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-04T21:23:31.923

```
with open('data.txt') as f:
    lis=[map(int,x.split()) for x in f if x.strip()]   # if x.strip() to skip blank lines

   #use list(map(int,x.split()))  in case of python 3.x 
```

这是如何`map()`工作的：

```
>>> map(int,'1 2 3 4'.split())
[1, 2, 3, 4] 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-04T21:22:21.883

迭代文件将是最简单的方法：

```
poly_shape = []

with open(name, 'r') as handle:
    for line in handle:
        if not line.strip():
            continue  # This skips blank lines

        values = map(int, line.split())
        poly_shape.append(values) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-04T21:38:10.967

单线：

```
[ [int(x) for x in line.split(' ')] for line in open(name,'r').readlines() if line.strip()] 
```

但是这`readlines`部分可能不是一个好主意。

我很确定这`[int(x) for x in ... ]`比`map`在其他建议的解决方案中使用更快。

**编辑**

感谢 Blender：不需要`.readlines`，这很酷，所以我们只有：

```
[ map(int, line.split()) for line in open(name,'r') if line.strip()] 
```

我也使用`map(int, )`它，因为它实际上更快，而且你也可以使用`line.split()`代替`line.split(' ')`.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-24T13:25:34.383

我不建议使用`append`大型阵列。它比创建零数组并为其赋值慢 50 倍。

```
import numpy
fname = "D:\Test.txt";
num_lines = sum(1 for line in open(fname));
array = numpy.zeros((num_lines,4));
k = 0;
with open(fname, "r") as ins:
    for line in ins:
        a =[int(i) for i in line.split(' ')];;
         array[k,0:4] =a;
         k = k+1;
print(array) 
```

# mysql - mysql获取数据并在另一个表中查找

> ID：12271504
> 
> 赞同：2
> 
> 时间：2012-09-04T21:19:16.630
> 
> 标签：mysql

我的数据库中有两个表。表 1 是“时间表”及其相应所有者和标题的列表。

表 2 是有权访问时间线但属于关注者而非所有者的用户列表。

我正在尝试编写一个查询来输出 lineID 和相应的标题，这些标题链接到两个表中的任何一个中的 userID。

```
A query for userID 1 would ideally output:

1 a
2 b
3 c
6 f 
```

希望这不会太令人困惑，但目的是用给定 UserID 的 LineID 和 Title 填充动态生成的选择框...

```
Table 1 ("owners")
--------------------------
| LineID | UserID | Title |
| 1      | 1      | a     |
| 2      | 1      | b     |
| 3      | 1      | c     |
| 4      | 2      | d     |
| 5      | 2      | e     |
| 6      | 1      | f     |
--------------------------

Table 2 ("followers")
----------------------------
| RowID | LineID | UserID   |
| 1     | 1      | 1        |
| 2     | 1      | 2        |
| 3     | 3      | 1        |
| 4     | 3      | 2        |
| 5     | 2      | 2        |
| 6     | 6      | 1        |
---------------------------- 
```

我尝试使用：

```
SELECT title 
FROM `lines` 
LEFT JOIN follow 
    ON follow.user_id = lines.user_id 
WHERE follow.user_id = 1 
```

这最终产生了重复的行。

理想情况下，我需要的输出是一个包含与该用户 ID 关联的所有 lineID 和 Titles 的数组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T08:01:48.263

```
select   LineId, Title 
from     owners 
where    LineId in (select LineId from followers group by LineId ) 
order by owners.LineId 
```

# virtualhost - PyWSGI (Gevent) 虚拟主机

> ID：12271507
> 
> 赞同：0
> 
> 时间：2012-09-04T21:19:21.320
> 
> 标签：virtualhost, gevent

是否可以在 Gevent 的 pywsgi 服务器中托管多个站点？我有一台带有bottlepy和gevent pywsgi服务器的机器，我很好奇我将如何建立第二个站点。我唯一能想到的就是使用 nginx 之类的东西作为前端，并在不同的内部端口上运行每个 gevent 服务器/站点。这真的是解决这个问题的最佳方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T14:04:22.203

虚拟主机不是 WSGI 协议的一部分。

如果您不想使用 nginx 或任何其他前端服务器，您可以编写或使用现有的 wsgi 中间件，该中间件将分派到几个底层 wsgi 应用程序。

像这样的东西（我没有测试过）： [http ://discorporate.us/jek/projects/wfront/](http://discorporate.us/jek/projects/wfront/)

但是，wsgi 服务器主要用作应用程序服务器，而不是前端服务器。我会使用 nginx、apache、lighttpd 或任何其他经过良好测试的前端服务器并让它完成它的工作。使用前端服务器的几个原因：

*   他们检查请求完整性以确保安全
*   他们支持 SSL
*   它们通常更健壮
*   它们可以充当多个 wsgi 进程的负载平衡器以进行扩展

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-22T02:21:03.420

如果您想关注 CherryPy（作为 WSGI 服务器）和 Bottle（作为应用程序），我已经使用了一段时间，并且证明它非常稳定。

以下是多个虚拟主机的示例。

```
import cherrypy
from bottle import Bottle
import os

app1 = Bottle() 
app2 = Bottle()

@app1.route('/')
def homePage():    
    return "=========  home1 ==============="

@app2.route('/')
def homePage_2():    
    return "=========  home2 ==============="

vhost = cherrypy._cpwsgi.VirtualHost(None, 
                                     domains={
                                              'www.domain1.com': app1, 
                                              'www.domain2.com': app2,
                                             }
                                     )

cherrypy.tree.graft(vhost) 

cherrypy.config.update({
                        'server.socket_host': '192.168.1.4',
                        'server.socket_port': 80,
                      })
cherrypy.engine.start()
cherrypy.engine.block() 
```

# java - Struts2 验证行为怪异

> ID：12271510
> 
> 赞同：1
> 
> 时间：2012-09-04T21:19:30.610
> 
> 标签：java, validation, struts2

这是我的验证方法 -

```
@Override
  public void validate() {
    errors = new HashMap<String, String>();
    if(StringUtil.isBlank(examCode)){
      errors.put("examCode", "Exam code is required");
    }
    if(StringUtil.isBlank(strPaperType)){
      errors.put("paperType", "Paper Type is required");
    }else{
      paperType = PaperType.getPaperTypeByValue(strPaperType);
      if(paperType == null){
        errors.put("paperType", "A valid Paper Type is required");
      }
      if(paperType.equals(PaperType.PRACTICE)){
        if(topicId ==null){
          errors.put("topicId", "Topic Id is required");
        }
      }
    }
    if(StringUtil.isBlank(instructions)){
      errors.put("instructions", "Paper Instructions are required");
    }
  } 
```

'errors' 是我自己在操作中定义的地图。我没有向“fieldErrors”添加任何错误。如果我调试“fieldErrors”，甚至在输入“验证”方法之前发生的事情，我会看到以下两个条目 -

```
{"id":["Invalid field value for field \"id\"."],"topicId":["Invalid field value for field \"topicId\"."]} 
```

我不知道他们是从哪里添加的。这是我的struts conf。

```
<package name="api" extends="json-default" namespace="/api">
    <action name="paper" class="paperApiAction">
      <result name="json" type="json">
        <param name="root">responseDto</param>
      </result>
      <result name="input" type="json">
        <param name="root">fieldErrors</param>
      </result>
    </action>
  </package> 
```

需要帮助。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T23:53:21.800

“ [conversionError”拦截器](http://struts.apache.org/2.x/docs/conversion-error-interceptor.html)会接受类型转换错误并将它们放入`fieldErrors`. 有些用例更容易将其从堆栈中取出；我不确定这是否是其中之一。

为什么要复制`fieldErrors`地图？即使您只是想在自己的 DTO 中使用地图，为什么不使用现有的验证机制呢？区别很小，而且更灵活一些。然后，您可以将纸张类型验证构建到外部化的业务逻辑中，并简化对其和操作的测试。

* * *

不相关，但由于缺少空格，我发现您的代码难以阅读。一个天真的重构：

```
@Override
public void validate() {
    errors = new HashMap<String, String>();

    if (StringUtil.isBlank(examCode)) {
        errors.put("examCode", "Exam code is required");
    }

    if (StringUtil.isBlank(instructions)) {
      errors.put("instructions", "Paper Instructions are required");
    }

    if (StringUtil.isBlank(strPaperType)) {
        errors.put("paperType", "Paper Type is required");
    } else {
        validatePaperType();
    }
}

public void validatePaperType() {
    paperType = PaperType.getPaperTypeByValue(strPaperType);
    if (paperType == null) {
        errors.put("paperType", "A valid Paper Type is required");
        return;
    }

    if (paperType.equals(PaperType.PRACTICE) && (topicId == null)) {
        errors.put("topicId", "Topic Id is required");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T21:31:39.500

您的**id**和**topicId**类变量似乎是整数，但您正试图将它们设置为字符串。

# erlang - 无法使用 kerl 删除 erlang 构建

> ID：12271511
> 
> 赞同：6
> 
> 时间：2012-09-04T21:19:40.007
> 
> 标签：erlang

我已经使用 kerl 安装了 Erlang。我将其构建为 32 位，而不是我应该的 64 位。试图纠正我的错误被证明是有问题的。

```
./kerl status 
```

带给我

```
Available builds:
R15B01,r15b01
----------
Available installations:
----------
The current active installation is:
/Users/jason/erlang/r15b01 
```

然后当我尝试

```
./kerl delete r15b01 
```

或者

```
./kerl delete R15B01 
```

我明白了

```
No build named r15b01 
```

和

```
./kerl build R15B01 r15b01 
```

给我

```
There's already a build named r15b01 
```

所以我无法重建，也无法删除旧的。我知道我很可能遗漏了一些非常明显的东西，但我对此并不陌生，找不到任何东西。

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-05T14:43:48.900

您误解了删除的语法。您需要在指定实际构建之前指定您正在执行的删除类型。

代替...

> kerl 删除 build_name

你应该输入...

> kerl delete **build** build_name kerl
> delete**安装**路径

要获取可以删除的已安装版本或安装路径的列表，请键入：

> kerl list 构建
> kerl list 安装

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-26T01:14:26.160

要列出已注册的安装：

```
kerl list installations 
```

要删除其中之一：

```
kerl delete installation /full/path/from/above 
```

在此处使用绝对路径，如列表命令中所示。

如果删除命令失败，也可以删除文件`~/kerl/otp_installations中的安装行，这不是官方的解决方案。请记住还要手动删除安装的剩余文件。

# sql-server - 我可以使用备份/还原来移动使用 EF Code First 创建的数据库吗？

> ID：12271515
> 
> 赞同：2
> 
> 时间：2012-09-04T21:20:13.703
> 
> 标签：sql-server, entity-framework, ef-code-first

我有一个针对 SQL Server 2012 数据库使用 EF Code First 的应用程序。我正在使用 DropCreateDatabaseIfModelChanges 初始化程序。

我的开发机器上有一个数据库，我想转移到我的测试机器上，为此我正在尝试使用备份/恢复。不幸的是，这样做后，我得到了可怕的“无法检查模型兼容性，因为数据库不包含模型元数据”错误。

我不明白为什么会这样——数据库在我的开发机器上工作正常。不能将数据库转移到另一台机器上吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T07:59:25.143

已解决：问题是 __MigrationHistory 表虽然存在，但由于数据库权限不足，应用程序无法访问。我（暂时）将用户设置为数据库上的 DBO，一切正常。（给贾扬塔的帽子小费）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T04:35:52.887

现在元数据表已从代码优先数据库中删除，并将该`__MigrationHistory` 表添加到系统表中。您可以尝试`Enable-Migrations`在包管理器控制台中运行命令。[这里有更多细节](http://blog.oneunicorn.com/2012/01/13/ef-4-3-beta-1-what-happened-to-that-edmmetadata-table/)。

# c# - 保存自定义配置部分会导致 System.UnauthorizedAccessException

> ID：12271517
> 
> 赞同：5
> 
> 时间：2012-09-04T21:20:20.437
> 
> 标签：c#, configuration, sections

我在我的 app.config 中尝试使用自定义配置部分时遇到以下问题。我使用自定义配置部分来跟踪我想用我的程序备份的文件夹选择，如下所示：

```
<CustomConfigSection>
    <BackupLocations>
        <clear />
        <add path="C:\Users\Marcel\Documents\" />
    </BackupLocations>
</CustomConfigSection> 
```

现在，每当我保存配置文件时，都会出现以下异常：

> System.Configuration.ConfigurationErrorsException：加载配置文件时出错：访问路径 C:\Program Files (x86)\Backup Solutions\uqhuxi1j.tmp 被拒绝。(C:\Program Files (x86)\Backup Solutions\BS.exe.Config) ---> System.UnauthorizedAccessException

我使用的代码是：

```
Configuration config = ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None);
CustomConfigSection section = (CustomConfigSection)config.GetSection("CustomConfigSection");

section.BackupLocations.Add(element);

section.SectionInformation.ForceSave = true;
config.Save(ConfigurationSaveMode.Full); 
```

*这在以管理员身份登录时工作正常，并且仅在 PC 上配置了多个帐户时才会发生，因此这意味着这是 UAC/权限问题。*作为普通用户，我没有该文件夹的正确写入权限。

现在我的问题：

**用户设置如何保存到 AppData 并且自定义配置部分试图保存在 ApplicationFolder/exe.config 中？我怎样才能让我的自定义部分也保存到 AppData 配置文件中？**

无论权限如何，我都需要能够为每个用户保存我的数据。那么我可以使用自定义配置部分来实现这一点，还是需要不同的方法？最好我也想将我的自定义部分保存到 AppData 配置文件中。我不想在我的安装程序中使用技巧来调整对我的应用程序文件夹的权限以允许它写入。*最重要的是，我不想在启动我的程序时要求管理员权限！*

感谢您的回复，非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T00:26:33.973

用户范围的设置会保存到 AppData，因为用户有权在此处写入。用户无权写入 Program Files。使用用户范围的设置以将它们保存到 AppData。有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/a65txexh(v=vs.100).aspx 。](http://msdn.microsoft.com/en-us/library/a65txexh(v=vs.100).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T10:39:23.697

经过一夜好眠后，我自己似乎已经偶然发现了答案。

配置保存在 AppData 目录中，用于版本和用户特定数据。我所做的实际上是直接打开 exe.config 而没有对用户范围的设置做任何事情，更不用说为我的程序当前版本写入 AppData 配置文件了。当我意识到这一点时，我知道在谷歌上寻找什么。

我找到了这些文章：

[Windows 窗体 - 在 C# 中创建和保留自定义用户设置](http://www.codeproject.com/Articles/29130/Windows-Forms-Creating-and-Persisting-Custom-User)

[Windows 窗体 - 在 C# 中创建和保留自定义用户设置 - 第 2 部分](http://www.codeproject.com/Articles/29208/Windows-Forms-Creating-and-Persisting-Custom-User)

试验和下载该项目的源文件对我有很大帮助，并为我提供了我需要的东西。所以基本上我为我想做的事情实现了错误的功能。

感谢读者，感谢里奇先生在某种程度上将我带入了正确的方向。

# php - SSH2 如果登录失败 = 退出。PHP

> ID：12271525
> 
> 赞同：0
> 
> 时间：2012-09-04T21:21:23.597
> 
> 标签：php

如果登录 ssh2 失败，我将如何制作此代码、退出或退出。

```
 $query = mysql_query("SELECT * FROM ssh2");
            while($row = mysql_fetch_array($query)){
            $ip = $row['ip'];
            $user = $row['user'];
            $pass = $row['pass'];
            $ssh = ssh2_connect($ip, 22);
            ssh2_auth_password($ssh, $user, $pass); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T21:25:39.880

上的文档[`ssh2_auth_password()`](http://php.net/ssh2_auth_password)说：

> 成功时返回 TRUE，失败时返回 FALSE。

所以你可以检查它是否返回 false

```
if(ssh2_auth_password($ssh, $user, $pass) === false) {
    //do stuff if it can't login
} 
```

在执行此操作时，您可能还想在`ssh2_connect()`调用中添加一些错误检查，因为如果无法连接，它可能会返回非资源。

```
$ssh = ssh2_connect($ip, 22);
if($ssh === false) {
    //do stuff if it can't connect
} 
```

**编辑评论**

如果您想让它回退到另一次登录尝试，您可以通过几种方式来实现。如果您只拥有一组凭据，则可以简单地复制其`if`内部。

```
//try the first login
if(ssh2_auth_password($ssh, $user, $pass) === false) {
    //try the second set
    if(ssh2_auth_password($ssh, $user2, $pass2) === false) {
        //do stuff if it can't login
    }
} 
```

或者，如果您有大量凭据要尝试，您可以将它们存储在一个数组中并循环遍历它

```
$creds = array(
    array('user' => $user, 'pass' => $pass),
    array('user' => $user2, 'pass' => $pass2),
    //etc
);

$logged_in = false;
foreach($creds as $cred) {
    if(ssh2_auth_password($ssh, $cred['user'], $cred['pass'])) {
        $logged_in = true;
        break;
    }
}

if(!$logged_in) {
    //do stuff when you can't login
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T21:53:31.507

我更喜欢对这样的事情使用异常：

```
try {
    if (!$query = mysql_query("SELECT * FROM ssh2")) {
        throw new Exception("MySQL query failed.");
    }
    while($row = mysql_fetch_array($query)){
        $ip = $row['ip'];
        $user = $row['user'];
        $pass = $row['pass'];
        $ssh = ssh2_connect($ip, 22);
        if ($ssh === false) {
            throw new Exception("Connection to $ip:22 failed");
        }
        if (ssh2_auth_password($ssh, $user, $pass) === false) {
            throw new Exception("Password failed for user '".$user."'");
        }
    }
}
catch (Exception $e) {
    echo 'Caught exception: ',  $e->getMessage(), "\n";
} 
```

# boost - 针对 Boost 单元测试框架构建时的链接错误

> ID：12271528
> 
> 赞同：1
> 
> 时间：2012-09-04T21:21:26.923
> 
> 标签：boost, boost-unit-test-framework

我正在尝试通过构建一个独立的库来使用 Boost Unit Test Framework，如下所述：

[http://www.boost.org/doc/libs/1_35_0/libs/test/doc/components/utf/compilation.html](http://www.boost.org/doc/libs/1_35_0/libs/test/doc/components/utf/compilation.html)

所以我创建了一个包含上述文件的 VC 库项目并构建它，它成功了。然后我创建了一个测试项目并引用了我刚刚创建的库项目，但是当我尝试构建它时，我得到了以下链接错误：

```
1>Type.obj : error LNK2019: unresolved external symbol "bool __cdecl boost::test_tools::tt_detail::check_impl(class boost::test_tools::predicate_result const &,class boost::unit_test::lazy_ostream const &,class boost::unit_test::basic_cstring<char const >,unsigned __int64,enum boost::test_tools::tt_detail::tool_level,enum boost::test_tools::tt_detail::check_type,unsigned __int64,...)" (?check_impl@tt_detail@test_tools@boost@@YA_NAEBVpredicate_result@23@AEBVlazy_ostream@unit_test@3@V?$basic_cstring@$$CBD@63@_KW4tool_level@123@W4check_type@123@3ZZ) referenced in function "public: void __cdecl test1::test_method(void)" (?test_method@test1@@QEAAXXZ)
1>BoostUnitTestFramework.lib(framework.obj) : error LNK2019: unresolved external symbol "void __cdecl boost::debug::break_memory_alloc(long)" (?break_memory_alloc@debug@boost@@YAXJ@Z) referenced in function "void __cdecl boost::unit_test::framework::init(class boost::unit_test::test_suite * (__cdecl*)(int,char * * const),int,char * * const)" (?init@framework@unit_test@boost@@YAXP6APEAVtest_suite@23@HQEAPEAD@ZH0@Z)
1>BoostUnitTestFramework.lib(framework.obj) : error LNK2019: unresolved external symbol "void __cdecl boost::debug::detect_memory_leaks(bool)" (?detect_memory_leaks@debug@boost@@YAX_N@Z) referenced in function "void __cdecl boost::unit_test::framework::init(class boost::unit_test::test_suite * (__cdecl*)(int,char * * const),int,char * * const)" (?init@framework@unit_test@boost@@YAXP6APEAVtest_suite@23@HQEAPEAD@ZH0@Z)
1>BoostUnitTestFramework.lib(execution_monitor.obj) : error LNK2019: unresolved external symbol "bool __cdecl boost::debug::attach_debugger(bool)" (?attach_debugger@debug@boost@@YA_N_N@Z) referenced in function "public: int __cdecl boost::detail::system_signal_exception::operator()(unsigned int,struct _EXCEPTION_POINTERS *)" (??Rsystem_signal_exception@detail@boost@@QEAAHIPEAU_EXCEPTION_POINTERS@@@Z)
1>BoostUnitTestFramework.lib(execution_monitor.obj) : error LNK2019: unresolved external symbol "bool __cdecl boost::debug::under_debugger(void)" (?under_debugger@debug@boost@@YA_NXZ) referenced in function "public: int __cdecl boost::execution_monitor::execute(class boost::unit_test::callback0<int> const &)" (?execute@execution_monitor@boost@@QEAAHAEBV?$callback0@H@unit_test@2@@Z)
1>BoostUnitTestFramework.lib(unit_test_main.obj) : error LNK2019: unresolved external symbol "class boost::unit_test::test_suite * __cdecl init_unit_test_suite(int,char * * const)" (?init_unit_test_suite@@YAPEAVtest_suite@unit_test@boost@@HQEAPEAD@Z) referenced in function main
1>C:\Users\Rafid\Workspace\MyPhysics\Builds\VC10\Tests\Debug\Tests.exe : fatal error LNK1120: 6 unresolved externals 
```

它们似乎主要是由 Boost 调试库引起的，但我看不出我应该得到链接错误的原因，因为 Boost 调试库只需要作为头文件包含，而不是作为库链接！

有任何想法吗？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T21:36:23.240

好的，我弄清楚了问题所在。显然，Boost 网站中提到的文件列表缺少以下文件：

```
debug.cpp
test_main.cpp
test_tools.cpp 
```

一旦我将这些文件添加到我的项目中，测试项目就编译并成功运行！

更新：只是想提一下我实际上是针对 Boost 1.51 构建的，所以文档可能有点旧，因为我可以在页面中看到，他们将文件链接到 Boost 1.35！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-25T22:12:08.090

为了在 Windows 上编译 boots 1.57 的单元测试，
我使用[@Rafid](https://stackoverflow.com/users/196697/rafid)答案，
对我来说，它是将这些文件添加到项目中：

```
test_tools.cpp
unit_test_main.cpp
framework.cpp 
```

位于`BOOST_DIR/libs/test/src`

# ruby-on-rails - ActiveRecord - 非规范化案例研究

> ID：12271532
> 
> 赞同：6
> 
> 时间：2012-09-04T21:21:45.500
> 
> 标签：ruby-on-rails, activerecord, denormalization

**处理以下 8 个不同 SQL 问题的最佳方法是什么。**

我在下面放置了一个数据库模式，它在我的 Rails 模型中是如何表示的，以及我需要从数据库中取出数据的七个问题。有些问题我已经回答了，有些问题我不确定最好的解决方案。

**问题 #7 是一个曲线球，因为它可能会改变所有其他问题的答案。**

# 标准

1.  不需要 n+1 查询。多个查询是可以的，但是如果返回的每一行都需要一个额外的查询，那么它是不可扩展的。
2.  不需要后处理来过滤 SQL 可以自己执行的结果。例如，第 5 项的答案不应该是从数据存储中拉出所有学生，然后删除那些没有课程的学生。
3.  检索对象的计数不应触发另一个 SQL 查询。
4.  如果 SQL 允许我聚合数据，则不必通过非规范化添加数据库列
5.  MongoDB 或 CouchDB 等 NOSQL 解决方案是否更适合回答以下所有问题？

# 数据库模式

```
学生
--------
ID
姓名

培训班
-----
ID
姓名
年级

招生
----------
ID
学生卡
Course_ID

```

# 活动记录模型

```
 class Course < ActiveRecord::Base
  has_many :enrollments
  has_many :students, :through=>:enrollments
end
class Enrollment < ActiveRecord::Base
  belongs_to :student
  belongs_to :course
end
class Student < ActiveRecord::Base
  has_many :enrollments
  has_many :courses, :through => :enrollments
end 
```

# 问题

## 1) 检索所有 9 年级数学课程的学生

### SQL

```
 SELECT s.* FROM Students s
LEFT JOIN Enrollments e on e.student_id = s.id
LEFT JOIN Courses c on e.course_id = c.id
WHERE c.grade = 9 AND c.name = 'Math' 
```

### 解决方案

这个很简单。ActiveRecord 处理得很好

```
 c = Course.where(:grade=>9).where(:name=>'Math').first
c.students 
```

## 2) 检索 John 上的所有课程

### SQL

```
 SELECT c.* FROM Courses c
LEFT JOIN Enrollments e on c.id = e.course_id
LEFT JOIN Students s on e.student_id = s.id
WHERE s.name = 'John' 
```

### 解决方案

再次，简单。

```
 s = Student.where(:name=>'John').first
s.courses 
```

## 3) 检索所有 9 年级课程以及参加该课程的学生人数（但不检索学生）

### SQL

```
 SELECT c.*, count(e.student_id) FROM Courses C
LEFT JOIN Enrollments e on c.id = e.course_id
WHERE c.grade = 9 GROUP BY c.id 
```

### 解决方案

Counter Cache 在这里可以很好地工作。

```
类 AddCounters < ActiveRecord::Migration
  向上定义
    add_column :students, :courses_count, :integer, :default=>0
    add_column :courses, :students_count, :integer, :default=>0
    Student.reset_column_information
    Student.all.each 做 |s|
      Student.update_counters s.id, :courses_count => s.courses.length
    结尾
    Course.reset_column_information
    Course.all.each 做 |c|
      Course.update_counters c.id, :students_count => c.students.length
    结尾
  结尾

  向下定义
    remove_column：学生，：courses_count
    remove_column：课程，：students_count
  结尾
结尾

```

活动记录

```
Course.where(:grade=>9).each 做 |c|
  提出“#{c.name} - #{c.students.size}”
结尾

```

## 4) 检索所有参加至少三门 11 年级课程、多于一门 10 年级课程且没有 9 年级课程的学生

### 没有解决方案

不确定最佳解决方案。如果没有为每个学生的每个年级水平的课程数量保留计数器缓存，在 SQL 中执行此操作将非常混乱。我可以添加一个钩子来自己更新这些信息。我不想拉出所有学生和课程并在后期处理中计算它们。

### 缓慢的解决方案

以下解决方案会产生大量查询。可能无法预加载课程。（例如，学生来自协会的课程）

```
 students = some_course.students
matching_students = []
students.each do |s|
  courses_9 = 0
  courses_10 = 0
  courses_11 = 0
  s.courses.each do |c|
    courses_9  += 1 if c.grade == 9
    courses_10 += 1 if c.grade == 10
    courses_11 += 1 if c.grade == 11
  end
  if courses_11 <= 3 && courses_10 > 1 && courses_9 == 0
    matching_students << s
  end
end
return matching_students 
```

## 5) 检索所有参加多于一门数学课程查询的学生)

### SQL

```
 SELECT s.*, count(e.course_id) as num_Courses FROM Students s
INNER JOIN Enrollments e on s.id = e.student_id
INNER JOIN Courses c on e.course_id = c.id AND c.name = 'Math'
GROUP BY s.id HAVING num_Courses > 0 
```

或者

```
 SELECT DISTINCT s.* FROM Students s
INNER JOIN Enrollments e_math_1 on e_math_1.student_id = s.id
INNER JOIN Courses c_math_1 ON e_math_1.course_id = c_math_1.id AND c_math_1.name = 'Math'
INNER JOIN Enrollments e_math_2 on e_math_2.student_id = s.id
INNER JOIN Courses c_math_2 ON e_math_2.course_id = c_math_2.id AND c_math_2.name = 'Math'
WHERE c_math_1.id != c_math_2.id 
```

### 没有解决方案

不确定最佳解决方案。棘手的部分是 ActiveRecord（或 NoSQL）解决方案无法检索所有学生，然后查看他们的课程，因为这太慢了。

### 缓慢的解决方案

```
 students = SomeObject.students
multiple_math_course_students = []
students.each do |s|
  has_math_course = false
  add_student = false
  s.courses.each do |c|
    if c.name == 'Math'
      if has_math_course
        add_student = true
      else
        has_math_course = true
      end
    end
  end
  multiple_math_course_students << s if add_student
end 
```

## 6) 检索所有正在学习数学和科学课程的学生

### SQL

```
 SELECT s.* FROM Students s
INNER JOIN Enrollments e_math on e_math.student_id = s.id
INNER JOIN Courses c_math ON e_math.course_id = c_math.id
INNER JOIN Enrollments e_science on e_science.student_id = s.id
INNER JOIN Courses c_science on e_science.course_id = c_science.id WHERE c_math.name = 'Math' AND c_science.name = 'Science' 
```

### 没有解决方案

这涉及两次加入同一个表（或在 Rails 中，关联）。有没有办法用 ActiveRecord 的 AREL 包装器顺利地做到这一点？您可以为科学课和数学课建立一个单独的关联，允许您对每个课程进行单独的操作，但这在下面的 #7 的情况下不起作用。

### 缓慢的解决方案

```
 students = SomeObject.students
math_and_science_students = []
students.each do |s|
  has_math_course = false
  has_science_course = false
  s.courses.each do |c|
    has_math_course = true if c.name == 'Math'
    has_science_course = true if c.name == 'Science'
  end
  math_and_science_students << s if has_math_course && has_science_course
end 
```

## 7) 客户表示，每当系统显示学生时，在学生旁边显示一个数字，显示他们正在学习的最高年级课程。例如，如果 Suzie 正在学习 9 年级的科学课程和 10 年级的数学课程，则在 Suzie 旁边显示“10”。

### 解决方案

查询每个学生记录的数据库是不可接受的。显示 100 个学生的页面需要 100 个查询。此时，我想通过在学生表中放置一个带有“最高级别课程”的标志来对数据库进行非规范化。这是我最好的做法吗？从一开始就使用关系数据库以外的其他数据存储会更好吗？

**想象一下，客户要求将任意数据显示为徽章：最高年级、所修数学课程数量、如果同时学习数学、科学和历史，则获得金徽章等** 。这些案例中的每一个是否都需要非规范化数据库的？非规范化数据是否应该与规范化数据保存在同一个关系数据库中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T21:43:37.393

首先，我认为您的数据库架构很好。我不会根据这些用例去规范化，因为它们很常见。

其次，你要学会区分 Persistence、业务逻辑和报告。ActiveRecord 有利于基本的持久化和封装业务逻辑。它处理 CRUD 内容并让您将应用程序的大量逻辑放入模型中。但是，您谈论的许多逻辑听起来都像是报告，尤其是＃6。您将不得不接受，对于像这样的某种查询逻辑，原始 SQL 将是您最好的选择。我认为如果你在那里更舒服的话，你已经实现的缓存计数器可能会帮助你保持活跃的记录和模型，但很可能你将不得不像你对其中几个解决方案所做的那样使用普通的 sql。报告通常需要直接的 sql。

规范化的数据库对于良好的应用程序设计至关重要。对于 OLTP 事务和业务逻辑而言，它对于使您的代码干净非常重要。不要仅仅因为你必须在 sql 中做一些连接就去规范化。这就是sql擅长的。通过非规范化你要做的就是让你的一些报告逻辑更快更容易，但代价是让你的持久性和 OLTP 逻辑变得更慢和更难。

所以我会开始保留你的标准化数据库。如果您需要加入相关表，您通常可以使用 activerecord 的 include 方法来执行此操作，而无需使用常规 sql。要执行基于联接的计数之类的操作，您必须使用纯 sql。

最终，如果您的数据库变得非常大，包含大量数据，那么您的报告将会很慢，因为您必须进行所有连接。这可以。到那时，马上开始考虑制作一个非规范化的单独报告数据库，您可以从规范化数据库中每小时、每晚、每周等进行更新。然后移动您的报告逻辑以查询报告数据库，而无需进行联接。然而，没有必要以这种方式开始。您只是在不确定收益的情况下产生了额外的复杂性和费用。也许您的带有连接的报告 sql 将无限期地工作而无需使用索引进行非规范化。不要过早优化。

我认为 nosql 也不一定是答案。据我所知，NoSQL 适用于特定用例。您的应用程序的用例和架构似乎非常适合关系数据库。

总的来说，我认为原始 sql（不是 arel/activerecord）和您实现的计数器的组合很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-01T20:23:14.050

我现在遇到了同样的问题。根据我的研究，有几种方法可以绕过它。

首先，我相信任何应用程序都会遇到这些问题。基本思想是我们以标准化方式对数据进行建模，当有大量数据并且数据跨越多个表时，这种方式本质上会变得缓慢和繁琐。

我能想出的最佳方法如下：

1.  将问题建模为接近您正在处理的真实世界的事情
2.  根据需要标准化

这两个应该为应用程序提供很大的灵活性并提供许多方便的方法以及解决我试图回答的大部分问题

一旦我需要做一堆连接来获得我需要的东西并且我觉得我应该对表进行非规范化以轻松获得我需要的东西，我会考虑以下几点：

SQL 视图：这些是预定义的 sql 语句，例如连接，我可以将模型链接到这些语句。通常这比通过 ActiveRecord [http://hashrocket.com/blog/posts/sql-views-and-activerecord查询要快得多](http://hashrocket.com/blog/posts/sql-views-and-activerecord)

聚合表：创建一个或多个聚合表并使用delayed_job异步更新，例如resque。例如，这些聚合可以每天更新一次，模型可以直接查询它。请注意，这是某种非规范化表。

Couchbase (NOSQL) 我没用过这个，但它看起来很有趣。 [http://couchbaseonrails.com/understand](http://couchbaseonrails.com/understand)

# r - 根据子集比较两个字符

> ID：12271536
> 
> 赞同：2
> 
> 时间：2012-09-04T21:21:55.703
> 
> 标签：r, plyr

我有一个包含两列的简单数据框：

```
df <- data.frame(x = c(1,1,2,2,3), 
                 y = c(rep(1:2,2),1), 
                 target = c('a','a','a','b','a')) 
```

我想在 x 的每个级别（x 相同的数字）中比较目标列中的字符串（找出它们是否相等，即 TRUE 或 FALSE）。首先，我想比较第 1 行和第 2 行，然后比较第 3 行和第 4 行……我的问题是我遗漏了一些比较，例如，第 5 行只有一个案例而不是两个案例 - 所以结果应该是 FALSE。变量 y 表示 x 内的第一种和第二种情况。

我玩 ddply 做类似的事情：

```
ddply(df, .(x), summarise,
        ifelse(as.character(df[df$y == '1',]$target), 
               as.character(df[df$y == '2',]$target),0,1)) 
```

这是丑陋的......而且不起作用......

有什么见解可以实现这种比较吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T21:31:29.877

```
ddply(df, .(x), function(d) NROW(d) == 2 & d$target[1] == d$target[2]) 
```

这假设您希望仅当恰好有 2 行具有该“x”值时该值才为 TRUE。如果可能有 3 个或更多，并且如果所有`target`值都相同，并且您希望它为 TRUE，则可以执行以下操作：

```
ddply(df, .(x), function(d) NROW(d) > 1 & length(unique(d$target)) == 1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T21:37:11.000

这是一个基本的 R 解决方案，假设我正确地遵循了你想要的。`foo()`是一个比较每个子集中的两个值的函数，而`target`我们是每个子集中`split()`的数据。`df$x``l|sapply()` `foo()`

```
foo <- function(x) {
    with(x, {if(length(target) < 2) {
                 FALSE
             } else {
                 isTRUE(all.equal(target[1], target[2]))
             }})
}
lapply(split(df, df$x), foo)

sapply(split(df, df$x), foo) 
```

产生这个输出

```
> lapply(split(df, df$x), foo)
$`1`
[1] TRUE

$`2`
[1] FALSE

$`3`
[1] FALSE

> 
> sapply(split(df, df$x), foo)
    1     2     3 
 TRUE FALSE FALSE 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T22:42:16.647

```
 ave(as.character(df$target), df$x, 
     FUN=function(z) if ( length(z)=="2" & length(unique(z))==1){TRUE} else{ FALSE })
[1] "TRUE"  "TRUE"  "FALSE" "FALSE" "FALSE" 
```

或者...如果您只想要按组...的结果，请使用聚合：

```
>  aggregate(as.character(df$target), list(df$x), 
+      FUN=function(z) if ( length(z)=="2" & length(unique(z))==1){TRUE} else{ FALSE })
  Group.1     x
1       1  TRUE
2       2 FALSE
3       3 FALSE 
```

# javascript - JSON.stringify 不应该转义 Unicode 字符吗？

> ID：12271547
> 
> 赞同：14
> 
> 时间：2012-09-04T21:23:06.053
> 
> 标签：javascript, json, unicode

我有一个简单的 UTF-8 测试页面，其中包含多种不同语言字母的文本被字符串化为 JSON：

[http://jsfiddle.net/Mhgy5/](http://jsfiddle.net/Mhgy5/)

HTML：

```
<textarea id="txt">
検索 • Busca • Sök • 搜尋 • Tìm kiếm • Пошук • Cerca • Søk • Haku • Hledání • Keresés • 찾기 • Cari • Ara • جستجو • Căutare • بحث • Hľadať • Søg • Serĉu • Претрага • Paieška • Poišči • Cari • חיפוש • Търсене • Іздеу • Bilatu • Suk • Bilnga • Traži • खोजें
</textarea>
<button id="encode">Encode</button>
<pre id="out">
</pre> 
```

JavaScript：

```
​$("#encode").click(function () {
    $("#out").text(JSON.stringify({ txt: $("#txt").val() }));
}).click();
​ 
```

[虽然我希望根据JSON 规范](http://www.json.org/)将非 ASCII 字符转义为 \uXXXX ，但它们似乎没有受到影响。这是我从上述测试中得到的输出：

```
{"txt":"検索 • Busca • Sök • 搜索 • Tìm kiếm • Пошук • Cerca • Søk • Haku • Hledání • Keresés • 찾기 • Cari • Ara • جستجو • Căutare • بحث • Hľadať • Søg • Serĉu • Претраг • Paie • Poišči • Cari • חיפוש • Търсене • Іздеу • Bilatu • Suk • Bilnga • Traži • खोजें\n"}

```

我正在使用 Chrome，所以它应该是本机`JSON.stringify`实现。页面的编码是 UTF-8。非ASCII字符不应该被转义吗？

首先让我参加这个测试的是，我注意到`jQuery.ajax`当非 ASCII 字符出现在数据对象属性中时，它们似乎并没有转义它们。这些字符似乎以 UTF-8 传输。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-09-04T21:25:31.667

[JSON 规范](http://json.org/)不要求将 unicode 字符转换为转义序列。"除 " 或 \ 或控制字符之外的任何 UNICODE 字符。" 被定义为有效的 JSON 序列化字符串：

![json字符串格式](../Images/646db490e0d927f5673a00576312d99a.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-12-02T14:37:30.233

您的问题的简短回答是否定的；`JSON.stringify`不应该逃避你的字符串。

虽然，如果您使用编码保存 HTML 文件但不将其声明为*utf8文件，那么处理***utf8**字符串可能看起来很奇怪。`utf-8`

 *例如：

```
<!doctype html>
<html>
    <head>
        <title></title>
        <script>
            var data="árvíztűrő tükörfúrógép ÁRVÍZTŰRŐ TÜKÖRFÚRÓGÉP";
            alert(JSON.stringify(data));
        </script>
    </head>
</html> 
```

这会引起警觉**`"Ã¡rvÃ­ztÅ±rÅ‘ tÃ¼kÃ¶rfÃºrÃ³gÃ©p ÃRVÃZTÅ°RÅ TÃœKÃ–RFÃšRÃ“GÃ‰P"`**。

但是，如果您将以下行添加到标题中：

```
<meta charset="UTF-8"> 
```

然后，警报将是人们所期望的：**`"árvíztűrő tükörfúrógép ÁRVÍZTŰRŐ TÜKÖRFÚRÓGÉP"`**.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-04T21:26:11.210

不，JSON 的首选编码是 UTF-8，因此这些字符不需要转义。

如果您想更安全或以不同的编码（即纯 ASCII）显式发送 JSON，则允许您转义 unicode 字符，但这不符合建议。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-10-17T09:51:00.863

确实 JSON.stringify 不会转义 utf8：

```
JSON.stringify({a:"Привет!"})
{"a":"Привет!"} 
```

但是当我通过 Perl DBD::Mysql 存储该 JSON 然后将其检索回来时，我遇到了一个问题。我发现按照建议通过 \uXXXX 转义所有非 ascii 和不可见字符会更安全。这是如何

```
function jsonEscapeUTF(s) {return s.replace(/[^\x20-\x7F]/g, x => "\\u" + ("000"+x.codePointAt(0).toString(16)).slice(-4))}

jsonEscapeUTF(JSON.stringify({a:"Привет!"}))
"{"a":"\u041f\u0440\u0438\u0432\u0435\u0442!"}" 
```

希望它会有所帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-04T21:29:11.457

你的说法是不正确的。JSON 字符串由 unicode 代码点（'"' 和 '\' 除外）组成，仅此而已。整个 JSON 文档可以根据生产者的判断以 UTF-8、UTF-16 或 UTF-32 编码。*此外*，字符串可以包含转义序列，提供*另*一种命名代码点的形式，而不是按字面意思包含它们。

如果您仍然无法区分两者之间的区别，这里有一个示例，说明了在 JSON 中编写相同字符串的两种不同方式：

*   `"A"`

*   `"\u0041"`

两个版本都代表相同的字符串，由单个代码点 U+41 组成，即`A`.*

# debugging - malloc 与 new 运算符

> ID：12271548
> 
> 赞同：0
> 
> 时间：2012-09-04T21:23:15.643
> 
> 标签：debugging, memory, gdb, malloc

> **可能重复：**
> [new/delete 和 malloc/free 有什么区别？](https://stackoverflow.com/questions/240212/what-is-the-difference-between-new-delete-and-malloc-free)

这与“...... new 调用构造函数和 malloc 不......”的区别无关。简而言之，**操作系统的内存映射带有每个块的标志，说明它是否空闲**。'malloc' 和 'new' 是否仅引用此表，或者它们仅针对它们具有此类表（转换为 OS 表）？说“仅供他们使用”意味着“ **'malloc' 和 'new' 的每个单独的表**”。

在此先感谢抱歉英语不好。

# objective-c - 2个使用相同顶点数据的着色器

> ID：12271550
> 
> 赞同：1
> 
> 时间：2012-09-04T21:23:41.453
> 
> 标签：objective-c, ios, opengl-es, glsl

所以我在使用 2 个不同的着色器渲染时遇到问题。我目前正在渲染代表骰子的形状，我想要的是如果用户选择了骰子，它通过将骰子完全绘制为红色并稍微放大来绘制轮廓，然后在其上渲染适当的骰子。目前，某些骰子出于某种原因，将错误的骰子渲染为轮廓，而将正确的骰子渲染为正确的前景骰子。

我想知道他们是否没有以某种方式混淆他们的顶点数据。我不确定在openGL中是否允许这样做：

```
glGenBuffers(1, &_vertexBuffer);
glBindBuffer(GL_ARRAY_BUFFER, _vertexBuffer);
glBufferData(GL_ARRAY_BUFFER, numVertices*sizeof(GLfloat), vertices, GL_STATIC_DRAW);

glEnableVertexAttribArray(effect->vertCoord);        
glVertexAttribPointer(effect->vertCoord, 3, GL_FLOAT, GL_FALSE, 0, 0);

glEnableVertexAttribArray(effect->toon_vertCoord);        
glVertexAttribPointer(effect->toon_vertCoord, 3, GL_FLOAT, GL_FALSE, 0, 0); 
```

当我加载我的第一个着色器时，我试图将顶点数据绑定到 2 个不同的着色器：

```
vertCoord = glGetAttribLocation(TexAndLighting, "position"); 
```

另一个着色器有：

```
toon_vertCoord = glGetAttribLocation(Toon, "position"); 
```

如果我彼此独立地使用着色器，它们可以正常工作，但是当我尝试在另一个之上渲染两个着色器时，它们有时会混淆模型。这是我的绘图功能的外观：

```
- (void) draw {
[EAGLContext setCurrentContext:context];

glBindVertexArrayOES(_vertexArray); 

effect->modelViewMatrix = mvm;
effect->numberColour = GLKVector4Make(numbers[colorSelected].r, numbers[colorSelected].g, numbers[colorSelected].b, 1);
effect->faceColour = GLKVector4Make(faceColors[colorSelected].r, faceColors[colorSelected].g, faceColors[colorSelected].b, 1);

if(selected){
    [effect drawOutline]; //this function prepares the shader
    glDrawElements(GL_TRIANGLES, numIndices, GL_UNSIGNED_SHORT, 0);
}

[effect prepareToDraw]; //same with this one
glDrawElements(GL_TRIANGLES, numIndices, GL_UNSIGNED_SHORT, 0);
} 
```

这就是它的样子，你可以看到大多数轮廓都使用了错误的骰子，或者根本没有： ![骰子的图片](../Images/29a686c5967119de689109add88ac2ae.png)

完整代码的链接：http:
[//pastebin.com/yDKb3wrD](http://pastebin.com/yDKb3wrD) Dice.mm //渲染东西
[http://pastebin.com/eBK0pzrK](http://pastebin.com/eBK0pzrK) Effects.mm //着色器东西
[http://pastebin.com/5LtDAk8J](http://pastebin.com/5LtDAk8J) //我的着色器, 不应该与他们有任何关系

TL;DR：尝试使用 2 个使用相同顶点数据的不同着色器，但是在同时使用两者进行渲染时会使模型混淆，这就是我认为出错的地方，实际上很困难。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T21:37:30.523

你是对的，因为这是不允许的（或者说它不符合你的想法）：

```
glEnableVertexAttribArray(effect->vertCoord);        
glVertexAttribPointer(effect->vertCoord, 3, GL_FLOAT, GL_FALSE, 0, 0);

glEnableVertexAttribArray(effect->toon_vertCoord);        
glVertexAttribPointer(effect->toon_vertCoord, 3, GL_FLOAT, GL_FALSE, 0, 0); 
```

属性与着色器没有特别的联系。您不能告诉 OpenGL“属性*N*用于此着色器，而属性*M*用于其他着色器”。

属性只是绑定到索引，并且任何碰巧在该索引处有输入的着色器都会破坏最后绑定到该特定索引的数据。

因此，如果您有两个着色器，我们称它们为“toon”和“normal”，它们具有以下输入（这是假设的）：

```
normal
  input vertCoord (index = 0)
  input texCoord (index = 1)

toon
  input toon_vertCoord (index = 0)
  input toon_somethingElse (index = 1) 
```

然后当您运行此代码时：

```
glEnableVertexAttribArray(effect->vertCoord);        
glVertexAttribPointer(effect->vertCoord, 3, GL_FLOAT, GL_FALSE, 0, 0);

glEnableVertexAttribArray(effect->toon_vertCoord);        
glVertexAttribPointer(effect->toon_vertCoord, 3, GL_FLOAT, GL_FALSE, 0, 0);

draw_normal_object(); 
```

您`effect->vertCoord`不再绑定到任何东西，因为`toon_vertCoord`具有相同的索引，并且您已经覆盖了输入指针。所以在这里你的普通着色器将从 中采样`toon_vertCoord`，一切都会被搞砸。

您要做的是启用/指向“普通着色器”的所有属性，绘制普通对象，然后切换到卡通着色器，启用/指向所有卡通属性，然后绘制卡通对象。

# axapta - 在报表 AX 中将属性 RunOn 设置为服务器时，DialogField 丢失值

> ID：12271553
> 
> 赞同：1
> 
> 时间：2012-09-04T21:23:57.233
> 
> 标签：axapta

在 ReportRun AX 中将属性设置为“RunOn”到 Server 时，对话框中的所有 Dialogfields 都会丢失值。

请问有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T06:45:01.680

似乎您没有在`pack`and`unpack`方法中保存/取消保存所有对话框字段。这些方法用于将值从服务器传递到客户端（并返回）以在对话框中使用。

一个简单的解决方法可能是添加方法：

```
protected boolean canSwapBetweenCS()
{
    return false;
} 
```

这将使对话框使用较慢的客户端/服务器通信。

# jquery - Jquery“nth-child”问题

> ID：12271554
> 
> 赞同：1
> 
> 时间：2012-09-04T21:24:02.503
> 
> 标签：jquery

我有一个项目清单，总共十个，但是会有更多......

我有一个“排序”功能，允许用户按“价格”或“按字母顺序”查看项目。

这很好用，我遇到的问题是我用来在列表中获取第 5 个孩子的选择器行出错了。

这是代码行：

```
$("#list-category-results li:nth-child(5n)").css("margin-right", "0"); 
```

另外，这是我当前进度的[jsFiddle](http://jsfiddle.net/De8Ku/1483/)。

当您单击“价格”或“字母顺序”时，“margin-right：0”的位置不会停留在第 5 个元素上，我不知道为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T21:29:32.770

您需要重新执行此行：

```
$("#list-category-results li:nth-child(5n)").css("margin-right", "0"); 
```

每次你排序。

In 不会仅仅因为您重新排序孩子而自动发生，除非它在您的 CSS 规则中。使用 jQuery 添加 CSS 样式*直接*将这些样式添加到特定元素，如果这些元素在 DOM 树中移动，它们将*保留这些样式。*

因此，您还需要为已更改位置的项目删除那些 CSS 样式，例如：

```
$("#list-category-results li")
    .css('margin-right', '')      // clear all <li> margins
    .filter(':nth-child(5n)')
    .css('margin-right', '0px');  // set every 5th <li> margin 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T21:31:18.747

您可以绑定到`click`排序按钮的事件并删除`margin-right`all 的值`li`并重新应用到第五项，如下所示：

```
$(document).ready(function(){
    // Apply margin-right: 0 on DOM Ready //
    $("#list-category-results li:nth-child(5n)").css("margin-right", "0");    

    // Update margin-right on Sorting of Elements //
    $('.btnSort').bind('click', function(){
        $("#list-category-results li").css('margin-right', '');
        $("#list-category-results li:nth-child(5n)").css("margin-right", "0");
    });
}); 
```

[在这里更新了 JSFIddle](http://jsfiddle.net/De8Ku/1488/)

我希望这有帮助！

# jsf-2 - 对 JSF 生命周期感到困惑

> ID：12271556
> 
> 赞同：0
> 
> 时间：2012-09-04T21:24:07.930
> 
> 标签：jsf-2

我想显示一个呈现“组”实体列表的页面，所以我的页面（xhtml）中有这个

```
<f:event type="preRenderView" listener="#{groupController.loadGroups}" /> 
```

这是在页面加载时调用的，昨天它按预期返回了一个列表。该方法看起来像这样

```
public void loadGroups() {
    allGroups = groupDao.findAll();
} 
```

现在我添加了一个表单来保存一个新组（在同一页面上）。当我保存该表单时，它会调用此方法：

```
public String save() {
    groupDao.create(group);
    return "/admin/groups?faces-redirect=true";
} 
```

我已确认该组已保存在数据库中。但是，我期待“return”语句重新加载页面，就像第一次进入它一样，调用“preRenderView”方法等等。

当它返回到页面时，它确实调用了该方法，但是正在使用数据列表来显示返回的组集合以及何时调用

```
public Collection<Group> getAllGroups() {
    return allGroups;
} 
```

...“allGroups”变量已重置为空。

我已经有几个月没有接触过 JSF 了，我想我曾经明白这一切，但我显然不明白。谁能给我一个线索我做错了什么？

如果我找到答案（现在把我的书挖出来）我会发布更新。不过谢谢。

**更新**：为了澄清，我认为 loadGroups 方法会在 getAllGroups 方法之前执行，*因为**它*是一个 preRenderView 事件。但是它们似乎以错误的方式执行（首先调用 getAllGroups，在 loadGroups() 填充集合之前）。顺便说一下，它是一个 ViewScoped bean。

 ** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T22:21:00.817

我不确定为什么我的原始版本不起作用，但如果我去掉页面中的 preRenderView 语句，并在 loadGroups 方法上添加 @PostConstruct 注释，它就可以正常工作。我明白为什么 @PostConstruct 方法会起作用，但不明白为什么 preRenderView 不起作用。无论如何，如果我这样做，它的工作...*

# mysql - 如果 ID 匹配，MySQL 查询将行显示为列

> ID：12271558
> 
> 赞同：0
> 
> 时间：2012-09-04T21:24:24.550
> 
> 标签：mysql, excel, csv

我正在尝试为 CSV 导入处理一些数据，但遇到了一些问题。

我的带有示例数据的表：

```
node_id, comment

1,comment1
1,comment2
2,comment3
3,comment4
4,comment5
4,comment6
4,comment7 
```

我想做的是运行一个查询，将具有相同 node_id 的所有评论放在一行中：

```
1,comment1,comment2
2,comment3
3,comment4
4,comment5,comment6,comment7 
```

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T21:26:43.983

您可以使用[GROUP_CONCAT()](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)

```
SELECT node_id, GROUP_CONCAT(comment) FROM sample_data_table GROUP BY node_id; 
```

**注意：**此表结构实际上对数据进行了反规范化。这可能是一个糟糕的设计决策。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T21:30:48.887

使用 GROUP_CONCAT，查看[此](http://mahmudahsan.wordpress.com/2008/08/27/mysql-the-group_concat-function/)示例了解更多信息

# ruby-on-rails - Rails 中跨模型和嵌套模型/对象形式的验证

> ID：12271567
> 
> 赞同：2
> 
> 时间：2012-09-04T21:25:20.950
> 
> 标签：ruby-on-rails, validation, nested-attributes

有没有办法在嵌套模型表单的嵌套结构中跨模型进行验证？在我使用的嵌套层次结构中，子模型引用父模型中的属性来执行验证。由于验证是自下而上进行的（首先验证子模型），因此子模型没有对父模型的引用，因此验证失败。例如：

```
# encoding: utf-8
class Child < ActiveRecord::Base
  attr_accessible :child_attribute
  belongs_to :parent
  validate :to_some_parent_value

  def to_some_parent_value
    if child_attribute > parent.parent_attribute # raises NoMethodError here on ‘parent’
      errors[:child_attribute] << "Validation error."
    end
  end
end

class Parent < ActiveRecord::Base
  attr_accessible :parent_attribute
  has_one :child
  accepts_nested_attributes_for :child
end 
```

在控制台中：

```
> p=Parent.new( { "parent_attribute" => "1", "child_attributes" => { "child_attribute" => "2" }} )
> p.valid?
=> NoMethodError: undefined method `parent_attribute' for nil:NilClass 
```

有没有办法在子级引用父级中的值并仍然使用 Rails 嵌套模型表单功能的情况下进行这种验证？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T21:42:49.577

编辑：嗯，我读你的帖子有点太快了，我认为`where the child references a value in the parent`你的意思是外键`parent_id`......我的回答可能仍然有帮助，不确定。

我认为您正在寻找`inverse_of`选项。试试看：

```
class Parent < ActiveRecord::Base
    has_one :child, inverse_of :parent
end

class Child < ActiveRecord::Base
    belongs_to :parent, inverse_of :child
end 
```

从文档：

**验证父模型的存在**

> 如果要验证子记录是否与父记录相关联，可以使用 validates_presence_of 和 inverse_of，如下例所示：

```
class Member < ActiveRecord::Base
    has_many :posts, :inverse_of => :member
    accepts_nested_attributes_for :posts
end

class Post < ActiveRecord::Base
    belongs_to :member, :inverse_of => :posts
    validates_presence_of :member
end 
```

# asp.net - aspx 可见属性

> ID：12271571
> 
> 赞同：-1
> 
> 时间：2012-09-04T21:25:33.740
> 
> 标签：asp.net

我正在执行以下代码，但我仍然可以查看该 tr，它并没有变得不可见。我也尝试使用 as 属性....请帮助....

```
public bool ControlEnabled() {return false; }

<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" runat="server">

 <asp:MultiView ID="mv" runat="server">
 <asp:View ID="view1" runat="server">
 <table class="homediv">
<tr id="RAggMkttr" runat="server" Visible='<%# ControlEnabled() %>' >
  ---
public bool Test { get { return true; } }

<tr id="RAggMkttr" runat="server" Visible='<%# Test %>' > 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T21:30:57.307

由于它已经是服务器端控件，因此您应该能够简单地在后面的代码中设置 Visible 属性，如下所示：

```
RAgMkttr.Visible= ControlEnabled(); 
```

**更新**

为了使代码块在您的表中工作，您需要`runat="server"`从元素中删除该属性`tr`，而是执行以下操作：

```
 <%if (GetControlEnabled())
 {%>
   <tr id="RAggMkttr" >
     ....
   </tr>
 <%} %> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-05T15:37:23.870

`RAgMkttr.DataBind()`解决问题

# .net - 带有备用视图的电子邮件的 DKIM 签名

> ID：12271576
> 
> 赞同：0
> 
> 时间：2012-09-04T21:26:09.120
> 
> 标签：.net, dkim

使用asp.net；我必须发送带有文本替代视图的 Html 电子邮件并使用 DKIM 签名。

当电子邮件不包含备用视图时，我设法签署了电子邮件。在电子邮件具有备用视图的情况下，是否有人有解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T14:50:12.713

没有区别，我计算整个正文的哈希值 - 所有备用部分和标题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-06T10:24:16.853

`System.Net.Mail`不为*dkim*提供*AlternateView*和*附件*。使用带有 AlternateView 和附件的[Mimekit for Dkim。](http://www.mimekit.net/)它肯定会奏效。

它也是开源的，比`.Net.Mail`.

# c# - TVS RP-45 卷纸印刷

> ID：12271580
> 
> 赞同：10
> 
> 时间：2012-09-04T21:26:33.027
> 
> 标签：c#, sql, printing, crystal-reports

我有一张使用 Crystal Reports 制作的收据，页面宽 4 英寸，高度应该是动态的。我将高度设置为 2 英寸，因为我不知道如何使其具有动态性。打印机是[TVS RP-45 Justbill 打印机](http://www.tvs-e.in/pos/home-just-bill-rp45.asp)。

打印机在打印后正在弹出纸张。我该如何阻止这种情况发生？

除了 Crystal Reports 之外的任何解决方案都会有所帮助。该程序是用 C# .NET 2.0 Winforms 编写的，并连接到 SQL Server 2005 数据库。

```
报告标题部分
                      账单号：101
_____________________________________________
细节部分
项目代码 数量 金额
[ItemCode] [Qty] [Amount]
_____________________________________________
报告页脚部分
总计 [总计]
_____________________________________________

```

报告**页脚部分**使用大约 2 英寸，因此我将纸张的高度设置为 2 英寸。这并没有解决问题。如果有超过 1 个项目，纸张高度现在是应有的高度的 2 倍。

打印机使用卷纸，它应该根据所售商品的数量成比例地进纸。

请帮我解决这个问题而不浪费纸张。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T11:43:31.980

我将建议一些不同的东西。

在 Windows 上的记事本或其他操作系统上的纯文本编辑器中创建一个新文档。

此文档 (.txt) 应仅包含一行：TEST_LINE_1

1.  将该文档发送到您的打印机，然后在继续打印后查看是否相同。

2.  如果它在单行打印后继续进纸：检查设置如下（我知道你说你已经检查过）：

来自手册： [ [http://www.tvs-e.in/pos/pdf/RP-45%20User%20Manual.pdf](http://www.tvs-e.in/pos/pdf/RP-45%20User%20Manual.pdf) ] 要设置打印机的出厂设置，首先同时按下 FONT、换行和 PRINT 按钮然后使用 ON/OFF 开关打开打印机。

*   通常，您必须在将其关闭并重新打开时按住这些按钮 - 按住直到打印机打印其配置。

如果您可以将打印出来的内容逐字逐句发回，那就太好了。

1.  如果它在单行之后没有进纸：您的设计很可能对于纸张宽度的格式/内部限制而言太宽，并且对于您拥有的每一行，它都会环绕到一个新行上。

你能张贴一张正在打印的照片，里面有多少纸？

1.  如果可能的话，使用单行文本文件（如上）或使用您的自定义报告作业在不同的计算机或笔记本电脑上尝试打印机 - 输出是否相同？

2.  如果打印机安装为 USB 设备：删除驱动程序文件的所有痕迹并将其作为打印机完全卸载 - 重新安装新副本，看看会发生什么 - 一样吗？

当你遇到问题时，我很欣赏其中一些事情总是“看起来很明显”，但它确实有助于从最基本的事情重新开始。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-05-28T12:42:21.647

只需删除页眉和页脚，它会正常工作。

# apache-flex - 如何按值对 ArrayCollection 进行排序

> ID：12271581
> 
> 赞同：1
> 
> 时间：2012-09-04T21:26:35.853
> 
> 标签：apache-flex, sorting, flex4, arraycollection

我有一个 ArrayCollection 中的项目列表，我想按某个值（不按字母顺序）排序。可以这样排序吗？

以下是我想要排序的值：

已解决
关闭
打开

～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～ ～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～
**_**
_ ～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～

如果您的数组集合是 DataGrid 的一部分，那么您可以在 DataGrid 的 GridColumn 上设置 sortCompareFunction。请注意，此排序比较函数的语法不同，因为传入的是网格列而不是字段。

***与 Spark DataGrid 一起使用的***示例代码**** 

 ***```
 private var desiredItemOrder:Array = ["In Progress", "Open", "Resolved", "Closed"];

        private function sortCompareFunction(item:Object, anotherItem:Object, column:GridColumn = null):int
        {
            var itemIndex:Number = desiredItemOrder.indexOf(item.fields.status.name);
            var anotherItemIndex:Number = desiredItemOrder.indexOf(anotherItem.fields.status.name);

            if (itemIndex == -1 || anotherItemIndex == -1)
                throw new Error("Invalid value for criticality ");
            if (itemIndex == anotherItemIndex)
                return 0;
            if (itemIndex > anotherItemIndex)
                return 1;
            return -1;
        }

        <s:DataGrid dataProvider="{issuesCollection}">
            <s:columns>
                <s:ArrayList>
                    <s:GridColumn dataField="fields.status.name" headerText="Status" sortCompareFunction="sortCompareFunction"/>
                </s:ArrayList>
            </s:columns>
        </s:DataGrid> 
```

**DOCUMENATION**
[排序 compareFunction](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/collections/Sort.html#compareFunction)
[DataGridColumn sortCompareFunction](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/controls/dataGridClasses/DataGridColumn.html#sortCompareFunction)
[GridColumn sortCompareFunction](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/gridClasses/GridColumn.html#sortCompareFunction)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T21:32:05.283

这可能对你有一些帮助

> [在 Flex 中对 ArrayCollection 进行排序](https://stackoverflow.com/questions/1602385/sorting-an-arraycollection-in-flex)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-08T15:59:42.073

如果您只想对 3 个单词进行排序 - 在排序函数中进行此比较，例如：

```
private static var valuesOrder : Array = ["Resolved", "Closed", "Open"];
private function sortFunction(a:Object, b:Object, array:Array = null) : int{
    var indexA : int = valuesOrder.indexOf(a);
    var indexB : int = valuesOrder.indexOf(b);
    return indexA - indexB;//return positive if indexA > indexB
}
var sort : Sort = new Sort();
sort.compareFunction = sortFunction;
arrayCollection.sort = sort;
arrayCollection.refresh(); 
```

请注意，如果数组中不存在值`valuesOrder`- 索引将为 -1。随心所欲地处理这种情况。***

# delphi - Delphi 2007 使用 Windows 映像组件 (WIC)

> ID：12271583
> 
> 赞同：5
> 
> 时间：2012-09-04T21:26:41.080
> 
> 标签：delphi, com, delphi-2007, jpeg, bmp

我需要在 Delphi 2007 中阅读并将一些 1.7mb 左右的图片从 jpg 转换为 bmp。

一些图片在转换后被剪切、灰度或最差。

我进行了搜索，但无论如何我都没有找到在 delphi 2007 中添加 WIC 例程（如 TWicImage）的技巧。

我在某处读到它可以通过 COM 轻松添加，但我不知道如何或必须导入什么文件。

谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-10T20:12:22.447

以下是如何使用 WIC 将 JPEG 转换为位图的示例：

```
unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  StdCtrls, Dialogs, ComObj, ActiveX;

const
  WICBitmapCacheOnLoad = $2;
  WICDecodeMetadataCacheOnDemand = 0;

  SID_IPropertyBag2 = '{22F55882-280B-11d0-A8A9-00A0C90C2004}';
  SID_IWICComponentInfo = '{23BC3F0A-698B-4357-886B-F24D50671334}';
  SID_IWICBitmapSource = '{00000120-a8f2-4877-ba0a-fd2b6645fb94}';
  SID_IWICBitmap = '{00000121-a8f2-4877-ba0a-fd2b6645fb94}';
  SID_IWICBitmapLock = '{00000123-a8f2-4877-ba0a-fd2b6645fb94}';
  SID_IWICBitmapCodecInfo = '{E87A44C4-B76E-4c47-8B09-298EB12A2714}';
  SID_IWICBitmapEncoder = '{00000103-a8f2-4877-ba0a-fd2b6645fb94}';
  SID_IWICBitmapDecoder = '{9EDDE9E7-8DEE-47ea-99DF-E6FAF2ED44BF}';
  SID_IWICBitmapEncoderInfo = '{94C9B4EE-A09F-4f92-8A1E-4A9BCE7E76FB}';
  SID_IWICBitmapDecoderInfo = '{D8CD007F-D08F-4191-9BFC-236EA7F0E4B5}';
  SID_IWICBitmapFrameEncode = '{00000105-a8f2-4877-ba0a-fd2b6645fb94}';
  SID_IWICBitmapFrameDecode = '{3B16811B-6A43-4ec9-A813-3D930C13B940}';
  SID_IWICBitmapScaler = '{00000302-a8f2-4877-ba0a-fd2b6645fb94}';
  SID_IWICBitmapClipper = '{E4FBCF03-223D-4e81-9333-D635556DD1B5}';
  SID_IWICBitmapFlipRotator = '{5009834F-2D6A-41ce-9E1B-17C5AFF7A782}';
  SID_IWICPalette = '{00000040-a8f2-4877-ba0a-fd2b6645fb94}';
  SID_IWICColorContext = '{3C613A02-34B2-44ea-9A7C-45AEA9C6FD6D}';
  SID_IWICColorTransform = '{B66F034F-D0E2-40ab-B436-6DE39E321A94}';
  SID_IWICMetadataQueryReader = '{30989668-E1C9-4597-B395-458EEDB808DF}';
  SID_IWICMetadataQueryWriter = '{A721791A-0DEF-4d06-BD91-2118BF1DB10B}';
  SID_IWICFastMetadataEncoder = '{B84E2C09-78C9-4AC4-8BD3-524AE1663A2F}';
  SID_IWICStream = '{135FF860-22B7-4ddf-B0F6-218F4F299A43}';
  SID_IWICFormatConverter = '{00000301-a8f2-4877-ba0a-fd2b6645fb94}';
  SID_IWICImagingFactory = '{ec5ec8a9-c395-4314-9c77-54d7a935ff70}';
  CLSID_WICImagingFactory: TGUID = '{CACAF262-9370-4615-A13B-9F5539DA4C0A}';
  GUID_WICPixelFormat32bppBGRA: TGUID = '{6FDDC324-4E03-4BFE-B185-3D77768DC90F}';

type
  PWICColor = ^TWicColor;
  TWICColor = Cardinal;
  PWICRect = ^TWICRect;
  TWICRect = record
    X: Integer;
    Y: Integer;
    Width: Integer;
    Height: Integer;
  end;
  PIWICColorContext = ^IWICColorContext;
  PWICBitmapPattern = ^TWICBitmapPattern;
  TWICBitmapPattern = record
    Position: ULARGE_INTEGER;
    Length: ULONG;
    Pattern: PByte;
    Mask: PByte;
    EndOfStream: BOOL;
  end;
  PPropBag2 = ^TPropBag2;
  TPropBag2 = record
    dwType: DWORD;
    vt: TVarType;
    cfType: TClipFormat;
    dwHint: DWORD;
    pstrName: POleStr;
    clsid: TCLSID;
  end;
  TWICInProcPointer = ^Byte;
  TWICPixelFormatGUID = TGUID;
  TREFWICPixelFormatGUID = PGUID;
  TWICComponentType = type Integer;
  TWICDecodeOptions = type Integer;
  TWICColorContextType = type Integer;
  TWICBitmapDitherType = type Integer;
  TWICBitmapPaletteType = type Integer;
  TWICBitmapInterpolationMode = type Integer;
  TWICBitmapEncoderCacheOption = type Integer;
  TWICBitmapTransformOptions = type Integer;
  TWICBitmapCreateCacheOption = type Integer;
  TWICBitmapAlphaChannelOption = type Integer;

  IPropertyBag2 = interface;
  IWICPalette = interface;
  IWICColorContext = interface;
  IWICColorTransform = interface;
  IWICBitmap = interface;
  IWICBitmapLock = interface;
  IWICBitmapSource = interface;
  IWICBitmapCodecInfo = interface;
  IWICBitmapEncoder = interface;
  IWICBitmapDecoder = interface;
  IWICBitmapEncoderInfo = interface;
  IWICBitmapDecoderInfo = interface;
  IWICBitmapFrameEncode = interface;
  IWICBitmapFrameDecode = interface;
  IWICBitmapScaler = interface;
  IWICBitmapClipper = interface;
  IWICBitmapFlipRotator = interface;
  IWICMetadataQueryReader = interface;
  IWICMetadataQueryWriter = interface;
  IWICFastMetadataEncoder = interface;
  IWICStream = interface;
  IWICComponentInfo = interface;
  IWICFormatConverter = interface;
  IWICImagingFactory = interface;

  IPropertyBag2 = interface(IUnknown)
    [SID_IPropertyBag2]
    function Read(pPropBag: PPropBag2; pErrLog: IErrorLog; pvarValue: PVariant; phrError: PHResult): HRESULT; stdcall;
    function Write(cProperties: ULONG; pPropBag: PPropBag2; pvarValue: PVariant): HRESULT; stdcall;
    function CountProperties(var pcProperties: ULONG): HRESULT; stdcall;
    function GetPropertyInfo(iProperty, cProperties: ULONG; pPropBag: PPropBag2; var pcProperties: ULONG): HRESULT; stdcall;
    function LoadObject(pstrName:POleStr; dwHint: DWORD; pUnkObject: IUnknown; pErrLog: IErrorLog): HRESULT; stdcall;
  end;
  IWICComponentInfo = interface(IUnknown)
    [SID_IWICComponentInfo]
    function GetComponentType(var pType: TWICComponentType): HRESULT; stdcall;
    function GetCLSID(var pclsid: TGUID): HRESULT; stdcall;
    function GetSigningStatus(var pStatus: DWORD): HRESULT; stdcall;
    function GetAuthor(cchAuthor: UINT; wzAuthor: PWCHAR; var pcchActual: UINT): HRESULT; stdcall;
    function GetVendorGUID(var pguidVendor: TGUID): HRESULT; stdcall;
    function GetVersion(cchVersion: UINT; wzVersion: PWCHAR; var pcchActual: UINT): HRESULT; stdcall;
    function GetSpecVersion(cchSpecVersion: UINT; wzSpecVersion: PWCHAR; var pcchActual: UINT): HRESULT; stdcall;
    function GetFriendlyName(cchFriendlyName: UINT; wzFriendlyName: PWCHAR; var pcchActual: UINT): HRESULT; stdcall;
  end;
  IWICBitmapSource = interface(IUnknown)
    [SID_IWICBitmapSource]
    function GetSize(var puiWidth: UINT; var puiHeight: UINT): HRESULT; stdcall;
    function GetPixelFormat(var pPixelFormat: TWICPixelFormatGUID): HRESULT; stdcall;
    function GetResolution(var pDpiX: Double; var pDpiY: Double): HRESULT; stdcall;
    function CopyPalette(pIPalette: IWICPalette): HRESULT; stdcall;
    function CopyPixels(prc: PWICRect; cbStride: UINT; cbBufferSize: UINT; pbBuffer: PByte): HRESULT; stdcall;
  end;
  IWICBitmap = interface(IWICBitmapSource)
    [SID_IWICBitmap]
    function Lock(const prcLock: TWICRect; flags: DWORD; out ppILock: IWICBitmapLock): HRESULT; stdcall;
    function SetPalette(pIPalette: IWICPalette): HRESULT; stdcall;
    function SetResolution(dpiX: Double; dpiY: Double): HRESULT; stdcall;
  end;
  IWICBitmapLock = interface(IUnknown)
    [SID_IWICBitmapLock]
    function GetSize(var puiWidth: UINT; var puiHeight: UINT): HRESULT; stdcall;
    function GetStride(var pcbStride: UINT): HRESULT; stdcall;
    function GetDataPointer(var pcbBufferSize: UINT; var ppbData: TWICInProcPointer): HRESULT; stdcall;
    function GetPixelFormat(var pPixelFormat: TWICPixelFormatGUID): HRESULT; stdcall;
  end;
  IWICBitmapCodecInfo = interface(IWICComponentInfo)
    [SID_IWICBitmapCodecInfo]
    function GetContainerFormat(var pguidContainerFormat: TGUID): HRESULT; stdcall;
    function GetPixelFormats(cFormats: UINT; var guidPixelFormats: PGUID; var pcActual: UINT): HRESULT; stdcall;
    function GetColorManagementVersion(cchColorManagementVersion: UINT; wzColorManagementVersion: PWCHAR; var pcchActual: UINT): HRESULT; stdcall;
    function GetDeviceManufacturer(cchDeviceManufacturer: UINT; wzDeviceManufacturer: PWCHAR; var pcchActual: UINT): HRESULT; stdcall;
    function GetDeviceModels(cchDeviceModels: UINT; wzDeviceModels: PWCHAR; var pcchActual: UINT): HRESULT; stdcall;
    function GetMimeTypes(cchMimeTypes: UINT; wzMimeTypes: PWCHAR; var pcchActual: UINT): HRESULT; stdcall;
    function GetFileExtensions(cchFileExtensions: UINT; wzFileExtensions: PWCHAR; var pcchActual: UINT): HRESULT; stdcall;
    function DoesSupportAnimation(var pfSupportAnimation: BOOL): HRESULT; stdcall;
    function DoesSupportChromakey(var pfSupportChromakey: BOOL): HRESULT; stdcall;
    function DoesSupportLossless(var pfSupportLossless: BOOL): HRESULT; stdcall;
    function DoesSupportMultiframe(var pfSupportMultiframe: BOOL): HRESULT; stdcall;
    function MatchesMimeType(wzMimeType: LPCWSTR; var pfMatches: BOOL): HRESULT; stdcall;
  end;
  IWICBitmapEncoder = interface(IUnknown)
    [SID_IWICBitmapEncoder]
    function Initialize(pIStream: IStream; cacheOption: TWICBitmapEncoderCacheOption): HRESULT; stdcall;
    function GetContainerFormat(var pguidContainerFormat: TGUID): HRESULT; stdcall;
    function GetEncoderInfo(out ppIEncoderInfo: IWICBitmapEncoderInfo): HRESULT; stdcall;
    function SetColorContexts(cCount: UINT; ppIColorContext: PIWICColorContext): HRESULT; stdcall;
    function SetPalette(pIPalette: IWICPalette): HRESULT; stdcall;
    function SetThumbnail(pIThumbnail: IWICBitmapSource): HRESULT; stdcall;
    function SetPreview(pIPreview: IWICBitmapSource): HRESULT; stdcall;
    function CreateNewFrame(out ppIFrameEncode: IWICBitmapFrameEncode; var ppIEncoderOptions: IPropertyBag2): HRESULT; stdcall;
    function Commit: HRESULT; stdcall;
    function GetMetadataQueryWriter(out ppIMetadataQueryWriter: IWICMetadataQueryWriter): HRESULT; stdcall;
  end;
  IWICBitmapDecoder = interface(IUnknown)
    [SID_IWICBitmapDecoder]
    function QueryCapability(pIStream: IStream; var pdwCapability: DWORD): HRESULT; stdcall;
    function Initialize(pIStream: IStream; cacheOptions: TWICDecodeOptions): HRESULT; stdcall;
    function GetContainerFormat(var pguidContainerFormat: TGUID): HRESULT; stdcall;
    function GetDecoderInfo(out ppIDecoderInfo: IWICBitmapDecoderInfo): HRESULT; stdcall;
    function CopyPalette(pIPalette: IWICPalette): HRESULT; stdcall;
    function GetMetadataQueryReader(out ppIMetadataQueryReader: IWICMetadataQueryReader): HRESULT; stdcall;
    function GetPreview(out ppIBitmapSource: IWICBitmapSource): HRESULT; stdcall;
    function GetColorContexts(cCount: UINT; ppIColorContexts: PIWICColorContext; var pcActualCount : UINT): HRESULT; stdcall;
    function GetThumbnail(out ppIThumbnail: IWICBitmapSource): HRESULT; stdcall;
    function GetFrameCount(var pCount: UINT): HRESULT; stdcall;
    function GetFrame(index: UINT; out ppIBitmapFrame: IWICBitmapFrameDecode): HRESULT; stdcall;
  end;
  IWICBitmapEncoderInfo = interface(IWICBitmapCodecInfo)
    [SID_IWICBitmapEncoderInfo]
    function CreateInstance(out ppIBitmapEncoder: IWICBitmapEncoder): HRESULT; stdcall;
  end;
  IWICBitmapDecoderInfo = interface(IWICBitmapCodecInfo)
    [SID_IWICBitmapDecoderInfo]
    function GetPatterns(cbSizePatterns: UINT; pPatterns: PWICBitmapPattern; var pcPatterns: UINT; var pcbPatternsActual: UINT): HRESULT; stdcall;
    function MatchesPattern(pIStream: IStream; var pfMatches: BOOL): HRESULT; stdcall;
    function CreateInstance(out ppIBitmapDecoder: IWICBitmapDecoder): HRESULT; stdcall;
  end;
  IWICBitmapFrameEncode = interface(IUnknown)
    [SID_IWICBitmapFrameEncode]
    function Initialize(pIEncoderOptions: IPropertyBag2): HRESULT; stdcall;
    function SetSize(uiWidth: UINT; uiHeight: UINT): HRESULT; stdcall;
    function SetResolution(dpiX: Double; dpiY: Double): HRESULT; stdcall;
    function SetPixelFormat(var pPixelFormat: TWICPixelFormatGUID): HRESULT; stdcall;
    function SetColorContexts(cCount: UINT; ppIColorContext: PIWICColorContext): HRESULT; stdcall;
    function SetPalette(pIPalette: IWICPalette): HRESULT; stdcall;
    function SetThumbnail(pIThumbnail: IWICBitmapSource): HRESULT; stdcall;
    function WritePixels(lineCount: UINT; cbStride: UINT; cbBufferSize: UINT; pbPixels: PByte): HRESULT; stdcall;
    function WriteSource(pIBitmapSource: IWICBitmapSource; prc: PWICRect): HRESULT; stdcall;
    function Commit: HRESULT; stdcall;
    function GetMetadataQueryWriter(out ppIMetadataQueryWriter: IWICMetadataQueryWriter): HRESULT; stdcall;
  end;
  IWICBitmapFrameDecode = interface(IWICBitmapSource)
    [SID_IWICBitmapFrameDecode]
    function GetMetadataQueryReader(out ppIMetadataQueryReader: IWICMetadataQueryReader): HRESULT; stdcall;
    function GetColorContexts(cCount: UINT; ppIColorContexts: PIWICColorContext; var pcActualCount : UINT): HRESULT; stdcall;
    function GetThumbnail(out ppIThumbnail: IWICBitmapSource): HRESULT; stdcall;
  end;
  IWICBitmapScaler = interface(IWICBitmapSource)
    [SID_IWICBitmapScaler]
    function Initialize(pISource: IWICBitmapSource; uiWidth: UINT; uiHeight: UINT; mode: TWICBitmapInterpolationMode): HRESULT; stdcall;
  end;
  IWICBitmapClipper = interface(IWICBitmapSource)
    [SID_IWICBitmapClipper]
    function Initialize(pISource: IWICBitmapSource; var prc: TWICRect): HRESULT; stdcall;
  end;
  IWICBitmapFlipRotator = interface(IWICBitmapSource)
    [SID_IWICBitmapFlipRotator]
    function Initialize(pISource: IWICBitmapSource; options: TWICBitmapTransformOptions): HRESULT; stdcall;
  end;
  IWICPalette = interface(IUnknown)
    [SID_IWICPalette]
    function InitializePredefined(ePaletteType: TWICBitmapPaletteType; fAddTransparentColor: BOOL): HRESULT; stdcall;
    function InitializeCustom(pColors: PWICColor; cCount: UINT): HRESULT; stdcall;
    function InitializeFromBitmap(pISurface: IWICBitmapSource; cCount: UINT; fAddTransparentColor: BOOL): HRESULT; stdcall;
    function InitializeFromPalette(pIPalette: IWICPalette): HRESULT; stdcall;
    function GetType(var pePaletteType: TWICBitmapPaletteType): HRESULT; stdcall;
    function GetColorCount(var pcCount: UINT): HRESULT; stdcall;
    function GetColors(cCount: UINT; pColors: PWICColor; var pcActualColors: UINT): HRESULT; stdcall;
    function IsBlackWhite(var pfIsBlackWhite: BOOL): HRESULT; stdcall;
    function IsGrayscale(var pfIsGrayscale: BOOL): HRESULT; stdcall;
    function HasAlpha(var pfHasAlpha: BOOL): HRESULT; stdcall;
  end;
  IWICColorContext = interface(IUnknown)
    [SID_IWICColorContext]
    function InitializeFromFilename(wzFilename: LPCWSTR): HRESULT; stdcall;
    function InitializeFromMemory(const pbBuffer: PByte; cbBufferSize: UINT): HRESULT; stdcall;
    function InitializeFromExifColorSpace(value: UINT): HRESULT; stdcall;
    function GetType(var pType: TWICColorContextType): HRESULT; stdcall;
    function GetProfileBytes(cbBuffer: UINT; pbBuffer: PByte; var pcbActual: UINT): HRESULT; stdcall;
    function GetExifColorSpace(var pValue: UINT): HRESULT; stdcall;
  end;
  IWICColorTransform = interface(IWICBitmapSource)
    [SID_IWICColorTransform]
    function Initialize(pIBitmapSource: IWICBitmapSource; pIContextSource: IWICColorContext; pIContextDest: IWICColorContext; pixelFmtDest: TREFWICPixelFormatGUID): HRESULT; stdcall;
  end;
  IWICMetadataQueryReader = interface(IUnknown)
    [SID_IWICMetadataQueryReader]
    function GetContainerFormat(var pguidContainerFormat: TGUID): HRESULT; stdcall;
    function GetLocation(cchMaxLength: UINT; wzNamespace: PWCHAR; var pcchActualLength: UINT): HRESULT; stdcall;
    function GetMetadataByName(wzName: LPCWSTR; var pvarValue: PROPVARIANT): HRESULT; stdcall;
    function GetEnumerator(out ppIEnumString: IEnumString): HRESULT; stdcall;
  end;
  IWICMetadataQueryWriter = interface(IWICMetadataQueryReader)
    [SID_IWICMetadataQueryWriter]
    function SetMetadataByName(wzName: LPCWSTR; const pvarValue: TPropVariant): HRESULT; stdcall;
    function RemoveMetadataByName(wzName: LPCWSTR): HRESULT; stdcall;
  end;
  IWICFastMetadataEncoder = interface(IUnknown)
    [SID_IWICFastMetadataEncoder]
    function Commit: HRESULT; stdcall;
    function GetMetadataQueryWriter(out ppIMetadataQueryWriter: IWICMetadataQueryWriter): HRESULT; stdcall;
  end;
  IWICStream = interface(IStream)
    [SID_IWICStream]
    function InitializeFromIStream(pIStream: IStream): HRESULT; stdcall;
    function InitializeFromFilename(wzFileName: LPCWSTR; dwDesiredAccess: DWORD): HRESULT; stdcall;
    function InitializeFromMemory(pbBuffer: TWICInProcPointer; cbBufferSize: DWORD): HRESULT; stdcall;
    function InitializeFromIStreamRegion(pIStream: IStream; ulOffset: ULARGE_INTEGER; ulMaxSize: ULARGE_INTEGER): HRESULT; stdcall;
  end;
  IWICFormatConverter = interface(IWICBitmapSource)
    [SID_IWICFormatConverter]
    function Initialize(pISource: IWICBitmapSource; const dstFormat: TWICPixelFormatGUID; dither: TWICBitmapDitherType; const pIPalette: IWICPalette; alphaThresholdPercent: Double; paletteTranslate: TWICBitmapPaletteType): HRESULT; stdcall;
    function CanConvert(srcPixelFormat: TREFWICPixelFormatGUID; dstPixelFormat: TREFWICPixelFormatGUID; var pfCanConvert: BOOL): HRESULT; stdcall;
  end;
  IWICImagingFactory = interface(IUnknown)
    [SID_IWICImagingFactory]
    function CreateDecoderFromFilename(wzFilename: LPCWSTR; const pguidVendor: TGUID; dwDesiredAccess: DWORD; metadataOptions: TWICDecodeOptions; out ppIDecoder: IWICBitmapDecoder): HRESULT; stdcall;
    function CreateDecoderFromStream(pIStream: IStream; const pguidVendor: TGUID; metadataOptions: TWICDecodeOptions; out ppIDecoder: IWICBitmapDecoder): HRESULT; stdcall;
    function CreateDecoderFromFileHandle(hFile: ULONG_PTR; const pguidVendor: TGUID; metadataOptions: TWICDecodeOptions; out ppIDecoder: IWICBitmapDecoder): HRESULT; stdcall;
    function CreateComponentInfo(const clsidComponent: TGUID; out ppIInfo: IWICComponentInfo): HRESULT; stdcall;
    function CreateDecoder(const guidContainerFormat: TGUID; const pguidVendor: TGUID; out ppIDecoder: IWICBitmapDecoder): HRESULT; stdcall;
    function CreateEncoder(const guidContainerFormat: TGUID; const pguidVendor: TGUID; out ppIEncoder: IWICBitmapEncoder): HRESULT; stdcall;
    function CreatePalette(out ppIPalette: IWICPalette): HRESULT; stdcall;
    function CreateFormatConverter(out ppIFormatConverter: IWICFormatConverter): HRESULT; stdcall;
    function CreateBitmapScaler(out ppIBitmapScaler: IWICBitmapScaler): HRESULT; stdcall;
    function CreateBitmapClipper(out ppIBitmapClipper: IWICBitmapClipper): HRESULT; stdcall;
    function CreateBitmapFlipRotator(out ppIBitmapFlipRotator: IWICBitmapFlipRotator): HRESULT; stdcall;
    function CreateStream(out ppIWICStream: IWICStream): HRESULT; stdcall;
    function CreateColorContext(out ppIWICColorContext: IWICColorContext): HRESULT; stdcall;
    function CreateColorTransformer(out ppIWICColorTransform: IWICColorTransform): HRESULT; stdcall;
    function CreateBitmap(uiWidth: UINT; uiHeight: UINT; pixelFormat: TREFWICPixelFormatGUID; option: TWICBitmapCreateCacheOption; out ppIBitmap: IWICBitmap): HRESULT; stdcall;
    function CreateBitmapFromSource(pIBitmapSource: IWICBitmapSource; option: TWICBitmapCreateCacheOption; out ppIBitmap: IWICBitmap): HRESULT; stdcall;
    function CreateBitmapFromSourceRect(pIBitmapSource: IWICBitmapSource; x: UINT; y: UINT; width: UINT; height: UINT; out ppIBitmap: IWICBitmap): HRESULT; stdcall;
    function CreateBitmapFromMemory(uiWidth: UINT; uiHeight: UINT; const pixelFormat: TWICPixelFormatGUID; cbStride: UINT; cbBufferSize: UINT; pbBuffer: PByte; out ppIBitmap: IWICBitmap): HRESULT; stdcall;
    function CreateBitmapFromHBITMAP(hBitmap: HBITMAP; hPalette: HPALETTE; options: TWICBitmapAlphaChannelOption; out ppIBitmap: IWICBitmap): HRESULT; stdcall;
    function CreateBitmapFromHICON(hIcon: HICON; out ppIBitmap: IWICBitmap): HRESULT; stdcall;
    function CreateComponentEnumerator(componentTypes: DWORD; options: DWORD; out ppIEnumUnknown: IEnumUnknown): HRESULT; stdcall;
    function CreateFastMetadataEncoderFromDecoder(pIDecoder: IWICBitmapDecoder; out ppIFastEncoder: IWICFastMetadataEncoder): HRESULT; stdcall;
    function CreateFastMetadataEncoderFromFrameDecode(pIFrameDecoder: IWICBitmapFrameDecode; out ppIFastEncoder: IWICFastMetadataEncoder): HRESULT; stdcall;
    function CreateQueryWriter(const guidMetadataFormat: TGUID; const pguidVendor: TGUID; out ppIQueryWriter: IWICMetadataQueryWriter): HRESULT; stdcall;
    function CreateQueryWriterFromReader(pIQueryReader: IWICMetadataQueryReader; const pguidVendor: TGUID; out ppIQueryWriter: IWICMetadataQueryWriter): HRESULT; stdcall;
  end;

  function WICConvertBitmapSource(const dstFormat: TWICPixelFormatGUID; pISrc: IWICBitmapSource; out ppIDst: IWICBitmapSource): HRESULT; stdcall;
    external 'windowscodecs.dll' name 'WICConvertBitmapSource';

type
  TForm1 = class(TForm)
    Button1: TButton;
    procedure Button1Click(Sender: TObject);
  private
    FImagingFactory: IWICImagingFactory;
    procedure JpegToBitmap(const ASource, ATarget: string);
  public
    { Public declarations }
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

procedure TForm1.JpegToBitmap(const ASource, ATarget: string);
var
  FileStream: TFileStream;
  StreamAdapter: TStreamAdapter;
  BitmapInfo: TBitmapInfo;
  BitmapBits: array of Byte;
  BitmapWidth: Cardinal;
  BitmapHeight: Cardinal;
  BitmapOutput: TBitmap;
  BitmapObject: IWICBitmap;
  BitmapSource: IWICBitmapSource;
  BitmapDecoder: IWICBitmapDecoder;
  BitmapFrame: IWICBitmapFrameDecode;
begin
  if not Assigned(FImagingFactory) then
    CoCreateInstance(CLSID_WICImagingFactory, nil, CLSCTX_INPROC_SERVER or
      CLSCTX_LOCAL_SERVER, IUnknown, FImagingFactory);

  FileStream := TFileStream.Create(ASource, fmOpenRead or fmShareDenyWrite);
  try
    FileStream.Position := 0;
    StreamAdapter := TStreamAdapter.Create(FileStream);

    OleCheck(FImagingFactory.CreateDecoderFromStream(StreamAdapter, GUID_NULL,
      WICDecodeMetadataCacheOnDemand, BitmapDecoder));
    OleCheck(BitmapDecoder.GetFrame(0, BitmapFrame));
    OleCheck(FImagingFactory.CreateBitmapFromSource(BitmapFrame,
      WICBitmapCacheOnLoad, BitmapObject));
    OleCheck(BitmapObject.GetSize(BitmapWidth, BitmapHeight));
    SetLength(BitmapBits, BitmapWidth * BitmapHeight * 4);
    OleCheck(WICConvertBitmapSource(GUID_WICPixelFormat32bppBGRA, BitmapObject,
      BitmapSource));
    OleCheck(BitmapSource.CopyPixels(nil, BitmapWidth * 4, Length(BitmapBits),
      @BitmapBits[0]));

    FillChar(BitmapInfo, SizeOf(BitmapInfo), 0);
    BitmapInfo.bmiHeader.biSize := SizeOf(BitmapInfo);
    BitmapInfo.bmiHeader.biWidth := BitmapWidth;
    BitmapInfo.bmiHeader.biHeight := -BitmapHeight;
    BitmapInfo.bmiHeader.biPlanes := 1;
    BitmapInfo.bmiHeader.biBitCount := 32;

    BitmapOutput := TBitmap.Create;
    try
      BitmapOutput.PixelFormat := pf32bit;
      BitmapOutput.SetSize(BitmapWidth, BitmapHeight);
      SetDIBits(0, BitmapOutput.Handle, 0, BitmapHeight, @BitmapBits[0],
        BitmapInfo, DIB_RGB_COLORS);
      BitmapOutput.AlphaFormat := afDefined;
      BitmapOutput.SaveToFile(ATarget);
    finally
      BitmapOutput.Free;
    end;
  finally
    FileStream.Free;
  end;
end;

procedure TForm1.Button1Click(Sender: TObject);
begin
  JpegToBitmap('d:\SourceImage.jpg', 'd:\TargetImage.bmp');
end;

end. 
```

# vim - 当不支持 colorcolumn 时，如何在 vi 中设置视觉边距？

> ID：12271586
> 
> 赞同：1
> 
> 时间：2012-09-04T21:27:15.403
> 
> 标签：vim, margin

我正在使用 vim 7.0 并且不支持 colorcolumn。

我正在寻找一个可视的垂直彩色边距来管理长线。是否有任何可用的选项来实现它？我有一个 mac，colorcolumn 效果很好。

我找到了一些类似的，但这不是我想要的。添加到 .vimrc 的以下行实现了类似的效果，但它没有给我一个视觉上的彩色边距。它基本上指出了任何大于某个字符范围的内容。

```
highlight OverLength ctermbg=red ctermfg=white guibg=#592929
match OverLength /\%81v.\+/ 
```

理想情况下，这可以通过像这样的更高版本来实现

```
set colorcolumn=79 
```

此屏幕截图显示了我正在寻找的内容。

![在此处输入图像描述](../Images/8411fed2c91bb3810dc44e4aa867ffc4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T07:36:12.433

使用`:highlight`您包含的技巧和与 romainl 链接的技巧，您可以突出显示比预期更长的字符，但这不会让您获得连续的线条（较短的线条会中断），只能`'colorcolumn'`实现这一点。

我能想到的唯一其他笨拙的解决方法是将窗口宽度设置为所需的宽度，因此当窗口开始水平滚动时，您会注意到线条过长。

Vim 7.0 是从 2006 年开始的；你错过了更多；我真的希望你能升级，这才是真正的解决方案。

# sql-server - 面向切面的 SQL Server

> ID：12271588
> 
> 赞同：4
> 
> 时间：2012-09-04T21:27:31.270
> 
> 标签：sql-server, aop

是否有任何库（开源或其他库）可以安装到可以强制执行 AOP 标准的 SQL Server 实例（2008 或更高版本）中？我真的很想避免在我们的开发人员中使用模板强制执行横切关注点。AOP 似乎是最好的选择，如果它可用的话。

如果它不存在，我会尝试自己推出。

编辑：

一些示例可能是子类化 Table 以制作特定类型的表，例如 mixin 特性。我在一个有很多审计要求的数据仓库环境中，所以我们经常创建双时态表。有一个会很棒

```
CREATE BITEMPORAL TABLE 
```

将添加事务和有效时间并针对这些表修改 CRUD 语句的语句。（是的，我知道视图和触发器在某种程度上可以做到这一点。）更难完成的事情是具有特定日志记录或事务特征的存储过程，例如

```
CREATE PROC FOO /* VERBOSE, ATOMIC, SERIALIZABLE */ 
```

并使用适当的 T-SQL 自动包装主体来执行这些操作。是的，可以添加存储过程来获取这些参数并生成 SQL 并编译这些工件。但缺点是没有强制执行——开发人员可以绕过该过程并直接使用 CREATE PROC——并且 syscomments 中的内容是生成的代码，而不是 AOP 注释版本，这会破坏抽象。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T13:04:30.497

也许您有兴趣了解 AO4SQL——一种将 AO 概念引入 SQL 的编程语言。从概念上讲，该工具适用于任何 SQL 服务器。

您可以下载我在 RAM-SE 2011 上发表的论文*“AO4SQL: Towards an Aspect-Oriented Extension for SQL” ：* [http ://www-users.cs.york.ac.uk/~manuel/Events/RAM- SE11/RAMSE11papers.zip](http://www-users.cs.york.ac.uk/~manuel/Events/RAM-SE11/RAMSE11papers.zip)

请记住，AO4SQL 是一个原型工具，但如果您想加入一个开源项目......请与我联系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T02:25:18.820

有趣的。我从来没有想过将 AOP 技术应用于 SQL Server。

使用 SQL Server 2008，我相信您能够调用 .NET 代码，因此您可以使用 PostSharp 或 Castle DynamicProxy 这样的标准 AOP 工具。

# jquery - 如何在不使用 JQuery 中的 .css( ) 方法的情况下动态更改 CSS 属性？

> ID：12271594
> 
> 赞同：3
> 
> 时间：2012-09-04T21:28:10.570
> 
> 标签：jquery, css

我的 HTML 代码中有一个 div。我想将它的背景颜色更改为红色（例如红色，但它可以是另一种颜色），但我不想在 Jquery 中使用 .css() 方法，因为 .css() 方法在我的 HTML 代码：

```
<div id="my_div" style="background-color: red"> Elements inside my div </div> 
```

**我不想在我的 HTML 代码中使用 style 属性**，但是我能做些什么来使用它来动态更改 css 呢？

**更新：**我不能使用类，因为颜色并不总是红色，它可以是蓝色、黄色、紫色或十六进制颜色。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T21:29:15.453

您可以使用 CSS 类：

```
.red {
  background-color: red;
}

$("#my_div").addClass("red"); 
```

如果您有多个颜色，则可以创建多个类，但这在某种程度上违背了使用类的泛化目的，正如评论中提到的@pst，您可能会更好地使用它`css()`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T21:35:37.380

分配一个类，就像 João Silva 建议的那样，是首选的方法，但分配类“红色”几乎与通过样式属性设置颜色一样糟糕。您的文档和 javascript 中仍然有标记 ('color=red')。

而是分配一个相关名称，例如，显示该元素的状态。

```
$("div.payment").addClass("overdue"); 
```

然后，您只需告诉该元素应该显示为“过期”，并且由 CSS 定义来定义“过期”的外观。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T21:30:49.090

您可以设置 class="" 属性并在样式表中定义背景颜色

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T22:42:38.150

我认为除了 CSS 或 class 之外，没有任何其他方法可以为您的元素添加样式。

我更喜欢添加类名，因为它会使代码更简洁。我相信你事先知道颜色是什么，无论是十六进制的。你可以为你要使用的所有颜色创建单独的类名，然后添加类到元素..它将使您的代码定义明确..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-08-01T12:48:23.627

如果您真的想弄乱 dom 风格的狗屎，您可以使用以下内容。

```
function changeCSS(selector, values) {
	Object.values(document.styleSheets).forEach(s => {
		try {
			if ('cssRules' in s) {
				Object.values(s.cssRules).forEach(c => {
					if (c.selectorText === selector) {
						Object.assign(c.style, values);
					}
				});
			}
		} catch { }
	});
}

const colors = ['red', 'blue', 'yellow', 'black', 'pink', 'white'];
let pos = 0;

function setColor() {
	changeCSS('.test-class', { color: colors[pos], 'background-color': colors[5 - pos] });
	pos = (pos + 1) % 6;
}
```

```
.test-class {
  color: blue;
  font-size: 33px;
}
```

```
<span class="test-class" onclick="setColor()">Click me please</span>
```

# asp.net - 从具有相同名称的应用配置中获取键值列表

> ID：12271596
> 
> 赞同：2
> 
> 时间：2012-09-04T21:28:14.933
> 
> 标签：asp.net, c#-4.0, appsettings

我在 app.config 文件中有以下内容：

```
<appSettings>
<add key="Name" value="Office"/>
... 

<add key="Name" value="HotSpot"/>

...

<add key="Name" value="Home"/>
</appSettings> 
```

我试过

```
ConfigurationManager.AppSettings["Name"] 
```

但它只给了我一个价值？如何获取所有值的列表？我正在使用 c# 3.5。是否有 lambda 表达式或我可以用来获得它的东西？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-04T21:36:26.037

每个值只能使用一个键，因此这种方法行不通。

我可以想到两种替代方法：

1.  使用带有分隔符的单个键，并使用 . 检索`ConfigurationManager.AppSettings["Name"].Split(new [] { "," });`。

    `<add key="Name" value="Office,Hotspot,Home" />`

2.  使用[自定义部分](http://msdn.microsoft.com/en-us/library/2tw134k3%28v=vs.100%29.aspx)创建可以包含字符串数组的部分。

# php - PHP 求和函数

> ID：12271598
> 
> 赞同：3
> 
> 时间：2012-09-04T21:28:21.083
> 
> 标签：php, mysql

我有一个如下表：

```
id    q_id         value  
------------------------
1     2            5 
2     2            NULL 
3     2            5 
4     2            NULL 
5     4            2 
6     4            NULL 
7     4            2 
8     4            NULL 
```

我想要的是获得（例如）所有价值的总和`where q_id = 2`

```
 $sq = mysql_query("SELECT SUM(value) AS sum FROM  table WHERE q_id = 2)or die(mysql_error());
   while($row = mysql_fetch_array($sq)){
    $sum = $row['sum'];
     }
  echo $sum."<br>"; 
```

但我越来越

```
5
5 
```

但我想要的是价值的总和，而不是期望 10。

谢谢你的帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T23:21:08.863

如果您无论如何都要遍历结果集，为什么不直接使用

`SELECT value FROM table WHERE q_id=2`

然后使用while循环总结这些值？就像是：

`while($row = mysql_fetch_array($sq)) {     $sum += $row['value']; } echo $sum."<br>";`

编辑：另外，正如 Jason McCreary 上面所说，您应该研究另一种查询数据库的方法。我建议在 php.net 中搜索“PDO”，它非常易于使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-12-05T15:11:44.337

我们可以直接在查询中求和

```
SELECT 5+6 AS addition 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T21:33:47.710

试一试...您正在显示`value`，您的代码中缺少引号。

```
 $sq = mysql_query("SELECT SUM(value) AS sum FROM  `table` WHERE `q_id` = '2'")or die(mysql_error());

   while($row = mysql_fetch_assoc($sq))
   {
     $sum = $row["sum"];
   }

   echo $sum . "<br>"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-17T13:22:19.267

```
 $sq="SELECT  value FROM table WHERE q_id='".$am."'"; 
 $result=mysqli_query($link,$sq); 
while($row=mysqli_fetch_assoc($result)) { 
 $sum += $row['value']; 
     } 
 echo "<p>Sum:&nbsp;".$sum."</p><br>";
 //$am ='2'; 
 //$link  -- connection to the data base 
```

请放在`$am ='2';`select 语句之前，并确保您已使用连接到数据库`$link`

您将根据以下值获得总和 `q_id`

我已经测试了代码并且工作正常。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-04T21:32:18.337

您需要在查询中添加 GROUP BY。将以下内容添加到末尾

```
GROUP BY q_id 
```

# django - 根据 ForeignKey 对象从模型中获取对象

> ID：12271605
> 
> 赞同：2
> 
> 时间：2012-09-04T21:29:16.323
> 
> 标签：django, django-models, django-views

我从我的模型中获取对象时遇到了一些问题。我有这样的事情：

```
 # Model
 class Subscription(models.Model):
    identifier = models.CharField(max_length=10)
    user = models.ForeignKey(User)

 class Subscriber(models.Model):
    name = models.CharField(max_length=5) 
```

现在我有订阅者对象实例 my_user，我想获得相关订阅。所以我正在尝试类似的东西：

```
 sub = Subscription.objects.get(user=my_user) 
```

但在那之后我得到了例外。我也试过：

```
 sub = Subscription.objects.get(user.id=my_user.id) 
```

结果仍然是相同的（异常）。

您有任何建议或文档链接，我如何从订阅集合中获取此对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T22:35:40.480

至少根据您上面提供的模型，我不确定为什么应该存在关系。

订阅者无论如何都与订阅无关，特别是模型的主 ID 可能不应该相关（user.id=my_user.id），除非您像这样明确地设计它。

此外，这：

```
sub = Subscription.objects.get(user=my_user) 
```

仅当存在 django 知道的某种关系时才有效。

在我看来，你应该这样做：

```
 class Subscription(models.Model):
    subscriber= models.ForeignKey('Subscriber')
    identifier = models.CharField(max_length=10)

 class Subscriber(models.Model):
    user = models.ForeignKey(User)
    name = models.CharField(max_length=5) #PS, if you ever save anything longer than 5 char's this will raise an exception. 
```

这将允许您进行如下查询：

```
my_user = Subscriber.obejects.get(something=someotherthing)
sub = Subscription.objects.get(subscriber=my_user) 
```

# intersystems-cache - CacheSQL计算总时间

> ID：12271609
> 
> 赞同：0
> 
> 时间：2012-09-04T21:29:57.230
> 
> 标签：intersystems-cache, intersystems

我希望从类似于此论坛的列中计算总时间：

[https://stackoverflow.com/questions/3054943/calculate-sum-time-with-mysql](https://stackoverflow.com/questions/3054943/calculate-sum-time-with-mysql)

这是我的代码不起作用：

```
SEC_TO_TIME(SUM(TIME_TO_SEC(CASE WHEN (SUBSTR(Total_Time,1,2) - 
SUBSTR(ActivityTime,1,2)) < 0 
THEN '0' || DATEDIFF(hh,Total_Time,ActivityTime)-1 || ':' || DATEDIFF(mi,Total_Time,ActivityTime)
WHEN (SUBSTR(Total_Time,1,2) - SUBSTR(ActivityTime,1,2)) >= 0
THEN '0' || DATEDIFF(hh,Total_Time,ActivityTime) || ':' ||
DATEDIFF(mi,Total_Time,ActivityTime)
END))) AS TotalVariance, 
```

任何帮助都会很棒！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-03T16:25:32.543

我不确定这是否对您或某人有帮助。ObjectScript 中有Calculated/SqlComputed 属性。基本上，您可以定义如下属性：

```
Property TotalTime As %Integer [ Calculated, SqlComputeCode =
        {s {TotalTime}=##class(SomeClass).SomeClassMethod({Id})}, SqlComputed ] 
```

现在您只需要编写 SomeClassMethod。它可以继续任何 ObjectScript 代码，包括 %Open，只是不要让它循环。如果您只需要其他一些字段来制作它，您可以这样：

```
Property TotalTime As %Integer [ Calculated, SqlComputeCode =
        {s {TotalTime}=##class(Some).SomeCM({PropA}, {PropB})}, SqlComputed ] 
```

在那里，您将获取属性作为类方法的输入，而不是获取 ID 并调用 ..%Open(Id)。

无论哪种方式，您甚至可以将生成的计算属性用于索引。

# c# - 使用 ASP.NET C# 上传到 YouTube - 避免出现“Google 登录”屏幕

> ID：12271612
> 
> 赞同：4
> 
> 时间：2012-09-04T21:30:16.510
> 
> 标签：c#, asp.net, video, upload, youtube-api

我正在创建一个将视频上传到 YouTube 频道的 ASP.NET C# 应用程序。*我已经（尽我所能）通读了位于

[YouTube API 文档](https://developers.google.com/youtube/2.0/reference)

我已经能够使用提供的示例代码成功实现两个将视频上传到 YouTube 频道的示例。

例如，使用直接方法（仅附上重要代码）：

```
<!-- eja: import the google libraries -->
 <%@ Import Namespace="Google.GData.Client" %>
 <%@ Import Namespace="Google.GData.Extensions" %>
<%@ Import Namespace="Google.GData.YouTube" %>
<%@ Import Namespace="System.Net" %>

<!-- some more code -->
 <%
    // specify where to go to once authenticated
    Uri targetUri = new Uri(Request.Url, "VideoManager.aspx");

    // hide the link to authenticate for now.
    GotoAuthSubLink.Visible = false;
    // GotoAuthSubLink.Visible = true;

    // look for a session var storing the auth token. if it's not empty
    if (Session["token"] != null)
    {
        // go to the VideoManager link
        Response.Redirect(targetUri.ToString());
    }
    else if (Request.QueryString["token"] != null)
    {
        // if we have the auth key in the URL, grab it from there instead
        String token = Request.QueryString["token"];
        // set the session equal to AuthSubUtil's calling the exchangeForSessionToken method
        // returns the token and convert it to a string 
        Session["token"] = AuthSubUtil.exchangeForSessionToken(token, null).ToString();
        Response.Redirect(targetUri.ToString(), true);
    }
    else 
    {
        //no auth token, display the link and create the token by loading the google
        // auth page

        String authLink = AuthSubUtil.getRequestUrl(Request.Url.ToString(), "http://gdata.youtube.com", false, true);
        GotoAuthSubLink.Text = "Login to your Google Account";
        GotoAuthSubLink.Visible = true;
        GotoAuthSubLink.NavigateUrl = AuthSubUtil.getRequestUrl(Request.Url.ToString(),"http://gdata.youtube.com",false,true);

    }

 <asp:HyperLink ID="GotoAuthSubLink" runat="server"/> 
```

那是第一页……它加载了谷歌身份验证屏幕。（见附件图片的链接，很安全，我刚刚在stackOverflow上设置了一个新帐户，还不能上传图片）。

![谷歌身份验证屏幕的 Twitpic 图像](../Images/ae20c25f058d96e6693ba7d50c771b9a.png)

然后它会导致一个带有上传机制的页面......上传工作我并不担心，但这里是代码片段仅供参考。

```
 // create an instance ot the YouTubeService class. passing the application name and my DEV KEY
        YouTubeService service = new YouTubeService(authFactory.ApplicationName, **API_KEY**);

        // retrieve the current session token as a string if any
        authFactory.Token = HttpContext.Current.Session["token"] as string;
        // incorporate the information into our service
        service.RequestFactory = authFactory;

        try
        {
            // a YouTubeEntry object is single entity within a videoFeed object. It generally contains info
            // about the video. when uploading, we will assign the values that we received to the feed.

            YouTubeEntry entry = new YouTubeEntry();

            // aggregate all the initial descriptor information
            entry.Media = new Google.GData.YouTube.MediaGroup();
            entry.Media.Description = new MediaDescription(this.Description.Text);
            entry.Media.Title = new MediaTitle(this.Title.Text);
            entry.Media.Keywords = new MediaKeywords(this.Keyword.Text);

            // process  entry.Media.Categories to assign the category
            MediaCategory category = new MediaCategory(this.Category.SelectedValue);
            category.Attributes["scheme"] = YouTubeService.DefaultCategory;
            entry.Media.Categories.Add(category);

            // prepare the token used for uploading
            FormUploadToken token = service.FormUpload(entry);
            HttpContext.Current.Session["form_upload_url"] = token.Url;
            HttpContext.Current.Session["form_upload_token"] = token.Token;

            // construct the URL
            string page = "http://" + Request.ServerVariables["SERVER_NAME"];

            if (Request.ServerVariables["SERVER_PORT"] != "80")
            {
                page += ":" + Request.ServerVariables["SERVER_PORT"];
            }
            page += Request.ServerVariables["URL"];

            HttpContext.Current.Session["form_upload_redirect"] = page;
            Response.Redirect("UploadVideo.aspx"); 
```

UploadVideo.aspx 页面是实际的上传表单，它可以正常工作，所以我并不担心。

替代方法不是推荐的方法，因为它本质上是同步的，但它确实避免了登录屏幕，因为它允许我们传递凭据以进行身份​​验证（它作为 Web 应用程序工作）......再次附在下面的主要代码。

```
<%
    GAuthSubRequestFactory authFactory = new GAuthSubRequestFactory(ServiceNames.YouTube, "TesterApp");
     // Response.Write("serviceNames.youtube=" + ServiceNames.YouTube + "<br />");
    YouTubeRequestSettings s = new YouTubeRequestSettings(authFactory.ApplicationName, **your API KEY**,**Your email account as a username**,**your password**);

YouTubeRequest request = new YouTubeRequest(s);
Video newVideo = new Video();
newVideo.Title = "test at 4:40";
newVideo.Tags.Add(new MediaCategory("Games", YouTubeNameTable.CategorySchema));
newVideo.Keywords = "cars, funny";
newVideo.Description = "My description";
newVideo.YouTubeEntry.Private = false;
// newVideo.Tags.Add(new MediaCategory("mydevtag, anotherdevtag", YouTubeNameTable.DeveloperTagSchema));

// newVideo.YouTubeEntry.Location = new GeoRssWhere(37, -122);
// alternatively, you could just specify a descriptive string
newVideo.YouTubeEntry.setYouTubeExtension("location", "Somewhere,Someplace");

newVideo.YouTubeEntry.MediaSource = new MediaFileSource("C:\\IMG_1672.MOV",
  "video/quicktime");
Video createdVideo = request.Upload(newVideo);
Response.Write("This will print out once the file is uploaded...indicates that the code is <i>synchronous</i>. The cursor spins around until done. go get a coffee then check the YouTube Channel");

 %> 
```

所以基本上我要问的问题是 - 有没有一种方法可以将视频上传到 ASP.NET C# 代码中的 YouTube 频道 a) 用于 Web 应用程序 b) 我可以通过代码将凭据传递给 c) 绕过上面看到的 Google 身份验证屏幕和 d) 不使用 OAuth 和 openID 以及证书等？

该应用程序仅适用于短期活动（仅限 11 月），我很高兴使用已弃用的 authSubUtil 和 dev 密钥，无需担心 oAuth 2.x 或开放 ID（因为 authsubutil 无论如何都会在 2015 年弃用）。

任何帮助表示赞赏。

谢谢

爱德华

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T13:27:10.167

您最好使用 ClientLogin 身份验证，您可以在其中存储用户帐户的用户名和密码，然后使用 DirectUpload。

直接上传：[https ://developers.google.com/youtube/2.0/developers_guide_dotnet#Direct_Upload](https://developers.google.com/youtube/2.0/developers_guide_dotnet#Direct_Upload)

客户端登录：[https ://developers.google.com/youtube/2.0/developers_guide_protocol_clientlogin#ClientLogin_Authentication](https://developers.google.com/youtube/2.0/developers_guide_protocol_clientlogin#ClientLogin_Authentication)

注意客户端登录已被弃用，他们希望您使用 OAuth，但是如果您快速执行此操作，您应该没问题！

# git - git checkout -t 显示修改过的文件

> ID：12271613
> 
> 赞同：0
> 
> 时间：2012-09-04T21:30:20.003
> 
> 标签：git

```
$ git checkout -t origin/integrated
$ git checkout master
error: Your local changes to the following files would be overwritten by checkout:
src/me/unroll/scanner/moduletestset/apple.eml 
```

这可能是什么原因造成的？请注意，这是紧接在`git clone.`

似乎与 CRLF 问题有关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T23:25:49.817

你应该尝试`core.autocrlf`设置为false。

另一件事是你可以做

```
git checkout integrated 
```

# c# - Lucene.Net - IndexWriter.SetMergedSegmentWarmer

> ID：12271614
> 
> 赞同：-1
> 
> 时间：2012-09-04T21:30:45.453
> 
> 标签：c#, lucene.net

任何人都有如何在 Lucene.Net中使用[IndexWriter.SetMergedSegmentWarmer的示例？](http://incubator.apache.org/lucene.net/docs/2.9.4/html/c1d8e448-96a8-3e7c-2c82-929808df161f.htm)

当我尝试类似...

```
IndexWriter.IndexReaderWarmer warmer = new IndexWriter.IndexReaderWarmer();
indexWriter.SetMergedSegmentWarmer(warmer); 
```

我明白了

> 无法创建抽象类或接口“Lucene.Net.Index.IndexWriter.IndexReaderWarmer”的实例

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T00:03:15.893

好吧，你应该自己写。`IndexWriter.IndexReaderWarmer`是抽象类，所以它不提供预热实现。此类的目的是定义它们之间的契约`IndexReader`，`IndexReaderWarmer`以便它们可以适当地进行通信。

编写自己的实现并非易事。你应该决定你将如何温暖读者。几个想法：

*   对新阅读器执行最近执行的查询；
*   执行静态查询；
*   仅执行`FieldCache`预加载。

# java - 我应该如何以与放置它们的方式相反的顺序存储我希望访问的对象

> ID：12271618
> 
> 赞同：2
> 
> 时间：2012-09-04T21:30:51.743
> 
> 标签：java, maze

我在这里遵循本指南：http: [//www.mazeworks.com/mazegen/mazetut/index.htm](http://www.mazeworks.com/mazegen/mazetut/index.htm)

或者更具体地

> ```
> create a CellStack (LIFO) to hold a list of cell locations 
> set TotalCells = number of cells in grid 
> choose a cell at random and call it CurrentCell 
> set VisitedCells = 1 
> 
> while VisitedCells < TotalCells 
> 
> find all neighbors of CurrentCell with all walls intact  
> if one or more found 
>     choose one at random 
>     knock down the wall between it and CurrentCell 
>     push CurrentCell location on the CellStack 
>     make the new cell CurrentCell 
>     add 1 to VisitedCells else 
>     pop the most recent cell entry off the CellStack 
>     make it CurrentCell endIf 
> 
> endWhile 
> ```

我用java写这个，我的问题是。

我应该如何存储我访问过的单元格，以便我可以从放置它们时的相反顺序访问它们。

像这样？

```
List<Location> visitedCells = new ArrayList<Location>();

Then do I grab with visitedCells.get(visitedCells.size()-1)? 
```

位置存储 x、y 和 z。不是我想问你的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T22:02:05.407

LIFO 结构最好在 Java 中使用[`Deque`](http://docs.oracle.com/javase/6/docs/api/java/util/Deque.html)对象而不是`Stack`. 该类`Stack`扩展`Vector`并仅为向后兼容而保留。

要使用`Deque`，最好的办法是使用`LinkedList`，它实现了`Deque`接口。

```
Deque<Location> locationStack = new LinkedList<Location>(); 
```

或`ArrayDeque`：

```
Deque<Location> locationStack = new ArrayDeque<Location>(); 
```

然后使用`push`and`pop`方法来推送和弹出`Location`对象。

该类`Stack`有一堆或多或少无用的同步开销，只会导致您的代码在进入和退出同步代码时变慢。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T21:36:24.053

您可以为此目的使用[堆栈：](http://docs.oracle.com/javase/7/docs/api/java/util/Stack.html)

```
Stack<Location> visitedCells = new Stack<Location>();
visitedCells.push(myLocation1);
visitedCells.push(myLocation2);

// Get last one in but DONT remove
Location location2 = visitedCells.peek(); 

// Get last one in and remove
location2 = visitedCells.pop(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T21:32:45.710

以下代码按您添加的顺序存储值。

```
List<Location> visitedCells = new ArrayList<Location>(); 
```

然后你可以打电话

```
Collections.reverse(visitedCells); 
```

给你反向排序列表。

（或者）

您可以使用[ArrayDeque](http://docs.oracle.com/javase/6/docs/api/java/util/Stack.html)

# soundcloud - Soundcloud API：检索不在集合中的曲目

> ID：12271619
> 
> 赞同：0
> 
> 时间：2012-09-04T21:30:54.980
> 
> 标签：soundcloud

我正在寻找一种方法来检索不属于任何曲目集的曲目。这个想法是我会通过点击'/users/{id}/tracks'来检索单独的曲目，然后我也会通过点击'/users/{id}/playlists'来检索集合（以及属于集合的曲目）

到目前为止，我只能提出一个解决方案，例如： 1\. 检索每个用户的曲目集 2\. 检索每个用户的所有曲目并删除 1 返回的曲目。

请咨询是否存在更优雅的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T22:23:38.103

抱歉，没有更简单的方法可以做到这一点。

# ios - 具有自定义分页行为的 UITableView

> ID：12271621
> 
> 赞同：5
> 
> 时间：2012-09-04T21:31:03.813
> 
> 标签：ios, uitableview, uiscrollview

我正在尝试在 UITableView 中为自定义大小的页面实现分页。我想要实现的是让活动单元格的顶部与 tableView 的顶部对齐，同时仍然在 tableView 的底部显示下一个单元格的顶部（以使用户滚动并查看更多单元格） .

我的细胞都等高。

如果我设置`paging=YES`这会导致轻微的偏移量，当我浏览页面时会增加。这是因为我的 tableView 比单个单元格略高，并且单元格高度/页面大小未对齐。

我在启用分页的情况下尝试了不同的方法。我尝试将 tableView 的大小设置为单元格的高度，然后关闭剪辑和遮罩，以便用户仍然可以看到下一个单元格。这不起作用，因为下一个单元格仅在单元格滚动到 tableView 的边界框之前的最后一毫秒添加到底层滚动视图。

然后我开始实现不同的 scrollView 委托方法来模拟分页行为 - 我似乎无法正确处理。

除其他外，我尝试过这样的事情：

```
- (void) scrollViewWillEndDragging:(UIScrollView *)scrollView withVelocity:(CGPoint)velocity targetContentOffset:(inout CGPoint *)targetContentOffset
{
    float cellHeight = [myCell rowHeight];
    int index = floorf(scrollView.contentOffset.y / cellHeight);

    *targetContentOffset = CGPointMake(targetContentOffset->x, targetContentOffset->y = (index * cellHeight));
} 
```

虽然它做了正确的事情，但它的行为与启用分页的 scrollView/tableView 完全不同。

我在这里找到了一些试图实现相同目标的人的帖子，但答案与我自己尝试的任何事情一样受到同样的“非本地快照感觉”的影响。

感谢您提供的任何帮助。

iOS >= 5.0

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-04T22:08:32.200

实施`scrollViewWillEndDragging:withVelocity:targetContentOffset:`以返回最接近的单元格的顶部坐标`targetContentOffset`，而不是最接近您的起始偏移量。jjv360 提供的解决方案可以很好地做到这一点，但您可能需要根据单元的平均高度对其进行一些调整（jjv360 的解决方案在真正的大单元上可能过于活泼）。

我想补充一点，您可以通过更改其属性来使`UITableView`' 减速更快以表现得更像分页（只需在 init/viewDidLoad/wherever 中执行一次）。`UIScrollView``decelerationRate`

```
self.tableView.decelerationRate = UIScrollViewDecelerationRateFast; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T21:46:21.700

如果您关闭分页，您可以使用`UIScrollView`委托功能：

```
-(void)scrollViewWillEndDragging:(UIScrollView*)scrollView withVelocity:(CGPoint)velocity targetContentOffset:(inout CGPoint*)targetContentOffset {

    // Get index path for target row
    NSIndexPath* indexPath = [self.tableView indexPathForRowAtPoint:(*targetContentOffset)];

    // Set new target
    (*targetContentOffset) = [self.tableView rectForRowAtIndexPath:indexPath].origin;

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-21T06:44:46.290

我用这段代码解决了这个问题：

```
- (void) scrollViewWillBeginDragging:(UIScrollView *)scrollView {

    CGFloat pageWidth = self.collectionView.frame.size.width + 10 /* Optional Photo app like gap between images */;

    _currentPage = floor((self.collectionView.contentOffset.x - pageWidth / 2) / pageWidth) + 1;

    NSLog(@"Dragging - You are now on page %i", _currentPage);
}

-(void) scrollViewWillEndDragging:(UIScrollView*)scrollView withVelocity:(CGPoint)velocity targetContentOffset:(inout CGPoint*)targetContentOffset {

    CGFloat pageWidth = self.collectionView.frame.size.width + 10;

    int newPage = _currentPage;

    if (velocity.x == 0) // slow dragging not lifting finger
    {
        newPage = floor((targetContentOffset->x - pageWidth / 2) / pageWidth) + 1;
    }
    else
    {
        newPage = velocity.x > 0 ? _currentPage + 1 : _currentPage - 1;

        if (newPage < 0)
            newPage = 0;
        if (newPage > self.collectionView.contentSize.width / pageWidth)
            newPage = ceil(self.collectionView.contentSize.width / pageWidth) - 1.0;
    }

    NSLog(@"Dragging - You will be on %i page (from page %i)", newPage, _currentPage);

    *targetContentOffset = CGPointMake(newPage * pageWidth, targetContentOffset->y);
} 
```

感谢[http://www.mysamplecode.com/2012/12/ios-scrollview-example-with-paging.html](http://www.mysamplecode.com/2012/12/ios-scrollview-example-with-paging.html)指出正确的方法。

# android - Android 声音 NullPointerException 错误

> ID：12271623
> 
> 赞同：0
> 
> 时间：2012-09-04T21:31:16.837
> 
> 标签：android

我在使用 Android 媒体播放器时遇到问题，我正在做一些小测验，并且我有方法 correctAnswer()，我在其中创建带有一些声音的 MediaPlayer，然后准备它，然后启动它，但是我得到了这个 NullPointerException 错误。

我正在尝试播放 mp3 声音。

这是该方法正确答案（）：

```
 private void correctAnswer() {
    MediaPlayer correctSound = MediaPlayer.create(this, R.raw.correct);
    try {
        correctSound.prepare();
    } catch (IllegalStateException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    correctSound.start();

    Toast.makeText(getApplicationContext(), "Correct answer +1",
            Toast.LENGTH_SHORT).show();
    progressBar.incrementProgressBy(1);
    tvProgress.setText(progressBar.getProgress() + "/20");
    generateQuestion();
    endGame();
} 
```

这是LogCat：

```
09-04 21:21:30.546: E/AndroidRuntime(513): Uncaught handler: thread main exiting due to         uncaught exception
09-04 21:21:30.567: E/AndroidRuntime(513): java.lang.NullPointerException
09-04 21:21:30.567: E/AndroidRuntime(513):  at   com.example.americansportsquiz.PlayStageActivity.correctAnswer(PlayStageActivity.java:121)
09-04 21:21:30.567: E/AndroidRuntime(513):  at com.example.americansportsquiz.PlayStageActivity.onClick(PlayStageActivity.java:75)
09-04 21:21:30.567: E/AndroidRuntime(513):  at android.view.View.performClick(View.java:2364)
09-04 21:21:30.567: E/AndroidRuntime(513):  at android.view.View.onTouchEvent(View.java:4179)
09-04 21:21:30.567: E/AndroidRuntime(513):  at android.widget.TextView.onTouchEvent(TextView.java:6541)
09-04 21:21:30.567: E/AndroidRuntime(513):  at android.view.View.dispatchTouchEvent(View.java:3709)
09-04 21:21:30.567: E/AndroidRuntime(513):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
09-04 21:21:30.567: E/AndroidRuntime(513):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
09-04 21:21:30.567: E/AndroidRuntime(513):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
09-04 21:21:30.567: E/AndroidRuntime(513):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
09-04 21:21:30.567: E/AndroidRuntime(513):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
09-04 21:21:30.567: E/AndroidRuntime(513):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
09-04 21:21:30.567: E/AndroidRuntime(513):  at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1659)
09-04 21:21:30.567: E/AndroidRuntime(513):  at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1107)
09-04 21:21:30.567: E/AndroidRuntime(513):  at android.app.Activity.dispatchTouchEvent(Activity.java:2061)
09-04 21:21:30.567: E/AndroidRuntime(513):  at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1643)
09-04 21:21:30.567: E/AndroidRuntime(513):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1691)
09-04 21:21:30.567: E/AndroidRuntime(513):  at android.os.Handler.dispatchMessage(Handler.java:99)
09-04 21:21:30.567: E/AndroidRuntime(513):  at android.os.Looper.loop(Looper.java:123)
09-04 21:21:30.567: E/AndroidRuntime(513):  at android.app.ActivityThread.main(ActivityThread.java:4363)
09-04 21:21:30.567: E/AndroidRuntime(513):  at java.lang.reflect.Method.invokeNative(Native Method)
09-04 21:21:30.567: E/AndroidRuntime(513):  at java.lang.reflect.Method.invoke(Method.java:521)
09-04 21:21:30.567: E/AndroidRuntime(513):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
09-04 21:21:30.567: E/AndroidRuntime(513):  at    com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
09-04 21:21:30.567: E/AndroidRuntime(513):  at dalvik.system.NativeStart.main(Native Method) 
```

**编辑**正如我所说，这是测验应用程序，它会为 7 个正确答案播放声音，但它在 8 个时失败，并给我这个空指针异常。在它以 8 个正确答案失败之前，它一直给我这个警告。

```
09-04 21:41:33.086: W/MediaPlayer(598): info/warning (1, 44) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T21:45:46.083

这个人也有类似的问题：[Android SDK Mediaplayer.create random returns null](https://stackoverflow.com/questions/3589310/android-sdk-mediaplayer-create-randomly-returns-null)

也许您应该尝试使用 SoundPool，因为您正在播放的音频文件只是一个短片。此外，如果您使用 SoundPool，您可以加载`R.raw.correct`一次而不是每次加载。

无论如何，SoundPool 通常更适合此类短音。=]

这是一个关于如何开始使用 SoundPool 的好教程：[http ://www.vogella.com/articles/AndroidMedia/article.html#tutorial_soundpool](http://www.vogella.com/articles/AndroidMedia/article.html#tutorial_soundpool)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T21:46:01.537

在您尝试创建新的 MediaPlayer 之前，您似乎没有发布以前的 MediaPlayer。只需保留对此 MediaPlayer 的引用并重放声音，而不是*每次都*创建一个新副本：

```
MediaPlayer correctSound;

private void correctAnswer() {
    if(correctSound == null)
        correctSound = MediaPlayer.create(this, R.raw.correct);

        if(correctSound == null) {
           // Something failed... try again or break out of this method
        }

        try {
            correctSound.prepare();
        } catch (IllegalStateException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    correctSound.start();
    ...
} 
```

# python - 在写入 CSV 之前将列附加到 python 光标？

> ID：12271628
> 
> 赞同：0
> 
> 时间：2012-09-04T21:31:33.000
> 
> 标签：python, sql, csv, pyodbc

```
#!/usr/bin/env python
import csv
import pyodbc

out_file = "file.csv"

conn = pyodbc.connect("DRIVER={driver};SERVER=servername;UID=user;PWD=pass;DATABASE=data")

cursor = conn.execute("SELECT TOP 10 * FROM table")

with open(out_file, 'w') as f:
  print cursor
  csv.writer(f, quoting=csv.QUOTE_MINIMAL).writerows(cursor) 
```

这是我现在的代码，并且按预期工作。我的问题是，在将行插入 CSV 之前，如何向行添加一些空值列？我需要这样做，因为我会将它与另一个查询结合起来，该查询将有一些额外的数据列，并且我希望数据与空填充列对齐。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T21:35:19.547

怎么样：

```
writer = csv.writer(f, quoting=csv.QUOTE_MINIMAL)
for row in cursor:
    writer.writerow(list(row) + ['', '', '', '']) 
```

# google-chrome - 如何在打包的应用程序（谷歌浏览器）上捕捉关闭事件？

> ID：12271648
> 
> 赞同：2
> 
> 时间：2012-09-04T21:33:15.443
> 
> 标签：google-chrome, events, tabs

我正在为 Google Chrome 开发一个打包的应用程序。

现在这个应用程序在一个选项卡上打开，我想在用户关闭我的应用程序时执行一个操作。

但到目前为止我无法做到这一点：

*   我试图听 unload 事件但没有工作。

*   我尝试了 chrome.tabs.addListener （或类似的东西），但唯一的问题是只有在该 chrome 实例上的任何其他选项卡关闭时才有效。

    但是，如果我关闭具有处理事件功能的应用程序；事件没有被触发。

有谁知道我需要做什么才能赶上关闭事件？

# c# - WebBrowser 控件 — AJAX 调用后获取文档元素 — 空异常

> ID：12271649
> 
> 赞同：0
> 
> 时间：2012-09-04T21:33:20.310
> 
> 标签：c#, .net, ajax, browser, windows-applications

我正在编写一个应用程序，该应用程序使用 WebBrowser 控件来查看可以更改的 Web 内容，`AJAX`从而添加新的内容/元素。
我似乎无法以任何我尝试过的方式获得新元素......
`webBrowser1.DocumentText`没有最新的页面（在 AJAX 之后）。
webBrowser1.Document.GetElementById("Eelement that come afetr AJAX and i want it") 总是返回 Null。

有没有办法使用这个控件来获取这些新数据？
让我们看看我的代码：

```
 private void btnStartRegister_Click(object sender, EventArgs e)
    {
           webBrowser1.Navigate("www.sample.com");
    }

    private void webBrowser1_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
    {
            webBrowser1.Document.GetElementById("register").InvokeMember("click");
            webBrowser1.Document.GetElementById("element that comes afetr AJAX Call and i want it").InvokeMember("click"); -> I have error in this line...
    } 
```

`i am using visual studio 2010 - windows application - .net 4 - c#`

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-06T05:00:44.350

```
while ((wb.ReadyState != WebBrowserReadyState.Complete)) {
    Application.DoEvents();
} 
```

;)

# android - 带有phonegap的安卓系统。如何从 JAVA 类访问 Web 视图？

> ID：12271650
> 
> 赞同：1
> 
> 时间：2012-09-04T21:33:33.740
> 
> 标签：android, cordova

我想在某些情况下运行特定的 javascript。我不想需要插件，因为插件依赖于打开应用程序。

我的想法是能够在应用程序关闭时打开通知（我有这个工作），并让通知在关闭时打开应用程序，或者如果应用程序打开则将其置于前面。

所以上面已经是它的工作方式......

话虽如此，但是，我希望能够让通知将一些 javascript 传递给 web 视图。我想根据点击的通知打开链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T21:39:39.733

使用`loadUrl`方法将 javascript 传递到页面，如下所示：

```
webview.loadUrl("javascript:window.onload = function(){alert(\"haha\");};"); 
```

# javascript - ColorBox jQuery 帮助请求

> ID：12271653
> 
> 赞同：0
> 
> 时间：2012-09-04T21:33:45.397
> 
> 标签：javascript, jquery, lightbox, colorbox

我不知道如何操作 jQuery，所以我再次求助于 stackoverflow，希望有一个快速的解决方案！

我正在使用一个名为 ColorBox 的 jQuery 脚本来实现灯箱效果。我不知道如何编辑此脚本以包含 Facebook 评论脚本。

这是 jQuery 文件内容：

```
(function(a,b,c){function Z(c,d,e){var g=b.createElement(c);return d&&(g.id=f+d),e&&(g.style.cssText=e),a(g)}function $(a){var b=y.length,c=(Q+a)%b;return c<0?b+c:c}function _(a,b){return Math.round((/%/.test(a)?(b==="x"?z.width():z.height())/100:1)*parseInt(a,10))}function ba(a){return K.photo||/\.(gif|png|jpe?g|bmp|ico)((#|\?).*)?$/i.test(a)}function bb(){var b;K=a.extend({},a.data(P,e));for(b in K)a.isFunction(K[b])&&b.slice(0,2)!=="on"&&(K[b]=K[b].call(P));K.rel=K.rel||P.rel||"nofollow",K.href=K.href||a(P).attr("href"),K.title=K.title||P.title,typeof K.href=="string"&&(K.href=a.trim(K.href))}function bc(b,c){a.event.trigger(b),c&&c.call(P)}function bd(){var a,b=f+"Slideshow_",c="click."+f,d,e,g;K.slideshow&&y[1]?(d=function(){F.text(K.slideshowStop).unbind(c).bind(j,function(){if(K.loop||y[Q+1])a=setTimeout(W.next,K.slideshowSpeed)}).bind(i,function(){clearTimeout(a)}).one(c+" "+k,e),r.removeClass(b+"off").addClass(b+"on"),a=setTimeout(W.next,K.slideshowSpeed)},e=function(){clearTimeout(a),F.text(K.slideshowStart).unbind([j,i,k,c].join(" ")).one(c,function(){W.next(),d()}),r.removeClass(b+"on").addClass(b+"off")},K.slideshowAuto?d():e()):r.removeClass(b+"off "+b+"on")}function be(b){U||(P=b,bb(),y=a(P),Q=0,K.rel!=="nofollow"&&(y=a("."+g).filter(function(){var b=a.data(this,e).rel||this.rel;return b===K.rel}),Q=y.index(P),Q===-1&&(y=y.add(P),Q=y.length-1)),S||(S=T=!0,r.show(),K.returnFocus&&a(P).blur().one(l,function(){a(this).focus()}),q.css({opacity:+K.opacity,cursor:K.overlayClose?"pointer":"auto"}).show(),K.w=_(K.initialWidth,"x"),K.h=_(K.initialHeight,"y"),W.position(),o&&z.bind("resize."+p+" scroll."+p,function(){q.css({width:z.width(),height:z.height(),top:z.scrollTop(),left:z.scrollLeft()})}).trigger("resize."+p),bc(h,K.onOpen),J.add(D).hide(),I.html(K.close).show()),W.load(!0))}function bf(){!r&&b.body&&(Y=!1,z=a(c),r=Z(X).attr({id:e,"class":n?f+(o?"IE6":"IE"):""}).hide(),q=Z(X,"Overlay",o?"position:absolute":"").hide(),s=Z(X,"Wrapper"),t=Z(X,"Content").append(A=Z(X,"LoadedContent","width:0; height:0; overflow:hidden"),C=Z(X,"LoadingOverlay").add(Z(X,"LoadingGraphic")),D=Z(X,"Title"),E=Z(X,"Current"),G=Z(X,"Next"),H=Z(X,"Previous"),F=Z(X,"Slideshow").bind(h,bd),I=Z(X,"Close")),s.append(Z(X).append(Z(X,"TopLeft"),u=Z(X,"TopCenter"),Z(X,"TopRight")),Z(X,!1,"clear:left").append(v=Z(X,"MiddleLeft"),t,w=Z(X,"MiddleRight")),Z(X,!1,"clear:left").append(Z(X,"BottomLeft"),x=Z(X,"BottomCenter"),Z(X,"BottomRight"))).find("div div").css({"float":"left"}),B=Z(X,!1,"position:absolute; width:9999px; visibility:hidden; display:none"),J=G.add(H).add(E).add(F),a(b.body).append(q,r.append(s,B)))}function bg(){return r?(Y||(Y=!0,L=u.height()+x.height()+t.outerHeight(!0)-t.height(),M=v.width()+w.width()+t.outerWidth(!0)-t.width(),N=A.outerHeight(!0),O=A.outerWidth(!0),r.css({"padding-bottom":L,"padding-right":M}),G.click(function(){W.next()}),H.click(function(){W.prev()}),I.click(function(){W.close()}),q.click(function(){K.overlayClose&&W.close()}),a(b).bind("keydown."+f,function(a){var b=a.keyCode;S&&K.escKey&&b===27&&(a.preventDefault(),W.close()),S&&K.arrowKey&&y[1]&&(b===37?(a.preventDefault(),H.click()):b===39&&(a.preventDefault(),G.click()))}),a("."+g,b).live("click",function(a){a.which>1||a.shiftKey||a.altKey||a.metaKey||(a.preventDefault(),be(this))})),!0):!1}var d={transition:"elastic",speed:300,width:!1,initialWidth:"600",innerWidth:!1,maxWidth:!1,height:!1,initialHeight:"450",innerHeight:!1,maxHeight:!1,scalePhotos:!0,scrolling:!0,inline:!1,html:!1,iframe:!1,fastIframe:!0,photo:!1,href:!1,title:!1,rel:!1,opacity:.9,preloading:!0,current:"image {current} of {total}",previous:"previous",next:"next",close:"close",open:!1,returnFocus:!0,reposition:!0,loop:!0,slideshow:!1,slideshowAuto:!0,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",onOpen:!1,onLoad:!1,onComplete:!1,onCleanup:!1,onClosed:!1,overlayClose:!0,escKey:!0,arrowKey:!0,top:!1,bottom:!1,left:!1,right:!1,fixed:!1,data:undefined},e="colorbox",f="cbox",g=f+"Element",h=f+"_open",i=f+"_load",j=f+"_complete",k=f+"_cleanup",l=f+"_closed",m=f+"_purge",n=!a.support.opacity&&!a.support.style,o=n&&!c.XMLHttpRequest,p=f+"_IE6",q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X="div",Y;if(a.colorbox)return;a(bf),W=a.fn[e]=a[e]=function(b,c){var f=this;b=b||{},bf();if(bg()){if(!f[0]){if(f.selector)return f;f=a("<a/>"),b.open=!0}c&&(b.onComplete=c),f.each(function(){a.data(this,e,a.extend({},a.data(this,e)||d,b))}).addClass(g),(a.isFunction(b.open)&&b.open.call(f)||b.open)&&be(f[0])}return f},W.position=function(a,b){function i(a){u[0].style.width=x[0].style.width=t[0].style.width=a.style.width,t[0].style.height=v[0].style.height=w[0].style.height=a.style.height}var c=0,d=0,e=r.offset(),g=z.scrollTop(),h=z.scrollLeft();z.unbind("resize."+f),r.css({top:-9e4,left:-9e4}),K.fixed&&!o?(e.top-=g,e.left-=h,r.css({position:"fixed"})):(c=g,d=h,r.css({position:"absolute"})),K.right!==!1?d+=Math.max(z.width()-K.w-O-M-_(K.right,"x"),0):K.left!==!1?d+=_(K.left,"x"):d+=Math.round(Math.max(z.width()-K.w-O-M,0)/2),K.bottom!==!1?c+=Math.max(z.height()-K.h-N-L-_(K.bottom,"y"),0):K.top!==!1?c+=_(K.top,"y"):c+=Math.round(Math.max(z.height()-K.h-N-L,0)/2),r.css({top:e.top,left:e.left}),a=r.width()===K.w+O&&r.height()===K.h+N?0:a||0,s[0].style.width=s[0].style.height="9999px",r.dequeue().animate({width:K.w+O,height:K.h+N,top:c,left:d},{duration:a,complete:function(){i(this),T=!1,s[0].style.width=K.w+O+M+"px",s[0].style.height=K.h+N+L+"px",K.reposition&&setTimeout(function(){z.bind("resize."+f,W.position)},1),b&&b()},step:function(){i(this)}})},W.resize=function(a){S&&(a=a||{},a.width&&(K.w=_(a.width,"x")-O-M),a.innerWidth&&(K.w=_(a.innerWidth,"x")),A.css({width:K.w}),a.height&&(K.h=_(a.height,"y")-N-L),a.innerHeight&&(K.h=_(a.innerHeight,"y")),!a.innerHeight&&!a.height&&(A.css({height:"auto"}),K.h=A.height()),A.css({height:K.h}),W.position(K.transition==="none"?0:K.speed))},W.prep=function(b){function g(){return K.w=K.w||A.width(),K.w=K.mw&&K.mw<K.w?K.mw:K.w,K.w}function h(){return K.h=K.h||A.height(),K.h=K.mh&&K.mh<K.h?K.mh:K.h,K.h}if(!S)return;var c,d=K.transition==="none"?0:K.speed;A.remove(),A=Z(X,"LoadedContent").append(b),A.hide().appendTo(B.show()).css({width:g(),overflow:K.scrolling?"auto":"hidden"}).css({height:h()}).prependTo(t),B.hide(),a(R).css({"float":"none"}),o&&a("select").not(r.find("select")).filter(function(){return this.style.visibility!=="hidden"}).css({visibility:"hidden"}).one(k,function(){this.style.visibility="inherit"}),c=function(){function q(){n&&r[0].style.removeAttribute("filter")}var b,c,g=y.length,h,i="frameBorder",k="allowTransparency",l,o,p;if(!S)return;l=function(){clearTimeout(V),C.hide(),bc(j,K.onComplete)},n&&R&&A.fadeIn(100),D.html(K.title).add(A).show();if(g>1){typeof K.current=="string"&&E.html(K.current.replace("{current}",Q+1).replace("{total}",g)).show(),G[K.loop||Q<g-1?"show":"hide"]().html(K.next),H[K.loop||Q?"show":"hide"]().html(K.previous),K.slideshow&&F.show();if(K.preloading){b=[$(-1),$(1)];while(c=y[b.pop()])o=a.data(c,e).href||c.href,a.isFunction(o)&&(o=o.call(c)),ba(o)&&(p=new Image,p.src=o)}}else J.hide();K.iframe?(h=Z("iframe")[0],i in h&&(h[i]=0),k in h&&(h[k]="true"),h.name=f+ +(new Date),K.fastIframe?l():a(h).one("load",l),h.src=K.href,K.scrolling||(h.scrolling="no"),a(h).addClass(f+"Iframe").appendTo(A).one(m,function(){h.src="//about:blank"})):l(),K.transition==="fade"?r.fadeTo(d,1,q):q()},K.transition==="fade"?r.fadeTo(d,0,function(){W.position(0,c)}):W.position(d,c)},W.load=function(b){var c,d,e=W.prep;T=!0,R=!1,P=y[Q],b||bb(),bc(m),bc(i,K.onLoad),K.h=K.height?_(K.height,"y")-N-L:K.innerHeight&&_(K.innerHeight,"y"),K.w=K.width?_(K.width,"x")-O-M:K.innerWidth&&_(K.innerWidth,"x"),K.mw=K.w,K.mh=K.h,K.maxWidth&&(K.mw=_(K.maxWidth,"x")-O-M,K.mw=K.w&&K.w<K.mw?K.w:K.mw),K.maxHeight&&(K.mh=_(K.maxHeight,"y")-N-L,K.mh=K.h&&K.h<K.mh?K.h:K.mh),c=K.href,V=setTimeout(function(){C.show()},100),K.inline?(Z(X).hide().insertBefore(a(c)[0]).one(m,function(){a(this).replaceWith(A.children())}),e(a(c))):K.iframe?e(" "):K.html?e(K.html):ba(c)?(a(R=new Image).addClass(f+"Photo").error(function(){K.title=!1,e(Z(X,"Error").text("This image could not be loaded"))}).load(function(){var a;R.onload=null,K.scalePhotos&&(d=function(){R.height-=R.height*a,R.width-=R.width*a},K.mw&&R.width>K.mw&&(a=(R.width-K.mw)/R.width,d()),K.mh&&R.height>K.mh&&(a=(R.height-K.mh)/R.height,d())),K.h&&(R.style.marginTop=Math.max(K.h-R.height,0)/2+"px"),y[1]&&(K.loop||y[Q+1])&&(R.style.cursor="pointer",R.onclick=function(){W.next()}),n&&(R.style.msInterpolationMode="bicubic"),setTimeout(function(){e(R)},1)}),setTimeout(function(){R.src=c},1)):c&&B.load(c,K.data,function(b,c,d){e(c==="error"?Z(X,"Error").text("Request unsuccessful: "+d.statusText):a(this).contents())})},W.next=function(){!T&&y[1]&&(K.loop||y[Q+1])&&(Q=$(1),W.load())},W.prev=function(){!T&&y[1]&&(K.loop||Q)&&(Q=$(-1),W.load())},W.close=function(){S&&!U&&(U=!0,S=!1,bc(k,K.onCleanup),z.unbind("."+f+" ."+p),q.fadeTo(200,0),r.stop().fadeTo(300,0,function(){r.add(q).css({opacity:1,cursor:"auto"}).hide(),bc(m),A.remove(),setTimeout(function(){U=!1,bc(l,K.onClosed)},1)}))},W.remove=function(){a([]).add(r).add(q).remove(),r=null,a("."+g).removeData(e).removeClass(g).die()},W.element=function(){return a(P)},W.settings=d})(jQuery,document,this); 
```

Facebook评论的代码很简单！

```
<div id="fb-root"></div>
<script src="http://connect.facebook.net/en_US/all.js#xfbml=1"></script>
<fb:comments href="YOUR_CANONICAL_URL"></fb:comments> 
```

有谁知道如何将第二个位粉碎到第一个位以使 ColorBox 输出图像以及选定的 Facebook 评论？

提前致谢， 卡姆伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T21:37:33.963

同意@Tim Medora 1000%，但也可以根据我对您的愿望的猜测提供这个，因为我熟悉 ColorBox 插件。

建议您探索 ColorBox 在其 UI 中打开 HTML 内容（而不是仅图像）的开箱即用功能。通过这种方式，您将有一个起点，可以将来自社交网络流的评论注入其中。

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T21:40:03.867

首先，这是[缩小](http://en.wikipedia.org/wiki/Minification_%28programming%29)的JavaScript，因此编辑该特定脚本会很困难。如果您真的想对其进行修改，我建议您获取源代码。

> 我不知道如何操作 jQuery

插件开发需要中级到高级的 jQuery 和 JavaScript 知识。修改别人的插件意味着“您拥有它”，即没有其他人拥有与您相同的代码并且您对此负责。您不能对代码进行更新，也不能期望其他人知道您的更改。

考虑到这一点，也许您可​​以使用[公共 API](http://www.jacklmoore.com/colorbox)并附加到事件和/或操纵内容？

我不熟悉 Colorbox，但我注意到它提供了几个事件和回调选项，以及`$.colorbox.element()`可能让您操纵内容的选项。例如，当盒子打开时，可能会触发回调，在此期间您可以检索 Facebook 内容并将其插入到盒子中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T21:47:19.753

你有几个选择。

首先让 fb 的东西在你页面的某个地方的 div 中工作。然后查看有关如何在颜色框中显示该 div 的示例。这很简单。当你有这个工作时，用 fg guts 包裹你的 div 并隐藏它，这样它只有在 colorbox 被触发时才可见。

...或者，将 fb 内容放在裸页面上并将该页面加载到 iframe 中。Colorbox 也使这变得简单。

到目前为止，似乎没有理由弄乱颜色框本身。

# javascript - 为什么这个简单的 JavaScript 在 FireFox 或 Chrome 中不起作用？

> ID：12271655
> 
> 赞同：1
> 
> 时间：2012-09-04T21:33:48.580
> 
> 标签：javascript, function, dom-events

为什么这个简单的代码在 Firefox 和 Chrome 中不起作用，但在 IE 中起作用？这个脚本有什么问题？我只是想找到一种方法来获取选中的复选框文本（或标签）并`$_post`在另一个页面上使用它。

```
<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
<script type="text/javascript" language="javascript">

function ReadCheckbox()
{
    var temp = '';
    var radio;
    var popupTag ;

    for (var i=1 ; i<5 ; i++) {
        radio = document.getElementById('chk'+i);

        if(radio.checked == true){temp += radio.value}
    }

      document.getElementById('aaaa').value = temp;

}

</script>
</head>
<body>

<label>What is your Site Address ?</label><br/>
<label>NetNic.ir</label><input id="chk1" type="checkbox" value="NetNic.ir" />
<label>SarirWeb.Com</label><input id="chk2" type="checkbox" value="SarirWeb.Com"/>
<label>LearnCD.ir</label><input id="chk3" type="checkbox" value="LearnCD.ir"/> 
<label>AnimLand.ir</label><input id="chk4" type="checkbox" value="AnimLand.ir"/> 
<br />
<br/>
<textarea rows="2" name="aaaa" cols="20"></textarea>
<input type="button" onclick="ReadCheckbox()" value="ثبت" style="height:32px; width:83px;"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T21:35:55.377

`name="aaaa"`不是身份证。所以`getElementById('aaaa')`不会找到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T21:37:48.707

尝试：

```
<textarea rows="2" name="aaaa" id="aaaa" cols="20"></textarea> 
```

# c# - 在类定义中加载图像时出错

> ID：12271657
> 
> 赞同：0
> 
> 时间：2012-09-04T21:34:18.640
> 
> 标签：c#, image

当我加载棋子图像时，我正在从事一个爱好国际象棋项目，它会引发无法找到图像的异常。我知道情况并非如此，它之前已经工作过，当我以一种方法加载它们时它确实有效。它们位于正确的位置并且文件路径正确。起初，代码使用 Bitmap 类而不是 Image 类，结果相同。

我在类定义中加载图像的主要原因是我多次使用大多数图像，并且我想确保每个图像只加载一次。

这显示了类定义和第一个按钮，但是为每个部分加载了一个图像。

```
public partial class PieceButton : Button
{
    private static readonly Image blackBishop = Image.FromFile("images/black_bishop.gif"); 
```

稍后，当一块移动到按钮时，我会将加载的图像应用到按钮。该类继承 Button 因为默认按钮行为非常有用。图像是 .gif，因为这样按钮背景仍然可见（字段为白色或黑色）。

所以我的问题是：如何在类定义中正确加载这些图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T22:40:56.397

考虑将图像作为资源添加到 Resources.resx 并让 Visual Studio 担心生成代码以实际将基础数据转换为 Image 对象。这有许多优点，最大的优点是任何问题（例如不存在的图像）都会在编译时被捕获，因为 VS 会提前为您生成 Properties.Resources.whatever。

您还将获得所需的“加载图像一次”行为

# xml - 带有命名空间的 XSD 密钥

> ID：12271660
> 
> 赞同：1
> 
> 时间：2012-09-04T21:34:29.683
> 
> 标签：xml, xsd

我有一个我自己无法解决的问题。我的 XSD 非常复杂，但这里是一个更简单的代码，但也有同样的问题。

这是 XSD：

```
<?xml version="1.0" encoding="UTF-8"?>

<xs:schema id="Race"
           xmlns:xs = "http://www.w3.org/2001/XMLSchema"
           targetNamespace="myrace.org/"
           xmlns="myrace.org/"
           elementFormDefault="qualified"
           attributeFormDefault="unqualified"
           xmlns:msdata="urn:schemas-microsoft-com:xml-msdata">

  <xs:element name="race" msdata:IsDataSet="true">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="runner" type="runnerType" maxOccurs="10">
        </xs:element>
      </xs:sequence>
    </xs:complexType>
    <xs:keyref name="predecessorKey" refer="runKey">
      <xs:selector xpath="runner/predecessor"/>
      <xs:field xpath="@foreignKey"/>
    </xs:keyref>
    <xs:unique name="runIdChecker">
      <xs:selector xpath="runner"/>
      <xs:field xpath="@primaryKey"/>
    </xs:unique>
    <xs:unique name="oneToOneChecker">
      <xs:selector xpath="runner/predecessor"/>
      <xs:field xpath="@foreignKey"/>
    </xs:unique>
    <xs:key name="runKey">
      <xs:selector xpath="runner"/>
      <xs:field xpath="@primaryKey"/>
    </xs:key>
  </xs:element>

  <xs:complexType name="runnerType">
    <xs:sequence>
      <xs:element name="firstName" type="xs:string"/>
      <xs:element name="lastName" type="xs:string"/>
      <xs:element name="predecessor" type="predecessorType" minOccurs="0" maxOccurs="1"/>
    </xs:sequence>
    <xs:attribute name="primaryKey" type="xs:long" use="required"/>
  </xs:complexType>

  <xs:complexType name="predecessorType">
    <xs:attribute name="foreignKey" type="xs:long" use="required"/>
  </xs:complexType>

</xs:schema> 
```

XSD 工作正常，但是当我们编写 2 个类似的 primaryKey 时它应该会产生错误，但事实并非如此。

另一方面，如果我将头部更改为：

```
<xs:schema id="Race"
           xmlns:xs = "http://www.w3.org/2001/XMLSchema"
           elementFormDefault="qualified"
           attributeFormDefault="unqualified"
           xmlns:msdata="urn:schemas-microsoft-com:xml-msdata"> 
```

它会起作用的。但是出于与我的全球项目一致的原因，我无法更改头部，并且需要定义 XSD -> XML 之间的连接，相当于第一个代码。

有谁知道我的问题是什么以及我能做什么？

谢谢

本杰明

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T22:40:01.227

看看[这个答案](https://stackoverflow.com/questions/10356723/xsd-unique-constraint-on-attribute-of-sibling-elements-of-a-specific-type/10358114#10358114)，特别是当你的模式以命名空间为目标时，谈到需要为选择器和字段使用命名空间前缀的部分。

因此，您需要做的就是添加 xmlns:my="myrace.org/" 然后更改选择器以读取类似的内容`my:runner/my:predecessor`- 它会起作用。属性是不合格的，因此您不必担心它们。

我没有可视化您的正确性约束，但是如果您遇到问题，请更新帖子。

# php - CodeIgniter 从控制器返回数据

> ID：12271663
> 
> 赞同：2
> 
> 时间：2012-09-04T21:35:04.197
> 
> 标签：php, ajax, json, codeigniter

我正在将 CodeIgniter 用于我正在从事的项目。

我在这样的视图中有一个 ajax 调用：

```
$.ajax({
    type: 'GET',
    url: 'extra/search/infojson/' + $(this).text().replace(/\s/g, "+");
    success: function(data) {
        /* Do something with that data */
    }

}); 
```

`infojson`是控制器中的一个方法，它采用“用户名”参数，进行搜索，并将返回一个 JSON 对象。有什么方法可以返回这些数据而不必为其创建另一个视图？此方法将仅用于从这一页面返回此类数据，因此我不明白为什么我需要为此创建另一个视图。我读过，`_output()`但对我来说没有任何意义。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T21:45:50.167

这是答案：

放在`$this->config->set_item('compress_output', FALSE);`echo 之前以禁用输出压缩。

来源：[http ://codeigniter.com/forums/viewthread/155810/#784452](http://codeigniter.com/forums/viewthread/155810/#784452)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T21:45:33.940

如果您正在压缩配置文件中的输出，请尝试设置`$config[‘compress_output’] = FALSE;`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T21:39:53.680

**当然。**

使用 PHP 的`json_encode()`函数返回数据，在 ajax 请求时无需调用`$this->load->view('someview', $data);`将数据发送回浏览器。

```
class Extra extends CI_Controller{
    function __construct(){
        parent::__construct();
    }

    function search($username){
        $results = your_search($username);
        echo json_encode(array("results" => $results));
    }
} 
```

还有你的jQuery：

```
$.ajax({
    type: 'GET',
    dataType: "json",
    url: 'extra/search/infojson/' + $(this).text().replace(/\s/g, "+");
    success: function(data) {
        if(data.results){
            /* Do something with the results */
        }
    }
}); 
```

# java - Java - 通过套接字发送字节对象

> ID：12271664
> 
> 赞同：2
> 
> 时间：2012-09-04T21:35:09.270
> 
> 标签：java, object, byte, objectoutputstream

我在我的套接字上使用了 ObjectOutputStream，因为我创建了一个需要在客户端和服务器之间传输的新类。我还创建了一个独特的线程，它每秒通过流向服务器发送一个字节，以便连续检查连接并检查其是否处于活动状态。

```
byte b=1;
oos.writeObject(b); 
```

我使用“字节”是因为它是我可以发送的最小对象（对吗？），这样服务器就不会读取更长的对象。

我的问题是服务器是读取一个字节对象（字节大小）还是一个 8 字节对象（对象大小）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T21:39:29.860

可能两者都没有。首先， a`byte`被自动装箱为 a `Byte`。然后将`Byte`其序列化到您的输出流。发送可能需要超过 8 个字节。我不确切知道规范，但它可能会发送类名`java.lang.Byte`和字节本身，可能还有一些控制字节。

一种简单的判断方法 - 将您的字节序列化为 a `ByteArrayOutputStream`，刷新您的，然后查看最终有`ObjectOutputStream`多少字节。`ByteArrayOutputStream`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T21:52:17.137

如果您必须使用 ObjectOutputStream，那么您发送哪个对象实际上并不重要，因为在发送第一个对象之后，将来会发送对该对象的引用。出于这个原因，我建议您发送一个特定的枚举，例如。

```
enum Control {
    HEARTBEAT
} 
```

您可以使用 DataOutputStream 使线路格式更小，其中 1 字节为 1 字节。鉴于 IP 数据包标头约为 20 字节，发送 1 字节或 8 字节并不重要，因为开销远高于此。

# php - 在将 php 文件创建为 excel 格式时，如何摆脱 excels 荒谬的自动格式

> ID：12271666
> 
> 赞同：0
> 
> 时间：2012-09-04T21:35:30.783
> 
> 标签：php, excel

我有一个程序可以使文件成为 excel 文件，我拥有它，所以它摆脱了愚蠢的格式 mc excel，但不会摆脱 ########

这种格式发生在 mc excel 中，如果单元格中包含符号 - 似乎。但并非所有人都这样。

清理代码是：

```
function cleanData(&$str)
  {
   // escape tab characters
    $str = preg_replace("/\t/", "\\t", $str);

    // escape new lines
    $str = preg_replace("/\r?\n/", "\\n", $str);

    // convert 't' and 'f' to boolean values
    if($str == 't') $str = 'TRUE';
    if($str == 'f') $str = 'FALSE';

    // force certain number/date formats to be imported as strings
    if(preg_match("/^0/", $str) || preg_match("/^\+?\d{8,}$/", $str) || preg_match("/^\d{4}.\d{1,2}.\d{1,2}/", $str)) {
      $str = "'$str";
    }

    // escape fields that include double quotes
    if(strstr($str, '"')) $str = '"' . str_replace('"', '""', $str) . '"';

  } 
```

需要帮助请叫我！

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T06:27:48.123

当单元格的内容对于默认列大小而言太大时，MS Excel 会显示“########”：它与文本中的符号无关。单元格中的值仍然正确，但是在使用制表符分隔值文件时无法设置列宽，因此除非切换到真正的 Excel 文件，否则无法控制。

如果您必须使用制表符分隔值文件；与其编写自己的制表符分隔值转换，不如使用 PHP 的内置[fputcsv()](http://www.php.net/manual/en/function.fputcsv.php)函数来代替？

# jquery - 登录时从 jQuery 模态重定向到非模态仪表板

> ID：12271669
> 
> 赞同：0
> 
> 时间：2012-09-04T21:35:41.650
> 
> 标签：jquery, ajax, zend-framework, redirect, nyromodal

Zend 框架应用程序使用 jQuery。登录通过 nyroModal（来自[http://nyromodal.nyrodev.com/](http://nyromodal.nyrodev.com/)的 jQuery 插件）进行。一切都很好，验证等 - 但是一旦用户登录并且 Zend_Auth 写入我想要重定向到仪表板的身份。重定向发生在模式内部，而不是重新加载浏览器框架。

这是模态的视图脚本：

```
<?php if($this->login_success) echo $this->login_success; ?>
<div id="login_modal">
<h2>Login</h2>
<?php echo $this->form; ?>
<div class="submit" onclick="submitForm('login')">Log In</div>
</div> 
```

这是我的 submitForm()：

```
function submitForm(thisform) {
    var action = $('#' + thisform + '_form').attr('action');
    var form = $('#' + thisform + '_form').serialize();
    $.post(action, form, function(result) {
        var response = $(result);
        var html = response.filter('div:first').html();
        $('#' + thisform + '_modal').html(html);
    });
} 
```

这是 authController 在成功登录时的响应：

```
$url = $this->view->url(array('controller' => 'billing', 
                              'action' => 'index'), null, null);

$this->view->login_success = '<script type="text/javascript">
                              window.location = "'.$url.'"
                              </script>'; 
```

我也尝试过使用：

```
$this->_helper->redirector('index', 'billing'); 
```

但这总是在模态中加载仪表板；现在我只看到上面第一个代码块的登录标题和表单。

期待关闭此模式的答案，并将用户正确重定向到 /billing！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T02:08:41.767

试试看：

```
parent.window.location = "http://your.url.com"; 
```

我认为这就足够了。

# c# - 使用 Selenium 如何测试屏幕上是否显示了保存对话框？

> ID：12271675
> 
> 赞同：0
> 
> 时间：2012-09-04T21:36:04.917
> 
> 标签：c#, selenium

我正在尝试以编程方式单击“保存”按钮并测试是否出现了 Windows 保存对话框：除了我相信的断言语句之外，我拥有一切。我不知道如何断言我的自定义 SaveDialogBox 出现在用户面前。

```
[test]
public void Method_WhenThePersonIsNotfound_ClickingTheButtonSavesLetterToWordDocument
{
     //arrange
     CreateNewPage(); //creates IE window enters fields and clicks submit on first page.
     //act
     this.InternetExplorerDriver.FindElementById("SaveForm").Click(); //Clicks my button that should produce a save dialog box.

     //assert
     //Assert statement to verify that when button was clicked the save dialog box to save the letter in word appears. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T22:02:50.057

我不相信你可以：[我无法与弹出对话框交互。我的测试停止了！](http://wiki.openqa.org/display/SEL/Selenium+Core+FAQ). “保存文件”被特别提到无法与 Selenium 交互。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T06:14:00.077

使用异常来实现逻辑不是一个好习惯，但也许这个快速的解决方案会有所帮助：

```
try { 
      this.InternetExplorerDriver.SwitchTo().Alert().Accept();//Appears sometime
    } 
catch (NoAlertPresentException) 
    { 
      // this code will perform if no alert is shown
    } 
```

## 你也可以看到[这个](https://stackoverflow.com/questions/5164894/selenium2-and-webdriver-alert)答案

# c++ - C ++：重载！=当==重载

> ID：12271677
> 
> 赞同：3
> 
> 时间：2012-09-04T21:36:13.247
> 
> 标签：c++, class, overloading, operator-keyword

假设我有一个类，我在其中重载了运算符`==`：

```
Class A {
  ...
  public:
    bool operator== (const A &rhs) const;
  ...
};

...

bool A::operator== (const A &rhs) const {
  ..
  return isEqual;
} 
```

我已经让运算符`==`返回正确的布尔值。现在我想把它扩展到简单的对立面（`!=`）。我想调用重载的`==`运算符并返回相反的结果，即性质的东西

```
bool A::operator!= (const A &rhs) const {
  return !( this == A );
} 
```

这可能吗？我知道`this`这行不通，但它体现了我想要拥有的东西。我只想为调用保留一个参数：`rhs`. 任何帮助将不胜感激，因为经过几次搜索尝试后我无法找到答案。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-04T21:37:47.410

你几乎拥有它：

```
bool A::operator!= (const A &rhs) const {
  return !( *this == rhs );
} 
```

请注意，这`this`是一个*指针*，而不是对象。你需要取消引用它。与此相关的是，通常最好将大多数二元运算符实现为自由函数而不是成员函数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-04T21:45:56.003

您不必在个人（每个班级）的基础上进行。

`!=`标准库已经为这种方法提供了支持，通过为运算符、和声明“默认”模板实现`>`，这些实现依赖于用户提供的运算符和。这些声明位于标头中并包含在命名空间中。`<=``>=``==``<``<utility>``std::rel_ops`

由于这些实现是在命名空间中声明的`std::rel_ops`，因此默认情况下不会通过名称查找找到它们。如果您想在程序中“激活”这些定义，请执行

```
#include <utility>
using namespace std::rel_ops; 
```

例如，这将自动`!=`从`==`翻译单元中所有类的运算符实现派生运算符。您仍然可以通过`!=`为某些特定类提供运算符的显式实现来覆盖该机制。

# html5builder - Embarcadero HTML 5 生成器

> ID：12271685
> 
> 赞同：0
> 
> 时间：2012-09-04T21:37:10.450
> 
> 标签：html5builder

我有 Builder 试用版。我修改了 php.ini 文件以激活 mssql.dll，并重新定位了臭名昭著的 ntwdblib.dll 的副本。我仍然无法连接到 MSSQL。

有没有人在这方面取得任何成功？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T14:43:07.250

您应该首先**[查看 MSSQL 的 HTML5 Builder 文档。](http://docwiki.embarcadero.com/HTML5_Builder/en/Microsoft_SQL_Server)**

并确保您编辑*php.ini.template*而不是*php.ini*，因为编辑后者将没有任何效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-20T10:53:04.177

对 MSSQL 不太了解，但根据我对 Embarcadero 最新开发工具和 mysql 数据库的经验，您应该首先根据数据库引擎版本检查 dll 版本。如果可能，请安装您使用的 IDE 支持的指定版本的 db 引擎。如果不是，您可能无法在 ide 中使用数据资源管理器，但您的应用程序在部署时可能仍会连接到数据库。

# javascript - Javascript图形布局引擎

> ID：12271687
> 
> 赞同：12
> 
> 时间：2012-09-04T21:37:21.747
> 
> 标签：javascript, graph, graph-layout

我正在寻找可以进行图形布局的 Javascript 库/引擎。（当我说布局时，我的意思是在逻辑上很好地定位顶点。）我正在使用的图形都是 m-ary 树。M 通常不超过 5 或 6，但在某些情况下可以更大。

我确实有一些我现在使用的东西，Graphviz 的节点程序，它运行良好。问题是，在运行 Web 应用程序时，每次需要布局时，我都必须向服务器发送请求。最好，我想要一些用 Javascript 编写的可以在客户端快速运行的东西。它需要做的就是提供布局信息（相对定位等）。我不需要它来绘制画布或使用 SVG 或任何东西，我感兴趣的只是布局。

像 jQuery 或 RaphaelJS 这样的库对我来说很好。我会处理它。我只是在寻找一些东西来加快速度。

另外，如果我能找到一个很好的算法描述来做布局，我会考虑自己写。但我真的不想花太多时间。我现在有一些可以工作的东西，所以在客户端获得它只是一个奖励，而不是必需品。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-05T05:00:50.097

查看 dagre [https://github.com/dagrejs/dagre](https://github.com/dagrejs/dagre)它现在使用 D3 并执行 Graphviz（Sugiyama）的布局。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-04T21:40:25.490

看看 D3（数据驱动文档）

[http://d3js.org/](http://d3js.org/)

他们有一些漂亮的图形布局。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-10-10T14:35:48.407

在商业场景中，[HTML 库的 yFiles](http://www.yworks.com/yfileshtml)应该值得一看。尽管它还带有自己的可视化和编辑功能，但布局也可以独立使用，在撰写本文时，如果您正在寻找纯 Javascript 库，这些很可能是您会发现的最灵活和最复杂的布局算法。当然，今天有一些可用的技术基本上可以将任何库（例如 GraphViz 库）编译成[Javascript“blob”](https://stackoverflow.com/questions/6344318/pure-javascript-graphviz-equivalent)，但它们不提供真正的 API，它们更像是浏览器中的控制台应用程序。

网上有许多[演示](http://live.yworks.com/yfiles-for-html)，展示了您可以对 yFiles 中的布局进行哪些操作。该实现提供了力导向算法、分层（Sugiyama 风格）、正交、树、圆形和纯边缘路由算法的复杂和可配置版本。[此概述](http://docs.yworks.com/yfileshtml/developers-guide/modules.html)显示了不同的可用模块，并且它们可以独立于查看器和编辑器部分使用。

全面披露：我为创建 yFiles 的公司工作，但我不代表我的雇主。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-08T12:51:57.417

[http://sigmajs.org/](http://sigmajs.org/)是一个专门用于图形可视化的 js 库。它使用 Canvas 而不是 SVG。

# heroku - msys-1.0.dll 已过期

> ID：12271688
> 
> 赞同：2
> 
> 时间：2012-09-04T21:37:22.520
> 
> 标签：heroku, git-bash

我之前安装了 Git Bash 用于处理 Cloudbees，在下载 Heroku Toolbelt 后，我​​的 Git Bash 给了我以下错误...

```
msys-1.0.dll is out of date 
```

有什么我需要更新或安装扰乱了 ENV 变量吗？

谢谢，尼克

# scala - 如何在 scala 中将类型作为参数传递？

> ID：12271690
> 
> 赞同：6
> 
> 时间：2012-09-04T21:37:25.877
> 
> 标签：scala, reflection

我很难弄清楚如何在 scala 中存储或传递类型。

我想要实现的是这样的：

```
abstract class Foo( val theType : type )
object Foo{
   case object Foo1 extends Foo(String)
   case object Foo2 extends Foo(Long)     
} 
```

所以在某些时候我可以这样做：

```
theFoo match{
   case String => "Is a string"
   case Long => "Is a long"
} 
```

并且在获得能够投射它的对象时：

```
theFoo.asInstanceOf[Foo1.theType] 
```

这可能吗？如果可能，是一个好的方法吗？我最终想要实现的是为字节流处理编写一个伪模式。例如，如果我有一个架构`Array(Foo1,Foo1,Foo2,Foo3,Foo1)`，我可以解析与该架构抱怨的字节数组，如果在某个时候我有不同的字节流，我可以编写一个新架构`Array(Foo3, Foo4, Foo5)`而无需重新实现解析逻辑。

问候，

* * *

按要求编辑

假设我有一个名为 Command1 的 Array[Byte] = A973928CB3883FB123

该字节中的数据在位置和长度上是固定的。换句话说，我知道位置 1-4 是一个小日期，5-9 是客户的名字等等。

我想要的是编写一个解析函数，它仅将模式作为参数并返回模式中每个参数的实际值。

```
trait Command{

  //This is implemented in every command
  val schema : List[Tuple[String,Int,Int,Type]]  //Position,Size,DataType

  def parse() : List[Tuple[String,Int,Int,Type,Any]] = schema.map(//match using the type)
}

class Command1 extends Command {
  override val schema = List[Tuple("theName",0,10,String),Tuple("myType",10,12,MyType),Tuple("theId",13,20,Long)]
  val theActualName = parse().find(_._1 == "theName")._5.asInstanceOf[String] //I would like to avoid this cast

} 
```

我希望这能澄清我正在尝试做的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T02:22:31.870

您可以使用 Scala 2.10（当它出现时）将类型作为值。在此之前，你能得到的最好的就是类（`classOf[String]`例如），但这会丢失任何类型参数。

即使使用 Scala 2.10，您也会遇到一些严重的限制。例如，请参阅我最近的[一篇博客文章](http://dcsobral.blogspot.com.br/2012/08/json-serialization-with-reflection-in.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T21:52:46.383

您不能将类型存储在变量中。而且您也不能简单地将字节流转换为类型。您可以做的是使用像[protobuf](http://code.google.com/p/protobuf/)这样的序列化库。你的用例到底是什么？你从哪里得到数据？它也是一个 java/scala 应用程序吗？如果您能说出您到底想做什么，那么帮助您可能会更容易。

# sqlite - 如何在 Aloha 编辑器中打开 db.sqlite？

> ID：12271694
> 
> 赞同：0
> 
> 时间：2012-09-04T21:37:33.990
> 
> 标签：sqlite, aloha-editor

我正在使用[Aloha Editor](http://www.aloha-editor.org/)，我可以毫无问题地保存/编辑内容。

编辑器将内容保存在 SQLite 数据库 (db.sqlite) 中。我知道文件在哪里，并且在我向其中添加更多文本时发现它变得越来越大。

但是，当我使用 filezilla 将该文件传输到本地计算机并在记事本中打开时，我只看到：

> ** 此文件包含 SQLite 2.1 数据库 **

我试过用几个程序，但它总是说数据库无法打开。

我尝试过的程序：Sqliteman-1.2.2 和 sqlitebrowser_200_b1_win。

# c++ - 如何在 C++ 中存储 128 位数字？

> ID：12271700
> 
> 赞同：2
> 
> 时间：2012-09-04T21:38:03.807
> 
> 标签：c++

> **可能重复：**
> [在 C++ 中表示 128 位数字](https://stackoverflow.com/questions/1188939/representing-128-bit-numbers-in-c)

我需要一种存储 128 位数字的方法，除了 unsigned long long 之外还有什么可以使用的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T21:40:23.070

您可能想要使用[GNU 多精度算术库](http://gmplib.org/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T21:40:50.093

没有原始类型。
Vlad 的评论是一个很好的存储解决方案，但如果您需要使用该数字进行计算，则需要使用允许对大数进行表示和算术运算的库。

您应该首先查看 GMP：

[http://gmplib.org/](http://gmplib.org/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T21:47:01.077

如果您只需要存储它，那么您可以将它存储在一个字节数组中，如“char num128[16]”。

如果你需要操纵它，你需要使用像 GMP 这样的大数字库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T21:47:11.413

不可能将其存储在一种原始数据类型中，因此我们必须更具创造性。可能最简单的方法是让类保存两个 64 位整数，代表整数的上半部分和下半部分。

# javascript - 如何从 mysql 查询结果 onChange of dropdown 中自动填充文本框值？

> ID：12271705
> 
> 赞同：0
> 
> 时间：2012-09-04T21:38:28.687
> 
> 标签：javascript, jquery, mysql, ajax, onchange

我想要`customer_address`,`customer_city`和`customer_state`自动`customer_zip`填充下拉菜单`onChange`。`customer_name`我环顾四周，但我被难住了。

请帮忙。

```
<form action="" method="post" name="booking_form" class="booking" style="width: auto">
<select name="customer_name" onChange="???????">
<option value="index.php">Click to select your school </option>
<?php

// Make a MySQL Connection

$username="";

$password="";

$database="";

mysql_connect('localhost',$username,$password);

@mysql_select_db($database) or die( "Unable to select database");

$query = "SELECT * FROM table"; 
$result = mysql_query($query) or die(mysql_error());
while($row = mysql_fetch_array($result)){

$id = $row['id'];
$school = $row['customer_name'];
$phone = $row['customer_phone'];
$address = $row['customer_address'];
$city = $row['customer_city'];
$state = $row['customer_state'];
$zip = $row['customer_zip'];    
$notes = $row['customer_notes'];
?>
<option value="<?php echo $school; ?>"><?php echo "$school".", "."$city"; ?></option>
<?php } 

?></select>
<input type="text" name="customer_address">
<input type="text" name="customer_city">
<input type="text" name="customer_state">
<input type="text" name="customer_zip">
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T21:56:37.443

您可以生成一个包含所有 sql 结果的 javascript 对象，如下所示：

```
var schoolInfo = { id1 : {name:"Name 1", address:"address line" ...}, 
id2: {} .... } 
```

然后将每个设置为包含自定义属性“sid”：

```
<option value="school" sid="id1">school, city</option> 
```

对于使用 jQuery 的元素的 onchange 事件处理程序：

```
.change(function(){
     var sid = $(this).attr('sid');
     $("input[name='customer_address']").val(schoolInfo[sid].address);
     $("input[name='customer_city']").val(schoolInfo[sid].city);
     $("input[name='customer_zip']").val(schoolInfo[sid].zip);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-21T00:43:00.920

自从我的原始帖子以来的一些事情......`mysql_`不再安全。此外，将所有内容都放在一个文件中也不好，最好将 sql 和业务逻辑与您的视图、查找`MVC`模式分开。但是，这是快速而肮脏的方法：您可以在这里看到最终结果：http: [//jsfiddle.net/webaholik/kcce6Ls9/](http://jsfiddle.net/webaholik/kcce6Ls9/)

```
<?php
$sql = "SELECT id, 
    customer_name AS name, 
    customer_phone AS phone, 
    customer_address AS address, 
    customer_city AS city, 
    customer_state AS state, 
    customer_zip AS zip, 
    customer_notes AS notes 
    FROM table";
$schoolInfo = $pdo->query($sql)->fetchAll(PDO::FETCH_ASSOC);

$array = array();
foreach ($schoolInfo as $item) {
    $array[$item['id']] = $item;
}
$json = 'var SchoolInfo = ' . json_encode($array) . ';';
?>
<form action="" method="post" name="booking_form" class="booking"
style="width: auto">
<select id="customer_name" name="customer_name">
    <option value="index.php">Click to select your school</option>
<?php foreach($schoolInfo as $row){?>
    <option value="<?php echo $row['id']; ?>"><?php echo $row['name'].", ".$row['city']; ?></option>
<?php } ?>
</select>
<input type="text" name="customer_address">
<input type="text" name="customer_city">
<input type="text" name="customer_state">
<input type="text" name="customer_zip">
</form>
<script>
<?php echo $json;?>

$("#customer_name").change(function(){
    var sid = $(this).val();
    $("input[name='customer_address']").val(SchoolInfo[sid].address);
    $("input[name='customer_city']").val(SchoolInfo[sid].city);
    $("input[name='customer_zip']").val(SchoolInfo[sid].zip);
});
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T21:50:36.387

尝试发布一个 php 脚本并与 Mysql 建立连接，然后返回值。

```
<select name="customer_name">
<option id='selects' value="index.php">Click to select your school </option> 
```

Javascript

```
 $("select[name='customer_name']").change(function(){
            $.post("-YOUR PHP FILE-", customer_name: $(this).val(), function(data){
               schools = data.split(",");
               for(var i in schools){
               $("select[name='customer_name']").append("<option>"+schools[i]+"</option>");
               }
            })
       }) 
```

PHP

```
 <?php
          //You connected and got an array contains your school names($schools)
          $schools = implode(",",$schools); 
          echo $schools;
       ?> 
```

我认为您正在尝试做类似的事情。

# asp.net-mvc-3 - ASP.NET MVC 3 中的路由问题

> ID：12271710
> 
> 赞同：0
> 
> 时间：2012-09-04T21:39:02.993
> 
> 标签：asp.net-mvc-3, asp.net-mvc-routing

我在 global.asax 中定义了以下路线：

```
routes.MapRoute(
               "Agreements2", // Route name
               "Agreements2/{action}/{id}", // URL with parameters
               new { controller = "Agreements", action = "AgreementSummery", id = UrlParameter.Optional } // Parameter defaults
               );
             routes.MapRoute(
                "Agreements", // Route name
                "{controller}/{action}/{id}", // URL with parameters
                new { controller = "Agreements", action = "Index", id = UrlParameter.Optional } // Parameter defaults
                ); 
```

后一条路线工作正常，但我不明白为什么第一条路线不起作用。

Agreements 控制器上的 AgreementSummery 方法定义为：

```
[HttpGet]
        public ActionResult AgreementSummery(int? id)
        {

            AgreementsModel model = new AgreementsModel();
            model.SelectedAgreementID = id.Value;
            return View(model);
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T21:41:46.003

id 没有被定义为可选，它被定义为可以为空。可选的将是如果它被分配了一个值

```
public ActionResult AgreementSummery(int? id = null) 
```

# c - vfork 将值返回给父母和孩子

> ID：12271715
> 
> 赞同：0
> 
> 时间：2012-09-04T21:39:16.403
> 
> 标签：c, linux-kernel, fork, system-calls

```
#include<stdio.h>
#include<sys/types.h>
int main()
{
   pid_t pid;
   if((pid=vfork())<0)
    {
            perror("FORK ERROR");
            exit(1);
    }
    if(pid==0)
    {
            printf("[CHILD] child id : %d\n" , pid);
            _exit(1);
    }
    else
    {
            printf("[PARENT] process id : %d\n" , pid);
            exit(1);
    } 
```

}

上述程序使用 vfork 创建进程。因此，地址空间在父子之间共享。这意味着 pid 变量只有一个副本。但是当我在子进程中打印 pid 变量时，它会给出 0。父进程中的相同 pid 变量会给出子进程的进程 ID。如果 pid 变量只有一个副本，这怎么可能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T22:41:24.127

假设您有一个 real`vfork`不只是根据 实现`fork`，这个程序会调用严重的未定义行为。`printf`在子进程中将修改父进程地址空间中的相同`FILE`对象（`stdout`），可能使其处于对父进程无效的状态。在实践中它可能会起作用，但如果确实如此，那是实现细节的结果，你不能指望不改变。唯一可以安全执行的操作是函数`vfork`族。`_exit``exec`

至于它是*如何*工作的（以问题为模`printf`），`vfork`暂停父进程直到子进程终止，所以当在父进程中`vfork`返回时，子进程已经退出并且新的返回值能够存储在旧的相同位置是储存在孩子身上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T22:36:11.993

父级在子级之后从 vfork() 返回，因此 pid 被“正确”值覆盖。

在内核源代码树中，kernel/fork.c

在函数 do_fork()

```
 do_fork()
 {
 ......
 if (clone_flags & CLONE_VFORK) {
                    p->vfork_done = &vfork;
                    init_completion(&vfork);
                    get_task_struct(p);
            }

            wake_up_new_task(p);

            /* forking complete and child started to run, tell ptracer */
            if (unlikely(trace))
                    ptrace_event(trace, nr);

            if (clone_flags & CLONE_VFORK) {
                    if (!wait_for_vfork_done(p, &vfork))
                            ptrace_event(PTRACE_EVENT_VFORK_DONE, nr);
  .....
     return nr; // pid of the child process. 
```

}

您可以看到对**wait_for_vfork_done**的调用。所以父母在这里等待 vfork 返回。一旦孩子退出，父母就会从这里恢复。子 pid 从这里返回。所以同一个 pid 变量在父子节点中给出不同的值。

# android - 制作双宽屏幕布局

> ID：12271718
> 
> 赞同：2
> 
> 时间：2012-09-04T21:39:24.210
> 
> 标签：android, layout

我需要绘制正好是屏幕宽度两倍的 UI，在 Horizo​​ntalScrollView 中滚动。

伪代码是这样的：

```
<HorizontalScrollView width=device_screen>
  <myUI width=device_screen*2>...</myUI>
</HorizontalScrollView> 
```

我不想为市场上的每个设备设置精确的 px/dp 宽度，但我没有找到一种方法来为任何设备相对于其父设备以声明方式设置视图宽度。

它有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T21:46:27.513

您可以使用 WindowManager 类获取当前显示信息，乘以 2 并将其分配给视图的宽度。像这样的东西：

```
WindowManager wm = getWindowManager();
Display d = wm.getDefaultDisplay();

int view_width = 2*d.getWidth(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T21:55:56.273

[这与这个](https://stackoverflow.com/questions/2595063/android-horizontal-scollview-behave-like-iphone-paging)问题相同。有两个开源库可以实现您需要的最佳答案中包含的内容。它将允许您根据需要添加任意数量的水平页面视图。

但是，如果您不需要视图并且可以使用 Fragments，您应该使用 ViewFliper 等。

# spring-mvc - Spring MVC 资源路径

> ID：12271722
> 
> 赞同：1
> 
> 时间：2012-09-04T21:39:42.197
> 
> 标签：spring-mvc

我的 .JSP 页面的样式设置为：

```
<link rel="stylesheet" type="text/css" href="resources/styles/main.css" /> 
```

它适用于链接：

*   *本地主机/网络应用程序*
*   *本地主机/webapp/目录*

但是当我尝试“ *localhost/webapp/dir/0* ”时，我得到一个 404 错误代码。

**servlet-context.xml**：

```
<mvc:resources mapping="/resources/**" location="/resources/" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T22:39:50.663

您的路径是相对的，因此如果您以不同的“深度”呈现您的 JSP 页面，链接将失败。为避免这种情况，请通过添加前导斜杠来使用绝对 URL 路径。Spring/servlet 容器可以自动为您插入 URL 的上下文部分，因此如果您将其部署为“ROOT”webapp，该应用程序将正常工作。为此，您可以使用`<c:url>`标签，但我更喜欢少写一行 JSP 代码：

```
<link rel="stylesheet" type="text/css" href="${pageContext.request.contextPath}/resources/styles/main.css" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T09:19:11.393

Nickdos 的回答是正确的，但我通常以不同的方式解决这个问题。您可以使用[BASE 标签](http://www.w3schools.com/tags/tag_base.asp)。您在每个页面的 head 部分声明它，所有相关链接 ( `<a href>`) 和资源 ( `<script>, <img>, ...`) 都将基于此 href。所以，使用 EL 你可以做这样的事情（对不起，我现在不能尝试）：

`<base href="${request.scheme}://${request.serverName}:${request.serverPort}${request.contextPath}/" />`

# ios - 当用户点击标签栏时调用什么方法。我需要刷新标签内容

> ID：12271724
> 
> 赞同：1
> 
> 时间：2012-09-04T21:39:53.227
> 
> 标签：ios

我希望我的应用程序在用户点击相应的标签栏时自动刷新标签的内容。加载应用程序并进入内存后，它始终会加载选项卡的现有内容。我在标签上有一张图片，当用户点击它时我想更新/刷新它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T22:23:08.373

那将是`viewDidLoad, viewWillAppear & viewDidAppear`链接到选项卡的视图控制器的 void 方法。

您可能希望在每次这些视图将/确实出现时调用这些视图，而不是在它们最初出现之前第一次加载它们`viewWillAppear`。`viewDidAppear`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T23:57:24.420

看看**UITabBarDelegate**。它有一个方法**tabBar:didSelectItem:**每当用户选择一个特定的标签栏项目时都会调用它。

# java - 读取文本文件

> ID：12271728
> 
> 赞同：0
> 
> 时间：2012-09-04T21:40:26.600
> 
> 标签：java, string, char

我需要有关此代码的帮助。输入存储在一个文本文件中，如下所示：

```
第一：3 6
第二：3 9

```

输出是：

```
First:3 6 

The Maximum number is6

The sum is9

Secon:3 9 

The Maximum number is9

The sum is12 
```

但我想要的输出应该是：

```
 The Maximum number is6
    The sum is12 
```

因此，它仅在第一行应用 Math.max()。并且，它添加了第二行号。

请帮忙。

```
import java.io.*;

public class cape 
{
 public static void main(String args[])
  {
  try{

  FileInputStream fstream = new FileInputStream("C:/Users/PC4599/Desktop/cape.txt"); // Open the text file.
  DataInputStream in = new DataInputStream(fstream);// Get the object of DataInputStream
  BufferedReader br = new BufferedReader(new InputStreamReader(in));

  String MyString;

  //Read File Line By Line
  while ((MyString = br.readLine()) != null) 
  {

  // Print the content on the console
  System.out.println (MyString);

  Character c = new Character(MyString.charAt(6));
  Character c2 = new Character(MyString.charAt(8));

  String s = c.toString();
  String s2 = c2.toString(); 

  int i = Integer.parseInt(s);
  int i2 = Integer.parseInt(s2);

    int sum=i+i2;
  System.out.println("The Maximum number is"+ Math.max(i, i2));
  System.out.println("The sum is"+ sum);

  }
  //Close the input stream
  in.close();
  }catch (Exception e){
   //Catch exception if any
  System.err.println("Error: " + e.getMessage());
  }
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T21:56:44.260

你可以这样做：

```
public static void main(String[] args) throws IOException {
    BufferedReader br = new BufferedReader(new FileReader(new File("test.txt")));
    String[] nums1 = br.readLine().split(":")[1].split(" ");
    String[] nums2 = br.readLine().split(":")[1].split(" ");
    br.close();
    System.out.println("The maximum number is " + Math.max(Integer.parseInt(nums1[0]), Integer.parseInt(nums1[1])));
    System.out.println("The sum is " + (Integer.parseInt(nums2[0]) + Integer.parseInt(nums2[1])));    
} 
```

如果您的文件不止 2 行，那么使用循环使用类似的方法应该不难。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T21:45:33.053

您可以计算行号并为每一行打印正确的内容：

```
int line = 0;
...
if (line == 0) System.out.println("The Maximum number is"+ Math.max(i, i2));
if (line == 1) System.out.println("The sum is"+ sum);
line++; 
```

# types - 好习惯——类型转换

> ID：12271730
> 
> 赞同：1
> 
> 时间：2012-09-04T21:40:37.877
> 
> 标签：types, string-conversion

我的应用程序从文件中读取数据并使用该数据实例化对象。我可以编辑和创建新对象并设置属性。我的问题是属性“日期”及其类型。我不知道我是否应该将 String 日期转换为 Date 类型？我不会在退出时将数据写入文件或数据库。它们仅存在于应用程序生命周期中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T21:50:43.883

就像@PhillipSchmidt 说的那样，如果您不打算对那个日期字符串做太多事情，我就不会费心转换它。

例如，如果您只是检索日期字符串以将其显示给用户，您会将其从 a 转换`String`为 a `Date`（使用适当的错误处理），然后再转换回一个`String`对象。如果您的计划只是按原样显示日期，那将是两次不必要的转换。

但是，如果您计划以特定方式操作该日期或对其进行格式化，则最好将其转换为`Date`对象。有许多非常有用的选项可供`Date`对象使用，允许您对其进行格式化、获取特定属性（年、月、日等）、获取自纪元以来的时间（用于排序等目的）或更改日期（加一个月，减一天等）。

没有“正确”的答案，它主要取决于你想对日期做什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T21:42:45.160

这真的取决于你，但如果你要操纵它和/或经常使用它，`Date`将会有很大帮助。如果它会为您节省代码行数，请继续使用它。如果它只是微不足道的，你可以决定走哪条路。尽管如此，任何一种方式`Date`都是首选——如果你有大量的改变，它可能不值得改变。

# java - Java 小程序清除屏幕

> ID：12271732
> 
> 赞同：2
> 
> 时间：2012-09-04T21:40:45.917
> 
> 标签：java, applet, screen

对于Java Applet，“清屏”的最佳方法是什么？是否有特定的功能，或者您会创建和绘制屏幕大小的白色矩形？

清除整个小程序屏幕的最佳做法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T22:18:13.537

通常清除小程序的最佳做法是绘制背景

```
Dimension d = getSize();
g.setColor(Color.WHITE);
g.fillRect(0, 0, d.width, d.height); 
```

# c# - 验证模拟方法使用特定的 CancellationTokenSouce，该方法也被模拟

> ID：12271734
> 
> 赞同：2
> 
> 时间：2012-09-04T21:40:48.767
> 
> 标签：c#, c#-4.0, moq, cancellationtokensource

我试图验证特定的 CancellationTokenSource 是否用作方法调用中的实际参数。

```
 public void DataVerification(Object sender, EventArgs e)
        {
            _entity.PopulateEntityDataVerificationStage(_view.DataTypeInputs, _view.ColumnNameInputs, _view.InitialRow, _view.FinalRow, _view.CurrencyPair, _view.CsvFilePath, _view.ErrorLogFilePath);

            //...

            CancellationTokenSource tempCsvFileVerificationCancellation = new CancellationTokenSource();

            _source.Source = tempCsvFileVerificationCancellation;

           //Want to verify that TempCsvFileVerificationCancellation.Token is passed into the following method.
            _verify.SetupCsvFileVerification(_entity, tempCsvFileVerificationCancellation.Token);

           //...
        } 
```

以下是我的测试：

```
 [Test]
    public void DataVerification_SetupCsvFileVerification_CorrectInputs()
    {
        Mock<IMainForm> view = new Mock<IMainForm>();

        Mock<IUserInputEntity> entity = new Mock<IUserInputEntity>();

        Mock<ICsvFileVerification> verify = new Mock<ICsvFileVerification>();
        verify.Setup(x => x.SetupCsvFileVerification(It.IsAny<UserInputEntity>(), It.IsAny<CancellationToken>()));

        CancellationTokenSource cts = new CancellationTokenSource();

        Mock<ICancellationTokenSource> source = new Mock<ICancellationTokenSource>();
        source.SetupSet(x => x.Source = It.IsAny<CancellationTokenSource>()).Callback<CancellationTokenSource>(value => cts = value);
        source.SetupGet(x => x.Source).Returns(cts);
        source.SetupGet(x => x.Token).Returns(cts.Token);

        MainPresenter presenter = new MainPresenter(view.Object, entity.Object, verify.Object, source.Object);

        presenter.DataVerification(new object(), new EventArgs());

        verify.Verify(x => x.SetupCsvFileVerification(entity.Object, source.Object.Token));
    } 
```

错误信息如下：

对模拟的预期调用至少一次，但从未执行：x => x.SetupCsvFileVerification(.entity.Object, (Object).source.Object.Token) 未配置任何设置。

source代表的类如下：

```
public interface ICancellationTokenSource
{
    void Cancel();

    CancellationTokenSource Source { get; set; }

    CancellationToken Token { get; }
}

public class CancellationTokenSourceWrapper : ICancellationTokenSource
{
    private CancellationTokenSource _source;

    public CancellationTokenSourceWrapper(CancellationTokenSource source)
    {
        _source = source;
    }

    public CancellationTokenSource Source
    {
        get
        {
            return _source;
        }
        set
        {
            _source = value;
        }
    }

    public CancellationToken Token 
    {
        get
        {
            return Source.Token;
        }
    }

    public void Cancel()
    {
        _source.Cancel();
    }
} 
```

当我逐步完成单元测试时，cts 确实被分配了 TempCsvFileVerificationCancellation 的值。source 中的 Token 属性，返回 Source.Token。我不知道我做错了什么。

任何指针/帮助将不胜感激。

谢谢

**编辑**

[![](../Images/7aa55d9f06d09991efa5b16a30e960a9.png "由 imgur.com 主办")](https://imgur.com/REwi4)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T08:37:10.323

乍一看，它看起来应该可以工作，但实际上你可以尝试：

把verify上的匹配条件*改成It.IsAny()，It.IsAny()*看看到底有没有被调用。- 如果不匹配，请调试代码并查看发生了什么 - 如果匹配，则说明匹配问题

尝试*entity.Object, It.IsAny()* 来查看 UserInputEntity 是否错误。

如果 UserInputEntity 没问题，那么在源设置上放置一个回调。它不需要做任何事情，但允许您在调用 SetupCsvFileVerification 时检查正在使用的值。

**更新**
我想我找到了它，它与我的以下观点之一有关。*您将cts*初始化为一个值。它需要有一个初始值，因为设置

```
source.SetupGet(x => x.Source).Returns(cts); 
source.SetupGet(x => x.Token).Returns(cts.Token); 
```

没有它会失败，因为它会立即评估 cts.Token 。这意味着这将返回测试中定义的 CancellationTokenSource 中的令牌，*而不是*生产代码中定义的令牌（并使用回调存储）。

为确保您使用新的 cts 值，您应该将设置更改为

```
source.SetupGet(x => x.Source).Returns(() => cts);
source.SetupGet(x => x.Token).Returns(() => cts.Token); 
```

这将推迟评估直到使用，即在集合的回调执行之后。

**添加了详细信息**
问题是评估的时间

假设在测试设置中，您创建了一个具有令牌 A 的 cts X。
然后您设置 Source 以返回 cts 和令牌以返回 cts.Token**现在**
评估 这些，告诉获取返回 X 和 A。

 **运行时，cts 被使用回调的一组覆盖（将其称为 Y，令牌为 B），它是验证使用的 B 值，因此失败。

通过将设置更改为使用 lambda，我们告诉他们使用*“当你被调用时 cts 指向的任何值”*，所以现在的序列是

设置 get - 不评估 CTS 或令牌值 调用验证
- 使用回调设置 cts
- 获取源 => 评估，使用新设置的值 (Y)
- 获取令牌 => 评估，使用新设置的值 (B)
验证 => 比较对阵B，传球

**其他想法**

CancellationTokenSource 的存在只是为了支持测试吗？

如果是这样，另一种方法是尝试用**ICancellationTokenProvider**替换它，它将替换*新的 CancellationTokenSource();* 调用您的生产代码。这将允许您更轻松地将特定的 CancellationToken 注入代码中，从而验证 SetupCsvFileVerification()。

**小问题 - 随意忽略**

此外，除非您使用严格的行为，否则设置

```
verify.Setup(x => x.SetupCsvFileVerification(It.IsAny<UserInputEntity>(), 
                                             It.IsAny<CancellationToken>())); 
```

是多余的。它不返回任何内容，因此它不能用作存根，并且稍后您将显式验证调用。

同样，不需要将“cts”初始化为一个值，将其设置为 null 就足够了，因为设置源的回调应该填充它。**

# javascript - Javascript 访问 OAuth 2 的 Location 标头的 URL 片段

> ID：12271736
> 
> 赞同：6
> 
> 时间：2012-09-04T21:40:56.223
> 
> 标签：javascript, oauth, oauth-2.0

OAuth 2.0 隐式授权 (http://tools.ietf.org/html/draft-ietf-oauth-v2-31#section-4.2) 涉及客户端应用程序、浏览器和授权服务器之间的一些有趣的编排。身份验证服务器向浏览器返回 HTTP 302 状态代码，并带有如下所示的 Location 标头：

位置：http://clientapp.com/cb#access_token=2YotnFZFEjr1zCsicMWpAA&state=xyz&token_type=example&expires_in=3600

浏览器在执行重定向之前会丢弃片段，clientapp.com/cb 上的服务应该响应 [from the spec]“能够访问完整重定向 URI 的网页（通常是带有嵌入脚本的 HTML 文档），包括用户代理保留的片段，并提取片段中包含的访问令牌（和其他参数）”。

我已经实现了授权服务器部分，但 JavaScript 经验很少。如何让 JavaScript 访问浏览器在重定向之前剥离的片段？

谢谢，
迈克尔

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-05T09:42:21.400

尝试这样的事情（取自[这篇德国文章](http://it-republik.de/php/artikel/So-funktioniert-OAuth2-5083.html)）：

```
<script>
   var fragmentString = location.hash.substr(1);
   var fragment = {};
   var fragmentItemStrings = fragmentString.split('&');
   for (var i in fragmentItemStrings) {
     var fragmentItem = fragmentItemStrings[i].split('=');
     if (fragmentItem.length !== 2) {
       continue;
     }
     fragment[fragmentItem[0]] = fragmentItem[1];
   }
</script> 
```

然后，您可以使用 引用您的访问令牌`fragment['access_token']`。

# android - 居中单选按钮

> ID：12271737
> 
> 赞同：2
> 
> 时间：2012-09-04T21:41:10.730
> 
> 标签：android, xml, radio-button

我在一个 Radio Group 中有两个 RadioButton，看起来像这样。 ![在此处输入图像描述](../Images/b3b5c7604a1c21509faf3fce101bff3d.png)

```
 <RadioGroup
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:orientation="horizontal" >

                    <RadioButton
                        android:id="@+id/rb_PubAsMe"
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:layout_weight="1"
                        android:checked="true"
                        android:text="Self"
                        android:textColor="#000000" />

                    <RadioButton
                        android:id="@+id/rb_PubAsTeam"
                        android:layout_width="0dp"
                        android:layout_height="wrap_content"
                        android:layout_weight="1"
                        android:text="Team"
                        android:textColor="#000000" />
                </RadioGroup> 
```

默认情况下，android 向左对齐，我想让这些按钮居中。当我尝试将每个按钮的重力设置为中心时，会发生以下情况。

![在此处输入图像描述](../Images/bc806c48f090f7acae69ad8e25af44a9.png)

相同的代码，但将此行添加到每个 RadioButton

```
android:gravity="center" 
```

有没有人遇到过这个问题？如何让按钮与文本一起移动到中心？

```
 |---------(Button)Text---------|---------(Button)Text---------| 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T19:14:50.670

这看起来怎么样？

![居中的单选按钮](../Images/f638230db873ef6becbca4e88cdd0a9d.png)

我使用了一些不可见的 RadioButton“垫片”。（代码如下）

* * *

我还尝试了只有一个“间隔”的各种组合......（我切换到“Light”主题以快速尝试模仿你的配色方案。）

![白色居中按钮](../Images/86e41f9408b9357c86f0c3778e48546a.png)

但在我看来，顶部的图像比底部的图像更集中和平衡。

* * *

这是顶部布局的代码。

```
<RadioGroup xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="center_horizontal"
    android:orientation="horizontal" >

    <RadioButton 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:visibility="invisible" />

    <RadioButton
        android:id="@+id/rb_PubAsMe"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:checked="true"
        android:text="Self" />

    <RadioButton 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:visibility="invisible" />

    <RadioButton
        android:id="@+id/rb_PubAsTeam"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Team" />

    <RadioButton 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:visibility="invisible" />

</RadioGroup> 
```

* * *

如果您更喜欢底部图像，只需删除第一个和最后一个“垫片”并删除`layout_weight`属性。希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T22:01:40.230

我已经修改了你的代码。

```
<RadioGroup xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:orientation="horizontal" >

    <RadioButton
        android:id="@+id/rb_PubAsMe"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:checked="true"
        android:text="Self"
        android:textColor="#000000" />

    <RadioButton
        android:id="@+id/rb_PubAsTeam"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Team"
        android:textColor="#000000" />

</RadioGroup> 
```

它可以按需要工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T22:05:26.510

我能想到的唯一解决方案如下：

```
<LinearLayout 
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:weightSum="2"
    android:orientation="horizontal">

    <RelativeLayout
        android:layout_height="wrap_content"
        android:layout_width="0dp"
        android:layout_weight="1" >
        <RadioButton 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignLeft="true"
            android:layout_centerVertical="true"/>
        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerInParent="true" />
    </RelativeLayout>

    <!-- Repeat the above RelativeLayout --> 
</LinearLayout> 
```

您不能以这种方式将按钮放在 RadioGroup 中，但看起来您希望它看起来像这样。

# c++ - 如果我们在 c++ 中重载构造函数，默认构造函数是否仍然存在？

> ID：12271742
> 
> 赞同：4
> 
> 时间：2012-09-04T21:42:08.703
> 
> 标签：c++, constructor, default-constructor

> **可能重复：**
> [为什么在创建带参数的构造函数时默认的无参数构造函数消失](https://stackoverflow.com/questions/11792207/why-does-the-default-parameterless-constructor-go-away-when-you-create-one-with)

我写了以下程序

```
#include <iostream>
class A {
public:
    A(int i) {std::cout<<"Overloaded constructor"<<std::endl;}
}

int main() {
A obj;
return 0;
} 
```

当我编译程序时，我收到以下错误：

没有匹配的函数来调用 A::A() 候选者是： A::A(int) A::A(const A&)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-04T21:45:18.440

在这种情况下默认构造函数的存在取决于您是否定义它。如果您自己定义另一个构造函数，它将不再被隐式定义。幸运的是，它很容易带回来：

```
A() = default; 
```

请注意，术语“默认构造函数”是指可以在没有任何参数的情况下调用的任何构造函数 (12.1p5)；不仅适用于有时隐式定义的构造函数。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-04T21:47:42.850

不，根据标准默认构造函数在这种情况下不会生成。但是，在 C++11 中，您可以声明您希望使用以下命令生成默认构造函数：

```
class A {
public:
  A() = default;
  A(int);
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T21:52:13.730

*   您可以按照上面的建议编写默认构造函数，然后在 main 函数中编写：

    `A* obj = new A();`

*   例如，您可以在 main 函数中编写

    `A* obj = new A(5);`

*   您可以在构造函数中设置

    ```
    public:
    A(int i=0) 
    { 
        cout << "My own  constructor!"; 
    }; 
    ```

    当您创建该类的对象时，您可以使用它编写

    ```
    `A* obj = new A(5);` 
    ```

    这会将变量 i 更改为具有值，`5`
    或者您可以像初始化对象一样

    ```
    `A* obj = new A();` 
    ```

    这将使变量 i 保留默认值`0`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T02:48:05.773

这是 C++ 约定。当您编写任何用户定义的构造函数时，它假定您不需要隐式的非参数构造函数。这是可以理解的，所以记住它。

# perl - "while( ）“ 而如果（ )" 在 perl 中？

> ID：12271744
> 
> 赞同：3
> 
> 时间：2012-09-04T21:42:19.997
> 
> 标签：perl, file-io

这有效： -

```
while (<CONF>) {
  print $_;
} 
```

但这不是：-

```
if (<CONF>) {
  print $_;
} 
```

并给出有关未初始化值的错误。我在这里想念什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T21:52:08.210

```
while (<CONF>) 
```

被重写为

```
while (defined($_ = <CONF>)) 
```

所以你可能想要

```
if (defined($_ = <CONF>)) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-04T21:54:04.387

只有当它是 while 循环中的唯一条件时，来自文件句柄的 I/O 才会被读取到 $_。这是一个特例。它不会在 if 中读入 $_。看[这里](http://perldoc.perl.org/perltrap.html#Perl-Traps)

# php - 为什么我的代码在尝试阻止 Sql 注入时不起作用？

> ID：12271747
> 
> 赞同：2
> 
> 时间：2012-09-04T21:42:48.827
> 
> 标签：php, html, sql

我是一名年轻的开发人员，试图在我最初没有自己编写代码的网站上防止 Sql 注入。我读过很多关于注射和背后理论的文章，​​但我似乎无法理解这一点。在我把头穿过这台显示器之前，请帮助我。谢谢我的显示器

这是代码：

```
<div id="main">
<div id="header"><? include('site_headergraphics.php'); ?></div>
<table width="800" height="100%" border="0" cellspacing="0" cellpadding="0" 
class="content">
  <tr>
    <td width="800" valign="top">
      <div style="padding:10px;">

  <? if($_SESSION[$_SESSION['SFIX'].'_owner_id'] == ''){ ?>
  <br><br>
        <form name="balance_login" method="post" action="<? if ($_GET['passthru']){    
?>?passthru=<?= $_GET['passthru'] ?><? } else { ?>?<? } ?>">
      <input name="action" type="hidden" value="login" />
      <table width="780" border="0" cellpadding="5" bgcolor="#FFFFFF">
        <tr>
          <td><table width="780" border="0" cellpadding="5" cellspacing="0" 
bgcolor="#F7C30F" class="body_text">
            <tr>
              <td colspan="3" align="left" class="rightmenu"><?= $passmessage ?><?= 
$specialmessage ?></td>
                </tr>
            <tr>
              <td colspan="2" align="left" valign="top" class="rightmenu">To sign on, 
enter your information below.</td>
                  <td width="412" rowspan="5" valign="top"><p>Welcome to Mediterranean 
Wellness!</p>
                  <p>Ready to join us?  You can <a 
href="index.php?section=payment">GET STARTED here. </a></p></td>
            </tr>
            <tr valign="top">
              <td width="121" align="right" class="rightmenu">Username:</td>
                  <td width="217"><input name="username" type="text" class="body_text" 
id="username" /></td>

                  <!--Added in the prevent SQL code injections-->
                  <?php /*?><?php unset($FindUser);       
                        if(isset($_POST['username']))
                        {
                            $_POST['username'] = 
trim($_POST['username']);
                            if(preg_match('/^[a-
zA-Z0-9^$.*+\[\]{,}]{1,32}$/u', $_POST['username']))
                                $FindUser = 
$_POST['username'];
                        }
                         ?><?php */?>
                </tr>
            <tr valign="top">
              <td align="right" class="rightmenu">Password:</td>
              <td><input name="password" type="password" class="body_text" 
id="password" /></td>
                <?php /*?><?php unset($FindPass);
                        if(isset($_POST['password']))
                        {
                            $_POST['password'] = 
trim($_POST['password']);
                            if(preg_match('/^[a-
zA-Z0-9^$.*+\[\]{,}]{1,32}$/u', $_POST['password']))
                                $$FindPass = 
$_POST['password'];
                        }
                         ?><?php */?>
                         <!--End of code added in the prevent SQL code injections-->
            </tr>

            <tr valign="top">
              <td>&nbsp;</td>
                  <td><input name="Submit" type="submit" class="body_text" 
value="Login" />

                   <?php 
                    function make_safe($variable) {
                        $variable = 
mysql_real_escape_string(trim($variable));
                        return $variable;
                    }

                    $username = make_safe($_POST['username']);
                    $password = make_safe($_POST['password']);
                    $check = mysql_query("SELECT Username, 
Password, UserLevel FROM Users WHERE Username = '".$username."' and Password = 
'".$password."'");

                    ?>

                  <br>
                  <br>
                  <a href="?section=forgot">Forgot your username or password?</a></td>
                </tr>
            <tr>
              <td>&nbsp;</td>
                  <td colspan="2">&nbsp;</td>
                </tr>
            </table></td>
          </tr>
        </table>
      </form>
    <? } else {  ?>
    <p class="body_text">You must <a href="?user_action=logout">logout</a> to continue 
to this page</p>
    <? } ?>
      </div></td>
    </tr>
</table>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T21:49:59.703

我认为避免 SQL 注入的最好方法是在查询数据库时使用[准备好的语句。](http://php.net/manual/de/mysqli.quickstart.prepared-statements.php)

此外，您应该清理代码以使其更具可读性，并且使用像 MVC 这样的设计模式会给它一个更好的结构。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-04T21:51:56.083

mysql_* 已被弃用，并且在较新的版本中不起作用 - 您应该检查[PDO](http://php.net/manual/en/book.pdo.php)或[MySQLi](http://www.php.net/manual/en/mysqli.quickstart.prepared-statements.php)。

特别是[bind_param](http://www.php.net/manual/en/mysqli-stmt.bind-param.php) () 函数——这就是你现在应该如何处理用户输入（mysql_real_escape_String() 并不完美）

也就是说，您永远不会在代码中连接到数据库 - 如果没有活动的数据库连接 mysql_real_escape_string() 将无法工作

# javascript - 如何检查一个变量在 JavaScript 中是否同时为 null 和/或未定义

> ID：12271750
> 
> 赞同：38
> 
> 时间：2012-09-04T21:42:49.317
> 
> 标签：javascript, jquery

> **可能重复：**
> [在 JavaScript 中检测未定义的对象属性](https://stackoverflow.com/questions/27509/detecting-an-undefined-object-property-in-javascript)
> [如何确定变量是“未定义”还是“空”](https://stackoverflow.com/questions/2647867/how-to-determine-if-variable-is-undefined-or-null)
> [是否有标准函数来检查 JavaScript 中的空、未定义或空白变量？](https://stackoverflow.com/questions/5515310/is-there-a-standard-function-to-check-for-null-undefined-or-blank-variables-in)

在我的代码中，我的条件看起来像

```
if (variable !== null && variable !== undefined) {
} 
```

但不是分两步进行，即检查它是否未定义且不为空。是否有替代此检查的一步检查。

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-09-04T21:44:01.370

一个变量不能同时是`null`两者`undefined`。但是，您的问题的直接答案是：

```
if (variable != null) 
```

一个`=`，不是两个。

JavaScript 规范中的“抽象相等比较算法”中有两个特殊子句专门用于一个操作数为`null`另一个为的情况`undefined`，结果为`true`for`==`和`false`for `!=`。因此，如果变量的值为`undefined`，则不是`!= null`，如果不是 null ，则显然不是`!= null`。

*现在，完全没有定义*标识符的情况，无论是作为 a`var`或`let`，作为函数参数，还是作为全局上下文的属性，都是不同的。对此类标识符的引用在运行时被视为错误。您可以尝试引用并捕获错误：

```
var isDefined = false;
try {
  (variable);
  isDefined = true;
}
catch (x) {} 
```

然而，我个人认为这是一种有问题的做法。对于根据其他库的存在或不存在或类似情况可能存在或可能存在的全局符号，您可以测试`window`属性（在浏览器 JavaScript 中）：

```
var isJqueryAvailable = window.jQuery != null; 
```

或者

```
var isJqueryAvailable = "jQuery" in window; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-04T21:47:50.963

您可以将其包装在您自己的函数中：

```
function isNullAndUndef(variable) {

    return (variable !== null && variable !== undefined);
} 
```

# iphone - UISegmentedController 中的图标和文本

> ID：12271752
> 
> 赞同：8
> 
> 时间：2012-09-04T21:42:54.413
> 
> 标签：iphone, ios, cocoa-touch

> 一个段只能有一个图像或一个标题；它不能两者兼得。没有默认图像。

Apple 在[UISegmentedController Reference](http://developer.apple.com/library/ios/#documentation/uikit/reference/UISegmentedControl_Class/Reference/UISegmentedControl.html)中这么说。

有没有人想出一个通用的解决方案，让你有一个图标和文本？我有一个有四个段的分段控件。有用于自定义控件外观的选项，但它们似乎只为具有两个段的 UISegmentedControl 设计？

我正在讨论的想法：

1.  放弃四个 UIButtons 的分段控件并自己处理“选定”状态
2.  举起我的手，只需使用文字*或*图标即可。
3.  你的建议...？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-04T22:22:58.763

您可以通过将当前图像绘制到上下文中来创建新图像，绘制所需的文本，然后将该组合图像用作单段图像：

```
UIGraphicsBeginImageContextWithOptions(size, YES, 0);
CGContextRef context = UIGraphicsGetCurrentContext();

// Text first
[myString drawAtPoint:somePoint withFont:font];

// Images upside down so flip them 
CGAffineTransform flipVertical = CGAffineTransformMake(1, 0, 0, -1, 0, size.height);
CGContextConcatCTM(context, flipVertical);
CGContextDrawImage(context, (CGRect){ imagePoint, imageSize }, [myUIimage CGImage]);

UIImage *image = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

return image; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-04T22:22:09.150

您可能想尝试第三方替代方案，例如[STSegmentedControl](https://github.com/SkyTrix/STSegmentedControl "STSegmentedControl")（没有关系，但我已经使用过它，听起来它可以为您提供所需的灵活性，而无需从头开始）。

# jquery - jQuery Mobile 多选点击事件

> ID：12271753
> 
> 赞同：0
> 
> 时间：2012-09-04T21:42:54.833
> 
> 标签：jquery, mobile, jquery-mobile, multi-select

如何在 jQuery Mobile 多选中触发 click 事件？

我正在尝试在选择选项中添加一个关闭按钮，因为我不觉得 (X) 关闭按钮是直截了当的。这个话题在这里讨论（http://stackoverflow.com/questions/10004719/jquery-mobile-multi-select-box），答案是：

> 您可以添加 Close 作为选项，然后在单击时触发对话框关闭方法

不讨论如何触发点击事件。我尝试了以下方法：

```
$("#selectmenu").change(function() {
alert('Changed!!');});

$(document).delegate('.ui-selectmenu-screen', 'click', function () {
alert('changed');
}).delegate('.ui-selectmenu .ui-btn-inner', 'click', function (event) {
alert('changed2');});

$('#selectmenu').on('change', function () {
alert('changed');});

$('#selectmenu').live('change', function () {
alert('changed');});

$('#pageName').on('click', '.ui-selectmenu-list > li', function () {
alert('changed');});

$("#selectmenu").live( "click", function(event, ui) {
alert('changed');});

$("#selectmenu").bind( "click", function(event, ui) {
alert('changed');}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T22:02:06.053

[您将使用此处找到](http://jquerymobile.com/demos/1.1.0-rc.1/docs/forms/selects/methods.html)的 $.selectmenu() 方法并像这样绑定到`change`事件：

**HTML**

```
<div data-role="fieldcontain">
    <select name="selectmenu" id="selectmenu" multiple="multiple">
        <option value="value1">Value 1</option>
        <option value="value2">Value 2</option>
        <option value="value3">Value 3</option>
        <option value="close">Close</option>
    </select>
</div> 
```

**关闭选择菜单**

```
$(document).delegate('#selectmenu', 'change', function(){
    var str = $('#selectmenu option:selected').val(); // Get Value of Option

    if (str == 'close'){
        $('#selectmenu').selectmenu('close');
    }
}); 
```

**添加价值**

```
function addValues($el){
    var total = 0;
    $('option', $el).each(function(){
        var value = parseInt($(this).val());
            value = (isNaN(value-0)) ? 0 : parseInt(value); // Defaults Value to 0 if NaN

        total += value;
    });
    return total;
} 
```

[用于添加值的 JSFiddle](http://jsfiddle.net/sXkF9/)

我希望这有帮助！

# c# - C# MVC 更改启动页面

> ID：12271756
> 
> 赞同：1
> 
> 时间：2012-09-04T21:43:02.117
> 
> 标签：c#, asp.net-mvc, razor, membership-provider

我刚刚创建了我的第一个 C# Razor MVC3 项目。我以前涉足过它，但这是我第一次创建它。

无论如何，我有一个简单的问题。我正在使用使用`MembershipProvider` `AspNetSqlProfileProvider`默认项目构建的那个。

我的问题很简单，在加载之前我在哪里以及如何检查用户是否已登录，`Home/Index.cshtml`以便我可以将他们引导到另一个页面？

如果他们已登录，我想将他们带到客户门户。

如果他们没有登录，我想把他们带到登录屏幕。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T21:47:34.037

这里有几个选项。您可以在您的主页/索引视图中执行此操作（如果这就是您所说的），然后只需使用以下内容：

```
 if(Request.IsAuthenticated())
    return RedirectToAction("login","login"); 
```

或者您可以在应用程序启动方法中执行此操作。不过，我可能只会做第一个。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T21:50:57.013

一种更通用的设置方法将涉及两个步骤：

首先，将 [Authorize] 属性添加到您要保护的操作中：

```
[Authorize]
public ActionResult Index() {

} 
```

这将确保用户已通过身份验证（使用 FormsAuthentication）。

其次，在您的 Web.config 文件中，设置您希望用户在需要登录时重定向到的 URL。

```
<authentication mode="Forms">
    <forms name="cookieName" loginUrl="~/Account/LogOn" timeout="30" domain=".example.com" slidingExpiration="true" />
</authentication> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T21:50:28.777

如果未登录，用户将被重定向到的页面（而不是 url）在`Web.config`下面定义：

```
 <authentication mode="Forms">
      <forms loginUrl="~/Home/GetIn" .... />
    </authentication> 
```

但是，如果登录，则会启动 ASP.NET MVC 路由，该路由在`Global.asax.cs`默认情况下具有以下路由：

```
 routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new {
            controller = "Home",
             action = "Index",
             id = UrlParameter.Optional
        } // Parameter defaults 
```

这意味着如果在 URL 中没有指定控制器或操作，那么它将默认为`Home`and`Index`

# php - jQuery在单选按钮之间使用条件条件进行验证

> ID：12271758
> 
> 赞同：3
> 
> 时间：2012-09-04T21:43:19.200
> 
> 标签：php, jquery, validation, radio-button

我有一个表单，我需要验证两个单选按钮。

一个具有将验证第二个的值，其中第二个的值必须等于或高于第一个。

示例：如果 first 的值为 2，则 second 的值必须为 2 或更高。

首播电台

```
<input name="item1grupoangm" id="item1grupoangm1" type="radio" value="1" />1 &nbsp;
<input name="item1grupoangm" id="item1grupoangm2" type="radio" value="2" />2 &nbsp;
<input name="item1grupoangm" id="item1grupoangm3" type="radio" value="3" />3 
```

第二电台

```
<input name="item1nivelbioseguranca" id="item1nivelbioseguranca1" type="radio" value="1" />1 &nbsp;
<input name="item1nivelbioseguranca" id="item1nivelbioseguranca2" type="radio" value="2" />2 &nbsp;
<input name="item1nivelbioseguranca" id="item1nivelbioseguranca3" type="radio" value="3" />3 &nbsp; 
```

我正在尝试这个：

```
item1nivelbioseguranca: {
    required: true,
    remote: {
        url: "valida_nb_angm.php",
        type: "post",
        data: {
            item1grupoangm: function() {
                return $("input[name='item1grupoangm']:checked").val()
            },
            item1nivelbioseguranca: function() {
                return $("input[name='item1nivelbioseguranca']:checked").val()
            },
        }
    }
}, 
```

valida_nb_angm.php 的代码：

```
 $item1grupoangm = $_POST['item1grupoangm'];
  $item1nivelbioseguranca = $_POST['item1nivelbioseguranca'];

  if ($item1nivelbioseguranca >= $item1grupoangm)
    echo "true";
  else
    echo "false"; 
```

但它不像我想要的那样工作。只有当我提交表单并且如果我更改收音机时，验证才会生效，直到我刷新页面。

我希望它“实时”工作。如果我选择较低的值，则会出现一条消息，如果我选择相等或更高的值，则会验证表单。

对不起我的英语。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T22:34:48.407

首先，添加一个自[定义方法](http://docs.jquery.com/Plugins/Validation/Validator/addMethod)`jQuery.validator`：

```
$.validator.addMethod('item1nivelbioseguranca', function() {
    return +$("input[name='item1nivelbioseguranca']:checked").val() >= +$("input[name='item1grupoangm']:checked").val();
}, 'Nível de bio segurança deve ser maior ou igual ao Radio 1'); 
```

然后将这两个字段设置为`required: true`并将新的自定义方法附加到其中一个：

```
rules: {
    'item1grupoangm': {
        required: true
    },
    'item1nivelbioseguranca': {
        required: true,
        item1nivelbioseguranca: true
    }
} 
```

然后，为了使其实时工作，将`change`处理程序附加到输入并调用[`.valid()`](http://docs.jquery.com/Plugins/Validation/valid)您要验证的输入：

```
$('input[name="item1grupoangm"], input[name="item1nivelbioseguranca"]').change(function() {
    var inputs = $('input[name="item1grupoangm"], input[name="item1nivelbioseguranca"]');
    if (inputs.filter(':checked').length === 2) inputs.valid();
}); 
```

[**演示**](http://jsfiddle.net/ult_combo/n8sA7/3/)

编辑为仅在选择两个无线电后才触发实时验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T22:00:41.993

你有 jQuery 加载吗？如果是，试试这个：

```
$("input[name='item1nivelbioseguranca']").change(function(){
   var value1=$("input[name='item1grupoangm']:checked").val();
   var value2=$("input[name='item1nivelbioseguranca']:checked").val();
   if ( value2 < value1 ) { 
        alert "Please make sure you select a value larger than item1grupoangm!";
        return false;
   }
}); 
```

后面的部分忘记了。。

```
$("input[name='item1grupoangm']").change(function(){
   var value1=$("input[name='item1grupoangm']:checked").val();
   var value2=$("input[name='item1nivelbioseguranca']:checked").val();
   if ( value2 < value1 ) { 
        alert "Remember to change the value for item1nivelbioseguranca so it is larger than this value!";
   }
}); 
```

# c# - StringBuilder.AppendFormat 带有格式中的嵌入选项卡

> ID：12271761
> 
> 赞同：1
> 
> 时间：2012-09-04T21:43:46.733
> 
> 标签：c#, stringbuilder

在过去的 2 个小时里，我一直在谷歌上搜索，要么我失去了与关键字的联系，要么我是唯一一个遇到这个问题的人。

我需要一个制表符分隔的文件

```
 StringBuilder sb = new StringBuilder();
        foreach (Transaction line in lines)
        {
            sb.AppendFormat("{0}\t{1}\t{2}\t{3}\t{4}\r\n", 
                                    line.portfolio_id, line.cp_client_id, line.instrument_id, line.sign_id, line.currency_id);

        }

        using (StreamWriter w = new StreamWriter(filefullpath,true))
        {                
            w.Write(sb.ToString());
            w.Flush();
            w.Close();
        } 
```

上面的代码，产生

```
PROD.3264-PAYMENTS;CUST.406;CASH-PAYMENT-DI;Pay;USD; 
```

我不确定分号是从哪里来的。

请问外面的人可以提供一些启示...

谢谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T22:17:24.397

我引用的其中一个库中有一个扩展名（并且明确放错了位置）。一定有人写过，以避免将制表符分隔的文件发送出去。事实上，在调用 ToString() 方法之前，我的代码中的行、stringbuilder 内容都很好，这意味着几乎不可能调试它。

```
public static string ToString(this StringBuilder sb)
    {
        return sb.ToString().Replace("\t", ";");            
    } 
```

我开始对文档有了新的尊重

所以要注意扩展（我很喜欢扩展，但是当你遇到这样的问题时，它会变得有点困难——只有一个小时）

# dynamic - 如何从支持 bean 获取组件名称以与 p:component 一起使用

> ID：12271762
> 
> 赞同：0
> 
> 时间：2012-09-04T21:43:51.263
> 
> 标签：dynamic, primefaces

我需要根据调用页面的位置更新不同的组件。

```
<p:commandButton id="questionnaire_save_button"
 value="#{shop_msgs['questionnaire.save.button.label']}"                               
 action="#{questionnaireBean.update(questionnaire)}"                              
 update=":#{p:component(#{questionnaireBean.refreshComponentId})}" /> 
```

在我的问卷豆中，我有以下方法：

```
public String getRefreshComponentId() {
refreshComponentId = "";
if(isFromCCRM()) {
 refreshComponentId ="questionnaires_wrapper_panel";
 }else {
   refreshComponentId = "breadcrumbs_panel";
  }
  return refreshComponentId; 
```

}

但是我不断收到语法错误：原因：javax.el.E​​LException: Error Parsing: :#{p:component(#{questionnaireBean.refreshComponentId})} at org.jboss.el.lang.ExpressionBuilder.createNodeInternal(ExpressionBuilder.java :130) at org.jboss.el.lang.ExpressionBuilder.createValueExpression(ExpressionBuilder.java:195) at org.jboss.el.E​​xpressionBuilder.build(ExpressionBuilder.java:151)。 createValueExpression(ExpressionFactoryImpl.java:68) at com.sun.faces.facelets.tag.TagAttributeImpl.getValueExpression(TagAttributeImpl.java:385) ... 117 更多原因：org.jboss.el.parser.ParseException：遇到“{ ”在第 1 行第 17 列。期待以下之一：“。” ...“）”...“[”...“，...>”...“gt” ... "<" ... "lt" ... >=" ... "ge" ... "<=" ... "le" ... "==" ... "eq " ... "!=" ... "ne" ... "&&" ... "和" ... "||" ...“或”...“*”...“+”...“-”...“？” ... "/" ... "div" ... "%" ... "mod" ... "(" .. ...“或”...“*”...“+”...“-”...“？” ... "/" ... "div" ... "%" ... "mod" ... "(" .. ...“或”...“*”...“+”...“-”...“？” ... "/" ... "div" ... "%" ... "mod" ... "(" ..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T07:18:34.093

改变：

```
update=":#{p:component(#{questionnaireBean.refreshComponentId})}" /> 
```

至：

```
update=":#{p:component(questionnaireBean.refreshComponentId)}" 
```

# mysql - 列排序是否会影响 Microsoft SQL Server 2012 中的性能？

> ID：12271766
> 
> 赞同：9
> 
> 时间：2012-09-04T21:44:07.717
> 
> 标签：mysql, sql-server, database, database-design, varchar

我已经读过 varchar 字段应该作为列放在数据库表的末尾 - 至少在 MySQL 中。原因是 varchar 字段具有可变长度，它可能会减慢查询速度。我的问题：这是否适用于 MSSQL 2012？我是否应该将表格设计为在每个数据库行的末尾包含每个文本数据？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-04T21:57:54.913

与数据库设计（实体、属性和关系）、事务设计和查询设计的性能影响相比，表中列的顺序对性能的影响非常小。

要判断差异是否不可忽略，您确实需要设置一些测试并比较结果。

通常，我将主键作为第一列，然后是外键，然后是自然键和经常访问的列。我通常将较长的字符串放在行尾。但这不一定是性能优化，它是我为方便起见而使用的一种风格偏好。

当行中的大量列可以为空并且这些列中的大多数包含 NULL 时，列的顺序会对 SQL Server 中的行大小产生影响。SQL Server（如 Oracle）进行了优化，其中没有为在行的末尾包含 NULL 值的列保留空间。为行中的每一列保留一些空间，直到行中的最后一个非 NULL 值。

从中得出的结论是，如果您有很多可为空的列，则您希望在最常为 NULL 的列之前最常不为 NULL 的列。

注意：请记住，SQL Server 首先根据列是固定长度还是可变长度来对表中的列进行排序。首先存储所有固定长度列，然后存储所有可变长度列。在这些列集（固定和可变）中，列按定义的顺序存储。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T14:17:40.647

在创建索引时，列顺序*确实*很重要。

> 索引键在索引的第一列上排序，然后在前一列的每个值内的下一列上进行子排序。复合索引中的第一列通常称为索引的*前沿*。例如，考虑这个表：
> 
> ```
> c1 c2
> 1 1
> 2 1
> 3 1
> 1 2
> 2 2
> 3 2
> ```
> 
> 如果在列上创建复合索引`(c1, c2)`，则索引将按下表所示排序：
> 
> ```
> c1 c2
> 1 1
> 1 2
> 2 1
> 2 2
> 3 1
> 3 2
> ```
> 
> 如上表所示，数据按`c1`复合索引的第一列 ( ) 排序。在第一列的每个值内，数据在第二列 ( `c2`) 上进一步排序。
> 
> 因此，复合索引中的列顺序是影响索引有效性的重要因素。您可以通过考虑以下内容来看到这一点：
> 
> *   列唯一性
> *   列宽
> *   列数据类型
> 
> `SELECT * FROM t1 WHERE c2 = 12`
> 
> `SELECT * FROM t1 WHERE c2 = 12 AND c1 = 11`
> 
> 上的索引`(c2, c1)`将使这两个查询受益。但是索引 on`(c1, c2)`并不合适，因为它最初会对数据进行排序`c1`，而第一`SELECT`条语句需要对数据进行排序`c2`。

来源：SQL Server 2008 查询性能调优提炼

# iphone - 如何在 Xcode 中为 tableview 添加字幕

> ID：12271769
> 
> 赞同：1
> 
> 时间：2012-09-04T21:44:23.227
> 
> 标签：iphone, xcode, ipad

如何在我的字幕中添加文本？目前我有一个带有名称列表的 NSArray，如何为名称添加字幕？

```
 lodgeList = [[NSArray alloc]initWithObjects:

            @"Abingdon Lodge No. 48",
            @"York Lodge No. 12",
            @"Alberene Lodge No. 277",

             nil]; 
```

继续...

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
static NSString *CellIdentifier = @"Cell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

 if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
}

cell.textLabel.text =[lodgeList objectAtIndex:indexPath.row];

cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;

return cell; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T21:57:17.067

假设您使用的是标准 UITableViewCell，请确保将表格单元格的样式设置为`UITableViewCellStyleSubtitle`，然后通过设置单元格的`detailTextLabel.text`属性来设置字幕文本。

# mysql - 插入已插入另一个表的值

> ID：12271773
> 
> 赞同：0
> 
> 时间：2012-09-04T21:44:57.420
> 
> 标签：mysql

我创建了一个`tickets`表，其中包含所有内容的 ID，因此它们都可以是唯一的。该`tickets`表在插入其他表之前插入新数据。我需要`tickets`一举将表中生成的ID放入其他表中。

这是它的运行方式；

1.  查询插入数据`table1`
2.  触发插入`ref`和自动递增的 ID`tickets`
3.  `ID`来自插入回的门票`table1`以及来自第一个查询的数据。
4.  在此之后还有更多内容，但已排序。

这是我到目前为止所拥有的。

```
delimiter |

CREATE TRIGGER status_ref BEFORE INSERT ON status
FOR EACH ROW BEGIN
 INSERT INTO tickets SET ref = S;

 END;
|

delimiter ; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T21:54:24.730

我建议您重新考虑您的编号方案：现在，您正在双重链接：该`tickets`表通过 引用详细信息，而详细信息表通过其`ref`引用表。`tickets``ID`

这不是一个好主意：考虑稍后对其中一个表的更新，这会使这个双链接不同步：要么你不允许它，这使得第二个数字绝对没有意义，要么你允许它，在这种情况下你最终会得到不同的结果取决于您用于`JOIN`.

您应该选择一个带有一个前导表的编号方案 - 我个人会简单地放弃链接`tickets.ID`回详细信息表的要求。

**编辑**

似乎这是我对该`ref`领域含义的误解 - 从其他评论来看，我并不孤单。

如果该`ref`字段仅包含有关引用**类型**`refID`的信息，您有一个简单的选择：在表上创建一个附加字段，该字段`tickets`存储详细信息表的（自动递增）ID 字段。你需要类似的东西

```
ALTER TABLE tickets ADD COLUMN refID INT NOT NULL;

-- the following only if you not already have it
ALTER TABLE status ADD COLUMN ID INT AUTO_INCREMENT PRIMARY KEY;

CREATE TRIGGER status_ref BEFORE INSERT ON status
FOR EACH ROW BEGIN
 INSERT INTO tickets SET ref = S, refID=NEW.ID;
END; 
```

这会将详细表 ID 存储在`tickets`表中。

# iphone - 为什么视网膜设备上的图标不显示？

> ID：12271774
> 
> 赞同：0
> 
> 时间：2012-09-04T21:45:06.110
> 
> 标签：iphone, retina-display

我有一个 iPhone 应用程序，它显然只在视网膜 iPhone 设备上的主/桌面屏幕上不显示其图标。

我可以在视网膜模拟器以及常规 iPhone 模拟器中看到图标。我也可以在我的 iPad2 设备上看到该图标。

我的 Xcode plist 有两个键/值：

1.  “图标文件”设置为 icon.png
2.  项目 0 设置为 icon.png 的“图标文件”

我在我的项目中包含的单个 icon.png 是一个 144 x 144 png 图像（我想我只是创建一个常规和视网膜 iPhone 都将使用的高分辨率图标图像，而不是通过重复图标带有视网膜版本的文件被附加@2x.png）。

我很好奇为什么这在视网膜 iPhone 设备上不起作用，因为只有一个 icon.png 仍然应该在所有 iPhone 上显示它（例如：视网膜 iPhone 仍然可以显示 72 x 72 图标）。

有人看到我在这里做错了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T21:53:21.030

我不确定它为什么在模拟器中工作，因为我的理解是它不应该。与应用程序中的所有其他图像一样，您应该创建特定于密度的资源并适当地命名它们。

[根据文档](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/IconsImages/IconsImages.html)，您应该有两个图像，它们应该位于项目的根文件夹中：

1.  图标.png (57x57)
2.  图标@2x.png (114x114)

# xml - 定义xml的相等性

> ID：12271777
> 
> 赞同：2
> 
> 时间：2012-09-04T21:45:10.730
> 
> 标签：xml, haskell

有没有办法在 Xml 语句上定义相等性，使得这三个是相同的（忽略空格、参数和标签顺序）？

1：

```
<project>
  <modelVersion>4.0.0</modelVersion>
  <groupId>com</groupId>
  <url>http://maven.apache.org</url>
</project> 
```

2：

```
<project>
  <modelVersion>4.0.0</modelVersion>
  <url>http://maven.apache.org</url>
  <groupId>com</groupId>
</project> 
```

3：

```
<project>
    <modelVersion>4.0.0</modelVersion>
    <url>http://maven.apache.org</url>
    <groupId>com</groupId>
</project> 
```

例如，xml[没有](http://hackage.haskell.org/package/xml-1.3.12)帮助，因为.`Eq`[`Content`](http://hackage.haskell.org/packages/archive/xml/1.3.12/doc/html/Text-XML-Light-Types.html#t%3aContent)

此外，[xml-conduit](http://hackage.haskell.org/package/xml-conduit-1.0.3)也不可用，因为[`Element`](http://hackage.haskell.org/packages/archive/xml-conduit/1.0.3/doc/html/Text-XML.html#t%3aElement)它包含`List`. 它对空格也很敏感。

有许多库可以使用，`xml`包括`HXT`但很难找到可用的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T23:36:37.507

将 XML 解析为类似于以下内容的结构：

```
data Tree = TreeNode (Set Tree) | LeafNode String deriving Eq 
```

这将问题减少到集合和字符串的相等性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T07:02:19.043

大多数相等的定义（例如 XPath deep-equals() 函数）将元素的顺序视为重要的。Saxon 有一个参数化函数 saxon:deep-equals() 但即使这样也没有忽略元素顺序的选项 - 尽管它确实有一个忽略空格的选项，所以你的 (2) 和 (3) 将是相等的。您将需要编写自己的函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T12:45:01.057

[xml](http://hackage.haskell.org/package/xml-1.3.12)中可能没有`Eq`实例，[`Content`](http://hackage.haskell.org/packages/archive/xml/1.3.12/doc/html/Text-XML-Light-Types.html#t%3aContent)因为相等的定义是特定于域的。在您的应用程序中，顺序无关紧要并且没有重复，但其他人可能会使用它们来列出要在某些模拟器上执行的命令。

不过，这不应该阻止你。您可以将实例添加到导入的数据结构。在`Text.XML.Light.Types`我们看到

```
 data CData    = CData {
              cdVerbatim  :: CDataKind,
              cdData      :: String,
              cdLine      :: Maybe Line
            } 
```

所以我们可以定义

```
instance Eq CData where
   CData v d l == CData v' d' l' = and [v==v',d==d',l==l'] 
```

（我认为这比`cd==cd' = cdVerbatim cd == cdVerbatim cd' && ....`xml 的更高版本添加构造函数更难看，但至少会出现编译器错误。）

你可以`Content`为`Element`

```
instance Eq Element where
   Element n as cs l == Element n' as' cs' l' = and 
           [n==n',
            as==as',
            all (`elem` cs) cs',
            all (`elem` cs') cs,
            l==l'] 
```

您可以将空格删除添加到`Eq`您创建的实例中，但不能添加到其他数据类型。如果您需要修改它们，您可以定义自己的`same`函数并使用它而不是`==`在您的`Eq`实例中使用。

我有点担心这`CData`有点棘手，并且可能有不同的方式来表示同一个字符串，所以仅仅检查`cdData`String 可能还不够；您可能需要将所有内容转换`CDdata`为使用相同`CDataKind`或其他内容。另一方面，如果您的 xml 是机器生成的，那么无论如何它可能都是一样的。

# javascript - 如何将对象用作函数和对象？

> ID：12271791
> 
> 赞同：0
> 
> 时间：2012-09-04T21:46:07.670
> 
> 标签：javascript, closures

尝试在 JavaScript 中创建一个“类”，它既可以在类的根部具有函数，也可以在其他子函数中具有函数：

`Validate(word)`- 如果单词被验证，则返回 true 或 false

`Validate.getRule()`- 返回用于验证单词的规则。

这是示例代码：

```
var Validate = function (word)
{
  this.rule = /^[a-m]$/;

  if (word)
  {
     return this.rule.test(word);
  }
  else
  {
     return {
        getRule   :   function()
           { return this.rule;}
            };
  }

}(); 
```

如果您不带参数调用它，这第一次有效，但第二次我收到以下错误：

```
TypeError: object is not a function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T21:51:33.860

你有范围问题。

```
var Validate = function (word)
{
  var that = this;

  this.rule = /^[a-m]$/;
  if (word)
  {
     return this.rule.test(word);
  }
  else
  {
     return {
        getRule   :   function()
           { return that.rule;}
            };
  }

}(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T21:56:52.963

当您直接调用该函数时，`word`参数始终未定义，`this`是全局范围（`window`），因此代码与以下内容相同：

```
var rule = /^[a-m]$/;
var Validate = {
  getRule: function() { return this.rule; }
}; 
```

如果您希望某个东西既可以作为函数又可以作为对象，请声明该函数，然后为其添加属性（因为函数实际上是一个对象）：

```
var Validate = (function(){

  var rule = /^[a-m]$/;

  function validate(word) {
    return rule.test(word);
  }

  validate.getRule = function() { return rule; };

  return validate;

})(); 
```

# qt4 - QT4 创建新插槽

> ID：12271799
> 
> 赞同：0
> 
> 时间：2012-09-04T21:47:00.963
> 
> 标签：qt4, slot

我是 Qt4 的初学者，我想创建一个新插槽，但我不能（有人可以帮助我吗？谢谢 ;-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T22:05:42.813

插槽是普通的 C++ 函数，你只需要创建一个函数并正常调用它。

例如：

```
connect(openAction, SIGNAL(triggered()), this, SLOT(openFile())) 
```

这里的插槽是`openFile()`，这是一个简单的方法。

# python - Python - 计算 csv/tsv 文件中的字段密度

> ID：12271804
> 
> 赞同：0
> 
> 时间：2012-09-04T21:47:35.077
> 
> 标签：python, csv, mapreduce, field, distributed-computing

嗨，假设我有一个这样的制表符分隔文件（每个字段由制表符空格分隔）：

```
Name    ID    Country    GPA
Tom    id1    USA        3.4
Jon    id2    Canada    
Amy           UK         3.0
Kevin  id4    Scotland    
Kris                     3.1 
```

这里 name = 1.0 的密度是 100% ID 的密度是 0.6 是 60%（缺少 2 个字段） Country 的密度是 0.8 GPA 的密度也是 0.6

如何使用python为文件找到这个？此外，我需要一个高效且快速的算法，因为我需要对价值超过 40 GB 的数千个文件执行此操作。Map reduce 代码也有效。
提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T22:07:37.773

```
from collections import Counter
from itertools import izip
import csv

with open(filename, 'rb') as f:
    reader = csv.reader(f, delimiter='\t')
    keys = next(reader)
    counts = Counter()
    for i, row in enumerate(reader):
        counts.update(k for k, v in izip(keys, row) if v)
    line_count = i + 1
    for k in keys:
        print k, 'density:', 1.0 * counts[k] / line_count 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T22:09:00.707

```
f = open(name,'r')
head = f.readline().strip().split('\t')
num = 0
has = [0]*len(head)
for line in f:
    num += 1
    for (i,x) in enumerate(line.strip().split('\t')):
        if x:
            has[i] += 1

print head
print [float(x)/num for x in has] 
```

# javascript - Jshint 与闭包 | 动态属性

> ID：12271811
> 
> 赞同：1
> 
> 时间：2012-09-04T21:48:08.050
> 
> 标签：javascript, jslint, google-closure

这就是我开始发现静态代码分析奇怪的地方。

谷歌关闭给我这个错误

```
// using dot notation
JSC_INEXISTENT_PROPERTY: 
```

当我使用点符号访问动态创建的对象属性时（即没有显式创建属性）

当我使用括号表示法时，错误消失了，但现在 jshint.com 抛出错误：

```
// using bracket notation
['tag'] is better written in dot notation. 
```

我知道这些警告/错误只是编写更好代码的提示......但它们相互矛盾。

这是违规行：

```
vDomTagAdd(bookmark_object.tag); 
```

**有关的**

[外部文件建议](https://stackoverflow.com/questions/12254820/google-closure-advanced-object-property-not-recognized-dynamic-properties)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T22:01:12.307

这是两个不同的警告。Closure 认为这个属性不存在，因为它找不到你创建它的点。我假设您可以以某种方式告诉 Closure 该属性是动态的，并且您确定它存在。

JSHint 只是给你一个风格警告，除非你绝对必须使用括号，否则最好使用点表示法，但它不会试图猜测你的属性是否已定义。

# javascript - 调用 e.preventDefault() 时 javascript 错误“e”未定义

> ID：12271822
> 
> 赞同：2
> 
> 时间：2012-09-04T21:50:02.253
> 
> 标签：javascript, jquery, object, undefined, preventdefault

我没有编写此代码，我无法弄清楚为什么我在第一个时收到以下错误`e.preventDefault()`。我尝试在`.click`事件处理程序中移动该代码，将其传递给`function(e){}`，将其替换为`return false`，声明它`var e = $(this.href)`（不要笑，我正在努力学习），我检查了返回的值`a href`，它是返回正确的`hash`. 视频播放，但运行 IE 调试器时出现此错误。有人可以告诉我如何正确调试和解决这个问题。谢谢

![在此处输入图像描述](../Images/62386e5ec0d43a96d0c1682ff3b95d45.png)

HTML

```
 <a href="#video1" class="blueBtn modal" style="width:150px;"><span>Watch Video <img width="10" height="17" src="images/bluebtn.png"></span></a></div> 
```

Javascript

```
// FANCY BOX
$("a.modal").click(function(){
    var inline=$(this).attr('href');
    $.fancybox({
        'transitionIn'      : 'none',
        'transitionOut'     : 'none',
        'href'              : inline,
        'onComplete'        : function(){
            $(inline+' .flowPlayer').videoPlayer();
            $.fancybox.center(true);
        },
        'onClosed'          : function(){loc();}
    });
    e.preventDefault();         
});

$(".print").click(function(e){
    window.open("print-docs/"+$(this).parent().attr('id')+".html","print","width=1,height=1");
    e.preventDefault();
});

function loc(){
    var location=window.location.href;
    var replaceHash=location.replace(document.location.hash,"");
    window.location.assign(replaceHash);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T21:51:10.883

应该

```
$("a.modal").click(function(e) { // Note the "e" parameter
    // etc
}); 
```

...相反，就像在第二个点击处理程序中一样。看，这两个函数都以[jQuery Event 对象（原生](http://api.jquery.com/category/events/event-object/)[Event 对象](http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-Event)的包装器）作为第一个参数提供。但是你仍然必须让 JavaScript 知道这个参数在你的函数中是如何被引用的。)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-04T21:51:32.713

您需要自己添加`e`参数：

```
$("a.modal").click(function(e){  //<------- right there
    var inline=$(this).attr('href');
    $.fancybox({
        'transitionIn'      : 'none',
        'transitionOut'     : 'none',
        'href'              : inline,
        'onComplete'        : function(){
            $(inline+' .flowPlayer').videoPlayer();
            $.fancybox.center(true);
        },
        'onClosed'          : function(){loc();}
    });
    e.preventDefault();         
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-04T21:52:25.743

你错过了`e`参数：

```
$("a.modal").click(function(e){

   e.preventDefault();  
} 
```

# powershell - 对生成的文件列表执行添加内容

> ID：12271823
> 
> 赞同：1
> 
> 时间：2012-09-04T21:50:05.890
> 
> 标签：powershell

一般来说，我对 PowerShell 和脚本编写非常陌生，但我需要制作一个脚本来搜索目录，找到具有特定扩展名的所有文件（不包括某些目录中的文件），然后使用文本字符串编辑每个文件。

目前，我可以使用以下命令生成我想要的位置中所有文件的列表，不包括我想忽略的目录：

```
Get-ChildItem -path C:\path\location\TEST\* -recurse -Exclude ROB | Where-Object { -not $_.PSIsContainer} | where {$_ -notmatch 'ROB'} | ?{$_.name -match “^*.cpp|h$”} 
```

现在我正在努力的是使用`add-content`cmdlet 将字符串添加到与我上面的查询匹配的每个文件的底部。我已尝试执行以下操作，但它不起作用：

```
Add-Content {Get-ChildItem -path C:\path\location\TEST\* -recurse -Exclude ROB | Where-Object { -not $_.PSIsContainer} | where {$_ -notmatch 'ROB'} | ?{$_.name -match “^*.cpp|h$”}} "TextString" 
```

这是我得到的错误：

```
    + CategoryInfo : MetadataError: (:) [Add-Content], ParameterBindingException
    + FullyQualifiedErrorId : ScriptBlockArgumentNoInput,Microsoft.PowerShell.Commands.AddContentCommand

```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T16:15:53.977

似乎这里的答案是将`get-childitem`命令定义为变量，然后将变量定义为`add-content`中提琴的位置！

所以它看起来像

```
$Query = Get-ChildItem -path C:\path\location\TEST\* -recurse -Exclude ROB | Where-Object { -not $_.PSIsContainer} | where {$_ -notmatch 'ROB'} | ?{$_.name -match “^*.cpp|h$”}
add-content -path $Query "Text" 
```

# java - 如何使静态布局文本显示在画布上？

> ID：12271826
> 
> 赞同：1
> 
> 时间：2012-09-04T21:50:14.547
> 
> 标签：java, android, layout, text, static

我正在为 android 2.3.3 创建一个动态壁纸，我想创建一个带有文本的背景。

听起来很简单，但我不知道如何让文本正确显示。它位于屏幕顶部的某个位置，因为当我设置更高的文本大小时，其中一些会出现在屏幕顶部。这是我的代码：

```
void drawWall(Canvas c)
{
c.save();

c.drawColor(0xff000000);

Bitmap _stein = BitmapFactory.decodeResource(getResources(), R.drawable.stein);

c.drawBitmap(_stein, 0, 0, null);

TextPaint tp = new TextPaint();
tp.setColor(Color.WHITE);
tp.setStyle(Style.FILL);
tp.setTextSize(20);

String message = "Some string here";

StaticLayout myStaticLayout = new StaticLayout(message, tp, c.getWidth(), Layout.Alignment.ALIGN_NORMAL, 1.0f, 0.0f, false);
c.translate(4*mDensity, 4*mDensity); //same thing with or without this

myStaticLayout.draw(c);

c.restore();
} 
```

如果您需要更多信息，请告诉我。

# jquery - 引导轮播。在底部添加分页点

> ID：12271827
> 
> 赞同：12
> 
> 时间：2012-09-04T21:50:20.123
> 
> 标签：jquery, html, css, twitter-bootstrap

如何将分页像点一样添加到现有的轮播中以进行引导。

它需要通过点自动移动。

对此非常陌生，需要一点帮助。

这是我的代码：

[http://jsfiddle.net/mdesignone/qXgCg/](http://jsfiddle.net/mdesignone/qXgCg/)

谢谢：）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-06T23:49:37.880

此功能目前[计划包含在 2.3 里程碑中](https://github.com/twitter/bootstrap/issues/1993)（目前为 2.1）。目前有一个[拉取请求](https://github.com/twitter/bootstrap/pull/2777)已经实现了这个功能，我建议使用它而不是自己滚动，因为一旦该功能被正式集成，它更有可能与最终的 API 保持一致。

插件的源代码可以在[mikaelbr 的 Bootstrap 项目的 fork 中](https://github.com/mikaelbr/bootstrap/blob/1993/js/bootstrap-carousel.js)找到。您将需要**bootstrap-carousel.js**和**carousel.less**。

这是一个演示：

## [JSFiddle](http://jsfiddle.net/mmfansler/fSGnG/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-25T06:46:21.637

使用最新的轮播，您可以使用**carousel-indicators**类：

```
 <ol class="carousel-indicators">
    <li data-target="#myCarousel" data-slide-to="0" class="active"></li>
    <li data-target="#myCarousel" data-slide-to="1"></li>
    <li data-target="#myCarousel" data-slide-to="2"></li>
 </ol> 
```

[http://getbootstrap.com/javascript/#carousel](http://getbootstrap.com/javascript/#carousel)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-04T22:22:00.077

这是一种有点笨拙的方法，因为我也必须为我的网站这样做。更新小提琴：http: [//jsfiddle.net/qXgCg/2/](http://jsfiddle.net/qXgCg/2/)

```
//Javascript   
var slider = $(".carousel-inner") 
.carousel({ interval: 5000 }) 
.bind('slid', function() { 
var index = $(this).find(".active").index(); 
$(this).find("a").removeClass('pager-active').eq(index).addClass('pager-active'); 
}); 

$(".slider-pager a").click(function(e){ 
  var index = $(this).index(); 
  slider.carousel(index); 
  e.preventDefault(); 
}); 

/* css */
.slider-pager        {    margin-top: 10px; }
.slider-pager a    {    display: block; height: 10px; width: 10px; float: left; margin-right: 10px; border-radius: 50%; background: #41af96; font-size: 1px; color: #fff; text-indent: -9999px; }
.slider-pager a.pager-active { background: #2c8571; }

<!--html --->
<div class="slider-pager">
<a href="#main-slider" class="pager-active">0</a>
<a href="#main-slider">1</a>
<a href="#main-slider">2</a>
</div> 
```

# iphone - iPhone PNG加载alpha工件

> ID：12271829
> 
> 赞同：2
> 
> 时间：2012-09-04T21:50:23.670
> 
> 标签：iphone, opengl-es, uiimage, png, alpha

我正在加载 PNG 纹理，并且在具有大量 alpha 透明度的图像上出现奇怪的伪影。

这是源png：http: [//imgur.com/M8Wj3](http://imgur.com/M8Wj3)

这是白色背景下游戏中的纹理：http: [//imgur.com/anliu](http://imgur.com/anliu)

这是我用来加载图像的代码：

```
NSString* pTextureNameString = [NSString stringWithFormat:@"%s", fileNameWithPath];
UIImage* pImage = [UIImage imageNamed:pTextureNameString];

GLubyte* pImageData = (GLubyte*)malloc(pImage.size.width * pImage.size.height * 4);
CGContextRef imageContext = CGBitmapContextCreate(pImageData, pImage.size.width, pImage.size.height, 8, pImage.size.width * 4, CGColorSpaceCreateDeviceRGB(), kCGImageAlphaPremultipliedLast);
CGContextDrawImage(imageContext, CGRectMake(0.0, 0.0, pImage.size.width, pImage.size.height), pImage.CGImage);
CGContextRelease(imageContext);

// Build A Texture From The Data
glGenTextures(1, &m_textureID);                                 // generate opengl texture id
glBindTexture(GL_TEXTURE_2D, m_textureID);          // Bind Our Texture

glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MAG_FILTER,GL_LINEAR); // Linear Filtering
glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MIN_FILTER,GL_LINEAR); // Mipmap Linear Filtering

glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
glTexParameterf(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);

glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, pImage.size.width, pImage.size.height, 0, GL_RGBA, GL_UNSIGNED_BYTE, pImageData); 
```

从 UIImage 中获取 pImageData 后，内存已经混乱，第一个像素是正确的红色，但下一个像素应该是透明的（如第三个像素）

```
red ok    bad pixel ok       bad pixel etc...
FF0000FF  05F04713  00000000 70EF7D15  302635B0 02000000 00000000 
```

我在构建设置中关闭了 png 压缩，但没有任何区别。有人有想法么？alpha/opengl 设置似乎是正确的，因为将此纹理更改为 TGA 或压缩为 PVRTC 会产生正确的图像。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T22:13:03.300

啊哈，在这里找到了答案：[来自具有透明度的 PNG 的 openGL ES 纹理被渲染为奇怪的伪影，让我抓狂！](https://stackoverflow.com/questions/1079884/opengl-es-textures-from-pngs-with-transparency-are-being-rendered-with-weird-art)

添加以下行可以解决问题：

```
CGContextRef imageContext = CGBitmapContextCreate(pImageData, pImage.size.width, pImage.size.height, 8, pImage.size.width * 4, CGColorSpaceCreateDeviceRGB(), kCGImageAlphaPremultipliedLast);

// Set the correct blending copy mode!
CGContextSetBlendMode(imageContext, kCGBlendModeCopy);

CGContextDrawImage(imageContext, CGRectMake(0.0, 0.0, pImage.size.width, pImage.size.height), pImage.CGImage); 
```

# java - JFreeChart XYSplineRenderer 演示

> ID：12271831
> 
> 赞同：2
> 
> 时间：2012-09-04T21:50:27.927
> 
> 标签：java, jfreechart

有人可以指点我一个工作示例 JFreeChart 的 XYSplineRenderer 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T22:33:51.447

虽然我从未见过这个例子，但`XYSplineRendererDemo1.java`它可能在[演示](http://www.jfree.org/jfreechart/samples.html)中找到。所有的演示都包含在[开发者指南中](http://www.jfree.org/jfreechart/devguide.html)^(†</sup>，我强烈推荐。)

如果你想分析你自己的一个例子，请注意它`XYSplineRenderer`是一个`XYLineAndShapeRenderer`，所以从一个匹配开始[`ChartFactory`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/ChartFactory.html)。看起来他们都拿了一个`XYDataset`。

^(†</sup>[*免责声明：不隶属于 Object Refinery Limited；只是一个满意的客户和非常小的贡献者。*])

# latex - 添加超过 18 个数字

> ID：12271834
> 
> 赞同：0
> 
> 时间：2012-09-04T21:50:39.267
> 
> 标签：latex

我是 LaTeX 的新手。我无法在文档类中的 LaTeX 中添加超过 18 个数字而`article`不是`thesis`.

谁能建议我如何添加超过 18 个数字？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T21:56:45.163

对数字的数量没有限制（嗯，除了由于系统的限制，但这个数字要高得多）。

18张照片完全没问题。问题在别处。

# google-cloud-datastore - 将数据存储实体放入 Go 中的接口

> ID：12271836
> 
> 赞同：4
> 
> 时间：2012-09-04T21:50:46.963
> 
> 标签：google-cloud-datastore, go

我有几个具有相同字段 ID 的数据存储类型。是否可以创建一个通用函数来获得这个值？类似的东西？

```
var i interface{}
err = datastore.Get(c, key, &i)
v := reflect.ValueOf(i)
id := v.FieldByName("Id").String() 
```

上面的代码实际上给了我一个“数据存储：无效的实体类型”错误。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-04T22:45:29.657

`var i interface{}`不是任何具体类型。appengine 数据存储区需要一个具体类型来反序列化数据，因为它使用反射。从文档中看起来，缺少字段或与存储数据不同类型的字段也会导致返回错误，因此您无法创建仅定义了 ID 字段的结构。

即使如此，您也可以使用实现 PropertyLoadSaver 接口的自定义类型来解决问题，如下所示：

```
type IdField struct {
  Id string
}

function (f *IdField) Load(ch <-chan Property) error {
  for p := range ch {
    if p.Name == "Id" {
      f.Id = p.Value.(string)
    }
  }
  return nil
}

function (f *IdField) Save(ch chan<- Property) error {
   return fmt.Errorf("Not implemented")
}

var i = &IdField{}
err := datastore.Get(c, key, i)
id := i.Id 
```

它可能不像您希望的那样简洁，但它更加类型安全，不需要反射，并说明了可用于从数据存储中获取部分数据的一般方法。

# sql - 如何使用 Rails 3 finders 方法重写这个 SQL 查询？

> ID：12271839
> 
> 赞同：0
> 
> 时间：2012-09-04T21:50:54.593
> 
> 标签：sql, ruby-on-rails, activerecord

我想重写这个 SQL 查询：

```
SELECT p.id, p.name, p.gender, (p.work_done/p.work_total * 100) r1, (p.work_success/p.work_total * 100) r2, p.StartTime, p.EndTime 
FROM Persons p 
WHERE p.id= params[:id] 
AND p.gender = params[:gender]
ORDER BY r1 desc
GROUP BY p.gender 
```

使用最新的 rails 3 finder 方法（例如`where, select, group, order`....）

我试过这个但它不起作用：

```
@list = Persons.select("id, name, gender, (work_done/work_total * 100) r1, (work_success/work_total * 100) r2, StartTime, EndTime").where("id = ? AND gender = ?", params[:id],  params[:gender]).order("r1 desc").group("name") 
```

知道我在哪里做错了吗？

编辑：以前我用过这个：

```
@list = Persons.find_by_sql("same sql code above").group_by {|t| t.name} 
```

在我看来：

```
<% @list.each do |person, person_list| %> 
```

……

它有效，但是当我尝试使用 finder 方法时，它说：

```
(undefined method `each' for nil:NilClass) 
```

并在查询数据库时给我这个错误：

```
Completed 500 Internal Server Error in 280ms 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T22:02:41.110

这行得通吗？

```
@list = Persons.select("id, name, gender, (work_done/work_total * 100) r1, (work_success/work_total * 100) r2, StartTime, EndTime").where("testrun_id = ? AND gender = ?", params[:id],  params[:gender]).order("r1 desc").group("gender") 
```

# r - ggplot - 按功能输出的方面

> ID：12271844
> 
> 赞同：9
> 
> 时间：2012-09-04T21:51:16.927
> 
> 标签：r, facet, ggplot2

我不确定如何通过对象`data`元素中的数据函数来分面。`ggplot`在下面的玩具示例中，我想做的是这样的：

```
df <- data.frame(x=1:8, y=runif(8), z=8:1)
ggplot(df, aes(x=x, y=y)) + geom_point() + facet_wrap( ~ (z %% 2)) 
```

但这给出了错误：`Error in layout_base(data, vars, drop = drop) : At least one layer must contain all variables used for facetting`.

我可以通过转换数据框来达到预期的效果：

```
ggplot(transform(df, z=z%%2), aes(x=x, y=y)) + geom_point() + facet_wrap( ~ z) 
```

但通常最好不要使用这样的转换，例如，如果我已经获得了一个`ggplot`对象并且我想向它添加一些特别的刻面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T22:01:00.573

这对我来说听起来很熟悉，但我从未设法修复它 - 我认为方面变量处理不如美学变量处理强大。

满足您的根本要求 - 对现有的 ggplot 进行临时方面；请注意，您可以批量替换现有`R`ggplot 的（主）数据集 - 例如

```
myplot %+% transform(myplot$data, z=z%%2) 
```

# excel - 从Excel中的函数返回单元格作为变量

> ID：12271845
> 
> 赞同：1
> 
> 时间：2012-09-04T21:51:26.870
> 
> 标签：excel, excel-formula

我的女朋友需要用 Excel 公式做一些相当复杂的事情，我无法为她找到答案。

她想找到一系列单元格的最小值，然后在识别出该单元格后，使用其右侧和左侧的 5 个值来计算所有这些值的平均值。

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T22:58:54.293

我有一个公式可以完成您在问题中概述的内容。

假设我们正在寻找列的最小值 (F:F)，则以下工作：

```
=AVERAGE(OFFSET($F1,MATCH(MIN($F:$F),$F:$F,FALSE)-1,1,1,5),OFFSET($F1,MATCH(MIN($F:$F),$F:$F,FALSE)-1,-1,1,-5)) 
```

字母 F 可以在您要使用的任何列的公式中替换。

它的工作原理是它找到`Min`列的 fins ，然后使用它`match`来查找行号，然后`offset`s 选择右侧的 5 个单元格（以及第二个重复的偏移量，并在左侧反转执行相同的操作）。最后，这两个范围都用作`average`公式的输入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T23:02:34.420

对于任何单列或单行（需要找到 MIN 值），您可以使用此公式

`=(SUM(OFFSET(INDEX(Range,MATCH(MIN(Range),Range,0)),0,-5,1,11))-MIN(Range))/10`

其中 Range 是单列/行

这从平均值中排除了 MIN 值，并且假设两边总是有 5 个单元格应该可以工作（例如，MIN 不能在 A 到 E 列中）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T15:05:17.363

我只是因为你的女朋友才回答这个问题。

说你有以下

![在此处输入图像描述](../Images/50a99fa59bfc4a885495e6de67402244.png)

F 列是您要评估最小值的列。
在这种情况下，F6 是最小值。您将使用以下代码创建一个宏：

```
Sub test()

Dim val1 As String
Dim val2 As Long

val1 = WorksheetFunction.min(Range("f1:f10"))

For x = 1 To 10
    If Range("f" & x).Value = val1 Then
        val2 = WorksheetFunction.Average(Range("a" & x & ":k" & x))
        Range("m1").Value = val2
    Else
    End If
Next x

End Sub 
```

宏将在 F 列中找到最小值，然后返回单元格 M1 中行中 11 个值的平均值。

# windows - 使用 WPP 跟踪多个 ETW 提供程序

> ID：12271850
> 
> 赞同：4
> 
> 时间：2012-09-04T21:51:55.230
> 
> 标签：windows, winapi, trace, wdk, etw

我正在尝试通过 WPP 仪器使用“Windows 事件跟踪”。根据[Windows 驱动程序中的软件跟踪入门中的](http://www.google.co.il/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CB4QFjAA&url=http://download.microsoft.com/download/5/d/6/5d6eaf2b-7ddf-476b-93dc-7cf0072878e6/WPP_Intro.doc&ei=enVGULjhPNHNsgau34CQAg&usg=AFQjCNG5xOTtXcc6FGUL2kB75QfmvQ0FvA)文档，可以从单个驱动程序向多个提供程序发出跟踪，但我没有看到这样做的示例：

> 驱动程序可以指定多个控件 GUID。每个控件 GUID 标识一个唯一的提供程序。例如，如果驱动程序定义了两个控制 GUID，一个用于共享库，一个用于驱动程序，则库和驱动程序可以作为两个不同的提供程序启用。可以为库或驱动程序或两者启用跟踪。

我试图创建两个头文件，每个头文件都`WPP_CONTROL_GUIDS`使用不同的 guid。然后我包含来自 c/cpp 文件的不同头文件，我希望这些头文件向不同的提供者发出跟踪。但似乎主文件中的定义覆盖了这个分隔，所有的跟踪都到达了它使用的提供者......

有什么建议吗？有样品吗？谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T18:31:23.923

我现在避免像瘟疫一样进行 WPP 跟踪，但跟踪模板提供了如何执行此操作的示例。您应该在某个 TMH 文件中的某处看到此注释：

```
// template C:\WinDDK\7600.16385.1\bin\wppconfig\rev1\control.tpl
//
//     Defines a set of macro that expand control model specified
//     with WPP_CONTROL_GUIDS (example shown below)
//     into an enum of trace levels and required structures that
//     contain the mask of levels, logger handle and some information
//     required for registration.
//

///////////////////////////////////////////////////////////////////////////////////
//
// #define WPP_CONTROL_GUIDS \
//     WPP_DEFINE_CONTROL_GUID(Regular,(81b20fea,73a8,4b62,95bc,354477c97a6f), \
//       WPP_DEFINE_BIT(Error)      \
//       WPP_DEFINE_BIT(Unusual)    \
//       WPP_DEFINE_BIT(Noise)      \
//    )        \
//    WPP_DEFINE_CONTROL_GUID(HiFreq,(91b20fea,73a8,4b62,95bc,354477c97a6f), \
//       WPP_DEFINE_BIT(Entry)      \
//       WPP_DEFINE_BIT(Exit)       \
//       WPP_DEFINE_BIT(ApiCalls)   \
//       WPP_DEFINE_BIT(RandomJunk) \
//       WPP_DEFINE_BIT(LovePoem)   \
//    ) 
```

因此，您应该在同一个 WPP_CONTROL_GUIDS 宏中定义两个 GUID。

# iphone - 旋转视图时修复奇怪的工件

> ID：12271851
> 
> 赞同：0
> 
> 时间：2012-09-04T21:51:56.323
> 
> 标签：iphone, ios, uiviewcontroller, screen-rotation

我有一个 99.9% 肖像的应用程序。然而，有一个屏幕允许横向显示，以便我们的用户在撰写帖子时可以拥有更多的空间。当用户决定在横向模式下从我们的编辑屏幕返回到只能以纵向模式显示的上一个屏幕时，我的问题就会发生，我们会切断导航栏：

![时髦的导航栏](../Images/f4059b903175b9d4df4f4246f98d076b.png)

有没有人见过这个或者对如何解决这个问题有任何想法？

**编辑**不确定它是否明显，但发生的情况是可用于绘制 NavigationBar 的区域被截断到与视图处于横向模式时相同的高度，并且黑条是 Portrait NavigationBar 之间的差异height 和 Landscape NavigationBar 的高度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T22:10:41.190

如果您正在使用：

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration 
```

那么原始视图（风景）仍然存在。

使用：

```
- (void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation 
```

调整您的视图界面。

这都是猜测，因为您需要提供有关您正在做什么的更多信息，这就是造成这种情况的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T22:17:45.253

使用下面的代码在旋转之前转储 self.view 的超级视图和子视图，然后在旋转完成后，然后在旋转回纵向完成后再次转储。其中一个视图与其原始来源不匹配，这将是您的问题视图。原点的变化很可能是由于没有在顶部/左侧启用支柱。

这发生在我身上很多次，我写了这个 UIView 类别来转储超级和子视图。

用法：

```
[UIView dumpSuperviews:self.view msg:@"Original superviews"];
[UIView dumpSubviews:self.view msg:@"Original subviews"]; 
```

代码：

```
#import <QuartzCore/QuartzCore.h>

#import "UIView+Utilities.h"

@interface UIView (Utilities_Private)

+ (void)appendView:(UIView *)v toStr:(NSMutableString *)str;

@end

@implementation UIView (Utilities_Private)

+ (void)appendView:(UIView *)a toStr:(NSMutableString *)str
{
    [str appendFormat:@"  %@: frame=%@ bounds=%@ layerFrame=%@ tag=%d userInteraction=%d alpha=%f hidden=%d\n", 
        NSStringFromClass([a class]),
        NSStringFromCGRect(a.frame),
        NSStringFromCGRect(a.bounds),
        NSStringFromCGRect(a.layer.frame),
        a.tag, 
        a.userInteractionEnabled,
        a.alpha,
        a.isHidden
        ];
}

@end

@implementation UIView (Utilities)

+ (void)dumpSuperviews:(UIView *)v msg:(NSString *)msg
{
    NSMutableString *str = [NSMutableString stringWithCapacity:256];

    while(v) {
        [self appendView:v toStr:str];
        v = v.superview;
    }
    [str appendString:@"\n"];

    NSLog(@"%@:\n%@", msg, str);
}

+ (void)dumpSubviews:(UIView *)v msg:(NSString *)msg
{
    NSMutableString *str = [NSMutableString stringWithCapacity:256];

    if(v) [self appendView:v toStr:str];
    for(UIView *a in v.subviews) {
        [self appendView:a toStr:str];
    }
    [str appendString:@"\n"];

    NSLog(@"%@:\n%@", msg, str);
}

@end 
```

# macos - 如何在 SceneKit 中获取纹理的文件名

> ID：12271852
> 
> 赞同：0
> 
> 时间：2012-09-04T21:51:58.773
> 
> 标签：macos, collada, scenekit

我想在 MacOS 上使用 SceneKit 来加载 Collada 文件并获取场景节点属性以将它们与我自己的场景图一起使用。

我可以轻松访问顶点、法线、变换矩阵、材质属性等等——除了纹理文件名之外的所有内容。

我希望纹理的文件名存储在 SCNMaterialProperty 类的实例中。从文档中：

> SCNMaterialProperty 类封装了一个纹理和一组属性，这些属性指定了如何将纹理应用到对象上。

但我只能得到一个代表纹理的 NSImage，而不是源文件名本身。

它必须在某处 - 在 XCode 的 collada 查看器的检查器中，文件名也会显示（以及来自 SCNMaterialProperty 的属性）：

![在此处输入图像描述](../Images/2d11f8eb327a20fc037ee522e16a301d.png)

如何在 SceneKit 对象图中访问纹理的文件名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T06:37:33.103

它没有 API。如果您纯粹出于调试目的对它感兴趣，那么破解它并不难：底层 SCNMaterialProperty 是 C3DImageRef，您可以使用`-[SCNMaterialProperty getC3DImageRef]`. 它的布局类似于：

```
struct __C3DImage {
  void *isa;
  uint32_t junk;
  uint32_t retainCount;
  NSDictionary *entityProperties;  // e.g. contains the kIDKey.  Nothing else for a material property.
  NSURL *path;
  ...
} 
```

因此，通过一些投射和偏移，您可以抓住路径。请注意，由于指针大小的变化，32 位和 64 位的偏移量会发生变化。

所有这些信息都可以从[类转储](http://stevenygard.com/projects/class-dump/)中获得（并且可以生成包含确切结构等的标头）。不过，这一切都非常脆弱，所以永远不要发布使用它的代码。提交错误报告，请求添加 API 以正确获取此信息。

# html - 带有动态页面的 HTML5 AppCache

> ID：12271858
> 
> 赞同：1
> 
> 时间：2012-09-04T21:52:14.670
> 
> 标签：html, offline-caching, application-cache

我有一个名为 pages.php 的 php 文件，它返回由查询参数指定的页面。用户从下拉列表中选择一个数字，然后将 ajax 请求发送到 pages.php，该数字如下：

```
pages.php?page=1 
```

页数是动态的。我正在使用 HTML5 的 AppCache 来缓存索引页面，但是如何让浏览器缓存 ajax 请求。将 pages.php 添加到清单文件中只会缓存没有页面的响应。但它会缓存任何带有页码的请求。我想在清单文件中做这样的事情：

```
CACHE:
pages.php?page=* 
```

我正在尝试获取它，以便用户在离线时可以访问他们之前查看过的页面。AppCache 似乎不适合使网站离线（仅使静态资源加载更快），我应该使用其他一些功能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T05:29:48.910

我花了很长时间弄清楚如何缓存由这样的 URI 方案访问的动态页面：

```
domain.com/admin/page/1
domain.com/admin/page/2
domain.com/admin/page/3 
```

现在的问题是 appcache 不会缓存每个单独的 admin/page/... 除非您访问它。

我所做的是使用离线页面来表示您可能希望允许用户离线访问的这些页面。

离线页面中的 JS 查找 URI 并抓取它以找出它应该显示的页面并从 localStorage 中获取数据个别页面。

我对其他解决方案持开放态度，但这就是我能想到的让一堆单独的页面脱机而只访问单个管理页面的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-23T10:00:59.633

我通过使用本地存储解决了这个问题（我使用了 jquery localstorage 插件来帮助解决这个问题）。

过程是

1.  当您通常从锚点或重定向中引用时，在页面内部，而是调用一个函数为您重定向。该函数将参数从url存储到localstorage，然后只重定向到不带参数的url。
2.  在接收目标页面上。从本地存储中获取参数。

重定向代码

```
function redirectTo(url) {
    if (url.indexOf('?') === -1) {
        document.location = url;
    } else {
        var params = url.split('?')[1];
        $.localStorage.set("pageparams", params);
        document.location = url.split('?')[0];
    };
} 
```

目标页面代码

```
var myParams = GetPageParamsAsJson();
var page = myParams.page;

function GetPageParamsAsJson() {
    return convertUrlParamsToJson($.localStorage.get('pageparams'));
}

function convertUrlParamsToJson(params) {
    if (params) {
        var json = '{"' + decodeURI(params).replace(/"/g, '\\"').replace(/&/g, '","').replace(/=/g, '":"') + '"}';
        return JSON.parse(json);
    }
    return [];
} 
```

# c# - 如何将数据从 web 服务绑定到 ASP.NET 中的 DevExpress gridview 并对数据使用 CRUD 操作？

> ID：12271865
> 
> 赞同：0
> 
> 时间：2012-09-04T21:53:01.753
> 
> 标签：c#, asp.net, web-services, web, devexpress

我在使用 DevExpress 控件的 ASP.NET 项目中使用 SOAP Web 服务。我要做的是从 web 服务获取数据并将其绑定到 DevExpress 网格控件。

使用网络服务时，我得到了一些`IEnumerable`容器。是否可以在 web 服务和 Devexpress 网格控件之间创建某种动态关系？我希望能够在 IEnumerable 容器中的每条记录上使用 CRUD 操作，这些操作将在用户输入 [POST] 后返回到 web 服务

在 web 服务和 gridcontrol [GET 和 POST form the gridview] 之间建立桥梁的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T15:33:31.863

我的建议是编写一个辅助类来为您处理 CRUD 操作，与 DevExpress 控件分开。

通过让中间类处理与数据源之间的 CRUD 操作，将显示逻辑与业务逻辑（ [MVC 风格](http://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93controller)）分开总是一个好主意。这使我们能够在一个位置对数据源（在您的情况下为 Web 服务）进行更改，而不会破坏任何其他代码。我们甚至可以将数据源从 Web 服务更改为 SQL Server（或 MySQL 或其他任何东西），而无需调整前端。

至于绑定到 DevExpress 控件，您将需要单独处理 CRUD 行事件 - 它们有一些很好的[示例](http://demos.devexpress.com/ASPxGridViewDemos/)和非常好的[文档](http://documentation.devexpress.com/#AspNet/CustomDocument5823)。您可能应该阅读一般的数据绑定以获得更高级的选项，但对于来自 ASP.NET 页面上的 DevExpress 控件的 CRUD 事件，我们通常会执行以下操作（在代码隐藏中）：

1.  实例化表示数据记录的对象（如果它是现有记录，则使用我们的帮助程序类从数据源中检索它）：`var Record = new Record();`或`var Record = RecordHelper.GetWithId(PrimaryKeyValue);`
2.  根据需要对该对象进行更改：`Record.Name = "New Name";`
3.  将对象传递回我们的帮助类中的方法，该方法处理对数据源的必要调整：`RecordHelper.Insert(Record);`或`RecordHelper.Update(Record);`
4.  更新页面上的网格（根据需要）

您可以编写某种子类来为您处理绑定和更新，或者开始阅读[Entity Framework](http://msdn.microsoft.com/en-us/library/bb399572.aspx)之类的方法，但我建议您从上面开始，以便您了解 DevExpress 控件和数据库之间的交互。

* * *

ps[这篇 MSDN 文章](http://msdn.microsoft.com/en-us/library/1se6685s%28v=vs.100%29)是开始学习一些非常简单但功能强大的 2 路数据绑定的好地方。这可能是您首先要寻找的；如果您碰巧使用的是 .NET 4.5，请注意它提供了强类型数据绑定，这让生活变得更加轻松。

# entity-framework - 从数据库获取提供者信息时出错

> ID：12271867
> 
> 赞同：10
> 
> 时间：2012-09-04T21:53:07.700
> 
> 标签：entity-framework, connection-string, entity-framework-migrations

得到错误：

> System.Data.ProviderIncompatibleException：从数据库获取提供者信息时出错。这可能是由 Entity Framework 使用不正确的连接字符串引起的。
> 检查内部异常以获取详细信息并确保连接字符串正确。
> ---> System.Data.ProviderIncompatibleException：提供程序未返回 ProviderManifestToken 字符串。
> ---> System.Data.SqlClient.SqlException：建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：SQL 网络接口，错误：25 - 连接字符串无效）

尝试执行操作时出现相同的错误`Add-Migration`

这是我的连接字符串，我需要访问我的本地 SQL 服务器而不是 SQLEXPRESS。

```
 <connectionStrings>
    <add name="ReaderInsightDbContext" 
         connectionString="data source=localhost\MSSQLSERVER;
                         initial catalog=ReaderInsight;Integrated Security=True" 
         providerName="System.Data.SqlClient" />
  </connectionStrings> 
```

我的数据库位于：

```
C:\Program Files\Microsoft SQL Server\MSSQL10.MSSQLSERVER\MSSQL\DATA 
```

所以我的实例是 MSSQLSERVER。不知道发生了什么。它首先工作得很好，但是在我更改我的代码以使用 UOW 模式之后，这种情况正在发生。我还从 EF 4.3 升级到了 EF5。同样的问题。

我在连接字符串中尝试了许多数据源的变体，都没有工作，这里有一些例子：

*   本地主机\MSSQLSERVER
*   .\MSSQLSERVER
*   //本地主机\MSSQLSERVER
*   （本地）\MSSQLSERVER
*   127.0.0.1\MSSQLSERVER

如果我这样做 .\SQLEXPRESS 它可以工作。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-05T14:54:02.343

设法解决了。

底线手动删除迁移文件会导致问题。

确保我的连接字符串如下所示：

```
 <connectionStrings>
    <add name="ReaderInsightDbContext" 
     connectionString=
     "Data Source=(local);Initial Catalog=ReaderInsight;Integrated Security=True"
     providerName="System.Data.SqlClient" />
  </connectionStrings> 
```

执行了一个`Update-Database -TargetMigration:$InitialDatabase`不起作用的操作，因为它说仍有待处理的更改。

所以我表演了

```
System.Data.Entity.Database.SetInitializer(     
  new System.Data
            .Entity
            .DropCreateDatabaseIfModelChanges<ReaderInsightDbContext>()); 
```

在 global.asax 文件中。

注释掉它，所以它不会再次运行。然后我做了一个 Add-Migration Init，它为整个数据库重新创建了脚本，当我运行 Update-Database 时，它​​就像一个魅力。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-14T22:02:01.610

我通过在我的实体 dll 项目（具有 app.config 文件）的解决方案中设置启动项目来解决它。我确实将包管理器控制台窗口中的“默认项目”设置为正确的实体 dll 项目，但这不起作用。详情

[带有 SQL Server 2012 的实体框架 6 提供 System.Data.Entity.Core.ProviderIncompatibleException](https://stackoverflow.com/questions/18583980/entity-framework-6-with-sql-server-2012-gives-) system-data-entity-core-providerin

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T21:28:21.610

当我更改 SQL Server 无法启动的密码时，我遇到了这个问题。检查:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-22T09:27:05.540

检查您在连接字符串中使用的 SQL Server 是否已启动。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-20T17:59:49.003

前几天我遇到了同样的问题。原因是我的 MSSQL 服务器版本。我尝试使用 VS2010 和 SQL SERVER 2008，然后它不起作用。它适用于 VS2010 附带的 SQL Express（它没有启动）但不适用于 SQL SERVER。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-05T13:02:08.097

看到这个帖子：

[MVC3 音乐商店教程连接字符串问题](https://stackoverflow.com/questions/12167363/mvc3-music-store-tutorial-connection-string-issue)

看起来您缺少 MARS 设置。

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2014-03-01T00:04:09.097

我将它与 VS 2010 一起使用，它有效：

1.  添加用户实例=true
2.  使用数据源 .\SQLEXPRESS

# shopify - Shopify 客户元字段和 Updated_At 字段

> ID：12271868
> 
> 赞同：0
> 
> 时间：2012-09-04T21:53:19.057
> 
> 标签：shopify

当客户对象的元字段被更新时，相应的客户对象 updated_at 会被修改吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T23:17:10.213

不。

在更新元 updated_at 时，不会修改客户 updated_at。

# linux - CUPS 旁路接口

> ID：12271871
> 
> 赞同：4
> 
> 时间：2012-09-04T21:53:34.517
> 
> 标签：linux, printing, cups

我有一台服务器，在该服务器上，我将几台串行打印机设置为杯子中的原始队列。在每一个上，我都安装了接口脚本来执行一些简单的输出操作，并使用在服务器上运行的应用程序来处理 IPC，并且喜欢直接连接到打印机并写入它们，这与 cups 认为的不太合适他完全控制打印机设备。那里的一切似乎都在工作。

在服务器上输入另一个应用程序，虽然它确实通过了 cups（在通过自己的打印假脱机程序进行假脱机之后），但似乎正在将特定于打印机的转义码注入到它打印出来的文件中。换句话说，此应用程序产生的打印不仅仅是纯文本字符流，而是包含打印机要解释的二进制控制代码。

我遇到的问题是，当 cups 从第二个应用程序接收此类文件时，它似乎绕过了我的接口。我通过设置两个几乎相同的打印文件对此进行了测试。第一个包含纯文本“你好，世界！” 后跟换行符；第二个包含其中一台打印机的一些转义码，然后是“Hello，world！” 和换行符。然后我在我的打印机界面上添加了一条“sleep 5”行，这样打印时会有明显的延迟。

当我使用 lp 打印第一个文件时，五秒钟内什么也没发生，之后打印机恢复活力并写下“Hello, world!”。但是，当我使用完全相同的`lp`命令打印第二个文件时，它立即打印出“Hello, world!” 不睡觉。我还注意到，我可以使用 " `-o raw`" 选项`lp`来强制对第一个文件执行相同的行为（立即将其打印出来，没有 5 秒的延迟）。

我的猜测是，cups 正在查看正在打印的实际数据并试图确定其类型，当它在数据中看到打印机转义码时，它决定这是“原始”打印并绕过接口。这不是我所期望的行为，因为我首先将打印机设置为“原始”队列并假设这意味着杯子只会传递通过接口发送给它的任何东西；尽管如此，这是我看到的行为。

我的问题是：**有没有办法向 cups 发送一个选项（除了`-o raw`，它似乎也绕过了界面）告诉他不要检测接收到的打印数据的类型并继续并将其发送到界面脚本?** 或者，**有没有办法指定传入数据的格式（例如，告诉 cups 它正在接收的是“纯文本”，即使它包含转义码），这样 cups 就不会查看它并简单地将其传递给界面？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T23:01:17.433

## 您拥有的打印队列*不是*“原始”队列！

**首先**，您似乎不知道 CUPS 用语中的*原始打印队列*是什么：原始队列是与...无关的队列。

*   ...既不是*接口脚本*（与位于 中的队列本身同名的脚本`/etc/cups/interfaces/`），

*   ...也不是*PostScript 打印机描述*(PPD) 文件（与队列本身同名的 PPD 文件，带有附加后缀**.ppd*，位于 中`/etc/cups/ppd/`）。

既然你说你已经为你的打印机队列安装了一个接口脚本，根据定义，这些***不是***原始队列！

`-o raw`要将作业作为原始（即：未过滤）发送到非原始 CUPS 队列，除了在命令行上使用之外别无他法`lp`。您也可以使用（或者）该选项`-o document-format=application/vnd.cups-raw`...但这具有完全相同的含义：它使 CUPS 使用相同的作业处理，并且只需多出 7 倍的键盘键即可打孔。

**这两种**方式都会导致 CUPS 跳过*自动键入*传入作业文件的步骤，并将其未经过滤地传递到队列的后端。

启用后，可以`/var/log/cups/error_log`通过查找关键字在日志文件中观察自动输入步骤及其结果：提及的行告诉您 CUPS 将您的传入作业分类为哪种 MIME 类型。）`Auto-typing``cupsd.conf``LogLevel debug``Request file type is ...`

## 如何强制 CUPS 将传入的打印数据作为文本处理

`-o document-format=text/plain`在`lp`命令行中使用。

## 如何设置 CUPS 的“原始”队列

如果要将（任何）现有打印队列转换为原始队列，只需删除关联的 PPD 文件 ( `/etc/cups/ppd/myprinter.ppd`) 或关联的接口脚本 ( `/etc/cups/interfaces/myprinter`)。

如果您想从一开始就安装一个打印队列作为原始队列，只需使用打印机名称和后端 URI，但不要指定任何 PPD 或任何与之关联的接口脚本：

**安装“原始”打印队列的示例命令：**

```
 sudo lpadmin -p my_raw_printer -E -v socket://192.168.177.188:9100 
```

（`-p`是指定打印队列名称，`-E`是从一开始就启用打印队列。）

## 推测：为什么第二个应用程序可能会绕过您的界面脚本

如果没有看到您的完整系统设置并查看第二个应用程序（其打印行为似乎与您的第一个不同），或者无法访问调试级别`error_log`的 CUPS 文件，则只能推测：

*   我的猜测是你的第二个应用程序使用了一些硬连线的打印命令，它隐式地使用了`-o raw`打印命令选项。

# facebook - 网址定义

> ID：12271872
> 
> 赞同：0
> 
> 时间：2012-09-04T21:53:44.540
> 
> 标签：facebook, url

在我的画布页面上编码 URL 时，我目前正在使用以下内容：

```
<a href="script.php">Link</a> 
```

然后，这会将用户链接到 www.mydomain.com/myapp/script.php，但这样做时 getUser 函数似乎返回 0（即使 getUser 从显示链接的画布页面返回正确的用户 ID）。

或者我应该旨在通过以下方式对 URL 进行编码：

```
<a href="apps.facebook.com/myapp/script.php">Link</a> 
```

如果我直接将此 URL 输入到浏览器中，那么 getUser 会返回正确的值。但是，如果我以这种方式从画布页面链接到它，页面似乎是空白的？

非常感谢任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T05:14:36.220

PHP SDK 只能从在初始页面加载（POST）时发布给它的signed_request 中提取数据——从那里开始由您来保存该信息，例如通过将其存储在会话中。

链接到画布应用程序 url 的原因是这最终会完成一个完整的帖子，但这不必要地昂贵，具有很高的延迟，而且……是不必要的，而且不是正确的事情。

因此，在初始 POST 中，将 id 存储在会话中，并在后续页面加载中使用它。

# linux - 红帽linux广播IP地址

> ID：12271874
> 
> 赞同：0
> 
> 时间：2012-09-04T21:53:48.600
> 
> 标签：linux, ip-address, redhat

我正在使用 4 台不同的服务器。当我`ifconfig`在它们上运行时，它们都具有相同的 Bcast IP 地址。

我正在尝试使用不同的广播 IP 地址访问每个单独的服务器。

这是`ifconfig`其中一台服务器的输出：

```
eth0      Link encap:Ethernet  HWaddr 00:50:56:B6:5D:DF  
      inet addr:172.17.100.233  Bcast:172.17.103.255  Mask:255.255.252.0
      UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
      RX packets:12032390 errors:0 dropped:0 overruns:0 frame:0
      TX packets:11808161 errors:0 dropped:0 overruns:0 carrier:0
      collisions:0 txqueuelen:1000 
      RX bytes:1372473451 (1.2 GiB)  TX bytes:1902411861 (1.7 GiB) 
```

有没有办法更改每台服务器上的广播 IP 地址？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T22:13:43.340

你不能，广播地址是由IP网络的大小定义的。如果所有 4 台服务器都在同一个子网中，则它们都将具有相同的广播。地址的全部目的`broadcast`是，嗯，向子网上的所有主机广播 :) 数据包，而不是寻址单个主机。

# ruby-on-rails - 如何制作漂亮的网址

> ID：12271875
> 
> 赞同：0
> 
> 时间：2012-09-04T21:53:48.693
> 
> 标签：ruby-on-rails, routes, slug

我有像这样的网址`http://example.com/posts/?tag=2`

我`routes.rb`的是

```
resources :posts do
  get 'tag', :on => :collection
end 
```

我需要像这样的链接`http://example.com/posts/tag/linux`

我的桌子是：

```
posts(id,title)
tags(id,name)
taggings(id, post_id, tag_id) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T22:04:16.410

你可以做某事。喜欢

```
resources :posts do
  get 'tag/:name', on: :collection
end 
```

在您的控制器中，您可以在 url 参数中找到带有名称的标签，并获取带有此标签的所有帖子。

```
Tag.where(name: params[:name]).posts 
```

或者你在你的`Post`模型中实现一个函数，就像`find_by_tag(tag)`这样为你做的，所以你只需要调用

```
Post.find_by_tag(params[:name]) 
```

在您的控制器操作中，可读性更好。

# variables - 是否可以从 SQL 调用 sqlite3_limit() 函数

> ID：12271877
> 
> 赞同：2
> 
> 时间：2012-09-04T21:53:58.883
> 
> 标签：variables, sqlite, numbers, limit

在 Python 中，出于测试目的，我想将 SQLITE_LIMIT_VARIABLE_NUMBER 的值从它的编译值减少到一个低得多的值。

在实践中，有时我需要指定比编译值允许的变量多得多的变量。因此，我将请求分块。如果我可以将编译后的值降低到非常低的值会很方便，这样我就可以确保我的分块方法在使用小数据集进行测试时有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T07:04:02.973

SQLite 只允许通过调用更改限制`sqlite3_limit()`；没有`PRAGMA`这个。

但是，请查看[另一个 Python SQLite Wrapper](https://code.google.com/p/apsw/)，它有一个`Connection.limit()`函数。

# selenium - 如何在 iframe 的表中断言TextPresent？

> ID：12271879
> 
> 赞同：0
> 
> 时间：2012-09-04T21:54:08.220
> 
> 标签：selenium, selenium-ide

我在 iframe 中有一大段文本，我想断言文本是正确的。但是，它总是失败，即使在选择 iframe 之后也是如此。

```
<iframe>
...               
    <tbody>
            <tr class="sub">
                <td width="100%" class="bodyText">Your username has been sent to: f*****@example.net</td>
            </tr>
            <tr class="row">
                <td>&nbsp;</td>
            </tr>                                       
    </tbody>
 </iframe> 
```

硒脚本看起来像：

```
<tr>
    <td>selectFrame</td>
    <td>index=0</td>
    <td></td>
</tr>
<tr>
    <td>assertTextPresent</td>
    <td>has been sent</td>
    <td></td>
</tr> 
```

选择帧总是通过。页面上只有一帧。AssertTextPresent 总是失败。我已经阅读了关于 Selenium JIRA 的相关错误报告——从 2 年前开始，没有任何回应。在网上看了一点，建议是选择框架然后断言，这就是我正在做的事情。难住了。

我应该怎么做才能检查 iframe 中的文本？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T21:57:53.087

Got the answer 2 minutes later. I forgot that sometimes with selenium IDE you use the Target field and sometimes you use the Value field. In this case, putting `has been sent` into the value field did the trick.

# jquery - 重新绑定事件是否会像以前那样做？

> ID：12271882
> 
> 赞同：-1
> 
> 时间：2012-09-04T21:54:19.393
> 
> 标签：jquery

如果我 unbind() jQuery 中的处理程序，当我“重新绑定”时它仍然会执行最初绑定时的操作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T23:17:22.893

当您取消绑定特定处理程序时，它会删除绑定到它的所有处理程序代码。

$('#elem').unbind('click') 移除元素的点击事件 $('#elem').unbind() 移除所有附加到它的事件..

当您重新绑定时，是的，只要您调用相同的函数，它就会提供相同的功能。如果将它绑定到不同的函数，那么显然它会给出不同的输出。

# javascript - 在 graphicsmagick 中使用 append() 拼接图像

> ID：12271890
> 
> 赞同：1
> 
> 时间：2012-09-04T21:54:56.710
> 
> 标签：javascript, node.js, css-sprites, graphicsmagick

我有大量图像存储在单独的服务器上，需要在单个页面上显示为某种马赛克，其中可以动态显示或隐藏各个元素。

这些图像应该被获取，调整大小，然后作为精灵拼接在一起，并用作 div 上的背景图像。在这一点上，获取和调整大小不是问题，因为最大的障碍是理解 append 方法，或者更确切地说，如何将图像添加到集合中，以便使用所述方法。

根据文档：

```
gm("img.png").append(ltr) 
```

应该：

```
Append a set of images 
```

如何将多个图像放入“集合”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T17:03:20.597

假设是这样`images`的路径字符串数组：

```
[ "/home/user/first.jpg", "/home/user/a.png", "/home/user/another.gif" ]; 
```

那么这应该工作：

```
var gm = require('gm');

var gmstate = gm(images[0]);
for (var i = 1; i < images.length; i++) gmstate.append(images[i]);

// finally write out the file asynchronously
gmstate.write('/home/user/result.png', function (err) {
  if (!err) console.log('Hooray!');
}); 
```

这个想法是：

1.  从 graphicsmagick 状态变量开始`gmstate`
2.  在循环中同步附加到它。
3.  `write()`做真正的工作，这是异步的。

这相当于`gm('first').append('second').append('third')....append('last')`。

也许可以从一个空状态开始：`var gmstate = gm();`.

我不得不承认，`@`如果您在文件中有一个列表，LeeNX 答案中的文件列表破解会容易得多，但是如果您没有......？

**编辑：**如果您需要水平附加图像，请添加第二个参数`true`，`append()`如下所示：

```
gmstate.append(image, true); 
```

资料来源：[文档`append()`](http://aheckmann.github.io/gm/docs.html#append)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T09:34:26.823

我能做的最好的事情如下......

```
var gm = require('gm')

gm('@images.txt')
  .append()
  .write('crazy.png', function (err) {
    if (!err) console.log('crazytown has arrived');
  }) 
```

其中 images.txt 是要附加的图像列表。

还没有弄清楚如何传递图像列表文件以外的一组图像。

从网站上得到了这个想法 - [http://www.graphicsmagick.org/GraphicsMagick.html](http://www.graphicsmagick.org/GraphicsMagick.html)

> 运行命令行实用程序时，您可以在文件名前添加 at 符号 @ 以从该文件中读取 > 图像文件名列表。如果您有太多 > 图像文件名以适应命令行，这很方便。

希望对李特有所帮助

# jquery - 为什么我的浏览器注释掉了我 iFrame 中插入的样式

> ID：12271891
> 
> 赞同：0
> 
> 时间：2012-09-04T21:55:10.740
> 
> 标签：jquery, css

我将以下代码放入页面中，以便可以将样式添加到加载到 iframe 中的另一个页面。但是当我用 Firebug 检查它时，浏览器正在注释掉我得到的 javascript ......有人可以帮忙吗？

```
$('#myframe').contents()
   .find("head")
   .append($("#iframe_id").contents()
     .find("head")
     .append("   <link rel='stylesheet' type='text/css' href='addStyles.css'/>")
   ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T22:14:51.887

您不能编辑`iframe`父文档中的内容，因为内容`iframe`属于不同的 URL。

但是，您可以将 JavaScript 注入 URL。阅读： [http ://thetechnofreak.com/technofreak/modify-iframe-with-javascript/](http://thetechnofreak.com/technofreak/modify-iframe-with-javascript/)

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T23:30:33.463

好吧，我想出了如何做到这一点。它不能是跨域的（我还不知道）。

但很简单： $(#'myframe').contents().find('head').html(...some style...);

这对我来说现在很好。

# sql-server - 在 INSERT 上，主键的值可以进入同一张表上的另一个非空字段吗？

> ID：12271893
> 
> 赞同：1
> 
> 时间：2012-09-04T21:55:24.307
> 
> 标签：sql-server

我猜答案是“不”，因为这看起来很荒谬，但我有一种罕见的情况需要发生这种情况：

给定一个包含三个字段的表：

```
ID, PK, smallint, not null
Code, Varchar(5), not null
Name, VarChar(50), not null 
```

我可以使用 INSERT 语句将 ID 字段神奇地插入到 CODE 中吗？

```
INSERT INTO MyTable (Code, Name)
    VALUES (CAST([ID's new Value] AS VARCHAR(5)),'New Name') 
```

**注意：** 对表结构（或数据库）的更改将是多余的。我想通过在存储过程的末尾附加它来完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T22:02:27.663

完成此操作的方法是使用数据库触发器：触发器作为插入语句的结果触发，因此它具有插入到表中的值。然后它可以进行更新。

至少，这就是您在 Oracle 中可以做的事情。我不知道 SQL-Server 触发器给你多少控制，或者什么时候给一个标识字段一个值，但这里是文档：http: [//msdn.microsoft.com/en-us/library/ms189799.aspx](http://msdn.microsoft.com/en-us/library/ms189799.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T22:11:51.160

如果你有一个身份并且这不是你每次都做的事情（当触发器最有意义的时候），这不是很容易做到的。基本上你所做的就是在 Code 字段中插入一个假值（因为它是必需的），然后输出插入表的 id 值，然后用 ID 更新表。当然（与任何多语句操作一样，您应该使用 try-catch 和显式事务，如果任何一个操作失败，则回滚所有操作）。

```
DECLARE @output TABLE (Id INT))
INSERT INTO MyTable (Code, Name) 
OUTPUT Inserted.ID INTO @output
    VALUES ('test','New Name') 

UPDATE m
SET code = o.Id
FROM    Mytable m
JOIN @output o ON m.Id = o.id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T22:01:35.423

您可以考虑使用 AFTER INSERT 触发器为您复制值。

[http://msdn.microsoft.com/en-us/library/aa258254(v=sql.80).aspx](http://msdn.microsoft.com/en-us/library/aa258254(v=sql.80).aspx)

# - 日食市场

> ID：12271898
> 
> 赞同：0
> 
> 时间：2012-09-04T21:56:00.763
> 
> 标签：

有关 Eclipse Marketplace 的问题，这是一个可以下载 Eclipse 插件的在线商店。

# c# - Jquery 没有找到所有 Table Row Td 单元格？

> ID：12271900
> 
> 赞同：-9
> 
> 时间：2012-09-04T21:56:33.983
> 
> 标签：c#, javascript, jquery, asp.net-mvc

我对 Jquery 有一个非常奇怪的问题。我有一张表格，里面有很多行和 td 单元格。我尝试访问 td 单元格值，它只允许我获得第一个孩子，就是这样。几天前这工作得很好。我所做的只是升级到 .net 4.5 和 MVC4。我什至没有创建一个全新的 MVC4 项目，我只是根据 MS 的一篇关于如何从 MVC3 升级到 4 的文章更改了 MVC3 项目中的几个 guid 和 sln 文件。这只是没有任何意义为什么它找不到孩子。jQuery已加载！请参阅下面的图片了解我在说什么。任何人都知道发生了什么！？下面是我的函数，因为它无法获得所有的 childNodes。

![功能码](../Images/a0d0950c9e2ba45696683efd4d887f37.png) ![观察窗格](../Images/1ef588272d26dbb3c5b91b18c0e3c5e3.png) ![浏览器](../Images/dc840a3d85665025b03a83289558166d.png) ![加载的脚本](../Images/d87929ccf23384ab84212771f33e9274.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T23:24:38.320

对不起。但我找到了自己问题的答案。我需要使用 tr 元素的 'cells' 属性而不是 childNodes 访问器。不知道为什么它以前突然停止工作，但无论如何。它是固定的。

# javascript - Javascript。如何在 javascript 中将信息发送到另一个网站？

> ID：12271906
> 
> 赞同：1
> 
> 时间：2012-09-04T21:57:08.400
> 
> 标签：javascript

我已经捕获了表单信息并建立了一个指向另一个网站的 URL。我实际上如何从 javascript 发送它。

```
[theotherwebsiteUrl]?parama=A&paramb=B&paramc=C 
```

这是我作为字符串构建到名为`body`.

我想要“一些 JS 函数”将内容发送`body`到`[theotherwebsite]`.

他们的服务器准备接受这个字符串并解析是否来自我的网站。我只是不知道使用什么函数来发送整个 url 字符串变量，而现在我将字符串连接到它们的格式。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T22:03:34.457

您可以通过直接在浏览器中或通过 Ajax 加载 URL（发送 HTTP 请求）“向另一个网站发送信息”。您可以将 GET 参数附加到该 URL 或随其发送 POST 数据。

例如：

```
window.location.href = '[otherWebsiteUrl]?parama=A&paramb=B&paramc=C'; 
```

或者：

```
var xmlhttp = new XMLHttpRequest();
xmlhttp.open("GET","[otherWebsiteUrl]?parama=A&paramb=B&paramc=C",true);
xmlhttp.send(); 
```

注意：通过 Ajax 向其他服务器发送请求需要设置远程服务器以接收它 - 请参阅[如何通过 JavaScript 发送跨域 POST 请求？](https://stackoverflow.com/questions/298745/how-do-i-send-a-cross-domain-post-request-via-javascript)

或者作弊，使用 JSONP：[http ://en.wikipedia.org/wiki/JSONP](http://en.wikipedia.org/wiki/JSONP)

# c# - 如何摆脱 Visual Studio 2010 中烦人的代码提示？

> ID：12271907
> 
> 赞同：1
> 
> 时间：2012-09-04T21:57:09.257
> 
> 标签：c#, visual-studio-2010, optimization, tooltip, coderush

当我第一次打开 Visual Studio 2010 时，我不小心对帮助/代码提示或其他内容说“是”。现在，每当我键入代码时，我都会收到这些烦人的弹出窗口，解释发生了什么或试图改进我的代码等。这些帮助提示使编码变得困难并导致 Visual Studio 运行缓慢。

**如何禁用它们？**

![令人讨厌的代码提示之一的示例](../Images/9e941729a2151296fed26c0cfc68f3c0.png)

![另一个恼人的代码提示示例](../Images/4a5d7152f914af667ed2d79097dcad24.png)

编辑：我很抱歉发布这个。我没有意识到这是题外话。Stack Overflow 是否有合适的地方来回答有关 IDE 等软件工具的问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T22:00:02.120

这些是来自 DevExpress的[IDE 生产力工具](http://devexpress.com/Products/Visual_Studio_Add-in/Coding_Assistance/)**CodeRush**的帮助提示。您可以通过转到工具菜单并选择**DevExpress->UnLoad来禁用它**

 **![在此处输入图像描述](../Images/85f6fa3746b97c6d267b0e2c615888e6.png)

这样做不仅会禁用智能提示，还会禁用整个 CodeRush。

就个人而言，这对我来说并不烦人。这有助于我提高工作效率。在一个单一的声明中“***我喜欢 CodeRush 在我的 VS 环境中***”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T07:18:46.017

您的第一张图片是**CodeIssue**提示。

[**这些可以通过DXCore Visualize**](http://community.devexpress.com/blogs/rorybecker/archive/2010/07/26/The-DXCore-Visualize-Toolbar.aspx)[工具栏](http://community.devexpress.com/blogs/rorybecker/archive/2010/07/26/The-DXCore-Visualize-Toolbar.aspx)上的第一个图标打开和关闭[](http://community.devexpress.com/blogs/rorybecker/archive/2010/07/26/The-DXCore-Visualize-Toolbar.aspx)

 **第二项（“发生了什么”弹出窗口）可能是由于在第一次安装 CodeRush 后运行 VS 时做出的选择而触发的。

它可以通过我们的选项屏幕反转：

*   选择**DevExpress \ 选项**
*   找到**核心\功能**页面。
*   取消选中第一个选项
*   点击确定

关于“发生了什么”弹出窗口的更多细节可以在这篇关于各种 CodeRush 通知[的博客文章中找到。](http://community.devexpress.com/blogs/rorybecker/archive/2010/08/25/coderush-notifications.aspx)

注意：这篇文章是指 CodeRush 的 10.1.5 版本。撰写本文时的最新版本是 12.1.6。****

# arrays - 将 2 个字符串或数组与输出进行比较

> ID：12271910
> 
> 赞同：0
> 
> 时间：2012-09-04T21:57:29.080
> 
> 标签：arrays, string, asp-classic, compare

我想知道如何通过字符串或数组比较 2 个列表，并获取未比较的值。

我正在考虑类似于 PHP 函数的东西`array_diff()`。

经典的 ASP 可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T07:06:53.267

您可以使用 Scripting.Dictionary：

```
Public Function RemoveMatches(byVal arrRemove(), byVal arrMatches)
    Dim sdScriptingDictionary, Item, arrReturn

    Set sdScriptingDictionary = CreateObject("Scripting.Dictionary")
    sdScriptingDictionary.RemoveAll
    sdScriptingDictionary.CompareMode = BinaryCompare
    For Each itemRemove in arrRemove
        For Each itemMatches in arrMatches
            If itemMatches<>itemRemove Then
                'Response.Write "ADD:" & itemRemove & ":" & itemMatches & "<br />"
                If Not sdScriptingDictionary.Exists(itemRemove) Then sdScriptingDictionary.Add itemRemove, itemRemove
            Else
                'Response.Write "REMOVE:" & itemRemove & ":" & itemMatches & "<br />"
                If sdScriptingDictionary.Exists(itemRemove) Then sdScriptingDictionary.Remove(itemRemove)
                Exit For
            End If
        Next
    Next
    arrReturn = sdScriptingDictionary.keys

    'Clean Up
    Erase arrRemove
    Set arrRemove = Nothing

    Erase arrMatches
    Set arrMatches = Nothing

    sdScriptingDictionary.RemoveAll
    Set sdScriptingDictionary = Nothing

    RemoveMatches = arrReturn
End Function 
```

# javascript - 检测window.opener窗口刷新事件

> ID：12271915
> 
> 赞同：0
> 
> 时间：2012-09-04T21:58:13.353
> 
> 标签：javascript, jquery, browser, window, refresh

假设在窗口 AI 上做

```
var newWindow = window.open('url', 'name', 'width=100'); 
```

并打开一个新窗口（称为窗口 B）

然后在窗口 BI 上获取对开启器窗口（窗口 A）的引用

```
var opener = $(window.opener) 
```

当窗口 A 刷新和/或完成刷新时，有没有办法使用上面的 opener 变量从窗口 B 检测？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T22:09:12.133

我会在原始窗口中设置一个变量，可能是时间戳或类似的东西：

```
$(document).ready(function() {
   var datime = Date();
}); 
```

然后在窗口 B 中，你可以做同样的事情，并根据两个窗口的创建日期，你会知道窗口 A 最近是否刷新过。您还可以将窗口 A 的创建日期作为变量存储在窗口 B 中，以便您随时知道窗口 A 已刷新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T23:05:09.647

您可以检测到开启器何时通过以下方式卸载：

```
$(opener).unload() 
```

在 newWindow 内，您应该能够在超时后重新分配开启器内的变量。

不要忘记在重新加载后也重新分配卸载功能。

我做了一个演示： http: [//fiddle.jshell.net/doktormolle/2Pcn8/show/](http://fiddle.jshell.net/doktormolle/2Pcn8/show/)

来源：
开瓶器： http: [//jsfiddle.net/doktormolle/2Pcn8/](http://jsfiddle.net/doktormolle/2Pcn8/)
新窗口：http : [//jsfiddle.net/doktormolle/jB9D6/](http://jsfiddle.net/doktormolle/jB9D6/)

在 IE(6-9)、FF、Chrome、Safari 中为我工作。
没有在 Opera 中工作

# c# - WPF 按钮鼠标悬停图像

> ID：12271916
> 
> 赞同：8
> 
> 时间：2012-09-04T21:58:19.797
> 
> 标签：c#, wpf, xaml, wpf-controls

我正在学习 C# 和 XAML 来构建 Windows 应用程序。我想创建一个以图像为背景的按钮。但是当悬停在按钮上时，按钮的背景应该变成另一个“突出显示”的图像。我试图将背景图像添加到 Resources.resx 中。我必须使用 xaml 样式创建一个自定义按钮，以摆脱 wpf 按钮的默认突出显示效果。

我根据在 SO 上找到的一些代码创建了一个自定义按钮。代码是（在新的资源字典中）：

```
 <!-- This style is used for buttons, to remove the WPF default 'animated' mouse over effect -->
    <Style x:Key="StartMenuButtons" TargetType="Button">
        <Setter Property="OverridesDefaultStyle" Value="True"/>
        <Setter Property="Margin" Value="5"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <Border Name="border" 
                        BorderThickness="0" 
                        Background="{TemplateBinding Background}">
                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">

                        <!-- UPDATE THE BUTTON BACKGROUND -->
                        <Setter Property="Background" Value="WHAT GOES HERE"  TargetName="border"/>

                    </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

无论是在我的 resources.resx 还是其他位置，我应该放什么以使背景更改为另一个图像？（不确定在哪里放置图像以访问它）。我搜索了 SO，但我找到的解决方案并不完全是我正在处理的。如果这是一个重复的问题，我很抱歉。

**概括：**

如何在 XAML 中更改鼠标悬停触发器上按钮的背景图像？我应该将图像放在哪里，以便可以在触发代码中访问它？

**更新** 这是我作为触发动作放置的，但图像没有更新。我确保将图像构建操作设置为资源并将其放在名为*Resources*的文件夹中。

代码是：

```
<ControlTemplate.Triggers>
    <Trigger Property="IsMouseOver" Value="True">
        <Setter Property="Background">
          <Setter.Value>
             <ImageBrush ImageSource="/Simon;component/Resources/btn_bg_hover.jpg" />
          </Setter.Value>
        </Setter>
     </Trigger> 
```

文件结构为

```
Simon
    Simon
        Resources
            all the images
        Fonts
        bin
        obj
        Properties 
```

**解决方案**

以下是允许在按钮上更改鼠标悬停图像的完整代码：

```
<!-- This style is used for buttons, to remove the WPF default 'animated' mouse over effect -->
    <Style x:Key="StartMenuButtons" TargetType="Button">
        <Setter Property="OverridesDefaultStyle" Value="True"/>
        <Setter Property="Margin" Value="5"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <Border Name="border" 
                        BorderThickness="0" 
                        Background="{TemplateBinding Background}">
                        <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
                    </Border>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsMouseOver" Value="True">
                            <Setter Property="Background" TargetName="border">
                            <Setter.Value>
                                <ImageBrush ImageSource="Resources/btn_bg_hover.jpg" />
                            </Setter.Value>
                        </Setter>

                    </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

对于实际图像，我将其放在根目录中的*Resources文件夹中。*使用 Visual Studio 中的资源工具将图像导入其中后，我在“属性”窗格中将图像*构建设置*更新为“*资源”。*

**感谢您的解决方案 dbaseman**

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-04T22:06:57.503

`/Images`我认为将图像添加到项目中的文件夹更容易。然后这是您使用的语法：

```
<ControlTemplate TargetType="Button">
    <Border Name="border" BorderThickness="0" 
                Background="Transparent">
          <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center" />
    </Border>
    <ControlTemplate.Triggers>
        <Trigger Property="IsMouseOver" Value="True">
            <Setter Property="Background">
               <Setter.Value>
                   <ImageBrush ImageSource="/MyProjectName;component/Images/MyImage.jpg" />
               </Setter.Value>
            </Setter>
        </Trigger>
    </ControlTemplate.Triggers>
</ControlTemplate> 
```

（假设您的图像`MyImage.jpg`位于`Images`项目根目录的文件夹中。）

只需确保将`MyImage.jpg`其“构建操作”设置为“资源”即可。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-01-02T12:52:37.497

Here is another way to do this.

You can use the two events of the image MouseEnter and MouseLeave. Now in your code do this.

XAML

```
<Image x:Name="image1" HorizontalAlignment="Left" Height="142" Margin="64,51,0,0" VerticalAlignment="Top" Width="150" MouseEnter="image1_MouseEnter" MouseLeave="image1_MouseLeave"   /> 
```

C#

```
private void image1_MouseEnter(object sender, MouseEventArgs e)
{
    string packUri = @"pack://application:,,,/Resources/Polaroid.png";
    image1.Source = new ImageSourceConverter().ConvertFromString(packUri) as ImageSource;
}

private void image1_MouseLeave(object sender, MouseEventArgs e)
{
    string packUri = @"pack://application:,,,/Resources/PolaroidOver.png";
    image1.Source = new ImageSourceConverter().ConvertFromString(packUri) as ImageSource;
} 
```

# sql - SQL Schema 设计——使用可空字段替换布尔列

> ID：12271918
> 
> 赞同：0
> 
> 时间：2012-09-04T21:58:55.177
> 
> 标签：sql, schema

让我们用一张表来存储客户发送给我们的消息。假设，如果客户要求我们向他们发送对他们发送给我们的信件的回复，我们还希望将其存储在该表中。如果他们已请求回复，那么我们会通过记录他们的电子邮件地址和预期日期来存储该信息。如果他们不想回复，我们不需要他们的电子邮件地址。

```
Correspondences
    Primary_key
    Content
    Date
    Response_expected
    Return address
    Return date 
```

或者，我们可以完全去掉 response_expected 列，并同意返回地址/返回日期为空表示“预期没有响应”，非空则表示预期有响应。应用程序将负责使用此逻辑，而不是检查明确的“我们想要响应吗？” 场地。

（为了这个问题，假设有一个约束，因此返回地址和日期必须为空，除非预期的响应是肯定的......我的观点是该列不会被滥用或用于其他目的）

我的问题是：这种设计，应用程序必须同意解释数据的特定方式，是否可以接受？另一方面，我们存储的数据比我们需要的多，因为如果他们不期待回复，我们肯定不会有返回地址和日期

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T22:04:24.670

我会为 Response_Expected 设置一个单独的列，就像您现在拥有的一样。是的，您可能有多余的信息，因为当预期没有响应时，返回地址将为 NULL。

然而，这两种想法是不同的。以下是您可能需要考虑的一些场景：

*   将来，您有不止一种方法来返回响应。电子邮件只是一种渠道。这将使数据结构复杂化，但逻辑将依赖于单个通道。
*   您发送了一封电子邮件，但由于某些其他原因它被退回或无法送达。
*   响应变得依赖于其他一些标准。他们希望得到回应，但仅限于特定条件。

我不会担心数据的重复。我会更多地考虑应用程序的可持续性。

# objective-c - 从 PhoneGap 插件显示视图控制器

> ID：12271919
> 
> 赞同：1
> 
> 时间：2012-09-04T21:59:00.843
> 
> 标签：objective-c, ios, xcode, cordova, phonegap-plugins

我正在构建一个显示 Aviary 照片编辑器 (https://github.com/AviaryInc/Mobile-Feather-SDK-for-iOS) 的 PhoneGap 插件。我有几个使用 Aviary 独立的工作示例，但我无法从 PhoneGap 插件（CDVPlugin 子类）中显示视图控制器（AFPhotoEditorController）。

我不确定我的方法是否存在根本错误，或者这是否只是 PhoneGap 的一个特殊部分。这是当前插件内部的代码。当它执行时，什么也没有发生。视图不显示，没有错误/异常，没有日志消息。

```
AFPhotoEditorController* aviary = [[[AFPhotoEditorController alloc] initWithImage:photoImage] autorelease];
[aviary setDelegate:self];
[super.viewController presentViewController:aviary animated:YES completion:nil]; 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T20:38:21.357

尝试改用这个：

```
[self presentViewController:aviary animated:YES completion:nil]; 
```

# asp.net - 绑定网格视图内的多列 devexpress 组合框

> ID：12271922
> 
> 赞同：1
> 
> 时间：2012-09-04T21:59:42.780
> 
> 标签：asp.net, devexpress, webforms, datagridcomboboxcolumn, datagridviewcombobox

所以我有一个 Dev Express 网格视图，它在后面的 cod 中绑定到它的数据源。这个数据源只是一个普通的 ORM 对象，它工作正常。当我在记录上点击编辑时，我试图让其中一列变成一个组合框。到目前为止，我已经能够使用以下代码完成此操作：

```
<dx:GridViewDataComboBoxColumn Caption="Invoice/Return#" 
FieldName="InvoiceNumber" ToolTip="Invoice/Return#"
VisibleIndex="4" Settings-AllowSort="False" Name="cmbOtherCostsInvoice">
<PropertiesComboBox ClientInstanceName="cmbOtherCostsInvoice">
</PropertiesComboBox>
<Settings AllowSort="False"></Settings>
</dx:GridViewDataComboBoxColumn> 
```

我拦截行编辑事件并像这样绑定组合框：

```
protected void gridViewOtherCost_StartRowEditing(object sender, DevExpress.Web.Data.ASPxStartRowEditingEventArgs e)
{
    var allInvoices = GetCollection<PurchaseOrderInvoice>("PURCHASE_ORDER_KEY = " + purchaseOrder.Key);
    foreach (var item in allInvoices)
    {
        (gridViewOtherCost.Columns[4] as GridViewDataComboBoxColumn).PropertiesComboBox.Items.Add(item.InvoiceNumber, item.InvoiceKey);
    }
} 
```

所以这可行，但我想让组合框成为多列。我在整个应用程序中还有一些其他的多列，但没有一个嵌套在 gridview 中，所以我不知道该怎么做。这是独立多列组合框的示例。

```
<dx:ASPxComboBox ID="cmbAssetPart" runat="server" CssClass="requiredfield" Width="100px
ValueField="AssetKEY" TextField="AssetID" TextFormatString="{0}">
<Columns>
    <dx:ListBoxColumn FieldName="AssetID" Name="AssetID" />
    <dx:ListBoxColumn FieldName="EntityName" Name="Entity" />
</Columns> 
```

知道如何让它发挥作用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T09:41:35.030

在 PropertiesComboBox 标签之间定义 Columns 集合：

```
<dx:GridViewDataComboBoxColumn ....>
    <PropertiesComboBox ClientInstanceName="cmbOtherCostsInvoice">
        <Columns>
            <dx:ListBoxColumn FieldName="AssetID" Name="AssetID" />
            <dx:ListBoxColumn FieldName="EntityName" Name="Entity" />
        </Columns>
    </PropertiesComboBox>
</dx:GridViewDataComboBoxColumn> 
```

# iphone - 在标签中将下划线显示为空格

> ID：12271930
> 
> 赞同：1
> 
> 时间：2012-09-04T22:00:54.757
> 
> 标签：iphone, objective-c, ios, cocoa-touch, uitableview

在我的应用程序中，我有一个表格视图，其中包含基本样式的单元格的动态列表。每个单元格的 textLabel 都是从 xml 中提取的，并且包含下划线来代替空格。我使用标签文本来识别在 didSelectRowAtIndexPath 中点击了哪个单元格，并将其与其他 xml 文件中相同字符串的其他出现匹配。为此，标签需要包含下划线，但是如果它们是空格会更好看。

所以我的问题是，我可以将 labelText 设置为将下划线显示为空格，但保留底层字符串中的下划线，以便它仍然与使用下划线的 xml 匹配吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T22:07:49.257

你可以让 labelText 显示任何你喜欢的东西。只需使用您已用`tableView:cellForRowAtIndexPath:`空格替换下划线的字符串配置单元格（请参阅`stringByReplacingOccurrencesOfString:withString:`轻松做到这一点）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T22:07:58.427

您可以从 XML 中提取一个字符串数组，然后在将标签放入显示单元格时将下划线过滤为空格。这可能就是我的处理方式。或者就此而言，您可以过滤两个方向的字符串，但我认为仅存储 XML 文件中的版本可能更直接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-04T22:21:46.423

正如我在评论中所说，我认为当前的设计不是满足要求的最佳选择，但如果除了将数据基本上存储在单元格的标签中之外，绝对没有其他方法可以做到这一点，我会这样做：

```
- (UITableViewCell *)tableView:(UITableView *)tv cellForRowAtIndexPath:(NSIndexPath *)ip
{
    /* instantiate cell here */
    NSString *cellText = /* however you need to get the cell text */;
    cellText = [cellText stringByReplacingOccurrencesOfString:@"_" withString:@" "];
    cell.textLabel.text = cellText;
    /* whatever other cell setup you need */
} 
```

然后在选择回调中：

```
- (void)tableView:(UITableView *)tv didSelectRowAtIndexPath:(NSIndexPath *)ip
{
    UITableViewCell *cell = [tv cellForRowAtIndexPath:ip];
    NSString *cellText = cell.textLabel.text;
    cellText = [cellText stringByReplacingOccurrencesOfString:@" " withString:@"_"];
    /* go do whatever with cellText */
} 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-04T22:07:26.590

您可以创建一个新字符串，将 _ 替换为空格。这将使您的原始字符串保持不变（这通常不是问题，因为它可能是不可变的（即 NSString 不是 NSMutableString））。

```
self.labelText.text = [incomingString stringByReplacingOccurrencesOfString:@"_" withString:@" "]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-04T22:08:21.767

您可以创建一个 NSValueTransformer 的子类，它只是将出现的 '_' 替换为 ' ' 这不会影响值，但如果按钮的 stringValue 使用值转换器选项绑定到值，则会改变外观。

这假设按钮的 stringValue 是通过绑定设置的，其他答案假设文本是手动设置的。

# javascript - 源更改后jquery刷新图像

> ID：12271933
> 
> 赞同：0
> 
> 时间：2012-09-04T22:01:03.973
> 
> 标签：javascript, jquery

我有一个 JavaScript 函数，可以在其中播放声音文件（使用 phonegap）。它通常工作正常，但我想`img src`在下载文件时将其更改为加载图标。但是，播放文件后会更改 src。

我试图添加`+new Date().getTime()`到 src 的末尾，但没有帮助。有什么想法吗？

```
function playSound(){

var img = $(this).prev();

img.attr("src", "css/images/ajax-loader.gif?"+new Date().getTime());

var url = "http://some.com/fanky.mp3";   
mediaTTS = new Media(url, onSuccessTTS(url), onErrorTTS);
mediaTTS.play();

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T22:06:32.190

这可能是由于图像直到当前运行循环结束才重新绘制。如果`Media.play()`是阻塞，则在播放完成之前您可能看不到图像的变化。

要确认我的怀疑，请尝试以下代码：

```
function playSound(){
    var img = $(this).prev();
    img.attr("src", "css/images/ajax-loader.gif?"+new Date().getTime());
    setTimeout(function() {
        var url = "http://some.com/fanky.mp3";   
        mediaTTS = new Media(url, onSuccessTTS(url), onErrorTTS);
        mediaTTS.play();
    }, 100);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T22:07:27.930

尝试删除 src 属性，然后使用不同的 src 再次添加

```
function playSound(){
  var img = $(this).prev();
  img.removeAttr("src").attr("src","css/images/ajax-loader.gif?"+new Date().getTime());
  var url = "http://some.com/fanky.mp3";   
  mediaTTS = new Media(url, onSuccessTTS(url), onErrorTTS);
  mediaTTS.play();
} 
```

# c# - 如何在标题文本之后在网格视图标题中添加图像

> ID：12271941
> 
> 赞同：1
> 
> 时间：2012-09-04T22:01:40.340
> 
> 标签：c#, asp.net

我正在尝试在同一列中的标题文本之后在网格视图标题中添加过滤器图像。我尝试将图像添加到标题，但它只显示图像而不显示文本。

```
<asp:TemplateField HeaderText="<img src='.../...' alt='my image' />">
....
</TemplateField> 
```

任何人都可以建议我这样做的方法吗

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-04T22:26:19.523

Just do something like this - note the `HtmlEncode=false`:

```
<asp:BoundField HtmlEncode="false" 
 HeaderText='<img src="http://www.gravatar.com/avatar/8c9778a09696aac804ed44f4c8033458?s=32&d=identicon&r=PG" />Filter' /> 
```

It will render an image on the header and the word `Filter` next to it.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T22:32:38.700

Try something like this...

```
<asp:TemplateField>
<HeaderTemplate>Some Header <img src=".../image.png" /></HeaderTemplate>
<ItemTemplate>Your Item</ItemTemplate>
</asp:TemplateField> 
```

# ruby - Rails 中的类变量在浏览器刷新时持续存在

> ID：12271945
> 
> 赞同：3
> 
> 时间：2012-09-04T22:02:10.493
> 
> 标签：ruby, ruby-on-rails-3

在拥有较长的 PHP 背景之后，我对 Ruby 和 Rails 还是很陌生。我遇到了一个奇怪的错误，这让我很困惑。

我有一个像这样设置的类变量：

```
class Article < ActiveRecord::Base

    @@customTags = []

    def self.addCustomGA(slot, name, value, scope=3)
        h = {:slot => slot, :name => name, :value => value, :scope => scope}
        @@customTags.push h

    end

    def self.customTagOutput

        tags = ""
        @@customTags.each do |ct|
        tags << "_gaq.push(['_setCustomVar', "+ct[:slot].to_s+", '"+ct[:name].to_s+"', '"+ct[:value].to_s+"', "+ct[:scope].to_s+"]);\n"
        end
        tags
    end

end 
```

我在我的控制器中运行一个小测试，调用：

```
Article.addCustomGA(1, 'categories', @article.category_list); 
```

然后在我的 HAML 视图中，我正在输出如下内容：

```
#{Article.customTagOutput} 
```

这在第一次运行时效果很好。但是当我刷新页面时，它会不断向数组中添加一个条目 - 所以`@@customTags`数组似乎在我的会话中持续存在！如果我几分钟不刷新，它就会自行重置。

我的第一个想法是发生了某种缓存的事情，但谷歌并没有为我提供任何东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T22:13:29.127

首先，不要在模型的类变量中存储任何内容。类变量通常是一个坏主意。这看起来真的应该在相关控制器的帮助文件中的视图帮助方法中完成（类似于`app/helpers/articles_helper.rb`）。

您不需要为整个模型类存储类似的东西。您可以为每个实例存储数据，也可以将其硬编码到应用程序中。

在刷新之间保留变量的原因是 Rails 加载了`Article`一次类（在启动时）并且类变量没有被重新创建（因为类没有被重新加载）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T22:16:13.313

考虑简单地使用*实例*变量而不是*类*变量，`@customTags`只会保留在该类对象的*单个实例*中，因此如果您要刷新页面，将创建该类对象的新实例并且不包含以前的值）。

另一方面，通常认为在模型中定义这样的变量是不好的做法，请考虑放入相应的帮助文件。

# c# - 按钮颜色不正确

> ID：12271948
> 
> 赞同：0
> 
> 时间：2012-09-04T22:02:21.107
> 
> 标签：c#, wpf, xaml, controls

我有一个带有按钮的 WPF 用户控件。我复制了`System.Windows.Media.LinearGradientBrush`by的标准按钮阴影，以`Extract Value to Resource`查看资源中的默认设置

然后我复制了资源，但将默认颜色替换为我想要的颜色

```
 <LinearGradientBrush EndPoint="0,1">
        <GradientStop Color="#FFF3F3F3" Offset="0" />
        <GradientStop Color="#FFEBEBEB" Offset="0.5" />
        <GradientStop Color="#FFDDDDDD" Offset="0.5" />
        <GradientStop Color="#FFCDCDCD" Offset="1" />
    </LinearGradientBrush> 
```

然后我删除了资源，所以我的完整 XAML 看起来像

```
<UserControl x:Class="Project.Detail"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="30" d:DesignWidth="800" BorderBrush="#FF5380E7" BorderThickness="0,0,0,1" >
    <Grid Height="30" Width="800">
        <Button Height="30" HorizontalAlignment="Left" Margin="254,0,0,0" Name="bOption3" VerticalAlignment="Top" Width="50" Click="bOption_Click" HorizontalContentAlignment="Center" VerticalContentAlignment="Center" FontSize="10" FontStretch="SemiCondensed">
            <Button.Background>
                <LinearGradientBrush EndPoint="0,1">
                    <GradientStop Color="#FFD2DEF9" Offset="0" />
                    <GradientStop Color="#FFC5D4F7" Offset="0.5" />
                    <GradientStop Color="#FFAEC3F4" Offset="0.5" />
                    <GradientStop Color="#FF8FACF0" Offset="1" />
                </LinearGradientBrush>
            </Button.Background>
        </Button>
    </Grid>
</UserControl> 
```

在设计器中，我看到我用正确的渐变设置的颜色，但是当我构建和运行按钮时，按钮是默认的灰色。

谁能告诉我做错了什么？

**编辑：**

我想保留默认按钮样式，除了初始状态背景我想要我自己的颜色。我现在尝试为背景添加特定资源

```
<UserControl.Resources>
    <LinearGradientBrush x:Key="NewBackground" EndPoint="0,1">
        <GradientStop Color="#FFD2DEF9" Offset="0" />
        <GradientStop Color="#FFC5D4F7" Offset="0.5" />
        <GradientStop Color="#FFAEC3F4" Offset="0.5" />
        <GradientStop Color="#FF8FACF0" Offset="1" />
    </LinearGradientBrush>
</UserControl.Resources> 
```

然后添加

```
<Button Height="30" HorizontalAlignment="Left" Margin="360,0,0,0"  Background="{StaticResource NewBackground}"> 
```

再次在设计器中，我可以看到正在应用的颜色，但是当应用程序运行时，它始终具有默认的灰色。

***设计模式下的按钮***

![在此处输入图像描述](../Images/f9b198b38b8651e25c10d8cf8a91a641.png)

***应用程序中的按钮***

![在此处输入图像描述](../Images/a8e274985791ac9baed98a687dedb98c.png)

我现在有几个问题

1.  有没有一种简单的方法来更改默认按钮的 1 个属性而不是创建完整的新样式？

2.  如果我必须重新创建一个完整的样式，我可以在哪里访问所有默认属性以使其看起来相同？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T23:16:52.963

1.  是的，您可以针对某些属性，这取决于。假设您想更改 FontSize、FontFamily、FontSize、FontStretch 等。WPF 提供了一些附加属性来覆盖它，例如

    `<Grid TextElement.FontFamily=""/>` 或者`<Button TextElement.FontFamily=""/>`

2.  您可以尝试去 Expression blend 并提取 WPF 控件的默认模板。从那里自定义模板。

更多信息可以在[这里找到](http://www.shafqatahmed.com/2009/01/wpf-kid-stuff-extracting-a-control-template.html)

# sql-server - 存储过程 (TSQL) 中的计算

> ID：12271951
> 
> 赞同：3
> 
> 时间：2012-09-04T22:02:40.477
> 
> 标签：sql-server, tsql

我必须在存储过程中为以下场景编写一个计算。我已经编写了以下代码，请让我知道它是否正确或有其他更好的方法来编写它。

有一些“x”值的 NetWorth 金额，我需要在以下条件下计算该“x”值的佣金

1.  总净资产高达 5,000 英镑 - 30%
2.  总净资产高达 5,000.01 英镑至 20,000 英镑 - 35%
3.  总净资产高达 20,000.01 英镑至 50,000 英镑 - 40%
4.  总净资产高达 50,000.01 英镑 + - 45%

例如

如果`NetWorth`是 100000，则计算如下

1.  对于 100000 中的前 5000 个，佣金为 30%，即 5000 * 0.30 = 1500 剩余（95000）
2.  对于 95000 中的下一个 20000，佣金为 35%，即 20000 * 0.35 = 7000（75000）
3.  对于 75000 中的下一个 50000，佣金为 40%，即 50000 * 0.40 = 20000 被排除在外（25000）
4.  对于剩下的 25000，佣金为 45%，即 25000 * 0.45 = 11250

所有这些佣金的总和 = point1 + point2 + point3 + point4 = 1500 + 7000 + 20000 + 11250 = 39750

下面是我编写的存储过程中的代码。请让我知道这是否可以改进或有任何其他方式来编写它。

```
DECLARE @NetWorth DECIMAL(18, 2) 
DECLARE @InterMediateTier1Value DECIMAL(18, 2) 
DECLARE @InterMediateTier2Value DECIMAL(18, 2) 
DECLARE @InterMediateTier3Value DECIMAL(18, 2) 
DECLARE @InterMediateTier1Commission DECIMAL(18, 2) 
DECLARE @InterMediateTier2Commission DECIMAL(18, 2) 
DECLARE @InterMediateTier3Commission DECIMAL(18, 2) 
DECLARE @RemainderCommission DECIMAL(18, 2) 
DECLARE @RemainderValue DECIMAL(18, 2) 

SET @NetWorth = 40000 

DECLARE @TotalCommission DECIMAL(18, 2) 

IF @NetWorth <= 5000 
  BEGIN 
      SET @InterMediateTier1Commission = @NetWorth * 0.30 
      SET @TotalCommission = @InterMediateTier1Commission 
  END 
ELSE IF @NetWorth > 5000 
   AND @NetWorth <= 20000 
  BEGIN 
      SET @InterMediateTier2Value = @NetWorth - 5000 
      SET @InterMediateTier1Commission = 5000 * 0.30 
      SET @InterMediateTier2Commission = @InterMediateTier2Value * 0.35 
      SET @TotalCommission = @InterMediateTier1Commission 
                             + @InterMediateTier2Commission 
  END 
ELSE IF @NetWorth > 20000 
   AND @NetWorth <= 50000 
  BEGIN 
      SET @InterMediateTier1Value = @NetWorth - 5000 
      SET @InterMediateTier1Commission = 5000 * 0.30 

      IF @InterMediateTier1Value > 20000 
        SET @RemainderValue = @InterMediateTier1Value - 20000 

      SET @RemainderCommission = @RemainderValue * 0.40 
      SET @InterMediateTier2Commission = 20000 * 0.35 
      SET @TotalCommission = @InterMediateTier1Commission 
                             + @InterMediateTier2Commission 
                             + @RemainderCommission 
  END 
ELSE IF @NetWorth > 50000 
  BEGIN 
      SET @InterMediateTier1Value = @NetWorth - 5000 
      SET @InterMediateTier1Commission = 5000 * 0.30 

      IF @InterMediateTier1Value > 20000 
        SET @RemainderValue = @InterMediateTier1Value - 20000 

      SET @InterMediateTier2Commission = 20000 * 0.35 

      IF @RemainderValue > 50000 
        SET @InterMediateTier4Value = @RemainderValue - 50000 

      SET @InterMediateTier3Commission = 50000 * 0.40 
      SET @RemainderCommission = @RemainderValue * 0.45 
      SET @TotalCommission = @InterMediateTier1Commission 
                             + @InterMediateTier2Commission 
                             + @InterMediateTier3Commission 
                             + @RemainderCommission 
  END 

SELECT @TotalCommission AS TotalCommission 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-04T22:14:36.887

是的，这可以改进。将“NetWorth”金额和佣金放在一个表中，然后使用 SQL 来完成这项工作：

```
declare @Comm table (
    NetworthLower float,
    NetWorthHigher float,
    Commission float
);

insert into @comm
    select 0, 5000, 0.30 union all
    select 5000, 20000, 0.35 union all
    select 20000, 50000, 0.4 union all
    select 50000, NULL, 0.45

declare @Value float = 8000;

select SUM(case when @Value >= c.NetWorthLower and @Value < coalesce(c.NetWorthHigher, @Value)
                then (@Value - c.NetWorthLower) * c.Commission
                when  @Value >= c.NetWorthLower
                then (c.NetWorthHigher - c.NetworthLower) * c.Commission
                else 0.0
           end)
from @Comm c 
```

这也使得计算整个表的佣金成为可能，而无需使用存储过程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T03:22:04.703

试试这个，我发现它适用于以下测试用例

测试用例 1：声明 @NetWorth DECIMAL(18, 2) = 1000

测试用例 2：声明 @NetWorth DECIMAL(18, 2) = 9999

测试用例 3：声明 @NetWorth DECIMAL(18, 2) = 40000

测试用例 4：声明 @NetWorth DECIMAL(18, 2) = 78000

**询问**

```
DECLARE @NetWorth DECIMAL(18, 2)  = 488000  

SELECT TotalCommission = 
CONVERT(DECIMAL(18, 2),

    CASE WHEN @NetWorth <= 5000 THEN @NetWorth * 0.30 
            WHEN @NetWorth > 5000  AND @NetWorth <= 20000 THEN (5000 * 0.30) + (@NetWorth - 5000) * 0.35 
            WHEN @NetWorth > 20000 AND @NetWorth <= 50000 
                                THEN CASE WHEN ((@NetWorth - 5000) > 20000)
                                            THEN (5000 * 0.30)  + 
                                                (20000 * 0.35)  +  
                                                ((@NetWorth - 5000)- 20000)* 0.40
                                            ELSE (5000 * 0.30)+ (20000 * 0.35)
                                        END
        WHEN @NetWorth > 50000 
                                THEN CASE WHEN ((@NetWorth - 5000) > 20000)
                                            THEN (5000 * 0.30) +
                                                (20000 * 0.35) + 
                                                (50000 * 0.40) +
                                                ((@NetWorth - 5000) - 20000 )*0.45
                                            ELSE (5000 * 0.30) + (20000 * 0.35) + (50000 * 0.40)
                                    END

    END
) 
```

希望这可以帮助。让我知道它是否在任何情况下都失败了。

# c++ - x86-64 上检查指针范围是否跨越 N 字节对齐地址的最快方法？

> ID：12271955
> 
> 赞同：0
> 
> 时间：2012-09-04T22:03:26.587
> 
> 标签：c++, alignment, bit-manipulation, x86-64, simd

给定一个指向 T 的指针，我想确定 T 是否跨越 N 字节对齐的地址。在实践中，我真的只关心 0-5 字节大小的对象是否跨越 8 或 16 字节的字节边界，但我写了这个通用版本：

```
template<class T, unsigned long N>
bool straddlesBoundary(T* obj)
{
    unsigned long before = (unsigned long)obj & ~(N-1);
    unsigned long after  = ((unsigned long)obj + sizeof(T) - 1) & ~(N-1);
    return before != after;
} 
```

基本上，将地址向下舍入到最近的 N 字节对齐地址，然后将指针增量 T 减去 1 的大小（因为在下一个边界上结束的 T 不算作跨接）并将其向下舍入到最近的N 字节对齐的地址，如果它们匹配，您就知道它不会跨越。

有没有更快的方法来做到这一点？我只是编的，不知道有没有标准的检查。

编辑：注意，我假设 T 小于 N。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T22:12:45.633

你可以这样做：

```
unsigned long offset = (unsigned long)obj & (N-1);
return offset > N - sizeof(T); 
```

（与您一样，此代码仅在 N 是 2 的幂时才有效。）

# android - 夏洛克操作栏菜单

> ID：12271957
> 
> 赞同：3
> 
> 时间：2012-09-04T22:03:38.217
> 
> 标签：android, actionbarsherlock

我正在尝试以编程方式设置菜单，我的方法将 com.actionbarsherlock.view.Menu 菜单作为参数。当我想更改菜单项的样式时，我正在尝试设置 SpannableString 可跨越并将其传递给添加。menu.add(0, MENU_ABOUT, 0, spannable); 当我点击该菜单项时，这只会在 ICS 中导致崩溃。如果我遗漏了什么，有什么想法。谢谢 这是我正在尝试的代码，当我运行应用程序并选择“关于应用程序”时它崩溃了。仅供参考，我使用 SpannableString 是因为我想为菜单项添加一些样式和颜色。如果我使用常规字符串，则不会发生崩溃，但是我无法进行样式设置

```
 public boolean onCreateOptionsMenu(com.actionbarsherlock.view.Menu menu)
{
    SpannableString spannable = new SpannableString("About Application");
    menu.add(0, MENU_ABOUT, 0, spannable);
    return true;
} 
```

这是堆栈跟踪：

```
 09-05 02:25:32.849: E/AndroidRuntime(684): FATAL EXCEPTION: main
    09-05 02:25:32.849: E/AndroidRuntime(684): java.lang.IllegalArgumentException:  Invalid payload item type
    09-05 02:25:32.849: E/AndroidRuntime(684):  at android.util.EventLog.writeEvent(Native Method)
    09-05 02:25:32.849: E/AndroidRuntime(684):  at android.app.Activity.onMenuItemSelected(Activity.java:2501)
    09-05 02:25:32.849: E/AndroidRuntime(684):  at android.support.v4.app.FragmentActivity.onMenuItemSelected(FragmentActivity.java:351)
    09-05 02:25:32.849: E/AndroidRuntime(684):  at com.android.internal.policy.impl.PhoneWindow.onMenuItemSelected(PhoneWindow.java:950)
    09-05 02:25:32.849: E/AndroidRuntime(684):  at com.android.internal.view.menu.MenuBuilder.dispatchMenuItemSelected(MenuBuilder.java:735)
    09-05 02:25:32.849: E/AndroidRuntime(684):  at com.android.internal.view.menu.MenuItemImpl.invoke(MenuItemImpl.java:149)
    09-05 02:25:32.849: E/AndroidRuntime(684):  at com.android.internal.view.menu.MenuBuilder.performItemAction(MenuBuilder.java:874)
    09-05 02:25:32.849: E/AndroidRuntime(684):  at com.android.internal.view.menu.ListMenuPresenter.onItemClick(ListMenuPresenter.java:163)
    09-05 02:25:32.849: E/AndroidRuntime(684):  at android.widget.AdapterView.performItemClick(AdapterView.java:292)
    09-05 02:25:32.849: E/AndroidRuntime(684):  at android.widget.AbsListView.performItemClick(AbsListView.java:1058)
    09-05 02:25:32.849: E/AndroidRuntime(684):  at android.widget.AbsListView$PerformClick.run(AbsListView.java:2514)
    09-05 02:25:32.849: E/AndroidRuntime(684):  at android.widget.AbsListView.onTouchEvent(AbsListView.java:3180)
    09-05 02:25:32.849: E/AndroidRuntime(684):  at android.view.View.dispatchTouchEvent(View.java:5541)
    09-05 02:25:32.849: E/AndroidRuntime(684):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1951)
    09-05 02:25:32.849: E/AndroidRuntime(684):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1712)
    09-05 02:25:32.849: E/AndroidRuntime(684):  at android.view.ViewGroup.dispatchTransformedTouchEvent(ViewGroup.java:1957)
    09-05 02:25:32.849: E/AndroidRuntime(684):  at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:1726)
    09-05 02:25:32.849: E/AndroidRuntime(684):  at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1860)
    09-05 02:25:32.849: E/AndroidRuntime(684):  at android.view.View.dispatchPointerEvent(View.java:5721)
    09-05 02:25:32.849: E/AndroidRuntime(684):  at android.view.ViewRootImpl.deliverPointerEvent(ViewRootImpl.java:2890)
    09-05 02:25:32.849: E/AndroidRuntime(684):  at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2466)
    09-05 02:25:32.849: E/AndroidRuntime(684):  at android.view.ViewRootImpl.processInputEvents(ViewRootImpl.java:845)
    09-05 02:25:32.849: E/AndroidRuntime(684):  at android.view.ViewRootImpl.handleMessage(ViewRootImpl.java:2475)
    09-05 02:25:32.849: E/AndroidRuntime(684):  at android.os.Handler.dispatchMessage(Handler.java:99)
    09-05 02:25:32.849: E/AndroidRuntime(684):  at android.os.Looper.loop(Looper.java:137)
    09-05 02:25:32.849: E/AndroidRuntime(684):  at android.app.ActivityThread.main(ActivityThread.java:4424)
    09-05 02:25:32.849: E/AndroidRuntime(684):  at java.lang.reflect.Method.invokeNative(Native Method)
    09-05 02:25:32.849: E/AndroidRuntime(684):  at java.lang.reflect.Method.invoke(Method.java:511)
    09-05 02:25:32.849: E/AndroidRuntime(684):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
    09-05 02:25:32.849: E/AndroidRuntime(684):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
    09-05 02:25:32.849: E/AndroidRuntime(684):  at dalvik.system.NativeStart.main(Native Method) 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T01:41:15.000

你能发布堆栈跟踪和可能的来源吗？（我会对此发表评论，但在发布时我没有 50 个代表）

在黑暗中刺伤......你可能会`getMenuInflater()`在应该打电话的时候打电话`getSupportMenuInflater()`

/编辑

在尝试复制您的错误后，我注意到设置 ActionBar 的 ActionButton 文本的样式似乎不可行。即使不使用 Sherlock 图书馆。在运行低于 API 11 的任何设备上，不会引发错误，但也没有设置按钮样式。

您可能必须创建一个带有样式的静态 xml 文件，正如这个[答案所建议](https://stackoverflow.com/a/12256456/1443717)的那样 以及[它下面的一个](https://stackoverflow.com/a/12101277/1443717)（只是一个想法）

# dispatcher - 如何避免调度程序未处理的异常冒泡到包装器？

> ID：12271960
> 
> 赞同：1
> 
> 时间：2012-09-04T22:04:17.120
> 
> 标签：dispatcher, unhandled-exception

我有一个 WPF 应用程序...并且我有一个 WPF 父应用程序（它是第三方）...

并且这个第三方应用程序使用我的应用程序的 DLLS 将我的应用程序加载为其中的一个子应用程序。

我的应用程序具有以下代码来处理未处理的异常。

```
 Dispatcher.CurrentDispatcher.UnhandledException += new DispatcherUnhandledExceptionEventHandler(App_Dispatcher_UnhandledException); 
```

但是第三方父应用程序也具有相同的代码......并且每当发生接收时......父应用程序的函数首先被调用。

无论如何限制异常冒泡到父应用程序级别？

# dust.js - Dust.Js - @select 中的输入标签

> ID：12271964
> 
> 赞同：0
> 
> 时间：2012-09-04T22:04:31.017
> 
> 标签：dust.js

我正在努力得到他的工作。For some reason Input tag does not get rendered when create view is selected

```
{#customer}     
Name: 
{@select key="{viewType}"}
    {@eq value="create"}<input type="text" name="name"/></eq}
    {@eq value="edit"}<input type="text" name="name" value="{name}"/>{/eq}
    {@eq value="view"}{name}{/eq}
{/select}

Status:
{@select key="{viewType}"}
    {@eq value="create"}<input type="text" name="status"/>{/eq}
    {@eq value="edit"}<input type="text" name="status"value="{status}"/>{/eq}
    {@eq value="view"}{status}{/eq}
{/select}
{/customer} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T03:49:29.843

可能是你没有用正确的{/eq}关闭你的部分，而是用一个

```
</eq} 
```

反而？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T06:38:55.600

我通过在渲染创建模板视图时将空 JSON 传递给模板来解决这个问题

```
var customer = {}; 
```

代替

```
var customer = ''; 
```

我正在传递以下 JSON 以呈现视图和编辑视图模板

```
var customer = {name:'Customer Name', status:'Important'}; 
```

显然，当灰尘没有找到匹配的 JSON 参数时，整个块被忽略了。

# javascript - Sencha Touch JW Player 不使用多个叠加层

> ID：12271965
> 
> 赞同：1
> 
> 时间：2012-09-04T22:04:35.820
> 
> 标签：javascript, extjs, sencha-touch-2, jwplayer

在我的 Sencha touch 2.0 应用程序中，当同时有两个叠加层时，我遇到了 JW javascript 视频播放器无法播放的问题，我想看看是否有人可以更好地详细说明出了什么问题或可能是什么原因造成的所以我可以试着环顾四周，试着弄清楚发生了什么（我是 sencha 和 javascript 的新手）。我在[http://www.cox7.com/sean](http://www.cox7.com/sean)上加载了该项目，即使它只能在 iPad 上运行。

尝试以下步骤以更好地了解我在说什么，并注意许多 jwplayer 事件正在记录在 javascript 控制台中，因此您可以看到发生了什么......

1) 单击主页上的任何面板，这将打开带有视频标题描述和 javascript 视频播放器的叠加层。您将看到可以播放视频。

2）在搜索栏中（主屏幕的右上角）搜索“stem”，这将显示一个带有搜索结果的面板。

3）单击任何搜索结果，然后将打开相同的视频播放器面板，但这次您将无法单击播放按钮。这几乎就像面板不是最顶部的元素，但我仍然可以滚动并且 onTouchStart 事件会触发，但视频永远不会开始。

有谁知道这可能是什么原因造成的？任何帮助深表感谢。

这是我的搜索结果覆盖的控制器设置....

```
showStreamSearchPopup: function showStreamPopup(list, index, node, record) {
            //alert(record.get('title'));
                        //var record = getData().getStore().getAt(index);
                            StreamVideoSearchPlayerOverlay = Ext.Viewport.add({
                                xtype: 'panel',
                                modal: true,
                                hideOnMaskTap: true,
                                showAnimation: {
                                    type: 'popIn',
                                    duration: 200,
                                    easing: 'ease-out'
                                },
                                hideAnimation: {
                                    type: 'popOut',
                                    duration: 200,
                                    easing: 'ease-out'
                                },
                                centered: true,
                                width: '78%',
                                height: '68%',
                                styleHtmlContent: true,
                                listeners: {
                                    painted: function() {
                                        console.log('StreamVideoSearchPlayerOverlay painted');
                                   },
                                   activeitemchange :function() {
                                        console.log('StreamVideoSearchPlayerOverlay activeitemchange');
                                   }
                                },
                                items: [{
                                style: 'padding:1em;',
                                html:[  "<div class=\"postTitle\">",record.get('title'),"</div><div class=\"postDate\">Added on ",
                                    record.get('date'),"</div><div class=\"postDesc\">",record.get('content'),"</div>"      
                                ].join("") 
                    },

                    {
                    xtype: 'panel',
                    layout: 'card',
                    cls: 'videoPlayeriPad',
                    items:[{
                        xtype: 'jwplayer',
                        playerOptions: {
                            file: record.get('ipadvideo'),
                            image: record.get('poster'),
                            width: 500, 
                            height: 281,
                            plugins: {
                             'gapro-1': { accountid: 'UA-23363754-1', idstring: '||title||' }
                            },
                            skin: 'http://www.cox7.com/wp-content/mediaplayer/skins/beelden/beelden/glow.xml',

                        }
                    }]
                    }

                    ],
                                scrollable: true
                            }

                            );

                    StreamVideoSearchPlayerOverlay.show();
                    StreamVideoSearchPlayerOverlay.setActiveItem(2);
                    }, 
```

这是我用于正常主屏幕资产覆盖的控制器设置...

```
showStreamPopup: function showStreamPopup(list, index, node, record) {

                        //alert(record.get('title'));
                        //var record = getData().getStore().getAt(index);

                            StreamVideoPlayerOverlay = Ext.Viewport.add({
                                xtype: 'panel',
                                modal: true,
                                hideOnMaskTap: true,
                                showAnimation: {
                                    type: 'popIn',
                                    duration: 200,
                                    easing: 'ease-out'
                                },
                                hideAnimation: {
                                    type: 'popOut',
                                    duration: 200,
                                    easing: 'ease-out'
                                },
                                centered: true,
                                width: '78%',
                                height: '68%',
                                styleHtmlContent: true,
                                listeners: {
                                    painted: function() {
                                        console.log('StreamVideoPlayerOverlay painted');
                                   },
                                   activeitemchange :function() {
                                        console.log('StreamVideoPlayerOverlay activeitemchange');
                                   }
                                },
                                items: [{
                                style: 'padding:1em;',
                            html:[  "<div class=\"postTitle\">",record.get('title'),"</div><div class=\"postDate\">Added on ",
                                    record.get('date'),"</div><div class=\"postDesc\">",record.get('content'),"</div>"
                                ].join("") 
                    },

                    {
                    xtype: 'panel',
                    layout: 'card',
                    cls: 'videoPlayeriPad',
                    items:[{
                        xtype: 'jwplayer',
                        playerOptions: {
                            file: record.get('ipadvideo'),
                            image: record.get('poster'),
                            width: 500, 
                            height: 281,
                            plugins: {
                             'gapro-1': { accountid: 'UA-23363754-1', idstring: '||title||' }
                            },
                            skin: 'http://www.cox7.com/wp-content/mediaplayer/skins/beelden/beelden/glow.xml',

                        }
                    }]
                    }
                    ],
                                scrollable: true
                            }

                            );

                    StreamVideoPlayerOverlay.setActiveItem(2);
                    StreamVideoPlayerOverlay.show();
                    } 
```

# vim - 将明天主题添加到 janus (macvim)

> ID：12271967
> 
> 赞同：4
> 
> 时间：2012-09-04T22:04:53.480
> 
> 标签：vim, themes, macvim

如何在 MacVim 中将明天主题添加到 Janus？

[https://github.com/chriskempson/tomorrow-theme](https://github.com/chriskempson/tomorrow-theme)

步骤是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T03:28:35.933

您可以将主题的`vim`文件夹复制到该`~/.janus`文件夹​​中，如Janus的[自定义 wiki 页面中所述。](https://github.com/carlhuda/janus/wiki/Customization)给`vim`文件夹起一个更具描述性的名称是个好主意，例如`tomorrow-theme`.

例如，假设你有*明天主题*的本地副本（克隆） `<path_to_tomorrow_theme>`，你可以这样做

```
$ cd ~/.janus
$ mkdir tomorrow-theme
$ cp -R <path_to_tomorrow_theme>/vim/ tomorrow-theme 
```

请注意文件夹`/`路径末尾的斜杠。`vim`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T22:37:46.313

[从阅读文档](http://vimdoc.sourceforge.net/htmldoc/usr_06.html#06.3)开始。之后，将文件从[github/vim](https://github.com/chriskempson/tomorrow-theme/tree/master/vim)复制到`~/.vim`目录中。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-04T21:04:26.003

我想有多种方法可以做到这一点。

我`cd`进入了：

```
.vim/janus/vim/colors 
```

我创建了`tomorrow-theme`文件夹并`cd`'ed 进入：

```
.vim/janus/vim/colors/tomorrow-theme 
```

在`tomorrow-theme`我创建`colors`目录的文件夹中

```
.vim/janus/vim/colors/tomorrow-theme/colors 
```

这就是我粘贴下载的`.vim`主题的地方

```
Tomorrow-Night-Blue.vim     Tomorrow-Night-Bright.vim   Tomorrow-Night-Eighties.vim Tomorrow-Night.vim          Tomorrow.vim 
```

# c# - c# 初始化后关闭的第二个表单

> ID：12271968
> 
> 赞同：1
> 
> 时间：2012-09-04T22:04:56.973
> 
> 标签：c#, winforms

我正在尝试创建一个简单的 c# 应用程序（我第一次尝试 c#，所以请善待）。我创建了一个带有文本框的表单来捕获“身份验证代码”，然后对其进行验证，然后 Web 客户端获取一个 xml 文件，将此身份验证代码传递给请求。发回的数据被解析等

我想要做的是，一旦 xml 返回并且我完成了检查以使其生效，一切都很好。我想关闭第一个表单并加载第二个表单，我将在其中以编程方式添加以漂亮格式显示 xml 数据所需的表单组件。

我的问题是我无法让第二种形式保持打开状态（我无疑以错误的方式调用第二种形式）。这是我所拥有的：

```
// close current form
this.Close();

//open new form
xmlViewForm xmlView = new xmlViewForm();
xmlView.Show(); 
```

我相信你现在已经发现了我犯的错误。但只是为了完整起见，它会关闭第一个表单，打开第二个表单，然后程序立即退出（第二个表单显然会闪烁一秒钟）。

我已经尝试了一些东西，但它们都不起作用（包括使用`Application.Run(new xmlViewForm());`而不是实例化类和使用`show()`方法。显然你知道那不起作用，现在我也这样做了，尽管我对 c# 的理解不够远以至于无法工作出为什么。

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-04T22:13:10.763

首先想到的是您正在关闭通过调用`Application.Run(new MyForm())`或类似方式打开的表单。这种形式具有特殊意义；它是应用程序的“主窗体”，当关闭时，它向应用程序发出信号，表明用户想要关闭整个程序，无论打开了多少其他窗口。

有两种可能的修复方法。首先，也是最简单的，就是简单地 Hide() 您不希望显示的表单，而不是在其上调用 Close()。虽然不可见，但它仍在运行，因此应用程序不会关闭。

第二种解决方案是定义一个应该运行的自定义“应用程序上下文”，而不是通过指定要监视的主窗体创建的“默认上下文”。为此，您可以从 System.Windows.Forms.ApplicationContext 派生一个自定义类。指定此上下文后，您可以使用它来控制应用程序的终止，而不是基于主窗体的关闭。启动两个“主要表单”并跟踪两者是否仍然处于活动状态的示例代码可以[在该类的 MSDN 页面上找到](http://msdn.microsoft.com/en-us/library/system.windows.forms.applicationcontext.aspx). 您可以通过为主窗体指定加载和关闭处理程序来执行类似的操作，然后在主窗体实例化它时将它们传递给子窗体，从而保持“打开”窗体的计数，并在该数字为时关闭整个应用程序零。`childForm.Show()`只需通过调用before确保在关闭主窗体之前加载子窗体`this.Close()`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-04T22:08:13.057

关闭主窗体后，您**无法打开第二个窗体。**

做这个：

```
//open new form
xmlViewForm xmlView = new xmlViewForm();
xmlView.Show();

// hide current form
this.Hide(); 
```

主窗体不能关闭，因为它是父窗体。如果您关闭主窗体，子窗体将永远不会出现。

`Program.cs`或通过编辑文件将 xmlViewForm 更改为主窗体

```
Application.Run(new XmlViewForm()); 
```

然后您可以在加载时轻松调用其他表单并随意关闭它：

```
private void XmlViewForm_Load(o, s)
{
    // hide current form, and this will remain hidden until the other form is done with it's work
    this.Hide();

    //open the other form
    TheOtherForm _theOtherForm = new TheOtherForm();
    _theOtherForm.Show();

}

private void TheOtherForm_Closed(o, s)
{
    // show current form
    this.Show;

} 
```

# javascript - 在javascript中将标量变量转换为包含变量的数组

> ID：12271973
> 
> 赞同：1
> 
> 时间：2012-09-04T22:05:51.877
> 
> 标签：javascript, jquery

在 JavaScript 中如何转换`5`？`[5]`我有一种使用 jQuery 的方法，`$.inArray`如果有人只是通过转换为带有一个条目的数组来传入标量变量，我希望它能够工作，这将是标量。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-04T22:07:58.757

如果我理解正确，你想要这样的东西：

```
function myFunction(scalarValue) {
    if (typeof scalarValue != "object") {
        scalarValue = [scalarValue];
    }
    console.log(scalarValue); // Now an array
} 
```

### 编辑

如果你知道它是一个标量值（它还没有变成一个数组），你可以这样做：

```
var scalarArray = [scalarValue]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-04T22:12:13.193

```
scalarValue = scalarValue instanceof Array ? scalarValue : [scalarValue] 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-04T22:13:11.687

如果你想要一个 jquery 答案，那么你可以使用这个：

```
jQuery.makeArray( 5 ) 
```

# c++ - 从 asio 处理程序产生新的异步请求

> ID：12271974
> 
> 赞同：1
> 
> 时间：2012-09-04T22:05:56.160
> 
> 标签：c++, boost, boost-asio, shared-ptr

我正在尝试使用 ASIO，并认为一个好的第一个项目将是一个简单的网络爬虫：下载一个 html 页面，找到其中的链接，下载所有链接。

我尝试修改 ASIO http 客户端示例以使用 enable_shared_from_this 而不是原始指针，以便我可以从前一个任务的处理程序中生成新的异步任务，而不必担心资源在我的工作中被删除。

当我尝试对我的客户端进行子类化以以不同的方式处理不同的页面时，问题就开始了。编译器抱怨 shared_ptr 的类型与`this`.

有人知道这是如何解决的吗？我一直无法自己弄清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T08:42:35.217

这与Asio无关。

如果您从 继承了一个基类`enable_shared_from_this`，但在派生的基类中需要它，请使用`boost::static_pointer_cast`：

```
struct base : enable_shared_from_this<base>
{
};

struct derived : base
{
  shared_ptr<derived> shared_from_derived()
  {
    return static_pointer_cast<derived>(shared_from_this());
  }
}; 
```

# php - CKEditor 和 CkFinder 在 PHP 中工作正常，但不显示图像、flash 等

> ID：12271983
> 
> 赞同：4
> 
> 时间：2012-09-04T22:07:13.127
> 
> 标签：php, ckeditor, ckfinder

我正在使用 CKEditor 和 CKFinder。两者都工作正常。当我浏览（或直接复制）图像（或闪存）到 CKEditor 时，它会显示在其中并插入到 MySql 数据库中。

将其插入 MySql 数据库后，我尝试将其显示在不显示的 HTML 表中，并显示替代文本。

通过 CKFinder 浏览图像后的图像路径如下所示。

```
<img alt="" src="/ckfinder/userfiles/images/1243_SS_2502.jpg" style="width: 490px; height: 618px;" /> 
```

插入数据库的内容如下。

```
&lt;img alt=&quot;\&amp;quot;\&amp;quot;&quot; data-cke-saved-src=&quot;\&quot; 

src=&quot;\&amp;quot;/ckfinder/userfiles/images/1243_SS_2502.jpg\&amp;quot;&quot; st  yle=&

quot;\&amp;quot;width:&quot; 490px;=&quot;&quot; height:=&quot;&quot; 618px;\&quot;= quot;&quot;&gt; 
```

试了[`htmlentities()`](http://php.net/manual/en/function.htmlentities.php)还是不行。在使用 JSTL/EL 处理 JSP 时，我必须执行以下操作。

```
<c:out value="${str}" default="No content found." escapeXml="false"/> 
```

`escapeXml="false"`，其中`str`用EL写的是一个`java.lang.String`保存转换后的Oracle`clob`数据。

在 PHP 中解决这种情况的方法是什么？CKEditor 和 CKFinder 对我来说都很好。

* * *

```
$ckeditor = new CKEditor();
$ckeditor->basePath = 'ckeditor/';
$ckeditor->config['filebrowserBrowseUrl'] = 'ckfinder/ckfinder.html';
$ckeditor->config['filebrowserImageBrowseUrl'] = 'ckfinder/ckfinder.html?type=Images';
$ckeditor->config['filebrowserFlashBrowseUrl'] = 'ckfinder/ckfinder.html?type=Flash';
$ckeditor->config['filebrowserUploadUrl'] = 'ckfinder/core/connector/php/connector.php?command=QuickUpload&type=Files';
$ckeditor->config['filebrowserImageUploadUrl'] = 'ckfinder/core/connector/php/connector.php?command=QuickUpload&type=Images';
$ckeditor->config['filebrowserFlashUploadUrl'] = 'ckfinder/core/connector/php/connector.php?command=QuickUpload&type=Flash';
$ckeditor->editor('description', $ed_about_us); 
```

* * *

**编辑：**

```
<?php include_once("Lock.php");?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Wagafashion</title>

<link rel="stylesheet" href="css/validationEngine.jquery.css" type="text/css"/>
<link rel="stylesheet" href="css/template.css" type="text/css"/>
<!--<script type="text/javascript" language="javascript" src="ckeditor/ckeditor.js"></script>-->
<script src="js/jquery-1.6.min.js" type="text/javascript"></script>        
<script src="js/languages/jquery.validationEngine-en.js" type="text/javascript" charset="utf-8"></script>

<script src="js/jquery.validationEngine.js" type="text/javascript" charset="utf-8"></script><script>
    jQuery(document).ready(function(){
        // binds form submission and fields to the validation engine
        jQuery("#dataForm").validationEngine();
    });            
</script>

<script language="javascript" type="text/javascript">
    function deleteSingle(id)
    {       
        var delId=confirm("About us with the id "+id+" is about to be deleted permanently.\n\nAttention : This action will never be undone!\n\nAre you sure...???");        
        return(delId==true?true:false);
    }

</script>

</head>

<body>
<?php
    include_once("Connection.php");
    include_once("ckeditor/ckeditor.php");
    $con=new Connection();
    $con->get_connection();

    $ed_about_us="";
    $flag=-1;
    $msg="";

    if(isset($_POST['btnSubmit']))
    {
        $act=trim($_POST['param_action']);
        $about_us=$_POST['cms_description'];        

        if($act=="add")
        {   
            $res=$con->get_data("select count(*) as cnt from cms"); 
            $cnt_cmt=mysql_result($res, 'cnt');

            if($cnt_cmt==0)
            {
                $flag=$con->iud("insert into cms (about_us)values('".mysql_real_escape_string(urlencode($about_us))."')");              
            }
            else
            {
                $flag=$con->iud("update cms set about_us='".mysql_real_escape_string(urlencode($about_us))."'");
            }

            if($flag==1)
            {
                $msg="Insertion done successfully.";        
            }
            else if($flag==0)
            {
                $msg="Insertion failed - reason : ".mysql_errno()." : ".mysql_error();  
            }
        }
        else if($act=="edit")
        {
            $cms_id=$_POST['cms_id'];
            $flag=$con->iud("update cms set about_us='".mysql_real_escape_string(urlencode($about_us))."' where id=".$cms_id."");               
            if($flag==1)
            {
                $msg="About us has been updated successfully.";
            }
            else if($flag==0)
            {
                $msg="Updation failed - reason : ".mysql_errno()." : ".mysql_error();   
            }           
        }
    }           
    else if(isset($_GET['ed_id']))
    {
        $ed_res=$con->get_data("select about_us from cms where id=".$_GET['ed_id'].""); 

        while($row=mysql_fetch_assoc($ed_res))
        {
            $ed_about_us=$row['about_us'];      
        }
    }   
    else if(isset($_GET['del_id']))
    {
        $flag=$con->iud("update cms set about_us='' where id=".$_GET['del_id']);
        if($flag==1)
        {
            $msg="About us been deleted successfully.";
        }
        else if($flag==0)
        {
            $msg="Can not delete - reason : ".mysql_errno()." : ".mysql_error();    
        }
    }
    else if(isset($_POST['btnDelete']))
    {
        $set_del=$_POST['setDel'];
        $flag=$con->iud("update cms set about_us='' where id in($set_del)");
        $size=sizeof(split(",", $set_del));

        if($flag==1)
        {
            if($size==1)
            {
                $msg="1 row deleted.";  
            }
            else
            {
                $msg=$size." rows deleted.";    
            }           
        }
        else if($flag==0)
        {
            $msg="Can not perform deletion - reason : ".mysql_errno()." : ".mysql_error();  
        }       
    }
?>

    <?php include("tamplate/Template1.php");?>
        <h2>About Us</h2>
    <?php include("tamplate/NewTemplate.php");?>

    <?php
        if($flag==1)
        {        
            echo "<p>";
            ?>
                <!--[if !IE]>start system messages<![endif]-->
                <ul class="system_messages">                                     
                    <li class="green"><span class="ico"></span><strong class="system_title"><?php echo $msg; ?></strong></li>                    
                </ul>
                <!--[if !IE]>end system messages<![endif]-->
            <?php               
            echo "</p>";
        }
        else if($flag==0)
        {     
            echo "<p>";
            ?>
                <!--[if !IE]>start system messages<![endif]-->
                <ul class="system_messages">                    
                    <li class="red"><span class="ico"></span><strong class="system_title"><?php echo $msg; ?></strong></li>                                        
                </ul>
                <!--[if !IE]>end system messages<![endif]-->
            <?php               
            echo "</p>";    
        }
    ?>
<img alt=\"\" src="/ckfinder/userfiles/images/1243_SS_2502.jpg" style=\"width: 490px; height: 618px;\" />
      <!--[if !IE]>start forms<![endif]-->
    <form action="<?php $_SERVER['PHP_SELF']; ?>" id="dataForm" name="dataForm" method="post" class="search_form general_form">
        <!--[if !IE]>start fieldset<![endif]-->
        <fieldset>
            <!--[if !IE]>start forms<![endif]-->
            <div class="forms">

            <!--[if !IE]>start row<![endif]-->
            <div class="row">   
            <?php
                $ckeditor = new CKEditor();
                $ckeditor->basePath = 'ckeditor/';
                $ckeditor->config['filebrowserBrowseUrl'] = 'ckfinder/ckfinder.html';
                $ckeditor->config['filebrowserImageBrowseUrl'] = 'ckfinder/ckfinder.html?type=Images';
                $ckeditor->config['filebrowserFlashBrowseUrl'] = 'ckfinder/ckfinder.html?type=Flash';
                $ckeditor->config['filebrowserUploadUrl'] = 'ckfinder/core/connector/php/connector.php?command=QuickUpload&type=Files';
                $ckeditor->config['filebrowserImageUploadUrl'] = 'ckfinder/core/connector/php/connector.php?command=QuickUpload&type=Images';
                $ckeditor->config['filebrowserFlashUploadUrl'] = 'ckfinder/core/connector/php/connector.php?command=QuickUpload&type=Flash';
                $ckeditor->editor('cms_description', urldecode($ed_about_us));

            ?>             

            <!--[if !IE]>start row<![endif]-->
            <div class="row">
                <div class="buttons">                                                                                                                                                   
                        <span class="button send_form_btn"><span><span>Submit</span></span><input type="submit" value="Submit" id="btnSubmit" name="btnSubmit" onclick="return validate();"></span>                    
                </div>
            </div>
            <!--[if !IE]>end row<![endif]-->
            </div>
        </fieldset>

        <!--[if !IE]>end fieldset<![endif]-->                
        <input type="hidden" id="param_action" name="param_action" value="

            <?php
                if(isset($_GET['ed_id']))
                {
                    echo "edit";        
                }
                else
                {
                    echo "add"; 
                }
            ?>
            " />

            <input type="hidden" id="cms_id" name="cms_id" value="<?php echo isset($_GET['ed_id'])?$_GET['ed_id']:"";?>" />            
    </form>            

    <?php include("tamplate/Template2.php");?>
        <h2>About Us</h2>
    <?php include("tamplate/NewTemplate1.php");?>   

    <form action="<?php echo $_SERVER['PHP_SELF'];?>" id="mainForm" name="mainForm" method="post">                                                

        <?php include("tamplate/ExtraTemplate.php");?>      

            <table cellpadding="0" cellspacing="0" width="100%">
                <tbody>
                <th style="width: 10px;">Check</th>
                <th style="width: 450px;">About Us</th>                
                <th style="width: 10px;">Actions</th>

                <?php

                    $get_data=$con->get_data("select id, about_us from cms order by id");
                    $cnt=1;$flag='';

                    while($data_row=mysql_fetch_assoc($get_data))
                    {
                        extract($data_row); 
                        $cnt%2==0?$flag="second":$flag="first";
                        ++$cnt;

                        echo "<tr class='$flag'>";
                        echo "<td><input type='checkbox' name='chk' value='$id'></td>";
                        echo "<td>".urldecode($about_us)."</td>";

                        echo "<td><div class='actions'><ul><li><a href='".$_SERVER['PHP_SELF']."?ed_id=$id' class='action2'></a></li>";
                        echo "<li><a href='".$_SERVER['PHP_SELF']."?del_id=$id&table_name=cms&pri=id' onclick='return deleteSingle($id);' class='action4'></a></li></ul></div></td>";
                        echo "</tr>";
                    }
                ?>

                </tbody>
            </table>    
            <input type='hidden' id='setDel' name='setDel'/>
            <?php include("tamplate/Template3.php");?>         
    </form>
    <?php include("tamplate/Template4.php");?> 
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T22:17:22.617

您是否尝试使用`html_entity_decode()`来显示内容？它将解码编码的 html 以获得更好的输出。参考[这里](http://www.php.net/manual/en/function.html-entity-decode.php)

**编辑**
将您的查询更改为以下

`insert into cms (about_us) values ('".mysql_real_escape_string(urlecode(stripslashes($about_us)))‌​."')`

当您从数据库中获取它时，它使用

`urldecode($value)`

`$value`您从数据库中获得的块在哪里。

# mysql - 记录和回放 MySQL 数据库负载

> ID：12271984
> 
> 赞同：2
> 
> 时间：2012-09-04T22:07:19.983
> 
> 标签：mysql, performance

我正在调试 MySQL 服务器中的慢查询问题。查询通常在 100-400 毫秒内完成，但有时会飙升到 10 或 100 秒。

查询是由我无法控制的应用程序生成的，并且有多个数据库（每个客户一个）。慢查询似乎是随机出现的，当记录慢查询时，RAM、磁盘或 CPU 都没有加载。当我手动运行查询时，它们运行良好（以毫秒为单位），这让我怀疑与其他读写查询结合使用的锁定问题。查询本身很糟糕（无法在 WHERE 或 ORDER BY 子句中使用索引），但最大的表相对较小（最多 200.000 行），并且几乎没有 JOIN。当我分析查询时，大部分时间都花在对结果进行排序上（在查询运行良好的情况下）。

我无法在测试环境中重现极度缓慢的情况，我现在最好的想法是停止生产 MySQL 服务器，创建数据库副本，启用完整的查询日志记录并再次启动服务器。这样我应该能够重放负载并重现问题。但是一般的查询日志似乎只记录查询，而不是查询的目标数据库。我还有其他 MySQL 记录/重播选项吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T22:14:13.090

可以使用慢查询日志：[http ://dev.mysql.com/doc/refman/5.1/en/slow-query-log.html](http://dev.mysql.com/doc/refman/5.1/en/slow-query-log.html)

只需将阈值设置为一个非常小的值（希望您正在运行 mysql > 5.1 ）

否则你可以使用 tcpdump： [http ://www.mysqlperformanceblog.com/2008/11/07/poor-mans-query-logging/](http://www.mysqlperformanceblog.com/2008/11/07/poor-mans-query-logging/)

当然，如果您使用它，您可能需要查看 percona 工具包的 pt-query-digest 来处理 tcpdump 输出：[http ://www.percona.com/doc/percona-toolkit/2.1/pt-query-摘要.html](http://www.percona.com/doc/percona-toolkit/2.1/pt-query-digest.html)

为了将来参考，您可能需要设置查询和服务器监控： [https](https://github.com/box/Anemometer/wiki) ://github.com/box/Anemometer/wiki 和 [https://github.com/box/RainGauge/wiki/What-is-Rain-Gauge %3F](https://github.com/box/RainGauge/wiki/What-is-Rain-Gauge%3F)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T12:22:48.000

我终于解决了这个问题。该应用程序正在执行以下操作：

```
cursor = conn.execute("SELECT * FROM `LargeTable`")
while cursor.has_more_rows():
  cursor.fetchrow()
  do_something_that_takes_a_while()
cursor.close() 
```

它一次获取和处理结果集 1 行。如果循环需要 100 秒才能完成，则表会在服务器上锁定 100 秒。

在 MySQL 服务器上更改此设置：

```
set global SQL_BUFFER_RESULT=ON; 
```

使缓慢的查询立即消失，因为结果集现在被推送到临时表，因此无论应用程序消耗结果集的速度有多慢，都可以删除表锁。该设置带来了许多其他性能问题，但幸运的是，服务器的尺寸可以处理这些问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-01T01:18:07.530

Percona 正在开发一个名为 Playback 的新工具，它完全符合您的要求： [http ://www.mysqlperformanceblog.com/2013/04/09/percona-playback-0-6-for-mysql-now-available/](http://www.mysqlperformanceblog.com/2013/04/09/percona-playback-0-6-for-mysql-now-available/)

# java - Rally Rest Api：从缺陷中获取用户的电子邮件地址

> ID：12271990
> 
> 赞同：1
> 
> 时间：2012-09-04T22:07:44.073
> 
> 标签：java, rally

使用 Rally 的 rest api，我如何查询以找到用户的电子邮件地址？

例如，我有这个查询来获取一个缺陷，其中包含打开它的用户的全名和拥有缺陷的用户：

```
 QueryRequest defectRequest = new QueryRequest("defect");
 defectRequest.setFetch(new Fetch("Project", "LastUpdateDate", "FormattedId"));
 defectRequest.setQueryFilter(new QueryFilter("Project.Name", "=", rallyProjectName).and(new QueryFilter("LastUpdateDate", ">", defectTimestamp.getTimestamp())));
 QueryResponse projectDefects = rallyApi.query(defectRequest); 
```

现在我想从缺陷中获取 Submitted By 和 Owner 用户并获取他们的电子邮件地址。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T01:10:26.380

确保在 Fetch 中包含“Owner”和“SubmittedBy”字段以查找缺陷：

```
 defectRequest.setFetch(new Fetch("Project", "LastUpdateDate", "FormattedId", "Owner", "SubmittedBy")); 
```

然后每个返回的缺陷上的 Owner 和 SubmittedBy 字段（如果填充在 Rally 中且不为空）将引用 Rally 中相应的 User 对象。然后，您对此进行第二次请求的倾向就很明显了。最简单的方法是使用该 ref 并直接针对 ref 执行 GetRequest。下面以 Owner 字段为例（请原谅笨拙的 try/catch 块 - 它正在捕获空的 Owner 字段）：

```
 QueryResponse projectDefects = restApi.query(defectRequest);
        if (projectDefects.wasSuccessful()) {
            for (JsonElement result : projectDefects.getResults()) {
                JsonObject defect = result.getAsJsonObject();
                try {
                    JsonObject ownerJsonObject = defect.get("Owner").getAsJsonObject();
                    String ownerRef = ownerJsonObject.get("_ref").getAsString();
                    GetRequest ownerRequest = new GetRequest(ownerRef);
                    GetResponse ownerResponse = restApi.get(ownerRequest);
                    JsonObject ownerObj = ownerResponse.getObject();
                    System.out.println(String.format("Read owner. EmailAddress = %s",
                            ownerObj.get("EmailAddress").getAsString()));
                } catch (java.lang.IllegalStateException ise) {
                    // System.out.println("IllegalStateException caught: ");
                    // ise.printStackTrace();
                }
            }
        } 
```

# c# - 即使提供了显式值，HtmlHelper.TextBox 也会使用模型值

> ID：12271994
> 
> 赞同：7
> 
> 时间：2012-09-04T22:07:54.297
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, visual-studio-2010, html-helper

在一个视图中，我正在使用以下[重载](http://msdn.microsoft.com/en-us/library/dd492984(v=vs.108))：`HtmlHelper.TextBox`

```
public static MvcHtmlString TextBox(
    this HtmlHelper htmlHelper,
    string name,
    Object value
) 
```

该文档指出：

> *价值*
> 
> > 类型：`System.Object`
> > 
> > 文本输入元素的值。**如果此值为`null`**`ViewDataDictionary`，则从对象中检索元素的值。如果那里不存在值，则从`ModelStateDictionary`对象中检索该值。

当我调用这个重载时，我确实提供了一个`value`，并且这个值不为空。然而，文本框的值是从`ModelStateDictionary`那里检索到的。

为了强制文本框使用内联提供的值，我必须首先在控制器中重置模型（或从键集合中删除带有文本框名称的键）。

这同样适用于由 . 呈现的其他控件`HtmlHelper`。

我的理解哪里错了？或者这是文档中的错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T23:51:15.280

`ModelState`在所有输入助手中始终具有优先权，而不仅仅是`TextBox`. 这允许您在视图中指定默认值，并在 POST 后渲染发布的值（取自 ModelState），而无需手动将发布的值传递给视图。要使用不同的值，您必须从 ModelState 中删除该条目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T10:33:46.247

这就是模型绑定器的工作方式，它从模型状态中获取值，可能是为了保留回发失败或验证失败的值。您是否尝试过使用 Html 属性来设置值

```
Html.TextBox("Id", new { Value = Model.Id}) 
```

硅

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-14T15:59:31.767

也许这会有所帮助。

使用具有以下属性的视图模型和 ViewData["textboxvalue"]

```
public string Id { get; set; } 
```

如果您提供了一个可以绑定到“value”参数中的对象，那么 html 助手将始终使用它的值。

- 绑定到视图模型的文本框值 - 这些显示模型的 id

```
@Html.TextBox("Id", Model.Id) 
```

- 带有视图数据提供值的文本框 - 这些显示视图数据的值

```
@Html.TextBox("Id", ViewData["textboxvalue"]) 
```

即使提供的名称与属性名称不同，其值仍然是模型提供的值

- 绑定到视图模型的文本框值 - 这些显示模型的 id

```
@Html.TextBox("Id2", Model.Id) 
```

- 带有视图数据提供值的文本框 - 这些显示视图数据的值

```
@Html.TextBox("Id2", ViewData["textboxvalue"]) 
```

如果您提供自己的自定义

- 提供硬编码值的文本框 - 这显示了视图中提供的字符串

```
@Html.TextBox("Id", "my hardcoded value in view") 
```

文档说明 - 如果您不填充“值”参数，如下所示：

```
@Html.TextBox("Id", null) 
```

然后 mvc 框架会自动尝试搜索绑定到视图的模型和数据字典。

如果你有这种情况，那么

- 在视图模型中找到一个名为“Id”的属性。文本框值设置为模型的值

```
@Html.TextBox("Id", null) 
```

但如果“名称”值不是模型/字典中的属性/键，则框架找不到任何值，因此文本框值将为空字符串

- 名称不是视图模型或视图数据中的属性的文本框

```
@Html.TextBox("Id2", null) 
```

# java - 将照片保存到存储卡而不是本地

> ID：12271997
> 
> 赞同：0
> 
> 时间：2012-09-04T22:08:04.243
> 
> 标签：java, android, android-camera

我有以下代码拍照并保存。但我想将最终图像保存到 SD 卡。

```
public class TakePhoto extends Activity {

    ImageView iv;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_take_photo);

        iv = (ImageView) findViewById(R.id.imageView1);

        Button b = (Button) findViewById(R.id.button1);
        b.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {

                Intent intent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);
                startActivityForResult(intent, 0);

            }
        });
    }

    @Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {
        // TODO Auto-generated method stub
        super.onActivityResult(requestCode, resultCode, data);

        Bitmap bm = (Bitmap) data.getExtras().get("data");
        writeBitmapToMemory("image.png", bm);
        iv.setImageBitmap(bm);

    }

    public void writeBitmapToMemory(String filename, Bitmap bitmap) {
        FileOutputStream fos;

        try {
            fos = this.openFileOutput(filename, Context.MODE_PRIVATE);
            bitmap.compress(Bitmap.CompressFormat.PNG, 100, fos);
            fos.close();

        } 
        catch (FileNotFoundException e) {
            e.printStackTrace();

        } 
        catch (IOException e) {
            e.printStackTrace();

        }

    } 
```

有一点似乎正在发挥作用。我正在尝试保存到 SD 卡，但出现错误：（pastebin.com/FHihS4Wv）

我改变`writeBitmapToMemory("/mnt/extSdCard/image.png", bm);`了我的 onActivityResult - 但它因上面的 pastebinned 错误而崩溃

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T22:18:21.963

根据这个问题[java.lang.IllegalArgumentException: contains a path separator](https://stackoverflow.com/q/5963535/975959)`String`你得到它是因为你试图使用对象而不是`File`对象 访问子目录

尝试将`File`对象传递给该特定图像文件的函数，而不是包含文件名的字符串。

像这样的东西：

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub
    super.onActivityResult(requestCode, resultCode, data);

    Bitmap bm = (Bitmap) data.getExtras().get("data");
    File imageFile = new File("image.png");
    writeBitmapToMemory(imageFile, bm);
    iv.setImageBitmap(bm);

}

public void writeBitmapToMemory(Filefile, Bitmap bitmap) {
    FileOutputStream fos;

    try {
        // fos = this.openFileOutput(file, Context.MODE_PRIVATE);
        fos = new FileOutputStream(file);
        bitmap.compress(Bitmap.CompressFormat.PNG, 100, fos);
        fos.close();

    } 
.... 
```

编辑：它现在应该可以工作，但我没有测试它。